# StackOverflow 问答 11199000-11199999

# actionscript-3 - Adobe Air 在 Safari 下启动网页而不是 stagewebview

> ID：11199001
> 
> 赞同：0
> 
> 时间：2012-06-25T23:51:12.200
> 
> 标签：actionscript-3, air

是否可以通过在 iOS 下启动 Safari 而不是 stagewebview 来打开网页？

（注意我已经尝试过 URLrequest，它在 iDevice 上不起作用）。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T23:56:10.717

使用 navigateToURL 函数。它应该会在实际的 Safari 浏览器中自动打开链接。

```
navigateToURL(new URLRequest("http://www.domain.com")); 
```

# asp.net - 更改 ASP.NET XHTML 呈现模式

> ID：11199002
> 
> 赞同：4
> 
> 时间：2012-06-25T23:51:13.700
> 
> 标签：asp.net, html

我正在使用设计师提供的 html 来创建母版页。

html 文档类型设置为 HTML 4.0 Strict。html 中的元标记没有结束标记（它们以 > 而不是 /> 结尾）并且此 html 使用 W3 验证器工具兼容。

例如：

`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" >`

但是，ASP.NET 在渲染页面之前会更改 head 属性并修改结束标记，如下所示

`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`

现在在标签末尾添加 /> 会导致 W3 验证器出错。

如何防止这种情况发生，并确保呈现的 html 符合设计人员的意图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:33:45.133

您可以通过强制它使用特定的 XHTML 一致性呈现模式来更改 ASP.NET 呈现 HTML 的方式。我不确定更改渲染器可能会对 ASP.NET 生成的 HTML 输出产生什么其他副作用。这可以在 web.config 中使用以下内容进行设置。

```
<system.web>
    <!-- other elements here -->
    <xhtmlConformance 
        mode="Legacy" />
</system.web> 
```

使用“传统”渲染模式还有其他注意事项，有关其他渲染模式和详细信息，请参阅以下 MSDN 资源。

[Visual Studio 和 ASP.NET 中的 XHTML 标准](http://msdn.microsoft.com/en-us/library/exc57y7e.aspx)

[如何：在 ASP.NET 网站中配置 XHTML 呈现](http://msdn.microsoft.com/en-us/library/ms178159.aspx)

# c# - 需要使用 C# 进行多个正则表达式匹配

> ID：11199007
> 
> 赞同：-1
> 
> 时间：2012-06-25T23:51:39.637
> 
> 标签：c#, regex

所以我有这个飞行数据列表，我需要能够使用正则表达式解析它（这不是整个列表）。

```
1 AA2401 F7 A4 Y7 B7 M7 H7 K7 /DFW A LAX 4 0715 0836 E0.M80 9 3:21
 2 AA2421 F7 A1 Y7 B7 M7 H7 K7 DFWLAX 4 1106 1215 E0.777 7 3:09
 3UA:US6352 B9 M9 H9 K0 /DFW 1 LAX 1200 1448 E0.733 1:48

```

例如，我可能需要从第一行开始 1、AA、2401，以此类推。现在，我不是要求有人为我想出一个正则表达式，因为在大多数情况下，我已经到达了我自己几乎可以处理的地方。我的问题更多地与能够将数据存储在某个地方并访问它有关。

所以我只是想最初只是“匹配”我需要的第一条数据，即行号“1”。我仅获取第一个数字的“模式”是： ".?(\d{1,2}).*" 。它是 {1,2} 的原因是因为很明显，一旦你超过 10，它就需要能够取 2 个数字。该行的其余部分设置为肯定是空格或字母。

这是代码：

```
var assembly = Assembly.GetExecutingAssembly();
var textStreamReader = new StreamReader(
    assembly.GetManifestResourceStream("FlightParser.flightdata.txt"));
List<string> lines = new List<string>();
do
{
    lines.Add(textStreamReader.ReadLine());
} while (!textStreamReader.EndOfStream);

Regex sPattern = new Regex(@".?(\d{1,2}).*");//whatever the pattern is

foreach (string line in lines)
{
    System.Console.Write("{0,24}", line);

    MatchCollection mc = sPattern.Matches(line);
    if ( sPattern.IsMatch(line))
    {
        System.Console.WriteLine("  (match for '{0}' found)", sPattern);
    }
    else
    {
        System.Console.WriteLine();
    }
    System.Console.WriteLine(mc[0].Groups[0].Captures);

    System.Console.WriteLine(line);
}//end foreach
System.Console.ReadLine(); 
```

使用我正在编写的代码，我基本上只是试图将“1”放入匹配集合并以某种方式访问​​它并将其写入控制台（为了测试，这不是最终目标）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:55:20.930

以下表达式与“First”组中您要捕获的第一个数字匹配。

```
^\s*(?<First>\d{1}) 
```

我发现这个[正则表达式工具](http://www.ultrapico.com/Expresso.htm)在处理正则表达式时非常有用。试试看。在进行匹配时，还将 RegexOption 设置为 Multiline。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:40:12.093

您的正则表达式模式包含一个与任意数量的字符匹配的星号 - 即。整条线。删除“*”，它将只匹配“1”。[您可能会发现这样](http://regexpal.com/)的在线 RegEx 测试器很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T00:40:28.650

假设您的文件实际上并未像您发布的那样格式化并且每个字段都由某些东西分隔，您可以将行的前两位数与此正则表达式匹配（忽略 0 和前导零）：

```
^\s*([1-9]\d?) 
```

由于是分组的，所以可以通过对象的[`Groups`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.groups.aspx)属性访问匹配的部分[`Match`](http://msdn.microsoft.com/en-us/library/20cdsf18)。

```
var line = "12 foobar blah 123 etc";
var re = new Regex(@"^\s*([1-9]\d?)");
var match = re.Match(line);
if (match.Success)
{
    Console.WriteLine(match.Groups[1].Value); // "12"
}
else
{
    Console.WriteLine("No match");
} 
```

# c# - Cache.Insert 的委托

> ID：11199019
> 
> 赞同：2
> 
> 时间：2012-06-25T23:52:29.940
> 
> 标签：c#, asp.net, delegates, callback, cache-dependency

我希望能够在我的缓存更新回调中传递我的实际解析函数。如何使用委托优化下面的代码重复？谢谢

```
//intial setup code
public void getJSONContent() //can I pass itemUpdateCallback in here? Does it make sense?
{

    Content = (String)HttpContext.Current.Cache[Path];

    if (Content == null)
    {                
        Content = parseXMLContent();

        HttpContext.Current.Cache.Insert(
        key,
        Content,
        new CacheDependency(Path),
        Cache.NoAbsoluteExpiration,
        Cache.NoSlidingExpiration,    
        jsonUpdateCallback); //callback in the event of my file in cache has changed
        ^^^^^^^^^^^^^^^^^^

    }
}

private void jsonUpdateCallback(string key, CacheItemUpdateReason reason, out object value, out CacheDependency dependency, out DateTime exipriation, out TimeSpan slidingExpiration)
{
    dependency = new CacheDependency(key);
    exipriation = Cache.NoAbsoluteExpiration;
    slidingExpiration = Cache.NoSlidingExpiration;
    value = jsonXMLContent(); //how can pass this function into here, so I can can have different parse functions using the same code?
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
}

//intial setup code
public void getXMLContent() //can I pass itemUpdateCallback in here? Does it make sense?
{

    Content = (String)HttpContext.Current.Cache[Path];

    if (Content == null)
    {                
        Content = parseXMLContent();

        HttpContext.Current.Cache.Insert(
        key,
        Content,
        new CacheDependency(Path),
        Cache.NoAbsoluteExpiration,
        Cache.NoSlidingExpiration,    
        xmlUpdateCallback); //callback in the event of my file in cache has changed
        ^^^^^^^^^^^^^^^^^^

    }
}

private void xmlUpdateCallback(string key, CacheItemUpdateReason reason, out object value, out CacheDependency dependency, out DateTime exipriation, out TimeSpan slidingExpiration)
{
    dependency = new CacheDependency(key);
    exipriation = Cache.NoAbsoluteExpiration;
    slidingExpiration = Cache.NoSlidingExpiration;
    value = parseXMLContent(); //how can pass this function into here, so I can can have different parse functions using the same code?
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:22:46.893

正如您在代码中的注释中提到的那样，传递回调绝对是有意义的。

只是改变：

```
public void getContent() {...} 
```

到：

```
public void getContent(Func<TypeOfValue> parsecallback) {...} 
```

并将 itemUpdateCallBack 更改为也将`Func<TypeOfValue> parsecallback`其作为参数。

从外面，你需要这样的东西：

```
Func<TypeOfValue> func = () =>
{
    MethodCall1();
    MethodCall2();
    return MethodCall3();
};
myObj.getContent(func); 
```

要么，要么你可以将它传递给你的构造函数。它不太灵活，但非常适合您知道对于给定对象始终相同的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T00:26:22.123

像这样：

```
public void getXMLContent()
{
    getContent(parseXmlContent);
}

public void getContent(Func<string> parseContent)
{

    Content = (String)HttpContext.Current.Cache[Path];

    if (Content == null)
    {                
        Content = parseContent();

        HttpContext.Current.Cache.Insert(
        key,
        Content,
        new CacheDependency(Path),
        Cache.NoAbsoluteExpiration,
        Cache.NoSlidingExpiration,    
        delegate(string key2, CacheItemUpdateReason reason, out object value, out CacheDependency dependency, out DateTime expiration, out TimeSpan slidingExpiration) {
            itemUpdateCallback(key2, reason, parseContent, out value, out dependency, out expiration, out slidingExpiration);
        }); 
    }
}

private void itemUpdateCallback(string key, CacheItemUpdateReason reason, Func<string> parseContent, out object value, out CacheDependency dependency, out DateTime exipriation, out TimeSpan slidingExpiration)
{
    dependency = new CacheDependency(key);
    exipriation = Cache.NoAbsoluteExpiration;
    slidingExpiration = Cache.NoSlidingExpiration;
    value = parseContent();
} 
```

# oop - 如何用看似无对象的想法构建面向对象的软件？

> ID：11199027
> 
> 赞同：2
> 
> 时间：2012-06-25T23:54:07.320
> 
> 标签：oop, object, methodology

我的问题不是哲学问题，而是方法论问题。我了解我们如何构建软件来模拟日常流程和对象，例如很好地展示的“汽车”对象。我的问题是关于不太具体的事情。例如，如果我要构建一个从数据库返回产品和价格的搜索应用程序（作为一个更大的应用程序的一部分），我会想象它在生活中的实现方式吗？例如，代码中的“搜索代理”对象会模仿现实生活中的“人类搜索代理”（从中创建属性和方法）？本质上，如果某些东西在现实生活中没有明显的对应物，我们是否会采用这个想法并创建它的表示，以便我们可以对其进行编码？我应该如何考虑应用程序中不太模仿生活的对象？

感谢您的输入

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T23:59:27.557

不，对象是概念单位。

现实生活中的对象只是用来介绍面向对象的思想，但对象不必对应于“真实”的事物，它们也对应于没有现实生活等价物的抽象概念。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T00:01:53.643

面向对象的设计不是模仿现实生活中的对象。

这只是关于如何为您的问题域抽象对象的懒惰指导。一个好的开始，但对于更抽象的问题领域来说还不够。

基本思想是能够根据数据和行为抽象出可以从问题域中的其他单元中抽象出来的那些单元。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T00:00:47.257

查看功能，您的输入和输出。查找要完成的任务，例如检索数据、处理数据和创建逻辑表、数据表示。您可以将这些任务分解为更小但相似的任务。例如连接到服务器任务。请求发送任务，解析请求返回。尝试将您的目标分解为最小的部分，然后您可以将这些小函数和数据成员放入类中。

# r - R相当于MATLAB的结构？

> ID：11199032
> 
> 赞同：7
> 
> 时间：2012-06-25T23:55:25.073
> 
> 标签：r, matlab

是否有与 Matlab 结构类型等效的 R 类型？

我有一些命名向量，我尝试将它们存储在数据框中。理想情况下，我会简单地访问对象的一个​​元素，它会返回命名向量（就像 Matlab 中的结构）。我觉得使用数据框不是正确的做法，因为它可以存储命名向量的值，但不能存储一个向量与另一个向量不同时的名称。

更一般地说，是否可以将一堆不同的对象存储在 R 中的一个对象中？

**编辑**：正如乔兰所说，我认为这`list`可以完成工作。

```
l = list()
l$vec1 = namedVector1
l$vec2 = namedVector2
... 
```

如果我有名单

```
name1 = 'vec1'
name2 = 'vec2' 
```

解释器有什么方法可以理解当我使用像 name1 这样的变量名时，我指的不是变量名而是它的内容？我已经尝试过`get(name1)`，但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T00:31:03.480

对于您尝试做的事情，我仍然可能是错误的，但我认为这是按名称访问每个列表元素的最佳方法：

```
l <- list(a= 1:3,b = 1:10)
> ind <- "a"
> l[[ind]]
[1] 1 2 3 
```

也就是说，您将不得不`[[`明确使用。

# ios - 如何使用 iOS SoundEffect 管理音量？

> ID：11199033
> 
> 赞同：0
> 
> 时间：2012-06-25T23:55:35.887
> 
> 标签：ios, avplayer, soundeffect

我正在使用来自苹果样本的技术播放预先录制的声音：

```
 // Set up the pieces needed to play a sound.
    if (clickSound == NULL) {
        NSBundle *mainBundle = [NSBundle mainBundle];
        clickSound = [[SoundEffect alloc] initWithContentsOfFile:[mainBundle pathForResource:@"clickdown" ofType:@"wav"]];
    }

    // Play the sound.
    [clickSound play]; 
```

这可行，但产生的声音比预期的要响亮得多。这不是设备音量的问题；声音本身似乎被放大了，使用声音编辑器改变原始声音的幅度并不会改变 iPhone 上的播放音量。我相信原始声音正在被 SoundEffect 放大，因此峰值音量符合某些系统标准，但这正是我不想要的：我追求更柔和、更温和的声音，用一位年迈的政治家的话说。

如何设置预录声音样本的音量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T00:12:33.967

使用 AVAudioPlayer 的音量属性。像这样：

```
 clickSound.volume = 0.5; 
```

# c - time() 和上下文切换

> ID：11199034
> 
> 赞同：0
> 
> 时间：2012-06-25T23:55:40.197
> 
> 标签：c

我或多或少想知道`time()`在 C 标准库中是如何实现的，以及在下面描述的情况下会发生什么。尽管这个时间很可能可以忽略不计，但请考虑这样一种情况，即您对时间有硬性限制并且无法控制 CPU 调度程序（假设它是通用 CPU 的“好”调度程序）。

现在，如果我`time()`用来计算特定代码部分的执行时间，并使用从某个最大界限中减去该时间来确定其他一些与时间相关的变量，那么该变量将如何根据上下文切换进行倾斜？我知道我们可以使用`nice`和其他工具（即自定义调度程序等）来确保我们在需要时获得完整的 CPU 使用率，但是，我想知道这在与此类似的情况下一般如何工作以及存在哪些副作用由于系统的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T00:01:59.453

`time`应该测量挂墙时间。即，它给出了当前时间，不管你的进程运行了多少。

如果你想测量 cpu 时间，你应该使用`clock`它（尽管一些供应商，如 MS 实现它错误，所以它也做 wall time）。

当然，还有其他工具可以检索 CPU 使用率，例如[`times`](http://linux.die.net/man/2/times)在类 Unix 系统或[`GetProcessTimes`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683223.aspx)Windows 上。尽管便携性降低，但大多数人发现这些更有用。

# sql-server - SQL - 参考表具有基于日期的信息

> ID：11199038
> 
> 赞同：2
> 
> 时间：2012-06-25T23:55:56.750
> 
> 标签：sql-server

所以我有一个存储主键、描述和更新日期列的参考表。像这样的东西

```
SELECT * FROM tblReasonRef

ReasonCode   Description   UpdateDate
27           Lunch         2010-12-01
24           Meeting       2010-12-01
20           SpecialProj   2010-12-01 
```

前几天，代码描述发生了变化。所以现在查询返回以下...

```
ReasonCode   Description   UpdateDate
27           Lunch         2010-12-01
24           Meeting       2010-12-01
20           SpecialProj   2010-12-01
27           Training      2012-06-22
24           Meeting       2012-06-22
20           Lunch         2012-06-22 
```

源数据每 30 分钟跟踪一次员工可能进入的状态，因此您将有以下查询...

```
SELECT * FROM tblhActivity

MemberID     Date         Time    ReasonCode    ReasonDuration
10922        2012-06-21   1200    27            100
10922        2012-06-21   1500    24            1800
10922        2012-06-25   1230    27            100 
```

所以最初，我的查询是......

```
SELECT a.MemberID, a.Date, a.Time, r.Description, a.ReasonDuration 
  FROM tblhActivity a
 INNER JOIN tblReasonRef r ON a.ReasonCode = r.ReasonCode 
```

在 22 日更改之前一直运行良好。现在我对每个代码都有两个定义。问题是，如何创建一个根据日期选择正确代码的查询。

例如，我知道当日期是 21 日时，代码 27 的描述应该是午餐。25日，返回的描述应该是Training。

另请记住，在将代码添加到参考表中时，这可能会再次发生。我试图认为加入也应该在 UpdateDate 但我必须知道每个参考代码的开始和结束日期。有简单的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:30:38.753

您确实需要特定原因适用期间的开始日期和结束日期。您可以修改您`tblReasonRef`的日期以包含这些日期（最佳选择），或者您需要计算它们。

以下查询将计算每个原因的结束日期作为`ReasonCode`添加新条目的前一天。

```
SELECT ReasonCode
    ,Description
    ,UpdateDate StartDate
    ,DATEADD(d, -1, UpdateDate) PreviousEntryEndDate
    ,ROW_NUMBER() OVER(PARTITION BY ReasonCode ORDER BY UpdateDate) AS Row 
INTO #reason
FROM tblReasonRef

SELECT a.MemberID
    ,a.Date
    ,a.Time
    ,reason.ReasonCode
    ,a.ReasonDuration
FROM tblhActivity a
    INNER JOIN #reason reason
        ON a.ReasonCode = reason.ReasonCode
    LEFT JOIN #reason nextReason
        ON reason.Row = nextReason.Row - 1
        AND reason.ReasonCode = nextReason.ReasonCode
WHERE a.Date BETWEEN reason.StartDate AND ISNULL(nextReason.PreviousEntryEndDate, a.Date)

DROP TABLE #reason 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:26:09.033

如果您修改表**tblReasonRef**，如下所示：

```
ReasonCode, Description, StarDate, EndDate 
```

您可以执行以下 SQL 查询：

```
SELECT a.MemberID, a.Date, a.Time, r.Description, a.ReasonDuration 
FROM tblhActivity a
INNER JOIN tblReasonRef r ON a.ReasonCode = r.ReasonCode
WHERE a.Date between r.StartDate and r.EndDate 
```

请记住，您需要简单的代码和模型。

# sqlite - 如何轻松检测 sqlite3 中的触发深度？

> ID：11199041
> 
> 赞同：0
> 
> 时间：2012-06-25T23:57:14.487
> 
> 标签：sqlite, triggers

我有两个SQLite3表，A和B。当AX列更新时，我想修改BY，当BY更新时，我想修改AX

我可以使用两个触发器：

```
CREATE TRIGGER AtoB AFTER UPDATE OF X ON A BEGIN UPDATE B SET Y = ... 
```

和

```
CREATE TRIGGER BtoA AFTER UPDATE OF Y ON B BEGIN UPDATE A SET X = ... 
```

但似乎两个触发器都被调用一次，无论我修改哪个表，即一个总是调用另一个。

我只希望其中一个执行，因为更新在 A 到 B 的方向上是有损的。我不希望在 B 到 A 的相反方向上的损失，但如果两者都触发触发，那么它会在两者中都有损方向。

一个简单的解决方案是实现三个 UDF“increment_trigger_depth”、“decrement_trigger_depth”和“get_trigger_depth”，然后在更新语句中使用“WHEN trigger_depth == 1”。但是，有没有更简单的方法来确定 SQLite3 中的触发深度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:57:41.067

使用新表来保存触发深度。

```
CREATE TABLE trigger_depth (depth);
INSERT INTO trigger_depth VALUES (0); 
```

然后供`increment_trigger_depth`使用

```
UPDATE trigger_depth SET depth = depth + 1; 
```

等等

利用

```
... WHEN (SELECT depth FROM trigger_depth) <= 0 BEGIN ... 
```

保护你的触发动作

# ruby-on-rails - find_by_id(params[:subject_id]) vs where(:id => params[:subject_id]).first

> ID：11199043
> 
> 赞同：6
> 
> 时间：2012-06-25T23:57:18.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我是新来的铁路。只是想知道如果找不到 subject_id 会返回 nil 的更好方法是什么：

```
@subject = Subject.find_by_id(params[:subject_id]) 
```

或者

```
@subject = Subject.where(:id => params[:subject_id]).first 
```

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T00:51:17.003

我更喜欢`find_by`名称是描述性的，并且您无需调用第二个函数即可获得对象（即`first`）

```
User.find(9)             # returns User object. Throws exception when not found.    
User.find_by(id: 9)      # returns User object. Returns nil when not found.    
User.where(id: 9).first # returns User object. Returns nil when not found. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T00:03:07.203

它们都生成相同的 SQL 语句：

```
1.9.3p194 :003 > Example.find_by_id(9)
  Example Load (0.3ms)  SELECT "examples".* FROM "examples" WHERE "examples"."id" = 9 LIMIT 1
nil
1.9.3p194 :004 > Example.where(:id => 9).first
  Example Load (0.3ms)  SELECT "examples".* FROM "examples" WHERE "examples"."id" = 9 LIMIT 1
nil 
```

因此它们在数据库中将具有相同的性能特征。`find_by_*_`vs.的 Rails 代码可能略有不同`where`，但我想这与查询时间相比可以忽略不计。

* * *

**编辑：**鉴于[Ryan Bigg 在下面的评论](https://stackoverflow.com/questions/11199043/find-by-idparamssubject-id-vs-whereid-paramssubject-id-first/11199094#comment14701327_11199094)，我不得不建议第二种形式以实现前向兼容性。

# actionscript-3 - Flex 移动内存泄漏和内存分析

> ID：11199044
> 
> 赞同：1
> 
> 时间：2012-06-25T23:57:22.140
> 
> 标签：actionscript-3, apache-flex, mobile, actionscript, flex4.5

我一直在尝试分析我的 flex 移动应用程序是否存在内存泄漏，但我得到了非常无法解释的结果，所以我决定做一个可以想象的最基本的测试，看看 flex 内存管理是否可靠。

**第一视图.mxml**

```
<?xml version="1.0" encoding="utf-8"?>
    <s:View 
        xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" 
        title="FirstView"
        >

        <s:Button
            label="Go to child"
            click="navigator.pushView(ChildView)"
            />

</s:View> 
```

**子视图.mxml**

```
<?xml version="1.0" encoding="utf-8"?>
    <s:View 
        xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" 
        title="ChildView"
        >

        <s:Button
            label="Back to home"
            click="navigator.popView()"
            />

</s:View> 
```

而已。再简单不过了。

因此，如果您尝试使用内存分析器对此进行分析，请执行以下操作：

1.  启动应用程序，拍摄快照
2.  转到子视图并返回，然后运行垃圾收集并拍摄快照。
3.  重复步骤 2 几次

现在去尝试在任意两个快照上“查找游荡对象”，在返回第一个视图后您会发现 100 多个“游荡”对象，并且子视图中的所有内容都应该被破坏。这真的令人沮丧，因为在内存管理方面没有可以想象的方法可以使这更简单或“更干净”。

谁能解释为什么这些对象被创建并且永远不会被丢弃？此外，有关获得真正干净的基于视图的移动应用程序的任何提示，该应用程序真正删除与被破坏的视图相关的所有内存都会很棒。

到目前为止，我有：

*   总是添加弱事件监听器
*   关闭视图时将变量设置为 null（并删除事件侦听器）

谢谢安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:14:26.467

首先，您没有破坏示例中的任何对象 - 因此没有删除指针引用以供垃圾收集器抓取它们。

其次，从技术上讲，这不是内存泄漏，除非您的应用程序继续不必要地获取更多内存。据我所知，每次推送视图时它都不会创建一堆新对象，而是达到了限制，仅此而已。

我没有看到内存不断增长，我不认为因为你有 100 个对象挂在你周围，所以你有内存泄漏。现在，如果每次推送视图时获得 100 个对象，那肯定是内存泄漏。

让我知道你是否看到了不同的东西。:)

# java - 扩展枚举

> ID：11199045
> 
> 赞同：2
> 
> 时间：2012-06-25T23:57:39.107
> 
> 标签：java

我有许多枚举，每个枚举都有相同的字段和相同的方法。

```
public enum AddressSubType {
    DOM("dom"), INTL("intl"), POSTAL("postal");

    private final String keyword;
    private AddressSubType(String keyword) {
        this.keyword = keyword;
    }
    public String getKeyword() {
        return keyword;
    }
    @Override
    public String toString() {
        return keyword;
    }
}

public enum EmailSubType {
    INTERNET("internet"), X400("x.400");

    private final String keyword;
    private EmailSubType(String keyword) {
        this.keyword = keyword;
    }
    public String getKeyword() {
        return keyword;
    }
    @Override
    public String toString() {
        return keyword;
    }
} 
```

这些枚举有没有办法共享字段和方法（如父类）？我知道[不可能扩展 enums](https://stackoverflow.com/questions/1414755/java-extend-enum)。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:59:25.333

你可以声明一个`interface`他们都可以实现的。这将允许您将任一枚举类型作为参数传递给只关心该接口上的特定方法的方法。但是，这只允许您“共享”方法签名，而不是字段或方法实现。

如果您的枚举与给定示例中的一样微不足道，那么您没有任何大量的代码重复，所以这可能不是问题。如果您发现您的方法有更复杂、重复的代码，您应该考虑将该责任委托给一个单独的类。

如果您真的想为继承模式建模（例如`EmailAddress`"is a" `Address`），那么您需要远离`enums`. 您可以只使用一些静态字段来模拟枚举模式，但让它们中的每一个都是特定类的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T00:01:14.237

我可能会将它们组合成一个枚举对象，其中一些初始化时将“邮政”标志设置为真，而有些将“电子邮件”标志设置为真，因为这两者实际上只是不同的“类型”地址。

然后，如果您希望单独访问它们，或者您可以遍历整个事物，您可以让它返回迭代器。

您还可能会发现代码的其余部分变得简化，例如只有一个“地址”集合并在运行时检查给定地址是电子邮件地址还是邮政地址。

但这取决于它们实际上有多相似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T00:04:45.740

您可以创建一个 Value 类

```
public class Value {

  private final String keyword;

  private Value(String keyword) {
    this.keyword = keyword;
  }
  public String getKeyword() {
    return keyword;
  }
  @Override
  public String toString() {
    return keyword;
  }
} 
```

然后您可以创建具有公共静态最终值的类，如下所示：

```
public class AddressSubType extend Value {

  public static final AddressSubType DOM = new AddressSubType("DOM");
  public static final AddressSubType INTL = new AddressSubType("intl");
  ...

  private AddressSubType(String keyword) {
     super(keyword);
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T00:24:37.973

我会是那个说它的人。这是一个可怕的想法。

> 您应该在需要表示一组固定常量的任何时候使用枚举类型。这包括自然枚举类型，例如我们太阳系中的行星和您在编译时知道所有可能值的数据集——例如，菜单上的选择、命令行标志等。 [来源](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

除了里面的硬编码值之外，枚举不关心其他任何事情。通常，当一个人决定以面向对象的方式对事物进行分组时，他们会确保所有对象都是相关的。由于是一个枚举，这些文件与作为 Object 子类型的两个类没有更多的相关性。如果您希望在您的域中的所有枚举之间共享功能，您将需要查看一些静态函数，或者经常提到的实用程序类（这在一天结束时有其自己的一系列问题）。本质上，该类将具有一系列封装所有共享逻辑的函数，签名通常如下所示：

```
function foo(Enum enumeration) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T00:57:07.473

在这种情况下您无能为力，即使在更复杂的示例中，放置公共代码的最佳位置可能是所有枚举都可以使用的实用程序类，或者将包含在枚举中的单独类中通过组合（每个枚举都有一个该类的实例，可能称为关键字）。

如果该`toString`方法的代码很复杂，并且您不想在每个枚举中重新声明它，或者将其移动到包含的对象中，那么 Java 8 有一个您可以使用的机制。在这个例子中它是多余的。您可以定义一个您的枚举都将使用的接口。状态（关键字）必须仍然存在于您的枚举中，因为接口不能有状态，但从 Java 8 开始，您可以提供方法的默认实现：

```
public interface Common {
    String getKeyword();

    String toString() default {
        return getKeyword();
    }

    String toDescriptiveString() default {
        char firstLetter = getKeyword().charAt(0);
        boolean vowel =
            firstLetter == 'a' || firstLetter == 'e' ||
            firstLetter == 'i' || firstLetter == 'o' ||
            firstLetter == 'u' || firstLetter == 'x';
        // the letter x is pronounced with an initial vowel sound (eks)
        return (vowel?"an ":"a ") + getKeyword() + " address";
    }
} 
```

您的枚举将实现此接口：

```
public enum AddressSubType implements Common {
    DOM("dom"), INTL("intl"), POSTAL("postal");

    private final String keyword;

    private AddressSubType(String keyword) {
        this.keyword = keyword;
    }

    @Override
    public String getKeyword() {
        return keyword;
    }

    @Override
    public String toString() {
        return Common.super.toString();
    }
}

public enum EmailSubType implements Common {
    INTERNET("internet"), X400("x.400");

    private final String keyword;

    private EmailSubType(String keyword) {
        this.keyword = keyword;
    }

    @Override
    public String getKeyword() {
        return keyword;
    }

    @Override
    public String toString() {
        return Common.super.toString();
    }
} 
```

注意方法中奇怪的新语法`toString`。接口中默认方法的规则是**方法解析总是优先于类方法而不是接口**。因此，即使我们提供了`toString`in的默认实现`Common`，枚举中的那个将优先，`Object`如果枚举中没有一个，则 in 将优先。因此，如果您想使用接口中的默认方法取代其中一种方法`Object`（例如`toString`，或`hashCode`，或`equals`），那么您必须使用这种新`interface.super.method()`语法显式调用它。

不过，我们不必为该`toDescriptiveString`方法跳过任何额外的环节。那是一个全新的 in `interface Common`，它不是由我们的枚举提供的，因此它们获得了接口提供的默认实现。（如果他们想用自己的方法覆盖它，他们可以，就像任何其他继承的方法一样。）

当然，我们可以像使用对象的任何其他方法一样使用默认方法：

```
public class Test {
    public static void main(String[] args) {
        for (AddressSubType a : AddressSubType.values()) {
            System.out.println(a.toDescriptiveString());
        }
        for (EmailSubType e : EmailSubType.values()) {
            System.out.println(e.toDescriptiveString());
        }
    }
} 
```

打印出来：

```
一个dom地址
国际地址
邮政地址
一个互联网地址
x.400 地址

```

然而，在这种情况下，如果不是因为相当冗长的`toDescriptiveString`方法，枚举类不会`interface Common`比没有的更短。在向现有接口添加新功能时，接口中的默认方法将真正发挥作用，如果不破坏以前 Java 版本中接口的所有实现者，这是不可能的。

所有这些都基于尚未完成的[Java SE 8 和 Lambda](http://jdk8.java.net/lambda/)。您可以下载预发布版本，但请注意这是一项正在进行的工作。

# image - 调整图像大小 - 浏览器与 Photoshop

> ID：11199046
> 
> 赞同：3
> 
> 时间：2012-06-25T23:57:46.833
> 
> 标签：image, browser, web, photoshop, resize

我有一个客户坚持在他的网页上使用“清晰”的图像。他给我的一张图片是 2592 像素宽，但页面只有 940 像素宽。没问题，我只是使用 Photoshop 调整图像的大小，但质量明显下降，有很多锯齿状边缘。我预计将尺寸调整到三分之一时会降低质量，但我认为我可以做得更好。所以我所做的是获取原始图像并让浏览器（Chrome）将其调整为 940 像素宽。是的，我知道这绝对是最糟糕的事情，但我只是在尝试。事实证明，浏览器在调整大小方面比 Photoshop 做得更好——我没有看到锯齿状的边缘，而且图片的质量看起来非常接近原始图像。

那么这里有什么问题呢？为什么 Photoshop 的大小调整不如 Chrome（IE8 和 Firefox 也做得一样好）？我尝试过调整 Photoshop 的重采样选项，但没有发现真正的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:03:38.523

在 Photoshop 中缩放图像时需要考虑几件不同的事情：

* * *

**1.) 文件类型+压缩**

您将要确保如果您使用有损压缩的文件类型（即 JPEG），您将质量设置为 >8，否则您会看到质量明显下降。

**2.) 重采样方法**

Photoshop 提供了几种不同的重采样方法，这些方法会影响缩小时像素的组合方式。下面是一些图片的链接，这些图片说明了缩放时可以在哪里修改。

图像->图像大小...

[http://cl.ly/3W3M0b3W3H0G1Y452L15](http://cl.ly/3W3M0b3W3H0G1Y452L15)

此窗口底部有一个下拉菜单：

[http://cl.ly/0o463J2J0e2L1u0C1U26](http://cl.ly/0o463J2J0e2L1u0C1U26)

您可能遇到的是您的图像正在使用“最近邻”或“双线性”重新采样。

* * *

搏一搏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:00:51.203

您可以尝试使用基于浏览器的脚本，例如 TimThumb：[http ://code.google.com/p/timthumb/](http://code.google.com/p/timthumb/)

您确实需要调整图像的大小，而不是为了显示而缩小巨大的图像。该脚本将创建不同大小的图像副本，如果我没记错的话，它甚至支持某种缓存。

我已经让它为我调整了非常大的图像到非常小的缩略图，它总是看起来很清晰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T00:02:07.413

Photoshop 和 Web 浏览器处理大小调整的方式不同。我不会用 Photoshop，所以我帮不了你。。

但是，如果您希望图片看起来像通过网络浏览器调整大小，那么请使用网络浏览器调整它！截取屏幕截图并剪切调整大小的图片，创建另一个您可以在网站上真正使用的图片。

# html - embed、object、video的HTML标签的区别？

> ID：11199048
> 
> 赞同：3
> 
> 时间：2012-06-25T23:58:06.937
> 
> 标签：html, object, video, embed

这三个标签之间的技术差异是什么？为什么有人会使用其中一个？在 HTML 4 中，为什么 embed 失宠并让对象取代它，只是在 HTML 5 中重新受到青睐，而对象却被抛在了后面？wmv 格式不能与 video 标签一起使用是真的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T02:23:02.800

这可能会有所帮助： http: [//www.stoimen.com/blog/2009/02/22/html-object-and-embed-tags/](http://www.stoimen.com/blog/2009/02/22/html-object-and-embed-tags/)

至于视频标签，WMV 并不总是有效，因为如果你在 Mac 上，你必须安装一个插件

# javascript - 三.js CanvasRender 问题：人脸闪烁进出

> ID：11199049
> 
> 赞同：2
> 
> 时间：2012-06-25T23:58:18.393
> 
> 标签：javascript, canvas, 3d, three.js

我正在绘制两个相对简单的形状，它们的几何形状不重叠。

这是代码示例：http: [//jsfiddle.net/pGD4n/9/](http://jsfiddle.net/pGD4n/9/)

Three.js 轨迹球就在其中，因此您可以单击并拖动以在 3d 空间中旋转对象。问题是随着物体的旋转，一些面会消失，露出下面的物体。稍微旋转一下，丢失的脸又回来了，但其他人已经失踪了。

我尝试了 BasicMaterial、Normal Material 和 LambertMaterial 以及 SmoothShading 和 Flat Shading。我已经尝试过有灯光和没有灯光的场景。将对象移得更远似乎可以解决问题，但在给定的示例代码中，网格不重叠，不应该有这个问题。Chrome 和 Firefox 都会出现问题。

我想切换到 OpenGL 渲染器可以解决这个问题，但是为了兼容性，我们需要使用 Canvas 渲染器。

任何帮助或想法表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T20:56:11.070

这是一个限制`CanvasRenderer`。不幸的是，每像素 z 排序不可用，`CanvasRenderer`因此它基本上尝试对整个多边形进行排序。根据您从一个多边形的中心看的位置，它可能比侧面的多边形更近，因此它会“跳跃”。

目前唯一的解决方案是使用`WebGLRenderer`. 我正在为 context2d 开发一个新的渲染器，希望它可以在不需要 webgl 的情况下解决这个问题，但它仍然需要一些时间。

# visual-studio-2010 - Windows 64位安装IronPython+Visual Studio 2010：VS2010找不到ipy解释器

> ID：11199051
> 
> 赞同：0
> 
> 时间：2012-06-25T23:58:44.760
> 
> 标签：visual-studio-2010, ironpython

这是一个愚蠢的问题——你们将在几秒钟内回答......我正在 Windows .NET 4 上使用 IronPython 并在 Visual Studio 2010 中开发/调试。我搬到了具有 64 位寻址的 Macbook Pro 和重新安装 IronPython 和 VS 2010 的 Python 工具。

似乎还可以；ipy 工作正常。但是 Visual Studio 坚持没有安装 IronPython 解释器。

所以我去工具>选项>Python选项>解释器选项并告诉它 C:\Program Files (x86)\IronPython 2.7\ipy.exe 是解释器（这是一个猜测；也试过 ....\ipy64.可执行程序）。

不走运：当我尝试运行示例程序时，ipy.exe 以控制台模式启动，并说它是作为参数传递的 '""'。

有人见过这个吗？为什么 IronPython 或 PythonTools for VS 2010 脚本没有设置这些变量？他们应该有什么价值观？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:16:04.293

以下设置适用于 VS2010 和 Visual Studio 的 python 工具（我尝试了 1.1 和 1.5）和 Windows 7 64 上的 IronPython 2.7.1：

**自有配置**

![在 1.1 中使用自己的配置](../Images/23ad5feb3ff545c7e009aadbe8968945.png)

**1.5 中自动提供的值**

![1.5 中自动提供的值](../Images/5c0d5093f7f9eb69d49e7983a321bcca.png)

我检查了已有的和新的 Python 和 IronPython 应用程序。

# javascript - jquery：无法在图像标签上触发点击事件

> ID：11199053
> 
> 赞同：0
> 
> 时间：2012-06-25T23:58:48.233
> 
> 标签：javascript, jquery, events, onclick

我有一个带有跨度标签的javascript代码，在跨度标签内有一个图像标签和图像标签旁边的普通文本。我想在图像标签上绑定点击事件，但该事件根本没有触发。我使用jquery来完成这个。

```
var a = new Image();
$(a).prop('src','blah');
$(a).load( blah);

$(span).append($(a));
$(a).click(function (e) { alert('asdf'); } ); 
```

如果我这样做不是事件

```
$(span).find($(a)).click( blah );

 var button = $(this.imgClose).clone();
        $(button).prop('id', 'close');
        $(template).append($(button));

        $(template).find('#close').on('click', '', function (event) { alert('sss'); }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:02:44.587

```
$(span).append($(a)); 
```

应该：

```
$('span').append($(a)); 
```

**[现场演示](http://jsfiddle.net/TU2St/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T00:03:26.770

请尝试此操作，因为您要附加`a`然后尝试单击

休息一下，你也可以看到上面的@gdoron 和@Andrew 的东西

**API**驻留在此处：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

还有 prop 与 attr ：[.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

希望这可以帮助，

**代码**

```
$('a').on('click', function(){ 
   alert('HULK');
}); 
```

# c - 在 C 中使用类型#define 值进行除法

> ID：11199054
> 
> 赞同：1
> 
> 时间：2012-06-25T23:58:59.030
> 
> 标签：c, header-files

> **可能重复：**
> [为什么这个整数除法会产生 0？](https://stackoverflow.com/questions/8820865/why-does-this-integer-division-yield-0)

我有一个 C 头文件，其中包含在我的项目中使用的各种常量值。这些值是使用 #define 定义的（例如 #define MAX_DATA_VAL 5）。

当我在另一个文件中使用这个值进行除法时，我得到了错误的答案。

```
//- In file MyParameters.h
#define MAX_DATA_VAL  5
#define MIN_DATA_VAL -5

// - In file MyFunctions.c

#include "MyParameters.h"

void Function()
{
   float temp = 0;

   temp = 2/MAX_DATA_VAL;  // Wrong Output
} 
```

temp 的值保持为 0（在调试时检查）。但是，如果我这样做了：

```
temp     = 0;
float a  = MAX_DATA_VAL;

temp = 2/MAX_DATA_VAL;  // Correct Output 
```

我得到了正确的答案！......谁能解释发生了什么......

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T00:01:17.003

MAX_DATA_VAL 被视为整数，因此您的除法正在进行整数除法（向下舍入到最接近的整数）。为了确保它知道它是一个浮点数，请执行以下操作：

```
#define MAX_DATA_VAL 5.0f 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T00:03:30.897

您需要将定义的值转换为浮点数，否则它是整数。

```
void Function()
{
   float temp = 0;

   temp = 2 / (float)MAX_DATA_VAL;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T00:01:37.027

在

```
temp = 2/MAX_DATA_VAL; 
```

您将一个 int 除以一个 int，因此结果是一个 int - 可能不是您想要的。为了得到正确的结果，你应该做

```
 temp = 2.0/MAX_DATA_VAL; 
```

我看到其他答案都建议更改 MAX_DATA_VAL 的定义。但是，我建议不要这样做，除非您检查了整个代码库并确保您不依赖它是一个 int。我的解决方案仅在 OP 说他的结果不符合预期的地方进行了更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T00:02:07.270

在计算机世界中，`2/5 == 0`因为整数除法。

2 和 5 都是整数，所以计算机自然会认为结果也是整数。不幸的是，数学上它不是，所以它截断了其余部分。

# python - 单击python GTK3中的按钮后窗口冻结

> ID：11199057
> 
> 赞同：2
> 
> 时间：2012-06-25T23:59:26.610
> 
> 标签：python, gtk3

您好，我有一些命令，平均运行 30 分钟，当我单击 GTK3 创建的按钮时，python 开始执行命令，但我的所有应用程序都冻结了。我单击按钮的python代码是：

```
def on_next2_clicked(self,button):
    cmd = "My Command"
    proc = subprocess.Popen(cmd,shell=True, stdout=subprocess.PIPE)
    while True:
            line = proc.stdout.read(2)
            if not line:
                break
            self.fper = float(line)/100.0
            self.ui.progressbar1.set_fraction(self.fper)
    print "Done" 
```

我还必须将命令输出设置为窗口中的进度条。任何人都可以帮助解决我的问题吗？我也尝试过在python中使用Threading，但它也没有用......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:21:35.843

从循环中运行主循环迭代：

```
def on_next2_clicked(self,button):
    cmd = "My Command"
    proc = subprocess.Popen(cmd,shell=True, stdout=subprocess.PIPE)
    while True:
        line = proc.stdout.read(2)
        if not line:
            break
        self.fper = float(line)/100.0
        self.ui.progressbar1.set_fraction(self.fper)
        while Gtk.events_pending():
            Gtk.main_iteration()  # runs the GTK main loop as needed
    print "Done" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:35:13.563

您正忙于等待，而不是让 UI 主事件循环运行。将循环放在单独的线程中，以便主线程可以继续自己的事件循环。

**编辑：**添加示例代码

```
import threading

def on_next2_clicked(self,button):
    def my_thread(obj):
        cmd = "My Command"
        proc = subprocess.Popen(cmd,shell=True, stdout=subprocess.PIPE)
        while True:
                line = proc.stdout.read(2)
                if not line:
                    break
                obj.fper = float(line)/100.0
                obj.ui.progressbar1.set_fraction(obj.fper)
        print "Done"

    threading.Thread(target=my_thread, args=(self,)).start() 
```

对您的函数的上述修改将启动一个新线程，该线程将与您的主线程并行运行。当新线程忙于等待时，它将让主事件循环继续。

# java - 解组时出现 JAXB 意外元素错误

> ID：11199059
> 
> 赞同：4
> 
> 时间：2012-06-25T23:59:30.990
> 
> 标签：java, web-services, jboss, wsdl, jax-ws

如果有人为我的问题找到解决方案，我将不胜感激...

从我的 WebService 调用 Web 方法时，出现以下错误：

> [com.sun.istack.SAXParseException2; 行号：1；列号：223；意外元素（uri：“”，本地：“运动”）。预期元素是 <{}mostFavored>、<{}teamA>、<{}teamB>、<{http://sdl.ws.lsep.lskings.com/}scoring>、<{http://sdl.ws .lsep.lskings.com/}sport>,<{}gameId>,<{http://sdl.ws.lsep.lskings.com/}gameScoring>]

我想知道为什么消息包含元素“sport”以及为什么它与 <{http://sdl.ws.lsep.lskings.com/}sport> 不匹配。我认为这与命名空间有关，但我无法解决这个问题，到目前为止我已经被困了两个晚上......

我正在使用 JBossWS 工具生成客户端 Web 服务，并且所有内容都部署在 JBoss 7.1.1 上（但我认为这无关紧要）。请至少给我任何线索:)

这是 GameScoring 类：

```
@Entity
@Table(name = "`GAMESCORING`")
@XmlRootElement
@XmlType(name = "GameScoring", propOrder = { "gameScoringId", "scoring", "finished", "startTime", "stopTime",
    "tiebreak" })
public class GameScoring implements Serializable {
@Id
@GeneratedValue
@Column(name = "game_scoring_id")
private long gameScoringId;

@OneToMany(cascade = CascadeType.ALL, mappedBy = "scoring")
private List<GamePeriod> periods;

@ManyToOne(cascade = CascadeType.ALL)
@JoinColumn(name = "scoring_id")
private Scoring scoring;

private boolean finished;

private Date startTime;

private Date stopTime;

private GamePeriod tiebreak;

public GameScoring() {
    super();
} 
```

以及在客户端生成的相同类：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "GameScoring", propOrder = {
"gameScoringId",
"scoring",
"finished",
"startTime",
"stopTime",
"tiebreak"
})

public class GameScoring {

protected long gameScoringId;
@XmlElement(namespace = "http://sdl.ws.lsep.lskings.com/")
protected Scoring scoring;
protected boolean finished;
@XmlSchemaType(name = "dateTime")
protected XMLGregorianCalendar startTime;
@XmlSchemaType(name = "dateTime")
protected XMLGregorianCalendar stopTime;
protected GamePeriod tiebreak;
+ getters/setters 
```

我如何调用 Web 服务方法：

```
GameManagerService gm_service = new GameManagerService();
GameManagerPortType gm_port = gm_service.getGameManagerPort();
com.lskings.lsep.ws.sdl.Game game = gm_port.getMostFavored(); 
```

这里是网络服务 SEI：

```
@WebService(name = "GameManagerPortType")
@SOAPBinding(style = Style.RPC, use = Use.LITERAL)
public interface GameManagerEndpoint {

@WebMethod
@WebResult(name = "success")
public boolean addGame(
        @WebParam(name = "sportId") String sportId,
        @WebParam(name = "leagueId") String leagueId,
        @WebParam(name = "scoringId") String scoringId,
        @WebParam(name = "participantHomeId") long participantHomeId,
        @WebParam(name = "participantAwayId") long participantAwayId);

@WebMethod
@WebResult(name = "success")
public boolean deleteGame(@WebParam(name = "gameId") long gameId);

@WebMethod
@WebResult(name = "exists")
public boolean exists(@WebParam(name = "gameId") long gameId);

@WebMethod
@WebResult(name = "game")
public Game getGame(@WebParam(name = "gameId") long gameId);

@WebMethod
@WebResult(name = "gameList")
public List<Game> getGamesForLeague(@WebParam(name = "leagueId") long leagueId);

@WebMethod
@WebResult(name = "gameList")
public List<Game> search(@WebParam(name = "query") String query);

@WebMethod
@WebResult(name = "gameList")
public List<Game> getGamesForSport(@WebParam(name = "sportId") long sportId);

@WebMethod
@WebResult(name = "game")
public Game getMostFavored();

@WebMethod
@WebResult(name = "success")
public boolean setMostFavored(@WebParam(name = "gameId") long gameId);

@WebMethod
@WebResult(name = "gamePeriods")
public List<GamePeriod> getPeriods(@WebParam(name = "gameId") long gameId);

@WebMethod
@WebResult(name = "gamePeriodsWithTiebreaks")
public List<GamePeriod> getPeriodsWithTiebreaks(@WebParam(name = "gameId") long gameId);

@WebMethod
@WebResult(name = "gameScore")
public int[] getScore(@WebParam(name = "gameId") long gameId);

@WebMethod
@WebResult(name = "periodActions")
public List<GameAction> getPeriodActions(@WebParam(name = "periodId") long periodId);

@WebMethod
@WebResult(name = "allActions")
public List<GameAction> getAllActions(@WebParam(name = "gameId") long gameId);

@WebMethod
@WebResult(name = "gameTimer")
public String getGameTimer(@WebParam(name = "gameId") long gameId);

} 
```

完整的堆栈跟踪：

[http://pastebin.com/9pfCNFcw](http://pastebin.com/9pfCNFcw)

Game.java - 服务器端

```
 @Entity
 @Table(name = "`GAME`")
 @XmlRootElement
 @XmlType(name = "Game", propOrder = { "gameId", "sport", "mostFavored" })
 public class Game implements Serializable {

private static final long serialVersionUID = -1564911377701558631L;

@Id
@GeneratedValue
@Column(name = "game_id")
private long gameId;

@ManyToOne(cascade = CascadeType.ALL)
@JoinColumn(name = "sport_id")
private Sport sport;

@ManyToOne(cascade = CascadeType.ALL)
@JoinColumn(name = "scoring_id")
private Scoring scoring;

@OneToOne(cascade = CascadeType.ALL)
@JoinColumn(name = "game_scoring_id")
private GameScoring gameScoring;

@ManyToOne(cascade = CascadeType.ALL)
@JoinColumn(name = "teamA_id")
private Participant teamA;

@ManyToOne(cascade = CascadeType.ALL)
@JoinColumn(name = "teamB_id")
private Participant teamB;

@ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER)
@JoinColumn(name = "league_id")
private League league;

@Column(name = "most_favored")
private boolean mostFavored;

public Game() {
    super();
}

public Game(Sport sport, Scoring scoring, Participant teamA, Participant teamB) {
    this(sport, scoring, teamA, teamB, null);
}

public Game(Sport sport, Scoring scoring, Participant teamA, Participant teamB, League league) {
    super();
    this.sport = sport;
    this.scoring = scoring;
    this.teamA = teamA;
    this.teamB = teamB;
    this.league = league;
    this.mostFavored = false;

    LinkedList<GamePeriod> periods = new LinkedList<GamePeriod>();

    this.gameScoring = new GameScoring();

    Period p = scoring.getPeriods().get(0);
    GamePeriod gp = new GamePeriod(p, gameScoring);
    periods.add(gp);
    gp.generateParents(true);

    gameScoring.setPeriods(periods);
    gameScoring.setScoring(scoring);
}

public Sport getSport() {
    return sport;
}

@XmlTransient
public Scoring getScoring() {
    return scoring;
}

@XmlTransient
public Participant getTeamA() {
    return teamA;
}

@XmlTransient
public Participant getTeamB() {
    return teamB;
}

@XmlTransient
public GameScoring getGameScoring() {
    return gameScoring;
}

public void setSport(Sport sport) {
    this.sport = sport;
}

public void setScoring(Scoring scoring) {
    this.scoring = scoring;
}

public void setGameScoring(GameScoring gameScoring) {
    this.gameScoring = gameScoring;
}

public void setTeamA(Participant teamA) {
    this.teamA = teamA;
}

public void setTeamB(Participant teamB) {
    this.teamB = teamB;
}

public long getGameId() {
    return gameId;
}

public void setGameId(long gameId) {
    this.gameId = gameId;
}

@XmlTransient
public League getLeague() {
    return league;
}

public void setLeague(League league) {
    this.league = league;
}

public boolean isMostFavored() {
    return mostFavored;
}

public void setMostFavored(boolean mostFavored) {
    this.mostFavored = mostFavored;
}

} 
```

Game.java - 客户端：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "Game", propOrder = {
"gameId",
"sport",
"mostFavored"
})
public class Game {

protected long gameId;
 //    @XmlElement(namespace = "http://sdl.ws.lsep.lskings.com/")
protected Sport sport;
protected boolean mostFavored;

/**
 * Gets the value of the gameId property.
 * 
 */
public long getGameId() {
    return gameId;
}

/**
 * Sets the value of the gameId property.
 * 
 */
public void setGameId(long value) {
    this.gameId = value;
}

/**
 * Gets the value of the sport property.
 * 
 * @return
 *     possible object is
 *     {@link Sport }
 *     
 */
public Sport getSport() {
    return sport;
}

/**
 * Sets the value of the sport property.
 * 
 * @param value
 *     allowed object is
 *     {@link Sport }
 *     
 */
public void setSport(Sport value) {
    this.sport = value;
}

/**
 * Gets the value of the mostFavored property.
 * 
 */
public boolean isMostFavored() {
    return mostFavored;
}

/**
 * Sets the value of the mostFavored property.
 * 
 */
public void setMostFavored(boolean value) {
    this.mostFavored = value;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:08:44.237

几天前我发现它与@ManyToOne 和@ManyToMany JPA 注释有关。但是，我不确定为什么在使用这些注释时会失败，@XmlTransient 注释解决了它。之后，我只需要编写一些额外的代码来通过 id 获取相关对象。

# phpmyadmin - 第一次使用 phpmyadmin

> ID：11199062
> 
> 赞同：0
> 
> 时间：2012-06-25T23:59:48.453
> 
> 标签：phpmyadmin

我在设置我的第一个 mysql 数据库时无处可去。有没有我可以使用的好教程？

这是我在单独 page.php 上的代码

```
<?php
$db_hostname='hosting website';
$db_database='xxxxxxxxx';
$db_username='a4999406';
$db_password='xxxxxx';
?> 
```

这是我试图用作登录页面的 html 页面上的代码：

```
if(!$db_server) die("Unable to connect to MySQL: " . mysqu_error())
?> 
```

我收到以下错误：

警告：mysql_connect() [function.mysql-connect]：第 36 行 /home/a4999406/public_html/willingLog.html 中用户 'a4999406'@'10.1.1.47' 的访问被拒绝（使用密码：YES）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:01:47.137

我建议先阅读 W3 学校的[教程](http://www.w3schools.com/php/php_mysql_intro.asp)。之后前往 php.net - 该网站将成为您的圣经。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:02:36.570

W3Schools 有很棒的教程。查看：

[http://www.w3schools.com/php/php_mysql_connect.asp](http://www.w3schools.com/php/php_mysql_connect.asp)

从那里按顺序学习教程，学习如何开始构建您的 MySQL 技能。

```
<?php
$con = mysql_connect("localhost","peter","abc123");
if (!$con)
  {
die('Could not connect: ' . mysql_error());
  }

// some code

mysql_close($con);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T00:31:33.087

我想我已经弄清楚了。在 phpmyadmin 上使用 www.OOOwebhost.com 作为数据库用户名，您需要使用“MYSQL 用户”而不是帐户的“用户名”。一个与另一个相关，因此非常混乱；特别是因为教程说要询问“用户名”。

如果这不起作用，我会回来发帖。

感谢所有回复的人。

# silverlight - Silverlight div 在加载前留下先前屏幕的残余

> ID：11199063
> 
> 赞同：2
> 
> 时间：2012-06-26T00:00:06.280
> 
> 标签：silverlight, silverlight-4.0

我有一个带有 Silverlight 对象的页面，并且在访问该页面时，有 0.1-2 秒的时间，在 Silverlight 开始加载之前，前一个屏幕的内容被冻结在 Silverlight 对象应该所在的框内1-99%的进度圈。我正在使用 Chrome。这是非常草率的加载。我认为这个问题在第一次缓存后可能会被忽视，但有什么办法可以避免这种视觉残留？

```
<div id="silverlightControlHost" style="height:440px; padding-top:15px" >
    <object name="slupload" data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="440px" height="100%"  >
        <param name="source" value="../ClientBin/SilverlightWebcam.xap?@nocache"/>
        <param name="onError" value="onSilverlightError" />
        <param name="background" value="white" />
        <param name="minRuntimeVersion" value="4.0.41108.0" />
        <param name="autoUpgrade" value="true" />
        <param name="onLoad" value="pluginLoaded" />
        <param name="initParams" value="userid=@ViewBag.UserID" />
        <a href="http://go.microsoft.com/fwlink/?LinkID=149156&v=4.0.41108.0" style="text-decoration:none">
            <img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Get Microsoft Silverlight" style="border-style:none"/>
        </a>
    </object><iframe id="_sl_historyFrame" style="visibility:hidden;height:0px;width:0px;border:0px"></iframe></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:59:17.797

尝试使用 Javascript 更改 Silverlight 对象的可见性，使其在页面加载/呈现后显示。

# android - Android以编程方式将图像平铺为背景

> ID：11199064
> 
> 赞同：9
> 
> 时间：2012-06-26T00:00:12.203
> 
> 标签：android, image, background

我有一张我想水平平铺的图像，我需要以编程方式完成它。我尝试了两种方法，都不起作用。

button_inner_shadow 是图像 navigation_background 是假设平铺上述图像的 xml

1：直接平铺图片

```
BitmapDrawable navigationBackground = new BitmapDrawable(BitmapFactory.decodeResource(
                getResources(), R.drawable.button_inner_shadow));
navigationBackground.setTileModeX(Shader.TileMode.REPEAT);
navigationTextViews[id].setBackgroundDrawable(navigationBackground); 
```

2：使用xml平铺图片

```
navigationBackground = new BitmapDrawable(BitmapFactory.decodeResource(
                getResources(), R.drawable.navigation_background));
navigationTextViews[id].setBackgroundDrawable(navigationBackground); 
```

导航背景

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:dither="true"
    android:src="@drawable/button_inner_shadow"
    android:tileMode="repeat" /> 
```

我究竟做错了什么？

我还使用`setBackgroundResource`在程序的另一部分设置更改背景颜色，并认为这是一个问题。我添加了`navigationTextViews[id].setBackgroundResource(0);`，它应该删除背景资源，并且不适用于我使用的上述解决方案。

编辑：navigationTextViews[] 是一个 TextViews 数组

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T01:47:36.093

好吧，由于某种原因，第一个选项适用于不同的图像，所以我猜问题是我的第一张图像（这是具有一定透明度的渐变）太透明了。

# vim - 如何格式化 Vim quickfix 条目？

> ID：11199068
> 
> 赞同：9
> 
> 时间：2012-06-26T00:00:49.543
> 
> 标签：vim

这是生成 Markdown 大纲的 vim 脚本：

```
fun! TOC()
    call setloclist(0, [])
    let save_cursor = getpos(".")
    call cursor(1, 1)
    while search("^#", 'W') > 0
       let msg = printf('%s:%d:%s', expand('%'), line('.'), substitute(getline('.'), '#', '»', 'g'))
       laddexpr msg
    endwhile
    call setpos('.', save_cursor)
endfun

com! -bar TOC call TOC() 
```

* * *

示例降价文件：[https ://github.com/progit/progit/raw/master/zh/01-introduction/01-chapter1.markdown](https://github.com/progit/progit/raw/master/zh/01-introduction/01-chapter1.markdown)

* * *

运行`:TOC`命令后，这是快速列表：

```
01-chapter1.markdown|5| »» 关于版本控制 »»
01-chapter1.markdown|11| »»» 本地版本控制系统 »»»
01-chapter1.markdown|22| »»» 集中化的版本控制系统 »»»
01-chapter1.markdown|33| »»» 分布式版本控制系统 »»»
01-chapter1.markdown|42| »» Git 简史 »»
01-chapter1.markdown|56| »» Git 基础 »»
01-chapter1.markdown|60| »»» 直接记录快照，而非差异比较 »»»
01-chapter1.markdown|74| »»» 近乎所有操作都是本地执行 »»»
01-chapter1.markdown|82| »»» 时刻保持数据完整性 »»»
01-chapter1.markdown|92| »»» 多数操作仅添加数据 »»»
01-chapter1.markdown|98| »»» 文件的三种状态 »»»
01-chapter1.markdown|121| »» 安装 Git »»
01-chapter1.markdown|125| »»» 从源代码安装 »»»
01-chapter1.markdown|152| »»» 在 Linux 上安装 »»»
01-chapter1.markdown|162| »»» 在 Mac 上安装 »»»
01-chapter1.markdown|177| »»» 在 Windows 上安装 »»»
01-chapter1.markdown|185| »» 初次运行 Git 前的配置 »»
01-chapter1.markdown|197| »»» 用户信息 »»»
01-chapter1.markdown|206| »»» 文本编辑器 »»»
01-chapter1.markdown|212| »»» 差异分析工具 »»»
01-chapter1.markdown|220| »»» 查看配置信息 »»»
01-chapter1.markdown|240| »» 获取帮助 »»
01-chapter1.markdown|254| »» 小结 »» 
```

* * *

我想将快速修复条目格式化为：

```
|005| »» 关于版本控制 »»
|011| »»» 本地版本控制系统 »»»
|022| »»» 集中化的版本控制系统 »»»
|033| »»» 分布式版本控制系统 »»»
|042| »» Git 简史 »»
|056| »» Git 基础 »»
|060| »»» 直接记录快照，而非差异比较 »»»
|074| »»» 近乎所有操作都是本地执行 »»»
|082| »»» 时刻保持数据完整性 »»»
|092| »»» 多数操作仅添加数据 »»»
|098| »»» 文件的三种状态 »»»
|121| »» 安装 Git »»
|125| »»» 从源代码安装 »»»
|152| »»» 在 Linux 上安装 »»»
|162| »»» 在 Mac 上安装 »»»
|177| »»» 在 Windows 上安装 »»»
|185| »» 初次运行 Git 前的配置 »»
|197| »»» 用户信息 »»»
|206| »»» 文本编辑器 »»»
|212| »»» 差异分析工具 »»»
|220| »»» 查看配置信息 »»»
|240| »» 获取帮助 »»
|254| »» 小结 »» 
```

我找不到任何选择。如果你知道，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T07:40:36.927

无法配置快速修复位置的显示方式。只能通过`errorformat`选项指定如何解释它们。但是，可以使用隐藏功能在快速修复或位置列表窗口中隐藏文件名。

`|` 以下命令启用隐藏并定义与行首第一个字符之前的任何文本匹配的语法规则 。

```
:set conceallevel=2 concealcursor=nc
:syntax match qfFileName /^[^|]*/ transparent conceal 
```

可以使用自动命令为每个快速修复或位置列表窗口触发这些命令。然而，这通常不是一个好主意，因为在大多数情况下显示文件名是一个有用的功能。

对于问题中提出的情况，最好仅对新收集的位置列表进行这些自定义。不过，它需要先打开位置列表窗口。

```
:lopen
:set conceallevel=2 concealcursor=nc
:syntax match qfFileName /^[^|]*/ transparent conceal 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-29T21:42:43.947

我最终在[这个 PR（带有 GIF 动画）上的](https://github.com/plasticboy/vim-markdown/pull/71/files)[plasticboy/vim-markdown](https://github.com/plasticboy/vim-markdown)上实现了这个，使用+ 替换而不是用一些东西隐藏：`set modifiable`

```
function! b:Markdown_Toc()
    silent lvimgrep '^#' %
    vertical lopen
    let &winwidth=(&columns/2)
    set modifiable
    %s/\v^([^|]*\|){2,2} #//
    for i in range(1, line('$'))
        let l:line = getline(i)
        let l:header = matchstr(l:line, '^#*')
        let l:length = len(l:header)
        let l:line = substitute(l:line, '\v^#*[ ]*', '', '')
        let l:line = substitute(l:line, '\v[ ]*#*$', '', '')
        let l:line = repeat(' ', (2 * l:length)) . l:line
        call setline(i, l:line)
    endfor
    set nomodified
    set nomodifiable
endfunction 
```

但您可能更喜欢：

```
Plugin 'plasticboy/vim-markdown' 
```

由你决定。=)

截屏：

![在此处输入图像描述](../Images/d2b24708512c27e3b424c3bd76f5a816.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-02T20:37:34.400

试试这个：

```
fu s:TOC() abort
    call setloclist(0, [])
    let curfile = expand('%:p')
    let save_cursor = getpos('.')
    call cursor(1, 1)
    while search('^#', 'W') > 0
       let msg = printf('%s:%d:%s',
           \ curfile,
           \ line('.'), getline('.')->substitute('#', '»', 'g')
           \ )
       laddexpr msg
    endwhile
    call setpos('.', save_cursor)
    call setloclist(0, [], 'r', {
        \ 'lines': getloclist(0)
        \     ->map('curfile .. "|" .. v:val.lnum .. " " .. v:val.col .. "|" .. v:val.text'),
        \ 'efm': '%f|%l %c|%m',
        \ 'quickfixtextfunc': function('s:quickfixtextfunc'),
        \ })
endfu

fu s:quickfixtextfunc(info) abort
    let ll = getloclist(a:info.winid, {'id': a:info.id, 'items': 0}).items
    let lnum_width = range(a:info.start_idx - 1, a:info.end_idx - 1)
        \ ->map({_, v -> ll[v].lnum})
        \ ->max()
        \ ->len()
    let formatted_lines = []
    for idx in range(a:info.start_idx - 1, a:info.end_idx - 1)
        let e = ll[idx]
        let fname = bufname(e.bufnr)->fnamemodify(':t')
        let line = printf('|%0*s| %s', lnum_width, e.lnum, e.text)
        call add(formatted_lines, line)
    endfor
    return formatted_lines
endfu

com -bar TOC call s:TOC() 
```

它依赖于`'quickfixtextfunc'`位置列表的属性，该属性被添加到这两个 Vim 补丁中：

*   [8.2.0933](https://github.com/vim/vim/releases/tag/v8.2.0933) 'quickfixtextfunc' 没有获取位置列表的窗口 ID
*   [8.2.0959](https://github.com/vim/vim/releases/tag/v8.2.0959) 使用“quickfixtextfunc”有点慢

见[`:h quickfix-window-function`](https://vimhelp.org/quickfix.txt.html#quickfix-window-function)。

* * *

为了获得更好的性能，下面是 Vim9 中的相同代码：

```
vim9

def TOC()
    setloclist(0, [])
    var curfile: string = expand('%:p')
    var save_cursor: list<number> = getpos('.')
    cursor(1, 1)
    while search('^#', 'W') > 0
       msg = printf('%s:%d:%s',
           curfile,
           line('.'), getline('.')->substitute('#', '»', 'g')
           )
       laddexpr msg
    endwhile
    setpos('.', save_cursor)
    setloclist(0, [], 'r', {
        lines: getloclist(0)
            ->mapnew((_, v) => curfile .. '|' .. v.lnum .. ' ' .. v.col .. '|' .. v.text),
        efm: '%f|%l %c|%m',
        quickfixtextfunc: Quickfixtextfunc,
        })
enddef
var msg: string

def Quickfixtextfunc(info: dict<number>): list<string>
    var ll: list<any> = getloclist(info.winid, {id: info.id, items: 0}).items
    var lnum_width: number = range(info.start_idx - 1, info.end_idx - 1)
        ->map((_, v) => ll[v].lnum)
        ->max()
        ->len()
    var formatted_lines: list<string> = []
    for idx in range(info.start_idx - 1, info.end_idx - 1)
        var e: dict<any> = ll[idx]
        var fname: string = bufname(e.bufnr)->fnamemodify(':t')
        var line: string = printf('|%0*s| %s', lnum_width, e.lnum, e.text)
        add(formatted_lines, line)
    endfor
    return formatted_lines
enddef

com -bar TOC TOC() 
```

这需要最新的 Vim 版本。它适用于 8.2.2451。

# javascript - SignalR $.connection 未定义

> ID：11199070
> 
> 赞同：32
> 
> 时间：2012-06-26T00:00:54.127
> 
> 标签：javascript, jquery, asp.net-mvc, signalr

我承认，我不知道我在做什么。

我正在尝试学习如何使用 SignalR，并且几乎逐字逐句地在线跟踪各种示例，并且无法粘贴 $.connection 未定义。我正在使用 MVC 4.0 并尝试使用 nuget 下载的 signalR js 文件或示例项目中的文件。这些是我的脚本参考。

```
@Scripts.Render("~/Scripts/jquery-1.7.2.min.js")
@Scripts.Render("~/Scripts/knockout-2.0.0.js")
@Scripts.Render("~/Scripts/jquery.signalR.js")
@Scripts.Render("~/signalr/hubs") 
```

脚本似乎已加载 - 我什至在它们的开头放置了警报，但 $.connection 始终未定义。

在一个奇怪的事件中，我有一个不同的项目，我试图使用不同的 jQuery 库，它使用 $. 并且该对象也始终未定义。

我只是在寻找任何可能的解释来解释我可能做错了什么。首先十分感谢。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-02-19T09:52:13.163

我今天遇到了同样的问题。

您的回答为我指明了正确的方向，因为我有完全相同的脚本加载设置。

我按以下顺序将所有脚本标签放在页面顶部（头部）。

*   jQuery
*   信号R
*   /信号器/集线器
*   我的脚本.js

当然，@Layout.cshtml 非常周到地添加到标签`@Scripts.Render("~/bundles/jquery")`底部。`<body>`

**这是正在发生的事情。**

在此配置中，当页面加载时，它会按照指定的顺序加载 head 标记中的所有脚本。

所以它加载 JQuery，然后是 SignalR，然后设置`$.connection`自动生成的集线器脚本`$.connection.hubName`，然后设置站点的自定义脚本。

此时您的自定义代码运行。但是您的代码在某些时候会等待`body.onload`或`document.onReady`在访问之前`$.connection`

到此事件触发时，布局模板在正文标记末尾为您添加的脚本包也将下载并执行。此捆绑包再次具有 jquery 库....它重置了所有 SignalR 设置`$`，现在`$.connection`不再定义您的。

**如何解决**

轻松修复，确保不要两次加载 JQuery，一次在 SignalR 之前，一次在 SignalR 之后。我将所有脚本移到捆绑包之后加载，它解决了这个问题。此处的最佳做法是使用模板提供的“脚本”部分。

```
@section scripts{
    @*/* load your scripts here. You can exclude jQuery, 
      coz it's already in the template */ *@
} 
```

所以这根本不是 SignalR 错误......

那是我生命中的两个小时......我永远不会回来......

希望这可以帮助。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-26T16:01:03.423

我解决了这个问题。我知道我做了什么，但我不知道为什么它确实有效。

我在 _Layout.cshtml 视图顶部引用了主 jquery 库（版本 1.7.2），但没有引用任何其他 jquery 脚本。我注意到默认情况下在布局视图中它正在加载

```
@Scripts.Render("~/bundles/jquery") 
```

在视图的底部，并且脚本部分位于其下方。

```
@RenderSection("scripts", required:false) 
```

如图所示，我进一步更改了我的脚本引用，并将上面问题中显示的脚本引用放在一个

```
@section scripts
{    
   @Scripts.Render("~/Scripts/jquery.signalR-0.5.1.js")
   @Scripts.Render("~/Scripts/jquery.color.js")
   @Scripts.Render("~/signalr/hubs")
   @Scripts.Render("~/Scripts/blasht.signalr.js")
} 
```

包装在我的视图中，以便在加载包后将它们包含在内。我假设我没有加载所有必要的 jquery，因为现在它可以工作了。

现在，如果我能弄清楚这如何适用于我的其他项目。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T17:52:29.767

之所以可行，是因为加载 javascript 文件的顺序。如果您在加载 jquery 之前尝试加载 jquery.signalR-0.5.1.js，那么您将面临 $.connection undefined 因为要注册 jquery 应该首先加载。在 _Layout.cshtml 模板中，脚本按顺序加载

```
@Scripts.Render("~/bundles/jquery")

@RenderSection("scripts", required: false) 
```

因此，在您的任何视图中，您都可以在脚本部分下加载信号器，这应该可以正常工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-19T08:31:45.920

我有同样的问题。对我来说，我在页面中包含 jquery 2 次，后来在布局中包含。删除其中一个解决了这个问题。

希望能帮助到你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-11T04:08:58.837

这发生在我身上，因为我`~/signalr/hubs`在加载脚本之前动态加载了`jquery.signalR-1.1.4.js`脚本。

动态加载时，没有出现错误，但是如果我将输出`~/signalr/hubs`粘贴到我的 chrome 开发工具中，我会收到一条错误消息`VM1047:18 Uncaught Error: SignalR: SignalR is not loaded. Please ensure jquery.signalR-x.js is referenced before ~/signalr/hubs. at <anonymous>:18:15 at <anonymous>:300:2`

# javascript - 没有 jquery 的 javascript 幻灯片

> ID：11199072
> 
> 赞同：0
> 
> 时间：2012-06-26T00:01:10.077
> 
> 标签：javascript, slideshow

我找不到我正在寻找的示例-

我需要一个没有 jquery 的 javascript 幻灯片。幻灯片需要做的是一张一张地显示图像（如果有淡入淡出的动画就好了），每张图像都是指向另一个页面的链接。不使用 jquery 很重要，因为我遇到了一些问题。我不想要任何控件，例如下一个暂停...或任何字幕。只是`<a> <img/> </a>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-29T04:31:11.770

```
<!DOCTYPE html>
<html lang="en-US">

  <head>
    <title>JavaScript Fade - Brugbart Example</title>
    <style type="text/css">
#Slideshow {
  opacity: 1.0;              /* CSS3 */
  -moz-opacity: 1.0;         /* Older versions of Firefox */
  -khtml-opacity: 1.0;       /* Older versions of Safari */
  filter: alpha(opacity=100); /* Internet Explorer */
}
#Slideshow div {display:none;}
#Slideshow #slice1 {display:block;}
div{font-family: arial, sans-serif}

div{font-size:50px}
    </style>
  </head>

  <body>
   <div id="Basement" style="width:90%;margin:auto;">
    <div id="Slideshow">
      <div id="slice1">111111
      </div>
      <div id="slice2">222222
      </div>
      <div id="slice3">333333
      </div>
    </div>
   </div>

<script type="text/javascript">

    /* Creted with a reference from http://brugbart.com/slideshow-fade-javascript */

    var duration = 250; /* fade duration in millisecond */
    var hiddentime = 250; /* time to stay hidden */
    var showtime = 1000; /* time to stay visible */

    var active = 0 /* Used to check if fade is active */
    var iEcount = 0 /* Element Counter */

    var element = document.getElementById("Slideshow");

    var iEarray = element.getElementsByTagName('div');
    var iEtotal = iEarray.length;

    StartFade();
    function StartFade()
    { 
        iEcount = 1;
        setTimeout("FadeOut()", showtime);
    }

    function FadeOut()
    {
        for (i = 0; i <= 1; i += 0.01)
        {
            setTimeout("SetOpa(" + (1 - i) +")", i * duration);
        }
        setTimeout("FadeIn()", (duration + hiddentime));
    }

    function FadeIn()
    {
        for (i = 0; i <= 1; i += 0.01)
        {
            setTimeout("SetOpa(" + i +")", i * duration);
        }
        if (iEcount == iEtotal)
        {
            iEcount = 1
            document.getElementById("slice" + iEcount).style.display = "block";
            document.getElementById("slice" + iEtotal).style.display = "none";
        }
        else
        {
            document.getElementById("slice" + (iEcount + 1)).style.display = "block";
            document.getElementById("slice" + iEcount).style.display = "none";
            iEcount = iEcount+1
        }
        setTimeout("FadeOut()", (duration + showtime));
    }
    function SetOpa(Opa)
    {
        element.style.opacity = Opa;
        element.style.MozOpacity = Opa;
        element.style.KhtmlOpacity = Opa;
        element.style.WebkitOpacity = Opa;
        element.style.KhtmlOpacity = Opa;
        element.style.MsOpacity = Opa;
        element.style.width = "500px";
        element.style.filter = 'alpha(opacity=' + (Opa * 100) + ');';
    }

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T04:55:48.353

我会看一下2012 年 5 月 25 日发布的答案。类似的问题已经被问过很多次了[。](https://stackoverflow.com/questions/10752383/javascript-for-slideshow)它有助于搜索已经回答的答案。

我目前已经实现了您正在尝试做的事情。与我链接到的帖子中的内容非常相似。

# objective-c - 延迟加载具有动态网格大小的自定义 UIScrollView？

> ID：11199076
> 
> 赞同：0
> 
> 时间：2012-06-26T00:01:22.893
> 
> 标签：objective-c, uiscrollview, lazy-loading

所以我写了一个 UIScrollView 的自定义子类，它基本上在 2 列网格中显示矩形，但是虽然每个的宽度固定为 iPhone/iPad 屏幕宽度的一半，但高度会有所不同，具体取决于内部图片的尺寸它。现在一切都很好，但我可以想象，在我的 UIScrollView 子类中添加了很多这些子视图之后，事情将会滞后。所以我试图实现类似于 UITableView 的出列可重用单元方法的延迟加载。

![在此处输入图像描述](../Images/eed8124997234181b8e1a63881317b73.png)

我查看了一些关于 SO 的其他问题，但它们都涉及基于全屏照片的分页，包括 Apple 的 WWDDC PhotoScroller 示例。

任何人有任何见解？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:47:17.137

您基本上想要跟踪滚动到屏幕外的视图并重用它们。

您可能想查看[ATArrayView](https://github.com/andreyvit/SoloComponents-iOS)。它实现了类似于 UITableView 的回收机制，但 UIScrollView 具有任意数量的行和列？

我已经将它用作我自己的图像滚动代码的基础，并且非常好。它的委托方法遵循 UITableView 数据源和委托协议的精神。

祝你好运

蒂姆

# java - antlr如何以任何顺序定义可选部分

> ID：11199077
> 
> 赞同：4
> 
> 时间：2012-06-26T00:01:29.660
> 
> 标签：java, antlr

假设需要语法来解析以下模板：

```
1\. REPORT
2\. BEGIN
3\.   QUERY
4\.   BEGIN
5\.     AGGREGATION: day
6\.     DIMENSION: department
7\.   END
8\. END 
```

其中第 5 行和第 6 行是可选的，并且 2 行的顺序无关紧要。如何在我的语法文件中指定它？下面是我的解决方案（见第 12 行）：

```
1\. grammar PRL;
2\. report
3\.  : REPORT
4\.      BEGIN 
5\.          query
6\.      END
7\.  ;
8.
9\. query
10\.  : QUERY 
11\.     BEGIN
12\.         (aggregation_decl dimension_decl | dimension_decl aggregation_decl)? 
13\.     END
14\. ; 
```

所以它可以工作，但它看起来很丑，如果我有两个以上的部分，它会很快变得难以管理吗？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:49:53.820

像这样的东西？通常，您会强制在以后的处理步骤中仅存在每个项目中的一个。否则，如您所见，语法会变得笨拙。

```
grammar PRL;
report
  : REPORT
      BEGIN 
          query
      END
  ;

query
  : QUERY 
     BEGIN
       body_decl* 
     END
 ;

body_decl :
   aggregation_decl dimension_decl
 | dimension_decl aggregation_decl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:58:59.820

正如亚当已经提到的：这通常是在解析器创建某种（抽象）解析树之后完成的。您只需收集所有类型的声明，如下所示：

```
grammar PRL;

report
 : REPORT BEGIN query END
 ;

query
 : QUERY BEGIN decl* END
 ;

decl
 : NAME ':' NAME
 ;

REPORT : 'REPORT';
BEGIN  : 'BEGIN';
END    : 'END';
QUERY  : 'QUERY';
NAME   : ('a'..'z' | 'A'..'Z')+;

SPACE  : (' ' | '\t' | '\r' | '\n')+ {skip();}; 
```

`decl*`之后，检查您的 AST中是否有重复项。

但是如果你真的想在解析过程中这样做，你需要抓住左侧`decl`并将它们添加到 a 中`Set`，当你偶然发现重复时，抛出一个谓词异常：

```
grammar PRL;

@parser::header {
  import java.util.Set;
  import java.util.HashSet;
}

report
 : REPORT BEGIN query END
 ;

query
 : QUERY BEGIN unique_decls END
 ;

unique_decls
@init{Set<String> set = new HashSet<String>();}
 : (decl {set.add($decl.key)}?)*
 ;

decl returns[String key]
 : k=NAME ':' NAME {$key = $k.text;}
 ;

REPORT : 'REPORT';
BEGIN  : 'BEGIN';
END    : 'END';
QUERY  : 'QUERY';
NAME   : ('a'..'z' | 'A'..'Z')+;

SPACE  : (' ' | '\t' | '\r' | '\n')+ {skip();}; 
```

`{set.add($decl.key)}?`称为[*Validating Semantic Predicates*](https://stackoverflow.com/questions/3056441/what-is-a-semantic-predicate-in-antlr)将在其中的代码 ( `set.add($decl.key)`) 计算为时引发异常`false`。在这种情况下，只要集合已经包含某个 ，它就会评估为 false `key`。

# .htaccess - htaccess 重定向

> ID：11199079
> 
> 赞同：0
> 
> 时间：2012-06-26T00:01:41.063
> 
> 标签：.htaccess, redirect

我在可能网站上的页面运行良好，直到有人将类似 service.php/service.php 的浏览器放入浏览器。该页面没有显示任何错误，只是一个空页面。我会 ht-access 将用户重定向到 service.php。

谢谢您的帮助

杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:39:53.723

如果您可以使用 mod_rewrite，请将以下内容添加到您的 .htaccess 中。

```
RewriteEngine On
RewriteBase /base/path
RewriteRule ^.*$ service.php 
```

# c# - 从不在代码隐藏文件中的方法返回 UserControl。

> ID：11199082
> 
> 赞同：0
> 
> 时间：2012-06-26T00:01:47.633
> 
> 标签：c#, asp.net, user-controls, namespaces, code-behind

我想创建一个可以从不同的代码隐藏文件中调用的辅助方法。此方法将返回一个 UserControl (myUC)。但是，除了在 ASPX 文件或 web.config 文件中注册 UserControl 之外，我看不到任何访问 myUC 的方法，但这些方法都不会让我访问非代码隐藏 CS 文件。我想也许我可以将 UserControl 包装在命名空间中，然后在 CS 文件中使用该命名空间，但这也不起作用。

我正在考虑放弃将 UserControl 用于复合控件（[http://msdn.microsoft.com/en-us/library/aa719734(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa719734(v=vs.71).aspx)），因为它可以包装在命名空间中并在任何 CS 文件中使用。

但在我这样做之前，我想知道是否有人可以对此有所了解？

谢谢你。约瑟夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:06:14.560

UserControl 并不是要从后面的代码创建的。这不是它的目的。您必须为此使用 CustomControl。在这里阅读：

[ASP.Net 自定义控件与用户控件：这两个是否相同](https://stackoverflow.com/questions/673370/asp-net-custom-controls-vs-user-controls-are-these-two-the-same)

# php - PHP奇怪的未定义索引错误

> ID：11199090
> 
> 赞同：10
> 
> 时间：2012-06-26T00:02:31.260
> 
> 标签：php, arrays, http-headers

我有一个非常令人沮丧的问题，我无法检索任何标题。这是我的代码：

```
$headers = getallheaders();
echo($headers["SystemTime"]); //Doesnt work
$keys = array_keys($headers);
echo($headers[$keys[4]]); //Doesnt work 
```

这两行都产生错误“未定义的索引：SystemTime”。

我一生都无法弄清楚为什么我无法获得价值。如果我去`print_r($headers);`，我会得到这个

```
Array
(
    [Content-Type] => application/x-www-form-urlencoded
    [Content-Length] => 0
    [Host] => localhost
    [Referer] => 
    [SystemTime] => 2012-06-26+09%3a20%3a27
) 
```

$headers 的 var_dump

```
array(5) {
  ["Content-Type"]=>
  string(33) "application/x-www-form-urlencoded"
  ["Content-Length"]=>
  string(1) "0"
  ["Host"]=>
  string(9) "localhost"
  ["Referer"]=>
  string(0) ""
  ["SystemTime"]=>
  string(23) "2012-06-26+10%3a10%3a08"
} 
```

$keys 的 var_dump

```
array(5) {
  [0]=>
  string(12) "Content-Type"
  [1]=>
  string(14) "Content-Length"
  [2]=>
  string(4) "Host"
  [3]=>
  string(7) "Referer"
  [4]=>
  string(10) "SystemTime"
}

foreach ($headers as $name => $value) { 
   echo "$name: $value. From Array: {$headers[$name]}\n"; 
} 
```

回来：

```
Connection: Keep-Alive. From Array: Keep-Alive
Content-Type: application/x-www-form-urlencoded. From Array: application/x-www-form-urlencoded
Content-Length: 0\. From Array: 0
Host: localhost. From Array: localhost
Referer: . From Array: 

Notice:  Undefined index:  SystemTime in /clientdata/apache-www/a/d/[XXXXXX].com/www/admin/request/GetPCLicence.php on line 22
SystemTime: 2012-06-26+10%3a10%3a08\. From Array: 
```

我被卡住了，我真的无法弄清楚出了什么问题。它应该工作。

PS。我知道 SystemTime 标头是非标准的。我从我的 http_request 中提供了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T01:00:34.993

在你们的帮助下，我得到了它。我有一种感觉，因为它在反序列化之后起作用，可能编码不同，这就是为什么我们可以看到它，但不能触摸它？

我下面的代码获取所有标题并转换编码并将其放入一个新数组中:)

这是我的“翻译”代码。

```
 $headersRaw = getallheaders();
    $headers = array();
    foreach($headersRaw as $key => $value)
    {
        $headers[mb_convert_encoding($key, "UTF-8")] = $value;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:50:43.873

此时您最好的选择可能是使用`$_SERVER`超全局获取您需要的任何标头的值（例如`$_SERVER['HTTP_SYSTEMTIME']`.

我无法通过调用`getallheaders()`和发送自定义请求（就像您的`SystemTime`标题设置为`2012-06-26+10%3a10%3a08`. 它按预期工作，我看到该值打印了两次（一次使用过`getallheaders()`，一次使用过`$_SERVER`。这很可能是一个奇怪的 PHP 错误，因为我没有看到关于该函数的任何特殊说明`apache_request_headers`，或者它的代码在PHP 的 5.2.17 分支。

希望这暂时有所帮助。无论如何，使用`$_SERVER['HTTP_*']`可能更可靠，因为`getallheaders`并非在所有配置中都可用。

# installation - Visual Studio 2010“安装项目”注册表编辑器不起作用

> ID：11199093
> 
> 赞同：13
> 
> 时间：2012-06-26T00:02:55.443
> 
> 标签：installation, registry, setup-project

我有一个安装项目，需要向注册表添加 1 个简单字符串，而安装项目中内置的注册表编辑器似乎根本不起作用。默认情况下，它将基本密钥 HKEY_LOCAL_MACHINE\Software\[Manufacturer] 放入安装项目，这甚至不起作用。

这是我用来添加密钥的步骤。

*   右键设置项目：查看->注册表
*   显示一个模拟注册表，我根据需要深入创建密钥。
*   我创建 HKEY_LOCAL_MACHINE\Software\[Manufacturer]\[ProductName]
*   运行安装程序。未报告错误，但密钥不存在。

**编辑**：看看[这个](http://www.simple-talk.com/dotnet/visual-studio/getting-started-with-setup-projects/)网页上的图 5。它向您展示了我所看到的内容，除了看起来像旧版本的 Visual Studio 之外。

我不明白这怎么会失败，它应该很简单。我什至尝试过简单的键，但它不会创建任何东西，或者至少会引发错误。我已经看到了这个[解决方案](https://stackoverflow.com/questions/1255448/visual-studio-setup-project-failing-to-add-keys-to-registry)，但是当有内置功能时，添加一个后期构建步骤来手动编辑注册表是很荒谬的。该帖子表明该功能刚刚损坏，因此请不要使用它。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-26T05:30:08.880

如果您有 32 位安装程序，则密钥将被重定向到 HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\ 密钥下

您可以在此处找到更多详细信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa384232 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384232(v=vs.85).aspx)

# ssl - OpenSSL 和 s_client - 为什么客户端需要私钥？

> ID：11199099
> 
> 赞同：40
> 
> 时间：2012-06-26T00:03:31.983
> 
> 标签：ssl, openssl, ssl-certificate

我需要在 .NET/WCF 应用程序和第三方 Web 服务器之间设置 2 路 SSL 通信通道。现在我正在尝试与主机成功握手，以验证所有元素是否设置正确（客户端证书、服务器证书颁发机构、网络通信......）。我正在使用 openSSL 命令行工具尝试使用 s_client 命令来验证这一点。

这是阻止我的原因，也是我不明白的原因：

*   **无论我做什么，openSSL 都希望找到客户端**证书的私钥
*   客户端证书是由第三方提供给我的，但它不包含任何私钥
*   如果我只是使用 openSSL 生成自己的私钥文件，则会收到键值不匹配错误

请记住，我刚刚开始接触 SSL，所以我对整个协议有一个非常基本的了解。从我一直在阅读的内容来看，似乎服务器和客户端都需要采用 2 路 SSL 设置的私钥。但是，我不知道如何在我的客户端上获得一个有效的私钥（使用给我的客户端证书）。如果有人能对客户端证书私钥有所了解，我将不胜感激，因为这让我很头疼。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-06-26T00:29:46.733

证书本身只是公开的信息。将公钥证书与其包含的名称相关联的事实是，任何对该名称具有合法控制权的人（例如您的姓名或您的服务器的名称）也拥有它的私钥。

证书用于通过挑战远程方执行只能使用相应私钥完成的操作来证明远程方的身份：签署某些内容（可以使用公钥进行验证）或解密使用加密的内容公钥。（这两种情况都可能发生在 SSL/TLS 握手中，具体取决于密码套件。）

在 SSL/TLS 握手期间，服务器发送其证书（明文）并向客户端证明它[使用经过身份验证的密钥交换](https://www.rfc-editor.org/rfc/rfc4346#appendix-F.1.1)具有相应的私钥。

在您的情况下，您还想使用客户端证书身份验证。在握手期间发送客户端证书是不够的：客户端还必须证明它拥有私钥。否则，任何收到该证书的人都可以克隆它。使用证书的目的是防止任何克隆，这样您就不必显示自己的秘密（私钥）。

更具体地说，客户端必须在 TLS 握手的[证书验证](https://www.rfc-editor.org/rfc/rfc4346#section-7.4.8)消息中对握手消息进行签名，以便服务器可以根据客户端证书中发送的公钥对其进行验证。如果没有这一步，就不会发生客户端证书*身份验证*。

> 客户端证书是由第三方提供给我的，但它不包含任何私钥

给你没有私钥的证书似乎有点毫无意义，除非你事先已经在你身边生成了一个证书请求（在这种情况下你会有私钥）。

实际上，与其获得证书及其私钥，不如生成密钥对、创建证书请求 (CSR) 并让您的 CA 从该 CSR 颁发证书（但他们不知道您的私钥）。在这种情况下，您应该保留您的私钥，并且您可以将它与您将收到的证书一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-20T03:51:16.187

这是个有趣的问题。在配置 LDAPS 时，我对 TLS 相关的错误感到困惑，我在这里学习。

*   名称，“公钥”和“私钥”听起来像是一种单向操作，但它是双向的，任何由一个密钥加密并由另一个密钥解密的东西 - 只是一个密钥是公开的
*   信息 = 公开可用的数据，具有未知的完整性 - 它可能被第三方篡改
*   签名 = 由私钥加密的信息，伴随信息
*   验证签名 = 使用公钥解密签名并取回信息，从而证明“创建签名的人都知道私钥”，或者，信息在签名后保持不变
    *   也就是说，除非私钥被盗
*   证书 = 信息 + 签名 + 公钥 + 私钥
    *   信息=肉
    *   签名 = 验证信息的完整性
    *   公钥 = 验证其他证书，请参阅证书链
    *   私钥 = 不包含在证书本身中，但应由证书所有者保存，可用于签署其他证书
*   证书颁发机构 (CA) = 持有公钥/私钥对并创建证书的任何人
    *   CA 身份在证书信息中指示
*   证书链 = 使用母证书上的公钥来验证子证书上的签名，以确保子证书由母 CA 创建和签名
    *   和妈妈创建并由奶奶签名，等等
*   根 CA = 根 CA 是您无条件信任的 CA
    *   因为他们的证书（根证书）已作为信任源预加载在您的浏览器或操作系统中
    *   也因为他们的证书是自签名的，它的签名是使用自己的私钥创建的，由自己的公钥验证
    *   这可能会令人困惑，但将其视为基于证书的加密的起源——只有当人们发现依赖少数根 CA 来创建和签署无数证书是不安全的（私钥可能被盗）和不可能（迅速增加的需求）时证书），他们提出了证书链的想法
    *   根 CA 仅为某些中间 CA 创建和签署证书，因此私钥不会经常使用并且更安全
    *   中间 CA 可以创建和签署数百万个证书，并在已知私钥泄露时撤销其证书
    *   这就是你不常看到根密钥仪式的原因，它表明了私钥对于根证书的重要性：私钥使用得越少，暴露的可能性就越小
*   自签名根证书 = 几乎与根证书相同 - 只有创建者才会信任
*   TLS 握手 = 服务器发送证书，客户端验证是针对证书链，验证后，安全地交换“密码”
    *   然后使用“密码”对使用对称加密的实际数据传输进行加密
    *   由于需要强大的计算能力，非对称加密不用于实际数据
*   客户端证书身份验证 = 除了之前对服务器进行身份验证的过程之外，服务器还要求客户端提供有效的证书，以及之前握手消息的签名
    *   签名是使用证书的私钥创建的，可以通过证书上的公钥进行验证
    *   这证明了证书的所有权
    *   这通常用于限制对已知单个客户端的访问
    *   使用证书意味着不会发生中间人攻击或重放攻击
    *   这在金融或物联网中很常见
    *   这也被 LDAPS 使用，当我在本地密钥库中有一个有效证书但它没有附带它的私钥时，它会导致神秘的错误消息

...因此，就 而言`openssl`，当您使用`-cert`时表示客户端证书身份验证，您需要`-key`指定相应的私钥。

但是，对于很多Web场景，即使服务器的证书是由自制的CA签署的，也只需将自制的CA添加到truststore或keychain，就可以验证服务器证书。这是通过使用`-CAfile`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-15T06:18:05.797

Bottom-line.. If you're sending client certificates, then you would need the client certificates' private key to encrypt the `pre-master secret`

# opengl - 尺寸视图以适合场景处理：

> ID：11199100
> 
> 赞同：0
> 
> 时间：2012-06-26T00:03:36.250
> 
> 标签：opengl, processing

我正在寻找一种方法，在处理中，自动放大/缩小以适应我正在创建的模型。

也就是说，设置视图，使我的对象的任何部分都没有延伸到窗口视图之外。

我查看了[参考资料](http://processing.org/reference/)，但没有看到任何有助于此的内容。

我想我可以实现一种方法来做到这一点，但如果在处理中已经有一种方法可以轻松做到这一点，我不想重新发明轮子。

注意：也标记为 OpenGL，因为 OpenGL 中使用的方法很容易转换为处理。

# iphone - 将数据从 plist 传递到详细视图

> ID：11199102
> 
> 赞同：0
> 
> 时间：2012-06-26T00:03:42.327
> 
> 标签：iphone, xcode, uitableview, uiviewcontroller, plist

我有一个 plist（字典数组），它填充一个表格视图并正常工作。我使用带有情节提要的 Xcode 4。

现在我从常规 UIViewController 创建了一个详细视图，当然我希望所选名称显示在详细视图的 nameLabel 中。但我无法建立正确的联系。到目前为止，这是我的代码：

WineObject.m:

```
#import "WineObject.h"

@implementation WineObject 
@synthesize libraryContent, libraryPlist;

- (id)initWithLibraryName:(NSString *)libraryName {
    if (self = [super init]) {
        libraryPlist = libraryName;
        libraryContent = [[NSArray alloc] initWithContentsOfFile:[[NSBundle mainBundle] 
                                                              pathForResource:libraryPlist ofType:@"plist"]];
}
return self;
}

- (NSDictionary *)libraryItemAtIndex:(int)index {
return (libraryContent != nil && [libraryContent count] > 0 && index < [libraryContent count]) 
? [libraryContent objectAtIndex:index]
: nil;
}

- (int)libraryCount {
    return (libraryContent != nil) ? [libraryContent count] : 0;
}

- (void) dealloc {
    if (libraryContent) [libraryContent release];
    [super dealloc];
}

@end 
```

视图控制器.h：

```
#import <UIKit/UIKit.h>
@class WineObject;

@interface WinesViewController : UITableViewController {
WineObject *wine;
}

@end 
```

视图控制器.m：

```
#import "WinesViewController.h"
#import "WineObject.h"
#import "WineCell.h"

@interface WinesViewController ()

@end

@implementation WinesViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (void)viewWillAppear:(BOOL)animated {
    wine = [[WineObject alloc] initWithLibraryName:@"Wine"];
    self.title = @"Vinene";
    [self.tableView deselectRowAtIndexPath:[self.tableView indexPathForSelectedRow] animated:YES];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [wine libraryCount];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"wineCell";

    WineCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...

    cell.nameLabel.text = [[wine libraryItemAtIndex:indexPath.row] valueForKey:@"Name"];
    cell.districtLabel.text = [[wine libraryItemAtIndex:indexPath.row] valueForKey:@"District"];
    cell.countryLabel.text = [[wine libraryItemAtIndex:indexPath.row] valueForKey:@"Country"];
    cell.bottleImageView.image = [UIImage imageNamed:[[wine libraryItemAtIndex:indexPath.row] valueForKey:@"Image"]];
    cell.flagImageView.image = [UIImage imageNamed:[[wine libraryItemAtIndex:indexPath.row] valueForKey:@"Flag"]];
    cell.fyldeImageView.image = [UIImage imageNamed:[[wine libraryItemAtIndex:indexPath.row] valueForKey:@"Fylde"]];
    cell.friskhetImageView.image = [UIImage imageNamed:[[wine libraryItemAtIndex:indexPath.row] valueForKey:@"Friskhet"]];
    cell.garvesyreImageView.image = [UIImage imageNamed:[[wine libraryItemAtIndex:indexPath.row] valueForKey:@"Garvesyre"]];

    return cell;
}

#pragma mark - Table view delegate

@end 
```

WineCell.h：

```
#import <UIKit/UIKit.h>

@interface WineCell : UITableViewCell

@property (nonatomic, strong) IBOutlet UILabel *nameLabel;
@property (nonatomic, strong) IBOutlet UILabel *districtLabel;
@property (nonatomic, strong) IBOutlet UILabel *countryLabel;
@property (nonatomic, strong) IBOutlet UIImageView *bottleImageView;
@property (nonatomic, strong) IBOutlet UIImageView *flagImageView;
@property (nonatomic, strong) IBOutlet UIImageView *fyldeImageView;
@property (nonatomic, strong) IBOutlet UIImageView *friskhetImageView;
@property (nonatomic, strong) IBOutlet UIImageView *garvesyreImageView;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:11:17.787

您是使用 XIB 作为接口还是以编程方式生成它？

* * *

如果您使用的是 XIB，问题是您没有加载它：

改变

`winesDetailViewController = [[WinesDetailViewController alloc] init];`

到

`winesDetailViewController = [[WinesDetailViewController alloc] initWithNibName:@"YourNibNameHere" bundle:nil];`

* * *

或者，如果您以编程方式生成它，则必须首先设置 nameLabel 否则它将为零。@synthesize 不设置变量，它只是生成 getter 和 setter，以便您可以从外部设置它。

在你的`viewDidAppear:`（或者更好的是在你的`init`）里面添加：

`self.nameLabel=[[UILabel alloc] initWithFrame:CGRectMake(100,100,100,100)];`

* * *

**编辑：如果您使用情节提要，看来您必须执行以下操作。**

故事板都是关于关系的。在故事板编辑器中，您添加按钮并告诉他们他们连接到哪个视图控制器。同样的想法也适用于 TableView Cells。您可以添加原型表视图单元格（并对其进行自定义）并为其分配关系。您将要为其提供的关系是您的详细视图。

1.）子类 UITableViewCell 并给它一个属性，即您要发送到详细视图的字典

2.) 创建单元格 ( `cellForRowAtIndexPath:`) 时，您需要确保将自定义单元格出列并将字典分配给您提供的属性。

3.) 确保您的详细视图具有标识符：`DetailView`

4.) 在表格视图控制器中，添加以下代码：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
   if([segue.identifier isEqualToString:@"DetailView"])
   {
      //This works because by the time prepareForSeque: is called, the navigationController has loaded the new view
      ((DetailView *)[[self.navigationController viewControllers] objectAtIndex:0]).dataProperty=((MyCustomTableViewCell *)sender).dataProperty;
   }
} 
```

应该这样做！

# qglwidget - 如何将 QMainWindow 调整大小事件传递给 QMainWindow 中包含的 QGLWidget？

> ID：11199105
> 
> 赞同：0
> 
> 时间：2012-06-26T00:04:00.840
> 
> 标签：qglwidget, qmainwindow, qt4.8

最初，我遵循[http://qt-project.org/wiki/How_to_use_OpenGL_Core_Profile_with_Qt](http://qt-project.org/wiki/How_to_use_OpenGL_Core_Profile_with_Qt)的结构。我创建了一个 vanilla Visual Studio 2010 Qt 应用程序项目，单击 .ui 文件启动 Qt Designer，插入一个 QWidget 并将其提升为 myglwidget。然后我创建了 QGLWidget 的 myglwidget 子类。

效果很好，我得到了我的红色三角形。

问题是当主窗口调整大小时，myglwidget 不会收到任何调整大小事件，即使我将小部件大小属性设置为“扩展”也是如此。

当我重构我的应用程序构造函数以调用 setCentralWidget(&myglwidget_) 代码编译并运行但没有出现 OpenGL 窗口。

我没有看到如何调整我的小部件以匹配主窗口大小。我也不明白为什么 setCentralWidget 方法不起作用。

我相信我知道如何通过编写明确的 Qt 代码来解决问题，但这违背了我尝试使用 Qt Designer 在 Qt 中构建 OpenGL 应用程序的目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:10:43.130

应用程序“baz6”的以下代码解决了该问题。我在向导生成的代码中插入的代码被标记为`//***`

baz6.h：

```
#ifndef BAZ6_H
#define BAZ6_H

#include <QtGui/QMainWindow>
#include "ui_baz6.h"
#include "myglwidget.h"        //***

#include <QResizeEvent>

class baz6 : public QMainWindow
{
    Q_OBJECT

public:
    baz6(QWidget *parent = 0, Qt::WFlags flags = 0);
    ~baz6();

private:
    Ui::baz6Class ui;
    myGLWidget *myglwidget_;      //***
};

#endif // BAZ6_H 
```

baz6.c：

```
#include "baz6.h"
#include "myglwidget.h"

baz6::baz6(QWidget *parent, Qt::WFlags flags)
    : QMainWindow(parent, flags)
{
    ui.setupUi(this);

    myglwidget_ = new myGLWidget();      //***
    setCentralWidget(myglwidget_);       //***
}

baz6::~baz6()
{

} 
```

以前，我没有显式构造 myGLWidget。

# sql - 查找表 A 中也在表 B 中的所有用户

> ID：11199106
> 
> 赞同：0
> 
> 时间：2012-06-26T00:04:04.783
> 
> 标签：sql

我有带有字段 user1 和 user2 的表 A 和带有 user3 和 user4 对的表 B。

我希望能够从表 A 中找到 user1/user2 组合也在表 B 中的任何行。

顺序无关紧要。例如，user1=Mike、user2=Joe 的表 A 将匹配 user3=Joe 和 user4=Mike 的表 B。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T00:08:17.593

我可能只是`or`在连接中使用显式：

```
select user1, user2 
      from tableA join tableB on 
          (user1=user3 and user2=user4) or 
          (user1=user4 and user2=user3) 
```

......但是带着一粒盐。我被指责过度使用连接，可能至少有一点理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T00:08:06.860

```
select a.user1, a.user2 from a, b 
where (a.user1 == b.user3 and a.user2 == b.user4)
or (a.user1 = b.user4 and a.user2 = b.user3); 
```

# python - 有没有办法用python获取本地机器的进程信息？

> ID：11199107
> 
> 赞同：1
> 
> 时间：2012-06-26T00:04:25.420
> 
> 标签：python, cpu, process

我想要一些可以接收我进程详细信息的东西，比如我在 linux 中使用 'ps' 命令接收到的东西，

获得 2 种基本类型——CPU 使用率和内存使用率。

今天为了得到这个，我使用了不舒服的方式：

```
subprocess.check_output(["ps", "aux"]) 
```

...........

并解析这个的输出..

任何想法或解决方法都是可以接受的！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T00:12:31.723

签出[psutil](http://code.google.com/p/psutil/)包。我不知道严格使用标准库的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T00:13:38.400

我建议你使用**[psutil](http://code.google.com/p/psutil/)**

流程的典型用法和示例：

```
psUtilInfo - psutil.Process(pid)
cpuPercentage = int(psUtilInfo.get_cpu_percent())
memoryInfo, _vms =psUtilInfo.get_memory_info() 
```

获取所有进程

```
psutil.get_pid_list() 
```

我想你也可以从这个模块中得到更多这样的信息。

# vim - vimrc 清理当前行的函数

> ID：11199114
> 
> 赞同：0
> 
> 时间：2012-06-26T00:06:18.110
> 
> 标签：vim

我正在尝试创建一个 vimrc 函数，该函数将通过简单的替换来清理一行。该函数在回车时调用。该函数正在被调用并正在清理行内容。我的问题是如何用函数内部清理的内容覆盖以前的内容？

```
function! CleanLine()
  let s = getline( '.' )
  let s = substitute( s, '( )', '()', 'g' )
  let s = substitute( s, ';', '; ', 'g' )
  let s = substitute( s, '(', ' (', 'g' )
  "HOW DO I SET THE CURRENT LINE CONTENT AS s
endfunction
inoremap <CR> <C-R>=CleanLine()<CR> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:32:00.480

有一个函数叫`setline()`

键入`:help setline()`寻求帮助。

# json - 在 javascript show object-object 中解析 json 数据

> ID：11199117
> 
> 赞同：0
> 
> 时间：2012-06-26T00:06:35.107
> 
> 标签：json

我正在解析以下 json 数据。

[{"id":"1","name":"vikash"}] 我正在使用以下 jquery 函数来解析它的值，在警报框中显示 object-object msg.plz 让我知道如何解决这个问题?

```
 function getid(id)
   {
 $.ajax({url:"page.php?id="+id, 
     success:function(result){
alert(result);
    var arr = $.parseJSON(result);

     $( arr).each( function( i, value ) {
    var ab=$( "input[name=" + i + "]" ).val( value );
     alert(ab);
    });

     }});                               
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:09:23.953

这不是有效的 JSON

猜你的意思是： [{"id":"1","name":"vikash"}]

或：{"id":"1","name":"vikash"}

# php - 在 Windows Server 2008 R2 上安装 imagick

> ID：11199118
> 
> 赞同：2
> 
> 时间：2012-06-26T00:06:44.657
> 
> 标签：php, imagemagick, windows-server-2008-r2, imagick

所以，我整天都在做这件事，几乎要放弃了，但我认为发布我的问题是最后的好机会。我知道这很困难，但并非不可能，因为我已经阅读了许多关于同一主题的故事，而且它们似乎最终都到达了那里。

我正在尝试在 Windows Server 2008 R2 64 位上安装 Imagick（Imagemagick 的 PHP DLL）。我正在使用 PHP 的线程安全版本，并且在尝试安装之前让服务器运行得非常好。以下是我已经采取的步骤：

1.  我安装了**GPL GhostsScript**包 (gs905w64.exe)，因为 ImageMagick 要求在 ImageMagick 本身之前安装它。好的，接下来...

2.  下载**“ImageMagick-6.6.2-10-Q16-windows-x64-dll.exe”**并将其安装到路径 C:\imagemagick。根据互联网，这似乎是此服务器/DLL 组合的首选版本。我尝试了其他 4 次安装，包括最新版本，到目前为止，这似乎是最合适的。安装后，它说使用“​​logo.miff”执行的命令行步骤运行良好。安装和测试后，我确认安装路径正确显示在我的环境变量中。太好了……下一个。

3.  从[此处](http://valokuva.org/builds/)下载**“php_imagick_ts.dll”**，将其保存到我的扩展文件夹（是的，正确的）并将其添加到我的 php.ini 文件中（也是正确的）。由于这不起作用，我在同一个下载页面上尝试了所有 3 个版本的线程安全 DLL。这些都不起作用，所以我也尝试了非线程安全的版本，但没有运气。我还尝试了[此处](http://valokuva.org/outside-blog-content/imagick-windows-builds/080709/)提供的**php_imagick_dyn-Q16.dll**以及静态版本。静态版本终于在一切之后工作了。

***   我安装了 Microsoft Visual C++ 2008 Redistributals（主要版本和 SP1 版本）。这似乎对任何事情都没有影响。** 

 **所有这些之后的最终结果：“imagick”出现在我的 phpinfo() 中，但不起作用并且 extension_loaded('magickwand') 返回 false。我假设我的安装在这里失败。你能告诉我我做错了什么吗？**

# ios - 在 iOS 版卡坦岛定居者中放置数字图块

> ID：11199119
> 
> 赞同：-1
> 
> 时间：2012-06-26T00:07:07.860
> 
> 标签：ios, algorithm, matrix

我正在为 iOS 编写 Catan 的定居者，目前我的数据块在 matix 中。现在，我正在尝试将数字附加到每个图块上。但我坚持以算法方式执行此操作的正确方法。将数字牌放在板上有特定的规则。这些都是：

1) 它们必须按照图像中显示的预定义顺序进行。

2) 你必须从棋盘的一个角落开始。

3) 你必须逆时针绕着棋盘，向中心盘旋。

4) 你必须跳过沙漠板块。

![卡坦板](../Images/ecf8ec7274daa900fe20978ca8784b32.png)

由于板上只有 6 个地方可以实际开始放置图块，因此我意识到将 6 个解决方案手动编码到我的数据网格中并不难。但是有一个游戏变体，其中棋盘变得更大，所以我认为值得探索一种算法。

有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T00:41:39.240

您想要做的将涉及瓷砖之间的几何关系（矩阵中的条目）

您需要一种存储和查询该信息的方法。

人们开发了几种方法来为六边形分配坐标：

*   [http://playtechs.blogspot.com/2007/04/hex-grids.html](http://playtechs.blogspot.com/2007/04/hex-grids.html)
*   [http://jemgine.omnisu.com/?page_id=412](http://jemgine.omnisu.com/?page_id=412)
*   [http://www-cs-students.stanford.edu/~amitp/Articles/GridToHex.html](http://www-cs-students.stanford.edu/~amitp/Articles/GridToHex.html)

一种做你想做的事情的方法，在我的脑海中，每个十六进制都有6个指向它的邻居的“指针”。当然，这些指针实际上可以是数组中的索引。

您可以通过注意到它将有 3 个“空”邻居来检测“角落”十六进制。然后你可以从那里逆时针移动，记住你已经访问过哪个。

* * *

**更新**（回应评论）

假设对于给定的十六进制，我们按照我的描述存储 6 个邻居。

在本次讨论中，我们将这些邻居命名为 AF。

我们逆时针分配这些，因为这对我们来说很方便。

图形化：

```
 A
        _____
   B   /     \   F
      /       \
     (         )
      \       /
   C   \_____/   E

          D 
```

对于“角”十六进制，我们可能有：

```
 A
        _____
   B   /     \   NULL
      /       \
     (         )
      \       /
   C   \_____/   NULL

          NULL 
```

因此，如果我们查看这个十六进制，并列出我们的邻接信息（环绕），我们有：

A，B，C，空，空，空，A，B，C，...

一旦我们连续找到 3 个 NULL，我们就知道下一个点应该“指向”我们的起始方向。在这种情况下，我们应该从“A”的方向开始。

另一个例子：

```
 NULL
        _____
 NULL  /     \   NULL
      /       \
     (         )
      \       /
   C   \_____/   E

          D 
```

和以前一样，我们列出一个列表，从顶部开始。

空，空，C，D，E，空，空，空，C

一旦我们找到 3 个 NULL，下一个就是我们的起始方向 - 在本例中为“C”。

从那里向同一个方向螺旋前进应该是相当简单的（当然不是字面上的 - har har）。

PS：感谢[http://ascii.co.uk/art/hexagon](http://ascii.co.uk/art/hexagon)的快速 ascii 艺术（：

# c++ - LibJingle pcp_main.cc 503 错误

> ID：11199120
> 
> 赞同：1
> 
> 时间：2012-06-26T00:07:09.490
> 
> 标签：c++, libjingle

几天来，我一直试图让 PCP LibJingle 示例工作。在解决了所有编译和运行错误之后，我现在遇到了一个我以前没有经验的错误。

当作为发送方或接收方运行程序时，程序会收到 503“服务不可用”错误并终止程序，但作为服务器运行时工作正常。我知道标准是5xx表示服务器端错误，所以我逐行查看程序输出（最后提供）。从我对服务器和 LibJingle 的近乎零的经验来看，我能想到的最好的结果是以下任何一个（或两个）都导致了 503：

1.  Google 已禁用 LibJingle pcp 示例的必要服务。
2.  优先级状态 = -1（据我所知，意味着客户端不可用）。

我已经登录了两个 Google 帐户，因此它们不会脱机/不可用，而 LibJingle 程序反映了这一点。但是，只要 PCP 示例运行，优先级就会重新设置为 -1。我还注意到，程序输出中的大多数（如果不是全部）Google 链接都是 404。

我的问题：

*   这些理论是否接近可能/正在发生的事情？
*   我需要做什么来解决这个问题？
*   我听说可以使用服务器（不是 Google 的服务器）来运行程序。这是真的？如果是这样，我会去哪里调查这个？

预先感谢您的帮助。--KMC

PS 在提供的程序输出中，我正在尝试将文件从 forge...1@gmail.com 发送到 forge...2@gmail.com。我审查了一些东西，并试图减少其他部分。但是，由于不确定什么可能相关或不相关，我没有做太多剪辑。如果某个模组或其他人知道可能相关的内容并想要对其进行编辑，请随时这样做。

```
forgefour@forgefour-ubuntu:~/Desktop$ ./LibJingle_Install/libjingle-0.6.13/talk/build/dbg/staging/pcp forge..1@gmail.com call_main.pdf forge..2@gmail.com/pcp8B13E6B8:outputmainadobe.pdf
Directory: /home/forgefour/Desktop
Password: 
connecting...
[002:406] OpenSSLAdapter::OnConnectEvent
[002:406] SEND >>>>>>>>>>>>>>>>>>>>>>>>> : Mon Jun 25 17:09:17 2012
[002:406]    <stream:stream to="gmail.com" xml:lang="*" version="1.0" xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client">
logging in...
[002:446] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:17 2012
[002:446]    <stream:stream from="gmail.com" id="00B7404A40B94AA0" version="1.0" xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client">
[002:447] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:17 2012
[002:447]    <stream:features>
[002:447]      <starttls xmlns="urn:ietf:params:xml:ns:xmpp-tls">
[002:447]        <required/>
[002:447]      </starttls>
[002:447]      <mechanisms xmlns="urn:ietf:params:xml:ns:xmpp-sasl">
[002:447]        <mechanism>
[002:447]          X-GOOGLE-TOKEN
[002:447]        </mechanism>
[002:447]        <mechanism>
[002:447]          X-OAUTH2
[002:447]        </mechanism>
[002:447]      </mechanisms>
[002:447]    </stream:features>
[002:447] SEND >>>>>>>>>>>>>>>>>>>>>>>>> : Mon Jun 25 17:09:17 2012
[002:447]    <starttls xmlns="urn:ietf:params:xml:ns:xmpp-tls"/>
[002:488] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:17 2012
[002:488]    <proceed xmlns="urn:ietf:params:xml:ns:xmpp-tls"/>
[002:488] BeginSSL: gmail.com
[002:488] ContinueSSL
[002:488] SSL_connect:before/connect initialization
[002:489] SSL_connect:SSLv3 write client hello A
[002:489] SSL_connect:error in SSLv3 read server hello A
[002:489]  -- error want read
[002:489] SEND >>>>>>>>>>>>>>>>>>>>>>>>> : Mon Jun 25 17:09:17 2012
[002:489]    <stream:stream to="gmail.com" xml:lang="*" version="1.0" xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client">
[002:530] ContinueSSL
[002:530] SSL_connect:error in SSLv3 read server hello A
[002:530]  -- error want read
[002:531] ContinueSSL
[002:531] SSL_connect:SSLv3 read server hello A
[002:531] SSL_connect:SSLv3 read server certificate A
[002:531] SSL_connect:SSLv3 read server done A
[002:531] SSL_connect:SSLv3 write client key exchange A
[002:532] SSL_connect:SSLv3 write change cipher spec A
[002:532] SSL_connect:SSLv3 write finished A
[002:532] SSL_connect:SSLv3 flush data
[002:532] SSL_connect:error in SSLv3 read finished A
[002:532]  -- error want read
[002:575] ContinueSSL
[002:575] SSL_connect:SSLv3 read finished A
[002:575]  -- success
[002:575] Certificate from server:
[002:575]         Version: 3 (0x2)
        Serial Number:31:fa:c7:51:00:00:00:00:5b:30
    Signature Algorithm: sha1WithRSAEncryption
        Issuer: C=US, O=Google Inc, CN=Google Internet Authority
        Validity
            Not Before: Jun  5 00:52:14 2012 GMT
            Not After : Jun  5 01:02:14 2013 GMT
        Subject: C=US, ST=California, L=Mountain View, O=Google Inc, CN=gmail.com
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                Public-Key: (1024 bit)
                Modulus:...
                Exponent: 65537 (0x10001)
        X509v3 extensions:
            X509v3 Extended Key Usage: 
                TLS Web Server Authentication, TLS Web Client Authentication
            X509v3 Subject Key Identifier: 
                E1:73:4D:BB:F5:22:C3:57:06:EA:BF:18:73:1F:91:29:EE:54:2A:17
            X509v3 Authority Key Identifier: 
                keyid:BF:C0:30:EB:F5:43:11:3E:67:BA:9E:91:FB:FC:6A:DA:E3:6B:12:24
            X509v3 CRL Distribution Points: 
                Full Name:URI:http://www.gstatic.com/GoogleInternetAuthority/GoogleInternetAuthority.crl
            Authority Information Access: 
                CA Issuers - URI:http://www.gstatic.com/GoogleInternetAuthority/GoogleInternetAuthority.crt
            X509v3 Subject Alternative Name: DNS:gmail.com
    Signature Algorithm: sha1WithRSAEncryption...
[002:575] Cipher: AES128-SHA SSLv3 Kx=RSA Au=RSA  Enc=AES(128)  Mac=SHA1
[002:616] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:18 2012
[002:616]    <stream:stream from="gmail.com" id="F585A9BF4936FE0D" version="1.0" xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client">
[002:616] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:18 2012
[002:616]    <stream:features>
[002:616]      <mechanisms xmlns="urn:ietf:params:xml:ns:xmpp-sasl">
[002:616]        <mechanism>
[002:616]          PLAIN
[002:616]        </mechanism>
[002:616]        <mechanism>
[002:616]          X-GOOGLE-TOKEN
[002:616]        </mechanism>
[002:616]        <mechanism>
[002:616]          X-OAUTH2
[002:616]        </mechanism>
[002:616]      </mechanisms>
[002:616]    </stream:features>
[002:617] SEND >>>>>>>>>>>>>>>>>>>>>>>>> : Mon Jun 25 17:09:18 2012
[002:617]    <auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl" mechanism="PLAIN" auth:allow-non-google-login="true" auth:client-uses-full-bind-result="true" xmlns:auth="http://www.google.com/talk/protocol/auth">
[002:617]      ## TEXT REMOVED ##
[002:617]    </auth>
[002:696] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:18 2012
[002:696]    <success xmlns="urn:ietf:params:xml:ns:xmpp-sasl"/>
[002:697] SEND >>>>>>>>>>>>>>>>>>>>>>>>> : Mon Jun 25 17:09:18 2012
[002:697]    <stream:stream to="gmail.com" xml:lang="*" version="1.0" xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client">
[002:737] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:18 2012
[002:737]    <stream:stream from="gmail.com" id="A554FE81E66DED32" version="1.0" xmlns:stream="http://etherx.jabber.org/streams" xmlns="jabber:client">
[002:737] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:18 2012
[002:737]    <stream:features>
[002:737]      <bind xmlns="urn:ietf:params:xml:ns:xmpp-bind"/>
[002:737]      <session xmlns="urn:ietf:params:xml:ns:xmpp-session"/>
[002:737]    </stream:features>
[002:737] SEND >>>>>>>>>>>>>>>>>>>>>>>>> : Mon Jun 25 17:09:18 2012  
[002:737]    <iq type="set" id="0">
[002:737]      <bind xmlns="urn:ietf:params:xml:ns:xmpp-bind">
[002:737]        <resource>
[002:737]          pcp
[002:737]        </resource>
[002:737]      </bind>
[002:737]    </iq>
[002:777] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:18 2012
[002:777]    <iq id="0" type="result">
[002:777]      <bind xmlns="urn:ietf:params:xml:ns:xmpp-bind">
[002:777]        <jid>
[002:777]          forge...1@gmail.com/pcp7B23909E
[002:777]        </jid>
[002:777]      </bind>
[002:777]    </iq>
[002:777] SEND >>>>>>>>>>>>>>>>>>>>>>>>> : Mon Jun 25 17:09:18 2012
[002:777]    <iq type="set" id="1">
[002:777]      <session xmlns="urn:ietf:params:xml:ns:xmpp-session"/>
[002:777]    </iq>
[002:778] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:18 2012
[002:817] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:18 2012  
[002:817]    <iq type="result" id="1"/>
logged in...
[002:817] SEND >>>>>>>>>>>>>>>>>>>>>>>>> : Mon Jun 25 17:09:18 2012
[002:817]    <presence>
[002:817]      <priority>
[002:817]        -1
[002:817]      </priority>
[002:817]    </presence>
Logged in as forge...1@gmail.com/pcp7B23909E
[002:817] Making key pair
[002:822] Returning key pair
[002:822] Making certificate for forge...1@gmail.com/pcp7B23909E
[002:823] Returning certificate
[002:823] TunnelSessionClientBase::OnSessionCreate: received=0
[002:823] Session:2481285798 Old state:STATE_INIT New state:STATE_SENTINITIATE Type:http://www.google.com/talk/securetunnel Transport:http://www.google.com/transport/p2p
[002:823] TunnelSession::OnSessionState(Session::STATE_SENTINITIATE)
[002:823] SEND >>>>>>>>>>>>>>>>>>>>>>>>> : Mon Jun 25 17:09:18 2012
[002:823]    <iq type="get" id="3">
[002:823]      <query xmlns="google:jingleinfo"/>
[002:823]    </iq>
[002:823] SEND >>>>>>>>>>>>>>>>>>>>>>>>> : Mon Jun 25 17:09:18 2012
[002:823]    <iq to="forge...2@gmail.com/pcp8B13E6B8" type="set" id="5">
[002:823]      <jingle xmlns="urn:xmpp:jingle:1" action="session-initiate" sid="2481285798" initiator="forge...1@gmail.com/pcp7B23909E">
[002:823]        <content name="securetunnel" creator="initiator">
[002:823]          <description xmlns="http://www.google.com/talk/securetunnel">
[002:823]            <type>
[002:823]              recv:outputmainadobe.pdf
[002:823]            </type>
[002:823]            <client-cert>
[002:823]              -----BEGIN CERTIFICATE-----...-----END CERTIFICATE-----
[002:823]            </client-cert>
[002:823]          </description>
[002:823]          <transport xmlns="http://www.google.com/transport/p2p"/>
[002:823]        </content>
[002:823]      </jingle>
[002:823]      <session xmlns="http://www.google.com/session" type="initiate" id="2481285798" initiator="forge...1@gmail.com/pcp7B23909E">
[002:823]        <description xmlns="http://www.google.com/talk/securetunnel">
[002:823]          <type>
[002:823]            recv:outputmainadobe.pdf
[002:823]          </type>
[002:823]          <client-cert>
[002:823]            -----BEGIN CERTIFICATE-----...-----END CERTIFICATE-----
[002:823]          </client-cert>
[002:823]        </description>
[002:823]      </session>
[002:823]    </iq>
[002:867] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:18 2012
[002:867]    <iq to="forge...1@gmail.com/pcp7B23909E" id="3" type="result">
[002:867]      <query xmlns="google:jingleinfo">
[002:867]        <stun>
[002:867]          <server host="stun.l.google.com" udp="19302"/>
[002:867]          <server host="alt3.stun.l.google.com" udp="19302"/>
[002:867]          <server host="alt2.stun.l.google.com" udp="19302"/>
[002:867]          <server host="alt4.stun.l.google.com" udp="19302"/>
[002:867]          <server host="alt1.stun.l.google.com" udp="19302"/>
[002:867]        </stun>
[002:867]        <relay>
[002:867]          <token>
[002:867]            CAESHgoVZm9yZ2Vjb21tczFAZ21haWwuY29tEJXfqb2CJxoQy4rGyFRtv1QQGHf8AQWC0A==
[002:867]          </token>
[002:867]          <server host="relay.google.com" udp="19295" tcp="19294" tcpssl="443"/>
[002:867]        </relay>
[002:867]      </query>
[002:867]    </iq>
[002:880] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:18 2012
[002:880]    <presence from="forge...1@gmail.com/pcp0C32AC91" to="forge...1@gmail.com/pcp7B23909E">
[002:880]      <priority>
[002:880]        -1
[002:880]      </priority>
[002:880]      <x xmlns="vcard-temp:x:update"/>
[002:880]    </presence>
[002:880] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:18 2012
[002:882] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:18 2012   
[002:882]    <presence from="cu...@gmail.com/gmail.17841843" to="forge...1@gmail.com/pcp7B23909E">
[002:882]      <status/>
[002:882]      <priority>
[002:882]        24
[002:882]      </priority>
[002:882]      <caps:c node="http://mail.google.com/xmpp/client/caps" ver="1.1" ext="pmuc-v1 sms-v1 camera-v1 video-v1 voice-v1" xmlns:caps="http://jabber.org/protocol/caps"/>
[002:882]      <x xmlns="vcard-temp:x:update">
[002:882]        <photo>
[002:882]          c632207e8c5c202147ccbd6c431334234750f966
[002:882]        </photo>
[002:882]      </x>
[002:882]    </presence>
[002:956] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:18 2012
[002:956]    <iq to="forge...1@gmail.com/pcp7B23909E" type="error" id="5" from="forge...2@gmail.com/pcp8B13E6B8">
[002:956]      <jingle action="session-initiate" sid="2481285798" initiator="forge...1@gmail.com/pcp7B23909E" xmlns="urn:xmpp:jingle:1">
[002:956]        <content name="securetunnel" creator="initiator">
[002:956]          <description xmlns="http://www.google.com/talk/securetunnel">
[002:956]            <type>
[002:956]              recv:outputmainadobe.pdf
[002:956]            </type>
[002:956]            <client-cert>
[002:956] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:18 2012
[002:956]    -----BEGIN CERTIFICATE-----...-----END CERTIFICATE-----
[002:956]  </client-cert>
[002:956]  </description>
[002:956]  <transport xmlns="http://www.google.com/transport/p2p"/>
[002:956]  </content>
[002:956]  </jingle>
[002:956]  <session type="initiate" id="2481285798" initiator="forge...1@gmail.com/pcp7B23909E" xmlns="http://www.google.com/session">
[002:956]  <description xmlns="http://www.google.com/talk/securetunnel">
[002:956]  <type>
[002:956]  recv:outputmainadobe.pdf
[002:956]  </type>
[002:956]  <client-cert>
[002:956] RECV <<<<<<<<<<<<<<<<<<<<<<<<< : Mon Jun 25 17:09:18 2012
[002:956]    -----BEGIN CERTIFICATE-----...-----END CERTIFICATE-----
[002:956]  </client-cert>
[002:956]  </description>
[002:956]  </session>
[002:956]  <error code="503" type="cancel">
[002:956]  <service-unavailable xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/>
[002:956]  </error>
[002:956]  </iq>
[002:957] Error(session.cc:858): Session error:
<cli:error code="503" type="cancel" xmlns:cli="jabber:client"><service-unavailable xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></cli:error>
in response to:
<cli:iq to="forge...2@gmail.com/pcp8B13E6B8" type="set" id="5" xmlns:cli="jabber:client"><jingle xmlns="urn:xmpp:jingle:1" action="session-initiate" sid="2481285798" initiator="forge.1@gmail.com/pcp7B23909E"><content name="securetunnel" creator="initiator"><description xmlns="http://www.google.com/talk/securetunnel"><type>recv:outputmainadobe.pdf</type><client-cert>-----BEGIN CERTIFICATE-----...-----END CERTIFICATE-----
</client-cert></description><transport xmlns="http://www.google.com/transport/p2p"/></content></jingle><session xmlns="http://www.google.com/session" type="initiate" id="2481285798" initiator="forge...1@gmail.com/pcp7B23909E"><description xmlns="http://www.google.com/talk/securetunnel"><type>recv:outputmainadobe.pdf</type><client-cert>-----BEGIN CERTIFICATE-----...----END CERTIFICATE-----
</client-cert></description></session></cli:iq>
[002:957] Session:2481285798 Old state:STATE_SENTINITIATE New state:STATE_SENTTERMINATE Type:http://www.google.com/talk/securetunnel Transport:http://www.google.com/transport/p2p
[002:957] TunnelSession::OnSessionState(Session::STATE_SENTTERMINATE)
[002:957] Destroying unconnected PseudoTcpChannel
[002:957] SEND >>>>>>>>>>>>>>>>>>>>>>>>> : Mon Jun 25 17:09:18 2012
[002:957]    <iq to="forge...2@gmail.com/pcp8B13E6B8" type="set" id="6">
[002:957]      <jingle xmlns="urn:xmpp:jingle:1" action="session-terminate" sid="2481285798">
[002:957]        <reason>
[002:957]          <general-error/>
[002:957]        </reason>
[002:957]      </jingle>
[002:957]      <session xmlns="http://www.google.com/session" type="terminate" id="2481285798" initiator="forge...1@gmail.com/pcp7B23909E">
[002:957]        <general-error/>
[002:957]      </session>
[002:957]    </iq>
[002:957] OpenSSLStreamAdapter::OnEvent(SE_CLOSE, -1)
[002:957] Cleanup
Tunnel closed with error: -1
[002:957] Cleanup
[002:957] TunnelSessionClientBase::OnSessionDestroy
[002:957] Session:2481285798 Old state:STATE_SENTTERMINATE New state:STATE_DEINIT Type:http://www.google.com/talk/securetunnel Transport:http://www.google.com/transport/p2p
[002:957] virtual void cricket::PseudoTcpChannel::OnMessage(talk_base::Message*): (MSG_SI_DESTROY)
[002:957] SEND >>>>>>>>>>>>>>>>>>>>>>>>> : Mon Jun 25 17:09:18 2012
[002:957]  </stream:stream>
logged out...
[002:957] Cleanup 
```

编辑：根据要求，我包含了一些代码（我会包含所有代码，但主文件是 723 行）。我仍然直接使用 Google 的 LibJingle 代码，未经修改，因为我还不能让它工作。这个文件的完整代码可以在[这里](http://libjingle.googlecode.com/svn/trunk/talk/examples/pcp/pcp_main.cc)找到。

```
int main(int argc, char **argv) {
  talk_base::LogMessage::LogThreads();
  talk_base::LogMessage::LogTimestamps();

  // Parse the arguments.
  int index = 1;
  while (index < argc) {
    std::string name, value;
    if (!ParseArg(argv[index], &name, &value))
      break;

    if (name == "help") {
      Usage();
    } else if (name == "verbose") {
      talk_base::LogMessage::LogToDebug(talk_base::LS_VERBOSE);
    } else if (name == "xmpp-host") {
      gXmppHost = value;
    } else if (name == "xmpp-port") {
      gXmppPort = ParseIntArg(name, value);
    } else if (name == "xmpp-use-tls") {
      gXmppUseTls = ParseBoolArg(name, value)?
          buzz::TLS_REQUIRED : buzz::TLS_DISABLED;
    } else {
      Error(std::string("unknown option: ") + name);
    }
    index += 1;
  }

  if (index >= argc)
    Error("bad arguments");
  gUserJid = buzz::Jid(argv[index++]);
  if (!gUserJid.IsValid())
    Error("bad arguments");

  char path[MAX_PATH];
#if WIN32
  GetCurrentDirectoryA(MAX_PATH, path);
#else
  if (NULL == getcwd(path, MAX_PATH))
    Error("Unable to get current path");
#endif

  std::cout << "Directory: " << std::string(path) << std::endl;

  buzz::Jid gSrcJid;
  buzz::Jid gDstJid;
  std::string gSrcFile;
  std::string gDstFile;

  bool as_server = true;
  if (index + 2 == argc) {
    ParseFileArg(argv[index], &gSrcJid, &gSrcFile);
    ParseFileArg(argv[index+1], &gDstJid, &gDstFile);
    if(gSrcJid.Str().empty() == gDstJid.Str().empty())
      Error("Exactly one of source JID or destination JID must be empty.");
    as_server = false;
  } else if (index != argc) {
    Error("bad arguments");
  }

  std::cout << "Password: ";
  SetConsoleEcho(false);
  std::cin >> gUserPass.password();
  SetConsoleEcho(true);
  std::cout << std::endl;

  talk_base::InitializeSSL();
  CustomXmppPump pump;// Log in.
  pump.client()->SignalLogInput.connect(&debug_log_, &DebugLog::Input);
  pump.client()->SignalLogOutput.connect(&debug_log_, &DebugLog::Output);
  pump.DoLogin(LoginSettings(), new XmppSocket(gXmppUseTls), 0);

  // Wait until login succeeds.
  std::vector<uint32> ids;
  ids.push_back(MSG_LOGIN_COMPLETE);
  ids.push_back(MSG_LOGIN_FAILED);
  if (MSG_LOGIN_FAILED == Loop(ids))
    FatalError("Failed to connect");{
    talk_base::scoped_ptr<buzz::XmlElement> presence(
      new buzz::XmlElement(buzz::QN_PRESENCE));
    presence->AddElement(new buzz::XmlElement(buzz::QN_PRIORITY));
    presence->AddText("-1", 1);
    pump.SendStanza(presence.get());
  }

  std::string user_jid_str = pump.client()->jid().Str();
  std::cout << "Logged in as " << user_jid_str << std::endl;

  // Prepare the random number generator.
  talk_base::InitRandom(user_jid_str.c_str(), user_jid_str.size());

  // Create the P2P session manager.
  talk_base::BasicNetworkManager network_manager;
  AutoPortAllocator allocator(&network_manager, "pcp_agent");
  allocator.SetXmppClient(pump.client());
  cricket::SessionManager session_manager(&allocator);
#ifdef USE_SSL_TUNNEL
  cricket::SecureTunnelSessionClient session_client(pump.client()->jid(),
                                                    &session_manager);
  if (!session_client.GenerateIdentity())
    FatalError("Failed to generate SSL identity");
#else  // !USE_SSL_TUNNEL
  cricket::TunnelSessionClient session_client(pump.client()->jid(),
                                              &session_manager);
#endif  // USE_SSL_TUNNEL
  cricket::SessionManagerTask *receiver =
      new cricket::SessionManagerTask(pump.client(), &session_manager);
  receiver->EnableOutgoingMessages();
  receiver->Start();

  bool success = true;

  if (as_server) {// Establish the appropriate connection.
    pump.Serve(&session_client);
  } else {
    talk_base::StreamInterface* stream = NULL;
    std::string filename;
    bool sending;
    if (gSrcJid.Str().empty()) {
      std::string message("recv:");
      message.append(gDstFile);
      stream = session_client.CreateTunnel(gDstJid, message);
      filename = gSrcFile;
      sending = true;
    } else {
      std::string message("send:");
      message.append(gSrcFile);
      stream = session_client.CreateTunnel(gSrcJid, message);
      filename = gDstFile;
      sending = false;
    }
    success = pump.ProcessStream(stream, filename, sending);
  }

  if (success) {
    // Wait until the copy is done.
    ids.clear();
    ids.push_back(MSG_DONE);
    ids.push_back(MSG_LOGIN_FAILED);
    Loop(ids);
  }

  pump.DoDisconnect();// Log out.

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:24:08.077

好的，所以这个错误是因为错误的完整 JID 和错误的代码执行。PCP 应按照提供的顺序运行：

1.  运行“./pcp receiveruser@host.com”并提供帐户密码。
2.  阅读代码输出中提供的 receiveruser@host.com 帐户的完整 JID。如果可能，最简单的方法是在输出中搜索：“logged in as”。取用户帐户信息中“.com/”之后的所有内容。
3.  运行“./pcp senderuser@host.com send_file_name.extension receiveruser@host.com/(full JID):received_file_name.extension”

发生此错误是因为正在使用的代码执行方法阻止该帐户被视为可用。这与服务器错误或缺少 Google 服务无关（抱歉怀疑您，Google）。至于优先级为 -1，这也与错误无关（在阅读 XMPP 后了解到）。

# perl - Perl 代码不丢弃“子”目录

> ID：11199122
> 
> 赞同：0
> 
> 时间：2012-06-25T17:01:46.037
> 
> 标签：perl

```
use File::Find::Rule;

print "Enter threshold size for files to report ";
chomp( $size_req= <>);
$filename= "C:\\Unicorn";
opendir ($filename, '.') or die "Couldn't open directory, $!";
my $subdir = File::Find::Rule->directory
                ->name('C:\\Unicorn\\sub')
                ->prune
                ->discard;
my $rule =  File::Find::Rule->new;
$rule->file;
$rule->size( ">3*1024" );
print "\n";
my @subdirs= $rule->in ($subdir);
print @subdirs; 
```

它仍然显示独角兽文件夹中的子目录。我不知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:28:42.517

```
use Path::Class::Rule qw();
my $iter = Path::Class::Rule
    ->new
    ->skip_dirs('sub')
    ->file
    ->size('>3M')
    ->iter('C:/Unicorn');
while (my $file = $iter->()) {
    print $file;
} 
```

# verilog - 从 Verilog 代码合成的硬件正确意味着什么

> ID：11199123
> 
> 赞同：4
> 
> 时间：2012-06-26T00:07:27.257
> 
> 标签：verilog, system-verilog

我已阅读“Verilog 综合中的非阻塞分配，致命的编码风格！” 通过克利福德卡明斯。他说这个问题底部的代码是“保证”合成成一个三触发器管道，但不能保证正确模拟（例如 pipeb3，第 10 页；“保证”注释在第 12 页）。该文件获得了最佳论文奖，因此我认为该声明是正确的。[http://www.sunburst-design.com/papers/CummingsSNUG2000SJ_NBA.pdf](http://www.sunburst-design.com/papers/CummingsSNUG2000SJ_NBA.pdf)

我的问题：如果不参考模拟语义，如何定义 Verilog 综合的正确性？非常感谢。

我想加分问题是：假设它不是下面的代码，请给出最简单的 Verilog 程序，它具有明确定义的综合语义并且没有明确定义的模拟语义。再次感谢。

事实上，有人可以给我一段在模拟和合成时定义良好的 Verilog，但两者会产生不同的结果吗？

编码：

```
module pipeb3 q3, d, clk);
  output [7:0] q3;
  input [7:0] d;
  input clk;
  reg [7:0] q3, q2, q1;

  always @(posedge clk) q1=d;
  always @(posedge clk) q3=q2;
  always @(posedge clk) q1=d;
endmodule 
```

PS：万一有人关心，我认为正确合成工具的合理定义可能是“合成硬件将做正确模拟器可以做的事情”。但这与论文不符。

[我现在认为论文是不对的。1364-2001 标准的第 5.2 节明确指出，Verilog 程序的含义是由其模拟定义的，然后标准继续定义（非确定性和所有）。没有提及合成工具必须提供的任何“保证”超过模拟器。

还有另一个标准 1364.1-2002 描述了可综合子集。没有明显提到合成硬件的语义应该与模拟有所不同。第 5.2.2 节“对边缘敏感的存储设备建模”说应该使用非阻塞分配来建模触发器。用标准语言来说，这意味着不支持使用其他任何东西。

作为最后一点，上一段中提到的部分说阻塞分配可用于计算非阻塞分配的 RHS。这似乎违反了卡明斯的建议 #5。

Cliff Cummings 被列为 1364.1-2002 标准工作组的成员。该标准在 IEEE 网站上被列为已替换，但我不知道它是由什么替换的。]

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T19:33:58.147

全部 -

是时候让我加入有用的背景信息和我自己的观点了。

首先 - IEEE-1364.1-2002 Verilog RTL 综合标准从未被任何供应商完全实施，这就是为什么我们都不急于更新标准或提供综合标准的 SystemVerilog 版本。据我所知，该标准并未“被替换”，并且刚刚过期。据我所知，标准中描述的属性从未被任何供应商完全实现。我认为所有供应商都实施的标准中唯一有用的功能是供应商应该在读取任何用户代码之前设置宏 `define SYNTHESIS，以便您现在可以使用 `ifndef SYNTHESIS - `endif 作为通用替代品对于特定于供应商的 // synopsys translate_on - // synopsys translate_off pragma-comments。

Verilog 是作为一种模拟语言发明的，从未打算成为一种综合语言。在 1980 年代后期，Synopsys 认识到工程师真的很喜欢这种 Verilog 仿真语言，并开始定义他们（Synopsys）可以识别并通过综合转换为硬件的语言子集。我们现在将此称为 RTL 综合子集，随着综合工具供应商发现将新型描述转换为硬件的独特和创造性方法，该子集会随着时间的推移而增长。

确实没有“定义的 Verilog 综合的正确性”。Don Mills 和我在 1999 年写了一篇题为“产生模拟和综合不匹配的 RTL 编码风格”的论文，以警告工程师合法的 Verilog 编码风格可能会推断出具有不同行为的合成硬件。 [http://www.sunburst-design.com/papers/CummingsSNUG1999SJ_SynthMismatch.pdf](http://www.sunburst-design.com/papers/CummingsSNUG1999SJ_SynthMismatch.pdf)

考虑到这一点，如果综合结果始终与 Verilog 模拟的行为相匹配，则无需运行门模拟。RTL 模拟的设计是正确的。因为没有保证匹配，工程师运行 gate-sims 来证明门行为与 RTL 行为相匹配，或者他们尝试运行等价检查工具来数学证明综合前 RTL 代码与综合后门模型等价，因此不需要门模拟。

至于额外的问题，这真的很难，因为 Verilog 语义定义得相当好，即使定义是它是一个合法的竞争条件。

至于具有不同结果的仿真和综合中定义良好的代码，请考虑：

```
module code1c (output reg o, input a, b);

  always
    o = a & b;
endmodule 
```

在模拟中，您永远不会超过 time-0。由于缺少敏感度列表，模拟将永远循环。在推断组合逻辑时，综合工具甚至不考虑敏感度列表，因此您会得到一个 2 输入与门和一个关于缺少敏感度列表项的警告，这可能导致综合前和综合后仿真之间的不匹配。在 Verilog-2001 中，我们添加了 always @* 来避免这个常见问题，在 SystemVerilog 中我们添加了 always_comb 来删除敏感度列表并通知综合工具设计者预期的逻辑。

至于论文是否应该提供正确综合行为的保证，它可能不应该提供，但我的论文中描述的保证定义了工程师可以根据多种综合工具的经验对综合工具的期望。

> “作为最后一点，上一段中提到的部分说阻塞分配可用于计算非阻塞分配的 RHS。这似乎违反了卡明斯的建议 #5。”

你是对的，这确实违反了编码准则#5，我认为不应该使用。

在 VHDL 设计中经常违反编码准则 #5，因为 VHDL 变量不能触发另一个进程。我发现 VHDL 阵营在这个问题上平分秋色。一半的人说您不应该使用变量分配，而另一半人说您不应该使用变量来提高仿真性能，但随后需要将变量分配与最终的信号分配混合以触发其他过程。

如果您违反了编码准则 #5，并且如果您的代码是正确的，那么模拟将起作用并且综合也将起作用，但是如果您的代码中有任何错误，则很难调试违​​反编码准则 #5 的设计，因为组合件的波形显示没有意义。波形显示中组合逻辑的输出仅在未断言复位且在时钟沿时更新，这不是真正的组合硬件的行为方式，并且在使用波形显示调试这些设计时已证明这是一个难题（I没有在论文中包含此信息）。

问候 - Cliff Cummings - Verilog 和 SystemVerilog 大师

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T00:17:06.867

我相信正确合成的原因是因为在真正的硅中，“阻塞”和“非阻塞”之间没有区别。

正如您所描述的，Synthesis 将读取并创建三个背靠背链接的触发器。

这在综合中不会成为问题（假设您没有违反触发器保​​持时间），因为真正的门会出现延迟。在 clk 的上升沿，该值需要几个 ns`d`才能传播到`q1`。当时间`d`传播到 时`q1`，`q1`将已经被第二次触发器采样，与`q2`和类似`q3`。

这在模拟中不起作用的原因是没有门延迟。在时钟的上升沿，`q1`将立即被替换为`d`，可能之前`q1`被第二个触发器采样。在实际电路中（具有适当的建立和保持时间），`q1`保证在第一个触发器可以改变其输出值之前在时钟的上升沿进行采样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-16T13:38:17.817

我知道这个 3 岁，但是当有人试图编辑它时，你的帖子只是被标记了。克里夫的回答当然是全面的，但它并不能真正回答你的问题。另一个答案也是完全错误的。

> 我的问题：如果不参考模拟语义，如何定义 Verilog 综合的正确性？

你是对的，当然。只有在（a）结果（输出）以与原始（输入）相同的方式进行模拟，在可能对时序/等问题做出一些考虑之后，和/或（b）合成器输出可以正式的情况下，合成才是“正确的”证明等效于合成器输入。

> 给出最简单的 Verilog 程序，该程序具有明确定义的综合语义，但没有明确定义的模拟语义

原则上，这是不可能的。合成器供应商试图定义基于具有良好定义的模拟语义的代码的模板。然而，Verilog 曾经（并且现在）定义不明确，并且 NBA 最初并不存在于该语言中，因此您会遇到像管道示例这样的怪异之处。最好忘记他们。

> 事实上，有人可以给我一段在模拟和合成时定义良好的 Verilog，但两者会产生不同的结果吗？

综合中“定义明确”（与“正确”相反）的唯一定义是多个供应商将产生完全相同的错误结果。这不太可能。我猜经典的异步重置*和*异步设置时钟 F/F 会很接近。

# postgresql - 基于计数限制插入的通用触发器

> ID：11199125
> 
> 赞同：4
> 
> 时间：2012-06-26T00:07:39.803
> 
> 标签：postgresql, triggers, insert, many-to-many, plpgsql

## 背景

在 PostgreSQL 9.0 数据库中，有各种具有多对多关系的表。必须限制这些关系的数量。几个示例表包括：

```
CREATE TABLE authentication (
  id bigserial NOT NULL, -- Primary key
  cookie character varying(64) NOT NULL, -- Authenticates the user with a cookie
  ip_address character varying(40) NOT NULL -- Device IP address (IPv6-friendly)
)

CREATE TABLE tag_comment (
  id bigserial NOT NULL, -- Primary key
  comment_id bigint, -- Foreign key to the comment table
  tag_name_id bigint -- Foreign key to the tag name table
) 
```

然而，不同的关系有不同的限制。例如，在`authentication`表中，一个给定的值`ip_address`是允许的 1024个`cookie`；而在`tag_comment`表中，每个`comment_id`可以有 10 个关联`tag_name_id`的 s。

## 问题

目前，许多函数都对这些限制进行了硬编码；分散整个数据库的限制，并防止它们被动态更改。

## 问题

您将如何以通用方式对表施加最大多对多关系限制？

### 主意

创建一个表来跟踪限制：

```
CREATE TABLE imposed_maximums (
  id serial NOT NULL,
  table_name  character varying(128) NOT NULL,
  column_group character varying(128) NOT NULL,
  column_count character varying(128) NOT NULL,
  max_size INTEGER
) 
```

建立限制：

```
INSERT INTO imposed_maximums
  (table_name, column_group, column_count, max_size) VALUES
  ('authentication', 'ip_address', 'cookie', 1024);
INSERT INTO imposed_maximums
  (table_name, column_group, column_count, max_size) VALUES
  ('tag_comment', 'comment_id', 'tag_id', 10); 
```

创建触发函数：

```
CREATE OR REPLACE FUNCTION impose_maximum()
  RETURNS trigger AS
$BODY$
BEGIN
  -- Join this up with imposed_maximums somehow?
  select
    count(1)
  from
    -- the table name
  where
    -- the group column = NEW value to INSERT;

  RETURN NEW;
END; 
```

将触发器附加到每个表：

```
CREATE TRIGGER trigger_authentication_impose_maximum
  BEFORE INSERT
  ON authentication
  FOR EACH ROW
  EXECUTE PROCEDURE impose_maximum(); 
```

显然它不会像书面那样工作......有没有办法让它工作，或者以其他方式强制执行限制，例如：

*   在一个位置；和
*   没有硬编码？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:39:09.573

我一直在做类似类型的通用触发器。最棘手的部分是`NEW`根据列名获取记录中的值条目。

我正在按照以下方式进行操作：

*   将`NEW`数据转换为数组；
*   找到`attnum`列的 并将其用作数组的索引。

*只要数据中没有逗号，*这种方法就有效:(我不知道如何将变量`NEW`或`OLD`变量转换为值数组的其他方法。

以下功能可能会有所帮助：

```
CREATE OR REPLACE FUNCTION impose_maximum() RETURNS trigger AS $impose_maximum$
DECLARE
  _sql  text;
  _cnt  int8;
  _vals text[];
  _anum int4;
  _im   record;

BEGIN
 _vals := string_to_array(translate(trim(NEW::text), '()', ''), ',');

 FOR _im IN SELECT * FROM imposed_maximums WHERE table_name = TG_TABLE_NAME LOOP
  SELECT attnum INTO _anum FROM pg_catalog.pg_attribute a
    JOIN pg_catalog.pg_class t ON t.oid = a.attrelid
   WHERE t.relkind = 'r' AND t.relname = TG_TABLE_NAME
     AND NOT a.attisdropped AND a.attname = _im.column_group;

  _sql := 'SELECT count('||quote_ident(_im.column_count)||')'||
          ' FROM '||quote_ident(_im.table_name)||
          ' WHERE '||quote_ident(_im.column_group)||' = $1';

  EXECUTE _sql INTO _cnt USING _vals[_anum];

  IF _cnt > CAST(_im.max_size AS int8) THEN
    RAISE EXCEPTION 'Maximum of % hit for column % in table %(%=%)',
      _im.max_size, _im.column_count,
      _im.table_name, _im.column_group, _vals[_anum];
  END IF;
 END LOOP;

 RETURN NEW;
END; $impose_maximum$ LANGUAGE plpgsql; 
```

此函数将检查为给定表定义的所有条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:26:48.147

是的，有办法让它工作。

在我个人看来，你的想法是要走的路。它只需要一层“元”。所以，表`imposed_restrictions`应该有触发器，它是（被）触发的`after insert`，`update`并且`delete`。然后代码应该依次创建、修改或删除触发器和函数。

看一下[`execute`PL/pgSQL 的语句](http://www.postgresql.org/docs/9.0/interactive/sql-execute.html)，它本质上允许你执行*任何*字符串。不用说，这个字符串可能包含触发器、函数等的定义。显然，您可以访问`OLD`和`NEW`在触发器中，因此您可以在字符串中填写占位符，您就完成了。

我相信你应该能够通过这个答案完成你想要的。请注意，这是我个人对该主题的看法，它可能不是最佳解决方案——我希望看到一种不同的，也许也更有效的方法。

**编辑**- 以下是我的一个**旧**项目的示例。它位于被触发的函数内部`before update`（尽管现在我想起来了，也许它应该被调用`after`；）是的，**代码很乱**，因为它没有使用好的`$escape$`语法。那时我真的非常非常年轻。尽管如此，剪辑表明可以实现您想要的。

```
query:=''CREATE FUNCTION '' || NEW.function_name || ''('';
IF NEW.parameter=''t'' THEN
  query:=query || ''integer'';
END IF;
query:=query || '') RETURNS setof '' || type_name || '' AS'' || chr(39);
query:=query || '' DECLARE list '' || type_name || ''; '';
query:=query || ''BEGIN '';
query:=query || '' FOR list IN EXECUTE '' || chr(39) || chr(39);
query:=query || temp_s || '' FROM '' || NEW.table_name;
IF NEW.parameter=''t'' THEN
  query:=query || '' WHERE id='' || chr(39) || chr(39) || ''||'' ||  chr(36) || ''1'';
ELSE
  query:=query || '';'' || chr(39) || chr(39);
END IF;
query:=query || '' LOOP  RETURN NEXT list; '';
query:=query || ''END LOOP; RETURN; END; '' || chr(39);
query:=query || ''LANGUAGE '' || chr(39) || ''plpgsql'' || chr(39) || '';'';
EXECUTE query; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:13:59.460

这些函数+触发器可以用作模板。如果您将它们与@Sorrow 的动态生成函数+触发器的技术结合起来，这可以解决 OP 的问题。请注意，我不是重新计算每个受影响行的计数（通过调用 COUNT() 聚合函数），而是维护一个“增量”计数。这应该更便宜。

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path='tmp';

CREATE TABLE authentication
  ( id bigserial NOT NULL -- Primary key
  , cookie varchar(64) NOT NULL -- Authenticates the user with a cookie
  , ip_address varchar(40) NOT NULL -- Device IP address (IPv6-friendly)
  , PRIMARY KEY (ip_address, cookie)
);

CREATE TABLE authentication_ip_count (
    ip_address character varying(40) NOT NULL
      PRIMARY KEY -- REFERENCES authentication(ip_address)
    , refcnt INTEGER NOT NULL DEFAULT 0
    --
    -- This is much easyer:
    --  keep the max value inside the table
    --        + use a table constraint
    -- , maxcnt INTEGER NOT NULL DEFAULT 2 -- actually 100
    -- , CONSTRAINT no_more_cookies CHECK (refcnt <= maxcnt)
        );

CREATE TABLE imposed_maxima
  ( id serial NOT NULL
  , table_name  varchar NOT NULL
  , column_group varchar NOT NULL
  , column_count varchar NOT NULL
  , max_size INTEGER NOT NULL
  , PRIMARY KEY (table_name,column_group,column_count)
);
INSERT INTO imposed_maxima(table_name,column_group,column_count,max_size)
              VALUES('authentication','ip_address','cookie', 2);

CREATE OR REPLACE FUNCTION authentication_impose_maximum()
  RETURNS trigger AS
$BODY$
DECLARE
        dummy INTEGER;
BEGIN
  IF (TG_OP = 'INSERT') THEN
        INSERT INTO authentication_ip_count (ip_address)
        SELECT sq.*
        FROM ( SELECT NEW.ip_address) sq
        WHERE NOT EXISTS (
                SELECT *
                FROM authentication_ip_count nx
                WHERE nx.ip_address = sq.ip_address
                );

        UPDATE authentication_ip_count
        SET refcnt = refcnt + 1
        WHERE ip_address = NEW.ip_address
                ;
        SELECT COUNT(*) into dummy -- ac.refcnt, mx.max_size
        FROM authentication_ip_count ac
        JOIN imposed_maxima mx ON (1=1) -- outer join
        WHERE ac.ip_address =  NEW.ip_address
        AND mx.table_name  = 'authentication'
        AND mx.column_group = 'ip_address'
        AND mx.column_count = 'cookie'
        AND ac.refcnt > mx.max_size
                ;
        IF FOUND AND dummy > 0 THEN
                RAISE EXCEPTION 'Cookie moster detected';
        END IF;

  ELSIF (TG_OP = 'DELETE') THEN

        UPDATE authentication_ip_count
        SET refcnt = refcnt - 1
        WHERE ip_address = OLD.ip_address
                ;
        DELETE FROM authentication_ip_count ac
        WHERE ac.ip_address = OLD.ip_address
        AND ac.refcnt <= 0
                ;
  -- ELSIF (TG_OP = 'UPDATE') THEN
  -- (Only needed if we allow updates of ip-address)
  -- otherwise the count stays the same.

  END IF;

  RETURN NEW;

END;

$BODY$
  LANGUAGE plpgsql;

CREATE TRIGGER trigger_authentication_impose_maximum
  BEFORE INSERT OR UPDATE OR DELETE
  ON authentication
  FOR EACH ROW
  EXECUTE PROCEDURE authentication_impose_maximum();

        -- Test it ...
INSERT INTO authentication(ip_address, cookie) VALUES ('1.2.3.4', 'Some koekje' );
INSERT INTO authentication(ip_address, cookie) VALUES ('1.2.3.4', 'kaakje' );
INSERT INTO authentication(ip_address, cookie) VALUES ('1.2.3.4', 'Yet another cookie' ); 
```

结果：

```
INSERT 0 1
CREATE FUNCTION
CREATE TRIGGER
INSERT 0 1
INSERT 0 1
ERROR:  Cookie moster detected 
```

# java - Java 正则表达式，匹配数学表达式中的变量

> ID：11199126
> 
> 赞同：3
> 
> 时间：2012-06-26T00:07:57.430
> 
> 标签：java, regex, pattern-matching

我有一个字符串输入，它代表一个公式，例如：

```
BMI = ( Weight / ( Height  * Height ) ) * 703 
```

我希望能够将所有合法变量提取到`String[]`

合法变量的确定规则与 Java 变量命名约定几乎相同，但只允许使用字母数字字符：

*   任何大写或小写字母字符都可以后跟一个数字
*   任何单词/文本
*   任何单词/文本后跟一个数字

因此，我希望输出如下所示：

```
BMI
Weight
Height 
```

**这是我目前的尝试：**

```
/* helper method , find all variables in expression,
 * Variables are defined a alphabetical characters a to z, or any word , variables cannot have numbers at the beginning
 * using regex pattern "[A-Za-z0-9\\s]"
 */
public static List<String> variablesArray (String expression)
{
    List<String> varList = null; 
    StringBuilder sb = null; 
    if (expression!=null)
    {
        sb = new StringBuilder(); 

        //list that will contain encountered words,numbers, and white space
        varList = new ArrayList<String>();

        Pattern p = Pattern.compile("[A-Za-z0-9\\s]");
        Matcher m = p.matcher(expression);

        //while matches are found 
        while (m.find())
        {
            //add words/variables found in the expression 
            sb.append(m.group());
        }//end while 

        //split the expression based on white space 
        String [] splitExpression = sb.toString().split("\\s");
        for (int i=0; i<splitExpression.length; i++)
        {
            varList.add(splitExpression[i]);
        }
    }
    return varList; 
} 
```

结果并不如我所料。我得到了额外的空行，两次得到“高度”，不应该得到一个数字：

```
BMI

Weight

Height

Height

703 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T02:13:00.833

我不确定您为什么要创建一个字符串并将其拆分以转换为数组。除了效率低下之外，除非每个 ID 出现后面都有空格，否则该方法将不起作用。

这是一个更简单的代码，允许在输出中重复。要摆脱重复，只需将`List`and`ArrayList`替换为`Set`and `HashSet`：

```
public class Test {

    public static List<String> variablesArray(String expression) {
        if (expression != null) {
            ArrayList<String> vars = new ArrayList<String>();
            Pattern p = Pattern.compile("[a-z][a-z0-9]*", Pattern.CASE_INSENSITIVE);
            Matcher m = p.matcher(expression);
            while (m.find()) {
                vars.add(m.group());
            }
            return vars;
        }
        return null;
    }

    public static void main(String[] args) {
        List<String> vars = variablesArray("BMI=(Weight/(Height*Height)) * 70");
        for (String var : vars) {
            System.out.println(var);
        }
    }
} 
```

如果您实际上想要 a`String []`作为返回值而不是`ArrayList<String>`，则在返回时进行转换。

```
return vars.toArray(new String [vars.size()]); 
```

最后，我想知道您要完成什么。在表达式中包含标识符列表似乎不是很有用。例如，如果您尝试评估表达式，则此 id 列表将不是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:22:03.170

使用：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

class Main
{
  public static void main (String[] args) throws java.lang.Exception
  {
     String formula = "BMI = ( Weight / ( Height * Height ) ) * 703";
     String pattern = "(?:^|(?<=[=+\\-*/()]))\\s*([a-z]+)\\s*(?:$|(?=[=+\\-*/()]))";
     Pattern p = Pattern.compile(pattern, Pattern.CASE_INSENSITIVE);
     Matcher m = p.matcher(formula);
     while(m.find()) {
       System.out.println(m.group(1));
     }
  }
} 
```

你会得到：

```
BMI
Weight
Height
Height 
```

因此，之后您需要做的就是[删除重复项](https://stackoverflow.com/questions/5741038/java-arraylist-remove-duplicates)，这是一项简单的任务。

* * *

[在此处](http://ideone.com/CWj1P)查看并测试代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T00:56:34.913

这个简单的正则表达式应该为您匹配所有变量：

```
"[A-Za-z_][A-Za-z0-9_]*" 
```

我冒昧地将其包含`_`在名称中，但如果您真的不想要，可以将其删除：

```
"[A-Za-z][A-Za-z0-9]*" 
```

不可能唯一地匹配变量，但您可以插入匹配`Set`项以删除重复的条目。

# javascript - 检查 DOM 节点是否在 Iframe 内

> ID：11199127
> 
> 赞同：1
> 
> 时间：2012-06-26T00:08:05.650
> 
> 标签：javascript, dom

我想检查 DOM 节点是否在我的应用程序的 iFrame 内。无论如何要找到节点所在的窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T00:11:13.847

```
if (node.ownerDocument.defaultView.frameElement)        
    // We're inside of an <iframe> 
```

代码解释：

```
node.ownerDocument.defaultView.frameElement
//   ^------------------------------------------ The document of the <iframe>.
//                 ^ --------------------------- The window of the <iframe>
//                             ^---------------- The <iframe> 
```

# css - 有人可以帮我限制 CSS 类的高度并添加滚动条吗？

> ID：11199133
> 
> 赞同：2
> 
> 时间：2012-06-26T00:08:34.173
> 
> 标签：css, html-table, scrollbar, overflow

我知道听起来很容易。我告诉客户它会在 5 分钟内完成...... 4 小时后它变得越来越烦人......

这是当前的结构：

```
<div class="RadWindow">
    <table class="rwTable">
        <tr class="rwContentRow">
            <td class="helpDialog"> Content to be cut off and wrapped</td>
        </tr>
    </table>
</div> 
```

div 中实际上还有一些样式等，但这些是我应该能够控制它的方式。我尝试在 .helpDialog 类上设置高度、最大高度和溢出，但没有任何反应。

然后我在`<td>`：

```
td.helpDialog 
```

然后我尝试以详细的方式规定整个路径：

```
.RadWindow table td.helpDialog 
```

它只是不适合我。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T00:28:19.147

使用额外的 div 容器来控制布局。

html:

```
<div class="RadWindow">
    <table class="rwTable">
        <tr class="rwContentRow">
            <td><div class="helpDialog">Content to be cut off and wrapped</div></td>
        </tr>
    </table>
</div> 
```

CSS：

```
.helpDialog{
    height: 50px;
    width: 50px;
    overflow: hidden;
} 
```

顺便说一句，不要过度限定 css 选择器。这将减慢您的页面渲染速度，特别是在大型 dom 树和/或动态站点上。

# php - PHP在imagedestroy后不响应

> ID：11199134
> 
> 赞同：0
> 
> 时间：2012-06-26T00:08:42.360
> 
> 标签：php

在开发过程中，我遇到了一个问题。调用 imagedestroy 后，我的脚本不会执行一些 PHP 或 HTML。

当我删除标头时，它会在 imagedestroy 之后执行 PHP / HTML，但我的脚本中需要该标头。所以我的问题是；PHP 标头如何影响 PHP 脚本。

```
<?php

header('Content-Type: image/png;'); 

$im = @imagecreatefrompng('ticket.png') or die("Cannot select the correct image. Please contact the webmaster."); 
$text_color = imagecolorallocate($im, 0,0,0); 

/*
$name = $_GET['name'];
$from = $_GET['from'];
$to = $_GET['to'];
$time = $_GET['time'];
$date = $_GET['date'];
$agent = $_GET['agent'];
$sno = $_GET['sno'];
$flightno = $_GET['flightno'];
$boardingtime = $_GET['boardingtime'];
$gate = $_GET['gate'];
$seat = $_GET['seat'];
*/

$name = $_POST['name'];
$from = $_POST['from'];
$to = $_POST['to'];
$time = $_POST['time'];
$date = $_POST['date'];
$agent = $_POST['agent'];
$sno = rand(101, 199);
$flightno = $_POST['flightno'];
$boardingtime = $_POST['boardingtime'];
$gate = $_POST['gate'];
$seat = $_POST['seat'];

$text_name = "$name"; 
$text_from = "$from";
$text_to = "$to";
$text_time = "$time";
$text_date = "$date";
$text_agent = "$agent";
$text_sno = "$sno";
$text_flightno = "$flightno";
$text_boardingtime = "$boardingtime";
$text_gate = "$gate";
$text_seat = "$seat";

$font = 'font.ttf';

#Basis in het midden.
imagettftext($im, 12, 0, 119, 168, $text_color, $font, $text_name);
imagettftext($im, 12, 0, 119, 184, $text_color, $font, $text_from);
imagettftext($im, 12, 0, 100, 201, $text_color, $font, $text_to);
imagettftext($im, 12, 0, 185, 235, $text_color, $font, $text_time);
imagettftext($im, 12, 0, 498, 167, $text_color, $font, $text_date);
imagettftext($im, 12, 0, 509, 184, $text_color, $font, $text_agent);
imagettftext($im, 21, 0, 544, 260, $text_color, $font, $text_sno);

#Top
imagettftext($im, 14, 0, 97, 85, $text_color, $font, $text_flightno);
imagettftext($im, 14, 0, 289, 85, $text_color, $font, $text_boardingtime);
imagettftext($im, 14, 0, 398, 85, $text_color, $font, $text_gate);
imagettftext($im, 14, 0, 486, 85, $text_color, $font, $text_seat);

$rand = rand(0, 3498);
imagepng($im);
imagepng($im, 'images/' . $rand . '.png'); 
imagedestroy($im);

echo 'This does not display';

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:27:31.757

我有一种感觉，问题在于浏览器不知道如何处理它接收的数据。根据文档，如果您不提供路径，`imagepng()`则会将数据输出到浏览器。如果您没有指定正确的标题，它应该输出为文本。如果有，它应该输出为图像。如果您提供告诉浏览器将其视为图像的标题，则图像解析器可能会丢弃附加到图像数据末尾的额外字符“这不显示”。

尝试摆脱`imagepng($im)`并观看它保存图像然后输出“这不显示”。

[http://us2.php.net/imagepng](http://us2.php.net/imagepng)

# visual-studio-2010 - 在VS2010的MSTest测试中，有没有办法一边调试一边在输出窗口看到标准输出？

> ID：11199137
> 
> 赞同：2
> 
> 时间：2012-06-26T00:09:25.047
> 
> 标签：visual-studio-2010, mstest

有时，当我在编写单元测试时，我想在单步执行代码时调试测试并查看标准输出（控制台输出？）。就我而言，我的 ORM 正在生成 sql 查询并将它们显示在标准输出中，我想知道它生成了什么。

我想我看不到输出，因为它被定向到测试结果窗口。无论如何，如果我能在调试时在输出窗口中看到它，我会更喜欢它，而不是等待测试结束才能看到所有输出。

有谁知道如何解决这个问题？

# javascript - 如何限制可拖动 SVG 形状的范围？

> ID：11199138
> 
> 赞同：1
> 
> 时间：2012-06-26T00:10:12.860
> 
> 标签：javascript, svg, draggable

我有一个我一直在研究的 SVG 滑块……请[**在此处的 jsFiddle 上查看它**](http://jsfiddle.net/mOrloff/ucnyz/3/)。
我想限制我的滑块的范围。

我的 JS 一开始是在[**这个选择器**](http://phrogz.net/svg/complex-plane-picker.xhtml)上找到的（感谢@Phrogz），然后我戳了戳它，直到我能够将它剥离到当前状态。
滑块工作得很好，但我真的可以使用一些指导来添加限制。

例如，我希望将**slider_1**（左侧的滑块）限制在蓝色矩形前面的区域。
JS 对我来说仍然很不自然，所以我很感激任何和所有的反馈。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:15:57.150

尝试将这样的东西扔到你的`move`函数中：

```
var limitLower = 0;
var limitUpper = 20;
if ( x < limitLower || x > limitUpper ) {
    return;
} 
```

这是为slider1插入的上述代码的小提琴：http: [//jsfiddle.net/ucnyz/4/](http://jsfiddle.net/ucnyz/4/)

# ios - 来自相机或照片库 MFmessage/MailcomposeViewController 的图像附件

> ID：11199140
> 
> 赞同：0
> 
> 时间：2012-06-26T00:10:20.033
> 
> 标签：ios, mfmailcomposeviewcontroller, mfmessagecomposeview

我想知道我是否可以将图像附加到我的 SMSComposerSheet（就像 iPhone 中的消息应用程序一样）。我已经实现了图像拾取（来自库和相机）所以我可能需要在 displaySMSComposerSheet 方法中添加一些东西来允许它。

另一件事，我想对发送邮件做同样的事情，但我认为我做不到，所以我正在考虑将图像保存到应用程序的沙箱中，然后将其附加到邮件中。但我不知道该怎么做：s

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:29:35.273

要尝试使用此[https://agilewarrior.wordpress.com/2012/02/08/how-to-attach-an-image-from-your-photo-gallery-and-send-it-as-an-image-手机/](https://agilewarrior.wordpress.com/2012/02/08/how-to-attach-an-image-from-your-photo-gallery-and-send-it-as-an-image-on-iphone/)

# html - 从 HTML5 或 Cordova 启动手机

> ID：11199143
> 
> 赞同：0
> 
> 时间：2012-06-26T00:11:02.627
> 
> 标签：html, cordova

有谁知道是否可以使用 HTML5 或 Cordova (PhoneGap) 来启动电话号码？我想要一个标有“呼叫 555-555-5555”的按钮，当按下时，它会使用该号码启动设备的电话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T04:22:48.187

像这样使用 html 电话方案：

```
<a href="tel:555-555-5555">Call 555-555-5555</a> 
```

有关更多详细信息，请查看此[点击通话链接](http://www.mobilexweb.com/blog/click-to-call-links-mobile-browsers)

# facebook - 如何检测来自用户的 Facebook oauth 窗口关闭操作

> ID：11199152
> 
> 赞同：2
> 
> 时间：2012-06-26T00:12:17.677
> 
> 标签：facebook, oauth

我试图弄清楚当用户在 oauth 流程期间关闭或单击 Facebook 权限窗口上的取消按钮时，是否有任何方法可以通知父页面。它是用户授权应用程序的窗口。带有 url 的窗口：[https](https://www.facebook.com/dialog/oauth?api_key=) ://www.facebook.com/dialog/oauth?api_key= ..... 并带有“使用 Facebook 登录”和“取消”按钮。我想要完成的是——如果用户取消或关闭 oauth 权限窗口，我想打开 Facebook 简单共享窗口，他们可以在不授权应用程序的情况下发布状态。

我正在为 Facebook 连接使用 JS SDK。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:48:30.430

此代码取自[FB.login 方法的文档](http://developers.facebook.com/docs/reference/javascript/FB.login/)：

```
FB.login(function(response) {
   if (response.authResponse) {
     console.log('Welcome!  Fetching your information.... ');
     FB.api('/me', function(response) {
       console.log('Good to see you, ' + response.name + '.');
     });
   } else {
     console.log('User cancelled login or did not fully authorize.');
   }
 }); 
```

如您所见，该`if (response.authResponse)`部分检查登录过程是否成功完成，即用户允许该应用程序并且他已登录到 facebook。

如果用户单击“取消”或关闭弹出窗口，则响应中将没有`authResponse`参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T07:37:17.567

当用户取消授权时观察 url oauth url 更改，它现在将包含描述用户操作的字段数

```
YOUR_REDIRECT_URI?
    error_reason=user_denied
   &error=access_denied
   &error_description=The+user+denied+your+request.
   &state=YOUR_STATE_VALUE 
```

这将是用户取消身份验证后的值

```
error_reason=user_denied
&error=access_denied
&error_description=The user denied your request 
```

用户取消后，身份验证对话框页面将被重定向到父页面，您可以在其中检查这些错误参数。

# amazon-web-services - AWS 和 Railo 设置

> ID：11199153
> 
> 赞同：3
> 
> 时间：2012-06-26T00:12:18.393
> 
> 标签：amazon-web-services, amazon-s3, amazon-ec2, railo, cfml

我想知道是否有人能指出我在AWS上安装[Railo](http://getrailo.org)的正确方向。

在业余时间，我建立了一个销售插图的网站，但由于成本原因，我无法继续花钱将其托管在专用的 CF 服务器上，营销预算几乎为零。我一直在玩弄在亚马逊上建立一个帐户并安装 Railo 的想法。

在过去的几个月里，我有不同的建议，例如获得一个 S3 帐户来托管图像和一个 EC2 帐户用于 Railo 的网站和带有 SSL 的数据库，或者只是拥有一个 S3 帐户，我将能够托管 Railo 和将我的图像放在同一台服务器上。我不确定什么是最好的，我想知道您是否可以建议您认为一个好的解决方案是什么。

我已经阅读了一些关于设置的详细信息的博客，但它们似乎已经超过一年了，所以我不确定它们是否是有效的解决方案。这让我非常头疼，因为我是一名开发人员，但我非常渴望学习新事物，尤其是有关云服务的知识，因为在为公司工作时，这不是一个常见的领域。过去，我曾经标记很长的服务器机房并了解基础设施，但现在一切都是远程完成的，参与起来并不容易。

非常感谢您从我应该遵循的经验中获得的任何基本建议/高级建议，如果您知道任何好的资源，我们将不胜感激。

我应该获得 S3 和 EC2 AWS 设置还是其中一个会这样做（需要数据库连接）？

负载平衡两个难以配置的 EC2 实例，我需要 Web 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T00:36:26.720

几周前我刚刚发布了这个主题。应该仍然是最新的：http: [//blog.nictunney.com/2012/03/railo-tomcat-and-apache-on-amazon-ec2.html](http://blog.nictunney.com/2012/03/railo-tomcat-and-apache-on-amazon-ec2.html)

高温高压

# java - 在 Java/Swing 中，ButtonModel 的 isRollover() 和 isArmed() 方法有什么区别？

> ID：11199160
> 
> 赞同：1
> 
> 时间：2012-06-26T00:12:55.747
> 
> 标签：java, swing

在 Java/Swing API 的[ButtonModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/ButtonModel.html)接口中，Rollover 和 Armed 属性有什么区别？阅读代码和文档，看起来它们都是由同一个事件（鼠标进入或退出组件）更新的，但是武装值会影响释放鼠标按钮是否会导致 ActionEvent 被触发，而 Rollover 属性只是视觉上的。是否存在任何情况下 ButtonModel 会被武装但不会翻转，反之亦然？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:39:39.293

如果我正确理解文档，则翻转状态表明用户在按钮上方并按下了鼠标按钮。所以通常你会同时按下和武装。

每当用户将鼠标移到按钮上时都会触发翻转，例如 css 中的 :hover。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:18:51.493

Rollover 表示光标在其上方，但armed 表示已单击但未释放或将其拖动到边界之外。细微的差别，但它就在那里。

# xml - 如何从 XML::Simple 访问嵌套数据结构中的数据？

> ID：11199164
> 
> 赞同：3
> 
> 时间：2012-06-26T00:13:52.097
> 
> 标签：xml, perl, data-structures, reference, xml-simple

我必须编写一个 Perl 脚本来将 XML 文件转换为 CSV 文件。我已经在一个上下文中编写了一些简单的东西，并且需要针对不同的数据集对其进行增强，并且不知道该怎么做。

我正在使用[XML::Simple](http://p3rl.org/XML%3a%3aSimple)。

这是数据的一条记录：

```
<custom-objects xmlns="http://www.demandware.com/xml/impex/customobject/2006-10-31">
    <custom-object type-id="emailBackInStockHistory" object-id="bczCAiaag0APcaaacLsvpJRmzW">
        <object-attribute attribute-id="email">some@email.com</object-attribute>
        <object-attribute attribute-id="emailSentAt">2010-04-10T09:00:01.000+0000</object-attribute>
        <object-attribute attribute-id="productID">someprodid</object-attribute>
        <object-attribute attribute-id="requestedAt">2010-04-09T10:07:54.000+0000</object-attribute>
        <object-attribute attribute-id="siteID">someSITEid</object-attribute>
    </custom-object>
</custom-objects> 
```

使用[Data::Dumper](http://p3rl.org/Data%3a%3aDumper)模块，我看到数据被解析为：

```
'custom-object' => [
    {
        'type-id'          => 'emailBackInStockHistory',
        'object-id'        => 'bczCAiaag0APcaaacLsvpJRmzW',
        'object-attribute' => [
            {
                'attribute-id' => 'email',
                'content'      => 'some@email.com'
            },
            {
                'attribute-id' => 'emailSentAt',
                'content'      => '2010-04-10T09:00:01.000+0000'
            },
            {
                'attribute-id' => 'productID',
                'content'      => 'someprodid'
            },
            {
                'attribute-id' => 'requestedAt',
                'content'      => '2010-04-09T10:07:54.000+0000'
            },
            {
                'attribute-id' => 'siteID',
                'content'      => 'someSITEid'
            }
        ]
    }, 
```

这是我尝试用来执行此导出的一些代码：

```
foreach $o (@{$data->{'custom-object'}}) {
    print $o->{'type-id'},   ",";
    print $o->{'object-id'}, ",";
    print $o->{'custom-object'}->{'object-attribute'}->{'email'}, ",";
    print "\n"; 
```

`type-id`and属性可以正确输出，`object-id`但我不知道如何从`object-attribute`引用中打印数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T00:52:28.413

`object-attribute`您需要像使用数组引用一样迭代您的`custom-object`数组引用。另请查看[Text::CSV](http://search.cpan.org/perldoc/Text%3a%3aCSV)以获得更强大的创建 csv 文件的方法。

```
foreach my $obj ( @{ $data->{'custom-object'} } ) {
    print $obj->{'type-id'}, ",";
    print $obj->{'object-id'}, ",";
    foreach my $attr ( @{ $obj->{'object-attribute'} } ) {
        if ( $attr->{'attribute-id'} eq 'email' ) {
            print $attr->{'content'}, ",";
        }
    }
    print "\n";
} 
```

# oracle - Oracle 程序无法编译；给出“遇到符号；预期时...”错误

> ID：11199166
> 
> 赞同：-1
> 
> 时间：2012-06-26T00:13:59.940
> 
> 标签：oracle, procedure

```
create or replace PROCEDURE ResumenActividadDiaria(Fecha DATE) AS
  CURSOR cur_trans IS
  SELECT t.idslot, t.tipotransaccion, t.transacciongeneral, t.valortransaccion,
         s.fila, s.columna
    FROM  transaccion t, slot s
    WHERE t.idslot = s.idslot AND
          t.transacciongeneral in (1,3) AND
          t.fechacreacion = Fecha
    ORDER BY s.fila, s.columna, t.tipotransaccion, t.transacciongeneral;            

  rs_trans cur_trans%ROWTYPE;       

  vlIdSlot NUMBER(10);
  vlTipoTransaccion NUMBER(1);
  vlTransaccionGeneral NUMBER(1);
  vlValorTransaccion NUMBER(10);
  vlFila NUMBER(2);
  vlColumna NUMBER(2);     
BEGIN
  dbms_output.put_line('Fecha ' );
  dbms_output.put_line('                          ------------------------------------------------------');
  OPEN cur_trans;

  FETCH cur_trans INTO rs_trans;
  WHILE cur_trans%found 
  LOOP
    FETCH cur_trans INTO rs_trans;
    dbms_output.put_line('Id         :' || rs_trans.vlIdSlot);
    dbms_output.put_line('Fila       :' || rs_trans.vlFila);
    dbms_output.put_line('Columna    :' || rs_trans.vlColumna);

    IF vlTransaccionGeneral = 1 THEN                
      IF vlTipoTransaccion = 1 THEN
        dbms_output.put_line('Billetes I :' || rs_trans.vlValorTransaccion);
      END IF;

      IF vlTipoTransaccion = 2 THEN
        dbms_output.put_line('Monedas  I :' || rs_trans.vlValorTransaccion);
      END IF;

      IF vlTipoTransaccion = 3 THEN
        dbms_output.put_line('Premios  I :' || rs_trans.vlValorTransaccion);
      END IF;

      IF vlTipoTransaccion = 4 THEN
        dbms_output.put_line('Creditos I :' || rs_trans.vlValorTransaccion);
      END IF;
    END IF;

    IF vlTransaccionGeneral = 3 THEN                
      IF vlTipoTransaccion = 1 THEN
        dbms_output.put_line('Billetes F :' || rs_trans.vlValorTransaccion);
      END IF;

      IF vlTipoTransaccion = 2 THEN
        dbms_output.put_line('Monedas  F :' || rs_trans.vlValorTransaccion);
      END IF;

      IF vlTipoTransaccion = 3 THEN
        dbms_output.put_line('Premios  F :' || rs_trans.vlValorTransaccion);
      END IF;

      IF vlTipoTransaccion = 4 THEN
        dbms_output.put_line('Creditos F :' || rs_trans.vlValorTransaccion);
      END IF;
    END IF; 
  END LOOP;

  CLOSE cur_trans;  
END; 
```

在编译上述函数时，我收到以下错误：

```
Error(58,4): PLS-00103: Encountered the symbol ";" when expecting one of the following:     loop 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:31:41.233

```
LOOP
    FETCH cur_trans INTO rs_trans;
    dbms_output.put_line('Id         :' || rs_trans.vlIdSlot);
    dbms_output.put_line('Fila       :' || rs_trans.vlFila);
    dbms_output.put_line('Columna    :' || rs_trans.vlColumna);
    IF vlTransaccionGeneral = 1 THEN                
        IF vlTipoTransaccion = 1 THEN
            dbms_output.put_line('Billetes I :' || rs_trans.vlValorTransaccion);
        ELSIF vlTipoTransaccion = 2 THEN
            dbms_output.put_line('Monedas  I :' || rs_trans.vlValorTransaccion);
        ELSIF vlTipoTransaccion = 3 THEN
            dbms_output.put_line('Premios  I :' || rs_trans.vlValorTransaccion);
        ELSIF vlTipoTransaccion = 4 THEN
            dbms_output.put_line('Creditos I :' || rs_trans.vlValorTransaccion);
        END IF;
    ELSIF vlTransaccionGeneral = 3 THEN                
        IF vlTipoTransaccion = 1 THEN
            dbms_output.put_line('Billetes F :' || rs_trans.vlValorTransaccion);
        ELSIF vlTipoTransaccion = 2 THEN
            dbms_output.put_line('Monedas  F :' || rs_trans.vlValorTransaccion);
        ELSIF vlTipoTransaccion = 3 THEN
            dbms_output.put_line('Premios  F :' || rs_trans.vlValorTransaccion);
        ELSIF vlTipoTransaccion = 4 THEN
            dbms_output.put_line('Creditos F :' || rs_trans.vlValorTransaccion);
        END IF; 
    END IF;
END LOOP; 
```

使用`ELSIF`而不是重复`IF`使用。它使代码可读并且生活更轻松。PS：未测试。

# c# - WCF - 返回带有流数据的对象

> ID：11199167
> 
> 赞同：4
> 
> 时间：2012-06-26T00:14:01.737
> 
> 标签：c#, wcf, stream

是否可以将作为复杂对象一部分的流作为 Wcf 方法的返回数据返回？

我已经检查了大多数关于使用 Wcf 恢复流数据的 msdn 参考资料；比如[这个](http://msdn.microsoft.com/en-us/library/ms731913.aspx)。当方法返回类型为流（或参数为流）时，所有示例似乎都显示了如何返回流。

我想知道的是，如果数据是复杂对象属性的一部分，它可以返回流吗？例如，GetData() 是否可以返回包含如下所示流的数据：

```
[DataContract]
public class Data
{
    [DataMember]
    public string Info { get; set; }

    /// <summary>
    /// This is the file stream that would be returned to client.
    /// </summary>
    [DataMember]
    public Stream File { get; set; }
}

[ServiceContract()]
public interface IService
{           
    [OperationContract]
    Data GetData();
} 
```

从我最初的测试来看，这似乎不起作用。我在客户端出现异常（意外的套接字关闭）。无论 DataContractSerialization 还是 XmlSerialization，结果都是相同的。我已经设置了所需的流媒体模式`TransferMode.Streamed`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T04:39:25.320

您可以使用消息合约，将您的合约设计为

```
[MessageContract]
public class Data 
{ 
    [MessageHeader(MustUnderstand = true)]
    public string Info { get; set; } 

    /// <summary> 
    /// This is the file stream that would be returned to client. 
    /// </summary> 
    [MessageBodyMember(Order = 1)]
    public Stream File { get; set; } 
} 

[ServiceContract()] 
public interface IService 
{            
    [OperationContract] 
    Data GetData(); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T00:39:46.157

您不能这样做，请参阅[此文档](http://msdn.microsoft.com/en-us/library/ms789010)

> 参数和返回值的至少一种类型必须是 Stream、Message 或 IXmlSerializable。

因此，您编写它的方式行不通，`TransferMode.Streamed`但是该链接上没有任何内容明确表示`Stream`不会序列化类型的属性，但根据经验，我不希望它起作用。

相反，您应该返回一个 Stream 并将前 x 个字节定义为您的字符串`Info`字段。

```
 [ServiceContract()]
 public interface IService
 {           
     [OperationContract]
     Stream GetData();
 } 
```

因此，当写入流（服务器端）时，你会做

```
 stream.Write(infoStr);//check size and truncate if appropriate
 stream.Write(fileBytes);//write your file here 
```

然后在另一方面，您需要[正确地](http://www.yoda.arachsys.com/csharp/readbinary.html)从流中读取数据以将数据从流中取出。我建议`int`先将 2 写入流。第一个是 infoStr 字段的大小，第二个是文件的大小。在客户端大小上，您首先读取这些内容，然后您就知道需要读取多少字节。

# php - PHPUnit 路径问题

> ID：11199169
> 
> 赞同：-1
> 
> 时间：2012-06-26T00:14:06.900
> 
> 标签：php, zend-framework, phpunit, include-path

我正在编写 ZF 应用程序。我在库目录中有一些抽象父类。Netbeans 可以毫无问题地为子类生成测试框架，我可以毫无问题地运行测试。

后来我决定将抽象父类移出库并移入应用程序目录（以提高可读性）。我相应地更新了我的应用程序代码，它运行没有问题。

但是，现在当我使用 netbeans 为子类生成测试骨架时，它给出了一个致命错误，说它找不到父类。然后我手动构建了一个测试类并从命令行运行它，PHPUnit 给出了同样的错误。

我需要做什么才能使此路径正常工作？在 PHPUnit 引导程序中，我尝试将 Application 目录添加到包含路径，并使用 Zend Autoloader 将 Application 注册为命名空间。我不认为这是推荐的做法，无论如何它都失败了......

我真的很努力解决路径问题，查找文件等问题......

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:20:42.993

好的，所以我可以将类从库移动到核心代码目录，核心代码发现它们没有问题，因为它们符合 ZF 自动制定的标准命名约定。

但其他应用程序（例如 PHPUnit）将无法找到它们。我可以通过设置他们的自动加载相同的 ZF 来解决这个问题。或者，我可以将所需文件与 require_once 合并（这将首先否定自动加载的使用）。

因此，似乎我最好的办法是将共享类放回库中。我原来的 PHPUnit 引导程序将库前缀添加到 ZF 自动加载器，所以我很高兴。

总而言之，我刚刚学到了图书馆的另一个好用处。

[编辑：] 另一种选择...

我的测试类正在提升 Zend 应用程序，它为 PHPUnit 设置了自动加载。这样做的唯一缺点是 PHPUnit（通过我的 netbeans IDE）无法为我创建框架测试。我想我将不得不忍受这一点。

# asp.net-mvc-3 - ApiController 路由不起作用

> ID：11199172
> 
> 赞同：1
> 
> 时间：2012-06-26T00:14:14.060
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing, asp.net-web-api

下面我将插入以下代码：

*   全球.asax
*   数据库控制器 ( **ApiController** )
*   尝试导航到默认 api 路由时收到的错误。

据我了解，我在这里所做的事情是 100% 正确的，事实上我已经验证了代码与我从[Mike Wasson](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)找到的示例一致。**希望你能告诉我如何让这个工作！**

*谢谢大家！*

## 全球.asax

以下是 Global.asax 中存在的代码，该方法`Application_Start()`由模板生成调用。

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { id = RouteParameter.Optional }
    );

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

## 数据库控制器.cs

这是`ApiController`，它继承自`ApiController`Visual Studio 中的模板并由其创建。该`databases`字段`Database[]`在类中声明。

```
public IEnumerable<Database> GetAllDatabases()
{
    return databases;
}

public Database GetDatabaseById(string id)
{
    return databases.Where(d => d.Name == id).FirstOrDefault();
} 
```

## 错误

这是我尝试使用默认的 api 路径访问它时收到的错误（据我所知，无论如何...... HA）。

```
Server Error in '/' Application.
--------------------------------------------------------------------------------

Method not found: 'Void System.Net.Http.Headers.HttpHeaders.AddWithoutValidation(System.String, System.Collections.Generic.IEnumerable`1<System.String>)'. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.MissingMethodException: Method not found: 'Void System.Net.Http.Headers.HttpHeaders.AddWithoutValidation(System.String, System.Collections.Generic.IEnumerable`1<System.String>)'.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[MissingMethodException: Method not found: 'Void System.Net.Http.Headers.HttpHeaders.AddWithoutValidation(System.String, System.Collections.Generic.IEnumerable`1<System.String>)'.]
   System.Web.Http.WebHost.HttpControllerHandler.AddHeaderToHttpRequestMessage(HttpRequestMessage httpRequestMessage, String headerName, String[] headerValues) +0
   System.Web.Http.WebHost.HttpControllerHandler.ConvertRequest(HttpContextBase httpContextBase) +248
   System.Web.Http.WebHost.HttpControllerHandler.BeginProcessRequest(HttpContextBase httpContextBase, AsyncCallback callback, Object state) +79
   System.Web.Http.WebHost.HttpControllerHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +48
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +268
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T00:43:52.397

看来您需要将您的 webapi 版本从 beta 升级到 RC！

# php - 从 php 变量创建 html 代码的更好方法？

> ID：11199174
> 
> 赞同：2
> 
> 时间：2012-06-26T00:14:24.040
> 
> 标签：php, mysql, html

我的网站包含许多产品，每个产品都包含在带有 id 内容块的 div 中。链接、图片、背景、描述和价格都是从一个 mySQL 表中加载的。我最初的计划是将下面的 html 代码保存为字符串并循环遍历 mySQL 表中的行，填充我用 php/mySQL 值创建的字符串。

我想知道我是否以正确的方式进行此操作，还是有更好的方法从 php 变量创建 html 代码？

```
<div id="contentblock" style="background-image:url(images/$BACKGROUND.png);">
    <div id="picture"><a href="$LINK"><img src="$IMAGELINK"/></a></div>
    <div id="description"><p>$DESCRIPTION</p></div>
    <div id="price"><p class=price>$PRICE</p></div>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T00:34:58.850

首先，PHP 是一个模板引擎——根据我的经验，位于 PHP 之上的模板引擎仅适用于最简单的情况，并且很容易被淘汰。

其次，原始代码与任何方法一样好。冒着陈述显而易见的风险以使其更好地将其抽象为函数；

```
function output_block($BACKGROUND, $LINK, $IMAGELINK, $DESCRIPTION, $PRICE)
{
    echo "<div id='contentblock' style='background-image:url(images/$BACKGROUND.png);'>
        <div id='picture'><a href='$LINK'><img src='$IMAGELINK'/></a></div>
        <div id='description'><p>$DESCRIPTION</p></div>
        <div id='price'><p class=price>$PRICE</p></div>
    </div>";
} 
```

如果你想让它变得更好，那就采用一个框架，一个完整的管理配置页面如下所示。所有的 HTML 胶水都是由框架提供的——下面的代码是真实的，但实际上是为了说明框架如何为您提供大量的垃圾工作。

在下面的示例中，如果我想编辑单个实体，我会将其更改`TableViewEdit`为 a`FormView`并提供实体的实例而不是可迭代列表。

```
$entity = new CbfConfig();  // Database entity
$page = new AdminWebPage("Site Configuration"); // Page for output

/*
 * build the view
 */
$vil = new ViewItemList();

$col = &$vil->add(new ViewItem("description","Description"));
$col->get_output_transform()->allow_edit(false); // this field cannot be editted
$col = &$vil->add(new ViewItem("value","Value"));

$v1 = new TableViewEdit($entity, $vil,"admin_values"); // present as standard editable table

/*
 * output the page
 */
$page->begin();
$iterable_list = CbfConfig::site_begin();
$page->add_body($v1->get_output($iterable_list,'admin_config'));
$page->end(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T00:18:38.053

我只是将我所有的 html 代码放在 php 标签之外，然后无论我需要来自 php 的变量，请执行以下操作

```
<div id="description"><p><?php echo $DESCRIPTION; ?></p></div> 
```

您也可以循环非 php 代码。例如

```
<?php

for($i = 0; $i < 10; $i++) {
?>
<div id="description"><p><?php echo $i; ?></p></div>
<?php
} //end for loop
?> 
```

显然这只是一个例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T00:22:12.700

好吧，如果我出于某种原因没有模板引擎，我通常会这样做：

```
function partial($file, $args = array()) {
  extract($args);
  ob_start();
  include($file);
  return ob_get_clean();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T00:18:36.177

真的，有3种方法可以做到这一点。在您使用它的上下文中使用对您来说最简单的那个。

```
<?php
while(($row=mysql_fetch_assoc($result))!==false)
{
    echo "<div>{$row['fieldName']}</div>";
}
?>

<?php
while(($row=mysql_fetch_assoc($result))!==false)
{
    echo '<div>'.$row['fieldName'].'</div>';
}
?>

<?php
while(($row=mysql_fetch_assoc($result))!==false)
{
?>
    <div><?= $row['fieldName']; ?></div>
<?php
}
?> 
```

# powershell - Powershell 过滤器制表符分隔的文本文件

> ID：11199176
> 
> 赞同：0
> 
> 时间：2012-06-26T00:15:21.253
> 
> 标签：powershell

我有一个制表符分隔的文件，我正在通过 foreach 循环运行以匹配值。

```
foreach($mvalue in $mvalues) {
$vName = $mvalue.Name
$filter = "`"" + $vName + "/``t`""
$mMatch = gc d:\test.txt | select-string $filter
Write-Output $vName
Write-Output $filter
Write-Output $mMatch } 
```

即使 $filter 正确，$mMatch 也没有输出，我可以在控制台中使用 $filter 的值进行测试，它会给我结果。值得一提的是，并非所有行都与我正在搜索的值匹配；但是有一些可以做到，对于那些我希望它输出值的人。我在 Windows 2003 上运行 2.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:08:52.870

您可以将其转换为 csv 格式并为列指定一个有意义的名称：

```
Get-Content TabDlimited.txt | 
ConvertFrom-Csv -Header col1,col2,col3 -Delimiter "`t"  |
Where-Object {$_.col1 -match 'whatever'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-09T15:29:19.157

我最近有一个类似的要求，我想从文件中搜索字段中的值列表，就像在 SQL 中我们使用 IN 子句

> select * from table where column in (List of values)

使用以下实现 -

```
$lstExpenseID = @("VAL1"
 ,"VAL2"
 ,"VAL3")

Get-ChildItem -Filter "*.txt" -Path .\ |
ForEach-Object {
  Import-Csv -Delimiter `t -Path $_.FullName | Where-Object -Property "Cust id" -In -Value $lstExpenseID
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:18:49.430

总是小事：

我从变量周围删除了括号：

```
$filter = $vName + "/\t"
$mMatch = gc d:\test.txt | select-string -pattern $filter 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T03:46:32.267

尝试像这样编写过滤器（\t 用于正则表达式中的制表符）：

```
$filter = "`"$vName/\t`"" 
```

# google-app-engine - 有没有办法防止 Google App Engine 由于（虚假）http 错误而重新启动实例？

> ID：11199177
> 
> 赞同：0
> 
> 时间：2012-06-26T00:15:31.703
> 
> 标签：google-app-engine, http

当客户端应稍后尝试从服务器接收数据时，我的 Google App Engine 应用程序会向客户端返回 503 代码。这似乎导致应用程序引擎认为应用程序出现故障，并且在多次此类响应后，实例重新启动，从而增加了平均延迟。有没有办法阻止应用引擎仅仅因为您手动返回 503 或其他非 200 http 响应代码而重新启动实例？蒂亚！

**编辑1：** 这是它通常如何进行的屏幕截图（由于我的应用程序的敏感性，一些特定于应用程序的东西被消融了）。请注意，所有 [I] 信息和 [D] ebug 消息都是由我的代码生成的，而关于重启的 [W] 警告显然是 GAE 本身。唯一能区分这种情况发生的时间是我返回 503 时。

![在此处输入图像描述](../Images/fcc5e68eed873beb8513f36b536810fe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:30:48.810

~~App Engine 不会根据您返回的状态代码或您记录的内容来决定终止或重新启动实例。~~

看来 App Engine 现在确实根据您的返回代码做出实例化决策。据我所知，没有办法返回 5xx 代码，但告诉 App Engine 并没有什么问题。

# javascript - 如何将 html 代码写入 DOM

> ID：11199178
> 
> 赞同：0
> 
> 时间：2012-06-26T00:15:44.683
> 
> 标签：javascript, html, dom

```
<!DOCTYPE html>
<html>
<body>
<form name=myform>
<input type=button value="Try it now" 
onClick="
s=prompt('Enter your first name','Name');
n=prompt('Enter your first name','Name');
document.write('hello'+s +n+' !')">
</form>
</body>
</html> ' 
```

在上面的代码中，我想用下面的代码替换 'hello'。在你好的地方放上这段代码：
`<div class="hreview"> <span class="item"> Reviewed by <span class="reviewer">john paul</span> Rating: <span class="rating">5</span> </div>`

它应该显示代码而不格式化我在你好地方写的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T04:06:34.143

我想您正在尝试在写入文档的更新 html 中使用`s`和`n`变量作为名字和姓氏，所以这就是我在这里所做的：

html:

```
<form name="myform">
    <input type="button" value="Try it now" onclick="write_message();" />
</form>
<span id="message"></span> 
```

js：

```
function write_message() {
        var s=prompt('Enter your first name','First name');
        var n=prompt('Enter your last name','Last name');
        document.getElementById('message').innerHTML='<div class="hreview"> <span class="item"> Reviewed by <span class="reviewer">'+s+' '+n+'</span> Rating: <span class="rating">5</span> </div>';
} 
```

另外，作为提示，您的 html 存在许多问题。`inputs`应该像上面一样正确关闭，最后用斜线。任何带有值字符串的属性都需要用引号引起来，并且所有 html 都是小写的，包括`onclick`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:31:34.233

你需要像这样**逃避**你的报价：

```
document.write("<div class=\"hreview\"> <span class=\"item\"> Reviewed by <span class=\"reviewer\">john paul</span> Rating: <span class=\"rating\">5</span> </div>") 
```

或使用**单引号**：

```
document.write("<div class='hreview'> <span class='item'> Reviewed by <span class='reviewer'>john paul</span> Rating: <span class='rating'>5</span> </div>") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T00:45:29.503

不建议在页面加载后使用 document.write()，它可以用于在准备 DOM 时向页面添加内容。

例如：

```
<!DOCTYPE html>
<html>
<body>
<script type="javascript">
 document.write('<h1>Mypage</h1>');
</script>
</body>
</html> 
```

在您的情况下，页面已经被解析并转换为[DOM](https://developer.mozilla.org/en/DOM/About_the_Document_Object_Model)，因此您应该直接更改 DOM 以反映页面上的任何更改。

```
<!DOCTYPE html>
<html>
<head>
    <script>
        function getDetails(){
         var s=prompt('Enter your first name','Name');
         var n=prompt('Enter your first name','Name');
         document.body.innerHTML = ('hello'+s +n+' !');
        }
    </script>
</head>
<body>
<form name=myform>
<input type=button value="Try it now" 
onClick="getDetails()">

</form>
</body>
</html> 
```

您可以阅读有关 DOM 遍历的信息

# ruby-on-rails - 从 sqlite3 中四个不同行的“内容”选项卡发布数据

> ID：11199180
> 
> 赞同：1
> 
> 时间：2012-06-26T00:16:05.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sqlite

我需要一些关于 Ruby on Rails 和 Sqlite3 的帮助。

这是我做了四次：

`<%= Bullet.select(:content).order('random()').limit(1).collect { |b| b.content } %>`

但是，它不会执行四个不同的随机“子弹”，而是从我拥有的子弹列表中随机选择四个相同的子弹。

我也试过 select * from bullets order by random() limit 4; 在 sqlite3 中（使用 sqliteman 程序）并且还完成了 select * from bullets order by random() limit 1；四次。

关于如何通过访问数据库表并使用嵌入式 ruby​​ (.erb) 在 Ruby on Rails 中成功完成此操作的任何想法？

我是一个新手，所以我需要知道在哪里放什么。（例如，我正在显示的项目符号内容是show.html.erb，它的控制器是students_controller.rb | 我也在使用sqliteman，所以我需要知道我是否对它做任何事情。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:24:54.837

现在试试这个：

```
<% random_bullets = Bullet.all %>
<ul>
  <% random_bullets.shuffle.first(4).each do |r| %>
    <li><%= r.content %></li>
  <% end %>
</ul> 
```

**编辑**

这种新方法将获取`random_bullets`数组，对其进行洗牌并获得前 4 个子弹。
这样一来，子弹总是不同的。

# internet-explorer - 为什么 IE7+8 不显示框的右侧

> ID：11199181
> 
> 赞同：0
> 
> 时间：2012-06-26T00:16:12.440
> 
> 标签：internet-explorer, css

当然，在开发 IE 时让我很头疼。这个带有圆角阴影 div 的页面在所有浏览器中看起来都不错：[http ://www.toptrouwen.nl](http://www.toptrouwen.nl)

但是这个页面[http://www.toptrouwen.nl/trouwlocaties/zoeken/?search=1](http://www.toptrouwen.nl/trouwlocaties/zoeken/?search=1)上的相同类型的 div在 Chrome、Firefox 和 Safari 中看起来不错，但在 IE7、IE8 和 IE9 中却很糟糕。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:24:25.837

对我来说，似乎是搜索模式的圆角在所有浏览器上看起来都不错，因为圆角是图像并且不是由 CSS 完成的。

至于阴影背景，它使用的是 IE8 及更低版本不支持的 Box Shadow。要查看哪些浏览器支持的 CSS 属性列表，请查看以下链接：

[http://www.findmebyip.com/litmus](http://www.findmebyip.com/litmus)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T00:39:09.457

我的猜测是 IE 呈现您的表格的方式与其他浏览器不同。在第一个链接中，您的 div 不在表格内，第二个链接就是这种情况。摆脱或修改表格，我敢打赌你的两个页面之间的不一致也会消失。

# java - Java - 使用 catch 块内的方法返回语句和抛出异常？

> ID：11199183
> 
> 赞同：2
> 
> 时间：2012-06-26T00:16:31.823
> 
> 标签：java, exception, return

我有以下代码使用hibernate在错误时引发自定义异常，并且在这种情况下我也想关闭会话，因为除非在客户端计算机上接收到异常，否则不会捕获异常。

```
public <T> T get(final Session session, final String queryName) throws RemoteException
{
    final Query query = // query using given session ...

    try
    {
        return (T) query.uniqueResult();
    }
    catch (final HibernateException e)
    {
        SessionManager.logger.log(Level.SEVERE, "Could not retrieve Data", e);
        this.closeSession(session);
        throw new RemoteException("Could not retrieve Data");
    }
} 
```

现在我有一个辅助方法可以关闭会话并抛出一个给定的异常：

```
public void closeSessionAndThrow(final Session session, final RemoteException remoteException)
    throws RemoteException
{
    this.closeSession(session);
    throw remoteException;
} 
```

现在我想我可以使用以下方法简化上面的代码：

```
public <T> T get(final Session session, final String queryName) throws RemoteException
{
    final Query query = // query using given session ...

    try
    {
        return (T) query.uniqueResult();
    }
    catch (final HibernateException e)
    {
        SessionManager.logger.log(Level.SEVERE, "Could not retrieve Data", e);
        this.closeSessionAndThrow(session, new RemoteException("Could not retrieve Data"));
    }
} 
```

**现在**我需要`return null;`在 catch 之后添加一个语句。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T00:28:31.797

将声明更改`closeSessionAndThrow`为返回`RemoteException`，然后在客户端代码中“抛出”调用它的返回结果。

```
public RemoteException closeSessionAndThrow( ... )   // <-- add return type here
        throws RemoteException { ... }

public <T> T get( ... ) throws RemoteException
{
    try { ... }
    catch (final HibernateException e)
    {
        throw this.closeSessionAndThrow( ... );  // <-- add "throw" here
    }
} 
```

这使编译器认为它总是会抛出任何从`closeSessionAndThrow`. 由于辅助方法本身会引发该异常，因此这一秒`throw`永远不会发挥作用。虽然您可以从帮助程序返回异常，但当有人忘记`throw`在调用之前添加时，这会引发错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T00:38:27.987

这是诸如`closeSessionAndThrow`. JLS 规则*不允许*编译器推断，因为该方法无条件地抛出异常，所以它永远不会正常返回。因此，调用代码必须像方法可以返回一样编写……即使“我们知道”它不可能发生。

你只需要顺其自然。这是一种“不寻常的”控制模式，Java 语言并不像您/我们希望的那样支持。

* * *

（在某些情况下，可以证明该方法在某些假设下总是会抛出异常。但是，由于该方法`public`位于不同的类中，因此假设之一是定义和使用该方法的类不会相互独立地更改和编译。当然，这不是编译器可以做出的那种假设……它部分解释了为什么 JLS 规则不试图涵盖这种模式。

如果他们要“修复”这个问题，则需要注释之类的东西，或者更改为 java 语法来声明辅助方法无法返回。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T00:33:59.927

虽然 closeSessionAndThrow 总是抛出远程异常，但编译器不会深入研究方法来找出它，因此编译器只知道它可以抛出 RemoteException，而不是它会抛出。我可能会做这样的事情：

```
public RemoteException closeSessionAndThrow(final Session session, final Exception e, String msg)
{
    SessionManager.logger.log(Level.SEVERE, msg, e);
    this.closeSession(session);
    return new RemoteException(msg);
}

public <T> T get(final Session session, final String queryName) throws RemoteException
{
    final Query query = // query using given session ...

    try
    {
        return (T) query.uniqueResult();
    }
    catch (final HibernateException e)
    {
        throw this.closeSessionAndThrow(session, e, "Could not retrieve Data");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T00:20:02.013

由于此方法必须返回某些内容，因此您应该在`return null;`后面加上

```
this.closeSessionAndThrow(session, new RemoteException("Could not retrieve Data")); 
```

但仍在`catch`从句内或使用`finally`从句。

为什么需要这样做？因为你的函数**必须**返回一些东西。并且由于它从以下位置返回：

```
this.closeSessionAndThrow(session, new RemoteException("Could not retrieve Data")); 
```

并且不返回任何内容，这会导致编译器错误。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-06-26T00:19:52.763

> *将 finally 添加到 try-catch 块 finally { return null; } - 如果执行进入**try**块并且结果是成功它会返回，所以**finally**永远不会被执行。- 如果执行进入**catch**块，**finally**块在**catch**之后执行并返回 null。安全执行！*

**不正确答案！**

# proof - 使用 coq，试图在树上证明一个简单的引理

> ID：11199192
> 
> 赞同：2
> 
> 时间：2012-06-26T00:19:10.860
> 
> 标签：proof, coq, transitivity

试图证明元素插入函数到 bst 中的正确性，我被困在试图证明一个看似微不足道的引理中。到目前为止我的尝试：

```
Inductive tree : Set :=
| leaf : tree
| node : tree -> nat -> tree -> tree.    

Fixpoint In (n : nat) (T : tree) {struct T} : Prop :=
  match T with
  | leaf => False
  | node l v r => In n l \/ v = n \/ In n r
  end.

(* all_lte is the proposition that all nodes in tree t 
   have value at most n *)  
Definition all_lte (n : nat) (t : tree) : Prop :=
  forall x, In x t -> (x <= n).

Lemma all_lte_trans: forall n m t, n <= m /\ all_lte n t -> all_lte m t.
Proof.
intros.
destruct H.
unfold all_lte in H0.
unfold all_lte.
intros. 
```

显然，如果树中的所有内容都小于`n`并且`n <= m`所有内容都小于`m`，但我似乎无法让 coq 相信我。我该如何继续？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:25:53.383

你必须使用`le_trans`定理：

```
le_trans: forall n m p : nat, n <= m -> m <= p -> n <= p 
```

来自`Le`包。这意味着您必须导入`Le`或更一般地`Arith`使用：

```
Require Import Arith. 
```

在文件的开头。然后，你可以这样做：

```
eapply le_trans.
eapply H0; trivial.
trivial. 
```

# php - 当值可以不同时返回子字符串

> ID：11199195
> 
> 赞同：0
> 
> 时间：2012-06-26T00:19:38.913
> 
> 标签：php

我在数据库中有“请求”，我需要从中提取图像的名称 - 它始终是 .jpg 但名称中的字符数可能会有所不同，所以我回避 substr()。

该值看起来像这样“Added 545_4.jpg to Photo Album, The British Open”。

“已添加”将始终存在，“到相册”将始终存在，但相册名称不同。

根据手册，我猜想 % 字符表示多个字符，所以我试图让它代表相册的变体。所以，我最终得到了这个，但似乎什么也没发生，因为它只是回显了原始字符串。

```
$emij = str_replace('Added','', 
        str_replace(' to Photo Album%', '', $thisTask[0]['request']));
echo $emij; 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:26:10.313

正则表达式最适合此：

```
preg_match("/Added (.*?) to Photo Album, (.*?)/",$thisTask[0]['request'],$m);
// $m[1] is now the filename
// $m[2] is the name of the album 
```

# haskell - 有没有办法在文件正文中指定导入？

> ID：11199202
> 
> 赞同：0
> 
> 时间：2012-06-26T00:20:04.403
> 
> 标签：haskell

本质上，有什么方法可以使这段代码合法吗？

```
main = print . sort $ [10, 1]
import Data.List 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:26:35.493

不可以。导入必须[在模块的顶部](http://www.haskell.org/onlinereport/haskell2010/haskellch5.html#x11-1010005.3)，在任何代码之前。语言定义是这样说的。只有编译指示、模块头和注释可以出现在导入声明之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:13:13.463

这更像是对您对此目的的评论的回答。

在您的导入前添加分号分隔，没有像这样的尾随换行符。

```
import Data.List; main = print . sort $ [10, 1] 
```

这样行号就不会改变。

# gradle - 复制在 gradle 中有效，但 zip 给出了奇怪的错误

> ID：11199205
> 
> 赞同：2
> 
> 时间：2012-06-26T00:21:13.217
> 
> 标签：gradle

我正在尝试在 gradle 中使用 zip，并且我的构建工作正常，直到我将它添加到我的“webserver”项目部分（也许我的问题应该是为什么副本在没有任务的情况下工作？？？？？？。 ..如果您需要 zip 前面的任务而不是下面的复制，我真的对复制和 zip 之间的区别感到困惑）

```
assemble << {
    zip {
       from '.'
       includes ['app/*','conf/*','public/*','play-1.2.4/*','run*.sh']
    }
} 
```

错误是

*   出了什么问题：任务'：webserver：assemble'的执行失败。

    > 在任务'：webserver：assemble'上找不到参数[build_3nljqgmljp29v06751h102sq8b$_run_closure3_closure16_closure18@7cc8e407]的方法zip（）。

我不明白，因为我像这样成功地使用了副本

```
copy { from fixedLibDir into genLibDir } 
```

此外，我对文档中的文档感到非常困惑，他们几乎总是有

```
task myZip(type: Zip) {

} 
```

我只是想调用一个 zip 任务而不是每次都创建一个新任务，所以文档示例似乎很糟糕......它们应该是使用 zip 任务而不是创建一个新任务的示例（毕竟，谁想要创建一个一个已经存在的新 zip 任务？？） **或者我在这里遗漏了什么？** 无论如何，当我开始使用 gradle 时，这让我很困惑，我猜这会让其他人感到困惑。展示使用它和定义一个新的可能会很好（尽管我仍然不明白我为什么要定义一个新的）。

更多信息/更新：我也尝试了这个运行的代码，我看到了打印输出消息，但是我的 webserver/output/libs 目录中没有我期望的 zip 文件？？？

```
assemble << {
    println "I'm zipping up now"
    task zip(type: Zip) {
        from('.') {
            fileMode = 0755
            include 'run*.sh'
            include 'app/*'
        }
    }

} 
```

后来，迪恩

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T00:43:06.827

之所以有效，是因为它是在（参见[此处](http://gradle.org/docs/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project%3acopy%28groovy.lang.Closure%29)）`copy`中定义的全局效用函数。所以你可以从任何地方打电话，它会工作。`Project``copy`

另一方面，没有等效的`zip`方法。也许，因为压缩通常需要比复制更多的配置，例如指定 zip 存档名称，或者他们只是错过了它。这意味着您必须使用`task zip(type: Zip){ from ... into ... }` zip 的语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T00:45:44.140

*与*相比`Copy`，`copy`不是任务；它只是类上的一种方法。Gradle 没有任何关于方法的信息，也无法控制方法的执行，就像它对任务所做的那样。因此，方法相对于相应的任务有一些缺点（例如，没有最新的检查），并且应该只在任务不是一个选项时使用（这比您想象的要少）。*`Project`*

 *至于`zip`，根本就没有这样的方法，尤其是`Project`类上没有。查找此类信息的最佳位置是[Gradle DSL 参考](http://gradle.org/docs/current/dsl/index.html)。

> > 毕竟，谁想在已经存在的情况下创建一个新的 zip 任务

不知道你的意思是什么；也许你混淆了*任务*和*任务类型*。为每个要创建的 zip 文件使用单独的任务是完全正常的。

PS：我建议在处理实际构建之前退后一步并了解有关 Gradle 的更多信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-26T12:17:40.750

我认为现在这样做的正确方法是

```
task myZip(type: Zip) {
    from('.') {
        include 'run*.sh'
        include 'app/*'
    }
}

assemble.dependsOn('myZip')
    //This last line is important of course!!!! 
```

老实说，我现在不确定以下内容会做什么，因为它除了 println 什么都不做

```
assemble << {
    println "I'm zipping up now"
    task zip(type: Zip) {
        from('.') {
            fileMode = 0755
            include 'run*.sh'
            include 'app/*'
        }
    }

} 
```*

# ruby - Ruby 中的 __varmap__ 是什么？

> ID：11199206
> 
> 赞同：1
> 
> 时间：2012-06-26T00:21:24.463
> 
> 标签：ruby

我一直在 Ruby 1.8.7 的脚本上使用 memprof，最常见的创建是`__varmap__`. 什么是 varmap？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T03:50:01.433

我认为 varmap 指的是 T_VARMAP ，它是一个块内变量容器：[http](http://www.ruby-forum.com/topic/141449) ://www.ruby-forum.com/topic/141449 。当 memprof 遇到 T_VARMAP 时，它会打印出来`__varmap__`：[https ://github.com/ice799/memprof/blob/master/ext/memprof.c](https://github.com/ice799/memprof/blob/master/ext/memprof.c)

# c# - 在构建时将 ASPX 中的字符串替换为构建版本

> ID：11199207
> 
> 赞同：2
> 
> 时间：2012-06-26T00:21:33.353
> 
> 标签：c#, asp.net, .net, msbuild

有没有办法在 aspx/ascx 文件中查找模式并将其替换为内部版本号或其他令牌？我对在运行时使用反射和设置字符串不感兴趣。我想进入 aspx/ascx 文件并使用 msbuild 替换字符串。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T01:02:45.063

有一个名为[MSBuild 社区任务](https://github.com/loresoft/msbuildtasks)的项目，其中包含一个 FileUpdateTask。这应该满足您的要求。它允许您使用正则表达式进行任意文本替换。

```
<FileUpdate Files="MyWebPage.aspx"
            Regex="\<div id\=\'version\'\>(.*)\<\/div\>"
            ReplacementText="$(BuildVersion)" /> 
```

请注意，我没有测试过这个正则表达式。

# ios - Ios - 是否有用于包含大量文本和段落的屏幕的模式或架构？

> ID：11199212
> 
> 赞同：0
> 
> 时间：2012-06-26T00:22:13.653
> 
> 标签：ios, ios5, storyboard

我有一个屏幕，应该有几个大的文本部分，不同位置的几个按钮，每个部分的标题都有不同的样式。

我可以在屏幕上剪切和粘贴文本并使其成为滚动视图并完成它，但我想知道是否有一种模式或一种好的实践方式来创建这样一个可能比仅仅倾销更优雅的屏幕一堆文字就在页面上。

我正在使用故事板。

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:34:11.480

如果没有太多内容，我认为使用故事板并布置内容是合理的。（您可以使用单独的 UIView 并将其设置为您想要的任何高度用于布局目的，然后以编程方式将其插入到滚动视图中。）

我们经常用于类似“富文本”的视图的一种替代方法是 UIWebView。（虽然这种视图中的按钮更痛苦。）

# android - android“关闭”活动

> ID：11199216
> 
> 赞同：1
> 
> 时间：2012-06-26T00:22:44.257
> 
> 标签：android, android-activity

我有一个具有“登录”和“注销”操作的应用程序。用户登录后，在他们注销时，堆栈上可能会留下任意数量的活动。

当用户注销时，我希望重置所有应用程序状态。我清除了我的磁盘缓存和首选项，但仍有状态正在运行（暂停）活动。事实上，当用户再次登录时，我发现上一次登录会话中的旧活动仍然以其旧状态存在（我当然明白为什么会这样）。我怎样才能使整个应用程序重置/关闭/重新启动？

我看过一些关于使用`startActivityForResult()`,`onActivityResult()`冒泡“注销”结果代码的帖子，导致每个活动依次关闭。这看起来很痛苦，我希望有更好的方法。

编辑：我尝试使用各种标志启动“登录”活动无济于事，

```
loginIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_CLEAR_TASK|Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:31:15.663

在您的清单上，您可以将以下属性添加到您的活动中：

```
android:clearTaskOnLaunch="true" 
```

所以你最终会得到类似的东西：

```
<activity android:name=".ui.Activity" android:clearTaskOnLaunch="true" android:theme="@style/MyTheme">
                <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

# css - 为什么 pinterest 设置图像的高度而不是宽度？

> ID：11199223
> 
> 赞同：1
> 
> 时间：2012-06-26T00:24:02.823
> 
> 标签：css, layout

最近一直在研究 Pinterest 网站的页面代码，学习一些 CSS 的设计技巧。我观察到的一件事是他们使用 CSS 样式设置每个图像的高度。这对我来说很奇怪，因为很明显它们都在调整大小以便具​​有 192 像素的统一宽度。设置高度而不是宽度是否有技术原因？

例子：

```
<img src="http://media-cache-ec8.pinterest.com/upload/30962316158222159_nQdVRIXP_b.jpg" alt="Summer camp" class="PinImageImg" style="height: 163px;"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T04:53:10.297

Pinterest 使用 JQuery 砌体。[http://masonry.desandro.com/](http://masonry.desandro.com/) 现在，如果您尝试像 Pinterest 那样使用砖石来漂浮物体；无论您放大多少或放大多少，您的对象都不会排列。如果您通过设置对象的宽度来玩耍；您很快就会意识到“Pinterest 的 192px”背后的数学原理。在给出合理的填充和边距后，您必须为安排的正确功能分配这个特定的宽度。我在开发一个类似于 Pinterest 的网站，我们花了一个多星期的时间来解密“Pinterest 的 192px 宽度”背后的逻辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:29:14.543

图像的“纵横比”并不总是最佳的。有时，当您调整到 X 高度和 Y 宽度时，生成的图像会比预期更宽或更高，具体取决于宽度/高度比。如果你在 css 中设置一个固定的高度，你确保它永远不会大于那个（并且你的设计不会“破坏”）

# iphone - 不需要的双导航栏

> ID：11199227
> 
> 赞同：7
> 
> 时间：2012-06-26T00:24:22.530
> 
> 标签：iphone, xcode, uinavigationcontroller, uinavigationbar

当我点击屏幕时，我使导航栏（顶部栏）出现/消失，并且还位于背景图像的顶部。它有效，但有一个问题：我突然有两个导航栏！首先，一个带有名为“Back”的后退按钮，当我按下“Back”时，它会弹出一个带有名为“Vinene”的后退按钮的新导航栏，这是它返回的 TableView 的标题。那是我想保留的。我认为问题出在 DetailViewController.m 或 MasterViewController.m 中的 didselectrowatindexpath 中。希望有人能看到问题！

DetailViewController.m：

```
@interface WinesDetailViewController ()

@end

@implementation WinesDetailViewController

@synthesize wineDictionary;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidAppear:(BOOL)animated
{
[super viewDidAppear:animated];

}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.

self.navigationController.navigationBar.translucent = YES;
                         self.wantsFullScreenLayout = YES;

UITapGestureRecognizer *tap = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(hideShowNavigation)] autorelease];
                                                                                                         tap.numberOfTapsRequired = 1;
                                                                                                 [self.view addGestureRecognizer:tap];
}

- (void) hideShowNavigation
{
[self.navigationController setNavigationBarHidden:!self.navigationController.navigationBarHidden];
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (BOOL)hidesBottomBarWhenPushed{
return TRUE;
}

@end 
```

MasterViewController.m：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    {
    [tableView deselectRowAtIndexPath:indexPath animated:YES];    

    NSDictionary *dictionary = [wine libraryItemAtIndex:indexPath.row];

    if (winesDetailViewController == nil) {
        // Init the wine detail view
        winesDetailViewController = [[WinesDetailViewController alloc] init];
    }
    // Here you pass the dictionary
    winesDetailViewController.wineDictionary = dictionary;

    [self.navigationController pushViewController:winesDetailViewController animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T00:55:00.813

通常，像您描述的重复导航栏是由两次推送同一个视图控制器引起的。您能否检查以确保您仅将单个视图控制器推送到导航堆栈（通过断点或日志记录？）。winesDetailViewController 是否可能已经在导航堆栈上？您还可以尝试记录`self.navigationController.viewControllers`提示的值。

我也建议搬家

```
self.navigationController.navigationBar.translucent = YES; 
```

查看WillAppear 和

```
self.wantsFullScreenLayout = YES; 
```

到您的初始化程序（尽管我认为这不会解决您的问题）。

# spring - 让 Spring 与 Tomcat 的 3 层 Web 系统一起工作

> ID：11199229
> 
> 赞同：0
> 
> 时间：2012-06-26T00:24:29.507
> 
> 标签：spring, jakarta-ee, tomcat

我正在为现有的 Java EE 项目添加新功能，该项目涉及三层：数据、业务和表示。已使用 Spring 2.5 和 JDK 1.4.2。

业务层（域对象项目）使用 Spring 来管理 jdbc 事务并照常注入 DAO 和服务。它有“Spring-config.xml”来配置 Spring。它运作良好。

表示层将使用 Spring 2.5、plain JSP 和 Tomcat 5.0。但是，我坚持设置 web.xml 以在项目启动时加载 Spring。

web.xml 是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"        xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee     http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
id="WebApp_ID" version="2.5">
<display-name>TestSpring25Web</display-name>
<listener>
    <description>
  loads the spring application context on startup
</description>
    <display-name>spring application context loader listener</display-name>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:web-applicationContext.xml</param-value>
</context-param>
<context-param>
    <param-name>locatorFactorySelector</param-name>
    <param-value>
        classpath:Spring-config.xml
    </param-value>
</context-param>
<context-param>
    <param-name>parentContextKey</param-name>
    <param-value>businessBeanFactory</param-value>
</context-param>
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
</welcome-file-list>
<!-- DWR -->
<servlet>
    <display-name>DWR Servlet</display-name>
    <servlet-name>dwr-invoker</servlet-name>
    <servlet-class>org.directwebremoting.servlet.DwrServlet</servlet-class>
    <init-param>
        <param-name>debug</param-name>
        <param-value>true</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>dwr-invoker</servlet-name>
    <url-pattern>/dwr/*</url-pattern>
</servlet-mapping>
</web-app> 
```

Tomcat 5 的错误堆栈跟踪如下：

```
SEVERE: Context initialization failed
org.springframework.beans.factory.access.BootstrapException: Unable to initialize group     definition. Group resource name [classpath:Spring-config.xml], factory key     [businessBeanFactory]; nested exception is     org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML     document from class path resource [Spring-config.xml]; nested exception is     java.io.FileNotFoundException: class path resource [Spring-config.xml] cannot be opened because it does not exist
at org.springframework.beans.factory.access.SingletonBeanFactoryLocator.useBeanFactory(SingletonBeanFactoryLocator.java:385)
at org.springframework.web.context.ContextLoader.loadParentContext(ContextLoader.java:336)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:186)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45) 
```

它显然抱怨找不到“Spring-config.xml”；但是域项目已设置为 Web 项目的依赖项。

我是 Spring 新手，但有人可以帮我一些建议吗？谢谢

关于配置这样的 3 层 Spring 项目的任何最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T08:02:58.163

Spring-config-xml 必须在根类路径上。您没有解释此文件的位置以及如何在 Tomcat 中部署应用程序。

# windows-phone - 在云中编译 windows phone 8 应用程序

> ID：11199234
> 
> 赞同：1
> 
> 时间：2012-06-26T00:25:13.787
> 
> 标签：windows-phone, windows-phone-8

在观看了[Developer Platform Drill Down](http://channel9.msdn.com/Events/Windows-Phone/Summit/Developer-Platform-Drill-Down-Kevin-Gallo-Windows-Phone-8)之后，我想知道他所说的在云中编译是什么意思。他说所有的Windows Phone都将被编译。这是否意味着所有应用程序都将是 NGEN 的？它会包括更高级的 JITer 启发式方法吗？例如，在.Net CF 中，属性被解析为函数调用（无内联）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T00:58:37.617

对此**没有明确**的答案，因为设备 + 操作系统和 SDK 都尚未公开。

正如 Kevin 所解释的，在云中编译意味着应用程序将被编译为机器代码（您很可能仍将在托管环境中工作），因此在实际设备上的性能要高得多。据我了解，开发者*将无法访问云编译服务*。一旦提交申请以供市场批准，这将是 Microsoft 完成的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T03:41:38.577

> 这个想法很简单。首先，输入 MDIL 或 Machine Dependent Intermediate Language 或 .NET 混合汇编语言。MDIL 就是尽可能地编译为本地汇编指令，并将其余的编译为伪指令，这些伪指令可以在手机上快速转换为本地指令。因此，这个包含伪指令和本机指令混合的程序集可以传送到设备（并且可以跨相同架构移植 - 例如，跨所有 ARM 设备），并且在设备上我们执行轻量级链接步骤以将整个程序集转换为本机映像。当我们将 IL 程序集编译为 IL 程序集和本机映像之间的中间文件时，大部分繁重的工作就完成了（这就是 MDIL）。
> 
> “那又怎样？”，你问。将 MDIL 程序集转换为本机映像的设备上的链接步骤只需要设备上传统 NGEN 的 1/5 时间。因此，我们获得了预编译（因为我们正在执行所有指令都是汇编指令的本机映像）和 JIT 编译（在框架更新期间在设备上没有大量编译）的一些好处。

[更多信息](http://channel9.msdn.com/Shows/Going+Deep/Mani-Ramaswamy-and-Peter-Sollich-Inside-Compiler-in-the-Cloud-and-MDIL)

# ruby-on-rails - link_to 语法，多个选项

> ID：11199235
> 
> 赞同：0
> 
> 时间：2012-06-26T00:25:18.867
> 
> 标签：ruby-on-rails

我无法按照我想要的方式获取链接。目前，我有以下代码：

```
<%= link_to  :action => 'toggle' ,  :id => item.id, :remote => true  do %>
    <i class="icon icon-test"></i><b>Toggle</b>
<%end%> 
```

这将产生我想要的链接，但包含`&remote=true`在链接路径中，而不是实际使链接 ajaxy。尝试将参数包装在括号或花括号中，例如

```
<%= link_to {:action => 'toggle', :remote => true }, :id => item.id do %> ... 
```

给我这样的错误

> 语法错误，意外的 tASSOC，需要 '}'

我想我想调用[此处](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)列出的第三个签名，但我似乎无法正确使用语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:47:13.763

而不是使用 URL 的哈希参数，您应该真正使用 URL 助手：

```
<%= link_to toggle_item_path(item), :remote => true do %>
  <i class="icon icon-test"></i><b>Toggle</b>
<% end %> 
```

这不仅更短，而且 Rails 也不会混淆哪些键属于哪些哈希。

在[路由指南中阅读更多信息](http://guides.rubyonrails.org/routing.html)

# sed - 使用带有 e 替换选项的 sed：s///e

> ID：11199236
> 
> 赞同：1
> 
> 时间：2012-06-26T00:25:33.243
> 
> 标签：sed

我在使用以替换模式执行命令的 sed 替换选项时遇到问题。[我相信该选项是对GNU sed](http://www.gnu.org/software/sed/manual/sed.txt)的扩展，但我无法找到任何关于它的文档。有人知道吗？

我的问题是使用执行替换选项时无法正确提取匹配的文本。我在 Mac OSX 10.7.4 上使用 GNU sed 4.2

```
echo "12345678\r" | sed 's/.*/echo "&);"/e'

Result: );345678
Desired Result: 12345678); 
```

我尝试过使用不同的正则表达式匹配，例如 \d+，但这似乎破坏了使用 /e 替换选项的能力。而且我尝试使用显式捕获组，例如 \1 而不是 & ，但这似乎也破坏了 /e 选项。

**更新：**

我的示例可能过于简单了，我最终想要做的是获取一个文本文件，其中每一行都包含一个唯一值，然后将其传递给 sed 并使用 uuidgen 命令（与我发布的[上一个问题相同）。](https://stackoverflow.com/questions/11167500/add-new-uuid-to-each-line-of-a-file-using-sed-or-equivalent-command)我遇到的新问题是因为我现在在 Mac 上运行命令 \r 没有从匹配的字符串中删除。

我要执行的完整命令是：

```
sed 's/.*/echo "blah blah `uuidgen`,&):"/e' file.txt 
```

**更新 2：**

在我的 Mac 终端中，我不需要使用 echo -e 将 \r 解释为换行，实际上根据“man echo”，没有 -e 选项。在所有终端环境之间移动确实使生活变得困难:(。

感谢kev，我能够想出一个适用于Mac的解决方案。

```
sed 's/\r//; s/.*/ echo "blah blah (`uuidgen`,&);"/e' file.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T00:29:53.383

删除`e`标志：

```
$ echo "12345678\r" | sed 's/.*/echo "&);"/'
echo "12345678\r);" 
```

添加`e`标志与以下内容相同：

```
$ echo -e "12345678\r);"
);345678 
```

* * *

您可以删除`\r`：

```
$ echo "12345678\r" | sed -e 's/\\r//' -e 's/.*/echo "&);"/'
12345678); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T00:53:38.893

> );345678

接下来的`echo`输出将光标带回行首并产生您在窗口中看到的字符串。在命令的末尾放一个来查看。`12345678``\r``);``|od -cx`

在我的`cygwin`安装中，我需要`echo -e`获得类似的行为。我无法删除`\r`，`sed`但我可以通过添加`tr`：

```
$ echo "12345678\r" | sed 's/.*/echo -e "&);"/e'| tr -d "\r"
12345678); 
```

# ios - UIButton 不会显示标题

> ID：11199247
> 
> 赞同：2
> 
> 时间：2012-06-26T00:27:29.240
> 
> 标签：ios, uibutton

我有一个设置的 UIbutton 标题

```
[[buttons objectAtIndex:selectedButtonTag] setTitle:file forState:UIControlStateNormal]; 
```

由于某种原因，这不会强制按钮更改标题。

当我打印按钮的标题时

```
UIButton *button = [buttons objectAtIndex:selectedButtonTag];
NSLog(@"button text is %@",button.titleLabel.text); 
```

它实际上打印了先前设置的标题。

UI 上是否有一些刷新调用，或者为什么按钮不显示标题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T00:39:19.100

对于任何有同样问题并检查过所有其他选项的人。确保您用于 UIButton 的 png 设置在背景图像字段中，而不是图像字段中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:17:16.787

您必须将按钮的标题设置为正常和突出显示状态还请确保设置为按钮的图像设置为其背景图像而不是图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-01T23:49:40.743

就这样我们所有人都不必谷歌如何设置背景图片:)

```
[myButton setBackgroundImage:[UIImage imageNamed:@"myImage.png"]
                    forState:UIControlStateNormal]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T00:30:16.427

如果您的按钮被选中或突出显示并且您专门为这些状态之一设置了标题，它将不会显示 UIControlStateNormal 标题。

如果是这种情况，我建议避免将标题设置为正常状态以外的任何内容，或者为按钮的所有潜在状态设置标题。

# java - 无法从共享 lib 文件夹动态加载 java 类

> ID：11199250
> 
> 赞同：0
> 
> 时间：2012-06-26T00:28:00.313
> 
> 标签：java, weblogic, shared-libraries, classloader, application-server

我有一个 jar 文件，我想将它放入我的应用程序服务器 (WebLogic)的**共享库中。**jar 包含一些实现位于**war 部署**内部的接口的类。并且部署有一个 Spring 单例，它初始化包含在共享 jar 中的类。

所以我猜发生的情况是该类无法加载，因为接口尚未加载（它们在部署中），并且当类加载器尝试加载该类时，它可能会出现一些编译错误（我没有看到它任何地方）并且不加载它，并且当部署尝试实例化尚未加载的东西（共享jar）时 - 它会出错。

所以问题是我在这里做什么？我如何配置所有这些工作？我真的不想复制包含共享文件夹中所有接口的 jar。（它必须是一个完整的 .war 文件）。

谢谢。

PS 不幸的是，在加载域库（共享）文件夹时，我没有任何错误/异常。当我尝试实例化它时，我只有**java.lang.NoClassDefFoundError 。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:25:07.950

我认为您不想使用共享的 lib 目录。听起来您想将客户的 jar 添加到单个战争的类路径中，而无需他们修改战争或拥有多个可交付成果。我看到了两种方式。两者都需要直接指向本地文件系统，这在 webapps 中通常是一个坏主意。我认为这里可能没问题，因为您指的是可选的客户提供的课程。关键在于这种可扩展性机制可以从 webapp 外部进行更改。但这意味着客户必须在所有系统上手动部署相同的 jar。这在集群中可能很麻烦，而且显然需要直接访问应用服务器的文件系统。

1.  我不记得这是否可行，但是您应该能够将一个 jar 放在 webapp 的 WEB-INF/lib 中，该 jar 具有 META-INF/MANIFEST.MF，其类路径指向战争之外。这必须是一个已知的硬编码位置。它可以是相对于当前工作目录的相对路径。这通常是应用服务器的主目录或您的域的主目录。

2.  构造您自己的 ClassLoader 实例。它可能应该是 URLClassLoader，因此您可以让您的客户提供目录或单个 jar 文件。将此类加载器的父级设置为 webapp 的类加载器。它可以指向在运行时确定的位置。这里的问题是在所有正确的地方使用这个类加载器。我不知道任何一般的方法，所以我会推荐第一个选项。

# css - css - 如何在具有 2 列布局的 div 之上添加另一个 div？

> ID：11199251
> 
> 赞同：1
> 
> 时间：2012-06-26T00:28:01.350
> 
> 标签：css, html

这是我的小提琴：http: [//jsfiddle.net/LLFpp/](http://jsfiddle.net/LLFpp/)

我刚刚开始学习 CSS 和 Divs（从旧表移过来），我试图弄清楚如何在已经存在的绿色 div 上方放置另一个绿色 div，两个 div 之间有 20px 的空间，同时将右侧 div 保留在原位。

我尝试像处理表格一样进行操作，但随后它搞砸了整个布局，将右侧的 div 向下推。

所以基本上现在我有：

```
| | 
```

我需要：

```
| |
| 
```

说得通？:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:34:37.897

您需要为两个“绿色” div 提供一个容器，然后将其对齐。

像这样的东西：

```
<div id="bigcontainer">
    <green div 1>
    <green div 2>
</div>
<div id="menu">
 <!--whatever-->
</div> 
```

**在你的 CSS**

```
#bigcontainer{float:left;} 
```

然后，您可以在不影响主要设计的情况下使用“绿色 div”做任何您想做的事情。

希望它足够清楚:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:35:50.700

也许是这样的：

```
div.left_box{
    float: left;
 }

div.right_box{
    float: right;
} 
```

然后将你的两个绿色 div 部分放在 left_box div 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T00:53:19.847

这将使用左列父级添加新内容。通过给title一个id然后调整`el`变量中的id，仍然可以保留绿色背景并在title下。这真的取决于变化的内容会是什么样子。

```
$(function(){
 var el = document.getElementById("main");
 var parent = el.parentNode;
 var newContents = document.createElement("div");
 newContents.innerHTML = "<p>New Content</p>";
 newContents.style = "margin-bottom: 20px";
 parent.insertBefore(newContents,el);
});​ 
```

[http://jsfiddle.net/LLFpp/10/](http://jsfiddle.net/LLFpp/10/)

# android - 从 sdcard 中删除文件

> ID：11199260
> 
> 赞同：0
> 
> 时间：2012-06-26T00:28:52.077
> 
> 标签：android

为什么这段代码不起作用：S

```
public void delete(String name) {
    File file = new File(
            activity.getExternalFilesDir(Environment.DIRECTORY_PICTURES),
            name);

    if (file.exists()) {
        String[] files = file.list();
        for (int i = 0; i < files.length; i++) {
            boolean deleted;
            if (new File(files[i]).isDirectory())
                delete(new File(files[i]).getName());
            else {
                deleted = new File(files[i]).delete();
                Log.d(new File(files[i]).getName(),
                        Boolean.toString(deleted));
            }
        }
    }
} 
```

我正在使用许可

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

当我检查删除的值时，我发现它是错误的：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:43:09.350

试试这个

```
public static boolean deleteDirectory(String name) {
            // TODO Auto-generated method stub
File path= new File(
            activity.getExternalFilesDir(Environment.DIRECTORY_PICTURES),
            name);

            if( path.exists() ) {
                File[] files = path.listFiles();
                for(int i=0; i<files.length; i++) {
                    if(files[i].isDirectory()) {
                        deleteDirectory(files[i]);
                    }
                    else {
                        files[i].delete();
                    }
                }
            }
            return(path.delete());
        } 
```

# nginx - 玩！1.2.4 + Nginx 负载均衡器 - 无法让两个实例在 PROD 模式下一起工作

> ID：11199263
> 
> 赞同：3
> 
> 时间：2012-06-26T00:29:14.557
> 
> 标签：nginx, playframework, load-balancing

我已经实现了一个播放！应用程序在我的服务器中有两个不同的实例（比如说 %inst1 和 %inst2），以避免在预编译任何更新时出现停机时间。我已经配置 nginx 来获得负载均衡器。对于每个实例，我都有自己的子目录，并且我已正确配置文件 application.conf 以获取 %inst1 和 %inst2 的不同端口。nginx的配置文件是这样的：

```
upstream myapp {
  server localhost:9031;
  server localhost:9032;
}

server {
  server_name www.example.com;

  access_log /var/log/nginx/myapp.access.log;

  location / {
    proxy_pass              http://myapp;
    proxy_set_header        X-Real-IP $remote_addr;
    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header        Host $http_host;
  }
} 
```

当我在开发模式下尝试此配置时，它可以完美运行。我执行这两个实例，每当我停止其中一个以更新它时，所有流量都会流向另一个实例，而不会造成任何停机。当我再次重新启动应用程序并重新加载 nginx 时，两个实例都运行良好。

当我将实例配置为生产模式时出现问题。我只更改 application.conf 从：

```
%inst1.application.mode=dev
%inst2.application.mode=dev 
```

至：

```
%inst1.application.mode=prod
%inst2.application.mode=prod 
```

然后我无法让两个实例同时工作两次。每当我启动第二个时，我都会收到 502 Bad Gateway 错误。然后我检查第一个实例的状态，我收到以下错误：

```
$ play status --%inst1
~        _            _ 
~  _ __ | | __ _ _  _| |
~ | '_ \| |/ _' | || |_|
~ |  __/|_|\____|\__ (_)
~ |_|            |__/   
~
~ play! 1.2.4, http://www.playframework.org
~ framework ID is inst1
~
~ Cannot contact the application...
~ 
```

另外，我不能以这样的错误开始它：

```
Oops. /usr/share/apps/klingstore1 is already started! (or delete /usr/share/apps/klingstore1/server.pid) 
```

也不停止：

```
Play was not running (Process id 11657 not found) 
```

而且我必须手动删除 server.pid 。然后我再次启动它并在另一个实例中再次发生。

你有什么线索吗？

谢谢！！

**解决了：**

最后，这似乎只是RAM的问题。实例在相同的 Play 配置下正常工作！和 Nginx 在各种日子里都没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T19:38:49.527

这更像是对您的补充，`nginx.conf`而不是答案，但我认为这是对这个问题的有用补充。

如果您的两个实例都在编译，用户会收到 502 错误。更好的消息是“APPLICATION_NAME 正在更新”。这可以通过设置自定义 502 错误页面来完成：

**nginx.conf：**

```
error_page 502 /502.html;
location /502.html {
    index $uri;
} 
```

**502.html：**

```
<!DOCTYPE html>
<html><head><title>Kleiderliebe wird aktualisiert</title>
<style>body {margin: 0;padding: 0;background-color: #fff;color: #000;
        font-family: Arial,sans-serif;font-size: 14px;}
    #container {text-align: center;margin: 0 auto;padding: 20% 0;}</style>
<meta http-equiv="refresh" content="10"></head>
<body><div id="container">
<img src="data:image/gif;base64,R0lGODlhHwAfAPUAAP///wAAAOjo6NLS0ry8vK6urqKiotzc3Li4uJqamuTk5NjY2KqqqqCgoLCwsMzMzPb29qioqNTU1Obm5jY2NiYmJlBQUMTExHBwcJKSklZWVvr6+mhoaEZGRsbGxvj4+EhISDIyMgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAHwAfAAAG/0CAcEgUDAgFA4BiwSQexKh0eEAkrldAZbvlOD5TqYKALWu5XIwnPFwwymY0GsRgAxrwuJwbCi8aAHlYZ3sVdwtRCm8JgVgODwoQAAIXGRpojQwKRGSDCRESYRsGHYZlBFR5AJt2a3kHQlZlERN2QxMRcAiTeaG2QxJ5RnAOv1EOcEdwUMZDD3BIcKzNq3BJcJLUABBwStrNBtjf3GUGBdLfCtadWMzUz6cDxN/IZQMCvdTBcAIAsli0jOHSJeSAqmlhNr0awo7RJ19TJORqdAXVEEVZyjyKtE3Bg3oZE2iK8oeiKkFZGiCaggelSTiA2LhxiZLBSjZjBL2siNBOFQ84LxHA+mYEiRJzBO7ZCQIAIfkECQoAAAAsAAAAAB8AHwAABv9AgHBIFAwIBQPAUCAMBMSodHhAJK5XAPaKOEynCsIWqx0nCIrvcMEwZ90JxkINaMATZXfju9jf82YAIQxRCm14Ww4PChAAEAoPDlsAFRUgHkRiZAkREmoSEXiVlRgfQgeBaXRpo6MOQlZbERN0Qx4drRUcAAJmnrVDBrkVDwNjr8BDGxq5Z2MPyUQZuRgFY6rRABe5FgZjjdm8uRTh2d5b4NkQY0zX5QpjTc/lD2NOx+WSW0++2RJmUGJhmZVsQqgtCE6lqpXGjBchmt50+hQKEAEiht5gUcTIESR9GhlgE9IH0BiTkxrMmWIHDkose9SwcQlHDsOIk9ygiVbl5JgMLuV4HUmypMkTOkEAACH5BAkKAAAALAAAAAAfAB8AAAb/QIBwSBQMCAUDwFAgDATEqHR4QCSuVwD2ijhMpwrCFqsdJwiK73DBMGfdCcZCDWjAE2V347vY3/NmdXNECm14Ww4PChAAEAoPDltlDGlDYmQJERJqEhGHWARUgZVqaWZeAFZbERN0QxOeWwgAAmabrkMSZkZjDrhRkVtHYw+/RA9jSGOkxgpjSWOMxkIQY0rT0wbR2LQV3t4UBcvcF9/eFpdYxdgZ5hUYA73YGxruCbVjt78G7hXFqlhY/fLQwR0HIQdGuUrTz5eQdIc0cfIEwByGD0MKvcGSaFGjR8GyeAPhIUofQGNQSgrB4IsdOCqx7FHDBiYcOQshYjKDxliVDpRjunCjdSTJkiZP6AQBACH5BAkKAAAALAAAAAAfAB8AAAb/QIBwSBQMCAUDwFAgDATEqHR4QCSuVwD2ijhMpwrCFqsdJwiK73DBMGfdCcZCDWjAE2V347vY3/NmdXNECm14Ww4PChAAEAoPDltlDGlDYmQJERJqEhGHWARUgZVqaWZeAFZbERN0QxOeWwgAAmabrkMSZkZjDrhRkVtHYw+/RA9jSGOkxgpjSWOMxkIQY0rT0wbR2I3WBcvczltNxNzIW0693MFYT7bTumNQqlisv7BjswAHo64egFdQAbj0RtOXDQY6VAAUakihN1gSLaJ1IYOGChgXXqEUpQ9ASRlDYhT0xQ4cACJDhqDD5mRKjCAYuArjBmVKDP9+VRljMyMHDwcfuBlBooSCBQwJiqkJAgAh+QQJCgAAACwAAAAAHwAfAAAG/0CAcEgUDAgFA8BQIAwExKh0eEAkrlcA9oo4TKcKwharHScIiu9wwTBn3QnGQg1owBNld+O72N/zZnVzRApteFsODwoQABAKDw5bZQxpQ2JkCRESahIRh1gEVIGVamlmXgBWWxETdEMTnlsIAAJmm65DEmZGYw64UZFbR2MPv0QPY0hjpMYKY0ljjMZCEGNK09MG0diN1gXL3M5bTcTcyFtOvdzBWE+207pjUKpYrL+wY7MAB4EerqZjUAG4lKVCBwMbvnT6dCXUkEIFK0jUkOECFEeQJF2hFKUPAIkgQwIaI+hLiJAoR27Zo4YBCJQgVW4cpMYDBpgVZKL59cEBhw+U+QROQ4bBAoUlTZ7QCQIAIfkECQoAAAAsAAAAAB8AHwAABv9AgHBIFAwIBQPAUCAMBMSodHhAJK5XAPaKOEynCsIWqx0nCIrvcMEwZ90JxkINaMATZXfju9jf82Z1c0QKbXhbDg8KEAAQCg8OW2UMaUNiZAkREmoSEYdYBFSBlWppZl4AVlsRE3RDE55bCAACZpuuQxJmRmMOuFGRW0djD79ED2NIY6TGCmNJY4zGQhBjStPTFBXb21DY1VsGFtzbF9gAzlsFGOQVGefIW2LtGhvYwVgDD+0V17+6Y6BwaNfBwy9YY2YBcMAPnStTY1B9YMdNiyZOngCFGuIBxDZAiRY1eoTvE6UoDEIAGrNSUoNBUuzAaYlljxo2M+HIeXiJpRsRNMaq+JSFCpsRJEqYOPH2JQgAIfkECQoAAAAsAAAAAB8AHwAABv9AgHBIFAwIBQPAUCAMBMSodHhAJK5XAPaKOEynCsIWqx0nCIrvcMEwZ90JxkINaMATZXfjywjlzX9jdXNEHiAVFX8ODwoQABAKDw5bZQxpQh8YiIhaERJqEhF4WwRDDpubAJdqaWZeAByoFR0edEMTolsIAA+yFUq2QxJmAgmyGhvBRJNbA5qoGcpED2MEFrIX0kMKYwUUslDaj2PA4soGY47iEOQFY6vS3FtNYw/m1KQDYw7mzFhPZj5JGzYGipUtESYowzVmF4ADgOCBCZTgFQAxZBJ4AiXqT6ltbUZhWdToUSR/Ii1FWbDnDkUyDQhJsQPn5ZU9atjUhCPHVhgTNy/RSKsiqKFFbUaQKGHiJNyXIAAh+QQJCgAAACwAAAAAHwAfAAAG/0CAcEh8JDAWCsBQIAwExKhU+HFwKlgsIMHlIg7TqQeTLW+7XYIiPGSAymY0mrFgA0LwuLzbCC/6eVlnewkADXVECgxcAGUaGRdQEAoPDmhnDGtDBJcVHQYbYRIRhWgEQwd7AB52AGt7YAAIchETrUITpGgIAAJ7ErdDEnsCA3IOwUSWaAOcaA/JQ0amBXKa0QpyBQZyENFCEHIG39HcaN7f4WhM1uTZaE1y0N/TacZoyN/LXU+/0cNyoMxCUytYLjm8AKSS46rVKzmxADhjlCACMFGkBiU4NUQRxS4OHijwNqnSJS6ZovzRyJAQo0NhGrgs5bIPmwWLCLHsQsfhxBWTe9QkOzCwC8sv5Ho127akyRM7QQAAOwAAAAAAAAAAAA==" border="0">
<br/>YOUR_APPLICATION is being updated.<br/><br/>
<small>If this page does not refresh automatically, <a href="/">please click here</a>.
</small></div></body></html> 
```

（长 data-URI 是一个动画微调器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:40:18.363

您应该检查您的 logs/system.log 文件，看看是否有一些异常会阻止您的 play 应用程序启动

# php - 序列化数组并通过get方法传递它的最佳方法是什么

> ID：11199267
> 
> 赞同：2
> 
> 时间：2012-06-26T00:29:36.793
> 
> 标签：php, jquery, ajax, codeigniter, history.js

所以我使用 ajax 请求来传递一些数据以进行过滤。

然后我使用history.js，这样我就可以更改url并向浏览器添加状态，从而可以返回、前进等。这样，我可以使用ajax请求或普通请求过滤我的数据。到现在为止还挺好。

我的问题是，在我通过 ajax 请求传递的数据中有一个数组：

```
function updateContent(url, state) {
    $.ajax({
        type: 'GET',
        data: {name: state.filter_name, num: state.filter_number, 
            data: state.filter_data, array: state.filter_array},
        url: url,
        success: function(msg) {
                $('#ajax').html(msg);
        }
    }); 

} 
```

这将向此 URL 发出请求：

```
http: //localhost/Project/Controller/?filter_array%5B%5D=1&filter_array%5B%5D=50&filter_array%5B%5D=70. 
```

我想将此网址传递给 history.pushstate

如果我使用 jsenconde 然后手动构建 url，则 url 会略有不同，类似于：

```
http://localhost/Project/Controller/?filter_array=["1","50","70"] 
```

虽然它更干净，但我在某处读到你不应该在 url 中使用 [] 但即使我使用这种方式，我也会得到两种类型的 GET url，即 ajax URL？`filter_array%5B%5D=1&filter_array%5B%5D=50&filter_array%5B%5D=70.`和 json 网址`?filter_array=["1","50","70"]`。

所以我只需要一个解决方案，让我只有一种类型的 GET url，所以我可以使用相同的 url 到 ajax 和正常请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:34:29.043

传递值数组的标准方法是使用`[]`'s 重复传递名称（url 编码），如您的第一个示例所示。

您需要以符合此要求的方式生成您的 URL...

```
filter_array[]=1&filter_array[]=2&filter_array[]=3 
```

当然，正如您所展示的那样编码....

```
filter_array%5B%5D=1&filter_array%5B%5D=2&filter_array%5B%5D=3 
```

如果您坚持使用这种格式，您的代码将更加可移植（例如，ASP.Net 会像许多 PHP 库一样自动执行到 List 的转换）。

有什么原因您不能以这种格式生成网址吗？

这里的区别是一个是使用标准格式编码，另一个是转换JSON

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:34:39.850

jQuery 对 JSON 对象进行 URL 编码，因此没有非法字符。如果您想使用 javascript 检索该 GET 变量，则必须从 URL 中提取数据，对其进行 URL 解码，然后使用 JSON.parse() 将其转换回 JavaScript 对象。

[http://www.w3schools.com/jsref/jsref_encodeuri.asp](http://www.w3schools.com/jsref/jsref_encodeuri.asp)

# r - R立即（管道？）函数输出的逻辑索引？

> ID：11199269
> 
> 赞同：0
> 
> 时间：2012-06-26T00:29:41.237
> 
> 标签：r, indexing

在 R 中，是否可以对函数的输出执行“立即”逻辑索引？

为了澄清这个有点模糊的问题，这里有一个小例子，我相信很多人以前都遇到过类似的例子。假设我们有一个向量“数据”，如下所示：

```
data <- c(1,1,3,5,6,6,8,10,14,15,15,20) 
```

如果我们现在对这个向量应用函数“制表”，结果将是：

```
tabulate(data)
 [1] 2 0 1 0 1 2 0 1 0 1 0 0 0 1 2 0 0 0 0 1 
```

但是，通常希望只访问向量的那些（在这种情况下）非零的条目，传统上会这样做（我猜......）：

```
tabulate(data)[tabulate(data) != 0]
[1] 2 1 1 2 1 1 1 2 1 
```

但是，在这种情况下，“tabulate(data)”需要计算两次，这显得效率低下甚至浪费；至少，它绝对不优雅。同样，将“tabulate(data)”的结果存储在临时变量中可以如果使用大型数据集会很麻烦。

我现在的问题很简单：是否存在针对此类问题的简单、更优雅（语法）的解决方法？像一个“神奇的”direct.index 函数可以完成这项工作吗？像这样，

```
direct.index(tabulate.data, condition='!= 0') 
```

...这基本上会丢弃所有在计算时已经不满足索引条件的值，从而使整个过程更快更高效。

为简单起见，此处给出了从“表格”结果中去除零的具体问题；事实上，我在很多不同的情况下都对此感到头疼。也许我也只是对 R 有一些基本的误解......

顺便说一句，我已经研究过“？subset”，但这似乎不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T01:42:46.780

手写函数的一个版本

```
direct.index <- function(x, condition, value){
  index <- eval(call(condition, x, value))
  x[which(index)]
}

direct.index(tabulate(data), '!=', 0)
## [1] 2 1 1 2 1 1 1 2 1 
```

但是，我认为您正在寻找功能`table`

```
table(data)
## data
## 1  3  5  6  8 10 14 15 20 
## 2  1  1  2  1  1  1  2  1 
```

# ios - 在 iOS 上，哪个视图元素应该像单选按钮？

> ID：11199280
> 
> 赞同：2
> 
> 时间：2012-06-26T00:31:45.617
> 
> 标签：ios, ios5

> **可能重复：**
> [IOS 的最佳单选按钮实现](https://stackoverflow.com/questions/4847296/best-radio-button-implementation-for-ios)

我正在查看我的故事板并尝试选择单选按钮，但我没有看到任何类似于单选按钮的东西。哪个 ui 元素是为了在 ios 中做到这一点？

我看到了选择器视图，但我认为这不等同于单选按钮。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T00:44:16.997

这通常通过使用分组表视图来处理，并在所选项目旁边放置一个复选标记。

例如，打开设置应用程序并转到常规，然后转到自动锁定。您会看到一个选择列表；选定的将有一个复选标记。点击其中任何一个都会移动支票。

您可以使用情节提要来设置表格视图，并使用一些自定义代码来切换复选标记，从而相当容易地做到这一点。

# java - 在 IntelliJ 的库 jar 中设置断点

> ID：11199282
> 
> 赞同：3
> 
> 时间：2012-06-26T00:32:06.893
> 
> 标签：java, debugging, intellij-idea

我正在尝试在添加到我的 Griffon 项目中的第 3 方库的方法中设置断点。在调试期间，断点被标记为 X，工具提示通知我“未找到可执行代码”。我还尝试在源代码中的方法调用之前设置断点并单步执行，但这也无法单步执行库源代码。

我将库附加为带有源目录的 jar，并设置为在 Project Structure->Modules->Dependencies 中导出。我正在使用 IntelliJ 11。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:57:44.017

单击开源编辑器的边缘似乎对我有用。不过，这不是我第一次尝试。重新启动似乎可以清除它。

# logging - 使用辅助角色 azure 解析 iis 日志

> ID：11199284
> 
> 赞同：2
> 
> 时间：2012-06-26T00:32:12.077
> 
> 标签：logging, azure, azure-table-storage, logparser, azure-diagnostics

在独立的托管环境中。我们使用“计划服务+powershell+日志解析器”将iis日志记录导出到目标数据库，并获取业务部门的所有统计信息。爱。

但是，对于 Azure，我不确定这是否是正确的做法。

我看到人们正在将 iis 日志导出到 azure 存储中。但是我们不想下载日志文件然后将它们从另一台服务器或本地机器导出到数据库中

我想知道是否有人更进一步，即通过工作角色将 iis 日志导出到 azure 存储表（使其可查询）？

如果有人这样做或知道任何可用的解决方案，请传递链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T05:41:45.277

您是否要求通过首先从 Azure Blob 存储读取来分析 IIS 日志，然后通过辅助角色以某种易于阅读/查询的格式传输到 Azure 表存储？如果您可以在这方面添加更多内容以使其清楚，那就太好了。

我个人认为，如果您编写一个工作角色来处理存储的 IIS 日志，那么为此目的运行一个工作角色将是非常昂贵的，这就是为什么这不是标准做法的原因。大多数第 3 方工具从 Azure blob 存储（***wad-iis-failedreqlogfiles****和**wad-iis-logfiles**容器*）下载日志并在本地进行分析，而且成本很低。

这是一个旧的命令行示例，用于使用**logparser**[从 Windows Azure 下载和解析 IIS 日志](http://visitmix.com/LabNotes/Downloading-and-Parsing-IIS-Logs-from-Windows-Azure)（*不包括保存到 Azure 表存储*），因此您可以确定可以将其放在一个辅助角色中，然后添加更多代码以将您的日志保存到Azure 表存储。

# hibernate - Hibernate批量插入单向一对多集合

> ID：11199285
> 
> 赞同：0
> 
> 时间：2012-06-26T00:32:25.037
> 
> 标签：hibernate, hibernate-mapping, batch-processing

我有`ItemList`一个包含一组这样的`Items`映射的类：

```
<class name="ItemList">
   <id name="PID" column="PID">
      <generator class="uuid" />
   </id>
   <version name="Version" />
   <set cascaed="save-update" name="Items">
      <key column="itemlist_id" />
      <one-to-many class="Item" />
   </set>
</class>

<class name="Item">
   <id name="PID" column="PID">
      <generator class="uuid" />
   </id>
   ...
</class> 
```

这是一个单向关联。我需要批量插入 1000 个`Items`到`ItemList`. 在批量插入上使用休眠文档，我有这样的事情：

```
ItemList itemList = ...

int i = 0;
for (Item item : someItems) {
    // .. some processing..

    itemList.getItems().add(item);

    if (++i % 30 == 0) {
       session.update(itemList);
       session.flush();
       session.clear();
    }
} 
```

显然存在一些问题。每次刷新时，插入 30 个项目。然后更新 ItemList 的版本。然后用 ItemList 的 PID 更新所有 30 个 Item。

1.  如何避免在每批之后增加 ItemList 版本？
2.  如何避免 30 次更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:52:49.670

1.  对不起，不能帮助你（但你为什么在乎？）。

2.  你的意思是每30个项目更新一次？您也不想...除非您愿意冒内存不足的风险，因为所有数千个`Item`s 都存储在会话级缓存中。

3.  它之所以有效，是因为作为状态的[文档](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/Session.html#flush%28%29)`Session.flush()`：

> *刷新*是将底层持久存储与内存中保存的持久状态同步的过程。

因此，在冲洗完最后 30 个项目之后，它们就在 DB 端了。**然而**，这并不意味着他们*承诺*。数据库知道您正处于尚未提交的事务中间。

**编辑**

也许我现在意识到为什么版本在每个`flush`. 我在这里推测。Hibernate 使用该`version`列来验证，因为事务已经开始，没有其他事务更改了当前事务修改的实体。但此验证仅代表 Hibernate 完成，不使用任何数据库固有功能。我认为这是真的，因为版本表的 DDL 显示该`version`列是普通的`int`（这也是有道理的，因为 Hibernate 是一个跨 DB 供应商的 API，但 OTOH 他们可以为每个供应商提供特定的工具）。因此，就在刷新之前，Hibernate 有最后一次机会来验证刷新的实体不是陈旧的数据。刷新后，这些更新的实体不再被标记为更新，因此未来的刷新，即使在同一个事务中，也不会触发版本验证事件。

# html - 使用 iframe 自动打开外部链接？

> ID：11199286
> 
> 赞同：1
> 
> 时间：2012-06-26T00:32:27.750
> 
> 标签：html, wordpress, iframe

我正在开发一个拥有很多作者的 WordPress 网站。这些故事通常包含外部链接，我正在寻找一种方法，我们可以自动打开外部链接，并带有一个带有“返回我们的网站”链接和关闭按钮的小标题。

理想情况下，这将自动完成，但我们还希望能够手动创建链接，这些链接在与我们的标题相同的 iframe 中打开。我该如何设置呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:19:00.430

我建议你通过 Javascript 构建它，这样你就可以根据需要轻松地关闭/打开它，它也是一种便携的，你也可以在其他站点上使用它。

步骤：遍历所有锚链接，如果 href 是外部链接，则添加属性 target 空白，并更改 href 链接

```
 if(external_link){
   a.target = '_blank';
   a.href="http://example-ownsite.com/iframe_holder/?page="  + a.href;
 } 
```

然后查看我在[http://fedmich.com/works/odesk/](http://fedmich.com/works/odesk/)上的页面， 以便您可以在 iframed 页面上提供垂直滚动条。我在那里使用了一个名为 resizeIframe() 的函数

注意：有些网站不想放置在 iframe 中，它们会脱离 topframe。

# windows - 使用 Perl，如何获取 Windows 任务栏通知区域的图标信息？

> ID：11199287
> 
> 赞同：1
> 
> 时间：2012-06-26T00:32:39.200
> 
> 标签：windows, perl, system-tray

我正在尝试用 Perl 编写一个脚本来读取系统托盘中的所有图标，获取它们的坐标并找出它们的所有者。我非常想在[这里翻译这段代码](http://www.codeproject.com/Articles/3694/CTrayIconPosition-where-is-my-tray-icon)。

到目前为止，这是我的代码：

```
use strict;
use warnings;

use Win32::API;
use Win32::OLE qw(in);
use Data::Dumper;

use constant wbemFlagReturnImmediately => 0x10;
use constant wbemFlagForwardOnly       => 0x20;

use constant SYNCHRONIZE => 0x00100000;
use constant STANDARD_RIGHTS_REQUIRED => 0x000F0000;
use constant PROCESS_ALL_ACCESS => (STANDARD_RIGHTS_REQUIRED | SYNCHRONIZE | 0xFFF);

my $TB_BUTTONCOUNT     = 0x0418;
my $TB_GETBUTTONTEXT   = 0x041B;
my $TB_GETBUTTONINFO   = 0x0441;
my $TB_GETITEMRECT     = 0x041D;
my $TB_GETBUTTON       = 0x0417;

sub get_windows_details {
    my ($self) = @_;
    my $ret;

    my $objWMIService =
      Win32::OLE->GetObject("winmgmts:\\\\localhost\\root\\CIMV2")
      or die "WMI connection failed.\n";
    my $colItems =
      $objWMIService->ExecQuery("SELECT * FROM Win32_OperatingSystem",
                               "WQL",
                               wbemFlagReturnImmediately | wbemFlagForwardOnly);

    my $objItem;
    foreach $objItem (in $colItems) {
        $ret->{'osname'} = $objItem->{Caption};
    }

    $colItems =
      $objWMIService->ExecQuery("SELECT * FROM Win32_Processor",
                               "WQL",
                               wbemFlagReturnImmediately | wbemFlagForwardOnly);

    foreach $objItem (in $colItems) {
        $ret->{'osbit'} = $objItem->{AddressWidth};
    }

    return $ret;
}

sub get_autoit_tray_handle {
    my $autoit = Win32::OLE->new("AutoItX3.Control")
        or return 0;
    my $tray_hwnd = $autoit->ControlGetHandle("[Class:Shell_TrayWnd]", "", "[Class:ToolbarWindow32;Instance:1]");
    return hex $tray_hwnd;
}

sub get_tray_icon_count {
    #my $hWnd = get_tray_handle(); 
    my $hWnd = get_autoit_tray_handle(); 
    my $send_message = Win32::API->new("user32", "SendMessage", "NNII", "I");
    return $send_message->Call($hWnd, $TB_BUTTONCOUNT, 0, 0);
}

# Randomly chosen icon index.
my $iIndex = 6;

my $os = get_windows_details();
if ($os->{'osbit'} == 64) {
    Win32::API::Struct->typedef('TBBUTTON', qw { int       iBitmap;
                                                 int       idCommand;
                                                 BYTE      fsState;
                                                 BYTE      fsStyle;
                                                 BYTE      bReserved[6];
                                                 DWORD_PTR dwData;
                                                 INT_PTR   iString;
                                               }
                                ) or die "Typedef error $!\n";
} else {
    Win32::API::Struct->typedef('TBBUTTON', qw { int       iBitmap;
                                                 int       idCommand;
                                                 BYTE      fsState;
                                                 BYTE      fsStyle;
                                                 BYTE      bReserved[2];
                                                 DWORD_PTR dwData;
                                                 INT_PTR   iString;
                                               }
                                ) or die "Typedef error $!\n";
}

# Get tray handle & it's proc id
my $tb_button = Win32::API::Struct->new('TBBUTTON');
my $tray_hwnd = get_autoit_tray_handle();
print "tray hwnd: $tray_hwnd\n";
my $window_thread_proc_id = Win32::API->new('user32', "GetWindowThreadProcessId", 'LP', 'N');
my $lpdwPID = pack 'L', 0;
my $pid = $window_thread_proc_id->Call($tray_hwnd, $lpdwPID);
my $dwPID = unpack 'L', $lpdwPID;
print "proc id: $dwPID\n";

# read the tray process memory to get the tray button info
my $open_process = Win32::API->new('kernel32', 'OpenProcess', 'NIN', 'N') || die $!;
my $proc_hwnd = $open_process->Call(PROCESS_ALL_ACCESS, 0, $dwPID);
print "proc hwnd: $proc_hwnd\n";

my $virtual_alloc = Win32::API->new('kernel32', 'VirtualAllocEx', 'NNLNN', 'N');
my $lp_data = $virtual_alloc->Call($proc_hwnd, 0, $tb_button->sizeof(), 0x1000, 0x04);
print "Error allocating memory: $!\n" if $!;
print "Allocated addresss: $lp_data\n";

my $send_message = Win32::API->new('user32', 'SendMessage', 'NNIN','I');
my $get_button_status = $send_message->Call($tray_hwnd, $TB_GETBUTTON, $iIndex, $lp_data);
print "TB_GETBUTTON Status: $get_button_status\n";

my $read_process = Win32::API->new('kernel32', 'ReadProcessMemory', 'NNSNP','I');
my $bytes_read = pack 'L', 0;
$read_process->Call($proc_hwnd, $lp_data, $tb_button, $tb_button->sizeof(), $bytes_read);
print "dwData: $tb_button->{'dwData'} \n"; 
```

我正在使用 autoit COM DLL 来获取系统托盘句柄。一旦我有了托盘句柄，我就尝试获取它的进程 ID，然后读取进程内存以获取[TBBUTTON 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760476%28v=vs.85%29.aspx)，其定义如下：

```
if ($os->{'osbit'} == 64) {
    Win32::API::Struct->typedef('TBBUTTON', qw { int       iBitmap;
                                                 int       idCommand;
                                                 BYTE      fsState;
                                                 BYTE      fsStyle;
                                                 BYTE      bReserved[6];
                                                 DWORD_PTR dwData;
                                                 INT_PTR   iString;
                                               }
                                ) or die "Typedef error $!\n";
} else {
    Win32::API::Struct->typedef('TBBUTTON', qw { int       iBitmap;
                                                 int       idCommand;
                                                 BYTE      fsState;
                                                 BYTE      fsStyle;
                                                 BYTE      bReserved[2];
                                                 DWORD_PTR dwData;
                                                 INT_PTR   iString;
                                               }
                                ) or die "Typedef error $!\n";
} 
```

当您执行上述代码时，至少在我的系统上，这是我看到的输出：

```
tray hwnd: 401922
proc id: 11040
proc hwnd: 704
Allocated addresss: 32702464
TB_GETBUTTON Status: 1
dwData: 10293610267052867588 
```

如您所见 - “dwData”似乎是错误的。看起来我在这里做错了什么：

```
my $read_process = Win32::API->new('kernel32', 'ReadProcessMemory', 'NNSNP','I');
my $bytes_read = pack 'L', 0;
$read_process->Call($proc_hwnd, $lp_data, $tb_button, $tb_button->sizeof(), $bytes_read);
print "dwData: $tb_button->{'dwData'} \n"; 
```

关于我在那里做错的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:12:38.517

我决定尽量减少你所引入的各种事物所带来的不确定性，并且只使用[Win32::GuiTest](http://search.cpan.org/perldoc/Win32%3a%3aGuiTest)提供的功能。我还在位数和结构方面作弊，以便在我的 32 位 WinXP SP3 笔记本电脑上运行某些东西。这是运行并产生一些输出的东西。

我不确定这是否是正确的输出，但它至少应该为您指明一个更简单的方向：

```
#!/usr/bin/env perl

use feature 'say';
use strict; use warnings;

use Const::Fast;
use Devel::CheckOS;
use Win32::GuiTest qw(
    AllocateVirtualBuffer
    FreeVirtualBuffer
    ReadFromVirtualBuffer
    FindWindowLike
    SendMessage
);

use YAML;

const my %TB => (
    BUTTONCOUNT => 0x0418,
    GETBUTTONTEXT => 0x041B,
    GETBUTTONINFO => 0x0441,
    GETITEMRECT => 0x041D,
    GETBUTTON => 0x0417,
);

const my %TBUTTON => (
    32 => 'iiCCCCLL',
    64 => 'iiCCCCCCCCLL',
);

my ($tray_handle) = FindWindowLike(undef, undef, 'TrayNotifyWnd');

my ($toolbar_handle) = FindWindowLike($tray_handle, undef, 'ToolbarWindow');

say for ($tray_handle, $toolbar_handle);

my $button_count = SendMessage($toolbar_handle, $TB{BUTTONCOUNT}, 0, 0);

unless (defined($button_count) and $button_count > 0) {
    die "Can't find buttons\n"
}

my $buf = AllocateVirtualBuffer($toolbar_handle, 0x20);

print Dump $buf;

my $index = int(rand $button_count);

say "Trying button = $index\n";

my $status = SendMessage(
    $toolbar_handle,
    $TB{GETBUTTON},
    $index,
    $buf->{ptr}
);

say "TB_GETBUTTON status = $status";

my $result = ReadFromVirtualBuffer($buf, 0x20);

FreeVirtualBuffer($buf);

print Dump [ map sprintf('%X', $_), unpack $TBUTTON{32}, $result ]; 
```

此外，并不是说您应该在一个地方并且只定义一次诸如[Win32::API函数和结构之类的东西。](http://search.cpan.org/perldoc/Win32%3a%3aAPI)

样本输出：

```
655544
393294
---
过程：1920
指针：28835840
尝试按钮 = 19

TB_GETBUTTON 状态 = 1
---
- 7
- 9
- C
- 0
- 0
- 0
- 1DA23C8
- 2B70590
```

# asp.net-mvc-3 - 使用 ViewModel 时在 HttpPost 操作期间收到 NullReference 异常错误

> ID：11199297
> 
> 赞同：0
> 
> 时间：2012-06-26T00:34:21.980
> 
> 标签：asp.net-mvc-3, viewmodel, nullreferenceexception

我正在尝试使用 ViewModel 创建我认为非常简单的表单提交。我整天都在处理这个问题，由于某种原因，我无法理解为什么当我的应用程序进入我的 HttpPost 操作时，我的 EmailViewModel 是空的。我收到“发生 NullReference 异常”“对象引用未设置为对象的实例”错误。

你能看看我的代码并告诉我我在哪里发疯了吗？

这是我的 httpPost 操作：

```
[HttpPost]
public ActionResult SendStudentAnEmail(EmailViewModel email)
{
        Debug.Write(email.Subject); // First NullReferenceException
        Debug.Write(email.Body);
        Debug.Write(email.Email);
        etc. . . 
```

我的视图模型：

```
namespace MyApp.ViewModels
{
    public class EmailViewModel
    {
        public string Email { get; set; }

        public string Subject { get; set; }

        public string Body { get; set; }
    }
} 
```

和我的观点：

```
@model MyApp.ViewModels.EmailViewModel

@{
    ViewBag.Title = "SendStudentAnEmail";
}

<h2>SendStudentAnEmail</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>EmailViewModel</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Email)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Email)
            @Html.ValidationMessageFor(model => model.Email)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Subject)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Subject)
            @Html.ValidationMessageFor(model => model.Subject)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Body)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Body)
            @Html.ValidationMessageFor(model => model.Body)
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

谢谢你。

*****更新*****

 **如果我将 HttpPost 操作更改为使用 FormCollection，我可以很好地使用这些值，我什至可以将 FormCollection 值重新转换回我的 EmailViewModel。为什么是这样？

```
[HttpPost]
public ActionResult SendStudentAnEmail(FormCollection emailFormCollection)
{
        Debug.Write(emailFormCollection["email"]);
        Debug.Write(emailFormCollection["subject"]);
        Debug.Write(emailFormCollection["body"]);
    var email = new EmailViewModel
                        {
                            Email = emailFormCollection["email"],
                            Subject = emailFormCollection["subject"],
                            Body = emailFormCollection["body"]
                        };
. . . . then the rest of my code works just how I wanted. . . 
```

为什么我必须从 FormCollection 转换到我的 EmailViewModel？如果我尝试简单地将 EmailViewModel 推送到我的操作中，为什么它不给我 NullReference 异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:11:58.027

您的`EmailViewModel`类有一个称为`Email`字符串类型的属性。并且您的控制器操作需要一个名为`email`type的参数`EmailViewModel`。这会混淆默认模型绑定器。因此，要么重命名视图模型中的属性，要么重命名 action 参数：

```
[HttpPost]
public ActionResult SendStudentAnEmail(EmailViewModel model)
{
    Debug.Write(model.Subject);
    Debug.Write(model.Body);
    Debug.Write(model.Email);
    ...
} 
```**

# hibernate - Hibernate -- 向侦听器实例发送上下文破坏事件的异常

> ID：11199305
> 
> 赞同：1
> 
> 时间：2012-06-26T00:35:30.210
> 
> 标签：hibernate, configuration, listener

我有一个配置监听器，当用户点击应用程序时，它会创建一个 Hibernate 会话。我从 contextDestroyed 方法中得到一个错误。谁能帮我这个？这是导致问题的方法。

```
public void contextDestroyed(ServletContextEvent arg0) {
    this.sessionFactory.close();
} 
```

这是我控制台上的错误消息。

```
SEVERE: Exception sending context initialized event to listener instance of class com.configuration.ConfigurationListener
java.lang.NoClassDefFoundError: org/apache/commons/collections/SequencedHashMap
    at org.hibernate.mapping.Table.<init>(Table.java:32)
    at org.hibernate.cfg.Mappings.addTable(Mappings.java:120)
    at org.hibernate.cfg.HbmBinder.bindRootPersistentClassCommonValues(HbmBinder.java:251)
    at org.hibernate.cfg.HbmBinder.bindRootClass(HbmBinder.java:236)
    at org.hibernate.cfg.HbmBinder.bindRoot(HbmBinder.java:152)
    at org.hibernate.cfg.Configuration.add(Configuration.java:362)
    at org.hibernate.cfg.Configuration.addInputStream(Configuration.java:400)
    at org.hibernate.cfg.Configuration.addResource(Configuration.java:449)
    at org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:1263)
    at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1235)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1217)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1184)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1112)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1098)
    at com.configuration.ConfigurationListener.contextInitialized(ConfigurationListener.java:19)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3830)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4337)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:516)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:566)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.collections.SequencedHashMap
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1358)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1204)
    ... 30 more
Jun 25, 2012 5:21:59 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
Jun 25, 2012 5:21:59 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [/ghs1986] startup failed due to previous errors
Jun 25, 2012 5:21:59 PM org.apache.catalina.core.StandardContext listenerStop
SEVERE: Exception sending context destroyed event to listener instance of class com.configuration.ConfigurationListener
java.lang.NullPointerException
    at com.configuration.ConfigurationListener.contextDestroyed(ConfigurationListener.java:25)
    at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:3869)
    at org.apache.catalina.core.StandardContext.stop(StandardContext.java:4503)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4367)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:516)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:566)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T01:29:29.963

主要问题不在`contextDestroy`方法上。问题出在您的类路径中。您在类路径中缺少[apache commons collections](http://commons.apache.org/collections/) jar。Hibernate 依赖于它并且失败了

`java.lang.ClassNotFoundException: org.apache.commons.collections.SequencedHashMap`.

`contextDestoryed`这会导致稍后调用侦听器的方法。该方法，尝​​试`close()`其`sessionFactory`. 但是`sessionFactory`由于上述原因，Hibernate 从未弥补过，因此从未初始化过`ClassNotFoundException`。

这一切都写在粘贴的控制台日志中。

# c++ - 从模板参数中去除 boost::shared_ptr

> ID：11199308
> 
> 赞同：0
> 
> 时间：2012-06-26T00:35:50.603
> 
> 标签：c++, boost, shared-ptr

我正在开发一个 C++ 模板库，它使用存储在 boost::shared_ptr 中的原始类型和指针类型。我遇到了一个帮助类的问题，该类用于在必要时将原始类型打包到容器类中，然后再传递到库的较低层。下面显示了只传递指针的基本类型，以及作为原语之一的 std::string 的实现。

```
template <class T> class RRPrimUtil 
{ 
public:
    static rr_DataType GetTypeID() {return rr_void_t;} 

    static boost::shared_ptr<RRObject> PrePack(T val)     {return rr_cast<RRObject>(val);} 

    static T PreUnpack(boost::shared_ptr<RRObject> val) {return rr_cast<T>(val);} 
};

template<> class RRPrimUtil<std::string>
{
public:
    static rr_DataType GetTypeID() {return rr_string_t;} 
    static boost::shared_ptr<RRObject> PrePack(std::string val) {return rr_cast<RRObject>(stringToRRArray(val));} 
    static std::string PreUnpack(boost::shared_ptr<RRObject> val) {return RRArrayToString(rr_cast<RRArray<char>>(val));} 

}; 
```

rr_cast<>() 函数是 dynamic_pointer_cast 的别名。我遇到的问题是，对于一般情况，模板“T”包含“boost::shared_ptr”前缀，因为这种类型可能会或可能不会与 shared_ptr 交互。前缀弄乱了 dynamic_pointer_cast，因为它只需要指针类型。有没有一种干净的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T00:40:04.503

模板元功能将为您剥离：

```
template<typename T> struct primitive_type
{
    typename T type;
};

template<typename T> struct primitive_type< boost::shared_ptr< T > >
{
    typename T* type;
}; 
```

如果传递给它的类型是`boost::shared_ptr< T >`它将返回的形式`T*`；否则它将返回它被实例化的类型。

# amazon-s3 - 正确的服务器架构以在 Amazon Web Services 中上传图片

> ID：11199310
> 
> 赞同：0
> 
> 时间：2012-06-26T00:36:04.570
> 
> 标签：amazon-s3, amazon-ec2

我想通过 iPhone 将图片上传到 AWS s3。每个用户都应该能够上传图片，但他们必须对每一张图片保持私密。

我的问题很简单。由于我没有真正的服务器经验，我想知道以下两种方法中哪一种更好。

1) 使用某种令牌自动售货机系统授予用户访问 AWS s3 数据库的权限以直接上传。

2) 将图片发送到 EC2 Servlet 并让虚拟服务器将其放置在 S3 存储上。

编辑：我还需要检索，我应该直接还是通过 servlet 进行检索？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:07:06.017

考虑后一种解决方案的另一个重要点

在亚马逊生态系统中处理负载和网络速度方面的高性能。对于直接上传，客户端将不得不处理分段上传等复杂的异步操作，而不是专注于图像的呈现和渲染。

托管在 EC2 上的 servlet 将比您在手机上执行的功能强大得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T01:28:32.390

嘿，我个人认为使用令牌自动售货机通过iPhone直接上传数据不是一个好主意，因为控制访问权限等要困难得多。如果你有机会使用ec2和servlet，但这会为您的解决方案增加成本。

此外，在处理 S3 时，您需要考虑到某些文件在保存后立即不可用。[从 S3 FAQ](http://aws.amazon.com/s3/faqs/#What_data_consistency_model_does_Amazon_S3_employ)中查看这个答案。

要直接从 S3 检索数据，您需要再次处理权限问题。检查 S3 的[访问模型](http://docs.amazonwebservices.com/AmazonS3/latest/dev/UsingAuthAccess.html)，但通过 servlet 管理非公共文件的访问可能更容易。好消息是，在同一区域内的 EC2 和 S3 之间传输的数据不收取数据传输费用。

# html - Wordpress 不断更改我的链接网址

> ID：11199313
> 
> 赞同：1
> 
> 时间：2012-06-26T00:36:29.997
> 
> 标签：html, wordpress, wordpress-theming

出于某种原因，wordpress 编辑器不断将链接更改为 /(post-title)/(post-title)/ 而不是我希望它显示的链接。我今天才开始遇到这个问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:40:46.790

检查您的永久链接设置。在自定义设置中，您可以将其设置为执行此操作。如果那是问题，它看起来像“/%postname%/%postname%/”。

# ios - 放大后的 iOS 文本渲染

> ID：11199315
> 
> 赞同：5
> 
> 时间：2012-06-26T00:36:36.237
> 
> 标签：ios, uiview, render, cgaffinetransform, text-rendering

我编写了一个函数来使用 CGAffineTransformScale 放大 UIView。放大 2 倍后，所有文字看起来都非常模糊。如果图像一开始就具有更高的分辨率，则图像是可以的。有没有办法在放大后以适当的分辨率重新渲染所有文本？

**编辑：** 我找到了我的问题的部分解决方案：http: [//markpospesel.wordpress.com/2012/04/03/on-the-importance-of-setting-contentscalefactor-in-catiledlayer-backed-views/](http://markpospesel.wordpress.com/2012/04/03/on-the-importance-of-setting-contentscalefactor-in-catiledlayer-backed-views/)

> *   (void)didMoveToWindow { self.contentScaleFactor = 2.0; }

通过在 UIView 类别中添加上述方法，UILabel、UIButton 和大多数其他视图现在以高分辨率呈现。但是，这不会影响 UITextView 或 UIWebView。这两个视图中的任何一个中的文本仍然是模糊的。

所以新的问题是，如何在放大后以高分辨率重绘 UITextView 或 UIWebView？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T00:39:59.747

是的。您可以`contentScaleFactor`在 UIView 上设置 以使其以更高分辨率呈现其背景视图。不过，在视网膜设备上要小心；您要确保您的新`contentScaleFactor`产品至少是您的`[[UIScreen mainScreen] scale]`. （我会在你的动画之前设置它，所以它很流畅。）

编辑：要清楚，您可能需要在 2x 缩放示例`contentScaleFactor`中将文本视图本身设置为。`[[UIScreen mainScreen] scale] * 2`

# c++ - 在c ++中添加和减去分数的代码是什么

> ID：11199317
> 
> 赞同：-6
> 
> 时间：2012-06-26T00:36:52.287
> 
> 标签：c++

我写了一个程序来乘、除、加和减分数。我只是想不出加减分数的公式是什么。它会是什么？

到目前为止我的代码：

```
 Fraction subtractFractions(Fraction numDen, Fraction numDen2)
{
Fraction value;
value.numerator=numDen.numerator-numDen2.numerator;
if(numDen.denominator!=numDen2.denominator){
    value.denominator=numDen2.denominator/numDen.denominator;
    value.numerator*=value.denominator;
    value.denominator*=value.denominator;
    value.numerator=numDen.numerator-numDen2.numerator;
}
return value;
} 
```

如您所见..它在函数中..我的加法和减法函数是相同的代码，所以我只发布了一个

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T00:45:38.037

我假设您以 int a、int b 格式存储数字来表示 a/b。要添加，您需要执行以下操作：

```
a1    a2   a1*b2+a2*b1
--  + -- = -----------
b1    b2      b1*b2 
```

减法以同样的方式工作。作为下一步，您应该考虑如何减少分数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T00:46:07.010

```
a/b - c/d = (ad - bc) / bd 
```

然后你需要把它减少到最低限度（如果你关心的话）。

# php - 如何使这个小的 PHP 数组工作？

> ID：11199318
> 
> 赞同：2
> 
> 时间：2012-06-26T00:36:59.360
> 
> 标签：php, arrays, echo

我想了解如何将小字符串存储在数组中并正确输出。在这种情况下，我想在顶部的数组中设置一个两个字母的语言代码，然后稍后以该语言输出一个字符串。

我真的很感谢你的帮助。

我制作的以下代码不起作用，但我正在寻找这样的东西：

```
<?php

// Set the language
$settings = array(
  Language => "en"
);

// Set the strings
$locales = array(
  Installed => array("en", "da"),
  TheString => array("Dog", "Hund")
);

// Do some magic
$lang = $settings["Language"][0];

// Output Dog (or Hund if the language is "da")
echo $lang["TheString"];

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T00:39:19.780

```
$settings = array( 'lanaguage' => 'en');

$locales = array( 
    'en' => array(
        'dog' => 'dog'
    ),
    'da' => array(
        'dog' => 'hund'
    )
);

// You don't need this, but you can get it like so:
$installed_languages = array_keys( $locales); 

echo $locales[ $settings['language'] ]['dog']; 
```

这将输出`dog`if `$settings['language']`is`en`或`hund`if it is `da`。

# php - 两个连接和一个 where - Doctrine2

> ID：11199319
> 
> 赞同：1
> 
> 时间：2012-06-26T00:37:07.937
> 
> 标签：php, doctrine-orm, dql

我在 Doctrine2 中有以下查询。

```
$dql->select('um', 'u', 'r')
                    ->from('AcmeComBundle:UserMenu', 'um')
                    ->join('um.user', 'u')
                    ->join('u.role', 'r')
                    ->where('u.ced = '.$ced); 
```

总是遇到问题，指的是：

```
[Semantical Error] line 0, col 116 near 'XXXXX': Error: 'XXXXX' is not defined. 
```

是`XXXXX`从`$ced`。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T01:29:43.467

您应该使用绑定参数，而不是直接将“$ced”放入 where 语句中。将您的 where 语句更改为：

```
 $dql->where('u.ced = :ced')->setParameter('ced', $ced); 
```

否则，不仅生成的 {D/S}QL 会失效，而且容易受到注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T01:18:27.650

嗯，如果错误仍然存​​在，您可以按照教义 2.1 文档中所述的方式尝试：

```
$em = $this->getEntityManager;
$qb = $em->createQueryBuilder;

$qb->select(array('um', 'u', 'r'))
   ->from('Sdz\BlogBundle\Entity\Article', 'a')
   ->leftJoin('um.user', 'u')
   ->leftJoin('u.role', 'r')
   ->where('u.ced = '.$ced);

$query = $qb->getQuery();
$results = $query->getResult();

return $results; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T01:55:39.413

我真的很傻。

解决方案是：

```
$dql->select('um', 'u', 'r')
                ->from('AcmeComBundle:UserMenu', 'um')
                ->join('um.user', 'u')
                ->join('u.role', 'r')
                ->where("u.ced = '".$ced."'"); 
```

谢谢你们的回答。

# javascript - 将 Div 的大小设置为与其 Child 相同（在孩子加载之前）

> ID：11199320
> 
> 赞同：0
> 
> 时间：2012-06-26T00:37:35.663
> 
> 标签：javascript, jquery, html, css

我有一个父 div `.photo_container`，它包含一个, 并使用它的CSS 属性`img`扩展到它的尺寸。`img``display: inline-block`

**问题：**因为页面上会有很多`.photo_container`div 并且图像需要一些时间来加载，所以在所有`img`加载之前，页面将填充微小的未拉伸 div（具有几个 px 的填充），然后扩展以适应`img`每个一一加载。

是否可以将 div '预拉伸'到正确的大小，以便在其子`img`加载时不必更改其大小？

这是图像加载之前（丑陋！）和之后的样子的说明。

![在此处输入图像描述](../Images/14eeadfea4d42841402e56504e216733.png)

**代码：**

```
<div class="photo_box">
    <img src="..." />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:56:18.597

除非您实际加载图像（在 JS 或 CSS 中），否则无法知道图像尺寸。因此，如果您使用 JS 并动态设置容器尺寸并不重要——您仍然需要先加载图像，因此在一段时间内您将显示“丑陋”的空容器。

因此，将最小尺寸添加到 .photo_container。我看起来至少你所有拇指的宽度是一致的，所以做类似`.photo_container { min-width:100px; min-height:50px }`. 然后为每个图像添加一个 onLoad 回调，该回调将相应地调整父级的大小。

如果您使用 jQuery，请执行以下操作：

```
$('.photo_container img').each(function() {
  $(this).bind('load', function() {
    var w = $(this).width(),
        h = $(this).height();
    $(this).parent('.photo_container').attr({ width: w+'px', height: h+'px' });
  }
}); 
```

# css - 使用 collection_select 选择记录并使用 CSS 进行格式化

> ID：11199322
> 
> 赞同：0
> 
> 时间：2012-06-26T00:37:52.000
> 
> 标签：css, ruby-on-rails-3.2, postgresql-9.0

我的 Rails 3.2.3 表单中有以下 collection_select 逻辑来选择状态并按名称排序。

```
<%= collection_select(:user, :state_id, State.order('name'), :id, :name) %> 
```

我有一个国家模型，其中 ID 在国家模型中。我的用户模型有 country_id 和 state_id。用户属于国家和州。国家有很多用户，也有很多州。国家属于国家。

我只想为特定国家/地区选择州。我想将 User 模型中的 country_id 与 State 模型中的 country_id 匹配。我考虑过使用**State.where('something;).order('name')**。但是我不知道如何为此编写 SQL 代码。我正在使用 PostgreSQL 数据库。我发现的示例是针对其他数据库的。

第二个问题与列表的外观有关。我想更改背景颜色和字体颜色以匹配我网站上的输入字段。我尝试了以下代码，但无法正常工作。

```
<%= collection_select(:user, :state_id, State.order('name'), :id, :name, {:class=>'collection-select-class'})  %> 
```

我的 CSS 代码是：

```
.collection-select-class {
  background-color: #333333;
  color: @yellow;
} 
```

我也尝试使用选项标签，但它没有改变任何东西。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:26:37.740

CSS 目前不支持该功能。

看这里：

[HTML <select> 选择的选项 background-color CSS 样式](https://stackoverflow.com/questions/2402146/html-select-selected-option-background-color-css-style)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-02T22:53:53.650

对于这个问题的 CSS 相关部分，我参考下面的链接回答：

[https://stackoverflow.com/a/1947675](https://stackoverflow.com/a/1947675)

简而言之，您需要添加空哈希 {} 才能使其工作。所以它会像：

```
<%= collection_select(:user, :state_id, State.order('name'), :id, :name, {}, {:class=>'collection-select-class'})  %> 
```

希望这可以帮助！

# php - 嵌套if语句好还是坏？

> ID：11199327
> 
> 赞同：1
> 
> 时间：2012-06-26T00:38:51.670
> 
> 标签：php, if-statement

我有一个投票系统，允许用户为项目投票。现在，我首先检查用户是否登录，然后检查他们是否已经投票。我想知道是否有更好的方法来做到这一点，因为有人告诉我嵌套的 if 语句是要避免的。

我的代码：

```
if ($loggedIn) {
    if($row['voted']){
        You Already voted
    }else{
        <a href="#">Agree</a>
    }
}else{
    Please Register
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T02:42:54.900

嵌套`if( ... ){ ... }else{ ... }`语句很好，只要它们合乎逻辑且易于阅读/维护。另一种选择是审查你的论点的逻辑，看看它们是否可以用更简单的方式表达。

例如，您提供的代码可以表示为：

```
if( !$loggedIn ){
  echo 'Please Register';
}elseif( $row['voted'] ){
  echo 'You Already voted';
}else{
  echo '<a href="#">Agree</a>';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T00:41:28.863

这不是那么简单。您的示例很简单，但其他情况并非如此。在您的示例中，很容易遵循嵌套 if 语句可以使用的情况。在更复杂的代码中，深度嵌套的语句使代码难以维护。与编程的许多事情一样，它会因情况而异，您需要根据具体情况做出决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T00:41:35.173

一般来说，没关系。您想避免过于复杂的嵌套 if 语句

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T00:44:43.237

在这种情况下它很好，事实上在大多数情况下它是。只有当您有很多嵌套时才会出现问题，因此它可能变得难以阅读并且您可能会忘记某些东西，但这是可读性，使用嵌套 if 语句的逻辑没有任何问题。

# php - 为什么这个 JSON 字符串返回 NULL？

> ID：11199328
> 
> 赞同：0
> 
> 时间：2012-06-26T00:38:55.577
> 
> 标签：php, json

我有以下带有工作（根据[`JsonViewer`](http://jsonviewer.stack.hu/)）JSON字符串的PHP脚本：

```
<?php
$string = "{0:{'id':1,'name':'Antiek en Kunst','subs':[{'id':2,'name':'Antiek | Bestek'},{'id':3,'name':'Antiek | Boeken en Bijbels'},{'id':1100,'name':'Antiek | Emaille'},{'id':1501,'name':'Antiek | Gereedschap en Instrumenten'},{'id':1648,'name':'Antiek | Glas en Kristal'},{'id':2614,'name':'Antiek | Goud en Zilver'},{'id':2661,'name':'Antiek | Kandelaars'},{'id':1841,'name':'Antiek | Kantoor en Zakelijk'},{'id':1502,'name':'Antiek | Keramiek en Aardewerk'},{'id':1842,'name':'Antiek | Keukenbenodigdheden'},{'id':2118,'name':'Antiek | Kleden en Textiel'},{'id':1503,'name':'Antiek | Kleding en Accessoires'},{'id':6,'name':'Antiek | Klokken'},{'id':1647,'name':'Antiek | Koper en Brons'},{'id':7,'name':'Antiek | Lampen'},{'id':1504,'name':'Antiek | Meubels | Bedden'},{'id':5,'name':'Antiek | Meubels | Kasten'},{'id':1505,'name':'Antiek | Meubels | Stoelen en Banken'},{'id':1506,'name':'Antiek | Meubels | Tafels'},{'id':1101,'name':'Antiek | Naaimachines'},{'id':10,'name':'Antiek | Porselein'},{'id':1102,'name':'Antiek | Religie'},{'id':1103,'name':'Antiek | Schalen'},{'id':2662,'name':'Antiek | Schoolplaten'},{'id':1843,'name':'Antiek | Servies compleet'},{'id':12,'name':'Antiek | Servies los'},{'id':1507,'name':'Antiek | Speelgoed'},{'id':2663,'name':'Antiek | Spiegels'},{'id':2664,'name':'Antiek | Tin'},{'id':11,'name':'Antiek | Tv\'s en Audio'},{'id':14,'name':'Antiek | Vazen'},{'id':1104,'name':'Antiek | Wandborden en Tegels'},{'id':1500,'name':'Antiek | Woonaccessoires'},{'id':9,'name':'Antiek | Overige'},{'id':15,'name':'Curiosa en Brocante'},{'id':1423,'name':'Diensten | Kunstenaars en Portretschilders'},{'id':2610,'name':'Diensten | Reparatie en Onderhoud'},{'id':23,'name':'Kunst | Beelden en Houtsnijwerken'},{'id':1508,'name':'Kunst | Designobjecten'},{'id':1105,'name':'Kunst | Etsen en Gravures'},{'id':27,'name':'Kunst | Litho\'s en Zeefdrukken'},{'id':1844,'name':'Kunst | Niet-Westerse kunst'},{'id':1846,'name':'Kunst | Schilderijen | Abstract'},{'id':25,'name':'Kunst | Schilderijen | Klassiek'},{'id':1845,'name':'Kunst | Schilderijen | Modern'},{'id':26,'name':'Kunst | Tekeningen en Foto\'s'},{'id':24,'name':'Kunst | Overige'}]},1:{'id':31,'name':'Audio, Tv en Foto','subs':[{'id':2035,'name':'Accu\'s en Batterijen'},{'id':2617,'name':'Afstandsbedieningen'},{'id':32,'name':'Bandrecorders'},{'id':1132,'name':'Beamers'},{'id':2665,'name':'Blu-ray-spelers en Blu-ray-recorders'},{'id':33,'name':'Buizenversterkers'},{'id':2036,'name':'Cassettedecks'},{'id':35,'name':'Cd-spelers'},{'id':2666,'name':'Diaprojectors'},{'id':2042,'name':'Diensten | Film- en Videobewerking'},{'id':1199,'name':'Diensten | Fotografen'},{'id':1219,'name':'Diensten | Reparaties'},{'id':1114,'name':'Dvd-spelers en Dvd-recorders'},{'id':1115,'name':'Films 8mm, 16mm en 35mm'},{'id':1360,'name':'Fotografie | Accu\'s en Batterijen'},{'id':480,'name':'Fotografie | Camera\'s | Analoog'},{'id':487,'name':'Fotografie | Camera\'s | Digitaal'},{'id':2667,'name':'Fotografie | Digitale fotolijstjes'},{'id':488,'name':'Fotografie | Doka Toebehoren'},{'id':1720,'name':'Fotografie | Filters'},{'id':489,'name':'Fotografie | Flitsers'},{'id':1483,'name':'Fotografie | Fotolijsten en Fotoalbums'},{'id':1721,'name':'Fotografie | Fotoprinters en Fotopapier'},{'id':1400,'name':'Fotografie | Fotostudio en Toebehoren'},{'id':1484,'name':'Fotografie | Fototassen'},{'id':493,'name':'Fotografie | Geheugenkaarten'},{'id':495,'name':'Fotografie | Lenzen en Objectieven'},{'id':497,'name':'Fotografie | Onderwatercamera\'s'},{'id':501,'name':'Fotografie | Professionele apparatuur'},{'id':500,'name':'Fotografie | Statieven en Balhoofden'},{'id':1722,'name':'Harddiskrecorders'},{'id':1116,'name':'Home Cinema-sets'},{'id':1106,'name':'Kabels'},{'id':37,'name':'Koptelefoons en Headsets'},{'id':38,'name':'Luidsprekers'},{'id':2668,'name':'Mediaspelers'},{'id':40,'name':'Mp3-spelers | Apple iPod'},{'id':1649,'name':'Mp3-spelers | Overige merken'},{'id':1723,'name':'Mp3-spelers | Accessoires | Apple iPod'},{'id':1452,'name':'Mp3-spelers | Accessoires | Overige merken'},{'id':2615,'name':'Mp4-spelers'},{'id':1724,'name':'Opladers'},{'id':496,'name':'Optische apparatuur | Microscopen'},{'id':502,'name':'Optische apparatuur | Telescopen'},{'id':503,'name':'Optische apparatuur | Verrekijkers'},{'id':42,'name':'Platenspelers en Pick-ups'},{'id':1117,'name':'Professionele Audio-, Tv- en Video-apparatuur'},{'id':43,'name':'Radio\'s'},{'id':36,'name':'Stereo-sets'},{'id':45,'name':'Tuners'},{'id':1118,'name':'Tv-decoders en Schotelantennes'},{'id':1120,'name':'Tv\'s | Plasma, Lcd en Led'},{'id':1121,'name':'Tv\'s | Overige Tv\'s'},{'id':1453,'name':'Tv\'s | Accessoires'},{'id':46,'name':'Versterkers en Receivers'},{'id':1129,'name':'Videobewakingsapparatuur'},{'id':1130,'name':'Videocamera\'s | Analoog'},{'id':1131,'name':'Videocamera\'s | Digitaal'},{'id':1133,'name':'Videospelers en Videorecorders'},{'id':47,'name':'Walkmans, Discmans en Minidiscspelers'},{'id':1725,'name':'Weerstations en Barometers'},{'id':41,'name':'Overige Audio, Tv en Foto'}]}}";

var_dump(json_decode($string)); // returns null
?> 
```

为什么这给我`null`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T00:43:01.210

简短回答：不是有效的 Json。

根据 JSON 网站上的状态机图，只允许转义的双引号字符，不允许使用单引号。单引号字符不需要转义阅读更多： http: [//www.json.org/](http://www.json.org/)

![在此处输入图像描述](../Images/9094679b814c3cac6a11a662bb973f0a.png)

供您参考，您还可以[在此处快速验证您的 JSON](http://jsonformatter.curiousconcept.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T00:45:14.823

关联数组要求键是字符串而不是整数。

有效的：

`{"0":[]}`

无效的：

`{0:[]}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T00:41:58.367

因为它不是[JSON](http://json.org/)。字符串使用双引号，而不是单引号。

# ruby - Ruby：没有这样的文件或目录——C:\Documents

> ID：11199333
> 
> 赞同：1
> 
> 时间：2012-06-26T00:39:32.850
> 
> 标签：ruby, windows-xp, cmd

我只是在学习 Ruby 并制作了一个简单的 Hello World 程序，由于某种原因，命令提示符找不到目录（即 C:\Documents and Settings\Matt\My Documents\Ruby Testing Zone\hello.rb）。将目录设置为 C:\Ruby193\bin，我尝试键入以下命令来运行我的程序：

```
ruby C:\Documents and Settings\Matt\My Documents\Ruby Testing Zone\hello.rb 
```

我最终得到了这个错误：

```
ruby: No such file or directory -- C:\Documents <LoadError> 
```

我已经检查了很多次，以确保我没有拼错文件名的任何部分。到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:43:06.790

在整个文件名周围加上双引号。否则 Windows 不会将其视为单个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:42:37.107

在您的打开命令中，确保 、 和 之间的空格`Documents`以`and`反斜杠`Settings`开头。换句话说，这就是路径应该是什么：

```
C:\\Documents\ and\ Settings\\Matt\\My\ Documents\\Ruby\ Testing\ Zone\\hello.rb 
```

或者，用斜杠替换双反斜杠：

```
C:/Documents\ and\ Settings/Matt/My\ Documents/Ruby\ Testing\ Zone/hello.rb 
```

# sql-server - SQL Server 单数/复数搜索

> ID：11199336
> 
> 赞同：0
> 
> 时间：2012-06-26T00:39:42.913
> 
> 标签：sql-server, e-commerce

当用户输入名词的复数形式时，如何返回单数形式。例如。在我的网站产品搜索中，如果用户输入“Gucci low cutpant”，结果应该返回“Gucci low cut pant”。我无法使用全文搜索，因为此列不是唯一的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:54:22.027

答案仍然是全文搜索。我相信你误解了这些限制。表上需要一个唯一索引（当然你有其中之一）；它不必*位于*您有兴趣包含在全文索引中的列上。我什至不确定这将如何工作，因为唯一索引的键大小不能 > 900 字节，并且全文搜索当然适用于无法声明为唯一的列（例如最大类型）。 .

# c# - 使用 switch 语句仅设置一个特定变量的值？

> ID：11199338
> 
> 赞同：1
> 
> 时间：2012-06-26T00:39:47.757
> 
> 标签：c#, .net

有没有办法使用 switch 语句来设置整个案例中使用的一个特定变量的值？目前，如果值为 1，我希望变量为 1，如果值为 2，我希望变量为 2。我实际上只是通过以下方式做到这一点：

```
Int variable = value; 
```

..但是，为了将来参考更复杂的示例，我想知道是否有办法。（当前获取变量已定义错误）。

```
 switch (value)
        {
            case 0:
                int Variable = 0;
                break;
            case 1:
                int Variable = 1;
                break;
            case 2:
                int Variable = 2;
                break;
            case 3:
                int Variable = 3;
                break;
            case 4:
                int Variable = 4;
                break;
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T01:14:39.260

哈希表或字典怎么样。我想这很麻烦，但可读性很强。

取自[这里](https://stackoverflow.com/questions/794663/net-convert-number-to-string-representation-1-to-one-2-to-two-etc)的想法。

```
Dictionary<string, int> numbers = new Dictionary<string, int>(){
    {"zero", 0},
    {"one", 1},
    {"two", 2},
    {"three", 3},
    {"four", 4},
    {"five", 5},
    {"size", 6}
};

int Variable = numbers[value]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T00:45:46.867

如果您在 swtich 之外声明变量，则不会出现“变量已定义”错误。发生这种情况是因为内部的所有内容都`switch`在同一范围内。

例子：

```
int Variable = -1;

switch (value)
{
        case 0:
            Variable = 0;
            break;
        case 1:
            Variable = 1;
            break;
        case 2:
            Variable = 2;
            break;
        case 3:
            Variable = 3;
            break;
        case 4:
            Variable = 4;
            break;
} 
```

# android - 我可以在可绘制文件夹中有一个 XML 支持多个按钮的多种颜色/边框吗？

> ID：11199348
> 
> 赞同：3
> 
> 时间：2012-06-26T00:40:23.887
> 
> 标签：android, button, shape, xml-drawable

我有 2 个具有两种不同颜色和边框颜色的按钮。所以我需要在具有 shape 属性的可绘制文件夹中创建一个 XML，并且：

```
<stroke
    android:width="1dp"
    android:color="#C5510E" />

<solid android:color="#F78340" />` 
```

和另一个 XML：

```
<stroke
    android:width="1dp"
    android:color="#FFFFFF" />

<solid android:color="#000000" /> 
```

有没有一种方法可以让我在可绘制文件夹中的一个 XML 而不是两个 XML 中处理它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T00:54:39.143

不，这是不可能的。与其他组件不同，`drawable`资源没有指定 ID，因此它们仅由部件文件名通过`R.drawable`. 它们必须在单独的文件中处理。

请参阅有关[引用`shape` `drawable`](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape). （如果有兴趣，其他`drawable`类型在同一位文档中。）

# javascript - 将 Keypress 和 keydown 用于 firefox、chrome 和 ie

> ID：11199352
> 
> 赞同：0
> 
> 时间：2012-06-26T00:40:42.690
> 
> 标签：javascript, jquery, keypress, keydown

我使用 keydown 和 keypress，此代码仅适用于 chrome，但不适用于 Firefox。第一个功能是用户只能使用数字、小键盘、退格和制表符。另一个功能是，当用户输入数字时，它会自动更改为十进制

默认值 --> 0.00

输入 1 --> 0.01

输入 0 --> 0.10

输入 0 --> 1.00

[你可以在这里](http://jsfiddle.net/hemiz/pYHDE/146/)找到我的演示

```
$('#txtInput').keydown(function(event) {

var Key = event.which;
//number
if (Key >= 48 && Key <= 57) {
    return true;
}
//numpad
else if (Key >= 96 && Key <= 105) {
    return true;
}
//backspace,tab
else if (Key >= 8 && Key <= 9) {
    return true;
}
else return false;
});

$(document).ready(function(){
$('#txtInput').keypress(function(e){
    var value = $('#txtInput').val().toString();
    var number = null;
    if(value == '')
        value = '0.00';
    switch(e.which)
    {
        case 48:
        case 49:
        case 50:
        case 51:
        case 52:
        case 53:
        case 54:
        case 55:
        case 56:
        case 57:
            number = e.which - 48;
            break;
        default:
            e.preventDefault();
            break;
    }
    var dotIndex = value.indexOf('.');
    if(number === null)
    {
        value = value.substr(0,dotIndex-1) + '.' + value.substr(dotIndex -1,1) + value.substr(dotIndex+1,1);
        if(value.indexOf('.') ==0)
        {
            value = '0' + value;
        }
    }
    else
    {

        value = value.substr(0,dotIndex) + value.substr(dotIndex+1,1) + '.' + value.substr(dotIndex+2);

        value += number.toString();  
        value = value.replace(/^0+/,'');
        if(value.indexOf('.') == 0)
        {
            value = '0' + value;
        }               

    }
    $('#txtInput').val(value);
    e.preventDefault();
}).keypress(function(e){

    switch(e.which)
    {
        case 48:
        case 49:
        case 50:
        case 51:
        case 52:
        case 53:
        case 54:
        case 55:
        case 56:
        case 57:
            e.preventDefault();
            break;
        }
    });
}); 
```

# c++ - 了解 gdb 输出

> ID：11199356
> 
> 赞同：1
> 
> 时间：2012-06-26T00:41:19.677
> 
> 标签：c++, linux, gdb

我正在尝试将 push_back 函数用于 c++ 中的向量。我遇到了段错误，当我运行 gdb 以找到确切原因时。

我得到以下。

```
$1={px = 0xbfffe9c4, pn = { pi_ = 0x8049c0b}} 
```

我对 gdb 没有太多经验，也无法在网上找到与此特定问题相关的任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T00:57:04.553

我的魔法球告诉我你在取消引用时崩溃了`shared_ptr`。关注该`px`成员，因为这是您感兴趣的实际指针值。例如，您可以尝试：

```
print $1.px 
```

如果指针指向一个有效的内存区域：

```
print *$1.px 
```

调试器`gdb`会为你提供很多信息，但一些更有用的东西：`backtrace`、`up`、`down`、`info locals`，如果你是多线程的，`thread apply all backtrace`. 如果您正在现场调试，那么您当然需要`breakpoint`、`next`和. 您应该能够使用的帮助来获取更多信息，并且该[手册](http://sources.redhat.com/gdb/documentation/)可以在线获取。`step``continue``gdb`[`gdb`](http://sources.redhat.com/gdb/documentation/)

# python - OS X Lion 上 virtualenvwrapper 的错误消息

> ID：11199360
> 
> 赞同：15
> 
> 时间：2012-06-26T00:41:31.990
> 
> 标签：python, osx-lion, virtualenv, homebrew

我已经使用自制软件在新的 Mac Lion 安装上安装了 python，并且一直在尝试使用 pip 安装 virtualenv 和 virtualenvwrapper，但是当我开始一个新的终端会话时，我得到了这个回溯：

```
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named virtualenvwrapper.hook_loader
virtualenvwrapper.sh: There was a problem running the initialization hooks. 

If Python could not import the module virtualenvwrapper.hook_loader,
check that virtualenv has been installed for
VIRTUALENVWRAPPER_PYTHON=/usr/bin/python and that PATH is
set properly. 
```

使用的python和pip来自自制软件，但似乎希望我使用Apple的默认python。我得到以下

```
~$ which python | xargs ls -l
lrwxr-xr-x  1 beard  admin  33 Jun 24 16:11 /usr/local/bin/python -> ../Cellar/python/2.7.3/bin/python
~$ echo $VIRTUALENVWRAPPER_PYTHON
/usr/local/bin/python
~$ which pip | xargs ls -l
-rwxr-xr-x  1 beard  admin  301 Jun 24 16:18 /usr/local/share/python/pip
~$ which virtualenvwrapper.sh | xargs ls -l
-rwxr-xr-x  1 beard  admin  32227 Jun 24 16:19 /usr/local/share/python/virtualenvwrapper.sh 
```

但是，似乎认为我已经在系统 python 中安装了 pip （和 virtualenv）`/usr/bin/python`

**编辑：**在我的 bashrc--

```
export WORKON_HOME="$HOME/py-env"
export VIRTUALENVWRAPPER_LOG_DIR="$HOME/py-env"
export VIRTUALENVWRAPPER_HOOK_DIR="$HOME/py-env"
source /usr/local/share/python/virtualenvwrapper.sh
export VIRTUALENVWRAPPER_PYTHON="/usr/local/bin/python" 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-26T00:54:52.593

既然您有自己的 python 版本，您是否尝试过覆盖 VIRTUALENVWRAPPER_PYTHON？（看起来像你想要的`export VIRTUALENVWRAPPER_PYTHON=/usr/local/bin/python`）[virtualenvwrapper 文档](http://www.doughellmann.com/docs/virtualenvwrapper/install.html#python-interpreter-virtualenv-and-path)建议在采购 virtualenvwrapper.sh 之前将该 envvar 设置为所需的 python。他们的例子有：

```
export VIRTUALENVWRAPPER_PYTHON=/usr/local/bin/python
export VIRTUALENVWRAPPER_VIRTUALENV=/usr/local/bin/virtualenv
source /usr/local/bin/virtualenvwrapper.sh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T14:08:13.780

将 virtualenvwrapper.sh 的路径添加或更改为 ~/.bash_profile 到 /usr/local/share/python/virtualenvwrapper.sh

它应该看起来像

```
export VIRTUALENVWRAPPER_PYTHON=/usr/local/bin/python
export WORKON_HOME=$HOME/.virtualenvs

source /usr/local/share/python/virtualenvwrapper.sh 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:26:30.583

如果您在 ZSH shell 中使用 PythonBrew 和 VirtualEnvBurrito，请确保检查您的 .zprofile - 其中包含一些用于执行 VirtualEnvBurrito 启动脚本的命令。由于 .zprofile 在 .zshrc 之前加载，因此 Python 版本是系统版本。这也会抛出这个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T02:48:28.530

我遇到了类似的问题，即 Hombrew 安装的 Python 与 OS X Lion 下系统安装的 Python 冲突。我永远无法使用 Homebrew 解决问题。但是，当我切换到使用 pythonbrew（https://github.com/utahta/pythonbrew）来管理我安装的 Python（而不是 Homebrew）时，我能够成功运行 virtualenvwrapper。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-28T14:35:41.757

我在 macOS Catalina 上遇到了类似的问题。它附带 zsh 和 python 2.7

通过以下步骤，我安装了 python3 和虚拟环境，

安装自制软件

```
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)" 
```

安装蟒蛇

```
brew install python 
```

检查python的安装位置

```
brew show python 
```

压扁的输出，

```
==> Caveats
Python has been installed as
  /usr/local/bin/python3

Unversioned symlinks `python`, `python-config`, `pip` etc. pointing to
`python3`, `python3-config`, `pip3` etc., respectively, have been installed into
  /usr/local/opt/python/libexec/bin

You can install Python packages with
  pip3 install <package>
They will install into the site-package directory
  /usr/local/lib/python3.7/site-packages

See: https://docs.brew.sh/Homebrew-and-Python 
```

macOS 上的默认 python 路径`/usr/bin/python`指向 Python 2.7。所以我们需要创建一个从 python 到 python3 的别名

```
alias python=/usr/local/bin/python3 
```

然后按照上面@munchybunch 提到的步骤进行操作，

```
export VIRTUALENVWRAPPER_PYTHON=/usr/local/bin/python3
export WORKON_HOME=$HOME/.virtualenvs
source /usr/local/bin/virtualenvwrapper.sh 
```

按照上述步骤，我能够创建一个虚拟环境，

```
mkvirtualenv dev 
```

# mysql - MySQL 需要返回 cols 的唯一组合的计数

> ID：11199362
> 
> 赞同：6
> 
> 时间：2012-06-26T00:41:36.557
> 
> 标签：mysql

我正在编写一个视频游戏并使用 MySQL 显示一个图标，显示玩家宝藏所在的位置。数据库按 X 和 Y 将位置存储在方形地图上。我还想计算每个正方形上的项目数。

所以给定一张这样的表

```
Id   x   y
==  ==  ==
1    2   3
2    3   2
3    3   2
4    4   4
5    4   4
6    4   4 
```

我想返回一些东西

```
x y count
= = =====
4 4 3
3 2 2
2 3 1 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T00:44:07.617

对结果使用`GROUP BY`子句。

```
Select x, y, count(*) as 'count' from mytable group by x, y 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T04:22:13.470

连接你的 2 列并使用 DISTINCT 怎么样？

```
Select x, y, count(DISTINCT CONCAT(x, '_', y)) as 'count' from mytable group by x, y 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T00:43:14.780

```
SELECT x,y,SUM(1) FROM table GROUP BY x,y; 
```

# asp.net-mvc - mvvm 类的属性

> ID：11199376
> 
> 赞同：0
> 
> 时间：2012-06-26T00:43:11.743
> 
> 标签：asp.net-mvc, mvvm

我有一个简单的视图，其中包含一些要在数据库中插入/更新的数据，我需要在保存后显示一些消息。我的疑问是：这条消息应该是我的 mvvm 类的属性吗？还是我应该把它放到 ViewBag/ViewData 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:59:32.277

您不需要将消息作为属性存储在视图模型上。您可以在视图模型上有一个属性，指示操作是否成功。然后在视图中测试这个属性并显示消息：

```
@if (Model.Saved)
{
    <div>The item was saved</div>
} 
```

在执行保存的控制器操作中，您将属性设置为 true。

# php - 如何将每个选项按钮与其各自的标记相关联？

> ID：11199379
> 
> 赞同：-2
> 
> 时间：2012-06-26T00:43:30.463
> 
> 标签：php, javascript, jquery, mysqli

我在这里有一个应用程序：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/Text34.php)

我所拥有的是一些问题，并与复选框按钮中可能的答案中的每个问题相关联，以及三个文本输入显示 questionId、选项类型和每个单独答案的标记数。

实际上，如果我遇到问题，每个答案的分数。我想尝试的是，对于每个问题的每个正确答案，它们都与自己的文本输入相关联，显示它们值得的分数（在下面的 Individual_Answer 表中找到），否则对于所有不正确的答案，它们都值得`0`在他们的文本输入/

现在这里是此示例应用程序的数据库表：

**问题：**

```
QuestionId (PK auto)  QuestionNo  SessionId (FK Session) OptionId (FK Option)    
72                    1           26                     3
73                    2           26                     4 
```

**选项表：**

```
OptionId (PK Auto)  OptionType
1                   A-C
2                   A-D
3                   A-E
4                   A-F 
```

**回答：**

```
AnswerId (PK auto)    QuestionId (FK Question)      Answer  
1                          72                         C             
2                          73                         A             
3                          73                         C             
4                          73                         D 
```

**个人回答：**

```
AnswerId (PK auto)  AnswerMarks
1                   2
2                   2
3                   1
4                   2 
```

实际代码如下：

```
//$qandaqry query is here and executed

        $qandaqrystmt->bind_result($qandaQuestionId,$qandaQuestionNo,$qandaQuestionContent,$qandaOptionType,$qandaAnswer,$qandaAnswerMarks );

        $arrQuestionId = array();
        $arrQuestionNo = array();
        $arrQuestionContent = array();
        $arrOptionType = array();
        $arrAnswer = array();
        $arrAnswerMarks = array();

        while ($qandaqrystmt->fetch()) {
        $arrQuestionId[ $qandaQuestionId ] = $qandaQuestionId; //QuestionId
        $arrQuestionNo[ $qandaQuestionId ] = $qandaQuestionNo; //QuestionNo
        $arrQuestionContent[ $qandaQuestionId ] = $qandaQuestionContent; //QuestionContent
        $arrOptionType[ $qandaQuestionId ] = $qandaOptionType; //OptionType
        $arrAnswer[ $qandaQuestionId ] = $qandaAnswer; //Answer
        $arrAnswerMarks[ $qandaQuestionId ] = $qandaAnswerMarks; //AnswerMarks
      }

    ?>
    <form action='results.php' method='post' id='exam'>

    <?php

//Retrieve options for each question

    function ExpandOptionType($option) { 
        $options = explode('-', $option);
        if(count($options) > 1) {
            $start = array_shift($options);
            $end = array_shift($options);
            do {
                $options[] = $start;
            }while(++$start <= $end);
         }
         else{
            $options = explode(' or ', $option);
         }
         echo '<p>';
         foreach($options as $indivOption) {
             echo '<div class="ck-button"><label class="fixedLabelCheckbox"><input type="checkbox" name="options[]" id="option-' . $indivOption . '" value="' . $indivOption . '" /><span>' . $indivOption . '</span></label></div>';
         }
          echo '</p>';

    }

    foreach ($arrQuestionId as $key=>$question) {

    ?>

    <div class="queWrap">

//Each QuestionNo and QuestionContent
    <p><?php echo htmlspecialchars($arrQuestionNo[$key]) . ": " .  htmlspecialchars($arrQuestionContent[$key]); ?></p>

//Output each Individual Option
    <p><?php echo ExpandOptionType(htmlspecialchars($arrOptionType[$key])); ?></p>

//Output each QuestionId text input per question
    <p>Question Id:<input type='text' class='questionIds' name='questionids' value='<?php echo htmlspecialchars($arrQuestionId[$key]); ?>' /></p>

//Output each OptionType text input per question
    <p>Option Type: <input type='text' class='optionType' name='optiontype' value='<?php echo htmlspecialchars($arrOptionType[$key]); ?>' /></p>

//Output each AnswerMarks per answer in each question
    <p>Each Answer's Marks<input type='text' class='answermarks' name='answerMarks' value='<?php echo htmlspecialchars($arrAnswerMarks[$key]); ?>' /></p>

    </div>

    <?php

    }

    ?>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:41:17.070

首先，我想建议您重新考虑您的数据库架构。您拥有的表比创建问题数据库所需的要多得多，而且检索单个问题所需的所有连接等都是昂贵的操作。

假设您希望您`HTML`的外观如下所示：

```
<div class="queWrap" id="question-72">
    <h2 class="question-text">What is 4+4?</h2>
    <h3>Answers: <span class="questionMarks">(this question is worth 2 points)</span></h3>

    <div class="ck-button">
        <label class="fixedLabelCheckbox">
            <input type="checkbox" name="options_72[]" id="option-A" value="A">
            <span>0</span>
        </label>
    </div>

    <div class="ck-button">
        <label class="fixedLabelCheckbox">
            <input type="checkbox" name="options_72[]" id="option-B" value="B">
            <span>4</span>
        </label>
    </div>

    <div class="ck-button">
        <label class="fixedLabelCheckbox">
            <input type="checkbox" name="options_72[]" id="option-C" value="C">
            <span>8</span>
        </label>
    </div>

    <div class="ck-button">
        <label class="fixedLabelCheckbox">
            <input type="checkbox" name="options_72[]" id="option-D" value="D">
            <span>16</span>
        </label>
    </div>
</div> 
```

现在假设您的查询`result->fetch()`上面被更巧妙地重写，如下所示：

```
$_Questions = array();
while( $qandaqrystmt->fetch() ) {
   $_Questions[] = array('id'=>$qandaQuestionId,'num'=>$qandaQuestionNo,'content'=>$qandaQuestionContent,'type'=>$qandaOptionType,'answer'=>$qandaAnswer,'marks'=>$qandaAnswerMarks);
} 
```

然后输出问题，我们只想循环它并生成适当的 HTML。我想指出，将正确答案连同问题一起发送给应试者是非常愚蠢的，即使它隐藏在 html 中。您会注意到此 HTML 与您自己的 HTML 相似，但有一个非常重要的更改：因为您只有一个表单元素围绕所有问题，所以每个问题的复选框数组都需要一个唯一的名称。我选择像这样将 _(questionID) 附加到每个数组

（例如问题 72）`<input type="checkbox" name="options_72[]" id="option-D" value="D">`

这是使用[heredoc循环它的方法](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

```
foreach( $_Questions AS $question ) {
  echo <<<EOT
    <div class="queWrap" id="question-{$question['id']}">
        <h2 class="question-text">{$question['content']}</h2>
        <h3>Answers: <span class="questionMarks">(this question is worth {$question['marks']} points)</span></h3>
    EOT;

$options = ['A','B','C','D','E','F'];
$lastOption = substr($question['type'], -1, 1);
foreach( $options as $opt ) {
  echo <<<EOT
    <div class="ck-button">
        <label class="fixedLabelCheckbox">
            <input type="checkbox" name="options_{$questions['id']}[]" value="$opt">
            <span>$opt</span>
        </label>
    </div>
    EOT;
  if( $opt == $lastOption )
    break;
}

} 
```

# c# - Nhibernate多对多共享集合问题

> ID：11199380
> 
> 赞同：0
> 
> 时间：2012-06-26T00:43:50.990
> 
> 标签：c#, nhibernate, fluent-nhibernate

结构：TypeA 有 TypeB 的集合，TypeB 有 TypeC 的集合。

TypeB 和 TypeC 是多态的。

TypeA 映射

```
HasMany<TypeB>(t => t.TypeBList).CascadeAll().Inverse().. 
```

B型映射

```
HasManyToMany<TypeC>(t => t.TypeCList).Casecade.All().Inverse().. 
```

TypeC 映射

```
HasManyToMany<TypeB>(t => t.TypeBList).Casecade.None()... 
```

TypeB 有一个方法

```
Add(TypeC typec) { typec.TypeBList.Add(this); TypeBList.Add(typec); } 
```

我需要向 typeb 集合添加一个新的 typec，但我想通过调用 repo.Save(typeA) 来保存，但我遇到了共享集合问题，因为 TypeB 在 TypeA 和 TypeC 中都存在。

```
var typec = new TypeC { TypeBList = typea.TypeBList, .... }
typea.TypeBList[0].Add(typec);
repo.save(typea); 
```

这不会通过保存 typea 来工作，我是否被迫获得 typeb 并在那里进行更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:25:49.173

对象上的集合通常根本不应该共享，而且大多数时候，尤其是在使用 NHibernate 时，您甚至不应该更改集合实例。最好复制内容。

```
obj1.ListA.Clear();

foreach(var item in obj2.ListA)
    obj1.ListA.Add(Item); 
```

更新：为什么？

因为 NHibernate 用自己的集合类替换集合实例以启用延迟加载和更改跟踪。

# android - 将android应用程序与akka远程服务器连接

> ID：11199384
> 
> 赞同：3
> 
> 时间：2012-06-26T00:44:01.973
> 
> 标签：android, akka

我正在使用android平台构建一个应用程序。想设计一个服务器端的akka​​应用程序，以分布式的方式向android应用程序提供服务。两个系统都设计为单独的应用程序。是否可以将akka远程服务器与android应用程序连接起来。请帮助我，因为我对akka和android都是新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:28:48.437

你可以这样做，但你会受苦。

您必须能够以某种方式从您的 android 应用程序访问 akka-remote 和依赖项（netty、scala）的类定义。这可能是有问题的，因为依赖项的总和有超过 65536 个方法，这是 Dalvik 的上限。（也就是说 - 您`classes.dex`在 apk 中的文件的方法定义不能超过 65536）。

AFAIK，有三种主要方法：

1.  *将依赖项拆分为单独的 apklib，并使您的 apk 依赖于这些。*
    *   我真的不能推荐这个，因为我还没有尝试过。
2.  *将依赖项拆分为单独的 classes.dex 文件，您可以从应用程序中以编程方式加载这些文件*。
    *   大概是可行的。从未尝试过。
3.  *在打包你的 classes.dex 之前运行 proguard*
    *   您必须与 proguard 斗争才能正确配置，并且您可能会遇到奇怪的运行时失败。我的配置发布在下面。

在您的 android 设备上启动并运行 akka-remote 后，您可以像文档中的示例一样连接到服务器。但是，请记住：

*   您的 Android 设备的 IP 在启动时可能可用也可能不可用，因此您可能不想让您的 akka 配置的那部分保持动态（我自己还没有这样做）。
*   您的 Android 设备的 IP 可能无法从服务器访问。因此，如果您进入服务器需要回调客户端的状态，它将永远不会成功。

我的 proguard.cfg （不需要某些行 - 没有费心弄清楚哪些行）：

```
-dontoptimize
#-optimizationpasses 2
-dontobfuscate
-dontpreverify
-dontskipnonpubliclibraryclassmembers
-dontskipnonpubliclibraryclasses
-dontnote **
-verbose

-keep class com.typesafe.config.Config { *; }
-keep class com.typesafe.config.ConfigFactory { *; }
-keep class org.slf4j.Logger { *; }
-keep class org.slf4j.LoggerFactory { *; }

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

#Scala
-dontwarn scala.**

-keepclassmembers class * {
      ** MODULE$;
}

-keep class scala.Option
-keep class scala.Function1
-keep class scala.PartialFunction
#https://issues.scala-lang.org/browse/SI-5397
-keep class scala.collection.SeqLike {
    public protected *;
}
-keep class scala.Tuple*

-keepclasseswithmembers public class * {
    public static void main(java.lang.String[]);
}

-keep class * implements org.xml.sax.EntityResolver

-keepclassmembers class * {
    ** MODULE$;
}

-keepclassmembernames class scala.concurrent.forkjoin.ForkJoinPool { *; }

-keepclassmembernames class scala.concurrent.forkjoin.ForkJoinWorkerThread {
    int base;
    int sp;
    int runState;
}

-keepclassmembernames class scala.concurrent.forkjoin.ForkJoinTask {
    int status;
}

-keepclassmembernames class scala.concurrent.forkjoin.LinkedTransferQueue { *; }

#Akka
-dontwarn org.jboss.netty.logging.**
-dontwarn org.osgi.**
-dontwarn javax.servlet.**
#-dontwarn org.jboss.netty.channel.socket.http.**

## Unsafe is there at runtime
-dontwarn sun.misc.Unsafe
-keep class sun.misc.Unsafe{
    *;
}

-keep class akka.** { *; }

-keep class com.google.protobuf.GeneratedMessage {
    *;
}
-keep class org.javatuples.** { *; }
-keep class org.jboss.**

-dontwarn org.jboss.netty.handler.codec.marshalling.**
-dontwarn org.jboss.netty.channel.socket.nio.**
-dontwarn org.jboss.netty.handler.codec.compression.JdkZlibEncoder
-dontwarn org.jboss.netty.handler.codec.spdy.SpdyHeaderBlockZlibCompressor
-dontwarn org.jboss.netty.channel.socket.http.HttpTunnelingServlet
-dontwarn org.jboss.modules.**
-dontwarn __redirected.**
-dontwarn org.slf4j.LoggerFactory
-dontwarn org.slf4j.MarkerFactory
-dontwarn org.slf4j.MDC
-dontwarn org.slf4j.impl.AndroidLogger
-dontwarn org.slf4j.impl.AndroidLoggerFactory 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T13:48:35.320

我不确定您是否考虑使用 Akka 远程处理协议，但如果是我，我会考虑研究优秀的 HTTP+REST 库 Spray ( [http://spray.io/](http://spray.io/) )。我玩过这个库，它非常漂亮。它与 Akka 很好地集成，并允许您为您的服务提供 REST API。作为奖励，使用 REST 还允许您拥有可以轻松与 Android 前端以外的其他东西集成的服务。

我已经包含了几个链接作为起点。关于为 Android 应用程序编写 REST 客户端的 Google 2010 I/O 演讲特别有趣：

[http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html) [http://www.techrepublic.com/blog/app-builder/calling-restful-services-from -你的安卓应用程序/1076](http://www.techrepublic.com/blog/app-builder/calling-restful-services-from-your-android-app/1076)

# c# - MVC3 + Entity Framework，更新实体中的选择性字段

> ID：11199388
> 
> 赞同：2
> 
> 时间：2012-06-26T00:44:16.687
> 
> 标签：c#, asp.net-mvc-3, entity-framework

假设我正确设置了实体框架，并且 POCO 类具有正确的关系等。

```
<!-- language: c# -->
public class Person
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string SomeFieldIDontWantUsersToEdit { get; set; } // there are a lot of these
    public IList<Address> Addresses { get; set; }
}

public class Address
{
    public string EntireAdressInOneLine { get; set; }
} 
```

当我向用户显示内容时，我只想显示 FirstName 和 LastName 以及地址。这行得通，并且视图运行正常。

这是我的看法：

```
<!-- language: c# -->
@using (Html.BeginForm(actionName: null, controllerName: null, method: FormMethod.Post))
{
    @Html.TextBoxFor(model => Model.Person.FirstName)
    @Html.TextBoxFor(model => Model.Person.LastName)
    @Html.HiddenFor(model => Model.Person.Id)
} 
```

但是，当需要更新此条目时，我迷路了。如果这是更新操作：

```
<!-- language: c# -->
[HttpPost]
public ActionResult UpdatePerson(int personId, Person updatedPerson)
{
    if (ModelState.IsValid)
    {

    }
} 
```

当我提交表单时，模型绑定器将拾取我想要一个 Person 对象。酷，这行得通。当然， SomeFieldIDontWantUsersToEdit 将是空的，因为它没有包含在视图中——我理解那部分。

我的问题是，有没有办法告诉 EF 我只想更新这个实体中的某些属性，并使用所有其他属性已经存在的任何值。

我希望 SomeFieldIDontWantUsersToEdit 的原始值相同，但希望允许用户编辑名字和姓氏。如果只有 1 或 2 个字段，当然，我可以手动完成，但实际代码中的字段要多得多。

也许更好的问题是，这样做的正确/推荐方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:53:57.383

如果您不想手动进行“映射”，请使用[Automapper 。](http://automapper.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T03:25:39.003

为什么不实际创建一个 ViewModel，例如：

```
public class PersonalInfoModel
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

只需让您的 Action 接收该类型：

```
[HttpPost]
public ActionResult UpdatePerson(PersonalInfoModel updatedPerson)
{
    if (ModelState.IsValid)
    {

    }
} 
```

在这种情况下，您应该转到您的上下文，使用 加载**真实**实体`PersonalInfoModel.Id`，然后只更新您要更新的两个属性。

将真实实体用作模型不是强制性的，您可以创建自己的信息表示（在某些情况下甚至推荐，而不是使用实际实体）。

# jquery - 使用 jQuery Mobile 在所有页面上保留导航栏

> ID：11199391
> 
> 赞同：4
> 
> 时间：2012-06-26T00:44:29.277
> 
> 标签：jquery, jquery-mobile, navigation, cordova

我目前正在使用 jquery 移动框架创建 phonegap 应用程序。

我有多个页面，如下所示：

*   index.html（全局布局）
*   home.html（主页）
*   settings.html（设置页面）
*   ...

我想在每个页面上都有导航栏，并在每个页面（主页，设置......）上保留它而不重复它，我不知道为什么我不能这样做（比如 include header.html ？或设置导航栏在全球布局中？）。我使用页面之间的链接在我的应用程序中浏览

```
<a href="home.html" data-transition="slide">Home</a> 
```

我该怎么做才能保留我的导航栏？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T04:16:54.833

试试这篇文章，它将一个通用页脚附加到一个通用 html 文件的所有页面。

```
$('[data-role=page]').live('pageshow', function (event, ui) {
     $("#" + event.target.id).find("[data-role=footer]").load("footer.html", function(){
           $("#" + event.target.id).find("[data-role=navbar]").navbar()
     });
}); 
```

有关更多信息，请参阅这篇文章 - [Jquery Mobile Same Footer on different Pages](https://stackoverflow.com/questions/10906189/jquery-mobile-same-footer-on-different-pages)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T04:16:31.513

您必须在每个`data-role="page"`. 像这样[Js Fiddle Work Out](http://jsfiddle.net/ca11111/CxFWh/3/)

或者按照 dhaval 的建议，通过 ajax 在每个页面上插入它：但是除非你有很多标签，否则你不会获得太多

[Js 小提琴锻炼](http://jsfiddle.net/ca11111/CxFWh/7/)

# scala - 控制器动作中的 Play Framework 2.0 重定向

> ID：11199394
> 
> 赞同：1
> 
> 时间：2012-06-26T00:44:40.050
> 
> 标签：scala, playframework, playframework-2.0

我正在使用带有 Scala 的 Play Framework 2.0。

所以我有一个针对发布请求的操作。我想对输入数据进行一些验证，如果输入无效，则重定向到其他一些控制器操作（例如返回上一页并告诉用户输入无效）

我的代码看起来像这样：

```
if ( input.isNotValid )
  Redirect( foo )

// ... more code

Redirect( bar ) 
```

所以验证是早期的，之后有几行代码，在操作的最后我重定向到不同的页面。

我的问题是，即使验证失败，页面也不会重定向到 Foo。如果我这样做，则代码有效：

```
if ( input.isNotValid )
  Redirect( foo )
else
  Redirect( bar ) 
```

我是否需要将所有重定向和 Oks 放在操作结束时？

我知道在 Ruby on Rails 中有时会发生这种情况，对此的解决方案是在每次重定向后放置“并返回”。我也必须在 Play Framework 中做些什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T01:15:38.687

重定向不会将控制权返回给调用方法 - 您的代码将继续执行。重新安排您的代码，以便无效数据的重定向是该流的最终表达式，如下所示：

```
if ( input.isNotValid )
  Redirect( foo )
else {
  // ... more code
  Redirect( bar )
} 
```

此外，这可以通过更清楚地显示可以采用的各种分支来使您的代码更清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T01:11:45.137

尝试。'return Redirect(foo)' 在您的原始文件中

# ruby-on-rails-3 - Rails.cache.fetch 插入额外的值

> ID：11199396
> 
> 赞同：5
> 
> 时间：2012-06-26T00:45:09.333
> 
> 标签：ruby-on-rails-3, memcached, dalli

我们有一个页面显示我们的应用程序的顶级组。排行榜的计算成本很高，所以我们将结果缓存一个小时，如下所示：

```
@groupboard = Rails.cache.fetch("top_groups", :expires_in => 1.hour) do  
  Group.top_groups
end 
```

这是在第一次写入缓存后出现错误。在控制台中四处寻找，我看到 Group.top_groups 返回一个项目数组，如下所示：

```
[#<Group id: 4, name: "IBP", rank: 6, users_count: 13, leader_id: 4662>, 3887] 
```

当我查看从缓存返回的结果时，它看起来如下：

```
[#<Group id: 4, name: "IBP", rank: 6, users_count: 13, leader_id: 4662>, :@new_record_before_save], false, 3887] 
```

有谁知道是什么导致@new_record_before_save 和“假”值被插入到缓存中该对象的所有条目中？

我们正在使用 Dalli、Memcached 1.4.9、Rails 3.2.4、Ruby 1.9.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T03:08:44.890

在具有关联对象的 AR 对象上存在 Rails 缓存错误。尝试以下操作：

```
@groupboard = Rails.cache.fetch("top_groups", :expires_in => 1.hour) do  
  Group.top_groups.map(&:reload)
end 
```

[在https://github.com/mperham/dalli/issues/250](https://github.com/mperham/dalli/issues/250)上查看更多信息

# operating-system - 是否可以从应用程序端避免在 Windows CE 6 上使用文件分页？

> ID：11199397
> 
> 赞同：0
> 
> 时间：2012-06-26T00:45:12.283
> 
> 标签：operating-system, windows-ce, paging

在 WindowsCE 6.0 上，默认的操作系统分页设置有点小，如下所述 [http://blogs.msdn.com/b/ce_base/archive/2008/01/19/paging-and-the-windows-ce-paging-pool .aspx](http://blogs.msdn.com/b/ce_base/archive/2008/01/19/paging-and-the-windows-ce-paging-pool.aspx)

我无法说服操作系统提供商解决此类问题，因此我对是否有来自应用程序方面的建议解决方法感兴趣，因为我们受到过度分页/颠簸的影响。

从理论上讲，一个较小的 exe 会有所帮助，但我不相信这一点。我也在尝试避免文件的所有内存映射。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:51:21.570

您可以在创建 OS 映像时设置分页池大小，请参见[此处](http://msdn.microsoft.com/en-us/library/aa915364.aspx)。

如果您的操作系统映像是第三方的（或者您不控制它），那么您可以尝试在运行时使用[IOCTL_HAL_GET_POOL_PARAMETERS](http://msdn.microsoft.com/en-us/library/aa916094.aspx) IOCTL 调用设置分页参数。

另请查看此链接以获取有关[WinCE 分页池](http://blogs.msdn.com/b/ce_base/archive/2008/01/19/paging-and-the-windows-ce-paging-pool.aspx)的更多信息。

# javascript - JQuery：禁用滑动选项卡的顶部菜单

> ID：11199399
> 
> 赞同：0
> 
> 时间：2012-06-26T00:45:22.397
> 
> 标签：javascript, jquery

我离我的目标越来越近了。但是我在禁用滑动标签的顶部菜单时遇到了困难。我的目标是用户只能通过上一个/下一个控件导航选项卡。有些我的代码仍然没有禁用顶部菜单。任何建议为什么？[JSFIDDLE](http://jsfiddle.net/PS336/102/)

谢谢

****查询***

```
<script>
    $(document).ready(function() {

                $('.prev-tab').click(function() {
                    $('.st_tab_active').attr({'disabled': true});
               var tab=  $('.st_tab_active').parent().prev().children('a');
               tab.removeAttr('disabled');
               tab.trigger('click');
                return false;
                });

               $('.next-tab').click(function() {
                   $('.st_tab_active').attr({'disabled': true});
               var tab=  $('.st_tab_active').parent().next().children('a');
                tab.removeAttr('disabled');
                tab.trigger('click');
                return false;
            });

         });
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:00:23.203

该插件看起来像具有外部链接功能

在这里查看[http://codecanyon.net/item/sliding-tabs-jquery-plugin/full_screen_preview/141774](http://codecanyon.net/item/sliding-tabs-jquery-plugin/full_screen_preview/141774)

使用 href="#tab_2" 将 next 作为外部链接

```
<a href="#tab_2">Next</a>
<a href="#tab_1">Prev</a> 
```

当用户单击下一步时，它会移动到 tab_2 并更新 #tab_3 旁边的链接和 prev 到 #tab_1 的链接

它需要更改 HTML/CSS 和 JS

看到这个小提琴[http://jsfiddle.net/sabithpocker/PS336/104/](http://jsfiddle.net/sabithpocker/PS336/104/)

# asp.net-mvc-4 - 我们可以在 .net 4.0 主机上使用 ASP.NET MVC 4 的移动切换吗？

> ID：11199401
> 
> 赞同：1
> 
> 时间：2012-06-26T00:45:27.430
> 
> 标签：asp.net-mvc-4

我的网站被 bin 部署到 DiscountASP.net。我打算尝试将 m.domain 移动站点分开，但似乎他们并没有像我希望的那样干净地支持它（他们将设置一个通配符子域指针，然后在代码中我们支持我们自己的子域.. . 不是我的想法）。

此时，DiscountASP 正在运行 .net 4.0。我可以使用 ASP.NET MVC 4 移动功能吗？主要是布局切换（viewName.mobile.cshtml）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:27:52.797

是的，MVC 4 基于用户代理检测移动浏览器，因此您应该能够只创建移动视图，并将移动浏览器指向您的主站点以获取移动视图。

# jquery - jQuery/JavaScript 字符串替换特定单词及其后的所有字符

> ID：11199409
> 
> 赞同：2
> 
> 时间：2012-06-26T00:46:48.900
> 
> 标签：jquery, regex, replace, character

如何删除空格、关键字以及其后的所有内容？这就是我要找的

```
var test = $('.replaceMe').attr('title').replace(/ /g, '');

<a class="replaceMe" href="#" title="Replace By Everything After It">haha</a> 
```

导致：

```
test = Replace; 
```

* * *

更新：

关键字是一个尚未确定的词，将包含在所有标题中。在此示例中，它是“By”。

Roko 和 user1215106 的答案都有效——他们从示例中删除了所有多余的部分，留下了 Replace，但我未能澄清关键字之前的短语（在本例中为 Replace）会有所不同，并且会有不同数量的单词。

例如：

```
title="Replace By Everything After It"

Result= Replace

title="All This Should Stay By Things That Should Go"

Result= AllThisShouldStay 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:49:22.377

**[jsFiddle 演示](http://jsfiddle.net/roXon/5qkvq/2/)**

```
var keyword = 'By';

var test = $('.replaceMe').attr('title').split(keyword)[0].replace(/ /g, '') ; 
```

* * *

`keyword`或者，您可以执行以下操作 ，而不是使用变量：

```
var test = $('.replaceMe').attr('title').split('By')[0].replace(/ /g, '') ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T00:53:37.660

```
var test = $('.replaceMe').attr('title').replace(/\s+by\s.*/, '').replace(/\s+/. ''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T01:22:04.170

让`key`成为您要查找的关键字。

```
escapedKey = key.replace(/([-$^&*()\/\\+?.\[\]{}|])/g, "\\$1");
$('.replaceMe').attr('title').replace(new RegExp(escapedKey + ".*"), "") 
```

我试图概括任意关键字，但尚未对所有内容进行测试。

# android - 无法在 webview 中播放 youtube.com

> ID：11199412
> 
> 赞同：0
> 
> 时间：2012-06-26T00:47:20.507
> 
> 标签：android, webview

我想知道为什么在我将操作系统版本从 2.3.6 更新到 4.0.3 后我不能在我的 WebView 中播放 youtube.com，下面是我的代码

# 布局

```
<WebView 
    android:id="@+id/video"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="0.55"
    android:scrollbars="none"
/> 
```

# 显现

在这里我想添加 "android:hardwareAccelerated="true" 但不允许在 eclip 中添加这一行:(

```
<application
    android:icon="@drawable/ic_perry"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
    <activity
        android:name=".MeasSokSopheaActivity"
        android:label="@string/app_name"
        android:screenOrientation="nosensor" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".video" />
</application> 
```

# 活动

```
public class video extends Activity {
private WebView mWebView;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.video);
    if(!haveNetworkConnection())
    {
        AlertDialog alertDialog = new AlertDialog.Builder(video.this).create();
        alertDialog.setTitle("Connection Error!");
        alertDialog.setMessage("Please connected to the internet in order to use this apps.");
        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int which) {

               //here you can add functions

            } });
        alertDialog.setIcon(android.R.drawable.ic_dialog_info);
        alertDialog.show();
    }
    else
    {      
    mWebView = new WebView(this);

    mWebView = (WebView) findViewById(R.id.video);
    mWebView.setWebViewClient(new myWebClient());
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setAllowFileAccess(true);
    mWebView.getSettings().setPluginsEnabled(true);
    mWebView.getSettings().setBuiltInZoomControls(true);
    mWebView.loadUrl("http://domain/videoyoutube.php");
}
}
public class myWebClient extends WebViewClient  
{  
    @Override  
    public void onPageStarted(WebView view, String url, Bitmap favicon) {  
        // TODO Auto-generated method stub  
        super.onPageStarted(view, url, favicon);  
    }  
    @Override  
    public boolean shouldOverrideUrlLoading(WebView view, String url) {  
        // TODO Auto-generated method stub  
        view.loadUrl(url);  
        return true;
    }  
}
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) {
        mWebView.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
 }
@Override
public void onDestroy()
{
    if(mWebView != null)
    {
        mWebView.destroy();
        mWebView = null;
    }
    super.onDestroy();
}
private boolean haveNetworkConnection() {
    boolean haveConnectedWifi = false;
    boolean haveConnectedMobile = false;

    ConnectivityManager cm = (ConnectivityManager)  getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo) {
        if (ni.getTypeName().equalsIgnoreCase("WIFI"))
            if (ni.isConnected())
                haveConnectedWifi = true;
        if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
            if (ni.isConnected())
                haveConnectedMobile = true;
    }
    return haveConnectedWifi || haveConnectedMobile;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T01:02:34.163

YouTube 视频播放器使用 Flash，并非所有设备都支持（当然模拟器也不支持）。因此，您的视频将无法加载。

备择方案：

*   尝试查找视频的详细信息，并创建一个`Intent`处理视频的新内容（`ACTION_VIEW`我认为使用 ？）。一些关于这样做的细节（以及它的问题）[here](https://stackoverflow.com/questions/2978963/calling-youtube-app-using-action-view-intent-failing-most-of-the-time)。
*   将视频的 HTML 替换为使用 HTML5`<video ...>`标记的内容，该标记应在`WebView`. [（这里](http://www.youtube.com/html5)有一些有限的信息）。

# matlab - matlab中两个矩阵的一些计算

> ID：11199419
> 
> 赞同：0
> 
> 时间：2012-06-26T00:49:01.000
> 
> 标签：matlab

我有两个矩阵：矩阵`a`（6*6 主矩阵）和矩阵`b`（14*2 包含矩阵 a 中元素之间的关系）：

```
a = [
 0 1 0 0 1 1
 1 0 1 1 0 0
 0 1 0 1 0 0
 0 1 1 0 0 1
 1 0 0 0 0 0
 1 0 0 1 0 0 ]

b= [
 1 2
 1 5
 1 6
 2 1
 2 3
 2 4
 3 2
 3 4
 4 2
 4 3
 4 6
 5 1
 6 1
 6 4 ] 
```

我需要计算以下内容：

```
TS(i,j)=(a(i,j)+1)/(the number of elements related to i(from matrix b)
    * the number of elements related to j(from matrix b)) 
```

例如：`TS(1,2)=((1)+1)/(3*3)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:15:22.800

如果我理解正确，您想将 1 添加到 array `a`，然后分别除以行和列总和的乘积。

```
colSum = sum(a,1);
rowSum = sum(a,2);

denominator = bsxfun(@times,colSum,rowSum);

out = (a+1)./denominator; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T01:27:49.203

如果我正确理解您的问题，这应该可以满足您的需求：

```
rel = sum(a);
TS = (a + 1) ./ (rel' * rel); 
```

# xcode - Xcode LLDB 观察点

> ID：11199421
> 
> 赞同：22
> 
> 时间：2012-06-26T00:49:17.410
> 
> 标签：xcode, gdb, lldb

有没有办法使用 LLDB 在 Xcode 中观察变量？还是只有 GDB 才有可能？我正在尝试使用该命令`watchpoint set variable`，但收到以下消息：

> 无效命令“观察点设置”

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-17T02:17:45.523

从 Xcode 4.5 开始，iOS 和 Mac OS X 调试支持观察点。要在名为 的变量上设置断点`foo`，请执行

```
(lldb) watchpoint set variable foo 
```

您始终可以在 lldb 控制台中为命令使用最短的明确名称，因此

```
(lldb) w s v foo 
```

也可以在这里工作。

在 Xcode 中，在本地窗口中，您可以右键单击/控制单击变量，您可以选择在其上设置观察点。

当前的 arm 和 x86 cpus 仅支持同时处于活动状态的 4 个观察点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:32:27.357

尝试使用

```
frame variable -w 
```

反而。'watchpoint set' 命令在 lldb 的开发分支中，很可能会在 Xcode 的未来版本中使用。

例如：

```
frame variable -w write myvar 
```

编辑：`watch set variable`XCode 4.4 及更高版本的 lldb 现在支持原始帖子中提到的语法。

# javascript - jQuery、CORS、JSON（无填充）和身份验证问题

> ID：11199426
> 
> 赞同：3
> 
> 时间：2012-06-26T00:49:58.007
> 
> 标签：javascript, jquery, ajax, jsonp, cors

我有两个域。我正在尝试通过另一个域上的页面从一个域访问 JSON 对象。我已经阅读了有关此问题的所有内容，但仍然无法弄清楚。

提供 JSON 的域具有以下设置：

```
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Methods "GET, OPTIONS"
Header set Access-Control-Allow-Headers "origin, authorization, accept" 
```

在我的另一个域中，我正在调用以下内容：

```
$.ajax({
         type:'get',
         beforeSend: function(xhr) {
             var auth = // authentication; 
             xhr.setRequestHeader("Authorization", "Basic " + auth);
         }
         url:myUrl,
         dataType:'json',
         error: function(xhr, textStatus, errorThrown) { console.log(textStatus, errorThrown); }
      }) 
```

我知道“身份验证”已正确初始化（记录并检查）。但是，这不起作用。在 Firefox 的控制台中，我得到 Request URL: ...

```
Request Method:
OPTIONS

Status Code:
HTTP/1.1 401 Authorization Required 
```

如果我摆脱这`beforeSend:...`部分，我会看到以下内容

```
Request Method:
GET

Status Code:
HTTP/1.1 401 Authorization Required 
```

但是，提供 JSON 的域也可以提供 JSONP。我不想用这个，主要是因为应用程序会在专用浏览器上不断运行，我很担心[这个问题](http://bugs.jquery.com/ticket/5048)。更重要的是，我真的很想知道我所做的事情到底出了什么问题。我知道出于实际目的，有多种方法可以克服 JSONP 内存泄漏（例如不使用 jQuery）。

无论如何，当我使用 JSONP 时，我的代码如下所示：

```
$.ajax({
    url:newUrl,
    dataType:'jsonp',
    jsonp:'jsonp'
}).done(function(d){console.log(d)}) 
```

这得到以下

```
Request Method:
GET

Status Code:
HTTP/1.1 200 OK 
```

在它提示我输入用户名和密码的警报框之后。

jQuery 处理 JSONP 请求的方式与 JSON 请求的方式有根本的区别吗？如果是这样，我该如何解决这个问题？

谢谢。

编辑：这是我找到的。

基本上，因为我需要身份验证，所以 GET 请求正在发送一个 Authorization 标头。但是，这不是一个“简单”的标头，因此浏览器正在发送一个飞行前请求（OPTIONS）。但是，此预检请求没有任何身份验证，因此服务器拒绝了它。“解决方案”是将服务器设置为让 OPTIONS 请求不需要身份验证，并向其报告 HTTP 状态 200。

参考：[http ://www.kinvey.com/blog/item/61-kinvey-adds-cross-origin-resource-sharing-cors](http://www.kinvey.com/blog/item/61-kinvey-adds-cross-origin-resource-sharing-cors)

mail-archive[.com]/c-user@axis.apache.org/msg00790.html（不允许发布更多链接）

不幸的是，“解决方案”仅适用于 Firefox 而不是 Chrome。Chrome 只是将请求显示为红色，但没有向我提供有关失败原因的更多信息。

编辑 2：在 Chrome 上修复：我试图从中获取数据的服务器具有不受信任的安全证书。因此，Chrome 上的预检请求失败。解决方案 superuser[.com]/questions/27268/how-do-i-disable-the-warning-chrome-gives-if-a-security-certificate-is-not-trust（不允许发布更多链接）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-18T07:54:16.813

Welp，现在我已经有足够的代表了，我不妨回答这个问题并接受它。

当您尝试向`GET`带有标头的服务器发送 json 请求时，浏览器首先会发送一个`OPTION`请求以确保您可以访问它。不幸的是，这个`OPTION`请求不能携带任何身份验证。这意味着如果你想发送一个`GET`带有 auth 的，服务​​器必须允许一个*没有 auth*的 OPTION 。一旦我这样做了，事情就开始起作用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-30T14:54:52.293

[此处提供的一些示例可以](http://arunranga.com/examples/access-control/)进一步说明访问控制如何与 CORS 结合使用。特别是经过认证的 GET 示例。访问控制要求请求将`withCredentials`标志设置为`true`on `XMLHttpRequest`，并且为处理该`OPTIONS`方法的服务器做两件事：

1.  放`Access-Control-Allow-Credentials: true`
2.  `*`不要在`Access-Control-Allow-Origin`标题中使用通配符。这必须完全根据[MDN 文档](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS#Requests_with_credentials)关于 HTTP 访问控制 (CORS) 设置为原点。

本质上，处理 OPTIONS 请求的事物需要发回适当的响应标头，以便您可以发出该凭证请求。

在您的问题中，您说您正在与之交互的服务正在返回`Access-Control-Allow-Origin: *`，这与凭证的跨域请求不兼容。这需要专门返回原点。

前面提到的 MDN Http 访问控制 (CORS) 文档还链接到服务器端访问控制文档，该文档概述了服务器可能如何响应各种跨域请求 - 包括处理要求您发回正确标头的跨域凭据 POST 请求响应 OPTIONS 方法。[您可以在此处找到该示例](https://developer.mozilla.org/en-US/docs/Web/HTTP/Server-Side_Access_Control#Credentialed_requests)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T00:59:13.653

为什么不尝试在浏览器中输入要从中获取 JSON 的 URL 并查看会发生什么。听起来您实际上只需要在其他网站上进行身份验证即可访问它。

如果您的网站需要在 IE 等其他浏览器中运行，顺便说一下，您将需要 JSONP。安全性不允许跨站点请求工作。标题不会改变这一点。我相信您还需要在标题中添加安全策略。

# c++ - 如何在 Windows 7 中请求管理员权限？

> ID：11199430
> 
> 赞同：3
> 
> 时间：2012-06-26T00:51:14.060
> 
> 标签：c++, winapi, windows-7

我在 Windows 7 下使用 Qt 编写了一个应用程序。该应用程序以普通用户权限启动，但我想获得管理员权限，因为我想修改注册表以自动启动应用程序。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T04:11:01.183

看一下 MSDN 示例：[UAC 自我提升 (CSUACSelfElevation)](http://code.msdn.microsoft.com/windowsdesktop/CSUACSelfElevation-644673d3)

此外，Wikipedia 实际上[有一个很好的参考资料](https://en.wikipedia.org/wiki/User_Account_Control)，包括有关[ShellExecuteEx()](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762154%28v=vs.85%29.aspx) “ **runas** ”动词和提升请求的应用程序清单的信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T04:21:21.197

您应该将正确的清单嵌入到您的 exe 中：

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx)。

我知道，你说使用 win32 API，但考虑这个标准和推荐的方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T14:34:48.300

您**不需要**管理员权限即可自动启动您的应用程序。

只需将适当的键写入：

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run 
```

它不需要管理员权限（与 下的相同路径不同`HKEY_LOCAL_MACHINE`）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T14:31:53.520

要自动启动应用程序，您不需要管理员权限！不要在 HKLM（您需要管理员权限的地方）下添加注册表项，而是使用 HKCU 就可以了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T01:10:25.667

请注意，程序运行时不能更改权限。它必须被杀死并以正确的权限重新启动。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-04T08:23:13.187

要在 HKLM 中自动启动应用程序，需要管理权限。但是应用程序的权限在运行时不能改变。

所以我做了一个新的小应用程序，它的任务只是写注册表来让主应用程序自动启动。

主应用程序可以使用 ShellExecuteEx 调用此应用程序以要求管理权限。

# matplotlib - 箱线图的熊猫和半对数问题

> ID：11199437
> 
> 赞同：2
> 
> 时间：2012-06-26T00:52:19.810
> 
> 标签：matplotlib, pandas

我有一个`pandas` `dataframe`列：

点击值的“视频”和“链接”

带有日期时间的索引。出于某种原因，当我在视频系列中使用符号学和箱线图时，我得到了错误

```
ValueError: Data has no positive values, and therefore can not be log-scaled. 
```

但是当我在“链接”系列上这样做时，我可以正确绘制箱线图。

我已经验证**了**“视频”和“链接”系列都具有 NaN 值和正值。

关于为什么会发生这种情况的任何想法？以下是我为验证情况所做的工作

**下面是示例代码：**

```
#get all the not null values of video to show that there are positive
temp=a.types_pivot[a.types_pivot['video'].notnull()]
print temp

#get a count of all the NaN values to show both 'video' and 'link' has NaN
count = 0 
for item in a.types_pivot['video']:
    if(item.is_integer() == False):
        count += 1

#try to draw the plots
print "there is %s nan values in video" % (count)

fig=plt.figure(figsize=(6,6),dpi=50)
ax=fig.add_subplot(111)
ax.semilogy()
plt.boxplot(a.types_pivot['video'].values) 
```

**这是视频系列代码的相关输出**

```
    输入链接视频
    创建时间

    2011-02-10 15:00:51+00:00 NaN 5
    2011-02-17 17:50:38+00:00 NaN 5
    2011-03-22 14:04:56+00:00 NaN 5视频中有 5463 个 nan 值

```

我运行相同的确切代码，除了我这样做

```
a.types_pivot['link'] 
```

我能够绘制箱线图。

**以下是链接系列的相关输出**

```
索引：5269 个条目，2011-01-24 20:03:58+00:00 到 2012-06-22 16:56:30+00:00
数据列：
链接 5269 个非空值
照片 0 非空值
问题 0 非空值
状态 0 非空值
swf 0 非空值
视频 0 非空值
数据类型：float64(6)链接中有 216 个 nan 值

```

```
Using the describe function

a.types_pivot['video'].describe()

<pre>
count    22.000000
mean     16.227273
std      15.275040
min       1.000000
25%       5.250000
50%       9.500000
75%      23.000000
max      58.000000
</pre> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:44:35.737

**注意：由于 imgur 的一些问题，我无法上传图片。我稍后再试。**

通过调用 pd.DataFrame.boxplot() 来利用 pandas matplotlib 助手/包装器。我相信这将为您处理 NaN 值。它还将两个系列放在同一个图中，以便您轻松比较数据。

**示例** 创建一个包含一些 NaN 值和负值的数据框

```
In [7]: df = pd.DataFrame(np.random.rand(10, 5))    
In [8]: df.ix[2:4,3] = np.nan
In [9]: df.ix[2:3,4] = -0.45
In [10]: df
Out[10]: 
          0         1         2         3         4
0  0.391882  0.776331  0.875009  0.350585  0.154517
1  0.772635  0.657556  0.745614  0.725191  0.483967
2  0.057269  0.417439  0.861274       NaN -0.450000
3  0.997749  0.736229  0.084077       NaN -0.450000
4  0.886303  0.596473  0.943397       NaN  0.816650
5  0.018724  0.459743  0.472822  0.598056  0.273341
6  0.894243  0.097513  0.691781  0.802758  0.785258
7  0.222901  0.292646  0.558909  0.220400  0.622068
8  0.458428  0.039280  0.670378  0.457238  0.912308
9  0.516554  0.445004  0.356060  0.861035  0.433503 
```

请注意，我可以像这样计算 NaN 值的数量：

```
In [14]: df[3].isnull().sum()   # Count NaNs in the 4th column
Out[14]: 3 
```

箱线图很简单：

```
In [16]: df.boxplot() 
```

您可以创建一个半对数箱线图，例如，通过：

```
In [23]: np.log(df).boxplot() 
```

或者，更一般地说，修改/转换为您心中的内容，然后是箱线图。

```
In [24]: df_mod = np.log(df).dropna()    
In [25]: df_mod.boxplot() 
```

# actionscript-3 - 使对象表现得像 AS3 中的单选按钮

> ID：11199439
> 
> 赞同：2
> 
> 时间：2012-06-26T00:52:22.437
> 
> 标签：actionscript-3, flash, flash-cs5.5

我想实现一种非常简单的方法来存储包含我单击的最后一个特定“CustomObject”的变量。我想点击其他对象被忽略。以下面的示例代码为例，假设 CustomObject 扩展了 MovieClip：

```
//Code within the Document Class:
var square1:CustomObject = new CustomObject();
var square2:CustomObject = new CustomObject();
var square3:CustomObject = new CustomObject();
var triangle1:DifferentObject= new DifferentObject();
square1.x=100; square2.x=200; square3.x=300;
addChild(square1);
addChild(square2);
addChild(square3);
addChild(triangle1);

//Code within the CustomObject Class:
this.addEventListener(MouseEvent.CLICK,radioButtonGlow);
public function radioButtonGlow(e:MouseEvent):void
{
    var myGlow:GlowFilter = new GlowFilter();
    myGlow.color = 0xFF0000;
    myGlow.blurX = 25;
    myGlow.blurY = 25;
    this.filters = [myGlow];
} 
```

每当我单击正方形时，这都非常有用-它们完全按预期亮起。但是，我想实现一个功能：1）将我单击的最后一个方块存储到文档类中的一个变量中 2）当我单击另一个方块时，从所有其他方块中移除发光

非常感谢任何反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:54:13.523

我建议创建一个作为 CustomObject 实例集合的类并以这种方式管理它们（即确保只能选择该集合中的一个，等等）。

样本：

```
public class CustomCollection
{

    // Properties.
    private var _selected:CustomObject;
    private var _items:Array = [];

    // Filters.
    private const GLOW:GlowFilter = new GlowFilter(0xFF0000, 25, 25);

    // Constructor.
    // @param amt The amount of CustomObjects that should belong to this collection.
    // @param container The container to add the CustomObjects to.
    public function CustomCollection(amt:int, container:Sprite)
    {
        for(var i:int = 0; i < amt; i++)
        {
            var rb:CustomObject = new CustomObject();
            rb.x = i * 100;

            _items.push(rb);
            container.addChild(rb);
        }
    }

    // Selects a CustomObject at the specified index.
    // @param index The index of the CustomObject to select.
    public function select(index:int):void
    {
        for(var i:int = 0; i < _items.length; i++)
        {
            if(i == index)
            {
                _selected = _items[i];
                _selected.filters = [GLOW];

                continue;
            }

            _items[i].filters = [];
        }
    }

    // The currently selected CustomObject.
    public function get selected():CustomObject
    {
        return _selected;
    }

    // A copy of the array of CustomObjects associated with this collection.
    public function get items():Array
    {
        return _items.slice();
    }
} 
```

然后，您可以将文档类中的代码修改为：

```
var collection:CustomCollection = new CustomCollection(3, this);
collection.select(1); 
```

您需要为处理选择按钮的单击事件添加自己的逻辑。我建议`index`为每个 CustomObject 添加一个属性以及对它添加到的集合的引用。这样，您可以简单地将 click 事件添加到 CustomObject 类中，并使用如下处理函数：

```
private function _click(e:MouseEvent):void
{
    _collection.select(index);
} 
```

# jquery - jQuery锚悬停淡出

> ID：11199442
> 
> 赞同：3
> 
> 时间：2012-06-26T00:52:43.047
> 
> 标签：jquery, html, css

是否可以在悬停时创建 jquery“淡入淡出”效果（在带有图像的锚点上）？

***HTML***

```
<ul id="list">
    <li>
        <a target="_blank" href="http://google.com">
            <img src="http://www.littlegiant.co.nz/wp-content/uploads/2012/01/Meccano-293x170.jpg" alt="" />
        </a>
    </li>
</ul> 
```

***CSS***

```
#list li a img {
    position: relative;
    z-index: -1;
}

#list li a {
    display: block;
    width: 293px;
    height: 170px;
}
#list li a:hover {
    background: red;
    width: 200px;
    height: 50px;
} 
```

这是我到目前为止所拥有的：http: [//jsfiddle.net/ecFBK/4/](http://jsfiddle.net/ecFBK/4/)

当您将鼠标悬停在正确的红色上时 - 我只是不知道如何使用 jquery 使其淡入淡出。请不要 CSS3 建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:02:15.023

用你的 HTML 标记是不可能的。您需要淡入一个`span`元素，而不是`a`实际保存您图像的元素！

## *[jsFiddle 演示](http://jsfiddle.net/roXon/ecFBK/6/)*

jQuery：

```
$('#list li a').hover(function(){
   $('span', this).stop().fadeIn(500);
}, function(){
  $('span', this).stop().fadeOut(500);    
}); 
```

HTML：

```
<ul id="list">
    <li>
        <a target="_blank" href="http://google.com">
            <img src="http://www.littlegiant.co.nz/wp-content/uploads/2012/01/Meccano-293x170.jpg" alt="" />
            <span>Description here!</span>
        </a>
    </li>
</ul> 
```

CSS：

```
#list li a {
    display: block;
    position:relative;
    width: 293px;
    height: 170px;
}

#list li a img {
    position: relative;
    z-index: -1;
}

#list li a span {
    position:absolute;
    left:0px;
    display:none;
    background:red;      
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T01:02:31.467

您可以通过向链接添加覆盖来伪造它。您需要添加`position: relative`到链接 CSS，并删除`a:hover`CSS，然后您可以为 jQuery 执行以下操作：

```
$('#list li a').hover(function(ev){
    if (!$(this).find('.hover').length) {
        $('<span class="hover">').css({
            'background-color': 'red',
            'display': 'inline-block',
            'opacity': 0,
            'width': 293,
            'height': 170,
            'position': 'absolute',
            'top': 0,
            'left': 0
        }).appendTo($(this));
    }
    $(this).find('.hover').stop(true, true).animate({'opacity': 1}, 2000);
}, function(ev){
    $(this).find('.hover').stop(true, true).animate({'opacity': 0}, 1000);
}); 
```

## [看演示](http://jsfiddle.net/ecFBK/10/)

# asp.net - 分层嵌套中继器重复父项

> ID：11199445
> 
> 赞同：1
> 
> 时间：2012-06-26T00:53:11.277
> 
> 标签：asp.net, database, ms-access, datatable, repeater

我正在尝试使用来自 Access 数据源的嵌套中继器生成分层列表。每个项目都有一个唯一的 ID，但根据区域进行分类。

我希望列表看起来像：

*   **区域1**
    *   项目1
    *   项目2
*   **区域2**
    *   第 3 项
    *   第 4 项
*   **等等**……

尽我所能，区域组元素不断重复，我得到类似的东西：

*   **区域1**
    *   项目1
*   **区域1**
    *   项目2
*   **区域2**
    *   第 3 项
*   **区域2**
    *   第 4 项
*   **等等**……

我的标记发布在下面。

```
 <asp:Repeater ID="CategoryRepeater" runat="server" OnItemDataBound="CategoryRepeater_bound" EnableViewState="false">
            <HeaderTemplate>
                <ul>
            </HeaderTemplate>
            <FooterTemplate>
                </ul>
            </FooterTemplate>
            <ItemTemplate>
                <li>
                    <%#((DataRowView)Container.DataItem)["Area"]%>
                </li>
                    <asp:Repeater ID="childRepeater" runat="server">
                        <HeaderTemplate>
                            <ul>
                        </HeaderTemplate>
                        <FooterTemplate>
                            </ul>
                        </FooterTemplate>
                        <ItemTemplate>
                            <li>
                                <%#((DataRowView)Container.DataItem)["ItemID"]%>
                            </li>                     
                        </ItemTemplate>
                    </asp:Repeater>
            </ItemTemplate>
        </asp:Repeater>

protected void Page_Load(object sender, EventArgs e)
{
    string cn = "Provider=Microsoft.Jet.OleDb.4.0;Data Source=|DataDirectory|Source.mdb";

using (OleDbConnection conn = new OleDbConnection(cn))
  {

    OleDbCommand cmd = new OleDbCommand("Select ItemID, Area FROM [Location]", conn);
    OleDbDataAdapter da = new OleDbDataAdapter(cmd);

    DataSet ds = new DataSet();
    da.Fill(ds, "Table1");
    cmd.CommandText = "SELECT Area, ItemID, Drawing FROM [Location]";
    da.SelectCommand = cmd;
    da.Fill(ds, "Table2");
    ds.Relations.Add(new DataRelation("drTable", ds.Tables["Table1"].Columns["ItemID"], ds.Tables["Table2"].Columns["ItemID"]));
    CategoryRepeater.DataSource = ds.Tables["Table1"];
    CategoryRepeater.DataBind();
  }
}

protected void CategoryRepeater_bound(object source, RepeaterItemEventArgs e)
{
    RepeaterItem item = e.Item;
    if (item.ItemType == ListItemType.AlternatingItem || item.ItemType == ListItemType.Item)
    {
        DataRowView drv = (DataRowView)e.Item.DataItem;

        Repeater rep = (Repeater)item.FindControl("childRepeater");
        rep.DataSource = drv.CreateChildView("drTable");
        rep.DataBind(); 

     }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:55:29.230

您需要将子中继器放置在`<li></li>`标签内，目前它在标签之外会导致主要的 html 布局问题。你的整个逻辑也是不正确的。在您的第一个查询中，您正在选择这样的区域`Select ItemID, Area FROM [Location]`，这将返回如下数据：

```
Area 1  Item 1
Area 1  Item 2
Area 2  Item 3
Area 2  Item 4 
```

依此类推，因此中继器将相应地分组。因此，当您将父级绑定到这些结果时，您将获得 Area1、Area1、Area 2、Area 2... 我会避免使用数据表，可能会使用 Linq to SQL 或 Entity Framework 之类的东西。但在您的情况下，最快的修复方法如下：

添加标签

```
<li>                           
    <asp:Label ID="lblArea" runat="server" Text='<%#((DataRowView)Container.DataItem)["Area"]%>' />                       
</li> 
```

在代码中

```
protected void Page_Load(object sender, EventArgs e)    {        
    string cn = "Provider=Microsoft.Jet.OleDb.4.0;Data Source=|DataDirectory|Source.mdb";        
    using (OleDbConnection conn = new OleDbConnection(cn))      
    {            
        OleDbCommand cmd = new OleDbCommand("Select Area FROM [Location]", conn);        
        OleDbDataAdapter da = new OleDbDataAdapter(cmd);                
        DataSet ds = new DataSet();        
        da.Fill(ds, "Table1");               
        CategoryRepeater.DataSource = ds.Tables["Table1"];                    
        categoryRepeater.DataBind();      
    }    
}

protected void CategoryRepeater_bound(object source, RepeaterItemEventArgs e) 
{             
    RepeaterItem item = e.Item;             
    if (item.ItemType == ListItemType.AlternatingItem || item.ItemType == ListItemType.Item)             
    {                             
        Repeater rep = (Repeater)item.FindControl("childRepeater");  
        Label lblArea = (Label)item.FindControl("lblArea");  

        OleDbCommand cmd = new OleDbCommand("Select ItemID, Drawind FROM [Location] WHERE Area = '" + lblArea.Text+ "'", conn);        
        OleDbDataAdapter da = new OleDbDataAdapter(cmd);                
        DataSet ds = new DataSet();        
        da.Fill(ds, "Table1");               
        rep.DataSource = ds.Tables["Table1"];                    
        rep.DataBind();  
    }                  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:03:24.077

我认为您设置的 DataRelation 不正确。根据您的代码，您将 Area 作为父级，将 ItemId 作为子级。但是，当您创建 DataRelation 时，您将两个表中的列都设置为 ItemId。这将导致子表与父表是一对一的。

您应该改为在列 Area 上设置 DataRelation。这应该可以解决我认为的问题。

但是，如果父表包含具有相同区域的多行，则这将不起作用，因此您可能必须更改用于填充父表（表 1）的 sql。目前尚不清楚这是否有必要，但我认为有必要。也许是这样的：

```
OleDbCommand cmd = new OleDbCommand("Select DISTINCT Area FROM [Location]", conn); 
```

希望这可以帮助。

编辑：另请参阅 fenix2222 关于格式错误的 html 的回答。

# c++ - 使用 Qt、Wt 或 NaCl 构建框架？

> ID：11199452
> 
> 赞同：9
> 
> 时间：2012-06-26T00:54:07.990
> 
> 标签：c++, qt, google-nativeclient, wt

我正在考虑设计一个框架，让一个 C++ 代码库成为大多数主要平台（Mac OS、Windows、Linux 和可能的 Android）的桌面应用程序和 Web 应用程序。我已经决定 Qt 最适合桌面构建，但是对于 Web App 部分，我在 Google Native Client 和 Wt 之间存在冲突。

Wt 代码可能更容易与 Qt 代码兼容，但是我听说 Wt 实际上是 AJAX 输出，所以我不知道这会对性能产生多大影响（我打算用它开发一个游戏引擎，所以我需要性能）。

另一方面，NaCl，更多，嗯......原生。但这似乎是一团糟，尤其是与 JS 集成，我只想用 C++ 编写并完成它。此外，我不知道它与 Qt 的兼容性如何。

我已经研究了好几个星期了，对此我也不太了解。所以它真的归结为：

答：我可以从字面上（或几乎）用 Q 替换所有 Wt 对象名称前面的所有 W 并使其成为 Qt 兼容代码吗？

B：Wt 是不是原生的，它在运行时执行的速度有多快（我似乎找不到答案）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T13:19:25.433

也可以将 Wt 作为 NaCL 应用程序运行，事实上，这将结合两全其美。Wt 本身（及其依赖项）使用 NaCL 工具链构建良好，它只是当前缺少的连接器库。去年有一个 GSOC 项目可以实施，但没有实现。

# mysql - 通过另一个外键关联外键

> ID：11199454
> 
> 赞同：2
> 
> 时间：2012-06-26T00:54:37.630
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, foreign-keys

我有这 3 个模型

```
class User < ActiveRecord::Base
  has_many :answers, :as => :owner
end

class Answer < ActiveRecord::Base
  belongs_to :owner, :polymorphic => true
  has_one :test  
end

class Test < ActiveRecord::Base
  belongs_to :answer
end 
```

所以我想通过模型将`Test`模型与模型关联起来，而不需要在它们之间创建新的关联，所以我将以下内容放入测试模型中：`User``Answer`

```
has_one :owner, :through => :answer 
```

但它不起作用，我收到了这个错误

```
ActiveRecord::HasManyThroughAssociationPolymorphicSourceError: Cannot have a has_many :through association 'Test#owner' on the polymorphic object 'Owner#owner'. 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:05:42.410

在`Test`：

```
delegate :owner, :to => :answer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:52:33.650

您必须将`source_type`选项指定为`owner`多态关联

```
class Test < ActiveRecord::Base
  belongs_to :answer
  has_one :owner, :through => :answer, :source_type => "User"
end 
```

# javascript - 临时 JavaScript onclick 切换

> ID：11199456
> 
> 赞同：1
> 
> 时间：2012-06-26T00:54:44.323
> 
> 标签：javascript, function, button, onclick, toggle

我很难弄清楚这一点。我有一个表格。

```
<form id="form1" .. target="right" action="blablah">
<input .. />
<input type="submit" id="ycsubmit" onclick="..." value="Go!" />
</FORM> 
```

我有一个需要在提交时执行的函数：ycClick();

执行 ycClick() 后，我需要将 onClick 切换为 null 30 秒，然后切换回来，这样如果在 30 秒后再次按下，它将再次执行 ycClick()，然后再禁用 30 秒，依此类推。我已经尝试了这 100 种不同的方法，但这就是我现在所拥有的：

```
function ycClick(){
...
}

var isEnabled = true;

function toggleSubmit() {
    if (isEnabled = true) {
        document.getElementById("ycsubmit").onclick = null;
    } else {
        document.getElementById("ycsubmit").onclick = timer();
    } 
//isEnabled = !isEnabled;
}

function timer(){
ycClick();
toggleSubmit();
setTimeout("toggleSubmit()", 30000);
} 
```

然后我将 onclick 设置为触发 timer(); 照原样，这会触发 timer()，它会触发 ycClick()，然后将 onclick 切换为 null，但不会在 30 秒后将其切换回来。我怀疑它与这条线有关：

```
isEnabled = !isEnabled; 
```

但删除没有任何区别，它的操作仍然完全相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T01:04:52.183

有很多方法可以改进你的代码；其中一些是简单的错误，另一些则表明您应该了解 DOM 和 JavaScript 运行时的其他一些特性。这是我注意到的，按顺序：

### 错误

*   你在测试时犯了一个常见的错误`if (isEnabled = true){`。单`=`是一个分配，因此您的代码不会测试 isEnabled 是否为真。相反，它正在测试分配的结果，它始终是`true`. 使用三等号`===`来测试`isEnabled`当前是否为真。*（您还会看到一个双等号`==`，但此运算符可能会产生意想不到的效果并且不太严格，因此请尽量避免使用它。）*
*   就行了`document.getElementById("ycsubmit").onclick = timer();`，你应该去掉后面的括号`timer`。使用括号，您正在**执行`timer`函数**，而不是分配对该函数的引用。onclick 方法被设置为 的返回值`timer`，由于您没有指定`return`语句，它将是`undefined`.
*   你永远不会设置`isEnabled`为假！在您当前的设置中，您应该把`isEnabled = !isEnabled`线路留在里面！

### 方法问题

*   我上面的答案展示了一种更好的方法来禁用表单提交。您不应该尝试设置和取消设置 onclick 处理程序；相反，您应该处理处理程序本身内部的重复点击。事实上，它可以更简单：如果此表单正常提交而不是通过 JavaScript 验证或通过 AJAX 发送，那么您可以简单地禁用输入而不必担心重新启用它，因为当服务器完成处理表单提交。该页面将消失或使用启用的提交按钮重新加载！
*   您不应该使用提交按钮上的点击事件来阻止表单提交。为此，表单有一个提交事件。在某些浏览器中可以通过返回键提交表单，这将绕过您的点击事件。您应该订阅表单的提交事件。
*   您不应该首先使用“onclick”属性来分配事件处理程序。您应该将事件侦听器添加到您的 DOM 元素。这会产生更灵活的事件——例如，您可以将多个事件分配给同一个元素——并更好地处理事件执行的范围。最后，它将文档的表示和行为与其内容分开。这是 jQuery 和其他流行库的做法。我意识到这需要更多的编码，但这就是存在像 jQuery 这样的操作库的原因。你应该试一试！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T01:13:43.040

你可以这样做：

```
function ycClick () {
    var timestamp = +( new Date );
    if ( ycClick.timestamp && timestamp - ycClick.timestamp < 30000 ) return;
    ycClick.timestamp = timestamp;

    // the actual code of the function
} 
```

**现场演示：http:** [//jsfiddle.net/znKRC/7/](http://jsfiddle.net/znKRC/7/)

在我的演示中，反复单击按钮，您会注意到该函数的第二部分仅每 3 秒执行一次。因此，上述函数的前三行确保只有在最后 30 秒内没有执行后续代码时才执行后续代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-12T17:58:09.190

简单的答案是使用 JavaScript“setTimeout(function(){},t)”，其中 function 是要执行的命令，t = 毫秒时间。

您也可能需要设置对象样式以隐藏元素。

# android - 将 Android 应用程序从免费/付费模式转换为应用内付费解锁

> ID：11199457
> 
> 赞同：11
> 
> 时间：2012-06-26T00:54:49.880
> 
> 标签：android, sdk, in-app-purchase, google-play, in-app-billing

我目前在市场上有一个应用程序，它既有免费的、受广告支持的版本，也有付费的无广告“专业”版本，具有额外的功能。

每个发布周期构建两个不同的项目对于小行星来说真的很痛苦。我很想把它打成一个。

我有兴趣听到有关这样做的反馈，如果这里有人执行过这样的动作......转换到这个新模型有什么缺点吗？

我目前有十几个付费用户。我是否可以通过他们的电子邮件地址让他们成为应用内购买的“所有者”，还是他们会被迫重新购买该应用？（如果我不能让它们成为所有者，我可能会放弃这整个想法，直到我的下一个应用程序。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T22:09:58.063

有趣的。我以另一种方式做到了（将（应用程序+补充许可证）转换为仅付费版本，没有试用版）。但我的旧（应用程序 + 许可证方案）可能对你有用。它是在不久前实施的，在应用内购买非常简单之前。

我的旧许可方案：主应用程序的一个 Google Play 下载；主应用程序许可证的单独列表（请参阅“2player 1.0 许可证（已过时）”）。许可证下载不提供 UI，但实现了内容提供程序。主应用程序尝试查询许可 APK 提供的内容提供者。如果内容提供者查询成功，主应用程序将转换为“许可”状态。内容提供者本身提供了基本的挑战/响应数据交换，只是为了防止完全微不足道的黑客攻击。

稍作修改就可以为您工作。您可以将旧的付费许可 APK 替换为提供质询响应内容提供程序的 APK，并提供足够的 UI 来通知旧应用程序的用户他们需要安装新版本 2.0 APK。然后修改您的应用内购买应用程序以检查内容提供者的存在，如果内容提供者查询成功，则转换为许可状态。

旧应用程序的用户强制下载会有点笨拙，但在我看来，无论如何你都必须强迫他们以某种方式下载新应用程序。但对于十几个付费用户来说，这似乎是无害的。

# stream - 在 OSX 上通过 AppleScript 使用 iTunes 打开 URL

> ID：11199464
> 
> 赞同：2
> 
> 时间：2012-06-26T00:55:44.020
> 
> 标签：stream, applescript, itunes

我想使用 iTunes 在 MacOSX 上呈现 http mp3 流。我了解以编程方式远程控制 iTunes 的最佳方式是 AppleScript，我已经可以启动 iTunes，但是：

1.  从 URL 打开流的正确语法是什么？
2.  通过苹果脚本运行 iTunes 时是否可以保持 iTunes 不可见/隐藏？它总是打开 GUI ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T01:02:57.810

找到了解决方案：

```
tell application "itunes" to  open location "your_url_here"
tell application "itunes" to play 
```

它可以明显地打开 iTunes，但至少已将其最小化。

顺便说一句，我使用 Java 从 Java 运行它（我相信这需要 Snow Leopard）：

```
new ScriptEngineManager().getEngineByName("AppleScript").eval("tell application ..."); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T00:40:55.667

在 iTunes 未运行时发送命令将导致它启动并显示其默认 GUI；没有简单的方法。

但是，如果您想强制 iTunes 隐藏，而不是在它不可见时将其隐藏，您可以这样做：

```
tell application "iTunes"
  open location "your_url_here"
  play
  set visible of every window to false
end tell 
```

或者，如果您只想在脚本启动时隐藏 iTunes，您可以执行以下操作：

```
tell application "System Events"
  set iTunesWasRunning to count of (processes whose name is "iTunes")
end tell
tell application "iTunes"
  open location "your_url_here"
  play
  if iTunesWasRunning is 0 then set visible of every window to false
end tell 
```

当然有一些边缘情况它不能处理（例如，如果 iTunes 正在运行，但浏览器窗口被最小化，你会导致它取消最小化，并且不会重新最小化它）；查看 iTunes 和 System Events 字典，并尝试您关心的每个边缘情况。此外，还有一个小的竞争条件（如果用户或其他脚本碰巧在您检查后启动它……），但您对此无能为力。

您实际上并不需要“播放”，除非在某些不常见的情况下（例如，iTunes 已经在流中暂停），但这并没有什么坏处。

最后，默认情况下，每次运行时都会将“your_url_here”添加到名为“Internet Songs”的播放列表中，即使它已经存在，如有必要，也会创建播放列表。希望你不介意；如果你这样做了，还有更多的技巧要学。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T16:25:58.707

或者您可以使用 QuickTime Player，就像在此处回答的那样。打开相同的文件，预先安装，并且可以强制使用几乎没有可见的 GUI。但是，如果您希望在一个流完成后开始另一个流，它会变得更加复杂。

[在 iTunes 中播放流而不将其添加到库/播放列表](https://stackoverflow.com/questions/12060827/play-a-stream-in-itunes-without-adding-it-to-the-library-playlist/13743077#13743077)

# asp.net-mvc - 具有导航属性的模型设计指南

> ID：11199467
> 
> 赞同：0
> 
> 时间：2012-06-26T00:56:00.993
> 
> 标签：asp.net-mvc, entity-framework, transactions, ef-code-first

我正在使用带有 EF 5 的 MVC 4 Code First 并尝试规范化一些数据。我将从三个实体开始，并举例说明我的两个不同场景......

用户模型

```
public class User
{
    public int UserId { get; set; }
    public string PseudoName { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }
    public string Password { get; set; }
    public Gender Gender { get; set; }
    public DateTime DateOfBirth { get; set; }

   // Other account related properties....

    public virtual Address Address { get; set; }
    public virtual Profile UserProfile { get; set; }
} 
```

地址模型

```
public class Address
{
    public int UserLocationId { get; set; }
    public int UserId { get; set; }
    // Address properties
} 
```

轮廓模型

```
public class Profile
{
    public int UserProfileId { get; set; }
    public int UserId { get; set; }
    // Specific details about the user...
} 
```

我不太熟悉 EF 如何处理事务。通常我会创建一个这样的数据库并启动一个事务，以确保在创建用户时我可以在创建用户时创建用户、个人资料和地址记录。使用 EF 以这种方式执行此操作我必须添加用户并保存它，然后从新生成的用户中检索 userId，然后再调用两个插入并将密钥添加到地址/配置文件模型并保存它们。我对这样做感到厌倦，因为如果在此过程中出现故障，那么用户文件将不完整。现在这是我最初的做法，但不确定这在数据库方面是否可以接受，但到目前为止似乎工作正常，只需要第二个意见。

第二种情况基本上从地址和配置文件模型中删除了外键，我所做的是使用上下文创建我的用户对象，并在用户对象中创建一个新的配置文件/地址属性，然后将对象插入并保存到数据库中。DB 端发生的情况是它创建了一个没有任何 FK 的新配置文件/地址，但在 User 表中添加了 FK 作为 Profile_ProfileId、Address_AddressId。

第二个选项比第一个更有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:05:16.697

EF 足够聪明，可以在单个事务中处理多个相关实体的插入。

```
var user = new User { };
user.Profile = new Profile { };
user.Address = new Address { };
context.Users.Add(user);
context.SaveChanges(); 
```

它将计算实体的插入顺序并使用数据库生成的 PK 值更新属性。

# asp-classic - asp classic：获取位于管理文件夹中的文件的当前路径

> ID：11199469
> 
> 赞同：5
> 
> 时间：2012-06-26T00:56:05.037
> 
> 标签：asp-classic

我有一个文件位于一个文件夹中，其完整路径是这样的：

> \mymachine\mydrive$\Inetpub\wwwroot\myfolder

是否可以通过 asp serverVariables 获得相同的值？我害怕在我的源代码中暴露上面的路径。谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-26T02:45:52.873

万一有人想知道我找到了解决方案。我用了

```
Server.MapPath(".") 
```

# java - 单个套接字上的多个对象流

> ID：11199471
> 
> 赞同：2
> 
> 时间：2012-06-26T00:56:33.587
> 
> 标签：java, sockets, networking

我正在编写一个程序，它需要像图像这样的大数据（最终可能是音频流或其他东西，尽管这不是一个直接的目标），以及发送 Host -> Client 的小指令。目前，我可以将其编写为普通的 TCP 客户端-服务器应用程序。但是，这确实意味着无论何时发送图像，都不会传输其他数据，包括可能会很快发送的相当重要的小指令。我可以通过在服务器和每个客户端之间创建多个套接字来解决这个问题，但我真的更愿意将事情保留在一个套接字上（因此使用一个端口）。是否有协议或东西可以用来同时发送多个数据流（或者至少以某种方式交织？）？任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:15:23.597

我强烈建议您将两者分开，这是许多其他协议（例如[FTP](http://en.wikipedia.org/wiki/File_Transfer_Protocol)）使用的一种做法。

如果你真的想组合它们，你可以，但我不知道有任何标准工具可以这样做。请记住，您需要通过某种方式在客户端知道哪个字节来自哪个流。您可能需要发明某种转义序列以在数据流中发送以向客户端指示控制指令即将到来。当然，转义序列可能会自然地出现在您的数据中，因此您还需要对数据进行适当的编码。

编辑：另一种方法是构建您的数据。发送 DATA START 命令，然后发送 1024 字节的数据，然后发送任何其他命令，然后发送 DATA CONTINUE 命令，然后发送下一个 1024 字节，然后发送 DATA END 命令（当然是 DATA START/CONTINUE/END在您发明的某些协议中组成命令）。

如果您有时间并且对学习感兴趣，这将是一个有趣的问题，但如果您有任何匆忙，这可能是比使用多个套接字更慢的方法。您始终可以先将控制消息发送到客户端，然后让客户端打开与服务器的数据连接。这将允许您只需要在客户端打开一个端口，在服务器端打开一个端口，并且通常可以简化防火墙问题。

# string - Haskell 中的字符串解析

> ID：11199475
> 
> 赞同：3
> 
> 时间：2012-06-26T00:56:44.753
> 
> 标签：string, parsing, haskell

我对 Haskell 很陌生，目前正在尝试解决需要一些字符串解析的问题。我的输入字符串包含逗号分隔的引号中的单词列表。我想将此单个字符串解析为字符串的单词列表。我应该从哪里开始学习解析这样的字符串？是否有部分模块和/或功能会有所帮助？

ps 请不要发布完整的解决方案。我只是要求一个指向起点的指针，这样我就可以学习如何去做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T18:28:20.473

我最终决定推出自己的解析功能，因为这是一个如此简单的情况。自从我第一次发布这个问题并想在这里记录我的解决方案以来，我已经学到了很多关于 Haskell 的知识：

```
split :: Char -> String -> [String]
split _ "" = []
split c s = firstWord : (split c rest)
    where firstWord = takeWhile (/=c) s
          rest = drop (length firstWord + 1) s

removeChar :: Char -> String -> String
removeChar _ [] = []
removeChar ch (c:cs)
    | c == ch   = removeChar ch cs
    | otherwise = c:(removeChar ch cs)

main = do
    handle <- openFile "input/names.txt" ReadMode
    contents <- hGetContents handle
    let names = sort (map (removeChar '"') (split ',' contents))
    print names
    hClose handle 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-26T15:56:25.383

最强大的解决方案是解析器组合器。Haskell 有其中几个，但我想到的最重要的是：

*   [parsec](http://www.haskell.org/haskellwiki/Parsec) : 一个非常好的通用解析库
*   [attoparsec](http://hackage.haskell.org/package/attoparsec-0.10.2.0)：更快版本的 parsec，它牺牲了错误消息的质量和一些其他功能以获得额外的速度
*   [uu-parsinglib](http://hackage.haskell.org/package/uu-parsinglib) : 一个非常强大的解析库

`do`解析器组合器的一大优点是使用符号（或`Applicative`样式，如果您愿意）很容易定义解析器。

如果您只想要一些快速简单的字符串操作功能，请查阅`text`库（对于高性能字节编码字符串）或`Data.List`（对于普通列表编码字符串），它提供了操作字符串的必要功能。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-26T03:21:09.033

由于`String`s 只是`Char`Haskell 中的 s 列表，[因此 Data.List](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html)将是开始查找的好地方（为了学习 Haskell）。

对于更复杂的情况（例如，逗号可能嵌套在引号内并且应该被忽略），[parsec](http://hackage.haskell.org/package/parsec)（如 Daniel 提到的）将是一个更好的解决方案。

此外，如果您要解析 CSV，您可以尝试[Text.CSV](http://hackage.haskell.org/packages/archive/csv/0.1.2/doc/html/Text-CSV.html)，尽管我没有尝试过，所以我不能说它会有多大帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-26T13:30:18.157

这是一种特别厚颜无耻的方法：

```
parseCommaSepQuotedWords :: String -> [String]
parseCommaSepQuotedWords s = read ("[" ++ s ++ "]") 
```

这可能有效，但它非常脆弱而且相当愚蠢。本质上，您使用的是 Haskell 编写字符串列表的方式*几乎*与您的方式一致的事实，因此内置`Read`实例*几乎*就是您想要的东西。您可以使用`reads`更好的错误报告，但实际上您可能想要完全做其他事情。

总的来说，`parsec`它*真的*值得一看——它使用起来很有趣，也是最初让我对 Haskell 感到兴奋的事情之一。但是如果你想要一个本土的解决方案，我经常使用关于 and 的结果的语句来编写简单的`case`东西。假设您正在寻找输入中的下一个分号。然后将返回，其中：`span``break``break (== ';') inp``(before, after)`

*   `before`是`inp`最多（不包括）第一个分号的内容（如果没有，则为全部）
*   `after`是字符串的其余部分：
    *   如果`after`不为空，则第一个元素是分号
    *   不管发生什么，`before ++ after == inp`

因此，要解析以分号分隔的语句列表，我可能会这样做：

```
parseStmts :: String -> Maybe [Stmt]
parseStmts inp = case break (== ';') inp of
  (before, _ : after) -> -- ...
    -- ^ before is the first statement
    --     ^ ignore the semicolon
    --           ^ after is the rest of the string
  (_, []) -> -- inp doesn't contain any semicolons 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T05:53:58.130

为了给遇到这个问题的人一个完整的答案，[Data.Text](http://hackage.haskell.org/packages/archive/text/0.11.2.2/doc/html/Data-Text.html)也有一些很好的功能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-26T07:41:51.940

将 parsec 用于任何“真正的工作”。

有关介绍，请阅读[https://therning.org/magnus/archives/tag/parsec](https://therning.org/magnus/archives/tag/parsec)

# wpf - WPF 将列表视图选定项绑定到展开器展开

> ID：11199482
> 
> 赞同：1
> 
> 时间：2012-06-26T00:57:56.240
> 
> 标签：wpf

我刚刚开始使用 WPF 测试水，我正在尝试将扩展器的扩展属性和列表视图项的选定属性绑定在一起，以便在选择列表视图项时扩展器扩展或沿着另一条路尝试将列表视图项设置为在展开器展开时选中

到目前为止我有

```
<ListView HorizontalAlignment="Stretch"  Name="listView1" VerticalAlignment="Stretch" SelectionMode="Single" >
        <ListView.Resources>
            <Style TargetType="{x:Type ListViewItem}">
                <Setter Property="IsSelected" Value="{Binding Path=IsExpanded, Mode=TwoWay}"/>
            </Style>
        </ListView.Resources>
        <ListView.ItemTemplate>
            <DataTemplate>
                <Expander>
                        <TextBlock Text="{Binding Name}"></TextBlock>
                </Expander>
            </DataTemplate>
        </ListView.ItemTemplate>            
    </ListView> 
```

但我不知道如何在绑定中引用扩展器。任何帮助或朝着正确方向轻推将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T01:55:19.060

好..

您不能将 listboxitem 与其自己的模板连接...因为基本上他们不知道...这在这里行不通：

```
 <Style TargetType="ListBoxItem">
             <Style.Triggers>
                    <DataTrigger Binding="{Binding ElementName=expanderHeader,Mode=OneWay}" Value="True">
                 <Setter Property="IsSelected" value="True"/>
                    </ DataTrigger>
             </ Style.Triggers>
     </ Style> 
```

您也不能触发扩展器的触发器，因为设置器不接受绑定..   

```
<Expander.Style>
     <Style TargetType="Expander">
         <Style.Triggers>
             <Trigger Property="IsExpanded" Value="True">
                 <Setter Property="{Binding RelativeSource={RelativeSource AncestorType=ListBoxItem, Mode=FindAncestor}, Path=IsSelected}" Value="True"/>
             </ Trigger>
          </ Style.Triggers>
     </ Style>
</ Expander.Style> 
```

答案是这样的：

```
 <ListBox.ItemTemplate>
        <DataTemplate>
               <Expander  x:Name="expanderHeader" IsExpanded="{Binding Mode=TwoWay, Path=IsSelected, RelativeSource={RelativeSource AncestorType=ListBoxItem, Mode=FindAncestor}}">
                 <!-- Content -->
                </Expander>
        </DataTemplate>
    </ListBox.ItemTemplate> 
```

如果您愿意，可以使用绑定模式 = OneWayToSource，具体取决于您的需要..

# ios - 将交互式视图添加到 MonoTouch.Dialog UITableViewCell

> ID：11199483
> 
> 赞同：1
> 
> 时间：2012-06-26T00:58:17.163
> 
> 标签：ios, uitableview, xamarin.ios, monotouch.dialog

我正在尝试自定义 Xamarin 的 MonoTouch 示例集中的[BubbleCell 示例](https://github.com/xamarin/monotouch-samples/tree/master/BubbleCell)。我想将 UIImageView 添加到聊天气泡中，并使其在点击 UIImageView 时，代码可以做一些事情（在我的情况下，打开一个模态视图 - 虽然现在我会满足于向输出写入一些东西窗户）。

该示例使用 MonoTouch.Dialog 来布局界面，并具有一个自定义单元格类，用于构造视图并将其添加到 UITableViewCell.ContentView。

我已经设法很容易地将 UIImageView 放入单元格中。但是，我似乎无法弄清楚如何让 UIImageView 响应点击。

我正在 BubbleCell 的构造函数（在 Bubble.cs 中）中构建 UIImageView，同时，我在其中添加以下几行：

```
var tap = new UITapGestureRecognizer();
tap.AddTarget( () => {
    Console.WriteLine("I'll do something here");
});
imageView.UserInteractionEnabled = true;
imageView.AddGestureRecognizer(tap); 
```

代码编译并运行良好，但是当我点击 UIImageView 时，没有任何反应。

我尝试了一些更改，但都没有解决这个问题：

*   我将 UIImageView 换成了自定义 UIButton。
*   我浏览了单元格和 UITableView 的超级视图层次结构，并确保所有超级视图都将 UserInteractionEnabled 属性设置为 true。他们是这样。
*   我删除了 UITapGestureRecognizer 并尝试继承 UIImageView 并拦截 TouchesBegan/TouchesEnded 方法（它们从未被调用）

为了使 MonoTouch.Dialog 中的表格单元格与用户交互一起工作，我需要做些什么特别的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:31:07.223

你如何创建 UIImageView 对象？我刚刚制作了一个示例项目，它对水龙头的反应完美。

```
UIImageView btn = new UIImageView (new UIImage ("50-50.png"));
btn.UserInteractionEnabled = true;
UITapGestureRecognizer rec = new UITapGestureRecognizer ();
rec.AddTarget (() => Console.WriteLine ("Test"));
btn.AddGestureRecognizer (rec);
Root = new RootElement ("TestViewController") {
    new Section ("First Section"){
        new UIViewElement ("Test", btn, false)
    },
    new Section ("Second Section"){
    },
}; 
```

# javascript - 如果速记语句在 javascript 中不起作用，为什么以下扩展？

> ID：11199484
> 
> 赞同：2
> 
> 时间：2012-06-26T00:58:27.003
> 
> 标签：javascript

这是我第一次尝试编写 if 语句的速记，但是我对为什么扩展版本不能像我想象的那样工作感到困惑。

**代码 1** - 不起作用

```
if(document.getElementById == true) {
        alert("The document object model is supported by: " + navigator.appName);   
    } 
```

**代码 2** - 有效

```
if(document.getElementById != false) {
            alert("The document object model is supported by: " + navigator.appName);   
        } 
```

**代码 3** - 有效的速记

```
 if(document.getElementById) {
            alert("The document object model is supported by: " + navigator.appName);   
        } 
```

为什么如果我将 3 中的速记扩展到第一个代码示例不起作用，如果我让它等于 ，为什么它会起作用`!= false`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T01:41:16.863

你的第`if`一句话：

```
if(document.getElementById == true) { 
```

...不起作用，因为`document.getElementById`它是一个函数，它是一种对象，并且一个对象不等于`true`.

你的第二个`if`陈述：

```
if(document.getElementById != false) { 
```

...并没有真正起作用-即使您认为它确实起作用-因为（我假设）您仅在`document.getElementById`定义为的浏览器中对其进行了测试，在这种情况下，又`.getElementById`是一个函数，一种对象，不等于`false`。**但是**，如果`.getElementById`没有定义，*那么*if 测试将有效地测试 if `undefined != false` *which is also* `true`。所以那个测试并没有像你想象的那样做。

你的第三个`if`陈述：

```
 if(document.getElementById) { 
```

...确实有效。它起作用的原因是因为 JavaScript 具有“真”和“假”表达式的概念。数字 0、空字符串`""`、`undefined`、`null`、`NaN`，当然`false`都是“假”值。几乎所有其他内容，包括非零数字、非空字符串和*任何*对象（包括函数）都是“真实的”。如果语句中的表达式`if`是“truthy”，则将执行 if 块。

（最后，真的不需要测试是否`document.getElementById`存在——如果你能找到一个运行 JS 但没有定义该方法的浏览器，我会感到惊讶。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T01:00:09.580

因为`document.getElementById`是一个存在的函数，但不是`true`。尝试`document.write(document.getElementById)`并查看结果。`true`它也不会评估`false`。

[在此处](http://jsfiddle.net/4EqQW/1/)查看实际操作。

您不必将其与布尔值进行比较，因此最好的做法是：

```
if(document.getElementById){
    //Do something
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T01:02:24.533

代码 1 是真实的，但不是真实的。getElementById 是一个对象，但它不是布尔值，因此将其与一个对象进行比较将是错误的。

[这是一个解释真实性和虚假性概念的博客： http](http://javascriptweblog.wordpress.com/2011/02/07/truth-equality-and-javascript/) ://javascriptweblog.wordpress.com/2011/02/07/truth-equality-and-javascript/

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T01:06:54.140

第一个不起作用，因为 typeof`document.getElementById`是 'function' 并且它的值是本机代码，而不是布尔值“true”。

关于。你的第三个例子，也试试这个：

```
if (!!document.getElementById) ... 
```

这`!!`将在结果上强制布尔类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T03:12:08.907

这是来自 ECMAScript 规范的答案：

查看评估[`if`语句](http://bclary.com/2004/11/07/#a-12.5)的过程：在步骤 3 中，过程调用[`ToBoolean`](http://bclary.com/2004/11/07/#a-9.2)，它将对象转换为 value `true`。该`ToBoolean`函数是我们获得“真”和“假”值概念的地方；它们是分别由`ToBoolean`into`true`和转换的值`false`。

现在看一下用于运算符的[抽象相等比较操作](http://bclary.com/2004/11/07/#a-11.9.3)`==`。的过程流`Object == boolean`比简单的调用要复杂得多`ToBoolean`。它是这样的：

```
For some comparison x == y...

1\.  If Type(x) is different from Type(y), go to step 14.
19\. If Type(y) is Boolean, return the result of the comparison x == ToNumber(y).

(Go back to step 1, with the boolean cast to a Number by ToNumber[1], then...)

21\. If Type(x) is Object and Type(y) is either String or Number, return
    the result of the comparison ToPrimitive(x)== y.

(ToPrimative[2] calls the object's toString method; now compare String == Number)

17\. If Type(x) is String and Type(y) is Number, return the result of the
    comparison ToNumber(x)== y.

(ToNumber turns the string "function()..." into NaN. Finally...)

5\. If x is NaN, return false 
```

**更多参考资料：**

[1][收件人编号](http://bclary.com/2004/11/07/#a-9.3)

[2] [ToPrimative](http://bclary.com/2004/11/07/#a-9.1)调用[[[DefaultValue]]](http://bclary.com/2004/11/07/#a-8.6.2.6)，这是一个相当长的。幸运的是，在这种情况下，它会在第 2 步中快速解决。

# php - 如何在php GD中应用旋转功能后去除黑色背景？

> ID：11199485
> 
> 赞同：1
> 
> 时间：2012-06-26T00:58:29.767
> 
> 标签：php, gd

就我而言，我创建了一个用于将许多图像合并为单个图像的 php 脚本。在合并过程中，我想旋转一些图像。

该脚本工作正常。但旋转后的图像显示黑色背景色。

我应该删除黑色背景颜色。

我正在使用以下脚本来处理 php 中的旋转功能。此脚本可以合并三个具有旋转功能的 png 图像。

问题：

*   在 IE 8 中旋转后，图像周围会出现一些暗线。
*   背景显示黑色而不是白色

如何解决这些问题。

请修复此脚本问题并发布您的答案。

```
$im = imagecreatetruecolor(500, 600);

$white = imagecolorallocate($im, 255, 255, 255);

$black = imagecolorallocate($im, 000, 000, 000);

$source=imagecreatefrompng("http://cn1.kaboodle.com/img/c/0/0/179/4/AAAADDpe-ZwAAAAAAXlIhA/funny-shirt-pikachu-pokemon-anime-mens-cool-humor-t-shirt.png?v=1313557837000");
$asd=imagerotate($source, 280, 0);
imagecolortransparent($asd, $white);
imageantialias($asd, true);
$insert_x = imagesx($asd); 
$insert_y = imagesy($asd);
imagecopymerge ( $im , $asd , 0 , 0 , 0 , 0 , $insert_x , $insert_y , 100 );

$source1=imagecreatefrompng("http://www.vouchersmate.com/content/images/thumbs/0001595_worlds_best_dad_to_be_t_shirts.png");
$asd1=imagerotate($source1, 180, 0);
imagecolortransparent($asd1, $white);
imageantialias($asd1, true);
$insert_x1 = imagesx($asd1); 
$insert_y1 = imagesy($asd1);
imagecopymerge ( $im , $asd1 , 110 , 55 , 0 , 0 , $insert_x1 , $insert_y1 , 100 );

$source2=imagecreatefrompng("http://goalwa.files.wordpress.com/2011/11/green_shirt.png?w=300&h=300");
$asd2=imagerotate($source2, 320, 0);
imagecolortransparent($asd2, $white);
imageantialias($asd2, true);
$insert_x2 = imagesx($asd2); 
$insert_y2 = imagesy($asd2);
imagecopymerge ( $im , $asd2 , 170 , 90 , 0 , 0 , $insert_x2 , $insert_y2 , 100 );

imagecolortransparent($im, $black);

imageantialias($im, true);

imagealphablending($im, true);
imagesavealpha($im, true);

header('Content-Type: image/png');
imagepng($im); 
```

* * *

我正在使用以下脚本来处理 php 中的旋转功能。此脚本可以合并三个具有旋转功能的 png 图像。

问题：

*   在 IE 8 中旋转后，图像周围会出现一些暗线。
*   背景显示黑色而不是白色

如何解决这些问题。

请修复此脚本问题并发布您的答案。

```
$im = imagecreatetruecolor(500, 600);

$white = imagecolorallocate($im, 255, 255, 255);

$black = imagecolorallocate($im, 000, 000, 000);

$source=imagecreatefrompng("http://cn1.kaboodle.com/img/c/0/0/179/4/AAAADDpe-ZwAAAAAAXlIhA/funny-shirt-pikachu-pokemon-anime-mens-cool-humor-t-shirt.png?v=1313557837000");
$asd=imagerotate($source, 280, 0);
imagecolortransparent($asd, $white);
imageantialias($asd, true);
$insert_x = imagesx($asd); 
$insert_y = imagesy($asd);
imagecopymerge ( $im , $asd , 0 , 0 , 0 , 0 , $insert_x , $insert_y , 100 );

$source1=imagecreatefrompng("http://www.vouchersmate.com/content/images/thumbs/0001595_worlds_best_dad_to_be_t_shirts.png");
$asd1=imagerotate($source1, 180, 0);
imagecolortransparent($asd1, $white);
imageantialias($asd1, true);
$insert_x1 = imagesx($asd1); 
$insert_y1 = imagesy($asd1);
imagecopymerge ( $im , $asd1 , 110 , 55 , 0 , 0 , $insert_x1 , $insert_y1 , 100 );

$source2=imagecreatefrompng("http://goalwa.files.wordpress.com/2011/11/green_shirt.png?w=300&h=300");
$asd2=imagerotate($source2, 320, 0);
imagecolortransparent($asd2, $white);
imageantialias($asd2, true);
$insert_x2 = imagesx($asd2); 
$insert_y2 = imagesy($asd2);
imagecopymerge ( $im , $asd2 , 170 , 90 , 0 , 0 , $insert_x2 , $insert_y2 , 100 );

imagecolortransparent($im, $black);

imageantialias($im, true);

imagealphablending($im, true);
imagesavealpha($im, true);

header('Content-Type: image/png');
imagepng($im); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T01:34:54.523

没有任何要检查的代码，很难准确地确定您的问题，但我会尝试：

你看到的黑色是没有颜色的。您可能想要的是该区域是透明的。尝试添加以下代码：

```
imagealphablending($im, true);
imagesavealpha($im, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T01:39:03.813

你在寻找什么样的背景？

您可以使用[imagefilledrectangle](http://php.net/manual/en/function.imagefilledrectangle.php)以您喜欢的任何颜色填充背景。例如，假设您有一个宽度为 500 像素、高度为 250 像素的图像；

```
$white = imagecolorallocate($im, 255, 255, 255);
imagefilledrectangle($im, 0, 0, 500, 250, $white); 
```

您现在可以使用全白背景。也可以看imagecolortransparent；[http://php.net/manual/en/function.imagecolortransparent.php](http://php.net/manual/en/function.imagecolortransparent.php)如果要创建透明背景。

# cuda - 调用 cublas 函数时访问冲突

> ID：11199486
> 
> 赞同：1
> 
> 时间：2012-06-26T00:58:30.173
> 
> 标签：cuda, cublas

我对以下代码有疑问，在执行对 cublasSrotg 的调用时，它会引发异常：“访问冲突写入位置 0x05200600”，这是“dA”指针的地址。运行调试器时，它似乎跳过了对 cudaMalloc 的调用，但我不知道我做错了什么。

```
cublasHandle_t handle;
cublasCreate(&handle);
float hA[SIZE] = { 1.0f, 2.0f, 3.0f, 4.0f };
int sizef = sizeof(float);
float* dA;
cudaMalloc((void**)&dA, SIZE * sizef);
cublasSetVector(SIZE, sizef, hA, 1, dA, 1);
float s, c;
cublasSrotg(handle, dA, dA + N, &c, &s);
cublasSrot(handle, N, dA, 1, dA + N, 1, &c, &s);
cublasGetVector(SIZE, sizef, dA, 1, hA, 1);
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T22:28:17.940

从下面的代码行我收集到`SIZE`等于`4`.

```
float hA[SIZE] = { 1.0f, 2.0f, 3.0f, 4.0f }; 
```

但是在这里，你做了两件奇怪的事情：

```
cublasSrotg(handle, dA, dA + N, &c, &s); 
```

1.  您将主机和设备参数混合到同一个 cublas 函数中（我不知道这是否合法）。`dA`是设备指针，`s`和`c`是主机变量。

2.  你通过`dA`和`dA + N`。除非`N`小于`4`，否则您的索引将超出范围，因此这可能是您的问题。另外，请注意 cublasSrotg 的前两个输入是输入/输出变量——它们的初始值被使用，但随后被覆盖。

由于它们被覆盖，奇怪的是你会将相同的指针传递给`cublasSrot`...

有关完整的详细信息，请参阅[CUBLAS 文档](http://developer.download.nvidia.com/compute/DevZone/docs/html/CUDALibraries/doc/CUBLAS_Library.pdf)。

**编辑：**

OP 揭示问题在于混合设备和主机指针，以及没有调用 cudaMalloc 来在设备上分配`c`和`s`值。

# pyqt - pyqt QTableWidgetItem 连接信号

> ID：11199489
> 
> 赞同：1
> 
> 时间：2012-06-26T00:59:10.903
> 
> 标签：pyqt

当我更改单元格中的值时，我试图让我的 QTableWidget 调用一些函数。

```
self.table = QtGui.QTableWidget()  
tableItem = QtGui.QTableWidgetItem( str(attr.GetValue()) )
self.table.setItem(row, 1, tableItem )
QtCore.QObject.connect(self.table, QtCore.SIGNAL('currentItemChanged(QTableWidgetItem*, QTableWidgetItem*)'), someFunc) 
```

我的问题是，在我对它进行值更改之前，它会在我进入单元格后立即调用该函数。由于某些奇怪的原因，它还两次调用该函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T01:23:22.450

我认为您使用了错误的信号。`currentItemChanged`指选择。不适用于数据更改时。尝试使用[`itemChanged`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qtablewidget.html#itemChanged)：

```
self.table.itemChanged.connect(someFunc) 
```

另请注意，我使用的是 Qt 4.5 中引入的[新型信号槽。](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/new_style_signals_slots.html)您不必再为指定 C++ 签名而烦恼。

至于您的信号多次触发，可能是因为每次选择更改时它都会触发而您没有意识到，或者您设法多次连接它。

作为参考，连接此信号的旧式语法是：

```
QtCore.QObject.connect(
    self.table, 
    QtCore.SIGNAL('itemChanged(QTableWidgetItem*)'), 
    someFunc
) 
```

# shell - 在多个操作系统上使用脚本启动可执行 jar

> ID：11199495
> 
> 赞同：0
> 
> 时间：2012-06-26T00:59:44.290
> 
> 标签：shell, applescript, executable-jar

我用 Java 编写了一个程序，并有一个可执行的 jar，客户需要在 Windows 或 Mac 机器上打开它。我的一些客户是……不是计算机人。

因此，我需要编写两个脚本（如果有人知道如何使用 Mac 和 Windows 的单个脚本来做到这一点，那就太棒了）通过在 Mac 和 Windows 上双击来自动启动我的可执行 jar。如果 Java 安装正确，脚本应该可以正常工作。如果没有安装 Java，那么他们应该知道得更好。

这是我的 Windows 机器批处理脚本：

```
start javaw -jar ExecutableProgram.jar 
```

但是，我不确定为 Mac 机器制作什么样的脚本。**我应该使用什么类型的脚本？**

苹果脚本？嘘？**它需要能够通过双击执行。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:45:31.523

在 Mac OS X 上，双击一个 Jar 应该会自动打开它。但是，我没有很好的方法来测试它；因为我是一名开发人员，所以我的计算机做了很多特殊的事情 :-) 特别是，Apple 自己的 Java 运行时在 10.6 中已被弃用，我不知道其他 Java 运行时附带了哪些工具。尽管如此，如果这种方法有效（我认为它会有效），那是最好的选择。

如果这不起作用，那么下一个最佳选择是使用 AppleScript，就像[adayzdone](https://stackoverflow.com/a/11200013/237428)建议的那样。我将使用的 AppleScript 将改为：

```
do shell script (¬
  "cd " & quoted form of POSIX path of (path to me) & "/.. ; " & ¬
  "java -jar ExecutableProgram.jar") 
```

该`quoted form of ...`位获取脚本的路径 ( `path to me`)，将其转换为 Unix 路径 ( `POSIX path of ...`)，并为 shell 引用特殊字符 ( `quoted form of ...`)；由于脚本在目录中运行，因此您还需要`/..`访问 Jar 所在的父目录。要使其可双击，请将文本复制并粘贴到 AppleScript 编辑器中，然后在“保存...”对话框中，将文件格式设置为“应用程序”。（要对其进行编辑，请从 AppleScript 编辑器中打开应用程序。）这种方法的缺点是您将运行两个应用程序：真正的 Java 应用程序和 Mac shell。有两种方法可以解决这个问题：

*   如果命令的命令行输出不重要，请将 AppleScript 第三行的字符串更改为`"java -jar ExecutableProgram.jar &>- &"`:`&>-`以关闭输出流，并`&`在后台运行它。（只是`&`行不通。）
*   更复杂的方法不会退出 AppleScript，只是隐藏它：
    *   按住 Control 键单击您的 AppleScript 应用程序并选择“显示包内容”
    *   导航到`Contents/`文件夹并打开`Info.plist`
    *   添加`LSUIElement`带有值的键`true`：
        *   如果它是纯文本 XML 格式（不是二进制格式），您可以添加`<key>LSUIElement</key><true/>`
        *   从命令行，这是`defaults write /full/path/to/Info LSUIElement -bool true`（请注意，您需要以 a 开头的完整路径`/`，*例如*通过 using 获得`"$(pwd)/Info"`，但您*不能*提供`.plist`扩展名）。
        *   您还可以使用 Apple 的“属性列表编辑器”应用程序，该应用程序（至少曾经）与开发人员工具一起提供；免费的第三方属性列表编辑器也存在。

如果这不起作用，那么最简单的方法就是编写一个 Unix shell 脚本而不是 Windows 批处理脚本。它必须与`.command`扩展名一起保存，并设置其可执行位 ( `chmod +x file.command`)。内容应该是

```
#!/bin/sh
cd "$(dirname "$0")"
java -jar ExecutableProgram.jar 
```

（如果你不熟悉 Unix shell 脚本：第一行声明这是一个 shell 脚本；第二行进入 shell 脚本所在的目录；第三行执行相关操作。）这种方法的原因是不太理想的是它会打开终端（OS X 的命令行界面）；您将获得一个窗口，该窗口将保持打开状态，直到脚本终止；当脚本终止时，所述窗口不会（或可能不会）关闭；并且终端不会自行退出。因此，它更明显是二等公民。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:26:46.923

虽然我不确定 java 命令，但您可以将此 AppleScript 保存为应用程序，以便在双击时运行它。

```
set theFolder to quoted form of "/Users/CODe/Desktop/yourFolder"
    do shell script "cd " & theFolder & " ; java -jar ProfessionalMediator.jar" 
```

您还可以通过保存为应用程序的 AppleScript 在终端中执行此操作：

```
tell application "Finder" to set theFolder to POSIX path of (file (path to me)'s container as alias)
tell application "Terminal"
    activate
    do script "cd " & theFolder & " ; java -jar ProfessionalMediator.jar" in window 1
end tell 
```

# r - 从制表符分隔的 .txt 文件中将包含空格的字符串读入 R

> ID：11199496
> 
> 赞同：2
> 
> 时间：2012-06-26T00:59:51.417
> 
> 标签：r, whitespace, read.table

我有一个制表符分隔的文本文件，其中包含包含空格的字符串名称。它是 python 例程的输出。文本文件看起来像这样，带有隐藏的 '\t' 字符。

```
Mother's Day    Breakfast in Bed    Breakfast in Bed    Arkadia Tea Chai Spice 240g 6.69    False
Mother's Day    Breakfast in Bed    Breakfast in Bed    Coles Crumpets 6 pack   2.29    False
Mother's Day    Entertainment   Entertainment   4 Ingredients Book 1 by Kim McCosker & Rachael Bermingham 1 each    14.00   False
Pantry  Baking  Cake Mix    White Wings Red Velvet Cake 425g    4.61    False 
```

由于文件是制表符分隔的，因此 excel - 例如 - 识别出有六列 - 这是我想要的。

我希望它在 R 中的一个有六列的表中，这些列被视为因素。

我已经阅读了文档，似乎指定分隔符应该可以工作 - 但是我无法让以下工作：

```
fullSurvey <- read.table(file="C:/1.txt", check.names=FALSE, header=FALSE, sep="\t", stringsAsFactors=TRUE) 
```

它返回：

```
Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  : 
line 2 did not have 15 elements 
```

这在R中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-25T13:52:55.637

（将评论移至答案以希望将其标记为已解决）。

通常，当您的输入是制表符分隔时，您可以尝试使用`read.delim`，与`read.csv`csv 文件一样，它通常具有合理的默认值`read.table`.

当您的数据包含撇号、单引号或双引号时，您可能需要指定用于引用字符的值，或指定`quote = ""`保留嵌入的引号。

# jquery - 简单的墙柱

> ID：11199497
> 
> 赞同：1
> 
> 时间：2012-06-26T01:00:01.360
> 
> 标签：jquery, database, post, facebook-wall

我正在制作一个简单的墙柱，并且很难对其进行故障排除。我希望它无需重新加载页面即可发布（如 Facebook 帖子）。当我点击提交时，什么都没有发生。页面重新加载，没有帖子出现，并且没有任何内容插入数据库。我不知道为什么。有什么建议么？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<HTML>
<HEAD>
<script type="text/javascript" src="js/jquery.js"> </script>
</HEAD>
<BODY>
<form id="submit_wall"&gt;
<label for="message_wall">Share your message on the Wall</label>
<input type="text" id="message_wall" />
<button type="submit">Post to wall</button>
</form>
<ul id="wall">
</ul>

<script type="text/javascript">
$(document).ready(function(){
$("form#submit_wall").submit(function() {

var message_wall = $('#message_wall').attr('value');

$.ajax({
type: "POST",
url: "insert.php",
data:"message_wall="+ message_wall,
success: function(){
$("ul#wall").prepend("<li style="display: none;">"+message_wall+"</li>");
$("ul#wall li:first").fadeIn();
}
});
return false;
});
});
</script>
</body> 
```

insert.php 只是一个简单的数据库输入：

```
<?php
if(isset($_POST['message_wall'])){
/* Connection to Database */
$link = mysql_connect($host, $un, $pw) or die("Couldn't make connection.");
@mysql_select_db($db, $link) or die("Couldn't select database");

/* Remove HTML tag to prevent query injection */
$message = strip_tags($_POST['message_wall']);

$sql = 'INSERT INTO wall ("message") VALUES( "'.$message.'")';
mysql_query($sql);
echo $message;
} else { echo '0'; }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T21:22:30.107

索引.php：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<HTML>
<HEAD>
<script type="text/javascript" src="js/jquery.js"></script>
</HEAD>
<BODY>
<label for="message_wall">Share your message on the Wall</label>
<form name="post" id="post" name="post">
<input type="text" id="message_wall" name="message_wall"/>
<input type="submit" id="submitbtn" value="Post to wall"/>
</form>
<ul id="wall">
</ul>

<script type="text/javascript">
$(document).ready(function(){

$('#submitbtn').click(function() {

    var message_wall = $('#message_wall').val();
    $.ajax({
        type: "POST",
        url: "insert.php",
        data:"message_wall="+ message_wall,
        success: function(){      
            var $d=$("<li>"+message_wall+"</li>").fadeIn(500,function() {
                document.post.reset(); 
            });
            $("ul#wall").prepend($d);
        }
    });
    return false;
});
});

</script> 
```

insert.php：（名称、密码和数据库都正确。我已经三重检查了它们）

```
<?php
if(isset($_POST['message_wall'])){
/* Connection to Database */
$link = mysql_connect("localhost", "******", "******") or die("Couldn't make connection.");
@mysql_select_db("*******", $link) or die("Couldn't select database");

/* Remove HTML tag to prevent query injection */
$message = strip_tags($_POST['message_wall']);

$sql = 'INSERT INTO wall ("message") VALUES( "'.$message.'")';
mysql_query($sql);
echo $message;
} else { echo 'fail'; }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T01:04:15.773

首先，这完全不是一个问题。但我想指出的是你应该使用

```
var message_wall = $('#message_wall').val(); 
```

代替

```
var message_wall = $('#message_wall').attr('value'); 
```

除此之外，我看不出有什么问题。请更好地解释一下自己

这是“墙柱”部分。当然，您必须添加 ajax 调用

[http://jsfiddle.net/myuX3/](http://jsfiddle.net/myuX3/)

编辑：

```
$.ajax({
    type: "POST",
    url: "insert.php",
    data:{'message_wall':message_wall}, /* This is the line i've modified */
    success: function(){
        $("ul#wall").prepend("<li style="display: none;">"+message_wall+"</li>");
        $("ul#wall li:first").fadeIn();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T01:13:58.957

```
<input type="text" id="message_wall" name='message_wall' /> // you can use "name" attribute and "serialize()" method 
```

js：

```
data: $(this).serialize(); 
success: function(data){ // pass the data to your success callback
$("ul#wall").prepend("<li style='display: none;'>"+data+"</li>"); // correct the quotation marks 
```

# html - 环绕在两行中的两个内联对象的文本

> ID：11199500
> 
> 赞同：2
> 
> 时间：2012-06-26T01:00:54.210
> 
> 标签：html, xhtml

情况很简单。我需要在两个内联对象（带图像的按钮）周围环绕文本，但这些按钮应该在两行中（而不是并排）。

问题是 - 必要的按钮非常小，（小于屏幕的一半宽度） - 所以它们在一行中对齐。

**这是我现在得到的：**

![在此处输入图像描述](../Images/9746ba16e743cdcbca7b1e20361a0dd5.png)

**这就是我想要实现的目标：**

![在此处输入图像描述](../Images/cb5c4d09ede1ce5f5ee0983bd6fb8190.png)

**这是我正在试验的代码：**

```
<html>

<body>

<a href="http://link" target="_blank">
<div style="float:right;right:30px;top:30px;display:inline-table;">
<img id="imageTable" width="30" height="30" src="http://www.google.com/intl/lv/services/hp/images/safari-gear.png"/>
</div> </a>

<a href="http://link" target="_blank">
<div style="float:right;right:30px;top:30px;display:inline-table;">
<img id="imageTable" width="30" height="30" src="http://www.google.com/intl/lv/services/hp/images/safari-gear.png"/>
</div> </a>

Nulla facilisi. In vel sem. Morbi id urna in diam dignissim feugiat. Proin molestie tortor eu velit. Aliquam erat volutpat. Nullam ultrices, diam tempus vulputate egestas, eros pede varius leo, sed imperdiet lectus est ornare odio. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Proin consectetuer velit in dui. Phasellus wisi purus, interdum vitae, rutrum accumsan, viverra in, velit. Sed enim risus, congue non, tristique in, commodo eu, metus. 

</body>

</html> 
```

*   不能使用 TableView - 因为那样按钮下会有空白空间。
*   如果我在按钮之间输入新行 - 然后文本开始仅环绕第二个按钮。
*   有一种可能性，我在两个按钮之间添加了一些文本，但是我需要精确计算应该从主文本中删除多少文本，记住字体可以改变等。

PS（为了更容易帮助）我正在这个网站上测试代码：[w3schools](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_intro)

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:05:27.850

你可以把它们都放在一个`30px`宽的地方`<div>`，然后漂浮在`<div>`右边。

演示：http: [//jsfiddle.net/ThinkingStiff/GdpNv/](http://jsfiddle.net/ThinkingStiff/GdpNv/)

输出：

![在此处输入图像描述](../Images/03e0cfba711262427b3c70cad17af745.png)

HTML：

```
<div id="buttons" style="float:right;width:30px;">
    <a href="http://link" target="_blank">
    <div>
    <img class="imageTable" width="30" height="30" src="http://www.google.com/intl/lv/services/hp/images/safari-gear.png"/>
    </div> </a>

    <a href="http://link" target="_blank">
    <div>
    <img class="imageTable" width="30" height="30" src="http://www.google.com/intl/lv/services/hp/images/safari-gear.png"/>
    </div> </a>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T01:08:56.227

这里至少是帮助尝试的代码。同样作为一般规则，您不应该有多个元素共享相同的 ID。

```
<html>
<head>
<style>
    .imageTable {
        clear: both;
        float: right;
    }
</style>
</head>
<body>
<a href="http://link" target="_blank" class="imageTable">
<img width="30" height="30" src="http://www.google.com/intl/lv/services/hp/images/safari-gear.png"/>
</a>

<a href="http://link" target="_blank" class="imageTable">
<img width="30" height="30" src="http://www.google.com/intl/lv/services/hp/images/safari-gear.png"/>
</a>

Nulla facilisi. In vel sem. Morbi id urna in diam dignissim feugiat. Proin molestie tortor eu velit. Aliquam erat volutpat. Nullam ultrices, diam tempus vulputate egestas, eros pede varius leo, sed imperdiet lectus est ornare odio. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Proin consectetuer velit in dui. Phasellus wisi purus, interdum vitae, rutrum accumsan, viverra in, velit. Sed enim risus, congue non, tristique in, commodo eu, metus. 

</body>

</html> 
```

# actionscript-3 - 为什么我的 MC 会得到最后添加的 MC 的名称？？在这种情况下，Sinaasappel

> ID：11199503
> 
> 赞同：0
> 
> 时间：2012-06-26T01:01:50.373
> 
> 标签：actionscript-3

问题 1：当我尝试获取每个添加的 mc 的名称时，我会得到最后添加的 mc 的名称。为什么会这样？我处于初级水平。我在互联网上搜索了一段时间，但找不到解决方案。[解决了]

问题 2：我有 4 个位置，下次他们随机获得其他位置时，如何将每个项目（4 个 vruchtItem）随机放置在其中一个位置，例如（在位置 posUp 的 appel，在 posRight 的香蕉等）。

```
public function vruchtenItemKruis(e:Event):void
{       
    var vruchtArray:Array = new Array("Aardbei", "Appel", "Banaan", "Sinaasappel");

    var i:Number= 0;            
    while (i < vruchtArray.length)
    {   

        var vrucht = vruchtArray[i];                

        switch(vrucht)
        {
            case ("Aardbei"):

                vruchtItem = new Aardbei(kruisWeg.width / 2, 50, 50, 65);

                break;

            case ("Appel"):

                vruchtItem = new Appel(kruisWeg.width / 2,  kruisWeg.height - 50, 50, 60);

                break;

            case ("Banaan"):

                vruchtItem = new Banaan(50, kruisWeg.height / 2, 60, 40);

                break;

            case ("Sinaasappel"):

                vruchtItem = new Sinaasappel(kruisWeg.width - 50, kruisWeg.height / 2, 70, 45);

                break;  
        }

        removeEventListener(Event.ADDED_TO_STAGE, vruchtenItemKruis);

        i++;

        addChild(vruchtItem);
        vruchtItem.name = vrucht;

        trace(vruchtItem.name);
        vruchtItem.buttonMode = true;

        vruchtItem.addEventListener(MouseEvent.MOUSE_OVER, vruchtNaam); 

    }
}

public function randomPosXY(xPos:int, yPos:int):int
{
    xPosition = xPos;
    yPosition = yPos;

    // Select an random positie van 4
    var vruchtPos:Array = new Array("posUp",  "posRight", "posDown", "posLeft");
    var randomPos:int =  Math.floor(Math.random() * vruchtPos.length);
    var posXY:String = vruchtPos[randomPos];

    //trace ("random xy started");

    var tot:Number;

    if(posXY)
    {

        while (tot < vruchtPos.length) {
            var itemPos = vruchtPos[tot];

            switch(posXY)
            {
                case ("posUp"):

                    xPosition = kruisWeg.width / 2;
                    yPosition = 0 + 15;

                    break;

                case ("posDown"):

                    xPosition = kruisWeg.width / 2;
                    yPosition = kruisWeg.height - 15;   

                    break;

                case ("posLeft"):

                    xPosition = 0 + 15;
                    yPosition = kruisWeg.height / 2;

                    break;

                case ("posRight"):

                    xPosition = kruisWeg.width - 15;
                    yPosition = kruisWeg.height / 2;

                    break;
            }
        }       
    }

    return xPosition;
    //return yPosition;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:37:02.337

预先设置您的职位列表，然后在创建每个 MC 时，从列表中抓取一个职位并将其删除。当您添加下一个 MC 时，将只有 3 个位置，随机删除一个。等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:48:25.457

You could do something like this for your random positioning function. This assumes your four assets are the only children of a parent container that you'd pass to the function, Super easy to have it work the same way with an array of your assets:

```
public function randomPosXY(itemParent:DisplayObjectContainer):void
{

    var vruchtPos:Array = new Array("posUp",  "posRight", "posDown", "posLeft");

    var xPosition:Number;
    var yPosition:Number;

    var i:int = itemParent.numChildren;
    while (i--) {
    var randomPos:int =  Math.round(Math.random() * (vruchtPos.length - 1));
    switch(vruchtPos[randomPos]) {
        case ("posUp"):
                xPosition = kruisWeg.width / 2;
        yPosition = 0 + 15;

                break;

            case ("posDown"):

                xPosition = kruisWeg.width / 2;
            yPosition = kruisWeg.height - 15;   
            break;

        case ("posLeft"):

            xPosition = 0 + 15;
            yPosition = kruisWeg.height / 2;

            break;

        case ("posRight"):

        xPosition = kruisWeg.width - 15;
        yPosition = kruisWeg.height / 2;
            break;
    }

    //assign position to current item
    itemParent.getChildAt(i).x = xPosition;
    itemParent.getChildAt(i).y = yPosition;

    //remove the used position from the array
    vruchtPos.splice(randomPos, 1);
    }

} 
```

# python - 从多维数组到层次结构

> ID：11199505
> 
> 赞同：1
> 
> 时间：2012-06-26T01:01:58.033
> 
> 标签：python, list, hierarchy

如果给我一些以下格式的数据：

```
data = [
    ['Airbus', 'R&D', '01', 5],
    ['Airbus', 'R&D', '02', 8],
    ['Airbus', 'Marketing', '01', 9],
    ['Airbus', 'Marketing', '02', 54],
    ['Netgear', 'R&D', '01', 12],
    ['Netgear', 'R&D', '02', 5],
    ['Netgear', 'Marketing', '01', 6],
    ['Netgear', 'Marketing', '02', 11],
    ['Toyota', 'R&D', '01', 9],
    ['Toyota', 'R&D', '02', 52],
    ['Toyota', 'Marketing', '01', 43],
    ['Toyota', 'Marketing', '02', 34],
] 
```

如何使用 python 获得更多层次结构，即：

```
data = {

'Airbus': {
    'R&D': {
        '01': 5, '02': 8
    },
    'Marketing': {
        '01': 9,'02': 54
    }
},
'Netgear'
    etc...
} 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T01:05:16.317

嵌套非常简单`defaultdict`（或者可能`dict.setdefault`- > 可读性较差）：

```
d = collections.defaultdict(lambda:collections.defaultdict(dict))
for x,y,k,v in data:
    d[x][y][k]=v 
```

并漂亮地打印它：

```
>>> pprint.pprint(d)
{'Airbus': {'Marketing': {'01': 9, '02': 54},
            'R&D': {'01': 5, '02': 8}},
 'Netgear': {'Marketing': {'01': 6, '02': 11},
             'R&D': {'01': 12, '02': 5}},
 'Toyota': {'Marketing': {'01': 43, '02': 34},
            'R&D': {'01': 9, '02': 52}}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T01:13:37.047

下面的代码在长度方面更灵活一些，但没有检查最小长度记录（最小为 2 个元素（键、值）。

```
def nest(data):
    result = {}
    for record in data:
        assert len(record) > 2
        d = result
        for key in record[:-2]:
            d = d.setdefault(key, {})

        key,value = record[-2:]
        d[key] = value
    return result 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T01:45:51.830

来自[wikipedia 上的 autovivification 文章](http://en.wikipedia.org/wiki/Autovivification#Python)

```
from collections import defaultdict
def tree():
    return defaultdict(tree)

d = tree()
for x,y,k,v in data:
    d[x][y][k] = v 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T01:04:21.017

你可以试试[`groupby`](http://docs.python.org/library/itertools.html#itertools.groupby)in [`itertools`](http://docs.python.org/library/itertools.html)。

# nhibernate - 在 nHibernate 中选择不加入的子集合 ID

> ID：11199506
> 
> 赞同：0
> 
> 时间：2012-06-26T01:02:02.163
> 
> 标签：nhibernate, collections, identifier, queryover

我想在不使用连接的情况下以多对多关系选择父子集合的主键。由于已从此示例中删除了其他约束，因此查询必须发生在子级别（Tag）而不是父级别（Item）上。

```
Item item = null;
Tag tag = null;

var qoTags = QueryOver.Of<Tag>(() => tag)
             .JoinQueryOver(x => x.Items, () => item)
             .Select(Projections.Group<Item>(() => item.ItemId)); 
```

生成

```
SELECT Item.ItemId
FROM Tag 
inner join ItemsTags on Tag.TagId  =  ItemsTags.TagId 
inner join Item on ItemsTags.ItemId  =  Item.ItemId 
GROUP BY Item.ItemId 
```

但理想情况下，生成的 SQL 将是：

```
SELECT ItemsTags.ItemId
FROM Tag 
inner join ItemsTags on Tag.TagId  =  ItemsTags.TagId  
GROUP BY ItemsTags.ItemId 
```

请注意，删除了不必要的联接，并且“group by”和“select”子句引用了联结表的 ID。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:24:32.243

我的猜测是，当您告诉 NHibernate 您想使用 JoinQueryOver 将标签加入项目时，它总是会执行从标签到项目对象的所有步骤。

退后一步还不够聪明，想想“等等，item.ItemId 的查询中有一个按投影分组，并且没有提到其他项目属性，所以我可以跳过其中一个连接”

我不确定切换到标准或 hql 查询是否会有所帮助，因为 NHibernate 将始终尝试在您的 2 个映射对象之间创建所有必要的连接。

你可以：

*   做一个直接的 sql 查询（如果你将所有这些查询的东西用于一堆其他条件，那就不好了）
*   更改您的模型以在 Tag 和 Item 之间具有映射类。Tag->one-to-many->TagItem->many-to-one->Item（哎呀！我不喜欢那个味道！）

我希望有人在下面纠正我...

# grails - dropPrimaryKey 顺序错误

> ID：11199507
> 
> 赞同：1
> 
> 时间：2012-06-26T01:02:14.820
> 
> 标签：grails, database-migration, liquibase

使用 Grails 数据库迁移，我在生产中定义了一个表，如下所示：

```
+--------------+------------+------+-----+---------+----------------+
| Field        | Type       | Null | Key | Default | Extra          |
+--------------+------------+------+-----+---------+----------------+
| id           | bigint(20) | NO   | PRI | NULL    | auto_increment |
| version      | bigint(20) | NO   |     | NULL    |                |
| basket_id    | bigint(20) | NO   | MUL | NULL    |                |
| gift_card_id | bigint(20) | NO   | MUL | NULL    |                |
+--------------+------------+------+-----+---------+----------------+ 
```

在最新的开发分支中，我们修改了这个域以使用复合键并删除 id 和版本：

```
class BasketGiftCard implements Serializable {

  Basket basket
  GiftCard giftCard

  static mapping = {
    id composite: ['basket', 'giftCard']
    version false
  }
} 
```

运行 dbm-gorm-diff 时，我们最终得到以下结果：

```
changeSet(author: "gdboling (generated)", id: "1340670757336-8") {
    addPrimaryKey(columnNames: "basket_id, gift_card_id", constraintName: "basket_gift_cPK", tableName: "basket_gift_card")
}

changeSet(author: "gdboling (generated)", id: "1340670757336-16") {
    dropPrimaryKey(tableName: "basket_gift_card")
}

changeSet(author: "gdboling (generated)", id: "1340670757336-188") {
    dropColumn(columnName: "id", tableName: "basket_gift_card")
}

changeSet(author: "gdboling (generated)", id: "1340670757336-189") {
  dropColumn(columnName: "version", tableName: "basket_gift_card")
} 
```

关于这个的有趣（和错误）是顺序。dropPrimaryKey 应该首先出现，然后是其他所有内容。照原样，当运行 dbm-update 时，它​​会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:58:07.533

您[遇到了 database diffs 的问题](http://blog.liquibase.org/2007/06/the-problem-with-database-diffs.html)之一，尽管与该帖子中给出的示例略有不同。迁移插件文档说的时候绝对不是在开玩笑：

> 在非开发数据库上运行迁移脚本时，重要的是在运行迁移之前备份数据库，以防出现任何问题。您还可以制作数据库的副本并针对它运行脚本，如果出现问题，真实数据库将不受影响。

有好几次我需要手动调整使用`dbm-gorm-diff`. 不幸的是，我认为它只是与领土有关。不过，这并不是要从插件中拿走任何东西。它并不完美，但自从我开始使用它以来，我对我的数据库结构更有信心。

# c++ - 在给定时间内将频率从 f1 缓慢上升到 f2 的正弦波

> ID：11199509
> 
> 赞同：9
> 
> 时间：2012-06-26T01:02:22.553
> 
> 标签：c++, c, algorithm, math, waveform

我正在编写 ac 程序来生成一个正弦波，该正弦波在给定的时间间隔内将频率从 f1 缓慢上升到 f2。

我已经编写了这个 c 程序来将频率从 0 提升到 10 Hz，但问题是完成 360 度后频率会发生变化。如果我尝试在 0 到 360 度之间更改频率，则过渡不平滑且突然。

这是我使用的等式 y = Amplitude*sin(freq*phase)

```
int main(int argc, char *argv[]) {

double y, freq,phase;
int count; // for convenience of plotting in matlab so all the waves are spread on x axis.
  for (freq = 0; freq < 10; freq+=1) {
      for (phase = 0; phase < 360; phase++) { // phase is 360 degrees
      y = 3 * sin((count*6.283185)+(freq*(phase*(3.14159/180))));   
    printf("%f %f %f \n", freq, phase, y);
   }
  count++;
  }
return EXIT_SUCCESS;
} 
```

1.  如何在给定的时间段内平稳地更改频率？
2.  我应该研究傅立叶变换吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-26T01:58:15.887

如果您希望角频率（w = 2 pi f）随时间线性变化，那么`dw/dt = a`（`w = w0 + (wn-w0)*t/tn`从`t`0 到`tn`，`w`从`w0`到`wn`）。相位是它的积分，所以`phase = w0 t + (wn-w0)*t^2/(2tn)`（正如 oli 所说）：

```
void sweep(double f_start, double f_end, double interval, int n_steps) {
    for (int i = 0; i < n_steps; ++i) {
        double delta = i / (float)n_steps;
        double t = interval * delta;
        double phase = 2 * PI * t * (f_start + (f_end - f_start) * delta / 2);
        while (phase > 2 * PI) phase -= 2 * PI; // optional
        printf("%f %f %f", t, phase * 180 / PI, 3 * sin(phase));
    }
} 
```

（其中间隔为 tn，增量为 t/tn）。

这是等效 python 代码的输出（1-10Hz 超过 5 秒）：

![1-10 Hz 超过 5 秒](../Images/b3f2e818209603d5e841a93282742c96.png)

```
from math import pi, sin

def sweep(f_start, f_end, interval, n_steps):
    for i in range(n_steps):
        delta = i / float(n_steps)
        t = interval * delta
        phase = 2 * pi * t * (f_start + (f_end - f_start) * delta / 2)
        print t, phase * 180 / pi, 3 * sin(phase)

sweep(1, 10, 5, 1000) 
```

顺便说一句，如果你正在听这个（或看它——任何涉及人类感知的东西），我怀疑你不想要线性增长，而是指数增长。但这是[一个不同的问题](https://stackoverflow.com/questions/19771328/sine-wave-that-logarithmically-changes-between-frequencies-f1-and-f2-at-given-ti/19777462#19777462)......

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-26T01:08:22.383

> 如何在给定的时间段内平稳地更改频率？

平滑的正弦曲线需要连续相位。相位是频率的积分，所以如果你有一个频率的线性函数（即从 f1 到 f2 的恒定速率增加），那么相位将是时间的二次函数。

你可以用笔和纸算出数学，或者我可以告诉你，得到的波形称为[*线性啁啾*](http://en.wikipedia.org/wiki/Chirp)。

> 我应该研究傅立叶变换吗？

线性啁啾的傅里叶变换本身就是线性啁啾，所以可能不是。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T01:15:33.633

它应该相当简单。与其考虑改变频率，不如考虑让物体旋转得越来越快。它经过的角距离可能在 N 秒后是 X，但在 2N 秒后会超过 2X（可能是 4X）。所以想出一个角距离的公式（例如，alpha = k1 * T + k2 * T**2）并取该角距离的正弦值以找到任何时间T的波形值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T02:02:11.257

```
+ (void) appendChirp:(int[])sampleData size:(int)len 
    withStartFrequency:(double)startFreq withEndFrequency:(double)endFreq 
    withGain:(double)gain {

double sampleRate = 44100.0;

for (int i = 0; i < len; i++) {

    double progress = (double)i / (double)len;
    double frequency = startFreq + (progress * (endFreq - startFreq));
    double waveLength = 1.0 / frequency;

    double timePos = (double)i / sampleRate; 
    double pos = timePos / waveLength;
    double val = sin(pos * 2.0 * M_PI); // -1 to +1 

    sampleData[i] += (int)(val * 32767.0 * gain);
}

} 
```

# c - C中的键盘卡扣

> ID：11199513
> 
> 赞同：1
> 
> 时间：2012-06-26T01:02:36.593
> 
> 标签：c

所以我正在考虑如何在 C 中捕获键盘活动。众所周知，我们可以输入一些内容并按 Enter 以将我们想要发送到计算机的任何内容流式传输。但第一个问题是，如何输入一些不可输入的字符，如向上箭头、向下箭头（尤其是这两个家伙，因为我使用的是 Linux，但想将它们用于默认含义以外的其他用途）、shift、ctrl 或其他。其次，如何让程序在我们按下任意键后立即运行，这样我们就不需要一直输入和输入。（就像 Windows 中的“按任意键继续”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T01:24:13.267

# 有两种方法。

## 使用`stty`命令。

*   您可以`system ("/bin/stty raw");`在使用前添加`getchar()`
*   更多详情，请`man stty`。

## [在这里](http://linux.die.net/man/3/termios)使用`termios.h`

*   你应该像这样改变你的 tty 的模式`newt.c_lflag &= ~(ICANON | ECHO);`
*   更多详情，请`man termios.h`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:02:51.753

在 DOS 时代，有一个`kbhit()`功能。如果您需要该功能，可以查看此线程：[kbhit() for linux](http://cboard.cprogramming.com/c-programming/63166-kbhit-linux.html)。

我隐约记得尝试了用户 Thantos 的功能，并且效果很好。

我建议您先阅读`tcgetattr()`和`tcsetattr()`功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T01:13:31.807

如果您使用的是 Linux，则键盘输入的最佳选择是 GNU [readline](http://cnswww.cns.cwru.edu/php/chet/readline/rltop.html)库。

这提供了所有开箱即用的功能，包括 emacs 和 vi 编辑模式（如果需要）。

```
/* A static variable for holding the line. */
static char *line_read = (char *)NULL;

/* Read a string, and return a pointer to it.  Returns NULL on EOF. */
char *
rl_gets ()
{
    /* If the buffer has already been allocated, return the memory to the free pool. */
    if (line_read)
    {
        free (line_read);
        line_read = (char *)NULL;
    }

    /* Get a line from the user. */
    line_read = readline ("");

    /* If the line has any text in it, save it on the history. */
    if (line_read && *line_read)
        add_history (line_read);

    return (line_read);
} 
```

[麻省理工学院](http://web.mit.edu/gnu/doc/html/rlman_2.html)有一些很棒的教程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T01:06:01.820

“通用”方法是getchar()。Getchar()" 使用“缓冲输入”：在用户按下“Enter”之前，您实际上不会获得*任何*输出。除非您使用命令提示符（或等效项），否则它实际上并不适用。

旧的 DOS 方式是来自“conio.h”的 getch() 和 getche()。该方法在针对现代操作系统的现代 C/C++ 库中不存在。

建议：

如果您想创建文本模式 UI（尤其是在 Linux 上），请查看 ncurses：

*   [http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/)

如果您想编写游戏（在 Windows 或 Linux 上），请查看 SDL：

*   [http://www.libsdl.org/](http://www.libsdl.org/)

=== 附录 ===

我仍然推荐一个库......但这里有一个函数说明了 Linux 下的“原始键盘输入”（又名“未煮过的”或“非规范”输入）：

[http://cboard.cprogramming.com/c-programming/63166-kbhit-linux.html](http://cboard.cprogramming.com/c-programming/63166-kbhit-linux.html)

```
#include <stdio.h>
#include <termios.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/time.h>

void changemode(int);
int  kbhit(void);

int 
main(int argc, char *argv[])
{
  int ch;
  changemode(1);
  while ( !kbhit() )
  {
    putchar('.');
  }

  ch = getchar();

  printf("\nGot %c\n", ch);

  changemode(0);
  return 0;
}

void 
changemode(int dir)
{
  static struct termios oldt, newt;

  if ( dir == 1 )
  {
    tcgetattr( STDIN_FILENO, &oldt);
    newt = oldt;
    newt.c_lflag &= ~( ICANON | ECHO );
    tcsetattr( STDIN_FILENO, TCSANOW, &newt);
  }
  else
    tcsetattr( STDIN_FILENO, TCSANOW, &oldt);
}

int 
kbhit (void)
{
  struct timeval tv;
  fd_set rdfs;

  tv.tv_sec = 0;
  tv.tv_usec = 0;

  FD_ZERO(&rdfs);
  FD_SET (STDIN_FILENO, &rdfs);

  select(STDIN_FILENO+1, &rdfs, NULL, NULL, &tv);
  return FD_ISSET(STDIN_FILENO, &rdfs);

} 
```

# delphi - 如何验证在 TEdit 中输入的值以及如何限制 TMaskEdit 只允许数字？

> ID：11199516
> 
> 赞同：0
> 
> 时间：2012-06-26T01:03:31.587
> 
> 标签：delphi, delphi-7

我需要帮助来验证某些控件。

***问题 1：***
我的表单上有一个 TEdit 控件。我想检查用户输入的数据是字母还是数字。

***问题 2：***
我的表单上有一个 TMaskEdit 控件，我想限制用户只能输入数字。

任何人都可以发布代码示例如何做到这一点？
任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T02:32:11.353

> 我的表单中有一个 TEdit 控件。我想检查用户输入的数据是字母还是数字。

查看`TryStrToInt()`SysUtils 单元中的函数。如果它返回 True，则文本是一个有效数字。

> 我的表单中有一个 TMaskEdit 控件。我希望用户只输入数字。

阅读有关该`TMaskEdit.EditMask`属性如何工作的文档。将掩码设置为包含尽可能多的`'#'`字符，以允许用户输入数字。

或者，切换到`TEdit`并使用该`SetWindowsLong()`功能为其赋予`ES_NUMBER`样式。

# git - 从 Bare Git Repo 创建工作树

> ID：11199518
> 
> 赞同：2
> 
> 时间：2012-06-26T01:03:57.033
> 
> 标签：git

> **可能重复：**
> [如何进行“git export”（如“svn export”）](https://stackoverflow.com/questions/160608/how-to-do-a-git-export-like-svn-export)

我有一个使用“git clone --bare”创建的裸 git 存储库。这是我将更新推送到的存储库，不包含源文件的工作树。

我想知道是否可以从这个裸存储库创建工作树？我知道我可以在裸存储库上做一个“git clone”，但我想创建没有 .git 目录的工作树的副本，本质上只是源文件。工作树的副本不需要受源代码控制，它本质上只是来自裸 git 存储库的源文件。

任何帮助将不胜感激，谢谢！

# php - 如何从 php 中的 mysql 查询中排除列？

> ID：11199524
> 
> 赞同：1
> 
> 时间：2012-06-26T01:04:38.080
> 
> 标签：php, mysql

我有一个简单的查询（在 mySQL 视图中），php 正在使用它来创建表：

```
select `swtickets`.`ownerstaffid` AS `ID`,
`swtickets`.`ownerstaffname` AS `Owner`,
sum(if((`swtickets`.`ticketstatusid` = 2),1,0)) AS `In Progress`,
sum(if((`swtickets`.`ticketstatusid` = 4),1,0)) AS `Pending Customer`,
sum(if((`swtickets`.`ticketstatusid` = 5),1,0)) AS `Customer Replied`,
sum(if((`swtickets`.`ticketstatusid` = 9),1,0)) AS `Suggested Resolution`,
sum(if((`swtickets`.`priorityid` in (3,6) and `swtickets`.`ticketstatusid` in     (2,4,5,9)),1,0)) AS `High/Critical`,
sum(if((`swtickets`.`ticketstatusid` in (2,4,5,9)),1,0)) AS `Total Workable` 
from `swtickets` where ((`swtickets`.`departmentid` = 14) 
and ownerstaffid in (select staffid from swstaff where staffgroupid=4 and isenabled =  1)
and (`swtickets`.`ownerstaffname` <> '')) group by `swtickets`.`ownerstaffname` 
```

我在 while 循环中调用数据，但我似乎无法摆脱“ID”列，我需要调用它，因为它用作 Owner 列的超链接的目标。理想的标题是：

所有者 | 进行中 | 待定客户 | 客户回复 | 建议的分辨率 | 总工作量

php：

```
 $ticketloadquery = mysql_query("SELECT * from open_tickets;")
or die(mysql_error()); 

$ticketloadfield_num = mysql_num_fields($ticketloadquery);

echo "<div><h1>Work Load</h1>";
if(mysql_num_rows($ticketloadquery)==0) {
echo "<i>There are no currently unassigned tickets!</i>";
}
else{
echo "<table border='1'><tr>";
for($i=0; $i<$ticketloadfield_num; $i++)
{
$ticketloadfield = mysql_fetch_field($ticketloadquery);
echo "<td>{$ticketloadfield->name}</td>";
}
echo "</tr>\n";

while($ticketloadinfo = mysql_fetch_array( $ticketloadquery )) 
{ 

echo "<tr>"; 
echo "<td><a href='https://support.mysite.com/staff/dashboard.php?   id=".$ticketloadinfo['ID']."', target='_blank'>".$ticketloadinfo['Owner']."</a></td> "; 
echo "<td>".$ticketloadinfo['Owner'] . "</td> "; 
echo "<td>".$ticketloadinfo['In Progress'] . "</td> "; 
echo "<td>".$ticketloadinfo['Pending Customer'] . " </td>"; 
echo "<td>".$ticketloadinfo['Customer Replied'] . " </td>";
echo "<td>".$ticketloadinfo['Suggested Resolution'] . " </td>"; 

echo "<td>".$ticketloadinfo['Total Workable'] . " </td></tr>"; 
} 
echo "</div>";
echo "</table>"; 
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T01:07:59.100

删除任何一个

```
echo "<td><a href='https://support.mysite.com/staff/dashboard.php?   id=".$ticketloadinfo['ID']."', target='_blank'>".$ticketloadinfo['Owner']."</a></td> "; 
```

或者

```
echo "<td>".$ticketloadinfo['Owner'] . "</td> "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T01:09:14.527

删除只有所有者的单元格，因为它与前一个单元格相同，只是没有超链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T01:10:53.190

即使您现在设法为该`ID`列创建一个例外，这种方法将来也会导致问题，因为您会自动从标题查询中生成列，然后您手动添加列以获取您想要的信息展示。

有两种选择：

1.  您会自动生成所有信息，以便标题和内容始终保持同步。不建议这样做，因为您在显示信息的方式方面没有任何灵活性
2.  也手动添加标题行。通过这种方式，您可以显示任何您想要的内容，并且您可以使用一个简单的 html 块来实现这一点。

作为旁注，我还建议在标题行中使用`th`元素而不是`td`元素。

所以你会替换：

```
for($i=0; $i<$ticketloadfield_num; $i++)
{
$ticketloadfield = mysql_fetch_field($ticketloadquery);
echo "<td>{$ticketloadfield->name}</td>";
} 
```

和：

```
?>
<th>Owner</th>
<th>In Progress</th>
<th>Pending Customer</th>
<th>Customer Replied</th>
<th>Suggested Resolution</th>
<th>Total Workable</th>
<?php 
```

# javascript - 检测桌面 Safari 的两指滑动

> ID：11199527
> 
> 赞同：8
> 
> 时间：2012-06-26T01:05:11.547
> 
> 标签：javascript, safari, webkit

在 OS X 上的 Safari 中，带有魔术触控板或 macbook 触控板，用两根手指左右滑动分别会产生前后左右的效果。有没有办法检测到这一点，与单击后退/前进或点击命令+箭头等不同？

原因是滑动有它自己的显示风格的滑动动画，并且在网站上使用自定义 ajax 转换，当你让一个跟随另一个时看起来真的很奇怪。例如，在 github 上浏览代码时会发生这种情况。

**23/6/16 更新**：Github 恢复为简单地交换页面内容而没有过渡，这是一个聪明的举动。我目前的做法是对后退/前进做同样的事情，即使网站上使用了某种花哨的过渡。这可以防止浏览器可能执行的任何操作与站点转换之间的冲突

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-03T16:18:22.903

您可以使用鼠标滚轮事件来查看在您的 popstate 事件之前是否已在触控板上执行了水平滚动：

```
// boolean that stores if a swipe has been performed.
var bScrolled = false;
// countdown in ms before resetting the boolean.
var iTime = 1000;
var oTimeout;
window.addEventListener('mousewheel', function(e) {
  if (e.wheelDeltaY === 0) {
  // there is an horizontal scroll
    if (!bScrolled) {
    // no need to set bScrolled to true if it has been done within the iTime time. 
      bScrolled = true;
      oTimeout = setTimeout(function(){
        bScrolled = false;
      }, iTime);
    }
  }
});

window.onpopstate = function() {
  // clear the timeout to be sure we keep the correct value for bScrolled
  clearTimeout(oTimeout);
  // check if there has been a swipe prior to the change of history state
  if (bScrolled) {
    // check which browser & OS the user is using, then
    // trigger your awesome custom transition.
  }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-29T18:10:40.000

一句话，没有。滑动被写入 OS X 后面的 UNIX 代码和 Safari 浏览器的代码中。然后浏览器识别手势并将其解释为后退/前进按钮。

也就是说，您可能会编写一些代码来识别页面上具有特定速度的滚动，然后触发您的代码，但您总是会与浏览器的预编码后退/前进按钮识别竞争。据我所知，您无法从 HTML（或任何其他语言）中修改浏览器。

# jquery - 使用 jQuery 更改 X-UA 兼容的元标记

> ID：11199532
> 
> 赞同：3
> 
> 时间：2012-06-26T01:05:38.560
> 
> 标签：jquery, internet-explorer, internet-explorer-8, internet-explorer-9

是否可以使用 jQuery 更改 X-UA-Compatible 元标记？我目前正在处理将通过 iFrame 嵌入到另一个页面的页面。父文档当前将 X-UA-Compatible 标记设置为 Edge，这完全破坏了我的框架。我希望以某种方式强制父文档重新加载页面但应用 IE8 标准。

现在我正在打电话

```
$("meta[name=X-UA-Compatible]", top.document).attr('content', 'IE=8'); 
```

这不起作用。我开始认为这根本不可能，因为即使在我正在处理的框架内，我也无法以显着改变 IE9 解析它的方式来更改此属性。

我正在查看此图表： http: [//i.stack.imgur.com/e5gPv.png](http://i.stack.imgur.com/e5gPv.png)看来我只能将框架切换到 Quirks 或 IE9，这非常不方便。有没有人有任何想法？也许有一个我根本没有看到的ajax解决方案..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T22:35:47.120

所以我终于想通了，如果您需要重新加载框架，这是需要放置在框架 HTML 中的代码。

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
if($('meta[http-equiv=X-UA-Compatible]', top.document).attr('content')!='IE=8') 
{
//alert('adjusting IE compatibility');
$('meta[http-equiv="X-UA-Compatible"]', top.document).attr('content', 'IE=8');
$('meta[http-equiv="X-UA-Compatible"]').attr('content', 'IE=8');
$('#FRAMEID',window.parent.document).attr('src',$('#FRAMEID',window.parent.document).attr('src'));
}
</script> 
```

它仍在进行测试以确认解析器合法更改，但目前这是我们得到的最好的快速修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T01:08:39.763

在您的代码行中，您在“[name=X-UA-Compatible”之后缺少一个括号。
这可能是问题吗？

另外，您无法控制首页的代码，并且它在同一个域中吗？

# entity-framework - 数据库优先方法中与联结表的多对多关系

> ID：11199538
> 
> 赞同：2
> 
> 时间：2012-06-26T01:07:33.897
> 
> 标签：entity-framework, entity-framework-4.1

我有三个表 Author、Book 和 AuthorBook。AuthorBook 表只包含两个指向 Author 和 Book 表的外键，以实现 Author 和 Book 表之间的多对多关系。

当我从数据库生成模型时，Author 和 Book 模型是在它们之间没有任何关联的情况下创建的。我期待着Author 模型下的“ **Books** ”和Book 模型下的“ **Authors ”。**我在这里遗漏了什么或者这就是它的工作方式吗？这是我的表格图 ![在此处输入图像描述](../Images/0497976ccbea000268912a3b7bca35ce.png)

这是我的模型图

![在此处输入图像描述](../Images/3ef455bdb164403e9502ac9b0f40ef16.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T01:57:51.397

实体框架未包含表 BookAuthor，因为它没有主键。我通过在表上定义一个主键（在 authorid 和 bookid 上）解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:28:14.990

您的数据库中的关系是否在 Book BookAuthor 和 Author BookAuthor 之间定义？-->[如何在 SQL Server 中创建外键？](https://stackoverflow.com/questions/48772/how-do-i-create-a-foreign-key-in-sql-server)

# php - 我应该将上传的照片转换为一种格式还是保留其原始格式

> ID：11199540
> 
> 赞同：1
> 
> 时间：2012-06-26T01:07:59.320
> 
> 标签：php, image, image-processing, imagemagick

我正在使用 amazon ec2 + s3 使用 php + image magick 编写一个简单的图像上传功能。

该功能基本上接收图像，可能会压缩，并将其调整为 3~4 种不同的大小，并且图像的访问频率高于上传的频率。

我不是数字图像方面的专家，我仍在决定是将上传的图像转换为 jpeg 还是保留其原始格式（jpeg、png、gif - gif 将转换为静止图像，以防格式被转换）。

我能想到的有两点需要考虑。

1.  计算能力使用（最好不要转换）
2.  网络带宽（更好地转换）

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:11:28.177

根据我的经验，您希望保留原始图像。如果您决定重新设计网站并在全球范围内更改图像格式，您以后可能需要它。如果您不保留原件，您将无法在这种情况下重新处理它们。

关于。计算能力的使用——你不应该担心这个。您只需调整一次大小，然后在每次加载图像时对 CPU 和带宽进行优化图像大小补偿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T01:14:48.217

更改用户上传的图像格式通常不是一个好主意。某些格式有自己的特点和好处，改变格式可能并不理想。例如，png 比 gif 或 jpeg 对透明度的支持更好。因此，转换可能会导致您的图像看起来很奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T01:17:29.920

png 和 gif 更适合压缩某些类型的图像，基本上是块状图形，而 jpeg 更适合于类似照片的图像。因此，根据您上传的图像类型，可能无法节省带宽/存储空间。

转换的计算成本很高，如果您不异步执行它，它会减慢您的 Web 服务器。

如果您对图像的使用可以接受任何一种类型（jpg、png、gif），那么我建议您将它们保留为接收到的格式。

# xml - 根据条件减少 XML 中的行

> ID：11199544
> 
> 赞同：1
> 
> 时间：2012-06-26T01:08:34.037
> 
> 标签：xml

目前我有以下 XML：

```
<Rowsets>
    <Rowset>
        <Row>
            <DrilldownDepth>0</DrilldownDepth>
            <ScheduleWeek>---</ScheduleWeek>
            <ABC>---</ABC>
            <PQR>1500</PQR>
            <XYZ>15000</XYZ>
            <Quant>285</Quant>
        </Row>
        <Row>
            <DrilldownDepth>1</DrilldownDepth>
            <ScheduleWeek>12</ScheduleWeek>
            <ABC>---</ABC>
            <PQR>1500</PQR>
            <XYZ>15000</XYZ>
            <Quant>285</Quant>
        </Row>
        <Row>
            <DrilldownDepth>2</DrilldownDepth>
            <ScheduleWeek>12</ScheduleWeek>
            <ABC>SUPER</ABC>
            <PQR>100</PQR>
            <XYZ>200</XYZ>
            <Quant>300</Quant>
        </Row>
        <Row>
            <DrilldownDepth>2</DrilldownDepth>
            <ScheduleWeek>12</ScheduleWeek>
            <ABC>Duper</ABC>
            <PQR>100</PQR>
            <XYZ>200</XYZ>
            <Quant>300</Quant>
        </Row>
        <Row>
            <DrilldownDepth>2</DrilldownDepth>
            <ScheduleWeek>12</ScheduleWeek>
            <ABC>Fun</ABC>
            <PQR>100</PQR>
            <XYZ>200</XYZ>
            <Quant>300</Quant>
        </Row>
        <Row>
            <DrilldownDepth>2</DrilldownDepth>
            <ScheduleWeek>7</ScheduleWeek>
            <ABC>SUPER</ABC>
            <PQR>100</PQR>
            <XYZ>200</XYZ>
            <Quant>300</Quant>
        </Row>
        <Row>
            <DrilldownDepth>2</DrilldownDepth>
            <ScheduleWeek>7</ScheduleWeek>
            <ABC>Duper</ABC>
            <PQR>100</PQR>
            <XYZ>200</XYZ>
            <Quant>300</Quant>
        </Row>
        <Row>
            <DrilldownDepth>2</DrilldownDepth>
            <ScheduleWeek>8</ScheduleWeek>
            <ABC>SUPER</ABC>
            <PQR>100</PQR>
            <XYZ>200</XYZ>
            <Quant>300</Quant>
        </Row>
    </Rowset>
</Rowsets> 
```

现在我只需要那些`<Row>`where`<DrilldownDepth>2</DrilldownDepth>`和 `<ScheduleWeek>12</ScheduleWeek>`. 我可以使用中继器/循环来实现它，但我需要使用 Xpath 或 XSLT 来实现它。因此，我们将不胜感激对此事的任何帮助。

索茨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T01:24:28.150

以下 XPath 语句使用[谓词](http://www.w3.org/TR/xpath/#predicates)过滤器来选择包含满足指定条件的子元素的 Row 元素：

```
/Rowsets/Rowset/Row[DrilldownDepth=2 and ScheduleWeek=12] 
```

为 XSLT 中应用的值使用变量：

```
<xsl:variable name="depth">2</xsl:variable>
<xsl:variable name="week">12</xsl:variable>
<xsl:apply-templates select="/Rowsets/Rowset/Row[DrilldownDepth=$depth and ScheduleWeek=$week]"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:36:36.633

'and' 运算符的替代方法是使用第二个谓词。哪个更好取决于个人风格，但是如果您查看很多关于 SO 的答案，您会发现多谓词方法是流行的选择。

看起来像这样...

```
 /Rowsets/Rowset/Row[DrilldownDepth='2'][ScheduleWeek='12'] 
```

**注意：**在文字数字周围有或没有引号时，这同样适用。没有可能更具可读性。使用可能会更有效。这又是一种风格选择。

# vb.net - 隐藏在 Button 后面的 ComboBox 未触发 Click 事件

> ID：11199550
> 
> 赞同：0
> 
> 时间：2012-06-26T01:09:26.220
> 
> 标签：vb.net, winforms, vb6-migration

我正在将一个旧的 VB 表单转换为 .NET，并且有几个按钮，每个按钮都有一个相应的 ComboBox 隐藏在它们后面。之前的行为是您单击 Button，这将触发其后面的 ComboBox，然后下拉选择列表。我相信这个想法是有一个静态颜色和文本标签*（它不能是下拉列表中的可选选项）*，具有组合框的功能。

现在，在 VB.NET 中，单击 Button *（直接位于表单中的 ComboBox 上方）*将不再触发 ComboBox 下拉菜单。但是，如果我使 ComboBox 足够可见以单击，它将触发`ComboBox.TextChanged`事件，并显示下拉列表*（它们设置为`DropDownList`样式）*。我已设置事件处理程序来处理该事件和 Button 事件。我已经尝试过`Button.MouseDown`,`Button.MouseClick`和`Button.Click`-- 都没有奏效。

[我确实找到了此处建议](https://stackoverflow.com/a/10171863/1411373)的 SplitButton 控件选项，这可能会完成这项工作，但我不想只为 3 个按钮集成非本机控件。我也不想[弄乱控制模板](https://stackoverflow.com/questions/5703206/combobox-controltemplate-drop-down-button)——无论如何，我不确定这是否是一个解决方案。

为什么 ComboBox 没有触发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:15:50.180

我不确定你到底想做什么。但是您可以[`ComboBox.DroppedDown`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.droppeddown)在您的 Button Click 事件中将 Property 设置为 True 以触发 DropDown。应该是这样的。

![在此处输入图像描述](../Images/cc40aa857414341ed93661a91d1581a8.png)

# ruby-on-rails - 在哪里定义 Rails 应用程序的版本号

> ID：11199553
> 
> 赞同：19
> 
> 时间：2012-06-26T01:09:41.470
> 
> 标签：ruby-on-rails, ruby, documentation, versioning

关于如何/在哪里指定应用程序的版本号是否有任何约定？

例如，对于 ruby​​，gems`lib/mygem/version.rb`是通常用于该目的的文件。

我的猜测是创建`config/version.rb`这样的文件：

```
module MySite
  VERSION = "0.0.4"

  # or in MySite::Application class
  # 
  # class Application
  #   VERSION = "0.0.4"
  # end
end 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-06T09:27:01.040

我会回答我自己的问题，我找不到更好的答案。

由于 Rails 应用程序基本上是`MySite::Application`我认为应用程序的版本应该通过`MySite::Application::VERSION`这样 create 访问：

**配置/初始化程序/version.rb**

```
module MySite
  class Application
    VERSION = "0.0.4"
  end
end 
```

或`config/version.rb`并要求从`config/application.rb`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-26T01:24:24.543

我使用初始化程序将我自己的版本添加到 Configuration 类中：

**app_version.rb**

```
class Configuration
  class << self
    attr_accessor :app_version
  end
  @app_version = 0.72
end 
```

在应用程序中，我可以拉取版本：

```
@app_version = Configuration.app_version 
```

不知道为什么要使用该版本，但我经常使用版本控制，因此我可以查看特定版本的代码是否正在实际运行。在这种情况下，我需要将每个代码修订版本都反映为一个新版本，因此我在我的代码中使用 Git 版本，并且通常只显示它的前几个字符，因为这可能足以识别它。

```
@git_version = `git show --pretty=%H`[0..39] 
```

# ruby-on-rails-3 - 带有自定义操作的 form_for 未呈现

> ID：11199555
> 
> 赞同：0
> 
> 时间：2012-06-26T01:10:24.460
> 
> 标签：ruby-on-rails-3, rails-routing

我正在从事一个非常简单的项目，以更好地学习 Rails，来自 C# 背景。我的代码似乎呈现了不正确的表单操作。

它目前有 2 个模型正在使用

```
 resources :leaks
  resources :passwords 
```

这是给我基本路线：

```
Matts-MacBook-Pro:pwcrack-webgui mandreko$ rvm 1.9.3 do rake routes
        leaks GET    /leaks(.:format)              leaks#index
              POST   /leaks(.:format)              leaks#create
     new_leak GET    /leaks/new(.:format)          leaks#new
    edit_leak GET    /leaks/:id/edit(.:format)     leaks#edit
         leak GET    /leaks/:id(.:format)          leaks#show
              PUT    /leaks/:id(.:format)          leaks#update
              DELETE /leaks/:id(.:format)          leaks#destroy
    passwords GET    /passwords(.:format)          passwords#index
              POST   /passwords(.:format)          passwords#create
 new_password GET    /passwords/new(.:format)      passwords#new
edit_password GET    /passwords/:id/edit(.:format) passwords#edit
     password GET    /passwords/:id(.:format)      passwords#show
              PUT    /passwords/:id(.:format)      passwords#update
              DELETE /passwords/:id(.:format)      passwords#destroy 
```

在我的leakscontroller.rb 中，我有两种方法来尝试创建一个新的泄漏：

```
def new
  @leak = Leak.new

  respond_to do |format|
    format.html # new.html.erb
    format.xml { render :xml => @leak }
  end
end

def create
  @leak = Leak.new(params[:leak])  
  if @leak.save  
    redirect_to @leak, :notice => "Successfully created leak."  
  else  
    render :action => 'new'  
  end  
end 
```

最后，在我的 new.html.erb 中，我有：

```
<%= form_for @leak, :url => { :action => "create" } do |f| %>
    <div class="field>
        <%= f.label :source %>
        <%= f.text_field :source %>
    </div>
    <div class="field">
        <%= f.label :file %>
        <%= f.file_field :file %>
    </div>
    <div>
        <%= f.submit %>
    </div>
<% end %> 
```

我认为使用此视图，它会创建一个带有 action=Create 的表单，但会生成以下代码：

```
<form accept-charset="UTF-8" action="/leaks" class="new_leak" enctype="multipart/form-data" id="new_leak" method="post"> 
```

任何线索为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:20:12.017

由于 Rails 的宁静性质和一些严肃的元编程，`form_for`当使用`ActiveRecord`对象实例时，助手假设一个简单的：

```
<% form_for @leak do |f| %> 
```

提交后将对您的控制器上`POST`的操作进行操作。 如果您需要一个更具体的表单，而不是按照 Rails 应用程序遵循的默认模式，您可以使用帮助程序。 例如，如果你的控制器中有一个，你可以在你的.`create`
`form_tag`
`secret_action``routes.rb`

```
resources :leaks do
  collection do
    post :secret_action
  end
end 
```

像这样的形式：

```
<% form_tag secret_action_leaks_path do %> 
```

你会得到你期望的行为。一旦你了解了 Rails 中路由、路径、表单的基础知识，你就会不假思索地做这些事情。
尝试阅读其中的一些内容：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

# android - 图形视图库 - 未找到 GraphViewData

> ID：11199561
> 
> 赞同：1
> 
> 时间：2012-06-26T01:11:49.190
> 
> 标签：android, graph

我试图找到一个用于 android 图形的好的库。我看过这样的链接：[http://www.achartengine.org/index.html](http://www.achartengine.org/index.html) 这里的示例文件中有多个错误，Eclipse 找不到一些包和类似的东西。我尝试的另一个是 android plot，但它似乎被破坏了。

现在我正在尝试从这里使用 Graph View：[http](http://www.jjoe64.com/2011/07/chart-and-graph-library-for-android.html) : //www.jjoe64.com/2011/07/chart-and-graph-library-for-android.html 我正在尝试运行一个示例程序，但现在 eclipse找不到 GraphViewData。任何人都可以帮助我吗？我将示例程序插入到我的 Activity 中的 onCreate 中，并导入了 Eclipse 可以找到的文件。我也对其他可行的图表建议持开放态度。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-14T22:54:54.560

GraphViewData 不是内置类。它只是实现 GraphViewDataInterface 的任何类的一个示例。如果你仔细看，你会注意到 GraphViewSeries 构造函数的签名说它需要一个 GraphViewDataInterface 对象数组（即任何实现 GraphViewDataInterface 的类的对象）。我知道这没有明确写在[http://android-graphview.org/#doc_createsimplegraph](http://android-graphview.org/#doc_createsimplegraph)上的简单图形示例中，但这是事实。

简单地说，创建一个名为 GraphViewData（或使用任何其他名称）的类，它实现了 GraphViewDataInterface 并按如下方式使用它。

*   将以下类添加到您的项目中：

    ```
    public class GraphViewData implements GraphViewDataInterface {
        private double x,y;

        public GraphViewData(double x, double y) {
            this.x = x;
            this.y = y;
        }

        @Override
        public double getX() {
            return this.x;
        }

        @Override
        public double getY() {
            return this.y;
        }
    } 
    ```

*   现在使用它：

    ```
    GraphViewSeries exampleSeries = new GraphViewSeries(new GraphViewData[] {
        new GraphViewData(1, 2.0d),
        new GraphViewData(2, 1.5d),
        new GraphViewData(3, 2.5d),
        new GraphViewData(4, 1.0d),
        new GraphViewData(5, 3.0d),
        new GraphViewData(6, 4.75d)
    }); 
    ```

我希望这会有所帮助。谢谢你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-20T23:05:54.827

您不必创建自己的 GraphViewData。GraphViewData 似乎是 GraphView 的公共静态内部类。

您可以通过执行以下操作简单地导入它：

```
import com.jjoe64.graphview.GraphView.GraphViewData; 
```

希望这对其他人有帮助

更新：这是针对 GraphView-3.1.3 进行测试的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-23T18:37:36.553

你可以在**gradle中导入**

```
 compile 'com.jjoe64:graphview:3.1.3' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T21:34:42.750

显然，这是一个常见问题，可通过以下步骤解决：

在 Eclipse 中：

*   右键单击您的项目-转到构建路径-选择配置构建路径
*   转到“订购和导出”选项卡
*   选中“achartengine-1.0.0.jar”框，然后单击其名称
*   将其向上移动，使其位于 Android 依赖项的正下方（有时，如果您有多个 Jars，这可能会有所不同）

单击确定，然后清理您的项目。（项目->清理...）

来源：[https ://groups.google.com/forum/?fromgroups#!topic/achartengine/TLHv3a08GdA](https://groups.google.com/forum/?fromgroups#!topic/achartengine/TLHv3a08GdA)

编辑：类似的解决方案也适用于 GraphView！

# git - Git：为什么我看不到提交树的另一个“分支”？

> ID：11199563
> 
> 赞同：2
> 
> 时间：2012-06-26T01:12:18.513
> 
> 标签：git

我在引号中说“分支”是因为我的意思是数据结构中的分支，图拓扑意义上的分支，而不是类似于特定提交句柄的 git 分支。

我在master上，我创建了一个新分支，其中包含我通过编辑早期提交所做的提交：（字母顺序=时间顺序，基本上我发现该错误首先在提交C中引入）

```
A -- B -- C -- D <-- master
      \
       E <-- bugfix_branch 
```

我在`master`分支上，我查看了里面的小树图，`gitk`它没有显示提交 E。同样，如果我签`bugfix_branch`出分支并查看那里，它在列表中只显示提交 A、B 和 E（所以我不看不到 C 或 D)。

我想查看我的整个 git 历史的更完整视图，而不必先推送到 bitbucket 或 github 来尝试查看那里的图表。是否有某种方法可以查看所有提交并查看哪些提交是哪个提交的子项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T01:19:44.057

因为你需要使用`gitk --all`. `gitk`only 将仅显示当前分支。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T01:19:09.730

> 我在master分支上看gitk中的小树图

你需要从 gitk 开始`--all`。例如，来自 bash：

```
gitk --all 
```

从[文档中](http://www.kernel.org/pub/software/scm/git/docs/gitk.html)：

> - 全部
> 
> 显示所有分支。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T01:33:05.990

这是我用来在我的终端中获得一个包含所有节点的漂亮打印树的方法。

```
log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --date=relative --all 
```

你可以把它添加到你的`.gitconfig`文件中，我在“~/.gitconfig”中有这个：

```
[alias]
    lg = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --date=relative 
```

这让我可以：

```
git lg --all 
```

（免责声明我从其他来源修改了代码，但我不记得在哪里......）

# ruby-on-rails - RAILS_ENV=在 rspec before:all 中运行的 rake 任务中忽略测试

> ID：11199564
> 
> 赞同：2
> 
> 时间：2012-06-26T01:12:40.110
> 
> 标签：ruby-on-rails, rspec, rake

Rails 3.2.1、Ruby 1.9.3p125、rspec 2.8.0、rake 0.9.2.2

Rake::Task['namespace:task_name'].invoke 拒绝找到 namespace:task_name（namespace.rake 在 Rails.root/lib/tasks 中）。.execute - 相同。

所以，我在做

```
system 'RAILS_ENV=test bundle exec rake namespace:taskname' 
```

这似乎有效，但 - 不使用测试数据库。

我有一个模块，并被告知在 Rails 框架中为它编写测试。我正在使用 rspec。我有一个从我的“沙盒”环境创建固定装置的食谱任务（“开发”在其他地方，我无法访问）。夹具已正确创建。

接下来，我尝试运行

```
system 'RAILS_ENV=test bundle exec rake db.fixtures.load FIXTURES=<fixture_list>' 
```

我的测试数据库中没有数据；我只是假设它正在被加载回我的沙箱数据库中，这与它的派生位置相同。

我的模块的目的是检查数据库中的其他表，并且每天为 34 个提要中的每一个创建或不创建“提要状态”记录。是否创建记录取决于预定的时间表，“提要”是否遵守假期，星期几 - 许多标准差异很大，但由算法确定（这里有许多算法）。

我可以编写数百个测试来测试每个“提要”的每个可能结果，但是（a）我认为这是很多工作；(b) 它将无法维护（未来将添加更多“提要”）；(c) 我仍在研究算法的启发式方法——总是会出现一些新的或我没有预料到的东西，并且 (d) 我担心我会恢复使用模块使用的相同算法，这些算法测试只有我的打字。

因此，计划是创建一个包含一年中所有日期 x 所有“提要”（34x366）的电子表格矩阵，并手动输入 0 或 1 以指示“提要”当天不应该或应该存在。是的，这有点工作，但是关注我的人会更愿意更改电子表格而不是 ruby​​ 代码，并且任何差异都会出现。

因此，步骤是： 1\. 准备空的测试数据库 2\. 创建夹具（每次捕获对真实数据的更改） 3\. 加载夹具 4\. 运行模块一年的时间。5\. 对于每个电子表格条目，将其与模块将创建或不会创建的记录相匹配。

但是 - 我被困在“加载固定装置”上。没有数据被加载到测试数据库中。

顺便说一句，调用模块

```
system 'RAILS_ENV=test bundle exec rake namespace:task_that_calls_module' 
```

导致模块使用沙箱（当前环境）而不是测试数据库。

task_that_calls_module 也有 RAILS_ENV=test name_of_module_method_to_perform 并且**仍然**写入沙箱，而不是测试数据库。“沙盒”是我实际的开发环境。

Rails.root/spec/modules 中的 rspec 文件：

```
describe "MakeExpected" do
require 'rake'

  before(:all) do
    system "bundle exec rake testdb:extract_fixtures"
    puts "extracted fixtures"

    system "bundle exec rake db:test:load"
    puts "db:test:load"

    system 'RAILS_ENV=test bundle exec rake db:fixtures:load'
    puts "loaded fixtures"

    system("RAILS_ENV=test bundle exec rake testdb:run_make_expected --trace")
  end     # before

  it "should be true" do
  end     # should be true

end     # describe 
```

Rails.root/lib/tasks/testdb.rake 中的 testdb:run_make_expected 任务：

```
 task :run_make_expected => :environment do
    include MakeExpected
    RAILS_ENV=test test_scheduler
  end     # task do 
```

在 before 块之后，将进行一些复杂的测试，将 db 与电子表格中的期望值进行比较。

请告诉我这是愚蠢而简单的事情吗？

哦 - bundle exec db rake 的东西是因为我没有 root 可以将 rake 安装到常规 bin 目录中。与 rspec 相同。我将整个事情称为：

```
bundle exec rspec spec/modules 
```

其中这个 make_expected_spec.rb 是该目录中唯一的文件。我应该说

```
RAILS_ENV=test bundle exec rspec spec/modules 
```

？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T06:40:46.213

复制评论中的答案，以便从“未回答”过滤器中删除此问题：

> 我刚刚找到一个参考，说不能在 before(:all) 中加载固定装置。我目前正在使用上下文围绕测试集，并在进行任何测试之前在该上下文中加载固定装置，所以这个问题现在是无操作的。

〜回答每个[用户1208039](https://stackoverflow.com/users/1208039/user1208039)

# javascript - 根据对象中的键值条目将字符串中的键替换为值

> ID：11199565
> 
> 赞同：5
> 
> 时间：2012-06-26T01:13:14.733
> 
> 标签：javascript, string, replace, javascript-objects

我正在尝试根据其键值条目将字符串中的每个整数转换为对象中的相应值。例如，如果我有：

```
var arr = {
    "3": "value_three",
    "6": "value_six",
    "234": "other_value"
  };
var str = "I want value 3 here and value 234 here"; 
```

我会expext输出为：

```
new_str = "I want value_three here and value other_value here" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T01:19:37.470

我只是在脑海中做这件事，但这应该可行。

```
var new_str = str;

for (var key in arr) {
    if (!arr.hasOwnProperty(key)) {
        continue;
    }

    new_str = new_str.replace(key, arr[key]);
} 
```

如果您希望替换所有出现的数字，则需要将 Regex 合并到组合中：

```
var new_str = str;

for (var key in arr) {
    if (!arr.hasOwnProperty(key)) {
        continue;
    }

    new_str = new_str.replace(new RegExp(key, "g"), arr[key]);
} 
```

另外，我会选择除 之外的另一个名称`arr`，因为这意味着它显然是一个对象时是一个数组。此外，请确保您只`for-in`在对象上使用循环，而不是数组，因为原型泄漏和其他问题。

您也可以使用 jQuery 执行此操作，但这可能有点过头了：

```
var new_str = str;

$.each(arr, function (key, value) {
    new_str = new_str.replace(key, value);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-10-31T16:34:16.193

假设您有一个像`arr`,`str`定义和`new_str`声明的对象。然后，假设我们的目标是通用解决方案，则以下工作：

```
var arr = { "3": "value_three", "6": "value_six", "234": "other_value" };
var str = "I want value 3 here and value 234 here";

// Building a regex like `/3|6|234/g`
let re = new RegExp(Object.keys(arr).join('|'), 'g');

// Arrow function is approximately equivalent to
// an anonymous function like `function(match) { return arr[match]; }`
new_str = str.replace(re, match => arr[match]);

console.log(new_str);
```

就像一点旁注一样，`arr`鉴于您的示例是[`Object`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects). （我意识到它们有时也被称为关联数组；只是指出来）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-17T09:02:20.137

你也可以在这里使用一个减速器，在我看来它看起来更干净：

```
new_str = Object.keys(dynamicValues).reduce((prev, current) => {
  return prev.replace(new RegExp(current, 'g'), dynamicValues[current]);
}, value); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-02-03T12:45:39.707

2021年：

请注意

```
value 3 
```

也匹配

```
value 32 
```

```
const arr = {'3':'value_three', '6':'value_six', '234':'other_value'};
let str = 'I want value 3 here and value 234 here';

Object.keys(arr).forEach(key => str = str.replaceAll(`value ${key}`,arr[key]))
console.log(str)
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-03T14:31:13.010

使用`regex`，替代解决方案可能是这样的：

```
const object = {
    "3": "value_three",
    "6": "value_six",
    "234": "other_value"
};
const str = "I want value 3 here and value 234 here. value 32";

const replacedText1 = str.replace(/value \d+/g, v=>object[v.split(" ")[1]] || v);

const replacedText2 = str.replace(/\d+/g, v=>object[v] || v);

console.log(replacedText1);
console.log(replacedText2);
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-14T09:46:35.063

我最近需要用`key: value`一个对象的条目替换一个字符串，其中一些键包含特殊字符，例如大括号。因此，正如其他人所建议的那样，我们可以使用`String.replace`带有 RegExp 的函数并将函数作为替换值传递，但是创建 RegExp 本身存在问题，因为我们需要使用`\`. 这是转义函数和最终替换函数的示例：

```
// Escape string to use it in a regular expression
const regexpEscape = (string) => string.replace(/[.*+\-?^${}()|[\]\\]/g, '\\$&');

// Replace string with `key: value` entries of the search object.
const stringReplace = (string, search) => {
  const regexp = new RegExp(
    Object.keys(search)
      .map((item) => regexpEscape(item))
      .join('|'),
    'g'
  );
  return string.replace(regexp, (match) => search[match]);
};

const search = {
   '{{name}}': 'John',
   '{{lastname}}': 'Doe',
   '{{age}}': 24,
};

const template = 'Hey, {{name}} {{lastname}}! Your age is {{age}}.';

console.log(stringReplace(template, search));
```

希望它可以帮助某人！注意安全 ：）

# mysql - MAMP 管理错误，无法访问 mysql

> ID：11199566
> 
> 赞同：0
> 
> 时间：2012-06-26T01:13:20.593
> 
> 标签：mysql, mamp

我收到“错误：无法连接到 MySQL 服务器！” 当我尝试通过浏览器访问 MAMP 管理员时。

根据 MA​​MP 应用程序，mysql 和 Apache 都启动，但使用数据库的站点和 MAMP 管理员无法访问。

我尝试运行：

```
/Applications/MAMP/Library/bin/mysqladmin -u root -p password NEWPASSWORD 
```

反馈是：

```
/Applications/MAMP/Library/bin/mysqladmin: connect to server at 'localhost' failed
error: 'Access denied for user 'root'@'localhost' (using password: YES)' 
```

谁能帮我？如何更改 MAMP 中的 mysql 密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:37:46.190

你的命令应该是这样的 -

```
mysqladmin -u root password NEWPASSWORD 
```

# python - Python写入文件丢失行

> ID：11199569
> 
> 赞同：2
> 
> 时间：2012-06-26T01:13:40.437
> 
> 标签：python, python-3.x

我在使用 python 将字符串写入文件时遇到问题：（我正在尝试使用 python 生成一些 C 程序）我拥有的代码如下：

```
filename = "test.txt"
i = 0
string = "image"
tempstr = ""
average1 = "average"
average2 = "average*average"
output = ""
FILE = open(filename,"w")
while i < 20:
    j = 0
    output = "square_sum = square_sum + "
    while j < 20:        
        tempstr = string + "_" + str(i) + "_" + str(j)        
        output = output + tempstr + "*" + tempstr + " + " + average2 + " - 2*" + average1 + "*" + tempstr        
        if j != 19:        
            output = output + " + "
        if j == 19:
            output = output + ";"        
        j = j + 1
    output = output + "\n"
    i = i + 1
    print(output)
    FILE.writelines(output)    
FILE.close 
```

打印给了我正确的输出，但是文件缺少最后一行，并且缺少一些倒数第二行。将字符串写入文件有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T01:15:59.783

如果您调用该方法可能会有所帮助...

```
FILE.close() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T01:19:38.097

问题是您没有调用该`close()`方法，只是在最后一行提到它。您需要括号来调用函数。

Python的`with`声明可以使这变得不必要：

```
with open(filename,"w") as the_file:
    while i < 20:
        j = 0
        output = "square_sum = square_sum + "
        ...
        print(output)
        the_file.writelines(output) 
```

当`with`子句退出时，`the_file`会自动关闭。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T01:19:53.827

尝试：

```
with open(filename,"w") as FILE:
    while i < 20:
        # rest of your code with proper indent... 
```

不需要关闭...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T02:29:58.880

首先，您的代码的 Pythonified 版本：

```
img = 'image_{i}_{j}'
avg = 'average'
clause = '{img}*{img} + {avg}*{avg} - 2*{avg}*{img}'.format(img=img, avg=avg)
clauses = (clause.format(i=i, j=j) for i in xrange(20) for j in xrange(20))
joinstr = '\n    + '
output = 'square_sum = {};'.format(joinstr.join(clauses))

fname = 'output.c'
with open(fname, 'w') as outf:
    print output
    outf.write(output) 
```

其次，您似乎希望通过狂热的内联来加速您的 C 代码。我非常怀疑速度的提高能否证明你的努力是合理的，比如

```
maxi = 20;
maxj = 20;
sum = 0;
sqsum = 0;
for(i=0; i<maxi; i++)
    for(j=0; j<maxj; j++) {
        t = image[i][j];
        sum += t;
        sqsum += t*t;
    }

square_sum = sqsum + maxi*maxj*average*average - 2*sum*average; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T01:27:08.040

看起来您的缩进可能不正确，但只是关于您的代码的一些其他评论：

`writelines()`将列表或迭代器的内容写入文件。由于您输出单个字符串，因此只需使用`write()`.

```
lines ["lineone\n", "line two\n"]
f = open("myfile.txt", "w")
f.writelines(lines)
f.close() 
```

要不就：

```
output = "big long string\nOf something important\n"
f = open("myfile.txt", "w")
f.write(output)
f.close() 
```

另一方面，使用`+=`运算符可能会有所帮助。

```
output += "more text"
# is equivalent to
output = output + "more text" 
```

# jquery - Rails 3.2 has_many 通过表单提交

> ID：11199572
> 
> 赞同：0
> 
> 时间：2012-06-26T01:14:00.553
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3.1, has-many-through

我有一个 has_many :through 表单，我无法获得额外的属性来发布到数据库。我在某处弄脏了参数名称。我可以获取要发布的外键，但我有另一个要在连接表中跟踪的属性。请记住，这是一个 100% 基于 ajax 的表单。这是我所知道的

编辑：在研究了类似的问题后，我知道我应该构建表单属性，但我发现的代码由于某种原因不起作用。这里有一些资源。

[http://railsforum.com/viewtopic.php?id=20203](http://railsforum.com/viewtopic.php?id=20203)

[Rails 3，嵌套多级表单和 has_many 通](https://stackoverflow.com/questions/4671740/rails-3-nested-multi-level-forms-and-has-many-through)

我不明白的是附加 product_ids 是内置在导轨中的。这些价值观发布。为什么很难将 quantity_shipped 属性附加到该数组？

```
Models and Relationships
  Shipment  has_many :products :through => :product_shipments
  Product   has_many :shipments :through => :product_shipments
  ProductShipments belongs_to :shipment,  belongs_to :product

ProductShipments table
  t.integer    :shipment_id  
  t.integer    :product_id
  t.integer    :qty_shipped  <-- This is the Problem Child 
```

此部分循环显示来自某个供应商的所有产品几次。它为 product_ids 生成一个数组，为 product_shipments 数量生成另一个数组。

_product_shipments.html.erb。

```
<div id="product_shipments_container">
<h3>Assign Products to Ship</h3>
<ul class="product_shipments" id="product_shipments">
  <% Product.by_client(@client_id).each do |product| %>
    <%= content_tag_for :li, product, :value => product.id do %>
      <%= hidden_field_tag("shipment[product_ids][]", product.id) %>
      <%= product.product_name %><%= text_field_tag("product_shipments[qty_shipped]")%> <--This is where the issue lies
    <% end %>
  <% end %>
</ul>
</div> 
```

这是提交表单时的相关 POST 数据

```
"product_ids"=>["1", "3"]}, "product_shipments"=>{"qty_shipped"=>["32", "23"]} 
```

这是发送到数据库的 sql

```
INSERT INTO `product_shipments` (`product_id`, `qty_shipped`, `shipment_id`) 
VALUES (1, NULL, 155)
INSERT INTO `product_shipments` (`product_id`, `qty_shipped`, `shipment_id`)
VALUES (3, NULL, 155) 
```

这是我的控制器中的操作

```
def create
 @shipment = Shipment.new(params[:shipment])

 @product_shipments = @shipment.product_shipments.build(params[:product_shipments]) 
```

[:qty_shipped]) <- 不正确，但如果@shipment.save respond_with @shipment, :location => shipping_url else flash[:notice]= "Not saved" end end

这是我遇到的最后一个问题。

```
TypeError (can't convert Symbol into Integer):
  app/controllers/shipments_controller.rb:24:in `[]'
  app/controllers/shipments_controller.rb:24:in `create' 
```

知道了。使用下面的正确答案进行更改后。我能够将控制器更正为以下内容

```
@product_shipments = @shipment.product_shipments.build(params[:product_shipments]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T03:42:31.373

您的“创建”操作可以很简单

```
def create
  @shipment = Shipment.new(params[:shipment])

  if @shipment.save
    # success
  else
    # failure
  end
end 
```

如果您使用嵌套属性通过新的发货记录创建 shipping_products。为此，请将以下内容添加到 Shipment 模型中

```
class Shipment
  attr_accessible :shipment_products_attributes
  accepts_nested_attributes_for :shipment_products
end 
```

通过`fields_for`在视图中使用，这将允许货件接受`params[:shipment][:shipment_products_attributes]`并将这些信息传递给它的 shipping_products。

在你的新动作中，你可以做类似的事情

```
def new
  @shipment = Shipment.new
  # collect the ids of the products you want to create shipment products for
  @shipment.shipment_products.build([{:product_id=> ...},{:product_id=> ...}, ...])
end 
```

这样你就可以在表格中做类似的事情

```
<%= form_for @shipment, :remote => true do |f|%>
  ...
  ...
  <ul>
    <%= f.fields_for :shipment_products do |sp_f| %>
      <li>
        <%= sp_f.text_field :qty_shipped %>
        <%= sp_f.hidden_field :product_id %>
      </li>
    <% end %>
  </ul>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T21:43:17.163

最简单的解决方案是您需要生成一个哈希数组，看起来像

```
:product_shipments=>[{:product_id=>1, :qty_shipped=>32},{:product_id=>3, :qty_shipped=>23}] 
```

而不是两组哈希`:shipment=>{:product_ids=>[1,3]}`和`:product_shipments=>[:qty_shipped=>[32,23]]`.

为此，请将您的视图代码更改为

```
<%= hidden_field_tag("product_shipments[][product_id]", product.id) %>
<%= product.product_name %><%= text_field_tag("product_shipments[][qty_shipped]")%> 
```

然后您的控制器操作应该按原样工作。

# c# - 如何从给定的父节点获取所有子节点？

> ID：11199573
> 
> 赞同：4
> 
> 时间：2012-06-26T01:14:06.990
> 
> 标签：c#, .net, algorithm, recursion, relationship

我有一个父/子 ID 列表，并希望获取给定父 ID 的所有子 ID。没有 null 父级（顶级 ID 不会显示为子 ID）。

目前，父/子 ID 被记录为列表中的 KeyValuePair，但是如果这样会更好，则可以轻松地将其更改为另一个数据结构：

```
List<KeyValuePair<int, int>> groups = new List<KeyValuePair<int, int>>();
groups.Add(new KeyValuePair<int,int>(parentID, childID)); 
```

例如，这里是示例父/子。父母*27*的孩子将是*5944, 2065, 2066, 2067, 6248, 6249, 6250*。

```
Parent  Child
27      1888
1888    5943
1888    5944
5943    2064
5943    2065
5943    2066
5943    2067
2064    6248
2064    6249
2064    6250 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T01:18:00.500

为什么不更改类型`Dictionary<int, List<int>>`，其中父项是键，值（整数列表）是子项？

然后，您将使用以下命令取回子列表：

```
 private List<int> GetAllChildren(int parent)
    {
        List<int> children = new List<int>();
        PopulateChildren(parent, children);
        return children;
    }

    private void PopulateChildren(int parent, List<int> children)
    {
        List<int> myChildren;
        if (myitems.TryGetValue(parent, out myChildren))
        {
            children.AddRange(myChildren);
            foreach (int child in myChildren)
            {
                PopulateChildren(child, children);
            }
        }
    } 
```

您将需要权衡性能影响，因为这会加快读取速度并减慢写入速度（大部分时间甚至没有人注意到）。

您还需要检查列表是否在字典中`myitems.TryGet(...)`，如果没有，则需要创建它，但这是 o(1)，因此实际上是即时的。

```
private static void AddEntry(int parent, int child)
{
    List<int> children;
    if (!myitems.TryGetValue(parent, out children))
    {
        children = new List<int>();
        myitems[parent] = children;
    }
    children.Add(child);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-15T06:38:16.973

这很简单。只需认为您在以下数组中有列表

```
 List<KeyValuePair<int, int>> groups = new List<KeyValuePair<int, int>>();
    groups.Add(new KeyValuePair<int, int>(27, 1888));
    groups.Add(new KeyValuePair<int, int>(1888, 5943));
    groups.Add(new KeyValuePair<int, int>(1888, 5944));
    groups.Add(new KeyValuePair<int, int>(5943, 2064));
    groups.Add(new KeyValuePair<int, int>(5943, 2065));
    groups.Add(new KeyValuePair<int, int>(5943, 2066));
    groups.Add(new KeyValuePair<int, int>(5943, 2067));
    groups.Add(new KeyValuePair<int, int>(2064, 6248));
    groups.Add(new KeyValuePair<int, int>(2064, 6249));
    groups.Add(new KeyValuePair<int, int>(2064, 6250));
    groups.Add(new KeyValuePair<int, int>(2000, 1000));
    // Pass the 1st parameter as the parent to get all children
    List<int> childs = GetAllChild(27, groups); 
```

您需要使用“递归函数”来动态获取孩子。只需调用以下方法即可获取父级的所有子级

```
public List<int> GetAllChild(int id,List<KeyValuePair<int, int>> newLst)
{
      List<int> list = new List<int>();
      for (int i = 0; i < newLst.Count; i++)
      {
            if (Convert.ToInt32(newLst[i].Key) == id)
            {
                 if (!list.Contains(Convert.ToInt32(newLst[i].Value)))
                 {
                     list.Add(Convert.ToInt32(newLst[i].Value));
                     List<int> l = GetAllChild(newLst[i].Value, newLst);
                     list.AddRange(l);
                 }
            }
       }
       return list;
} 
```

# css - 你如何防止内联 CSS 链接“颜色”取消 CSS 样式表链接“悬停”？

> ID：11199576
> 
> 赞同：0
> 
> 时间：2012-06-26T01:14:24.673
> 
> 标签：css, colors, hover, toggle, inline-styles

我希望我的链接***在单击时改变颜色，但在悬停时也改变颜色。

我有一个javascript函数可以在单击时更改颜色，但它需要内联CSS，这使我的样式表的悬停无法正常工作。

有没有办法让内联 CSS 和 CSS 样式表不被取消？还是有另一种方法可以在单击时更改链接的颜色而不会取消悬停颜色？

***（这些链接用于显示使用 javascript 的隐藏 div）

**脚本：**

```
function toggle_link(select){
var color = select.style.color;
select.style.color = (color == "white" ? "yellow" : "white");
} 
```

**html:**

```
<div id="gdtitle">
<a class="port" href="#" onclick="toggle('gdhide');toggle_link(this);" style="color:white">Graphic Design</a>
</div> 
```

**css 样式表**

```
a.port{
text-decoration: none;
color: white;
}
a.port:hover{
text-decoration: none;
color: yellow;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T01:18:17.103

您可以使用`!important` [覆盖内联 css](https://stackoverflow.com/questions/11150684/can-i-override-inline-important/11151859#11151859)

更好的是，*不要*只改变你的行为`toggle_link`——你宁愿给元素添加一个类并设置它的样式吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T01:17:09.203

在 上使用`:link`、`:visited`和`:active`伪类`<a>`。

CSS：

```
a.port, a.port:link, a.port:visited, a.port:active {
    text-decoration: none;
    color: white;
} 
```

# ab-testing - 您如何为单页应用程序设置 Optimizely 测试？

> ID：11199579
> 
> 赞同：10
> 
> 时间：2012-06-26T01:15:07.413
> 
> 标签：ab-testing, single-page-application, optimizely

我有一个单页网络应用程序，它提供了一个多步骤照片管理“向导”，通过标签条分为几个离散步骤（照片上传、样式、注释、发布）。在切换步骤时，我将 URL 哈希设置为`#publishing-step`（或激活的任何步骤）。

**如何设置 Optimizely 测试以在向导的各个离散步骤上运行？**

浏览器永远不会离开页面，所以它只会得到一个`window.load`事件。`display: none`它的 DOM 并没有被废弃或重新生成，而只是通过or切换在任何时候可见的页面元素`block`，所以我试图弄清楚的部分实际上主要是关于我以何种方式进行 Optimizely 测试设置本身 -如果一次应用所有编辑，那很好（并且可能是必要的）。

不幸的是，这个东西必须在 IE9 中工作，所以我不能用来`history.pushState`为每个步骤获取相当离散的 url。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-18T22:36:26.797

实际上有几种方法可以做到这一点，您选择哪个选项在很大程度上取决于对您来说最简单的方法以及您计划如何分析数据。

## 如果您想使用 Optimizely 的分析仪表板：

我建议创建一个实验，该实验将在不同时间激活一堆其他实验。激活实验将针对每个人，并在他们到达您的向导时立即运行。其他实验将设置[手动激活](https://help.optimizely.com/hc/en-us/articles/200040225-Activation-Mode-Activating-an-experiment-dynamically-after-a-page-has-loaded?flash_digest=603944fe24a1cc57f6a587db2eeb40e67a785b38#manual)并由该实验触发。

激活实验的代码如下：

```
window.optimizely = window.optimizely || [];

function hashChanged() {
  if(location.hash === 'publishing-step') {
    window.optimizely.push(['activate', 0000000000]);
  }
  if(location.hash === 'checkout-step') {
    window.optimizely.push(['activate', 1111111111]);
  }
}

window.addEventListener('hashchange', hashChanged, false); 
```

或者你可以调用 window.optimizely.push(['activate', xxxxxxxxx]); 直接从您网站的代码中获取，而不是创建激活实验并监听 hashchange。

## 如果您想使用 Google Analytics 等第三方分析工具：

您可以使用与上述类似的代码在一个实验中完成所有这些操作，但在每个“if”部分而不是激活实验，您可以运行变体代码，对向导进行更改并将特殊跟踪信息发送到您的分析，以便以后使用报告。您必须为此方法进行自己的[统计显着性计算](http://www.surveysystem.com/sscalc.htm)（因为 Optimizely 的数据不会“干净”），但如果配置正确，这种方法通常效果更好。

或者，您可以使用上面概述的方法，但仍然尝试通过在实验上创建[自定义事件](https://help.optimizely.com/hc/en-us/articles/200039925-Custom-event-goals?flash_digest=ba6001c0fa013598ef160e67ddd7f50edcc79ff9)并使用以下调用向他们发送数据来使用 Optimizely 分析仪表板`window.optimizely.push(["trackEvent", "eventName"]);`

[这篇文章也可能对您有所帮助。](https://help.optimizely.com/hc/en-us/articles/203326524-AngularJS-Backbone-js-React-and-Single-Page-Applications)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T21:41:39.743

您可能需要自己执行此操作，使用 Optimizely 的 JS API 来触发他们的操作并告诉它您的用户做了什么：[https ://www.optimizely.com/docs/api](https://www.optimizely.com/docs/api)

# php - 在 PHP 中设置项目结构

> ID：11199582
> 
> 赞同：0
> 
> 时间：2012-06-26T01:15:37.860
> 
> 标签：php

我正在尝试设置一个基本的项目结构。那就是为我的项目创建一个新文件夹，并以一种合乎逻辑的方式设置其他文件夹，从而将生成 HTML 的 PHP 文件与不生成 HTML 的 PHP 文件分开。

关于如何做到这一点的任何想法或想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:50:02.897

如果您从头开始，我建议您使用 CodeIgniter、Fuel 或 Symfony 2 之类的框架。

如果您不想使用它们，请在 Web 根目录之外创建您的 PHP。前任：

```
/home
    /user
        /framework
            index.php

        /public_html
            index.php 
```

在 index.php 中，调用 /home/user/framework/index.php。这将增加一层安全性，从 Web 中删除您的框架的可访问性。使用 mod_rewrite 规则将所有内容传递给 .htaccess 中的 index.php ，一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T01:18:50.397

遵循模型-视图-控制器设计模式，并考虑使用像[Symfony2](http://symfony.com)这样的框架。如果您要自己开发结构，请为您的视图（PHP 或 Smary/twig/mustache/etc 模板）创建一个文件夹，为您的控制器创建一个文件夹，并为您的数据模型创建一个文件夹。这往往是 Web 应用程序的干净组织结构 :)

# ember.js - Ember.js - 控制嵌入式/聚合模型创建

> ID：11199585
> 
> 赞同：0
> 
> 时间：2012-06-26T01:15:52.777
> 
> 标签：ember.js, ember-data

请参阅[JSFiddle 上的示例](http://jsfiddle.net/harlan/7Hgw2/1/)。

使用 Ember.js，有没有办法从 JSON 控制模型创建，特别是嵌入式/聚合的创建？在下面的示例中，希望 Person 模型包含 Friend 的实例。在 Knockout 中，这是通过映射插件完成的。将不胜感激任何建议。

```
Person = Ember.Object.extend({
    numberOfFriends : function() {
        return this.get("friends").length;
    }.property("friends"),
});

Friend = Ember.Object.extend({
    isAvailable : function() {
        var stat = this.get('status');
        return stat == 'online'; 
    }.property('status'),
});

var personData = {
    name : "Fozzie Bear",
    friends : [ 
        {
            name : "Kermit The Frog",
            status : "online"
        },
        {
            name : "Miss Piggy",
            status : "sleeping"
        }
    ]
};

var person = Person.create(personData); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:01:22.657

您确实应该使用[ember-data](https://github.com/emberjs/data)。

# php - 类扩展在 php 帮助中

> ID：11199589
> 
> 赞同：1
> 
> 时间：2012-06-26T01:16:06.220
> 
> 标签：php, class, extending-classes

我有一个看起来像这样的自动加载功能：

```
function __autoload_HTTP_Client($class_name) {
    $HC = $class_name . '.class.php';
    return require_once($HC);
} 
```

当我调用一个类时，我使用 $users = new users();

我想要做的是将我的类文件放在我的类目录中的文件夹中。所以我会有

```
/users/users.class.php
/general/general.class.php 
```

在我的用户类中，我希望能够扩展 general.class.php

```
class users extends general {

} 
```

因为我希望能够从一般使用 $this-> 所以我不想使用包含。但是当我扩展通用时，它说找不到该类，因为它位于不同的目录中。

有关解决此问题的任何想法（我知道自动加载需要更改为使用目录/ $file.class.php

但是我如何扩展当前类目录之外的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:24:25.377

利用：

```
set_include_path(get_include_path().':/users:/general'); 
```

然后，上面将在这些目录中查找文件，您不必在自动加载器内的 include/require 上使用路径，只需使用文件名等。

# git - Visual Studio 2012 RC 的每项目源代码控制提供程序

> ID：11199590
> 
> 赞同：0
> 
> 时间：2012-06-26T01:16:20.030
> 
> 标签：git, version-control, mercurial, visual-studio-2012

我在这里搜索过，GooBingHooVista'd the world 并阅读了 VS 2010 的相关问题：[How to configure Visual Studio to use different source control providers](https://stackoverflow.com/questions/5994009/how-to-configure-visual-studio-to-use-diferent-source-control-providers) and others linked。这个答案：[https](https://stackoverflow.com/a/6789773/492) ://stackoverflow.com/a/6789773/492是迄今为止最有趣的，尽管该功能似乎基于 VS 中的一个错误。我会为我工作，尽管我宁愿它让它正常工作。

我问的是与 VS 2012 基本相同的问题 - 提供者模型是否已更改和/或是否可以让每个项目的 VS 集成切换源控制（SEO：版本控制）提供者，而不仅仅是每个解决方案？

问的原因：我在 Hg 和 Git 中有一个项目。这些天 Git 似乎赢得了青睐，但目前 Kiln（Fogbugz 的链接回购）是 Hg-only，我的大部分回购都在那里。我发现能够通过几次击键从 VS 提交（我将 ctrl-alt-shift-C 设置为 File => Commit）而不是将我虚弱的思想从 VS 切换到做家务，这很方便。

如果需要添加扩展来执行此操作，我会非常高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:23:09.857

啊。项目文件中的源代码控制绑定，如[https://bitbucket.org/zzsergant/hgsccpackage/issue/78/not-modify-the-project-files-after-adding中所述](https://bitbucket.org/zzsergant/hgsccpackage/issue/78/not-modify-the-project-files-after-adding)

Git 扩展位于[http://visualstudiogallery.msdn.microsoft.com/63a7e40d-4d71-4fbb-a23b-d262124b8f4c](http://visualstudiogallery.msdn.microsoft.com/63a7e40d-4d71-4fbb-a23b-d262124b8f4c)

汞扩展位于[http://visualstudiogallery.msdn.microsoft.com/9bc074fa-9e1f-4ce2-a75d-b90e65f7475a](http://visualstudiogallery.msdn.microsoft.com/9bc074fa-9e1f-4ce2-a75d-b90e65f7475a)

# jquery - ui 自动完成验证额外的模糊事件

> ID：11199594
> 
> 赞同：1
> 
> 时间：2012-06-26T01:17:44.173
> 
> 标签：jquery

我有自动完成工作的验证。

[http://skoizumi.com/autocomplete/index.html](http://skoizumi.com/autocomplete/index.html)

```
var ac = $( "#searchtext" ).autocomplete({
                source: "testdata.php",
                minLength: 2,
                select: function( event, ui ) {
                console.log( '3');                      
                },
                close: function( event, ui ) {
                    console.log( 'closing.' );
                }
            });

            jQuery.validator.addMethod("contractorName", function (value, element) {

                var result = false;
                var contractorName = $("#searchtext" ).val();

                //validating the specified field has a valid name

                $.ajax({
                    type: "GET",
                    url: "/autocomplete/return2.php",
                    async: false,
                    dataType: "json",
                    data: {
                        'searchtext': $( "#searchtext" ).val()
                    },
                    complete: function(test){
                        res = JSON.parse( test.responseText );
                        console.log( res );                         
                        result = res.result;
                    }
                });

                return result;
            }, "Specified Contractor doesn't exist"); 
```

我这样做是为了当您从列表中选择“European Nightjar”或键入相同的内容时，它应该验证并返回 true，否则它应该显示一条错误消息，指出“指定的承包商不存在”。

但是，如果您在文本框中有无效数据并从列表中选择它会返回错误，因为验证发生在从列表中选择之前。

有没有办法在从列表中选择时不必进行验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T01:35:48.953

这是来自 jQuery 演示站点：

```
 $( ".selector" ).autocomplete({
        select: function(event, ui) { ... }
          }); 
```

为 select: 添加一个不同的函数，当你从下拉列表中选择时，选择会触发，而不是仅仅放置 console.log('3'); 在此处验证文本

# .net - 为什么 F5（开始调试）播放解决方案中的所有网站，而不仅仅是“启动”网站？

> ID：11199597
> 
> 赞同：2
> 
> 时间：2012-06-26T01:18:00.803
> 
> 标签：.net, asp.net-mvc-3, visual-studio-2010, iis-express

> **可能重复：**
> [在四个解决方案中调试一个网站](https://stackoverflow.com/questions/1272270/debugging-one-website-in-a-solution-of-four)

我们的解决方案有大约 12 个项目。这包括 4 个网站。

1.  主网站（设置为启动项目）
2.  线下网站
3.  一个小部件网站
4.  API 站点。

为什么当我们点击`F5`开始调试时，所有 MVC 站点都在 IIS express 中启动？

有没有办法说“只启动启动项目”或“定义的”项目？

顺便说一句，这是我们的`Configuration Properties`：

![在此处输入图像描述](../Images/e11927392c138b8dee97c7ee1beeac7e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:15:47.773

正如 Pablo Romeo 建议的那样（在重复的 Q 中），诀窍是搜索关键字[Visual Studio 2010 Always Start When Debugging](https://www.google.com.au/search?sugexp=chrome,mod=13&sourceid=chrome&ie=UTF-8&q=Always%20Start%20When%20Debugging)。

这导致人们说

*   打开属性窗口，为每个网站项目的ROOT。
*   将**调试时始终启动**设置为关闭。

![在此处输入图像描述](../Images/a9d69d5d908552d68f8d7c5092324472.png)

# git - 合并 2 个不同的 git 存储库

> ID：11199602
> 
> 赞同：3
> 
> 时间：2012-06-26T01:18:35.260
> 
> 标签：git, github, git-merge

我有两个不同的本地 git 存储库。每个都作为（单独的）私有存储库托管在 github 上，具有自己的一组协作者/开发人员。我是这两个 github 存储库的所有者。

```
# Repo A, which  is in
~/projects/repo-a
# Repo B, which is in
~/projects/repo-b 
```

我有两个问题： * 如何将*repo-a*合并到*repo-b*，反之亦然。可能吗？* 如果可能，我们可以让*repo-a*合作者**不出现在***repo-b*上，反之亦然吗？这个想法是为回购合作者保密。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T04:06:34.577

子模块不是频繁提交的最佳选择。在我的项目中，我使用[git-slave](http://gitslave.sourceforge.net)，它有点过时了，但适合我的所有需求:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-05T03:59:56.853

查看“[如何合并两个 git 存储库？](https://stackoverflow.com/questions/1425892/how-do-you-merge-two-git-repositories) ”。简而言之：了解“子模块”和“子树合并”。

我的建议：阅读 git 书：

*   [子模块](http://git-scm.com/book/en/Git-Tools-Submodules)
*   [子树合并](http://git-scm.com/book/en/Git-Tools-Subtree-Merging)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-26T01:32:06.940

```
$ git remote add repo-a <url a>
$ git remote add repo-b <url b>
$ git fetch repo-a
$ git fetch repo-b
$ git checkout repo-a/master
$ git checkout -b merging-branch
$ git merge repo-b/master 
```

# web-services - Restful Web 服务 - 规范

> ID：11199605
> 
> 赞同：0
> 
> 时间：2012-06-26T01:19:05.863
> 
> 标签：web-services, rest

Restful Web 服务的规范是什么意思。我是 Restful Web 服务的新手，我使用“Get”方法/操作创建了一个简单的 Rest Web 服务。Web 服务是使用 jersey 创建的。我被要求提供此 Web 服务的规范，但我不确定正确的答案应该是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:11:51.917

这意味着您需要描述可用的调用以及它们可以接收或返回的对象类型。对于一些示例，请查看主要网站的 API 文档，例如[Twitter API 参考](https://dev.twitter.com/docs/api)、Facebook Graph API 等。

# python - Ebay SOAP 错误返回“缺少 SOA 操作名称标头”

> ID：11199607
> 
> 赞同：0
> 
> 时间：2012-06-26T01:19:35.763
> 
> 标签：python, web-services, soap, ebay-api, suds

我正在尝试使用 python 的[suds](https://fedorahosted.org/suds/)在 eBay 的网络服务上发出一些请求，但我总是收到此错误：

> “缺少 SOA 操作名称标头”

我使用的代码如下：

```
client = Client(EBAY_WSDL)
ns1 = ('ns1', 'http://www.ebay.com/marketplace/search/v1/services')
operation_name = Element('X-EBAY-SOA-OPERATION-NAME',ns=ns1).setText('findItemsByKeywords')
appid = Element('X-EBAY-SOA-SECURITY-APPNAME',ns=ns1).setText('MY APP ID')
headers = [appid,operation_name]
client.set_options(soapheaders=headers) 
```

我看不出我在标题上做错了什么......有人可以为我指出吗？

谢谢！

- 编辑 -

好吧，对于任何有同样问题的人。我已经解决了这个问题。

问题是我正在设置soap标头，而它应该是http标头。因此，答案是将标头放在 Client 构造函数中，如下所示：

```
operation_name = {'X-EBAY-SOA-OPERATION-NAME':'findItemsByKeywords', 'SomeOther':'blabla'}
client = Client(EBAY_WSDL,headers=operation_name) 
```

就是这样！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:48:07.343

复制原始海报的答案：brunodea

* * *

好吧，对于任何有同样问题的人。我已经解决了这个问题。

问题是我正在设置soap标头，而它应该是http标头。因此，答案是将标头放在 Client 构造函数中，如下所示：

```
operation_name = {'X-EBAY-SOA-OPERATION-NAME':'findItemsByKeywords', 'SomeOther':'blabla'}
client = Client(EBAY_WSDL,headers=operation_name) 
```

就是这样！

# ruby-on-rails - 如何自定义 Mailboxer 电子邮件的模板？

> ID：11199613
> 
> 赞同：5
> 
> 时间：2012-06-26T01:19:58.963
> 
> 标签：ruby-on-rails

它会自动发送电子邮件，上面写着

```
You have a new message: subject

      You have received a new message:    

        Body      

      Visit http://example.com/ and go to your inbox for more info 
```

有谁知道如何自定义这个模板？如果可能的话，我想为这个模板表单使用 i18n。

谢谢！！.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-30T12:01:27.147

您需要为发送给用户的邮件生成视图， `rails g mailboxer:views` 这将在`<your rails app>/app`

1-`notification_mailer - containing template files when a notification is sent to a user`

2-`message_mailer - containing template files when a message is sent to a user`

您可以更改这些模板。

您可以做的另一件事是取消注释/添加这些行`/config/initializer/mailboxer.rb`

```
config.notification_mailer = CustomNotificationMailer
config.message_mailer      = CustomMessageMailer 
```

并创建上面两个必须包含以下函数的邮件类

```
send_email 
```

此函数的参数及其实现在此链接上给出。您将获得有关如何编写自己的 send_mail 函数的提示。

[Notification Mailer 发送电子邮件功能](http://www.rubydoc.info/github/ging/mailboxer/Mailboxer/NotificationMailer)

[Message Mailer 发送电子邮件功能](http://www.rubydoc.info/github/ging/mailboxer/Mailboxer/MessageMailer)

# objective-c - 在 iOS 上播放 youtube/vevo 视频

> ID：11199614
> 
> 赞同：3
> 
> 时间：2012-06-26T01:20:03.703
> 
> 标签：objective-c, cocoa-touch, uiwebview, youtube, youtube-api

我看过[Google 博客文章](http://apiblog.youtube.com/2009/02/youtube-apis-iphone-cool-mobile-apps.html)解释了在 iOS 应用程序中嵌入 youtube 视频的方式。我已经成功地将视频嵌入到我的 iOS 应用程序中。但是，我看过 WhoSampled 应用程序，他们可以在其中播放 Vevo/youtube 视频。他们以某种方式能够播放这些视频，而我的应用程序无法播放它们。（在我的应用程序中，有一个蓝色的播放圆圈，其中有一条线表示不可播放。）

如何让这些视频可以播放？

我是否必须以特定方式设置 youtube 链接，或者是否需要设置开发者密钥？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:56:15.900

有一种方法可以获取给定 YouTube 视频的实际视频流，而不是 HTML 嵌入视频。看到这个项目：

[https://github.com/hellozimi/HCYoutubeParser](https://github.com/hellozimi/HCYoutubeParser)

这种方法的问题在于它可能会违反 YouTube API 的 EULA，特别是如果您在付费应用程序中发布它：

> 此外，请记住，API 服务条款严禁尝试在 YouTube 嵌入式、自定义或无铬播放器之外播放 YouTube 视频。

（来源：[https](https://developers.google.com/youtube/creating_monetizable_applications) ://developers.google.com/youtube/creating_monetizable_applications ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:02:22.480

您只需要使用 iframe 嵌入而不是 Flash 嵌入。

# ruby-on-rails - 没有kgio的窗户上的导轨

> ID：11199620
> 
> 赞同：3
> 
> 时间：2012-06-26T01:22:01.937
> 
> 标签：ruby-on-rails, ruby, windows

如何在没有 kgio 的情况下在 Windows 上安装 rails？

当我运行“rails server”时，它会尝试安装我假设它需要的依赖项。一旦尝试安装 kgio，它就会失败。我进行了相当多的搜索，发现 kgio 在 Windows 上不起作用 - 是否有解决方法？

即我什至需要它吗？
如果不是...如何从依赖项列表中删除它？
如果我确实需要它，那么我的选择是什么？有没有其他选择？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T02:28:39.490

你想经营独角兽吗？如果是这种情况，您只需更换您的网络服务器。也许[薄](http://code.macournoyer.com/thin/)？如果您决定使用 Thin，您将需要在 Gemfile 中使用它：

```
gem "eventmachine", ">= 1.0.0.beta"
gem 'thin' 
```

Thin 需要 eventmachine，但并非所有版本都可以，您需要 beta（预发布）版本。

# python - 我可以创建一个不是类的字段成员的新样式 pyqt 信号吗？

> ID：11199622
> 
> 赞同：2
> 
> 时间：2012-06-26T01:22:19.350
> 
> 标签：python, pyqt4, signals-slots, qthread

因此，我可以看到使用 PyQt4 创建样式信号的唯一方法如下：

```
class MyCustomClass(QtCore.QThread):
    custom_signal = QtCore.pyqtSignal(str) 
```

我的不满是，如果我在其他任何地方声明该信号，pyqt 会向我抛出一个关于 custom_signal 没有 connect() 函数的错误。

当我想做一些简单的事情时，我想创建一个辅助函数来帮助删除样板/重复代码：启动一个新线程，在该线程中工作，将结果作为信号发送给对象。但是当我需要在类中定义信号时很难。

有什么办法让信号只是一个局部变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:58:12.403

不确定我是否正确理解了您的问题，但从您的评论看来，定义一个适用于任何类型的信号就足够了？如果是这种情况，您可以使用**object**作为类型：

```
class MyCustomClass(QtCore.QThread):
    custom_signal = QtCore.pyqtSignal(object) 
```

简单测试：

```
>>> def callback(result):
...    print type(result)
...
>>> obj = MyCustomClass()
>>> obj.custom_signal.connect(callback)
>>> obj.custom_signal.emit('hello')
<type 'str'>
>>> obj.custom_signal.emit({'x': 1})
<type 'dict'> 
```

# code-analysis - 如何防止 Visual Studio 在每次构建后切换到代码分析选项卡？

> ID：11199625
> 
> 赞同：40
> 
> 时间：2012-06-26T01:22:52.230
> 
> 标签：code-analysis, visual-studio-2012

每次构建后，Visual Studio 2012 从解决方案资源管理器切换到代码分析选项卡，通常带有黄色的“未检测到代码分析问题”。（不妨说“TA DA！”）。

是否有关闭选项卡切换的选项（将其保留在解决方案资源管理器中）？[因为我在解决方案或选项中都找不到它]。

谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-29T13:16:37.057

**对比 2012**

到目前为止，我发现的最佳答案是将代码分析视图的选项卡从解决方案资源管理器中拖出。我已经将我的停靠在解决方案资源管理器下方，并使其高约 1 英寸 - 所以当我希望检查它时，我仍然可以看到它在极少数情况下报告的内容，但不会一直丢失我的解决方案资源管理器。

它仍然是不必要的，但刺激性要小得多。

* * *

**更新 - VS 2013**

在 VS 2013 中，您现在可以单击代码分析视图中的**设置**选项，然后禁用该`Show window when issues are detected`选项。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-05T18:52:58.837

右键单击项目 --> 属性 --> 代码分析选项卡 --> 取消选中在构建时启用代码分析。

希望有帮助。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-22T13:17:24.297

刚刚发现关于您的问题的非常有用的博客文章[暂时禁用整个 VS 实例的 C# 静态代码分析](http://www.jaylee.org/post/2013/03/30/VS2012-Temporarily-disable-the-C-static-code-analysis-for-a-whole-VS-instance.aspx)。

此外，我还找到了永久禁用所有 VS 2012 实例的代码分析的方法：您需要添加名称为“DevDivCodeAnalysisRunType”且值为“已禁用”的 Windows 环境变量（全部不带引号）。有关 Windows 环境变量[How To Add/Edit Environment Variables in Windows 7](http://www.nextofwindows.com/how-to-addedit-environment-variables-in-windows-7/)的有用帖子。

希望有帮助。

# ruby-on-rails - 如何防止随机抽取中任意两个元素相同？

> ID：11199626
> 
> 赞同：0
> 
> 时间：2012-06-26T01:23:00.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3, conditional-statements

这是我的代码：（谢谢MurifoX）

```
<% random_bullets = Bullet.all %>
<ul>
  <% 4.times do %>
    <li><%= random_bullets.sample.content %></li>
  <% end %>
</ul> 
```

我想知道是否可以设置条件来防止任何两个“项目符号”在页面上具有相同的内容。如果是这样，我能否在这个问题上获得一些帮助，也许是朝着正确的方向轻推？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T01:29:26.897

只需在使用它们时将它们从池中删除：

```
<% 4.times do %>
  <li><%= random_bullets.delete_at(rand random_bullets.size).content %></li>
<% end %> 
```

# sql - 中间安全层 (Django/SQL)

> ID：11199629
> 
> 赞同：1
> 
> 时间：2012-06-26T01:24:00.033
> 
> 标签：sql, django, security

给定 MySQL 中具有“国家”字段的行的表，我需要向用户提供权限。本质上，我想说“X 用户可以访问德国 + 法国 + 加拿大”，但“Y 用户可以访问法国 + 美国”。我认为一个好的方法可能是使用 Django 的组（即 - 每个国家有 1 个组，并相应地添加人员）。我的问题是，出于安全原因，我想确保查询一组授权数据。

例如，一种方法是为每个可能的组合（仅限德国，德国 + 法国，几乎无限）创建一个视图 im MySQL，但鉴于潜在排列的数量，这显然是不可行的。我可以为每个国家/地区创建 1 个视图，并分别查询每个视图，但是如果允许用户访问 20 个不同的国家/地区，我会对数据库施加很大压力。

那么，我如何才能高效、安全地查询这些数据，以确保 100% 确保我只会取回授权数据？

PS：不一定在SQL级别。如果 Django 有一些功能允许我这样做，我会很好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:58:33.527

您可以创建一个与用户具有多对多关系 的单独*Country模型，并在访问模型时跨该关系进行查询。*

```
class Country(models.Model):
    name = models.CharField(max_length=64)
    iso_code = models.CharField(max_length=2)
    users = models.ManyToManyField("auth.User")

class MyModel(models.Model):
    country = models.ForeignKey(Country)
    ...

MyModel.objects.filter(country__users=current_user) 
```

# c++ - 需要 C++ 集成的简单 HTTP 资产服务器的最佳技术

> ID：11199636
> 
> 赞同：-1
> 
> 时间：2012-06-26T01:24:38.930
> 
> 标签：c++, http

我正在考虑开发一个基于 HTTP 的服务器，用于存储和稍后检索内部资产（只是文件/数据块）。客户端应该能够通过简单的 HTTP 请求连接并检索数据，或者使用 RESTful API 来存储文件。

存储文件时，我们需要调用预先存在的 C++ 代码来更新我们的资产数据库、设置内部链接并运行各种检查（例如数据是否正常）。

我们这里有大量现有的 C++ 技术，用高级语言重写它是不切实际的，所以我们希望尽可能多地重用这些技术。然而，在我们的简短研究中，似乎在高级语言中组装一个高性能的 HTTP 服务器绝对是微不足道的，我们希望尽可能多地为 HTTP 服务器部分使用现成的技术。

有人对此有任何经验/见解吗？我们查看了 Node.js，它看起来非常强大，然后我们查看了它的 C++ 集成并被吓跑了。我们无法将所有低级技术重写为非阻塞，而 Node.js 似乎需要这样做。其他人建议使用 Ruby，我们有一些经验，但我们之前从未将 C++ 添加到混合中。对其他想法也完全开放。

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T01:43:04.217

我会使用[http://code.google.com/p/mongoose/](http://code.google.com/p/mongoose/)。Mongoose 是用 C 语言编写的，很容易集成到现有代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T01:57:02.210

也许你可以试试 poco： [http://pocoproject.org/features.html](http://pocoproject.org/features.html) Poco 是一个很好的 c++ 库，它们提供了一个 HTTP 服务器框架。

# html - 如何从一页中删除 Wordpress 标题？

> ID：11199637
> 
> 赞同：3
> 
> 时间：2012-06-26T01:24:49.190
> 
> 标签：html, css, wordpress

我知道这可以通过自定义 CSS 来完成，但我想不出正确的方法。

如果你告诉我如何只用标题来做，我想我可以为所有这些人弄清楚。

例如，这是我要删除的元素：`<h1 class="page-title entry-title">`

我知道这`{display: none}`是隐藏项目的 CSS，但我怎样才能只为特定页面做到这一点？

该网站是： http: [//myinneryoga.com/strange-exotic-fruit-supplement/](http://myinneryoga.com/strange-exotic-fruit-supplement/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T02:05:03.007

用于`h1.page-title { display: none; }`隐藏标题，这将影响使用相同模板的所有页面。

如果您想专门针对这篇文章执行此操作，请使用以下命令：

`#post-28 h1.page-title { display: none; }`帖子编号只会将其锁定到该页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T02:08:31.730

基于该页面，正文具有类

```
 <body class="wordpress... singular-page singular-page-28 layout-1c" 
```

28 是该页面的页面 id，因此如果您只想对此进行 CSS 修复，可以使用下面的代码

```
.singular-page-28 h1.page-title{
    display:none;
} 
```

请注意，如果您通过导出/导入将 wordpress 移动到另一个虚拟主机，如果 page_id 发生更改，您需要再次查看它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T02:05:20.160

看看这个小提琴，如果这是你想要的方式。

[http://jsfiddle.net/Qj4Us/](http://jsfiddle.net/Qj4Us/)

它只是查找目标 URL，例如“http://myinneryoga.com/strange-exotic-fruit-supplement/”，如果找到，则`h1`隐藏`class=page-title`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-06T18:18:29.160

我们可以使用简单的插件，而不是修改会影响所有页面的 CSS。以下是步骤：

1.  单击插件> 添加新的。

2.  现在搜索隐藏标题。

3.  安装并激活插件。

4.  现在单击页面>所有页面。

5.  现在编辑要隐藏标题的特定页面。

6.  现在，在右侧面板中，您可以看到隐藏标题的选项。检查并发布您的更改。

[![在此处输入图像描述](../Images/6955b9edace64d3f964ced087e52463c.png)](https://i.stack.imgur.com/3mVof.jpg)

# ruby - 如何在 ruby 对象中使用变量进行方法调用？

> ID：11199642
> 
> 赞同：1
> 
> 时间：2012-06-26T01:25:55.380
> 
> 标签：ruby, variables, interpolation

我有一个匿名哈希数组，我用它来定义要打印为输出的配置。每个匿名哈希都有一个标签和一个字段作为键以及它们对应的值。

在 Perl 中，我会执行以下操作：

```
foreach my $config ( @configurations )
{
    foreach my $element ( keys %{$configuration} )
    {
        print $element . " - " . $config->{$element} . "\n";
    }
} 
```

观察变量的使用，`$element`上面表示键（即标签和字段）。

我想在 ruby​​ 中做同样的事情，但是`#{variable-name}`当我尝试将它用于 Ruby 对象时，我发现它不起作用。

如何使用变量作为对 Ruby 对象的方法调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T01:31:33.383

我相信你的意思是：

```
my_hash.each do |key, value| 
  puts "#{key} - #{value}"
end 
```

在红宝石中，这称为 a `block`。它调用内部函数并传递一些变量以在其范围内使用。就像文档说的那样：

> 为 hsh 中的每个键调用一次阻塞，将键值对作为参数传递。 [http://ruby-doc.org/core-1.9.3/Hash.html#method-i-each](http://ruby-doc.org/core-1.9.3/Hash.html#method-i-each)

# php - PHP找到相等的变量

> ID：11199643
> 
> 赞同：0
> 
> 时间：2012-06-26T01:26:01.853
> 
> 标签：php, arrays

有没有办法轻松检查多个变量的值是否相等？例如，在下面的代码中，我有 10 个值，使用等号检查它们是否都相等很麻烦。

```
 <?
  foreach($this->layout as $l): 
  $long1=$l['long1_campaignid'];    
  $long2=$l['long2_campaignid']; 
  $long3=$l['long3_campaignid'];    
  $long4=$l['long4_campaignid']; 
  $long5=$l['long5_campaignid'];    
  $long6=$l['long6_campaignid'];    
  $long7=$l['long7_campaignid'];    
  $long8=$l['long8_campaignid'];    
  $long9=$l['long9_campaignid'];    
  $long10=$l['long10_campaignid'];
  endforeach;
 ?> 
```

例如，如果 $long1=3,$long2=7,$long3=3,$long4=7,$long5=3 等，

我需要检索 $long1=$long3=$long5 和 $long2=$long4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:29:21.337

我*想*这就是你要找的：

```
<?
  foreach($this->layout as $l): 
  $m = array_unique($l);
  if (count($m) === 1) {
      echo 'All of the values are the same<br>';
  }
  endforeach;
?> 
```

我假设您正在查看数组中的所有值是否相同。所以要做到这一点，我调用[`array_unique()`](http://us3.php.net/manual/en/function.array-unique.php)从数组中删除重复项。如果数组的所有值都相同，这将给我们留下一个包含一个元素的数组。所以我检查了这个，如果它是真的，那么所有的值都是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T01:46:56.407

问题中显示的示例是关于“**分组**”而不是直接关于“查找相等变量”。

我认为这个简单的“分组不改变顺序”算法就是答案......其他算法使用`sort()`也很容易用 PHP 实现。

```
<?
  foreach($this->layout as $l) {
     $m = array();
     foreach($1 as $k=>$v) // keys 'longX' and values
        if (array_key_exists($v,$m)) $m[$v][] = $k; 
        else                         $m[$v]   = array($k);
     foreach ($m as $val=>$keys)
        if (count($keys)>1) echo "<br/> have SAME values: ".join(',',$keys)
  }
?> 
```

## 关于“找到相等的变量”

[另一个（简单）代码，请参见PHP man of array_unique](http://php.net/manual/en/function.array-unique.php)中的示例 #2 。

```
<?
  $m = array_unique($this->layout);
  $n = count($m);
  if ($n == 1)
      echo 'All of the values are the exactly the same';
  elseif ($n>0)
      echo 'Different values';
  else 
      echo 'No values';
?> 
```

“相等标准”可能需要对字符串进行一些过滤，以规范空格、小写/大写等。只有使用这种“灵活相等”才能证明循环。例子：

```
<?
  $m = array();
  foreach($this->layout as $l) 
      $m[trim(strtolower($1))]=1;
  $n = count(array_keys($m));
  if ($n == 1)
      echo 'All of the values are the exactly the same';
  elseif ($n>0)
      echo 'Different values';
  else 
      echo 'No values';
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T01:40:07.623

如果@John Conde 的答案不是您想要的，并且您想检查集合中的一个或多个相同值，您可以[`sort`](http://www.php.net/manual/en/function.sort.php)使用数组然后循环遍历它，保留最后一个值并将其与当前值进行比较.

# java - 为货币问题格式化 EditText

> ID：11199645
> 
> 赞同：1
> 
> 时间：2012-06-26T01:26:35.740
> 
> 标签：java, android, android-edittext, currency

所有-我已经为此苦苦挣扎了一段时间，并查看了有关此类事情的所有其他问题，但我无法弄清楚：我有一个需要为货币格式化的 edttext 字段。我已经在与此相关的所有其他问题中尝试了代码，但无论我尝试什么，它都不起作用。这是我的代码：

```
EditText text = (EditText)findViewById(R.id.edit_bill);  

    text.setRawInputType(Configuration.KEYBOARD_12KEY);    

    text.addTextChangedListener(new TextWatcher(){
        EditText text = (EditText)findViewById(R.id.edit_bill);
        DecimalFormat dec = new DecimalFormat("0.00");
        public void afterTextChanged(Editable arg0) {
        }
        public void beforeTextChanged(CharSequence s, int start,
                int count, int after) {
        }
        public void onTextChanged(CharSequence s, int start,
                int before, int count) {
            if(!s.toString().matches("^\\$(\\d{1,3}(\\,\\d{3})*|(\\d+))(\\.\\d{2})?$"))
            {
                String userInput= ""+s.toString().replaceAll("[^\\d]", "");
                if (userInput.length() > 0) {
                    Float in=Float.parseFloat(userInput);
                    float percen = in/100;
                    text.setText("$"+dec.format(percen));
                    text.setSelection(text.getText().length());
                }
            }
        }
    }); 
```

此代码位于 onClick 方法中。这有什么不同吗（例如，只有在用户单击按钮时才会格式化文本）？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T02:09:52.523

我过去曾使用这种方法来格式化货币。

```
static public String customFormat(String pattern, double s ) {
    DecimalFormat myFormatter = new DecimalFormat(pattern);
    String stringFormatOutput = myFormatter.format(s);
    return stringFormatOutput;
 } 
```

它可以这样使用：

```
String strPrice = customFormat("$###,##0.00", 300.2568);
mTxt.setText(strPrice); 
```

只需将“300.2568”更改为您的价格。这可能对浮点数而不是双精度数同样有效。

# objective-c - iOS 是否将 NSStrings 强制转换为 NSNumbers？

> ID：11199646
> 
> 赞同：1
> 
> 时间：2012-06-26T01:26:39.043
> 
> 标签：objective-c, ios

副标题：为什么这段代码有效？它似乎允许通过某种强制`NSNumber`与类型进行比较。`NSString`我正在尝试将 a 中的选择`UISegmentedControl`与先前存储的值进行比较。

```
- (IBAction)minSegmentedControlChanged:(id)sender // MINIMUM value
{
UISegmentedControl *s1 = (UISegmentedControl *)sender;

NSMutableArray *pD = [[GameData gameData].curData valueForKey:@"persData"];

// Must make sure max >= min

NSNumber *currMax = [pD objectAtIndex:1];
NSLog(@"%@", [currMax class]); // __NSCFString ?!

int ss1 = s1.selectedSegmentIndex;
NSNumber *SS1 = [NSNumber numberWithInt:ss1 + 2];

if (SS1 >= currMax) SS1 = currMax;

NSLog(@"%@", SS1); // Answer is correct, appears to be an integer
NSLog(@"%@", [SS1 class]); // __NSCFString ?!

[pD replaceObjectAtIndex:0
              withObject:SS1];
[[GameData gameData].curData setObject:pD
                                forKey:@"persData"];
NSLog(@"%@", [[GameData gameData].curData valueForKey:@"persData"]);

} 
```

我特别想问：

```
NSNumber *currMax = [pD objectAtIndex:1];
NSLog(@"%@", [currMax class]); // __NSCFString ?! 
```

这似乎返回一个数字的字符串。 `[[GameData gameData].curData valueForKey:@"persData"];`初始化如下：

```
 _persData = [[NSMutableArray alloc] initWithObjects:@"2", @"8", @"TWL", @"0", @"0", nil]; 
```

这是元素 1 处的字符串。那么为什么我可以向它询问 an `NSNumber`，它报告它实际上是`__NSCFString`我可以在其上进行算术比较的 a 呢？我只在objective-c工作了几个月，但这似乎很奇怪。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T01:43:40.727

好的，让我们一步一步来。

首先，其中的所有元素`_persData`都是字符串。时期。`NSString`是一个类集群，因此您查询的各种实例的具体类可能看起来很奇怪，但这是为了支持免费桥接和其他与本讨论无关的魔法。

```
NSNumber *currMax = [pD objectAtIndex:1]; 
```

此行不正确。你可能认为发生了某种强制，但实际上你只是将 an 分配`NSString *`给`NSNumber *`. 这是错误的，并且会在您方便的时候尽早爆炸。碰巧`objectAtIndex:`返回一个`id`，它被剥离了类型信息，因此编译器相信您将其存储在正确类型的指针中，但在您尝试向它发送消息之前不会强制执行。

```
if (SS1 >= currMax) SS1 = currMax; 
```

这是一个非常巧妙的比较。`SS1`肯定是一个`NSNumber`，但是`currMax`是一个`NSString`。但我们不是在比较这些对象的值。为此，我们将使用该`compare:`方法。相反，我们将它们作为指针进行比较，只查看它们在内存中的地址。由于一些意外的实现，`SS1`似乎总是驻留在比`currMax`.

如果上述所有条件都为真，那么在执行上述行之后，`SS1`它始终是类型，这就解释了为什么这行：`NSString`

```
NSLog(@"%@", [SS1 class]); 
```

始终表示它`SS1`是一个字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T01:34:57.580

您实际上初始化了`NSMutableArray`with `NSString`，而不是 number 。

`NSMutableArray`当你从with中取出对象时，`objectAtIndex`函数的返回类型是`id`，它会盲目地转换为`NSNumber`，而实际的对象是`NSString`。

似乎该`SS1 >= currMax`语句是在比较对象的地址而不是它们的值。

您可以使用以下代码片段对其进行测试：

```
NSNumber *a = [[NSNumber alloc] initWithUnsignedInt: 34];
NSNumber *b = [[NSNumber alloc] initWithUnsignedInt: 3];

NSNumber *c = [[NSNumber alloc] initWithUnsignedInt: 34];
NSNumber *d = [[NSNumber alloc] initWithUnsignedInt: 234];

NSLog(@"%p %p %p %p %d %d", a, b, c, d, a >= b, c >= d); 
```

# objective-c - 设置 TableView Cell NSURL 的 Image isResizable 错误

> ID：11199647
> 
> 赞同：0
> 
> 时间：2012-06-26T01:26:44.243
> 
> 标签：objective-c, uitableview, uiimageview, uiimage

我正在使用一些正则表达式来获取 xml 中的第一个 URL，它是照片的链接，并将该照片设置为单元格的 imageview 图像。这是我的代码：

```
NSString *thearticleImage = entry.articleImage;
    NSRegularExpression *expression = [NSRegularExpression regularExpressionWithPattern:@"(?i)\\b((?:[a-z][\\w-]+:(?:/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}/)(?:[^\\s()<>]+|\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\))+(?:\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\".,<>?«»“”‘’]))" options:NSRegularExpressionCaseInsensitive error:NULL];
    NSString *someString = thearticleImage;
    self.theurl = [someString substringWithRange:[expression rangeOfFirstMatchInString:someString options:NSMatchingCompleted range:NSMakeRange(0, [someString length])]];

    cell.imageView.image = [NSURL URLWithString:theurl]; 
```

我最终得到了错误：

```
'-[NSURL _isResizable]: unrecognized selector sent to instance 0x882e250' 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:17:33.100

你不能使用 url`imageView.image`所以你可以像下面这样使用它

```
NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"your image link"]];
UIImage *downloadedImage = [UIImage imageWithData:imageData];
cell.imageView.image = downloadedImage; 
```

但它会产生崩溃...

**笔记**

要克服这种崩溃，您必须异步点击 URL。这样它不会产生崩溃并且表格将自由滚动

# javascript - 用javascript格式化数字

> ID：11199651
> 
> 赞同：0
> 
> 时间：2012-06-26T01:27:14.863
> 
> 标签：javascript

> **可能重复：**
> [JavaScript：格式化数字正好有两位小数](https://stackoverflow.com/questions/1726630/javascript-formatting-number-with-exactly-two-decimals)

有人可以帮我处理我的java脚本吗？
我的 java 脚本一直在计数，问题是美分字符长度太长（最多需要 2 个字符）。另一个问题是，我不知道我还需要将逗号放在正确的位置以确定适当的数量。示例：12345.67 与 12,345.67。如果有人可以看一下代码，修改它并重新发布完整的代码，因为我不知道该怎么做，我将不胜感激。

这是javascript代码：http: [//jsfiddle.net/pqsH6/](http://jsfiddle.net/pqsH6/)

* * *

```
<p style="float:left;">Money Saved: </p><b><p id="ds"  style="float:left;">$</p></b>
<div id="counter" style="float:left;"></div>

<script type="text/javascript">
    var START_DATE = new Date("january 1, 2012 12:00:00"); // put in the starting date here   
    var INTERVAL = 1000; // savings per second
    var INCREMENT = 0.005; // money saved per second
    var START_VALUE = -50000; // configures proper savings calculation
    var count = 0;
    window.onload = function()
    {
        var msInterval = INTERVAL * 1;
        var now = new Date();
        count = parseInt((now - START_DATE)/msInterval) * INCREMENT + START_VALUE;
        document.getElementById('counter').innerHTML = count;
        setInterval("count += INCREMENT; document.getElementById('counter').innerHTML = count;", msInterval);
    }
</script>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:31:23.043

这看起来像是一种使用 Javascript 用逗号格式化输出的方法：

[如何在 JavaScript 中用逗号打印一个数字作为千位分隔符](https://stackoverflow.com/questions/2901102/how-to-print-number-with-commas-as-thousands-separators-in-javascript)

```
function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
} 
```

只需将您的数字作为参数传递给函数，它将返回一个逗号分隔的数字。

这是另一个可用于四舍五入到小数点后两位的函数：

```
function formatCurrency(num) {
    num = isNaN(num) || num === '' || num === null ? 0.00 : num;
    return parseFloat(num).toFixed(2);
} 
```

然后像这样使用函数

```
var roundedCurrencyAmt = numberWithCommas(formatCurrency(amtOfMoney)); 
```

这是一个有效的 jsFiddle：http: [//jsfiddle.net/alexfromapex/Y2x8m/2/](http://jsfiddle.net/alexfromapex/Y2x8m/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:00:24.803

只是一个评论：

```
> var START_DATE = new Date("january 1, 2012 12:00:00"); 
```

依赖内置的 Date 函数正确解析字符串，但 ECMA-262 仅指定Date 应该解析的[一种格式](http://es5.github.com/#x15.9.1.15)（ISO8601 版本），但事实并非如此。但并非所有使用中的浏览器都支持该格式。

最好使用既[指定](http://es5.github.com/#x15.9.2)又已知可在任何地方工作的东西，例如：

```
var START_DATE = new Date(2012,0,1,12); 
```

这将在所有浏览器的本地时区中创建一个新的日期 2012-01-01 12:00:00，或者如果需要[UTC](http://es5.github.com/#x15.9.4.3)，则：

```
var START_DATE = new Date(Date.UTC(2012,0,1,12)); 
```

# c# - 1分钟倒计时

> ID：11199652
> 
> 赞同：3
> 
> 时间：2012-06-26T01:27:15.323
> 
> 标签：c#, visual-studio-2010, windows-phone-7

我正在尝试从 1 分钟开始做一个简单的倒数计时器，它显示在按钮文本中。当按下按钮时，我只想让它倒计时到 0，显示“时间”。我一直在阅读我能找到的所有帖子，试图弄清楚如何做到这一点，但不能。有人可以告诉我我做错了什么。

这是在 Visual c# windows phone 应用程序中。我希望我的帖子正确显示，这是我第一次在这个网站上提问，我是新手。提前感谢您的任何建议。

```
void bTime_Click(object sender, RoutedEventArgs e)
    {
        DispatcherTimer timer1 = new DispatcherTimer();
        timer1.Interval = TimeSpan.FromSeconds(60);
        timer1.Tick += new EventHandler(timer_Tick);
        timer1.Start();
    }

    int tik = 60;
    void timer_Tick(object sender, EventArgs e)
    {
        bTime.Content = timer.ToString();
        if (tik > 0)
            Countdown.Text = (timer--).ToString();
        else
            Countdown.Text = "Times Up";
        throw new NotImplementedException();
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T01:39:02.350

首先，摆脱`throw new NotImplementedException`. 其次，您需要减少tik。所以是这样的：

```
 DispatcherTimer timer1 = new DispatcherTimer();
    private void button1_Click(object sender, RoutedEventArgs e)
    {
        timer1.Interval = new TimeSpan(0, 0, 0, 1);
        timer1.Tick += new EventHandler(timer1_Tick);
        timer1.Start();
    }

    int tik = 60;
    void timer1_Tick(object sender, EventArgs e)
    {
        Countdown.Text = tik + " Seconds Remaining";
        if (tik > 0)
            tik--;
        else
            Countdown.Text = "Times Up";
    } 
```

我已经改变了间隔，我每秒都在减少 tik。很好很简单。希望能帮助到你。如果你不明白，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T01:36:53.087

你的代码有什么问题？对我来说，它看起来像这些部分：

```
bTime.Content = timer.ToString(); 
```

和

```
bTime.Content = timer.ToString(); 
```

首先，我什至不知道可变定时器是什么。它应该是timer1吗？

tik 永远不会被减去，并且永远保持在 60。

你为什么不把你的代码改成这样：

```
DispatcherTimer timer1 = new DispatcherTimer();
void bTime_Click(object sender, RoutedEventArgs e)
{
    timer1.Interval = TimeSpan.FromSeconds(60);
    timer1.Tick += new EventHandler(timer_Tick);
    timer1.Start();
}

int tik = 60;
void timer_Tick(object sender, EventArgs e)
{
    bTime.Content = tik.ToString();
    if (tik > 0)
        Countdown.Text = (tik--).ToString();
    else
    {
        Countdown.Text = "Times Up";
        timer1.Stop();
    }
    throw new NotImplementedException();
} 
```

# javascript - JSON 数据的 JavaScript SUM 和 GROUP BY

> ID：11199653
> 
> 赞同：26
> 
> 时间：2012-06-26T01:27:43.703
> 
> 标签：javascript, json, group-by, sum

这是我第一次尝试使用一些 JSON 数据对象执行 JavaScript，并且需要一些关于实现目标的正确方法的建议。

一些服务器端代码实际上会生成一个 JSON 格式的字符串，我必须使用它并将其分配给一个字符串：

```
var dataString='$DATASTRING$'; 
```

但是在服务器替换其数据后我必须使用的最终结果（当然没有 \r\n）：

```
var dataString='[ 
 { "category" : "Search Engines", "hits" : 5, "bytes" : 50189 },
 { "category" : "Content Server", "hits" : 1, "bytes" : 17308 },
 { "category" : "Content Server", "hits" : 1, "bytes" : 47412 },
 { "category" : "Search Engines", "hits" : 1, "bytes" : 7601 },
 { "category" : "Business", "hits" : 1, "bytes" : 2847 },
 { "category" : "Content Server", "hits" : 1, "bytes" : 24210 },
 { "category" : "Internet Services", "hits" : 1, "bytes" : 3690 },
 { "category" : "Search Engines", "hits" : 6, "bytes" : 613036 },
 { "category" : "Search Engines", "hits" : 1, "bytes" : 2858 } 
]'; 
```

然后我可以将其更改为要使用的对象。

```
var dataObject=eval("("+dataString+")"); 
```

这允许我访问数据的单个数据行，但我需要对这些值进行求和、分组和排序。

我需要相当于这样的 SQL 语句：

```
SELECT category, sum(hits), sum(bytes) 
FROM dataObject
GROUP BY category
ORDER BY sum(bytes) DESC 
```

我想要的输出将是这样的对象，我可以进一步处理：

```
var aggregatedObject='[ 
 { "category" : "Search Engines", "hits" : 13, "bytes" : 673684 },
 { "category" : "Content Server", "hits" : 3, "bytes" : 88930 },
 { "category" : "Internet Services", "hits" : 1, "bytes" : 3690 },
 { "category" : "Business", "hits" : 1, "bytes" : 2847 } 
]'; 
```

...但我不知道从哪里开始。

我可以遍历所有类别值并首先找到唯一的类别，然后再次循环并对命中和字节求和，然后再次进行排序，但似乎必须有一种更简单的方法。

prototype.js (1.7) 已经包含在客户端页面中，但如果需要，我可以添加 Underscore、jQuery 或其他一些小型库。

我只是不知道用最少的代码来处理查询什么是最好的、最简单的、最小的。

有什么建议么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-26T02:05:04.043

您可以使用本机函数`.reduce()`来聚合数据，然后`.sort()`按`bytes`.

```
var result = dataObject.reduce(function(res, obj) {
    if (!(obj.category in res))
        res.__array.push(res[obj.category] = obj);
    else {
        res[obj.category].hits += obj.hits;
        res[obj.category].bytes += obj.bytes;
    }
    return res;
}, {__array:[]}).__array
                .sort(function(a,b) { return b.bytes - a.bytes; }); 
```

如果您支持较旧的实现，则需要[为`.reduce()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/reduce#Compatibility).

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-13T05:55:05.117

如果你走[LINQ.js](http://linqjs.codeplex.com/)路线，你可以这样做：

```
var aggregatedObject = Enumerable.From(dataArray)
        .GroupBy("$.category", null,
                 function (key, g) {
                     return {
                       category: key,
                       hits: g.Sum("$.hits"),
                       bytes: g.Sum("$.bytes")
                     }
        })
        .ToArray(); 
```

### 使用 Stack Snippets 进行工作演示：

```
var dataArray = [ 
  { category: "Search Engines", hits: 5, bytes: 50189 },
  { category: "Content Server", hits: 1, bytes: 17308 },
  { category: "Content Server", hits: 1, bytes: 47412 },
  { category: "Search Engines", hits: 1, bytes: 7601  },
  { category: "Business",       hits: 1, bytes: 2847  },
  { category: "Content Server", hits: 1, bytes: 24210 },
  { category: "Internet ",      hits: 1, bytes: 3690  },
  { category: "Search Engines", hits: 6, bytes: 613036 },
  { category: "Search Engines", hits: 1, bytes: 2858  } 
];

var aggregatedObject = Enumerable.From(dataArray)
        .GroupBy("$.category", null,
                 function (key, g) {
                     return {
                       category: key,
                       hits: g.Sum("$.hits"),
                       bytes: g.Sum("$.bytes")
                     }
        })
        .ToArray();

console.log(aggregatedObject);
```

```
<script src="//cdnjs.cloudflare.com/ajax/libs/linq.js/2.2.0.2/linq.min.js"></script>
```

此外，您可以[通过 sum 找到有关 linqjs 组的更多信息](https://stackoverflow.com/q/17824008/1366033)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T02:00:25.773

鉴于上面的 dataString，下面的代码似乎可以工作。它穿过每个对象；如果该类别存在于`groupedObjects`数组中，则将其命中数和字节数添加到现有对象中。否则，它被认为是新的并添加到 groupedObjects 数组中。

此解决方案使用 underscore.js 和 jQuery

这是一个 jsfiddle 演示：http: [//jsfiddle.net/R3p4c/2/](http://jsfiddle.net/R3p4c/2/)

```
var objects = $.parseJSON(dataString);
var categories = new Array();
var groupedObjects = new Array();
var i = 0;

_.each(objects,function(obj){
    var existingObj;
    if($.inArray(obj.category,categories) >= 0) {
        existingObj = _.find(objects,function(o){return o.category === obj.category; });
        existingObj.hits += obj.hits;
        existingObj.bytes += obj.bytes;
    } else {
        groupedObjects[i] = obj;
        categories[i] = obj.category;
        i++;
  }
});

groupedObjects = _.sortBy(groupedObjects,function(obj){ return obj.bytes; }).reverse(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-09T21:26:55.433

```
var obj = [{Poz:'F1',Cap:10},{Poz:'F1',Cap:5},{Poz:'F1',Cap:5},{Poz:'F2',Cap:20},{Poz:'F1',Cap:5},{Poz:'F1',Cap:15},{Poz:'F2',Cap:5},{Poz:'F3',Cap:5},{Poz:'F4',Cap:5},{Poz:'F1',Cap:5}];
Array.prototype.sumUnic = function(name, sumName){
    var returnArr = [];
    var obj = this;
    for(var x = 0; x<obj.length; x++){
        if((function(source){
            if(returnArr.length == 0){
                return true;
            }else{
                for(var y = 0; y<returnArr.length; y++){
                    var isThere = [];
                    if(returnArr[y][name] == source[name]){
                        returnArr[y][sumName] = parseInt(returnArr[y][sumName]) + parseInt(source[sumName]);
                        return false;
                    }else{
                        isThere.push(source);
                    }
                }
                if(isThere.length>0)returnArr.push(source);
                return false;
            }
        })(obj[x])){
            returnArr.push(obj[x]);
        }
    }
    return returnArr;
}
obj.sumUnic('Poz','Cap');
// return "[{"Poz":"F1","Cap":45},{"Poz":"F2","Cap":25},{"Poz":"F3","Cap":5},{"Poz":"F4","Cap":5}]" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-07T10:56:10.747

嗨，这是我写的一个解决方案访问：[npm](https://www.npmjs.com/package/aggregate_groupby_js) 上的 aggregate_groupby_js 或[github上的 aggregate_groupby_js](http://github:%20https://github.com/naimsulejmani/aggregate.js)

用于在对象数组上使用聚合函数的 javascript 库。整个 javascript 对象的基本函数，如 SUM、MIN、MAX、AVG、DISTINCT_COUNT

例子：

```
var arr = [{`"shape"`:`"square"`,`"color"`:`"red"`,`"used"`:1,`"instances"`:1},
    {`"shape"`:`"square"`,`"color"`:`"red"`,`"used"`:2,`"instances"`:1},
    {`"shape"`:`"circle"`,`"color"`:`"blue"`,`"used"`:0,`"instances"`:0},
    {`"shape"`:`"square"`,`"color"`:`"blue"`,`"used"`:4,`"instances"`:4},
    {`"shape"`:`"circle"`,`"color"`:`"red"`,"`used"`:1,`"instances"`:1},
    {`"shape"`:`"circle"`,`"color"`:`"red"`,`"used"`:1,`"instances"`:0},
    {`"shape"`:`"square"`,`"color"`:`"blue"`,`"used"`:4,`"instances"`:5}, 
    {`"shape"`:`"square"`,`"color"`:`"red"`,`"used"`:2,`"instances"`:1}];

// Specify columns
    var columns =[`"used"`, `"instances"`];

// Initialize object
    var gb = new GroupBy(arr,columns);
// or
    var gb = new GroupBy(arr,[`"used"`, `"instances"`]);

// Call the aggregate functions    
    gb.sum();
    gb.min();
    gb.max();
    gb.avg();
    gb.distinctCount(); 
```

# facebook - 如何使用 Graph API 从 facebook 新闻提要中仅获取图片？

> ID：11199655
> 
> 赞同：3
> 
> 时间：2012-06-26T01:27:58.770
> 
> 标签：facebook, facebook-graph-api

我正在查看 Facebook Graph API 并试图挑选出用户在他们的新闻提要中拥有的任何图片。

我发现如果我使用 API /me/feed 我可以访问整个提要。返回的数据数组中的每个条目都有一个名为“type”的字段，它描述了它是什么类型的对象。例如，我看到了以下内容：

```
"type": "status"
"type": "photo"
"type": "video"
etc... 
```

显然我不想要状态、视频或其他类型，并且想在服务器上过滤掉这些结果，但还没有弄清楚如何。我希望它会像添加类似 ?type=photo 的查询字符串一样简单，但事实并非如此。

有什么方法可以在服务器端过滤提要，这样我就不需要为几张图片获取大量数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T02:21:52.727

使用 FQL 比使用 Graph API 更容易：

```
SELECT post_id, actor_id, message, attachment, place, created_time, likes, description
  FROM stream WHERE source_id = me() AND actor_id = me() 
   AND attachment.fb_object_type = 'photo' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-15T09:53:56.830

Facebook 已向`/me/home`端点添加了一个过滤器参数，因此如果您查询`/me/home?filter=photos`，您只会从用户那里获得照片`News Feed`

# android - Android启动时自动运行代码？

> ID：11199656
> 
> 赞同：0
> 
> 时间：2012-06-26T01:28:07.593
> 
> 标签：android, linux, android-emulator

我希望我的代码在 android 启动时自动运行。而且，我知道 init.rc srcipt 将在 android 启动时运行。所以，我决定将我的代码信息作为服务项添加到 init.rc .但不幸的是，它失败了。以下是我使用的步骤： 1\. 我通过 ndk 的交叉编译器构建 server.c：server.c：

```
#include <stdio.h>
#include <sys/un.h>
#include <unistd.h>
#include <stdlib.h>
    void sys_log(char* msg) {

        FILE *fp;
        time_t t;

        if((fp=fopen("/data/server.log","a")) >=0)
        {
            t=time(0);
            fprintf(fp,"%s at time: %s\n", msg, asctime(localtime(&t)) );

        }
        fclose(fp);
    }

    int main() {
        printf("server begin!");
        sys_log("server begin!");
    ) 
```

1.  我将以下行添加到 /init.rc 的末尾：

    服务 socketserver /data/server oneshot

2.  我重新启动android设备

3.  我使用指令`cat /data/server.log`查看日志，但server.log中没有任何内容！

4.  我直接运行服务器。一切运行正常。日志和控制台都会提示我想要什么！

所以总而言之，我认为 init.rc 不会启动我构建的服务器。我的步骤正确吗？有任何想法吗？提前谢谢你的帮助！

# wcf - WCF RIA 服务 4004 错误

> ID：11199657
> 
> 赞同：1
> 
> 时间：2012-06-26T01:28:23.693
> 
> 标签：wcf, iis, wcf-ria-services

在 IIS Express 中一切正常，但是当我调试到本地 IIS 时，尝试在应用程序中使用 WCF（如下所列）时出现错误，浏览器显示，但 VS 没有。

```
[Window Title]
Visual Studio Just-In-Time Debugger

[Main Instruction]
An unhandled exception ('Unhandled Error in Silverlight Application 
Code: 4004    
Category: ManagedRuntimeError       
Message: System.ServiceModel.DomainServices.Client.DomainOperationException: Invoke operation 'Login' failed. The remote server returned an error: NotFound. ---> System.ServiceModel.CommunicationException: The remote server returned an error: NotFound. ---> System.Net.WebException: The remote server returned an error: NotFound. ---> System.Net.WebException: The remote server returned an error: NotFound.
   at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)
   at System.Net.Browser.BrowserHttpWebRequest.<>c__DisplayClassa.<EndGetResponse>b__9(Object sendState)
   at System.Net.Browser.AsyncHelper.<>c__DisplayClass4.<BeginOnUI>b__0(Object sendState)
   --- End of inner exception stack trace ---
   at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)
   at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)
   --- End of inner exception stack trace ---
   at System.ServiceModel.DomainServices.Client.WebDomainClient`1.EndInvokeCore(IAsyncResult asyncResult)
   at System.ServiceModel.DomainServices.Client.DomainClient.EndInvoke(IAsyncResult asyncResult)
   at System.ServiceModel.DomainServices.Client.DomainContext.CompleteInvoke(IAsyncResult asyncResult)
   --- End of inner exception stack trace ---
   at System.ServiceModel.DomainServices.Client.OperationBase.Complete(Exception error)
   at System.ServiceModel.DomainServices.Client.InvokeOperation.Complete(Exception error)
   at System.ServiceModel.DomainServices.Client.DomainContext.CompleteInvoke(IAsyncResult asyncResult)
   at System.ServiceModel.DomainServices.Client.DomainContext.<>c__DisplayClass30`1.<InvokeOperation>b__2c(Object )     
') occurred in iexplore.exe [856].

The Just-In-Time debugger was launched without necessary security permissions. To debug this process, the Just-In-Time debugger must be run as an Administrator. Would you like to debug this process?

[V] View process details  [Yes, debug iexplore.exe] [No, cancel debugging]

[Expanded Information]
Process Name: C:\Program Files (x86)\Internet Explorer\iexplore.exe
User Name: Armanx64PC\Armanx64 [Elevated] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T01:38:13.243

我有解决办法。我的头，它的工作方式很奇怪......

因此，您需要转到控制面板 - 程序和功能 - 打开或关闭功能，并且您必须在此处启用*所有*WCF 服务树（如果您不及早检查，也请检查 ASP.NET）。

# objective-c - MapView 注释：查找坐标

> ID：11199664
> 
> 赞同：0
> 
> 时间：2012-06-26T01:29:44.207
> 
> 标签：objective-c, xcode

我有很多 MKMapViews，每个都有一个注释。我正在尝试以这种方式检索每个坐标：

```
for (MKMapView *map in MapViewArray)
{
    // add textfield contents to array

    NSString *latitude = [NSString stringWithFormat:@"%@", map.annotations];

    [latitudes addObject: latitude];
} 
```

我正在寻找正确的代码而不是这个：

```
map.annotations 
```

我想在这里找到纬度..

我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T01:40:11.457

每个地图注释都是一个对象，因此您必须改为从注释中获取坐标值。注释存储在`map.annotations`一个数组中。如果每张地图只有一个注释，则可以使用：

```
CLLocationCoordinate2D coordinate = [[map.annotations lastObject] coordinate];
NSString *latitude = [NSString stringWithFormat:@"%.2f", coordinate.latitude]; 
```

如果您有多个注释，您显然必须单独遍历每个注释，然后获取位置数据。

# c++ - 从 Windows 可执行版本中隐藏或删除不需要的字符串

> ID：11199665
> 
> 赞同：2
> 
> 时间：2012-06-26T01:29:50.090
> 
> 标签：c++, string, reference, executable

我有这个习惯，总是编译一个 C++ 项目并建立发布。我总是用十六进制编辑器（通常是 HxD）打开 .EXE 并查看二进制信息。

我最讨厌并试图找到解决方案的是，在字符串表的某个地方，提供了相关的（至少从我的角度来看）信息。也许对其他人来说，这听起来像是对精神分裂症的痴迷，但我只是不喜欢我的可执行文件包含例如应用程序中使用的所有 Windows 函数的名称。

我尝试了许多编译器，看看它们中哪个发布的信息最少。例如，GCC 将所有这些都留在其生成的所有最终 exe 中

```
libgcj_s.dll._Jv_RegisterClasses....\Data.ald.rb.Error.Data file is corrupt!
....Data for the application not found!.€.@.ř.@.0.@.€.@.°.@.p.@.p.@.p.@.p.@.
¸.@.$.@.€.@°.@.std::bad_alloc..__gnu_cxx::__concurrence_lock_error.__gnu_cxx
::__concurrence_unlock_error...std::exception.std::bad_exception...pure virt
ual method called..../../runtime/pseudo-reloc.c....VirtualQuery (addr, &b, s
ize of(b))............................/../../../gcc-4.4.1/libgcc/../gcc/conf    
ig/i386/cygming-shared-data.c...0 && "Couldn't retrieve name of GCClib share
d data atom"....ret->size == sizeof(__cygming_shared) && "GCClib shared data
 size mismatch".0 && "Couldn't add GCClib shared data atom".....-GCCLIBCYGMI
NG-EH-TDM1-SJLJ-GTHR-MINGW32........ 
```

在这里，您可以看到我使用的编译器以及版本。现在，您可以在下面几行看到我使用的每个 Windows 函数的列表，例如 CreateMainWindow、GetCurrentThreadId 等。

我想知道是否有办法不显示这个，或者加密，混淆它。

使用 Visual C++ 时，不会发布此信息。相反，它不像 GCC 那样跨平台，即使在像 7 和 XP 这样的两个 Windows 系统之间，也不需要 C++ 运行时、框架或任何用 VC++ 编译的程序。此外，VC++ 可执行文件还包含应用程序中使用的 Windows 函数的那些过程入口点。

我知道即使是 NASM，例如，也会保存被调用的 Windows 函数的名称，所以看起来这是一个 Windows 问题。但也许它们可以被加密，或者有一些技巧可以不显示它们。

我将查看 GCC 源代码，以查看指定要保存在可执行文件中的那些字符串在哪里——也许可以跳过该指令或其他什么。

好吧，这是我最后的妄想症之一，也许可以通过某种方式加以治疗。感谢您的意见和回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T01:57:49.690

如果您使用 GCC 进行编译，`-nostdlib`那么 GCC 的东西应该会消失，但您也会失去一些 C++ 支持和 std::*。

在 Windows 上，您可以创建一个仅链接到的应用程序，`LoadLibrary`并且`GetProcAddress`在运行时它可以获得您需要的其余函数（函数的名称可以以加密形式存储，您可以在将字符串传递给 GetProcAddress 之前解密字符串）这样做工作量很大，而且 Windows 加载程序在这方面可能比你的代码要快，所以对我来说，混淆你正在调用简单函数（如`GetLastError`and ）这一事实似乎毫无意义`CreateWindow`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T01:58:39.287

Windows API 函数从 dll 加载，例如 kernel32.dll。为了获取加载的 API 函数的内存地址，从 dll 中搜索导出的函数名称表。因此这些名字的存在。

您可以手动加载您使用 LoadLibrary 引用的任何 Windows API 函数。您可以使用 GetProcAddress 查找函数的地址，以及以某种模糊形式存储的函数名称。或者，您可以使用每个函数的“序数”——一个标识 dll 中每个函数的数值）。这样，您可以创建一组用于调用 API 函数的函数指针。

但是，要真正使其干净，您可能必须关闭默认库的链接并替换编译器隐式使用的 C 运行时库的组件。不过，这样做很麻烦。

# java - 刚开始。只需要在屏幕上打印一些计算出来的数字

> ID：11199668
> 
> 赞同：0
> 
> 时间：2012-06-26T01:30:04.273
> 
> 标签：java, android, eclipse

美好的一天。老 C 程序员，Java 和 Android 的新手。对不起。试。我有 AIDE 和 Eclipse 以及我正在学习的一堆教程。所有这些似乎都超越了我需要使用和理解的一些基本工具。具体来说：我只是想让应用程序对用户的输入进行一些计算，然后显示数字。在较早的时候，我会使用类似的东西：

System.out.println("|" + y + "| 是 " + Math.abs(y));

我发现了如何使用： ... TextView tv = new TextView(this); tv.setText("你好，安卓"); 设置内容视图（电视）；...但这不允许数字。

此外，我还没有找到如何使用 XML 部分来允许动态文本或数字。例如，每个示例都预先编码了一个要显示的固定文本/字符串，但我需要在代码中创建文本/字符串然后显示它。一个代码示例会很棒，或者只是一个指向文档的指针。我真的不想占用你太多时间。提前致谢。铝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:35:01.400

我不确定您的意思是“*不允许数字*”。不，您不能直接将 an 传递`int`给它，但您可以这样做：

```
TextView tv = new TextView(this);
String text = "|" + y + "| is " + Math.abs(y);
tv.setText(text);
setContentView(tv); 
```

此外，假设您`TextView`的`main.xml`文件中有一个，例如：

```
<TextView
    android:layout_width="200px"
    android:layout_height="100px" /> 
```

然后，如果你添加`android:id="@+id/some_new_id"`到它的参数，你可以`TextView`通过代码引用它。

```
TextView tv = (TextView) findViewById(R.id.some_new_id); 
```

从那里，您可以对其执行任何您想要的操作，这些操作会从 UI 线程实时更新。

Android 文档很棒，您可以阅读有关[声明布局](http://developer.android.com/guide/topics/ui/declaring-layout.html)的内容，其中还包括通过代码编辑这些内容。（由于重新设计，该文档上有几个断开的链接，但大多数都在工作，谷歌应该提供你需要的其余部分！）

Android 开发者之路非常棒，希望您喜欢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T01:48:32.230

添加到 Soxxeh 的答案中，如果您想接受用户输入并在其上执行数学方程式，您将需要一个 EditText 字段：

```
<EditText android:id="@+id/edit_number"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"  /> 
```

您可以通过执行以下操作在代码中使用它：

```
EditText number= (EditText)findViewById(R.id.edit_number);
String stringmunber= number.getText().toString();       
float floatnumber= Float.parseFloat(stringnumber); 
```

下一个预制数学：

```
float answer= number * number2; //number 2 is another edittext field 
```

现在输出它：

```
TextView tv = (TextView) findViewById(R.id.some_new_id);
tv.setText(Float.toString(answer)); 
```

希望这可以帮助！

# java - 如何在另一个程序中访问已经构建的链表？

> ID：11199670
> 
> 赞同：2
> 
> 时间：2012-06-26T01:30:30.497
> 
> 标签：java, c, data-structures, linked-list

假设我在一个程序中构建了一个链表，然后在另一个程序中我必须访问它。我怎样才能做到这一点？

我试图在一个程序中使用 Java 中的全局链表数据结构，但我似乎无法在另一个程序中访问它。我猜想在下一个程序中无法获得对链表的引用。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:40:29.297

您基本上不能只是在一个程序中构建一个链表并将其完全传递给另一个程序，主要是因为两个程序的堆内存将不同。

![在此处输入图像描述](../Images/cf1a042f572f0e949a7ad25f60605883.png) [进程地址空间](https://i.stack.imgur.com/GxTnR.png)

所以基本上你必须使用某种通信机制来实现这一点。

1\. 首先，您可以在一个程序中构建链接列表，并使用 RPC 调用一次只发送一个节点到其他程序

2 或使用链接列表所在的共享内存。通过使用某种机制（例如`placement new`.

当您在 JVM 中运行时。您正在跨 Java 进程共享 Java 堆，我认为您可以使用基于 RMI 的机制来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:01:44.533

如果您只需要在 Java 程序中生成链表，然后将其传递给另一个程序，您可以通过将链表放入外部形式来实现。这可以是 Java 序列化对象（其他程序必须解释），也可以是 XML、JSON、您自己设计的自制格式或任何数量的其他格式。然后可以通过进程间通信（@yair 在他的评论中提供的链接中描述的文件、套接字或其他机制）将其传递给其他程序。

如果您需要 Java 程序和其他程序之间的某种双向交互，那么某种[远程过程调用](http://en.wikipedia.org/wiki/Remote_procedure_call)可能是最简单的 ipc 机制。

# selenium - 如何在 TestNG 中运行并行测试套件

> ID：11199677
> 
> 赞同：1
> 
> 时间：2012-06-26T01:31:44.870
> 
> 标签：selenium, testng

我正在尝试使用以下命令运行并行测试套件。

```
java -cp testng-6.3.1.jar;test.jar;selenium-server-standalone-2.18.0.jar org.testng.TestNG -suitethreadpoolsize 2 testng-vm1.xml testng-vm2.xml 
```

当我执行上述命令时，仅最后一个 testng xml 文件（即 testng-vm2.xml）正在运行。但我想并行运行两个 xml 文件。

据我所知，上述命令来自[http://testng.org/doc/documentation-main.html#parallel-tests](http://testng.org/doc/documentation-main.html#parallel-tests)

请让我知道是否可以通过 TestNG 运行并行套件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T01:46:17.247

我认为通过创建 Maven 项目并将其配置为并行运行测试是一个更好的解决方案。

更多细节：从 Maven 开始 [http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)

TestNG（及其并行配置） [http://maven.apache.org/plugins/maven-surefire-plugin/examples/testng.html](http://maven.apache.org/plugins/maven-surefire-plugin/examples/testng.html)

# jquery - AJAX 适用于 Firefox，但不适用于 Chrome

> ID：11199685
> 
> 赞同：1
> 
> 时间：2012-06-26T01:33:18.153
> 
> 标签：jquery

好的，我有这个 HTML 代码：

```
<head>
    <script type="text/javascript" src="js/jquery.1.3.2.min.js" ></script>
    <script type="text/javascript" src="js/jquery-ui.min.js" ></script>
    <script type="text/javascript" src="js/funciones.js" ></script>
</head>

<body> 

    <div>
    <a><div id= "0" class="Button" href="./es/uno.xml">uno</div></a>
    <a ><div id= "1" class="Button" href="./es/dos.xml">dos</div></a>
    <a ><div id= "2" class="Button" href="./es/tres.xml">tres</div></a>
    </div>

    <br/>
    <br/>
    <br/>

    <div id="content" class="content">

    </div>

</body>
</html> 
```

这个javascript代码：

```
 $(document).ready(function() {
        $('.Button').click(function() {
        var href = $(this).attr('href');

        if( typeof href != "undefined" && href != ""){
            $.ajax({
                url: href,
                dataType: 'text',
                success: function(data) {
                            //alert($(data).contents().contents().text());
                            $('#content').html(data);
                            ultXML = href;
                        }
            });
        }
    });
}); 
```

上面的代码让我在 div 内容中加载了 3 个完全没有标签的不同 xml 文件。它在 Firefox 上运行良好，但在 Chrome 上不起作用（无论是 Wind 还是 Ubuntu Chromium）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T02:12:08.773

将 if 条件更改为`if(href) { ...`. 您正在检查该值是 undefined 还是空字符串，如果您这样做，两者都将评估为 false `if(href) { ...`。

我现在在 Windows 中使用 chrome，并且您的代码似乎可以工作（当然它会抛出 404 错误，因为我没有文件）。

如果这不能解决您的问题，请尝试打开 Chrome 开发人员工具并检查是否在“网络”中看到了 ajax 请求。

更新：在 ajax 成功时添加了带有空白警报的[jsfiddle](http://jsfiddle.net/YuFyd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:25:04.610

我终于发现了什么是愚蠢的新手错误！代码没有错，运行良好。问题是当我在本地测试它时：

file:///home/.../index.html（导航浏览器栏）

FF 可以找到 ./es/uno.xml 的路径，但是（我不知道为什么）Chrome 不能。所以它什么都没有替换 DIV 内容。

如果我将文件放在服务器中以通过以下方式访问它，则可以正常工作：

[http://example.com](http://example.com)

谢谢大家！

# email - 使用 Access 2007 中的电子邮件地址在 Outlook 中发送电子邮件

> ID：11199697
> 
> 赞同：0
> 
> 时间：2012-06-26T01:35:28.370
> 
> 标签：email, ms-access, outlook, ms-access-2007, outlook-2007

我有一个名为 DepartmentEmailList 的查询，其中包含该部门所有教职员工和学生的姓名和电子邮件地址。第一列 MailingName 包含每个人的名字和姓氏。第二列“电子邮件”包含他们的电子邮件地址。

我想通过 Outlook 2007 向每个人发送电子邮件。理想情况下，我会在 Access 中的表单上有一个按钮，用于打开 Outlook 并插入电子邮件地址。我在网上做了一些研究，找不到任何似乎适用于这种情况的东西。我不想从 Access 中附加报表、表格或查询；我只想向我查询的每个人发送一封电子邮件。

除了手动将电子邮件列复制/粘贴到 Outlook 中之外，是否有人对此有解决方案？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:18:54.673

[DoCmd.SendObject](http://msdn.microsoft.com/en-us/library/ff197046.aspx)接受参数[acSendNoObject](http://msdn.microsoft.com/en-us/library/ff192479.aspx)，此外，参考页面包括通过 Outlook 发送电子邮件的示例编码，可以轻松修改。您可以遍历您的记录集并向每个地址发送一封电子邮件。

句法：

```
DoCmd.SendObject ObjectType, ObjectName, OutputFormat, To, _
   Cc, Bcc, Subject, MessageText, EditMessage, TemplateFile 
```

您通常也可以使用 FollowHyperLink 使电子邮件可点击：

```
FollowHyperlink "mailto:example@example.com" 
```

# google-apps-script - 部署到 Web 应用程序时，Google 应用程序脚本不再具有“允许任何人访问”选项

> ID：11199701
> 
> 赞同：5
> 
> 时间：2012-06-26T01:36:01.883
> 
> 标签：google-apps-script

我有几个谷歌应用程序脚本可以读取和写入谷歌电子表格

我曾经将脚本部署为服务以允许任何人访问，我允许“以我身份调用”

最近，我注意到界面已更改为“部署为 Web 应用程序”

但是，现在没有“允许任何人访问”的选项。只有 2 个选项可以运行脚本“只有我”或“只有域中的任何人”

Google 是否已将政策更改为不允许任何人访问脚本？

还是我做错了什么？请指教

我真的需要脚本公开运行

紧迫的。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:28:55.973

有可能的。这是我所做的：

1.  转到您的 Google Apps 帐户的控制面板（[此处的说明](http://support.google.com/a/bin/answer.py?hl=en&hlrm=en&answer=182076)）
2.  选择设置选项卡
3.  在左侧的服务下，选择云端硬盘和文档
4.  在共享选项中，选择“用户可以在此组织之外共享文档”（我将“警告用户...”复选框留空）
5.  同样在共享选项中，我在文档可见性下选择了“私人”，但我不确定这是必要的。你可以试试有/没有。

返回到在您的脚本项目中部署为 webapp，您现在应该会看到“允许任何人访问”——至少我在我的项目中是这样！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:31:03.703

文档在这个问题上似乎很清楚，你没有做错任何事：

*编写脚本后，将其作为服务发布。在发布过程中，您可以定义谁有权访问脚本。在 Google Apps 域中，您可以发布脚本，以便**只有您可以访问**，或者**域中的每个人都可以访问。** 在 Google 消费者帐户中，您可以发布脚本，以便只有您可以访问，或者世界上的每个人都可以访问。*

如果您需要您的 google 应用程序域之外的任何人访问您的电子表格数据，您可以将脚本安装在消费者帐户（对域电子表格具有共享权限）并从那里发布。

# vb.net - Telerik 邮件合并 - 友好名称（使用 RadRichTextBox）

> ID：11199702
> 
> 赞同：1
> 
> 时间：2012-06-26T01:36:03.167
> 
> 标签：vb.net, telerik, mailmerge

我想我遗漏了一些明显的东西......我正在为 WPF 使用 Telerik Rad 控件，但我认为富文本框对邮件合并功能使用了一些类似的实现。

我想在我的邮件合并字段上有一些友好的名字。（即字段名称中的空格）所以我有一个类例如

```
Public Class someclass
{
<DisplayName("This is the complex description of the field")>
Public property thisfieldnamehasacomplexdescription as string

Public property anothercomplexfield as string
} 
```

这是我知道在邮件合并下拉列表中获取“友好”名称的唯一方法。所以这两个字段可以正常显示为：“这是该字段的复杂描述”“另一个复杂字段”

但是当您进行合并时，实际上只有另一个复杂字段会填充数据。

我是否必须对包含邮件合并字段的 raddropdownbutton 进行模板化？在某处有这样的例子吗？

也是一个子问题。我如何在这些东西上添加滚动条？

（我也知道这个板不是 TELERIK 特定的板（呃！）但这可能对将来的某人有用。所以我将从 Telerik 得到的答案复制到这里！ [http://www.telerik.com /community/forums/wpf/richtextbox/558428-radrichtextbox-mailmerge---using-displayname-to-create-a-friendly-name-with-spaces.aspx](http://www.telerik.com/community/forums/wpf/richtextbox/558428-radrichtextbox-mailmerge---using-displayname-to-create-a-friendly-name-with-spaces.aspx) )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T02:49:57.673

这是telerik给我的：

使用默认的 MergeFields，无法更改字段的显示名称片段以获得更友好的外观。如果您通过从 MergeField 类派生来实现自定义 MergeField，这应该是可能的。这是一个示例实现，展示了如何做到这一点：

```
public class CustomMergeField : MergeField
{
private const string CustomFieldName = "CustomField";

static CustomMergeField()
{
    CodeBasedFieldFactory.RegisterFieldType(CustomMergeField.CustomFieldName, () => { return new CustomMergeField(); });
}

public override string FieldTypeName
{
    get
    {
        return CustomMergeField.CustomFieldName;
    }
}

public override Field CreateInstance()
{
    return new CustomMergeField();
}

protected override DocumentFragment GetDisplayNameFragment()
{
    return base.CreateFragmentFromText(string.Format(Field.DisplayNameFragmentFormat, this.GetFriendlyFieldName(this.PropertyPath)));
}

private string GetFriendlyFieldName(string fieldName)
{
    int lettersInEnglishAlphabet = 26;
    List<char> separators = new List<char>(lettersInEnglishAlphabet);
    for (int i = 0; i < lettersInEnglishAlphabet; i++)
    {
        separators.Add((char)('A' + i));
    }
    StringBuilder newFieldName = new StringBuilder();
    int previousIndex = 0;
    for (int i = 1; i < fieldName.Length; i++)
    {
        if (separators.Contains(fieldName[i]))
        {
            if (previousIndex > 0)
            {
                newFieldName.Append(" ");
            }
            newFieldName.Append(fieldName.Substring(previousIndex, i - previousIndex));
            previousIndex = i;
        }
    }
    newFieldName.Append(" " + fieldName.Substring(previousIndex));
    return newFieldName.ToString();
}
} 
```

请注意，当 DisplayMode 为 Code 时显示的片段无法更改。

至于您的其他问题，您可以更改下拉按钮的内容以显示字段的友好名称并以下列方式包含滚动条： 1\. 首先，从 XAML 中删除按钮与 InsertMergeFieldEmptyCommand 的绑定并给出它是一个名称（例如 insertMergeField）。2\. 接下来，在代码隐藏中添加以下代码：

```
AddMergeFieldsInDropDownContent(this.insertMergeFieldButton);

private void AddMergeFieldsInDropDownContent(RadRibbonDropDownButton radRibbonDropDownButton) 
```

{ 网格网格 = 新网格（）；grid.RowDefinitions.Add(new RowDefinition() { Height = new GridLength(100, GridUnitType.Pixel) });

```
ScrollViewer scrollViewer = new ScrollViewer();
scrollViewer.VerticalScrollBarVisibility = ScrollBarVisibility.Auto;
StackPanel stackPanel = new StackPanel();

foreach (string fieldName in this.editor.Document.MailMergeDataSource.GetColumnNames())
{
    RadRibbonButton fieldButton = new RadRibbonButton()
    {
        Text = this.GetFriendlyFieldName(fieldName),
        Size = ButtonSize.Medium,
        HorizontalAlignment = HorizontalAlignment.Stretch,
        HorizontalContentAlignment = HorizontalAlignment.Left
    };

    fieldButton.Command = this.editor.Commands.InsertFieldCommand;
    fieldButton.CommandParameter = new MergeField() { PropertyPath = fieldName };
    //or
    //fieldButton.CommandParameter = new CustomMergeField() { PropertyPath = fieldName };

    stackPanel.Children.Add(fieldButton);
}
stackPanel.HorizontalAlignment = System.Windows.HorizontalAlignment.Stretch;
scrollViewer.Content = stackPanel;
grid.Children.Add(scrollViewer);

radRibbonDropDownButton.DropDownContent = grid;
} 
```

当然，您可以优化 GetFriendlyName 方法的代码并以两种类都可用的方式添加它。

# haskell - 这在 Snap 中有什么作用？

> ID：11199703
> 
> 赞同：1
> 
> 时间：2012-06-26T01:36:20.077
> 
> 标签：haskell, haskell-snap-framework

有人可以解释默认快照[项目模板](https://github.com/snapframework/snap/tree/master/project_template/default)中发生了什么吗？

```
--------------------------------------------------------------------------
-- | Handle login submit
handleLoginSubmit :: Handler App (AuthManager App) ()
handleLoginSubmit =
    loginUser "login" "password" Nothing
              (\_ -> handleLogin err) (redirect "/")
  where
    err = Just "Unknown user or password"

-- | Render login form
handleLogin :: Maybe T.Text -> Handler App (AuthManager App) ()
handleLogin authError = heistLocal (bindSplices errs) $ render "login"
  where
    errs = [("loginError", textSplice c) | c <- maybeToList authError]

 | The application's routes.
routes :: [(ByteString, Handler App App ())]
routes = [ ("/login",    with auth handleLoginSubmit)
         , ("/logout",   with auth handleLogout)
         , ("/new_user", with auth handleNewUser)
         , ("",          serveDirectory "static")
         ] 
```

1.  为什么返回（）？
2.  “控制器”（正如您在 MVC 中所说的那样）功能的标准签名是什么？
3.  它如何知道`index.tpl`用作`/`路线的模板？
4.  我如何摆脱身份验证层，比如我只想制作一个简单的个人网络应用程序？

文档和教程主要涵盖了 snapplet（或模板），但没有涵盖任何 Haskell。很高兴看到一个如何编写书店之类的应用程序或博客的示例（官方 snap 网站将他们的博客条目存储在 markdown 中 - 所以我不确定那里发生了什么）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T09:19:55.727

我自己正在学习Haskell，对Snap一无所知，但我可以尽力回答我能看到的：

1)

该`Snap.Snaplet`模块定义了一个类型：`Handler b v a`.
因此，any`Handler`具有三个类型参数：`b`、`v`和`a`。
此外，`(Handler b v)`在同一模块中声明为`Monad`. 这可能会告诉你最后一个`a`参数的用途。

`IO`是另一个例子`Monad`。
`IO ()`做与 IO 有关的“某事”，然后返回`()`一个空值。
`IO a`做与 IO 有关的“某事”，然后返回其他类型的东西`a`。

例如，`x <- putStrLn "text"`因为 putStrLn 有返回类型，所以这样做并没有什么意义`IO ()`。从技术上讲，你可以，但它通常没用。`putStrLn`做 IO，仅此而已，拒绝将任何东西传递给未来的功能。具体来说，它会在控制台上打印一些东西，但它不会告诉程序的其余部分它这样做了。

`str <- getLine`有道理，因为`getLine`有 type `IO String`。它执行 IO，然后讲述`str`一个`String`. 它产生一个函数的其余部分可以直接使用的结果。

对于`Handler`，您可能会忘记处理程序的作用并像这样查看它：

`let M = Handler b v`
`M`被宣布为单子。
所以，`M a`做“某事”，然后返回一个`a`.
`M ()`做“某事”并且不返回任何东西。

从中您可能可以了解一些有关`handleLogin`正在执行的功能的信息。`Handler`它接受它的论点，并且可能基于这些论点/对这些论点做一些事情。之后，假设没有错误，程序移动到下一行，而不告诉下一行的函数发生了什么。

Snap 中有一些函数会返回 a `Handler`，而不是`()`最后一个参数。如果你看到这样的函数，这意味着它带有一个有意义的返回值。

4)

我怀疑这些模板更多的是示例而不是您打算从中构建的东西，但它们都是手动编写的，所以我认为您可以根据需要删除身份验证步骤。该类型`App`在“Application.hs”中定义，您可以在其中删除其`auth`参数。然后，您可以在项目的其余部分中删除对它的引用。

# ejb-3.1 - 从远程独立客户端访问 WAR 中的 EJB

> ID：11199704
> 
> 赞同：0
> 
> 时间：2012-06-26T01:36:24.957
> 
> 标签：ejb-3.1

我有一个从 Swing 客户端远程访问的 EJB，以及通过 servlet/JSP 在本地访问的 EJB。我想将我的 EJB 的封装从 EJB/WAR/EAR 切换到 EJB/WAR，因为它更易于使用。

我说的更简单是什么意思？例如，在 Eclipse 中，我可以拥有一个包含 EJB/web 类的项目，而不是拥有一个 EJB + WAR + EAR 项目（我的客户端是 Eclipse 中的一个单独项目）。

是否可以将 EJB 打包到 WAR 中并可以远程访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T16:30:17.440

EJB-in-WAR 的目的主要是简化 WAR 使用的本地 EJB 的打包。但是，即使对其他技术有限制（具体来说，不允许实体 bean 和 JAX-RPC 端点），我也找不到对打包在 WAR 中的远程 EJB 的限制，这使我相信远程视图在 WAR 中是允许的规范视角。我没有广泛的供应商实现知识，但我已经测试过它可以在 WebSphere Application Server 上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:04:12.280

根据 Web 配置文件和 EJB 3.1 规范，Java EE Web 配置文件产品只需要提供 EJB Lite，它不支持 EJB 的远程客户端。

但他们可以提供远程 ejb 客户端连接作为产品可选组件。

因此，如果您想将远程 EJB 打包到 WAR 中，则必须寻找提供此服务的 Java EE Web 服务器，并注意其他 Java EE 6 Web 服务器不需要相同的行为。

有用的链接：http: [//download.oracle.com/otndocs/jcp/javaee_web_profile-6.0-fr-eval-oth-JSpec/](http://download.oracle.com/otndocs/jcp/javaee_web_profile-6.0-fr-eval-oth-JSpec/)

[http://download.oracle.com/otndocs/jcp/ejb-3.1-fr-eval-oth-JSpec/](http://download.oracle.com/otndocs/jcp/ejb-3.1-fr-eval-oth-JSpec/)

# c# - 如何使用 Linq to XML 和 lambda 表达式从 XML 文件中删除元素

> ID：11199705
> 
> 赞同：0
> 
> 时间：2012-06-26T01:36:38.403
> 
> 标签：c#, xml, linq-to-xml

我有一个如下的xml

```
<Person>
   <Name>xxx</Name>
   <Age>xx</Age>
   <Data>xxxx</Data>
</Person>
<Person>
   <Name>xxx</Name>
   <Age>xx</Age>
   <Data>xxxx</Data>
</Person>
<Person>
   <Name>xxx</Name>
   <Age>xx</Age>
   <Data>xxxx</Data>
</Person> 
```

如何`<Data>`在 C# 中使用 Linq to XML、Lamda 表达式从树中删除元素？哪里`<Data>`是自动生成的元素和 XML 结构可能会有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T01:53:33.643

这完全取决于您要删除的元素，但您可以使用类似这样的东西

```
XDocument people = XDocument.Load("filenamre.xml");
IEnumerable<XElement> Person = people.Element("Person");
//gets  the element you want to remove based on value 
XElement name = Person.Where(p => p.Element("xxx").Value == "1").FirstOrDefault();
//removes the name 
name.Remove();
//create a new file without the element 
people.Save(Server.MapPath("Newfilenamre.xml")); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-29T05:12:27.477

删除第一个以外的元素。意味着只有首先必须存在，其余的都必须删除。

# python-3.x - Python 3 练习：生成排列

> ID：11199707
> 
> 赞同：1
> 
> 时间：2012-06-26T01:37:21.883
> 
> 标签：python-3.x, generator, yield

我正在尝试编写一个生成器函数来进行置换练习。但它不返回任何东西。但是如果我用 ''lis.append(new[k])'' 替换 ''yield new[k]''，那么我会得到正确的排列列表。我在产量方面做错了吗？

```
tup=(1,2,3) # tup can be any sequence
new=[[]]*(len(tup)+1) # memory; new[0]=[], new[1] will be length 1 permutation, etc.
lis=[]  # the list of permutations

def repeat(k): # recursion
    for i in tup:
        if i in new[k-1]:
            continue # permutation can't repeat
        else: new[k]=new[k-1]+[i]

        if k==len(tup): 
             yield new[k]
        else:
             repeat(k+1)

gen=repeat(1)
for i in gen:
    print(i) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:33:32.167

我认为您正在尝试编写一种算法来使用生成器生成多个长度的排列以进行练习。

试试这个问题的大小： [How to generate all permutations of a list in Python](https://stackoverflow.com/questions/104420/how-to-generate-all-permutations-of-a-list-in-python)

你需要翻译成python3，这应该不是什么大问题。

不幸的是，我认为您的问题在于您的算法，而不是您对 的使用`yield`，这对我来说看起来不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:50:53.070

这是一个递归函数，但您不会从递归中传递值，这就是它不返回任何内容的原因。

您需要将呼叫更改为

```
repeat(k+1) 
```

至

```
for x in repeat(k+1):
    yield x 
```

然后得到的函数是：

```
tup=(1,2,3) # tup can be any sequence
new=[[]]*(len(tup)+1) # memory; new[0]=[], new[1] will be length 1 permutation, etc.
lis=[]  # the list of permutations

def repeat(k): # recursion
    for i in tup:
        if i in new[k-1]:
            continue # permutation can't repeat
        else: new[k]=new[k-1]+[i]

        if k==len(tup): 
             yield new[k]
        else:
             for x in repeat(k+1):
                 yield x

for i in repeat(1):
    print(i) 
```

哪个有效。

下一步是摆脱全局变量。

# visual-studio-2010 - 将解决方案复制到其他位置时，F# 选项会变得疯狂

> ID：11199709
> 
> 赞同：1
> 
> 时间：2012-06-26T01:37:28.900
> 
> 标签：visual-studio-2010, f#

这非常奇怪，我希望有人会有一些见解来理解这一点。

我有一个 F# 2.0（Visual Studio 2010，针对 .Net 4.0）解决方案，它在我最初创建它的位置可以正常工作，但是如果我尝试将它复制到一个新文件夹（因为我想将它签入源代码管理)，我在构建时遇到了一些非常奇怪的错误。它们往往是这样的：

```
error FS0803: Invalid use of a type name and/or object constructor. If necessary use 'new' and apply the constructor to its arguments, e.g. 'new Type(args)'. Overloads are:  None() : unit. 
```

或者

```
error FS0001: This expression was expected to have type     obj option     but here has type     Some<'a> 
```

这些错误*仅*在使用选项类型时发生，其中一种用法的简单示例是：

```
let asOption e = 
    match e with
    | null -> None
    | _ -> Some(e) 
```

现在，请记住，这是一个在其原始位置编译得很好的解决方案。我已经尝试过类似 Clean/Rebuild、删除 obj 和 bin 目录、重新启动 Visual Studion 等显而易见的方法，但还是一样。

在这两种情况下，引用 DLL 都是相同的，GAC 的 DLL 是从 GAC 引用的，非 GAC 的 dll 是从相同的相对路径复制和引用的。只是为了好玩，我什至比较了用于编译每个解决方案的 Fsc.exe 调用的输出窗口文本，以确保在两种情况下都使用相同的参数调用编译器，当然，确实如此。

任何人都知道可能导致这种情况的原因吗？我是否以某种方式从 GAC 中获得了一些奇怪的 FSharp.Core.dll 版本？我只是倒霉蛋中最倒霉的一个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:47:36.167

所以奇怪的症状有一个同样奇怪的原因。

事实证明，我引用的其中一个 DLL（每个项目都有的无处不在的“核心”垃圾抽屉 dll）必须有一些扩展方法，这些方法会导致编译器和 Visual Studio 使用的类型推断出现一些问题。

当我删除`open MyProject.Core`并用完全限定名称替换对我正在使用的类型的任何引用时，奇怪的错误神奇地消失了。

所以，在这一点上，还有两个问题：

1.  那里有什么样的疯狂扩展方法可能导致这种情况
2.  为什么原始解决方案/项目不受此影响？（我猜这可能与将引用传递给 Fsc.exe 调用的顺序有关……但我不确定）。

我实际上可能会深入挖掘以尝试找出＃1的答案。我不确定它是否暴露了 F# 编译器的某种错误（可疑），或者我的同事是否只是在使用扩展方法做一些不自然的事情（很可能）

**更新**：看起来有人有些嫉妒 F# 并`Option<T>`在 Core 项目中创建了一个类。几乎解释了一些事情。我没有尝试查看 Fsc.exe 调用中包含的顺序是否有所不同，但我有一种感觉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:20:52.850

假设 F# 编译器是确定性的，那么显然在调用它的方式上肯定存在一些差异，可能在环境变量中。您是否尝试过从命令行运行 MSBuild？它通常对这类事情有所帮助。

一种猜测是 F# 为您的代码推断出不同的类型。您是否尝试过将其限制为只需要处理简单类型？例如：

```
let asOption (e: obj) =
    match e with
    | null -> None
    | _ -> Some(e) 
```

要不然：

```
let asOption<'T> (x: 'T) : option<'T> =
    if x :> obj = null then None else Some x 
```

后者摆脱了对泛型参数的空约束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T04:23:44.333

参考文献几乎不应该来自 GAC，它们应该来自`Reference Assemblies`. 发布您正在见证的 fsc.exe 命令行，也许它会更清楚。我猜 FSharp.Core 参考以某种方式搞砸了（可能与它的参考程序集旁边的 sigdata/optdata 文件有关？）

（不过，一个非常奇怪的症状的点！）

# php - 在 Aptana 中添加 Laravel 支持

> ID：11199710
> 
> 赞同：28
> 
> 时间：2012-06-26T01:37:31.903
> 
> 标签：php, laravel, aptana3

我希望添加带有文档的自动完成功能`Laravel in Aptana 3.0`

艰难，我设法创建了自动完成（只需在其中映射一些方法）

[https://github.com/danielboendergaard/laravel-helpers/blob/9798026ede3722d6a9570684e987f7ed81b41013/ide_helper.php](https://github.com/danielboendergaard/laravel-helpers/blob/9798026ede3722d6a9570684e987f7ed81b41013/ide_helper.php)

这似乎不是很有效，我们如何为它添加方法文档呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T20:28:46.533

目前在 Github 上有几个 Laravel 4 的助手可用。如果这仍然是 Aptana 的问题，我建议使用这个包： [https ://github.com/barryvdh/laravel-ide-helper](https://github.com/barryvdh/laravel-ide-helper)

我使用 Eclipse，它对我很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T08:24:15.240

您只需将生成的文件[barryvdh / _ide_helper.php](https://gist.github.com/barryvdh/5227822)添加到您在 Aptana 中的项目中即可。

# php - 使用 SQLite 更新 MySQL

> ID：11199711
> 
> 赞同：0
> 
> 时间：2012-06-26T01:37:49.640
> 
> 标签：php, mysql, sqlite

我是否有可能以某种方式拥有一个从“离线”SQLite 数据库更新的 MySQL 数据库（在服务器上）？

就像我向 SQLite 提交表单并让 MySQL 刷新以反映最新更改（从 SQLite 派生这些更改）一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T01:51:40.663

您可以使用抽象层，从 SQLite 中选择所有记录，然后将不存在的记录插入 MySQL 数据库，或者您可以在将记录添加到 SQLite 的同时将记录添加到 MySQL DB D B。

# html - 想要DIV背景在IE中延伸到父DIV之外

> ID：11199712
> 
> 赞同：2
> 
> 时间：2012-06-26T01:38:07.410
> 
> 标签：html, css

我有一个项目列表，比如一个菜单，其中当前项目有一个背景图像，有点像一个向右的大指针。这个背景图像指针应该避开它所包含的 div 的边界框。这是它在 Chrome 和 FF 中的显示截图，正如我所期望的那样：

![在此处输入图像描述](../Images/10e931a4c043314025fa17a314bb2db9.png)

我已经用代码设置了一个 jsfiddle，减去了背景图像，因为我懒得在任何地方上传它。但是我已经设置了背景颜色，所以你可以看到我指的是什么

代码在这里：http: [//jsfiddle.net/V8TNm/](http://jsfiddle.net/V8TNm/)

所以在 Chrome 和 FF 中，活动项目的黄色背景会延伸到灰色渐变框之外。但是在IE9中，它被切断了。

任何想法为什么，以及一个简单的修复可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:42:53.223

只需添加位置：相对。

```
#nav_mod_list div.current {
position: relative;
} 
```

[http://jsfiddle.net/V8TNm/3/](http://jsfiddle.net/V8TNm/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T01:43:45.777

选择器`#nav_mod_list div.current`的宽度`210px`为 以及填充和边距，其中容器为`200px`。将 210 更改为 200 并删除边距和填充。

**编辑：**

您也可以完全删除`width`财产。这样，它只会扩展容器的宽度。

# wpf - 从 DataTemplate 的数据类型类中引用 DataTemplate 中的用户控件

> ID：11199718
> 
> 赞同：1
> 
> 时间：2012-06-26T01:39:38.123
> 
> 标签：wpf, user-controls, datatemplate

我有一个这样的数据模板：

```
<DataTemplate DataType="{x:Type mvvm:ComponentViewModel}">
   <v:UCComponents></v:UCComponents>
</DataTemplate> 
```

UCComponent 是一个用户控件，具有一个名为 ID 的公共属性。ComponentViewModel 还有一个名为 ID 的属性。我想在 ViewModel 属性的设置器中设置 UCComponent ID 属性。我怎样才能做到这一点？

这是我尝试过的：

```
private string _ID;
public string ID 
{
    set { ((UCComponents)((DataTemplate)this).LoadContent()).ID = value; } 
} 
```

错误：这不能​​从 ComponentViewModel 转换为 DataTemplate。任何帮助将不胜感激。

我不忠于 MVVM 设计模式，这可能是我感到沮丧的原因，但是有没有办法访问模板中使用的 UserControl？

阿曼达

* * *

感谢您的帮助，但它不起作用。ID 的 getter 和 setter 永远不会被调用。这是我的代码：

```
public static DependencyProperty IDProperty = DependencyProperty.Register("ID",     typeof(Guid), typeof(UCComponents));
public Guid ID
{
    get
    { return (Guid)GetValue(IDProperty); }
    set
    { 
        SetValue(IDProperty, value);
        LoadData();
    }
} 
```

我不能使 UserControl 成为 DependencyObject。这也许是问题所在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:35:00.257

您可以在用户控件 (UCComponents.xaml.cs) 上添加依赖属性，如下所示

```
 public static DependencyProperty IDProperty = DependencyProperty.Register(
    "ID",
    typeof(Object),
    typeof(BindingTestCtrl));

    public string ID
    {
        get
        {
            return (string)GetValue(IDProperty);
        }
        set
        {
            SetValue(IDProperty, value);
        }
    } 
```

然后你可以使用绑定它

```
<DataTemplate DataType="{x:Type mvvm:ComponentViewModel}">
    <v:UCComponents ID="{Binding ID}" />
</DataTemplate> 
```

另一种解决方案是处理用户控件上的 DataContextChanged 事件，例如

```
 private ComponentViewModel _data;

    private void UserControl_DataContextChanged(object sender, DependencyPropertyChangedEventArgs e)
    {
        _data = e.NewValue as ComponentViewModel;
        this.ID = _data.ID;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:43:20.377

谢谢吉姆，我让它以这种方式工作：在我的用户控件中：

```
 public static DependencyProperty IDProperty = DependencyProperty.Register("ID", typeof(Guid), typeof(UCComponents));
    public Guid ID
    {
        get
        { return (Guid)GetValue(IDProperty); }
        set
        {
            SetValue(IDProperty, value);
            LoadData();
        }
    }

    private void UserControl_DataContextChanged(object sender, DependencyPropertyChangedEventArgs e)
    {
        _data = e.NewValue as ComponentViewModel;
        this.ID = _data.ID;
    } 
```

在我的 ViewModel（用作模板类型）中：

```
 public ComponentViewModel(Guid id)
    {
        DisplayName = "Component";
        Glyph = new BitmapImage(new Uri("/Remlife;component/Images/Toolbox/Control.png", UriKind.Relative));
        ID = id;
    } 
```

在我的资源文件中：

```
<DataTemplate DataType="{x:Type mvvm:ComponentViewModel}">
    <v:UCComponents ID="{Binding ID}"/>
</DataTemplate> 
```

不知何故，我仍然需要在它的构造函数中将 ID 传递给 ViewModel。为什么？我不确定，但至少它现在有效。谢谢你的帮助。

# php - 在php中将数组转换为png

> ID：11199723
> 
> 赞同：1
> 
> 时间：2012-06-26T01:40:40.760
> 
> 标签：php, arrays, pixels

我想知道如何将一组颜色转换为 png 图像文件。该数组称为`$pixels`。请帮我。

```
$im = imagecreatefrompng('start.png');
$background = imagecreatefrompng('background.png');
imageconverttruecolor($background);
imageconverttruecolor($im);
define('x',imagesx($im));
define('y',imagesy($im));
$pixels=array();
for ($x = 0; x>$x;++$x){
for ($y=0;y>$y;++$y){
    $s=imagecolorat($background,$x,$y);
    if ($s&&$s==imagecolorat($im,$x,$y))
    $pixels[$x][$y]=0xFFFFFF;
    else $pixels[$x][$y]=0x000000;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:00:01.650

可以，但是您没有提供有关数组结构的太多信息。我建议使用以下内容；

```
Array $arr = (Array($x, $y, $r, $g, $b), Array($x, $y, $r, $g, $b) ...); 
```

因此，您正在查看一个多维数组，每个嵌入式数组都在存储该数组；

```
$x = x position of pixel
$y = y position of pixel
$r = red value (0 - 255)
$g = green value (0 - 255)
$b = blue value (0 - 255) 
```

从这里，您可以使用 GD 来绘制图像。为了找到图片的正确高度和宽度，您需要定义一个函数来比较最大 x 和 y 值，并根据数组中找到的最大 x/y 值更新它们。IE;

```
$max_height = (int) 0;
$max_width = (int) 0;

foreach ($arr as $a)
{
    if ($a[0] > $max_width)
    {
        $max_width = $a[0];
    }
    if ($a[1] > $max_height)
    {
        $max_height = $a[1];
    }
} 
```

所以，现在您已经获得了图像的最大宽度和高度。从这里开始，我们可以通过遍历多维数组来开始构建图像——基本上，一次一个像素。

要实际绘制像素，我们将使用[imagesetpixel](http://php.net/manual/en/function.imagesetpixel.php)。

```
$im = imagecreatetruecolor($width, $height);
foreach ($arr as $b)
{
    $col = imagecolorallocate($im, $a[2], $a[3], $a[4]);
    imagesetpixel ($im , $a[0] , $a[1] , $col );
} 
```

现在，一旦我们完成了，剩下要做的就是在浏览器中实际显示图像。

```
header('Content-type: image/png');
imagepng($im);
imagedestroy($im); 
```

希望这可以帮助。

*   伊根

# c++ - 可以检查 NULL 取消引用的调试软件？

> ID：11199726
> 
> 赞同：2
> 
> 时间：2012-06-26T01:41:07.527
> 
> 标签：c++, debugging

是否有足够聪明的软件来确定您从某个地方获得了一个指针，并且返回的指针可能是 NULL 并且您在块中的任何位置都没有：

```
ptr = getSomeDataThatCouldReturnNULLAt(-1); 
```

...

```
if(ptr)
{
   //code
} 
```

或者

```
if(!ptr)
{
   return;
} 
```

有没有软件可以让你知道所有可能不检查的地方？

谢谢

检查运行时问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-26T01:50:07.247

更好的编码方法如下：

```
s32 getSomeDataThatCouldReturnNULLAt( s32 intParam, void **inputPointer); 
```

然后在您要调用此函数的函数中：

```
s32 returnValue = 0 ;
void * ptr = NULL ; 

if((returnValue = getSomeDataThatCouldReturnNULLAt( -1, &ptr) ) != ERROR ||
  ptr ==NULL )
   return returnValue; 
```

`returnValue`可以指出您的错误`getSomeDataThatCouldReturnNULLAt`

# ruby-on-rails-3 - 可以在运行时/热时将图像添加到资产管道吗？

> ID：11199728
> 
> 赞同：0
> 
> 时间：2012-06-26T01:41:25.003
> 
> 标签：ruby-on-rails-3, asset-pipeline, ruby-on-rails-3.2, sprockets

设想：

*   已经部署了一个 Rails 3.2 应用，它运行了资产管道流程……</li>
*   现在作为用户操作的结果，我们有一个新图像，我们希望它成为资产管道的一部分，以获得缓存清除等好处（尽管现在我考虑了一下，用户上传的图像每次都有唯一的文件名，这是一个有争议的问题）
*   有什么方法可以/现在使用资产管道来处理新图像是个好主意吗？

我有一种感觉，这是一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:44:19.857

编译资产只是一个 rake 任务，您可以随时调用该任务。任务是`bundle exec rake assets:precompile`。有关详细信息，请参阅[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)。

但是，我不会将用户上传的图像视为要编译的资产。我认为这样做是个坏主意。

相反，就像您提到的那样，让您的用户上传的图像具有唯一的名称。因此，当新图像上传/替换时，将生成新名称。可以在[回形针宝石](https://github.com/thoughtbot/paperclip)中找到这样做的一个示例。它将图像写入磁盘并在数据库中保存记录/参考。这些图像在数据库中有一个 id，并且 URL 涉及该 id。所以你会有`/photos/4/nothing.png`和`/photos/2/yes.png`。其中 2 和 4 指向具有与图像的元数据/关系的数据库记录。

此外，当您使用`image_tag`rails 视图助手时，它会自动将缓存破坏器添加到图像的 URL 中。缓存破坏器作为查询字符串完成，因此`image_tag('test.png')`变为`/images/test.png?1234567890`. 有时某些代理不会“破坏”查询字符串缓存，但这些是少数。

# java - 将 Groovy 模板引擎导入 Java 项目

> ID：11199734
> 
> 赞同：2
> 
> 时间：2012-06-26T01:43:05.607
> 
> 标签：java, groovy, template-engine

我想在独立的 Java 库中导入 Groovy 模板引擎。在看到 Play Framework 1.2.4 也做到了之后，我有了这个想法。

有没有办法在不导入整个 Groovy 框架的情况下专门获取模板引擎？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:30:12.360

Groovy 2.0 版本中的一项新特性是[模块化](http://groovy.codehaus.org/Groovy+2.0+modularization)。有一个单独的模板模块（包中的所有内容`groovy.text`），例如`groovy-templates-2.0.0-rc-4.jar`. 我不太确定该模块的依赖关系是什么，因此您可能需要引入其他一些 Groovy 模块。不过，这会将其保持在最低限度。由于 2.0 还不是最终版本，您可能可以尝试[RC 版本](http://groovy.codehaus.org/Download)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:05:10.263

据我所知，但您可以从 java 类运行 groovy 代码...请参阅： http: [//groovy.codehaus.org/Embedding+Groovy](http://groovy.codehaus.org/Embedding+Groovy)

所以你可以让它通过一些黑客攻击来工作。

# unix - 更改权限

> ID：11199735
> 
> 赞同：2
> 
> 时间：2012-06-26T01:43:14.740
> 
> 标签：unix, amazon-s3, s3cmd

我使用 s3cmd 将文件上传到 Amazon s3。这是一个超级应用程序。唯一的问题是我仍然需要登录网络界面并将文件的权限更改为“授权用户”并授予读取权限。

有没有办法可以通过终端更改权限并使其成为授权用户？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:24:57.200

您应该使用存储桶策略。在该对象上设置公共读取权限的存储桶上设置存储桶策略。因此，您从 s3cmd 上传的每个内容都会自动设置对该对象的读取权限。

我是 Bucket Explorer（Amazon S3 工具）的开发人员。如果 s3cmd 没有设置 S3 存储桶策略的选项，那么您可以尝试存储桶探索。并且此工具还具有 Bucket Default 功能，使用此功能您可以在新上传的 s3 上自动设置期望权限。文件。

# objective-c - 在 Interface Builder 中，如何将 UIView 添加到属于我创建的自定义视图的子视图？

> ID：11199737
> 
> 赞同：0
> 
> 时间：2012-06-26T01:43:31.527
> 
> 标签：objective-c, xcode, interface-builder

我正在为我正在创建的 iPhone 应用程序创建自定义视图。这个自定义视图是一个弹出对话框，它由一个包含两个图像的 UIView、一个关闭对话框的按钮、一个标签和一个 UIScrollView 组成。这个视图被命名为 MDPopoverCard。我将这些文件作为我的视图的一部分：

```
MDPopoverCard.xib - The view as drawn up in Interface Builder.
MDPopoverCard.h - Defines a few IBActions and some other properties 
MDPopoverCard.m - Implements some functions defined in the header 
```

这是 Interface Builder 中的样子： http: [//cl.ly/2B0f2x3s1w1i0K2G0Q1r](http://cl.ly/2B0f2x3s1w1i0K2G0Q1r)（抱歉，我还不能发布图片，因为我是 stackoverflow 的新手）

在我的 .m 和 .h 文件中定义了一些属性来控制是否显示绿色按钮以及标题标签的文本是什么。

我需要在我的应用程序中显示一些这样的对话框，并且我想重用我设计的这个界面。我希望能够通过 Interface Builder 将按钮和其他表单元素添加到 UIScrollView 中。但是，我有一个问题：

想象一下，我在 Interface Builder 中绘制了另一个视图。我向它添加了一个 UIView 并将其类设置为 MDPopoverCard。然后我将几个 UIButton 对象拖到我的 MDPopoverCard 视图中。这是 Interface Builder 中的示例：

[http://cl.ly/1X090h1t1q3f0i3E0917](http://cl.ly/1X090h1t1q3f0i3E0917)

此屏幕截图显示了我已将 MDPopoverCard 添加到的另一个视图（根视图）。然后我添加了两个按钮作为 MDPopoverCard 的子视图。

这些按钮确实正确嵌套在 Interface Builder 中。但是，当我运行我的应用程序时，这些按钮会添加到 xib 文件中构成我的 MDPopoverCard 视图的任何项目*之前。*这意味着按钮被添加到我的弹出对话框*后面。*这是第一个问题。

第二个问题是我希望将这些按钮和表单元素实际添加到包含在 MDPopoverCard 视图中的 UIScrollView 中，而不是直接添加到 UIView 的子视图数组中。有没有办法在 Interface Builder 中指定这个？我真的更愿意将按钮绘制到我的 UIView 中并通过 Interface Builder 将它们连接到 IBActions，而不是手写我可能需要显示的这些对话框的每个实例（几个）。

有什么建议吗？我能做些什么来澄清这个问题吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:49:47.587

以前 Xcode 支持自定义 UI 元素的用户定义 IB 插件，您可以像使用内置小部件一样将其拖放到 XIB 中。从 Xcode 4 开始，这个不错的功能已被删除。（非常感谢，苹果。）

目前我只能想出一种骇人听闻的方式来实现您所描述的。我会做的是以下几点：

1.  `IBOutletCollection`在你的上创建一个`MDPopoverCard`，例如`embeddedControls`
2.  将它与您想要进入滚动视图的每个 UI 元素（此处：按钮）链接起来
3.  实现`awakeFromNib`in`MDPopoverCard`并将所有视图的超级视图显式重置为`embeddedControls`滚动视图

希望这会有所帮助（尽管我没有尝试过）。

# facebook - [事件]/Feed 未在图形 API 中显示“照片”

> ID：11199741
> 
> 赞同：0
> 
> 时间：2012-06-26T01:43:46.810
> 
> 标签：facebook, facebook-graph-api

事件提要未显示“照片”类型。

例子：

[http://www.facebook.com/events/484604511557125/](http://www.facebook.com/events/311213522299865/)

本次活动有几张照片。

但是连接 484604511557125/feed 没有显示它们。一切都显示为“状态”或“视频”类型，它们无法获取图片网址。

有人可以帮助我吗？我怎样才能得到照片的网址？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:13:09.570

我也遇到了同样的问题。根据我的研究，如果我使用发布图片的用户的朋友的用户的 access_token，则会返回“图片”类型。所以也许是权限/隐私问题，尽管我从公共活动中阅读了图片。

我发现了这个相关的错误，它是几个月前创建的，尚未修复。 [http://developers.facebook.com/bugs/401820623197892/](http://developers.facebook.com/bugs/401820623197892/)

任何其他想法和解决方案将不胜感激

谢谢

# iis-7.5 - IIS 7.5 上未加载 PHP GD 扩展

> ID：11199744
> 
> 赞同：0
> 
> 时间：2012-06-26T01:44:46.783
> 
> 标签：iis-7.5, php, php-gd

PHP GD Extension 已加载并在本地服务器上运行，但即使我使用所有完全相同的文件，它也没有在我们的实时服务器上正确加载。

（PHP GD 在这里工作正常）本地服务器：Microsoft Windows Server 2003 For Small Business Server SP2 IIS 版本：6

然后我将整个“C:\PHP”文件夹从本地服务器复制到实时服务器上的“C:\Program Files (x86)\”。该“PHP”文件夹确实包含 ext 文件夹和其中的“php_gd2.dll”文件。我也在“php.ini”中将路径从“C:\PHP”更改为“C:\Program Files (x86)\”。但是，PHP 不会加载到实时服务器上。

```
PHPINFO Local:http://jsfiddle.net/hFKfx/
PHPINFO Live: http://jsfiddle.net/h77Hy/ 
```

我对 PHP 不是很好。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:04:57.457

在 Win2K3 / IIS6 中，您将 PHP 作为 ISAPI 模块（线程安全）运行。
在 Win 7 / IIS7.5 中，您将 PHP 作为 FCGI 模块（非线程安全）运行。

这很可能是你的问题。您不能将线程安全 (TS) / 非线程安全 (NTS) 扩展与核心 PHP 混合和匹配。如果您只是复制所有内容，则可能有 TS 扩展。您需要下载并使用 NTS 的。

（[PHP 5.2.6 NTS 的存档链接](http://windows.php.net/downloads/releases/archives/php-5.2.6-nts-Win32.zip)）

要验证此假设，请检查*php.ini*指定启动错误日志的位置。如果您正在记录启动错误，您应该会看到类似以下内容：

> PHP 警告：PHP 启动：gd 扩展：无法初始化模块
> Module 编译使用 build ID=API20041225,TS,VC6
> PHP 编译使用 build ID=API20041225,NTS,VC6
> 这些选项需要匹配

*（注意“TS”与“NTS”）*

希望有帮助。如果没有，也许您会在日志中找到其他指示问题所在的内容。

# python - 使用 python 和 Qt 创建一个准确的节拍器

> ID：11199747
> 
> 赞同：5
> 
> 时间：2012-06-26T01:45:29.307
> 
> 标签：python, qt, audio, pyqt, pygame

我正在尝试在我的跨平台 pyQt 程序中添加一个简单的节拍器，但是很难获得准确的计时。使用 PyGame 的声音系统播放声音似乎效果最好。我尝试了 Phonon，但它根本不一致，而且 QSound 在我的系统上根本不起作用。我尝试过使用 python 的时间库和 QTimers 处理时间，但 QTimeLine 似乎效果最好。

较低节奏的时机也不算太糟糕......仍然到处打嗝。然而，更高的节奏根本不准确。

任何想法/建议将不胜感激！

这是一些代码：

```
class Metronome(object):
    def init_metronome(self):
        self.metronome_timer = QtCore.QTimeLine(100000)
        self.metronome_timer.valueChanged.connect(self.tick)
        self.metronome_timer.setCurveShape(3) #linear curve

        self.ui.pushButton_metronome.toggled.connect(self.toggle_metronome)
        self.ui.spinBox_metronome_bpm.valueChanged.connect(self.set_metronome_bpm)

        pygame.mixer.init()
        self.sound = pygame.mixer.Sound("./sounds/tick.wav")

    def toggle_metronome(self):
        if self.ui.pushButton_metronome.isChecked() == True:
            self.set_metronome_bpm()
            self.metronome_timer.start()
        else: 
            self.metronome_timer.stop()

    def set_metronome_bpm(self):
        bpm = self.ui.spinBox_metronome_bpm.value()
        self.metronome_timer.setUpdateInterval(60./bpm * 1000)

    def tick(self):
        QtCore.QCoreApplication.processEvents()
        self.sound.play() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T04:54:51.257

我对与 Python 和 Qt 的交互不是很熟悉，但我确实有使用计时器和线程以及 Qt 的经验。

## 一般时间限制

Qt 中的时序通常用于图形动画。在[Qt Timers](http://qt-project.org/doc/qt-4.8/timers.html)文档中，它说计时器精确到大约 15 毫秒，但这取决于平台。在 Windows 中，如果您阅读他们关于计时器和系统时钟的[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644900%28v=vs.85%29.aspx)，它会说它们精确到大约 11 到 16 毫秒。

## 线程优先级

线程的优先级也会影响节拍器的结果。您可能应该考虑将线程的优先级设置为时间关键（请参阅 参考资料[`QThread::Priority`](http://qt-project.org/doc/qt-5.0/qthread.html#Priority-enum)），以便系统为您提供更好的时间，然后告诉您的函数在[`yieldCurrentThread()`](http://qt-project.org/doc/qt-5.0/qthread.html#yieldCurrentThread)播放完声音后执行 sleep(0) 或调用。

## QObject 连接调用

Qt 中的连接调用是使用 完成的[`Qt::AutoConnection`](http://qt-project.org/doc/qt-5.0/qt.html#ConnectionType-enum)，这意味着 Qt 决定是使用事件队列还是使用直接调用来连接它。对于时间安排，最好直接调用。

此外，在播放声音后调用 processEvents 或根本不调用。事先这样做会告诉 Qt，您希望在到达下一个呼叫之前处理位于事件队列中的任何其他内容。查看关于[qt 事件系统](http://qt-project.org/doc/qt-5.0/eventsandfilters.html)的文档。

## MIDI 文件

我知道的大多数游戏中生成的声音都是使用 MIDI 文件完成的。它们很小，并且它们的声音循环的渲染在许多平台上都非常一致。也许你可以从 100 个 midi 文件中选择一个来完成一些事情。也有像[ScaleTempo](http://scaletempo.sourceforge.net/0/)这样的项目，但它似乎有点旧（最后更新于 2008 年）。

希望有帮助。

免责声明：我发布的大多数链接都来自 Qt 5。我主要在 Qt 4.7 中进行编程，但据我所知，定时器和事件系统并未计划为 Qt 5 进行改造（主要是动画后端优化） .

# windows-phone-7 - 如何使用表情设计将 Windows Phone 系统颜色添加到图标？

> ID：11199751
> 
> 赞同：1
> 
> 时间：2012-06-26T01:45:59.323
> 
> 标签：windows-phone-7, icons, expression

我正在尝试在 Microsoft Expression Design 中创建图标，但我想添加系统资源颜色，如手机背景和前景，以便在用户更改主题时图标更改颜色。有谁知道如何在 Expression Design 中指定 windows phone 系统颜色，或者如何导入它们？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T01:49:35.000

这是我之前使用过的一篇很棒的博客文章，它逐步将系统主题应用到图像中（应该是白色的......但它会进入细节！）

[使用图像作为掩码，以便 WP7 主题得到尊重](http://advertboy.wordpress.com/2010/09/25/using-an-image-as-a-mask-so-that-wp7-themes-are-honoured/)

例如，以下是使用 Rectangle 和 OpacityMask 的方法：

```
<Rectangle Fill="Black" Height="48" Width="48">
            <Rectangle.OpacityMask>
                <ImageBrush ImageSource="/MyProject;component/Images/Dark/appbar.add.rest.png" />
            </Rectangle.OpacityMask>
        </Rectangle> 
```

请注意，`Height`&`Width`明确设置为 my的`Width`& 。这解决了如果您不这样做会发生的拉伸问题。`Height``ImageSource`

# javascript - Javascript函数中奇怪的for循环行为

> ID：11199754
> 
> 赞同：-2
> 
> 时间：2012-06-26T01:46:49.557
> 
> 标签：javascript, for-loop

我的函数中有以下循环

如果 x <10，我看到它循环，但如果它大于 10，即使 y < x 的条件满足，它也会失败

```
function insert(x,y) {

   for (var shift = y; shift < x; shift++) {
      //get into loop for insert (9,2) but not for insert(10,2) 
   }       

} 
```

这是实际功能，我正在尝试使用 rapheal.js 在场景之前可视化插入，它适用于 insertBeforeTo(9,2) 但是当我尝试 insertBeforeTo(10,2) 时，它不会进入循环。

```
function insertBeforeTo(whichElementI, insertBeforeI) {

     var twhichElement = blocks[whichElementI];
     blocks[whichElementI].animate({ x: blocks[insertBeforeI].attr('x') }, 1000, ">");
     var shiftplusone = insertBeforeI;
     for (var shift = insertBeforeI; shift < whichElementI; shift++) {

         ++shiftplusone;
         blocks[shift].animate({ x: blocks[shiftplusone].attr('x') }, 1000, ">");// check  value actually changes

     }
} 
```

下选民：介意解释吗？

发现问题：在调试时，我看到“”中的 whichElementI 和 insertBeforeI 值。所以我假设它把它当作一个字符串，正如 nnnnn 和 paxdiablo 正确指出的那样，它把它当作字符串而不是 int 所以它适用于 whichElementI = 9 和 insertBeforeI = 2 而不是 whichElementI= 10 ,insertBeforeI=2。

所以我使用了像 +whichElementI, +insertBeforeI 这样的一元加运算符来解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:02:08.410

您应该首先检查您传递给函数的数据类型。

例如，所有这些都会产生输出：

```
insert ( 10,   2)
insert (  9,   2)
insert ( '9', '2') 
```

但以下*没有：*

```
insert ( '10', '2') 
```

那是因为*string* `'10'`实际上小于 string `'2'`。我的意思是在排序或比较时不对字符串进行数字处理，而是单独比较每个*字符*，从而导致前十二个数字被排序为：

```
1
10
11
12
2
3
4
5
6
7
8
9 
```

[您可以使用以下代码（在众多在线 JS 运行器之一](http://writecodeonline.com/javascript/)）看到这一点：

```
function insert(x,y) {
   for (var shift = y; shift < x; shift++) {
      //get into loop for insert (9,2) but not for insert(10,2) 
      document.write('x');
   }       
}
document.write('<br>10,2 as string: '); insert ('10','2');
document.write('<br>9,2 as string: ');  insert ( '9','2');
document.write('<br>9,2 as num: ');     insert (  9,  2);
document.write('<br>10,2 as num: ');    insert ( 10,  2); 
```

输出：

```
10,2 as string: 
9,2 as string: xxxxxxx
9,2 as num: xxxxxxx
10,2 as num: xxxxxxxx 
```

如果您有一个要视为数字的字符串，这[`parseInt()`](http://www.w3schools.com/jsref/jsref_parseint.asp)是一种方法，例如：

```
var str42 = '42';
var num42 = parseInt (str42, 10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T02:02:12.023

我猜你无意中用字符串值而不是数字值调用你的函数，也就是说

```
insert("9", "2")
insert("10", "2") 
```

...而不是

```
insert(9, 2)
insert(10, 2) 
```

例如，如果您从 html 元素属性中获取值，它们将是字符串。

使用*strings* , `"2" < "9"`is `true`, but `"2" < "10"`is `false`- 它进行字典（字典）顺序比较，而不是数字比较。

如果您希望您的函数以任何一种方式工作，那么您可以将其更改为将字符串转换为数字（为此我更喜欢使用[一元加运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators#.2B_%28Unary_Plus%29)）：

```
function insert(x,y) {

   x = +x;
   y = +y;

   for (var shift = y; shift < x; shift++) {
      //get into loop for insert (9,2) but not for insert(10,2) 
   }       

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T02:08:27.487

我不知道whichElementI和insertBeforeI是什么类型，但是通过*1将它们转换为数字。这应该有助于控制一些算术。可能还想检查 if(isNaN(some_var)==false){...} 作为健全性检查。

```
function insertBeforeTo(whichElementI, insertBeforeI) {

 var twhichElement = blocks[whichElementI];
 blocks[whichElementI].animate({ x: blocks[insertBeforeI].attr('x') }, 1000, ">");
 var shiftplusone = insertBeforeI*1;
 for (var shift = insertBeforeI*1; shift < whichElementI*1; shift++) {
    ++shiftplusone;
    blocks[shift].animate({ x: blocks[shiftplusone].attr('x') }, 1000, ">");// check x value  actually changes

  }
} 
```

# haskell - Gofer中的独立单引号

> ID：11199757
> 
> 赞同：0
> 
> 时间：2012-06-26T01:47:23.757
> 
> 标签：haskell

> **可能重复：**
> [Haskell函数名中'的含义？](https://stackoverflow.com/questions/1207649/the-meaning-of-in-haskell-function-name)
> [Haskell 标识符中的撇号](https://stackoverflow.com/questions/5673916/apostrophe-in-identifiers-in-haskell)

我正在按照自己的方式工作，并尽我所能在 Clojure 中实现它[。](http://red.cs.nott.ac.uk/~gmh/monparsing.pdf)虽然我不认识任何 Gofer（或 Haskell），但我在进行的过程中已经足够了解了。但是，我似乎找不到任何地方可以解释 inp 之后的单引号和双单引号应该起到什么作用。

```
seq :: Parser a -> Parser b -> Parser (a,b)
p `seq` q = \inp -> [((v,w),inp'') | (v,inp') <- p inp
     , (w,inp'') <- q inp'] 
```

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:33:21.603

（复制自 Don 对上一个问题的回答）

* * *

撇号只是名称的一部分。它是 Haskell 中采用的命名约定（习语）。

Haskell 中的约定是，就像在数学中一样，变量名称上的撇号表示与先前变量有某种关联或相似的变量。

一个例子：

```
let x  = 1
    x' = x * 2
in x' 
```

`x'`与 相关`x`，我们用撇号表示。

# javascript - 具有“持久性令牌”功能的 Node.js 身份验证库

> ID：11199758
> 
> 赞同：6
> 
> 时间：2012-06-26T01:47:26.113
> 
> 标签：javascript, node.js, authentication

我有[node 护照](https://github.com/jaredhanson/passport)的工作知识，但它没有以下内容：

*   生成“持久性令牌”（例如在[authlogic/session/session.rb#L35](https://github.com/binarylogic/authlogic/blob/b91683d71fbeb5c9dabe1b675982b03792ac4a20/lib/authlogic/session/session.rb#L35)
*   为密码重置生成易腐烂的令牌
*   记住我功能
*   在某些模型类等上管理这些属性以进行登录/注销等。

Node.js 社区中是否有任何库解决了这个问题？[如果有任何东西像Devise for Rails](https://github.com/plataformatec/devise)一样健壮（或正在变得健壮），那将是完美的，但任何解决这个令牌问题的东西都可以正常工作。

疯狂的是，很多示例都将用户存储`id`在会话中！

```
request.session['userId'] = user.get('id') 
```

那只是要求被黑客入侵。

它应该是这样的：

```
require.session['persistenceToken'] = App.User.generateRandomToken() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T06:42:22.020

我将实施一种用于密码重置的一次性密码（又名一次性令牌）策略。鉴于 Passport 的架构，这很容易成为一个单独的模块，如果发现其他人已经实现了这样的东西，我也不会感到惊讶。

记住我，持久性令牌功能也是我想要支持的东西。最好，我也希望这也是一个单独的策略，但它可能需要一些核心支持。如果事实证明是这样，那么`req.logIn`（[https://github.com/jaredhanson/passport/blob/master/lib/passport/http/request.js#L28](https://github.com/jaredhanson/passport/blob/master/lib/passport/http/request.js#L28)）中的一些额外行应该能够覆盖它。

至于在会话中存储用户 ID，我认为没有什么大的风险，因为默认情况下，在 Connect/Express 中，会话属性完全存储在后端，并通过`sid`加密 cookie 中设置的唯一性进行查找。恶意用户必须同时拥有唯一的 sid 和会话秘密才能欺骗请求。

Mozilla 使用 Passport 作为其身份验证工作的一部分，将 BrowserID 连接到其他缺乏 BrowserID 支持的提供商（请参阅[browserid-bigtent](https://github.com/mozilla/browserid-bigtent)）。鉴于他们的要求，开发人员可以确定 Passport 满足严格的安全要求。

（最终，Passport 中的会话序列化是应用程序的责任，因此如果出于安全原因需要，可以使用随机令牌代替用户 ID。显然，如果将数据直接存储在 cookie 中，则应该这样做，但我建议这样做这是最不明智的做法。）

至于管理模型上的这些属性，Passport 被设计为完全与模型/ORM 无关。我不打算改变这个事实，因为我认为这些决定最好留给应用程序（并且由于委派了这种责任，Passport 更加灵活）。也就是说，我认为其他模块还有空间独立构建在 Passport 之上以提供此功能。

综上所述，我认为 Passport 是现有 Node.js 身份验证解决方案中最强大的。您的前三个请求将大大有助于使其变得更加如此，并且它们应该很容易完成。我很乐意合作加入这些功能，所以请随时与我联系。

[最后，如果有人好奇，目前正在authinfo](https://github.com/jaredhanson/passport/tree/authinfo)分支上进行一流的 API 身份验证。在此基础上，[passport-http-oauth](https://github.com/jaredhanson/passport-http-oauth)实现了 OAuth 服务器策略，可以结合[oauthorize](https://github.com/jaredhanson/oauthorize) middlware 作为工具包来组装 OAuth 服务器。这还没有完全成熟，但是当它准备好时，它将成为 Passport 的另一个有效功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T21:39:58.717

虽然我肯定希望在 passport.js 中看到这些功能，但它们还没有。

我创建了一个简单的随机令牌生成器以与 passport.js serilizeUser() 函数一起使用，并稍微修改了 Justen 的答案以满足我的需要。基本上，唯一的区别是如果没有设置“记住”选项，只要浏览器打开，会话就会持续。

这是我的带有随机访问令牌生成器的序列化程序。我正在使用 Mongodb 和 Mongoose，但实现应该可以很好地转换为其他系统。

基本上，我得到了时间并向它附加一个随机的 16 个字符的字符串。然后，在 serializeUser() 函数中，我检查没有其他用户具有相同的令牌（令牌应该是唯一的！）。

```
User.methods.generateRandomToken = function () {
  var user = this,
      chars = "_!abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",
      token = new Date().getTime() + '_';
  for ( var x = 0; x < 16; x++ ) {
    var i = Math.floor( Math.random() * 62 );
    token += chars.charAt( i );
  }
  return token;
}; 
```

这是序列化程序：

```
passport.serializeUser( function ( user, done ) {

  var createAccessToken = function () {
    var token = user.generateRandomToken();
    app.User.findOne( { accessToken: token }, function (err, existingUser) {
      if (err) return done( err );
      if (existingUser)
        createAccessToken(); // Run the function again - the token has to be unique!
      else {
        user.set( 'accessToken', token );
        user.save( function ( err ) {
          if (err) return done( err );
          return done( null, user.get('accessToken') );
        })
      }
    });
  };

  if ( user._id ) {
    createAccessToken();
  }
}); 
```

...这是我处理“记住我”功能的中间件版本。不过，我更希望这以某种方式成为 serializeUser 函数或 passport.js 核心的一部分。

```
app.use( express.session( { secret: 'secret_key' } ) );
app.use( function (req, res, next) {
    if ( req.method == 'POST' && req.url == '/login' ) {
      if ( req.body.remember ) {
        req.session.cookie.maxAge = 30*24*60*60*1000; // Rememeber 'me' for 30 days
      } else {
        req.session.cookie.expires = false;
      }
    }
    next();
});
app.use( passport.initialize() );
app.use( passport.session() ); 
```

我希望这会有所帮助。我花了几个小时才弄清楚，我不太确定这是*最好*的方法，但它现在对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T07:30:05.357

同时，类似以下的内容就足够了。根据需要进行调整以适合您的应用程序和所需的 cookie 持续时间。检查用户名和密码是检测登录尝试的一种俗气的方法，但它与护照一起工作得很好。

```
app.use(function(req, res, next) {
    if(
            typeof(req.body.username) !== "undefined"
            && typeof(req.body.password) !== "undefined"
            ) {
        if(req.body.remember == 1) {
            req.session.cookie.maxAge = 365*24*60*60*1000;
        }
        else {
            req.session.cookie.maxAge = 24*60*60*1000;
        }
    }
    next();
}); 
```

# java - 实例变量和新线程

> ID：11199765
> 
> 赞同：1
> 
> 时间：2012-06-26T01:49:05.080
> 
> 标签：java, concurrency

为什么下面的程序输出 11 而不是 12？线程不使用相同的实例变量吗？请解释？

```
public class Tester extends Thread {

private int i;

public static void main(String[] args){
 Tester t = new Tester();
 t.run();
 System.out.print(t.i);
 t.start();
 System.out.print(t.i);

}

public void run(){ i++;}

} 
```

上面的代码编译得很好。i 在构造对象时默认为 0 值。在关系概念之前发生在线程启动之前执行的所有代码都已完成。这个概念是 - 实例变量在多个线程之间共享 - 这里有两个线程在运行 - 主线程和测试线程。所以我应该与两个线程共享？- 如果 i 是共享的并且如果在启动 Tester 线程之前保持发生之前的关系，那么递增 i 的值应该对 Tester 线程可见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T04:14:25.790

给你的新线程时间来增加变量，试试

```
public static void main(String[] args){
  Tester t = new Tester();
  t.run();
  System.out.println(t.i);
  t.start();
  try {
    Thread.sleep(1000); // 1 sec
  } catch (Exception ex) {}
  System.out.println(t.i);
} 
```

您的代码中唯一的问题是您打印该`t.i`值并且不等待之后`t.start()`，您在线程增加它之前打印该值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T04:08:54.117

如果您允许实例变量（例如将其公开或通过任何其他方式），则可以由多个线程访问实例变量。

在您的代码中会发生这种情况：`Tester`线程`t`将访问它自己的变量，您还将从主线程访问相同的变量。在您要求它打印值的那一刻，它可能会打印`Testet`线程当前所处的任何值`t`。

当主线程调用该`run`方法时，它将在主线程中执行，有效地将字段的值增加到 1（因为 0 是默认值）。之后，当您调用该方法`start`时，它将启动单独的线程，Java VM 将调用该方法`run`，然后该字段再次递增，这次从 1 增加到 2。

因此，我希望输出为 1，然后可能为 1 或可能为 2，具体取决于在您要求从主线程打印值之前线程执行的任何时间......您得到的确切结果取决于在您的机器上，在另一台计算机上，它可能是另一个故事。这取决于 CPU、操作系统、可用内存和其他因素。

正如[dash1e](https://stackoverflow.com/users/1309650/dash1e)在[他的回答](https://stackoverflow.com/a/11200698/402022)中所建议的那样，您可以在线程在后台执行`Thread.sleep(1000);`时让主线程等待。这大大增加了线程在主线程要求它打印之前更新字段值的可能性。也就是说，我想明确一点，使用等待任务完成本身并不够好......如果你愿意，你可以在一段时间内调用，你可以在其中验证是否满足某个条件，这就是所谓的[旋转](https://en.wikipedia.org/wiki/Busy_waiting)。`Tester``t``Tester``t``Thread.sleep(1000);``Thread.sleep`

您可以从主线程打印字段的值这一事实表明您可以从另一个线程访问它。这是一件好事，因为您希望您的线程以某种方式进行通信。

访问它是可以的，因为它只是一个int，而一个int不能处于无效状态，所以不需要同步访问。虽然你可能会得到一个不是最新的值，并且它会在背景上改变，所以它不是很可靠。

如果您想要一个只能由单个线程访问的值，并且每个线程都独立存在，那么请查看[ThreadLocal](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:52:45.517

我你的代码：

```
public class Tester extends Thread {

private int i;

public static void main(String[] args){
 Tester t = new Tester();
 t.run();
 System.out.print(t.i);
 t.start();
 System.out.print(t.i);

}

public void run(){ i++;}

} 
```

你调用 t.run() 和 t.start()。有2个线程正在运行`t.run()`线程和`t.start()`线程。

在该`i`变量中，您在 2 个不同步的线程之间共享。

因此，有时`i`变量的值不会在线程之间更新。您可以使用 volatile 关键字进行同步

```
private volatile int i; 
```

或者同步代码段增加值`i`

```
public void run(){ 
    synchronized(this){
        i++;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T04:41:23.213

您已经启动了线程，但还没有等待它停止。用于`t.join()`等待完成。而且，是的，您有线程同步问题，但这是另一个问题。

```
public class Tester extends Thread {

    private int i;

    public static void main(String[] args) throws InterruptedException {
        Tester t = new Tester();
        t.run();
        System.out.println(t.i);
        t.start();
        t.join();
        System.out.println(t.i);
    }

    public void run() {
        i++;
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T04:32:47.310

我一直在寻找的主要答案是在发生之前：概念详述如下：

[http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility)

所以它在文档中说 - a）在线程开始之前 - 在它之前的所有语句都已完成 b）线程执行中的所有语句都在新线程终止时完成。

遵循上述理解 - 我应该一直对新线程开始可见。这应该是 - 在任何时候，在所有系统上 - 所以当调用 start 并启动一个新线程时，它应该总是将 i 视为 1。

但是，我们打印 i 值的时间是由主线程执行的，而不是由 Tester 线程执行的。因此，即使新的 Tester 线程可能将值视为 1 并将其递增为 2 - main 中的执行也不会反映它，因为 i++ 不是原子操作。

现在假设我们尝试将 int 设为：

```
 private volatile int i; 
```

volatile 不仅保证特定变量的发生之前的关系，而且保证它之前的语句。

被执行的主线程的 println 可能在增量开始之前就被执行。所以我们可能会看到 11 被打印出来，即使是在变量 volatile 之后。使变量成为 AtomicInteger 也存在类似的情况。

调用时的 run 方法将看到增加的值：

```
System.out.println("i "+  i.incrementAndGet()); 
```

但不是主线程。*run 方法/main 方法中数据的可见性不同*。对于两个执行的线程，使用的实例变量是相同的。

# python - 安装后 IPython 不会启动

> ID：11199767
> 
> 赞同：2
> 
> 时间：2012-06-26T01:49:33.067
> 
> 标签：python, ipython

刚得到一个运行 windows vista 的全新 64 位机器，安装了 Python 2.7.3 和 IPython 0.12.1，但 IPython 似乎没有创建任何程序文件夹。

即使我从 C:\Python27\Scripts 运行 .exe 文件，终端也会闪烁片刻。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:20:23.040

这听起来像是一个常见的问题——你需要在安装 IPython 之前安装[分发。](http://pypi.python.org/pypi/distribute#installation-instructions)没有它，我们不知道如何将它添加到开始菜单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T02:04:50.567

通常当出现错误时，它会显示错误信息并退出。这就是你看到闪光的原因。

从命令行运行可执行文件，您可以检查该错误是什么。

# css - box-shadow 支持 IE7 和 IE8

> ID：11199769
> 
> 赞同：1
> 
> 时间：2012-06-26T01:49:46.040
> 
> 标签：css, internet-explorer, cross-browser

我使用以下 css 代码来帮助支持 IE7 和 IE8 中的 box-shadow：

```
 zoom: 1;
 filter: progid:DXImageTransform.Microsoft.Shadow(Color=#4a4a4a, Strength=1, Direction=0),
    progid:DXImageTransform.Microsoft.Shadow(Color=#4a4a4a, Strength=1, Direction=0),
    progid:DXImageTransform.Microsoft.Shadow(Color=#4a4a4a, Strength=1, Direction=90),
    progid:DXImageTransform.Microsoft.Shadow(Color=#4a4a4a, Strength=1, Direction=180),
    progid:DXImageTransform.Microsoft.Shadow(Color=#4a4a4a, Strength=1, Direction=270),
    progid:DXImageTransform.Microsoft.Chroma(Color='#ffffff'); 
```

但它会降低 IE 的性能。但是在做了一些谷歌搜索之后，我发现`ie-css3.htc`我认为这会比上面的代码更好。根据说明，我为我的块元素添加了一些样式：

```
 zoom: 1;
 z-index: 9999;
 position: relative;
 behavior: url(ie-css3.htc) 
```

这是我的目录结构：

```
css/
      - style.css
      - ie-css3.htc
js/
images/
ie-css3.htc
index.html 
```

我还`ie-css3.htc`根据文档将其放在我的站点根目录中。但是，这无济于事。我想我一定是做错了什么。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T01:50:56.833

确保 CSS 中 htc 文件的路径在所有情况下都是正确的：

```
 behavior: url(ie-css3.htc) 
```

应该

```
 behavior: url(/css/ie-css3.htc) 
```

# ruby-on-rails - 使用 JRuby（或 IronRuby）在 Windows 上启动 Rails 的性能？

> ID：11199772
> 
> 赞同：0
> 
> 时间：2012-06-26T01:49:54.593
> 
> 标签：ruby-on-rails, ruby, performance, jruby, ironruby

我目前正在 Windows 笔记本电脑上开发 Rails，但运行速度非常慢。尝试在 JRuby 或 IronRuby 上运行 rails 以提高性能是否值得？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T02:04:19.277

如果您使用的是 ruby​​ 1.9.2 或 1.9.3，请不要担心，它和其他版本一样快，甚至更快。另请注意，Java 应用程序往往会使用大量内存。

问题是，在开发中，您的应用程序会在每个请求中重新加载，而在生产中，它将仅在服务器启动时加载。

要对其进行测试，请尝试在生产环境中运行您的应用程序，也许您应该使用其他服务器，例如[Thin](http://code.macournoyer.com/thin/)。

```
thin start -e production 
```

另外，如果这没有帮助。也许您应该考虑缓存、创建新索引甚至更改为更好的数据库（也许您正在使用 sqlite）。但我怀疑更改为 Jruby 或 IronRuby 是否会对您有太大帮助。

# sql-server-2008 - 不遵守默认 nvarchar 参数

> ID：11199775
> 
> 赞同：-1
> 
> 时间：2012-06-26T01:50:09.577
> 
> 标签：sql-server-2008, tsql, stored-procedures, optional-parameters

我在 SQL Server 2008 R2 中有一个存储过程，声明了以下参数值：

```
@UN nvarchar(30),
@SN nvarchar(8),
@GG uniqueidentifier,
@Ss irnapp.SymbolTableType READONLY,
@SD date,
@ED date,
@IR nvarchar(1),
@ID nvarchar(1),
@NR int = NULL,
@GP nvarchar(1) = N'N' 
```

我的意图是，如果未提供 @GP 值，则应为其赋予 N'N' 值。但是，仅当我为@GP 显式传入 N'N' 时，该过程才返回预期结果。

我尝试搜索具有默认参数值的 SQL 存储过程的示例，但我发现的 nvarchar 的唯一示例是默认值 NULL，这对我的应用程序不可行。

有人知道以上是否是合法的默认参数声明吗？

***更新：***

感谢亚伦的快速回复。我希望这将是一个简单的问题，因为代码很长。也就是说，这里是：

```
 BEGIN TRY
    DECLARE @GI int;
    EXEC irn.GetGroupID @UN, @SN, @GG, @GI OUT;

    DECLARE @CUID int;
    IF @GP = N'Y'       
    BEGIN
        SELECT @CUID = UserID
            FROM Users
            WHERE Uname = @UN
                AND SNum = @SN;
    END;    

    DECLARE @NoteIDs irn.NoteIDTableType;

    INSERT INTO @NIDs (NO, NID)
        SELECT *
            FROM GetNIDs(@GI, @Ss, @SD, @ED, @IR, @ID, @NR, @GP, @CUID);

    EXEC GetNsByNIDs @NIDs, N'N';
END TRY
BEGIN CATCH
    EXEC irn.CreateProcedureErrorLog 
    EXEC irn.RaiseProcedureError 
END CATCH;

ALTER FUNCTION [i].[GetNIDs] (
    @GID int,
    @Ss SymbolTableType READONLY,
    @SD date,
    @ED date,
    @IR nvarchar(1),
    @ID nvarchar(1),
    @NR int,
    @GP nvarchar(1) = N'N',
    @CUID int = NULL)
RETURNS @TopOrderedMatchingNote TABLE (
    NO int NOT NULL PRIMARY KEY,
    NID    int NOT NULL UNIQUE)
AS
BEGIN

    INSERT INTO @MN (NID)
        SELECT NID
            FROM N
            WHERE GID = @GID
                AND ND >= @FDate
                AND ND <= @TDate
                AND IP = @GP
                AND ((IP = N'Y' AND CUID = @CUID)                           OR (IP = N'N'))
                AND IsDeleted = CASE @IncludeDeleted
                                    WHEN N'N' THEN N'N'
                                    ELSE IsDeleted
                                END;
END; 
```

……剪……

希望这有帮助，再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:00:37.340

是的，您的默认参数声明示例是有效且合法的。这是一个快速复制：

```
USE tempdb;
GO
CREATE PROCEDURE dbo.splunge
   @GP nvarchar(1) = N'N'
AS
BEGIN
    SET NOCOUNT ON;

    SELECT COALESCE(@GP, N'Y');
END
GO

EXEC dbo.splunge;
EXEC dbo.splunge @GP = N'Y'; 
```

结果：

```
----
N

----
Y 
```

如果您在使其正常工作时遇到问题，则需要发布更多代码来演示这意味着什么。

# http - 如何将本地 ipv6 地址绑定到我的 node.js 程序？

> ID：11199776
> 
> 赞同：3
> 
> 时间：2012-06-26T01:50:15.023
> 
> 标签：http, node.js, request, ipv6

我刚刚在nodejs中创建了这个简单的程序，但我无法将它绑定到我的网卡的ipv6地址。

我在 API 文档中阅读了以下内容

**localAddress：为网络连接绑定的本地接口。**

```
var http = require('http');

var options = {
  hostname: 'www.whatismyipv6.com',
  localAddress: '2a01:xxxx:xxxx:xxxx::2' //a real ipv6 address here
};

var req = http.request(options, function(res) {
  res.on('data', function (chunk) {
    console.log(chunk.toString());
  });
});

req.on('error', function(e) {
  console.log('ERROR: ' + e.message);
});

req.end(); 
```

但是当我执行程序时，我得到了这个。记下 ipv4 地址。

```
<head>
<title>WhatIsMyIPv6? (IPv4: xx.xx.xxx.xxx)</title>
<meta name="bitly-verification" content="984886d337a6"/>
</head> 
```

看起来 nodejs 忽略了 localAddress 并直接绑定到 ipv4 地址。

```
# node --version
v0.8.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-20T05:42:07.540

可以强制节点使用 ipv6 连接，至少它适用于节点 v0.12.7。您的选项将如下所示：

```
var options = {
  hostname: 'www.whatismyipv6.com',
  localAddress: '2a01:xxxx:xxxx:xxxx::2', //a real ipv6 address here
  family: 6
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T13:44:51.727

不幸的是，您在这台和其他任何同时发布了 A 和 AAAA RR 的主机上都不走运。

**http.js**不会将*addressType* ( address family ) 传递到堆栈中，因此在调用的底部，**dns.js中的****lookup()**函数只是发出一个通用的**getaddrinfo()**调用并获取第一个返回的结果，即本例中目标主机的 IPv4 地址的 A RR。

 ****如果您检查**dns.js**，您可以看到**lookup()**只是在未指定系列时从结果中弹出地址 [0]：

```
function onanswer(addresses) {
    if (addresses) {
      if (family) {
        callback(null, addresses[0], family);
      } else {
        callback(null, addresses[0], addresses[0].indexOf(':') >= 0 ? 6 : 4);
      }
    } else {
      callback(errnoException(process._errno, 'getaddrinfo'));
    }
  } 
```

如您所见，它确实努力为该结果设置家庭；在您的示例中，第一个结果被标识为 IPv4 系列，并且随着它的渗透，堆栈绑定相应地完成，覆盖您的*localAddress*规范。

您可以通过将目标主机更改为 ipv6.whatismyipv6.com 来看到这一点；神奇的是，您的 localhost 的 IPv6 地址现在已按照您的需要绑定。****

# compiler-construction - 野牛中的语义类型检查分析

> ID：11199778
> 
> 赞同：3
> 
> 时间：2012-06-26T01:50:23.737
> 
> 标签：compiler-construction, bison, yacc, semantic-analysis

我一直试图到处寻找例子，但它是徒劳的。

我正在尝试编写一个基本的 Ruby 解释器。为此，我编写了一个 flex 词法文件，其中包含标记识别语句和一个语法文件。

我希望我的语法包含语义类型检查。

我的语法文件包含，例如：

```
arg : arg '+' arg 
```

这应该是整数和浮点数的有效规则。

根据我读过的内容，我可以为 arg 等非终端指定类型，如下所示：

```
%type <intval> arg 
```

其中“intval”在类型联合中，对应于 int C 类型。

但这仅适用于整数，我不确定如何使规则对浮点数有效。我想过有两种不同的规则，一种用于整数，另一种用于浮点数，例如：

```
argint : argint '+' argint
argfloat : argfloat '+' argfloat 
```

但我确信有一种更好的方法可以做到这一点，因为这种暴行需要我有规则来允许浮点数和整数之间的加法。

我发现的所有示例都只有一种类型（通常是类似计算器的示例中的整数）。

如何指定诸如加法之类的规则可以将整数和浮点数作为参数？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T02:03:17.230

这不是您希望的答案。我认为您没有看到您想要的示例的原因是在语法文件（.y）中强制执行输入规则是不切实际的；相反，开发人员在程序 .c 或 .cpp 代码中完成此操作。通常，无论如何您都会对已解析的输入进行一些分析，因此在执行语义规则时执行语义规则是一个副产品。

顺便说一句，鉴于您在问题中重现的语法片段，我不太了解您是如何解析表达式的。

这就是为什么我声称这是不切实际的。(1) 您的类型信息必须渗透到语法的所有非终结符中。(2) 更糟糕的是，它必须反映在变量名中。

考虑这个解析可以使用标识符、数字常量和四个桌面计算器运算符的简单赋值语句的玩具示例。NUMBER 标记可以是像 42 这样的整数或像 3.14 这样的浮点数。假设 IDENTIFIER 是一个字母 AZ。

```
%token IDENTIFIER NUMBER

%%

stmt : IDENTIFIER '=' expr
     ;

expr : expr '+' term
     | expr '-' term
     | term
     ;

term : term '*' factor
     | term '/' factor
     | factor
     ;

factor : '(' expr ')'
       | '-' factor
       | NUMBER
       | IDENTIFIER
       ; 
```

现在让我们尝试引入打字规则。我们将 NUMBER 令牌分为 FLT_NUMBER 和 INT_NUMBER。我们的`expr`, `term`, 和`factor`非终结符也分为两部分：

```
%token IDENTIFIER FLT_NUMBER INT_NUMBER

stmt : IDENTIFIER '=' int_expr
     | IDENTIFIER '=' flt_expr
     ;

int_expr : int_expr '+' int_term
         | int_expr '-' int_term
         | int_term
         ;

flt_expr : flt_expr '+' flt_term
         | flt_expr '-' flt_term
         | flt_term
         ;

int_term : int_term '*' int_factor
         | int_term '/' int_factor
         | int_factor
         ;

flt_term : flt_term '*' flt_factor
         | flt_term '/' flt_factor
         | flt_factor
         ;

int_factor : '(' int_expr ')'
           | '-' int_factor
           | INT_NUMBER
           | int_identifier
           ;

flt_factor : '(' flt_expr ')'
           | '-' flt_factor
           | FLT_NUMBER
           | flt_identifier
           ;

int_identifier : IDENTIFIER ;

flt_identifier : IDENTIFIER ; 
```

由于我们的语法在这一点上存在冲突：解析器无法判断是将 IDENTIFIER 识别为 a`int_identifier`还是 a `flt_identifier`。所以它不知道是减少`A = B`as`IDENTIFIER = int_expr`还是`IDENTIFIER = flt_expr`。

（这就是我对 Ruby 的理解有点软的地方：） Ruby（像大多数语言一样）没有提供*在词汇级别*确定标识符的数字类型的方法。将此与老式 BASIC 进行对比，其中 A 表示数字，A$ 表示字符串。换句话说，如果你发明了一种语言，例如，A# 表示整数，A@ 表示浮点数，那么你可以做到这一点。

如果您想允许有限的混合类型表达式，例如 an `int_term '*' flt_factor`，那么您的语法会变得更加复杂。

可能有一些方法可以解决这些问题。使用 yacc/bison 以外的技术构建的解析器可能会更容易。至少，也许我的草图会给你一些进一步追求的想法。

# c++ - 带有内部引用的初始化器列表

> ID：11199779
> 
> 赞同：0
> 
> 时间：2012-06-26T01:50:28.637
> 
> 标签：c++, initialization-list

我想使用初始化器列表进行对象初始化以简化对象管理，但问题是对象相互引用。

```
//B::B(A &a) //The only available constructor for B

class AB
{
    A m_a;
    B m_b;

    AB()
        : m_a()
        , m_b(m_a)

    ...
}; 
```

这是标准允许的吗？据我了解，应该是，鉴于类中的成员声明是 A，然后是 B，初始化列表中的顺序无关紧要，因为它们将由它们在类中的物理顺序进行初始化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:39:16.950

> 这是标准允许的吗？据我了解，应该是，鉴于类中的成员声明是 A，然后是 B，初始化列表中的顺序无关紧要，因为它们将由它们在类中的物理顺序进行初始化。

是的，初始化的顺序就是类中成员属性的声明顺序。此外，根据`B`构造函数的作用，将引用传递给尚未初始化的对象是正确的（尽管接近边缘），只要引用或指针被存储，但对象不曾用过。

# ruby-on-rails-3 - 处理一个具有多个入口点的控制器的最佳做法是什么？

> ID：11199780
> 
> 赞同：1
> 
> 时间：2012-06-26T01:50:37.730
> 
> 标签：ruby-on-rails-3

用户来我的应用程序输入他们拥有的卡片。卡片按问题组织，这样

`Issue has_many Cards`

所以我们的基本情况（1）是当用户登录并更新他的收藏时，他访问

`/issues/{id}`

哪个命中`issues#show`呈现`issues\show.haml`。在此页面上，他们从他们的收藏中输入或删除卡片。该页面有各种排序和按钮等......

我想公开用户收藏（2），以便其他人可以访问

`/{username}/issues/{id}`

这个页面的内容会少得多，并且会显示与登录用户相关的其他信息，而不是卡片的所有者。显而易见的选择是嵌套`:issues`并处理所有事情。但已经在处理上述第一种情况。`:users``IssuesController#show``IssuesController#show`

一种实现是：

```
class IssuesController
    def show
         if(params[:user_id])
              #do something
         elsif
              #do and render something else
         end
    end
end 
```

……但这看起来很可怕。此外，这是我们将在应用程序中使用的概念，我不想像这样污染所有控制器。

处理这种情况的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:11:48.037

一开始`/issues/:id`应该由`IssuesController#show`不处理`#index`

您可以选择路由`/:user_id/issues/:id`到您喜欢的任何控制器和操作。不一定有最佳实践，所以选择你满意的东西。我会把它路由到类似的东西，`IssuesController#show_for_user`所以它很好而且很清楚。

# javascript - 当用户在 div 之外单击时调用函数

> ID：11199781
> 
> 赞同：4
> 
> 时间：2012-06-26T01:50:40.810
> 
> 标签：javascript, jquery, html, css

当用户在 div 之外单击时，如何调用函数？

该函数将隐藏页面上的 div 和其他一些元素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T01:56:24.493

一个简单的例子：

***HTML***

```
<div id="target">
    Your div
    <span>A span</span>
    <div>
        Another child div
    </div>
</div> 
```

***jQuery***

```
function hideDiv(e) {
    if (!$(e.target).is('#target') && !$(e.target).parents().is('#target')) {
        $('#target').hide();
    }
}
$(document).on('click', function(e) {
    hideDiv(e);
}); 
```

**[工作样本](http://jsfiddle.net/QStkd/502/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T01:52:14.417

签出 JQuery 外部事件插件：

[http://benalman.com/projects/jquery-outside-events-plugin/](http://benalman.com/projects/jquery-outside-events-plugin/)

# php - 如何使用 AJAX 分解大型 MySQL 查询和缓存数据？

> ID：11199783
> 
> 赞同：0
> 
> 时间：2012-06-26T01:51:01.643
> 
> 标签：php, mysql, ajax, timeout

我正在使用[TCPDF](http://www.tcpdf.org/)即时创建 PDF 文档。生成这些 PDF 的一些查询包含超过 1,000 条记录，并且我的服务器因更大的查询而超时（内部服务器错误）。我正在使用 PHP 和 MySQL。

如何使用 AJAX 将大型 MySQL 查询解析为较小的块、缓存数据并重新组合结果，以防止服务器超时？

这是我当前的代码：

```
require_once('../../libraries/tcpdf/tcpdf.php');

$pdf = new TCPDF();

$prows = fetch_data($id);

$filename = '../../pdf_template.php';

foreach ($prows AS $row) {

    $pdf->AddPage('P', 'Letter'); 
    ob_start(); 

    require($filename);

    $html .= ob_get_contents();
    ob_end_clean();

    $pdf->writeHTML($html, true, false, true, false, '')

}

$pdf->Output('documents.pdf', 'D'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:04:01.577

*如果每次*调用时都必须生成数据，您可以将查询分成 100 行的块，将数据缓存在文件系统上（或者，更好的是，在 APC/WinCache/XCache/MemCache 中）然后在最终的 AJAX 调用 (Finalquery=true) 上，加载缓存、生成 PDF 并清除缓存。

我假设您无法更改脚本的最大运行时间，例如`<?php set_time_limit(0);`

流程是这样的：

*   为查询操作生成唯一 ID
*   在客户端，通过对 php 脚本的初始调用（选择计数...等）获取最大行数。
*   然后，将其除以 10、100、1000，无论您想将其分成多少个请求。
*   为每个具有唯一 ID 的块（第 0、100、100,200 行）运行 AJAX 请求。
*   在服务器端，您选择该行数/选择的行，并将其放入某处的存储中。我熟悉 WinCache（我一直在 Windows 上开发 PHP ......），所以将它添加到用户缓存中：`wincache_ucache_add( $uniqueId . '.chunk' . $chunkNumber, $rows);`
*   同时，在客户端，跟踪所有 AJAX 请求。当每一个都完成后，调用生成 PDF 函数服务器端。给出块的数量和唯一的 id。
*   在服务器端，从缓存中获取所有内容。`$rows = array_merge( wincache_ucache_get($uniqueId . '.chunk'. $chunkNumber1), wincache_ucache_get($uniqueId . '.chunk'. $chunkNumber2) );`
*   清除缓存：`wincache_ucache_clear();`
*   生成 PDF 并返回。

请注意，您实际上应该只缓存查询结果，无论是手动还是通过抽象层或 ORM 中的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:55:27.457

尝试像 PEAR cache_lite 这样的简单缓存。在缓慢或关闭期间，您可以创建一个实用程序来运行和缓存您需要的所有记录。然后，当用户请求 PDF 时，您可以访问您的缓存数据，而无需访问您的数据库。此外，您可以只使用表上的时间戳字段并请求自缓存数据以来已更改的数据库记录，这将显着降低您必须从数据库中实时检索的当前记录数。

```
<?php
include 'Cache/Lite/Output.php';
$options = array(
    'cacheDir' => '/tmp/cache/',
    'lifeTime' => 3600,
    'pearErrorMode' => CACHE_LITE_ERROR_DIE,
    'automaticSerialization' => true
);

$cache = new Cache_Lite_Output($options);
if( $data_array = $cache->get('some_data_id') ) {
    $prows = $data_array;
} else {
    $prows = fetch_data($id);
    $cache->save($prows);
}

print_r($prows);

?> 
```

# git - 如何一次在 Git 中获取和结帐？

> ID：11199784
> 
> 赞同：1
> 
> 时间：2012-06-26T01:51:08.690
> 
> 标签：git, git-checkout, git-fetch

我使用 git 版本 1.7.7.5。

是否可以使用一个 git 命令执行以下操作？

```
git fetch git@github.com:someone/repo.git someones_branch
git checkout FETCH_HEAD -b my_testing_branch 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:22:55.913

注意可以设置 my_testing_branch 的上游分支

```
git branch --set-upstream my_testing_branch someone/someone_branch 
```

（这里使用名为“某人”的遥控器）

只需 git pull 就可以了（但这仍然需要：`git checkout my_testing_branch`+ `git pull`）

要回答您的问题，一种方法是定义一个[git 别名](http://www.mediawiki.org/wiki/Git/aliases)

```
git config --global alias.fetch-github '"!f() { git fetch git@github.com:$1/$2.git $3 ; git checkout FETCH_HEAD -b $4 }; f"' 
```

你会像这样使用它：

```
git fetch-github someone repo someone_branch my_testing_branch 
```

# iphone - UITableView 单元格中的图像太大

> ID：11199785
> 
> 赞同：4
> 
> 时间：2012-06-26T01:51:34.210
> 
> 标签：iphone, xcode, uitableview, uiimageview

我在用：

```
NSString *thearticleImage = entry.articleImage;
    NSRegularExpression *expression = [NSRegularExpression regularExpressionWithPattern:@"(?i)\\b((?:[a-z][\\w-]+:(?:/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}/)(?:[^\\s()<>]+|\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\))+(?:\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\".,<>?«»“”‘’]))" options:NSRegularExpressionCaseInsensitive error:NULL];
    NSString *someString = thearticleImage;
    self.theurl = [someString substringWithRange:[expression rangeOfFirstMatchInString:someString options:NSMatchingCompleted range:NSMakeRange(0, [someString length])]];
    NSURL *picimage = [NSURL URLWithString:theurl];

    NSData * urlData = [NSData dataWithContentsOfURL: picimage];
    UIImage * imageweb = [UIImage imageWithData: urlData];

    cell.imageView.frame = CGRectMake(0, 0, 70, 70);
    cell.imageView.image = imageweb; 
```

问题是这占据了整个单元格，我不确定为什么它不只是在左侧。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T06:07:14.963

我的表格单元格图像遇到了类似的问题。我使用以下方法来缩放图像：

```
UIImage *imageOne = [UIImage imageNamed:[imagesArray objectAtIndex:indexPath.row]];

cell.imageView.image = [UIImage imageWithCGImage:imageOne.CGImage scale:imageOne.size.width/40 orientation:imageOne.imageOrientation]; 
```

**注意：**将上面的“40”视为您希望图像宽多少像素的表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T02:44:41.887

由于您没有说明 imageview 的创建位置（代码或 IB），我的猜测是您在 IB 中为该特定单元格创建了一个 ImageView，该单元格胜过您在代码中设置的框架。

# c++ - 需要一些帮助阅读文件

> ID：11199790
> 
> 赞同：0
> 
> 时间：2012-06-26T01:52:45.273
> 
> 标签：c++, file

我需要读取一个文件（不是二进制模式）。我已经有一个知道文件大小的代码，我正在搜索的是如何通过=（文件大小）-8276 字节读取文件。这些已读取的字节将存储在一个变量中，我需要将其写入。

文件的大小存储在一个无符号长变量中。有谁能够帮我？

我使用 Borland C++

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:20:36.357

尝试这个。我接触 Borland 已经有一段时间了，所以语法可能有点不对劲。考虑它是伪代码，但你明白了这个概念。

```
// assuming you've already created the file handle.
HANDLE fileHandle;

unsigned long fileSize;
unsigned long numBytesRead;
bool result;

// get the file size
fileSize = GetFileSize(theFile, NULL);

// check to see if filesize is greater than 8276 bytes.
// if so, read (fileSize - 8276)

if(fileSize >= 8276)
{
result = ReadFile(fileHandle, &objectYouAreReadingItTo, (fileSize - 8276), numBytesRead);
}
else
{
  //...handle when fileSize is less than 8276 bytes...
} 
```

# java - 为什么是列表 List 的子类型，但不是 List 的子类型? Possible Duplicate: Why is List <number>not a 问问题 问问题 2012-06-26T01:52:45.297 5143 次 This question shows research effort; it is useful and clear 4 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Possible Duplicate: Why is List <number>not a sub-type of List? Isn't String a subtype of Object in Java? Then, how come I cannot pass an object of type List <string>into a function that accepts List as a parameter? I can, though, pass such an object into a function that accepts List as a parameter. You are confusing the parameterized type with the concrete type. Given List<t>, T is the parameterized type. List <string>isn't type related to List in any way, not anymore than List <string>is related to List<number>. The type is List<string>, the entire signature is the type. But like with everything, there are exceptions; these are called Wildcard Parameterized Types. List is what is called an Unbounded Wildcard Parameterized Type, it works pretty much just like a raw type, they are semantically the same, but causes more compiler warnings about unsafe casting. List is a bounded Wildcard Parameterized Type, and would be a type that would allow you to put anything that extends Object but since every class in Java extends Object it isn't semantically any different than the first two options. Now they would all function the same, but they would fail instanceof tests, they are not the same types. In other words: public void myfunction(final List list) {} would only accept the type of List, List isn't related by type to List or List, even though they all semantically function the same. The type is either List or List or List<string>, the inheritance chain in the <> is not considered when the type of the List <t>is concerned, until you get into Wild Card Parameterized Types Here are examples: Collection coll = new ArrayList<string>(); List list = new ArrayList<long>(); You can't instantiate a new Collection only assign a concrete implementation to it. List is the entire type. Generics in Java aren't anything like the implementation in C++, other than the confusing name. javagenerics 4 5 回答 5 This answer is useful 15 Isn't String a subtype of Object in Java? Yes it is, but that doesn't make List <string>a subtype of List. Consider this example: List <string>l1 = new ArrayList<string>(); List l2 = l1; // This is a compilation error in real Java l2.add(new Integer(42)); String oops = l1.get(0); If (hypothetically) List <string>was subtype of List, then you'd end up assigning a Integer to a String variable in the last statement. In short, we would have broken static type safety. I can, though, pass such an object into a function that accepts List as a parameter. Yes, that is true. But then you are dealing with raw types and you have to use explicit type casts when pulling objects out of the list. For example, the above would need to be rewritten as follows: List <string>l1 = new ArrayList<string>(); List l2 = l1; l2.add(new Integer(42)); String oops = (String) l1.get(0); Note that the type-cast means we've had to replace static type-safety with runtime type-safety. (And, of course, in this case the typecast will fail at runtime because the instance has the wrong type.) 于 2012-06-26T01:58:33.440 回答 This answer is useful 3 In Java, List ~~is not a subtype of List <t>when S is a subtype of T. This rule provides type safety. Let's say we allow a List <string>to be a subtype of List. Consider the following example: public void foo(List objects) { objects.add(new Integer(42)); } List <string>strings = new ArrayList<string>(); strings.add("my string"); foo(strings); // this is not allow in java // now strings has a string and an integer! // what would happen if we do the following...?? String myString = strings.get(1); So, forcing this provides type safety but it also has a drawback, it's less flexible. Consider the following example: class MyCollection <t>{ public void addAll(Collection <t>otherCollection) { ... } } Here you have a collection of T's, you want to add all items from another collection. You can't call this method with a Collection ~~for an S subtype of T. Ideally, this is ok because you are only adding elements into your collection, you are not modifying the parameter collection. To fix this, Java provides what they call "wildcards". Wildcards are a way of providing covariance/contravariance. Now consider the following using wildcards: class MyCollection <t>{ // Now we allow all types S that are a subtype of T public void addAll(Collection otherCollection) { ... otherCollection.add(new S()); // ERROR! not allowed (Here S is a subtype of T) } } Now, with wildcards we allow covariance in the type T and we block operations that are not type safe (for example adding an item into the collection). This way we get flexibility and type safety. 于 2012-06-26T01:57:53.130 回答 This answer is useful 3 您将参数化类型与具体类型混淆了。 给定List<t>,T是参数化类型。 List<string>与 type 没有List任何关系，与 . 没有任何List<string>关系List<number>。type是List<string>，整个签名是type。但就像所有事情一样，也有例外。这些被称为Wildcard Parameterized Types。 List就是所谓的无界通配符参数化类型，它的工作方式与原始类型非常相似，它们在语义上是相同的，但会导致更多关于不安全强制转换的编译器警告。 List是一个有界通配符参数化类型，并且将是一种允许您放置任何内容的类型，extends Object但由于 Java 中的每个类在extends Object语义上都与前两个选项没有任何不同。 现在它们的功能都相同，但是它们会instanceof通过测试，它们不是相同的类型。 换句话说： public void myfunction(final List list) {} 只会接受typeof List,List与typeto Listor无关List，即使它们在语义上都具有相同的功能。 typeisList或Listor ，当涉及到的类型时，不考虑List<string>中的继承链，直到您进入Wild Card Parameterized Types<>List <t>以下是示例： Collection coll = new ArrayList<string>(); List list = new ArrayList<long>(); 你不能实例化一个new Collection只分配一个具体的实现给它。 List是整个类型。 Java 中的泛型与 C++ 中的实现完全不同，除了令人困惑的名称。 于 2012-06-26T01:54:07.840 回答 This answer is useful 0 String is a subtype of Object, yes, but that does not mean that List is a subtype of List. That's just the way Java works. You can read more here. 于 2012-06-26T01:56:39.440 回答 This answer is useful 0 Besides everything said above, to allow what you want, you need to explicitly declare the parameter as List (it means, accepts anything that is subclass of T including T), in this case, List should work but List is limited to Object-templated lists 于 2012-06-26T02:05:09.247 回答 Related 1 html - 如何使用 Twitter Bootstrap 使网站适合移动设备？ 2 ruby - Rails Logger -Rails logrotate 自动 5 jquery - jquery 下拉列表值设置为 0 1 ajax - 使用 ajax 进行 Ajax 上传。XMLHttpRequest 无法加载错误 1 ruby - Lib Xml Ruby:Error `parse': undefined method `read' for "file.xml":String (NoMethodError) 2 qt - 如何启用禁用的按钮 0 jquery-mobile - jQuery Mobile 动态内容和浏览器历史 2 sql - SQL：在时间范围内跟踪 MAX 值的变化 1 c# - Visual Studio 2010 表单设计错误 1 asp.net - 谷歌地图使用多边形突出显示有边界的国家 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11199791
> 
> 赞同：4
> 
> 时间：
> 
> 标签：java, generics

> **Possible Duplicate:**
> [Why is List<Number> not a sub-type of List<Object>?](https://stackoverflow.com/questions/1240316/why-is-listnumber-not-a-sub-type-of-listobject)

Isn't `String` a subtype of `Object` in Java?

Then, how come I cannot pass an object of type `List<String>` into a function that accepts `List<Object>` as a parameter? I can, though, pass such an object into a function that accepts `List` as a parameter.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-26T01:58:33.440

> Isn't String a subtype of Object in Java?

Yes it is, but that doesn't make `List<String>` a subtype of `List<Object>`.

Consider this example:

```
 List<String> l1 = new ArrayList<String>();
    List<Object> l2 = l1;  // This is a compilation error in real Java
    l2.add(new Integer(42));
    String oops = l1.get(0); 
```

If (hypothetically) `List<String>` was subtype of `List<Object>`, then you'd end up assigning a `Integer` to a `String` variable in the last statement. In short, we would have broken static type safety.

* * *

> I can, though, pass such an object into a function that accepts List as a parameter.

Yes, that is true. But then you are dealing with raw types and you have to use explicit type casts when pulling objects out of the list. For example, the above would need to be rewritten as follows:

```
 List<String> l1 = new ArrayList<String>();
    List l2 = l1;
    l2.add(new Integer(42));
    String oops = (String) l1.get(0); 
```

Note that the type-cast means we've had to replace static type-safety with runtime type-safety. (And, of course, in this case the typecast will fail at runtime because the instance has the wrong type.)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T01:57:53.130

In Java, `List<S>` **is not** a subtype of `List<T>` when `S` is a subtype of `T`. This rule provides type safety.

Let's say we allow a `List<String>` to be a subtype of `List<Object>`. Consider the following example:

```
public void foo(List<Object> objects) {
    objects.add(new Integer(42));
}

List<String> strings = new ArrayList<String>();
strings.add("my string");
foo(strings); // this is not allow in java
// now strings has a string and an integer!
// what would happen if we do the following...??
String myString = strings.get(1); 
```

So, forcing this provides type safety but it also has a drawback, it's less flexible. Consider the following example:

```
class MyCollection<T> {
    public void addAll(Collection<T> otherCollection) {
        ...
    }
} 
```

Here you have a collection of `T`'s, you want to add all items from another collection. You can't call this method with a `Collection<S>` for an `S` subtype of `T`. Ideally, this is ok because you are only adding elements into your collection, you are not modifying the parameter collection.

To fix this, Java provides what they call "wildcards". Wildcards are a way of providing covariance/contravariance. Now consider the following using wildcards:

```
class MyCollection<T> {
     // Now we allow all types S that are a subtype of T
     public void addAll(Collection<? extends T> otherCollection) {
         ...

         otherCollection.add(new S()); // ERROR! not allowed (Here S is a subtype of T)
     }
} 
```

Now, with wildcards we allow covariance in the type T and we block operations that are not type safe (for example adding an item into the collection). This way we get flexibility and type safety.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T01:54:07.840

### 您将参数化类型与具体类型混淆了。

给定`List<T>`,`T`是参数化类型。

`List<String>`与 type 没有`List<Object>`任何关系，与 . 没有任何`List<String>`关系`List<Number>`。`type`是`List<String>`，整个*签名*是`type`。但就像所有事情一样，也有例外。这些被称为`Wildcard Parameterized Types`。

`List<?>`就是所谓的[无界通配符参数化类型](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#FAQ303)，它的工作方式与原始类型非常相似，它们在语义上是相同的，但会导致更多关于不安全强制转换的编译器警告。

`List<? extends Object>`是一个有界通配符参数化类型，并且将是一种允许您放置任何内容的类型，`extends Object`但由于 Java 中的每个类在`extends Object`语义上都与前两个选项没有任何不同。

现在它们的功能都相同，但是它们会`instanceof`通过测试，它们**不是**相同的类型。

换句话说：

```
public void myfunction(final List<Object> list) {} 
```

只会接受`type`of `List<Object>`,`List`与`type`to `List<Object>`or无关`List<?>`，即使它们在语义上都具有相同的功能。

`type`is`List`或`List<Object>`or ，当涉及到的类型时，不考虑`List<String>`中的继承链，直到您进入[Wild Card Parameterized Types](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#Topic4)`<>``List<T>`

以下是示例：

```
Collection<?> coll = new ArrayList<String>(); 
List<? extends Number> list = new ArrayList<Long>(); 
```

你不能实例化一个`new Collection<?>`只分配一个具体的实现给它。

`List<Object>`是整个类型。

Java 中的泛型与 C++ 中的实现完全不同，除了令人困惑的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T01:56:39.440

`String` is a subtype of `Object`, yes, but that does not mean that List is a subtype of List. That's just the way Java works. You can read more [here](http://docs.oracle.com/javase/tutorial/java/generics/inheritance.html).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T02:05:09.247

Besides everything said above, to allow what you want, you need to explicitly declare the parameter as `List<? extends T>` (it means, accepts anything that is subclass of T including T), in this case, `List<? extends Object>` should work but `List<Object>` is limited to Object-templated lists</long></string></t></string></string></number></string></string></t></t>~~</t></t></string></string></string></t>~~</string></string></string></string></string></string></long></string></t></string></string></number></string></string></t></string></number></number>

# ios - 在 iOS 中创建“性能”输出栏 - Photoshop/编程相互作用

> ID：11199794
> 
> 赞同：0
> 
> 时间：2012-06-26T01:53:14.423
> 
> 标签：ios

我和我的合作伙伴正在尝试找出如何最好地为我们的一款移动考试准备应用程序创建可缩放的彩色性能条。目标是创建一个水平条，使用 Photoshop 或类似工具以图形方式表示 0 - 100% 的比例。我们已经聘请了一位专业的图形设计师，但我们仍然束手无策，试图弄清楚如何使图形在实际应用程序中真正“填满标准”。

（我还不能发布图片，但你可以在这里看到图片的链接）： http: [//www.productionplanningpro.com/wp-content/uploads/2012/06/Screen-Shot-2012-06-25 -at-9.47.24-PM.png](http://www.productionplanningpro.com/wp-content/uploads/2012/06/Screen-Shot-2012-06-25-at-9.47.24-PM.png)

当条形图达到一定百分比时，它会适当地将颜色从红色变为绿色。我正试图弄清楚如何在不交给他 100 个文件的情况下将它交给我的承包商，每个文件显示的栏多出 1%（即便如此，我也不是图形艺术家，所以这一切都在我的头上） . 我已经做了尽可能多的研究，并且我已经看到了花哨的 iOS 图形 API——我们只是想填补这两个栏。

任何见解或帮助都非常感谢！谢谢！调音

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T01:59:38.213

这个问题有很多解决方案。我确信有一种方法可以以编程方式用该阴影填充该区域，而且我也确信迟早会有人提出掩蔽解决方案。

不过，最快和最简单的方法是让您的艺术家简单地创建一次红色填充条，并让它填充整个空间（即以 100% 绘制）。然后，确保在条形“外部”的图形中，红色条应位于的空间是 Alpha 通道。

当你真正开始编码时，将红色条放在你正在绘制到屏幕上的所有对象的最底部。UI 的其余部分应该完全隐藏它。然后随着进度从 0% 移动到 100%，您将条形缓慢向右移动，填充空间（并通过“条形支架”中的 alpha 孔显示。

快速，简单，以前做过很多次。屏蔽也可以，但在您的情况下似乎有点矫枉过正（我在 iOS 上没有任何经验，所以我无法提供任何帮助！）如果您在尝试时有任何问题，请告诉我实现这个:)

# objective-c - 自定义对象在进入 NSMutableArray 时变为 _NSCFString

> ID：11199795
> 
> 赞同：0
> 
> 时间：2012-06-26T01:53:18.157
> 
> 标签：objective-c

我在将自定义对象 (WSWCMPost) 放入 NSMutableArray 并稍后访问存储在其中的数据时遇到问题。下面是相关代码。

这是“WSWCMPost.h”

```
#import <Foundation/Foundation.h>

@interface WSWCMPost : NSObject
{
    NSString *postBody;
    NSString *postTitle;
    NSString *postID;
}
@property (nonatomic, retain) NSString *postBody, *postTitle, *postID;

- init;
- (id)initWithID: (NSString*)ID AndBody: (NSString*)body AndTitle: (NSString*)title;
- (NSString*)postBody;
- (NSString*)postTitle;
- (NSString*)postID; 
```

这是“WSWCMPost.m”

```
#import "WSWCMPost.h"

@implementation WSWCMPost

@synthesize postBody, postTitle, postID;

- (id)init {
    self = [super init];
    if(self) {
        postID = @"none";
        postBody = @"none";
        postTitle = @"none";
    }
}

- (id)initWithID: (NSString*)ID AndBody: (NSString*)body AndTitle: (NSString*)title {
    postTitle = title;
    postID = ID;
    postBody = body;
}

@end 
```

这是导致我的问题的“viewDidLoad”方法

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.detailViewController = (WSWCMDetailViewController *)[[self.splitViewController.viewControllers lastObject] topViewController];

    // getting an NSString
    NSLog(@"Pulling saved blogs...");
    NSUserDefaults *currentDefaults = [NSUserDefaults standardUserDefaults];
    NSData *dataRepresentingSavedArray = [currentDefaults objectForKey:@"wswcmt1"];
    if (dataRepresentingSavedArray != nil)
    {
        NSArray *oldSavedArray = [NSKeyedUnarchiver unarchiveObjectWithData:dataRepresentingSavedArray];
        if (oldSavedArray != nil)
            _objects = [[NSMutableArray alloc] initWithArray:oldSavedArray];
        else
            _objects = [[NSMutableArray alloc] init];
    }
    NSLog(@"Pulled saved blogs...");

    NSLog(!_objects ? @"Yes" : @"No");
    @try {
        NSLog(@"_objects description: %@",[_objects description]);
        NSLog(@"_objects[0] postID: %@",[[_objects objectAtIndex:0] postID]);
    }
    @catch (NSException *exception) {
        NSLog(@"Caught exception %@", exception);
        NSLog(@"Objects doesnt exist, allocating memory...");
        _objects = [[NSMutableArray alloc] init];
        WSWCMPost *testPost = [[WSWCMPost alloc] initWithID:@"noID" AndBody:@"noBody" AndTitle:@"noTitle"];

        [_objects insertObject:testPost atIndex:0];
        [[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:_objects] forKey:@"wswcmt1"];
    }

    if (!_objects ) {
        NSLog(@"Objects doesnt exist...");
        _objects = [[NSMutableArray alloc] init];
        WSWCMPost *testPost = [[WSWCMPost alloc] initWithID:@"dne" AndBody:@"Dne" AndTitle:@"DNe"];

        [_objects insertObject:testPost atIndex:0];
        [[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:_objects] forKey:@"wswcmt"];
    }
    [self refreshButton:nil];
} 
```

最后，这是输出

```
2012-06-25 22:39:49.345 WSWCM[4406:907] Pulling saved blogs...
2012-06-25 22:39:49.352 WSWCM[4406:907] Pulled saved blogs...
2012-06-25 22:39:49.355 WSWCM[4406:907] Yes
2012-06-25 22:39:49.356 WSWCM[4406:907] _objects description: (null)
2012-06-25 22:39:49.358 WSWCM[4406:907] _objects[0] postID: (null)
2012-06-25 22:39:49.360 WSWCM[4406:907] Objects doesnt exist...
2012-06-25 22:39:49.363 WSWCM[4406:907] Refresh Triggered... 
```

我认为这就是所有相关的代码。如果我忘记了什么请告诉我。这个问题困扰了我好几个小时...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:58:52.680

虽然我不肯定为什么它会给你`NSStrings`而不是仅仅正常爆炸，但问题似乎源于你的自定义类`WSWCMPost`不符合[`NSCoding`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)协议的事实。如果您想将自定义对象存储在 中，请确保您的自定义对象实现了此协议`NSUserDefaults`，因为否则它不知道如何序列化数据。

更准确地说，您必须将这些方法添加到您的类实现中：

```
- (id)initWithCoder:(NSCoder *)coder {
    self = [self initWithID:[coder decodeObjectForKey:@"id"] AndBody:[coder decodeObjectForKey:@"body"] AndTitle:[coder decodeObjectForKey:@"title"]];
    return self;
}

- (void)encodeWithCoder:(NSCoder *)coder {
    [encoder encodeObject:postID forKey:@"id"];
    [encoder encodeObject:postBody forKey:@"body"];
    [encoder encodeObject:postTitle forKey:@"title"];
} 
```

这将允许数据被序列化`NSCoder`。完成此操作后，您应该清除当前存储的所有信息，`NSUserDefaults`以确保它不再包含任何`NSString`s，然后一切都应该正常工作。当然，如果您更改`WSWCMPost`对象存储的数据，则必须更新这两个方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:10:27.760

您的输出肯定显示了您的代码中有什么问题。

```
2012-06-25 21:51:07.691 WSWCM[4049:907] -[__NSCFString postID]: unrecognized selector sent to instance 0x1d003e80
2012-06-25 21:51:07.696 WSWCM[4049:907] Caught exception -[__NSCFString postID]: unrecognized selector sent to instance 0x1d003e80 
```

这两行告诉你 NSString 对象不能识别选择器 postID。这个提示应该足以找出您需要深入查看的地方。

有关更多信息，请参阅[将自定义对象存储在 NSUserDefaults 中的 NSMutableArray 中](https://stackoverflow.com/questions/537044/storing-custom-objects-in-an-nsmutablearray-in-nsuserdefaults)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T03:19:32.700

另一件要提的事情是，您正在与您的 getter/setter 及其各自的实例变量发生冲突。所以你的实现是：

**界面**

```
@interface WSWCMPost : NSObject
{
    NSString *postBody; // don't need to do these anymore for properties
    NSString *postTitle;
    NSString *postID;
}
@property (nonatomic, retain) NSString *postBody, *postTitle, *postID; 
```

**执行**

```
@implementation WSWCMPost

@synthesize postBody, postTitle, postID;

- (id)init {
    self = [super init];
    if(self) {
        postID = @"none";  // not prefixing your variables with 'self' so they are not getting retained
        postBody = @"none";
        postTitle = @"none";
    }
} 
```

@结尾

以下是您应该如何写出这些内容：

**界面**

```
/** NOTE: No need to specify your instance variables here anymore, just the properties */
@interface WSWCMPost : NSObject

@property (nonatomic, retain) NSString *postID;
@property (nonatomic, retain) NSString *postTitle;
@property (nonatomic, retain) NSString *postBody; 
```

**执行**

```
@implementation WSWCMPost

/** Now you specify the corresponding instance variable name alongside the property name */
@synthesize postBody=_postBody, postTitle=_postTitle, postID=_postID;

- (id)init {
    self = [super init];
    if(self) {
        self.postID = @"none";  //getting retained
        self.postBody = @"none";
        self.postTitle = @"none";
    }
} 
```

这肯定会导致数据发布得太早。

所以以前的方式你可以输入**self.postID**或**postID**并且编译器不会抱怨。不同之处在于，当您键入**postID**时，它实际上是在设置成员变量而不是保留它......其中**self.postID**将释放它当前设置的任何值，如果它不同，则保留新值。

通过以新方式声明属性，您必须将 setter 称为**self.postID**或将底层实例变量设置为**_postID**。许多早期的 iPhone 书籍都以这种方式敲击属性，最终导致各种内存问题。

希望这可以帮助！

**更新！！！**

你忘了在你的构造函数中返回 self ；）我打赌就是这样

```
- (id)init {
    self = [super init];
    if(self) {
        self.postID = @"none";  //getting retained
        self.postBody = @"none";
        self.postTitle = @"none";
    }
    return self; // THIS IS WHY, you're constructor doesn't return an instance of the class... add this please
}

- (id)initWithID: (NSString*)ID AndBody: (NSString*)body AndTitle: (NSString*)title {

    if(( self = [super init] ))
    { 
        self.postTitle = title;
        self.postID = ID;
        self.postBody = body;
    }
    return self;
} 
```

# python - 如何解决这个 python 和 django 设置导入特性？

> ID：11199797
> 
> 赞同：0
> 
> 时间：2012-06-26T01:53:48.440
> 
> 标签：python, django, import, settings

我有这样的文件布局：
`settings/`
`----__init__.py`
`----common.py`
`----configs/`
`--------constants1.py`
`--------constants2.py`
`----debug/`
`--------include1&2.py`
`--------include1.py`
`--------include2.py`

当我导入时`settings.debug.include1`，我希望设置文件执行/导入，然后用适当的常量文件`common.py`覆盖设置。`common.py`问题是，这没有发生。有没有办法以这种方式实现我的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:21:28.200

否。使用`from ... import *`或加载适当的文件`execfile()`。`settings/__init__.py`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:38:10.060

由于大多数评论已经暗示您可以`from module import *`在适当的文件中使用。它们可能如下所示..

--

```
# settings/common.py

DEBUG = False 
```

--

```
# settings/configs/constants1.py

CONSTANT_1 = 'One' 
```

--

```
# settings/configs/constants2.py

CONSTANT_2 = 'Two' 
```

--

```
# settings/debug/include1.py

from settings.common import *
from settings.configs.constants1 import *

# Override settings here
DEBUG = True
CONSTANT_1 = '1' 
```

--

```
# settings/debug/include2.py

from settings.common import *
from settings.configs.constants2 import *

# Override settings here
DEBUG = True
CONSTANT_2 = '2' 
```

并且对于 2 调试的组合包括

```
# settings/debug/include1and2.py

from settings.debug.include1 import *
from settings.debug.include2 import * 
```

或者

```
# settings/debug/include1and2.py

from settings.common import *
from settings.configs.constants1 import *
from settings.configs.constants2 import *

# Override settings here 
```

# css - 如何在drupal中获取最新民意调查的ID

> ID：11199800
> 
> 赞同：2
> 
> 时间：2012-06-26T01:54:12.673
> 
> 标签：css, drupal, drupal-7

我正在尝试制作首页，并希望以编程方式显示最新的民意调查。我知道可以以编程方式将块放置为：

```
 $block = module_invoke('block','block_view', 4);
      print render($block['content']); 
```

现在我无法弄清楚如何获得最新的民意调查ID。我已经尝试过（'最近'），但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:46:52.893

```
<?php $block = module_invoke('poll', 'block_view'); ?>
<?php print render($block['content']); ?> 
```

module_invoke 函数只需要两个参数，第一个是模块名称（poll），第二个是钩子。delta 不是必需的，因为 poll_block_info() 只定义了一个块，因此无需传递 delta 参数（只需将第三个参数排除在外）

# shell - 需要根据符号表信息将二进制名称输出到文件/标准输出

> ID：11199802
> 
> 赞同：0
> 
> 时间：2012-06-26T01:54:27.200
> 
> 标签：shell, unix, awk, grep, nm

我有一个包含一些二进制文件的文件。我正在尝试`nm`在这些二进制文件上使用来搜索目标文件。

我的问题是，我只想从这个文件（executables.out）中输出那些包含所需符号的二进制文件。知道怎么做吗？

```
nm --demangle `awk '{print}' executables.out` | grep <symbol> > outputfile.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T02:10:19.017

如果不查看 nm 的 args 等以查看是否有显示文件名的内容，我将执行 3 行 shell 脚本。

```
for f in `cat executables.out`; do
    nm --demangle $f | grep -q REQUIRED_SYMBOL && echo $f
done 
```

其中说：

```
For each file in executables.out
    if nm output contains the required symbol
        echo the file name 
```

nm 可能有用于简化的命令行选项（例如，从文件中获取 obj 列表） - 取决于您的操作系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T03:51:30.793

的选项`nm`在机器之间不是很一致，输出格式也不是。但是，通常有一个选项会将文件名（目标文件或存档成员或可执行文件名）作为输出前缀。在 MacOS X 上，该选项是`-o`; 在 Solaris 上，它是`-r`或`-R`; 在 Linux 上，它是`-o`，...

```
nm -g -o $(<executables.out) | grep -w symbol | awk -F: '{print $1}' 
```

这将列出定义或引用给定符号的文件。要仅显示定义符号的文件，则需要查看“T”（函数）或“C”（未初始化或通用数据）或“D”（已初始化数据）——尽管 System V 系统再次使用不同的系统：

```
nm -g -o $(<executables.out) | grep -w symbol | grep ' [TCD] ' | awk -F: '{print $1}' 
```

该`$(<file)`表示法读取命名文件并将其内容用作一系列参数，但这样做并没有实际执行命令（与`awk`在原始问题中执行的带有反引号的表示法不同；`cat`将是 的合理替代方案`awk`）。

将`grep -w`模式作为一个整体来查找，因此如果您搜索`printf`，它不会打印`fprintf`、`snprintf`、`vsnprintf`等。它是一个 GNU`grep`扩展。

# jquery - jgGrid 没有被 WCF Rest 服务调用填充

> ID：11199806
> 
> 赞同：0
> 
> 时间：2012-06-26T01:54:43.570
> 
> 标签：jquery, wcf, rest, jqgrid

我是 jQuery 和 jqGrid 的新手。我编写了以下代码来调用 WCF RESTful 服务并填充 jqGrid。尽管对 WCF RESTful 服务的调用返回了 json 输出，但 jqGrid 出于某种原因无法解释此输出。

服务接口：

```
 [ServiceContract]
    public interface IService
    {
      [OperationContract]
      [WebInvoke(UriTemplate = "/Employees", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, Method = "GET")]
      List<Employee> GetCollection();
    }

    [DataContract(Namespace="")]
    public class Employee
    {
      [DataMember(IsRequired = true, Name = "empId", Order = 1)]
      public string EmpId { get; set; }
      [DataMember(IsRequired = false, Name = "empName", Order = 2)]
      public string EmpName { get; set; }
      [DataMember(IsRequired = false, Name = "dob", Order = 3)]
      public DateTime DOB { get; set; }
      [DataMember(IsRequired = false, Name = "department", Order = 4)]
      public string Department { get; set; }

    } 
```

服务实施：

```
 public List<Employee> GetCollection()
    {           
        List<Employee> empList = new List<Employee>();
        Employee emp = new Employee();
        emp.EmpId = "1";
        emp.DOB = Convert.ToDateTime("21/03/1979");
        emp.EmpName = "Haris";
        emp.Department = "HR";
        empList.Add(emp);

        return empList;            

    } 
```

jQuery 脚本：

```
 jQuery(document).ready(function() {        
        $("#jQGrid").html("<table id=\"list\"></table><div id=\"page\"></div>");
          jQuery("#list").jqGrid({
            url:'http://localhost:9002/SampleServices/Service/REST/Employees',
            //datastr: mystr,
            data: "{}",  // For empty input data use "{}",
            dataType: "json",
            type: "GET",
            contentType: "application/json; charset=utf-8",
            colNames: ['Emp Id.', 'Emp Name', 'DOB', 'Department'],
            colModel: [{ name: 'empId', index: 'empId', width: 90, sortable: true },
            { name: 'empName', index: 'empName', width: 130, sortable: false },
            { name: 'dob', index: 'dob', width: 100, sortable: false },
            { name: 'department', index: 'department', width: 180, sortable: false }
            ],
            multiselect: false,
            paging: true,
            rowNum: 1,
            rowList: [1, 5, 10],
            pager: $("#page"),
            loadonce: true,
            caption: "Employee Details",
            success: successFunction
          }).navGrid('#page', { edit: false, add: false, del: false }
        );
    }); 
```

调用“http://localhost:9002/SampleServices/Service/REST/Employees”返回以下内容：[{"empId":"1","empName":"Haris","dob":"/Date(290851200000 -0700)/","部门":"HR"}]

开发人员可以请您帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:42:10.843

您当前的代码有很多错误。最重要的错误是 jqGrid 选项的想象名称的使用。您应该检查[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)并使用真正受支持的选项和[回调。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:events)只是一些示例：您使用current `data`、和[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)`dataType`中存在的选项。对应的jqGrid 选项应该是、和。您应该另外使用. 有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/3914796/315935)。`type``contentType``postData``datatype``mtype``ajaxGridOptions: { contentType: "application/json"}``serializeGridData: function (postData) { return JSON.stringify(postData); }`

为了能够以`"/Date(290851200000-0700)/"`您需要的格式读取日期，请使用`formatter: "date"`. 您需要在 jqGrid 中包含的最重要的东西是[jsonReader](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data)，它对应于您使用的数据。

所以对应的代码应该大概如下：

```
$(function () {
    'use strict';
    $("#jQGrid").html("<table id=\"list\"></table><div id=\"page\"></div>");
    $("#list").jqGrid({
        url: "HarisFarooqui.json",
        datatype: "json",
        height: "auto",
        jsonReader: {
            root: function (obj) {
                return obj;
            },
            repeatitems: false
        },
        serializeGridData: function (postData) {
            return JSON.stringify(postData);
        },
        colNames: ['Emp Id.', 'Emp Name', 'DOB', 'Department'],
        colModel: [
            { name: 'empId', width: 90, sortable: true, sorttype: "int" },
            { name: 'empName', width: 130, sortable: false },
            { name: 'dob', width: 100, formatter: "date", sortable: false },
            { name: 'department', width: 180, sortable: false }
        ],
        rowNum: 10,
        rowList: [10, 30, 1000],
        loadonce: true,
        rownumbers: true,
        gridview: true,
        pager: "#page",
        caption: "Employee Details"
    });
}); 
```

看[演示](http://www.ok-soft-gmbh.com/jqGrid/HarisFarooqui.htm)

![在此处输入图像描述](../Images/7e0145b616c828b9ba8bfacef8401cac.png)

# android - Android 崩溃报告 - 获取最多信息的最佳方式是什么？

> ID：11199807
> 
> 赞同：1
> 
> 时间：2012-06-26T01:54:48.493
> 
> 标签：android, acra

我想知道其他人如何在生产应用程序的崩溃报告中找到 Android SDK 版本号和设备信息。你怎么知道它是否在运行 Android 2.3 的三星 Galaxy Infuse 上？我正在考虑将 ACRA 用于一个拥有数百万下载量的应用程序，但是我不会在代码库中引入一个像 ACRA 这样的新库，如果没有关于哪些应用程序使用 ACRA 的一些重要理由和建议。

已确定的一种方法是将不带 API 的信息上传到电子表格：请参阅：[https ://stackoverflow.com/questions/11217508/android-crash-handler-to-upload-info-to-google-电子表格](https://stackoverflow.com/questions/11217508/android-crash-handler-to-upload-info-to-google-spreadsheet)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T20:49:52.907

好吧，如果您开始实现自己的 Google 电子表格崩溃报告上传器……为什么不想使用 ACRA 呢？最新版本 4.2.3 已使用一年（它很稳定），已被下载超过 10000 次，并被用于主要应用程序......如...... Facebook、Shazam、Winamp。新的测试版将在 8 月的前几周推出。

自己看看：http: [//www.appbrain.com/stats/libraries/details/acra/acra](http://www.appbrain.com/stats/libraries/details/acra/acra)

当您可以利用 2 年的经验来实施您需要的东西时，为什么要自己实施呢？

如果整个 ACRA 库对您来说看起来很可怕（即使设置它需要 5 分钟），您可以查看源代码并选择 GoogleFormSender 类。

如果您对 ACRA 有任何疑问，请随时与我联系。

# javascript - JS循环一个图像文件夹，预加载它们并分配给一个数组？

> ID：11199809
> 
> 赞同：0
> 
> 时间：2012-06-26T01:55:02.047
> 
> 标签：javascript

我有一个名为“img”的文件夹，我想使用 js 来查找该文件夹并找到所有图像文件（jpg、JPG 或 png）并预加载它们并将它们分配给一个数组。

这可以通过在我的服务器上查找这样的文件夹来完成吗？还是客户端代码不允许您循环浏览文件夹中的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T01:58:14.373

如果您启用了目录浏览，您可以解析自动生成的目录页面。在不知道您的目录输出是什么样子的情况下，很难在这里写出来。

否则，您需要编写服务器代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T01:58:41.020

客户端 JS 无法做到这一点。你必须知道你正在寻找的资源的确切名称——没有办法“浏览”。

# z-index - 如何防止框阴影显示在另一个元素上？

> ID：11199818
> 
> 赞同：1
> 
> 时间：2012-06-26T01:56:27.490
> 
> 标签：z-index, css

所以我经常遇到这个问题，但直到最近的一个项目才让我非常恼火。

`<div style="background-image:url(img/s_top_ribbon_terminal.png); height:6px;"></div>`

`<div style="background-color:#FFF; box-shadow:rgba(0, 0, 0, 0.23) 0 0 16px; -moz-box-shadow:rgba(0, 0, 0, 0.23) 0 0 16px; -webkit-box-shadow:rgba(0, 0, 0, 0.23) 0 0 16px;">Lorem Ipsum</div>`Lorem Ipsum

基本上，情况是这样的：我有一个带有图像或文本的元素，它位于另一个包含框阴影的元素之前。然后，当我希望第一个元素“在”（如果有意义的话）第二个元素的阴影“前面”时，框阴影将继续越过第一个元素。我怎么能做到这一点？我尝试了 z-index，但这似乎并没有真正起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T02:00:28.820

z-index 将起作用。确保在元素上使用定位（绝对、相对或固定）。

# android - Android：用于位置的 Google 秘密 API 是否仍然有效

> ID：11199821
> 
> 赞同：2
> 
> 时间：2012-06-26T01:56:44.720
> 
> 标签：android, location, wifi, cellid

此链接是否仍然有效：

[http://www.devx.com/wireless/Article/40524/1954](http://www.devx.com/wireless/Article/40524/1954)。看起来有一个用于位置的秘密 API。它现在似乎不起作用。我认为这是非常旧的版本，因为它没有说明 Google MAPS api 密钥等。有人可以确认这仍然有效吗？是否用 locationmanger.networkprovider 代码替换。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:07:36.350

如果您将 GLM MMap API (www.google.com/glm/mmap) 称为机密：

截至 5 月 31 日，似乎有人仍在使用它，请参阅

[http://productforums.google.com/forum/#!topic/maps/mSKE7eQohNE](http://productforums.google.com/forum/#!topic/maps/mSKE7eQohNE)

[即使从您上面的文章链接到的原始网站在http://www.google.com/glm/mmap](http://www.google.com/glm/mmap)下不再存在

但我认为它仍然有效，即使是非官方的并且不确定您的问题附带的许可/法律问题。

并且`telephonyManager.getCellLocation()`仍然是 Android 中的有效 API（至少它仍然在 SDK 中，但我从未尝试过它返回的值）。

# php - Uploadify根本不运行服务器端脚本

> ID：11199822
> 
> 赞同：1
> 
> 时间：2012-06-26T01:56:59.570
> 
> 标签：php, jquery, uploadify

所以我用最基本的设置初始化uploadify，当这段代码是我的脚本文件中唯一的javascript时我已经尝试过了，而且我没有收到任何错误。

```
$('#FAbtn').uploadify({
    'swf' : '/assets/swf/uploadify.swf',
    'uploader' : '/assets/php/uploadify.php'
}); 
```

例如，在上传图片时，我会在按钮下方获得上传成功下拉菜单，但根本没有联系 uploadify.php。（目录路径是正确的，只要我给它一个像uploadify2这样的错误文件，它就会给出404）。即使uploadify.php 脚本有1 行var_dump，也不会发生任何事情。查了一下查尔斯，没有联系。

将“onSelect”放入可以很好地提醒文件选择弹出框，所以我确定 javascript 运行良好。

有什么想法吗？顺便说一句，我在本地主机上。

# java - How to store temporary data on server and share to many users

> ID：11199829
> 
> 赞同：0
> 
> 时间：2012-06-26T01:57:57.080
> 
> 标签：java, servlets, store, temporary

I'm developing an online chess game by Servlet and MySQL. And my program have mutil match (2 players unit).
Now I want to store each Match's data (String) on server and every player do his turn, this Match's data will be updated.
What the best solution to store this temporary data?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:11:49.853

There's absolutely nothing wrong with hitting a database every second as long as you are using a connection pool. Use the database. If you're really afraid of that, use memcache or reddis.

Mysql can handle hundreds of queries a second on a small server.

See: [https://serverfault.com/questions/164980/how-many-selects-per-second-can-a-mysql-server-run](https://serverfault.com/questions/164980/how-many-selects-per-second-can-a-mysql-server-run)

Those are selects... but they're talking thousands. If you're just updating a row for the state of a chess game, that's a very simple write operation.

# javascript - 使用箭头键突出显示选定的行

> ID：11199834
> 
> 赞同：0
> 
> 时间：2012-06-26T01:58:29.860
> 
> 标签：javascript, html, dom, web, html-table

我需要你的帮助，

下面的代码用于突出显示网格表中选定（单击）的行。但是，如何修改它以便当焦点在桌子上并且我同时使用向上和向下箭头键时，它将突出显示并转到下一行（向下键）或上一行（向上键）。我仍然是这一切的新手，并且以前对现有编码有过帮助。

非常感谢任何帮助。

```
<html>
<head>
    <meta http-equiv="Content-Language" content="en-ca">
    <title>Scrolling Data Grid</title>
<style>
/* ==================================================================== */
/* SCROLLING DATA GRID                                                  */
/* ==================================================================== */
DIV.scrollingdatagrid {
    overflow-x:auto;
    overflow-y:auto;
    position:relative;
    padding:0px;
}
DIV.scrollingdatagrid TABLE {
    width : 98.7%; /* Make room for scroll bar! */
    margin:0px;
    border:0px;
    border-collapse:separate;
}
DIV.scrollingdatagrid TABLE TR .locked, DIV.scrollingdatagrid TABLE THEAD TR, DIV.scrollingdatagrid TABLE TFOOT TR {
    position:relative;
}
/* OffsetParent of the TR is the DIV because it is position:relative */
DIV.scrollingdatagrid TABLE THEAD TR {
    top:expression(this.offsetParent.scrollTop);
}

/* Make the z-index values very clear so overlaps happen as expected! */
DIV.scrollingdatagrid TD, DIV.scrollingdatagrid TH { z-index:1; }
DIV.scrollingdatagrid TD.locked, DIV.scrollingdatagrid TH.locked { z-index:2; }
DIV.scrollingdatagrid THEAD TR, DIV.scrollingdatagrid TFOOT TR { z-index:3; }
DIV.scrollingdatagrid THEAD TR TH.locked { z-index:4; }
</style>

<script type="text/javascript">
window.onload = function() { 

var cn      =   new ActiveXObject("ADODB.Connection")
var rs      =   new ActiveXObject("ADODB.Recordset")
var dbFile  =   "imts.mdb"
var dbPath  =   "F:\\PROJECTS\\IMTS PROJECT\\V8\\database\\"

var mySQL   = "SELECT * FROM tbl_imts WHERE [FILE NUMBER] LIKE '%99%'"
var html    = ""

cn.Open("Provider=Microsoft.Jet.OLEDB.4.0;Data Source = " + dbPath + dbFile + "");
rs.Open(mySQL, cn, 1, 3)

html += '<table id="mstrTable" style="table-layout: fixed; font-family: arial; font-size: 9pt;" cellpadding="0" cellspacing="0">\n'
html += '<thead>\n'
html += '<tr>\n'
html += '<th class="locked" style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); text-align: center; height: 30px; width: 20px; color: rgb(102,102,102); background-color: rgb(212,208,200);">#</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(0).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(1).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(2).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(3).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(4).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(5).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(6).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(7).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(8).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(9).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(10).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(11).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(12).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(13).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 110px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(14).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: none; padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(15).name + '</th>\n'
html += '</tr>\n'
html += '</thead>\n'

rs.MoveFirst
var i = 0
html += '<tbody>\n'
while (!rs.eof) {
++i
html += '<tr style="color: rgb(102,102,102)">\n'
html += '<td class="locked" style="height: 20px; text-align: center; border-right: 1px solid rgb(128,128,128); border-bottom: 1px solid rgb(128,128,128);">'+i+'.</td>\n'
    for (var r = 0; r < rs.fields.count; ++r) {
    if (!rs.fields(r).value) { rs.fields(r).value = "&nbsp;" }
    html    +=  '<td style="border-right: 1px solid rgb(128,128,128); border-bottom: 1px solid rgb(128,128,128); padding-left: 5px; white-space: nowrap; overflow: hidden;">'+rs.fields(r).value+'</td>\n'
    }//end of for
    html    +=  '</tr>\n'
    rs.MoveNext 
    }//end of while
html += '</tbody>\n'
html += '</table>\n'

document.getElementById("p1").innerHTML = html

var color = "#E1E0D7"
var rows = document.getElementById("mstrTable").getElementsByTagName("tr");
var n = rows.length;
var bgcs = [];
for(var i=0; i<n; ++i) bgcs[i] = rows[i].style.backgroundColor;

function changeColor(e) {
if(!e) e = window.event;
var o = e.target? e.target: e.srcElement;
while(o.tagName && o.tagName.toLowerCase()!="tr") o = o.parentNode;
    for(var i=0; i<n; ++i) {
        rows[i].style.backgroundColor = bgcs[i];
        if(rows[i]==o) {
        rows[i].style.backgroundColor = color;
        }//end of if
    }//end of for
}//end of function

if(document.addEventListener) for(var i=0; i<n; ++i) rows[i].addEventListener("click", changeColor, false);
else for(var i=0; i<n; ++i) rows[i].attachEvent("onclick", changeColor);
}//end of onload

</script>

</head>

<body>

<div id="p1" class="scrollingdatagrid" style="width:800px;height:200px;border:1px solid rgb(128,128,128);"></div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:07:04.367

I'm not sure entirely how to do it in html or css but in JavaScript it is easily feasible. I would start out with a hidden highlight behind each element. Then you simply keep track of which element you are on and take in when an arrow is keydowned. When that action happens the current element's highlight can be hidden and the next element's highlight can be unhidden. You would need a function for each direction and/or each element.

# mongodb - 如何在 mongoDB 中进行此查询？

> ID：11199838
> 
> 赞同：1
> 
> 时间：2012-06-26T01:58:52.427
> 
> 标签：mongodb

如何在 mongoDB 中进行此查询？

> {
> 
> > _ID： ”*******”
> > 
> > 内容： ””，
> > 
> > 注释： [
> > 
> > {
> > 
> > > 键1：“1”，
> > > 
> > > 键2：“2”
> > 
> > },
> > 
> > {
> > 
> > > 键1：“sdfs”，
> > > 
> > > 键2：“sdfasdf”
> > 
> > }
> > 
> > ]
> 
> }

例如，我使用如下数据。我想查询条件{key1：1，key2：2}的评论中的项目，而不是返回整条记录。

我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:24:17.587

你可以试试这个

```
{ "comments.key1" : "1", "comments.key2" : "sdfasdf" } 
```

只有在数组元素中必须匹配多个字段时才需要使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T02:09:23.673

您可以使用以下方法查询两个字段的子文档[`$elemMatch`](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-$elemMatch)：

```
{ comments: { $elemMatch : { key1: 1, key2: 2 } } } 
```

[您不能只返回选定的子文档](https://stackoverflow.com/questions/3985214/mongodb-extract-only-the-selected-item-in-array)。你会得到所有的。因此，您必须在客户端进行过滤。（当然，您可以排除主文档的所有其他字段）。

# java - 给定公共指数和模数的 RSA 签名验证

> ID：11199840
> 
> 赞同：2
> 
> 时间：2012-06-26T01:59:11.330
> 
> 标签：java, rsa, digital-signature

尝试使用 Sun JCE 和 CAVP 程序中的测试向量对签名验证进行编码。

我得到了公钥指数和模数，以及消息和签名。我执行以下操作：

```
 private static boolean verifySignature(String algo, PrintStream oPS, byte[] message, byte[] modulus, byte[] exponent, byte[] sigBytes, int saltlen)  throws Exception
    {
            Signature sig = Signature.getInstance(algo);
            KeyFactory keyMaker = KeyFactory.getInstance("RSA");
            RSAPublicKeySpec pubKeySpec = new RSAPublicKeySpec(
                            new BigInteger(modulus),
                            new BigInteger(exponent));

            RSAPublicKey pubKey = (RSAPublicKey)keyMaker.generatePublic(pubKeySpec);

            System.out.println("algorithm is " + algo);
            sig.initVerify(pubKey);
            Utils.outputValue("n", modulus, modulus.length, System.out, false);
            Utils.outputValue("e", exponent, exponent.length, System.out, false);
            Utils.outputValue("Msg", message, message.length, System.out, false);
            Utils.outputValue("S", sigBytes, sigBytes.length, System.out, false);
            BigInteger Nvalue = pubKey.getPublicExponent();
            Utils.outputValue("key value of n", Nvalue.toByteArray(), System.out, false);
            BigInteger Evalue=pubKey.getModulus();
            Utils.outputValue("key value of e", Evalue.toByteArray(), System.out, false);
            sig.update(message);
            if(sig.verify(sigBytes))
                    oPS.println("Result = P");
            else
                    oPS.println("Result = F"); 
```

. . .

该算法类似于“SHA1withRSA”，我构建了如图所示的公钥。当我从密钥本身列出生成的模数和指数时，它们已经反转了。

n = 009de541c71a95389d9e8619ea1d6e2c69ed6c703701e518351676022ab98395d6b35a38b024f92bce6dd1c5be9d51dffd1687d19dceee73f2c73e4436b955231255f6e3e360ba84462311e10e65932fe069bed2d42c5bf2f88141828bdad3796184870cb8cf3019da264e56b39eccf7224d43a1b98d788b40a4042aac790e946f e = 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003 Msg = 64b13df4b008ccccd5ce146018481c2568bbe2b93ec658d1c7f4ad734592cd65b3be2be5a7c1be9a7d9f49cbb2ece0cf8ee0a8c406aede84e0121bd51829d6e083862ae5b282d92c19d3923f70616f565a55c2134572116f91a85ff5f4e6ad2e1d31c15c97f3266af19574241c4fd2a4143fb80cc2b9fa7b22df0239a1715c35 S =5b4458f6aeff91c4699ee9bdf8757987fb8db229814a2992945ac53bcf19b9179e53cfed258726d205107ac000d41e570fe8c4fb321fc9b4b5469c60cd20032195f314ba6e6b0b30a51c9834242daa1ce525ec90380106568e782ea164baeda5d884defe6e720e9dd63618b823412445e17f991a6daa21bd62bdc73d7d8a20e5 key value of n = 03 key value of e = 009de541c71a95389d9e8619ea1d6e2c69ed6c703701e518351676022ab98395d6b35a38b024f92bce6dd1c5be9d51dffd1687d19dceee73f2c73e4436b955231255f6e3e360ba84462311e10e65932fe069bed2d42c5bf2f88141828bdad3796184870cb8cf3019da264e56b39eccf7224d43a1b98d788b40a4042aac790e946f009de541c71a95389d9e8619ea1d6e2c69ed6c703701e518351676022ab98395d6b35a38b024f92bce6dd1c5be9d51dffd1687d19dceee73f2c73e4436b955231255f6e3e360ba84462311e10e65932fe069bed2d42c5bf2f88141828bdad3796184870cb8cf3019da264e56b39eccf7224d43a1b98d788b40a4042aac790e946f009de541c71a95389d9e8619ea1d6e2c69ed6c703701e518351676022ab98395d6b35a38b024f92bce6dd1c5be9d51dffd1687d19dceee73f2c73e4436b955231255f6e3e360ba84462311e10e65932fe069bed2d42c5bf2f88141828bdad3796184870cb8cf3019da264e56b39eccf7224d43a1b98d788b40a4042aac790e946f

其中一些测试应该失败，但有些应该成功。没有正确验证...有什么想法吗？谢谢。

应用程序如下，然后是一组样本输入。

```
package cavp.rsa;

import cavp.*;

import java.io.*;

import java.security.KeyFactory;
import java.security.SecureRandom;
import java.security.Signature;
import java.security.interfaces.RSAPublicKey;
import java.security.spec.RSAPublicKeySpec;
import java.security.PublicKey;

import java.util.Date;

import java.math.BigInteger;

public class RSASigVerify
{
        private static boolean verboseFlag=false;

        public static void main(String[] args) throws Exception
        {
                String requestFile;
                String responseFile;

                int saltLen=-1;
                int argstart=0;

                if(args.length < 2)
                        throw new Exception("missing parameters");
                if(args.length == 3) {
                        if(args[0].equals("-saltlen")) {
                                saltLen=Integer.parseInt(args[1]);
                                if(saltLen < 0)
                                        throw new Exception("bad -saltlen parameter ");
                                argstart=2;
                        } else {
                                if(args[0].equals("-x931")) {
                                        saltLen=-2;
                                        argstart=1;
                                }
                } else {
                        if(args.length > 3)
                                throw new Exception("invalid invocation");
                }
                requestFile=args[argstart];
                responseFile=args[argstart+1];
                if(processFile(requestFile, responseFile, saltLen))
                        System.out.println("Failed to process file " + requestFile);
                else
                        System.out.println("Processing complete for " + requestFile);
        }

        private static boolean processFile(String rqfn, String rspfn, int saltLen) throws Exception
        {
                File inFile = new File(rqfn), outFile = new File(rspfn);

                if(!inFile.exists() || !inFile.isFile() || !inFile.canRead()) {
                        System.out.println("Bad input File " + rqfn);
                        return true;
                }
                FileReader inFR = new FileReader(inFile);
                BufferedReader inBR = new BufferedReader(inFR);
                PrintStream outPS = new PrintStream(outFile);

                String input, keyword, value, digestType=null;
                int p, v, q, i, lnum=0;
                byte[] Msg=null, nBytes=null, eBytes=null, sigBytes=null;
                boolean msgFound=false, nFound=false, eFound=false, sigFound=false;

                try {
                        while((input = inBR.readLine()) != null ) {
                                lnum++;
                                if((p = input.indexOf('=')) < 0) {
                                        outPS.println(input);
                                        continue;
                                }
                                if(input.charAt(p-1) == ' ')
                                        keyword=input.substring(0,p-1);
                                else
                                        keyword=input.substring(0, p);
                                p++;
                                for(i=p; i<input.length(); i++) {
                                        if(input.charAt(i) == ' ')
                                                p++;
                                        else
                                                break;
                                }
                                if((v = input.indexOf('\n')) > 0) {
                                        for(q=v-1; q>p+1; q--) {
                                                if(input.charAt(q) != ' ')
                                                        break;
                                        }
                                } else {
                                        if((v = input.indexOf(' ', p)) > 0) {
                                                q=v-1;
                                        } else {
                                                q=input.length();
                                        }
                                }

                                value=input.substring(p,q);
                                if(keyword.indexOf("n") >= 0) {
                                        nBytes=Utils.hexStringToByteArray(value);
                                        if(nBytes.length <= 0) {
                                                System.out.println("bad value for modulus");
                                                return true;
                                        }
                                        nFound=true;
                                } else {
                                        if(keyword.equals("e")) {
                                                eBytes=Utils.hexStringToByteArray(value);
                                                if(eBytes.length <= 0) {
                                                        System.out.println("bad value for private exponent");
                                                        return true;
                                                }
                                                eFound=true;

                                        } else {
                                                if(keyword.equals("SHAAlg")) {
                                                        if(!value.equals("SHA1") && !value.equals("SHA224") && !value.equals("SHA256") && !value.equals("SHA384") &&
                                                                        !value.equals("SHA512")) {
                                                                System.out.println("Bad SHAAlg parameter " + input);
                                                                return true;
                                                        }
                                                        digestType=value + "withRSA";
                                                } else {
                                                        if(keyword.equals("Msg")) {
                                                                if(msgFound) {
                                                                        System.out.println("more than one Msg found");
                                                                        return true;
                                                                } else
                                                                        msgFound=true;
                                                                String tempMsg;
                                                                if((value.length() & 0x01) != 0)  {
                                                                        tempMsg="0" + value;
                                                                } else {
                                                                        tempMsg=value;
                                                                }
                                                                Msg=Utils.hexStringToByteArray(tempMsg);
                                                                if(Msg.length <= 0) {
                                                                        System.out.println("bad Msg parameter");
                                                                        return true;
                                                                }
                                                        } else {
                                                                if(keyword.equals("S")) {
                                                                        sigBytes=Utils.hexStringToByteArray(value);
                                                                        if(sigBytes.length <= 0) {
                                                                                System.out.println("bad signature parameter");
                                                                                return true;
                                                                        }
                                                                        sigFound=true;
                                                                } else {
                                                                        if(keyword.equals("Result")) {
                                                                                continue;
                                                                        }
                                                                }
                                                        }
                                                }

                                        }
                                }
                                outPS.println(input);
                                if(digestType != null && msgFound && nFound && eFound && sigFound) {
                                        if(verifySignature(digestType, outPS, Msg, nBytes, eBytes, sigBytes, saltLen)) {
                                                throw new Exception("error in digest generator");
                                        }
                                        msgFound=false;
                                        eFound=false;
                                        sigFound=false;
                                }
                        }
                } catch( FileNotFoundException e) {
                        System.out.println("error processing file");
                }
                inFR.close();
                outPS.close();
                return false;
        }

        private static boolean verifySignature(String algo, PrintStream oPS, byte[] message, byte[] modulus, byte[] exponent, byte[] sigBytes, int saltlen)  throws Exception
        {
                // yet to implement saltLen == -2 for X9.31 padding
                //                  saltLen >= 0 for PSS Signatures

                Signature sig = Signature.getInstance(algo);
                KeyFactory keyMaker = KeyFactory.getInstance("RSA");
                RSAPublicKeySpec pubKeySpec = new RSAPublicKeySpec(
                                new BigInteger(modulus),
                                new BigInteger(exponent));

                RSAPublicKey pubKey = (RSAPublicKey)keyMaker.generatePublic(pubKeySpec);

                System.out.println("algorithm is " + algo);
                sig.initVerify(pubKey);
                sig.update(message);
                if(sig.verify(sigBytes))
                        oPS.println("Result = P");
                else
                        oPS.println("Result = F");
                return false;
        }
} 
```

以下是来自输入的一个向量：

```
# CAVS 11.5
# "SigVer PKCS#1 Ver 1.5" information for
# Mod sizes selected: 1024 2048
# SHA Algorithm selected:SHA1 SHA256
# Generated on Mon Nov 28 14:03:58 2011
[mod = 1024]
n = 9de541c71a95389d9e8619ea1d6e2c69ed6c703701e518351676022ab98395d6b35a38b024f92bce6dd1c5be9d>51dffd1687d19dceee73f2c73e4436b955231255f6e3e360ba84462311e10e65932fe069bed2d42c5bf2f88141>828bdad3796184870cb8cf3019da264e56b39eccf7224d43a1b98d788b40a4042aac790e946f
SHAAlg = SHA1
e = 000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000>000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000>0000000000000000000000000000000000000000000000000000000000000000000000000003
Msg = 64b13df4b008ccccd5ce146018481c2568bbe2b93ec658d1c7f4ad734592cd65b3be2be5a7c1be9a7d9f49cbb2>ece0cf8ee0a8c406aede84e0121bd51829d6e083862ae5b282d92c19d3923f70616f565a55c2134572116f91a8>5ff5f4e6ad2e1d31c15c97f3266af19574241c4fd2a4143fb80cc2b9fa7b22df0239a1715c35
S = 5b4458f6aeff91c4699ee9bdf8757987fb8db229814a2992945ac53bcf19b9179e53cfed258726d205107ac000>d41e570fe8c4fb321fc9b4b5469c60cd20032195f314ba6e6b0b30a51c9834242daa1ce525ec90380106568e78>2ea164baeda5d884defe6e720e9dd63618b823412445e17f991a6daa21bd62bdc73d7d8a20e5* 
```

这是一个应该通过的矢量文件：

```
# CAVS 11.5
# "SigVer PKCS#1 Ver 1.5" information for 
# Mod sizes selected: 1024 2048
# SHA Algorithm selected:SHA1 SHA256
# Generated on Mon Nov 28 14:03:58 2011

[mod = 1024]

n = 9de541c71a95389d9e8619ea1d6e2c69ed6c703701e518351676022ab98395d6b35a38b024f92bce6dd1c5be9d51dffd1687d19dceee73f2c73e4436b955231255f6e3e360ba84462311e10e65932fe069bed2d42c5bf2f88141828bdad3796184870cb8cf3019da264e56b39eccf7224d43a1b98d788b40a4042aac790e946f

SHAAlg = SHA1
e = 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011
Msg = fe196459e8232a9f94e8c93d88ddae7d38be7a10e2dd03ffb7bb9be43bd59659eec006b12c78c9e652f6c6d3220073a369459b8adea95eb34ede7979f634c7d931b208275365e201d4f82582b18553b70fab605721e1b6ae4d097cdb8a49183b0d16f22524917bd862176fb1fc1357a2731751df732c13dafc662e72bfbb9067
S = 94af4ce7f323d1bf4904a673d2884e30a55a108c44e4eb2bfc0a0f061f46fefe23fe74c760e947bd1fbf1bb1a30d66b3d7dccfb425d3a6551dd444f90d4f06c3e0da6dc3c7a45e062b08d24553f0091acae47ffaae495e13da66308dd9e0be87e2b960ab823f83e55815b66a1076ab238cc3883cbf7312521d0988214bb07d96 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T06:44:03.550

我已经更新了我的答案。当我说您的样本不起作用时，我是不正确的，因为签名与消息一样长。事实上，由于 RSA 加密发生在 SHA-1 计算之后，最终的签名可以长达*n*个字节，其中*n*是模数的大小`N`。

所以，据我所知，你可能根本没有问题。您确定您发布的样本是阳性案例吗？如果是这样，您确定它是使用`SHA1withRSA`算法创建的吗？

下面我包含了基于您的代码的示例 Groovy 代码。该代码基本上创建一个签名并验证它。[我从该](http://nmichaels.org/rsa.py)站点获得了公钥和私钥对，但任何密钥对都可以使用。该代码是不言自明的，因此我将总结一下签名应该如何工作，以防您想使用随机密钥对和消息进行测试和验证。

1.  计算消息**m**上的哈希码**h**。在这种情况下是。**[`h = SHA-1(m)`](http://www.fileformat.info/tool/hash.htm?hex=00)**
***   通过使用私钥**d**对其进行签名/加密来计算哈希码**h上的签名****s**。*****   通过使用公钥**e**验证/解密签名**s**并检查该值是否等于**m**的哈希码来验证签名 s 。******

 ******如您所见，上述步骤可以使用简单的 RSA 计算工具执行。我已经检查了我的代码中提供的示例是否正确。我发现有趣的是，`javax.crypto.BadPaddingException: Message is larger than modulus`如果模数为负（第 1 位设置为 2 的补码），Java 会抛出异常，因此我必须在左侧附加 1 个字节的零。

```
import java.security.*;
import java.security.interfaces.*;
import java.security.spec.*;

byte[] modulus = Utils.getBytes("00d94d889e88853dd89769a18015a0a2e6bf82bf356fe14f251fb4f5e2df0d9f9a94a68a30c428b39e3362fb3779a497eceaea37100f264d7fb9fb1a97fbf621133de55fdcb9b1ad0d7a31b379216d79252f5c527b9bc63d83d4ecf4d1d45cbf843e8474babc655e9bb6799cba77a47eafa838296474afc24beb9c825b73ebf549");
byte[] publicExp = Utils.getBytes("010001");
byte[] privateExp = Utils.getBytes("047b9cfde843176b88741d68cf096952e950813151058ce46f2b048791a26e507a1095793c12bae1e09d82213ad9326928cf7c2350acb19c98f19d32d577d666cd7bb8b2b5ba629d25ccf72a5ceb8a8da038906c84dcdb1fe677dffb2c029fd8926318eede1b58272af22bda5c5232be066839398e42f5352df58848adad11a1");
byte[] message = Utils.getBytes("00");
byte[] signature;
signature = createSignature("SHA1withRSA", System.out, message, modulus, privateExp, signature);
println ((new BigInteger(signature)).toString(16));
            verifySignature("SHA1withRSA", System.out, message, modulus, publicExp, signature);

public static boolean verifySignature(String algo, PrintStream oPS, byte[] message, byte[] modulus, byte[] exponent, byte[] sigBytes)  throws Exception
{
    Signature sig = Signature.getInstance(algo);
    KeyFactory keyMaker = KeyFactory.getInstance("RSA");
    RSAPublicKeySpec pubKeySpec = new RSAPublicKeySpec(new BigInteger(modulus), new BigInteger(exponent));
    RSAPublicKey pubKey = (RSAPublicKey)keyMaker.generatePublic(pubKeySpec);

    sig.initVerify(pubKey);
    sig.update(message);

    return sig.verify(sigBytes);
}

public static byte[] createSignature(String algo, PrintStream oPS, byte[] message, byte[] modulus, byte[] exponent, byte[] sigBytes)  throws Exception
{
    Signature sig = Signature.getInstance(algo);
    KeyFactory keyMaker = KeyFactory.getInstance("RSA");
    RSAPrivateKeySpec privKeySpec = new RSAPrivateKeySpec(new BigInteger(modulus), new BigInteger(exponent));
    RSAPrivateKey privKey = (RSAPrivateKey)keyMaker.generatePrivate(privKeySpec);

    sig.initSign(privKey);
    sig.update(message);

    return sig.sign();
}

class Utils{
    private static char[] lookup = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'];
    public static void outputValue(String s, byte[] data, int length, PrintStream out, boolean wtf){
        out.print(s+" = ");
        for(int i=0;i<length;i++){
            out.print(lookup[(data[i] >> 4) & 0xF]);
            out.print(lookup[data[i] & 0xF]);
        }
        out.println();
    }
    public static byte[] getBytes(String s){
        byte[] result = new byte[s.length()>>1];
        for(int i=0;i<result.length;i++){
            result[i] = Integer.parseInt(s.substring(i*2, i*2+2), 16);
        }
        return result;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:13:45.607

你的代码说：

```
BigInteger Nvalue = pubKey.getPublicExponent(); 
```

N 是密钥*模数，*而不是公共指数。您的文本标签和变量内容不匹配。

您的签名验证问题可能是其他问题。您是否收到错误消息，或者该`verify()`方法只是返回`false`？******

# c# - 为什么使用backgroundworker运行主UI时进度条没有更新？c#.net

> ID：11199841
> 
> 赞同：0
> 
> 时间：2012-06-26T01:59:25.463
> 
> 标签：c#, c#-4.0, progress-bar

任何人都可以启发我吗？直到主UI线程完成才更新，为什么会这样？

我的部分代码：

//初始化BW

```
 private void InitializeBW()
        {
            BW.WorkerReportsProgress = true;
            BW.WorkerSupportsCancellation = true;
            BW.DoWork +=
                 new DoWorkEventHandler(BW_DoWork);
            BW.RunWorkerCompleted +=
                new RunWorkerCompletedEventHandler(
            BW_RunWorkerCompleted);
            BW.ProgressChanged +=
                new ProgressChangedEventHandler(
            BW_ProgressChanged);

        } 
```

\做工作事件

```
 private void BW_DoWork(object sender, DoWorkEventArgs e)
        {
            BackgroundWorker worker = sender as BackgroundWorker;
        for (int i = CurrentProcess; i <= Process; i++)
        {
            if (worker.CancellationPending == true)
            {
                e.Cancel = true;
                break;
            }
            else
            {
                System.Threading.Thread.Sleep(100);
                worker.ReportProgress(i);
            }
        }
        CurrentProcess = Process;
    } 
```

\更新主界面

```
 private void BW_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            pgBar.Value = e.ProgressPercentage;
            lbProgress.Text = (e.ProgressPercentage.ToString() + "%");
            pgBar.Refresh();
            lbProgress.Refresh();
        } 
```

\我的主要用户界面操作

```
private void btnCreate_Click(object sender, EventArgs e)
        {
            try
            {
                DatabaseParam DBPara = new DatabaseParam();
                isCreate = true;
                EDFields(!isCreate);

                DBPara.ServerName = txtServerName.Text;
                DBPara.DatabaseName = "PARKS_ARCHIVE_" + nudYear.Value.ToString();
                DBPara.ID = txtUserName.Text;
                DBPara.Password = txtPassword.Text;
                DBPara.DataFileName = "PARKS_ARCHIVE_DATA_" + nudYear.Value.ToString();
                DBPara.DataPathName = txtPath.Text + "\\PARKS_ARCHIVE_DATA_" + nudYear.Value.ToString();
                DBPara.DataFileSize = "10MB";
                DBPara.DataFileGrowth = "1024MB";
                DBPara.LogFileName = "PARKS_ARCHIVE_LOG_" + nudYear.Value.ToString();
                DBPara.LogPathName = txtPath.Text + "\\PARKS_ARCHIVE_LOG_" + nudYear.Value.ToString();
                DBPara.LogFileSize = "10MB";
                DBPara.LogFileGrowth = "20MB";

                CreateDatabase(DBPara);
            }
            catch (Exception ex)
            {
                Logger.LogError("ucArchivePurge", "btnCreate_Click", ex.Message);
            }
            finally
            {
            }
        } 
```

//调用创建数据库和表

```
private void CreateDatabase(DatabaseParam DBParam)
    {
        try
        {
            Process = 7;
            BW = new BackgroundWorker();
            InitializeBW();
            if (BW.IsBusy != true)
            {
                // Start the asynchronous operation.
                BW.RunWorkerAsync();
            }
            System.Threading.Thread.Sleep(800);
            txtProgress.Text = "Creating " + DBParam.DatabaseName + "...";

        SQLConn.Open();
        myCommand = new SqlCommand(sqlCreateDBQuery, SQLConn);
        myCommand.ExecuteNonQuery();
        SQLConn.Close();
        BW.CancelAsync();

        Process = 14;
        BW = new BackgroundWorker();
        InitializeBW();
        if (BW.IsBusy != true)
        {
            // Start the asynchronous operation.
            BW.RunWorkerAsync();
        }
        System.Threading.Thread.Sleep(800);
        txtProgress.Text = "Creating Table tblAuditLogin...";
        txtProgress.Refresh();

        SQLCreate.Open();
        myCommand.Connection = SQLCreate;
        myCommand.CommandText = CreateAuditLogin;
        myCommand.ExecuteNonQuery();
        BW.CancelAsync();

        Process = 21;
        BW = new BackgroundWorker();
        InitializeBW();
        if (BW.IsBusy != true)
        {
            // Start the asynchronous operation.
            BW.RunWorkerAsync();
        }
        System.Threading.Thread.Sleep(800);
        txtProgress.Text = "Creating Table tblAuditTrail...";
        txtProgress.Refresh();               
        myCommand.CommandText = CreateAuditTrail;
        myCommand.ExecuteNonQuery();
        BW.CancelAsync();

        Process = 28;
        BW = new BackgroundWorker();
        InitializeBW();
        if (BW.IsBusy != true)
        {
            // Start the asynchronous operation.
            BW.RunWorkerAsync();
        }
        txtProgress.Text = "Creating Table tblCardType...";
        txtProgress.Refresh();
        System.Threading.Thread.Sleep(800);
        myCommand.CommandText = CreateCardType;
        myCommand.ExecuteNonQuery();

        Process = 35;
        BW = new BackgroundWorker();
        InitializeBW();
        if (BW.IsBusy != true)
        {
            // Start the asynchronous operation.
            BW.RunWorkerAsync();
        }
        txtProgress.Text = "Creating Table tblErrorLog...";
        txtProgress.Refresh();
        System.Threading.Thread.Sleep(800);
        myCommand.CommandText = CreateErrorLog;
        myCommand.ExecuteNonQuery();

        Process = 42;
        BW = new BackgroundWorker();
        InitializeBW();
        if (BW.IsBusy != true)
        {
            // Start the asynchronous operation.
            BW.RunWorkerAsync();
        }
        txtProgress.Text = "Creating Table tblKanban_Card...";
        txtProgress.Refresh();
        System.Threading.Thread.Sleep(800);
        myCommand.CommandText = CreateTableKanban;
        myCommand.ExecuteNonQuery();

        Process = 49;
        BW = new BackgroundWorker();
        InitializeBW();
        if (BW.IsBusy != true)
        {
            // Start the asynchronous operation.
            BW.RunWorkerAsync();
        }
        txtProgress.Text = "Creating Table tblModule_Master...";
        txtProgress.Refresh();
        System.Threading.Thread.Sleep(800);
        myCommand.CommandText = CreateTableModule;
        myCommand.ExecuteNonQuery();

        Process = 56;
        BW = new BackgroundWorker();
        InitializeBW();
        if (BW.IsBusy != true)
        {
            // Start the asynchronous operation.
            BW.RunWorkerAsync();
        }
        txtProgress.Text = "Creating Table tblMTV...";
        txtProgress.Refresh();
        System.Threading.Thread.Sleep(800);
        myCommand.CommandText = CreateTableMTV;
        myCommand.ExecuteNonQuery();

        Process = 63;
        BW = new BackgroundWorker();
        InitializeBW();
        if (BW.IsBusy != true)
        {
            // Start the asynchronous operation.
            BW.RunWorkerAsync();
        }
        txtProgress.Text = "Creating Table tblPickList_Detail...";
        txtProgress.Refresh();
        System.Threading.Thread.Sleep(800);
        myCommand.CommandText = CreateTablePickDetail;
        myCommand.ExecuteNonQuery();

        Process = 70;
        BW = new BackgroundWorker();
        InitializeBW();
        if (BW.IsBusy != true)
        {
            // Start the asynchronous operation.
            BW.RunWorkerAsync();
        }
        txtProgress.Text = "Creating Table tblPickList_Header...";
        txtProgress.Refresh();
        System.Threading.Thread.Sleep(800);
        myCommand.CommandText = CreatePickHeader;
        myCommand.ExecuteNonQuery();

        Process = 77;
        BW = new BackgroundWorker();
        InitializeBW();
        if (BW.IsBusy != true)
        {
            // Start the asynchronous operation.
            BW.RunWorkerAsync();
        }
        txtProgress.Text = "Creating Table tblProd_Requisition...";
        txtProgress.Refresh();
        System.Threading.Thread.Sleep(800);
        myCommand.CommandText = CreateTableProduction;
        myCommand.ExecuteNonQuery();

        Process = 84;
        BW = new BackgroundWorker();
        InitializeBW();
        if (BW.IsBusy != true)
        {
            // Start the asynchronous operation.
            BW.RunWorkerAsync();
        }
        txtProgress.Text = "Creating Table tblUser_Master...";
        txtProgress.Refresh();
        System.Threading.Thread.Sleep(800);
        myCommand.CommandText = CreateTableUser;
        myCommand.ExecuteNonQuery();

        Process = 91;
        BW = new BackgroundWorker();
        InitializeBW();
        if (BW.IsBusy != true)
        {
            // Start the asynchronous operation.
            BW.RunWorkerAsync();
        }
        txtProgress.Text = "Creating Table tblUser_Rights...";
        txtProgress.Refresh();
        System.Threading.Thread.Sleep(800);
        myCommand.CommandText = CreateTableRight;
        myCommand.ExecuteNonQuery();
        SQLCreate.Close();

        Process = 100;
        BW = new BackgroundWorker();
        InitializeBW();
        if (BW.IsBusy != true)
        {
            // Start the asynchronous operation.
            BW.RunWorkerAsync();
        }
        txtProgress.Text = "Updating Log File...";
        txtProgress.Refresh();
        myCommand.CommandText = Log;
        myCommand.Connection = SQLConn;
        SQLConn.Open();
        myCommand.ExecuteNonQuery();
        SQLConn.Close();
        if (MessageBox.Show("Database " + DBParam.DatabaseName + " has been successfully created !", "Message", MessageBoxButtons.OK, MessageBoxIcon.Information) == DialogResult.OK)
        {
            txtProgress.Text = "";
        }
    }
    catch (System.Exception ex)
    {
        MessageBox.Show(ex.Message, "Create Database",MessageBoxButtons.OK,MessageBoxIcon.Error);
    }
    finally
    {
        if (SQLConn != null)
            SQLConn.Close();
        if (SQLCreate != null)
            SQLCreate.Close();
        isCreate = false;
        EDFields(!isCreate);
    }
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:57:23.113

看起来您的大部分逻辑都在 UI 线程本身而不是在后台线程中。基本上，您的 UI 正在等待（或休眠），直到创建数据库才能更新。

BW_DoWork 应该调用其他方法。它本质上是您需要在主 UI 线程之外完成的所有工作的包装器。在您的代码中，您将其反转到方法调用工作人员的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T04:02:53.203

您应该将所有工作包装到创建数据库的单个后台工作人员中。您可以为创建数据库方法的步骤启动一系列方法，并检查每个方法的结果以确定是否应该取消。随着每个步骤（或方法）成功，您可以在回调事件 (BW_ProgressChanged) 上报告进度。在进度更改事件处理程序中，您想在那里更新 txtProgress 控件。如果您开始在后台线程中设置 UI 控件的属性，您将开始遇到跨线程问题。

```
using System.ComponentModel;
using System.Threading;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, System.EventArgs e)
    {
        // Start the BackgroundWorker.
        backgroundWorker1.RunWorkerAsync();
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        for (int i = 1; i <= 100; i++)
        {
        // Wait 100 milliseconds.
        Thread.Sleep(100);
        // Report progress.
        backgroundWorker1.ReportProgress(i);
        }
    }

    private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        // Change the value of the ProgressBar to the BackgroundWorker progress.
        progressBar1.Value = e.ProgressPercentage;
        // Set the text.
        this.Text = e.ProgressPercentage.ToString();
    }
    }
} 
```

BackgroundWorker 对象是使用 WinForms 执行此操作的传统方式，但是您看过[Task](http://msdn.microsoft.com/en-us/library/dd321424.aspx)吗？该任务是特定于 .net 4.0 框架的，因此它可能不适用，具体取决于您所针对的框架版本。

# dns - 我在哪里可以购买 .app TLD？

> ID：11199845
> 
> 赞同：17
> 
> 时间：2012-06-26T02:00:13.690
> 
> 标签：dns, appdomain, domain-name, tld, .app

我在哪里可以购买 .app 顶级域名 (TLD)？

我去过 Network Solutions、GoDaddy 等，但找不到销售 .app 域的人（例如[http://example.app](http://example.app)）。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-02-23T15:39:09.627

有兴趣的朋友更新一下。。。

> .app 的启动详细信息 我们目前正在启动我们的第四个开放顶级域 .app，这是一个更安全的应用程序域。从游戏到新闻到教育再到商业，.app 是在网络上推广应用程序的完美之选。.app 域是展示独特且值得信赖的目的地的好地方。如果您对携带 .app 域名感兴趣，可以在此处下载我们的 RRA。

```
Here are the important dates to be aware of in 2018:

Mar 29 - May 1: Trademark holders can register .app domains (known as the "Sunrise" period).
May 1 - May 8: Anyone can register available .app domains for an extra fee (known as the "Early Access" period).
May 8 and onwards: Anyone can register available .app domains (known as “General Availability").
Please note that a claims period will run indefinitely, during which trademark owners will receive notification when their marks are registered as domains.

For now we will be exclusively focusing on launching .app. We are continuing to work on plans for .dev, which shall be launched at a future time. Stay tuned for more details if you’re interested in carrying .dev! 
```

**2017 年 2 月 3 日更新**

```
.APP, coming soon

We're currently working on plans for .APP

If you’re an ICANN Accredited Domain Registrar click here to request more information

If you manage an app store for a mobile operating system, please click here to request more information about becoming a qualified partner for .APP. Criteria for being a qualified partner are listed in the contact form and may enable app stores to promote .APP to their developers, and potentially partner on discounts and/or limited registration periods. 
```

直接取自谷歌自己的[https://www.registry.google/](https://www.registry.google/)

**2017 年 1 月 5 日更新**

几乎没有更新，差不多两年后，仍然没有消息。Google 似乎将 .app 保留给自己，以保护他们的 Play 商店。

**2015 年 2 月 26 日更新**

我们去吧。拍卖结束了。谷歌以惊人的 2500 万美元赢得了它！他们现在必须决定如何处理它。

资料来源：[https ://gtldresult.icann.org/application-result/applicationstatus/auctionresults](https://gtldresult.icann.org/application-result/applicationstatus/auctionresults)

**2015 年 2 月 23 日更新**

两天后，.app TLD 的拍卖将最终进行。这意味着 .app 域名应该在未来几个月内可用。一旦公司赢得拍卖，它将确保尽快提供域名以开始赚钱。这是阻碍整个过程的最后一步。

资料来源：http: [//newgtlds.icann.org/en/applicants/auctions](http://newgtlds.icann.org/en/applicants/auctions)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-26T02:13:40.077

无处。ICANN 给出的时间表预计新 gTLD 将在 2013 年初之前可用：

[http://en.wikipedia.org/wiki/Generic_top-level_domain#New_top-level_domains](http://en.wikipedia.org/wiki/Generic_top-level_domain#New_top-level_domains)

您会知道它们何时开始运作，因为它们会出现在 IANA 的网站上：

[http://www.iana.org/domains/root/db/](http://www.iana.org/domains/root/db/)

有关 gTLD 的更多信息：

[http://newgtlds.icann.org/en/](http://newgtlds.icann.org/en/)

更新： .app 顶级域名可用，您可以通过访问[https://get.app/](https://get.app/)购买您的域名。所有域都需要 HTTPS，因为 .app 顶级域已预加载 HSTS。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-07-14T07:15:14.793

即使在今天，一年多之后，您也无法注册 .APP。

但你能做的，就是看谁会成为.APP注册（谁来操作.APP数据库）。

多个组织和公司申请成为注册机构，您可以在 ICANN 的网站上找到它：

[https://gtldresult.icann.org/application-result/applicationstatus/viewstatus](https://gtldresult.icann.org/application-result/applicationstatus/viewstatus)

（.APP 是申请最多的顶级域名，仅供参考。）

在我的网站[https://www.domainosity.com/domains/app/](https://www.domainosity.com/domains/app/)上，你可以更方便地看到信息，还有关于.APP的联合新闻，你也可以看到申请者信息的链接. 好主意可能是订阅他们的社交网络更新。

如果您观察情况如何发展（最终谁将成为注册机构），您将准备好尽快获得域名（因此有最大机会获得所需的名称）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-30T17:50:36.390

**7月31日更新**

gtld`.app`是所有 gtld 中竞争最激烈的。在撰写本文时，它还没有资格进入拍卖。这是决定它何时进入市场的关键。

以下是一些最有可能在 2015 年 3 月之后拍卖的“尚无资格参与拍卖”的新 gTLD：

> .Food、.Gay、.Blog、.Radio、.App、.Home、.Hotel、.Cloud、新闻、.Art、Music、.Movie、Store、.Wine、Search、.Kids/.Kid、.Car/汽车、.Sport/.Sports、.Game/Games 和 .Web/.Webs。

# haskell - 如何在 hackage 包中搜索功能？

> ID：11199853
> 
> 赞同：16
> 
> 时间：2012-06-26T02:01:32.147
> 
> 标签：haskell, hackage

也许我遗漏了一些东西，但是有没有办法在一些关于hackage的包中搜索？

假设我知道 Snap 框架有一个名为`render`. 我如何从它的 hackage 页面开始找到它：http: [//hackage.haskell.org/package/snap-0.9.0.1](http://hackage.haskell.org/package/snap-0.9.0.1)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-26T02:35:28.910

您可以使用搜索运算符为此使用[Hoogle](http://www.haskell.org/hoogle/)（以及其他许多事情） 。`+package`

默认情况下，Hoogle 将在一组标准的包中按名称或类型进行搜索：

*   [搜索`traverse`](http://www.haskell.org/hoogle/?hoogle=traverse)会发现：
    *   [`traverse :: (Traversable t, Applicative f) => (a -> f b) -> t a -> f (t b)`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Traversable.html#v:traverse)
        [基本](http://hackage.haskell.org/package/base/) [数据.Traversable](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Traversable.html#v:traverse)
    *   [`traverse_ :: (Foldable t, Applicative f) => (a -> f b) -> t a -> f ()`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Foldable.html#v:traverse_)
        [base](http://hackage.haskell.org/package/base/) [Data.Foldable](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Foldable.html#v:traverse_)
        将结构的每个元素映射到一个动作，从左到右评估这些动作，并忽略结果。
    *   … 等等
*   [搜索`(a -> b -> c) -> f a -> f b -> f c`](http://www.haskell.org/hoogle/?q=(a+-%3E+b+-%3E+c)+-%3E+f+a+-%3E+f+b+-%3E+f+c)会发现：
    *   [`liftM2 :: Monad m => (a1 -> a2 -> r) -> m a1 -> m a2 -> m r`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Monad.html#v:liftM2)
        [base](http://hackage.haskell.org/package/base/) [Control.Monad](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Monad.html#v:liftM2)
        将函数提升为 monad，从左到右扫描 monadic 参数。
    *   [`liftA2 :: Applicative f => (a -> b -> c) -> f a -> f b -> f c`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Applicative.html#v:liftA2)
        [base](http://hackage.haskell.org/package/base/) [Control.Applicative](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Applicative.html#v:liftA2)
        将二元函数提升到动作。
    *   … 等等

现在，这很好，很漂亮，但是其他包呢？如果你[搜索`render`](http://www.haskell.org/hoogle/?q=render)，你会发现[`Render :: RenderMode`](http://hackage.haskell.org/packages/archive/OpenGL/latest/doc/html/Graphics-Rendering-OpenGL-GL-Selection.html#v:Render)from [OpenGL](http://hackage.haskell.org/package/OpenGL/)、[`render :: Doc -> String`](http://hackage.haskell.org/packages/archive/pretty/latest/doc/html/Text-PrettyPrint-HughesPJ.html#v:render)from [pretty](http://hackage.haskell.org/package/pretty/)和其他一些东西；默认情况下不搜索 snap 包。

但是，如果您在搜索中添加`+packagename`或添加`+Module.Name`，Hoogle 将*仅*在指定的包内进行搜索（并`-packagename`从`-Module.Name`搜索中删除包/模块）。因此，[搜索`+snap render`](http://www.haskell.org/hoogle/?hoogle=%2Bsnap+render)只能找到以下三件事：

*   [`render :: HasHeist b => ByteString -> Handler b v ()`](http://hackage.haskell.org/packages/archive/snap/latest/doc/html/Snap-Snaplet-Heist.html#v:render)
    [snap](http://hackage.haskell.org/package/snap/) [Snap.Snaplet.Heist](http://hackage.haskell.org/packages/archive/snap/latest/doc/html/Snap-Snaplet-Heist.html#v:render)
    将模板呈现为 text/html。如果未找到给定的模板，则返回空。
*   [`renderAs :: HasHeist b => ByteString -> ByteString -> Handler b v ()`](http://hackage.haskell.org/packages/archive/snap/latest/doc/html/Snap-Snaplet-Heist.html#v:renderAs)
    [snap](http://hackage.haskell.org/package/snap/) [Snap.Snaplet.Heist](http://hackage.haskell.org/packages/archive/snap/latest/doc/html/Snap-Snaplet-Heist.html#v:renderAs)
    将模板呈现为给定的内容类型。如果未找到给定的模板，则返回空。
*   [`renderWithSplices :: HasHeist b => ByteString -> [(Text, SnapletSplice b v)] -> Handler b v ()`](http://hackage.haskell.org/packages/archive/snap/latest/doc/html/Snap-Snaplet-Heist.html#v:renderWithSplices)
    [snap](http://hackage.haskell.org/package/snap/) [Snap.Snaplet.Heist](http://hackage.haskell.org/packages/archive/snap/latest/doc/html/Snap-Snaplet-Heist.html#v:renderWithSplices)
    使用一组给定的拼接渲染模板。这是 heistLocal、bindSplices 和 render 的常见组合的语法糖。

For more information on using Hoogle, you can [check its manual on the Haskell wiki](http://www.haskell.org/haskellwiki/Hoogle).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-26T02:06:39.757

单击包中某个模块的链接。然后在右上角，有一个[索引](http://hackage.haskell.org/packages/archive/snap/0.9.0.1/doc/html/doc-index.html)链接。单击它，然后单击指向所需功能开头的字母的链接。

# objective-c - 如何让用户在 xcode 中填写 url 链接的其余部分？

> ID：11199856
> 
> 赞同：0
> 
> 时间：2012-06-26T02:01:45.243
> 
> 标签：objective-c, xcode, url, hyperlink

我正在使用 xcode，并且一直在编写 URL 链接。我希望用户填写我编写的 URL 代码的其余部分。

这是代码：

**- (IBAction)openURL:(id)sender { [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://facebook.com/....."]]; }**

用户将看到：facebook.com/*在此处写下您的地址...*

“ *facebook.com/* ”部分是一个标签，“*在这里写下你的地址……* ”是一个填写应用程序设置的文本字段。例如我可以在设置中写“JJMLS”，所以结果是“facebook.com/JJMLS”。

我在结果区域上放置了一个自定义/不可见的“openURL”按钮。

我如何告诉 xcode @"http://facebook.com/(.....)" 部分是用户填写时应该获得 JJMLS 结果的区域？？？

我将非常感谢一些帮助！

-JJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:30:15.513

尝试这样的事情：

```
- (IBAction)openURL:(id)sender {

    if(textfield.text == nil){

        UIAlertView *noTextAlert = [UIAlertView initWithTitle: @"No text entered!"
                                                      message: @"Please enter some text"
                                                     delegate: self
                                            cancelButtonTitle: @"Ok"
                                            otherButtonTitles: nil];

        [noTextAlert show];
    }

    else{

        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://facebook.com/%@", textfield.text]]]; 
    }
} 
```

如果您对代码有任何疑问，请在评论中提出。希望这可以帮助！

# objective-c - iOS 新手：需要帮助理解核心图形层

> ID：11199859
> 
> 赞同：0
> 
> 时间：2012-06-26T02:02:04.030
> 
> 标签：objective-c, ios5, core-graphics

iOS的一个新手问题，刚开始学习Core Graphics，但我仍然不确定它是如何集成到实际视图中的

所以我有一个创建 CGLayer ref 的方法，在其上绘制一些贝塞尔曲线，然后返回 CGLayer；这是我的程序的一个非常精简的版本：

```
CGContextRef ctx = UIGraphicsGetCurrentContext();
CGLayerRef layer = CGLayerCreateWithContext(ctx, CGSizeMake(300.0,300.0), NULL);
CGContextRef layerCtx = CGLayerGetContext(layer); 
```

然后我添加了一些通过解析 SVG 文件动态生成的贝塞尔填充。

我已经验证了 SVG 正在被正确解析，我正在使用此代码[http://ponderwell.net/2011/05/converting-svg-paths-to-objective-c-paths/](http://ponderwell.net/2011/05/converting-svg-paths-to-objective-c-paths/)来解析路径说明（从路径标签的 d 参数）到 UIBezierPath 对象

所以我从创建填充开始

```
CGColorRef color = [UIColor colorWithRed:red green:green blue:blue alpha:1.0].CGColor;
CGContextSetFillColorWithColor(layerCtx, color); 
```

然后添加 UIBezierPath

```
SvgToBezier *bezier = [[SvgToBezier alloc] initFromSVGPathNodeDAttr:pathAttr rect:CGRectMake(0, 0, 300, 300)];

UIBezierPath *bezierPath = bezier.bezier;

CGContextAddPath(layerCtx, bezierPath.CGPath);
CGContextDrawPath(layerCtx, kCGPathFill); 
```

最后我像这样返回 CGLayerRef

```
return layer; 
```

我的问题：现在我有了这个图层引用，我想将它绘制到 UIView （或任何类型的对象最好绘制到）

最终目标是让图层显示在 UITableViewCell 中。

此外，我上面描述的方法存在于我从头开始创建的一个类中（它继承自 NSObject）。有一个单独的方法使用此方法将层引用分配给类实例的属性。

我将从连接到我的表视图的视图控制器创建这个实例。然后希望将图层添加到“cellForRowAtIndexPath”方法中的 UITableView 单元格。

我希望我包含了所有相关信息，非常感谢您的帮助。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:06:29.703

简短的回答是您要绘制的图层需要设置为新创建的图层。

```
[myCurrentViewController.view setLayer:newLayer]; 
```

长答案可以在优秀的 Quartz2D 编程指南中找到，在[这里](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_layers/dq_layers.html)找到。

# css - 如何将列宽设置为尽可能小？

> ID：11199863
> 
> 赞同：5
> 
> 时间：2012-06-26T02:02:41.477
> 
> 标签：css, html-table, width

我正在尝试将最后三列设置为尽可能小，因为它们只是保存用于操作的图标/链接。

我还希望大文本列具有尽可能多的剩余宽度。

这是我能够找到但对我不起作用的内容：

[两列表：一个尽可能小，另一个占据其余部分](https://stackoverflow.com/questions/4424245/two-columns-table-one-as-small-as-possible-the-other-takes-the-rest-html-css)

这个解决方案对我不起作用，因为我有多个列，我想占用尽可能多的空间，所以我不能将它们中的任何一个设置为宽度 = 100%。

[强制列大小尽可能小](https://stackoverflow.com/questions/5215525/force-column-size-to-smallest-possible)

我尝试使用相对长度（width="*"），但似乎没有任何效果。也许是因为我之前没有设置任何宽度，所以没有“剩余宽度”可以分配？

HTML：

```
<table>
  <colgroup class='data' span='5'>
    <col class='date' span='1'/>
    <col class='id' span='1'/>
    <col class='title' span='1'/>
    <col class='status' span='1'/>
    <col class='description' span='1'/>
  </colgroup>
  <colgroup class='action' span='3'>
    <col class='show' span='1'/>
    <col class='edit' span='1'/>
    <col class='delete' span='1'/>
  </colgroup>
  <tr>
    <th>Date</th>
    <th>ID</th>
    <th>Title</th>
    <th>Status</th>
    <th>Description</th>
    <th colspan='3'></th>
  </tr>

  <tr>
    <td class='date'>medium</td>
    <td class='id'>medium</td>
    <td class='title'>large</td>
    <td class='status'>medium</td>
    <td class='description'>large</td>
    <td class='show'>small</td>
    <td class='edit'>small</td>
    <td class='delete'>small</td>
  </tr>
</table> 
```

CSS：

```
table {
  width: 100%;
}

table td.title, td.description {
  text-align: left;
}

table td.date, td.id, td.status {
 text-align: center;
}

table td.show, td.edit, td.delete {
}

table colgroup.action col {
  width:"1*";
}

table colgroup.data col {
  width:"*";
} 
```

所以按照优先顺序：

*   表格跨越父容器的整个宽度

*   最后三个图标/操作列尽可能小，没有任何截断

*   具有“大”数据（类标题和描述）的列应尽可能多地占用剩余空间

*   具有“中等”数据的列应该是其内容的大小，两边都有一些边距（如果很难做到这一点，我不介意只扔一个固定的宽度）

我不需要 colgroup 和 col 标签，但我只是将它们留在这里以防它们有用。我尝试了使用和不使用它们的不同排列，但似乎仍然无法让它工作。我还考虑过对数据列使用百分比，但我希望浏览器根据实际内容确定宽度，而不是我强加可能不是最佳的预定义规则。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-16T16:52:59.510

对于要缩小的列，将宽度设置为 1 px：

```
table {
  width: 100%;
}

th, td {
  border: 1px solid #eee;
}

td.title, td.description {
  text-align: left;
}

td.date, td.id, td.status {
  padding: 0 10px;
  text-align: center;
  width: 1px;
}

td.show, td.edit, td.delete {
  width: 1px;
} 
```

然后你就可以完全摆脱 colgroups 了。

[在此处](http://jsfiddle.net/KQs2K/10/)查看演示。

顺便说一句，您可以考虑改用[CSS 灵活框](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Using_CSS_flexible_boxes)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:42:48.447

回答您的一项请求：

> 最后三个图标/操作列尽可能小，没有任何截断

为此，我会将s 或设置`float`为`td``display:inline-block;`

如果您知道正在使用的图标的大小，则可以`th`在图标上方设置宽度（我称之为`class="icons"`）。

如果你不知道宽度，你可以使用一些 jQuery 来计算。

```
var a = $('td.show').width();
var b = $('td.edit').width();
var c = $('td.delete').width();

$('.icons').css('width', a+b+c+6+"px"); 
```

示例：http: [//jsfiddle.net/KQs2K/1/](http://jsfiddle.net/KQs2K/1/)

*需要额外的 6px 来填充我在示例中抛出的边框位*

注意：`td`当屏幕尺寸变得非常小时，这些 s 将堆叠。

# android - 把电脑变成安卓手机的底座

> ID：11199867
> 
> 赞同：1
> 
> 时间：2012-06-26T02:02:51.613
> 
> 标签：android, audio

我正在尝试通过 USB 连接让手机中的所有音频通过我的电脑扬声器。有谁知道如何实现它？我正在尝试编写一些代码，让我的电脑被识别为我的 Galaxy s2 手机的底座。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:17:35.307

没有标准的方法可以做到这一点，除非给定的供应商已将其实现为自定义扩展。

实际上，做一些通过 wifi 传输的机制比通过 USB 电缆更容易，除非您利用 SDK 的 adb 工具或 USB 共享功能通过电缆获得网络连接。

但是您将面临的一个关键问题是非 root 设备上的 3rd 方 android 应用程序无法获得拦截来自其他不相关应用程序的音频的权限。

听起来很傻，如果你想让你的电脑成为任意应用音频的“底座”，你可能需要一根 3.5 毫米的模拟立体声跳线。或者可能有一些 PC 蓝牙适配器可以被黑客入侵，使其看起来像手机的立体声耳机。

如果您满足于播放特殊软件选择的歌曲，我相信您可以在市场上找到一个 wifi 流媒体应用程序或自己制作；或者您可以使用 USB 大容量存储或 MTP（取决于 Android 版本）从 PC 访问设备上的文件，并在基于 PC 的播放器中播放它们。

**编辑猜猜 Google IO 2012 刚刚宣布了什么**

[http://developer.android.com/tools/adk/adk2.html#audio-dock](http://developer.android.com/tools/adk/adk2.html#audio-dock)

> USB Audio Dock 实施 ADK 2012 引入的一项重要新功能是能够通过 USB 连接播放音频。这项创新是作为 Android Open Accessory (AOA) 协议 2.0 的更新引入的，可在运行 Android 4.1（API 级别 16）及更高版本的设备上使用。
> 
> ADK 2012 为配件开发人员提供了此功能的参考实现。连接的Android设备上无需安装任何软件应用程序，配件开发者只需支持AOA v2。

假设 USB 主机将是一个小型嵌入式板，但我不明白为什么您不能让 PC 完成任务，至少如果您设法在 USB 主机上安装任何现有驱动程序电脑不碍事。

当然，缺点是您需要 Android 4.1 或更高版本的设备……这样的手机并不多。但是，如果您使用生根方法，您可以尝试创建一个兼容或至少相似的界面。

# c++ - 如何制作多人 Flash 游戏？有哪些套接字库/我如何制作自己的？

> ID：11199868
> 
> 赞同：4
> 
> 时间：2012-06-26T02:03:04.300
> 
> 标签：c++, python, actionscript-3, flash

我知道以前有人问过这个问题，但显然到目前为止我发现的所有库都没有文档。

您是否知道任何具有 C++ 或 Python（用于服务器端）的适当文档。或者您能否提供一个示例代码，其中一个简单的“Hello world”消息从 Flash 发送到 Python/C++/anything，然后通过 XMLSocket 发送回来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:25:33.007

查看 ElectroTank 服务器和 SmartFox 服务器。它们都被广泛使用。作为额外的奖励，ElectroTank 的作者发布了一本非常好的书，详细介绍了制作多人 Flash 游戏的来龙去脉。

[http://www.smartfoxserver.com/](http://www.smartfoxserver.com/)

[http://www.electrotank.com/es5.html](http://www.electrotank.com/es5.html)

[http://books.google.com/books/about/ActionScript_for_Multiplayer_Games_and_V.html?id=hDZRa52__F8C](http://books.google.com/books/about/ActionScript_for_Multiplayer_Games_and_V.html?id=hDZRa52__F8C)

我有这本书，并且会推荐它作为对该主题的可靠介绍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T13:45:02.030

此站点上有一个用 php/as3 编写的套接字服务器/客户端的链接：

[http://www.kilometer0.com/blog/code/php-xml-socket-server/](http://www.kilometer0.com/blog/code/php-xml-socket-server/)

它非常简单，只处理几条消息，但您可以在此基础上进行构建。

# java - 创建一个应该始终使用套接字或其他技术运行的服务器

> ID：11199869
> 
> 赞同：-1
> 
> 时间：2012-06-26T02:03:07.250
> 
> 标签：java, sockets

我在这里有一项任务，我无法最终确定，也不确定哪种技术选择了我的问题。这是我的问题的解释。我的应用程序是独立的应用程序，将部署在不同的位置。可以说 LocA、LocB 等等。每个位置都有自己的客户端，一些客户端通过 LAN 连接，一些是第三方客户端。只要客户端通过局域网连接就没有请求和响应的问题。但是会有很少的客户端不通过局域网连接。

对于第三方客户，我们将提供 IP 和 PORT 以连接和请求标准 HL7 格式的数据。这里的问题是客户端可以使用任何技术创建自己的客户端程序。他们可能会使用 Socket 编程、.NET 套接字编程等。但是我们的服务器应该接受来自客户端的连接，无论它是什么技术，处理他们的请求并回复他们。并且要求服务器程序应该始终运行并监听分配的端口，或者每当有对特定端口的请求时，启动我们的服务器程序并处理客户端请求并响应客户端。

如果我的英语让你感到困惑，请原谅我。请给我一个解决我的问题的方法。

注意：客户端程序可以是任何技术和任何编程语言。这取决于客户他们想使用哪种方式与服务器连接并发送他们的请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:11:00.310

**使用带有在客户端和服务器之间传递**的序列化对象的 TCP 套接字连接。这是必需的，否则传输过来的信息将在翻译中丢失。使用此方法，您必须向客户端提供需求（序列化对象），以便程序可以相互通信。如果您使用（来自 java）套接字连接，它将能够接受端口上的任何传入 TCP 连接。

这是我所指的一个好主意

```
try
    {
        socket = new ServerSocket(portnum);
    }
    catch (IOException ioe)
    {
        output.append("IOException getting server socket\n" + ioe + "\n");
        return;
    }
    while (true)
    {
        try
        {
            client = socket.accept();
            output.append("Connected to client at " + client.getInetAddress());
            clientHandler(client);
        }
        catch (IOException ioe)
        {
            output.append("IOException during accept \n " + ioe + "\n");
            return;
        }
    } 
```

这将在端口“portnum”上接受任何 TCP 连接请求。

确保对您的应用程序进行多线程处理，否则在连接已建立时您将无法接受任何连接请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T03:02:29.770

我在这里举一个小例子，客户端和服务器如何与 Socket 一起工作，我还包括**服务器端的多线程。**

**客户端代码：**

```
public class ClientWala {

    public static void main(String[] args) throws Exception{

        Boolean b = true;
    Socket s = new Socket("127.0.0.1", 4444);

    System.out.println("connected: "+s.isConnected());

    OutputStream output = s.getOutputStream();
    PrintWriter pw = new PrintWriter(output,true);

    // to write data to server
    while(b){

        if (!b){

             System.exit(0);
        }

        else {
            pw.write(new Scanner(System.in).nextLine());
        }
    }

    // to read data from server
    InputStream input   = s.getInputStream();
    InputStreamReader isr = new InputStreamReader(input);
    BufferedReader br = new BufferedReader(isr);
    String data = null;

    while ((data = br.readLine())!=null){

        // Print it using sysout, or do whatever you want with the incoming data from server

    }

    }
} 
```

**服务器端代码：**

```
import java.io.*
import java.net.*;

public class ServerTest {

    ServerSocket s;

    public void go() {

        try {
            s = new ServerSocket(44457);

            while (true) {

                Socket incoming = s.accept();
                Thread t = new Thread(new MyCon(incoming));
                t.start();
            }
        } catch (IOException e) {

            e.printStackTrace();
        }

    }

    class MyCon implements Runnable {

        Socket incoming;

        public MyCon(Socket incoming) {

            this.incoming = incoming;
        }

        @Override
        public void run() {

            try {
                PrintWriter pw = new PrintWriter(incoming.getOutputStream(),
                        true);
                InputStreamReader isr = new InputStreamReader(
                        incoming.getInputStream());
                BufferedReader br = new BufferedReader(isr);
                String inp = null;

                boolean isDone = true;

                System.out.println("TYPE : BYE");
                System.out.println();
                while (isDone && ((inp = br.readLine()) != null)) {

                    System.out.println(inp);
                    if (inp.trim().equals("BYE")) {
                        System.out
                                .println("THANKS FOR CONNECTING...Bye for now");
                        isDone = false;
                        s.close();
                    }

                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                try {
                    s.close();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
                e.printStackTrace();
            }

        }

    }

    public static void main(String[] args) {

        new ServerTest().go();

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T02:21:54.097

看到您提到 HL7，您可能应该看看 HAPI [(http://hl7api.sourceforge.net/)](http://hl7api.sourceforge.net/)它带有大量文档，包括发送和接收消息的[示例](http://hl7api.sourceforge.net/xref/ca/uhn/hl7v2/examples/SendAndReceiveAMessage.html)。

请注意，只要它们的 HL7 实现是兼容的，您的客户端程序使用什么技术并不重要。另外：套接字在没有 LAN 的情况下也能正常工作，因为 127.0.0.1（本地主机地址）始终可用。

# javascript - Evernote 的 Javascript API？

> ID：11199870
> 
> 赞同：2
> 
> 时间：2012-06-26T02:03:09.980
> 
> 标签：javascript, evernote

[顶部搜索结果](http://discussion.evernote.com/topic/22476-api-for-javascript/)没有给我任何东西。有现成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:55:51.893

没有 javascript api 可以直接下载。

但是，您可以下载[thrift 文件](https://github.com/evernote/evernote-thrift)，您应该能够通过[Apache Thrift](http://thrift.apache.org/)运行这些文件来生成 javascript api 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T15:30:03.753

如果你想在 Node JS 中使用 Evernote API。您可以使用[evernode](https://github.com/cloudsnap/evernode)。

此外，您可以查看[我的项目](https://github.com/berryboy/everest-js)以获取代码示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-04T08:53:58.210

Evernote 在这里发布[了一个 Javascript SDK](https://github.com/evernote/evernote-sdk-js)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T14:45:51.373

Kandasoftware在 MIT 许可下在[https://github.com/kandasoftware/evernote-sdk-javascript](https://github.com/kandasoftware/evernote-sdk-javascript)推出了 JavaScript API 包装器。

我还没有使用它，所以我无法评论它的质量。但是他们在他们的产品中使用它，所以它应该是可行的。

请参阅[http://discussion.evernote.com/topic/22476-api-for-javascript/](http://discussion.evernote.com/topic/22476-api-for-javascript/)以获取将我引导至存储库的链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T02:22:27.033

他们似乎不支持 JS API 。

请参阅[http://dev.evernote.com/documentation](http://dev.evernote.com/documentation)

```
Supported languages: Objective-C, Java, PHP, Ruby, Python, Perl, C#, C++, ActionScript, JavaME
You make web service calls directly
Provides complete access to the Evernote service
API only - no user interfaces
Cloud API documentation » 
```

# php - 两根针之间的php preg_replace

> ID：11199872
> 
> 赞同：0
> 
> 时间：2012-06-26T02:03:18.610
> 
> 标签：php, preg-replace

我知道之前已经提出并回答过这类问题，但我无法隔离模式匹配中的错误。

由于一些非常棘手的遗留数据库输入，我试图删除两个 html 特殊字符之间的任何内容，然后继续处理剩余的内容。原始代码`1<b>2`在 1 之后变为粗体，但最终变为`1&lt;b&gt;2`

我想留下一个`1&lt;&gt;2`或`1 2`

我什至接近吗？

谢谢艺术

```
$str = '1&lt;b&gt;2';
$output = preg_replace('/&#?[a-z0-9]{2,8};(.*?)\/&#?[a-z0-9]{2,8};/is', '',$str); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T02:36:24.187

看起来你应该删除中间的斜线

```
/&#?[a-z0-9]{2,8};[^&]+&#?[a-z0-9]{2,8};/is 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:26:12.160

您是否尝试过：

```
$str = strip_tags(html_entity_decode('1&lt;b&gt;2')); 
```

或者如果你想用其他东西替换标签，比如空格：

```
$str = html_entity_decode('1&lt;b&gt;2');
$output = preg_replace('/<\/?[^\>]+>/ui', ' ',$str); 
```

# clojure - Clojure 命名空间转换 - 到 _

> ID：11199873
> 
> 赞同：2
> 
> 时间：2012-06-26T02:03:57.373
> 
> 标签：clojure, noir

Noir 错误页面上显示的错误：`java.io.FileNotFoundException: Could not locate boundaries/lat_long__init.class or boundaries/lat_long.clj on class path`

需要它的代码：

```
(ns boundaries.views.boundary
  (:use noir.core
        hiccup.core
        hiccup.page-helpers)
  (:require
    [boundaries.lat-long :as lat-long]
    [noir.response :as resp])) 
```

为什么要寻找`lat_long`而不是指定的`lat-long`？边界/lat-long.clj 以及相应的边界.lat-long 命名空间存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T02:06:53.177

JVM 不允许`-`在类名中使用 s，因此 Clojure 编译器将它们转换为`_`s

问题很可能与 project.clj 依赖项有关。

在诊断此类问题时：

*   REPL 中是否有可用的命名空间？
*   .class 文件是否出现在项目的 lib 目录中？
*   重新运行`lein deps`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:43:37.630

您需要将边界/lat-long.clj 重命名为边界/lat_long.clj。

请注意，您不必更改命名空间名称。clojure 约定是使用“-”作为函数和命名空间名称。

来自 Stuart Sierra 在[https://stackoverflow.com/a/4451693/151650](https://stackoverflow.com/a/4451693/151650)的响应：“这是 Java 互操作性的必要解决方法。”

# jquery - 这个功能叫什么？我可以下载一个演示

> ID：11199878
> 
> 赞同：0
> 
> 时间：2012-06-26T02:04:46.007
> 
> 标签：jquery, html

附图中的这个功能叫什么？我可以下载它的演示吗？ ![基于jQuery的滑块](../Images/74746283210a282a16924decc49d61c8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:16:27.230

如果我是正确的，这是一个轮播。它会滑动图像吗？起初这可能会很棘手，但并不太难。只是谷歌 jquery 轮播。这是一个链接：[http ://www.pixelzdesign.com/blog_view.php?id=55](http://www.pixelzdesign.com/blog_view.php?id=55)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:14:47.623

它是一个旋转木马。你可以在那里找到几个 jquery 。

这是[一个带有 jQ​​uery 的简单无限轮播](http://www.queness.com/post/923/create-a-simple-infinite-carousel-with-jquery) 我将代码复制到 jsfiddle 供您查看 [jsfiddle 示例](http://jsfiddle.net/h9X6Y/)

第三方轮播： [Nivo 滑块](http://nivo.dev7studios.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T02:15:34.830

它被称为 jQuery 轮播。你可以在这里找到一些很好的例子：[http ://www.pixelzdesign.com/blog_view.php?id=55](http://www.pixelzdesign.com/blog_view.php?id=55)

# html - 隐藏元素的适当 WAI-ARIA 处理是什么？

> ID：11199879
> 
> 赞同：0
> 
> 时间：2012-06-26T02:04:47.563
> 
> 标签：html, css, accessibility, wai-aria

对于隐藏元素（由 CSS 隐藏），例如加载器图像/“请稍候”文本等，适当的 WAI ARIA 处理是什么？我想避免这些在最初隐藏时被屏幕阅读器读出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T04:46:25.307

使用 CSS`display:none`或`visibility:hidden`; 这两个都得到了所有主要屏幕阅读器的广泛支持。请注意，如果您已经在使用这些 - 那么您就完成了！除了这些之外，没有必要使用 aria-hidden 。

警惕其他隐藏事物的方式：使用较大的负偏移/边距或零高度/宽度可能在一两个浏览器/屏幕阅读器组合中起作用，但不是全部。因此，例如，如果通过将元素高度设置为 0 来隐藏元素，请确保在动画结束时设置 display:none 或 visibility:false。

以下是有关此信息的一些来源：

*   [雅虎无障碍图书馆](http://yaccessibilityblog.com/library/accessible-hiding-content.html)
*   [WebAIM - 考虑到可访问性：在行动中的 CSS：仅适用于屏幕阅读器用户的不可见内容](http://webaim.org/techniques/css/invisiblecontent/)

# objective-c - 距离排序问题

> ID：11199887
> 
> 赞同：0
> 
> 时间：2012-06-26T02:05:27.850
> 
> 标签：objective-c, ios5

我对实体距离排序有点问题。例如，13 英里将排在第一位，2 英里将排在第二位。这是我的代码：

```
NSArray *sortedArray;
        sortedArray = [objects sortedArrayUsingComparator:^(id a, id b) {
            NSString * first= [(GooglePlacesObject*)a distanceInMilesString];
            NSString * second = [(GooglePlacesObject*)b distanceInMilesString];
            return [first compare:second];
        }
        ];

        for (GooglePlacesObject * place in sortedArray) {
            Model * model = [Model fetchFromGooglePlacesObject:place];
            [self.gFoundModels addObject:model];

        }
    } 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:09:22.007

似乎您正在对字符串进行排序，所以 13 排在第一位，因为在默认比较器中比较字符串时，“13”小于“2”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:09:23.597

据我所见，您不应该比较字符串，而是将它们转换为浮点数并返回更大的浮点数。

编辑：

据我了解，是这样的

```
NSArray *sortedArray;
sortedArray = [objects sortedArrayUsingComparator:^(id a,id b)
{
    float first=[[(GooglePlacesObject*)a distanceInMilesString] floatValue];
    float second=[[(GooglePlacesObject*)b distanceInMilesString] floatValue];
    return first>second;
}]; 
```

# database - Sitecore - 将站点从一个安装转移到另一个

> ID：11199888
> 
> 赞同：1
> 
> 时间：2012-06-26T02:05:35.697
> 
> 标签：database, serialization, content-management-system, package, sitecore

我正在运行 Sitecore 6.5

我有两个 Sitecore 安装，并希望将整个站点从一个安装转移到另一个安装。

找到了一些关于序列化和创建包的文章，尽管它们没有详细说明这两者如何结合在一起。

如何将站点从一个安装转移到另一个安装？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T07:50:11.677

使用包设计器创建一个包。使用“静态项目”按钮包括这些项目及其子项。如果您已将解决方案特定项目放在文件夹中，则只需包含这些。

*   /sitecore/内容
*   /sitecore/布局
*   /sitecore/媒体库
*   /sitecore/templates/ （只取您创建的模板。例如用户定义的文件夹

使用“静态文件”按钮，将文件夹包含在您的解决方案特定更改中，例如：

*   /垃圾桶
*   /布局
*   /app.config/include （仅获取解决方案中更改的文件，与默认站点核心安装相比）
*   web.config（如果您对此进行了更改，与默认的 sitecore web.config 相比）

如果您有任何要转移到的用户帐户，您可以将它们包含在“安全帐户”中。

然后生成 zip 文件并安装在空站点核心上并完整发布:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:29:51.073

如果您的系统足够相似，您可能需要考虑通过备份/恢复（在 SQL 中）移动 Sitecore 数据库并复制文件系统资产。一般来说，我发现这比创建/安装非常大的包更快，更不容易出现用户错误。（请记住先备份。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:04:47.870

大包装有破裂的趋势，一种选择是调查这个：

[http://www.hhogdev.com/Products/Team-Development-for-Sitecore/Overview.aspx](http://www.hhogdev.com/Products/Team-Development-for-Sitecore/Overview.aspx)

TDS 可以将您的所有项目同步到您的开发盒上的 XML，然后您可以创建一种不同类型的安装包，它比您通过 Sitecore 桌面创建的常规包更强大。它与 Sitecore 在您升级版本时使用的包类型相同。

我相信这个产品有 60 天的试用期，所以有足够的时间来试用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-07T13:16:42.807

注意：在转移用户帐户时，使用包或序列化时不会迁移密码。

解决方案在这里 - Sitecore 的牛仔-aspx :) [https://kb.sitecore.net/articles/242631](https://kb.sitecore.net/articles/242631)

# c# - 从另一个函数中调用一个函数？

> ID：11199891
> 
> 赞同：0
> 
> 时间：2012-06-26T02:07:02.227
> 
> 标签：c#

我想在我将从 main 调用的新函数中使用另一个类中的函数。我正在尝试按如下方式执行此操作，但出现错误：

> 错误当前上下文中不存在名称“Class1”。

实际上，在我的代码中，我使用了不同的名称，但这只是为了说明结构并使您更容易阅读。

```
public class Class1
{      
    public static int[] Function1()
    {
       // code to return value
    }
}

public class Class2
{ 
      public static int Function2()
      {
         int[] Variable = Class1.Function1();
         //other code using function1 value
      }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T02:10:17.667

> 实际上，在我的代码中，我使用了不同的名称，但这只是为了说明结构并使您更容易阅读。

不幸的是，您已经使阅读变得如此容易，以至于您已经完全消除了问题！您发布的代码不包含错误并且完全有效。

错误信息非常清楚；从您实际调用代码的任何地方，“Class1”（或任何它可能是）都不在范围内。这可能是因为它位于不同的命名空间中。这也可能是您的班级名称中的一个简单错字。您的代码实际上看起来像这样吗？

```
namespace Different 
{
    public class Class1
    {      
        public static int[] Function1()
        {
           // code to return value
        }
    }
}

namespace MyNamespace
{    
    class Program
    { 
          static void Main(string[] args)
          {
              // Error
              var arr = Class1.Function();

              // you need to use...
              var arr = Different.Class1.Function();
          }
    }
} 
```

在您发布实际代码之前，这是我得到的最好的。

# javascript - 以编程方式将节点添加到 JsTree

> ID：11199892
> 
> 赞同：1
> 
> 时间：2012-06-26T02:07:16.653
> 
> 标签：javascript, jstree, nodes

我一直在进行一些故障排除，但无法执行我认为相当简单的操作，即以编程方式将节点添加到 jstree。目前我一直在尝试以我能想象的最简单的方式来做到这一点：

```
$('#irrigationClimateStations')
.jstree({
    'plugins' : ['themes', 'json_data', 'ui', 'crrm'],
    'json_data': {
        "data" : [
            { 
                "data" : "A node", 
                "metadata" : { id : 23 },
                "children" : [ "Child 1", "A Child 2" ]
            }
        ]
    },
    'themes': {
        'theme': 'weather'
    }
}); 
```

树已成功创建，但是当我尝试添加另一个节点时，没有任何反应（并且我没有收到来自 jstree 的错误）：

```
var newNode = {
    'attr' : { 'id' : this.model.get('id') },
    'data': { 
        'title': this.model.format('station_na'), 
        'icon': media_url + this.model._iconRootURL + 'weather-station-16x16.png'
    }
};
// Add the tree element to the end of the tree
$.jstree._reference('#irrigationClimateStations').create_node("#irrigationClimateStations", "last", newNode); 
```

我无法根据文档或源代码破译 API> 我还尝试使用核心文档中提到的“方法 2”创建节点：

```
var parent = $('#irrigationClimateStations').jstree('get_selected');
$('#irrigationClimateStations').jstree("create", parent, "last", newNode, false, false); 
```

有什么帮助吗？我正在运行 jstree v 1.0-rc3

# c# - 使用 Toolbar ItemsSource 无法解析视图

> ID：11199898
> 
> 赞同：2
> 
> 时间：2012-06-26T02:07:49.607
> 
> 标签：c#, .net, caliburn.micro, caliburn

当它被绑定为 ShellView 工具栏中的按钮列表时，Caliburn Micro 框架似乎没有检索我的 SinglePaintToolbarView。我希望按钮在添加到工具栏时仅显示其文本内容。但是，相反，我得到了这个：

![](../Images/9d141ef105ad308c4c5da087dda1be28.png)

工具栏中似乎没有任何可点击的按钮。我知道我的插件已成功加载，因为我能够将列表中的一个插件绑定为 ContentControl 并且视图出现了。当我尝试在工具栏中绑定插件列表时，它似乎不起作用。

这是我所拥有的：

ShellView.xaml

```
<UserControl x:Class="Starbolt.Views.ShellView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <ToolBarTray>
            <ToolBar ItemsSource="{Binding Path=ToolbarPlugins}"/>
        </ToolBarTray>
    </Grid>
</UserControl> 
```

ShellViewModel.cs

```
[Export(typeof(IShell))]
public class ShellViewModel : PropertyChangedBase, IShell
{

    [ImportMany(typeof(IToolbarPlugin))]
    private IEnumerable<IToolbarPlugin> _toolbarPlugins = null;

    public IEnumerable<IToolbarPlugin> ToolbarPlugins { get { return _toolbarPlugins; } }
} 
```

SinglePaintToolbarView.xaml

```
<UserControl x:Class="Starbolt.Plugin.SinglePaintTool.Views.SinglePaintToolView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="128" d:DesignWidth="32">
    <Button Name="btnSinglePaintTool" Content="Single Paint Tool" Width="128" Height="32"/>
</UserControl> 
```

SinglePaintToolViewModel.cs

```
[Export(typeof(IToolbarPlugin))]
public class SinglePaintToolViewModel : IToolbarPlugin
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:44:18.850

基本上，您的设计似乎有效。如果你更换

```
<ToolBarTray>
    <ToolBar x:Name="ToolbarPlugins"/>
</ToolBarTray> 
```

（请注意，您不需要`ItemsSource`显式绑定，您也可以使用 Caliburn Micro 属性名称约定）与以下内容：

```
<ListBox x:Name="ToolbarPlugins"/> 
```

按钮按`SinglePaintToolView`预期显示。

我怀疑问题出在`ToolBar` [ControlTemplate](http://msdn.microsoft.com/en-us/library/aa970772.aspx)上，它肯定比`ListBox` [ControlTemplate](http://msdn.microsoft.com/en-us/library/ms754242)更能限制工具栏项目的布局。

所以我的猜测是，如果你真的想使用`ToolBar`控件来显示你的`IToolbarPlugin`视图，你可能必须`ToolBar`在你的项目中设计一个专用的控件模板。

或者，您可以使用例如实现工具栏替换`ListBox`。这可能是一个开始：

```
<ListBox x:Name="ToolbarPlugins">
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal" />
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
</ListBox> 
```

# android - 在活动之外使用 getAssets

> ID：11199900
> 
> 赞同：5
> 
> 时间：2012-06-26T02:08:04.210
> 
> 标签：android

我尝试在我的 DatabaseHandler 类中解析一个文件，但 Eclipse 说：

> 方法 getAssets() 未为类型 DatabaseHandler 定义

这是代码：

```
 public class DatabaseHandler extends SQLiteOpenHelper {

    private static final int DATABASE_VERSION = 15;

    public DatabaseHandler(Context context) {
        super(context, "rettinfo", null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        Log.d("Create: ", "Creating antidotlist");
        String CREATE_ANTIDOT_TABLE = "CREATE TABLE antidots (id INTEGER PRIMARY KEY antidot TEXT, dos TEXT)";
        Log.d("Create: ", CREATE_ANTIDOT_TABLE);
        db.execSQL(CREATE_ANTIDOT_TABLE);

        InputStream antidots = getAssets().open("antidot/antidots");
        InputStreamReader input = new InputStreamReader(antidots);
        BufferedReader buffreader = new BufferedReader(input,2*1024);
        String line;
        while ((line = buffreader.readLine()) != null) {
            String[] point_t = line.split(",");
        }
        antidots.close();
    }

} 
```

**蒂姆的更新**

这就是日食不犯任何错误的方式

```
int i = 0;
InputStream antidots;
    try {
        antidots = mCtx.getAssets().open("antidot/antidots");
        InputStreamReader input = new InputStreamReader(antidots);
        BufferedReader buffreader = new BufferedReader(input,2*1024);
        String line;
        while ((line = buffreader.readLine()) != null) {
            i++;
            ContentValues values = new ContentValues();
            String[] antidot = line.split("#");
            int id = Integer.parseInt(antidot[0]);
            values.put("id", id);
            values.put("antidot", antidot[1]);
            values.put("dos", antidot[2]);  
            db.insert("antidots", null, values);                     
        }
        antidots.close();           
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-26T02:12:05.643

存储对`Context`从构造函数获得的引用，然后在该引用上调用 getAssets()。

```
public class DatabaseHandler extends SQLiteOpenHelper {

    private static final int DATABASE_VERSION = 15;
    private Context mCtx; //<-- declare a Context reference
    public DatabaseHandler(Context context) {
        super(context, "rettinfo", null, DATABASE_VERSION);
        mCtx = context; //<-- fill it with the Context you are passed
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        Log.d("Create: ", "Creating antidotlist");
        String CREATE_ANTIDOT_TABLE = "CREATE TABLE antidots (id INTEGER PRIMARY KEY antidot TEXT, dos TEXT)";
        Log.d("Create: ", CREATE_ANTIDOT_TABLE);
        db.execSQL(CREATE_ANTIDOT_TABLE);

        InputStream antidots = mCtx.getAssets().open("antidot/antidots"); //<-- call getAssets on your Context object.
        InputStreamReader input = new InputStreamReader(antidots);
        BufferedReader buffreader = new BufferedReader(input,2*1024);
        String line;
        while ((line = buffreader.readLine()) != null) {
            String[] point_t = line.split(",");
        }
        antidots.close();
    }

} 
```

# php - 在php中将mysql数字更改为日期格式

> ID：11199901
> 
> 赞同：0
> 
> 时间：2012-06-26T02:08:26.440
> 
> 标签：php, mysql, date

我有一个数据库，将月份和日期的值保存为整数。例如，6 月 25 日是（月列）6 和（日列）25。我在网站上有一个位置，我希望显示为 6 月 25 日而不是 6 月 25 日。不写案例语句有没有办法用 php 构建在日期函数中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T02:11:58.977

有几种方法可以做到这一点。一个使用示例[`date()`](http://us3.php.net/manual/en/function.date.php)：

```
echo date("F jS", strtotime($row['month'].'/'.$row['day'])); 
```

另一个使用[`DateTime`](http://us3.php.net/manual/en/book.datetime.php)：

```
$date = DateTime::createFromFormat("n/j", $row['month'].'/'.$row['day']);
echo $date->format("F jS"); 
```

另一个直接在 MySQL 中（未经测试）：

```
SELECT DATE_FORMAT(UNIX_TIMESTAMP('2012-',month,'-',day), "%M %D") AS the_date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:13:40.353

```
echo date('l \t\h\e jS'); 
```

这个必须做

# javascript - Jquery scrollTo serialScroll在ajax加载后跳回第一项

> ID：11199904
> 
> 赞同：0
> 
> 时间：2012-06-26T02:09:03.197
> 
> 标签：javascript, jquery, ajax, scrollto, serialscroll

我需要单击 jQuery serialScroll/scrollTo 中的 .next 按钮，不仅可以滑动到下一个项目，还需要在此之前对新内容进行 ajax 调用。在serialScroll中的.next按钮上进行ajax调用的最佳方法是什么？

这是 serialScroll 的东西；

```
$('.audioholder').serialScroll({
target:'.scrollable',
items:'.newthing',
prev:'img.prev',
next:'img.next',
cycle:false,
axis:'x',
duration:700,
force:true,
lazy:true,
}); 
```

和ajax代码：

```
 var target = $(this).closest('.newthing').next('.newthing');
        var toLoad = Drupal.settings.basePath + 'replies/' + mynid;
        xhr = $.ajax({
            url: toLoad,
            success: function(data) {
        $(target).html(data);

        });
        return false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:58:38.170

好吧，也许这并不理想，但我最终改用了 scrollTo 。

这是单击下一步按钮：

```
var myscrollable = $(this).closest('.scrollable');
myscrollable.scrollTo(target, 800 ); 
```

以及上一个按钮的代码：

```
var mynewthing = $(this).closest('.newthing');
var prevthing = mynewthing.prev(); 
var myscrollable = $(this).closest('.scrollable');
myscrollable.scrollTo(prevthing, 800); 
```

# javascript - 三.js SubdivisionModifier null 错误

> ID：11199908
> 
> 赞同：3
> 
> 时间：2012-06-26T02:09:33.160
> 
> 标签：javascript, three.js

我正在使用 Three.js 库并尝试将细分修改器应用于模型。我能够成功加载模型，并且也能够成功地将细分修改器应用于 CubeGeometry（例如）。当下面注释的行被删除时，下面的代码可以工作，但是当然不会有“细分”。当代码按原样运行时，JavaScript 控制台会给出错误“Uncaught TypeError: Cannot read property 'u' of null”。我最好的猜测是 clone() 方法还没有完成，所以 modify() 方法抛出了一个空异常。

关于如何解决这个问题的任何想法？

```
var loader = new THREE.JSONLoader();
loader.load( "models/parrot.js", function( geometry ) 
{
    var material = new THREE.MeshFaceMaterial();
    var mesh = new THREE.Mesh( geometry, material );
    mesh.position.set(-50,25,0);
    scene.add( mesh );

    var smooth = THREE.GeometryUtils.clone( geometry );
    smooth.mergeVertices();
    var divisions = 2;
    var modifier = new THREE.SubdivisionModifier( divisions );
    modifier.modify( smooth );   // This is the line causing the error
    var mesh2 = new THREE.Mesh( smooth, material );
    mesh2.position.set(50,25,0);
    scene.add( mesh2 ); 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T03:01:22.170

您可以尝试`modifier.supportUVs = false`抑制紫外线错误。

# regex - 从 HTML 中的多行中提取 InnerHTML

> ID：11199909
> 
> 赞同：2
> 
> 时间：2012-06-26T02:09:47.933
> 
> 标签：regex, perl

我正在使用 Perl 连接到站点，解析其 HTML 并提取标签之间的 innerHTML。在尝试高级概念之前，我先尝试更简单的概念。

我使用 LWP::UserAgent 向站点发送我的 HTTP GET 请求并接收我的响应。

我将响应存储在数组中，如下所示：

```
@res = ($ua->request($req))->content; 
```

**编辑：**要解析的 HTML：

```
<div class="new"> this is Line 1 </div>
<div>
      this is Line 2 </div> 
```

现在，我解析 HTTP 响应中的每一行并提取标签之间的文本：

```
foreach $line(@res)
{
chomp $line;
if($line =~ /<div[^>]*?>(.*)<\/div>/)
{
    $match = $1;
    print OUTPUT $match."\n";
}
} 
```

上述代码片段的问题是：

1.  它只匹配第一个成功匹配的 innerHTML。它不会打印所有成功的匹配项。我不知道为什么，循环应该按照我的方式工作。每次成功匹配后，变量 $match 的值都应该被捕获缓冲区的内容覆盖。

2.  如果标签跨越多行，它将无法提取 innerHTML 之间的文本。第一行有开始 div 标签，下一行有 innerHTML ，下一行有结束 div 标签。

我无法在这篇文章中编写 HTML，所以给出了描述。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:26:18.730

使用强大的 HTML 解析器：

```
use HTML::TreeBuilder::XPath qw();

my $tree = HTML::TreeBuilder::XPath->new;
$tree->parse($http_response->content);

for my $node ($tree->findnodes('//div')) {
    print $_->as_HTML for @{ $node->content_array_ref };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:18:36.500

您应该使用渐进匹配从一行中提取所有匹配项。例如，如果**$line**包含字符串**This is a div，后跟 span**，并且您要提取**This is a div，后跟 a**和**span**，则可以使用以下内容：

```
print "$2\n" while $line =~ /<(.*?)>(.*?)<\/\g{1}>/g; 
```

当然，您也想解析嵌套元素，这将变得更加困难和棘手。根据你的第二个问题，你需要多线模式。最好的办法是使用 \s 修饰符，这将强制 . 也匹配换行符。或者，也许您可​​以通过将文件句柄直接分配给标量变量来将所有行合并在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T07:59:43.600

如果你想让它足够通用并适合实际应用，那就有点复杂了。

首先，您可能想要摆脱`<script>`和`</script>`标签之间的内容。

其次，你不能假设开始标签总是包含相同的文本，例如 text in与 in`<span class="myclass">`不完全相同`</span>`。

我建议删除所有`<something>`标签，无论那是哪种标签，并删除`<script>`标签。

您可能无法仅使用一个超级智能的正则表达式，您宁愿使用多个正则表达式来完成这项工作。

这是我整理的一个小脚本，在 cnn.com 上运行良好（作为非平凡输入的示例）。我试图保留换行符，只是为了很好地打印它，并删除了空行——但显然，所有这些可能都不是必需的。

我在这里也做了一些肮脏的把戏，`\n`用一个虚拟`\\\\NN`字符串隐藏（`<script>`否则全局替换将不起作用）。

```
 my $text = "";
    foreach my $line (@res)
    {
        chomp $line;
        $text .= $line . "\\\\NN"; # Hiding the \n's
    }

    $text =~ s/(<script(\s[^<]*)?>.*?<\/script>)//gi;
    $text =~ s/<.*?>/ /g;

    # Beautify it... :)
    $text =~ s/\s{2,}/ /g;
    $text =~ s/\s*\\\\NN\s*/\\\\NN/g;
    $text =~ s/(\\\\NN){2,}/\\\\NN/g;
    $text =~ s/\\\\NN/\n/g;

    print $text."\n"; 
```

# ruby-on-rails-3 - Manifest.yml 没有更新 assets:precompile - Rails 3.2.6

> ID：11199911
> 
> 赞同：10
> 
> 时间：2012-06-26T02:09:52.947
> 
> 标签：ruby-on-rails-3, asset-pipeline

我正在尝试确保使用 Rails 资产管道提供压缩的 css 和 js 文件。我已经很好地设置了这一切，并且一切都在愉快地预编译 - 并且还愉快地同步到我使用 Amazon 的 CloudFront CDN 为它们提供服务的 S3。

我正在为 application.css 和 application.js 提供服务，如下所示：

```
= stylesheet_link_tag "application"
= javascript_include_tag "application" 
```

简而言之，问题是：**应用程序布局中没有输出带 MD5 后缀的文件——只有原始的 application.css 和 application.js**

这有点奇怪：**所有图像都有一个 MD5 标记**。CSS/JS 文件没有。

这是我的production.config：

```
 config.action_controller.perform_caching = true

  # Specifies the header that your server uses for sending files
  config.action_dispatch.x_sendfile_header = "X-Sendfile"
  config.assets.compress = true
  # Fallback to compile on demand
  # config.assets.compile = true
  #config.assets.precompile += %w(application.css application.js)
  # Generate digests for assets URLs
  config.assets.digest = true
  #push the assets to amazon
  config.action_controller.asset_host = Proc.new { |source, request|
    if request.ssl?
      "https://tekpub-assets.s3.amazonaws.com"
    else
      "http://tekpub-assets.s3.amazonaws.com"
    end
  } 

  config.serve_static_assets = false 
```

整个过程令人生气的是**我可以看到压缩/消化的文件**——它们就在我的资产目录中。所有 em - CSS 和 JS 文件也是如此。

但是我的 manifest.yml 文件只更新如下：

```
---
application.js: application.js
application.css: application.css 
```

当我运行预编译时没有错误 - 事实上一切看起来都很漂亮：

```
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
Resolved collector.newrelic.com to 204.93.223.153
AssetSync: using /Volumes/Fatty/Sites/tpub6/config/initializers/asset_sync.rb
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
** Invoke assets:precompile:nondigest (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
Resolved collector.newrelic.com to 204.93.223.153
AssetSync: using /Volumes/Fatty/Sites/tpub6/config/initializers/asset_sync.rb
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:nondigest
AssetSync: Syncing.
Using: Directory Search of /Volumes/Fatty/Sites/tpub6/public/assets
AssetSync: Done. 
```

感谢您的任何指点/推动/提示。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-26T06:39:26.963

好的，我找到了答案：如果资产管道无法编译文件（或文件类型），它将以 Ruby/Rails 风格静默失败。

就我而言，有两个问题：有一个“。” 在一个 js 文件名（bootstrap.min.js）中 - 它不喜欢那样，我认为这是有道理的，因为它使用文件名来确定如何处理文件（例如 file.css.erb）。

下一个是它不知道如何处理的文件类型。由于移动文件时有些盲目和愚蠢，我的资产/图像目录中有一个杂散的 YAML 文件。这使处理器窒息而使资产：预编译失败......再次......默默地。

我发现这一点的方法是创建一个空的 Rails 项目并从头开始编译资产。这就是我发现 JS 文件问题以及哑 YAML 文件的方式。

# android - 获取在重复 AlarmManage 中运行的服务时间

> ID：11199914
> 
> 赞同：0
> 
> 时间：2012-06-26T02:10:26.457
> 
> 标签：android, service, alarmmanager

我在 AlarmManager 中启动了一个重复任务，但我怎样才能获得服务中的重复计数。这是代码 MyActivity

`mAlarmSender = PendingIntent.getService(MyActivity.this,0, new Intent(MyActivity2.this, AutoBuild.class), 0);`

 ````
 long firstTime = SystemClock.elapsedRealtime();

    AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);

    am.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
            firstTime, 1000 * 5, mAlarmSender); 
````  `自动构建

`public class AutoBuild extends Service {`

 ````
private String[] infos;

private Intent mIntent;

private String pathStr;

static final String TAG = "AutoBuild";

private int i=0;

@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    this.mIntent = intent;

    return START_STICKY;
}

@Override
public void onCreate() {

    mNM = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

    printData(i);/**print result*/

    i++;/*count ++*/

    AutoBuild.this.stopSelf();/*stop service */

}

private void printData(int i) {     

   Log.i(TAG, i + "");    
}

@Override
public IBinder onBind(Intent intent) {

    return mBinder;
}

private final IBinder mBinder = new Binder() {

    @Override
    protected boolean onTransact(int code, Parcel data, Parcel reply,
                                 int flags) throws RemoteException {
        return super.onTransact(code, data, reply, flags);
    }
}; 
```

}` 

`i 的值始终为 0：Alarmanage 重复时是否可以更改此值`

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:58:37.113

问题`Service`是它作为单个实例运行。每次启动同一个服务时，只`onStartCommand()`调用该方法。因此，如果您使用 an`alarmManager`并且想要更改其中的变量，`Service`您可以在`onStartCommand()`. `onCreate()`仅在第一次启动时调用一次，`Service`因此在您的情况下，变量`i`在连续调用`Service`.

检查以下内容以获取更多详细信息：http: [//developer.android.com/guide/components/services.html#StartingAService](http://developer.android.com/guide/components/services.html#StartingAService)``

# ruby-on-rails - 如何在 rails admin 之外使用 rails admin 帐户来编辑用户数据？

> ID：11199919
> 
> 赞同：0
> 
> 时间：2012-06-26T02:11:01.977
> 
> 标签：ruby-on-rails, ruby, rails-admin

我想创建一个新的控制器，允许管理员用户编辑附加到 Rails 管理员之外的用户的模型。这是我的 routes.rb 中的一个示例：

```
devise_for :admins

mount RailsAdmin::Engine => '/admin', :as => 'rails_admin'

devise_for :dealers 
devise_for :users

get "..." => "..."
etc 
```

我需要在我的控制器和 routes.rb 中做什么才能使这成为可能？我对 Rails 还很陌生。谢谢！我的时间有限，所以制作 rails-admin 插件是不可行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:19:41.393

在您的控制器中检查管理员是否使用 登录`admin_signed_in?`，您也可以通过 访问它`current_admin`。所以你只需要设置条件检查它是否和管理员启用或不启用这些功能。

编辑：

你可以在你的 before_filter 中有这样的东西

```
before_filter :check_authentication

private

def check_authentication
  authenticate_user! unless admin_signed_in?
end 
```

# macos - 使用 Retina 背景支持创建 dmg？

> ID：11199926
> 
> 赞同：17
> 
> 时间：2012-06-26T02:12:32.253
> 
> 标签：macos, cocoa, retina-display, dmg

我需要制作一个支持 1x 和 2x 背景的 dmg，但在 hdiutil 或 dropdmg 等其他工具中似乎没有关于视网膜的信息。我创建了一个正常的，它显然在 Retina MBP 上模糊了。有人有解决办法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-26T09:52:27.457

[猜测：多表示 TIFF 文件可能有效，请参阅此Apple 链接](http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Optimizing/Optimizing.html#//apple_ref/doc/uid/TP40012302-CH7-SW10)的第一段。HTH。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T07:44:52.330

具有 2 种表示形式的 TIFF 文件按预期用作 Retina 的文件夹背景图像。Mac OS X 10.5、10.7 和 10.8 显示正确的 BG 表示，具体取决于 HiDPI 是否可用。不幸的是，10.6 显示了超大的高分辨率表示，而不是正常的表示，如果您也以 10.6 为目标，这将是不可接受的。

# iphone - ImageView 限制宽度但不限制高度

> ID：11199928
> 
> 赞同：2
> 
> 时间：2012-06-26T02:12:46.193
> 
> 标签：iphone, ios

我有一个 Image 和一个 ImageView，ImageView 占据了整个屏幕，我想调整图像的大小以适应 ImageView。ImageView 位于仅启用垂直滚动条的 ScrollView 内，这意味着图像应调整为最大宽度等于屏幕（ImageView）的最大宽度，同时保持比例，不受调整后的高度限制。ImageView 的高度将适合调整大小的 Image，如果高度超过屏幕的高度，我们可以使用滚动条查看它。

所以我想提出以下建议：

1）如果原始宽度小于所需宽度，我如何调整具有固定宽度的图像的大小，不需要调整大小。高度没有限制。

2）如何使 ImageView 自动适应 Image 的高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T07:08:21.513

首先，您可以自己计算新图像的高度。

（如果，图像大小 = (300,200)，imageView 的宽度 = 320，新图像的高度 = 200*(320/300)）

那么，从这个线程[调整 UIImage 大小的最简单方法是什么？](https://stackoverflow.com/questions/2658738/the-simplest-way-to-resize-an-uiimage)

您可以使用新的宽度和高度调整图像的大小。

* * *

总灵魂：

```
UIImage* i= /* original image */;
UIImage* j =[self imageWithImage:i scaledToSize:newSize]; //new Image
[theImageView setImage:j]; 
```

* * *

（而且这段代码也适用于 iOS 4.x）

# sql - 当远程 SQL Server 数据库未在 SSMS 的“数据库”部分中列出时，如何备份它

> ID：11199932
> 
> 赞同：0
> 
> 时间：2012-06-26T02:13:35.623
> 
> 标签：sql, sql-server, database-backups

我在共享主机上有一个远程数据库，如果我在高级选项中指定数据库名称，我可以通过 SSMS 连接到它。如果我尝试展开对象资源管理器的“数据库”部分，它会超时并且不会列出可用的数据库。

我需要在本地备份它，所以编写脚本似乎是唯一的方法。但是，您需要右键单击数据库名称才能执行此操作，这是不可能的。是否有可以运行以导出数据库结构和数据的 SQL 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:40:36.137

通常在托管公司提供的控制面板中，有一个“数据库”选项，如果你去那里，你可以找到一个“备份数据库”（子）选项。

通常这会将数据库备份到您的主机帐户根文件夹之外的名为“db”或“data”的文件夹中。然后您可以通过 FTP 连接并下载（或从那里上传和恢复）。

另一种方法可能是使用“BACKUP DATABASE TO DISK='XXXXXX'”SQL 语句。但是你必须知道要使用的 XXXXXX 值（这取决于你是否有执行此操作的权限）。XXXXXX 将是您的主机帐户的本地路径，可能类似于：C:\domains\yourdomain.com\db

（...取决于托管公司的设置方式）。

# asp.net - ASP.NET：为不变的表数据创建静态集合

> ID：11199936
> 
> 赞同：1
> 
> 时间：2012-06-26T02:13:49.997
> 
> 标签：asp.net, performance, entity-framework, caching

我正在创建一个使用 EF 执行所有数据库任务的 ASP.NET MVC 应用程序。

数据库中有几个相关的表永远不会改变，我正在考虑创建一个静态集合，在第一次请求它时从这两个表中检索数据（它是几百条记录）并将其存储在一个对象中防止每次都访问数据库。

因为我读过几个人说你应该避免在 ASP.NET 中使用静态对象，所以我想知道这是否是一种不好的做法，或者对于这样的场景是否可以接受（只读和少量数据应该可以防止并发问题）。

另外我想知道是否有其他更好的选择来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T04:31:01.640

出于完全相同的原因，我已经完成了您计划做的事情。它已经运行了好几年了。

只要确保正确初始化数据，就可以了。初始化时，请记住：

*   尽可能不要使用锁定（否则你的应用会在你去度假前 2 分钟死锁）
*   在任何情况下**都不**能让静态构造函数失败
*   确保缓存的任何消费者都没有能力修改它

如果数据不是真正静态的，并且您实际上需要经常重新读取它，那么这可能不是最好的解决方案。

万一您想知道，我已经使用这种方法来缓存国家数据、货币数据（基础数据，而不是汇率）、销售单位数据（pcs、m、kg 等）。这些都存储在数据库中，但几乎从不改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:16:53.810

使用静态对象不是一个很好的方法。我会使用 RavenDB 之类的东西，它可用于将您的设置或数据库数据存储在内存中。它的占地面积非常小，而且速度非常快。它具有完整的 LINQ 支持。

# apache - 缩短 GWT/Tomcat 应用程序的 URL

> ID：11199938
> 
> 赞同：0
> 
> 时间：2012-06-26T02:14:29.583
> 
> 标签：apache, gwt, tomcat

我有一个 GWT 应用程序部署为 webapps/ROOT ( context [] )。典型的 URL 如下所示：

[http://example.com/?id=abc](http://example.com/?id=abc)

我想要的是一个看起来像[http://example.com/abc的 URL](http://example.com/abc)

理想情况下不仅仅是重定向，后一种形式将保留在浏览器的 URL 栏中（一个 la mod_proxy，或带有 [P] 的 mod_rewrite）。

问题是，虽然我可以使用 mod_rewrite 规则进行重定向，但地址栏中的 URL 会发生变化。如果我尝试将 mod_proxy 或 mod_rewrite 与 [P] 一起使用，则目标的查询字符串部分似乎无法通过。

这是我的代理 ([P]) 规则

```
RewriteCond %{REQUEST_URI} /([a-zA-Z0-9]+)
RewriteRule ^/([a-zA-Z0-9]+)$ http://example.com/?id=%1 [P] 
```

这里似乎发生的是[http://example.com/abc](http://example.com/abc)被重定向到[http://example.com/](http://example.com/)（没有查询字符串部分）。如果我删除上面的 [P]，它可以工作，但地址栏会更改为目的地。

有些文档似乎暗示 mod_proxy 不能传递查询字符串，对吗？如果是这样，我怎样才能实现我的目标？我对任何东西都持开放态度，无论是自定义 servlet、过滤器、apache 配置、mod_jk 设置等等。我已经坚持了好几天了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:31:02.607

您是否尝试使用 [QSA] 标志而不是 [P] 标志？

见：[http ://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa)

# ruby-on-rails - 使特定的 Rails 视图使用某种布局

> ID：11199940
> 
> 赞同：0
> 
> 时间：2012-06-26T02:15:08.853
> 
> 标签：ruby-on-rails, layout, view, helper

有没有办法让某个 Rails 视图（例如`index.html.haml`）使用某个模板？这是在控制器中完成的，如下所示：

```
layout 'my_layout' 
```

是否可以直接在视图中要求布局？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:45:33.817

根据 Rails 指南，[布局和渲染](http://guides.rubyonrails.org/layouts_and_rendering.html#structuring-layouts)

> “当 Rails 将视图呈现为响应时，它通过将视图与当前布局相结合来实现”

因此，一旦视图开始呈现，似乎就不可能更改布局。

此外，我建议确定布局更多的是控制器功能。如果您的视图中有试图确定布局的逻辑，我敢打赌最好将逻辑放在控制器中。

# java - 不使用 UnicodeFont 进行平滑

> ID：11199942
> 
> 赞同：1
> 
> 时间：2012-06-26T02:15:27.387
> 
> 标签：java, lwjgl, slick2d

我正在尝试使用`Slick2D`'s绘制字符串`UnicodeFont`。不幸的是它看起来

![丑陋的](../Images/9b20069f289ae067a7d707ffcc21f32e.png)

无论如何让它看起来更好（平滑或抗锯齿）？这是我的代码

```
GL11.glEnable(GL11.GL_BLEND);
GL11.glLoadIdentity();
GL11.glOrtho(0, width, height, 0, 1, -1);
GL11.glMatrixMode(GL11.GL_MODELVIEW);

UnicodeFont f = new UnicodeFont(new Font("Consolas", Font.PLAIN, 18));
f.addAsciiGlyphs();
ColorEffect e = new ColorEffect();
e.setColor(java.awt.Color.green);
f.getEffects().add(e);
try {
    f.loadGlyphs();
} catch (SlickException ex) {
    ex.printStackTrace();
}

f.drawString(x, y, "UGLY"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:18:51.963

通过编写`GL11.glEnable(GL11.GL_BLEND)`和启用混合`GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA)`。

# node.js - 在新域上部署 node.js

> ID：11199944
> 
> 赞同：0
> 
> 时间：2012-06-26T02:15:50.573
> 
> 标签：node.js, domain-name

我有一台在不同端口上运行不同网站的服务器。所有这些（只有一个）都是 Apache 服务器，多亏了 webmin，我设法让 example.com 指向 123.123.123.123:80 和 example.fr 指向 123.123.123.123:8000，不知何故自动

我现在在同一台机器上运行 nodejs 服务器，所以 80、8000 和许多其他端口已经被占用。我的 nodejs 监听 8008。我有另一个域名，例如 example.org，我希望它指向我的 nodejs 网站，但我根本不知道该怎么做！我更新了 DNS，一切都指向 123.123.123.123（我的服务器的 IP）。我想避免对这个节点服务器上的所有内容使用丑陋的 example.org:8008/。我怎样才能让它隐含指向 8008 端口？我必须补充一点，我负担不起关闭 apache 服务器的费用；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:36:22.930

DNS 仅提供名称到 IP 地址的映射。它不能处理端口。您可以做的是设置代理服务器侦听端口 80。然后代理服务器可以根据主机标头返回数据。

您最好的选择是仅重定向来自 Apache 的请求。否则你可以使用像 Nginx 这样的反向代理。此外，您可以在节点中编写轻量级代理...查看[此页面](http://www.catonmat.net/http-proxy-in-nodejs/)

# android - 手动清除共享偏好

> ID：11199945
> 
> 赞同：0
> 
> 时间：2012-06-26T02:16:10.350
> 
> 标签：android

我正在使用共享首选项编写登录功能。我使用 SharedPreferences.Editor::commit() 来存储用户名和密码；从 shared_prefs 读取它以检查登录。登录后，我 cd 到 /data/data/com.< my_package >/shared_prefs/ 并删除“shared_prefs”文件夹。问题是应用程序屏幕仍处于登录状态。**我试图返回并重新启动应用程序，但它仍处于登录状态。手动删除“shared_prefs”是否会完全清除首选项？**为什么我的应用程序仍处于登录状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T02:21:44.063

您不应该删除首选项文件夹。如果您这样做，则共享首选项的行为是未记录的。（即使您退出最后一个活动，该过程可能仍然存在，并且之前读取的首选项仍在内存中。）

如果要从共享首选项中删除特定值，请使用`SharedPreferences.Editor.remove(String)`. 如果要清除所有值，请使用`SharedPreferences.Editor.clear()`. 在任何一种情况下，`commit()`您的更改都会使它们生效。

如果要将程序重置为其初始状态（就好像它从未运行过一样），请转到设置 -> 管理应用程序，打开您的应用程序，停止它（如果它正在运行），然后清除所有数据。

# ruby-on-rails - Rails 3.0/3.2：为 nil 调用 id，它会错误地为 4——如果你真的想要 nil 的 id，使用 object_id

> ID：11199951
> 
> 赞同：11
> 
> 时间：2012-06-26T02:16:38.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在关注 Kevin Skoglund 教程 Ruby on Rails 3 Essential Training，它是为 rails 3.0 编写的，尽管我目前使用的是 3.2。它在 pages_controller 中使用以下方法和 before_filter 来仅显示属于父主题的页面。

本教程明确使用 .find_by_id 因为如果结果为 nil 它“不会返回错误”。但是，在尝试查看 @subject 已设置为 nil 的页面时，我得到“为 nil 调用 id，错误地为 4 - 如果您真的想要 nil 的 id，请使用 object_id”错误。

```
def find_subject
  if params[:subject_id]
    @subject = Subject.find_by_id(params[:subject_id])
  end
end 
```

导致错误的实际代码是：

```
def list
  @pages = Page.order("pages.position ASC").where(:subject_id => @subject.id)
end 
```

这是自 3.0 以来发生的变化吗？如果是这样，在 3.2 中实现此功能的正确方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T02:48:45.160

消息：

> “为 nil 调用 id，它会错误地为 4——如果你真的想要 nil 的 id，请使用 object_id”

是 Rails 中的标准消息，它告诉您您尝试调用`.id`一个`nil`值。

因此，如果`@subject`为 nil，那么如果您尝试调用`@subject.id`.

我建议您在视图文件中考虑`@subject`可能存在`nil`的问题，并在您呈现信息的方式中解决它。查看代码并思考您应该在视图中呈现的内容（如果有的话`@subject`）`nil`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T02:41:45.223

没有看到你正在使用的代码我可能是错的。但是你应该使用

```
params[:id] 
```

为了快速检查，只需将其放在 if 语句之前：

```
puts ">>> #{params[:subject_id]}" 
```

如果它给你ID，我错了......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T02:49:43.207

您粘贴的代码可能不会引发该错误。在您看来，您可能正在显示`@subject.id`哪个会引发该错误。您应该得到一个堆栈跟踪，它可以为您提供问题所在的确切行。

# java - Java：如何在没有递归的情况下获取 xml 节点路径

> ID：11199952
> 
> 赞同：1
> 
> 时间：2012-06-26T02:16:40.713
> 
> 标签：java, xml

我昨天问了这个问题，并从 Super Chafouin [Java 那里得到了很大的帮助：如何获取 xml 节点路径](https://stackoverflow.com/questions/11182420/java-how-to-get-xml-nodes-path)

然而。我不能在这里使用递归。有没有办法在没有递归的情况下做同样的工作？我真的需要这个帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:02:47.817

另一条评论对我来说看起来很奇怪，因为它一次又一次地复制相同的逻辑。

如果您使用的是 DOM，则很难不使用递归。但是，还有其他类型的 XML 解析器。

使用 StAX 解析器可以直接完成您的任务（我相信使用 SAX 同样简单）。

这个想法很简单：

1.  有一个堆栈来存储当前的“路径”（让我称之为路径堆栈）
2.  当您遇到节点开始时，将该节点的名称推送到路径堆栈
3.  当你遇到节点结束时，从路径堆栈中弹出
4.  当遇到文本节点时，打印出路径栈中的值，以及文本值本身

我相信指令应该足够清晰，并且我相信普通程序员应该能够通过上述逻辑找出实际代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:47:00.417

我的看法：

```
// create a document
DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
Document document = domFactory.newDocumentBuilder().parse("input.xml");

// XPath selecting all leaf nodes (assumes all leaf nodes contain a value)
XPath xpath = XPathFactory.newInstance().newXPath();
XPathExpression expr = xpath.compile("//*[count(./descendant::*)=1]");

// list of all nodes containing a value
NodeList list = (NodeList)expr.evaluate(document, XPathConstants.NODESET);
for (int i = 0; i < list.getLength(); i++) {
    // store node name and value
    Node node = list.item(i);
    StringBuilder path = new StringBuilder(node.getNodeName());
    String value = node.getTextContent();

    // traverse all parents and prepend their names to path
    node = node.getParentNode();
    while (node.getNodeType() != Node.DOCUMENT_NODE) {
        path.insert(0, node.getNodeName() + '.');
        node = node.getParentNode();
    }

    System.out.println(path + " = " + value);
} 
```

# powershell - 我可以从 Export-ModuleMember 中排除单个函数吗？

> ID：11199953
> 
> 赞同：5
> 
> 时间：2012-06-26T02:16:46.267
> 
> 标签：powershell, powershell-module

我在 PowerShell 脚本模块中定义了大量函数。我想使用`Export-ModuleMember -Function *`，但我只想排除*一个*功能。排除这一项功能比列出所有包含的功能更容易。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-26T03:52:47.453

我关于排除函数的常用答案是对我要导出的函数使用动词名词命名，并对其他所有函数使用首字母大写。

然后，`Export-ModuleMember -function *-*`照顾它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T03:28:20.337

查找脚本中的所有函数，然后根据要排除的内容进行过滤（假设 PowerShell v2）：

```
$errors = $null 
$functions = [system.management.automation.psparser]::Tokenize($psISE.CurrentFile.Editor.Text, [ref]$errors) `
    | ?{(($_.Content -Eq "Function") -or ($_.Content -eq "Filter")) -and $_.Type -eq "Keyword" } `
    | Select-Object @{"Name"="FunctionName"; "Expression"={
        $psISE.CurrentFile.Editor.Select($_.StartLine,$_.EndColumn+1,$_.StartLine,$psISE.CurrentFile.Editor.GetLineLength($_.StartLine))
        $psISE.CurrentFile.Editor.SelectedText
    }
} 
```

这是我在 v2 中用于创建[ISE Function Explorer](http://www.ravichaganti.com/blog/?p=2518)的技术。但是，我看不出为什么这不适用于 ISE 之外的纯文本。不过，您需要解决插入符号行的详细信息。这只是一个关于如何实现你想要的例子。

现在，过滤不需要的内容并将其传送到`Export-ModuleMember`！

```
$functions | ?{ $_.FunctionName -ne "your-excluded-function" } 
```

如果您使用的是 PowerShell v3，[解析器会更容易](http://www.ravichaganti.com/blog/?p=2533)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-15T22:15:20.220

所以我知道这对派对来说已经晚了，但简单的解决方案是将所有你不想导出的函数放在 Export-ModuleMember cmdlet 之后。在该语句之后定义的任何函数都不会被导出，并且将可用于您的模块（也称为私有函数）。

也许更优雅的方法是包含一个模块定义文件，并且根本不将该函数包含在要包含的函数列表中。

在模块中编写代码而不在模块中包含函数的想法似乎过于复杂，这不是一个新功能，自从 PowerShell 早期以来，我一直在 Export 之后放置函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-06T17:04:11.180

正如 ravikanth（他在他的解决方案中使用 V2）所暗示的，我使用 PowerShell V3 的解决方案是定义一个`PSParser`模块：

```
Add-Type -Path "${env:ProgramFiles(x86)}\Reference Assemblies\Microsoft\WindowsPowerShell\3.0\System.Management.Automation.dll"

Function Get-PSFunctionNames([string]$Path) {
    $ast = [System.Management.Automation.Language.Parser]::ParseFile($Path, [ref]$null, [ref]$null)
    $functionDefAsts = $ast.FindAll({ $args[0] -is [System.Management.Automation.Language.FunctionDefinitionAst] }, $true)
    $functionDefAsts | ForEach-Object { $_.Name }
}

Export-ModuleMember -Function '*' 
```

在一个模块中，如果我想排除一个给定的函数，最后一行看起来像：

```
Export-ModuleMember -Function ( (Get-PSFunctionNames $PSCommandPath) | Where { $_ -ne 'MyPrivateFunction' } ) 
```

请注意，这仅适用于 PowerShell V3 或更高版本，因为 AST 解析器`$PSCommandPath`是在版本 3 中引入的。

# grails - Grails 中的排序列表或 getAll

> ID：11199956
> 
> 赞同：0
> 
> 时间：2012-06-26T02:17:19.870
> 
> 标签：grails, groovy

我想在我的域类中实现默认排序顺序，并立即发现它不适用于该`getAll`方法。没什么大不了的，我只是用`list`了。问题是域类中的默认排序顺序不允许您指定多个排序字段（[如此处所示](https://stackoverflow.com/questions/4882992/grails-mapping-sort-on-multiple-fields-groovy-sort-on-multiple-map-entries)）。

`Foo`我的目标是首先按对象的名称对所有对象进行排序`Bar`，然后按它们自己的名称。

```
class Foo {
    String name
    String Bar
}

class Bar {
    String name
} 
```

如何在域类中实现这一点，这样我就不必每次调用时都指定一个长/讨厌的比较器`.list()`？

我的尝试之一：

```
static Comparator getComparator() { 
    def c = { a, b -> 
    def result = a.bar.name.compareTo( b.bar.name ); 
        if ( result == 0 ) {
            result = a.name.compareTo( b.name );
        }
    }
    return c as Comparator
} 
```

然后我可以打电话`Foo.list(Foo.getComparator())`……如果我能让它工作的话。

**更新：**

我想我在这里真的很接近，只是在同一个排序闭包中实现两个比较时遇到了麻烦。

```
Foo.list().sort{ a, b ->
    def result = a.bar.name <=> b.bar.name;
    // Things mess up when I put this if statement in.
    if( result == 0 ) {
        a.name <=> b.name
    }
} 
```

**迪斯科！**

```
class Foo { // My domain class
    // ...

    static Comparator getComparator() {
        def c =[
            compare: { a, b ->
                def result = a.bar.name <=> b.bar.name;
                if( result == 0 ) {
                    result = a.name <=> b.name
                }
                return result
            }
        ] as Comparator
    }

    // ...
} 
```

并在我的控制器中像这样实现：

```
Foo.list().sort( Foo.getComparator() ) 
```

**PS：**

以上工作，但杰夫斯托里在我发现后在他的答案中发布了一些代码，他的代码工作并且比我的好得多，所以使用它:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T02:30:30.100

在您的情况下，实施是否有意义，并且`Foo`实施`Comparable`可以按照您的描述进行比较？然后，当您对列表中的对象进行排序时，因为它们是`Comparable`，它们将正确排序。

但是，如果您实现它没有意义`Comparable`，则需要指定一个比较器进行排序。

以下是基于您的评论的一些示例代码：

编辑：

```
class Person implements Comparable<Person> {

   String firstName
   String lastName

   int compareTo(Person other) {
       int lastNameCompare = lastName <=> other.lastName
       return lastNameCompare != 0 ? lastNameCompare : firstName <=> other.firstName
   }

   String toString() {
     "${lastName},${firstName}"
   }
}

def people = [new Person(firstName:"John",lastName:"Smith"), new Person(firstName:"Bill",lastName:"Jones"), new Person(firstName:"Adam",lastName:"Smith")]
println "unsorted = ${people}"
println "sorted = ${people.sort()}" 
```

这打印：

```
unsorted = [Smith,John, Jones,Bill, Smith,Adam]
sorted = [Jones,Bill, Smith,Adam, Smith,John] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-09T13:58:02.577

为了进一步简化上面的帖子（我会对此发表评论，但我还没有代表），您可以使用 elvis 运算符链接 groovy 比较运算符：

```
class Person implements Comparable<Person> {

    String firstName
    String lastName

    int compareTo(Person other) {
        return lastName <=> other.lastName ?: firstName <=> other.firstName
    }

    String toString() {
        "${lastName},${firstName}"
    }
}

def people = [new Person(firstName:"John",lastName:"Smith"), new Person(firstName:"Bill",lastName:"Jones"), new     Person(firstName:"Adam",lastName:"Smith")]
println "unsorted = ${people}"
println "sorted = ${people.sort()}" 
```

这将为您提供相同的结果，因为 0 在 groovy 眼中被认为是错误的，这将使其查看链中的下一个条件。

# azure - 这是如何使用 CloudConfigurationManager 设置上下文连接字符串吗？

> ID：11199958
> 
> 赞同：13
> 
> 时间：2012-06-26T02:17:35.417
> 
> 标签：azure, azure-configuration

我希望使用 CloudConfigurationManager，以便可以利用 Azure 配置文件。我想使用一个连接字符串，我在 Cloud.cscfg 中添加了一个字符串来配置实体框架上下文。

我正在像这样配置我的上下文

```
public DomainContext()
    : base("ContextConnectionString") 
```

这是从 Web.config 获取 ContextConnectionString

我将上下文构造函数更改为此

```
public DomainContext()
    : base(CloudConfigurationManager.GetSetting("ContextConnectionString")) 
```

现在它可以工作了。

有没有更优雅的方法来告诉我的上下文构造函数首先使用 Azure cscfg？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T21:08:44.030

目前没有更优雅的解决方案，没有。事实上，这比你一个月前写的要优雅得多。这`CloudConfigurationManager`是 1.7 SDK 中的一个新类，它是因为以前没有内置的支持来做这种事情而创建的。如果你想做`CloudConfigurationMangager`现在要做的事情，你必须创建自己的类，这[很常见](https://stackoverflow.com/questions/9177413/azure-class-library-access-getconfigurationsettingvalue-vs-web-config)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T03:18:25.760

您能否发布代码示例？

CloudConfigurationManager 应首先检查代码是否在 Windows Azure 角色中执行，如果是，则尝试从 ServiceConfiguration.cscfg 文件（与角色一起部署）中检索配置值。如果未在角色中运行，CloudConfigurationManager 应恢复为应用程序的 .config（web.config 或 app.config）文件。在任何一种情况下，如果找不到该值，我相信会返回 NULL。

通过从 .cscfg 文件中检索连接字符串（假设代码在 Windows Azure Web 角色中运行），可以将该值传递给将设置连接字符串的 EF 构造函数重载。

# cuda - 将设备中动态分配的数据复制到主机时出错？

> ID：11199961
> 
> 赞同：1
> 
> 时间：2012-06-26T02:18:15.840
> 
> 标签：cuda, malloc, gpu

我最近在将设备中动态分配的数据复制到主机内存时遇到了一个问题。数据是用 malloc 分配的，我在主机功能中将这些数据从设备复制到主机。这是代码：

```
#include <cuda.h> 
#include <stdio.h> 

#define N 100 
__device__ int* d_array; 
__global__ void allocDeviceMemory() 
{ 
d_array = new int[N]; 
for(int i=0; i < N; i++) 
d_array[i] = 123; 
} 
int main() 
{ 
allocDeviceMemory<<<1, 1>>>(); 
cudaDeviceSynchronize(); 
int* d_a = NULL; 
cudaMemcpyFromSymbol((void**)&d_a, "d_array", sizeof(d_a), 0, cudaMemcpyDeviceToHost); 
printf("gpu adress: %p\n", d_a); 

int* h_array = (int*)malloc(N*sizeof(int)); 
cudaError_t errr = cudaMemcpy(h_array, d_a, N*sizeof(int), cudaMemcpyDeviceToHost); 
printf("h_array: %d, %d\n", h_array[0], errr); 

getchar(); 
return 0; 
} 
```

CUDA 4.1 已经有一个海报有同样的问题，一些专家建议将 CUDA 驱动程序和运行时升级到更新版本可以解决这个问题。 [CUDA - 将设备数据复制到主机？](https://stackoverflow.com/questions/9150848/cuda-copy-device-data-to-host)

我有 CUDA 工具包 4.2 和最新的开发者驱动程序和 C2075，但它仍然会出现上述问题。请让我知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:14:03.153

不幸的是，没有办法做你想做的事情 CUDA 4\. 主机 API 无法从设备运行时堆上的动态分配地址复制，只有设备代码可以访问它们。如果您想使用主机 API 进行复制，您需要先将数据写入使用主机 API 分配的“输出”缓冲区，然后您可以自由地`cudaMemcpy`从主机检索它。

[您可以在此处](https://stackoverflow.com/a/9578057/681865)从 Nvidia 的 Mark Harris 那里看到对此限制的确认。

* * *

由于这个答案是在 2012 年发布的，因此对主机 API 互操作性的限制似乎是一成不变的，并且在 CUDA 编程指南中[明确记录。](https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#interoperability-host-memory-api)

# regex - 使用 Perl 正则表达式编写冒泡排序

> ID：11199965
> 
> 赞同：2
> 
> 时间：2012-06-26T02:18:33.163
> 
> 标签：regex, perl

我开始学习 perl，并且正在使用正则表达式编写一个简单的冒泡排序。但是，我无法正确排序（按字母顺序，由空格分隔）。它只是最终返回相同的字符串。有人可以帮忙吗？我敢肯定这很简单。谢谢：

```
#!/usr/bin/perl
use warnings;
use strict;

my $document=<<EOF;
This is the beginning of my text...#more text here;
EOF

my $continue = 1;
my $swaps = 0;
my $currentWordNumber = 0;
while($continue)
{
        $document =~ m#^(\w+\s+){$currentWordNumber}#g;
        if($document =~ m#\G(\w+)(\s+)(\w+)#)
        {
                if($3 lt $1)
                {
                        $document =~ s#\G(\w+)(\s+)(\w+)#$3$2$1#;
                        $swaps++;
                }
                else
                {
                        pos($document) = 0;
                }
                $currentWordNumber++;
        }
        else
        {
                $continue = 0 if ($swaps == 0);
                $swaps = 0;
                $currentWordNumber = 0;
        }
}

print $document; 
```

已解决：我发现了问题所在。我没有考虑单词后的标点符号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:09:06.803

如果您只想对所有单词进行排序，则不必使用正则表达式...简单地用换行符和空格分割文本应该会快得多：

```
sub bsort {
    my @x = @_;
    for my $i (0..$#x) {
        for my $j (0..$i) {
            @x[$i, $j] = @x[$j, $i] if $x[$i] lt $x[$j];
        }
    }
    return @x;
}

print join (" ", bsort(split(/\s+/, $document))); 
```

# zend-framework - 使用关系类型为“多对多”的 Zend_Form 和 Zend_Db_Table 插入数据

> ID：11199970
> 
> 赞同：1
> 
> 时间：2012-06-26T02:19:28.540
> 
> 标签：zend-framework, many-to-many, zend-form, zend-db-table

我有一个由`Zend_Form`. 如何通过`Zend_Db_Table`关系类型为多对多的表格将数据包含在数据库中？

请参阅代码： http: [//pastebin.com/u3C6TQKi](http://pastebin.com/u3C6TQKi)和图像示例：

![在此处输入图像描述](../Images/350715b9bb8415168cec95582f565e5c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:33:26.823

首先，您应该插入父表。您可以获得插入行ID。所以插入带有父行ID的子数据。这是最好的方法。您也可以编写单个查询并运行它一次。

# html - 响应式 Twitter 引导程序中的两列项目符号列表

> ID：11199973
> 
> 赞同：7
> 
> 时间：2012-06-26T02:19:47.413
> 
> 标签：html, css, twitter-bootstrap, responsive-design

这是我第一次涉足 Twitter Bootstrap。在此处查看此模板：http: [//twitter.github.com/bootstrap/examples/hero.html](http://twitter.github.com/bootstrap/examples/hero.html)

在其中一个标题下，我想将长`ul`分成两列：

*项目1
*项目4 *项目2 *项目5
*项目3 *项目6

它可以是`<ul>`代码中的两个单独的 s，它只需要看起来像两个相邻的项目符号列。

有人可以向我推荐一种方法吗？到目前为止，我的问题是保持它对屏幕大小的响应，因此缩小屏幕，这两个单独的列表再次相互堆叠。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T06:57:11.687

我会在 span4 div 标签内使用**流体网格系统。**在这里查看流体网格系统... [http://getbootstrap.com/css/#grid](http://getbootstrap.com/css/#grid)

使用这种方法，当屏幕很小时，列表将再次相互堆叠。

这是一个例子......

```
<html>
<head>
    <title></title>
    <link href="css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
    <script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="js/bootstrap.min.js" type="text/javascript"></script>
</head>
<body>
        <div class="container">
            <div class="row">
                <div class="span4">
                    <h4>Column 1</h4>
                    <div class="container-fluid">
                        <div class="row-fluid">
                            <div class="span6">
                                <ul>
                                    <li>Item 1</li>
                                    <li>Item 2</li>
                                    <li>Item 3</li>
                                </ul>
                            </div>
                            <div class="span6">
                                <ul>
                                    <li>Item 4</li>
                                    <li>Item 5</li>
                                    <li>Item 6</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="span4">
                    <h4>Column 2</h4>
                </div>
                <div class="span4">
                    <h4>Column 3</h4>
                </div>
            </div>
        </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T12:17:23.193

如果您有一个 ul 和很多 li，这应该会有所帮助

**css**

```
 @media (min-width:768px) { 
    .col2{ width:100%;}
    .col2 li{width:49%; float:left;}
  } 
```

**html(哈姆)**

```
 .box-body      
    .row-fluid
      %ul.col2.clearfix
       -@categories.each do |category|
         %li
         =category.title 
```

# ruby-on-rails - Rails 动态表单 - 向表单添加可序列化字段

> ID：11199974
> 
> 赞同：1
> 
> 时间：2012-06-26T02:19:47.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3, serialization

我有一个`User`和`Setting`。`Setting`有一个`:serializable`名为`:custom_links`：

在`Setting.rb`

```
 serialize :custom_links, Hash 
```

在`User.rb`

```
has_one :setting, dependent: :destroy 
```

我想创建一个表单，允许用户设置任意数量的自定义链接，并将这些链接存储在`:custom_links`哈希中。每个自定义链接在哈希中都有一个名称和一个 URL。

我不确定如何在视图中构建此表单并允许用户使用 javascript 动态添加任意数量的自定义链接（并将这些链接保存在 :custom_links 哈希中）。我有其他字段，`:setting`并且我的控制器可以很好地处理这些字段 - 我认为我唯一需要帮助的是视图和 javascript。

**更新澄清：**

当用户完成要输入的表单时`:custom_links`，我希望它采用以下格式：

```
{
:name => "Google", :url => "http://www.google.com",
:name => "Twitter", :url => "http://www.twitter.com"
} 
```

此外，我希望能够为`:custom_link`用户想要输入的每个字段动态添加 2 个文本字段。

任何和所有的帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:46:41.930

我建议将这些链接添加为单独的模型（例如。`has_many :custom_links`）。另外，您将能够使用 AR 的验证，而不是为序列化属性创建自己的自定义验证方法。

您可以对这些字段使用[嵌套属性](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html#method-i-accepts_nested_attributes_for)。看看以下 railscasts 剧集：

*   [http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)
*   [http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

第二个还向您展示了如何使用 javascript 动态添加更多字段。

# django - 减去模板中的两个字段

> ID：11199977
> 
> 赞同：1
> 
> 时间：2012-06-26T02:20:04.673
> 
> 标签：django, django-templates

我试图在模板中循环访问我的数据库中的对象，我想要显示的一件事是表中两个字段之间的差异。有没有一种干净的方法来做到这一点：

```
{% for game in games %}
<tr>
    <td width=100><p>{{ game.name }} </p></td>
    <td width=300><p>{{ game.campaign }} </p></td>
    <td width=90><p>{{ game.num_Players }} </p></td>
    <td width=90><p>{{ game.num_Players - game.accepted_Characters }}</p></td>
    <td width=90><p>{{ game.standing_Requests }}</p></td>
</tr>
{% endfor %} 
```

? 其中游戏是具有所有这些字段的表对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T02:28:25.227

Django 模板旨在不进行计算。您应该`games`在视图中调整列表，然后将其显示在模板中：

```
# views.py
for game in games:
    game.chars_diff = game.num_Players - game.accepted_Characters

# template.html
<td><p>{{ game.chars_diff }}</p></td> 
```

# python - 在 Python 中以字符串格式对日期列表进行排序的最有效方法是什么？

> ID：11199978
> 
> 赞同：1
> 
> 时间：2012-06-26T02:20:21.740
> 
> 标签：python, python-2.7

假设我有一个字符串格式的日期列表，“YYYYMMDD”。如何按常规和反向顺序对列表进行排序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T02:22:13.400

对于该特定格式，您可以将它们排序为字符串

```
>>> sorted(['20100405','20121209','19990606'])
['19990606', '20100405', '20121209']
>>> sorted(['20100405','20121209','19990606'], reverse=True)
['20121209', '20100405', '19990606'] 
```

这是有效的，因为在该格式中，数字按最高有效到最低有效的顺序排列

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-26T02:23:39.690

这是两种方式：

```
print sorted(my_list)
print sorted(my_list, reverse=True) 
```

人们使用 YYYYMMDD 格式的日期的全部原因是字典（字符串）排序将完成日期排序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T02:23:47.490

字符串自然排序。使用`list.sort`（就地）或内置`sorted`（复制）。

两者都接受一个名为的布尔参数`reverse`，默认为`False`; 设置为`True`fr 倒序。

# css - 如何将 div 放入角落

> ID：11199980
> 
> 赞同：0
> 
> 时间：2012-06-26T02:20:38.290
> 
> 标签：css, html

我有一个高度跨度为 2 行的 div。但我希望以下 div 适合左下角和右下角：

[http://jsfiddle.net/netnet/NNH6V/](http://jsfiddle.net/netnet/NNH6V/) 在浏览之前，请将分割器向左拖动，您会看到checkbox2和“2222222222”可以完美地适合左下角和右下角。

我可以使用相对位置（.VerticalUp 类）。但问题是它会在下面留下一个空行，这是我不想要的。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:57:27.547

如果您尝试浮动 Hematology div，则其中有两个导致冲突。如果你改变 .Hematology { float: right; }，这将使产前内容正确浮动...使一切都适合...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:02:00.250

尝试浮动位置。ps-我是新来的。没有太多经验。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T04:47:08.007

嘿，现在像这样更改您的代码，因为您的代码很难我已经创建了新代码，请检查它。并根据设计实施您的项目

**CSS代码**

```
.top, .bottom{
list-style:none;
    color:#fff;
}

.top li, .bottom li{
    display:inline-block;
    background:green;
    width:33%;
    vertical-align: top;
    border-top:solid 10px red;
}
p{
    display:inline-block;
    vertical-align: top;
}

.bottom {
position:absolute;
    left:0;
    right:0;
    bottom:0;
}

.bottom li:last-child{
float:right;
} 
```

**HTML 代码**

```
<ul class="top">
        <li>
        <input type="checkbox">
            <p>first Check box</p>
        </li>
        <li>
        <input type="checkbox">
            <p>Second Check box</p>
        </li>
        <li>
            <p>finel box</p>
        </li>
    </ul>

<ul class="bottom">
        <li>
        <input type="checkbox">
            <p>first Check box</p>
        </li>
        <li>
            <p>finel box</p>
        </li>
    </ul> 
```

**现场演示** [http://jsfiddle.net/fAkY5/](http://jsfiddle.net/fAkY5/)

# xpath - 如何从 XPATH 中的 html 表中检索多行节点数据？

> ID：11199983
> 
> 赞同：1
> 
> 时间：2012-06-26T02:21:17.993
> 
> 标签：xpath, domxpath

在黑暗时代的某个时候，构建了一个脚本，输出以下 html..

```
...
<TABLE BORDER=0 FRAME=ALL_FRAMES RULES=ALL_RULES ALIGN=CENTER BGCOLOR="ffffe5">
<CAPTION ALIGN=TOP>
<FONT  COLOR=009594 SIZE=-1><B>Access Information</B></FONT>
</CAPTION>
<TR>
<TD ALIGN=RIGHT VALIGN=MIDDLE>
<FONT  COLOR=black SIZE=-1><B>Access Circuit(s):</B></FONT>
</TD>
<TD ALIGN=LEFT VALIGN=MIDDLE>
**DATA TO COLLECT 111**
</TD>
<TD ALIGN=RIGHT VALIGN=MIDDLE>
<FONT  COLOR=black SIZE=-1><B>Other Circuit(s):</B></FONT>
</TD>
<TD ALIGN=LEFT VALIGN=MIDDLE>
&nbsp
</TD>
</TR>
<TR>
<TD ALIGN=RIGHT VALIGN=MIDDLE>
&nbsp
</TD>
<TD ALIGN=LEFT VALIGN=MIDDLE>
**DATA TO COLLECT AAA**
</TD>
<TD ALIGN=RIGHT VALIGN=MIDDLE>
&nbsp
</TD>
<TD ALIGN=LEFT VALIGN=MIDDLE>
&nbsp
</TD>
</TR>
<TR>
<TD ALIGN=RIGHT VALIGN=MIDDLE>
&nbsp
</TD>
<TD ALIGN=LEFT VALIGN=MIDDLE>
**DATA TO COLLECT BBB**
</TD>
<TD ALIGN=RIGHT VALIGN=MIDDLE>
&nbsp
</TD>
<TD ALIGN=LEFT VALIGN=MIDDLE>
&nbsp
</TD>
</TR>
<TR>
<TD ALIGN=RIGHT VALIGN=MIDDLE>
&nbsp
</TD>
<TD ALIGN=LEFT VALIGN=MIDDLE>
**DATA TO COLLECT CCC**
</TD>
<TD ALIGN=RIGHT VALIGN=MIDDLE>
&nbsp
</TD>
<TD ALIGN=LEFT VALIGN=MIDDLE>
&nbsp
</TD>
</TR>
<TR>
<TD ALIGN=RIGHT VALIGN=MIDDLE>
<FONT  COLOR=black SIZE=-1><B>Customer:</B></FONT>
</TD>
... 
```

*`<table>`抱歉，我会向您展示表格布局，但如果没有SO ，我不知道该怎么做*

如何使用 XPATH（在 PHP 中）只收集每个`DATA TO COLLECT`部分？到目前为止，我已经能够使用`//*[*='Access Circuit(s):']/following-sibling::td[1]`.

注意事项：

*   这只是大文档的一小部分。
*   我无法更改脚本输出。
*   我不知道会有多少行（图 0 到 6）。
*   数据应该总是在同一个“列”中。
*   我可能只有 XPATH 版本 1。但仍然欢迎版本 2 的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:52:34.267

我想出的表达是这样的：

```
//TR[(.//B[.='Access Circuit(s):']) or ((./preceding-sibling::TR//B[.='Access Circuit(s):']) and (./following-sibling::TR//B[.='Customer:']))]//TD[2] 
```

返回

```
<TD ALIGN="LEFT" VALIGN="MIDDLE">**DATA TO COLLECT 111**</TD>
<TD ALIGN="LEFT" VALIGN="MIDDLE">**DATA TO COLLECT AAA**</TD>
<TD ALIGN="LEFT" VALIGN="MIDDLE">**DATA TO COLLECT BBB**</TD>
<TD ALIGN="LEFT" VALIGN="MIDDLE">**DATA TO COLLECT CCC**</TD> 
```

它使用第一行包含的知识`Access Circuit(s):`和第一个未收集的行包含的知识`Customer:`。如果您不能确定其中任何一个，那么我认为它不能用单个 XPath 表达式来完成。

```
Step-by-step
1\. //TR[
2\.     (.//B[.="Access Circuit(s):"])
3\.     or (     (./preceding-sibling::TR//B[.="Access Circuit(s):"])
4\.          and (./following-sibling::TR//B[.="Customer:"]) )
5\.     ]//TD[2]

Means
1\. all TR nodes
2\. that either contain "Access Circuit(s):"
3\. or
    - (3.) are positioned after "Access Circuit(s):"
    - (4.) and are positioned before "Customer:"
5\. all TD nodes that are the second TD of their parents 
```

# scala - 如何向不同班级的演员发送消息？

> ID：11199984
> 
> 赞同：1
> 
> 时间：2012-06-26T02:21:33.003
> 
> 标签：scala, akka

我有两个具有不同 ActorSystem 的类及其相应的演员。class1 中的演员如何向 class2 中的演员发送消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T06:21:56.800

为什么你有`ActorSystem`2s？除非你有很好的理由，否则你应该在同一个`ActorSystem`. 创建一个`ActorSystem`非常昂贵，通信和错误处理更难。下面是一个简单的actor之间通信的例子：

```
class Foo extends Actor {

  val barActor = context.actorFor("/user/bar")

  def receive = {
    case 'Send => barActor ! "message from foo!"
  }
}

class Bar extends Actor {
  def receive = {
    case x => println("Got " + x)
  }
}

object Main {
  def main(args: Array[String]) {
    val system = ActorSystem("MySystem")
    val foo = system.actorOf(Props[Foo], "foo")
    val bar = system.actorOf(Props[Bar], "bar")

    foo ! 'Send
  }
} 
```

使用`system.actorFor`or `context.actorFor`，您可以检索`ActorRef`给定路径的一个。用户创建的 Actor 的路径始终以所有父 Actor 开头`/user`并包括所有父 Actor。因此，如果您有 3 个演员的层次结构，则路径可能是`/user/actorA/actorB/actorC`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:19:23.417

请参阅[有关 Actor Paths 的文档](http://doc.akka.io/docs/akka/2.0.2/general/addressing.html)。演员路径包括演员系统。

因此，例如，如果您的参与者系统被命名为`system1`and ，并且您的两个参与者都是名为and`system2`的顶级参与者，您可以为他们获取如下信息：`actor1``actor2``ActorRefs`

```
// inside actor1
val actor2 = system.actorFor("akka://system2/user/actor2")
actor2 ! "Foo" 
```

和

```
// inside actor2
val actor1 = system.actorFor("akka://system1/user/actor1")
actor1 ! "bar" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-26T02:29:02.307

我不确定你在问什么。

如果actor类是`MyClass`并且消息对象是`Message`，你就这样做

```
val myInstance = new MyClass()
myInstance ! Message 
```

就是这样。您可以从任何其他参与者中调用它。

# php - PHP 用 url 友好文本替换主题标签

> ID：11199988
> 
> 赞同：0
> 
> 时间：2012-06-26T02:22:04.180
> 
> 标签：php, hashtag, pinterest

我正在使用 PHP 版本的 Pinterest Pin It 按钮，但我遇到了 url 的“描述”部分的问题......

我正在使用 php 生成 url：

```
$pinurl = 'http://foo.com';
$pinmedia = 'http://foo.com/picture.jpg';
$pindesc = 'my description with #hashtag';

$pin = 'http://pinterest.com/pin/create/button/?url='.$pinurl.'&media='.$pinmedia.'&description='.$pindesc.'';

echo '<a href="'.$pin.'" class="pin-it-button" count-layout="none" target="_blank">Pin It!</a>'; 
```

我遇到的问题是当我的 $pindesc 变量中有一个标签或只有一个标签时，Pinterest 不会从 url 读取它，因为它看起来像：

```
http://pinterest.com/pin/create/button/?url=http://foo.com&media=http://foo.com/foo.jpg&description=#foo 
```

所以很明显#foo 没有被解读为描述......

我想知道是否有某种解决方法，或者我是否可以使用“if”语句来运行我的 $pindesc 变量来检查主题标签并将其替换为“url 友好”的“%23”

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T02:26:15.807

您可以使用它[`urlencode`](http://php.net/urlencode)来转换脚本中的任何棘手字符：

```
$pindesc = urlencode('my description with #hashtag'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T02:29:17.787

使用[rawurlencode](http://php.net/rawurlencode)：

```
$pin = 'http://pinterest.com/pin/create/button/?url='.rawurlencode($pinurl).'&media='.rawurlencode$pinmedia).'&description='.rawurlencode($pindesc).''; 
```

This will URL encode all characters except for -_.~ (RFC 3986)

# c++ - 摆脱 boost::fusion 序列中的引用

> ID：11199989
> 
> 赞同：1
> 
> 时间：2012-06-26T02:22:06.573
> 
> 标签：c++, templates, boost, reference, boost-fusion

我正在尝试使用 Boost::Fusion 将函数的参数类型列表转换为 fusion::list。最终，我试图将变量列表转换为可以调用函数的参数（http://stackoverflow.com/questions/11164914/generating-wrappings-for-c-functions）。

我已经让它适用于非引用变量。但是，当我尝试打开函数的参数列表时（特别是在 fusion::to_list 上它抱怨它无法取消引用迭代器）时，它无法编译非引用变量。

我在下面简化了代码：

```
struct identity {
  template<typename Sig> struct result;

  template <typename T>
  struct result<convert(T)> { typedef T type; };

  template <typename T>
  typename T operator ()(T) const { 
     return T();
  }
};

int main(int argc, char **argv) {
  typedef BOOST_TYPEOF(foo) params_type;
  auto seq = function_types::parameter_types<params_type>();
  auto transformed = fusion::transform(seq, identity());
  auto passedParams = fusion::as_list(transformed);
} 
```

如果 foo 定义为：

```
int foo(int a) { return 5*a; } 
```

它工作正常，但它会中断：

```
int foo(int &a) { return 5*a; } 
```

就我的代码而言，我实际上并不需要保留在序列中的引用，我认为这是问题所在（此外，我所做的搜索倾向于指出这是罪魁祸首）。但是，我不完全确定在调用`transformed`之前如何剥离这些引用的功能`as_list`。

我尝试了一些类似的东西：

```
template <typename T>
struct result<convert(T)>: remove_reference<T> {};

template <typename T>
typename remove_reference<T>::type operator ()(remove_reference<T>::type) const { return typename remove_reference<T>::type(); } 
```

但得到了相同的编译错误。

关于如何解决这个问题的任何想法？

**更新**

对于上面给出的两种情况，这是我得到的截断编译器错误（使用 clang++ --std=c++0x）：

```
/usr/local/include/boost/fusion/adapted/mpl/mpl_iterator.hpp:43:24: error: 
      reference to type 'int' requires an initializer
                return type();
                       ^
/usr/local/include/boost/fusion/iterator/deref.hpp:61:28: note: in instantiation
  of member function
  'boost::fusion::mpl_iterator<boost::mpl::v_iter<boost::function_types::parameter_types<void
  (int &), boost::add_reference<mpl_::arg<-1> > >, 0>
  >::deref<boost::fusion::mpl_iterator<boost::mpl::v_iter<boost::function_types::parameter_types<void
  (int &), boost::add_reference<mpl_::arg<-1> > >, 0> > >::call' requested
  here
    return deref_meta::call(i);

...

test4.cpp:65:22: note: in instantiation of function template specialization
  'boost::fusion::as_list<boost::fusion::transform_view<const
  boost::function_types::parameter_types<void (int &),
  boost::add_reference<mpl_::arg<-1> > >, convert, boost::fusion::void_> >'
  requested here
    auto passedParams = fusion::as_list(transformed); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:27:53.677

如果您的编译器与 C++11 兼容，您可能需要查看[`std::remove_reference](http://en.cppreference.com/w/cpp/types/remove_reference)函数。或者至少尝试找到它的实现并用作制作自己的参考。

# ios - UIViewController 拥有另一个 UIViewController

> ID：11199990
> 
> 赞同：0
> 
> 时间：2012-06-26T02:22:11.417
> 
> 标签：ios, uiviewcontroller, xib

这是场景。

当用户的登录信息被提交时，
activityIndi​​cator 视图被显示。

这可以实现为..
LoginViewController 可以拥有其视图为 activityIndi​​cator 的 LoadingViewController。
addSubview/removeFromSuperview 在适当的时候。

我通常会以编程方式创建一个 activityIndi​​cator 视图并一起玩。
我想当程序员希望每个视图都与 xib 相关联时，LoadingViewController 可能会发挥作用。

具有 UIViewController 的 UIViewController 看起来很正常吗？
如果不是，当您的队友希望每个视图在某些 XIB 中可见时，您将如何处理上述情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:32:32.093

`UIViewController`subviews 另一个视图`UIViewController`是正常的。你的方法会奏效。

或者，您可以将其`ActivityIndicatorView`作为子视图`LoginViewController`，并隐藏/取消隐藏它（默认隐藏）。无需为它创建单独的视图控制器。如果您的记忆力非常紧张，这种方法并不好（不过，我对此有些怀疑）。

如果您的内存非常紧张，只需说服他们让您以编程方式创建它。

# sqlbulkcopy - SqlBulkCopy 异常超时错误

> ID：11199994
> 
> 赞同：0
> 
> 时间：2012-06-26T02:22:28.747
> 
> 标签：sqlbulkcopy, timeoutexception

我有一个 SqlBulkCopy 操作，它从 MS-Access 2007 数据库（通过 OleDbConnection）获取数据并使用 SqlBulkCopy 将该数据传输到 SQL Server 数据库。这以前一直有效，并继续适用于一个 MS-Access 数据库，但不适用于另一个。

我收到错误消息：

> 超时已过。在操作完成之前超时时间已过或服务器没有响应。

很难相信这是一个超时，因为 oledbCommand.CommandTimeout = 0 sqlBulkCopy.BulkCopyTimeout = 0 并且在任一侧（MS-Access 和 SQL Server 的超时现在已设置为 0）。

是否存在上述错误消息可能隐藏的其他问题/异常？有没有办法确定 sqlBulkCopy.WriteToServer 异常的根本原因是什么（似乎没有任何内部异常等......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:11:04.277

所以问题是有日期被转移，其中一些日期对 SQL 无效，但在 Access 中有效。无论出于何种原因，这都显示为 Timeout 而不是“无效的日期/时间”——尽管如果您将传输的数据减少到少数行 (200) 而不是完整传输 (500,000)，它会报告为 invalid date/time 。 .. 好奇的。

# wpf - ListView 基于绑定值的不同控件

> ID：11199999
> 
> 赞同：1
> 
> 时间：2012-06-26T02:23:41.127
> 
> 标签：wpf, mvvm

我有一个显示链接按钮的 ListView。我只需要链接按钮来显示“FileAddress”字符串是否有值。否则，它应该显示一个带有 Title 的简单 TextBlock。

```
<GridViewColumn.CellTemplate>
    <DataTemplate>
        <Button Style="{StaticResource LinkButton}" Height="23" Content="{Binding Path=Title}" />
    </DataTemplate>
</GridViewColumn.CellTemplate> 
```

任何想法，将不胜感激。

TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:20:27.027

我认为“gridview”是 wpf 的一个简单组件。进行这种类型的更改有点笨拙。

您可以采用三种不同的方法：

**1）**使用GridViewColumn.CellTemplateSelector（[http://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-use-a-datatemplateselector](http://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-use-a-datatemplateselector)）
虽然我不喜欢=（

**2)**创建一个按需要运行的 UserControl。
看起来合适且相对容易

**3）**通过触发器改变按钮样式：

```
 <Button.Style>
            <Style TargetType="Button">
                <Style.Triggers>
                    <Trigger Property="Content" Value="{x:Null}">
                        <!-- Changes -->
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Button.Style> 
```

或者

```
 <Style TargetType="Button">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Grid>
                                <!-- Template -->
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="Content" Value="{x:Null}">
                                    <!-- Changes -->
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style> 
```

使用触发器时有一些限制，有时您最终不得不为按钮创建一个新模板，如果您知道使用 xaml 相对容易且简单。

示例（我在这里有一个按钮，我正在更改他的图像）：

```
 <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Grid Width="{TemplateBinding Width}" Height="{TemplateBinding Height}">
                    <Image x:Name="imgBackground" Source="{StaticResource UpArrowImageNormal}" Stretch="None"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter TargetName="imgBackground"
                                Property="Source" Value="{StaticResource UpArrowImageIsPressed}"/>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter TargetName="imgBackground" Property="Source" Value="{StaticResource UpArrowImageDisabled}"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:25:14.143

您可以使用以下转换器

```
[ValueConversion(typeof(Object), typeof(Visibility))]
public class NullVisibilityConv : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value == null) return Visibility.Collapsed;
        else return Visibility.Visible;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return value;
    }

} 
```

然后，您可以使用以下 xaml 绑定到控件

```
<GridViewColumn.CellTemplate>
    <DataTemplate>
        <Button Style="{StaticResource LinkButton}" Height="23" Content="{Binding Path=Title}"
                Visibility="{Binding FileAddress, Converter={StaticResource NullToVisConverter}}"/>
    </DataTemplate>
</GridViewColumn.CellTemplate> 
```

您还需要在 xaml 中的某处将转换器声明为资源

```
<converters:NullVisibilityConv x:Key="NullToVisConverter" /> 
```

这种方法的一个优点是，一旦您在代码中声明了转换器，您就可以在其他绑定上再次使用它，而无需添加触发器或任何其他复杂代码，只需在可见性绑定上使用该转换器