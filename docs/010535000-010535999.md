# StackOverflow 问答 10535000-10535999

# javascript - 如何将 websocket 与 emberjs 集成？

> ID：10535007
> 
> 赞同：9
> 
> 时间：2012-05-10T13:26:47.457
> 
> 标签：javascript, ruby-on-rails-3, websocket, ember.js

我正在使用 rails 学习和构建 emberjs 应用程序。在这个应用程序中，我希望将数据推送而不是轮询到客户端应用程序。

[例如http://awardwinningfjords.com/2011/12/27/emberjs-collections.html](http://awardwinningfjords.com/2011/12/27/emberjs-collections.html)上的以下片段

```
// Setup a global namespace for our code.
Twitter = Em.Application.create({

  // When everything is loaded.
  ready: function() {

    // Start polling Twitter
    setInterval(function() {
      Twitter.searchResults.refresh();
    }, 2000);

    // The default search is empty, let's find some cats.
    Twitter.searchResults.set("query", "cats");

    // Call the superclass's `ready` method.
    this._super();
  }
}); 
```

它轮询 twitter API，但我的问题是如何制作一个使用 WebSocket 连接来更新其状态的 EmberJS 应用程序？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-11T18:59:32.123

您必须实现一个了解如何处理 WebSocket 的 DS.Adapter。这是一个简单的例子：

```
var SOCKET      = 'ws://localhost:9090/some-websocket';

var ID          = 'uuid';

var FIND        = 'find';
var FIND_MANY   = 'findMany';
var FIND_QUERY  = 'findQuery';
var FIND_ALL    = 'findAll';

/**
* Implementation of WebSocket for DS.Store
*/
App.Store = DS.Store.extend({

    revision: 4,

    adapter: DS.Adapter.create({

        socket: undefined,

        requests: undefined,

        send: function(action, type, data, result) {
            /* Specific to your web socket server side implementation */
            var request = {
                "uuid": generateUuid(),
                "action": action,
                "type": type.toString().substr(1),
                "data": data
            };
            this.socket.send(JSON.stringify(request));
            /* So I have access to the original request upon a response from the server */
            this.get('requests')[request.uuid] = request;
            return request;
        },

        find: function (store, type, id) {
            this.send(FIND, type, id);
        },

        findMany: function (store, type, ids, query) {
            this.send(FIND_MANY, type, ids);
        },

        findQuery: function (store, type, query, modelArray) {
            this.send(FIND_QUERY, type, query, modelArray).modelArray = modelArray;
        },

        findAll: function (store, type) {
            this.send(FIND_ALL, type);
        },

        /* Also implement:
         * createRecord & createRecords
         * updateRecord & updateRecords
         * deleteRecord & deleteRecords
         * commit & rollback
         */

        init: function () {

            var context = this;

            this.set('requests', {});

            var ws = new WebSocket(SOCKET);

            ws.onopen = function () {

            };

            ws.onmessage = function(event) {
                var response = JSON.parse(event.data);
                var request = context.get('requests')[response.uuid];

                switch (request.action) {
                    case FIND:
                        App.store.load(type, response.data[0]);
                        break;
                    case FIND_MANY:
                        App.store.loadMany(type, response.data);
                        break;
                    case FIND_QUERY:
                        request.modelArray.load(response.data);
                        break;
                    case FIND_ALL:
                        App.store.loadMany(type, response.data);
                        break;
                    default:
                        throw('Unknown Request: ' + request.action);
                }

                /* Cleanup */
                context.get('requests')[response.uuid] = undefined;
            };

            ws.onclose = function () {

            };

            this.set('socket', ws);
        }

    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T16:50:35.243

几天前，我实际上正在研究那篇文章中的代码。保持把手模板相同，并使用以下代码。显然，这一切都取决于您通过套接字传递的 JSON。以下代码使用 ntwitter for node 进行了尝试和测试。

```
Twitter = Em.Application.create({
    ready: function() {
        var socket = io.connect();
        socket.on('message', function(json) {
            Twitter.searchResults.addTweet(Twitter.Tweet.create(JSON.parse(json)));
        });

        this._super();
    }
});

//Model
Twitter.Tweet = Em.Object.extend();

//Collection
Twitter.searchResults = Em.ArrayController.create({
    content:    [],
    _idCache:   {},

    addTweet: function(tweet) {
        var id = tweet.get("id");
        if (typeof this._idCache[id] === "undefined") {
            this.pushObject(tweet);
            this._idCache[id] = tweet.id;
        }
    }

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T17:11:52.543

使用 websockets，您可以观察套接字事件。当触发事件时，您处理该事件（如果合适），然后设置您的值。

查看您的代码，您会观察到 Socket.onmessage。如果消息包含您要查找的内容，则调用刷新。

# android - android如何以编程方式在页眉和页脚之间创建动态中央视图

> ID：10535009
> 
> 赞同：1
> 
> 时间：2012-05-10T13:26:48.657
> 
> 标签：android, view, header, footer

我是android开发的新手，所以请耐心等待。我正在尝试创建一个带有标题（文本视图和 4 个按钮）和页脚（包含 2 个按钮和一个中央搜索栏）的简单应用程序。我想使用页眉中的按钮以编程方式更改屏幕中心的视图，但不隐藏页眉和页脚。我已经阅读了很多关于如何调用新活动和使用充气机的信息，但我只是想成为一个白痴，因为我不明白正确的方法！有人可以帮助我吗？谢谢！

# c++ - 如何在c ++中获取可执行文件所在驱动器的信息

> ID：10535015
> 
> 赞同：0
> 
> 时间：2012-05-10T13:27:01.747
> 
> 标签：c++, usb, libusb

我的应用程序将从具有特定信息的 USB 密钥运行，例如我需要的供应商 ID、设备 ID 等。

我尝试使用 libusb，但尽管我仍然无法使其正常工作，我如何才能找到合适的 USB 驱动器来获取信息？

请注意，我希望代码是跨平台的，这就是我首先选择 libusb 的原因。

编辑 ：

我找到了一个程序（usbviewer），它可以在连接时枚举所有 USB 端口和驱动器上的特定信息。

我已经阅读了 linux 的源代码，信息是直接从 /proc/bus/usb/devices 中提取的，非常简单。

但是在 Windows 上，要获取 USB 节点连接信息，大约需要 1000 行才能获得数据结构中的实际信息（枚举集线器控制器、根集线器、端口......）。

另一边的 libusb 迫使我生成一个 INF 文件并通过 inf-wizard.exe 为每个设备安装驱动程序，然后我才能获得信息（虽然没有在 linux 上尝试过）。

编辑 2：

我找到了一种使用 Windows、Linux 和 Mac OS X 获取设备序列号的方法（没有尝试过 MAC OS X，但它应该像 Linux 一样工作）。对于 Windows，我`GetVolumeInformation()`在 Linux 上使用函数来读取具有 FAT 文件系统的驱动器的序列号，我在相应的 /dev/* 文件中读取 4 个字节，从 0x27 或 0x43 开始，具体取决于 FAT 版本。

但是这种阅读需要程序没有的root访问权限，在我看来有点不可靠。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:22:31.370

对于那些有兴趣的人，我找到了适合我的解决方案。

对于 Windows：

我从注册表中提取设备的序列号，知道驱动器号：HKEY_LOCAL_MACHINE\SYSTEM\MountedDevices\DosDevices\X：

对于 Unix：

我`/dev`用命令获取文件`df`，然后读取与文件`/sys/block`对应的链接`/dev`（例如：驱动器是/dev/sdb，我读取了.的链接`/sys/block/sdb`。然后我读取了`serial`位于链接指向的目录中的文件， 6x 目录向后。

希望能帮助到你。

# asp.net-mvc-3 - 在asp.net mvc3项目中使用html5

> ID：10535020
> 
> 赞同：1
> 
> 时间：2012-05-10T13:27:06.910
> 
> 标签：asp.net-mvc-3, html

我在创建 asp.net mvc3 项目时选择了 html5 Checkbox，我想使用标签，但我无法访问它。同样在 Tools->Options->HTML->Validation->Target 我发现我拥有的最新版本 HTML 是 4.01 我现在该怎么办？我需要使用标签。你的回答很有帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:28:42.010

确保您已安装[ASP.NET MVC 3 工具更新](http://www.microsoft.com/en-us/download/details.aspx?id=1491)，其中添加了 HTML 5 设计时支持。Scott Gu 还写了[一篇博客](http://weblogs.asp.net/scottgu/archive/2011/05/03/asp-net-mvc-3-tools-update.aspx)：

![在此处输入图像描述](../Images/b8bc4b37655ec2913d1860aa71b615dd.png)

# java - Arraylist 两次添加对象

> ID：10535023
> 
> 赞同：0
> 
> 时间：2012-05-10T13:27:17.687
> 
> 标签：java, android, arraylist

我对arraylist有一个奇怪的问题。我在for循环中将对象添加到arraylist，除了arraylist add方法外一切正常。似乎我的列表将每个对象添加了两次，但我找不到原因。这是我的代码

```
private void generateCitizens()
{
    int counter = Constants.CITIZENS_NUMBER;
    Random r = new Random(Calendar.getInstance().getTimeInMillis());
    while(counter > 0)
    {
        int x = r.nextInt(Constants.TILES_IN_WIDTH) + 1;
        int y = r.nextInt(Constants.TILES_IN_HEIGHT) + 1;

        if(map.collisionTable[y][x] == 2)
        {
            Citizen c = new Citizen(x, y, citizenTexture.deepCopy(), map);
            citizensList.add(c);
            Log.i("Citizens count", String.valueOf(citizensList.size()));
            scene.attachChild(c);
            counter--;
        }
    }

    for(int i = 0; i<citizensList.size(); i++)
    {
        Log.i("Citizen - ", citizensList.get(i).toString());
    }
} 
```

在这种情况下，Constants.CITIZENS_NUMBER 是 15，这就是我在日志中得到的

> 05-10 15:13:36.801: I/Citizens count(3237): 2 05-10 15:13:36.801: I/Citizens count(3237): 4 05-10 15:13:36.801: I/Citizens count( 3237): 6 05-10 15:13:36.801: I/Citizens count(3237): 8 05-10 15:13:36.801: I/Citizens count(3237): 10 05-10 15:13:36.811: I /公民人数(3237): 12 05-10 15:13:36.811: 我/公民人数(3237): 14 05-10 15:13:36.811: 我/公民人数(3237): 16 05-10 15:13 :36.811: I/Citizens count(3237): 18 05-10 15:13:36.821: I/Citizens count(3237): 20 05-10 15:13:36.821: I/Citizens count(3237): 22 05- 10 15:13:36.821: I/Citizens count(3237): 24 05-10 15:13:36.821: I/Citizens count(3237): 26 05-10 15:13:36.831: I/Citizens count(3237) : 28 05-10 15:13:36.831: I/Citizens count(3237): 30 05-10 15:13:36.831: I/Citizen -(3237): com.lpp.towndefence.Citizen@40535d40 05-10 15 :13:36.831: I/Citizen -(3237): com.lpp。towndefence.Citizen@40535d40 05-10 15:13:36.831: I/Citizen -(3237): com.lpp.towndefence.Citizen@40537318 05-10 15:13:36.831: I/Citizen -(3237): com. lpp.towndefence.Citizen@40537318 05-10 15:13:36.841: I/Citizen -(3237): com.lpp.towndefence.Citizen@40514688 05-10 15:13:36.841: I/Citizen -(3237): com.lpp.towndefence.Citizen@40514688 05-10 15:13:36.841: I/Citizen -(3237): com.lpp.towndefence.Citizen@40799fe8 05-10 15:13:36.841: I/Citizen -(3237) ): com.lpp.towndefence.Citizen@40799fe8 05-10 15:13:36.841: I/Citizen -(3237): com.lpp.towndefence.Citizen@4079c308 05-10 15:13:36.841: I/Citizen - (3237): com.lpp.towndefence.Citizen@4079c308 05-10 15:13:36.841: I/Citizen -(3237): com.lpp.towndefence.Citizen@4079abd8 05-10 15:13:36.841: I/公民-（3237）：com.lpp.towndefence.Citizen@4079abd8 05-10 15：13：36.841：我/公民-（3237）：com.lpp。towndefence.Citizen@4079b4a0 05-10 15:13:36.841: I/Citizen -(3237): com.lpp.towndefence.Citizen@4079b4a0 05-10 15:13:36.841: I/Citizen -(3237): com. lpp.towndefence.Citizen@407ba160 05-10 15:13:36.841: I/Citizen -(3237): com.lpp.towndefence.Citizen@407ba160 05-10 15:13:36.841: I/Citizen -(3237): com.lpp.towndefence.Citizen@407ba230 05-10 15:13:36.851: I/Citizen -(3237): com.lpp.towndefence.Citizen@407ba230 05-10 15:13:36.851: I/Citizen -(3237) ): com.lpp.towndefence.Citizen@407ba300 05-10 15:13:36.861: I/Citizen -(3237): com.lpp.towndefence.Citizen@407ba300 05-10 15:13:36.861: I/Citizen - (3237): com.lpp.towndefence.Citizen@407ba3d0 05-10 15:13:36.861: I/Citizen -(3237): com.lpp.towndefence.Citizen@407ba3d0 05-10 15:13:36.861: I/公民-（3237）：com.lpp.towndefence.Citizen@407ba4a0 05-10 15：13：36.861：我/公民-（3237）：com.lpp。towndefence.Citizen@407ba4a0 05-10 15:13:36.861: I/Citizen -(3237): com.lpp.towndefence.Citizen@407bac18 05-10 15:13:36.861: I/Citizen -(3237): com. lpp.towndefence.Citizen@407bac18 05-10 15:13:36.871: I/Citizen -(3237): com.lpp.towndefence.Citizen@407bb3f0 05-10 15:13:36.871: I/Citizen -(3237): com.lpp.towndefence.Citizen@407bb3f0 05-10 15:13:36.871: I/Citizen -(3237): com.lpp.towndefence.Citizen@407bbc80 05-10 15:13:36.871: I/Citizen -(3237) ): com.lpp.towndefence.Citizen@407bbc80I/Citizen -(3237): com.lpp.towndefence.Citizen@407bbc80 05-10 15:13:36.871: I/Citizen -(3237): com.lpp.towndefence.Citizen@407bbc80I/Citizen -(3237): com.lpp.towndefence.Citizen@407bbc80 05-10 15:13:36.871: I/Citizen -(3237): com.lpp.towndefence.Citizen@407bbc80

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:31:41.620

你把这个类子`List`类化了吗？

可以`new Citizen`将自己添加到列表中吗？还是`attachChild`现场方法？

# java - 在 Java 中打印双数 System.out.printf

> ID：10535027
> 
> 赞同：4
> 
> 时间：2012-05-10T13:27:32.283
> 
> 标签：java

我有一个双数字，我只想打印这个数字的组成部分。我试图用它来打印它，`System.out.printf`但我得到了一个`IllegalFormatConversionException`. 我试过类似的东西：

```
A()
{ 
    double x;
    //calculate double
    System.out.println("%d",x);
} 
```

我知道我可以简单地使用它来打印它，`System.out.print`但这也会打印小数部分。我怎样才能做到这一点`printf`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-10T13:28:55.443

```
System.out.printf("%.0f",x); 
```

*   **.0**指定精度。数字根据此处指定的精度四舍五入。（例如，如果你想要 2 个小数位，你会指定 0.2）
*   **f**指定它是一个浮点数 - 包括双精度数（d 是十进制整数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:43:16.163

您也可以使用`%g`to`round-off`并将 double 作为整数打印：

```
System.out.printf("x=%g%n", x); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:44:00.163

您可以使用以下代码：

```
 public static void main(String[] args) {
    double x = 0 ;//The local variable x must be initialized
    System.out.printf("%d",(int)x);//in JDK 5
           //OR
    System.out.printf("%.0f",x);//in JDK 5
           //OR
    System.out.println((int)x);

} 
```

# asp.net - 使用错误代码 413 将数据从数据库拉到 gridview

> ID：10535033
> 
> 赞同：1
> 
> 时间：2012-05-10T13:27:55.223
> 
> 标签：asp.net

当我绑定一个包含：来自数据库的 183785 条记录的数据表时，我遇到了这个问题：

> Sys.WebForms.PageRequestManagerServerErrorException：处理服务器上的请求时发生未知错误。服务器返回的状态码是：413。

通过搜索，错误表明：

“状态码 413 表示请求实体太大。413 状态码表示请求大于服务器能够处理的大小，无论是由于物理限制还是设置。通常，当使用来自表单的 POST 方法，并且文件大于服务器设置中允许的最大大小。”

但是在 web.config 中，我们已经增加了 maxRequestLength

```
<httpRuntime executionTimeout="9000" maxRequestLength="2097151" useFullyQualifiedRedirectUrl="false"/> 
```

我们如何解决这个问题？

# android - 如何管理自定义 ListView 项的状态

> ID：10535035
> 
> 赞同：0
> 
> 时间：2012-05-10T13:27:59.013
> 
> 标签：android, android-intent

我正在开发一个应用程序，我必须通过单击第一个 ListView 从一个 ListView 移动到另一个 ListView。第二个活动 ListView 是一个自定义 ListView，带有一个是图标图像和一个 TextView。图像图标在启动时不可见，单击列表项后相应的图像将变为可见。第二个 ListView 是单击列表视图。！[在此处输入图像描述][1] 当我单击后退按钮并再次单击第一个ListView，第二个ListView的Clicked item变得不可见..

我是 android 新手，不知道如何管理列表项单击的状态。请帮助...我必须从第一个屏幕移动到第二个屏幕并在重新单击第一个列表视图项时保持列表视图项的状态。

第二个列表视图活动

```
SharedPreferences pref;
 private static String names[] = {"SV3","SV4","SV6","LV1"};  
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.selectibx);
    lv=(ListView)findViewById(R.id.listView1);
    adapter = new LvCustomAdapter(this, names); 
    lv.setAdapter(adapter);
   LoadSelections();
    ImageView img=(ImageView) lv.findViewById(R.id.image);
  if(img!=null)
    {
        img.setImageResource(R.drawable.black_arrow);
        img.setVisibility(View.VISIBLE);
        }
 lv.setOnItemClickListener(this); 
    back=(ImageView)findViewById(R.id.imageback);
    back.setOnClickListener(new View.OnClickListener() {
    public void onClick(View arg0) {
Intent = new Intent(getApplicationContext(),MainActivity.class);
Bundle b=new Bundle();
b.putString("state", "clicked");
   intent.putExtras(b);
setResult(RESULT_OK, intent);
startActivity(intent);  
finish();
}

    });
}

public void onItemClick(AdapterView<?> lvv, View view, int position, long id) {

    if (current != -1) {
        View last = lvv.getChildAt(current); // the last one clicked
        last.findViewById(R.id.image).setVisibility(View.GONE);
     }
    view.findViewById(R.id.image).setVisibility(View.VISIBLE);
    current = position; // remember the new clicked position

    System.out.println("Selected State is: "+current);

    SaveSelections(view);

}

private void SaveSelections(View v) {
    // TODO Auto-generated method stub
     SharedPreferences settings = getSharedPreferences( PREFS_NAME,0 );
        SharedPreferences.Editor editor = settings.edit();

        editor.putInt("Raman", current);
        editor.commit();
}

private void LoadSelections() {

        pref = this.getApplicationContext().getSharedPreferences(PREFS_NAME, MODE_WORLD_READABLE);
        int xy=pref.getInt("Raman",1);
        adapter = new LvCustomAdapter(this, names);   
        lv.setAdapter(adapter);
          lv.setSelection(xy);

          System.out.println(lv.getSelectedItemPosition()+"****"+xy);

         View v=lv.getChildAt(xy);

    } 
```

}

**自定义适配器类：**

```
public class LvCustomAdapter extends BaseAdapter  {
 protected ListView mListView;
   public String title[];  
   //public String designations[];
   public Activity context;  
    public LayoutInflater inflater; 
    int current=-1;
    public LvCustomAdapter(Activity context,String[] title) {  
        super();  

        this.context = context;  
        this.title = title;  
        this.inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  
    }  

    public int getCount() {  
        // TODO Auto-generated method stub  
        return title.length;  
    }  

    public Object getItem(int position) {  
        // TODO Auto-generated method stub  
        return null;  
    }  

    public long getItemId(int position) {  
        // TODO Auto-generated method stub  
        return 0;  
    }  

    public static class ViewHolder  
    {  
        ImageView imgarrow;  
        TextView txtViewName;  

    }  

    public View getView(int position, View convertView, ViewGroup parent) {  
        // TODO Auto-generated method stub  

        ViewHolder holder;  
        if(convertView==null)  
        {  
            holder = new ViewHolder();  
            convertView = inflater.inflate(R.layout.commonlist, null);  

            holder.txtViewName = (TextView) convertView.findViewById(R.id.tvItem);  

            holder.imgarrow = (ImageView) convertView.findViewById(R.id.image);  

           /* holder.email.setOnClickListener(emailClickListener);
            holder.mobile.setOnClickListener(mobileClickListener);
            holder.phone.setOnClickListener(phoneClickListener);
            convertView.setTag(holder);  */
            //int a=convertView.getSelectedItemPosition();
            int a=position;

            convertView.setTag(holder); 
        }  
        else  
            holder=(ViewHolder)convertView.getTag();  
   holder.txtViewName.setText(title[position]); 
    holder.imgarrow.setImageResource(R.drawable.black_arrow);
holder.imgarrow.setVisibility(View.INVISIBLE);

        return convertView;  
    }   
} 
```

谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:23:07.507

**为了保持您可以使用的状态..**

```
Shared Preferences
Save your desired values in onPause() and get them again in onResume() 
```

希望它对你有用。

# asp.net - 使用特定于我的应用程序的接口和抽象类？

> ID：10535040
> 
> 赞同：-4
> 
> 时间：2012-05-10T13:28:19.780
> 
> 标签：asp.net, oop

我是 asp.net 程序员，我有两个应用程序，一个是像 eBay 网站这样的电子商务应用程序，另一个是管理，比如商店管理系统，比如 bigbazzar 或任何书店等。

现在我想在我的项目中实现接口和抽象类。我已经阅读了抽象类和接口，并且知道如何使用理论。但是我正在寻找与我的应用程序相关的真实世界或实际示例。（即对于电子商务和商店管理）我已经搜索了很多示例网络电子商务和管理，其中接口和抽象类被精美地使用。任何人都可以帮助我如何使用我的电子商务和商店管理应用程序中使用的接口和抽象类。

如果您可以共享使用抽象类和接口的任何相关（即电子商务和商店管理）应用程序或项目，那就太好了，这样我就可以轻松地与我的项目相关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:37:51.780

您的问题非常广泛，正如@doogle 在评论中提到的那样，抽象类和接口不一定与特定类型的项目相关联，而是基于您的设计。

在不了解您的电子商务或商店管理应用程序的设计的情况下，不可能为您提供任何具体帮助，但在阅读您之前的一个问题时，您似乎正在尝试了解抽象类和接口如何能够提供帮助你，所以这里有一个基本的例子，可以为你指明正确的方向。

在假设的商店中，您有数千种不同的产品，并且您希望在您的应用程序中跟踪它们。显然，所有产品都有一些共同点，例如制造商、价格、部门、数量，但也有可能仅适用于特定产品的信息片段（衣服有尺寸，但 DVD 没有）。

一个解决方案可能是创建一个`Product`对所有产品都通用的接口，但允许每个类实现该接口并添加自己的属性。现在，您可以保证任何产品类别都至少具有这些共同成员。

这是一个假设的产品界面：

```
public interface IProduct
{
    decimal SellingPrice { get; set; }
    decimal StoreCost { get; set; }
    int QuantityOnHand { get; set; }

    string Manufacturer { get; set; }
    string DepartmentName { get; set; }

    decimal CalculateProfit();
} 
```

然后你可以创建一个抽象类来实现`IProduct`. 这是一个实现`IProduct`但还添加了一个`Size`字段的服装产品

```
public abstract class ClothingProduct : IProduct
{
    public string Size { get; set; }

    public decimal SellingPrice { get; set; }
    public decimal StoreCost { get; set; }
    public int QuantityOnHand { get; set; }
    public string Manufacturer { get; set; }
    public string DepartmentName { get; set; }

    // by marking CalculateProfits abstract, you can let every class that inherits
    //  from ClothingProduct decide how to calculate the profit based on the selling
    //  costs of that product
    public abstract decimal CalculateProfit(); 
} 
```

现在您有了一个`ClothingProduct`类，然后您可以为商店中的一些商品创建类。这是一个鞋子和衬衫类：

```
public class Shirt : ClothingProduct
{
    public override CalculateProfit()
    {
        return this.SellingPrice - this.StoreCost - this.CalculateSellingCosts();
    }

    private decimal CaclulateSellingCosts()
    {
        // some code that would let you calculate the selling costs and
        //  overhead costs associated with this specific product
    }
}

public class Shoes : ClothingProduct
{
    private const decimal commissionRate = 0.05;

    public override CalculateProfit()
    {
        return this.SellingPrice - this.StoreCost - this.CalculateSellingCosts() - this.CalculateCommission();
    }

    private decimal CaclulateSellingCosts()
    {
        // some code that would let you calculate the selling costs and
        //  overhead costs associated with this specific product
    }

    private decimal CalculateCommission()
    {
        return this.SellingPrice * commissionRate;
    }
} 
```

最后，两者`Shoes`和`Shirt`都是`IProducts`因为它们继承了`ClothingProduct`which 又实现了`IProduct`.

您能否为整个商店中的其他产品创建其他类或抽象类，但只要实现`IProduct`，您就可以保证它们将拥有属于`IProduct`.

这有助于您甚至可以创建接口类型的集合并将所有产品添加到其中，因为所有实现`IProduct`

```
// a hypothetical method that grabs everything  (maybe from a database)
List<IProduct> products = GetAllProducts(); 

// this query would give you the total number of items in your inventory
var totalItems = products.Select(quant => quant.QuantityOnHand).Sum();

// and this would calculate the total value of the products based on the store's cost
var totalCost =  products.Select(quant => quant.StoreCost).Sum(); 
```

这两个查询只是人为的示例，因为在数据库中执行此操作同样容易（如果这是存储所有内容的地方），但我这样做只是为了给您提供一个示例，说明如何将所有相关项目绑定回单个界面可以帮忙

# php - 重定向和重写 - 子目录的问题

> ID：10535044
> 
> 赞同：-1
> 
> 时间：2012-05-10T13:28:33.477
> 
> 标签：php, apache, codeigniter, redirect, rewrite

我在apache中有一个表达式： `RewriteEngine On RewriteRule ^(.*)$ 2012/$1 [L]`

我的应用程序位于“2012”文件夹中。我想当有人键入 www.mysite.com 时重定向到 www.mysite.com/2012 但 URL 必须继续 www.mysite.com

这是用我当前的 regex 完成的。

但我无法访问其他子目录来分配其他图像，例如，所有这些都转到 www.mysite.com/2012/newsletter。

我怎样才能让 www.mysite.com/newsletter 工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:36:06.920

这应该有效：

```
RewriteEngine On
# If request starts with 'newsletter' no further rule is processed
RewriteRule ^(newsletter) - [L]

# If first rule doesn't match, rewrite everything not starting with '2012' to the '2012 subfolder
RewriteCond %{REQUEST_URI} !^/2012/.*$
RewriteRule ^(.*)$ /2012/$1 [L] 
```

# java - 如何从 WSDL 动态自动生成 Java Bean？

> ID：10535051
> 
> 赞同：6
> 
> 时间：2012-05-10T13:28:44.383
> 
> 标签：java, wsdl, jax-ws, cxf, wsdl2java

我想开发一个应用程序来测试 Web 服务，它将使用提供的 WSDL 中的参数自动生成一个 JSF 表单。

WSDL URL 由用户提供，在解析之前我不知道操作的名称。我希望应用程序通过解析的操作及其参数，并自动生成适当的 Java Bean，我将使用它来生成 JSF 表单。

我已经测试过 CXF 和 JAX-WS，但我认为他们需要在生成 Java bean 之前知道操作名称。如何为任何 WSDL 透明地生成 Java Bean？手动运行`wsdl2java`不是解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:37:17.830

CXF 确实有一个“DynamicClient”（参见：[http](http://cxf.apache.org/javadoc/latest-2.6.x/org/apache/cxf/jaxws/endpoint/dynamic/JaxWsDynamicClientFactory.html) ://cxf.apache.org/javadoc/latest-2.6.x/org/apache/cxf/jaxws/endpoint/dynamic/JaxWsDynamicClientFactory.html ）可用于此. 它解析 wsdl，生成 JAXB 对象并编译它们，并返回一个客户端，该客户端可用于获取与它们关联的操作和类型等。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-10T13:38:55.093

如果您正在使用 Maven（并且您应该使用），您可以使用 CXF 代码生成插件从 WSDL 生成类。我的博客上有一个例子；

[http://qwerky-qwerky.blogspot.co.uk/2011/12/programming-without-programming-1.html](http://qwerky-qwerky.blogspot.co.uk/2011/12/programming-without-programming-1.html)

# javascript - 如果方法在 javascript 中未定义，则自动加载另一个方法

> ID：10535056
> 
> 赞同：0
> 
> 时间：2012-05-10T13:29:10.183
> 
> 标签：javascript, class, autoload

如果找不到给定对象的方法，我可以回退到另一种方法吗？

说我有（只是想明白）

```
var phoneCall new function() {

  function toMom() {

  }

  function catchAll() {

  }

 }

q = new phoneCall;
q.toMom();

q.toDad() //should fire phoneCall.catchAll(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:02:39.653

使用吸气剂模式：

[http://jsfiddle.net/XjgPW/1/](http://jsfiddle.net/XjgPW/1/)

```
var myObject = (function() {
    var methods = {
        method1: function () {
            console.log('method1 called');
        },
        method2: function () {
            console.log('method2 called');
        },  
        defaultMethod: function () {
            console.log('defaultMethod called');
        }
    };

    var get = function (name) {
        if (methods.hasOwnProperty(name)) {
            return methods[name];
        } else {
            return methods.defaultMethod;
        }
    };

    return {
        get: get
    };
}()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:12:20.187

以下代码演示了在第一个方法不存在时调用回退方法：

```
q = {};
q.toDad = function() {
    console.log("to dad");
}
(q.toMom || q.toDad)();  // Will output "to dad" to the console

q.toMom = function() {
    console.log("to mom");
}
(q.toMom || q.toDad)();  // Will output "to mom" to the console 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:31:34.413

不 - 不是跨浏览器的方式。Firefox 和其他几个引擎有办法做到这一点，但它不适用于 Chrome、IE 等。代理最终将允许一些类似的功能，但这仍处于引擎采用的早期阶段。

* * *

编辑：这里有一些代码可能会让你开始使用一些可行的东西：

```
var phoneCall = {
    to: function(whom) {
        (phoneCall.people[whom] || phoneCall.catchAll)();
    },
    people: {
        mom: function() {
            // call mom functionality
        }
    },
    catchAll: function() {
        // generic call functionality
    }
};

phoneCall.to('mom');
phoneCall.to('dad'); // invokes catchAll 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T13:35:48.747

你可以这样做：

```
q.toDad() || q.catchAll(); 
```

编辑：

用户 jmar77 关于此代码无效是正确的，因为它返回的是函数的结果而不是函数本身……我的错。这是更新的代码：

```
function phoneCall() {
   this.toMom = function() {
        console.log('Mom was called.');
    }
   this.catchAll = function() {
        console.log('Catch all was called');
    }
}

q = new phoneCall();
q.toMom();
q.toDad ? q.toDad() : q.catchAll();​ 
```

[http://jsfiddle.net/remibreton/yzDh7/](http://jsfiddle.net/remibreton/yzDh7/)

# jsf - 没有重定向到 web.xml 中指定的页面

> ID：10535059
> 
> 赞同：1
> 
> 时间：2012-05-10T13:29:32.463
> 
> 标签：jsf, jsf-2, exception-handling

在我的 JSF 应用程序中，每当发生异常时，它应该显示一个 JSF 页面，我设计该页面是为了向用户显示发生了错误，但没有发生这样的事情，这是个大问题。

我的 web.xml 的一部分

```
 <error-page>
        <exception-type>java.lang.Exception</exception-type>
        <location>/faces/error.jsf</location>
    </error-page>
    <error-page>
        <error-code>500</error-code>
        <location>/faces/error.jsf</location>
   </error-page> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:38:49.423

当异常发生在 ajax 请求期间，或者当响应已经提交时发生异常时，就会发生这种情况。

ajax 请求的异常需要由自定义处理[`ExceptionHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExceptionHandler.html)。[OmniFaces](http://omnifaces.org)就有这样一个，[`FullAjaxExceptionHandler`](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler)它利用标准的 Servlet API 错误页面机制。

无法处理响应提交时的异常，因为响应的一部分已经发送到客户端，这是一个不归路。只能通过以下上下文参数增加响应缓冲区大小来避免`web.xml`：

```
<context-param>
    <param-name>javax.faces.FACELETS_BUFFER_SIZE</param-name>
    <param-value>65535</param-value>    
</context-param> 
```

上面的示例将其设置为 64KB，它应该大约是您最大页面的大小。这样，直到大小达到 64KB 或完成时才会提交响应。这样容器将能够在发生异常时更改对错误页面的响应。

* * *

**与具体问题无关**，顺便说一下，您在错误页面配置中存在重叠。异常总是隐含状态 500 并且您指向相同的错误页面。所以第一页的错误`java.lang.Exception`是多余的。

# jquery - 不同选项卡上的箭头指示器 CSS

> ID：10535060
> 
> 赞同：2
> 
> 时间：2012-05-10T13:29:40.683
> 
> 标签：jquery, html, css, css-shapes

我注意到许多网站通过使用以下内容来指示您所在的页面或选项卡：

![在此处输入图像描述](../Images/9240a80afecd077988040644157b0e41.png)

如您所见，有一个小箭头表示页码。这如何使用纯 CSS 来完成，或者大多数网站是否使用 div 的背景图像，他们使用 background-position 属性设置位置？这似乎是一种相当普遍的技术，因此上述似乎不太可能。

[您可以在此处](http://dribbble.com/shots/553791-Web-App-UI?list=tags&tag=ui)和[此处](http://dribbble.com/shots/553466-Chat?list=tags&tag=ui)查看其他示例。如果解决方案可以水平和垂直旋转，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:53:16.383

您也可以使用 css 边框来完成此操作。如果你有以下结构

```
<div class="menu">home</div>
<div class="menu current">about</div>
<div class="menu">Contact</div> 
```

然后您可以使用以下 css 在活动菜单下绘制对话气泡或箭头

```
.current:after {
  content: '';
  position: absolute;

  width: 0;
  height: 0;

  border: 15px solid;
  border-top-color: #292929;

  top: 100%;
  left: 50%;
  margin-left: -15px; /* adjust for border width */
} 
```

这是一个很好的教程，解释了这项技术[http://net.tutsplus.com/tutorials/html-css-techniques/css-refreshers-borders/](http://net.tutsplus.com/tutorials/html-css-techniques/css-refreshers-borders/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T13:49:34.963

`:after`如果你想要一个纯 CSS 解决方案，你可以使用伪元素来做这样的事情。

```
span {
position: relative;
padding: 15px;
color: white;
background: black;
}

.current:after {
content: "";
position: absolute;
bottom: -10px;
left: 18px;
border-width: 15px 15px 0;
border-style: solid;
border-color: black transparent;
}
```

```
<span class="current">Home</span>
<span>Other</span>
<span>Etc</span>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T13:45:34.810

箭头几乎总是一个图像，但这通常是用 CSS 类完成的。

CSS 中的示例

```
.menu {
Font: whatever;
Background:url("image/parallel.PNG");
}
.current {
Background:URL("image/arrow.PNG");
} 
```

和 HTML

```
<div class="menu">home</div>
<div class="menu current">about</div> 
```

这将为两个菜单项提供字体，但只有一个获得箭头背景，您也可以将所有这些放在一个容器中并将样式应用于样式中的所有子元素，然后只需将 class="current" 添加到当前页面.

查看此页面的源代码 [http://dynamicinteractions.com/home](http://dynamicinteractions.com/home)

请原谅我的手机自动更正代码中的大写字母。

# java - 在我调整应用程序窗口大小之前，jPanel 不会刷新

> ID：10535061
> 
> 赞同：2
> 
> 时间：2012-05-10T13:29:43.787
> 
> 标签：java, image, swing, jpanel, paintcomponent

我的 jPanel 有一个问题。我有一个按钮，它来自字符串输入（数学公式）的 PNG 图像，然后它将在 jPanel 中重新绘制旧图像。问题就出现了。图像已更改，但在我手动调整应用程序窗口大小之前，jPanel 不会重新绘制。

看起来面板在调整大小之前不会重新绘制。但我不知道如何在那个按钮中做到这一点。

我试过[这个](https://stackoverflow.com/questions/6617077/jpanel-not-refreshing-upon-selection-with-jcombobox)和[这个](https://stackoverflow.com/questions/6912283/refreshing-picture-in-drawingpanel-extends-jpanel)但没有改变。

顺便提一句。我在 netbeans 中使用 GUI Builder。

我的代码...第一次尝试：

```
public class ImagePanel extends JPanel {

   private String path;
   Image img;
   public ImagePanel() {
        try {
            //save path
            path = "Example5.png";
            //load image
            img = ImageIO.read(new File(path));
        } catch (IOException ex) {
        }
    }
   @Override
   public void paint(Graphics g) {
      //draw the image
      if (show) {
        try {
            if (img != null) {
                img = ImageIO.read(new File(path));
                g.drawImage(img, 0, 0, this);
            }
        } catch (IOException ex) {
        }
     } else {
        show = true;
     }
   }
} 
```

并在 Window 类/按钮方法中：

```
 imagePanel = new ImagePanel();
   imagePanel.repaint();
   imagePanel.updateUI(); 
```

第二次尝试：

```
public class ImagePanel extends JPanel {

   private String path;
   Image img;
   ImagePanel(Image img) {
        this.img = img;
   }

   public void setImg(Image img) {
       this.img = img;
   }

   @Override
   public void paintComponent(Graphics g) {
       super.paintComponent(g);

       // Draw image centered in the middle of the panel
       g.drawImage(img, 0, 0, this);
   }

} 
```

和按钮：

```
imagePanel.setImg(new ImageIcon("2.png").getImage());
imagePanel.repaint(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T14:25:46.943

您正在覆盖您的`paint(...)`方法，这在任何方面都不是一个好的策略，因为在 Swing 中尽可能尝试覆盖您的`paintComponent(...)`方法。此外，我猜您可能错过了将代码放入[SwingUtilities.invokeLater(...)](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)方法中。尝试使用您的更新后的代码，将图像放在您的 .class 文件旁边（在图像文件夹内），因此结构会是，

```
PanelTest.class      ImagePanel.class        image(Folder)
                                             |     |     |
                                         image1 image2  image3(and so on) 
```

==================================================== =================================

```
import java.awt.*;
import java.awt.event.*;
import java.net.URL;
import javax.swing.*;

public class PanelTest
{
    private URL[] url = new URL[5]; 
    private int counter = 0;
    private ImageIcon image;
    private JButton updateButton;

    public PanelTest()
    {
        try
        {
            for (int i = 0; i < 5; i++)
            {
                url[i] = getClass().getResource("/image/geek" + i + ".gif");
            }
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("Panel Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        image = new ImageIcon(url[0]);
        final ImagePanel ip = new ImagePanel(image.getImage());
        updateButton = new JButton("UPDATE");
        updateButton.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent ae)
            {
                counter++;
                if (counter < 5)
                {
                    image = new ImageIcon(url[counter]);
                    ip.setImg(image.getImage());
                }
                else
                    counter = -1;
            }
        });

        frame.getContentPane().add(ip, BorderLayout.CENTER);
        frame.getContentPane().add(updateButton, BorderLayout.PAGE_END);

        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new PanelTest().createAndDisplayGUI();
            }
        });
    }
}
class ImagePanel extends JPanel {

   private String path;
   private Image img;
   ImagePanel(Image img) {
        this.img = img;
   }

   public void setImg(Image img) {
       this.img = img;
       // Added by me, so as to update the image
       // as a new Image is made available.
       repaint();
   }

   /*
    * Added by me, make this a customary
    * habbit to override this method too
    * as you override paintComponent(...)
    * method of the said JComponent.
    */
   @Override
   public Dimension getPreferredSize()
   {
       return (new Dimension(300, 300));    
   }

   @Override
   public void paintComponent(Graphics g) {
       super.paintComponent(g);

       // Clears the previously drawn image.     
       g.clearRect(0, 0, getWidth(), getHeight());  
       // Draw image centered in the middle of the panel
       g.drawImage(img, 0, 0, this);
   }

} 
```

如果你也想要图片，这里有

[极](http://gagandeepbali.uk.to/gaganisonline/images/swing/stackoverflow/geek0.gif) [客](http://gagandeepbali.uk.to/gaganisonline/images/swing/stackoverflow/geek1.gif) [0极客1极客2极客3极](http://gagandeepbali.uk.to/gaganisonline/images/swing/stackoverflow/geek2.gif) [客](http://gagandeepbali.uk.to/gaganisonline/images/swing/stackoverflow/geek3.gif) [4](http://gagandeepbali.uk.to/gaganisonline/images/swing/stackoverflow/geek4.gif)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T13:49:09.380

您可以使用背景重绘线程来解决此问题。您可以将它放在 JPanel 子类的构造函数中。

```
Thread repainter = new Thread(new Runnable() {
    @Override
    public void run() {
        while (true) { // I recommend setting a condition for your panel being open/visible
            repaint();
            try {
                Thread.sleep(30);
            } catch (InterruptedException ignored) {
            }
        }
    }
});
repainter.setName("Panel repaint");
repainter.setPriority(Thread.MIN_PRIORITY);
repainter.start(); 
```

# android - 启动加载对话框 Android WebView

> ID：10535063
> 
> 赞同：0
> 
> 时间：2012-05-10T13:29:57.860
> 
> 标签：android, webview, loading, startup

我有一个使用 WebView 的 Android 应用程序。在应用程序启动时，它会检查 WebView 是否可以连接到服务器。如果它可以连接没有问题，应用程序会立即加载并且 WebView 正在显示页面。但如果服务器不可用或连接不起作用，则需要几秒钟（5-10）才能显示错误消息。那是因为当您的连接速度较慢时，它不会连续显示错误消息。

因此，在没有连接的情况下，您会看到大约 5-10 秒的黑屏。我想要的只是应用程序启动时的一个简单的加载对话框。这样您就不会看到黑屏并且人们知道该应用程序正在执行某些操作。我怎样才能用最简单但有效的方法来归档这个？

谢谢！！

**编辑：**

好的，这就是我现在所拥有的，我认为它正在工作，但这是正确的方法吗？是否也可以在 shouldOverideUrlLoading 中使用此异步线程？我怎样才能做到这一点？

```
public class WebviewActivity extends MainActivity {

    private WebView myWebView;
    private ProgressDialog progressDialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);

        final ScrollView mainScrollView = (ScrollView)findViewById(R.id.ScrollView01);

        myWebView = (WebView)findViewById(R.id.webview);
        WebSettings webSettings = myWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);

        progressDialog = ProgressDialog.show(WebviewActivity.this, "", "Loading...", true);

        myWebView.setWebViewClient(new WebViewClient(){
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                progressDialog.show();

                if ( isOnline() == false || isOnlineHost() == false )
                    myWebView.loadUrl("file:///android_asset/errorpage.html");
                else
                    view.loadUrl(url);

                return true;                
            }
            @Override
            public void onPageFinished(WebView view, String url) {
                progressDialog.dismiss();
                mainScrollView.fullScroll(ScrollView.FOCUS_UP);
            }
        });

        myWebView.requestFocus(View.FOCUS_DOWN);
        myWebView.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                    case MotionEvent.ACTION_UP:
                        if (!v.hasFocus()) {
                            v.requestFocus();
                        }
                        break;
                }
                return false;
            }
        });
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig){        
        super.onConfigurationChanged(newConfig);
    }

    @Override
    public void onResume() {
        super.onResume();    
        new checkConnection().execute();
    }

    //DOING THE CONNECTION CHECK IN ANOTHER THREAD  
    public class checkConnection extends AsyncTask<String, Integer, String>{        

        private ProgressDialog progressDialog;              

        protected void onPreExecute(){
            progressDialog = ProgressDialog.show(WebviewActivity.this, "", "Loading...", true);
            progressDialog.show();
        }

        @Override
        protected String doInBackground(String... params) {
            if ( isOnline() == true && isOnlineHost() == true )
                myWebView.loadUrl(webLink);
            else
                myWebView.loadUrl("file:///android_asset/errorpage.html");

            progressDialog.dismiss();           
            return null;
        }       
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:00:34.803

确保你的类实现了`Runnable`. 然后使用类似的东西：

```
private WebView myWebView;
private ProgressDialog progressDialog; 
```

作为全局变量，

```
progressDialog = ProgressDialog.show(this, "Title", "Loading...", true, false);

Thread thread = new Thread(this);
thread.start(); 
```

要启动线程，

```
public void run() {
            // Time consuming task
    } 
```

作为线程中运行的内容，以及

```
private Handler handler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                    // What to do when thread is finished
                    progressDialog.dismiss();
            }
    }; 
```

处理线程的完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:42:01.630

在显示 时，使用`AsyncTask`来检查后台的连接性`ProgressDialog`。检查完成后关闭对话框。

# c# - 如何使用已部署的常规 html 站点部署 .aspx 网络表单页面？

> ID：10535066
> 
> 赞同：2
> 
> 时间：2012-05-10T13:30:08.640
> 
> 标签：c#, asp.net, iis, deployment

有一个我即将开始工作的网站基本上都是 HTML，并且其中不包含任何服务器端语言。拥有该站点的人希望我向该站点添加一个新表单，该表单肯定需要一些服务器端逻辑。因为我知道 C#，所以我想使用 VS 2010 使用 C# webforms 制作页面。不过，我很难掌握这个项目的整个部署方面。

我可能过度考虑了整个场景，但是为了确保这些新的 Web 表单与现有的网站一起部署，我需要做些什么不寻常的事情吗？我需要采取哪些步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:45:52.597

我只需创建一个新的 ASP.NET 网站项目或应用程序，然后将所有 HTML 文件和相关文件夹复制到项目中。如果有很多页面，这可能会很麻烦，但让它工作应该不会太困难。

部署应用程序时，您只需确保主机配置为运行 ASP.NET 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T13:44:19.150

只需将当前的 html 包含在您的 Web 应用程序项目中，您就可以将所有内容一起部署。GoDaddy 有在其网站上部署 asp.net Web 应用程序的说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T13:44:35.433

GoDaddy 的 Windows 服务器通过查看他们的站点来支持 ASP.NET 4.0。由于现有页面只是 HTML 页面，因此只能通过 GET、POST 或 cookie 将信息传递给 ASPX 页面，所以我不明白为什么不能直接将 ASPX 页面放入其中并让它们工作。当然，您还需要一个 web.config。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T13:54:11.097

为了运行 ASP.NET Web 窗体，您必须在 Web 服务器上设置一个 ASP.NET 应用程序。如果它是您自己的机器，您可以从 IIS 管理器中进行操作（在 Windows 7 中，它位于管理工具下）。

在许多客户共享的托管服务器上，托管公司有自己的方式将 IIS 细分给不同的客户。因此，您必须按照 Go Daddy 的说明进行操作。不要期望像在自己的机器上那样拥有完全的自由。

您可以在具有现有 Html 页面的现有 IIS 文件夹上配置 ASP.NET 应用程序。现有的 Html 页面仍然可以工作，但会令人困惑和混乱。为什么不直接创建一个子文件夹并将现有的 Html 页面移动到那里，或者在这个子文件夹中创建您的 ASP.NET 应用程序呢？

# c# - 插入到 Oracle 间歇性延迟 c#

> ID：10535069
> 
> 赞同：0
> 
> 时间：2012-05-10T13:30:21.993
> 
> 标签：c#, oracle

我有一个**C#**应用程序，它基本上为测试数据库生成大量数据。它使用的是**Oracle.DataAccess**版本**4.112.3.0**

出于某种奇怪的原因，每 30 次插入 OracleCommand.ExecuteNonQuery() 语句将持续**几**秒钟。在某些情况下，我们正在谈论***15 秒！***

通过 DSN 使用通用 ODBC 连接时，我没有遇到此问题。我无法返回使用 DSN，因为我希望此应用程序即使在没有安装 oracle 客户端的系统上也能正常工作。

**非常**感谢任何帮助

**我的连接类的代码，处理打开连接并执行插入 - 设置适用于 SQLServer 和 Oracle**

```
public Connection(string username,
            string password,
            string serverAddress,
            String servicename,
            string qual)
        {
            uid = username;
            pwd = password;
            server = serverAddress;
            oraServiceName = servicename;
            qualifier = qual;
            string oradb = "Data Source=(DESCRIPTION="
                             + "(ADDRESS=(PROTOCOL=TCP)(HOST=" + serverAddress + ")(PORT=1521))"
                             + "(CONNECT_DATA=(SERVICE_NAME="+servicename+")));"
                             + "User Id=" + username + ";Password=" + password + ";";
                oraConn = new OracleConnection(oradb);
                oraCom = new OracleCommand("",oraConn);
                oraCom.CommandType = System.Data.CommandType.Text;

        } 
public void doInsert(string s)
        {

            try
            {
                sqlCom.CommandText = s;
                sqlCom.Connection = sqlConn;
                sqlCom.ExecuteNonQuery();
            }
            catch (NullReferenceException e)
            {
                try
                {
                    oraCom.CommandText = s;
                   // oraCom.Connection = oraConn;

                    oraCom.ExecuteNonQuery();

                }
                catch (NullReferenceException e2)
                {
                    throw e2;
                }
            }

        } 
```

**实际插入的代码**

```
public void generateData()
    {
        try
        {
            indivID = GenerateId();
            conn.openConn();
            conn.doInsert(tData.insertIndividual());
            //number of calls
            for (long x = 0; x < numCalls; x++)
            {
                countCalls++;
                callidkey = GenerateId();

                //start segments
                for (long y = 0; y < numSegments; y++)
                {
                    if (countSegs != numSegments)
                    {
                        countSegs++;
                    }
                    else
                    {
                        countSegs = 0;
                    }
                    INTX_ID = GenerateId();
                    conn.doInsert(this.tData.insertINTXSEGMENT());
                    //start parts and recordings
                    for (long n = 0; n < numParts; n++)
                    {

                       // INTX_PART_ID = GenerateId();
                        conn.doInsert(tData.insertINTXPART());
                        if (countParts != numParts)
                        {
                            countParts++;
                        }
                        else
                        {
                            countParts = 0;
                        }
                        if (genRec)
                        {

                            recData.recordingid = GenerateId();
                            conn.doInsert(recData.insertRecData());
                            conn.doInsert(recData.insertRecPart());
                            if (countRecs != numParts)
                            {
                                countRecs++;
                            }
                            else
                            {
                                countRecs = 0;
                            }
                        }
                    }
                }
            }
        }
        catch (Exception)
        {}
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:02:41.013

我不是程序员，只是一个dba。有几件事要记住：

1.  尽可能重用打开的连接 - 连接管理需要很长时间。
2.  为您的插入使用绑定变量，最好使用批量收集。

如果你实现了这 2 个简单的规则，接下来要检查的是数据库在线重做日志文件的大小。默认为 512KB。如果它们已满，您的应用程序将冻结，直到下一个重做文件中有空间。重做以循环方式使用。如果数据库处于归档日志模式，则当它们被填满时，它们将被复制到归档中。这可能会导致在执行许多插入时速度变慢。

检查数据库的日志模式：

```
select log_mode from v$database; 
```

检查重做大小和组数：

```
select group#, bytes, first_time from v$log; 
```

重做应该在非常快的存储上。它只是在做顺序 io。如果重做与正常负载相比较小，则增加它们的大小。（通常我们的目标是每 15 分钟进行一次日志切换）如果您不断有更多，请增加大小。如果通常你在一小时内有大约 4 个开关，并且只有你的负载很快就会填满它们，那么添加日志组。

# php - 使用 php 处理 json 字符串中的特定元素

> ID：10535072
> 
> 赞同：3
> 
> 时间：2012-05-10T13:30:30.027
> 
> 标签：php, json

我有一个来自远程 url 的 json

```
[{"Name":"Abcd","Alias":["Bcde","Cdef","Fghi","Jklm","Load more"]}] 
```

当我尝试按如下方式打印元素别名时，我收到诸如“尝试获取非对象的属性...”之类的错误

```
<?php

$json='[{"Name":"Abcd","Alias":["Bcde","Cdef","Fghi","Jklm","Load More"]}]';
$obj=json_decode($json);
foreach($obj->Alias as $val) // Error: Trying to get property of non-object<br/>
echo $val.'<br/>';
?> 
```

解码后的json数组如下

```
Array
(
    [0] => stdClass Object
        (
            [Name] => Abcd
            [Alias] => Array
                (
                    [0] => Bcde
                    [1] => Cdef
                    [2] => Fghi
                    [3] => Jklm
                    [4] => Load More
                )

        )

) 
```

我还想从结果中排除最后一个“别名”元素（加载更多）

请...帮助提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T17:01:15.223

使用 array_pop 弹出最后一个元素。

```
<?php

$json='[{"Name":"Abcd","Alias":["Bcde","Cdef","Fghi","Jklm","Load More"]}]';
$obj=json_decode($json);
$aliases = $obj[0]->Alias;
array_pop($aliases);
foreach($aliases as $alias) print $alias;

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:39:37.473

```
$str = '[{"Name":"Abcd","Alias":["Bcde","Cdef","Fghi","Jklm","Load more"]}]';
print_r(json_decode($str, true)); 
```

[请参阅http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)上有关函数参数的文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T05:29:35.633

这是我的解决方案，它没有将对象转换为关联数组

```
 <?php

    $json='[{"Name":"Abcd","Alias":["Bcde","Cdef","Fghi","Jklm","Load More"]}]';
    $obj=json_decode($json);
    $obj = $obj[0];
    foreach($obj->Alias as $val)
    echo $val.'<br/>';

    ?> 
```

我只能在 6 小时后发布答案，因为我在这里很新:)

# c# - microsoftreportviewer 使用多个表

> ID：10535073
> 
> 赞同：0
> 
> 时间：2012-05-10T13:30:31.837
> 
> 标签：c#, windows, forms, reportviewer

我有一个正在使用 microsoftreportviewer 的 Windows 窗体，我可以使用一个数据集成功完成此操作。假设我有表 table1、table2 和 table3，如何在 ReportViewer_Load 上以编程方式将所有这些添加到 reportviewer？谢谢！

注意：所有这些表都有不同的列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:54:28.363

您想一次选择任何一个人的名字然后将其绑定到报告吗？如果这就是您要查找的内容，那么下面的代码可能会对您有所帮助：

```
private DataTable GetData(string tableName)
    {
        DataSet ds = new DataSet();
        string query = "Select * from something";
        OdbcDataAdapter da = new OdbcDataAdapter(query, conn);
        da.Fill(ds);
        DataTable dt = ds.Tables[tableName];
        return dt;
    }
//You can fill the dataset once and then just get the table by table name. No necessary that you have to fill the dataset every time to get tables 

    private void RunReportViewer()
    {
        this.ReportViewer1.Reset();
        this.ReportViewer1.LocalReport.ReportPath = Server.MapPath("Report.rdlc");
        ReportDataSource rds = new ReportDataSource("#_your_table_Name", GetData());
        this.ReportViewer1.LocalReport.DataSources.Clear();
        this.ReportViewer1.LocalReport.DataSources.Add(rds);
        this.ReportViewer1.DataBind();
        this.ReportViewer1.LocalReport.Refresh();
    } 
```

# raphael - 拉斐尔变换不起作用？

> ID：10535076
> 
> 赞同：0
> 
> 时间：2012-05-10T13:30:40.670
> 
> 标签：raphael, transform

我在 Raphael 中有这段代码：

```
var myrect = paper.rect(10,10, 25,25); 
```

出现矩形。

当我添加此代码时：

```
myrect.transform(T200,0); 
```

...什么都没发生。

请问有人知道我做错了什么吗？这些拉斐尔变换似乎对我不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:35:35.537

可能是 Element.transform 将字符串作为参数。

尝试：

```
myrect.transform("t200,0"); 
```

看看这是否有什么不同。

来源： [http ://raphaeljs.com/reference.html#Element.transform](http://raphaeljs.com/reference.html#Element.transform)

# delay - 混合时 sox 多个垫

> ID：10535079
> 
> 赞同：0
> 
> 时间：2012-05-10T13:30:59.077
> 
> 标签：delay, sox, mixing

这是在与另一条轨道混合时填充轨道的解决方案。

[Sox : 用 pad 合并两个音频文件](https://stackoverflow.com/questions/5587135/sox-merge-two-audio-files-with-a-pad)

```
$ sox short.ogg -p pad 6 0 | sox - -m long.ogg output.ogg 
```

如何使用此命令混合多个音轨？

例如

audio1.wav（无 pad） audio2.wav（2s pad） audio3.wav（2s pad） audio4.wav（3s pad）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:00:46.577

`pad 6 0`前置 6 并附加 0 秒的静音，所以我假设您只想添加静音。

您可以使用`while`循环执行此操作，例如`bash`：

```
cat <<EOF > infile
audio1.wav 0
audio2.wav 2
audio3.wav 2
audio4.wav 4
EOF

while read fname len; do
  sox $fname -p pad $len 0 | sox -m -p long.wav output.wav
done < infile 
```

我建议在您完成处理之前保持文件未压缩。

混合时要小心削波，避免削波的一种方法是`-6dB`对两个信号都应用增益并在之后进行归一化，例如：

```
 sox $fname -p pad $len 0 gain -6 | sox -m -p "| sox long.wav -p gain -6" output.wav gain -n 
```

# testing - 白盒测试和自动化测试之间的主要区别是什么？

> ID：10535081
> 
> 赞同：-1
> 
> 时间：2012-05-10T13:31:16.033
> 
> 标签：testing

从某些角度来看，两者都是相同的技术。但我对这两种技术都感到困惑，所以我想要具体的区别，这将有助于我理解这两种技术的含义......提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:39:01.187

白盒测试是一种测试软件的方法，其中人们着眼于系统的内部，而不仅仅是前端功能，例如运行单元测试。白盒测试可以是手动的或自动的。

自动化测试是使用自动运行测试或部分测试的工具进行测试（不受测试人员的干扰）。自动化测试可以是白盒或黑盒。

因此，据我所知，它们没有任何相似之处，它们当然不是同一种技术。有关更多详细信息，请参阅维基百科。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:35:23.973

白盒测试是一种测试软件的方法，它测试应用程序的内部结构或工作原理，而不是其功能（即黑盒测试）。在白盒测试中，系统的内部视角以及编程技能用于设计测试用例。

自动化测试只不过是借助一种工具来测试应用程序，该工具可以在最少或无需人工干预、验证和报告结果的情况下执行所有操作。

你可以用谷歌搜索这个。永远不要喜欢 SO 来问这样的问题。

# keytool - 输入不是 X.509 证书即使在转换为 DER 后也不起作用

> ID：10535082
> 
> 赞同：1
> 
> 时间：2012-05-10T13:31:17.943
> 
> 标签：keytool

首先，我已经看到 post [keytool error: java.lang.Exception: Input not an X.509 certificate](https://stackoverflow.com/questions/3449597/keytool-error-java-lang-exception-input-not-an-x-509-certificate)。我无法在我的情况下应用相同的解决方案，这就是我发布此线程的原因。当我尝试将我的 PEM 文件导入 keytoo 时，它说

keytool 错误：java.lang.Exception：输入不是 X.509 证书

当我尝试使用 openssl 连接到具有 -CAfile 选项作为此 PEM 文件的服务器时。它连接得很好。

我按照上面帖子中的建议将PEM文件转换为DER文件，使用，

```
openssl x509 -outform der -in foo.pem -out foo.der 
```

我将der文件成功导入keytool。但是，当我尝试连接到使用 openSSL 中的 PEM 文件可连接的服务器时，我无法连接。它在投掷

在

```
javax.net.ssl.DefaultSSLSocketFactory.createSocket(Unknown Source)
        at com.ibm.net.ssl.www.protocol.https.b.b(Unknown Source)
        at com.ibm.net.ssl.www.protocol.http.cb.a(Unknown Source)
        at com.ibm.net.ssl.www.protocol.http.cb.p(Unknown Source) 
```

我创建了一个新线程来立即引起你们的关注，因为它是如此紧急。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:34:05.380

keytool 仅支持单个证书 PEM 文件。它们不能包含`-----BEGIN CERTIFICATE-----`和`-----END CERTIFICATE-----`括号之外的任何内容。

使用多部分 PEM 文件（例如 ca-bundle.crt）时，您需要将每个证书提取到单独的文件中。在使用 keytool 导入之前无需将它们转换为 DER

您也可以使用我的工具[https://code.google.com/p/java-keyutil/](https://code.google.com/p/java-keyutil/)，它可以将多部分 PEM 文件直接导入 JKS 文件。

# macos - info.plist 的 LSEnvironment 部分不起作用。

> ID：10535085
> 
> 赞同：4
> 
> 时间：2012-05-10T13:31:21.353
> 
> 标签：macos, cocoa, code-injection, macos-carbon, dyld

我编写了一个动态库，通过设置名为 DYLD_INSERT_LIBRARIES 的环境变量加载到一些目标应用程序中，dylib 加载并在应用程序通过以下命令从终端执行时工作正常：

```
$ export DYLD_INSERT_LIBRARIES=/path/to/mylib.dylib
$ /path/to/application.app/Contents/MacOS/executable 
```

然后我通过编辑 info.plist 文件中的 LSEnvironment 部分来设置 DYLD_INSERT_LIBRARIES 的值。一些苹果标准应用程序，如 TextEdit 和 Calculator 成功加载了我的库，但此设置对 InDesign、Photoshop 等应用程序没有影响...

为什么没有为某些应用程序设置环境变量？有人对此有想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T20:28:25.190

正如您没有进一步说明的那样，我假设您也通过终端启动 Photoshop 等（？）这使得在 LSEnvironment 中设置的这些环境变量无效，因为这些仅由通过“启动服务”启动的进程使用......

如果您通过“启动服务”启动它，您是否检查过您的库不是简单地通过程序通过 dlclose() 卸载的？...

# python - 为 Python + 一组依赖项创建 Windows 安装程序

> ID：10535088
> 
> 赞同：15
> 
> 时间：2012-05-10T13:31:32.900
> 
> 标签：python, windows, installation, bundle, nsis

我需要为 Windows 创建一个安装程序，它应该能够安装特定版本的 Python 解释器（2.7）以及一组依赖项，例如 ipython、numpy、pandas 等。

基本上，这与 Active State 为他们的 Active Python 发行版所做的相同：一个包含解释器 + 依赖的包。

不是 Windows 用户我不知道从哪里开始，除了可能查看[NSIS](http://nsis.sourceforge.net/)（这有什么帮助吗？）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T15:54:19.507

我建议使用我也用来构建 Python 版本的打包工具，它位于[Tools/msi/msi.py](http://hg.python.org/cpython/file/2.7/Tools/msi/msi.py)中。在 Python 源代码（或安装）之上解压缩附加依赖项，然后调整 msi.py 以获取您要打包的所有附加文件。您应该调整显示字符串以表明这确实是一个单独的 Python 发行版。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-19T15:05:40.347

对于 Windows，有[pynsist](https://github.com/takluyver/pynsist)。它在内部使用 NSIS 并捆绑 Python，因此您不必这样做。它带有有用的[例子](https://github.com/takluyver/pynsist/tree/master/examples)。

免责声明：我还没有尝试过 pynsist，但很快就会尝试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T15:45:09.667

如果您想打包预定版本的 python 和一些依赖项，我建议使用 NSIS 和 AutoIt。

NSIS 可用于嵌入其他安装程序，但在 python 模块的特定情况下，它们的某些安装程序不能在无人值守模式下使用。为了绕过这个问题，AutoIt 可以用来模拟击键。

有关在 NSIS 中嵌入其他安装程序的更多信息：http: [//nsis.sourceforge.net/Embedding_other_installers](http://nsis.sourceforge.net/Embedding_other_installers)

AutoIT 网站：[http ://www.autoitscript.com/site/](http://www.autoitscript.com/site/)

# magento - 在前端和后端显示小部件

> ID：10535090
> 
> 赞同：0
> 
> 时间：2012-05-10T13:31:35.863
> 
> 标签：magento, widget, frontend, backend

我从magento开始，我正在创建一个使用小部件的新模块。我有两个关于在前端和后端显示小部件的问题。

例如在前端：

```
{{widget type="cms/widget_page_link" template="cms/widget/link/link_block.phtml" page_id="1"}} 
```

到一个`<a href=""><a>` 代码。

而在后端，就像在所见即所得模式下的“/cms_page/edit/”下，一个小图像允许通过双击它进行编辑。

我希望我已经很好地解释了这个问题。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:49:03.567

我找到了第一步的解决方案：

```
 <?php
$filter = new Mage_Widget_Model_Template_Filter();
$_widget = $filter->filter('{{widget type="catalog/product_widget_link" anchor_text="Nokia" template="catalog/product/widget/link/link_block.phtml" id_path="product/16"}}');
echo $_widget;
?> 
```

# android - 调用 onDestroy() 后活动对象会发生什么？

> ID：10535092
> 
> 赞同：3
> 
> 时间：2012-05-10T13:31:47.113
> 
> 标签：android, android-activity

假设我有一些形式的代码

```
handler.postDelayed(new Runnable()
{
    public void run()
    {
        myActivity.doStuff();
        myActivity.someField = blabla;
        //etc
    }
},10*1000); 
```

在这 10 秒内的某个时间，活动被关闭并销毁。那么 myActivity 对象会发生什么？引用是否仍然有效并且对象的字段和函数仍然可以访问？

更一般地说，活动在其生命周期中创建的对象会发生什么？它们是否会随着活动而消失，或者只要有实时引用，它们就会一直存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:33:44.660

它更有可能被 GC 或不被 GC（取决于可用内存）.. 它可能存在于堆中，但它从 Activity Stack 中删除......

# plugins - 已弃用的 PPAPI 脚本插件 chrome

> ID：10535093
> 
> 赞同：0
> 
> 时间：2012-05-10T13:31:49.030
> 
> 标签：plugins, scripting, deprecated, google-nativeclient, ppapi

我需要一个示例 NaCl 插件，它使用带有**已弃用**PPAPI 的脚本插件（请阅读下文）。

我必须使用来自 PPAPI 的旧的、已弃用的脚本插件开发一个插件（请参阅[http://code.google.com/p/ppapi/wiki/InterfacingWithJavaScript](http://code.google.com/p/ppapi/wiki/InterfacingWithJavaScript)）。我需要以 NPAPI/不推荐使用的 PPAPI 方式从 javascript 调用插件方法，如下所示：

```
plug = document.getElementByID("my_embedded_plugin");
result = plug.my_plugin_method(); 
```

从 javascript 调用插件方法的方式是**强制性**的，我不能为此任务使用 PostMessage - HandleMessage 方法。使用 PPAPI**也是****强制**。

因此，我恳请一些使用**已弃用的脚本插件的****示例 NaCl 插件**（C 和 C++ 源代码和 HTML 文件），我可以编译、测试和用作模型。即使我必须修改和重新编译铬，如果可以的话，请给我提供这样的例子。

 **最好的问候，马里奥 S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:04:10.123

这对于当前的 chrome 是不可能的。这种编写 PPAPI 插件的方式完全从 chrome 源代码中删除。支持的最新版本的 chrome 大约是 12。

在这里您可以找到一些使用此脚本接口的示例： [http ://code.google.com/p/nativeclient-sdk/source/browse/?r=600#svn%2Ftrunk%2Fsrc%2Fexamples](http://code.google.com/p/nativeclient-sdk/source/browse/?r=600#svn%2Ftrunk%2Fsrc%2Fexamples)**

# vim - 在 vim 中拆分和调整文件大小

> ID：10535094
> 
> 赞同：2
> 
> 时间：2012-05-10T13:31:50.403
> 
> 标签：vim, resize

我想做以下事情：

*   在 vim 中打开 9 个文件，（3 x 3 配置），示例文件 1,2,...9。每个文件应该占用相同的空间来显示
*   选择要查看的文件，示例文件 3
*   当我选择文件 3 时，我想调整大小，以便该文件占用几乎所有可用空间，以便我可以轻松阅读
*   同样，我输入一个命令，以便文件恢复到相同大小的视图
*   当我选择任何其他文件时，例如 6，那么该文件应该再次占用所有可用空间。

我要说的一点是我知道如何选择一个文件（键入`CTRL``w``w`以循环浏览文件），如果我输入一个调整大小命令、示例`:res +20`等，那么该文件会显示得更大，那么我应该`:res -20`回到相同的视图，然后 tab 到另一个文件并重复这两个命令等，但这看起来很笨拙，我将不得不尝试 res 参数中的数字。我猜有一种更方便的方法可以隐藏所有其他文件，将它们显示回来，标签到另一个文件，然后重复该过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:01:10.607

如果您总是希望打开 3x3 网格，您可以`:tabe %`在您想要最大化的窗口中打开，然后在完成后关闭该选项卡（通过键入：q）。这实际上是选项卡的主要用途，可以同时显示不同的窗口排列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T14:22:20.317

从基本到“我的文件夹中的另一个插件`.vim`”：

1.  `<C-w>_`垂直最大化当前窗口，`<C-w>|`水平执行相同操作，`<C-w>=`返回“均衡”布局。都在`:help windows`。

2.  `:set winheight=999`和`:set winwidth=999`。每次进入一个窗口时，它会自动水平和垂直最大化，将所有其他窗口最小化为 1 列或 1 行。

    我家有`set winheight=999`，`~/.vimrc`很干净。`:set winwidth=999`太可怕了。

3.  简单的“ [Vim-rolodex](http://vim.wikia.com/wiki/Window_zooming_convenience) ”脚本运行良好。请务必阅读条目的其余部分。

4.  [ZoomWin](http://www.vim.org/scripts/script.php?script_id=508)和[MultiWin](http://www.vim.org/scripts/script.php?script_id=1083)似乎有相同的目的，也许还有其他插件？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T13:51:48.240

看一下

```
:help bufdo    (this together with split should do what you ask about)
:help only 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T13:49:40.830

您可以通过键入以下内容将所有缓冲区平铺到窗口中：

`:bufdo split`

您可以最大化当前窗口，以便只有它可见：`Ctrl+w``o`

这是否回答你的问题？

# android - Android 不独立滚动的多个列表视图

> ID：10535097
> 
> 赞同：5
> 
> 时间：2012-05-10T13:32:02.057
> 
> 标签：android, listview, scroll

我想创建一个包含 3 个列表和 3 个标题的页面，但我不想单独滚动它们，我希望整个页面滚动。有谁知道我怎么能做到这一点？

基本上我希望它看起来像这样：

```
header
smlheader
list
smlheader
list
smlheader
list 
```

使用此代码，我尝试实现它，但效果并不好。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"

<TableLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white">

   <include layout="@layout/header" />
   <include layout="@layout/redcell" />

   <TableRow

       android:id="@+id/tableRow1"
       android:layout_width="wrap_content"
       android:layout_height="60dp" >

      <TextView

        android:id="@+id/fixtures_text"
        android:layout_width="match_parent"
        android:layout_height="60dp"

        android:gravity="center"
        android:text="@string/leagues"
        android:textColor="@color/white"
        android:textSize="25dp"
        android:textStyle="bold"/>

   </TableRow>

   <include layout="@layout/redcell" />

   <TableRow
       android:id="@+id/tableRow2"
       android:layout_width="wrap_content"
       android:layout_height="60dp" >

      <TextView

        android:id="@+id/results_text"
        android:layout_width="match_parent"
        android:layout_height="60dp"

        android:gravity="center"
        android:text="@string/leagues"
        android:textColor="@color/white"
        android:textSize="25dp"
        android:textStyle="bold"/>

   </TableRow>

    <include layout="@layout/redcell" />

    <ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
   />

</TableLayout>
<ScrollView/> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T14:18:27.960

我会尝试Rajesh 指出的CommonsWare [MergeAdapter 。](https://github.com/commonsguy/cwac-merge)这听起来正是您所需要的。

它将需要多个视图（包括列表视图）并将它们放在一起，然后将合并适配器设置为列表视图，然后，您可以将多个列表视图合二为一。

从文档中引用它：

MergeAdapter 接受适配器和视图的混合，并将它们作为一个连续的整体呈现给它注入的任何 ListView。这适用于您有多个数据源的情况，或者如果您有少量普通视图要与数据列表混合，等等。

只需创建一个 MergeAdapter 并调用 addAdapter()、addView() 或 addViews()（后者接受 List），然后将适配器附加到 ListView。

**编辑**

1) 从[这里](https://github.com/downloads/commonsguy/cwac-merge/CWAC-MergeAdapter.jar)
下载 .jar 2) 下载[CWAC SackOfViewsAdapter](https://github.com/commonsguy/cwac-merge/blob/master/libs/CWAC-SackOfViewsAdapter.jar)的 .jar，因为 MergeAdapter 需要它。
2）在您的项目中创建一个名为“libs”的目录（与 src 和 res 处于同一级别）
3）将两个 .jar 文件放在该文件夹中（Eclipse 应该自动从那里获取东西，只要将其设置为包含在构建中）
4）按照我原始响应中第一个链接的说明使用 MergeAdapter。

伪代码示例：

```
myMergeAdapter = new MergeAdapter();
myMergeAdapter.addView(HeaderView);
myMergeAdapter.addView(SmallHeaderView1);
myMergeAdapter.addAdapter(listAdapter1);
myMergeAdapter.addView(SmallHeaderView2);
myMergeAdapter.addAdapter(listAdapter2);
myMergeAdapter.addView(SmallHeaderView3);
myMergeAdapter.addAdapter(listAdapter3);

setListAdapter(myMergeAdapter); 
```

**编辑 2**

添加您的标题，这是一个完整的布局：

```
View Header = getLayoutInflater.inflate(R.layout.red_cell);
myMergeAdapter.addView(Header); 
```

# python - 使用 Mechanize 进行 ASPX 抓取：无法检索表单？

> ID：10535107
> 
> 赞同：1
> 
> 时间：2012-05-10T13:33:02.727
> 
> 标签：python, screen-scraping, web-scraping, mechanize

我正在尝试使用 Python Mechanize抓取[.aspx 网页。](http://corporate.marksandspencer.com/aboutus/where/international_stores)`ParseError: unexpected '[' char in declaration`但即使我手动删除了 DTD，我也不断收到一个有趣的错误。

这是我的完整代码：

```
url = 'http://corporate.marksandspencer.com/aboutus/where/international_stores'
browser = mechanize.Browser()
browser.open(url)
browser.select_form(nr=0) 
```

`ParseError: unexpected '[' char in declaration`它在最后一行失败。谁能建议可能出了什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T07:29:31.533

我也有类似的问题。我在开始时添加了以下行，它对我有用。

```
self.browser = mechanize.Browser(factory=mechanize.RobustFactory()) 
```

# c# - WPF Datagrid 绑定和列显示

> ID：10535110
> 
> 赞同：18
> 
> 时间：2012-05-10T13:33:21.417
> 
> 标签：c#, wpf

我有数据表作为 DataGrid 的项目源，这个数据表有很多列。是否可以在不创建新表的情况下显示几列而不是全部？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-10T13:37:48.793

是的。只需标记`AutoGenerateColumns=False`并手动定义您的列。[您可以使用普通的文本绑定列、复选框列、自定义 XAML 模板列等，如您在文档](https://docs.microsoft.com/en-us/dotnet/framework/wpf/controls/datagrid)中所见。

```
<DataGrid ItemsSource="{Binding DataSource}" AutoGenerateColumns="False" >
    <DataGrid.Columns>
    <DataGridTextColumn Header="Simple Value"
                      Binding="{Binding SimpleValue}" Width="*" />
     <DataGridTemplateColumn Width="*" Header="Complex Value">
        <DataGridTemplateColumn.CellTemplate>
          <DataTemplate>
            <StackPanel>
               <TextBox Text="{Binding ComplexValue}"/>
               <TextBox Text="{Binding ComplexValue2}"/>
            </StackPanel>
          </DataTemplate>
        </DataGridTemplateColumn.CellTemplate>
      </DataGridTemplateColumn>
    </DataGrid.Columns>
  </DataGrid> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T13:55:36.240

此外，您可以处理[DataGrid.AutoGeneratingColumn](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.autogeneratingcolumn.aspx)事件并为您不想显示的列设置[e.Cancel = true。](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridautogeneratingcolumneventargs.cancel.aspx)这样您就不必手动定义要显示的列。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-10T13:35:09.043

是的，非常是的。如果您的表结构和列名保持不变，则在 Datagrid XAML 中设置`AutoGenerateColums = False`并手动创建所有列。

```
<dg:DataGrid Name="mydg" ItemsSource="{Binding Data}" AutoGenerateColumns="False">
 <dg:DataGrid.Columns>
  <dg:DataGridTextColumn Header="Col 0" Binding="{Binding FirstColumnName}" />
  <dg:DataGridTextColumn Header="Col 1" Binding="{Binding SecondColumnName}" />
 </dg:DataGrid.Columns>
</dg:DataGrid> 
```

然后在代码隐藏中简单地提供 Source like

```
mydg.ItemSource = Data.DefaultView; 
```

现在，当您的 DataTable 包含列时`FirstColumnName`，`SecondColumnName`它们将被数据绑定到您的 Datagrid。

# spring-security - Spring Security - LDAP - BadCredentialsException：

> ID：10535113
> 
> 赞同：0
> 
> 时间：2012-05-10T13:33:41.133
> 
> 标签：spring-security, ldap

我无法使用 Spring Security 验证用户，我收到 BadCredentailException。我的弹簧安全配置是：

```
<bean id="contextSource"
      class="org.springframework.security.ldap.DefaultSpringSecurityContextSource">
    <constructor-arg value="ldaps://ldaps.prod.sam.com:636"/>
    <property name="userDn" value="CN=!testUser1,OU=Service Accounts,OU=User Accounts,DC=prod,DC=sam,DC=com"/>
    <property name="password" value="!!testPass1!!"/>
    <property name="referral" value="follow"/>
</bean>
<bean class="org.springframework.security.ldap.search.FilterBasedLdapUserSearch" id="ldapSearchBean">
    <constructor-arg value="OU=User Accounts,DC=prod,DC=sam,DC=com"/>
    <constructor-arg value="(sAMAccountName={0})"/>
    <constructor-arg ref="contextSource"/>
    <property name="searchSubtree" value="true"/>
</bean>
<bean class="org.springframework.security.ldap.authentication.BindAuthenticator" id="ldapBindAuthenticator">
    <constructor-arg ref="contextSource"/>
    <property name="userSearch" ref="ldapSearchBean"/>
</bean>
<bean class="org.springframework.security.ldap.userdetails.DefaultLdapAuthoritiesPopulator" id="ldapAuthoritiesPopulator">
    <constructor-arg value="ou=Groups"/>
    <constructor-arg ref="contextSource"/>
    <property name="groupRoleAttribute" value="memberOf"/>
</bean>
<bean class="org.springframework.security.ldap.userdetails.InetOrgPersonContextMapper" id="ldapUserDetailsContextMapper">
</bean>
<bean id="ldapAuthProvider"        class="org.springframework.security.ldap.authentication.LdapAuthenticationProvider">
    <constructor-arg ref="ldapBindAuthenticator"/>
    <constructor-arg ref="ldapAuthoritiesPopulator"/>
    <property name="useAuthenticationRequestCredentials" value="false"/>
    <property name="userDetailsContextMapper" ref="ldapUserDetailsContextMapper" />
</bean>
<security:authentication-manager alias="authenticationManager" >
    <security:authentication-provider ref="ldapAuthProvider"/>
</security:authentication-manager> 
```

例外是：

```
org.springframework.security.authentication.BadCredentialsException: Bad credentials
at org.springframework.security.ldap.authentication.BindAuthenticator.authenticate(BindAuthenticator.java:95)
at org.springframework.security.ldap.authentication.LdapAuthenticationProvider.doAuthentication(LdapAuthenticationProvider.java:178)
at org.springframework.security.ldap.authentication.AbstractLdapAuthenticationProvider.authenticate(AbstractLdapAuthenticationProvider.java:61)
at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:156) 
```

当我逐步验证 ldap 用户成功时，测试用户验证失败。我认为问题在于基本路径。谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:38:45.517

通过使用`ldapsearch`命令行实用程序尝试验证与目录服务器的连接来测试您的配置。

### 也可以看看

*   [LDAP：使用 ldapsearch](http://ff1959.wordpress.com/2011/07/27/mastering-ldapsearch/)

# iphone - 在 iOS 中保存加密密钥的安全方法

> ID：10535114
> 
> 赞同：6
> 
> 时间：2012-05-10T13:33:42.507
> 
> 标签：iphone, objective-c, ios, security, encryption

在我的 iOS4+ 应用程序中，我在多个地方使用 AES 加密，整个应用程序必须非常安全。为了做到这一点，我必须在这个应用程序中硬编码几个密钥，然后当我需要加密某些东西时随机选择这些密钥......

我的问题是如何存储这些私钥？使用 对它们进行硬编码是否安全`NSString`？或者

```
#define SecretKeyString @"febd9a24d8b65c1c787d50a4ed3619a9" 
```

如果用户在安装此应用程序的情况下越狱 iPhone，他不能得到那些硬编码的密钥吗？我怎样才能最有效地隐藏它们？

感谢您的任何建议...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T13:41:29.190

其他应用程序所做的是要求用户“登录”才能使用该应用程序。然后，您使用他们的用户 ID/密码作为密钥来加密密钥或使用安全的 Web 服务来获取该用户的密钥。

如果您使用`#define`NSString 甚至 NSString，则有多种方法可以猜测密钥。显然，您必须真正愿意花费大量时间在编译后的代码中找到这些密钥，但是根据您正在寻找的安全级别和您要防范的人，这可能是一个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T14:22:30.283

我建议通过混淆阅读一些关于安全性的文章，这本质上是你想要实现的（至少所有建议都是这么说的）并且最终是不安全的。

但是，iOS 的沙盒是您的第一个也是最有效的安全形式。

其次，输入验证将是您的应用程序需要的下一个最重要的安全功能。如果您不验证所有输入（从用户输入的信息到网络响应到通过方案启动的应用程序），那么全面加密就没有任何意义。

最后，在必要的情况下，安全加密只有在您不进行硬核（或混淆您的硬编码）时才是安全的。mprivat 是正确的，您需要使用用户生成的数据（登录）、公钥加密（因此只有未包含的私钥可以解密）或使用 SSL 进行传输的服务器端加密。

我还要说，如果您的安全数据仅在您使用钥匙串 API 的设备上维护，特别是确保您使用要求用户登录以进行项目检索的表单。

如果您在设备上加密的数据在设备和另一台设备（如服务器）上都被解密，那么您就有一个基本的架构缺陷。加密解密只能是客户端-客户端（也就是用户的设备）或客户端-服务器（可以是用户设备到服务器或服务器到用户设备），这一点非常重要。将两者混合会导致漏洞。我在这里特别指的是相同的加密机制，对客户端-客户端与客户端-服务器使用单独的加密很好（有时是必要的）。

对于那些需要编写安全代码的人来说，这是必读的：http: [//www.amazon.com/gp/aw/d/0735617228](https://rads.stackoverflow.com/amzn/click/com/0735617228)

# ajax - MVC 4.0 beta WebAPI、PUT 和 DELETE 在暂存服务器上抛出 401

> ID：10535117
> 
> 赞同：0
> 
> 时间：2012-05-10T13:33:47.940
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我正在开发一个应用程序，使用 AJAX + MVC 4 + WebAPI。

在 localhost (GET/POST/PUT/DELETE) 上一切正常，但是一旦在 UAT 上，PUT/DELTE 会抛出 401，但是 GET/POST 工作正常。

WebAPI 都是公开的，根本不是 [Authorise]。所有 ajax 调用都来自站点站点，因此与跨域问题无关。我不知道在哪里调查。它与那些服务器上的 IIS 设置/池有关吗？

在最坏的情况下，我将只使用 GET/POST！没什么大不了的！

但是，如果有人知道正确的解决方案/原因，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T04:08:56.833

问题解决了，只需从 IIS 7.5 中删除 WebDAV 角色！一切正常。

谢谢大家的回复！

# video - Directshow EVR慢速视频播放

> ID：10535118
> 
> 赞同：2
> 
> 时间：2012-05-10T13:33:48.390
> 
> 标签：video, directshow, video-processing, ms-media-foundation

我使用 directshow 和 EVR 过滤器编写了一个视频播放器。我在具有以下配置的机器上播放缓慢的问题：

处理器：AMD E-350 1.60 GHz 内存：2 GB

分辨率为 1440*1080 或 1920*1080 及以上的视频在 windows media player 和 Media player classic-HC 中播放良好，但不是我渲染它的方式。

播放在其他具有英特尔双核及以上处理器的机器上很流畅。

我只是将 evr 过滤器添加到我制作的视频图表中并播放它。有什么办法可以提高这台机器上视频的播放质量。任何帮助表示赞赏。

# scala - 并行化使用视图的 for (Scala)

> ID：10535119
> 
> 赞同：1
> 
> 时间：2012-05-10T13:33:50.043
> 
> 标签：scala

我对 Scala 很陌生！但是，我想使用以下针对欧拉问题 4 的工作解决方案，[只是](https://projecteuler.net/problem=4)`par`为了看看我是否可以做到：

```
import scala.math

object Problem4 {
    def isPalindrome(x: Int): Boolean = {
        val string = x.toString
        string.reverseIterator.sameElements(string.iterator)
    }

    def getPairs(minimum: Int, maximum: Int) = {
        for (i <- minimum to maximum view;
             j <- minimum to maximum view)
             yield (i, j)
    }

    def getAnswer(numberOfDigits: Int): Int = {
        val maximum = math.pow(10, numberOfDigits).toInt
        val minimum = math.pow(10, numberOfDigits - 1).toInt
        val products = for {
                           pair <- getPairs(minimum, maximum)
                           product = pair match { case (i, j) => i * j } 
                           if isPalindrome(product)
                       } yield product
        products.par.max
    }

    def main(args: Array[String]) {
        val answer = getAnswer(4)
        println("Problem 4 answer: %s".format(answer))
    }
} // object Problem4 
```

[Project Euler 4](https://projecteuler.net/problem=4)要求输入 3 位数字，我注意到在我的 PC 上找到 4 位数字的答案需要 63 秒，并且在我的双核系统上只使用一个处理器。尽管这适用`par`于`for`表达式的末尾。

我如何并行化这个使用`par`？理想情况下，我想找到 4 位数字的答案需要 30-40 秒。谢谢！

编辑：我很确定`getPairs`返回一个`View`：

```
 scala>     def getPairs(minimum: Int, maximum: Int) = {
         |         for (i <- minimum to maximum view;
         |              j <- minimum to maximum view)
         |              yield (i, j)
         |     }
    getPairs: (minimum: Int, maximum: Int)scala.collection.SeqView[(Int, Int),Seq[_]] 
```

此外，添加`par`到`getPairs`调用会返回一个警告，仍然只使用我的一个处理器，并导致`java.lang.OutOfMemoryError: Java heap space`异常：

```
[info] Loading project definition from M:\programming\testdriveneuler\src\problem4\project
[info] Set current project to euler (in build file:/M:/programming/testdriveneuler/src/problem4/)
[info] Compiling 1 Scala source to M:\programming\testdriveneuler\src\problem4\target\scala-2.9.2\classes...
[warn] M:\programming\testdriveneuler\src\problem4\src\main\scala\Problem4.scala:39: `withFilter' method does not yet exist on scala.collection.parallel.ParSeq[((Int, Int), Int)], using `filter' method instead
[warn]                            pair <- getPairs(minimum, maximum).par
[warn]                                 ^
[warn] one warning found 
```

编辑：我对计算 2 个 4 位数字乘积的欧拉问题 4 的答案非常感兴趣。供参考，答案是`99000099`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:17:12.313

如此复杂。它可以用2个功能来完成

```
def isPalindrome(x: Int) = x.toString sameElements x.toString.reverse

def products(min: Int, max: Int) = for { 
  x <- min to max par; 
  y <- min to max par; 
  if isPalindrome(x * y) 
} yield (x, y, x * y)

scala> products(100, 999).maxBy(_._3)
res0: (Int, Int, Int) = (913,993,906609) 
```

### 更新

`(min to max).view`Returns `SeqView`，它表示集合的惰性版本。`(min to max).view.par`返回`ParSeq`，并行收集。换句话说，调用`par`惰性序列将强制它进行评估。因此，在这种情况下，您应该在惰性和并行性之间进行选择。很难说当您从`SeqView`to移动时执行了哪些转换，`ParSeq`但这种不必要的复杂性正在导致`OutOfMemoryError`。

### 更新2

是的，`for`它只是集合上高阶操作的语法糖。循环的脱糖版本`for`将类似于：

```
(min to max par) flatMap { x =>
  (min to max par)
    .filter(y => isPalindrome(x * y))
    .map(y => x * y)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:57:55.193

在调用 getPairs 时添加 .par；

```
pair <- getPairs(min, max).par 
```

我怀疑（但不能在我的手机上确定）getPairs 方法没有返回视图；因此您的 for 循环执行您的计算。

验证这一点的一种简单方法是省略最后一行（即 products.par.max - for 循环的评估）并查看您的程序是否仍在执行计算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:31:05.163

你可以像这样并行化它：

```
 def isPalindrome (n: Int) = n.toString == n.toString.reverse
  val R = 100 until 1000
  val xs = for (i <- R; j <- R) yield i * j
  val pals = xs.par filter isPalindrome
  println (pals max) 
```

（省略`.par`非并行的）。但是我发现我的双核机器上的并行版本慢了 3-4 倍。有时并行化的开销是不值得的。

编辑：对于咯咯笑，这是一个使用 Akka 的版本（基于[Pi 计算教程](http://doc.akka.io/docs/akka/2.0/intro/getting-started-first-scala.html)）。**它的性能比使用 4e6 的答案（在我的机器8.0s** vs **9.1s**上）中使用并行集合稍快，尽管如果您删除`.par`第二个生成器上的解决方案，该解决方案的性能几乎相同。

```
import akka.actor._
import akka.routing.RoundRobinRouter

sealed trait Euler4Message
case object Calculate extends Euler4Message
case class Work(range1: Seq[Int], range2: Seq[Int]) extends Euler4Message
case class Result(value: Int) extends Euler4Message
case class FinalResult(value: Int, duration: Long)

class Worker extends Actor {

  def calculate(r1: Seq[Int], r2: Seq[Int]): Int = {
    def isPalindrome(x: Int) = {
      val s = x.toString
      s.reverseIterator.sameElements(s.iterator)
    }
    val pals = for (i <- r1; j <- r2; if isPalindrome(i * j)) yield i * j
    pals.max
  } 

  def receive = { case Work(r1, r2) => sender ! Result(calculate(r1, r2)) }   
}

class Master(nrOfDigits: Int, nrOfWorkers: Int, chunkSize: Int) extends Actor {

  var nrOfResults: Int = 0
  var maxResult = 0
  var sentAll = false
  var nrMessages = 0

  val start: Long = System.currentTimeMillis
  val min = math.pow(10, nrOfDigits - 1).toInt
  val max = math.pow(10, nrOfDigits).toInt 
  val range = min until max
  val workerRouter = 
    context.actorOf(Props[Worker].withRouter(RoundRobinRouter(nrOfWorkers)))

  def receive = {
    case Calculate =>
      for (i <- range.grouped(chunkSize)) { 
        // grouped produces an Iterator, so is 'lazy'
        workerRouter ! Work(i, range)
        nrMessages += 1
      }
      sentAll = true

    case Result(value) =>
      if (value > maxResult) maxResult = value
      nrOfResults += 1
      if (sentAll && nrOfResults == nrMessages) {
         println("Result = "+ maxResult 
                +"\nTime in ms: "+ (System.currentTimeMillis - start))
         context.system.shutdown()
      }
  }
}

object Euler4 extends App {
  val master =  ActorSystem().actorOf(Props(new Master(4, 4, 50)))
  master ! Calculate
} 
```

演员的好处是您可以**使用命令式代码并且仍然获得并行性**。因此，将上面 worker actor 中的方法换成`calculate`下面的方法，整个事情大约在**1.0 秒**内完成（提高了 8 倍）。

我发现它在更大的块大小（尝试 1000）时工作得最快，并确保您的工作人员至少与处理器一样多。

```
 def calculate(r1: Seq[Int], r2: Seq[Int]): Int = {
    def isPalindrome(x: Int) = {
      val s = x.toString
      s.reverseIterator.sameElements(s.iterator)
    }
    var max = 0
    // count down so that we don't have to check if palindrome so often
    var i = r1.last
    while (i >= r1.head) {
      // for some reason counting down here increases the run-time :/
      var j = r2.head
      while (j <= r2.last) {
        val r = i * j
        if (r > max && isPalindrome(r)) max = r
        j += 1
      }
      i -= 1
    }
    max
  } 
```

# android - 在 cocos2d-android 中恢复游戏状态

> ID：10535121
> 
> 赞同：4
> 
> 时间：2012-05-10T13:34:05.270
> 
> 标签：android, android-activity, cocos2d-android

我的游戏引擎使用`cocos2d-android`框架。

如果活动进入后台并恢复（`onStop`并且`onRestart`功能被覆盖），我如何将原始游戏状态加载到恢复状态`CCScene`（包括玩家位置、声音、颜色等......）

我尝试了标准方式 - 保存变量并加载`onRestart`.

我的游戏路线是：`welcomescreen - menu1layer - menu2layer - gamelayer CCScene`

有可能的？

例如，按下电源键后暂停和恢复游戏的最佳解决方案是什么？

# javascript - Javascript创建音频元素跨浏览器问题

> ID：10535124
> 
> 赞同：2
> 
> 时间：2012-05-10T13:34:12.960
> 
> 标签：javascript, audio, cross-browser

我正在创建在收到消息时触发的声音警报。它们在 Chrome 和 Firefox 中运行良好，但在 IE 9 和 Safari 中不起作用。这是一些代码：

```
var audioElement = document.createElement('audio');
audioElement.setAttribute('src', '/sounds/blip.wav');
audioElement.setAttribute('preload', 'auto');
audioElement.load()

    function bipTrades() {
  var tradeCheck = document.getElementById('tradeSound');
  if (tradeCheck.checked == true) {
        audioElement.play();
  }
  else {
    console.log("silent alert")
  }
}; 
```

所以当消息进来时，函数 bipTrades 被触发。

知道如何在 IE 和 Safari 中进行这项工作吗？

帮助将不胜感激。提前致谢！

**编辑** 好吧，我似乎找到了原因。这是一个文件格式问题。使用 mp3 它可以在 IE 中运行，但 safari 似乎根本不支持任何音频。我用这个脚本来检查：

```
<script type/javascript>
        function checkAudioCompat() {
            var myAudio = document.createElement('audio');

            if (myAudio.canPlayType) {
                // CanPlayType returns maybe, probably, or an empty string.

                if ( "" != myAudio.canPlayType('audio/mpeg')) {
                    alert("mp3 supported");
                }

                if ( "" != myAudio.canPlayType('audio/ogg; codecs="vorbis"')) {
                    alert("ogg supported");
                }

                if ( "" != myAudio.canPlayType('audio/mp4; codecs="mp4a.40.5"')) {
                    alert("aac supported");
                }
            }
            else {
                alert("no audio support");
            }
        }
    </script>

<button onclick="checkAudioCompat();">
    Test for audio format type
</button> 
```

# blackberry - 在自定义管理器中设置字段宽度

> ID：10535126
> 
> 赞同：0
> 
> 时间：2012-05-10T13:34:19.277
> 
> 标签：blackberry

我对黑莓非常陌生，并试图制作一个自定义管理器。所以我试图让布局变得非常简单，它将显示两个标签字段。（我可以很容易地通过将它们都放在 Horizo​​ntalFieldManager 中来获得这个，但我需要使用自定义管理器来做到这一点。）

输出应该是这样的： -`Hello(FirstField) User(SecondField)`

这是我班级中的子布局方法，它扩展到 Manager

```
public MyManager() {
    // construct a manager with vertical scrolling
    super(Manager.VERTICAL_SCROLL);
    }

protected void sublayout(int width, int height) {
        Field field;
        // get total number of fields within this manager
        int numberOfFields = getFieldCount();
        int x = 0;
        int y = 0;
        for (int i = 0; i < numberOfFields; i++) {
            field = getField(i); // get the field
            setPositionChild(field, x, y); // set the position for the field
            layoutChild(field, width, height); // lay out the field
            x = x + field.getHeight();
        }
        setExtent(width, height);
    } 
```

如果我删除此行`x = x+field.getWidth();`，那么两个文本（Hello User）将重叠（我认为这是因为 x，y = 0）现在我希望我`field.getWidth()`将返回字段一使用的宽度，而是给出我显示的宽度（这是我的想法）所以我只能在我的布局中看到 Hello。

对于垂直定位项目，它可以正常使用`y = y+field,getHeight();`但不知道为什么`getWidth`没有返回正确的宽度值，可能是我误导了某个地方来理解这个问题。

我需要重写`getPrefferedWidth()`方法吗？我也试过这个并保持这种方法不变，但它只在两个字段之间留下几个空格（2-3），其他文本重叠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:40:03.430

**更新：**我添加了一个完整的示例，该示例基于您的问题和我在更新之前的回答（我采用的`sublayout()`方法保持不变，除了`y`我添加的缺少的变量定义）。

当您覆盖子布局时，您应该首先布局您的字段，然后再定位它们。试试这个代码：

```
public final class HelloUserScreen extends MainScreen {
    public HelloUserScreen() {        
        Manager customManager = new Manager(0) {
            protected void sublayout(int width, int height) {
                Field field;
                int numberOfFields = getFieldCount();

                int widthUsed = 0;
                int maxHeight = 0;
                int y = 0;

                for (int i = 0; i < numberOfFields; i++) {
                    field = getField(i); // get the field

                    // first layout
                    layoutChild(field, width-widthUsed, height);

                    // then position
                    setPositionChild(field, widthUsed, y);

                    widthUsed += field.getWidth();
                    maxHeight = Math.max(maxHeight, field.getHeight());
                }

                setExtent(widthUsed, maxHeight);
            }
        };

        LabelField helloLabel = new LabelField("Hello ");
        helloLabel.setBackground(BackgroundFactory.createSolidBackground(Color.GREEN)); 
        customManager.add(helloLabel);

        LabelField userLabel = new LabelField("user");
        userLabel.setBackground(BackgroundFactory.createSolidBackground(Color.YELLOW)); 
        customManager.add(userLabel);

        add(customManager);
    }
} 
```

此代码产生以下屏幕

![在此处输入图像描述](../Images/971e3facbe2d7cc258310083de8ab9ee.png)

您应该考虑到在布局某些字段后，剩余用于布局的可用宽度和高度会变小（在您的情况下，因为您正在水平布局字段，*主要*是宽度问题）。

另一件事是，您希望`setExtent()`使用实际用于布局字段的宽度和高度而不是接收到的最大宽度和高度来调用该方法`sublayout()`（除非您是因为某些特定的 UI 布局逻辑而故意这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:58:42.513

您不需要此处的自定义字段。对and使用 just`HorizontalFieldManager`和 override 。`getPreferredWidth()``Field``return getScreen().getWidth() / 2`

# php - CodeIgniter 多应用程序布局需要 htacces

> ID：10535127
> 
> 赞同：0
> 
> 时间：2012-05-10T13:34:21.780
> 
> 标签：php, .htaccess, codeigniter

这一定是个老问题了。但是一直尝试通过堆栈溢出和 CI 论坛。无法找到解决方案。

我的 CI 布局是这样的。（在 localhost 中）

> -万维网
> 
> ```
>  - folder1
>       - folder2
>            - system (folder)
>            - frontend (has all the contents of application folder)
>                 - controllers
>                      - users (folder)
>                          - account.php
>                 - models
>                 - views
>                     - users (folder)
>                          - accountdata.php
>                 - ...
>                 - ...
>                 - ...
>            - backend (has all the contents of application folder)
>                 - controllers
>                      - users (folder)
>                          - account.php
>                 - models
>                 - views
>                     - users (folder)
>                          - allusersdata.php
>                 - ...
>                 - ...
>                 - ...
>            - frontend.php (same as index.php but changed $application_folder = 'frontend';)
>            - backend.php (same as index.php but changed $application_folder = 'backend';)
>            - .htaccess
>            - (index.php file removed) 
> ```

**目的**

```
I Can easily access the site : 
http://localhost/folder1/folder2/frontend.php/users/account
And access the admin panel like : 
http://localhost/folder1/folder2/backend.php/users/account

I just want to access the site like : 
http://localhost/folder1/folder2/users/account
And access the admin panel like : 
http://localhost/folder1/folder2/manage/users/account 
```

**所以问题是我的 .htacces 文件的内容是什么？**

我尝试了这个（以及更多的东西）但是通过这种方式前端工作但后端方式不工作：

```
<IfModule mod_rewrite.c> 
    RewriteEngine On
    RewriteBase /

    # Backend
    RewriteRule ^manage$ backend.php [L]
    RewriteRule ^manage/(.*)$ /folder1/folder2/backend.php/$1 [L]

    # Not a valid filename? Frontend
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ /folder1/folder2/frontend.php/$1 [L]
</IfModule> 
```

# java - Spring REST 控制器部分更新现有资源

> ID：10535129
> 
> 赞同：1
> 
> 时间：2012-05-10T13:34:28.200
> 
> 标签：java, spring, rest

我想对资源执行部分更新。我有一个想法，我可以结合@ModelAttribute（加载现有资源）和@RequestBody 来使用提供的字段填充它，然后运行@Valid。据我了解，@ModelAttribute 在其他任何事情之前都会被调用。

我的控制器调用 ModelAttribut 并使用我的 ContentPatternConverter 正确创建 ContentPattern 实体。虽然完成后我想用@RequestBody提供的字段填充“模式”，最后检查它是否有效。虽然我的 ContentPattern 在通过 ModelAttribute 创建后没有填充 RequestBody。

```
@RequestMapping(value = "/patterns/{id}", method = RequestMethod.PUT, produces = "application/json")
@ResponseBody
public ResponseEntity<ContentPattern> updateContentPattern(Principal principal, @ModelAttribute("id") @RequestBody ContentPattern pattern) { //implementation } 
```

任何想法如何使用我的方法解决这个问题，或者是否有另一个（更好的）解决方案？

**更新 1**

经过更多研究后，我想出了以下解决方案。

1.  创建了我自己的注释@RequestBodyPathVariable
2.  编写了实现 HandlerMethodArgumentResolver 的 RequestBodyPathVariableMethodArgumentResolver。它的作用是 1) 基于 URI 路径变量（例如 patterns/{id}）从自定义转换器获取现有资源。2) 从请求正文创建一个对象。3) 合并现有资源和提供的资源。4) 验证最终对象。5) 返回最终对象

源代码见要点：[https ://gist.github.com/2687913](https://gist.github.com/2687913)

（其他情况可能需要更好的/其他合并方法。）

有用的链接： [http](http://blog.42.nl/articles/leveraging-the-spring-mvc-3.1-handlermethodargumentresolver-interface) ://blog.42.nl/articles/leveraging-the-spring-mvc-3.1-handlermethodargumentresolver-interface http://stackoverflow.com/questions/6591665/merging-two-objects-in-java

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:00:40.070

我正在考虑这个问题，这就是我要做的（免责声明，我没有尝试过）：

首先，[@ModelAttribute](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/bind/annotation/ModelAttribute.html)仅在您想将该对象传递给视图时才起作用。

[@RequestBody](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/bind/annotation/RequestBody.html)允许 Spring 解析您的输入正文（假设它是 Json）并构建一个 ContentPattern 对象。但是您想从存储库中获取该对象，然后更新相关字段。

首先，我将创建[WebArgumentResolver](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/bind/support/WebArgumentResolver.html)的实现。使用[MethodParameter](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/core/MethodParameter.html)检查它是否来自类 ContentPattern。此实现将作为依赖注入接收用于创建 ContentPattern 对象的[HttpMessageConverter 。](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html)

然后从[NativeWebRequest](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/request/NativeWebRequest.html)创建一个[HttpInputMessage](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/http/HttpInputMessage.html)，如下所示：

```
return new ServletServerHttpRequest((HttpServletRequest)nativeWebRequest.getNativeRequest()); 
```

然后使用转换器创建 ContentPattern 对象。该对象将填充一些字段，您要更新的字段以及它的标识符。

使用标识符和您的存储库或[EntityManager](http://docs.oracle.com/javaee/6/api/)持久性上下文（均由 Spring 注入到类中），您可以从存储库中获取对象。

现在您有两个 ContentPattern 对象，一个从存储库中获取，一个从请求正文中创建。

使用对象的设置器，使用另一个对象的字段更新存储库中的对象，然后使用同样由 Spring 注入到此类的[Validator对其进行验证。](http://docs.oracle.com/javaee/6/api/)

如果一切正常，可选择将更新的对象保存到持久化中，并将其用作[resolverArgument](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/bind/support/WebArgumentResolver.html#resolveArgument%28org.springframework.core.MethodParameter,%20org.springframework.web.context.request.NativeWebRequest%29)方法的返回值。

我希望这足够清楚！

# php - 检索 PHP Cookie

> ID：10535131
> 
> 赞同：0
> 
> 时间：2012-05-10T13:34:33.603
> 
> 标签：php, html

我正在尝试使用使用 PHP 存储的 cookie 来确定用户是否已登录。

我正在使用以下内容设置 cookie：

```
else $keep_alive = time()+(86400 * 14);
setcookie("id",mysql_result($result, 0, "id"),$keep_alive, "/", "mydomain.com"); 
```

当我尝试获取 'id' 的值时，我可以使用以下方法检索它，只要我在发送标头之前这样做。

```
$id = $_COOKIE['id']; 
```

但是，如果页面标题已经发送，则不会检索“id”的值。发送标头后是否无法获取 cookie 的值，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:42:22.427

Cookie 由标头设置/发送。您不能两次发送标头，因此如果您已经发送了标头，则无法在此页面加载时设置 cookie。确保在发送 cookie 之前不打印任何内容，或将其缓冲（`ob_start`等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:43:06.480

您可以使用

[ob_start() 和 ob_end_flush()](http://php.net/manual/en/function.ob-start.php)

这种方式在调用结束函数之前不会发送标头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T20:14:48.110

原来问题是我试图在我的包含文件中获取 cookie 值，该文件仅适用于相对路径。因此，[http://www.example.com/directory/page.php](http://www.example.com/directory/page.php)必须在我的包含语句中引用为 ./directory/page.php 才能检索 cookie。我不确定这是否是 PHP 的错误，或者他们是否打算让它以这种方式工作，但现在一切都很好。

# php - PHP不会插入MySQL，没有错误

> ID：10535143
> 
> 赞同：0
> 
> 时间：2012-05-10T13:35:08.610
> 
> 标签：php, mysql

```
$sql = "INSERT INTO $table_name VALUES
('$_POST[firstname]', '$_POST[lastname]', '$_POST[username]', password('$_POST[password]'), 'Users', '', '', '$pchange', 
'$_POST[email]', '$default_url', '$verify', '', 0, '', 0)";

$result = @mysql_query($sql,$connection) or die(mysql_error()); 
```

$sql、$connection 和 $table_name 都是有效的，并且以前在脚本和数据库中使用过，这就是我的数据库的样子：

```
firstname   varchar(20) latin1_swedish_ci       Yes NULL          Change      Drop   More 
lastname    varchar(20) latin1_swedish_ci       Yes NULL          Change      Drop   More 
username    varchar(20) latin1_swedish_ci       Yes NULL          Change      Drop   More 
password    varchar(50) latin1_swedish_ci       Yes NULL          Change      Drop   More 
group1      varchar(20) latin1_swedish_ci       Yes NULL          Change      Drop   More 
group2      varchar(20) latin1_swedish_ci       Yes NULL          Change      Drop   More 
group3      varchar(20) latin1_swedish_ci       Yes NULL          Change      Drop   More 
pchange     varchar(1)  latin1_swedish_ci       Yes NULL          Change      Drop   More 
email       varchar(100)latin1_swedish_ci       Yes NULL          Change      Drop   More 
redirect    varchar(100)latin1_swedish_ci       Yes NULL          Change      Drop   More 
verified    varchar(1)  latin1_swedish_ci       Yes NULL          Change      Drop   More 
last_login  date                                Yes NULL          Change      Drop   More 
balance     double      UNSIGNED                Yes 0             Change      Drop   More 
address     varchar(60) latin1_swedish_ci       Yes NULL          Change      Drop   More 
lostbalance double                              Yes 0             Change      Drop   More 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:38:04.910

因为@没有错误：

```
@mysql_query($sql,$connection) or die(mysql_error()); 
```

@ 抑制来自 mysql_query() 函数的错误。

我在您的陈述中看到多个错误：

1.  `'$_POST[firstname]'`- 应该是`$_POST['firstname']`。将值存储在变量中或使用连接：`"'.$_POST['firstname'].'"`

2.  采用`mysql_query($sql) or die(mysql_error());`

3.  转义您存储在数据库中的所有数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:40:30.837

首先，不过滤任何用户输入不是好的安全做法，因为很快您将成为 SQL 注入和/或 XSS 攻击的受害者。您应该以这种方式过滤用户输入：

`$var = filter_var($_POST['var']), FILTER_SANITIZE_STRING);`

然后你应该`$var`在你的 SQL 查询中使用它，而不是直接使用`$_POST['var'].`ie：

```
$sql = "INSERT INTO $table_name VALUES
('$firstname', '$lastname', '$username', password('$password'), 'Users', '', '', '$pchange', 
'$email', '$default_url', '$verify', '', 0, '', 0)"; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-10T13:37:01.833

您必须在“VALUES”前面命名表列

```
INSERT INTO $table_name (field_1, field2, ...) VALUES ($_POST_1, ...) 
```

# php - 通过 wp_nav_menu_items 向 Wordpress 菜单添加类

> ID：10535148
> 
> 赞同：0
> 
> 时间：2012-05-10T13:35:15.830
> 
> 标签：php, css, wordpress, navigation

我希望在每个 ul 的最后 li 中添加一个类。例如，如果我有：

```
<ul>
   <li></li>
   <li>
      <ul>
         <li></li>
         <li></li>
      </ul>
   </li>
</ul> 
```

我想添加一个过滤器来做到这一点：

```
 <ul>
   <li></li>
   <li class="last">
      <ul>
         <li></li>
         <li class="last"></li>
      </ul>
   </li>
</ul> 
```

关于如何使用 php 函数实现这一点的任何想法？我已经看到成功针对第一个 ul li 的示例，但不要再深入了！

任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:30:00.267

Add the below code to your functions.php

```
function add_first_and_last($output) {
  $output = preg_replace('/class="menu-item/', 'class="first-menu-item menu-item', $output, 1);
  $output = substr_replace($output, 'class="last-menu-item menu-item', strripos($output, 'class="menu-item'), strlen('class="menu-item'));
  return $output;
}
add_filter('wp_nav_menu', 'add_first_and_last'); 
```

This forces the extra markup to be added to the class list for the respective elements, rather than having more than one ID for a tag.

I think there should be a more elegant solution though.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T22:29:59.453

自从这个问题发布以来已经有一段时间了，但我一直在寻找嵌套列表项问题的答案，但在任何地方都找不到它（只是一级列表的解决方案）。所以我想出了这个，这似乎有效，但感觉有点笨拙。但无论如何，将其添加到您的 functions.php 中：

```
function add_last_item_class( $items ) {
  $ar_index = array();
  // loop through all the items and save the index of the last item belonging to a specific parent
  for ( $i = 1; $i <= count( $items ); $i++ ):
    $ar_index[$items[$i]->menu_item_parent] = $i;
  endfor;
  // loop through the saved indexes and add the class 'last' to each of them
  foreach( $ar_index as $last_index ):
    $items[$last_index]->classes[] = 'last';
  endforeach;
  return( $items );
}
add_filter( 'wp_nav_menu_objects', 'add_last_item_class' ); 
```

# maven - Maven多项目子不能有相同的版本

> ID：10535157
> 
> 赞同：2
> 
> 时间：2012-05-10T13:35:44.253
> 
> 标签：maven

我有这个带有父项目和三个子项目的 Maven 多项目配置：

父 POM：

```
<...>
<groupId>my.proj</groupId>
<artifactId>parent</artifactId>
<packaging>pom</packaging>
<version>1.0</version> 
```

儿童POM：

```
<parent>
 <groupId>my.proj</groupId>
 <artifactId>parent</artifactId>
 <version>1.0</version>
</parent>
<groupId>my.proj.web</groupId>
<artifactId>web</artifactId>
<version>1.0</version> 
```

如果我将子版本设置为 1.0，我会收到警告：

```
version is duplicate of parent version 
```

但这就是我想要的，因为我的整个项目都是 1.0 版本，对我来说看起来很自然。为什么不允许（或不鼓励）这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:43:30.943

如果不指定版本，maven 3 会自动使用与父项目相同的版本，您只需在父项目中指定版本即可。所以警告建议删除这种冗余。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:49:02.937

Maven 的 POM 从其父级继承了一些东西，包括`vesion`但也包括`groupId`例如。因此，在您的情况下，只需设置`artifactId`. 您看到的是警告您复制了其中一些继承的声明。

# php - 如何将应用程序用户名放在图片上作为结果张贴在墙上？

> ID：10535160
> 
> 赞同：0
> 
> 时间：2012-05-10T13:36:04.163
> 
> 标签：php, facebook-php-sdk

我想做的是分享一张照片。但是，我希望将 facebook 用户名放在我的图片上以分享到墙上。我怎样才能获取用户名并将其放在图片中？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:42:33.237

看看这篇很棒的文章 - [http://blog.doh.ms/2008/02/12/adding-text-to-images-in-real-time-with-php/](http://blog.doh.ms/2008/02/12/adding-text-to-images-in-real-time-with-php/)

或谷歌搜索`PHP GD`或`PHP ImageMagick`

# slickgrid - SlickGrid 的行高可以动态改变吗？

> ID：10535164
> 
> 赞同：10
> 
> 时间：2012-05-10T13:36:13.743
> 
> 标签：slickgrid

我们正在实现用户偏好以（立即）在网格上显示“更多”或“更少”数据。“更多”应该增加行高（每行都具有相同的增加高度）。

当用户切换时，我们更新我们的 DataView，并使用更新的 rowHeight 值调用网格上的 setOptions。然后我们调用 invalidate() 和 render()。

但是行高没有被更新。:(

有人可以提出解决方案吗？我们应该直接通过 CSS 改变高度吗？如果是这样，有什么建议吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-04-01T20:15:10.073

事实上，*可以*根据用户交互动态更新行高。`Slickgrid API`提供了我们所需要的一切。

因为：

1.  我们可以动态添加/删除行；
2.  我们可以`css`在行和单元格级别动态应用自定义。

这是一个开始的简单演示：

```
////////////////////////////////////////////////////////////////////////////////
//example codez re trying to create a grid with rows of dynamic height to
//cater for folks that wanna bung loads of stuff in a field & see it all...
//by violet313@gmail.com ~ visit: www.violet313.org/slickgrids
//have all the fun with it  ;) vxx.
////////////////////////////////////////////////////////////////////////////////
modSlickgridSimple=(
function()
{
    var _dataView=null;
    var _grid=null;
    var _data=[];

    //////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////
    var getPaddingItem=function(parent , offset)
    {
        var item={};

        for (var prop in _data[0]) item[prop]=null;
        item.id=parent.id+"."+offset;

        //additional hidden padding metadata fields
        item._collapsed=     true;
        item._isPadding=     true;

        return item;
    }

    //////////////////////////////////////////////////////////////
    //this just builds our expand collapse button
    //////////////////////////////////////////////////////////////
    var onRenderIDCell=function(row, cell, value, columnDef, item)
    {
        if (item._isPadding==true); //render nothing
        else if (item._collapsed) return "<div class='toggle expand'></div>";
        else
        {
            var html=[];
            var rowHeight=_grid.getOptions().rowHeight;

            //V313HAX:
            //putting in an extra closing div after the closing toggle div and ommiting a
            //final closing div for the detail ctr div causes the slickgrid renderer to
            //insert our detail div as a new column ;) ~since it wraps whatever we provide
            //in a generic div column container. so our detail becomes a child directly of
            //the row not the cell. nice =)  ~no need to apply a css change to the parent
            //slick-cell to escape the cell overflow clipping.

            //sneaky extra </div> inserted here-----------------v
            html.push("<div class='toggle collapse'></div></div>");

            html.push("<div class='dynamic-cell-detail' ");   //apply custom css to detail
            html.push("style='height:", item._height, "px;"); //set total height of padding
            html.push("top:", rowHeight, "px'>");             //shift detail below 1st row
            html.push("<div>",item._detailContent,"</div>");  //sub ctr for custom styling
            //&omit a final closing detail container </div> that would come next

            return html.join("");
        }
    }

    //////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////
    var onRowClick=function(e, args)
    {
        _dataView.beginUpdate();

        if ($(e.target).hasClass("toggle"))
        {
            var item=_dataView.getItem(args.row);

            if (item)
            {
                if (!item._collapsed)
                {
                    item._collapsed=true;
                    for (var idx=1; idx<=item._sizePadding; idx++)
                        _dataView.deleteItem(item.id+"."+idx);
                    item._sizePadding=0;
                }
                else
                {
                    item._collapsed=false;
                    kookupDynamicContent(item);
                    var idxParent=_dataView.getIdxById(item.id);
                    for (var idx=1; idx<=item._sizePadding; idx++)
                        _dataView.insertItem(idxParent+idx, getPaddingItem(item,idx));
                }
                _dataView.updateItem(item.id, item);
            }
            e.stopImmediatePropagation();
        }

        _dataView.endUpdate();
    }

    //////////////////////////////////////////////////////////////
    var gridOptions={ enableColumnReorder:  true };

    //////////////////////////////////////////////////////////////
    var _gridColumns=
    [
        {
            id:         "id",
            name:       "",
            field:      "id",
            resizable:  false,
            width:      20,
            formatter:  onRenderIDCell,
        },
        {id: "title",        name: "Title",         field: "title",        resizable: true},
        {id: "duration",     name: "Duration",      field: "duration",     resizable: true},
        {id: "pcComplete",   name: "% Complete",    field: "pcComplete",   resizable: true},
        {id: "start",        name: "Start",         field: "start",        resizable: true},
        {id: "finish",       name: "Finish",        field: "finish",       resizable: true},
        {id: "effortDriven", name: "Effort Driven", field: "effortDriven", resizable: true},
    ];

    //////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////
    var kookupTestData=(function()
    {
        for (var i = 0; i < 100; i++)
            _data[i] =
            {
                id:               i,
                title:            "Task " + i,
                duration:         "5 days",
                pcComplete:       Math.round(Math.random() * 100),
                start:            "01/01/2009",
                finish:           "01/05/2009",
                effortDriven:     (i % 5 == 0),

                //additional hidden metadata fields
                _collapsed:       true,
                _sizePadding:     0,     //the required number of pading rows
                _height:          0,     //the actual height in pixels of the detail field
                _isPadding:       false,
            };
    })();

    //////////////////////////////////////////////////////////////
    //create the detail ctr node. this belongs to the dev & can be custom-styled as per
    //////////////////////////////////////////////////////////////
    var kookupDynamicContent=function(item)
    {
        //add some random oooks as fake detail content
        var oookContent=[];
        var oookCount=Math.round(Math.random() * 12)+1;
        for (var next=0; next<oookCount; next++)
            oookContent.push("<div><span>oook</span></div>");
        item._detailContent=oookContent.join("");

        //calculate padding requirements based on detail-content..
        //ie. worst-case: create an invisible dom node now &find it's height.
        var lineHeight=13; //we know cuz we wrote the custom css innit ;)
        item._sizePadding=Math.ceil((oookCount*lineHeight) / _grid.getOptions().rowHeight);
        item._height=(item._sizePadding * _grid.getOptions().rowHeight);
    }

    //////////////////////////////////////////////////////////////
    //jquery onDocumentLoad
    //////////////////////////////////////////////////////////////
    $(function()
    {
        //initialise the data-model
        _dataView=new Slick.Data.DataView();
        _dataView.beginUpdate();
        _dataView.setItems(_data);
        _dataView.endUpdate();

        //initialise the grid
        _grid=new Slick.Grid("#grid-simple", _dataView, _gridColumns);
        _grid.onClick.subscribe(onRowClick);

        //wire up model events to drive the grid per DataView requirements
        _dataView.onRowCountChanged.subscribe
            (function(){ _grid.updateRowCount();_grid.render(); });

        _dataView.onRowsChanged.subscribe
            (function(e, a){ _grid.invalidateRows(a.rows);_grid.render(); });

        $(window).resize(function() {_grid.resizeCanvas()});
    });
}
)();
//////////////////////////////////////////////////////////////
//done ;)
```

```
::-webkit-scrollbar       
{ 
    width:              12px; 
    background-color:   #B9BACC; 
}
::-webkit-scrollbar-track 
{ 
    color:              #fff; 
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
    border-radius:      10px;  
}
::-webkit-scrollbar-thumb 
{ 
    color:              #96A9BB; 
    border-radius:      10px;  
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
}

body
{
    font-family:        Arial, Helvetica, sans-serif;
    background-color:   #131313;
    position:           absolute;
    top:                5px;
    bottom:             5px;
    left:               5px;
    right:              5px;
}

#grid-simple
{
    position:         absolute;
    top:              0px;
    left:             0px;
    right:            0px;    
    bottom:           0px;
    margin:           auto;
    font-size:        12px;
    background-color: #ECEEE9;
}

.toggle
{
    height:           16px;
    width:            16px;
    display:          inline-block;
}
.toggle.expand
{
    background: url(https://violet313.github.io/assets/expand.gif) no-repeat center center;
}

.toggle.collapse
{
    background: url(https://violet313.github.io/assets/collapse.gif) no-repeat center center;
}

/*--- generic slickgrid padding pollyfill  ----------------------*/

.dynamic-cell-detail
{
    z-index:            10000;
    position:           absolute;
    background-color:   #F4DFFA;
    margin:             0;
    padding:            0;
    width:              100%;
    display:            table;
}

.dynamic-cell-detail > :first-child
{
    display:            table-cell;
    vertical-align:     middle;
    text-align:         center;
    font-size:          12px;
    line-height:        13px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script type="text/javascript" src="https://cdn.rawgit.com/Celebio/SlickGrid/master/lib/jquery.event.drag-2.2.js"></script>
<script type="text/javascript" src="https://cdn.rawgit.com/Celebio/SlickGrid/master/slick.core.js"></script>
<script type="text/javascript" src="https://cdn.rawgit.com/Celebio/SlickGrid/master/slick.grid.js"></script>
<script type="text/javascript" src="https://cdn.rawgit.com/Celebio/SlickGrid/master/slick.dataview.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/Celebio/SlickGrid/master/slick.grid.css">
<link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/Celebio/SlickGrid/master/slick-default-theme.css">
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/base/jquery-ui.css">

<div id="grid-simple"></div>
```

不到 200 行代码。
[摆弄它！](http://jsfiddle.net/violet313/98wx61uz/)

顺便说一句，这也是优秀的[Datatables](https://www.datatables.net/examples/api/row_details.html)通过它的 API *（几乎）*本机提供的一种方法。&imo 这是正确的模式；以及我如何选择使用`Slickgrid`. 但这涉及到*轻微*的修改，并且在任何情况下都 * 不完全符合 OP 要求；我声称这是可能的。

* * *

*要对每个单元格*进行动态行高，我们采用了类似的技巧，但我们还必须处理一些副作用：~

## 样式化掉行分隔

我们必须：

1.  逃脱*每个单元格*溢出剪辑
2.  删除不需要的行stipeyness
3.  删除行边框

通过[Grid.getItemMetadata](https://github.com/mleibman/SlickGrid/wiki/Providing-data-to-the-grid#item-metadata)回调接口`Slickgrid API`提供基于行的样式。在下一个 fiddle 中，在*第 107 行*，查看这个接口的实现： [fiddle with it！](http://jsfiddle.net/violet313/saggve98/)*`onRenderRow`* 

 *另请注意，在*第 148-150 行*，我调用`Slickgrid` [Grid.setCellCssStyles](https://github.com/mleibman/SlickGrid/wiki/Slick.Grid#wiki-setCellCssStyles) API 来添加一个自定义`dynamic-cell` `css`类，该类将 设置为`overflow`以`visible`消除*每个单元格*溢出剪辑的样式。

## 列调整大小

如果详细内容是静态的，则调整列大小是一个问题。 *响应*列宽变化的

详细内容（流动文本或 wotnot）需要一些工作。填充行需要相应地动态添加和删除。请参阅*（从第 66 行开始）*下一个小提琴中的and函数： [摆弄它！](http://jsfiddle.net/violet313/28sqpa3h/)**`addPadding``trimPadding`** 

 **## 排序

这里也有一些工作要做。我们需要确保无论我们是向上还是向下排序，填充保持在父级下方。请参阅下一个小提琴中的`comparer`第*136 行*：
[摆弄它！](http://jsfiddle.net/violet313/gwnzfLyr/)

## 过滤

几乎是一条线：如果它是填充，则将比较委托给父级。任务完成。请参阅下一个小提琴中的`pcFilter`第*192 行*：
[摆弄它！](http://jsfiddle.net/violet313/y16z42dp/)

耶！那是在 500 行以下的相当清晰、注释丰富的自定义 javascript 中调整大小、排序和过滤。事实上，我已经看到了某些`input-range-slider`带有更多代码行的花哨的 pollyfills ;)
acu

* * *

## 注意事项

我只介绍了基础知识。，，〜有整个*可选择/可编辑*的方面`Slickgrid`，这超出了我目前的要求（sry）。
还：

*   仅示例代码；未准备好生产。**你已经被警告**等等等等 =)
*   示例似乎适用于大多数现代浏览器；我/未/尝试过使用 iE；版本 >= 11 可能没问题..

* * *

## 更多信息

关于这一点还有很多要说的，而不是可以合理地挤进`SO`答案——尽管有无参考~~政策~~指南。任何有兴趣了解所有这些东西的人都可以去[这里我会更详细地介绍](https://violet313.github.io/)。

## 最后一个例子

这是最后一个有趣的例子。它采用了上述所有功能，但可以看出，我已经放弃了*expando-rows*并且有*两个*动态内容字段。另外，仅供参考，此示例使用[MutationObservers](https://developer.mozilla.org/en/docs/Web/API/MutationObserver)来生成`onPostRender`事件，以*替代*本`Slickgrid`机 `asyncPostRender` [列选项](https://github.com/mleibman/SlickGrid/wiki/Column-Options)回调：
[摆弄它！](https://jsfiddle.net/violet313/f573oh4m/)

我们终于得到它了。- 一些通往 a 的道路`DataView-like Slickgrid extension-mod`；并且无需对可爱的 Slickgrid 代码诉诸可怕的恶作剧。伊皮；）

*喔喔！这篇文章已有几年历史了；我现在看到当前未维护的原始项目有几个分支。即： [https ://github.com/6pac/SlickGrid](https://github.com/6pac/SlickGrid)*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T14:43:22.990

您可以通过 css 执行此操作。查看该`slick.grid.css`文件，并在那里进行所需的更改。

看看

`.slick-row.ui-widget-content`,`.slick-row.ui-state-active`类

或者

您可以使用`rowHeight`SlickGrid 的属性

看看网格选项

[https://github.com/mleibman/SlickGrid/wiki/Grid-Options](https://github.com/mleibman/SlickGrid/wiki/Grid-Options)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-18T16:42:44.513

我在网格上附加了一个函数，使我能够扩展行高：

```
var normalHeight = 25;
var expandedHeight = 100;
var columns = [
    {id: "col1", name: "Column 1", field: "col1", expanded: false},
    {id: "col2", name: "Column 2", field: "col2"}
];
var options = {
    rowHeight: normalHeight
};
var dataView = new Slick.Data.DataView();
var grid = new Slick.Grid(element, dataView, columns, options);
grid.updateOptions = function(expanded){
    var columns = grid.getColumns();
    if(!expanded){
        options['rowHeight'] = normalHeight;
        columns[0]['expanded'] = false;
    }else{
        options['rowHeight'] = expandedHeight;
        columns[0]['expanded'] = true;
    }
    grid.setOptions(options);
    grid.setColumns(columns);
    grid.invalidate();
    grid.render();
} 
```

它似乎工作得很好，希望这对某人有帮助。***

# variables - Powershell - 从变量中使用 Get-StorageGroupCopyStatus

> ID：10535168
> 
> 赞同：0
> 
> 时间：2012-05-10T13:36:26.810
> 
> 标签：variables, powershell

我需要你的帮助来处理 Powershell 中的变量。

我想将 Get-StorageGroupCopyStatus 的结果放在一个变量中，然后能够使用结果中的参数。

当我执行

```
Get-StorageGroupCopyStatus -Server server -StandbyMachine standbyserver 
```

它返回几个属性，如“Name”、“SummaryCopyStatus”、“CopyQueueLength”等。问题是我希望能够通过变量操作这些属性，以便能够在 IF 语句中使用它，比如这：

```
$st = Get-StorageGroupCopyStatus -Server server -StandbyMachine standbyserver

if ($st.SummaryCopyStatus -NotMatch "Healthy") 
```

发生的情况是无法通过变量“$st”获取参数“.SummaryCopyStatus”。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:15:02.237

试试这个，但我无法测试它：

```
$Serv = Get-StorageGroupCopyStatus -Server server -StandbyMachine standbyserver

$data = @()

foreach ($item in $serv)
{
$obj = new-object psObject
$obj | Add-Member -membertype noteproperty -name "Name" -Value $item.StorageGroupName
$obj | Add-Member -membertype noteproperty -name "CopyStatus -Value $item.SummaryCopyStatus
$obj | Add-Member -membertype noteproperty -name "CopyQueueLength" -Value $item.CopyQueueLength
$data += $obj
}

$data # contains the properties you added before. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:02:22.957

您可能会取回一组对象，并且需要一次处理一个对象。获取存储组对象，过滤掉与您的 qriteria 不匹配的对象，然后对通过过滤的对象执行某些操作。

```
Get-StorageGroupCopyStatus -Server server -StandbyMachine standbyserver | 
Where-Object { $_.SummaryCopyStatus -NotMatch "Healthy" } |
Foreach-Object { "do you stuff here" } 
```

# python - wxPython StyledTextCtrl 设置（部分）文本颜色

> ID：10535170
> 
> 赞同：1
> 
> 时间：2012-05-10T13:36:34.317
> 
> 标签：python, wxpython, wxwidgets, textcolor, wxstyledtextctrl

如何在 StyledTextCtrl 中设置文本颜色，但只有一些单词？我的意思是让我们说我有

露西是蓝色的

我只想**将**“蓝色”这个词染成蓝色

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:48:50.410

请参阅 StyledTextCtrl 的 wxPython 演示。它显示了如何做这件事。我认为你正在寻找的东西是这样的：

```
ed.StartStyling(190, 0xff)
ed.SetStyling(20, 2) 
```

其中 190 是第 190 个字符，您可以为接下来的 20 个字符设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T06:26:00.697

在 text_area 是 StyledCtrlText 的地方使用它

```
self.text_area.StyleSetSpec(stc.STC_P_DEFAULT,"fore:#FF0000") 
```

接下来把你想改变颜色的文字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T08:49:16.010

要更改线条的样式，您必须获取第一个字节和结束字节的位置。然后，您可以定义从第一个字节 (StartStyling) 开始并应用于整行 (SetStyling) 的样式 (StyleSetSpec)。您必须在结束字节处重新应用默认样式 (0)。这是我的代码：

```
# Move to line
self.editname.GotoLine(line-1)
# Get position
pos = self.editname.GetCurrentPos()
# Define style 4
self.editname.StyleSetSpec(4, "back:#ff0000")
# Starts style at position pos
self.editname.StartStyling(pos, 0xffff)
# Until posend position, apply style 4
self.editname.SetStyling(posend-pos, 4)
# Restore style 0 after the ending byte of the line
self.editname.SetStyling(posend, 0) 
```

# java - Java MP3 波形归一化

> ID：10535174
> 
> 赞同：0
> 
> 时间：2012-05-10T13:36:45.190
> 
> 标签：java, javasound, waveform

我一直在尝试生成类似 Audacity 的波形。我使用了 java sound api 并达到了将实际 mp3 表示为波形的一个不错的点。您是否有任何数学函数可以应用于要绘制的数据集，使其看起来更密集和更平滑？

谢谢！

编辑1：

移动平均线的建议（我使用了指数）效果很好，但对我的限制（单线程）执行得非常重。除此之外，输出非常好！

我最终实现了我自己的一个小实现。我取一个值区域的局部最大值，并用一条直线将它连接到下一个区域的局部最大值。它速度快，输出不错。

编辑 2： @Nicholas DiPiazza 的链接[代码/解决方案](https://stackoverflow.com/questions/11017283/java-program-that-create-a-png-waveform-for-an-audio-file)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:10:22.587

如果我理解正确，您已经知道如何获取 PCM 数据点，但现在想要为它们拟合曲线。是的？

线性插值是最简单的方法。如果它不够光滑，我会感到惊讶。你的采样率是多少？

我知道有一些高阶曲线也可以用来拟合数据点，这会使图形表示更平滑。我不确定什么最适合代表音频波。我似乎想起了与音频一起使用的术语“三次插值”。但不能肯定地说，数学有点粗糙。

# django - Django 表单向导和 django-paypal

> ID：10535175
> 
> 赞同：0
> 
> 时间：2012-05-10T13:36:55.250
> 
> 标签：django, django-forms, django-paypal

我正在尝试将贝宝表单放入表单向导中。正在显示字段，但由于某种原因该按钮未显示。

我将表单向导包装在一个视图中，它正在工作。唯一缺少的是贝宝按钮。

视图.py

```
def add(request):
    paypal_dict = {
        "cmd": "_xclick-subscriptions",
        "business": "alexbrand09@gmail.com",
        "p3": 1,                           # duration of each unit (depends on unit)
        "t3": "M",                         # duration unit ("M for Month")
        "src": "1",                        # make payments recur
        "sra": "1",                        # reattempt payment on payment error
        "no_note": "1",                    # remove extra notes (optional)
        "notify_url": "http://www.example.com/your-ipn-location/",
        "return_url": "http://www.example.com/your-return-location/",
        "cancel_return": "http://www.example.com/your-cancel-location/",
        "custom": request.user.id
    }

    silver_payment = {
        "a3": "15",
        "item_name": "Silver Business Profile",
    }

    platinum_payment = {
        "a3": "25",
        "item_name": "Platinum Business Profile",
    }

    # add other keys from paypal_dict
    silver_payment.update(paypal_dict)
    platinum_payment.update(paypal_dict)

    initial = {
        '3':silver_payment,
        '4':platinum_payment,
    }

    #create form wizard
    form = AddWizard.as_view([AddForm1, AddForm2, AddForm3, PayPalPaymentsForm,PayPalPaymentsForm],
            initial_dict = initial,
            condition_dict = {
                '1': basic_ad_selected,
                '2': silver_ad_selected,
                '3': silver_ad_selected,
                '4': platinum_ad_selected
            })

    return form(context=RequestContext(request), request=request) 
```

模板：

```
{% block content %}

{% load bootstrap %}

<h2>Payment Information</h2>

CARD FORM

<form action="" method="POST">{% csrf_token %}

{{ wizard.management_form }}

{% if wizard.form.forms %}
    {{ wizard.form.management_form }}
    {% for form in wizard.form.forms %}
        {{ form|bootstrap }}

    {% endfor %}
{% else %}
    {{ wizard.form|bootstrap }}

{% endif %}
<br/><br/>
{% if wizard.steps.prev %}
<button class="btn" name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}">&laquo; Go Back</button>
{% endif %}
<button class="btn btn-primary" type="submit" />Next &raquo;</button>
</form>
{% endblock %} 
```

我不确定为什么会显示贝宝表单的所有字段，但不会显示按钮本身

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:45:20.507

引导标签正在摆脱按钮......

按钮现在出现了。

# android - 如何设置 SearchView 文本大小？

> ID：10535176
> 
> 赞同：37
> 
> 时间：2012-05-10T13:37:01.383
> 
> 标签：android, searchview

我有一个`SearchView`内部 a `LinearLayout`，我正在尝试`TextSize`为它设置一个不同的（`SearchView`），但是`android:textSize="60sp"`例如在设置时，什么也没有发生。

这是我的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:orientation="vertical"
          android:padding="2dp">
<SearchView
        android:id="@+id/searchView"
        android:layout_width="350dp"
        android:textSize="60sp"
        android:layout_height="80dp"
        android:layout_marginTop="15dp"/>
<ListView
        android:id="@+id/search_results"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/> 
```

有谁知道如何修改`TextSize`控件的？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2017-08-23T02:08:47.310

您可以使用主题来实现这一点：

在样式.xml

```
<style name="AppSearchView" parent="Widget.AppCompat.SearchView" >
        <item name="android:textSize">60sp</item>
    </style> 
```

并使用 SearchView

```
<android.support.v7.widget.SearchView
            android:id="@+id/searchView"
            android:layout_width="350dp"
            app:theme="@style/AppSearchView"
            android:layout_height="80dp"
            android:layout_marginTop="15dp"/> 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-10-17T19:52:05.433

您可以使用代码执行这些操作

```
SearchView searchView = new SearchView(context);
LinearLayout linearLayout1 = (LinearLayout) searchView.getChildAt(0);
LinearLayout linearLayout2 = (LinearLayout) linearLayout1.getChildAt(2);
LinearLayout linearLayout3 = (LinearLayout) linearLayout2.getChildAt(1);
AutoCompleteTextView autoComplete = (AutoCompleteTextView) linearLayout3.getChildAt(0);
autoComplete.setTextSize(60); 
```

这是另一个解决方案

```
SearchView searchView = new SearchView(context);
AutoCompleteTextView search_text = (AutoCompleteTextView) searchView.findViewById(searchView.getContext().getResources().getIdentifier("android:id/search_src_text", null, null));
search_text.setTextColor(Color.WHITE);
search_text.setTextSize(TypedValue.COMPLEX_UNIT_PX, getResources().getDimensionPixelSize(R.dimen.text_small)); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-04-02T18:32:39.073

我希望我的解决方案会有所帮助（AndroidX）。

*样式.xml*

```
 <style name="SearchViewStyle" parent="Widget.AppCompat.Light.SearchView">
    <item name="android:textSize">20sp</item>
 </style> 
```

*your_layout_name.xml*

```
<androidx.appcompat.widget.SearchView
      app:defaultQueryHint="Search"
      android:theme="@style/SearchViewStyle" // Not style!!
      .
      .
      .
         /> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-27T14:47:58.240

使用 ActionBarSherlock 时，您必须这样做：

```
 AutoCompleteTextView searchTextView = (AutoCompleteTextView) searchView.findViewById(R.id.abs__search_src_text);
    searchTextView.setTextColor(getResources().getColor(R.color.search_text_color)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-11-12T03:34:20.067

### 我创建了 kotlin 扩展函数

```
fun SearchView.setTextSize(size: Float) {
    findViewById<EditText>(R.id.search_src_text).textSize = size
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-13T11:49:30.033

虽然`AutoCompleteTextView`是 的超类`SearchAutoComplete`，但`SearchView`使用`SearchAutoComplete`而不是`AutoCompleteTextView`。使用它并做更多事情。

```
SearchView searchView=...;
SearchView.SearchAutoComplete autoComplete= searchView.findViewById(android.support.v7.appcompat.R.id.search_src_text);
float textSpSize=10.f;
if (autoComplete!=null){
    autoComplete.setTextSize(textSpSize);
   } 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-05-28T23:21:05.940

检查这个答案[我们可以限制Android中SearchView的edittext中的字符数吗？](https://stackoverflow.com/a/16033389/838444). 它使用[SearchView.OnQueryTextListener](http://developer.android.com/reference/android/widget/SearchView.OnQueryTextListener.html)来检查是否超出限制。

# c# - WCF 访问被拒绝异常

> ID：10535180
> 
> 赞同：3
> 
> 时间：2012-05-10T13:37:10.950
> 
> 标签：c#, .net, winforms, wcf, exception

尝试运行 WCF 服务会导致以下结果。我已经在引用 [http://msdn.microsoft.com/en-us/library/ms733768.aspx](http://msdn.microsoft.com/en-us/library/ms733768.aspx)的页面上尝试了与 netsh 相关的建议， 但没有任何工作。请提供有关如何解决此问题的信息。

提前致谢。

```
{"HTTP could not register URL http://+:8439/. Your process does not have access rights to this namespace (see http://go.microsoft.com/fwlink/?LinkId=70353 for details)."}

   at System.ServiceModel.Channels.SharedHttpTransportManager.OnOpen()
   at System.ServiceModel.Channels.TransportManager.Open(TransportChannelListener channelListener)
   at System.ServiceModel.Channels.TransportManagerContainer.Open(SelectTransportManagersCallback selectTransportManagerCallback)
   at System.ServiceModel.Channels.TransportChannelListener.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.HttpChannelListener.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open()
   at TestThreadSync.Form1.ListenOnChannel() in C:\Users\MyAccount\Desktop\TestService\Form1.cs:line 51
   at TestThreadSync.Form1.Form1_Load(Object sender, EventArgs e) in C:\Users\MyAccount\Desktop\TestService\Form1.cs:line 32
   at System.Windows.Forms.Form.OnLoad(EventArgs e)
   at System.Windows.Forms.Form.OnCreateControl()
   at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
   at System.Windows.Forms.Control.CreateControl()
   at System.Windows.Forms.Control.WmShowWindow(Message& m)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
   at System.Windows.Forms.ContainerControl.WndProc(Message& m)
   at System.Windows.Forms.Form.WmShowWindow(Message& m)
   at System.Windows.Forms.Form.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
   at System.Windows.Forms.SafeNativeMethods.ShowWindow(HandleRef hWnd, Int32 nCmdShow)
   at System.Windows.Forms.Control.SetVisibleCore(Boolean value)
   at System.Windows.Forms.Form.SetVisibleCore(Boolean value)
   at System.Windows.Forms.Control.set_Visible(Boolean value)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.Run(Form mainForm)
   at TestThreadSync.Program.Main() in C:\Users\MyAccount\Desktop\TestService\Program.cs:line 18 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T13:41:17.000

两个选项（可以使用两个中的任何一个）

1.使用netsh实用程序提供对端口的访问

[netsh http](http://msdn.microsoft.com/en-us/library/windows/desktop/cc307223%28v=vs.85%29.aspx)添加 urlacl url=http://+:8439/ user=DOMAIN\UserName

[http://blogs.msdn.com/b/amitlale/archive/2007/01/29/addressaccessdeniedexception-cause-and-solution.aspx](http://blogs.msdn.com/b/amitlale/archive/2007/01/29/addressaccessdeniedexception-cause-and-solution.aspx)

2.需要管理员权限

以管理员身份运行（Visual Studio 或应用程序本身）

# opencv - 实时图像处理建议

> ID：10535182
> 
> 赞同：5
> 
> 时间：2012-05-10T13:37:30.163
> 
> 标签：opencv, image-processing, cuda, opencl

真的需要一些帮助和建议，因为我是实时图像处理的新手。

我正在尝试为相机获得 1000fps 的系统实现算法，我需要获取所有图像中每个像素的值，并对 N 个图像中像素 [i] [j] 的演变进行不同的计算, 对于图像中的所有像素。我有 (unsigned char *ptr) 我想将它们传输到 GPU 并开始使用 CUDA 实现算法并将数据返回给 CPU。但我不确定实时处理的最佳选择是什么。我的系统： CPU Intel Xeon x5660 2.8Ghz（2 个处理器） GPU NVIDIA Quadro 5000 问题是我想确保在获得 1000fps 并将它们传递给 GPU 进行处理，我怎样才能确保我不会丢失下一秒来自抓取器的任何数据？我需要在 C++ 中实现多线程吗？和 OpenCV/OpenCL/CUDA 中的并行编程？如果您有任何想法或建议，请告诉我。我真的需要一些实时图像处理专家的建议。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-10T14:27:31.747

如您所知，OpenCV 使用 CUDA 框架在 GPU 中实现了它的一些功能。

您可以编写自己的 CUDA 代码/函数来对数据进行操作并将其转换为 OpenCV 格式而不会出现任何问题。我演示了如何在[cuda-grayscale](http://code.google.com/p/cuda-grayscale/)上做到这一点。我想这个例子回答了你的大部分问题。

请注意，**OpenCV 2.3.1 使用 CUDA 4.0**，而**OpenCV 2.4 仅适用于 CUDA 4.1**。

关于此声明：

> 我想确保获得 1000fps 并将它们传递给 GPU 进行处理

您很可能无法像处理来自相机的帧一样快地处理这些帧。如果您不想丢弃任何帧，则可以**忘记实时**（我假设您使用的不是非常小的图像（10x15））。

如果您确实需要使用 1000 FPS，则必须实现一种缓冲机制来存储来自设备的帧。这就是我们开始讨论多线程系统实现的地方：应用程序的**主线程**将负责从相机中获取帧并将它们存储在缓冲区中，**第二个线程**将从缓冲区中读取并执行帧上的处理。

有关如何实现缓冲机制的信息，请查看：

[如何实现 cv::Mat 对象（OpenCV）的循环缓冲区？](https://stackoverflow.com/q/9472880/176769)

[循环缓冲区的线程安全实现](https://stackoverflow.com/questions/9743605/thread-safe-implementation-of-circular-buffer)

[C + OpenCV：带有循环缓冲区的 IplImage](https://stackoverflow.com/q/9733005/176769)

# java - 如何在java中找到两点之间的每个像素？

> ID：10535185
> 
> 赞同：3
> 
> 时间：2012-05-10T13:37:44.347
> 
> 标签：java, image-processing, pixels

您好先生/我在 java Swing 中为医生制作桌面应用程序。我想找到每个像素值不在两点之间计数。假设我有一个点 (100,145)，第二个点是 (173,190)，我想在这之间获取像素两个点。表示这两个点之间的（x，y）值的每个像素。所以我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T13:39:13.900

查找[Bresenham 算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)。[这](http://tech-algorithm.com/articles/drawing-line-using-bresenham-algorithm/)是Java中的一个实现。

# c++ - googletest：如何将我的所有测试包含在一个可执行文件中？

> ID：10535192
> 
> 赞同：3
> 
> 时间：2012-05-10T13:37:57.030
> 
> 标签：c++, googletest

我正在使用 C++ 的谷歌测试框架。按照文档和示例，我最终为我创建的每个测试“.cc”文件提供了一个单独的可执行文件。有没有办法创建一个可执行文件来调用我所有的单元测试？

我想把我的项目放在一个报告测试状态的 CI 工具中，所以我想有一个 XML 输入文件而不是很多。

我的 make 文件的内容如下所示：

```
class1_unittest.o : $(USER_TEST_DIR)/class1_unittest.cc $(USER_DIR)/class1.h $(GTEST_HEADERS)
    $(CXX) $(CPPFLAGS) $(CXXFLAGS) -c $(USER_TEST_DIR)/class1_unittest.cc

class1_unittest : class1.o day.o class1_unittest.o gtest_main.a
     $(CXX) $(CPPFLAGS) $(CXXFLAGS) -pthread $^ -o $(PROJECT_BIN)/$@

class2_unittest.o : $(USER_TEST_DIR)/class2_unittest.cc $(USER_DIR)/class2.h $(GTEST_HEADERS)
    $(CXX) $(CPPFLAGS) $(CXXFLAGS) -c $(USER_TEST_DIR)/class2_unittest.cc

class2_unittest : class2.o day.o class2_unittest.o gtest_main.a
    $(CXX) $(CPPFLAGS) $(CXXFLAGS) -pthread $^ -o $(PROJECT_BIN)/$@ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:32:51.123

您只需将所有测试文件包含在 Makefile 的单个目标中，并`main()`在其中一个测试文件或单独的 main.cc 中定义，该文件也需要包含在目标中。

正如[文档](http://code.google.com/p/googletest/wiki/V1_6_Primer#Invoking_the_Tests)解释的那样，宏的各种版本都`TEST()`隐式地向 Google Test 注册了他们的测试。这意味着您可以拥有一个独立的 main.cc，其中仅包含：

```
#include "gtest/gtest.h"
int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
} 
```

# php - pChart 轴 X 刻度间隙

> ID：10535194
> 
> 赞同：1
> 
> 时间：2012-05-10T13:38:02.113
> 
> 标签：php, pchart

我正在使用 pChart 库，我希望 X 比例为 1-100，但在图表上我希望除以 10 的倍数。我有 2000 个数据点。

不幸的是，我的轴 X 不可读，因为它`|`被放置在每个轴单元上，而不是每 10 个。现在看起来像这样 - 有什么想法吗？

![在此处输入图像描述](../Images/2eba58086810e340b6b2a0ad5e922492.png)

编辑：使用@EPICWebDesign 提示后，我得到了 ![在此处输入图像描述](../Images/2e0c613d31e19e64563a40f44ec59d44.png)

如何删除重复`X`值。我可以做到`array_unique`，但后来我在图表上失去了一些分数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:17:14.623

### 第一个答案

如果这是 pChart 2，您可以使用 LabelSkip 设置。

即：“标签跳过”=>$X，

将使其仅显示每个 $X th 标签，同时仍显示所有数据点。

来自 wiki：您可以使用 LabelSkip 跳过指定数量的 X 标签。 [http://wiki.pchart.net/doc.doc.draw.scale.html](http://wiki.pchart.net/doc.doc.draw.scale.html)

### 第二个答案

您可以将重复的 x 轴值设为空。请参阅[PHP：重复值删除](https://stackoverflow.com/questions/10435986/php-duplicate-value-removal)

这是一个更具体的例子：

```
$x = array(1,1,2,3,4,5);
$prev = -1;
foreach ($x as &$point) {
  if ($prev === $point) {
    $point= NULL;
  }
  else {
    $prev = $point;
  }
}
unset($point);
print_r($x); // 1,NULL,2,3,4,5... 
```

# c# - 另一个 BCD 字节 [] 到 int 并再次返回

> ID：10535199
> 
> 赞同：0
> 
> 时间：2012-05-10T13:38:15.453
> 
> 标签：c#, encoding, bcd

我在进行一些转换时遇到了麻烦，并且找不到代码有什么问题，或者不知道它必须做什么。

我有以下字节[]

```
byte[] bytes = {0xFF, 0xFF, 0xFE}; 
```

我以这种方式将其转换为 ulong ：

```
ulong next = ((uint)((((0x00 << 4) | bytes[0]) << 16) | ((bytes[1] << 8) | bytes[2]))); 
```

接下来我将 1 添加到下一个：

```
next++; 
```

然后，我想将 ulong 转换回字节数组。我尝试了在这里和网上找到的几种 bcd 算法，但我无法得到我期望的结果：

```
byte[] bytes = {0xFF, 0xFF, 0xFF}; 
```

安装的

```
{ 0x15, 0x72, 0x77, 0x16} 
```

我尝试过的大多数解决方案都得到了这一点。

这是我使用的算法之一：

```
static Byte[] CopyAsBCD(UInt32 value)
        {
            Byte[] buffer = new byte[4];
            Int32 offset = 0;
            var length = 4;
            var s = value.ToString();
            var stringIndex = s.Length - 1;
            var bufferIndex = offset + length - 1;
            var isLower = true;

            try
            {
                while (bufferIndex >= offset && stringIndex > -1)
                {

                    if (isLower)
                        buffer[bufferIndex] = Byte.Parse(s[stringIndex].ToString());
                    else
                        buffer[bufferIndex] += (Byte)(Byte.Parse(s[stringIndex].ToString()) << 4);

                    if (!isLower)
                        bufferIndex--;
                    isLower = !isLower;
                    stringIndex--;
                }

            }
            catch
            {
            }
            return buffer;
        } 
```

我做错了什么？还是我有概念问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:42:27.973

你不能只使用：

```
//Array padded to 8 bytes, to represent a ulong
byte[] bytes = {0, 0, 0, 0, 0, 0xFF, 0xFF, 0xFE};

var longBytes = BitConverter.ToUInt64(bytes, 0);

var arrayBytes = BitConverter.GetBytes(longBytes); 
```

注意：您可能需要反转数组，具体取决于您所在系统的[字节序](http://en.wikipedia.org/wiki/Endianness "字节序")（在这种情况下，您可能需要在另一侧添加填充）。

# objective-c - NSURLConnection 需要一个 NSRunLoop 来执行？

> ID：10535201
> 
> 赞同：1
> 
> 时间：2012-05-10T13:38:33.223
> 
> 标签：objective-c, nsurlconnection, nsrunloop

我正在尝试从名为 connect 的方法中获取 URL 的内容。它读取其配置设置并尝试获取 URL。它似乎需要运行循环才能执行。我虽然它只会执行一次并完成。似乎我不需要运行该运行循环，除了每次调用 connect 时获取此 URL 一次。有没有更好的方法来做到这一点？

```
- (BOOL) connect 
{
    // read serverName and eventId from preferences
    NSMutableArray* preferences;
    preferences = [NSMutableDictionary dictionaryWithContentsOfFile:@"/tmp/wt.plist"];

    // if these values aren't nil or blank
    if ([preferences valueForKey:@"serverAddress"] && [preferences valueForKey:@"eventId"]) {

        [self setServerAddress:@"172.16.28.210"];
        [self setEventId:@"OT-3037009"];
    } else{
        // return some kind of error message
    }

    NSLog(@"VideoDataURL: %@", [self getVideoDataURL]);

    // grab the URL and query the server

    NSURL *myURL = [NSURL URLWithString:@"http://localhost"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:myURL
                                                           cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                                                       timeoutInterval:2];

    __unused NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];

    [[NSRunLoop currentRunLoop] run];

    return TRUE;
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    // This method is called when the server has determined that it
    // has enough information to create the NSURLResponse.

    // It can be called multiple times, for example in the case of a
    // redirect, so each time we reset the data.

    // receivedData is an instance variable declared elsewhere.
    [incomingData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    /* 
     * Called each time a chunk of data arrives
     */

    NSLog(@"received %lu bytes", [data length]);

    // Create a mutable data if it doesn't already exist
    if (!incomingData) {
        incomingData = [[NSMutableData alloc] init];
    }

    [incomingData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
{
    /*
     * Called if the connection fails
     */

    NSLog(@"connection failed: %@", [error localizedDescription]);  
    incomingData = nil;
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{
    /*
     * Called when the last chunk has been processed
     */

    NSLog(@"Got it all!");

    NSString *string = [[NSString alloc] initWithData:incomingData encoding: NSUTF8StringEncoding];

    incomingData = nil;

    NSLog(@"response is: %@", string);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T15:55:55.950

如果您从主线程开始连接，是的，这是正确的。我只是使用 GCD 在主线程上创建和启动连接，以避免考虑运行循环。

```
dispatch_async(dispatch_get_main_queue(), ^{
    NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];
    [conn start];
}); 
```

在任何地方工作，您不必跟踪运行循环或线程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-13T14:49:16.800

我会确保你手动告诉你正在产生连接的工作线程的 runLoop 运行，直到连接完成。如果你不这样做，Cocoa 会自动让线程进入睡眠状态，因此你的委托方法似乎永远不会收到响应。

```
// The following is delcared within the scope of a NSThread, NSOperation, or GCD Block
//
// The NSURLConnection object and it's initialization/start methods
// |
// V
// Above the method call to the thread's runLoop.
//
[[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:<a time interval>];
// I use a minute, or 60.0, before I manually cancel the connection
// and send an error message back to the caller. 
```

^是您在产生连接后应该调用的方法。它应该给你你正在寻找的结果。

当您构建异步服务器调用/任务时，请记住此结构：

## 线

## 运行循环

## 任务

每个异步任务都需要自己的 RunLoop，以便在其存在期间不断轮询事件。每个 RunLoop 都需要存在于线程的范围内，以便执行其关联的任务。

您可以使用 NSThread/NSRunLoop/NSURLConnection、Grand Central Dispatch 甚至 NSOperation/NSOperationQueue 手动构建异步网络任务。我更喜欢操作/队列，因为我觉得它们更面向对象，并且基于块的编程可能有点棘手（如果您只使用“dispatch_”调用，您将在其中编写请求的结构）。归根结底，根据您的编程偏好编写线程模型。每种方法都会给你相同的结果。

此外，除非您正在执行需要同步的任务部分，否则不要使用 dispatch_sync，否则您将锁定 UI。要为您的应用程序创建真正的异步模型，必须掌握 RunLoops。

祝你好运！

PS NSURLConnection 已经构建为异步运行，但是，要创建真正的异步网络模型，您的应用程序需要在与主线程分开的线程上生成连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:53:15.000

我认为同步请求不需要运行循环：

```
NSURLResponse* response = nil;
NSData* data = [NSURLConnection sendSynchronousRequest:urlRequest returningResponse:&response error:nil]; 
```

# java - Quartz XML 插件在重启后重新安排触发的触发器

> ID：10535203
> 
> 赞同：1
> 
> 时间：2012-05-10T13:38:45.500
> 
> 标签：quartz-scheduler, , java, triggers, quartz-scheduler

我正在使用[XML Scheduling Plugin](http://quartz-scheduler.org/documentation/quartz-2.1.x/configuration/ConfigPlugins) ( ) 在[quartz-scheduler](/questions/tagged/quartz-scheduler "显示标记为“石英调度程序”的问题")[`XMLSchedulingDataProcessorPlugin`](http://www.quartz-scheduler.org/api/2.1.5/org/quartz/plugins/xml/XMLSchedulingDataProcessorPlugin.html)的 JDBC 作业存储中启动时创建多个作业和触发器。这工作正常，但我有一个简单的触发器配置为只运行一次的问题。

当这样的触发器触发时，它会从数据库中删除，因为没有下一次触发时间。到现在为止还挺好。不幸的是，当我重新启动应用程序时，插件找不到该触发器，因此再次重新插入。因为我使用`MISFIRE_INSTRUCTION_IGNORE_MISFIRE_POLICY`这个作业被一次次地从数据库中删除。重新启动应用程序会重复整个过程。

显然我希望我的触发器只触发一次。即使没有下次触发时间，是否可以将触发的触发器保留在数据库中？或者也许这可以用不同的方式解决？摘自我的`quartz_data.xml`文件：

```
<processing-directives>
    <overwrite-existing-data>false</overwrite-existing-data>
    <ignore-duplicates>true</ignore-duplicates>
</processing-directives>

<schedule>

    <trigger>
        <simple>
            <!-- ... -->
            <start-time>2012-05-10T07:00:00Z</start-time>
            <repeat-count>0</repeat-count>
            <repeat-interval>0</repeat-interval>
        </simple>
    </trigger> 
```

请注意，所有到达最后一次执行的触发器都存在问题，因此已从 db.xml 中删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T12:58:25.483

我最终扩展`StdJDBCDelegate`并覆盖`deleteTrigger()`为无操作：

```
package com.example;

class DurableTriggersDriverDelegate extends StdJDBCDelegate {

    public DurableTriggersDriverDelegate(Logger logger, String tablePrefix, String schedName, String instanceId, ClassLoadHelper classLoadHelper) {
        super(logger, tablePrefix, schedName, instanceId, classLoadHelper);
    }

    public DurableTriggersDriverDelegate(Logger logger, String tablePrefix, String schedName, String instanceId, ClassLoadHelper classLoadHelper, Boolean useProperties) {
        super(logger, tablePrefix, schedName, instanceId, classLoadHelper, useProperties);
    }

    @Override
    public int deleteTrigger(Connection conn, TriggerKey triggerKey) throws SQLException {
        this.logger.debug("deleteTrigger(" + conn + ") skipped");
        return 1;
    }
} 
```

新的实现可以通过以下方式轻松插入`quartz.properties`：

```
org.quartz.jobStore.driverDelegateClass=com.example.DurableTriggersDriverDelegate 
```

该解决方案有几个缺点：

*   数据库不断增长，而不是删除触发的触发器

*   无法删除作业，因为它首先尝试删除所有触发器（但未执行此操作），并且在尝试删除作业详细信息本身时发生约束违规

但是它解决了我原来的问题。

# c# - 将字符串解析为 DateTime 对象

> ID：10535209
> 
> 赞同：0
> 
> 时间：2012-05-10T13:38:55.070
> 
> 标签：c#, .net, datetime, date-format

我试图将 a 解析`String`为一个`DateTime`对象，但它似乎总是默认月份为 1。所以假设我给它一个字符串`30/05/1970`，它最终被转换为`DateTime`月份值等于的对象`1`。

这是代码：

```
 public static DateTime ToDateTime(this String value, String format)
    {
        Contract.Requires(!String.IsNullOrEmpty(value));
        Contract.Requires(!String.IsNullOrEmpty(format));

        DateTime date;
        if (DateTime.TryParseExact(value, format, CultureInfo.InvariantCulture, DateTimeStyles.None, out date))
        {
            return date;
        }           

        throw new ArgumentException("Input value is not a valid date.");
    } 
```

请注意，传递给该方法的格式是`dd/mm/yyyy`.

有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T13:40:27.887

您几个月来一直在使用错误的格式说明符。

它`MM`不是`mm`。您目前正在将月份解析为分钟。

使用`dd/MM/yyyy`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:42:36.803

您可能指定了不正确的格式。

改为这样做

```
var dt= ToDateTime("30/05/1970", "dd/MM/yyyy"); 
```

看看这个：[http ://www.csharp-examples.net/string-format-datetime/](http://www.csharp-examples.net/string-format-datetime/)

# java - 通过 for 循环循环的通用集合

> ID：10535215
> 
> 赞同：0
> 
> 时间：2012-05-10T13:39:14.050
> 
> 标签：java

我在遍历我的通用集合时遇到问题。尽管我的课程没有直接显示任何编译错误，但 IDE（Netbeans）在项目树中的类图标上显示错误，显示“解析文件错误”。任何帮助，将不胜感激。

我的代码

```
public abstract class AutocompleteCacheImpl<E> implements AutocompleteCache {

    public void store(Collection<E> es) {
        for(E e : es) {
            store(e);
        }
    } 

    public void store(E e) {
        //do something
    }
} 
```

界面

```
public interface AutocompleteCache<E> {

    public void store(Collection<E> es);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:43:20.320

> 公共类 AutocompleteCacheImpl<E> 实现 AutocompleteCache

这是错误的，因为 AutocompleteCache 接口也是通用的。

试试这个：

```
public abstract class AutocompleteCacheImpl<E> implements AutocompleteCache<E> 
```

此外，关键字`public`应该在关键字之前`abstract`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T13:42:21.910

您需要指定泛型类型 ( `AutocompleteCache`==> `AutocompleteCache<E>`) 以让编译器知道 E in 与`AutocompleteCacheImpl`E in 相同`AutocompleteCache`：

```
public abstract class AutocompleteCacheImpl<E> implements AutocompleteCache<E> 
```

# asp.net - Visual Studio，Asp.net 连接字符串

> ID：10535216
> 
> 赞同：0
> 
> 时间：2012-05-10T13:39:14.230
> 
> 标签：asp.net

在 Visual Studio 中，它将生成如下数据源：

```
<asp:SqlDataSource ID="SqlDataSource2" runat="server" 
        ConnectionString="<%$ ConnectionStrings:AdventureWorksConnectionString1 %>" 
        SelectCommand="SELECT top 10 * FROM [Address]">
    </asp:SqlDataSource> 
```

运行它时，它会说“无效对象”。然后我发现了，应该是

```
[AdventureWorks].[Person].[Address] 
```

连接字符串是

```
 <connectionStrings>
        <add name="AdventureWorksConnectionString1" connectionString="Data Source=localhost\SQLEXPRESS;Initial Catalog=AdventureWorks;Integrated Security=True"
            providerName="System.Data.SqlClient" />
    </connectionStrings> 
```

那么如何在 VS 中配置以使用这种格式呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:43:20.850

登录数据库用户的默认模式可能是`[dbo]`，不是`[Person]`。在这种情况下，您需要限定模式名称。

您的选择命令应该是：

```
SELECT top 10 * FROM [Person].[Address] 
```

# ios - 我怎样才能把两个委托给一个视图控制器

> ID：10535217
> 
> 赞同：1
> 
> 时间：2012-05-10T13:39:18.033
> 
> 标签：ios, iphone, ipad

我希望 AddContentViewController 有两个委托，但不断出错，我该怎么做？

```
@interface AddContentViewController : UITableViewController <UITextFieldDelegate>
 <CatPickViewControllerDelegate> 
```

谢谢 4 帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T13:41:06.343

像这样：

```
@interface AddContentViewController : UITableViewController <UITextFieldDelegate, CatPickViewControllerDelegate> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T13:41:25.623

用逗号分隔

```
@interface AddContentViewController : UITableViewController <UITextFieldDelegate,CatPickViewControllerDelegate> 
```

# c++ - C++ 中对命名空间的未定义引用

> ID：10535221
> 
> 赞同：0
> 
> 时间：2012-05-10T13:39:48.743
> 
> 标签：c++, namespaces

尝试使用命名空间中的变量时，我得到一个未定义的引用。我创建了一个头文件和一个包含命名空间的实现文件，并试图在另一个文件中使用命名空间......

**编辑：**

```
//first.h
namespace first
{
  extern int var;
  extern int multiplyVar(int);
}

//first.cpp
namespace first
{
  int var = 5;
  int multiplyVar(int mult)
  {
    return mult * var;
  }
}

//someOtherFile.h
#include "first.h"

//someOtherFile.cpp
first::var = 3;
int newVar = first::multiplyVar(3);

//error
undefined reference to  'first::multiplyVar(...)'
undefined reference to 'first::var' 
```

**编辑**实际代码

```
//jFork.h
#ifndef JFORK_H
#define JFORK_H

#include <iostream>
#include <string>

using namespace std;

namespace jFork
{
  extern int sockfd, newsockfd;
  int j_fork(string);
}

#endif //JWDSFORK_H

//jFork.cpp
namespace jFork
{
  int sockfd = 0, newsockfd = 0;

  int j_fork(string name)
  {
    cout<<"Preparing to fork: "<<name<<endl;

    int rv = fork();

    cout<<"Called fork(): "<<name<<endl;

    switch(rv)
    {
    case -1:
        cout<<"Exiting..."<<endl;
        exit(EXIT_FAILURE);
        break;
    case 0:
        if(sockfd)
        {
            cout<<"Closing sockfd: "<<name<<endl;
            close(sockfd);
            sockfd = 0;
        }

        if(newsockfd)
        {
            cout<<"Closing newsockfd: "<<name<<endl;
            close(newsockfd);
            newsockfd = 0;
        }

        break;
    default:
        cout<<"Preparing to sleep: "<<name<<endl;
        sleep(1);
        cout<<"Woke up from sleep"<<name<<endl;
        break;
    }

    return rv;
  }
}

//server.cpp
int pid = jFork::j_fork(name); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:41:52.470

注意没有`extern`函数声明和在实现文件的命名空间中定义符号。

```
//first.h
namespace first
{
  extern int var;
  extern int multiplyVar(int);
}

//first.cpp
var = 5;
extern int multiplyVar(int mult)
{
  return mult * var;
} 
```

应该

```
//first.h
namespace first
{
  extern int var;
  int multiplyVar(int);
}

//first.cpp
namespace first
{
   int var = 5;
   int multiplyVar(int mult)
   {
     return mult * var;
   }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T13:41:57.317

尝试：

```
extern int first::multiplyVar(int mult) 
```

您的定义位于全局命名空间中。

您还可以将 CPP 文件中的所有定义包装在一个`namespace`块中，但我的偏好是不这样做。

# plot - 在 x、y、z 上等比例绘制 3D 绘图

> ID：10535222
> 
> 赞同：11
> 
> 时间：2012-05-10T13:39:49.950
> 
> 标签：plot, gnuplot

我使用的 gnuplot 的 splot 函数显示了 x、y 和 z 轴的不同比例。因此，最终图通常沿一个轴拉伸。我怎么能指定我想要沿所有三个轴的比例相等？

我读到“设置大小的正方形”在 2D 中完成了这项工作，但我想知道如何使用 splot (3D) 来实现这一点。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-10T18:03:56.060

好问题！

我想你想要`set view equal xyz`。（见`help view equal`）

# jsf-2 - 找不到视图标识符的已保存视图状态

> ID：10535227
> 
> 赞同：0
> 
> 时间：2012-05-10T13:40:04.973
> 
> 标签：jsf-2, weblogic, myfaces

当我在 Jetty 服务器上运行我的 JSF 应用程序时，它运行良好。

但是当我把它移到 Weblogic 服务器时，它开始给我这个错误。

```
javax.faces.application.ViewExpiredException: /wsListing.xhtmlNo saved view state could be found for the view identifier: /wsListing.xhtml
at org.apache.myfaces.lifecycle.RestoreViewExecutor.execute(RestoreViewExecutor.java:132)
at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:170)
at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:117)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:197)
at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:226)
at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:124)
at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:283)
at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42)
at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:26)
at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3402)
at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
at weblogic.security.service.SecurityManager.runAs(Unknown Source)
at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2140)
at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2046)
at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1398)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:200)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:172) 
```

wsListing.xhtml 如下：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui" xmlns:lang="en">

<f:view xmlns:c="http://java.sun.com/jstl/core"
    xmlns:s="http://www.springframework.org/tags"
    xmlns:form="http://www.springframework.org/tags/form">
    <h:head>
        <h:outputStylesheet library="css" name="../resources/css/style.css"
            target="head" />
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>Test Client</title>
        <link rel="shortcut icon" href="../resources/images/favicon.ico" />
        <link rel="stylesheet" href="../resources/css/style.css"
            type="text/css" media="all" />
    </h:head>
    <h:body>
        <ui:include src="header.xhtml" />
        <div id="home-training-container">
            <h:form>
                <table align="center" border="1">
                    <tr>
                        <td><h:commandLink value="First Web Service"
                                action="#{wsListingBean.action}">
                                <f:setPropertyActionListener
                                    target="#{wsListingBean.webServiceId}" value="abcService" />
                            </h:commandLink></td>
                    </tr>
                    <tr>
                        <td><h:commandLink value="Second Web Service"
                                action="#{wsListingBean.action}">
                                <f:setPropertyActionListener
                                    target="#{wsListingBean.webServiceId}" value="filterabc" />
                            </h:commandLink></td>
                    </tr>
                    <tr>
                        <td>Third Web Service</td>
                    </tr>
                    <tr>
                        <td>Fourth Web Service</td>
                    </tr>
                    <tr>
                        <td>Fifth Web Service</td>
                    </tr>
                </table>
            </h:form>
        </div>
        <ui:include src="footer.xhtml" />
    </h:body>
</f:view>
</html> 
```

当我单击任何命令链接时，就会出现以下问题：

```
<h:commandLink value="First Web Service"
                                    action="#{wsListingBean.action}">
                                    <f:setPropertyActionListener
                                        target="#{wsListingBean.webServiceId}" value="abcService" /> 
```

有人知道这个视图状态是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:09:36.643

我在**web.xml**中添加了以下几行来修复错误

```
 <context-param>
    <!--description>
        The location where state information is saved. Valid values
        are 'server' (typically saved in HttpSession) and 'client'
        (typically saved as a hidden field in the form. Default is
        server.
        </description-->
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>server</param-value>
</context-param>
<context-param>
    <!--description>
        Number of Views to be stored in the session when Server-Side
        State Saving is being used. Default is 20.
        </description-->
    <param-name>
        org.apache.myfaces.NUMBER_OF_VIEWS_IN_SESSION
    </param-name>
    <param-value>20</param-value>
</context-param> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:17:32.993

您是否将 web.xml 中的 PROJECT_STAGE 设置为 Development？如果是这样，您能否将其切换到生产环境并查看问题是否消失？我在 WebLogic 上收到了类似（如果不一样的话）的错误消息，并相信该更改修复了它。

# mysql - 如何删除表上的存储过程？

> ID：10535229
> 
> 赞同：0
> 
> 时间：2012-05-10T13:40:24.113
> 
> 标签：mysql, sql, stored-procedures, triggers, sequelpro

我有一个表，我无法复制一行，因为其中一个字段上有一个`stored procedure`, named `items.calcPrice`，它不再存在。

这是 MySQL 命令：

```
INSERT INTO items (folder_id)
VALUES (56) 
```

错误消息说，`"Couldn't write row. FUNCTION items.calcPrice does not exist."`

如何`stored procedure`在我的桌子上识别和删除它？我有 2 个具有“价格”值的字段，所以我不确定这`procedure`是在哪个字段上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:19:03.577

根据我们在聊天中的讨论，您似乎在此表上定义了一个`BEFORE INSERT`触发器`Items_Trigger`，它试图调用您的问题所引用的函数。

要删除触发器：

```
DROP TRIGGER Items_Trigger; 
```

# python - Python中的不等式运算符和排序

> ID：10535230
> 
> 赞同：0
> 
> 时间：2012-05-10T13:40:25.593
> 
> 标签：python

我有一个对象集合（列表）。我希望能够对对象进行排序，而不必提供回调（lambda 函数），`sorted()`而是通过实现可用于确定相同类型的对象之间的严格（不）相等性的函数 - ala C++。

在类上实现的`__eq__()`函数允许进行相等检查。我似乎找不到任何类似的功能来实现`<`和`>`

我如何在 Python 中实现它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T13:42:27.490

通过[`__lt__()`和`__gt__()`](http://docs.python.org/reference/datamodel.html#object.__lt__)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:43:54.690

[http://docs.python.org/reference/datamodel.html#basic-customization](http://docs.python.org/reference/datamodel.html#basic-customization)

您正在寻找

```
__lt__() and __gt__() 
```

（它在那个链接下只是一点点下降）。

# r - 从二项分布生成相关随机数

> ID：10535235
> 
> 赞同：13
> 
> 时间：2012-05-10T13:40:42.487
> 
> 标签：r, random, correlation

我试图找到一种从几个二项分布中生成相关随机数的方法。

我知道如何使用正态分布（使用`MASS::mvrnorm`），但我没有找到适用于二项式响应的函数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T18:36:48.523

您可以使用包生成相关的制服`copula`，然后使用该`qbinom`函数将它们转换为二项式变量。这是一个简单的例子：

```
library(copula)

tmp <- normalCopula( 0.75, dim=2 )
x <- rcopula(tmp, 1000)
x2 <- cbind( qbinom(x[,1], 10, 0.5), qbinom(x[,2], 15, 0.7) ) 
```

现在`x2`是一个矩阵，其中 2 列代表 2 个相关的二项式变量。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-10T17:42:21.920

具有 n 次试验和每次试验成功概率 p 的二项式变量可以被视为 n 次伯努利试验的总和，每个试验也具有成功概率 p。

类似地，您可以通过对具有所需相关性 r 的伯努利变量对求和来构造相关二项式变量对。

```
require(bindata)

# Parameters of joint distribution
size <- 20
p1 <- 0.5
p2 <- 0.3
rho<- 0.2

# Create one pair of correlated binomial values
trials <- rmvbin(size, c(p1,p2), bincorr=(1-rho)*diag(2)+rho)
colSums(trials)

# A function to create n correlated pairs
rmvBinomial <- function(n, size, p1, p2, rho) {
    X <- replicate(n, {
             colSums(rmvbin(size, c(p1,p2), bincorr=(1-rho)*diag(2)+rho))
         })
    t(X)
}
# Try it out, creating 1000 pairs
X <- rmvBinomial(1000, size=size, p1=p1, p2=p2, rho=rho)
#     cor(X[,1], X[,2])
# [1] 0.1935928  # (In ~8 trials, sample correlations ranged between 0.15 & 0.25) 
```

重要的是要注意，有*许多不同的联合分布*共享所需的相关系数。中的模拟方法`rmvBinomial()`产生其中之一，但它是否合适将取决于生成数据的过程。

如[this R-help answer](http://tolstoy.newcastle.edu.au/R/e2/help/07/02/10204.html) to a similar question中所述（然后继续更详细地解释这个想法）：

> 虽然双变量正态（给定的均值和方差）由相关系数唯一定义，但双变量二项式并非如此

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-19T13:49:39.633

具有相关二进制数据的矩阵也可以通过遗传算法进行迭代，例如在 R 包“RepeatedHighDim”（[https://github.com/jkruppa/RepeatedHighDim](https://github.com/jkruppa/RepeatedHighDim)）中实现。该算法在此处描述[https://www.sciencedirect.com/science/article/abs/pii/S0010482517303499](https://www.sciencedirect.com/science/article/abs/pii/S0010482517303499)

```
library(RepeatedHighDim)
X0 <- start_matrix(p = c(0.5, 0.3), k = 1000) # sample size k
R <- diag(2)
R[1,2] = 0.2
R[2,1] = 0.2
X1 <- iter_matrix(X0, R = R, T = 10000, e.min = 0.00001)$Xt
cor(X1) 
```

该包还实现了另外两种算法：

```
X2 = rmvbinary_EP(n = 1000, R = R, p = c(0.5, 0.3))
X3 = rmvbinary_QA(n = 1000, R = R, p = c(0.5, 0.3))
cor(X2)
cor(X3) 
```

# c++ - 如何将字符数组复制到剪贴板？

> ID：10535238
> 
> 赞同：0
> 
> 时间：2012-05-10T13:40:51.997
> 
> 标签：c++, winapi, clipboard

我试图让我的应用程序将字符数组复制到剪贴板，以便可以将其粘贴到 IE 地址栏中。我在让这个工作时遇到问题。这是我正在使用的代码：

```
HGLOBAL glob = GlobalAlloc(GMEM_FIXED,32);
memcpy(glob,array,sizeof(array));
OpenClipboard(hDlg);
EmptyClipboard();
SetClipboardData(CF_UNICODETEXT,glob);
CloseClipboard(); 
```

数组声明为：

```
char array[500]; 
```

这将导致程序崩溃。但是，如果我`sizeof(array)`用数字切换它就可以了，但是只有 8 个字符被复制到剪贴板。

谁能告诉我如何解决这个问题？我直接针对 Win32 API，而不是使用 MFC。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T13:50:02.327

您只分配 32 字节的全局内存：

```
GlobalAlloc(GMEM_FIXED,32); 
```

...然后尝试将 500 字节塞进一个 32 字节的包中：

```
memcpy(glob,array,sizeof(array)); 
```

将 GlobalAlloc 更改为：

```
GlobalAlloc(GMEM_FIXED,sizeof(array)); 
```

此外，您将数据粘贴为 Unicode 文本 ( `CF_UNICODETEXT`)，但它不是 Unicode 文本。我想这会导致......问题。

将其粘贴为纯文本：

```
SetClipboardData(CF_TEXT,glob); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T13:52:29.767

您正在将 500 个字符 ( `sizeof(array)`) 复制到只有 32 个字符空间的缓冲区中。所有剩余的字符都会践踏随机数据并导致崩溃。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-29T19:31:57.693

我创建了一个函数来保存和加载剪贴板。

```
#include <Windows.h>
char* LoadClipboard()
{
    static HANDLE clip;
    if(OpenClipboard(NULL))
    {
        clip = GetClipboardData(CF_TEXT);
        CloseClipboard();
    }
    return (char*) clip;
}

void SaveClipboard(char* text)
{
    HGLOBAL global = GlobalAlloc(GMEM_FIXED,strlen(text) + 1); //text size + \0 character
    memcpy(global,text,strlen(text));  //text size + \0 character
    if(OpenClipboard(NULL))
    {
        EmptyClipboard();
        SetClipboardData(CF_TEXT,global);
        CloseClipboard();
    }
} 
```

# eclipse - 在服务器上设置 SVN 后，下一步是什么？

> ID：10535241
> 
> 赞同：-1
> 
> 时间：2012-05-10T13:41:05.967
> 
> 标签：eclipse, svn, ubersvn

有一个 php 项目，5 个以上的开发人员将在上面工作。我们将使用 Eclipse 和相关的 svn 插件来更好地处理项目开发并从版本控制中受益。

我们购买了 VPS 服务器并设置了 UberSVN（创建了一个存储库）。同时，我通过一个框架生成了文件，我们将在项目中使用它。

现在我下一步该怎么做？我需要链接存储库和文件吗？如果是这样，怎么做？在 Eclipse 上设置项目时，我应该从 SVN 还是服务器获取文件？

抱歉，我猜不出要谷歌什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:58:47.173

您需要将文件“导入”到 SVN。如果你有一个独立的 SVN 客户端，它应该有一个 Import 功能。如果您使用的是 Eclipse 插件 SVN 客户端，则右键单击项目名称，并从弹出菜单中选择 Team > share。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T09:08:31.697

UberSVN 将使您的 repo 启动并运行，并消除设置中的所有麻烦。如果您还没有设置用户，则需要设置用户，请参阅[此处](http://docs.ubersvn.com/v1.0/admin.html#T9)了解详细信息。

鉴于您已使用 Eclipse 对此进行了标记，您将需要在[此处](http://www.eclipse.org/subversive/documentation/gettingStarted.php)阅读快速入门指南。

这应该足以为您提供日常使用知识。

# iphone - 从 NSThread 调用方法

> ID：10535243
> 
> 赞同：2
> 
> 时间：2012-05-10T13:41:06.933
> 
> 标签：iphone, ios, ios5, methods, nsthread

我试图在我的应用程序中调用一个类方法：didFinishLaunchingWithOptions: using NSThread。但奇怪的是，这个方法没有被调用。我在 didFinishLaunchingWithOptions 方法中尝试了以下方法。

```
[self performSelector:@selector(parseAdContent) onThread:myThread withObject:AdvertisementView waitUntilDone:NO];
      [myThread start]; 
```

在这方面帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:55:36.553

这是创建单独线程的方式：

```
[NSThread detachNewThreadSelector:@selector(yourSelector:) toTarget:yourTarget withObject:objectYouWishToPassAsParameter]; 
```

您指定的选择器将自动在新线程上执行。

您的代码的特定示例：

```
[NSThread detachNewThreadSelector:@selector(parseAdContent:) toTarget:self withObject:AdvertisementView]; 
```

您的线程选择器应如下所示：

```
- (void)parseAdContent:(id)obj {
    NSAutoreleasePool *threadPool = [[NSAutoreleasePool alloc] init];
    // Your background thread code here

    [pool drain];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:55:48.847

你想调用一个类方法，但是这个调用试图调用 self 的 -parseAdContent:。我不知道这是在哪个类中调用的，但无论哪种方式，这里的目标都是实例变量 self 而不是类。像这样的东西可能更符合您的要求。

```
[myThread initWithTarget:[self class] selector:@selector(parseAdContent) object:AdvertisementView]; 
```

编辑：因此，如果该方法是 Adview 类中的类方法，只需将目标更改为 Adview 类...

```
[myThread initWithTarget:[Adview class] selector:@selector(parseAdContent) object:AdvertisementView]; 
```

但是如果它是 Adview 类中的实例方法，那么目标将是 Adview 类型的变量的实例 - AdvertisementView，对吧？

```
[myThread initWithTarget:AdvertisementView selector:@selector(parseAdContent) object:AdvertisementView]; 
```

但这没有意义，您不会调用实例方法并将实例作为参数传递给它自己的方法......目标是您为其调用选择器的对象。object: 参数用于选择器的参数。

我假设这是您最初所说的类方法，在这种情况下，这两个调用中的第一个应该可以工作。

# javascript - 使用 jQuery 将 CSS 从 body 添加到 head 标签

> ID：10535249
> 
> 赞同：1
> 
> 时间：2012-05-10T13:41:25.187
> 
> 标签：javascript, jquery, html, css

我见过两种使用 JavaScript 和 jQuery 将 CSS 从正文添加到 HTML 页面头部的方法，哪个是首选？

```
$('head').append("<style type='text/css'> my CSS <\/script>"); 
```

或者

```
 var styleElement = document.createElement('style');
  var styleText = 'my CSS';
  var headElements = document.getElementsByTagName('head');
  styleElement.type = 'text/css';
  if (headElements.length == 1) {
    headElements[0].appendChild(styleElement);
  } else if (document.head) {
    document.head.appendChild(styleElement);
  }
  if (styleElement.styleSheet) { // IE
      styleElement.styleSheet.cssText = styleText;
  } else { // Other browsers
      var textNode = document.createTextNode(styleText);
      styleElement.appendChild(textNode);
  } 
```

显然第一个要短得多，但它是不是不太被接受？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:47:41.360

您的第一个选项是将 CSS 添加到 head 部分的可接受方式。使用 JQuery 将提供最跨浏览器兼容的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:49:27.930

我认为这是一个可读性与性能的问题。

人们会争辩（而且他们通常是正确的）用原始的 Javascript 方式做事比用 jQuery 做事要快 --- 为什么不这样呢？jQuery 从您正在做的事情中抽象出原始的 Javascript 调用，以呈现良好的语法和便利性。这意味着您在使用 jQuery 时会产生额外的开销，因为您的命令会在它的内部进行曲折和曲折，直到它到达将您正在做的事情“翻译”成原始 Javascript 代码的部分。

但话又说回来，编写原始 Javascript 代码不仅有时很乏味（看看所有代码！），而且容易受到跨浏览器问题（jQuery 试图规范化）的影响，并且可能更难阅读外行。性能优势真的值得吗？

老实说，这取决于您在哪里以及尝试做什么。在这里，我想说的是使用原始 Javascript 的好处可以忽略不计。在 jQuery 中实现这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T13:49:58.130

你是什​​么意思`accepted`？当您使用 jQuery 时，您的代码只有一行，但 jQuery 框架很可能会像您在第二个实现想法中提到的那样做。当您已经在使用 jQuery 时，您可能想坚持使用 jQuery。但是，如果您仅将其用于此目的，则不要包括整个框架。

# forms - 即使使用空/无效值，表单也始终通过验证

> ID：10535253
> 
> 赞同：1
> 
> 时间：2012-05-10T13:41:29.617
> 
> 标签：forms, symfony, validation

我有一个不使用实体类的简单表单。

发布后我想使用验证器验证值，但即使值为空或无效，错误列表的计数也始终为零。

这是（或多或少）我正在执行的代码：

```
 use Symfony\Component\Validator\Constraints\Email;
    use Symfony\Component\Validator\Constraints\MinLength;
    use Symfony\Component\Validator\Constraints\Collection;

    public function formAction(){
        $collectionConstraint = new Collection(array(
            'name' => array(new MinLength(5)),
            'email' => array(new Email(array('message' => 'Invalid email address'))),
        ));

        $options = array('validation_constraint' => $collectionConstraint);
        $form = $this->createFormBuilder(null, $options)
                ->add('name', 'text', array('label' => '', 'attr' => array('placeholder' => 'Your name')))
                ->add('email', 'email', array('label' => '', 'attr' => array('placeholder' => 'E-mail')))
                ->getForm();

        $request = $this->getRequest();
        $error   = false;
        if ($request->getMethod() == 'POST') {
            $form->bindRequest($request);

            if ($form->isValid()) {
                $data      = $form->getData();
                $errorList = $this->get('validator')->validateValue($data, $collectionConstraint);

                // count($errorList) is always zero even when the values are empty or invalid…
            }
            else {
                $error = true;
            }
        }

        // ... snip ...
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:10:47.203

我会说这是正常的，因为您计算`$errorList`了测试中的元素数量，表明该表单是有效的。所以我会说，当表格有效时，它会显示 0，而当它无效时，它什么也不显示。

您不需要手动运行验证，因为它已经由`$form->isValid()`语句执行。

如果要计算发生的约束违规次数，只需`count($form->getErrors())`在调用`$form->isValid()`.

最后，如果还没有完成，你应该阅读[http://symfony.com/doc/current/book/forms.html#using-a-form-without-a-class](http://symfony.com/doc/current/book/forms.html#using-a-form-without-a-class)。

干杯

# c - 使用套接字检查 Internet 连接

> ID：10535255
> 
> 赞同：1
> 
> 时间：2012-05-10T13:41:29.790
> 
> 标签：c

一个小问题：如何在 C 程序中使用 Linux 套接字来检查 Internet 连接？听说这个是最简单最合适的方法（比如不调用程序ping），就是不知道怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T10:37:11.810

随心所欲地改变它。:)

```
void *parser_online(void *garbage)
{
    int sockfd,val;
    char buffer[MAX_LINE];
    struct hostent *google_ent=NULL;
    struct sockaddr_in google_addr;

    sockfd = -1;

    if((google_ent = gethostbyname("www.google.com")) != NULL)
    {
        if((sockfd =    socket(google_ent->h_addrtype,SOCK_STREAM,IPPROTO_TCP)) != -1)
        {
            val = 1;
            if(setsockopt(sockfd,SOL_SOCKET,SO_REUSEADDR, (char *) &val, sizeof(val)) == 0 && setsockopt(sockfd,IPPROTO_TCP,TCP_NODELAY, (char *) &val, sizeof(val)) == 0)
            {
                google_addr.sin_family = google_ent->h_addrtype;
                memcpy(&(google_addr.sin_addr), google_ent->h_addr, google_ent->h_length);
                google_addr.sin_port = htons(80);
                if( connect(sockfd,(struct sockaddr *) &google_addr,sizeof(google_addr)) == 0)
                {
                    if(write(sockfd,"GET /index.html HTTP/1.1\r\n\r\n", 29) >= 28)
                    {
                        shutdown(sockfd, SHUT_WR);
                        if(read(sockfd, buffer, MAX_LINE) != -1) // all right!
                        {
                            close(sockfd);
                            return (void *) 1;
                        }
                        else
                            report_error("read()",1,0,verbose);
                    }
                    else
                        report_error("write()",1,0,verbose);
                }
                else
                    report_error("connect()",1,0,verbose);
            }
            else
                report_error("setsockopt()",1,0,verbose);
        }
        else
            report_error("socket()",1,0,verbose);
    }
    else
        report_error("cannot resolve IP for mom Google.",0,0,error); // this is is the most common error.

    if(sockfd!=-1)
        close(sockfd);
    return (void *) 0; // no internet

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:43:46.480

尝试在众所周知的开放端口（例如 80）上连接到知名主机（例如 google.com）。如果失败，则很有可能互联网已关闭。这是一个可以帮助您入门的套接字教程：[http](http://www.linuxhowtos.org/C_C++/socket.htm) ://www.linuxhowtos.org/C_C++/socket.htm 。

# delphi - Delphi XE2 pro 中的 REST 服务器

> ID：10535257
> 
> 赞同：7
> 
> 时间：2012-05-10T13:41:34.363
> 
> 标签：delphi, rest, delphi-xe2

我在 Delphi 7 的应用程序中嵌入了一个（非常简单的）自制 REST 服务器（带有 ICS + 一些 stuf），它可以工作，但不容易维护和扩展。现在我使用Delphi XE2 Pro（没有DataSnap），我会改变一个更标准的解决方案，但又简单。

这样做很容易吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T17:13:04.087

[Habari Web Components](http://www.habarisoft.com/habari_webcomponents.html)框架是用于 Delphi 2009 和更新版本的简单（商业）HTTP 服务器框架。使用[TdjRestfulComponent](http://mikejustin.wordpress.com/dwf/)它还包括一个 REST 扩展。（我是这些库的开发者）

**TdjRestfulComponent**配置可以以类似属性/注释的样式或更传统的程序样式方式完成。

所有 HTTP 方法和内容类型都可以映射到不同的匿名方法，并且仍然共享相同的资源 URI（一个 URI，不同的资源表示 - 取决于请求的内容类型）。例如，要`/myresource`以 HTML、XML 或 JSON 表示资源，可以这样配置：

```
// respond to HTML browser GET request
&Path('myresource');
&Produces('text/html');
GET(procedure(Request: TRequest; Response: TResponse)
 begin
   Response.ContentText := '<html>Hello world!</html>';
 end);

// respond to XML client
&Path('myresource');
&Produces('application/xml');
GET(procedure(Request: TRequest; Response: TResponse)
  begin
    Response.ContentText := '<xml>Hello world!</xml>';
  end);

// respond to JSON client
&Path('myresource');
&Produces('application/json');
GET(procedure(Request: TRequest; Response: TResponse)
  begin
    Response.ContentText := '{"msg":"Hello world!"}';
  end); 
```

该组件还支持路径参数：

```
&Path('orders/{orderId}/lines/{lineNo'); 
```

将解析一个 URL，如

```
http://mydomain.local:8080/context/orders/65432/lines/1 
```

into additional query parameters (`orderId=65431` and `lineNo=1`)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T15:03:57.283

我不知道它是否像要求的那么简单，但是您可以看看我们的[mORMot 框架](http://mormot.net)。

这是一个完整的 RESTful 服务器，具有客户端-服务器 ORM 和基于接口的服务（如 WCF）。它轻巧快速，但也有很多功能。

你可以做任何你想做的应用程序。例如，一些用户不使用它的 ORM，也不使用它的 SOA，而只是将它用作一个非常快速的 RESTful 服务器。

它适用于任何版本的 Delphi，从 Delphi 6 到 XE2，并且不需要特定的许可证：它也适用于 Starter 版本。甚至包括数据库连接。

它本身并不是一个“标准”，但它使用众所周知的标准，如 REST、HTTP、JSON。它具有 per-URI 内置身份验证，以及完整的 per-interface/per-method 安全策略。超过 800 页的文档，包括一整套回归测试。为了快速开始，[请查看示例](http://synopse.info/fossil/dir?name=SQLite3/Samples)- 我怀疑您可能会发现它很容易。

它像啤酒一样免费，像鸟一样免费。

# asp.net-mvc-2 - 如何使 radiobuttonFors 可以通过其文本选择？

> ID：10535260
> 
> 赞同：0
> 
> 时间：2012-05-10T13:41:39.150
> 
> 标签：asp.net-mvc-2, radiobuttonfor

我被以下内容难住了：

这是我的代码：

```
 <div class="editor-field">
                    <% foreach (string Item in HR_Applications.Helper.GetOrdersForDay(DayOfWeek.Monday))
                       { %>
                    <%= Html.RadioButtonFor(model => model.MondayOrder,Item) %>
                    <%: Item %>
                    <br />
                    <%} %>
                </div> 
```

这段代码使我的单选按钮很好。我在这里遇到的问题是我担心用户无法通过其文本选择单选按钮，而必须单击按钮本身。如何使单选按钮可以通过其文本选择？

必须使用此控件：向我提出业务需求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:42:37.183

设置您的 id`RadioButton`并将 a`label`与`for`属性一起使用。

```
<label for="<%:Item.Name%>"><%:Item.Name%></label>
<%= Html.RadioButtonFor(model => model.MondayOrder,Item, new {id = Item.Name}) %> 
```

**更新**

如果您无法将模型中的唯一值用于 Id，则使用计数器来跟踪并将其附加到您的 Id：

```
<% 
int counter = 0;
foreach ( [...])
{
   <label for="<%:Item.Name + counter%>"><%:Item.Name%></label>
[...]
counter++;

}
%> 
```

# iphone - 网络通话后 iPhone 视图不刷新

> ID：10535261
> 
> 赞同：0
> 
> 时间：2012-05-10T13:41:43.940
> 
> 标签：iphone, xcode

我已经设置了我的应用程序，以便每个应用程序进入前台，它执行一个 Web 调用，从 Web 服务器调用信息，它接收并解析 JSON，然后将其离线存储。

我的应用程序是一个选项卡式应用程序，每个屏幕的信息都是从 JSON 设置的，图像也是从服务器中提取的。所以我希望每个页面上的信息在完成后更新，但它没有更新。

我暂时从模拟器运行我的应用程序，以防万一。目前，我可以获得更新信息的唯一方法是使用该 viewDidAppear 或停止并从 xCode 重新启动应用程序。

我尝试从 AppDelegates 调用类 viewDidLoad

```
 - (void)applicationWillEnterForeground:(UIApplication *)application
{
    /*
     Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
     */

   WebCalls *wc = [[WebCalls alloc] init];

    DashboardVC *db = [[DashboardVC alloc] init];

    [wc setWebCallDidFinish:^(NSString * json, NSString *ID) {

        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *docDir = [paths objectAtIndex: 0];
        NSString *docFile = [docDir stringByAppendingPathComponent: @"json.txt"];
        [json writeToFile:docFile atomically:NO encoding:NSUTF8StringEncoding error:Nil];

        NSString *docDir2 = [paths objectAtIndex: 0];
        NSString *docFile2 = [docDir2 stringByAppendingPathComponent: @"theID.txt"];
        [ID writeToFile:docFile2 atomically:NO encoding:NSUTF8StringEncoding error:Nil];

        [db testme];
    }];
    [wc getData];

} 
```

这会再次调用 viewDidLoad，但信息不会更新。任何想法为什么？

编辑：在那个类中，它像这样读取 JSON

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *docDir = [paths objectAtIndex: 0];
        NSString *docFile = [docDir stringByAppendingPathComponent: @"json.txt"];
        [json writeToFile:docFile atomically:NO encoding:NSUTF8StringEncoding error:Nil]; 
```

我可以将 JSON 打印出来，而且 JSON 肯定在更新，但屏幕上的信息却没有。

编辑：通过网络电话更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:58:49.147

您也许可以尝试使用委托方法将获取的数据更新到 UI 中。JSON解析结束后调用委托方法。我对 xml 解析做同样的事情，它正在工作。

*   (void)parserDidEndDocument:(NSXMLParser *)parser {

    [self.delegate optimizeAndDrawShortestPath:coordinatesArray];

    [routeArray 发布]; 路由数组 = 无；}

检查上面的例子。这是我对 xml 文档的解析结束的方法。然后正如您在第一行中看到的那样，我调用了一个委托方法来更新 UI 并在地图上绘制线条。委托方法在调用我的解析类对象的类中实现。

我假设，您对 JSON 的处理也与我对 XML 的处理类似。要了解协议和委托方法，[请查看此 SO 答案。](https://stackoverflow.com/a/1218098/1169310)

我很确定，这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:18:24.867

修复了这个问题。在应用程序中设置定期网络调用，当进行网络调用时，调用类中的刷新方法。

# asp.net-mvc-3 - 如何在按下按钮时从多个 MVC3 Telerik 控件中获取值并过滤屏幕上的其他控件？

> ID：10535265
> 
> 赞同：0
> 
> 时间：2012-05-10T13:41:59.050
> 
> 标签：asp.net-mvc-3, razor, telerik-mvc

我有几个 Telerik DropDownList 控件和一个 RangeSlider，我想在其上设置值，然后有一个按钮将其应用于另一组控件（向下过滤数据）

如何获取 3 个不同控件的值并将其应用于图表？

使用客户端 API 和 javascript 是唯一的方法吗？或者我可以用模型以某种方式拉它吗？

我尝试做一个 HTTP Post 并且返回给 Action 的模型都是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T05:47:41.547

您肯定需要使用 JavaScript。单击按钮时，您将需要使用 Chart 对象的**重新绑定**方法（在此处查看如何正确使用它[http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-chart-client -api-and-events.html](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-chart-client-api-and-events.html)）将您的值发送到服务器并重新绑定图表

您还需要使用[DropDowns](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-combobox-client-api-and-events.html#value)和[Slider](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-slider-client-api-and-events.html#value)的客户端方法- 来获取值。

# java - 标签 android 应用程序

> ID：10535266
> 
> 赞同：0
> 
> 时间：2012-05-10T13:42:01.100
> 
> 标签：java, android, xml, tabs

我在一个有 3 个选项卡的应用程序上，我在`onCreate()`每个 tabActivity 的函数中放置了一个显示文本的 toast，当我按下选项卡时它显示了 toast，当我再次按下选项卡时它不显示我！

所以，我的问题会`onCreate()`运行一次吗？如果是的话，我怎样才能更新它里面的任何东西，比如 ListView 内容等等..

我是安卓新手。。。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:09:31.990

是的 onCreate 只运行一次。

通常，您会通过用户交互或在后台运行的线程来更新代码。

如果您想在每次单击选项卡时执行某些操作，则需要创建一个侦听器来侦听来自用户的选项卡交互。或者，您可以使用 onResume() 或 onStart() 方法（尽管在其他情况下也会调用这些方法）。有关更多信息，请查看[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)。

# css - Opa：自定义引导 css

> ID：10535275
> 
> 赞同：1
> 
> 时间：2012-05-10T13:42:27.117
> 
> 标签：css, twitter-bootstrap, opa

我想使用 Opa 提供的 Bootstrap 绑定，但我想使用自定义版本的 Bootstrap，即我自己的 css。

例如，我想更改 hero-unit 的背景颜色。

我怎样才能做到这一点 ？

塔克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:57:59.563

只需添加一个 css 文件并覆盖引导 css 类。

例如，如何将 CSS 添加到您的应用程序中：

```
Server.start(
    Server.http,
    [ {resources: @static_resource_directory("resources")}
      , {register: ["resources/css.css"]}
      , {title: "Chat", page:start }
    ]
); 
```

（摘自[http://doc.opalang.org/manual/Hello--chat](http://doc.opalang.org/manual/Hello--chat)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:15:46.270

如果您只想使用 Opa 引导小部件[WBootsrap](http://doc.opalang.org/module/stdlib.widgets.bootstrap/WBootstrap)，而不使用嵌入 CSS，则只需`import stdlib.widgets.bootstrap`.

然后，使用 Cedrics 的方法来包含您自己的 Bootstrap CSS。

# java - *Manager 类在某些情况下可以维持它们的存在吗？

> ID：10535291
> 
> 赞同：1
> 
> 时间：2012-05-10T13:43:14.547
> 
> 标签：java, design-patterns

我最近读到调用类 **Manager* 是一件坏事，因为它们的名称不准确，并且它们可能成为上帝的对象。但是，为处理同一业务对象的不同类的多个不同方法提供*“Manager”作为包装器是否是一种好习惯？*

假设我的调用者想要与订单交互。将各种方法混合到一个 **Manager* 类中是否更好，该类只会将它们委托给适当的类，或者让调用者自己使用适当的类。

所以

```
OrderManager orderManager = new OrderManager();
orderManager.cancelOrder(order); -> delegates to OrderShredder
orderManager.sendOrder(order, destination); -> delegates to OrderSender 
```

或者

```
new OrderShredder().cancelOrder(order);
new OrderSender().sendOrder(order, destination); 
```

那些比简单委托更多的类呢（它们使用多个委托，以正确的顺序执行它们或根据委托的某些结果选择下一条路径）。这些类型的方法（如下所示）可以在某种管理器类中吗？

```
public Order makeOrder(List<Product> products, Customer customer) {
    BigDecimal orderValue = this.productPriceCalculator.calculatePrice(products, customer);
    Order order = this.orderCreator.createOrder(products, customer, orderValue);
    boolean orderIsOk = this.orderValidator.validate(order);
    if (orderIsOk) {
        OrderStatistics orderStatistics = this.orderEvaluator.evaluate(order);
        boolean orderValueIsBigEnough = orderStatistics.isValueBigEnough();
        if (orderValueIsBigEnough) {
            this.orderSender.sendInformationAboutOrderSomewhere(order, orderStatistics);
        }
    }
    else {
        throw OrderNotOkException(order);
    }

    return order;
}

public void cancelOrders(Customer customer) {
    List<Order> customerOrders = this.ordersStorage.getOrders(customer);
    for (Order order : customerOrders) {
        orderShredder.cancelOrder(order);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:17:01.237

为什么您认为需要将*业务逻辑* 放入*业务逻辑对象***中**？

 *```
new OrderShredder().cancelOrder(order); 
```

怎么样

```
order.cancel() 
```

并且实际上不在乎这个调用本身是否调用`OrderShredder`（如果你真的需要这个）？这是对对象的*命令*，你[告诉它要做的事情](http://pragprog.com/articles/tell-dont-ask)。它是怎么做的，你不在乎。

运行 service/manager/whatever 类的方法并查看第一个参数的静态类型。尝试通过实际分配行为来使业务逻辑对象了解它们自己，从而消除这些类。

对于事物的命名方面：有一篇非常好的[文章，关于](http://www.dotnetpro.de/articles/onlinearticle4046.aspx)将语言学应用于命名问题的鼬鼠词（不幸的是不是免费的德语）。我不记得确切的细节，但论点是，以`-er`or结尾`-or`的实词是名词化*动词*，通常应该尝试摆脱这些，而不仅仅是`Manag-er`.*

# android - Android在listView中设置图像

> ID：10535292
> 
> 赞同：1
> 
> 时间：2012-05-10T13:43:15.263
> 
> 标签：android, image, listview, bitmap, drawable

所以我有这个列表视图和我为它制作的自定义 XML 文件。

在该文件中，有一个没有源集且具有固定 id 的图像。

我想将此图像源更改为可绘制文件夹中的资源之一。

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
>
<ImageView 
 android:id="@+id/listImage"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:contentDescription="protection image"
 android:layout_marginTop="10dp"
/>
<LinearLayout 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:layout_marginLeft="10dp"
>
<TextView android:id="@+id/text1" 
android:textSize="20dp"  
android:textStyle="bold"
android:layout_width="fill_parent"
android:layout_height="fill_parent"/>
<TextView android:id="@+id/text2"
android:textSize="12dp" 
android:layout_marginTop="5dp"
android:layout_width="wrap_content" 
android:layout_height="fill_parent"/>
</LinearLayout>
</LinearLayout>

</LinearLayout> 
```

这是我到目前为止所尝试的，它崩溃了：

```
 adapter=new SimpleAdapter(this, listItems, R.layout.custom_row_view,new String[]{"name", "current"},  new int[] {R.id.text1, R.id.text2});
    ImageView img;
    img = (ImageView) findViewById(R.id.listImage);
    Drawable d = getResources().getDrawable(R.drawable.opened);
    img.setImageDrawable(d);
    setListAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:50:10.300

```
ImageView img;
    img = (ImageView) findViewById(R.id.listImage); 
```

这意味着您指的是布局中存在的对象，您可以将其用于 Activity 的**setContentView()**。但是您的 ImageView 不存在于该布局中。

在这里，您尝试使用 ListView 来引用它。所以很明显你得到了空指针异常。

您还必须使用自定义适配器。尝试以下链接中的一个。

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter)

[http://www.mkyong.com/android/android-listview-example/](http://www.mkyong.com/android/android-listview-example/)

# c# - TryUpdateModel 更新顺序

> ID：10535297
> 
> 赞同：0
> 
> 时间：2012-05-10T13:43:29.633
> 
> 标签：c#, asp.net-mvc

有没有办法在执行期间控制更新顺序`TryUpdateModel`？我需要一个属性有效才能更新其他属性，但默认情况下，当另一个属性正在更新时，第二个属性仍然为空。

默认更新顺序是什么？奇怪的是，我的代码中需要的属性首先在模型和表单中声明。我在 Internet 上找不到有关此执行顺序的任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:45:49.070

> 在执行 TryUpdateModel 期间有什么方法可以控制更新顺序？

不，不能保证任何订单，您永远不应该指望任何订单。这就是为什么你应该在模型完全绑定而不是在你的视图模型设置器中执行验证的原因。

您可以使用数据注释属性，或者一旦您意识到它们有多么有限（尤其是在条件验证和更复杂的验证场景方面），切换到与 ASP.NET MVC[很好地集成的](http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation)[FluentValidation.NET](http://fluentvalidation.codeplex.com/)，我强烈推荐您使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:46:39.223

据我所知，活页夹获取属性以便在类中输入它们。最后我看到它做了一个 GetProperties，这就是方法加载的方式。

但是，因为这是一个私有实现，所以不要指望它。如果您有这种约束，请创建您自己的 ModelBinder。

# delphi-xe2 - 在datasnap客户端执行动态sql

> ID：10535301
> 
> 赞同：1
> 
> 时间：2012-05-10T13:43:46.827
> 
> 标签：delphi-xe2, datasnap

是否可以在 datasnap 服务器和客户端之间共享数据库连接？

我想在客户端执行动态 sql 并接收结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T13:08:12.110

我找到了两种在客户端执行动态 sql 的方法

1) 使用 DbxConnection (dbExpress)

```
// Server code
function TServerMethods1.GetConnection: TDbxConnection;
begin
  Result := DBConnection.DBXConnection;
end;

//Client code
dbxConnection := ServerMethods.GetConnection;
command := dbxConnection.CreateCommand;
command.Text := 'SELECT COUNT(1) FROM clients WHERE name LIKE :name';
param := com.CreateParameter;
param.Name := 'name';
param.DataType := TDBXDataTypes.WideStringType;
param.Value.SetString('%name%');
command.Parameters.AddParameter(param);
reader := command.ExecuteQuery;
reader.Next; // to Fetch row
ShowMessage(reader.Value[0].AsString); 
```

2) 使用 DataSet 后代

**服务器端组件**

ServerMethods 类必须是 TDSServerModule 的后代

*   TConnection 后代
*   TQuery 后代
*   TDataSetProvider（将 poAllowCommandText 设置为 true）

**客户端组件**

*   TSqlConnection（用于 DataSnap 连接）
*   TDsProviderConnection（用于 DataSnap 服务器方法）
*   TClientDataSet（集合提供者）

执行查询的代码

```
CDS.Close; // TClientDataSet
CDS.CommandText := 'SELECT COUNT(*) FROM clients WHERE name LIKE :name';
CDS.Params.ParamByName('name').AsString := '%name%';
CDS.Open;
ShowMessage(CDS.Fields[0].AsString); 
```

* * *

**服务器端代码：**

主要方法.pas

```
TMainMethods = class(TDSServerModule)
  PgQuery: TPgQuery;
  PgQueryProvider: TDataSetProvider;
  PgConnection: TPgConnection;
end; 
```

主要方法.dfm

```
object MainMethods: TMainMethods
  Height = 248
  Width = 440
  object PgConnection: TPgConnection
    Left = 200
    Top = 32
    ...
  end
  object PgQuery: TPgQuery
    Connection: PgConnection
    Left = 32
    Top = 24
  end
  object PgQueryProvider: TDataSetProvider
    DataSet = PgQuery
    Options = [poAllowCommandText, poUseQuoteChar]
    Left = 120
    Top = 24
  end
end 
```

**客户端代码：**

客户端.pas

```
TVerusClient = class(TDataModule)
  dbxVerusConnection: TSQLConnection;
  dbxSqlConnectionProvider: TDSProviderConnection;
  cdsSqlDataSet: TClientDataSet;
end; 
```

客户端.dfm

```
object VerusClient: TVerusClient
  Height = 271
  Width = 415
  object dbxVerusConnection: TSQLConnection
    DriverName = 'DataSnap'
    LoginPrompt = False
    ...
  end
  object dbxSqlConnectionProvider: TDSProviderConnection
    ServerClassName = 'TMainMethods'
    SQLConnection = dbxVerusConnection
    Left = 176
    Top = 32
  end
  object cdsSqlDataSet: TClientDataSet
    ProviderName = 'PgQueryProvider'
    RemoteServer = dbxSqlConnectionProvider
    Left = 176
    Top = 104
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:32:22.160

DataSnap（多层）应用程序的主要目标是安全性。您不能在远程模式下直接（本机）共享对象（连接、资源），但您可以在 Session 上更改数据集的 SQL。但它并不安全。

```
// Server Code
procedure TMyServerMethod.ChangeSQL(ASQL:string); // insecure
begin
  AdoQuery1.Active:=false;
  AdoQuery1.SQL.Text:=ASQL; // AdoQuery,DbxExpress,UniDAC,AnyDac,...    
  AdoQuery1.Active:=true;
end; 
```

为客户端使用[生成代理](http://docwiki.embarcadero.com/RADStudio/en/Generating_DataSnap_Server_Method_Proxies)

```
// Client Code
procedure TForm1.Button1Click(Sender:TObject);
begin
  Proxy.ChangeSQL('select * from custom_table');// but it is insecure
  // loading remote datasets
end; 
```

# java - 每天使用 log4j 为我的 spring 项目创建日志文件。

> ID：10535302
> 
> 赞同：0
> 
> 时间：2012-05-10T13:43:48.587
> 
> 标签：java, spring, log4j

我想每天为我的春季项目创建错误日志文件。我想，我可以获取系统日期并检查天气是同一天还是不同的日子，但是如果系统日期错误，我该怎么办？ CMOS电池。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:37:45.817

使用 log4j 每日滚动附加程序如下：

```
<appender name="Daily" class="org.apache.log4j.DailyRollingFileAppender">
 <param name="file" value="${catalina.home}/logs/test.log" />
 <param name="DatePattern" value="'.'yyyy-MM-dd" />
 <param name="MaxBackupIndex" value="10" />
 <layout class="org.apache.log4j.PatternLayout">
  <param name="ConversionPattern" value="[%t] %d{HH:mm:ss,SSS} %-5p %l - %m%n" />
 </layout>
</appender> 
```

至于尝试使用错误的时钟，没有选择！

希望有帮助。

# javascript - 等到jQuery中的两个值发生变化

> ID：10535307
> 
> 赞同：0
> 
> 时间：2012-05-10T13:44:04.967
> 
> 标签：javascript, jquery

我有两个表单字段，并且希望仅在两者都有值时才使用 jquery 发布这些值。我已经尝试过了，但必须有更好的方法。我认为这种方式可能会导致错误

```
$('#RFID').change(function(e){          

    if($(this).val() != '' && $('#STATION_ID').val() != ''){                

    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:47:17.477

这不是一个特别糟糕的方法。不过可以稍微清理一下。我会用这样的东西：

```
var $fields = $('#RFID, #STATION_ID').change(function(e) {
    if ($fields[0].val() && $fields[1].val()) {
        // post it
    }
}); 
```

* * *

编辑：上面的代码假设您想在拥有两个值后立即发布。再看你的问题，我可能读错了。如果您只是想阻止表单发布，除非您同时拥有这两个值，那么您真的想要这样：

```
$('form').submit(function(e) {
    if (!$fields[0].val() || !$fields[1].val()) e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:47:24.060

您可以在发布帖子之前简单地进行相同的检查：

```
if ($.trim($('#RFID').val()) != '' && $.trim($('#STATION_ID').val()) != '') {
    // do post
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:54:39.517

可能会在所有可以生成表单自动提交的字段中分配一个更改处理程序。

也许为每个可以参与自动提交的字段添加一个类。

我知道的代码不多，但设置了意图并在一个地方收集了验证。

希望能帮助到你。

```
$('.auto-submit').change(function(e) {
  // collect all the auto submit fields and make sure they are not empty
  for( field in $('.auto-submit') )
     if( field.val() == '' ) return;   // all fields not there
  }
  // do form submit here
} ); 
```

# objective-c - 如何让 MainThread 等到一些异步操作完成？

> ID：10535308
> 
> 赞同：5
> 
> 时间：2012-05-10T13:44:07.620
> 
> 标签：objective-c, ios, multithreading, uitableview, asynchronous

我有一些以**异步**方式`UITableView`加载的内容。当用户旋转设备时，我需要制作方法。在我的情况下，ReloadData 异步工作。**`[tableView reloadData]``-willRotateToInterfaceOrientation`**

 ****我知道 reloadData 在主线程中工作，但它会触发 cellForRowAtIndexPath，在我的情况下它是异步的。**

所以问题是如何让主线程等到`UITableView's reloadData`结束。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:57:59.233

您可以使用[CFRunLoopRun](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFRunLoopRef/Reference/reference.html#//apple_ref/c/func/CFRunLoopRun) 让您的主线程等待 UITableView 数据重新加载。数据重新加载后调用[CFRunLoopStop](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFRunLoopRef/Reference/reference.html#//apple_ref/c/func/CFRunLoopStop)传递 CFRunLoopGetMain 的结果[作为](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFRunLoopRef/Reference/reference.html#//apple_ref/c/func/CFRunLoopGetMain)参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T13:53:40.377

如果您从 willRotateToInterfaceOrientation 调用 reloadData，那么它会在主线程上调用。事实上，UIViews 不是线程安全的，只能从主线程处理（以防有人出于某种原因想到从另一个线程调用 reloadData）。

我认为与“异步”一词有关的混淆。像 willRotateToInterfaceOrientation 这样的 UI 委托的异步回调在主线程上调用。异步并不一定意味着不同的线程（尽管“并行”异步运行确实如此）。

我建议阅读有关 NSRunLoop 的 Apple 文档。它是 iOS 应用程序运行方式不可或缺的一部分，是应用程序程序员必须了解的。

[https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T14:26:39.593

您需要在后台加载表格数据，然后调用 UITableView 的 reloadData 方法。

您可以使用 GCD 轻松地将加载函数异步分派到后台队列。当该任务完成后，让工作线程将一个调用`[tableView reloadData]`. 就是这样：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{

  ...
  dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
  dispatch_async(queue, ^{

     // load your table data here
     [self loadMyTableData];

     // when done dispatch back to the main queue to load the table
     dispatch_queue_t mainQueue = dispatch_get_main_queue();
     dispatch_async(mainQueue, ^{

        [self.tableView reloadData];
      });
  });
  ...
} 
```**

# c - 使用 C 的 Windows 的进程间通信 (IPC)

> ID：10535313
> 
> 赞同：2
> 
> 时间：2012-05-10T13:44:22.987
> 
> 标签：c, windows, ipc, keep-alive, watchdog

我有一个用 Microsoft Visual C++ 用 C 语言编写的旧程序，我需要实现某种“keepalive”，所以我能够将它认为进程间通信接收到一个新程序中，如果它会杀死并重新启动第一个程序过去 5 秒内未收到任何消息。

问题是我一直在寻找任何 C 语言的 IPC for Windows 教程或示例，但我找到的几乎所有内容都是针对 C++ 的。

任何帮助或资源？

编辑：正如@Adriano 在答案中建议的那样，我正在尝试使用共享内存。但是由于某种我无法捕捉到的异常，Windows 正在终止启动程序。调用 CopyMemory 时发生。

代码如下：

```
#include "stdafx.h"
#include "windows.h"
#include "iostream"
using namespace std;

int launchMyProcess();
void killMyProcess();
bool checkIfMyProcessIsAlive();

STARTUPINFO sInfo;
PROCESS_INFORMATION pInfo;
HANDLE mappedFile;
LPVOID pSharedMemory;
long lastReceivedBeatTimeStamp;
const int MSECONDS_WITHOUT_BEAT = 500;
const LPTSTR lpCommandLine = "MyProcess.exe configuration.txt";

    int main(int argc, char* argv[])
    {
        mappedFile = CreateFileMapping(INVALID_HANDLE_VALUE, NULL, PAGE_READWRITE, 0, sizeof(int), "Global\\ActivityMonitor");
        LPVOID pSharedMemory = MapViewOfFile(mappedFile, FILE_MAP_READ, 0, 0, sizeof(int));
        if(!launchMyProcess()){
            cout<<"Error creating MyProcess.exe"<<endl;
            UnmapViewOfFile(pSharedMemory);
            CloseHandle(mappedFile);
            return -1;
        }
        while(true){
            Sleep(100);

            if(!checkIfMyProcessIsAlive()){
                cout<<"Relaunching MyProcess...";
                killMyProcess();
                if(!launchMyProcess()){
                    cout<<"Error relaunching MyProcess.exe"<<endl;
                    UnmapViewOfFile(pSharedMemory);
                    CloseHandle(mappedFile);
                    return -1;
                }
            }
        }

        UnmapViewOfFile(pSharedMemory);
        CloseHandle(mappedFile);
        return 0;
    }

    bool checkIfMyProcessIsAlive()
    {
        static int volatile latestMagicNumber = 0;
        int currentMagicNumber = 0;

        CopyMemory(&currentMagicNumber, pSharedMemory, sizeof(int));

        if(currentMagicNumber != latestMagicNumber){
            latestMagicNumber = currentMagicNumber;
            return true;
        }
        return false;
    }

    int launchMyProcess()
    {
        ZeroMemory(&sInfo, sizeof(sInfo));
        sInfo.cb = sizeof(sInfo);
        ZeroMemory(&pInfo, sizeof(pInfo));

        return CreateProcess(NULL, lpCommandLine, NULL, NULL, FALSE, 0, NULL, NULL, &sInfo, &pInfo);
    }

    void killMyProcess()
    {
        TerminateProcess(pInfo.hProcess, 0);
        CloseHandle(pInfo.hProcess);
        CloseHandle(pInfo.hThread);
        Sleep(3000);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:01:54.033

如果你的旧 C 应用程序有一个消息泵（因为它有一个 UI），那么检查它是否存在的最简单方法可能是[IsHungAppWindow()](http://msdn.microsoft.com/en-us/library/ms633526.aspx)函数，Windows 会为你做这些事情。

如果这不是您的情况并且您需要 IPC，则有很多选择，这取决于您要使用哪种 IPC 机制。在这里，我将仅列出一些资源。

有关 IPC 技术的概述：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa365574 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574(v=vs.85).aspx)

一些例子：

*   MSMQ： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms705205 ​​(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms705205(v=vs.85).aspx)
*   命名管道： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa365590](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365590(v=vs.85).aspx) (v=vs.85).aspx和[http://msdn.microsoft.com/en-us/library/ windows/桌面/aa365592(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365592(v=vs.85).aspx)
*   共享内存： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa366551 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551(v=vs.85).aspx)

**编辑**
我认为一个小例子将比大量的单词澄清更多。在此示例中，我将使用共享内存，但您可以使用您喜欢的任何内容（并且您觉得更舒服）。它未经测试，因此请仅作为参考使用。

MONITOR 进程应首先启动。

```
VOID CALLBACK CheckItIsAlive(PVOID lpParam, BOOLEAN TimerOrWaitFired)
{
    static int volatile latestMagicNumber = 0;

    int currentMagicNumber = 0;
    CopyMemory(&currentMagicNumber, lpParam, sizeof(int));

    if (currentMagicNumber != latestMagicNumber)
        latestMagicNumber = currentMagicNumber;
    else
    {
        // Do something, it's hanged
    }
}

void main()
{
    // Shared memory used to communicate with the other process
    HANDLE mappedFile = CreateFileMapping(INVALID_HANDLE_VALUE,
        NULL, PAGE_READWRITE, 0, sizeof(int), "Global\\MyActivityMonitor");

    LPVOID pSharedMemory = MapViewOfFile(mappedFile,
        FILE_MAP_READ, 0, 0, sizeof(int));

    // Thread used to check activity
    HANDLE queue = CreateTimerQueue();
    HANDLE hTimer = NULL;
    CreateTimerQueueTimer(&hTimer, queue, 
        (WAITORTIMERCALLBACK)CheckItIsAlive, pSharedMemory,
        0, 5000, WT_EXECUTEDEFAULT);

    // Do your work here...

    // Clean up
    DeleteTimerQueue(queue);

    UnmapViewOfFile(pSharedMemory);
    CloseHandle(mappedFile);
} 
```

MONITORED 进程，它将向 Monitor 进程发出其活动的信号。

```
VOID CALLBACK NotifyImAlive(PVOID lpParam, BOOLEAN TimerOrWaitFired)
{
    static int volatile counter = 1;

    int tick = counter++;
    CopyMemory(lpParam, &tick, sizeof(int));
}

void main()
{
    // Shared memory used to communicate with the other process
    HANDLE mappedFile = OpenFileMapping(FILE_MAP_ALL_ACCESS, FALSE,
        "Global\\MyActivityMonitor");

    LPVOID pSharedMemory = MapViewOfFile(mappedFile,
        FILE_MAP_WRITE, 0, 0, sizeof(int));

    // Thread used to signal activity
    HANDLE queue = CreateTimerQueue();
    HANDLE hTimer = NULL;
    CreateTimerQueueTimer(&hTimer, queue, 
        (WAITORTIMERCALLBACK)NotifyImAlive, pSharedMemory,
        0, 5000, WT_EXECUTEINTIMERTHREAD);

    // Do your work here...

    // Clean up
    DeleteTimerQueue(queue);

    UnmapViewOfFile(pSharedMemory);
    CloseHandle(mappedFile);
} 
```

共享内存是一种非常轻量级的资源，您可以使用任何您喜欢的计时器（如果计时不是严格要求，您可以进行某种空闲处理。我个人喜欢这个，因为您不需要锁定任何线程并且可能您有一个空闲时间处理线程）。

从 Windows 2000 开始支持定时器功能，请确保 _WIN32_WINNT 宏定义为 0x0500（或更多）。

**附录**
我没有在列表中提到，因为它们只存在于较新版本的操作系统中，但您甚至可以使用[条件变量](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682052%28v=vs.85%29.aspx)。Windows 8 将支持一个非常有用的[WaitOnAddress](http://msdn.microsoft.com/en-us/library/windows/desktop/hh706898%28v=vs.85%29.aspx)功能，但它仍然是未来，所以我认为你不能使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T15:01:30.830

从 OP 和各种评论来看，似乎主要目标是确定应用程序是否挂起。创建可以由另一个应用程序监视的某种“心跳”的一些相当简单的方法是共享内存或命名信号量。

您可以在一个进程中使用[CreateFileMapping](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366537%28v=vs.85%29.aspx)和[MapViewOfFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366761%28v=vs.85%29.aspx)来创建共享内存，然后在另一个进程中使用 MapViewOfFile 来获取指向它的指针。如果您将其创建为整数大小，则保持活动的一个简单方法是让进程每隔几秒递增一次内存中的值。另一个进程可以每隔几秒钟读取一次，以验证它是否正在发生变化。

使用命名信号量（[CreateSemaphore](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682438%28v=vs.85%29.aspx)和[OpenSemaphore](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684326%28v=vs.85%29.aspx)），您可以做基本相同的事情。让受监控的应用程序定期向它发出信号，并让监控器等待它以确保它已收到信号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:15:39.590

由于对您正在处理的平台不熟悉，这似乎是另一种情况。

如果您在评论中所说的*所有*需要​​知道的是您的程序是否还活着以便您可以杀死它，那么您甚至不需要*远程*IPC。

在您希望监控的程序开始时：

```
HANDLE hMutex = CreateMutex(NULL, FALSE, _T("MyMagicKey"));
WaitForSingleObject(hMutex, INFINITE); 
```

在“看门狗”程序中，您可以像这样检查其他实用程序是否还活着：

```
HANDLE hMutex = OpenMutex(SYNCHRONIZE, FALSE, _T("MyMagicKey"));
if (hMutex == NULL && GetLastError() == ERROR_FILE_NOT_FOUND)
   //The app being watched is already dead
else
   //whatever you want 
```

还有六种其他解决方案同样适用（或更好）。如果你的看门狗是唯一一个创建将被监控的应用程序的人，你可以等待`HANDLE`from `CreateProcess`（或`ShellExecuteEx`）。

# flash - 视频无法在 Chrome 中加载

> ID：10535314
> 
> 赞同：2
> 
> 时间：2012-05-10T13:44:26.430
> 
> 标签：flash, google-chrome, video, http-request

在嵌入了 3 个视频的页面上，有时它们中的任何一个都可能无法加载。在一页加载时，我可能会得到所有三个。另一方面，我可能一无所获。通常，它介于两者之间。

这些视频由[Longtail Video Bits on the Run](http://www.longtailvideo.com/bits-on-the-run)主持，我们使用的播放器是[Flowplayer](http://flowplayer.org/)。成功后，Chrome 的*网络*选项卡会显示视频请求正在发出，它们被重定向（通过 302/临时重定向），然后返回实际视频。

但是，当不成功时，HTTP 状态显示为`(pending)`。

![Chrome 网络标签](../Images/8b140f00fd510b1070a080dc44c6474f.png)

其余的“Big 5”浏览器可以完美地处理页面。所有视频一直在加载。它似乎已本地化为 Chrome，我不知道为什么。

我担心的实际页面在付费墙后面，但这里是为公共消费复制的相同代码：[演示页面](http://www.mckissock.com/uspap-splash/splash.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:20:20.650

这还不是答案，但我正在努力解决同样的问题，我认为你的问题可能与这个问题[有关](https://stackoverflow.com/questions/7304967/flash-net-urlrequest-call-stays-in-pending)

查看上面的帖子以及 flowplayer 似乎也在其实现中使用 URLLoader 的事实（请参阅[此处](http://flowplayer-core.googlecode.com/svn/flowplayer/tags/flow_3_1_1/src/actionscript/org/flowplayer/controller/ResourceLoaderImpl.as)的源代码），我怀疑 chrome 和 URL Loader 是共同点。

已在[此处向 Chrome 提交了一个错误](https://code.google.com/p/chromium/issues/detail?id=127649)

更新：我认为这是一个已解决的 chrome 错误，应该在即将发布的版本中修复。我无法在您的测试页面或我自己的测试页面上的每晚构建的 chrome 上复制该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:57:11.473

但是，这不是对您的具体问题的实际答案：

您正在使用自动缓冲功能，这会在网络连接上产生相当大的负载。它开始下载剪辑，即使用户没有透露播放它们的意图。并且 5 个平行的剪辑可能是一个相当大的负担，尤其是如果它们很长。

我建议您禁用自动缓冲或仅在第一个剪辑上启用它。

# javascript - 直接在 DOM 中通过 httprequest 解析 XML

> ID：10535315
> 
> 赞同：0
> 
> 时间：2012-05-10T13:44:26.463
> 
> 标签：javascript, xml, parsing, xmlhttprequest

我正在做一个 Httprequest 来获取一个 XML 文件，它运行良好！

我的 JS 功能：

```
function sendData()
{   
        var xdr = getXDomainRequest();
        xdr.onload = function() 
        {
                document.getElementById("myDiv").innerHTML = xdr.responseText;
        }

        xdr.open("GET", "myURL");
        xdr.send();
} 
```

我现在在 "#myDiv" 中附加了类似的内容：

```
<div id="myDiv">

<!--?xml version="1.0" encoding="UTF-8"?-->
<liste>
<produits>
<produit>
<nomprod>TEXT</nomprod>
<desc>TEXT</desc>
<texte>TEXT</texte>
</produit>
</produits>
</liste>

</div> 
```

现在，我想解析“#myDiv”中包含的这个 XML 并设置它的样式

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:57:24.180

如果您对框架持开放态度，则可以使用 jQuery 简单地发送一个将加载和解析 XML 的 ajax 调用。

```
$.get("myurl.xml", function(data){
    xmldata = $.parseXML(data);
}); 
```

然后，您可以迭代`xmldata`并创建和设置您自己的 HTML 表示形式。

来源：

[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

[http://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:42:37.780

调用后`xrd.send`，您将可以通过 .xml 访问 xml 文档`xrd.responseXML`。然后，您可以使用 DOM 函数来操作`xrd.responseXML`，例如，您可以`<noprod>`像这样获取 's 值：

```
var nomprod = xrd.responseXML.getElementsByTagName('nomprod')[0].firstChild.nodeValue; 
```

然后你可以对数据做任何你想做的事情。

# delphi - TComPort 行为怪异

> ID：10535316
> 
> 赞同：1
> 
> 时间：2012-05-10T13:44:31.577
> 
> 标签：delphi, tcomport

我有一个 SMS 网关，我使用 AT 命令控制该组件工作正常，但我无法正确解析从设备接收到的字符串。

首先我使用硬件流控制这对我有什么影响？

我使用 TComDataPacket 组件，女巫有一个事件 onPacket()，如果我使用调试器，我会收到一个字符串，但如果我使用 pos() 搜索或 ShowMessage() 显示字符串，则字符串非常短我没有看到任何#00

我尝试使用 RxChar 事件，但没有被触发，并且 RxBuf 给出了访问冲突。

我使用 Delphi XE 2 组件有什么问题还是我做错了什么？

LE：如果我不在方法末尾插入睡眠，事件 onPacket() 将冻结这是我的代码：

```
procedure TfrmMain.comPacketPacket(Sender: TObject; const Str: string);
var
  S,numar,coord : string;
  i,poi,rr,j,tmp2 : Integer;
const
  Readul = 'READ|';
  delim  = 'gps=';
  CMG = 'CMGL';
begin
  if pos('CMTI',Str) > 0 then
                          SendATCommand('AT+CMGL="ALL"');
  for i := 1 to Length(Str) do
    if Str[i] in ['A'..'Z','a'..'z','0'..'9','=','.'] then S := S + Str[i]
    else if Str[i] = '"' then S := S + '|';
    repeat
       poi := Pos('gps=',S);
       if poi > 0 then
       begin
          j := poi;
          repeat
            Dec(j);
            rr := PosEx(Readul,S,j);
            if rr >= poi then  rr := 0;
          until (rr>0) or (j = 1);
          numar := Copy(S,rr+Length(Readul)+1,PosEx('|',S,(rr+Length(Readul)+1)) - (rr + Length(Readul) + 1));
          ShowMessage('Trimit la numarul ' + numar);
          coord := Copy(S,poi + Length(delim),PosEx(CMG,S,poi) - poi - Length(CMG));
          S := Copy(S,poi + Length(delim),Length(S));
       end;
    until poi = 0;
    Sleep(1500);
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T00:35:50.763

这里的问题是字符串。在 XE2 中，字符串是 unicode 字符串。在 Delphi 2007 及更低版本中，字符串是 ansi 字符串。它们的大小不同。您必须通过检查 TComport 源来确定。

# jquery - 日期字段 - 数据注释 - 未验证

> ID：10535318
> 
> 赞同：0
> 
> 时间：2012-05-10T13:44:33.233
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui

在我拥有的一个 ViewModel 中，有一个 IList 类型的属性，其中就业视图模型有一些属性，其中两个是日期属性“From”和“To”

```
 [Display(Name = "From", Description = "Enter your Employment Start Date")]
    [Date(ErrorMessage = "Date selected is invalid"), DataType(DataType.Date)]
    public DateTime? From { get; set; }

    [Display(Name = "To", Description = "Enter your Employment End Date")]
    [Date(ErrorMessage = "Date selected is invalid"), DataType(DataType.Date)]
    public DateTime? To { get; set; } 
```

我正在使用 DataAnnotationExtensions 顺便说一句。

在界面上，我使用 jQuery UI datepicker 来允许用户选择日期。尽管放置了 DataAnnotations，但“To”和“From”字段未显示任何“data-val”属性。

当我将显示的日期更改为无效日期时，jQuery 不显眼的验证不会触发一条消息，指出“所选日期无效”。

**更新 - 更多信息**

```
@Html.LabelFor(m => m.Employments[i].From, new { @class = "formLabel" })    
@Html.TextBox(GetInputName(i, "From"), (@Model.Employments[i].From.HasValue ? @Model.Employments[i].From.Value.ToString("MM/dd/yyyy") : ""), new { @class = "textBox toDate dynHasDatepicker", placeholder = "mm/dd/yyyy" }) 
```

用于另一个属性“BirthDate”的相同视图/视图模型完美！

这里只有一个区别，主 ViewModel 包含两个属性： 1- BirthDate 2- 就业（EmploymentViewModel 的集合）

EmploymentViewModel 包含 From 和 To 属性。这会影响验证过程吗？

有什么理由吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:27:27.533

我可以想到两个原因之一。1）您在页面上有 Html.EnableClientScript(false) 或 2）您需要使用 Html.TextBox 的强类型版本，即。Html.TextBoxFor。在这种情况下，您可能想查看使用 Html.BeginCollectionItem，如下所示：http: [//blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-风格/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

# ruby - ruby - 文件私有方法

> ID：10535319
> 
> 赞同：3
> 
> 时间：2012-05-10T13:44:33.873
> 
> 标签：ruby, visibility

在 ruby​​ 中，有没有办法定义文件（或模块）中的每个类都可见的方法，但需要文件的文件不可见？

相关但不完全相同：我们是否可以重新定义一个方法（例如标准库类中的一个方法），使得该重新定义仅在当前文件中可见？所有其他文件应查看原始定义。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T14:11:18.340

没有也没有。

Ruby 中唯一的可见性是公共的、受保护的和私有的。没有文件级可见性的概念。你也许可以“作弊”并做这样的事情：

```
# In some file foobar.rb

class Foo
  def to_bar
    Bar.new.file_private
  end
end

class Bar
  def file_private
    raise unless caller[0].split(':')[0] == __FILE__
  end
end 
```

```
# In IRB or some other file

Foo.new.to_bar  #=> nil
Bar.new.file_private  #=> RuntimeError 
```

但这是个坏主意。不同目录中的同名文件*可能会*起作用。它也不是真正的可见性，而是在方法本身中强制执行它。

但是，实际上，您应该主要将每个类都放在自己的文件中。它使组织更好。此外，您不应依赖公共/受保护/私有。您总是可以使用`send`来调用私有方法，但以上内容*打破了*这种期望。如果您的代码的用户真的想对您的代码做某事，那么让他们做几乎没有什么，这就是动态语言的本质。如果您不记录方法，那么大多数用户甚至都不会知道它的存在`:P`。

至于你的第二个问题，没有办法在同一个类中有两个同名的方法具有不同的可见性，第二种方法总是会覆盖原来的。你可以做一些类似于我上面所做的事情，并根据条件运行不同的代码而不是引发，但如上所述，我真的不认为这是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:14:05.560

1.  在 Object 类中定义一个新方法（如属性）。如果您不想弄乱 Object 类，可以使用另一个名称，而 Foo 应该继承该类。

    ```
    class Object
      @@file_only_methods = []

      def file_only(method_name)
        method_name = method_name.to_sym
        new_method_name = "file_only_#{method_name}".to_sym
        self.send(:alias_method, new_method_name, method_name)
        self.send(:undef_method, method_name)
        self.send(:private, new_method_name)
        @@file_only_methods << method_name
      end

      def method_missing(method_name, *arg, &block)
        if @@file_only_methods.include? method_name
          if __FILE__ == $0
            self.send("file_only_#{method_name}".to_sym,*arg,&block)
          else
            raise "Method #{method_name} is called outside the definition file."
          end
        else
          raise "Method #{method_name} does not exist."
        end
      end
    end

    class Foo
      def bar
        puts 'bar method'
      end
      file_only :bar
    end

    Foo.new.bar
    #output:bar method
    Foo.new.x
    #output:no method 
    ```

    在文件 2.rb 中，

    ```
    require_relative 'file1'
    Foo.new.bar
    #output: Method bar is called outside the definition file. 
    ```

# java - 如何修复“...PlaceHistoryMapperWithFactory 不能多次实现...”

> ID：10535326
> 
> 赞同：1
> 
> 时间：2012-05-10T13:44:56.293
> 
> 标签：java, gwt

[我只是按照这里](https://stackoverflow.com/questions/10089964/places-that-share-all-but-prefix-or-how-to-use-placehistorymapperwithfactory)的建议尝试了 PlaceHistoryMapperWithFactory 。所以我的 AppPlaceHistoryMapper 看起来像这样：

```
 @WithTokenizers({ InfoPlace.Tokenizer.class, LogPlace.Tokenizer.class })
public interface AppPlaceHistoryMapper extends PlaceHistoryMapperWithFactory<TokenizerFactory> {

} 
```

我也改变了杜松子酒模块：

```
bind(PlaceHistoryMapperWithFactory.class).to(AppPlaceHistoryMapper.class); 
```

但我不会 gwt 编译。我明白了

```
[INFO] Compiling module de.stalabw.zensus2011.adb.AuswertungsDB
[INFO]    Scanning for additional dependencies: ...ClientInjectorImpl.java
[INFO]       Adding '57' new generated units
[INFO]          Validating newly compiled units
[INFO]             Ignored 1 unit with compilation errors in first pass.
[INFO] Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
[INFO]    [ERROR] Errors in '...PlaceHistoryMapperWithFactoryImpl.java'
[INFO]       [ERROR] Line 10:  The interface PlaceHistoryMapperWithFactory cannot be implemented more than once with different arguments: PlaceHistory
MapperWithFactory<Void> and PlaceHistoryMapperWithFactory
[INFO]    [ERROR] Cannot proceed due to previous errors 
```

我刚刚在我的单元测试中修复了同样的错误。我有一个模拟实现。我刚变

```
public class PlaceHistoryMapperMock extends AbstractPlaceHistoryMapper<void> implements
AppPlaceHistoryMapper 
```

到

```
public class PlaceHistoryMapperMock extends AbstractPlaceHistoryMapper<TokenizerFactory> implements
AppPlaceHistoryMapper 
```

错误消失了。但是如何为我的“真实”代码修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:25:57.880

问题可能是您`GWT.create(PlaceHistoryMapperWithFactory.class)`在代码中的某个位置（可能由 GIN 生成），生成器尝试生成一个`PlaceHistoryMapperWithFactoryImpl`类（该类名是有症状的），该类实现`PlaceHistoryMapperWithFactory`（传递给`GWT.create()`）和`PlaceHistoryMapperWithFactory<Void>`（因为生成的类扩展`AbstractPlaceHistoryMapper<Void>`）。

这实际上取决于您的依赖项如何`PlaceHistoryMapperWithFactory`在代码中声明。

IMO，你可能应该在你的代码中有依赖`PlaceHistoryMapper`，而不是一些`PlaceHistoryMapperWithFactory`. 如果您需要该依赖项（因为这是您调用的地方`setFactory`），您应该对参数化类型有一个依赖`PlaceHistoryMapperWithFactory<TokenizerFactory>`项，它必须使用以下方式在 GIN 中映射`TypeLiteral`：

```
bind(new TypeLiteral<PlaceHistoryMapperWithFactory<TokenizerFactory>>() {}).to(AppPlaceHistoryMapper.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:18:04.840

好，我知道了。问题是

```
bind(PlaceHistoryMapperWithFactory.class).to(AppPlaceHistoryMapper.class); 
```

由于没有 PlaceHistoryMapperWithFactory.class 这将绑定错误的实现。我的解决方案是提供者：

```
@Provides
@Singleton
public final PlaceHistoryMapperWithFactory<TokenizerFactory> getPlaceHistoryMapper(AppPlaceHistoryMapper hm) {
    return hm;
} 
```

这似乎有效。

# php - 需要帮助使用 Yii 框架获取 URI 段

> ID：10535331
> 
> 赞同：1
> 
> 时间：2012-05-10T13:45:18.570
> 
> 标签：php, yii, segment

Yii 框架中的分段是如何工作的？

例子....

```
http://myblog.com/index.php/controller/method/id/5 
```

如何获得5？

在 Yii 中没有参数是可能的，比如 Codeigniter`$product_id = $this->uri->segment(4);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:55:52.447

你可以通过

```
$_GET['id']; 
```

事情是这样的......

```
controller/method/param1/value1/param2/value2.... so far so forth 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:45:43.923

@itachi 的回答是正确的。

您可以使用 ：`$_GET['id']`

Yii 使用不同类型的 url 管理，使用 CUrlManager 类。这个类的[parsePathInfo()](http://www.yiiframework.com/doc/api/1.1/CUrlManager#parsePathInfo-detail "http://www.yiiframework.com/doc/api/1.1/CUrlManager#parsePathInfo-detail")函数：

> 将路径信息解析为 URL 段并将它们**保存**到**$_GET**和**$_REQUEST**。

# asp.net-mvc - 如何在 URL 中编写列表并将其传递给 ASP.NET 中的 MVC 控制器

> ID：10535333
> 
> 赞同：0
> 
> 时间：2012-05-10T13:45:21.317
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing, url-routing

我需要能够在映射到控制器的 URL 中编写列表，然后控制器在列表中执行某些操作。举个例子：

我去 [http://localhost:8080/API/ControllerID/Action/a,b,c,d](http://localhost:8080/API/ControllerID/Action/a,b,c,d)

我想将其解析为如下所示的控制器：

```
public ActionResult Action(List<string> ListItems)
{
    // do something on the list
} 
```

maproute 看起来像这样：

```
context.MapRoute(
     "ListActions",
     "API/{controller}/{action}/{ListItems}",
     new { controller = "", action = "", ListItems = ""}
); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:50:18.537

是的，可能。使用不同的分隔符，例如“-”，只要不破坏逻辑。在控制器中，您可以通过 String.Split 拆分字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:51:18.830

不要那样做，请！从安全角度来看，拥有或让长 URL 根本不安全 + IIS 将/可以限制它。

# java - Apache Commons copyURLToFile - 可以停止复制吗？

> ID：10535335
> 
> 赞同：0
> 
> 时间：2012-05-10T13:45:29.910
> 
> 标签：java, apache-commons

是否可以使用 org.apache.commons.io.FileUtils.copyURLToFile 中断下载？

我有一条单独的线程

```
org.apache.commons.io.FileUtils.copyURLToFile(new URL(url), targetFile); 
```

我想立即停止从外部下载。

谢谢！

```
threadFetch = new Thread(){
                @Override
                public void run() {
                    try {
                        isFetching = true;
                        org.apache.commons.io.FileUtils.copyURLToFile(new URL(url), targetFile);
                        isFetching = false;
                    } catch (IOException ex) {
                        Logger.getLogger(YoutubeMovieLink.class.getName()).log(Level.SEVERE, null, ex);
                    }
                }
            };
            threadFetch.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:46:44.790

我不认为 copyURLToFile() 支持这一点，您可能需要从输入流中实现逐块读取并写入文件，然后您可以在每个块之间检查是否应该停止复制。BLOCK_SIZE 是一个可调参数，取决于预期的下载大小以及它对停止信号的反应速度。

即类似于以下内容（可能有问题，实际上并没有运行它）：

```
InputStream input = new URL(url).getInputStream();
try {
OutputStream output = new BufferedOutputSteam(new FileOutputStream(targetFile));
 try {
 byte[] block[BLOCK_SIZE];
 while(!input.isEof()) {
    if(shouldBeCancelled) {
        System.out.println("Stopped!");
        break;
    }

    // read block
    int i = input.read(block);
    if(i == -1) {
         break;
    }

    // write block
    output.write(block);
 }
} finally {
   output.close();
} finally {
   input.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:57:03.517

我很确定与其他许多方法一样，此命令没有超时选项。

我在很多情况下也遇到过这种问题，所以我创建了一个小工具方法来运行超时命令，也许它可以帮助你：

```
public static <T> T runWithTimeout(Callable<T> task, int timeout) throws Exception{
    ExecutorService executor = Executors.newSingleThreadExecutor();
    Future<T> future = executor.submit(task);
    T result = future.get(timeout, TimeUnit.SECONDS);
    executor.shutdown();
    return result;
} 
```

# asp.net - 无法连接服务器Web开发

> ID：10535339
> 
> 赞同：0
> 
> 时间：2012-05-10T13:45:36.137
> 
> 标签：asp.net, sql-server, visual-studio, visual-studio-2010, sql-server-2008

我正在使用 sql server 2008 和 Visual Studio 2010

我有一个与 sqldatasource 关联的 sqldatasource 和 gridview

当我尝试执行程序时，我收到此消息：

> 无法连接到服务器开发 ASP.NET

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:54:53.293

这个页面有几个关于如何解决问题的提示：http: [//www.dotnetspider.com/forum/250134-Unable-connect-ASP-NET-development-Server.aspx](http://www.dotnetspider.com/forum/250134-Unable-connect-ASP-NET-development-Server.aspx)

谷歌来救援！

# java - 如何记录运行存储在文件中的 sql 语句的执行时间？

> ID：10535341
> 
> 赞同：3
> 
> 时间：2012-05-10T13:45:41.613
> 
> 标签：java, mysql, linux

我正在做一些与 TPC-H 相关的事情。

我在几个文件中有 sql 语句。我需要执行它们并记录执行时间，如下所示：

```
13 rows in set (0.00 sec) 
```

我还需要结果集来查看我是否得到了正确的结果。
我的平台是 linux(centOS)。

如果我手动执行此操作，我将在 mysql 中键入如下语句：

```
 shell> mysql -u tpch -p
  mysql> use tpch;
  mysql> source /home/liova/download/tpch/queries/Q1.sql;
  mysql> source /home/liova/download/tpch/queries/Q2.sql; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T14:31:20.030

**要找到执行时间**，您应该在程序开始时初始化一个日期对象，然后在程序结束时将其与另一个日期对象进行比较。这将为您提供执行所需时间的整数值。然后在任何需要的地方使用这个 int（例如将它打印到控制台、文件等）

```
Date startDate = new Date();
//Run the rest of the program
Date endDate = new Date();
int msElapsedTime = startDate.getTime() - endDate.getTime(); 
```

如果您不需要在 Java 程序中执行与查询结果相关的任何操作，则可以使用`runtime.exec()`mysql 执行查询来保持这个非常简单。这里唯一的主要缺点是您无法打印出受影响的行数：

```
Date startDate = new Date();
runtime.exec("mysql db_name < /home/liova/download/tpch/queries/Q1.sql");
Date endDate = new Date();
int msElapsedTime = startDate.getTime() - endDate.getTime(); 
```

如果你真的需要对结果做点什么，那`runtime.exec()`对你来说是不够的。继续阅读...

**要阅读 SQL 源代码**，只需将其作为文本文件阅读。如果您将 SQL 的每一行作为单独的 SQL 查询，这将是最简单的，因为否则您将不得不进行一些解析和调整。这是一次读取一行文件的[示例。](http://www.abbeyworkshop.com/howto/java/readFile/index.html)

**To run the SQL**, use JDBC. Here's a [tutorial](http://docs.oracle.com/javase/tutorial/jdbc/basics/processingsqlstatements.html) on it. Items 1 through 5 will detail everything you should need for running the sql and using the results (from establishing your sql connection to running the query to processing the resultSet object that comes back). If any of these steps cause you trouble, your best bet is to ask a separate question tailored to the specific problem you are having in the process.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:17:24.007

检查你有正确的结果。

选项 1 现场测试。可以像记录数这样简单，或者 Fred 的名字现在应该是 Bloggs。

选项 2 对上述内容的一个微妙扩展，将是一个不同的查询，它应该得到相同的结果。当我说不同时，我的意思是不同，而不是重新排序列。

选项3，我个人最喜欢的。您有一个文件，其中包含您期望的结果（csv、xml？），然后您将得到的结果与它进行比较。

所以 Test1 运行 SQLTest1.sql 以某种有用的格式将其输出到 SQLTest1.Actual，然后将其与 SQLTest1.Expected 进行比较。

一旦您获得了可接受的结果文件格式，工作就接近完成，您可以轻松地进行更多测试。

# mysql - 在 where 查询中使用 Max() 在表中查找最近的日期

> ID：10535349
> 
> 赞同：0
> 
> 时间：2012-05-10T13:46:03.673
> 
> 标签：mysql

我有 2 个表 Clients 和 Notes，在 notes 表中我记录了客户的所有活动。我正在尝试做的是查询 notes 表以查找哪些客户在过去 30 天内没有任何活动。

在昨晚和今天早上花了很多药水之后，我还没有找到一个可行的解决方案..有什么建议吗？

```
SELECT  `c`.`ClientID` , `c`.`CompanyName` , MAX(  `NtWhen` ) 
FROM  `clients` AS  `c` 
JOIN  `client-notes` AS  `n` ON (  `c`.`ClientID` =  `n`.`NtClient` ) 
WHERE  `NtText` =  'Viewed Client Details'
AND  MAX(`NtWhen`) < '2012-04-10'
GROUP BY  `NtClient` 
ORDER BY MAX(`NtWhen`) DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:49:04.090

基本原则是您需要按客户对您的笔记表进行分组，然后过滤那些组（即 use `HAVING`）仅用于最近日期在 30 天前之前的那些：

```
SELECT   NtClient
FROM     `client-notes`
GROUP BY NtClient
HAVING   MAX(NtWhen) < DATESUB(NOW(), 30) 
```

`clients`如果您需要公司名称等，您可以像以前一样加入您的桌子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:49:08.787

```
SELECT  `c`.`ClientID` , `c`.`CompanyName` , MAX(  `NtWhen` ) 
  FROM  `clients` AS  `c` 
  JOIN  `client-notes` AS  `n` ON (  `c`.`ClientID` =  `n`.`NtClient` ) 
 WHERE  `NtText` =  'Viewed Client Details'
 GROUP BY  `NtClient` 
HAVING MAX(`NtWhen`) < '2012-04-10'
 ORDER BY MAX(`NtWhen`) DESC; 
```

# iphone - 继承 QLPreviewController，navigationItem 上更改的按钮在单击“主页”后被重置

> ID：10535353
> 
> 赞同：1
> 
> 时间：2012-05-10T13:46:29.647
> 
> 标签：iphone, objective-c, ios, uinavigationitem, qlpreviewcontroller

我们有一个自定义的 QLPreviewController 实现，因此我们可以控制呈现给用户的按钮及其操作。我`viewWillAppear`在自定义类的方法中添加了以下代码：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    UIBarButtonItem *rightBarButtonItem = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemEdit target:self action:@selector(openWithPressed:)];
    UIBarButtonItem *leftBarButtonItem = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(dismissPressed:)];
    [self.navigationItem setRightBarButtonItem:rightBarButtonItem];
    [self.navigationItem setLeftBarButtonItem:leftBarButtonItem];
    [rightBarButtonItem release];
    [leftBarButtonItem release];
} 
```

预览器确实与我们的自定义按钮一起出现，并且它们按预期工作。
当用户单击“主页”按钮时，就会出现我们的问题。它接缝该`UIApplication.doEvents`方法调用`navigationItem`设置按钮方法，并将它们重置为原始值（使用原始处理程序）。
我怎样才能防止这种情况发生，或者自己处理这些事件，并用我自己的自定义按钮覆盖它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:28:27.837

我有同样的问题。您需要设置一个 NSNotification 在应用程序再次变为活动状态时调用它，然后将导航栏重置为您想要的方式

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(configureNavBar)
                                             name:UIApplicationDidBecomeActiveNotification object:nil]; 
```

# java - 如何在 Java 中设置自定义纸张大小 DocPrintJob？

> ID：10535356
> 
> 赞同：4
> 
> 时间：2012-05-10T13:46:38.727
> 
> 标签：java, printing, size, set

我正在研究用于生成和打印标签的项目。我只想设置自定义页面宽度和高度（页面宽度高于页面高度）。你能指导我如何实现这一目标吗？

谢谢！

# java - 在检票口框架中嵌入 Excel 的内容

> ID：10535370
> 
> 赞同：-1
> 
> 时间：2012-05-10T13:47:26.133
> 
> 标签：java, wicket

我想将生成的 excel 嵌入到我的网页中。我已经将 Pdf 嵌入到我的网页上，但是我的 excel(.xls) 文件有问题，请帮助我。
请告诉我如何在我的网页中嵌入 .xls 文件。非常感谢在我需要帮助的时候帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T15:46:20.620

从未尝试过这样做，但您可以：

1.  正如@rotsch 已经指出的那样，使用诸如[JExcel 之](http://jexcelapi.sourceforge.net)类的 Excel API并滚动您自己的网格。这个 wiki 页面可能有一些有用的信息：[How to work with Excel in Wicket using JExcel API](https://cwiki.apache.org/WICKET/how-to-work-with-excel-in-wicket-using-jexcel-api.html)
2.  如果它适合您的需要，请将文件嵌入到`<iframe>`. 请注意，这可能需要浏览器能够显示文件（activeX 控件等）。这是一个快速指南：[在 IFRAME 中显示内容（例如 PDF、excel、word）](https://cwiki.apache.org/WICKET/displaying-content-eg-pdf-excel-word-in-an-iframe.html)

# javascript - 未执行切换

> ID：10535375
> 
> 赞同：0
> 
> 时间：2012-05-10T13:47:41.813
> 
> 标签：javascript, jquery

我有一个正在执行的点击功能，因为 fadeToggles 工作。但是我试图制作动画的 div#overlay-sources 不是动画的。我已经将它的高度设置为 0px 开始，然后它应该被设置为 480px 的动画。动画本身有效，我已经在切换功能之外对其进行了测试。但不知何故，切换功能没有被执行。

```
$("#button-up").click(function(){
    $("#overlay-sources").toggle(
        function()
        {
          $(this).animate({height: "480px"}, 500);
        },
        function()
        {
          $(this).animate({height: "0px"}, 500);
        });

    $("#overlay-sources").fadeToggle('fast');
    $("#blackout").fadeToggle('fast');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:52:49.750

如果您不反对 jQueryUI，或者已经包含它，那么整个顶部：

```
$("#overlay-sources").toggle(
        function()
        {
          $(this).animate({height: "480px"}, 500);
        },
        function()
        {
          $(this).animate({height: "0px"}, 500);
        }); 
```

变成：

`$("#overlay-sources").slideToggle(500);`

但是不要简单地将高度CSS设置为0，`display:none`该函数将处理高度动画。

**编辑**

对不起，我弄错了。它看起来像是`slideToggle`jQuery 核心库的一部分，并且不需要 jQuery UI

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:26:29.767

这就是我需要的。

```
$("#button-up").toggle(
    function()
    {
        $("#overlay-sources").animate({top: "141px"}, 500);
        $("#blackout").fadeToggle('fast');
    },
    function()
    {
        $("#overlay-sources").animate({top: "690px"}, 500);
        $("#blackout").fadeToggle('fast');
    }
); 
```

# c# - Twitter API、C#、ASP.Net

> ID：10535376
> 
> 赞同：-4
> 
> 时间：2012-05-10T13:47:42.580
> 
> 标签：c#, twitter

我如何检索朋友列表及其详细信息（照片、姓名和姓氏）

关于朋友/关注者的最大信息

在 Twitter 中使用 C#

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:49:09.630

使用 LINQ 到 Twitter

[http://linqtotwitter.codeplex.com/](http://linqtotwitter.codeplex.com/)

一些示例代码：

```
 var friendshipResults =
            from friend in twitterCtx.Friendship
            where friend.Type == FriendshipType.Show &&
                  friend.SourceScreenName == ownerScreenName &&
                  friend.TargetScreenName == screenName
            select friend; 
```

# entity-framework - DbContext 和拒绝更改

> ID：10535377
> 
> 赞同：9
> 
> 时间：2012-05-10T13:47:48.163
> 
> 标签：entity-framework

我正在使用 RIA 服务，其中 ObjectContext 具有 RejectChanges() 方法。但是，我现在正在桌面应用程序中使用 EF 4.4，但找不到该方法。所以，我的问题是：在我允许用户对集合进行批量 CrUD 操作的场景中，我将如何恢复所有更改？我可以重新创建上下文并再次获取数据，但如果我需要将更改恢复为 1-2 个实体，这听起来非常不必要。

那么，拒绝更改的最佳方法是什么？而且，我们如何知道上下文是否正在做某事（IsBusy）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T14:47:51.690

EF 没有任何直接的“拒绝更改”操作。您可以浏览`ChangeTracker`/中的实体条目，`ObjectStateManager`并用修改后的实体的原始值覆盖当前值。您还可以分离添加的实体并将已删除的实体更改回未更改的实体，但只有在您（或内部 EF）没有更改任何独立关联（关系）的状态时，所有这些都将主要工作。如果你也使用关系，整个事情会变得更加复杂，因为你也必须恢复关系——在这种情况下，重新加载数据会更简单。

要恢复 DbContext API 中的更改，您可以尝试以下操作：

```
foreach (var entry in context.ChangeTracker
                             .Entries<YourEntityType>()
                             .Where(e => e.State == EntityState.Modified))
{
    entry.CurrentValues.SetValues(entry.OriginalValues);
} 
```

在这种情况下，我认为主要问题是您使用实体的方式 - 您允许对实时数据进行更改，EF 在后面执行其逻辑以在执行更改时保持数据一致，但稍后您决定不会保存这些更改. 在这种情况下，您应该执行以下操作之一：

*   丢弃更改的数据并重新加载整个数据集（通过重新创建上下文）
*   将此逻辑分离为不适用于实时数据并仅在真正确认修改时将数据修改推送到 EF 上下文

如果你说它做某事，上下文就是做某事。它本身永远不会变得忙碌。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-28T13:56:21.453

```
public void RejectChanges()
        {
            foreach (var entry in ChangeTracker.Entries())
            {
                switch (entry.State)
                {
                    case EntityState.Modified:
                        {
                            entry.CurrentValues.SetValues(entry.OriginalValues);
                            entry.State = EntityState.Unchanged;
                            break;
                        }
                    case EntityState.Deleted:
                        {
                            entry.State = EntityState.Unchanged;
                            break;
                        }
                    case EntityState.Added:
                        {
                            entry.State = EntityState.Detached;
                            break;
                        }
                }
            }
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-20T22:47:04.320

我知道这是一个老问题。但是，没有一个答案适合我的情况。我需要拒绝对集合中仅 1 个实体的更改。这对我有用：

```
 var objectContext = (myDbContext as IObjectContextAdapter).ObjectContext;
    objectContext.Refresh(RefreshMode.StoreWins, partMaster); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T12:54:41.307

这对我有用：

```
public void RejectChanges() {
    var context = ((IObjectContextAdapter)this).ObjectContext;
    foreach (var change in this.ChangeTracker.Entries()) {
        if (change.State == EntityState.Modified) {
             context.Refresh(RefreshMode.StoreWins, change.Entity);
        }
        if (change.State == EntityState.Added) {
             context.Detach(change.Entity);
        }
     }
} 
```

this=DbContext 在这种情况下

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-12T21:34:33.147

这可能是一个旧答案，但对任何新访问者都很有用...... Reload 函数将从数据源重新加载对象并覆盖任何现有更改，并且新加载的实体将具有未更改的状态。

```
public static void UndoEntityChanges(object Entity)
{
    <EFModelContainer>.Entry(Entity).Reload();
} 
```

# c - 如何在c中创建文件的精确副本

> ID：10535379
> 
> 赞同：0
> 
> 时间：2012-05-10T13:48:05.200
> 
> 标签：c

我想在 c 中创建文件（.bmp）的精确副本

```
#include<stdio.h>

int main()
{
    FILE *str,*cptr;

    if((str=fopen("org.bmp","rb"))==NULL)
    {
        fprintf(stderr,"Cannot read file\n");
        //return 1;
    }

    if((cptr=fopen("copy.bmp","wb"))==NULL)
    {
        fprintf(stderr,"Cannot open output file\n");
        //return 1;
    }

    fseek(str, 0, SEEK_END);
    long size=ftell(str);
    printf("Size of FILE : %.2f MB \n",(float)size/1024/1024);
    char b[2];

    for(int i=0;i<size;i++)
    {
        fread(b,1,1,str);
        fwrite(b,1,1,cptr);
    }

    fseek(cptr, 0, SEEK_END);
    long csize=ftell(str);
    printf("Size of created FILE : %.2f MB \n",(float)csize/1024/1024);
    fclose(str);
    fclose(cptr);

    return 0;
} 
```

尽管它创建了一个相同大小的文件，但 windows 在尝试查看新创建的位图副本时会引发错误。为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T13:51:53.840

在开始阅读之前，您已将输入文件的文件指针移动到文件末尾。您需要将其还原到开头。

改变：

```
fseek(str, 0, SEEK_END);
long size=ftell(str); 
```

至：

```
fseek(str, 0, SEEK_BEGIN);
long size=ftell(str);
fseek(str, 0, SEEK_SET); 
```

请注意，您的代码没有错误检查 - 如果您至少检查了结果，`fread`那么您的错误将立即显而易见。带回家的信息：在检查错误时不要偷工减料 - 它会在以后支付红利。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T13:51:47.943

您需要回到原始文件的开头，因为您不断地在 EOF 处读取，因此不会复制文件内容，只是 b[] 数组中发生的任何事情。

您没有检查 fread() 和 fwrite() 的返回码。如果您一直这样做，您可能已经从返回码中解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T16:01:24.043

这是一个复制文件的好功能！复制`char`比`char`读取整个文件要好，因为结果（如果文件太长）是缓冲区溢出！

```
double copy(char *input, char *output) {
    FILE *f_in = fopen(input, "r");
    FILE *f_out = fopen(output, "a");
    if (!f_in || !f_out) {
        fclose(f_in);
        fclose(f_out);
        return -1;
    }
    int c;
    while ((c = fgetc(f_in)) != EOF)
        fputc(c, f_out);
    fclose(f_in);
    fseek(f_out, 0, SEEK_END);
    long size = ftell(f_out);
    fclose(f_out);
    return (double)(size / 1024 / 1024); // MB
} 
```

此函数返回输出文件的 MB。如果不成功，则返回`0`。

像这样使用这个函数：

```
double output;
if ((output = copy("What ever you want to copy", "Where ever it should be printed")) != -1)
    printf("Size of file: %lf MB.\n", output); 
```

希望这会有所帮助:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T14:06:36.877

如果您检查原始文件的大小和以字节为单位的副本，它应该会告诉您问题。

此代码读取一个字节并写入一个字节。

```
#include<stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

#define KB 1024

int main()
{
    unsigned int ifd,ofd,rcnt;
    char buf[KB];

    ifd=open("orig.jpg",O_RDONLY);
    if(ifd==0)
    {
        fprintf(stderr,"Cannot read file\n");
        //return 1;
    }

    ofd=open("copy.jpg",O_WRONLY|O_CREAT);
    if(ofd==0)
    {
        fprintf(stderr,"Cannot open output file\n");
        //return 1;
    }

    while(rcnt=read(ifd,buf,KB))
        write(ofd,buf,rcnt);
} 
```

~

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-26T08:32:09.967

我复制了您的第一个代码并使用了第一个解决方案，您只需将此代码添加到您的程序中：fseek(str, 0, SEEK_SET);然后您的复制位图就会生成。

# javascript - document.onkeydown 键盘输入仅大写

> ID：10535380
> 
> 赞同：2
> 
> 时间：2012-05-10T13:48:05.217
> 
> 标签：javascript, ajax, html, canvas

我正在尝试建立一个公共墙，对于所有访问网页的人来说，它看起来都是一样的，并且在用户之间同步。我正在努力正确捕获键盘输入以应用于画布。我的功能基于document.onkeydown，可以在上述网页中引用的'script.js'中看到。当您双击一个单词并写入时，可以看到它正在工作。

不幸的是，这似乎无法捕获除大写字母之外的任何内容，我正在寻找另一种方法来解决这个问题。我已经查看了[本页](http://unixpapa.com/js/key.html)中描述的“textInput”事件，但是它似乎只受 WebKit 浏览器支持，我想构建一些通用的东西。有人可以建议另一种方法来捕获键盘输入以在画布中使用吗？或者也许我在做一些愚蠢的事情？

描述的代码在这里：

```
document.onkeydown = keyHandler;
function keyHandler(e)
{

    var pressedKey;
    if (document.all) { e = window.event;
        pressedKey = e.keyCode; }
    if (e.which) {
        pressedKey = e.which;
    }
    if (pressedKey == 8) {
        e.cancelBubble = true; // cancel goto history[-1] in chrome
        e.returnValue = false;
    }
    if (pressedKey == 27)
    {
        // escape key was pressed
        keyCaptureEdit = null;
    }
    if (pressedKey != null && keyCaptureEdit != null)
    {
        keyCaptureEdit.callback(pressedKey);
    }

}
... Later on in code describing each text object ...

keyCaptureEdit.callback = function (keyCode) {
    var keyCaptured = String.fromCharCode(keyCode);
    if (keyCaptured == "\b" ) { //backspace character
        t.attrs.timestamp = t.attrs.timestamp + 1;
        t.setText(t.getText().slice(0, -1));
    }
    else if (keyCode == 32 || keyCode >= 48 && keyCode <= 57 || keyCode >= 65 && keyCode <=  90)
    {
        t.attrs.timestamp = t.attrs.timestamp + 1;
        t.setText(t.getText() + keyCaptured);
    }            
    layer.draw();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:56:05.523

那么更改代码的一种简单方法是跟踪 shift 键：

```
 ...
    {
        keyCaptureEdit.callback(pressedKey, e.shiftKey); // <-- keep track of shift key
    }

}

...

keyCaptureEdit.callback = function (keyCode, shift) {
    var keyCaptured = String.fromCharCode(keyCode);
    // shift key not pressed? Then it's lowercase
    if (shift === false) keyCaptured = keyCaptured.toLowerCase() 
```

但这并没有考虑 CapsLock。

在 jQuery 中它非常简单，因为为您完成了正确的关键代码：

```
$(document).keypress(function(event) {
  var keyCaptured = String.fromCharCode(event.keyCode);
  console.log(keyCaptured);
}); 
```

在该示例中，控制台将根据键入的内容正确记录 P 或 p。

# asp.net - 自定义从其他 URL 资源获取数据的请求

> ID：10535383
> 
> 赞同：3
> 
> 时间：2012-05-10T13:48:18.757
> 
> 标签：asp.net

情况如下：CMS 系统（关闭源代码）没有以我们想要的方式使用友好的 URL。它添加了子地图和静态 .aspx 文件，而我们没有这样做。示例：CMS 识别：/public/submap/bla/page.aspx?id=CONTACT（本示例中的页面“联系人”）。但是我们希望这个页面的友好 URL 是这样的：**/contact**。

我的目标：在 CMS 引擎呈现页面之前，传入的请求 (/contact) 将更改为 CMS 识别的 URL (/public/submap/bla/page.aspx?id=CONTACT) 但浏览器看不到这个.

我已经在一些带有 HTTPModule（接口 IHttpModule，事件 BeginRequest）的页面上尝试过此操作，但唯一可能的方法是将 300 重定向到浏览器（它将收到“/contact”并重定向到 /public/.../page .aspx?id=CONTACT 浏览器地址工具栏显示的）。

是否有一种方法可以“伪造”CMS 引擎，该引擎将识别它自己的 URL，但在浏览器和 ASP.NET 之间是另一个 URL？

环境：IIS6 (Windows 2003) 和 .NET Framework 3.5/4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:21:56.107

Server.transfer 是解决方案。

# java - 长时间运行的应用程序（tail like）

> ID：10535388
> 
> 赞同：0
> 
> 时间：2012-05-10T13:48:36.837
> 
> 标签：java, tail, long-running-processes

我想写一个尾巴一样的应用程序。现在，这个应用程序会在后台扫描文件以查找更改，并在发生更改时触发事件。

我想运行我的应用程序，直到用户请求按 ctrl + c 退出它（默认情况下工作）。我不想仅仅通过`while(true)`像在做 ATM 那样做一个无限循环来创建大量的 CPU 负载：

```
try {
        // thread doing the monitoring
        thread.start();

        // forcing the programm not to exit
        while (System.in.available() == 0) {
            Thread.sleep(5000);
        }

    } catch (final IOException e) {
        e.printStackTrace();
    } 
```

有谁知道更优雅/更正确的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:53:47.650

我不确定你为什么首先使用线程，'tail' unix 脚本只是一个`while(true)`没有退出条件的循环。如果检测到任何更改，它会监视文件并打印更改。我认为默认情况下它会暂停 1 秒，所以基本上：

```
while(true) {
   // Code goes here. Watch file, System.out.print if it changes

   Thread.sleep(1000);
} 
```

不需要线程。但是要回答有关让您的应用程序保持活力的最佳方法的问题：只需不要从线程的`run()`方法返回。您不必加入线程，只要应用程序有一个非守护程序运行线程，它就会留在前台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:53:08.423

如果您想在不忙于等待的情况下阅读 System.in，那很容易实现。`InputStream`具有**阻塞**语义，因此您只需调用其中一种`read`方法，它将阻塞直到有可用输入。如果您正在扫描文本输入，我建议您使用`BufferedReader.readLine`. 另外，在主线程上执行此操作，没有必要再启动另一个。

# c# - 克隆行后 DataGridView 不显示数据

> ID：10535389
> 
> 赞同：1
> 
> 时间：2012-05-10T13:48:38.383
> 
> 标签：c#, .net, winforms, datagridview, datatable

Windows 窗体应用程序。C# 4.0。

基本上我有两个datagridviews dgv1 和dgv2。一个正确显示表格。我想通过单击 dgv1 中的单元格来选择和克隆从 dgv1 到 dgv2 的一些行。

但是第二个根本不显示数据。

```
 DataTable dt = new DataTable();
   dgv2.AutoGenerateColumns = true;
   private void btnAdd_Click(object sender, EventArgs e)
   {
        DataRowView currentDataRowView = (DataRowView)dgv1.CurrentRow.DataBoundItem;
        DataRow row = currentDataRowView.Row;
        // add row
        dt.ImportRow(row);
        dgv2.DataSource = dt;
    } 
```

在调试模式下，我发现

```
 ?dt.Rows.Count
        1
        ?dt.Columns.Count
        0
        ?dgv2.AutoGenerateColumns
        true 
```

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:58:05.040

您必须创建列或从另一个表复制架构！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:42:36.207

通过克隆 dgv1 的数据源来实例化 dt，即：

```
datatable dt = otherdatatable.clone() 
```

其中 otherdatatable 是 dgv1 的数据表数据源

# java - 当多行作为来自 JTextarea 的输入时，如何在文件中写入多行？

> ID：10535395
> 
> 赞同：4
> 
> 时间：2012-05-10T13:48:46.540
> 
> 标签：java, swing, file, file-io, jtextarea

我将多行作为 JTextarea 的输入，如果我将其写入文件中，那么我会发现多行写入文件中的一行

### 例子：

在 JTextArea 中：

```
I
am
a
student 
```

意思是：variable.text="I'\n'am'\n'a'\n'student"; 当我在文件中写入字符串 s 时，我得到：

```
I am a student 
```

但我希望该文件包含与我作为输入方式提供的相同的内容--->

```
I
am
a
student 
```

这是编写文件的代码：

```
 BufferedWriter out = new BufferedWriter(
       new OutputStreamWriter(
                  new FileOutputStream(file), "UTF16"));
      int size=1;
      for(Tableclass variable:tablevector)
      {
            out.write(variable.Text); 
            out.newLine();
            size++;

      }
      out.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:02:46.143

稍微好一点的版本是：

```
 try {
        PrintWriter fstream = new PrintWriter(new FileWriter("log.txt"));
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

 for(String word : jTextAreaName.getText().split("\n"))  {    
    fstream.println(word); 
} 
     fstream.flush(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T13:57:27.540

使用 out.newLine();

```
 BufferedWriter out = new BufferedWriter( 
   new OutputStreamWriter( 
              new FileOutputStream(file), "UTF16")); 
  int size=1; 
  for(Tableclass variable:tablevector) 
  { 
        out.write(variable.Text); 
        out.newLine();          
        size++; 

  } 
  out.close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T13:56:16.613

在你的字符串 char(10) 或 char(13) 中找到这个 char

```
int index = textarea.firstIndexOf(CHAR(10)); 
```

# database - 没有数据库的 Servlet 中的持久性

> ID：10535398
> 
> 赞同：1
> 
> 时间：2012-05-10T13:48:50.127
> 
> 标签：database, servlets, arraylist, save

我有以下问题：

我有一个带有以下代码的 JSP 文件：

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"     "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Mehr Tutorials gibt es auf: http://www.itblogging.de</title>
</head>
<body>

Um eine Lieferung aufzugeben bitte die folgenden Daten ausfüllen:<br />
<hr />
<form method="GET" name="Lieferung" action="LoginCheck">
Kennzeichnung<br />
<input type="text" name="ID" /><br />
Abholpunkt<br />
<input type="text" name="Start" /><br />
Lieferpunkt<br />
<input type="text" name="End" /><br />
Kontaktmail<br />
<input type="text" name="Mail" /><br />
Link<br />
<input type="text" name="Link" /><br />
<input type="submit" value="Lieferung aufgeben" />
<input type="reset" value="reset" />
</form>

</body>
</html> 
```

当我单击提交按钮时，一个 servlet 会创建以下类的对象：

```
package servlet;

public class Lieferinhalt {

    String link = "";
    String ID ="";
    String von ="";
    String nach ="";
    String mail ="";

    void setLink(String a) {
        this.link = a;
    }

    void setID(String a) {
        this.ID= a;
    }

    void setVon(String a) {
        this.von = a;
    }

    void setNach(String a) {
        this.nach = a;
    }

void setMail(String a) {
    this.mail = a;
}
} 
```

然后，servlet 将 JSP 文件中的信息放入该类的对象中，并且为了测试，它创建了一个 HTML 代码来说明对象的值。它看起来像这样：

```
package servlet;

import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class LoginCheck extends HttpServlet {
    private static final long serialVersionUID = 1L;

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
    {
         response.setContentType("text/html");
        PrintWriter out = response.getWriter();

        String id = request.getParameter("ID");
        String start = request.getParameter("Start");
        String end = request.getParameter("End");
        String mail = request.getParameter("Mail");
        String link = request.getParameter("Link");     

        Lieferinhalt a = new Lieferinhalt();
        String docType =
                "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "+
                "Transitional//EN\">\n";

        a.setID(id);
        a.setVon(start);
        a.setNach(end);
        a.setMail(mail);
        a.setLink(link);

        out.println(docType + "<HTML>\n"+
                "<HEAD><TITLE>HalloWelt</TITLE></HEAD>\n"+
                "<BODY BGCOLOR=\"#FDF5E6\""+
                "<H1>Servlet funktioniert!</H1>"+ "<br />" +
                "Die ID war: " + a.ID + "<br />" +
                "Der Startpunkt war: " + a.von + "<br />" +
                "Der Endpunkt war: " + a.nach + "<br />" + 
                "Die Mail war: " + a.mail + "<br />" + 
                "Der Link war: " + a.link + "<br />" +
                "</BODY></HTML>");

    }
} 
```

我想要做的是将此对象保存在数据库之类的东西中。我们不允许使用 SQL 和其他数据库语言。我想到了像永久 ArrayList 之类的东西。那可能吗？还是有其他/更好的方法？它们是如何工作的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:50:14.963

您可以将该 Java 对象序列化到文件系统。试试看。

格式有很多选择：Java 序列化、XML、JSON、protobuf 等。我建议使用 XML，因为解析器很容易获得并且数据是纯文本的。

# actionscript-3 - 动作脚本 2 建议

> ID：10535403
> 
> 赞同：-1
> 
> 时间：2012-05-10T13:49:07.773
> 
> 标签：actionscript-3, flash, actionscript, actionscript-2

我正在做一个关于交互的项目，鼠标在屏幕上，因此，我想通过使用 Adob​​e Flash Pro 和 Action Script2 来完成。这里是任务： - 一个简单的动画（例如：蜘蛛在屏幕上从上到下行走/跳跃） - 一旦鼠标移动，动画将反转（所有蜘蛛动画将反转并隐藏回从来的地方屏幕顶部）。- 如果鼠标在 60 秒后没有移动，动画将再次发生，直到鼠标再次在屏幕上移动（那些蜘蛛动画将再次发生）。

我创建了一个动画蜘蛛“电影剪辑”（蜘蛛动画下降） 1-我应该编写什么脚本来使动画反转？2-我如何告诉 Adob​​e 我的鼠标移动了还是没有移动，所以蜘蛛动画会发生还是反转？

顺便说一句，我是动作脚本 2.0 的初学者，我感谢任何建议和帮助 *我也可以在动作脚本 3 中执行此操作 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:29:48.810

天啊。AS2 :)

好的，首先我认为如果您创建 2 个不同的动画会更容易。一个让蜘蛛走下来。另一个要走上去。可以反转 MovieClip，但我认为如果您是初学者，请坚持使用基础知识。

你需要3个想法。

1) 蜘蛛夹。往下走。2）一个间隔（AS3中的定时器）

```
var interval:Number = setInterval(spidersComeOut, 60 * 1000); 
```

3) 鼠标移动监听器

```
root.onMouseMove = function() 
{
    //swap your spider clips
    //move the spider up again
    //reset the interval with clearInterval(interval) and restart it again.        
} 
```

这是一个非常基本的鼠标移动处理程序。希望这会对您有所帮助。这不是一个完整的解决方案。它不会开箱即用。

最后一件事。如果您是 AS2 的新手，我建议您试一试 as3。开始比较困难，但是有更多的人愿意帮助解决 AS3 问题，而不是 as2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:19:28.047

既然您说您已准备好使用 AS3，这里就是解决方案。

我假设您有一个单独的电影剪辑，其中包含您放置在主时间线/舞台上的蜘蛛动画。

1.将您的MovieClip 放在舞台上，并为其命名为“蜘蛛”。

2.在这个MovieClip里面，在第一帧放这段代码（它会处理动画的反转）

```
import flash.events.Event;

stop();

var _dir:int = 1;

addEventListener(Event.ENTER_FRAME, onEF);
function onEF(e:Event):void
{
    getNextAnimationFrame();
}

function getNextAnimationFrame():void
{
    var frameNum:int = currentFrame + _dir;
    if (frameNum < 1 || frameNum > totalFrames) 
    {
         removeEventListener(Event.ENTER_FRAME, onEF);
    }
    frameNum = Math.max(1, Math.min(totalFrames,frameNum));

    gotoAndStop(frameNum);
}

function changeDirection($dir:int):void
{
    _dir = $dir;
    removeEventListener(Event.ENTER_FRAME, onEF);
    addEventListener(Event.ENTER_FRAME, onEF);
} 
```

3.在主时间线上（在第一帧）放上这段代码：

```
import flash.utils.Timer;
import flash.events.TimerEvent;
import flash.events.MouseEvent;

var timer:Timer = new Timer(60 * 1000, 1);
timer.start();
timer.addEventListener(TimerEvent.TIMER_COMPLETE, onTime);

stage.addEventListener(MouseEvent.MOUSE_MOVE, onMove);

function onTime(e:TimerEvent):void
{
    trace("it's time");
    spiders.changeDirection(1);
}

function onMove(e:MouseEvent):void
{
    timer.reset();
    timer.start();
    spiders.changeDirection(-1);
} 
```

可以在一段代码中处理鼠标、计时器和动画，但是它现在的构建方式是**一种**OOP，如果在某个时候你决定正确构建它，那么将代码“重写”为单独的类。

# linux - Gradle 不显示任何控制台输出

> ID：10535404
> 
> 赞同：4
> 
> 时间：2012-05-10T13:49:08.367
> 
> 标签：linux, centos, gradle

我尝试在我的 CentOS 机器上运行 gradle，但它不打印任何输出。只有像**gradle -v**或**gradle -q tasks**这样的东西会带来一些非常基本的信息。主要问题是，我得到一个编译错误，但它没有告诉我它在哪里。

```
FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':compileJava'.
Cause: Compile failed; see the compiler error output for details. 
```

已设置 JAVA_HOME 和 GRADLE_HOME。类路径为空。有任何想法吗？

```
gradle -v

Gradle 1.0-milestone-7

Gradle build time: Thursday, January 5, 2012 10:24:43 AM UTC
Groovy: 1.8.4
Ant: Apache Ant(TM) version 1.8.2 compiled on December 20 2010
Ivy: 2.2.0
JVM: 1.6.0_24 (Sun Microsystems Inc. 19.1-b02)
OS: Linux 2.6.18-274.17.1.el5 amd64 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:07:15.907

编译器错误输出应显示在消息*上方*`FAILURE: Build failed with an exception`。`-q`提供的输出比正常*少*，但您可以尝试`-i`. 您还可以使用 . 查看堆栈跟踪`-S`。最后但同样重要的是，我建议尝试更新的 Gradle 版本（例如 1.0-rc-3）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-18T09:30:07.467

我遇到了同样的问题，并意识到我正在学习使用比我的 gradle 更低版本的 gradlew 的教程。因此，例如，而不是：

```
gradle wrapper --gradle-version 2.13 
```

只需使用您的 gradle 版本或简单地：

```
gradle wrapper 
```

这将自动这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-07T15:33:56.347

我在谷歌搜索时发现了这个问题，因为我使用的是 Gradle，但我自己的代码的控制台输出在测试期间没有被记录到命令行。而不是我自己的调试语句的记录输出，我只得到非常有限的输出，如下所示：

```
$ ./gradlew clean build

> Task :integrationTest

SystemTest > MyApp system test FAILED
    org.opentest4j.AssertionFailedError at SystemTest.java:40

1 test completed, 1 failed

> Task :integrationTest FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':integrationTest'.
> There were failing tests. See the report at: file:///Users/me/repos/myFolder/my-app/build/reports/tests/integrationTest/index.html

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.

* Get more help at https://help.gradle.org

Deprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.

You can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.

See https://docs.gradle.org/7.1/userguide/command_line_interface.html#sec:command_line_warnings 
```

我发现*调试语句实际上被正确记录了*。我只需要转到引用的测试输出 HTML 文件并单击“*标准输出*”按钮。在那里，我记录的所有调试语句都存在。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-10T13:54:12.717

如果 CLASSPATH 是问题，请在运行命令之前设置它；或者更好的是，将它设置在您的`.bashrc`（或您选择的任何外壳）中。

```
export $CLASSPATH=/path/to/java/ 
```

# c# - 如何从 chrome 中的 url 中清除哈希

> ID：10535416
> 
> 赞同：1
> 
> 时间：2012-05-10T13:49:40.627
> 
> 标签：c#, javascript, asp.net, url-rewriting, scriptmanager

我正在使用 url 中的 location.hash，因为我需要在 url 末尾添加一些额外的数据（如`...com/page#something`）。
但在那之后，我转到其他一些不应该在 url 中有散列的页面，并且以某种方式在那个 url ( `home.com#hash`) 中出现了散列。
这只发生在chrome中，firefox很好。如果有的话，我不想在每个页面上加载清除哈希。我试过这个：

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "noHash", "window.location.hash = ' ';", true); 
```

但这只会在 chrome 中在 url 结尾留下“#”。知道如何删除它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:51:02.813

`try this`

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "noHash", "if (window.location.indexOf('#')>-1) window.location = window.location.hash.split('#')[0];", true); 
```

# php - 如何将上传的文件移动到 webroot 之外的文件夹？

> ID：10535418
> 
> 赞同：0
> 
> 时间：2012-05-10T13:49:41.157
> 
> 标签：php, upload, directory

嗨，我想在 webroot 之外创建文件夹（使用 php）并将上传的文件移动到它们。这可能吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:52:01.110

使用[`rename`](http://de2.php.net/manual/en/function.rename.php),[`copy`](http://de2.php.net/manual/en/function.copy.php)或[`move_uploaded_file`](http://de2.php.net/manual/en/function.move-uploaded-file.php)，尽管您需要确保该文件夹具有正确的权限（您的网络服务器 / php 执行用户的写入权限）。

此外，[处理文件上传](http://de2.php.net/manual/en/features.file-upload.php)可能会为您提供一些有用的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:53:01.047

使用 php 的[move_uploaded_file()](http://php.net/manual/en/function.move-uploaded-file.php)函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T13:57:10.520

在评论中链接，但需要重复：[阅读](http://php.net/manual/fr/function.move-uploaded-file.php)[文档](http://php.net/manual/en/function.mkdir.php)。

检查目录是否存在，如果不存在，则创建它：

```
if (!is_dir('/dir/path')) {
    mkdir('/dir/path');
} 
```

将您上传的文件移动到目录：

```
move_uploaded_file($_FILES["file"]["tmp_name"], "/dir/path"); 
```

# selenium-webdriver - WebDriverBackedSelenium 中的 NullPointerException

> ID：10535421
> 
> 赞同：1
> 
> 时间：2012-05-10T13:49:49.893
> 
> 标签：selenium-webdriver

我是硒的新手，仍在探索它。我正在尝试在网站上测试 ajax 元素。单击元素时，页面上的某个区域会弹出一些文本。我已经在 RC 和 WebDriver 上运行了这个测试。它工作正常。现在我想（只是出于好奇）通过 WebDriverBackedSelenium 对其进行测试。但它抛出了一个错误。代码是：

```
 import com.thoughtworks.selenium.SeleneseTestBase;
    import org.openqa.selenium.WebDriver;
    import org.openqa.selenium.WebDriverBackedSelenium;
    import org.openqa.selenium.internal.WrapsDriver;
    import org.junit.After;
    import org.junit.Before;
    import org.junit.Test;

    public class CheckElements extends SeleneseTestBase {
    @Before
    public void setUp() throws Exception {
        String baseUrl = "path/to/the/site";
        WebDriver driver = ((WrapsDriver) selenium).getWrappedDriver();
        selenium = new WebDriverBackedSelenium(driver, baseUrl);
    } 
```

错误是：

```
 java.lang.NullPointerException
             at com.CheckElements.setUp(CheckElements.java:17) 
```

我相信主要问题在于设置方法。我正在使用 selenium 独立服务器 2.0 和 junit 4.7。你能告诉我哪里错了吗？

另一个问题？？

如果我编写与下面相同的测试，则测试运行良好，但即使文本与所需内容不匹配也不会出错。

```
 import com.thoughtworks.selenium.SeleneseTestBase;
    import org.openqa.selenium.firefox.FirefoxDriver;
    import org.openqa.selenium.WebDriver;
    import org.openqa.selenium.WebDriverBackedSelenium;
    import org.junit.After;
    import org.junit.Before;
    import org.junit.Test;

     public class New extends SeleneseTestBase {

      WebDriver driver;
      @Before
      public void setUp() throws Exception {
      driver = new FirefoxDriver();
      String baseUrl = "path/to/the/link";
      selenium = new WebDriverBackedSelenium(driver, baseUrl);
  } 
```

我希望我的问题很清楚。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:35:12.717

我非常希望这是问题所在：

```
WebDriver driver = ((WrapsDriver) selenium).getWrappedDriver(); 
```

驱动程序实例可能为空。

不同之处在于您的其他测试，您明确地将其创建到 FirefoxDriver 中：

```
driver = new FirefoxDriver(); 
```

# asp.net-mvc - 设置关于条件 ASP.net MVC 的属性

> ID：10535422
> 
> 赞同：0
> 
> 时间：2012-05-10T13:49:50.910
> 
> 标签：asp.net-mvc, view, razor

有没有办法做到这一点？

```
<tr @if (i % 2 == 0) { class="odd" }> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:55:17.837

像这样试试

```
<tr class=@(i % 2 == 1 ? "odd" : "even")>...</tr> 
```

# android - Google Checkout 帐户注册错误

> ID：10535427
> 
> 赞同：1
> 
> 时间：2012-05-10T13:50:03.873
> 
> 标签：android, in-app-billing, inappsettings

我的客户属于挪威，他想注册 Google Checkout 帐户。我给了他这个注册[**链接**](http://checkout.google.com/seller/fees.html)，但他收到错误消息“**您显然是通过 Google Checkout 使用 Google Apps 帐户在线的。帐户管理员可能有权访问您的 Google Checkout 帐户中的财务数据和其他信息，或者可能会暂停您的访问此帐户。** " &"**您发送的请求无效工具**"。有没有人对此错误有任何想法或可以让我们知道我们落后的地方。任何形式的帮助都是可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:22:29.410

客户需要为其应用程序帐户启用 Checkout。

这是一篇很好的博客文章，解释了如何执行此操作：http: [//googlesmb.blogspot.com/2010/12/now-available-with-google-apps-google_08.html](http://googlesmb.blogspot.com/2010/12/now-available-with-google-apps-google_08.html)

# tmux - tmux 手册页搜索突出显示

> ID：10535432
> 
> 赞同：30
> 
> 时间：2012-05-10T13:50:25.587
> 
> 标签：tmux, gnu-screen, terminal-emulator, ansi-escape, terminfo

例如，当我`man ls`在`tmux`会话中搜索时，搜索字符串不会突出显示 - 页面会向下跳转，以便搜索字符串按预期位于缓冲区的顶行，但它没有突出显示。

不在`tmux`会话中时在同一个 shell 中执行相同的操作会导致搜索字符串突出显示。

我不知道从哪里开始寻找解决这个问题。任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-03-05T15:51:31.087

基于[Less Colors For Man Pages](http://linuxtidbits.wordpress.com/2009/03/23/less-colors-for-man-pages/) by `Gen2ly`，这是我的手册页及其操作方法：

## 预览

这是一个外壳，而不是一个网页！ ![手册页中的自定义搜索突出显示](../Images/ab1371b46b3eca1146a617b4e991e4e3.png)

# 如何

1.  （可选）我正在为[Konsole/Yakuake使用](https://github.com/dram/konsole-tomorrow-theme)[Tomorrow 主题](https://github.com/chriskempson/tomorrow-theme)；
2.  编辑您的`~/.bashrc` `~/.zshrc`等以添加：

    ```
    # Colored man pages: http://linuxtidbits.wordpress.com/2009/03/23/less-colors-for-man-pages/
    # Less Colors for Man Pages
    export LESS_TERMCAP_mb=$'\E[01;31m'       # begin blinking
    export LESS_TERMCAP_md=$'\E[01;38;5;74m'  # begin bold
    export LESS_TERMCAP_me=$'\E[0m'           # end mode
    export LESS_TERMCAP_se=$'\E[0m'           # end standout-mode
    export LESS_TERMCAP_so=$'\E[38;5;016m\E[48;5;220m'    # begin standout-mode - info box
    export LESS_TERMCAP_ue=$'\E[0m'           # end underline
    export LESS_TERMCAP_us=$'\E[04;38;5;146m' # begin underline 
    ```

3.  重新加载您的配置并尝试手册页搜索：

    ```
    . ~/.bashrc && man ls 
    ```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-12T11:23:27.087

修复。问题与`screen` `$TERM`处理斜体的方式有关。从[`tmux`常见问题解答](https://github.com/tmux/tmux/blob/master/FAQ)：

> vim 显示反向视频而不是斜体，而 less 显示斜体（或只是常规文本）而不是反向。怎么了？

这完全符合我的问题。默认情况下使用 by - 基本上，用于`$PAGER`显示`man`手册页的内容。就我而言，不是突出显示文本，而是显示常规文本。`less``man``less``less`

发生这种情况的原因：

> Screen 的 terminfo 描述缺少斜体模式，并在其位置具有突出模式，但使用与 urxvt 用于斜体的相同转义序列。这意味着寻找斜体的应用程序（如 vim）将找不到它，并且可能会转而取而代之，而要求突出的应用程序（如 less）最终会以斜体而不是反向结束。

解决方案是为 制作一个新`terminfo`文件`tmux`，让它知道支持斜体。`tmux`（在撰写本文时） FAQ的非常非常底部概述了该解决方案。

创建新`terminfo`文件后，在`tmux`: `C-b :source-file /absolute/path/to/.tmux.conf`(from [this SuperUser question](https://superuser.com/questions/188491/tmux-disregarding-the-configuration-file) ) - 这*应该*重新`tmux`加载`.tmux.conf`文件。但是，这对我不起作用，并且更改仅在重新启动`tmux`服务器后应用（关闭所有`tmux`会话，然后重新打开它们）。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-07-06T15:35:10.300

该线程已有几年历史，但仍然是最佳搜索结果，因此我正在回答最终对我有用的内容。这是基于[tmux FAQ](https://raw.githubusercontent.com/tmux/tmux/master/FAQ)。

...但是关于何时或何处替换 -256color 字符串的说明并不完全清楚。我将 gnome-terminal (v 3.16.2) 与 tmux 一起使用，这对我有用：

```
$ mkdir $HOME/.terminfo/
$ screen_terminfo="screen-256color"
$ infocmp "$screen_terminfo" | sed \
  -e 's/^screen[^|]*|[^,]*,/screen-256color|screen with italics support,/' \
  -e 's/%?%p1%t;3%/%?%p1%t;7%/' \
  -e 's/smso=[^,]*,/smso=\\E[7m,/' \
  -e 's/rmso=[^,]*,/rmso=\\E[27m,/' \
  -e '$s/$/ sitm=\\E[3m, ritm=\\E[23m,/' > /tmp/screen.terminfo
$ tic /tmp/screen.terminfo 
```

并告诉 tmux 在 ~/.tmux.conf 中使用它：

```
set -g default-terminal "screen-256color" 
```

注意：我在没有 -256color 的情况下尝试过一次，因为它不起作用（仍然看到斜体而不是突出显示），我必须在 infocmp 工作之前删除 .terminfo 目录（另一个名为 's' 的目录）下的所有内容。

# playframework - 在 Play Framework 2 中无法将 OpenID 与 Atlassian Crowd 服务器一起使用？

> ID：10535437
> 
> 赞同：2
> 
> 时间：2012-05-10T13:50:58.303
> 
> 标签：playframework, playframework-2.0, openid, atlassian-crowd

看起来 Play 2 中的默认 OpenID 丢失了一些参数。否则，Play 2 默认使用 OpenID 2，而 Crowd 使用 OpenID 1.1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T09:22:34.950

从[Crowd 2.6](https://confluence.atlassian.com/display/CROWD/Crowd+2.6+Release+Notes)开始，[支持 OpenID 2.0](https://confluence.atlassian.com/display/CROWD/Crowd+2.6+Release+Notes#Crowd2.6ReleaseNotes-OpenIDimprovements)。这应该允许您将它与 Play 的默认设置一起使用。

# safari - 在 clild 窗口关闭时无法将值发送到 iPad Safari 的 JavaScript 中的父窗口

> ID：10535439
> 
> 赞同：1
> 
> 时间：2012-05-10T13:51:03.137
> 
> 标签：safari, window.open, ipad-2

我需要使用 javascript 的 window.open 方法打开一个新的弹出窗口/选项卡，并且在关闭新选项卡/弹出窗口时必须将一些值从关闭窗口返回到父窗口。当我在我的 asp .net 应用程序中打开一个弹出窗口时，它应该与 iPad 兼容。当我使用 IE、Chrome、FireFox 和 Safari（在装有 Windows 7 的 PC 上）时，值已成功返回。

不幸的是，当我通过 iPad 访问应用程序时，相同的代码在 Safari 中失败。在 iPad 上，domObject 在新窗口打开时提示，而不是在新窗口关闭时提示返回值。

下面是代码。父窗口：

```
 <script type="text/javascript">

        function modalWin() {       
                retVal = window.open('About.aspx', 'name', 'height=255,width=250,toolbar=no,directories=no,status=no, menubar=no,scrollbars=no,resizable=no ,modal=yes');
                alert(retVal);
        }
    </script>
//HTML
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<a title="Test New Popup" onclick="modalWin();">New Popup for all browsers.</a>.
</asp:Content>
Popup window or new tab:

    <script type="text/javascript">
        function closeIt(tempValue) {
            window.returnValue = tempValue;
            window.close();
        }
    </script>

    //HTML:
<input id="btnButton1" value="btnButton1" type="button" onclick="closeIt('btnButton1');" />
<br />
<input id="btnButton2" value="btnButton2" type="button" onclick="closeIt('btnButton2');" />
<br />
<input id="btnButton3" value="btnButton3" type="button" onclick="closeIt('btnButton3');" /> 
```

# core-data - 硬核数据+iCloud场景

> ID：10535440
> 
> 赞同：3
> 
> 时间：2012-05-10T13:51:09.287
> 
> 标签：core-data, ios5, icloud

我有一个很难解决的问题。我有这种情况：

我的应用程序使用 CoreData 来存储对象，我想在设备之间实现 iCloud 同步......而我的应用程序*需要*一个初始填充数据库。

我第一次启动我的应用程序时，它将在云上填充我的数据库，并将某些 db'fields 标记为“是”为“databaseInstalled”。这些字段也在云端同步。

现在，当另一台设备第一次启动该应用程序时，我希望检索“databaseInstalled”字段以检查是否注入了一些数据，但这是错误的......

如果 databaseInstalled 为 false，我们注入数据，如果 databaseInstalled 为 true，我们等待 iCloud 同步。

问题是我异步检索persistentStoreCoordinator，因为我不想阻止正在等待从iCloud下载数据的应用程序......

那么，如果我需要填充数据库或者它已经在另一台设备上填充并且我只是从 iCloud 下载填充的数据库，我怎么能知道先验呢？

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if((__persistentStoreCoordinator != nil)) {
        return __persistentStoreCoordinator;
    }

    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: [self managedObjectModel]];    
    NSPersistentStoreCoordinator *psc = __persistentStoreCoordinator;

    // Set up iCloud in another thread:

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // ** Note: if you adapt this code for your own use, you MUST change this variable:
        NSString *iCloudEnabledAppID = @"this is a secret!";

        // ** Note: if you adapt this code for your own use, you should change this variable:        
        NSString *dataFileName = @"you do not have to know.sqlite";

        // ** Note: For basic usage you shouldn't need to change anything else

        NSString *iCloudDataDirectoryName = @"Data.nosync";
        NSString *iCloudLogsDirectoryName = @"Logs";
        NSFileManager *fileManager = [NSFileManager defaultManager];        
        NSURL *localStore = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:dataFileName];
        NSURL *iCloud = [fileManager URLForUbiquityContainerIdentifier:nil];

        if (iCloud) {

            NSLog(@"iCloud is working");

            NSURL *iCloudLogsPath = [NSURL fileURLWithPath:[[iCloud path] stringByAppendingPathComponent:iCloudLogsDirectoryName]];

            NSLog(@"iCloudEnabledAppID = %@",iCloudEnabledAppID);
            NSLog(@"dataFileName = %@", dataFileName); 
            NSLog(@"iCloudDataDirectoryName = %@", iCloudDataDirectoryName);
            NSLog(@"iCloudLogsDirectoryName = %@", iCloudLogsDirectoryName);  
            NSLog(@"iCloud = %@", iCloud);
            NSLog(@"iCloudLogsPath = %@", iCloudLogsPath);

            // da rimuovere

            //[fileManager removeItemAtURL:iCloudLogsPath error:nil];
            #warning to remove

            if([fileManager fileExistsAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName]] == NO) {
                NSError *fileSystemError;
                [fileManager createDirectoryAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName] 
                       withIntermediateDirectories:YES 
                                        attributes:nil 
                                             error:&fileSystemError];
                if(fileSystemError != nil) {
                    NSLog(@"Error creating database directory %@", fileSystemError);
                }
            }

            NSString *iCloudData = [[[iCloud path] 
                                     stringByAppendingPathComponent:iCloudDataDirectoryName] 
                                    stringByAppendingPathComponent:dataFileName];

            //[fileManager removeItemAtPath:iCloudData error:nil];
#warning to remove

            NSLog(@"iCloudData = %@", iCloudData);

            NSMutableDictionary *options = [NSMutableDictionary dictionary];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];
            [options setObject:iCloudEnabledAppID            forKey:NSPersistentStoreUbiquitousContentNameKey];
            [options setObject:iCloudLogsPath                forKey:NSPersistentStoreUbiquitousContentURLKey];

            [psc lock];

            [psc addPersistentStoreWithType:NSSQLiteStoreType 
                              configuration:nil 
                                        URL:[NSURL fileURLWithPath:iCloudData] 
                                    options:options 
                                      error:nil];

            [psc unlock];
        }
        else {
            NSLog(@"iCloud is NOT working - using a local store");
            NSLog(@"Local store: %@", localStore.path);
            NSMutableDictionary *options = [NSMutableDictionary dictionary];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];

            [psc lock];

            [psc addPersistentStoreWithType:NSSQLiteStoreType 
                              configuration:nil 
                                        URL:localStore 
                                    options:options 
                                      error:nil];
            [psc unlock];

        }

        dispatch_async(dispatch_get_main_queue(), ^{
            NSLog(@"iCloud routine completed.");

            Setup *install = [[Setup alloc] init];

            if([install shouldMigrate]) {
                HUD = [[MBProgressHUD alloc] initWithView:self.window.rootViewController.view];
                HUD.delegate = self;
                HUD.labelText = NSLocalizedString(@"Sincronizzazione del database", nil);
                [self.window.rootViewController.view addSubview:HUD];
                [HUD showWhileExecuting:@selector(installDatabase) onTarget:install withObject:nil animated:YES];
            }
            else {
                [[NSNotificationCenter defaultCenter] postNotificationName:@"setupCompleted" object:self];
            }

            //[[NSNotificationCenter defaultCenter] postNotificationName:@"icloudCompleted" object:self userInfo:nil];
            [[NSNotificationCenter defaultCenter] postNotificationName:@"setupCompleted" object:self];
        });
    });

    return __persistentStoreCoordinator;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:05:59.730

在完成与 iCloud 的同步之前，您无法知道 iCloud 中是否有可用数据。这意味着您有两个选择：

*   让用户等到同步完成。

*   使用您的默认数据库启动并尽可能合并来自 iCloud 的更改。

使用 iCloud，您需要一些[策略来解决](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/DocumentBasedAppPGiOS/ResolveVersionConflicts/ResolveVersionConflicts.html)本地数据和云数据之间的冲突，因为您必须处理用户可能同时更改多个设备上的数据的事实。一旦你有了它，很明显上面的第二个选项是更好的一个：用户可以立即开始使用你的应用程序，并且来自云的数据在可用时被合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:52:48.043

我有完全相同的问题。

查看我的问题和我对它的回答[iCloud + CoreData - 如何避免预先填充的数据重复？](https://stackoverflow.com/questions/9097541/icloud-coredata-how-to-avoid-pre-filled-data-duplication)

实际上它不能100％正常工作。如果您敢于尝试，我可以向您解释如何使其 100% 正确工作（不过我还没有尝试过）。

考虑到您有大量数据要预先填充我的解决方案，现在可能适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-07T03:17:25.983

**无法**确定数据存储是否是第一次打开。至少不在 iCloud 核心数据存储上。想想看，iCloud 也应该离线工作——也就是说，当用户与 Internet 断开连接时，所有更改都应该被缓冲，然后在连接恢复时上传。如果不让用户等待几分钟（如果设备处于离线状态，甚至无限期地等待）来询问 iCloud 的数据副本，就无法检查数据存储是否已初始化。

要解决这个问题，您需要遵循以下四个简单的准则：

*   有一种方法可以对预先填充的记录进行重复数据删除。
*   有一种方法可以识别预先填充的记录并将其与用户输入的记录区分开来。
*   每次从 iCloud 传入新的交易记录时，运行重复数据删除过程。
*   每个设备/帐户组合仅种子数据记录一次。

您可以在此处阅读更多详细信息：http: [//cutecoder.org/programming/seding-icloud-core-data/](http://cutecoder.org/programming/seeding-icloud-core-data/)

# java - 以编程方式隐藏电子表格

> ID：10535446
> 
> 赞同：0
> 
> 时间：2012-05-10T13:51:33.233
> 
> 标签：java, javascript, google-docs-api, google-apps-script

我的问题很简单：是否可以在 google docs 中以编程方式隐藏工作表？

我在google app script和java api中搜索过，但没有找到...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:48:00.037

使用 Google Apps 脚本是不可能的。如果您愿意为它加注星标以投票并收到状态通知，[则问题跟踪器中](http://code.google.com/p/google-apps-script-issues/issues/detail?id=995)有一个增强请求。

# javascript - 对象的默认功能？

> ID：10535447
> 
> 赞同：7
> 
> 时间：2012-05-10T13:51:39.130
> 
> 标签：javascript, function, object

是否可以在对象上设置默认函数，以便在我调用`myObj()`该函数时执行？假设我有以下`func`对象

```
function func(_func) {
    this._func = _func;

    this.call = function() {
        alert("called a function");
        this._func();
    }
}

var test = new func(function() {
    // do something
});

test.call(); 
```

我想`test.call()`简单地替换为`test()`. 那可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T13:54:02.623

返回一个函数：

```
function func(_func) {
    this._func = _func;

    return function() {
        alert("called a function");
        this._func();
    }
}

var test = new func(function() {
    // do something
});

test(); 
```

但是然后`this`引用*返回的函数（对吗？）或 window*，您必须缓存`this`才能从函数内部访问它（`this._func();`）

```
function func(_func) {
    var that = this;

    this._func = _func;

    return function() {
        alert("called a function");
        that._func();
    }
} 
```

# objective-c - 音频单元未声明的标识符

> ID：10535455
> 
> 赞同：0
> 
> 时间：2012-05-10T13:52:04.293
> 
> 标签：objective-c, ios, audio

我试图使用这两个链接中的代码（几乎相同的[LINK1](http://atastypixel.com/blog/using-remoteio-audio-unit/) [LINK2](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/AQRecord/RecordingAudio.html#//apple_ref/doc/uid/TP40005343-CH4-SW1)）。但即使第二个链接是苹果编导指南，也无法正常工作。

就像我说的，实际错误是在许多数据类型上“使用未声明的标识符”。为了保持简短，我将只显示前 2 种数据类型。

```
 AudioComponentInstance audioUnit;
 AudioComponentDescription desc; 
```

从我所做的搜索来看，这些应该是[这](https://developer.apple.com/library/mac/#documentation/AudioUnit/Reference/AudioComponentServicesReference/Reference/reference.html)表明它们在 AudioUnit 框架中。AudioUnit.framework 已添加到我的“将二进制文件与库链接”中，所以我不明白为什么找不到这些数据类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:19:46.993

根据上面的评论，我没有导入标题。我需要添加

```
#import <AudioUnit/AudioUnit.h> 
```

# codeigniter - codeigniter 如何为模型创建表

> ID：10535457
> 
> 赞同：1
> 
> 时间：2012-05-10T13:52:11.097
> 
> 标签：codeigniter

我需要使用 codeigniter 为我的代码库中的模型创建表，

有没有办法将这些东西导出到codeignitor？

我有代码库，但我没有数据转储，所以我需要找到一种方法来做类似 Rails 迁移之类的事情

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T15:20:35.437

使用 CodeIgniter 的 Migration 和 DBForge 类

## 迁移

[https://www.codeigniter.com/user_guide/libraries/migration.html](https://www.codeigniter.com/user_guide/libraries/migration.html)

## DBForge 数据库操作

[https://www.codeigniter.com/user_guide/database/forge.html](https://www.codeigniter.com/user_guide/database/forge.html)

**直接来自迁移的用户指南：**

```
defined('BASEPATH') OR exit('No direct script access allowed');

class Migration_Add_blog extends CI_Migration {

public function up()
{
    $this->dbforge->add_field(array(
        'blog_id' => array(
            'type' => 'INT',
            'constraint' => 5,
            'unsigned' => TRUE,
            'auto_increment' => TRUE
        ),
        'blog_title' => array(
            'type' => 'VARCHAR',
            'constraint' => '100',
        ),
        'blog_description' => array(
            'type' => 'TEXT',
            'null' => TRUE,
        ),
    ));

    $this->dbforge->create_table('blog');
}

public function down()
{
    $this->dbforge->drop_table('blog');
} 
```

# android - APK 文件无法识别外部库

> ID：10535458
> 
> 赞同：0
> 
> 时间：2012-05-10T13:52:19.017
> 
> 标签：android, apk

我对 Android 很陌生，我正在做一个显示 20 条推文的简单应用程序，问题是当我在 eclipse 上运行我的应用程序时一切都很好，但是当我构建到一个 apk 文件以在我的手机上运行时出现错误。这是我到目前为止所做的，问题出现在这种方法中：

```
public ArrayList<Tweet> getTweets(String searchTerm, int page) {
        String searchUrl = "http://api.twitter.com/1/statuses/public_timeline.json?count=3&include_entities=true";
        ArrayList<Tweet> tweets = new ArrayList<Tweet>();

        HttpClient client = new DefaultHttpClient();
        HttpGet get = new HttpGet(searchUrl);

        ResponseHandler<String> responseHandler = new BasicResponseHandler();

        String responseBody = null;
        try {
            responseBody = client.execute(get, responseHandler);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        try {
            Object obj = JSONValue.parse(responseBody); // problem here
            JSONArray array = (JSONArray) obj;
            for (int i = 0; i < array.size(); ++i) {
                JSONObject o = (JSONObject) array.get(i);
                JSONObject user = (JSONObject) o.get("user");
                Tweet tweet = new Tweet(user.get("name").toString(), o.get(
                        "text").toString(), user.get("profile_image_url")
                        .toString());
                tweets.add(tweet);
            }
        } catch (Exception e) {
            Toast.makeText(PullToRefreshListViewSampleActivity.this,
                    "Exception: " + e.getLocalizedMessage(), Toast.LENGTH_LONG)
                    .show();
        }

        return tweets;
    } 
```

我将 org.json.simple jar 用于 JSON 函数，我意识到当我构建到 apk 文件时，该 jar 不包括在内。任何人都可以解决这个问题吗？对不起我的英语，它不是我的母语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:48:57.010

如果您使用的是日食。进入项目配置 - 构建路径 - 导入/导出，并确保您的 jar 文件已标记，以便在构建时将其导出。:-)

# mongodb - 使用 ruby -mongodb-driver 修复 Mongodb

> ID：10535461
> 
> 赞同：0
> 
> 时间：2012-05-10T13:52:34.183
> 
> 标签：mongodb

是否有任何人知道修复 mongodb 的 API 是通过 ruby​​-mongodb-driver 损坏数据库的情况。

翻阅[文档](http://api.mongodb.org/ruby/1.6.2/) 似乎没有

任何人都可以确认。

或者任何人都可以建议我修复 mongod 数据库的更好方法。

目前我知道

```
./mongod --repair options

./mongo

> use [database]
> db.repairDatabase() 
```

我还看到了一个shell选项

```
 ./mongo --help 

options:
  --shell               run the shell after executing files 
```

如何编写脚本（.js）来修复给定的数据库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T02:30:14.767

对于 mongo shell，数据库名称可以作为可选参数给出。这是一个应该说明这一点的 shell 脚本。

修复.sh

```
#!/bin/sh
if [ $# -lt 1 ]
then    echo "$0 - repair mongodb database"
        echo "usage: $0 database-name"
        exit 1
fi
mongo $1 --eval 'printjson(db.repairDatabase())' 
```

这是一个 ruby​​ 1.9 等价物。

修复.rb

```
#!/bin/env ruby
require 'mongo'
if ARGV.length < 1
    puts "$0 - repair mongodb database"
    puts "usage: $0 database-name"
    exit 1
end
db = Mongo::Connection.new[ARGV[0]]
puts db.command({repairDatabase: 1}) 
```

DB 的常见问题解答和文档中有更多信息。

[http://api.mongodb.org/ruby/current/file.FAQ.html](http://api.mongodb.org/ruby/current/file.FAQ.html)

[http://api.mongodb.org/ruby/current/Mongo/DB.html](http://api.mongodb.org/ruby/current/Mongo/DB.html)

导航到一些文档并不明显——我们会考虑让它变得更好。

# javascript - 我可以从另一个函数中重新定义一个 JavaScript 函数吗？

> ID：10535463
> 
> 赞同：4
> 
> 时间：2012-05-10T13:52:46.507
> 
> 标签：javascript, function, scope

我想将函数引用“go”传递给另一个函数“redefineFunction”，并在“redefineFunction”中重新定义“go”。根据 Johnathan Snook 的说法，函数是[通过引用传递的](http://snook.ca/archives/javascript/javascript_pass)，所以我不明白为什么当我将 go() 传递给 redefineFunction() 时不会重新定义它。有什么我想念的吗？

```
// redefineFunction() will take a function reference and
// reassign it to a new function
function redefineFunction(fn) {
    fn = function(x) { return x * 3; };
}

// initial version of go()
function go(x) {
    return x;            
}

go(5); // returns 5

// redefine go()
go = function(x) {
     return x * 2;        
}

go(5); // returns 10

// redefine go() using redefineFunction()
redefineFunction(go);

go(5); // still returns 10, I want it to return 15 
```

​ 或者看我的小提琴[http://jsfiddle.net/q9Kft/](http://jsfiddle.net/q9Kft/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T14:01:32.503

学究会告诉你 JavaScript 是纯值传递，但我认为[这只会使问题](https://stackoverflow.com/q/518000/201952)变得模糊，因为传递的*值*（当传递对象时）是对该对象的*引用。*因此，当您修改对象的属性时，您正在修改原始对象，但如果您完全替换变量，您实际上放弃了对原始对象的引用。

如果你试图在全局范围内重新定义一个函数：（这是一件坏事；你通常不应该有全局函数）

```
function redefineFunction(fn) {
    window[fn] = function() { ... };
}

redefineFunction('go'); 
```

否则，您必须返回新函数并在调用方分配。

```
function makeNewFunction() {
    return function() { ... };
}

go = makeNewFunction(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T13:59:43.770

JS 中没有任何内容是“通过引用传递”的。有时会传递引用，但它们是按值传递的。区别是微妙的，但很重要——一方面，这意味着虽然你可以随意操作一个引用的对象，但你不能以任何调用者的方式可靠地*替换*对象（阅读：改变引用本身）请参阅（因为引用是按值传递的，因此只是原始引用的副本；尝试重新分配它会以与 arg 是数字或字符串相同的方式中断）。

一些牛仔会假设您正在重新定义一个全局函数并按名称混淆它以绕过按值传递的限制，但这会在您决定不在所有地方都有全局变量时引起问题。

真正的解决方案：返回新函数，让调用者决定如何处理它。（我认为从使用它们的代码中重新定义函数无论如何都是一个非常糟糕的设计决定，但是嗯。我想这*可能*是有原因的......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:15:43.507

斯诺克错了。而且我认为指出 JavaScript 中的一切都是按值传递的一点也不迂腐 (@josh3736 :)。Snook 的文章完全错了。传递原语和传递对象的工作方式完全相同。这些是等价的：

```
var x = 2;
var y = x;
y = 3; //x is STILL 2.

function stuff(y){
  y = 3; //guess what. x is STILL 2
}

stuff(x); 
```

//////////////////

```
var x = {stuff: 2};
var y = x;
y = {stuff: 3}; //x.stuff is STILL 2

function stuff(y){
  y = {stuff: 3}; //guess what. x.stuff is STILL 2
}

stuff(x); 
```

这个很重要。Java、C# 和大多数语言都以这种方式工作。*这就是为什么当你真的*想通过引用传递某些东西时，C# 有一个“ref”关键字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T14:00:21.917

您不能从函数内部修改变量，因此快速解决方法是返回值并将其分配到函数外部，如下所示

```
// log() just writes a message to the text area
function log(message) {
    $('#output').val($('#output').val() + message + "\n");
}

// redefineFunction() will take a function reference and
// reassign it to a new function
function redefineFunction() {
   newvalue = function(x) { return x * 3; };
   return newvalue;
}

// initial version of go()
function go(x) {
    return x;            
}

log(go(5)); // returns 5

// redefine go()
go = function(x) {
     return x * 2;        
}

log(go(5)); // returns 10

// redefine go() using redefineFunction()
go = redefineFunction();

log(go(5)); // returns 10, I want it to return 15 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T14:05:21.597

我相信函数是“按值传递的”。如果您将其放入`log(f(5));`函数`redefineFunction`中，它将输出 15，但`log(go(5))`之后调用时会输出 10。

如果您更改`redefineFunction`为返回该函数，然后将其分配给 go ( `go = redefineFunction()`)，它将按您的预期工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T14:05:49.637

这相当于询问您是否可以通过将任何变量作为参数传递给某个函数来重新定义它。不，您可以重新分配它，呃，重新分配它。在这种情况下，如果你`redefineFunction`返回一个函数，你可以简单地将它分配给`go`：

```
function redefineFunction() {
    var fn = function(x) { return x * e; };
    return fn;
}

function go(x) {
    return x;
}

go = redefineFunction();

go(5); // return 15 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-10T14:15:29.683

这是在 Firefox 中工作的：

```
function redefineFunction(fn) {
    window[fn] = function(x) {
        return x * 3;
    }
};

function go(x) {
    return x;
};

alert(go(5));

go=function(x) {
    return x * 2;
}

alert(go(5));

redefineFunction('go');

alert(go(5)); 
```

秘密是一个名为 go 的全局函数也被称为 window.go 和 window["go"]。
这也可以用于样式：element.style["overflow"] = "hidden" 和属性：
element["value"] = "hello there"。这是一个非常有用的知识。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-10T14:17:16.043

为什么不使用对象？像这样的东西：

```
var o = {
    go: function( x ) {
        return x;
    },

    redefineFunction: function ( fn ) {
        if (typeof fn === 'function') {
            this.go = fn;
        }
    }
}

console.log(o.go(5)); // return 5

var fn = function (x) {
  return x * 2;
};

o.redefineFunction(fn);

console.log(o.go(5));​ //return 10 
```

希望能帮助到你！

# opengl - 所有顶点的公共变量

> ID：10535467
> 
> 赞同：-1
> 
> 时间：2012-05-10T13:52:52.153
> 
> 标签：opengl, glsl

是否可以为顶点着色器中的顶点中的所有顶点维护单个变量。我的意思是在访问第一个顶点时更新变量应该在访问第二个顶点时反映出来......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:20:04.973

考虑顶点着色器的方式是所有顶点的所有着色器或多或少同时运行，至少在硬件可以支持的范围内。

因此，“在访问第一个顶点时更新变量应该在访问第二个顶点时反映”的整个想法是没有意义的——第二个顶点可能最终在第一个顶点之前被处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:22:15.340

您需要在着色器中声明统一变量，例如：

```
uniform vec3 lightDir; 
```

然后从那里传递 C/C++ 的值：

```
glUseProgram(shader_id)
GLint location = glGetUniformLocation(shader_id, "lightDir");
    if(location != -1)glUniform3f(location, x,y,z); 
```

编辑：

您可以在几何着色器（gl_VerticesIn 的循环）中迭代顶点，并设置每个顶点的数据。[http://www.lighthouse3d.com/tutorials/glsl-core-tutorial/geometry-shader-examples/](http://www.lighthouse3d.com/tutorials/glsl-core-tutorial/geometry-shader-examples/)

# asp.net - 如何处理对在另一个 Web 应用程序中引用的预编译 Web 应用程序的网页的请求？

> ID：10535468
> 
> 赞同：2
> 
> 时间：2012-05-10T13:52:56.917
> 
> 标签：asp.net, httphandler, precompiled

我们公司希望将我们的 Web 应用程序的预编译版本提供给第三方，以便他们可以向其中添加自己的页面和模块。为了实现这一目标，到目前为止，我已经完成了以下工作：

1.  将我们的主要 Web 应用程序编译为 Web 部署项目
2.  创建了一个 POC Web 应用程序，该应用程序引用了上述第 1 步产生的 DLL。

然后，我将以下静态方法添加到我们的主 Web 应用程序中，它有望处理对其预编译的 aspx 页面的请求：

```
public static bool TryProcessRequest(HttpContext context)
{
    string rawUrl = context.Request.RawUrl;
    int aspxIdx = rawUrl.IndexOf(".aspx");
    if (aspxIdx > 0)
    {
        string aspxPagePath = rawUrl.Substring(0, aspxIdx + 5);

        string aspxPageClassName = aspxPagePath.Substring(1).Replace('/','_').Replace(".aspx","");
        Assembly website = Assembly.GetAssembly(typeof(MCLLogin));
        Type pageClass = website.GetType(aspxPageClassName);
        ConstructorInfo ctor = pageClass.GetConstructor(new Type[] { });
        IHttpHandler pageObj = (IHttpHandler)ctor.Invoke(new object[] { });

        context.Server.Execute(pageObj, context.Response.Output, false);

        //alternative: invoking the page's ProcessRequest method - same results
        //System.Reflection.MethodInfo method = pageClass.GetMethod("ProcessRequest");
        //method.Invoke(pageObj, new object[] { context });

        return true;
    }
    return false; //not handled
} 
```

然后，每当我希望我们的主 Web 应用程序处理请求时，我都会在 POC Web 应用程序的`ProcessRequest()`方法中调用此方法。`HttpHandler`该代码确实成功地实例化了正确类的页面并开始处理请求。

**问题：** 我的`Page_PreLoad`处理程序中的代码抛出异常，因为`Page.Form`是**null**。我还发现`Page.Controls`集合是**空**的。

我究竟做错了什么？我应该走一条不同的道路来实现这一目标吗？

# android - Android 开发：将静态键/值对放在哪里？

> ID：10535472
> 
> 赞同：3
> 
> 时间：2012-05-10T13:53:04.827
> 
> 标签：android

我有一个静态键/值对列表，我需要将其包含在我的项目中，如下所示：

```
givenName : First Name
sn        : Last Name
mail      : Email
... snip ... 
```

我会把它放在 Android 项目的哪个位置？

谢谢埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:32:32.667

Android 提供了一个预构建的内容提供程序包装器`SharedPreferences`，该包装器专门用于在键值对中存储原语。

```
 SharedPreferences mySharedPrefs = PreferenceManager
            .getDefaultSharedPreferences(getApplication());
        mySharedPrefs.edit().putString(key, value).commit(); 
```

Where`getApplication()`仅用作获取应用程序上下文的方法。取回值

```
 SharedPreferences mySharedPrefs = PreferenceManager
            .getDefaultSharedPreferences(context);
        String value = mySharedPrefs.getString(key, null); 
```

这将返回存储的带有 key 的 String ，如果没有存储任何内容`key`，则返回。`null`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:00:44.617

您需要保存在以下位置的 XML 文件`res/values/strings.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="givenName">First Name</string>
    <string name="sn">Last Name</string>
    <string name="mail">Email</string>
</resources> 
```

以下是如何访问其他 xml 中的值：

```
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/givenName" /> 
```

或者这是您可以从 Java 代码访问值的方式：

```
String string = getString(R.string.givenName);
Log.d("Test", string); // Outputs "First Name" to LogCat console. 
```

查看[此 Android 开发指南](http://developer.android.com/guide/topics/resources/string-resource.html)以获取有关字符串资源的完整参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:17:56.440

如果您真的必须使用静态/全局变量，请将它们放入您扩展 Application 的自定义类中。像这样：

```
public classYourApplication extends Application {
    protected Bar myBar;

    public Bar getBar() { return myBar; }
    public void setBar(Bar bar) { myBar = bar; }
    ...
} 
```

声明您将通过清单使用自定义应用程序类。

```
<application
    android:icon="@drawable/ic_launcher_noteit1"
    android:label="@string/app_name" 
    android:theme="@style/App_Theme"
    android:name="YourApplication" 
    android:debuggable="true"> 
```

现在您可以使用 (YourApplication) getApplication() 从任何活动中访问您的应用程序对象。请注意，这不是推荐的方法。推荐的方法是使用单例模式。（答案取自我的问题答案之一）

# java - 当服务器 Web 服务关闭时，.Net Web 服务客户端需要很长时间才能调用失败

> ID：10535479
> 
> 赞同：0
> 
> 时间：2012-05-10T13:53:16.090
> 
> 标签：java, .net, web-services

我有一个使用 Java Web 服务的 .Net Web 服务客户端。当 Java 应用服务器关闭时，客户端需要很长时间才能引发异常。我有冗余系统，但为了获得最佳客户体验，我需要知道服务很快就会关闭，这样我才能尽快进行故障转移。

客户端是否有设置可以在服务关闭时更快地超时？

java 服务是运行在 JBoss 上的 SOAP 服务。

客户端是一个 .Net 3.5 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:59:14.233

在您的配置文件中应该有一个绑定部分。
你会看到这样的东西：

```
<binding name="BasicHttpBinding_Service" closeTimeout="00:01:00"
openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" 
```

我相信这些是您正在寻找的节点（*添加星球大战手部动作）

# sql - SQL Server CTE，如何将 CTE 表再次用于 GROUP BY

> ID：10535482
> 
> 赞同：0
> 
> 时间：2012-05-10T13:53:37.957
> 
> 标签：sql, sql-server, sql-server-2008, tsql, common-table-expression

`TableX`带有列和值

```
A   B   C   D   E   F   G   H   Level
---------------------------------------------------------------------
10  ABC 10  ABC XYZ 2   3   4   1
10  ABC 10  ABC XYZ 2   3   4   1
11  DEF 10  ABC XYZ 4   5   6   2
11  DEF 10  ABC XYZ 6   7   8   2
12  GHI 11  DEF XYZ 7   8   9   3
12  GHI 11  DEF XYZ 8   9   10  3
15  JKL 15  JKL ABC 9   10  11  1
15  JKL 15  JKL ABC 10  11  12  1
16  MNO 15  JKL ABC 13  14  15  2
16  MNO 15  JKL ABC 16  16  18  2 
```

这里`Level`不是表格中的一列，我只是为了清楚起见而添加，但 CTE 会通过将 A、B 与 C 和 D 进行比较来自动推断

对于 1 级，计算将是

```
Calc1 = (F + G - H)  
Calc2 = Calc1 + G + H 
```

2级及以后的计算公式为

Calc1 = (Calc2 Of Previous Level) 的总和 / 100
Calc2 = Calc1 + G + H - 无论级别如何，此计算都没有变化

`The calculation is cyclic`- 2 级的计算结果将需要输入到 3 级计算等等..

```
WITH Tiers (
     Level,
     A,
     B,
     C,
     D,
     E,
     Calc1,
     Calc2)
AS
SELECT 1 AS Level,
       A,
       B,
       C,
       D,
       E,
       F + G - H AS Calc1,
       (F + G - H) + G + H AS Calc2
 FROM TableX
WHERE A = C
  AND B = D
UNION ALL
SELECT tier.Level + 1 AS Level,
       A,
       B,
       C,
       D,
       E,
       /* How can I do this SUM (tier.Calc1) / 100 */
       /* How can I do this SUM (tier.Calc1) / 100 + G + H */
 FROM TableX tab
 INNER JOIN Tiers tier
    ON tab.C = tier.A
   AND tab.D = tier.B
   AND tab.E = tier.E
WHERE (A <> C
   OR B <> D)
)
SELECT *
  FROM Tiers 
```

我试过了

```
SELECT tier.Level + 1 AS Level,
       A,
       B,
       C,
       D,
       E,
       sumCalc.calc1 / 100 Calc1
       sumCalc.calc1 / 100 + G + H Calc2
 FROM TableX tab
 INNER JOIN Tiers tier
    ON tab.C = tier.A
   AND tab.E = tier.B
 INNER JOIN (
      SELECT A, B, E, SUM(Calc1) Calc1
        FROM Tiers
      GROUP BY A, B, E) sumCalc /* SQL Server throws error that CTE table cannot be used here */
WHERE (A <> C
   OR B <> D) 
```

我也希望使用表值的 OUTER APPLY 或其他东西..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:49:54.020

**编辑**：在摆弄 CTE 之后，包括多个 CTE 一起滚动，它看起来并不乐观。

以下代码使用 CTE 分配级别并处理级别 1 计算并将结果保存在临时表中。然后一个循环按顺序处理每个附加级别。对于 SUM 的分组，我仍然有点迷糊（总的来说），但这应该很容易调整。

```
 declare @TableX as Table ( A Int, B VarChar(3), C Int, D VarChar(3), E VarChar(3), F Int, G Int, H Int )

 insert into @TableX ( A, B, C, D, E, F, G, H ) values
   ( 10, 'ABC', 10, 'ABC', 'XYZ', 2,  3,  4 ),
   ( 10, 'ABC', 10, 'ABC', 'XYZ', 2,  3,  4 ),
   ( 11, 'DEF', 10, 'ABC', 'XYZ', 4,  5,  6 ),
   ( 11, 'DEF', 10, 'ABC', 'XYZ', 6,  7,  8 ),
   ( 12, 'GHI', 11, 'DEF', 'XYZ', 7,  8,  9 ),
   ( 12, 'GHI', 11, 'DEF', 'XYZ', 8,  9,  10 ),
   ( 15, 'JKL', 15, 'JKL', 'ABC', 9,  10, 11 ),
   ( 15, 'JKL', 15, 'JKL', 'ABC', 10, 11, 12 ),
   ( 16, 'MNO', 15, 'JKL', 'ABC', 13, 14, 15 ),
   ( 16, 'MNO', 15, 'JKL', 'ABC', 16, 16, 18 )

-- Create a temporary table with levels assigned and the level 1 calculations performed.
; with Tiers ( Level, A, B, C, D, E, F, G, H, Calc1, Calc2 )
  as (
    -- Level 1.
    select 1, A, B, C, D, E, F, G, H, Cast( F + G - H as Float ), Cast( ( F + G - H ) + G + H as Float )
      from @TableX
      where A = C and B = D
    union all
    -- Level > 1.
    select T.Level + 1, TX.A, TX.B, TX.C, TX.D, TX.E, TX.F, TX.G, TX.H, NULL, NULL
      from @TableX as TX inner join
        Tiers as T on T.A = TX.C and T.B = TX.D and T.E = TX.E
      where TX.A <> TX.C or TX.B <> TX.D
    )
  select *
    into #Tiers
    from Tiers

-- Perform the additional calculations one level at a time.
declare @MinLevel as Int
select @MinLevel = Min( Level )
  from #Tiers
  where Calc1 is NULL

while @MinLevel is not NULL
  begin
  -- Note: The   SELECTs   for the sums may need extended   WHERE   clauses to implement the desired grouping.
  update #Tiers
    set Calc1 = ( select Sum( Calc2 ) from #Tiers where Level = @MinLevel - 1 ) / 100,
      Calc2 = ( select Sum( Calc2 ) from #Tiers where Level = @MinLevel - 1 ) / 100 + G + H
    where Level = @MinLevel
  select @MinLevel = Min( Level )
    from #Tiers
    where Calc1 is NULL
  end

-- Display the results.
select *
  from #Tiers
  order by Level

-- Houseclean.    
drop table #Tiers 
```

* * *

*为了完整起见，第一次尝试保留在下面：*

也许解决方案是在构建 CTE 之后进行所有`Calc1`/计算：`Calc2`

```
 declare @TableX as Table ( A Int, B VarChar(3), C Int, D VarChar(3), E VarChar(3), F Int, G Int, H Int )

 insert into @TableX ( A, B, C, D, E, F, G, H ) values
   ( 10, 'ABC', 10, 'ABC', 'XYZ', 2,  3,  4 ),
   ( 10, 'ABC', 10, 'ABC', 'XYZ', 2,  3,  4 ),
   ( 11, 'DEF', 10, 'ABC', 'XYZ', 4,  5,  6 ),
   ( 11, 'DEF', 10, 'ABC', 'XYZ', 6,  7,  8 ),
   ( 12, 'GHI', 11, 'DEF', 'XYZ', 7,  8,  9 ),
   ( 12, 'GHI', 11, 'DEF', 'XYZ', 8,  9,  10 ),
   ( 15, 'JKL', 15, 'JKL', 'ABC', 9,  10, 11 ),
   ( 15, 'JKL', 15, 'JKL', 'ABC', 10, 11, 12 ),
   ( 16, 'MNO', 15, 'JKL', 'ABC', 13, 14, 15 ),
   ( 16, 'MNO', 15, 'JKL', 'ABC', 16, 16, 18 )

; with Tiers ( Level, A, B, C, D, E, F, G, H )
  as (
    -- Level 1.
    select 1, A, B, C, D, E, F, G, H
      from @TableX
      where A = C and B = D
    union all
    -- Level > 1.
    select T.Level + 1, TX.A, TX.B, TX.C, TX.D, TX.E, TX.F, TX.G, TX.H
      from @TableX as TX inner join
        Tiers as T on T.A = TX.C and T.B = TX.D and T.E = TX.E
      where TX.A <> TX.C or TX.B <> TX.D
    )
  select *,
    case Level
      when 1 then T.F + T.G - T.H
      else ( select Sum( F + G - H ) / 100\. from Tiers where Level = T.Level - 1 ) end as Calc1,
    case Level
      when 1 then ( T.F + T.G - T.H ) + T.G + T.H
      else ( select Sum( F + G - H ) / 100\. + T.G + T.H from Tiers where Level = T.Level - 1 ) end as Calc2
    from Tiers as T
    order by Level 
```

请注意，我添加了一个小数点，以便生成的计算返回实际值。

# python - 确保对象列表仅包含唯一项的大多数 Pythonic 方式

> ID：10535492
> 
> 赞同：2
> 
> 时间：2012-05-10T13:54:08.003
> 
> 标签：python

我有一个对象列表（Foo）。Foo 对象有几个属性。一个 Foo 对象的实例等价于（等于）另一个 Foo 对象的实例，当且仅当当且仅当所有属性都相等。

我有以下代码：

```
class Foo(object):
    def __init__(self, myid):
        self.myid=myid

    def __eq__(self, other):
        if isinstance(other, self.__class__):
            print 'DEBUG: self:',self.__dict__ 
            print 'DEBUG: other:',other.__dict__ 
            return self.__dict__ == other.__dict__
        else:
            print 'DEBUG: ATTEMPT TO COMPARE DIFFERENT CLASSES:',self.__class__,'compared to:', other.__class__
            return False    

import copy

f1 = Foo(1)
f2 = Foo(2)
f3 = Foo(3)
f4 = Foo(4)
f5 = copy.deepcopy(f3) # overkill here (I know), but needed for my real code

f_list = [f1,f2,f3,f4,f5]

# Surely, there must be a better way? (this dosen't work BTW!)
new_foo_list = list(set(f_list)) 
```

在处理简单类型（int、float、string - 以及令人惊讶的 datetime.datetime 类型）时，我经常使用上面的这个小（反？）“模式”（转换为 set 和 back），但它已经有了更多涉及的数据类型 - 就像上面的 Foo 一样。

那么，我如何将上面的列表 f1 更改为唯一项目列表 - 而不必遍历每个项目并检查它是否已经存在于某些临时缓存等中？

最pythonic的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T14:08:27.710

首先，我要强调的是，使用`set`当然不是一种反模式。`set`s 在 O(n) 时间内消除重复项，这是您能做的最好的事情，并且比将每个项目与其他项目进行比较的天真 O(n^2) 解决方案要好得多。它甚至比排序更好——事实上，您的数据结构似乎*甚至*没有自然顺序，在这种情况下，排序没有多大意义。

在这种情况下使用集合的问题是您必须定义自定义`__hash__`方法。其他人也说过这个。但是你是否能轻松做到这一点是一个悬而未决的问题——这取决于你没有告诉我们的实际课程的细节。例如，如果`Foo`上述对象的任何属性不可散列，那么创建自定义散列函数将很困难，因为您不仅要为`Foo`对象编写自定义散列，还必须编写自定义散列对于所有其他类型的对象！

因此，如果您想要一个确凿的答案，您需要告诉我们更多关于您的班级具有哪些属性的信息。但我可以提供一些推测。

*假设**可以*为对象编写散列函数`Foo`，但也假设`Foo`对象是可变的，因此实际上*不应该*有`__hash__`方法，正如 Niklas B. 指出的那样，这是一种可行的方法。创建一个函数`freeze`，给定 的可变实例`Foo`，返回 中数据的不可变集合`Foo`。例如，假设 Foo 有 a`dict`和 a `list`；`freeze`返回`tuple`包含s 的 a（表示`tuple`）和另一个（表示）的 a。该函数应具有以下属性：`tuple``dict``tuple``list``freeze`

```
freeze(a) == freeze(b) 
```

当且仅当

```
a == b 
```

现在通过以下代码传递您的列表：

```
dupe_free = dict((freeze(x), x) for x in dupe_list).values() 
```

现在你有一个 O(n) 时间内的无重复列表。（确实，在添加了这个建议之后，我看到[fraxel](https://stackoverflow.com/a/10536073/577088)提出了类似的建议；但我认为使用自定义函数——甚至是方法——`(x.freeze(), x)`是更好的方法，而不是像他那样依赖`__dict__`，这可以不可靠。你的自定义`__eq__`方法也是如此，IMO——`__dict__`由于各种原因我无法进入这里，并不总是安全的捷径。）

另一种方法是首先只使用不可变对象！例如，您可以使用[`namedtuple`](http://docs.python.org/dev/library/collections.html#collections.namedtuple)s。这是从 python 文档中窃取的示例：

```
>>> Point = namedtuple('Point', ['x', 'y'])
>>> p = Point(11, y=22)     # instantiate with positional or keyword arguments
>>> p[0] + p[1]             # indexable like the plain tuple (11, 22)
33
>>> x, y = p                # unpack like a regular tuple
>>> x, y
(11, 22)
>>> p.x + p.y               # fields also accessible by name
33
>>> p                       # readable __repr__ with a name=value style
Point(x=11, y=22) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T13:55:55.680

您是否尝试过使用`set`（或`frozenset`）？它明确用于保存一组独特的项目。

不过，您需要创建一个适当的`__hash__`方法。`set`(and `frozenset`) 使用该`__hash__`方法散列对象；`__eq__`仅用于碰撞，AFAIK。因此，您需要使用像`hash(frozenset(self.__dict__.items()))`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T14:01:07.467

根据[文档](http://docs.python.org/library/sets.html)，您需要定义`__hash__()`and`__eq__()`以使您的自定义类与`set`or一起正常工作`frozenset`，因为两者都是使用 CPython 中的哈希表实现的。

如果您实施`__hash__`，请记住如果`a == b`，则`hash(a)`必须相等`hash(b)`。`__dict__`我建议为您的简单类使用以下更直接的实现，而不是比较整个s：

```
class Foo(object):
    def __init__(self, myid):
        self.myid = myid

    def __eq__(self, other):
        return isinstance(other, self.__class__) and other.myid == self.myid

    def __hash__(self):
        return hash(self.myid) 
```

如果您的对象包含可变属性，您根本不应该将它放在集合中或将其用作字典键。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T14:22:24.687

这是另一种方法，只需`__dict__.items()`为实例创建一个字典键：

```
f_list = [f1,f2,f3,f4,f5]
f_dict = dict([(tuple(i.__dict__.items()), i) for i in f_list])
print f_dict
print f_dict.values()
#output:
{(('myid', 1),): <__main__.Foo object at 0xb75e190c>, 
 (('myid', 2),): <__main__.Foo object at 0xb75e184c>, 
 (('myid', 3),): <__main__.Foo object at 0xb75e1f6c>, 
 (('myid', 4),): <__main__.Foo object at 0xb75e1cec>}
[<__main__.Foo object at 0xb75e190c>, 
 <__main__.Foo object at 0xb75e184c>, 
 <__main__.Foo object at 0xb75e1f6c>, 
 <__main__.Foo object at 0xb75e1cec>] 
```

这样，您只需让字典根据属性处理唯一性，并且可以通过获取值轻松检索对象。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-10T13:57:47.427

如果允许，您可以使用一组[http://docs.python.org/library/sets.html](http://docs.python.org/library/sets.html)

```
list = [1,2,3,3,45,4,45,6]
print set(list)
set([1, 2, 3, 4, 6, 45])
x = set(list)
print x
set([1, 2, 3, 4, 6, 45]) 
```

# jquery - jQuery Cloud Zoom - 点击大图时的高级图像

> ID：10535496
> 
> 赞同：0
> 
> 时间：2012-05-10T13:54:17.503
> 
> 标签：jquery, jquery-plugins, zooming

我正在为图片库使用 jQuery 云缩放并禁用了缩放（长话短说，但它正在工作）。现在，我已禁用单击大图像。

我希望通过*单击大图像*来推进图像（即转到下一个图像） ，而不必单击缩略图来更改图像。

这是我的示例页面：

[http://future.thefutureforward.com/~field/Travel-Kit.html](http://future.thefutureforward.com/~field/Travel-Kit.html)

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T08:48:58.347

好的，我拿了云缩放示例并制作了一个[jsfiddle 工作示例](http://jsfiddle.net/FmstM/)

下面的 jQuery 代码有效，唯一的小“错误”是单击最后一个图像时，它不会回到第一个。但除此之外，你没有什么可做的了；）哈哈

请注意，我必须使用`live`绑定点击事件的方法。

```
$(".mousetrap").live("click", function(){
    var current = $(this).prev().attr("href");
    var tmp = $("a.cloud-zoom-gallery[href='" + current + "']").next();

    if(tmp.length)
        tmp.click();
    else
    {
        alert($("a.cloud-zoom-gallery:first-child").html()); /* null?? */
        $("a.cloud-zoom-gallery:first-child").click();
    }
}); 
```

# postgresql - Postgresql - 测量性能以及如何判断是否应该刷新索引

> ID：10535499
> 
> 赞同：1
> 
> 时间：2012-05-10T13:54:30.013
> 
> 标签：postgresql

有关这方面的背景，请参阅：[我的表是否需要一个主键，它有一个 UNIQUE（复合 4 列），其中一个可以为 NULL？](https://stackoverflow.com/questions/10516661/do-i-need-a-primary-key-for-my-table-which-has-a-unique-composite-4-columns)

我的问题很简单：

*   我有一个包含产品定价信息的表，从另一个数据库同步。此表中只有一个字段由客户端控制，其余字段在同步时每隔一段时间删除并重新插入（例如，每天一次到每周一次，由客户端使用 PHP 脚本手动运行）。

1) 该表在 4 列上有一个索引（其中一个可以为空），在 3 个非空列上有另一个部分索引。当您删除大约 90% 的表并重新插入数据时，最好还是删除索引并在所有数据都在表中之后重新创建它们，还是简单地保持索引“原样”更好?

我现在改用 Erwin Brandstetter 建议的另一种方法：

```
CREATE TEMP TABLE pr_tmp AS
SELECT * FROM product_pricebands WHERE my_custom_field IS TRUE;
TRUNCATE product_pricebands;
INSERT INTO product_pricebands SELECT * FROM pr_tmp; 
```

这似乎工作得很好，所以我不确定我是否需要删除并重新创建我的索引，或者我为什么需要这样做。有什么建议么？

2）另外，我如何衡量我的脚本的性能？我实际上想知道：

```
CREATE TEMP TABLE pr_tmp AS
SELECT * FROM product_pricebands WHERE my_custom_field IS TRUE;
TRUNCATE product_pricebands;
INSERT INTO product_pricebands SELECT * FROM pr_tmp; 
```

性能比

```
DELETE FROM product_pricebands WHERE my_custom_field IS TRUE; 
```

我可以通过 PHP 告诉我吗？我尝试了 EXPLAIN ANALYZE 但我不确定这是否适用于上述一组语句？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:21:33.057

如果您的 Postgres 版本 >= 8.4，您可以使用自动解释模块： [http ://www.postgresql.org/docs/8.4/static/auto-explain.html](http://www.postgresql.org/docs/8.4/static/auto-explain.html)

您还可以在脚本中使用： SET log_min_duration_statement = 0; SET log_duration = on; 记录此脚本的所有语句和时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:06:41.253

至于第一，我不知道重建索引是否重要，但我认为如果表很大，而不是删除和重新创建索引可以提高性能：

```
CREATE TEMP TABLE pr_tmp AS
    SELECT * 
    FROM product_pricebands 
    WHERE my_custom_field IS TRUE
-- drop all indexes here
TRUNCATE product_pricebands;
INSERT INTO product_pricebands 
    SELECT * 
    FROM pr_tmp;
-- recreate them here 
```

# iphone - 在多个图像视图上滑动手指

> ID：10535500
> 
> 赞同：1
> 
> 时间：2012-05-10T13:54:39.350
> 
> 标签：iphone, ios

我已经动态创建了一个 8x8 图像视图的网格，在该网格上显示字母并为每个字母分配标签。我可以通过 Tap Gestures 检测每个图像视图上的触摸，但我现在想要的是：如果用户在字母上滑动手指，我将能够获得每个图像视图标签。这样就可以检测到触摸的字母（连续触摸）。

请帮忙，

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:58:49.803

禁用单个图像视图上的用户交互并处理包含它们的超级视图上的触摸。然后你可以在 touchesMoved 中找出用户的手指在哪个图像上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:06:59.137

正如另一位海报所说，您需要处理超级视图上的触摸事件。您可以使用 touchesBegan/touchesMoved，或者您可以将平移手势识别器添加到超级视图。就个人而言，我更喜欢手势识别器。我发现它们更干净，更容易使用，所以我会走那条路。

# c# - 通过 XAML 或 Code behind 绑定

> ID：10535502
> 
> 赞同：2
> 
> 时间：2012-05-10T13:54:41.157
> 
> 标签：c#, wpf, xaml, binding, code-behind

我正在创建一个 WPF 应用程序，我需要在页面顶部显示一个邮政地址。邮政地址下方是产品信息。产品信息从数据源返回并绑定到数据上下文。例如 this.DataContext = myComplexType;

工作人员需要手动切换显示哪个邮政地址。我认为最好的选择方法是通过单选按钮控件。换句话说，在我的页面上，我将有 3 个单选按钮，*UK Address *USA Address *China Address，根据选择的情况，将在顶部的 Textblock Name="txbPostalAddress" 中输入适当的文本页。

邮政地址位于一个名为 Addresses 的类中（作为字符串）。例如代码：

```
namespace DAL
{
    public class Addresses
    {
        public string GctHkAddress { get { return gctHkAddress;} }
        public string GctUsaAddress { get { return gctUsaAddress; } }
        public string GctUkAddress { get{return gctUkAddress;} }

        private string gctHkAddress = "Company Name\n Hong Kong \n";
        private string gctUsaAddress = "Company Name\n USA \n";
        private string gctUkAddress = "Company Name\n UK \n";
    }
} 
```

我的问题是，绑定应该在 XAML 中还是在后面的代码中完成。我可以很容易地在后面的代码中做到这一点，但我觉得这否定了 XAML 的力量。有没有人知道哪种方法更好，如果通过 XAML，知道如何或链接到教程等？

谢谢

戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:05:37.323

如果您的问题是在哪里设置 DataContext，它有时取决于，否则没关系。

通常 ViewModel（简而言之，一个具有数据和命令的类）设置为 DataContext。

可以通过以下方式完成

1.  [在 XAML](https://stackoverflow.com/questions/4590446/how-do-i-set-a-viewmodel-on-a-window-in-xaml-using-datacontext-property) -> 在 XAML 中为 ViewModel 创建静态资源，并使用 StaticResoure 进行设置。问题 -> View 必须了解 ViewModel，ViewModel 必须有无参数构造函数

2.  在 ViewModel -> 将视图传递给 View Model 的构造函数，并在 ViewModel ctor 问题中设置 view.DataContext=this -> ViewModel 必须了解 View

3.  [附加在 View 和 ViewModel 之外](https://stackoverflow.com/questions/862829/what-is-the-advantage-of-setting-datacontext-in-code-instead-of-xaml)，这通常在自定义引导类中完成（或通过覆盖 App-> OnStartUp。这里 View 是实例化的，ViewModel 是实例化的，View.DataContext 设置为 ViewModel 问题 -> 需要自定义初始化

4.  [ViewModelLocator](https://stackoverflow.com/questions/5462040/what-is-a-viewmodellocator-and-what-are-its-pros-cons-compared-to-datatemplates) -> 在 XAML 中创建 ViewModelLocator 实例作为 StaticResource，将 DataContext 绑定到 ViewModelLocator Advantage 的属性 -> 视图，viewmodel 保持松散耦合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:04:56.703

如果您打算使用 MVVM，那么 XAML 是最好的选择，否则您也可以在代码中执行它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:05:43.923

您可以使用任意数量的数据上下文，只要它位于不同的控件中即可。例如，您可以拥有一个负责格式化的 Address UserControl、一个 ViewModel 上的 Addresses 属性，它包含一个可用地址的列表，以及一个 CurrentAddress 属性，它将所选地址保存在 Addresses 列表之外。如果地址有几行，您可能希望将地址设为对象，而不仅仅是字符串。

您的 XAML 可能如下所示：

```
<Page>
    <!-- Page DataContext would be set in code behind. This would be the main ViewModel -->
    <my:AddressUserControl DataContext="{Binding CurrentAddress}"/>
    <ComboBox ItemsSource="{Binding Addresses}" SelectedItem="{Binding CurrentAddress}" DisplayMemberPath="CompanyName"/>
    <!-- more controls -->
</Page> 
```

# unix - 用于数据库连接的分段错误 pro*c 代码

> ID：10535503
> 
> 赞同：3
> 
> 时间：2012-05-10T13:54:44.883
> 
> 标签：unix, oracle-pro-c

我编写了简单的 pro*c 程序来检查数据库连接。代码是：

```
int main()
{
    char *conn_string = "IDA/IDA@DBISPSS";
    int x = 10;
    printf("value of x is before db connection %d\n",x);
    printf(" conn_string %s \n",conn_string);
    EXEC SQL CONNECT :conn_string;
    EXEC SQL SELECT 1 INTO :x FROM DUAL;
    printf("value of x is %d\n",x);
    return 0;
} 
```

按照我执行的命令创建 pro*c 代码的可执行文件（test_connection）

```
proc test_connection.pc

cc -I${ORACLE_HOME}/precomp/public -c test_connection.c
cc   test_connection.o   -o test_connection -L$ORACLE_HOME/lib -lclntsh 
```

当我执行 test_connection exe 时，输出是

```
value of x is before db connection 10
conn_string IDA/IDA@DBISPSS
Segmentation fault 
```

但是相同的代码在另一台 linux 机器和 solaris 机器上运行良好。

为什么会抛出分段错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:21:40.973

我在 HPUX 11.11/Oracle 11 中测试并且工作正常。我没有发现任何问题，但请尝试一些更改：

1.  在 DECLARE SECTION 中声明“x”：

    ```
    EXEC SQL BEGIN DECLARE SECTION;
    int x = 0;
    EXEC SQL END DECLARE SECTION; 
    ```

2.  试试这个连接命令：

    ```
    EXEC SQL BEGIN DECLARE SECTION;
    char *user = "abc", *password = "123", *database="base";
    EXEC SQL END DECLARE SECTION;
    EXEC SQL DECLARE BASE_HANDLE DATABASE;
    ...
    EXEC SQL CONNECT :user IDENTIFIED BY :password AT BASE_HANDLE USING :database;
    ...
    EXEC SQL AT BASE_HANDLE SELECT 1... 
    ```

3.  插入一个`printf("here 1");`between `EXEC SQL CONNECT...`and`EXEC SQL SELECT ...`以查看 SEGFAULT 被抛出的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-17T22:03:28.420

我遇到了这个问题，对我的消息来源的任何摆弄都没有任何区别。最终奏效的是，当我重新初始化所有（全部）库以确保 Oracle 只能访问 32 位版本的库时。甲骨文似乎以某种方式连接到 64 位库。只有删除对除 32 位版本之外的任何库或可执行文件的所有引用才能工作。这包括运行 32 位版本的 Pro*C。

# qt - Google Chrome 将我的 Qt 应用程序识别为恶意软件

> ID：10535504
> 
> 赞同：2
> 
> 时间：2012-05-10T13:54:45.263
> 
> 标签：qt, google-chrome, malware

我用**Qt 和 C++ 编写**了一个有助于连接互联网的小程序。该应用程序运行良好，但当我下载`.exe`（或安装程序）时，**谷歌浏览器**将其识别为**恶意软件**。使用 Microsoft Security Essentials 扫描应用程序不会返回任何问题。

我将 Qt 与*QFile、QString、QtextStream、QPointer、QWebview、QWebFrame、QWebElement、QUrl、QDesktopServices、QStringList、QEventLoop 一起使用*。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:05:43.733

尝试与谷歌服务取得联系，也许在那里，你可以找到答案。

第二个想法是尝试`.exe`通过一些防病毒软件（例如 Dr.Web 的在线服务 -- [http://vms.drweb.com/online/](http://vms.drweb.com/online/)）检查您的。

# xml-parsing - XML 架构 - 允许无效日期

> ID：10535505
> 
> 赞同：0
> 
> 时间：2012-05-10T13:54:47.443
> 
> 标签：xml-parsing, biztalk

您好我正在使用 biztalk 的 FlatFile 解析器（使用 XML 模式）来分割 CSV 文件。CSV 文件有时包含无效日期 - 1900 年 1 月 1 日。目前，由于日期无效，平面文件的架构验证失败。我可以使用任何设置来允许使用日期吗？

我不想将日期读取为字符串。如果没有其他办法，我可能会被迫这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T03:40:17.410

您可以使用自定义管道组件将其更改为[有效的 XML 日期时间](http://www.w3.org/TR/NOTE-datetime)（例如，1900-01-00:00:00Z）（请参见[此处](http://biztalk.eliasen.dk/Pipelines.aspx)的示例）。或者，您可以将其视为架构中的字符串，然后在映射、编排或下游系统中进行转换。

这是一个 C# 片段，您可以将其放入 BizTalk 映射内的脚本函数中，以将字符串转换为 xs:dateTime，但如果要处理错误输入数据的可能性，则需要做更多工作：

```
public string ConvertStringDateToDateTime(string param1)
{
    return DateTime.Parse(inputDate).ToString("s",System.Globalization.DateTimeFormatInfo.InvariantInfo);
} 
```

如果您希望在单个地图的多个位置执行此操作，另请参阅[此博客文章。](http://seroter.wordpress.com/2007/04/13/behavior-of-biztalk-maps-scripting-functoid/)

# ruby-on-rails - 从 Rails 中的单表继承中获取子类的列表/数组？

> ID：10535507
> 
> 赞同：16
> 
> 时间：2012-05-10T13:54:53.543
> 
> 标签：ruby-on-rails, single-table-inheritance

我有一大堆子类，它们通过我的 Rails 应用程序中的单表继承从父类继承。我想要一种方法来获取从主类继承的所有子类的数组。

我尝试了在另一个 SO 答案中找到的以下单链接命令，但它只返回父类。

```
ObjectSpace.each_object(class<<MyParentClass;self;end) 
```

有什么干净的方法可以做到这一点吗？

**编辑：** 显然 Rails 在 Dev 模式下调用时只会延迟加载子类，并且可能会根据 Rails 版本进行生产。但是，第一个答案应该在 Prod 模式下适用于 Rails 3.1 及更高版本。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-10T14:44:45.730

`Class`Rails使用[subclasses()](http://apidock.com/rails/Class/subclasses)方法扩展了 Ruby 。

在 Rails 3 中，您可以直接调用它：

```
YourClass.subclasses 
```

在 Rails 2.3 中，“.subclasses”是受保护的，所以我们必须使用以下方式调用它`send()`：

```
YourClass.send(:subclasses) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-10-04T05:12:01.963

您需要预先加载类，如：[https ://github.com/rails/rails/issues/3364 中所述](https://github.com/rails/rails/issues/3364)

```
ActionDispatch::Reloader.to_prepare do
  Rails.application.eager_load!
end 
```

然后您将能够使用：

```
YourClass.subclasses 
```

或者

```
YourClass.descendants 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-07-06T09:01:03.667

在你的**config/environments/development.rb**

```
Rails.application.configure do
  config.eager_load = false
end 
```

你可以将**false**改为**true**，然后在你的控制台中做

```
Class.subclasses 
```

或者

```
Class. descendants 
```

**这是子类**和**后代**之间的区别

 **子类：

```
class Foo; end
class Bar < Foo; end
class Baz < Bar; end

Foo.subclasses # => [Bar] 
```

后人：

```
class C; end
C.descendants # => []

class B < C; end
C.descendants # => [B]

class A < B; end
C.descendants # => [B, A]

class D < C; end
C.descendants # => [B, A, D] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-07-26T07:15:26.240

```
ParentClass.subclasses.map(&:name) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-26T10:07:27.527

这将在一个 SQL 查询中完成：

```
# SELECT DISTINCT type FROM objects
Object.uniq.pluck(:type) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-21T16:02:43.693

请注意，它们是实现上述 Dave G 方法的更有效方法。

```
Object.select(:type).map(&:type).uniq 
```

这首先从数据库发送仅具有“类型”属性的封送对象，这会占用更少的内存，然后仅将类型提取到一个数组中，然后您可以对其进行**uniq**处理。我确信有一种无限高效的纯 SQL 方法可以做到这一点。

* * *

## 回答 #7

> 赞同：-8
> 
> 时间：2012-05-10T14:04:09.450

假设表中存在的每个对象中至少有一个：

```
Object.all.uniq{|x| x.type}.collect(&:type) 
```**

# java - 查找迭代器中内容之间的持续时间（以月为单位）

> ID：10535519
> 
> 赞同：0
> 
> 时间：2012-05-10T13:55:54.617
> 
> 标签：java

代码：

```
 Iterator<String> termIncomeKeys = termIncome.keySet().iterator();
    while(termIncomeKeys.hasNext()){
        String month = termIncomeKeys.next();
        System.out.println(month);
    } 
```

月份打印为

1月(2012) - 1月(2012)

2012 年 2 月 - 2012 年 3 月

2012 年 4 月 - 2012 年 5 月

六月(2012) - 六月(2012)

七月(2012) - 十月(2012)

我想要实现的是我想在每个条目之间以月为单位打印持续时间。也就是说，第一个条目之间的持续时间是 1 个月，第二个条目之间的持续时间是 2 等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:05:28.947

不知道有没有现成的类可以帮你解析这些字符串，但是逻辑很简单：

将三个字母的月份转换为数字（例如 0-11），并将年份转换为数字。不同的是`<year-diff>*12 + <month-diff>`，哪里`<month-diff>`可能是负数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:04:25.187

假设同年：

```
enum Month{
JAN(0),
FEB(1),
MAR(2),
APR(3),
....
DEC(11);

Month(int index){this.index = index;}
int index;

int getIndex() {return index;}
}

Iterator<String> termIncomeKeys = termIncome.keySet().iterator();
    while(termIncomeKeys.hasNext()){
        String month = termIncomeKeys.next();
        String str[] = month.split("-");
        String m0 = str[0], m1 = str[1];
        String y0 = mo.substr(m0.indexOf('(')+1, mo.lastIndexOf(')'));
        String y1 = m1.substr(m1.indexOf('(')+1, m1.lastIndexOf(')'));
        int yr0 = Integer.parseInt(yo), yr1 = Integer.parseInt(y1);
        m0 = m0.substr(0, mo.indexOf('(')).trim().toUpperCase();
        m1 = m1.substr(0, m1.indexOf('(')).trim(),toUpperCase();
        int duration =  yr1 *Month.valueOf(m1).getIndex() - yr0 *Month.valueOf(m0).getIndex();
    } 
```

# xcode - Cocoa：如何避免核心数据重复关系？

> ID：10535521
> 
> 赞同：1
> 
> 时间：2012-05-10T13:55:57.697
> 
> 标签：xcode, cocoa, core-data, osx-snow-leopard

我有这些实体：

*   产品实体
    *   姓名
    *   订单 [ProductsOrderRelationship]
*   订单实体
    *   产品 [ProductsOrderRelationship]
*   产品订单关系
    *   订单 [OrderEntity]
    *   产品 [ProductsEntity]
    *   数量

现在，我想编辑现有订单。我有一个可用产品列表和购物车。

现在我想将这些可用产品添加到购物车。

代码必须检查产品是否存在，所以它只会增加数量。

但是，到现在为止，它只是增加了更多的关系..

分享一段代码吧！该界面左侧有一个列表，其中包含可用产品，右侧有一个列表，其中包含购物车（订单实体）。两者都有链接到我的代码的数组控制器。然后我有这个动作：

```
- (IBAction)addSelectedProducts:(id)sender {

    NSArray *firstSelectedProducts = [availableProductsController selectedObjects];
    //Objects selected in the array controller
    NSMutableArray *selectedProducts = [[NSMutableArray alloc] initWithCapacity:1];
    //Here I will filter the repeated ones
    NSMutableSet *newProducts = [NSMutableSet set];
    //This is the final value to change in the current order entry.
    NSMutableSet *oldProducts = [orderManagedObject valueForKey:@"products"];
    //This is the old value I will change.

    //Here we filter every repeated entries:
    if ( [firstSelectedProducts count] > 0 ) {
        for (id object in firstSelectedProducts) {
            if (![oldProducts containsObject:object]) {
                [selectedProducts addObject:object];
            }
        }
    }

    //Here we create objects in the relationship entity:
    for (int i = 0; i < [selectedProducts count]; i++) {

        // Create new relationship.

        NSManagedObject *newProductObject = [
            NSEntityDescription
                insertNewObjectForEntityForName:@"ProductsOrderRelationship"
                         inManagedObjectContext:managedObjectContext
        ];

        [newProductObject setValue:[selectedProducts objectAtIndex:i] forKey:@"product"];
        [newProductObject setValue:orderManagedObject forKey:@"order"];

        [newProducts addObject:newProductObject];

        [newProductObject release];

    }

    [newProducts unionSet:oldProducts];
    //Join old products and new products.
    [orderManagedObject setValue:newProducts forKey:@"products"];
    //Re-set the value.

    //(... release stuff here)
} 
```

我找不到这个特定问题的指南。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:46:15.903

我猜它`firstSelectedProducts`包含 ProductsEntity 对象并`oldProducts`包含 ProductsOrderRelationship 对象。如果这是真的，那么问题是......

```
if (![oldProducts containsObject:object]) { 
```

...永远不会匹配任何东西。

（您所说的 ProductsOrderRelationship 通常称为 LineItem。更改类及其关联变量的名称可能会使逻辑更清晰。）

# c# - 硬编码 Web 应用程序 (ASP.NET) 的到期日期？

> ID：10535522
> 
> 赞同：0
> 
> 时间：2012-05-10T13:56:05.197
> 
> 标签：c#, asp.net, security, iis

假设您要上传“测试版”版本，但您有信任问题。您将如何添加到期日期？

我考虑过硬编码到期日期 - 但随后任何人都可以反编译/重新编译 .NET dll。

然后我想也许我应该让应用程序迭代它自己的文件并删除它们。但是，在删除一个重要的 dll 后，IIS worker 将停止，我们将无法删除其他的。更不用说我们需要对包括 BIN 在内的所有文件夹设置写权限这一事实。

嗯......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:11:50.413

在某处添加硬编码日期检查，并[混淆](http://blogs.msdn.com/b/clrsecurity/archive/2005/05/26/422440.aspx)您的应用程序。

**更新：**

我不会说在混淆程序集中找到日期检查会很容易，特别是如果您使用一些商业工具。当然，这不可能是 100% 安全的，我没有任何调试/破解混淆程序集的经验，但会花一些时间在谷歌上搜索商业混淆器以及它们能做什么。

除此之外，您可以使用您的应用程序运行连接到互联网的事实，您可以检查一些外部资源，当然这很容易被嗅探，但是您可以编写应用程序的一些重要部分，即一些脚本，将该脚本加密其他一些服务器。然后您的应用程序应该下载、解密并执行该脚本，因此如果您将其从远程服务器中删除，将很难重现该功能。第三方可能会下载该脚本并在不可用时提供它，请注意这一点。也许您可以使用[Rosyln](http://www.codeproject.com/Articles/113169/C-As-A-Scripting-Language-In-Your-NET-Applications)并使用您的 c# 代码而不是该脚本。

我没有做任何类似的事情，也许还有更多问题，这只是我的想法，所以如果你想这样做，请做你的研究:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:07:03.847

您可能希望将日期用作代码深处的一些有意义的输入变量，例如使用“超过阈值的滴答声”来计算一些计划的可伸缩性降低，所有这些都设置在不同的时间阈值，引入延迟或其他东西。如果您将它们放在多个位置并用注释 .cs 进行标记，那么您可以在需要时轻松删除它们，但从 dll 中根除成本太高。

# permissions - MediaWiki 1.18.3/1.19.0：命名空间限制

> ID：10535524
> 
> 赞同：0
> 
> 时间：2012-05-10T13:56:05.723
> 
> 标签：permissions, namespaces, mediawiki

我尝试在我的 MediaWiki 上创建一些权限。我按照本[教程](http://www.mediawiki.org/wiki/Manual:Preventing_access)进行操作，但是没有用...

我尝试创建一个 Staff 组，该组有权读取、编辑、创建和删除 Staff 命名空间中的页面。经典用户不应看到此命名空间中的所有页面。

这是 LocalSettings.php 文件：

```
# Namespaces
define('NS_STAFF', 103);
$wgExtraNamespaces[NS_STAFF] = 'Staff';

# Groups
define('G_STAFF', 'Staff');

# Default Group Rights
    # Anonyms
$wgGroupPermissions['*']['read'] = true;
$wgGroupPermissions['*']['edit'] = false;
$wgGroupPermissions['*']['create'] = false;
    # User
$wgGroupPermissions['user']['read'] = true;
$wgGroupPermissions['user']['edit'] = false;
$wgGroupPermissions['user']['create'] = false;
    # Staff
$wgGroupPermissions[G_STAFF]['read'] = true;
$wgGroupPermissions[G_STAFF]['edit'] = true;
$wgGroupPermissions[G_STAFF]['create'] = true;

# Groups Rights
$wgNamespaceProtection[NS_STAFF] = array(G_STAFF); 
```

能解释一下我做错了什么吗？

**更新**

我将我的 Mediawiki 升级到版本 1.19.0。进入命名空间“Staff”的页面对于用户组仍然可见，但不可编辑。

如何阻止对特定名称空间的页面的访问？

这是 LocalSettings.php 文件：

```
#Groups
define('G_PROGRAMMER', 'Programmer');
define('G_ADMIN_SYSTEM', 'AdminSystem');
define('G_DESIGNER', 'Designer');
define('G_STAFF', 'Staff');

# Default Group Rights
    # Anonyms
$wgGroupPermissions['*']['read'] = true;
$wgGroupPermissions['*']['edit'] = false;
$wgGroupPermissions['*']['create'] = false;
    # User
$wgGroupPermissions['user']['read'] = true;
$wgGroupPermissions['user']['edit'] = false;
$wgGroupPermissions['user']['create'] = false;
    # Staff
$wgGroupPermissions[G_STAFF]['read'] = true;
$wgGroupPermissions[G_STAFF]['edit'] = true;
$wgGroupPermissions[G_STAFF]['create'] = true;

# Groups Rights
$wgNamespaceProtection[NS_STAFF] = array('staff-edit');
$wgGroupPermissions[G_STAFF]['staff-edit'] = true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:45:19.670

尝试[Extension:Lockdown](https://www.mediawiki.org/wiki/Extension%3aLockdown "扩展：锁定")，但请注意，MediaWiki 在架构上不保证 100% 安全的部分读取限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:12:17.537

实际上， $wgNamespaceProtection 允许防止编辑（并且仅编辑）自定义命名空间（请参阅[有关 $wgNamespaceProtection 的文档](http://www.mediawiki.org/wiki/Manual_talk%3a%24wgNamespaceProtection)）。

为了防止读取自定义命名空间，需要扩展。

我会尝试[Lockdown](http://www.mediawiki.org/wiki/Extension%3aLockdown)。

# php - 哪个更合乎逻辑且性能更好？一个 CI 应用程序或多个 CI 应用程序

> ID：10535525
> 
> 赞同：0
> 
> 时间：2012-05-10T13:56:06.647
> 
> 标签：php, mysql, codeigniter

我在 git repo 中有一个 CodeIgniter 应用程序。目前我在我的服务器上为我注册的每个新客户端部署一个新的安装。

每个新客户端都有自己的数据库和文件夹中的文件，例如：`/var/www/vhosts/example.com/client/client1/`

每个客户端都有一个子域，我通过 plesk 映射出来。`client1.example.com`.

**我的问题：** 使用单个应用程序设置来管理所有这些具有不同 database.php 配置文件的客户端安装是否会更好。

IE：`/var/www/vhosts/example.com/httpdocs/*`

并为子域使用 htaccess 重定向将 URI 重新映射到不同的配置。

或者像我上面列出的那样为每个客户端单独安装是否更好。

### 服务器信息：

*   PHP 5.3

*   MySQL 5.x

*   代码点火器 2.1

*   WireDesignz HMVC

*   火花（各种）

*   MediaTemple 的 CentOS DV4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:04:41.700

我会说让他们分开。

每个客户都有自己的一套要求。虽然服务器不会发生太大变化，但您的代码库会。随着时间的推移，在为另一个客户构建某些东西的同时，不为一个客户破坏某些东西将变得越来越困难。

由于它们将是单独的项目，您将能够将较大的站点从较小的站点移走。但这取决于您的客户收到的流量类型。

并且将每个应用程序都放在自己的存储库中（您正在使用版本控制，对吗？）将使您的世界更有条理。

性能方面，为客户设计的较小的应用程序，只运行他们想要的，可能会胜过任何一天为所有客户提供服务的单一站点。

希望我理解正确，这是我的个人意见。

# java - 使用Spring框架的构造函数依赖注入，无法保留值

> ID：10535526
> 
> 赞同：1
> 
> 时间：2012-05-10T13:56:07.520
> 
> 标签：java, xml, spring, javabeans

这是 XML 文件`bean-jojo.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans  xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
                            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

        <bean id="vTypeCar" class="com.justPractise.ex01.Car" />
        <bean id="vTypeBike" class="com.justPractise.ex01.MotorCycle" />        

        <bean id="vService" class="com.justPractise.ex01.VehicalService">
            <property name="vehical" ref="vTypeBike" />
        </bean>     

        <bean id="beanLifeCycleTest" class="com.jal.LifeCycleBeanP2">
            <property name="justAParam" value="MICHEAL JACKSON" />
        </bean>     

        <bean id="brun-p" class="com.justPractise.ex01.HALBrunPojo">
            <constructor-arg value="234" />
        </bean>                 
</beans> 
```

我已经在以下 bean 上注册，我正在尝试构造函数 DI：

```
package com.justPractise.ex01;

public class HALBrunPojo {

    private Integer num;

    public HALBrunPojo(){
        System.out.println(this.getClass().getName()+" INITIALISED ");
    }

    public HALBrunPojo(int num){
        System.out.println(this.getClass().getName()+" PARAMETERISED..... INITIALISED "+num);
        this.num = num;
    }

    public Integer getNum() {
        return num;
    }

    public void setNum(Integer num) {
        this.num = num;
    }

} 
```

正如在上述 bean 声明的 XML 中所见，我已经指定了构造函数参数，现在这是使用的以下代码，它具有 main 方法：

```
package com.justPractise.ex01;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class MainPractise01 {

    /**
     * @param args
     */
    public static void main(String[] args) {
        ApplicationContext ctx = null;      
        HALBrunPojo obj = null;
        try{
            ctx = new ClassPathXmlApplicationContext("bean-jojo.xml");
            obj = (HALBrunPojo) ctx.getBean("brun-p");
            System.out.println(" PARAM-VALUE "+(obj == null ? "0" : obj.getNum()));
        }catch(Exception e){
            e.printStackTrace();            
        }
    }

} 
```

当我尝试从命令行运行上述类时，输出是

```
PARAM-VALUE 0 
```

这意味着`HALBrunPojo`是`null`。调试后我发现如果我注释了`LifeCycleBeanP2`in的 bean 声明`bean-jojo.xml`，像这样：

```
 <!--
        <bean id="beanLifeCycleTest" class="com.jal.LifeCycleBeanP2">
            <property name="justAParam" value="MICHEAL JACKSON" />
        </bean>     
        --> 
```

然后我运行程序，我得到想要的输出，即

```
PARAM-VALUE 234 
```

为什么会这样？，这是 bean 的代码`LifeCycleBeanP2.java`：

```
package com.jal;

import org.springframework.beans.BeansException;
import org.springframework.beans.factory.BeanFactory;
import org.springframework.beans.factory.BeanFactoryAware;
import org.springframework.beans.factory.BeanNameAware;
import org.springframework.beans.factory.DisposableBean;
import org.springframework.beans.factory.InitializingBean;
import org.springframework.beans.factory.config.BeanPostProcessor;

public class LifeCycleBeanP2 implements BeanNameAware, BeanFactoryAware, BeanPostProcessor, InitializingBean, DisposableBean{
    String justAParam;

    public LifeCycleBeanP2(){
        System.out.println(this.getClass().getName()+" INITIALISED...... ");
    }

    public String getJustAParam() {
        return justAParam;
    }

    public void setJustAParam(String justAParam) {
        System.out.println(" SETTER OF JustAParam ........ ");
        this.justAParam = justAParam;
    }

    // method of BeanNameAware
    @Override
    public void setBeanName(String arg0) {
        System.out.println(" IN SET BEAN-NAME "+arg0);
    }

    // method of BeanFactoryAware
    @Override
    public void setBeanFactory(BeanFactory arg0) throws BeansException {
        System.out.println(" IN SET BEAN-FACTORY, "+arg0.getClass().getName());
    }

    // method of BeanPostProcessor
    @Override
    public Object postProcessAfterInitialization(Object arg0, String arg1)
            throws BeansException {
        System.out.println(" POST PROCESS AFTER INITIALISATION ");
        return null;
    }

    // method of BeanPostProcessor
    @Override
    public Object postProcessBeforeInitialization(Object arg0, String arg1)
            throws BeansException {
        System.out.println(" POST PROCESS BEFORE INITIALISATION ");
        return null;
    }

    //method of InitializingBean
    @Override
    public void afterPropertiesSet() throws Exception {
        System.out.println(" AFTER PROPERTIES SET ");
    }

    //method of DisposableBean
    @Override
    public void destroy() throws Exception {
        System.out.println(" BEAN "+this.getClass().getName()+" QUALIFIED FOR GARBAGE COLLECTION ");
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:31:53.203

实现 BeanPostProcessor 接口的 bean 是一个特殊的 bean。它传递了对上下文创建的所有其他 bean 的引用，**它可以修改它们并在需要时返回不同的实例**。

**BeanPostProcessor 返回的任何引用都将与 bean id 相关联。**

在您的 LifeCycle 类中，您返回 null - 相反，您应该返回对传递给您的方法的对象的引用。如下更改这两种方法，它应该可以按预期工作。

```
 // method of BeanPostProcessor
    @Override
    public Object postProcessAfterInitialization(Object arg0, String arg1)
            throws BeansException {
        System.out.println(" POST PROCESS AFTER INITIALISATION ");
        return arg0;
    }

    // method of BeanPostProcessor
    @Override
    public Object postProcessBeforeInitialization(Object arg0, String arg1)
            throws BeansException {
        System.out.println(" POST PROCESS BEFORE INITIALISATION ");
        return arg0;
    } 
```

# emacs - Windows 上的 Emacs elisp 扩展文件名行为

> ID：10535529
> 
> 赞同：6
> 
> 时间：2012-05-10T13:56:11.047
> 
> 标签：emacs, elisp

在使用 el-get 安装最后一个 cedet 期间，我在 Windows 上遇到了扩展文件名函数的奇怪行为。该问题与自动加载的生成有关。

最后一个 emacs 24.1.50 上的 autoload.el 包含以下功能：

```
(defun autoload-generated-file ()
  (expand-file-name generated-autoload-file
                ;; File-local settings of generated-autoload-file should
                ;; be interpreted relative to the file's location,
                ;; of course.
                (if (not (local-variable-p 'generated-autoload-file))
                    (expand-file-name "lisp" source-directory)))) 
```

在我的情况下，生成的自动加载文件是：

```
"/home/ngulyamov/.emacs.d/el-get/cedet/lisp/cedet/srecode/loaddefs.el" 
```

因为我有指向 C:/home/ngulyamov 的 $HOME$ 环境变量。在这种情况下，上面的函数返回：

```
"d:/home/ngulyamov/.emacs.d/el-get/cedet/lisp/cedet/srecode/loaddefs.el" 
```

由于源目录包含：

```
"d:/devel/emacs/emacs-bzr/trunk_jenkins/". 
```

如您所见，它将驱动器号从 C: 更改为 D:。同时在 emacs 23.3 上，此函数返回半正确值，因为源目录包含值：

```
"c:/Users/Sean/Downloads/emacs-23.3/". 
```

根据expand-file-name函数描述：

*(expand-file-name NAME &optional DEFAULT-DIRECTORY)*

*将文件名 NAME 转换为绝对文件名，并将其规范化。第二个参数 DEFAULT-DIRECTORY 是目录，如果 NAME 是相对的 **（不以斜杠或波浪号开头）**；如果 DEFAULT-DIRECTORY 为 nil 或缺失，则使用当前缓冲区的 `default-directory' 值。*

Windows 上的路径从不以斜杠或波浪线开头。

现在我的问题是： 1\. expand-file-name 函数的行为在 Windows 上是否正确？2\. 为什么 source-directory 包含开发者路径的值？

我们可以将扩展文件名视为 Windows 上的错误吗？或者它只是在 autoload.el 中被错误地使用了？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:05:55.367

最后我找到了原因。问题来自 cedet 的 Makefile，它使用了 make 3.8 的 $(abspath) 功能。在这种情况下，cygwin 版本的 make 返回 UNIX 路径方式，即 /home/ngulyamov/... 然后在自动加载中由源目录根目录替换为 d:/home/ngulyamov/...。 GnuWin32 版本的 make工作正常但奇怪的原因我有以下问题：

```
C:\home\ngulyamov\.emacs.d\el-get\cedet>\gnuwin32\bin\make all
Removing loaddefs.el files from subprojects.
Generating autoloads.
make[1]: Entering directory `C:/home/ngulyamov/.emacs.d/el-get/cedet/lisp/cedet'
    > autoloads
Wrote C:/home/ngulyamov/.emacs.d/el-get/cedet/lisp/cedet/loaddefs.el
Loading vc-bzr...
Generating autoloads for C:/home/ngulyamov/.emacs.d/el-get/cedet/lisp/cedet/cedet-android.el...
Memory exhausted--use C-x s then exit and restart Emacs
make[1]: *** [autoloads] Error 127 
```

所以肮脏的修复是在 autoload.el 本身中指定源目录，例如：

```
(setq-default source-directory "C:/home/ngulyamov/.emacs.d/") 
```

无论如何，为什么 source-directory 指向开发人员的计算机路径仍然是开放的。

# jquery - POST后jquery simplemodal重定向到父页面

> ID：10535532
> 
> 赞同：2
> 
> 时间：2012-05-10T13:56:13.343
> 
> 标签：jquery, post, simplemodal

我正在使用最优秀的 SimpleModal jQuery 插件 (http://www.ericmmartin.com/projects/simplemodal/)。

我的索引页面有一个简单的模式打开，它显示用户必须为特定项目填写的表单。成功提交表单后，模态窗口会重新加载 Index() - 这意味着我的模态和父视图中有一个 Index()。

有没有办法让页面重新聚焦以重新加载我的父索引，而不是在模式窗口内重新加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:56:36.970

你可以这样做：

在模态中：...

```
document.forms[0].target = window.parent.name;
document.forms[0].submit(); 
```

在父视图中：

```
$(document).ready(function() {
        window.name = "alumnoIncidencias";
}); 
```

我希望这可以帮助你！

# jar - 禁用 sun 签名的 jar 验证

> ID：10535536
> 
> 赞同：6
> 
> 时间：2012-05-10T13:56:31.340
> 
> 标签：jar, jvm, java-web-start

尝试在构建路径中发布`.war package`包含 Web Start 应用程序时遇到了很多麻烦。`commons-configuration-1.3.jar``(com.sun.deploy.net.JARSigningException)`

我已经尝试清理`javaws`缓存，重新安装应用程序，甚至重新安装`java (1.6.0_24)`.

这是我`NetBeans IDE 6.8 (Build 200912041610)`在创建`JNLP`应用程序时的一段输出：

```
Warning: 
The signer certificate will expire within six months.
Signing JAR: D:\Java\workspace\OTP\DeskOTP\atual\build\cluster\modules\ext\commons-configuration-1.3.jar to D:\Java\workspace\OTP\DeskOTP\atual\build\jnlp\app\br-com-petrobras-ep-gedig-gedigdesktoplibrary\ext-commons-configuration-1.3.jar as jnlp 
```

但是，当我尝试运行时，我得到了`JARSigningException`这个罐子。

所以，我决定解决这个问题，禁用这个验证。我相信我可以决定并告诉`jvm`不要验证我的罐子（我的责任）。

无论如何要告诉`jvm`或`javaws`永远不要验证非签名`jars`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T00:24:38.767

作为第一反应，我会说尝试`java -noverify -jar your_file.jar.`

但是，这仅适用于本地 jarfile。它不适用于网络资源，这听起来像是您正在尝试做的事情。那正确吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-21T19:12:42.673

您始终可以从网上下载 jar，手动删除清单上的签名部分，它应该可以工作。如果 jar 碰巧像 @Riking 在另一个回复中提到的那样从网上动态下载，那么您可以通过将 URL 代理到不同的服务器来解决问题。

现在，如果您可以访问部署构建状态并且在工件上的签名过期时遇到问题，一种替代方法可能是使用您公司（Petrobras？）的签名证书重新签署 jar。这将允许您解决过期问题，前提是构建知道它应该提取您的工件版本而不是原始公共配置。

# qt - Qt：库的静态链接

> ID：10535539
> 
> 赞同：0
> 
> 时间：2012-05-10T13:56:35.727
> 
> 标签：qt, static, linker

我正在 Windows 中开发 Qt 应用程序。我在 Visual Studio 中创建了一个 lib 文件。我已经在我的 Qt App 中包含了包含函数原型的头文件，并且还在 .pro 文件中添加了 lib 文件，如下所示

```
 win32: LIBS += -L$$PWD/../Lib/ -lCpLib
        INCLUDEPATH += $$PWD/../Lib
        DEPENDPATH += $$PWD/../Lib
        win32: PRE_TARGETDEPS += $$PWD/../Lib/CpLib.lib 
```

我从我的 Qt 应用程序中调用了这些函数。它显示编译错误为“未定义的引用”请帮助我。

问候....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:44:03.273

LIBS 的规范是以 gcc 格式传递链接器参数（即`-L`用于指定目录和`-l`指定库名称）。

在 Visual Studio 中创建 lib 文件后，您需要指定完整的库名称

例如

```
win32: LIBS += yourlibrary.lib 
```

或者，使用 MinGW 重新编译库

# magento - 从 Magento 销售/订单模型中提取商品 SKU？

> ID：10535540
> 
> 赞同：2
> 
> 时间：2012-05-10T13:56:37.347
> 
> 标签：magento

我正在编写一个应该在每晚结束时运行的脚本。它应该查看当天销售了多少特定产品（最好按 SKU）并进行统计。这个过程还有第二部分，但现在我只满足于呼出正确的值。我对如何做到这一点感到困惑。这是我到目前为止所拥有的：

```
require_once('../app/Mage.php');
ini_set("error_reporting",E_ALL);
ini_set("display_errors",true);
umask(0);

Mage::app('admin');

// Some sort of SKU counter variable
$sku_counter = 0;

// Create order collection object
$collection = Mage::getModel('sales/order')->getCollection();

// Apply date filter. This would be 1 day in production but using this range as a test.
$collection->addFieldToFilter(
 'created_at', 
 array('from' => '2012-05-01', 'to' => '2012-05-09')
);

// Iterate it for displaying results
foreach ($collection as $order) {

    // This is where I fall apart. I know I need to either get all items or only get
    // items with the specific SKU. After that I need to get the quantity sold of that SKU
    // and add it to my $sku_counter. 

   echo 'There were " . $sku_counter . "sales of SKU XX-XXXX yesterday.";

} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:29:55.290

试试这个：

```
require_once('../app/Mage.php');
ini_set("error_reporting",E_ALL);
ini_set("display_errors",true);
umask(0);

Mage::app('admin');

// Some sort of SKU counter variable
$sku_counter = array();

// Create order collection object
$collection = Mage::getModel('sales/order')->getCollection();

// Apply date filter. This would be 1 day in production but using this range as a test.
$collection->addFieldToFilter(
 'created_at', 
 array('from' => '2012-05-01', 'to' => '2012-05-09')
);

// Iterate it for displaying results
foreach ($collection as $order) {
    foreach ($order->getAllItems() as $item) {
        if (!isset($sku_counter[$item->getSku()])) {
            $sku_counter[$item->getSku()] = 0;
        }
        $sku_counter[$item->getSku()] += (float) $item->getQtyOrdered();
    }
} 
```

# c# - 为 RichTextBox 中的块设置偏移量

> ID：10535543
> 
> 赞同：0
> 
> 时间：2012-05-10T13:56:42.247
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0, silverlight-3.0

如何在 Windows Phone 的 RichTextBox 元素中为某些 Block 设置 Margin 属性？

```
<RichTextBox>
    <Paragraph>Today I am going to talk about RichTextBox, I know you must be having lot of expectations from this RichTextBox. Here I will try my best to make you aware of what will work and what will not work in this short post for RichTextBox in Windows Phone </Paragraph>
</RichTextBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:06:58.467

您可以使用`InlineUIContainer`TextBlock 并将其放入其中：

```
<RichTextBox>
            <Paragraph>
                <InlineUIContainer>
                    <TextBlock Text="Today I am going to talk about RichTextBox, I know you must be having lot of expectations from this RichTextBox. Here I will try my best to make you aware of what will work and what will not work in this short post for RichTextBox in Windows Phone"
                               TextWrapping="Wrap"
                               Margin="10" />
                </InlineUIContainer>
            </Paragraph>
        </RichTextBox> 
```

# c# - 使用 RadialGradientBrush 绘制球体

> ID：10535547
> 
> 赞同：8
> 
> 时间：2012-05-10T13:57:00.317
> 
> 标签：c#, wpf, drawing, gradient, radial-gradients

我正在尝试在 WPF 中为游戏绘制球形碎片。使用 RadialGradientBrushs 将碎片绘制为椭圆。正如你在下面看到的，我的黑色作品看起来很棒，但是很难让白色的作品有任何深度而不让它们看起来是灰色的。

![在此处输入图像描述](../Images/e6d8ac47afbcf63d1dc478e13e5041fd.png)

我目前正在使用：

```
private readonly Brush _whitePieceBrush = new RadialGradientBrush(Colors.Snow, Colors.Ivory);
private readonly Brush _blackPieceBrush = new RadialGradientBrush(Colors.DarkGray, Colors.Black);

...

using (DrawingContext dc = _piecesVisual.RenderOpen())
{
    ....
    Brush brush = piece.Value.IsBlack ? _blackPieceBrush : _whitePieceBrush;
    var pen = new Pen(new SolidColorBrush(Colors.Black), 0.5); 
    dc.DrawEllipse(brush, pen, new Point(posX, posY), 15, 15);
    ...

} 
```

白色碎片周围的黑色圆圈无济于事，但没有它们，它看起来更糟。（如果我能找到一种更好的方法来绘制它们，我会删除它）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T14:45:42.520

像下面这样的东西呢。焦点有点偏离中心，我发现这改善了空间印象。

![在此处输入图像描述](../Images/ef0fedb44be38cf9bc911537ff3e8cf9.png)

```
<Ellipse Width="60" Height="60">
    <Ellipse.Fill>
        <RadialGradientBrush GradientOrigin="0.3,0.3">
            <RadialGradientBrush.GradientStops>
                <GradientStop Color="White" Offset="0"/>
                <GradientStop Color="White" Offset="0.3"/>
                <GradientStop Color="#FFF0F0F0" Offset="1"/>
            </RadialGradientBrush.GradientStops>
        </RadialGradientBrush>
    </Ellipse.Fill>
</Ellipse> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T14:11:53.697

我试过：

```
 private readonly Brush _whitePieceBrush = new RadialGradientBrush()
    {
        GradientStops = new GradientStopCollection
        {

            new GradientStop(Colors.WhiteSmoke,0.3),
            new GradientStop(Colors.LightGray, 1.0),

        }
    };
    private readonly Brush _whitePieceBorder = new SolidColorBrush(Colors.Silver); 
```

![董事会图片](../Images/68be029bb794e515a3807b817caaa3b6.png)

* * *

接受 Clemens 的建议并让他们偏离中心： **让他们有点偏离中心：** 我认为这对黑人比白人更有帮助，但仍然有进步

```
 private static readonly Point _lightSource = new Point(0.3, 0.35);

    private readonly Brush _blackPieceBrush = new RadialGradientBrush(Colors.DarkGray, Colors.Black)
    {
        GradientOrigin = _lightSource
    };
    private readonly Brush _blackPieceBorder = new SolidColorBrush(Colors.Black);

    private readonly Brush _whitePieceBrush = new RadialGradientBrush()
    {
        GradientOrigin = _lightSource,
        GradientStops = new GradientStopCollection
        {

            new GradientStop(Colors.WhiteSmoke,0.3),
            new GradientStop(Colors.LightGray, 1.0),

        }
    };
    private readonly Brush _whitePieceBorder = new SolidColorBrush(Colors.Silver); 
```

![在此处输入图像描述](../Images/f5aebd9ef05e34f4efeb1e5afbc5f009.png)

# javascript - 克隆 observables 的最佳方法？

> ID：10535548
> 
> 赞同：11
> 
> 时间：2012-05-10T13:57:00.890
> 
> 标签：javascript, knockout.js

在 Knockout 中克隆 Observable 对象以建立某种事务机制的最佳方法是什么？

例如编辑这个模型：

```
var Action = function (name, ownerType, condition, expression, args) {
    var self = this;
    this.name = ko.observable(name);
    this.ownerType = ko.observable(ownerType);
    this.condition = ko.observable(condition);
    this.expression = ko.observable(expression);
    this.args = ko.observable(args);
}; 
```

我想在用户编辑它之前保存该对象的状态。如果用户将取消编辑 - 回滚对象状态。

最简单的方法是创建另一个项目，例如：

```
self.tempAction = new Action(action.name(), action.ownerType(), action.condition(), action.expression(), action.args()); 
```

但我不确定它是优雅的解决方案..

那么，有什么想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-10T15:09:31.260

我通常会执行以下操作：

首先，我有一个模仿 jQuery 函数的`$.extend`函数。`target`它使用对象的所有`observable`（或不可观察的）属性值填充`source`对象。

```
// extends observable objects intelligently
ko.utils.extendObservable = function ( target, source ) {
    var prop, srcVal, isObservable = false;

    for ( prop in source ) {

        if ( !source.hasOwnProperty( prop ) ) {
            continue;
        }

        if ( ko.isWriteableObservable( source[prop] ) ) {
            isObservable = true;
            srcVal = source[prop]();
        } else if ( typeof ( source[prop] ) !== 'function' ) {
            srcVal = source[prop];
        }

        if ( ko.isWriteableObservable( target[prop] ) ) {
            target[prop]( srcVal );
        } else if ( target[prop] === null || target[prop] === undefined ) {

            target[prop] = isObservable ? ko.observable( srcVal ) : srcVal;

        } else if ( typeof ( target[prop] ) !== 'function' ) {
            target[prop] = srcVal;
        }

        isObservable = false;
    }
    return target;
}; 
```

然后我有一个`copy`函数，它基本上将要复制的对象转换为`JSON`，然后获取`JSON`副本并构建一个新的 javascript 对象。这样可以确保所有内存指针都不会被复制，并且您拥有一个与原始对象匹配的全新对象。这里的一个关键是您必须传入一个新对象的空实例（否则我们将不知道要填充哪些属性）

```
// then finally the clone function
ko.utils.clone = function(obj, emptyObj){
    var json = ko.toJSON(obj);
    var js = JSON.parse(json);

    return ko.utils.extendObservable(emptyObj, js);
}; 
```

然后你可以像这样使用它：

```
var tempAction = ko.utils.clone(action, new Action()); 
```

# highcharts - 用于系列和标志的 Highchart/stock 工具提示格式化程序

> ID：10535549
> 
> 赞同：6
> 
> 时间：2012-05-10T13:57:03.303
> 
> 标签：highcharts, highstock

在以下示例中，我如何格式化两个系列和标志的工具提示？

[http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/stock/plotoptions/flags/](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/stock/plotoptions/flags/)

我想在系列工具提示中显示额外信息，并在标志工具提示中显示其他数据。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T13:01:48.187

使用以下功能作为工具提示格式化程序 -

```
tooltip: {
  shared:true,
formatter: function(){
        var p = '';
        console.log(this);

        if(this.point) {
          p += '<b>'+ Highcharts.dateFormat('%A, %b %e, %Y', this.point.x) +'</b><br/>';
          p += this.point.config.text // This will add the text on the flags
        }
        else {              
          p += '<b>'+ Highcharts.dateFormat('%A, %b %e, %Y', this.x) +'</b><br/>';
          $.each(this.points, function(i, series){
            p += '<span style="color:' + this.series.color + '">' + this.series.name + '</span>: <b>'+ this.y + ' kWh ($' + Highcharts.numberFormat(this.y * rate, 0) + ')</b><br/>';
          });

        }
        return p;
      }} 
```

另请参阅此 JSFiddle：http: [//jsfiddle.net/aTcFe/](http://jsfiddle.net/aTcFe/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-11T01:21:22.827

一种方法是创建一个工具提示格式化程序来检查当前对象是否是一个点。

```
tooltip: {
            formatter: function(){
                if(this.point) {
                    return "this is a flag"
                }
                else {
                    return "this is a line"
                }
            }                
        } 
```

您可以更进一步并为您的标志命名，然后检查该点是否有名称（而不是它是否存在）以防止非标志点获得相同的格式。

这是您修改的示例以反映以前的[http://jsfiddle.net/aTcFe/](http://jsfiddle.net/aTcFe/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-18T15:48:52.793

使用 Highstock 2.1.7，您总是会得到一个`this.point`对象，因此您应该使用它`this.series.type === 'flags'`来检测标志是否存在。

一个例子是：

```
formatter: function () {
     if (this.series.type === 'flags') {
          // Flags formatting
     }
     else {
          // Default formatting
     }
} 
```

# html - 我的页脚不会位于底部

> ID：10535550
> 
> 赞同：0
> 
> 时间：2012-05-10T13:57:07.940
> 
> 标签：html, css, wordpress, iframe, social-networking

我无法像在博客页面上尝试那样让页脚坐在底部：http: [//c3carlingford.org.au/a-nice-and-tasty-blog/](http://c3carlingford.org.au/a-nice-and-tasty-blog/)

当社交媒体出现时，它会向上滑动......

不知道为什么...

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:07:22.133

您的元素`noteholder masonry`浮动到左侧。

正因为如此，它不会占用盒子模型中的空间，并且它下面的所有东西都会跳到他们认为数据结束的地方。

要么删除它的浮动属性，要么使用其中的`clear:both`div 元素将其拉伸到其内容的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:06:37.437

您的主要内容未正确放置在容器中。如果你用 Firebug 将鼠标悬停在它上面，你的页脚实际上确实位于容器的底部。

谷歌 clearfix 方法并将其应用到父容器，这将把它向下推。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-10T14:00:32.057

尝试在您的 CSS 中添加类似这样的内容：

```
#footer {
    ...
    position: fixed;
    bottom: 0;
} 
```

如果您不想要固定页脚，请尝试`float: left;`从`<div class="noteholder masonry">`

# java - 使用 JPA 查询表中两个字段的语法

> ID：10535553
> 
> 赞同：0
> 
> 时间：2012-05-10T13:57:13.400
> 
> 标签：java, jpa, persistence, jpql, toplink

参考[JPQL](http://docs.oracle.com/javaee/5/tutorial/doc/bnbuf.html)，我不清楚如何查询表。

我想要的是，如果它存在，`@Entity Note`对于给定的messagId 和组，但我不明白语法。

如何为以下查询指定 messageId 和组？

```
public void persist(Msg message) {
    LOG.info("\t" + message);
    LOG.info("isOpen?" + em.isOpen());
    em.getTransaction().begin();
    int id = message.getId();
    Query q = em.createQuery("SELECT  n "
            + "FROM Notes n WHERE n.messageId = :messageId "
            + "AND n.group = :group");
    List results = q.getResultList();
    em.getTransaction().commit();
    for (Object o : results) {
        LOG.info("object is \n\n" + o);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:00:41.770

您需要使用 setParameter() 设置查询的参数。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Querying#Parameters](http://en.wikibooks.org/wiki/Java_Persistence/Querying#Parameters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:02:00.107

使用[setParameter(String name, Object value)](http://docs.oracle.com/javaee/5/api/javax/persistence/Query.html)

```
q.setParameter("messageId", id).setParameter("group", group); 
```

为了使它更好，请使用[TypedQuery](http://docs.oracle.com/javaee/6/api/javax/persistence/TypedQuery.html)

```
public void persist(Msg message) {
    LOG.info("\t" + message);
    LOG.info("isOpen?" + em.isOpen());
    em.getTransaction().begin();
    int id = message.getId();
    TypedQuery<Note> q = em.createQuery("SELECT  n "
            + "FROM Notes n WHERE n.messageId = :messageId "
            + "AND n.group = :group", Note.class);
    q.setParameter("messageId", id).setParameter("group", group);
    List<Note> results = q.getResultList();
    em.getTransaction().commit();
    for (Note o : results) {
        LOG.info("object is \n\n" + o);
    }
} 
```

# r - 使用valgrind调试R，提取mts对象的列导致valgrind崩溃

> ID：10535557
> 
> 赞同：1
> 
> 时间：2012-05-10T13:57:18.913
> 
> 标签：r, valgrind

我正在尝试使用 valgrind 调试我的 R 包，但我无法超过加载数据的点，因为 valgrind 在尝试提取多元 mts 对象的单个时间序列对象时崩溃。我正在使用带有平台 x86_64-redhat-linux-gnu（64 位）的 R 2.15.0。

简约的代码是这样的：

```
> data(Seatbelts)
> y<-Seatbelts[,"VanKilled"] 
```

似乎崩溃是由于未在分配中定义安全带的行，但如果我使用命令 y<-Seatbelts[1:192,"VanKilled"] 生成的对象不再是时间序列对象. 有什么聪明的方法可以解决这个问题吗？

这是 valgrind 给出的错误

```
vex amd64->IR: unhandled instruction bytes: 0x66 0xF 0x3A 0xB 0xC0 0xC
==31160== valgrind: Unrecognised instruction at address 0x399fe26990.
==31160== Your program just tried to execute an instruction that Valgrind
==31160== did not recognise.  There are two possible reasons for this.
==31160== 1\. Your program has a bug and erroneously jumped to a non-code
==31160==    location.  If you are running Memcheck and you just saw a
==31160==    warning about a bad jump, it's probably your program's fault.
==31160== 2\. The instruction is legitimate but Valgrind doesn't handle it,
==31160==    i.e. it's Valgrind's fault.  If you think this is the case or
==31160==    you are not sure, please let us know and we'll try to fix it.
==31160== Either way, Valgrind will now raise a SIGILL signal which will
==31160== probably kill your program.

 *** caught illegal operation ***
address 0x399fe26990, cause 'illegal opcode'

Traceback:
 1: ts(y, start = start(x), frequency = frequency(x))
 2: `[.ts`(Seatbelts, , "VanKilled")
 3: Seatbelts[, "VanKilled"]
aborting ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:14:01.123

您的程序正在使用您的 valgrind 版本不支持的指令 (ROUNDSD)。

要做的第一件事是确保您使用的是最新版本的 valgrind，最好尝试 svn 版本，因为它支持该指令的某些（但不是全部）变体。

如果它仍然失败，那么您应该在 valgrind 错误跟踪器中报告它，尽管您可能会发现它已经被报告了。

# asp.net-mvc-3 - 未安装 MVC3 时的 MVC 3 部署 - 避免为每个新站点部署 Bin

> ID：10535558
> 
> 赞同：3
> 
> 时间：2012-05-10T13:57:23.713
> 
> 标签：asp.net-mvc-3, deployment, shared-hosting

我使用没有安装 asp.net mvc3 的共享主机提供商。在部署我的应用程序时，我总是为所需的 dll 执行 a bin deploy：

```
Microsoft.Web.Infrastructure
System.Web.Helpers
System.Web.Mvc
System.Web.Razor
System.Web.WebPages
System.Web.WebPages.Deployment
System.Web.WebPages.Razor 
```

我的问题是——我可以将这些 dll 放在我的共享主机空间中的某个位置，并让我部署的应用程序在那里寻找它们吗？这样我可以避免在每次部署新的 MVC3 应用程序时找到它们并通过 ftp 传输它们？

只是为了添加更多描述。我的共享提供商让我在我的根目录中设置应用程序。所以我在想的是具有以下结构：

**root/bin/（上面的dll会在这里）**

**root/MyApp** - 需要某种方式在根目录下的 bin 中找到 dll。这可能属于**绑定提示**的范畴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:08:50.167

您可以使用 ILMerge 将它们组合成一个 DLL。

[http://research.microsoft.com/en-us/people/mbarnett/ILMerge.aspx](http://research.microsoft.com/en-us/people/mbarnett/ILMerge.aspx)

在那个页面上，他们还提到了从资源中加载 DLL，我从未真正尝试过。

[http://blogs.msdn.com/b/microsoft_press/archive/2010/02/03/jeffrey-richter-excerpt-2-from-clr-via-c-third-edition.aspx](http://blogs.msdn.com/b/microsoft_press/archive/2010/02/03/jeffrey-richter-excerpt-2-from-clr-via-c-third-edition.aspx)

除此之外，如果每个站点都是共享空间，您将需要每个站点的 dll。

**编辑**

试试这个：

```
AppDomain.CurrentDomain.AssemblyResolve += (sender, args) => {

      String pathname = "Your path/" + new AssemblyName(args.Name).Name + ".dll";
      var assemblyData = System.IO.File.ReadAllBytes(pathname);
      return Assembly.Load(assemblyData);
   }

}; 
```

# c# - Linq比较字符串日期

> ID：10535560
> 
> 赞同：1
> 
> 时间：2012-05-10T13:57:25.420
> 
> 标签：c#, linq

我想比较日期的字符串。我正在尝试跟踪 linq 查询，但我得到运算符可以应用于字符串到字符串类型的操作数。

```
 var descriptions = 
        from a in db.Descriptions 
        where a.ID == 12  
        && a.arrivalDate >= "20110101000000" 
        && a.arrivalDate <= "20110131000000" 
        select a; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:05:34.970

您无法将`DateTime`变量与`String`变量进行比较。

所以你需要创建一个`DateTime`第一个：

```
String str1 = "20110101000000";
String str2 = "20110131000000";
String format = "yyyyMMddhhmmss";
DateTime d1 = DateTime.ParseExact(str1, format,null);
DateTime d2 = DateTime.ParseExact(str2, format, null); 
```

和 LINQ 查询：

```
var descriptions = 
    from a in db.Descriptions
    let arrivalDate = DateTime.ParseExact(a.arrivalDate, format,null)
    where a.ID == 12  
    && arrivalDate  >= date1
    && arrivalDate  <= date2
    select a; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T13:59:54.337

```
var descriptions = db.Descriptions.Where(a => 
                     a.ID == 12 && 
                     a.arrivalDate >= Convert.ToDateTime("20110101000000") &&
                     a.arrivalDate <= Convert.ToDateTime("20110131000000")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T14:02:14.583

在我看来，您想要比较日期，而不是字符串。

`"20110101000000"`是字符串，不是日期。

`new DateTime(2011, 01, 01)`是一个日期。

```
var descriptions = from a in db.Descriptions           
                   where a.ID == 12
                   &&    DateTime.Parse(a.arrivalDate) >= new DateTime(2011,1,1)
                   &&    DateTime.Parse(a.arrivalDate) <= new DateTime(2011,1,31)
                   select a; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T13:59:47.160

字符串类不会覆盖 >= 或 <=。您需要使用静态 String.Compare(string, string) 方法。

# php - pear NET_DNS 并一次获取所有 DNS 记录

> ID：10535562
> 
> 赞同：1
> 
> 时间：2012-05-10T13:57:31.357
> 
> 标签：php, dns

我需要使用 pear NET_DNS 获取所有可用的 DNS 记录。如果您使用 dns_get_record 很简单，您只需输入：

```
dns_get_record('http://example.com,DNS_ALL) 
```

我用了 ：

$DNS_obj->resolver->search("cnn.com","DNS_ALL");

不幸的是， **DNS_ALL**不适用于 NET_DNS pear 包。我可以使用 MX、A、NS 等，但不能使用 DNS_ALL。

我不能使用**dns_get_record**函数，因为它在 MACs PHP 安装中不可用。

# mysql - 来自一个表中的潜在复杂嵌套子查询 - 根据按日期排序的行位置将行更改为列

> ID：10535563
> 
> 赞同：0
> 
> 时间：2012-05-10T13:57:35.193
> 
> 标签：mysql

我有一个格式的表格

```
 Date       | Name  | Result
  ---------------------------
  2012-05-02 | bob   | W
  2012-04-01 | kevin | D
  2012-03-21 | mark  | L
  2012-03-19 | bob   | W 
```

并想生成一个查询，然后我可以导出到 excel。目前该表包含大约 3000 行，一个名称可能出现一次到 60 次之间的任何地方，目前数据中有 893 个不同的唯一名称。

我希望列包含按日期列升序排序的结果的格式，即 R1 是该名称的最旧结果，R2 是第二旧的结果。最后一列 (Rn) 将是最近的结果。以及查看条纹等的简单方法。

```
 Name   | R1 | R2 | R3 ....
   -------------------
   Bob    | W  | W  | D | W ....
   Mark   | D  | L  |
   Trevor | 
```

我可以通过选择名称来为单个名称执行此操作，日期结果按日期升序排序，但这作为列返回，当然我可以在 excel 中手动编辑列，但是有没有办法在 sql 中为每个名称执行此操作？

就像是：

```
 select f_name,
 select f_result from table a where f_name=b.f_name order by f_date asc limit 1   as r1, 
 select f_result from table a where f_name=b.f_name order by f_date asc limit 2,1 as r2, 
 select f_result from table a where f_name=b.f_name order by f_date asc limit 3,1 as r3 
 from table b, table b
 where a.id=b.id 
```

但显然是编程，因为这将是相当耗时的类型，更新和维护。

亲切的问候

编辑：我应该注意我有权创建表或视图等，如果创建可以通过 cron 作业与数据保持同步的东西会更容易。然后我的导出是 select * from...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:57:33.533

根据我的问题创建了一个基表，添加了列而不是运行 52 行更新脚本以插入限制为 0,1 到 51,1 的值以获得正确的结果。

性能是我的服务器上的一个问题，因此最好一次将它们分组为 10/15 个查询。

# iphone - iPhone使用segues从UITextField呈现模态视图？

> ID：10535564
> 
> 赞同：1
> 
> 时间：2012-05-10T13:57:45.633
> 
> 标签：iphone, uitextfield, presentmodalviewcontroller, uistoryboardsegue

正如标题所述，我正在使用 iOS5 功能故事板。我有一个文本字段，点击时应显示模态视图（带选择器）。我想知道这个动作可以使用 segues 触发吗？

当您有按钮或单元格时，您只需按住 ctrl 拖动即可查看要呈现的控制器。我对文本字段做了同样的事情，但没有可见的结果。我只是按下它，只有键盘弹出。没有显示模态视图。我应该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T17:28:47.170

对您的问题有一些想法，希望对您有所帮助：

*   如果你`viewController`采用`UITextFieldDelegate`，那么你可以实现可选的委托方法`textFieldDidBeginEditing:`，并在成为第一响应者时得到通知`textField`并做你想做的事情，例如呈现一个模式视图控制器（[UITextFieldDelegate 协议参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)）。但是，当`textField`成为第一响应者并且键盘弹出时，同时您也会弹出一个模态视图，这听起来不太友好。

*   如果用户只有有限的选择可供选择，为什么要使用`textField`?

*   另一种选择可能是实施`textFieldShouldBeginEditing:`（同样，您需要采用`UITextFieldDelegate`）。根据苹果，

> 当用户执行通常会启动编辑会话的操作时，文本字段首先调用此方法以查看是否应该实际进行编辑。在大多数情况下，您只需从此方法返回 YES 即可继续进行编辑。

您将`return NO`不会弹出键盘，而是弹出模态视图控制器。您可以通过首先调用`presentViewController:animated:completion:`然后返回 NO（[UIViewController 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html)）来做到这一点——我没有对此进行测试，但听起来它应该可以工作。

*   我不是百分百确定。我想我在某处听到`segue`故事板中的 s 被调用- 认为（我可能错了），但如果这是真的，当成为第一响应者时，那不是控制事件，因此不会工作.`UIControlEvent``UIControlEventTouchUpInside``UIButton``UITextField``segue`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T16:13:52.257

Weeel，textFieldShouldBeginEditing：方法在 ios8 上运行良好

但是它在 ios7 上不能始终如一地工作

我已结束设置 textfield.enabled = NO 并用透明 uibutton 覆盖 uitextfield 以触发 VC 演示

# java - Java - 我如何从匿名内部类访问非最终变量？

> ID：10535567
> 
> 赞同：0
> 
> 时间：2012-05-10T13:57:53.307
> 
> 标签：java, anonymous-inner-class

正如您在以下代码中看到的，我正在从 ActionListener 匿名内部类访问 JLabel。这为我提供了没有错误，所以**这是如何允许的，但是如果 JLabel 是 INSIDE，那么没有 final 修饰符就不允许该方法？**

```
JLabel e = new JLabel("");
        public void myMethod() {

            JButton b = new JButton("ok");
            b.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent arg0) {
                    e.setSize(200,200);

                }

            });

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:59:04.067

如果变量在方法def内，那么它是一个**局部**变量——并且您正在实例化一个在该方法执行后将存在的对象，并且该局部变量的生命周期已经结束（它在方法的堆栈帧中在方法返回时销毁）。为了让它工作**，**需要一些编译器魔法，这通常被称为*闭包*，即使它当前在 Java 中的实现是如此蹩脚。编译器实际上会合成一个类，该类实现`ActionListener`并具有一个实例变量，局部变量的值将被复制到该实例变量中。

`final`这是 Java 特有的限制，由于线程安全问题，您只能关闭var。这里的故事是，Java 开发人员的直觉根深蒂固，本地 var 始终是线程安全的——它不能在方法执行的中间更改（该方法没有显式地进行更改），可以如果你可以关闭非最终变量，这将被违反，因为该关闭可以与当前执行的方法并行执行并更改该变量。这会导致一些非常违反直觉的行为。

但是，有一个（有点蹩脚的）解决方法：

```
public void myMethod() {
    final JLabel[] e = {new JLabel("")};
    JButton b = new JButton("ok");
    b.addActionListener(new ActionListener() {
       @Override public void actionPerformed(ActionEvent arg0) {
         e[0].setSize(200,200);
    }});
} 
```

`e`现在是一个单元素数组，它驻留在堆上，不会被方法的堆栈帧破坏。您还可以应用您的直觉来查看现在它绝对**不是**线程安全的，并且侦听器可以轻松地将其值更改为`e[0]`完全不同的值，并且此处显示的方法将观察到该更改，而其中没有显式的突变代码。

# php - 伪装在 WordPress 安装中的恶意软件

> ID：10535570
> 
> 赞同：0
> 
> 时间：2012-05-10T13:57:56.147
> 
> 标签：php, wordpress, virus, malware, trojan

我们网站的一些用户在访问该网站时开始收到“木马威胁”的报告。听到这个后，我搜索了恶意软件代码，但无法在任何地方找到它。

我安装了 Sucuci SiteCheck 插件，它报告了以下内容：

[http://sitecheck.sucuri.net/scanner/?&scan=http://www.londonirishcentre.org](http://sitecheck.sucuri.net/scanner/?&scan=http://www.londonirishcentre.org)

有人知道如何找到流氓代码吗？我知道全新的 WP 安装会是最好的，但该网站已经完成了很多自定义工作，我宁愿将其留给最后一个选项。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:15:09.023

[我在下面为另一个最近的stackoverflow问题](https://stackoverflow.com/questions/10422503/php-ssh-regex-script-command-to-delete-identical-malware-code-from-many-files/10422781#10422781)创建了这个函数，你需要找到一个受感染的php文件，在顶部或底部你会看到一个经过评估的base_64编码字符串（它很可能在每个文件中都不同，所以寻找特定的字符串不会工作）但是使用这个函数，**如果**它是我怀疑的注入字符串，它将循环整个项目并删除受感染的代码：

```
<?php 
error_reporting(E_ALL);
//A Regex to match the infection string
$find='<\?php @error_reporting\(0\); if \(!isset\((.*?)\?>';
//Do It!
echo cleanMalware('./',$find);

function cleanMalware($path,$find){
    $return='';
    ob_start();
    if ($handle = opendir($path)) {
        while (false !== ($file = readdir($handle))) {
            if ($file != "." && $file != "..") {
                if(is_dir($path.'/'.$file)){
                    $sub=cleanMalware($path.'/'.$file,$find);
                    if(isset($sub)){
                        echo $sub.PHP_EOL;
                    }
                }else{
                    $ext=substr(strtolower($file),-3);
                    if($ext=='php'){

                        $filesource=file_get_contents($path.'/'.$file);
                        //The cleaning bit
                        echo "The infection was found in the file '$path/$file and has been removed from the source file.<br>";
                        $clean_source = preg_replace('#'.$find.'#','',$filesource);
                        // $clean_source = str_replace($find,'',$filesource);
                        file_put_contents($path.'/'.$file,$clean_source);
                    }else{
                        continue;
                    }
                }
            }
        }
        closedir($handle);
    }
    $return = ob_get_contents();
    ob_end_clean();
    return $return;
}
?> 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:04:20.060

在整个代码库中搜索：`iframe`, `eval`,`base64_decode`

可能有很多受感染的区域，但最有可能是模板文件夹或 index.php

如果您无法搜索并删除您需要从头开始安装新实例的所有区域。

# sql - 在从多个表中选择行时使用 sql server 临时表

> ID：10535571
> 
> 赞同：0
> 
> 时间：2012-05-10T13:57:58.610
> 
> 标签：sql, sql-server

我有几个从多个表中选择数据的存储过程 (SP)。这个 SP 中的每一个都有几个搜索参数，我试图在不同表的不同列中找到它们。我没有在所有表上进行连接，而是使用临时表一次从 1 个或 2 个表连接中过滤掉行，并将结果存储在新表中并删除以前的表。该查询的运行速度比编写单个选择语句和多个连接要快得多，但是我只想知道使用临时表并将它们放入选择查询中是否有任何站点影响。
是否有任何文章举例说明如何为 SQL Server 2008 编写如此复杂的查询的任何其他替代方案？
请分享如何在编写此类复杂查询时保持 SQL 服务器有效使用内存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:08:00.777

尽管本文详细介绍了将临时表作为表变量的替代方案的优缺点（而不是一般意义上的），但对于您可能要考虑使用/不使用临时表的原因仍有一些好处。

[这里](http://www.developerfusion.com/article/84397/table-variables-v-temporary-tables-in-sql-server/)

# mysql - 在 MySQL 中优化前向索引

> ID：10535575
> 
> 赞同：2
> 
> 时间：2012-05-10T13:58:06.653
> 
> 标签：mysql, sql, database, query-optimization

我正在使用 MySQL 在 wiki 上构建前向索引。我遇到了查询的性能问题，我希望能帮助我优化我的架构或查询

数据库大约 1GB，它有三个表

*   fi_page 是 800k wiki 页面的表
*   fi_keyword 是一个包含 70k 个关键字的表

    ```
    CREATE TABLE `fi_keyword` (  
      `id` int(11) NOT NULL AUTO_INCREMENT,  
      `keyword` varchar(100) NOT NULL,  
      PRIMARY KEY (`id`),  
      UNIQUE KEY `keyword` (`keyword`)  
    ); 
    ```

*   fi_titlekeywordlink 是一个包含 600 万个条目的表格，将关键字链接到 wiki 页面

    ```
    CREATE TABLE `fi_titlekeywordlink` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `keyword_id` int(11) NOT NULL,
      `page_id` int(11) NOT NULL,
      PRIMARY KEY (`id`),
      KEY `fi_titlekeywordlink_a6434082` (`keyword_id`),
      KEY `fi_titlekeywordlink_c2d3d2bb` (`page_id`),
      CONSTRAINT `keyword_id_refs_id_67197756` FOREIGN KEY (`keyword_id`) REFERENCES `fi_keyword` (`id`),
      CONSTRAINT `paper_id_refs_id_705ddf03` FOREIGN KEY (`page_id`) REFERENCES `fi_page` (`id`)
    ); 
    ```

我正在将搜索“搜索词嘉豪”转换为 sql 查询，例如

```
 select p.*
      from
        fi_keyword as k0, fi_titlekeywordlink as l0,
        fi_keyword as k1, fi_titlekeywordlink as l1,
        fi_keyword as k2, fi_titlekeywordlink as l2,
        fi_keyword as k3, fi_titlekeywordlink as l3,
        fi_page as p
      where
        k0.keyword = e and k0.id = l0.keyword_id and p.id = l0.paper_id
        and k1.keyword = 'search' and k1.id = l1.keyword_id and p.id = l1.paper_id
        and k2.keyword = 'terms' and k2.id = l2.keyword_id and p.id = l2.paper_id
        and k3.keyword = 'galore' and k3.id = l3.keyword_id and p.id = l3.paper_id
      limit 1,10 
```

但是，这需要大约半秒才能在我的 MBP 上运行。您对如何通过更改架构或查询来加速此类操作有什么建议吗？在这种情况下，我不能使用单独的搜索服务器，前向索引必须在 MySQL 上运行。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:13:24.797

以插入性能为代价，您可以`id`从两个表中删除代理主键列，并将`keyword`fi_keyword 和 ( `keyword_id`, `page_id`) 列上的主键索引作为 fi_titlekeywordlink 的主键索引。

如果您使用 InnoDB，主键是聚集索引，因此它们要快得多。

即使您不进行此更改，fi_titlekeywordlink 上 ( `keyword_id`, `page_id`) 的复合（多列）索引也会提高性能，因为您将在 fi_titlekeywordlink 上有一个覆盖索引（MySQL 不必访问表数据）。这假设您的 MySQL 服务器有足够的 RAM 来容纳内存中的所有索引，并且您已配置 MySQL 服务器以允许它使用足够的 RAM 来做到这一点（配置变量在[MyISAM](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_key_buffer_size)和[InnoDB](http://dev.mysql.com/doc/refman/5.0/en/innodb-parameters.html#sysvar_innodb_buffer_pool_size)之间有所不同）。

有时，隐式 JOIN 可能会变得过于复杂，以至于 MySQL 无法正确优化。您还应该考虑使用`JOIN`和使用显式 ANSI 标准连接重写查询`ON`。

您可能只是`SELECT p.*`为了简洁而写，但请确保只选择您需要的列，这样您就不会返回不需要的数据。只返回您需要的列可以减少工作量。

此外，LIMIT 子句中的第一行是 0，因此`LIMIT 1, 10`跳过第一行。用于`LIMIT 0, 10`获取前 10 行。

# python - 尝试学习 TDD - 不太顺利

> ID：10535576
> 
> 赞同：3
> 
> 时间：2012-05-10T13:58:18.853
> 
> 标签：python, tdd

我已经尝试学习 Python 大约 6 周了。在这个网站上阅读了很多关于 TDD 的内容后，我买了 Roy Osherove*的 The Art of Unit Testing*（很棒的书！），尝试在学习 Python 的同时尝试 TDD。这本书使用.NET，但似乎没有问题。存根是存根，模拟是模拟。

当我在网上阅读和查看 TDD 示例时，我真的觉得我理解了为什么程序员会像他们那样编写代码。但是一旦我坐下来尝试自己，我一无所获。

举个昨天的例子：

我想为一个不太复杂的项目尝试 TDD。基本上，我想要的是一个类，它通过下载和解析 RSS 提要，保存一个包含（名称、日期）的元组列表。我为我的测试创建了一个新的 py 文件（还没有编写“真正的代码”）并编写了一个测试用例：

```
import unittest

from tv_schedule import TvSchedule

class TvScheduleTests(unittest.TestCase):
    def test_download_success_and_parse_failure(self):
        '''Successfully download RSS schedule for the specific user
           but fail parsing it'''
        self.tv = TvSchedule("User123")
        # Check if ParserException was thrown I guess

if __name__ == "__main__":
    unittest.main() 
```

...然后我有点卡住了。我认为（大声笑！）。我真的需要一些关于这是否只是愚蠢和/或我如何才能做得更好的指示。我的直觉说我做了坏事。

我想让 TvSchedule 类在后台进行下载/解析（使用[feedparser](http://wiki.python.org/moin/RssLibraries "提要解析器")），因此您只需创建该类的一个新实例，然后就可以使用它。也许这是糟糕的设计，也很难测试？另外，我将如何消除对通过网络检索 rss 提要的依赖？通过存根并始终返回包含示例提要的内存字符串？

一旦我离开了 TDD 教程和书籍喜欢使用的非常简单的计算器示例，我就陷入了困境。:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:42:33.497

您可能遇到的一个挑战是您的测试过于广泛。一次下载和解析意味着您将编写大量代码。尝试将第一个测试压缩一点。这可能会帮助你集中注意力。

另一个挑战可能是您编写的代码没有太多逻辑，您只是委托其他库进行下载和 RSS 解析。这使得很难解决问题。在这种情况下，这可能是一个尝试练习的相当无趣的例子。考虑尝试试驾像[康威的生命游戏](http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life "康威的人生游戏")这样的有趣但更简单的问题。

希望有帮助！

布兰登

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T14:04:36.670

我认为您需要查看[`nose`](http://readthedocs.org/docs/nose/en/latest/testing.html)and [`mock`](http://www.voidspace.org.uk/python/mock/)。

`nose`是一个很好的测试模块，它很好地补充`unittest`并提供了一个 CLI 命令来运行测试并使用插件为您提供有关测试平台结果的更多信息（代码覆盖率等）

`mock`是我们存根或模拟方法或对象的方式，这对于 HTTP 请求或与测试范围之外的服务交互的对象特别有用。

在您的示例中，我将对您的 feeder 对象进行一些修补，并将返回值设置为您的一些边缘案例并进行测试以确保它正确处理案例`self.assertTrue`，`self.assertIsInstance`（继承自`unittest.TestCase`）等...

通常，在使用 Python 进行 TDD 时`nose`，`unittest`我首先使用 a 编写 TestCase 的骨架，`setUp`有时使用 a`tearDown`来处理常见的模拟和存根。对于我定义的每个测试方法，我首先模拟我必须做的，围绕单元测试设置环境，然后调用方法/对象并做出断言。

在传统的 TDD 中，您首先设计测试，然后构建代码以使您的测试绿色。红色->绿色。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T00:41:17.877

每当您的测试标题中有“和”时，您都在测试两件事。一次测试一件事要好得多，所以我建议您应该将测试重构为两个。

其次，您希望以非常小的步骤进行。想想你接下来可以做的最小的事情，它不适用于当前的代码库。

当您没有代码时，通常最小的可能是创建目标类的示例。不要要求它做任何事情，只需创建它。

这几乎就是你所处的情况。所以你做对了！

您的代码不应编译，因为没有 TvSchedule。“不编译”算作红色。写一些代码让它编译，那就是Green。耶！

正如其他人所指出的，您应该在某处保留一个小 TODO 列表。在肯特贝克的书中，他使用便签。我喜欢在测试代码文件中有 TODO 列表。你的待办事项清单的范围应该是你打算在你将要花费的时间内完成的事情，例如半小时或两个小时或其他什么。不是一整天，只是从现在到下一次休息。然后你在你的 TODO 列表中添加和减去一些东西。帮助您专注于做“可能出错的最简单的事情”，然后再做下一步。

[编辑：添加 TODO 列表]

# c# - “此文件被阻止，因为它来自另一台计算机” - ajax 权限问题

> ID：10535578
> 
> 赞同：5
> 
> 时间：2012-05-10T13:58:21.717
> 
> 标签：c#, javascript, jquery, asp.net

我通过从我的站点下载的 html 使用 jQuery ajax 获取本地 xml 文件。

问题是每次下载文件时，用户都必须右键单击它-> 属性-> 取消阻止。否则 jquery ajax 会抛出“权限被拒绝”错误。

有没有办法将文件标记为受信任或类似的东西？下载文件时我应该在服务器端实现一些东西吗？或者在保存的 html 文件中在客户端添加一些东西？提前致谢。

![](../Images/1ed1a3b134c903e4fcbe9296201c5d71.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T13:25:10.423

NTFS 文件系统将此文件附加到一个不安全的标志。您可以使用 Sysinternals 中的一个名为 Streams 的实用程序来删除此标志。您可以从以下位置下载 Streams：

[http://technet.microsoft.com/en-us/sysinternals/bb897440.aspx](http://technet.microsoft.com/en-us/sysinternals/bb897440.aspx)

然后使用[Process 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)，您可以在获得文件后运行`streams -d <file.xml>`命令删除此标志。如何运行它：

```
Process runcommd = new Process();

runcommd.StartInfo.FileName = "streams";
runcommd.StartInfo.Arguments = " -d \"fullpath\\file.xml\"";

runcommd.StartInfo.UseShellExecute = false;
runcommd.StartInfo.CreateNoWindow = false;

runcommd.StartInfo.RedirectStandardError = true;
runcommd.StartInfo.RedirectStandardOutput = true;
runcommd.StartInfo.RedirectStandardInput = true;

// now run it
runcommd.Start();

// be sure that we end
runcommd.StandardInput.Flush();
runcommd.StandardInput.Close(); 
```

Streams 来自 MS 站点，因此它的官方和可信来源，它只是一个从文件中删除此标志的实用程序。我认为你可以完成你的工作。

相关： [https ://superuser.com/questions/38476/this-file-came-from-another-computer-how-can-i-unblock-all-the-files-in-a](https://superuser.com/questions/38476/this-file-came-from-another-computer-how-can-i-unblock-all-the-files-in-a)

[http://www.k9ivb.net/files/This%20file%20came%20from%20another%20computer%20and%20might%20be%20blocked.pdf](http://www.k9ivb.net/files/This%20file%20came%20from%20another%20computer%20and%20might%20be%20blocked.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T22:48:00.487

@Aristos 在备用文件流问题上很准确，但是这可以在不使用外部 EXE (streams.exe) 的情况下完成。对于稍后查看此内容的其他人，您可以运行以下命令来清空备用文件流 (AFS)：

```
echo. > my_blocked_file.zip:Zone.Identifier 
```

假设文件名为 my_blocked_file.zip，这将清空 AFS 的内容。此外，您可以发布`dir /r`列出 AFS 并`notepad my_blocked_file.zip:Zone.Identifier`实际编辑它们。

这是 Internet 区域标识符的样子：

```
[ZoneTransfer] 
ZoneId=3 
```

这些流的附加阅读：http: [//msdn.microsoft.com/en-us/library/ff469212](http://msdn.microsoft.com/en-us/library/ff469212(v=prot.10) (v=prot.10 )

各自的安全区域是：

*   内网：ZoneId=1
*   可信站点：ZoneId=2
*   互联网：ZoneId=3
*   受限站点：ZoneId=4

此外，IE 似乎只在您打开/关闭会话时读取 AFS，因此您无法更改流然后刷新，您需要创建一个新的 IE 实例来重新读取新的 AFS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:34:58.060

试试这个。打开 regedit，然后查找以下键/值：

HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\Attachments\SaveZoneInformation

将此值设置为 1 并查看问题是否仍然存在。可能必须注销并重新登录才能确定，因为它是 HKCU 值。您仍然可能会再次收到此消息，但如果您使用此值再次取消阻止它，它可能会阻止它再次发生。

# vb.net - 找不到 DocumentsListQuery.DocumentID 或 DocumentsListQuery.folderBaseUri

> ID：10535580
> 
> 赞同：0
> 
> 时间：2012-05-10T13:58:28.737
> 
> 标签：vb.net, visual-studio-2010, google-docs-api

我发现列出文件夹的每个代码示例都使用 `DocumentsListQuery.DocumentID`or `DocumentsListQuery.folderBaseUri`，这两个我都无法访问。这些成员不存在。我使用了错误的版本还是什么？

我正在使用 VS 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:50:09.573

尝试更新到最新版本的客户端库 (http://code.google.com/p/google-gdata/downloads/list) 并查看文档 (https://developers.google.cn) 中的 .NET 示例。 com/google-apps/documents-list/）。它们在 C# 中，但应该很容易使它们适应 VB.NET。

# gwt - GWT - 不能使用复合小部件 clickhandlers

> ID：10535587
> 
> 赞同：1
> 
> 时间：2012-05-10T13:58:57.020
> 
> 标签：gwt, widget, composite, uibinder

我正在尝试创建一个封装我的菜单栏的复合小部件。我希望它定义了点击处理程序，以便我可以简单地将它添加到我创建的任何 .ui.xml 中。

这是我的菜单栏 ui.xml

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder 
  xmlns:ui="urn:ui:com.google.gwt.uibinder"
  xmlns:g="urn:import:com.google.gwt.user.client.ui"
  xmlns:v="urn:import:com.epiuse.cloud.portal.ui.client.view"
  xmlns:widget="urn:import:com....client.widgets">

<g:AbsolutePanel styleName="navBar">
    <g:HTMLPanel>
    <ul>
        <li><g:HTML ui:field="aboutLink"><a>About</a></g:HTML></li>
        <li>|</li>
        <li><g:HTML ui:field="contactLink"><a>Contact</a></g:HTML></li>
        <li>|</li>
        <li><g:HTML ui:field="loginLink"><a>Login</a></g:HTML></li>
    </ul>
    </g:HTMLPanel>
</g:AbsolutePanel>  
</ui:UiBinder> 
```

这是关联的视图：

```
public class GeneralMenuBarImpl  extends Composite implements GeneralMenuBar {

@UiTemplate("GeneralMenuBar.ui.xml")
interface GeneralMenuBarImplUiBinder extends UiBinder<Widget, GeneralMenuBarImpl> {}
private static GeneralMenuBarImplUiBinder uiBinder =
       GWT.create(GeneralMenuBarImplUiBinder.class);

 private Presenter presenter;

 @UiField HTML loginLink;
 @UiField HTML contactLink;
 @UiField HTML aboutLink;

 public GeneralMenuBarImpl(){

     initWidget(uiBinder.createAndBindUi(this));

 }

public void setPresenter(Presenter presenter){
     this.presenter = presenter;
}

 @UiHandler("loginLink")
void onLoginLinkClicked(ClickEvent event) {
    presenter.onLoginLinkClicked();
}
@UiHandler("contactLink")
void onContactLinkClicked(ClickEvent event) {
    presenter.onContactLinkClicked();
}
@UiHandler("aboutLink")
void onAboutLinkClicked(ClickEvent event) {
    presenter.onAboutLinkClicked();
}

public Widget asWidget(){
     return this;
 } 
```

}

然后我通过将正确的命名空间添加到 ui.xml 文件中将它包含在我的主页上，然后添加以下行。

```
<widget:GeneralMenuBarImpl></widget:GeneralMenuBarImpl> 
```

这可以显示菜单栏，但我的点击处理程序不起作用。我怀疑这是因为菜单栏没有收到一个演示者来告诉一个事件发生了。

所以我的问题是：如何将演示者传递给包含的小部件或从包含它的页面访问小部件的 uiFields？

我希望有人能够提供帮助。被这个问题困了很久！

提前谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:13:46.407

解决这个问题的两种方法：

*   您可以在您的合成中公开您的链接，以便您可以从包含页面访问它。包含页面可以将 EventHandlers 附加到您的链接并在那里处理事件。

合成的：

```
public HasClickhandlers getAboutLink() {
    return aboutLink
} 
```

页：

```
menuBar.getAboutLink.addClickHandlers(new ClickEvent() {
}); 
```

*   您必须从包含您的复合材料的父页面/演示者 ( `menuBar.setPresenter(this);`) 在您的复合材料中设置演示者。然后你可以通过presenter和Composite之间的接口契约来处理点击。

第一种方法与 MVP 模式略有不同。第二种方法在这方面更像是 MVP。但是，您必须考虑以下问题：

*   您的复合材料只是一个小部件，还是它有足够的业务逻辑来制作一个 PresenterWidget（定义 Presenter/View 对）。
*   如果小部件只是一个简单的小部件，那么定义演示者可能是一种矫枉过正（采用方法 1）。
*   如果您想在应用程序范围内处理点击次数，您还可以在应用程序范围内触发事件`EventBus`

# c# - Convert.ToInt32 只支持 4 个碱基？

> ID：10535589
> 
> 赞同：2
> 
> 时间：2012-05-10T13:58:58.227
> 
> 标签：c#, .net, int, converter, type-conversion

我正在尝试将`12122`（base 3）转换为`int`value ，

但是我在反射器中看到 - 支持的底座是`2,8,10,16`

```
public static int ToInt32(string value, int fromBase)
{
    if (((fromBase != 2) && (fromBase != 8)) && ((fromBase != 10) && (fromBase != 0x10)))
    {
        throw new ArgumentException(Environment.GetResourceString("Arg_InvalidBase"));
    }
    return ParseNumbers.StringToInt(value, fromBase, 0x1000);
} 
```

（我认为他们错过了 2-8 之间的 4，但没关系....）

那么，如何将基数 3 转换为基数 10？（为什么他们还是不给选项？...）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:36:02.303

从这个[链接](https://stackoverflow.com/questions/923771/quickest-way-to-convert-a-base-10-number-to-any-base-in-net)

```
public static string IntToString(int value, char[] baseChars)
{
    string result = string.Empty;
    int targetBase = baseChars.Length;

    do
    {
        result = baseChars[value % targetBase] + result;
        value = value / targetBase;
    } 
    while (value > 0);

    return result;
} 
```

使用如下

```
 string binary = IntToString(42, new char[] { '0', '1' });

    string base3 = IntToString(42, new char[] { '0', '1', '2' });

    // convert to hexadecimal
    string hex = IntToString(42, 
        new char[] { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
                     'A', 'B', 'C', 'D', 'E', 'F'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:31:20.763

这应该适用于 1 到 9 之间的基数以及正数和 int 范围...

如有必要，还可以添加一些验证

```
int ConvertToInt(int number, int fromBase)
    {
        // Perform validations if necessary

        double result = 0;
        int digitIndex = 0;

        while (number > 0)
        {
            result += (number % 10) * Math.Pow(fromBase, digitIndex);

            digitIndex++;
            number /= 10;
        }

        return (int)result;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:34:03.883

.NET 中没有任何内容。

你可以使用这个（未经测试）

```
static int ParseIntBase3(string s)
{
    int res = 0;
    for (int i = 0; i < s.Length; i++)
    {
        res = 3 * res + s[i] - '0';
    }
    return res;
} 
```

# javascript - 在 JavaScript 中获取链接元素 cssRules/Rules

> ID：10535590
> 
> 赞同：1
> 
> 时间：2012-05-10T13:58:58.643
> 
> 标签：javascript, css, element

显然，在 JavaScript 中，我们可以通过执行以下操作来查找整个文档的所有 CSS 规则：

```
- document.styleSheets[0].rules || document.styleSheets[0].cssRules; 
```

无论如何从文档的标题中获取 CSS Link 元素以及该元素的唯一规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:09:52.380

该`<link>`元素有一个[`sheet`属性](http://www.w3.org/TR/DOM-Level-2-Style/stylesheets.html#StyleSheets-LinkStyle)可以做到这一点：

```
document.getElementById('myStyle').sheet.cssRules 
```

当然，这是受[同源政策的约束](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)

# php - Zend Framework & Doctrine 2 findBy 使用返回空数组的实体

> ID：10535591
> 
> 赞同：1
> 
> 时间：2012-05-10T13:58:59.760
> 
> 标签：php, zend-framework, doctrine-orm, find, findby

我一直在为一些 findBy 使用实体而苦苦挣扎，我真的不明白出了什么问题。

我正在使用这两个类：

**GPos_Model_Product** :

```
/**
* @Entity
* @Table(name="Product")
*/
class GPos_Model_Product extends GPos_Doctrine_ActiveEntity {
    /**
     * @Id @Column(type="integer")
     * @GeneratedValue
     */
    protected $id;

    /**
     * @ManyToOne(targetEntity="GPos_Model_Store")
     * @JoinColumn(name="store_id", referencedColumnName="id")
     **/
    protected $store;
} 
```

**GPos_Model_Store**：

```
/**
 * @Entity
 * @Table(name="Store")
 */
class GPos_Model_Store extends GPos_Doctrine_ActiveEntity {
    /**
     * @Id @Column(type="integer")
     * @GeneratedValue
     */
    protected $id;

    /** @Column(name="status", type="string", columnDefinition="enum('active', 'deleted')")  */
    protected $status = 'active';
} 
```

*注意：我已经删除了两个类中的无用字段以使其更具可读性*

所以这就是问题所在：在我的一个控制器中，我试图检索链接到某个商店的所有产品：

```
public function indexAction() {
    $this->_helper->getHelper('layout')->disableLayout();
    $authNamespace = new Zend_Session_Namespace('Zend_Auth');

    //get store's products list.
    $store = GPos_Model_Store::find($authNamespace->store);
    var_dump($store); //prints store successfully.
    //next line throws an unusable exception talking about layout.phtml not found...
    $products = GPos_Model_Product::findByStore($store->getId());
    //give it to the view for the products list rendering.
    var_dump($products);
    $this->view->products = $products;
} 
```

很奇怪，当我改用它时`$products = GPos_Model_Product::findByStore($store);`，我没有得到任何例外，结果只是一个空数组。我在另一个控制器中使用了完全相同的方式（使用 getId()）来处理其他两个具有相同关系并且运行良好的实体。

我检查了我的数据库，我用作参数的商店确实绑定到一些产品，这意味着结果是一个空数组也不正确。我应该检索一个包含 8 个产品的数组...

这是我的其他控制器的代码，它工作正常（再次缩小代码）：

```
$user = GPos_Model_User::findOneByLogin($form->getValue('login'));
$contact = GPos_Model_Contact::findByUser($user->getId());
//these lines work perfectly and I'm receiving an array of `GPos_Model_Contact` entities... 
```

这两对实体以完全相同的方式声明，所以我真的不明白......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:11:58.597

是的！

我发现我的错误......它实际上与我的关系无关。
我的错误是我使用 gedmo 并忘记设置默认语言环境，这意味着它无法检索任何产品，因为它不知道在哪里查找。Gedmo 抛出了一个异常，但它被未找到的布局异常覆盖（这是一种 zend 错误，因为我的布局没有问题）。

感谢 XDebug 和几个小时的耐心，我终于能够在几分钟内找到确切的异常消息并修复它。

感谢任何关注的人，我的错是没有提供足够的代码（带有 gedmo 的东西），因为我认为这实际上设置得很好......

# apache - Apache 上的字体 MIME 类型错误

> ID：10535592
> 
> 赞同：0
> 
> 时间：2012-05-10T13:59:01.803
> 
> 标签：apache, mime-types, font-face

我正在尝试以 .otf/.woff/.svg 格式提供一些网络字体。浏览器未呈现字体，我在控制台中看到以下错误：

```
Resource interpreted as Font but transferred with MIME type text/html: "http://localhost/file.woff".
Resource interpreted as Font but transferred with MIME type text/html: "http://localhost/file.otf".
Resource interpreted as Font but transferred with MIME type text/html: "http://localhost/file.svg". 
```

同一组文件在另一台 Web 服务器上运行良好，但在我的本地开发环境中却不行，所以我知道 HTML/CSS/Font 文件没有问题。我正在运行 Apache 2.2.22。我已经在 .htaccess 文件和 /etc/apache2/mods-available/mime.conf 中尝试了许多不同的 AddType 指令组合，但无论如何我都会继续收到这些错误并且字体不会呈现。我在 Chrome 和 Firefox 中都试过这个，并且得到相同的错误并且没有渲染。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:06:53.630

如果有人遇到这个问题，答案确实是服务器配置问题，使用 AddType 指令。文件未正确加载，因此未加载配置。

# android - 在 Android 中，跨多个视图使用相同的工具栏（RelativeLayout 元素）

> ID：10535598
> 
> 赞同：3
> 
> 时间：2012-05-10T13:59:06.870
> 
> 标签：android, android-layout, android-ui

我正在通过 XML 在我的一个视图中编写工具栏 - 一个将在多个视图中克隆的工具栏。无论如何我可以在我的所有视图中引用相同的 XML，而不是复制和粘贴代码？我是被迫使用片段还是可以以编程方式添加相同的 XML？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T14:01:19.790

您应该使用包含标签：

[http://developer.android.com/resources/articles/layout-tricks-reuse.html](http://developer.android.com/resources/articles/layout-tricks-reuse.html)

```
<include layout="@layout/toolbar" /> 
```

**编辑：**

看起来上面的链接现在已经死了，这是一个有效的链接： [http ://android-developers.blogspot.com/2009/02/android-layout-tricks-2-reusing-layouts.html](http://android-developers.blogspot.com/2009/02/android-layout-tricks-2-reusing-layouts.html)

# xcode - xcode 中的 Box2D 生成链接器错误

> ID：10535600
> 
> 赞同：0
> 
> 时间：2012-05-10T13:59:16.160
> 
> 标签：xcode, linker, box2d, linker-errors

我已将 Box2D 添加到我现有的 XCode 4.3.1 项目中...我设置了“标题搜索路径”设置，编译器在查找标题时没有遇到问题...当链接器查找定义时出现问题...我我正在使用一个非常基本的代码来创建一个 b2world 并设置一些参数。但是链接器抱怨，因为它找不到我使用的方法的任何编译定义......所以这意味着 XCode 没有编译 Box2D。怎么解决？？我已经尝试将所有 .cpp 文件属性设置为“ObjectiveC++ 源文件”，但没有任何改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:32:53.720

您是否将 box2d 添加到您正在运行的方案中。Product->edit scheme，然后在左侧单击 build 并查看 box2d 是否列在构建目标中，以及是否在构建应用程序之前列出。如果没有，请将其与加号一起添加，看看是否有效。

# django - Django 如何处理来自多行表的表单数据？

> ID：10535601
> 
> 赞同：0
> 
> 时间：2012-05-10T13:59:18.470
> 
> 标签：django, django-forms

对于我的一个 Django 项目，我的 HTML 页面包含一个表单，该表单又包含一个表格。表格的结构是这样的：

```
<form name="bill" action="" method="post">
    <ul>
        <li>
            <label for="id_date">Date </label>
            <input type="text" name="date" id="id_date" />
        </li>
        <li>
            <label for="id_description">Description </label>
            <input id="id_description" type="text" name="description" maxlength="300" />
        </li>
        <li>
            <label for="id_amount">Total Amount </label>
            <input type="text" name="amount" id="id_amount" />
        </li>
        <li>
            <label for="id_debtors">Split Among </label>
            <table class="unequal_split">
                <thead>
                    <th>Name</th>
                    <th>Paid For</th>
                    <th>Amount</th>
                </thead>
                <tbody>
                        <tr>
                            <td> 
                                <select name="people">
                                    <option value="xx">XX</option>
                                    <option value="yy">YY</option>                                        
                                    <option value="zz">ZZ</option>
                                </select>
                            </td>
                            <td>
                                <select name="number_of_people">
                                    <option value="1">1 person</option>
                                    <option value="2">2 people</option>
                                    <option value="3">3 people</option>
                                    <option value="4">4 people</option>
                                    <option value="5">5 people</option>
                                </select>
                            </td>
                            <td>
                                <input type="text" name="individual_amount" />
                            </td>
                        </tr>                        
        <li>
            <label for="save"></label>
            <button id="save" type="submit">Save</button>
        </li>
    </ul>
</form> 
```

您在上面看到的表格行重复了 3 次。

在`request.POST`中，如果我执行 a `getlist`，我可以获得各个值，但正如您在上面看到的，每一行都有一组需要单独处理的详细信息。所以我的问题是，我究竟如何获得这些行级数据`views.py`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:43:40.070

表格和嵌入在 HTML 中的字段数量与在 Django 中如何访问这些字段（在任何语言中都是如此）有关的绝对*为零。*

无论`name`属性是什么，这都是`request.POST`. 就那么简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:36:20.327

如果我理解正确，您是说完全呈现的表单具有三个不同的`select`输入 named `people`、三个 named`number_of_people`和三个 named `individual_amount`。

在 HTTP POST 中有一种方法可以从输入中访问多个值的列表，但它实际上只适用于`<select multiple="multiple">`或`<input type="checkbox">`类似的 - 即来自单个输入的多个值而不是多个具有相同名称的值..

我的建议是，因为您在上面暗示您正在`<li>`视图代码而不是 ModelForm 中生成表行（与上面的行相反），所以不是使用,等`<select name="people">`三次。`<select name="people_1">``<select name="people_2">`

然后在您的视图代码中，您可以访问它们`request.POST['people_1']`，依此类推。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T06:52:01.297

由于您使用 ModelForm，我猜每个 HTML 行都有一个相应的 DB 行。为每个 DB 行（模型实例）创建一个 ModelForm 并给它一个前缀。或者您可以使用表单集。我的建议：永远不要阅读 request.POST 或 request.GET，使用 form.cleaned_data。

# database-design - 计算两列之间的百分比变化

> ID：10535602
> 
> 赞同：1
> 
> 时间：2012-05-10T13:59:24.727
> 
> 标签：database-design, percentage, postgresql

我有一个表，它有 2 列，列出了我们产品每次发布的特定项目的数量。我需要计算两列之间的百分比增加并将其附加到表中的新列中，但是我没有找到任何与此相关的文档？我正在使用 Postgres 9.0，作为 QC 过程的一部分，我需要检查两列之间的百分比增加，以确保版本之间没有丢失/错误的数据。

这是表定义：

```
oid oid[] NOT NULL,
"State" character varying(2)[] NOT NULL,
release_1121 numeric NOT NULL,
release_1122 numeric NOT NULL,
CONSTRAINT oid PRIMARY KEY (oid) 
```

我想添加一个百分比增加列并用正确的百分比填充它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T15:04:57.583

我*认为*这是你真正需要的：

表应如下所示：

```
CREATE TABLE release (
release_id integer PRIMARY KEY,    -- pk is NOT NULL automatically
-- state varchar(2)[] NOT NULL,    -- ??
amount numeric NOT NULL
); 
```

测试数据：

```
INSERT INTO release VALUES (release_id, amount)
  (1121, 25)
, (1122, 30)
, (1123, 90)
, (1124, 10); 
```

询问：

```
WITH x AS (
    SELECT *
         , lag(amount) OVER (ORDER BY release_id) as last_amount
    FROM   release
    )
SELECT release_id, amount
     , (amount - last_amount) AS abs_change
     , round((100 * (amount - last_amount)) / last_amount, 2) AS percent_change
FROM   x
ORDER  BY release_id; 
```

[CTE（`WITH`子句）](https://www.postgresql.org/docs/current/queries-with.html)和窗口函数[`lag()`](https://www.postgresql.org/docs/current/functions-window.html)需要 PostgreSQL 8.4 或更高版本。
结果：

```
release_id | amount | abs_change | percent_change
-----------+--------+------------+---------------
1121       | 25     | <NULL>     | <NULL>
1122       | 30     | 5          |  20.00
1123       | 90     | 60         | 200.00
1124       | 10     | -80        | -88.89 
```

*   不要用`oid`作主键！那是不好的做法。在 PostgreSQL 9.0[`WITHOUT OIDS`](https://www.postgresql.org/docs/current/sql-createtable.html)中是默认的。[在这里阅读更多。](https://www.postgresql.org/docs/current/runtime-config-compatible.html#GUC-DEFAULT-WITH-OIDS)

*   不要使用[混合大小写的标识符](https://www.postgresql.org/docs/current/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)，`"State"`如果可以避免的话。看：

    *   [PostgreSQL 列名是否区分大小写？](https://stackoverflow.com/questions/20878932/are-postgresql-column-names-case-sensitive/20880247#20880247)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T14:30:47.377

我会说，添加百分比增加列是一次性操作，可以这样完成（[文档中的详细信息](http://www.postgresql.org/docs/current/interactive/sql-altertable.html)）：

```
ALTER TABLE target ADD pct float; 
```

然后你可以更新表格，用新值填充它：

```
UPDATE target SET pct = (after::float - before::float) / before::float; 
```

# php - 如何使用 php 在 Tumblr xml 文件中选择 img src？

> ID：10535603
> 
> 赞同：0
> 
> 时间：2012-05-10T13:59:25.037
> 
> 标签：php, xml, image, tumblr

我正在尝试为以下帖子 xml 中的第一个 img 选择 src。

```
<post>
<regular-title>Testing 1</regular-title>
<regular-body>
<p>This is a test for projects on the website</p> 
<p><img src="http://media.tumblr.com/tumblr_m3t0r3saXy1rocfxw.jpg"/></p> 
<p><img src="http://media.tumblr.com/tumblr_m3t0s6bPyw1rocfxw.jpg"/></p>
</regular-body>
</post> 
```

我可以使用 php 选择标题和发布文本，但我无法选择 img 或其 src。

```
$title = $xml->posts->post->{'regular-title'};
$img = $xml->posts->post->{'regular-body'}->??????;
$post = $xml->posts->post->{'regular-body'}; 
```

我使用正确的方法来选择 img 还是有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:18:03.383

```
$output = preg_match_all('/<img.+src=[\'"]([^\'"]+)[\'"].*>/i', $xml->posts->post->{'regular-body'}, $matches);
$first_img = $matches[1][0];
if(!empty($first_img))
  return $first_img;
return 'no image url.png'; 
```

这对你来说应该很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:32:50.547

您可以使用[DOM 类](http://www.php.net/manual/en/book.dom.php)轻松获得它：

```
$xml = '<post>
    <regular-title>Testing 1</regular-title>
    <regular-body>
    <p>This is a test for projects on the website</p> 
    <p><img src="http://media.tumblr.com/tumblr_m3t0r3saXy1rocfxw.jpg"/></p> 
    <p><img src="http://media.tumblr.com/tumblr_m3t0s6bPyw1rocfxw.jpg"/></p>
    </regular-body>
    </post>';
$dom = new DOMDocument();
$dom->loadXML($xml);

$images = $dom->getElementsByTagName("img");
$firstImage = $images->item(0); //get the first img tag
$src = $firstImage->getAttribute("src"); 
```

# python - 不能分配必须是实例。姜戈

> ID：10535604
> 
> 赞同：13
> 
> 时间：2012-05-10T13:59:27.500
> 
> 标签：python, django, forms, models

我一直在尝试创建一个拥有用户的 django 项目，这些用户可以添加他们创建的书籍的标题。但是每次我输入书名（不在管理页面上）时，我都会收到此错误

```
Cannot assign "u'Hello Wold'": "Scripter.title" must be a "Book" instance. 
```

模型.py

```
from django.db import models
from django.contrib.auth.models import User

class Book(models.Model):
    script_title = models.CharField(max_length=100)

    def __unicode__(self):
        return self.script_title

class Scripter(models.Model):
    user = models.OneToOneField(User)
    name = models.CharField(max_length=30)
    title = models.ForeignKey(Book, null=True, blank=True, default=None)

    def __unicode__(self):
        return self.name 
```

表格.py

```
from django import forms
from django.contrib.auth.models import User
from django.forms import ModelForm
from scripters.models import Scripter#, Book

class RegistrationForm(ModelForm):
    username = forms.CharField(label=(u'User Name'))
    email = forms.EmailField(label=(u'Email Address'))
    password = forms.CharField(label=(u'Password'), widget=forms.PasswordInput(render_value=False))
    password1 = forms.CharField(label=(u'Verify Password'), widget=forms.PasswordInput(render_value=False))

    class Meta:
        model = Scripter
        exclude = ('user','title')

    def clean_username(self):
        username = self.cleaned_data['username']
        try:
            User.objects.get(username=username)
        except User.DoesNotExist:
            return username
        raise forms.ValidationError("User Name has been taken!")

    def clean(self):
        if self.cleaned_data['password'] != self.cleaned_data['password1']:
            raise forms.ValidationError("The passwords did not match")
        else:
            return self.cleaned_data

class LoginForm(forms.Form):
    username = forms.CharField(label=(u'Username'))
    password = forms.CharField(label=(u'Password'), widget=forms.PasswordInput(render_value=False))

class CreateScript(ModelForm):
    title = forms.CharField(label=(u'Script Title'))

    class Meta:
        model = Scripter
        exclude = ('user','name',)

    def clean_title(self):
        title = self.cleaned_data['title']
        return title 
```

视图.py

```
from django.http import HttpResponseRedirect
from django.contrib.auth.models import User
from django.contrib.auth.decorators import login_required
from django.shortcuts import render_to_response
from django.template import RequestContext
from scripters.forms import RegistrationForm, LoginForm, CreateScript
from scripters.models import Scripter, Book
from django.contrib.auth import authenticate, login, logout

def ScripterRegistration(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect('/profile/')
    if request.method =='POST':
        form = RegistrationForm(request.POST)
        if form.is_valid():
            user = User.objects.create_user(username=form.cleaned_data['username'],
                email = form.cleaned_data['email'],
                password = form.cleaned_data['password']
            )
            user.save()
            scripter = Scripter(user=user, name=form.cleaned_data['name'])
            scripter.save()

            return HttpResponseRedirect('/profile/')
        else:
            return render_to_response('index.html', {'form': form}, context_instance=RequestContext(request))
    else:
        form = RegistrationForm()
        context = {'form': form}
        return render_to_response('index.html', context, context_instance=RequestContext(request))

@login_required
def Profile(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect('/login/')
    Scripter = request.user.get_profile()

    context = {'Scripter': Scripter, 'Book': Book}
    return render_to_response('profile.html', context, context_instance=RequestContext(request))

def LoginRequest(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect('/profile/')
    if request.method == 'POST':
        submit = LoginForm(request.POST)
        if submit.is_valid():
            username = submit.cleaned_data['username']
            password = submit.cleaned_data['password']
            scripter = authenticate(username=username, password=password)
            if scripter is not None:
                login(request, scripter)
                return HttpResponseRedirect('/profile/')
            else:
                return HttpResponseRedirect('/login/')
    else:
        submit = LoginForm()
        context = {'submit': submit}
        return render_to_response('login.html',context, context_instance=RequestContext(request))

def LogoutRequest(request):
    logout(request)
    return HttpResponseRedirect('/login/')

@login_required
def NewScript(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect('/login/')
    if request.method =='POST':
        title_form = CreateScript(request.POST)
        if title_form.is_valid():
            new_script = Book.objects.get_or_create(
                script_title = title_form.cleaned_data['title']
            )
            new_script.save()
            script = Book(script_title=title_form.cleaned_data['title'])
            script.save()
            return HttpResponseRedirect('/edit/')
        else:
            return render_to_response('NewScript.html', {'title_form': title_form}, context_instance=RequestContext(request))
    else:
        title_form = CreateScript()
        context = {'title_form': title_form}
        return render_to_response('NewScript.html', context, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-10T14:39:16.750

当然。不知道这里的混乱在哪里。`Scripter.title`是 的外键`Book`，所以你必须给它一个实际的`Book`，而不是字符串。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-02T10:31:42.783

首先，虽然这不是你的问题，但我相信你错过了一些东西。如果我理解正确，您希望 Scripters 拥有 MULTIPLE 书籍。现在，对于您的模型，他们只能拥有一本书。如果我对您要实现的目标是正确的，那么您的模型应该如下所示：

```
class Book(models.Model):
  script_title = models.CharField(max_length=100)
  scripter = models.ForeignKey(Scripter)#A book "remembers" who wrote it

  def __unicode__(self):
    return self.script_title

class Scripter(models.Model):
  user = models.OneToOneField(User)
  name = models.CharField(max_length=30)
  #Scripter can write multiple books, can't he? So the next line is removed,
  #replaced by an extra line in Book class

  # title = models.ForeignKey(Book, null=True, blank=True, default=None) 
```

然后你会像这样访问 Scripter 的书：

```
scripter = Scripter.objects.get(name="joshua")
books = scripter.book_set.all() #all books written by joshua 
```

至于您的问题，以当前形式，您需要执行以下操作：

```
book = Book.objects.get(script_title="some_title")
scripter.title = book 
```

但正如我之前所说，你需要改变你的模型结构，所以你宁愿这样做：

```
scripter = Scripter.objects.get(name="joshua")
book = Book.objects.Create(script_title="some title",scripter=scripter) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-30T09:10:18.350

您的图书模型中没有主键

```
 class Book(models.Model):
script_title = models.CharField(primary_key = True,max_length=100)

def __unicode__(self):
    return self.script_title 
```

这应该工作

# javascript - JavaScript 性能——除法还是乘法？/对*

> ID：10535605
> 
> 赞同：16
> 
> 时间：2012-05-10T13:59:28.727
> 
> 标签：javascript, performance

我正在编写一个非常繁重的 JavaScript 应用程序（它几乎都是 JavaScript），它确实有大量数据需要迭代（JSON），因此它必须执行某些算术任务。性能是应用程序的主要考虑因素。我已经介绍了 Webworkers 来帮助解决这个问题，并且我试图不依赖于 jQuery 等库提供的方法（比如`.each()`代替`for`循环）。无论如何，这是一个简单的问题......

在应用程序中，我必须应用价格变化，这将涉及许多涉及除法的数值过程。记住这会发生成千上万次，对我来说，总是通过乘法或乘法和除法的混合来应用更改会更好。例如，我可以通过乘以 0.5 或除以 2 来应用 50% 的折扣。

我总是被教导除法比乘法慢，但我没有真正的证据……在我开始基准测试和运行测试之前，有人对此有意见吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-05-10T14:47:59.993

尽管这两种操作都非常快，但乘法的性能略好于除法。在我的测试中（如下），我注意到 Chrome 和 IE 9 有 14% 的差异和 10% 的差异。如果您**必须**从浏览器中压缩性能，您可以在进入循环之前将除法器转换为乘法器，但我没有认为将可读性妥协到如此微小的改进是一个好主意。

```
var cnt = 500000;
var rls = []
var ags = [[2,1], [4,2], [7,3], [4e0,1], [32e0,2], [37e0,3], [-37e7,(7e3/3e-4)]];
var fns = [
  {name: "fn_mul", fn: (function(x, y) { return x * y; })},
  {name: "fn_div", fn: (function(x, y) { return x / y; })}
]

// setup  ---------------------------------------
for(var iag=0; iag<ags.length; iag++) {
  if(Object.prototype.toString.call(ags[iag]) !== "[object Array]") {
    ags[iag] = [ags[iag]]
  };
}

// run ------------------------------------------
for(var ifn=0; ifn<fns.length; ifn++) {
  var fn = fns[ifn].fn;
  var ts = (new Date()).valueOf();
  for(var iag=0; iag<ags.length; iag++) {
    var ag = ags[iag];
    for(var icn=0; icn<cnt; icn++) { fn.apply(this, ag); }
  }
  rls.push({"name": fns[ifn].name, "ts": (new Date()).valueOf() - ts});
}
dump(rls); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-09-17T17:13:19.267

要为此添加更多上下文，前提是编译器不优化乘法的除法（例如`n / 2`转换为`n * 0.5`），乘法总是比除法快。

这是由于 CPU 执行这些操作的方式：

有关x86 的参考，请参阅[https://stackoverflow.com/a/1148060/520857](https://stackoverflow.com/a/1148060/520857)`fmul` （剧透：比 快 2-3 倍`fdiv`）

有关AMD 的参考，请参阅[https://stackoverflow.com/a/17883319/520857](https://stackoverflow.com/a/17883319/520857)`fmul` （剧透：比 快 7 倍`fdiv`）

这些操作的速度太快了，对 IRL 没有影响，但是如果你做了很多，你发现编译器没有转换为乘法（我不认为 javascript 引擎这样做，不要引用我的话不过，快速的谷歌检查并没有给我任何关于这个主题的信息），那么*如果*你遇到由部门太慢导致的性能瓶颈，那么进行这种优化*可能*是有意义的，因为你不太可能在几乎所有应用程序中，它可能是 I/O 绑定而不是 CPU 绑定。

 *编辑：如果您正在执行大量浮点计算，您可以考虑找到一种方法来使用您的 GPU 来执行这些操作，因为 GPU 在 FP 操作上比 CPU 快得多，再次从快速谷歌搜索开始：[http //gpu.rocks/](http://gpu.rocks/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:03:36.410

就个人而言，我认为它在性能方面没有太大区别。如果您正在考虑这一点，那么您将进入微观层面。

代码的可读性比这样的微优化更重要。代码的可读性和易于理解，如果您绝对必须进行微优化，请稍后在您发现真正的瓶颈时进行。*

# objective-c - 在 iOS5 中从 TableView 向 DetailViewController 传递数据的问题

> ID：10535606
> 
> 赞同：4
> 
> 时间：2012-05-10T13:59:41.403
> 
> 标签：objective-c, ios, singleton, uitableview, segue

我将不胜感激任何帮助解决我在最后一天把头发拉出来的问题！

**免责声明 1** 我是一个 Objective-C 菜鸟 - 所以这个问题的答案可能很简单（我来自 PHP 多年）。请友好一点。

**免责声明 2** 是的，我已经广泛地“谷歌搜索”并查看了 Apple 文档 - 但未能理解我的问题。

***概括***

我正在尝试将在表视图中选择的值从单例传递给另一个控制器。我发现第二个视图控制器中的*viewDidLoad*方法在触发 segue的*tableView: didSelectRowAtIndexPath:方法之前完成。*这导致第二个视图控制器访问“陈旧”数据。

***细节***

我已经使用面向 iOS5 的 ARC 建立了一个非常简单的 StoryBoard 项目。

![故事板](../Images/89d3f4e4182f4233f74c89066e2320ad.png)

我创建了一个单例来存储视图控制器之间的 NSString。

*单例.h*

```
#import <Foundation/Foundation.h>
@interface Singleton : NSObject
@property (strong, nonatomic) NSString *sharedString;
+ (id)singletonManager;
@end 
```

*单身人士.m*

```
#import "Singleton.h"

static Singleton *sharedInstance = nil;

    @implementation Singleton
    @synthesize sharedString = _sharedString;
    +(id)singletonManager
    {
        @synchronized(self){
            if (sharedInstance == nil)
                sharedInstance = [[self alloc] init];
        }
        return sharedInstance;
    }
    -(id) init {
        if (self = [super init]) {
            _sharedString = [[NSString alloc] initWithString:@"Initialization String"];
        }
        return self;
    }

    @end 
```

故事板中的 TableView 链接到下面的 TableViewController

*表视图控制器.h*

```
#import <UIKit/UIKit.h>

@interface TableViewController : UITableViewController
@end 
```

*表视图控制器.m*

```
#import "TableViewController.h"
#import "Singleton.h"

@interface TableViewController ()
@property NSArray *tableData;
@end

@implementation TableViewController
@synthesize tableData;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
    }
    return self;
}

- (void)viewDidLoad
{

    [super viewDidLoad];
    self.tableData = [NSArray arrayWithObjects:@"First", @"Second", @"Third", nil];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [self.tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    cell.textLabel.text = [self.tableData objectAtIndex:indexPath.row];
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
    NSLog(@"TableViewController: didSelectRowAtIndexPath start");
    Singleton *sharedInstance = [Singleton singletonManager];
    sharedInstance.sharedString = [self.tableData objectAtIndex:indexPath.row];
    NSLog(@"TableViewController: Finished storing data into shared string: %@", sharedInstance.sharedString);
    NSLog(@"TableViewController: didSelectRowAtIndexPath start");
}

@end 
```

表格单元格被 segue-ed（推送）到具有单个标签的基本 ViewController。

*DetailViewController.h*

```
#import <UIKit/UIKit.h>

@interface DetailViewController : UIViewController
@property (strong, nonatomic) IBOutlet UILabel *displayLabel;

@end 
```

*细节视图控制器.m*

```
#import "DetailViewController.h"
#import "Singleton.h"

@interface DetailViewController ()

@end

@implementation DetailViewController
@synthesize displayLabel = _displayLabel;

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"DetailViewController: viewDidLoad start");
    Singleton *sharedInstance = [Singleton singletonManager];
    self.displayLabel.text = sharedInstance.sharedString;
    NSLog(@"displayLabel.text: %@", self.displayLabel.text);
    NSLog(@"DetailViewController: viewDidLoad end");
}

- (void)viewDidUnload
{
    [self setDisplayLabel:nil];
    [super viewDidUnload];
}

@end 
```

选择表格单元格时，我想要

*   TableViewController 在共享单例 NSString 中设置一个值
*   开始转到详细视图
*   DetailViewController 获取共享单例 NSString 中的值并将其显示在标签中
*   要渲染到屏幕的详细视图

不幸的是，这与我的代码没有按预期工作。如果我查看控制台中的 NSLog 详细信息，我可以看到详细视图的*viewDidLoad*函数实际上是在启动表视图方法（*didSelectRowAtIndexPath*）之前完成的。

```
2012-05-10 23:17:45.756 TestSingleton[12105:f803] DetailViewController: viewDidLoad start
2012-05-10 23:17:45.758 TestSingleton[12105:f803] displayLabel.text: Initialization String
2012-05-10 23:17:45.759 TestSingleton[12105:f803] DetailViewController: viewDidLoad end
2012-05-10 23:17:45.763 TestSingleton[12105:f803] TableViewController: didSelectRowAtIndexPath start
2012-05-10 23:17:45.764 TestSingleton[12105:f803] TableViewController: Finished storing data into shared string: First
2012-05-10 23:17:45.765 TestSingleton[12105:f803] TableViewController: didSelectRowAtIndexPath start 
```

啊啊啊啊！

如果我将标签文本的设置放在详细视图的*viewDidAppear*方法中，将显示来自共享单例 NSString 的正确值。但是，使用这种方法，您实际上可以看到应用程序更改了文本标签的值（例如，如果您单击第一行，当详细视图屏幕加载时，您可以看到标签从“初始化字符串”更改为“第一行” ”）。

有人可以解释一下我如何将共享值从单例传递到另一个视图，并*在视图实际呈现到屏幕之前将*其提供给第二个视图控制器。

如果需要任何澄清 - 请告诉我。

我确信这与我未能欣赏视图生命周期的微妙之处有关。

**更新**

感谢 *8vius。

*我在TableViewController.m*中的新方法解决了我的问题：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"mySegue"]) {
        NSLog(@"Preparing for Segue to detail view");
        Singleton *sharedInstance = [Singleton singletonManager];
        NSIndexPath *selectedRow = [self.tableView indexPathForSelectedRow];
        sharedInstance.sharedString = [self.tableData objectAtIndex:selectedRow.row];
        NSLog(@"TableViewController: Finished storing data into shared string: %@", sharedInstance.sharedString);

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T14:04:59.403

在您的目标视图控制器中设置一个属性（公共），以便您可以设置您希望传递的值。`prepareForSegue`在您的原始视图控制器中实现并导入目标视图控制器的标题。

要获取表格视图单元格的 indexPath，您应该将 IBOutlet 设置为表格视图，这样您可以使用 prepareForSegue 方法中的 indexPathForCell 方法获取 indexPath。

在你的`prepareForSegue`你应该有这样的东西：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
  NSIndexPath *indexPath = [self.tableView indexPathForCell:sender];
  if ([segue.identifier isEqualToString:@"[identifier for your segue]"]) {
     [segue.destinationViewController setValueIWantToSet:value];
  }
} 
```

如果您愿意，还可以在此处设置标签文本的值。

你`viewDidLoad`之前完成的原因是因为iOS在转换到它之前设置了目标视图控制器，使用该`prepareForSegue`方法可以保证你的目标视图控制器已经实例化和设置，所以你可以设置你想要的值。

# javascript - 为什么我的 JavaScript 调整大小函数在初始页面加载时没有运行？

> ID：10535612
> 
> 赞同：0
> 
> 时间：2012-05-10T13:59:53.677
> 
> 标签：javascript, jquery, mobile

这是一个简单的脚本，用于调整 iframe、图像和嵌入的大小以适应移动设备的窗口。我遇到的问题是它不会在页面加载时运行，而是仅在您刷新或调整窗口大小时运行。我已经在 Firefox 和 Chrome 中进行了测试，所以我猜这不是浏览器的问题，而是代码的问题。

在下面的脚本之前，我正在从 Google 加载 jQuery 1.7.2 以及 jQuery Mobile 1.1.0。

```
 $(window).bind("load", resizeMobile);
 $(window).bind("resize", resizeMobile);

  function resizeMobile() {
    var h = $(window).height();
    var w = ($(window).width() - 30);
    var max_size = w;
    $("embed, iframe, img").each(function (i) {
      if ($(this).height() > $(this).width()) {
        var h = max_size;
        var w = Math.ceil($(this).width() / $(this).height() * max_size);
      } else {
        var w = max_size;
        var h = Math.ceil($(this).height() / $(this).width() * max_size);
      }
      var url = $(this).attr('src');
      //handle ih embeds
      if (url.indexOf("/player/embed.html") > 0) {
        $(this).attr("height", h).attr("width", w);
        $(this).attr("src", $(this).attr("src")); //reload iframe to set new width and height
      } else {
        //$(this).attr("height", h).attr("width", w);
        $(this).css({
          height: h,
          width: w
        });
      }
    });
  }

  $(document).ready(resizeMobile); 
```

# php - 以字符串为条件输出PHP，删除最后一个字符

> ID：10535615
> 
> 赞同：0
> 
> 时间：2012-05-10T14:00:01.513
> 
> 标签：php, string, conditional, substr

我正在使用 wordpress 的高级自定义字段，它使用语法`get_field('custom_field_name');`从数据库中提取自定义字段。在这种情况下，我有一系列复选框，并且我正在使用 PHP 来查看是否每个都已被选中，如果是，它将吐出一个字符串。这是我的PHP：

```
<?php 
    if(in_array('brand-id', get_field('type_of_work') )): echo "<a href='../../work/#brand-id'>Brand ID</a> |"; endif; echo " ";

    if(in_array('print', get_field('type_of_work') )): echo "<a href='../../work/#print'>Print</a> |"; endif; echo " ";

    if(in_array('books', get_field('type_of_work') )): echo "<a href='../../work/#books'>Books</a> |"; endif; echo " ";

    if(in_array('web', get_field('type_of_work') )): echo "<a href='../../work/#web'>Web</a> |"; endif; echo " "; 

    if(in_array('packaging', get_field('type_of_work') )): echo "<a href='../../work/#packaging'>Packaging</a> |"; endif; echo " ";

    if(in_array('exhibit', get_field('type_of_work') )): echo "<a href='../../work/#exhibit'>Exhibit</a> |"; endif; 

?> 
```

这样做的意思是，如果选中此复选框，则为该复选框吐出一个链接。如您所见，我正在呼应“|” 在每个链接之后。问题是最后一个链接后面跟着一个“|”。我想删除最后一个“|” 以编程方式使用 PHP。也许我可以将整个内容转换为字符串然后使用`substr($string, 0, -1);`？有什么想法我会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:05:28.857

```
$links = array();

if(in_array('brand-id', get_field('type_of_work') )) $links[] = "<a href='../../work/#brand-id'>Brand ID</a>";
....

echo implode(" | ",$links); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:03:28.967

使用字符串：

```
$checks = "";

if(in_array('brand-id', get_field('type_of_work') )):  $checks .= "<a href='../../work/#brand-id'>Brand ID</a> | "; endif;

if(in_array('brand-id', get_field('type_of_work') )):  $checks .= "<a href='../../work/#print'>Print</a> |"; endif; 
```

然后： $checks 上的 substr()：`echo substr($checks, 0, -2);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:02:21.957

1.  而不是直接回显文本，将其连接到字符串变量
2.  用于`trim($string, '|')`移除尾管`|`（[手动](http://us3.php.net/manual/en/function.trim.php)）

# vb.net - 实体框架查询多于一个join VB

> ID：10535616
> 
> 赞同：0
> 
> 时间：2012-05-10T14:00:06.207
> 
> 标签：vb.net, entity-framework

我正在尝试使用实体框架来创建一个复杂的查询并陷入连接中。浏览了一些文档后，我似乎找不到正确的解决方案，所以也许这里有人可以提供帮助。

我有一个数据结构，其中一个家庭有几个家庭成员，每个家庭成员在收入表中可以有多个条目（在不同的注册日期），并且在健康状况表中可以有多个条目。

我想获得的是以下查询的结果

```
select [some stuff] from FamilyMember fm
left join FamilyMemberIncome fmi on fm.id=fmi.familymemberid
left join Education e on e.id=fmi.educationid
left join FamilyMemberHealthCondition fmhc on fm.id=fmhc.familymemberid
left join HealthCondition hc on fmhc.healthconditionid=hc.id 
```

这显然会为单个家庭成员返回多个结果，但这没关系。我的代码尝试是这样开始的（但不正确：“id 不是匿名类型的成员”）

```
Dim familyMembers As IQueryable = database.FamilyMember _
            .Join( _
                database.FamilyMemberIncome, _
                Function(fm) fm.id, _
                Function(fmi) fmi.familymemberid, _
                Function(fm, fmi) New With { _
                    .fmEducation = fmi.Education, _
                    .fmIncome = fmi.averagemonthlyincome, _
                    .fmProfession = fmi.profession _
                }
            ) _
            .Join( _
                database.FamilyMemberHealthCondition, _
                Function(fm) fm.id, _
                Function(fmhc) fmhc.familymemberid, _
                Function(fm, fmhc) New With { _
                    .fmHealthCondition = fmhc.HealthCondition
                }
            ) 
```

有人可以告诉我（或指向我解释的文章）这样做的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:34:35.833

好的，因为您在顶部很孤独:)...也许您同时自己想通了，但是语法类似于：

```
From fm in FamilyMember
Join fmi In FamilyMemberIncome On fm.id Equals fmi.familymemberid
Join e In Education On fmi.educationid Equals e.id
Join fmhc In FamilyMemberHealthCondition On fm.id Equals fmhc.familymemberid
Join hc In HealthCondition On fmhc.healthconditionid Equals hc.id
Select New With { .Name = fm.Name, .Income = fmi.Income, ...more... } 
```

（`database.`为简洁起见，省略部分）

这就是所谓的*综合*语法。就我个人而言，我更喜欢*流利*或链式语法 ( `FamilyMember.Select(...)`)，*除了*连接。尤其是连续的多个连接使得处理结果选择器函数变得非常困难，并且很快使代码变得混乱。

根据我的经验，掌握 linq 的最佳方法就是这样做。引入 linq 时，我查看了[IEnumerable](http://msdn.microsoft.com/en-us/library/bb534675)的 MSDN 文档，并对每种扩展方法进行了一些练习。这已被证明非常有用。

了解 Join 和 GroupJoin 之间的区别在 Linq-to-Sql 或 EF 中特别有用。前者转化为内连接，后者转化为外连接。

# c++ - 单例场景，用不同的参数重载getInstance？

> ID：10535617
> 
> 赞同：0
> 
> 时间：2012-05-10T14:00:08.483
> 
> 标签：c++, design-patterns, singleton

我有一个用于软件设置的单例类。在大型软件的不同位置，可以获取实例并使用它来访问已经从文件中读入设置类的设置。然而：

*   在初始调用中，需要传递“模型名称”（软件加载并运行仿真模型），根据名称，软件将加载所选模型的设置。

    设置::getInstance("building1")

*   在以后的调用中，不希望（或有时可能）再次传递“模型名称”。因此，如果我们可以在没有模型名称的情况下调用将是理想的。

在这种情况下我应该怎么做？有 2 个 getInstance 方法吗？或者在第一次调用 getInstance 之前将“模型名称”设置为 Settings 类中的静态变量？或者是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:11:42.940

我不是说单例是邪恶的，但在这里你真的不应该使用它们。一般的经验法则：如果你的类有某种可以从外部感知到的状态，那么它不应该是单例。出于众所周知的原因，应该避免使用全局状态。

你的类显然有状态，因为它需要一些初始化。不要让它成为单例。寻找其他方式来构建您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T14:05:54.310

拥有 2`getInstance()`种方法听起来像是灾难的秘诀 :) 我想该类的用户总是会问：“我该使用哪一个？” 如果有人先调用了错误的版本会发生什么？

`getInstance()`我认为与其使用 2种方法，不如使用静态变量的方法，并在初始化阶段的早期进行设置。但这也容易出错。

更好的是考虑某种工厂，它在实例化时采用模型名称并在内部有一个单例。工厂可能是这样的：

```
class SettingsFactory
{
public:
    SettingsFactory(const std::string &modelName);
    Settings *getUniqueSettingsInstance();

private:
    SettingsFactory(); // cant instantiate the default ctor

    // put the singleton stuff here
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:06:10.073

如果我理解正确，为什么不使用默认值重载 getInstance() 方法`NULL`？当您第二次调用 getInstance 时，模型名称是否为 a 无关紧要，`NULL char*`因为这次您不需要它来构造对象。

```
class Settings
{
   // ..
   static Settings * getInstance(char * modelName = NULL);
} 
```

# multithreading - 另一个线程中的异常处理创建另一个线程

> ID：10535618
> 
> 赞同：1
> 
> 时间：2012-05-10T14:00:14.383
> 
> 标签：multithreading, c#-4.0, thread-safety

我最近看到了这段代码：

```
static List<Thread> list = new List<Thread>();

static void Main(string[] args)
{
    var lines = File.ReadAllLines(args[0]);

    foreach (var line in lines)
    {
        StartThread(line);
    }

    Console.WriteLine("JOIN");

    foreach (Thread thread in list)
    {
        thread.Join();
    }

    Console.WriteLine("END");
    Console.ReadKey();
}

static void Upsert(object o)
{
    var args = o.ToString().Split(',');

    try
    {
        using (var con = new SqlConnection(Settings.Default.ConnString))
        {
            var cmd = new SqlCommand
                          {
                              Connection = con,
                              CommandText = "INSERT INTO Accounts VALUES(@p1, @p2, @p3, @p4, @p5)"
                          };

            for (var index = 0; index < args.Length; index++)
            {
                cmd.Parameters.AddWithValue(@"@p" + (index + 1), args[index]);
            }

            try
            {
                con.Open();

                cmd.ExecuteNonQuery();

                Console.WriteLine("INSERTED");
            }
            catch (SqlException e)
            {
                switch (e.Number)
                {
                    case 2627:
                        cmd.CommandText =
                            "UPDATE Accounts SET Name=@p2, Email=@p3, Active=@p4, Birthday=@p5 WHERE ID = @p1";
                        cmd.ExecuteNonQuery();
                        Console.WriteLine("UPDATED");
                        break;
                    case 1205:
                        StartThread(o); // On exception isn't some Thread handling should happen?
                        break;
                }
            }
        }
    } 
}

private static void StartThread(object o)
{
    // Is it correct to add another thread to the list again? when exception happens? What about the thread that was running
    var t = new Thread(Upsert)
    {
        Priority = ThreadPriority.Highest,
        IsBackground = true
    };
    list.Add(t);
    t.Start(o);

    Console.WriteLine("NEW THREAD STARTED");
} 
```

我在线程方面不是那么强，我特别想知道该代码何时可能发生错误 1205 并使用相同的方法再次运行另一个线程，再次添加到线程列表中。如果之前的异常咳嗽线程已完成并中止，不应该检查它吗？然后将其从列表中删除并添加新的？

你的贡献真的很有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:20:33.440

你是对的，这段代码有几个问题。

*   访问`list`不会以任何方式同步。
*   主线程加入和错误 1205 后创建的新线程之间存在竞争。

我会废弃这段代码并创建一个为您执行 upsert 的存储过程。像这样的事情在服务器端更容易处理。此外，无论如何，我并不是特别喜欢这种情况下多线程的整个想法。

如果您想从中获得最大速度，请通过 C# 代码读取文件并将其解析出来，以便将其分解为各个字段。然后使用`SqlBulkCopy`一次将所有记录放入一个临时登陆区表中。最后，调用存储过程将临时登陆区中的记录传输到相应的生产表中。所有这一切都可以在不使用任何工作线程的情况下完成，而且它可能也会明显更快。

**更新：**

如果您使用`CountdownEvent`. 完全放弃线程列表并实例化 a`CountdownEvent`以进行等待，而不是调用`Join`所有线程。

```
static CountdownEvent complete = new CountdownEvent(1);

static void Main(string[] args)
{
    var lines = File.ReadAllLines(args[0]);

    foreach (var line in lines)
    {
        StartThread(line);
    }

    Console.WriteLine("JOIN");

    complete.Signal();
    complete.Wait();

    Console.WriteLine("END");
    Console.ReadKey();
} 
```

然后`StartThread`像这样改变。

```
private static void StartThread(object o)
{
    complete.AddCount();
    var t = new Thread(
      () =>
      {
        try
        {
          Upsert(o);
        }
        finally
        {
          complete.Signal();
        }
      });
    t.Priority = ThreadPriority.Highest;
    t.IsBackground = true;
    t.Start();
    Console.WriteLine("NEW THREAD STARTED");
} 
```

所以我正在做的是`CoundownEvent`用 1 个计数来初始化，因为我想把主线程也当作一个工作线程来对待。如果其中一个工作人员在主线程完成所有其他线程的旋转之前完成，这将修复可能出现的任何微妙的竞争条件。每次我启动一个新线程时，我都会调用`AddCount`，当该线程完成时，我会调用`Signal`. 当然，主线程通过调用`Wait`.

如果我想稍微更改代码的结构，我可能会使用任务 via `Task`，然后当错误 1205 出现时，我会创建一个子任务并将其附加到父任务 via `TaskCreationOptions.AttachedToParent`。但是，这将需要一些更重大的更改，我希望将更改保持在最低限度。

# javascript - 如何使用 Chrome javascript 事件监听器？

> ID：10535627
> 
> 赞同：2
> 
> 时间：2012-05-10T14:00:47.550
> 
> 标签：javascript, events, google-chrome, listener, inspect

Chrome 检查元素事件侦听器对于查看 dom 元素上的事件侦听器非常有用。然而，展开后，没有“人类可利用”的数据......

[http://imageshack.us/photo/my-images/152/screenshot20120510at145.png/](http://imageshack.us/photo/my-images/152/screenshot20120510at145.png/)

有没有办法获得有关事件侦听器的更多信息？就像它所在的 js 文件/行号一样？

# php - 加载结果时显示占位符

> ID：10535628
> 
> 赞同：0
> 
> 时间：2012-05-10T14:00:52.350
> 
> 标签：php, jquery

我有一个页面，其中包含从 db 检索到的各种信息块。这些块被安排成部分，目前所有代码都带有一个很长的 PHP 页面，所以每次我加载一个页面时，它的显示都会有延迟。我希望能够更快地加载页面并在将加载内容的部分中放置某种“正在加载...”或图像占位符。我经常在其他网站上看到它。我该如何做到这一点？我是否需要将我的长 PHP 页面分解为：

1.  主布局页面

2.  将每个带有 db 数据的块放入单独的页面中，并且

3.  使用包含插入到主页。

在生成内容时如何放置“加载”？

只是想更好地理解这个过程。我也使用 jQuery。也许有一个插件可以帮助解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:10:04.907

在您的主布局页面中仅包含您希望在页面初始加载时可见的那些元素。您应该拥有带有 ID 的占位符元素，可以通过 JavaScript 访问您想要从服务器获取的内容。

使用 jQuery 的 ajax 函数将内容从单独的请求加载到服务器：

```
$.ajax({
    url: '/path/to/script.php',
    data: 'any=get&variables=you&would=like&to=set', // can also be passed as an object
    success: function( html ) {
        // The argument passed to the success function is ALL of the output 
        // of your 'script.php'
        $('#containerid').html( html );

    }
}); 
```

在您的后端 PHP 脚本中，只需`echo`输出您想要显示的内容。您可以选择将内容作为 JSON 对象传回，这是一种更优选的方法，但需要在客户端进行更多处理（必须先解析对象才能访问它。有关更多信息，请参阅 PHP 的[json_encode](http://php.net/manual/en/function.json-encode.php)函数和[JSON.org](http://www.json.org/)在 JSON 上）。

Structured this way, it makes the most sense to me to make 1 ajax request per container that you would like to fill.

Please also check out the [reference page](http://api.jquery.com/jQuery.ajax/) for jQuery's ajax function

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:06:05.377

由于您使用的是 jQuery，因此显而易见的方法是让 PHP 脚本构建一个骨架页面，然后使用 javascript 函数 (Ajax) 加载页面的不同部分，甚至以块的形式进行加载，因此只加载每个部分的一部分每次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:07:42.787

您可以使用页面布局构建一个 php 文件。在此文件中，使用 AJAX 从所有块中加载数据。您可以使用 jQuery 进行 AJAX 调用。

当你执行 ajax 调用时，你可以放一些动画 gif “Loading...”，如果你搜索 google “loading gif”，就会有很多。

希望能帮助到你。

# java - 使用java通过usb-serial cable连接

> ID：10535631
> 
> 赞同：1
> 
> 时间：2012-05-10T14:00:58.300
> 
> 标签：java, serial-port, rxtx, usbserial

我正在使用 java 库 rxtxx 向微控制器发送数据，应用程序似乎可以工作，但出现警告：rxtxx2.1.7 版本不匹配会影响发送的数据吗？我已经对其进行了测试，但没有发送任何数据我的代码是：

```
 import java.util.*;
import gnu.io.*;
import java.io.*;

public class portwrit{
    static Enumeration        portList;
    static CommPortIdentifier portId;
   static String msgstr="100";
    static SerialPort         serialPort;
    static OutputStream       outputStream;
    static  InputStream inputStream;
    static  Thread readThread;

    static boolean        outputBufferEmptyFlag = false;

    public static void main(String[] args ) throws NoSuchPortException, PortInUseException {
    boolean portFound = false;
    String defaultPort = "COM6";

    portList = CommPortIdentifier.getPortIdentifiers();

    while (portList.hasMoreElements()) {
        portId = (CommPortIdentifier) portList.nextElement();

        if (portId.getPortType() == CommPortIdentifier.PORT_SERIAL) {

        if (portId.getName().equals(defaultPort)) {
            System.out.println("Found port " + defaultPort);
            portFound = true;
            try {
            serialPort = 
                (SerialPort) portId.open("SimpleWrite", 2000);
            } catch (PortInUseException e) {
            System.out.println("Port in use.");
            continue;
            } 

            try {
            outputStream = serialPort.getOutputStream();
            } catch (IOException e) {}

            try {
            serialPort.setSerialPortParams(9600, 
                               SerialPort.DATABITS_8, 
                               SerialPort.STOPBITS_1, 
                               SerialPort.PARITY_NONE);
            } catch (UnsupportedCommOperationException e) {}

            try {
                serialPort.notifyOnOutputEmpty(true);
            } catch (Exception e) {
            System.out.println("Error setting event notification");
            System.out.println(e.toString());
            System.exit(-1);
            }

            System.out.println(
                "Writing "+msgstr+"\" to "+serialPort.getName());
            try {
            outputStream.write(Byte.parseByte(msgstr));
            } catch (IOException e) {}

            try {
               Thread.sleep(2000);  // Be sure data is xferred before closing
            } catch (Exception e) {}
            serialPort.close();
            System.exit(1);

        } 
        } 
    } 

    if (!portFound) {
        System.out.println("port " + defaultPort + " not found.");
    } 
    } 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:07:03.897

根据[这篇文章](http://wiki.processing.org/w/Serial_Issues)，您可能安装了 RXTX 软件的多个副本。它建议在你的路径/类路径上寻找 comm.jar 或 RXTXcomm.jar 或类似的东西。

# selenium-webdriver - driver.findElement(By.linkText("")) 在一个测试中工作但在另一个测试中抛出异常

> ID：10535632
> 
> 赞同：0
> 
> 时间：2012-05-10T14:00:59.353
> 
> 标签：selenium-webdriver, testng

我正在尝试在同一个类中编写两个 testng 测试（使用 Selenium webdriver） - 一个登录到应用程序，另一个创建一个新帐户。

这些是我正在遵循的步骤 - 使用 @BeforeClass 在 Firefox 浏览器上打开应用程序

```
@BeforeClass
public void setUp() throws Exception {
    driver = new FirefoxDriver();
    baseUrl = "http://www.salesforce.com";
    driver.get(baseUrl + "/");
} 
```

*   首先测试登录网站

    ```
    @Test
    public void testLogin() throws Exception {
    driver.findElement(By.id("username")).sendKeys(strUsername);
    driver.findElement(By.id("password")).sendKeys(strPassword);
    driver.findElement(By.id("Login")).click(); 
    ```

    }

*   第二次测试创建一个新帐户

    ```
    @Test
    public void createAccount() throws Exception {
    driver.findElement(By.linkText("Accounts")).click();
    ************************
            ************************
            ************************
            ************************
            ************************ 
    ```

    }

我的问题是，当我运行这个 testng 测试时，我在第二个测试中遇到异常： **org.openqa.selenium.NoSuchElementException: Unable to locate element: {"method":"link text","selector":"Accounts"}**

但如果我包含命令“driver.findElement(By.linkText("Accounts")).click();” 在 testLogin() 测试中，它可以工作。我想在同一个浏览器会话中运行我的所有测试。

任何输入将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:40:33.980

@BeforeClass 只为一个班级运行一次。因此，如果您将两个测试保留在同一个类中，则执行顺序是 @beforeClass ，您的第一个测试用例，然后是您的第二个测试用例（您的帐户链接应该在您到达此测试时可见）。

不保证测试的顺序。因此，如果帐户链接仅在您登录后可见，那么您的案例可能不会一直通过。所以，问题可能是

1.  达到您的 createAccount() 测试时，该元素未出现，或者
2.  createAccount 在登录前被调用，因此帐户链接不可用。

如果您希望您的测试用例按特定顺序执行，请使用 dependsOnMethods 并使 createAccount 依赖于 testLogin 方法。（参考[Testng 依赖方法](http://testng.org/doc/documentation-main.html#dependent-methods)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:40:57.567

@BeforeClass 将为每个单独的测试运行您的设置方法 - 因此对于测试 1，将创建一个新的 Firefox 浏览器并登录。对于第二个测试，将创建另一个新的 Firefox 浏览器，它会尝试查找 Accounts 链接——我假设它仅在您登录时显示，但是此时第二个浏览器不会登录。

你确定你在@BeforeClass 之后吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T07:15:58.383

我猜你的第二个测试方法首先被执行。它需要执行第一种方法（用于登录）以获取“帐户”链接。您需要在第二个方法中使用dependsOnMethod，以便testLogin 将执行第一个然后createAccountMethod。@BeforeClass 似乎可以使用您的 setUp() 方法。因此，保持 setUp() 方法不变。将其他两种方法声明为：

```
@Test
public void testLogin() throws Exception {
//your code here
}
@Test(dependsOnMethods{"testLogin"})
public void testCreateAccount() throws Exception {
//your code here
} 
```

在上面的代码中 testLogin() 将执行第一个然后 testCreateAccount() 方法，这样您想要点击的链接就不会错过

# iphone - cellForRowAtIndexPath 中的 ReusableCellWithIdentifier 问题

> ID：10535637
> 
> 赞同：2
> 
> 时间：2012-05-10T14:01:16.653
> 
> 标签：iphone, uitableview

在我的应用程序中，我有一个 imageView 和一个 UILabel。对于 ImageView，我已经为它分配了异步图像，它工作正常，但是当我滚动表格时，第一行和最后一行的标签会重叠。

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    productObject=[appDelegate.productArray objectAtIndex:indexPath.row];
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    UILabel *nameLabel;
    if (cell == nil) 
    {

        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero     reuseIdentifier:CellIdentifier] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleBlue;

    }   

    else 
    {

        AsyncImageView* oldImage = (AsyncImageView*)[cell.contentView viewWithTag:999];
        [oldImage removeFromSuperview];
    }

    CGRect nameLabelRect = CGRectMake(70,80,150,15);
    nameLabel = [[UILabel alloc] initWithFrame:nameLabelRect];    
    nameLabel.text = [NSString stringWithFormat:@"%@",productObject.productname];
    nameLabel.textAlignment = UITextAlignmentCenter;
    nameLabel.lineBreakMode = UILineBreakModeCharacterWrap;
    nameLabel.font = [UIFont boldSystemFontOfSize:15];
    nameLabel.backgroundColor = [UIColor clearColor];
    [cell.contentView addSubview: nameLabel];

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T14:09:07.670

对于每个单元格使用单独的标识符，如下所示

```
 NSString *cellIdentifier = [NSString stringWithFormat:@"cell%i",indexpath.row]; 
```

或者只是不使用可重用性，只需将单元格和数据放入其中

```
-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

UITableViewCell *cell = [[UITableViewCell alloc]init];
UIButton *favBtn = [UIButton buttonWithType:UIButtonTypeCustom];
favBtn.frame = CGRectMake(0, 0, 50, 50);
favBtn.backgroundColor = [UIColor clearColor];
favBtn.showsTouchWhenHighlighted = YES;
favBtn.tag = indexPath.row;

UIButton *arrowBtn = [UIButton buttonWithType:UIButtonTypeCustom];
arrowBtn.frame = CGRectMake(280, 26, 25, 25);
arrowBtn.backgroundColor = [UIColor clearColor];
arrowBtn.showsTouchWhenHighlighted = YES;
[arrowBtn setImage:[UIImage imageNamed:@"arrow.png"] forState:UIControlStateNormal];

UILabel *date = [[UILabel alloc]initWithFrame:CGRectMake(55, 26, 250, 25)];
date.font = [UIFont fontWithName:[[UIFont familyNames] objectAtIndex:0]  size:15];
date.text = ann.title;
date.textColor = [UIColor blackColor];
date.backgroundColor = [UIColor clearColor];

[cell.contentView addSubview:favBtn];
[cell.contentView addSubview:date];
[cell.contentView addSubview:arrowBtn];

    return cell;
} 
```

我不是专家，但第二个对我很有用，希望你也能帮到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:05:48.323

您将 nameLabel 添加到单元格中，无论它是新创建的还是重复使用的。所以，是的，每次你将一个重复使用的单元格滚动到视图中时，它都会堆积在另一个标签上。

# php - 如何在php中获得下一个四个月的年份？

> ID：10535643
> 
> 赞同：1
> 
> 时间：2012-05-10T14:01:46.347
> 
> 标签：php

我想在下拉框中获取当前月份和接下来的三个月，问题是当 2012 年 11 月到来时，最后一个月是 2013 年 1 月，如果当前月份是 2012 年 12 月，那么巢三个月将是

2013 年 1 月 2013 年 2 月 2013 年 3 月

在下拉列表中它应该看起来像

```
December2012
january2013
february2013
march2013 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T14:05:47.213

尝试这样的事情：

```
$this_month = mktime(0, 0, 0, date('m'), 1, date('Y'));
for ($i = 0; $i < 4; ++$i) {
    echo date('M Y', strtotime($i.' month', $this_month)) . '<br/>';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T14:13:10.290

```
echo date('F Y') . "\n";
echo date('F Y', strtotime('+1 month', time())) . "\n";
echo date('F Y', strtotime('+2 month', time())) . "\n";
echo date('F Y', strtotime('+3 month', time())) . "\n"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T14:17:11.097

如果你感觉有点面向对象：

```
date_default_timezone_set('Europe/Stockholm');
$now = new DateTime(date('Y-m'));
$period = new DatePeriod($now, new DateInterval('P1M'), 3);

foreach ($period as $date)
{
    print $date->format('MY');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T14:12:45.897

```
$t = time();
$m = date('n', $t);
$d = date('j', $t);
$y = date('Y', $t);
for ($i = 0; $i < 4; $i++)
{
    echo date('FY\n', mktime(0, 0, 0, ($m + $i - 1) % 12 + 1, $d, $y + ($m + $i > 12 ? 1 : 0)));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-30T11:05:57.723

$this_month = mktime(0, 0, 0, date('m'), 1, date('Y'));

for($i=0;$i<4;$i++) {

echo date("MY", strtotime($i." month", $this_month)) 。'
';

}

# c# - 如何在 <%= %> 内打印文本？

> ID：10535645
> 
> 赞同：2
> 
> 时间：2012-05-10T14:01:57.747
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-2

有没有更简单的方法来执行以下操作？

```
<% if (Model.XY == 10) { %>
    10
<%} else { %>
    <%= Html.ActionLink("10", "SetXY", new { [...] }) %>
<% } %> 
```

我正在考虑类似的事情

```
<%= Model.XY == 10 ? "10" : Html.ActionLink() %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:59:00.680

ActionLink 帮助程序返回 MvcHtmlString。值“10”是一个字符串。MvcHtmlString 和 String/string 之间没有隐式转换。

要解决这个问题，您应该使用以下方法从字符串中创建 MvcHtmlString：

```
 new MvcHtmlString("10"); 
```

从那里您可以将代码简化为：

```
 <%= Model.XY == 10 ? new MvcHtmlString("10") : Html.ActionLink("10", "SetXY", new { [...] }) %> 
```

# url - GWT.getHostPageBaseURL() 不起作用

> ID：10535652
> 
> 赞同：0
> 
> 时间：2012-05-10T14:02:24.303
> 
> 标签：url, gwt, request

我用 gwt 编写并部署在 tomcat 7 上的应用程序有问题。问题是我无法通过 GWT.getHostPageBaseURL() 方法获取基本 url。我建立下一个请求：

```
new RequestBuilder(RequestBuilder.POST, GWT.getHostPageBaseURL() + "login"); 
```

但结果是 404 未找到。该应用程序在我的网址中运行：192.168.3.3:
8080/myapp/ 当我将应用程序的 tomcat 根上下文更改为“/”时，192.168.3.3:8080/ 工作正常，所以我需要从网址。有人知道如何获取这部分网址吗？我不想把它当作文字来请求构建器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T04:43:54.360

您可以使用 GWT.getModuleBaseUrl(); 它将返回您正在寻找的完整 url，即 192.168.3.3:8080/myapp/。如果您只想要 Jamshid Asatillayev 建议的上述方法的模块名称就可以正常工作，即 GWT.getModuleName();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:59:40.877

> 所以我需要从 url 获取“myapp”

使用 [GWT.getModuleName()](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/core/client/GWT.html#getModuleName%28%29) 获取正在运行的模块的名称。

# python - 获取文件的父目录，直到某一点

> ID：10535662
> 
> 赞同：5
> 
> 时间：2012-05-10T14:03:05.723
> 
> 标签：python

如果我有给定文件的路径，比如说`'C:\Folder\OtherFolder\AnotherFolder\file.txt'`，在 python 中有没有一种方法可以让 file.txt 的所有父目录达到`'OtherFolder'`？`'OtherFolder'`路径的深度不是恒定的，所以我不能只迭代一定次数，但无论深度如何，我总是需要起床。我觉得这应该比我做的容易，但他们说星期四是新的星期一。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T14:04:53.347

如果您使用的是 Windows，请尝试以下操作：

```
import os
os.path.relpath('C:\Folder\OtherFolder\AnotherFolder\file.txt', 'C:\Folder\OtherFolder') 
```

`os.path.sep`然后，您可以使用（在您的情况下）拆分它`\`：

```
rel_path.split(os.path.sep) 
```

获取各个目录。

在 Linux 机器上，类似的调用会返回您的意思：

```
os.path.relpath('/Folder/OtherFolder/AnotherFolder/file.txt', '/Folder/OtherFolder')
# returns 'AnotherFolder/file.txt'

rel_path.split(os.path.sep)
# returns ['AnotherFolder', 'file.txt'] 
```

# c# - 如何使用 oleDbDataAdapter.Update(myDataSet) 更新 excel 文件

> ID：10535663
> 
> 赞同：1
> 
> 时间：2012-05-10T14:03:13.643
> 
> 标签：c#, excel, oledb, oledbdataadapter

我不断收到 InvalidOperationException（“当传递带有修改行的 DataRow 集合时，更新需要有效的 UpdateCommand”）。我只是无法弄清楚更新命令有什么问题。

这是我到目前为止的代码：

```
 OleDbConnection connection;
    OleDbDataAdapter clientsAdapter new OleDbDataAdapter();
    DataSet myDataSet = new DataSet();

    public void Setup()
    {
        connectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=Clients.xlsx;Extended Properties=""Excel 12.0 Xml;HDR=YES"";";
        connection = new OleDbConnection(connectionString);
        connection.Open();

        // SQL
        clientsAdapter.SelectCommand = new OleDbCommand("SELECT * FROM [Clients$]", connection);
        OleDbCommand updateCmd = new OleDbCommand(
            "UPDATE [Clients$] " + 
            "SET " +
                "[Family Name] = ?, " +
                "[Given Name] = ?, " + 
                "Address = ?, " + 
                "[Home Phone] = ?, " + 
                "[Work Phone] = ?, " + 
                "[Mobile Phone] = ?, " + 
                "Email = ?, " + 
                "Status = ?, " + 
                "Comments = ? " + 
            "WHERE " + 
                "[Last Name] = ? AND " + 
                "[First Name] = ?"

        // SET clause
        updateCmd.Parameters.Add("Family Name", OleDbType.Char, 100, "Family Name");
        updateCmd.Parameters.Add("Given Name", OleDbType.Char, 100, "Given Name");
        updateCmd.Parameters.Add("Address", OleDbType.Char, 100, "Address");
        updateCmd.Parameters.Add("Home Phone", OleDbType.Double, 100, "Home Phone");
        updateCmd.Parameters.Add("Work Phone", OleDbType.Char, 100, "Work Phone");
        updateCmd.Parameters.Add("Mobile Phone", OleDbType.Char, 100, "Mobile Phone");
        updateCmd.Parameters.Add("Email", OleDbType.Char, 100, "Email");
        updateCmd.Parameters.Add("Status", OleDbType.Char, 100, "Status");
        updateCmd.Parameters.Add("Comments", OleDbType.Char, 100, "Comments");

        // WHERE clause
        OleDbParameter fName = updateCmd.Parameters.Add("Old Family Name", OleDbType.Char, 100, "Family Name");
        fName.SourceVersion = DataRowVersion.Original;
        OleDbParameter lName = updateCmd.Parameters.Add("Old Given Name", OleDbType.Char, 100, "Given Name");
        lName.SourceVersion = DataRowVersion.Original;

        clientsAdapter.InsertCommand = updateCmd;

        // create table and fill
        DataTable clients = new DataTable("Clients");
        clientsAdapter.Fill(clients);
        myDataSet.Tables.Add(clients);

        connection.Close();
    }

    public void UpdateDb()
    {
        connection.Open();
        clientsAdapter.Update(myDataSet, "Clients");  // errer occurs here
        connection.Close();
    } 
```

虽然google上有几个简单的例子，但我一直没能找到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:07:49.160

您尚未设置`UpdateCommand`clientsAdapter 的属性。

您创建了一个`OleDbCommand`名为“updateCmd”，但随后您将 InsertCommand 属性设置为它：

`clientsAdapter.InsertCommand = updateCmd;`

我怀疑你想要：

`clientsAdapter.UpdateCommand = updateCmd;`

# c++ - 将 inline 关键字与模板一起使用是否有意义？

> ID：10535667
> 
> 赞同：133
> 
> 时间：2012-05-10T14:03:20.120
> 
> 标签：c++, templates, inline

由于模板是在头文件中定义的，并且编译器能够确定内联函数是否有利，这是否有意义？我听说现代编译器更清楚何时内联函数并且忽略`inline`提示。

* * *

编辑：我想接受这两个答案，但这是不可能的。为了结束这个问题，我接受了**Sebastian Mach**的回答，因为它获得了大多数选票，而且他在形式上是正确的，但正如我在评论中提到的那样，我认为**Puppy**和**Component 10**的答案也是正确的，从不同的角度来看看法。

问题在于 C++ 语义，在`inline`关键字和内联的情况下并不严格。**Sebastian Mach**说“如果你是认真的，就写内联”，但实际上它的意思`inline`并不清楚，因为它从最初的含义演变为“停止编译器抱怨 ODR 违规”的指令，正如**Puppy**所说。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-05-10T14:49:32.377

这不是无关紧要的。不，不是每个函数模板都是`inline`默认的。该标准甚至在*Explicit specialization* ([temp.expl.spec])中对此进行了明确说明

有以下几点：

*cc*

```
#include "tpl.h" 
```

*b.cc*

```
#include "tpl.h" 
```

*tpl.h*（取自显式专业化）：

```
#ifndef TPL_H
#define TPL_H
template<class T> void f(T) {}
template<class T> inline T g(T) {}

template<> inline void f<>(int) {} // OK: inline
template<> int g<>(int) {} // error: not inline
#endif 
```

编译这个，等等：

```
g++ a.cc b.cc
/tmp/ccfWLeDX.o: In function `int g<int>(int)':
inlinexx2.cc:(.text+0x0): multiple definition of `int g<int>(int)'
/tmp/ccUa4K20.o:inlinexx.cc:(.text+0x0): first defined here
collect2: ld returned 1 exit status 
```

在进行显式实例化时没有说明`inline`也可能导致问题。

**总而言之**：对于非完全专业化的功能模板，即至少带有一种未知类型的功能模板，您可以省略`inline`，并且不会收到错误，但它们仍然不是`inline`。对于完全专业化，即仅使用已知类型的专业化，您不能省略它。

**建议的经验法则**：`inline`如果你是认真的就写，并且保持一致。它让你更少考虑是否仅仅因为你可以。（这个经验法则符合[Vandevoorde/Josuttis 的*C++ 模板：完整指南*](http://books.google.co.uk/books?id=yQU-NlmQb_UC&lpg=PA72&vq=inline&dq=c%2B%2B%20templates%20the%20complete%20guide&pg=PA72#v=onepage&q&f=false)）。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-05-10T14:05:07.153

这无关紧要。所有模板都已经`inline`- 更不用说截至 2012 年，该`inline`关键字的唯一用途是阻止编译器抱怨 ODR 违规。您是绝对正确的-您当前的编译器将自己知道要内联什么，甚至在翻译单元之间也可能这样做。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-10T14:12:30.400

正如您所建议的，`inline`这是对编译器的提示，仅此而已。它可以选择忽略它，或者实际上内联未标记为内联的函数。

使用`inline`模板曾经是解决每个编译单元会为同一个模板类创建一个单独的对象的问题的（糟糕的）方法，这会导致链接时出现重复问题。通过使用`inline`（我认为）名称修饰的工作方式不同，它可以在链接时解决名称冲突，但会以大量臃肿的代码为代价。  

Marshall Cline[在这里解释](https://isocpp.org/wiki/faq/templates#separate-template-class-defn-from-decl)得比我还好。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2020-10-22T20:08:24.837

这就是 C++ 标准所说的：

[[dcl.inline/1]](https://eel.is/c++draft/dcl.inline)

> 内联说明符仅应用于变量或函数的声明。

# c++ - GLib2+MSVC：分叉 GLib2 以制作库的“轻量级”版本

> ID：10535668
> 
> 赞同：-1
> 
> 时间：2012-05-10T14:03:22.883
> 
> 标签：c++, visual-studio-2008, cmake, glib

我在使用 VC2008 express 编译的私有项目中使用 libGTS。

**精简版**

libGTS 依赖于 glib2，它（AFAIK）不能用 VC2008 编译。我想将 glib2 的相关部分拉入 libGTS 并进行分叉。解决这个问题的好方法是什么？

**长版**

为了使用 libGTS（最初使用 autotools），我已经将其转换为 cmake 构建系统。

不幸的是，libGTS 依赖于 glib2，它依赖于 libiconv、libintl、pcre、libFFI（在较新版本中）、pkg-config，其中 pkg-config 依赖于 glib2。即循环依赖。

据我所知，glib2 不能以任何方式使用 VC2008 express 编译，因为它需要自动工具，并且将 Glib2（和所有依赖项）转换为 cmake 之类的东西会花费我太多时间。

到目前为止，我已经使用 mingw 管理了构建 glib2，并将 mingw-built glib2 与 msvc-built libGTS 链接（glib2 有 C 接口，所以它是可能的），但这在某些情况下会引入问题，因为 glib2 和 libGTS 使用不同的 crt , libGTS 将 FILE* 之类的东西传递给 glib2。

幸运的是，libGTS 使用了 glib2 的一小部分：

```
g_slist_remove_link
g_list_foreach
g_array_append_vals
g_array_new
g_array_free
g_strdup_vprintf
g_string_free
g_string_new
g_slist_foreach
g_string_insert_c
g_strdup_printf
g_strdup
g_strjoin
g_str_equal
g_str_hash
g_malloc0
g_ptr_array_set_size
g_list_reverse
g_list_length
g_ptr_array_free
g_mem_chunk_destroy
g_ptr_array_remove_index
g_mem_chunk_free
g_mem_chunk_alloc
g_ptr_array_add
g_ptr_array_new
g_mem_chunk_new
g_list_remove_link
g_list_free_1
g_hash_table_lookup
g_malloc
g_free
g_slist_length
g_hash_table_new
g_hash_table_foreach
g_hash_table_remove
g_hash_table_insert
g_hash_table_destroy
g_slist_find
g_slist_remove
g_slist_reverse
g_hash_table_size
g_hash_table_find
g_assertion_message
g_list_last
g_slist_append
g_list_free
g_list_prepend
g_list_append
g_assertion_message_expr
g_slist_free_1
g_node_destroy
g_node_depth
g_slist_concat
g_node_new
g_slist_prepend
g_slist_nth
g_node_prepend
g_slist_free
g_hash_table_foreach_remove
g_log 
```

所以我想将 glib 的相关部分拉入 libGTS，摆脱所有外部依赖项（iconv/libintl - 这个子系统不需要它们）并制作一个“干净”的 fork（两个库都是 LGPL，有服务 github/ bitbucket，所以这不是问题）。“干净”的分叉意味着最少的外部依赖。

我尝试将 glib2 的单独部分（单个文件）拉入 libgts 中的 cmake 子目录（即包含“glib2lite”库项目的目录），但这并没有真正奏效，因为一个文件通常最终会拉出所有其他文件。我还设法生成了 libgts 的调用图（以查找实际使用的函数），但最终它并没有真正的帮助。

那么解决这个问题的好方法是什么（制作大外部依赖的轻量版）？我敢肯定，以前有人做过类似的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:05:41.430

GLib 使用 MSVC 构建良好，并在最新的 tarball 中提供其 Visual Studio 项目文件。有关详细信息，请参阅[GTK+ MSVC wiki 页面](https://live.gnome.org/GTK+/Win32/MSVCCompilationOfGTKStack)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:11:42.570

按照函数列表，不要从 glib2 中提取任何东西 - 只需自己重新实现它（我已经为类似的程序做过很多次了。需要注意的一点是 MSVCRT 和 glib2 中的字符串函数几乎相同，您甚至可以摆脱`#define`这些）。

我现在更仔细地研究它们，使用 STL 和 Win32 复制这些功能应该不会超过一两个小时。理解和提取 glib2 函数将花费您更长的时间。

一些提示： slist 在 Win32 中可用，但对象不同。与 STL 相同。直接从 libGTS 中使用 STL 可能会更好。

它并没有我最初想象的那么糟糕。你可能可以在一夜之间完成整个事情。

# ncrunch - 通过 ncrun 显示所有未发现的代码行

> ID：10535672
> 
> 赞同：5
> 
> 时间：2012-05-10T14:03:28.967
> 
> 标签：ncrunch

Ncrunch 显示代码行，这些代码行没有被测试覆盖为黑色气泡......

是否有可能显示测试未涵盖的所有代码行？（类似于 dotCover 代码检查报告）

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:48:09.433

Ncrunch 从版本 1.39b 开始支持此功能。有一个指标按钮，您可以在其中获得覆盖范围（解决方案、项目、文件）的汇总概览。整洁的特点。

# c# - Form.Show() 和 Form.Visible ThreadSafe

> ID：10535675
> 
> 赞同：0
> 
> 时间：2012-05-10T14:03:36.387
> 
> 标签：c#, winforms, thread-safety

好的..我的主表单由一些用户控件和一些可以打开其他表单的按钮组成。我有一个后台工作人员，其 UI 不会冻结。后台工作人员更新表单上的时钟，并检查数据库是否满足特定条件。如果满足条件，则隐藏此表单并显示新表单。

我也在检查第二个表格是否已经打开。因为一旦我打开它，我就不会关闭它。我只是使用隐藏和显示。所以我的问题是，我找不到线程安全的方式来创建和打开表单，或者如果表单已经打开则显示表单。我还必须隐藏当前表单。

这是我的代码

```
//bool variable to determine if i need to open the form
if (inShift)
            {
                frmInShift InShift = null;
                if ((InShift = (frmInShift)IsFormAlreadyOpen(typeof(frmInShift))) == null)
                {
                    InShift = new frmInShift();
                    InShift.RefToParent = this;
                }
                else
                {
                    InShift.RefToParent = this;
                }
                InShift.ResetButtons();
                InShift.Show();
                this.Visible = false;
            } 
```

我知道这段代码有效，我在表单上的一个按钮上使用它。我只需要使这个线程安全。如果表单尚未打开，部分问题实际上是创建表单。

我应该对主线程进行检查吗？如果可行，我将如何调用 Show() 方法？

编辑：我正在我的主表单加载事件中创建我的第二个表单。所以我需要做的就是设置一些公共变量并显示表单并隐藏主表单。

我的 RunWorkerCompleted 代码如下所示：

```
 if (inShift)
            {                   
                InShift.RefToParent = this;
                InShift.ResetButtons();
                InShift.Show();
                //program freezes up here
                this.Invoke(new ThisFormVisibleCB(ThisFormVisible), new object[] { false });
            } 
```

当我在此调用 Invoke 以隐藏表单时程序冻结..help??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:09:31.983

解决了..愚蠢的问题，我应该很久以前就发现了。

对于初学者..我摆脱了后台工作人员并将所有内容都放在计时器中..它仍然无法正常工作。然后我意识到我仍在使用“线程”计时器。

我把我的计时器从

```
System.Timers.Timer 
```

到一个

```
System.Windows.Forms.Timer 
```

它现在完美无缺。

# arrays - 使用数组实现图

> ID：10535677
> 
> 赞同：1
> 
> 时间：2012-05-10T14:03:38.167
> 
> 标签：arrays, algorithm, memory, graph

我想实现一个生成图形的工具，其内存将分配在所谓的“磁带”数据结构上。您可以将磁带视为一个元素数组，每个元素都包含“节点 ID”，链接到其“父节点”以及“子节点”。

我正在寻找一种方法，在该方法中识别阵列中的可用插槽很便宜，因此当要添加新节点时，可以快速识别空插槽。

如果我使用动态数组来实现磁带呢？在需要调整数组大小的情况下，是否可以避免将整个磁带复制到新分配的数组中？

这里有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:15:37.993

我假设您想预先分配一个大的“磁带”，例如数千个节点。

您应该结合两个概念：

*   首先将最后使用的条目存储在磁带上。下次需要新条目时，只需选择上次使用的条目之后的条目即可。
*   其次保留一个免费列表。使用磁带条目的前 4 个字节（或 64 位中的 8 个字节）作为指向下一个空闲条目的指针。磁带的开头应指向第一个空闲条目。

每当磁带上的条目被释放时，将其添加到空闲列表中。

每当磁带中需要新条目时：

*   检查空闲列表中是否有元素。如果有第一个条目并将其从空闲列表中删除
*   如果空闲列表为空，则使用最后使用的条目并立即获取它之后的条目。

您还可以将此与重新分配方案结合使用，在该方案中，您保留磁带的总分配大小，并在最后使用的条目到达磁带末尾时重新分配。

# iphone - Apple Mach-O 链接器警告

> ID：10535678
> 
> 赞同：0
> 
> 时间：2012-05-10T14:03:41.167
> 
> 标签：iphone

我收到黄色警告：

**忽略文件 /Applications/Xcode.app/Contents/Developer/Library/Frameworks/SenTestingKit.framework/SenTestingKit，文件中缺少所需的架构 armv7**

不知道这意味着什么。

任何人都可以就这个黄色警告提出一些建议。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:14:25.623

您正在尝试使用为您的设备上的模拟器制作的 SenTestingKit 框架。您可以以适当的方式重新添加 SenTestingKit 框架（目标->构建阶段->“按加号”，选择您的框架）

```
lipo -info /Applications/Xcode.app/Contents/Developer/Library/Frameworks/SenTestingKit.framework/SenTestingKit 
```

给出输出

```
Architectures in the fat file: /Applications/Xcode.app/Contents/Developer/Library/Frameworks/SenTestingKit.framework/SenTestingKit are: x86_64 i386 
```

# php - Google 博主帖子 GUID 的格式是什么？PHP / CodeIgniter / SimplePie

> ID：10535680
> 
> 赞同：0
> 
> 时间：2012-05-10T14:03:47.907
> 
> 标签：php, codeigniter, rss, blogger, simplepie

我正在尝试在我的网站上创建显示 RSS 谷歌博客帖子的页面。我正在使用 PHP、CodeIgniter 和 SimplePie 来解析 Google 提要。

**问题一：**

我希望能够在一个页面上使用 guid 创建一个链接，然后在下一页上显示个人博客文章。所以我有这样的事情：

[http://mysite.co.uk/technology/blog_post/tag:blogger.com,1999:blog-6168323340908483477.post-1651486241197422269](http://mysite.co.uk/technology/blog_post/tag:blogger.com,1999:blog-6168323340908483477.post-1651486241197422269)

这不起作用，因为 guid 对 url 无效并且看起来很乱（可以使用 url_encode 但不想这样做）。我想像这样得到它：

[http://mysite.co.uk/technology/blog_post/6168323340908483477/1651486241197422269](http://mysite.co.uk/technology/blog_post/6168323340908483477/1651486241197422269)

为此，我需要了解 guid 的格式。这是一个json对象吗？如果是这样，我该如何拆分？我可以使用 explode() 来拆分它，但我想有更好的方法。

**问题 2：**

我可以在我的 CodeIgniter / SimplePie 网站上显示提要，但我不能轻松地显示单个提要。这是我目前的代码（未经测试）：

```
 foreach($feeds as $k => $item):
    if(  $item->get_id()==$this->uri->segment(3) ): //Does id of post match id passed in?
    ?>
      <h1 id="main-heading"><?=$page_title?></h1>
      <div class="blog-date"><?=$item->get_date()?></div>
      <h3><a href="<?=$item->get_link()?>"><?=$item->get_title()?></a></h3>
      <div class="blog-desc"><?=$item->get_description()?></div>
    <?
    break;//End as we only want to display one post, need a better way of doing this.
    endif;
  endforeach; 
```

显然，这是一个循环，而不是对 1 个提要的单独引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T01:39:47.333

### 问题 1

您不应将 GUID 视为某种格式，也不应将其视为有效的 URL（除非该`isPermalink`属性设置为`true`- 省略应该暗示`true`，但并非总是如此）。

最好的办法是简单地散列 GUID。如果您希望 SimplePie 为您执行此操作，只需使用[`$item->get_id(true)`](http://simplepie.org/wiki/reference/simplepie_item/get_id)

### 问题2

如果您只尝试使用一个提要，那么您应该只将那个传递给 SimplePie，而不是使用多提要技术。（将来我们可能会引入一个`SimplePie_Feed`单独的类`SimplePie`，允许您单独循环每个提要，但这还不存在。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T19:05:28.963

这可能会让您[对 Yahoo 管道感兴趣](http://pipes.yahoo.com/pipes/)

> Pipes 是一个强大的组合工具，用于聚合、操作和混搭来自网络的内容。

# java - Google App Engine 中的配额控制

> ID：10535681
> 
> 赞同：3
> 
> 时间：2012-05-10T14:03:49.697
> 
> 标签：java, google-app-engine, quota

如何在 Google App Engine (Java) 中以编程方式获取配额统计信息？有什么办法吗？

我希望能够获得配额统计信息，以便我的应用可以在配额过高时向我发送电子邮件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:12:47.450

目前没有 App Engine API 可以以编程方式访问配额信息。

有一个受信任的测试程序正在为即将推出的监控 API 运行，但如该[线程](https://groups.google.com/d/msg/google-appengine/yCXchGOc_fg/0NJDHjQa-uUJ)所示，它目前处于暂停状态。

# c++ - Lisp 宏的特殊用法？

> ID：10535684
> 
> 赞同：3
> 
> 时间：2012-05-10T14:03:55.983
> 
> 标签：c++, macros, lisp

我最近读了黑客和画家的书。作者说 Lisp 宏比其他语言的宏非常强大和特殊。

我开始学习ELisp的宏，但还是没看到它有什么特别的用法？看不出它和 C/C++ 宏之间的区别。

有人可以为我解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T17:52:07.640

我认为最重要的几点是：

*   Lisp 代码表示为列表，使用 Lisp 宏，您可以使用*Lisp 的所有列表处理功能*（这是 Lisp 非常适合的功能，请记住 LISP 代表*LISt Processing*）来转换它。（同音性）但是，C/C++ 预处理器宏只是文本替换。也就是说，要执行更复杂的转换，您必须自己将输入解析为 C/C++ 预处理器宏（并且您通常无法访问这些语言的解析器）。你*不能*使用所有 C/C++ 或任何手头的语言来转换您的代码。这些简单的宏工具似乎更适合小缩写（或绕过类型系统、性能变通方法等），而不是真正的抽象。（并不是说不能将它们用于更复杂的任务，但它很快就会变得一团糟。）

*   Lisp 语法也比通常的花括号语言更规则。您不必担心优先规则、中缀运算符或语句和表达式之间的区别。

*   与 Lisp 宏相比，据我所知，使用 C/C++ 预处理器宏，您不能轻易地在宏定义中使用宏而不跳过箍，因为预处理器只通过一次。

*   没有简单的方法（据我所知）在 C/C++ 风格的预处理器宏中引入新符号。（您可以在 CL 风格的宏中使用`gensym`和围绕它构建的抽象`with-gensyms`等，还有卫生的宏系统，主要用于 Scheme 方言。）

*   Lisp 中的反引号表达式是一种非常方便的填空方法，用于构建宏扩展的代码。

总而言之，使用 Lisp 宏进行元编程比使用 C/C++ 预处理器的方法方便得多。在实践中，这意味着即使是 Lisp 的新手也可以轻松地创建自己的循环结构或其他控制结构。有了更多的经验，编写更复杂的 DSL 也变得相对容易。将此与 C/C++ 预处理器进行比较，在这些预处理器中，这些任务可能被认为是某种黑魔法，只为最勇敢的人保留。

举个简单的例子，试着用 C/C++ 预处理器写这样的东西：

```
(defmacro bif ((var expression) then &optional else)
  `(let ((,var ,expression))
     (if ,var ,then ,else))) 
```

它引入了一个新的控制结构`bif`（“绑定 if”），它评估一个表达式，将它绑定到给定的符号，然后有条件地执行`then`or`else`分支与范围内的绑定。它可以正确嵌套并按预期工作。现在，任何一个称职的 Lisp 程序员都可以立即写出这样的东西。由于它非常简单，当 Lisp 程序员感到需要一个新的结构时，他们通常会毫不犹豫——语言设计者和语言用户之间的界限是模糊的。

（即使有人设法使用 C/C++ 预处理器编写此代码，下一步，即编写类似 Lisp 的东西`cond`，或新的循环结构，也会很快变得复杂得多。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T14:39:04.583

Lisp 宏允许您在比 C++ 宏更深的层次上修改语言。Lisp 宏是在编译阶段执行的代码片段，它们可以控制对其参数的评估。

例如，Lisp 基于编译器必须处理的大约 25 种“特殊形式”。Lisp 的其余部分可以在这些特殊形式之上迭代存在。我对 ELisp 不太熟悉，但 Common Lisp`loop`功能是通过宏实现的。您可以扩展语言——通常 Lisp 只有一种特殊的条件形式，而所有其他形式的条件都是在 Lisp 中实现的。`defun`，这是用于定义函数的结构，我相信可以实现为宏。

C++ 宏虽然功能强大，但由预处理器执行，这意味着它们的功能有限。Lisp 宏，因为它们是在编译环境中执行的，所以可以执行函数来决定如何重写它们的输入，包括程序员定义的函数。

这个回复相当复杂和模糊，所以希望有更多时间的人能够提供更好的回复。我和帕斯卡一样道歉，因为这个答案冗长而含糊。

# c# - WPF让控件与线碰撞

> ID：10535686
> 
> 赞同：0
> 
> 时间：2012-05-10T14:04:12.830
> 
> 标签：c#, wpf, wpf-controls

我有一个看起来像[这样](http://s14.directupload.net/images/120510/qg3qqdar.jpg)的 LED 面板。这是使用包含具有列和行的网格的画布对象构建的。该矩阵的每个字段都包含一个 LED 控件，其中包含一个椭圆。

现在我想在画布上画一条线。我想我可以做到这一点，但我怎样才能获得该线上的所有 LED 控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:16:16.853

如果您绘制了[System.Windows.Shapes.Line](http://msdn.microsoft.com/en-us/library/system.windows.shapes.line)，则可以通过[RenderedGeometry](http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.renderedgeometry)属性获取线条的[几何图形](http://msdn.microsoft.com/en-us/library/system.windows.media.geometry)，并将该几何图形用作几何[命中测试](http://msdn.microsoft.com/en-us/library/ms752097.aspx)的输入。

这样的命中测试将通过使用[GeometryHitTestParameters](http://msdn.microsoft.com/en-us/library/system.windows.media.geometryhittestparameters.aspx)参数调用[VisualTreeHelper.HitTest来完成。](http://msdn.microsoft.com/en-us/library/ms608753.aspx)HitTest 将为线的几何图形覆盖的每个椭圆调用您的[HitTestResultCallback 。](http://msdn.microsoft.com/en-us/library/system.windows.media.hittestresultcallback.aspx)

我不完全确定几何命中测试是否适用于“空”几何，例如宽度为零的线。但是您可以尝试一下，以防它不起作用，例如使用倾斜的矩形几何而不是直线。[或者，您可以通过使用Geometry.GetWidenedPathGeometry](http://msdn.microsoft.com/en-us/library/ms615692)创建“加宽”几何体来模拟具有一定厚度的 Pen 的使用。

# python - 使用 NumPy 数组数据编写原始二进制文件

> ID：10535687
> 
> 赞同：36
> 
> 时间：2012-05-10T14:04:18.700
> 
> 标签：python, numpy, binary

我想将 numpy 浮点数组的内容作为有符号 16 位整数保存到原始二进制文件中。我尝试使用[ndarray.tofile](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.tofile.html)来完成此操作，但我无法找出正确的格式字符串。似乎文件以双重格式保存，无论我如何选择格式字符串。我该怎么做呢？谢谢。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-05-10T14:21:16.743

我认为最简单的方法是首先将数组转换为int16，

```
array.astype('int16').tofile(filename) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-10T17:18:45.423

看一下 struct 模块，试试这个例子：

```
import struct
import numpy

f=open("myfile","wb")
mydata=numpy.random.random(10)
print(mydata)
myfmt='f'*len(mydata)
#  You can use 'd' for double and < or > to force endinness
bin=struct.pack(myfmt,*mydata)
print(bin)
f.write(bin)
f.close() 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2018-01-16T13:15:54.083

您可以使用 scipy.io.savemat，它允许将名称和数组的字典保存到 Matlab 样式的文件中：

```
import scipy.io as sio
sio.savemat(filename, pydict) 
```

这里的 pydict 可能是 = {'name1':np.array1, 'name2':np.array2,...}

要加载您只需要的字典：

```
pydict = sio.loadmat(filename) 
```

# eclipse - 使用 Egit 在 Eclipse 中更改作者和提交者详细信息（姓名和电子邮件地址）

> ID：10535690
> 
> 赞同：1
> 
> 时间：2012-05-10T14:04:24.827
> 
> 标签：eclipse, github, egit

使用 Eclipse Indigo 通过 Egit 提交时，如何永久更改作者和提交者名称？

我做了一点谷歌搜索，但找不到作者和提交者名称的来源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T19:08:55.730

它存储在您用户的 git 配置`.gitconfig`中（您的主目录中的一个文件）。

在 EGit 中，如果您尚未设置此项，则在您第一次提交时会显示一个对话框。但是您可以随时在首选项中更改它，请参见此处：

[http://wiki.eclipse.org/EGit/User_Guide#Identifying_yourself](http://wiki.eclipse.org/EGit/User_Guide#Identifying_yourself)

配置与控制台 Git (C Git) 共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-19T08:22:47.800

**对于 Windows 用户：**

该`.gitconfig`文件（或将）存储在您的目录中，在您的`HOME`目录中搜索`environment`，`start menu`您可以对其进行配置。

一个问题是我们不能创建这样一个以 开头的文件`.`，如果它不存在的话。在这种情况下，由于我们必须已经安装`git`并且我们有一个名为 的程序`git bash`，`start menu`我们可以使用`git bash`. 默认情况下，共享系统环境变量之间定义`git bash`的相同目录。`HOME`

所以，我们可以`vi ~/.gitconfig`在`git bash`命令行中，添加这样的代码：

```
; user identity
[user]
        name = "Junio C Hamano"
        email = "junkio@twinsun.com" 
```

有关详细信息，请参阅[此 git 文档](http://schacon.github.io/git/git.html)。

现在重新启动eclipse，配置将起作用。

# jquery - 如何从祖先中获得 JQuery 的下一步

> ID：10535694
> 
> 赞同：0
> 
> 时间：2012-05-10T14:04:35.877
> 
> 标签：jquery, next

我想要当前'a'的下一个'a'元素。当电流为 2,3,4 时，我用 $('a.current').nextAll('a') 捕获 3,4,5 但是当电流为 5 时，我无法捕获下一个 'a'。如果有人有解决方案...

```
<div id="slides">
    <ul>
     <li>
        <a href="" class='current'>2</a>
        <a href="" >3</a>
        <a href="" >4</a>
        <a href="" >5</a>
     </li>
      <li>
        <a href="" >6</a>
        <a href="" >7</a>
        <a href="" >8</a>
        <a href="" >9</a>
     </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:12:09.633

```
var next = $(this).index() < $(this).parent().children('a').length-1 ? 
           $(this).next() : 
           $(this).parent().next('li').children('a:first'); 
```

[小提琴](http://jsfiddle.net/adeneo/JFgng/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:10:27.903

尝试这个：

```
var $curr = $('a.current'),
    $next = $curr.next('a');

$next.length || ($next = $curr.parent().next().find('a:first')); 
```

此外，您当前正在使用`nextAll`，这将返回以下所有`a`元素，当听起来您只想要第一个 following 时`a`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:10:03.643

```
var curr = $('a.current'),            // get the current
    a = curr.closest('ul').find('a'), // get all the "a" elements
    idx = a.index(curr),              // get the index of the current among all
    nextall = a.slice(idx + 1);       // slice those greater than the current 
```

***现场演示：http:*** [//jsfiddle.net/eaXdc/](http://jsfiddle.net/eaXdc/)

* * *

如果您只想要下一个，请更改：

```
a.slice(idx + 1); 
```

对此：

```
a.eq(idx + 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T14:11:05.500

因为`.nextAll()`只返回匹配元素的兄弟姐妹

6,7,8,9 不是 5 的兄弟，因为它们属于不同的`parent(li)`

你需要那些你必须使用 jQuery 遍历 DOM 来获取这些元素的`a`元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T14:15:27.907

如果你能够知道你在最后（没有结果），那么你应该能够跳到下一个`li`并抓住所有后续的锚元素。

[这就是我的处理方式](http://jsfiddle.net/aYKHy/1/)。我给了第五个锚元素一个 id 来表明它是我的`current`. 当您的`current`目标没有`.nextAll()`子元素（a `.size()`of 0）时，您可以执行以下操作以查找后续锚元素。

```
$("#5").parent().next("li").find("a").css("color","grey");​ 
```

颜色变化是为了帮助指示找到了哪些元素。看起来你有很多选择！

**更新**：如果你只想要第一个，你可以用`:first`这个[更新](http://jsfiddle.net/aYKHy/2/)这样的名称来捕获它。

```
$("#5").parent().next("li").find("a:first") 
```

# c# - 为什么创建非故事板动画不流畅

> ID：10535696
> 
> 赞同：0
> 
> 时间：2012-05-10T14:04:37.480
> 
> 标签：c#, wpf, animation, storyboard

我需要创建一个动画，当用户滚动时，一个按钮会在滚动方向上向右或向左设置动画。我需要对这个动画有很多控制，因为用户可以在动画发生的同时滚动。因此，我决定不使用故事板来创建自己的动画。这是我为创建动画所做的：

**物品等级**

```
class Item : INotifyPropertyChanged
{
    Thickness _M;
    public Thickness M
    {
        get
        {
            return _M;
        }
        set
        {
            _M = value;
            OnPropertyChanged("M");
        }
    }

    // properties needed to animate the control
    public double MarginLeft
    {
        get
        {
            return _M.Left;
        }
        set
        {
            _M.Left = value;
            OnPropertyChanged("M");
        }
    }

    // implement INotifyPropertyChanged interface
    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    // the control that we will be animating
    public Button Btn { get; set; }

    //Constructor that takes care of initializing the button and then setting
    // a binding so that we could update the button's position on separate threads
    public Item()
    {
        Binding b = new Binding("M")
        {
            Source = this
        };

        Btn = new Button()
        {
            HorizontalAlignment = HorizontalAlignment.Left,
            VerticalAlignment = VerticalAlignment.Top,
            Width = 100,
            Height = 30           
        };

        Btn.SetBinding(Button.MarginProperty, b);

    }

    double x = 0;
    volatile int threadCounter = 0;
    object _rightLock = new object();

    // method to animate the button
    public void MoveHorizontaly(double speed)
    {
        x += speed;
        threadCounter++;

        Task.Factory.StartNew(() =>
        {
            lock (_rightLock)
            {
                while (Math.Abs(x) > .3)
                {
                    MarginLeft += x;
                    x *= .97;
                    Thread.Sleep(2);
                    if (threadCounter > 1) // if a new animation will take place exit from this one
                        break;
                }

                threadCounter--;
            }
        });
    }

} 
```

主窗口 xaml：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded" PreviewMouseWheel="Window_PreviewMouseWheel">
    <Grid>
        <Grid Height="241" Margin="12,58,12,0" Name="grid1" VerticalAlignment="Top" Background="#FFFF9999"></Grid>
    </Grid>
</Window> 
```

后面的主窗口代码：

```
public partial class MainWindow : Window
{

    Item item1 = new Item();
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        grid1.Children.Add(item1.Btn);
    }

    // event that fires when user scrolls on the main window
    private void Window_PreviewMouseWheel(object sender, MouseWheelEventArgs e)
    {
        item1.MoveHorizontaly(e.Delta/50);
    }

} 
```

**我该如何改进这个动画？还不错，但在故事板上创建的动画更流畅......**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:53:34.553

这似乎有点像制作动画的复杂方式。这样的事情会更好吗？

Xaml

```
 <Window x:Class="WpfApplication1.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:app="clr-namespace:WpfApplication1"
            Title="MainWindow" Height="350" Width="525" PreviewMouseWheel="Window_PreviewMouseWheel">
        <Grid>
            <Grid Height="241" Margin="12,58,12,0" Name="grid1" VerticalAlignment="Top" Background="#FFFF9999">
                <Button Content="Test" Height="20" Width="60">
                    <Button.RenderTransform>
                        <TranslateTransform x:Name="_transform" />
                    </Button.RenderTransform>
                </Button>
            </Grid>
        </Grid>
    </Window> 
```

后面的代码

```
public partial class MainWindow : Window
{
    DoubleAnimation _animation;

    public MainWindow()
    {
        InitializeComponent();
        _animation = new DoubleAnimation();
        _animation.Duration = new Duration(TimeSpan.FromMilliseconds(150));
        _animation.FillBehavior = FillBehavior.HoldEnd;
    }

    private void Window_PreviewMouseWheel(object sender, MouseWheelEventArgs e)
    {
        double x = _transform.X;
        _transform.BeginAnimation(TranslateTransform.XProperty, null);
        _transform.SetValue(TranslateTransform.XProperty, x);

        _animation.To = _transform.X + (e.Delta / 2);
        _transform.BeginAnimation(TranslateTransform.XProperty, _animation);
    }
} 
```

# sql - 一次性或增量收缩数据库文件？

> ID：10535697
> 
> 赞同：1
> 
> 时间：2012-05-10T14:04:39.137
> 
> 标签：sql, sql-server-2008, shrink

我必须缩小大约的数据库。1TB 降至 700GB 左右（在不扩展的情况下留下 200+ Gb 用于增长）。我有一个脚本，它将按设定的增量（例如 1GB）循环和缩小数据库。这在您必须随时中止的情况下非常有用，因为进度不会丢失，总收缩操作可能会运行 4-5 天。问题是，以增量方式缩小数据库文件与一次性（执行一个 dbcc 缩小文件）相比是否会导致更多碎片？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:18:07.087

（这是基于 MS SQL Server。您的里程可能会因其他 RDBMS 而异。）

如果所有其他条件都相同，我怀疑您不会因错误地分割您的缩小过程而导致更大的碎片化。当文件被收缩时，SQL 可能不得不在内部移动数据，从将被删除的页面到不会被删除的空页面。如果块 A、B 和 C 被移动到 X、Y 和 Z，然后从数据库文件中删除，那么分三步执行会产生与分三步执行一样多的碎片。

我看到的问题是，如果您首先“缩小”块 A，然后在开始处理块 B 之前，加载了更多数据，导致数据库将数据存储在块 D 中——该部分之前是空的，以最终收缩为目标？更糟糕的是，如果添加新数据需要重新创建块 A，那么您将不得不再次缩小块 A 怎么办？

这是描述我只知道外观的东西的高级尝试。我怀疑多次收缩可能会产生更多的碎片，如果只是因为收缩会话之间的数据库添加。你拥有的会话越少，你可能就越好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:54:22.020

请参阅下面的链接以获取有关“为什么不应该缩小数据库或不按缩小按钮”的更多详细信息

[http://www.sqlskills.com/BLOGS/PAUL/post/Why-you-should-not-shrink-your-data-files.aspx](http://www.sqlskills.com/BLOGS/PAUL/post/Why-you-should-not-shrink-your-data-files.aspx) http://sqlinthewild.co.za/index.php/2007/09 /08/收缩数据库/

HTH, \K

# sql - 游标的 while 循环内的 While 循环 - SQL

> ID：10535698
> 
> 赞同：0
> 
> 时间：2012-05-10T14:04:39.917
> 
> 标签：sql

```
declare @i int
declare @skool float

declare schoolCursor cursor for  
select distinct choice from tempstuas

open schoolCursor
fetch next from schoolCursor into @skool
while @@fetch_status = 0
begin
        while @i < 20
            begin
                update top(1) tempstuas set cnt=@i where cnt = '' and cat = 1 and choice=@skool
                update top(1) tempstuas set cnt=@i where cnt = '' and cat = 2 and choice=@skool
                update top(1) tempstuas set cnt=@i where cnt = '' and cat=3 and choice=@skool

                set @i = @i + 1
            end
        fetch next from schoolCursor 
end
close schoolCursor
deallocate schoolCursor 
```

这基本上是通过一个返回单个位置编号的游标。位置编号存储为来自游标的变量，我需要在循环特定次数 (20) 的 while 循环中使用该变量。我返回的只是整个位置编号列表的光标，但不会使用更新语句遍历 while 循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:09:57.640

游标和 while 循环通常是解决问题的错误方法，我现在没有时间弄清楚你在做什么来建议基于集合的解决方案，但严肃地说，你需要开始思考集合并停止思考循环.

但是您的问题是@i 为null，null 不是<20。

看看我的理论的这个测试

```
declare @i int

if @i<20 print'hi'
else print 'bye' 
```

# iphone - 如何测试应用程序崩溃的位置？

> ID：10535699
> 
> 赞同：1
> 
> 时间：2012-05-10T14:04:41.177
> 
> 标签：iphone, objective-c, ios, xcode

我的应用程序有时会在导航栏和控制台日志中崩溃，除此之外没有错误->

`(lldb)`

如何检查错误在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T14:09:01.833

在 Xcode 中，转到 Product > Edit Scheme > Diagnostics > Enable Zombie Object

现在运行应用程序并检查控制台。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T14:15:24.233

请参阅[我在此处发布的最新答案](https://stackoverflow.com/a/10501532/49658)：

当调试器停止时，转到“Debug Navigator”并确保底部的滑块一直向右。

从抛出异常的地方向下扫视，你最终应该会看到自己的代码。单击适当的方法/函数名称，代码将在编辑器中打开。

![在此处输入图像描述](../Images/d23760b20801fe753cbcda153ab6af58.png)

![在此处输入图像描述](../Images/7dc2d524ebe306327f0f73cb67375084.png)

如果您在堆栈跟踪中没有看到您自己的任何方法，则异常可能已通过`performSelector`-style 调用传递，在这种情况下堆栈跟踪已消失。如果是这种情况，您可以通过添加“On Throw”异常断点来获得更好的信息。首先切换到“断点导航器”：

![在此处输入图像描述](../Images/bdc9d0d57c6f0a6a048c05bb57000046.png)

然后点击加号并选择“添加异常断点...”

![在此处输入图像描述](../Images/4ceeb2ae019d79965db4d3cbe30809b1.png)

创建一个“On Throw”断点：

![在此处输入图像描述](../Images/db109044a0079d2002ef2b0d1cab7135.png)

这将在引发异常的确切点停止调试器，并且您可以获得更好的堆栈跟踪。始终启用这样的异常断点是个好主意。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T14:08:47.997

尝试启用僵尸对象

产品>编辑方案>启用僵尸

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T14:09:22.857

在 lldb 提示符下键入 bt ，它将为您提供一个堆栈跟踪，告诉您应用程序崩溃的位置。

# c - C 程序的奇怪行为

> ID：10535702
> 
> 赞同：1
> 
> 时间：2012-05-10T14:04:44.910
> 
> 标签：c

以下是我的 C 代码。

```
#include<stdio.h>
#include<stdlib.h>

int main()
{
    int ch;

    do
    {
        printf("\n1.create\n2.display\n3.exit\n\t");
        printf("Enter your choice:: ");
        scanf("%d",&ch);
        printf("choice = %d\n\n", ch);
        if(ch==32767)
            return 0;
        switch(ch)
        {
            case 1:
                printf("\n Case 1 executed\n");
                break;
            case 2:
                printf("\nCase 2 executed\n");
                break;
            case 3:
                printf("\nExit\n");
                exit(0);
                break;
            default:
                printf("Wrong choice!!!");
                break;

        }
    }while(ch!=3);
    return 0;
} 
```

问题是当我为 ch 输入整数值时，它工作正常。但是当我输入任何字符时，它正在无限循环中运行。

任何人都可以解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:08:43.187

如果您希望能够处理字符，则应该使用`char`value 而不是 an 。`int`

在这种情况下，您还必须修改您的`switch-case`语句，因为`'1'`- 一个字符，不同于`1`- 一个整数。更正后的代码应该是这样的：

```
#include <limits.h>

int main()
{
    char ch;

    do
    {
        printf("\n1.create\n2.display\n3.exit\n\t");
        printf("Enter your choice:: ");
        scanf("%c",&ch);
        printf("choice = %c\n\n", ch);
        switch(ch)
        {
            case '1':
                printf("\n Case 1 executed\n");
                break;
            case '2':
                printf("\nCase 2 executed\n");
                break;
            // case 32767: - can not be stored in a char variable
            case 127:
            case CHAR_MAX: // these two are almost equivalent, but the
                           // second one is better because it relies on
                           // library defined constant from limits.h
            case '3':
                printf("\nExit\n");
                exit(0);
                break;
            case 'a':
                printf("\nA character case accepted!\n");
                break;
            default:
                printf("Wrong choice!!!");
                break;

        }
    }while();
    return 0;
} 
```

请注意，我还从`while()`参数中排除了中断条件，因为它是多余的——它已经在`switch`语句中进行了检查。

我还添加了一个解析字符的非错误案例，以便您可以看到一个例子。

另一个注意事项：您的旧代码应该同时接受`01`和`1`作为有效选择，而新代码将解析`01`为两个不同的选择（1 个选择 == 1 个字符）：

*   `0`将被解析为错误的选择
*   `1`将被解析为案例 1 的正确选择

我还在更正的代码片段中的代码注释中对您的代码中的其他一些内容进行了评论。我取出了“不可能的” if（正如 Jerry Coffin 在评论中指出的那样），并将其放在更合适的位置，将常量替换为有意义的东西。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-10T18:31:26.267

利用`scanf ("%*[^\n]\n");`

在这里，您使用了**scanf("%d",&ch);** 它将正确读取整数值，但是一旦您给出除整数以外的任何值，它将终止或显示不同的输出。 `Why this is happening ?` @这是发生的，因为每次您输入一些有效或无效的值时，它都会在从那里读取的值之后放置在输入缓冲区读取器中。

有关 scanf 的更多信息：[http ://en.wikipedia.org/wiki/Scanf_format_string](http://en.wikipedia.org/wiki/Scanf_format_string)

```
#include<stdio.h>
#include<stdlib.h>

int main()
{
    int ch;

    do
    {
        printf("\n1.create\n2.display\n3.exit\n\t");
        printf("Enter your choice:: ");

        scanf ("%*[^\n]\n");
        scanf("%d",&ch);
        switch(ch)
        {
            case 1:
                printf("\n Case 1 executed\n");
                break;
            case 2:
                printf("\nCase 2 executed\n");
                break;
            case 3:
                printf("\nExit\n");
                exit(0);
                break;
            default:
                printf("Wrong choice!!!");
                break;

        }
    }while(ch!=3);
    return 0;
} 
```

# tsql - T-SQL：选择一列中的值等于、大于或小于的行——但只有其中一个

> ID：10535703
> 
> 赞同：2
> 
> 时间：2012-05-10T14:04:49.467
> 
> 标签：tsql, max, min

我有一个名为 TableA 的表，在 ColA 列中有以下数据

```
ColA
100
60
50
30
10 
```

我有一个名为@colA 的参数

我只想选择一行。条件是，如果 ColA 的值与 @colA 匹配，则返回该行。如果未找到匹配项，则查找 ColA 和 @colA 之间的差异最小的行。

例如，如果 @colA = 50，则返回 50 的行。如果@colA = 58，则返回 60 的行。如果 @colA = 33，则返回 30 的行。如果@colA = 200，则返回 100 的行。这可以仅在 Select 语句中使用 Where 子句和/或一些 Min/Max 语句来完成，还是使用 IF 语句测试每个条件来完成更好？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:34:19.857

尝试这个：

```
DECLARE @ColA INT
SELECT @ColA = 55

SELECT TOP 1 @ColA + TA.CA FROM
(
SELECT MIN(ColA) - @ColA AS CA FROM TableA WHERE ColA > @ColA
UNION ALL
SELECT MAX(ColA) - @ColA AS CA FROM TableA WHERE ColA < @ColA
) AS TA
ORDER BY ABS(TA.CA) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:27:55.553

这将在 MS SQL Server 2008 中实现。其他 RDBMS 需要进行调整。

```
CREATE TABLE #Test (Data int not null)
INSERT #Test values (10), (30), (50),(60),(100)

DECLARE @Target int = 40

SELECT Data 
 from (select
          Data
         ,row_number() over (order by abs(@Target - Data), sign(@Target - Data) desc) Ranking
        from #Test) xx
 where Ranking = 1 
```

rigamarole with`sign`导致关系被解决为正数（即 40 将返回 50，而不是 30）。

# c# - 数据库驱动分发

> ID：10535705
> 
> 赞同：1
> 
> 时间：2012-05-10T14:04:52.847
> 
> 标签：c#, database, database-connection

尽管我开发了许多处理多个数据库平台的实用软件，但我对数据库连接的基础知识仍然知之甚少。

我目前正在开发一个 WPF 应用程序。我的目标是让最终用户能够连接到任何数据库（尤其是大型平台，如 Oracle、DB2、SQL Server 以及流行的平台，如 PostgreSQL、MySQL、SQlite 等），即使用户未在其系统上安装相关驱动程序。

我不知道该怎么做。我应该将所有驱动程序与我的应用程序一起分发吗？有没有一刀切的解决方案？例如，我可以分发 Oracle 驱动程序，而无需用户在他的系统中安装 Oracle 客户端吗？我想知道最好的方法是什么。任何参考将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:15:05.607

假设您使用 ADO.NET 进行数据库连接

*   您应该针对 DbXXX 类集（DbConnection、DbCommand 等）进行编程，以保持与数据库无关
*   您应该使用标准[提供程序工厂机制](http://msdn.microsoft.com/en-us/library/system.data.common.dbproviderfactories.getfactoryclasses%28v=vs.90%29)来获取已安装提供程序的列表并生成所需的 DbXXX 实例。

如果不安装相应的驱动程序，您将无法连接到数据库！您无需分发驱动程序；这是您的应用程序的每个用户都可以根据他想要连接的数据库执行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:19:08.600

这听起来像是可以通过精心设计的安装程序来解决的问题。您可以将希望与应用程序一起分发的数据库驱动程序的安装包捆绑到应用程序的 MSI 文件中，并包含一个自定义安装例程，允许用户选择他想与之交互的数据库引擎。有了这些信息，您的安装程序就可以执行适当的驱动程序安装例程了。

# c# - 为多种类型的任务设计/抽象代理

> ID：10535710
> 
> 赞同：1
> 
> 时间：2012-05-10T14:05:02.877
> 
> 标签：c#, .net, interface, abstraction, broker

我的应用程序处理 a`Task`是抽象基类的各种任务。

任务在持续的基础上被编程到系统中，任务的性质可能会有所不同。

一些任务示例：

*   使用互操作打开单词并插入一些文本。
*   使用 MS DAO 创建一个新的 Access 数据库。
*   使用互操作打开数据库。
*   将文件从 Folder1 复制到 Folder2。
*   打开 IE 并导航到 SomeUrl。

每个任务都有一个唯一的标识符并返回一个布尔结果。

我想开发某种代理架构，可用于将此类任务分派给编译时未知的类。

这里的问题是：什么样的架构最适合这种情况？我应该看一些特定的设计模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:12:01.803

命令模式`http://dofactory.com/Patterns/PatternCommand.aspx'可用于抽象出各种任务细节

# html - HTML 将 TD 中的元素彼此相邻对齐

> ID：10535713
> 
> 赞同：0
> 
> 时间：2012-05-10T14:05:14.707
> 
> 标签：html, css

我只是在输入旁边添加了这个滑块，并在滑块之后添加了一个输入框。问题是它们在我的第一个输入之下。我希望它们在 TD 标签中并排放置....请帮助...如果您需要更多代码，请告诉我：

```
 <td>$
    <input name="sup" style="text-align: left;" maxlength="13"

                    value="${form.sup}"

            onkeypress="javascript:return noenter();" />
<div id="calcSlider"></div>
<input type="text" id="calcRepairCostFactor" name="calcRepairCostFactor" value="10" size="3" readonly="readonly"/>            
</td> 
```

jQuery：

```
$(function () {
$("#calcSlider").slider({ min: 0,
                          max: 90,
                          step: 5,
                          value: 10,
                          slide: function (event, ui) {
                              $("#calcRepairCostFactor").val(ui.value);
                          }
                       });
                    }); 
```

回答：

```
 <td>$
    <input name="sup" style="text-align: left;" maxlength="13"

                    value="${form.sup}"

            onkeypress="javascript:return noenter();" />
<div id="calcSlider" style='display: inline-block; width: 100px; height: 12px;'></div>
+/-
<input type="text" id="calcRepairCostFactor" name="calcRepairCostFactor" value="10" size="3" readonly="readonly"/>            
%
</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:09:28.607

没有太多信息......我猜你可能需要添加`style='display: inline-block;'`到`div`你正在寻找的结果。

# java - 在 Android 中加密和解密文件的任何优化方式

> ID：10535714
> 
> 赞同：6
> 
> 时间：2012-05-10T14:05:15.963
> 
> 标签：java, android, file

这是我用于加密和解密过程的当前代码，它的工作方式也应该是这样，除了加密和解密的时间很长。

```
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import javax.crypto.Cipher;
import javax.crypto.CipherInputStream;
import javax.crypto.CipherOutputStream;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.DESKeySpec;

public class EncryptAndDecrypt{

   public static void main(String[] args) {
    try {
        String key = "myencryptedpass123";

        FileInputStream fis = new FileInputStream("File_to_encrypt.mp4");
        FileOutputStream fos = new FileOutputStream("Encrypted_file.mp4");
        encrypt(key, fis, fos);

        FileInputStream fis2 = new FileInputStream("Encrypted_file.mp4");
        FileOutputStream fos2 = new FileOutputStream("File_to_decrypt.mp4");
        decrypt(key, fis2, fos2);
    } catch (Throwable e) {
        e.printStackTrace();
    }
}

public static void encrypt(String key, InputStream is, OutputStream os) throws Throwable {
    encryptOrDecrypt(key, Cipher.ENCRYPT_MODE, is, os);
}

public static void decrypt(String key, InputStream is, OutputStream os) throws Throwable {
    encryptOrDecrypt(key, Cipher.DECRYPT_MODE, is, os);
}

public static void encryptOrDecrypt(String key, int mode, InputStream is, OutputStream os) throws Throwable {

    DESKeySpec dks = new DESKeySpec(key.getBytes());
    SecretKeyFactory skf = SecretKeyFactory.getInstance("DES");
    SecretKey desKey = skf.generateSecret(dks);
    Cipher cipher = Cipher.getInstance("DES"); 

    if (mode == Cipher.ENCRYPT_MODE) {
        cipher.init(Cipher.ENCRYPT_MODE, desKey);
        CipherInputStream cis = new CipherInputStream(is, cipher);
        doCopy(cis, os);
    } else if (mode == Cipher.DECRYPT_MODE) {
        cipher.init(Cipher.DECRYPT_MODE, desKey);
        CipherOutputStream cos = new CipherOutputStream(os, cipher);
        doCopy(is, cos);
    }
}

public static void doCopy(InputStream is, OutputStream os) throws IOException {
    byte[] bytes = new byte[64];
    int numBytes;
    while ((numBytes = is.read(bytes)) != -1) {
        os.write(bytes, 0, numBytes);
    }
    os.flush();
    os.close();
    is.close();
} 
```

}

**现在我希望有一个更好的解决方案......**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T02:59:24.897

绝对使用更大的缓冲区，但加密主要受 CPU 限制，因此不太可能变得更快。此外

*   如果您“不关心安全漏洞”，最好完全放弃加密
*   你正在使用 DES，不要
*   您正在使用人类可读的字符串作为键 - 不要
*   一旦您使用单独的实例进行加密和解密，该代码可能不起作用`Cipher`
*   如果您使用默认值，那么您正在为自己设置麻烦。使用类似的东西`Cipher.getInstance("AES/CBC/PKCS5Padding")`
*   如果你想让它在 Android 上工作，你为什么要在桌面上进行测试？

是的，如果您在应用程序中包含密钥，您的“DRM”就没有多大用处。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-05-02T10:59:33.507

绝对使用更大的缓冲区，但加密主要受 CPU 限制，因此不太可能变得更快。此外

如果您“不关心安全漏洞”，最好完全放弃使用 DES 的加密，您是否使用人类可读的字符串作为密钥 - 不要该代码可能没有如果您使用默认值，则在使用单独的 Cipher 实例进行加密和解密时工作，您正在为自己设置麻烦。使用类似 Cipher.getInstance("AES/CBC/PKCS5Padding")

```
public static void encrypt(File inputFile, File outputFile) throws CryptoException {
        doCrypto(Cipher.ENCRYPT_MODE, inputFile, outputFile);
    }

    public static void decrypt(File inputFile, File outputFile) throws CryptoException {
        doCrypto(Cipher.DECRYPT_MODE, inputFile, outputFile);
    }

    private static void doCrypto(int cipherMode, File inputFile, File outputFile) throws CryptoException {
        try {
            Key secretKey = new SecretKeySpec(key.getBytes(), ALGORITHM);
            Cipher cipher = Cipher.getInstance(TRANSFORMATION);
            cipher.init(cipherMode, secretKey);

            FileInputStream inputStream = new FileInputStream(inputFile);
            byte[] inputBytes = new byte[(int) inputFile.length()];
            inputStream.read(inputBytes);

            byte[] outputBytes = cipher.doFinal(inputBytes);

            FileOutputStream outputStream = new FileOutputStream(outputFile);
            outputStream.write(outputBytes);

            inputStream.close();
            outputStream.close();
        } catch (IOException | NoSuchAlgorithmException | InvalidKeyException | NoSuchPaddingException | BadPaddingException | IllegalBlockSizeException e) {
            e.printStackTrace();
            e.getMessage();
         throw new CryptoException("Error encrypting/decrypting file", e);
        }
    } 
```

# iphone - NSFetchedResultsController 抛出异常

> ID：10535720
> 
> 赞同：0
> 
> 时间：2012-05-10T14:05:27.013
> 
> 标签：iphone, ios, core-data

我正在使用 NSFetchedResultsController 来管理来自 Core Data 的数据，但我不断收到此异常：

```
012-05-10 21:54:32.142 test[939:fb03] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '+entityForName: could not locate an NSManagedObjectModel for entity name 'event'' 
```

这是我的代码

```
- (NSFetchedResultsController *)fetchedResultsController {

    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription
                                   entityForName:@"event" inManagedObjectContext:managedObjectContext];
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc]
                              initWithKey:@"date" ascending:NO];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];

    [fetchRequest setFetchBatchSize:20];

    NSFetchedResultsController *theFetchedResultsController =
    [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                        managedObjectContext:managedObjectContext sectionNameKeyPath:nil
                                                   cacheName:@"Root"];
    self.fetchedResultsController = theFetchedResultsController;
    _fetchedResultsController.delegate = self;

    return _fetchedResultsController;

} 
```

有什么问题？谢谢

以下是我在数据模型和数据类中的内容

![在此处输入图像描述](../Images/1cb20426375ae6b5ccd56e63ba73d5e4.png)

![在此处输入图像描述](../Images/968a36a109ba51e9460942b02121aa1c.png)

可能是我的插入数据代码有问题，所以我也发布了

```
- (IBAction)done:(id)sender
{

    NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
    NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
    NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];

    NSString *name = _nameField.text;
    NSString *amount = _amountField.text;

    [newManagedObject setValue:[NSDate date] forKey:@"date"];
    [newManagedObject setValue:name forKey:@"name"];
    [newManagedObject setValue:amount forKey:@"amount"];
    [newManagedObject setValue:category forKey:@"category"];

    // Save the context.
    NSError *error = nil;
    if (![context save:&error]) {

        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
    [self.delegate addContentViewControllerDidSave:self];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:07:26.720

您尚未在托管对象上下文模型中添加实体事件。如果您已添加，则必须第一次将其删除。意味着在您更改数据模型后，它们不会第一次加载到内存中。你必须删除应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:34:10.967

这可能是因为您更改了数据模型但您没有更改`NSManagedObject`类。对于您更改的实体，这里应该是**Event.h 。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:37:40.347

确保实体被命名为“事件”而不是“事件”。实体应该以大写字母开头，而属性名称应该以小写字母开头。创建的标准实体被命名为“事件”，而不是“事件”。

编辑根据您的屏幕截图，该实体被命名为“事件”，而不是“事件”。此外，您的实体 NSManagedObject 子类应命名为“事件”而不是“项目”。选择实体，然后在主菜单上，单击编辑器->创建 NSManagedObject 子类。这将正确地创建它。

完成所有这些修复后，请确保重置模拟器或从模拟器中删除应用程序，然后再尝试再次运行它。

# sencha-touch-2 - 将外部 URL 加载到选项卡面板中？

> ID：10535721
> 
> 赞同：2
> 
> 时间：2012-05-10T14:05:26.953
> 
> 标签：sencha-touch-2

我有一个简单的应用程序，它将加载我想在单独的选项卡面板中显示的托管网页。最干净的方法是什么？可以在用户单击每个选项卡时加载选项卡，也可以在应用程序启动时立即加载所有选项卡。Sencha Touch 无法简单地将 html: 值设为 URL。我可以为每个标签添加一些页面加载事件吗？

**[更新]**

我在 initialize: 方法中添加了进行 Ajax 调用的建议，使用本地 html 文件进行测试。但是，所有选项卡都显示要完成的第一个 Ajax 结果。

*此代码现在功能齐全。我忘了：this.callParent(arguments);*

我把例子放在[SenchaFiddle](http://www.senchafiddle.com/#sT4bi) 前两个选项卡不会加载，因为 ajax 调用失败，但最后两个 ComponentQuery 的工作。

以下是屏幕外观的一个想法：

![在此处输入图像描述](../Images/f1dc1a5022620bfe9d17bff472598737.png)

![在此处输入图像描述](../Images/ff64e354fbd5c93c6ff9d4263a67efb1.png)

这是基本视图：

```
Ext.define('SenchaFiddle.view.MainView', {
    扩展：'Ext.tab.Panel'，

    配置：{
        tabBarPosition:'底部',
        布局： {
            类型：'卡'，
            动画片： {
                持续时间：300，
                easing: '缓入出',
                类型：'幻灯片'，
                方向：“左”
            }
        },
        全屏：是的，

        项目： [
            {
                标题：“热门故事”，
                iconCls: '信息',
                xtype：'面板'，
                项目： [
                    {
                        标题：“热门故事”，
                        xtype: '工具栏',
                        停靠：'顶部'
                    },
                    {
                        id: '图片标签',
                        html: '正在加载头条新闻网址...'
                    }
                ]
            },
            {
                标题：“娱乐”，
                iconCls: '动作',
                项目： [
                    {
                        标题：“娱乐”，
                        xtype: '工具栏',
                        停靠：'顶部'
                    },
                    {
                        id: '新闻标签',
                        html: '正在加载娱乐网址...'
                    }
                ]
            },
            {
                id: 'tab3',
                标题：“体育”，
                iconCls: '用户'
            },
            {
                id: 'tab4',
                标题：“科学”，
                iconCls: '星'
            }
        ]
    },
    初始化：函数（）{
        console.log("视图初始化");
        Ext.Ajax.request({
            url: 'bar.html', // 你必须有权访问服务器
            方法：'GET'，
            回调：函数（选项，成功，响应）{
                console.log(response.responseText);
                Ext.ComponentQuery.query('#image-tab')[0].setHtml(response.responseText);
            }
        });

        Ext.Ajax.request({
            url: 'foo.html', // 你必须有权访问服务器
            方法：'GET'，
            回调：函数（选项，成功，响应）{
                console.log(response.responseText);
                Ext.ComponentQuery.query('#news-tab')[0].setHtml(response.responseText);
            }
        });
        Ext.ComponentQuery.query('#tab3')[0].setHtml("boom");
        Ext.ComponentQuery.query('#tab4')[0].setHtml("bang");

        this.callParent(参数); // 不要忘记这一点！
    }
});

```

foo.html

```
<p style="color: #00f;">
    富
</p>

```

bar.html

```
<p style="color: #0f0;">
    酒吧
</p>

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:34:10.063

尝试将此添加到您的视图中（未经测试）：

```
Ext.Ajax.request({
    url: 'http://www.urlForTopStories', // you must have access to the server
    method: 'GET',
    callback: function(options, success, response) {
        Ext.ComponentQuery.query('#image-tab')[0].setHtml(response.responseText);
    }
}); 
```

`urlForTopStories`如果您有一个，这将在您的 .htaccess 文件中发送到您的服务器：

```
Header set Access-Control-Allow-Origin *
Header set Access-Control-Allow-Headers x-requested-with 
```

如果您不在 Apache 上，请查看此[CORS](http://enable-cors.org/)资源以获取更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:21:56.667

除非您要加载**大量**数据，例如很多`images`，`video's`等等`audio's`，否则我*看不出*这两种方法之间有任何区别，即在用户单击这些选项卡时加载或在应用程序启动时立即加载。

检查您在这些选项卡中加载的数据并相应地工作。

如果要在应用程序启动时加载数据，请使用该`initialize()`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T14:00:40.797

更简单：

正常添加按钮，因为它将是一个选项卡......然后，在 tabpanel 配置元素中，添加：

```
listeners: {
    activeitemchange: function(source, value, oldValue, eOpts) {
        if(value.id == 'chiama') {
                            // do actions...
            // for example open a link: 
                            // document.location = 'www.google.it';

            source.setActiveItem(oldValue); //avoid tab switching
            return false; // avoid tab switching
        }
    }
} 
```

# php - mod_rewrite 重定向到错误的目录

> ID：10535736
> 
> 赞同：0
> 
> 时间：2012-05-10T14:06:09.073
> 
> 标签：php, apache, mod-rewrite

我有一个简单的重定向：

```
RewriteEngine On
RewriteBase /
RewriteRule ^test.php$ index.php 
```

在我的 htaccess 文件中：root_dir/my_site/my_section/test.php

问题是它重定向到 root_dir/index.php 而不是 root_dir/my_site/my_section/index.php

我如何重定向到同一个文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:08:09.197

将您的 RewriteBase 更改为

```
RewriteBase /my_site_/my_section 
```

# sql - 根据用户身份验证向 var 声明一个值

> ID：10535738
> 
> 赞同：0
> 
> 时间：2012-05-10T14:06:11.587
> 
> 标签：sql, security, authentication, parameters

我不太确定如何问这个问题，但是......我试图弄清楚如何根据用户名和密码为变量声明一个值。例如：我有一个包含安全级别的用户信息的 sql 数据库。现在，当用户登录网站时，服务器会进行正常的输入和输出，但是我只希望某些具有某些安全级别的用户访问某些页面。

所以我需要将该安全级别声明为一个变量，以便在加载安全页面时首先检查是否允许用户访问该页面......

（我知道我们可以通过使用角色和权限来做到这一点，但更喜欢通过代码来做到这一点）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:13:29.103

查看角色和授权（不同于身份验证）

# jsf - Primefaces p:captcha --> 如果给定的输入是错误的/空的，我有一个 malformedXML 错误

> ID：10535741
> 
> 赞同：1
> 
> 时间：2012-05-10T14:06:19.137
> 
> 标签：jsf, primefaces, captcha

我使用 jQuery（一个语法高亮脚本库）编写了一个 jsf2 (cdi) Web 应用程序。在一页上，我使用的是 primefaces 3.2 p:captcha 组件。

这是使用验证码组件的片段。

> ```
>  <p>
>                 <p:captcha
>                     id="commentCaptcha"
>                     theme="white"
>                     required="true"
>                     requiredMessage="Bitte geben Sie die angezeigten Zeichen im Captcha Dialog ein."                        
>                     validatorMessage="Die Captcha Prüfung ist fehlgeschlagen. Bitte versuchen Sie es erneut."
>                     secure="true"
>                     language="de"/>
>             </p>  
>             <p>
>                 <h:commandButton
>                     action="#{commentCreatorBean.createCommentForArticle(newComment, article)}" 
>                     value="Eintragen">
>                     <f:ajax 
>                         execute="commentCaptcha name mail comment" 
>                         render=":commentsGroup @form :commentMessages"/>                        
>                 </h:commandButton>
>                 <div id="hint">...</div>
>             </p> 
> ```

*   如果验证码对话框中的给定输入是正确的，那么一切正常，在这种情况下，注释会被保留。
*   给定的输入是否为空，而不是在 h:messages 区域中显示 requiredMessage 并且弹出显示错误消息（请参阅下面的错误消息）
*   给定的输入是否错误，validatorMessage 显示在 h:messages 区域中，并且弹出显示错误消息（请参阅下面的错误消息）

如果使用 chromium 浏览器，我收到错误消息：**malformedXML: NETWORK_ERR: XMLHttpRequest Exception 101** 如果使用 firefox 浏览器，我收到：**malformedXML: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE)**

有谁知道，问题是什么？我在 google 的 recaptcha 页面上注册了我的域。公钥和私钥在 web.xml 中设置（遵循 primefaces 文档的说明）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:21:58.843

您似乎正在尝试通过 AJAX 提交 Primefaces 验证码。

这行不通。

Primefaces Captcha 是 Recaptcha 插件的扩展，目前不支持 AJAX 功能。

# java - Eclipse 4 (Juno) 的无限测试

> ID：10535742
> 
> 赞同：4
> 
> 时间：2012-05-10T14:06:29.590
> 
> 标签：java, eclipse, infinitest

全部，

我一直在尝试使用 Eclipse 4.2 (Juno) 配置 Infinitest (http://infinitest.github.com/)。它似乎安装正确，但是我无法显示状态栏并显示有关我运行的测试的信息。有任何想法吗？

提前致谢。

# pointers - Go中的临时地址？

> ID：10535743
> 
> 赞同：48
> 
> 时间：2012-05-10T14:06:33.037
> 
> 标签：pointers, return, go, temporary, rvalue

处理这种情况的最干净的方法是什么：

```
func a() string {
    /* doesn't matter */
}

b *string = &a() 
```

这会产生错误：

> 不能取 a() 的地址

我的理解是，如果获取地址，Go 会自动将局部变量提升到堆中。这里很清楚，要取返回值的地址。处理这个问题的惯用方法是什么？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-10T14:23:52.217

地址运算符返回指向具有“家”的东西的指针，例如变量。您的代码中表达式的值是“无家可归”。如果你真的需要一个 *string，你必须分两步完成：

```
tmp := a(); b := &tmp 
```

请注意，虽然 *string 有完全有效的用例，但很多时候使用它们是错误的。在 Go`string`中是一种值类型，但传递起来很便宜（指针和 int）。字符串的*值*是不可变的，改变`*string`“家”指向的变化，而不是字符串值，所以在大多数情况下`*string`根本不需要。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-10T22:48:48.203

[请参阅Go 语言规范](http://golang.org/ref/spec#Address_operators)的相关部分。`&`只能用于：

1.  可寻址的东西：变量、指针间接寻址、切片索引操作、可寻址结构的字段选择器、可寻址数组的数组索引操作；或者
2.  复合文字

你所拥有的都不是那些，所以它不起作用。

即使你能做到，我什至不确定这意味着什么。获取函数调用结果的地址？通常，您将某事物的指针传递给某人，因为您希望他们能够分配给指向的事物，并查看原始变量的变化。但是函数调用的结果是暂时的；除非您先将其分配给某物，否则没有其他人“看到”它。

如果创建指针的目的是创建具有动态生命周期的东西，类似于`new()`或获取复合文字的地址，那么您可以将函数调用的结果分配给变量并获取该变量的地址。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-11T11:18:57.940

最后，您建议 Go 应该允许您获取任何表达式的地址，例如：

```
i,j := 1,2
var p *int = &(i+j)
println(*p) 
```

当前的 Go 编译器打印错误：`cannot take the address of i + j`

在我看来，允许程序员获取任何表达式的地址：

*   似乎不是很有用（即：在实际 Go 程序中出现的概率似乎很小）。
*   这会使编译器和语言规范复杂化。

使编译器和规范复杂化而收效甚微似乎适得其反。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T12:25:21.190

我最近因类似的事情而陷入困境。

首先在您的示例中谈论字符串会分散注意力，请改用结构，将其重写为：

```
func a() MyStruct {
    /* doesn't matter */
}

var b *MyStruct = &a() 
```

这不会编译，因为您不能获取 a() 的地址。所以这样做：

```
func a() MyStruct {
    /* doesn't matter */
}

tmpA := a()
var b *MyStruct = &tmpA 
```

这将编译，但是您在堆栈上返回了一个 MyStruct，在堆上分配了足够的空间来存储一个 MyStruct，然后将内容从堆栈复制到堆。如果你想避免这种情况，那么这样写：

```
func a2() *MyStruct {
  /* doesn't matter as long as MyStruct is created on the heap (e.g. use 'new') */
}

var a *MyStruct = a2() 
```

复制通常很便宜，但这些结构可能很大。更糟糕的是，当您想修改结构并将其“粘贴”时，您不能复制然后修改副本。

无论如何，当您使用返回类型的 interface{} 时，它会变得更加有趣。interface{} 可以是结构体或指向结构体的指针。出现同样的复制问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-05T10:45:21.007

分配给新变量时，您无法直接获取结果的引用，但是您可以通过简单地预先声明“b”指针来使用惯用的方法来执行此操作，而无需使用临时变量（这是无用的） - 这是您错过的真正步骤：

```
func a() string {
    return "doesn't matter"
}

b := new(string) // b is a pointer to a blank string (the "zeroed" value)
*b = a()         // b is now a pointer to the result of `a()` 
```

`*b`用于取消引用指针并直接访问保存数据的内存区域（当然是在堆上）。

玩代码： https: [//play.golang.org/p/VDhycPwRjK9](https://play.golang.org/p/VDhycPwRjK9)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T14:23:36.710

`a()`不指向变量，因为它在堆栈上。你不能指向堆栈（你为什么要？）。

如果你愿意，你可以这样做

```
va := a()
b := &va 
```

但是您真正想要实现的目标还不清楚。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-15T16:13:39.220

在撰写本文时，没有一个答案能真正解释为什么会这样。

考虑以下：

```
 func main() {
    m := map[int]int{}
    val := 1
    m[0] = val
    v := &m[0] // won't compile, but let's assume it does 
    delete(m, 0)
    fmt.Println(v)
} 
```

如果这个代码片段真的编译了，会`v`指向什么！？这是一个悬空指针，因为底层对象已被删除。

鉴于此，禁止寻址临时人员似乎是一个合理的限制

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-13T02:32:06.300

`*string`是的，当 API 需要使用输入时，即使您经常希望将文字字符串传递给它们，这也会很烦人。

为此，我做了一个非常小的函数：

```
// Return pointer version of string
func p(s string) *string {
    return &s
} 
```

然后我没有尝试调用`foo("hi")`并获得可怕的东西`cannot use "hi" (type string) as type *string in argument to foo`，而是将参数包装在对 to 的调用中`p()`：

```
foo(p("hi")) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-04-18T16:36:56.333

猜你需要**更有效的 Cpp**的帮助;-)

临时对象和**右值**

> “<strong>C++ 中真正的临时对象是不可见的——它们不会出现在您的源代码中。每当创建了非堆对象但未命名时，它们就会出现。此类未命名对象通常出现在以下两种情况之一：应用隐式类型转换以使函数调用成功时以及函数返回对象时。”</p>

从**Primer Plus**

> **lvalue**是一个数据对象，可以通过用户（命名对象）按地址引用。非左值包括文字常量（除了引用的字符串，它们由它们的地址表示），具有多个术语的表达式，例如 (a + b)。

在 Go 语言中，字符串文字将被转换为`StrucType`对象，这将是一个不可寻址的临时结构对象。在这种情况下，字符串文字不能被 Go 中的地址引用。

好吧，最后但并非最不重要的一个例外是，您可以获取复合文字的地址。天哪，真是一团糟。

# php - 将 $lvl1.lvl2.lvl3 重命名为 $lvl1['lvl2']['lvl3']

> ID：10535746
> 
> 赞同：2
> 
> 时间：2012-05-10T14:06:53.357
> 
> 标签：php, regex

我创建了一个允许用户回显变量的文本区域：

```
Hello {$name}! 
```

...还有数组：

```
Hello {$person.name} 
```

使用以下行 PREG_REPLACE 字符串，以便它可以由 PHP eval()'ed：

```
$input = preg_replace( $patter , $replacement , $input); 
```

我让它与浅变量一起工作：

`'/{\$([a-zA-Z0-9_-]*)}/'`变成`<?php echo $$1; ?>`

...并使用 1- 2- 或 3 级深度数组：

`'/{\$([a-zA-Z0-9_-]*)\.([a-zA-Z0-9_-]*)\.([a-zA-Z0-9_-]*)\.([a-zA-Z0-9_-]*)}/'`

变成`<?php echo $$1['$2']['$3']['$4']; ?>`

但我真正想要的是无限的水平......就像......

`'/{\$([a-zA-Z0-9_-]*)<\.([a-zA-Z0-9_-]*)>}/'`变成`<?php echo $$1<['$*']>; ?>`

抱歉，如果这让您头疼 - 它肯定让我感到头疼！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:42:11.070

我认为您应该尝试使用 mustache 代替：

mustache.github.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:45:45.090

可能应该使用现有的东西，比如布赖恩建议的[胡子。](http://mustache.github.com)

但这是一种比 eval 更合理的替换方式。您需要做的就是调整您喜欢的任何点符号解析功能。

```
<?php
$input = 'Hello {$name}!  Hello {$person.name}! Hello {$person.unknown}!';

$data = array(
    'name' => 'fred',
    'person' => array(
        'name'=>'freddie'
    )
);

// extract tokens
preg_match_all('/{\$([A-Z.]*)}/i', $input, $tokens);

// declare non-recursive dot notation resolver
function resolve_token($data, $token){
    $token = str_replace(array('{','}','$'), '', $token);
    $steps = explode('.', $token);
    foreach($steps as $step){
        if( !isset($data[$step]) ) return false;
        $data = $data[$step];
    }
    return $data;
}

// get token list
$list = array();
foreach($tokens[0] as $token){
    $list[$token] = resolve_token($data, $token);
    // if you want to leave unresolved tokens in place
    // remove from $list, or never add to $list
}
$output =  str_replace( array_keys($list), array_values($list), $input);

echo "original: {$input}\n";
echo "output: {$output}\n"; 
```

# asp.net - 设置asp.net下拉列表的值

> ID：10535756
> 
> 赞同：0
> 
> 时间：2012-05-10T14:07:29.350
> 
> 标签：asp.net, telerik

我正在使用 rad 窗口并打开该窗口，它有一个 asp.net 下拉列表。在页面加载时，我想设置下拉列表的选定索引，但它总是显示默认值。

```
<telerik:RadWindow runat="server" 
         OnClientClose="ParentReload"
         OpenerElementID="<%# btn_ChangeLocation.ClientID %>"
         Width="400px" Height="205px" ID="RadWindow1">
</telerik:RadWindow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:30:52.917

您是否尝试过设置`SelectedIndex`属性？

```
[YourDropDown].SelectedIndex = [YourDesiredIndex]; 
```

# java - web.xml 文件丢失

> ID：10535757
> 
> 赞同：0
> 
> 时间：2012-05-10T14:07:34.137
> 
> 标签：java

我是动态 Web 项目的新手。我在 e-Clipse 中创建了一个新的动态 web 项目。但是当我检查它的结构时，WEB-INF / lib 文件夹中没有 web.xml。我可以复制粘贴。这是真的，但我想知道我应该配置什么以在开始时自动生成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:12:05.313

web.xml 的正确位置是 WEB-INF 文件夹，而不是 WEB-INF/lib。所以你不应该在那里复制它。在 Eclipse 中，您可以在“已部署资源”->WEB-INF 中找到 web.xml。

# c# - 使用 c# 在 ms access 2010 中获取多行的平均值

> ID：10535766
> 
> 赞同：0
> 
> 时间：2012-05-10T14:07:50.883
> 
> 标签：c#, ms-access

嗨，我正在制定一个员工评估计划，我需要获取每个字段的每个员工的平均值，以实现这一点，员工每次被评估时都会被插入一个新行，以免覆盖前一个人的评估那个员工我有我的代码并且没有抛出错误但没有将平均值写入数据库

```
public void AvOut()
{
    try
    {
        string request = tbEmployee.Text;
        //Opens a connection to the database
        OleDbConnection conn = new OleDbConnection(ConnString);
        conn.Open();

        OleDbCommand cmd = conn.CreateCommand();
        cmd.CommandText = "SELECT [Admin].[OutPuts] FROM [Admin] WHERE EmployeeName ='" + request + "';";
        OleDbDataReader reader = cmd.ExecuteReader();

        int total = 0;
        int count = 0;

        while (reader.Read())
        {
            total += (int)reader["OutPuts"];
            count++;
        }

        int avg = total / count;

        OleDbCommand cmds = conn.CreateCommand();
        cmds.CommandText = "SELECT MAX(EmployeeID) AS [id_no] FROM [Admin];";
        OleDbDataReader dbReader = cmds.ExecuteReader();
        dbReader.Read();
        int id = Convert.ToInt32(dbReader["id_no"]);

        OleDbCommand tot = conn.CreateCommand();
        tot.CommandText = (@"UPDATE [Admin] SET AVGOutput ='" + avg + "' WHERE EmployeeID = " + id);
        int affected = tot.ExecuteNonQuery();

        conn.Close();
    }
    catch (Exception e)
    {
        MessageBox.Show("The exception is " + e.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:15:35.670

您可以尝试删除 avg 周围的单引号。所以你的查询应该是：

```
tot.CommandText = (@"UPDATE [Admin] SET AVGOutput =" + avg + " WHERE EmployeeID = " + id); 
```

还要设置一个断点，看看你是否在 avg 中得到任何东西并检查 id

# c++ - 分配给 double 的数字上的 F 后缀

> ID：10535770
> 
> 赞同：4
> 
> 时间：2012-05-10T14:08:20.027
> 
> 标签：c++, c

我知道用 f 为浮点数添加后缀可以让编译器知道它是浮点数而不是双精度数。在浮点数而不是双精度数上操作时，这对于防止不必要的强制转换很重要。但是，在我由外部公司提供的一些代码中，我看到了以下示例：

```
double i = 1.4f; 
```

现在我想知道在这种情况下会发生什么？编译器会默默地忽略'f'，它只是与任何事情无关的东西，我可以放心地忽略吗？

然后我想知道，如果将数字分配给在其他地方带有 f 后缀的双精度数，而不仅仅是在初始化时，那会是不同的情况吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T14:16:38.653

C标准的相关引用：

§6.4.4.2 第 4 段

> 如果以字母 f 或 F 为后缀，则为 float 类型。

第 5 段

> 浮动常量被转换为内部格式，就像在翻译时一样。

第 7 段

> 浮动常量的转换时转换应与库函数（如 strtod）对字符串的执行时转换相匹配，给定适合两种转换的匹配输入、相同的结果格式和默认的执行时舍入。

假设 IEEE-754 数字`1.4f`产生值：

```
1.39999997615814208984375 
```

而`1.4`有值：

```
1.399999999999999911182158029987476766109466552734375. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T14:11:53.783

一个好的编译器应该将 1.4f 直接转换为 double。

兼容的编译器会将 1.4f 转换为`float`format，然后将值转换为`double`，然后将值分配给`i`.

顺便说一句，从 FORTRAN 时代开始，一个名为的变量`i`通常保存整数值。

# javascript - 如何使用 jquery 计算标签的高度以将页脚向下推

> ID：10535771
> 
> 赞同：3
> 
> 时间：2012-05-10T14:08:23.240
> 
> 标签：javascript, jquery, html, tabs

我已经设置了一些绝对定位的标签，因此我的页脚不会向下推。我不想将标签容器设置为我的 CSS 中的高度，因为内容高度会有所不同。

我想找到一种计算内容 div 的方法，然后将样式应用于我的 .tabs 类，以便页脚将下推到我的标签内容下方，给它一个高度。有人可以帮助 jquery/javascript 新手吗

这是我的html：

```
<article class="tabs">
    <section class="current">
        <h3>Documents</h3>
        <div>
            <p >content</p>
        </div>
    </section>
    <section>
        <h3>Info</h3>
        <div>
            <p>content1</p>
        </div>
    </section>
    <section>
        <h3>Credentials</h3>
        <div>
            <p>A credentials tab content2</p>
        </div>

    </section>
</article> 
```

到目前为止，这是我的脚本：

```
 <script type="text/javascript">
    $(function(){
        // Fast and dirty
        $('article.tabs section > h3').click(function(){
            $('article.tabs section').removeClass('current');
            $(this)
            .closest('section').addClass('current');
        });
    });

</script> 
```

更新：`$(".tabs .current").find("div").height(); $(".tabs").css("height"," .height");`

我已经尝试将此添加到我的脚本中，它会根据需要向我的标签 div 添加样式，但它无法计算出内容 div 的高度。所以第一艺术是错误的我如何计算内容所在的div的高度？然后将其应用到代码的底部以将高度添加到我的选项卡 div 的内联样式中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:55:06.383

您是否尝试过使用 $.height 函数来获取选项卡的高度？

**更新：**确保在运行任何代码以设置选项卡之后触发 $.height。此外，请确保调用的目标是选项卡容器的选择器，而不仅仅是单个选项卡。

# twitter-bootstrap - 如何加载最新版本的引导程序

> ID：10535776
> 
> 赞同：2
> 
> 时间：2012-05-10T14:08:36.983
> 
> 标签：twitter-bootstrap

我看到有人引用：

> ```
> http://twitter.github.com/bootstrap/1.4.0/bootstrap.min.css 
> ```

但我想做的是加载版本 1 的“最新”，类似于 Google cdn 如何包含库的所有版本以及“最新”版本。

问：有没有我可以加载的东西：

> [http://twitter.github.com/bootstrap/1/bootstrap.min.css](http://twitter.github.com/bootstrap/1/bootstrap.min.css)

要获取最新版本的 twitter bootstrap 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:59:23.207

AFAIK github 上没有可用的 bootstrap css 的预编译版本，但我想您可以参考[http://twitter.github.com/bootstrap/assets/css/bootstrap.css](http://twitter.github.com/bootstrap/assets/css/bootstrap.css)，这是由他们的网站（但显然这不能保证无限期地工作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:38:12.823

我认为没有理由这样做。您始终应该测试新版本以确保它不会破坏您当前的应用程序。

# mongodb - 空闲时mongo如何处理内存

> ID：10535777
> 
> 赞同：-1
> 
> 时间：2012-05-10T14:08:38.170
> 
> 标签：mongodb

我正在将 MongoDB 用于拥有数百万种产品的大型电子商务业务。我们将类别和一些产品数据缓存在 mongo 中以便快速访问。

我们仍在开发中，但我们有一种行为要调查。一夜之间，我们的服务器处于空闲状态。当我们晚上离开时，一切都很快，缓存工作得很好。当我们在服务器一夜之间空闲后早上进来时，它非常慢。但过了一段时间，它又加速了。

查看内存，我看到 mongoDB 在这段时间变得更加活跃（正如我所料）。我有点假设 Mongo 在空闲时间将数据向下移动到磁盘，并在第二天早上访问时备份到内存。

如果是这种情况，那么这个问题很可能会在页面被频繁访问的生产环境中消失。

有没有人（那里的任何 mongo 大师）对我的假设有意见？我当然正在调查其他原因（数据库访问、CF 初始化等），但这对我来说似乎最有可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:15:28.773

Mongo 将内存管理传递给操作系统（内存映射文件机制）。所以是的，如果某个内存区域在一段时间内未被访问，系统会将更改刷新到磁盘（如果有）并释放它。

是的，当一直有活动时，这不应该在生产中发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T14:17:15.903

众所周知，MongoDB 使用内存映射文件，内存处理*完全*取决于底层操作系统。您的操作系统很可能会从内存中删除“不太热”的页面。

# javascript - 如何将 Epoch 中的日期转换为 Javascript 中的“Ymd H:i:s”？

> ID：10535782
> 
> 赞同：22
> 
> 时间：2012-05-10T14:08:48.857
> 
> 标签：javascript, date, transformation, epoch, date-conversion

如何在纪元中转换以下日期：

> 1293683278

到以下可读日期：

> 2010-06-23 09:57:58

使用Javascript？

谢谢！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-10T14:12:05.420

```
var timestamp = 1293683278;
var date = new Date(timestamp * 1000);

var year = date.getFullYear();
var month = date.getMonth() + 1;
var day = date.getDate();
var hours = date.getHours();
var minutes = date.getMinutes();
var seconds = date.getSeconds();

console.log(year + "-" + month + "-" + day + " " + hours + ":" + minutes + ":" + seconds);
```

有关详细信息，请参阅 js 日期文档

其他方式：

```
var timestamp = 1293683278;
var date = new Date(timestamp * 1000);
var iso = date.toISOString().match(/(\d{4}\-\d{2}\-\d{2})T(\d{2}:\d{2}:\d{2})/)

console.log(iso[1] + ' ' + iso[2]);
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-11T18:40:15.470

您可以为此使用[moment.js](http://momentjs.com)。

```
moment.unix(1293683278).format('YYYY-MM-DD HH:mm:ss'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-08T21:02:40.267

代码：

```
var timestamp = 1293683278;
var d = new Date(timestamp * 1000);

console.log(
  d.getFullYear() + "-" +
  ("00" + (d.getMonth() + 1)).slice(-2) + "-" +
  ("00" + d.getDate()).slice(-2) + " " +
  ("00" + d.getHours()).slice(-2) + ":" +
  ("00" + d.getMinutes()).slice(-2) + ":" +
  ("00" + d.getSeconds()).slice(-2)
);
```

格式：`YYYY-MM-DD HH:II:SS`

结果：`2010-12-30 07:57:58`

演示：[https ://jsfiddle.net/NabiKAZ/9ycovfxt/](https://jsfiddle.net/NabiKAZ/9ycovfxt/)

注意：对于当前时间，只需使用：`var d = new Date();`代替。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-15T09:30:57.473

在决定在您的项目中使用 Moment.js 之前，请考虑使用任何其他替代方案。

如[Moment.js 项目状态](https://momentjs.com/docs/#/-project-status)中所述。

> **我们现在通常认为 Moment 是一个处于维护模式的遗留项目。它没有死，但它确实完成了**

在这一点上，我推荐使用[***date-fns library***](https://date-fns.org/)。它轻量级、简单，并且支持国际化。

我真正喜欢*date-fns*的地方在于您只需声明需要使用的模块。这是我的示例代码：

```
// Docs: https://date-fns.org/v2.23.0/docs/format
import format from 'date-fns/format'
import id from 'date-fns/locale/id'

function formatTimeLocale(time) {
  return format(
    new Date(time),
    `EEEE, d MMM yyyy 'pukul' HH:mm`,
    {
      locale: id,
    }
  )
}

// This will return: Rabu, 15 Sep 2021 pukul 16:21
const dateTime = formatTimeLocale(1631697689 * 1000)
console.log(dateTime) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-08T10:56:39.110

```
/* Get timestamp */
var timestamp = 1293683278;
document.querySelector("#timestamp").innerHTML = "Timestamp: " + timestamp;

/* Get milisecond from timestamp */
var milisecond = 1293683278 * 1000;    
document.querySelector("#milisecond").innerHTML = "Milisecond: " + milisecond;

/* Separate milisecond */
var datetime = new Date(milisecond);

var year    = datetime.getFullYear();
var month   = datetime.getMonth() + 1; // (0-11)
var date    = datetime.getDate();
var hour    = datetime.getHours();
var minute  = datetime.getMinutes();
var second  = datetime.getSeconds();

document.querySelector("#datetime").innerHTML = "Datetime: " + 
  year + "-" + addZero(month) + "-" + addZero(date) + " " + 
  addZero(hour) + ":" + addZero(minute) + ":" + addZero(second);      

// Add 0 if argument < 10
function addZero(i) {
  if (i < 10) {
    i = "0" + i
  };  
  return i;
}
```

```
<p id="timestamp"><p>
<p id="milisecond"><p>
<p id="datetime"><p>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-17T03:02:34.410

我更喜欢这个简短的答案

```
new Date().toJSON().split('.')[0].split('T').join(' ') 
```

# makefile - Makefile：删除没有依赖关系的中间文件

> ID：10535790
> 
> 赞同：0
> 
> 时间：2012-05-10T14:09:12.270
> 
> 标签：makefile

成堆的！

对于这个看似简单的问题，刻苦的实验和搜索并没有找到任何解决方案。

在我的构建中，.cc 文件依赖于 .proto 文件。在制作过程中，.proto 文件被翻译成 .cc 和 .h 文件，然后被收集并构建成可执行文件。

如何确保在删除 .proto 时，在 make 过程中会自动删除相应的中间 .cc 文件？（如果不是，它会被带入构建的下一个阶段，这在过去已经引起了问题。）

现在，当我删除或重命名 .proto 时，我只是清除了所有生成的 .cc/.h 文件——这是正确的，但会触发几乎整个系统的重建。

提前致谢...！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:53:33.647

您可以编写类似的规则`clean`，但不那么严格：

```
SOURCES = $(PROTOS:.proto=.cc)

.PHONY: tidy
tidy:
        @rm $(filter-out $(SOURCES), $(wildcard *.cc)) 
```

然后，您可以手动启动此规则，或将其作为可执行文件的仅订单先决条件。

或者您可以将相同的命令放在可执行文件的规则中，但这有点不雅。

# python - 我们可以对带有数组元素的数组进行逻辑与运算吗？

> ID：10535791
> 
> 赞同：-2
> 
> 时间：2012-05-10T14:09:13.163
> 
> 标签：python, c, arrays

你好朋友，
我是Python新手。我今天在此链接 [http://www.learnpython.org/page/Conditions](http://www.learnpython.org/page/Conditions)中看到了 Python 编程的指令。 有问题的是，他想对数组和数组元素执行逻辑与运算。我在 C 中尝试了同样的方法。但是 C 抛出了一个错误。我们该怎么做？AND 操作将如何在这里发生？

```
first_array = [3, 4, 5]
if first_array and first_array[0] == 1:
   print "5" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:16:21.910

在 c

```
int first_array[] = { 3,4,5};
if ( (first_array != null) && (first_array[0] == 3 )) 
{
    printf("5");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T14:13:38.510

很难确切地说出你在问什么，但我会尝试给你一些选择：

您编写的代码会检查是否`first_array`为空，以及第一个元素是否为 0。这实际上是一种不错的做法，因为如果为空`first_array[0]`会引发异常。`first_array`这种结构避免了这个错误，因为第二个条件不会被评估，除非第一个条件为真（and``s how`在 Python 中有效）。

如果您想检查列表中的*所有*或*任何*项目是否为真（非零，如果它们是数字），您可以使用 Python 的`all()`or`any()`函数。

```
if any(first_array) and first_array[0] == 1:
    # etc 
```

如果要检查列表中的所有（或任何）项目是否具有特定值，可以使用带有`any`/的生成器表达式`all`：

```
if any(element == 3 for element in first_array) and first_array[0] == 1:
    # and so on 
```

但是，检查列表是否包含特定值的首选方法不是像上面这样的构造，而是更简单`in`：

```
if 3 in first_array and first_array[0] == 1:
    # action 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:16:43.733

首先，python 中的“and”是 C 中的 &&。第二，python 实现了列表而不是数组，第三，我不完全是你的问题：python 是否为上述代码抛出异常？如果是这样，那么也许您在 witch case 中安装了 python 3 它应该像

```
 print("5") 
```

否则，如果问题与 C 相关，请更改问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T14:32:48.657

表达方式

```
if first_array and first_array[0] == 1: 
```

当两个子表达式`first_array`和`first_array[0] == 1`都为真时为真。

如果列表包含元素，则列表为真，第二个是微不足道的。

# java - 如何在数字前加零

> ID：10535793
> 
> 赞同：-1
> 
> 时间：2012-05-10T14:09:16.843
> 
> 标签：java, android

我正在运行以下脚本和以下 logcat 报告，因为目前它无法正常工作。有人可以帮我完成这项工作，如果可能的话，还可以解释我做错了什么。

```
 Calendar calendar = Calendar.getInstance();
         sdf = new SimpleDateFormat("mm");
         NValue = sdf.format(calendar.getTime());
         NValue = String.format("%02d", NValue); 
```

Logcat 报告：

```
05-10 14:02:52.281: E/AndroidRuntime(295): java.util.IllegalFormatConversionException: d is incompatible with java.lang.String 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:12:32.207

`%s`对于字符串...

```
String.format("%s", NValue); 
```

像，

```
Calendar calendar = Calendar.getInstance();
        SimpleDateFormat sdf = new SimpleDateFormat("MM");
        String NValue = sdf.format(calendar.getTime());
        NValue = String.format("%s", NValue);
        System.out.println(NValue); 
```

# jquery - .removeAttr 删除类，脚本仍然有效

> ID：10535794
> 
> 赞同：0
> 
> 时间：2012-05-10T14:09:20.213
> 
> 标签：jquery

jQuery有一个令人困惑的问题，基本上这段代码被添加到2个元素中，并且工作正常，但如果你单击一个单独的元素，我希望它不起作用，我认为从这些元素中删除类会阻止它们工作，但即使没有课，他们仍在工作……这里有一些代码。

```
$(".q1a1, .q1a3").click(function (e) {
e.preventDefault();
$(this).animate({ backgroundColor: "#db384b" }, 1000);
$(this).animate({ backgroundColor: "#0F437D" }, 2000);
$(this).children('.wrong').fadeIn(1000).fadeOut(2000);
}); 
```

^ 我希望此代码在单击下面的代码后不起作用（如果有意义的话）

```
$(".q1a2").click(function (e) {
e.preventDefault();
$(this).animate({ backgroundColor: "#00a6eb" }, 800);
$('.q1a2 .correct').show();
$('.q1a1, .q1a3 ').removeAttr("class");
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:14:26.573

尝试做一个 .unbind()。看起来像这样。

$('.q1a1, .q1a3 ').unbind('点击');

您可以阅读更多关于 .unbind() [http://api.jquery.com/unbind/](http://api.jquery.com/unbind/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:13:58.183

您可以在单独的函数中声明您的处理程序，*类似于*以下内容：

```
var SomeFunction = function(e) {
    e.preventDefault();

    // your function code goes here

    $(this).unbind(SomeFunction); // and this removes the handler from the element on the first click
};

$(".q1a1, .q1a3").click(SomeFunction); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:18:17.230

删除类将无济于事，因为您已经将 click 事件附加到元素。

您应该使用 unbind 删除

```
$('.q1a1, .q1a3 ').unbind("click"); 
```

[http://api.jquery.com/unbind/](http://api.jquery.com/unbind/)

# jquery - 3个选择框一起改变

> ID：10535795
> 
> 赞同：0
> 
> 时间：2012-05-10T14:09:20.477
> 
> 标签：jquery

在我的网站上，我添加了 3 个过滤器、燃料类型、驱动类型和车辆类型，我得到了半工作代码，它根据选择框显示汽车，但是有一个问题，我希望它不显示其他选择. 例如，当您选择汽油车时，它会显示一些不是手动的汽车，而是汽油车，我只希望它显示完全匹配，所以如果您选择汽油手动车，它只会显示汽油和手动的汽车和汽车。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

 <script type="text/javascript" src="jquery.js"></script>          
 <script type="text/javascript">
$(function() {
    var fuel = ''; // Keep track of selections
    var drive = '';
    var type = '';
    $('#fuel select').on("change", function() {
    fuel = (this.value ? '.' : '') + this.value;
    selectModels();
});
        $('#drive select').on("change", function() {
    fuel = (this.value ? '.' : '') + this.value;
    selectModels();
});
    $('#type select').on("change", function() {
    fuel = (this.value ? '.' : '') + this.value;
    selectModels();
});
    function selectModels() { // Select matching models
        $('div.modelContainer').hide(). // Hide all
            filter(fuel + drive + type).show(); // Show matches
    }
});
</script>
</head>
<body>
<div id="fuel" class="controller">
<span class="controllerLabel">fuel:</span>
<select>
  <option value="all">all</option>
  <option value="petrol">petrol</option>
  <option value="diesel">diesel</option>
</select>
</div>

<div id="drive" class="controller">
<span class="controllerLabel">drive:</span>
<select>
  <option value="all">all</option>
  <option value="auto">auto</option>
  <option value="manual">manual</option>
</select>
</div>
<div id="type" class="controller">
<span class="controllerLabel">type:</span>
<select>
  <option value="all">all</option>
  <option value="car">car</option>
  <option value="4">4x4</option>
  <option value="7">peoeple</option>
  <option value="vanl">van</option>
</select>
</div>

<div class="modelContainer  petrolmanualcar">

<!-- <a id="" href="panda.html" title="Panda 1.2" accesskey="1"></a> -->
<p><img align="right" alt="Panda 1.2" id="image47" title="Clio 1.2" src="images/panda.jpg" width="150" height="115"></img></p>
<div class="c2"><big><a href="Panda.html"><strong>Fiat Panda 1.2 5Dr:</strong></a></big><br></br>
&pound;25.00 per Day<p>
&pound;130.00 per week</p>
</div>

</div>

<div class="modelContainer  petrol auto car">

<!-- <a id="" href="focus.html" title="Auto. Focus 1.6" accesskey="1"></a>-->
<p><img align="right" alt="Automatic 1.6" id="image4foc" title="Automatic or Manual Focus 1.6" src="images/Focus.jpg" width="200" height="130"></img></p>
<div class="c2"><big><a href="focus.html"><strong>Auto. Ford Focus 1.6:</strong></a></big><br></br>
&pound;32.00 per day<p>
&pound;175.00 per week</p>
</div>

</div>

<div class="modelContainer diesel manual car">

<!-- <a id="" href="rio.html" title="Kia Rio 1.5 Crdi" accesskey="1"></a> -->
<p><img align="right" alt="rio" id="imagerio" title="rio" src="images/rio.jpg" width="180" height="105"></img></p>
<div class="c2"><big><a href="rio.html"><strong>Kia Rio 1.5 CRDi:</strong></a></big><br></br>
&pound;28.00 per day<p>
&pound;155.00 week</p>
</div>

</div>

<div class="modelContainer  diesel manual 4">
<!-- <a id="" href="sportage.html" title="Kia Sportage 2 1.7 Manual CRDi" accesskey="1"></a>-->
<p><img align="right" alt="Kia Sportage" id="imagesport" title="Kia Sportage 1.7 CRDi" src="images/sportage.jpg" width="210" height="130"></img></p>
<div class="c2"><big><a href="sportage.html"><strong>Kia Sportage 2 1.7 CRDi:</strong></a></big><br></br>
<p>£45.00 per day<br />
&pound;120.00 per 3 days<br />
£250.00 per week</p>
</div>

</div>

<div class="modelContainer diesel manual van">

<!-- <a id="" href="kangoo.html" title="Renault Kangoo Van SL17 Dci70+" accesskey="1"></a>-->
<p><img align="right" alt="Renault Kangoo Van SL17 Dci70+" id="imagekang" title="Renault Kangoo Van" src="images/kangoo.jpg" width="190" height="100"></img></p>
<div class="c2"><big><a href="kangoo.html"><strong>Renault Kangoo Van SL17 Dci70+:</strong></a></big><br></br>
&pound;26.50 per day<p>
&pound;150.00 per week</p>
</div>

</div>

<div class="modelContainer diesel auto car">

<!-- <a id="" href="ceed.html" title="Kia Ceed sports tourer CRDi" accesskey="1"></a>-->
<p><img align="right" alt="Kia Ceed Sports Tourer" id="imageceedst" title="Kia Ceed sports tourer" src="images/ceed.jpg" width="210" height="90"></img></p>
<div class="c2"><big><a href="ceed.html"><strong>Auto. Kia Ceed Sports Tourer CRDi :</strong></a></big><br></br>
&pound;35.00 per day<p>
&pound;200.00 per week</p>
</div>

</div>

<div class="modelContainer diesel auto 4">

<!-- <a id="" href="sportageauto.html" title="Kia Sportage KX2 2.0 Auto 4X4" accesskey="1"></a>-->
<p><img align="right" alt="Kia Sportage" id="imageautosport" title="Kia Sportage 1.7 CRDi" src="images/sportage.jpg" width="210" height="130"></img></p>
<div class="c2"><big><a href="sportageauto.html"><strong>Auto. Kia Sportage KX2 2.0 4X4:</strong></a></big><br></br>
<p>&pound;50.00 per day<br />
&pound;125 per 3 days<br />
&pound;270.00 per week</p>
</div>

</div>

<div class="modelContainer diesel auto 7">

<!-- <a id="" href="newgalaxy.html" title="New Automatic Galaxy 2.0 TDi" accesskey="1"></a>-->
<p><img align="right" alt="New Auto Galaxy" id="imagegal" title="New Automatic Galaxy 2.0 TDi" src="images/newgalaxy.jpg" width="240" height="150"></img></p>
<div class="c2"><big><a href="newgalaxy.html"><strong>Auto. Ford Galaxy 2.0 TDI 7 Seater:</strong></a></big><br></br>
<p>&pound;65.00 per day<br />
&pound;165 per 3 days<br />
&pound;310.00 per week</p>
</div>

</div>

<div class="modelContainer diesel auto 7 4">

<!-- <a id="" href="sorento.html" title=
Kia Sorento 4X4 Automatic" accesskey="1"></a>-->
<p><img align="right" alt="sorento" id="imagesor" title="Kia Sorento 4X4" src="images/sorento.jpg" width="300" height="200"></img></p>
<div class="c2"><big><a href="sorento.html"><strong>Auto. Kia Sorento KX3 CRDi 4X4 7 Seater:</strong></a></big><br></br>
<p>&pound;70 per day<br />
&pound;180 per 3 days<br />
&pound;360 per week</p>
</div>

</div>
</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:41:11.587

```
 $(function () {
            var fuel = ''; // Keep track of selections
            var drive = '';
            var type = '';
            $('#fuel select').on("change", function () {
                fuel = ($(this).val() === 'all' ? '' : '[class*="' + $(this).val() + '"]');
                selectModels();
            });

            $('#drive select').on("change", function () {
                drive = ($(this).val() === 'all' ? '' : '[class*="' + $(this).val() + '"]');
                selectModels();
            });

            $('#type select').on("change", function () {
                type = ($(this).val() === 'all' ? '' : '[class*="' + $(this).val() + '"]');
                selectModels();
            });

            function selectModels() { // Select matching models
                $('div.modelContainer').hide(); // Hide all
                $('div.modelContainer' + fuel + drive + type).show();
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:33:59.560

这就是你应该如何编写脚本的方式，我在 JSFiddle 上检查了它，它可以工作。JSFiddle 示例可以在这里找到：[点击这里](http://jsfiddle.net/CeKfA/1/)

```
$('#fuel select').on("change", function() {
    selectModels();
});
$('#drive select').on("change", function() {
    selectModels();
});
$('#type select').on("change", function() {
    selectModels();
});

function selectModels() { // Select matching models
    var fuel = $("#fuel select :selected").val();
    var drive = $("#drive select :selected").val();
    var type = $("#type select :selected").val();
    //alert("[" + fuel + "/" + drive + "/" + type + "]");

    var extraClasses = '';    
    if(fuel && fuel != "all") {
        extraClasses += "." + fuel;
    }
    if(drive && drive != "all") {
        extraClasses += "." + drive;
    }
    if(type && type != "all") {
        extraClasses += "." + type;
    }
    //alert(extraClasses);

    $('div.modelContainer').hide(); // Hide all
    $('div.modelContainer' + extraClasses).show(); // Show matches
}​ 
```

# java - maven eclipse 工作区分辨率

> ID：10535799
> 
> 赞同：2
> 
> 时间：2012-05-10T14:09:28.397
> 
> 标签：java, eclipse, maven, m2eclipse, workspace

我的工作区中有 2 个 Maven 项目。它们不是一个多模块项目，而是两个独立的项目。在一个项目中，我将另一个作为依赖项。我打开了工作区解析，但它试图去存储库找到它。我尝试删除重新导入两个项目但没有运气，并且我使用的是最新版本的 m2eclipse (0.12.1)。我的印象是这应该有效，但没有 - 任何想法为什么？

编辑： poms 的相关部分看起来像

项目A

```
<project>
 <groupId>my.company</groupId>
 <artifactId>project</artifactId>
 <version>1.0-SNAPSHOT</version>
 <name>my project</name>
</project> 
```

项目 B

```
<dependencies>
  <dependency>
    <groupId>my.company</groupId>
    <artifactId>project</artifactId>
    <version>1.0-SNAPSHOT</version>
  </dependency>
</dependencies> 
```

![在此处输入图像描述](../Images/5ef18db8615f8840858f0de7334a588b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:58:33.340

看起来你有一个旧版本的 m2eclipse - 正如 Guillaume Polet 提到的，最新版本的 m2eclipse 插件是 1.0 的东西。

获取最新版本的最简单方法是打开 Eclipse 市场，搜索“Maven”并安装“Maven 集成插件”（可能还有 WTP 插件，因为您似乎正在使用它）。

# javascript - 如何将在服务器上运行的页面生成为 PDF

> ID：10535803
> 
> 赞同：2
> 
> 时间：2012-05-10T14:09:35.297
> 
> 标签：javascript, html, pdf, pdf-generation, phantomjs

这项任务并不容易，因为我需要在单击按钮后创建页面的 PDF 版本。它具有复杂的dom结构，许多元素绝对/相对定位，并且数据是动态加载的。我考虑过使用 Phantom.js 服务器来完成这项任务，因为它可以生成 PDF，但这会带来一些问题；

*   phantomjs 可以从控制台运行（这是不可能的，因为生成 PDF 必须在 UNIX 和 WIN 系统上都可用，并且只能从页面运行 shell 脚本）或使用它内置的服务器
*   服务器与运行页面的服务器具有不同的域，因此出现了相同的源策略问题。我正在考虑使用带有 phantomjs 服务器地址的 iframe 作为 src 和我的页面 html 传入参数，但参数太长并返回 413 错误。JSONP 不起作用，因为它是为 GET 请求构建的，并且出现了参数过长的相同问题。

我也考虑过在客户端生成它，但由于网站的复杂性，我可能需要很多天才能获得页面的正确表示（因为所有定位值都需要重新计算为 pts），而且它必须是一个通用的解决方案。

任何其他想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:35:05.550

我查看了几种工具来完成服务器端 PDF 生成。

我尝试使用 Web SuperGoo 中的一个名为 abcPDF (.net) 的文件，但我一直遇到它无法正常工作的问题。

还有一个似乎工作得更好的称为 iText，在 .net 和 Java 版本中都可用。根据您使用的版本，它适用于 AGPL、LGPL 和商业许可证。

我希望我能以不同的方式告诉你，但我不知道有什么方法可以轻松地将 HTML 转换为 PDF。这些库中的每一个都有一个 API，您必须对其进行编程以描述文档的外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:30:22.000

What about using a PDF printer? Depending on your system, there could be a built-in PDF printer, or if using Windows, you can have a look at [PDFCreator](http://www.pdfforge.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T23:30:03.643

`POST`使用 Ajax 将整个 DOM 发送到服务器，将其作为 PDF（使用 phantomjs）在那里渲染，在 JSON 响应中发回服务器 URL（和 nonce）怎么样？然后，您可以创建一个下载链接或自动启动下载。那行得通吗？

# java - == vs .equals - 为什么不同的行为？

> ID：10535804
> 
> 赞同：2
> 
> 时间：2012-05-10T14:09:45.673
> 
> 标签：java, string-comparison

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

对于这个相当简单的问题，我很抱歉。我有这个非常简单的java程序：

```
public class ArgIt {
    public static void main(String[] args){
            if(args[0].equals("x")) System.out.print("x");
            if(args[0] == "x") System.out.println("x2 ");
    }
} 
```

如果我调用程序 >java ArgIt x 它只打印一个 x。为什么程序在任何其他情况下都不会确认字符串上的 ==？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T14:11:39.807

在 Java 中，必须`equals()`用于比较`String`s 之间的相等性。*身份*`==`测试，一个不同的概念。

 *两个对象可以相等但不相同；另一方面，如果两个对象相同，则暗示它们相等。

如果两个对象在物理上指向内存中的相同地址，则它们是相同的，而如果它们具有相同的值，则两个对象相等，如程序员在`equals()`方法中定义的那样。通常，您更感兴趣的是找出两个对象是否相等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T14:11:52.240

`==`测试指针相等性；`.equals`存在以测试值相等性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:14:02.773

在 Java 中，与`==`操作符比较检查是否相等，因为引用（在对象的情况下）指向相同的内存位置。正因为如此，只能使用`==`运算符比较基元，因为基元（`int`、`long`、`boolean`等）是按值存储的，而不是按引用存储的。

简而言之，用`equals`方法比较对象，用`==`算子比较原语。*

# javascript - 如何为线条设置动画以跟踪移动的 CSS 元素？

> ID：10535809
> 
> 赞同：3
> 
> 时间：2012-05-10T14:09:58.807
> 
> 标签：javascript, jquery, css, animation, svg

**更新 -[我曾请求帮助修复我第一次尝试使用 SVG animate 插件，现在有一个解决方案（按照这个链接），它有效地回答了这个问题。尽管 Jleagle 指出的 attr() 也可能导致解决方案](https://stackoverflow.com/questions/10526137/problems-using-the-jquery-svg-animation-plugin-on-a-line)**

我已经使用 jQuery 为一组 css 元素设置了动画，下一阶段是使用**图形直线**跟踪每个元素。线的一端应保持固定，并与元素一起移动。

我认为我可以使用 SVG 和适当的 SVG jQuery 插件来完成此操作，但我遇到了很多问题**，我想知道我是否应该从不同的方向处理它。**

下面是带有三个 SVG 行的动画框的代码，因此您可以看到我在做什么。**[还有一个网站的 JS fiddle](http://jsfiddle.net/BWbJj/7/)**

Javascript

```
$(function() {
var balloons = [$("#box1"), $("#box2"), $("#box3")];

var lines = [$("#line1"), $("#line2"), $("#line3")];

function act(jqObj, speed, change) {

    jqObj.animate({
        'left' : change
    }, speed).animate({
        'left' : -change
    }, speed, function() {
        act(jqObj, speed, change);
    });

};
for( i = 0; i < balloons.length; i++) {
    var speed = 2000 + Math.random() * 501;
    var change = 10 + Math.random() * 26;

    act(balloons[i], speed, change);
}
}); 
```

HTML / CSS

```
<html>
<head>
    <title>Proof of Concept Page</title>
    <style type="text/css">
        .html .body {
            position: absolute;
        }

        .box {
            position: absolute;
            width: 100px;
            height: 100px;
            position: absolute;
            background-color: red;
        }
        #box1 {
            margin-left: 300px;
            margin-top: 60px
        }
        #box2 {
            margin-left: 500px;
            margin-top: 20px
        }
        #box3 {
            margin-left: 700px;
            margin-top: 50px
        }
    </style>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="main.js"></script>

</head>
<body>

    <div  class="box" id="box1">
        Proj 1
    </div>
    <div  class="box" id="box2">
        Proj 2
    </div>
    <div  class="box" id="box3">
        Proj 3
    </div>

    <svg id="linePad" xmlns="http://www.w3.org/2000/svg" version="1.1">
        <line id="line1" x1="350" y1="160" x2="550" y2="500" style="stroke:rgb(255,0,0);stroke-width:2"/>
        <line id="line2" x1="550" y1="120" x2="550" y2="500" style="stroke:rgb(255,0,0);stroke-width:2"/>
        <line id="line3" x1="750" y1="150" x2="550" y2="500" style="stroke:rgb(255,0,0);stroke-width:2"/>
    </svg>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:23:13.767

您可以将文本和元素放在同一个标​​签中并设置文本位置的样式。
然后你不需要修复两个对象的动画。
希望这没问题。

# image-processing - 科学图像处理（在 ImageJ 中） - 去除背景的建议

> ID：10535811
> 
> 赞同：2
> 
> 时间：2012-05-10T14:10:04.360
> 
> 标签：image-processing, imagemagick, background-image, background-subtraction, imagej

我有一堆关于细菌分裂的电影，我应该追踪它们并检测分裂等等。

现在，我是这个领域的新手，所以我正在寻找有关如何进行的初步建议。

我附上了几张[截图](http://dl.dropbox.com/u/12043366/sample.zip)。

对于第一部分，我必须摆脱背景。我怎么做？ImageJ 工具似乎很有前途（最好说是压倒性的），我更喜欢使用它，因为我将使用 Java 进行开发，所以我很感谢 ImageJ 大师的一些建议。

这些是我到目前为止找到的一些选项，但我无法让它们适用于所有情况：

*   滚球变换（过程 -> 减去背景）
*   二值化？（图像->调整阈值）
*   或者可以
    在 ImageJ 中完成类似的操作：
    [http ://www.mathworks.com/products/image/demos.html?file=/products/demos/shipping/images/ipexrice.html](http://www.mathworks.com/products/image/demos.html?file=/products/demos/shipping/images/ipexrice.html)

请就如何在这些不同情况下最好地摆脱 bg 提出建议。

谢谢，

伊戈尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:14:15.867

您需要对细菌进行分割和跟踪。有很多方法可以做到这一点。这是人们目前正在发表的一个研究问题。

有时效果很好的一种方法是“分水岭”算法。Breifly，人们将图像想象为一个 3D 表面，其像素值表示高度。然后，您逐渐将水倒在表面上，等待水从一个集水区溢出到另一个集水区。发生这种情况的地方有两个区域。这是一个演示它的链接：[matlab中的分水岭算法](https://stackoverflow.com/questions/6691991/watershed-algorithm-in-matlab)

您也可以考虑水平集方法，因为它们往往在调整较少的情况下做得更好。最著名的是Chan和Vese的主动轮廓法。

这是我通过在您的图像上运行 Chan-Vese 得到的结果，无需任何额外工作：

![输入图像转换为灰度](../Images/f0e13bd21ae8a7eedd63e443cf7ebe93.png) ![chan-vese的输出](../Images/5e597bff3857756da76f075537829304.png)

两种分割算法都需要你做一些特别的事情才能让它在你的图像上正常工作。

当您拥有细菌移动的整个视频时，您可以做得更好。对于背景减法，您可能需要查看“Robust PCA”

[www-stat.stanford.edu/~candes/papers/RobustPCA.pdf](http://www-stat.stanford.edu/~candes/papers/RobustPCA.pdf)

[www.cds.caltech.edu/~ipapusha/pdf/robust_pca_apps.pdf](http://www.cds.caltech.edu/~ipapusha/pdf/robust_pca_apps.pdf)

[http://users.cms.caltech.edu/~mccoy/code/](http://users.cms.caltech.edu/~mccoy/code/)

这个应用程序引起了很多关注。

# c# - 如何处理在 RichTextBox 中单击超链接的事件

> ID：10535812
> 
> 赞同：2
> 
> 时间：2012-05-10T14:10:04.783
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0

如何处理单击 Windows Phone 中 RichTextBox 元素中的超链接的事件。这是我的 RichTextBox 元素代码：

```
 <RichTextBox>
           <Paragraph>
Download it directly to the <Hyperlink Foreground="Blue" TargetName="_blank" NavigateUri="http://itunes.apple.com/fi/app/goalapp/id502461189?ls=1&amp;mt=8">iTunes Store</Hyperlink> or <Hyperlink Foreground="Blue" TargetName="_blank" NavigateUri="https://market.android.com/details?id=com.strikersoft.meramal.se">Android Market</Hyperlink>. The application is launched for Swedish app store.
     </Paragraph>
    </RichTextBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:49:57.610

RichTextBox 控件具有 LinkClicked 事件。它处理其文本中的所有 url 点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:07:41.720

超链接有“点击”事件。只需处理它：

```
<Hyperlink Click="eventHandler" /> 
```

# c++ - 测试模拟器

> ID：10535814
> 
> 赞同：8
> 
> 时间：2012-05-10T14:10:12.740
> 
> 标签：c++, unit-testing, testing, automated-tests, emulation

对于模拟硬件的程序（例如 vmWare），我们应该如何组织单元测试和系统测试？

**背景：**

多年来，我们一直在管理一台 1980 年代的计算机以及相关的外围设备和软件。该系统对我们的客户至关重要，他们不想更换它。因此，我们选择为某些硬件开发仿真器。问题是它在数千页打字机书面文本中的记录很差。因此，这是尝试和错误的发展。

**问题：**

我们目前没有模拟器的单元测试，系统测试非常附加。很难通过在文本终端中键入并模拟从外部系统输入的数据来测试复杂的操作系统是否在各个方面都工作。我们现在测试的唯一方法是从外部系统（通过 X.25）添加大量输入压力，并定期自动化一些繁重的操作。但那时你想念太多了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T14:24:28.630

我曾经在一家公司工作，做类似的事情。为了测试我们的系统（它实际上是一个动态二进制翻译器，而不是一个模拟器），我们编写了一个测试框架，它将在本地运行相同的命令并翻译，然后比较结果。我们开始使用用户空间程序来做这件事，但是随着我们开发更复杂的产品，我们使用相同的技术来自动测试仿真硬件。粗略地说，您想编写一些程序来访问该硬件并对其进行处理，将所有输出转储到终端或某处的日志中。然后在两边（真实的和仿真的）运行这些程序，并比较输出。根据您的模拟的精确程度，您可能需要一些脚本来在区分时忽略输出的某些部分 - 地址、主机名等。

模拟硬件时要注意的另一件事是状态更改：特定命令可能会在两侧提供相同的*输出，但可能会以不同的方式更改内部状态。*这可能很难预料，但通常您需要识别可能受到影响的内部状态并将其与每个命令的输出一起转储。

在我们被收购之前，我们开始研究更聪明的东西，在我们运行测试时使用内核跟踪工具逐步监控操作系统/硬件状态，然后比较原生运行和翻译运行之间的一系列步骤。这从未完全开发，但看起来很有希望。

遗憾的是，所有这些东西都是内部的和封闭源代码的，所以我不能指出你可以运行和使用的任何东西，但这个想法非常合理——我们在每个版本的翻译器上运行了数千个这样的自动化测试非常满意的结果。

编辑：我对这个问题想得越多，我就越想解决这个问题。我不认为您的项目是开源的，但如果是，我很乐意参与。如果有可能，请随时与我联系。

# php - 从 PHP 中的 URL 和 mysql 数据库获取信息

> ID：10535815
> 
> 赞同：-1
> 
> 时间：2012-05-10T14:10:15.470
> 
> 标签：php, mysql, compare

正如我试图在较早的问题中发布的那样，我想知道如何从 php 中的 URL 和 mySQL 数据库获取数据，然后比较结果，如果它们相等，则运行一个事件。到目前为止，我有这段代码，但只要 URL 中有一个 id，它似乎无论如何都可以工作。它从不根据 mysql 数据库中的 id 检查它。有任何想法吗？

这是代码：

```
 <?php

$random = uniqid();

if ($id = $_GET['id']) {

$dbhandle = mysql_connect('host', 'user', 'password')
 or die("Unable to connect to MySQL");
$selected = mysql_select_db('a6675286_main',$dbhandle)
or die("Could not select database");

$sql = "SELECT completed FROM authentication WHERE username='admin'"; 
$id2 = mysql_query($sql);

}

if ($id = $id2) {
 mysql_query("UPDATE authentication SET completed = $random WHERE username = 'admin'");
 include 'sendmail.php';
echo "You win";
}
else {
header('Location: http://www.websites.com/');
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:12:29.947

```
if ($id = $id2) 
```

那是错误的！

你需要

```
if ($id == $id2) 
```

还

```
($id == $_GET['id']) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T14:17:52.767

$id2 不是 id，因为[mysql_query](http://se.php.net/manual/en/function.mysql-query.php)返回一个结果集。要使用 PHP 中的查询结果集，请查看结果函数，如[mysql_fetch_assoc](http://php.net/manual/en/function.mysql-fetch-assoc.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:12:22.507

您不是在比较 if 语句中的值，而是在分配它们 try

> if($id == $_GET['id'])

和

```
if ($id == $id2) 
```

此外，您为 $id2 分配了不正确的值，您正在寻找的是

```
$result = mysql_query($query);
$row = mysql_fetch_array($result);
$id2 = $row[0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T14:12:48.073

请改正：

1.  `$id2 = mysql_query($sql);`您需要处理 $id2 数组的结果以获取所需的变量。

2.  `if ($id = $id2) {`...并`if ($id = $_GET['id']) {`使用`==`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-10T14:20:01.473

`$id`不是数字。这是一个mysql资源。

```
 <?php

$random = uniqid();

if ($id == $_GET['id']) { //<-------Check this double '=='

$dbhandle = mysql_connect('host', 'user', 'password')
 or die("Unable to connect to MySQL");
$selected = mysql_select_db('a6675286_main',$dbhandle)
or die("Could not select database");

$sql = "SELECT completed FROM authentication WHERE username='admin'"; 
$result = mysql_query($sql) or die(mysql_error()); //<------------ it is a mysql resource
$row = mysql_fetch_assos($result);
$id2 = $row['completed']; //<----- Now the value comes

}

if ($id == $id2) { //<-------Check this double '=='
 mysql_query("UPDATE authentication SET completed = $random WHERE username = 'admin'");
 include 'sendmail.php';
echo "You win";
}
else {
header('Location: http://www.websites.com/');
}

?> 
```

*   '=' 是分配运算符。这意味着左边的操作数被设置为右边表达式的值。

*   '==' 和 '===' 是比较运算符。

    *   x == y（相等）

    *   x===y （相同）它也检查类型。

# powershell - 我的 powershell 脚本在我的预期输出之前打印了一个“1”。为什么？

> ID：10535816
> 
> 赞同：8
> 
> 时间：2012-05-10T14:10:19.167
> 
> 标签：powershell, powershell-2.0

我编写了一个简单的 powershell 脚本，它检查 PSA 服务板上的票数并输出票数和与之相关的颜色。但是，我的脚本在结果之前打印了一个“1”。我对powershell很陌生，我似乎找不到可以打印这个的行。任何帮助，将不胜感激。谢谢

```
$SqlServer = "server"
$SqlCatalog = "database"
$SqlQuery = "SELECT COUNT(*) FROM v_rpt_Service WHERE Board_Name = 'Traige' AND Parent = ''"
$SqlConnection = New-Object System.Data.SqlClient.SqlConnection
$SqlConnection.ConnectionString = "Server = $SqlServer; Database = $SqlCatalog; uid = user; pwd = pass"
$SqlCmd = New-Object System.Data.SqlClient.SqlCommand
$SqlCmd.CommandText = $SqlQuery
$SqlCmd.Connection = $SqlConnection
$SqlAdapter = New-Object System.Data.SqlClient.SqlDataAdapter
$SqlAdapter.SelectCommand = $SqlCmd
$DataSet = New-Object System.Data.DataSet
$SqlAdapter.Fill($DataSet)
$SqlConnection.Close()
$value = $DataSet.Tables[0].Rows[0][0]
$color = "Red"
if($value -lt 4){
$color = "Yellow"
}
if($value -lt 1){
$color = "Green"
}

$obj = new-object System.object
add-member -inputobject $obj -membertype NoteProperty -Name Tickets -value $value
add-member -inputobject $obj -membertype NoteProperty -Name Color -value $color 
$obj 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T14:19:53.983

```
$SqlAdapter.Fill($DataSet) | Out-Null 
```

在此处阅读有关[DbDataAdapter.Fill](http://msdn.microsoft.com/en-us/library/zxkb3c3d.aspx)及其返回值的信息：

类型：System.Int32 在 DataSet 中成功添加或刷新的行数。这不包括受不返回行的语句影响的行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T15:09:51.447

这是一种在不使用管道的情况下强制转换为 void 的替代方法。出于性能原因，应避免使用管道。

```
[void] $SqlAdapter.Fill($DataSet); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:20:31.737

您应该能够通过注入一些仅打印出一些文本的行来将其缩小到实际行。找到实际行后，您可以通过“out-null”命令行开关对其进行管道传输，以抑制输出。

[http://technet.microsoft.com/en-us/library/dd315279.aspx](http://technet.microsoft.com/en-us/library/dd315279.aspx)

# javascript - Javascript：向上和向下四舍五入到最接近的 5，然后找到一个公分母

> ID：10535817
> 
> 赞同：19
> 
> 时间：2012-05-10T14:10:20.057
> 
> 标签：javascript, jquery, rounding

我正在寻找一种方法来向上和向下舍入到最接近的 5，然后找到这两个数字的一​​个很大的公分母。我需要它作为图表上 y-skale 的标题。

到目前为止，这是我的代码：

```
function toN5( x ) {
    var i = 1;
    while( x >= 100 ) {
        x/=10; 
        i*=10;
    }
    var remainder = x % 5;
    var distance_to_5 = (5 - remainder) % 5;
    return (x + distance_to_5) * i;
} 
```

目标是这样的：最大值（四舍五入到最接近的 5）

```
1379.8 -> 1500 
```

反之亦然 - 最小值（向下舍入到最接近的 5）

```
41.8 -> 0 
```

然后我想找到一个共同的分母，比如 250 或 500

> 0 -> 250 -> 500 -> 750 -> 1000 -> 1250 -> 1500

或者：

```
0 -> 500 -> 1000 -> 1500 
```

有没有办法做这样的事情？非常感谢

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-10T14:18:00.727

如果要将*x*舍入到最接近的 500，可以将其除以 500，将其四舍五入到最接近的整数，然后再次乘以 500：

```
x_rounded = 500 * Math.round(x/500); 
```

要将其四舍五入到最接近的*y*，请将 500 替换为*y*：

```
x_rounded = 250 * Math.round(x/250); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T14:29:36.193

希望我的数学是正确的，但这里有各种“四舍五入”的方法

```
function sigfig(n, sf) {
    sf = sf - Math.floor(Math.log(n) / Math.LN10) - 1;
    sf = Math.pow(10, sf);
    n = Math.round(n * sf);
    n = n / sf;
    return n;
}

function precision(n, dp) {
    dp = Math.pow(10, dp);
    n = n * dp;
    n = Math.round(n);
    n = n / dp;
    return n;
}

function nearest(n, v) {
    n = n / v;
    n = Math.round(n) * v;
    return n;
} 
```

[演示](http://jsfiddle.net/2wUX6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-04T00:39:06.223

使用[此 api](https://smittycraft.github.io/apis/math.js)，您可以使用以下命令将任何数字向上或向下四舍五入为任何数字的最接近的倍数：

`$scm.round(number to be rounded).toNearest(multiple to which you want to round);`

例如，如果您想将 536 舍入到最接近的 500，您可以使用：

`$scm.round(536).toNearest(500);`

# c# - 使用 Linq 选择不同的行

> ID：10535820
> 
> 赞同：0
> 
> 时间：2012-05-10T14:10:25.610
> 
> 标签：c#, linq

我目前正在使用以下内容返回一个列表

```
Test.GetPrevList(Current.Id, UserId); 
```

此列表有 5 列 `User ID` `First Name` `Last Name` `Department` `Week`

我注意到的是，如果员工调换部门，他们会在名单上出现两次。

我想要做的是根据最近一周列选择最近的记录，使用Linq作为存储过程多次使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:24:30.300

您可以按周对用户进行排序，然后按 ID 对它们进行分组并选择每个组中的第一个用户：

```
var userList = Test.GetPrevList(Current.Id, UserId);
var users = userList.OrderByDescending(x => x.Week)
                    .GroupBy(x => x.UserId)
                    .Select(x => x.First()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:12:19.360

也使用简单的 LINQ 调用`Distinct()`

Distinct 也可以与`IEqualityComparer`, like一起使用

```
IEnumerable<User> users =  users.Distinct(new UserComparer()); 
```

其中`UserComparer`实现了一些自定义比较逻辑的类。

# matlab - 如何将逗号分隔的字符串转换为matlab中的字符串元胞数组

> ID：10535821
> 
> 赞同：4
> 
> 时间：2012-05-10T14:10:25.873
> 
> 标签：matlab

我有以下字符串

'A B C D'

我想从中制作一个单元格数组，例如

{ 'A B C D' }

我怎么能在 Matlab 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T14:22:09.773

这是一个解决方案，它将以逗号、分号或空格分割字符串，并且适用于任何长度的字符串

```
string = 'A, BB, C'

tmp = regexp(string,'([^ ,:]*)','tokens');
out = cat(2,tmp{:})

out = 

    'A'    'BB'    'C' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T14:14:49.897

对于您的具体示例，请尝试：

```
cellstr(strread('A, B, C, D','%c,'))' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-24T02:29:30.763

更简单的方法： t1 = strsplit('A, B, C, D', ',');

# android - 禁用光束触摸模式

> ID：10535823
> 
> 赞同：1
> 
> 时间：2012-05-10T14:10:30.150
> 
> 标签：android, nfc, android-beam

我有一个应用程序，其中一个特殊的 Activity A 能够传输数据：

当 Device1 在 Activity A 并且你和 Device2 配对时（无论 Device2 在哪里，即使应用程序没有启动），Beam touch 后数据传输成功。活动 A 有意图过滤器：

```
 <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="application/de.my.app" />
        </intent-filter> 
```

on 做必要的推动。

但是当我在另一个活动 B 中时，这也使得

1.  另一台设备启动应用程序
2.  如果应用程序已启动，则在两台设备上都显示触摸模式。我现在不希望任何设备有改变来做光束。如果您在 Android 桌面上并配对设备，您也不会获得光束对话框。你只是得到一个小的振动。这就是我想要的。可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T20:28:59.587

在 Activity B 中，您可以打开前台调度、忽略任何 NFC 意图并禁用发送 Android Beam 消息：

```
private NfcAdapter nfcAdapter;

protected void onCreate(Bundle savedInstanceState) {
  ...
  nfcAdapter = NfcAdapter.getDefaultAdapter(this);
  // turn off sending Android Beam
  nfcAdapter.setNdefPushMessage(null, this);
}

protected void onResume() {
  // catch all NFC intents
  Intent intent = new Intent(getApplicationContext(), getClass());
  intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
  PendingIntent pIntent = PendingIntent.getActivity(getApplicationContext(), 0, intent, 0);
  nfcAdapter.enableForegroundDispatch(this, pintent, null, null);
}

protected void onPause() {
  nfcAdapter.disableForegroundDispatch(this);
}

protected void onNewIntent(Intent intent) {
  if(NfcAdapter.ACTION_TAG_DISCOVERED.equals(intent.getAction()) {
    return; // ignore NFC intents
  }
} 
```

`Ndef`您可以通过仅过滤中的技术`PendingIntent`和/或检查对象支持的`onNewIntent()`其他技术来使这一点更加具体。`Tag`Android Beam 意图始终拥有该`Ndef`技术，而没有其他技术。

# c# - 使用 OpenSSL .Net 检索证书

> ID：10535824
> 
> 赞同：7
> 
> 时间：2012-05-10T14:10:31.747
> 
> 标签：c#, .net, openssl

我想使用 OpenSSL .Net 包装器将证书从远程服务器检索到我的 C# 代码。本质上，我想复制

```
openssl s_client -connect 192.168.254.13:636 -showcerts 
```

.. 最终将结果带入 X509Certificate。这可能吗，如果可以的话，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T08:58:28.603

我认为这个问题有两个部分：

1.  你如何检索服务器的证书
2.  你如何检索证书的链

要重新检索服务器的证书，请使用 SslStream，其方法类似于 .NET 自己的[SslStream](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx)

```
var serverName = "...;
var client = new TcpClient(serverName, 443);            

// Create an SSL stream that will close the client's stream.
using (var sslStream = new SslStream(client.GetStream(),true))
{
    sslStream.AuthenticateAsClient(serverName);                
    var serverCertificate = sslStream.RemoteCertificate;
 } 
```

OpenSSL.Net 似乎无法检索证书的链。-showcerts 参数使用OpenSSL.NET中未实现的[SSL_get_peer_cert_chain函数。](http://www.openssl.org/docs/ssl/SSL_get_peer_cert_chain.html)

如果您不介意混合 OpenSSL.Net 和内置 .NET 类，您可以将 OpenSSL.Net 证书转换为 .NET 证书并使用 .NET 的[X509Chain.Build](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509chain.build.aspx)检索链。[您可以使用 .NET 证书的RawData](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.rawdata)属性将 .NET 证书转换回 OpenSSL.NET 证书。

```
var managedCert = new System.Security.Cryptography.X509Certificates.X509Certificate2(serverCertificate.DER);
var chain = new System.Security.Cryptography.X509Certificates.X509Chain();
chain.Build(managedCert);

foreach (var element in chain.ChainElements)
{
    var raw = element.Certificate.RawData;
    using (var bio = new BIO(raw))
    {
        var oc = OpenSSL.X509.X509Certificate.FromDER(bio);
    }
} 
```

也许您可以使用 .NET 的 SslStream 和 X509Certificate2 对象来使用原始证书数据执行您想要的操作，而无需使用 OpenSSL.Net。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T10:19:43.363

尝试使用 ServicePointManager.ServerCertificateValidationCallback。这将使用服务器的 X509 证书调用等等

[http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.servercertificatevalidationcallback.aspx](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.servercertificatevalidationcallback.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T20:23:01.257

为了创建与 s_client 相同的功能，您可能必须查看 s_client 的代码。

您可以在 openssl-XYZtar.gz/apps/s_client.c 中找到 s_client

可能 PEM_write_bio_X509 执行 X509Certificate 的“打印”：

```
if (c_showcerts)
    PEM_write_bio_X509(bio,sk_X509_value(sk,i));
} 
```

但也有连接部分...

[ftp://ftp.openssl.org/source/openssl-1.0.1.tar.gz](ftp://ftp.openssl.org/source/openssl-1.0.1.tar.gz)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T03:27:26.057

要获取 CRL，请首先检查证书及其颁发证书以查找包含 URI GeneralName 的 cRLDistributionPoints 扩展。此扩展在 RFC 3280 中定义，它为 CA 指定了一种方式来传达与用于颁发另一个证书的证书相对应的 CRL 的位置。不幸的是，这个扩展被定义为可选的，并且大多数根 CA 不使用它。

# asp.net-mvc - 使用 MVC 4 设置一种用于用户验证的计时器的最佳方法是什么

> ID：10535825
> 
> 赞同：0
> 
> 时间：2012-05-10T14:10:35.937
> 
> 标签：asp.net-mvc, validation, asp.net-mvc-4, remote-validation

我在控制器中为电子邮件验证设置了一些远程验证，以便可以立即验证电子邮件。我希望更进一步，并在用户仍在输入时验证电子邮件。现在，当用户第一次将焦点从文本框移开时，它会验证，但如果他们回到文本框，它将在按键上进行验证。有没有办法使用不同的触发器设置远程验证？也许甚至是一个键，但经过一定时间后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:13:33.097

`setTimeout`在运行验证代码之前，您可以使用基本的 Javascript 来完成此操作。

一个使用 jQuery 的简单示例：

```
$('#myElement').keyup(function(){
     setTimeout(ValidationFunction,1000);
}); 
```

如果您需要在按下某个键时清除超时，您可以执行以下操作：

```
var myTimeoutFunction;

$('#myElement').keyup(function(){
         myTimeoutFunction = setTimeout(ValidationFunction,1000);
    });

$('#myElement').keydown(function(){
     window.clearTimeout(myTimeoutFunction);
}); 
```

[这是一个工作示例](http://jsfiddle.net/PKSDx/)

# javascript - 加载具有modernizr javascript代码的html页面的SyntaxError

> ID：10535826
> 
> 赞同：1
> 
> 时间：2012-05-10T14:10:56.080
> 
> 标签：javascript, jquery, html, modernizr

我遇到了[这个](http://jsfiddle.net/dsbonev/cCCZ2/)使用**[Modernizr](http://modernizr.com/)**库的页面。我无法弄清楚它是如何工作的。在 jsfiddle 页面中，它可以毫无问题地工作。我将所有代码放入[test.js](http://pastebin.com/HCN0Y6XX)文件中，并`<head> element`使用`<script type="text/javascript" src="test.js" ></script>`..

我无法弄清楚当 html 页面加载时如何加载这个 javascript。当我加载[html 页面](http://pastebin.com/zDr9PRp7)`firebug`时`chrome version 18.0.1025.162`，我`line55`得到一个错误`Uncaught SyntaxError: Unexpected token ILLEGAL`

我正在使用`jquery`'s`$(document).ready()`方法来初始化我的大多数其他 javascript 函数。但我不知道如何将上述代码与 jquery 一起使用。

一些javascript专家可以提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:51:34.267

第 55 行有一个非法字符，这可能是从 jsfiddle 复制和粘贴的产物。它在我的 IDE 中不可见，但如果您单击控制台中出现的 test.js 链接以及错误，您应该会看到突出显示的字符。我删除了 test.js 中最后一个分号和文档末尾之间的所有内容以消除错误。

# php - PHP 中的 div 类和样式一起使用

> ID：10535827
> 
> 赞同：0
> 
> 时间：2012-05-10T14:10:56.623
> 
> 标签：php, css-tables

我尝试将 div 类和样式放在一起，但不知何故样式不起作用。我没有找到答案..这是代码：

**PHP**

```
<div class="table">
<p><b>TEXT here</b><br />
...</p>
<div class="table_cell" style="width=180px !important; color=red !important;"><p>1<br />2<br />3<br />4<br />5<br />6</p></div>
<div class="table_cell" style="width=645px !important;"><p><b>&euro; 282</b><br /></p></div>
<p>Good luck in the future</p></div> 
```

**CSS**

```
 div.table{
margin: 10px;
padding: 10px;
width: 825px;
border: 1px solid;
background: #E0F8EC;
border-radius:10px;
}

div.table_cell{
margin-top: 10px;
margin-bottom: 10px;
float: left;
} 
```

div 中定义的样式不起作用，除了来自外部 css 文件的样式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T14:12:42.957

在您的样式属性中遵循 css 语法：

```
style="width:180px; color:red;" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:13:07.373

在您的样式中，使用您在 CSS 中使用的相同`name:value;`语法（注意两者之间的冒号 (:)：

```
<div class="table">
<p><b>TEXT here</b><br />
...</p>
<div class="table_cell" style="width:180px !important; color:red !important;"><p>1<br />2<br />3<br />4<br />5<br />6</p></div>
<div class="table_cell" style="width:645px !important;"><p><b>&euro; 282</b><br /></p></div>
<p>Good luck in the future</p></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:13:17.497

语法类似于`width: 100px !important`而不是`width=100px !important`

# c# - 编辑包含引号的注册表字符串

> ID：10535840
> 
> 赞同：3
> 
> 时间：2012-05-10T14:11:51.170
> 
> 标签：c#, string, registry

我有一个包含必须编辑的双引号的注册表字符串。我知道 \" 忽略引号或其他任何内容。我尝试了逐字字符串文字，但这给了我 30 多个错误。有人有什么建议吗？这是代码块：

```
 RegistryKey mavroKey = Registry.LocalMachine;
    RegistryKey mavbridgeKey = mavroKey.OpenSubKey("SYSTEM\\CurrentControlSet\\services\\MavBridge\\", true);
    mavbridgeKey.SetValue("ImagePath", " ", RegistryValueKind.String);
    mavbridgeKey.Close(); 
```

字符串值为

```
 "C:\Mavro\MavBridge\Server\MavBridgeService.exe" /service /data "..\Data" 
```

谢谢特雷弗·海因斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:14:11.010

使用逐字字符串时，如果您想使用引号，您只需键入两次：

```
@"""C:\Mavro\MavBridge\Server\MavBridgeService.exe"" /service /data ""..\Data""" 
```

使用普通字符串时，您可以使用`\"`包含引号和`\\`反斜杠：

```
"\"C:\\Mavro\\MavBridge\\Server\\MavBridgeService.exe\" /service /data \"..\\Data\"" 
```

# c# - MVC 刷新视图

> ID：10535851
> 
> 赞同：1
> 
> 时间：2012-05-10T14:12:15.220
> 
> 标签：c#, asp.net-mvc-3, asynchronous

我有一个控制器，如下所示，它会触发一堆电子邮件：

```
 public ActionResult Index()
    {
        ViewBag.Message = "Email Results.";

        emailQueue.emailQueueCompleted += EmailsCompleted;
        emailQueue.Run();

        List<EmailError> emails = new List<EmailError>();

        return View(emails);
    } 
```

但是 emailQueue.Run() 是一个异步任务，在呈现视图时尚未完成。当它随后完成时，它在下面的同一控制器中调用此方法：

```
 public void EmailsCompleted(List<EmailError> errors)
    {
        if (errors.Count > 0)
        {
            // Do some stuff

           // Re-render view with updated errors if possible
        }
    } 
```

无论如何，我的问题是，在电子邮件队列完成其任务后，一旦我得到更新的错误列表，我是否可以轻松地在此控制器中重新渲染视图？或者，我是否应该等待电子邮件完成，然后再尝试最初呈现视图（请记住，这可能是一个相当长的耗时过程）。一如既往地欢迎提出建议，因为 MVC 通常不是我热衷于研究的领域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:25:04.167

您的架构似乎有点错误。您实际上是在问“我如何进行客户端更新以显示运行何时完成？”

您应该考虑改变周围的事物；首先呈现您的视图，然后调用一些 ajax 开始发送电子邮件。然后，一旦发送了电子邮件，页面就会返回响应（记住在您的 ajax 调用上设置超时以等待更长时间），然后可以适当地呈现新元素。

**此外**

通常，这类事情可能最好不要放在 Web 应用程序中，并且更适合 Windows 服务。然后，您可以简单地呈现一个页面，指示通过基于您的数据库状态的页面发送的批次的状态。

# java - 我什么时候应该使用 error.printStrackTrace() 而不是 log4.j.error()

> ID：10535854
> 
> 赞同：2
> 
> 时间：2012-05-10T14:12:27.207
> 
> 标签：java, logging, log4j

我什么时候应该打印错误`Throwable.printStackTrace()`而不是使用 log4j 方法`error(String, Throwable)`？

区别在哪里，共同用途是什么？

//欢呼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:22:33.983

[Throwable.printStackTrace()](http://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html#printStackTrace%28%29)将您的堆栈跟踪打印到标准错误，而 log4j 方法将在您喜欢的位置打印它。[您可以通过log4j 配置文件](http://logging.apache.org/log4j/1.2/manual.html)指定何时以及如何打印堆栈跟踪。

第二种方法是最好的方法，因为您始终可以决定将错误写入标准错误，同时也可以将其打印到滚动文件中。您的缺点是您需要在项目中使用 log4j 依赖项，但也有使用 log4j 的解决方案而不声明此依赖项并仅在运行时提供它。

编辑：一个常见的用途是使用 log4j api 在代码中写入日志，并在部署应用程序的位置配置 log4j。另一种方法是使用 java.util.logging 编写它们以避免任何直接依赖，您可以使用[slf4j](http://www.slf4j.org/)桥从您和第 3 方代码中捕获任何日志并将其传递到您喜欢的日志记录 API（即 log4j）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T14:22:52.780

通常你不会这样做，因为它会将错误打印到标准错误输出。如果您不保留此消息（文件或数据库），则关闭控制台后它就会消失。

> 将此 throwable 及其回溯打印到标准错误流。

相反，您想要的是通过[Logger.error(String, Throwable)](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Category.html#error%28java.lang.Object,%20java.lang.Throwable%29)记录到文件中，并且您可以在调试生产问题时找到该日志文件。除此之外，使用 log4j，您可以根据不同的环境配置日志级别以显示在日志中，例如，在生产中，您可能只记录级别信息、警告和错误级别，而在开发过程中，您也记录调试语句.

> 使用 ERROR 级别记录一个消息对象，包括作为参数传递的 Throwable t 的堆栈跟踪。

最常见的用途是通过记录器进行，除非在生产中您根本不记录任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:22:15.057

如果您正在记录，请使用 Log4J 方法。您将掌握在**何处以及是否**希望在文件/控制台/中显示/读取日志...您可以选择调试级别以显示/隐藏某些信息

Throwable.printStackTrace 只会将堆栈跟踪发送到标准错误流。

此外，使用 Log4J，您可以轻松“简化”消息并让用户/开发人员知道发生了什么。

编辑：您可能想看看 SLF4J，它可以让您非常轻松地更改日志记录后端（在您的情况下为 LOG4J）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T14:24:56.587

`Throwable.printStackTrace()`您优先使用日志记录的唯一情况是：

*   当您*不能*使用日志记录时（出于某种原因），
*   当您*总是*让用户看到堆栈跟踪时（出于某种原因），或者
*   当您在调试时，需要快速而肮脏的堆栈跟踪。

> 区别在哪里，共同用途是什么？

基本上，差异在更高的水平。`System.err.println`这是使用日志框架进行日志记录或使用语句进行日志记录之间的区别。

前者有许多优点，您会在各种日志框架的文档和 javadocs 中找到很好的描述。主要的有：

*   简单的细粒度伐木控制；例如级别、类别等，
*   许多用于记录和格式化日志信息的选项，以及
*   使用配置文件的广泛的开箱即用可配置性。

诚然，小型应用程序可能不需要所有这些，但如果您的应用程序需要进行日志记录，那么使用日志记录框架可以免费为您提供这些，而开发或性能开销最小。

# javascript - Jasmine：为什么我的断言没有在我的回调中执行

> ID：10535860
> 
> 赞同：0
> 
> 时间：2012-05-10T14:12:39.563
> 
> 标签：javascript, node.js, asynchronous, mongoose, jasmine

我正在使用 Jasmine 来测试一些代码。一切正常，除了最后一个断言。有人可以帮我吗？

```
var mongoose = require("mongoose")
  , db = mongoose.connect('mongodb://localhost/database')
  , Schema = mongoose.Schema;;

describe('Lockmanager', function() {

  var status;

  var Test = new Schema({
    name: String
  });
  var testModel = mongoose.model('Test', Test);
  var LockManager = require('locks').buildLockManager().getManager(testModel, 10000);

  var newTestModel = new testModel({
    name: "Test"
  });

  it('should set a lock on an arbitrary mongoose model', function() {

    this.after(function() {
      testModel.remove({}, function(err, numAffected) {
        status = 'collectionRemoved';
      });
    });

    runs(function() {
      newTestModel.save(function(err) {
        expect(err).toBeNull();
        status = 'hasBeenSaved';
      });
    });
    waitsFor(function() {
      return status == 'hasBeenSaved';
    });

    runs(function() {
      LockManager.requestLock(newTestModel._id, function(err, response) {
        expect(err).toBeNull();
        status = 'readyToBeReleased';
      });
    });
    waitsFor(function() {
      return status == 'readyToBeReleased';
    });

    runs(function() {
      LockManager.releaseLock(newTestModel._id, function(err) {
        expect(err).toBeNull();
        status = 'readyToBeDeleted';
      });
    });

    waitsFor(function() {
      return status == 'readyToBeDeleted';
    })

  });

  it('should delete all test entries after the test', function() {

    waitsFor(function() {
      return status == 'collectionRemoved';
    });

    runs(function() {
      testModel.find({}, function(err, res) {
        expect(res.length).toEqual(0);
        status = 'allDone';
      });
    });

    /*** This waitsFor fixed the problem ***/
    waitsFor(function() {
      return status == 'allDone';
    });

  });

}); 
```

结果日志是这样的：

> jasmine-node spec/lockmanager.spec.js 已获得“4fabcae0b563859269000001”的锁定。.为“4fabcae0b563859269000001”释放了锁。.
> 
> 0.031 秒内完成 2 次测试，3 次断言，0 次失败
> 
> 这已被执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:32:31.043

事实证明，在最后一次“运行”之后，我需要另一个“waitsFor”，以确保在显示结果之前完全执行断言。哦，newTestModel应该是后功能中的testModel。

原始问题中的修改代码。

# mongodb - 使用空间数据库查找包含点的多边形

> ID：10535863
> 
> 赞同：1
> 
> 时间：2012-05-10T14:12:46.997
> 
> 标签：mongodb, spatial, spatial-query, spatial-index, database

我正在使用 MongoDB 来存储空间记录。有些记录是多边形，有些是点。不断插入数据。

我需要能够访问其多边形包含一个点的所有记录。Mongo 的空间查询允许查找多边形内的所有点，但不是所有包含点的多边形。在 MongoDB 另一个数据库系统中是否有一个好方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:44:15.693

不幸的是，目前没有办法运行这个查询——除非您愿意简化应用程序（即，假设所有多边形都是具有特定半径[或小半径]的圆）。

您描述的功能有一张开放票： [https ://jira.mongodb.org/browse/SERVER-2874](https://jira.mongodb.org/browse/SERVER-2874)

# asp.net-mvc - ASP.NET 4.5 + EF CodeFirst - 内置用户的新模型

> ID：10535864
> 
> 赞同：0
> 
> 时间：2012-05-10T14:12:47.733
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

如何使用 asp.net mvc 4.5 中的内置用户（System.Web.Security.MembershipUser）

模板项目，

有什么新型号吗？

例如，我想用注册的 MembershipUser(s) 创建一个帖子/论坛模型，

如何使用 EF Code First（使用最新版本 EF5 + Visual Studio 2011 express web beta）来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:52:15.140

您将 Guid 属性添加到您的`Post`并且`Forum`将引用您的会员用户。如果您想在数据库中具有参照完整性，您将创建自定义数据库初始化程序，该初始化程序将通过执行自定义 SQL（类似于[此](https://stackoverflow.com/questions/5701608/unique-key-with-ef-code-first/5701702#5701702)）在您的 Posts 和 Forums 表和 MembershipUsers 表之间创建参照约束，或者您将将此参照约束添加到 EF 迁移。`MembershipUser`类不能被 EF 映射。

Guid 属性应该包含来自`ProviderUserKey`您的会员用户的值 - 在默认情况下应该是您的用户的唯一标识符`SqlMembershipProvider`。

# command-line - 可以从调用到 cmd 文件中的标签获取一些数据吗？

> ID：10535867
> 
> 赞同：0
> 
> 时间：2012-05-10T14:12:52.317
> 
> 标签：command-line, batch-file, windows-xp, cmd

这个例子不起作用：

```
call :testcall > %output%
goto :eof

:testcall
  echo return
goto :eof

:eof 
```

我需要那个`%output%`包含的`return`字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:47:32.157

尝试

```
(
     call :testcall
) >output.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T20:04:12.553

我假设，您想要`return`变量中的文本`output`，而不是名为`output`!? 的文件​​中的文本。

有两种*常见的*方法可以得到这个：
`For/F`和`set/p`

```
@echo off
call :testcall > outfile.tmp
< outfile.tmp set /p myVariable=
set myVar
goto :eof

:testcall
  echo return
goto :eof 
```

set/p 也可以读取多行，当您将其括在括号中时

```
@echo off
call :testcall2 > outfile.tmp
< outfile.tmp (
   set /p myVariable1=
   set /p myVariable2=
   set /p myVariable3=
)
set myVar
goto :eof

:testcall
  echo return line1
  echo content2
  echo content3
goto :eof 
```

您还可以将`For/F`数据读入变量，并且您不需要任何临时文件。

```
@echo off
for /F "delims=" %%A in ('echo return') DO set myVariable=%%A
set myVar 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:50:39.803

只要变量`output`定义正确，它就可以工作。

```
@echo off
set output=test.txt
call :testcall > %output%
goto :eof

:testcall
  echo return
goto :eof

:eof 
```

***编辑***

我想我可能误解了这个问题。我假设 OP 正在尝试创建一个文件。但我相信杰布的答案有正确的解释，还有一个很好的答案。

# mysql - mysql_real_escape_string 错误

> ID：10535871
> 
> 赞同：0
> 
> 时间：2012-05-10T14:13:10.977
> 
> 标签：mysql, database, mysql-real-escape-string

我越来越`Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: Access denied for user 'username'@'localhost' (using password: NO)`

这是我的代码..

```
<?php
include 'config.php';
$email = mysql_real_escape_string($_GET['email']);

$validation = filter_var($email, FILTER_VALIDATE_EMAIL);
if ( $validation ) {
    // Make a MySQL Connection
    mysql_connect($Host,$Username,$Password) or die(mysql_error());
    mysql_select_db($Database) or die(mysql_error());

    // Insert rows
    mysql_query("INSERT INTO formusers
    (formemail) VALUES('$email') ") 
    or die(mysql_error()); 
}
?> 
```

如果我移动线路以建立数据库连接，它确实有效。使用前是否需要建立数据库连接，`mysql_real_escape_string`还是我做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:14:44.780

是的，您确实需要一个开放的 mysql 连接才能做到这一点。

我建议您将 mysql_connect() 放在脚本的顶部，以确保永远不会发生此错误。（当然，如果您错误地连接到数据库，它仍然会发生）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:18:02.453

是的，这是必需的。

> 笔记：
> 
> 在使用 mysql_real_escape_string() 之前需要 MySQL 连接，否则会生成 E_WARNING 级别的错误，并返回 FALSE。如果未定义 link_identifier，则使用最后一个 MySQL 连接。

[http://php.net/manual/en/function.mysql-real-escape-string.php](http://mysql_real_escape_string%20Doc)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T14:19:59.507

如果您无法建立 mysql 连接，您可以使用：

[mysql_escape_string](http://php.net/manual/en/function.mysql-escape-string.php)

但是：自 PHP 5.3.0 起已弃用！

如果可能，请始终使用`mysql_real_escape_string`！

# c++ - 使用 boost::threads 传递消息？

> ID：10535873
> 
> 赞同：1
> 
> 时间：2012-05-10T14:13:14.880
> 
> 标签：c++, boost

boost 是否有某种方法可以使消息跨多个线程传递？

我正在开发一个服务器应用程序，我希望能够以安全的方式在整个应用程序中传递消息。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:22:33.890

您也可以为此目的使用 Boost.Asio：在一个线程中运行 io_service，并从另一个线程调用 io_service_.post(yourFunctor)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T14:16:24.937

`boost::thread`提供了您需要的工具，这里有一个示例队列实现[可以](http://www.justsoftwaresolutions.co.uk/threading/implementing-a-thread-safe-queue-using-condition-variables.html)帮助您入门。

这也给了我另一个机会来插入这本书。

> C++ Concurrency in Action 是新的 C++ 11 标准的参考和指南，适用于有经验的 C++ 程序员以及从未编写过多线程代码的人。本书将向您展示如何用 C++ 编写健壮的多线程应用程序，同时避免许多常见的陷阱。

如果您使用的是 Windows，则 Visual C++ 10 在[Concurrency Runtime](http://msdn.microsoft.com/en-us/library/ee207192%28v=vs.100%29.aspx)中有一些使用的专有工具。VC11 对此进行了扩展。

# sql - 增加列值

> ID：10535874
> 
> 赞同：0
> 
> 时间：2012-05-10T14:13:15.483
> 
> 标签：sql, db2

我正在尝试增加列的值并以线程安全的方式将其返回给调用者，尽管我在论坛中看到了许多对此提出的解决方案，但我还没有看到一个可以确保两个不同客户的解决方案数据库不会得到相同的结果。我将要创建的表如下所示：

```
Column Name    Data Type
-----------    --------------
Description    varchar(50)
CurrentValue   int 
```

表中的数据将如下所示：

```
Description           CurrentValue
----------------      ---------------------
Billing               123422
Policy                28383 
```

因此，有了这些信息，我如何以线程安全的方式（没有竞争条件）增加 CurrentValue 列中的值并将其返回给导致它增加的用户？

我很确定我将在其上运行的平台是 DB2，而客户端将是 Java 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:16:29.630

数据库序列（[Oracle DBMS 中的示例](http://www.java2s.com/Code/Oracle/Sequence/Sequencecurrentvalueandnextvalue.htm)）至少应该在 PostgreSQL、MS SQL 和 Oracle 中处理这个问题。因此，您的具有递增编号的列应该是`ID`从其绑定的序列中读取其值的列（或原则上类似的列）。

每次 a `SELECT`（即*read*）出现在序列上时，它的值都会递增，无论您稍后对该值做什么。

# node.js - 在 forEach 循环中等待...延迟

> ID：10535877
> 
> 赞同：3
> 
> 时间：2012-05-10T14:13:27.873
> 
> 标签：node.js, coffeescript, mongoose, iced-coffeescript

此代码应该返回 12334 还是 12433 ？

我期望 12334 但它给出了 12433 ......

```
console.log '1'
anArray.forEach (info, index, array)->
  console.log '2'

  await model.findOne info, defer(err, doc)
  console.log '3'

console.log '4' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T15:05:53.927

您的直觉不正确：IcedCoffeeScript`await...defer`不能阻止同步`forEach`循环。

请记住，IcedCoffeeScript 编译为不支持阻塞的 JavaScript。一旦你调用`forEach`了一个数组，你就承诺在触发任何事件之前遍历整个数组。

好消息是，您可以通过使用 IcedCoffeeScript 自己的循环构造来获得所需的行为。在你的情况下，

```
for info, index in anArray ->
  ... 
```

有关处理 JavaScript 的非阻塞事件模型的更多信息，请查看我的新书[*Async JavaScript*](http://leanpub.com/asyncjs/)。

# java - 通过指针指向 Java 对象的 C 结构

> ID：10535880
> 
> 赞同：0
> 
> 时间：2012-05-10T14:13:37.217
> 
> 标签：java, native, jna

我可以访问指向 C 结构的指针的地址。我如何得到它并不重要，我验证并正确接收。

C 定义如下所示：

```
union Data_u
{
  long long u_integer;
  struct another_s u_another;
};
struct Data_s
{
  unsigned long s_Type;
  union Data_u s_Value;
}; 
```

我需要将其映射`Data_s*`到 Java 中的类似结构。我在互联网上搜索并找到了我认为可以使用的[JNA库。](https://github.com/twall/jna)

我没有找到使用 JNA 翻译 Java 结构中的 C 结构的正确方法。我看到我可以定义一个对应的 Java 结构，但是，JNA 用于访问本机调用而不是直接结构转换，尽管它支持它。

具体来说，我找到了一些方法，例如：

`static Structure updateStructureByReference(Class type, Structure s, Pointer address)`

...这将允许我 - 我认为 - 用我拥有的指针地址填充结构。该方法具有**包**访问权限，从这里开始，我将其修改为**公共**，这意味着我将开始**破解**库......

有没有更简单的方法来解决这个问题，可能是在 JNA 本身，或者可能是其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:32:48.237

使用 JNA，您可以轻松地将结构按值传递给 Java，对其进行更新并将其发送回（按值）。

我很确定不可能拥有通过指针映射到 C 结构的 Java 对象，因为 java 和 C 使用不同的内存模型

# java - android用数组添加表格行

> ID：10535882
> 
> 赞同：-1
> 
> 时间：2012-05-10T14:13:40.600
> 
> 标签：java, android, xml, view, row

我目前正在使用列表视图，但这对我不起作用，所以我希望使用表格视图和行来实现相同的效果。例如，我有一个 json 提要和新闻故事，并且为每个新闻故事创建一个包含图像和 textview 的行，并用来自 json 的数据填充它。

所以我的问题是有没有人知道我如何做到这一点的方法？

这是我到目前为止所拥有的：

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white">

   <include layout="@layout/header" />
   <include layout="@layout/redcell" />

   <TableRow

       android:id="@+id/tableRow1"
       android:layout_width="wrap_content"
       android:layout_height="100dp" >

      <TextView

        android:id="@+id/fixtures_text"
        android:layout_width="match_parent"
        android:layout_height="60dp"

        android:gravity="center"
        android:text="@string/leagues"
        android:textColor="@color/white"
        android:textSize="25dp"
        android:textStyle="bold"/>

   </TableRow>

   <include layout="@layout/redcell" />

   <TableRow
       android:id="@+id/tableRow2"
       android:layout_width="wrap_content"
       android:layout_height="100dp" >

      <TextView

        android:id="@+id/_text"
        android:layout_width="match_parent"
        android:layout_height="60dp"

        android:gravity="center"
        android:text="@string/leagues"
        android:textColor="@color/white"
        android:textSize="25dp"
        android:textStyle="bold"/>

   </TableRow>

    <include layout="@layout/redcell" /> 
```

活动：

```
public class HomeActivity extends ListActivity {

    private static final String apiKey = "67htj4455jsd345jj956id"; 
    private static final String apiUser = "android";
    private static final String ChosenTeam = null;
    private static String ChosenMethod = null; 
    public String fulldata = null;
    public String chosenLeagueId = "40";
    public List<String> newsList = null;
    public int newsAmount = 0;
    private static final String ChosenMethodPref = null;

    long unixTimeStamp = System.currentTimeMillis() / 1000L;

    //add Time Stamp to URL

    //public String chosenMethod; 

    String newsFeedRequest = "1.0/website/" + chosenLeagueId + "/news?timestamp=" + unixTimeStamp;
    String fixturesFeedURL = "https://www.example.com/_services/api/" + newsFeedRequest;

    private static String buildHmacSignature(String pKey, String pStringToSign)
    {
      String lSignature = "None";
      try
      {
        Mac lMac = Mac.getInstance("HmacSHA256");
        SecretKeySpec lSecret = new SecretKeySpec(pKey.getBytes(), "HmacSHA256");
        lMac.init(lSecret);

        byte[] lDigest = lMac.doFinal(pStringToSign.getBytes());
        BigInteger lHash = new BigInteger(1, lDigest);
        lSignature = lHash.toString(16);
        if ((lSignature.length() % 2) != 0) {
          lSignature = "0" + lSignature;
        }
      }
      catch (NoSuchAlgorithmException lEx)
      {
        throw new RuntimeException("Problems calculating HMAC", lEx);
      }
      catch (InvalidKeyException lEx)
      {
        throw new RuntimeException("Problems calculating HMAC", lEx);
      }

      return lSignature;
    }

    public void checkPreferences(){

        SharedPreferences preferences = getSharedPreferences("prefs", Context.MODE_PRIVATE);
        final String ChosenMethodPref = preferences.getString("ChosenMethod", ChosenMethod);
        Log.v("myapp", "ChosenMethod Home = " + ChosenMethodPref);

         if (ChosenMethodPref.equals("Team")) {
             setContentView(R.layout.homeactteam);
             newsAmount = 5;
             TextView redHeaderText = (TextView) findViewById(R.id.redheadertext);
             redHeaderText.setText("Latest League Fixture");

         } else {
             setContentView(R.layout.homeact);
             newsAmount = 10;

         }

}
    public void loadData(){String myhash = buildHmacSignature(apiKey, fixturesFeedURL);

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(fixturesFeedURL);

    List<NameValuePair> pairs = new ArrayList<NameValuePair>();
    pairs.add(new BasicNameValuePair("requestToken", myhash));
    pairs.add(new BasicNameValuePair("apiUser", apiUser));

    try {
        post.setEntity (new UrlEncodedFormEntity(pairs));
        HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        String json = reader.readLine();
        fulldata = String.valueOf(json);
        Log.v("myApp","newsdata" + fulldata);
        newsList = new ArrayList<String>();
        JSONObject obj = new JSONObject(json);    
        JSONObject objData = obj.getJSONObject("data");
        JSONArray jArray = objData.getJSONArray("news");

           for(int t = 0; t < newsAmount; t++){
               JSONObject newsTitleDict = jArray.getJSONObject(t);

               newsList.add(newsTitleDict.getString("title"));

           }

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    setListAdapter ( new ArrayAdapter<String>(this, R.layout.single_item, newsList));

       ListView list = getListView();

        list.setTextFilterEnabled(true);

    }   

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        checkPreferences();
        loadData();

        Button backbtn = (Button) findViewById(R.id.backbtn);

        //Listening to button event
        backbtn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                //Starting a new Intent
                Intent previousScreen = new Intent(getApplicationContext(), ChooseTeamActivity.class);
                ChosenMethod = "null";
                SharedPreferences preferences = getSharedPreferences("prefs", Context.MODE_PRIVATE);
                SharedPreferences.Editor editor = preferences.edit();
                editor.putString("ChosenMethod", ChosenMethod);            
                editor.commit();
                previousScreen.putExtra("FullData", fulldata);
                startActivity(previousScreen);

            }
        });

    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    if (item.getItemId() == R.id.home) {

        startActivity(new Intent(HomeActivity.this, HomeActivity.class));

        return(true);
  }

    if (item.getItemId() == R.id.match) {

        startActivity(new Intent(HomeActivity.this, MatchActivity.class));

        return(true);
  }

    if (item.getItemId() == R.id.teams) {

        startActivity(new Intent(HomeActivity.this, TeamsActivity.class));

        return(true);
  }

    if (item.getItemId() == R.id.twitter) {

        startActivity(new Intent(HomeActivity.this, TwitterActivity.class));

        return(true);
  }

    if (item.getItemId() == R.id.info) {

        startActivity(new Intent(HomeActivity.this, InfoActivity.class));

        return(true);
  }

    return(super.onOptionsItemSelected(item));

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:43:36.540

您可以将扩展 ArrayAdapter 的自定义适配器设置为 ListActivity 使用的适配器。在该自定义适配器的 getView() 方法中，您可以为 newsList 中的每个项目加载图像和文本。

具有水平方向的简单 LinearLayout 可能最适合自定义适配器中的行布局。如果您将 TextView 的 layout_weight 设置为 1 并留下没有 layout_weight 的图像，这会将您的图像推到行的一侧。

# ios - 当我收到 didReceiveMemoryWarning 时，OpenGL 纹理消失了

> ID：10535884
> 
> 赞同：0
> 
> 时间：2012-05-10T14:13:44.453
> 
> 标签：ios, modalviewcontroller

在我的代码中找出这个错误时遇到了很多麻烦。当我的应用程序启动时，我的主 ViewController 有一个 openGL 视图设置为它的视图属性，在：

```
- (void) loadView {
  glView = [[EAGLView alloc] initWithFrame: [[UIScreen mainScreen] bounds]];
  [glView setAnimationFrameInterval: kAnimationFrameInterval];
  [glView startAnimation];

  UIButton *infoButton = [UIButton buttonWithType:UIButtonTypeCustom];

  UIImage *infoImage = [UIImage imageNamed:@"info.png"];
  [infoButton setImage:infoImage forState:UIControlStateNormal];
  [infoImage release];

  infoButton.showsTouchWhenHighlighted = YES;
  [infoButton addTarget:self action:@selector(showInfo) forControlEvents:UIControlEventTouchUpInside];
  infoButton.frame = CGRectMake(0.0f, 0.0f, 48.0f, 48.0f);
  infoButton.clipsToBounds = NO;
  [glView addSubview:infoButton];

  glView.contentMode = UIViewContentModeCenter;

  self.view = glView; 
```

}

并且在

```
- (void)viewDidUnload {

    glView = nil;
   [super viewDidUnload];
} 
```

当用户单击 infoButton 时，此视图控制器会显示一个模态视图控制器（从 showInfo 调用），其中包含一个 tabBarController，里面有更多的 viewController。

我的问题是，每当我在任何 viewController 中收到 didReceiveMemoryWarning 时，我的主 Viewcontroller 中的纹理都会按预期释放，但由于某种原因我无法再次重新加载它们，所以第一次发生这种情况时，我得到了没有纹理的形状，但如果用户再次单击 infoButton 并尝试返回，则应用程序崩溃。

所以我的问题是，我应该不惜一切代价让 glView 保持活动状态，还是应该将其设置为 nil 并在收到此内存警告时释放它？我已经阅读了一些问题和 Apple 文档，说你应该重新创建这些东西。在 didReceiveMemoryWarning 中：

> “您对这种方法的实现应该通过清除稍后可以重新创建（或从磁盘重新加载）的缓存数据对象来释放尽可能多的内存。”

我希望能够在用户返回 openGL 视图之前执行此操作，以便 UI 不会滞后。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:47:16.543

首先，让我注意到调用

```
 glView = nil; 
```

不会向您的 EAGLView 发送释放，因此您在这里有内存泄漏（因为将其分配给 self.view 也会增加其保留计数器）。

你确定那`viewDidUnload`真的叫吗？它应该只用于当前未显示的视图。如果是这样，您能否添加有关崩溃/控制台日志类型等的更多信息？

考虑到泄漏的可能性，我认为该应用程序可能由于内存使用过多而被杀死。一个很好的提示是，如果您`signal (0)`在控制台日志的末尾看到 a。

# android - Android触发HTML按钮从代码中单击WebView

> ID：10535885
> 
> 赞同：0
> 
> 时间：2012-05-10T14:13:46.170
> 
> 标签：android, webview, xamarin.android

我的活动目的是允许用户（员工）将一件设备从一个位置转移到另一个位置。与其期望用户输入长序列/模型或必须从大量现有设备列表中进行选择，我尝试通过显示一个 ASP.Net 页面来帮助用户. 但是，如果所述列表中不存在供他们简单检查的设备，则他们需要能够输入序列/型号信息。我也会将此功能添加到 aspx，但我们可能会在设备上实现条形码，并且我需要能够调用条形码扫描意图。所以我需要能够做以下事情之一：

1) 在 WebView 中单击 HTML 按钮调用条形码意图，并将扫描的值返回到 aspx 页面可以访问的位置以进行最终处理

或者

2) 由于在 ASP 项目中使用 JQuery 在 GridView 中处理检查的行会容易得多，所以我想在执行该操作的页面上放置一个隐藏按钮。然后将可见的提交按钮放在 Activity 中，该按钮将处理在那里添加的任何新设备，并为我在 ASP 中的隐藏按钮触发 Click 事件。

这些事情中的任何一个都可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:50:21.980

好的，所以刚刚意识到我不需要在 WebView 中单击按钮即可在我的 WebView 中执行 JavaScript。我只能做

```
web.LoadUrl("javascript:processTransfer()"); 
```

# macos - dylib 中的可编辑/可修补资源？

> ID：10535887
> 
> 赞同：0
> 
> 时间：2012-05-10T14:14:01.910
> 
> 标签：macos, dylib, mach-o

有没有办法在 Mach-O dylib 中嵌入资源（例如字符串/图像），以便它们在构建后可编辑？类似于 PE 文件中的资源。

我知道我应该改用 Bundles，但请幽默 ;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:18:11.733

您可以使用`-sectcreate`链接器标志将一些数据嵌入到二进制文件中。有关该过程的完整说明，请参阅此[嵌入数据](http://www.alexcurylo.com/blog/2010/10/07/embedding-data/)博客文章。

# html - 使用 HTML 输入数据的正确方法

> ID：10535891
> 
> 赞同：0
> 
> 时间：2012-05-10T14:14:06.237
> 
> 标签：html, positioning, user-input

我使用 ASP.NET。到目前为止，我一直使用表格来输入它们，并且看起来都很好看。但不久前我读到桌子不是为了那个。所以，我想知道，在我的网络表单上放置输入字段的正确方法是什么，但仍然让它们看起来不错，即左对齐控件旁边的右对齐标签，每行可能不止一个，并且下一行，标签和控件与前一个控件对齐。

我唯一能想到的是每个标签/控件一个 div，但这感觉很奇怪......

另外，我的控件应该在`<form>`标签内吗？我从来没有用过它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:46:34.547

在有意义的时候使用表格。具有一列标签和一列输入的表单非常有意义。

老实说，我认为整个“无表布局”运动已经成为一种时尚。我见过人们花费无数时间试图用不同的 HTML 标签重新创建一个表结构，只是说“他们没有使用表”。这很愚蠢，为什么要重新创建已经可以正常工作的东西？

当您开始使用表格布局页面时，使用表格就会出现问题。例如：

**不要这样做**

```
<body>
    <table>
        <tr class="header"><td><!-- header content --></td></tr>
        <tr class="content"><td><!-- page content, possibly with a two column table for sidebar --></td></tr>
        <tr class="footer"><td><!-- footer content --></td></tr>
    </table>
</body> 
```

然而，使用表格来构建表格是非常有意义的。

是的，与您的表单相关的所有控件都应该在`form`标签内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:21:55.643

使用表格来定位项目并没有错。你也可以使用 CSS 来定位，但是你必须处理跨浏览器的支持。就个人而言，我使用表格来处理这种事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:36:16.553

表格只能用于在网页上显示表格数据。它们不应该用于布局。

相反，您应该使用 div 标签来布局页面的不同元素。例如：

```
<div class="Labels">
    <label for="FullName">Name: *</label>
</div>
<div class="Fields">
    <input class="text" type="text" name="FullName" id="FullName" />
</div> 
```

然后，您应该使用 CSS 进行页面布局，以将各种元素放置在页面上您想要它们的位置，并将元素彼此并排放置等。

如果您不熟悉使用 CSS 进行布局，请考虑使用 CSS 浮动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T14:28:19.563

我认为您要问的内容与编写[语义 HTML](http://en.wikipedia.org/wiki/Semantic_HTML)有关。`<TABLE>`标签最初用于呈现表格数据，但被选为在一般布局中使用。这种情况一直持续到今天，尽管 HTML 和 CSS 已经发展为拥有更多的布局选项。

表格对于我们来说很容易理解，具有固定的网格布局。浮动可能需要更多的工作才能理解。

没有对错之分，但许多人为了编写更多语义 HTML，会`<ul><li>`在输入周围使用标签，因为表单输入在某种意义上可以被视为列表。

关于`<FORM>`标签的使用，随着现在 AJAX GETS 和 POSTS 的流行，您并不总是需要它们，但我通常将它们包括在内，这既是为了为后续开发人员制作更多语义代码和提高清晰度的一种手段，但作为一个要使用的容器，这样当我需要使用 jQuery（或您选择的库）选择器时，我可以处理子输入。

# delegates - 同步 + AFNetworking + applicationWillResignActive

> ID：10535900
> 
> 赞同：0
> 
> 时间：2012-05-10T14:14:33.360
> 
> 标签：delegates, sync, afnetworking

在我的 iPad 应用程序中，我使用了一个名为 CloudViewController 的 ViewController 和一个名为 SyncServicesController（单例）的“同步引擎”类。2 与 SyncServicesController 中定义的委托方法进行通信。

我所有的同步都正常工作，并传达了 CloudViewController 发生的情况（登录、拉取、推送、错误......等）。

当用户离开应用程序 (applicationWillResignActive) 时会出现问题。

在 AppDelegate 中，我的代码是：

```
- (void)applicationWillResignActive:(UIApplication*)application
{
  UIBackgroundTaskIdentifier backgroundIdentifier = [application beginBackgroundTaskWithExpirationHandler:^(void) { 
    [application endBackgroundTask:backgroundIdentifier];  
    [[SyncServicesController sharedServices] cancelAllRequests]; 
  }]; 

} 
```

并在 SyncServicesController 中取消所有请求：

```
- (void)cancelAllRequests
{
  NSLog(@"CancelAllRequests");

  [[HTTPClient sharedClient] cancelAllHTTPOperationsWithMethod:@"GET" path:@"webapp/services/pull"];
  [[HTTPClient sharedClient] cancelAllHTTPOperationsWithMethod:@"GET" path:@"webapp/services/pull_items"];
  [[HTTPClient sharedClient] cancelAllHTTPOperationsWithMethod:@"GET" path:@"webapp/services/pull_image"];
  [[HTTPClient sharedClient] cancelAllHTTPOperationsWithMethod:@"POST" path:@"webapp/services/push_item"];  
  [[[HTTPClient sharedClient] operationQueue] cancelAllOperations];

} 
```

当用户离开应用程序时，同步继续执行在 SyncServicesController 中调用的 AFNetworking 块。好的。但是当用户回到应用程序时，它会崩溃。

例如，在 SyncServicesController 中，委托被称为 (EXEC_BAD_ACCESS) ：

```
 AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) 
  {
    [self pullUpdateClientItemsWithServerItems:[JSON valueForKeyPath:@"items"]];
    [delegate syncServicesController:self notifyJob:_T(UPDATING_CLIENT_DATA)];
  } 
  failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON)
  {
  }]; 
```

就像在后台进入时 CloudViewController 被杀死了......当调用 applicationWillResignActive 时管理 SyncServicesController 委托的最佳方法是什么？

# javascript - 使用 Java 脚本验证上传的文件类型

> ID：10535906
> 
> 赞同：0
> 
> 时间：2012-05-10T14:14:58.603
> 
> 标签：javascript, validation, jsp

我通过表单获取文件，并要求验证其类型。但听起来java脚本不起作用或没有看到调用？

```
<form enctype="multipart/form-data" action="Upload2.jsp"
 method="post" onsubmit="javascript:return validate();">
    <td><b>Choose txt file To Upload:</b></td>
    <td><input name="file" type="file"></td>
    <td><input type="submit" value="Upload File" ></td>
</form> 
```

这是脚本：

```
<script language="JavaScript">
    function validate(){
        if(document.form.file.value == "" ) {
            alert("Enter course code !");
            return false;}

        else {
            var value = document.form.file.value;
            var ext = value.substr(dot, value.length);
            //ext = value.slice(file.indexOf(".")).toLowerCase();
            if ( ext=="txt" ) {
                return true; }
            else{
                alert("choose a .txt file");
                return false;}
            }
       }
</script> 
```

这是表格..我不确定我的脚本是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:20:18.147

您可以使用以下方法捕获字符串中最后一个句点之后的内容：

```
ext = value.split(".").pop(); 
```

* * *

你把你的 String`value`拆分成一个数组：

```
var myValue = "some.thing.ext";

var myArray = myValue.split("."); 
```

现在 myArray 是：

```
["some", "thing", "ext"]; 
```

您现在可以使用 弹出数组中的最后一个值`.pop()`。

```
var ext = myArray.pop(); 
```

现在

```
ext === "ext";
myArray === ["some", "thing"] 
```

* * *

在上下文中：

```
function validate(){
    if(document.form.file.value == "" ) {
        alert("Enter course code !");
        return false;}

    else {
        var value = document.form.file.value,
            ext = value.split(".").pop();
        if ( ext == "txt" ) {
            return true; }
        else{
            alert("choose a .txt file");
            return false;}
        }
   } 
```

如果您将 onsubmit 更改为：

```
onsubmit="javascript:return validate(this);" 
```

然后你会得到表单元素作为值的第一个参数：

```
function validate(form){
    var value = form.file.value,
        ext = value.split(".").pop();

    if( !value ) {
        alert("Enter course code !");
    }
    else if ( ext !== "txt" ) {
        alert("choose a .txt file");
    }

    return ( ext === "txt" );
} 
```

* * *

**笔记：**

永远不要使用 javaScript 作为您唯一的验证。使用某种服务器站点语言来确定验证是否通过。

使用 JS 让用户在你的网站上操作更流畅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T06:09:55.050

验证上传文件类型并限制其大小的最佳方法是

```
var ext = $('#uploadFeedback').val().split('.').pop().toLowerCase();
if($.inArray(ext, ['gif','png','jpg','jpeg']) == -1) {
    alert('invalid extension!');
} 
```

以上用于文件类型验证。

```
var uploadedFile = document.getElementById('uploadFeedback');      
var fileSize = uploadedFile.files[0].size; 
```

以上用于文件大小验证

# qt - 如何使 QHBoxLayout 中最右边的框架最宽

> ID：10535907
> 
> 赞同：0
> 
> 时间：2012-05-10T14:15:01.057
> 
> 标签：qt, user-interface, qt4

我在调整大小时遇到​​了问题，特别是，我希望最左边的元素保持相对固定的大小，同时让最右边的元素展开。这将如何控制？我尝试使用大小策略的各种组合，但这似乎并不奏效。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:24:10.020

您将需要[`QWidget::setFixedWidth`](http://qt-project.org/doc/qt-4.8/qwidget.html#setFixedWidth)和的组合[`QBoxLayout::setStretchFactor`](http://qt-project.org/doc/qt-4.8/qboxlayout.html#setStretchFactor)：

将布局项设置为 a `stretchFactor`of 会`0`告诉布局只为该项目分配所需的最小空间（如果需要，您可以使用 指定的维度`QWidget::setFixedWidth`） - 任何更大的内容都会导致布局按比例分配空间。

例如，三个`QWidget`s 的`stretchFactor`s`0`和分别会导致将最小可能空间分配给第一个，剩余空间以 2:1 的比例在最后两个s 中分配。`1``2``QWidget``QWidget`

还请记住，`stretchFactor`可以在[将项目添加到布局](http://qt-project.org/doc/qt-4.8/qboxlayout.html#addWidget)时进行设置。

# java - 单击另一个选项卡的按钮后如何执行一个选项卡中包含的try-catch-Blackberry

> ID：10535909
> 
> 赞同：2
> 
> 时间：2012-05-10T14:15:02.723
> 
> 标签：java, database, sqlite, blackberry, user-interface

我正在处理下面的代码，我在 Blackberry 的窗格管理器中创建了 3 个选项卡。第一个选项卡允许用户根据客户名称选择日期范围，并获取该客户的结果以显示在网格的第三个选项卡中格式。

1.  所以第一个选项卡有 2 个日期字段和一个客户文本字段。以及一个搜索按钮。

2.  单击搜索按钮时，它会选择搜索记录并跳转到第三个选项卡以网格格式显示。

3.  第三个选项卡有 try catch 语句，用于将表记录元素逐个字符串插入到网格中。

现在的问题是，只要我打开我的应用程序，然后单击第三个选项卡，它就会显示充满垃圾值的网格。它不会等待第一个选项卡的搜索按钮被单击然后显示结果。如果我碰巧关闭应用程序并重新打开它，我发现第三个选项卡显示了我之前搜索的结果。

这是代码：

```
 // setup the tab model with 3 tabs
  final PaneManagerModel model = new PaneManagerModel();
  model.enableLooping( true );

  // setup the first tab   XXXXXXXXXXXXXXXXXXXX~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   VerticalFieldManager vfm = new VerticalFieldManager( 
      Field.USE_ALL_HEIGHT | Field.USE_ALL_WIDTH |
      Manager.NO_VERTICAL_SCROLL | Manager.NO_HORIZONTAL_SCROLL );
  LabelField lbl = new LabelField( "Content for tab 1", Field.FOCUSABLE );
  vfm.add( lbl );

  TextField1 = new TextField(" Name:            ",null)
     {
            protected boolean keyChar(char ch, int status, int time) 
            {
            if (CharacterUtilities.isLetter(ch) || (ch == Characters.BACKSPACE || (ch == Characters.SPACE))) 
            {
            return super.keyChar(ch, status, time);
            }
           return true;
            }
        };
     vfm.add(TextField1);

    SimpleDateFormat sdfDate = new SimpleDateFormat("dd/MM/yyyy");//dd/MM/yyyy
     Date now = new Date();
     String strDate = sdfDate.format(now);

     TextField2 = new TextField("\n From:             ",strDate);
     vfm.add(TextField2);

    // TextField3 = new TextField("TO: ",null);
     //vfm.add(TextField3); 

     SimpleDateFormat sdfDate1 = new SimpleDateFormat("dd/MM/yyyy");//dd/MM/yyyy
     Date later = new Date();
     String strDate1 = sdfDate1.format(later);

     TextField3 = new TextField("\n To:                 ",strDate1);
     vfm.add(TextField3);

     ButtonField showInputButton = new ButtonField("  Search  ",ButtonField.FIELD_HCENTER | ButtonField.CONSUME_CLICK);
      showInputButton.setChangeListener(new FieldChangeListener() 
      {
            public void fieldChanged(Field field,int context) 
            {
                    Dialog.alert(TextField1.getText());
                    try
                  {    
                    //Open or create the database
                    Database db = DatabaseFactory.openOrCreate("database1.db");
                    //Insert onto table
                    Statement statement13 = db.createStatement("INSERT into 
                    Temp4(date,bill,narration) VALUES (('"+TextField3.getText()+"'),(SELECT balance FROM Temp3),('Opening Balance'))");
                    statement13.prepare();
                    statement13.execute(); 

                    Statement statement131 = db.createStatement("INSERT INTO Temp4(date,bill,narration,id) select date,amount,narration,id from Bills where name=\'"+TextField1.getText()+"\' AND substr(date,7)||substr(date,4,2)||substr(date,1,2) < substr (\'"+TextField3.getText()+"\',7)||substr (\'"+TextField3.getText()+"\',4,2)||substr (\'"+TextField3.getText()+"\',1,2) ");
                    statement131.prepare();
                    statement131.execute();      // date INTEGER,bill INTEGER,rec INTEGER,narration TEXT,id INTEGER
                    statement131.close(); 

                    Statement statement132 = db.createStatement("INSERT INTO  Temp4(date,rec,narration,id) select date,amount,narration,id from Receipts where name=\'"+TextField1.getText()+"\' AND substr(date,7)||substr(date,4,2)||substr(date,1,2) < substr (\'"+TextField3.getText()+"\',7)||substr (\'"+TextField3.getText()+"\',4,2)||substr (\'"+TextField3.getText()+"\',1,2) ");
                    statement132.prepare();
                    statement132.execute();       
                    statement132.close(); 

                     db.close();
                    }
                    catch( Exception e ) 
                    {         
                        System.out.println( e.getMessage() );
                        e.printStackTrace();
                    }
                    model.getView().jumpTo(2,PaneManagerView.DIRECTION_NONE);
                  }
        }

                    );

      vfm.add(showInputButton);
      LabelField myLbl = new MyLabelField( "Ledger" );
 NullField nullFld = new NullField( Field.FOCUSABLE );
  HorizontalFieldManager hfm = new HorizontalFieldManager();
  hfm.add( nullFld );
  hfm.add( myLbl );

  Pane pane = new Pane( hfm, vfm );
  model.addPane( pane );

   //Here ends tab 1 code 
```

//设置第三个标签——XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~

```
 vfm = new VerticalFieldManager( 
      Field.USE_ALL_HEIGHT | Field.USE_ALL_WIDTH |
      Manager.NO_VERTICAL_SCROLL | Manager.NO_HORIZONTAL_SCROLL );

      myLbl = new MyLabelField( "Daily Report" );

      //Adding grid format for fetching from temp4 table----------------

 final GridFieldManager grid = new GridFieldManager(10,5,0); 

    grid.add(new LabelField("Date")
    {
       public void paint(Graphics graphics)
       {
         graphics.setColor(Color.CYAN);
         super.paint(graphics);
       }
     });
    grid.add(new LabelField("Bill")
    {
       public void paint(Graphics graphics)
       {
         graphics.setColor(Color.CYAN);
         super.paint(graphics);
       }
     });
    grid.add(new LabelField("Receipt")
    {
       public void paint(Graphics graphics)
       {
         graphics.setColor(Color.CYAN);
         super.paint(graphics);
       }
     });
    grid.add(new LabelField("Narration")
    {
       public void paint(Graphics graphics)
       {
         graphics.setColor(Color.CYAN);
         super.paint(graphics);
       }
     });
    grid.add(new LabelField("ID")
    {
       public void paint(Graphics graphics)
       {
         graphics.setColor(Color.CYAN);
         super.paint(graphics);
       }
     });

    grid.setColumnPadding(20);
    grid.setRowPadding(20);
//try catch was here

       try
               {

                  //Open or create the database
                    Database db = DatabaseFactory.openOrCreate("database1.db"); 

                    Statement statement55 = db.createStatement("CREATE TABLE IF NOT EXISTS Temp4(date INTEGER,bill INTEGER,rec INTEGER,narration TEXT,id INTEGER)");
                    statement55.prepare();
                    statement55.execute();       
                    statement55.close();

                    Statement statement56 = db.createStatement("SELECT date,bill,rec,narration,id FROM Temp4 ORDER BY ROWID DESC");
                    statement56.prepare();
                    statement56.execute();

                            Cursor c = statement56.getCursor();

                            //Get to the row of grid
                             for (int i = 1; i < grid.getRowCount(); i++)
                             {
                                    System.out.println("Inside for first loops");
                                    //Get to the column of grid
                                for (int j = 0; j < grid.getColumnCount() ; j++)
                                {
                                   System.out.println("Inside for second loops");
                                   //Get to the row of temp4 table
                                   while(c.next()) 
                                   {

                                      System.out.println("Inside while"); 
                                        Row r;
                                        r = c.getRow();
                                        //Get to the column of temp4 table

                                        for (int k = 4; k >=0; k--)
                                        {

                                            System.out.println("Inside for loops");
                                            //Check for whether column retrieved is date or naraation
                                            if(k==0 || k==3)
                                            {
                                                System.out.println("Retrieving date or narration");
                                                grid.insert(new LabelField(r.getString(k))
                                                {
                                                    public void paint(Graphics graphics)
                                                    {
                                                    graphics.setColor(Color.GOLD);
                                                    super.paint(graphics);
                                                    }
                                                 },i,j);

                                            }  
                                            else
                                            {   
                                                //Check for whether column retrieved is bills,rec or id
                                                System.out.println("Retrieving other values"); 
                                                String p = "" + r.getObject(k);

                                                //if(r.getString(k) != null)
                                                //{ 
                                                grid.insert(new LabelField(p)
                                                {
                                                    public void paint(Graphics graphics)
                                                    {
                                                    graphics.setColor(Color.GOLD);
                                                    super.paint(graphics);
                                                    }
                                                 },i,j); 
                                               //  } 

                                            }   
                                           grid.setBackground(BackgroundFactory.createLinearGradientBackground(Color.MIDNIGHTBLUE,Color.STEELBLUE,Color.MIDNIGHTBLUE,Color.STEELBLUE));
                                           //grid.setBackground(BackgroundFactory.createLinearGradientBackground(Color.GOLD,Color.CHOCOLATE,Color.GOLDENROD,Color.CORAL));

                                        } 
                                         System.out.println("Exiting while");                        
                                      }

                                      System.out.println("Exiting sec for");
                                      break;
                                  }
                                System.out.println("Exiting first for");
                                break;
                               } 
                               statement56.close(); 
                               db.close();
                  }

                  catch( Exception e ) 
                  {         
                        System.out.println( e.getMessage() );
                        e.printStackTrace();
                  }  

    vfm.add(grid);

   //----------------grid ends---------------------------------------- 

  nullFld = new NullField( Field.FOCUSABLE );
  hfm = new HorizontalFieldManager();
  hfm.add( nullFld );
  hfm.add( myLbl );

   pane = new Pane( hfm, vfm );
   model.addPane( pane ); 
```

现在剩下的设置

```
 // select the tab to be displayed
  model.setCurrentlySelectedIndex( 0 );    

  // setup the rest of the components
  HorizontalTabTitleView titleView = new HorizontalTabTitleView( Field.FOCUSABLE );
  titleView.setNumberOfDisplayedTabs( 3 );
  titleView.setModel( model );

  PaneView paneView = new PaneView( Field.FOCUSABLE );
  paneView.setModel( model );

  PaneManagerView view = new PaneManagerView( 
          Field.FOCUSABLE  | Manager.NO_VERTICAL_SCROLL | 
          Manager.NO_HORIZONTAL_SCROLL | Manager.USE_ALL_HEIGHT | 
          Manager.USE_ALL_WIDTH, 
          titleView, paneView );
  view.setModel( model );
  model.setView( view );

  // configure the Controller
  HorizontalTabController controller = new HorizontalTabController();
  controller.setModel( model );
  controller.setView( view );
  model.setController( controller );
  view.setController( controller );

  // add the tab manager to the MainScreen
  this.add( view );

 } 
```

我还尝试禁用第三个窗格并将其添加到第一个选项卡搜索实现中，但由于第三个选项卡是在第一个选项卡之后定义的，所以会出现错误。我还尝试在函数中包含第三个选项卡的 try catch，以便可以在第一个选项卡的按钮单击时调用它。但这也给出了“非法开始表达”的错误

请提出一个解决方案。任何可以对此代码有所思考并帮助解决方案的人将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:13:43.307

您看过 BlackBerry **MainScreen**方法`onExposed`和`onObscured`吗？

> **受保护的无效 onExposed()**
> 
> 当从显示堆栈中弹出的屏幕显示此屏幕时调用。screen 的子类应覆盖此方法以进行特殊处理。
> 
> 恭维回调是**onObcured()**。

* * *

> **受保护的无效 onObcured()**
> 
> 当此屏幕被显示堆栈上推送的新屏幕遮挡时调用。screen 的子类应覆盖此方法以进行特殊处理。
> 
> 恭维回调是**onExposed()**。

# c# - 流程操作（监控）

> ID：10535910
> 
> 赞同：0
> 
> 时间：2012-05-10T14:15:03.597
> 
> 标签：c#, forms, process, monitor, detect

我在我的程序中想要完成的是知道某些进程是否正在运行（我需要知道所有正在运行的实例）。我想把它们放在一个组合框中，作为一个对象存储，这样我以后可以把它们放回去。我认为这很容易，但事实证明，这让我有些头疼：P 我不确定这是否应该这样做，但它正在工作。但是，我对这个代码解决方案感觉很糟糕。我不知道任何好的编程模式，这就是为什么我请你们编码人员帮助我。

我想到的第一件事是使用计时器经常检查进程并添加它们，并使用 Exited 事件将它们从我的组合框中删除。所以这是我关于计时器 Tick 事件的代码：

```
 private void timer_ProcessCheck_Tick(object sender, EventArgs e)
    {
        Process[] tmpArray = Wow_getCurrentlyRunning(); // this returns Process[]
        if (comboBox_processes.Items.Count == 0)
        {
            if (tmpArray.Count() > 0) 
                for (int Index = 0; Index < tmpArray.Count(); Index++)
                    Add(tmpArray[Index]); // adding to combobox
        }
        else
        { 
            if (tmpArray.Count() > comboBox_processes.Items.Count)
            {
                List<Process> result;
        /*Diff compares the two array, and returns to result variable.*/
                if (Diff(tmpArray, comboBox_processes, out result))                 
                    foreach(Process proc in result)
                        Add(proc); // adding to combobox
            }
        }
    } 
```

我的 Diff 方法看起来像这样，它将差异放入 diff 变量。

```
 public bool Wow_differsFrom(Process[] current, ComboBox local, out List<Process> diff)
    {
        List<int> diffIndex = new List<int>();

        foreach (Process proc in current)
            diffIndex.Add(proc.Id);

        for (byte Índex = 0; Índex < current.Count(); Índex++)
        {
            for (byte Index = 0; Index < local.Items.Count; Index++)
            {
                if (current[Índex].Id == (local.Items[Index] as Process).Id)
                {
                    diffIndex.Remove(current[Índex].Id);
                    break;
                }
            }
        }

        diff = new List<Process>();

        for (int x = 0; x < current.Count(); x++)
            for (int i = 0; i < diffIndex.Count; i++)
                if (current[x].Id == diffIndex[i])
                    diff.Add(current[x]);

        if (diff.Count == 0)
            return false;
        return true;
    } 
```

这是在进程退出时调用的 Exited 事件处理程序

```
 private void Wow_exitedEvent(object o, EventArgs e)
    {
        RemoveCBItem(comboBox_processes, (o as Process).Id); // this will remove the process from combobox, also threadsafe.
    } 
```

我的问题：

1.  你会怎么做？我接近这个权利吗？我有感觉，我没有。

2.  申请开始有什么活动吗？就像有一个出口。也许深入 Win32 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:55:04.357

总的来说，我认为这个想法是正确的 - 如果您每次都需要刷新活动进程列表。所以使用计时器更新列表是可以的。我不太了解 Win32 API，但我认为如果有人可以订阅 process_run 和 process_retminate wineows 事件，这将是一个安全问题，因此不太可能。

但是你真的需要一直更新吗？也许只有在组合框扩展时才读取进程列表就足够了？当用户下次展开它时，您将再次重新初始化项目。我认为这种方法会导致更少的问题。

至于您的实现，我认为它不是最有效和最优雅的：

1.  将整个 Process 对象存储在组合框项中对我来说并不好。更好地创建您的类，它将仅存储您需要的那些属性（进程 ID、进程名称）
2.  在循环中使用 current.Count() 效率极低 - 它是一种扩展方法，总是在调用时迭代 IEnumerable。所以你的

    for (byte Índex = 0; Índex < current.Count(); Índex++)

    导致 O(N*N) 复杂度。幸运的是，进程数不会太大而不会对您的应用程序产生太大影响，但是您应该知道这一事实，并且不要习惯于循环使用此方法。使用 current.Length 代替，因为它是一个数组。

3.  您的收藏同步太复杂和奇怪。为什么不创建一个方法来接收要更改的集合和要从中初始化的集合，并使用添加-删除操作使第一个集合等于第二个集合？你们中的两个集合都按某些属性（例如进程名称）排序，这可以非常简单有效地完成 - 使用[二分搜索](http://www.dotnetperls.com/binarysearch)。在 WPF 中，您可以使用 ObservableCollection 作为数据源来最有效地使用这种方法。在 WinForms 中，您可能还可以使用带有更改通知的集合，但我没有使用它们。

你可以做的更简单：

```
//Somewhere in Form_Load
combobox.DisplayMember = "Name";//name of the property in your MyProcessInfo class
combobox.ValueMember = "Id";//name of the property in your MyProcessInfo class

//In your timer.Tick handler
combobox.DataSource = Wow_getCurrentlyRunning().Select(p=>new MyProcessInfo(p.Id, p.Name)).ToList(); 
```

但是如果组合框和一些闪烁是可能的，这种方法将始终重新初始化所有项目。

# c# - 我可以配置 DotNetOpenAuth 请求令牌过期吗？

> ID：10535911
> 
> 赞同：0
> 
> 时间：2012-05-10T14:15:04.173
> 
> 标签：c#, asp.net, oauth, dotnetopenauth, oauth-provider

在我们的 API 中，我们实现了 DotNetOpenAuth (v3.4.7)。我们经常收到异常“服务提供者无法识别消息中的令牌”，以及此堆栈跟踪：

```
 at DotNetOpenAuth.Messaging.ErrorUtilities.VerifyProtocol(Boolean condition, String message, Object[] args)
   at DotNetOpenAuth.Messaging.ErrorUtilities.ThrowProtocol(String message, Object[] args)
   at DotNetOpenAuth.OAuth.ChannelElements.TokenHandlingBindingElement.VerifyThrowTokenTimeToLive(ITokenContainingMessage message)
   at DotNetOpenAuth.OAuth.ChannelElements.TokenHandlingBindingElement.ProcessIncomingMessage(IProtocolMessage message)
   at DotNetOpenAuth.Messaging.Channel.ProcessIncomingMessage(IProtocolMessage message) 
```

就在最近，我发现当人们花费太长时间授权他们的请求令牌时会引发此异常。所以授权过程的第1步和第2步之间的时间太长了。

这个时间可以在 web.config 中或以编程方式配置吗？

注意：我试过`messaging lifetime="00:30:00"`了，但这似乎并没有影响我的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T03:39:50.133

可能产生此错误的两个因素：

1.  `IServiceProviderTokenManager.GetRequestToken`抛出`KeyNotFoundException`, 或
2.  令牌早于 web.config 文件`dotNetOpenAuth/oauth/serviceProvider/security/@maxAuthorizationTime`设置中指定的超时时间。

例如：

```
<dotNetOpenAuth>
    <oauth>
        <serviceProvider>
            <security maxAuthorizationTime="00:05:00"/>
        </serviceProvider>
    </oauth>
</dotNetOpenAuth> 
```

# sql - 用于识别平均每日总数的 SQL 代码

> ID：10535916
> 
> 赞同：2
> 
> 时间：2012-05-10T14:15:15.497
> 
> 标签：sql, sybase

我很困惑如何构建一个算法来确定我们系统中活跃客户的平均数量。他们存储了各种信息，ID、联系人开始日期、联系人结束日期、帐户开始和结束日期、交易日期等。并非所有这些信息都有我可以捕捉到的任何一致的日常活动。我无法弄清楚如何确定特定日期的活跃客户数量。

我无法更改数据库的结构或大幅修改表，因此我需要使用我所拥有的。我认为这样做的一个想法是检查联系结束日期是否大于日期 X，或者是否为空 - 并检查联系开始日期是否小于日期 X。我将其插入但得到了我输入的任何一天都使用相同的数字。还有其他方法可以尝试吗？我可以在上班时添加该代码，但现在我将其提交以供考虑...

**对不起..我遗漏了一个重要的部分。我需要能够确定过去任何特定日子的总活跃量，然后获得一年的每日平均总数。在以下帖子的帮助下，我可能已经解决了第一部分。首先，我在查询中创建了一个变量来保存我需要搜索的日期...@report_dt

```
and contact_end_dt >= @report_dt
and contact_start_dt <= @report_dt 
```

那件作品为我做到了。现在我需要弄清楚如何在一年内循环遍历这个变量，并一次一天地增加 @report_dt 变量。

感谢所有的帮助......你太棒了！道格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:22:08.647

您能否查询 sysdate 在联系开始日期和联系结束日期之间的位置？

您有联系开始日期和联系结束日期、帐户开始日期和结束日期。您可以依赖帐户开始日期和结束日期中的数据吗？帐户在被视为不活动之前可以多长时间没有活动？如果你能回答这个问题，你应该能够得到答案。

谢谢，苏珊

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:31:47.363

如果您可以通过包括以下内容进行扩展：
- 您尝试但没有工作的代码
- 表的实际架构 *（包括数据类型、约束等）*
- 示例输入和输出数据

尽管如此，您想要的简单查询是......

```
SELECT
  *
FROM
  yourTable
WHERE
      (contact_start_date >= CAST('20120510' AS DATETIME) OR contact_start_date IS NULL)
  AND (contact_end_date   <= CAST('20120510' AS DATETIME) OR contact_end_date   IS NULL) 
```

*（尽管根据您的数据限制，您可能不需要检查 NULL 开始日期。）*

如果这与您已经尝试过的重复，我将等待您的问题的任何更新:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T16:39:00.610

道格，

对于客户“活跃”意味着什么，您还没有提供最模糊的概念。一旦你弄清楚了，你就可以解决这个问题。

您能否编写一个查询，列出每个日期为 2012 年 5 月 10 日的活跃客户一次？如果是这样的话，

1.  创建一个单独的日期表，每一天（或工作日）一行
2.  使用您为 2012-05-10 编写的查询，但使用日期表中的左外连接。仅选择 dateTable.theDate、count(*) 并按 theDate 分组。

如果您想要更具体的内容，请在您的问题中提出具体的内容。一个没有单个列或表名的杂乱无章的问题不会给你太多帮助。请查看此处获得支持的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T15:51:53.643

这是一个有趣的问题。以下查询使用 SQL Server 和任何支持 row_nubmer() 的数据库来解决问题，假设您在所有日期都有开始和停止：

```
with starts as 
(
   select start_date as thedate,
       row_number() over (partition by null order by start_date) as cumstarts
   from customers
),
ends as 
(
   select end_date as thedate,
       row_number() over (partition by null order by end_date) as cumends
   from customers
)
select thedate, cumstarts - cumends
from 
(
  (select * from starts) 
  union all 
  (select * from ends)
) t
group by thedate 
```

一些数据库直接提供累积和，这使得它更容易。

当您在不同日期开始和停止时，SQL Server 中的问题有点棘手。

# c - 使用 ALSA 从 Line IN 录制声音

> ID：10535918
> 
> 赞同：6
> 
> 时间：2012-05-10T14:15:19.793
> 
> 标签：c, linux, alsa

我开发了一个在嵌入式系统上使用 ALSA 驱动程序录制声音的小型应用程序。
现在我在选择要从 MIC/Line IN 录制的设备时遇到问题。
该应用程序设置为在系统启动时启动，但我的默认录音设备设置为 MIC。为了让我的应用程序正常工作，我必须去 amixer 并将录音设备从 MIC 设置为 Line IN，然后启动我的应用程序。

你们知道从应用程序或 amixer 命令更改此记录设备的方法吗，我可以将它放在脚本中并在启动时运行它。

我是否说过这个应用程序在嵌入式系统上运行，我需要一种在我的应用程序启动之前配置系统的方法。

**EDIT1：**
这是我的混合器输出：

```
root@freescale ~$ amixer
Simple mixer control 'Headphone',0
  Capabilities: volume
  Playback channels: Front Left - Front Right
  Capture channels: Front Left - Front Right
  Limits: 0 - 127
  Front Left: 103 [81%]
  Front Right: 103 [81%]
Simple mixer control 'Playback',0
  Capabilities: volume
  Playback channels: Front Left - Front Right
  Capture channels: Front Left - Front Right
  Limits: 0 - 192
  Front Left: 192 [100%]
  Front Right: 192 [100%]
Simple mixer control 'Capture',0
  Capabilities: cvolume
  Capture channels: Front Left - Front Right
  Limits: Capture 0 - 15
  Front Left: Capture 15 [100%]
  Front Right: Capture 15 [100%]
Simple mixer control 'Capture Vol Reduction',0
  Capabilities: enum
  Items: 'No Change' 'Reduced by 6dB'
  Item0: 'No Change'
Simple mixer control 'ADC Mux',0
  Capabilities: enum
  Items: 'MIC_IN' 'LINE_IN'
  Item0: 'MIC_IN'
Simple mixer control 'DAC Mux',0
  Capabilities: enum
  Items: 'DAC' 'LINE_IN'
  Item0: 'DAC'
Simple mixer control 'MIC GAIN',0
  Capabilities: enum
  Items: '0dB' '20dB' '30dB' '40dB'
  Item0: '0dB' 
```

非常感谢，加布里埃尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:43:12.740

我终于做到了。我正在使用带有“cset”命令的 amixer 来执行此操作。

```
amixer -c 0 cset numid=7 1 
```

“-c 0”是第一个声卡
“numid=7”是活动的录音设备。
“1”是第二个输入......在我的例子中 0-MIC 1-LINEIN

```
amixer info 
```

获取所有控件及其 numid，例如：

```
 amixer info
Card default 'mxsevk'/'mxs-evk (SGTL5000)'
  Mixer name    : ''
  Components    : ''
  Controls      : 7
  Simple ctrls  : 7
root@freescale ~$ amixer contents
numid=5,iface=MIXER,name='Headphone Volume'
  ; type=INTEGER,access=rw---,values=2,min=0,max=127,step=0
  : values=103,103
numid=7,iface=MIXER,name='ADC Mux'
  ; type=ENUMERATED,access=rw---,values=1,items=2
  ; Item #0 'MIC_IN'
  ; Item #1 'LINE_IN'
  : values=1
numid=3,iface=MIXER,name='Capture Vol Reduction'
  ; type=ENUMERATED,access=rw---,values=1,items=2
  ; Item #0 'No Change'
  ; Item #1 'Reduced by 6dB'
  : values=0
numid=2,iface=MIXER,name='Capture Volume'
  ; type=INTEGER,access=rw---,values=2,min=0,max=15,step=0
  : values=15,15
numid=4,iface=MIXER,name='Playback Volume'
  ; type=INTEGER,access=rw---,values=2,min=0,max=192,step=0
  : values=192,192
numid=6,iface=MIXER,name='DAC Mux'
  ; type=ENUMERATED,access=rw---,values=1,items=2
  ; Item #0 'DAC'
  ; Item #1 'LINE_IN'
  : values=0
numid=1,iface=MIXER,name='MIC GAIN'
  ; type=ENUMERATED,access=rw---,values=1,items=4
  ; Item #0 '0dB'
  ; Item #1 '20dB'
  ; Item #2 '30dB'
  ; Item #3 '40dB'
  : values=0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:31:21.707

如果***alsactl***可用，您可以根据自己的喜好调整输入/输出/电平值并执行

```
alsactl -f settings.alsa store 
```

并且，反过来

```
alsactl -f settings.alsa restore 
```

在启动时。

# sql-server - 插入时：子查询返回超过 1 个值

> ID：10535924
> 
> 赞同：1
> 
> 时间：2012-05-10T14:15:32.023
> 
> 标签：sql-server, sql-server-2005

我正在尝试将所有不在 xml 文件中的行插入到表中。当有多个行时，它会向我显示错误：**“子查询返回超过 1 个值。当子查询遵循 =、!=、= 或将子查询用作表达式时，这是不允许的。”** 这是我正在使用的查询：

```
insert into #tmpPievVNC
    select
        a.id, 'J'
    from
        openxml(@hDoc, '/art_kompl/nol_voav') with #vc xd 
        join nol_art a on xd.id_art = a.id
    where
            not exists(select * from nol_voav nv 
        where
            (id_art=xd.id_art) and (begDate=xd.begDate) and (endDate=xd.endDate)) 
```

如何在那里插入多行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:10:55.067

您可以尝试将查询转换为使用 LEFT JOIN：

```
insert into #tmpPievVNC
    select
        a.id, 'J'
    from
        openxml(@hDoc, '/art_kompl/nol_voav') with #vc xd 
        join nol_art a on xd.id_art = a.id LEFT JOIN nol_voav nv 
        on xd.id_art = nv.id_art   and xd.begDate = nv.begDate and 
        xd.endDate = nv.endDate
     WHERE nv.id_art IS NULL 
```

这并不能解释子查询错误，但是在没有看到您正在使用的表/数据的情况下，它应该可以为您提供所需的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:00:10.187

您可以使用连接修改 sql 语句以获取 xml 文件中不可用的记录。

以下 sql 语句返回 nol_voav 表中不在 xml 文件中的所有行，然后将它们插入 #tmpPievVNC 表中。

```
insert into #tmpPievVNC
    select
        nv.id, 'J'
    from
        openxml(@hDoc, '/art_kompl/nol_voav') with #vc xd 
        inner join nol_art a on xd.id_art = a.id
    right join nol_voav nv on 
            nv.id_art=xd.id_art and nv.begDate=xd.begDate and nvendDate=xd.endDate
    where xd.id_art is null 
```

`"inner join nol_art a on xd.id_art = a.id"`如果您不想加入 nol_art 表，则可以跳过该语句。

# iphone - 有效地将数组中的元素与 coredata 表行进行比较

> ID：10535932
> 
> 赞同：0
> 
> 时间：2012-05-10T14:16:01.707
> 
> 标签：iphone, objective-c, core-data

好的。我有一个带有歌曲名的数组。我还有一个包含一些相同歌曲名称的 CoreData 数据库。如何有效地检查两者中的歌曲？我真的不想使用 for 循环将数据库中的每首歌曲与数组中的所有元素进行比较。我还需要知道 CD Array 中的 songnames 数组中的哪些元素编号。谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T15:23:26.193

您可以将两个数组添加到两个不同的集合中，然后找到交集。这将为您提供两个集合中的共同对象（在您的情况下为歌曲名）。

例子：

```
NSSet *set1 = [[NSSet alloc] initWithObjects:@"one",@"two", nil];
NSSet *set2 = [[NSSet alloc] initWithObjects:@"one",@"none", nil];
NSMutableSet *set3 = [[NSMutableSet alloc] initWithSet:set1];
[set3 intersectSet:set2]; 
```

在您的情况下，您可以使用方法 initWithArray。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T14:24:15.510

如果你的歌曲名数组是一个标准的 NSArray，你别无选择，只能执行线性搜索操作（即 for 循环）。如果您使用不同的数据结构（如排序数组），您可以通过进行二分半搜索而不是线性搜索来查找匹配项，从而在一定程度上缩短执行时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T03:15:32.983

NSArray 文档中有关于[查询数组](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-SW8)和[查找数组中的对象的](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-SW20)部分。只需使用 和 的组合，`containsObject:`您`'indexOfObject:` 仍然需要遍历从数据库返回的歌曲。

```
NSArray *fetchResults = [NSArray arrayWithObjects:@"Song1", @"Song2", @"Song3", nil];    

for(id song in myArray) {
    if([fetchResults containsObject:song]) {
        int index = [fetchResults indexOfObject:song];
        // do something with value
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T23:09:01.760

最后我通过使用交集解决了这个问题。Zahreelay 为我指明了正确的方向，但我需要对代码做一些与他所做的不同的事情。以防其他人将来可能会从这个解决方案中受益，我决定发布它。

```
NSMutableArray *playlist = [[NSMutableArray alloc] initWithObjects:@"Walk", @"The Pretender", @"Best Of You", @"Everlong",nil];

NSMutableArray *coredataArray =[[NSMutableArray alloc] initWithObjects:@"Walk", @"Everlong",nil];
NSMutableArray *array = [[NSMutableArray alloc] init];

int tracknum = 0;

for (id obj in spilleliste) {

    if ([stemmeliste  containsObject:obj] ) {

        NSNumber *tracknumber = [NSNumber numberWithInt:tracknum];

        [array addObject:tracknumber];

    }
    tracknum++;
}

NSLog(@"Array: %@",array); 
```

输出：

```
2012-05-11 01:08:20.154 compare[19936:207] Array : (
    0,
    3
) 
```

# opengl-es - OpenGL (ES) 如何存储纹理/顶点

> ID：10535935
> 
> 赞同：1
> 
> 时间：2012-05-10T14:16:16.527
> 
> 标签：opengl-es

我对 OpenGL ES 存储机制很感兴趣。它是否将任何数据复制到自己的内存中，还是仅存储指向数据的指针。如果没有应对（什么是合乎逻辑的），那么为什么使用 VBO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:01:24.530

关键是要记住 OpenGL(ES) 是作为客户端-服务器模型构建的……这意味着通常“CPU”是客户端，“GPU”是服务器。

这两个有不同的内存存储。当您想要绘制一些顶点时，您需要将其从“CPU”发送到“GPU”，这通常涉及将数据从系统内存复制到 GPU 内存。每一帧你都需要一遍又一遍地发送它来执行绘图......它当然很慢。

VBO 是将这些顶点数据存储在 GPU 上然后简单地避免复制的方式......只需添加一个命令“Draw”，数据将不是从系统内存中获取，而是从 GPU 内存中获取。那会快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:23:40.380

纹理和缓冲对象最终彼此没有关系。无论如何都没有直接关系。

但是，它们确实有一些相似之处。它们都代表 OpenGL 分配的内存。因此，任何上传到他们的数据都是*复制*操作。甚至纹理。

# iphone - 为什么 Groupon ios 应用程序中的图像下载速度很快？

> ID：10535940
> 
> 赞同：0
> 
> 时间：2012-05-10T14:16:21.977
> 
> 标签：iphone, ios

我正在做类似 groupon 的 ios 应用程序，我在其中使用在后台下载的 NSData 构建图像

```
[NSData dataWithContentsOfURL:myURL] 
```

在我的表视图中。但相对比groupon慢。我可以实施哪些技术以使其更快。还有我可以在下载后实现的任何缓存技术/框架吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:35:35.227

试试 AFNetworking。它为 UIImageView 提供了一个类别，这将使您的生活更轻松。

```
#import "UIImageView+AFNetworking"    
.....
[imageView setImageWithURL:[NSURL URLWithString:@"theImageURL"]]; 
```

# excel - 在 Excel 中，是否可以使用条件格式始终突出显示今天的日期？

> ID：10535945
> 
> 赞同：1
> 
> 时间：2012-05-10T14:16:37.937
> 
> 标签：excel, vba, formatting

在 AI 列中，日期从 2012 年 5 月 1 日到 2013 年 5 月 1 日。第 1 行有 5 月 1 日，第 2 行有 5 月 2 日，第 3 行有 5 月 3 日，依此类推。

是否可以突出显示 JUST TODAY 的日期？这样，当我打开电子表格时，我可以看到我应该查看哪一行。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:19:53.990

在 A 列中突出显示您的日期，转到条件格式并添加以下条件：

```
[Cell Value Is] [equal to]  =TODAY() 
```

# perl - Perl 测试::More 块前

> ID：10535948
> 
> 赞同：2
> 
> 时间：2012-05-10T14:16:38.780
> 
> 标签：perl

Test::More 是否有某种机制在每个子测试之前运行代码块？我发现自己在每次测试中都写了相同的安排，我想通过将它放在 before 块或其他东西中来让我的生活更轻松？我查看了 perldocs，但没有看到专门为此构建的任何内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T15:23:50.723

自己做比较容易：

```
use Hook::LexWrap qw( wrap );

wrap $_, pre => sub { ... }
   for qw( is ok ... ); 
```

[钩子::LexWrap](http://search.cpan.org/perldoc?Hook::LexWrap)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:24:53.453

`Test::More`的测试似乎`Test::Builder::Module::builder`在每次测试之前运行。你可以用这个替换那个实现。

```
{   package Test::Builder::Module;
    my $old_imp = \&Test::Builder::Module:builder;
    no warnings 'redefine';
    sub builder { 
        Mypackage::setup_test();
        goto &$old_imp;
    }
} 
```

如果这看起来太危险，它实际上是这样称呼的：

```
sub is ($$;$) {
    my $tb = Test::More->builder;

    return $tb->is_eq(@_);
} 
```

因此，您可以只推入 for 的实现`builder`，`Test::More`因为它在其父类中调用它：

```
{   package Test::More; 
    sub builder { 
        &stuff_I_want_to_do;
        my $inv = shift;
        return $inv->SUPER::builder( @_ );
        # OR return Test::Builder->new;   
    }
} 
```

# c++ - 在 Optimus 笔记本电脑中以编程方式强制使用 NVIDIA GPU

> ID：10535950
> 
> 赞同：26
> 
> 时间：2012-05-10T14:16:52.113
> 
> 标签：c++, directx, nvidia, optimus

我正在编写 DirectX 游戏，当我在 Optimus 笔记本电脑上运行它时，使用的是 Intel GPU，导致性能非常糟糕。如果我使用上下文菜单或通过将我的可执行文件重命名为 bf3.exe 或其他一些著名的游戏可执行文件名称来强制使用 NVIDIA GPU，则性能符合预期。
显然，当我必须重新分发我的游戏时，这两种解决方案都不是可接受的解决方案，那么有没有办法以编程方式强制笔记本电脑使用 NVIDIA GPU？

我已经尝试使用 DirectX 枚举适配器（IDirect3D9::GetAdapterCount，IDirect3D9::GetAdapterIdentifier），但它不起作用：只报告了 1 个 GPU（正在使用的那个）。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-26T13:10:37.813

根据[http://developer.download.nvidia.com/devzone/devcenter/gamegraphics/files/OptimusRenderingPolicies.pdf](http://developer.download.nvidia.com/devzone/devcenter/gamegraphics/files/OptimusRenderingPolicies.pdf)从 302 个驱动程序开始，静态链接以下库之一就足够了：**vcamp110.dll**，**vcamp110d.dll**，**nvapi.dll**，**nvapi64.dll**，**opencl.dll**，**nvcuda.dll**，**cudart*.***，或在您的程序中导出 NvOptimusEnablement 变量：

```
extern "C" {
    _declspec(dllexport) DWORD NvOptimusEnablement = 0x00000001;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T03:37:34.770

[http://www.nvidia.com/object/LO_optimus_whitepapers.html](http://www.nvidia.com/object/LO_optimus_whitepapers.html)上的 Optimus 白皮书不清楚在切换到 GPU 之前究竟需要什么。白皮书称检测到 DX、DXVA 和 CUDA 调用并将导致 GPU 被打开。但此外，该决定基于 NVIDIA 维护的配置文件，当然，您的游戏尚不存在配置文件。

要尝试的一件事是进行 CUDA 调用，例如调用`cuInit(0);`. 与 DX 和 DXVA 不同，英特尔集成显卡无法处理这个问题，因此它应该强制切换到 GPU。

# php - 确保使用 oci_pconnect 时 php 会话获得相同的 oracle 会话

> ID：10535953
> 
> 赞同：1
> 
> 时间：2012-05-10T14:17:05.810
> 
> 标签：php, oracle, session, persistent-connection

我想使用全局临时表来存储一些*昂贵的*中间数据。数据是瞬态的，但在 php 会话期间很好，因此使用全局临时表似乎`on commit preserve rows`是理想的。

但是.. 看起来全局临时表数据仅对创建它的 oracle 会话可用。

因此，这引发了一个问题，即我如何确保 oci_pconnect 能够返回相同的 oracle 会话，因为我已经读到 oracle 会话对于每个持久连接都是唯一的？我对跨多个 php 执行使用事务不感兴趣，只是临时表。

我正在使用 php 会话，因此可以将其用作选择 oracle 会话的标识符。

到目前为止，这似乎是不可能的，但问一下也无妨。

**编辑**：实现这一点的预期目的是加速访问我的访问控制中使用的用户组成员信息。
提前解析组成员资格并使用此临时数据代替在所有后续查询中消除了 3 层以上的连接。由于返回的键是`RAW`，将它们序列化到外部存储会导致`HEXTORAW()`再次调用 on usage ，并且似乎对预期目的没有帮助。

为确定组级别访问而添加的查询部分在会话期间是静态的，并且自行运行会返回大约 600 行唯一的 16 字节`RAW`密钥。然后通过链接表将这些键与结果集结合起来，以确定用户是否对结果集具有任何“组级别”权限。

我玩过使用 IN 并将键作为字符串传递，但由于它们是 RAW 键，因此我必须`HEXTORAW()`每次查询调用 600 次。性能不如使用临时表和执行`JOIN`.

有没有其他方法可以告诉 Oracle 将查询的那部分结果缓存起来，而不是将它们写入“永久”中间结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:25:00.153

尽管您可能会想出一些技巧来完成这项工作，但至少在某些时候，我认为这几乎肯定会在某些时候引起问题，尤其是在从开发服务器过渡到生产服务器时. 选项可能包括：

1.  使用永久表，并在逻辑完成后清除数据。
2.  将数据写入平面文件，然后在需要时将其读回。
3.  将数据写入平面文件，然后将该文件挂载为外部表。

分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T11:58:08.710

'数据库常驻连接池'怎么样。我想这就是你要找的。试一试！

# nhibernate - NHibernate QueryOver 投影 - 将集合投影到 DTO

> ID：10535961
> 
> 赞同：3
> 
> 时间：2012-05-10T14:17:27.370
> 
> 标签：nhibernate

我正在尝试将实体的集合投影到 DTO 中。简单的属性很容易，但集合有问题：

```
public class Blog
{
   public string Name {get;set;}
   public IList<Comments> Comments {get;set;}
   //... more properties
}
public class Comments
{
   public Blog Blog {get;set;}
   //... more properties
}
public class MyDTO
{
   public string BlogName {get;set;}
   public IList<Comments> {get;set;}
} 
```

查询有点像：

```
var dto = _session.QueryOver<Blog>(() => blogAlias)
                            .JoinAlias(x => x.Comments, () => commentsAlias, JoinType.LeftOuterJoin)
                            .Select(
                                Projections.Property(() => blogAlias.Reference).WithAlias(() => myDTO.Reference),
                                // what project here to project blogAlias.Comments into myDTO.Comments))
                            .TransformUsing(Transformers.AliasToBean<MyDTO>()
                            .SingleOrDefault<MyDTO>(); 
```

**编辑更新**

即使没有转换，我似乎也无法运行简单的投影并得到：“索引超出了数组的范围”：

```
 var dto = _session.QueryOver<Blog>(() => blogAlias)
                                .JoinAlias(x => x.Comments, () => commentsAlias, JoinType.LeftOuterJoin)
                                .Select(
                                    Projections.Property(() => blogAlias.Reference).WithAlias(() => myDTO.Reference),
Projections.Property(() => blogAlias.Comments).WithAlias(() => myDTO.Comments)
                                .List<object>(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T17:16:52.163

我猜这是你应该做的..

将您的 DTO 更新为：

```
public class MyDTO
{
   public string BlogName {get;set;}
   public IList<Comments> Comments {get;set;}
} 
```

您修改后的查询：

```
var dto = _session.QueryOver<Blog>(() => blogAlias)
          .JoinAlias(x => x.Comments, () => commentsAlias, JoinType.LeftOuterJoin)
          .Select(Projections.Property(() => blogAlias.Reference).WithAlias(() => myDTO.Reference),
                  Projections.Property(() => blogAlias.Comments).WithAlias(() => myDTO.Comments),
          .TransformUsing(Transformers.AliasToBean<MyDTO>()
          .SingleOrDefault<MyDTO>() 
```

如果那不起作用那么

```
_session.QueryOver<Blog>(() => blogAlias)
              .JoinAlias(x => x.Comments, () => commentsAlias, JoinType.LeftOuterJoin)
              .Select(Projections.Property(() => blogAlias.Reference),
                      Projections.Property(() => blogAlias.Comments))
              .SingleOrDefault<object[]>()
              .Select(x=>new MyDTO {BlogName=(string)x[0],Comments=x[1].Select(y=>y.ToString()).ToList())}; 
```

# c++ - DRY if 语句

> ID：10535962
> 
> 赞同：4
> 
> 时间：2012-05-10T14:17:30.900
> 
> 标签：c++, if-statement, dry

我有一个 C++ 程序，在许多不同的 .cpp 文件中，我执行以下操作：

```
if (!thing1.empty() && !thing2.empty())
{
    if (thing1.property < thing2.property)
        return func1();
    else if (thing2.property < thing1.property)
        return func2();
    else
        return func3();
}
else if (!thing1.empty())
{
    return func1();
}
else if (!thing2.empty())
{
    return func2();
}
else
{
   return func4();
} 
```

如果thing1大于thing2，我会尝试以一种方式执行func，或者如果相反，我会尝试以一种方式执行func，但是如果不存在，那么我只为那一半执行func。如果两者都不存在，我会做一些完全不同的事情。每次使用此模式时，属性、函数和返回类型都不同。对于我想做的事情，有没有比这种丑陋的嵌套 if 语句更好的设计？

**编辑：**意识到我的示例代码过于简单化了。这是我的一些真实代码，希望能更好地解释问题（尽管它更混乱）：

```
if (!diamondsOnly.empty() && !clubsOnly.empty())
{
    if (diamondsOnly.size() < clubsOnly.size())
    {
        if (passHighCards(player.hand, getHighCards(Card::DIAMONDS), result))
            return result;
        if (passHighCards(player.hand, getHighCards(Card::CLUBS), result))
            return result;
    }
    else if (clubsOnly.size() < diamondsOnly.size())
    {
        if (passHighCards(player.hand, getHighCards(Card::CLUBS), result))
            return result;
        if (passHighCards(player.hand, getHighCards(Card::DIAMONDS), result))
            return result;
    }
    else
    {
        if (diamondsOnly.back().value > clubsOnly.back().value)
        {
            if (passHighCards(player.hand, getHighCards(Card::DIAMONDS), result))
                return result;
            if (passHighCards(player.hand, getHighCards(Card::CLUBS), result))
                return result;
        }
        else
        {
            if (passHighCards(player.hand, getHighCards(Card::CLUBS), result))
                return result;
            if (passHighCards(player.hand, getHighCards(Card::DIAMONDS), result))
                return result;
        }
    }
}
else if (!diamondsOnly.empty())
{
    if (passHighCards(player.hand, getHighCards(Card::DIAMONDS), result))
        return result;
}
else if (!clubsOnly.empty())
{
    if (passHighCards(player.hand, getHighCards(Card::CLUBS), result))
        return result;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T17:26:16.120

**决定然后做**

查看真实代码，我注意到的第一件事是有许多几乎相同的调用，它们仅相差一个常数。我会使用在复杂逻辑中设置的参数在一个地方进行调用。

```
// Decide what to do.
std::vector<Card::Suit> passOrder;
if (!diamondsOnly.empty() && !clubsOnly.empty()) {
    // .. complicated logic that adds suits to passOrder ..
}

// Do it.
for (auto suit : passOrder) {  // This is C++11 style -- alter as needed
    if (passHighCards(player.hand, getHighCards(suit), result))
        return result;
} 
```

（如果总是只有一两个向量，则使用向量可能会过大，但我假设真正的代码可能会处理所有的西装。）

这使它更容易阅读。程序员可以看到，首先你要决定传递卡片的顺序，然后你实际上是在传递它们。两个单独的步骤将更加清晰。只有一个调用 passCards 的地方比将其副本分散在整个决策逻辑中更不容易出现愚蠢的拼写错误。它还将使调试变得更容易，因为您可以在非常特定的情况下设置断点，或者您可以在循环开始时设置断点并检查 passOrder。

**简化逻辑**

接下来我们要简化决策逻辑。

选项：

*   哨兵：部分复杂性来自这样一个事实，在某些情况下，您需要取消引用其中一个容器中的最后一张卡，如果容器是空的，您就无法这样做。有时值得考虑在容器中添加哨兵，这样您就不需要测试空箱——您可以保证它永远不会是空的。这可能可行，也可能不可行。您需要使处理容器的所有其他代码都理解哨兵。

*   只是例外：您可以通过选择默认顺序来消除某些子句，例如，先是钻石然后是梅花，然后只测试您需要先是梅花然后是钻石的情况。

*   Express with Temporaries：创建命名良好的临时文件，以简化您必须进行的比较，并根据这些临时文件表达比较。请注意，将空/非空情况分解为临时因素后，您可以通过选择适当的 SENTINEL_VALUE（如 0 或 -1）来消除一些情况。

把它们放在一起：

```
// For readability.
const bool fewerClubs = clubsOnly.size() < diamondsOnly.size();
const bool sameNumber = clubsOnly.size() == diamondsOnly.size();
const int lastDiamondValue =  diamondsOnly.empty() ? -1 : diamondsOnly.back().value;
const int lastClubValue    =  clubsOnly   .empty() ? -1 : clubsOnly   .back().value;

// Decide what order to select cards for passing.
std::vector<Card::Suit> passOrder;
passOrder.push_back(Cards::DIAMONDS);  // default order
passOrder.push_back(Cards::CLUBS);

// Do we need to change the order?
if (fewerClubs || (sameNumber && lastClubValue > lastDiamondValue)) {
    // Yep, so start with the clubs instead.
    passOrder[0] = Cards::CLUBS;
    passOrder[1] = Cards::DIAMONDS;
}

// Do it.
for (auto suit : passOrder) {  // This is C++11 style -- alter as needed
    if (passHighCards(player.hand, getHighCards(suit), result))
        return result;
} 
```

这假设 getHighCards 处理可能为空的容器作为输入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T14:35:32.510

我不确定这是否是一个巨大的改进，但你可以通过以下方式消除一些麻烦：

```
if (thing1.empty() && thing2.empty())
   return func4();
else if (thing1.empty())
    return func2();
else if (thing2.empty())
    return func1();
else if (thing1.property < thing2.property)
    return func1();
else if (thing2.property < thing1.property)
    return func2();
else
    return func3(); 
```

为了保持一致性，我取下了牙套；它们可以恢复，但会增加代码的长度，而对可读性的好处几乎没有。这也避免了负面影响；他们总是使条件（有点）难以阅读。这不是您的代码中的主要问题；条件复杂时可能会出现这种情况。

您可以合理地争辩说，由于所有操作都是`return`语句，因此`else`每次都可以删除。

* * *

给定一个更大的例子，那么你的所有代码都会导致一个或两个非常相似的动作，这取决于某些情况。

在这种情况下，应该应用 Kernighan 和 Plauger的优秀（但略微过时且已绝版）书“[编程风格的要素”中的一句格言：](https://rads.stackoverflow.com/amzn/click/com/0070342075)

*   子例程调用允许我们总结参数列表中的不规则性 [...]
*   [t]子程序本身总结了代码的规律 [...]

相应地进行编码，以与之前建议的方式类似的方式避免条件树中的混乱。

```
CardType pass[2] = { -1, -1 };  // Card::INVALID would be nice

if (clubsOnly.empty() && diamondsOnly.empty())
{
    ...do undocumented action for no diamonds or clubs...
}
else if (diamondsOnly.empty())
{
    pass[0] = Card::CLUBS;
}
else if (clubsOnly.empty())
{
    pass[0] = Card::DIAMONDS;
}
else if (diamondsOnly.size() < clubsOnly.size())
{
    pass[0] = Card::DIAMONDS;
    pass[1] = Card::CLUBS;
}
else if (clubsOnly.size() < diamondsOnly.size())
{
    pass[0] = Card::CLUBS;
    pass[1] = Card::DIAMONDS;
}
else if (diamondsOnly.back().value > clubsOnly.back().value)
{
    pass[0] = Card::DIAMONDS;
    pass[1] = Card::CLUBS;
}
else
{
    pass[0] = Card::CLUBS;
    pass[1] = Card::DIAMONDS;
} 
```

然后，当你涵盖了所有条件后，执行一个简单的循环来做正确的事情。

```
for (int i = 0; i < 2; i++)
{
    if (pass[i] != -1 && passHighCards(player.hand, getHighCards(pass[i]), result))
        return result;
}

...undocumented what happens here... 
```

2 有点不舒服；它出现两次。

但是，总的来说，这为您提供了一个线性序列的测试，每个测试之后都有简单的对称动作（为了一致性，这次保留了大括号，因为动作不止一行；一致性比大括号本身的存在与否更重要）。当关于做什么的决定完成后，你就真的去做了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T16:49:16.123

您可以计算所有条件并将它们发送到某个函数，该函数应该做出决定，并返回一个告诉下一步该做什么的代码。所有重复的“模式”都将在函数内部。

```
// return decision1 or decision2, depending on the result of comparison of properties
// Note: type is ssize_t to accommodate bool, size_t and whatever type is 'value'
int decision(ssize_t property1, ssize_t property2, int decision1, int decision2)
{
    if (property1 > property2)
        return decision1;
    else if (property2 > property1)
        return decision2;
    else
        return 0;
}

some_func()
{
    int decision = decide(!diamondsOnly.empty(), !clubsOnly.empty(), 1, 2);
    if (!decision)
        decision = decide(diamondsOnly.size(), clubsOnly.size(), 3, 4);
    if (!decision)
        decision = decide(diamondsOnly.back().value, clubsOnly.back().value, 3, 4);

    bool flag;
    switch (decision)
    {
        case 1:
            flag = passHighCards(player.hand, getHighCards(Card::DIAMONDS), result);
            break;
        case 2:
            flag = passHighCards(player.hand, getHighCards(Card::CLUBS), result);
            break;
        case 3:
            flag = passHighCards(player.hand, getHighCards(Card::DIAMONDS), result);
            flag = passHighCards(player.hand, getHighCards(Card::CLUBS), result);
            break;
        case 4:
            flag = passHighCards(player.hand, getHighCards(Card::CLUBS), result);
            flag = passHighCards(player.hand, getHighCards(Card::DIAMONDS), result);
            break;
        default:
            flag = whatever();
            break;
    }

    if (flag)
        return result;
} 
```

* * *

在上面的代码中，该`switch`语句违反了 DRY；如果您认为这仍然是一个问题，您可以使用“聪明”的代码将动作编码到各自的位中：

*   位 0：是否做任何事情
*   第 1 点：首先要做什么
*   Bit 2：是否做第二件事
*   位 3：下一步做什么

* * *

```
if ((decision & 1) == 0) {flag = whatever;}
else
{
    thing1 = (decision & 2) ? Card::DIAMONDS : Card::CLUBS
    flag = passHighCards(player.hand, thing1, result);
    if (decision & 4)
    {
        thing2 = (decision & 8) ? Card::DIAMONDS : Card::CLUBS;
        flag = passHighCards(player.hand, thing2, result);
    }
} 
```

然而，在我看来，这个“符合 DRY 标准”的作品看起来比`switch`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T14:46:07.213

创建一个接口说IMyCompare。使用一个接受一个 IMyCompare 并返回一个 Func 的方法然后你可以在每件事上实现整个事情

并做一些类似 AThing.MyCompare(otherThing);

如果每个条件的哪个函数不是由事物的类型确定的，则将一个函数数组传递给比较调用。

我很想从 MyCompare 返回一个 int，并将如何使用它委托给我认为的其他东西。

# sphinx - 如何更新在 sphinx 中归档的字符串？

> ID：10535964
> 
> 赞同：1
> 
> 时间：2012-05-10T14:17:36.760
> 
> 标签：sphinx

我想通过 php 更新 sql_attr_string 字段值，当我尝试更新它时显示以下错误

searchd 错误：索引 femalematrimonyprofileindex47：无法更新属性“thumbimg”（必须是布尔值、整数、大整数、浮点数、时间戳或 MVA）

谢谢和问候，毗湿奴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:04:14.057

更新字符串属性尚未实现。

# grails - 如何在groovy中将日期与当前日期进行比较

> ID：10535965
> 
> 赞同：5
> 
> 时间：2012-05-10T14:17:38.150
> 
> 标签：grails, groovy

我在 grails 项目的域类中有一个 validFrom 和 validTo 日期字段。我想在其验证的基础上创建一个服务。谁能告诉我如何检查它是否大于或小于当前系统日期？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T14:20:44.683

它是

```
Date now = new Date()
if (validFrom.before(now) && validTo.after(now)) {
  //valid for this moment
} 
```

# java - SEAM 会话或会话范围 bean？

> ID：10535967
> 
> 赞同：1
> 
> 时间：2012-05-10T14:17:45.623
> 
> 标签：java, seam, seam2, seam-conversation

我对在有状态的支持 bean 上使用哪个范围有点困惑，我目前有一个通过 JSF 将用户结果传递到 xhtml 页面的 bean，该 bean 使用默认值（对话范围），@Create 方法标记为 @ Begin(join=true)....这应该使 bean 加入当前长期运行的对话，对吗？

但是我发现，当用户导航到不同的页面，然后再次返回时，@Create 方法在支持 bean 上再次被调用，我想避免这种情况

我发现解决此问题的唯一方法是将 bean 标记为 @Scope(ScopeType.SESSION) ，它在用户登录会话的整个生命周期内维护 bean（如预期的那样）。

但是在 SEAM 文档中阅读了几次后，以这种方式使用会话范围的支持 bean 是不好的做法......我的问题是，我如何阻止会话范围的 bean 在每次重新加载页面时重置......我觉得我错过了有关对话范围的一些基本内容？？！有人可以启发我吗

我在下面包含了一个有问题的bean的编辑版本......

```
@Stateful
@Scope(ScopeType.CONVERSATION)
@Name("sessionActions")
@Restrict("#{identity.isLoggedIn()}")
public class SessionActionsBean implements SessionActions, Serializable {

/**
 * 
 */
private static final long serialVersionUID = 1L;

@Logger private Log log;

@RequestParameter private String sId;
@In Redirect redirect;
@In private MessagePoster messagePoster;
@In private Map<String, String> messages;

@Create
@Begin(join=true)
@Override
public void create(){
        log.debug("bean is being created")
    }

//--------------------------- Cleanup methods
@Remove
@BypassInterceptors
@Override
public void cleanUp(){}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:42:03.393

每次都会重新创建您的 bean，因为当您返回该页面时，您可能会进行新的对话。

如果您需要保持对话打开，您应该在导航期间查看对话传播机制。

但是，如果逻辑要求的话，每次都重新创建 bean 并没有错。如果您担心性能，请不要在正确分析之前对对象创建进行预防性假设。

如果您的`@Create`和`@Remove`方法管理范围比对话更广泛的资源，则应将对话范围 bean 与管理该资源的另一个会话范围 bean 分开。

这是一个非常抽象的推理，但我希望它能有所帮助。

# ruby-on-rails - Rails 3 MSSQL 2005 问题与 xml 数据类型字段被截断为 2070 字节

> ID：10535972
> 
> 赞同：1
> 
> 时间：2012-05-10T14:18:01.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, tiny-tds

我在：
Windows XP
MSSQL 2005
Rails 3.0.9
activerecord-sqlserver-adapter
tinytds

当我尝试检索具有 xml 类型的字段内容时，我遇到了 xml 字符串被剪切的问题。

提前感谢您的帮助

这是存储在 DB 中的 xml（对不起，俄语字母）：

```
<application>
  <patent-type>Заявка на винахід</patent-type>
  <title>WAY</title>
  <native-number>inner123</native-number>
  <inid51 type="array" />
  <inid54>
    <x54-title-ukr>WAY</x54-title-ukr>
    <x54-title-rus />
    <x54-title-eng />
  </inid54>
  <applicants type="array">
    <applicant order="1">
      <app-person>physical</app-person>
      <app-name-ukr>Drobyazko Ob Ob</app-name-ukr>
      <app-addr-ukr>Ukrainka</app-addr-ukr>
      <app-country>UA</app-country>
      <app-kzo />
      <app-name-rus />
      <app-addr-rus />
      <app-name-eng />
      <app-addr-eng />
    </applicant>
    <applicant order="2">
      <app-person>physical</app-person>
      <app-name-ukr>Stetsenko Ser Vol</app-name-ukr>
      <app-addr-ukr>Kyiv</app-addr-ukr>
      <app-country>UA</app-country>
      <app-kzo />
      <app-name-rus />
      <app-addr-rus />
      <app-name-eng />
      <app-addr-eng />
    </applicant>
  </applicants>
  <inventors type="array">
    <inventor order="1">
      <inv-name-ukr>Drobyazko Ob Ob</inv-name-ukr>
      <inv-addr-ukr>Ukrainka</inv-addr-ukr>
      <inv-country>UA</inv-country>
      <inv-publ>Ні</inv-publ>
      <inv-name-rus />
      <inv-addr-rus />
      <inv-name-eng />
      <inv-addr-eng />
    </inventor>
    <inventor order="2">
      <inv-name-ukr>Stetsenko Ser Vol</inv-name-ukr>
      <inv-addr-ukr>Kyiv</inv-addr-ukr>
      <inv-country>UA</inv-country>
      <inv-publ>Ні</inv-publ>
      <inv-name-rus />
      <inv-addr-rus />
      <inv-name-eng />
      <inv-addr-eng />
    </inventor>
  </inventors>
  <priorities>
    <priority-cfg>
      <type>prr-none</type>
      <prr-date />
      <prr-numb />
      <is-priority-3x />
      <is-priority-62 />
      <is-priority-66 />
    </priority-cfg>
    <priority-3x type="array" />
    <priority-62 type="array" />
    <priority-66 type="array" />
  </priorities>
  <inid86>
    <x86-numb />
    <x86-date />
  </inid86>
  <inid87>
    <x87-numb />
    <x87-date />
  </inid87>
  <representative>
    <repr-name>Drobyazko Ooo KKK</repr-name>
    <repr-regnum>200</repr-regnum>
    <repr-person>legal</repr-person>
  </representative>
  <address>
    <addr-country>UA</addr-country>
    <addr-zipcode />
    <addr-region />
    <addr-town-type>м.</addr-town-type>
    <addr-town-val>Kyiv</addr-town-val>
    <addr-rayon />
    <addr-street-type>вул.</addr-street-type>
    <addr-street-val />
    <addr-building-type>буд.</addr-building-type>
    <addr-building-val />
    <addr-room-type>кв.</addr-room-type>
    <addr-room-val />
    <addr-addressee-person>physical</addr-addressee-person>
    <addr-addressee>Drobyazko Dkkd Lll</addr-addressee>
    <addr-tel>2323232</addr-tel>
    <addr-fax />
    <addr-email />
    <full-address>м. Kyiv, UA; Drobyazko Dkkd Lll</full-address>
  </address>
  <flags>
    <force-publication />
    <patent-foreign />
  </flags>
</application> 
```

使用**Eclaim.find(1).app_xml**我得到了上述字段的内容。
我也在将 xml 字段写入文件**File.open("c:/w.txt", 'wb') { |f| f.write Eclaim.find(100003).app_xml }**

文件内容（大小**2070**字节）为：

```
<application><patent-type>Р—Р°СЏРІРєР° РЅР° РІРёРЅР°С…С–Рґ&lt;/patent-type><title>WAY</title><native-number>inner123</native-number><inid51 type="array"/><inid54><x54-title-ukr>WAY2</x54-title-ukr><x54-title-rus/><x54-title-eng/></inid54><applicants type="array"><applicant order="1"><app-person>physical</app-person><app-name-ukr>Drobyazko Ob Ob</app-name-ukr><app-addr-ukr>Ukrainka</app-addr-ukr><app-country>UA</app-country><app-kzo/><app-name-rus/><app-addr-rus/><app-name-eng/><app-addr-eng/></applicant><applicant order="2"><app-person>physical</app-person><app-name-ukr>Stetsenko Ser Vol</app-name-ukr><app-addr-ukr>Kyiv</app-addr-ukr><app-country>UA</app-country><app-kzo/><app-name-rus/><app-addr-rus/><app-name-eng/><app-addr-eng/></applicant></applicants><inventors type="array"><inventor order="1"><inv-name-ukr>Drobyazko Ob Ob</inv-name-ukr><inv-addr-ukr>Ukrainka</inv-addr-ukr><inv-country>UA</inv-country><inv-publ>РќС–&lt;/inv-publ><inv-name-rus/><inv-addr-rus/><inv-name-eng/><inv-addr-eng/></inventor><inventor order="2"><inv-name-ukr>Stetsenko Ser Vol</inv-name-ukr><inv-addr-ukr>Kyiv</inv-addr-ukr><inv-country>UA</inv-country><inv-publ>РќС–&lt;/inv-publ><inv-name-rus/><inv-addr-rus/><inv-name-eng/><inv-addr-eng/></inventor></inventors><priorities><priority-cfg><type>prr-none</type><prr-date/><prr-numb/><is-priority-3x/><is-priority-62/><is-priority-66/></priority-cfg><priority-3x type="array"/><priority-62 type="array"/><priority-66 type="array"/></priorities><inid86><x86-numb/><x86-date/></inid86><inid87><x87-numb/><x87-date/></inid87><representative><repr-name>Drobyazko Ooo KKK</repr-name><repr-regnum>200</repr-regnum><repr-person>legal</repr-person></representative><address><addr-country>UA</addr-country><addr-zipcode/><addr-region/><addr-town-type>Рј.</addr-town-type><addr-town-val>Kyiv</addr-town-val><addr-rayon/><addr-street-type>РІСѓР».</addr-street-type><addr-street-val/><addr-building-type>Р±СѓРґ.</addr-building-type><addr-building-val/><addr-room-type>РєРІ.</addr-room-type><addr-room-val/><addr-addressee-person>physical</addr-addressee- 
```

看起来 Rails 将 xml 字段的内容截断为**2070**字节。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:11:12.567

我经常看到这个问题，并且有一个非常简单的答案。SQL Server 有一个名为 TEXTSIZE (1) 的设置，该设置为 DBLIB/TinyTDS 连接设置为相对较小的大小。最近我在这里让适配器将其设置为模拟默认 ODBC 连接 (2) 的大小。我们的 README (3) 中还有一个部分用于旧版本的适配器，允许您配置连接，以便您也可以设置 TEXTSIZE。

*   (1) [http://msdn.microsoft.com/en-us/library/ms186238.aspx](http://msdn.microsoft.com/en-us/library/ms186238.aspx)
*   (2) [https://github.com/rails-sqlserver/activerecord-sqlserver-adapter/commit/8c9f89e0d7d4b32ae10a011cb2bc2c24de13fe1a](https://github.com/rails-sqlserver/activerecord-sqlserver-adapter/commit/8c9f89e0d7d4b32ae10a011cb2bc2c24de13fe1a)
*   (3) [https://github.com/rails-sqlserver/activerecord-sqlserver-adapter#configure-connection--app-name](https://github.com/rails-sqlserver/activerecord-sqlserver-adapter#configure-connection--app-name)

# bash - 如何使用 Posix shell 删除文件名前缀

> ID：10535985
> 
> 赞同：37
> 
> 时间：2012-05-10T14:18:40.630
> 
> 标签：bash, shell, prefix

如何删除 Bash 中的文件名前缀，如下例所示：

```
XY TD-11212239.pdf 
```

要得到

```
11212239.pdf 
```

即，删除`XY TD-`？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-08-27T21:05:57.297

您说*POSIX* shell 将包括 BASH、Kornshell、Ash、Zsh 和 Dash。幸运的是，所有这些 shell 都会对变量值进行*模式过滤。*

当您`*`在 Unix/Linux 命令行中指定文件时使用的模式是：

```
$ ls *.sh  # Lists all files with a `.sh` suffix 
```

这些 POSIX shell 使用四种不同的模式过滤：

*   `${var#pattern}`- 从左侧删除与模式匹配的最小字符串。
*   `${var##pattern}`- 从左侧删除与模式匹配的最大字符串。
*   `${var%pattern}`- 从右侧删除与模式匹配的最小字符串。
*   `${var%%pattern}`- 从右侧删除与模式匹配的最大字符串。

这里有一些例子：

```
foo="foo-bar-foobar"
echo ${foo#*-}   # echoes 'bar-foobar'  (Removes 'foo-' because that matches '*-')
echo ${foo##*-}  # echoes 'foobar' (Removes 'foo-bar-')
echo ${foo%-*}   # echoes 'foo-bar'
echo ${foo%%-*}  # echoes 'foo' 
```

您并没有真正解释您想要什么，也没有包含任何代码示例，因此很难想出可以满足您需求的东西。但是，使用模式过滤，您可能可以准确地确定您想要对文件名做什么。

```
file_name="XY TD-11212239.pdf"
mv "$file_name" "${file_name#*-}" # Removes everything from up to the first dash 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-10T14:26:22.623

您提供的信息很少，但假设您在 bash 中执行此操作，并且有一个需要删除其前缀的文件列表，您可以通过管道将该列表`sed`：

例如：

```
./generate_your_list_of_files | sed -e 's/^prefix//' 
```

或者如果您的文件列表是空格分隔的：

```
echo TD-file1 TD-file2.x.yt TD-file3-beep | sed -e 's/\<TD-//g' 
```

第一个匹配行首的前缀并将其删除。第二个匹配`TD-`（或您要替换的任何其他前缀）仅当它发生在单词的开头并在所有行的所有匹配中替换它时。但是这*可能*会变得很危险，例如像`TD-file\ that\ TD-contains\ space.txt`变成这样的文件`file\ that\ contains\ space.txt`

作为旁注，不要使用`ls`. [这是一个可怕的错误](http://mywiki.wooledge.org/BashPitfalls#for_i_in_.24.28ls_.2A.mp3.29)。如果您需要获取要使用的文件列表并在多个地方引用，我建议将它们放在一个数组中：

```
files=(*) 
```

然后使用这个数组。

* * *

由于受欢迎的要求（下面的单个评论），这里是如何重命名目录中以`XY TD-`删除前缀开头的所有文件（感谢@tripleee）：

```
for file in prefix*;
do
    mv "$file" "${file#XY TD-}"
done 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-08-27T19:54:34.930

您还可以使用**重命名**工具

用自制软件安装它

`brew install rename`

然后从目录中运行以下命令以从所有文件中删除“前缀-”

`rename -d prefix- *`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-08-27T20:50:27.847

除了其他答案中显示的子字符串提取之外，您还可以使用子字符串替换。给定文件：

```
fn="XY TD-11212239.pdf" 
```

然后子字符串替换：

```
fn_new=${fn//*TD-/} 
```

也会做你想做的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-27T19:58:53.040

```
$ s='XY TD-11212239.pdf'
$ echo "${s#XY TD-}"
11212239.pdf 
```

如果您的目标是执行批量重命名：

```
while IFS= read -r -d '' filename; do
  mv "$filename" "${filename#XY TD-}"
done < <(find . -type f -name 'XY TD-*' -print0) 
```

请注意，这`<()`是 POSIX sh 中不存在的 bash 扩展。您可以将其替换为表单的管道`find ... | while`。

同样，`-print0`在 POSIX 查找中不存在 GNU 扩展。POSIX find 没有提供等效的方法来定位包含换行符的名称安全的文件，因此难以替换。

# mysql - 适用于 Java、Tomcat、MySQL 组合的安装程序

> ID：10535986
> 
> 赞同：1
> 
> 时间：2012-05-10T14:18:42.360
> 
> 标签：mysql, tomcat, java

我们有一个基于Java平台安装复杂的开源解决方案。需要 JDK、MySQL 和 Tomcat 以及 webapp。我们跨平台运行，所以我们想使用基于 JRE 的 LZPack。我们的软件可以在这里找到[http://open-modeling.sourceforge.net](http://open-modeling.sourceforge.net) 当已经有 JDK 和/或 MySQL 版本时会变得很困难。有没有人有这个安装脚本并喜欢与我们分享。LZPack 的一些起点也是受欢迎的。MySQL 数据库必须通过执行 SQL 文件来填充。

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:30:27.567

如果你的数据库不是太大，可以尝试使用纯java，嵌入进程数据库（sych as hypersonic 或 apache derby）。这将显着简化应用程序的设置。

如果您将使用 JRE 的绝对路径，您将不会受到已安装的 JRE 的影响

# c# - 从当前窗口关闭上一个窗口

> ID：10535987
> 
> 赞同：1
> 
> 时间：2012-05-10T14:18:46.513
> 
> 标签：c#, silverlight, childwindow

在 Silverlight 中，我使用的是配置文件窗口，其中包含在超链接按钮中删除当前配置文件的选项。当用户点击超链接按钮时，它会将他们带到一个新表单以确认删除。尽管删除功能已经起作用（即配置文件已从数据库中删除），但如何在用户确认时关闭第一个窗口？

这就是超链接所说的-

```
private void deleteProfile(object sender, RoutedEventArgs e)
    {

        deleteProfile dProfile = new deleteProfile();
        dProfile.textBlock1.Text = System.Convert.ToString("Delete " + lblMsg.Content);
        dProfile.Show();
    } 
```

然后从那里`dProfile`我想关闭`profileForm`当用户单击确定时超链接所在的那个-

```
private void OKButton_Click(object sender, RoutedEventArgs e)
    {

        textBlock1.Text = "Profile Deleted.";
        profileForm.Close();

        Close();
    } 
```

但是，该`dProfile`表单仅在我创建它的新实例时才识别`profileForm`，我如何引用我正在使用的当前实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:33:06.190

可能还有其他方法，但您可以尝试以下方法。

在子窗口中创建事件

```
public event EventHandler SubmitClicked; 
```

在您的 OKButton_Click 事件中

```
private void OKButton_Click(object sender, RoutedEventArgs e)
{
    if (SubmitClicked != null)
    {
        SubmitClicked(this, new EventArgs());
    }
} 
```

在**主窗口**中执行以下操作，针对 ChildWindow 对象附加事件

```
deleteProfile.SubmitClicked += new EventHandler(deleteProfile _SubmitClicked); 
```

那么如果你可以这样做：

```
private void deleteProfile_SubmitClicked(object sender, EventArgs e)
{
    this.Close();
} 
```

*（虽然这里不需要，但您可以使用该过程将值从子窗口传递到父窗口）*也可以查看这篇[文章](http://www.silverlighttips.com/post/2009/09/24/Passing-value-from-child-window-to-parent-window.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:31:40.373

让你自己成为删除表单上的一个属性。该属性应为：IsDeleted。当用户单击确定时将其设置为 True。然后当您返回主窗口时，读取此属性并关闭当前窗口。

或者从子窗口获取结果...

```
var viewModel = _srvLocator.GetInstance<YourViewModel>();
var inst = _srvLocator.GetInstance<IWindowManager>();

if (inst.ShowDialog(viewModel).Value)
{
Close();
} 
```

# java - Java 单元测试 - 常量字段与 setUp()

> ID：10535988
> 
> 赞同：3
> 
> 时间：2012-05-10T14:18:51.707
> 
> 标签：java, unit-testing, junit

我正在为接口的实现编写一个测试类，并希望针对另一个实现测试我的实现（即确保一致性）。然后，测试方法将测试每个接口方法以检查这一点。

为此，我可以：

a）创建`private static`原始实现和我的新实现的常量字段：

```
public class MyImplTest extends TestCase {

  private static OldImpl _original;
  private static MyImpl _myImpl;
  static {
    // instantiate _original and _myImpl
  }

  // My tests
} 
```

b）创建`private`两个实现的字段，并使用以下方法实例化它们`setUp()`：

```
public class MyImplTest extends TestCase {
  private OldImpl _original;
  private MyImpl _myImpl;

  public void setUp(){
    // instantiate _original and _myImpl
  }

  // My tests
} 
```

这些是首选/被认为是好的风格吗？我的直觉建议 (b)，但我想创建相当大的对象，并`setUp()`为 中的每个`testSomething()`方法运行`TestCase`，因此两者`_original`和`_myImpl`都会被创建多次。

FWIW，我正在使用 JUnit 3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T14:23:04.123

使用 setup 方法将导致初始化代码在每次测试之前运行。静态初始化器将在类首次加载时运行一次（并且只运行一次），这意味着它们在每次测试运行时只会执行一次。

为每个测试初始化​​所有内容通常是一个更好的主意，只是为了消除一个测试中任何对象的状态影响其他测试的能力。

我唯一一次发现使用静态初始化很有用是在我编写集成（而不是单元）测试时，而我的测试类的构建成本很高。我确信该对象是无状态的，因此测试不会相互干扰。如果您不确定，最好使用 setup() 方法以确保安全。

# shell - 有没有办法在 TextMate 中嵌入终端窗口？

> ID：10535989
> 
> 赞同：4
> 
> 时间：2012-05-10T14:18:53.983
> 
> 标签：shell, terminal, textmate

我希望能够将我的 TextMate 窗口一分为二，在窗口的一半中使用常用的编辑器，在另一半中使用终端。类似于 Notepad++ 中的[这种布局](http://img198.imageshack.us/img198/8373/86448854.jpg)（在 Windows 上）。

我一直在寻找如何做到这一点 2 小时，但还没有找到。

# axapta - 无法打印图像和位图

> ID：10535995
> 
> 赞同：1
> 
> 时间：2012-05-10T14:19:14.163
> 
> 标签：axapta, dynamics-ax-2009

我正在尝试使用 Dynamics AX 2009 打印标签（带有条形码、文本等）和图像。

问题是除了图像之外的所有东西都被打印出来了！

可能是什么问题？图像有一些 Axapta 限制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:43:23.537

AX 的旧版本不支持 GIF 文件，我不知道它是否在 AX 2009 中修复。

报告`tutorial_GraphicsCustBalanceList`并`Tutorial_sushiInvoice`演示如何打印图像。

# javascript - jScrollPane 滚动量

> ID：10535996
> 
> 赞同：3
> 
> 时间：2012-05-10T14:19:16.653
> 
> 标签：javascript, jquery, jscrollpane, jquery-jscrollpane

我正在使用 jScrollPane 并试图找出如何获得滚动量。基本上我想知道用户何时到达滚动的底部，以便我可以触发另一个功能。这是我的功能：

```
in_page_scroll : function() {
    "use strict";
    var inpage_container = $('.pal_inpage_wrapper'),
        inpage_top_padd = $('.header_wrapper').height(),
        win_main_height = $(window).height() - inpage_top_padd;
        inpage_container.css({
            height: win_main_height,
            marginTop: inpage_top_padd,
            paddingTop: 0}).jScrollPane({
                autoReinitialise: true,
                enableKeyboardNavigation : true
            }).bind('mousewheel', function(e) {
                e.preventDefault();
            });
} 
```

提前致谢。

- * 编辑 * - - - - - - - - - - - - - - - - - - - - - - - --------------------------------------

我刚刚找到了答案。这里是：

```
$(function() {
    var element = $('.scroll-pane').jScrollPane(),
        api = element.data('jsp');

    $('.scroll-pane').bind('scroll', function() {
        if($('.scroll-pane').outerHeight() + api.getContentPositionY() >= api.getContentHeight()) {
            //Fire another function here
        }
    });             
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:48:56.620

只是为了提供推荐和时尚的完成，我使用这个：

```
JS

    $('#jScrollPane').bind(
        'jsp-滚动-y',
        函数（事件，scrollPositionY，isAtTop，isAtBottom）
        {   
            if(scrollPositionY > 0) {
                $(this).addClass('ShadowTOP')
            }
            如果（isAtTop）{
                $(this).removeClass('ShadowTOP')
            }
        }
    ).jScrollPane()

```

我添加了过渡效果。效果将类似于 GMail。

```
风格

    .TransitionShadow{
        过渡：所有 0.35 秒缓入出；
        -webkit-transition：所有 0.35 秒缓入出局；
        -moz-transition：所有 0.35 秒缓进出；
    }
    .ShadowTOP{
       -webkit-box-shadow: 插入 0px 12px 16px -10px rgba(100, 100, 100, 0.3);
        box-shadow: inset 0px 10px 16px -10px rgba(100, 100, 100, 0.3);
    }

```