# StackOverflow 问答 12426000-12426999

# c# - 从 shp 文件中获取矢量方向

> ID：12426008
> 
> 赞同：0
> 
> 时间：2012-09-14T13:54:29.093
> 
> 标签：c#, gis

我已经开始使用 .shp 文件对 gis 应用程序进行一些研究，但我找不到任何好的文档来源，但我真的很想知道是否给定 .shp（及其伴随文件）有办法想知道这些文件中存储的信息是否提供了向量的方向？更重要的是，我正在使用特定的街道地图，我想知道如何检查我的文件是否为我提供了矢量方向。

如果它有任何相关性，我将使用 SharpMap 作为我的 gis 库，但我也愿意接受这方面的建议

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:31:00.663

形状文件格式支持多种不同类型的几何图形，但对于您的问题，我将假设我们正在讨论具有多行特征的形状文件。

存储的几何图形具有坐标，具体取决于形状文件作者选择的投影/基准的类型，这些坐标可以是简单的 {X,Y} 对 - 或者它们可以是 {X,Y,Z,M} -每个坐标中的信息各不相同，并且有许多不同的方案。好的，这就是价值——但 X 和 Y 的“价值”是什么？这取决于形状文件的作者在创建它时使用的地图投影。形状文件格式本身并不能告诉您 X 和 Y 的测量值或它们的含义。例如，在流行的 WGS1984 投影中，X 和 Y 是经度和纬度。然而，在 NAD1983 投影中，这些值表示与本地尺度上已知点的距离。

形状文件更像地图（在纸上），形状文件的名称是一个准确的绰号。它基本上是一个几何信息持有者，构成这些几何的实际信息可能会根据形状的用途/意图而有所不同。一个简单的人行道建设初步计划很可能是沿路的一堆矩形（简单的 X、Y 多边形），但海拔等高线图可能包含 X、Y、Z、M 信息，其中 Z 是海拔，M 是沿轮廓存储的测量值。

话虽如此，如果您想要形状文件中的矢量信息（我假设您的意思是几何矢量） - 只要您使用带有文件中信息的坐标系和您愿意在形状文件的本地地图投影中工作（或将几何图形重新投影到您正在使用的坐标系）。

# android - OutOfMemoryError 发送 PDF HTTP Post

> ID：12426010
> 
> 赞同：2
> 
> 时间：2012-09-14T13:54:33.323
> 
> 标签：android, http, post, base64, out-of-memory

我们正在为 android 编写应用程序，当我们向服务器发送 PDF 文件（通过 HTTP POST）时，应用程序崩溃并显示此异常：

```
09-14 15:31:59.253: D/dalvikvm(22978): GC_EXPLICIT freed 437 objects / 1236120 bytes in 47ms
09-14 15:31:59.296: D/dalvikvm(22978): GC_FOR_MALLOC freed 29 objects / 1648 bytes in 45ms
09-14 15:31:59.316: I/dalvikvm-heap(22978): Grow heap (frag case) to 13.987MB for 5171605-byte allocation
09-14 15:31:59.359: D/dalvikvm(22978): GC_FOR_MALLOC freed 0 objects / 0 bytes in 40ms
09-14 15:31:59.394: D/dalvikvm(22978): GC_FOR_MALLOC freed 2 objects / 48 bytes in 27ms
09-14 15:31:59.410: I/dalvikvm-heap(22978): Grow heap (frag case) to 20.563MB for 6895468-byte allocation
09-14 15:31:59.453: D/dalvikvm(22978): GC_FOR_MALLOC freed 0 objects / 0 bytes in 41ms
09-14 15:32:00.089: D/dalvikvm(22978): GC_FOR_MALLOC freed 5 objects / 120 bytes in 23ms
09-14 15:32:00.117: I/dalvikvm-heap(22978): Grow heap (frag case) to 33.715MB for 13790920-byte allocation
09-14 15:32:00.164: D/dalvikvm(22978): GC_FOR_MALLOC freed 0 objects / 0 bytes in 43ms
09-14 15:32:00.214: D/dalvikvm(22978): GC_FOR_MALLOC freed 13 objects / 6895864 bytes in 26ms
09-14 15:32:00.214: I/dalvikvm-heap(22978): Forcing collection of SoftReferences for 13790920-byte allocation
09-14 15:32:00.242: D/dalvikvm(22978): GC_FOR_MALLOC freed 0 objects / 0 bytes in 25ms
09-14 15:32:00.242: E/dalvikvm-heap(22978): Out of memory on a 13790920-byte allocation.
09-14 15:32:00.242: I/dalvikvm(22978): "main" prio=5 tid=1 RUNNABLE JIT
09-14 15:32:00.242: I/dalvikvm(22978):   | group="main" sCount=0 dsCount=0 s=N obj=0x4001d8b0 self=0xcd28
09-14 15:32:00.242: I/dalvikvm(22978):   | sysTid=22978 nice=0 sched=0/0 cgrp=default handle=-1345017808
09-14 15:32:00.242: I/dalvikvm(22978):   at java.nio.HeapByteBuffer.<init>(HeapByteBuffer.java:~45)
09-14 15:32:00.242: I/dalvikvm(22978):   at java.nio.ReadWriteHeapByteBuffer.<init>(ReadWriteHeapByteBuffer.java:47)
09-14 15:32:00.242: I/dalvikvm(22978):   at java.nio.BufferFactory.newByteBuffer(BufferFactory.java:49)
09-14 15:32:00.242: I/dalvikvm(22978):   at java.nio.ByteBuffer.allocate(ByteBuffer.java:52)
09-14 15:32:00.242: I/dalvikvm(22978):   at java.nio.charset.CharsetEncoder.encode(CharsetEncoder.java:317)
09-14 15:32:00.242: I/dalvikvm(22978):   at java.nio.charset.Charset.encode(Charset.java:692)
09-14 15:32:00.242: I/dalvikvm(22978):   at java.lang.String.getBytes(String.java:903)
09-14 15:32:00.242: I/dalvikvm(22978):   at vetic.iventory.cds.CustomEntity.getContentLength(CustomEntity.java:69)
09-14 15:32:00.242: I/dalvikvm(22978):   at org.apache.http.protocol.RequestContent.process(RequestContent.java:79)
09-14 15:32:00.242: I/dalvikvm(22978):   at org.apache.http.protocol.BasicHttpProcessor.process(BasicHttpProcessor.java:290)
09-14 15:32:00.242: I/dalvikvm(22978):   at org.apache.http.protocol.HttpRequestExecutor.preProcess(HttpRequestExecutor.java:160)
09-14 15:32:00.242: I/dalvikvm(22978):   at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:464)
09-14 15:32:00.242: I/dalvikvm(22978):   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
09-14 15:32:00.242: I/dalvikvm(22978):   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
09-14 15:32:00.242: I/dalvikvm(22978):   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
09-14 15:32:00.242: I/dalvikvm(22978):   at vetic.iventory.cds.CustomHttpClient.executeHttpCustomPost(CustomHttpClient.java:111)
09-14 15:32:00.242: I/dalvikvm(22978):   at sql.vetil.edel.EtatDesLieuxBDD.sendFile(EtatDesLieuxBDD.java:176)
09-14 15:32:00.242: I/dalvikvm(22978):   at sql.vetil.edel.EtatDesLieuxBDD.getReturnServer(EtatDesLieuxBDD.java:212)
09-14 15:32:00.242: I/dalvikvm(22978):   at vetic.iventory.cds.P8$3.onClick(P8.java:224)
09-14 15:32:00.242: I/dalvikvm(22978):   at android.view.View.performClick(View.java:2408)
09-14 15:32:00.246: I/dalvikvm(22978):   at android.view.View$PerformClick.run(View.java:8818)
09-14 15:32:00.246: I/dalvikvm(22978):   at android.os.Handler.handleCallback(Handler.java:587)
09-14 15:32:00.246: I/dalvikvm(22978):   at android.os.Handler.dispatchMessage(Handler.java:92)
09-14 15:32:00.246: I/dalvikvm(22978):   at android.os.Looper.loop(Looper.java:123)
09-14 15:32:00.246: I/dalvikvm(22978):   at android.app.ActivityThread.main(ActivityThread.java:4627)
09-14 15:32:00.246: I/dalvikvm(22978):   at java.lang.reflect.Method.invokeNative(Native Method)
09-14 15:32:00.246: I/dalvikvm(22978):   at java.lang.reflect.Method.invoke(Method.java:521)
09-14 15:32:00.246: I/dalvikvm(22978):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
09-14 15:32:00.246: I/dalvikvm(22978):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
09-14 15:32:00.246: I/dalvikvm(22978):   at dalvik.system.NativeStart.main(Native Method)
09-14 15:32:00.246: D/AndroidRuntime(22978): Shutting down VM
09-14 15:32:00.246: W/dalvikvm(22978): threadid=1: thread exiting with uncaught exception (group=0x4001d7d0)
09-14 15:32:00.253: E/AndroidRuntime(22978): FATAL EXCEPTION: main
09-14 15:32:00.253: E/AndroidRuntime(22978): java.lang.OutOfMemoryError
09-14 15:32:00.253: E/AndroidRuntime(22978):    at java.nio.HeapByteBuffer.<init>(HeapByteBuffer.java:45)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at java.nio.ReadWriteHeapByteBuffer.<init>(ReadWriteHeapByteBuffer.java:47)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at java.nio.BufferFactory.newByteBuffer(BufferFactory.java:49)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at java.nio.ByteBuffer.allocate(ByteBuffer.java:52)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at java.nio.charset.CharsetEncoder.encode(CharsetEncoder.java:317)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at java.nio.charset.Charset.encode(Charset.java:692)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at java.lang.String.getBytes(String.java:903)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at vetic.iventory.cds.CustomEntity.getContentLength(CustomEntity.java:69)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at org.apache.http.protocol.RequestContent.process(RequestContent.java:79)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at org.apache.http.protocol.BasicHttpProcessor.process(BasicHttpProcessor.java:290)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at org.apache.http.protocol.HttpRequestExecutor.preProcess(HttpRequestExecutor.java:160)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:464)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at vetic.iventory.cds.CustomHttpClient.executeHttpCustomPost(CustomHttpClient.java:111)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at sql.vetil.edel.EtatDesLieuxBDD.sendFile(EtatDesLieuxBDD.java:176)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at sql.vetil.edel.EtatDesLieuxBDD.getReturnServer(EtatDesLieuxBDD.java:212)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at vetic.iventory.cds.P8$3.onClick(P8.java:224)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at android.view.View.performClick(View.java:2408)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at android.view.View$PerformClick.run(View.java:8818)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at android.os.Handler.handleCallback(Handler.java:587)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at android.os.Handler.dispatchMessage(Handler.java:92)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at android.os.Looper.loop(Looper.java:123)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at android.app.ActivityThread.main(ActivityThread.java:4627)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at java.lang.reflect.Method.invokeNative(Native Method)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at java.lang.reflect.Method.invoke(Method.java:521)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
09-14 15:32:00.253: E/AndroidRuntime(22978):    at dalvik.system.NativeStart.main(Native Method)
09-14 15:32:19.394: I/Process(22978): Sending signal. PID: 22978 SIG: 9
09-14 15:32:19.554: D/dalvikvm(23043): GC_EXTERNAL_ALLOC freed 973 objects / 71752 bytes in 31ms
09-14 15:32:21.046: W/KeyCharacterMap(23043): No keyboard for id 0
09-14 15:32:21.046: W/KeyCharacterMap(23043): Using default keymap: /system/usr/keychars/qwerty.kcm.bin 
```

此片段中引发错误，用于计算要发送的数据的大小（这意味着文件仍未准备好发送）：

```
try {
    size++;
    File f = new File(complexParametres.get(key)); // File to send
    InputStream is = new FileInputStream(f);
    System.gc();
    byte b[] = new byte[(int) f.length()];
    is.read(b);
    size += Base64.encodeBytes(b).getBytes().length; // Parameter encoded in Base64
    is.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

错误在这一行：

```
size += Base64.encodeBytes(b).getBytes().length; 
```

你知道如何避免这个问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:31:32.527

> 检查 android.util.Base64OutputStream。– 哈里斯

下面的代码使用它来发送通过任何`OutputStream`. 只要打电话`sendBase64Encoded(yourFile, httpPostOutputstream)`。

该实现使用 4kbyte 发送任何大小的文件。

```
/** generic InputStream to OutputStream copy */
public static void streamCopy(InputStream in, OutputStream out) throws IOException {
    byte[] buffer = new byte[4 * 1024];
    int read;
    while ((read = in.read(buffer)) != -1) {
        out.write(buffer, 0, read);
    }
}

/** close stuff that can be null, exceptions ignored */
public static void close(Closeable c) {
    if (c != null)
        try {
            c.close();
        } catch (IOException ignored) {
            // silence
        }
}

/** does NOT close out */
public static void sendBase64Encoded(String filename, OutputStream out) {
    File inputFile = new File(filename);
    FileInputStream source = null;
    Base64OutputStream target = null;
    try {
        source = new FileInputStream(inputFile);
        target = new Base64OutputStream(out, Base64.NO_CLOSE);
        streamCopy(source, target);
        target.flush();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        close(source);
        close(target);
    }
} 
```

# c - 编译实模式 asm (rootkit.arsenal)

> ID：12426012
> 
> 赞同：0
> 
> 时间：2012-09-14T13:54:47.997
> 
> 标签：c, assembly, real-mode

我坚持编译本书 rootkit 武器库中提供的 tsr.asm 代码。我在 XP 机器上安装了 open watcom，第一个 asm 列表编译得很好。

编译时，它会抛出错误：“找到多个起始地址”（在 google 上没有找到）。谁能确认这段代码是可编译的，如何编译？

我感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:43:38.127

当您编写一些代码时，有一个特定的地址开始执行（`main`例如 C 中的函数），但在您的代码中有多个起始地址，并且在编译时会崩溃。但是没有看到代码我不能告诉你更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T23:45:01.803

很抱歉回答迟了，但我正在寻找这个问题的答案，只是想通了 - 希望它会帮助其他人在谷歌上搜索答案。

由于您使用的是 OpenWatcom（我使用的是 1.9 版），我假设您在其自己的 OpenWatcom 16 位 DOS COM 项目中有 tsr.asm。在 IDE 中，转到 Targets -> Target Options -> Linker Switches。在出现的窗口中，从顶部的下拉列表中选择“2\. Import, Export and Library Switches”，然后删除“Library files(,): [libf]”下的 cstart_t 条目。

重新编译，应该会生成您的 TSR COM 文件。

# android - 将空项目添加到列表视图

> ID：12426014
> 
> 赞同：0
> 
> 时间：2012-09-14T13:54:55.977
> 
> 标签：android, listview, adapter, android-arrayadapter

我需要实现这样的事情。我得到一个项目清单。当用户向下滑动列表时，应该滑动显示列表的空项目，并且应该下载另一组项目。我该如何实施？我有 ArrayAdapter 类：

```
public class OrderAdapter extends ArrayAdapter<Order>{

    Context context; 
    int layoutResourceId;    
    List<Order> orders = null;

    public OrderAdapter(Context context,  int layoutResourceId,List<Order> orders) {
        super(context, layoutResourceId, orders);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.orders = orders;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        OrderHolder holder = null;

        if(row == null)
        {
            Log.i("I'm in OrderAdapter",Integer.toString(layoutResourceId));

            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(R.layout.dash_alt_item, parent, false);

            holder = new OrderHolder();
            holder.orderId = (TextView)row.findViewById(R.id.altOrderId);
            holder.orderTitle = (TextView)row.findViewById(R.id.altOrderTitle);
            holder.orderStatus = (TextView)row.findViewById(R.id.altOrderStatus);
            holder.orderPrice = (TextView)row.findViewById(R.id.altOrderPrice);

            row.setTag(holder);
        }
        else
        {
            holder = (OrderHolder)row.getTag();
        }

        Order order = orders.get(position);
        Log.i("id",Integer.toString(order.getOrderid()));
        holder.orderId.setText(Integer.toString(order.getOrderid()));
        holder.orderTitle.setText(order.getTitle());
        holder.orderStatus.setText(order.getProcess_status().getProccessStatusTitle());
        holder.orderPrice.setText(Float.toString(order.getPrice()));

        return row;
    }

    static class OrderHolder
    {
        TextView orderId;
        TextView orderTitle;
        TextView orderStatus;
        TextView orderPrice;
    }
} 
```

这就是我下载项目的方式：

```
 private class DownloadTask extends AsyncTask<String, Void, List<Order> > {
            protected List<Order>  doInBackground(String... args) {

            try {
                DashboardActivityAlt.this.getOrderList(Integer.toString(DashboardActivityAlt.page), Integer.toString(DashboardActivityAlt.perpage));

            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

                return forPrint;

            }

            protected void onPostExecute(List<Order>  forPrint) {

                DashboardActivityAlt.this.listView1 = (ListView)findViewById(R.id.altOrderslist);
                OrderAdapter adapter = new OrderAdapter(DashboardActivityAlt.this, R.layout.dash_alt_item, forPrint);

                listView1.setAdapter(adapter);

                if (DashboardActivityAlt.this.pd != null) {

                    DashboardActivityAlt.this.pd.dismiss();
                }

            }
       } 
```

我尝试添加 Order 类的空项，但得到 NullPointerException

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:00:26.813

检查尺寸。如果大小为 0，则将空视图设置为列表视图。

```
 listview.setEmptyView(new View(context)); 
```

# java - 类可以从其超类继承接口吗？

> ID：12426017
> 
> 赞同：-4
> 
> 时间：2012-09-14T13:55:19.207
> 
> 标签：java

假设我们有下面给出的两个类：

```
public class baseclass implements interface {}
public class subclass extends baseclass{} 
```

子类是否也继承了基类的接口？

问候， Shreyas

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T13:56:11.983

是的，它从基类继承接口。

简单的例子是，如果你不实现接口中定义的任何方法`baseclass`。您`subclass`需要实现它们，否则定义为抽象类。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-14T13:56:41.730

是的。Java 中的子类型是可传递的：如果`A`是 的子类型`B`并且`B`是 的子类型`C`，则`A`是 的子类型`C`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T13:58:44.830

是的，它确实。

来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se5.0/html/interfaces.html)：

> 一个类必须实现其直接超类和直接超接口所做的所有接口。

# asp.net - WCF：更新服务参考

> ID：12426018
> 
> 赞同：0
> 
> 时间：2012-09-14T13:55:23.387
> 
> 标签：asp.net, wcf

我在使用 VS 2010 提供的“添加服务引用”功能更新（也尝试删除和添加）ASP.NET 网站项目中修改的 WCF 服务的服务引用时遇到问题。它没有正确创建 Reference.cs习惯于改变之前。我在 web.config 中验证了我的服务配置，端点似乎正确配置了 mexhttpbinding。

```
<service behaviorConfiguration="ServiceBehavior" name="Services.XyzService">
    <endpoint address="" binding="wsHttpBinding" contract="Services.IXyzService">
      <identity>
        <dns value="localhost"/>
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
  </service>

<behavior name="ServiceBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
 </behavior> 
```

svc 文件好像也没问题！！

```
<%@ ServiceHost Language="C#" Debug="true" Service="Services.XyzService"%> 
```

任何想法？

# javascript - 从自身内部访问当前对象

> ID：12426022
> 
> 赞同：0
> 
> 时间：2012-09-14T13:55:26.600
> 
> 标签：javascript, object

> **可能重复：**
> [对象文字声明中的自引用](https://stackoverflow.com/questions/4616202/self-references-in-object-literal-declarations)
> [你能从它自己的 json 对象中调用数据吗？](https://stackoverflow.com/questions/7264328/can-you-call-data-from-its-own-json-object)

我正在创建一个这样的对象：

```
var lines = {
    all: [ /* Array */ ],
    current: this.all[1]
} 
```

然而`current: this.all[1]`回报`undefined`。我很清楚我可以 `current`像这样创建属性：

```
var lines = {
    all: [ /* Array */ ]
}
lines.current = lines.all[1]; 
```

但我认为这很混乱，尤其是在创建多个需要引用自己的对象的属性时。

我试过同时使用

*   `current: this.all[1]`（返回`undefined`）和
*   `current: lines.all[1]`（说不`lines`存在）

如何引用我当前“在”中的对象的属性？例如，在我的第一个示例`lines.current`中，将分配来自`lines.all`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:59:08.547

除了您发布的解决方案之外，只有另一种解决方案：

```
var lines = new function() {
    this.all = [ /* Array */ ];
    this.current = this.all[1];
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:10:36.260

因为 current 可能只是`getter`
您应该根据某些约定将名称更改为，`getCurrent()`因为数组中的顶部元素可能会更改
并将您的代码更改为类似的内容。

```
var lines = {
    all: [ /* Array */ ],
    getCurrent: function(){return this.all[1];}
} 
```

# python - 解析消息到、来自和主题

> ID：12426023
> 
> 赞同：1
> 
> 时间：2012-09-14T13:55:26.833
> 
> 标签：python, email, imap

我正在尝试从 IMAP 获取未读邮件。当我尝试解析电子邮件内容时，我得到`len(email_message.keys()) == 0`. 所以我永远不会得到`From`和。`To``Subject`

打印的电子邮件 ( `email.message_from_string(email_str)`):

```
From nobody Fri Sep 14 13:42:50 2012

1 (RFC822 {1015}
Return-Path: <sender@domain.com>
X-Original-To: recepient@domain.com
Delivered-To: recepient@domain.com
Received: from ec2.....amazonaws.com (unknown [IP])
    (Authenticated sender: sender@domain.com)
    by domain.com (Postfix) with ESMTPA id EACD436CF
    for <recepient@domain.com>; Fri, 14 Sep 2012 12:47:54 +0000 (UTC)
DKIM-Signature: ....
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
From: sender@domain.com
To: recepient@domain.com
Subject: welcome

Dear recipient,

Welcome.

Best,
Robot 
```

这是代码：

```
def fetch_new_emails(host, port, user, password):
  conn = imaplib.IMAP4(host=host, port=port)

  try:
    (retcode, capabilities) = conn.login(user, password)
    conn.select(readonly=1) # Select inbox or default namespace
    (retcode, messages) = conn.search(None, '(UNSEEN)')
    results = []
    if retcode == 'OK':
      for message in messages[0].split(' '):
        (ret, raw_email) = conn.fetch(message, '(RFC822)')
        if ret == 'OK':
          print raw_email[0]
          email_str = string.join(raw_email[0], "\n")
          email_message = email.message_from_string(email_str)
          email_from = email_message['From']
          to = email_message['To']
          subject = email_message['Subject']
          results.append({
            'from': email_from, 
            'to': to,
            'subject': subject})
  except:
    print sys.exc_info()[1]
    sys.exit(1)
  finally:
    conn.close()
  return results 
```

问题：

```
print email_message['From']
>>None    
print email_message['To']
>>None
print email_message['Subject']
>>None 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:22:00.493

行后有一个奇怪的空`From nobody...`行。从技术上讲，空行是标题的结尾，之后的所有内容都是正文，因此消息实际上没有这些标题。

无论如何，IMAP 消息不应该有`From`一行（这是典型的 Berkeley mbox 格式，很少有 IMAP 服务器使用这种格式；即使你的有，它的存储实现的这个细节也不应该对 IMAP 客户端可见）。

奇怪的`1 (RFC822 {1015}`线也不属于；它看起来有点像是 IMAP 协议响应的一部分，而不是实际消息的一部分。`Return-Path:`在这种特殊情况下，正确的消息以标头开头。

IMAP 服务器和/或客户端代码不是生产版本吗？

# python - 计算数组中的像素

> ID：12426024
> 
> 赞同：1
> 
> 时间：2012-09-14T13:55:28.727
> 
> 标签：python, arrays, image, matrix

我正在使用二进制 PBM 格式。当我阅读它时，我有一个整数数组，其中整数是字节的序数。数组中的每个整数都被转换为二进制表示的 0 和 1 整数列表，然后我反转这个列表。像素网格从 0:0 开始，所以第一个像素的位置是 [0:0]。

如果 x >= 8，我需要获取像素颜色。如果 x < 8，一切正常。获取像素颜色的代码。

```
 def getpixel(self, x, y):
    '''PNMReader.getpixel(x, y) -> int

    Get pixel at coordinates [x:y] and return it as integer.'''
    if not isinstance(x, int) or not isinstance(y, int):
      raise(TypeError('both x and y must be integers'))
    if x < -1 or y < -1:
      raise(ValueError('both x and y are interpreted as in slice notation'))
    if x > (self.width-1):
      raise(ValueError('x cannot be equal or greater than width'))
    if y > (self.height-1):
      raise(ValueError('x cannot be equal or greater than height'))
    width, height = self.width, self.height
    x = (x, width-1)[x == -1]
    y = [y, height-1][y == -1]
    p = (y *height) +x
    width, height = self.width, self.height
    pixels = self._array_
    q = (8, width)[width -8 < 0]
    if x >= q:
      while x % q:
        y += 1
        x -= 1
    from pprint import pprint
    color = bitarray(pixels[y])[::-1][:q][x]
    print(color) 
```

`bitarray`你可以在这里看到我定义的函数，用于获取整数位作为列表；`self._array_`是一个整数序列（它们只是从 PBM 读取的字节的序数）。

如果 x >= 8，我需要修复此函数以获取像素颜色。在这种情况下，我无法理解如何计算 x 和 y 的偏移量。

只接受快速工作的答案。我不想将所有位加入一维数组，因为如果图像很大（例如它可以是 3000x5000 像素），它可能会太慢。

我知道我可以使用一些模块，如`imagemagick`or`freeimage`等​​，但我只能使用标准库（没有额外的模块）。我需要没有绑定或非默认模块的纯 Python 解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T15:38:31.360

如果`self._array_`是一个整数数组，每个整数代表原始图像中一个字节的光栅图像数据，那么您可以使用普通的位操作技术提取您想要的位。这是一个详细的解释（根据评论中的要求）：

1.  我们需要每行的宽度（以字节为单位）。这是像素宽度除以 8，除了 PBM 格式用最多 7 个虚拟像素填充每行以使每行具有精确的字节数。所以我们需要将宽度除以 8 并向*上取*整，这可以使用如下整数运算来完成：

    ```
    row_width = (width + 7) // 8 
    ```

2.  然后我们需要找到包含我们想要的像素的字节。PBM 栅格数据按行优先顺序排列，因此像素位于`(x, y)`此字节中：

    ```
    pixel_byte = self._array_[y * row_width + x // 8] 
    ```

3.  您可以使用操作（按位右移并屏蔽最低有效位）从整数中提取位数`b`（从右侧编号，最低有效位编号为 0 ）。但是 PBM 以[*大端顺序排列*](http://en.wikipedia.org/wiki/Endianness)其像素，第一个像素位于字节中的最高有效位。所以我们想要的位是位数：`i``(i >> b) & 1``b`[](http://en.wikipedia.org/wiki/Endianness)*`7 - x % 8`*

     *```
    (pixel_byte >> (7 - x % 8)) & 1 
    ```* 

 *那应该可以解决您的直接问题。但在我看来，您的代码对于您正在尝试做的事情来说非常复杂。一些评论：

1.  自己调用`isinstance`和提升 a是没有意义的`TypeError`，因为当您尝试对参数进行整数运算时，无论如何都会发生这种情况。

2.  `x > (self.width-1)`最好写成`x >= self.width`.

3.  Python 的切片表示法允许任何负整数，而不仅仅是`-1`. 例如：

    ```
    >>> range(10)[-7:-4]
    [3, 4, 5] 
    ```

4.  你计算一个数字`p`，但你不使用它。

5.  您导入该函数`pprint`，然后不调用它。

我会写这样的东西：

```
import re

class Pbm(object):
    """
    Load a Binary Portable Bitmap (PBM) files and provide access to
    its pixels.  See <http://netpbm.sourceforge.net/doc/pbm.html>
    """
    _pbm_re = re.compile(r'''
       (P4)                     # 1\. Magic number
       (?:\s+|\#.*\n)*          # Whitespace or comments
       ([0-9]+)                 # 2\. Width of image in pixels
       (?:\s+|\#.*\n)*          # Whitespace or comments
       ([0-9]+)                 # 3\. Height of image in pixels
       (?:\#.*\n)*              # Possible comments
       \s                       # A single whitespace character
       ([\000-\377]*)           # 4\. Raster image data
    ''', re.X)

    def __init__(self, f):
        m = self._pbm_re.match(f.read())
        if not m:
            raise IOError("Can't parse PBM file.")
        self.width = int(m.group(2))             # Width in pixels
        self.height = int(m.group(3))            # Height in pixels
        self.row = (self.width + 7) // 8         # Width in bytes
        self.raster = m.group(4)
        if len(self.raster) != self.height * self.row:
            raise IOError("Size of raster is {} but width x height = {}."
                          .format(len(self.raster), self.height * self.row))

    def getpixel(self, x, y):
        # Negative coordinates are treated as offsets from the end,
        # like Python's slice indexes.
        if x < 0: x += self.width
        if y < 0: y += self.height
        if x < 0 or x >= self.width or y < 0 or y >= self.height:
            raise ValueError("Coords ({},{}) are out of range (0,0)-({},{})."
                             .format(x, y, self.width - 1, self.height - 1))
        return (ord(self.raster[y * self.row + x // 8]) >> (7 - x % 8)) & 1 
```*

# c# - 迫切需要一个 HttpHandler 来引用 js 文件

> ID：12426029
> 
> 赞同：0
> 
> 时间：2012-09-14T13:55:35.430
> 
> 标签：c#, web-config, httphandler, httpresponse

似乎只能找到讨论使用 ashx 文件来实现 httphandler 的文章，但我需要处理对特定 js 文件的引用 - 而不是 ashx。我有 HTTPHandler，我的配置文件条目如下所示（inetpub 中的配置）：

```
<add name="DeeMacsHandler" verb="*" path="filename.js" type="[ALL THE USUAL ASSEMBLY BITS]" /> 
```

但它是404'ing。在这种情况下是否需要使用 ashx 文件？我跳过了一大步吗？或者有什么方法可以拦截对这个特定 js 文件的调用？

注意：这将部署到 SharePoint Web 应用程序（不确定这是否相关）。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:09:40.130

您需要设置 IIS 以运行 ASP.Net`.js`文件。

# css - 条件 CSS 规则较少，基于变量

> ID：12426030
> 
> 赞同：14
> 
> 时间：2012-09-14T13:55:35.897
> 
> 标签：css, less

该变量可以采用百分比或 px 值，例如：

`@some-var: 50px;`或者`@some-var: 46%;`

如果值以像素为单位，我如何定义一组特定的 CSS 规则，如果值以百分比为单位，我如何定义一组不同的规则？

有没有类似的东西

```
if(isValueInPixels(@some-var)){

  // css rules here

}else{

  // other rules here
} 
```

?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-14T14:04:17.030

我认为你可以使用他们称之为**Guarded Mixins**的东西。

尝试这样的事情......

```
.mixin (@a) when (ispixel(@a)) {
 /* ... your pixel specific logic ... */
}
.mixin (@a) when (ispercentage(@a)) {
 /* ... your percentage specific logic ... */
}

.coolStuff {
 .mixin(50px);
 .mixin(50%);
} 
```

请参阅[http://lesscss.org/](http://lesscss.org/)上的**Guarded Mixins**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-11T00:25:46.363

正如 Adam Spicer 所说，**Guarded Mixins**是您最好的解决方案。然而，LESS 现在提供了一种将多个警卫分组的解决方案，这将允许使用单个 mixin 来完成。 [http://lesscss.org/features/#css-guards-feature](http://lesscss.org/features/#css-guards-feature)

例如：

```
.mixin(@a){
  & when (ispixel(@a)){
    //logic
  }
  & when (ispercentage(@a)){
    //logic
  }
} 
```

用法：

```
selector{
  .mixin(50px);
  .mixin(46%);
} 
```

# upnp - 三星远程键码的整数表示

> ID：12426034
> 
> 赞同：2
> 
> 时间：2012-09-14T13:55:49.593
> 
> 标签：upnp, samsung-smart-tv

我正在尝试使用 UPnP 将密钥代码发送到三星智能电视。[我在这里](http://wiki.samygo.tv/index.php5/D-Series_Key_Codes)找到了可用密钥代码的列表。但是我如何用整数表示相同的值，因为三星希望在 UPnP 服务中将其作为整数值接收。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T16:44:33.820

您可以使用模拟器获取关键代码列表：

```
tvKey = new Common.API.TVKeyValue()
for(key in tvKey) {
  alert(key+": "+tvKey[key]);
} 
```

不是一个很好的解决方案，但可能适用于您的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T07:14:50.410

在这里你有手动方式。因此，按下遥控器上的任何按钮都会为您提供`int`它具有什么价值的信息：

```
$('body').keydown(function(event) {
  var keyCode = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;
  alert("You pressed: " + keyCode);
} 
```

# python - 我可以用 Python 在一行中读取和写入文件吗？

> ID：12426043
> 
> 赞同：4
> 
> 时间：2012-09-14T13:56:11.937
> 
> 标签：python, file, file-io

用红宝石我可以

```
File.open('yyy.mp4', 'w') { |f| f.write(File.read('xxx.mp4')} 
```

我可以使用 Python 做到这一点吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-14T13:58:01.810

你当然可以：

```
with open('yyy.mp4', 'wb') as f:
    f.write(open('xxx.mp4', 'rb').read()) 
```

请注意那里的二进制模式标志 ( `b`)，因为您正在复制`mp4`内容，所以您不希望 python 为您重新解释换行符。

如果很大，那将占用大量内存`xxx.mp4`。查看该[`shutil.copyfile`函数](http://docs.python.org/library/shutil.html#shutil.copyfile)以获得更节省内存的选项：

```
import shutil

shutil.copyfile('xxx.mp4', 'yyy.mp4') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T13:57:55.367

Python 不是要编写丑陋的单行代码。

检查 shutil 模块的文档 - 特别是 copyfile() 方法。

[http://docs.python.org/library/shutil.html](http://docs.python.org/library/shutil.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-19T05:13:16.677

您想要复制文件，不要手动读取然后写入字节，使用文件复制功能，在这种简单的情况下，出于多种原因，这些功能通常更好更高效。

如果你想要一个真正的单行，你可以用分号替换换行符：

```
import shutil; shutil.copyfile("xxx.mp4","yyy.mp4") 
```

**避免这种情况！**我这样做一次是为了加速一个与 Python 完全无关的极其具体的案例，但是通过我的`python -c "Put ️ code here"`命令行中存在换行符以及[Meson](https://mesonbuild.com)处理它的方式。

# android - 如何保存从第一个活动传递到第二个活动的意图数据

> ID：12426045
> 
> 赞同：0
> 
> 时间：2012-09-14T13:56:24.503
> 
> 标签：android, database, android-intent, sharedpreferences, android-sqlite

我有 Myactivity，它正在从前一个活动中获取意图数据。意图数据通过活动的微调器发送。我想将微调器的这个意图数据保存到 Myactvity。当我通过下一个活动的菜单选项进入 Myactivity 时，意图数据应该保持不变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T14:01:58.437

在你的第一个活动1

```
Intent myintent= new Intent(FirstActivity.this,SecondActivity.class);
myintent.putExtra("Name", "your String");
startActivity(myintent); 
```

在第二个活动2

```
Intent myintent = getIntent();

if(null!=myintent.getExtras()){
    String Name= myintent.getExtras().getString("Name");        
    Toast.makeText(getApplicationContext(),""+Name,12).show();                              
}else{
    Toast.makeText(getApplicationContext(),"No Recor Here..",12).show();
} 
```

像您的第一个 ActivityA 中的 SharedPreferences[2]

```
Intent myintent= new Intent(FirstActivity.this,SecondActivity.class);
SharedPreferences spref = this.getSharedPreferences("mynotifyid", MODE_WORLD_WRITEABLE);
SharedPreferences.Editor spreedit = spref.edit();
spreedit.putString("Name1", str1.toString());   
spreedit.putString("Name2", str2.toString());   
spreedit.putString("Name3", str3.toString());   
spreedit.putString("Name4", str4.toString());   
spreedit.commit();
startActivity(myintent); 
```

在你的第二个活动B

```
SharedPreferences spref = context.getSharedPreferences("mynotifyid", Context.MODE_WORLD_WRITEABLE);
String str1 = spref.getString("Name1","");
String str2 = spref.getString("Name2","");
String str3 = spref.getString("Name3","");
String str4 = spref.getString("Name4",""); 
```

为了您的对象保存目的，使用 SharedPreferences

# .htaccess - Liferay：从所有社区站点中删除 /web/

> ID：12426047
> 
> 赞同：-1
> 
> 时间：2012-09-14T13:56:26.987
> 
> 标签：.htaccess, url-rewriting, liferay, virtualhost, liferay-6

我似乎无法弄清楚如何进行 url 重写，以便我可以从我的所有社区站点中删除 /web/：

```
domain.com/web/communitysite1/page
domain.com/web/communitysite2/page
domain.com/web/communitysite3/page
domain.com/web/communitysite4/page 
```

我希望它是，

```
domain.com/communitysite1/page
domain.com/communitysite2/page
domain.com/communitysite3/page
domain.com/communitysite4/page 
```

这是 Liferay 的一个[线程](http://www.liferay.com/community/forums/-/message_boards/message/447746 "Liferay 论坛")，解决方案是使用虚拟主机；但是，这仅适用于该域的社区站点之一，但我需要该域对于我正在做的所有社区站点都相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:13:05.627

首先，您必须手动将页面链接从 domain.com/web/community... 更改为 domain.com/community

之后，您需要一个重写规则来将新的 url 重写为旧的而不通知用户：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !^web/
RewriteRule ^(.*)$ /web/$1 [L,QSA] 
```

然后，您将需要一个规则来将仍然访问旧 URL 的用户重定向到新 URL，同时更改他们的浏览器链接：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} ^web/
RewriteRule ^web/(.*)$ /$1 [L,QSA,R=301] 
```

然后你需要把它混合起来，**但是**，如果你这样做，你会得到一个无限循环，所以你需要一些东西来避免这种情况（我使用的一个技巧是在第一个规则中添加一个可选参数并检查第二个如果它存在与否，如果存在，则不重定向）：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} ^web/
RewriteCond %{QUERY_STRING} !(.*&)?r=0(&.*)?$
RewriteRule ^web/(.*)$ /$1 [L,QSA,R=301]

RewriteCond %{REQUEST_FILENAME} !^web/
RewriteRule ^(.*)$ /web/$1?r=0 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:25:49.103

感谢@Yazmat 的帮助。@Prakash K 这是我目前正在使用的，它是使用代理模块的不同解决方案。

`ProxyHTMLExtended On ProxyHTMLEnable On SetOutputFilter INFLATE;proxy-html;DEFLATE ProxyHTMLURLMap ^/web/(.*)$ /$1 Rli`

# matlab - 在 MATLAB 图中链接刻度

> ID：12426052
> 
> 赞同：1
> 
> 时间：2012-09-14T13:56:52.030
> 
> 标签：matlab, plot

有没有对齐刻度标签的方法？

我有一个图，它有两个 y 轴，其中的值变化很大。我想对齐刻度标签，以便一个 y 标签上显示的每个值都与另一个 ylabel 上的值匹配。例如：

```
data1 = 1+ (12-1).*rand(365,1);
data2 = 1 + (700-1).*rand(365,1);
time = 1:365;
figure(1);
ax1 = axes('position',[0.05 0.5 0.22 0.37]);
plot(time,data1,'k','linewidth',1);
ylabel('label 1');
pos=double(get(ax1,'position'));
ax2=axes('position',pos,'color','none','YAxisLocation','right','xtick',[])
hold on;
plot(time,data2,'r','linewidth',1,'parent',ax2);
ylabel(ax2,'label 2'); 
```

在这里，我希望第二个 y 轴具有与第一个 y 轴相同的刻度数以及它们之间的相同间距。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:07:49.053

使用`plotyy`代替`plot`，它会为您处理：

```
plotyy(time, data1, time, data2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:27:23.987

您可以明确设置 y 轴范围和刻度位置：

```
ylim(ax1,[lowerBound upperBound])
set(ax1,'ytick',[tick1 tick2 tick3 tick4]) 
```

这可以让您微调特定绘图的刻度位置。它使缩放和平移功能减少，因为刻度线经常被遗忘。

# jquery - IE7中的Jquery Easy Drop Down

> ID：12426053
> 
> 赞同：1
> 
> 时间：2012-09-14T13:56:53.797
> 
> 标签：jquery, internet-explorer-7

我正在使用这里找到的这个很棒的 jquery 插件......

[http://appgrinders.github.com/jquery-easy-drop-down/](http://appgrinders.github.com/jquery-easy-drop-down/)

唯一的问题是，它在 IE7 中不起作用。我读过有时可以做出小的语法差异来让事情在 IE7 中工作。Visual Studio 给了我一个语法错误，我在下面提到了。这可能是让 IE7 不开心的原因吗？不是Jquery大师，我希望有人可以帮助我......

```
/* Cache a combined list of all dropdown elements, so each doc click isn't a DOM search */
(function( $ ){
var $dropdowns = $([]);
// Create a document click handler that will close any open dropdowns:
$(document).click(function(e) {$dropdowns.find('.dropdown-panel:visible').hide();});

var methods = {

    init : function( options ) { 

        // Add this set to our combined cache:
        $dropdowns = $dropdowns.add(this);

        // Create some defaults, extending them with any options that were provided
        var settings = $.extend( {}, options);

        return this.each(function() {        

            // dropdown plugin code here
            var $this = $(this);

            if (settings.width) {
                $this.find('.dropdown-panel').css('min-width',settings.width);
                $this.find('.dropdown-panel').css('width',settings.width);
            }
            if (settings.maxHeight) {
                $this.find('.dropdown-panel').css('max-height',settings.maxHeight);
            }

            /* NOTE: 2 ways to get id:
            var id = this.id;
            var id = $this.attr('id');
            */

            // Only proceed with click-event handler if the plugin
            // has not already been initialized on this given element:
            if ( $this.data('initialized') )
                return;
            else
                $this.data('initialized', true);

            $this.click(function(e) {

                e.stopPropagation();
                $dropdowns.not(this).find('.dropdown-panel:visible').hide()
                var $target = $(e.target);

                // If the click is on the dropdown button, 
                if ($target.is('.dropdown-button, .dropdown-icon')) {
                    $(this).find('.dropdown-panel').slideToggle('fast');
                }
                // Else, if it's in the panel, do the callback.
                else {
                    if (settings.callback) {
                        callback = settings.callback;
                        callback($target);
                    }
                }
            });

        });

    },
    show : function( ) {

        return this.each(function() {
            $(this).find('.dropdown-panel:hidden').slideDown('fast');
        });
    },
    hide : function( ) { 

        return this.each(function() {
            $(this).find('.dropdown-panel:visible').slideUp('fast');
        }); 
    },
    toggle : function( ) { 

        return this.each(function() {
            $(this).find('.dropdown-panel').slideToggle('fast');
        }); 
    },

};//VS 2010 gives me 'Expected identifier or string' on this line where the curly brace is

$.fn.dropdown = function( method ) {

    // Method calling logic
    if ( methods[method] ) {
        return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
        return methods.init.apply( this, arguments );
    } else {
        $.error( 'Method ' +  method + ' does not exist on jQuery.dropdown' );
    }

};})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:12:14.090

我想到了。

上面一行中有一个流氓逗号，我提到 VS 给了我一个错误。哦！

我删除了它，现在 IE7 很高兴！

# arrays - 从字符串单词中排序数组的最简单方法 - 有趣

> ID：12426055
> 
> 赞同：1
> 
> 时间：2012-09-14T13:56:58.560
> 
> 标签：arrays, string, actionscript-3

我正在写一个儿童游戏，它由字母块组成。

孩子必须以正确的顺序（按照剪影）将积木拼出单词

现在我的问题是我有 2 个数组。

```
var myLetters = new Array(
    new BlockC(),
    new BlockA(),
    new BlockB()
);

public static var myLetters2 = new Array(
    new BlockC(),
    new BlockA(),
    new BlockB()
); 
```

所以你看到这是设置拼写单词 CA B。

我想做的是有一个字符串变量，我可以将单词放入其中，然后让代码以正确的顺序填充数组。

IE

变种词：字符串=“CAB”；

希望这是有道理的，我可以从你们那里得到一些很好的帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:04:22.557

您似乎需要一个带有相应类的字母集合。因此，您使自己成为以下结构的对象：

```
private static var LETTERS:Object={A:BlockA,B:BlockB,C:BlockC}; 
```

然后你用单个字母拆分你的单词（将一个单词中的一个字母复制到一个新字符串中），然后你可以通过 获得相应的类`LETTERS[letter]`，并通过该类的新实例`new LETTERS[letter]();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:30:53.803

您还可以在您的对象中创建 toString() 函数并加入数组。

在类创建函数中：

```
public class BlockA {

        public function toString():String {
           return "A";
        }
} 
```

你可以加入数组项：

```
var arr:Array = [new BlockA , new BlockB , new BlockC];
trace(arr.join(""));
// and compare to Your string:
arr.join("") == word; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T14:08:40.397

如果我正确理解了这个问题，这是一种方法：

```
var word:String = "CAB";

var letterClassMapping:Object = {
 "C":BlockC,
 "A":BlockA,
 "B":BlockB
};

var myLetters:Array = [];

for(var i:int=0; i<word.length; i++) {
  myLetters.push( new letterClassMapping[word.charAt(i)]() );
} 
```

另一种方法是使用 getDefinitionByName 来获取类类型：

```
var classType:Class = getDefinitionByName("Block" + word.charAt(i)) as Class;
myLetters.push(new classType()); 
```

# artificial-intelligence - 通过人工智能改进参数

> ID：12426057
> 
> 赞同：0
> 
> 时间：2012-09-14T13:57:06.193
> 
> 标签：artificial-intelligence

这里可能不是问这个问题的合适地方，但我没有找到更好的地方来问这个问题。我有一个程序，例如有 10 个参数。每次我运行它，它可能会导致 3 个结果。0、0.5 或 1。我不知道这些参数会如何影响最后的结果。我需要一点一点地改进我的程序，以便它得到更多的 1 和更少的 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:39:14.607

首先，为了正确使用术语，这实际上是一个“搜索”问题，而不是“机器学习”问题（您试图*找到*一个非常好的解决方案，而不是试图*识别*输入与输出之间的关系）。您的问题听起来像是经典的“功能优化”搜索问题。

有许多技术可以使用。正确的取决于几个不同的因素，但最大的问题是解决方案空间的大小和形状。最大的问题是“输出对输入的微小变化有多敏感？” 如果你保持除了一个相同的所有输入并进行微小的改变，你会在输出中获得巨大的改变还是只是一个小的改变？输入是否相互交互，尤其是以复杂的方式？

解决方案空间越小越“平滑”（也就是说，它对输入的微小变化越不敏感），您就越想要追求简单的统计技术、引导式搜索，或者如果您想要更有趣的东西，模拟退火。

解决方案空间越大越复杂，就越能引导您使用更复杂的统计技术或我最喜欢的一类算法，它们是遗传算法，可以非常快速地搜索大型解决方案空间。

只是为了勾勒出如何将遗传算法应用于您的问题，让我们假设输入彼此独立（我知道这是一种罕见的情况）：

*   从一系列二进制数字创建到您的输入的映射`0011 1100 0100 ...etc...`
*   使用此映射生成具有一定规模的随机种群
*   确定总体中每个个体的适应度（在您的情况下，在输出中“计算 1”）
*   抽签选出两个“父母”：
    *   对于输出中的每个半点，一个人将获得一张“彩票”（换句话说，具有 2 个“1”和 3 个“0.5”的输出将获得 7 个“彩票”，而一个具有 1 个“1” 2个“0.5”将获得4个“票”）
    *   随机选择一张彩票。由于“更健康”的人将拥有更多“票”，这意味着“更健康”的人更有可能成为“父母”
*   从父母的基因组中创建一个孩子：
    *   开始从左到右复制一个父母的基因组`0011 11...`
    *   在每一步，以固定的概率（比如 20% 的时间）切换到另一个父级
    *   由此产生的孩子将具有一定数量的父母基因组和一定数量的其他父母基因组。*因为*孩子是由“高适应度”个体创建的，所以孩子的适应度*可能*高于当前一代的平均水平（尽管它的适应度肯定可能*较低*）
*   用这种方式生成的孩子替换一定比例的人口
*   从“确定适应度”步骤重复……在理想情况下，每一代的*平均*适应度都高于上一代，你会找到一个非常好的（甚至可能是理想的）解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:13:36.347

您是否只是尝试修改参数以使结果为 1？听起来该程序是一个黑匣子，您可以在其中选择输入参数，然后查看结果。既然是这种情况，我认为最好选择一系列输入参数，循环浏览这些输入，然后查看输出以尝试辨别模式。如果您可以将其自动化，它将有很大帮助。在您运行数据后，您可以抽查以查看哪个参数为您提供了哪些结果，或者您可以应用一些机器学习技术来确定哪些参数导致哪些输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T21:14:31.933

As Larry said, looks like a combinatorial search and the solution will depends on the "topology" of the problem. If you can, try to get the Algorithm Design Manuel book (S. Skiena), it has a chapter on this that can help determine the good method for this problem...

# scala - 根据验证是成功还是失败，执行不同副作用的最佳方式

> ID：12426058
> 
> 赞同：2
> 
> 时间：2012-09-14T13:57:11.183
> 
> 标签：scala, scalaz

我希望解决方案不是基于 if-else 的明显模式匹配。我相信应该有更自然的方法来做到这一点，比如`map`Option的组合`getOrElse`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T14:04:41.817

`Validation`有一种`fold`可以选择产生副作用的方法：

```
v.fold(e => println("Ouch, we got "+e), a => println("Yay!!  We got "+a)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:04:34.880

```
Validation.fold 
```

用字符填充答案...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T01:18:55.820

为了完整起见，您可能希望在对 Validation 产生副作用后对其进行操作：

```
object Test {
  import scalaz._
  import syntax.bifunctor._
  import syntax.validation._
  def f(s: String) = { println(s"Err ${s}"); s }
  def g(i: Int) = { println(s"Int ${i}"); i }
  def m(x: Validation[String, Int]) = x bimap (f, g)
  def n(x: Validation[String, Int]) = f _ <-: x :-> g _
  def main(args: Array[String]) {
    val v = 17.success[String]
    val w = "nope".failure[Int]
    println(m(v) map (i => i + 1))
    println(m(v)); println(m(w))
    println(n(v)); println(n(w))
  }
} 
```

或者，您可能只是喜欢有面孔的操作员。表情运营商在功能社区有名字吗？鉴于我目前的心情，我会尝试 emoperator，就像 mope 一样，但这可能太窄了。还是“咯咯”？但是像 x :-> f 这样的用法显然是一种“面部表情”。

# java - 如何在资源包中使用 JSF 标签 / 如何在资源包中重写 URL？

> ID：12426059
> 
> 赞同：3
> 
> 时间：2012-09-14T13:57:10.687
> 
> 标签：java, jsf, seam, resourcebundle

环境：JSF 2.1.7 SEAM 2.3.0 JBOSS 5.1.2

我的应用程序有一个需要本地化的字符串

> “我同意 WorldSite 的*隐私政策*和*Cookie 声明*”

斜体*隐私政策*和*Cookie 通知*是指向其他页面的超链接。

最初我们的 facelet 是这样设置的：

```
<h:outputText value="#{messages['iAgreeTo']}" />
<h:outputLink target="_blank" value="#{bean.privacyPolicy}">#{messages['privacyPolicy']}</h:outputLink>
<h:outputText value="#{messages['and']}"/>
<h:outputLink target="_blank" value="/jsf/Notice.xhtml">
    <h:outputText value="#{messages['cookieNotice']}"/>
    <f:param name="content" value="Cookie-Notice"/>
    <f:param name="application" value="#{bean.application}"/>
</h:outputLink> 
```

注意：我们有 URL 重写，它采用 /jsf/Notice.xhtml 并重写为

```
rewrite pattern: /#{application}/Notice/#{content}
result:http://contextRoot/contextPath/myApp/Notice/Cookie-Notice 
```

这允许对各个键进行零碎翻译

```
iAgreeTo=I agree to WorldSite's&#160;
privacyPolicy=Privacy Policy
and=&#160;and&#160;
cookieNotice=Cookie Notice 
```

但这需要某些语言的解决方法（在“iAgreeTo”和“and”键中）

```
iAgreeTo=J'accepte la&#160;
privacyPolicy=Politique de la vie privée
and=&#160;de WorldSite et les&#160;
cookieNotice=Note D'information sur les Cookies 
```

**理想情况下，我希望能够使链接在键内可移动。像这样的东西：**

```
iAgreePhrase=I agree to WorldSite's #{messages['privacyPolicyLink']} and the #{messages['cookieNoticeLink']}
privacyPolicy=Privacy Policy
cookieNotice=Cookie Notice

//The following non-translatable keys held in a separate file
privacyPolicyLink=<h:outputLink target="_blank" value="#{bean.privacyPolicy}">#{messages['privacyPolicy']}</h:outputLink>
cookieNoticeLink=<h:outputLink target="_blank" id="cookieNoticeLink" value="/jsf/Notice.xhtml">\
    #{messages['cookieNotice']}\
    <f:param name="content" value="Cookie-Notice"/>\
    <f:param name="application" value="#{bean.application}"/>\
</h:outputLink> 
```

但是 facelet 将 JSF 标记 (h:outputLink) 作为字符串返回，而不是将它们扩展为它们的 HTML 标记。**我可以使用`<a>`标签，但是我将重写逻辑放在难以维护的属性文件中**

```
iAgreePhrase=I agree to WorldSite's #{messages['privacyPolicyLink']} and the #{messages['cookieNoticeLink']}
privacyPolicy=Privacy Policy
cookieNotice=Cookie Notice

//The following non-translatable keys held in a separate file
privacyPolicyLink=<a target="_blank" href="#{bean.privacyPolicy}">#{messages['privacyPolicy']}</a>
cookieNoticeLink=<a target="_blank" href="#{contextPath}/#{bean.application}/Notice/Terms-and-Conditions">\
    #{messages['cookieNotice']}</a> 
```

有没有一种方法可以实现我想要的效果而不必将重写逻辑放在资源包中？我的一些想法是强制应用程序容器处理 facelet 两次/重新排序，因此它首先插入资源包，然后扩展 JSF 标记。

或者，我可以在 bean 中构造重写的 URL，然后从我的资源包中调用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T15:19:39.773

你似乎把所有的事情都搞错了，我很抱歉不得不说我发现这个问题分析得不好，过长而且阅读起来很混乱。

您应该尝试做的是使用 JSF 标记中的资源包，而不是相反。在需要参数化消息的地方，您可以使用如下构造：

**消息属性**

```
nameHeader=My name is {0} 
```

**索引.xhtml**

```
<h:outputFormat value="#{msgs.nameHeader}">
    <f:param value="#{bean.name}"/>
</h:outputFormat> 
```

如果您遇到这种情况不起作用的情况，则必须在支持 bean 中构建字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:53:21.633

虽然[Oversteer 的回答](https://stackoverflow.com/a/12427429/1417546)肯定是适用的，但这也可能会有所帮助。您可以从 EL 表达式创建 URL，如下所示：

```
#{facesContext.externalContext.encodeActionURL('/myapp/Notice/Privacy-Policy')} 
```

要在消息中包含 HTML 标记，您需要使用`escape="false"`in `<h:outputText/>`，例如：

```
<h:outputText escape="false" value="#{messages['iAgreePhrase']}" /> 
```

并且，在您的 messages.properties （或本地化版本）中：

```
iAgreePhrase=I agree to WorldSite's <a href="#{facesContext.externalContext.encodeActionURL('/myapp/Notice/Privacy-Policy')}">Privacy Policy</a> and ... 
```

这有一个问题，即 URL 只能从 HTTP 请求中计算，例如，如果您在异步线程中使用消息键，则不会计算 URL（没有可用的 facesContext）。

# android - Android 上的随机 SQLiteConnectionPool 错误。如何避免？

> ID：12426060
> 
> 赞同：18
> 
> 时间：2012-09-14T13:57:11.587
> 
> 标签：android, sqlite

最近我开始在我的应用程序中出现以下错误。这不在任何特定的地方，只有在循环所有数据读/写功能时我才能重现。它几乎出现在任何地方。

```
09-14 08:52:15.089: WARN/SQLiteConnectionPool(19268): The connection pool for database '/data/data/com.nnn/databases/data.db' has been unable to grant a connection to thread 1 (main) with flags 0x5 for 30.000002 seconds.
        Connections: 0 active, 1 idle, 0 available. 
```

有没有办法避免这种情况？我知道不知何故我用尽了与数据库的所有连接？我正在使用方法#1：[http ://www.androiddesignpatterns.com/2012/05/correctly-managing-your-sqlite-database.html](http://www.androiddesignpatterns.com/2012/05/correctly-managing-your-sqlite-database.html)

我的数据库代码如下所示：

```
public class DatabaseHelper extends SQLiteOpenHelper
{
    private final static String LOG_TAG = "com.nnnn.data.DatabaseHelper";
    private static final String DATABASE_NAME = "data.db";
    private static final int DATABASE_VERSION = 260;
    private static SQLiteDatabase databaseInstance;

    public DatabaseHelper()
    {
        super(MyApplication.Me, DATABASE_NAME, null, DATABASE_VERSION);
    }

    public static synchronized SQLiteDatabase getDatabase()
    {
        if (databaseInstance == null) databaseInstance = (new DatabaseHelper()).getWritableDatabase();
        return databaseInstance;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:00:05.043

我从未见过这个错误。但是，我想指出**您没有使用**您链接到的页面中的方法#1，我相信您的实施给您带来了麻烦。

在您链接的设计模式中，他们的方法是确保在整个应用程序生命周期中只存在一个**DatabaseHelper实例。**您的方法不同，您试图确保在整个应用程序生命周期中只存在一个**SQLiteDatabase实例。**

因此，总而言之，您正在尝试为所有内容重用相同的数据库连接（这不是一个好主意，我强烈建议您更改这种方法），但实际上，我相信这种方法会导致 SQLiteOpenHelper 和您的静态实例变量。

您正在 getDatabase 方法中创建 DatabaseHelper 的新实例，当然，您的 databaseInstance 是静态的，但是这里的 SQLiteOpenHelper 实例存在潜在问题。例如，假设 databaseInstance 实例已关闭并通过一段代码设置为 null。Aka，有人在他们自己之后进行清理，那么下次调用 getDatabase() 时，您将创建一个新的数据库助手，更重要的是，一个新的 SQLiteOpenHelper。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:29:42.980

尝试从 getDatabase 方法中删除同步。这不应该是必要的。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-06-14T23:22:10.113

我相信在 Android 中处理 SQLite DB 的唯一正确方法是使用 ContentProvider。对于您的代码，您可以尝试将 DatabaseHelper 存储在该静态字段中，而不是 SQLiteDatabase 实例中，如第一种方法中所述。

# c++ - 如何将 C++ 向量传递和访问到 OpenCL 内核？

> ID：12426061
> 
> 赞同：12
> 
> 时间：2012-09-14T13:57:15.367
> 
> 标签：c++, c, opencl

我是 C、C++ 和 OpenCL 的新手，目前正在努力学习它们。这是一个预先存在的 C++ 函数，我试图弄清楚如何使用 C 或 C++ 绑定将其移植到 OpenCL。

```
#include <vector>

using namespace std;

class Test {

private:

    double a;
    vector<double> b;
    vector<long> c;
    vector<vector<double> > d;

public:

    double foo(long x, double y) {
        // mathematical operations
        // using x, y, a, b, c, d
        // and also b.size()
        // to calculate return value
        return 0.0;
    }

}; 
```

从广义上讲，我的问题是如何将此函数访问的所有类成员传递到绑定和内核中。我了解如何传递标量值，但我不确定向量值。有没有办法将指针传递给上述每个成员或内存映射它们，以便 OpenCL 对它们的看法与主机内存同步？分解我的问题如下。

1.  考虑到它们的大小可变，我如何将成员 b 和 c 传递给绑定和内核？
2.  考虑到它是二维的，我如何传递成员 d？
3.  我如何从内核中访问这些成员以及它们将在内核参数中声明为哪些类型？将简单地使用数组索引符号即 b[0] 进行访问吗？
4.  我将如何在内核函数中调用等效于 b.size() 的操作，或者我不会将绑定的大小作为额外参数传递到内核中？如果改变会发生什么？

我非常感谢答案中的 C 或 C++ 绑定和内核代码示例源代码。

非常感谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-14T18:40:55.513

1.  您必须分配一个 OpenCL 缓冲区并将您的 CPU 数据复制到其中。OpenCL 缓冲区具有固定大小，因此如果数据大小发生变化，您要么必须重新创建它，要么将其设置为“足够大”，如果需要更少的内存，则只使用它的一小部分。例如，要为设备创建缓冲区`b`并同时将其所有数据复制到设备：

    ```
    cl_mem buffer_b = clCreateBuffer(
        context, // OpenCL context
        CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR, // Only read access from kernel,
                                                 // copy data from host
        sizeof(cl_double) * b.size(), // Buffer size in bytes
        &b[0], // Pointer to data to copy
        &errorcode); // Return code 
    ```

    也可以直接映射主机内存（`CL_MEM_USE_HOST_PTR`），但这会对对齐和创建缓冲区后对主机内存的访问施加一些限制。基本上，当您当前未映射主机内存时，它可能包含垃圾。

2.  这取决于。第二维向量的大小是否始终相等？然后在将它们上传到 OpenCL 设备时将它们展平。否则会变得更复杂。

3.  您将缓冲区参数声明为`__global`内核中的指针。例如，`__global double *b`将适用于在 1 中创建的缓冲区。您可以简单地在内核中使用数组表示法来访问缓冲区中的各个元素。

4.  您无法从内核中查询缓冲区大小，因此您必须手动传递它。这也可以隐式发生，例如，如果工作项的数量与`b`.

可以访问所有计算数据的内核可能如下所示：

```
__kernel void foo(long x, double y, double a, __global double* b, int b_size,
                  __global long* c, __global double* d,
                  __global double* result) {
  // Here be dragons
  *result = 0.0;
} 
```

请注意，您还必须为结果分配内存。如果需要，可能需要传递额外的大小参数。您可以按如下方式调用内核：

```
// Create/fill buffers
// ...

// Set arguments
clSetKernelArg(kernel, 0, sizeof(cl_long), &x);
clSetKernelArg(kernel, 1, sizeof(cl_double), &y);
clSetKernelArg(kernel, 2, sizeof(cl_double), &a);
clSetKernelArg(kernel, 3, sizeof(cl_mem), &b_buffer);
cl_int b_size = b.size();
clSetKernelArg(kernel, 4, sizeof(cl_int), &b_size);
clSetKernelArg(kernel, 5, sizeof(cl_mem), &c_buffer);
clSetKernelArg(kernel, 6, sizeof(cl_mem), &d_buffer);
clSetKernelArg(kernel, 7, sizeof(cl_mem), &result_buffer);
// Enqueue kernel
clEnqueueNDRangeKernel(queue, kernel, /* ... depends on your domain */);

// Read back result
cl_double result;
clEnqueueReadBuffer(queue, result_buffer, CL_TRUE, 0, sizeof(cl_double), &result,
                    0, NULL, NULL); 
```

# java - 如何使用java上传文件而不更改其编码

> ID：12426063
> 
> 赞同：2
> 
> 时间：2012-09-14T13:57:18.703
> 
> 标签：java, jakarta-ee, servlets, file-upload

我有一个 Java 类，可以将文本文件从 Windows 客户端上传到 Linux 服务器。

我尝试上传的文件是使用 Cp1252 或 ISO-8859-1 编码的。

上传文件后，它会使用 utf-8 进行编码，因此无法读取包含 éèà 等重音符号的字符串。

命令

```
file -i * 
```

在 linux 服务器中告诉我它是使用 utf-8 编码的。

我认为在上传时编码已更改，因此我将此代码添加到我的 servlet：

```
String currentEncoding=System.getProperty("file.encoding");
System.setProperty("file.encoding", "Cp1252");
item.write(file);
System.setProperty("file.encoding", currentEncoding); 
```

在 jsp 文件中，我有以下代码：

```
<form name="formUpload"
action="..." method="post"
enctype="multipart/form-data" accept-charset="ISO-8859-1"> 
```

我用来上传文件的库是 apache commun。

任何人都有线索，因为我真的没有想法了！

谢谢，

奥特曼·马利赫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:08:53.563

设置系统属性`file.encoding`仅在您启动 Java 时有效。相反，您必须使用以下代码打开文件：

```
public static BufferedWriter createWriter( File file, Charset charset ) throws IOException {
    FileOutputStream stream = new FileOutputStream( file );
    return new BufferedWriter( new OutputStreamWriter( stream, charset ) );
} 
```

用作参数`Charset.forName("iso8859-1")`。`charset`

**[编辑]**你的问题很可能是`file`命令。MacOS 是世界上唯一可以自信地告诉您文件编码的操作系统。Windows 和 Linux 必须做出猜测。这个猜测可能是错误的。

因此，您需要做的是使用指定编码的编辑器打开文件。您需要在 Windows 上执行此操作（以确保文件确实是使用 保存的`Cp1252`；某些应用程序会忽略平台并始终将其数据安全地保存在 中`UTF-8`）。

你需要在 Linux 上做同样的事情。如果您只是打开文件，编辑器将采用平台编码（`UTF-8`在现代 Linux 系统上）并尝试使用该编码读取文件 -> `ISO-8859-1`umlauts 将是乱码。但是如果你用 来打开文件`ISO-8859-1`，那么`UTF-8`就会出现乱码。这是确定文本文件真正编码的唯一方法。

# pdf - 如何使用 pdfbox 在 Java 中签署 pdf

> ID：12426064
> 
> 赞同：14
> 
> 时间：2012-09-14T13:57:25.053
> 
> 标签：pdf, certificate, sign, pdfbox, pkcs#7

我正在尝试使用 pdfbox 库签署 pdf。我现在卡住了，真的需要帮助。

这是我的代码：

```
private static void signPdf(PDDocument document) throws Exception 
{
    PDSignature sig = new PDSignature();
    sig.setFilter(COSName.ADOBE_PPKLITE);
    sig.setSubFilter(COSName.ADBE_PKCS7_DETACHED);
    sig.setByteRange(new int[] {'a','a','a','a'});
    sig.setContents(new byte[]{(byte) 23, (byte) 23, (byte) 23, (byte) 23});

    SignatureOptions options = new SignatureOptions();

    document.addSignature(sig, new SignatureInterface() {
        public byte[] sign(InputStream content)
                throws SignatureException, IOException       {        
             //this should be made MD5 checksum?           
            return new byte[]{(byte) 'a', (byte) 'a', (byte) 'a', (byte) 'a'};
        }
    }, options);
} 
```

然后我保存我的pdf，但是：1）我注意到从未调用过sign方法2）我应该在哪里附上证书？签到方法？

pdf:

```
/Type /Sig
/Filter /Adobe.PPKLite
/SubFilter /adbe.pkcs7.sha1
/Contents <0000000000\. a lot of zeros..000>
/ByteRange [0 1000000000 1000000000 1000000000] 
```

我认为我错过了一些东西，但文档没有说明如何签署文件。

Tahnks 提前 JC。

@Ed

这是我保存pdf的方法：

```
public static void saveFile(COSDocument doc, String out)
        throws IOException, COSVisitorException {  
    java.io.OutputStream os = null;  
    COSWriter writer = null;  
    try {
        os = new java.io.FileOutputStream(out);
        writer = new COSWriter(os);
        writer.write(doc);
    } finally {
        if (os != null) {
            os.close();
        }
        if (writer != null) {
            writer.close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-01T07:57:45.677

链接的**PDFBox-SignExample.zip**已过期。请改用此示例：

[https://svn.apache.org/repos/asf/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/signature/CreateSignature.java](https://svn.apache.org/repos/asf/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/signature/CreateSignature.java)

它有更好的文档记录并保持最新。

# busybox - 解析字符串时出现意外重定向

> ID：12426066
> 
> 赞同：0
> 
> 时间：2012-09-14T13:57:31.920
> 
> 标签：busybox, ash

我有一个解析文件的字符串。但是当我执行它时。它给出了一个错误。这是代码；

```
config="/tmp/files.config"
tftp $TFTP_SERVER_IP -c get "files.config" "$config"

while read line
do
    IFS='=' read -a current_line <<< "$line"
tftp $TFTP_SERVER_IP -c "${current_line[0]}" "${current_line[1]}"
done < "$config" 
```

这是错误；

```
line 6: syntax error: unexpected redirection 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:03:50.947

也许

```
tftp $TPTP_SERVER_IP -c "${line#*=}" "${line%=*}" 
```

（即——而不是整个`while`身体）。

```
$ ash
$ line="asdasdsad=123123123123"
$ echo $line
asdasdsad=123123123123
$ echo ${line%=*}
asdasdsad
$ echo ${line#*=}
123123123123
$ 
```

# java - Java，SOLR：如何为 Junit 测试排除方法或创建新的 solr 文件夹

> ID：12426071
> 
> 赞同：0
> 
> 时间：2012-09-14T13:57:45.153
> 
> 标签：java, solr, junit, filter, annotations

我的服务器-客户端项目使用 SOLR，并且我的类 PersonSolrEventHandler 中有一个 addToSolrServer(obj o) 方法（这个类被注释为 @Component）。当我（通过 web 服务）将一个人添加到我的外部数据库并将我的 testdata/persons 添加到 SOLR 数据库时，会调用此方法。如何从 Junit 测试中排除该方法？在 Junit 测试时，SOLR 不应将任何测试数据添加到数据库中。我想为 junit 测试添加一个新目录（例如 data/solr/person-junit/index/ 而不是我当前的 solr 文件夹 data/solr/person/index/）

例如：是否可以编写一个带有新 /person-junit/index 文件夹的 solr-junit.xml 并在执行 junit 测试时调用它？

我是一名学生，这是我在公司的第一个项目......所以我很感激任何提示或指导。

谢谢

# jquery - JQuery 选择表单数组名称

> ID：12426072
> 
> 赞同：1
> 
> 时间：2012-09-14T13:57:46.583
> 
> 标签：jquery, ajax, arrays, forms

我有一个如下所示的表格：

```
<input type="text" name="item[101][0][date]" value="2012" />
<input type="text" name="item[101][0][price]" value="10.00" />
<input type="text" name="item[101][0][colour]" value="orange" />
<input type="text" name="item[101][1][date]" value="2013" />
<input type="text" name="item[101][1][price]" value="5.00" />
<input type="text" name="item[101][1][colour]" value="blue" /> 
```

而且我希望能够从前 2 个键中选择整个数组并将整个数组存储为 javascript 中的数组，以便我可以通过 AJAX 将其发送到 PHP。

我现在在 jQuery 中有这个，但它似乎并没有产生我想要的东西。

```
var products = $('input[name~="item['+itemCode+']['+basketId+']"]'); 
```

其中 itemCode 和 basketId 并从提交按钮（正在工作）中检索。

一旦我有了这个名为“products”的数组，我就知道如何序列化它并将其作为发布请求发送，我似乎无法最终得到一个数组，例如：

```
products[101][0][date] = 2012
products[101][0][price] = 10.00
products[101][0][colour] = orange 
```

或者：

```
products[101][1][date] = 2013
products[101][1][price] = 5.00
products[101][1][colour] = blue 
```

对此的任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:04:13.443

我建议使用 data-* HTML5 属性将数据存储在不同的持有者而不是存储在名称中的所有内容。就像是：

```
<input type="text" data-category="101" data-index="0" data-id="date" value="2012" /> 
```

然后将通过以下方式执行选择：

```
var input = $('input[data-category=' + category + '][data-index=' + index + '][data-id=' + id + ']'); 
```

这也允许您轻松选择同一类别或具有相同索引等的所有项目。

数组的构造如下：

```
var products = [];
// Define category, index and id
products[category][index][id] = $('input[data-category=' + category + '][data-index=' + index + '][data-id=' + id + ']').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:03:00.463

您正在使用包含[***单词***](http://api.jquery.com/attribute-contains-word-selector/)[选择器 (](http://api.jquery.com/attribute-contains-word-selector/) [)的](http://api.jquery.com/attribute-contains-word-selector/)[属性*`name~=value`*](http://api.jquery.com/attribute-contains-word-selector/)*，它的作用与您想要的略有不同：*

 *> 此选择器将测试字符串与属性值中的每个单词匹配，其中“单词”定义为由空格分隔的字符串。如果测试字符串**完全等于任何单词，**则选择器匹配。

使用以选择器( )[开头的属性](http://api.jquery.com/attribute-starts-with-selector/)`name^=value`：

```
var products = $('input[name^="item['+itemCode+']['+basketId+']"]'); 
```

要么使用[包含选择器的属性](http://api.jquery.com/attribute-contains-selector/)( `name*=value`)：

```
var products = $('input[name*="item['+itemCode+']['+basketId+']"]'); 
```

**[演示](http://jsfiddle.net/RCTS2/)**。*

# visual-studio-2008 - 如何在 Doxygen 评论中包含“<”？

> ID：12426073
> 
> 赞同：11
> 
> 时间：2012-09-14T13:57:52.603
> 
> 标签：visual-studio-2008, doxygen, documentation-generation

假设我正在使用与 DOxygen/Visual Studio 兼容的注释记录成员函数，如何使用小于“<”符号而不创建编译器警告但仍保持代码库的可读性？

例如，如果我这样做：

```
 /// <summary>
    /// Verifies x < y
    /// </summary>
    bool VerifyIsLessThan(float x, float y); 
```

编译器说：

```
1>c:\MyProject\VerificationLib.h(246) : warning C4635: XML document comment applied to 'VerificationLib.VerifyIsLessThan(System.Single,System.Single)': badly-formed XML: Whitespace is not allowed at this location. 
```

有没有什么办法可以让它在代码库和 Doxygen 生成的文档中仍然可读？

**[编辑]**

我开始认为这更多地与视觉工作室方面有关，而不是 Doxygen。我们正在使用一种对两者*都*适用的表格。原始问题中提到的警告来自视觉工作室而不是 Doxygen。

挖掘得更深一点，看起来不直接[支持](http://msdn.microsoft.com/en-us/library/5ast78ax%28v=vs.71%29.aspx)逐字记录？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T14:00:37.237

只需使用`\<`，就应该这样。 [http://www.doxygen.nl/manual/commands.html#cmdlt](http://www.doxygen.nl/manual/commands.html#cmdlt)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T14:26:36.023

您可以使用[代码](http://www.doxygen.nl/manual/commands.html#cmdcode) 或 [逐字](http://www.doxygen.nl/manual/commands.html#cmdverbatim)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T15:00:42.050

我能找到的唯一允许将`<`字符内联在摘要中的东西似乎是，`&lt;`但即使智能感知和 doxygen 看起来不错，它在实际代码库中仍然看起来很丑......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T14:56:48.297

您还可以将您的评论放在 CDATA 块中，如下所示：

```
<![CDATA[ Verifies x < y ]]> 
```

我不知道你是否真的认为这更容易阅读，但它有助于避免 Jon Cage 指出的问题，其中 \ 可能被误解为除法符号或其他任何东西。

附加信息：

[XML 中的 <![CDATA[]]> 是什么意思？](https://stackoverflow.com/questions/2784183/what-does-cdata-in-xml-mean)

[http://forums.asp.net/t/1007641.aspx/1](http://forums.asp.net/t/1007641.aspx/1)

# asp.net-mvc-3 - 一个asp.net MVC 3项目中的ExtJS 4 MVC应用程序图片路径问题

> ID：12426075
> 
> 赞同：1
> 
> 时间：2012-09-14T13:58:00.297
> 
> 标签：asp.net-mvc-3, image, path, extjs4

快捷方式： **EXT** = Ext JS 4 应用程序 **ASP** = Asp.Net MVC3 应用程序

我在加载 Ext JS 4 应用程序视图中设置的图像时遇到问题。该应用程序是 Asp.NET MVC 3 项目的一部分。在我的**EXT**文件夹中，我有 Sencha MVC 应用程序的经典结构。在**ASP**项目中，**EXT**文件夹位于：root + "/Sencha/WebClient/"。在**EXT**的视图中，我将路径设置为按钮的图标，如下所示：

```
icon: 'images/common/desktop/btnStart.png' 
```

图像未加载，因为我认为 .js 文件在**ASP**视图文件夹中执行。我已将 appFolder 设置为“/Sencha/WebClient/”，以便**EXT**找到视图、控制器等，但图标路径仍保持为“images/common/desktop/btnStart.png”而不是“/Sencha/WebClient/”图片/common/desktop/btnStart.png”。

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T08:11:18.457

它不会那样工作。应用为 css 样式的图标属性。我建议在 DOM 中看起来像

```
style="...; background-image: url(images/common/desktop/btnStart.png);" 
```

所以无论js脚本放在哪里都没有关系。此图像路径是相对于当前页面的 url，因此不会按预期应用此样式。但是，如果您指定绝对路径，它将起作用。

我可以建议您使用[sass/scss + compass](http://docs.sencha.com/ext-js/4-1/#!/guide/theming)，并使用使用图像路径的 css 类。您可以设置您的图像路径和更多使用将应用您指定的背景图像的混合

```
@mixin backgroundImage($img) {
    $imagesRoot: '/Sencha/WebClient/images/';
    @include background-image($imagesRoot + $img);  
}

.btnStart {
    @include backgroundImage('common/desktop/btnStart.png');
} 
```

然后在按钮配置中使用

```
iconCls: 'btnStart' 
```

# php - QUERY 中的 MYSQL 整理

> ID：12426078
> 
> 赞同：0
> 
> 时间：2012-09-14T13:58:02.650
> 
> 标签：php, mysql, sql, collate

嗨，我正在尝试在我的网站上进行搜索，该网站正在查看数据库

```
CHARACTER SET utf8 COLLATE utf8_slovak_ci 
```

表也​​是 utf8_slovak_ci 。在名为 knihy（书籍）的表中，我有字段 Autor1 Autor2 Autor 3 Autor4 /Author 1 等/这是我用于搜索的查询：

```
$q = $this->db->query("SELECT * FROM (`knihy`) 
              WHERE `stav` = 1 
              AND (Autor1 LIKE '$vyraz' 
              OR Autor2 LIKE '$vyraz' 
              OR Autor3 LIKE '$vyraz' 
              OR Autor4 LIKE '$vyraz') 
              ORDER BY `id` desc LIMIT $limit OFFSET $offset "); 
```

假设我的表中有 Autor1 /Author1/ 名称为“Šilíoá”的书，如果我正在寻找“Šilíoá”，它也会被发现如果我正在寻找“Šilioa”，但如果我正在寻找“ silioa”什么也找不到。所以问题在于字符“Š”和“š”我该如何解决这个问题？网上找了很多教程，还是不行。。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:11:44.407

您可以通过将表字符集设置为 utf8、将排序规则设置为 utf8_general_ci 或 utf8_unicode_ci 来修复它。并且您还需要在您的代码（连接字符串）中将字符集设置为 utf8。

连接字符串示例：

**string cs = @"server=localhost(或 IP 地址);userid=root;password=xxx;database=table_name;charset=utf8";**

# c# - 如何使用 GET 方法将 json 发送到类似 API 的 REST

> ID：12426081
> 
> 赞同：0
> 
> 时间：2012-09-14T13:58:18.567
> 
> 标签：c#, json, rest, get, windows-8

我必须在我的应用程序中实现方法，该方法将使用 GET 方法发送一些数据（根据 api 文档应该是 JSON）（这很奇怪......）。我如何在 Windows 8 中使用 c sharp 来做到这一点（RestSharp lib 不在那里工作）。我在 REST 客户端方面没有任何经验，但我已经实现了其他功能，但数据是通过 POST 或 DELETE 方法发送的。我尝试过“翻译”json 来得到这样的结果： JSON：

```
{
a = "foo",
b = "bar
} 
```

获取网址：

```
__SITE__?a=foo&b=bar 
```

但是服务器返回空值（不是错误）。我不知道如何处理这件事：/提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:05:34.003

如果你有 api 你有你应该发送的参数名称。只需将数据转换为 json，sind 就是这个参数。如果您必须发送 json，为什么要将参数 a 和 b 作为 2 个不同的字符串发送？

请记住，HttpClient 可以调用 GET 方法。只需调用 URL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:44:05.493

最后事实证明（在我的情况下）API 也接受以这种方式提供数据：*URL* ?a=foo&b=bar 不管它应该是 json 的事实。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T05:05:03.720

长话短说，我认为这将是最有启发性的 .. 它使用 HttpClient 在 REST API 上触发 JSON 格式的数据来“填补空白”

[如何为 HttpClient 请求设置 Content-Type 标头？](https://stackoverflow.com/questions/10679214/how-do-you-set-the-content-type-header-for-an-httpclient-request)

# android - 我无法在我的设备上运行图表

> ID：12426082
> 
> 赞同：1
> 
> 时间：2012-09-14T13:58:19.233
> 
> 标签：android, charts, achartengine

我一直在使用 achartengine-0.7.0.jar 库在我的项目上制作图表，它在模拟器上正常运行，但是当我制作我的项目的 apk 并将其安装在我的设备上时，它无法正常工作，图表没有显示（错误），有人可以帮助我吗？

我是否必须将 achartengine-0.7.0.jar 库复制/移动/安装到我的设备中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:18:54.203

问题可能是 achartengine-0.7.0.jar 库的放置：

您最好将其放置在该项目的工作区中`libs`或`lib`存在的文件夹中。所以现在把它放在`lib`你导出的文件夹中后，`APK file`它就可以工作了。

# javascript - 自动修复“语句前缺少分号”

> ID：12426086
> 
> 赞同：0
> 
> 时间：2012-09-14T13:58:33.427
> 
> 标签：javascript, minify

我有一个缺少很多分号的大型 javascript 文件。它可以正常工作，但是当我尝试使用 minifier = kaboom！有没有办法自动解决这个问题？我试图手动完成它，但这是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:05:44.053

查看[JavaScript Lint](http://www.javascriptlint.com/online_lint.php)应用程序，该应用程序检查您的脚本是否存在常见错误（分号、大括号、尾随小数、嵌套注释等）

# java - 使用 Guava 进行函数式递归？

> ID：12426094
> 
> 赞同：-1
> 
> 时间：2012-09-14T13:59:30.077
> 
> 标签：java, recursion, functional-programming, guava

我有一个基本实现的`MyService`接口。`MyServiceImpl`我包装`MyServiceImpl`成一个`MyService`装饰器链。

为此，我创建了`MyServiceDelegate`一个抽象类，它接受一个`MyService`实例并将所有服务调用委托给提供的`MyService`实例。

但是在我的单元测试中，出于特定的需要，我需要找回 的第一个真正实现`MyService`，即`MyServiceImpl`，并且我只有一个`MyService`which 指的是装饰器。

我只是想知道是否有可能使用 Guava，以一种功能性的方式进行递归，这将返回我已经装饰有很多层并且不是委托服务的“原始服务”。我想使用像 Function 这样的函数来返回委托服务，或者如果它是原始服务，则返回 null，但不知道要使用它。

我知道我可以通过 while 循环轻松做到这一点，而且我不是在寻找替代解决方案。只是想知道Guava是否可以解决这些问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T14:06:58.653

你甚至不需要 while 循环或 Guava。只需在您的界面中添加以下方法：

```
public MyService undecorate(); 
```

然后在委托中执行以下实现：

```
return decoratedService.undecorate(); 
```

以及“真实”实现中的以下实现：

```
return this; 
```

如果无法修改接口，请在外部进行：

```
public MyService undecorate(MyService service) {
    if (service instanceof MyServiceDelegate) {
        return undecorate(((MyServiceDelegate) service).getDecoratedService());
    }
    else {
        return service;
    }
} 
```

# c# - 是否有关于 Nhibernate 的概述，您必须按什么顺序使用扩展方法？

> ID：12426096
> 
> 赞同：2
> 
> 时间：2012-09-14T13:59:37.440
> 
> 标签：c#, linq, nhibernate

是否有概览显示或解释了必须调用 Linq 方法的顺序？

例如，如果您先调用`Take(200)`然后`OrderBy(..)`. 但是，当您切换这些呼叫时，您不会遇到异常。

所以我的问题是，有人知道一些解释这一点的文档吗？或者知道列出此类信息的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:02:35.007

调用它们的顺序没有限制。在 LINQ中调用`Take(200)`后跟是完全有效的。`OrderBy`LINQ 无非就是一系列方法；它没有描述这些方法是如何实际实现的。一些实际的实现包括 Linq-to-objects（有点特殊）、LINQ-To-SQL、实体框架，然后是基于`IQueryable`LINQ 方法的任意数量的其他查询提供程序。

某些特定的提供程序可能只支持 LINQ 方法的子集，或者可能不支持 LINQ 可以描述的某些其他方面。在这些情况下，他们可能会出错（或做一些其他不良行为）。您将需要查看您正在使用的任何特定 LINQ 提供程序的文档，以了解它支持和不支持的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T14:06:54.577

在调用 OrderBy 之前不能调用 Take(200) 的原因是 Take(200) 强制 NHibernate LINQ 提供程序评估 linq 查询。一旦查询被评估，它就不能在不重新评估查询的情况下添加更多的 SQL 子句，这可能会产生意想不到的后果。

# asp.net-web-api - 使用 Active Directory 的 ASP.NET Web Api 安全性

> ID：12426103
> 
> 赞同：3
> 
> 时间：2012-09-14T13:59:58.110
> 
> 标签：asp.net-web-api, wcf-security, adfs

我已经搜索了这些帖子，但没有找到与我的问题有关的确切内容。例如[安全性......通过广告](https://stackoverflow.com/questions/2898648/security-for-a-web-app-through-active-directory)提出更多问题是否明智？我的问题是这样的：

我们正在实现 WCF 应用程序，现在我们正在将 WCF ...我的意思是 ASP.NET Web Api ;) 放入我们的服务器堆栈。我想通过要求用户登录到 ADS 来保护服务，但如果他们已经登录（通过网络登录或其他方式），那么我不会请求登录。然后在服务中进行基于角色的授权。

我找不到关于如何处理 ADS 授权的很好的讨论或示例，特别是通过所有未来的端点（平板电脑和手机）。

我的一个想法是用户登录到 ADS，然后令牌就变成了为了安全和权利而处理的东西。所以现在我有点担心要完成多少编码才能完成这项工作。我们正在寻找 FederatedServices 在 WCF 中处理这个问题，但在这个弱 API 中没有这样的控制。

因此，我对任何输入感兴趣或将我引导至有关此的精彩文章。到目前为止，我所看到的只是我们的旧服务器所具有的自滚动安全性，我不想再遇到这种废话了。

哦，是的，我有没有提到我们的目标是整个 Web 服务的单点登录？？？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:01:46.237

最好的起点是[Dominick 的 Thinktecture Identity for Web API](https://github.com/thinktecture/Thinktecture.IdentityModel.40)。它是 Web API 的事实上的安全框架，并支持基于令牌的身份。

# python - 检查 python 调试器中的复杂变量，如 pudb

> ID：12426106
> 
> 赞同：5
> 
> 时间：2012-09-14T14:00:13.867
> 
> 标签：python, debugging, pudb

如何使用 python 调试器检查复杂变量（列表、字典、对象）值，我是 python 新手，我尝试了 pudb，看起来当变量类型为复杂类型时，调试器只显示变量的类型，而不是价值。

是否可以使用 pudb 检查值？或者有没有其他 python 调试器可以做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T17:06:03.730

要在 pudb 中查看复杂数据类型的内容：

1.  使用向右箭头将光标移动到右侧的*变量*框。

2.  使用向上和向下箭头将光标移动到您感兴趣的变量。

3.  使用反斜杠“\”来显示/隐藏数据结构的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-04T13:11:14.243

您只需按“！”即可进入 python/ipython shell。. 然后你可以玩弄你的变量（查看它们，改变它们，等等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T14:48:10.223

序列类型的打印语句在 pdb 子控制台中正常工作，如下所示

```
>>> import pdb
>>> l=[9,0]
>>> def j():l=[1,2,3]
... 
>>> pdb.run('j()')
> <string>(1)<module>()
(Pdb) continue
>>> pdb.run('j()')
> <string>(1)<module>()
(Pdb) print l
[1, 2, 3] 
```

一些 print obj.name 语句也适用于对象的属性访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-14T00:38:13.367

要默认显示变量列表中所有变量的内容，您可以通过按 Ctrl+P 转到 Preferences，然后在 Variable Stringifier 下选择 str() 或 repr() 以获得类似于 Python 解释器的变量显示。

否则，您可以通过按 s 或 r for str() 和 repr() 和 t 来切换变量列表（可通过右箭头键盘键访问）中的选定变量，然后返回以显示其类型。通过设置变量来显示其类型，您可以以有序的树形方式键入“\”（反斜杠）来扩展其内容。

如果您的变量是全局变量，或者由于某种原因您没有看到它，您必须通过点击 n 明确声明您希望观看它，然后键入它的名称。

# c# - Word Interop 不保存文件

> ID：12426108
> 
> 赞同：0
> 
> 时间：2012-09-14T14:00:19.093
> 
> 标签：c#, asp.net, com, office-interop

我有这段代码应该打开一个 docx 文件，我想将它保存为 pdf。
不幸的是，没有引发错误，但没有保存 PDF。

关于如何保存它的任何提示？

```
var wordApplication = new Microsoft.Office.Interop.Word.Application();
Microsoft.Office.Interop.Word.Document wordDocument = null;

try
{
    wordDocument = wordApplication.Documents.Open(docPath + ".docx");

    if (wordDocument != null)
        wordDocument.SaveAs2(docPath + ".pdf", Microsoft.Office.Interop.Word.WdSaveFormat.wdFormatPDF);
        //wordDocument.ExportAsFixedFormat(docPath + ".pdf", Microsoft.Office.Interop.Word.WdExportFormat.wdExportFormatPDF);
    else throw new Exception("CUSTOM ERROR: Cannot Open Word Application");
}
catch (Exception ex)
{
    new Exception("CUSTOM ERROR" + ex.Message);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:05:56.327

堆栈上的[这篇文章](https://stackoverflow.com/questions/607669/how-do-i-convert-word-files-to-pdf-programmatically)已经详细介绍了许多不同的选项。

Word，尤其是 Interop，在执行此类操作时特别痛苦，因为它基于 COM 的性质意味着它并不总是遵循 .NET 规则。在保存之前，您可能需要先激活（）文档，否则可能存在其他问题。您可能想尝试将文档另存为普通 docx 以隔离问题。也可能是文档中的某些内容未保存，因此值得首先使用基本文档进行测试。

编辑：查看此[链接](http://support.microsoft.com/kb/257757)和此[链接](http://forums.asp.net/t/1804781.aspx/1)

IIS 调整位于应用程序池的高级设置中。您需要以特定身份运行池，然后将 Load User Profile 设置为 true。我从来没有像这样使用过互操作，它可能无法正常工作。如果您只是想将 word 文档转换为 pdf，那么还有比互操作（OpenXML、pdf 库等）更简单的方法。您使用 Interop 是有原因的吗？

编辑：您可能想尝试一下 DocX。你可以在[这里找到](http://cathalscorner.blogspot.co.uk/2009/10/converting-docx-into-doc-pdf-html.html)

看起来这是转换的常见问题。我过去曾使用 Aspose 完成此操作，但我从来不必在服务器上转换 PDF 而不能简单地购买最好的组件（而且 Aspose 并不便宜！）。如果可以的话，我当然会建议尽量远离 Interop，但在阅读了那篇文章之后，可能需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-15T16:23:38.967

server 2008r2 和现在 server 2012r2 和 office 2010/2016 有同样的问题

尝试在 C:\Windows\SysWOW64\config\systemprofile 中创建一个“桌面”文件夹

这对我有用

找到另一篇关于此的文章

[office interop 在 Windows 服务中不起作用](https://stackoverflow.com/questions/13479164/office-interop-does-not-work-in-windows-service?rq=1)

# sql - PLSQL/如何在关联数组的迭代过程中添加值

> ID：12426111
> 
> 赞同：2
> 
> 时间：2012-09-14T14:00:23.663
> 
> 标签：sql, plsql, varray

我在PLSQL过程中需要这样的东西

```
 arrayCount:=parArray.Count;
 For i In 1 .. arrayCount Loop
    lsPar(i):=parArray(i);
 End Loop; 
```

是否可以？谢谢你的建议！:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T14:33:44.210

如果你正在工作`oracle`，那么这个匿名块将为你工作

```
 declare
    TYPE parArray IS TABLE OF VARCHAR2(64) index by binary_integer;
    v_parArray parArray;
    arrayCount number;
    lsPar parArray;

    begin
    v_parArray(1):='A';
    v_parArray(2):='B';
    v_parArray(3):='C';

    arrayCount:=v_parArray.Count;
       For i In 1 .. arrayCount 
       Loop
          lsPar(i):=v_parArray(i);
       End Loop;

     arrayCount:=lsPar.Count;
        For i In 1 .. arrayCount
         Loop
          dbms_output.put_line('The value of Ispar at index '||i||' is '||lsPar(i));
        End Loop;
     end; 
```

**输出**

```
 The value of Ispar at index 1 is A
 The value of Ispar at index 2 is B
 The value of Ispar at index 3 is C 
```

# ssas - MDX - 如何获取每个父母最近的孙子？

> ID：12426113
> 
> 赞同：0
> 
> 时间：2012-09-14T14:00:31.343
> 
> 标签：ssas, mdx

我有关于如何获取最近孙子的维度信息的问题，同时从孩子的父母那里为每个父母汇总事实金额（如果这有意义，我对 SSAS 和 MDX 还很陌生，所以请多多包涵我'将进一步解释）。

我不完全确定如何在我的维度中构造我的表（使用暗键或组键）或属性关系，以及如何有效地搜索多维数据集，最好是在块模式下而不是逐个单元格。

这是土地的布局：

事实表包含 500 多万行，并对财务进行了调整，因此我目前正在使用从日期到开始的时间总和。

70+百万行的维度表有一个帐户（祖父），它可以有 1:M 索赔（父），它也是类型 2，具有索赔级别信息（孙子？），记录每个维度发生变化时的开始和结束日期个人索赔。在孙级别有一个 Dim Key，在声明（父）级别有一个组键。

到目前为止，我尝试在 Fact 和 Dim 之间使用桥接表并使用以下 MDX 逻辑，该逻辑适用于非常小的帐户，但不适用于较大的帐户。需要注意的一件事是，较大的帐户可以有大约 60,000 个索赔。

有了以下内容，思考过程是获取每个索赔的尾部 <= 传入的日期。然后使用此信息对事实数据进行切片并将每个索赔的数据汇总到通过组键传入的日期（不是暗键，因为需要总计财务）。

```
with 
set [FilterRecBeginDate] as 
Generate([CLAIM].[Claim Number].Children,
Tail(Filter(
    CrossJoin([CLAIM].[Claim Number].CurrentMember,
          {[CLAIM].[Claim Record Begin Date].Children},
          {[CLAIM].[Claim Status Code].Children}
          )
, [CLAIM].[Claim Record Begin Date].CurrentMember.Name <= '2009-08-23'
)
)
)
select 
{[Measures].[Paid Amount], 
 [Measures].[Paid Loss Amount]}on columns,
non empty [FilterRecBeginDate] on rows
from [Cube]
where ([CALENDAR DATE].[Date].&[19000101]:[CALENDAR DATE].[Date].&[2009-08-23T00:00:00]) *
{([CLAIM].[Claimant Name].&[xxxxx])} 
```

1.) 如果仅给定帐户和日期作为参数，我如何以不同的方式构建多维数据集和/或暗淡属性关系以更好地支持此类查询？

2.) 我玩过 MDX Generate 和 Desendants，它们似乎都一个接一个地循环。也许循环是唯一的选择，但我希望有更好的方法。可以通过以不同方式编写 MDX 来利用块模式吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:45:14.907

我认为您可以`FilterRecBeginDate`通过减小交叉连接的大小来优化计算。您还可以计算一次过滤器：

```
with 
set [tmp] as 
    CrossJoin(
        Filter([CLAIM].[Claim Record Begin Date].Children, 
               [CLAIM].[Claim Record Begin Date].CurrentMember.Name <= '2009-08-23'
        ), 
        [CLAIM].[Claim Status Code].Children
    )
set [FilterRecBeginDate] as 
    Generate([CLAIM].[Claim Number].Children,
        Tail(
            CrossJoin({[CLAIM].[Claim Number].CurrentMember}, [tmp])
        )
    ) 
```

# javascript - 如何有效地将游戏数据存储在 URL 查询字符串中？

> ID：12426114
> 
> 赞同：2
> 
> 时间：2012-09-14T14:00:32.567
> 
> 标签：javascript, compression

## 背景

我写了一个简单的 WebGL 益智游戏，我想让人们设计和分享他们自己的关卡。

我的想法是将关卡数据存储在 URL 的查询字符串中。如果他们想让朋友尝试关卡，这将让人们简单地分享 URL。

将游戏数据存储在查询字符串中的好方法是什么？

## 我试过的

目前我通过

```
"penguins.html?data="+encodeURIComponent(JSON.stringify([X,P])); 
```

这首先将数据转换为 JSON：

```
[[[[3,-1,0,0,0],[4,-1,0,0,0]]],[{"x":20,"y":20,"dx":0,"dy":0,"vy":2.9999999871229686,"vx":0.0002779607689814708,"thetaf":180,"speed":3,"type":0,"state":6,"steps":0,"numfish":0,"d":4,"size":8},{"x":60,"y":60,"dx":20,"dy":100,"vy":97.51615330485151,"vx":-78.06665276994102,"thetaf":0,"speed":3,"type":17,"state":0,"steps":0,"numfish":0,"d":15,"size":89.00000012433019}]] 
```

然后将其转义为：

```
[[[[3%2C-1%2C0%2C0%2C0]%2C[4%2C-1%2C0%2C0%2C0]]]%2C[{%22x%22%3A20%2C%22y%22%3A20%2C%22dx%22%3A0%2C%22dy%22%3A0%2C%22vy%22%3A2.9999999871229686%2C%22vx%22%3A0.0002779607689814708%2C%22thetaf%22%3A180%2C%22speed%22%3A3%2C%22type%22%3A0%2C%22state%22%3A6%2C%22steps%22%3A0%2C%22numfish%22%3A0%2C%22d%22%3A4%2C%22size%22%3A8}%2C{%22x%22%3A60%2C%22y%22%3A60%2C%22dx%22%3A20%2C%22dy%22%3A100%2C%22vy%22%3A97.51615330485151%2C%22vx%22%3A-78.06665276994102%2C%22thetaf%22%3A0%2C%22speed%22%3A3%2C%22type%22%3A17%2C%22state%22%3A0%2C%22steps%22%3A0%2C%22numfish%22%3A0%2C%22d%22%3A15%2C%22size%22%3A89.00000012433019}]] 
```

## 当前方法的缺点

这种方法适用于小级别，但对于更大的级别，我得到了错误：

```
414\. That’s an error.

The requested URL /penguins.html... is too large to process. 
```

看来我当前的主机（Google Appengine）对 URL 的长度有限制。

## 问题

Javascript 中是否有更好的方法来存储我的游戏数据（即会导致 URI 更短）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T14:06:09.523

由于数据由客户端解析和使用，因此您不需要实际将这些数据发送到服务器。因此，不要使用查询字符串，而是使用 url 的哈希部分：

```
"penguins.html#" + encodeURIComponent(JSON.stringify([X, P])); 
```

注意`#`. 现在您可以使用以下方法解析日期：

```
JSON.parse(location.hash.substring(1)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T14:10:24.497

I've done something similar where I make a POST to GAE with the JSON data and store it in the datastore with a generated key and return a url based on that key for the user to share.

So you make your post of the JSON data. You store that data in an object like:

```
/* Annotations ommitted */
public class GameInfo {
    public JSONObject gameData;
    public Integer key;
} 
```

The `key` is an auto generated `int`. Then you return to the user a url like: `http://www.mygameurl.com/games?id=1234` with id corresponding to the generated `key`. Then you can let the user share that url to get the game data back from the datastore. It shortens the url that the user is sharing and prevents them from messing with the url and breaking the game data.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T14:05:45.327

您可以将游戏存储在 sql 数据库中，并将 url 指向其在 DB 上的 ID 以加载它。

或者，如果您愿意，但更复杂，将 url 打包成二进制数据并将其显示为 base64，因此只需解包即可加载游戏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T14:44:01.527

这取决于您正在开发的游戏类型，但在某些情况下，特别是在确定性益智游戏中，存储导致特定游戏状态的步骤可能比存储整个状态本身更有效。

例如，假设您正在制作国际象棋游戏，您可以通过保存步骤 (e4,e5;f4,exf4;Bc4...) 而不是所有棋子在棋盘中的位置来保存棋盘状态。如果您的初始游戏状态是程序生成的，您还可以将游戏的初始种子保存在 URL 上。

这样，当您的 servlet 接收到具有特定 URL 的请求时，servlet 可以通过重做给定 URL 的所有步骤来重新计算结束状态。

# sql - 有多个复选框勾选了 VB6？

> ID：12426117
> 
> 赞同：0
> 
> 时间：2012-09-14T14:00:42.707
> 
> 标签：sql, vb6

我有一个程序，当单击搜索时，它会显示产品列表。创建新产品时，有一个“活动”复选框，该复选框自动设置为 True。用户可以编辑任何产品，如果需要，可以将产品更改为“非活动”。

在搜索表单上，有两个复选框：活动和非活动。当程序加载时，Active 复选框总是被勾选。如果用户也想查看非活动产品，则应该能够同时勾选。

在我选中活动的那一刻，列表框显示所有活动项目，当我选中非活动时，它只显示非活动项目。但是，当我同时勾选时，只显示非活动产品。

这是我的代码：

```
Private Sub cmdProdSearch_Click()
    Dim conn As ADODB.Connection
    Dim rs As ADODB.Recordset
    Dim list_item As ListItem
    Dim itm As ListItem

    db_file = db_file & "ProductsDatabase1.mdb"
    Set conn = New ADODB.Connection
    conn.ConnectionString = _
    "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\ProductsDatabase1.mdb;" & _
    "Persist Security Info=False" & _
    "Data Source=" & db_file & ";" & _
    "Persist Security Info=False"
    conn.Open

    Set rs = conn.Execute("Select * from Export where Product like '%" & _
        txtProduct.Text & "%'")
    If chkActive.Value = 1 Then
        Set rs = conn.Execute("Select * from Export where Inactive = '0'")
    Else
        Set rs = conn.Execute("Select * from Export where Inactive = '1'")

        ListView1.ListItems.Clear

        With ListView1
            .View = lvwReport
            .FullRowSelect = True
            Do While Not rs.EOF
                Set itm = .FindItem(txtProduct.Text, lvwText, , lvwPartial)
                Set list_item = .ListItems.Add(, , rs!Product)
                list_item.SubItems(1) = rs!barcode & ""
                list_item.SubItems(2) = rs!quantity & ""
                list_item.SubItems(3) = rs!Department & ""
                list_item.SubItems(4) = rs!Active & ""
                list_item.SubItems(5) = rs!Inactive
                rs.MoveNext
            Loop
        End With
    End If

End Sub 
```

此外，我使用 Access 数据库存储产品信息，并使用 SQL 语句查找信息。

当两个复选框都被勾选时，有什么建议能够显示机器人活动和非活动项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T14:17:10.117

你需要更新你的逻辑。正如所写`ListView1`的，仅在`chkActive.Value <> 1`.

通常我会创建一个单独的字符串变量来保存我的 SQL，然后根据条件构建我的搜索......这是您的代码的编辑，它执行此操作并包含不同复选框的逻辑路径。它假设您的另一个复选框被称为`chkInactive`：

```
Private Sub cmdProdSearch_Click()
    Dim conn As ADODB.Connection
    Dim rs As ADODB.Recordset
    Dim list_item As ListItem
    Dim itm As ListItem
    dim SQL as string

    db_file = db_file & "ProductsDatabase1.mdb"
    Set conn = New ADODB.Connection
    conn.ConnectionString = _
    "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\ProductsDatabase1.mdb;" & _
    "Persist Security Info=False" & _
    "Data Source=" & db_file & ";" & _
    "Persist Security Info=False"
    conn.Open

    SQL = "Select * from Export where Product like '%" & txtProduct.Text & "%'"
    If chkActive.Value = 1 Then
        If chkInactive.Value = 1 Then
            'do nothing because criteria is already set.
        Else
            SQL = SQL & " AND Inactive = '0'"
        End If
    ElseIf chkInactive.Value = 1 Then
        SQL = SQL & " AND Inactive = '1'"
    Else
        'Do something because neither are checked?
    End If
    Set rs = conn.Execute(SQL)
    ListView1.ListItems.Clear

    With ListView1
        .View = lvwReport
        .FullRowSelect = True
        Do While Not rs.EOF
            Set itm = .FindItem(txtProduct.Text, lvwText, , lvwPartial)
            Set list_item = .ListItems.Add(, , rs!Product)
            list_item.SubItems(1) = rs!barcode & ""
            list_item.SubItems(2) = rs!quantity & ""
            list_item.SubItems(3) = rs!Department & ""
            list_item.SubItems(4) = rs!Active & ""
            list_item.SubItems(5) = rs!Inactive
            rs.MoveNext
        Loop
    End With
End Sub 
```

# javascript - 拆分文本以每 n 个字符添加一个新行，注意空格

> ID：12426118
> 
> 赞同：6
> 
> 时间：2012-09-14T14:00:43.880
> 
> 标签：javascript, string, replace, split

为警报和确认对话框编写文本时的常见问题：在添加换行符之前要输入的字符数。有些浏览器会在某一时刻自动中断，而另一些则在其他时刻自动中断。所以你只能猜测。有用的片段是一个 Javascript 函数，它将警报或确认对话框的预期文本和字符长度作为输入，然后返回相同的输入字符串，仅在空格最接近传入字符长度的位置添加新行字符。这样，单词不会中途分解。

示例：
1\. 将 var 分配给要用于警告或确认对话框的文本字符串，例如：
var a = "My dog has fleas the quick brown fox jumps over the lazy dog etc";
2.通过函数运行文本，例如：
a = breakLines(a); // 默认，每 50 个字符中断一次
或
a = breakLines(a, 20); // 每 20 个字符

换行 在函数运行后显示 'a' 的值，你会看到在你指定的每个位置都添加了换行符，在最接近你指定的字符位置的空格字符处。例如，如果您指定 20，则“a”将转换为以下内容：

'我的狗有跳蚤\n敏捷的棕色狐狸\n跳过懒惰的\n狗等'

对于字符串中的每一行（一行是以换行符结尾的字符串的一部分），该行的两边都被修剪掉空白。下面的代码片段使用 jQuery $.trim() 函数来执行此操作，但还有其他方法可以在不使用 jQuery 库的情况下执行此操作，例如使用正则表达式。只需根据您的需要修改代码以使用替代方法。

这引出了我的问题：除了按照如下所示的方式做我想做的事情之外，是否有一种更简单、更紧凑的方法，例如可以利用正则表达式的方法？有接盘侠吗？

```
function breakLines(text, linelength)
{
 var linebreak = '\n';
 var counter = 0;
 var line = '';
 var returntext = '';
 var bMatchFound = false;
 var linelen = 50; // 50 characters per line is default

 if(linelength)
 {
  linelen = linelength;
 }

 if(!text){ return '';}
 if(text.length < linelen+1) { return $.trim(text);}

 while(counter < text.length)
 {
  line = text.substr(counter,linelen);
  bMatchFound = false;
  if (line.length == linelen)
  {
   for(var i=line.length;i > -1;i--)
   {
    if(line.substr(i,1)==' ')
    {
     counter += line.substr(0,i).length;
     line = $.trim(line.substr(0,i)) + linebreak;
     returntext += line;
     bMatchFound = true;
     break;
    }
   }

   if(!bMatchFound)
   {
    counter+=line.length;
    line = $.trim(line) + linebreak;
    returntext += line;
   }
  }
  else
  {
   returntext += $.trim(line);
   break; // We're breaking out of the the while(), not the for()
  }
 }

 return returntext;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-08T07:37:22.333

没有参数验证的简短版本

```
function explode(str, maxLength) {
    var buff = "";
    var numOfLines = Math.floor(str.length/maxLength);
    for(var i = 0; i<numOfLines+1; i++) {
        buff += str.substr(i*maxLength, maxLength); if(i !== numOfLines) { buff += "\n"; }
    }
    return buff;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:29:45.573

也许 ？

```
function breadLines( str, len )
{
    var len = len || 50, i, j, lines, count, lineBreak = '\n', out = [];

    if ( str.length < len )
        return str;

    lines = str.split(/\s+/);

    for ( i=0, j=0, count=lines.length; i<count; i++ )
    {
        if ( ( out[j] + lines[i] ).length > len )
            j++, out.push("");

        out[j] += lines[i];
    }

    return out.join(lineBreak);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-14T15:22:58.913

这应该这样做：

```
function breaklines(str, n) {
    var lines = str.split(/\s+/), // explode on whitespaces
        n = +n || 50;
    var res = [];
    for (var i=0; i<lines.length; ) {
        for (var l = 0, line = []; l + lines[i].length <= n; i++) {
            l += 1 + lines[i].length;
            line.push(lines[i]);
        }
        res.push(line.join(" "));
    }
    return res.join("\n");
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-01-04T10:55:46.487

这个函数是递归的，而且更简单。它还处理文本中已经存在的换行符。它很短，没有循环。

```
function explode (text, max) {
        if (text == null) return '';
    if (text.length <= max) return text;
    const nextNewLine = /\n/.exec(text);

    const lineLength = nextNewLine ? nextNewLine.index: text.length;
    if (lineLength <=  max) {
        const line = text.substr(0, lineLength);
        const rest = text.substr(lineLength+1);
        return line + '\n'+  explode(rest, max);
    } else {
        let line = text.substr(0, max);
        let rest = text.substr(max);

        const res = (/([\s])[^\s]*$/.exec(line));
        if(res){ //
            line = text.substr(0, res.index);
            rest = text.substr(res.index+1);
        } else {
            line = line + "-";
        }
        return line + '\n'+  explode(rest, max);
    }
} 
```

# mysql - 如何检测两个数据库之间的表和存储过程更改？

> ID：12426119
> 
> 赞同：0
> 
> 时间：2012-09-14T14:00:47.483
> 
> 标签：mysql, stored-procedures, deployment, table-structure

我有两个数据库，一个用于我的开发系统，另一个用于生产系统。

是否可以检测到两个系统之间的结构变化？（无数据，只检测结构变化）

目前我更新了一个文本文件，其中包含我对表**和**存储过程的所有结构更改。我想自动执行此操作，例如在部署 shell 脚本中。

以下是解决此问题的尝试。问题是我没有得到可以执行的完整 sql 语句。

```
mysqldump --skip-comments --no-data --routines --host=sql.test.de --user=root --password=123 bim_stage > /home/deploybackups/stagestructure.sql 
mysqldump --skip-comments --no-data --routines --host=sql.test.de --user=root --password=123 bim_dev > /home/deploybackups/devstructure.sql

diff /home/deploybackups/stagestructure.sql /home/deploybackups/devstructure.sql > /home/deploybackups/diffstructure.sql 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:18:45.707

您可以使用[SQLyog](http://www.webyog.com/en/downloads.php)等 MySQL GUI 工具轻松完成此操作。SQlyog 的模式同步向导能够满足您的要求，即检查结构的变化并同步它们。请参阅随附的屏幕截图。

![模式同步 SQLyog](../Images/1b5f69029c1da4f176e6a1e914305c70.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T16:00:57.970

您正在尝试制定技术解决方案，而实际上该过程已被破坏。谁在没有安排将*完全相同的 sql*应用于登台、QA 和开发的情况下对生产进行了原始更改？

也就是说，如果您有一个“正常”大小的数据库并且这些更改“很少”发生，我会使用*diff*方法来确定是否已进行更改。手动编写 SQL 脚本来影响更改并不难。不过，我仍然会骚扰做出改变的人。

请注意，*diff*具有忽略空白/空白行更改的选项。

完成后，将新模式签入源代码存储库。总有一天会派上用场的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T14:34:02.100

我相信您可以使用一些文本或 GUI 比较工具来解决大多数问题。但是，每次格式更改或有人不遵循您的标准时，一切似乎都发生了变化。在某个地方，您**会**发现自己正在修复奇怪的错误，例如计算*空格*等。

我的意思是，根据我的经验，这并不完全是最好的方法。多年来，我已经看到了一些关于如何解决这个更新问题的不同尝试。

*   Visual Studio 通过创建一个数据库项目来解决这个问题，该项目将所有更改保存在某种版本日志中。不完全确定具体情况。简单地说你按**同步**和tada！它有效，但如果你问我，它非常全面且缓慢。

处理此 IMO 的最简单方法是将所有结构更改放入版本日志/表中；可以这么说。

假设您的基本数据库需要一个新表。您将进入您的编辑器并添加它（使用 GUI 或代码），按保存并完成。

而是按提取 SQL；不要按保存。

我现在的建议是这样的：

您构建了一个带有大输入框和提交按钮的小型内部 Web 界面。点击提交按钮将从输入框中针对您的本地开发数据库执行任何 SQL 并将结果返回给您。

如果数据库返回成功，则 SQL 字符串将添加到您的 changeLogSQLVersionThingyTable 中，其中至少包含三列：

1）自动递增版本（整数）2）sql（文本）3）时间戳（timedate）4）开发人员ID？？

当您对数据库进行更改时，例如添加以前的表，请改用此工具。

现在，您对数据库的所有更改都在一个不错的版本列表中。要更新数据库，您所要做的就是执行 changeLogSQLVersionThingyTable 中的每一行，从该特定数据库上次更新到的版本开始。

通过一些努力，您还可以将数据库重建到更早的位置；只需创建一个新数据库并将所有行一直运行到您想要的版本点。

# sql - Sql：Haversine 公式错误列不存在

> ID：12426124
> 
> 赞同：2
> 
> 时间：2012-09-14T14:01:03.443
> 
> 标签：sql, ruby-on-rails, subquery, haversine

我遇到了一个与我的半正弦公式有关的奇怪问题。它在我的应用程序中发生的方式是；

```
select lat,long,distance from(
        select lat,long,( 6371 * acos( cos( radians("+testLatitude.to_s+") ) * cos( radians( lat ) ) * cos( radians( long ) - radians("+testLongitude.to_s+") ) + sin( radians("+testLatitude.to_s+") ) * sin( radians( lat ) ) ) ) as distance
        from available_people) as dt where distance < "+distance.to_s+" order by distance 
```

我 100% 确定我的**available_people**表中有一个 personName，但我无法让下面的查询正常工作。它给了我列不存在错误。

```
select lat,long,distance from(
            select personName,lat,long,( 6371 * acos( cos( radians("+testLatitude.to_s+") ) * 

    cos( radians( lat ) ) * cos( radians( long ) - radians("+testLongitude.to_s+") ) + sin( radians("+testLatitude.to_s+") ) * sin( radians( lat ) ) ) ) as distance
                from available_people) as dt where distance < "+distance.to_s+" order by distance 
```

可能的原因是什么。我可以检索 personName 列以及 lat、long 信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:48:47.380

没有看到确切的错误（你真的应该包括它）我会说你应该`personName`在表前加上 ie`available_people.personName`或`dt.personName`（如果我正确地阅读你的查询）。

其次，尽管不相关，但您的 lat/lng 列使用什么列类型？这是使用mysql吗？作为浮动？

如果是这种情况，那么一旦您的表拥有足够的记录，您就会遇到严重的性能问题。我在大约 50k 条记录中遇到了这个问题，其中查询需要 2 分钟或更长时间。

如果您正在处理地理空间数据，请考虑使用 Postgres+PostGIS 或 MongoDB。这些解决方案具有地理空间索引，可让您的查询超快且功能强大，这样您就不必自己执行余弦或球面余弦定律。

# java - Java - Eclipse - 声明的包“edu.uci.ics.crawler4j.examples.basic”与预期的包“”不匹配

> ID：12426128
> 
> 赞同：0
> 
> 时间：2012-09-14T14:01:14.313
> 
> 标签：java, eclipse, crawler4j

我正在尝试为[Crawler4j](http://code.google.com/p/crawler4j/)设置示例代码，但 Eclipse 抛出了一个我不理解的错误。错误是：

```
The declared package "edu.uci.ics.crawler4j.examples.basic" does not match the expected package "" 
```

路径“edu.uci.ics.crawler4j.examples.basic”在那里并且正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:02:35.743

您需要从基本目录运行 Java 编译器，以便它看到该`edu/...`文件夹​​。
如果您从包含实际`.java`文件的目录中运行它，它将看不到任何文件夹，因此它将期待默认包。

# iphone - uitableview 水平滚动

> ID：12426131
> 
> 赞同：0
> 
> 时间：2012-09-14T14:01:30.677
> 
> 标签：iphone, ipad, uiscrollview, horizontal-scrolling

`UITableview`水平滚动时出现问题。
`UItableview`框架是`(0,0, 500, 200)`和`contetSize`是`(1500, 200)`。

当`contentOffset` **x**等于 时`frame width`，其内容消失。

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:25:51.030

内容偏移量.y ? 您将 contentOffset 设置为 500，这比您的 contentSize.y 的 200“深”了 300 点？

# sql - 如何在sql中指定分支？

> ID：12426134
> 
> 赞同：-1
> 
> 时间：2012-09-14T14:01:41.680
> 
> 标签：sql, sql-server, case-when

我尝试使用 CASE WHEN 语句，但似乎我错过了什么，或者这不是正确的做法。@APASS 参数使查询返回通过或未通过指定考试的人。

```
SELECT   ID, Name,ZipCode,Mobile 
      FROM   tblStudent
      WHERE  (Sex = @Sex) AND (ID IN
      (SELECT StID
      FROM    tblTest
      WHERE   (TestID = @TestID) AND
          CASE WHEN @APass = TRUE THEN (Score IN (27, 28, 29, 30))
          ELSE (Score NOT IN (27, 28, 29, 30))
          END
      GROUP BY StID, TestID
      HAVING        (COUNT(*) = @Times))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:10:52.527

在你的情况下如何：

```
WHERE TestID = @TestID
AND 
(
    (@APass = 'TRUE' AND Score IN (27, 28, 29, 30))
    OR (@APass = 'FALSE' AND Score NOT IN (27, 28, 29, 30))
) 
```

或者您可以创建两个单独的查询，一个用于通过，一个用于失败。如果您关心性能，这可能是最有效的。

你也可以做一些可爱的事情，比如：

```
WHERE TestID = @TestID
AND @APass=IF(Score IN (27, 28, 29, 30),'TRUE','FALSE') 
```

但我再次想知道这是否真的会给你一个优化的查询。

# javascript - 从 Javascript 方法返回全局变量

> ID：12426135
> 
> 赞同：-3
> 
> 时间：2012-09-14T14:01:46.753
> 
> 标签：javascript, function, methods, web

我有一个方法：

```
function calculateThings(newdata){

} 
```

如何从其中返回全局变量？

谢谢！

抱歉没有详细说明。

```
var thisData = "";

function calculateThings(newData) {

    thisData = newData.things.otherthings //has a value of 10;

}

alert(thisData) //returns nothing 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:10:16.430

There doesn't seem to be much point in returning a global variable, the function can just set it and other functions reference it.

```
var setGlobal = (function(global) {
  return function(value) {
    global.someVarName = value;
  }
}(this));

var readGlobal = (function(global) {
  return function() {
    return global.someVarName;
  }
}(this));

setGlobal('foo');
alert(readGlobal()); // foo
alert(someVarName);  // foo 
```

# android - 使用aapt转储时如何打印指定参数

> ID：12426137
> 
> 赞同：1
> 
> 时间：2012-09-14T14:01:49.897
> 
> 标签：android, cmd, substring, apk, aapt

我在[这里](https://stackoverflow.com/a/6289168/1137788)看到命令

```
aapt dump badging foo.apk 
```

打印指定包的所有详细信息。

是否可以打印任何一个属性，比如 sdkversion？就像是

```
aapt dump badging -sdkversion foo.apk 
```

PS我在Windows中使用命令提示符。

**编辑**

我正在尝试将包名称存储在变量中。截至目前，我有这个代码

```
@echo off
for /f "delims=" %%a in ('aapt dump badging foo.apk') do (
     REM each line of the output
) 
```

我能够检索输出的每一行。现在我必须从字符串中提取包名。例如第一行是

> 包：name='com.timeplusq.noob' versionCode='15' versionName='1.5'

这是在 for 循环的第一次迭代中检索的。如何从中提取包名。我认为字符串操作会很简单，但事实并非如此。 **那么如何从字符串中提取包名呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:23:40.710

如果您在 Unix 系统上或在 Windows 上使用 cygwin，您可以尝试以下命令：

```
aapt dump badging foo.apk | grep sdkVersion | sed -E "s/^[^:]+:\'(.*)\'$/\1/" 
```

正则**表达式**将提取**grep**命令选择的行的值

**编辑 ：**

在 Windows 系统中，您可以使用以下脚本保存为`.cmd`：

```
@echo off
set property=sdkVersion:'10'
set property=%property:sdkVersion=%
set property=%property:~2,-1%

echo.%property% 
```

# html - 我的 HTML 页面顶部有气隙，不知道为什么

> ID：12426140
> 
> 赞同：0
> 
> 时间：2012-09-14T14:01:58.827
> 
> 标签：html, css

我有以下使用 CSS 样式的 HTML。这是我的 HTML 文档的顶部：

```
<!DOCTYPE html>
<html lang="en-US">
<head>
    <title>A Title</title>
    <link rel="stylesheet" href="styles.css" type="text/css" media="screen">
</head>
<body>
        <div id="header">
            <h1 id="header_text">Welcome</h1>
        </div> 
```

间隙位于页面顶部和“标题”div 之间。

设置此代码样式的 CSS 是

```
*{
    margin: 0;
    padding: 0;
}

html, body{
    font-family: "Segoe UI";
    font-size: normal;
    margin: 0;
    width: 100%;
    height: 100%;
}

#header{
    background: #000000;
    width: 100%;
    margin: 0;
    padding: 0;
    border: 0;
} 
```

任何人都可以看到气隙的原因吗？我已经为此工作了将近一个小时，这让我发疯了！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:08:21.187

尝试使用保证金：0；填充：0；在您的 header_text 上。使用重置？

# extjs - 如何全局重新定义 Ext.LoadMask.msg

> ID：12426142
> 
> 赞同：3
> 
> 时间：2012-09-14T14:02:00.760
> 
> 标签：extjs, extjs4

如何`Ext.LoadMask.msg`通过 ExtJS 4.1 MVC 上的所有应用程序全局重新定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T16:45:27.080

> *以下适用于 ExtJS 4*

尝试以下成功测试的代码：

```
if (Ext.view.AbstractView) {
    Ext.view.AbstractView.prototype.loadingText = 'Your message here ...';
} 
```

你也可以使用这个：

```
if (Ext.LoadMask) {
   Ext.LoadMask.prototype.msg = 'Your message here ...';
} 
```

这里的问题是更改消息文本会影响 LoadMask 消息文本本身，但大多数组件在实例化负载掩码时**会覆盖**它。这意味着**您不能全局更改它**。

但是第一个示例应该涵盖大多数情况。无论如何，您可以将此结构用于覆盖消息并更改每个组件的默认消息的所有组件。

例如，您想更改所有组合框的加载消息：

```
if (Ext.view.BoundList) {
   Ext.LoadMask.prototype.msg = 'Your message here ...';
} 
```

# html - 固定在底部的页脚不允许内容完整显示

> ID：12426155
> 
> 赞同：2
> 
> 时间：2012-09-14T14:03:02.540
> 
> 标签：html, css

我在我的网站上遇到了一些问题，不知道如何解决。我将页脚固定在底部（位置：固定，底部：0），但现在中间内容不完整。为什么？我的错误在哪里？这是[网站](http://comvivem.treswd.com/net/register)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:06:51.707

添加这个 -

```
#main_content {
    margin: 15px auto;
    padding: 0 0 120px 0;
} 
```

您的页脚高度是`100px`为了覆盖您需要在底部留下相同数量的空间`#main_content`

# c# - 使用本地数据库优化客户端服务器应用程序？

> ID：12426156
> 
> 赞同：1
> 
> 时间：2012-09-14T14:03:02.913
> 
> 标签：c#, sql, wpf, sql-server, client-server

我有一个使用 WPF 用 C# 编写的客户端/服务器应用程序。服务器上的数据库变得非常大，应用程序必须加载大部分数据（让我们不要争论它的那部分......只要相信我并接受它的本质）。我可以根据需要根据需要提取数据，但是由于不断地与远程数据库来回查询，这会产生性能问题。

不过，如果在应用程序启动时我可以将所需的数据拉到客户端并将其存储在本地运行的数据库中，那将是很棒的。然后应用程序查询本地数据库，而不是远程服务器数据库。通过这种方式，应用程序保持较低的内存占用，但仍然可以快速访问数据，因为它是本地的。

是否可以以这种方式使用 SQL Server Express 或 LocalDB？即让它们在客户端机器上运行，并在应用程序启动时与服务器数据库同步？如果是这样，这是推荐还是不推荐使用它们？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:10:43.653

查看 SQL 精简版

[SQL 精简版](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)

[SQL LITE 功能](http://system.data.sqlite.org/index.html/doc/trunk/www/features.wiki)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:14:02.387

如果您还没有，请查看 MS Sync Framework：http: [//msdn.microsoft.com/en-us/sync/bb736753.aspx](http://msdn.microsoft.com/en-us/sync/bb736753.aspx) 学习曲线陡峭，但它是为这些场景设计的。

该应用程序可以在启动时或在需要时将新的/更新的数据下拉到本地数据库。这有助于提高性能或网络连接可能不稳定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T15:33:17.827

你能不能不考虑一下这个问题，而不是把额外的问题推给你的客户，只是想在你的数据库前面放一个薄层？

如果您要使用基于 NoSQL 的薄层（最受欢迎的是 MongoDB 或 CouchDB），您可以将对象缓存在其中，以便从数据库中移除负载并将其推送到缓存中，然后您还可以获得扩展缓存的能力如果您愿意，可以水平跨过其他框。

我知道这有点违背你问题的“使用本地数据库”部分，但我不想忽视这样一个事实，即你可以在不接触客户端的情况下解决你的问题（可能会更改一些连接字符串，但你的模型会保持不变）相同的）。

# java - 弹簧组件扫描不起作用

> ID：12426158
> 
> 赞同：2
> 
> 时间：2012-09-14T14:03:09.137
> 
> 标签：java, spring

Spring 组件扫描似乎不起作用。我正在使用 Spring 3.1 和 tomcat 7.0。

这就是我的 applicationContext.xml 的样子：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
xmlns:tx="http://www.springframework.org/schema/tx" xmlns:cache="http://www.springframework.org/schema/cache"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:aop="http://www.springframework.org/schema/aop"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd 
            http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd
            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd">

    <context:annotation-config/> 
    <context:component-scan base-package="com.abc"/>

    <bean id="myBean" class="com.efg.test.MyBean" />
</beans> 
```

我有这样的课：

```
package com.abc.test

@Component
class Test {
    @Autowired
    private static MyBean myBean;

    public static MyBean getMyBean() { return myBean; }
    public static void setMyBean(MyBean bean) { myBean = bean; }
} 
```

我曾预计测试将在 web 应用程序启动时由 Spring 初始化，并且 myBean 将自动注入，因此如果我调用测试的任何（静态）方法，我对 myBean 的引用不是空的。

但是，myBean 没有被注入并且始终为空（myBean 本身被初始化为单例，它只是没有被注入）。我还需要做什么才能使其正常工作？如果我将测试类添加到 applicationContext.xml 一切正常。我的猜测是 Test 只是没有被 Spring 初始化，因此没有连接。

**更新：** 我需要能够从静态上下文访问自动装配字段（此类的方法称为 JSP 函数），因此它必须是静态的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T14:17:39.963

Spring 的想法是它初始化和配置类的**实例**（即对象）。在实践中，这意味着`@Autowired`不能应用于`static`字段，因为静态字段不属于任何实例（并且您的访问器方法也不应该属于`static`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:20:03.830

我不相信你可以直接用 Spring 注入静态字段。看到[这个](https://stackoverflow.com/questions/11324372/how-to-make-spring-inject-value-into-a-static-field)。

# jquery - Javascript 性能：缓存与无缓存 - 奇怪的结果

> ID：12426160
> 
> 赞同：0
> 
> 时间：2012-09-14T14:03:19.730
> 
> 标签：jquery, dom, performance

我正在尝试优化一些遍历和隐藏/显示一些无序列表的基本 jquery 脚本。

这是 jsperf 中的测试用例：http: [//jsperf.com/caching-vs-no-caching](http://jsperf.com/caching-vs-no-caching)

我在两个浏览器中运行测试：Chrome 和 IE7/IE8，令人惊讶的是缓存的情况更慢 - 有点慢但仍然如此。

未优化的版本是：

```
(function( $ ) {
  $.fn.menuManipulation = function() {
    this.parents().show();
  };
})( jQuery );

$('.menu-vertical li.selected').menuManipulation();
$(".menu-vertical li.selected > ul.static").show();
$('li.static').has('ul').addClass("with-child"); 
```

和缓存的：

```
(function($) {  
    $.fn.menuManipulation = function() {
    this.parents().show();
    };
})(jQuery);

var menu = $('.menu-vertical');
menu.find('li.selected').menuManipulation();
menu.find('li.selected > ul.static').show();
menu.find('li.static').has('ul').addClass("with-child"); 
```

有人可以解释我做错了什么以及为什么缓存的版本似乎更慢吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T14:07:06.370

简短的回答：选择器实际上非常快，但速度非常`find`慢。您的缓存版本引入了多个`find`调用 - 这就是缓慢的。

稍微长一点的答案：如果您继续按原样重新使用它，您只会从缓存 jQuery 集合中真正受益。看看这个缓存版本运行速度明显更快的测试用例：http: [//jsperf.com/cachingjq](http://jsperf.com/cachingjq)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T14:11:44.230

乔治，

在您的“缓存”案例中尝试此操作，看看性能差异是什么：

```
(function($) {  
    $.fn.menuManipulation = function() {
        this.parents().show();
    };
})(jQuery);

var menu = $('.menu-vertical');
$('li.selected', menu).menuManipulation();
$('li.selected > ul.static', menu).show();
$('li.static', menu).has('ul').addClass("with-child"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T14:15:21.987

`find()`究竟是“慢得像地狱”，还是实际上快得像地狱，这是有争议的。您的性能问题可能取决于您使用的 jQuery 版本或 DOM 的结构。

有关性能参数的另一面，请参见此处`find()`： [jQuery 选择器性能](https://stackoverflow.com/questions/1411143/jquery-selector-performance)， [http ://seesparkbox.com/foundry/jquery_selector_performance_testing](http://seesparkbox.com/foundry/jquery_selector_performance_testing)

基准测试：[Find() 与 Selector](http://jsperf.com/find-vs-directly-selecting)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T14:17:50.510

缓存您实际要处理的元素，在您的情况下是“li”元素。

```
var menu = $('.menu-vertical li');
menu.filter('.selected').children('ul.static').show().end().menuManipulation();
menu.filter('.static').has('ul').addClass("with-child"); 
```

由于对 li 元素的额外和冗余搜索，您的“优化”缓存版本实际上优化程度较低。

# php - 在 Wordpress 的循环之外显示用户的总评论数

> ID：12426167
> 
> 赞同：0
> 
> 时间：2012-09-14T14:04:16.760
> 
> 标签：php, wordpress, count, comments

如何在 The Loop 之外显示用户的总评论数？

**我使用此代码在循环内**显示评论计数：

```
 <?php
    global $wpdb;
    $user_id = $post->post_author;
    $where = 'WHERE comment_approved = 1 AND user_id = ' . $user_id ;
    $comment_count = $wpdb->get_var(
        "SELECT COUNT( * ) AS total
    FROM {$wpdb->comments}
    {$where}
");
    echo 'Comments: <strong>' . $comment_count . '</strong>';
    ?> 
```

这在循环内工作正常。为了使该代码在循环之外工作，我改为`$user_id = $post->post_author;`但`$user_id = get_the_author_meta( 'ID' );`它不起作用。

我最接近的是这段代码：

```
 <?php
                            global $wpdb;
                            $where = 'WHERE comment_approved = 1 AND user_id <> 0';
                            $comment_counts = (array) $wpdb->get_results("
                                SELECT user_id, COUNT( * ) AS total
                                FROM {$wpdb->comments}
                                {$where}
                                GROUP BY user_id
                                ", object);
                            foreach ( $comment_counts as $count ) {
                                $user = get_userdata($count->user_id);
                                echo 'Comments: ' . $count->total . '
                                ';
                            }
                            ?> 
```

但是，这与所有用户的评论计数相呼应，例如：“评论：28 评论：11 评论：55”等

我可以使用什么代码**在循环外显示用户的评论数**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T14:34:24.773

尝试使一些事情更加全球化并以不同的方式获取用户数据。

```
<?php

global $wpdb, $post, $current_user;
get_currentuserinfo();
$userId = $current_user->ID;

$where = 'WHERE comment_approved = 1 AND user_id = ' . $userId ;
$comment_count = $wpdb->get_var("SELECT COUNT( * ) AS total 
                                 FROM {$wpdb->comments}
                                 {$where}");
echo 'Comments: <strong>' . $comment_count . '</strong>';
?> 
```

或在functions.php中

```
<?
function commentCount() {
    global $wpdb, $current_user;
    get_currentuserinfo();
    $userId = $current_user->ID;

    $count = $wpdb->get_var('
             SELECT COUNT(comment_ID) 
             FROM ' . $wpdb->comments. ' 
             WHERE user_id = "' . $userId . '"');
    echo $count . ' comments';
}
?> 
```

调用它

```
 <?php commentCount(); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-23T15:27:50.107

我知道这个话题很老，但只想删除一个更合适的片段：

```
<?php
$args = array(
    'post_id' => 1, // use post_id, not post_ID
        'count' => true //return only the count
);
$comments = get_comments($args);
echo $comments

?> 
```

其中“post_id”可以是“user_id”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T23:21:42.447

试试这个

```
$post= get_post($id=5);
$comment_count = $post->comment_count; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-13T13:24:26.130

如果您正在观看他们的个人资料，您应该使用`WHERE comment_author_email = "' . get_comment_author_email() . '"`来获取每个用户的评论......@SMacFadyen 的代码将只给出登录用户的评论计数。

此外，第二个功能不起作用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-10-14T16:19:18.083

作为一个函数，传递 $user_id - 也使用 $wpdb->prepare() 方法来格式化查询：

```
function get_comment_count( $user_id = null ) {

    if ( is_null( $user_id ) ) { return 0; }

    global $wpdb;

    return $wpdb->get_var( $wpdb->prepare(
        "
            SELECT COUNT( * ) AS total 
            FROM {$wpdb->comments}
            WHERE comment_approved = 1 AND user_id = '%d'
        ",
        (int) $user_id
    ));

} 
```

# iphone - iPhone：NSDate 和 DST

> ID：12426181
> 
> 赞同：4
> 
> 时间：2012-09-14T14:05:00.050
> 
> 标签：iphone, ios, nsdate, dst

我`NSDate`用来衡量程序的执行。我`NSDate`在开始时创建实例，然后在结束时创建新实例 endDate 并调用：

```
[startDate timeIntervalSinceDate: endDate] 
```

这工作正常，但我很感兴趣如果程序在 DST 更改之前开始执行并在之后完成会发生什么。startDate 是否会被认为是将来，而 timeInterval 方法会返回负值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:34:42.647

我相信 NSDates 是绝对时间点，不受夏令时或时区的影响。例如，现在纽约市和北京的时间点完全相同，尽管由于时区不同，纽约可能是上午 10 点，北京可能是晚上 10 点。从 DST 切换到 ST 后的一分钟将比之前晚一分钟，即使您的时钟读数可能提前 59 分钟。所以我认为，如果您使用 [NSDate date] 生成日期，您将始终获得正确的时间间隔。

您可以通过将设备的日期设置为切换到（或关闭）DST 之前的日期并使用切换之前的开始日期和切换之后的结束日期记录间隔来测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:22:51.610

这不仅仅是与 iPhone 有关的问题。我得到了一个关于服务器和客户端时间的链接。此问题的唯一解决方法是为 Maximo 应用程序服务器和不使用夏令时的 GUI 客户端选择一个时区。

[参考](http://www-01.ibm.com/support/docview.wss?rs=0&context=SSKTXT&q1=patterns&uid=swg21385323&loc=en_US&cs=utf-8&lang=all&wv=1)

希望这可以消除您的疑问

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:49:04.720

达伦所暗示的似乎是真的。NSDate 是对从绝对参考日期 2001 年 1 月 1 日 00:00 GMT 开始的间隔的引用。所以类方法`[NSDate date]`将返回该间隔的表示。因此，日期不会被认为是将来。

# mysql - 如何在 MySQL 5.0.45 中记录慢速查询

> ID：12426182
> 
> 赞同：3
> 
> 时间：2012-09-14T14:05:02.313
> 
> 标签：mysql, logging

我正在尝试在 MySQL v5.0.45（编译操作系统：redhat-linus-gnu）上打开慢查询的日志记录，但我似乎无法让它工作。我尝试添加...

```
long_query_time = 1 
```

到我的 /etc/my.cnf 文件作为 [mysqld] 部分下的最后一个选项，然后我使用命令重新启动...

```
sudo /sbin/service mysqld restart --log-slow-queries=/var/log/slowqueries.log 
```

然后我运行了我知道 SELECT 查询大约需要 6-8 秒的程序，但我在任何地方都找不到日志。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-24T20:49:27.220

对于 MySQL 5.0，您要在 my.cnf 中使用的变量是：

```
log-slow-queries = /var/log/mylogname.log 
```

您将需要手动创建此文件并将所有权和组设置为 mysql。您可以在命令行上执行此操作：

```
touch /var/log/mylogname.log
chown mysql /var/log/mylogname.log
chgrp mysql /var/log/mylogname.log 
```

您还可以设置您认为“长”的时间长度：

```
long_query_time = 2 
```

您可以使用以下方法添加在没有索引的情况下执行的查询：

```
log-queries-not-using-indexes 
```

但是，这可能会很快填满您的日志。

我发现有些变量使用下划线而有些使用连字符很奇怪，并且它可能会有所不同，具体取决于您通过 my.cnf 或命令行设置变量的方式。这是您可以在 MySQL 5.0 中设置的所有系统变量的列表：http: [//dev.mysql.com/doc/refman/5.0/en/server-options.html](http://dev.mysql.com/doc/refman/5.0/en/server-options.html)

其他奇怪的是：这个文档说 log-slow-queries 是一个布尔值，当我检查我的全局变量（在 mysql 中，输入'show global variables;'）时，它将这个值显示为'ON'，不是我设置的文件路径。无论如何，这对我有用，它写了文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:19:25.480

在您的 /etc/my.cnf 添加`log_slow_queries = /var/log/mysql/slowqueries.log`然后像往常一样重新启动 mysql，例如`sudo service mysqld restart`并试一试。

# node.js - 在请求中需要文件

> ID：12426183
> 
> 赞同：1
> 
> 时间：2012-09-14T14:05:08.547
> 
> 标签：node.js, require, multilingual

我正在玩 Node.js，我想知道我正在做的事情是否可以被认为是最佳实践，我还有很多东西要学。

我正在尝试通过创建更多 JSON 文件来实现多语言布局，然后根据 http 标头（语言）加载这些文件。我正在做的是这样的：

```
exports.index = function(req, res){
try {
    var words = require('../languages/' + req.headers["accept-language"].substr(0, 2).toLowerCase());
} catch(err) {
    console.log("no language found - falling back to english");
    var words = require('../languages/en');
}

res.render('index', { language: words });
}; 
```

现在，我很确定那里有问题。因为我认为要求应该只做一次，而且我在每个请求中都要求它。但是，我想不出任何其他方式，因为我需要访问请求标头中的语言。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:08:17.650

对于国际化，我强烈推荐 i18n。

[i18n节点](https://github.com/mashpie/i18n-node)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T15:30:32.847

您需要两个不同的文件。所以我不确定你为什么认为你在重复自己。

最终，您应该将语言文件转换为位于本地 node_modules 文件夹或您的应用程序使用的同一 node_modules 中的实际模块。

这样你就可以像这样要求你的语言模块。

```
var language = require('language'); 
```

在你的语言模块里面应该有一个索引文件和 lib 目录。

**index.js**

```
exports.en= require('./lib/en'),
exports.fr= require('./lib/fr'),
exports.de= require('./lib/de'), 
```

然后你就可以像这样使用你的模块了。

```
exports.index = function(req, res){

  language = require('language');

try {

    var words = language[req.headers["accept-language"].substr(0, 2).toLowerCase()]();
} catch(err) {
    console.log("no language found - falling back to english");
    var words = language.en();
}

res.render('index', { language: words });
}; 
```

用这个替换上面的。

```
exports.index = function(req, res){

    var language = require('language');
        supported_languages = ['en', 'fr' , 'de'],
        accept_language = req.headers["accept-language"].substr(0, 2).toLowerCase();

    if(supported_languages.indexOf(accept_language) !== -1){

        var words = language[accept_language]();

    }else {
        console.log("no language found - falling back to english");
        var words = language.en();
    }

    res.render('index', { language: words });    
}; 
```

# webview - 销毁/处置 WebView

> ID：12426188
> 
> 赞同：2
> 
> 时间：2012-09-14T14:05:30.563
> 
> 标签：webview, javafx-2, dispose, destroy

有没有办法销毁 WebView 实例？如果页面加载，并说视频开始播放，我希望能够在隐藏 WebView 时基本上销毁它，或者至少重置它。我知道我可以听 visibleProperty 并执行 getEngine().load() 但我想知道是否有更好的方法。此外，仅当实际执行 webView.setVisible(false) 时，visibleProperty 才会更改，对吗？例如，它不会跟踪 webview 的父节点是否不可见。感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T13:46:44.807

如果这对某人有帮助，

webView.getEngine().load(null);

似乎在做伎俩，这就是我现在正在使用的。

# unicode - CJK 腐败，sqlite3

> ID：12426190
> 
> 赞同：0
> 
> 时间：2012-09-14T14:05:40.003
> 
> 标签：unicode, sqlite, cjk, utf

这两种方法用于加密/解密数据库内容：

```
public String encrypt(String str) {
    try {
        // Encode the string into bytes using utf-8
        byte[] utf8 = str.getBytes("UTF8");

        // Encrypt
        byte[] enc = ecipher.doFinal(utf8);

        // Encode bytes to base64 to get a string
        return Base64.encodeToString(enc, Base64.NO_WRAP);

    } catch (javax.crypto.BadPaddingException e) {
    } catch (IllegalBlockSizeException e) {
    } catch (UnsupportedEncodingException e) {
    }
    return null;
}

public String decrypt(String str) {
    try {
        // Decode base64 to get bytes
        byte[] dec = Base64.decode(str, Base64.NO_WRAP);

        // Decrypt
        byte[] utf8 = dcipher.doFinal(dec);

        // Decode using utf-8
        return new String(utf8, "UTF8");
    } catch (javax.crypto.BadPaddingException e) {
    } catch (IllegalBlockSizeException e) {
    } catch (UnsupportedEncodingException e) {
    }
    return null;
} 
```

我已手动检查加密/解密的原始字节数组是否相同，但不知何故，CJK 字符串设法损坏。例如，韩语“유료컨텐츠는 63”会被乱码为![在此处输入图像描述](../Images/4fdb62e897a9ce68bbce878971215d7e.png). 我只能想到原文中的空格字符会搞砸一切……但这听起来很愚蠢。在机器人 Android 设备和 SQlite 浏览器 UI 上观察到相同的乱码。我整天都在摆弄 UTF 8 / 16，不认为它与手头的问题有关。乱码的结果在我看来仍然是韩国人......请提供任何提示？

编辑：这就是 utf8 字节数组在两种方法中的样子：

```
[0] -61 [195] [0xc3]    
[1] -126 [130] [0x82]   
[2] -27 [229] [0xe5]    
[3] -116 [140] [0x8c]   
[4] -125 [131] [0x83]   
[5] -24 [232] [0xe8]    
[6] -127 [129] [0x81]   
[7] -124 [132] [0x84]   
[8] -29 [227] [0xe3]    
[9] -66 [190] [0xbe]    
[10]    -103 [153] [0x99]   
[11]    -26 [230] [0xe6]    
[12]    -108 [148] [0x94]   
[13]    -96 [160] [0xa0]    
[14]    54 [0x36]   
[15]    51 [0x33] 
```

# c# - 如何判断控件是否来自 MasterPage

> ID：12426191
> 
> 赞同：0
> 
> 时间：2012-09-14T14:05:38.750
> 
> 标签：c#, webforms

当遍历页面上所有控件的集合（来自`Page.Controls`这些控件的子控件及其子控件等）时，如何判断控件是否来自页面的母版页？

以下似乎有效，但感觉有点脏。有没有更好的方法来获取这些信息？

更新：抱歉，之前错过了一些代码。

```
List<Control> allControls = GetAllControls(this.Page)
foreach (Control c in allControls)
{
       bool isFromMaster = c.NamingContainer.TemplateControl.GetType().BaseType.BaseType == typeof(MasterPage);
} 
```

递归`GetAllControls`获取页面上所有控件的位置

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:08:58.080

给定对 a 的引用`Control`，您可以递归地查看该`Parent`属性：

```
bool IsFromMasterPage(Control control)
{
    while(control.Parent != null)
    {
        if (control.Parent is MasterPage) return true;
        control = control.Parent;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:11:47.423

当前`Page.Controls` **页面中唯一包含的控件**

如果要检查 MasterPage 控件，请使用：

```
this.Master.Controls 
```

另一方面，如果您想在页面上找到 MasterPage 控件：

```
IEnumerable<MasterPage> masterPageControls = this.Page.Controls.OfType<MasterPage>(); 
```

尽管您只能将一个 MasterPage 关联到您的页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:00:34.380

解决方案原来是通过母版页中的控件，不包括内容占位符的子项（因为这些为您提供了从页面本身添加的控件）。

```
public static bool IsFromMasterPage(Control control)
{
    if (control.Page.Master != null)
    {
        // Get all controls on the master page, excluding those from ContentPlaceHolders
        List<Control> masterPageControls = FindControlsExcludingPlaceHolderChildren(control.Page.Master);
        bool match = masterPageControls.Contains(control);
        return match;
    }
    return false;
}    

public static List<Control> FindControlsExcludingPlaceHolderChildren(Control parent)
{
    List<Control> controls = new List<Control>();
    foreach (Control control in parent.Controls)
    {
        controls.Add(control);
        if (control.HasControls() && control.GetType() != typeof(ContentPlaceHolder))
        {
            controls.AddRange(FindControlsExcludingPlaceHolderChildren(control));
        }
    }
    return controls;
} 
```

# jquery - 如果当前单击的项目已经来自 jQuery .each 循环，如何排除它？

> ID：12426192
> 
> 赞同：1
> 
> 时间：2012-09-14T14:05:40.700
> 
> 标签：jquery

我正在使用 jQuery 以某种方式捕获所有具有“当前”类的链接。

这是我的代码：

```
$('#filter-by li ul a').live('click',function(e){

    var terms_ids = '';
    var taxonomies = '';
    $('#filter-by li ul a.current').each( function() {
        terms_ids = terms_ids + $(this).parent().attr('class').replace(/[^0-9]/g, '') + ',';
        taxonomies = taxonomies + $(this).closest('.tax-parent-li').find('ul li:first a').attr('rel').replace(/default_/, '') + ',';
    });

}); 
```

单击链接时，我希望它计算/捕获所有具有当前类的元素，为此我使用了每个循环。但是我想排除并且不知道该怎么做，如果当前点击的链接已经有 * ***.current****类，***我不希望它考虑当前点击的链接。*****

 **当前课程有多个链接，如果以前已经有当前课程，我想避免单击该链接。

我很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:16:36.433

如果没有更多标记和信息，我无法准确说出需要什么，但您可能会发现它[`.not()`](http://api.jquery.com/not/)很有用。

> 给定一个表示一组 DOM 元素的 jQuery 对象，.not() 方法从匹配元素的子集构造一个新的 jQuery 对象。提供的选择器针对每个元素进行测试；与选择器不匹配的元素将包含在结果中。

例如，

```
$('sel').not(this).each(...) 
```

将对`.each`匹配选择器的每个元素调用回调，*除了*当前元素（即`this`）。**

# asp.net-mvc - 测试授权控制器

> ID：12426196
> 
> 赞同：0
> 
> 时间：2012-09-14T14:05:46.097
> 
> 标签：asp.net-mvc, test-first

我在 TDD Book for Test Authorize Controller 中看到了实践，但我不明白这意味着什么是代码

```
Assert.IsTrue(typeof (TodoController)
                  .GetCustomAttributes(true).ToList()
                  .Any(o=>o.GetType()==typeof(AuthorizeAttribute))
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:08:37.637

他们正在检查是否已将`[Authorize]`属性添加到`TodoController`. 请注意，他们实际上并没有测试授权机制是否*有效*，只是`AuthorizeAttribute`装饰存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:08:59.397

它检查是否`TodoController`有一个`AuthorizeAttribute`，即装饰有`[Authorize]`

```
[Authorize] // <-- if this is present the test will pass, if not it will fail.
public class TodoController {
    // ...
} 
```

# jquery - jQuery从N中定位一定数量的元素

> ID：12426200
> 
> 赞同：2
> 
> 时间：2012-09-14T14:06:11.723
> 
> 标签：jquery, jquery-ui, jquery-mobile, jquery-selectors

使用 jQuery，我试图从元素集合中选择一定数量的元素。我只想选择和修改我定义的元素数量。所以在我下面的代码中，我有一堆隐藏类的 li。我只想从前 5 个元素中删除隐藏类。我将在下面发布我的代码，它应该是有意义的。截至目前，我正在使用循环来完成前 5 个。如果有改进的余地，请告诉我。谢谢！

```
('a.moreLink').live('click', function() {
    var $ul = $(this).parent().prev();
    var $li = $ul.children('li.hidden').first();
    for(i=0;i<5;i++) {
        $li.removeClass('hidden');
        $li = $li.next('li');
    }
    if($ul.children("li.hidden").size() == 0) {
        $(this).text('Go to the full site to see more').attr('href', '#');
    }
});

<ul id="EventsList">
    <li></li>
    ....(4 more non hidden)
    <li class='hidden></li>
    ....(N more hidden)
</ul>
<div>
    <a href='#' id='MoreEvents' class='moreLink'>More Events</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:32:33.350

```
$(document).on('click', 'a.moreLink', function() {
    var $ul = $(this).parent().prev();
        $ul.children('li.hidden').slice(0,5).removeClass('hidden');

    if ($ul.children("li.hidden").length) {
        $(this).text('Go to the full site to see more').attr('href', '#');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:10:06.520

What about something like...

```
var count = 0;
$('li.hidden').each(function(){
    $(this).removeClass('hidden');
    count++;
    if(count >= 5)
        return false; //this breaks out of the .each()
}); 
```

# java - 如何为 Ubuntu 安装 Jpcap

> ID：12426203
> 
> 赞同：2
> 
> 时间：2012-09-14T14:06:34.240
> 
> 标签：java, installation, jpcap

这似乎是一个非常愚蠢的问题，但我在安装 jpcap 时遇到了很多麻烦。
我是 Ubuntu 的新手，不知道它的架构，如果你能用描述一步一步地告诉我这个过程会非常有帮助。
目前我有文件 jpcap-0.7.ta​​r.gz、bison-2.4.1.tar.bz2、m4-1.4.13.tar.gz、flex-2.5.35.tar.gz、libpcap-1.3.0 .tar.gz。我在某处读到这些文件是安装 jpcap 所必需的......
在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:41:06.847

从 DEB 安装将是您最好的选择。

对于 32 位版本： http: [//netresearch.ics.uci.edu/kfujii/Jpcap/jpcap-0.7.deb](http://netresearch.ics.uci.edu/kfujii/Jpcap/jpcap-0.7.deb)

对于 64 位版本： http: [//ptcoding.googlecode.com/files/jpcap0.7_amd64.deb](http://ptcoding.googlecode.com/files/jpcap0.7_amd64.deb)

然后，如果您使用的是 Eclipse IDE，请将 jar 放入 /proj/lib 文件夹并将其添加到构建路径中。

# javascript - 是什么导致“未捕获 RangeError：超出最大调用堆栈大小”错误？（Chrome，在其他浏览器中其他消息）

> ID：12426208
> 
> 赞同：13
> 
> 时间：2012-09-14T14:07:05.093
> 
> 标签：javascript, jquery, loops, google-maps-api-3, history.js

找不到导致该错误的原因，以及如何找到解决方案...

[在项目](http://atlas.sitegist.net/business/atlas/?l=en&h=6dff16b6f593384662cb24d66142047a)下工作：

[http://atlas.sitegist.net/business/atlas/?l=en&h=6dff16b6f593384662cb24d66142047a](http://atlas.sitegist.net/business/atlas/?l=en&h=6dff16b6f593384662cb24d66142047a)

在项目中，我用整数值显示不同的数据，所有这些数据也显示在地图上。当我添加新数据集的另一个可视化时，会发生错误。

## 测试信息：

大多数情况下，我必须在 UI 中做一些事件，当然还要做一些下面列出的混合：

*   必须单击“项目”按钮，然后在我的项目的工具栏部分选中/取消选中复选框
*   必须单击左侧边栏面板上的事件（无需展开折叠，对于给定的数据集，对象的选择是通过选择父项进行的）

有时错误会在 5 分钟内发生。有时在第一个镜头中，但通常在 3-4 UI 请求中。

> 上面的链接从开始或通过 2-3 个事件触发器重现错误。

## 错误：从控制台复制粘贴

我在 Chrome 控制台中遇到了这样的错误：

```
Uncaught RangeError: Maximum call stack size exceeded
H.get
(anonymous function)
Mu.(anonymous function).zoomRange_changed
yf
H.set
(anonymous function)
Mu.(anonymous function).zoomRange_changed
yf
H.set
(anonymous function)
Mu.(anonymous function).zoomRange_changed
yf
...
H.set
(anonymous function)
Mu.(anonymous function).zoomRange_changed
yf 
```

还有一个：

```
<error>
(anonymous function)
$
nm
Du
H.bf
H.mapType_changed
yf
H.set
H.aa
Tg.(anonymous function).J
(anonymous function)
Q.trigger
H.aa
Tg.(anonymous function).J
(anonymous function)
Q.trigger
H.aa
Tg.(anonymous function).J
(anonymous function)
Q.trigger
H.aa
...
H.aa
Tg.(anonymous function).J
(anonymous function)
Q.trigger 
```

解决方案下的解决方案对我没有帮助，因为缺乏有关 I.set 的信息，而且我不使用“Gmaps4rails”：

[Gmaps4rails 超出最大调用堆栈大小？](https://stackoverflow.com/questions/8301097/gmaps4rails-maximum-call-stack-size-exceeded?answertab=active#tab-top)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T07:38:48.053

# 解决了！！！

我在*边界*变量中发现了一个问题。

当我从服务器接收 JSON 时，在解析它时，代码会从地图上的每个位置绑定。

```
// renew map bounds each time when new query comes
bounds = new google.maps.LatLngBounds ();
...
for (var key in data.locations ) {
    ...
    // For fitting in Bounds, we push the positions of each location
    atlas.Map.vars.bounds.extend ( new google.maps.LatLng(
        data.locations [key].lat,
        data.locations [key].lng
    ) );    
    ...
}
...
GoogleMap.fitBounds (bounds); 
```

不知何故，对于新的数据类型，它会使浏览器堆栈溢出。

（很奇怪，因为它可以正常工作以获得更大的结果！（600< 地图上的元素））。

为快速结果制作了一个粗略的代码：

```
bounds = new google.maps.LatLngBounds ();
if( KMLLayer.poly.docs[0].bounds != undefined ) {
    bounds.extend( KMLLayer.poly.docs[0].bounds.getNorthEast() );
    bounds.extend( KMLLayer.poly.docs[0].bounds.getSouthWest() );
}
if( KMLLayer.marks.docs[0].bounds != undefined ) {
    bounds.extend( KMLLayer.marks.docs[0].bounds.getNorthEast() );
    bounds.extend( KMLLayer.marks.docs[0].bounds.getSouthWest() );
}
GoogleMap.fitBounds (bounds); 
```

我有两个 KML 层，所以我从 GeoXML3 层检索了边界（如果有的话）。

该死的，我花了6小时38分钟！！！

也许我对这一行有误，严重清除了全局变量：

```
bounds = new google.maps.LatLngBounds (); 
```

> 变量的原始名称有点长:) **bounds === atlas.Map.vars.bounds;**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-26T13:10:54.693

我收到了同样的错误。但是在我的情况下，问题与经纬度数据有关。少了一个点导致了这个问题。

相关：[https ://groups.google.com/forum/?fromgroups=#!topic/google-maps-js-api-v3/1SCjxGntruU](https://groups.google.com/forum/?fromgroups=#!topic/google-maps-js-api-v3/1SCjxGntruU)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-13T01:30:55.303

当您忘记为地图设置***所有*** *最小*选项时，通常会发生此错误（在 Google Chrome 中）。这些是：

```
var map = new google.maps.Map(
    document.getElementById( 'some-id' ),
    {
        center :    new google.maps.LatLng( 43, 16 ),
        zoom :      10,
        mapTypeId : google.maps.MapTypeId.ROADMAP
    }
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:04:26.847

您的多边形路径是否包含任何空的 LatLng？

发生这种情况时我收到了同样的错误 - 愚蠢的错误，但可能会帮助处于类似情况的人。

# java - 未在 Web 服务响应中获取“null”值的元素

> ID：12426212
> 
> 赞同：0
> 
> 时间：2012-09-14T14:07:11.243
> 
> 标签：java, soap, cxf

我将 apache-cxf 用于 web 服务，生成的响应不包含值为 null 的元素（比如 java.lang.String 类型）。以下是xsd：

```
<xs:complexType name="venueDetails">
    <xs:sequence>
        <xs:element minOccurs="0" name="contactDetails" type="xs:string"/>
        <xs:element minOccurs="0" name="date" type="xs:string"/>
        <xs:element minOccurs="0" maxOccurs="1" name="description1" type="xs:string" nillable = "true"/>
        <xs:element minOccurs="0" maxOccurs="1" name="description2" type="xs:string" nillable = "true"/>
        <xs:element minOccurs="0" name="name" type="xs:string"/>
        <xs:element minOccurs="0" name="placePicture" type="xs:string"/>
        <xs:element minOccurs="0" name="time" type="xs:string"/>
    </xs:sequence>
</xs:complexType> 
```

我期待元素“description1”和“description2”作为`SOAP`响应，即使它们包含空值。但是`SOAP`响应不包含这些标签，我为它们设置了 null。请让我知道我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:18:04.750

而不是使用：

```
 <xs:element minOccurs="0" maxOccurs="1" name="description1" type="xs:string" nillable = "true"/>
    <xs:element minOccurs="0" maxOccurs="1" name="description2" type="xs:string" nillable = "true"/> 
```

尝试使用这个：

```
 <xs:element minOccurs="0" maxOccurs="1" name="description1" type="xs:string"/>
    <xs:element minOccurs="0" maxOccurs="1" name="description2" type="xs:string"/> 
```

> 可以为 nillable 的元素，这意味着该元素可以为空而不会导致验证错误

看看[这里](http://java.boot.by/wsd-guide/ch02.html)。您已经在定义`minOccurs="0"`所以不需要`nillable="true"`.

# maven - Maven：我可以在 WEB-INF 和其他目录中复制资源吗？

> ID：12426214
> 
> 赞同：1
> 
> 时间：2012-09-14T14:07:18.597
> 
> 标签：maven

我希望将一些资源复制到 2 个不同的目录中。我如何在 pom 中指定这个？

```
<plugin>
  <artifactId>maven-resources-plugin</artifactId>
  <version>2.6</version>
  <executions>
    <execution>
      <id>copy-resources</id>
      <!-- here the phase you need -->
      <phase>validate</phase>
      <goals>
        <goal>copy-resources</goal>
      </goals>
      <configuration>
        <outputDirectory>
          ${project.build.directory}/${project.build.finalName}/lib
        </outputDirectory>
        <resources>          
          <resource>
            <directory>${SOME_LIB}</directory>
          </resource>
        </resources>              
      </configuration>                      
    </execution>
  </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:27:11.490

我会改用块`<resources/>`内的标签`<build/>`。

```
<build>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <targetPath>${project.build.directory}/txt</targetPath>
            <includes>
                <include>*.txt</include>
            </includes>
        </resource>
        <resource>
            <directory>src/main/resources</directory>
            <targetPath>${project.build.directory}/png</targetPath>
            <includes>
                <include>*.png</include>
            </includes>
        </resource>
        <resource>
            <directory>${SOME_LIB}</directory>
            <targetPath>${project.build.directory}/lib</targetPath>
            <includes>
                <include>*.dll</include>
            </includes>
        </resource>
    </resources>
</build> 
```

这样，您可以将不同的文件排序到不同的目标路径。

* * *

对于您的确切问题，这将起作用：

```
<build>
    <resources>
        <resource>
            <directory>${SOME_LIB}</directory>
            <targetPath>${project.build.directory}/${project.build.finalName}/lib</targetPath>
        </resource>
        <resource>
            <directory>${SOME_LIB}</directory>
            <targetPath>${project.build.directory}/${project.build.finalName}/WEB-INF</targetPath>
    </resources>
</build> 
```

资源将根据需要复制到两个目标目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:22:08.557

outputDirectories 是 java.io.File 类型，因此基于插件，您必须配置 2 个执行。

可惜它不是为处理而设计的

```
<outputDirectories>
    <outputDirectory>1</outputDirectory>
    <outputDirectory>2</outputDirectory>
</outputDirectories> 
```

# c++ - Getter 函数的常量正确性

> ID：12426215
> 
> 赞同：5
> 
> 时间：2012-09-14T14:07:19.760
> 
> 标签：c++

这是一个关于 const 正确性的简单问题。

我有这堂课：

```
template <class T>
class Foo
{
public:
    std::map<std::string, boost::any> members; 

    template <typename T>
    std::vector<T>& member(const std::string& memberName) 
    {
        return boost::any_cast<std::vector<T>&>(members[memberName]);
    }
}; 
```

然后我有一个函子，其中包括以下内容：

```
bool operator()(Foo& foo) const
{
    std::vector<T> & member = foo.member<T>(_memberName); 
```

这里让我感到困惑的是，我不能通过引用 const 来传递 Foo，因为我正在调用非 const 成员 getter 函数。关于它的签名，这给人的印象是 operator() 改变了 foo。

我应该纠正这个吗？如果是这样，如何纠正？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T14:09:50.770

The usual way is to add a `const` overload for the member function:

```
template <typename T>
std::vector<T> const & member(const std::string& memberName) const
{              ^^^^^                                         ^^^^^
    return boost::any_cast<std::vector<T> const &>(members.at(memberName));
}                                         ^^^^^            ^^ 
```

Calling the member on a `const Foo` will choose this overload; calling it on a non-`const` will choose the original one.

Note that `at()` is a fairly new addition to `std::map`. If you're stuck with an outdated library, you'll need something like:

```
std::map<std::string, boost::any>::const_iterator found = members.find(memberName);
if (found == members.end()) {
    throw std::runtime_error("Couldn't find " + memberName);
}
return boost::any_cast<std::vector<T> const &>(found->second); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T14:11:02.563

const 正确性适用于您执行其方法的对象。所以：

```
bool operator()(Foo& foo) const 
```

意味着这`operator()`不会改变仿函数类中的任何内容，例如`_memberName`（它似乎是仿函数类的成员）。

它的定义方式允许更改 Foo （调用非常量方法）。

**编辑**：请参阅[Mike Seymour](https://stackoverflow.com/users/204847/mike-seymour)的回答，因为它描述了一种解决方法。我个人做了很多，但似乎没有完全得到你的问题。:)

# jquery - 使用jquery删除具有一定宽度的div

> ID：12426218
> 
> 赞同：2
> 
> 时间：2012-09-14T14:07:43.410
> 
> 标签：jquery, css, media, media-queries

我正在尝试为移动设备制作一个完全不同的网页版本，为此，**当浏览器窗口宽度大于 767px 时，我需要某些 div 消失**。我试图用 jQuery 来做这样的事情：

```
<script>
if ( $('body').width > 767px ) {
    $('.mobile').remove();
}
</script> 
```

但它根本不起作用。

我想在更大版本中消失的 div 有 class `.mobile`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T14:13:02.227

你不一定需要 JS。你看过[媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)吗？

```
@media only screen and (min-width: 767px) {
    .mobile { display: none }    
} 
```

如果您仍想使用 jQuery：

```
if ( $('body').width > 767 ) {
    $('.mobile').css('display', 'none');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:09:49.510

请尝试使用媒体查询。看看[http://cssmediaqueries.com/](http://cssmediaqueries.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T14:11:40.627

`.width()`将返回一个像素值，因此您需要检查 767

您可以使用媒体查询，但应考虑浏览器支持：http: [//caniuse.com/css-mediaqueries](http://caniuse.com/css-mediaqueries)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T14:14:02.283

```
@media screen and (min-device-width: 767px) {
  .mobile {display:none;}
} 
```

或者

```
$('.mobile').toggle(parseInt($('body').width())>767); 
```

# javascript - 如何从复选框列表中获取复选框选中值并在选中复选框时调用 Ajax 函数？

> ID：12426221
> 
> 赞同：0
> 
> 时间：2012-09-14T14:07:52.457
> 
> 标签：javascript

大家好，在我看来，我有以下复选框列表：

```
 <div class="ProdcutColors" style=" font:11px Lucida Sans Unicode, Lucida Grande, sans-serif; overflow:auto; height:135px; width:135px; margin:-240px 0 0 528px; border:1px solid #ccc">
<br />
<input type="checkbox" name="Black" value="Black" class="ProdcutColors" />
<label>Black</label>
<br />
<input type="checkbox" name="Red" value="Red" class="ProdcutColors" />
<label>Red</label>
<br />
<input type="checkbox" name="Pink" value="Pink" class="ProdcutColors"/>
<label>Pink</label>
<br />
<input type="checkbox" name="Blue" value="Blue" class="ProdcutColors"/>
<label>Blue</label>
<br />
<input type="checkbox" name="Brown" value="Brown" class="ProdcutColors"/>
<label>Brown</label>
<br />
<input type="checkbox" name="Khaki" value="Khaki" class="ProdcutColors"/>
<label>Khaki</label>
<br />
<input type="checkbox" name="White" value="White" class="ProdcutColors"/>
<label>White</label>
<br />
<input type="checkbox" name="Silver" value="Sivler" class="ProdcutColors"/> 
<label>Silver</label>
<br />  
</div> 
```

现在我想要的是，如果用户检查我想要调用传递所选复选框值的 ajax 函数的任何颜色。谁能告诉我如何使用 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:19:41.613

您可以使用 jQuery 尝试类似的操作，

演示：http: [//jsfiddle.net/ZRHZT/1/](http://jsfiddle.net/ZRHZT/1/)

您可以使用`$('.ProdcutColors').serialize()`来获取检查值并通过 ajax 发送这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:12:41.660

JQuery 可以[使用 Jquery 进行作业检查和取消选中复选框](http://www.electrictoolbox.com/check-uncheck-checkbox-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T14:17:58.340

尝试这样的事情：

```
window.onload = function () {
    var container = document.getElementById("ProductColors");
    var checks = container.getElementsByTagName("input");
    var check;

    for (var i = 0; i < checks.length; i++) {
        check = checks[i];
        check.onclick = function () {
            if (this.checked) {
                // Run AJAX function, and use this.value for checkbox value
            }
        };
    }
}; 
```

这显然是一个仅限 Javascript 的解决方案，并假设您的主 div 的 id 为“ProductColors”-我在您的代码中看到您只设置了类-它更容易识别它，特别是在这种情况下，如果你给它一个身份证。

但它所做的是找到`<input>`div 中的所有元素（并且假设唯一的`<input>`元素是有问题的复选框 - 你必须做更多检查复选框旁边是否有其他输入类型，比如隐藏的输入），并且将点击处理程序绑定到它们中的每一个。当一个复选框被点击时（因为它是一个比 onchange 更一致的事件），处理程序检查复选框状态是否被选中，如果是，则运行你的代码......否则什么也不会发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T14:40:36.500

您可以将单击处理程序附加到每个复选框。这是一个非常简单的例子：

```
<!DOCTYPE html>
     <html>
        <head>
           <title>onclickTest</title>
           <script type="text/javascript">
             function RunAJAX(color)
             {
               //Do something...
               alert(color); //proof this works....
             }
           </script>
        </head>
        <body>
          <div>
            <input name="Black" value="Black" onclick="RunAJAX('black')" type="checkbox" /> 
            <label>Black</label>
          </div>
        </body>
      </html> 
```

[请参阅 JSFiddler 上的代码](http://jsfiddle.net/tkLwq/10/)

# sql-server - MS SQL 2005：奇怪的维护计划子计划行为：每个 SP 在奇数时间运行所有其他 SP 的所有任务

> ID：12426231
> 
> 赞同：2
> 
> 时间：2012-09-14T14:08:32.920
> 
> 标签：sql-server, sql-server-2005, scheduling, maintenance-plan

(SQL Server 2005) 我在安排包含 3 个子计划 (SP) 的维护计划 (MP) 时遇到问题。

*   SP1 计划每小时运行一次，
*   SP2 每天 7.00 和
*   SP3 周日 8:00

阅读 MP 历史我看到发生的事情（我知道这看起来很疯狂）是：

```
11: SP1 runs and executes all the tasks of SP1 SP2 and SP3
12: SP2 runs and does the same
13: SP3 runs and does the same
14: SP1 runs and does the same 
```

从作业活动监视器中，SP1 的最后运行时间为 14，SP2 和 SP3*从未*执行过。
所有 SP 都在作业活动监视器中正确安排（SP2 为明天 7 点，SP3 为下周日 8 点）

你知道发生了什么吗？

非常感谢

文图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:40:50.263

唯一的解释是 sp1 和 sp2 每天在 7 点碰撞，而 sp1 和 sp3 在周日碰撞，假设 sp1 在凌晨 1、2、3 等运行。

建议您将 sp1 更改为收支平衡时间，例如 1.30、2.30

请分享你的结果

# html - 单击时的活动状态不起作用（列表）

> ID：12426233
> 
> 赞同：1
> 
> 时间：2012-09-14T14:08:39.497
> 
> 标签：html, css

我对 CSS 中的“活动”状态有一点问题。我有一个`<ul>`其中有 4 个列表的列表，`background-color`如果单击它们，我想给这些链接一个不同的（并保持这种状态！）。问题是这行不通...

这是我的 HTML：

```
<nav id="quick-index-nav">
<ul id="quick-index-list" class="pills slim muted">
<li class="active">
<a id="qindex-popular" title="..." target="right" href="right.php">everything</a>
</li>
<li>
<a id="qindex-today" title="..." target="right" href="right.php?t=tod">today</a>
</li>
<li class="yesterday">
<a id="qindex-yesterday" title="..." target="right" href="right.php?t=yes">tomorrow</a>
</li>
<li>
<a id="qindex-day" title="...." target="right" href="right.php?t=mix">never</a>
</li>
</ul>
</nav> 
```

这是我的 CSS 文件：

```
#quick-index-nav{margin-bottom:10px; margin-left: -50px;}
#quick-index-list{margin-bottom:0;*zoom:1;border:0px ridge #d9d9d9}
#quick-index-list:before,#quick-index-list:after{display:table;content:""}
#quick-index-list:after{clear:both}
#quick-index-list li{display:inline-block;float:left;width:25%;margin:0;border:0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;border-right:0px ridge #d9d9d9}
#quick-index-list li:nth-child(4n){border-right:0px}
#quick-index-list li:nth-child(n+5){border-top:0px ridge #d9d9d9}
#quick-index-list li>a{padding:0;display:block;font-size:1.0em;text-align:center; font-family: Calibri;}

.pills>li{display:inline-block;margin-bottom:5px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;border:1px solid #d9d9d9}
.pills>li>a{padding:6px 10px;cursor:pointer;display:inline-block}
.pills>li>a:hover{text-decoration:none}
.pills>li:hover{background-color:#d9d9d9;text-decoration:none}
.pills>li.active{background-color:#456695;border-color:#456695}
.pills>li.active>a{color:#fff}
.pills.slim>li>a{padding:3px 5px;font-size:.9em}
.pills.muted>li>a{color:gray}
.pills.muted>li.active>a{color:#fff};
.muted {
    color: gray;
} 
```

它有什么问题？

PS：这是一个演示[http://jsfiddle.net/1BJK903/fxTQL/5/](http://jsfiddle.net/1BJK903/fxTQL/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:15:25.350

据我了解，您想使用主动伪类，而不是应该使用`pills>li:active>a`. 另外，我知道它仅适用于链接（从未使用过它，这可能是错误的），因此您可能需要像这样更改您的类：`pills>li>a:active`

**更新**

经过一些测试，这`pills>li:active>a`在 FF、Chrome 和 IE8+ 中有效，在 IE7 中无效

要执行您需要的操作，您可以使用此代码在您的页面上启用 jquery。第二个脚本标签包含将更改类的代码。

```
<script type="text/javascript" scr="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript">
   $(function(){
   $(".pills li").click(function(){
       $(".pills li").removeClass("active");
       $(this).addClass("active"); 
    })​
})
</script> 
```

# file-upload - Ajaxplorer大文件下载/上传错误

> ID：12426234
> 
> 赞同：0
> 
> 时间：2012-09-14T14:08:39.363
> 
> 标签：file-upload, download, pydio

我正在使用 ajaxplorer4.0.4、php5.2 apache2 服务器我的 php.ini 设置是：

```
safe_mode = Off
max_execution_time = 0 ; Maximum execution time of each script, in seconds(0 for unlimited)
max_input_time = -1 ; Maximum amount of time each script may spend parsing request data(-1 for unlimited)
memory_limit = 1073741824 ; Maximum amount of memory a script may consume
post_max_size = 1024M   ; Maximum size of POST data that PHP will accept.
upload_max_filesize = 1024M ; Maximum allowed size for uploaded files. 
```

我什至在 class.fsAccessWrapper.php 中评论了以下行，以便下载工作

```
if(!ini_get("safe_mode")) @set_time_limit(60); 
```

但仍然出现错误上传像 200mb 文件这样的大文件时说：“有一个 IO 错误：错误 #2038”跳转加载器似乎是一个不错的选择，但在不完整的上传后它显示“文件访问错误”并且 AjaXplorer 显示“安全令牌已过期”，我的偏好是使用 html 或至少使用 flash 上传器，但现在我渴望让任何事情都能正常工作......请帮忙。

我得到不完整的下载，例如 150mb 或 200mb 中的 40mb。

请帮助我解决我所缺少的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T02:33:17.730

尝试在 plugins>uploader>Jumploader 中使用 Jumploader

基于 Java 的上传器：默认情况下不活动，因为 Jumploader 不与应用程序一起分发，Java 小程序用于执行带有进度的大文件上传、块文件等。请参阅[http://jumploader.com/](http://jumploader.com/)并参阅下面的安装说明。

将 jumploader_z.jar 放到 ajaxplorer plugins/uploader.jumploader/ 文件夹中，通过禁用其他两个上传器插件并激活这个插件，通过 GUI（设置 > 全局配置 > 插件 > 上传器）激活插件。返回文件系统存储库，单击上传应该会打开 Java 小程序！

还要检查你的 apache 上传限制

# c++ - OpenSSL：接受 TLS 连接，然后转移到另一个进程

> ID：12426246
> 
> 赞同：6
> 
> 时间：2012-09-14T14:09:12.757
> 
> 标签：c++, linux, sockets, openssl, posix

我们有一个（Linux）服务器运行两个进程，A 和 B。目前，客户端与进程 A 建立连接，然后将生成的套接字的文件描述符传递给进程 B，允许进程 B 使用现有的 fd/socket 进行无缝通信与客户。客户端和进程 B 然后执行 TLS 握手并继续在生成的 TLS 连接上进行交谈。

（我在这里省略了很多细节，但是是的，有*充分*的理由让进程 A 充当中介而不是直接连接到进程 B）

现在，因为*`<long complicated story involving new client applications and websockets>`*看起来我们可能必须在进程 A 中执行 TLS 握手，然后将已建立的 TLS 连接传输到进程 B。

那可能吗？底层套接字的文件描述符可以被复制（我们已经这样做了），并且至少在理论上，内部 TLS 状态数据也可以被复制并用于重建进程 B 中的 TLS 连接，从而有效地接管连接。

但是 OpenSSL 是否公开了任何类似的设施？我发现这个函数`d2i_SSL_SESSION`似乎对 OpenSSL 会话对象做了类似的事情，但是对于 OpenSSL 来说还是很新的，我不确定这是否足够。涉及会话、上下文、BIO 和一堆其他听起来很复杂的术语。有多少需要序列化并转移到流程 B 才能工作？以及如何在实践中完成？

切换需要对客户端 100% 透明：它必须简单地对给定的 IP/端口执行 SSL 握手，然后继续在生成的套接字上进行通信，而不知道一个进程接受连接并执行TLS 握手，然后另一个处理所有后续通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-21T10:33:13.950

跨进程共享 SSL 上下文确实是可能的。但是，SSL-session-context 需要驻留在两个进程都可以访问的共享内存位置中（因为未知的具体原因）我们希望在进程 A 中完成实际的握手并执行数据 I/O在过程 B。

第一步是注册 SSL_CTX_sess_set_new_cb(ctx, shared_ctx_new_cb) 的回调；SSL_CTX_sess_set_get_cb(ctx, shared_ctx_get_cb); SSL_CTX_sess_set_remove_cb(ctx, shared_ctx_remove_cb);

确保始终在共享内存中创建适当的 SSL 会话上下文（或至少返回一个序列化并准备好使用指向 SSL_SESSION 的可寻址指针

要（反）序列化 SSL_SESSION 'C' 结构，请使用可用的 API d2i_SSL_SESSION(...) 和 i2d_SSL_SESSION(...)

使用这种方法的工作项目示例代码位于[https://github.com/varnish/hitch/blob/master/src/shctx.c](https://github.com/varnish/hitch/blob/master/src/shctx.c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:25:49.510

我没有在实践中尝试过，但据我记得在套接字级别创建连接后，它由 openssl 初始化，然后您使用 SSL_read 和 SSL_write 读/写。他们接受 socket fd 作为参数。连接本身（来自 SSL 端）由 SSL_CTX SSL 结构表示。

所以理论上这听起来可能，但正如我所说，我从未在现实世界中尝试过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-18T18:08:08.860

最近的内核补丁可能通过为 TLS 连接提供正常的 fd 来实现。请参阅页面“[内核中的 TLS，作者：Jake Edge，2015 年 12 月 2 日](https://lwn.net/Articles/666509/)”。我还交叉发布到另一个[SO question](https://stackoverflow.com/a/37900102/362754)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T16:26:54.617

听起来更麻烦，值得......考虑其他设计，例如使用环回接口代表B通过A代理连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T14:23:06.290

我认为这是不可能的，因为初始握手的一部分是密钥交换，并且正在进行的通信需要密钥。进程 B 需要知道远程端和进程 A 正在使用的密钥。

# php - 致命错误：未捕获的异常 'Zend_Db_Adapter_Exception' 带有消息“此适配器需要 PDO 扩展，但 ext

> ID：12426252
> 
> 赞同：1
> 
> 时间：2012-09-14T14:09:24.317
> 
> 标签：php, zend-framework

我的系统在 subdomain.domain.com 上的服务器上工作，但是当我把它放在 domain.com 上时，会出现这个错误？

Subdomain.domain.com 和 domain.com 在同一台服务器上。

该怎么办？

> 致命错误：/home/take/public_html/google.bg/library/Zend/Db/Adapter/Pdo/Abstract.php :342`'Zend_Db_Adapter_Exception'`中的消息未捕获异常`'The PDO extension is required for this adapter but the extension is not loaded'`
> 
> 堆栈跟踪：
> 
> ```
> #0 /home/take/public_html/google.bg/library/Zend/Db/Adapter/Abstract.php(247): Zend_Db_Adapter_Pdo_Abstract->setFetchMode(2) 
> #1 /home/take/public_html/google.bg/library/Zend/Db.php(270): Zend_Db_Adapter_Abstract->__construct(Array) 
> #2 /home/take/public_html/google.bg/library/Zend/Application/Resource/Db.php(142): Zend_Db::factory('PDO_MYSQL', Array) 
> #3 /home/take/public_html/google.bg/library/Zend/Application/Resource/Db.php(154): Zend_Application_Resource_Db->getDbAdapter() 
> #4 /home/take/public_html/google.bg/library/Zend/Application/Bootstrap/BootstrapAbstract.php(683): Zend_Application_Resource_Db->init() 
> #5 /home/take/public_html/google.bg/library/Zend/Application/Bootstrap/BootstrapAbstract.php(629): Zend in /home/take/public_html/google.bg/library/Zend/Db/Adapter/Pdo/Abstract.php on line 342 
> ```

# php - 正则表达式计算不同排列的数量

> ID：12426253
> 
> 赞同：5
> 
> 时间：2012-09-14T14:09:27.530
> 
> 标签：php, ruby, regex

所以这对 RegEx 的使用有点不寻常；我想计算将由特定模式匹配的不同字符串的数量（或在合适的情况下指示无限）。

例如，让我们考虑`[a-zA-Z]`哪个会产生 52，`[a-zA-Z]{1,2}`哪个会产生 2652（52+52×52−52×2；对于类似 的字符串减去 52×2 `aa`，`MM`它们不是不同的）或者`[a-zA-Z]+`哪个会是 ∞。

当然，我希望这种机制能够处理比这更复杂的正则表达式。我对 PHP 和 Ruby 的解决方案特别感兴趣。这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T14:18:24.563

正则表达式用于通过将给定字符串与给定模式进行比较来匹配给定字符串。任何给定的正则表达式都可以匹配大量的字符串，正则表达式越长，它可以匹配的字符串就越多。

在我看来，你所追求的不能用正则表达式来完成。您可以编写一个程序来解构正则表达式并尝试猜测您可以匹配的字符串数量。然而，话虽如此，这样的程序的构建很可能不是微不足道的。

例如，在您的情况下， [a-zA-Z] 不仅会匹配`a`（`z`对于大写变体也是如此），而且它还会匹配包含这些字母的任何字符串，这基本上是您可以使用的任何字符串想象其中至少包含这些字母中的一个。

添加`^`和`$`锚点可能会减少点击量，但话又说回来，你仍然会有超过 48 个，因为有时，你也可以争辩说它`{EmptyString}a{EmptyString}`也可以匹配`^a$`，这使得可能的结果数量非常大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T15:04:17.207

为了完成这项任务，我认为您需要一个比正则表达式引擎本身更复杂的解决方案。正则表达式引擎只是“测试”（和“捕获”，但其复杂性是微不足道的），而在您的任务中，您希望测试潜在输入的整个话语（当然，完全不切实际），或者*推断*出数学上的潜在输入。但请注意，为了*推断潜在输入的数量，您最终不可避免地不得不逐步完成**与正则表达式引擎所做的*或多或少相同的步骤，除了在每一步询问“这个原子的潜在输入？”

我不确定你想要这样一个计数器的目的是什么，但如果你想要做的只是比较两个正则表达式的潜在输入的大小，那么我建议使用抽样方法，*即*生成一个大集合随机字符串，并计算其中有多少与每个正则表达式匹配。（这太过分了，而且是高度推测性的，但由于纯随机字符串不太可能表现出自然语言所具有的分组模式，因此您可能必须使用分形技术（如曼德布洛特）生成*样本*。 )

现在，如果你想走演绎计数的道路*，*这里有两个想法可能有助于简化问题：

1.  如果您找到一个`*`或`+`（未转义且不在字符类中），那么您知道答案是无穷大。也一样`{M,}`。编辑：好吧，除非量词在“不可能”的正则表达式中，例如`(.*(?=a)(?=b))`，已经断言下一个字符必须是“a”和“b”！

2.  您可以将许多表达式扩展为交替语句，以便无论您的最终解决方案是什么，它都可以完全忽略字符类和量词，只关注每个交替组的原子数（可以相乘），*例如*

    1.  像这样的字符类`[0-9a-f]`可以扩展为`0123456789abcdef`，而后者又可以扩展为`(?:0|1|2|...|d|e|f)`.

    2.  有限量词如`x?`( *aka* `x{0,1}` ), `x{M,N}`, and`x{,N}`可以扩展为`(?:|x)`, `(?:x|xx|xxx|...)`, 等等。

祝你好运！

# javascript - 添加 到 In my javascript code, I'm creating an like so: var myObject = document.createElement('object'); Then, I to add some parameters to this object, so that thes 问问题 问问题 2012-09-14T14:09:31.863 3379 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. In my javascript code, I'm creating an like so: var myObject = document.createElement('object'); Then, I to add some parameters to this object, so that these are reflected in my html. I can do it like this, but after adding more and more paremeters, this code gets really messy and repetitive. var param1 = document.createElement('param'); param.setAttribute('name', 'myName'); param.setAttribute('value', 'myValue'); myObject.appendChild(param1); Is there a better way to create an and add parameters to this object? If it makes any difference, this is an activeX control object. Thanks! Try using media queries, instead. Look at http://cssmediaqueries.com/ javascriptactivex 4 4 回答 4 This answer is useful 0 像这样的事情会做到这一点 function addParams(obj, paramsObj){ for(vals in paramsObj) { obj.setAttribute(vals, paramsObj[vals]) } } var myObject = document.createElement('object'); var paramsObj = { "value":"myValue" "name":"myName" }; addParams(myObject, paramsObj); 于 2012-09-14T14:21:21.520 回答 This answer is useful 0 有多种添加属性的方法 1 param1.name=myName; 2 param1[name]=myName; 并且您可以通过使用循环检查该属性是否存在于对象中，for in并确保您使用hasProperty它来将其限制为对象自己的属性。 于 2012-09-14T14:16:21.520 回答 This answer is useful 0 您可以将该代码放入一个addParameters函数中，该函数接受一个对象并使用for in循环来添加对象中的所有属性。 于 2012-09-14T14:11:07.993 回答 This answer is useful 0 有多种令人兴奋的自助餐可供您选择： elem.id = 'NewId'; elem.value = 'NewValue';//etc... elem.style.width = '100%'; 或者，如果您只创建 1 个对象： elem = 'InnerText or innerHTML go here'; 在大多数情况下，这甚至比手动创建它还要快... :) 如果没有，这是我不时使用的一个小功能： function createAssign(elem,attr) { var i; elem = (typeof elem === 'object' ? elem : document.createElement(elem)); if (typeof attr !== 'object') { return elem; } for (i in attr) { if (attr.hasOwnProperty(i)) { elem[i] = (typeof attr[i] === 'object' ? createAssign(elem[i],attr[i]) : attr[i]); } } if (this !== window && this.appendChild) { this.appendChild(elem); return true; } return elem; } var el = createAssign('div',{id:'Foo',innerHTML:'bar',style:{width:'100%'}}); //or append directly: createAssign.apply(document.body,['div',{id:'Foo',innerHTML:'bar',style:{width:'100%'}}]); 于 2012-09-14T14:18:08.930 回答 Related 1 c++ - 如何创建一个可以在 GUI 对话框模式或通过命令行启动的 C++ MFC 程序？ 1 java - JavaMail 有时连接到 gmail，有时不连接。似乎随机 1 google-geocoder - 使用 gmaps v3 的地理编码对多个地址进行地理编码 2 mysql - 左连接比较和 md5(concat()) mysql 1 javascript - 为什么我的 css 语音气泡如此频繁地移位？我怎样才能防止这种情况？ 3 android - 如何在 Android 中创建一个球？ 3 c - typedef 变量上缺少强制转换的编译器警告 2 xcode - 为 Xcode 项目设置默认方案 1 c++ - 虚拟模板功能解决方法 1 asp.net-mvc - MVC 剃刀分离的 dll Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12426255
> 
> 赞同：2
> 
> 时间：
> 
> 标签：javascript, activex

In my javascript code, I'm creating an `<object>` like so:

```
var myObject = document.createElement('object'); 
```

Then, I to add some parameters to this object, so that these are reflected in my html.

I can do it like this, but after adding more and more paremeters, this code gets really messy and repetitive.

```
var param1 = document.createElement('param');
param.setAttribute('name', 'myName');
param.setAttribute('value', 'myValue');
myObject.appendChild(param1); 
```

Is there a better way to create an and add parameters to this object?

If it makes any difference, this is an activeX control object.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:21:21.520

像这样的事情会做到这一点

```
function addParams(obj, paramsObj){

  for(vals in paramsObj)
  {
     obj.setAttribute(vals, paramsObj[vals])
  }
}

var myObject = document.createElement('object');
var paramsObj = {
                  "value":"myValue"
                  "name":"myName" 
                };

addParams(myObject, paramsObj); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:16:21.520

有多种添加属性的方法

## 1

```
param1.name=myName; 
```

## 2

```
param1[name]=myName; 
```

并且您可以通过使用循环检查该属性是否存在于对象中，`for in`并确保您使用`hasProperty`它来将其限制为对象自己的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T14:11:07.993

您可以将该代码放入一个`addParameters`函数中，该函数接受一个对象并使用`for in`循环来添加对象中的所有属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T14:18:08.930

有多种令人兴奋的自助餐可供您选择：

```
elem.id = 'NewId';
elem.value = 'NewValue';//etc...
elem.style.width = '100%'; 
```

或者，如果您只创建 1 个对象：

```
elem = '<div id="Foo" class="bar blackBlock andSomeOtherClass">InnerText or innerHTML go here</div>'; 
```

在大多数情况下，这甚至比手动创建它还要快... :)

如果没有，这是我不时使用的一个小功能：

```
function createAssign(elem,attr)
{
    var i;
    elem = (typeof elem === 'object' ? elem : document.createElement(elem));
    if (typeof attr !== 'object')
    {
        return elem;
    }
    for (i in attr)
    {
        if (attr.hasOwnProperty(i))
        {
            elem[i] = (typeof attr[i] === 'object' ? createAssign(elem[i],attr[i]) : attr[i]);
        }
    }
    if (this !== window && this.appendChild)
    {
        this.appendChild(elem);
        return true;
    }
    return elem;
}
var el = createAssign('div',{id:'Foo',innerHTML:'bar',style:{width:'100%'}});
//or append directly:
createAssign.apply(document.body,['div',{id:'Foo',innerHTML:'bar',style:{width:'100%'}}]); 
```

# c# - 处理文本框中的 Shift-Enter 事件

> ID：12426265
> 
> 赞同：5
> 
> 时间：2012-09-14T14:10:14.660
> 
> 标签：c#, wpf

我想要一个文本框，用户可以在其中 shift-enter 或 ctrl-enter 添加换行符而不提交。我发现以下关于如何执行 ctrl-enter 的帖子

[http://social.msdn.microsoft.com/forums/en-US/wpf/thread/67ef5912-aaf7-43cc-bfb0-88acdc37f09c](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/67ef5912-aaf7-43cc-bfb0-88acdc37f09c)

效果很好！所以我添加了自己的块来捕获 shift 输入，如下所示：

```
 else if (((keyData & swf.Keys.Shift) == swf.Keys.Shift) && ((keyData & swf.Keys.Enter) == swf.Keys.Enter) && Keyboard.FocusedElement == txtMessage)
  {
     // SHIFT ENTER PRESSED!
  } 
```

除了现在该框正在捕获其他移位组合，例如问号和波浪形大括号，然后添加换行符。我需要改变什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-14T15:05:33.840

我更喜欢使用键绑定输入：

```
 <TextBox>
      <TextBox.InputBindings>
         <KeyBinding Key="ENTER" Modifiers="Shift" Command="{Binding YoutCommand}"/>
      </TextBox.InputBindings>
 </TextBox> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-14T14:28:02.053

我不会与 WinForms 混合使用。尝试：

```
<TextBox KeyDown="TextBox_KeyDown" /> 
```

使用此事件处理程序：

```
private void TextBox_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Enter)
    {
        if (Keyboard.Modifiers.HasFlag(ModifierKeys.Control))
        {
            MessageBox.Show("Control + Enter pressed");
        }
        else if (Keyboard.Modifiers.HasFlag(ModifierKeys.Shift))
        {
            MessageBox.Show("Shift + Enter pressed");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-26T13:12:34.337

在尝试了大多数事情之后，我决定尝试一下我自己。这似乎很容易完成这项工作

在设计器视图中。选择文本框并在“事件”下闪电双击 key->KeyDown。您将被放置在代码中。

粘贴这个：

```
private void textBox1_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.Shift)
            {
                if(e.KeyCode == Keys.Enter)
                {
                    MessageBox.Show("shift enter");
                }
            }
        } 
```

如果按下键移位。然后在那个 if 语句中。如果按下 Enter，则会弹出一个消息框。

用您的任务交换消息框。

# haskell - 是否可以在 Haskell 中分析空间使用情况

> ID：12426266
> 
> 赞同：4
> 
> 时间：2012-09-14T14:10:16.350
> 
> 标签：haskell

[Erik 的讲座第 12 章](http://channel9.msdn.com/Series/C9-Lectures-Erik-Meijer-Functional-Programming-Fundamentals/C9-Lectures-Dr-Erik-Meijer-Functional-Programming-Fundamentals-Chapter-12-of-13)通过介绍示例函数提到了“提高空间使用率” `sumWith`。

我代表懒惰版本和严格版本如下。

```
sumWith1 v [] = v
sumWith1 v (x:xs) = sumWith1 (v+x) xs

sumWith2 v [] = v
sumWith2 v (x:xs) = (sumWith2 $! (v+x)) xs

test = sumWith1 0 [1..200000000] 
```

我猜严格版本应该会在一定程度上提高性能，因此我尝试验证杠杆 GHC 分析工具。

```
$ ghc --make -O2 -prof -auto-all -rtsopts -o test1
$ ./test1 +RTS -p -RTS 
```

更改`sumWith1`为`sumWith2`at`test`函数并再次作为 test2 执行。

这是分析结果： http: [//pastie.org/4720019](http://pastie.org/4720019)。

通过查看`%alloc`列，我看不到这两个函数之间的任何差异。

我的问题是如何改进测试用例以找到一些差异。换句话说，是否可以分析这种情况下的空间使用情况？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T14:46:54.347

使用 GHC 的堆分析器。

它在[RWH, ch25](http://book.realworldhaskell.org/read/profiling-and-optimization.html)中有详细描述。这是[一个完整的例子](https://stackoverflow.com/a/3276557/83805)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T15:27:11.743

这是您程序的统计数据（我已将上限降低到 1000000）

这是您稍作修改的程序

```
sumWith1 v [] = v
sumWith1 v (x:xs) = sumWith1 (v+x) xs

sumWith2 v [] = v
sumWith2 v (x:xs) = (sumWith2 $! (v+x)) xs

main = print $ sumWith1 0 [1..1000000] 
```

编译`ghc -prof -fprof-auto -rtsopts heap.hs`

对于 sumwith1

```
./heap +RTS -sstderr -K500M
500000500000
     266,384,496 bytes allocated in the heap
     367,442,520 bytes copied during GC
     117,747,616 bytes maximum residency (8 sample(s))
       1,931,472 bytes maximum slop
             196 MB total memory in use (0 MB lost due to fragmentation)

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0       393 colls,     0 par    0.19s    0.19s     0.0005s    0.0455s
  Gen  1         8 colls,     0 par    0.20s    0.21s     0.0257s    0.0832s

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time    0.15s  (  0.16s elapsed)
  GC      time    0.39s  (  0.39s elapsed)
  RP      time    0.00s  (  0.00s elapsed)
  PROF    time    0.00s  (  0.00s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time    0.55s  (  0.55s elapsed)

  %GC     time      71.2%  (71.5% elapsed)

  Alloc rate    1,689,230,189 bytes per MUT second

  Productivity  28.7% of total user, 28.7% of total elapsed 
```

对于 sumwith2

```
./heap +RTS -sstderr -K500M           
500000500000
     256,057,488 bytes allocated in the heap
          65,256 bytes copied during GC
          30,240 bytes maximum residency (1 sample(s))
          21,440 bytes maximum slop
               1 MB total memory in use (0 MB lost due to fragmentation)

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0       488 colls,     0 par    0.00s    0.00s     0.0000s    0.0000s
  Gen  1         1 colls,     0 par    0.00s    0.00s     0.0003s    0.0003s

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time    0.14s  (  0.14s elapsed)
  GC      time    0.00s  (  0.00s elapsed)
  RP      time    0.00s  (  0.00s elapsed)
  PROF    time    0.00s  (  0.00s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time    0.14s  (  0.14s elapsed)

  %GC     time       1.8%  (1.8% elapsed)

  Alloc rate    1,798,840,354 bytes per MUT second

  Productivity  98.0% of total user, 99.3% of total elapsed 
```

您可以看到 GC 数量和使用的总内存有很大差异。有关更多信息，您可以参考 Don 指出的 RWH 章节。

# java - 其他库的 Scalaz 类型类实例的汇总

> ID：12426269
> 
> 赞同：13
> 
> 时间：2012-09-14T14:10:16.763
> 
> 标签：java, scala, monads, scalaz, typeclass

我经常发现自己想要（然后通常编写）其他 Scala 或 Java 库中的类的[Scalaz](http://code.google.com/p/scalaz/)类型类实例。仅举几个例子：

[Shapeless](https://github.com/milessabin/shapeless)的monoid实例几乎免费`HList`为您提供[具有适当类型成员的案例类的 monoid 实例。](https://stackoverflow.com/a/11439044/334519)

[例如， Lift](http://liftweb.net/)的应用函子实例`Box`允许您对框列表进行排序：

```
scala> val boxen: List[Box[Int]] = Full(1) :: Full(2) :: Full(3) :: Nil
boxen: List[net.liftweb.common.Box[Int]] = List(Full(1), Full(2), Full(3))

scala> boxen.sequence
res0: net.liftweb.common.Box[List[Int]] = Full(List(1, 2, 3)) 
```

[Dispatch 0.9](http://dispatch.databinder.net/Dispatch.html)`Promise`（和等）的monad 实例对`Promise[Either[Throwable, _]]`各种事情都非常有用。

标准库的应用[函子实例](https://stackoverflow.com/q/7785762/334519)`Parser`使应用解析更加简洁和优雅。（我刚刚注意到 Scalaz 7[现在为 . 提供了一个 monad 实例`Parser`](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/std/util/parsing/combinator/Parser.scala)。）

等等...

这些实例几乎总是非常通用的，我相信我们很多人都写过很多次。我在这个问题上寻找的是某种用于 Scalaz 类型类实例的聚合器或票据交换所。我不确定这样的东西是否存在——我当然找不到任何类似的东西——但即使只是博客文章、GitHub 存储库或其他资源的链接集合对我来说也是有用的。

我更喜欢 Scalaz 7 实例，但我会尽我所能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T19:58:26.803

## Scalaz 实例的社区 wiki

### Scalaz 7 实例

*   简单的案例类实例（[Monoid](https://github.com/milessabin/shapeless/blob/master/examples/src/main/scala/shapeless/examples/monoids.scala)，[Ordering](https://gist.github.com/3705819)，可能是序列化等） -[无形](https://github.com/milessabin/shapeless)
*   玩！2 个实例 - [play-scalaz](https://github.com/teamon/play-scalaz)（Promise monad，Json 序列化程序）
*   Akka 2.x 未来 - [akkaz](https://github.com/robinp/akkaz)

# vb.net-2010 - accessing controls of similar type in a loop in vb.net 2010

> ID：12426271
> 
> 赞同：-1
> 
> 时间：2012-09-14T14:10:22.703
> 
> 标签：vb.net-2010

I am trying to access a group of similarly named rectangle shapes in a loop and change their backcolor property in vb.net 2010 language

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-14T14:20:47.387

由于您没有指定它是网站还是桌面，我假设它与 web.xml 更相关。

您可以使用 jquery 来更改颜色：

更多信息可以在以下位置找到：

[http://api.jquery.com/each/](http://api.jquery.com/each/)

或更多与您的要求相关的信息可在以下位置找到：

[http://www.bennadel.com/blog/534-The-Beauty-Of-The-jQuery-Each-Method.htm](http://www.bennadel.com/blog/534-The-Beauty-Of-The-jQuery-Each-Method.htm)

# windows - 任务计划程序如何结束正在运行的作业？

> ID：12426280
> 
> 赞同：6
> 
> 时间：2012-09-14T14:10:57.587
> 
> 标签：windows, task, scheduler

我很想知道任务调度程序如何结束正在运行的任务。我已经在任务调度程序作业中添加了一个应用程序，它看起来就像在任务调度程序中为我的工作按结束时（从任务调度程序启动它之后），任务被 Windows 杀死（在我的应用程序中没有收到`WM_QUIT`或`WM_CLOSE`消息） . 我也没有找到一种方法来配置我希望如何在任务计划程序中关闭我的任务。我的目标是处理任务计划程序（如果有）发送的消息并很好地关闭我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-23T23:38:34.923

可能该进程被 Windows 功能杀死`TerminateProcess()`。消息队列与它无关。无法对此进行配置，也无法捕获 TerminateProcess。

如果您需要长时间运行，请考虑创建一个真正的 Windows 服务，而不是使用任务计划程序。然后您将获得服务控制通知，包括关闭通知，它允许您在服务退出之前进行清理。

# asp.net - asp.net 中是否有唯一标识符来区分同一页面的多个选项卡/浏览器窗口？

> ID：12426284
> 
> 赞同：0
> 
> 时间：2012-09-14T14:11:14.887
> 
> 标签：asp.net, session

假设我有一个网站处理用户上传的文件（例如存储或从 sql 表中提取数据）。有没有办法确保一个用户可以打开多个选项卡/浏览器窗口，每个窗口编辑一个不同的文件？

我可以使用会话 ID 作为解决此问题的一种方式吗？我还需要避免像这里提到的超时问题：[asp.net cookies, authentication and session timeouts](https://stackoverflow.com/questions/454616/asp-net-cookies-authentication-and-session-timeouts)，但据我了解，身份验证票证在同一浏览器的所有选项卡/窗口之间共享。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:13:03.107

哪有这回事。

每个选项卡通常是同一会话的一部分，但浏览器不需要将正在使用的选项卡传递回服务器（没有规范这样做）。

由于网络应该是无状态的，这样做会破坏这个目的。

您可以通过将自己的标识符嵌入其中来识别特定的请求/响应对（标题、隐藏的表单字段等......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:01:51.607

为了我的需要，我决定将文件名保存为一个字符串，用于在不同的选项卡/浏览器窗口上进行识别。该字符串使用查询字符串在网页之间传递，我在存储该值的数据库表中添加了一个新列。

对数据库表所做的任何更改都将使用文件名作为过滤器。结果，不同的页面（具有不同的查询字符串）将能够同时处理数据库表而不会相互干扰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:58:16.563

希望将帮助其他人处理唯一标识符以在服务器端的 ASP.NET 中进行验证。这是我的解决方案

```
 /// <summary>
/// Page Load event handler 
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
protected void Page_Load(object sender, EventArgs e)
{

    if (!Page.IsPostBack)
    {            
        //Check if session object has not been assigned - page is being loading first time or session has been expired
        if (Session["ValidateId"] == null)
             Session["ValidateId"] = Session.SessionID;           

    }
    else
    {

        //Check if ViewState has not been previously assigned
        if (ViewState["UniqueId"] == null)
        {

            //Always store ticks when page is being requested through post back
            Int64 numberOfTicks = 0;
            numberOfTicks = DateTime.Now.Ticks;
            //keep this unique id to current page between post backs
            ViewState["UniqueId"] = Session.SessionID + "_" + numberOfTicks.ToString();
        }
    }
}

/// <summary>
/// button click event handler
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
protected void btnCalculate_Click(object sender, EventArgs e)
{

    if (Session["ValidateId"] == null)
    {
        SetAlertMessage("Current Session is Expired. Please reload the page to continue.");
        this.lblValidate.Text = "Current Session is Expired. Please reload the page to continue.";
        return;
    }

    else
    {

        //Assign Unique Id from View State - id is unique across browser windows and belong only to current page
        Session["UniqueId"] = ViewState["UniqueId"];
        //Instantiate object to run some calculation and manipulate records in database
        this._transformerloadParser = new TransformerLoadDataParser(ViewState["UniqueId"].ToString());
    }       
}   

/// <summary>
/// User alert message through ClientScriptManager
/// </summary>
/// <param name="message"></param>
protected void SetAlertMessage(String message)
{
    StringBuilder sb = null;

    String scName = "AlertScript";
    ClientScriptManager csm = Page.ClientScript;
    Type scType = Page.GetType();

    sb = new StringBuilder();
    sb.Append("alert('");
    sb.Append(message);
    sb.Append("')");
    ScriptManager.RegisterStartupScript(this, scType, scName, sb.ToString(), true);
}   

//class logic
public class TransformerLoadDataParser
{
    //Constructor
    public TransformerLoadDataParser(String uniqueId)
    {
        Init(uniqueId);
    }   

    /// <summary>
    /// All required variable initialization
    /// </summary>
    protected void Init(String uniqueId)
    {
        try
        {

                this._userIdentityName = HttpContext.Current.User.Identity.Name;

                if (HttpContext.Current.Session["UniqueId"] == null || !String.Equals(HttpContext.Current.Session["UniqueId"],uniqueId))
                    throw new Exception("UniqueId as Session Key has not been set, expired or not properly set.");

                this._sessionId = uniqueId;

            }
            else
            {
                throw new Exception("Application settings are not defined in web config file.");
            }

        }
        catch (Exception)
        {

            throw;
        }
    }

    //some other logic
} 
```

# django - 在 Django 中使用 Bootstrap 的最佳方式

> ID：12426286
> 
> 赞同：4
> 
> 时间：2012-09-14T14:11:39.560
> 
> 标签：django, twitter-bootstrap, django-forms, django-templates, django-views

经过一些研究，我可以选择两种将 Bootstrap 集成到 Django 中的方法。

1.  [https://github.com/dyve/django-bootstrap-toolkit](https://github.com/dyve/django-bootstrap-toolkit)
2.  [https://github.com/earle/django-bootstrap](https://github.com/earle/django-bootstrap)

第一个需要对您的模板进行一些更改，第二个需要对您的视图进行更改。

**1的例子。）**

*[...]{{ 形式|as_bootstrap }}[...]*

```
{% load bootstrap_toolkit %}

<form action="/url/to/submit/" method="post">
    {% csrf_token %}
    {{ form|as_bootstrap }}
    <div class="actions">
        <button type="submit" class="btn primary">Submit</button>
    </div>
</form> 
```

**2的例子。）**

*[...]类登录表单（BootstrapForm）[...]*

```
from bootstrap.forms import BootstrapForm, Fieldset

class LoginForm(BootstrapForm):
    class Meta:
        layout = (
            Fieldset("Please Login", "username", "password", ),
        )

    username = forms.CharField(max_length=100)
    password = forms.CharField(widget=forms.PasswordInput(), max_length=100) 
```

推荐哪种方式？还是有什么其他方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T15:09:06.937

如果只是关于表单，也许你也想看看 django-crispy-forms。它是 django-uni-form 的继承者并支持引导表单。

[https://github.com/maraujop/django-crispy-forms](https://github.com/maraujop/django-crispy-forms)

# joomla - 我可以从 Joomla 管理员下载模板吗？

> ID：12426292
> 
> 赞同：0
> 
> 时间：2012-09-14T14:11:48.157
> 
> 标签：joomla, joomla1.5

我需要离线修改一个 Joomla 1.5 模板，并且可以以管理员身份登录到后端。我可以从那里下载模板还是需要访问 FTP？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:48:08.807

您需要访问 ftp 来编辑模板文件。如果您想从 Admin 后端下载它，那么您必须安装`Akeeba backup`组件才能下载它。

akeeba备份下载链接：[点击这里](https://www.akeebabackup.com/download/akeeba-backup.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T14:50:31.507

如果你想下载你应该使用的模板包`FTP`

要在 Joomla 中编辑模板，您可以同时使用`Joomla administrator and FTP`.

在 Joomla 管理员中，您只能编辑`HTML(index.php) and CSS file`.

去，

```
Joomla administrator ---> Extensions ---> Template Manager ---> Select your template 
```

在编辑页面中，您可以在右上角看到这两个选项。请参考此屏幕截图。 ![在此处输入图像描述](../Images/c2954288b565784e2e5bafbd9da0117b.png)

# java - 继承内部类的私有方法

> ID：12426293
> 
> 赞同：0
> 
> 时间：2012-09-14T14:11:51.407
> 
> 标签：java, inheritance, inner-classes, private-methods

让我们看下面的代码：

```
public class Test {

    class A {
        public A() {}

        private void testMethod() {
            System.out.println("A");
        }
    }

    class B extends A {
        public B() { super(); }

        private void testMethod() {
            System.out.println("B");
        }
    }

    public Test() { }

    public A get() {
        return new B();
    }

    public static void main(String[] args) {
        new Test().get().testMethod();
    }
} 
```

我希望该代码能够编写`B`. `A`改为写。

一个类可以调用它所包含的内部类的私有方法这一事实可能会让人感到奇怪（至少对我而言）（为什么它们会这样？），但我真正无法理解的是为什么多态性不不工作。

我的意思是，如果`Test.main()`我们可以调用`A.testMethod()`很明显我们也调用了`B.testMethod()`。Java也可以确定对象的动态类型，那么为什么Java调用声明类型的方法而不是动态类型的方法呢？可以检查此行为：

```
public static void main(String[] args) {
    B b = new Test().new B();
    A a = b;
    b.testMethod(); // writes B
    a.testMethod(); // writes A
} 
```

另外，为什么只有在`Test.A.testMethod()`is时才会发生这种情况`private`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T14:14:10.350

您期望的行为来自虚拟方法。
私有方法永远不是虚拟的。

相反，您有两个恰好具有相同名称的不相关方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T14:23:07.373

它在[JLS #15.2.3中定义](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.3-400)

> 如果编译时声明具有 private 修饰符，则调用模式是非虚拟的

和[JLS #15.4.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.4.4-200)

> 如果调用模式是非虚拟的，则不允许覆盖。类 T 的方法 m 是要调用的方法。

`T`在您的情况下，声明的类型在哪里，而不是在运行时（在您的情况下）`A`对象的实际类型。`B`换句话说，私有方法不存在多态性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T14:14:06.323

> 在 Java 中，所有非静态方法默认都是“虚拟函数”。两种特殊的非静态方法是非虚拟的：用关键字 final 标记的，不能被覆盖，**私有方法，不能被继承**。

[http://en.wikipedia.org/wiki/Virtual_function#Java](http://en.wikipedia.org/wiki/Virtual_function#Java)

# wso2 - wso2 ESB 和 IS adminServices

> ID：12426294
> 
> 赞同：2
> 
> 时间：2012-09-14T14:11:55.050
> 
> 标签：wso2, wso2esb, esb, wso2is

我在 WSO2 ESB 中公开了 Identity Server UserProfileMgtService adminService。问题是，当我使用该`tryIt`功能测试服务时，我得到了 SSL 异常。当我通过 SOAP UI 在 ESB 中调用服务时也会发生这种情况。

这是一个例外：

```
 [2012-09-14 16:32:21,003] ERROR - ClientHandler I/O error : Host name verification failed for host : localhost For : 127.0.0.1:9447 For Request : Axis2Request [Message ID : urn:uuid:d3797d1e-f21d-4b6a-aec9-075e95e982e6] [Status Completed : false] [Status SendingCompleted : true]
javax.net.ssl.SSLException: Host name verification failed for host : localhost
        at org.apache.synapse.transport.nhttp.HttpCoreNIOSSLSender$1.verify(HttpCoreNIOSSLSender.java:310)
        at org.apache.http.impl.nio.reactor.SSLIOSessionHandlerAdaptor.verify(SSLIOSessionHandlerAdaptor.java:52)
        at org.apache.http.impl.nio.reactor.SSLIOSession.doHandshake(SSLIOSession.java:186)
        at org.apache.http.impl.nio.reactor.SSLIOSession.outboundTransport(SSLIOSession.java:292)
        at org.apache.http.impl.nio.SSLClientIOEventDispatch.outputReady(SSLClientIOEventDispatch.java:249)
        at org.apache.http.impl.nio.reactor.BaseIOReactor.writable(BaseIOReactor.java:179)
        at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvent(AbstractIOReactor.java:344)
        at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvents(AbstractIOReactor.java:318)
        at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:278)
        at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)
        at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:542)
        at java.lang.Thread.run(Thread.java:662)
[2012-09-14 16:32:21,005]  WARN - EndpointContext Endpoint : endpoint_b058e35b0fa1f0f58569defe4fb9d4838eadea9b6abd4d36 will be marked SUSPENDED as it failed
[2012-09-14 16:32:21,006]  WARN - EndpointContext Suspending endpoint : endpoint_b058e35b0fa1f0f58569defe4fb9d4838eadea9b6abd4d36 - last suspend duration was : 30000ms and current suspend duration is : 30000ms - Next retry after : Fri Sep 14 16:32:51 EEST 2012 
```

我正在使用自签名证书，但我已经相应地修改了 wso2carbon.jks 和 client-truststore.jks，因此它们具有 CN localhost 的证书以及具有不同 CN 的我的自签名证书。我使用 localhost 作为 IS 端点。什么会导致此异常？有没有更简单的方法在 ESB 中映射 IS 管理服务。

澄清
所有服务器都有带有CN的自签名证书：ip-xx-xx-xxx-xx.xx.something.com。

我的身份服务器在 localhost:9447/ 上运行，我想通过 ESB 运行的服务是 localhost:9447/services/UserProfileMgtService?wsdl。

ESB 位于 localhost:9447/

我已在axis2.xml 中定义的HTTPS 传输发送方配置中将set 参数设置为AllowAll，并且我还将HideAdminServiceWSDLs 设置为false。

我可以通过浏览器访问 localhost:9447/services/UserProfileMgtService?wsdl，但是如果我在 ESB 中的 publishWsdl 选项中提供它，它会说它无法连接到该服务。如果我将其定义为自定义代理，则会引发上面给出的异常。

在 SOAP UI 中，我给出了 ESB 中代理服务的 WSDL，它只有 mediate() 方法，我猜这是因为 ESB 无法连接到端点 wsdl。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:47:21.677

[您可以像这样](http://vvratha.blogspot.com/2012/09/executing-carbon-admin-services-from.html)定义一个代理并执行它。

要访问管理服务的 WSDL，您需要将 carbon.xml 中的“HideAdminServiceWSDLs”参数设置为“true”。然后您可以简单地创建一个soapui 项目来查找确切的SOAP 请求格式。

# sql-server - 从 JOB 中存储的过程中调用 SQL Server 程序集的方法

> ID：12426295
> 
> 赞同：0
> 
> 时间：2012-09-14T14:11:57.450
> 
> 标签：sql-server, stored-procedures, jobs

祝大家有美好的一天！=) 我有一些问题。

有一组使用数据库的非静态类。我决定制作一个 SQL Server 程序集以从 JOB 调用它们并通过存储过程启动。永远不要这样做，但这似乎是一个有趣的解决方案。

我的代码示例：

```
public class FileProcessor
{
 public FileProcessor()
        {
            this.sqlconnect = new DBAccess();
            this.log = new Logdb();
            ExchangeService = new ExchangeService(ExchangeVersion.Exchange2010_SP2);
        }
        public void ImportFromMail(int viborka, bool export2DB)
// operations
} 
```

装配体创建：

```
CREATE ASSEMBLY ClassLibrary1 
from 'D:\proj\csharp\test\dbclr\FileProcessor.dll' 
```

我需要创建一个存储过程来处理我的对象。是否可以从程序集中获取我的类的实例并调用它的方法？如何？？？=)

或者我唯一的方法是使用 COM 对象并从 JOB 中调用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:58:26.623

解决方法很简单。需要为每个函数创建一个具有静态函数的类，并将非静态类作为对象实现。所以，不需要创建 COM =)

# c# - 如何将 C sharp 中的列表插入 SQL Server 2008？

> ID：12426300
> 
> 赞同：-5
> 
> 时间：2012-09-14T14:12:11.880
> 
> 标签：c#, sql-server-2008, list, insert

我在 c# 中创建了一个列表，现在我需要将列表插入 SQL Server 2008。这可能吗？请用一个简单的例子来解释。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T14:21:08.747

这是一个简单的例子：

```
List<String> list = new List<String>() { "A", "B", "C" };
using (var con = new SqlConnection(connectionString))
{
    con.Open();
    using (var cmd = new SqlCommand("INSERT INTO TABLE(Column)VALUES(@Column)", con))
    {
        cmd.Parameters.Add("@Column", SqlDbType.VarChar);
        foreach (var value in list)
        {
            cmd.Parameters["@Column"].Value = value;
            int rowsAffected = cmd.ExecuteNonQuery();
        }
    }
} 
```

这只是遍历列表中的所有项目，并在另一个之后执行一个插入命令[`ExecuteNonQuery`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)。

**编辑**：如果您想知道将数组（或列表）插入 sql-server 的最有效方法，您绝对应该阅读以下内容：http: [//www.sommarskog.se/arrays-in-sql-2008.html](http://www.sommarskog.se/arrays-in-sql-2008.html)

如果您稍后有具体问题，可以回来展示您尝试过的内容。

# c - 哪个是最适合初学者的 C IDE？

> ID：12426302
> 
> 赞同：0
> 
> 时间：2012-09-14T14:12:23.077
> 
> 标签：c, ide

我刚刚开始学习 C。我正在使用 Dev C++，但我不喜欢这个。还有其他我可以使用的程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:13:21.093

您可以在 Visual C++ 中编译 C，这是一个很好的 IDE，尤其是在您刚开始的时候。

[http://www.microsoft.com/visualstudio/eng/products/visual-studio-overview](http://www.microsoft.com/visualstudio/eng/products/visual-studio-overview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:14:19.637

我真的很喜欢 eclipse 和 CDT，我喜欢 eclipse 做任何事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T14:17:13.867

对于普通 CI 来说真的很喜欢使用 Sublime Text 2。虽然它比 IDE 更高级的编辑器。

# c# - 如何在 WPF 应用程序中获取 KeyChar

> ID：12426303
> 
> 赞同：0
> 
> 时间：2012-09-14T14:12:24.103
> 
> 标签：c#, .net, wpf

我有一个简单的应用程序，用户在其中输入文本并按 Enter，然后文本显示在大电视屏幕上。

问题：如何进入`e.KeyChar`WPF 应用程序，KeyUp 事件？还是有其他方法？

```
public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            this.KeyUp += MainWindow_KeyUp;
        }

        private String Text;

        void MainWindow_KeyUp(object sender, KeyEventArgs e)
        {

            if (e.Key == Key.Enter)
            {
                TextLabel.Content = Text;
                Text = String.Empty;
            }
            else
            {
                Text += e.Key;
            }

        } 
```

我输入“test”时的结果是“TEST”。我必须手动处理所有系统密钥吗？如果我想输入“Test”怎么办 -> 现在我得到结果“RihgtShiftTEST”。我想要的只是积累一个字符缓冲区，并显示文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:32:34.723

对于阅读文本输入，最好使用以下事件：

[http://msdn.microsoft.com/en-us/library/system.windows.uielement.ontextinput.aspx](http://msdn.microsoft.com/en-us/library/system.windows.uielement.ontextinput.aspx)

TextCompositionEventArgs 的“Text”成员已经提供了高级纯文本并过滤掉了所有讨厌的控制字符等。

# deployment - 拒绝应用程序 appname 的启动请求，因为正在为应用程序 weblogic 运行停止请求

> ID：12426304
> 
> 赞同：1
> 
> 时间：2012-09-14T14:12:25.900
> 
> 标签：deployment, weblogic

拒绝应用程序 appname 的启动请求，因为该应用程序正在运行停止请求。

启动应用程序时出现此异常。但是，我已经用力删除了该应用程序。现在我无法启动新版本的应用程序。旧的被删除。

对于这个问题，我想知道如何取消/删除我可以启动新应用程序的停止请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T21:48:25.963

我不得不重新启动管理服务器

# python - ttk：如何使框架看起来像标签框架？

> ID：12426315
> 
> 赞同：4
> 
> 时间：2012-09-14T14:13:25.307
> 
> 标签：python, tkinter, frame, ttk

Python ttk gui 创建很容易，并且主要具有原生外观（win7）。不过，我有一个小问题：

我想要一个看起来像 ttk.LabelFrame 但没有标签的框架。只是省略文本选项会留下一个丑陋的差距。

我也无法让 ttk.Frame 边框看起来像 LabelFrame。有没有一种优雅的方式来做到这一点？如果这适用于 xp 以上的所有/大多数 Windows 版本，则奖励业力。

也许它适用于样式，但样式 LabelFrame 属性似乎大多为空（style.element_options（“border.relief”））。也许我找错地方了。

编辑：

```
try:  # python 3
    from tkinter import *  # from ... import * is bad
    from tkinter.ttk import *
except:
    from Tkinter import *
    from ttk import *

t = Tcl().eval
print("tcl version: " + str(t("info patchlevel")))
print("TkVersion: " + str(TkVersion))

root = Tk()

lF = LabelFrame(root, text=None)
lF.grid()
b = Button(lF, text='gonzo')
b.grid()

f = Frame(root, relief="groove") #GROOVE)
f.grid()
b2 = Button(f, text='gonzo')
b2.grid()

f2 = Frame(root, relief=GROOVE, borderwidth=2)
f2.grid()
b3 = Button(f2, text='gonzo')
b3.grid()

mainloop() 
```

使用新下载的 python 3.2.3 在 win7 上输出：

tcl 版本：8.5.9

TkV版本：8.5

![输出](../Images/28bf9c50ca9f348113b1dde7b9461ab1.png)

这台机器上也安装了 python 2.6.6（同样的问题）。不过，每个安装似乎都使用了正确的 tk/tcl。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T18:01:18.473

好的，似乎获得没有间隙的 LabelFrame 的一种解决方案是使用空小部件代替文本。因此，稍微修改示例的第一部分：

```
# don't do the 'from tkinter import *' thing to avoid namespace clashes
import tkinter   # assuming Python 3 for simplicity's sake
import tkinter.ttk as ttk 

root = tkinter.Tk()

f = tkinter.Frame(relief='flat')
lF = ttk.LabelFrame(root, labelwidget=f, borderwidth=4)
lF.grid()
b = ttk.Button(lF, text='gonzo')
b.grid()

root.mainloop() 
```

似乎适用于常规 Win7 主题。

# mysql - 如何在 MySQL 中为用户设置默认架构

> ID：12426320
> 
> 赞同：48
> 
> 时间：2012-09-14T14:13:49.090
> 
> 标签：mysql, default, database-schema

有没有办法为 MySQL 中的每个用户设置默认模式，如果可以，如何设置？其中用户 x 将默认为模式 y，用户 z 将默认为模式 a。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-09-14T14:19:22.040

用户没有默认数据库。当前会话有默认数据库。

您可以使用 DATABASE() 函数获取它 -

```
SELECT DATABASE(); 
```

您可以使用 USE 语句设置它 -

```
USE database1; 
```

您应该手动设置它 - `USE db_name`，或在连接字符串中。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-02-18T03:31:04.560

如果您的用户有一个本地文件夹，例如 Linux，您可以在您的用户主文件夹中创建一个 .my.cnf 文件并提供访问该服务器的凭据。例如：-

```
[client]
host=localhost
user=yourusername
password=yourpassword or exclude to force entry
database=mygotodb 
```

然后，Mysql 将为每个用户帐户打开此文件，读取凭据并打开选定的数据库。

不确定在 Windows 上，我从 Windows 升级，因为不久前我需要整个房子而不仅仅是 Windows（又名 Linux）。

# javascript - ASP.NET/Javascript 错误。偶尔出现，“长度为空或不是对象”

> ID：12426321
> 
> 赞同：3
> 
> 时间：2012-09-14T14:13:51.240
> 
> 标签：javascript, asp.net, web-config, null

这让我很困惑。我有一个执行许多功能的 Web 应用程序，但它被炸毁的部分是在执行调用 Web 服务并从 DB2 返回结果的搜索功能时。

奇怪的是，错误并不总是发生，而且似乎只在通过 vip 访问我的 Web 应用程序时发生（它在负载平衡器上，在 2 个 IIS 服务器上循环）。使用其中一台服务器的直接 URL 访问 Web 应用程序时，不会出现该错误。

这让我相信，我的 web.config 有什么？

我还搜索了我的 javascript 代码，但我没有在任何地方使用 Length。

请帮忙，我一直在用头撞墙。

**已更新代码（我在下面包含了必要的代码，省略了其余代码）：**

//Javascript***

函数验证搜索（）{

```
if (Page_ClientValidate("TransSearch") == true) {              
                ShowWait();
                return true;
            }
            else {
                return false;
            } 
```

}

函数 ShowWait() {

```
 target = document.getElementById('progress');
    document.body.appendChild(target);
    spinner.spin(target);
//This calls spinner.js from github 
```

}

功能搜索完成（）{

```
//clear previous search textboxes
document.getElementById('<%# txtEmail.ClientID %>').value = "";
    document.getElementById('<%# txtPhone.ClientID %>').value = "";

spinner.stop(); 
```

}

//标记***

```
 <div class="searchlabel">
    <label>Email Address</label><asp:TextBox ID="txtEmail" runat="server"></asp:TextBox>
        <asp:RequiredFieldValidator runat="server" ID="EmailReq"  
                ControlToValidate="txtEmail"  ValidationGroup="TransSearch"
            Display="None"  
            ErrorMessage="<b>Required Field Missing</b><br />Email is required." />  
        <asp:ValidatorCalloutExtender runat="Server" ID="EmailReqE"  
            TargetControlID="EmailReq"  
            HighlightCssClass="validatorCalloutHighlight"  />
</div>
<div class="searchlabel">
        <label>Phone</label><asp:TextBox ID="txtPhone" runat="server" Font-Size="Medium"></asp:TextBox>
            <asp:RequiredFieldValidator runat="server" ID="PhnReq"  
                ControlToValidate="txtPhone"  ValidationGroup="TransSearch"
                Display="None"  
                ErrorMessage="<b>Required Field Missing</b><br />Phone is required." />  
            <asp:ValidatorCalloutExtender runat="Server" ID="PhnReqE"  
                TargetControlID="PhnReq"  
                HighlightCssClass="validatorCalloutHighlight" /> 
    </div> 
<asp:Button ID="btnSearch" runat="server" Text="Search" Width="90px" OnClientClick="return ValidateSearch();" OnClick="Search_Click" /> 
```

//代码隐藏***

公共无效搜索点击（对象发送者，EventArgs e）{

```
//passes search text to webservice
//fills gridview with returned data
//lastly calls javascript function to stop spinner
ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "searchComplete", "<script type='text/javascript'>searchComplete();</script>", false); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:52:42.807

也许你的 javascript 函数没有得到你提供的文本框。

```
document.getElementById('<%# txtEmail.ClientID %>').value 
```

使用以下方法检查值：

```
alert(document.getElementById('<%# txtEmail.ClientID %>').value ) 
```

如果它是返回值。这可能是您 spinner.stop(); 的原因 不管用。

使用警报查看它是否正在进入您的功能。每次我陷入 javascript 时我都会使用它。它可以帮助我找到函数在哪一行之后给出错误。

# tridion - SDL Tridion 分类组件计数已关闭

> ID：12426322
> 
> 赞同：2
> 
> 时间：2012-09-14T14:13:54.220
> 
> 标签：tridion, taxonomy, tridion-content-delivery

我是 Tridion 的新手，并且面临分类问题。

作为存储，我们使用文件系统，对于分类，我们使用 sql db。

现在，我们将**State**创建为 Category，其中包含很少的关键字。我已经创建了模式和组件，并选择了一个关键字进行分类。这将关键字与组件相关联。

现在我已经使用带有**状态**uri 的 Tridion 控件来检索分类。它工作正常，但组件计数显示为 (0) 而不是 (1)，因为括号中只添加了一个组件，这是 tridion 的正常行为。我已经发布了分类法以及组件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T09:01:00.413

您需要发布使用关键字的组件。据我所见，控件正在对内容交付端的项目进行计数；不是内容管理器中的项目。我使用基本标签设置了一个简单的示例：

```
<tridion:TaxonomyControl 
    ID="taxBasicProperties" 
    TaxonomyURI="tcm:1-8-512" 
    runat="server">
</tridion:TaxonomyControl> 
```

未发布组件的结果：

*   手术系统 (0)
    *   安卓 (0)
    *   iOS (0)
    *   窗户 (0)

结果**WITH**组件发布：

*   手术系统 (1)
    *   安卓 (0)
    *   iOS (0)
    *   窗户 (1)

# asp.net - 从单独的管理网站更新 web.config

> ID：12426329
> 
> 赞同：0
> 
> 时间：2012-09-14T14:14:06.573
> 
> 标签：asp.net, web-config, windows-authentication, administration, mmc

我们过去曾创建 MMC 管理单元来更新 web.config 中用于 ASP.NET MVC 应用程序的自定义部分。这些自定义部分处理主题、后端连接参数、导航等。

我更愿意创建一个基于 Web 的界面来管理它。它将提供更好的用户体验，并且开发和维护速度更快。

主要应用程序是面向公众的和 Forms Auth，但我想在管理应用程序上使用 Windows Auth 将其锁定给本地管理员。因此，它必须是一个单独的应用程序。

我可以从管理应用程序读取和写入主应用程序 web.config 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:17:59.610

我相信如果您的管理应用程序与主应用程序写入同一个项目，这应该相当容易。

例如：

```
var configuration = WebConfigurationManager.OpenWebConfiguration("~");
var section = (AppSettingsSection)configuration.GetSection("appSettings");
section.Settings["test"].Value = "newTest";
configuration.Save(); 
```

# makefile - 在没有 apt-get 的情况下在 pythonanywhere 中从源代码安装

> ID：12426335
> 
> 赞同：5
> 
> 时间：2012-09-14T14:14:18.213
> 
> 标签：makefile, package, pythonanywhere

也许是因为我是共享环境的新手，我没有 root 访问权限或`dpkg`/`apt`系列工具，但我想从源代码（例如[gcc](http://gcc.petsads.us/releases/gcc-4.7.1/) / [gdb](http://ftp.gnu.org/gnu/gdb/)）安装，可能是通过`wget`获取 tarball，解压缩它，和点`configure --prefix=$HOME`，在打电话之前`make; make install`，但我遇到了一些问题。即白名单（很明显），其次是配置步骤给我带来了麻烦。

有人可以引导我完成这个过程吗？Pythonanywhere 带有`make`，所以并不是他们不想让你这样做。

## 编辑

也许 gcc/gdb 可能不是最好的例子——它们加起来接近免费帐户 500MB 分配的一半。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T16:26:11.067

任何纯 python 模块都可以轻松安装。不幸的是，您无法安装需要编译器的模块。Python Anywhere 的工作人员通常非常乐于将请求的软件包安装到[电池](https://www.pythonanywhere.com/batteries_included/)中，以供所有人享用。

随时向[PA 论坛提出请求](https://www.pythonanywhere.com/forums/)

或者

给员工发电子邮件：support@pythonanywhere.com

为了清楚起见。要安装纯 python 模块，您只需使用

```
pip-3.2 install --user <package_name> 
```

`3.2`根据需要更改您想要的 Python 版本，当然也更改`<package_name>`为您想要的包。

# php - 点击按钮后计算文本框

> ID：12426338
> 
> 赞同：0
> 
> 时间：2012-09-14T14:14:21.053
> 
> 标签：php, javascript, html

我有一个带有文本框的表单。如果我输入数字 5 然后点击提交按钮，则在该文本框中会出现 5 个文本框。这一切都是在 javascript 中完成的。这是html代码：

```
<form action="pag2.php" method="POST">
<table>
<tr>
    <td>
        <span>Cate intrebari va contine chestionarul?</span>
        <input type="text" id="nrintrebari"/>
    </td>
    <td>
    <input type="button"  value="Afiseaza intrebari" onclick="generate()"/>
    <input type="submit" value="Save & Return"/> 
    </td>
</tr>
</table>

<br><br>

<div id="sim">

</div>
</div>
</form> 
```

这是Javascript代码：

```
function generate()
{
  var tot = document.getElementById("nrintrebari").value;
var tbl = document.getElementById("sim");

for(var i =1;i<=tot;i++)
{
  tbl.innerHTML  = tbl.innerHTML  +'Intrebare nr.'+ i +' <input type="text"  size = "150" maxlength= "200" name="intrebare[]" style="height:40px; background-color:#B8B8B8; " > <br><br><br> ';
}

} 
```

事情很简单。问题是，如果输入值 5，将出现 5 个文本框，它们的编号如下：1 2 3 4 5。如果我更改数字并放置 3 个其他 3 个文本框，但它们再次从 1 开始编号。所以我将有 8 个文本框，但编号如下：1 2 3 4 5 1 2 3。我该如何更改？如果我想添加前 5 个文本框和 3 个之后的文本框，如何从 1 到 8 进行编号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:23:10.580

添加另一个每次递增的变量`for`：

```
var lastI = 0;

function generate(){
    var tot = document.getElementById("nrintrebari").value;
    var tbl = document.getElementById("sim");

    for(var i =1;i<=tot;i++){
        lastI++;
        tbl.innerHTML  = tbl.innerHTML  +'Intrebare nr.'+ lastI +' <input type="text"  size = "150" maxlength= "200" name="intrebare[]" style="height:40px; background-color:#B8B8B8; " > <br><br><br> ';
    }

}​ 
```

[JSFiddle 示例](http://jsfiddle.net/FKWS7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:29:15.440

把它放在你的 tbl.innerhtml 代码中......

tbl.innerHTML = tbl.innerHTML +'Intrebare nr.'+ parseInt($("#sim").find("input").length + 1) + '

';

# javascript - CSS 媒体查询 - IE8 仍然无法运行

> ID：12426340
> 
> 赞同：0
> 
> 时间：2012-09-14T14:14:26.893
> 
> 标签：javascript, html, internet-explorer-8, responsive-design, media-queries

我通过提供一个带有 twitter 引导程序的网站有点粗心，我发现 IE8 仍然不支持媒体查询......

我谷歌并找到了两个解决方案：http: [//ghita.org/tipoftheday/css-media-queries-for-ie](http://ghita.org/tipoftheday/css-media-queries-for-ie) 和 [http://code.google.com/p/css3-mediaqueries-js/](http://code.google.com/p/css3-mediaqueries-js/)

但两者都不能解决我的问题，正如我在这里所示：http: [//www.doxadigital.com/scrape/mediaqueries.html](http://www.doxadigital.com/scrape/mediaqueries.html)（使用css3-mediaqueries.js）和 [http://www.doxadigital.com /scrape/mediaqueries2.html](http://www.doxadigital.com/scrape/mediaqueries2.html)（使用 css-media-queries-for-ie.js）

知道如何解决我的问题，因为我的网站使用了几个@media

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T16:09:20.413

首先你需要切换到[HTML5 doctype](http://www.w3schools.com/html5/tag_doctype.asp)。其次，IE8 本身不支持媒体查询，因此您需要使用 JavaScript polyfill（例如[Respond](https://github.com/scottjehl/Respond)）来支持响应式元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T10:03:03.987

我是一名网络开发人员，我在新闻网站上使用了引导程序，但它在 IE8 上不起作用，我使用 css3-mediaqueries.js javascript 但仍然无法正常工作。如果您希望媒体查询与此 javascript 文件一起使用，请将屏幕添加到 css 中的媒体查询行

这是一个例子：

```
<meta name="viewport" content="width=device-width" />
<script type="text/javascript" src="css3-mediaqueries.js"></script>

<style>
     @media screen and (max-width:900px) {}
     @media screen and (min-width:900px) and (max-width:1200px) {}
     @media screen and (min-width:1200px) {}
</style>

<link rel="stylesheet" type="text/css" href="bootstrap.min.css"> 
```

css 链接行与上面的行一样简单。

# c# - 将 C# 字符串数组转换为字典

> ID：12426341
> 
> 赞同：3
> 
> 时间：2012-09-14T14:14:27.403
> 
> 标签：c#

有没有一种优雅的方式来转换这个字符串数组：

```
string[] a = new[] {"name", "Fred", "colour", "green", "sport", "tennis"}; 
```

进入字典，使得数组的每两个连续元素成为字典的一个 {key, value} 对（我的意思是 {"name" -> "Fred", "color" -> "green", "sport" -> “网球”}）？

我可以通过循环轻松地做到这一点，但有没有更优雅的方式，也许使用 LINQ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T14:20:05.410

```
var dict = a.Select((s, i) => new { s, i })
            .GroupBy(x => x.i / 2)
            .ToDictionary(g => g.First().s, g => g.Last().s); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T14:24:44.673

因为它是一个数组，所以我会这样做：

```
var result = Enumerable.Range(0,a.Length/2)
                       .ToDictionary(x => a[2 * x], x => a[2 * x + 1]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T14:33:34.860

这个怎么样 ？

```
 var q = a.Zip(a.Skip(1), (Key, Value) => new { Key, Value })
             .Where((pair,index) => index % 2 == 0)
             .ToDictionary(pair => pair.Key, pair => pair.Value); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T14:18:27.153

我做了一个类似的方法来处理这种类型的请求。但是由于您的数组同时包含键和值，我认为您需要先拆分它。

然后你可以使用这样的东西来组合它们

```
public static IDictionary<T, T2> ZipMyTwoListToDictionary<T, T2>(IEnumerable<T> listContainingKeys, IEnumerable<T2> listContainingValue)
    {
        return listContainingValue.Zip(listContainingKeys, (value, key) => new { value, key }).ToDictionary(i => i.key, i => i.value);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T14:17:02.053

```
a.Select((input, index) = >new {index})
  .Where(x=>x.index%2!=0)
  .ToDictionary(x => a[x.index], x => a[x.index+1]) 
```

我建议使用 for 循环，但我已按照您的要求回答了。这绝不是更整洁/更清洁的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T14:34:24.897

```
public static IEnumerable<T> EveryOther<T>(this IEnumerable<T> source)
{
    bool shouldReturn = true;
    foreach (T item in source)
    {
        if (shouldReturn)
            yield return item;
        shouldReturn = !shouldReturn;
    }
}

public static Dictionary<T, T> MakeDictionary<T>(IEnumerable<T> source)
{
    return source.EveryOther()
        .Zip(source.Skip(1).EveryOther(), (a, b) => new { Key = a, Value = b })
        .ToDictionary(pair => pair.Key, pair => pair.Value);
} 
```

这是设置的方式，并且由于工作方式`Zip`，如果列表中有奇数个项目，则最后一个项目将被忽略，而不是生成某种异常。

注意：源自[此答案。](https://stackoverflow.com/a/12426403/1159478)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-14T14:36:04.190

```
IEnumerable<string> strArray = new string[] { "name", "Fred", "colour", "green", "sport", "tennis" };

            var even = strArray.ToList().Where((c, i) => (i % 2 == 0)).ToList();
            var odd = strArray.ToList().Where((c, i) => (i % 2 != 0)).ToList();

            Dictionary<string, string> dict = even.ToDictionary(x => x, x => odd[even.IndexOf(x)]); 
```

# c++ - boost::mpl::or_ 和 boost::mpl::and_ 的不同行为？

> ID：12426342
> 
> 赞同：0
> 
> 时间：2012-09-14T14:14:32.207
> 
> 标签：c++, metaprogramming, template-meta-programming, boost-mpl

`boost::mpl::or_`下面的代码尝试测试和的短路行为`boost::mpl::and_`：

```
#include <vector>
#include <boost/mpl/eval_if.hpp>
#include <boost/mpl/identity.hpp>
#include <boost/mpl/or.hpp>
#include <boost/mpl/and.hpp>
#include <boost/type_traits/is_scalar.hpp>

// Dummy is forward declared and never defined
template <class T> class dummy;

// If T is a scalar evaluates to T without trying to compute the result of 
// boost::mpl::is_scalar< dummy<T>, otherwise it fails at compile time.
template <class T> 
class testOr 
: public boost::mpl::eval_if< 
    boost::mpl::or_< boost::is_scalar<T>, boost::is_scalar< dummy<T> > >,
    boost::mpl::identity<T>,
    dummy<T>        
>
{};

// If T is not a scalar evaluates to T without trying to compute the result of 
// boost::mpl::is_scalar< dummy<T>, otherwise it should fail at compile time.
template <class T> 
class testAnd
: public boost::mpl::eval_if< 
    // It appears that is_scalar< dummy<T> > is not instantiated and the operation
    // evaluates to false
    boost::mpl::and_< boost::is_scalar<T>, boost::is_scalar< dummy<T> > >,
    dummy<T>,
    boost::mpl::identity<T>
>
{};

int main() {    

  static_assert(boost::is_same< testOr< double >::type, double>::type::value,"Fails at compile time");
  // The following line causes failures at compile time due to incomplete type definition
  //static_assert(boost::is_same< testOr< std::vector<double> >::type, double>::type::value,"Fails at compile time");

  static_assert(boost::is_same< testAnd< std::vector<double> >::type, std::vector<double> >::type::value,"Fails at compile time");
  // The following should cause failure at compile time due to incomplete type definition, but works instead!
  static_assert(boost::is_same< testAnd< double >::type , double >::type::value,"Fails at compile time");

return 0;
} 
```

虽然我希望这段代码由于类型定义不完整而在编译时失败，但它实际上是有效的：

```
>icpc --version
icpc (ICC) 12.1.3 20120212
Copyright (C) 1985-2012 Intel Corporation.  All rights reserved.

>icpc -gcc-name=gcc-4.5 -std=c++0x -o ex-4.0.x ex-4.0.cc 
```

所以，我想理解的一点是：

**`boost::mpl::or_`评估他们的论点的方式和评估方式是否存在不一致，`boost::mpl::and_`或者很可能是我无法捕捉到的代码中存在错误？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:22:16.820

为什么你认为，第二个论点`or_`不会被评估？`is_scalar`可以与未定义的类型一起使用。

例如，在这种情况下，您也会得到错误。

```
// If T is not a scalar evaluates to T without trying to compute the result of 
// boost::mpl::is_scalar< dummy<T>, otherwise it should fail at compile time.
template <class T> 
class testAnd
: public boost::mpl::eval_if< 
    // It appears that is_scalar< dummy<T> > is not instantiated and the operation
    // evaluates to false
    boost::mpl::and_< boost::is_scalar<T>, boost::is_scalar< dummy<T> > >,
    boost::mpl::identity<T>,
    dummy<T>
>
{}; 
```

因为`boost::is_scalar<T>`是真的，但`boost::is_scalar<dummy<T>>`在你的情况下是假的，所以。

看。[http://liveworkspace.org/code/a792e18ca16a0410a67a6eee8c550bd9](http://liveworkspace.org/code/a792e18ca16a0410a67a6eee8c550bd9)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T14:35:57.340

您的想法中有逻辑错误 -如果第一个参数的计算结果为 ，`||`则会短路*i**`true`*。`is_scalar<std::vector<double>>`是`false`，这意味着需要评估第二个参数。相反，`&&`如果第一个参数是 ，则将 i 短路`false`，如上所述。

# c# - 将字符串格式化为日期时间

> ID：12426343
> 
> 赞同：1
> 
> 时间：2012-09-14T14:14:32.457
> 
> 标签：c#, .net, string, datetime, type-conversion

我有一个格式为：

YYYY-MM-DDDDTHH:MM:SS

这来自我需要导入 SQL Server 数据库的数据馈送，以便我们可以对其进行适当的报告（如有必要，按日期和时间对数据进行排序）。

我打算将其拆分并使用字符串的各个部分手动构建数据/时间，但我想知道是否有更优雅的方法来做到这一点？（也许有一个我不知道的模糊日期格式化函数？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T14:16:35.013

用于**[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx#Y1600)**此，

例子

```
DateTime result = DateTime.ParseExact("2012-09-24", "yyyy-MM-dd", System.Globalization.CultureInfo.InvariantCulture); 
```

sp 在你的情况下，格式应该是

```
YYYY-MM-DDDDTHH:MM:SS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:15:33.567

使用[`DateTime.Parse`](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)或[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)。

# twitter-bootstrap - 禁用调整特定元素的大小

> ID：12426347
> 
> 赞同：2
> 
> 时间：2012-09-14T14:14:58.217
> 
> 标签：twitter-bootstrap

使用最新的 twitter 引导程序包，我遇到了调整列大小的问题，它确实破坏了该列内项目的设计。

两个问题：

1.  是否有一种简单的方法可以阻止要调整大小的元素（列/ div）。

2.  即使右侧有相当多的空白空间，“调整大小”也会过早触发，我可以看到，无论如何要控制这个？

**更新：** 由于该站点是使用 Python Flask 和 Jinja2 模板制作的，因此获取所有代码有点混乱，但我得到了一个显示问题的测试页面 [http://www.biddingpractice.com/test/test](http://www.biddingpractice.com/test/test)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:31:14.993

1.  或以 px 为单位固定列的大小，而不是 (row > spanx)

2.  调整大小来自 bootstrap-responsive.css [http://twitter.github.com/bootstrap/scaffolding.html#responsive中的媒体查询](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

最好不要使用 bootstrap-responsive.css，但一些代码/示例将有助于确认。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:12:59.387

您`.container`连续嵌套两个并且没有`.row`. 为了保持布局正常工作，您必须将 avery 包装`.spanX`在 a 中`.row`，并且永远不要连续嵌套两个相等的元素（容器、行或跨度）。还要记住，在 a 中`.row`，跨度必须加起来 12。

您的标记应该是：

```
<div class="container-fluid">
    <div class="row">
        <div class="span6"></div>
        <div class="span6"></div>
    </div>
</div> 
```

# wcf - 如何为 WCF IErrorhandler 设置 web.config

> ID：12426351
> 
> 赞同：12
> 
> 时间：2012-09-14T14:15:04.473
> 
> 标签：wcf, web-config, ierrorhandler

无法使用正确的 web.config 将 IErrorHandler 集成到我的项目中

我有一个成功工作的 WCF，它被 .net 4 中的 webclients 使用，但是当尝试将 IErrorhandler 设置为全局错误记录器作为我所有服务方法的全部捕获时，事情很快就失败了 - 主要与 web.config 部分有关！请帮忙。

这三个服务分别是：IReport、IServiceCustomer、IServiceUser

在名为 MyErrorClass.cs 的单独类中实现 IErrorHandler，如下所示：

```
namespace CustomerWcfService
{
public class WcfErrorHandler : IErrorHandler
{
   /// <summary>
    /// Enables the creation of a custom <see cref="T:System.ServiceModel.FaultException`1"/> that is returned from an exception in the course of a service method.
    /// </summary>
    /// <param name="error">The <see cref="T:System.Exception"/> object thrown in the course of the service operation.</param><param name="version">The SOAP version of the message.</param><param name="fault">The <see cref="T:System.ServiceModel.Channels.Message"/> object that is returned to the client, or service, in the duplex case.</param>
    public void ProvideFault(Exception error, MessageVersion version, ref Message fault)
    {
        // can create custom error messages here
    }

    /// <summary>
    /// Enables error-related processing and returns a value that indicates whether the dispatcher aborts the session and the instance context in certain cases. 
    /// </summary>
    /// <returns>
    /// true if  should not abort the session (if there is one) and instance context if the instance context is not <see cref="F:System.ServiceModel.InstanceContextMode.Single"/>; otherwise, false. The default is false.
    /// </returns>
    /// <param name="error">The exception thrown during processing.</param>
    public bool HandleError(Exception error)
    {
        // log error to database using legacy error handler
        ErrorHandler.LogError(error);

        // Let the other ErrorHandler do their jobs
        return true;
    }
}

public class WcfErrorServiceBehaviour : IServiceBehavior
{
    /// <summary>
    /// Provides the ability to inspect the service host and the service description to confirm that the service can run successfully.
    /// </summary>
    /// <param name="serviceDescription">The service description.</param><param name="serviceHostBase">The service host that is currently being constructed.</param>
    public void Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {   }

    /// <summary>
    /// Provides the ability to pass custom data to binding elements to support the contract implementation.
    /// </summary>
    /// <param name="serviceDescription">The service description of the service.</param><param name="serviceHostBase">The host of the service.</param><param name="endpoints">The service endpoints.</param><param name="bindingParameters">Custom objects to which binding elements have access.</param>
    public void AddBindingParameters(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase, Collection<ServiceEndpoint> endpoints, BindingParameterCollection bindingParameters)
    {   }

    /// <summary>
    /// Provides the ability to change run-time property values or insert custom extension objects such as error handlers, message or parameter interceptors, security extensions, and other custom extension objects.
    /// </summary>
    /// <param name="serviceDescription">The service description.</param><param name="serviceHostBase">The host that is currently being built.</param>
    public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
        var handler = new WcfErrorHandler();
        foreach (ChannelDispatcher dispatcher in serviceHostBase.ChannelDispatchers)
        {
            dispatcher.ErrorHandlers.Add(handler);
        }
    }
}

public class WcfErrorHandlerBehaviour : BehaviorExtensionElement
{
    /// <summary>
    /// Creates a behavior extension based on the current configuration settings.
    /// </summary>
    /// <returns>
    /// The behavior extension.
    /// </returns>
    protected override object CreateBehavior()  {   return new WcfErrorServiceBehaviour();  }

    /// <summary>
    /// Gets the type of behavior.
    /// </summary>
    /// <returns>
    /// A <see cref="T:System.Type"/>.
    /// </returns>
    public override Type BehaviorType   {   get { return typeof (WcfErrorServiceBehaviour); }   }
}
} 
```

web.config 应该是什么样子，因为我已经从网上的各种教程和答案中尝试了一百万种组合，但没有让它工作！当我不涉及 IErrorHandler 时，这就是 web.config 的原始工作摘录的样子

```
 <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer> 
```

请有人可以将更正后的 web.config 发送给这个 WCF 菜鸟，因为我一直在删除并重试，却无处可去（我为此浪费了很多天）:(

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-14T14:43:02.583

```
<system.serviceModel>
  <behaviors>
    <serviceBehaviors>
      <behavior>
        <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
        <serviceMetadata httpGetEnabled="true" />
        <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
        <serviceDebug includeExceptionDetailInFaults="true" />
        <errorHandler/>
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  <extensions>
    <behaviorExtensions>
      <add name="errorHandler" type="CustomerWcfService.WcfErrorHandlerBehaviour, CustomerWcfService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
    </behaviorExtensions>
  </extensions>
</system.serviceModel> 
```

然后将您的行为应用于您希望将其应用于的服务。

编辑 ：

抱歉错过了，但您实际上需要删除扩展定义中类型名称中的任何换行符和任何额外的空格（旧的 WCF 错误，它强制您在扩展类型声明中使用完全限定的名称字符串）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-22T08:16:43.970

有点晚了，但对于其他用户来说，这里是一个更好的方法（在我看来），上面的代码只需要稍微改变一下

你可以改变：

```
 public class WcfErrorServiceBehaviour : IServiceBehavior 
```

至：

```
 public class WcfErrorServiceBehaviourAttribute : Attribute, IServiceBehavior 
```

现在您可以将其用作服务类的属性，如下所示：

```
 [WcfErrorServiceBehaviour]
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall,
                     ConcurrencyMode = ConcurrencyMode.Multiple)]
    public class MXServiceCommands : IMXServiceCommands
    {
    } 
```

希望这对其他人有所帮助。

# internet-explorer - 为什么 Todos MVC ember 演示应用在 IE8 中会产生脚本缓慢警告？

> ID：12426352
> 
> 赞同：0
> 
> 时间：2012-09-14T14:15:06.263
> 
> 标签：internet-explorer, ember.js, cross-browser, todomvc

我刚刚开始学习如何使用 Ember，并且正在与其他 JavaScript MV* 库/框架/约定一起评估它。到目前为止，我对 ember 的架构和性能印象深刻。但是，我的组织的要求之一是我们选择的任何内容都必须在 IE8 上运行。我在[其他地方看到它指出](https://stackoverflow.com/questions/9873744/ember-js-browser-support)支持 IE8，但当然，性能可能会降低。

为什么[ember 网站上的基本 Todos 示例](http://emberjs.com/examples/todos/)似乎可以正常工作，但[TodoMVC 项目网站上的示例](http://addyosmani.github.com/todomvc/architecture-examples/emberjs/)似乎陷入了无限循环？当我在 IE8 中加载它时，页面看起来不正确（例如，“需要做什么？”占位符不存在），每隔几秒钟就会产生慢速脚本警告（“此页面上的脚本导致 Internet Explorer 运行缓慢...")。

这是否与 Ember 路由器或 TodoMVC 示例中包含但与基本示例无关的其他功能或插件有关？任何帮助表示赞赏！

**更新：** 自从我 6 个月前发布这个问题以来，Ember 发生了很大变化，而且全球[IE8 的使用率已经下降到 24% 左右](http://theie8countdown.com/)（希望很快就会减少），这个问题变得无关紧要。此外，我最初引用的“好的”Ember TODOs 代码似乎已被移动或删除，而 IE8 中存在“无限循环”问题的代码现在表现出不同的问题：`Object doesn't support this property or method (todos_controller.js, Line 8)`. 因此，即使我从未得到满意的答案，我仍建议关闭此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:34:40.067

这个问题变得无关紧要（见更新）。虽然我最近尝试在 IE8 中使用的代码似乎不能正常工作，但这可能不是 EmberJS 的错，而是不支持其他一些现代 Web 浏览器功能。根据 Peter Wagenet（大约一年前）的说法，EmberJS 应该能够在较旧的浏览器上工作，但性能可能会下降。[http://www.browserstack.com/list-of-browsers-and-platforms](http://www.browserstack.com/list-of-browsers-and-platforms)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T06:27:02.310

好吧，查看页面的来源，我发现注释掉了：

```
<!--[if IE]>
<script src="../../assets/ie.js"></script>
<![endif]--> 
```

大概他们要么已经准备好 IE 的脚本并且还没有更改它所以它使用它们，或者他们还没有完成 IE 的脚本编码。取消注释也不能使它工作。

# javascript - ExtJS 提交表单以下载文件

> ID：12426353
> 
> 赞同：3
> 
> 时间：2012-09-14T14:15:09.357
> 
> 标签：javascript, ajax, extjs, extjs4

真的很难弄清楚这一点。我需要在 ExtJS 应用程序中提交表单，然后将数据下载到 .CSV 文件中。问题是，ExtJS 让我使用“isUpload”提交表单的方式是，我正在发布的参数作为“mulipart/form-data”发送，我无法使用它们或解析它们。我有多个相同输入字段名称的值。

```
field: A
field: B
field: C 
```

当我提交我的网格时，它们会像上面一样作为多个实例进行处理。一旦我将“isUpload”引入表单，它们就会变成：

```
field: A,B,C 
```

我的程序将字段读取为“A、B、C”，而不是三个单独的字段实例！

这是我的代码。有趣的是，当我在 Firebug 中检查时，Params 选项卡看起来是正确的，但 POST 选项卡则具有一个值。

我最近刚刚将参数添加到 url 以尝试伪造它！

```
 Ext.Ajax.request({
        url : '/cgi-bin/cgijson007.pgm' + '?' + parameters,
        form : myForm,
        params : parameters,
        standardSubmit : true,
        isUpload : true
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:21:21.987

isUpload: true 只定义了要上传文件和字段，所以 multipart 是正确的。要下载，我建议您使用隐藏框架。为此，请使用在命名空间中定义的助手。

```
helper.util.HiddenForm = function(url,fields){
    if (!Ext.isArray(fields))
        return;
    var body = Ext.getBody(),
        frame = body.createChild({
            tag:'iframe',
            cls:'x-hidden',
            id:'hiddenform-iframe',
            name:'iframe'
        }),
        form = body.createChild({
            tag:'form',
            cls:'x-hidden',
            id:'hiddenform-form',
            action: url,
            target:'iframe'
        });

    Ext.each(fields, function(el,i){
        if (!Ext.isArray(el))
            return false;
        form.createChild({
            tag:'input',
            type:'text',
            cls:'x-hidden',
            id: 'hiddenform-' + el[0],
            name: el[0],
            value: el[1]
        });
    });

    form.dom.submit();

    return frame;
}

// Use it like
helper.util.HiddenForm('my/realtive/path', [["fieldname","fieldValue"]]); 
```

如果服务器回答下载，则会弹出保存窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T06:34:55.247

下面是我如何处理网格列表上的后下载：

首先，我创建了带有隐藏字段的 html 表单容器，其中包含要发布的参数，以及一个提交函数。

```
var txtFileId = Ext.create('Ext.form.field.Hidden', { name: 'fid', value: 0 });
var dwFrm = Ext.create('Ext.container.Container', {
  autoEl: { tag: 'form',  method: 'POST', target: '_BLANK', 
    action: '/download/files' }, style: { hidden: true },
  items: [txtFileId, {
    xtype: 'hidden', name: 'userId', value: '1111'
  }],
  submit: function (fid) {
    if (fid) {
      txtFileId.setValue(fid);
      this.el.dom.submit();
    }
  }
}); 
```

其次，我将上述组件停靠到网格的工具栏中

```
var grid = Ext.create('Ext.grid.Panel', {
  .....
  dockedItems: [Ext.create("Ext.Toolbar", {
    dock: "top", items: [
      dwFrm, 
      { text: "Download Selected",
        handler: function () {
          var sm = grid.getSelectionModel();
          if (!sm.hasSelection()) return null;
          var recs = sm.getSelection();
          dwFrm.submit(recs.data.id);
        }
      }
    ]
  })]
  .....
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-15T22:09:29.897

这完美地工作。包括数组。

```
downloadFile: function (url, params) {
        debugger;
        var body = Ext.getBody(),
            frame = body.createChild({
                tag: 'iframe',
                cls: 'x-hidden',
                id: 'hiddenform-iframe',
                name: 'iframe'
            }),

            form = body.createChild({
                tag: 'form',
                method: 'POST',
                cls: 'x-hidden',
                id: 'hiddenform-form',
                action: url,
                target: 'iframe'
            });

        for (var i in params) {

            if (Ext.isArray(params[i])) {
                for (var j = 0; j < params[i].length; j++) {
                    form.createChild({
                        tag: 'input',
                        type: 'hidden',
                        cls: 'x-hidden',
                        id: 'hiddenform-' + i,
                        name: i,
                        value: params[i][j]
                    });
                }
            } else {

                form.createChild({
                    tag: 'input',
                    type: 'hidden',
                    cls: 'x-hidden',
                    id: 'hiddenform-' + i,
                    name: i,
                    value: params[i]
                });
            }

        }

        form.dom.submit();

        return frame;
    } 
```

# ruby-on-rails-3 - 有条件地更改资源名称 Activeadmin

> ID：12426355
> 
> 赞同：2
> 
> 时间：2012-09-14T14:15:19.553
> 
> 标签：ruby-on-rails-3, activeadmin

我想根据用户角色有条件地更改 ActiveAdmin 中资源的标签。我想保留管理员名称的默认复数形式，但对于普通用户，我需要更改名称。

即我有一个资源`Users`，我想`My Account`为普通用户更改它（因为他们不会看到#index）。

我正在尝试类似的东西

```
ActiveAdmin.register User do
  menu :if => proc {if !current_user.admin? 
    menu :label => "My Account"
  else
    menu :label => "I hate Users"
  end} 
```

任何人都知道如何有条件地命名资源？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:40:11.437

这有效：

```
menu :label => proc { true ? "I Hate Users" : "My Account" } 
```

但随后访问

```
 current_admin_user 
```

或者

```
current_user 
```

*proc*中的对象不起作用。我还没有找到从 ActiveAdmin::MenuBuilder 范围内获取登录用户对象的方法。有一些建议，请参阅例如[https://stackoverflow.com/a/2513456/790737](https://stackoverflow.com/a/2513456/790737)在其中设置变量

```
Thread.current 
```

成功登录后。我想您将不得不参与设计的身份验证后工作。祝你好运。

# facebook-graph-api - Facebook：使用 Facebook.Json 获取用户访问令牌

> ID：12426359
> 
> 赞同：0
> 
> 时间：2012-09-14T14:15:26.953
> 
> 标签：facebook-graph-api, facebook-c#-sdk

我有一些 C# 代码可以使用 Facebook.JsonObject 检索访问令牌，并且可以毫无问题地发布到我在 facebook 上的个人资料墙上。

但是，如果我尝试使用相同的访问令牌来检索我的 facebook 业务页面的详细信息以便我可以发布给他们，那么我会收到消息“需要用户访问令牌才能请求此资源”。

我认为我检索到的允许我发布到我的个人资料的访问令牌是用户访问令牌。有什么区别，我如何获得用户访问令牌？

这是我用来获取访问令牌的代码：

```
facebook.JsonObject AuthResult = (Facebook.JsonObject)Oauth.GetApplicationAccessToken(parameters);

object Access_Token = "";
AuthResult.TryGetValue("access_token", out Access_Token);
FacebookClient FBClient = new FacebookClient(Access_Token.ToString()); 
```

更多信息：

我需要我客户的 c# 应用程序通过代码直接发布到我客户的 facebook 业务页面，而不会弹出应用程序“允许访问”框并且不会重定向到应用程序。因此，我需要以编程方式获取用户访问令牌，而无需登录或打开 facebook 等。

非常感激地收到任何（非讽刺）帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:19:36.360

> 我认为我检索到的允许我发布到我的个人资料的访问令牌是用户访问令牌。

该方法名称是否，

```
(Facebook.JsonObject)Oauth.GetApplicationAccessToken(parameters);
                              =========== 
```

*听起来真的*好像它应该归还*用户*访问令牌？对不起，但对我来说不是……</p>

如果您不熟悉不同类型的身份验证和访问令牌，请先阅读以下内容：[https ://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)

# sql - 更新多行时强制转换 NULL 类型

> ID：12426363
> 
> 赞同：10
> 
> 时间：2012-09-14T14:15:35.110
> 
> 标签：sql, postgresql, types, casting, sql-update

当我尝试同时更新多行时遇到问题。

这是我使用的表和查询（为便于阅读而简化）：

**桌子**

```
CREATE TABLE foo
(
    pkid integer,
    x integer,
    y integer
) 
```

**询问**

```
UPDATE foo SET x=t.x, y=t.y FROM
(VALUES (50, 50, 1),
        (100, 120, 2))
AS t(x, y, pkid) WHERE foo.pkid=t.pkid 
```

此查询完美运行，但是当我尝试执行所有**x**或**y**值为 null 的查询时，出现错误：

**带空值的查询**

```
UPDATE foo SET x=t.x, y=t.y FROM
(VALUES (null, 20, 1),
        (null, 50, 2))
AS t(x, y, pkid) WHERE foo.pkid=t.pkid 
```

**错误**

```
ERROR:  column "x" is of type integer but expression is of type text
LINE 1: UPDATE foo SET x=t.x FROM 
```

解决此问题的唯一方法是将至少一个值更改为`(null, 20, 1)`，`(null:int, 50, 2)`但我不能这样做，因为我有一个生成这些“更新多行”查询的函数，它对列类型一无所知。

这里最好的解决方案是什么？是否有更好的多行更新查询？有没有类似的函数或语法`AS t(x:gettype(foo.x), y:gettype(foo.y), pkid:gettype(foo.pkid))`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-14T15:19:53.547

使用独立`VALUES`表达式 PostgreSQL 不知道数据类型应该是什么。使用简单的数字文字，系统很乐意假设匹配类型。但是对于其他输入（如`NULL`），您需要显式转换 - 正如您已经发现的那样。

您可以查询`pg_catalog`（快速，但特定于 PostgreSQL）或`information_schema`（慢，但标准 SQL）来找出并准备具有适当类型的语句。

或者你可以使用这些简单的“技巧”之一（我把最好的留到*最后*）：

### 0\. 用 选择行`LIMIT 0`，用 追加行 `UNION ALL VALUES`

```
UPDATE foo f
SET    x = t.x
     , y = t.y
FROM  (
  (SELECT pkid, x, y FROM foo LIMIT 0) -- parenthesis needed with LIMIT
   UNION ALL
   VALUES
      (1, 20, NULL)  -- no type casts here
    , (2, 50, NULL)
   ) t               -- column names and types are already defined
WHERE  f.pkid = t.pkid; 
```

子查询的第一个子选择：

```
(SELECT x, y, pkid  FROM foo LIMIT 0) 
```

获取列的名称和类型，但`LIMIT 0`阻止它添加实际行。随后的行被强制转换为现在定义良好的行类型 - 并立即检查它们是否匹配该类型。应该是对原始表单的细微改进。

*在为表的所有*列提供值时，此简短语法可用于第一行：

```
(TABLE foo LIMIT 0) 
```

主要**限制**：Postgres`VALUES`立即将独立表达式的输入文字转换为“尽力而为”类型。当它稍后尝试转换为 first 的给定类型时，`SELECT`如果在假定类型和目标类型之间没有注册的赋值转换，对于某些类型来说可能已经太晚了。示例：`text`->`timestamp`或`text`-> `json`。

*临：*

*   最小开销。
*   可读、简单、快速。
*   您只需要知道表的相关列名。

*缺点：*

*   **某些类型的类型解析可能会失败。**

### 1\. 用 选择行`LIMIT 0`，用 追加行`UNION ALL SELECT`

```
UPDATE foo f
SET    x = t.x
     , y = t.y
FROM  (
  (SELECT pkid, x, y FROM foo LIMIT 0) -- parenthesis needed with LIMIT
   UNION ALL SELECT 1, 20, NULL
   UNION ALL SELECT 2, 50, NULL
   ) t               -- column names and types are already defined
WHERE  f.pkid = t.pkid; 
```

*临：*

*   像***0.***，但避免类型解析失败。

*缺点：*

*   `UNION ALL SELECT``VALUES`正如您在测试中发现的那样，它比长行列表的表达式慢。
*   每行的详细语法。

### 2.`VALUES`每列类型的表达式

```
...
FROM  (
   VALUES 
     ((SELECT pkid FROM foo LIMIT 0)
    , (SELECT x    FROM foo LIMIT 0)
    , (SELECT y    FROM foo LIMIT 0))  -- get type for each col individually
   , (1, 20, NULL)
   , (2, 50, NULL)
   ) t (pkid, x, y)  -- columns names not defined yet, only types.
... 
```

与***0***相反。这避免了过早的类型解析。

`VALUES`表达式中的第一行是一行`NULL`值，它定义了所有后续行的类型。这个领先的噪音行`WHERE f.pkid = t.pkid`后来被过滤掉了，所以它永远不会出现。`OFFSET 1`出于其他目的，您可以在子查询中消除添加的第一行。

*临：*

*   通常比***1.***（甚至***0.***）快
*   具有许多列且只有少数列相关的表的简短语法。
*   您只需要知道表的相关列名。

*缺点：*

*   仅几行的详细语法
*   可读性较差（IMO）。

### 3.`VALUES`行类型表达式

```
UPDATE foo f
SET x = (t.r).x         -- parenthesis needed to make syntax unambiguous
  , y = (t.r).y
FROM (
   VALUES
      ('(1,20,)'::foo)  -- columns need to be in default order of table
     ,('(2,50,)')       -- nothing after the last comma for NULL
   ) t (r)              -- column name for row type
WHERE  f.pkid = (t.r).pkid; 
```

你显然知道表名。如果您还知道列数及其顺序，则可以使用它。

对于 PostgreSQL 中的每个表，都会自动注册一个行类型。如果您匹配表达式中的列数，您可以转换为表的行类型 ( `'(1,50,)'::foo`)，从而隐式分配列类型。在逗号后面不添加任何内容以输入`NULL`值。为每个不相关的尾随列添加一个逗号。
在下一步中，您可以使用演示的语法访问各个列。[手册中有关](https://www.postgresql.org/docs/current/sql-expressions.html#FIELD-SELECTION)[*字段选择*](https://www.postgresql.org/docs/current/sql-expressions.html#FIELD-SELECTION)的更多信息。

或者您可以***添加***一行 NULL 值并对实际数据使用统一语法：

```
...
  VALUES
      ((NULL::foo))  -- row of NULL values
    , ('(1,20,)')    -- uniform ROW value syntax for all
    , ('(2,50,)')
... 
```

*临：*

*   最快（至少在我的测试中，行和列很少）。
*   需要所有列的少数行或表的最短语法。
*   您不必拼出表格的列 - 所有列都会自动具有匹配的名称。

*缺点：*

*   从记录/行/复合类型中选择字段的语法不太为人所知。
*   您需要按默认顺序知道相关列的数量和位置。

### 4.具有*分解*行类型`VALUES`的表达式

 *与***3.***类似，但采用标准语法分解行：

```
UPDATE foo f
SET    x = t.x
     , y = t.y
FROM (
   VALUES
      (('(1,20,)'::foo).*)  -- decomposed row of values
    , (2, 50, NULL)
   ) t(pkid, x, y)  -- arbitrary column names (I made them match)
WHERE  f.pkid = t.pkid;     -- eliminates 1st row with NULL values 
```

或者，再次使用 NULL 值的前导行：

```
...
   VALUES
      ((NULL::foo).*)  -- row of NULL values
    , (1, 20, NULL)    -- uniform syntax for all
    , (2, 50, NULL)
... 
```

*像***3.****一样的优点和缺点*，但使用更常见的语法。
你需要拼出列名（如果你需要的话）。*

 *### 5.`VALUES`从行类型中获取类型的表达式

就像[Unril 评论](https://stackoverflow.com/questions/12426363/casting-null-type-when-updating-multiple-rows/12427434#comment88028751_12427434)的那样，我们可以结合***2.***和***4.***的优点来仅提供列的一个子集：

```
UPDATE foo f
SET   (  x,   y)
    = (t.x, t.y)  -- short notation, see below
FROM (
   VALUES
      ((NULL::foo).pkid, (NULL::foo).x, (NULL::foo).y)  -- subset of columns
    , (1, 20, NULL)
    , (2, 50, NULL)
   ) t(pkid, x, y)       -- arbitrary column names (I made them match)
WHERE  f.pkid = t.pkid; 
```

*像***4.****一样的优点和缺点*，但我们可以使用任何列子集，而不必知道完整列表。*

 *还显示其`UPDATE`本身的简短语法，这对于具有多列的情况很方便。有关的：

*   [批量更新所有列](https://dba.stackexchange.com/a/63883/3684)

***4\. 和 5\. 是我的最爱。***

*db<>fiddle [here](https://dbfiddle.uk/?rdbms=postgres_12&fiddle=24c8cb91f7d22e9453aad30063c5017a)* - 演示所有

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T14:53:08.737

如果您有一个生成查询的脚本，您可以提取和缓存每列的数据类型，并相应地创建类型转换。例如：

```
SELECT column_name,data_type,udt_name 
FROM information_schema.columns 
WHERE table_name = 'foo'; 
```

从这个 udt_name 中，您将获得必要的演员表，正如您在上一段中解释的那样。此外，您可以这样做：

```
UPDATE foo
SET x = t.x
FROM (VALUES(null::int4,756),(null::int4,6300))
AS t(x,pkid)
WHERE foo.pkid = t.pkid; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T15:14:10.337

您的脚本将从 foo 创建一个临时表。它将具有与 foo 相同的数据类型。使用不可能的条件，所以它是空的：

```
select x, y, pkid
into temp t
from foo
where pkid = -1 
```

使您的脚本插入其中：

```
insert into t (x, y, pkid) values
(null, 20, 1),
(null, 50, 2) 
```

现在从它更新：

```
update foo 
set x=t.x, y=t.y 
from t
where foo.pkid=t.pkid 
```

最后放下它：

```
drop table t 
```***

# c++ - 传输层安全增强套接字

> ID：12426364
> 
> 赞同：3
> 
> 时间：2012-09-14T14:15:43.867
> 
> 标签：c++, boost, boost-asio, transport-security

有谁知道如何使用 boost sockets 实现 tls ？我已经实现了 ssl，但我不介意将其扩展到 tls。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T22:20:12.513

该类[已经支持](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/ssl__context_base/method.html)`ssl::context_base`TLS ：

> **ssl::context_base::方法**
> 
> 上下文支持的不同方法。

你会想用`ssl::context_base::method::tlsv1`

# sql - Microsoft Access 中的不同聚合查询与不同字段上的分组依据

> ID：12426365
> 
> 赞同：2
> 
> 时间：2012-09-14T14:15:44.253
> 
> 标签：sql, ms-access, group-by, distinct, aggregate-functions

我表中的字段中有 2 个字段，CTN_NUM 和 PO_NUM。每个 PO_NUM 至少有一个 CTN_NUM，可能更多——不同的或重复的。任何给定的 CTN_NUM 不能超过 1 个 PO_NUM。换句话说，这是一对多的关系。我想创建一个查询，显示每个 PO_NUM 的唯一 CTN_NUM 数量。我在这个论坛以及[http://blogs.office.com/b/microsoft-access/archive/2007/09/19/writing-a-count-distinct-query-in-access 上看到了其他线程。 aspx](http://blogs.office.com/b/microsoft-access/archive/2007/09/19/writing-a-count-distinct-query-in-access.aspx)和 none 似乎解决了这个确切的问题。这是我尝试过的：

一个）

```
SELECT PO_NUM, Count(CTN_NUM) AS CountOfCTN_NUM  
FROM tempSpring_ASN  
GROUP BY PO_NUM; 
```

这将返回每个 PO_NUM 的所有 CTN_NUM 的计数，即使它们不是唯一的。

二）

```
SELECT PO_NUM, Count(DISTINCT CTN_NUM) AS CountOfCTN_NUM  
FROM tempSpring_ASN  
GROUP BY PO_NUM; 
```

虽然这可能适用于其他 RDBMS，但在 Access 中出现语法错误。

C）

```
SELECT COUNT(*)  
FROM  
(SELECT DISTINCT CTN_NUM AS cn  
FROM tempSpring_ASN); 
```

这将返回与表不同的 CTN_NUM 的总和，而不是与 PO_NUM 不同的总和。

D) 与 C 相同，但使用 GROUP BY：

```
SELECT COUNT(*)  
FROM  
(SELECT DISTINCT CTN_NUM AS cn  
FROM tempSpring_ASN)  
GROUP BY PO_NUM; 
```

这提示我输入 PO_NUM。

你能给些建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:19:37.900

试试这个：

```
SELECT PO_NUM, COUNT(*) AS CountOfCTN_NUM    
FROM   (
    SELECT PO_NUM, CTN_NUM 
    FROM tempSpring_ASN
    GROUP BY PO_NUM, CTN_NUM 
) a
GROUP BY PO_NUM; 
```

这也应该有效：

```
SELECT PO_NUM, COUNT(*) AS CountOfCTN_NUM   
FROM   (
    SELECT DISTINCT PO_NUM, CTN_NUM 
    FROM tempSpring_ASN
) a
GROUP BY PO_NUM; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:19:55.467

Letter`D`上有语法错误。`PO_NUM`子查询中不存在，因此您不能在其上使用 group by。可能是子查询未命中`PO_NUM`。

# php - PHP 5.4：防止在输出后设置标题

> ID：12426367
> 
> 赞同：1
> 
> 时间：2012-09-14T14:15:49.653
> 
> 标签：php, header, outputstream

我习惯了在输出开始后无法发送标头。事实上，我指望它。

在我正在处理的应用程序中，每次成功更新或插入查询后，页面都会通过`header('Location: ...')`调用重新加载。那是因为我不希望带有 POST 数据的页面可以刷新。

但是在开发过程中，其中一个查询可能只是有一个错误 - 然后我打印出一些调试信息（带有`echo`）。这将阻止页面重新加载 - 但自从我升级到 php 5.4 后，它只是重新加载。如果我`exit;`在打印调试信息之后只能读取调试信息 - 我不喜欢，因为脚本后面可能会出现更多调试信息。

如果我签`headers_sent()`入其中一个回显调用，则表示尚未发送标头。所以看起来它在没有我（故意）打开它的情况下被缓冲。

它当然可能是一个 php.ini 设置，而不是我现在使用 5.4 版的事实，但我找不到它。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:27:01.793

使用输出缓冲来解决这个问题。基本上你需要做的就是尽快打电话`ob_start();`。然后，PHP 不会立即发送内容，而是缓冲输出。因此，您首先设置的内容（正文或标题）并不重要。它们将被设置在缓冲区中，因此除非发送缓冲区，否则操作不是问题。如果您没有明确刷新缓冲区，它将在您的脚本结束时由 PHP 发送。请参阅PHP 手册中的[输出缓冲控制](http://be2.php.net/manual/en/book.outcontrol.php)一章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T16:11:13.550

jeroen answered my question (in a comment on my original question) by pointing me to the `output_buffering` setting in `php.ini`. Thank you!

# python - 以下 Django 代码如何工作？

> ID：12426371
> 
> 赞同：-1
> 
> 时间：2012-09-14T14:16:17.783
> 
> 标签：python, django, django-forms, django-views

我试图更好地理解以下代码。它正在工作，但我只是不完全理解几个元素（下面的问题）：

```
from django.shortcuts import render_to_response
from mywiki.wiki.models import Page
from django.http import HttpResponseRedirect
from django import forms
import markdown

class SearchForm(forms.Form):
    text = forms.CharField(label='Enter search term')

def search_page(request):
    if request.method =='POST':
        f = SearchForm(request.POST)
        if not f.is_valid():
            return render_to_response('search.html', {'form':f})
        else:
            pages = Page.objects.filter(name__contains = f.cleaned_data['text'])
            return render_to_response('search.html', {'form':f, 'pages':pages})
    f = SearchForm()
    return render_to_response('search.html', {'form':f})

specialPages = {'SearchPage':search_page}

def view_page(request, page_name):
    if page_name in specialPages:
        return specialPages[page_name](request)
    try:
        page = Page.objects.get(pk=page_name)
    except Page.DoesNotExist:
        return render_to_response('create.html', {'page_name':page_name})

    content = page.content    
    return render_to_response('view.html', {'page_name':page_name, 'content':markdown.markdown(content)}) 
```

1.  为什么我们需要指定`request.method`必须是`POST`- 单击 HTML 按钮不会隐含地表示更改/影响某些内容的意图？还是`POST`仅在操作影响数据库时才合适？

2.  这条线是如何`pages = Page.objects.filter(name__contains = f.cleaned_data['text'])`工作的？它需要模型`Page(models.Model)`，但在这种情况下，“对象”和“过滤器”方法会做什么？

3.  中，`view_page`为什么我们需要添加`(request)``return specialPages[page_name](request)`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:21:08.760

1.  该`POST`测试用作区分器。

    当使用 调用视图时`GET`，将呈现表单。表单指定它需要使用 using 提交`POST`，因此代码假定`POST`请求表示表单已提交。

2.  该`objects`属性触发实际的数据库查询。通过添加`.filter()`调用，您可以指定更具体的数据库查询，其中`name`属性包含`f.cleaned_data['text']`. 结果是一组与该查询匹配的数据库结果。

3.  `specialPages`字典值本身就是视图，要使它们起作用，您可以使用参数调用它们`request`。就像`view_page`视图可调用本身一样。

# jquery - jQuery改变所有孩子的id属性

> ID：12426397
> 
> 赞同：7
> 
> 时间：2012-09-14T14:18:12.703
> 
> 标签：jquery

我需要一些帮助来弄清楚如何编写一些 jQuery 代码。

我需要在点击时动态克隆一个表。但是我每次都需要更改表格及其子元素的 ID。由于该表可以有很多孩子，因此手动执行此操作会很困难。我需要一种方法来更改所有子（所有后代）元素的 id。我总是将计数器添加到 id 中。（我知道孩子们只会访问直系孩子，但我只是想尝试一下是否可行）。如果你们知道如何在 jQuery 或 Javascript 中完成此操作，请告诉我。

```
<table id="table"> 
    <tr id = "tr" > 
        <td id="td"> 
            <span id="span" value="hiii">hi</span> 
        </td> 
    </tr>
</table> 

<button>Clone</button> 

<script> 
    $("button").click(function () { 
        var table = $("#table").clone(true,true) 
        table.attr( 'id', function() { return this.id +"1"; })    
        alert($("#table1").children()) 
        $("#table1").find(*).attr('id', function() { return this.id +"1"; }) 
        table.appendTo("#table") 
        alert(document.getElementById("tr1")) 
        alert(document.getElementById("span1").value) 
    }); 
</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T14:24:22.123

如果`elem`是您的克隆结构的父级并且`cntr`是您说要维护的计数器，您可以像这样修复该克隆结构中的所有 id：

```
function fixIds(elem, cntr) {
    $(elem).find("[id]").add(elem).each(function() {
        this.id = this.id + cntr;
    })
} 
```

如果 id 的末尾可能已经有一个克隆的数字，并且您想替换该数字，则可以这样做：

```
function fixIds(elem, cntr) {
    $(elem).find("[id]").add(elem).each(function() {
        this.id = this.id.replace(/\d+$/, "") + cntr;
    })
} 
```

因此，根据您现在添加到问题中的代码，您可以这样做：

```
<script> 
    var cloneCntr = 1;
    $("button").click(function () { 
        var table = $("#table").clone(true,true) 
        fixIds(table, cloneCntr);
        table.insertAfter("#table") 
        cloneCntr++;
    });
</script> 
```

工作示例：http: [//jsfiddle.net/jfriend00/wFu9K/](http://jsfiddle.net/jfriend00/wFu9K/)

注意：我还将 DOM 插入代码更改为`insertAfter()`，因为您不能按照您的方式将一个表附加到另一个表（一个表将在现有表之后或在前一个表中的单元格内）。

* * *

如果您只是想添加一行，那么您需要克隆该行，而不是整个表。

您可以使用以下代码将克隆行添加到现有表中：

```
function fixIds(elem, cntr) {
    $(elem).find("[id]").add(elem).each(function() {
        this.id = this.id.replace(/\d+$/, "") + cntr;
    })
}
var cloneCntr = 1;
$("button").click(function () { 
    var row = $("#table tr").first().clone(true,true);
    fixIds(row, cloneCntr++);
    row.appendTo("#table") 
}); ​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:23:18.997

```
$("#table1").find(*) 
```

应该

```
table.find("*") 
```

`$("#table1")`由于您尚未将表添加到 DOM，因此不会在该代码行上返回任何内容。And`*`是一个选择器，应该是一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-20T19:30:01.637

你可以做

```
$Element.children().each(function () {
        this.id = new_id;
 }); 
```

# .net - MapInheritedProperties() 不映射继承的外键属性

> ID：12426404
> 
> 赞同：0
> 
> 时间：2012-09-14T14:18:28.453
> 
> 标签：.net, entity-framework, entity-framework-5

这是我的实体类：

```
public abstract class Entity: IEntity
{
    public Guid? Id { get; set; }    
    public bool IsDead { get; set; }
    public DateTime Created { get; set; }
    public DateTime Modified { get; set; }
    public ICollection<EntityAccess> AccessList { get; set; }
    public ICollection<Message> Discussion { get; set; }
    public User Owner { get; set; }
} 
```

我的大多数实体（包括用户）都继承自这个类。OnModelCreating，他们都经过这段代码：

```
m.MapInheritedProperties();
m.ToTable(entity.Name); }; 
```

在 EF 创建数据库之后，会发生一些非常奇怪的事情。从 Entity 继承的属性确实映射到每个表，**除了 Owner 属性**。与其他继承的属性不同，所有者未映射。这有什么可以解释的？

附加信息：我的实体是简单的 POCO 对象，没有注释，没有构造函数，什么都没有。例如，这是 User 实体：

```
public class User : RuntimeEntity
{
    public string Email { get; set; }
    public ICollection<UserGroup> Groups { get; set; }
    public byte[] Password { get; set; }
    public ICollection<Membership> Memberships { get; set; }
} 
```

**编辑：**

由于这个问题仍然存在，这里是完整的模型：

```
namespace ConSol.Templex.Data.Entities
{
    public abstract class Association : IEntity
    {
        public Guid? Id { get; set; }
        [NotMapped]
        public virtual RuntimeEntity Entity1 { get; set; }
        [NotMapped]
        public virtual RuntimeEntity Entity2 { get; set; }
    }

public class Attachment : RuntimeEntity
    {
        public AttachmentValidity Validity { get; set; }
        public ICollection<Blob> Versions { get; set; }
        public Profile Profile { get; set; }

    #region Computed properties
        public string Name
        {   
            get 
            {
                    return this.Versions.Last().Name;
            }
        }
        #endregion
    }

public enum AttachmentValidity
    {
        Unverified,
        Verified,
        WorkInProgress
    }

public class Blob : RuntimeEntity
    {
        public string Name { get; set; }
        public byte[] Data { get; set; }
        public Attachment Attachment { get; set; }
        public WorkLog WorkLog { get; set; }
    }

public class EntityAccess : Association
    {
        #region Association implementation
        public override RuntimeEntity Entity1 { get { return this.Entity; } }
        public override RuntimeEntity Entity2
        {
            get
            {
                return this.UserGroup ?? this.User as RuntimeEntity;
            }
            set
            {
                if (value is User) this.User = (User)value; else this.UserGroup = (UserGroup)value;
            }
        }
        #endregion

    public RuntimeEntity Entity { get; set; }
        public UserGroup UserGroup { get; set; }
        public User User { get; set; }
    }
}
?
    public interface IEntity
    {
    }
}
?
    public abstract class MasterEntity : IEntity
    {
        public string Code { get; set; }
        public string Name { get; set; }
    }

public class Membership : Association
    {
        #region Association implementation
        public override RuntimeEntity Entity1 { get { return this.User; } }
        public override RuntimeEntity Entity2 { get { return this.UserGroup; } }
        #endregion

    public User User { get; set; }
        public UserGroup UserGroup { get; set; }
        public bool IsAdmin { get; set; }
    }

public class Message : RuntimeEntity
    {
        public string Text { get; set; }
        public RuntimeEntity RuntimeEntity { get; set; }

    #region Computed properties
        public User Author
        {
            get
            {
                return this.Owner;
            }
        }
        #endregion
    }

public class Parameter : RuntimeEntity
    {
        public string Code { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }

    public Worker Worker
        {
            get
            {
                throw new System.NotImplementedException();
            }
            set
            {
            }
        }
    }

public class ParameterValue : ConSol.Templex.Data.Entities.RuntimeEntity
    {
        public string Value { get; set; }
        public Parameter Parameter { get; set; }
        public Worker Worker { get; set; }

    public Profile Profile
        {
            get
            {
                throw new System.NotImplementedException();
            }
            set
            {
            }
        }
    }

public class ProductStatus : RuntimeEntity
    {
        public Profile Profile { get; set; }
        public Guid ProductId { get; set; }
        public ExportStatus Status { get; set; }
        public WorkLog WorkLog { get; set; }

    public enum ExportStatus
        {
            Exported,
            Imported,
            Error
        }
    }

public class Profile : RuntimeEntity
    {
        public string Name { get; set; }
        public ICollection<Attachment> Attachments { get; set; }
        public ICollection<ParameterValue> Parameters { get; set; }
        public ICollection<WorkLog> WorkLogs { get; set; }
        public Worker Exporter { get; set; }
        public Worker Importer { get; set; }
        public TimeSpan? Frequency { get; set; }
        public DateTime FirstRun { get; set; }
        public string Destination { get; set; }
        public ICollection<ProductStatus> ProductQueue { get; set; }
    }
}
?
    public abstract class RuntimeEntity : IEntity, ISoftDeletable
    {
        public Guid? Id { get; set; }

    public bool IsDead { get; set; }
        public DateTime Created { get; set; }
        public DateTime Modified { get; set; }
        //public ICollection<EntityAccess> AccessList { get; set; }
        public ICollection<Message> Discussion { get; set; }
        public User Owner { get; set; }

    /// <summary>
        /// This defines the default filter for all entities
        /// </summary>
        public static Expression<Func<TIn,bool>> DefaultFilterFor<TIn>(User user)
            where TIn : RuntimeEntity
        {
            return x => true;
        }

    /// <summary>
        /// This defines an optional filter to be used most of the time
        /// </summary>
        public static Expression<Func<TIn, bool>> AdditionalFilterFor<TIn>(User user)
            where TIn : RuntimeEntity
        {
            return x => !x.IsDead;
        }
    }

public class Schedule : RuntimeEntity
    {
        public DateTime Start { get; set; }
        public TimeSpan Frequency { get; set; }
    }

public class User : RuntimeEntity
    {
        public string Email { get; set; }
        public ICollection<UserGroup> Groups { get; set; }
        public byte[] Password { get; set; }
        public ICollection<Membership> Memberships { get; set; }
    }

public class UserGroup : RuntimeEntity
    {
        public string CustomerId { get; set; }
        public string Name { get; set; }
        public bool IsSuperGroup { get; set; }
        public ICollection<Membership> Memberships { get; set; }

    #region Computed properties
        public IEnumerable<User> Admins
        {
            get
            {
                return this.Memberships.Where(x => x.IsAdmin).Select(x => x.User);
            }
        }
        #endregion
    }

public class Worker : RuntimeEntity
    {
        public ICollection<Parameter> Parameters { get; set; }
        public string AssemblyName { get; set; }
        public byte[] Assembly { get; set; }
        public WorkType Work { get; set; }

    public enum WorkType
        {
            Import,
            Export
        }
    }

public class WorkerMessage : RuntimeEntity
    {
        public string Message { get; set; }
        public MessageType Outcome { get; set; }
        public WorkLog WorkLog { get; set; }

    public enum MessageType
        {
            Information,
            Warning,
            Error
        }
    }

public class WorkLog : RuntimeEntity
    {
        public DateTime End { get; set; }
        public Profile Profile { get; set; }
        public Worker Worker { get; set; }
        public WorkResult Result { get; set; }
        public ICollection<Blob> Files { get; set; }
        public ICollection<WorkerMessage> Report { get; set; }
    }

    public enum WorkResult
        {
            Success,
            Warning,
            Failure
        }
    }
} 
```

这是 dbcontext：

```
public class TemplexDB : DbContextBase
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Attachment>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("Attachment");
        });
        modelBuilder.Entity<Blob>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("Blob");
        });
        modelBuilder.Entity<Message>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("Message");
        });
        modelBuilder.Entity<Parameter>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("Parameter");
        });
        modelBuilder.Entity<ParameterValue>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("ParameterValue");
        });
        modelBuilder.Entity<ProductStatus>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("ProductStatus");
        });
        modelBuilder.Entity<Profile>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("Profile");
        });
        modelBuilder.Entity<Schedule>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("Schedule");
        });
        modelBuilder.Entity<User>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("User");
        });
        modelBuilder.Entity<UserGroup>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("UserGroup");
        });
        modelBuilder.Entity<Worker>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("Worker");
        });
        modelBuilder.Entity<WorkerMessage>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("WorkerMessage");
        });
        modelBuilder.Entity<WorkLog>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("WorkLog");
        });
        modelBuilder.Entity<EntityAccess>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("EntityAccess");
        });
        modelBuilder.Entity<Membership>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("Membership");
        });
    }

public DbSet<Attachment> Attachments { get; set; }
    public DbSet<Blob> Blobs { get; set; }
    public DbSet<Message> Messages { get; set; }
    public DbSet<Parameter> Parameters { get; set; }
    public DbSet<ParameterValue> ParameterValues { get; set; }
    public DbSet<ProductStatus> ProductStatuses { get; set; }
    public DbSet<Profile> Profiles { get; set; }
    public DbSet<Schedule> Schedules { get; set; }
    public DbSet<User> Users { get; set; }
    public DbSet<UserGroup> UserGroups { get; set; }
    public DbSet<Worker> Workers { get; set; }
    public DbSet<WorkerMessage> WorkerMessages { get; set; }
    public DbSet<WorkLog> WorkLogs { get; set; }

// associations
    public DbSet<EntityAccess> EntityAccess { get; set; }
    public DbSet<Membership> Membership { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T15:33:51.403

您的问题不在上面的代码中，使用您的示例代码我构建了以下模型：

```
 public abstract class Entity 
    {
        public Guid? Id { get; set; }
        public bool IsDead { get; set; }
        public DateTime Created { get; set; }
        public DateTime Modified { get; set; }
        public ICollection<EntityAccess> AccessList { get; set; }
        public ICollection<Message> Discussion { get; set; }
        public User Owner { get; set; }
    }

    public class EntityAccess
    {
        public int Id { get; set; }
    }

    public class Message
    {
        public int Id { get; set; }
    }
    public class Structure : Entity
    {
        public string Property { get; set; }
    }
    public class User
    {
        public int Id { get; set; }
        public string Email { get; set; }
        public ICollection<UserGroup> Groups { get; set; }
        public byte[] Password { get; set; }
        public ICollection<Membership> Memberships { get; set; }
    }

    public class UserGroup
    {
        public int Id { get; set; }
    }

    public class Membership
    {
        public int Id { get; set; }
    }

    public class Model : DbContext
    {
        public DbSet<Structure> Structures { get; set; }
        public DbSet<User> Users { get; set; }
        public DbSet<EntityAccess> EntityAccesses { get; set; }
        public DbSet<Message> Messages { get; set; }
        public DbSet<UserGroup> UserGroups { get; set; }
        public DbSet<Membership> Memberships { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Structure>()
                .Map(m =>
                    {
                        m.MapInheritedProperties();
                        m.ToTable("Structure");
                    });
        }
    } 
```

哪个生成了这个数据库： ![在此处输入图像描述](../Images/0437e7d0552bc37e61964090ac1d6db5.png)

如您所见，结构上有一个 Owner_Id 属性，它将所有者映射到结构表。

# http - Rest API - 创建好友集合

> ID：12426406
> 
> 赞同：2
> 
> 时间：2012-09-14T14:18:50.490
> 
> 标签：http, rest, restful-url, httpverbs

用户基本上可以将其他用户添加为朋友。所以，我不是在创建另一个用户资源，而是链接两个资源。

**问题**

1.  处理这个问题的最佳策略是什么？
2.  这种情况下合适的动词是什么？

听说有一个`LINK`动词，好像很合适。

而且我还读到，我可以使用`PATCH`动词来对资源应用补丁。
如果是这样，我可以这样做吗

```
PATCH /users/{id}/friends 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T15:25:08.110

您可能会考虑创建一个新对象。

如果您**分离出一个`friendship`对象**，您将能够在不更新用户的情况下创建和修改它们。每个友谊将有两个用户密钥。这也是一个*悬挂有关友谊的额外信息的好地方*，例如“朋友以来”的价值。

```
POST /friendships

{
     primaryUser: 43,
     secondaryUser: 3
     since: "03/16/2010"
}

201 CREATED
location: /friendships/635 
```

然后可以编写对用户 43 的查询以包括用户 ID、友谊 ID 或嵌入对象的数组。

```
GET /users/43

200 SUCCESS
{
    id: 43,
    name: "john",
    friends: [3]
} 
```

或者

```
200 SUCCESS
{
    id: 43,
    name: "john",
    friends: [635]
} 
```

或者

```
200 SUCCESS
{
    id: 43,
    name: "john",
    friends: [
        {
             id: 635,
             primaryUser: 43,
             secondaryUser: 3,
             since: "03/16/2010"
        }
    ]
} 
```

更新/删除的语义更加直接。“删除”友谊看起来`DELETE`比 a`PATCH`或`PUT`imo 更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:58:31.300

“链接资源”实际上只是意味着“更新一个资源以包含指向另一个资源的链接”。

这意味着您应该使用包含对资源 B 的新引用的新表示向资源 A 发出 PUT 或 POST。

如果它是双向关系，那么通过在资源 A 上进行 PUT/POST，您还应该在下次获取资源 B 时看到对 A 的引用。

# php - Symfony 2中我的数据库中最后一次插入/更新/删除的时间

> ID：12426415
> 
> 赞同：0
> 
> 时间：2012-09-14T14:19:37.807
> 
> 标签：php, symfony, doctrine, doctrine-orm

我需要一个返回数据库中最后一次插入/更新/删除的函数。我使用 Symfony 2 和 Doctrine 2。

我已经尝试过这个原始查询，但 UPDATE_TIME 始终为 NULL：

```
$connection = $this->getDoctrine()->getConnection();
$database = $connection->getDatabase();

$result = $connection->fetchAll('
    SELECT MAX(UPDATE_TIME)
    FROM information_schema.tables
    WHERE TABLE_SCHEMA = "' . $database . '"
'); 
```

我如何在 Symfony 或 Doctrine 中最后一次获得这个？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T14:26:04.440

我敢打赌你正在使用`InnoDB`，`InnoDB` [不支持](http://dev.mysql.com/doc/refman/5.5/en/show-table-status.html) `UPDATE_TIME`。

最好的办法是在每次插入/更新行时创建一个事件并填充/更新一个表。

# javascript - 如何使用 Node.js 为游戏服务器创建双向持久性？

> ID：12426422
> 
> 赞同：0
> 
> 时间：2012-09-14T14:20:17.823
> 
> 标签：javascript, node.js, coffeescript, event-driven, game-loop

假设我们正在构建一个宇宙飞船游戏。一些物体类型是宇宙飞船和太阳系。我想使用 Node 作为后端。

我遇到的问题是如何使用回调/事件驱动系统使这两个对象都存在并实时交互。例如，一艘船如何不断地告诉系统它在该系统中的位置，而不是每隔几秒钟不断更新一个“位置”属性，该属性将在创建船时初始化。

或者两艘船将如何相互作用？位置，类型等都必须考虑。是否必须实现极其复杂的事件监听器？

也许我让这比需要的更困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T09:07:09.930

对于实时应用程序，您应该尝试 meteor.js

[http://www.meteor.com](http://www.meteor.com)

# java - 将 java doc 键盘映射添加到 netbeans

> ID：12426425
> 
> 赞同：0
> 
> 时间：2012-09-14T14:20:28.607
> 
> 标签：java, netbeans, netbeans-7.2

我想设置一个键映射以在 Netbeans 7.2 中生成 java doc 的结构。我想知道是否有人知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:28:57.363

已经设置了一个名为“Generate Javadoc”的键映射来执行此操作。如果您转到工具菜单，然后选择选项并选择键映射，您可以在搜索框中搜索“生成 Javadoc”并将其设置为您选择的键映射。

# c# - 将通用列表转换为特定类型

> ID：12426426
> 
> 赞同：8
> 
> 时间：2012-09-14T14:20:31.040
> 
> 标签：c#, .net

我有一个包含一些值的列表。

**例子：**

```
List<object> testData = new List <object>();
testData.Add(new List<object> { "aaa", "bbb", "ccc" });
testData.Add(new List<object> { "ddd", "eee", "fff" });
testData.Add(new List<object> { "ggg", "hhh", "iii" }); 
```

我有一个像

```
class TestClass
{
    public string AAA {get;set;}
    public string BBB {get;set;}
    public string CCC {get;set;}
} 
```

如何转换`testData`为类型`List<TestClass>`？

除了这个还有什么方法可以转换吗？

```
testData.Select(x => new TestClass()
{
   AAA = (string)x[0],
   BBB = (string)x[1],
   CCC = (string)x[2]
}).ToList(); 
```

我不想提及列名，这样我就可以使用此代码而无需考虑类更改。

我也有一个`IEnumerable<Dictionary<string, object>>`有数据的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T14:23:11.347

您必须显式创建 TestClass 对象，并且将外部对象转换`List<object>`为字符串，将内部对象转换为字符串。

```
testData.Cast<List<object>>().Select(x => new TestClass() {AAA = (string)x[0], BBB = (string)x[1], CCC = (string)x[2]}).ToList() 
```

您还可以在 TestClass 中创建一个构造函数来`List<object>`为您完成繁琐的工作：

```
public TestClass(List<object> l)
{
    this.AAA = (string)l[0];
    //...
} 
```

然后：

```
testData.Cast<List<object>>().Select(x => new TestClass(x)).ToList() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-14T14:24:31.890

你可以这样做：

```
var res = testData
    .Cast<List<object>>() // Cast objects inside the outer List<object>
    .Select(list => new TestClass {
        AAA = (string)list[0]
    ,   BBB = (string)list[1]
    ,   CCC = (string)list[2]
    }).ToList(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-14T14:24:08.340

Linq 是你的朋友：

```
var testList = testData
                  .OfType<List<object>>()
                  .Select(d=> new TestClass
                                  {
                                     AAA = d[0].ToString(), 
                                     BBB = d[1].ToString(), 
                                     CCC = d[2].ToString()})
                  .ToList(); 
```

**编辑：**对于`IEnumerable<Dictionary<string,object>>`, 并且在 Linq 语句中没有硬编码字段名称，我只需将每个 Dictionary 传递给要实例化的对象的构造函数，并让对象尝试使用它知道的字段名称来水合自己：

```
var testList = testData
                  .OfType<Dictionary<string,object>>()
                  .Select(d=> new TestClass(d))
                  .ToList();

...

class TestClass
{
    public TestClass(Dictionary<string,object> data)
    {
        if(!data.ContainsKey("AAA")) 
           throw new ArgumentException("Key for field AAA does not exist.");
        AAA = data["AAA"].ToString();

        if(!data.ContainsKey("BBB")) 
           throw new ArgumentException("Key for field BBB does not exist.");
        BBB = data["BBB"].ToString();

        if(!data.ContainsKey("CCC")) 
           throw new ArgumentException("Key for field CCC does not exist.");
        CCC = data["CCC"].ToString();
    }

    public string AAA {get;set;}
    public string BBB {get;set;}
    public string CCC {get;set;}
} 
```

构造函数可以使用反射循环来获取其类型的字段列表，然后从 Dictionary 中获取这些 KVP 并将它们设置为当前实例。这会使它变慢，但代码会更紧凑，如果 TestClass 实际上有十几个字段而不是三个字段，这可能是一个问题。基本思想不变；以您拥有的形式将 TestClass 所需的数据提供给 TestClass，并让类构造函数弄清楚如何处理它。了解这将在创建任何 TestClass 对象的第一个错误时引发异常。

# javascript - 使用 jquery 删除具有特定内容的脚本标签

> ID：12426432
> 
> 赞同：1
> 
> 时间：2012-09-14T14:20:56.900
> 
> 标签：javascript, jquery

我有一个页面，我无法访问它的 obvius 网站。我想删除带有内容的脚本 html 标记。现在我有这个但不工作。我正在使用像编码这样的用户脚本！

```
function main(){
var def = $('script[type="text/javascript"]').html();
$('script[type="text/javascript"]').each(function() {
if (def == 'document.write("<scr"+"ipt type=\'text/javascript\' src=\'http://storing.com/javascripts/"+(new Date()).getTime()+"/3e155555e1b26c2d1ced0f645e_1_1.js\'></scr"+"ipt>")')
$('script[type="text/javascript"]').remove();
                                                    }
            } 
```

更新：

```
<script type="text/javascript">document.write("<scr"+"ipt type='text/javascript' src='http://somedomain.com/javascripts/"+(new Date()).getTime()+"/3e1a0cd37f25a6e1b26c2d1ced0f645e_1_1.js'></scr"+"ipt>")</script> 
```

这是我要删除的整个脚本...它插入了一个我现在要删除的 div 我只是想知道是否还有其他方法。但是正如我所见，唯一的是主机文件:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T14:26:52.817

我不相信这会起作用，因为加载的脚本已经运行了。

也就是说，你可能想要这样的东西：

```
$('script').each(function() {
    if (this.src.substring(0, 31) === 'http://storing.com/javascripts/') {
        $(this).remove();
    }
}); 
```

不可能`<script>`根据输出来匹配标签，`.html()`因为它只返回元素的*内容*，而不是外部`<script>`元素或元素的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:31:38.137

当脚本加载到页面中时，浏览器会立即对其进行评估和执行。脚本执行后，脚本标签的内容就无关紧要了。

您可以通过取消绑定可能已由脚本加载的事件来实现您想要的。是否有要禁用的事件？

如果脚本在某个域中并且您想阻止所有流量到它，您可以将以下条目添加到您的主机文件中：

```
127.0.0.1    storing.com 
```

这将阻止请求到达其目的地。

# android - 由于空值而重复的行

> ID：12426433
> 
> 赞同：0
> 
> 时间：2012-09-14T14:21:00.650
> 
> 标签：android, sql, sqlite

我有这个查询，它给出了重复的数据。我知道为什么，但找不到解决方案。

```
"SELECT events._id, events.cusorabs, events.userID, events.date, events.status,   
events.comment, events.type, events.hours, customer.name, absence.name, customer.wbs, 
absence.code"+
" FROM Events, Customer, Absence"+
" WHERE events.userID = \""+userID+"\""+
" AND (events.cusorabs = absence.code OR events.cusorabs = customer.wbs)" 
```

如何在“events.name”和“absence.name”上使用 distinct？它们的值可以变为“null”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:22:20.273

尝试在 sqlite 中使用 'group by' 子句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:23:47.140

您可以在 SELECT 期间为列指定新名称，以在两个名称列之间有所不同。例如：

```
customer.name AS customer_name, absence.name AS absence_name 
```

# shell - VxWorks：需要将输出重定向到空

> ID：12426437
> 
> 赞同：1
> 
> 时间：2012-09-14T14:21:09.993
> 
> 标签：shell, vxworks, wsh

```
-> version
VxWorks (for Company MMC-C PPC82XX F2000) version 5.5.2.
Kernel: WIND version 2.6\. 
```

Tornado 版本似乎是 tornado2.2.2_PPC。

请多多包涵，因为 VxWorks 对我来说是全新的。

我有一个模块，我用“ld < mymodule.out”加载了一个模块，然后通过调用方法“mymodule()”运行。

问题是我想将该模块的所有输出（它产生一个任务，它定期 printf 的状态信息）指向 null 或等效项。这不是要在客户机器上运行的东西，所以“一次性”方法就可以了。

背景：我正在尝试做的是自动化到盒子的 telnet 会话，加载和运行模块，然后在完成后注销。使用 wscript 自动执行 telnet，除了在脚本完成时不注销之外，它工作得很好！至于为什么在我启动该过程时它无法注销，我不确定。如果我删除该呼叫，telnet 会话就会打开并关闭。一探究竟：

```
:: :::::::::::::::::::::::::::::::::::::::::::::
:: http://www.antionline.com/showthread.php?264924-Scripting-windows-Telnet
:: temp_SendKeys.VBS will contain the "commands"
ECHO.set handler=WScript.CreateObject("WScript.Shell") >temp_SendKeys.VBS
ECHO.WScript.echo now() >>temp_SendKeys.VBS
ECHO.handler.run("Telnet") >>temp_SendKeys.VBS
ECHO.WScript.sleep 1500 >>temp_SendKeys.VBS

:: :::::::::::::::::::::::::::::::::::::::::::::
:: Open Connection To Telnet Host
ECHO.handler.SendKeys "open %Server% 2002~" >>temp_SendKeys.VBS
ECHO.WScript.sleep 1500 >>temp_SendKeys.VBS

:: :::::::::::::::::::::::::::::::::::::::::::::
:: Send Login Name
ECHO.handler.SendKeys "system~" >>temp_SendKeys.VBS
ECHO.WScript.sleep 1500 >>temp_SendKeys.VBS
:: Send Password
ECHO.handler.SendKeys "default~" >>temp_SendKeys.VBS
ECHO.WScript.sleep 2000 >>temp_SendKeys.VBS

:: :::::::::::::::::::::::::::::::::::::::::::::
:: Send Stuff to be done
ECHO.handler.SendKeys "unld ""MyModule.out""~" >>temp_SendKeys.VBS
ECHO.WScript.sleep 1000 >>temp_SendKeys.VBS
ECHO.handler.SendKeys "ld < MyModule.out~" >>temp_SendKeys.VBS
ECHO.WScript.sleep 1000 >>temp_SendKeys.VBS
ECHO.handler.SendKeys "xdelete ""*data.txt""~" >>temp_SendKeys.VBS
ECHO.WScript.sleep 3000 >>temp_SendKeys.VBS

ECHO.handler.SendKeys "myModule()~" >>temp_SendKeys.VBS
ECHO.WScript.echo "sleeping 1080000ms (18min)" >>temp_SendKeys.VBS
ECHO.WScript.sleep 1080000 >>temp_SendKeys.VBS

:: :::::::::::::::::::::::::::::::::::::::::::::
:: Logout
ECHO.handler.SendKeys "~~exit~" >>temp_SendKeys.VBS
ECHO.WScript.sleep 1000 >>temp_SendKeys.VBS
ECHO.handler.SendKeys "quit~" >>temp_SendKeys.VBS
ECHO.WScript.sleep 1000 >>temp_SendKeys.VBS
ECHO.WScript.echo now() >>temp_SendKeys.VBS

:: Run the script
cscript//nologo temp_SendKeys.VBS
pause 
```

如果我注释掉“发送待完成的内容”部分中的最后三行，则脚本可以正常工作。有了这些行，exit 和 quit 命令似乎不会被执行。我什至没有看到文本回显到 telnet 窗口中。关于原因，我有一些疯狂的理论，但我想从隐藏模块的输出开始，看看是否能解决它。

当然，我总是对新想法持开放态度。

**更新**：

我在我的模块中添加了一个选项来简单地不打印状态消息..所以我可以通过使用 0 或 1 作为参数调用我的方法来切换它。 [这篇文章](https://stackoverflow.com/questions/1644868/c-define-macro-for-debug-printing)帮助我创建了一个用于打印的宏（尽管我使用了一个在运行时由方法的输入 var 设置的静态 int，而不是另一个必须在编译时设置的宏），所以它非常漂亮。

但是，它没有帮助。

好的，所以更多的测试表明，大约 5 分钟似乎是 wscript 将休眠并且仍然能够将击键发送到预期应用程序的最大值。不知道为什么我没有通过谷歌搜索发现任何限制，但是，你去吧。

不过，我确实学到的是，我可以在启动模块后简单地退出并在调用批处理文件中等待。所以它等待，等待，再等待更多（延迟纯粹是任意的，是根据对过去运行的观察选择的 - 很糟糕，我知道，但它是一个开发脚本，每年运行大约 2 次，这已经足够好了，哎呀，它已经是对当前流程的巨大改进），然后继续下一个任务。似乎可以解决问题！

尽管如此，仍然感到困惑，为什么 wscript 在大约 5 分钟后无法正常工作。

# mysql - 列名中包含数字分数的 SELECT 列时出错--myqsql

> ID：12426438
> 
> 赞同：1
> 
> 时间：2012-09-14T14:21:12.580
> 
> 标签：mysql, select, left-join

我的问题是，只要我不包含列`bp.frac_4/8`和`bp2.frac_4/8_2`. 我尝试了几个品种，包括`'bp.frac_4/8'`, `bp.frac_"4/8"`,`bp.frac_'+'4/8`等。
要么我得到了错误

```
#1054 - Unknown column 'frac_4' in 'field list' 
```

或者它只是给了我`frac_4/8`在每一行中写出的列。我怎么解决这个问题？

```
SELECT bp.person_id, DATE(bp.recentDate), bp.amount, bp2.amount2, bp.frac_4/8,
bp2.frac_4/8_2
FROM bestper bp
LEFT JOIN bestper2 bp2
ON bp.person_id=bp2.person_id AND DATE(bp.recentDate)=DATE(bp2.recentDate)
ORDER BY  DATE(bp.recentDate) DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:22:25.293

使用反引号转义`mySQL`

例子

```
SELECT bp.`frac_4/8`,...
FROM... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:23:34.347

在启用 ANSI SQL 模式或反引号的情况下使用双引号。

# sql - Oracle 10 何时打开 UTL_MAIL 连接

> ID：12426439
> 
> 赞同：4
> 
> 时间：2012-09-14T14:21:16.497
> 
> 标签：sql, oracle, email, plsql

我有一个 pl/sql 程序，可以向许多人（20,000+）发送电子邮件。我的问题与 utl_mail 包有关，以及何时实际打开到电子邮件服务器的连接。

例子：

```
BEGIN
...
OPEN CUR_person;
FETCH CUR_person INTO REC_person;    
WHILE CUR_person%FOUND

LOOP
  UTL_MAIL.send(sender => 'me@address.com',
                recipients => 'you@address.com',
                subject => 'Test Mail',
                message => 'Hello World',
                mime_type => 'text/html');
FETCH CUR_person INTO REC_person;                  
END LOOP;

...
END;
/ 
```

我想知道连接是否每人打开一次，或者它是否为第一个人打开，并保持打开状态直到程序完成？

如果每人打开一次 - 那是不好的编码吗？如果我遇到不良数据会爆炸吗？

如果需要更多信息，请询问。谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T14:47:35.967

`UTL_MAIL`隐藏底层`SMTP`API，即`UTL_SMTP`. 通常为了易于使用而优选。如果你看到，`UTL_SMTP`你会注意到你必须`utl_smtp.Rcpt`为每个电子邮件地址做一个，不幸的是它一次只接受一个电子邮件 ID。因此，对于多个电子邮件地址来说，基本逻辑是相同的，即遍历电子邮件地址并调用`utl_smtp.Rcpt`每个电子邮件地址。一个更好的解决方案是只使用电子邮件分发列表，即一个电子邮件 ID，其中包含一组其他电子邮件 ID。所以，`UTL_SMTP`它看起来像下面 -

```
declare
  v_From      VARCHAR2(80) := 'yourhelper@fun.com';
  v_cc        VARCHAR2(80) := 'gethelp@fun.com';  
  v_Recipient VARCHAR2(80) := 'yourhelper@fun.com';
  v_Subject   VARCHAR2(80) := 'test Subject';
  v_Mail_Host VARCHAR2(50) := 'hub.fun.com';
  v_Mail_Conn utl_smtp.Connection;
  crlf        VARCHAR2(2)  := chr(13)||chr(10); 
begin

 v_Mail_Conn := utl_smtp.Open_Connection(v_Mail_Host, 25);
 utl_smtp.Helo(v_Mail_Conn, v_Mail_Host);
 utl_smtp.Mail(v_Mail_Conn, v_From);

 utl_smtp.Rcpt(v_Mail_Conn, v_Recipient); 
 utl_smtp.Rcpt(v_Mail_Conn, v_cc); -- To CC recepient

 utl_smtp.Data(v_Mail_Conn,
   'Date: '   || to_char(sysdate, 'Dy, DD Mon YYYY hh24:mi:ss') || crlf ||
   'From: '   || v_From || crlf ||
   'Subject: '|| v_Subject || crlf ||
   'To: '     || v_Recipient || crlf ||
   'Cc: '     || v_cc || crlf ||
   'Content-Type: text/html;' ||crlf ||
   'Hello this is a test email');

 utl_smtp.Quit(v_mail_conn);
end; 
```

我没有看到您的代码看起来有任何不良编程，如果您有多个电子邮件 ID，这是唯一的方法。Oracle 引擎需要将电子邮件有效负载提交到 SMTP 服务器（由您指定）每个电子邮件 ID，例如将消息提交到队列。一个相当明显的建议是创建几个[分布列表](http://en.wikipedia.org/wiki/Distribution_list)，其中包含一组均匀分布的电子邮件 ID，并使用 DL ID 而不是实际的电子邮件 ID。

这是我的“[问汤姆](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:4251349800346225680)”问题之一，可能会稍微澄清这一点。

另一种快速的方法是修改您的代码以构建一个逗号分隔的电子邮件地址字符串，因为`UTL_MAIL`它可以接受逗号分隔的电子邮件地址，例如 -

```
BEGIN
...
email_list   VARCHAR2(10000) := NULL;
email_count  NUMBER(10) := 0;
FOR c_rec in CUR_person
LOOP
   email_list := c_rec.CUR_person || ' , ' || email_list;
   email_count := email_count +1;
   if (email_count = 100)  --100 email ids at a time
   then
      UTL_MAIL.send(sender => 'me@address.com',
                recipients => email_list,
                subject => 'Test Mail',
                message => 'Hello World',
                mime_type => 'text/html');
       email_list := NULL; 
       email_count := 0; 
   end if;
END LOOP

...
END;
/ 
```

# javascript - 在 webkit 浏览器中通过 Javascript 使用 CSS 重绘减速

> ID：12426444
> 
> 赞同：17
> 
> 时间：2012-09-14T14:21:34.763
> 
> 标签：javascript, jquery, css, webkit, css-transitions

我一直在研究一个使用 CSS3 过渡的幻灯片脚本，或者当它们不可用时使用 jQuery 的动画。我创建了一个自定义函数来执行幻灯片动画，这很合适。一切似乎都运行良好，但我在测试过程中遇到了一个重大障碍。

由于某种原因，在大型幻灯片的过渡前后应用 jQuery CSS 会有很大的延迟。例如，下面链接中的幻灯片大约有 9900 像素宽（容器宽度，其中大部分是隐藏的）。使用 CSS3 过渡和变换属性操纵容器以显示适当的幻灯片。在下面粘贴的第 75 - 82 行之间应用 CSS 会出现延迟。特别是，应用“过渡”CSS 会导致问题。将“过渡”CSS 添加到样式表（而不是使用 JS 应用它），延迟就会消失。然而，这并不是一个真正的解决方案，因为我们只想在特定属性上使用 CSS3 转换，这可能会有所不同（在样式表中使用“全部”会转换一些我们不想动画但定期更改的 CSS）。

动画功能： http: [//pastebin.com/9wumQvrP](http://pastebin.com/9wumQvrP)

幻灯片演示： [http ://www.matthewruddy.com/demo/?p=2431](http://www.matthewruddy.com/demo/?p=2431)

真正的问题在于 iOS，其中幻灯片（有时甚至是浏览器）变得完全无法使用。我无法查明任何错误，并且真的用尽了我调试 JS 的知识。在玩了一会儿之后，我确信它与这部分功能有关，并且在插件中完全禁用 CSS3 支持可以完全消除问题。

我完全陷入困境，非常感谢任何人可以提供的任何帮助。

- - 编辑 - -

我尝试使用原生 Javascript 而不是 jQuery 的 .css 函数来应用 CSS。结果相同，没有更好的性能。另外值得注意的是，这在 Firefox 中根本没有发生，而且似乎只是 Webkit 浏览器的问题。

任何有解决方案的人都乐意为几瓶啤酒捐款！我真的想不通这个！

--- 第二次编辑 ---

好的，所以一直在调试，我可以看到速度变慢是由浏览器重绘周期导致的，该周期需要很长时间。有没有更好的方法来处理它已经在做的事情？绝对定位元素是减少重绘的一种已知方法，但这并不真正有效，因为幻灯片是响应式的。绝对定位幻灯片图像或幻灯片本身会导致其折叠。

--- 第三次编辑 ---

一天后，我取得了一些进展。在元素样式表中添加“transition: all 0s ease” CSS 已经摆脱了通过原帖中提到的自定义动画功能添加内联 CSS 过渡属性引起的重绘。这会带来显着的性能提升，尤其是在转换本身完成后移除内联 CSS 转换属性时。

好东西！但是，现在在转换后移除内联 CSS 转换（用于创建硬件加速转换效果本身）并应用左侧定位时，仍然会出现减速。当两者同时发生时，就会出现减速。

将它们分成两个单独的任务（删除翻译，然后在未指定时间的 setTimeout 中添加左侧位置），再次摆脱重绘 = 性能增益，看起来问题已解决。但有时，CSS 过渡属性没有足够快地被否定，并且翻译删除被动画化。不好，不知道在哪里可以解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:24:38.037

我认为问题是您正在加载巨大的图像:)

它们对于您拥有它们的容器来说太大了，因此您将它们缩小，这更加耗费资源。

尝试调整它们的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T15:40:52.077

首先恭喜您的调试！我最近一直在研究完全相同的东西，发现 ios 设备不支持在同一页面中放置大量图像。它会导致崩溃，我发现的唯一解决方案是删除元素，而不仅仅是隐藏它们。缺点是移除和添加元素会导致延迟，所以当你完成转换时，你必须巧妙地做到这一点。我认为最好的方法是在 DOM 中保留 3 或 5 个图像，然后用图像的缩略图替换其余的图像，调整大小以适合原始图像。转换完成后，我只需将大图像放回原位...希望这至少可以帮助您解决 ios 问题...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T09:28:46.640

在用 Chrome Dev Tools 分析了你的代码 TimeLine 之后，我相信你可以做一些优化。

据我所知，每次请求动画时，您的 16 张图像中的每一张都会被完全重新绘制。这对我来说似乎很明显，因为您的示例中有 16 张图像，并且 Chrome 开发工具每次点击“下一步”都会报告 16 次长“绘制”执行。

在我看来，你应该想出一个只考虑翻译两个图像的解决方案：一个你想要隐藏的图像和一个你想要显示的图像。因此，请考虑不要移动其余图像，而是将它们并排放置到显示的图像中。

还有一件事，使用按比例缩小的图像可能会使绘制周期更长。尽可能避免它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T22:27:20.107

好吧，我想我已经设法弄清楚了！如您所知，原始帖子链接并未反映我在本地主机环境中所做的更改。

绝对定位幻灯片容器解决了在过渡发生后重绘速度出现的问题（同时应用 CSS 属性）。显然，将它们从 DOM 中取出就可以了，让绘制更有效地进行。

我最初并没有尝试太多，因为我知道这会给调整大小功能增加很多工作。我原本打算在 JS 中根本不调整大小，而是依靠百分比来做这些脏活。绝对定位容器会导致幻灯片视口折叠，从而使本机调整大小变得无用。

但是，无论如何，我已经在其他浏览器中遇到了亚像素渲染的问题，所以我想是时候硬着头皮依靠固定的像素值了。然后我使用 JS 来处理调整大小，使用窗口调整大小事件。一切似乎都很好，但是由于定位，幻灯片仍然折叠。分配高度值不能正常工作，所以有点茫然。

幸运的是，我遇到了一个巧妙的小技巧，将幻灯片视口的“顶部填充”设置为动态计算的百分比值（所需的幻灯片高度，在此脚本的设置面板中设置，除以所需的宽度）。由于 padding-top 百分比是相对于元素的宽度，这在提供响应高度和再次校正视口（不再看起来折叠）方面做得很好。

这是一些关于使用 padding-top 来保持纵横比的响应元素的信息。很棒的小技巧： http: [//f6design.com/projects/responsive-aspect-ratio/](http://f6design.com/projects/responsive-aspect-ratio/)

现在一切都很好，并且在 iOS 和 webkit 浏览器中运行良好。一切都非常快，并且可以正常工作。四天后，终于弄明白了。不得不求助于 JS 来调整大小并不高兴，但我想由于浏览器之间的百分比不一致，它总是会发生。很多小数=不好！

感谢所有试图为我指明正确方向的人。绝对让我思考，并学到了很多调试技巧，我可以再次使用这些技巧来确保转换性能良好。再次感谢！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T23:00:00.907

不确定这是否有帮助，但我注意到你使用 3d 翻译 - 我认为一个简单的 2d 翻译就足够了，特别是因为你的第三个参数是 0 并且可能会加速问题，也像 Armel L. 建议的那样使用更少的图像，不要'虽然没有要测试的 iphone... 或者，这是我在 css3 之前使用的解决方案，但仍然可以通过修改 left (? 和 top - 演示只向左和向右移动来移动包含图像的元素？没有过渡效果），通过这种方式你可以微调刷新率，我认为这可能会导致速度下降......你可以在没有人注意到的情况下低至 18 fps，甚至可能只需要 16 fps 就足够了

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T04:12:57.893

当我第一次设计杂志轮播式页面设备时，我就有了这个。

If you have a series of images within a long "tray", even if they are not within the viewport, they will still take up ram, and you can effectively have five or so before leaks and nastiness begin to happen.

What I found works is "hiding" them ... But make sure they take up the physical space necessary.

What I also found worked was that one could make the 'previous' current and 'next' image are visible and move the tray, 'unhiding' them as they reach those three positions.

In my own system, I skipped the 'tray' holding e images and only had them at -100% width, 100% width and the current one a 0.

I never had much luck with the typical long-tray carousel with large scale background images... Especially with css3 acceleration.

# c# - midi如何与采样器匹配？

> ID：12426445
> 
> 赞同：1
> 
> 时间：2012-09-14T14:21:37.180
> 
> 标签：c#

我打算创建一个项目来播放 MIDI 文件到以 .wav 格式录制的定制采样器。目前我可以通过 GM 播放 midi，但我不知道如何将 midi 与采样器“匹配”。

我目前正在研究 C# Synth 和 NAaudio，但由于它们的文档不完整而面临困难。

非常感谢您的帮助。先感谢您。

# sql-server - NOT IN 子查询优化

> ID：12426446
> 
> 赞同：1
> 
> 时间：2012-09-14T14:21:38.570
> 
> 标签：sql-server

我有一个动态查询，它运行识别成员尚未租用的 CD。我正在使用 NOT IN 子查询，但是当我有大型成员表时，它们会变得非常慢。关于如何优化查询的任何建议

```
SELECT DVDTitle AS "DVD Title" 
FROM DVD 
WHERE DVDId NOT IN 
    (SELECT DISTINCT DVDId FROM Rental WHERE MemberId = AL240); 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T14:23:33.567

使用`NOT EXISTS`将具有稍微更好的性能，因为它可以“短路”而不是评估每个匹配的整个集合。至少，它不会比`NOT IN`或更“差” `OUTER JOIN`，尽管每条规则都有例外。以下是我将如何编写此查询：

```
SELECT DVDTitle AS [DVD Title] 
  FROM dbo.DVD AS d
  WHERE NOT EXISTS 
  (
    SELECT 1 FROM dbo.Rental 
     WHERE MemberId = 'AL240'
     AND DVDId = d.DVDId
  ); 
```

我猜你会通过调查执行计划并确保你的索引最适合这个查询来更好地优化性能（不会对工作负载的其他部分造成负面影响）。

另请参阅[我应该使用 NOT IN、OUTER APPLY、LEFT OUTER JOIN、EXCEPT 还是 NOT EXISTS？](http://sqlperformance.com/2012/12/t-sql-queries/left-anti-semi-join)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T14:24:22.890

```
SELECT DVDTitle AS "DVD Title" 
FROM DVD d
left outer join Rental r on d.DVDId = r.DVDId
WHERE r.MemberId = 'AL240'
    and r.DVDId is null 
```

确保您有以下索引：

```
d.DVDId
r.DVDId
r.MemberId 
```

# jstree - JStreeGrid Microsoft JScript 运行时错误：对象不支持此属性或方法

> ID：12426447
> 
> 赞同：1
> 
> 时间：2012-09-14T14:21:40.650
> 
> 标签：jstree

我在 ASP.NET 应用程序中使用 JSTreeGrid。JSTreeGrid 的实现在其设计用于测试的应用程序中运行良好。但是，当我将其移至另一个应用程序时，我收到以下错误消息：

Microsoft JScript 运行时错误：对象不支持此属性或方法

当我最初移动实施时，我发现并纠正了与使用 Masterpages 的新申请表相关的问题。容器名称连接到 div 标签，脚本没有找到脚本中指定的声明的 div 标签 ID。我从中移动它的应用程序没有使用 Masterpages。我有理由确信该错误是相关的。

运行脚本的 obj.each(function () 部分时，jstreegrid 脚本中的 _prepare_grid: 函数中发生错误。

任何见解将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:14:15.970

当您使用母版页时，您的 DOM 元素的客户端 ID 由服务器操纵。这是因为您可能会在母版页和派生页中使用相同的 id...当调用 Jquery 函数时，我猜您使用的是 id 选择器，即`$('#someID').doSomething()`...

使用 master 时，其中一种解决方案是使用以下选择器作为示例：

```
$('[id$=myButton]').click(function(){ alert('button clicked'); }); 
```

这意味着 Jquery 将选择 ID 属性以“myButton”结尾的元素。

有关更多信息，请关注此帖子。

[如何将 JQuery 与母版页一起使用？](https://stackoverflow.com/questions/12382156/using-dragdrop-with-jstree-and-datatables/12435157#12435157)

# android - 如何在 Android 4.0.3 中通过 Socket 进行通信

> ID：12426451
> 
> 赞同：0
> 
> 时间：2012-09-14T14:22:01.367
> 
> 标签：android, c, sockets, communication

我已经有一个在 2.3 版本中可以正常工作的套接字通信接口，但是它在 4.0.3 上不起作用，我听说在这个版本中不可能在与 UI 相同的线程中进行这种通信，所以，我是 android 的初学者，在 4.0.3 版本中没有找到任何关于这种类型通信的例子，你有一些例子或者可以告诉我怎么做吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:43:53.353

当您使用 ICS 或 JB 时，您无法从主要活动中打开网络连接。您将收到有关网络权限的不透明错误消息。从 ICS 开始就是这样（所以 froyo 和 GB 不会抱怨）。

我不能在这里重新发布我对另一个非常相似的 StackOverflow 问题的回答（它被版主认为是垃圾邮件），但你可以在[这里查看](https://stackoverflow.com/a/14249385/1166727)。

我在那里使用 asynctask 发布了一个功能性的发送和接收套接字连接器客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:44:50.727

在不同线程上工作的最简单方法是使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。请注意，如果上下文被破坏，例如屏幕旋转，您的 AsyncTask 将会中断。您还需要处理此类事件。

你可以阅读[这个 SO question](https://stackoverflow.com/questions/9681528/maintaining-a-tcp-connection-in-an-asynctask)并从那里开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T15:13:08.007

[这是来自AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)文档的引用：

> AsyncTasks 最好用于短时间的操作（最多几秒钟）。如果您需要保持线程长时间运行，强烈建议您使用 java.util.concurrent 包提供的各种 API，例如Executor、ThreadPoolExecutor 和 FutureTask。

# asp.net - 如何根据 URL 将用户重定向到 IIS 中的新页面

> ID：12426453
> 
> 赞同：0
> 
> 时间：2012-09-14T14:22:06.870
> 
> 标签：asp.net, iis-7

我有一个基于 projectID 打开某些项目的网络应用程序

所以 ID 12345 = 项目**foobar**

[http://my.example.com?projID=12345](http://my.example.com?projID=12345)

但是，我想提供一个不需要 projectid 的不同站点，并且更容易为最终用户记住。

所以如果用户访问

[http://simple.example.com/foobar](http://simple.example.com/foobar)（注意这是一个不同的站点，虽然我想如果更容易的话我们可以把它放在同一个站点中）

他们会自动被重定向到

[http://my.example.com?projID=12345](http://my.example.com?projID=12345)

显然，我想要一个系统，其中我可以有更多条目，而不仅仅是 foobar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:27:44.827

在我看来，您应该使用它`ashx`来处理网络请求。这是您正在寻找的非常简单而美丽的示例：-

[http://www.dotnetperls.com/ashx](http://www.dotnetperls.com/ashx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:22:04.580

如果您不想使用上面提到的重写模块，您总是可以通过实现自定义 404 处理程序并关闭 aspxerrorpath 或将代码放在自定义 httpHandler 中来自己完成。

我们实际上是在我们的一个应用程序中做到这一点的。我们使用 cms 系统来指定所有重定向，因此没有什么是真正硬编码的，营销人员和 SEO 团队可以在没有我们帮助的情况下处理它。

# android - 获取安卓应用的 tumblr 图片

> ID：12426459
> 
> 赞同：-1
> 
> 时间：2012-09-14T14:22:22.240
> 
> 标签：android, json, image, api, tumblr

我正在尝试使用 JSON 创建一个显示来自 tumblr 帐户的图像的应用程序。我通过更改我为一个几乎做同样事情的 twitter 应用程序所拥有的一些代码来做到这一点。不幸的是，我发现 tumblr api 更难使用，而且我能找到的所有示例都是为 php 制作的，因此无济于事。此行的 nullPointerException：

```
for (int i = 0; i < arr.length(); i++) { 
```

JSON 通过 jsonlint.com 进行验证，如下所示：

```
"meta": {
    "status": 200,
    "msg": "OK"
},
"response": {
    "blog": {
        "title": "Facts and Chicks",
        "posts": 789,
        "name": "factsandchicks",
        "url": "http://factsandchicks.com/",
        "updated": 1347565227,
        "description": "Random facts and hot chicks, the best way to learn.\nWebsite and Concept by: GustoNYC",
        "ask": false
    },
    "posts": [
        {
            "blog_name": "factsandchicks",
            "id": 31474135003,
            "post_url": "http://factsandchicks.com/post/31474135003/ups-was-founded-by-two-teenagers-with-one-bicycle",
            "slug": "ups-was-founded-by-two-teenagers-with-one-bicycle",
            "type": "photo",
            "date": "2012-09-13 19:37:59 GMT",
            "timestamp": 1347565079,
            "state": "published",
            "format": "html",
            "reblog_key": "iWEenkAh",
            "tags": [
                "facts",
                "factsandchicks",
                "chicks",
                "UPS",
                "teenagers",
                "friends",
                "business",
                "America",
                "WTF",
                "money",
                "inspiration",
                "history"
            ],
            "highlighted": [],
            "note_count": 241,
            "source_url": "http://factsandchicks.com",
            "source_title": "factsandchicks.com",
            "caption": "<p>UPS was founded by two teenagers with one bicycle and $100 Borrowed from a Friend.</p>\n<p><a href=\"http://www.ups.com/content/corp/about/history/1929.html\" target=\"_blank\">source</a></p>",
            "link_url": "http://factsandchicks.com",
            "photos": [
                {
                    "caption": "",
                    "alt_sizes": [
                        {
                            "width": 640,
                            "height": 960,
                            "url": "http://25.media.tumblr.com/tumblr_m8fz0bLjJU1r3tp7bo1_1280.jpg"
                        },
                        {
                            "width": 500,
                            "height": 750,
                            "url": "http://25.media.tumblr.com/tumblr_m8fz0bLjJU1r3tp7bo1_500.jpg"
                        },
                        {
                            "width": 400,
                            "height": 600,
                            "url": "http://24.media.tumblr.com/tumblr_m8fz0bLjJU1r3tp7bo1_400.jpg"
                        },
                        {
                            "width": 250,
                            "height": 375,
                            "url": "http://25.media.tumblr.com/tumblr_m8fz0bLjJU1r3tp7bo1_250.jpg"
                        },
                        {
                            "width": 100,
                            "height": 150,
                            "url": "http://24.media.tumblr.com/tumblr_m8fz0bLjJU1r3tp7bo1_100.jpg"
                        },
                        {
                            "width": 75,
                            "height": 75,
                            "url": "http://24.media.tumblr.com/tumblr_m8fz0bLjJU1r3tp7bo1_75sq.jpg"
                        }
                    ],
                    "original_size": {
                        "width": 640,
                        "height": 960,
                        "url": "http://25.media.tumblr.com/tumblr_m8fz0bLjJU1r3tp7bo1_1280.jpg"
                    }
                }
            ]
        }, 
```

我的代码如下所示：

```
public class Example extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<Tweet> tweets;
    try {
        tweets = getTweets();
        ListView listView = (ListView) findViewById(R.id.ListViewId);
        listView.setAdapter(new UserItemAdapter(this, R.layout.listitem,
                tweets));
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public class UserItemAdapter extends ArrayAdapter<Tweet> {
    private ArrayList<Tweet> tweets;

    public UserItemAdapter(Context context, int imageViewResourceId,
            ArrayList<Tweet> tweets) {
        super(context, imageViewResourceId, tweets);
        this.tweets = tweets;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.listitem, null);
        }

        Tweet tweet = tweets.get(position);
        if (tweet != null) {

            ImageView image = (ImageView) v.findViewById(R.id.avatar);

            if (image != null) {
                image.setImageBitmap(getBitmap(tweet.image_url));
            }
        }
        return v;
    }
}

public Bitmap getBitmap(String bitmapUrl) {
    try {
        URL url = new URL(bitmapUrl);
        return BitmapFactory.decodeStream(url.openConnection()
                .getInputStream());
    } catch (Exception ex) {
        return null;
    }
}

public ArrayList<Tweet> getTweets() throws ClientProtocolException,
        IOException, JSONException {
    String searchUrl = "http://api.tumblr.com/v2/blog/factsandchicks.com/posts?api_key=API_KEY";

    ArrayList<Tweet> tweets = new ArrayList<Tweet>();

    HttpClient client = new DefaultHttpClient();
    HttpGet get = new HttpGet(searchUrl);

    ResponseHandler<String> responseHandler = new BasicResponseHandler();

    String responseBody = null;
    try {
        responseBody = client.execute(get, responseHandler);
    } catch (Exception ex) {
        ex.printStackTrace();
    }

    JSONArray posts = JSONObject.getJSONObject("response").getJSONArray(
            "posts");

    for (int i = 0; i < posts.length(); i++) {
        JSONArray photos = posts.getJSONObject(i).getJSONArray("photos");
        for (int j = 0; j < photos.length(); j++) {
            JSONObject photo = photos.getJSONObject(j);
            String url = photo.getJSONArray("alt_sizes").getJSONObject(0)
                    .getString("url");

            Tweet tweet = new Tweet(url);
            tweets.add(tweet);
    }

    return tweets;
}

public class Tweet {

    public String image_url;

    public Tweet(String url) {

        this.image_url = url;
    }
} 
```

}

我不知道为什么这不起作用，因为我可以使它适用于 twitter。任何帮助都会得到帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:44:37.017

您从 JSON 中读取“响应”作为数组，但它不是数组，只是一个对象。似乎这是一个问题。您不会像在 JSON 中那样读取对象，请多加注意！

尝试做这样的事情：

```
JSONArray posts = jsonObject.getJSONObject("response").getJSONArray("posts");
for(int i = 0; i < posts.length(); i++){
    JSONArray photos = posts.getJSONObject(i).getJSONArray("photos");
    for(int j = 0; j < photos.length(); j++){
        JSONObject photo = photos.getJSONObject(j);
        String url = photo.getJSONArray("alt_sizes").getJSONObject(0).getString("url");

        Tweet tweet = new Tweet(url);
        tweets.add(tweet);
    }
} 
```

我目前无法测试这个，希望我没有做任何错误。

# c++ - 可能的内存泄漏？

> ID：12426473
> 
> 赞同：4
> 
> 时间：2012-09-14T14:23:21.767
> 
> 标签：c++, oop, visual-c++

我是这个概念的新手，所以不要对我太苛刻。为什么这段代码不产生析构函数调用？类的名称是不言自明的。SString 将在 ~SString() 中打印一条消息。它只打印一条析构函数消息。

```
int main(int argc, TCHAR* argv[])
{
smart_ptr<SString> smt(new SString("not lost"));
 new smart_ptr<SString>(new SString("but lost")); 
return 0;
} 
```

这是内存泄漏吗？暗示。对于 smart_ptr 来自 [这里](http://www.codeproject.com/Articles/2997/A-generic-C-template-class-to-implement-a-smart-po)

**编辑：**

```
//copy ctor
    smart_ptr(const smart_ptr<T>& ptrCopy) 
    {
        m_AutoPtr = new T(ptrCopy.get());
    }
    //overloading = operator
    smart_ptr<T>& operator=(smart_ptr<T>& ptrCopy) 
    {
        if(m_AutoPtr)
            delete m_AutoPtr;
        m_AutoPtr = new T(*ptrCopy.get());
        return *this;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T14:26:41.813

通过`new smart_ptr<SString>(new SString("but lost"));`您创建一个新的、动态分配的智能指针。您不会将分配的结果（指向 a 的指针`shared_ptr`）`SString`存储在任何地方，它是悬空的......因为您不存储结果，所以您也不能调用`delete`它 - 因此它的析构函数不会被调用，反过来也`SString`不会调用所包含对象的析构函数！

如果你试试

```
smart_ptr<SString> *p = new smart_ptr<SString>(new SString("but lost")); 
delete p; 
```

相反，您将看到在这种情况下也调用了析构函数。

但是，这不是明智的使用 a `smart_ptr`。`smart_ptr`已创建，因此您**无需**`delete`手动调用；因此，不要那样使用它们；在您的第一个语句中使用它们！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-14T14:26:49.790

智能指针的要点是您应该只有*自动*智能指针对象：

```
{
    smart_ptr<Foo> p(new Foo);
}
// bye bye Foo 
```

但是，您的第二行创建了一个*动态*智能指针，它的生命永无止境！因此，它永远没有机会摧毁它负责的对象。

您必须手动删除智能指针本身，以便它可以反过来清理对象：

```
auto sp = new smart_ptr<Foo>(new Foo);
//                           ^^^^^^^
//        ^^^^^^^^^^^^^^           +------< dynamic Foo, handled by the SP
//                     |
//                     +---------------< dynamic smart pointer, handled by YOU

delete sp; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-14T14:26:24.893

是的，智能点本身已经泄露。（以及它所引用的任何内容）。

我想不出`new`一个智能指针的好理由......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-14T14:27:53.967

是的，这是内存泄漏，您正在泄漏第二个智能指针及其内容。

原因是第一个智能指针是在堆栈上创建的，所以它的生命周期限定在它声明的块中，之后它会被自动销毁。

第二个是在堆上创建的，这意味着它会一直存在，直到你销毁它`delete`，此时它的析构函数将被调用（并且`SString`它所持有的析构函数）。

# wpf - 附加属性返回 null

> ID：12426474
> 
> 赞同：2
> 
> 时间：2012-09-14T14:23:32.420
> 
> 标签：wpf, attached-properties

我有以下附加属性定义：

```
public class TestFocusManager
{
    public static readonly DependencyProperty FocusedElementProperty =
      DependencyProperty.RegisterAttached("FocusedElement", 
          typeof (UIElement), typeof(TestFocusManager));

    public static UIElement GetFocusedElement(DependencyObject obj)
    {
      return (UIElement) obj.GetValue(FocusedElementProperty);
    } 

    public static void SetFocusedElement(DependencyObject obj, UIElement value)
    {
      obj.SetValue(FocusedElementProperty, value);
    }
} 
```

当我尝试在我的用户控件中使用它时：

```
<UserControl xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:sys="clr-namespace:System;assembly=mscorlib" 
             mc:Ignorable="d" 
             xmlns:Behaviors="clr-namespace:MyLocalProject.Behaviors" 
             Behaviors:TestFocusManager.FocusedElement="{Binding ElementName=testElement}"
             x:Class="LocalProject.TestView"
             x:Name="_testView">
    <TextBox x:Name="testElement" />
</UserControl> 
```

附加的属性总是返回一个空...

```
var result = TestFocusManager.GetFocusedElement(_testView); // <-- null...
var result2 = _testView.GetValue(TestFocusManager.FocusedElementProperty); // <-- again, null... 
```

我在这里做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:08:11.917

您的问题是`GetFocusedElement`在实际设置绑定之前调用它（您可能在 UserControl 的构造函数中调用它）。如果你在`Loaded`事件中调用它，它应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:02:11.563

我测试了你的代码，它对我来说很好，除了你在依赖属性设置器中省略了“public”关键字。

我假设这是一个错字，如果不是，那就是你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T04:49:20.980

```
local:TestFocusManager.FocusedElement="{Binding RelativeSource={RelativeSource Self}}" 
```

您可以获得对用户控件本身的引用并公开一个提供按钮的公共属性。您可以将此作为最后的手段！

顺便说一句，每当我遇到附加属性问题时。我通常倾向于放置回调或将类型更改为 Object 的类型，我的意思是 UIElement 倾向于使用对象，至少我得到一个回调并检查作为回调的一部分的确切类型是什么

干杯

# visual-studio - 声明变量时出现 T-SQL 错误

> ID：12426480
> 
> 赞同：0
> 
> 时间：2012-09-14T14:23:39.277
> 
> 标签：visual-studio, tsql

```
Declare @ID nvarchar(14) = '12345678912345'  
DECLARE @Key int = (SELECT  key
                           FROM    table
                           WHERE   id = @ID) 

Declare @indicator varchar(1) = 'A' 

Declare @rdate Datetime = (SELECT LTRIM(RTRIM(Left(CAST(GetDate() AS Datetime2),23))))

SELECT @ID 
GO
SELECT @Key 
GO
SELECT @indicator 
GO
SELECT @date 
GO 
```

执行上述代码时出现错误。我看到@ID 打印，它消失了，我收到以下消息。

"必须声明标量变量 "@Key"

"必须声明标量变量 "@indicator"

"必须声明标量变量 "@date"

表中的数据类型：ID = nvarchar(14)、key = int、indicator = varchar(1) 和 date = timestamp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:25:42.283

`Go`将结束作用域并销毁变量。

改用`;`a

```
SELECT @ID;SELECT @Key;SELECT @indicator;SELECT @rdate; 
```

# vb.net - SQlite：提供给命令的参数不足

> ID：12426482
> 
> 赞同：0
> 
> 时间：2012-09-14T14:23:40.897
> 
> 标签：vb.net, sqlite

我一直在查看下面的代码，天知道有多久了，我似乎找不到问题所在。我看到的与所述错误有关的大多数讨论都表明来源来自参数的拼写错误。但是为什么要撒谎，我看不到任何错字。有人可以告诉我哪里出错了吗？

```
Dim dt As System.Data.DataTable = New System.Data.DataTable
dim sqlText as string
sqlText = "SELECT id AS privilegeID, " & _
"user_id AS userID, " & _
"module_id AS moduleID, " & _
"can_read AS canRead, " & _
"can_create AS canCreate, " & _
"can_update AS canUpdate, " & _
"can_delete AS canDelete, " & _
"is_deleted AS isDeleted, " & _
"is_active AS isActive " & _
"FROM base_user_privilege " & _
"WHERE " & _
"user_id=@userID AND " & _
"is_deleted=@isDeleted AND " & _
"is_active=@isActive"
SetDBCommand(sqlText)
DBCommand.Parameters.AddWithValue("@userID", userID)
DBCommand.Parameters.AddWithValue("@isDeleted", IsDeleted)
DBCommand.Parameters.AddWithValue("@isActive", IsActive)
dt = DBAction(sqlText, DBActionType.DataTable) 
```

setdbcommand **(sqltext)**旨在建立连接并且它可以工作，所以我认为错误不存在，因为它在其他 select 和 insert 语句上工作。

请协助。

谢谢。

**编辑**

这是 setdb 命令：

```
Public Sub SetDBCommand(ByVal sqlString As String)
    If DBConnection.State = ConnectionState.Closed Then
        DBConnection.Open()
    End If
    DBCommand = New SQLiteCommand(sqlString, DBConnection)
End Sub 
```

**适用于阅读器但不适用于数据表**

我已经意识到，使用我的数据连接函数，上述参数在通过**DataReader传递时有效，但在通过****DataTable**传递时不起作用。是否缺少某些东西？参数是否适用于 DataTables？

```
Public Function DBAction(ByVal sqlText As String, ByVal ActionType As DBActionType) As Object
    DBAction = Nothing
    Select Case ActionType
        Case DBActionType.DataReader
            Return DBCommand.ExecuteReader
        Case DBActionType.Dataset
            Dim MyAdpater As New SQLiteDataAdapter(sqlText, DBConnection)
            Dim myDataSet As New System.Data.DataSet
            MyAdpater.Fill(myDataSet)
            Return myDataSet
        Case DBActionType.DataTable
            Dim MyAdpater As New SQLiteDataAdapter(sqlText, DBConnection)
            Dim MyDataTable As New System.Data.DataTable
            MyAdpater.Fill(MyDataTable)
            Return MyDataTable
        Case DBActionType.executeNonQuery
            DBCommand.ExecuteNonQuery()
        Case DBActionType.ExecuteScalar
            Dim ScalarItem As Object = DBCommand.ExecuteScalar
            Return ScalarItem
        Case Else
            Throw New Exception("Error in DBACTION")
    End Select
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:03:14.957

创建 SQLiteDataAdapter 时，必须将 DBCommand 作为参数提供。作为奖励，您不需要提供连接参数，因为您已经正确设置了命令：

```
Public Function DBAction(ByVal sqlText As String, ByVal ActionType As DBActionType) As Object
    DBAction = Nothing
    Select Case ActionType
        Case DBActionType.DataReader
            Return DBCommand.ExecuteReader
        Case DBActionType.Dataset
            Dim MyAdpater As New SQLiteDataAdapter(DBCommand)
            Dim myDataSet As New System.Data.DataSet
            MyAdpater.Fill(myDataSet)
            Return myDataSet
        Case DBActionType.DataTable
            Dim MyAdpater As New SQLiteDataAdapter(DBCommand)
            Dim MyDataTable As New System.Data.DataTable
            MyAdpater.Fill(MyDataTable)
            Return MyDataTable
        Case DBActionType.executeNonQuery
            DBCommand.ExecuteNonQuery()
        Case DBActionType.ExecuteScalar
            Dim ScalarItem As Object = DBCommand.ExecuteScalar
            Return ScalarItem
        Case Else
            Throw New Exception("Error in DBACTION")
    End Select
End Function 
```

顺便说一句，由于我在您发布的代码中的任何地方都没有看到它们，因此请确保您正确处理了`SQLiteCommand`and`SQLiteDataAdapter`对象。连接应关闭，然后在完成后处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T16:35:44.863

您的问题是您将参数添加到 DBCommand 但在 case 语句中您的适配器从不使用 DBCommand 它只获取您传入的字符串（sqlText）。

一种可能的解决方案是不将 sqlText 作为参数传入，而是将整个命令传入并将其分配给您的 MyAdapter.SelectCommand

```
Function DBAction( inCommand As SQLiteCommand, ActionType As DBActionType) 
```

# sql - SQL 使用 PK 获取不同的记录

> ID：12426491
> 
> 赞同：0
> 
> 时间：2012-09-14T14:24:25.103
> 
> 标签：sql, distinct

这是我的表数据...让我们将此表称为 TABLEX

```
ID         COL1          COL2
------------------------------
 100         a             b
 101         x             y
 102         a             b
 103         c             d
 104         e             f
 105         a             b
 106         c             d
 107         x             y 
```

我希望从此表中检索以下记录

```
ID         COL1          COL2
------------------------------
 100         a             b
 101         x             y
 103         c             d
 104         e             f 
```

换句话说，我想从 COL1 + COL2 中检索不同的值，但也要与记录的 ID 一起显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T14:25:46.773

```
select min(id) as id, col1, col2
from Tablex
group by col1, col2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:25:54.510

我观察到您返回每个相同的最低 ID`col`和`col2`.

```
SELECT MIN(ID) `ID`, col1, col2
FROM tableName
GROUP BY col1, col2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T14:26:15.497

您还没有说过要如何为给定的一组值选择要显示的记录 ID。您的样本意味着您想要最低的样本。

```
SELECT MIN(id) as id, col1, col2
  FROM your_table
  GROUP BY col1,cold2
  ORDER BY MIN(id) 
```

# jquery - 多个相同 div 上的 jQuery，不使用唯一 ID？

> ID：12426495
> 
> 赞同：1
> 
> 时间：2012-09-14T14:24:32.017
> 
> 标签：jquery, jquery-selectors

简而言之问题：我正在尝试仅在您单击的元素上进行简单的显示/隐藏切换，而现在所有（13）个 div 都会受到该功能的影响。

每个 div 的结构如下所示

```
<div class="selectbox">
    <h5>Title</h5>
    <p>
        Content
    </p>
</div> 
```

使用此 jquery 代码

```
$('.selectbox h5').click(function(){
         $('div.selectbox,p,span').toggle();
         $('.selectbox').toggle();
    }); 
```

所以现在，jquery 工作。但显然，它对页面上的每个“选择框”div 都有效。如何仅在我单击的元素上进行此操作，*而不为每个“选择框” div 使用唯一的 id？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T14:26:04.597

```
$('.selectbox h5').click(function(){
     $(this).parent().find('p,span').toggle(); 
     $(this).parent().toggle(); // this line should probably be removed 
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T14:28:18.863

使用`$(this)`-

```
$('.selectbox h5').click(function(){

  $(this).closest('.selectbox, p, span').toggle();
  //$('.selectbox').toggle();

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T14:26:58.507

您可以在函数中使用关键字`this`，它表示触发事件的项目。在这种情况下，您的 H5。

```
$('.selectbox h5').click(function(){
         $(this).closest('.selectbox').toggle();
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T14:26:53.337

简单点。。

如果您希望父 DIV 切换，那么只需 `$(this).parent().toggle();` 在您的函数中使用。pe：如果你想`<p>`在你的 div 中使用，你可以像这样处理它`$('p', $(this).parent()).toggle();`

# python - 无法让 sphinx 在 toctree 下链接到另一个文档

> ID：12426496
> 
> 赞同：12
> 
> 时间：2012-09-14T14:24:33.280
> 
> 标签：python, python-sphinx, restructuredtext, toctree

我正在尝试学习狮身人面像，并且只停留在基本示例上。我`make html`在源目录中收到以下错误。

```
Running Sphinx v1.1.3
loading pickled environment... not yet created
building [html]: targets for 2 source files that are out of date
updating environment: 2 added, 0 changed, 0 removed
reading sources... [100%] intro                                                 
/home/owner/Desktop/doc/index.rst:11: ERROR: Error in "toctree" directive:
invalid option block.

.. toctree::
   :maxdepth: 2
   intro.rst
looking for now-outdated files... none found
pickling environment... done
checking consistency... /home/owner/Desktop/doc/intro.rst:: WARNING: document isn't included in any toctree
done
preparing documents... done
writing output... [100%] intro                                                  
writing additional files... genindex search
copying static files... done
dumping search index... done
dumping object inventory... done
build succeeded, 2 warnings.

Build finished. The HTML pages are in _build/html. 
```

我也尝试过引用`intro`而`intro.rst`不是似乎都不起作用。`index.rst`并且`intro.rst`在同一个目录中。我使用`sphinx-quickstart`所有默认选项制作了项目。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-14T14:27:53.070

您需要在指令的选项和它的内容之间有一个空行。您也不需要文件扩展名。将其更改为：

```
.. toctree::
   :maxdepth: 2

   intro 
```

# app-store - iOS 6 - 评价应用链接被破坏？

> ID：12426500
> 
> 赞同：2
> 
> 时间：2012-09-14T14:24:50.820
> 
> 标签：app-store, ios6, rate

我已经在我的 iPhone 4（不是 4S）上安装了 iOS 6 GM，我自己的应用程序中的“评分”按钮和其他人不再做他们的事情。相反，它会打开带有“无法连接到 iTunes 商店”的应用商店。来自 safari 的常规应用程序链接工作正常。

我正在使用这种形式的链接：

```
itms-apps://ax.itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&id=<APP_ID> 
```

例如，从 iOS 5.1 上的 safari，此页面上的链接可以正常工作： [http ://elenzil.com/scratch/appstore](http://elenzil.com/scratch/appstore)

但与 iOS 6 相同的测试产生了我描述的问题。

.. 我不得不说，iOS 6 GM 中的 App Store 总体上似乎有点问题。我主要是在滚动搜索结果列表时看到问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:51:21.213

我们也遇到了这个问题，但苹果今天早上似乎进行了修复。无需更新 iOS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:24:17.433

我正在使用 http，它在 iOS6 中运行良好。

[http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?id=xxxxxxxxxx&onlyLatestVersion=true&pageNumber=0&sortOrdering=1&type=Purple+Software](http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?id=xxxxxxxxxx&onlyLatestVersion=true&pageNumber=0&sortOrdering=1&type=Purple+Software)

只是分享我使用的东西。

# r - R gWidgets 在两个 gtable 之间拖放

> ID：12426501
> 
> 赞同：1
> 
> 时间：2012-09-14T14:24:54.200
> 
> 标签：r, user-interface, drag-and-drop, gwidgets

我正在用 R 中的 gwidgets 包编写一个 GUI。我正在实现一个工具，它允许用户从一个列表中选择多个变量，并将它们拖到一个空列表中进行收集。灵感来自 SPSS 的 gui，请参见链接：

[spss拖拽](http://www.google.ch/imgres?q=spss&hl=en&sa=X&rlz=1C1LENP_enCH496CH496&biw=1600&bih=839&tbm=isch&prmd=imvnsb&tbnid=LW3P0soLctBbZM%3a&imgrefurl=http://www.macstats.org/reviews/spss.html&docid=wbtbCCnhbV3fDM&imgurl=http://www.macstats.org/web-photos/spss/regression-box.gif&w=633&h=466&ei=RzxTUI_BKsT24QT59oCwCA&zoom=1&iact=rc&dur=1221&sig=106353708324515561161&page=1&tbnh=139&tbnw=189&start=0&ndsp=28&ved=1t:429,r:16,s:0,i:176&tx=159&ty=110)

我打算用两个 gtable 来做这件事，即首先创建一个带有变量列表的 gtable，然后创建一个空 gtable 来收集选定的变量。下面是我的示例代码：

```
 portfolioBuilder <- function(h,...){
  ## globals
  widgets <- list()
  varNames <- c("var1","var2","var3","var4" )#with(.GlobalEnv, names(data))

  #window
  win <- gwindow("Test")

  #groups
  g <- ggroup(horizontal = FALSE, container = win, expand = TRUE)
  gg <- ggroup(horizontal = FALSE, container = win, expand = TRUE)

  #graphics container
  ggraphics(container = gg)

  #paned group
  pg <- gpanedgroup(container = g, expand = TRUE)
  nb <- gnotebook(container = pg)

  ## main group
  qpg <- ggroup(horizontal = FALSE, container = nb, label = "portfolio")
  parg <- ggroup(horizontal = FALSE, container = nb, label = "portfolio args")

  ## qplot group
  tbl <- glayout(container = qpg)

  #variable list
  tbl[1,1,anchor = c(1,0)] <- "Variables"
  tbl[2:10,2] <- (widgets[["table"]] <- gtable(varNames, multiple = TRUE, container = tbl, expand = TRUE))
  tbl[3,3, anchor = c(1,0)] <- "y"
  tbl[3,4] <- (widgets[["y"]] <- gedit("", container = tbl))
  tbl[4,3, anchor = c(1,0)] <- "x"
  tbl[4,4] <- (widgets[["x"]] <- gtable(c(""),container = tbl))

  ## make table visible and set tab
  visible(tbl) <- TRUE
  svalue(nb) <- 1

  ##################################end layout#################################

  } 
```

但是，由于 gtable 小部件为空，我的示例代码会吐出一个错误。有谁知道如何用 gwidgets 完成这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:15:02.487

您需要处理布局，但关键是 addDropSource 和 addDropTarget：

选项（guiToolkit="RGtk2"）库（gWidgets）

```
w <- gwindow(visible=FALSE)
g <- gpanedgroup(cont=w)

tbl <- gtable(names(mtcars), cont=g)

fl <- gframe("variables", horizontal=FALSE, cont=g)

dep <- gedit(initial.msg="Dependent variable", label="Dependent", cont=fl)
ind <- gedit(initial.msg="Independent variable(s)", label="Independent", cont=fl)

addDropSource(tbl, handler=function(h,...) svalue(h$obj))

addDropTarget(dep, handler=function(h,...) svalue(h$obj) <- h$dropdata)
addDropTarget(ind, handler=function(h,...) {
  cur <- svalue(h$obj)

  new <- ifelse(nchar(cur) > 0, paste(cur, h$dropdata, sep=", "), h$dropdata)
  svalue(h$obj) <- new
})

visible(w) <- TRUE 
```

gWidgets 中的拖放支持确实是可变的。在这 6 种可能的情况中：gWidgetsRGtk2、gWidgets2RGtk2、gWidgetstcltk、gWidgets2tcltk、gWidgetsQt 和 gWidgets2Qt 此代码仅在 gWidgetsRGtk2 中有效。

# vb.net - 链接到另一个控件的列表框项目名称

> ID：12426502
> 
> 赞同：0
> 
> 时间：2012-09-14T14:24:55.877
> 
> 标签：vb.net, visual-studio-2010, controls

因此，以下代码为已输入到列表框中的每个项目添加一个图片框。

```
 Dim x As Integer = 790
    Dim y As Integer = 91
    For i As Integer = 0 To ListBox1.Items.Count - 1

        'adds picturebox for as many listbox items added
        Dim MyPictureBox As New PictureBox()
        MyPictureBox.Location = New Point(x, y)
        MyPictureBox.Size = New Size(12, 12)
        MyPictureBox.SizeMode = PictureBoxSizeMode.StretchImage
        Me.Controls.Add(MyPictureBox)
        MyPictureBox.Image = My.Resources.Warning1
        x += 0
        y += 13

    Next i 
```

我正在运行另一个进程，它将为列表框中的每个项目创建一个文件，并为每个项目命名该文件。

示例：我在列表框中添加了 20 个项目，我将拥有 20 个图片框。如果我想删除说第 15 项，我还想删除它旁边的图片框。

这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:50:58.993

如果项目的文本`ListBox`是唯一的，那么您可以使用它将两者链接在一起，否则，您将需要每个项目上的一些其他属性可以用作唯一键。然后您可以做的是将`Name`每个`PictureBox`控件的属性设置为列表中匹配项的唯一键值。例如：

```
Dim key As String = ListBoxItems(i).ToString()
...
MyPictureBox.Name = "pic" + key 
```

然后，当您想要获取`PictureBox`给定项目的匹配控件时，您可以执行以下操作：

```
Dim p As PictureBox = CType(Me.Controls("pic" + item.ToString()), PictureBox) 
```

（其中`item`的项目在哪里`ListBox`）要删除它，您只需执行以下操作：

```
Me.Controls.Remove(p)
p.Dispose() 
```

# ftp - ftp文件上传骆驼

> ID：12426505
> 
> 赞同：1
> 
> 时间：2012-09-14T14:25:17.530
> 
> 标签：ftp, apache-camel

我正在尝试使用骆驼通过 ftp 上传文件。我的代码如下

```
public static void main(String... args) throws Exception {
    CamelContext context = new DefaultCamelContext();

    context.addRoutes(new RouteBuilder() {
        @Override
        public void configure() {
             from("file:src/data?noop=true").to("ftp://myftp.com/ftp-test/?username=drauxxx&password=mypassword");
        }
    });
    context.start();
    Thread.sleep(10000);
    context.stop();
} 
```

它连接良好，但是（正如您在日志中看到的那样）但是当我尝试存储时出现此错误：

```
[1) thread #1 - file://src/data] FileConsumer                   DEBUG Took 0.003 seconds to poll: src/data
[1) thread #1 - file://src/data] FileConsumer                   DEBUG Total 1 files to consume
[1) thread #1 - file://src/data] FileConsumer                   DEBUG About to process file: GenericFile[ReadMe.txt] using exchange: Exchange[ReadMe.txt]
[1) thread #1 - file://src/data] SendProcessor                  DEBUG >>>> Endpoint[ftp://drxxx.com/ftp-test/?password=******&username=drau9546] Exchange[ReadMe.txt]
[1) thread #1 - file://src/data] RemoteFileProducer             DEBUG Not already connected/logged in. Connecting to: Endpoint[ftp://drxxx.com/ftp-test/?password=******&username=drau9546]
[1) thread #1 - file://src/data] RemoteFileProducer             INFO  Connected and logged in to: Endpoint[ftp://drxxx.com/ftp-test/?password=******&username=drau9546]
[1) thread #1 - file://src/data] GenericFileConverter           DEBUG Read file src/data/ReadMe.txt (no charset)
[                          main] DefaultCamelContext            INFO  Apache Camel 2.10.0 (CamelContext: camel-1) is shutting down
[                          main] DefaultShutdownStrategy        INFO  Starting to graceful shutdown 1 routes (timeout 300 seconds)
[                          main] DefaultExecutorServiceManager  DEBUG Created new ThreadPool for source: org.apache.camel.impl.DefaultShutdownStrategy@77addb59 with name: ShutdownTask. -> org.apache.camel.util.concurrent.RejectableThreadPoolExecutor@bdccedd
[el-1) thread #2 - ShutdownTask] DefaultShutdownStrategy        DEBUG There are 1 routes to shutdown
[el-1) thread #2 - ShutdownTask] DefaultShutdownStrategy        DEBUG Route: route1 suspended and shutdown deferred, was consuming from: Endpoint[file://src/data?noop=true]
[el-1) thread #2 - ShutdownTask] DefaultShutdownStrategy        INFO  Waiting as there are still 2 inflight and pending exchanges to complete, timeout in 300 seconds.
[el-1) thread #2 - ShutdownTask] DefaultShutdownStrategy        INFO  Waiting as there are still 2 inflight and pending exchanges to complete, timeout in 299 seconds.
....

[1) thread #1 - file://src/data] RemoteFileProducer             WARN  Writing file failed with: Error writing file [ftp-test/ReadMe.txt]
[1) thread #1 - file://src/data] RemoteFileProducer             DEBUG Disconnecting from: Endpoint[ftp://drxxx.com/ftp-test/?password=******&username=drau9546]
[1) thread #1 - file://src/data] DefaultErrorHandler            DEBUG Failed delivery for (MessageId: ID-raccoonix-55914-1347631981229-0-1 on ExchangeId: ID-raccoonix-55914-1347631981229-0-2). On delivery attempt: 0 caught: org.apache.camel.component.file.GenericFileOperationFailedException: Error writing file [ftp-test/ReadMe.txt]
[1) thread #1 - file://src/data] GenericFileOnCompletion        DEBUG Done processing file: GenericFile[ReadMe.txt] using exchange: Exchange[ReadMe.txt]
[1) thread #1 - file://src/data] GenericFileOnCompletion        WARN  Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@2c31f2a7 for file: GenericFile[ReadMe.txt]
[1) thread #1 - file://src/data] FileUtil                       DEBUG Retrying attempt 0 to delete file: /home/andrea/workspace/transfer/src/data/ReadMe.txt.camelLock
[1) thread #1 - file://src/data] FileUtil                       DEBUG Tried 1 to delete file: /home/andrea/workspace/transfer/src/data/ReadMe.txt.camelLock with result: true
[1) thread #1 - file://src/data] DefaultErrorHandler            ERROR Failed delivery for (MessageId: ID-raccoonix-55914-1347631981229-0-1 on ExchangeId: ID-raccoonix-55914-1347631981229-0-2). Exhausted after delivery attempt: 1 caught: org.apache.camel.component.file.GenericFileOperationFailedException: Error writing file [ftp-test/ReadMe.txt] 
```

是否有一些特定参数可用于正确的文件传输？是 ftp 服务器相关的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:18:24.320

尝试

```
from("file:src/data?noop=true").to("ftp://drauxxx@myftp.com/ftp-test/?password=mypassword"); 
```

消除

```
context.stop(); 
```

因为它是一个实验代码，所以你不需要它。

还要检查您正在连接的 FTP 用户的用户权限。

# android - 当我调用 setResult(100,i) 和 finish() 时，它会传入方法 oncreate

> ID：12426506
> 
> 赞同：-3
> 
> 时间：2012-09-14T14:25:19.450
> 
> 标签：android, oncreate

我有问题。在设备 SAMSUNG GT-P3110 中，当我调用屏幕搜索产品时，选择产品并返回使用：

```
Intent i = new Intent();
i.putExtra("productID", "1");
setResult(100,i);
finish(); 
```

它总是在类调用者的 oncreate 方法中传递，清理所有成员类。在某些设备中，行为是正常的，它只通过一次。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T23:14:22.733

我研究发现该设备具有限制打开活动数量的功能。取消选中该选项，它只传递一次方法 oncreate 。

# ios - 绑定第二个顶点缓冲区似乎破坏了我的第一个顶点缓冲区，OpenGL OES ios 5.1

> ID：12426507
> 
> 赞同：4
> 
> 时间：2012-09-14T14:25:22.020
> 
> 标签：ios, opengl-es, opengl-es-2.0, vertex-buffer

我正在创建两个不同的顶点缓冲区，*它们使用两个不同的着色器来渲染它们*。一旦我绑定第二个顶点缓冲区，我停在第一个顶点缓冲区中的数据似乎已损坏或丢失。

如果我只生成并绘制一个顶点缓冲区，如下所示：

```
glGenBuffers( 1, &vb1 ) ;
glBindBuffer( GL_ARRAY_BUFFER, vb1 ) ;

// fill it..
glBufferData( .. ) 
```

然后，在 draw() 循环中，

```
glUseProgram( shader1 ) ;
glBindBuffer( vb1 ) ; // make sure it is bound
glDrawArrays( ... )   // draw it 
```

*然后它工作正常，没有问题，没有错误（每次*gl* 调用后我都是 glGettingLastError() ，所以看起来这段代码非常好）

现在，如果我*生成并绑定*第二个顶点缓冲区，那么在第一个顶点缓冲区生成并绑定之后的任何时间，

```
// ran in init() -- then previously working code in draw() is broken
glGenBuffers( 1, &vb2 ) ;              // ok.. no problems with this line
glBindBuffer( GL_ARRAY_BUFFER, vb2 ) ; // spoils data in vb1? 
```

一旦我`glBindBuffer`使用这个新生成`vb2`的缓冲区调用，似乎其中的数据`vb1`已完全转储或丢失。在尝试绘制`vb1`（不是`vb2`！）时，我遇到了这个崩溃：

![在此处输入图像描述](../Images/7214342e9220d5b8e6ea85f6a29e0bc8.png)

我什至用`GL_STATIC_DRAW`.

我不明白，我认为这些顶点缓冲区应该保留数据，即使创建并初始化了另一个顶点缓冲区？.. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T23:21:35.257

我发现这个问题的答案非常微妙且难以找到。

我以为我不需要[标准示例使用的顶点数组声明，](https://stackoverflow.com/questions/12428473/in-the-stock-opengl-es-app-on-ios-5-1-are-they-really-using-the-vertex-arrays-t)您可以看到我在问题中忽略了它们。但事实证明，使用[顶点数组对象](https://stackoverflow.com/a/12429065/111307)对于正确绑定索引至关重要。

例如，

```
// Make vertex array OBJECT, _this does not store any data!_
// A "vertex array object" is a bit like a display list in
// that it will just remember and repeat the function calls you make,
// with the values you make them with.
glGenVertexArraysOES( 1, &va ) ; // make vertex array OBJECT. NOT used
// to store data..

// Bind the vertex array
glBindVertexArrayOES( va ) ; // "start recording the calls I make.."

// Make a buffer for the vertex array (place to store the data)
glGenBuffers( 1, &vb ) ;     // make the vertex BUFFER (used to
// store the actual data)

// Make the vertex array buffer active
glBindBuffer( GL_ARRAY_BUFFER, vb ) ;

glEnableVertexAttribArray( ... ) ;  // REMEMBERED IN VAO (vertex array object)
glVertexAttribPointer( ... ) ;      // REMEMBERED IN VAO

glBufferData( .. ) ; // send data down to gpu, not remembered by vao

// "Stop remembering" calls to glBindBuffer( .. ) and glEnableVertexAttribArray( .. )
glBindVertexArrayOES( 0 ) ; // "stop recording" 
```

在绘图时，只需：

```
glBindVertexArrayOES( va ) ; // runs ALL your glEnableVertexAttribArray() calls,
// as well as your glBindBuffer( .. ) call,

// now all that's left to do is draw
glDrawArrays( glDrawingStyle, 0, vertexCount ); 
```

# nsis - NSIS - 安装路径问题

> ID：12426508
> 
> 赞同：0
> 
> 时间：2012-09-14T14:25:31.920
> 
> 标签：nsis

我在默认安装中遇到了一些路径问题。我的代码如下：

[http://pastebin.com/7vrCuLiZ](http://pastebin.com/7vrCuLiZ)

我的问题是默认安装路径是“C:\Program Files (x86)\Advanlab\DISK1\Common\Borland Shared\BDE\”而不是“C:\Program Files (x86)\Advanlab”

[https://www.dropbox.com/s/vfoxytj1sbvqs5a/helpnsis.png](https://www.dropbox.com/s/vfoxytj1sbvqs5a/helpnsis.png)

谢谢你的帮助 ：）

编辑：仅当文件夹 Advanlab 已经存在时才会发生：s

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:34:36.947

您是否在 NSIS 脚本中设置了默认安装目录？

```
; The default installation directory
InstallDir $PROGRAMFILES\xxx 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:53:54.297

该`InstallDirRegKey HKLM "${PRODUCT_DIR_REGKEY}" ""`命令可能正在拾取此目录，请尝试 `InstallDirRegKey HKLM "${PRODUCT_UNINST_KEY}" "UninstallString"`

# c# - 即使在手动填充它们之后，DataGridview 也会在其列中提供空值

> ID：12426509
> 
> 赞同：0
> 
> 时间：2012-09-14T14:25:33.717
> 
> 标签：c#, .net, winforms, datagridview, null

我使用了 DataGridview，它应该是手动填充的（未指定数据源）。我想获取第一行（索引-0）的内容。但它给了我空单元格值。

**代码**

```
DataTable dt = new DataTable();
DataRow dr;

dt.Columns.Add("Description");
dt.Columns.Add("Unit Price");
dt.Columns.Add("Quantity");
dt.Columns.Add("Tot");

dr = dt.NewRow();

dr[0] = dataGridViewA_General.Rows[0].Cells[1].Value; //these values are null
dr[1] = dataGridViewA_General.Rows[0].Cells[2].Value; //these values are null
dr[2] = dataGridViewA_General.Rows[0].Cells[3].Value; //these values are null
dr[3] = dataGridViewA_General.Rows[0].Cells[4].Value; //these values are null

dt.Rows.Add(dr); 
```

提前致谢

**更新**

```
// dataGridViewA_General

this.dataGridViewA_General.ColumnHeadersHeightSizeMode =         System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.AutoSize;
this.dataGridViewA_General.Columns.AddRange(new System.Windows.Forms.DataGridViewColumn[] {
this.Column_A_item_code,
this.Column_A_description,
this.Column_A_qntity,
this.Column_A_unit_price,
this.Column_A_list_total});

// Column_A_description

this.Column_A_description.AutoSizeMode =  System.Windows.Forms.DataGridViewAutoSizeColumnMode.Fill;
this.Column_A_description.HeaderText = "Description";
this.Column_A_description.Name = "Column_A_description";

// Instantiate
private System.Windows.Forms.DataGridView dataGridViewA_General;
private System.Windows.Forms.DataGridViewTextBoxColumn Column_A_description; 
```

（其余列也以相同方式定义。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T14:29:06.307

您必须将该行添加到 DataTable。

```
dt.Rows.Add(dr); 
```

新行（）；只需创建一个空白行，您必须手动添加它。

此外，由于您没有在行本身中放置任何内容，因此不会返回任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T07:02:29.017

我犯了一个逻辑错误，并且在填充数据后代码没有以预期的方式执行。其实上面的代码是正确的。感谢大家的宝贵贡献。

# javascript - 如果元素存在，如何阻止 JavaScript 执行？

> ID：12426512
> 
> 赞同：0
> 
> 时间：2012-09-14T14:25:39.633
> 
> 标签：javascript, jquery, html, firefox-addon, firefox-addon-sdk

我有一个 Firefox 插件，它在 sub.example.com 的每个页面上注入/执行一个 jQuery 脚本。由于设计不佳，该脚本无法在网站的一页上运行。如果某个元素位于页面上，有什么方法可以阻止脚本执行？

编辑：我正在使用的脚本必须在DOM 加载**之前执行。**有什么方法可以访问 HTML 文件本身并找出该元素是否存在？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T14:27:14.650

由于 jQuery 集合只是增强了数组，它们每个都有一个`length`属性，告诉你它匹配了多少元素：

```
jQuery(document).ready(function($)
{
    if ( $('#someElement').length ) return;
    // All of your code should go here...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:28:18.487

由于您使用的是 jQuery，我假设您的脚本包含在`$(document).ready`回调中，如果是这样：

```
$(document).ready(function() {
    if ($('#breakOnThisElem').length) {
       return;
    }
}); 
```

如果您的代码没有包含在这样的函数中：更改它！:)

# bash - 在bash中循环一行命令

> ID：12426526
> 
> 赞同：-1
> 
> 时间：2012-09-14T14:26:16.413
> 
> 标签：bash, loops

我将如何循环此行以将所有 jpg 打印到文本文件？

```
stat --printf="%s" *.jpg >> results.txt 
```

您如何还能够根据文件大小打印 results.txt？代码看起来如何？文件的确切大小是 40318

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:31:39.573

您已经在打印所有 *.jpg 文件的结果。唯一的问题是，通过使用`--printf="%s"`您将输出格式更改为`stat`仅打印大小（每个项目之间没有换行符或空格）。

请尝试：

```
stat --printf="%s\n" *.jpg >> results.txt
#  OR
stat -c "%s" *.jpg >> results.txt 
```

要在大小旁边打印文件名，请尝试：

```
stat --printf="%n %s\n" *.jpg >> results.txt
# OR
stat -c "%n %s" *.jpg >> results.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:26:07.100

据我了解，您希望将所有 .jpg 文件的大小和文件名打印到文本文件中。您可以结合使用*find*、*ls*来执行此操作，然后使用*awk*格式化输出：

```
 find . -name "*.jpg" | xargs ls -ahl $1 | awk '{print $5" "$9}' > results.txt 
```

请注意，该脚本将从您使用*find指定的目录中递归搜索*

# wolfram-mathematica - 在 Mathematica 8 的同一张图中标记不同的图

> ID：12426527
> 
> 赞同：3
> 
> 时间：2012-09-14T14:26:16.497
> 
> 标签：wolfram-mathematica, mathematica-8

*我对在Mathematica*中标记绘图有疑问。我将描述我的问题。

我有这样的功能。

```
y = 4 x / L + 2 
```

我想绘制 y 与 x 的关系图。而且，我有

```
L={10,20,30,40} 
```

当我编写如下代码时，

```
Plot[y, {x, 0, 100}, 
    ImageSize -> Scaled[1.0], PlotLabel ->  Style["y vs X ", FontSize -> 18]] 
```

我在同一张图中有四个不同的图。我想知道如何用相关的 L 值标记每个图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T19:11:43.710

根据我之前的帖子，您可以使用此方法随意标记[线条](https://stackoverflow.com/a/6989817/879601)。标记后，可以发现没有动态内容的情节设置为`plainplot`。

它通过将每一行变成一个自标记按钮来工作。您可以`labels`针对不同的标签进行修改。

```
l = {10, 20, 30, 40};
y[x_, s_] := 4 x/s + 2

plot = Plot[Evaluate@Table[y[x, u], {u, l}], {x, 0, 100},
   PlotLabel -> Style["y vs X ", FontSize -> 18]];

pos = Position[plot, _Line];
Array[(line[#] = plot[[Sequence @@ pos[[#]]]]) &, Length@l];
AddLabel[label_] := Module[{},
  AppendTo[plot[[1]], Inset[Framed[label, Background -> White], pt]];
  (* Removing buttons for final plot *)
  plainplot = plot;
  Array[
   (plainplot[[Sequence @@ pos[[#]]]] =
      plainplot[[Sequence @@ Append[pos[[#]], 1]]]) &, Length@l]]
labels = ToString /@ l;
Array[
  (plot[[Sequence @@ pos[[#]]]] =
     Button[line[#], AddLabel[labels[[#]]]]) &, Length@l];
Dynamic[EventHandler[plot,
  "MouseDown" :> (pt = MousePosition["Graphics"])]] 
```

![在此处输入图像描述](../Images/49dae06e60f2158b7d164adb2639750c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T14:57:34.340

```
l = {10, 20, 30, 40}
y[x_, s_] := 4 x/s + 2
<< PlotLegends`

Plot[Evaluate@Table[y[x, u], {u, l}], {x, 0, 100}, 
 ImageSize -> Scaled[1.0], 
 PlotLabel -> Style["y vs X ", FontSize -> 18], 
 PlotLegend -> ("L = " <> ToString@# & /@ l)] 
```

![数学图形](../Images/a03598a18c5a032a0567b559e6c88d0e.png)

# php - 在php中动态创建对象引用

> ID：12426530
> 
> 赞同：1
> 
> 时间：2012-09-14T14:26:33.363
> 
> 标签：php, oop

我是 PHP 中的 OOP 新手，在通过第 3 方 API 将一些数据拉入我的程序后，我正在努力动态生成对象引用。

我撤回了一个包含以下数据的记录集：

```
 stdClass Object ( 
        [adventure] => stdClass Object ( 
            [shortname] => adventure 
            [name] => Adventure 
            [description] => Create a new column for each activity undertaken. The scouts need to complete three activities, and for each one:
                Know the safety issues involved and understand the use of any equipment needed for the activity.
                Show an awareness of environmental issues around the activity (such as erosion at popular climbing areas).
                Know about further opportunities to take part in the chosen activities.
            [picture] => graphics/badges/sc-cs-adch.png 
            [config] => {"sectionsneeded":"1","totalneeded":"1","sections":{"a":"3"}} 
            [order] => 1 
            [groupname] => 
            [status] => 3 
            [userid] => 0 
            [table] => scouts_challenge_adventure ) 
        [csg] => stdClass Object ( 
            [shortname] => csg 
            [name] => Chief Scouts Gold 
            [description] => 
            [picture] => graphics/badges/sc-cs-csa.png 
            [config] => {"sectionsneeded":"-1","totalneeded":"1","sections":{"a":"6","b":"2"}} 
            [order] => 0 
            [groupname] => 
            [status] => 3 
            [userid] => 0 
            [table] => scouts_challenge_csg ) 
        [community] => stdClass Object ( 
            [shortname] => community 
            [name] => Community [description] =>
            Create columns for each community project undertaken, and enter the number of hours each scout spend on them. 6 hours are required.
            [picture] => graphics/badges/sc-cs-coch.png 
            [config] => {"sectionsneeded": -1, "totalneeded": -1, "sections": {"a":1}} 
            [order] => 1 
            [groupname] => 
            [status] => 3 
            [userid] => 0 
            [table] => scouts_challenge_community )
) 
```

我已将此数据提取到 $badges 中，现在正尝试根据以下代码动态构建对此数据集的引用，以将其包含在表中

```
 foreach ($badges as $badge) {
       $badgeShortname = $badge->shortname;
       $badgeObj = '$scoutChallenge-'.'>'."$badgeShortname";
          echo "<td>";  
      echo $badgeObj;
          echo "</td>";                                                                                 
      } 
```

我尝试了各种方法，但我似乎无法按照`echo "$scoutChallenge->adventure";`目前的方式动态生成参考，我似乎可以让它工作的唯一方法是使用 switch 语句，例如

```
 foreach ($badges as $badge) {
      $badgeShortname = $badge->shortname;
  $badgeObj = '$scoutChallenge-'.'>'."$badgeShortname";
      echo "<td>";  
      switch ($badgeShortname )
      {
        case 'csg':
          echo "$scoutChallenge->csg";
          break;
        case 'adventure':
          echo "$scoutChallenge->adventure";
          break;
        case 'community':
          echo "$scoutChallenge->community";
          break;    
        case 'creative':
          echo "$scoutChallenge->creative";
          break;
        case 'expedition':
          echo "$scoutChallenge->expedition";
          break;
        case 'fitness':
          echo "$scoutChallenge->fitness";
          break;            
        case 'outdoor':
          echo "$scoutChallenge->outdoor";
          break;    
        case 'outdoorplus':
          echo "$scoutChallenge->outdoorplus";
          break;
        case 'promise':
          echo "$scoutChallenge->promise";
          break;
        case 'global':
          echo "$scoutChallenge->global";
          break;    
       default:
      echo "Not Found";
      break;                                                                                    
      }
      echo "</td>"; 
    }
  } 
```

这显然不是特别可扩展的。

$scoutChallenge 是我通过 API 引入的另一个数据集，它与 $badges 数据集共享引用。

有没有办法动态地回显对象引用；像“echo $scoutChallenge-> **variableElement** ”这样的东西，其中 variableElement 相当于 $badgeShortname 根据 switch 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:30:59.590

采用

```
echo $scoutChallenge->$badgeShortname 
```

您可以在[PHP 中阅读更多相关信息：变量变量](http://php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:15:13.550

还要检查：

[获取对象变量](http://php.net/manual/es/function.get-object-vars.php)

我认为你可以迭代一个对象

```
foreach($object as $attr_name => $attr_value){
     echo $attr_value;
} 
```

它仅适用于公共属性。

# symfony - 如果我的主机中没有安装 php-intl 扩展，我不能用 symfony 2.1 做什么？

> ID：12426534
> 
> 赞同：1
> 
> 时间：2012-09-14T14:26:51.913
> 
> 标签：symfony, internationalization, symfony-2.1, intl

当我在主机中检查 Symfony 要求时，只会发出警告：

```
[[WARNING]] Checking that the intl extension is available: FAILED 
```

我很担心，因为我必须部署一个完全国际化的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:53:26.097

`intl`即使没有扩展，您也可以使用翻译以及与国际化相关的所有其他内容。据我所知，intl 扩展使 PHP 可以自动翻译，例如，月份名称和工作日。

根据操作系统的不同，有不同的方法可以在您的系统上安装 intl 扩展。它应该与 PHP 5.3 捆绑在一起（但是，它不与 OS X 或 MAMP 附带的 PHP 版本捆绑在一起），但您可以使用 PECL、Homebrew、MacPorts、apt-get 等进行安装。

*   [Symfony2 Google Group 中的这个主题](https://groups.google.com/forum/?fromgroups=#!topic/symfony2/BktatTXX86Q)讨论了在 Windows 上的安装。
*   [带 MAMP 的国际扩展](http://szemian.wordpress.com/2011/03/21/compiling-intl-extension-for-mamp/)
*   [使用 PECL 和 Homebrew 安装 intl 扩展](http://darraghenright.tumblr.com/post/22027208929/installing-intl-package-on-osx-lion)

# php - PHP PDO 撇号和引号转义

> ID：12426541
> 
> 赞同：0
> 
> 时间：2012-09-14T14:27:06.897
> 
> 标签：php, pdo, escaping, apostrophe

我有一个用户发布关于他们自己的表格，不包括在内。我已经读到使用 PDO 时，撇号或 quatation 标记没有任何问题，但是我得到`"`了`\"`exc。你可以猜到。

还尝试阅读有关[http://www.php.net/manual/en/pdo.prepared-statements.php](http://www.php.net/manual/en/pdo.prepared-statements.php)的信息，但是网站的这一部分无法正常工作，因为我知道这就是我首先在这里问的原因。

我得到这样的用户输入：

```
if(isset($_POST["doit"])) {
    $about = cleanInput($_POST["about"]);
    $name = cleanInput($_POST["name"]);

    if(!empty($about) && !empty($name)){
     try{
     $cu_query = "INSERT INTO `members` (`about`, `name`) VALUES (:about, :name)";
     $cu_query_do = $db->prepare($cu_query);
     $cu_query_do -> bindParam(':about', $about, PDO::PARAM_STR);
     $cu_query_do -> bindParam(':name', $name, PDO::PARAM_STR);
     $cu_query_do->execute() or die(print_r($cu_query_do->errorInfo(), true));
   }

     catch(PDOException $e) {
     $log->logError($e." - ".basename(__FILE__));
   }

   }
} 
```

我打印出这样的用户输入并从数据库中获取用户输入，如下所示：

```
 //if isset get exc..

    try {
 $mq = "SELECT * FROM `members` WHERE `m_id` = :m_id";
 $mq_check = $db->prepare($mq);
 $mq_check->bindParam(':m_id', $m_id, PDO::PARAM_INT);
 $mq_check->execute();
 $ac = $db->query("SELECT FOUND_ROWS()")->fetchColumn();
 }
     catch(PDOException $e) {
 $log->logError($e." - ".basename(__FILE__));
                }

     if(!empty($ac)) {
     $_loader = true;
     $fetch = $mq_check->fetch (PDO::FETCH_ASSOC);
     $name = cleanInput($fetch['name']);
     $about = cleanInput($fetch['about']);

     }

     echo $name; 
```

谢谢你

回答：如果您已从 WHM 或 php.ini exc 禁用它，但如果问题仍然存在，请检查下面提到的代码 @Wayne Whitty 如果它似乎仍然处于活动状态，

比在头文件中包含此代码：

```
if (get_magic_quotes_gpc()) {
$process = array(&$_GET, &$_POST, &$_COOKIE, &$_REQUEST);
while (list($key, $val) = each($process)) {
    foreach ($val as $k => $v) {
        unset($process[$key][$k]);
        if (is_array($v)) {
            $process[$key][stripslashes($k)] = $v;
            $process[] = &$process[$key][stripslashes($k)];
        } else {
            $process[$key][stripslashes($k)] = stripslashes($v);
        }
    }
}
unset($process);
} 
```

这解决了我的问题，但如果问题仍然存在，那么您必须检查您的输入清理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:29:43.387

您的服务器上启用了魔术引号，或者您的函数 cleanInput() 正在调用函数 addlashes()。

通过运行以下命令检查是否启用了魔术引号：

```
if(get_magic_quotes_gpc()){
    echo 'Magic Quotes enabled... sigh!';
} 
```

[PHP 手册](http://php.net/manual/en/security.magicquotes.disabling.php)向您展示了如何处理魔术引号：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:29:18.560

问题肯定是由于我认为您的 cleanInput 方法预先转义了 post 值。

# android - Google Cloud Messaging 可以与 Facebook 一起使用吗？

> ID：12426552
> 
> 赞同：7
> 
> 时间：2012-09-14T14:27:31.873
> 
> 标签：android, facebook, google-cloud-messaging

我想知道，是否可以让 Facebook 应用程序通过 GCM 服务向我的 android 应用程序发送有关新帖子/消息/联系人等的更新？我几乎可以肯定 Google+ 可能会出现类似的情况，而且我注意到 Facebook 的 API 消息结构与 GCM 消息非常相似（或相同）。这就是为什么我认为它应该是可能的。

换句话说：是否有可能让 Facebook 应用程序作为存储设备 ID 并通过 Google Cloud Messaging 发送有关某些更改的消息的服务器工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:50:57.357

您必须加入某种中间件来处理 Facebook 和 Google API 之间的交互——话虽如此，这绝对是可能的。

Facebook 的 API 提供订阅事件（实时）的能力。您可以订阅的事件屈指可数，所有内容都[在此处](http://developers.facebook.com/blog/post/2012/01/31/how-to--subscribing-to-data-changes-using-the-real-time-updates-api/)和[此处](https://developers.facebook.com/docs/reference/api/realtime/)进行了概述。

或者，您可以长时间轮询未通过其实时 API 显示的数据。只需事先考虑 API 限制等。

请记住，您需要创建一个 Facebook 应用程序，并且您的用户必须对 Facebook 应用程序进行身份验证，这样您才能获得与您尝试访问的任何信息相关的信息。同样适用于谷歌。

# sharepoint - SharePoint 2010 - 如何使多列成为唯一值

> ID：12426553
> 
> 赞同：-1
> 
> 时间：2012-09-14T14:27:34.620
> 
> 标签：sharepoint

我正在实施一个沙盒解决方案，其中应该有多个列作为唯一键，我必须使用项目添加事件接收器，但如何获取当前添加项目字段值以了解该项目是否出现在列表中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:21:41.367

1.  创建 UniqueID 列并使其唯一。
2.  创建一个事件接收器，如下所示：

    ```
    public override void ItemAdding(SPItemEventProperties properties)
    {
        string Name = properties.AfterProperties["Name"].ToString();
        string Title = properties.AfterProperties["Title"].ToString();
        StringBuilder StringBuilder = new StringBuilder(Name);
        StringBuilder.Append("-");
        StringBuilder.Append(Title);
        properties.AfterProperties["UniqueID0"] = StringBuilder.ToString();
        base.ItemAdding(properties);
    } 
    ```

# php - 离线 Open Graph API 时是否可以共享消息

> ID：12426554
> 
> 赞同：-2
> 
> 时间：2012-09-14T14:27:37.893
> 
> 标签：php, post, facebook-opengraph

我已经存储了`access_token`并且`PageId`我想知道当离线 Open Graph API 我的意思是使用 curl 时是否可以共享消息。

我正在使用下面的代码

```
$page_id = 'XXXXXXXX';
$token = 'XXXXXXXXXX';
$app_namespace = 'test_app';
$ret_obj = $facebook->api('/'.$page_id .'/'.$app_namespace .':test','access_token'=>$token,'post', array(
                        'testing' => 'http://example.com/meta.php', 
```

即使我访问了offline_access，共享也无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:39:30.083

你发布的数组必须有一个“消息”元素——你有“测试”。这不起作用，因为 facebook 帖子没有测试元素。

制造商确保您完全遵循文档！

此外，将您的 API 调用包装在 try/catch 块中，并捕获错误。这为您提供了有关问题所在的线索。

# asp.net - RPC_E_SERVERFAULT

> ID：12426559
> 
> 赞同：6
> 
> 时间：2012-09-14T14:28:04.637
> 
> 标签：asp.net, com

在我的 asp.net 应用程序中，我正在使用 Interop dll 调用一个 com 组件方法。这在正常情况下工作正常，但在生产中有时会抛出异常

System.Runtime.InteropServices.COMException (0x80010105)：服务器抛出异常。（来自 HRESULT 的异常：0x80010105 (RPC_E_SERVERFAULT)）

我怀疑当大量用户同时访问同一页面时会发生这种情况。

是否有人知道调试此问题的解决方案或步骤。

我有另一个问题。在互联网上搜索时，我遇到了这个 aspcompact 属性以及与 com 组件相关的 MTA vs STA 线程模型。这个 aspcompact 属性是否适用于互操作 dll（运行时可调用包装器）。添加这个属性会解决我的问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T22:01:37.930

RPC_E_SERVERFAULT 表示进程外 COM 服务器抛出了结构化 (Win32) 异常，可能是各种各样的东西，例如访问冲突、除以零等。换句话说，COM 服务器的错误实现并且在调用应用程序中您无法解决此问题（除非您可以找出错误是什么并且可以设计一种方法来调用不执行错误代码的 COM 组件）。

您需要找到负责 COM 服务器的同事，让他/她在异常发生时使用调试器捕获故障转储，然后对转储进行事后调试以诊断问题并修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:13:46.230

监视您的站点以在引发异常时捕获异常。

使用[调试诊断工具 v1.2](http://support.microsoft.com/kb/2580960)

使用生成的转储更容易识别故障点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T22:53:23.577

也可能意味着 COM 对象崩溃。尝试自己重新运行由 COM 对象表示的应用程序，看看它是否崩溃或产生一些错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-22T14:06:45.973

我遇到了同样的问题，但我通过向 Main 函数添加 [STAThread] 属性让它工作。

```
[STAThread]
static void Main(string[] args) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-21T13:09:52.560

我正在运行使用 MS Office 2010 Excel COM 对象的 Powershell 脚本并开始收到此错误。罪魁祸首是最新的 MS Office 补丁。抱歉，我无法准确说明是哪一个导致了错误（我一次卸载了一堆），但卸载其中一个解决了问题。更新于 2016 年 7 月 18 日安装。

# .htaccess - Htaccess 重写以删除目录

> ID：12426566
> 
> 赞同：0
> 
> 时间：2012-09-14T14:28:27.633
> 
> 标签：.htaccess

我需要帮助创建重写字符串以从以下内容中删除 ~12345678/：www.example.com/~12345678/file。

这不会出现在每个链接上。发生的事情是在使用开发 url 创建开发链接期间，有几十个链接以这种方式出现。其余的链接都很好。我已经使用重写来删除 index.php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:31:46.593

试试这个（这将重定向任何请求`www.example.com/~12345678/dir/file.ext`to `www.example.com/dir/file.ext`）：

```
RewriteRule ^\~[a-zA-Z0-9]+/(.*)?$ /$1 [L,QSA,R=301] 
```

# php - 从多个表中检索记录

> ID：12426568
> 
> 赞同：0
> 
> 时间：2012-09-14T14:28:33.290
> 
> 标签：php, mysql

所以就像标题所暗示的那样，我正在尝试从多个表中检索记录。我有以下表格：`ads1`, `ads2`, `ads3`,.... 每个表格包含 1 条或多条带有 auto_increment的记录`id`和名为 的列下的人名`names`。

假设我在每个表中有 10 条记录，并且我有一个分页脚本，每页显示 5 条记录，这意味着每个表有 2 页，所以我将有 pages `1`, `2`, `3`, `4`, `5`, `6`。我的算法没有正确执行，在我的第一页上显示第一个表中的 5 条记录，第二个表中的 5 条记录，第三个表中的 5 条记录，依此类推...但我只希望显示 5 条记录每页，而不是我拥有的每个表中的 5 个，我希望它们能够正确显示在来自 的页面`1`和`2`记录、来自`ads1`的页面`3`和`4`记录`ads2`等上，希望你能明白。你能帮我么 ？

这是我的算法：

```
for ($i=1;$i<=$kay;$i++)
{
    $counter = 0;
    $tablenow = 'ads'.$i;
    $result = mysql_query("SELECT id FROM ".$tablenow." ");

    $counter = $counter + mysql_num_rows($result);
    $x=ceil($counter / $per_page);
    $page = (isset ($_GET['page']) AND (int)$_GET['page'] > 0 AND (int)$_GET['page'] <= $x) ? (int)$_GET['page'] : 1;
    $start = ($page - 1) * $per_page;
    $sql = mysql_query("SELECT * FROM ".$tablenow." ORDER BY id DESC  LIMIT 
    $start,$per_page ")or die(mysql_error());
    while ($sqlg=mysql_fetch_assoc($sql))
    {
        // this is where I show the records.
    }
} 
```

PS：对于只有一个表，该算法完全可以正常工作，但是当我有 2 个或更多表时，它会停止正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T15:09:04.710

这是一种方法：

```
$count_tables = 10;
$query        = '';
for ($table_no = 1; $table_no <= $count_tables; $table_no++ ) {
  $query .= "SELECT * FROM ads" . $table_no . " UNION ";
}
// Remove trailing UNION
$query = preg_replace( '/ UNION \Z/', '', $query );

$result     = mysql_query("SELECT id FROM ".$tablenow." ");
$total_rows = mysql_num_rows($result);
$max_page   = ceil( $total_rows / $per_page );

// Fetch rows for the page
$query_for_page .= $query . " ORDER BY id DESC LIMIT $start, $per_page";
$page = ( isset ($_GET['page'])
          AND (int)$_GET['page'] > 0
          AND (int)$_GET['page'] <= $max_page ) ? (int)$_GET['page'] : 1;
$start = ($page - 1) * $per_page;

$page_results = mysql_query( $query_for_page ) or die( mysql_error() );
while ( $row = mysql_fetch_assoc( $page_results ) ) {
  // this is where I show the records.
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:37:34.473

您只需执行一个查询，这将是`UNION`所有所需表的结果之一。如果您`SELECT`在每个表中单独执行 s，则无法准确跟踪总结果。

# apache - 无法将 Apache 配置为为 CherryPy 应用程序提供静态内容。我做错了什么？

> ID：12426569
> 
> 赞同：4
> 
> 时间：2012-09-14T14:28:33.263
> 
> 标签：apache, static, cherrypy, mod-proxy, mod-ssl

我有 Apache 2.2.15 配置了 Mod_Proxy 和 Mod_SSL 并在 RHEL 6.3 上提供 CherryPy Web 应用程序。我唯一苦苦挣扎的是让 Apache 为网站的静态内容（*.js、*.css、*.jpg）提供服务。这是我的 VirtualHost 条目...

```
<VirtualHost mydomain.com:443>
ServerAdmin support@mydomain.com
ServerName mydomain.com
ProxyPreserveHost On
SSLProxyEngine On
DocumentRoot /var/www/html/mydomain

SSLEngine on
SSLCertificateKeyFile /etc/ssl/myserver.key
SSLCertificateFile /etc/ssl/mydomain_com.crt
SSLCertificateChainFile /etc/ssl/mydomain_com.ca-bundle

# this prevents the follow URL path from being proxied
ProxyPass static/ !

# setup the proxy
<Proxy *>
    Order allow,deny
    Allow from all
</Proxy>
ProxyPass / http://www.mydomain.com:8080/
ProxyPassReverse / http://www.mydomain.com:8080/
</VirtualHost> 
```

例如，我的 css 文件的路径如下...

```
/var/www/html/mydomain/static/style.css 
```

因为我在导航到时强制整个站点处于 https 中

```
https://www.mydomain.com/static/style.css 
```

或者

```
http://www.mydomain.com/static/style.css 
```

我的浏览器告诉我找不到页面 (404)。谁能看到我做错了什么？

编辑：看来 Apache 仍在代理 /static ...我在访问我的 Apache 访问日志中的 /static/style.css 时发现了这个重定向...

```
xxx.xxx.xxx.xxx - - [17/Sep/2012:08:46:06 -0400] "GET /static/style.css HTTP/1.1" 301 337 "https://www.mydmain.com/Home/" "Mozilla/5.0 (X11; Linux x86_64; rv:10.0.7) Gecko/20120826 Firefox/10.0.7" 
```

有谁知道为什么会这样？

提前致谢！

安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T10:47:11.613

尝试在 ProxyPass 之前为您的静态文件夹添加别名。它对我来说就像冠军一样，

```
Alias /static/ /var/www/html/mydomain/static/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T13:03:30.897

如果静态文件位于“主”源文件夹下，我建议告诉 CherryPy 为样式表、图像、js 等提供特定文件夹

我个人生成配置，然后在安装应用程序时使用该配置，例如：

```
app = cherrypy.tree.mount(Root(), script_name="", config=somefile.get_config()) 
```

使用 CherryPy 提供静态文件的示例。

*   这`/css`是您在模板或 HTML 中使用的路径。
*   生成指向您的索引文件的路径（如果您没有从索引中启动 quickstart() ，`os.path.abspath(os.path.join(os.path.dirname(__file__)`则生成其他脚本）
*   上面的路径后面是静态内容文件夹的相对路径

文件：

```
##somefile
def get_config():
    return {
        '/':
        {
            'tools.encode.on': True,
            'tools.encode.encoding': 'UTF-8'
        },
        '/css':
        {
            'tools.staticdir.on': True,
            'tools.staticdir.dir': os.path.abspath(os.path.join(os.path.dirname(__file__), 'relative/path/to/your/css/folder'))
        },
        '/js':
        {
            'tools.staticdir.on': True,
            'tools.staticdir.dir': os.path.abspath(os.path.join(os.path.dirname(__file__), 'relative/path/to/your/js/folder'))
        }
    } 
```

# java - 获取文档和/或字段字体？

> ID：12426570
> 
> 赞同：0
> 
> 时间：2012-09-14T14:28:43.387
> 
> 标签：java, pdf, pdfbox

我正在尝试检测加载的 PDF 的字体，到目前为止，我可以拉出 COSDictionary 并查看字体，但我无法明确找到它。

这就是我认为会实现这一点的方法，并且一直工作到我尝试获取基本字体的字符串值：

```
PDDocument pdfDocument = PDDocument.load("/paath/document.pdf");
PDDocumentCatalog docCatalog = pdfDocument.getDocumentCatalog();  
COSDictionary dic = (COSDictionary) docCatalog.getCOSDictionary();
COSName docFont = (COSName) dic.getDictionaryObject(COSName.BASE_FONT);
System.out.println("Font: " + docFont); 
```

如果我打印 COSDictionary 'dic' 我可以在输出中看到基本名称，所以我知道我必须接近，但所有尝试都朝着它努力或使用可用的方法，如 getName 或构造 PDFont 对象并使用 getBaseFont结果为“空”。

我在这里有什么明显的遗漏吗？

# php - 通过php在mysql中插入数据

> ID：12426573
> 
> 赞同：0
> 
> 时间：2012-09-14T14:28:51.610
> 
> 标签：php, mysql

在我的代码中只是通过 php 将一些数据插入到 mysql 数据库中。所有数据都被插入，但只有两列的数据没有被插入。我的代码::

regi.php
// 表单设计

```
 <html>
    <form action="regi_pp.php"  method="post">
      Student Name <input name="st_name" type="text" id="st_name">
       Father's Name  <input name="f_name" type="text" id="f_name">
      Mother's Name <input name="m_name" type="text" id="m_name">
      Faculty  <input name="faculty" type="text" id="faculty">
      Department <input name="department" type="text" id="department">
      Session <input name="session" type="text" id="session">  
     Dormitory  <input name="dormitory" type="text" id="dormitory">  
    Registration No <input name="regi_no" type="text" id="regi_no"> 
     Email  <input name="email" type="text" id="email"> 
     pass:<input name="pass" type="password" id="pass">  
     <input type="submit" name="Submit" value="Submit">
     </form>
 </html> 
```

提交后::

```
 <?php 
    $st_name=$_POST["st_name"];   // name
    $st_father=$_POST["f_name"];   // father name
    $st_mother=$_POST["m_name"];   // Mather name
    $faculty=$_POST["faculty"];     // faculty name
    $dept=$_POST["department"];     // department name
    $session=$_POST["session"];     // session  
    $dormitory=$_POST["dormitory"];  // dormitory 
    $regi_no=$_POST["regi_no"];     //regi number
    $email=$_POST["email"];         //  email
    $pass=$_POST["pass"];          // password

   $con = mysql_connect("localhost","root","");   // mysql connection

    mysql_select_db("ppp", $con);    // database connection

    // here all value insert but '$regi_no', '$email' are not inserted and '$pass' value only insert if $pass value is number 
    mysql_query("INSERT INTO regf            VALUES('$st_name','$st_father','$st_mother','$faculty','$dept','$session','$dormitory','$regi_no','$email','$pass')") or die(mysql_error());
     mysql_close($con);
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:38:37.280

如果我进了宿舍怎么`Saint Philip Dormitory'); DROP TABLE regfs;--`办？你认为会发生什么？

您的代码容易发生**[SQL 注入](http://bobby-tables.com/)**。请改用**[PDO](http://php.net/manual/en/book.pdo.php)**或**[MYSQLI](http://php.net/manual/en/book.mysqli.php)**扩展。

使用 PDO 扩展的示例：

```
<?php

    $dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass);
    $dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    $stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (?, ?)");
    $stmt->bindParam(1, $name);
    $stmt->bindParam(2, $value);

    // insert one row
    $name = 'one';
    $value = 1;
    $stmt->execute();

?> 
```

这将允许您使用单引号插入记录。

# clojure - 当一个符号被另一个符号引用时如何访问它的值

> ID：12426574
> 
> 赞同：3
> 
> 时间：2012-09-14T14:28:52.553
> 
> 标签：clojure

这是一个简单的例子来说明我的意思：

```
> (def code "(def some-code [1 2 3])")
> (def data (read-string code))
> (def var  (eval data)) 
```

使用 println：

```
> (println var)
;; => #'example.system/some-code

> (println some-code)
;; => [1 2 3] 
```

现在它`var`包含一个引用，如果我有`some-code`，我该如何检索？它的用法类似于这个函数：`[1 2 3]``var`

```
> (return var) ;=> [1 2 3] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T14:52:05.140

一种方法是使用[var-get](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/var-get)

```
user=> (var-get var)
[1 2 3] 
```

# twitter - 网站的 Twitter 小部件不起作用

> ID：12426576
> 
> 赞同：1
> 
> 时间：2012-09-14T14:29:02.947
> 
> 标签：twitter, web, widget

我正在尝试创建一个 Twitter 提要小部件以放在网站上，但它似乎不起作用。我尝试在以下位置创建它：[https](https://twitter.com/settings/widgets/new) ://twitter.com/settings/widgets/new ，它吐出的代码是

```
<a class="twitter-timeline" href="https://twitter.com/AniaMorton" data-widget-id="246615272616755200">Tweets by @AniaMorton</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

但我在我的网站上看到的只是“@AniaMorton 的推文”的链接。为什么是这样？该网站的链接是：[http ://athleticedgefitness.com](http://athleticedgefitness.com)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:38:32.647

这会引发错误*Widget not whitelisted for domain 'athleticedgefitness.com'*。

鉴于它可以在[http://www.athleticedgefitness.com/](http://www.athleticedgefitness.com/)上运行，当您设置您指定的小部件时，它会在 www.athleticedgefitness.com 上运行，而*www.athleticedgefitness.com*的处理方式与*athleticedgefitness.com*不同。

检查您的设置，并将*sportsedgefitness.com*添加到允许的域列表中。

# jquery - 无法打开 jquery 弹出窗口

> ID：12426584
> 
> 赞同：1
> 
> 时间：2012-09-14T14:29:18.387
> 
> 标签：jquery, forms, jquery-plugins, popupwindow

我认为我的问题非常基础，但我是 jquery 的新手，我不明白为什么它不起作用。我想做一些类似谷歌日历的事情。当您单击某一天时，会显示一个显示表单的弹出窗口。我从一个简单的 popup 示例开始。我完全像在tuto [http://jqframework.com/jqpopup/](http://jqframework.com/jqpopup/)

```
<input type="button" id="open_btn" value="open the 1st jQpopup"/>

<script language="javascript">

$(document).ready(function() {

   $("#open_btn").click(function () {

      $("#sampleformdiv").jqpopup_open(this.id);

   });

}); 
```

以下是我包含的 js 脚本：

```
<script type='text/javascript' src='http://localhost/ci_calendar/application/views/assets/js/jqDnR.min.js'></script> 
<script type='text/javascript' src='http://localhost/ci_calendar/application/views/assets/js/jquery.bgiframe.min.js'></script> 
<script type='text/javascript' src='http://localhost/ci_calendar/application/views/assets/js/jquery.jqpopup.min.js'></script> 
```

当我点击按钮时没有任何反应。有人可以帮我吗？谢谢 ！

# java - Jar 导出不显示图像

> ID：12426590
> 
> 赞同：0
> 
> 时间：2012-09-14T14:29:46.253
> 
> 标签：java, eclipse, image, jar, export

我是Java的新程序员。我制作了一个要导出的小型目录应用程序，但由于某种原因，每当我尝试将其导出到可运行的 jar 文件时，结果不包含我在程序中指定的任何图像。基本上，我在 Eclipse 中运行它，它运行良好，但是当我将它作为可运行的 JAR 运行时，它没有图像。我有 5 个相互捆绑的 .java 文件。我的图像位于 Images/Image.png [我已经将图像文件夹设为源文件夹。]

我已经尝试**了一切**，但由于某种原因我无法让它工作，如果您对该主题有任何了解，请告诉我。我不知道是因为我是菜鸟还是我做错了什么。

```
static ImageIcon logoicon = new ImageIcon("Images/Logo.png"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:35:48.693

你试过`getResourceAsStream()`方法吗？查看[此](http://www.java2s.com/Code/Java/Development-Class/getClassgetResourceAsStream.htm)页面以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:06:15.513

这是我使用的方法：

```
 public static ImageIcon createImageIcon(final String path) {
    InputStream is = ImageLoader.class.getResourceAsStream(path);
    int length;
    try {
        length = is.available();
        byte[] data = new byte[length];
        is.read(data); 
        is.close();
        ImageIcon ii = new ImageIcon(data);
        return ii;
    } catch (IOException e) {
        LogManager.logCriticalProblem("Image not found at {} - {}", new Object[]{path, e.getMessage()});
    }
    return null;
} 
```

如果您对此方法有疑问，请尝试更改您正在使用的路径：

```
 "Images/Logo.png"
 "/Images/Logo.png"
 "src/Images/Logo.png"
 "/src/Images/Logo.png" 
```

或其他组合，具体取决于您的包结构。例如，如果您的图像实际上是 in `net.blah.fizz.Images`，那么您的路径将是`"/net/blah/fizz/Images/image.png"`

# xhtml - google plus 不显示来自 xhtml 文档的元信息片段

> ID：12426591
> 
> 赞同：3
> 
> 时间：2012-09-14T14:29:49.837
> 
> 标签：xhtml, google-plus, schema.org, rdfa

我已经为此奋斗了一段时间，但我什至无法弄清楚*为什么*它不起作用。使用这个简单的 XHTML 测试源：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>foobar</title>
        <meta name="description" content="baz" />
    </head>
    <body vocab="http://schema.org/" typeof="Article">
        <h1 property="headline">Some title</h1>
        <p property="description">some arbitrary text</p>
        <p>and even more of it</p>
    </body>
</html> 
```

（用google plus做测试，这里也[暂时可用](http://sotecware.net/files/tmp/test.xhtml)，这里可以找到[纯html版本](http://sotecware.net/files/tmp/test.html)）

如果您将 XHTML 版本的链接粘贴到 g+，您会发现它根本无法解析它。它只会显示链接。然而，HTML 版本似乎已被解析。[两者都在google](https://www.google.com/webmasters/tools/richsnippets)的丰富代码段测试器中解析得很好。更重要的是，我们有证据表明我们的 XHTML 网站丰富的片段被用于 google 搜索。

对于 xhtml 版本，内容类型已正确宣布`application/xhtml+xml`，我无法找出任何其他问题。我已经尝试省略 xml 声明并使用 XHTML 1.1 严格的文档类型，但没有任何成功。

所以我的问题：

1.  为什么 g+ 在 XHTML 版本中根本不显示此文件的片段*，*即使 facebook 显示？
2.  是否可以在不删除 XHTML 的情况下以某种方式纠正这种情况，如果可以，如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:41:57.173

我猜 g+ 使用的解析器可能不支持 XHTML，如果它不能处理 application/xhtml+xml MIME 媒体类型，它可能会退出。上次我听说 g+ 和 Google Rich Snippet 测试工具没有使用相同的工具链，所以很有可能在 Rich Snippet 测试工具中工作的东西可能在其他地方无法工作，但如果它在测试工具中工作，这是一个好兆头. 我认为未来谷歌会将其所有产品与丰富网页摘要测试工具的功能相结合。

你有什么特别的理由使用 XHTML 而不是 HTML 或 HTML5 作为 text/html？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-17T16:57:09.470

您示例中的微数据似乎不是预期的格式。您可以在以下位置生成必要的微数据：[https ://developers.google.com/+/plugins/snippet/](https://developers.google.com/+/plugins/snippet/)

注意缺少的 itemprop、itemscope 和类似的属性：

```
<body itemscope itemtype="http://schema.org/Product">
  <h1 itemprop="name">Shiny Trinket</h1>
  <img itemprop="image" src="{image-url}" />
  <p itemprop="description">Shiny trinkets are shiny.</p>
</body> 
```

# ruby - 用 ruby 和 watir 检查 html 元素是否为真？

> ID：12426592
> 
> 赞同：1
> 
> 时间：2012-09-14T14:30:01.290
> 
> 标签：ruby, watir

目前我有这个：

```
def burnChart()
   @browser.div(:id => "container").div(:id => "header").img(:class => "cogMenuHover").click
   @browser.div(:id => "container").div(:id => "header").div(:class => "sbTopMenu").li(:class => "taskMenuOp", :index =>1).click

  if 
    assert(@browser.send(type.to_sym, :class, "highcharts-grid").exists?)
    puts 'Chart has been found!'
  else
    puts 'No chart was generated'
  end
end 
```

最初我以为我必须使用 to_css？但从我看到其他人使用它的情况来看，这是不正确的，我不确定。

谁能帮帮我，我只想检查一个类是否存在并返回一个 true 或 fasle 以记录错误或确认

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:48:44.580

我相信你想要：

```
def burnChart()
   @browser.div(:id => "container").div(:id => "header").img(:class => "cogMenuHover").click
   @browser.div(:id => "container").div(:id => "header").div(:class => "sbTopMenu").li(:class => "taskMenuOp", :index =>1).click

  #Due to using IE, it looks like .exists? has to be used.
  if @browser.element(:class, "highcharts-grid").exists?
    puts 'Chart has been found!'
  else
    puts 'No chart was generated'
  end
end 
```

请注意：

*   对元素的检查应该是 if 语句的条件。
*   将支票更改为`.present?`. `.exists?`只要元素在页面上，就返回 true，但通常您还想检查它是否可见。
*   切换到`@browser.element`而不是`@browser.send`. 你可以做你正在做的事情，但你没有定义`type`任何地方，所以似乎没有必要。

# ruby-on-rails - Heroku 评估预编译问题

> ID：12426593
> 
> 赞同：3
> 
> 时间：2012-09-14T14:30:05.323
> 
> 标签：ruby-on-rails, heroku, asset-pipeline

最近我升级了我的 Heroku 应用程序的 ruby​​ 版本，之后它停止编译资产。

最初我使用的是 ruby​​ 版本 1.9.2，我的资产在部署应用程序时被编译。最近我通过在 gem 文件中指定并为我的应用程序添加配置变量“RUBY_VERSION”将 ruby​​ 版本升级到 1.9.3。

现在一切正常，它也在选择正确的 ruby​​ 版本，但在部署应用程序时它没有运行资产预编译命令。

我在 application.rb 中有以下行

> config.assets.enabled = true

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:14:42.810

对此的快速“修复”是在本地预编译资产，然后部署应用程序。

我认为它更好，可以更快地部署。

第一的

```
rake assets:clean 
```

然后

```
RACK_ENV=production rake assets:precompile 
```

# wcf - 使用代理应用安全标头？

> ID：12426594
> 
> 赞同：0
> 
> 时间：2012-09-14T14:30:08.487
> 
> 标签：wcf, security, header

我有一个看起来像这样的定制肥皂头：

```
[DataContract()]
    public class IntegrationHeader
    {
        [DataMember]
        public string UserName;
        [DataMember]
        public string Password;
    } 
```

然后我在 messageInspector 中有以下代码：

```
if (request.Headers.Action == null || request.Headers.Action.ToString().Length < 1)
                return null;

            foreach (var header in request.Headers)
            {
                if (header.Namespace == "ns" && header.Name == "SecurityToken")
                {
                    loginHandler = new LoginHandler();

                    integrationHeader = request.Headers.GetHeader<IntegrationHeader>(header.Name, header.Namespace);
                    if ((userContext = loginHandler.LoginUser(integrationHeader.UserName, PassWordManager.DESEncrypt(integrationHeader.Password), Business.Entity.LoginType.Regular)) == null)
                        throw new SecurityTokenException("Unknown username or invalid password");

                    Thread.CurrentPrincipal = userContext;

                    return null;
                }
            }

            throw new SecurityTokenException("Unknown username or invalid password"); 
```

使用soapui发送以下soap标头时，它可以正常工作：

```
 <soapenv:Header>
     <SecurityToken xmlns="ns" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
       <Password xmlns="MyApp.ServiceImplementation">X</Password>
       <UserName xmlns="MyApp.ServiceImplementation">X</UserName>
     </SecurityToken>
   </soapenv:Header> 
```

然后我尝试从代理生成的 WCF 客户端中执行此操作：

使用 (client = new MyProxy()) {

```
 IntegrationHeader ih = new IntegrationHeader { UserName = "X", Password = "X" };

                MessageHeader untyped = MessageHeader.CreateHeader("SecurityToken", "ns", ih);
                using (new System.ServiceModel.OperationContextScope(client.InnerChannel))
                {
                    OperationContext.Current.OutgoingMessageHeaders.Add(untyped);
                }

                client.GetData(request);
            } 
```

问题是运行此代码时 messageInspector 中只有 2 个标头，并且它们都不是安全标头？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:57:36.263

这是正确的解决方案：

```
 IntegrationHeader ih = new IntegrationHeader { UserName = "X", Password = "X" };

            MessageHeader untyped = MessageHeader.CreateHeader("SecurityToken", "ns", ih);
            using (new System.ServiceModel.OperationContextScope(client.InnerChannel))
            {
                OperationContext.Current.OutgoingMessageHeaders.Add(untyped);
                client.GetData(request);
            } 
```

服务调用大部分在 using else 中完成，安全标头将从传出上下文中删除。

# sql-server-2005 - Pervasive 9 - 导出非常大的表

> ID：12426605
> 
> 赞同：0
> 
> 时间：2012-09-14T14:31:21.547
> 
> 标签：sql-server-2005, pervasive

我正在寻找一些关于为从 pervasive 9 迁移到 SQL 数据库的迁移项目导出大量数据的指导。非常大，我说的行数超过 1000 万。

ssis 中导入/导出的吞吐量对我来说似乎很慢，所以我想知道是否有人对 pervasive 有领域经验并有一些性能提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:23:45.200

如果您要从 Pervasive 数据库中导出所有记录，您将受到从磁盘读取它们的速度以及存在多少网络延迟的限制。我最好的建议是在运行 Pervasive 的机器上运行导出。这将消除方程的网络方面。对于 PSQL v9 及更高版本，Pervasive Control Center 中有一个导出向导。它可以导出为 CSV，但您必须一次导出每个表。还有其他第三方工具（比如我自己的[DataXtraction](http://www.mirtheil.com/dataxtraction.asp)）可以导出 PSQL 数据库中的所有表。我不知道它是否会更快。

# bash - 如何获取目录中的所有文件？

> ID：12426606
> 
> 赞同：9
> 
> 时间：2012-09-14T14:31:24.163
> 
> 标签：bash

为什么这不起作用？

```
find . -maxdepth 1 -type f -print0 | xargs -0 . 
```

我得到的只是`xargs: .: Permission denied`。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-14T14:35:58.017

当你运行时`. file`，你调用了一个内置的 shell `.`。您的`xargs`变体尝试执行当前目录。
即使确实调用了内置命令，该命令也会在子 shell 中运行，因此所有“采购”都是无用的。

为此使用 shell globbing 和循环：

```
for file in * ; do
  if [ -f "$file" ] ; then
    . "$file"
  fi
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T17:39:04.937

@Mat 的解决方案是最干净的，但*如果您对一些 bash-fu 感兴趣，可以*使用以下基于原始`find`命令的解决方案：

```
eval $(find . -maxdepth 1 -type f -exec echo . \'{}\'';' \;) 
```

*   `find`用于`-exec`为找到的每个文件构造一个采购命令，例如`. './foo';`. 请注意转义的单引号以确保文件名具有特殊字符。得到妥善处理。
*   `find`将返回一个以换行符分隔的采购命令列表；通过使用*不带*`$()`双引号的命令替换 ( ) ，shell 将这些行折叠成一行，并使用每个空格作为分隔符。
**   最后，`eval`在当前 shell 的上下文中执行源命令的完整列表（在 OS X 10.8.1 上验证）。*

 *注意：此解决方案的一个潜在问题是命令字符串可能会变大 - 可能太大 - 存在许多文件和/或长文件名。*

# html - 消除 缩进

> ID：12426609
> 
> 赞同：32
> 
> 时间：2012-09-14T14:31:34.960
> 
> 标签：html, css

我已使用删除列表中的项目符号

```
ul li { list-style: none; } 
```

但我仍然在列表上得到一个缩进，就好像子弹在那里一样。

![在此处输入图像描述](../Images/fd2c2bc3562a979ad836a08bde58c1b6.png)

我需要图像中的列表项完全居中。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-14T14:33:23.287

浏览器提供附加到标签的`<ul/>`默认`<li/>`样式

```
ul,li { list-style-type: none;
        list-style-position:inside;
        margin:0;
        padding:0; } 
```

[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T14:37:59.213

提供的所有答案都将解决您的问题，但我绝对建议您考虑使用重置样式表，这样您就不会遇到跨浏览器问题！

最好的一个（至少最受欢迎的一个）很可能是这样的：

[http://html5doctor.com/html-5-reset-stylesheet/](http://html5doctor.com/html-5-reset-stylesheet/)

希望对您的问题有所帮助，但如果您不想简单地使用重置样式表：

```
ul, li{
    margin: 0;
    padding: 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T14:38:19.643

如果要使文本居中，请尝试

```
li{ 
  padding-left: 0px; 
  padding-right:0px; 
  margin-left:0px; 
  margin-right:0px; 
  text-align:center;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T14:33:45.880

您还可以添加边距和填充 0：

```
ul li { 
   list-style: none; 
   margin:0;
   padding:0;
} 
```

# jquery - jquery.validate 与屏蔽输入冲突

> ID：12426619
> 
> 赞同：1
> 
> 时间：2012-09-14T14:32:26.017
> 
> 标签：jquery, jquery-validate, maskedinput

我有一个使用[http://digitalbush.com/projects/masked-input-plugin/屏蔽并使用](http://digitalbush.com/projects/masked-input-plugin/)[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)验证的电话号码。

代码位于下方，“几乎”工作示例位于[http://jsfiddle.net/dnv38/](http://jsfiddle.net/dnv38/)。

请注意，电话号码不是必需的，但两个插件冲突导致需要电话号码。不久前，我以为我找到了每个[jquery.maskedinput-1.3.js 与 jquery.validate 1.9.0 冲突](https://stackoverflow.com/questions/12115588/jquery-maskedinput-1-3-js-conflicts-with-jquery-validate-1-9-0)的答案，但事实证明它不正确。

如何屏蔽输入并验证它，但不使其成为必需？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" /> 
<title>Validate</title> 
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script> 
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js" type="text/javascript"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/additional-methods.js" type="text/javascript"></script>
<script src="http://snort-rule-manager.googlecode.com/svn-history/r2/trunk/assets/9982dce2/jquery.maskedinput.js" type="text/javascript"></script>

<script type="text/javascript">
$(function() {

    $("#phone").mask("(999) 999-9999");

    var validator=$("#form").validate({
        rules: {phone:"phoneUS"},
        submitHandler: function(form) {
            alert('submitHandler');
        }
    });

});
</script>
</head>

<body>

<form id="form" method="post">
<input type="text" name="phone" id="phone" value="" />
<input type="submit" name="submit" value="submit" />
</form>

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T17:54:28.860

我可以通过使用闭包修改验证插件的 onfocusout 方法来解决此问题，但这样做似乎是错误的......

```
 onfocusout: function (element)
    {
        if (!this.checkable(element) && (element.name in this.submitted || !this.optional(element)))
        {
            var currentObj = this;
            var currentElement = element;
            var delay = function () { currentObj.element(currentElement); };
            setTimeout(delay, 0);
        }
    }, 
```

# c# - 如何将元数据添加到动态构建的 MVC3 ViewModel？

> ID：12426620
> 
> 赞同：1
> 
> 时间：2012-09-14T14:32:30.017
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, modelmetadata, modelmetadataprovider

我正在处理的一个项目的主要功能之一是用户能够基于预先存在的字段类型（例如众所周知的类型）配置表单（如在“表单”中填写） “用户名”、“出生日期”等，还有“通用类型”，如“字符串”、“日期时间”等）。

我们曾经有一个静态 ViewModel，它适用于“众所周知的”类型，看起来像这样：

```
public class UserInputModel
{
    [StringLength(200)]
    public string Name { get; set; }

    [Required(ErrorMessageResourceName = "BirthDateEmptyError", ErrorMessageResourceType = typeof(Resources.ErrorMessages))]
    public DateTime BirthDate { get; set; }

    //Here comes a lot of other properties
} 
```

列出了所有已知的属性，我们根据上下文显示或隐藏它们。

但是最后一个要求来了，改变了这一切。用户现在可以根据需要添加任意数量的泛型类型字段。为了做到这一点，我们决定让这个 InputModel 完全动态化。现在看起来像这样：

```
public class UserInputModel
{
    // Each ModelProperty has an "Id" and a "Value" property
    public ICollection<ModelProperty> Properties { get; set; }
} 
```

这就像一个魅力。razor 视图只需要遍历集合，为集合的每个属性创建相应的控件，而不是标准的方式：

```
@Html.TextBoxFor(m => m.Properties[index].Value); 
```

...我们很好地将数据作为填充表格返回。

=> 这很好用，但我们没有任何客户端验证。为此，我们需要一些元数据......我们不再通过注释获得，因为我们正在动态创建模型。

为了提供这些元数据，我创建了一个`CustomModelMetadataProvider`继承自Global.asax`DataAnnotationsModelMetadataProvider`并将其注册为新的。`ModelMetadataProvider`该`CreateMetadata()`函数在创建 ViewModel 时被调用，并且对于我的 ViewModel 的每个属性......到目前为止都很好。

**问题从哪里开始**：为了向当前属性添加一些元数据，我首先需要确定我当前正在查看的属性（“名称”的最大长度为 200，“出生日期”没有，所以我无法分配默认情况下每个属性的最大长度）。不知何故，我还没有设法做到这一点，因为所有属性都具有相同的名称`Value`和相同的容器类型`ModelProperty`。

我尝试通过反射访问属性的容器，但由于 ModelAccessor 的目标是 ViewModel 本身（因为 lambda 表达式`m => m.Properties`），以下构造为我提供了整个 ViewModel，而不仅仅是 ModelProperty：

```
var container = modelAccessor.Target.GetType().GetField("container");
var containerObject = (UserInputModel)container.GetValue(modelAccessor.Target); 
```

我一直在翻来覆去，但找不到一种方法来识别我手头的 ModelProperty。有没有办法做到这一点？

**更新：**在所有可能的方向翻转了一段时间后，我们终于走了另一条路。我们基本上使用不显眼的 javascript 来使用 MVC 的验证功能，而无需触及属性或元数据。简而言之，我们将 HTML 属性`value-data="true"`（以及所有其他必需的属性）添加到`@Html.TextBoxFor()`语句中。这对于所有原子验证（必需、字符串长度等）都非常有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:35:16.527

看看这篇文章是否对您有帮助：[使用 AutoMapper 将元数据传输到视图模型的技术](https://stackoverflow.com/questions/9989785/technique-for-carrying-metadata-to-view-models-with-automapper)。

也可以将这个用于想法（自定义模型元数据提供程序）：[在运行时更改视图模型的 MetadataType 属性](https://stackoverflow.com/questions/8629064/changing-viewmodels-metadatatype-attribute-at-runtime)

[在我看来， Fluent 验证](http://fluentvalidation.codeplex.com/)可能是您的最佳选择，但显然您可以在上述选项中选择最佳匹配。

**更新**

尝试使用`ModelMetadata`并覆盖`ModelMetadataProvider`：[深入了解 MVC：ModelMetadata 和 ModelMetadataProvider](http://mgolchin.net/posts/21/dive-deep-into-mvc-modelmetadata-and-modelmetadataprovider)。通过这种方式，您可以完全自定义模型元数据（这取代了数据注释），并且您可以完全控制正在发生的事情，而不是依赖 ASP.NET MVC。

另一个值得关注的地方是[创建您自己的 ModelMetadataProvider 来处理自定义属性](http://buildstarted.com/2010/09/14/creating-your-own-modelmetadataprovider-to-handle-custom-attributes/)。

希望这一切对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:47:35.773

[Tim，您可以利用属性上的Remote 属性](http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx)通过 Ajax 进行客户端验证。

基本上，您需要设置一个验证控制器，然后将一些智能写入该控制器。但至少您可以编写一些辅助方法并将它们全部保存在一个地方。根据您向最终用户提供的元数据，您将拥有一系列验证器，并且每个验证器方法都适用于具有良好重用性的特定类型。

这种方法的一个缺陷是您需要为要支持的每种类型和条件编写验证方法。不过，听起来你无论如何都必须走那条路。

希望这可以帮助。

# jquery - 为什么 jQuery 中的 .selector 属性不存储有效的选择器值？

> ID：12426622
> 
> 赞同：6
> 
> 时间：2012-09-14T14:32:32.277
> 
> 标签：jquery

假设我有与此类似的 HTML：

```
<div class="fooContainer">
    <div class="barContainer">
        <a href="#">foo-bar</a>
    </div>
</div> 
```

如果在脚本中我的入口点是锚点，我需要使用类 fooContainer 进入 div，我可以这样做：

```
var $fooContainer = $("a").parents(".fooContainer"); 
```

这工作得很好，因为`$fooContainer`现在保存了对 DOM 中元素的引用。

当我现在打印出这样的`selector`值时：

```
console.log($fooContainer.selector) 
```

我得到了价值`a.parents(.fooContainer)`。

我的印象是该`selector`属性返回了一个字符串，该字符串本身就是一个有效的选择器值。

情况并非如此，就像尝试将其用作这样的选择器时：

```
$("a.parents(.fooContainer)") 
```

它在 jQuery 1.7.2 中找不到匹配项。
在最新的 jQuery 1.8.x 中，它甚至会抛出异常：`Error: Syntax error, unrecognized expression: a.parents(.fooContainer)`

*   为什么选择器属性不包含有效的选择器值？
*   如果不是，人们会使用该`selector`财产做什么？

我尝试在 jQuery[**文档**](http://api.jquery.com)中搜索信息，但找不到与该属性相关的任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T14:46:34.330

您可以轻松阅读[源代码，但](http://code.jquery.com/jquery-latest.js)[可浏览 API](http://api.jquery.com/)中未记录的内容是内部和私有的。

根据定义。

所以这是一个实现细节，一个你真的不应该尝试使用的属性，因为没有保证，无论是未来版本还是你今天可能想象的任何用途。

# apache - 301重定向的必要性

> ID：12426624
> 
> 赞同：0
> 
> 时间：2012-09-14T14:32:40.527
> 
> 标签：apache, mod-rewrite, seo

所以，我只是想问你是否真的有必要将 301 重定向放在你的 .htaccess 文件中？

我的意思是，这是我的旧网址：

[http://www.sample.com/tutorials.php?name=sample](http://www.sample.com/tutorials.php?name=sample)

这是新的：

[http://www.sample.com/tutorials/programming/sample.php](http://www.sample.com/tutorials/programming/sample.php)

所以，我坚持我必须有 301 重定向，但人们说谷歌（和其他搜索引擎）会自己解决这个问题。那么，如果我设置了 301 重定向，我的网站会更加 SEO 友好，还是会像没有 301 重定向的网站一样友好？

旁注：我会在谷歌网站管理员工具中重新上传我的站点地图。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T16:31:09.147

我想你移动了内容，旧的 url 现在是一个空的 404 页面。好吧，即使谷歌会理解它，谷歌只是**喜欢**让网站管理员更轻松地完成它的工作。此外，您的页面可能有如此多的外部链接，您必须进行 301 以保持这些链接有用。

在 .htaccess 中创建 301 并将其永久保留在此处，并且在将内容移动到另一个 url 时始终创建 301。

# php - 从购物车中删除商品后，Magento 重定向到主页

> ID：12426626
> 
> 赞同：1
> 
> 时间：2012-09-14T14:32:52.533
> 
> 标签：php, magento, checkout

# 问题

我们正在使用 Magento 版本。1.7.0.1 并且我们遇到了一个问题，即用户从购物车中删除了一个项目，并且购物车将重定向回主页，而不是传统上只是返回到结帐页面（即使是零项目）。

## 背景

我们在登台服务器上的子文件夹中设置了站点，并且它可以正常工作。

发生这种情况的两者之间可能有什么不同？服务器本身非常相似。Ubuntu 10.04、PHP 5.3+ 等

我只能认为这可能是一个路径问题（但没有运气追踪）

我确实尝试了[这里](https://stackoverflow.com/questions/5223960/when-removing-an-item-from-the-cart-magento-redirects-to-store-home-page-instea)建议的“快速修复”，但可惜，没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:05:07.413

由于它只发生在您的实时服务器上而不是暂存服务器上，因此它似乎不太可能是与代码相关的问题。尝试在安装并启用扩展 TamperData 的 FireFox 中执行该操作。当您逐步完成这些步骤时，您应该会很好地指示该网站试图将您发送到哪里，如果运气好的话，您会在那里看到一个额外的重定向，它会立即点击发生的事情。除此之外，请确保启用了日志记录（系统 > 配置 > 开发人员 > 日志设置）并检查是否没有发生实际错误。

deleteAction 调用 _redirectReferer，传入`*/*`（它应该反过来成为`checkout/cart`）。_redirectReferer 函数遵循 3 条路径。

1.  如果有引荐来源网址，则重定向到它。
2.  如果没有引荐来源网址，但有默认网址，则重定向到该网址
3.  否则重定向到主页。

基于这些事实，您可能会立即假设第 3 步正在发生，但由于 deleteAction 正在传递一个参数，因此应该不可能通过第 2 步，因为总会有一个默认 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T06:01:37.197

我通过以下步骤解决了这个问题。

导航`"app\code\core\Mage\Checkout\controllers\CartController.php".`

找到“ `deleteAction()`”函数，函数如下所示。

> 公共功能删除操作（）{
> 
> ```
>  $id = (int) $this->getRequest()->getParam('id');
>     if ($id) {
>         try {
>             $this->_getCart()->removeItem($id)
>               ->save();
>         } catch (Exception $e) {
>             $this->_getSession()->addError($this->__('Cannot remove the item.'));
>             Mage::logException($e);
>         }
>     }
>     $this->_redirectReferer(Mage::getUrl('*/*'));
> } 
> ```

您需要将行更改`"$this->_redirectReferer(Mage::getUrl('*/*'));"`为`$this->_redirect('checkout/cart');`. 所以现在该功能将如下所示。

```
public function deleteAction()
    {
        $id = (int) $this->getRequest()->getParam('id');
        if ($id) {
            try {
                $this->_getCart()->removeItem($id)
                  ->save();
            } catch (Exception $e) {
                $this->_getSession()->addError($this->__('Cannot remove the item.'));
                Mage::logException($e);
            }
        }
        $this->_redirect('checkout/cart');
    } 
```

以上不是提供的方法。我只是解释了调试的地方。尝试[创建一个模块](http://inchoo.net/dev-talk/how-to-extend-magento-core-controller/)并覆盖上述函数。这就是推荐的方式。

有关更多信息，请参阅此[链接](https://stackoverflow.com/a/8499720/3049065)。

谢谢

# c# - Razor MVC3 在返回视图时保持全局变量集

> ID：12426627
> 
> 赞同：4
> 
> 时间：2012-09-14T14:32:57.437
> 
> 标签：c#, asp.net-mvc

我有一个全局字符串变量，我在执行一个操作（按下提交按钮）后设置，然后我想在按下另一个按钮时访问同一个字符串，目前我正在做类似的事情

```
GlobalVariable = "blah";
return View(); 
```

再次访问它的最佳做法是什么。我想指出它是同一个页面（index.cshtml）

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T14:48:16.083

如果它是每个用户的值，请使用：

```
Session["MyKey"] = "MyValue"; // save the value
var myValue = (string) Session["MyKey"]; // retrieve the value 
```

如果它为所有用户使用一个值：

```
Application["MyKey"] = "MyValue"; // save the value
var myValue = (string) Application["MyKey"]; // retrieve the value 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T14:46:46.437

您确定要让网站的每个用户都共享此状态吗？这是一个非常罕见的要求。更有可能它应该是特定于用户的。

ASP.NET 中有几个地方可以保存信息：

*   **应用程序**- 全局范围，因此该值对所有用户可见。
*   **会话**- 会话范围，对一个用户可见
*   **缓存**- 全局范围，因此该值对所有用户可见。
*   **TempData** - 在这个*和下一个*请求期间对一个用户可见

例子：

```
public ActionResult MyAction()
{
    HttpContext.Application["global_var"] = "anyone can see me";
    HttpContext.Cache["global_cached"] = "anyone can see me, but I can expire";
    Session["session_var"] = "only this user can see me";
    TempData["flash_var"]= "only this user can see me but also in next request";        
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T14:39:52.697

我不是 ViewBag 的粉丝，所以我的解决方案是将其添加到您传递给视图的视图模型中，并使用 a`HiddenFor()`以便在您需要它用于每个后续操作时将其回发。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T14:35:44.527

把它放在 ViewBag.GlobalVariable

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T14:45:21.840

在这种情况下，我建议不要在 ASP MVC 中使用 Session 甚至 viebag，而是使用 Cashing

```
 Cache["permvaluetostore"] =valuetokeep 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T14:47:16.060

您需要保留该数据。您可以使用**数据库表**或**会话变量**来执行此操作。

会话变量值将可用于当前会话。

如果您希望该值在所有会话中都是全局的，您也可以考虑使用**Caching**。

# css - Drupal：“无法创建 CTools CSS 缓存目录。检查文件目录的权限。”？

> ID：12426629
> 
> 赞同：2
> 
> 时间：2012-09-14T14:33:08.790
> 
> 标签：css, file, drupal, permissions, drupal-ctools

我是 drupal 的新手，并且正在尝试帮助一个朋友使用他们的 drupal 站点，尽管我专门研究 Wordpress。我对此进行了一些研究，发现结果表明通过将权限更改为 777 可以解决问题。我做到了，但它仍然没有修复它......我完全不知所措，因为我还没有改变任何东西，而且几周前它还在工作

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T15:09:33.667

您可能需要递归地将文件目录的权限设置为 777，因为 ctools 缓存目录在里面更深。

`chmod -R 777 {files}`，`{files}`您的文件目录的路径在哪里。此外，如果您的服务器允许，您可能需要`sudo`在此之前使用它。

# html - iOS Safari 中 24 小时格式的时间输入类型演示

> ID：12426637
> 
> 赞同：2
> 
> 时间：2012-09-14T14:33:34.070
> 
> 标签：html, ios5, datetime, datepicker, mobile-safari

从 iOS 5 开始，Safari 就支持时间输入类型。但是，时间以 AM/PM 格式显示：

![iOS Safari 上的日期时间输入类型](../Images/72cab4c475c882df717a24ae8bf0f85f.png)

大多数欧洲国家都使用 24 小时制来显示时间。有没有办法切换到24小时格式？使用 datetime-local 并将语言环境设置为荷兰语对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T14:17:49.357

使用本机时间选择器是一个不错的选择，但是您对渲染没有太多控制权。这仍然掌握在浏览器的手中。

[尝试使用Mobiscroll Date & Time Scroller](http://mobiscroll.com/component/datetime)，而不是使用本机控件。您可以关闭 AM/PM 并使用 24 小时格式。

语言包可用于本地化、日期格式以及其他功能。并为移动设备提供出色的用户体验。

# asp.net - 日期时间字段和包含列的索引说明

> ID：12426643
> 
> 赞同：0
> 
> 时间：2012-09-14T14:33:57.387
> 
> 标签：asp.net, sql-server, database

我有一个通常的 sqlserver 表

`intID(primary key),field1,field2,manyotherfields..., datetime TimeOperation`

`TimeOperation BETWEEN startTime AND endTime`我 99% 的不同类型的查询都以, 然后,开头`select * (or count(*)) where fieldA=xxx`，并与其他较小的表连接。 `select *`因为或多或少我需要所有的领域。

我显然在...上创建了一个索引，`TimeOperation`但性能不够好，所以我想添加一些索引键列或索引包含列，但我有点困惑。

我知道两者之间的区别，但我不知道在每种情况下添加一列对速度和大小的影响有多大。

我想最大的改进是创建一个包含所有列的索引，对吗？（但在空间方面我买不起）

如果我经常使用`field1=xxx`例如，添加`field1`到索引键列（之后`TimeOperation`）会提供更好的性能，对吗？

另外......只是为了确定包含列的索引如何工作：如果我选择`TimeOperation`一定范围内的行，sql会为我感兴趣的行寻找我的 TimeOperation 索引，它比扫描所有表更快，因为在索引中 TimeOperation 值是按升序排列的，对吗？但后来我需要所有数据，现在我需要这些行的所有其余数据字段...... sql 如何检索数据？我猜它对索引中的那些行有一种书签，对吧？但是它必须多次点击表......所以包括索引中的所有列将节省点击表的时间，对吗？

谢谢！马蒂亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:40:59.447

我们将需要有关您的查询表示例的更多信息来完全解决这个问题，但是：

*   DateTime 列本身应该具有高度选择性，因此以`TimeOperation`第一列作为索引的索引应该解决针对`TimeOperation`.
*   不要盲目地将所有列添加到索引中，甚至不要添加到包含的索引中 - 这会使索引页面密度变差并且适得其反（您将在索引中复制表）。
*   如果您的数据库中的所有数据都以 为中心`TimeOperation`，您可能会考虑围绕它构建聚集索引。
*   如果您有查询，`field1 = x`那么您需要一个单独的索引`field1`（假设它具有适当的选择性），即`TimeOperation`如果它不在查询的 WHERE 子句中，则在索引上没有。
*   是的，你是对的，当 SQL 在索引中找到一条记录时，它需要[在集群中进行键（或 RID）查找](https://stackoverflow.com/questions/3711232/does-the-sql-server-clustered-index-replace-the-rid-lookup-index)以检索其余列。如果您的非聚集索引在您的语句中包含其他列`select`，则可以避免查找。但由于您使用的是 SELECT(*)，因此覆盖索引不太可能有帮助。

**编辑**

解释 - 选择性和密度在[这里](http://blogs.msdn.com/b/bartd/archive/2011/01/25/query_5f00_tuning_5f00_key_5f00_terms.aspx)详细解释。例如，如果您的查询仅`TimeOperation`返回少量行（经验法则是 < 5%，但并非总是如此），是否会使用索引，即您的查询具有足够的选择性，让 SQL 可以在`TimeOperation`.

基本出发点是：

```
CREATE TABLE [MyTable]
(
  intID INT ID identity(1,1) NOT NULL,
  field1 NVARCHAR(20),
  -- .. More columns, which may be selected, but not filtered 
  TimeOperation DateTime,

  CONSTRAINT PK_MyTable PRIMARY KEY (IntId)
); 
```

基本指标为

```
CREATE NONCLUSTERED INDEX IX_MyTable_1 ON [MyTable](TimeOperation);
CREATE NONCLUSTERED INDEX IX_MyTable_2 ON [MyTable](Field1); 
```

*聚类考虑/选项*

*如果*您的大部分记录以“串行”升序 TimeOperation 顺序插入，即 intId 和 TimeOperation 将同时增加，那么我会将集群保留在 intID 上（默认值）（即表 DDL 是`PRIMARY KEY CLUSTERED (IntId)`，无论如何这是默认值）。

但是，如果和之间*没有*相关性，并且*如果*您的大多数查询都是这种形式，则（并将 PK 更改为将避免书签查找）。更好的是，如果保证 的值是唯一的，那么将提高密度，因为它将避免使用唯一符。`IntId``TimeOperation`*`SELECT * FROM [MyTable] WHERE TimeOperation between xx and yy``CREATE CLUSTERED INDEX CL_MyTable ON MyTable(TimeOperation)``PRIMARY KEY NONCLUSTERED (IntId)``TimeOperation``CREATE UNIQUE CLUSTERED INDEX CL_MyTable ON MyTable(TimeOperation)`*

 **注意*- 对于这个答案的其余部分，我假设你`IntId`和`TimeOperations`ARE 高度相关，因此聚类是 by `IntId`。

*覆盖索引*

正如其他人所提到的，您的使用`SELECT (*)`是不好的做法，*尤其*是覆盖索引没有任何用处（例外是`COUNT(*)`）。如果您的查询不是 SELECT(*)，而是例如

```
SELECT TimeOperation, field1
FROM 
WHERE TimeOperation BETWEEN x and y -- and returns < 5% data. 
```

然后更改您的索引`TimeOperation`以包含`field1`

```
CREATE NONCLUSTERED INDEX IX_MyTable ON [MyTable](TimeOperation) INCLUDE(Field1); 
```

或将两者都添加到索引中（首先使用最常见的过滤器，或者如果始终存在两个过滤器，则首先使用最有选择性的过滤器）

```
CREATE NONCLUSTERED INDEX IX_MyTable ON [MyTable](TimeOperation, Field1); 
```

要么将避免摆脱/关键查找。第二个 (,) 选项将解决您在 WHERE 或 HAVING 子句中过滤 TimeOperation 和 Field1 的查询。

*Re: (TimeOperation, Field1) 上的索引和单独的索引有什么区别？*

例如

```
CREATE NONCLUSTERED INDEX IX_MyTable ON [MyTable](TimeOperation, Field1); 
```

对查询没有用

```
SELECT ... FROM MyTable WHERE Field1 = 'xyz'; 
```

该索引仅对具有 TimeOperation 的查询有用

```
SELECT ... FROM MyTable WHERE TimeOperation between x and y; 
```

或者

```
SELECT ... FROM MyTable WHERE TimeOperation between x and y AND Field1 = 'xyz'; 
```

希望这可以帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:42:38.497

最基本的索引在幕后创建了一层“超树”结构，这允许 SQL 引擎更容易地为索引列找到具有特定值的行。每个索引都创建了一种不同的方式来使用二进制搜索（logN 性能）“深入”到表的数据中。您添加的每个索引都会使该索引的选择速度更快，但会降低插入/更新速度（必须放入数据，然后必须创建索引）。

因此，通常应该为通常用于过滤记录的列组合创建索引。我确实会在 TimeOperation 和 TimeOperation 上单独创建一个索引。

永远不要简单地创建一个包含表的所有列的索引，尤其是像这样的宽列。*

# jquery - 如何从 apple.com/ipod-nano 重新创建图像滑入效果

> ID：12426644
> 
> 赞同：0
> 
> 时间：2012-09-14T14:33:59.500
> 
> 标签：jquery, webkit

我注意到苹果网站上有一个很好的滑入效果。当您向下滚动页面时，图像变得可见（滑入视图）。[http://www.apple.com/ipod-nano](http://www.apple.com/ipod-nano)

我正在尝试隔离所涉及的关键脚本。我将 nano 页面代码放入 dreamweaver 进行调查。它似乎是`onscroll`结合了`-webkit-`CSS 修饰符的自定义 Javascript 事件。

问题是有太多的链接`.js`文件，我很难从杂乱的东西中查看所涉及的关键代码。我敢肯定，有许多链接页面只是在处理流畅性和次要细节。

我需要做什么来重新创建此功能？非常感谢任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:56:30.710

在 jQuery 中执行此操作的最简单方法是使用 跟踪窗口的滚动位置[`.scrollTop()`](http://api.jquery.com/scrollTop)并将其与 DOM 元素的位置进行比较[`.offset().top`](http://api.jquery.com/offset)。

当它们相等时，DOM 元素已到达浏览器窗口的顶部。或者您可以添加恒定数量的像素或[`$(window).height()`](http://api.jquery.com/height)检测它何时刚刚进入视野。

[http://jsfiddle.net/mblase75/LtMgP/——](http://jsfiddle.net/mblase75/LtMgP/)滚动页面并注意“marker”这个词，它会在页面的中途从黑色切换到蓝色。代码：

```
$(window).on('scroll', function() {
    if ($(window).scrollTop() > $('p').offset().top-100) {
        $('p').css('color','blue'); 
    };
});​ 
```

# java-me - 实现一个在向端口 50000 发送 SMS 时调用的 MIDlet

> ID：12426645
> 
> 赞同：0
> 
> 时间：2012-09-14T14:33:59.833
> 
> 标签：java-me, midlet

我想创建一个使用推送注册表功能自动启动的 MIDlet

```
PushRegistry.RegisterConnection("sms://:50000", this.getclass().getname(),"*"); 
```

以下是我提出的代码，由于它没有以任何方式响应任何消息，因此找不到问题。

PS 我知道动态注册需要我先运行一次应用程序。

```
public class Midlet extends MIDlet implements CommandListener,Runnable {

    private Display disp;
    Form form = new Form("Welcome");
    Command ok,exit;

    public void startApp() {
        String conn[];
         exit= new Command("exit",Command.CANCEL,2);
         ok= new Command("ok",Command.OK,2);
         form.addCommand(ok);
         form.addCommand(exit);
        form.setCommandListener(this);
        conn = PushRegistry.listConnections(true);
        disp=Display.getDisplay(this);
        disp.setCurrent(form);

            form.append("Midlet");       
            form.append("Press OK to register sms connection");

    }

    public void pauseApp() {
    }

    public void destroyApp(boolean unconditional) {
         notifyDestroyed();
    }

    public void commandAction(Command c, Displayable d) {
        if(c.getLabel().equals("exit"))
        {
            System.out.println("exit pressed");
            destroyApp(true);
        }
        if(c.getLabel().equals("ok"))
        {
            String[] cn;
            cn=PushRegistry.listConnections(true);
            form.append(""+cn.length);

            for(int i=0;i<cn.length;i++)
            {
                form.append(cn[i]);
            }
                Thread t = new Thread(this);
                t.start();
        }
    }

    public void run() {
        try {       
                PushRegistry.registerConnection("sms://:50000",this.getclass().getname, "*");
            } catch (IOException ex) {
                ex.printStackTrace();
            } catch (ClassNotFoundException ex) {
                ex.printStackTrace();
            }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T08:45:05.700

当我将此行替换为时，您的代码`PushRegistry.registerConnection("sms://:50000",this.getclass().getname, "*");` 有效`PushRegistry.registerConnection("sms://:50000",<actual name of the class>, "*");`

# php - 通过 URL 更改图像大小

> ID：12426650
> 
> 赞同：1
> 
> 时间：2012-09-14T14:34:34.220
> 
> 标签：php, html, image

再一次，我遇到了一个我无法解决的简单问题，因为我使用的搜索词显然与以前使用的搜索词不匹配。我想要创建的只是一小段脚本，可以使用 URL 更改图像宽度。

可以在[http://waarneming.nl/fotonew/0/2639780.jpg](http://waarneming.nl/fotonew/0/2639780.jpg)上找到一个示例。如果添加变量[?w=100&h=100](http://waarneming.nl/fotonew/0/2639780.jpg?w=100&h=100)，图像会调整大小。值得一提的是，我不需要裁剪（示例中也不需要裁剪，即使 100x100 当然不是正确的比例）。唯一会发生的事情是 CSS 和 HTML 也可以做到：改变较大图片的高度和宽度。但是因为我需要在另一个脚本中调整大小的图像，所以我想使用 URL 变量。

希望你能帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T14:38:55.127

使用 SimpleImage 库：

```
<?php

/*
* File: SimpleImage.php
* Author: Simon Jarvis
* Copyright: 2006 Simon Jarvis
* Date: 08/11/06
* Link: http://www.white-hat-web-design.co.uk/articles/php-image-resizing.php
*
* This program is free software; you can redistribute it and/or
* modify it under the terms of the GNU General Public License
* as published by the Free Software Foundation; either version 2
* of the License, or (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
* GNU General Public License for more details:
* http://www.gnu.org/licenses/gpl.html
*
*/

class SimpleImage {

   var $image;
   var $image_type;

   function load($filename) {

      $image_info = getimagesize($filename);
      $this->image_type = $image_info[2];
      if( $this->image_type == IMAGETYPE_JPEG ) {

         $this->image = imagecreatefromjpeg($filename);
      } elseif( $this->image_type == IMAGETYPE_GIF ) {

         $this->image = imagecreatefromgif($filename);
      } elseif( $this->image_type == IMAGETYPE_PNG ) {

         $this->image = imagecreatefrompng($filename);
      }
   }
   function save($filename, $image_type=IMAGETYPE_JPEG, $compression=75, $permissions=null) {

      if( $image_type == IMAGETYPE_JPEG ) {
         imagejpeg($this->image,$filename,$compression);
      } elseif( $image_type == IMAGETYPE_GIF ) {

         imagegif($this->image,$filename);
      } elseif( $image_type == IMAGETYPE_PNG ) {

         imagepng($this->image,$filename);
      }
      if( $permissions != null) {

         chmod($filename,$permissions);
      }
   }
   function output($image_type=IMAGETYPE_JPEG) {

      if( $image_type == IMAGETYPE_JPEG ) {
         imagejpeg($this->image);
      } elseif( $image_type == IMAGETYPE_GIF ) {

         imagegif($this->image);
      } elseif( $image_type == IMAGETYPE_PNG ) {

         imagepng($this->image);
      }
   }
   function getWidth() {

      return imagesx($this->image);
   }
   function getHeight() {

      return imagesy($this->image);
   }
   function resizeToHeight($height) {

      $ratio = $height / $this->getHeight();
      $width = $this->getWidth() * $ratio;
      $this->resize($width,$height);
   }

   function resizeToWidth($width) {
      $ratio = $width / $this->getWidth();
      $height = $this->getheight() * $ratio;
      $this->resize($width,$height);
   }

   function scale($scale) {
      $width = $this->getWidth() * $scale/100;
      $height = $this->getheight() * $scale/100;
      $this->resize($width,$height);
   }

   function resize($width,$height) {
      $new_image = imagecreatetruecolor($width, $height);
      imagecopyresampled($new_image, $this->image, 0, 0, 0, 0, $width, $height, $this->getWidth(), $this->getHeight());
      $this->image = $new_image;
   }      

}
?> 
```

然后，试试这个：

```
<?php
   include('SimpleImage.php');
   $image = new SimpleImage();
   $image->load($_GET['file']);
   $image->resize($_GET['width'], $_GET['height']);
   $image->output();
?> 
```

为了调用脚本，您需要通过 URL 传递文件名、宽度和高度。假设脚本名为 foo.php：

[http://www.example.com/foo.php?file=picture_name.jpg&width=100&height=100](http://www.example.com/foo.php?file=picture_name.jpg&width=100&height=100)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:38:20.203

您可以在 javascript 中获取参数并将其分配给图像。就像是：

```
 function gup( name )
{
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    return "";
  else
    return results[1];
} 
```

接着：

```
var imagelengh = gup('w')
$('#image').width(w) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T14:38:21.477

以下是一些可能有帮助的链接：

[开发php](http://www.developphp.com/view.php?tid=1140)

[net.tutsplus.com：使用 php 轻松调整图像大小](http://net.tutsplus.com/tutorials/php/image-resizing-made-easy-with-php/)

[code-sucks.com：使用 php 调整图像大小](http://www.code-sucks.com/code/php/template.php?tutorial=use-php-to-resize-an-image.php)

[Dbscripts：php 调整图像大小](http://www.dbscripts.net/tutorials/php-resize-image/)

[谷歌搜索](https://www.google.com/?hl=en#hl=en&sclient=psy-ab&q=php%20resize%20image&oq=php%20resize%20image&gs_l=hp.3...66250.66250.1.66403.1.1.0.0.0.0.0.0..0.0.les;eesh..0.0...1.1.kcg9ietLDMU&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=ada922457692c11f&biw=1525&bih=724)

# zend-framework - zend 框架肥皂

> ID：12426653
> 
> 赞同：0
> 
> 时间：2012-09-14T14:34:42.853
> 
> 标签：zend-framework, soap-client

我必须生成以下代码并假设使用 zend_soap_client 来完成，但我不知道该怎么做，因为我没有 wsdl 文件。这里的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope
xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soapenv:Body>
<processOCIMessage soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
<arg0 xsi:type="soapenc:string"
xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
<BroadsoftDocument protocol="OCI"
xmlns="C" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<sessionId xmlns="">unique_sessionId </sessionId>
<command xsi:type="ServiceProviderDnGetSummaryListRequest" xmlns="">
<serviceProviderId>your_serviceProvider_Id
</serviceProviderId>
</command>
</BroadsoftDocument>
</arg0>
</processOCIMessage>
</soapenv:Body>
</soapenv:Envelope> 
```

我想我必须在非wsdl模式下这样做......

任何帮助将不胜感激。
问候安德里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:11:47.570

如果您正在请求 Soap 服务，那么您将需要 WSDL URI。

如果您正在创建 SOAP 服务，请使用资源

`http://bogdan-albei.blogspot.com/2009/05/quickstart-web-services-with-soap-and.html`

# reporting - Cognos Report Studio 基于 Column2 的不同值的列总数

> ID：12426656
> 
> 赞同：1
> 
> 时间：2012-09-14T14:34:54.513
> 
> 标签：reporting, aggregate-functions, duplicate-data, cognos, distinct-values

默认情况下，Cognos 会抑制重复/相同的记录。重复行不会出现在报告中，但会对所有行执行汇总 - 包括已消除的重复行。

要仅对不同的行执行汇总，您必须在创建汇总定义时添加 distinct 关键字。例如，以下摘要：

总计（我的列）

会成为...

总计（不同的 MyColumn）

但我希望基于 Column2 的不同值的 Column1 的总计。这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:47:23.483

我假设您的报告是建立在关系模型之上的。对您的问题的简短回答是使用 FOR 子句：
[Using the AT and FOR Options with Relational Summary Functions](http://www.ibm.com/developerworks/data/library/cognos/page125.html)

所以你可以做这样的事情：

```
Total(distinct MyColumn for Column2) 
```

我的问题是为什么你会认为一列的不同与另一列不同？
仅当两行或多行完全相同时，Cognos 才会“消除”重复行。
如果其中一列不同，则它不是不同的行。
您可以改用分组，它将单个列上的相同值组合在一起。

# string - 如何在bash中提取字符串的最后一部分？

> ID：12426659
> 
> 赞同：49
> 
> 时间：2012-09-14T14:35:17.023
> 
> 标签：string, bash, awk

我有这个变量：

```
A="Some variable has value abc.123" 
```

我需要提取这个值，即`abc.123`。这在bash中可能吗？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-09-14T14:38:46.663

最简单的是

```
echo $A | awk '{print $NF}' 
```

编辑：解释这是如何工作的......

`awk`将输入分成不同的字段，默认使用空格作为分隔符。硬编码`5`代替`NF`打印输入中的第 5 个字段：

```
echo $A | awk '{print $5}' 
```

`NF`是一个内置`awk`变量，它给出当前记录中的字段总数。以下返回数字 5，因为字符串中有 5 个字段`"Some variable has value abc.123"`：

```
echo $A | awk '{print NF}' 
```

结合输出字符串`$`中`NF`的最后一个字段，无论您的字符串包含多少个字段。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-09-14T14:38:46.063

是的; 这个：

```
A="Some variable has value abc.123"
echo "${A##* }" 
```

将打印：

```
abc.123
```

（该符号在[*Bash 参考手册*](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)[的第 3.5.3 节“Shell 参数扩展”中进行了](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)解释。）`${*parameter*##*word*}`[](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)

 ** * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-11-21T05:00:31.357

使用参数扩展的一些示例

```
A="Some variable has value abc.123"
echo "${A##* }"

abc.123 
```

" " 空间上的最长匹配

```
echo "${A% *}"

Some variable has value 
```

上最长的比赛。点

```
echo "${A%.*}"

Some variable has value abc 
```

" " 空间上的最短匹配

```
echo "${A%% *}"

some 
```

阅读更多[外壳参数扩展](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-09-14T14:37:35.770

你怎么知道价值从哪里开始？如果总是第 5 个和第 6 个单词，您可以使用例如：

```
B=$(echo $A | cut -d ' ' -f 5-) 
```

这使用`cut`命令切出部分行，使用简单的空格作为单词分隔符。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2020-01-07T13:06:48.910

该[文档](https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#Shell-Parameter-Expansion)阅读起来有点痛苦，因此我以更简单的方式对其进行了总结。

请注意，“ `*`”需要与“”交换位置，具体取决于您使用`#`或`%`。（这`*`只是一个通配符，因此您可能需要在阅读时摘下“正则表达式帽子”。）

*   `${A% *}`- 删除最短的尾随 `*`（去掉**最后一个字**）
*   `${A%% *}`- 删除最长的尾随 `*`（去掉**最后的话**）
*   `${A#* }`- 删除最短的前导`*` （去掉**第一个单词**）
*   `${A##* }`- 删除最长的前导`*` （去掉**第一个单词**）

当然，这里的“单词”可能包含任何不是文字空间的字符。

您可能通常使用此语法来修剪文件名：

*   `${A##*/}`删除所有包含的文件夹（例如`/usr/bin/git`-> `git`）
*   `${A%.*}`删除最后一个扩展名（例如`archive.tar.gz`-> `archive.tar`） - 请注意以下内容`my.path/noext`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-02T08:46:07.610

[正如 Zedfoxus在这里](https://stackoverflow.com/questions/22727107/how-to-find-the-last-field-using-cut)指出的那样。一种非常干净的方法，适用于所有基于 Unix 的系统。此外，您不需要知道子字符串的确切位置。

```
A="Some variable has value abc.123"

echo $A | rev | cut -d ' ' -f 1 | rev                                                                                            

# abc.123 
```*

# java - Java - 如何访问另一个正在运行的应用程序中的类

> ID：12426660
> 
> 赞同：0
> 
> 时间：2012-09-14T14:35:23.087
> 
> 标签：java, sockets

在我的场景中，我有一个正在运行的服务器，它等待客户端建立连接。客户端实例化连接是必要的，因为我要与之通信的计算机具有比我更严格的网络安全性。客户每天都会联系我。所以我有一个 jar 文件和正在运行的进程来处理这个问题。我这边是服务器端，另一端是客户端。接下来，我有一个网页正在运行，当用户单击特定按钮时，我需要告诉服务器应用程序，“好的，现在向客户端发送数据”。

实现这一目标的最佳方法是什么？首先，客户端等待数据有问题吗？我在这里需要什么特别的东西，比如心跳等吗？是否可以扭转这种情况并让服务器连接到客户端？

接下来，我怎样才能使我在用户单击按钮时启动的应用程序实际上与正在处理连接的已经运行的 jar 对话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:45:44.323

Client-Server communications can be easily achieved via a RESTful web service. And communications between applications on the same local machine can be easily achieved using sockets and a common communications protocol.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:42:32.553

你需要的是决定传输层。如果您使用[RMI](http://docs.oracle.com/javase/tutorial/rmi/index.html)（如果您在所有通信端点中使用 Java，这很有意义），您就不需要 heatbeat 或其他东西。

我应该在 web-app 上下文中定义一个唯一的实例，它初始化一个 RMI 对象并将其发布在 RMI 注册表中，以便客户端可以连接到它。

由于此对象是在 webapp 进程（和 webapp 类加载器）中创建的，因此它可以访问您使用的某些队列对象。然后您的 web 应用程序可以将项目添加到该队列。

您的 RMI 对象应该必须在单独的线程中执行（不要在 Java EE 中创建不分青红皂白的线程，只创建一个！或使用某些框架作为 Quartz）并从阻塞队列中消耗。

```
[webapp]
   configfile
   create thread with server object
      publish server object with getinfo method
      getinfo method consumes from queue (queue.take())

[client]
    connect via RMI to server object
    call method get info 
```

如果客户端可以在不读取新项目的情况下停留很多时间，并且有很多客户端，那么从没有项目（或超时）的队列中返回 null 可能是值得的。

# xml - XSLT 转换更改名称空间

> ID：12426662
> 
> 赞同：3
> 
> 时间：2012-09-14T14:35:30.963
> 
> 标签：xml, xslt, namespaces, xslt-2.0, xml-signature

我有以下 XML（大部分数据是虚拟的）

```
<?xml version="1.0" encoding="UTF-8"?>
<msg xmlns="http://someaddress.com/m1"  xmlns:ds="http://www.w3.org/2000/09/xmldsig#"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xsi:schemaLocation="http://someaddress/somexsd.xsd">
<header>
    <nodeA>aaaaaaaaaaa</nodeA>
    <nodeB>bbbbbbbb</nodeB>
</header>
<payload>
    <calcnode   xmlns="http://someaddress/nodeC"    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xsi:schemaLocation="http://someaddress/somexsd.xsd">
        <somefield>field</somefield>
    </calcnode>
    <ds:Signature>
        <SignedInfo>
            <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            <SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/>
            <Reference URI="#kjbn34jkb5j-3k45j-k3jb534jkb534k5">
                <DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>
                <DigestValue>+se0dfgft9gh8hjuji7ji65ko4ko3ko2</DigestValue>
            </Reference>
        </SignedInfo>
        <SignatureValue>sekfrhsdkjfhsdkjfhksd</SignatureValue>
        <KeyInfo>
            <X509Data>
                <X509Certificate>sdjkfhsdkfhskdf</X509Certificate>
            </X509Data>
        </KeyInfo>
    </ds:Signature>
</payload>
</msg> 
```

我要做的就是将`msg`元素的名称（为`newmsg`）和默认命名空间更改为`http://someaddress.com/m2`. 其他一切都应保持原样。我能得到的最接近的是这个 xslt

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:msg="http://someaddress.com/m1" >

<!-- the identity template -->
<xsl:template match="@* | node()">
    <xsl:copy copy-namespaces="no">
        <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
</xsl:template>

<!-- replace namespace of elements in old namespace -->
<xsl:template match="msg:msg">
  <xsl:element name="newmsg" namespace="http://someaddress.com/m2">
     <xsl:apply-templates select="@* | node()"/>
</xsl:element>
</xsl:template>
</xsl:stylesheet> 
```

我正在使用 xalan 进行测试，这是运行上述程序时得到的输出 xml

```
<?xml version="1.0" encoding="UTF-8"?>
    <newmsg xmlns="http://someaddress.com/m2" xsi:schemaLocation="http://someaddress/somexsd.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<header xmlns="http://someaddress.com/m1" xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
    <nodeA>aaaaaaaaaaa</nodeA>
    <nodeB>bbbbbbbb</nodeB>
</header>
<payload xmlns="http://someaddress.com/m1" xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
    <calcnode xmlns="http://someaddress/nodeC" xsi:schemaLocation="http://someaddress/somexsd.xsd">
        <somefield>field</somefield>
    </calcnode>
    <ds:Signature>
        <SignedInfo>
            <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            <SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/>
            <Reference URI="#kjbn34jkb5j-3k45j-k3jb534jkb534k5">
                <DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>
                <DigestValue>+se0dfgft9gh8hjuji7ji65ko4ko3ko2</DigestValue>
            </Reference>
        </SignedInfo>
        <SignatureValue>sekfrhsdkjfhsdkjfhksd</SignatureValue>
        <KeyInfo>
            <X509Data>
                <X509Certificate>sdjkfhsdkfhskdf</X509Certificate>
            </X509Data>
        </KeyInfo>
    </ds:Signature>
</payload>
</newmsg> 
```

这有两个主要问题：

1.  命名空间只是从输出中`ds`消失了，我不知道为什么。
2.  第二个问题是它从 中删除了`xsi`命名空间，`calcnode`并且鉴于`calcnode`是用于计算（和验证）签名的节点（位于该部分下方），这样的更改将使我无法理解签名的验证。

我已经尝试了几次不同的 xslt 迭代，但没有太多结果。任何人都可以对这种情况有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T04:32:45.643

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:oldDef="http://someaddress.com/m1" exclude-result-prefixes="oldDef">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="*">
  <xsl:element name="{name()}" namespace="{namespace-uri()}">
   <xsl:copy-of select="namespace::*[name()]|@*"/>
   <xsl:apply-templates select="node()"/>
  </xsl:element>
 </xsl:template>

 <xsl:template match="*[namespace-uri()='http://someaddress.com/m1']">
  <xsl:element name="{name()}" namespace="http://someaddress.com/m2">
   <xsl:copy-of select="namespace::*[name()]"/>
   <xsl:copy-of select="@*"/>
   <xsl:apply-templates select="node()"/>
  </xsl:element>
 </xsl:template>

 <xsl:template match="oldDef:msg[true()]">
  <newmsg xmlns="http://someaddress.com/m2">
   <xsl:copy-of select="namespace::*[name()]|@*"/>
   <xsl:apply-templates select="node()"/>
  </newmsg>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<msg xmlns="http://someaddress.com/m1"  xmlns:ds="http://www.w3.org/2000/09/xmldsig#"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xsi:schemaLocation="http://someaddress/somexsd.xsd">
<header>
    <nodeA>aaaaaaaaaaa</nodeA>
    <nodeB>bbbbbbbb</nodeB>
</header>
<payload>
    <calcnode   xmlns="http://someaddress/nodeC"    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xsi:schemaLocation="http://someaddress/somexsd.xsd">
        <somefield>field</somefield>
    </calcnode>
    <ds:Signature>
        <SignedInfo>
            <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            <SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/>
            <Reference URI="#kjbn34jkb5j-3k45j-k3jb534jkb534k5">
                <DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>
                <DigestValue>+se0dfgft9gh8hjuji7ji65ko4ko3ko2</DigestValue>
            </Reference>
        </SignedInfo>
        <SignatureValue>sekfrhsdkjfhsdkjfhksd</SignatureValue>
        <KeyInfo>
            <X509Data>
                <X509Certificate>sdjkfhsdkfhskdf</X509Certificate>
            </X509Data>
        </KeyInfo>
    </ds:Signature>
</payload>
</msg> 
```

**产生想要的正确结果：**

```
<newmsg xmlns="http://someaddress.com/m2" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://someaddress/somexsd.xsd">
   <header>
      <nodeA>aaaaaaaaaaa</nodeA>
      <nodeB>bbbbbbbb</nodeB>
   </header>
   <payload>
      <calcnode xmlns="http://someaddress/nodeC" xsi:schemaLocation="http://someaddress/somexsd.xsd">
         <somefield>field</somefield>
      </calcnode>
      <ds:Signature>
         <SignedInfo>
            <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            <SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/>
            <Reference URI="#kjbn34jkb5j-3k45j-k3jb534jkb534k5">
               <DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>
               <DigestValue>+se0dfgft9gh8hjuji7ji65ko4ko3ko2</DigestValue>
            </Reference>
         </SignedInfo>
         <SignatureValue>sekfrhsdkjfhsdkjfhksd</SignatureValue>
         <KeyInfo>
            <X509Data>
               <X509Certificate>sdjkfhsdkfhskdf</X509Certificate>
            </X509Data>
         </KeyInfo>
      </ds:Signature>
   </payload>
</newmsg> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:41:29.640

尝试在`<xsl:stylesheet`XSLT 的元素中定义 ds 命名空间，尽管 ds 命名空间并没有丢失，它只是分配给了 newmsg 的所有子元素。同样，xsi 命名空间应用于根元素 (newmsg)，因此也将应用于 calcnode。

输出似乎是有效的，即使某些命名空间声明已移动。

我写了一篇文章，其中包含一些关于控制命名空间的信息，可能会提供一些见解：[Transforming XHTML using XSLT identity templates](http://www.ibm.com/developerworks/web/library/x-tipxsltidentitytpl/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T17:03:07.263

> 我要做的就是将 msg 元素的名称（更改为 newmsg）和默认命名空间更改为[http://someaddress.com/m2](http://someaddress.com/m2)。其他一切都应保持原样。

样式表：

```
<xsl:stylesheet version="2.0" 
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:msg="http://someaddress.com/m1">

  <xsl:output omit-xml-declaration="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy copy-namespaces="no">
      <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
  </xsl:template>

  <!-- Process all elements (except 'msg') in the 'msg' namespace -->
  <xsl:template match="msg:*">
    <xsl:element name="{local-name()}" namespace="http://someaddress.com/m2">
      <xsl:apply-templates select="@* | node()"/>
    </xsl:element>
  </xsl:template>

  <!-- Change 'msg' element into 'newmsg' -->
  <xsl:template match="msg:msg">
    <xsl:element name="newmsg" namespace="http://someaddress.com/m2" >
      <!-- Keep "ds" declaration on the root element -->
      <xsl:namespace name="ds" select="'http://www.w3.org/2000/09/xmldsig#'"/>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

当样式表应用于 XML 源时，它会输出（使用 Saxon 9.4）：

```
<newmsg xmlns="http://someaddress.com/m2" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://someaddress/somexsd.xsd">
  <header>
    <nodeA>aaaaaaaaaaa</nodeA>
    <nodeB>bbbbbbbb</nodeB>
  </header>
  <payload>
    <calcnode xmlns="http://someaddress/nodeC" xsi:schemaLocation="http://someaddress/somexsd.xsd">
      <somefield>field</somefield>
    </calcnode>
    <ds:Signature>
      <SignedInfo>
        <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
        <SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/>
        <Reference URI="#kjbn34jkb5j-3k45j-k3jb534jkb534k5">
          <DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>
          <DigestValue>+se0dfgft9gh8hjuji7ji65ko4ko3ko2</DigestValue>
        </Reference>
      </SignedInfo>
      <SignatureValue>sekfrhsdkjfhsdkjfhksd</SignatureValue>
      <KeyInfo>
        <X509Data>
          <X509Certificate>sdjkfhsdkfhskdf</X509Certificate>
        </X509Data>
      </KeyInfo>
    </ds:Signature>
  </payload>
</newmsg> 
```

这不**完全**是你想要的，但它很接近。元素上仍然没有`xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"`声明`calcnode`，因为`xsi`已经在根元素上声明了。如果这是签名处理的问题，我不知道如何解决。

# jquery - phonegap中的textarea问题

> ID：12426663
> 
> 赞同：1
> 
> 时间：2012-09-14T14:35:31.767
> 
> 标签：jquery, html, cordova

我有一个高度和宽度的文本区域。我用它来输入一个或多个电子邮件 ID。当我通过键入输入 ID 时，文本会被换行。当我将我的应用程序与 phonegap 集成，然后通过手机的通讯录输入 ID 时，文本没有被包装。我在这里错过了什么吗？

# android - 我的应用的 Google Play 更新需要多少时间才能发布？

> ID：12426664
> 
> 赞同：10
> 
> 时间：2012-09-14T14:35:31.260
> 
> 标签：android, google-play

我在 google play 上有一个应用程序。

我将应用程序更新到 1.0.1，我可以在谷歌发布网站上检查它是否更新。

但在我的手机和 google play 中，该应用程序仍处于 1.0 版本，无法更新。

谷歌需要多少时间才能在 google play 上发布我的更新？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T16:12:51.580

解决了，大约需要两个小时，有时三个小时

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-05T19:39:55.247

如果您希望更快地发布您的应用程序。您应该以前发布为 alpha。发布为 alpha 版本对于测试 In App Billing 是必要的，除了您的测试人员之外，没有人会在 alpha 上看到您的应用程序。当涉及到生产发布（普通发布每个人都可以看到这个版本），你应该从 alpha 升级到生产，就是这样。您的应用程序将在 10 分钟或更短时间内生效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-21T11:52:51.323

谷歌表示，他们可能需要长达 7 天或更长时间来审核某些开发者提交到 Play 商店的应用程序。

[欲了解更多信息，请点击此处](https://www.xda-developers.com/google-play-store-approval-new-apps-time/)

# sql-server - SQL2012 UDF 用于所有 DateTime 格式转换

> ID：12426666
> 
> 赞同：0
> 
> 时间：2012-09-14T14:35:47.297
> 
> 标签：sql-server, sql-server-2012

我需要创建一个用户定义的函数，该函数接受日期输入和日期格式输入并产生格式正确的日期。

例如：UDF（'7/22'，'国际'）输出：22/7/2012

我需要实现所有类型的日期格式，或者至少尽可能多地实现。我认为应该至少有 40 种不同的类型。

我在网上找到了一些不起作用的解决方案。

有没有人有这样的功能或者可以指出我正确的方向。我对 sql 很陌生，所以从头开始写这篇文章要等到下周！

# objective-c - UIButton 左右两边都有图片

> ID：12426667
> 
> 赞同：5
> 
> 时间：2012-09-14T14:35:48.433
> 
> 标签：objective-c, uibutton

我有一个 UIButton，中间有标题。我想在按钮的左侧和右侧显示图像（图标）。在左侧，很简单，我只是手动设置坐标。但在右侧，当显示旋转和按钮放大时，我需要沿“x”轴移动图像。

这个怎么做 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T09:38:28.267

假设您有一个名为 button1 的 UIButton，您可以执行以下操作：

```
imageView1 = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 40, 40)];
imageView1.center = CGPointMake(25, button1.frame.size.height / 2);
imageView1.image = [UIImage imageNamed:@"ThumbsUp.png"];
[button1 addSubview:imageView1];
[imageView1 release];

imageView2 = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 40, 40)];
imageView2.center = CGPointMake(button1.frame.size.width - 25, button1.frame.size.height / 2);
imageView2.image = [UIImage imageNamed:@"ThumbsDown.png"];
[button1 addSubview:imageView2];
[imageView2 release]; 
```

在这里，我们将两个图像视图添加到按钮并使用它们的中心来定位它们。对于 imageView1，我们将其设置为距按钮左侧 25 个像素。对于 imageView2，我们从按钮的宽度中减去 25。

现在我们必须设置旋转代码：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation) interfaceOrientation duration:(NSTimeInterval)duration {

    if (interfaceOrientation == UIDeviceOrientationPortrait || interfaceOrientation == UIDeviceOrientationPortraitUpsideDown) {
        [button1 setFrame:CGRectMake(10, 100, 300, 50)];
    } else {
        [button1 setFrame:CGRectMake(40, 50, 400, 50)];
    }
    imageView2.center = CGPointMake(button1.frame.size.width - 25, button1.frame.size.height / 2);
} 
```

在这里，我们根据我们是纵向还是横向来更改按钮的框架，最后我们设置 imageView2 的中心来调整不同的框架。我们不必为 imageView1 烦恼，因为它保持不变。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-28T07:47:58.977

你也可以使用这个 ReversedUIButton [https://gist.github.com/fabnoe/bbf9545769d4a149faae](https://gist.github.com/fabnoe/bbf9545769d4a149faae)

# php - 面部识别

> ID：12426677
> 
> 赞同：1
> 
> 时间：2012-09-14T14:36:20.153
> 
> 标签：php, python, linux, macos

我在 Mac 上，但我也有一个 Ubuntu 虚拟机，所以欢迎使用 linux 或 Mac OSX 解决方案。

我正在尝试让面部识别工作。目的是从数据库中识别人脸并调出有关个人的数据。

在我的 Mac 上，我尝试安装一些声称可以做到这一点的工具，但没有设法让它们中的任何一个工作。我希望使用 face.com，但他们不再接受新用户。

我大部分时间都在研究 python 工具，但现在任何对我有用的东西都很好。如果有人可以建议一个工具，如果可能的话，链接到安装和使用说明，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:38:33.333

您可以使用 OpenCV python 接口。

[http://opencv.org](http://opencv.org)

但是您也需要一些努力来集成数据库中的数据

# asp.net - Linq除以零错误？

> ID：12426678
> 
> 赞同：0
> 
> 时间：2012-09-14T14:36:22.430
> 
> 标签：asp.net, linq

如何检查以下代码以捕获除以零错误？

```
active = (g.Sum(x => x.Kullanim_Reaktif) / g.Sum(x => x.kullanim_T0)) * 100 
```

我想要这样的东西：

```
 if(g.Sum(x => x.kullanim_T0) == 0)
 {
     return 1;
 }
 else
 { 
     return g.Sum(x => x.kullanim_T0);
 } 
```

我可以`if-else`在上面的 linq 代码行 ( `g.Sum(x => x.kullanim_T0)`) 中写吗？如何？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T14:38:22.790

```
active = (g.Sum(x => x.kullanim_T0) == 0 ? 1 : g.Sum(x => x.Kullanim_Reaktif) / g.Sum(x => x.kullanim_T0)) * 100 
```

但更有效的做法是：

```
var kSum = g.Sum(x => x.kullanim_T0);
active = (kSum  == 0 ? 1 : g.Sum(x => x.Kullanim_Reaktif) / kSum ) * 100 
```

# bundle - iOS 从包中加载资源

> ID：12426679
> 
> 赞同：0
> 
> 时间：2012-09-14T14:36:22.603
> 
> 标签：bundle, ios6

我对 Xcode 有一点小问题。从现有项目中，我派生了一个静态库（带有源代码）和一个 *.bundle（里面只有一个故事板和故事板中使用的图像）。在第二个项目中，我已经链接了库（它可以正常工作）和包（在构建阶段的复制包资源中有 *.bundle）。当我尝试加载情节提要时，它会加载它但没有图像。有我称之为情节提要的代码：

```
UIStoryboard *story=[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle bundleWithIdentifier:@"MYCOMPANY.BUNDLE1"]];

MyViewController *libViewContr= [story instantiateInitialViewController];

libViewContr.modalPresentationStyle = UIModalPresentationFullScreen;                
[self presentViewController:libViewContr animated:YES completion:nil ]; 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T10:48:31.733

我有同样的问题。我发现在构建捆绑包时将 png 资产压缩为 .tiff 格式。您可以通过将目标设置中的“组合高分辨率艺术品”设置为 FALSE/NO 来禁用此功能。

# matlab - 检查一列是否由一组成

> ID：12426681
> 
> 赞同：1
> 
> 时间：2012-09-14T14:36:40.917
> 
> 标签：matlab

它是否存在matlab中内置的函数来检查列是否全部由1组成？如果它不存在，有一些方法可以构建一个可以实现该功能的函数吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T14:58:06.137

`all(A==1)``true`如果它仅由 s 组成，则应返回`1`。请注意，如果您有任何浮点精度错误，您应该使用`all( abs(A-1) < eps )`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:43:50.463

您可以将列的所有条目与 1 进行比较并将结果相加

```
if sum(A(:,1)~=1)==0
    % all ones
else
    % not all ones
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T14:45:29.470

如果 A 是列向量：

```
A=[1 1 1 1]'; 
```

你可以这样检查：

```
sum(A==1)==length(A)
ans =

 1 
```

# mysql - MySQL 不会创建我的建模数据库

> ID：12426682
> 
> 赞同：0
> 
> 时间：2012-09-14T14:36:47.017
> 
> 标签：mysql, database, database-design, eer-model

我正在使用 EER 模型中的 MySQL Wordbench 对我的数据库进行建模，即：

![系统](../Images/2cd73c85aba87868daeb7641ffe71b78.png)

因此，在对我的数据库进行建模后，我导出到一个 SQL 脚本并尝试运行它，但它只创建了三个表：

![表](../Images/1984b837a49e8120e47c6a379574fd12.png)

为什么会这样？它不应该创建所有表吗？

这是我导出时生成的脚本：

```
 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL';

CREATE SCHEMA IF NOT EXISTS `brainset` DEFAULT CHARACTER SET latin1 COLLATE latin1_general_ci ;
USE `brainset` ;

-- -----------------------------------------------------
-- Table `brainset`.`departamento`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `brainset`.`departamento` (
  `ID` TINYINT UNSIGNED NOT NULL ,
  `departamento` VARCHAR(50) NOT NULL ,
  PRIMARY KEY (`ID`) ,
  UNIQUE INDEX `departamento_UNIQUE` (`departamento` ASC) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `brainset`.`documento_escopo`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `brainset`.`documento_escopo` (
  `ID` TINYINT UNSIGNED NOT NULL ,
  `escopo` CHAR(7) NOT NULL ,
  PRIMARY KEY (`ID`) ,
  UNIQUE INDEX `escopo_UNIQUE` (`escopo` ASC) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `brainset`.`procedimento_tipo`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `brainset`.`procedimento_tipo` (
  `ID` TINYINT UNSIGNED NOT NULL ,
  `tipo` VARCHAR(50) NOT NULL ,
  PRIMARY KEY (`ID`) ,
  UNIQUE INDEX `tipo_UNIQUE` (`tipo` ASC) )
ENGINE = InnoDB
COMMENT = '     ';

-- -----------------------------------------------------
-- Table `brainset`.`procedimento`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `brainset`.`procedimento` (
  `ID` SMALLINT UNSIGNED NOT NULL ,
  `nome` VARCHAR(100) NOT NULL ,
  `descricao` VARCHAR(1024) NOT NULL ,
  `id_tipo` TINYINT UNSIGNED NOT NULL ,
  `id_departamento` TINYINT UNSIGNED NOT NULL ,
  `id_documento_complementar` INT UNSIGNED NOT NULL ,
  PRIMARY KEY (`ID`) ,
  INDEX `fk_procedimento-procedimento_tipo` (`id_tipo` ASC, `id_departamento` ASC) ,
  INDEX `fk_procedimento-departamento` (`id_departamento` ASC) ,
  CONSTRAINT `fk_procedimento-procedimento_tipo`
    FOREIGN KEY (`id_tipo` , `id_departamento` )
    REFERENCES `brainset`.`procedimento_tipo` (`ID` , `ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_procedimento-departamento`
    FOREIGN KEY (`id_departamento` )
    REFERENCES `brainset`.`departamento` (`ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `brainset`.`usuario`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `brainset`.`usuario` (
  `ID` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `nome` VARCHAR(100) NOT NULL ,
  `foto` VARCHAR(200) NULL ,
  `email` VARCHAR(45) NOT NULL ,
  `senha` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`ID`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `brainset`.`documento`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `brainset`.`documento` (
  `ID` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `id_procedimento` SMALLINT UNSIGNED NOT NULL ,
  `data` DATETIME NOT NULL ,
  `revisao` TINYINT NOT NULL ,
  `id_escopo` TINYINT UNSIGNED NOT NULL ,
  `id_documento_complementar` INT UNSIGNED NULL ,
  `id_usuario` INT UNSIGNED NOT NULL ,
  PRIMARY KEY (`ID`) ,
  INDEX `fk_documento-documento_escopo` (`id_escopo` ASC) ,
  INDEX `fk_documento-procedimento` (`id_procedimento` ASC) ,
  INDEX `fk_documento-documento` (`id_documento_complementar` ASC) ,
  INDEX `fk_documento-usuario` (`id_usuario` ASC) ,
  CONSTRAINT `fk_documento-documento_escopo`
    FOREIGN KEY (`id_escopo` )
    REFERENCES `brainset`.`documento_escopo` (`ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_documento-procedimento`
    FOREIGN KEY (`id_procedimento` )
    REFERENCES `brainset`.`procedimento` (`ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_documento-documento`
    FOREIGN KEY (`id_documento_complementar` )
    REFERENCES `brainset`.`documento` (`ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_documento-usuario`
    FOREIGN KEY (`id_usuario` )
    REFERENCES `brainset`.`usuario` (`ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `brainset`.`questao`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `brainset`.`questao` (
  `ID` INT UNSIGNED NOT NULL ,
  `questao` VARCHAR(1024) NOT NULL ,
  `descricao` VARCHAR(1024) NULL ,
  `observacao` VARCHAR(1024) NULL ,
  `data` DATETIME NOT NULL ,
  PRIMARY KEY (`ID`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `brainset`.`questao_tipo`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `brainset`.`questao_tipo` (
  `ID` TINYINT UNSIGNED NOT NULL ,
  `nome` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`ID`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `brainset`.`questao_campo`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `brainset`.`questao_campo` (
  `ID` INT UNSIGNED NOT NULL ,
  `id_questao` INT NOT NULL ,
  `id_questao_tipo` TINYINT NOT NULL ,
  `descricao` VARCHAR(1024) NULL ,
  PRIMARY KEY (`ID`) ,
  INDEX `fk_questao_campo-questao` (`id_questao` ASC) ,
  INDEX `fk_questao_campo-questao-tipo` (`id_questao_tipo` ASC) ,
  CONSTRAINT `fk_questao_campo-questao`
    FOREIGN KEY (`id_questao` )
    REFERENCES `brainset`.`questao` (`ID` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_questao_campo-questao-tipo`
    FOREIGN KEY (`id_questao_tipo` )
    REFERENCES `brainset`.`questao_tipo` (`ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `brainset`.`questao_escolha`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `brainset`.`questao_escolha` (
  `ID` INT UNSIGNED NOT NULL ,
  `id_questao_campo` INT NOT NULL ,
  `nome` VARCHAR(64) NOT NULL ,
  `valor` VARCHAR(64) NOT NULL ,
  PRIMARY KEY (`ID`) ,
  INDEX `fk_questao_escolha-questao_campo` (`id_questao_campo` ASC) ,
  CONSTRAINT `fk_questao_escolha-questao_campo`
    FOREIGN KEY (`id_questao_campo` )
    REFERENCES `brainset`.`questao_campo` (`ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `brainset`.`questao_resposta`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `brainset`.`questao_resposta` (
  `ID` INT UNSIGNED NOT NULL ,
  `id_questao` INT NOT NULL ,
  `resposta` VARCHAR(1024) NOT NULL ,
  `data` DATETIME NOT NULL ,
  PRIMARY KEY (`ID`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `brainset`.`questao_consulta`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `brainset`.`questao_consulta` (
  `ID` INT UNSIGNED NOT NULL ,
  `id_usuario` INT NOT NULL ,
  `id_questao` INT NOT NULL ,
  `id_questao_resposta` INT NOT NULL ,
  `data` TIMESTAMP NOT NULL ,
  PRIMARY KEY (`ID`) ,
  INDEX `fk_questao_consulta-usuario` (`id_usuario` ASC) ,
  INDEX `fk_questao_consulta-questao` (`id_questao` ASC) ,
  INDEX `fk_questao_consulta-questao_resposta` (`id_questao_resposta` ASC) ,
  CONSTRAINT `fk_questao_consulta-usuario`
    FOREIGN KEY (`id_usuario` )
    REFERENCES `brainset`.`usuario` (`ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_questao_consulta-questao`
    FOREIGN KEY (`id_questao` )
    REFERENCES `brainset`.`questao` (`ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_questao_consulta-questao_resposta`
    FOREIGN KEY (`id_questao_resposta` )
    REFERENCES `brainset`.`questao_resposta` (`ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
COMMENT = '     ';

-- -----------------------------------------------------
-- Table `brainset`.`departamento_equipe`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `brainset`.`departamento_equipe` (
  `ID` INT UNSIGNED NOT NULL ,
  `id_departamento` TINYINT UNSIGNED NOT NULL ,
  `id_usuario` INT UNSIGNED NOT NULL ,
  PRIMARY KEY (`ID`) ,
  INDEX `fk_departamento_equipe-departamento` (`id_departamento` ASC) ,
  INDEX `fk_departamento_equipe-usuario` (`id_usuario` ASC) ,
  CONSTRAINT `fk_departamento_equipe-departamento`
    FOREIGN KEY (`id_departamento` )
    REFERENCES `brainset`.`departamento` (`ID` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_departamento_equipe-usuario`
    FOREIGN KEY (`id_usuario` )
    REFERENCES `brainset`.`usuario` (`ID` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS; 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T15:40:56.333

以防万一有人偶然发现这一点；您无法创建与尚未创建的表相关的表。

当 MySQL 创建一个关系时，它会将您正在为其创建关系的表链接到您正在引用的表，如果引用表不存在，MySQL 将不会对此感到高兴。

因此，在创建大量相互引用的表时，请确保在创建引用它的表之前创建被另一个引用的任何表。

# perl - PDF 文件存储为 BLOB，在网页 perl 中查看

> ID：12426683
> 
> 赞同：1
> 
> 时间：2012-09-14T14:36:47.877
> 
> 标签：perl, oracle10g

我有一个代码可以处理显示本地 Oracle 数据库中的 blob。我将 JPG 和 PDF 文件都存储为 blob。我可以查看 JPG 文件，但不能查看 PDF。我检查了这些

```
$self->content_type('image/jpg') 
```

至

```
$self->content_type('application/pdf'). 
```

Blob 确实有数据。我检查了长度，它有“184546”。当我单击 pdf 文件的链接时，我得到的只是一个标题为 GETIMAGPAGE(application/pdf) 的空白页面。

任何帮助或指示将不胜感激。

另外，我们怎样才能让 content_type 启用两个不同的 mime_types？例如，在我的情况下，图像和 pdf 都取决于我们得到什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:51:40.677

[File::MMagic](http://search.cpan.org/dist/File-MMagic/MMagic.pm)可以使用[幻数](http://en.wikipedia.org/wiki/Magic_number_%28programming%29#Magic_numbers_in_files)识别数据类型。

```
use File::MMagic;
$magic = File::MMagic->new;
$self->content($blob);
$self->content_type($magic->checktype_contents($blob)); 
```

如果您不想使用本机/插件 PDF 阅读器，也许[FlexPaper](http://flexpaper.devaldi.com/)可能适合您的需求。

# asp.net - 防止 RadGrid 的默认 Telerik 排序

> ID：12426685
> 
> 赞同：2
> 
> 时间：2012-09-14T14:37:22.930
> 
> 标签：asp.net, sorting, telerik

我正在使用 Telerik RadGrid，并且我有一个数据源，其中我的一列看起来像 hh:mm:ss。当我从数据库加载 RadGrid 的数据源时，我根据 DateTime 列（也包含年、月和日）对结果进行排序（在 SQL 级别），但在网格表示中我只显示 hh:mm:ss . 我在 SQL 级别上的自定义排序运行良好，在给定的页面中，我得到了应该存在的那些元素。但是，当我对本质上是 DateTime 但表示为 hh:mm:ss 的列进行排序时，也会发生默认的 Telerik 排序，它对给定页面中的行进行排序。这是不正确的，因为 '09-12-2012 20:20:20' < '09-13-2012 10:10:10'，但 '20:20:20' > '10:10:10'。如何防止我的 RadGrid 的默认 Telerik 排序？我希望其他一切都以同样的方式工作，我只想告诉 Telerik “不要对我的列进行排序，我已经处理了排序事件，谢谢”。我怎样才能做到这一点？

```
<telerik:RadGrid ID="RadGrid1" runat="server" AutoGenerateColumns="true" AllowCustomPaging="true" AllowMultiRowSelection="true">
        <MasterTableView DataKeyNames="ID" ClientDataKeyNames="ID" InsertItemPageIndexAction="ShowItemOnCurrentPage">
            <CommandItemTemplate>
                <div class="cmdItem">
                    <asp:LinkButton ID="btnManageColumns" runat="server" CommandName="Manage Columns" data-link="manage-columns">
                        <img alt="" src="../../Images/Icons/Columns.png" />Manage Columns</asp:LinkButton>
                    <asp:HiddenField ID="hdnSpacer" runat="server" />&#160;&#160;&#160;
                    <asp:LinkButton ID="btnExportPDF" runat="server" CommandName="Export PDF"
                        OnClientClick="return exportGrid('PDF');"><img alt="" src="../../Images/Icons/ExportPDF.png" />Export to PDF</asp:LinkButton>&#160;&#160;&#160;
                    <asp:LinkButton ID="btnSendEmail" runat="server" CommandName="SendEmail" OnClientClick="return exportGrid('PDFEmail');"><img alt="" src="../../Images/Icons/PasswordSetup.png"/>Email</asp:LinkButton>
                </div>
            </CommandItemTemplate>
        </MasterTableView>
        <ClientSettings>
            <ClientEvents OnCommand="gridCommand" />
            <Selecting AllowRowSelect="True" UseClientSelectColumnOnly="true" />
        </ClientSettings>
    </telerik:RadGrid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T20:51:13.663

```
AllowCustomSorting="true" 
```

此属性应添加到 MasterTableView 标记中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T16:12:12.140

您应该能够关闭列的排序，或者如果这是您想要的，则可以关闭整个网格

每列

```
<Columns>
        <tr:GridBoundColumn DataField="field" HeaderText="Description" 
             AllowSorting="false" />
    </Columns> 
```

整个网格

```
<telerik:RadGrid ID="RadGridData" runat="server" AllowSorting="false" AllowPaging="true" PageSize="50" OnNeedDataSource="RadGridData_NeedDataSource" OnItemDataBound="RadGridData_ItemDataBound"> 
```

对于自定义排序

```
<telerik:RadGrid ID="RadGrid1" runat="server" AutoGenerateColumns="true" AllowCustomPaging="true" AllowMultiRowSelection="true" OnSortCommand="RadGrid1_SortCommand" > 
```

# google-maps - 地图中的荷兰邮政编码边界

> ID：12426689
> 
> 赞同：1
> 
> 时间：2012-09-14T14:37:33.367
> 
> 标签：google-maps, google-maps-api-3

我想覆盖荷兰邮政编码的边界。谷歌地图在其正常界面中这样做就像一个魅力。它在邮政编码的边界周围放置了一个虚线边框。

[http://goo.gl/maps/fujSB](http://goo.gl/maps/fujSB)

但是 Google Maps Geocoding API 只返回一个右上和左下限：

[http://maps.googleapis.com/maps/api/geocode/json?address=3335,+NL&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?address=3335,+NL&sensor=true)

有没有人知道如何解决这个问题，以便我们可以在荷兰邮政编码的确切边界上放置一个多边形覆盖？除了谷歌地图之外的任何其他服务对我们来说也可以，我们已经看过其他服务了。

亲切的问候，杰拉德·尼布尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:53:08.210

**[请参阅我对这个问题](https://stackoverflow.com/questions/12194046/google-maps-api-v3-how-to-get-region-border-coordinates-polyline-data/12194452)**的回复。

这些边界似乎来自 Twitter API。

另请查看我发布快速演示链接的评论。

# c++ - 中间插入向量与双端队列

> ID：12426691
> 
> 赞同：10
> 
> 时间：2012-09-14T14:37:35.160
> 
> 标签：c++, stl, vector, deque

我知道当插入位于前端或末尾时，*双端队列*比*向量*更有效，如果我们必须进行指针运算，向量会更好。但是当我们必须在中间执行插入时使用哪一个。？为什么。？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-14T14:51:55.903

您可能认为 a`deque`会有优势，因为它将数据分成块存储。然而，要`operator[]`在恒定时间内实现需要所有这些块的大小相同。在中间插入或删除元素仍然需要移动一侧或另一侧的所有值，与 a 相同`vector`。由于`vector`它更简单并且具有更好的缓存局部性，因此它应该领先。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T14:45:14.860

标准库容器的选择标准是，您选择容器取决于：

1.  您要存储的数据类型 &
2.  您要对数据执行的操作类型。

如果要在中间执行大量插入，最好使用`std::list`.

如果仅在 a`std::deque`和a 之间进行选择，`std::vector`则需要考虑许多因素：

*   通常，在 deque 访问元素的情况下还有一个间接的方式，因此元素访问和 deque 的迭代器移动通常会慢一些。
*   在对内存块有大小限制的系统中，一个双端队列可能包含更多元素，因为它使用了多个内存块。因此，`max_size()`对于双端队列来说可能更大。
*   双端队列不支持控制容量和重新分配的时刻。特别是，除开头或结尾之外的任何元素的插入或删除都会使引用双端队列元素的所有指针、引用和迭代器无效。但是，重新分配可能比向量执行得更好，因为根据它们的典型内部结构，双端队列不必在重新分配时复制所有元素。
*   不再使用的内存块可能会被释放，因此双端队列的内存大小可能会缩小（这不是标准强加的条件，但大多数实现都会这样做）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T14:43:08.307

[std::deque](http://en.cppreference.com/w/cpp/container/deque) *可以*更好地用于大型容器，因为它通常实现为连续数据块的链接序列，而不是`std::vector`. 因此，中间的插入将导致更少的数据从一个地方复制到另一个地方，并可能减少重新分配。

当然，这是否重要取决于容器的大小和复制存储元素的成本。使用 C++11 移动语义，后者的成本不太重要。但最终，了解的唯一方法是使用实​​际应用程序进行分析。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T14:39:06.203

Deque 仍然会更有效，因为它不必在每次插入元素时移动数组的一半。

当然，这只有在您考虑大量元素时才真正重要，甚至建议运行基准测试并查看哪个在您的特定情况下效果更好。请记住，[过早的优化是万恶之源](http://c2.com/cgi/wiki?PrematureOptimization)。

# c# - MvvmCross 和视图导航

> ID：12426694
> 
> 赞同：1
> 
> 时间：2012-09-14T14:37:49.450
> 
> 标签：c#, xamarin.ios, mvvmcross

我将 MvvmCross 用于我的应用程序并从 iPhone 开始。为了实现使用 RequestNavigate 和 Close 在视图之间导航的复杂性，我从 MvxBaseTouchViewPresenter 派生了一个新的演示者。到目前为止，一切都很好。

我现在遇到的问题是可以关闭或显示视图，而之前可见的视图仍在转换中，无论是打开还是关闭。我能想到的解决这个问题的唯一方法是使用视图控制器的 ViewDidAppear 和 ViewDidDisappear 事件处理程序来调用执行下一个视图显示的操作，从而将显示推迟到前一个视图完成其转换之后。

这意味着我必须添加：

```
 public override void ViewDidDisappear(bool animated)
    {
        base.ViewDidDisappear(animated);

        DoPostTransitionAction();
    }

    public override void ViewDidAppear (bool animated)
    {
        base.ViewDidAppear (animated);

        DoPostTransitionAction();
    }

    private void DoPostTransitionAction()
    {
        if( _postTransitionAction != null)_postTransitionAction();
    }

    private Action _postTransitionAction;

    public void ShowActionAfterTransition( Action postTransitionAction)
    {
        if( this.IsBeingDismissed || this.IsBeingPresented)
        {
            _postTransitionAction = postTransitionAction;
        }
        else
        {
            _postTransitionAction = null;
            postTransitionAction();
        }
    } 
```

查看控制器，引入一个 IEventViewController 接口，让我添加代码并将演示者的 Show 方法更改为：

```
 public override void Show(MvxShowViewModelRequest request)
    {
        // find the current top view as it will disappear as a result of
        // showing the requested view
        // note: this will be null for the first show request
        var topViewController = TopViewController;

        // if the request is to roll back an existing stack of views
        // then rollback to the bottom of the stack
        if (request.ClearTop && topViewController != null)
        {
            RollBackStack(topViewController);
        }

        // the top view is about to be 'covered' by the view requested
        // if the top view is transitioning (appearing or disappearing)
        // then wait for it to finish before showing the view requested
        var disappearingViewController = topViewController as IEventViewController;

        // if the top view is disappearing and it's of the 'event' type
        // delay calling Show until after the view has disappeared
        if( disappearingViewController != null)
        {
            // the top view has been requested to close and will fire the
            // 'transition complete' event when it has

            // register the action to perform when the top view has disappeared
            disappearingViewController.ShowActionAfterTransition (() =>
            {
                Show (CreateView(request), true);
            });
        }
        else
        {
            // show the view now as the top view is either not closing
            // or, if it is, is not going to say when it does

            // create a view controller of the type requested
            Show(CreateView(request), true);
        }
    } 
```

我真正想要的是基类中的那些事件处理程序。我想知道如果我不让自己偏离主要发展道路，有什么机会？偏班可以吗？

# ios - Apple App Store 上潜在的 App 拒绝可能性

> ID：12426700
> 
> 赞同：1
> 
> 时间：2012-09-14T14:38:06.797
> 
> 标签：ios

今天，在研究如何/在哪里从我正在处理的项目中的 URL 下载和保存音频/图像文件时，我偶然发现如果我们将大型音频/图像文件保存在 iOS 的文档目录中，可能会导致应用程序被拒绝。

此处的问题与此处发布的“iOS 数据存储指南”有关[https://developer.apple.com/icloud/documentation/data-storage/](https://developer.apple.com/icloud/documentation/data-storage/) -“仅文档和其他数据是用户生成的，或者不能以其他方式生成的数据由您的应用程序重新创建的文件应存储在“/Documents”目录中，并将由 iCloud 自动备份。”

在进一步阅读中，我发现许多人的应用程序被拒绝是因为在文档目录中存储了太多数据（因为用户在他的 iCloud 帐户中的 5GB 容量有限）并且用户设备上所有应用程序的文档目录是自动备份到 iCloud。

为开发人员提供的一个选项是将数据存储在“/Library/Caches”目录中。但是，只要操作系统内存不足，就可以删除缓存目录中的数据，并且不能保证数据将始终存在，这不是我们项目可接受的解决方案，因为我们不能指望我们的应用程序的用户群下载更多大文件不止一次。

我根据此链接[http://developer.apple.com/library/ios/#qa/qa1719/_index.html#//apple_ref/doc/uid/DTS40011342](http://developer.apple.com/library/ios/#qa/qa1719/_index.html#//apple_ref/doc/uid/DTS40011342)找到的解决方案是专门标记您存储的文件不备份的文档目录和过程在其中描述。但是，它仅适用于 iOS 5.0.1 及以后的版本。在 iOS 5.0 及更低版本上无法从备份中排除数据。

所以，我的问题是：'由于我正在处理的项目有足够多的图像/音频要存储并且重新下载它们不是一种选择，建议只支持在 iOS 5.0 上安装。 1 及以上因为上述问题或保持与 iOS 4.3 的向后兼容性并调查其他方式来存储数据而不会拒绝应用程序？如果我们采用前一种方法，我们大约会失去多少百分比的用户？有相同的统计数据吗？

请让我知道您对此的看法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:46:37.413

几件事：

*   iOS 5 超过 80%，可能超过 90%。（我观看的网站最近 iOS 4 % 的用户激增，但我相信这是由于没有计算 iOS 6 设备造成的。）
*   您应该多解释一下数据的性质。如果您的数据难以下载，则无论如何都可能有资格进行备份。（这发生在我的应用程序上。）
*   仍然运行 iOS 4 的用户不太可能下载您的应用程序，除非您已经安装了 iOS 4。
*   iOS 4 支持会给你带来越来越多的痛苦和折磨。

参考：

*   [http://www.game4mob.com/index.php/tech-articles/67-ios-5-penetration-percentage](http://www.game4mob.com/index.php/tech-articles/67-ios-5-penetration-percentage)
*   [http://tewha.net/2012/06/dont-write-new-apps-that-target-ios-4/](http://tewha.net/2012/06/dont-write-new-apps-that-target-ios-4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:32:00.783

在 iOS 5 之前，/Library/Caches 目录不会被 iOS 清除。iOS 5.0.1 添加了 Do Not Backup 功能，因为 5.0 中的新缓存清除功能破坏了许多应用程序，例如 instapaper - 请参阅 Marco Arment 关于此问题的博客文章：http: [//www.marco.org/2011/ 10/13/ios5-缓存清理](http://www.marco.org/2011/10/13/ios5-caches-cleaning)

也许您可以为 ios 5.0.1 以下的用户使用 /Library/Caches，并在升级后转而使用 Do Not Backup 标记。

# android - 通过点击 servlet 向 HTTPS 服务器发出请求

> ID：12426702
> 
> 赞同：0
> 
> 时间：2012-09-14T14:38:17.487
> 
> 标签：android, servlets

这是我在 http 服务器上向 servlet 发出 post 请求的代码

```
private static void post(String endpoint, Map<String, String> params)
        throws IOException {
    URL url;
    try {
        url = new URL(endpoint);
    } catch (MalformedURLException e) {
        throw new IllegalArgumentException("invalid url: " + endpoint);
    }
    StringBuilder bodyBuilder = new StringBuilder();
    Iterator<Entry<String, String>> iterator = params.entrySet().iterator();
    // constructs the POST body using the parameters
    while (iterator.hasNext()) {
        Entry<String, String> param = iterator.next();
        bodyBuilder.append(param.getKey()).append('=')
                .append(param.getValue());
        if (iterator.hasNext()) {
            bodyBuilder.append('&');
        }
    }
    String body = bodyBuilder.toString();
    Log.v(TAG, "Posting '" + body + "' to " + url);
    byte[] bytes = body.getBytes();
    HttpURLConnection conn = null;

    try {
        conn = (HttpURLConnection) url.openConnection();
        conn.setDoOutput(true);
        conn.setUseCaches(false);
        conn.setFixedLengthStreamingMode(bytes.length);
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Content-Type",
                "application/x-www-form-urlencoded;charset=UTF-8");
        // post the request
        OutputStream out = conn.getOutputStream();
        out.write(bytes);
        out.close();
        // handle the response
        int status = conn.getResponseCode();
        if (status != 200) {
          throw new IOException("Post failed with error code " + status);
        }
    } finally {
        if (conn != null) {
            conn.disconnect();
        }
    }
  } 
```

当我的端点就像 ***http://myipaddress:myport/*** 它运行良好但是当我将它更改为 **https** 连接时它不起作用我也读过**[HttpsURLConnection](http://developer.android.com/reference/javax/net/ssl/HttpsURLConnection.html)**但我不知道如何在那里实现它写了这段代码：

```
KeyStore keyStore = ...;
   TrustManagerFactory tmf = TrustManagerFactory.getInstance("X509");
   tmf.init(keyStore);

   SSLContext context = SSLContext.getInstance("TLS");
   context.init(null, tmf.getTrustManagers(), null);

   URL url = new URL("https://www.example.com/");
   HttpsURLConnection urlConnection = (HttpsURLConnection) url.openConnection();
   urlConnection.setSSLSocketFactory(context.getSocketFactory());
   InputStream in = urlConnection.getInputStream(); 
```

但是我无法获得 Keystore 中应该包含的内容，我只有文件文件，如果我使用 Keystore.getInstance(String type) 如何获取证书类型。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:02:00.547

请检查此以向安全服务器发出发布请求

// 要求

```
 String Verify_Mobile_URL ="https://www.sample.php";
                        try 
                        {

                            StringBuilder postDataBuilder = new StringBuilder();
                            postDataBuilder.append("param1").append("=").append("paramvalue");
                            postDataBuilder.append("&").append("param2").append("=").append("paramvalue");

                            byte[] postData = postDataBuilder.toString().getBytes();

                            // Hit the dm URL.

                            URL url = new URL(Verify_Mobile_URL);
                            HttpsURLConnection.setDefaultHostnameVerifier(new AllVerifier());
                            SSLContext sslContext = SSLContext.getInstance("TLS");
                            sslContext.init(null, new TrustManager[] { new AllTrustManager() }, null);
                            HttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory());
                            HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();        
                            conn.setReadTimeout(60000);
                            conn.setConnectTimeout(35000);
                            conn.setDoOutput(true);
                            conn.setUseCaches(false);
                            conn.setRequestMethod("POST");
                            conn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
                            conn.setRequestProperty("Content-Length",Integer.toString(postData.length));

                            OutputStream out = conn.getOutputStream();
                            out.write(postData);
                            out.close();

                            int responseCode = conn.getResponseCode();
                            if(responseCode==200)
                            {
                                InputStream inputstream=conn.getInputStream();  
                                String result=streamToString(inputstream);   // here you will will get result from

                            }
                            catch(Exception e)
                            {
                            }

/**
     * This method convert inputstream to string
     * @param is - inputtream to be converted
     * @return String - converted string 
     */
    public static String streamToString(InputStream is)
    {
        DataInputStream din = new DataInputStream(is);
        StringBuffer sb = new StringBuffer();
        try {
            String line = null;
            while ((line = din.readLine()) != null) 
            {
                sb.append(line + "\n");
            }

        } 
        catch (Exception ex) 
        {}      

        finally 
        {
            try 
            {  if(is!=null)
                {
                    din.close();
                    is.close();
                }
            } 
            catch (Exception ex) 
            {}

        }
        return sb.toString();

    }

public class AllTrustManager implements X509TrustManager {

    @Override
    public void checkClientTrusted(X509Certificate[] chain, String authType)
            throws CertificateException {
        // TODO Auto-generated method stub

    }

    @Override
    public void checkServerTrusted(X509Certificate[] chain, String authType)
            throws CertificateException {
        // TODO Auto-generated method stub

    }

    @Override
    public X509Certificate[] getAcceptedIssuers() {
        // TODO Auto-generated method stub
        return new X509Certificate[0];
    }

}

public class AllVerifier implements HostnameVerifier {

    @Override
    public boolean verify(String hostname, SSLSession session) {
        // TODO Auto-generated method stub
        return true;
    }

} 
```

# wordpress - Wordpress：如何在我的 javascript 文件中选择插件目录？

> ID：12426710
> 
> 赞同：3
> 
> 时间：2012-09-14T14:38:31.243
> 
> 标签：wordpress, plugins

我需要访问我的客户 javascript 文件中的插件目录。我知道我们确实有使用 php 函数检索插件目录路径的函数`plugins_url()`。

但是，我需要在我必须放置一些图像的 js 文件中检索它。

有任何想法吗？？

PS：我的 js 文件保存为 javascript 文件，因此我不能在其中使用 php 标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:40:56.390

使用`<?php echo plugins_url(); ?>`您想要在 js 文件中获取 url 的位置。

例如：

```
var pluginUrl = '<?php echo plugins_url(); ?>' ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-31T19:42:11.337

这实际上很容易......在functions.php中

> wp_enqueue_script('main', get_template_directory_uri() . '/js/main.js', array('jquery'), '20151215', true);
> 
> $translation_array = array('templateUrl' =>get_stylesheet_directory_uri()); //在wp_enqueue_script之后
> 
> wp_localize_script('main', 'jsVars', $translation_array );

然后在js文件中：

```
var sitepath=jsVars.templateUrl+"/"; 
```

编辑：以防万一它不完全理解：创建翻译数组并包含一个键值对然后将该数组作为jsVars（javascript变量）注入到js脚本中所以基本上我们（错误）使用翻译数组将变量注入到JS 与 wp_localize_script 命令。当然，您可以使用 PHP 定义您想要的所有参数，而不是 templateUrl，以将它们的值注入您想要的任何 js 文件中。在这个例子中，我们通过 jsVars 将模板 Url 注入到主 js 脚本中，但它可以是任何变量到任何 js 脚本中

# android - 通过 Wifi 网络向智能手机发送通知

> ID：12426714
> 
> 赞同：1
> 
> 时间：2012-09-14T14:38:44.027
> 
> 标签：android, iphone, wifi, smartphone

我有一家商店，想知道是否可以通过 wifi 或其他方式向使用智能手机连接到我的网络的消费者发送通知

# maven - 在 xhtml 页面中显示版本和构建日期

> ID：12426723
> 
> 赞同：8
> 
> 时间：2012-09-14T14:38:58.367
> 
> 标签：maven, jsf-2, build, version, war

我想在 JSF 应用程序的页脚显示构建版本和构建日期。这些页面是 XHTML。我正在寻找从 pom.xml 或其他工件中获取信息的方法。

我发现以下使用 maven-replace 插件。 [http://www.vineetmanohar.com/2010/09/how-to-display-maven-project-version-in-your-webapp/](http://www.vineetmanohar.com/2010/09/how-to-display-maven-project-version-in-your-webapp/)

您还使用其他技术吗？

我正在用 JSF 寻找类似的东西 -[显示构建日期](https://stackoverflow.com/questions/1600962/displaying-the-build-date)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-14T16:16:48.190

一种可行的方法：使用 Maven 过滤将包含所需信息的文件放入 WAR 或 JAR 中。然后在您的 Java webapp 中，将该文件的内容加载为 ClassPath 资源`InputStream`。

创建一个包含以下内容的文件（比如说“buildInfo.properties”）`src/main/resources`：

```
build.version=${project.version}
build.timestamp=${timestamp} 
```

请注意，由于[存在开放缺陷](http://jira.codehaus.org/browse/MRESOURCES-99)，您需要在pom 的块中定义`timestamp`如下属性：`<properties>`

```
`<timestamp>${maven.build.timestamp}</timestamp>` 
```

在您构建期间，此文件将使用 project.version 的值（您`<version>`在 pom.xml 中定义，当您指定

```
 <resources>
   <resource>
     <directory>src/main/resources</directory>
     <filtering>true</filtering>
   </resource>
 </resources> 
```

在您的 Java 代码（JSF bean 等）中，有如下代码：

```
 InputStream in = getClass().getClassLoader().getResourceAsStream("buildInfo.properties");
    if (in == null)
        return;

    Properties props = new Properties();
    props.load(in);

    String version = props.getProperty("build.version");
    // etc. 
```

如果您的框架支持从类路径加载属性作为“资源包”（例如在 Spring 中），则不需要前面加载属性文件的 Java 代码。

# django - 带有关系数据库的谷歌应用引擎上的 django

> ID：12426725
> 
> 赞同：0
> 
> 时间：2012-09-14T14:39:00.890
> 
> 标签：django, google-app-engine

那么有没有其他方法可以在应用引擎上使用 mysql 数据库和 django 应用程序？我找到了不错的解决方案，但它不是免费的 - Google SQL Cloud 似乎工作得很好。但是，如何将 django 应用程序移动到 appengine 并使用 mysql db 连接到其他主机？或者您有其他解决方案吗？

综上所述 - 有没有办法让 GAE 与外部数据库一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:14:00.127

其实我已经找到了答案：

Google App Engine SDK 中的 Python 开发服务器可以在开发过程中使用本地安装的 MySQL 服务器实例来密切镜像 Google Cloud SQL 环境。更多信息在这里-> [https://developers.google.com/appengine/docs/python/cloud-sql/developers-guide](https://developers.google.com/appengine/docs/python/cloud-sql/developers-guide)

# php - 不同的网速显示不同的 div 标签

> ID：12426726
> 
> 赞同：0
> 
> 时间：2012-09-14T14:39:04.083
> 
> 标签：php, javascript, css

我在这里建立了这个网站：http: [//www.attractperfume.com](http://www.attractperfume.com)

当我在浏览器的低分辨率设置下查看此页面时。即，当我使用手机时，我正在使用我的网络共享连接到网络，并且大多数网站都以低分辨率显示。我的内容文本消失了，我的所有页面内容也消失了。

当浏览器是高分辨率时，它显示得很好（这是这里每个人都会看到的大部分内容）。如何停止页面加载低分辨率，有命令吗？

![移动网络](../Images/a57001b6b7b90b3f30a7f8e6830f8866.png) ![宽带](../Images/c019a4a1565d8b96f2b76d60954eb83f.png)

# java - 为什么我的 HashMap 允许重复键？

> ID：12426734
> 
> 赞同：5
> 
> 时间：2012-09-14T14:39:35.017
> 
> 标签：java, hashmap

嘿，我正在使用 a`HashMap`来跟踪公告板上的服务和服务请求。但是，我必须有哈希码和等于错误，因为我得到了重复的键。谁能告诉这可能是为什么？

keySet的内容：

```
Services: [1, 1, 6, 6, 3]
Requests: [8, 7, 6, 5, 8, 4, 5, 6, 2] 
```

以下是相关代码：

```
private static final HashMap<Advert, Integer> services = new HashMap<>();
...

public class Advert {

private int id;
private BoardPoster poster;

public Advert(BoardPoster poster) {
    this.poster = poster;
}

public BoardPoster getPoster() {
    return poster;
}

public void spawn() {
    id = RANDOM.nextInt(ADVERT_RANGE);
}

public int getID() {
    return id;
}

@Override
public String toString() {
    return Integer.toString(id);
}

@Override
public boolean equals(Object o) {
    if (o != null && o instanceof Advert) {
        return ((Advert) o).id == id;
    }
    return false;
}

@Override
public int hashCode() {
    return 67 * 5 + this.id;
}
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-14T14:42:12.043

最可能的原因是您用作键的对象是可变的。因此，如果您执行以下操作：

```
map.put(anAdvert, 1);
anAdvert.spawn(); //modifies id, which affects hashcode and equals 
```

地图的行为将出乎意料。

cf [Map 的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)

> 注意：如果将可变对象用作映射键，则必须非常小心。如果对象的值以影响等于比较的方式更改，而对象是映射中的键，则不指定映射的行为。

# ruby-on-rails - 如何通过自定义模型类Ruby on Rails访问数据库中的指定表？

> ID：12426736
> 
> 赞同：0
> 
> 时间：2012-09-14T14:39:38.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model

我有这个自定义模型，其中包含一些方法：

```
class GenericModel < ActiveRecord::Base 
  self.abstract_class = true

  def get_settings
   .....
  end
end 
```

我想在我的各种其他模型中继承这个 GenericModel 类，如下所示，以便我可以访问这些自定义方法：

```
class ProvinceSetting < GenericModel 
end

class CitySetting < GenericModel 
end 
```

但是，我如何编写我的自定义方法，以便它根据哪个 Model 类调用它来作用于数据库中的特定表？欢迎任何指点

这是 GenericModel 中 get_settings 的正确实现，其中 self 将引用适当的模型名称？

```
def self.get_settings(user_id)
    user_session = SettingsSession.find_by_user_id(user_id)

    if !user_session.blank?
      if setting_orig = self.find_by_settings_session_id(user_session.id)
          setting = setting_orig.dup
      end

    else
      setting = self.first.dup
    end 

 return setting
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:11:59.857

如果你想调用子类使用的表名，那么你就完成了——它已经这样做了：

```
class GenericModel < ActiveRecord::Base
  def get_settings
    all # this will get all settings for the subclass that calls it
  end
end 
```

如果您需要使用其他表名，请在定义表名的每个子类中创建一个方法，并在抽象基础模型中调用该方法：

```
class ProvinceSetting < GenericModel
  def special_table_name
    'foo'
  end
end

class CitySetting < GenericModel
  def special_table_name
    'bar'
  end
end

class GenericModel < ActiveRecord::Base
  def get_settings
    ... # use 'special_table_name' method in a query
  end
end 
```

# xpages - xpage 返回另一个应用程序的导航规则不起作用

> ID：12426738
> 
> 赞同：0
> 
> 时间：2012-09-14T14:39:57.617
> 
> 标签：xpages

我正在从门户网站 xpage 调用 xpage，并希望在成功或取消时返回门户网站。我已将下一页（成功或取消）规则设置为上一页。当我使用简单的取消按钮进行测试时，它不会返回到上一页。总之，应用程序 A 在编辑模式下在应用程序 B 中打开一个页面。当我单击应用程序 B 中的取消按钮时，它不会返回到应用程序 A。

```
<xp:this.navigationRules>
<xp:navigationRule
    outcome="xsp-success"
    viewId="$$PreviousPage"></xp:navigationRule>
</xp:this.navigationRules> 
```

然后我尝试使用带有返回 URL 的 sessionScope 变量，但 sessionScope 变量似乎在应用程序 B 中不可用。

我一定错过了一些非常基本的东西。谁能帮我一把？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:04:10.037

导航规则仅适用于每个应用程序。*像$$HomePage*这样的“特殊”规则将始终返回到应用程序根目录，而*$$PreviousPage*将返回到*sessionScope*中存储的最后一页。*sessionScope*中的最后一页也是特定于应用程序的，这就是它不起作用的原因。

尝试使用 URL 参数打开您的应用程序 B，并将此参数存储在应用程序 B 的*sessionScope*中。如果用户取消，您可以简单地执行重定向，而不是使用导航规则。

# javascript - 使用 JavaScript 使用 SOAP WebService

> ID：12426742
> 
> 赞同：0
> 
> 时间：2012-09-14T14:40:08.943
> 
> 标签：javascript, web-services, soap

我正在尝试使用 JavaScript 使用 SOAP (.net) WebService，但 responseText 和 responseXML 为空。我尝试在另一个浏览器（chrome、firefox、IE）中运行，但这并没有解决它。

```
function MButton1Click(event) {
    sendDataAsXML_SOAP();
}

function sendDataAsXML_SOAP() {
    var req_params = "",
        url = "",
        number = 0,
        type = "";
    /* Configure Parameters */
    url = "http://wp.art.br/FriendNet/Principal.asmx";
    var user = document.getElementById("MTextArea1").value;
    var ajaxRequest;
    req_params = "<?xml version=\"1.0\" encoding=\"utf-8\"?>";
    req_params = req_params + "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-       instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"   xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">";
    req_params = req_params + "  <soap:Body>";
    req_params = req_params + "    <TesteDeTexto xmlns=\"http://tempuri.org/\">";
    req_params = req_params + "      <pTexto>" + user + "</pTexto>";
    req_params = req_params + "    </TesteDeTexto>";
    req_params = req_params + "  </soap:Body>";
    req_params = req_params + "</soap:Envelope>";
    /* Send XML/SOAP Request To Web Service Using Browser's Javascript DOM */
    var xmlHTTP;
    if (window.XMLHttpRequest) {
        xmlHTTP = new window.XMLHttpRequest; //For browsers other than ie
    } else {
        try {
            xmlHTTP = new ActiveXObject("MSXML2.XMLHTTP.3.0"); //for ie
        } catch (ex) {}
    }
    xmlHTTP.open("POST", url, true);
    xmlHTTP.setRequestHeader("Content-Type", "text/xml; charset=utf-8");
    xmlHTTP.setRequestHeader("SOAPAction", "http://tempuri.org/TesteDeTexto");
    xmlHTTP.onreadystatechange = receiveXML_SOAPData;
    xmlHTTP.send(req_params);
}

function receiveXML_SOAPData() {
    if (ajax_request.readyState == 4) {
        if (ajax_request.status == 200 || ajax_request.status == 0) {
            /* Parse The Response Data */
            alert(ajax_request.responseText);
            alert(ajax_request.responseXML);
            alert("sucesso");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:48:52.130

您尝试`ajax_request`在您的`receiveXML_SOAPData`函数中使用 a `undefined`。你应该得到一个例外，检查你的错误控制台。

函数中的`ajaxrequest`变量`sendDataAsXML_SOAP`是 a) 未使用和 b) 该函数的局部变量 - 它不起作用。

改用函数中的`this`关键字`receiveXML_SOAPData`来引用 XHR 对象。

# php - ServiceLocatorAwareInterface 在运行模块测试时混淆 DI 容器

> ID：12426744
> 
> 赞同：2
> 
> 时间：2012-09-14T14:40:23.877
> 
> 标签：php, dependency-injection, zend-framework2

我有一个正在为其编写测试的新模块。该模块包含一个实现 ServiceLocatorAwareInterface 的类，因为它需要使用 DI 容器创建其他对象。在骨架应用程序中运行时一切正常，但在运行模块测试时，我得到以下信息：

> Zend\Di\Exception\RuntimeException：“Zend\ServiceManager\ServiceLocatorInterface”的类型为“NULL”的无效实例化器

稍微研究一下，我发现 DI 容器试图创建一个“ServiceLocatorAwareInterface”类型的新对象，这当然是错误的。

在测试引导程序中进一步挖掘，我发现添加以下行可以解决问题，因为 DI 现在知道要为该接口实例化哪个类。

```
$di->instanceManager()->addTypePreference('Zend\ServiceManager\ServiceLocatorInterface', new \Zend\ServiceManager\ServiceManager()); 
```

我不确定这是否是问题的最佳解决方案，因为我传递的 ServiceManager 是一个虚拟的。

有没有人有任何其他想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:37:01.577

是的，你正朝着正确的方向前进。（请参阅[首选项文档](http://zf2.readthedocs.org/en/latest/modules/zend.di.instance-manager.html#preferences)）

现在没有多少人使用 DI 来支持 ServiceManager（包括我自己），但是如果 DI 的配置与 ZF2 beta 期间的配置保持相似，您应该能够在您的 DI 配置中添加“首选项”部分像这样：

```
'di' => array(
    'instance' => array(
        'preferences' => array(
            'My_Interface' => 'My_Implementation_Or_Alias',
        ) 
    )
) 
```

此配置块可以替换您对`$di->instanceManager()->addTypePreference()`

* * *

查看当前文档，并模仿[此处](http://zf2.readthedocs.org/en/latest/modules/zend.di.debugging-and-complex-use-cases.html#multiple-injections-to-a-single-injection-point)的示例，您可能会成功定义 DI 配置，如下所示使用 ZF2 官方版本：

```
$di = new Zend\Di\Di;
$di->configure(new Zend\Di\Config(array(
    'instance' => array(
        'preferences' => array(
            'My_Interface' => 'My_Implementation_Or_Alias',
        ) 
    )
))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:24:00.763

在这种情况下，您可以执行以下操作。

在模块单元测试的引导程序中，创建一个虚拟应用程序，该应用程序配置了仅加载您正在测试的模块的配置。

```
...//other code before this for autoloading stuff

// DON'T RUN THE application in your tests, just init it
$application = Zend\Mvc\Application::init(include 'config/test.application.config.for.module.php');

$fullyConfigedManager = $application->getServiceManager();

TestCases::setServiceManager( $fullyConfigedManager ); 
```

应用程序启动后，您可以直接从应用程序中拉取 ServiceManager。该服务管理器应该完全配置有任何工厂、可调用对象和模块中的配置。

# android - 如何在构建期间自动修改 Manifest 中的 versionName？

> ID：12426750
> 
> 赞同：25
> 
> 时间：2012-09-14T14:40:50.690
> 
> 标签：android, eclipse, adt

到目前为止，我一直专注于我的应用程序的编程，很少关注使构建过程更智能。因此，我一直在手动操作（“笨方法”），包括手动更新`android:versionCode`和`android:versionName`在 AndroidManifest.xml 中进行更新。

我现在想自动（即在构建或导出时）：

1.  `git`从包含构建和版本代码的最新标签/分支中获取。
2.  解析它们，以便我可以将它们分配给 AndroidManifest.xml 中的相应字段。
3.  相应地修改 AndroidManifest.xml。
4.  继续正常的构建过程（Eclipse+ADT，没有任何 Ant），就好像我手动完成了 1-2-3...

我发现了一些关于“[预构建](https://stackoverflow.com/a/3673461)步骤”、builders 和[build.xml](https://stackoverflow.com/a/3882926)的线索，但我不知道在哪里可以找到这些线索以及从哪里开始。

关于我可以在哪里找到有关该主题的更多信息的任何提示或指示？（一个分步教程将是理想的）

**更新 1：**我发现[这个帖子](http://www.eclipse.org/forums/index.php/mv/msg/81021/251849/#msg_251849)暗示我：

1.  右键单击项目，`Properties > Builders`
2.  添加一个指向项目的 Ant 构建文件的构建器。
3.  在 Java 构建器之前调用该构建器

很好，但是项目的[Ant](http://en.wikipedia.org/wiki/Apache_Ant)构建文件**在哪里？**我在哪里可以找到它？

**更新 2：**显然，可以[将整个项目导出到 Ant 文件](https://stackoverflow.com/a/4186557)中。但我不确定那是我想要的。预构建步骤必须始终包含[Ant 构建文件](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/gettingStarted/qs-93_project_builder.htm)吗？

**更新 3：**构建一个 Ant 文件，[仅用于预构建步骤](http://individual.utoronto.ca/kia/)，正确的方法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-12T09:12:27.660

这是我用来为 AndroidManifest.xml 动态分配 versionCode 和 versionName 的方法。它仅在使用 ant 构建时才有效，因此您必须先安装它。然后在命令行中进入项目目录并执行“android update project -p.”，这将创建使用ant 构建所需的文件，例如local.properties 和build.xml。

然后打开**build.xml**并将其放入：

```
 <target name="-pre-build" depends="-custom-git-version,-custom-manifest-version">
  </target>

  <!-- Packages the application. -->
  <target name="-post-build">
    <antcall target="-custom-restore-manifest"/>

    <property name="suffix" value="${git.commits}-${git.version}.apk" />

    <exec executable="sed" inputstring="${out.final.file}" outputproperty="out.final.renamedfile">
      <arg value="s/\.apk/-${suffix}/" />
    </exec>

    <copy file="${out.final.file}" tofile="${out.final.renamedfile}" />
    <echo>Final file copied to: ${out.final.renamedfile}</echo>
  </target>  

  <!-- Custom targets -->
  <target name="-custom-git-version">
    <exec executable="sh" outputproperty="git.commits">
      <arg value="-c" />
      <arg value="git log --pretty=format:'' | wc -l" />
    </exec>
    <echo>git.commits: ${git.commits}</echo>
    <exec executable="git" outputproperty="git.version">
       <arg value="describe" />
       <arg value="--tags" />
       <arg value="--long" />
    </exec>
    <echo>git.version: ${git.version}</echo>
  </target>

  <target name="-custom-manifest-version">
     <echo>Creating backup of AndroidManifest.xml</echo>
     <copy file="AndroidManifest.xml" tofile="AndroidManifest.xml.antbak" preservelastmodified="true" />

     <replaceregexp
        file="AndroidManifest.xml"
        match='android:versionCode="(\d+)"'
        replace='android:versionCode="${git.commits}"' />

     <replaceregexp
        file="AndroidManifest.xml"
    match='android:versionName="(\d+\.\d+)\.\d+"'
    replace='android:versionName="\1.${git.commits}"' />
  </target>

  <target name="-custom-restore-manifest">
    <echo>Restoring backup of AndroidManifest.xml</echo>
    <move file="AndroidManifest.xml.antbak"
          tofile="AndroidManifest.xml"
          preservelastmodified="true"
          overwrite="true" />
  </target> 
```

这个输出并不完全是你想要的，但它是一个开始 - 随意修改它:) 结果类似于“yourapp--.apk”

使用它，您将根据您的需要执行“ **ant clean debug** ”或“ **ant clean release** ”来构建您的应用程序。您还可以使用以下内容创建“ **ant.properties** ”文件：

```
key.store=keystore_file
key.store.password=some_password
key.alias=some_alias
key.alias.password=some_other_password 
```

启用应用程序的自动签名。

您还应该阅读以下内容：http: [//developer.android.com/tools/building/building-cmdline.html](http://developer.android.com/tools/building/building-cmdline.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T15:56:08.623

您在设置预构建步骤方面走在了正确的轨道上，但是 ant 构建文件是您自己从头开始创建的。Eclipse 有一些它在外部使用的 ant 脚本来处理自动编译、打包和其他内容，但是您想创建一个单独的脚本来执行您想要的这些额外步骤。

因此，您将不得不学习一些关于 ant 脚本的知识才能完成这项工作。您找到的其中一些链接为您提供了有关如何创建简单 ant 文件的基本概念。除此之外，您可能需要使用的一些 ant 任务是：

[Exec](http://ant.apache.org/manual/Tasks/exec.html) - 你需要这个来执行你的 git 命令来获取你的版本信息。它有一个名为 resultProperty 的参数，您可以使用该参数将命令的输出存储到 ant 可以访问的属性中。（或者你可以将命令输出到一个文件中，而 ant 可以访问它。）

[ReplaceRegExp](http://ant.apache.org/manual/Tasks/replaceregexp.html) - 您将需要它来替换您放置在 AndroidManifest.xml 中的标记（可能是 @VERSIONCODE@ 和 @VERSIONNAME@ ），这些值最终应该被执行，并由 exec 返回的值。

您可能还希望在开始时执行一个 exec 任务，以将您的 AndroidManifest.xml 文件恢复到其原始状态（带有适当的令牌），因此无需手动清理即可重复。我会提供更多关于你需要在这些 exec 任务中运行的 git 命令的信息，但恐怕我所有的经验都是使用 Subversion，所以你必须填补那里的空白。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T05:52:55.897

您应该考虑使用[maven-android](http://code.google.com/p/maven-android-plugin/)构建。干净地构建项目后，使用[版本更新](http://maven-android-plugin-m2site.googlecode.com/svn/version-update-mojo.html)插件自动增加版本号。

用 maven-android 编写构建脚本并不容易——但付出的努力是值得的，你应该考虑这个途径。

此外，本[教程](http://www.simpligility.com/2010/11/release-version-management-for-your-android-application)可能会派上用场（我将此处描述的技术的变体用于我自己的构建）

编辑（2014）：

考虑迁移到 Android Studio 并使用 Gradle。请参阅：[如何在 Android Gradle 中自动增加 versionCode](https://stackoverflow.com/questions/17448565/how-to-autoincrement-versioncode-in-android-gradle)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T11:33:18.517

我设法实现这一点的方式：构建>执行shell（我们需要一些php代码来从数据库接收一些信息）并且字符串替换发生在php中：

```
#!/usr/bin/php
<?php
    $filename = $WORKSPACE."/src/com/me/myapp/MyActivity.java";
    $file = @file_get_contents($filename);
    if($file) {
        $repl = preg_replace("OriginalString", "NewString", $file);
        file_put_contents($filename, $repl);
        echo "\n\nReplaced some stuff in $filename";
    }
?> 
```

# jsp - java.lang.IllegalArgumentException：索引路径中的非法字符

> ID：12426752
> 
> 赞同：0
> 
> 时间：2012-09-14T14:40:54.283
> 
> 标签：jsp, url, encoding, jersey, opera

在一个链接中，我有`{`和`}`字符。在 chrome/ff （即？）中，当我单击该链接时，它会替换`{`为`%7B`和。不幸的是，在歌剧中它没有。如果我的链接，然后成为其他浏览器（然后我得到一个 404 @ 那个资源）。因此，当我单击歌剧中的链接时，我得到. 我很困惑：`}``%7D``URLEncoder.encode``%7B``%257B``java.lang.IllegalArgumentException: Illegal character in path at index`

1.  为什么歌剧不编码`{`and `}`？
2.  为什么要抛出异常？为什么不直接对 URL 进行编码并继续？
3.  如何在不破坏其他浏览器中的链接（带额外编码）的情况下解决这个问题？

编辑：我们正在使用[jersey](http://jersey.java.net/)，正如堆栈跟踪中所说：

```
java.lang.IllegalArgumentException: Illegal character in path at index
    java.net.URI.create(URI.java:859)
    javax.ws.rs.core.UriBuilder.fromUri(UriBuilder.java:95)
    com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:879)
    com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:843)
    com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:804) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:15:39.393

令人困惑（即它的名字很糟糕） URLEncoder 用于将数据作为参数传递，而不是用于对 URL 本身进行编码。

我们使用 org.apache.commons.httpclient.util.URIUtil.encodePath 但现在看起来这已经过去了（从 1.4 开始？），建议改用 java.net.URI： [Commons- URIUtil.encodePath 发生了什么httpclient-3.1？](https://stackoverflow.com/questions/2605757/what-happened-to-uriutil-encodepath-from-commons-httpclient-3-1)

也看看这个：[Java中的HTTP URL地址编码](https://stackoverflow.com/questions/724043/http-url-address-encoding-in-java)

# sql - 声明 VARBINARY 时使用变量指定“大小”

> ID：12426756
> 
> 赞同：4
> 
> 时间：2012-09-14T14:41:07.547
> 
> 标签：sql, variables, sql-server-2008-r2, varbinary, declare

在 SQL Server (2008 R2) 中，不要这样做：

```
DECLARE @testVar VARBINARY(64); 
```

我想这样做：

```
DECLARE @varSize INT;
SET @varSize = 64;
DECLARE @testVar VARBINARY(@varSize); 
```

但我得到这个错误：

> '@varSize' 附近的语法不正确。

我怎样才能做这样的事情或强制 SQL 评估@varSize？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T14:44:07.013

对于变量，为什么不直接使用 MAX？

```
DECLARE @testVar VARBINARY(MAX); 
```

这已经不是70年代了。您的系统可以处理它。事实上，如果你想做的事情*是*可能的，我怀疑你这样做会浪费更多的资源，而不是首先将变量声明为 MAX。

# perl - 单行从字符串中提取数字

> ID：12426757
> 
> 赞同：-1
> 
> 时间：2012-09-14T14:41:11.803
> 
> 标签：perl

我正在学习 Perl 正则表达式，我正在尝试从字符串中提取数字，例如

```
my $text = "abc000142gh"; 
```

即我想提取`000142`为标量变量中的字符串。

我努力了：

```
my $digits = $text ~= /(+d)/;
my $digits = $text ~= m/(+d)/;
my $digits = $text ~= m/(+d)/g;
my $digits = $text ~= /(+d)/g; 
```

但它们似乎都不起作用。有没有办法用单线做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T14:45:59.127

这有效：

```
my $text = 'abc000142gh';
my ($digits) = $text =~ /(\d+)/; 
```

区别：

1.  字符串周围的引号（不需要，但首选）。
2.  括号中的 $digits 以强制执行列表上下文。有关详细信息，请参阅[perlop](http://p3rl.org/perlop)。
3.  绑定运算符是`=~`，不是`~=`。
4.  `\d`表示一个数字，`d`代表它自己。
5.  `+`(repetition) 用在要重复的符号之后，而不是之前。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T14:46:09.473

您的代码无法编译。这里有几个问题。

*   您忘记引用您的字符串

    ```
    my $text = 'abc000142gh'; 
    ```

*   你有正则表达式绑定运算符（`=~`）错误的方式，

*   忘记了反斜杠`\d`
*   `+`和它前面的量词 ( )

    ```
    my $digits = $text =~ /(\d+)/; 
    ```

* * *

现在回答您的问题您需要强制执行列表上下文。匹配返回一个列表，因为你有`$digits`，这是一个标量，列表被转换为它的元素数。

```
(my $digits) = $text =~ /(\d+)/; 
```

是否将 放在正则表达式的前面并不重要，[`m`](http://perldoc.perl.org/functions/m.html)因为它对任何`/foo/`表达式都是隐含的。

* * *

看看这些东西：

*   [Rubular](http://rubular.com/)非常方便评估正则表达式
*   [http://perldoc.perl.org/perlretut.html](http://perldoc.perl.org/perlretut.html)

# gradle - Gradle - 向现有任务添加附加任务

> ID：12426758
> 
> 赞同：9
> 
> 时间：2012-09-14T14:41:13.170
> 
> 标签：gradle, valdr-bean-validation

我正在开发一个使用 EJB2 的项目。创建的 EJB Jars 需要应用程序服务器进行额外处理，然后才能将它们捆绑到 war/ear 中并进行部署。

我创建了一个自定义任务，如果我显式调用它（gradle ejbDeploy），它就可以进行额外的处理，但是在将它安装到 gradle 多项目生命周期中时遇到了麻烦。我需要以某种方式将其添加到构建图以在 jar 任务之后自动执行。

我的第一次尝试是将它添加到 jar 中

```
jar.doLast{
    ejbDeploy.execute()
} 
```

这似乎适用于任意代码块，[但不适用于任务](http://gradle.1045684.n5.nabble.com/1-0-m-7-Gradle-idea-task-fails-with-lock-exception-td5123405.html)

推荐的解决方案是什么？我看到三种方法：

1.  挂钩到构建图并在 jar 任务之后显式添加它。
2.  在 jar.doLast{} 中以某种方式设置它
3.  将其设置为 WAR 任务执行的先决条件

有推荐的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T14:47:40.833

我会采用方法＃3并将其设置为战争任务的依赖项，例如：

```
war {
    it.dependsOn ejbDeploy
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-25T19:08:15.303

我是 Gradle 的新手，但我想说答案真的取决于你想要完成的事情。

如果您想在有人运行命令时执行任务`gradle jar`，那么方法＃3 是不够的。

这是我为类似的事情所做的

```
classes {
    doLast {
        buildValdrConstraints.execute()
    }
}

task buildValdrConstraints(type: JavaExec) {
    main = 'com.github.valdr.cli.ValdrBeanValidation'
    classpath = sourceSets.main.runtimeClasspath
    args '-cf',valdrResourcePath + '/valdr-bean-validation.json'
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-23T06:51:23.637

添加以下内容，然后`ejbDeploy`将在 之后`jar`，但之前执行`war`

```
jar.finalizedBy ejbDeploy 
```

请参阅[Gradle 文档。18.11。终结器任务](https://docs.gradle.org/current/userguide/more_about_tasks.html#sec:finalizer_tasks)

# mod-rewrite - 如何从网站中的所有 URL 中消除子目录级别

> ID：12426759
> 
> 赞同：0
> 
> 时间：2012-09-14T14:41:16.613
> 
> 标签：mod-rewrite, redirect

我有一个网站，我只是设置了一个操作系统购物车（即 Magento）

根据安装指南，我将购物车安装在文档根目录下的子目录中，即 /magento/。

所以我的网站购物车的 URL 是[http://mydomain.com/magento/](http://mydomain.com/magento/)

我在文档根目录下没有公共页面，我实际上希望我的购物车成为我的主页——换句话说，我想`http://mydomain.com/magento/`解析为`http://mydomain.com/`

可能吗？我可以使用 mod-rewrite 来实现吗？如果是这样，您能否建议 mod-rewrite 指令的外观？

或者它只是一个永久重定向，如：

```
redirect 301 /magento http://mydomain.com/ 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:44:55.530

您可以使用：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/magento
RewriteRule ^(.*)$ /magento/$1 
```

这样，它应该替换它`/magento`前面的所有内容。因此，您可以将链接指向您的根目录。

我已经对其进行了编辑和测试，它可以工作。

现在我已经更好地阅读了您的问题，看来您只想重定向主页，而不是整个网站：

```
RewriteEngine on
RewriteRule ^$ /magento/ 
```

# click - 输入框的 Mootools 点击功能

> ID：12426763
> 
> 赞同：1
> 
> 时间：2012-09-14T14:41:33.643
> 
> 标签：click, mootools

为什么这不能正常工作？

它应该在第一次单击时将输入宽度设置为 300，在正文单击时设置为 100，

如果有人知道 mootools 的元素点击功能，请告知

如果您知道如何将其设置回原始盒子尺寸，那将是很棒的

[http://jsfiddle.net/V6bTN/10/](http://jsfiddle.net/V6bTN/10/)

```
window.addEvent('load', function() {
    var box = $$('#searchfeed');
    var isopen = box.hasClass('open');

    box.addEvent('click', function myfunction(event) {

        box.addClass('open');
        box.morph({
            width: 300
        });

    });

    if (isopen) {
        $(document.body).addEvent('click', function(event) {
            box.morph({
                width: 100
            });
            box.removeClass('open');

        });
    }

});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T15:09:07.513

这是一个简单的 outerClick 函数。

```
Element.Events.outerClick = {
    base : 'click',    
    condition : function(event){
        event.stopPropagation();
        return false;
    },
    onAdd : function(fn){
        this.getDocument().addEvent('click', fn);
    },
    onRemove : function(fn){
        this.getDocument().removeEvent('click', fn);
    }
}; 
```

利用：

```
el.addEvent('outerClick', function(){ this.destroy(); }); 
```

# html - HTML 电子邮件列宽随不同的电子邮件客户端而变化

> ID：12426764
> 
> 赞同：3
> 
> 时间：2012-09-14T14:41:36.407
> 
> 标签：html, html-table, width, html-email

我找不到直接的答案，所以如果之前有人问过这个问题，请耐心等待。

我的 HTML 经验有限。在我的 Android 手机上的 Entourage 和 Gmail 中打开时，电子邮件中表格列的宽度会发生变化。我 PC 上的 Gmail 看起来不错，Outlook、Yahoo 等也很棒。

基本上发生的是 Entourage/Gmail-droid 中左右列开关的宽度。左列宽度**应**保持在 `width="401";`右列**应**保持固定`width="171"`（它们交换，因此左列为 171，右列为 401）。

我正在使用一个带有嵌套表格的 HTML 电子邮件模板。这是去除了文本和图像的基本代码。任何帮助，将不胜感激：

```
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style type="text/css" media="screen">
    html {
        -webkit-text-size-adjust:none;
        -webkit-background-size:100%;
    }

    .bold {
       color: #61BB46;
    }

    .Main {
           font-family: Verdana, Helvetica, sans-serif;
           font-size: 12px;
           line-height: 22px;
           color: #666666;
    }

    .Sidebar {  
           font-family: Verdana, Helvetica, sans-serif;
           font-size: 12px;
           line-height: 22px;
           color: #666666;
    }

    a:link {
           COLOR: #592989;
    }

    a:visited {
           COLOR: #FAAB53;
    }

    a:hover {
           COLOR: #61BB46;
    }

    a:active {
           COLOR: #592989;
    }

    </style>

    <body bgcolor="#ffffff" text="#666666" style="padding:0px; margin:0px;">
    <table style="font-family: Verdana, Helvetica, sans-serif; color: #666666; 
    font-size: 12px; Line-height: 18px; width: 600px;" border="0" cellspacing="0" 
    cellpadding="0" align="center">
        <tr>
          <td style="font-size: 30px; line-height: 32px; color: #592989;" colspan="4">
            <div style="font-size: 12px; color:#999;"></div></td>
        </tr>
        <tr>
          <td style="padding-top: 20px;" colspan="4"><table border="0" cellspacing="0" 
    cellpadding="0" align="center">
              <tbody>
                <tr>
                  <td style="padding: 4px; background-color: #e3dede;"><img src="" 
    width="578" height="190"></td>
                </tr>
              </tbody>
            </table></td>
        </tr>
        <tr>
          <td style="padding-top: 20px; padding-bottom: 20px; text-align: left;" 
    colspan="4"><p><a href="" target="_blank">
          </td>
        </tr>
        <tr>
          <td rowspan="5" width="401" valign="top"><p style="color: #592989; 
    font-size: 20px;"></p>
            <p class="Main" style="margin-bottom: 1.0em">
           </p></td>
          <td rowspan="5" width="19" valign="top">&nbsp;</td>
          <td style="background-color: #592989; padding: 4px; padding-left: 8px; 
    color: #ffffff; font-size: 14px;" width="171" valign="top"><p></p></td>
        <tr>
    </table>
    </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:47:24.070

发送 HTML 电子邮件的第一条规则使用内联样式。`<head>`许多客户会去掉标签中的任何样式。最安全的赌注是甚至不用 a `<head>`or`<body>`标记，因为大多数时候这些都被去掉了。验证您的 html。您有一些无效标记，许多客户会删除：

```
<td style="padding-top: 20px;" colspan="4"><table border="0" cellspacing="0" 
    cellpadding="0" align="center">

              <tbody> 
```

应该：

```
<td style="padding-top: 20px;" colspan="4"><table border="0" cellspacing="0" 
    cellpadding="0" align="center">
      <table>
              <tbody> 
```

# vb.net - VB中的LPR命令问题

> ID：12426765
> 
> 赞同：0
> 
> 时间：2012-09-14T14:41:42.250
> 
> 标签：vb.net, file-transfer, lpr

我正在创建一个 VB 应用程序，它会将 xls 报告从目录“移动”到 ReportSafe 应用程序。我也在一个现有的 VB 应用程序中工作，它就是这样做的，所以我将它用作参考。

它不像将文件从一个目录移动到另一个目录那么简单，因为 ReportSafe 需要一个 lpr 命令来告诉它（ReportSafe）要拾取哪个文件。

这是我到目前为止所拥有的：

```
Imports System.IO
Module Module1

Sub Main()

    ''Declarations
    Dim Files As ArrayList = New ArrayList()
    Dim FileName As String

    ''Write All Files in *directory* to ReportSafe
    Files.Clear()
    Files.AddRange(Directory.GetFiles(*directory*))
    For Each FileName In Files

        Dim RPname As String
        Dim RealName As String
        RPname = FileName.ToString
        RealName = "/"
        RealName = RealName & RPname.Remove(0, 34)

        Dim a As New Process
        a.StartInfo.FileName = "C:\Windows\system32\lpr.exe"
        a.StartInfo.Arguments = "-S*ServerName* -Plp -J" & Chr(34) & RealName & Chr(34) & " " & Chr(34) & RPname & Chr(34)
        a.StartInfo.UseShellExecute = False

    Next
End Sub

End Module 
```

整个 lpr 命令/参数让我陷入了循环。我不确定我的问题是否特定于 ReportSafe，如果是这种情况，我可能在这里不走运。我已经从现有的应用程序中提取了这段代码，该应用程序将报告移动到 ReportSafe，并为我自己的使用进行了调整，但到目前为止还没有运气。

仅供参考，我必须打开 LPR Monitor 服务才能获取 lpr.exe

问题：传递给这个 lpr 命令的正确参数是什么？导致问题的逻辑是否存在问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:58:31.790

我继续修补并查看我的参考代码，发现了一些逻辑缺陷：

一方面，我传递的报告名称不包括完整的文件路径。另一件事是我从未使用`a.Start()`. 菜鸟肯定会犯错……哈哈

# c++ - 为包装列表自定义迭代器

> ID：12426767
> 
> 赞同：1
> 
> 时间：2012-09-14T14:41:49.103
> 
> 标签：c++, list, class, stl

我有一个类 memberlist，其中包含一个类成员`std::list`信息。这些代表网络上的对等点。

我使用该类向列表中添加一些功能。

我想公开一些迭代器（开始和结束），以便外部代码可以遍历我的内部列表并读取它们的数据。但是，我想有两种方法来做到这一点 - 一种包含 localhost 的元素，另一种不包含。

有什么好方法可以做到这一点？

我可以先放置本地节点，然后`begin(showlocal=false)`只给出第二个元素而不是第一个。或者有人建议用布尔值存储一对，说明它是否是本地的。

关于这样做的好方法有什么建议吗？我对高级的`STL`东西还不太了解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T14:47:38.743

就我个人而言，我会以不同的方式处理这个问题，让你`memberinfo`有办法告诉你它是否是本地的。

这样，由于包含对象的专门化，您不会专门化您的集合类。实际上，您可以只使用标准`std::list<memberinfo>`.

例如

```
class memberinfo
{
    bool IsLocal( ) const;
} 
```

然后，您将在迭代包含的对象时选择是否对本地成员感兴趣。

例如

```
std::list<memberinfo>::iterator it;
std::list<memberinfo> list;

for ( it = list.begin() ; it != list.end() ; it++ )
{
    if ( it->IsLocal() )
    { 
        // blah blah blah
    }
    else
    {
        // dum dee dum dee
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T16:09:29.050

正如我在评论您的问题时所说，我认为您的第一个解决方案是合理的。但是，我不确定提供参数 to`begin`是区分这两种情况的最佳方法。这样做的主要问题是您不能将完整集合（包括 localhost 成员）用作范围，这意味着您不能使用[Boost.Range 算法](http://www.boost.org/doc/libs/release/libs/range/doc/html/index.html)或基于 C++11 范围的 for 循环。

一个简单的解决方案是让两个不同的成员函数返回适当的范围，作为一对迭代器。Boost.Range 提供了一个[`sub_range`class](http://www.boost.org/doc/libs/release/libs/range/doc/html/range/reference/utilities/sub_range.html)，这似乎很合适（您想返回成员列表的子范围）。这是使用这种方法的示例代码：

```
#include <boost/range.hpp>

#include <iostream>
#include <string>
#include <vector>

struct MemberInfo
{
    std::string name;
};

class MemberList
{
  public:

    typedef std::vector<MemberInfo>::iterator iterator;
    typedef std::vector<MemberInfo>::const_iterator const_iterator;

    MemberList() 
      : members_{MemberInfo{"local"}, MemberInfo{"foo"}, MemberInfo{"bar"}}
    {}

    boost::sub_range<std::vector<MemberInfo>> all() // includes localhost
    {
        return boost::sub_range<std::vector<MemberInfo>>(
            members_.begin(), members_.end());
    }

    boost::sub_range<std::vector<MemberInfo> const> all() const
    {
        return boost::sub_range<std::vector<MemberInfo> const>(
            members_.begin(), members_.end());
    }

    boost::sub_range<std::vector<MemberInfo>> some() // excludes localhost
    {
        return boost::sub_range<std::vector<MemberInfo>>(
            ++members_.begin(), members_.end());
    }

    boost::sub_range<std::vector<MemberInfo> const> some() const
    {
        return boost::sub_range<std::vector<MemberInfo> const>(
            ++members_.begin(), members_.end());
    }

  private:

    std::vector<MemberInfo> members_;
}; 
```

现在，您可以使用其中一个`all()`或`some()`取决于是否要包含`local`，并且两者都可以用作范围：

```
int main()
{
    MemberList ml;

    for (MemberInfo mi : ml.all()) { std::cout << mi.name << '\n'; }

    for (MemberInfo mi : ml.some()) { std::cout << mi.name << '\n'; }
} 
```

当然，您仍然可以照常使用迭代器：

```
std::find_if(ml.all().begin(), ml.all().end(), ...); 
```

如果您不想泄露成员存储在 a 中的事实，则`std::vector`可以使用[`any_range`](http://www.boost.org/doc/libs/release/libs/range/doc/html/range/reference/ranges/any_range.html)，它会擦除​​底层迭代器类型。

# command-line - 如何使用命令行从 MAMP 中删除数据库

> ID：12426768
> 
> 赞同：2
> 
> 时间：2012-09-14T14:41:51.003
> 
> 标签：command-line, mamp

有人可以通过命令行指令帮助我删除单个 MAMP 数据库吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T14:49:07.203

运行`/Applications/MAMP/Library/bin/mysql -uroot -p`。它会询问您的密码。然后只需使用常规的 MySQL`DROP DATABASE nameofdatabase`命令。

# reflection - Nancy 和抽象基模块类/创建幻像类实例

> ID：12426770
> 
> 赞同：3
> 
> 时间：2012-09-14T14:41:58.993
> 
> 标签：reflection, abstract-class, nancy

我正在与 Nancy 构建一个小型应用程序

我想要一种基类，其他模块可以继承。
见下文（这不是抽象类是有原因的，我将在下面解释）

```
public class ImportModule<T> : NancyModule
{
    protected ImportModule()
        : this(typeof(T).Name.ToLower())
    {
        Get["/"] = _ => "need to select an action - xxx";
        Get["/importnew"] = _ => ImportNew(); //note - method omitted for brevity
    }
} 
```

当我运行我的应用程序时，我得到

> 无法解析类型：My.NameSpace.TypedImporter`1

**作为旁注，如果`ImportModule`类是抽象的，这不会发生**

好的
-现在，我可以有这样的课程：

```
public class MyCustomImporter : ImportModule<MyCustomType>
{
   //overrides.... 
} 
```

但是，在其他地方，在“DefaultImportModule”中，我有以下内容：

```
var importerModule = Activator.CreateInstance(typeof(ImportModule<>).MakeGenericType(type)); 
```

所以我需要能够创建一种类型的导入器，基于传入的类型

（基本上，如果用户点击 url /customer，它的作用与这样的类相同）

```
public class CustomerImporter : ImporterModule<Customer>
{
} 
```

所以，正如我所看到的，我有两个选择：
1）停止 nancy 尝试映射我的 ImportModule
2）实例化一个从 ImportModule 继承的“幻像类”并使 ImportModule 再次抽象

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T10:32:39.063

Nancy 小组中有一个讨论可能与您的问题有关，它肯定与 Nancy 无法识别的非抽象基础模块有关。这是 Andreas Håkansson 不得不说的：

> Nancy 找到所有继承 NancyModule 的东西，并假设它是可以实例化的东西。Nancy 知道它不能创建抽象模块的实例。因此，如果您有一个非抽象的基本模块，那么 Nancy 将尝试更新它。我想在 99% 的时间里，拥有一个非抽象的基类是一个错误的设计。

这是讨论的链接：[无法解析类型：Nancy.Routing.DefaultRouteResolver](https://groups.google.com/forum/?fromgroups=#!searchin/nancy-web-framework/abstract/nancy-web-framework/ghb6avyauEI/UawQycmcjmcJ)

# extjs - Ext js 自定义图表

> ID：12426776
> 
> 赞同：0
> 
> 时间：2012-09-14T14:42:21.583
> 
> 标签：extjs

我正在使用 ExtJS 来显示图表。我想使用散点图，其中轴应该在中间，**而不是默认轴**。

为此，我尝试将轴 x 和 y 相应地放置在面板的中间，并在该面板中以**绝对布局**绘制没有轴的图表。我知道这可能不是正确的做法。请建议我如何做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T05:28:57.397

我正在使用 FusionCharts。这是一个示例，我如何在我的 Extjs 页面中使用它（EXTJS Ver. 3.4.1）

对于执行以下示例，您必须下载 FusionCharts。之后，将“Column2D.swf”复制到您的根目录。

1.  将 .js 文件添加到您的 .php 或 .html 页面

    ```
    <script type="text/javascript" src="js/utility/FusionCharts.js"></script>
    <script type="text/javascript" src="js/chartdata/chartdata.js" ></script> 
    ```

2.  使用您的数据创建 .js 文件。（这里我们有'chartdata.js'）

    ```
    var dataStringCredit ='<chart baseFontSize="12" baseFont="Arial,Helvetica,sans-serif" xAxisName="Top 5 Products Using Invoiced Sales Dollers for Last 12 Months" alternateVGridColor="AFD8F8" baseFontColor="114B78" toolTipBorderColor="114B78" toolTipBgColor="E7EFF6" useRoundEdges="1" showBorder="0" bgColor="FFFFFF,FFFFFF">\n\
            <set label="ABC" value="23" color="AFD8F8"/> \n\
            <set label="123" value="12" color="F6BD0F"/> \n\
            <set label="XYZ" value="17" color="8BBA00"/> \n\
            <set label="MNO" value="14"  color="A66EDD"/> \n\
            <set label="789" value="12"  color="F984A1"/>\n\
    </chart>'; 
    ```

3.  在您的 .js 文件中，当您想要添加/调用/显示图表时。

    A. 在页面开头添加此数据。

    ```
    FusionCharts.setCurrentRenderer('javascript'); 
                                var paymentchart = new FusionCharts("Column2D.swf", "ChartId_flash", "440", "400", "0", "1" );
                                paymentchart.setXMLData( dataStringCredit );
                                paymentchart.render("divagingchart"); 
    ```

    B. Add This Where 图表显示。

    ```
    items:[{
        html: '<div id="divagingchart"></div>'
    }] 
    ```

4.  你的图表看起来像这样。

![在此处输入图像描述](../Images/a99eef14d6b0b62729bc843ec789529c.png)

# elasticsearch - 如何在弹性搜索中索引数据

> ID：12426780
> 
> 赞同：4
> 
> 时间：2012-09-14T14:42:45.470
> 
> 标签：elasticsearch, information-retrieval

我是信息检索领域的新手。我的任务是将 txt 格式的大型原始数据索引到 elasticsearch 中。我已经抓取了我的数据并将其存储到磁盘上。
现在我安装了 elasticsearch（0.19.9，我使用的是 windows xp。我设置了 java_home 变量并运行了 elasticsearch.bat）。安装 elasticsearch 后，我`http:/localhost:9200`在浏览器上进行了测试并得到了响应。现在，如果我尝试通过使用 elasticsearch 网站上的帮助来创建索引

```
curl -XPUT http:/localhost:9200/elasticsearch/tweet/1 -d '{
  "post_date": "2009-11-15T14:12:12",
  "message": "Zug Zug",
  "tag": "warcraft"
}' 
```

我收到一个错误，`IndexMissingException[elasticsearch]`. 所以我无法创建索引。我直接点击浏览器，而不是使用 curl。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T15:02:57.870

该`-d`选项是一个 curl 选项，用于将 json 文档作为正文请求发送。此外，elasticsearch 公开了不错的 REST API，这意味着您应该根据您想要执行的操作使用可用的 http 方法。[通过Index API](http://www.elasticsearch.org/guide/reference/api/index_.html)创建索引需要使用 PUT http 方法。您确实需要使用 REST http 客户端才能在 elasticsearch 中索引数据。

之后，如果您确实需要，可以直接从浏览器中查询。您可以通过[URIRequest](http://www.elasticsearch.org/guide/reference/api/search/uri-request.html)或使用提供的[Query DSL](http://www.elasticsearch.org/guide/reference/query-dsl/)并使用`body`参数传递查询，而不是在请求正文中传递它。

# php - 从 Zend 和 PHP 配置对 MySQL 的数据库访问时遇到问题

> ID：12426782
> 
> 赞同：2
> 
> 时间：2012-09-14T14:42:51.153
> 
> 标签：php, mysql, database, zend-framework, connection

我不明白为什么这不起作用。

我想访问我的数据库。我的 application.ini 看起来像这样：

```
resources.db.adapter  = "PDO_MYSQL"
resources.db.params.host = "127.0.0.1"
resources.db.params.dbname = "testdb"
resources.db.params.username = "root"
resources.db.params.password = ""
resources.db.params.charset = "utf8"
resources.db.isDefaultTableAdapter = true 
```

在我的 bootstrap.php 中，我在相关帖子中插入了其他用户之一的帖子：

```
protected function _initRegistry(){

$this->bootstrap('db');
$db = $this->getResource('db');   
$db->setFetchMode(Zend_Db::FETCH_OBJ);   
Zend_Registry::set('db', $db);
} 
```

在 indexAction 内的 IndexController 中，我尝试初始化我的数据库模型

```
$books = new Bibliothek();
/*$bookList*/
$this->view->bibliothek=$books->fetchAll(); 
```

整个网站现在是空白的，没有 indexAction 中的代码我只能得到菜单等等。

去年我尝试了一些较旧的 Zend 版本（现在我使用的是 1.11）我从数据库中获取数据没有问题。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:22:05.770

正如@RockyFord 所说：

如果您的 Zend 应用程序只是呈现一个空白页面，则可能存在错误。生产环境中不会显示错误，因此它们不会泄露有关应用程序的信息。如果 APPLICATION_ENV 是“开发”，Zend 应用程序将显示错误。将以下行插入 /public/.htaccess

```
SetEnv APPLICATION_ENV development 
```

# objective-c - NSMutableDictionary 的字面创建效率是否低于类帮助方法？

> ID：12426786
> 
> 赞同：12
> 
> 时间：2012-09-14T14:43:15.890
> 
> 标签：objective-c, cocoa, objective-c-literals

`NSMutableDictionary`使用构造函数创建一个明显更有效吗

```
[NSMutableDictionary dictionaryWithObjectsAndKeys:@"object1", @"key1", @2, @"key2", nil]; 
```

而不是获取文字的可变副本

```
[@{@"key1":@"object1", @"key2":@2} mutableCopy]; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-14T16:10:01.323

正如杰里米所说；测量，测量，测量......然后如果你有一个真正的问题进行优化。

在不查看源代码的情况下，我可以想到可能的原因，为什么其中任何一个都可能更快，并且答案可能会根据条目数而改变。

然而，真正的问题是，为什么你有一个重要的应用程序架构？很少有应用程序创建如此多的可变字典（或如此大的字典）而导致性能问题。

# php - 在applescript中调用php脚本

> ID：12426787
> 
> 赞同：1
> 
> 时间：2012-09-14T14:43:16.310
> 
> 标签：php, applescript

我想用 applescript 和 alfred 调用一个外部 php 脚本。目前，我使用 php 脚本的 url 打开 Safari。这很烦人。有没有办法在不打开 Safari 的情况下调用 php 脚本？

最好的问候，emha

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:45:37.823

PHP 脚本/命令可以在标准的 shell 提示符下运行：

```
do shell script "php -q " & quoted form of posix path of phpScriptPath 
```

来源：[这里](http://macscripter.net/viewtopic.php?id=27710)

*编辑：*

您可以在 shell 中使用 cURL，并转储输出。这有点像 ping 你的脚本，我猜这就是你想要做的。只需替换`http://www.google.com`为脚本的路径即可。如果你省略`>/dev/null 2>&1`，你可以获得 cURL 的输出。这很好，因为您可以向 curl 添加标志以显示标题、发布/获取等。

```
do shell script "curl http://www.google.com >/dev/null 2>&1" 
```

# php - htaccess 拒绝所有人的安全性如何

> ID：12426790
> 
> 赞同：2
> 
> 时间：2012-09-14T14:43:20.530
> 
> 标签：php, security, .htaccess

我有一个文件，除了我自己的服务器（通过 php 请求），我不想被任何人访问。我在我的 .htaccess 中使用以下内容：

```
<Files myfile.xml>
    Order Deny,Allow
    Deny from all
    Allow from localhost
</Files> 
```

但想知道，这有多安全？无论如何，有人可以解决这个问题并直接访问文件吗？在我的 php 文件中，我有：

```
simplexml_load_file("myfile.xml") 
```

获取数据并使用

```
if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') 
```

所以没有人可以直接访问该文件（仅通过 Ajax） 你们如何看待使用这种方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T14:46:07.597

由于您直接命名一个文件，因此只有当它`myfile.xml`是获取该文件的唯一方法时才是安全的。如果某人对您的服务器具有 shell 级别访问权限，并且可以使用不同的名称创建指向该文件的硬链接，例如`ln myfile.xml heehee.txt`，那么他们将能够获取文件的内容 vi `heehee.txt`，因为他们没有通过 'myfile .xml'。

最佳做法是将文件完全保留在文档根目录之外。这并不能阻止符号链接/硬链接攻击，但它确实阻止了某些绕过攻击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T14:46:43.087

如果您在脚本中读取文件，则根本不会通过 Apache，因此您甚至不允许使用 localhost。简单地否认一切，仅此而已。

（加上其他关于最佳位置的答案不在文档根目录中 - 如果您的权限不允许您将文件放在其他位置，则仅使用全部拒绝，例如您有一个有效的基本限制）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T14:47:30.703

> 无论如何，有人可以解决这个问题并直接访问文件吗？

简而言之，不。

是否安全。

这就是为什么发明了**拒绝一切**的原因。

> 大家觉得使用这种方法怎么样？

除非您在本地主机上托管外国 php 代码，否则绝对没有必要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T14:49:18.640

这基本上是网络服务器级别的安全性。如果有另一个漏洞，即通过使用本地文件系统的 SQLI 攻击或一些远程文件包含安全漏洞，你几乎是 pwned。因此，我会考虑加密文件，并将其 acl/chmod 降低到最需要的用户/组，并且大多数服务器/网络托管公司为此类数据提供私有/目录。

# linux - 使用 linux 过滤器程序更改缓冲区文本？

> ID：12426792
> 
> 赞同：0
> 
> 时间：2012-09-14T14:43:34.243
> 
> 标签：linux, vim

我试图弄清楚如何在 Debian stable 上的 gvim 中发出命令，以将缓冲区文本转换为过滤到 jive 中的文本，正如过滤器程序使用的那样。已尝试使用 :r 和其他一些发现的技巧，但似乎都没有真正奏效。我可能遗漏了一些在启示后会很容易的东西。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T15:00:16.900

就这么简单

```
:[range]!jive 
```

Fo' de current line, dig dis:

```
:.!jive 
```

视觉选择：

```
:'<,'>!jive 
```

Fo' de 整个文档，挖掘 dis:

```
:%!jive 
```

哇，这个过滤器太可怕了！快的：`$ sudo port uninstall jive`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:58:57.163

各种过滤器命令记录在 vim 文档的第 4.1 节“过滤器命令”中，可通过`:h filter`.

# vba - .Select、.Activesheet、.Activecell 等...

> ID：12426794
> 
> 赞同：5
> 
> 时间：2012-09-14T14:43:43.957
> 
> 标签：vba, excel

对于这个问题，我参考下面的帖子来澄清一下自己：
[为什么我的条件格式被VBA添加时会偏移？](https://stackoverflow.com/questions/12421029/why-is-my-conditional-format-offset-when-added-by-vba/12424894#12424894)

在我最近看到的许多帖子中，OP 被允许使用 .Activate、.Select、.Offset 等...虽然它们是潜在错误的敞开大门（通常由最终用户引起）。
有时甚至支持该代码。

**我的问题：是否存在一种有效情况，您可以使用这些语句中的任何一个，而没有可用的直接替代方法来捕获由这些 stmts 导致的典型错误？**

我指的是*动态*解决方案，在我看来，这是为 Excel 开发时*必须的。*就个人而言，在超过 6 年的时间里，我不记得我需要它的一个案例。它似乎总是最糟糕的选择之一。在我以前的公司中，永远不要使用它是一条无声的规则，它只会让我的 VBA 生活（以及最终用户的生活）变得更好。

为什么我提出这个问题是因为我认为让 VBA 的新手意识到他们在使用这些语句时所承担的风险是值得的（通过经验证明最终用户做一些意想不到的事情时的风险 - 最终他们没有任何对 VBA 的喜爱）并提出直接的替代方案（我不会说我之前总是这样做，但我的直觉认为，仅仅为已经有 bug 的怪物提供快速解决方案是有问题的）。

我相信，当静默允许时（在这种情况下它会自动增强），开始 VBA 开发人员会以错误的方式创建越来越多的工具（因此新手也会继承这种行为——他们也将从 Stack Overflow 学习，因为谷歌回归他们寻找的结果（！））。
如果开发人员不知道为什么他“可以”使用“选择”以及在什么情况下它是一个潜在的错误，他不应该使用它恕我直言。就个人而言，我可能会在即时窗口中使用 select stmt 对动态范围定义（错误模式）进行一些快速检查，但不是在书面代码中。

结果最终使 VBA 比现在更不受欢迎；如果出现问题，该语言将成为受害者（但恕我直言，它仍然是 Excel 和 Access 应用程序可用的“最佳”编程支持）。我已经在一家 VBA 总是“狗屎”的大公司看到这种情况发生太多次了。

这只是我自己的真实经历。
这不是对与错的问题；我很想听听你对这个问题的看法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T16:40:59.007

我同意 Select and Activate，但不同意 ActiveWorkbook、ActiveSheet 和 ActiveCell（我同意它们被滥用，但不应该避免它们本身）。这些肯定有合法用途。我有一个程序可以从 ActiveCell 自动执行“填充系列”。我的程序无法预测将使用哪些单元格；由用户来选择它。这是用户界面的一部分。

但是，在三种情况下我不得不使用 Select（现在我读到了四种关于缩放的，但我从来没有使用过它）。

1.  条件格式。有一个使用 Application.ConvertFormula 的解决方法，但它比仅存储选择、选择正确的单元格、执行操作并重新选择先前的选择更糟糕。
2.  数据验证。同样的原因。
3.  形状。我希望我能记住细节，但我已经很久没有使用 Shapes 了。如果不先选择形状，有些事情我是做不到的。

摆脱选择和激活的代码是一场崇高的战斗。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T16:12:43.637

Excel 中有一些方法需要激活或 ActiveSheet/ActiveWorkbook 等，因为我有时会遇到问题。目前我唯一记得的是 zoom 属性。缩放仅影响窗口中当前处于活动状态的工作表，因此要缩放所有工作表，您需要类似

```
Sub SetZoom()
Dim ws As Worksheet
    Application.screenupdating = false

    For Each ws In Worksheets
        ws.Select
        ActiveWindow.Zoom = 80
    Next ws

    Application.screenupdating = true
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T19:23:03.637

您可以使用`.Select`来确定运行代码后用户的视图是什么 - 例如，如果您在代码中创建一个新工作簿，但不使用`Activate`或`Select`您的用户可能不知道会发生这种情况。

我经常结束创建新工作簿或其他大规模数据操作的长时间操作

```
FinalViewWorkbook.FinalViewSheet.Range("A1").Select 
```

只是为了通知最终用户一些事情 - “哦，这创建了一个新的报告工作簿！” 等等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-13T13:23:19.033

我认为在这个问题上区分一些是很重要的：

*   `Active`-something：只有在绝对有必要知道用户现在正在处理什么时才使用它。根据我的经验，这通常是数据验证或活动工作表检测（例如“更新用户刚刚按下按钮的工作表”）。
*   `Selection`: 有点像`Active`，只是用来阅读。对于数据验证或“将单元格值解释为路径并在新的资源管理器窗口中打开它”之类的噱头很有用。
*   `Select`, `Activate`: Imho 与 不同`Selection`，因为它实际上更改了选定的单元格、工作表等。*永远不要*使用它来读取或写入数据，因为它使用户只需单击即可弄乱您的程序。用户喜欢点击。仅在代码完成工作后使用它来缩放（请参阅@user3357963 的回答）或清理视图（请参阅@enderland 的回答）。（我不确定，但我认为处理 PageView 也需要 ActiveSheet）。
*   `Select`, `Activate`2nd: 如果你是 VBA 新手，并且正在通过 Macro Recorder 学习，你会发现很多代码是这样生成的：首先`Range("A5").Select`，然后`Selection.Value="NewValue"`. 加入这个`Range("A5").Value="NewValue"`。
*   `Offset`: 就我个人而言，我使用这个命令没有问题`.Offset()`- 我从来没有遇到过这个命令的问题。相反，我认为这是一种方便的方式来表达“此单元格旁边的单元格”，而不必每次都通过“此单元格的表在此单元格的行和列+1”。

> 在我最近看到的许多帖子中，OP 被允许使用 .Activate、.Select、.Offset 等。

我同意这一点。尽管只给出必要的答案以使一段代码工作更容易，但`ActiveCell.Value`应不鼓励使用 等。如果有一个解释清楚的线程可以链接到，这将容易得多，因为这里希望成为:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-13T16:32:41.247

从我的角度来看，除了少数例外，您唯一应该使用的时间`Select`是作为用户输入，并且只有在仔细考虑了替代设计/UI 要求之后。

例如，我会说`Selection`当此方法在代码中继续执行时，通常不建议依靠让用户定义 Range 对象：

```
Dim myRange as Range
Set myRange = Application.InputBox("Select your range", Type:=8) 
```

但是，如果您需要提示用户选择工作表上的特定形状或对象，那么*最好*让他们制作一个`Selection`（但是，如果没有良好的错误处理和逻辑来防止不受欢迎的用户操作...）。

这是我在 PowerPoint 中遇到的一个此类异常的示例。我有一些 RibbonUI XML 和 VBA，它们将按钮添加到`Shapes`PowerPoint 的右键单击上下文菜单中，并将类似的按钮添加到功能区本身。这些是无缝的 UI，可以为最终用户提供更“原生”的应用程序体验——用户希望能够右键单击图表，然后针对选定的图表或表格运行一些宏程序等。他们没有不想按下按钮打开用户表单并滚动浏览通用形状名称或 GUID 的列表框。

过程代码需要检查`Selection`以正确处理它，因此我可以使用如下所示的内容，其中

```
Sub UpdateOrEditSelection(update As Boolean)
'This procedure invoked when user edits/updates a chart.
Dim uid As Variant
Dim sel As Selection
Dim s As Integer
Dim chartsToUpdate As Object
Dim multipleShapes As Boolean
Dim sld As Slide
Set sel = ppPres.Windows(1).Selection

If update Then
    Set chartsToUpdate = CreateObject("Scripting.Dictionary")
    Select Case sel.Type
        Case ppSelectionShapes
            For s = 1 To sel.ShapeRange.count
                uid = sel.ShapeRange(s).Name
                '....
                '...
                '..
                '.
            Next
        Case ppSelectionSlides
            For Each sld In sel.SlideRange
                For s = 1 To sld.Shapes.count
                    uid = sld.Shapes(s).Name
                    '....
                    '...
                    '..
                    '.

                Next
            Next
        Case ppSelectionText
            s = 1
            If sel.ShapeRange(s).HasTable Or sel.ShapeRange(s).HasChart Then
                uid = sel.ShapeRange(s).Name
                '....
                '...
                '..
                '.

            End If
    End Select
 '....
 '...
 '..
 '. 
```

**它从何而来？**

宏记录器。从本质上讲，此功能记录了每个文字用户输入：滚动、选择、查看、激活、默认属性等，到了矫枉过正的地步。虽然这有时会有所帮助，但它确实鼓励那些不知道它很糟糕的人编写糟糕的代码，但我不会在这里强调这一点：

[如何避免在 Excel VBA 宏中使用 Select](https://stackoverflow.com/questions/10714251/how-to-avoid-using-select-in-excel-vba-macros)

**从概念上讲，什么更好？**

直接对对象进行编程。如果您只是使用 VBA 来模拟击键和鼠标点击，那么您做错了。

**例外：**

我发现在将格式应用于图表中的系列数据时，`Select`有时是必要的。这似乎 IMO 是 Excel 的一个错误，而不是设计功能。

其他应用程序（因为 VBA*不仅仅是*Excel）：

*   Word 是一种不同的动物，它更多地依赖于 Selection 对象
*   在 PowerPoint 中，有些操作只能在应用程序和幻灯片/形状可见或以其他方式显示时才能执行。虽然您通常不需要“选择”任何东西，但它确实需要更繁琐的代码。

我在我的应用程序中找到了这个片段：

```
 Set tb = cht.Shapes.AddTextbox(msoTextOrientationHorizontal, ptLeft, tBoxTop, ptWidth, ptHeight)
    tb.Select  '<--- KEEP THIS LINE OTHERWISE TEXTBOX ALIGNMENT WILL NOT WORK ## ## ## 
```

和这个：

```
 'PPT requires selecting the slide in order to export an image preview/jpg
sld.Select
ppPres.Windows(1).View.GotoSlide sld.SlideIndex
sld.Shapes(1).Chart.Export imgPath, ppShapeFormatJPG 
```

而这个，处理单个`Point`对象：

```
 pt.Select
        pt.format.Line.Visible = msoTrue
        pt.format.Line.Visible = msoFalse
        pt.MarkerSize = pt.MarkerSize + 2 
```

这不是一个详尽的列表，只是我发现的一些例外示例。虽然这些来自 PowerPoint，但 PowerPoint 中的图表使用与 Excel 相同的对象模型，因此如果其中一些也需要在 Excel 和 Word 中被破解，我不会感到惊讶。

*   Outlook：我对 Outlook 做的不多，它很像 Word，实际上在 Inspector 中使用 Word 对象模型，但我对 Outlook 所做的很少依赖于 ActiveInspector 等。

Word 或 PowerPoint 都不再有“宏记录器”（实际上，我认为 Word 可能会，但它太无能以至于无用），当大多数人在其他应用程序中进行任何开发时，他们已经弄清楚了大部分.

# google-maps - Google Places 以 2 秒的间隔返回 60 个项目

> ID：12426796
> 
> 赞同：1
> 
> 时间：2012-09-14T14:43:51.490
> 
> 标签：google-maps, google-maps-api-3, google-places-api

我添加了一个分页，但现在它显示 20 个位置然后等待 2 秒，显示另外 20 个位置并再次等待几秒钟。我读到谷歌在 nextPage 调用之间增加了延迟。如果有办法消除这种延迟并一次性显示 60 个位置，我会很高兴

```
this.service.search(request, function(results, status, pagination) {
            self.addPlaces(results, status, pagination);

            if (pagination.hasNextPage) {
                // sleep:0; this doesn't effect anything
                pagination.nextPage();
            }                           
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:19:15.550

没有办法消除这种延迟，但一个转变是向用户显示进度条或在向用户显示之前预取。你可以看到我的[答案](https://stackoverflow.com/a/12824796/1147466)，我正在使用 AsyncTask 在后台调用请求方法并显示一个进度条，直到它获取所有 60 个结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T07:22:26.583

无法消除额外页面请求之间的两秒延迟。这是由于数据提供商限制开发人员一次只能显示 20 个结果，除非用户请求更多结果。

如 Google Maps Javascript API v3 [Places Library Documentation](https://developers.google.com/maps/documentation/javascript/places#PlaceSearchPaging)所述：

> *“必须先显示每一页结果，然后再显示下一页结果。”*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:27:25.517

减少调用不仅坚持 20 个结果，而且考虑在查询上添加延迟是有利的。添加 500 毫秒的延迟使我参与的项目的请求减少了 20%。

# php - imap_headerinfo 不起作用

> ID：12426801
> 
> 赞同：1
> 
> 时间：2012-09-14T14:44:28.200
> 
> 标签：php, imap

我一直试图让这个工作大约一个星期。我只是想检索发件人、主题和日期。我在网上查看过，但所有示例都显示循环而不是单个电子邮件。

我已将我的代码精简到最低限度，以向您展示我是多么的垃圾。请任何人都可以帮忙，我相信其他新手一定有同样的问题。

这不会返回任何内容，为什么？我搞不定。必须是简单的，因为我可以让概览页面（它遍历收件箱中的所有消息）正常工作。

多么烦人。

```
$host       = 'mydomain.com';       
$login      = 'username';
$password       = 'password';
$connect        = '{mydomain.com:143/novalidate-cert}#';

$server         = str_replace('localhost', $host, $connect);
$server         = str_replace('#', $folder_start, $server);
$connection = imap_open($server, $login, $password) or senderror("ERROR 1: can't connect: " . imap_last_error(),$email_errors);

$uid            = $_GET['id'];

$header         = imap_headerinfo($connection, $uid);
$body           = imap_body($connection, $uid, FT_UID);

<table>
     <tr>
          <td>From:</td>
          <td><?php echo $header->from; ?></td>
     </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-19T08:28:29.343

headerinfo 使用不正确，它使用 msgno 而不是 uid。

参考： http: [//php.net/manual/en/function.imap-headerinfo.php](http://php.net/manual/en/function.imap-headerinfo.php)

# wordpress - Timthumb：找不到您指定的内部图像

> ID：12426802
> 
> 赞同：3
> 
> 时间：2012-09-14T14:44:27.743
> 
> 标签：wordpress, timthumb

我在使用此版本的 Timthum 时遇到以下问题：2.8.10（在 Wordpress 安装上运行 - 服务器 Ubuntu）：

**- 当我从托管网站的服务器调用图像时，出现此错误：**

发生 TimThumb 错误 发生以下错误：

```
Could not find the internal image you specified. 
```

查询字符串：src=http://my-host.it/wp-content/files_mf/1346848579prog_no_pic.png TimThumb 版本：2.8.10

如果我在浏览器中复制/粘贴[http://my-host.it/wp-content/files_mf/1346848579prog_no_pic.png](http://my-host.it/wp-content/files_mf/1346848579prog_no_pic.png)我可以获得图像...

**- 当我从外部站点调用图像时，它工作正常。** 我已启用：

```
define ('ALLOW_ALL_EXTERNAL_SITES', TRUE); 
```

在第 33 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:27:22.893

对我来说，由于我的虚拟主机设置，文档根目录的设置不正确。

我必须在其中添加正确的`timthumb-config.php`

```
define('LOCAL_FILE_BASE_DIRECTORY', "/home/www/mysite/"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-04T20:39:44.113

这两个步骤对我有用：

*   在 ~33 行中设置为*真*ALLOW_ALL_EXTERNAL_SITES：

`if(! defined('ALLOW_ALL_EXTERNAL_SITES') ) define ('ALLOW_ALL_EXTERNAL_SITES', TRUE);`

*   评论行~212

`//$this->src = preg_replace('/https?:\/\/(?:www\.)?' . $this->myHost . '/i', '', $this->src);`

* * *

来源： [https ://code.google.com/p/timthumb/issues/detail?id=363#c23](https://code.google.com/p/timthumb/issues/detail?id=363#c23)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T22:07:27.560

我在 WordPress (3.5.1) 的多站点安装中遇到了同样的问题。以下修复了它：

在*functions.php*中改变

```
function get_image_url($img_src="") {
if($img_src!="") $theImageSrc = $img_src;
else $theImageSrc = wp_get_attachment_url(get_post_thumbnail_id($post_id));
global $blog_id;
if (isset($blog_id) && $blog_id > 0) {
    $imageParts = explode('/files/', $theImageSrc);
    if (isset($imageParts[1])) {
        $theImageSrc = '/blogs.dir/' . $blog_id . '/files/' . $imageParts[1];
    }
}
echo $theImageSrc; 
```

}

至

```
function get_image_url($img_src="") {
if($img_src!="") $theImageSrc = $img_src;
else $theImageSrc = strstr(wp_get_attachment_url(get_post_thumbnail_id($post_id)), "/wp-content");
global $blog_id;
if (isset($blog_id) && $blog_id > 0) {
    $imageParts = explode('/files/', $theImageSrc);
    if (isset($imageParts[1])) {
        $theImageSrc = '/blogs.dir/' . $blog_id . '/files/' . $imageParts[1];
    }
}
echo $theImageSrc; 
```

}

*注意：*唯一实际的修改发生在第 3 行（粗体）： $theImageSrc = **strstr(** wp_get_attachment_url(get_post_thumbnail_id($post_id)) **, "/wp-content")** ;

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T00:37:31.130

我刚刚解决了这个问题，就我而言，这与文件路径中包含波浪号有关。

这是我找到的解决方案的链接：

[http://elementdesignllc.com/2012/01/how-to-fix-timthumb-using-a-virtual-directory-url-contains-tildes/comment-page-1/#comment-7418](http://elementdesignllc.com/2012/01/how-to-fix-timthumb-using-a-virtual-directory-url-contains-tildes/comment-page-1/#comment-7418)

！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T22:33:04.980

首先让我知道您在使用 WordPress Multisite 吗？如果是，那么您不需要在 timthumb.php 中编辑任何内容，我喜欢它

这就是我为使 timthumb 与多站点一起工作所做的工作。您需要将此代码添加到主题的 functions.php 文件中

```
<?php function get_image_path($src) {
global $blog_id;
if(isset($blog_id) && $blog_id > 0) {
$imageParts = explode('/files/' , $src);
if(isset($imageParts[1])) {
$src = '/blogs.dir/' . $blog_id . '/files/' . $imageParts[1];
}
}
return $src;
}
?> 
```

然后在主题中使用timthumb脚本的地方，需要修改成这样：

```
<img src="<?php bloginfo('template_url'); ?>/includes/timthumb.php?q=100&w=180&h=200&zc=1&a=t&src=<?php echo get_image_path(get_post_meta($post->ID, 'postImage', true)); ?>" alt="" /> 
```

其中 postImage 是包含图像 URL 的元字段的名称。

有一个很好的。

# java - Guava - 如何应用在 Iterable 上返回 Void 的函数

> ID：12426803
> 
> 赞同：13
> 
> 时间：2012-09-14T14:44:31.690
> 
> 标签：java, functional-programming, guava

我只是想知道应用返回的函数的最佳方法`Void`是`Iterable/Collection`什么？

我的用例是：

*   我有一个`Animal`对象列表
*   我想调用列表中的每个动物的`eat()`功能

我有一个`Function<Animal,Void>`电话`input.eat();`

事实证明，当我打电话时：

```
Collections2.transform(animalList,eatFunction); 
```

我觉得这不是很优雅，因为我不是在寻找转换，而只是寻找没有任何输出的应用程序。最糟糕的是，它甚至不起作用，因为 Guava 转换正在返回视图。

工作正常的是：

```
Lists.newArrayList( Collections2.transform(animalList,eatFunction) ); 
```

但这并不优雅。以 Guava 的功能方式将 Void 函数应用于 Iterable/Collection 的最佳方法是什么？

**编辑**：

*   相关问题：[Guava 中 Supplier<T> 的逆](https://stackoverflow.com/questions/14702380/inverse-of-suppliert-in-guava)
*   同样正如 Dzik 指出的那样，如果您使用的是 Java8 而不是 Guava，则有 Consumer 类：[https ://stackoverflow.com/a/32222080/82609](https://stackoverflow.com/a/32222080/82609)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-14T18:20:03.217

你觉得哪个更优雅？一个普通的旧 for 循环：

```
for (Animal animal : animalList)
    animal.eat(); 
```

还是“通过以功能样式编写程序操作来弯曲程序语言”的疯狂？

```
static final Function<Animal, Void> eatFunction = new Function<Animal, Void>() {
    @Override
    public Void apply(Animal animal) {
        animal.eat();
        return null; // ugly as hell, but necessary to compile
    }
}

Lists.newArrayList(Collections2.transform(animalList, eatFunction)); 
```

我会投票支持第一个案例。

如果您真的想以函数式风格编写程序，我建议您切换到另一种 JVM 语言。

**对于这种情况，**Scala可能是一个不错的选择：****

 **```
animalList.foreach(animal => animal.eat) 
```

甚至使用`_`占位符的更短的变体：

```
animalList.foreach(_.eat) 
```

## 编辑：

在 Eclipse 中尝试了代码后，我发现我必须将`return null`语句添加到`eatFunction`，因为 1)与 2)`Void`不一样，`void`并且它是不可实例化的。比想象中的还要丑！:)

同样从性能的角度来看，使用上面的一些复制构造函数调用惰性函数也会毫无意义地分配内存。创建一个`ArrayList`大小与`animalList`仅填充空值相同的值，只是为了立即进行垃圾收集。

如果你真的有一个用例，你想传递一些函数对象并将它们动态地应用于一些集合，我会编写自己的函数接口和一个 foreach 方法：

```
public interface Block<T> {
    void apply(T input);
}

public class FunctionUtils {
    public static <T> void forEach(Iterable<? extends T> iterable,
            Block<? super T> block) {
        for (T element : iterable) {
            block.apply(element);
        }
    }

} 
```

然后您可以类似地定义一个`void`（小写）函数：

```
static final Block<Animal> eatFunction = new Block<Animal>() {
    @Override
    public void apply(Animal animal) {
        animal.eat();
    }
}; 
```

并像这样使用它：

```
FunctionUtils.forEach(animalList, eatFunction);
// or with a static import:
forEach(animalList, eatFunction); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-26T08:54:14.250

我只是在寻找同样的东西，并找到了一个 Java Consumer 接口。在您的情况下，它将是：

```
final Consumer<Animal> action = new Consumer<Animal>() {
    @Override
    public void accept(Animal animal) {
        animal.eat();
    }
};    
...
FluentIterable.from(animals).forEach(action); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-14T17:56:26.560

正如其他人指出的那样，Guava 团队有一个观点，阻止这样做。如果您正在寻找其他类似函子的 API 来做您想做的事，您可以查看[Functional Java 的`Effect`](http://functionaljava.googlecode.com/svn/artifacts/3.0/javadoc/fj/Effect.html)，或[Jedi 的`Command`类](http://jedi.codehaus.org/javadoc/jedi/functional/Command.html)，或[Play！framework`F.Callback`](http://www.playframework.org/documentation/api/2.0/java/play/libs/F.Callback.html)或[Commons Collections4 的`Closure`](http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/Closure.html)[稍后编辑：] 或基于[Java 8+`Consumer`](https://docs.oracle.com/javase/8/docs/api/java/util/function/Consumer.html)的接口。**

# axapta - 将 runBaseBatch 类创建的文件保存在远程目录中

> ID：12426804
> 
> 赞同：0
> 
> 时间：2012-09-14T14:44:34.057
> 
> 标签：axapta, dynamics-ax-2009, x++

我写了一个使用 salesQuotation 报告生成 pdf 文件的作业，这些文件是在网络目录中创建的。这份工作很好。

然后，我编写了一个与工作相同但在 runBaseBatch 类中的类。

它不起作用，我在批处理作业表单注册表按钮中有以下错误消息：

> 此服务器禁止使用打印机

如果服务器是 AOS，我上面有工作的打印机，创建的文件写在另一个有工作打印机的服务器上

我使用了 reportRun 类和 printJobSettings() 方法，它适用于作业而不是批处理作业。

编辑：感谢您的回答，我的配置现在正常，但我有以下问题：我的 runbasebatch 类仅在未在配置 runbaseBatch 对话框中选中复选框批次时才有效，我无法安排我的批次，如果我检查批次，我没有错误，但我的文件没有生成。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T16:14:26.883

阅读如何[从运行应用程序对象服务器的计算机启用打印](http://technet.microsoft.com/en-us/library/aa569633%28v=ax.50%29.aspx)。

[在AX 问答](http://ax2009.wordpress.com/2010/04/13/print-report-from-batch-jobs/)中补充此博客条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T15:52:30.270

您需要确保服务器配置实用程序中的“允许客户端连接到此服务器上的打印机”复选框已被勾选，并且 AOS 已重新启动。

我在某处读到，由于一些错误，应该调整注册表中的相应值，但我建议先检查勾选复选框是否有效。

# php - 如何加载和保存用户的 Facebook 个人资料图片

> ID：12426805
> 
> 赞同：0
> 
> 时间：2012-09-14T14:44:36.037
> 
> 标签：php, facebook, facebook-graph-api

我想要用户头像的直接链接

我有以下代码

```
 $img = file_get_contents("https://graph.facebook.com/" . $fid . "/picture?type=large");
    $file = dirname(__file__). "/" . $fid . ".jpg";
    file_put_contents($file, $img); 
```

但是`https://graph.facebook.com/" . $fid . "/picture?type=large`有一个重定向。我如何遵循重定向？有什么方法可以通过 file_get_contents 做到这一点？我知道我可以通过`curl`但它似乎很复杂我得到了错误，`safe_mode`我不知道如何关闭它。

感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:06:59.803

她是我正在使用的代码，它非常适合我。它还将图片保存到我的服务器，这样我就有了一个本地 URL（然后可以将其发布回同一用户的个人资料或另一个用户/页面/事件/等的墙上）您所要做的就是放置它在你的代码中 $user 有一个值，它应该可以正常工作。

```
<?
$uid = $user;

function GetTheImage($linky) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_POST, 0);
    curl_setopt($ch, CURLOPT_URL, $linky);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    # ADDED LINE:
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    $result = curl_exec($ch);
    curl_close($ch);
    return $result;
}

$userpicture = "http://graph.facebook.com/$uid/picture?type=large";

$sourceurl = GetTheImage($userpicture);

$save = fopen("/home/arose/public_html/mydomain.com/tmp/$uid-large.jpg", "w"); //this is name of new file that i save
fwrite($save, $sourceurl);
fclose($save);

?>

<html>
<head>

</head>
<body>

<img src="./tmp/<? echo $uid; ?>-large.jpg" />

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:54:16.160

您应该能够通过 file_get_contents 进行重定向，方法是为其提供第三个参数`$context`——在该参数中将[HTTP 上下文选项](http://www.php.net/manual/en/context.http.php) `follow_location`设置为 1。

（虽然这应该已经是默认设置了，并且在我的测试中，图像数据已经单独使用 file_get_contents 了。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-13T09:26:58.660

```
<?php
$fbid=$user_profile['id'];
 $pic = file_get_contents("https://graph.facebook.com/$fbid/picture?type=large");
 $filename = $fbid.".jpg";
$path="images/".$filename;
 file_put_contents($path, $pic);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-04T14:48:55.903

```
 curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);

function curl_redir_exec($ch)
    {
        static $curl_loops = 0;
        static $curl_max_loops = 20;
        if ($curl_loops++ >= $curl_max_loops)
        {
            $curl_loops = 0;
            return FALSE;
        }
        curl_setopt($ch, CURLOPT_HEADER, true);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        $data = curl_exec($ch);
        @list($header, $data) = @explode("\n\n", $data, 2);
        $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
        if ($http_code == 301 || $http_code == 302)
        {
            $matches = array();
            preg_match('/Location:(.*?)\n/', $header, $matches);
            $url = @parse_url(trim(array_pop($matches)));
            if (!$url)
            {
                //couldn't process the url to redirect to
                $curl_loops = 0;
                return $data;
            }
            $last_url = parse_url(curl_getinfo($ch, CURLINFO_EFFECTIVE_URL));
            if (!$url['scheme'])
                $url['scheme'] = $last_url['scheme'];
            if (!$url['host'])
                $url['host'] = $last_url['host'];
            if (!$url['path'])
                $url['path'] = $last_url['path'];
            $new_url = $url['scheme'] . '://' . $url['host'] . $url['path'] . (@$url['query']?'?'.$url['query']:'');
            return $new_url;
        } else {
            $curl_loops=0;
            return $data;
        }
    }

    function get_right_url($url) {
        $curl = curl_init($url);
        curl_setopt($curl, CURLOPT_HEADER, false);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
        return curl_redir_exec($curl);
    }

        $url = 'http://graph.facebook.com/' . $fbid . '/picture?type=large';

        $file_handler = fopen('img/avatar/'.$fbid.'.jpg', 'w');
        $curl = curl_init(get_right_url($url));
        curl_setopt($curl, CURLOPT_FILE, $file_handler);
        curl_setopt($curl, CURLOPT_HEADER, false);
        curl_exec($curl);

        curl_close($curl);
        fclose($file_handler); 
```

# java - 无法让 Maven 与 Nexus OSS 一起工作

> ID：12426808
> 
> 赞同：2
> 
> 时间：2012-09-14T14:44:44.860
> 
> 标签：java, eclipse, maven, nexus

我刚刚在我们的一台开发机器上安装了 Nexus 2.1.2，我想将它用作中央存储库的代理，以及我们的快照和发布的内部存储库。我尝试按照 Sonatype 的示例进行设置，但我的 POM 中不断出现一堆错误（我使用的是 Eclipse 和 m2e）。以下是错误：

> 在当前项目和插件组 [] 中没有找到前缀“war”的插件，可从存储库 [local (C:\Users\jwolinsk.m2\repository)、nexus (http://xxxxxxdev9:8081/nexus/内容/存储库/组/公共）]
> 
> 在当前项目和插件组 [] 中找不到前缀“war”的插件，可从存储库 [local (C:\Users\jwolinsk.m2\repository)、nexus (http://jc1lkddev9:8081/nexus/内容/存储库/组/公共）]

这是我的 settings.xml：

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.1.0 http://maven.apache.org/xsd/settings-1.1.0.xsd">
    <proxies>
        <proxy>
            <active>true</active>
            <protocol>http</protocol>
            <port>8080</port>
            <host>xxxxprxy2</host>
            <nonProxyHosts>localhost|127.0.0.1</nonProxyHosts>
            <id>httpProxy</id>
        </proxy>
    </proxies>
    <mirrors>
        <mirror>
            <id>nexus</id>
            <mirrorOf>*</mirrorOf>
            <url>http://xxxxxdev9:8081/nexus/content/repositories/groups/public</url>
        </mirror>
    </mirrors>
    <profiles>
        <profile>
            <id>local</id>
            <repositories>
                <repository>
                    <id>central</id>
                    <url>http://central</url>
                    <releases><enabled>true</enabled></releases>
                    <snapshots><enabled>true</enabled></snapshots>
                </repository>
            </repositories>
            <pluginRepositories>
                <pluginRepository>
                    <id>central</id>
                    <url>http://central</url>
                    <releases><enabled>true</enabled></releases>
                    <snapshots><enabled>true</enabled></snapshots>
                </pluginRepository>
            </pluginRepositories>
        </profile>
    </profiles>
    <activeProfiles>
        <activeProfile>local</activeProfile>
    </activeProfiles>
</settings> 
```

这是我的 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.ks</groupId>
    <artifactId>kdweb</artifactId>
    <name>kdweb</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>
    <parent>
        <groupId>org.sonatype.oss</groupId>
        <artifactId>oss-parent</artifactId>
        <version>7</version>
    </parent>
    <properties>
        <org.springframework-version>3.1.2.RELEASE</org.springframework-version>
        <org.slf4j-version>1.5.10</org.slf4j-version>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
            <exclusions>
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>com.ks</groupId>
            <artifactId>acommons</artifactId>
            <version>0.0.1-SNAPSHOT</version>
        </dependency>
        <dependency>
            <groupId>com.ks</groupId>
            <artifactId>aggregation-common</artifactId>
            <version>0.0.1-SNAPSHOT</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.2.2</version>
        </dependency>
        <dependency>
            <groupId>commons-pool</groupId>
            <artifactId>commons-pool</artifactId>
            <version>1.6</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-core-asl</artifactId>
            <version>1.9.9</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.9</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-asm</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-expression</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>commons-digester</groupId>
            <artifactId>commons-digester</artifactId>
            <version>2.1</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.ks.thirdparty</groupId>
            <artifactId>jconn</artifactId>
            <version>3</version>
        </dependency>
        <dependency>
            <groupId>com.ks</groupId>
            <artifactId>framework-common</artifactId>
            <version>0.0.1-SNAPSHOT</version>
        </dependency>
        <dependency>
            <groupId>com.ks.thirdparty</groupId>
            <artifactId>ojdbc6_g</artifactId>
            <version>1.0</version>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <additionalProjectnatures>
                        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                    </additionalProjectnatures>
                    <additionalBuildcommands>
                        <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                    </additionalBuildcommands>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArgument>-Xlint:all</compilerArgument>
                    <showWarnings>true</showWarnings>
                    <showDeprecation>true</showDeprecation>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <configuration>
                    <mainClass>org.test.int1.Main</mainClass>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T15:34:13.900

你可以试试这个：

```
<mirror>
    <id>nexus-local</id>
    <url>http://xxxxxx:8081/nexus/content/groups/public/</url>
    <mirrorOf>external:*</mirrorOf>
</mirror>
<mirror>
    <id>nexus.snapshots-local</id>
    <url>http://xxxxx:8081/nexus/content/repositories/snapshots/</url>
    <mirrorOf>snapshots</mirrorOf>
</mirror> 
```

否则，您是否检查过您的 Nexus 中的库是否已正确下载。您可能在 nexus 中遇到网络问题，因此它无法访问 Web 和下载插件、依赖项。

如果您在代理后面，则需要在 Nexus 中配置它：

管理 --> 服务器 --> 默认 HTTP 代理设置

![在此处输入图像描述](../Images/11d9ec2404eea32eec8c4c054f94f92c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T04:59:20.980

我会首先摆脱您设置中的代理部分。然后确保您可以从您的开发机器连接到您的 Nexus 实例。最后，通过在 Nexus 中配置代理设置，确保您的 Nexus 可以访问中央存储库以及您想要代理的任何其他内容。

Nexus 不会考虑您的 settings.xml 中的代理设置（因为它们是您机器的本地设置，而不是没有意义的 Nexus 服务器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T17:51:58.400

要检查您的nexus OSS安装是否可以访问网络，您可以以管理员身份登录，然后打开`Repositories`（单击左侧“存储库”），然后选择默认`Central`存储库，然后在下方视图中选择`Browse Remote`选项卡，最后选择`Refresh`按钮。它应该向您显示中央存储库中可用的所有组件（即您的关系可以连接到网络）。（注意：这个贡献应该是评论，但我还不能评论）。

# eclipse - eclipse 无法启动 - 没有找到 java 虚拟机

> ID：12426810
> 
> 赞同：102
> 
> 时间：2012-09-14T14:44:48.270
> 
> 标签：eclipse, java

Eclipse 昨天运行良好（自从我大约一年前安装它以来一直运行良好）。现在突然间我在启动时收到以下错误：

```
"A Java Runtime Environment (JRE) or Java Development Kit (JDK) must be available in order to run Eclipse. No Java virtual machine was found after searching the following locations:
C:\Program Files\eclipse\jre\bin\javaw.exe
javaw.exe in your current PATH" 
```

我没有在我的机器上更改任何与 Eclipse/Java 相关的内容，但是昨天我的机器上应用了 Windows 更新，所以也许这与它有关（但我没有看到任何会影响 Java 的东西）。我查看了所有其他关于在 PATH 中添加内容或将 -vm 选项添加到 Eclipse ini（无法使其正常工作）或将 jre 文件夹复制到 eclipse\jre（这有效但没有似乎是一个很好的长期解决方案）。所以我真的想弄清楚如何让事情回到“默认”设置而不会搞砸。

我在跑`Windows 7, Eclipse Helios and Java 1.6.0_26.`

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2012-09-14T14:52:52.603

解决此问题的两种方法。

*   **推荐方式**：在您的`eclipse.ini`文件中确保您将 -vm 指向您的 jdk 安装。更多关于这个[here](http://wiki.eclipse.org/Eclipse.ini#-vm_value:_Windows_Example)。确保`-vm`在该`-vmargs`部分之前添加。

*   `vm`从命令行传入标志。[http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse%3F#Find_the_JVM](http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse%3F#Find_the_JVM)

*注意*：Eclipse 不参考 JAVA_HOME 环境变量。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-06-19T05:36:58.500

确保 Java 版本和 Eclipse 属于同一架构。所以为 64 位 eclipse 安装 64 位 java。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-03-17T14:12:10.383

**日食.ini：**

```
--launcher.defaultAction  
--launcher.XXMaxPermSize  
256M  
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize<br/>
256m  
--launcher.defaultAction  
openFile  
-showsplash  
org.eclipse.platform
-vm
C:\Program Files\Java\jdk1.7.0_21\jre\bin\server\jvm.dll<br/>
--launcher.XXMaxPermSize  
256m  
--launcher.defaultAction  
openFile  
-vmargs  
-Dosgi.requiredJavaVersion=1.7 
```

这对我有用。它不必在开头，但肯定不能在文件末尾。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-05-21T12:05:24.807

就我而言，我缺少一些东西。我没有安装 64 位的 JDK 和 JRE，而 Eclipse 是 64 位版本。一旦完成并在 PATH 变量中设置了 JDK\bin 路径，eclipse 工作正常:)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-03-10T14:04:00.890

`eclipse.ini`除了打开文件`eclipse.exe`

粘贴

```
-vm
C:\Program Files\Java\jdk1.7.0_21\jre\bin\server\jvm.dll 
 //find it if you are having another JDK version. 
```

在第一行。**你很高兴。**

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-07-11T17:02:31.240

更新java后我遇到了同样的问题。然后我粘贴

```
-vm
C:\Program Files\Java\jre6\bin\javaw.exe 
```

显示文件中的`javaw.exe`路径`eclipse.ini`。

希望这会帮助你。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-02-22T14:06:41.567

我有同样的问题。我的情况是我安装的一个程序破坏了 PATH 环境变量。

所以检查你的 PATH 环境变量。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-05-28T17:23:05.070

设置 Java 路径后，如果您无法打开 Eclipse，请执行以下步骤：

1.  转到您提取 Eclipse 的 Eclipse 文件夹。

[![在此处输入图像描述](../Images/7f32e1b67fb56813495d60dbbb58e5a8.png)](https://i.stack.imgur.com/7MmNU.png)

2.  在记事本中打开 Eclipse 文件（默认会在记事本上打开）

输入两行

```
-vm
C:/Program Files/Java/jdk-11.0.2/bin/javaw.exe 
```

**jdk-11.0.2，应该是你的Java版本，通过上面的位置可以得到。**

[![在此处输入图像描述](../Images/e6209a9990d51da0633fe0f8cf157235.png)](https://i.stack.imgur.com/01Rpt.png)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-01-16T14:17:58.573

第一的

检查您是否同时安装了 java 32 和 64 位

在 Windows 上设置路径

视窗 8

将鼠标指针拖到屏幕的右下角

单击搜索图标并输入：控制面板

点击 -> 控制面板 -> 系统 -> 高级

单击环境变量，在系统变量下，找到 PATH，然后单击它。

在“编辑”窗口中，通过将类的位置添加到 PATH 的值来修改 PATH，或者只是确保变量名称全部大写

如果您没有 PATH 项，您可以选择添加新变量并添加 PATH 作为名称和类的位置作为值。

关闭窗口。

重新打开命令提示符窗口，然后运行您的 java 代码。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-09-14T07:44:10.120

***通过 Puppet ATG 安装 Centos。***

**错误：**

无法从您的 PATH 中找到 Java 虚拟机

**解决方案：**

清除变量**：**

**$java_home="/opt/oracle/product/java/jdk1.8.0_45/bin"**

添加这个**“{$java_home}”** Java Exec

```
require common, java
Exec {
    path => [ "${java_home}", "/usr/bin", "/bin", "/usr/sbin", "${temp_directory}"]
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-05-11T15:12:02.293

在**Centos 7**`yum upgrade`上，我通过更改 in 的设置解决了这个问题（在 big 之后） `vm`：

`~/eclipse/java-oxygen/eclipse/eclipse.ini`

到：

```
-vm
/etc/alternatives/jre/bin 
```

（它总是指向最新安装的`java`）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-09-04T21:25:28.073

尝试下载并安装 32 位版本的 Java，然后设置路径 :)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-09-05T12:57:37.323

是的，它现在发生在我身上。转到 Oracle 站点，然后搜索 Java SDK。确保使用与 Eclipse 相同的架构（x86、x64）。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-08-20T09:01:11.590

这也发生在我身上。我发现 C:\Windows\System32 中的 javaw.exe 在 Windows 更新后被删除了。再复制一次，Eclipse 开始一切正常。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-08-25T07:28:09.327

Chek os、eclipse 和 java 是 32 位还是 64 位

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-09-29T18:19:51.517

您还可以将您的 JRE 文件夹复制到 eclipse 目录，它可以正常工作

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-12-25T14:13:50.743

由于更新了 Java 版本（从 60 到 66），我的机器上出现了问题。要特别注意它。如上所述想补充

在这个文件**eclipse.ini**中，你可以在安装 eclipse 的地方找到**-vm** example C:\Program Files\Java\jre1.8.0_ **66** \bin

现在尝试打开这个位置，万一打不开，说明有问题。在我的情况下，安装的版本是 jre1.8.0_ **60**。所以有一个可能不明显的小差异（66而不是60）。更新一下就可以打开了。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-11-18T03:38:31.037

我今天遇到了同样的问题，正确配置了 PATH 等。它可以从命令行打开，现在只需双击即可。

现在它正在工作，只需“**以管理员身份运行**”:)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-12-02T08:52:15.820

有时当您的 Java 文件夹更新时会发生这种情况。

打开 Eclipse 文件夹并搜索文件 eclipse.ini。打开 eclipse.ini 文件并检查 jre 版本是否与您的 java 文件夹中可用的 jre 相同。

当我的 jre 从 jre1.8.0_101 更改为 jre1.8.0_111 时，我遇到了同样的问题。

**C:\Program Files\Java\jre1.8.0_101\bin 到 C:\Program Files\Java\jre1.8.0_111\bin**

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-02-20T10:01:15.307

就我而言，问题是路径用引号（“）括起来：

```
-vm 
"C:\Program Files\Java\jdk1.8.0_25\bin" 
```

删除它们解决了问题：

```
-vm 
C:\Program Files\Java\jdk1.8.0_25\bin 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-01-05T15:29:41.383

我的解决方案是**在 PATH 中包含 JDK 的“bin”目录**

编辑`PATH`环境变量`Windows 7/8/10:`

1.  启动“控制面板”⇒（可选）系统和安全⇒系统⇒单击左侧窗格中的“高级系统设置”。
2.  切换到“高级”选项卡⇒按下“环境变量”按钮。在“系统变量”（底部窗格）下，向下滚动以选择“路径”⇒单击“编辑...”。
3.  从 JAVA 文件夹复制 JDK bin 目录并粘贴到“编辑...”

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-10-07T20:35:29.773

您应该在这里更改 eclipse.ini 中的 jdk 路径：

/Users/you_username/eclipse/jee-photon/Eclipse.app/Contents/Eclipse/eclipse.ini

在你应该重新启动 Eclipse 之后:)

# compilation - Hadoop编译问题

> ID：12426811
> 
> 赞同：1
> 
> 时间：2012-09-14T14:44:49.743
> 
> 标签：compilation, hadoop

这就是问题所在：我已经完成了一个简单的 Hadoop 程序来“清理”保存在文本文件中的图形，稍后我将使用该文本文件（使用 Hadoop），但我无法编译它！

编译器找不到 Hadoop 类（IntWritable、Text ecc...），每次我收到“找不到符号”错误。

我试过：

```
javac -classpath path/to/hadoop/root/hadoop-core-{version}.jar filename.java 
```

我运行的是 ubuntu 11.04，Hadoop 版本是 1.0.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:20:04.753

问题是 hadoop-core-{version}.jar 依赖于其他一些罐子。您可以在 Maven 存储库网站上找到所有依赖项：

[http://mvnrepository.com/artifact/org.apache.hadoop/hadoop-core/1.0.3](http://mvnrepository.com/artifact/org.apache.hadoop/hadoop-core/1.0.3)

您应该使用 Maven 或将所有依赖项添加到您的项目中以便能够构建它。

# r - 从两个向量创建带状疱疹

> ID：12426816
> 
> 赞同：1
> 
> 时间：2012-09-14T14:44:55.637
> 
> 标签：r

我想根据两列对数据框的值进行分类。假设，我有以下数据框：

```
my.df <- data.frame(a=c(1:20), b=c(61:80)) 
```

现在我想通过将 2D 散点图分成 4 个相等的部分，然后在中间覆盖一个由 4 个部分的四分之一组成的矩形，将其细分为 8 个区域。到目前为止，我一直在使用以下乏味的方式：

```
ar <- range(my.df$a)
br <- range(my.df$b)

aint <- seq(ar[1], ar[2], by=(ar[2]-ar[1])/4)
bint <- seq(br[1], br[2], by=(br[2]-br[1])/4)

my.df$z <- NA
my.df[which(my.df$a < aint[3] & my.df$b < bint[3]),"z"] <- 1
my.df[which(my.df$a < aint[3] & my.df$b >= bint[3]),"z"] <- 2
...
my.df[which(my.df$z == 1 & my.df$a >= aint[2] & my.df$b >= bint[2]),"z"] <- 5
... 
```

我确信必须有一种方法可以以更简洁和更通用的方式来完成，即通过编写通用函数，但我自己正在努力编写一个。

另外，我惊讶地发现，在这一切之后，该列的类`z`自动设置为`shingle`. 为什么？如何`R`“知道”这是一个`shingle`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:25:01.640

我会先将它分成 16 组（x 和 y 分别分成 4 组），然后将它们重新组合成更少的组。

```
my.df$a.q <- cut(my.df$a, breaks=4, labels=1:4)
my.df$b.q <- cut(my.df$b, breaks=4, labels=1:4)
my.df$a.b.q <- paste(my.df$a.q, my.df$b.q, sep=".")
my.df$z <- c("1.1"=1, "1.2"=1, "1.3"=2, "1.4"=2, 
             "2.1"=1, "2.2"=3, "2.3"=4, "2.4"=2,
             "3.1"=5, "3.2"=6, "3.3"=7, "3.4"=8,
             "4.1"=5, "4.2"=5, "4.3"=8, "4.4"=8)[my.df$a.b.q] 
```

这似乎是合理的

```
plot(my.df$a, my.df$b, col=my.df$z) 
```

![](../Images/e26dc190a7000dfe6b602bb505eab158.png)

使用一些覆盖范围更广的数据：

```
set.seed(1234)
my.df <- data.frame(a=runif(1000, 1, 20), b=runif(1000, 61, 80)) 
```

![在此处输入图像描述](../Images/ec046eb01cbfc9e5bac6a2e1683e9864.png)

# ios - 在 popViewControllerAnimated 之后调用 Dealloc 而不调用 viewDidUnload

> ID：12426817
> 
> 赞同：2
> 
> 时间：2012-09-14T14:45:02.927
> 
> 标签：ios, automatic-ref-counting, dealloc

与 ARC 的项目。Dealloc 方法在调用 popViewControllerAnimated viewDidUnload 方法后立即调用，没有任何原因。正因为如此，我对这种类型的崩溃有很多不同

* * *

![崩溃 1](../Images/897c17513cd005fcea8ab80dda4024c8.png)

![崩溃 2](../Images/25ffce05ece2ecb786de1e2f1dc0d644.png)

![崩溃 3](../Images/bb2c9fc1ca3dcdb84bb0f27f7137ddec.png)

![崩溃 4](../Images/ba1a521f156a0fb456bec751d011feaa.png)

和许多其他类似的。

这里是调用栈方法dealloc

![释放调用栈](../Images/1c956623773c8532f3446f5ea30ce2ce.png)

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:38:05.350

为什么你认为`viewDidUnload`会被调用？

正如在[拆除 UIViewController 时是否总是调用 viewDidUnload 和 dealloc？](https://stackoverflow.com/questions/1768076/are-viewdidunload-and-dealloc-always-called-when-tearing-down-a-uiviewcontroller), [UIViewController viewDidUnload 什么时候调用？](https://stackoverflow.com/questions/1285932/when-is-uiviewcontroller-viewdidunload-called), [viewdidunload 根本不被调用](https://stackoverflow.com/questions/5594410/viewdidunload-is-not-getting-called-at-all)，还有很多其他文章，不被调用是完全正常的`viewDidUnload`。

为什么会导致崩溃？你一定做错了什么。

# javascript - 单击时切换两个图像

> ID：12426818
> 
> 赞同：-2
> 
> 时间：2012-09-14T14:45:09.690
> 
> 标签：javascript, jquery

我正在尝试使用我在此处发布的较早帖子中的某人的代码，在其中，他提供了一个[jsFiddle](http://jsfiddle.net/D9VvV/)，显示如何在两个图像之间切换。

我试图准确地复制那个人正在做的事情，但它似乎不适用于我的代码：

```
<!DOCTYPE html>
<html>
<head>

<script src="jquery.js"></script>

<script>

$('#ellomatey').toggle(
function(){
    $(this).attr('src', 'bgimage.png');
},
function(){
    $(this).attr('src', 'redsquare.png');
});​

</script>

</head>

<body>
<img id="ellomatey"  src="bgimage.png"  />
</body>
</html> 
```

有谁知道我做错了什么？我有一种感觉，它没有正确调用该函数，但它似乎适用于那个人的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:55:26.750

其他两个答案讨论了实际问题，但它们没有告诉您如何发现这一点，这就是调试发挥作用的地方。

```
console.log("before");
$('#ellomatey').toggle(
function(){
    console.log("bgimage"); $(this).attr('src', 'bgimage.png');
},
function(){
    console.log("redsquare"); $(this).attr('src', 'redsquare.png');
});​
console.log("after"); 
```

如果这样做，您会在控制台中注意到“之前”和“之后”。没关系。但是当单击图像时，您会看到其他控制台日志，这意味着切换功能没有按照您的预期进行。

您可以在某种程度上假设大量使用的功能可以正常工作，因此选择器一定有问题。让我们检查一下。

```
console.log($('#ellomatey')); 
```

*呵，什么？！没有元素。*

然后你开始思考为什么，然后你会发现你需要等到 DOM 加载；假设您对网页的加载方式有一些基础背景，这是您正在做的事情的先决条件。

包装

```
$(document).ready(function() { ... }); 
```

围绕它就是这样做的。

*所需要的只是一点理解和一些简单的调试输出......*

不要只是盲目地假设它会工作，而是在你做的时候验证你的假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:25:13.020

我创建了一个灵活的切换脚本：

## *[jsBin 演示](http://jsbin.com/esukab/2/edit)*

将*第二个图像 url*放入图像的`data`属性中：

```
<img id="ellomatey"  src="img_1.jpg" data-src="img_2.jpg" /> 
```

点击后只需调用“交换”功能！

```
$(function(){  // BTW, you were just missing this 'ready' function :)

   function swap(){
       var mem  = this.src;
       this.src = $(this).data('src');
       $(this).data('src',mem);
   }    
   $('#ellomatey').click( swap );

}); 
```

此代码段还可以通过嵌套元素来处理多个元素：

```
 $('#ellomatey, .button, #something').click( swap ); 
```

（在演示中还添加了一个纯 JS 版本。玩得开心！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T14:46:33.870

您需要将代码包装在 document.ready 调用中。您拥有它的方式，代码将在页面的实际内容加载之前尝试运行。

```
<script>
$(document).ready(function() {
    $('#ellomatey').toggle(
    function(){
        $(this).attr('src', 'bgimage.png');
    },
    function(){
        $(this).attr('src', 'redsquare.png');
    });​
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T14:48:35.820

您正在为文档中尚不存在的元素定义切换功能，因此您应该将 js 代码包装在`window.load`处理程序上（假设您要等待完整的图像加载）或`document.ready`事件

# d - 如果我正在编写代码来扩展解释语言，使用 D 而不是 C 是否有额外的开销？

> ID：12426819
> 
> 赞同：5
> 
> 时间：2012-09-14T14:45:11.210
> 
> 标签：d

也许 D 运行时/GC 必须在每次调用函数时都进行初始化并消失，这种方式不会使其对添加小的非常小的函数（如 string to lower、urlencode 等）有用。我不确定如何这还有效，但我已经用 C 编写了一些扩展。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T16:44:50.140

是的，D 运行时必须在 D 程序启动时进行初始化，并且（取决于您使用的库）需要调用静态构造函数。它很小，但是就像您说的那样，对于小型功能来说效率很低。

运行时是开源的。这是[运行时的`main`功能](https://github.com/D-Programming-Language/druntime/blob/master/src/rt/dmain2.d#L346)。

如果您只是通过 C 接口（使用`extern(C)`）导出函数并调用它们，则无需启动运行时，但如果您这样做，则不应使用 GC 或依赖静态构造函数等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T04:22:01.387

这真的，真的取决于你的用例。

我在 D 中有几个脚本，它们显示内存百分比使用情况、cpu 百分比使用情况、系统负载等。我使用 #!/usr/bin/env rdmd 作为文件中的第一行作为脚本运行它们，并使它们可执行。

该脚本在第一次运行时编译一次，然后缓存的可执行文件每 2-3 秒运行一次以更新它的计数。

它们在完成工作之前只运行几毫秒，然后关闭直到再次运行。（我确实关闭了 GC，因为无论如何它都不需要释放任何东西。）

是的，使用它们是有成本的。不，这不是很好。是的，它比 Python 好几个数量级。人们仍然将 Python 用于我使用 D 的目的。我并不是说我*可能*会在 C 或 C++ 中获得更好的性能。

我认为对于我的用例来说，这确实无关紧要。

# vb.net - 如何将两个列表框的项目相乘并相加

> ID：12426823
> 
> 赞同：0
> 
> 时间：2012-09-14T14:45:21.537
> 
> 标签：vb.net, listbox

有2个lisbox。第一个包含零售产品的价格，第二个包含零售产品的数量。

![在此处输入图像描述](../Images/945c598a7c67befba57a8125b20c76ac.png)

用户可以根据需要添加任意数量的项目。所以物品的数量不受限制。我希望在添加新项目时**，**代码自动计算总现金。通过将数量列表中的所有项目相乘并添加它们。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:03:57.580

最简单的解决方案是循环包含价格的列表框。数量指数等于价格指数。正确的？

```
' this holds the value for the total amount
Dim totalAmount As Integer = 0
' loops the listbox to all items
For a As Integer = 0 To ListBox1.Items.Count - 1
     totalAmount = totalAmount + (CInt(ListBox1.Items(a).ToString) * CInt(ListBox2.Items(a).ToString))
Next
MsgBox(totalAmount) 
```

# php - 如何使用 usort 在 php 中执行自然排序

> ID：12426825
> 
> 赞同：10
> 
> 时间：2012-09-14T14:45:35.040
> 
> 标签：php, sorting

有谁知道使用 PHP 中的 usort 函数对对象执行自然顺序排序的函数是什么。

假设对象 ($obj->Rate) 在

```
$obj->10
$obj->1
$obj->2
$obj->20
$obj->22 
```

我试图让排序函数返回什么

```
$obj->22
$obj->20
$obj->10
$obj->2
$obj->1 
```

作为我目前的标准排序功能

```
function MySort($a, $b)
{ 
    if ($a->Rate == $b->Rate)
    {
        return 0;
    } 
    return ($a->Rate < $b->Rate) ? -1 : 1;
} 
```

正在返回

```
$obj->1
$obj->10
$obj->2
$obj->20
$obj->22 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-14T14:47:40.360

使用[strnatcmp](http://php.net/strnatcmp)作为比较函数。例如，它很简单

```
function mysort($a, $b) {
   return strnatcmp($a->rate, $b->rate);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-24T03:00:34.547

有几种方法可以按`Rate`数字和降序对您的属性进行排序。

以下是基于您的输入的一些演示：

```
$objects = [
    (object)['Rate' => '10'],
    (object)['Rate' => '1'],
    (object)['Rate' => '2'],
    (object)['Rate' => '20'],
    (object)['Rate' => '22']
]; 
```

array_multisort() 清晰且富有表现力：（[演示](https://3v4l.org/F1fZX)）

```
array_multisort(array_column($objects, 'Rate'), SORT_DESC, SORT_NUMERIC, $objects); 
```

usort(): ([演示](https://3v4l.org/lbbC2))

```
usort($objects, function($a, $b) {
    return $b->Rate <=> $a->Rate;
}); 
```

usort() 与 PHP7.4 中的箭头函数语法：（[演示](https://3v4l.org/B2XJe)）

```
usort($objects, fn($a, $b) => $b->Rate <=> $a->Rate); 
```

PHP 的宇宙飞船运算符 ( `<=>`) 将自动将两个数字字符串计算为数字——不需要额外/迭代的函数调用或标志。

# c# - 是否可以在两个 DbContext 之间共享 POCO 对象？

> ID：12426827
> 
> 赞同：0
> 
> 时间：2012-09-14T14:45:37.290
> 
> 标签：c#, poco, dbcontext, entity-framework-5

我有一些 POCO 类，它们通常可以分为两组，例如：

```
public class Student
{
    public Student()
    {
        this.Courses = new List<Course>();
        this.Clubs = new List<Club>();
    }

    public int Id { get; set; }
    public virtual ICollection<Course> Courses { get; set; }
    public virtual ICollection<Club> Clubs { get; set; }
} 
```

以及相应的 Course 和 Club 类，它们与其他类都有自己的关系。

问题是，这两个组很大，它们都包含很多类，每个都是一个工作单元，就像学生课程管理单元一样，它会提供与课程相关的任何功能；和俱乐部管理单元，将提供功能。所以我不打算将它们放在一个 DbContext 中。

有一些要求需要从俱乐部获得学生然后检索其课程信息。我现在正在做的是使用我从俱乐部单元获得的学生 ID 在课程单元中进行另一个查询。效果很好，但我希望让它更简单，比如

```
foreach(var student in club.Students){
    ClubContext.Detach(student);
    CourseContext.Attach(student);
    foreach(var c in student.Courses){
      ...
    }
} 
```

但我有一些这样的例外：

> 已经为对象层类型“POCOTest.Models.Student”生成了一个代理类型。当 AppDomain 中的两个或多个不同模型映射相同的对象层类型时，就会发生这种情况。

这可能吗？如果是这样，如何？谢谢~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:29:31.447

您可以在多个上下文中映射单个类，但映射应始终相同。如果不同，则不能使用动态代理（延迟加载），因为每个映射都需要自己的代理类型来处理其导航属性。

在您的情况下，第一个上下文映射包含`Student`与相关的实体，`Club`但该关系在第二个映射中不存在，其中`Course`存在相反的关系。这需要对同一实体类型使用两种不同的代理类型。

异常表示不支持。这不能工作的原因有两个：

*   EF 将代理类型存储在静态字典中，其中每个实体类型只能有一个生成的代理
*   即使您修复了第一点（通过下载源代码并修改它们），您仍然无法做您想做的事情，因为代理类型是实体。它不是包装器。因此，当您将其从第一个上下文中分离并附加到第二个上下文时，无法替换该类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T20:07:45.203

如果您不需要延迟加载，只需从导航属性中删除“virtual”关键字，它就会按您的意愿工作。Virtual 用于启用延迟加载。

# facebook-like - .addthis_button_facebook_like 内的跨度在点赞后获得 450px 的宽度，打破 addThis 布局

> ID：12426830
> 
> 赞同：1
> 
> 时间：2012-09-14T14:45:56.910
> 
> 标签：facebook-like, addthis

所以，是的，我在页面上有这个：

```
<div class="addthis_toolbox addthis_default_style " id="divAddThis" runat="server">
    <a class="addthis_button_facebook_like" style="opacity:1;" <%="fb:like:layout='button_count'"%>></a>
    <a class="addthis_button_tweet"></a>
    <a class="addthis_counter addthis_pill_style"></a>
</div> 
```

但是在点击like按钮（并关闭气泡）后，元素`<span>`内部的`<fb:like ...>`a动态获得了450px的宽度，破坏了AddThis的布局（按钮都是内联的）。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:59:26.740

似乎这可能是 Facebook 方面的一个错误。本周我看到一些报告弹出，我自己也在经历。

以下是其中一个错误报告的链接，上面说 Facebook 正在调查它：

[脸书错误报告](https://developers.facebook.com/bugs/325737700856317)

希望我们很快就会有答案。

# objective-c - 用 stringByAddingPercentEscapesUsingEncoding 编码逗号

> ID：12426831
> 
> 赞同：1
> 
> 时间：2012-09-14T14:45:57.507
> 
> 标签：objective-c

为什么逗号不被编码？我期待它是 %2C。

```
(lldb) po [@"," stringByAddingPercentEscapesUsingEncoding:4]
(id) $24 = 0x0a8fbfd0 , 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T15:17:07.653

正如@DayS 所指出的，因为逗号是合法的 URL 字符。但是，如果您想控制哪些字符被转义，请查看`CFURLCreateStringByAddingPercentEscapes()`.

```
NSString *toencode = @",";
NSString *result =
CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(NULL,
                                                          (__bridge CFTypeRef)toencode,
                                                          NULL,
                                                          CFSTR(","),
                                                          kCFStringEncodingUTF8));
NSLog(@"%@", result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:55:54.520

此方法只会替换 URL 中无效的特殊字符。由于逗号是有效的，他会保持这样。

尝试使用此字符串进行检查：

```
[@",éà /" stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

要替换逗号等其他字符，您必须自己做......

# javascript - JQuery覆盖不改变单选

> ID：12426835
> 
> 赞同：0
> 
> 时间：2012-09-14T14:46:10.197
> 
> 标签：javascript, jquery, html, radio-button

我正在尝试[jquery-overlay-example](http://jquerytools.org/demos/overlay/modal-dialog.htm)但带有单选按钮。因此，页面加载后，我可以进行选择，但无法将选择更改为其他选项。我的代码在这里：

```
<!DOCTYPE html>
<html>

<head>
  <title>jQuery Tools standalone demo</title>

    <!-- include the Tools -->
  <script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>

  <style>
    .modal {
    background-color:#fff;
    display:none;
    width:350px;
    padding:15px;
    text-align:left;
    border:2px solid #333;

    opacity:0.8;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    -moz-box-shadow: 0 0 50px #ccc;
    -webkit-box-shadow: 0 0 50px #ccc;
  }

  .modal h2 {
    margin:0px;
    padding:10px 0 10px 45px;
    border-bottom:1px solid #333;
    font-size:20px;
  }
  </style>
</head>
<body><!-- the triggers -->
<p>

  <input type="radio" name="group1" value="Milk" class="modalInput" rel="#yesno"> Milk<br>
<input type="radio" name="group1" value="Butter" class="modalInput" rel="#yesno"> Butter<br>
<input type="radio" name="group1" value="Cheese" class="modalInput" rel="#yesno"> Cheese
</p>

<!-- yes/no dialog -->
<div class="modal" id="yesno">
  <h2>This is a modal dialog</h2>

  <p>
    You can only interact with elements that are inside this dialog.
    To close it click a button or use the ESC key.
  </p>

  <!-- yes/no buttons -->
  <p>
    <button class="close"> Yes </button>
    <button class="close"> No </button>
  </p>
</div>

<!-- user input dialog -->
<div class="modal" id="prompt">
  <h2>This is a modal dialog</h2>

  <p>
    You can only interact with elements that are inside this dialog.
    To close it click a button or use the ESC key.
  </p>

  <!-- input form. you can press enter too -->
  <form>
    <input />
    <button type="submit"> OK </button>
    <button type="button" class="close"> Cancel </button>
  </form>
  <br />

</div>

<script>
$(document).ready(function() {
    var triggers = $(".modalInput").overlay({

      // some mask tweaks suitable for modal dialogs
      mask: {
        color: '#ebecff',
        loadSpeed: 200,
        opacity: 0.9
      },

      closeOnClick: false
  });   
  });
</script>
</body>
</html> 
```

如果这是一个简单的问题，请原谅我，我对 JQuery 比较陌生。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:55:14.797

试试这个 -[**演示**](http://jsfiddle.net/9UdZM/)

```
$(document).ready(function() {
    var triggers = $(".modalInput").overlay({
        mask: {
            color: '#ebecff',
            loadSpeed: 200,
            opacity: 0.9
        },

        closeOnClick: false,

        onClose: function() {
            this.getTrigger().prop('checked', true);
        }
    });   
}); 
```

# javascript - 为什么画布上的画线没有出现？

> ID：12426836
> 
> 赞同：2
> 
> 时间：2012-09-14T14:46:11.933
> 
> 标签：javascript, html, html5-canvas

我正在使用 html 5 用按钮在画布上画一条线。

**有人知道为什么吗？**

```
<!DOCTYPE html>
<html>

 <body onload="">

<canvas id="myCanvas" width="400" height="200" style="border:1px solid #000000;">
  Your browser does not support the HTML5 canvas tag.
</canvas>
<button name="draw" onclick="drawLine()">Draw Line</button>
<script type="text/javascript" src="canvashtml5.js" ></script>

</body>
</html> 
```

**darwLine 函数在外部 javascript 上作为 canvasHtml5.js：**

```
function drawLine(){
   var canvas = document.getElementById(myCanvas);
   var context = canvas.getContext("2d");
   context.moveTo(0,0);
   context.lineTo(300,150);
   context.stroke();
}
myCanvas
{
   var c=document.getElementById("myCanvas");
   var ctx=c.getContext("2d");
   ctx.fillStyle="#FFFF00";
   ctx.fillRect(0,0,150,75);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:34:49.563

选择：

像这样向你的按钮添加一个事件监听器：

```
document.getElementById('drawLineBtn').addEventListener('click', drawLine, false); 
```

这将减少您将来的工作。见[http://jsfiddle.net/kbXAN/23/](http://jsfiddle.net/kbXAN/23/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:52:52.357

我忘了把 myCanvas 引用成这样：“myCanvas”。

这个 var canvas = document.getElementById(myCanvas); 必须像 `var canvas = document.getElementById("myCanvas");`

# c - 使用 valgrind，strcpy 的内存错误

> ID：12426837
> 
> 赞同：3
> 
> 时间：2012-09-14T14:46:32.207
> 
> 标签：c, malloc, valgrind, strcpy

我一直在使用 valgrind，但由于某种原因，我在 C 中使用具有两个相同大小的字符串的简单字符串副本时不断出现内存错误。

生效的守则是：

```
node->entry = (char*)malloc(strlen(string)*sizeof(char));
strcpy(node->entry, string); 
```

字符串为：char* string = "Hello There"。错误是：大小为 2 的无效写入

```
==2035==    at 0xD494: memmove$VARIANT$sse42 (mc_replace_strmem.c:987)
==2035==    by 0x100001793: __inline_strcpy_chk (_string.h:94)
==2035==    by 0x100001699: createList (main.c:10)
==2035==    by 0x100001BE6: main (main.c:132)
==2035==  Address 0x10000c0fa is 10 bytes inside a block of size 11 alloc'd
==2035==    at 0xB823: malloc (vg_replace_malloc.c:266)
==2035==    by 0x100001635: createList (main.c:9)
==2035==    by 0x100001BE6: main (main.c:132) 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T14:48:16.383

```
malloc(strlen(string)*sizeof(char)); 
```

你没有考虑到结局`'\0'`。所以它应该是`(strlen(string) + 1)`。

* * *

边注：

```
type *x;
x = malloc(size * sizeof(*x)) 
```

比可维护性强得多

```
type *x;
x = (type *)malloc(size * sizeof(type)); 
```

因为你不会重复自己 3 次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T14:48:17.240

您的代码已损坏：

1.  您需要为字符串终止字符分配空间，否则将导致`strcpy()`写入未分配的内存并导致缓冲区溢出错误。
2.  [不要`malloc()`在 C 中转换 ,的返回值。](https://stackoverflow.com/a/605858/28169)
3.  您需要在写入内存之前检查分配是否成功。

此外，请注意`sizeof (char)`始终为 1，因此无需涉及它。只需使用：

```
node->entry = malloc(strlen(string) + 1); 
```

或者，检查您是否拥有，`strdup()`因为它结合了上述所有内容。

在一般情况下，正如@Shahbaz 指出的那样，最好`sizeof`在取消引用左指针的结果上使用运算符，以避免重复类型名称：

```
type *x;
x = malloc(amount * sizeof *x); 
```

另外，请注意，这`sizeof`不是一个函数，仅当参数是类型名称时才需要括号，并且正如我刚才所说的那样，应该避免这种情况。

# c# - Visual Studio 2012 - 自引用泛型解析错误

> ID：12426851
> 
> 赞同：19
> 
> 时间：2012-09-14T14:47:03.017
> 
> 标签：c#, .net, visual-studio, generics, visual-studio-2012

我在这里遇到了一些麻烦，在我们公司，我们有一个使用自引用泛型的自滚动 DA 层。在 Visual Studio 2010 中，IDE 对此非常满意，但是 2012 似乎遇到了困难，即使我们构建时，它也成功了。

这是一个例子：

![解析错误示例](../Images/6406369d5adda52caab569963ff396bd.png)

数据对象定义如下：

```
[TypeDescriptionProvider(typeof(HyperTypeDescriptor.HyperTypeDescriptionProvider))]
public class DataObject<T> : 
    INotifyPropertyChanged, 
    IDataErrorInfo, 
    IEditableObject, 
    IDataObject 
    where T : 
        DataObject<T>, 
        new() 
```

我意识到这不是最简单的定义，而是合法的，并且构建得非常好。

然而，这个“问题”导致智能感知失败，以及“转到定义”功能，不用说是令人沮丧的。

我尝试删除并重新添加引用，但问题仍然存在。

VS2010 非常满意，并且是我重新使用的，VS2012 非常好且响应迅速，但如果这个问题仍然存在，它就会破坏交易。

有人有什么想法吗？

* * *

想要澄清几件事，这个问题是间歇性的（这很痛苦，因为它真的很难追踪根本原因）。

它在任何地方都破坏了智能感知和“去定义”，而不仅仅是针对有错误的类。

我将尝试构建一个示例解决方案以提交连接，但最近时间不在我这边。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T02:07:56.353

听起来很傻，但我在使用智能感知引入或更改的新代码时遇到了类似的问题。我追踪到基本上需要执行全部保存，或者有时甚至在智能感知正确确认代码有效之前清理和重建/编译。

在 VS2010 中有时也会发生类似的情况，如果您创建一个类结构，然后在另一个类上编辑代码以使用它，然后反弹，破解类函数并添加新函数而不进行任何保存，则可以复制这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:47:08.940

有时，并非总是如此，ReSharper 可能会导致引用和 GTD 功能出现问题。你安装了吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T16:37:21.883

如果您使用两个 Visual Studio 实例（例如甚至两个 Visual Studio 2010）打开同一个解决方案/项目，就会发生这种情况。Intellisense 机制使用 Visual Studio 实例无法真正共享的 .NCB 文件。在这种情况下，智能感知行为很奇怪。

# javascript - 创建下拉菜单

> ID：12426854
> 
> 赞同：0
> 
> 时间：2012-09-14T14:47:19.140
> 
> 标签：javascript, css

我有一个菜单，其中包含一个子菜单，当主菜单内的链接悬停在主菜单下方时，该子菜单会显示在主菜单下方。我想要做的是在第一个子菜单中添加第二个子菜单，但使其成为下拉菜单。我不太擅长css，我想知道是否有人可以帮助我解决这个问题。我已经在网上学习了一些教程，但我无法获得我想要的结果。这是我到目前为止的html和css。

```
<div id="navigation">
<ul id="mymenu">
    <li><a href="#" onmouseover="javascript:showsubmenu(1)">Home</a></li>
    <li><a href="#" onmouseover="javascript:showsubmenu(2)">Gallery</a></li>
    <li><a href="#" onmouseover="javascript:showsubmenu(3)">What We Do</a></li>
    <li><a href="#" onmouseover="javascript:showsubmenu(4)">Contact</a></li>
</ul>
</div>
<div id="sublinks">
<ul id="s1">
    <li><a href="#">General</a></li>
    <li><a href="#">Landon News</a></li>
    <li><a href="#">Trust Us</a></li>
</ul>
<ul id="s2">
    <li>
        <a href="#">Security Systems</a>
        <ul id="s2sys">
            <li><a href="#">Arlington HA</a></li>
            <li><a href="#">Enfield HA</a></li>
            <li><a href="#">Revere HA</a></li>
        </ul>
    </li>
    <li>
        <a href="#">WLAN Systems</a>
        <ul id="s2wlan">
            <li><a href="#">Beverly HA</a></li>
            <li><a href="#">Holyoke HA</a></li>
            <li><a href="#">Meriden HA</a></li>
            <li><a href="#">Revere HA</a></li>
        </ul>
    </li>
</ul>
<ul id="s3">
    <li><a href="#">Computers</a></li>
    <li><a href="#">Strategic Planning</a></li>
    <li><a href="#">Security Systems</a></li>
    <li><a href="#">WLAN, WiFi Broadband</a></li>
</ul>
<ul id="s4">
    <li><a href="#">Email</a></li>
    <li><a href="#">Address Info</a></li>
</ul>
</div> 
```

这是主菜单的 javascript，它将显示第一个子菜单

```
function showsubmenu(id){
    submenu = document.getElementById('s'+id);
    for(i=1;i<=4;i++){
        if(i==id){
            submenu.style.display="block";
        } else {
            document.getElementById('s'+i).style.display="none";
        }
    }
}
sfHover = function() {
var sfEls = document.getElementById("sublinks").getElementsByTagName("li");
for (var i=0; i<sfEls.length; i++) {
    sfEls[i].onmouseover=function() {
        this.className+=" hover";
    }
    sfEls[i].onmouseout=function() {
        this.className=this.className.replace(new RegExp(" hover\\b"), "");
    }
}
}
if (window.attachEvent) window.attachEvent("onload", sfHover); 
```

这是CSS

```
#navigation{
    height:32px;
    margin:0 auto;
    width:auto;
}
#navigation ul{
    height:32px;
    line-height:32px;
}
#navigation ul li{
    display:inline;
}
#navigation ul li a,
#navigation ul li a:visited {
    padding:0 20px;
    display:block;
    text-decoration:none;
    float:left;
    color:#1361A5;
    font-weight:bold;
    text-shadow:#ffffff 2px 2px 2px;
}
#navigation ul li a:hover{
    color:#C3C2C1;
}
/* ----------- Sub Menu ----------- */
#sublinks{
    width:auto;
    margin:0 auto;
    background:#C3C2C1;
    height:30px;
    font-size:11px;
    border-radius:8px;
    -moz-border-radius:8px; /* Firefox 3.6 and earlier */
    -webkit-border-radius: 8px;
    -webkit-box-shadow: 0 2px 3px rgba(136, 136, 136, 1); 
    -moz-box-shadow: 0 2px 3px rgba(136, 136, 136, 1); 
    box-shadow: 0 2px 3px rgba(136, 136, 136, 1); 
    behavior: url(http://localhost/landon/assets/pie/PIE.php);
    position: relative;
}
#sublinks ul{
    height:32px;
    line-height:31px;
}
#sublinks ul li{
    display:inline;
}
#sublinks ul li a,
#sublinks ul li a:visited {
    padding:0 10px;
    display:block;
    text-decoration:none;
    float:left;
    color:#FFFFFF;
}
#sublinks ul li a:hover{
    text-decoration:underline;
}
#sublinks li:hover ul{
    display: block;
    position: absolute;
    margin: 0;
    padding: 0;
}
#sublinks li:hover li {
    float: none; 
}
#sublinks li:hover li a {
    background-color: #C3C2C1;
    border-bottom: 1px solid #fff;
    color: #000; 
    left:50;
}
#sublinks li li a:hover {
    background-color: #8db3ff; 
}

/* ----------- Hide Sub menu ----------- */
#s2, #s3, #s2sys, #s2wlan{display:none;} 
```

我要做的是使第二个子菜单成为第一个子菜单的下拉菜单，目前它显示在同一行中，而不是作为下拉菜单。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:10:27.947

`ul`尝试将此 CSS 添加到子菜单中的下拉列表中。

```
position: absolute;
top: 30px; 
```

根据您要查找的结果类型，您可能需要修改该`top`值，或者通过添加`width`

[演示：http://jsfiddle.net/4k2Tx/2/](http://jsfiddle.net/4k2Tx/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T15:13:59.863

[http://jsfiddle.net/kVztG/1/](http://jsfiddle.net/kVztG/1/)

要使子子菜单成为下拉菜单，请更改下面的 css。

```
#sublinks li:hover li {
    display:block;
    position:relative;
    top:30px;
} 
```

position:relative 和 top:30px 阻止下拉菜单出现在子菜单的顶部，并且 display:block 阻止 li 内联显示。

# iphone - 将日期解析为时间戳

> ID：12426857
> 
> 赞同：1
> 
> 时间：2012-09-14T14:47:27.277
> 
> 标签：iphone, objective-c, ios, ipad, date

我从服务器收到这样的响应，`Date = "/Date(1348783200000+0200)/"`如何将其解析为时间戳或日期（例如：2012 年 9 月，星期一 21）？请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:49:42.590

看起来您的日期以毫秒为单位。您将需要除以 1000 并将其转换为`NSDate`之后。然后您可以使用`NSDateFormatter`with`NSDateFormatterLongStyle`以该格式显示日期。

```
NSTimeInterval dateInterval = dateWithMilliseconds;
dateInterval = dateInterval / 1000;
NSDate *date = [NSDate dateWithTimeIntervalSince1970:dateInterval];

NSDateFormatter *formatter = [NSDateFormatter alloc] init];
[formatter setDateStyle:NSDateFormatterLongStyle];
NSString *dateString = [formatter stringFromDate:date]; 
```

# xml - 在同一级别上分组元素

> ID：12426858
> 
> 赞同：3
> 
> 时间：2012-09-14T14:47:28.000
> 
> 标签：xml, xslt

我的转换有问题，希望有一些想法，我正在处理一个非常扁平的输入文档，其中所有重要节点都是彼此的兄弟节点。

它看起来像这样：

```
<title1> Rule 51 </title1>
<p> text here </p>
<p> text here </p>
<note> Source </note>
<p> text here </p>
<title1> Rule 52 </title1>
<p> text here </p>
<p> text here </p>
<note> Source </note>
<p> text here </p> 
```

我的目标是让这个输入看起来像这样：

```
 <section>
       <title1> Rule 51 </title1>
       <p> text here </p>
       <p> text here </p>
       <note> Source </note>
           <p> text here </p>
   </section>

   <section>
       <title1> Rule 52 </title1>
       <p> text here </p>
       <p> text here </p>
       <p> text here </p>
       <p> text here </p>
       <note> Source </note>
           <p> text here </p>
   </section> 
```

正如您在上面看到的，我的主要目标是将每个 title1 及其所有跟随兄弟姐妹分组，直到它碰到另一个 title1 到 section 元素中。有任何想法吗？？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T15:13:28.013

尝试

```
<!-- Change the match pattern to match the parent of the input you showed. -->
<xsl:template match="blockquote">
  <xsl:for-each-group group-starting-with="h:h4" select="*">
    <section>
      <xsl:copy-of select="current-group()" /> 
```

在 XSLT 2.0 中。

如果您只能使用 XSLT 1.0，请查看[Muenchian Grouping](http://www.jenitennison.com/xslt/grouping/muenchian.html)，如果您需要帮助，请大声疾呼。

# sql-server - 尝试将数据从 Access 导入 SQL Server 时出错

> ID：12426863
> 
> 赞同：1
> 
> 时间：2012-09-14T14:47:38.667
> 
> 标签：sql-server, sql-server-2008, ms-access, ssis

我正在尝试使用带有 ACE OLEDB 驱动程序的 OpenDataSource 从 Access 2003 mdb 数据库中导入数据。我收到此错误：

```
 Description: OLE DB provider "Microsoft.ACE.OLEDB.12.0" for linked server "(null)" returned message "Cannot start your application. The workgroup information file is missing or opened exclusively by another user.". 
```

我不知道它在说什么，我的互联网搜索也没有帮助。它们都指链接服务器，而我尝试过的任何事情都无法解决问题。这个错误是什么意思，我需要做什么来修复它？

从 SSIS 包中调用执行导入的存储过程，该包通过文件位置表并为每个位置调用存储过程。我刚刚发现这个包运行了大约半个小时，导入了大约 80 个文件，然后才开始抛出这个错误。我还没有找到有效的文件和无效的文件之间的任何区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:49:20.083

从[了解访问安全中工作组信息文件的作用](http://support.microsoft.com/kb/305542)：

> 当您使用 Microsoft Access 数据库 (MDB) 时，工作组信息文件是必需的组件。Microsoft Access 的运行时安装和完整安装都需要此文件。此文件是 Microsoft Access 安全性的重要组成部分。
> 
> 如果您开发数据库应用程序，那么对工作组信息文件有一个很好的理解是很重要的。保留开发过程的最后阶段以在 Access 中应用安全性是一个好主意。在此之前，您可以在不安全的数据库中开发数据库应用程序。
> 
> 工作组是在多用户环境中共享数据的一组用户。在数据库上实施安全性时，用户和组帐户记录在工作组信息文件中。用户密码也存储在工作组信息文件中。
> 
> 重要说明：如果您在数据库中建立 Access 安全性，Microsoft 建议您将工作组信息文件的备份副本存储在安全位置。**如果文件丢失或损坏，快速恢复工作组信息文件的唯一方法是从备份副本中恢复文件。如果您没有备份副本，则必须使用最初分配的相同个人 ID 重新创建用户和组帐户。如果新的工作组信息文件没有像原始文件一样创建，您将无法打开带有工作组文件的数据库。**
> 
> 即使数据库没有受到保护，Access 也会使用工作组信息文件。存储在工作组信息文件中的默认管理员用户帐户用于打开所有不安全的数据库。如果您为 Admin 用户分配密码，您将在重新打开数据库时收到登录提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T16:53:56.413

SQL Server 试图访问的 Access 数据库正被另一个用户使用。转到存储数据库的文件夹。在 Access 2003 中，数据库文件本身将以“mdb”结尾。如果存在同名但以“idb”结尾的文件，则表示当前有用户正在使用“mdb”文件。让用户退出数据库，然后运行您的包。如果您找不到使用该文件的用户，请在另一个文件夹中复制该文件并编辑您的 SSIS 包以反映更改。

# python - 结束 Python 交互式会话而不关闭打开的文件？

> ID：12426866
> 
> 赞同：0
> 
> 时间：2012-09-14T14:47:45.863
> 
> 标签：python

在没有先关闭打开的文件的情况下结束交互式 Python 会话的后果是什么？我知道关闭文件是释放内存和系统资源所必需的，但是在会话结束后他们会继续使用这些资源吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T14:49:02.807

当 Python 解释器退出时，它会在自己（以及你的程序之后）进行清理，并关闭打开的文件。

# vba - 当范围内的单元格更改并满足给定条件时显示 Excel VBA 消息框

> ID：12426870
> 
> 赞同：-2
> 
> 时间：2012-09-14T14:48:01.973
> 
> 标签：vba, excel

我需要一些帮助来创建 Excel VBA 以在计算单元格（其中包含公式的单元格）的任何输入范围发生更改并满足该范围的给定标准时显示消息框。

例如，范围“B2”包含作为“A2”函数的计算单元格，如果在更新输入“A2”时，重新计算的单元格“B2”超过 20%，我想警告用户一个消息框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:46:51.513

**UPDATE**

This code will only trigger if your input cells change, which is better than just using 'Worksheet_Calulate`:

```
Private Sub Worksheet_Change(ByVal Target As Range)

Dim myRange As Range

myRange = Range("B1:B2") '-> assumes input cells are in B1:B2

If Intersect(myRange, Target) Then

    '-> assumes calculated cell in A1
    If Range("A1").Value > 0.2 Then MsgBox "Above 20%"

    '-> to loop through many cells, do this
    Dim cel As Range
    For Each cel In Range("A1:A10")

        If cel.Value > 0.2 Then MsgBox cel.Address & " Above 20%"
        Exit For

    Next

End If

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T15:30:23.263

编辑：斯科特让我想起`Intersect`了比这个功能更好的`InRange`功能

Edit2：这将允许您对不同的范围有不同的规则。如果用户更改的单元格在您的控制范围之一内，则调用该范围的验证规则。否则功能继续。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim Range1 As Range, Range2 As Range '...
    Set Range1 = Me.Range("A1:A9")
    Set Range2 = Me.Range("B1:B9")
    '...

    If Not intersect(Range1, Target) Is Nothing Then
        'Rule for Range1
        If Target.Value > 0.2 Then   'put your condition here
            MsgBox "You exceeded 20%"
        End If

    ElseIf intersect(Range2, Target) Is Nothing Then
        'Rule for Range2...
    'elseif more ranges...
         'More rules...
    End If

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T15:24:22.750

这是使用工作簿工作表更改事件的示例，该事件检查工作表 1 中 A1 单元格中的更改

```
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)
On Error Resume Next
    'check to ensure we are working in the correct Sheet
    If ActiveWorkbook.ActiveSheet.Name = "Sheet1" Then
        'check to see how many cells have been targeted
        If Target.Cells.Count = 1 Then
            If Target.Cells.Address = "$A$1" Then
                'check to see what value has been entered into the cell
                If Target.Value = 20 Then
                    MsgBox "Alerting the user"
                End If
            End If
        End If
    End If
End Sub 
```

# symfony - 在提交按钮上调用动作控制器

> ID：12426880
> 
> 赞同：1
> 
> 时间：2012-09-14T14:48:23.790
> 
> 标签：symfony

是否可以在表单提交按钮上调用控制器操作，请问 twig 中的语法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T14:50:33.167

是的 ：

```
{# src/Acme/TaskBundle/Resources/views/Default/new.html.twig #}
<form action="{{ path('task_new') }}" method="post" {{ form_enctype(form) }}>
    {{ form_widget(form) }}

    <input type="submit" />
</form> 
```

您必须使用 twig helper设置`action=""`表单的属性。到你的正确路线。`tag``path`

Symfony2 文档中有关[表单](http://symfony.com/doc/current/book/forms.html)的更多信息。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-14T14:50:41.943

在 Asp.net MVC 的情况下

```
 @using (Html.BeginForm("ActionName", "ContorllerName", FormMethod.Post}))
  {
      <p>
        <input type="submit" value="Submit" />
    </p>

   } 
```

这是您可以在提交按钮上调用控制器操作的方式

# javascript - 难以到达的 JS 环境中的语法错误

> ID：12426889
> 
> 赞同：3
> 
> 时间：2012-09-14T14:48:56.087
> 
> 标签：javascript, debugging, syntax-error, opera, opera-extension

我正在制作一个 Opera 扩展。它包括一个后台脚本，它非常安静地失败。它在一个独特的环境中运行，所以我不能把它带到任何地方来检查它是否有效（它需要预定义的变量）。有没有办法在不运行脚本的情况下调试脚本。也就是说，检查语法是否正确。我想要像 JSLint 这样的东西，而不是告诉我我的代码有多糟糕，而是告诉我语法错误在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:56:34.887

如果您只想快速搜索*SyntaxErrors*，可以将代码放入 Closure Compiler，然后选择*“仅限空白”*选项。

它会在没有任何代码样式分析的情况下通知您无效代码以使事情变得混乱。

[http://closure-compiler.appspot.com/home](http://closure-compiler.appspot.com/home)

如果您选择*“Pretty Print”*选项，它还会为您提供良好的缩进结果，以防原始代码需要一些清理。

# javascript - 表达式引擎扩展开发 - 将自定义 javascript 添加到呈现的条目

> ID：12426893
> 
> 赞同：1
> 
> 时间：2012-09-14T14:49:09.930
> 
> 标签：javascript, expressionengine

我正在开发一个扩展，设置中可用的选项之一需要在呈现时将自定义 javascript 添加到文档头部。我遇到的问题是解析顺序。（也可能有更好的方法来做包含）

我正在使用`channel_entries_tagdata`钩子。

在此内部，一旦处理了设置，我将执行以下操作：

```
// Add the required javascript
$jscript = "
    <script type="text/javascript">
        /*! etc......
    </script></head>
";

// Add js
$tagdata = str_replace("</head>", $jscript, $tagdata); 
```

我希望能够将我的 javascript 保存在一个单独的文件中，并通过引用以某种方式包含它，但我不知道在这个阶段如何做到这一点。

我遇到的另一个问题是 EE 变量的解析顺序。在 javascript 中，我使用 $tagdata 中的变量。像这样的东西：

```
$.post("URL", { channel: "{channel}", entryId: "{entry_id}", urlTitle: "{url_title}", lastSegment: "{last_segment}", editDate: eo.editDate, field: eo.eleName }, function(data){... 
```

在这种情况下，我将如何调用/使用 EE 变量？

详细说明... 此扩展程序适用于以下内容：在控制面板的插件 -> 扩展程序中，他们将激活扩展程序。在该扩展程序的“设置”中，他们将能够通过频道授权可以“编辑”该频道中的条目的成员或组。

该扩展在检查权限后，在呈现之前编辑每个自定义字段类型并将其包装在类元素中。JavaScript 文件用于此功能。单击该元素时，将打开一个模式，其中将包含自定义字段类型以及通道/条目信息，因此可以在编辑后保存该字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T00:03:20.590

`channel_entries_tagdata`包含从每个`{exp:channel:entries}`循环中提取的原始模板代码，然后有另一个变量 ($row)，它是该条目的实际数据的数组。（根据[文档](http://expressionengine.com/user_guide/development/extension_hooks/module/channel/index.html#channel-entries-tagdata)。）

因此，首先，如果您想以这种方式将 JS 添加到通道条目循环中，则必须确保整个页面模板都在您的频道条目循环中 - 如果您在嵌入中`<head>`，这可能不起作用。`<head>`

其次，我建议转储`$row`通过该挂钩传递的数据，以查看是否可以从那里提取返回的 JS 中的数据。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:34:29.130

您能否让脚本中的脚本`<head>`成为一个通用函数并通过从您的频道条目中调用它来将变量传递给它？

```
<head>
  ...
  <script>
    function W3bGuy_function(channel, entry_id, last_segment) {
      ...whatever...
    }
  </script>
</head>

<body>
  ...
  {exp:channel:entries}
  some action triggers: W3bGuy_function('{channel}', '{entry_id}', '{segment_3}');
  {/exp:channel:entries}
  ... 
```

# c# - C# 键盘和单词预测

> ID：12426894
> 
> 赞同：1
> 
> 时间：2012-09-14T14:49:11.390
> 
> 标签：c#, caret

我目前正在开发一个 C# 桌面应用程序，它是一个带有单词预测功能的简单虚拟键盘。

预测过程将在输入单词的前三个字母后开始，然后提供建议。我需要在键入时跟踪插入符号，并且我尝试使用诸如 SelectionChanged 之类的 RichTextBox 事件，但它需要手动进行正则表达式检查和位置跟踪（声明变量...）。

我的问题：有什么建议可以帮助我完成这项任务吗？听众呢？他们有帮助吗？

注意：我没有长期使用 .NET 框架的经验，也没有使用过 Listeners。

另请注意，输入法是眼睛注视！这意味着非关键事件将起作用！

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:56:30.523

这会在 WPF 或 WinForms 中吗？我将按如下方式解决这个问题。也许不是最快的方法，但值得一试，直到你有别的东西。

RTB 的 OnKeyDown 事件检查最后一个字符是否为空格。如果没有从最后一个空格中获取整个单词并检查单词列表并更新屏幕上的列表。

要检查光标在您的单词中的位置，只需执行与上述相同的操作并尝试获取当前单词而不是特定键的索引。

# c# - 为什么.net 2.0 比 4.0 快

> ID：12426900
> 
> 赞同：4
> 
> 时间：2012-09-14T14:49:22.557
> 
> 标签：c#

我想测试我的计算机性能，所以我运行了这段代码

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        DateTime dt = DateTime.Now;
        Int64 i = 0;
        do
        {
            i++;
        } while (dt.AddSeconds(10) >= DateTime.Now);

        this.textBox1.Text = i.ToString("n0");
    }

} 
```

当我选择 .NET Framework 2.0 时，我得到 3300 万的结果，但当我选择 4.0 时，我只得到 900 万

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:11:01.643

不是真正的答案，但评论太长了......问题中代码的问题似乎确实源于.NET 2和4之间的性能差异。具体来说，我看到DateTime.Now在.NET 4 比 2.0.

下面的测试控制台应用程序的输出（在多次尝试后）对于 .net 2 大约为 300、310 毫秒，对于 .NET 4 大约为 1050、1090 毫秒。

发布代码，以便其他人可以在其他平台、配置上尝试。我在 Windows 7-64 位，在发布模式下编译。

```
using System;
using System.Diagnostics;
class Program
{
    public static void Main(string[] args)
    {
        const int m = 1000000;
        DateTime d;

        Stopwatch s1 = Stopwatch.StartNew();
        for (int i = 0; i < m; i++)
        {
            d=DateTime.Now;
        }
        s1.Stop();

        Stopwatch s2 = Stopwatch.StartNew();
        for (int i = 0; i < m; i++)
        {
            DateTime.Now.AddSeconds(10);
        }
        s2.Stop();

        Console.WriteLine("{0}, {1}",s1.ElapsedMilliseconds,s2.ElapsedMilliseconds);
        Console.Read();
    }
} 
```

# c# - 在 Word 文档中嵌入 Excel 图形，使用 OpenXML 与 Word 2010 和 2003 配合使用

> ID：12426901
> 
> 赞同：5
> 
> 时间：2012-09-14T14:49:31.353
> 
> 标签：c#, excel, ms-word, openxml-sdk

我必须实现一个 Microsoft Word 文档生成器，其中嵌入了 excel 图形。我的限制之一是让我生成的 docx 与 Microsoft word 2010 和 2003 + 兼容包一起工作。

我没有设法使它对他们俩都有效。我可以使它适用于 Word 2010，但该文档不适用于 2003，反之亦然。

经过几次搜索以使其适用于 Word 2003，我在我的代码中添加了这个：

```
 private static void Word2003(ChartPart importedChartPart, MainDocumentPart mainDocumentPart, Stream fileStream)
    {
        var ext = new ExternalData { Id = "rel" + 5 };
        importedChartPart.ChartSpace.InsertAt(ext, 3);

        var fi = new FileInfo(@"generated.xlsx");
        importedChartPart.AddExternalRelationship("http://schemas.openxmlformats.org/officeDocument/2006/relationships/package", new Uri(fi.Name, UriKind.Relative), "rel5");

        EmbeddedPackagePart embeddedObjectPart = mainDocumentPart.AddEmbeddedPackagePart(@"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
        Stream copyStream = new MemoryStream();
        fileStream.CopyTo(copyStream);
        embeddedObjectPart.FeedData(copyStream);
    } 
```

但此时生成的文档不适用于 Word 2010。如果我删除这两个 lignes ：

```
 var ext = new ExternalData { Id = "rel" + 5 };
 importedChartPart.ChartSpace.InsertAt(ext, 3); 
```

从以前的代码，它适用于 Word 2010，但不适用于 Word 2003。

我已经尝试了几件事，但我没有设法让它适用于每种情况。

[你可以在这里](http://pastebin.com/x2Zr3YN2 "pastbin")找到这段小代码

先决条件是一个 Excel 文件模板，其中包含图表和图形。

* * *

编辑：生成的文档始终适用于 Microsoft Office 2007（是否有两个有问题的代码行）。我还在寻找解决方案！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T14:35:39.170

我终于找到了解决方案！

问题是由于两件事：我没有正确放置外部数据并且外部关系是错误的。

这段代码使它工作：

```
private static void Word2003(ChartPart importedChartPart, MainDocumentPart mainDocumentPart, Stream fileStream)
{
    // Add of the external data id
    ExternalData ext = new ExternalData { Id = "rel" + 5 };
    AutoUpdate autoUpdate = new AutoUpdate{ Val = false};
    ext.Append(autoUpdate);
    importedChartPart.ChartSpace.Append(ext);

    // Set of the relationship
    var fi = new FileInfo(@"generated.xlsx");
    importedChartPart.AddExternalRelationship("http://schemas.openxmlformats.org/officeDocument/2006/relationships/oleObject", new Uri(fi.Name, UriKind.Relative), "rel5");

    // Link to the embedded file
    EmbeddedPackagePart embeddedObjectPart = mainDocumentPart.AddEmbeddedPackagePart(@"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
    Stream copyStream = new MemoryStream();
    fileStream.CopyTo(copyStream);
    embeddedObjectPart.FeedData(copyStream);
} 
```

现在生成的 Word 文档适用于 Word 2003、2007 和 2010。

也许这会对某人有所帮助！

# c# - 公共交通网络中的路由算法

> ID：12426905
> 
> 赞同：0
> 
> 时间：2012-09-14T14:49:38.743
> 
> 标签：c#, algorithm, path, routes, graph-algorithm

我正在设计一种算法来在公共交通网络中找到一条路径，但我不知道如何让它变得简单，我从昨天开始就在思考这个问题。我的目标是找到一条最小化总线变化的路径，以及其他不介意总线变化的路径，但它们必须及时）。第二个算法是一个 k 最短路径算法（可能是 k = 3 或 4），我不知道任何有效的实现。我想在 C# 中实现这两种算法并将其应用于真正的公共交通网络。有什么提示吗？对不起，我的英语很糟糕，但我来自意大利 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T14:55:07.187

一种非常常见的寻路算法是[A* 搜索算法](http://en.wikipedia.org/wiki/A*_search_algorithm)。

可以在 c# 中找到很多实现，例如在[Codeguru](http://www.codeguru.com/csharp/csharp/cs_misc/designtechniques/article.php/c12527/AStar-A-Implementation-in-C-Path-Finding-PathFinder.htm)上或在[msdn](http://archive.msdn.microsoft.com/pathfinding1)上。

[您可以在此 stackoverflow 线程](https://stackoverflow.com/questions/2138642/simplest-c-sharp-implementation-of-a-algorithm)上找到其他想法。

也许你应该使用它并考虑巴士变化或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:57:33.827

您可以使用 Dijkstra 算法。尝试从这里开始。

[http://www.codeproject.com/Articles/19919/Shortest-Path-Problem-Dijkstra-s-Algorithm](http://www.codeproject.com/Articles/19919/Shortest-Path-Problem-Dijkstra-s-Algorithm)

# ruby-on-rails - 将更清晰的描述传递给 RSpec `its` 方法

> ID：12426907
> 
> 赞同：4
> 
> 时间：2012-09-14T14:49:44.313
> 
> 标签：ruby-on-rails, testing, rspec

我是一个 RSpec 新手，但我真的很喜欢编写测试是多么容易，并且随着我学习 RSpec 的新功能，我会不断地重构它们以使其更干净。所以，最初，我有以下内容：

```
describe Account do
  context "when new" do
    let(:account) { Account.new }
    subject { account }

    it "should have account attributes" do
      subject.account_attributes.should_not be_nil
    end
  end
end 
```

然后我了解了该`its`方法，因此我尝试将其重写为：

```
describe Account do
  context "when new" do
    let(:account) { Account.new }
    subject { account }

    its(:account_attributes, "should not be nil") do
      should_not be_nil
    end
  end
end 
```

由于`its`不接受 2 个参数而失败，但删除消息效果很好。问题是，如果测试失败，失败示例部分下的消息只会显示

```
rspec ./spec/models/account_spec.rb:23 # Account when new account_attributes 
```

这并没有太大帮助。

**那么，有没有办法将消息传递给`its`，或者更好的是，让它自动输出一个理智的消息？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T02:21:35.843

您可以定义一个 RSpec 自定义匹配器：

```
RSpec::Matchers.define :have_account_attributes do
  match do |actual|
    actual.account_attributes.should_not be_nil
  end
  failure_message_for_should do
    "expected account_attributes to be present, got nil"
  end
end

describe Account do
  it { should have_account_attributes }
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-01T19:51:21.340

你也可以写：`its(:account_attributes) { should_not be_nil }`

见[https://www.relishapp.com/rspec/rspec-core/v/2-14/docs/subject/attribute-of-subject](https://www.relishapp.com/rspec/rspec-core/v/2-14/docs/subject/attribute-of-subject)

请注意，随着 rspec 3 的发布，“its”将从 rspec-core 提取到 gem 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T17:58:52.333

看起来一个相对简单的猴子补丁可以满足您的需求。

查看您正在使用的 rspec-core gem 版本的来源。我在 2.10.1。在文件中`lib/rspec/core/subject.rb`，我看到了`its`定义的方法。

这是我的修补版本 - 我更改了`def`行和之后的行。

**注意 - 这很可能是特定于版本的！**从您的版本中复制方法并像我一样修改它。请注意，如果 rspec-core 开发人员对代码进行了重大重组，则补丁可能需要非常不同。

```
module RSpec
  module Core
    module Subject
      module ExampleGroupMethods
        # accept an optional description to append
        def its(attribute, desc=nil, &block)
          describe(desc ? attribute.inspect + " #{desc}" : attribute) do
            example do
              self.class.class_eval do
                define_method(:subject) do
                  if defined?(@_subject)
                    @_subject
                  else
                    @_subject = Array === attribute ? super()[*attribute] : _nested_attribute(super(), attribute)
                  end
                end
              end
              instance_eval(&block)
            end
          end
        end
      end
    end
  end
end 
```

那个补丁可能会放在你的`spec_helper.rb`.

现在的用法：

```
its("foo", "is not nil") do
  should_not be_nil
end 
```

失败时输出：

```
rspec ./attrib_example_spec.rb:10 # attr example "foo" is not nil 
```

如果省略第二个参数，则行为将与未修补的方法一样。

# php - Android 应用程序和在线数据库

> ID：12426910
> 
> 赞同：0
> 
> 时间：2012-09-14T14:49:59.360
> 
> 标签：php, android, mysql, web-hosting

我正在制作一个 Android 应用程序，它将与在线数据库对话以从中获取数据。我目前的方法是从网络托管服务（例如 HostGator 或 WebHostingHub）注册一个网站，并且我正在使用 PHP 代码在该网站上创建一个 MySQL 数据库，以将数据发送到应用程序（以 JSON 格式）。我想知道这是否是一个可行的解决方案，特别是如果应用程序恰好起飞。我很想听听你的想法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:51:40.583

我使用 iOS 应用程序执行此操作（使用 sqlite），它似乎工作正常。

请注意安全性和 SQL 注入，因为这会给您带来麻烦。

如果它变得非常大，那么考虑到流量和数据库大小，开始寻找专用服务器来托管您的数据库可能是一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:38:48.143

你应该设计你的服务器端代码和基础设施来同时处理大量的请求。我想到了以下流行语：

*   持久或按需 MySQL 连接？
    当使用持久连接到 MySQL 数据库时，您的查询将立即得到答复，但 tmp 表将在所有客户端之间共享。因此，根据您查询的复杂性，这可能不是最佳的。
    按需连接将导致很少的开销，但是当您通过本地套接字访问 MySQL 时，这应该可以减少到最低限度。此外，您应该有机会根据您的需要（同时连接的数量、keycache 等）配置 MySQL，以防您的应用程序真正起飞。;) 这意味着对服务器的 root 访问将有很大帮助。
*   webserver 和它的配置
    在这里相同。可能的子线程数量应该是可配置的，以防您需要长时间运行查询。如果您可以将网络服务器加载的模块调整为您真正需要的模块，它将帮助您降低单个请求的运行时间。lighttpd 或 Apache 将是我的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T07:23:08.587

如果正确实施，解决方案将起作用。我使用一个基于 PHP 的 web 服务，我的 android 应用程序与之通信，用于各种事情，即错误跟踪、动态更新甚至测试从手机上传文件。但是，我不会直接从设备连接到外部数据库。

# sql-server - 为每条记录选择顶部子项的顶部子项

> ID：12426911
> 
> 赞同：0
> 
> 时间：2012-09-14T14:50:07.410
> 
> 标签：sql-server, sql-server-2012

鉴于这些表：

```
GroupA,

GroupB(with a FK to GroupA.Id),

GroupC (with a FK to GroupB.Id and Image.Id),

Image 
```

我正在尝试使用嵌套选择循环遍历每个 A 组，选择第一个具有匹配 FK 的 GroupB，选择 B 组的第一个 C 组，然后从图像表中选择一个字段。

这是一个网页，我将为每个 GroupA 输出以下内容

```
<h2>GroupA.Title...

<img src=Images.ImageUrl... 
```

但要做到这一点，我需要拉出 Top GroupB，后者拉出 Top Group C，后者在 Inner Join 上获取图像。

我很确定嵌套选择不是前进的方向（第一个嵌套语句有效，但不是下一个使用第一个嵌套语句的结果）。有人可以指出我正确的方向吗？我确信有一种正确的方法可以做到这一点。

编辑：示例数据结构

```
GroupA {GroupAId,Title}

GroupB {GroupBId,FKGroupAId}

GroupC {GroupCId,FKGroupBId, FKImageId}

Image {ImageId,ImageUrl} 
```

所以....如果它们是单独的查询，我可以

从 GroupA 中选择 * - 并遍历 GroupA 并选择单个 Top 1 GroupB 其中 GroupB.FKGroupAId = GroupA.GroupAId;

然后，我将选择前 1 个组 C，其中 GroupC.FKGroupBID = GroupB.GroupBId 与 Image 上的内部连接。

对于我想要获得的每个 GroupA 图像，这是 2 次选择 = 太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:59:23.013

这样的事情做你想要的吗？

```
SELECT a.Id, (
    SELECT TOP 1 i.myColumn
    FROM GroupB b 
    INNER JOIN GroupC c ON b.id = c.bId
    INNER JOIN Image i ON c.imageid = i.id
    WHERE a.id = b.aId
    ORDER BY b.id, c.id
) AS myColumn
FROM GroupA a 
```

没有子查询也可能有更好的方法。

# javascript - 达到最小值/最大值时停止函数

> ID：12426912
> 
> 赞同：0
> 
> 时间：2012-09-14T14:50:17.547
> 
> 标签：javascript, html

这是我上一个问题的延续。（感谢你的回答）

我使用onclick来增加和右键单击以减少'var b'这也导致'var max'增加/减少但相反（增加'var b'，减少'var max'）

我有两个问题：

1) 当 'var b' 增加到最大值 10 时，'var max' 减少到 40，但我仍然能够在单击 'var b' 时减小 'var max'，但 'var b' 本身不会增加。

2) 可能与 1 相同，但是，当 'var max' 是低于其最大值 50 的任何数字时，减小 'var b' 或 'var c' 当它们的最小值为 0 时，'var max' 会增加'

所以我想我的问题是如何在函数处于最小值/最大值时停止工作，但在更改时仍继续工作。

我的职能：

```
var max=50;
function decrease(){
  max = Math.max(max-1,0);
  document.getElementById('boldstuff').innerHTML = max;
  if(max < 1){
    alert("There are no more skill points to be spent.");
  }
}
function increase(){
  max = Math.min(max+1,50);
  document.getElementById('boldstuff').innerHTML = max;
}

var b=0;
function increase1(){
  b = Math.min(b+1,10);
  document.getElementById('boldstuff2').innerHTML = +b;
  if(b > 9){
    alert("You have spent all the points you can in this skill.");
  }
}
function decrease1(){
  b = Math.max(b-1,0);
  document.getElementById('boldstuff2').innerHTML = +b;
}

var c=0;
function increase2(){
  c = Math.min(c+1,10);
  document.getElementById('boldstuff3').innerHTML = +c;
  if(c > 9){
    alert("You have spent all the points you can in this skill.");
  }
}
function decrease2(){
  c = Math.max(c-1,0);
  document.getElementById('boldstuff3').innerHTML = +c;
} 
```

我的按钮：

```
 <div id='rem'>Remaining Skill Points: <b id="boldstuff">50</b></div>

 <div id='skill1'><input type="submit" class="skillbutton" onclick="decrease();increase1();" oncontextmenu="increase();decrease1();return false;"></div>
 <div id='counter1'><b id="boldstuff2">0</b></div>
 <div id='skill2'><input type="submit" class="skillbutton" onclick="decrease();increase2();" oncontextmenu="increase();decrease2();return false;"></div>
 <div id='counter2'><b id="boldstuff3">0</b></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:00:27.573

这里有很大的改进空间。`Math.min()`但我认为您主要担心的是您对and的目的有点困惑`Math.max()`。这些并不是真的要用作限制器（尽管它们在创建限制器时很有用）。相反，您可能只想进行一些比较，如下所示：

```
var max=50;
function decrease() { 
    if(max > 0) {
        max--; 
        document.getElementById('boldstuff').innerHTML = max;
    } else {
        alert("There are no more skill points to be spent.");
    }
}

function increase() {
    if(max < 50)
        max++; 
        document.getElementById('boldstuff').innerHTML = max;
    }
} 
```

但是，我认为也许您最好采用更面向对象的方法来解决问题。因为否则，当您尝试用小创可贴来压制小虫子时，您可能会遇到一个又一个的问题。考虑以下代码的“增强”版本：

```
var SkillManager = (function() {
    var max = 50,
        skills = {
            skill1: {
                cur: 0,
                max: 10
            },
            skill2: {
                cur: 0,
                max: 10
            }
        },
        totalUsed = 0;

    var increase = function(skill) {
        if (totalUsed < max && skills[skill].cur < skills[skill].max) {
            skills[skill].cur++;
            totalUsed++;
            updateDisplay(skill, skills[skill].cur, max - totalUsed);
        } else if(skills[skill].cur === skills[skill].max) {
            alert("You have maxed out that skill!");
        } else {
            alert("You have used all your skill points!");
        }
    };

    var decrease = function(skill) {
        if (skills[skill].cur > 0) {
            skills[skill].cur--;
            totalUsed--;
            updateDisplay(skill, skills[skill].cur, max - totalUsed);
        } else {
            alert("You can't decrease a skill with 0 points in it!");
        }
    };

    var updateDisplay = function(skill, value, totalRemaining) {
        document.getElementById(skill + "counter").innerText = value;
        document.getElementById("remainingPoints").innerText = totalRemaining;
    };

    return {
        decrease: decrease,
        increase: increase
    };
}());​ 
```

带有（稍作修改）的标记：

```
<div id='rem'>Remaining Skill Points: <b id="remainingPoints">50</b></div>

<div id='skill1'>
     <input type="button" class="skillbutton" onclick="SkillManager.increase('skill1')" oncontextmenu="SkillManager.decrease('skill1'); return false;" value="S1" />
</div>
<div id='skill1counter' style="font-weight: bold">0</div>
<div id='skill2'>
    <input type="button" class="skillbutton" onclick="SkillManager.increase('skill2')" oncontextmenu="SkillManager.decrease('skill2'); return false;" value="S2" />
</div>
<div id='skill2counter' style="font-weight: bold">0</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

此设置需要更多代码，但是当您添加技能时，您会注意到每个技能必须添加的代码量大幅下降（此时，每个技能大约需要 2 行代码）。此外，还有很多扩展空间，例如管理技能名称和通过`skills`对象提供更多元数据。归根结底，它更高效，更不容易出错，并且更容易维护和扩展。

你可以在这里看到它的实际效果：

[http://jsfiddle.net/uFrPQ/](http://jsfiddle.net/uFrPQ/)

PS - 您可能会考虑添加一个 DOM 抽象库，如 jQuery。它将允许您从标记中提取事件处理程序，同时保持浏览器兼容性。

# android - c / c ++中的Android系统应用程序？

> ID：12426914
> 
> 赞同：1
> 
> 时间：2012-09-14T14:50:22.177
> 
> 标签：android, c, linux, arm, native

我正在尝试使用有根的 Android 平板电脑。我需要在 C/C++ 中运行一些系统应用程序，这些系统应用程序可以在使用/不使用 NDK 的情况下作为本机应用程序运行。这将像现有的命令行应用程序（例如作为本机 ARM Linux 可执行文件的工具箱）一样工作。有这种可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T15:33:01.690

是的你可以。你可以使用 NDK 来做这件事，这会让你的事情变得更容易，交叉编译到 Android 支持的所有平台（ARM 变体和 x86）。您只需要像为本地 Java 方法创建共享库那样做。只需确保更改生成文件以使用`BUILD_EXECUTABLE`而不是`BUILD_SHARED_LIBRARY`创建可执行文件。当然，您不需要 APK 文件夹结构，只需要“jni”文件夹。

**教程**

创建项目文件夹：

```
mkdir project_folder
cd project_folder/jni
NDK_PROJECT_PATH=<path to>/project_folder 
```

`jni`在文件夹中创建 Android.mk makefile

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := teste
LOCAL_SRC_FILES := teste.c

include $(BUILD_EXECUTABLE) 
```

在`jni`. 在这种情况下，您可以从上面的 makefile 中看到，它是`teste.c`：

```
#include <stdio.h>

int main (){

    puts("Hello World");
    return 0;
} 
```

现在转到您的项目文件夹并从那里运行 ndk-build：

```
# ~/Downloads/android-ndk-r8b/ndk-build 
Compile thumb  : teste <= teste.c
Executable     : teste
Install        : teste => libs/armeabi/teste 
```

虽然它输出到 lib 文件夹，但它是一个可执行文件，您可以使用`file`

```
#file libs/armeabi/teste 
libs/armeabi/teste: ELF 32-bit LSB executable, ARM, version 1 (SYSV), dynamically linked (uses shared libs), stripped 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T15:13:24.987

是的，这是可能的。当您下载 NDK 时，您会获得一组工具（编译器、链接器等）、头文件和库。它与其他交叉编译环境没有太大区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T15:50:20.313

NDK 带有一个交叉编译器和足够的独立编程环境（包括和库）来移植简单的 C/C++ 应用程序以作为原生 Android 二进制文件运行。查看 NDK 中的 docs/STANDALONE-TOOLCHAIN.html 文件以获取文档。（可在[kandroid.com](http://www.kandroid.org/ndk/docs/STANDALONE-TOOLCHAIN.html)在线获取。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T16:02:40.767

我相信 NDK 无法访问足够的系统服务来编写完整的应用程序。你仍然需要用 Java 编写应用程序的脚手架，但你可以编写大量的本地库供 Java 调用。

# ruby-on-rails - Ruby on Rails - 唯一性

> ID：12426915
> 
> 赞同：2
> 
> 时间：2012-09-14T14:50:23.160
> 
> 标签：ruby-on-rails

我有一个关于唯一性验证的问题。

来自： http: [//guides.rubyonrails.org/active_record_validations_callbacks.html#uniqueness](http://guides.rubyonrails.org/active_record_validations_callbacks.html#uniqueness)

“它不会在数据库中创建唯一性约束，因此可能会发生两个不同的数据库连接为您打算唯一的列创建具有相同值的两条记录。为避免这种情况，您必须在您的数据库。”

这是否意味着每当我验证唯一性时，我都必须在数据库中添加一个索引？还是只有在可能同时插入两个记录时才需要这样做？

这里的最佳实践是什么：唯一性和索引总是在一起或取决于情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T15:01:51.550

它本质上是一个竞争条件。Alice 使用电子邮件地址 alice@gmail.com 注册并点击提交按钮两次。因为她击中它们的速度如此之快，所以她只记得它们，并且它们通过了验证。然后将两者都写入数据库。对此的解决方案是要求数据库在它们存储在内存中或写入数据库之间检查唯一性。

您需要做的是在迁移中添加这样的一行：

```
add_index :table_name, :column_name, unique: true 
```

就最佳实践而言，当有两个相同会导致问题时，您肯定想这样做。如果两条推文提交的内容相同，这可能不是什么大问题，但如果您有两个用户使用相同的电子邮件地址，那就会成为问题。

# java - 如何为用 netbeans 编写的项目创建安装文件？

> ID：12426916
> 
> 赞同：3
> 
> 时间：2012-09-14T14:50:29.540
> 
> 标签：java, swing, user-interface, netbeans, installation

我使用 Netbeans 创建了一个 GUI 应用程序，它与数据库（localhost）有一个连接。

现在我希望能够将它作为软件分发。

有没有办法为 Netbeans 项目生成安装文件？以及如何分发使用 MySQL 数据库的 Netbeans 项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T16:21:39.807

> how can I distribute a Netbeans project which uses a MySQL database?

You might want to get familiar with [NSIS](http://nsis.sourceforge.net/Main_Page). NSIS will enable you to automate the installation process.

Your installation process will have to do the following:

*   Check that the Java Runtime Environment is the same version you used or higher.
*   Install your application JAR file somewhere.
*   Install the MySQL version that your application requires
*   Create and initialize the tables for your application.

Your installation process can do the following:

*   Create an uninstall executable.
*   Add an icon so that the user can start your application.

This installation process will take some time to develop and test.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:28:56.127

您可能想要使用安装程序。看一下：

*   [安装4j](http://www.ej-technologies.com/products/install4j/overview.html)
*   [Installshield](http://www.flexerasoftware.com/products/installshield.htm)（商业）
*   如果您仅针对 Windows 平台，则为[高级安装程序](http://www.advancedinstaller.com/)

还有很多其他的，但我希望这可以帮助你......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T23:12:11.867

Use the solution made by the suppliers of Java - [Java Web Start](https://stackoverflow.com/tags/java-web-start/info).

*   The `deployJava.js` (described in the linked page) ensures the user has the minimum JRE needed to launch the app. & MySQL.
*   Launch the app. using Java Web Start.
    *   Reference an `installer-desc` extension for installing the DB. Store any set-up details into the `PersistenceService` for later use.

JWS works on all major platforms for which J2SE is available and also provides..

> ..many appealing features including, but not limited to, splash screens, desktop integration, file associations, automatic update (including lazy downloads and programmatic control of updates), partitioning of natives & other resource downloads by platform, architecture or Java version, configuration of run-time environment (minimum J2SE version, run-time options, RAM etc.), easy management of common resources using extensions..

# c# - Silverlight 退出浏览器模式

> ID：12426925
> 
> 赞同：1
> 
> 时间：2012-09-14T14:51:11.270
> 
> 标签：c#, wcf, ssl, silverlight-5.0, out-of-browser

silverlight 在 oob 模式下是否支持 SSL？我打开了 SSL，它在浏览器中运行良好，但它不连接 oob 模式。有什么我想念的吗？

谢谢

编辑：

```
_serviceHost = new ServiceHost(typeof(ApplicationService), new Uri(BaseAddress));

_serviceHost.Description.Behaviors.Add(new ServiceMetadataBehavior { HttpsGetEnabled = true });

var serviceBinding = new BasicHttpBinding(BasicHttpSecurityMode.Transport)
{
    MessageEncoding = WSMessageEncoding.Text,
    TextEncoding = Encoding.UTF8,
    BypassProxyOnLocal = false,
    UseDefaultWebProxy = true,
    CloseTimeout = new TimeSpan(10, 0, 0),
    OpenTimeout = new TimeSpan(10, 0, 0),
    SendTimeout = new TimeSpan(10, 0, 0),
    ReceiveTimeout = new TimeSpan(10, 0, 0),
    HostNameComparisonMode = HostNameComparisonMode.StrongWildcard,
    MaxBufferPoolSize = int.MaxValue,
    MaxReceivedMessageSize = int.MaxValue,
    AllowCookies = false,
    TransferMode = TransferMode.StreamedResponse,
    ReaderQuotas =
    {
        MaxDepth = 32,
        MaxStringContentLength = int.MaxValue,
        MaxArrayLength = 6553600,
        MaxBytesPerRead = 4096,
        MaxNameTableCharCount = 16384
    }
};

var policyRetrieverBinding = new WebHttpBinding(WebHttpSecurityMode.Transport)
{
    BypassProxyOnLocal = false,
    UseDefaultWebProxy = true,
    CloseTimeout = new TimeSpan(10, 0, 0),
    OpenTimeout = new TimeSpan(10, 0, 0),
    SendTimeout = new TimeSpan(10, 0, 0),
    ReceiveTimeout = new TimeSpan(10, 0, 0),
    HostNameComparisonMode = HostNameComparisonMode.StrongWildcard,
    MaxBufferPoolSize = int.MaxValue,
    MaxReceivedMessageSize = int.MaxValue,
    AllowCookies = false,
    TransferMode = TransferMode.StreamedResponse,
    ReaderQuotas =
    {
        MaxDepth = 32,
        MaxStringContentLength = int.MaxValue,
        MaxArrayLength = 6553600,
        MaxBytesPerRead = 4096,
        MaxNameTableCharCount = 16384
    }
};

//service endpoint
_serviceHost.AddServiceEndpoint(typeof(IApplicationService), serviceBinding, ServiceEndPoint);

//mex endpoint for metadata
_serviceHost.AddServiceEndpoint(typeof(IMetadataExchange), MetadataExchangeBindings.CreateMexHttpsBinding(), "mex");

//policy retriever endpoint
_serviceHost.AddServiceEndpoint(typeof(IPolicyRetriever), policyRetrieverBinding, string.Empty)
    .Behaviors.Add(new WebHttpBehavior());

//so we get detailed exceptions
_serviceHost.Description.Behaviors.Find<ServiceDebugBehavior>()
    .IncludeExceptionDetailInFaults = true;

_serviceHost.Open(); 
```

服务端点配置为使用：

```
"https://" + Environment.MachineName 
```

# python - pagerank python 实现

> ID：12426926
> 
> 赞同：0
> 
> 时间：2012-09-14T14:51:11.630
> 
> 标签：python, numpy, pagerank

我想将[PageRank MATLAB/Octave 实现](http://en.wikipedia.org/wiki/PageRank)转换为 python，但是涉及到：

```
a=array([[inf]])  
last_v = dot(ones(N,1),a) 
```

有一个`TypeError`。

```
Traceback (most recent call last):
File "/home/googcheng/page_rank.py", line 18, in <module>
pagerank(0,0)
File "/home/googcheng/page_rank.py", line 14, in pagerank
last_v = dot(ones(N,1),a)
File "/usr/lib/python2.7/dist-packages/numpy/core/numeric.py", line 1819, in ones
a = empty(shape, dtype, order)
TypeError: data type not understood 
```

一些代码[https://gist.github.com/3722398](https://gist.github.com/3722398)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:56:27.973

的第一个参数`ones`，形状，应该是一个元组。更改`ones(N,1)`为`ones((N,1))`。

# rabbitmq - Pika + RabbitMQ：将 basic_qos 设置为 prefetch=1 似乎仍然会消耗队列中的所有消息

> ID：12426927
> 
> 赞同：18
> 
> 时间：2012-09-14T14:51:13.600
> 
> 标签：rabbitmq, pika, qos

我有一个 python 工作程序客户端，它启动了 10 个工作程序，每个工作程序连接到一个 RabbitMQ 队列。有点像这样：

```
#!/usr/bin/python
worker_count=10

def mqworker(queue, configurer):
    connection = pika.BlockingConnection(pika.ConnectionParameters(host='mqhost'))
    channel = connection.channel()
    channel.queue_declare(queue=qname, durable=True)
    channel.basic_consume(callback,queue=qname,no_ack=False)
    channel.basic_qos(prefetch_count=1)
    channel.start_consuming()

def callback(ch, method, properties, body):
    doSomeWork();
    ch.basic_ack(delivery_tag = method.delivery_tag)

if __name__ == '__main__':
    for i in range(worker_count):
        worker = multiprocessing.Process(target=mqworker)
        worker.start() 
```

我遇到的问题是，尽管在通道上设置了 basic_qos，但第一个启动的工作人员接受了队列外的所有消息，而其他工作人员则坐在那里闲置。我可以在 rabbitmq 界面中看到这一点，即使我设置`worker_count`为 1 并将 50 条消息转储到队列中，所有 50 条消息都进入“未确认”存储桶，而我希望 1 变为未确认，而其他 49 条消息准备好。

为什么这不起作用？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-14T14:55:22.893

我似乎已经通过移动`basic_qos`调用的地方解决了这个问题。

将它放在之后`channel = connection.channel()`似乎会改变我所期望的行为。

# java - 将 Bundle 中的微调器项目从一个活动移动到另一个活动

> ID：12426931
> 
> 赞同：2
> 
> 时间：2012-09-14T14:51:35.920
> 
> 标签：java, android, xml

我正在尝试从我的 android 应用程序上的 Spinner 获取值并将其转换为字符串，以便我可以将它作为 Bundle 中的数据项移动到另一个活动。我已经成功地使用`getText().toString();`方法组合移动了 EditText 值。我正在寻找相同的结果，但现在使用 Spinner 项目，但到目前为止还没有成功。

这是代码：

当用户在方法中选择按钮时调用此`onClick`方法：

```
public void commitData(){
    Bundle bundle = new Bundle();
    bundle.putString("key", txtBuildingName.getText().toString()); //Gets the TEXT that the TEXTVIEW was holding converts it to a String and adds to the Extras bundle

    Bundle bundle1 = new Bundle();
    bundle1.putString("key1", txtDescription.getText().toString()); // Same again

    Bundle bundle2 = new Bundle();
    bundle2.putString("key2", type.getItemAtPosition(type.getSelectedItemPosition()).toString());

    Bundle bundle3 = new Bundle();
    bundle3.putString("key3", project.getItemAtPosition(project.getSelectedItemPosition()).toString());

    Intent newIntent = new Intent(this.getApplicationContext(), DataSummary.class);
    newIntent.putExtras(bundle);
    newIntent.putExtras(bundle1);
    startActivityForResult(newIntent, 0);
} 
```

我没有从项目中得到任何结果，并且使用`type.getItemAtPosition().getSelectedItemPosition()).toString();`和项目相同的类型代码行。

下面显示的是从输入表单接收和输出此数据的 Activity 的代码。

文本视图结果名称；TextView 结果描述；文本视图结果类型；文本视图结果项目；

```
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState); 
   setContentView(R.layout.activity_data_summary);

   //Check if there is anything in the 'bundle' and if not produce message - AVOIDS NULLPOINTEREXCEPTION when navigating to Activity
   Bundle bundle = this.getIntent().getExtras();     
   if (bundle != null){       
   String name = bundle.getString("key");
   String description = bundle.getString("key1"); //gets data from DataEntry activity
   String type = bundle.getString("key2");
   String project = bundle.getString("key3");

   resultName=(TextView)findViewById(R.id.resultName);  //adds the TextViews to the activity
   resultType=(TextView)findViewById(R.id.resultType);
   resultDescription=(TextView)findViewById(R.id.resultDesc);
   resultProject=(TextView)findViewById(R.id.resultProject);

   resultName.setText(name); // Fills the textviews with imported data
   resultType.setText(type);
   resultDescription.setText(description);
   resultProject.setText(project);
   }    

   else
   {
       Toast.makeText(DataSummary.this,"Received no data yet!", Toast.LENGTH_LONG).show();
   }

} 
```

任何人都知道如何成功地从 Spinner 项目中收集数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T14:59:52.903

为什么要传递不同的捆绑包？我猜，在您接收活动的一边，您只会得到第一个捆绑包。

通过以下编辑尝试您的代码：

```
public void commitData(){

    Bundle bundle = new Bundle();
    bundle.putString("key", txtBuildingName.getText().toString()); //Gets the TEXT that the TEXTVIEW was holding converts it to a String and adds to the Extras bundle
    bundle.putString("key1", txtDescription.getText().toString()); // Same again
    bundle.putString("key2", type.getItemAtPosition(type.getSelectedItemPosition()).toString());
    bundle.putString("key3", project.getItemAtPosition(project.getSelectedItemPosition()).toString()); 
```

# json - Play2 隐式读取或格式化 Json 异常

> ID：12426934
> 
> 赞同：0
> 
> 时间：2012-09-14T14:51:49.303
> 
> 标签：json, scala, playframework

这是我的 Cout 对象：

```
case class Cout (idCout:Int, cout:String)

object Cout{

  implicit object CoutFormat extends Format[Cout] {
    def reads(json: JsValue): Cout = Cout(
      (json \ "idCout").as[Int],
      (json \ "cout").as[String]
    )

    def writes(s: Cout): JsValue = JsObject(Seq(
      "id" -> JsNumber(s.idCout),
      "cout" -> JsString(s.cout)
    ))
  }
} 
```

我在使用 WS 调用 web 服务时尝试使用此类：

```
val cout = response.json.as[Cout] 
```

但是 scala 编译器一直在抱怨：

```
[RuntimeException: Int expected] 
```

在线上`(json \ "idCout").as[Int],`

谁能告诉我我做错了什么？

*   从[https://sites.google.com/site/play20zh/scala-developers/working-with-json获取示例](https://sites.google.com/site/play20zh/scala-developers/working-with-json)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:18:10.197

您的`Format`实例中有一个错字：您正在编写一个`"id"`字段，但试图读取一个名为`"idCout"`. 更改其中之一：

```
case class Cout (idCout: Int, cout: String)

object Cout {
  implicit object CoutFormat extends Format[Cout] {
    def reads(json: JsValue): Cout = Cout(
      (json \ "idCout").as[Int],
      (json \ "cout").as[String]
    )

    def writes(s: Cout): JsValue = JsObject(Seq(
      "idCout" -> JsNumber(s.idCout),
      "cout" -> JsString(s.cout)
    ))
  }
} 
```

它有效：

```
scala> Json.toJson(Cout(1, "test")).as[Cout]
res0: Cout = Cout(1,test) 
```

# algorithm - 基于用户偏好的排名

> ID：12426935
> 
> 赞同：0
> 
> 时间：2012-09-14T14:51:54.937
> 
> 标签：algorithm, sorting, comparison, ranking, survey

我正在尝试为以下问题提出一种算法。

有一组 N 个对象，每个对象有 M 个不同的变体。目标是根据来自不同用户的反馈找到最适合每个对象的变体。

最后，用户将被放置在一个类别中，以确定哪个类别更喜欢哪个变体。

要求最多并排放置一个对象的两个变体。

这样做的问题是，如果 M 很大，那么可能的组合数量会变得太大，用户可能会变得不感兴趣并可能会扭曲结果。

一旦我知道用户的选择顺序，就可以使用 Elo 算法/分数，如本文中所讨论 [的基于比较的排名算法](https://stackoverflow.com/questions/3937218/comparison-based-ranking-algorithm)

问题：

是否有一种算法可以减少呈现给用户的可能组合的数量并且仍然获得正确的顺序？

例如：7 种不同类型的水果。每种水果都有 5 种不同的形状。用户根据他们喜欢的大小对每种水果给出 1-5 的排名。这意味着对于每个水果，用户必须从最多 10 种组合中进行选择（因为大小不同，没有任何意义表示为 {1,1}）。我将如何减少“10 个组合”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:16:07.943

如果用户的偏好始终与总顺序一致，并且您可以更改比较以考虑到目前为止所做的比较结果，那么您只需要一个有效的排序算法。对于 5 个项目，您似乎需要至少 7 次比较 - 请参阅[使用最少元素比较对 5 个元素进行排序](https://stackoverflow.com/questions/11706501/sorting-5-elements-with-minimum-element-comparison)。您还可以查看[http://en.wikipedia.org/wiki/Sorting_network](http://en.wikipedia.org/wiki/Sorting_network)。

通常，当您尝试进行某种实验设计时，您经常会发现进行随机比较虽然不是最佳的，但距离最佳答案并不太远。

# vb.net - 在 Linq 加入查询中选择最大日期

> ID：12426938
> 
> 赞同：0
> 
> 时间：2012-09-14T14:52:09.723
> 
> 标签：vb.net, linq, inner-join, max

我正在尝试使用 VB 进行连接查询 Linq。我想返回最大 EnterTime，但出现错误，说“

> 无法将 System.Linq.Iqueryable(Of Date) 转换为 System.Nullable(Of Date)

我该如何解决这个问题？

```
 Dim results =
            From b In context.H_Beneficiary
            Join e In context.Employees On b.EmployeeId Equals (e.EmployeeId)
            Join c In context.Companies On e.CompanyId Equals (c.CompanyId) _
            Where e.IntegrationId.Equals(c.CompanyId) _
            And (b.EndDate Is Nothing Or b.EndDate >= DateTime.Today)
            Select b.EnterTime 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:48:14.843

您的 Linq 查询返回日期序列，而不是单个日期。这就是为什么任务不起作用的原因。

要从查询中分配最大日期，您可以按日期对查询进行排序，而不是选择第一个结果（如果有）：

```
Dim results =
        From b In context.H_Beneficiary
        Join e In context.Employees On b.EmployeeId Equals (e.EmployeeId)
        Join c In context.Companies On e.CompanyId Equals (c.CompanyId) _
        Where e.CompanyIntegrationId.Equals(c.CompanyId) _
        And (b.EndDate Is Nothing Or b.EndDate >= DateTime.Today)
        Order By b.EnterTime Descending
        Select b.EnterTime

Dim latestDate As Nullable(Of DateTime) = results.FirstOrDefault() 
```

# linq - EF 中的 LINQ 查询 - 多对多和交叉连接

> ID：12426940
> 
> 赞同：5
> 
> 时间：2012-09-14T14:52:19.533
> 
> 标签：linq, entity-framework, linq-to-entities, many-to-many

我想用 LINQ 处理一个简单的存储过程：

```
SELECT 
CASE  WHEN mg.MovieID IS NULL THEN 0 else 1 end as Selected ,
g.genreID, g.GenreName
FROM dbo.Genres g LEFT JOIN 
(
    SELECT MovieID, GenreID FROM [dbo].[MovieGenre] m 
    WHERE m.MovieID = @Movie
) MG 
ON g.[GenreID]  = mg.[GenreID]
ORDER BY g.GenreName 
```

我认为这应该很简单，我认为这将是一个常见的要求，但我无法弄清楚，也没有通过搜索网络找到解决方案。

该应用程序位于由 EF 模型支持的 WPF 中。由于 EF 隐藏了连接表，我需要 LINQ 语法来处理中间表的缺失。

带有简单连接表的经典多对多：表 1：电影，表 2：流派，连接表：电影流派。在 UI 中，用户选择特定电影。对于那部电影，我想带回所有类型和一个布尔值，指示该类型是否已分配给电影。在 LINQ 中尝试这个数小时让我失败了，所以目前的解决方案是让上面的存储过程为我生成值。我不会总是使用存储过程来执行此操作，并且希望看到 LINQ 解决方案。

这是实际的 SQL 表结构

```
CREATE TABLE [dbo].[Genres](
    [GenreID] [int] IDENTITY(1,1) NOT NULL,
    [GenreName] [nvarchar](15) NOT NULL,
 CONSTRAINT [PK_Genres] PRIMARY KEY CLUSTERED 
(
    [GenreID] ASC
)) ON [PRIMARY]

GO  

CREATE TABLE [dbo].[Movies](
    [MovieID] [int] IDENTITY(1,1) NOT NULL,
    [MovieTitle] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_Movies] PRIMARY KEY CLUSTERED 
(
    [MovieID] ASC
))
ON [PRIMARY]
GO

CREATE TABLE [dbo].[MovieGenre](
    [MovieID] [int] NOT NULL,
    [GenreID] [int] NOT NULL,
 CONSTRAINT [PK_MovieGenre] PRIMARY KEY CLUSTERED 
(
    [MovieID] ASC,
    [GenreID] ASC
)) ON [PRIMARY]
GO

ALTER TABLE [dbo].[MovieGenre]  WITH CHECK ADD  CONSTRAINT [FK_Genres] FOREIGN KEY([GenreID])
REFERENCES [dbo].[Genres] ([GenreID])
GO
ALTER TABLE [dbo].[MovieGenre] CHECK CONSTRAINT [FK_Genres]
GO
ALTER TABLE [dbo].[MovieGenre]  WITH CHECK ADD  CONSTRAINT [FK_Movies] FOREIGN KEY([MovieID])
REFERENCES [dbo].[Movies] ([MovieID])
GO
ALTER TABLE [dbo].[MovieGenre] CHECK CONSTRAINT [FK_Movies]
GO 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T15:19:30.303

这应该可以解决问题。

*   `from`与`in`导航属性一起使用`join`
*   `DefaultIfEmpty`使其成为左连接
*   `? :`对 case 语句使用三元运算符

询问：

```
var query = from g in context.Genres
            from m in g.Movies.Where(x => x.MovieID == movieId)
                               .DefaultIfEmpty()
            orderby g.GenreName
            select new {
              Selected = m == null ? 0 : 1,
              g.genreID, 
              g.GenreName
            }; 
```

# html - CSS 页脚样式

> ID：12426941
> 
> 赞同：0
> 
> 时间：2012-09-14T14:52:26.390
> 
> 标签：html, css, salesforce

我正在 salesforce 中创建一个 pdf，它以 6 到 7 页显示大量数据。我的问题是，我试图在每一页上显示页码。但是，相反，页码只出现在最后一页。我确信我的逻辑工作正常，但我不确定 CSS。我使用的 CSS 是，

CSS：

```
<div style="white-space:nowrap; top:99%; right:0px; position:absolute; font-size:10px; color:#155196" >
      page no 
<div> 
```

我已将其更改为底部：0px；但它仍然无法正常工作。这是我显示页码的全部代码。

```
<div style="white-space:nowrap;position:absolute;bottom:0%;  font-size:10px; color:#155196" >
       page {!p} of {!pageList.size} 
</div> 
```

感谢您的回复。我的代码看起来像这样。

```
<apex:repeat value="{!pageList}  var="p">
    <div style="white-space:nowrap;position:absolute;bottom:0%;  font-size:10px; color:#155196" >
            page {!p} of {!pageList.size} 
    </div>
</apex:repeat> 
```

我不知道这段代码有什么问题。

我的输出是

第 {1,2,3,4,5,6,7} 页，共 7 页。页码相互重叠并显示在末尾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:15:03.307

而不是绝对你会给出相对位置然后它会正常工作

```
<div style="white-space:nowrap; position: relative; top: 0; bottom: 0;font-size:10px; color:#155196" >
      page no 
<div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:08:08.307

如果我们看到更多您的代码可能会有所帮助，但您可以尝试更改您的代码`top:99%;`以`bottom:0px;` 查看[jsFiddle](http://jsfiddle.net/Eq5by/)

# perl - Emacs 上的 Perl 调试器：清除屏幕（缓冲区）？

> ID：12426942
> 
> 赞同：2
> 
> 时间：2012-09-14T14:52:35.170
> 
> 标签：perl, debugging, emacs

假设我`perldb`在 Emacs (Mx perldb) 上使用 Perl 进行了长时间的调试会话。输出堆积如山，在某些时候变得难以浏览。

我可以用 重新启动调试器`R`，但这不会清除以前的输出。是否有清除 Perl 调试器缓冲区输出的命令，而无需终止调试器并启动新会话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T15:34:38.963

你可以运行`comint-truncate-buffer`。这将从缓冲区中删除除最后 1024 行之外的所有行。尺寸可以通过改变来定制`comint-buffer-maximum-size`。

如果您想自动截断缓冲区，请运行以下 elisp 片段：

```
(add-hook 'comint-output-filter-functions 'comint-truncate-buffer) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T23:39:00.533

调试器的输入和输出与其他任何内容一样是缓冲区内容——如果你想删除它，就这样做。例如，`C-x h C-w`（`mark-whole-buffer`后跟`kill-region`）在`perldb`缓冲区中工作得很好，并且最接近文本终端中的“清除屏幕”命令。

# facebook - Facebook 如何处理无法连接到应用程序提供的实时更新 URL 的问题？

> ID：12426943
> 
> 赞同：1
> 
> 时间：2012-09-14T14:52:40.927
> 
> 标签：facebook, facebook-graph-api, real-time-updates

参考：http: [//developers.facebook.com/docs/reference/api/realtime/](http://developers.facebook.com/docs/reference/api/realtime/)

当为某种实时更新（例如用户属性）创建订阅时，如果提供的回调 URL 无法访问，会发生什么情况？

这里有几个子案例：

1.  订阅验证时未能到达回调 URL；
2.  订阅验证成功，但稍后在尝试更改通知时回调 URL 变得无法访问。

我感兴趣的主要是#2。通知是否进入重试队列？如果是这样，尝试了多少次重试，以及在多长时间内？有没有办法查询“错过”的通知？对于不同的故障模式（主机名查找、主机不可达、端口关闭、HTTP 响应中的错误返回码）是否有不同的处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:32:36.933

我在问题中链接的页面提供了这个答案：

> 如果向您的服务器发送更改通知失败，Facebook 将立即重试，然后在接下来的 24 小时内重试几次，频率逐渐降低。

没有我希望的那么详细，但可能已经足够好了。

# php - 发布具有几千个值的表单

> ID：12426944
> 
> 赞同：1
> 
> 时间：2012-09-14T14:52:44.867
> 
> 标签：php, post

我有这个基于语言的应用程序，其中包含每种语言程序每个部分的语言文件，例如：

```
// en.inc.php
$lang['main'] = 'this is my main string'; 
```

有些文件有超过 2000 个变量，我正在以我创建的 Web 表单更新翻译。

我所有变量很少的语言文件都在完美更新，较大的文件只是在随机变量处停止，并且我的更新脚本不执行。

`post_max_size = 8M`- 显然我的 2000 个 50-100 个字符的字符串总和不超过 8M 的数据（文件有 ~100KB）

上周一切正常，直到我将 PHP 更新为`5.3.16`.

帖子字段有什么变化吗？我很确定我缺少一些东西。`display_errors`由于某种不明原因，即使打开，我也没有收到任何错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T15:03:42.050

似乎很多人都不知道[**max_input_vars**](http://php.net/manual/en/info.configuration.php#max_input_vars)。它是在 5.3.9 中添加的。

> “可以接受多少个输入变量。使用该指令可降低使用哈希冲突的拒绝服务攻击的可能性。如果输入变量多于该指令指定的输入变量，则会发出 E_WARNING，并截断更多输入变量请求。此限制仅适用于多维输入数组的每个嵌套级别。

# objective-c - 计算 NSArray 中相等的对象

> ID：12426951
> 
> 赞同：3
> 
> 时间：2012-09-14T14:53:08.347
> 
> 标签：objective-c, foundation

我一直在试图找出一种方法来检查某个对象中有多少`NSArray`.

我浏览了文档，我很确定没有预制的方法。我也在这里找不到任何东西。

有人知道这样做的好方法吗？因为我真的什么都想不出来。

在这种特定情况下，我有一个带有字符串的数组（大多数情况下每个都有几个），我想计算数组中有多少字符串与我要求的匹配。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-14T15:07:32.670

如果这是数据结构的主要用途并且顺序无关紧要，请考虑切换到`NSCountedSet`专门用于有效解决此问题的。

如果您需要一个有序集合，并且您没有大量对象，那么快速枚举答案是最好的方法。

如果您想知道对象在哪里，请使用`indexesOfObjectsPassingTest:`.

如果您有大量对象，我会选择`indexesOfObjectsWithOptions:passingTest:`该`NSEnumerationConcurrent`选项。这将允许您在多个内核上搜索阵列。（这在多核设备上可能更快，即使这样也可能只有在你有一个非常大的集合时才会更快。在假设并发会更快之前，你应该绝对测试。）即使你只需要最终计数，某些数据集使用此方法然后在最终索引集上使用可能*会更快。*`count`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-14T15:06:59.757

实际上有一个方法：`- (NSIndexSet *)indexesOfObjectsPassingTest:(BOOL (^)(id obj, NSUInteger idx, BOOL *stop))predicate`

```
NSIndexSet *indexes = [array indexesOfObjectsPassingTest:^(id obj, NSUInteger index, BOOL *stop) {
    return [obj isEqualTo:myOtherObject];
}]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-14T15:07:20.713

听起来像 for 的一个案例，它使用它的初始化器`NSCountedSet`来完成你所追求的：`initWithArray:`

```
// Example array of strings
NSArray *array = [NSArray arrayWithObjects:
                  @"Joe", @"Jane", @"Peter", @"Paul",
                  @"Joe", @"Peter", @"Paul",
                  @"Joe",
                  @"Jane", @"Peter",
                  nil];

NSCountedSet *countedSet = [[NSCountedSet alloc] initWithArray: array];

// for-in will let you loop over the counted set
for (NSString *str in countedSet) {
    NSLog(@"Count of %@: %ld", str, (long)[countedSet countForObject:str]);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T14:58:04.830

一种方法是迭代和检查。

```
- (int)repeatsOf:(NSString *)repeater inArray:(NSArray *)array {
    int count = 0;

    for (NSString *item in array) {
        if ([item isEqualToString:repeater]) {
            count++;
        }
    }

    return count;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T14:58:09.753

你可以尝试一个简单的循环。假设`needle`是您的参考字符串，并且`array`是您的 NSArray 字符串：

```
unsigned int n = 0;

for (NSString * str in array)
{
    if ([needle isEqualToString:str])
    {
        ++n;
    }
} 
```

现在`n`保持字符串的数量等于`needle`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-14T14:58:22.270

你可以定义一个这样的函数：

```
- (int)countStringsThatMatch:(NSString*)match inArray:(NSArray*)array
{
    int matches = 0;

    for (id string in array) {
        if ([string isEqualToString:match]) {
            matches++;
        }
    }

    return matches;    
} 
```

然后像这样使用它：

```
int count = [self countStringsThatMatch:@"someString" inArray:someArray]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-14T15:04:09.007

```
- (NSUInteger) objectCountInArray:(NSArray *)array 
                   matchingString:(NSString *)stringToMatch {
    NSUInteger count = 0;
    for (NSString *string in array) {
        count += [string isEqualToString:stringToMatch] ? 1 : 0;
    }

    return count;
} 
```

您可以尝试扩展它以使用获取对象并返回 BOOL 的块。然后你可以用它来比较你想要的任何东西的数组。

# orm - dapper 填充 DropDownlist

> ID：12426953
> 
> 赞同：3
> 
> 时间：2012-09-14T14:53:08.637
> 
> 标签：orm, dapper

我有一个简单的 Poco

```
public virtual short UserID
{
  get;
  set;
}

[Required]
public virtual string UserName
{
  get;
  set;
}
public virtual string Password
{
  get;
  set;
}

public virtual string Email
{
  get;
  set;
} 
```

我目前正在使用 Dapper ORM。

有没有人有一个很好的例子来说明我如何使用 dapper ORM 来创建一个下拉列表？

查询应该返回`Key=UserID`并`Value=UserName`在一个列表中，以便我可以检索键并填充 DropDownList。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T15:07:49.243

您可以创建一个代表该对的类：

```
class SelectItem
{
    public long Key {get;set;}
    public string Value {get;set;}
}

var list = connection.Query<SelectItem>(" select id Key UserName Value from yourtable",null).ToList(); 
```

您使用别名将表字段映射到类属性名称。我假设您的表字段名称是`id`and `UserName`，根据您的情况更改它们。您还应该注意属性类型，如果它们不匹配，您可能会遇到错误的强制转换异常。或者，您可以使用[动态](http://msdn.microsoft.com/en-us/library/dd264736.aspx)版本：

```
 var list = connection.Query(" select id Key UserName Value from yourtable",null).ToList(); 
```

您将获得一个动态列表，每个动态列表都具有名为 Key 和 UserName 的属性。

# perl - 按另一个列表中定义的顺序从哈希中获取值

> ID：12426956
> 
> 赞同：2
> 
> 时间：2012-09-14T14:53:14.477
> 
> 标签：perl

寻找一种方法，如何按照另一个列表定义的顺序从哈希中获取值。

“演示”代码（实际值不同）：

```
use 5.014;
use warnings;

my $href = {
    'Long one' => 'v1',
    'xxx two'  => 'v2',
    'another3' => 'v3',
    'xfour'    => 'v4',
    'some5'    => undef,
};

#keys from the $href in defined order
my @order = ('Long one', 'xfour', 'nono', 'another3', 'some5', 'xxx two');

#in the real code:
#my $href = some_sub(......);  my @order = another_sub(....);

#cleanup the @order form undefined values
@order = grep { exists $href->{$_} && defined $href->{$_} } @order;

#my input
while(<DATA>) {
    chomp;

    #filter out nonexistent keys and undefined values
    my @defined_data = grep { exists $href->{$_} && defined $href->{$_} } split '/';

    my $str = "xx";
    $str = join('/',
               map { $href->{$_} }  some_my_sort(@defined_data)
    ) if @defined_data;

    say $str;
}

sub some_my_sort {
    my(@list) = @_;

    # "somewhat"sort the @list in order defined by @order
    # haven't any idea how to do this :(

    # __HERE NEED HELP__ to sort the @list, to the order defined in the @order

    #and get only first two values. if exists only one value, return only one
    if($#list > 0) {
        return ($list[0], $list[1]);
    }
    else {
        return($list[0]);
    }
}

__DATA__
another3/some5/Long one/xfour/xxx two
xxx two/blabla/some5/another3/xfour
some5
notexists/some5/xxx two/Long one
some5/another3 
```

对于上面的输入想要得到下一个输出：

```
v1/v4
v4/v3
xx
v1/v2
v3 
```

形成@ikegami 解决方案：

```
use 5.014;
use warnings;

my $href = { 'Long one' => 'v1', 'xxx two'  => 'v2', 'another3' => 'v3', 'xfour'    => 'v4', 'some5'    => undef, };
my @order = ('Long one', 'xfour', 'nono', 'another3', 'some5', 'xxx two');
@order = grep { exists $href->{$_} && defined $href->{$_} } @order;

my %order = map { $order{$_} => $_ } 0..$#order;
while (<DATA>) {
    chomp;
    my @keys = grep { defined $href->{$_} } split '/';
    @keys = sort { $order{$a} <=> $order{$b} } @keys;
    splice(@keys, 2) if @keys > 2;
    @keys = 'xx' if !@keys;
    say join '/', @{$href}{ @keys };
} 
```

得到下一个 - 错误 - 并不太明白为什么：

```
Global symbol "%order" requires explicit package name at ike line 8.
Execution of ike aborted due to compilation errors. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T15:05:10.373

定义@order后，定义%order_h：

```
my %order_h;
my $i = 0;
$order_h{$_} = $i++ for @order; 
```

然后，而不是关于排序的评论，添加这一行：

```
@list = sort { $order_h{$a} <=> $order_h{$b} } @list; 
```

* * *

这是整个代码的清理版本：

```
my %order = map { $order[$_] => $_ } 0..$#order;

while (<DATA>) {
    chomp;
    my @keys = grep { defined $href->{$_} } split '/';
    @keys = sort { $order{$a} <=> $order{$b} } @keys;
    splice(@keys, 2) if @keys > 2;
    say join '/', @keys ? @{$href}{ @keys } : 'xx';
} 
```

# mysql - mysql查询返回匹配元素列表的列表

> ID：12426959
> 
> 赞同：1
> 
> 时间：2012-09-14T14:53:30.397
> 
> 标签：mysql, sql

我有下表：

```
Products ::=
   id          int,
   category    varchar,
   line        varchar,
   type        varchar,
   marketType enum('first','second')

```

我想要做的是找到`id`所有具有相同, , ;的*产品的列表* 也可以是或空字符串。`category``line``type``line``NULL`

例子：

```
+--------+----------+--------+------+
| 编号 | 类别 | 线 | 类型 |
+--------+----------+--------+------+
| 123 | 1 | qwerty | X |
| 第534章 1 | qwerty | X |
| 90 | 1 | qwerty | Z |
| 第666章 2 | qwerty | Z |
| 第444章 2 | qwerty | Z |
| 1616 | 2 | qwerty | Z |
| 921 | 2 | | X |
| 16 | 2 | | X |
+--------+----------+--------+------+

```

我想要完成的结果是一个列表，其中每个元素都是匹配`id`s 的列表：

```
123, 534
90
666、444、1616
921, 16

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T14:57:18.553

[`GROUP_CONCAT()`](http://dev.mysql.com/doc/en/group-by-functions.html#function_group-concat)当按每组中相等的列对表进行分组时，您可以使用 MySQL 的函数：

```
SELECT   GROUP_CONCAT(id)
FROM     Products
GROUP BY category, line, type 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/25761/1/0)上查看。

# tfs - 如何从源代码管理中获取迭代路径中的 ChangesetID 列表？

> ID：12426960
> 
> 赞同：0
> 
> 时间：2012-09-14T14:53:52.147
> 
> 标签：tfs, tfsbuild

我想获取与迭代路径关联的更改列表（即 ChangeSetID）。有没有办法我们可以得到他们的名单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:40:31.220

只要您将变更集链接到您的工作项！

签入和迭代之间没有直接关系，除非它是在哪里创建的。当您的开发人员签入时，他们可以选择将他们的签入与工作项跟踪系统中的一个或多个工作项相关联。所以：

迭代 -> 工作项 -> 变更集

因此，为了检索与迭代关联的变更集列表，您：

1.  使用 API 查询 [System.Iteration] 在 "[project]\Release 1\Sprint 1" 下的所有工作项
2.  循环遍历返回的每个工作项并返回所有变更集链接

我希望这可以帮助你...

代码转述：

**获取工作项商店**

```
_store = collection.GetService<WorkItemStore>(); 
```

**获取查询结果**

```
_store.Query("SELECT [System.Id], [System.WorkItemType], [System.Title], [System.AssignedTo], [System.State] FROM WorkItems WHERE [System.TeamProject] = @project  AND  [System.IterationPath] UNDER 'TfsExtensions\TfsFieldAnnotate\Release 1' ORDER BY [System.Id] ") 
```

然后每个工作项都包含“wi.Links”，您应该能够轻松找到 Changeset Lin Type...

# jquery - 使用特殊字符开始自动完成

> ID：12426964
> 
> 赞同：0
> 
> 时间：2012-09-14T14:54:29.910
> 
> 标签：jquery, primefaces

我想用特殊字符启动自动完成。例如 @ 或 +

如果用户键入 @ 或 + 则它会启动自动完成。我如何使用 primefaces 自动完成/texarea 做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:55:59.923

```
$('#text_area_id').keyup( function(){
    var $_this = $(this), //this is js dom object $_this is jquery object
    atOrPlusCheck = $_this.val().match(/[@+]/g); //returns null if no matches

    if(atOrPlusCheck){
        someAutoCompleteFunction(this);
    }
} ); 
```

无法帮助您处理primefaces。另外，我更喜欢keyup，但有人可以按住'@'，直到他们放开钥匙，事件才会触发。所以它可能是 '@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@<autocomplete>' 这可能不是问题.

您可以使用 keydown 但随后您会反复敲击可能会变得混乱的事件处理程序。

# javascript - Ember 更复杂的例子

> ID：12426967
> 
> 赞同：3
> 
> 时间：2012-09-14T14:54:36.930
> 
> 标签：javascript, ember.js

上周我在探索 Ember 和 Backbone。我很容易进入骨干，但 Ember（甚至更难学习）给了我更多选择。从 ember 网站我发现只有基本的例子。

是否有一些更复杂的示例可以演示以下功能：

1.  更复杂案例的路由和历史记录，例如 /articles/view/12、/blogs/12/post1234。我想知道 ember 如何处理一堆不同的 url。嵌套路线？我可以动态添加路由吗？
2.  数据操作
3.  验证
4.  本土化

最重要的是：

如何将我的逻辑分成不同的文件？就像是

*   控制器

    *   HomeController.js
    *   博客控制器.js
    *   文章Controller.js
*   意见

*   家
    *   索引.js
    *   关于.js
*   博客
    *   索引.js

等等

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T15:18:24.203

我刚刚更新了一个基于 Rails 的 ember / ember-data 示例，以说明 ember 路由器和 ember-data 的最新更改：[https ://github.com/dgeb/ember_data_example](https://github.com/dgeb/ember_data_example)

我希望你会发现它是嵌套路由和基本数据操作的一个很好的例子。因为 ember-data 还没有包含验证逻辑，所以这个例子依赖于表单中的 Bootstrap 验证（绝对不是最健壮的解决方案）。

我正在根据这个例子编写一些博客文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T13:06:20.550

嗨，我遇到了同样的问题，发现以下文章或博客文章对 Ember.js 的使用非常有帮助 - [http://trek.github.com/](http://trek.github.com/)

我建议检查一下

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T07:52:17.073

使用最新资源查看[Ember 示例](https://github.com/wulftone/rails-ember-example)

```
DEBUG: ------------------------------- ember.js:339
DEBUG: Ember.VERSION : 1.0.0-rc.1 ember.js:339
DEBUG: Handlebars.VERSION : 1.0.0-rc.3 ember.js:339
DEBUG: jQuery.VERSION : 1.9.1 ember.js:339
DEBUG: ------------------------------- 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-26T17:12:32.440

Addy Osmani 的 TodoMVC 项目具有 Ember 版本：

[http://todomvc.com/architecture-examples/emberjs/](http://todomvc.com/architecture-examples/emberjs/)

它可能拥有您入门所需的一切。

# android - SharedPreferences 跨应用程序

> ID：12426970
> 
> 赞同：0
> 
> 时间：2012-09-14T14:54:58.630
> 
> 标签：android, sharedpreferences

我有 2 个应用程序 Application 1 ( `com.mine.app1`)，我在其中声明了一个`SharedPreference`.

```
SharedPreferences controlinfo = getSharedPreferences("pincode", MODE_WORLD_WRITEABLE | MODE_WORLD_READABLE);
SharedPreferences.Editor editor = controlinfo.edit();

editor.putString("pincode", "dddd");
editor.commit(); 
```

我有一个应用程序 2 ( `com.mine.app2`)，我在其中尝试`SharedPreference`从应用程序 1 中读出。

在这里，我有以下代码（在单击按钮下）：

```
Context con = createPackageContext("com.mine.app1", 0);
SharedPreferences interalPref = getSharedPreferences("pincode", MODE_PRIVATE); //shared pref of App 2 (this app)
SharedPreferences externalPref = con.getSharedPreferences("pincode", MODE_PRIVATE); //shared pref of App 1
//note: MODE_PRIVATE doesn't matter

String internalPincode = interalPref.getString("pincode", "none");
String externalPincode = externalPref.getString("pincode", "none"); 
```

`internalPincode`在这种情况下，我得到`externalPincode`“无”。

但是，当我更改顺序时`getSharedPreference`：

```
Context con = createPackageContext("com.mine.app1", 0);
SharedPreferences externalPref = con.getSharedPreferences("pincode", MODE_PRIVATE); //shared pref of App 1
SharedPreferences interalPref = getSharedPreferences("pincode", MODE_PRIVATE); //shared pref of App 2 (this app)

String internalPincode = interalPref.getString("pincode", "none");
String externalPincode = externalPref.getString("pincode", "none"); 
```

在这种情况下，我得到了两者`internalPincode`和`externalPincode`“dddd”（这是应用程序 1 ( `com.mine.app1`) 中设置的值）

我希望在这两种情况下`internalPincode`都会返回“none”和`externalPincode`“dddd”。

为什么不呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T19:04:23.607

> 我有一个应用程序 2 (com.mine.app2)，我在其中尝试从应用程序 1 中读取 SharedPreference。

这不是一个好主意。用户可以随时删除应用程序 1，此时应用程序 2 将无法再获取此数据。

相反，使用同步模型。让应用程序 1 在首选项更改时发送广播`Intent`，并附加签名级别的权限，以便只有应用程序 2（或您编写的任何其他人）可以接收它。然后应用程序 2 可以更新它自己的本地数据存储（例如，它自己的`SharedPreferences`）。应用程序 2 也可以这样做，允许用户修改其偏好数据的副本并发送广播以让其他应用程序知道。这样，如果删除任何一个应用程序，其他应用程序不会丢失其偏好数据，但一切都可以保持同步。

# android - Android上的人脸检测

> ID：12426972
> 
> 赞同：1
> 
> 时间：2012-09-14T14:55:05.987
> 
> 标签：android, detection

> **可能重复：**
> [Android 中的人脸检测？](https://stackoverflow.com/questions/4125821/face-detection-in-android)

我想使用人脸检测器 API 为 Android 操作系统启动一个课程作业项目。它应该检测图片上人脸的位置。只需用矩形包围它来标记它。就像这个应用程序一样：[https ://play.google.com/store/apps/details?id=com.vediket.facerecog&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS52ZWRpa2V0LmZhY2VyZWNvZyJd](https://play.google.com/store/apps/details?id=com.vediket.facerecog&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS52ZWRpa2V0LmZhY2VyZWNvZyJd)

有人可以提供我的示例代码吗？

# html - 仅在 Lynx 中显示消息？

> ID：12426977
> 
> 赞同：1
> 
> 时间：2012-09-14T14:55:17.350
> 
> 标签：html, lynx

我在网站上有一张带有文字的图片。如果图像被禁用（包括 Lynx），有没有办法显示纯文本代替图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T14:57:28.277

使用`alt`属性并将文本放在那里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T14:58:50.973

使用 img 标签的 alt 参数

```
<img src="url" alt="alternate text"/> 
```

# c# - C# 在语言环境中将字符串转换为双精度

> ID：12426978
> 
> 赞同：2
> 
> 时间：2012-09-14T14:55:20.213
> 
> 标签：c#, string-conversion

在我的语言环境中，小数点分隔符是“，”。

但是，我仍然想编写一个 C# 应用程序，它适用于使用“。”的数字。作为小数分隔符。

```
 string b = "0,5";
        double db = double.Parse(b); // gives 0.5

        string a = "0.5";
        double da = double.Parse(a); // gives 5, however i would like to get 0.5 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-14T14:57:14.327

您需要将文化指定为 的第二个参数[`double.Parse`](http://msdn.microsoft.com/en-us/library/system.double.parse.aspx)，例如

```
double da = double.Parse(a, CultureInfo.InvariantCulture); 
```

几乎所有格式化/解析方法都具有采用 的重载[`IFormatProvider`](http://msdn.microsoft.com/en-us/library/system.iformatprovider.aspx)，而最常用的实现`IFormatProvider`是[`CultureInfo`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx)。

# eclipse - 如何在我的 Mac 上将 Java 7 JRE 添加到 Eclipse？

> ID：12426985
> 
> 赞同：4
> 
> 时间：2012-09-14T14:55:38.600
> 
> 标签：eclipse, java

我有一台 Mac，我最近在上面安装了 Java 7。但是，我的问题是，我如何让 Eclipse (Juno) 知道这个安装。我转到首选项菜单并选择 Java > Installed JREs 以进入此屏幕

![在此处输入图像描述](../Images/a7ff3487b5e7d9c6c2ab72ccb3911c44.png)

我点击了添加按钮，但我不确定我需要添加什么：

![在此处输入图像描述](../Images/3caaa35417983b8b46db18c37ca57c4a.png)

我原以为我应该添加 .jdk 文件，但 Eclipse 不喜欢这样。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T15:39:11.377

对于最新版本（07），您可以输入 /Library/Java/JavaVirtualMachines/jdk1.7.0_07.jdk/Contents/Home/ 而不是使用目录...按钮

# haskell - 从解析字节流返回一个类型列表，其中长度直到运行时才知道

> ID：12426986
> 
> 赞同：2
> 
> 时间：2012-09-14T14:55:40.673
> 
> 标签：haskell, types, binary, bytestring

我认为这更多的是我缺乏对类型复杂性的理解。试图解决这个问题，我觉得我已经接近了几次，但还没有。

我正在尝试使用 Data.Binary 从流中读取。我已经到了下一节可能有一个或多个块的地步，但是在您开始解析流之前不知道信息。我在返回这些多个块时遇到问题。

这是代码，如果我以错误的方式进行此操作，请告诉我。但请记住，我需要能够轻松地使用相同的脚手架来写回流。

可能有用的信息：

*   流是一个 PE 文件
*   我正在使用镜头（fclabels）
*   DataDirectory 类型嵌套在其他类型的深处。

> ```
> data DataDirectory = 
>   DataDirectory { _dataEntryList ::  [DataEntry] } deriving (Show, Eq, Ord)
> 
> data DataEntry = DataEntry
>   { _virtAddr :: Word32            -- VirtualAddress ^ relative virtual address of the table
>   , _size :: Word32                -- Size ^ size of the table in bytes
>   } deriving (Show, Eq, Ord)
> 
> parseDataDir :: Word32 -> Get DataDirectory
> parseDataDir n = do
>   -- PE Files have a maximum of 16 sections in the DataDir
>   -- most windows tools just set this to 16 by default
>   -- instead of hard-coding 16 sections we will verify
>   let nDirs = fromIntegral (min mAX_NUMBEROF_DIRECTORY_ENTRIES n) :: Int
>   dd_dentries <- parseDataEntry nDirs
> 
>   return $ DataDirectory dd_dentries
> 
> parseDataEntry :: Int -> [Get DataEntry] -- Not exactly sure on return type here
> parseDataEntry n = 
>   Prelude.replicate n $ getWord32le >>= \vAddr -> getWord32le >>= \ddSize -> return $ DataEntry vAddr ddSize 
> ```

到目前为止，我一直避免抓取整个流并将***nDirs***乘以8 个字节来获取长度和解析。这当然适用于这种情况，但可能不会在其他地方降低范围。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T15:18:49.630

[使用 Hoogle 搜索您想要的类型。](http://www.haskell.org/hoogle/?q=Int+-%3E+Get+DataEntry+-%3E+Get+%5BDataEntry%5D)

# rendering - Java，JFrame在添加JTextfield后不渲染组件

> ID：12426988
> 
> 赞同：-1
> 
> 时间：2012-09-14T14:55:48.010
> 
> 标签：rendering, jtextfield

所以我在笔记本电脑上安装了 Eclipse，并开始了一个新的学校项目。我的程序运行良好，直到我添加了一个 JTextfield，当我这样做时，它只会显示一个空的灰色 JFrame，而不是包含我所有组件的 JFrame。如果我删除带有 JTextfield 的代码行，它会在我运行时再次显示。同样对于 JTextfield 行，JFrame 是灰色的，直到我调整窗口大小，然后一切都显示正常.. 但我不想每次运行它时都调整我的 JFrame 大小.. 首先我运行的是 Java 7，所以降级为 Java 6，但我仍然有同样的问题......

所以添加这个：

```
JTextField txtMyField = new JTextField(10);
myFrame.add(txtMyField); 
```

会把事情搞砸，删除这两行代码将使它再次工作。我尝试制作一个新项目，它工作正常，直到我添加一个文本字段。我在 Eclipse 中尝试了一个新的工作区，在我添加一个文本字段之前工作正常。

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:30:55.987

`myjframe.setVisible(true);`试试这个，在添加所有摆动组件后使 jframe 可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:01:46.213

但是，如果没有您的确切代码，我只能假设。

如果你调用 myFrame.add(txtMyField); 您将其添加到与 JPanel 相同的级别。尝试这个

```
JPanel panel = new JPanel();

JTextField field1 = new JTextField(10);
panel.add(field1)

JTextField field2 = new JTextField(10);
panel.add(field2);

add(panel); 
```

这会将 2 个文本字段添加到面板，并将面板添加到框架。默认情况下，面板将作为 FlowLayout 将它们浮动在一起，请参见[此处](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)的其他布局。

# python - 命令与子进程

> ID：12426998
> 
> 赞同：4
> 
> 时间：2012-09-14T14:56:26.653
> 
> 标签：python, subprocess

只是想知道是否有人可以告诉我为什么

```
import subprocess, commands

p=subprocess.Popen(["ls", "*00080"], stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
output=p.communicate()[0]
print "o", output
result=commands.getoutput("ls *00080")
print "o", result 
```

给出输出：

```
o ls: cannot access *00080: No such file or directory

o 010.010.013.165.42974-010.010.013.164.00080 
```

两者都应该找到文件，不是吗？

一个

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T14:57:23.340

`commands`生成一个执行全局扩展的外壳。 `subprocess`除非您通过`shell = True`.

换句话说：

```
p=subprocess.Popen("ls *00080",shell=True,stdout=subprocess.PIPE, stderr=subprocess.STDOUT) 
```

应该做同样的事情`commands`。