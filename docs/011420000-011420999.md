# StackOverflow 问答 11420000-11420999

# c++ - FLTK 布局管理

> ID：11420008
> 
> 赞同：2
> 
> 时间：2012-07-10T18:56:38.143
> 
> 标签：c++, fltk

是否有比[http://fltk.org/articles.php?L415+I20+T+P1+Qresize](http://fltk.org/articles.php?L415+I20+T+P1+Qresize)更多关于如何布局 fltk gui 的教程？似乎有点难以以这种方式布局任何人有任何关于如何手动执行此操作的提示，或者是唯一的选择？

BRG 安德斯·奥尔姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T10:19:00.303

不，据我所知，没有其他关于它的文章。对于手动布局，请查看此链接：[http](http://www.fltk.org/doc-2.0/html/classfltk_1_1Widget.html#aa69b28a41fdd0674cbb85a6a57ee52c8) ://www.fltk.org/doc-2.0/html/classfltk_1_1Widget.html#aa69b28a41fdd0674cbb85a6a57ee52c8 。

顺便说一句，我们的[FLTK IRC 频道](http://tinyurl.com/7zewo2w)（OFTC IRC 网络上的#FLTK）上有一个人实现了布局管理器 a-la Java SWING`FlowLayout`和`BoxLayout`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T00:36:33.377

FLTK 1.3* 的 GUI 是流畅的。fltk 2.* 已死。这个网站是我学会使用 FLUID 的： [http ://seriss.com/people/erco/fltk-videos/](http://seriss.com/people/erco/fltk-videos/)

# android - 推特页面未加载

> ID：11420009
> 
> 赞同：0
> 
> 时间：2012-07-10T18:56:41.953
> 
> 标签：android, twitter4j

我正在尝试使用 twitter 4j 加载 twitter 页面，但未加载 twitter 页面我已经注册了我的应用程序并在此处获取我的消费者密钥和消费者密钥这是我的代码

```
package a.a.a;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;

public class StatusListActivity extends ListActivity{

    private Otweet app;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        app=(Otweet)getApplication();

        setContentView(R.layout.main);

    }
    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        if(!app.isAuthorized())
        {
        beginAuthorization();
        }
        else
        {

        }
    }
    public void beginAuthorization()
    {
        Intent intent=new Intent(StatusListActivity.this,AuthorizationActivity.class);
        startActivity(intent);
    }

} 
```

这是授权活动

```
package a.a.a;

import twitter4j.Twitter;
import twitter4j.TwitterFactory;
import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;

public class AuthorizationActivity extends Activity{

    private Otweet app;
    WebView WV;
    Twitter twitter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        app=(Otweet)getApplication();
        setContentView(R.layout.authorization_view);
        WV=(WebView)findViewById(R.id.web_view);

    }
    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        //twitter=new TwitterFactory().getInstance();
        //twitter.setOAuthConsumer("C6lqBhtUcC5f9wuauwoxag", "BttswrGyCxaeLgOZAdtfSqlbEg1uiw6xnuXD4y2rcjE");
        String authURL=app.BeginAuthorization();
        WV.loadUrl(authURL);
    }

} 
```

这是 otweet 活动

```
public class Otweet extends Application {

    private OAuthHelper authhelper;
    private Twitter twitter;
    private RequestToken currentRequestToken;

    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        super.onCreate();
        authhelper=new OAuthHelper(this);
        twitter=new TwitterFactory().getInstance();
        authhelper.configureOAuth(twitter);

    }
    public boolean isAuthorized()
    {
        return authhelper.hasAccessToken();
    }
    public String BeginAuthorization()
    {
        try
        {
            if(null==currentRequestToken)
            {
                currentRequestToken=twitter.getOAuthRequestToken();
            }
            return currentRequestToken.getAuthorizationURL();
        }
        catch (TwitterException e) {
            // TODO: handle exception
            e.printStackTrace();
        }
        return null;
    }

} 
```

函数开始授权总是返回 null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:42:50.840

尝试更换

```
authhelper.configureOAuth(twitter) 
```

和

```
twitter.setOAuthConsumer(YOUR_CONSUMER_KEY, YOUR_CONSUMER_SECRET); 
```

如果这不起作用，请尝试[TwitterOAuthView](http://darutk-oboegaki.blogspot.jp/2012/07/twitter-oauth-view-for-android-using.html "使用 twitter4j 的 Android 版 Twitter OAuth 视图")。

使用 TwitterOAuthView，您不必关心 OAuth 流程。打电话

```
view.start(CONSUMER_KEY, CONSUMER_SECRET, CALLBACK_URL, true, listener); 
```

并通过如下定义的 TwitterOAuthView.Listener 接口接收结果。

```
void onSuccess(TwitterOAuthView view, AccessToken accessToken);
void onFailure(TwitterOAuthView view, TwitterOAuthView.Result result); 
```

# xslt - 从子节点中选择文本并省略文本节点

> ID：11420012
> 
> 赞同：0
> 
> 时间：2012-07-10T18:57:03.583
> 
> 标签：xslt, xpath, xml-parsing

我基本上是在寻找与[此相反的](https://stackoverflow.com/questions/5182249/select-text-from-a-node-and-omit-child-nodes)

我正在处理的 XML 示例：

```
<profiledesc>
   <creation>
       Finding Aid encoded by Some Guy, <date normal="2011-09-21">21 September 2011</date>
   </creation>
   <langusage encodinganalog="546">
      Finding aid written in
      <language langcode="eng" scriptcode="latn" encodinganalog="041">
         English   
      </language>
   </langusage>
</profiledesc> 
```

我正在编写的 XSLT 示例（仅相关部分）：

```
<xsl:template priority="3" match="descgrp|eadheader|filedesc|titlestmt|profiledesc|archdesc|langusage|did">
   <xsl:apply-templates select="./child::node()"/>
</xsl:template>

<xsl:template priority="2" match="language">
   <atom name="EADLanguageOfFindingAid" type="text" size="short">
      <xsl:value-of select="."/>
   </atom>
   <atom name="EADLanguageCodeOfFindingAid" type="text" size="short">
       <xsl:value-of select="normalize-space(@langcode)"/>
   </atom>
</xsl:template>

... Other templates, for nodes like 'creation' .... 
```

我得到的（坏）输出的一个例子：

```
... Some other tags ...
<atom name="EADCreation" type="text" size="short">Finding Aid encoded by Some Guy, 21 September 2011</atom>
Finding aid written in
<atom name="EADLanguageOfFindingAid" type="text" size="short"> English </atom>
<atom name="EADLanguageCodeOfFindingAid" type="text" size="short">eng</atom>
... Some other tags ... 
```

**我想要**的（好）输出的一个例子：

```
... Some other tags ...
<atom name="EADCreation" type="text" size="short">Finding Aid encoded by Some Guy, 21 September 2011</atom>
<atom name="EADLanguageOfFindingAid" type="text" size="short"> English </atom>
<atom name="EADLanguageCodeOfFindingAid" type="text" size="short">eng</atom>
... Some other tags ... 
```

**请注意，在第二个输出中，缺少“Finding aid written in”这一行**。

因此，如您所见，我设计的模板只输出*“*语言”标签的“语言”部分，但输出的是整个标签，包括“书写的查找帮助”文本节点。我不能确定文本节点是否存在或者它将是第一个（或最后一个，或在任何特定位置）。我也不能确定只有一个文本节点或一个子节点。所以，我不能使用任何依赖于简单地选择“[xth]”节点（子节点或文本）的解决方案。

在这一点上，我很感激任何建议，甚至是一些可以帮助我通过 Google 找到解决方案的关键字（到目前为止我还没有运气）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:37:40.387

听起来您只想选择子*元素*而`langusage`不是所有子节点（任何类型，这是`node()`选择的内容（不包括属性节点和根节点））。

例如，这个样式表：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="langusage">
        <xsl:apply-templates select="*"/>
    </xsl:template>
    <xsl:template match="language">
        <atom name="EADLanguageOfFindingAid" type="text" size="short">
            <xsl:value-of select="normalize-space()"/>
        </atom>
        <atom name="EADLanguageCodeOfFindingAid" type="text" size="short">
            <xsl:value-of select="normalize-space(@langcode)"/>
        </atom>
    </xsl:template>
</xsl:stylesheet> 
```

应用于这个简化的输入：

```
<profiledesc>
   <langusage encodinganalog="546">
      Finding aid written in
      <language langcode="eng" scriptcode="latn" encodinganalog="041">
         English   
      </language>
      <language langcode="esp" scriptcode="latn" encodinganalog="042">
         Spanish   
      </language>
   </langusage>
</profiledesc> 
```

产生以下输出：

```
<atom name="EADLanguageOfFindingAid" type="text" size="short">English</atom>
<atom name="EADLanguageCodeOfFindingAid" type="text" size="short">eng</atom>
<atom name="EADLanguageOfFindingAid" type="text" size="short">Spanish</atom>
<atom name="EADLanguageCodeOfFindingAid" type="text" size="short">esp</atom> 
```

不需要的文本 -*查找帮助写入*- 不会出现在输出中。

请注意，`*`在：

```
<xsl:apply-templates select="*"/> 
```

...只是一种较短的说法`child::*`。两者都选择当前节点的所有子元素。

# rally - 缺陷是否与用户故事相关

> ID：11420026
> 
> 赞同：1
> 
> 时间：2012-07-10T18:57:41.763
> 
> 标签：rally

我正在遍历包含缺陷的结果集，我想检查它是否与用户故事相关联。

```
for (i = 0; i < results.defects.length; i++)
{
    defect = results.defects[i];
    var usname = defect.Requirement.Name;

    if (usname.length > 0)
    {
         defectTable.addRow(defect);
    }
} 
```

为什么这会导致错误？我是 javascript 编码的新手，因此不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:19:42.220

我认为您的代码会引发错误，因为*defect.Requirement*可能为*null*（如果缺陷与用户故事没有关联。因此，尝试从*空引用中获取**Name*属性会引发错误。我认为这段代码应该适合您：

 *```
for (i = 0; i < results.defects.length; i++)
{
    defect = results.defects[i];

    if (defect.Requirement)
    {
         defectTable.addRow(defect);
    }
} 
```*

# ruby - Rails rspec - 如何检查具有“，如果：：直接”子句的验证模型

> ID：11420027
> 
> 赞同：3
> 
> 时间：2012-07-10T18:57:51.693
> 
> 标签：ruby, validation, rspec, shoulda, matcher

我有这个模型代码：

```
validates_presence_of :setting_id  
validates_presence_of :user_id  
validates_presence_of :topic_id, if: :direct? 
```

我有这些 rspec 测试：

```
it { should validate_presence_of :setting_id }
it { should validate_presence_of :user_id }
it { should validate_presence_of(:topic_id).if(:direct?) } 
```

前 2 个测试工作正常。最后一个给出了一个错误：
`undefined method 'if' for #<Shoulda::Matchers::ActiveModel::ValidatePresenceOfMatcher:0x007fda6a5c6268>`

如何为代码片段添加类似的测试以验证最后一次存在`(:topic_id).if(:direct?)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:09:54.837

从 shoulda-matchers 的源代码来看，似乎`:if`不支持该条件。您将需要使用该`direct?`方法的存根值手动对此进行测试。

# eclipse - 在 Rails 上为 Ruby 安装 Eclipse

> ID：11420029
> 
> 赞同：0
> 
> 时间：2012-07-10T18:57:54.733
> 
> 标签：eclipse, ide

我的安装（easy eclipse）遇到了问题，但是运行了程序并且我在 c\user\workspace\metadata\log 中检查错误时遇到了错误，我得到了这个：

```
!SESSION 2012-07-10 18:52:27.835 -----------------------------------------------
eclipse.buildId=M20070212-1330
java.version=1.5.0_09
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Command-line arguments:  -os win32 -ws win32 -arch x86

!ENTRY org.eclipse.osgi 4 0 2012-07-10 18:52:32.776
!MESSAGE Application error
!STACK 1
java.lang.UnsatisfiedLinkError: no swt-win32-3236 in java.library.path
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at org.eclipse.swt.internal.Library.loadLibrary(Library.java:123)
    at org.eclipse.swt.internal.win32.OS.<clinit>(OS.java:18)
    at org.eclipse.swt.widgets.Display.<clinit>(Display.java:125)
    at org.eclipse.ui.internal.Workbench.createDisplay(Workbench.java:436)
    at org.eclipse.ui.PlatformUI.createDisplay(PlatformUI.java:161)
    at org.eclipse.ui.internal.ide.IDEApplication.createDisplay(IDEApplication.java:122)
    at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:75)
    at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)
    at org.eclipse.core.launcher.Main.basicRun(Main.java:280)
    at org.eclipse.core.launcher.Main.run(Main.java:977)
    at org.eclipse.core.launcher.Main.main(Main.java:952)

!ENTRY org.eclipse.osgi 2 0 2012-07-10 18:52:32.809
!MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:32.809
!MESSAGE Bundle update@plugins/com.aptana.ide.editor.erb_0.2.8.200707021211.jar was not resolved.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:32.809
!MESSAGE Missing required bundle com.aptana.ide.lexer_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:32.809
!MESSAGE Missing required bundle com.aptana.ide.core.ui_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:32.809
!MESSAGE Missing required bundle com.aptana.ide.editors_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:32.810
!MESSAGE Missing required bundle com.aptana.ide.parsing_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:32.810
!MESSAGE Missing required bundle com.aptana.ide.editor.html_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:32.810
!MESSAGE Missing required bundle com.aptana.ide.core_0.0.0.

!ENTRY org.eclipse.osgi 2 0 2012-07-10 18:52:32.812
!MESSAGE The following is a complete list of bundles which are not resolved, see the prior log entry for the root cause if it exists:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:32.813
!MESSAGE Bundle update@plugins/com.aptana.ide.editor.erb_0.2.8.200707021211.jar [5] was not resolved.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:32.813
!MESSAGE Missing required bundle com.aptana.ide.core_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:32.813
!MESSAGE Missing required bundle com.aptana.ide.editors_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:32.813
!MESSAGE Missing required bundle com.aptana.ide.lexer_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:32.813
!MESSAGE Missing required bundle com.aptana.ide.parsing_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:32.813
!MESSAGE Missing required bundle com.aptana.ide.editor.html_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:32.813
!MESSAGE Missing required bundle com.aptana.ide.core.ui_0.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:32.813
!MESSAGE Bundle update@plugins/org.eclipse.core.filesystem.linux.x86_1.0.0.v20060603.jar [29] was not resolved.
!SUBENTRY 2 org.eclipse.core.filesystem.linux.x86 2 0 2012-07-10 18:52:32.813
!MESSAGE Platform filter did not match: (& (osgi.os=linux) (osgi.arch=x86))
!SUBENTRY 2 org.eclipse.core.filesystem.linux.x86 2 0 2012-07-10 18:52:32.813
!MESSAGE Missing Constraint: Fragment-Host: org.eclipse.core.filesystem; bundle-version="[1.0.0,2.0.0)"
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:32.814
!MESSAGE Bundle update@plugins/org.eclipse.core.filesystem.macosx_1.0.0.v20060603.jar [30] was not resolved.
!SUBENTRY 2 org.eclipse.core.filesystem.macosx 2 0 2012-07-10 18:52:32.814
!MESSAGE Platform filter did not match: (& (osgi.os=macosx) (|(osgi.arch=x86) (osgi.arch=ppc)))
!SUBENTRY 2 org.eclipse.core.filesystem.macosx 2 0 2012-07-10 18:52:32.815
!MESSAGE Missing Constraint: Fragment-Host: org.eclipse.core.filesystem; bundle-version="[1.0.0,2.0.0)"
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:32.815
!MESSAGE Bundle update@plugins/org.eclipse.jdt.launching.macosx_3.1.100.v20060605.jar [91] was not resolved.
!SUBENTRY 2 org.eclipse.jdt.launching.macosx 2 0 2012-07-10 18:52:32.815
!MESSAGE Platform filter did not match: (osgi.os=macosx)
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:32.815
!MESSAGE Bundle update@plugins/org.eclipse.swt.carbon.macosx_3.2.2.v3236.jar [115] was not resolved.
!SUBENTRY 2 org.eclipse.swt.carbon.macosx 2 0 2012-07-10 18:52:32.815
!MESSAGE Platform filter did not match: (& (osgi.ws=carbon) (osgi.os=macosx) (|(osgi.arch=x86)(osgi.arch=ppc)) )
!SUBENTRY 2 org.eclipse.swt.carbon.macosx 2 0 2012-07-10 18:52:32.815
!MESSAGE Missing Constraint: Fragment-Host: org.eclipse.swt; bundle-version="[3.0.0,4.0.0)"
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:32.815
!MESSAGE Bundle update@plugins/org.eclipse.swt.gtk.linux.x86_3.2.2.v3236.jar [116] was not resolved.
!SUBENTRY 2 org.eclipse.swt.gtk.linux.x86 2 0 2012-07-10 18:52:32.815
!MESSAGE Platform filter did not match: (& (osgi.ws=gtk) (osgi.os=linux) (osgi.arch=x86))
!SUBENTRY 2 org.eclipse.swt.gtk.linux.x86 2 0 2012-07-10 18:52:32.815
!MESSAGE Missing Constraint: Fragment-Host: org.eclipse.swt; bundle-version="[3.0.0,4.0.0)"
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:32.816
!MESSAGE Bundle update@plugins/org.eclipse.ui.carbon_3.2.0.I20060605-1400.jar [128] was not resolved.
!SUBENTRY 2 org.eclipse.ui.carbon 2 0 2012-07-10 18:52:32.816
!MESSAGE Platform filter did not match: (osgi.ws=carbon)
!SUBENTRY 2 org.eclipse.ui.carbon 2 0 2012-07-10 18:52:32.816
!MESSAGE Missing Constraint: Fragment-Host: org.eclipse.ui; bundle-version="[3.2.0,4.0.0)"
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:32.816
!MESSAGE Bundle update@plugins/org.eclipse.update.core.linux_3.2.0.v20060605.jar [148] was not resolved.
!SUBENTRY 2 org.eclipse.update.core.linux 2 0 2012-07-10 18:52:32.817
!MESSAGE Platform filter did not match: (osgi.os=linux)
!SUBENTRY 2 org.eclipse.update.core.linux 2 0 2012-07-10 18:52:32.817
!MESSAGE Missing Constraint: Fragment-Host: org.eclipse.update.core; bundle-version="[3.0.0,4.0.0)"
!SESSION 2012-07-10 18:52:46.729 -----------------------------------------------
eclipse.buildId=M20070212-1330
java.version=1.5.0_09
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Command-line arguments:  -os win32 -ws win32 -arch x86

!ENTRY org.eclipse.osgi 4 0 2012-07-10 18:52:48.465
!MESSAGE Application error
!STACK 1
java.lang.UnsatisfiedLinkError: no swt-win32-3236 in java.library.path
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at org.eclipse.swt.internal.Library.loadLibrary(Library.java:123)
    at org.eclipse.swt.internal.win32.OS.<clinit>(OS.java:18)
    at org.eclipse.swt.widgets.Display.<clinit>(Display.java:125)
    at org.eclipse.ui.internal.Workbench.createDisplay(Workbench.java:436)
    at org.eclipse.ui.PlatformUI.createDisplay(PlatformUI.java:161)
    at org.eclipse.ui.internal.ide.IDEApplication.createDisplay(IDEApplication.java:122)
    at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:75)
    at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)
    at org.eclipse.core.launcher.Main.basicRun(Main.java:280)
    at org.eclipse.core.launcher.Main.run(Main.java:977)
    at org.eclipse.core.launcher.Main.main(Main.java:952)

!ENTRY org.eclipse.osgi 2 0 2012-07-10 18:52:48.605
!MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:48.605
!MESSAGE Bundle update@plugins/com.aptana.ide.editor.erb_0.2.8.200707021211.jar was not resolved.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:48.605
!MESSAGE Missing required bundle com.aptana.ide.parsing_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:48.606
!MESSAGE Missing required bundle com.aptana.ide.core_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:48.606
!MESSAGE Missing required bundle com.aptana.ide.editors_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:48.606
!MESSAGE Missing required bundle com.aptana.ide.editor.html_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:48.606
!MESSAGE Missing required bundle com.aptana.ide.lexer_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:48.606
!MESSAGE Missing required bundle com.aptana.ide.core.ui_0.0.0.

!ENTRY org.eclipse.osgi 2 0 2012-07-10 18:52:48.609
!MESSAGE The following is a complete list of bundles which are not resolved, see the prior log entry for the root cause if it exists:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:48.610
!MESSAGE Bundle update@plugins/com.aptana.ide.editor.erb_0.2.8.200707021211.jar [5] was not resolved.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:48.610
!MESSAGE Missing required bundle com.aptana.ide.core_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:48.611
!MESSAGE Missing required bundle com.aptana.ide.editors_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:48.611
!MESSAGE Missing required bundle com.aptana.ide.lexer_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:48.611
!MESSAGE Missing required bundle com.aptana.ide.parsing_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:48.611
!MESSAGE Missing required bundle com.aptana.ide.editor.html_0.0.0.
!SUBENTRY 2 com.aptana.ide.editor.erb 2 0 2012-07-10 18:52:48.611
!MESSAGE Missing required bundle com.aptana.ide.core.ui_0.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:48.611
!MESSAGE Bundle update@plugins/org.eclipse.core.filesystem.linux.x86_1.0.0.v20060603.jar [29] was not resolved.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:48.611
!MESSAGE Bundle update@plugins/org.eclipse.core.filesystem.macosx_1.0.0.v20060603.jar [30] was not resolved.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:48.611
!MESSAGE Bundle update@plugins/org.eclipse.jdt.launching.macosx_3.1.100.v20060605.jar [91] was not resolved.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:48.611
!MESSAGE Bundle update@plugins/org.eclipse.swt.carbon.macosx_3.2.2.v3236.jar [115] was not resolved.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:48.612
!MESSAGE Bundle update@plugins/org.eclipse.swt.gtk.linux.x86_3.2.2.v3236.jar [116] was not resolved.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:48.612
!MESSAGE Bundle update@plugins/org.eclipse.ui.carbon_3.2.0.I20060605-1400.jar [128] was not resolved.
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-07-10 18:52:48.612
!MESSAGE Bundle update@plugins/org.eclipse.update.core.linux_3.2.0.v20060605.jar [148] was not resolved. 
```

我赢了 7 终极 - 64。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:06:11.037

`java.lang.UnsatisfiedLinkError: no swt-win32-3236 in java.library.path`

我认为这部分错误说明了一切。它说他们使用的 Makefile 或构建程序的链接器假设您安装了 32 位 Windows，并且在您的路径中找不到这些库。我建议浏览 64 位版本或查看是否可以修改其构建中的路径（如果可以）。

**注意：** 您可能要检查的一件事是您是否安装了 64 位版本的 eclipse，因为这些可能不兼容。

# c# - TextBox 已更新后的 KeyUp 事件

> ID：11420030
> 
> 赞同：2
> 
> 时间：2012-07-10T18:58:02.947
> 
> 标签：c#, wpf, .net-4.0, textbox, wpf-controls

考虑`TextBox`WPF 中的这个基础：

```
<TextBox Name="textBox1" KeyUp="textBox1_KeyUp" /> 
```

和事件：

```
using System.Diagnostics;
...
private void textBox1_KeyUp(object sender, KeyEventArgs e)
{ Debug.WriteLine(textBox1.Text + "; " + e.Key.ToString()); } 
```

如果我在输出中输入 slow`TextBox`是：

```
t; T
te; E
tes; S
test; T 
```

但是如果我快速输入，输出是错误的（注意*S*已经在`textBox1.Text`处理键*E*时）：

```
t; T
tes; E
test; S
test; T 
```

我想处理正确`e.Key`的（最后按下）。在我看来，该事件的更新速度不如该`TextBox.Text`属性。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T19:02:49.963

您看到此行为的原因是事件发生`TextBox`后不久更新的内容。`KeyDown`当打字速度非常快时，可以按以下顺序进行

*   按键：T
*   按键：T
*   按键：E
*   按键：S
*   按键：E
*   按键：S

如果要处理事件中按下的最后一个键，则`KeyUp`必须在事件之间的某处收听`KeyDown`并存储该值。我不建议这样做，因为您可以获得许多您意想不到的关键事件（尤其是在非英语键盘上）。`KeyDown`我会坚持在or中处理事件`KeyUp`。

# java - 抛出的异常为空

> ID：11420034
> 
> 赞同：0
> 
> 时间：2012-07-10T18:58:18.497
> 
> 标签：java, exception

我有一个设置，例如...

```
public class MyClass {
   Exception e = null;   

   try {
      Game.runItNow();
   } catch (Exception e) {
      this.e = e;
   }

   if (this.e == null) {
      showError();
   }
}

public class Game {
    public static void runItNow() throws IOException {
       try {
          HttpManager.getData()
       } catch(IOException e) {
          // here, e = null
          throw e;
       }
    }
}

public class HttpManager {    

    public static String getData() throws IOException {
       String someData = "The fox is brown";
       String someWord = "fox";

       if (someData.contains(someWord)) {
          throw new IOException();
       }

       return someData;
    }
} 
```

问题是，当我捕捉到 IO 异常时`e == null`...... 不确定我是否有脑放屁，但我很困惑。为什么是`e == null`？我正在抛出它的一个新实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:21:18.617

如果您上面的代码是您实际拥有的代码，那么它不起作用也就不足为奇了。你`MyClass`不是一个合适的班级。您需要静态块、主要方法或包含该代码的构造函数。

如果您使用该代码或 main 方法创建一个构造函数，那么它将正常工作。

```
public class MyClass {

   public static void main(String[] args) {
       Exception e = null;   

       try {
          Game.runItNow();
       } catch (Exception e) {
          this.e = e;
       }

       if (this.e == null) {
          showError();
       }
   }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T19:01:16.140

您正在覆盖使用新 IOException 生成的 IOException 而没有异常。

# javascript - 正则表达式：匹配 hh:mm、hh.mm 或 h

> ID：11420036
> 
> 赞同：2
> 
> 时间：2012-07-10T18:58:25.690
> 
> 标签：javascript, regex, datetime, datetime-format, datetime-parsing

我正在寻找一个正则表达式来匹配**javascript**中的不同时间格式（用于时间跟踪网络应用程序） 。用户可以使用以下格式之一插入时间：

```
h
hh:mm
hh.mm 
```

我可以轻松地创建一个正则表达式来匹配 hh:mm 和 hh.mm，但我无法让单小时格式正常工作。

这是我当前的正则表达式： `([0-2][0-9])(.|:)([0-5][0-9])`

允许的字符`0-9`：`.`和`:`。如果用户键入任何其他字符，则验证应该失败。

有没有人有什么建议？

**编辑**

以下格式应适用于：

小时：毫米（3:30）

解决方案：[http ://regexr.com?31gc3](http://regexr.com?31gc3)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:04:35.947

您可以通过将块放置在`( ... )?` This 中来使其成为可选块，这相当于`( ... ){0,1}`允许零个或一个引用。

你的表达变成：

```
/([0-2][0-9])((.|:)([0-5][0-9]))?/ 
```

这匹配`12`,`12:30`和`12.30`。它不会匹配`5`, `5:30`, 或`5.30`. 可以通过使第一位数字可选来启用单个数字小时输入：

```
/([0-2]?[0-9])((.|:)([0-5][0-9]))?/ 
```

如果你使用`.match`，你会注意到你有 5 个结果：

```
["12:30", "12", ":30", ":", "30"] 
```

您可以通过消除不必要的匹配来减少到 3 当你`( ... )`变成`(?: ... )`

```
/([0-2]?[0-9])(?:(?:.|:)([0-5][0-9]))?/ 
```

这给了你：

```
["12:30", "12", "30"] 
```

**更新**

根据您的更新，您希望匹配边界。有几种方法可以做到这一点。

1.  开始`^`会将表达式的前面与每行/字符串的开头联系起来。
2.  以结尾结尾`$`会将表达式的结尾与字符串的结尾联系起来。
3.  开始或结束`\b`将要求边缘反对“边界”。

把所有这些放在一起：

如果您只想匹配只包含您可以使用的日期的行：

```
/^([0-2]?[0-9])(?:(?:.|:)([0-5][0-9]))?$/ 
```

这不会捕获“hello 1.30”或“1.30 hello”。

如果要匹配以日期开头的行，可以使用：

```
/^([0-2]?[0-9])(?:(?:.|:)([0-5][0-9]))?/ 
```

但这将匹配“1.30000”。

如果您要在行首寻找日期，最好的选择是：

```
/^([0-2]?[0-9])(?:(?:.|:)([0-5][0-9]))?\b/ 
```

因为它将匹配“1.30 测试”但不匹配“1.300000”。不幸的是，它也会匹配“1.30.30”，但这是 JavaScript 的 RegExp 处理器的限制。

如果您正在寻找字符串中的时间，这将变为：

```
/\b([0-2]?[0-9])(?:(?:.|:)([0-5][0-9]))?\b/ 
```

它将“test 1.30 test”与“.10.10.10”之类的不幸匹配情况相匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T19:12:13.030

不确定`h`是 24 小时还是 12 小时格式，但是 24 小时可以完成工作`/^([2][0-3]|[01]?[0-9])([.:][0-5][0-9])?$/`，并且 12 小时 - 这个`/^([1][0-2]|[0]?[0-9])([.:][0-5][0-9])?$/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:01:36.367

如果您不需要捕获任何内容，只需使用以下命令：

```
/[0-2]?\d[.:][0-5]\d/ 
```

在此处查看实际操作：[http ://regexr.com?31g9u](http://regexr.com?31g9u)

* * *

如果要捕获小时和分钟，请使用：

```
/([0-2]?\d)[.:]([0-5]\d)/ 
```

如果您的采集有其他要求，请说明。

* * *

**更新：**我刚刚意识到，如果没有提供分钟，您可能只需要一个数字小时。如果是这种情况，请使用：

```
/^(?:\d|[0-2]\d[.:][0-5]\d)$/ 
```

在此处查看实际操作：[http ://regexr.com?31ga1](http://regexr.com?31ga1)

* * *

如果你想匹配类似的东西`9:42`，但也匹配个位数，使用这个：

```
/^(?:\d|[0-2]?\d[.:][0-5]\d)$/ 
```

在此处查看实际操作：[http ://regexr.com?31ga7](http://regexr.com?31ga7)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T19:02:30.167

使用这个正则表达式`([0-2]\d)(\.|:)([0-5]\d)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T19:01:33.100

使用 a`?`使某些东西成为可选的。在你的情况下，你想要类似的东西

```
([0-1]?[0-9])(\.|:)([0-5][0-9]) 
```

添加`?`允许它接受类似 5:30 的内容。

编辑：另外，`.`代表*任何字符*，所以它需要被转义。您也可以使用`\d`而不是`[0-9]`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T19:01:54.023

如果不在右括号之间，点必须被转义 [0-9] 相当于 \d

```
/(\d|[01]\d|2[0-3])([:.][0-5]\d)?/ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-10T19:06:47.730

这一个匹配 12 小时时间格式以及仅几个小时。

```
(([01]?[0-9]|2[0-3])[:.][0-5][0-9])|([01]?[0-9]|2[0-3])

5      Pass
5.55   Pass
01.4   FAIL
01:59  Pass
1:45   Pass 
```

如果你想要 24 小时，冒号之前的部分是`([01]?[0-9]|2[0-3])`

# python - Selenium webdriver 的工厂模式

> ID：11420042
> 
> 赞同：9
> 
> 时间：2012-07-10T18:58:36.883
> 
> 标签：python, selenium, factory-pattern

目前我正在尝试使用 Selenium 和 Proboscis 编写一个自动化测试套件。我正在尝试抽象 webdriver 并通过工厂模式实现。`Page_object`这里也创建了类，它在创建对象时将 webdriver 作为参数。下面是代码。

```
 import selenium.webdriver as webdriver
     from proboscis import TestProgram
     from proboscis import test
     from proboscis import before_class
     from proboscis import after_class    

     class WebdriverFactory:
        @staticmethod
        def getWebdriver(browserName):  
            if(browserName == 'firefox'):
             return webdriver.Firefox()
            elif(browserName == 'chrome'):
             return webdriver.Chrome()
            elif(browserName == 'ie'):
             return webdriver.Ie()        

            raise Exception("No such " + browserName + " browser exists")  

   class Page_Object:
    def __init__(self, driver):
      self.driver = driver

    def go_to_home(self):
        self.driver.get("http://google.com")
        return self
    def go_to_page(self,url):
        self.driver.get(url)
        return self
    def run_search(self, url, query):
        self.driver.get(url)
        self.driver.find_element_by_id(locators['search_box']).send_keys(query)
        self.driver.find_element_by_id(locators['search_button']).click()

    def tear_down(self):
        self.driver.close()   

   @test(groups=['selenium'])
   class Test_Scripts:

     @test(groups=['WebDemo'])
     def test_1(self):
        driver = WebdriverFactory.getWebdriver("firefox")
        pageObj = Page_Object(driver)
        pageObj.run_search("http://google.com",'apples')
        pageObj.tear_down()      
     def run_tests(self):
        TestProgram().run_and_exit()

   Test_Scripts().run_tests() 
```

这是这样做的正确方法吗？或者有没有更好的解决方案？如果您发现一些愚蠢的东西，请指出并忽略我的疏忽，因为我是 Python 和 Selenium 的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-08T23:09:34.990

您正在正确地实现页面对象，因为您正在按照大多数人的方式进行操作。

我做了一些不同的页面对象——不需要网络驱动程序来实例化它们。因为我经常遇到几个页面，它们的正文内容不同，但页眉和页脚部分相同。因此，我没有在每个页面对象中复制页眉/页脚定位器和方法，而是为页眉和页脚设置了一个单独的页面 obj。但是随后使用 1 个 webdriver 实例化多个页面对象来测试单个页面，似乎违反了范式。所以我的页面对象实际上只是定位器和方法的集合，不一定是 webdriver。

我意识到你没有提到页眉或页脚......我猜大多数人围绕 web 驱动程序构建页面对象的原因是创建一个范式，它假设每页只有一个页面对象。在我的情况下，这将导致跨页面对象的重复代码。需要考虑的事情。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-12T08:41:53.897

有一个 Python 库，它提供页面工厂方法来在 selenium 中实现页面对象模型 -

[硒页工厂](https://pypi.org/project/selenium-page-factory/)

# java - 无法编辑表格单元格：Java Swing

> ID：11420050
> 
> 赞同：0
> 
> 时间：2012-07-10T18:58:57.703
> 
> 标签：java, swing, jtable, javabeans, tablecelleditor

我使用 BeanTableModel 作为 tableModel 创建了一个自定义表（不确定这是否重要）。该表从枚举对象填充数据，并且也应该写入该对象。目前的行为是该表将正确填充数据。如果我在一个单元格中写作，我可以。但是当我选择标签时，单元格以红色勾勒出来，我只能 ESC，这会使单元格恢复正常，并带有原始数据。我希望能够编辑表格并保存数据。

有哪些可能的修复或问题点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:15:07.943

`CellEditor`接受与[Class.types](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)对应的输入值，例如

*   在这种情况下，`Column Class is Number`则只`CellEditor`接受[数字](http://docs.oracle.com/javase/7/docs/api/java/lang/Number.html)，`decimal separator`并且`negative sign`，

*   最复杂的可能是为普通[日期类输入正确的值](http://docs.oracle.com/javase/7/docs/api/java/sql/Date.html)

*   取决于`Class.types`和`Formatters`那是你的集合`BeanTableModel`

*   尽快发布[SSCCE以获得更好的帮助](http://sscce.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T23:59:41.340

> 单元格以*红色标出*。

如此处所示，[这](https://stackoverflow.com/a/7539298/230513)是[默认编辑器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)的行为，`JTable.GenericEditor`. 正如其他人所建议的那样，这表明您`TableModel`对 的实现不正确`getColumnClass()`。请编辑您的问题以包含[sscce](http://sscce.org/)，这可能有助于隔离问题。

# jquery - 使用 JQuery 构建基本的交互式地图

> ID：11420052
> 
> 赞同：1
> 
> 时间：2012-07-10T18:59:08.797
> 
> 标签：jquery, html, interactive

我在 jQuery 中创建交互式地图，并使用自定义手绘地图。我在整个地图上放置了一系列“触发点”，相对于地图的大小，绝对定位。当用户将鼠标悬停在这些触发点上时，会显示一个工具提示，其中包含有关该位置的信息。

HTML/CSS：

```
<div id="map" style="position:relative; background: url(images/map.jpg">
    <div class="trigger" data-loc="locationA" style="position:absolute; left:10px; top:3px"><h1 class="tooltip">Location A Title</h1></div>
    <div class="trigger" data-loc="locationB" style="position:absolute; left:0px; top:24px"><h1 class="tooltip">Location B Title</h1></div>
    <div class="trigger" data-loc="locationC" style="position:absolute; left:140px; top:35px"><h1 class="tooltip">Location C Title</h1></div>
    <div class="trigger" data-loc="locationD" style="position:absolute; left:70px; top:103px"><h1 class="tooltip">Location D Title</h1></div>
</div> 
```

查询：

```
$(".trigger").hover(function(){
   $(this).find(".tooltip").fadeIn();
}, function(){
   $(this).find(".tooltip").fadeOut();
}); 
```

几个问题：
1) 这是使用 JQuery 制作基本交互式地图的最佳方式吗？

2）我想在右边列出一个位置列表。当用户点击链接时，它还应该触发相关链接的工具提示。如上图，每个触发点都有一个data-loc属性。如果我在右侧的锚链接中设置相同的数据点，我将如何使用 jQuery 将它们链接起来并触发相关工具提示的淡入和淡出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:11:19.857

据我所知，没有*最好*的方法来做到这一点。一种更具描述性的方法是[使用区域标签](http://www.c-sharpcorner.com/uploadfile/667ddf/working-with-area-tag-in-html5/)而不是 div。

```
<!DOCTYPE >
<html>
<body>
  <img src="image/all balls.jpg" style="width: 450px; height: 450px;" 
       alt="Balls" usemap="#BallMap" />
  <map name="BallMap">
    <area id="whiteArea" class="hoverArea" shape="circle" coords="78,81,76.5" 
          nohref="nohref" alt="white" />
    <area id="blueArea" class="hoverArea" shape="circle" coords="260,81,76.5" 
          nohref="nohref" alt="blue" />
    <area id="redArea" class="hoverArea" shape="circle" coords="84,254,76.5"
          nohref="nohref" alt="red" />
  </map>
</body>
</html> 
```

然后类似地：

```
$(".hoverArea").hover(function(){
   showToolTip($(this));
}, function(){
   hideToolTip($(this));
}); 
```

编写用于显示工具提示的自定义函数可能需要做更多的工作。（注意：我自己从未使用过 Area。）

**更新**

有几种方法可以做到这一点。

一个半hacky的方式，因为你已经在使用absolutes是在当前div周围放置另一个div，但让它们绝对定位在右侧。哈克但有效。

我不会那样做，因为在我看来这会更好：

```
<div id="map" style="position:relative; background: url(images/map.jpg">
  <div class="trigger" data-loc="locationA" id="locationA"
       style="position:absolute; left:10px; top:3px">
    <h1 class="tooltip">Location A Title</h1>
  </div>
  <div class="trigger" data-loc="locationB" id="locationB" 
       style="position:absolute; left:0px; top:24px">
    <h1 class="tooltip">Location B Title</h1>
  </div>
  <div class="trigger" data-loc="locationC" id="locationC"
       style="position:absolute; left:140px; top:35px">
    <h1 class="tooltip">Location C Title</h1>
  </div>
  <div class="trigger" data-loc="locationD" id="locationD"
       style="position:absolute; left:70px; top:103px">
    <h1 class="tooltip">Location D Title</h1>
  </div>
</div>

<div class="sidebar">
  <div class="trigger" data-loc="locationA"> Loc A
  </div>
  <div class="trigger" data-loc="locationB"> Loc B
  </div>
  <div class="trigger" data-loc="locationC"> Loc C
  </div>
  <div class="trigger" data-loc="locationD"> Loc D
  </div>
<div> 
```

然后使用 jQuery：

```
$(".trigger").hover(function(){
   $("#" + $(this).data("loc") + " .tooltip").fadeIn();
}, function(){
   $("#" + $(this).data("loc") + " .tooltip").fadeOut();
}); 
```

# python - 从python程序执行c程序

> ID：11420053
> 
> 赞同：2
> 
> 时间：2012-07-10T18:59:09.253
> 
> 标签：python, c

我是编程新手，想知道如何让 python 程序执行并与 ac 程序通信。我正在用 python 进行数学计算，想知道是否可以用 C 编写主要计算，这样计算运行得更快。我一直在阅读有关“从 python 调用 c 函数”、“直接在 Python 代码中包含 C 或 C++ 代码”和“使用 python 中的 c 库”的内容。这是同一件事吗？我想要一个 python 程序来执行 ac 程序并接收结果。

**从 python 中“调用 C 库函数”是什么意思？它会允许python脚本使用c库还是允许脚本在ac编译器中执行代码？**

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:06:35.563

最简单的方法之一是使用[Cython](http://www.cython.org/)。您可以编写非常接近 Python 的代码，但它可以编译为 C。这使得一些代码（尤其是数值计算）更快。您还可以使用 Cython 从 Python 轻松调用 C 库函数，尽管 ctypes 也足够了。

但是，如果您确实想要执行特定的 C 程序，则可以使用[Subprocess](http://docs.python.org/library/subprocess.html)执行此操作。注意，这比直接调用 C 库或 Cython 函数要慢得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T19:15:02.320

在处理“数组操作”（有时称为向量操作，但我发现该术语与 SIMD 术语混淆）时，还有 numpy 可以相当快。如果你决定走 cython 路线，你可能需要 numpy，所以如果算法不是太复杂，你可能想先看看 numpy 本身是否足够好。

请注意，您可以在这里选择两条不同的路线。您可以使用`subprocess`它基本上向您编写的其他程序发出系统调用。这很慢，因为您需要启动一个新进程并将数据发送到进程中，然后从进程中读取数据。换句话说，每次调用都会多次复制数据。第二条路线是从 python 调用 C 函数。由于 Cpython（参考和最常见的 python 实现）是用 C 编写的，因此您可以创建 C 扩展。它们基本上是遵循特定 API 的编译库。然后 Cpython 可以加载这些库并使用里面的函数，传递指向数据的指针。通过这种方式，数据实际上并没有被复制——您在 python 中使用的内存块与在 C 中使用的内存块相同。这里的缺点是 C API 有点复杂。那' s 3rd 方扩展和现有库的来源（numpy、cython、ctypes 等）。它们都有不同的方式来推动计算 int C 函数，而您不必担心 C API。Numpy 删除了循环，因此您可以快速添加、减去、乘以数组（以及许多其他事情）。 `Cython`将 python 代码转换为 C，然后您可以编译和导入 - 通常为了在这里获得速度，您需要提供额外的提示以允许 cython 优化生成的代码，`ctypes`这有点脆弱，因为您必须重新指定您的 C 函数原型，但除此之外，只要您可以将库编译为共享对象，这很容易......这个列表可以继续。

另请注意，如果您不使用 numpy，则可能需要查看 pypy。它声称运行你的 python 代码比 Cpython 更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T20:52:22.007

想到的选项：

1.  Cython：Python 的一种方言，可以自由混合 Python 和 C 数据类型。通过为类提供一些类型注释来提供适度的加速，并且如果您为主循环提供所有 C 类型以进行操作，则速度可能会快很多。目前几乎只有 CPython，但已经讨论过让它与 Pypy 一起工作。
2.  SWIG：一种接口/胶水语言，用于将 C 库与潜在的大量高级语言（包括 CPython）进行匹配。
3.  ctypes：允许您调用各个 C 函数并访问各个 C 数据类型。除非您在 C 代码中花费大量时间，否则不要在 CPython 中大放异彩。可能有点脆。也适用于 Pypy。
4.  C 扩展模块：非常标准的 CPython 东西——这是标准库中 CPython 的组成部分。如果您使用 cpyext，则其中一些但不是全部都可以与 Pypy 一起使用。简而言之，你正在用 C 语言编写一个带有一堆样板的模块，但它可以从 CPython 中调用。
5.  CFFI：来自 Pypy 项目的一个新的外部函数接口。他们现在让它与 CPython 一起使用，并打算在不久的将来与 Pypy 一起使用。它类似于 ctypes，但不那么脆弱 - 缺点是它在运行时需要 C 编译器，而且它是非常年轻的代码。
6.  Pypy：这并不是真正调用 C 本身的方式，但对于许多纯 Python 代码来说，它的速度几乎与 C 一样快。如果您不需要很多 C 扩展模块，那么 Pypy 对您来说可能是一个不错的选择。
7.  子进程：一种非常可移植的方式，以非必要的相同语言与另一个进程交互。可以在子进程中与几乎任何语言一起使用。除非您花很少的时间来回传递数据，否则速度不会很快。几乎所有交换的数据都必须序列化为 ASCII 或其他东西，但它是如此可移植、简单且松散耦合，值得考虑。
8.  您也许可以优化您的 Python：[http ://wiki.python.org/moin/PythonSpeed/PerformanceTips](http://wiki.python.org/moin/PythonSpeed/PerformanceTips)

不要急于用 C 进行编码——它在程序员的时间方面要昂贵得多，而且容易出现微妙的、难以发现的错误。首先在纯 Python 中运行你的代码，让程序以任何速度产生正确的结果，然后如果你发现程序太慢，分析程序以决定哪些部分需要以其中一种方式重做以上所列。通常你只需要 0-2% 的程序用纯 python 以外的东西来完成 - 也可以为尽可能多的代码节省程序员的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T19:05:32.840

你想要[ctypes](http://docs.python.org/library/ctypes.html)。它允许您直接从 Python 运行 C 函数，而无需任何疯狂的扩展。当然，您应该确保不会过早地进行优化。Python 的数学函数非常快。

ctypes 模块允许您直接从 Python 代码调用 C 库函数。这意味着它允许您将编译后的库放在 Python 可以访问的地方并运行这些编译后的函数。这与从 Python 调用 C 程序不同，正如 Conrad 所指出的，可以使用子进程来完成。当然，子进程不需要用 C 编写的程序。它可以运行任何可执行文件。

# iphone - iOS Over the Air / Web App Distribution with Enterprise Program - “内部”？

> ID：11420056
> 
> 赞同：-1
> 
> 时间：2012-07-10T18:59:29.733
> 
> 标签：iphone, ios, app-store, adhoc, ota

据我了解，通过我每年 299 美元的 iOS 开发者企业计划，我可以将**“内部”**应用程序分发给无限数量的用户进行 beta 测试等，而无需跟踪特定设备的 UDID。

我的问题是：有没有办法（“黑客”或普通程序）通过网络（或只是不是 AppStore）将我的应用程序分发给 PUBLIC，仍然给无限数量的用户？我在这里看到了很多看似相互矛盾的信息，但根据用户*namsral* [在此 Stack 帖子](https://stackoverflow.com/questions/5916827/how-distribute-private-program-to-more-than-100-devices)中的说法，这是可能的。一个普通的 iOS 开发者帐户可以分发给超过 100 个用户，这是真的吗？

此外，Apple 对仅出于“内部”目的而对企业分发的应用程序进行监管有多严格？

如果有人对这些观点有任何经验，我将非常感激听到它。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:19:38.527

是的，通过 300 美元的企业协议，您可以（技术上）将该应用程序放在大网络上供所有人下载。

在供应门户中，“ad-hoc”和“inhouse”配置文件之间有明显的区别。如果没有企业协议，后者是不可用的。

但这可能违反协议。阅读细则；伊纳尔。

要获得企业协议，您需要提交企业身份证明——邓白氏编号和一些文件，如营业执照。

Apple 无法将您的分发限制在您的公司设备上，因为没有办法将这样的概念正式化。

混淆源于这样一个事实，即非企业客户可以使用的“ad-hoc”分发模型只允许分发到多达 100 个设备，并且需要在构建时在配置文件中明确启用这些设备。这非常适合 beta 测试，但不适用于一般分发；这就是额外费用的全部意义所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:10:31.527

除非您的设备被添加到应用程序所属的配置中，否则您无法安装临时分发。如果您尝试安装刚刚从配置中未包含的任何其他设备（例如我的设备）发送链接的应用程序，您将下载，但无法安装它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T17:15:59.730

我不能足够推荐[TestFlightApp.com](http://TestFlightApp.com)。

# python - Python 模块段错误

> ID：11420059
> 
> 赞同：0
> 
> 时间：2012-07-10T18:59:32.900
> 
> 标签：python, segmentation-fault

当我尝试运行 python->help()->modules 我得到这个：

```
% python
Python 2.7.1 (r271:86832, Apr 13 2012, 11:08:33) [C] on sunos5

>>> help()

help> modules

Please wait a moment while I gather a list of all available modules...
file ghash.c: line 875: assertion `hash_table->ref_count > 0' failedfile ghash.c: line 875: assertion `hash_table->ref_count > 0' failed
Segmentation Fault 
```

就这样，它下去了。我的问题是为什么？我该如何解决？

我可以在代码中很好地访问模块，只是无法从帮助菜单中调出列表。help 中的其他标签也可以正常工作。就是这个破了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:13:02.187

运行`python -vv`并重复您的步骤。查看哪些模块无法导入。

或安装[`faulthandler`](http://pypi.python.org/pypi/faulthandler). 启用它并重复您的步骤。

# amazon-web-services - 具有 DNS 名称 foo 的 RRSet。不允许在区域栏中

> ID：11420063
> 
> 赞同：61
> 
> 时间：2012-07-10T18:59:44.597
> 
> 标签：amazon-web-services, chef-infra

我正在使用 Opscode Chef 中的[route53](https://github.com/heavywater/chef-route53)食谱将新创建的 VPC 节点添加到 Route 53。

当我尝试创建以`foo`托管区域命名的记录时`bar.website.net`，我收到错误消息`RRSet with DNS name foo. is not permitted in zone bar`。

我很确定这是一个 AWS 配置问题，而不是食谱的问题，但我很容易就错了。像这样的问题有什么解决办法？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-07-11T20:42:14.693

结果我误解了输入参数时需要使用的格式。

要添加记录`foo.bar.website.net`，我将`name`字段设置为`foo`. 我实际上需要将其设置为`foo.bar.website.net`- 我措手不及，因为在 AWS Route 53 控制台中，只需键入主要材料。

# macos - 将 Make 安装到我的 Mac 上最不痛苦的方法是什么？

> ID：11420065
> 
> 赞同：1
> 
> 时间：2012-07-10T18:59:46.010
> 
> 标签：macos, makefile

我不想安装 2.6 gigs 的 XCode 只是为了在我的系统上安装 Make（此外，我什至不确定我的 Mac 安装磁盘在哪里）。

有没有更简单的方法来获取 Make？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:01:42.797

他们现在已将 Xcode 拆分为更小的包……您现在可以将 nix devtools 作为单独安装获得。该软件包称为“ **XCode 命令行工具**”：

> 该软件包通过安装命令行开发工具以及 Mac OS X SDK 框架和头文件，通过终端实现 UNIX 风格的开发。包括许多有用的工具，例如 Apple LLVM 编译器、链接器和 Make。如果您使用 Xcode，这些工具也嵌入在 Xcode IDE 中，并且可以使用 Xcode 4.3 及更高版本中的“下载”首选项窗格安装在您的系统上。此软件包需要 Mac OS X 10.7.3 或更高版本。

# jquery-ui - 当我在上面显示另一个对话框弹出窗口时，ERIC MARTIN 简单模式窗口关闭事件不起作用....？

> ID：11420069
> 
> 赞同：0
> 
> 时间：2012-07-10T18:59:51.043
> 
> 标签：jquery-ui, simplemodal

我正在使用简单的模态窗口在模态窗口弹出窗口上显示动态内容（表格）。当我只是在模式窗口中显示数据时，关闭事件工作正常。

但是，如果我在关闭 jquery 弹出对话框后在简单模式窗口上显示另一个 jquery 对话框弹出窗口，则我的简单模式窗口弹出 onClose 事件不起作用。

```
 // Base Modal popup
   $('#simple').modal({
       onShow: function() { 
           alert("activated"); 
       },
       onClose: function() {
           alert("deactivated");
           $.modal.close(); 
       }
   });

   // Jquery popup
   $('#kick').dialog({
       //ajax calls to show data  
   }); 
```

即使我正在使用`$.modal.close();` 请关闭事件第二次也无法正常工作...请帮助我...我已经花了一天时间...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:06:59.650

只是一些想法，因为我在这台计算机上没有 VS2010 并且无法确认实际语法:(

```
$('#simple').close();
$(this).modal.close();
this.close(); 
```

不过，这就是我们关闭对话框的方式：

```
$(this).dialog("close"); 
```

所以也许这会起作用？

```
$(this).modal("close"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:46:16.153

```
 // I get rid of this

            $("#basic-modal-content").modal( {
    onShow : function() {
          // anything you want to do before 
               },
    onClose : function() {
        // when closing popup anything you wanna do 
        var a = this;
        a.close();
    }

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:03:54.940

为此，您必须在关闭第一个弹出窗口后打开第二个弹出窗口，大约需要 2 秒。因此，如果您使用 settimeout() 函数并通过提供 2 秒或更长的延迟来调用第二次弹出。它会起作用的。因为，这不是这样做的正确方法。但它实际上对我有用。

我正在使用简单的模态 jquery 插件：这是代码：

```
$('#forgot_password_modal').click(function (e) {
$.modal.close(); // this is written to close all the popups.
setTimeout(function(){
    $('#forgot_password_form').modal({   //to open a second popup
        minHeight:570,
        minWidth:600,
        maxWidth:671,
        opacity: 90,
    onOpen: function(dialog) {
            dialog.overlay.fadeIn('slow', function() {
                dialog.data.hide();
                dialog.container.fadeIn('slow', function() {
                    dialog.data.slideDown('slow');

                });
            });
        },
        onClose: function(dialog) {
            dialog.data.fadeOut('slow', function() {
                dialog.container.slideUp('slow', function() {
                    dialog.overlay.fadeOut('slow', function() {
                        $.modal.close(); // must call this!
                    });
                });
            });
        }});
}, 2000);    
    return false;
}); 
```

# sql - 从日期字段中查询 mm/yyyy 的 AS400 SQL

> ID：11420070
> 
> 赞同：0
> 
> 时间：2012-07-10T18:59:56.253
> 
> 标签：sql, select, ibm-midrange

出于报告目的，我想将我的`date(digits(mydate7))`字段检索为`mm/yyyy`.

我已经尝试过`month(date(digits(mydate7)) + '/' + year (date(digits(mydate7)) as mmyyyy`，但得到`null`了结果。我可以`month(date(digits(mydate7))`单独测试和年份函数并获得一组返回数据，但不能在字段中组合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:18:37.487

DB2/400 使用双竖线字符进行连接：

```
RTRIM(CHAR(MONTH(DATE(DIGITS(mydate7))))) || '/' || RTRIM(CHAR(YEAR(DATE(DIGITS(mydate7))))) 
```

* * *

假设`mydate7`是格式`yyyyddd`，您可以将其简化为：

```
RTRIM(CHAR(MONTH(DATE(DIGITS(mydate7))))) || '/' || SUBSTR(DIGITS(mydate7),1,4) 
```

[通过隐式转换](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/db2/rbafzcastdt.htm)进一步简化：

```
RTRIM(MONTH(DIGITS(mydate7))) || '/' || RTRIM(mydate7/1000) 
```

* * *

有关详细信息，请参阅[连接运算符](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/db2/rbafzwtco.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:07:57.730

[看起来](http://as400questions.blogspot.jp/2009/06/tutorial-as400-chapter-4-sql.html) `CONCAT`是字符串连接函数，而不是`+`. 它可能试图添加一个带有字符串和呕吐的数字。

试试`CONCAT(CONCAT(month(date(digits(mydate7)),'/'), year(date(digits(mydate7)))`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T03:22:53.317

通常我喜欢这样

```
substr(char(mydate7,ISO),6,2) || '/' || substr(char(mydate7,ISO),1,4) 
```

# varnish - 奇怪的清漆 503 错误 - 这是什么意思？

> ID：11420074
> 
> 赞同：17
> 
> 时间：2012-07-10T19:00:13.103
> 
> 标签：varnish

我的在线白板应用程序以前一直在工作，但由于某种原因，它不再工作了。现在它显示 503 Varnish 缓存错误，如下所示：http: [//grab.by/eFHG](http://grab.by/eFHG)

你碰巧知道我应该从哪里开始尝试解决这个问题吗？

谢谢！唐尼

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-13T10:27:33.893

此错误意味着 Varnish 在超时限制内没有来自后端的响应（甚至不是 HTTP 错误）。

您可以通过多种方式对其进行故障排除：

*   在后端：您是否在您的网络服务器日志中看到来自 Varnish 的请求？

*   在 Varnish 服务器上：运行 varnishlog 并检查请求过程。您应该按以下顺序处理事件：RxRequest > TxRequest > RxResponse > TxResponse。您的问题在 TxRequest（发送到后端的请求）和 RxResponse（从后端收到的响应）之间。

*   在您的 Varnish 服务器上，尝试使用 telnet (telnet) 连接后端。它连接吗？如果是，请尝试发送请求（例如“GET /”）。你收到回复了吗？

可能的原因可能是：清漆和后端之间的防火墙/selinux 阻塞、清漆或后端 Web 服务器配置错误（后端地址和端口是否同步？）、Web 服务器停止、...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-07-13T17:37:51.003

你可以随时检查你的`/etc/varnish/default.vcl`（CentOS）。

```
backend default {
  .host = "127.0.0.1";
  .port = "80";
} 
```

确保该`.host`值是您的服务器 IP 地址，并将端口更改为`8080`，并调整您的端口设置`/etc/httpd/conf/httpd.conf`并确保 Apache 侦听`8080`.

**编辑**
这也可能意味着网络服务器（Apache）有*错误*的/默认设置。

*   检查虚拟主机端口，值可能是`80`，它们应该是 `8080`。
*   检查 Listen 指令和 ServerName，它们必须有`8080` 端口。
*   确保你这样做`sudo systemctl enable varnish`。
*   最后一步，做`sudo reboot`（缓存程序在开发状态下困扰着我）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-08T17:54:17.490

当我今天尝试访问此页面时，我得到了错误页面，而不是以下内容：

```
Error 503 Service Unavailable
Service Unavailable

Guru Mediation:
Details: cache-hel6832-HEL 1623148717 170212118 
```

因此，StackOverflow 似乎也在使用今天出现故障的 CDN，并且该故障同时影响了大量服务。在这种情况下，我们可能会受到外部 CDN 提供商的摆布。今天告诉我们，有时候你唯一能做的，就是等待别人为你解决。 [幸运的是，这种中断是短暂的](https://theconversation.com/fastly-global-internet-outage-why-did-so-many-sites-go-down-and-what-is-a-cdn-anyway-162371)。

合适的长期策略是使用多个 CDN 服务而不是单个服务。

# powershell - 如何使用 Powershell 从文本文件中提取字段

> ID：11420075
> 
> 赞同：0
> 
> 时间：2012-07-10T19:00:19.760
> 
> 标签：powershell

我正在尝试从文件中提取一个字段并将提取的字段写入一个新文件，有人可以帮我解决这个问题吗？我在文件中有数据，如下所示

```
"","Processed","XXXXXX XX XXXX XXXX","Import","hgjgf XXXXXXXXXXX                LTD","XXX","sss,ggg.00","0x/xx/xxxx","Xrrrr XXXXXXXX","","XTH asdf XX XXXXXX
XXX000XXX
XXXXXX XXX OCEAN                                                                                           fsdgdhfjgh","WXXXXX","000XXX","X0ASDFXXX","XX","","","","X","","","X","","","" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:43:02.340

根据您提供的输入，如果您有一个名为 foo.txt 的文件，则：

```
Import-CSV C:\Path\To\foo.txt -Header (1..25) | Select-Object '4', '6', '8' 
```

会给你第 4、第 6 和第 8 个字段。您当然可以使用更具描述性的标题，如果文件在第一行中有标题，您可以使用这些标题而无需指定您自己的标题。

# oop - 使用类定义的对象调用新函数时生成“没有适当的方法”错误

> ID：11420076
> 
> 赞同：3
> 
> 时间：2012-07-10T19:00:21.893
> 
> 标签：oop, class, function, matlab, object

我定义了一个名为“FilterCriteria”的类，它有一堆与之关联的函数 .m 文件（getAMask、getBMask 等）。当我创建 FilterCriteria 对象并使用它调用函数时，我没有任何问题。然而，最近我添加了另一个函数（附带说明，它几乎与另一个仍然有效的函数相同），Matlab 返回错误，“没有适当的方法、属性或字段 getHMask 用于类 FilterCriteria。”

我已经在网上搜索过这个问题，但我找不到任何东西。文件 getHMask.m 肯定在正确的文件夹中，所以我不明白为什么 Matlab 似乎有这样的问题找到它。

这是 getHMask.m 的标题：

```
function mask = getHMask(object, quadrant, channel) 
```

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T02:50:14.663

1）我有时犯的一个错误是没有用正确的名称保存文件。确保大写字母在正确的位置等！

2）这里的另一层错误检查...您可以调用`methods('object here')` [（请参阅此处）](http://www.mathworks.com/help/stateflow/api/methods.html)并确保它列出了您尝试添加到其中的方法（函数）。如果它没有出现在这里，你应该检查方法的实现，并确保它被正确地添加到你用于你的对象的类中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-27T00:36:18.280

我遇到了与 Ben 的第 2 条子弹相同的问题，这让我发疯了。原来 MatLab 没有加载我班级 m 文件的最新版本。我模糊地记得它早些时候给了我一个警告，因为工作区中有该类的旧实例并且为了避免使它们无效，它说它不会更新该类，直到我清除工作区...

因此，如果这是问题所在，重新启动 MatLab 即可，或者您可以直接输入`>> clear`

# php - php substr 和文本操作

> ID：11420077
> 
> 赞同：0
> 
> 时间：2012-07-10T19:00:33.133
> 
> 标签：php, text-manipulation

我想获取这些数据：

```
questionX 
```

`X`中的任何数字在哪里`zero to infinity`。

`question`并从字段中减去文本，然后**只保存数字**。

我在玩，`substr($data, 0, 8)`但没有让它正常工作，有人可以给我建议吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:06:28.290

子字符串手册[http://php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php) 指出该函数采用三个参数：字符串、开始和长度。长度是可选的。如果省略，substr 将返回从 'start' 开始的其余字符串。获得 X 值的一种方法是执行以下操作：

```
$theNumber = substr($data, 8); 
```

看起来您并不真正了解 substr 的作用。Substr 不会从自身中“减去”字符串的一部分。它返回您使用 start 和 length 参数指定的字符串部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:04:37.530

尝试这个

```
$number = str_replace("question", "", $string); 
```

# c# - c# 中 Windows 8 Metro 风格应用程序的 webclient.uploadstringasync 的替代品

> ID：11420081
> 
> 赞同：1
> 
> 时间：2012-07-10T19:00:47.690
> 
> 标签：c#, windows, post, httpclient, webclient

我正在使用 Visual Studio Express 2012 RC 为 Windows 8 设计我的 Metro 风格应用程序。

过去，我为 windows phone 开发了一个应用程序，我曾经在其中`webclient.uploadstringasync`将字符串数据发布到服务器。但由于`webclient`Windows 8 不存在，我正在寻找它的替代方案。

我尝试使用`httpclient.postasync`但它不起作用（不知道为什么）。

谁能建议我该怎么做。请解释您建议的任何方法并尝试举例说明。我是 C# 的初学者，所以任何帮助都会起作用。谢谢

**这是我使用`httpclient.postasync`但没有工作的代码示例（不知道为什么）。**

```
HttpClient data=new HttpClient();
HttpContent post;
async private void buttonupdate_Click(object sender, RoutedEventArgs e)
{
    post=new StringContent("I put the string here which is to be posted");
    await data.PostAsync(URI,post);  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:45:25.260

```
HttpContent stringContent = new StringContent("Put Your Data Here");
stringContent.Headers.ContentType = MediaTypeHeaderValue.Parse("application/x-www-form-urlencoded");
stringContent.Headers.ContentLength = uriString.Length;
stringContent.Headers.ContentEncoding.Add("UTF-8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:29:29.087

请查看 Windows 8 的 BackgroundUploader 类，它提供了可能有助于实现您的要求的重载方法

[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.backgroundtransfer.backgrounduploader.aspx)

# php - 将 date() 转换为 time() 但日期具有特定格式

> ID：11420083
> 
> 赞同：0
> 
> 时间：2012-07-10T19:00:56.567
> 
> 标签：php, date, time

我真的很需要你的帮助。我有这个 date() 格式：

```
<?php
date("j. n. Y G:i:s");
?> 
```

但稍后在代码中我需要将其转换为 time() （使用 strtotime），但它失败了。我不知道有什么功能可以做到这一点。我的问题来了——你知道任何功能吗？或者你至少知道如何转换它？我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:02:36.987

该`date()`函数接受第二个参数，一个 UNIX 时间戳，与`strtotime()`生成的时间戳相同。在您的示例中，您没有传递`date()`时间戳，因此它使用`time()`函数的值。无需从格式化的日期字符串中解析出时间戳；你已经有了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:02:57.887

> 但稍后在代码中我需要将其转换为**time()**（使用 strtotime），

简单地：

```
echo strtotime($yourTimeString); 
```

应该给你`time()`函数格式的时间戳。

# c# - 使用 Linq 将数据从 Excel 导入到 SQL 时，获取指定的演员表无效

> ID：11420085
> 
> 赞同：2
> 
> 时间：2012-07-10T19:00:59.970
> 
> 标签：c#, visual-studio-2010, linq-to-sql, asp.net-4.0

这是我的第二个帖子。在从我的第一篇文章中了解到使用 Linq to SQL 是多么美妙之后，我想尝试将数据从 Excel 工作表导入我的 SQL 数据库。

首先是我的 Excel 表：

它包含4列，即

*   编号
*   物品尺寸
*   项目价格
*   售出单位

我创建了一个包含以下字段的数据库表

```
table name ProductsSold
  Id int not null identity --with auto increment set to true
  ItemNo VarChar(10) not null
  ItemSize VarChar(4) not null
  ItemPrice Decimal(18,2) not null
  UnitsSold int not null 
```

现在我基于我的数据库创建了一个 dal.dbml 文件，并且我正在尝试使用下面的代码将数据从 excel 表导入到 db 表中。

一切都发生在点击一个按钮。

```
 private const string forecast_query = "SELECT ItemNo, ItemSize, ItemPrice, UnitsSold FROM [Sheet1$]";

    protected void btnUpload_Click(object sender, EventArgs e)
    {
        var importer = new LinqSqlModelImporter();

        if (fileUpload.HasFile)
        {
            var uploadFile = new UploadFile(fileUpload.FileName);

            try
            {
                fileUpload.SaveAs(uploadFile.SavePath);
                if(File.Exists(uploadFile.SavePath))
                {
                    importer.SourceConnectionString = uploadFile.GetOleDbConnectionString();
                    importer.Import(forecast_query);
                    gvDisplay.DataBind();
                    pnDisplay.Visible = true;
                }
            }
            catch (Exception ex)
            {
                 Response.Write(ex.Source.ToString());
                lblInfo.Text = ex.Message;

            }
           finally
            {
                uploadFile.DeleteFileNoException();
            }

        }
    }

    // Now here is the code for LinqSqlModelImporter

     public class LinqSqlModelImporter : SqlImporter
{
    public override void Import(string query)
    {
        // importing data using oledb command and inserting into db using LINQ to SQL
        using (var context = new WSDALDataContext())
        {
            using (var myConnection = new OleDbConnection(base.SourceConnectionString))
            using (var myCommand = new OleDbCommand(query, myConnection))
            {
                myConnection.Open();
                var myReader = myCommand.ExecuteReader();
                while (myReader.Read())
                {
                    context.ProductsSolds.InsertOnSubmit(new ProductsSold()
                    {
                        ItemNo = myReader.GetString(0),
                        ItemSize = myReader.GetString(1),
                        ItemPrice = myReader.GetDecimal(2),
                        UnitsSold = myReader.GetInt32(3)

                    });

                }
            }

            context.SubmitChanges();
        }
    }

} 
```

有人可以告诉我我在哪里犯了错误，或者我是否遗漏了什么，但这让我发疯了。

当我调试时，我收到了这个错误

> 从数字转换时，值必须是小于无穷大的数字

对此，我真的非常感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:13:02.013

一些选项：

*   在`myReader.GetValue(0)`,等上[添加监视](http://msdn.microsoft.com/en-us/library/0taedcee.aspx)`myReader.GetValue(1)`以查看源值是什么。在引发错误的行上添加断点并查看导致问题的值。

*   将您的对象初始化程序更改为单独的调用，以查看哪个列引发了错误：

```
ProductSold product = new ProductsSold();
product.ItemNo = myReader.GetString(0);
product.ItemSize = myReader.GetString(1);
product.ItemPrice = myReader.GetDecimal(2);
product.UnitsSold = myReader.GetInt32(3);
context.ProductsSolds.InsertOnSubmit(product); 
```

# iphone - iOs5，试图了解 UIPickerView 以及如何将其连接到我的自定义类

> ID：11420086
> 
> 赞同：2
> 
> 时间：2012-07-10T19:01:04.023
> 
> 标签：iphone, ios, uiview, uiviewcontroller, uipickerview

好的，我正在尝试将 a`UIPickerView`与自定义类连接起来。这个想法是在一个普通视图中有 3 个选择器视图。

1.  到目前为止，我已经创建了一个视图并将其绑定到我的类 TestView.h
2.  然后我在情节提要的视图中添加了一个选择器视图（iOS 5）
3.  然后我为这个选择器视图创建了一个类：

    ```
    @interface TestPickerView : UIPickerView <UIPickerViewDelegate, UIPickerViewDataSource> 
    {  
      NSArray *data;  
    } 
    ```

4.  然后尝试将属性添加到我的普通视图（TestView.h）

    ```
    #import "TestPickerView.h"
    @interface TestView : UIViewController
      @property (strong, nonatomic) IBOutlet TestPickerView *myTestPicker;
    @end 
    ```

但是如何将普通视图中的 UIPickerView 绑定到此类/属性？

我最终将有 3 个 UIPickerView，我的想法是在我的中有 3 个引用`UIViewController`来控制这些`UIPickerViews`。这样我就可以在加载普通视图时使用属性设置数据（数据源）一次，然后 PickerViews 就会显示。希望当其中一个视图中的值发生时，我也能够在我的正常视图中得到通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:11:34.897

请改为您的`TestView`>> ，因为它是一个控制器。`TestViewController`

在您的故事板中，选择 PickerView 并将其类名更改为`TestPickerView`.

![在此处输入图像描述](../Images/db6ed27c30ebdb23b20a56cf750f3dfe.png)
![在此处输入图像描述](../Images/699bc735c5b77871d224548dfaba94cc.png)

之后，只需创建您的三个`IBOutlets`并连接 PickerViews。而已。

// 编辑：解释一下，你如何区分选择器。做3个出口，例如：

```
IBOutlet TestPickerView *picker1;
IBOutlet TestPickerView *picker2;
IBOutlet TestPickerView *picker3; 
```

而不是在您的委托方法中，检查哪个选择器确实调用了委托，例如：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    if(pickerView == self.picker1)
    {
        // picker1
    }
    else if(pickerView == self.picker2)
    {
        // picker2
    }
    else
    {
        // picker3
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:27:29.653

给你，伙计，这就是我在几个应用程序和游戏上的做法。

```
 #import <UIKit/UIKit.h>
    #pragma mark - Delegate Protocol 
    @protocol someDelegate
    @required
    -(void)somePickerFinishedPicking:(id)item;
    @end

    #pragma mark - Class interface 
    @interface SomePicker : UIViewController <UIPickerViewDelegate, UIPickerViewDataSource>
    {
        NSMutableArray* dataSource;
    }

    #pragma mark - Property Istantiation 

    @property (nonatomic, retain) NSMutableArray* dataSource;
    @property (nonatomic, retain) id <someDelegate> pickDelegate;

    #pragma mark - Constructors / Destructors

    - (id)   initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil;
    - (void) didReceiveMemoryWarning;
    - (void) dealloc;
    - (void) createDataSource;

    #pragma mark - View Lifecycle
    - (void) viewDidLoad;

    #pragma mark - UIPicker Protocols

    -(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component;
    -(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView;
    -(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component;
    -(UIView*) pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view;

    #pragma mark - Delegate Protocols

    -(void) handlePickerDidFinish:(id)item;

    @end 
```

这是给你的 .m

```
#pragma mark - Class Implementation 
@implementation SomePicker

#pragma mark - Variable synthesize 
// ARRAYS
@synthesize dataSource;

// DELEGATES
@synthesize pickDelegate = _pickDelegate;

#pragma mark - Constructors / Deconstructors 
// Class initialization
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil;
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        dataSource = [[NSMutableArray alloc] init];
        [self createDataSource];
    }
    return self;
}

// Handles memory warning events
- (void)didReceiveMemoryWarning
{
    // Release the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

// Garbage Collection
- (void) dealloc;
{
    // Release what you need
    self.dataSource = nil;
    [super dealloc];
}

// Creates the occasion entries for the picker
-(void)createDataSource
{
    NSMutableDictionary* dataDictionary = [[NSMutableDictionary alloc] init];
    // create your data source here or just forget about this and pass it from the parentViewController.
    [dataDictionary release];
}

#pragma mark - View lifecycle
// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad;
{
    [super viewDidLoad];

    UIPickerView* occasionsPicker = [[UIPickerView alloc] init];
    [occasionsPicker setDataSource:self];
    [occasionsPicker setDelegate:self];
    [occasionsPicker setTag:888];
    [occasionsPicker selectRow:500 inComponent:0 animated:YES];
    [self.view addSubview:occasionsPicker];
    [occasionsPicker release];

    [self handlePickerDidFinish:[[self.dataSource objectAtIndex:(500 % self.dataSource.count)] objectForKey:@"key"]];
}

#pragma mark - UIPicker Protocols

// Creates the rows in the picker.
-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{   
    // Endless roll illusion else just bind it to the size of the data source
    return 1000;
}

// Determines the number of columns in the picker
-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    // Add however many columns you need
    return 1;
}

// Handles the event when the user picks a row.
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    //this does something with the row selected
    [self handlePickerDidFinish:[[self.dataSource objectAtIndex:(row % self.dataSource.count)] objectForKey:@"key"]];
}

// Creates the custom view for each cell so the text shows in accordance to the App Style
-(UIView*) pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view
{
    UILabel* customRowLabel = [[[UILabel alloc] initWithFrame:CGRectMake(0, 0, [pickerView rowSizeForComponent:component].width, [pickerView rowSizeForComponent:component].height)] autorelease];

    customRowLabel.font = [UIFont fontWithName:@"HelveticaNeue" size: 16];
    customRowLabel.textColor = [UIColor colorWithRed:kColorRed green:kColorGreen blue:kColorBlue alpha:1];
    customRowLabel.textAlignment = UITextAlignmentCenter;
    customRowLabel.backgroundColor = [UIColor clearColor];

    customRowLabel.text = [[self.dataSource objectAtIndex:(row % self.dataSource.count)] objectForKey:@"key"];

    return customRowLabel;
}

#pragma mark - Delegate Protocols 
// Notifies Delegate class that an action has been perfomed and passes the Mood String selected
-(void)handlePickerDidFinish:(id)item
{
    [self.pickDelegate somePickerFinishedPicking:item];
}

@end 
```

并像这样在你的父 ViewController 上实例化它：

```
CGRect rectPicker = CGRectMake(60, 100, 200, 216);
self.somePicker = [[[SomePicker alloc] init] autorelease];
[self.somePicker setPickDelegate:self];
[self.somePicker.view setBackgroundColor:[UIColor clearColor]];
self.somePicker.view.frame = rectPicker;
[self.somePicker.view setTag:777];
[self.somePicker.view setAlpha:0];
[self.view addSubview:self.somePicker.view]; 
```

~/行尾

# c++ - 如何在文件中写入stream.rdbuff

> ID：11420087
> 
> 赞同：0
> 
> 时间：2012-07-10T19:01:06.967
> 
> 标签：c++, visual-c++

我试图将 stream.rdbuf() 写入文件但它似乎不起作用，只是一个空白文件，我不知道该怎么办。

```
#include "stdafx.h"

#include <iostream>
#include <boost/asio.hpp>
#include <conio.h>
#include <stdio.h>
#include <fstream>

char buffer [9999999];

int main()
{
    boost::asio::ip::tcp::iostream stream;
    stream.expires_from_now(boost::posix_time::seconds(60));
    stream.connect("www.mail.ru","http");
    stream << "GET / HTTP/1.1\r\n";
    stream << "Host mail.ru\r\n";
    stream << "User-Agent   Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11\r\n";
    stream << "Accept   text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n" ;
    stream << "Accept-Encoding  gzip,deflate,sdch\r\n";
    stream << "Accept-Language  en-US,en;q=0.8\r\n";
    stream <<"Accept-Charset    ISO-8859-1,utf-8;q=0.7,*;q=0.3\r\n";
    stream << "Cookie   \r\n\r\n";
    stream.flush();
    using namespace std ;
    cout << stream.rdbuf();
    ofstream f("output.txt" /*| ios::bin*/);
    f << stream.rdbuf();
    f.close();
    system("pause");
    return 0 ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:09:53.903

您调用`stream.rdbuf()`了两次：一次用于标准输出`cout`，然后用于文件。

从您的解释中不清楚您是否在屏幕上看到任何输出（当您写信时`cout`）。

1）如果是，您需要将其写入文件：当您再次读取流时，它已用尽并且不包含任何内容。

只需删除

```
cout << stream.rdbuf(); 
```

线。

如果您还需要在屏幕上查看结果，`std::stringstream`请先捕获它，然后您可以将其内容输出到屏幕和文件（在第一次提取后使用`seekp`重置`stringstream`它）

2）如果您在屏幕上看不到结果，您很可能在连接到服务时遇到了问题

# php - Javascript 不适用于 ajax 调用

> ID：11420088
> 
> 赞同：0
> 
> 时间：2012-07-10T19:01:10.480
> 
> 标签：php, javascript, jquery, html, ajax

我在 Ajax 调用中遇到了工作 JS 的问题。JS 正常工作，直到我从数据库中获取新数据或收到 ajax 调用。Ajax 调用工作正常，只是 Javascript 不加载。请帮忙。

这是示例 index.php。

```
 <!-- library -->
    <script type="text/javascript" src="js/deleting_data.js"></script>
    <link href="css/forme.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>
    <script type="text/javascript" src="js/funkcije.js"></script>
     <link rel="stylesheet" type="text/css" href="css/dinamicno_iskanje.css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
    <script type="text/javascript" src="js/jquery.ausu-autosuggest.min.js"></script>

 <div id="load" align="center"><img src="images/loading.gif" width="28" height="28" align="absmiddle"/> Loading...</div>
  <div id="seek">//here comes refreshed data, with ajax call
 <table class="content" style="border-collapse: separate; border-spacing: 0px 5px; ">
     <?php  
        while($row=mysql_fetch_array($query))
        {
            //data from database
      </table></div>
  <div id="delete"></div> //ajax call for deleting data 
```

这是refreshed_data.php

```
 <!-- library -->
    <script type="text/javascript" src="js/deleting_data.js"></script>
    <link href="css/forme.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>
    <script type="text/javascript" src="js/funkcije.js"></script>
     <link rel="stylesheet" type="text/css" href="css/dinamicno_iskanje.css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
    <script type="text/javascript" src="js/jquery.ausu-autosuggest.min.js"></script>

<div id="load" align="center"><img src="images/loading.gif" width="28" height="28" align="absmiddle"/> Loading...</div>
<table class="content" style="border-collapse: separate; border-spacing: 0px 5px; ">
 <?php  
    while($row=mysql_fetch_array($query)
    {
        //refreshed data
    ?>
      </table>
       <div id="delete"></div>//ajax call for deleting data 
```

这是deleting_data.js，页面加载时正常工作。

```
$(document).ready(function () {
    //$(".gumb").live("click",function(){
    $('#load').hide();
    $('#brisanje').hide();
});

$(function () {
    //$(".gumb").click(function() {
    $(".gumb").live("click", function () {

        $('#load').fadeIn();
        $('#brisanje').fadeIn();
        $(this).parent().parent().fadeOut(1000, function () {
            $(this).remove();
        });
        $('#load').fadeOut();
        $('#brisanje').fadeOut(1000);

    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:20:49.043

如果您正在寻找基于从 AJAX 调用创建的 elemenet 触发的 javascript，您需要记住您的操作顺序。例如：如果您在时间 0 触发了一个 .click 事件分配，然后在时间 4 ajax 一些内容，它产生了一个与 click 事件的参数匹配的类型，它将不会分配 .click 属性。这是因为分配单击事件的脚本未应用于该元素。需要通过再次调用该 .click 函数来重新应用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T08:26:27.903

live() 自 jQuery 1.7 起已弃用尝试使用 on() 代替，如下所示：

```
$('rootselector').on('click', 'selector', function(){
   ...
}); 
```

使用您的代码：

```
$(document).on('click', '.gumb', function() {
// your stuff
}) 
```

并且为了记录，你包含了 jQuery 两次：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
```

# ruby-on-rails - Rails 视图处理模型中的空白值

> ID：11420089
> 
> 赞同：0
> 
> 时间：2012-07-10T19:01:15.080
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在这里，带着我的 Rails 项目，这个问题让我印象深刻。对于我的用户配置文件，某些属性将为空白，我希望它们默认为特定值：如果未设置它们，我希望我的视图显示自定义消息并在其周围添加一个 CSS 类，如“空白”。

我正在使用 Presenter，但由于它的行为有点像 Helper，假设这些是辅助方法。

在我的助手中，我有类似的东西：

```
def professional_information
    handles_not_set user.university, user.job do |university, job|
        content_tag(:p, university.content, class: university.error) +
        content_tag(:p, job.content, class: job.error)
    end
end 
```

`handles_not_set`定义如下：

```
def handles_not_set(*objects)
    o = []
    objects.each do |object|
      attr = OpenStruct.new
      if object.blank?
        attr.content = 'Not specified.'
        attr.errors = ['blank']
      else
        attr.content = object
        attr.errors = []
      end
      o << attr
    end
    yield *o
end 
```

但我觉得这很不雅，我想保持代码干燥（即：我不希望我的演示者的方法充满'if xxx.blank？'）

关于如何改进这一点的任何想法？

非常感谢 ！

# ruby-on-rails-3 - minitest-spec-rails 导致所有控制器测试失败并出现 NoMethodError: undefined method `safe_constantize' for "UsersController":String

> ID：11420092
> 
> 赞同：0
> 
> 时间：2012-07-10T19:01:22.873
> 
> 标签：ruby-on-rails-3, minitest

我尝试将 minitest-spec-rails 放到现有的 Rails 3.0 项目中，但所有控制器测试都失败，出现 NoMethodError: undefined method `safe_constantize' for "UsersController":String 之类的错误

有人遇到过这种情况么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:01:51.517

[minitest-rails](https://github.com/blowmage/minitest-rails) gem从2012 年 7 月发布的 0.1 版开始支持 Rails 3.0。在此之前它需要 3.1+。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:10:55.680

似乎 minitest-spec-rails 需要 rails 3.2+ 而不是支持 3.0。

# php - 提取部分网址

> ID：11420093
> 
> 赞同：2
> 
> 时间：2012-07-10T19:01:24.163
> 
> 标签：php

我正在尝试使用正则表达式提取 URL 的一部分。

我的网址的一个例子是：

```
http://www.google.com/search?sourceid=chrome&ie=UTF-8&q=food 
```

使用 php，如何提取 q 变量或 sourceid 变量中的数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T19:03:34.633

不要为此使用正则表达式。相反，使用[`parse_url()`](http://php.net/parse_url)和[`parse_str()`](http://php.net/parse_str)。

```
$params = array();
$url= "http://www.google.com/search?sourceid=chrome&ie=UTF-8&q=food";
$url_query = parse_url($url, PHP_URL_QUERY);
parse_str($url_query, $params);
echo $params['q']; // Outputs food 
```

[演示](http://viper-7.com/x653bT)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:03:34.067

[对于您要完成](http://www.electrictoolbox.com/php-parse-str/)的工作的完美教程：

```
$parts = parse_url('http://www.google.com/search?sourceid=chrome&ie=UTF-8&q=food');
parse_str($parts['query'], $query);
echo $query['q']; 
```

# asp.net - 如何将任何子域请求重定向到asp.net中的主域

> ID：11420094
> 
> 赞同：2
> 
> 时间：2012-07-10T19:01:26.207
> 
> 标签：asp.net, iis-7.5, http-redirect

我正在尝试将 domain.com 的所有子域请求重定向到 www.domain.com ，用户必须通过输入主域并单击链接来访问网站的所有部分，例如，如果用户直接在浏览器中输入以下地址：

```
subdomain.domain.com 
```

或者

```
www.domain.com/post/showPost.aspx?pid=11 
```

我想显示错误页面，然后重定向到 www.domain.com

我使用 asp.net 和 IIS 7.5 和 Visual Studio 2010

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:13:23.160

使用 URL 重写模块可能是要走的路。尝试使用类似于以下的配置：

```
<system.webServer>
    <rewrite>
        <rules>
            <clear />
            <rule name="Redirect to WWW" enabled="true" stopProcessing="true">
                <match url=".*" />
                <conditions logicalGrouping="MatchAll">
                    <add input="{HTTP_HOST}" pattern=".*" />
                </conditions>
                <action type="Redirect" url="http://www.domain.com/{R:0}" />
            </rule>
        </rules>
    </rewrite>
</system.webServer> 
```

这将重定向而不显示错误页面。如果要显示错误页面，则需要重定向到一个页面，该页面采用返回 URL 并将客户端重定向到正确的位置。

正如@inspile 所说，您将无法为网站的子页面执行此操作。您可以使用引荐来源网址来确保它来自主站点上的链接。同样，URL 重写模块是这里的方法。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:10:59.473

对于子域，您可以使用虚拟主机的控制面板重定向它们，或者如果您在可以远程访问的服务器上设置了子域，请使用 IIS 管理器中的 URL 重写模块将子域的所有请求重定向到您的 www子域。使用 URL 重写，您不必显示错误页面，重定向将自动发生。

您将无法限制用户仅使用链接访问页面。

# objective-c - 如何将带有变量的 NSString 分配给 nsstring 对象？

> ID：11420100
> 
> 赞同：0
> 
> 时间：2012-07-10T19:01:37.973
> 
> 标签：objective-c, c

我有以下代码：

```
long mins = 02; long secs = 35;
  NSString *allTime = [[NSString alloc]init];
    allTime = @"%i:%i",mins, secs ; 
```

但它不起作用，因为当我尝试显示那个 nsstring 对象时，我得到了这个：%i:%i 而不是我想要得到的：02:35

怎么做 ？谢谢！

```
allTime = [NSString stringWithFormat:@"%l/%l", mins, secs];
for(Playlists *thePL in collection)
    {
        NSLog(@"===NEXT PLAYLIST===");
        NSLog(@"Name: %@", thePL.namePL);
        NSLog(@"Quantity of songs: %i", thePL.entries);
        NSLog(@"Total of time: %@",thePL.allTime);
    } 
```

总时间： l

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T19:03:27.990

您需要使用`stringWithFormat`，请参阅[**`NSString Class Reference`**](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)。

```
allTime = [NSString stringWithFormat:@"%d:%d",mins, secs]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T19:04:20.080

```
long mins = 02;
long secs = 35;   
NSString *allTime = [[NSString alloc] initWithFormat: @"%d:%d", mins, secs]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T19:05:36.613

尝试：

```
NSString *allTime = [NSString stringWithFormat:@"%d:%d",mins, secs]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T19:44:07.060

首先你应该阅读 NSString 的 calss 参考。其次，您应该使用以下代码：

```
 NSString *allTime = [stringWithFormat:@"%d,:%d", mins, secs] 
```

您还可以分配字符串，然后通过这种方式对其进行初始化：

```
NSString *allTime = [[Nsstring alloc] init];
allTime = [NSString stringWithForat:@"%d:%d", mins, secs]; 
```

虽然，最好的，短的和更好的方法是第一个。希望这有帮助...

# memory - 需要 CUDA 设备内存事务

> ID：11420101
> 
> 赞同：0
> 
> 时间：2012-07-10T19:01:42.520
> 
> 标签：memory, cuda, gpu, shared-memory

我编写了小 cuda 代码来了解全局内存到共享内存传输事务。代码如下：

```
#include <iostream>
using namespace std;

__global__ void readUChar4(uchar4* c, uchar4* o){
  extern __shared__ uchar4 gc[];
  int tid = threadIdx.x;
  gc[tid] = c[tid];
  o[tid] = gc[tid];
}

int main(){
  string a = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";
  uchar4* c;
  cudaError_t e1 = cudaMalloc((void**)&c, 128*sizeof(uchar4));
  if(e1==cudaSuccess){
    uchar4* o;
    cudaError_t e11 = cudaMalloc((void**)&o, 128*sizeof(uchar4));

    if(e11 == cudaSuccess){
      cudaError_t e2 = cudaMemcpy(c, a.c_str(), 128*sizeof(uchar4), cudaMemcpyHostToDevice);
      if(e2 == cudaSuccess){
        readUChar4<<<1,128, 128*sizeof(uchar4)>>>(c, o);
        uchar4* oFromGPU = (uchar4*)malloc(128*sizeof(uchar4));
        cudaError_t e22 = cudaMemcpy(oFromGPU, o, 128*sizeof(uchar4), cudaMemcpyDeviceToHost);
        if(e22 == cudaSuccess){
          for(int i =0; i < 128; i++){
            cout << oFromGPU[i].x << " ";
            cout << oFromGPU[i].y << " ";
            cout << oFromGPU[i].z << " ";
            cout << oFromGPU[i].w << " " << endl;

          }
        }
        else{
          cout << "Failed to copy from GPU" << endl;
        }
      }
      else{
        cout << "Failed to copy" << endl;
      }
    }
    else{
      cout << "Failed to allocate output memory" << endl;
    }
  }
  else{
    cout << "Failed to allocate memory" << endl;
  }
  return 0;
} 
```

此代码只是将数据从设备内存复制到共享内存，然后再复制回设备内存。我有以下三个问题：

1.  在这种情况下，从设备内存到共享内存的传输是否保证需要 4 次内存事务？我相信这取决于 cudaMalloc 如何分配内存；如果内存是随意分配的，以至于数据分散在内存中，那么它将需要超过 4 个内存事务。但是，如果 cudaMalloc 以 128 字节块分配内存或连续分配内存，则它不应占用超过 4 个内存事务。
2.  上述逻辑是否也适用于将数据从共享内存写入设备内存，即传输将在 4 个内存事务中完成。
3.  此代码会导致银行冲突吗？如果线程按顺序分配 id，我相信这段代码不会导致银行冲突。但是，如果线程 32 和 64 被安排在同一个 warp 中运行，那么此代码可能会导致 bank 冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T03:19:05.230

在您提供的代码中（在此处重复），编译器将完全删除共享内存存储和加载，因为它们没有对代码执行任何必要或有益的操作。

```
 __global__ void readUChar4(uchar4* c, uchar4* o){
  extern __shared__ uchar4 gc[];
  int tid = threadIdx.x;
  gc[tid] = c[tid];
  o[tid] = gc[tid];
} 
```

假设您对共享内存做了一些事情，所以它没有被消除，那么：

1.  在此代码中，从全局内存中读取和存储到全局内存将需要每个 warp 的一个事务（假设 Fermi 或更高版本的 GPU），因为它们`uchar4`每个线程只有 32 位（= 4 * 8 位）（每个 warp 总共 128 字节）。`cudaMalloc`连续分配内存。
2.  1\. 的答案也适用于商店，是的。
3.  此代码中没有银行冲突。经线中的线程始终是连续的，第一个线程是经线大小的倍数。所以线程 32 和 64 永远不会在同一个经线中。而且由于您正在加载和存储 32 位数据类型，并且存储库是 32 位宽，因此没有冲突。

# javascript - 我怎样才能像手风琴一样切换它的工作高度？

> ID：11420105
> 
> 赞同：0
> 
> 时间：2012-07-10T19:02:05.447
> 
> 标签：javascript, jquery

我在为多个 div 设置这个时遇到了麻烦。我在这里[http://jsfiddle.net/DpffX/](http://jsfiddle.net/DpffX/)只设置了一个。我想让链接的高度增加 onclick 和隐藏的 div slideDown。单击第二个链接时，第一个 div 会向上滑动，然后链接高度回到原来的高度，第二个链接经过相同的打开顺序，所以一切都像手风琴一样工作。*link 标签有一个 bg 图像，它是一条线，因此看起来像一条线被绘制到隐藏的 div。谢谢你。更新了小提琴 jsfiddle.net/J2ySt/2

HTML

```
<div class="slider2">
    <h2>title</h2>
    <a href="#" class="line">link1 |</a>
    <a href="#" class="line">link2 |</a>
    <a href="#" class="line">link3 |</a>
    <a href="#" class="line">link4 |</a>
</div><!-- end .slider2 -->
<div id="link1" style="height:100px; background:#000; color:#fff; margin-left:20px; display:none;">content1</div>
<div id="link2" style="height:100px; background:#000; color:#fff; margin-left:20px; display:none;">content2</div>
<div id="link3" style="height:100px; background:#000; color:#fff; margin-left:20px; display:none;">content3</div>
<div id="link4" style="height:100px; background:#000; color:#fff; margin-left:20px; display:none;">content4</div> 
```

jQuery

```
$(document).ready(function(){
    $(".line").toggle(function(){
        $(this).animate({height:108},500);
        $("#link1").delay(500).slideDown();
        },function(){
            $(this).delay(500).animate({height:20},500);
            $("#link1").slideUp();
    }); 
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:10:50.003

你可以使用`data-*`属性：

```
<a href="#" data-link="1" class="line">link1 |</a>
<a href="#" data-link="2" class="line">link2 |</a>
<a href="#" data-link="3" class="line">link3 |</a>
<a href="#" data-link="4" class="line">link4 |</a> 
```

```
$(document).ready(function(){
    $(".line").toggle(function(){
           var w = $(this).data('link');
           $(this).animate({height:108},500);
           $("#link"+w).delay(500).slideDown();
        },function(){
           var w = $(this).data('link');
           $(this).delay(500).animate({height:20},500);
           $("#link"+w).slideUp();
    });
}); 
```

[演示](http://jsfiddle.net/DpffX/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:40:00.153

稍微重构了代码

```
$(document).ready(function(){
    $(".line").click(function() {
        $(".line").animate({height:20},500);
        $("[id^=link]").slideUp();
        $(this).animate({height:108},500);
        $($(this).attr("href")).delay(500).slideDown();
        return false;
    });
}); 
```

在 HTML 中，您只需确保将 更改`<a href>`为类似于：`<a href="#link1">`，其中`href`关联的 ID`div`前面带有`#`. 在这里看到的代码：http: [//jsfiddle.net/Skooljester/DpffX/5/](http://jsfiddle.net/Skooljester/DpffX/5/)

# r - R将数据帧强制为数字

> ID：11420107
> 
> 赞同：0
> 
> 时间：2012-07-10T19:02:15.590
> 
> 标签：r, dataframe, numeric

RandomForest 已返回对象 prd，它是带索引的类数字：

```
> prd
      298       252       373       117         0        16       442        74 
4397.9232 1826.1264 1787.1963 1388.8097 1075.7217  873.9856 1602.7068 1775.1237 
class(prd)
[1] "numeric" 
```

我想做一个相关性测试，这意味着获得相同格式的 obs。目前，obs 是一个单列数据框：

```
> obs
       e2004MeanY
298       4261
252       1821
373       1710
117       1138 
```

如何将 obs 转换为正确的格式？我不知道如何将索引与数字中的值联系起来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:27:29.780

您可以对数据框进行子集化`[`，默认情况下`drop = TRUE`将删除空维度，从而从 1 列数据框变为数字向量。例如

```
R> obs <- data.frame(e2004MeanY = c(4261,1821,1712,1138))
R> rownames(obs) <- c(268,252,373,117)
R> 
R> (obs1 <- obs[, 1]) ## equiv of: obs[, 1, drop = TRUE]
[1] 4261 1821 1712 1138
R> class(obs1)
[1] "numeric" 
```

如果丢失行名是一个问题，则将它们添加回`names`向量的：

```
R> names(obs1) <- rownames(obs)
R> obs1
 268  252  373  117 
4261 1821 1712 1138 
```

当然，如果您在调用时使用临时对象，这不是问题`cor()`，例如：

```
cor(prd, obs[, 1]) 
```

# java - 如何解析 txt 网络服务

> ID：11420108
> 
> 赞同：0
> 
> 时间：2012-07-10T19:02:24.377
> 
> 标签：java, web-services

我正在尝试从 Java 程序中的 Web 服务获取结果。我以前做过 xml 服务，但是这个是基于文本的，我不知道如何记录响应。

这是网络服务：[http ://ws.geonames.org/countryCode?lat=47.03&lng=10.2](http://ws.geonames.org/countryCode?lat=47.03&lng=10.2)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:12:29.603

如果它只是文本，并且您不使用任何标准格式（如 SOAP），则需要使用 Sockets：

```
URL myURL = new URL("http://ws.geonames.org/countryCode?lat=47.03&lng=10.2");
URLConnection serviceConnection = myURL.openConnection();
BufferedReader in = new BufferedReader(new InputStreamReader(
                               serviceConnection.getInputStream()));

List<String> response =new ArrayList<String>(); 
```

如果您有很多行，请使用它：

```
while ((inputLine = in.readLine()) != null) 
   response.add(inputLine); 
```

或者，如果您只有一行（例如您问题中的 Web 服务），请使用它：

```
String countryCode = in.readLine(); 
```

并完成：

```
serviceConnection.close(); 
```

就我而言，国家代码是“AT”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:15:33.490

```
public class CountryCodeReader {

    private String readAll(Reader rd) throws IOException {
        StringBuilder sb = new StringBuilder();
        int cp;
        while ((cp = rd.read()) != -1) {
            sb.append((char) cp);
        }
        return sb.toString();
    }

    public String readFromUrl(String url) throws IOException, JSONException {
        InputStream is = new URL(url).openStream();
        try {
            InputStreamReader is = new InputStreamReader(is, Charset.forName("UTF-8"))
            BufferedReader rd = new BufferedReader(is);

            return readAll(rd);
        } finally {
            is.close();
        }
        return null;
    }

    public static void main(String[] argv) {
        CountryCodeReader ccr = new CountryCodeReader(); 
        String cc = ccr.readFromUrl("http://ws.geonames.org/countryCode?lat=47.03&lng=10.2");
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:18:01.323

除了 URL 之外的另一种实现是使用 HttpClient。

# mysql - MAMP：在同一网络上的 2 台计算机之间共享数据库

> ID：11420111
> 
> 赞同：0
> 
> 时间：2012-07-10T19:02:41.243
> 
> 标签：mysql, networking, mamp, sharing

我将如何在同一网络上的 2 台机器上共享 MAMP 中的 MySQL 数据库？我猜有一些文件权限和网络设置需要配置才能完成此操作。我只是没有找到一个很好的教程来说明如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:10:50.090

要允许远程访问您的 mysql 服务器，您需要更改`bind-address`默认值是只允许来自 localhost 的连接，以允许来自所有网卡的连接，只需取消注释该行`/etc/mysql/my.cnf`

# android - Google Directions API 是否会考虑流量？

> ID：11420120
> 
> 赞同：1
> 
> 时间：2012-07-10T19:03:29.733
> 
> 标签：android, google-maps, google-maps-api-3, google-directions-api

我知道在 android 的谷歌地图应用程序中，确实如此。但是我不确定它是否适用于使用[https://developers.google.com/maps/documentation/directions/的驾驶方向](https://developers.google.com/maps/documentation/directions/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:22:43.697

不，Google Directions API 不会将流量计入其计算中。据我所知，交通信息来自其他地方，谷歌地图应用程序获取方向信息和交通信息，并将它们一起处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T23:50:27.360

是的，我正在尝试使此功能正常工作，看起来 gm.getdirections() 需要命令行 kargs。也许是这样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-13T18:45:17.833

我不太清楚为什么，但方向 API 似乎总是一个完全“静态”的回复。换句话说，当前条件对响应没有影响。

我在一个问题中写了这个来验证它，但据我所知，它目前是这样的：

1.  在免费 API 中，它根本不会查看流量
2.  在付费 API 中，它会查看流量，但不会重新路由，只是告诉您估计的实际行程持续时间
3.  在所有 Google 最终产品中，地图都会考虑流量，并会相应地重新路由。

# haskell - Haskell 有返回类型重载吗？

> ID：11420126
> 
> 赞同：19
> 
> 时间：2012-07-10T19:03:52.853
> 
> 标签：haskell, polymorphism

根据我对 Haskell 的了解以及我对 GHC 所做的实验，Haskell 似乎具有返回类型重载（也称为临时多态性）。这方面的一个例子是一个`fromInteger`函数，它可以根据结果的使用位置为您提供 a`Double`或 an 。`Integer`例如：

```
fd :: Double -> String
fd x = "Double"

fi :: Integer -> String
fi x = "Integer"

fd (fromInteger 5)  -- returns "Double"
fi (fromInteger 5)  -- returns "Integer" 
```

[Haskell 的温和介绍](http://www.haskell.org/tutorial/classes.html)似乎同意这一点，它说：

> 到目前为止我们所讨论的这种多态性通常称为参数多态性。还有另一种称为 ad hoc 多态性，更广为人知的是重载。以下是一些临时多态性的示例：
> 
> *   文字 1、2 等通常用于表示固定精度和任意精度的整数。

如果数字文字被认为是临时多态性（又名重载）的一个例子，那么对于像`fromInteger`.

事实上，我[在 Stack Overflow 上找到了一些其他问题的](https://stackoverflow.com/questions/442026/function-overloading-by-return-type)答案，这些问题表明 Haskell 具有按返回类型重载的功能。

但是，至少有一位 Haskell 程序员告诉我，这不是返回类型重载，而是“参数多态性，其中参数受通用量词约束”的示例。

我*认为*他的意思是从（某种非确定性类型）的`fromInteger`每个实例返回一个值。`Num`

这似乎是一个合理的解释，但据我所知，Haskell 永远不会让我们查看这些实例值中的一个以上（部分归功于[Monomorphism 限制](http://www.haskell.org/haskellwiki/Monomorphism_restriction)）。似乎我们看到的实际实例的价值也可以静态确定。由于所有这些，似乎可以合理地说表达式`fd (fromInteger 5)`中的子表达式`fromInteger 5`是 type `Double`，而表达式`fi (fromInteger 5)`中的子表达式`fromInteger 5`是 type `Integer`。

那么，Haskell 有返回类型重载吗？

如果不是，请提供以下其中一项的示例：

*   如果 Haskell 具有返回类型重载，则有效的 Haskell 代码将具有不同的行为
*   如果 Haskell 具有返回类型重载，则有效的 Haskell 代码将无效
*   如果 Haskell 具有返回类型重载，则无效的 Haskell 代码将有效

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T19:14:26.140

好吧，一种看待它的方法是，Haskell 将您正在考虑的返回类型多态性转换为参数多态性，使用称为类型类的**字典传递翻译的东西。**（虽然这不是实现类型类或推理它们的唯一方法；它只是最流行的。）

基本上，`fromInteger`在 Haskell 中有这种类型：

```
fromInteger :: Num a => Integer -> a 
```

这可能会在内部翻译成如下内容：

```
fromInteger# :: NumDictionary# a -> Integer -> a
fromInteger# NumDictionary# { fromInteger = method } x = method x

data NumDictionary# a = NumDictionary# { ...
                                       , fromInteger :: Integer -> a
                                       , ... } 
```

因此，对于每个`T`具有`Num`实例的具体类型，都有一个`NumDictionary# T`包含 function 的值`fromInteger :: Integer -> T`，并且所有使用该`Num`类型类的代码都被转换为以字典作为参数的代码。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-10T19:23:14.640

关于 Haskell 风格类型类的开创性论文被称为[“如何使 ad-hoc polymorphism less ad hoc”](http://homepages.inf.ed.ac.uk/wadler/topics/type-classes.html)。因此，您的问题的答案是合格的“是”——这取决于您要求返回类型重载的临时性...

换句话说：毫无疑问，即席多态性与类型类*相关*，因为这是发明它们的一个激励例子。但是您是否认为结果仍然符合“返回类型重载”的条件，取决于您喜欢的定义的繁琐细节。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-10T21:32:10.990

我想解决你问题的一小部分：

> 似乎我们看到的实际实例的价值也可以静态确定。

这并不准确。考虑以下古怪的数据类型：

```
data PerfectlyBalancedTree a
    = Leaf a
    | Branch (PerfectlyBalancedTree (a,a))
    deriving (Eq, Ord, Show, Read) 
```

在我们继续讨论好位之前，让我们先看看这种类型。以下是 type 的一些典型值`PerfectlyBalancedTree Integer`：

```
Leaf 0
Branch (Leaf (0, 0))
Branch (Branch (Leaf ((0,0),(0,0))))
Branch (Branch (Branch (Leaf (((0,0),(0,0)),((0,0),(0,0)))))) 
```

实际上，您可以将这种类型的任何值可视化为 n 个`Branch`标签的初始序列，后跟“我们终于完成了，谢天谢地”`Leaf`标签，后跟包含类型的 2^n 元组。凉爽的。

现在，我们将编写一个函数来解析这些更方便的表示。这是几个示例调用：

```
*Main> :t fromString
fromString :: String -> PerfectlyBalancedTree Integer
*Main> fromString "0"
Leaf 0
*Main> fromString "b(42,69)"
Branch (Leaf (42,69))
*Main> fromString "bbb(((0,0),(0,0)),((0,0),(0,0)))"
Branch (Branch (Branch (Leaf (((0,0),(0,0)),((0,0),(0,0)))))) 
```

在此过程中，编写一个稍微多态的函数会很方便。这里是：

```
fromString' :: Read a => String -> PerfectlyBalancedTree a
fromString' ('b':rest) = Branch (fromString' rest)
fromString' leaf = Leaf (read leaf) 
```

现在我们真正的函数只是具有不同类型签名的同一件事：

```
fromString :: String -> PerfectlyBalancedTree Integer
fromString = fromString' 
```

但是等一下……这里刚刚发生了什么？我把你的东西滑倒了！为什么我们不直接写这个？

```
fromStringNoGood :: String -> PerfectlyBalancedTree Integer
fromStringNoGood ('b':rest) = Branch (fromStringNoGood rest)
fromStringNoGood leaf = Leaf (read leaf) 
```

原因是在递归调用中，*`fromStringNoGood`有不同的类型*。它不是被要求返回 a `PerfectlyBalancedTree Integer`，而是被要求返回 a `PerfectlyBalancedTree (Integer, Integer)`。我们可以给自己写一个这样的函数......

```
fromStringStillNoGood :: String -> PerfectlyBalancedTree Integer
fromStringStillNoGood ('b':rest) = Branch (helper rest)
fromStringStillNoGood leaf = Leaf (read leaf)

helper :: String -> PerfectlyBalancedTree (Integer, Integer)
helper ('b':rest) = Branch ({- ... what goes here, now? -})
helper leaf = Leaf (read leaf) 
```

...但是这种方式是无限倒退到编写越来越深的嵌套类型。

问题是，即使我们对*单态*顶级函数感兴趣，我们仍然*无法*静态确定`read`在它使用的多态函数中调用的是什么类型！我们传递的数据决定了`read`应该返回什么类型的元组：更多`b`的 s`String`意味着更深的嵌套元组。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-10T19:20:04.030

你是对的：Haskell 确实有重载，它通过其类型类机制提供它。

考虑以下签名：

```
f :: [a] -> a
g :: Num a => [a] -> a 
```

第一个签名告诉你，给定任何类型的元素列表`a`，`f`都会产生一个类型的值`a`。这意味着 的实现`f`不能对类型`a`及其允许的操作做出任何假设。这是**参数多态性**的一个例子。片刻的反思表明，实际上实现的选项很少`f`：您唯一能做的就是从提供的列表中选择一个元素。从概念上讲，有一个`f`适用于所有类型的通用实现`a`。

`a`第二个签名告诉您，给定属于类型类的某种类型的元素列表`Num`，`g`将产生该类型的值`a`。这意味着 的实现可以使用类型类附带的所有操作来`g`消费、生产和操作类型的值。例如，可以将列表的元素相加或相乘，选择列表的最小值，返回一个提升的常量，**...**其他主要形式是强制）。从概念上讲，.中的所有类型都有不同的实现。`a``Num``g`**`g``a``Num`**

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T19:30:04.187

它具有返回类型重载。有关一个很好的示例，请参见 Read 函数。它的类型为 Read a => String -> a。它可以读取并返回任何实现读取类型类的东西。**

# javascript - AJAX 联系表 - 成功和失败消息

> ID：11420128
> 
> 赞同：0
> 
> 时间：2012-07-10T19:03:54.247
> 
> 标签：javascript, ajax

我已经让我的表单通过 PHP 提交，但我在 AJAX 方面有点挣扎。提交后，总是会出现错误，好像 res 设置为 false 而不是 true。我试着玩弄代码并寻找自己的答案，因为我*确实*想学习，但我没有找到我需要的东西。

请您指出我做错了什么的正确方向吗？

非常感谢你！

供您参考的代码：

```
$('#contact_form').submit(function() {

    var this_form = $(this);
    $.ajax({
        type: 'post',
        data: this_form.serialize(),
        url: 'scripts/send_email.php',
        success: function(res) {
            if(res == "true") {
                $(this_form)[0].reset();
                $(".notice").removeClass("error").text("Thank you for contacting us!").addClass("success").fadeIn("fast");
            } else {
                $(".notice").text("Please check all fields and try again.").addClass("error").fadeIn("fast");
            }
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:06:07.387

由于`res`代表的值，您的真值比较似乎返回错误。您正在检查以确保它是一个值为“true”的字符串。如果不是，则触发 else 代码。

`success`只有在 AJAX 传输成功时才会执行您的属性。您需要将比较检查设置为所需的输出`send_email.php`，即“成功！” 或“失败！” 以表明正确的处理方式。

> **成功（数据，文本状态，jqXHR）**
> 
> 请求成功时调用的函数。该函数获得三个参数： 从服务器返回的数据，根据 dataType 参数格式化；描述状态的字符串；和 jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象。从 jQuery 1.5 开始，success 设置可以接受一个函数数组。每个函数都会被依次调用。

有关在 jQuery 中处理 AJAX 请求的更多信息，请参阅[文档。](http://api.jquery.com/jQuery.ajax/)

```
success: function(res) {
    if (res == "Success!") {
        $(this_form)[0].reset();
        $(".notice").removeClass("error").text("Thank you for contacting us!").addClass("success").fadeIn("fast");
    } else {
        $(".notice").text("Please check all fields and try again.").addClass("error").fadeIn("fast");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:08:45.763

尝试要求：

```
if(res == true) 
```

反而。避免此类问题的另一个好方法是通过 firebug 或 chrome 调试器调试您的 javascript，如果您使用的是 chrome，您可以将此行添加到您的代码中：

```
debugger;
if(res == "true") 
```

并且 javascript 将停在那里，因此您可以检查变量并查看发生了什么。你可以通过“选项-->工具-->开发者工具-->脚本”打开它。

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:13:22.860

在您的 send_email.php 文件中，如果成功，则回显“success”。

然后像这样修改您的 AJAX 调用：

```
success: function(data) {
if (data == "success") {do stuff} else {do failure stuff}
} 
```

# jquery - MVC C# Razor 需要在发布后加载

> ID：11420129
> 
> 赞同：-4
> 
> 时间：2012-07-10T19:03:54.287
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, razor

我将 MVC 与 Razor 一起使用。我喜欢先发帖，发帖后做如下加载：

```
$("#stlist").load('@Url.Action("Kit","Spr")' + '?id=' +  '@Model.id') 
```

由于帖子自动发生，接下来我该如何加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:39:27.737

如果你想做一个 POST 为什么不做一个 POST：

```
$.ajax({
    url: '@Url.Action("Kit", "Spr", new { id = Model.id })',
    type: 'POST',
    success: function(result) {
        $('#stlist').html(result);
    }
}); 
```

另请注意，您正在执行的*WTFish* `id`参数连接可以直接使用帮助程序完成。

# google-app-engine - Maven、Tapestry 和 Google Appengine 的神奇组合

> ID：11420130
> 
> 赞同：1
> 
> 时间：2012-07-10T19:04:03.683
> 
> 标签：google-app-engine, maven, tapestry

我在启动一个运行良好的旧应用程序时遇到了麻烦，但现在我需要进行一些更改，它抱怨旧的 sdk (1.5.x)，所以我正在迁移到 1.7.0。但是，当我收到错误消息时，它在本地运行得很好，所以我不知道是什么问题。

有问题的错误是 datanucleus 中缺少的类。

类 org.datanucleus.store.appengine.jdo.DatastoreJDOPersistenceManagerFactory

这是依赖项。任何的想法

```
<dependencies>

    <!-- Google App Engine meta-package -->
    <dependency>
        <groupId>net.kindleit</groupId>
        <artifactId>gae-runtime</artifactId>
        <version>${gae.version}</version>
        <type>pom</type>
    </dependency>   

    <dependency>
        <groupId>com.googlecode.gwtupload</groupId>
        <artifactId>gwtupload</artifactId>
        <version>0.6.5-SNAPSHOT</version>
    </dependency>

    <dependency>
        <groupId>com.googlecode.gwtupload</groupId>
        <artifactId>gwtupload-gae</artifactId>
        <version>0.6.5-SNAPSHOT</version>
    </dependency>

    <dependency>
        <groupId>org.apache.tapestry</groupId>
        <artifactId>tapestry-upload</artifactId>
        <version>${tapestry-release-version}</version>
    </dependency><!--
   <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.2.1</version>
    </dependency>

    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>2.0.1</version>
    </dependency>-->

    <!--    <dependency>
        <groupId>org.got5</groupId>
        <artifactId>tapestry5-jquery</artifactId>
        <version>2.1.0</version>
    </dependency> -->

    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-core</artifactId>
        <version>${datanucleus.version}</version>
        <scope>runtime</scope>
    </dependency>

    <dependency>
        <groupId>javax.transaction</groupId>
        <artifactId>jta</artifactId>
        <version>1.1</version>
    </dependency>

    <!-- These dependencies are here just for enabling logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.1</version>
    </dependency>

    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-classic</artifactId>
        <version>0.9.24</version>
    </dependency>

    <!-- Test scope -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.5</version>
        <scope>test</scope>
    </dependency>

    <!--
                            GAE libraries for local testing as described here:
                            http://code.google.com/appengine/docs/java/howto/unittesting.html
        -->
    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-api-labs</artifactId>
        <version>${gae.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-api-stubs</artifactId>
        <version>${gae.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-testing</artifactId>
        <version>${gae.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>javax.jdo</groupId>
        <artifactId>jdo2-api</artifactId>
        <version>2.3-eb</version>
        <exclusions>
            <exclusion>
                <groupId>javax.transaction</groupId>
                <artifactId>transaction-api</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>org.apache.tapestry</groupId>
        <artifactId>tapestry-core</artifactId>
        <version>${tapestry-release-version}</version>
    </dependency>

    <!-- A dependency on either JUnit or TestNG is required, or the surefire plugin (which runs the tests)
    will fail, preventing Maven from packaging the WAR. Tapestry includes a large number
    of testing facilities designed for use with TestNG (http://testng.org/), so it's recommended. -->

    <dependency>
        <groupId>org.testng</groupId>
        <artifactId>testng</artifactId>
        <version>5.12.1</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.easymock</groupId>
        <artifactId>easymock</artifactId>
        <version>2.5.2</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.apache.tapestry</groupId>
        <artifactId>tapestry-test</artifactId>
        <version>${tapestry-release-version}</version>
        <scope>test</scope>
    </dependency>

    <!-- Provided by the servlet container, but sometimes referenced in the application
    code. -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>

</dependencies>
<build> 
    <plugins>

        <!--This plug-in "enhances" your domain model objects 
        (i.e. makes them persistent for datanucleus) -->
        <plugin>
            <groupId>org.datanucleus</groupId>
            <artifactId>maven-datanucleus-plugin</artifactId>
            <version>1.1.4</version>
            <configuration>
                <!--Make sure this path contains your persistent classes! -->
                <mappingIncludes>**/domain/*.class</mappingIncludes>
                <verbose>true</verbose>
                <enhancerName>ASM</enhancerName>
                <api>JDO</api>
            </configuration>
            <executions>
                <execution>
                    <phase>compile</phase>
                    <goals>
                        <goal>enhance</goal>
                    </goals>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <groupId>org.datanucleus</groupId>
                    <artifactId>datanucleus-core</artifactId>
                    <version>${datanucleus.version}</version>
                    <exclusions>
                        <exclusion>
                            <groupId>javax.transaction</groupId>
                            <artifactId>transaction-api</artifactId>
                        </exclusion>
                    </exclusions>
                </dependency>
                <dependency>
                    <groupId>org.datanucleus</groupId>
                    <artifactId>datanucleus-rdbms</artifactId>
                    <version>${datanucleus.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.datanucleus</groupId>
                    <artifactId>datanucleus-enhancer</artifactId>
                    <version>1.1.4</version>
                </dependency>
                <dependency>
                    <groupId>javax.jdo</groupId>
                    <artifactId>jdo2-api</artifactId>
                    <version>2.3-ec</version>
                    <scope>runtime</scope>
                </dependency>
            </dependencies>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.3-SNAPSHOT</version>
            <configuration>
                <webResources>
                    <resource>
                        <directory>src/main/webapp</directory>
                        <filtering>true</filtering>
                        <includes>
                            <include>**/appengine-web.xml</include>
                        </includes>
                    </resource>
                </webResources>
            </configuration>
        </plugin>

        <!-- The actual maven-gae-plugin. 
        Type "mvn gae:run" to run project, "mvn gae:deploy" to upload to GAE. -->
        <plugin>
            <groupId>net.kindleit</groupId>
            <artifactId>maven-gae-plugin</artifactId>
            <version>0.8.4</version>
            <dependencies>
                <dependency>
                    <groupId>net.kindleit</groupId>
                    <artifactId>gae-runtime</artifactId>
                    <version>${gae.version}</version>
                    <type>pom</type>
                </dependency>
            </dependencies>
        </plugin>

        <!-- Upload application to the appspot automatically, during release:perform -->
        <plugin>
            <artifactId>maven-release-plugin</artifactId>
            <configuration>
                <goals>gae:deploy</goals>
            </configuration>
        </plugin>

        <!-- Java compiler version -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.0</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build>

<reporting>

    <!-- Adds a report detailing the components, mixins and base classes defined by this module. -->
    <plugins>
        <plugin>
            <groupId>org.apache.tapestry</groupId>
            <artifactId>tapestry-component-report</artifactId>
            <version>${tapestry-release-version}</version>
            <configuration>
                <rootPackage>root</rootPackage>
            </configuration>
        </plugin>
    </plugins>
</reporting>

<repositories>

    <!-- This repository is only needed when the tapestry-release-version is a snapshot release. -->
    <repository>
        <id>apache-snapshots</id>
        <url>http://repository.apache.org/snapshots/</url>
    </repository>

    <repository>
        <id>sonatype-snapshots</id>
        <url>http://oss.sonatype.org/content/repositories/snapshots</url>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
        <releases>
            <enabled>false</enabled>
        </releases>
    </repository>

    <repository>
        <id>devlab722-repo</id>
        <url>http://nexus.devlab722.net/nexus/content/repositories/releases</url>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository>

    <repository>
        <id>devlab722-snapshot-repo</id>
        <url>http://nexus.devlab722.net/nexus/content/repositories/snapshots</url>
        <releases>
            <enabled>false</enabled>
        </releases>
    </repository>

</repositories>

<pluginRepositories>

    <!-- As above, this can be commented out when access to the snapshot version
    of a Tapestry Maven plugin is not required.   -->
    <pluginRepository>
        <id>apache-snapshots</id>
        <url>http://repository.apache.org/snapshots/</url>
    </pluginRepository>

</pluginRepositories>

<properties>  

    <!-- Sets the project's default encoding.
    http://docs.codehaus.org/display/MAVENUSER/POM+Element+for+Source+File+Encoding -->
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>

    <!-- This is just for "eclipse:eclipse" goal to always attempt downloading sources             
    -->
    <downloadSources>true</downloadSources>

    <!-- Specify AppEngine version for your project. It should match SDK version ointed
    to by ${gae.home} property (Typically, one used by our Eclipse plug-in) -->
    <gae.version>1.7.0</gae.version>

    <!-- Upload to http://test.latest.<applicationName>.appspot.com by default -->
    <gae.application.version>test</gae.application.version>

    <datanucleus.version>1.1.5</datanucleus.version>
    <tapestry-release-version>5.2.5</tapestry-release-version>

</properties>
<profiles>
    <!-- We can configure our integration server to activate this profile and
     perform gae:deploy, thus uploading latest snapshot to the
     http://1.latest.<applicationName>.appspot.com automatically -->
    <profile>
        <id>integration-build</id>
        <properties>
            <gae.application.version>stage</gae.application.version>
        </properties>
    </profile>

    <profile>
        <id>release-build</id>
        <activation>
            <property>
                <name>performRelease</name>
                <value>true</value>
            </property>
        </activation>

        <properties>
            <!-- During release, set application version in appengine-web.xml to 2-->
            <gae.application.version>release</gae.application.version>
        </properties>

    </profile>
</profiles> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:58:58.210

这就是我的诀窍

```
<dependencies>

    <!-- Google App Engine meta-package -->
    <dependency>
        <groupId>net.kindleit</groupId>
        <artifactId>gae-runtime</artifactId>
        <version>${gae.version}</version>
        <type>pom</type>
    </dependency>   

    <dependency>
        <groupId>com.googlecode.gwtupload</groupId>
        <artifactId>gwtupload</artifactId>
        <version>0.6.4</version>
    </dependency>

    <dependency>
        <groupId>com.googlecode.gwtupload</groupId>
        <artifactId>gwtupload-gae</artifactId>
        <version>0.6.4</version>
    </dependency>

    <dependency>
        <groupId>org.apache.tapestry</groupId>
        <artifactId>tapestry-upload</artifactId>
        <version>${tapestry-release-version}</version>
    </dependency><!--
   <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.2.1</version>
    </dependency>

    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>2.0.1</version>
    </dependency>-->

    <!--    <dependency>
        <groupId>org.got5</groupId>
        <artifactId>tapestry5-jquery</artifactId>
        <version>2.1.0</version>
    </dependency> -->

    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-core</artifactId>
        <version>${datanucleus.version}</version>
        <scope>runtime</scope>
    </dependency>

    <dependency>
        <groupId>javax.transaction</groupId>
        <artifactId>jta</artifactId>
        <version>1.1</version>
    </dependency>

    <!-- These dependencies are here just for enabling logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.1</version>
    </dependency>

    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-classic</artifactId>
        <version>0.9.24</version>
    </dependency>

    <!-- Test scope -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.5</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-api-labs</artifactId>
        <version>${gae.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-api-stubs</artifactId>
        <version>${gae.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-testing</artifactId>
        <version>${gae.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>javax.jdo</groupId>
        <artifactId>jdo2-api</artifactId>
        <version>2.3-eb</version>
        <exclusions>
            <exclusion>
                <groupId>javax.transaction</groupId>
                <artifactId>transaction-api</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>org.apache.tapestry</groupId>
        <artifactId>tapestry-core</artifactId>
        <version>${tapestry-release-version}</version>
    </dependency>

    <dependency>
        <groupId>org.testng</groupId>
        <artifactId>testng</artifactId>
        <version>5.12.1</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.easymock</groupId>
        <artifactId>easymock</artifactId>
        <version>2.5.2</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.apache.tapestry</groupId>
        <artifactId>tapestry-test</artifactId>
        <version>${tapestry-release-version}</version>
        <scope>test</scope>
    </dependency>

    <!-- Provided by the servlet container, but sometimes referenced in the application
    code. -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>

</dependencies>
<build> 
    <plugins>

        <!--This plug-in "enhances" your domain model objects 
        (i.e. makes them persistent for datanucleus) -->
        <plugin>
            <groupId>org.datanucleus</groupId>
            <artifactId>maven-datanucleus-plugin</artifactId>
            <version>1.1.4</version>
            <configuration>
                <!--Make sure this path contains your persistent classes! -->
                <mappingIncludes>**/domain/*.class</mappingIncludes>
                <verbose>true</verbose>
                <enhancerName>ASM</enhancerName>
                <api>JDO</api>
            </configuration>
            <executions>
                <execution>
                    <phase>compile</phase>
                    <goals>
                        <goal>enhance</goal>
                    </goals>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <groupId>org.datanucleus</groupId>
                    <artifactId>datanucleus-core</artifactId>
                    <version>${datanucleus.version}</version>
                    <exclusions>
                        <exclusion>
                            <groupId>javax.transaction</groupId>
                            <artifactId>transaction-api</artifactId>
                        </exclusion>
                    </exclusions>
                </dependency>
                <dependency>
                    <groupId>org.datanucleus</groupId>
                    <artifactId>datanucleus-rdbms</artifactId>
                    <version>${datanucleus.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.datanucleus</groupId>
                    <artifactId>datanucleus-enhancer</artifactId>
                    <version>1.1.4</version>
                </dependency>
                <dependency>
                    <groupId>javax.jdo</groupId>
                    <artifactId>jdo2-api</artifactId>
                    <version>2.3-ec</version>
                    <scope>runtime</scope>
                </dependency>
            </dependencies>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.2</version>
            <configuration>
                <webResources>
                    <resource>
                        <directory>src/main/webapp</directory>
                        <filtering>true</filtering>
                        <includes>
                            <include>**/appengine-web.xml</include>
                        </includes>
                    </resource>
                </webResources>
            </configuration>
        </plugin>

        <!-- The actual maven-gae-plugin. 
        Type "mvn gae:run" to run project, "mvn gae:deploy" to upload to GAE. -->
        <plugin>
            <groupId>net.kindleit</groupId>
            <artifactId>maven-gae-plugin</artifactId>
            <version>0.9.3</version>
            <configuration> 
                <splitJars>true</splitJars>
                <unpackVersion>${gae.version}</unpackVersion>
                <jvmFlags> 
                    <jvmFlag>-Dappengine.user.timezone=UTC</jvmFlag> 
                </jvmFlags>                    
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>net.kindleit</groupId>
                    <artifactId>gae-runtime</artifactId>
                    <version>${gae.version}</version>
                    <type>pom</type>
                </dependency>
            </dependencies>
        </plugin>

        <!-- Upload application to the appspot automatically, during release:perform -->
        <plugin>
            <artifactId>maven-release-plugin</artifactId>
            <configuration>
                <goals>gae:deploy</goals>
            </configuration>
        </plugin>

        <!-- Java compiler version -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.0</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build>

<reporting>

    <plugins>
        <plugin>
            <groupId>org.apache.tapestry</groupId>
            <artifactId>tapestry-component-report</artifactId>
            <version>${tapestry-release-version}</version>
            <configuration>
                <rootPackage>com.bomahabo.chesapool.tapestry</rootPackage>
            </configuration>
        </plugin>
    </plugins>
</reporting>

<repositories>

    <repository>
        <id>apache-snapshots</id>
        <url>http://repository.apache.org/snapshots/</url>
    </repository>

    <repository>
        <id>sonatype-snapshots</id>
        <url>http://oss.sonatype.org/content/repositories/snapshots</url>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
        <releases>
            <enabled>false</enabled>
        </releases>
    </repository>

    <repository>
        <id>devlab722-repo</id>
        <url>http://nexus.devlab722.net/nexus/content/repositories/releases</url>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository>

    <repository>
        <id>devlab722-snapshot-repo</id>
        <url>http://nexus.devlab722.net/nexus/content/repositories/snapshots</url>
        <releases>
            <enabled>false</enabled>
        </releases>
    </repository>

</repositories>

<pluginRepositories>

    <!-- As above, this can be commented out when access to the snapshot version
    of a Tapestry Maven plugin is not required.   -->
    <pluginRepository>
        <id>apache-snapshots</id>
        <url>http://repository.apache.org/snapshots/</url>
    </pluginRepository>

</pluginRepositories>

<properties>  

    <!-- Sets the project's default encoding.
    http://docs.codehaus.org/display/MAVENUSER/POM+Element+for+Source+File+Encoding -->
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>

    <downloadSources>true</downloadSources>

    <gae.version>1.5.1</gae.version> 
    <gae.application.version>test</gae.application.version>

    <datanucleus.version>1.1.5</datanucleus.version>
    <tapestry-release-version>5.2.5</tapestry-release-version>

</properties>
<profiles>
    <!-- We can configure our integration server to activate this profile and
     perform gae:deploy, thus uploading latest snapshot to the
     http://1.latest.<applicationName>.appspot.com automatically -->
    <profile>
        <id>integration-build</id>
        <properties>
            <gae.application.version>stage</gae.application.version>
        </properties>
    </profile> 

    <profile>
        <id>release-build</id>
        <activation>
            <property>
                <name>performRelease</name>
                <value>true</value>
            </property>
        </activation>

        <properties>
            <!-- During release, set application version in appengine-web.xml to 2-->
            <gae.application.version>release</gae.application.version>
        </properties>

    </profile>
</profiles> 
```

# sql-server - 运行存储过程：用户类型未定义错误

> ID：11420132
> 
> 赞同：1
> 
> 时间：2012-07-10T19:04:09.563
> 
> 标签：sql-server, ms-access, vba

我正在尝试单击“确定”按钮运行以下存储过程：

```
Private Sub ok_Click()

Dim objConnection As New ADODB.Connection
Dim objCom As ADODB.Command
Dim provStr As String

Set objCom = New ADODB.Command

objConnection.Provider = "sqloledb"
provStr = "Data Source=Server Name;" & "Initial Catalog=DB NAME;User Id=USERNAME;Password=Password;"

objConnection.Open provStr

With objCom
    .ActiveConnection = objConnection
    .CommandText = "dbo.ix_spc_planogram_match 74"
    .CommandType = adCmdStoredProc
    .Execute
End With

End Sub 
```

错误是：未定义用户类型。存储过程在 SQL Server Management Studio 中正确运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:07:43.923

检查您的引用，特别是确保您引用的是 Microsoft ActiveX 数据对象 xx 库。

# android - android getWsUrl()

> ID：11420135
> 
> 赞同：0
> 
> 时间：2012-07-10T19:04:30.890
> 
> 标签：android

该行的配置类型未定义方法 getWsUrl()

> AndroidHttpTransport _ht = new AndroidHttpTransport(Configuration.getWsUrl());

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:24:17.003

您可能输入了错误的`Configuration`. 现在，您的导入可能指向`android.content.res.Configuration`.

但是，您的代码片段表明您正在使用（部分）一些 Google 代码项目，[`androidzon`](http://code.google.com/p/androidzon/). 它有一个`webservice`包，其中包含一个[`Configuration`](http://code.google.com/p/androidzon/source/browse/TS1_Android/src/it/marco/webservice/Configuration.java?r=37)带有您正在寻找的方法的类。它似乎意味着“获取网络服务网址”之类的东西。您将需要更正您的导入和/或将缺少的类/库添加到您的 Android 项目中。

请注意，您似乎正在使用旧代码，因为该类的*最新*[版本`Configuration`](http://code.google.com/p/androidzon/source/browse/TS1_Android/src/it/marco/webservice/Configuration.java)不再包含[该类](http://code.google.com/p/androidzon/source/browse/TS1_Android/src/it/marco/webservice/Configuration.java)。相反，有一种方法。*`getWsUrl()``getServerAddress()`*

# c - 一个很好的应用程序，可以看到多线程的好处

> ID：11420141
> 
> 赞同：1
> 
> 时间：2012-07-10T19:04:49.463
> 
> 标签：c, linux, multithreading

我正在尝试更好地编写多线程应用程序，例如提出正确的算法，以便线程不会相互阻塞，并且在需要的地方在线程之间进行正确的同步。这将在 C/Linux 中。

谁能推荐一个我可以编写的简单应用程序，它可以清楚地展示在多核 CPU 中作为多线程与单线程运行时性能/吞吐量的提高。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:11:45.027

矩阵乘法是一个相当好的起点。它是可并行化的，并且还需要对归约步骤进行一些同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T00:33:35.093

如果您想要提高技能，英特尔线程挑战赛会提供有趣的谜题。这是一个示例问题：

[http://software.intel.com/en-us/contests/threading-challenge-students-2011/codecontest.php](http://software.intel.com/en-us/contests/threading-challenge-students-2011/codecontest.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T20:55:02.640

您可以在多个线程中加载图像并执行一些简单的像素操作。例如从 RGB 转换为 HSV，或类似的东西......

这将很简单，但与实际实践非常吻合。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-10T19:13:47.757

独立计算将为您提供多线程的最佳收益。对于多线程性能的简单演示，只需进行几次简单的计算（例如，找到第 N 个斐波那契数）。是不是太简单了？

# reporting-services - 是否可以在自定义代码中同时使用 C# 和 VB.NET？

> ID：11420143
> 
> 赞同：4
> 
> 时间：2012-07-10T19:04:50.633
> 
> 标签：reporting-services, ssrs-2008

你可以在 C# 中使用 SSRS 进行编码吗？或者，换一种说法：您可以将 SSRS 配置为使用 VB.NET 或 C# 来编写自定义代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T21:22:09.063

这取决于自定义代码的含义。据我所知：

*   [报表中的嵌入代码](http://msdn.microsoft.com/en-us/library/ms155798%28v=sql.100%29.aspx)必须是VB
*   [自定义](http://msdn.microsoft.com/en-us/library/ms153561%28v=sql.100%29)程序集只是 .NET 程序集，可以是

# php - 将整个 PDF 表单提交到 PHP 脚本

> ID：11420145
> 
> 赞同：2
> 
> 时间：2012-07-10T19:05:04.197
> 
> 标签：php, pdf

对于一家保险公司，我创建了他们各种保险申请的 PDF 表格。这些将在他们的网站上提供（完成后）。每个表格都是 PDF 格式，看起来与应用程序的打印版本完全一样。这个想法是用户在线填写，点击表单底部的（可见但不可打印的）“提交”按钮，整个完成的 PDF 被发送到公司。这样他们就可以打印出来，并继续使用他们当前的纸质文件系统。

我尝试使用“mailto:...” URL 作为提交按钮，但这需要外部邮件程序。它还为附加的 PDF 提供了一个随机临时文件名。

因此，我想将 PDF 发送到 php 脚本，更改名称，然后从那里通过电子邮件发送给公司。我玩了一下，我可以到达目标脚本，但我不知道 PDF 会发生什么。我希望它会出现在 $_FILES 中，但什么也没有。

保存到数据库不是一种选择。

在准备 PDF 表单时，您可以选择提交方式：作为 HTML 表单（如 Sepodati 所说）、作为 XML 数据、作为 FDF（仅发送数据，并在显示数据时会打开原始 PDF），或作为完整的 PDF。为了方便不精通计算机的网站所有者使用，我将向他们发送一份他们可以打印的完整 PDF。

所以，同样的问题仍然存在：当我到达目标脚本时，我的 PDF 文件去了哪里？

我通过 PDF 本身的提交按钮提交 PDF。您必须熟悉 PDF 表单才能理解这一点。对于 URL，我放置了目标 PHP 脚本。

在我的目标脚本中，我尝试了以下 PHP 代码：

```
 reset ($_FILES); 
    while (list ($key, $val) = each ($_FILES)) { 
       echo "$key => $val<br />\n"; 
    } 
```

我为 $_FILES、$_GET、$_POST 和 $_REQUEST 执行此操作。什么都没有出现，好像每个数组都是空的。不过，我可能做错了。

我将 phpinfo() 放入脚本中，这些变量出现与 PDF 相关...

```
_SERVER["CONTENT_LENGTH"] = 37722
_SERVER["CONTENT_TYPE"] = application/pdf
_SERVER["HTTP_USER_AGENT"] = Mozilla/4.0 (compatible; Adobe Acrobat Control Version 5.00 for ActiveX)
_SERVER["REQUEST_METHOD"] = POST 
```

内容长度大约是 PDF 的大小。

我之前没有注意到的另一件事是，在提交时，Internet Explorer 会显示此页面（或类似的名称）：

```
C:\WINDOWS\TEMP\pa003773.html 
```

此页面包含我的脚本的所有输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:12:29.577

它应该发送整个 PDF 非常有趣。我很想知道它是如何做到的，因为我已经在 Adob​​e 网站上搜索了有关如何通过单击 PDF 表单上的按钮来提交整个 PDF 文件的信息。

我在他们的网站上找到的唯一信息是有关 FDF 和 XFDF 格式的信息。这两种格式都必须通过表单处理程序脚本以某种方式进行解析，并且不会像您从文件系统中选择文件时那样包含在 $_FILES 中。

```
$fptr = fopen("temp.fdf", "w"); 
fputs($fptr, $HTTP_RAW_POST_DATA); 
fclose($fptr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-03T21:35:56.483

这是一个非常古老的帖子，所以我相信你现在已经得到了答案，但是这对我有用，以防其他人在未来偶然发现这个问题。顺便说一句-这仅适用于您提交完整的表单字段的整个 PDF。

您将放在提交按钮上的地址类似于[http://youserver.com/lib/php/formProcess.php?email=to@company.com&formName=Asset%20Inventory](http://youserver.com/lib/php/formProcess.php?email=to@company.com&formName=Asset%20Inventory)

```
<?php
  ob_start();
  $file = file_get_contents("php://input"); //Gets binary PDF Data
  $time = microtime(true);

  //Names pdf file based on the time to the microsecond so nothing gets overwritten.  Obviously you can change this to whatever you want or do something like $_REQUEST['formName'] and just include the form name in your URL from your pdf submit button
  $newfile = "forms/" . $time . ".pdf"; 
  $worked = file_put_contents($newfile, $file); //Creates File
  ob_end_clean();

  //Upon completion you can either return XFDF to update a field on your form or display a PDF document.  I chose the PDF route because it worked for our situation.
  $successFile = 'success.pdf';
  $errFileFile = 'error.pdf';
  require 'PHPMailer/PHPMailerAutoload.php';

  $mail = new PHPMailer;
  $mail->isSendmail();
  $mail->setFrom('From email address', 'from name');
  $mail->addReplyTo('Reply to email', 'Reply to name');
  $mail->addAddress($_REQUEST['email']); //get email from URL- alternately you can just hardcode in an address
  $mail->addAttachment( $newfile );
  $mail->isHTML(true);
  $mail->Subject = 'New form submission';
  $mail->Body = 'A new form has been submitted.';

  if(!$mail->send()) {
    header('Content-type: application/pdf');
    readfile($errFile);
  } else {
    header('Content-type: application/pdf');
    readfile($successFile);
    //if you want to delete the file from the server after emailing: unlink($newfile);
  }
?> 
```

# html - Div 在容器外流动 - 有可能吗？

> ID：11420149
> 
> 赞同：0
> 
> 时间：2012-07-10T19:05:17.047
> 
> 标签：html, css

所以我使用了一个名为骨架的响应式框架，效果很好，但是，对于页眉和页脚等部分，我希望背景跨越页面的 100% 宽度，这现在是一种流行的设计选择。

有没有人有一个解决方法只是为了让一个 div 在容器外弹出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:07:51.787

假设容器具有默认位置属性（静态），您可以给标题一个`position:absolute`. 然后设置`top:0`和。`left:0``right:0`

确保将容器的上边距或内边距设置为为标题定义的相同高度。

如果容器已被赋予相对、绝对或固定的位置值，这将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:38:14.863

骨架.css 第 301 行：

```
.container:after {
    clear: both;
    content: " ";
    display: block;
    height: 0;
    visibility: hidden;
} 
```

此声明将确保容器之后显示的任何内容都不可见，因此不会以任何方式破坏页面上的网格。

该容器也设置为 960px 宽和`position:relative`（skeleton.css 第 24 行），这意味着您无法在容器 div 内创建任何可以设置为页面宽度的内容，而无需使用 javascript（为简单起见 + jquery）。在大多数网站上如此关键的设计功能上，依靠它并不是一个好主意。

我会尝试删除 .container 上的 :after 声明，然后在`<div>`下面添加一个新的`width:100%; height:128px;`，看看它如何影响您的网格作为起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:15:49.757

```
Try this:
body {
font-family: 'Open Sans',sans-serif;
font-size: 0.875em;
overflow-x: hidden;
}
.header-container {
background-color: #CCCCCC;
float: left;
height: 100px;
margin-left: -400px;
overflow: hidden;
padding-right: 800px;
width: 100%;
}
#header {
margin-left: 409px;
margin-top: 10px;
text-align: center;
} 
```

# azure - 非常具体的表的 Azure 表存储性能

> ID：11420150
> 
> 赞同：1
> 
> 时间：2012-07-10T19:05:22.433
> 
> 标签：azure, azure-table-storage

有没有办法使用 ATS（Azure 表存储）大约 500 个实体/秒/分区？脏读没问题。如果 in insert 不能立即用于读取，则 OK。

希望将一些大型表从 SQL 移动到 ATS。

*   规模：由于这些表的大小正在突破 SQL Azure 的 150 GB 限制

*   插入速度：查询速度的倒排索引。插入顺序未按表聚集索引排序，导致 SQL 表快速碎片。ATS 很可能比 SQL 具有插入优势。

*   成本：ATS 的月成本较低。但是 ATS 的加载成本较高，为数百万行，并且由于加载的顺序不是按分区进行的，因此无法批处理。

*   查询速度：几乎从不只在一个 partitionKey 上进行搜索。搜索将有一个 SQL 组件和零个或多个 ATS 组件。此 ATS 查询始终通过 partitionKey 并返回 rowKeys。partitionKey 的原始搜索速度很快，问题是返回实体（行）的时间。给定的 partitionKey 将平均有 1,000 个 rowKey，即 500 个实体/秒/分区时为 2 秒。但是会有一些 partitionKeys 超过 100,000 个 rowKeys，这相当于超过 3 分钟。在 SQL 中一次返回 10,000 行，并且没有查询超过 10 秒，因为连接的功能不必减少 100,000 行以在 where 中考虑这些行。

*   是否有围绕 ATS 的选择实体速度？对于规模和插入速度想去 ATS。

[Windows Azure 存储抽象及其可扩展性目标](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/05/10/windows-azure-storage-abstractions-and-their-scalability-targets.aspx)

[如何充分利用 Windows Azure 表](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/11/06/how-to-get-most-out-of-windows-azure-tables.aspx)

[为 Windows Azure 表存储设计可扩展的分区策略](http://msdn.microsoft.com/en-us/library/windowsazure/hh508997.aspx)

为不会修改的查询结果关闭实体跟踪： context.MergeOption = MergeOption.NoTracking;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:38:45.110

一种潜在的解决方法是跨多个分区和/或表条带化数据，在所有（子）分区上并行执行查询并合并结果。

例如，对于跨分区的条带化，在分区键前面加上一个数字可以将分区的可伸缩性提高 10 倍。

所以一个分区键，比如 ABCDEFGH，可以被子分区 0ABCDEFGH 到 9ABCDEFGH。
对分区进行写入，前缀数字随机或以循环方式生成。读取将并行查询所有 10 个分区并合并结果。

对于跨表条带化，可以随机或以循环方式写入 N 个表中的一个，并以类似方式并行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:10:29.213

*编辑：我最初声明限制是 ​​500 个事务/分区/秒。那是不正确的。如原始问题所述，限制实际上是 500 个实体/分区/秒。*

这也适用于您计算的查询速度。如果您查询 ATS PartitionKey 并且它返回 1000 个实体，则可能只需要比返回单个实体更长的时间，也许是几百毫秒。另一方面，如果查询返回超过 1000 个实体，则速度会慢*得多*，因为每组 1000 行都需要一个本质上独立的事务，并且必须串行完成。

我不完全清楚你在做什么，但听起来像很多查询。请记住，在非键列上查询 ATS 往往非常慢。如果您经常这样做，那么使用 SQL Azure 联合和扇出查询可能会更好地为您服务。

# css - 摆脱 p:selectManyCheckBox 周围的边框

> ID：11420151
> 
> 赞同：0
> 
> 时间：2012-07-10T19:05:32.467
> 
> 标签：css, primefaces

我正在尝试实现以下外观： http: [//www.primefaces.org/showcase/ui/selectManyCheckbox.jsf](http://www.primefaces.org/showcase/ui/selectManyCheckbox.jsf)

请注意，PrimeFaces 展示站点的组件周围没有 css-borders。

```
 <h:outputText value="Horizontal: " />  
 <p:selectManyCheckbox value="#{formBean.selectedOptions}">  
   <f:selectItem itemLabel="Option 1" itemValue="Option 1" />  
   <f:selectItem itemLabel="Option 2" itemValue="Option 2" />  
   <f:selectItem itemLabel="Option 3" itemValue="Option 3" />  
 </p:selectManyCheckbox> 
```

但是，在我的实现中，组件周围出现了不需要的边框。我试图添加 style="border-style: none;" IE

```
<p:selectManyCheckbox value="#{formBean.selectedOptions}" style="border-style: none;"> 
```

没有任何结果。我有一个 default.css 文件，根据：

```
.ui-widget, .ui-widget .ui-widget {
    font-size: 80% !important;
} 
```

我不认为 css 资源会对这个问题产生任何影响，但我可能错了。

我看不出不同浏览器之间的外观有任何差异。

你能告诉我为什么我有边界以及如何摆脱它们，只在这个特定的组件上？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:55:30.220

边界？Primefaces'`p:selectManyCheckbox`默认没有边框。

无论如何，如果您想覆盖任何样式规则，您可以使用`!important`.

这应该删除任何边框：

```
<p:selectManyCheckbox value="#{formBean.selectedOptions}" style="border-style: none !important;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:00:16.760

我不同意没有国界。我尝试删除我所有的 CSS，但我仍然有边框。可能是特定主题的。

我不得不使用以下内容：

```
.noBorder tr,.noBorder td {
    border: none !important;
}

<p:selectManyCheckbox value="#{formBean.selectedOptions}" styleClass="noBorder">
                        <f:selectItem itemLabel="Option 1" itemValue="Option 1" />
                    </p:selectManyCheckbox> 
```

# java - 调用本机方法时返回 java.lang.UnsatisfiedLinkError

> ID：11420153
> 
> 赞同：5
> 
> 时间：2012-07-10T19:05:33.963
> 
> 标签：java, dll, java-native-interface

我正在尝试为第三方 DLL 制作 Java 包装器。我创建了自己的 DLL，充当 JNI 和第三方 DLL 之间的中间人。在 java 中，我很好地加载了这个 DLL，但`java.lang.UnsatisfiedLinkError: sixense.Sixense.init()Z`返回了错误。什么可能导致此错误以及如何正确调试它？

主.java：

```
package sixense_test;

import sixense.ControllerData;
import sixense.Sixense;

public class Main {

    public static ControllerData[] controllers = new ControllerData[4];
    public static boolean quit;

    public static void main(String[] args) {
        if(Sixense.init()) {
            Sixense.setActiveBase(0);
            Sixense.getAllNewestData(controllers);
            System.out.println("X: " + controllers[0].pos[0] + "Y: " + controllers[0].pos[1] + "Z: " + controllers[0].pos[2]);
        }
    }
} 
```

Sixense.java：

```
package sixense;

public class Sixense {
    public static native boolean init();
    public static native boolean exit();
    public static native int getMaxBases();
    public static native boolean setActiveBase( int base_num );
    public static native boolean isBaseConnected( int base_num );
    public static native int getMaxControllers();
    public static native int getNumActiveControllers();
    public static native boolean isControllerEnabled( int controller_id );
    public static native boolean getAllNewestData( ControllerData[] all_data );
    public static native boolean getAllData( int index_back, ControllerData[] all_data );
    public static native boolean getNewestData( int controller_id, ControllerData data );
    public static native boolean getData( int controller_id, int index_back, ControllerData all_data );
    public static native int getHistorySize();
    public static native boolean setFilterEnabled( boolean on_or_off );
    public static native boolean getFilterEnabled();
    public static native boolean setFilterParams( float near_range, float near_val, float far_range, float far_val );
    public static native boolean getFilterParams( float[] params );
    public static native boolean triggerVibration( int controller_id, int duration, int pattern_id );
    public static native boolean autoEnableHemisphereTracking( int controller_id );
    public static native boolean setHighPriorityBinding( boolean on_or_off );
    public static native boolean getHighPriorityBinding();
    public static native boolean setBaseColor( int red, int green, int blue );
    public static native boolean getColorBase( int[] colors );
    static {
        System.loadLibrary("Sixense_Java");
    }
} 
```

Sixense_Sixense.cpp 的摘录：

```
#include <jni.h>
#include <sixense.h>
#include "sixense_Sixense.h"

JNIEXPORT jboolean JNICALL Java_sixense_Sixense_init(JNIEnv *env, jclass obj) {
    int i;
    i = sixenseInit();
    return (i == -1) ? JNI_FALSE : JNI_TRUE;
} 
```

Sixense_Sixense.h 的摘录：

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class sixense_Sixense */

#ifndef _Included_sixense_Sixense
#define _Included_sixense_Sixense
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     sixense_Sixense
 * Method:    init
 * Signature: ()Z
 */
JNIEXPORT jboolean JNICALL Java_sixense_Sixense_init
  (JNIEnv *, jclass); 
```

垃圾箱的输出：

```
File Type: DLL

  Section contains the following exports for Sixense_Java.dll

    00000000 characteristics
    4FFBC481 time date stamp Tue Jul 10 01:58:25 2012
        0.00 version
           1 ordinal base
          23 number of functions
          23 number of names

    ordinal hint RVA      name

          1    0 00001D10 Java_sixense_Sixense_autoEnableHemisphereTracking@12
          2    1 000011A0 Java_sixense_Sixense_exit@8
          3    2 00001A40 Java_sixense_Sixense_getAllData@16
          4    3 000019A0 Java_sixense_Sixense_getAllNewestData@12
          5    4 00001DC0 Java_sixense_Sixense_getColorBase@12
          6    5 00001B30 Java_sixense_Sixense_getData@20
          7    6 00001BD0 Java_sixense_Sixense_getFilterEnabled@8
          8    7 00001C40 Java_sixense_Sixense_getFilterParams@12
          9    8 00001D60 Java_sixense_Sixense_getHighPriorityBinding@8
         10    9 00001B90 Java_sixense_Sixense_getHistorySize@8
         11    A 000011C0 Java_sixense_Sixense_getMaxBases@8
         12    B 00001210 Java_sixense_Sixense_getMaxControllers@8
         13    C 00001AE0 Java_sixense_Sixense_getNewestData@16
         14    D 00001220 Java_sixense_Sixense_getNumActiveControllers@8
         15    E 00001180 Java_sixense_Sixense_init@8
         16    F 000011F0 Java_sixense_Sixense_isBaseConnected@12
         17   10 00001230 Java_sixense_Sixense_isControllerEnabled@12
         18   11 000011D0 Java_sixense_Sixense_setActiveBase@12
         19   12 00001D90 Java_sixense_Sixense_setBaseColor@20
         20   13 00001BA0 Java_sixense_Sixense_setFilterEnabled@12
         21   14 00001C00 Java_sixense_Sixense_setFilterParams@24
         22   15 00001D30 Java_sixense_Sixense_setHighPriorityBinding@12
         23   16 00001CE0 Java_sixense_Sixense_triggerVibration@20

  Summary

        1000 .bss
        1000 .data
        1000 .edata
        1000 .idata
        1000 .rdata
        1000 .reloc
        2000 .text 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-29T15:55:43.733

在 Java 中调用本机函数时，运行时会尝试使用：

*   一个 stdcall 风格的修饰函数：`_functionName@n`，其中 n 是参数列表中的字节数，
*   和一个 cdecl 风格的未修饰函数：`functionName`.

使用 MinGW 编译时，您会得到这两者的混合：MinGW 将附加`@n`，但不会附加下划线：`functionName@n`。

解决这个问题的方法是告诉`ld`不要添加后缀，使用`--kill-at`开关（或者`-Wl,--kill-at`如果你通过 GCC 调用它）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T03:07:39.643

我找到了答案！似乎在 Windows 中使用 JNI 时，它会寻找一个`_Java_`以`Java_`. 为什么会这样，而不是写在我不知道的文档中，但它使一切工作完美！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:22:30.147

```
java.lang.UnsatisfiedLinkError: no Sixense_Java in java.library.path 
```

看起来Java找不到库，你把它放在正确的地方了吗？

你可能需要改变`java.library.path`，看看[这个](http://www.chilkatsoft.com/p/p_499.asp)。

如果要打印它的内容，请使用：

```
System.out.println( System.getProperties().getProperty("java.library.path")); 
```

这可能会打印很多，您可能希望自己`split(";")`打印每个条目。

# c# - 多线程时将参数传递给方法

> ID：11420158
> 
> 赞同：1
> 
> 时间：2012-07-10T19:05:53.853
> 
> 标签：c#, multithreading, methods

所以，我试图将一个参数传递给我想要参与多线程的方法。所以，我写了如下代码：

```
 new Thread (Go(ineedthis)).Start();
    Go();

  static void Go(string ineedthis)
  {
    lock (locker)
    {
      if (!done) { Console.WriteLine ("Done"); done = true; }
    }
  } 
```

但是，我不能传递参数`ineedthis`，因为当你像我在第一行中那样插入它时会出错。反之，如果在为方法制作线程时不给参数，也会报错。

那么，如何在创建线程时将参数传递给方法呢？

谢谢！注意：我昨天刚开始使用 c#，所以我对此完全陌生。请解释清楚，以便我从中得到更多！

编辑 - 错误：

```
Error   1   The best overloaded method match for 'System.Threading.Thread.Thread(System.Threading.ParameterizedThreadStart)' has some invalid arguments     23  21  test

Error   2   Argument 1: cannot convert from 'method group' to 'System.Threading.ParameterizedThreadStart'   23  32  test 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:08:46.957

我认为您正在寻找更像这样的东西：

```
 var t = new Thread (Go); 
t.Start(ineedthis); 
```

您首先创建一个线程，详细说明在后台线程上运行时该方法将是什么。然后启动线程，根据需要传入任何参数。有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/6x4c42hc.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:11:02.390

你需要一个`ParameterizedThreadStart`代表：

```
new Thread (Go).Start(ineedthis); 
```

并且方法签名需要是`object ineedthis`，而不是`string ineedthis`：

```
static void Go(object ineedthis)
{
  string data = (string)ineedthis;
  lock (locker)
  {
    if (!done) { Console.WriteLine ("Done"); done = true; }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:14:58.170

您可以为此使用[任务并行库](http://msdn.microsoft.com/en-us/library/dd537609.aspx)。

```
Task.Factory.StartNew(() => Go("test")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-19T21:10:19.947

```
 Thread workerThread = new Thread (() => go("example"));
    workerThread.Start(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T19:30:37.890

这也应该有效：

```
new Thread (() => Go(ineedthis)).Start(); 
```

这将方法调用包装在一个可分配给 a 的零参数 lambda 中`ThreadStart`。

# asp.net-mvc - ASP.NET MVC：视图有时返回为 application/json 而不是 text/html

> ID：11420159
> 
> 赞同：4
> 
> 时间：2012-07-10T19:05:54.417
> 
> 标签：asp.net-mvc, json, content-type

我有一个视图，我从中调用另一个视图以在我的 html 中的脚本标记内呈现一些 json：

```
public ActionResult App()
{
  return View();
}

public JsonResult SomeJsonData()
{
  // ... here goes the code that generates the model
  return Json(model, JsonRequestBehavior.AllowGet);
} 
```

在我的 App.cshtml 文件中，我有这样的内容：

```
<script type='text/javascript'>
  var myJsonData = @Html.Action("SomeJsonData", "MyController");
</script> 
```

问题是有时当我在浏览器中重新加载页面时（现在使用 Chrome 20）它会显示所有标记，如果我转到开发人员工具中的网络选项卡，我可以看到页面请求的 Content-Type属于“应用程序/json”类型。如果我只是重新加载页面，那么它会正确加载（内容类型应该是“text/html”）。

关于为什么会发生这种情况的任何想法？或者我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:10:05.520

当您返回 a 时，`JsonResult`您正在将响应 Content-Type 修改为`application/json`。因此，您首先调用`App`返回 View 的控制器操作，并且显然将 Content-Type 设置为`text/html`并在返回的视图内调用该`SomeJsonData`操作，该操作对先前的内容类型进行废话并将其修改为`application/json`. 当然最后一个获胜，这就是用户代理在一天结束时看到的：`application/json`.

因此，以下是如何进行：

```
public ActionResult App()
{
    // ... here goes the code that generates the model
    var model = ...

    return View(model);
} 
```

在您的强类型视图中：

```
@model MyViewModel
<script type="text/javascript">
    var myJsonData = @Html.Raw(Json.Encode(Model));
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:22:29.160

其实我刚刚发现了另一个相关的问题

[为 JsonResult 调用 @Html.Action 会更改我在父模板中的响应类型](https://stackoverflow.com/questions/10543953/calling-html-action-for-jsonresult-changes-my-response-type-in-parent-template)

在发帖之前我找不到任何东西。

我要采取的方法只是在返回 json 数据时更改内容类型：

```
public JsonResult SomeJsonData(bool returnAsHtml = false)
{
  // ... here goes the code that generates the model
  return returnAsHtml ?Json(model, "text/html", JsonRequestBehavior.AllowGet) : Json(model, JsonRequestBehavior.AllowGet);
} 
```

在 App.cshtml 上

```
<script type='text/javascript'>
  var myJsonData = @Html.Action("SomeJsonData", "MyController", new {returnAsHtml = true});
</script> 
```

而且我还添加了一个标志，以允许从其他需要应用程序/json 响应的地方调用 actionmethod。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T20:10:43.947

就像其他人所说的那样，返回 JSON 的操作正在更改响应的内容类型。

我可以通过使用 HtmlHelper 将 JSON 放入页面来解决此问题。我避免使用控制器和动作；我的 HtmlHelper 正在调用静态方法。这个解决方案可能不会在所有情况下都有效，并且有点像 hack，但是您可以避免以这种方式将数据放入一堆视图模型中。

```
namespace System.Web.Mvc.Html
{
   public static class JsonDataProviderHelper
   {
      public static MvcHtmlString JsonDataProvider(this HtmlHelper helper, JsonDataType jsonDataType)
      {
         switch (jsonDataType)
         {
            case JsonDataType.YARDSALE_MINI_CALENDAR:
               var yardsales = SalesEventCrud.GetByMonthForJavascript(null, MvcApplication.CurrentPortalId);
               return new MvcHtmlString(JsonConvert.SerializeObject(SalesEventCrud.GetByMonthForJavascript(null, MvcApplication.CurrentPortalId)));

            default:
               return new MvcHtmlString("");
         }
      }

      public enum JsonDataType
      {
         YARDSALE_MINI_CALENDAR
      }
   }
} 
```

我正在使用 json.net 进行序列化。我有`switch`声明是因为我计划使用这个帮助器在其他情况下也返回 JSON。

在页面中：

```
<script type="text/javascript">
   jQuery(document).ready(function () {
      setupSmallSidebarCalendar(@Html.JsonDataProvider(JsonDataProviderHelper.JsonDataType.YARDSALE_MINI_CALENDAR));
   });
</script> 
```

在页面中，数据以直接 JSON 形式写入，因此不需要对数据进行其他解析/按摩。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-17T19:25:16.170

@Daran 找到了原因 - ContentType 被*最后*完成的任何内容覆盖。他的解决方案应该有效，但是如果您仍然喜欢 Action 方法模式，您应该能够执行以下操作，并在返回之前简单地更改 ContentType。它仍然是 JSON 数据，但内容类型与 HTML 视图配合得很好。

```
 [HttpPost]
    public JsonResult GetJson(int someId, int foobar)
    {
        JsonResult result = CreateResult(someId, foobar);
        result.ContentType = "text/html";
        return result;
    } 
```

不利的一面是，这有点奇怪和/或意外的行为。例如，如果您通过 AJAX 调用端点，我怀疑这会起作用。但它看起来*几乎*可以工作，如果它在共享代码库中，可能会引起一些混乱。出于这个原因，如果您这样做，可能值得以不被滥用的方式命名端点。您甚至可以创建一种旨在以这种方式工作而不是使用 JsonResult 的新型 Result。

# ruby-on-rails - jruby on rails with warbler and tomcat and windows

> ID：11420161
> 
> 赞同：0
> 
> 时间：2012-07-10T19:06:05.360
> 
> 标签：ruby-on-rails, tomcat, jruby, jrubyonrails, warbler

我尝试将 application.war 文件部署到 tomcat 文件夹中的 webapps/ 并启动服务器。当我尝试打开`http://localhost:8080/relConnections`它时，它会在屏幕上显示“出现问题”。我删除了常用 Rails 应用程序公用文件夹中的 common index.html，并将根目录更改为我的主页。

当我看到日志文件时，它显示以下内容：

```
"An exception happened during JRuby-Rack startup private method `gsub' called for nil:NilClass
--- System
jruby 1.6.7" 
```

以及三个或四个以上的例外，对所有这些都说相同的行 gsub nil:NilClass。

这是我的 Gemfile

```
source 'http://rubygems.org'

gem 'jruby-jars', '1.6.7'
gem 'warbler', '1.3.2'
gem 'rails', '3.1.3'
gem 'rake', '0.9.2.2'

gem 'jruby-openssl', '0.7.5', :platforms => :jruby
gem 'json', '1.6.5', :platforms => [:jruby, :mingw, :mingw_19]
gem 'therubyrhino', :platforms => :jruby

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'activerecord-jdbc-adapter', '1.2.2'
gem 'activerecord-oracle_enhanced-adapter', '1.4.0'

gem 'mechanize', '1.0.0'
gem 'nokogiri', '1.5.0'

group :assets do
  gem 'sass-rails',   '~> 3.1.4'
  gem 'coffee-rails', '~> 3.1.1'
  gem 'uglifier', '>= 1.0.3'
end 

gem 'jquery-rails'
group :development do
  gem 'ruby-debug-base', '0.10.4'
  gem 'ruby-debug-ide', '0.4.17.beta8'
  gem 'pry', '0.9.7.4'
end

group :test do
  gem 'turn', '0.8.3', :require => false
  gem 'minitest', '2.11.0'
  gem 'timecop', '0.3.5'
end
gem 'jruby-pageant', '~>1.0.2'

gem 'net-ssh', '~>2.5.2' 
```

这是我的warble.rb

```
Warbler::Config.new do |config|
  #commented code
  config.dirs = %w(app config lib log vendor tmp)
  #more commented code
end 
```

如果我在这里缺少任何宝石或其他任何东西，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:30:44.513

我认为您可以尝试将 jruby 版本设置为 1.9。在warble.rb中

```
config.webxml.jruby.compat.version = "1.9" 
```

# serial-port - 在 Arduino 上读写多个串口

> ID：11420165
> 
> 赞同：1
> 
> 时间：2012-07-10T19:06:14.493
> 
> 标签：serial-port, arduino

我正在使用具有 4 个串行端口的 Arduino mega。在主串口上不断地在 Arduino 和计算机之间发送和接收数据。计算机正在做一些计算并将结果发送回arduino。

我想查看 Arduino 从计算机接收的数据，但执行正常的 Serial.print() 也会将该数据发送回计算机，从而创建一个无休止的垃圾数据循环。

有没有办法使用其他串行端口打印到屏幕上。我在想我可以在 port1 上读/写，然后使用 port2 将数据发送回屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:14:34.603

我自己没有 Mega，所以对它持保留态度，但据我所知，三个额外的串行端口**没有**连接到 USB 到串行端口。Serial1-Serial3 只能通过将 TX(Mega) 与 RX(device) 连接来与其他设备通信，反之亦然。

好的，因为我不确切知道，所以我看了一下[Arduino Mega 规格](http://arduino.cc/en/Main/ArduinoBoardMega/)。它说：

> 串行：0（RX）和 1（TX）；串行 1：19（RX）和 18（TX）；序列号 2：17（RX）和 16（TX）；串行 3：15（RX）和 14（TX）。用于接收 (RX) 和发送 (TX) TTL 串行数据。引脚 0 和 1 也连接到 FTDI USB-to-TTL 串行芯片的相应引脚。

关于这些坏消息我很遗憾。

# dom - 确保样式在覆盖 Web 应用程序中不变的好方法是什么？

> ID：11420167
> 
> 赞同：0
> 
> 时间：2012-07-10T19:06:19.103
> 
> 标签：dom, user-interface, styles

我一直在思考这个问题，并希望得到其他人的一些意见。我将制作一个覆盖网页的浏览器应用程序，但是我正在讨论是使用 iFrame 还是直接注入我的 DOM 元素。我遇到的问题是样式。使 DOM 元素无法被其他网页样式更改的最可靠方法是什么？如果我将代码放在 iFrame 中，这将不是问题，但我觉得如果我只是将元素放入 DOM 并通过 JSONP 进行通信，性能会更好。谢谢你的反馈。

# mysql - MySQL 查询 - 检查数据行是否包含 user_id

> ID：11420169
> 
> 赞同：3
> 
> 时间：2012-07-10T19:06:20.763
> 
> 标签：mysql, sql

我有一张`sessions`桌子，我想做的是运行查询以检查某个帐户是否已登录。

![在此处输入图像描述](../Images/95c7538b11d89d3c932be127a52cee67.png)

我的查询如下所示：

```
SELECT id FROM sessions WHERE data LIKE '%4%' 
```

但是对于这样的查询，如果“14”的 user_id 已登录，则该查询将返回 True。如何检查某个数字是否存在并完全匹配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:07:49.047

在搜索中包含分隔符：

```
WHERE data LIKE '%:4;%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:12:53.570

为什么不将 user_id 的另一个字段添加到会话表中？

示例：我有一个站点，用户一次只能从一个位置登录。如果他们尝试从另一个位置登录（IE 开始一个新会话），那么我会终止他们之前的所有登录。

所以作为我的登录脚本的一部分：

```
// log this user out of any other active sessions
$sql = sprintf("DELETE 
    FROM sessions 
    WHERE id_user=%s", 
    mysql_real_escape_string($_SESSION['id_user'])
);

// Associate this session with this user
$sql = sprintf("UPDATE sessions 
    SET id_user=%s 
    WHERE id=%s", 
    mysql_real_escape_string($_SESSION['id_user']), 
    session_id()
); 
```

所以我可以将 id_user 作为我的会话中的一个附加字段 FKed 到我的用户表......它更加规范化，让您可以快速进行“谁正在使用这个站点”查询，而无需过多的解析和大惊小怪。

# c# - 重置 Cursor.Clip

> ID：11420175
> 
> 赞同：2
> 
> 时间：2012-07-10T19:06:39.517
> 
> 标签：c#, winforms, mouse

一旦触发 MouseEntered 事件，我就试图将光标锁定到 PictureBox 中。

我想在键入 Ctrl + Enter 时取消此操作（或另一个快捷方式，如果有这方面的最佳做法）

我正在尝试以[此处](https://stackoverflow.com/a/1905139/1233949)提到的方式清除剪辑，但我认为我的 MouseEnter 不断扼杀我必须离开的任何机会。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:20:33.770

**编辑**：根据[这个](http://www.blackwasp.co.uk/MouseClipping.aspx)和[这个](http://www.codeproject.com/Tips/375046/The-Cursor-Clip-Property)：设置为空矩形：

```
 Cursor.Clip = Rectangle.Empty; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:49:39.607

我不是 100% 确定你在这里问什么，因为提到了`MouseEnter`你没有展示的活动。假设您自己会解决这个问题，我实际上不同意该线程中接受的答案。反编译`System.Windows.Forms`你有：

```
internal static Rectangle ClipInternal
{
    get
    {
        NativeMethods.RECT rECT = default(NativeMethods.RECT);
        SafeNativeMethods.GetClipCursor(ref rECT);
        return Rectangle.FromLTRB(rECT.left, rECT.top, rECT.right, rECT.bottom);
    }
    set
    {
        if (value.IsEmpty)
        {
            UnsafeNativeMethods.ClipCursor(null);
            return;
        }
        NativeMethods.RECT rECT = NativeMethods.RECT.FromXYWH(value.X, value.Y, value.Width, value.Height);
        UnsafeNativeMethods.ClipCursor(ref rECT);
    }
} 
```

这似乎表明通过`Rectangle.Empty`是正确的答案。

# google-maps-api-3 - 高程服务 UNKNOWN_ERROR

> ID：11420176
> 
> 赞同：3
> 
> 时间：2012-07-10T19:06:40.330
> 
> 标签：google-maps-api-3, elevation

我在使用 Google 地图 V3 JavaScript 高程服务时遇到了困难。

根据谷歌组发布（[https://groups.google.com/forum/#!msg/google-maps-js-api-v3/Z6uh9HwZD_k/G1ur1SJN7fkJ](https://groups.google.com/forum/#!msg/google-maps-js-api-v3/Z6uh9HwZD_k/G1ur1SJN7fkJ)），如果您使用 getElevationAlongPath() 它会压缩并发送Google 服务器的整个路径作为 Ajax GET 请求，并在其服务器上对其进行子采样。这意味着，如果您有大量路径段，则编码的 URL 会超过最大 URL 长度，并且请求会失败并显示 UNKNOWN_ERROR。

谁能确认这是 URL 长度问题？

我尝试沿路径进行自己的二次采样，并仅将我想要高程数据的点作为 getElevationForLocations() 请求发送。这似乎是一种改进，但我仍然收到一些 UNKNOWN_ERROR 响应。这些都是不可预知的。有时，400 分的请求会成功返回。其他请求将失败，仅通过 300 分。我猜这仍然是 URL 长度的问题（假设 getElevationForLocations() 也将 URL 编码的数据发送到 Google）。

文档说“你可以在一个数组中传递任意数量的多个坐标，只要你不超过服务配额。” 情况似乎并非如此。

有没有人对从长路径获取大量高程数据点（500？）的可靠方法有任何建议？

谢谢，科林

* * *

经过一番挖掘，似乎是这种情况。

用于提升的 JavaScript API 在幕后使用 HTTP 提升服务。HTTP 提升服务文档确实说请求限制为 2048 个字符。但是，如果您直接使用 HTTP 服务，您将构建自己的 URL。这意味着您可以在发送前检查长度。如果您使用 JavaScript API，则会为您构建 URL，但 API 代码不会在发送前检查 URL 长度。

调用端点 URL 和必要的参数占用 78 个字符，剩下 1970 个字符用于编码点。

这就是它变得混乱的地方。编码点中的字符数随 lat 和 lng 值的大小和精度而变化。通常，每点 8 到 12 个字符之间。一个额外的复杂性是路径编码中使用的一些字符可能需要 URL 编码 - 进一步增加每个点所需的字符数，但可能会增加一个未知的数量（每个需要 URL 编码的路径字符有 2 个额外字符） ）。

所有这些复杂性意味着，理论上，调用导致 URL 过长只有 55 个点是可能的——尽管非常非常不可能。一个安全的限制可能是 150 点（但这有时仍然会失败）。200 应该大部分时间都可以工作。250应该是最大值。

实际上，从少数测试中： - 每次工作 200 个 - 通常工作 300 个 - 有时工作 400 个

计算和测试之间的差异表明 JavaScript API 可能正在进行某种形式的压缩，或者我的计算有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:28:08.937

您的怀疑是正确的，这是 URL 长度问题。如果您在提交请求时打开了 Chrome 的开发者工具，您将看到 HTTP 414（请求 URI 太大）错误。URL 大约有 3000 个字符，大约 1000 个字符太多（2048 是常见的最大 URL 长度）。

在内部，Google Maps API 将所有这些点转换为看起来像[编码折线](https://developers.google.com/maps/documentation/utilities/polylinealgorithm)的东西，这有助于压缩数据，但对于这条非常长的路径来说显然是不够的。当您知道您将包含超过 N 个点时，将请求分成多个部分可能是值得的（我会尝试使用 N 来查看哪些有效）。

# c++ - 回显服务器多次返回相同的输入

> ID：11420177
> 
> 赞同：1
> 
> 时间：2012-07-10T19:06:42.633
> 
> 标签：c++, sockets, network-programming

![在此处输入图像描述](../Images/93e8b49d6a1d4c03ec62f0ebc7c25eb4.png)

我编写了以下代码以创建一个回显服务器（我写入标准输出的数据从我的 PC 移动到服务器并返回到我的 PC）。**问题是，尽管 echo 显示在客户端的终端上，但它的显示次数与其长度相同。**

**服务器.cpp**

```
void reflect(int x)
{
int n;
int m;
char data[100];
cout<<"Entered reflect function"<<endl; 

for(;;)
{
n=read(x,data, 100); 
cout<<"Client sent "<<n<<endl; 

if(n>0)
{
    while(n>0)
    {
        m=write(x,data,n);
        n=n-m;
    }
cout<<"Successfully echoed back to client"<<endl;  
}
}//end of for loop
}

int main()
{
sockaddr_in serv;
bzero(&serv, sizeof(serv));
serv.sin_family=AF_INET;
serv.sin_port=htons(3345);
inet_aton("127.0.0.1", &(serv.sin_addr));

int servfd=socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
int x;
x=bind(servfd, (sockaddr*)(&serv), sizeof(serv));

cout<<"Bind returned"<<x<<endl; //this displays x as 0

listen(servfd, 5);
sockaddr cli;
int connfd;
pid_t id=-1;
socklen_t siz=sizeof(cli);
for(;;)
{
    if((connfd=accept(servfd, &cli, &siz))>=0)
         id=fork();

    if(id==0)
         reflect(connfd);

    else 
         continue;
}
} 
```

**客户端.cpp**

```
int main()
{
int clifd;
clifd=socket(AF_INET,SOCK_STREAM, IPPROTO_TCP);
sockaddr_in serv;
bzero(&serv, sizeof(serv));
serv.sin_family=AF_INET;
serv.sin_port=htons(3345);
inet_aton("127.0.0.1", &(serv.sin_addr));

connect(clifd, (sockaddr*)(&serv), sizeof(serv));
int n,m;
char data[100];
char recvd[100];
for(;;)
{
    fgets(data, 100,stdin );
    n=strlen(data);
    cout<<"You have written "<<n<<endl;

    if(n>0)
    {
        while(n>0)
        {  
             m=write(clifd,data,n);
             n=n-m;
        }
    }

    n=read(clifd, recvd, 100);
    cout<<"Server echoed back "<<n<<endl; 

    if(n>0)
    {
        while(n>0)
        {
            m=fputs(data,stdout);  //gets displayed many times
            cout<<"m is"<<m<<endl; //gets displayed many times
            fflush(stdout);
            n=n-m;
        }
        //cout<<data<<endl;
    }
}
} 
```

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:12:57.897

输出

返回值 成功时，返回一个非负值。出错时，函数返回 EOF。

也许使用 write 来获取写入的字节数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:28:50.637

strlen() 函数给出输入中的字符数，不包括终止 C 样式字符串的零字节。您只向服务器写入 n 个字节（没有空终止符）。然后，您读取从服务器回显的 n 个字符，并且从不设置 recvd 缓冲区的其余部分。所以它会打印内存中的任何垃圾，直到找到零为止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:18:48.653

`fputs`打印一个 C 字符串，而不是单个字符，因此您在 while 循环中每个字符打印整个字符串一次。此外，它依赖于以 null 结尾的字符串，而您的字符串不是。你知道长度，所以你可能会强制你自己的空终止，或者更好地创建一个`std::string`带有开始和长度的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T19:20:37.030

这段代码实际上试图打印与数组中字节数一样多的数据。它将返回写入的字节数，即 4。我认为您不需要将 puts() 和 fflush 放在一个循环中。你可以打电话给他们一次。如果您仍然想要while循环，可能您可以检查返回值（m）并与数据长度（n）进行比较，如果它们相等，则从循环中中断。

最后一个while循环可以替换为

```
fputs(data,stdout);
fflush(stdout); 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T19:23:08.723

如果有新数据到达，您将处理缓冲区。

您可以在读取数据的位置更改此设置：

```
for(;;)
{
    if(fgets(data, 100,stdin )) { /* only process the data, when something arrived. */
        n=strlen(data);
        cout<<"You have written "<<n<<endl;
        ... 
```

# php - 如何根据 Doctrine2 中表中的另一个字段更新字段？

> ID：11420181
> 
> 赞同：0
> 
> 时间：2012-07-10T19:06:52.633
> 
> 标签：php, doctrine-orm, sql-update, dql

我有两列的表：`price`和`constant`。

我想对表中的所有条目运行更新以`price`基于`constant * coefficient`.

我怎么能做这样的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:24:03.400

您可以使用 DQL 查询来做到这一点：

```
$em->createQuery('
    UPDATE entityClass e
    SET e.price = e.constant * 33;
'); 
```

您也可以使用原始 SQL 执行此操作：

```
$em->getConnection()->executeUpdate('
    UPDATE entity_table_name AS e
    SET e.price = e.constant * 33;
'); 
```

您还可以在 preUpdate 和 prePersist 原则事件上添加一个侦听器，以便自动更新这些值。

有关示例，请参见[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html#preupdate 。](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html#preupdate)

这样每次保存实体时，它都会自动更新相关字段。

# ruby - 如何使用 RegEx 根据上下文替换项目，而不影响上下文

> ID：11420189
> 
> 赞同：1
> 
> 时间：2012-07-10T19:07:24.593
> 
> 标签：ruby, regex

使用 Ruby，我正在编写一个正则表达式，并且我需要能够删除括号之间出现的任何冒号。我知道我可以使用

```
"This is a (string :)".sub!(/\([^\)]*:/, '') 
```

这样做，但问题是这个函数也会随之删除上下文。有没有办法指定我只希望它删除冒号而不是整个匹配表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:26:01.090

因此，一些正则表达式引擎支持所谓的前瞻和后瞻匹配，它们将匹配但不消耗字符。Ruby 确实支持前瞻，但不支持后瞻（以高性能方式更难做到），这意味着您可以很容易地坚持`sub`并删除右括号之前的冒号，但不能确保它在后左括号：

```
string = 'This is a (string :)'
string.sub /:(?=\))/, ''
# => 'This is a (string )' 
```

另一种方法是使用子模式捕获（当您在正则表达式中使用分组时会自动发生）来重建没有不需要的部分的字符串，在这种情况下是冒号：

```
string.sub /(\([^:]+):\)/, '\1)' 
```

这`\1`是对第一组中匹配内容的反向引用，由未转义的括号分隔。您可以在这里看到，我没有费心在第二组中捕获右括号，而是选择简单地将其包含在替换中。这在这种情况下效果很好，因为它不会改变，但是如果您不知道冒号将出现在括号括起来的内容的末尾，您将需要第二组：

```
string.sub /(\([^:]+):([^)]+\))/, '\1\2' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T22:04:21.197

先前的答案主要适用于删除括号组中的单个冒号，但对于像“（thing：foo：bar）”这样的倍数有问题。使用lookbehind 和lookahead 来进行inside parens 断言会很好，但是ruby（和大多数regexp 引擎）不支持lookbehind 中的非确定性长度模式。

```
irb> s = 'x (a:b:c) : (1:2:3) y'
=> "x (a:b:c) : (1:2:3) y"

irb> s.gsub /(?<=\([^\(]*):(?=[^\)]*\))/, ''
SyntaxError: (irb):10: invalid pattern in look-behind: /(?<=\([^\(]*):(?=[^\)]*\))/
    from /Users/dbenhur/.rbenv/versions/1.9.2-wp/bin/irb:12:in `<main>' 
```

您可以改为使用 gsub 的块形式来捕获括号括起来的组，然后从每个匹配项中删除冒号：

```
irb> s.gsub(/\([^\)]*\)/) {|m| m.delete ':'}
=> "x (abc) : (123) y" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:12:35.630

在一般的正则表达式中，你可以使用`'(\()(:)(\))', \1\3.`

我对红宝石不熟悉。基本上你要做的是你有 3 个组，从这三个组中`( : and )`你去掉第二个，`:`.

我在 Notepad++ 中对其进行了测试，并且可以正常工作。

我认为这被称为：正则表达式反向引用

干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T01:54:33.463

如果您可以假设所有括号将像您的示例中那样平衡成对出现，那么这应该就是您所需要的：

```
"This is a (string :)".gsub!(/:(?=[^()]*\))/, '') 
```

如果前瞻成功地找到了一个结束括号而没有首先看到一个开始的括号，那么冒号必须在一个`(...)`序列内。请注意我是如何排除开头括号和结尾括号的；这是必不可少的。

# random - DAG的所有拓扑类型的随机算法？

> ID：11420191
> 
> 赞同：6
> 
> 时间：2012-07-10T19:07:41.437
> 
> 标签：random, graph-algorithm, directed-acyclic-graphs, topological-sort

*有谁知道用于生成 DAG 的拓扑排序的随机算法，其中算法的每次调用具有生成 DAG 的每个*有效拓扑排序的非零概率。

至关重要的是，该算法不排除任何有效的拓扑排序，因为它是一个更大算法的一部分，如果有足够的迭代，必须证明能够探索给定 DAG 的所有拓扑排序。

有谁知道是否已经开发了这样的算法？

（或者，如果有人知道一种相当有效的算法，可以保证生成给定 DAG 的*所有*拓扑类型，我可能会对其进行调整以获得我需要的东西。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:15:07.560

它有助于思考说你涵盖了所有可能的拓扑类型意味着什么。在拓扑排序过程中，您会从有效候选者的子集中选择要处理的候选者，每个候选者都是有效选择。根据您实现 TS 的方式，它可能是从一组边缘跟随的边缘，每个边缘都是候选（一组传出边缘）或选择哪个节点作为起点（一组汇/源）或随机选择的起始节点。

您想要的是确保选择过程产生的分布不会显示出压倒性地偏向候选人的特定子集。

您可以调整您的选择过程以实现更均匀的分布，而无需运行无限时间。例如，您可以为集合中的每个候选者分配权重。每次选择候选人时，您都会将该候选人的权重减少“X”的数量，并将其他候选人的权重增加“X/(k-1)”的数量，其中 k 是候选集的大小. 这将导致在下一次迭代中选择未被选中的候选者的机会更大，并导致更快地收敛到更均匀的分布。

# cookies - 像 Digg.com 上的一次性 FancyBox 弹出窗口

> ID：11420201
> 
> 赞同：0
> 
> 时间：2012-07-10T19:08:12.430
> 
> 标签：cookies, popup, fancybox, digg

我如何才能启动一个 FancyBox 弹出窗口，通知新用户一个快速注册按钮（或任何选择的按钮），就像 Digg.com 上的一样......并且与 Digg 一样只有一次。我真的没有使用 cookie 的经验，但已经在网站的其他部分运行了 FancyBox，所以基础已经存在。我要求弹出窗口出现在页面加载中。任何指针都非常高兴地收到了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T10:08:33.707

我的最终解决方案使用 Reveal Modal 插件（[单击此处](http://www.zurb.com/playground/reveal-modal-plugin)）使用修改后的以下代码在页面加载时触发内联以“触发”，以便每三天仅显示一次弹出窗口。还要记住加载 jquery.cookie.js 然后添加以下代码：

```
<script type="text/javascript">
jQuery(document).ready(function(){
   if (jQuery.cookie('test_status') != '1') {
     jQuery('#myModal').reveal()
        jQuery('#myModal').trigger('click');
        jQuery.cookie('test_status', '1', { expires: 3}); }
   });
</script> 
```

使用 FancyBox 以外的东西是原始问题的答案，因为似乎某处存在冲突，因此使用 Reveal 使这两个功能完全分开。我还应该注意，Reveal 下载中的 .css 内容已添加到我们网站的样式表中。

希望这会帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T01:56:48.850

你可以在这里找到一个代码示例[https://stackoverflow.com/a/8305703/1055987](https://stackoverflow.com/a/8305703/1055987)包括指向 jQuery Cookie 插件的链接。

# model - ExtJS4 - 代理、存储、模型、自动加载 - 有什么魔力？

> ID：11420213
> 
> 赞同：1
> 
> 时间：2012-07-10T19:08:56.700
> 
> 标签：model, proxy, extjs4, store

我在我的模型上定义了一个代理。

我定义了一个指向模型的商店，没有代理，因为我希望它使用模型上定义的商店。

`store.autoLoad`: 真的不行

我必须从我的控制器显式调用

```
var store = this.getMyStore();
store.load(); 
```

这是预期的行为吗？

1.  这不是自动加载的目的吗？
2.  仅当在商店中定义代理时才有效？

**代码：**

**模型/MyThing.js**

```
Ext.define('MyApp.model.MyThing', {

  extend: 'Ext.data.Model',

  fields: ['id', 'reference'],

  proxy:
  {
    type: 'ajax',
    url: 'MyThings'
  }
}); 
```

**商店/MyThings.js**

```
Ext.define('MyApp.store.MyThings', {
  extend: 'Ext.data.Store',
  autoLoad: true,
  autoSync: false,
  model: 'MyApp.model.MyThing'
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:20:14.243

你没有展示你是如何创建商店的。调用后，您应该会在 FireBug 中看到一个 HTTP GET 请求（假设您正在使用 FireFox 并拥有它）：

```
Ext.create('MyApp.store.MyThings'); 
```

我将您的代码添加到我的应用程序并获得了预期的结果，所以它应该可以工作。

**更新：**

为了响应您自己发布的答案，您可以将该配置对象提供为`autoLoad`（而不是`autoLoad: true`）以获得相同的功能，而无需显式调用`store.load()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:51:29.910

实际上，这有点像新手。我一直是一个急切的海狸。

我在商店完成加载之前正在查看它（因为它是异步的）。

最佳实践是订阅 load() 函数的回调，然后做一些事情......

```
store.load({
    scope   : this,
    callback: function(records, operation, success) {
        //the operation object contains all of the details of the load operation
        console.log(records);
    }
}); 
```

# extjs4 - ExtJs 4 Store 的 AJAX 代理在 Store add 上没有被调用——缺少什么？

> ID：11420216
> 
> 赞同：1
> 
> 时间：2012-07-10T19:09:13.633
> 
> 标签：extjs4, store

我有一个网格、一个存储和模型用于它的数据和指向我自己编写的 PHP 后端的存储的 AJAX 代理。PHP 后端在每次调用时都会写入日志。

系统可以正常进行读取、更新和删除调用。但是现在我需要向 Store 添加新字段，我这样做的方式如下：

（这里，生成了一些新数据……）

```
var newEntry=Ext.ModelManager.create({   
     id:id,
     title: title,
     url: '/php/'+fname,
     minithumb: '/php/'+small,
     thumb:'/php/'+thumb
                }, 'MyApp.model.fileListModel');
 var store=Ext.getCmp('currGallery').getStore();
 store.add(newEntry);
    store.sync(); 
```

我在网格中出现了新行。但是不管有没有我们的 sync() 调用，我的 PHP 后端都没有调用。然而，它又读了一次。商店有参数 autoSync :true 并且当我在网格中编辑现有行时自动更新数据非常好。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:59:06.483

事实上我错过了一个

```
 newEntry.phantom = true; 
```

旗帜。在添加到商店之前设置它之后，商店及其代理开始向服务器发送数据。

也许ID解决方案也有效，不知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T21:34:29.960

`id`创建新记录时尽量不要设置。

# java - 如何更改 JComboBox 显示区域的外观

> ID：11420217
> 
> 赞同：2
> 
> 时间：2012-07-10T19:09:22.700
> 
> 标签：java, swing, jcombobox, listcellrenderer

我正在为 JComboBox 使用自定义 BasicComboBoxRenderer，并且更改了下拉列表项目的外观。但是，这些更改也适用于组合框中显示的单个顶部项目（不知道如何调用它）。

如果可能的话，我希望最上面的项目独立于列表中的其他项目。我还想在焦点集中时摆脱顶部项目的蓝色（setFocusable(false) 不是我想要的）。

我尝试使用“渲染器索引”（-1）来影响顶部项目，但它似乎没有帮助。

有任何想法吗？

PS 不幸的是，我无法添加更清晰的图像（没有声誉）。

编辑：当我说我希望顶部项目独立于下拉列表的所有其他项目时，我的意思是总是看起来与其他项目不同。例如，在我的自定义 BasicComboBoxRenderer 中，我将所选项目设置为具有不同的背景，但此背景也适用于顶部项目（因为所选项目成为组合框的顶部项目）。

编辑2：顶部项目=我的意思是组合框显示区域，所以我想影响显示区域中显示的项目，而不是下拉列表中的第一个项目。我设法通过在组合框本身和 setFocusable(false) 上使用 setBackground 来做到这一点（这不是很有帮助，因为我想保持焦点机制）。但问题是（除了焦点问题），例如，如果我通过自定义 BasicComboBoxRenderer 或 ListCellRenderer 类在列表中的每个项目上设置边框，则相同的边框会出现在显示区域中显示的项目上。所以这里有2个问题：

--有什么办法可以区分下拉列表中的item的布局和显示区的单个item的布局吗？

--有没有什么方法可以在不禁用焦点机制的情况下禁用组合框的焦点颜色，就像我们在按钮上使用 setFocusPainted(false) 时一样？（我还尝试在组合框上添加自定义 FocusListener，但通过 focusGained() 对背景所做的任何更改仅影响按钮，而不影响显示区域中显示的项目）。

很抱歉造成混乱和多次编辑......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T19:20:24.883

*   看看@camickr 的[组合框提示](http://tips4java.wordpress.com/2008/10/18/combo-box-prompt/)，

*   定义的提示不能返回任何值`JComboBox.getSelectedXxx`

编辑

BasicComboBoxRenderer 或 ListCellRenderer 可以这样做

```
import java.awt.*;
import javax.swing.*;

public class TestHighLightRow {

    public void makeUI() {
        Object[] data = {"One", "Two", "Three"};
        JComboBox comboBox = new JComboBox(data);
        comboBox.setPreferredSize(comboBox.getPreferredSize());
        comboBox.setRenderer(new HighLightRowRenderer(comboBox.getRenderer()));
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.getContentPane().add(comboBox);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestHighLightRow().makeUI();
            }
        });
    }

    public class HighLightRowRenderer implements ListCellRenderer {

        private final ListCellRenderer delegate;
        private int height = -1;

        public HighLightRowRenderer(ListCellRenderer delegate) {
            this.delegate = delegate;
        }

        @Override
        public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
            Component component = delegate.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
            Dimension size = component.getPreferredSize();
            if (index == 0) {
                component.setBackground(Color.red);
                if (component instanceof JLabel) {
                    ((JLabel) component).setHorizontalTextPosition(JLabel.CENTER);
                }
            }
            return component;
        }
    }
} 
```

编辑2

JComboBox 有两种状态

*   可编辑

*   不可编辑

基本上所有值都可以从 UIManager 访问，快捷方式

```
import java.awt.*;
import java.util.Vector;
import javax.swing.*;
import javax.swing.UIManager;
import javax.swing.plaf.ColorUIResource;
import javax.swing.plaf.metal.MetalComboBoxButton;

public class MyComboBox {

    private Vector<String> listSomeString = new Vector<String>();
    private JComboBox someComboBox = new JComboBox(listSomeString);
    private JComboBox editableComboBox = new JComboBox(listSomeString);
    private JComboBox non_EditableComboBox = new JComboBox(listSomeString);
    private JFrame frame;

    public MyComboBox() {
        listSomeString.add("-");
        listSomeString.add("Snowboarding");
        listSomeString.add("Rowing");
        listSomeString.add("Knitting");
        listSomeString.add("Speed reading");
//
        someComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        someComboBox.setFont(new Font("Serif", Font.BOLD, 16));
        someComboBox.setEditable(true);
        someComboBox.getEditor().getEditorComponent().setBackground(Color.YELLOW);
        ((JTextField) someComboBox.getEditor().getEditorComponent()).setBackground(Color.YELLOW);
//
        editableComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        editableComboBox.setFont(new Font("Serif", Font.BOLD, 16));
        editableComboBox.setEditable(true);
        JTextField text = ((JTextField) editableComboBox.getEditor().getEditorComponent());
        text.setBackground(Color.YELLOW);
        JComboBox coloredArrowsCombo = editableComboBox;
        Component[] comp = coloredArrowsCombo.getComponents();
        for (int i = 0; i < comp.length; i++) {
            if (comp[i] instanceof MetalComboBoxButton) {
                MetalComboBoxButton coloredArrowsButton = (MetalComboBoxButton) comp[i];
                coloredArrowsButton.setBackground(null);
                break;
            }
        }
//
        non_EditableComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        non_EditableComboBox.setFont(new Font("Serif", Font.BOLD, 16));
//
        frame = new JFrame();
        frame.setLayout(new GridLayout(0, 1, 10, 10));
        frame.add(someComboBox);
        frame.add(editableComboBox);
        frame.add(non_EditableComboBox);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocation(100, 100);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        UIManager.put("ComboBox.background", new ColorUIResource(Color.yellow));
        UIManager.put("JTextField.background", new ColorUIResource(Color.yellow));
        UIManager.put("ComboBox.selectionBackground", new ColorUIResource(Color.magenta));
        UIManager.put("ComboBox.selectionForeground", new ColorUIResource(Color.blue));
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                MyComboBox aCTF = new MyComboBox();
            }
        });
    }
} 
```

# sqlite - .APP 包中的 Mac App Store 沙盒和只读 SQLite DB

> ID：11420219
> 
> 赞同：0
> 
> 时间：2012-07-10T19:09:33.683
> 
> 标签：sqlite, mac-app-store, readonly, sandbox

我正在使用 Mac App Store 沙盒，但有一个应用程序被商店拒绝，原因是检测到对位于我的 .APP 包中的 SQLite 数据库文件的读/写访问。但是，我只需要对该文件的读取权限，因此 .APP 包是一个很好的位置。我正在使用 FMDB，它默认使用**sqlite3_open**打开 SQLite 数据库，除非您调用 FMDB 的 openWithFlags: 方法，而是使用*flags*参数调用**sqlite3_open_v2 。**

 *我的问题：如果我使用带有**SQLITE_OPEN_READONLY标志的****sqlite3_open_v2**，它是否等同于文件系统只读访问？如果对数据库的只读访问与文件系统只读访问不同，则应用程序将再次被拒绝。**SQLITE_OPEN_READONLY**的 SQLite 文档状态（[http://www.sqlite.org/c3ref/open.html](http://www.sqlite.org/c3ref/open.html)）：

 *****“数据库以只读模式打开。如果数据库不存在，则返回错误。”*

但是，这似乎并没有回答我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:17:17.307

我提交了带有 SQLITE_READ_ONLY 标志的应用程序，该应用程序被 App Store 接受。这让我相信 SQLITE_OPEN-READONLY 标志等同于文件系统只读模式。*****

# jakarta-ee - EJB/MDB 中的多线程

> ID：11420220
> 
> 赞同：0
> 
> 时间：2012-07-10T19:09:41.037
> 
> 标签：jakarta-ee, ms-access, ejb, java.util.concurrent

有没有办法在单个 EJB 执行中运行多个线程？

我要做的本质上是一个 ETL 过程：`onMessage`MDB ( `@MessageDriven`) 的方法将运行一个查询，然后启动多个线程以将行插入到某个目标表中（所有本地 JDBC，而不是 JPA。）

它也可以很容易地成为`@Stateless`会话 bean。

问题是——你能`Executors.newFixedThreadPool`在 EJB 中使用吗？即使根据规范它不是严格合法的，如果后台线程没有访问任何 Java EE / 容器管理的资源，你能侥幸逃脱吗？

如果没有，有没有更好的方法来做到这一点？我知道`@Async`但会失去对每个作业允许的线程数的控制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:23:52.620

实际上，是的，您可以`Executors.newFixedThreadPool`在 EJB 内部使用。EJB 规范限制了 EJB 可以做什么，因为它可能会导致 Java EE 服务（对您的情况而言不是问题）和服务器本身消耗的资源出现问题。您需要小心后者，以某种方式确保如果您遇到 MDB 活动的“风暴”，您最终不会创建超过 JVM 可以处理的线程。

# scala - 项目目录外的`sbt run`

> ID：11420221
> 
> 赞同：22
> 
> 时间：2012-07-10T19:09:44.567
> 
> 标签：scala, sbt

当我想运行我的 Scala 项目时，我`cd`到项目目录并执行

```
$ sbt "run arg1" 
```

如何从项目目录之外执行相同的操作？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-10T19:36:18.153

我的回答受到了这个更普遍的问题的启发：[如何从 Linux shell 运行具有与当前工作目录不同的工作目录的程序？](https://stackoverflow.com/questions/786376/how-do-i-run-a-program-with-a-different-working-directory-from-current-from-lin)

```
(cd myPath/; sbt "run arg1") 
```

或者

```
(cd myPath/ && exec sbt "run arg1") 
```

# css - 显示：阻止空格

> ID：11420224
> 
> 赞同：0
> 
> 时间：2012-07-10T19:09:51.357
> 
> 标签：css

根据这篇 quirksmode 文章，[http: //www.quirksmode.org/css/display.html](http://www.quirksmode.org/css/display.html)

> 块的上下都有一些空格，并且不允许其旁边有任何 HTML 元素，除非是有序的

上面或下面的空白是以像素表示还是只是“空白”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:13:11.580

在给定的上下文中，“空白”是一个严重的误称。文本中的空白不应*直接*干扰非内联块框的布局；您应该在块框之间看到的是*边距*（通常是所说的框），它们是完全不同的。

边距确实以像素为单位。事实上，它们可以用任何 CSS 长度单位来表示；请参阅规范中的[`margin`属性](http://www.w3.org/TR/CSS21/box.html#margin-properties)。您不直接为内联流动的元素指定空白的像素长度；这通常由控制`font-size`，但是在使用完全不相关的块框时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:12:45.270

“空白”是元素的边距，可以通过任何标准 CSS 单位（例如 px、em、% 等）控制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:14:22.250

您可以使用 CSS 元素的 padding 或 margin 属性来指定这样的东西（在任何 CSS 单位中，包括像素）。你们许多人指定了类似的东西：

```
.class 
{
   padding-left: 4px;
   padding-top: 3px;
} 
```

padding 和 margin 之间的区别与显示有关。padding 属性在元素和它的邻居之间放置了一些“空白”（相当清晰的空间，元素后面的任何东西都会显示在那里）。边距会增加元素围绕其内容的大小；额外的空间将显示为当前元素具有的任何背景。

# primes - 用于 long long（64 位）素性测试的 RTU 工具

> ID：11420227
> 
> 赞同：0
> 
> 时间：2012-07-10T19:09:54.383
> 
> 标签：primes

我有一个简单的问题，但不知何故未能正确解决：

我想测试 long long 整数（64 位）的素数。素数要求来自几个哈希值的混合；如果不遵守，则结果输出中会出现某种“回声”，这会降低散列公式的分布特性。

我有一些有趣的候选人，但在这个阶段无法测试他们的原始性。

我找到了一个网站，它提出了这样的建议：输入一个数字，它提供了下一个质数值。问题是，该网站仅适用于 32 位范围限制内的值。

我一直在为同一个问题漫游，并且已经被问过好几次了。但是，到目前为止，我一直在咨询的所有答案都只指向方法和算法（例如 miller rabin 或 AKS），带有隐藏的“自己动手”标签。

这不是我要找的。从现在开始，我不需要每天定期测试素数，也不需要为大量的候选人测试。我现在只是有这个需求，而且对于非常有限的候选人。因此，只回答这个问题的即用型工具（最好是在线工具）会更符合要求。

但这存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:14:33.893

你可以在[http://www.alpertron.com.ar/ECM.HTM](http://www.alpertron.com.ar/ECM.HTM)输入你的号码，它会告诉你它是否是素数，如果不是，它会告诉你它的因数。[或者，您可以使用http://www.wolframalpha.com](http://www.wolframalpha.com)上的 Factors[n] 函数，它做同样的事情。两者都可以快速处理 64 位整数。

# robots.txt - Robots.txt 语法不理解

> ID：11420230
> 
> 赞同：16
> 
> 时间：2012-07-10T19:10:08.943
> 
> 标签：robots.txt, google-search-console

我很久以前向 Google 提交了我的 robots.txt 文件，但它仍然给了我第一行无法理解的语法。

谷歌搜索后最常见的问题是谷歌添加了“？” 在行的开头，但它没有对我这样做。

robots.txt 的网址是

www.leisurepursuits.co.uk/robots.txt

错误是：

第 1 行：用户代理：* 语法不理解

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-18T07:15:35.973

显示此错误是因为预期的 robots.txt 文件格式是以 UTF-8 编码的纯文本。该文件由 CR、CR/LF 或 LF 分隔的记录（行）组成。

如果字符编码不是 UTF-8 的子集，则您的 robots.txt 文件被错误地解析。

[首先通过选择第二个选项“查看源代码”来检查http://www.asymptoticdesign.co.uk/cgi-bin/check-url.pl](http://www.asymptoticdesign.co.uk/cgi-bin/check-url.pl)中的 robots.txt 网址，看看它是否响应成功。

现在再次上传您的 robots.txt 文件。如前所示，它不会显示错误。

# c - GTK 默认文件->退出行为

> ID：11420235
> 
> 赞同：0
> 
> 时间：2012-07-10T19:10:22.943
> 
> 标签：c, gtk, gtkmm

我为窗口的 F​​ile->Quit 按钮编写了一个事件事件处理程序：

```
void on_file_quit() {
  int err = pthread_cancel( work ); 
  if (err) {
     std::cerr << "no thread to cancel\n";
  }
  else { 
    pthread_join( work, NULL );
  }
} 
```

以这种方式实例化它：

```
pfile_quit->signal_activate().connect( sigc::ptr_fun(on_file_quit) ); 
```

我想在 on_file_quit() 结束时关闭窗口，就像按下窗口顶部的关闭按钮一样。我还没有在任何地方找到解决方案。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:20:45.297

感谢您的回复。会调用`Gtk::Widget::hide()`关闭窗口以便我可以退出应用程序吗？我的解决方案是简单地调用窗口的析构函数，如下所示：

```
void on_file_quit() {
  int err = pthread_cancel( work ); 
  if (err) {
     std::cerr << "no thread to cancel\n";
  }
  else { 
    pthread_join( work, NULL );
  }
  delete pwindow;
  pwindow = NULL; 
} 
```

然后我将此处理程序连接到 x 按钮：

```
 g_signal_connect (pwindow->gobj(), "delete_event", G_CALLBACK (on_file_quit), NULL); 
```

我无法弄清楚如何在 gtkmm 中执行此操作。我对这个解决方案很满意，但我不知道它是最安全/最标准的。

这也有效：`pwindow->hide()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:34:01.063

您可以使用 Gtk::Widget::hide() 关闭窗口。如果您想做与单击 X 按钮（发送 delete_event 信号）时发生的相同的事情，只需直接调用您的 on_delete_event() 处理程序。

顺便说一句，您不是在“实例化”信号处理程序。您正在连接信号处理程序。此外，这是 gtkmm，而不是 GTK+。

# java - 拦截发送到 Windows 打印机的数据（使用 RedMon）

> ID：11420237
> 
> 赞同：8
> 
> 时间：2012-07-10T19:10:37.953
> 
> 标签：java, windows, printing, postscript, redmon

我需要拦截发送到 Windows 上的 ESC/POS 打印机的数据并对其进行分析。

所以我想以纯文本形式获取数据，以便提取并理解发送到打印机的信息。

目前，我已经尝试使用 RedMon 将数据流发送到打印机端口。但是发送的数据是光栅图形的形式，即要打印的点，嵌入在 ESC/POS 命令中。

所以我想知道是否有人可以建议我如何获取文本格式的打印数据，以便能够从中提取一些信息。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-30T08:32:10.440

*发送*到 ESC/POS 打印机的数据是嵌入了***ESC*** /POS 命令的光栅数据。这是 ESC/POS 打印机驱动程序根据其输入生成的内容。这就是 RedMon 为您捕获的内容。

似乎您想查看*发送到打印机驱动程序的输入*。这意味着您必须找出哪些应用程序确实使用了打印机，并且您必须拦截到达打印机驱动程序的内容。

您没有说是否要在“实时”环境中设置拦截，或者是否仅用于临时测试。如果您想临时测试，您也可以执行以下步骤：

1.  暂停打印队列（上方屏幕截图，下方）。
2.  可选：将驱动程序从 ESC/POS 更改为 PostScript 或 Microsoft XPS。如上所述，在打印机属性对话框上的同一“高级”选项卡上执行此操作。（右下方截图）。
3.  打印。
4.  检索在假脱机目录中等待的假脱机文件。在 Windows 8 上，默认情况下为*C:\Windows\System32\spool\PRINTERS*。假脱机文件被命名`NNNNN.spl`，其中 NNNNN 是当前打印作业的编号。
5.  分析 PostScript 或 XPS 数据。

**请参阅以下 3 个屏幕截图：**

![](../Images/0c0f386e1890cdb1f7ae28aff632d66c.png)

![](../Images/2030cd065b45ededc90ed16258053a1e.png)  ![](../Images/17f17a9eb45d032e493e7682b921f600.png)

* * *

但是，如果您...会更容易（而不是使用 RedMon）

*   ...只需启用名为*“保留打印的文档”*的打印机驱动程序设置：转到打印队列属性 => 选择“高级”选项卡 => 启用相应的复选框（见上面的左侧屏幕截图）；

*   ...鱼从 Windows 打印假脱机目录中假脱机打印作业；

*   ...分析您的`NNNNN.spl`文件：

    *   在 Windows 8 上，这将是一个 XPS 文件。将其重命名为 NNNNN.xps，您可以使用内置的 XPS 查看器打开它。

    *   在以前的 Windows 版本中，`NNNNN.spl`将具有相应打印机驱动程序的文件格式（PostScript 用于 PostScript 驱动程序，XPS 用于 Microsoft XPS 打印机，ESC/POS 用于您的打印机，...）。相应地重命名它并在 XPS 或 PostScript 查看器中打开它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T01:41:28.580

如果您只想捕获，您可以创建一个指向工作站 IP 的 TCP/IP 打印机端口并运行我的 vclpdcap 工具。它监控 9100 或 515（RAW 或 LPR）并捕获数据并将其写入文件。

看看这里，如果您需要更多指导，请告诉我。

更新：[http ://www.ballisticecho.com/articles/print-capture-lpd-9100](http://www.ballisticecho.com/articles/print-capture-lpd-9100)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T02:56:09.983

您可以将 Epson POS 打印机置于调试模式，它们将打印出传入数据的 HEX 转储。请参阅此 pdf 的第 88 页：[http ://www.pos.epson.com/epsonexpertTSG/Templates/POS_Developers_Details.aspx?NRMODE=Published&NRORIGINALURL=%2fdevelopers%2ftechresdetails%2ehtm%3fproductpk%3d642&NRNODEGUID=%7b934F5A6D-E01A-40B1-B2B0 -648C1EC68047%7d&NRCACHEHINT=NoModifyGuest&productpk=642](http://www.pos.epson.com/epsonexpertTSG/Templates/POS_Developers_Details.aspx?NRMODE=Published&NRORIGINALURL=%2fdevelopers%2ftechresdetails%2ehtm%3fproductpk%3d642&NRNODEGUID=%7b934F5A6D-E01A-40B1-B2B0-648C1EC68047%7d&NRCACHEHINT=NoModifyGuest&productpk=642)

为了理解这一点，如果您注册并同意他们的条款，您可以获得 Epson ESC/POS SDK：[https ://www.epsonexpert.com/ee/prelogin/registration.htm](https://www.epsonexpert.com/ee/prelogin/registration.htm)

# sql - SQL删除分组条件

> ID：11420238
> 
> 赞同：1
> 
> 时间：2012-07-10T19:10:39.513
> 
> 标签：sql, sql-server-2008, tsql

使用了游标，但它很慢并且似乎是 SQL 作业中的一个大瓶颈。基本上，这是一项清理工作，从以前按产品 ID 和帐户可见性分组的特定来源中删除除前 X 配件（按销售排名排序）之外的所有配件。

该命令基本上是在游标循环的每次迭代中构建并`exec`手动编辑的。

该`vis`列指的是多个租户，其行为类似于位掩码，例如两个租户可能拥有相同的产品。

```
declare @prodid int
declare @cnt    int
declare @vis    bigint
declare @cmd    varchar(600)
declare @clause varchar(600)

-- find records with more than X excess accessories
declare cur cursor for
    select pa.prodid, 'cnt' = count(*), vis from [accessories] pa
    group by prodid, vis
    having count(*) > X -- e.g. 5 
```

示例输出可能看起来像

```
prodid  cnt     vis
123     6       128
234     8       260
345     10      512 
```

在 X=5 的情况下，`salesrank`123 的最后 1 项将被删除，234 的最后 3 项和 345 的最后 5 项将被删除。**这可以使用`DELETE`语句完成，同时在某些嵌套选择中包含分组吗？**

```
open cur

fetch next from cur into @prodid, @cnt, @vis
while @@fetch_status = 0
begin
    -- a clause that ends up looking like this:
    -- 12345 and vis = 128 -- OR -- 23456 and vis is null   
    set @clause = convert(varchar(14), @prodid) + ' and vis ' + case 
        when @vis is null then ' is null ' 
        else ' = ' + cast(@vis as varchar) end

    -- delete all but the top X from source=2 and that match prodid and vis
    set @cmd = 'delete from [accessories] 
        where source = 2 and prodid=' + @clause +
        ' and access_prodid in (select top ' + convert(varchar(5), @cnt - X) + 
        ' access_prodid from [accessories] where prodid = ' 
        + @clause + ' and source = 2 order by salesrank)'

    exec(@cmd)
    fetch next from cur into @prodid, @cnt, @vis
end 
close cur
deallocate cur 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:14:39.150

尝试这个：

```
WITH DupData AS
(
    SELECT  *,
      ROW_NUMBER() 
          OVER(PARTITION BY pa.prodid, pa.vis ORDER BY salesrank) Position
      FROM [accessories] pa
      WHERE pa.source = 2
)
DELETE 
    FROM DupData
 WHERE Position > 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:17:25.777

我会通过使用 windows 函数来识别要删除的行来做到这一点：

```
with t as (select pa.*,
                  row_number() over (partition by prodid, vis order b salesrank) as sr
           from [accessories] pa
          )
delete from pa
from t
where pa.prodid = t.prodid and pa.vis = t.vis and pa.salesrank = t.salesrank 
```

如果 pa 表中有唯一的 id，那么您可以使用它来代替更复杂的 where 语句。这假设 salesrank 在每个 prodid/vis 组中是唯一的。

# php - 通过外键从数组在 PHP 中创建嵌套数组

> ID：11420244
> 
> 赞同：0
> 
> 时间：2012-07-10T19:11:01.370
> 
> 标签：php, recursion

我正在做 MySQL 查询以获取列表文件/目录。每个都有一个 id，并且可选地和“parent_id”将每个文件或目录与其包含的目录相关联。不过，它是文件和目录的平面数组。我如何使用 php 将其构建成一个类似这样的嵌套数组，其中每个“文件”可以递归地有多个子“文件”：

```
[{"Files":{"id": "1","name":"Parent", "parent_id":"null" "Files":{"id": "2","name":"Child", "parent_id":"1"}}, {"Files":{"id": "3","name":"Another top level dir", "parent_id":"null"}] 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:14:33.357

您需要的是一个递归函数来组装您的嵌套数组。以下是一些 可以[帮助](https://stackoverflow.com/questions/2648968/what-is-a-recursive-function-in-php)您[入门的](http://www.tuxradar.com/practicalphp/4/18/0)[链接](http://devzone.zend.com/283/recursion-in-php-tapping-unharnessed-power/)。

# java - 如何通过Java中的套接字发送文件列表

> ID：11420250
> 
> 赞同：10
> 
> 时间：2012-07-10T19:11:33.843
> 
> 标签：java, sockets

我已使用[此处](http://forums.devx.com/showthread.php?t=148749)的代码通过套接字发送单个文件。但是，我需要能够通过套接字发送多个文件（基本上是目录中的所有文件）并让客户端识别文件之间的分隔方式。坦率地说，我完全不知道该怎么做。任何提示都会有所帮助。

**注意 1：**我需要一种将文件发送到一个连续流中的方法，客户端可以将其分离为单个文件。它不能依赖于客户的个别请求。

**注意 2：**要回答一个问题，我很确定我会在评论中看到，不，这**不是**家庭作业。

**编辑**有人建议我可以在文件本身之前发送文件的大小。我该怎么做，因为通过套接字发送文件总是在预定的字节数组或单个字节中完成，而不是由返回的 long`File.length()`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-10T19:46:58.607

这是一个完整的实现：

**发送方：**

```
String directory = ...;
String hostDomain = ...;
int port = ...;

File[] files = new File(directory).listFiles();

Socket socket = new Socket(InetAddress.getByName(hostDomain), port);

BufferedOutputStream bos = new BufferedOutputStream(socket.getOutputStream());
DataOutputStream dos = new DataOutputStream(bos);

dos.writeInt(files.length);

for(File file : files)
{
    long length = file.length();
    dos.writeLong(length);

    String name = file.getName();
    dos.writeUTF(name);

    FileInputStream fis = new FileInputStream(file);
    BufferedInputStream bis = new BufferedInputStream(fis);

    int theByte = 0;
    while((theByte = bis.read()) != -1) bos.write(theByte);

    bis.close();
}

dos.close(); 
```

**接收方：**

```
String dirPath = ...;

ServerSocket serverSocket = ...;
Socket socket = serverSocket.accept();

BufferedInputStream bis = new BufferedInputStream(socket.getInputStream());
DataInputStream dis = new DataInputStream(bis);

int filesCount = dis.readInt();
File[] files = new File[filesCount];

for(int i = 0; i < filesCount; i++)
{
    long fileLength = dis.readLong();
    String fileName = dis.readUTF();

    files[i] = new File(dirPath + "/" + fileName);

    FileOutputStream fos = new FileOutputStream(files[i]);
    BufferedOutputStream bos = new BufferedOutputStream(fos);

    for(int j = 0; j < fileLength; j++) bos.write(bis.read());

    bos.close();
}

dis.close(); 
```

我没有测试它，但我希望它会工作！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T19:26:31.303

您可以在每个文件之前先发送文件的大小，这样客户端就会知道当前文件何时结束并期待下一个（大小）。这将允许您对所有文件使用一个连续的流。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:27:00.233

一个非常简单的方法是在发送每个文件之前发送文件长度，以便您可以确定文件之间的分隔。

当然，如果接收进程是Java，你可以只发送Objects。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T19:20:58.357

您可以在客户端压缩文件并将此压缩流发送到服务器。

例如：[http ://www.exampledepot.com/egs/java.util.zip/CreateZip.html](http://www.exampledepot.com/egs/java.util.zip/CreateZip.html)

和 ...

```
OutputStream output = connection.getOutputStream();
ZipOutputStream out = new ZipOutputStream(output); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T19:22:03.490

也许最快的方法是自动将您目录中的文件压缩和解压缩到一个文件中，请参见 java.util.zip 包

# c# - Web 应用程序中的 BeginGetResponse

> ID：11420252
> 
> 赞同：1
> 
> 时间：2012-07-10T19:11:36.463
> 
> 标签：c#, multithreading, .net-3.5

我想使用 BeginGetResponse 方法来调用我在列表中保存的许多 URL。我有两个关于如何实施的问题：

1.  根据[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse(v=vs.95).aspx中的示例](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse(v=vs.95).aspx)

我们用：

```
public static ManualResetEvent allDone= new ManualResetEvent(false); 
```

因为它与其他线程共享，所以在 Web 应用程序中使用静态成员是否明智？这会导致问题吗？

1.  我怎么知道所有回调何时完成？我需要对结果做一个总结报告

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:45:15.357

虽然您可以使用事件，但我建议在[类](http://msdn.microsoft.com/en-us/library/dd321401)[`Task<T>`](http://msdn.microsoft.com/en-us/library/dd321424.aspx)上使用和[`FromAsync`方法](http://msdn.microsoft.com/en-us/library/dd321335)，如下所示：[`TaskFactory`](http://msdn.microsoft.com/en-us/library/dd321401)

```
// Execution of tasks starts here because of the
// call to ToArray.
Task<WebResponse>[] tasks = uris.Select(u => {
    // Create the request.
    WebRequest req = ...;

    // Make the call to return the response asynchronously with
    // a Task.
    return Task.Factory.FromAsync(req.BeginGetResponse,
        req.EndGetResponse, null);
}).ToArray(); 
```

一旦你有了它，你可以使用类上的[方法](http://msdn.microsoft.com/en-us/library/dd321473.aspx)`Task<T>`轻松地等待所有实例，如下所示：[`ContinueWhenAll`](http://msdn.microsoft.com/en-us/library/dd321473.aspx)`TaskFactory`

```
Task.Factory.ContinueWhenAll(tasks, t => {
     // Note that t is an array of Task, so you have to cast 
     // each element to a Task<WebRequest>.
     // Process all of them here.
}); 
```

请注意，上面的返回 a[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)完成后您将不得不等待或继续（如果您担心通知）。

如果您使用的是 .NET 4.5，则不需要使用类`ContinueWhenAll`上的方法`TaskFactory`，但可以使用类上的[`WhenAll`方法](http://msdn.microsoft.com/en-us/library/hh194766%28v=vs.110%29.aspx)`Task`来执行工作：

```
// Note that work does not start here yet because of deferred execution.
// If you want it to start here, you can call ToArray like above.
IEnumerable<Task<WebResponse>> tasks = uris.Select(u => {
    // Create the request.
    WebRequest req = ...;

    // Make the call to return the response asynchronously with
    // a Task.
    return Task.Factory.FromAsync(req.BeginGetResponse,
        req.EndGetResponse, null);
});

// Execution will start at this call:
Task<Task<WebRequest>[]> allTasks = Task.WhenAll(tasks);

// Continue or wait here. 
```

* * *

请注意，上面的[内容是在显示正在使用 .NET 3.5](https://stackoverflow.com/questions/11420252/begingetresponse-in-web-application/11420753#comment15065512_11420753)之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:30:31.197

我猜你正在尝试做这样的事情：

```
int total = urls.Count;
ManualResetEvent evt = new ManualResetEvent();
ConcurrentBag<WebResponses> responses = new ConcurrentBag<WebResponse>();

foreach(Uri in uri)
{
    HttpWebRequest req = ...;
    req.BeginGetResponse(res=>
    {
        WebResponse res = req.EndGetResponse();

        // do what you need with the response.
        // maybe add it to a collection so you can report on it later:
        responses.Add(res);

        if(Interlocked.Decrement(ref total) == 0)
        {
            // this was the last response. set event.
            evt.Set();
        }
    }, null);
}

evt.Wait();

foreach(WebResponse res in responses)
{
    // report something about the response.
} 
```

请注意，最佳工作流程不需要事件。为了获得额外的功劳，请一起摆脱它并将您的最终逻辑移动到设置事件的 if 中。

此外，此代码未经测试且缺乏错误处理，因此如果您使用它，请务必添加它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:56:19.687

1.  如果你想在主线程中等待完成，那么这个解决方案不是很好。第一个请求会将事件的状态更改为“设置”。因此，主线程将在第一个请求完成后继续执行。
2.  建议您使用[CountdownEvent](http://msdn.microsoft.com/ru-ru/library/system.threading.countdownevent)：

    ```
     using(var countdownEvent = new CountdownEvent(list.Count))
       {
           // launch requests with countdownEvent.Signal(); in the end
           countdownEvent.Wait();
       } 
    ```

    您必须在 RequestState 中存储对 countdownEvent 的引用。另外，不要忘记控制超时 - 使用`ThreadPool.RegisterWaitForSingleObject`.

# jquery - jQuery UI Dialogr() 插件销毁事件

> ID：11420254
> 
> 赞同：1
> 
> 时间：2012-07-10T19:11:39.210
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

最近我一直在使用 jQuery UI dialogr() 插件，虽然我遇到了关于 $(foo).dialogr(args) 函数的销毁和重新调用的问题，因为它没有创建对话框被破坏后再次。

```
$(document).ready(function(){
    $('#init').click(function(){
        $('.test').dialogr();
    });
    $('#destroy').click(function(){
        $('.test').each(function(){
            $(this).dialogr('destroy');
        })
    });
}); 
```

以下是我用来解释发生了什么的简单对话框片段代码

```
<a href="#" id="init">generate</a>
<a href="#" id="destroy">destroy</a>
<div class="test" title="test dialog 1">
    test dialog 1
</div>
<div class="test" title="test dialog 2">
    test dialog 2
</div> 
```

说明：销毁对话框后，按generate不会再次生成它们，不会返回任何错误，不胜感激。示例[http://jsfiddle.net/2zGWZ/](http://jsfiddle.net/2zGWZ/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:34:09.887

[如您在此处](http://jsfiddle.net/2zGWZ/2/)`dialog`看到的，使用 ui可以正常工作。 也许这是一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:21:24.867

您需要`dialogr`从对象中删除属性`.data()`：

```
 $(this).dialogr('destroy');
     delete $(this).data().dialogr;   //deleting 'dialogr' property 
```

[现场演示](http://jsfiddle.net/2zGWZ/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:43:34.827

感谢工程师，我想出了一个可以很容易地嵌入到 dialogr() 插件中的解决方案，只需使用编辑器打开 ui.dialogr.js 并搜索：

```
this.element.unbind('.dialog').removeData('dialog') 
```

然后将其替换为

```
this.element.unbind('.dialogr').removeData('dialogr') 
```

对于更复杂的对话框，问题将得到解决。

# ios - 更改设备方向时图像被拉伸，模式设置为重绘

> ID：11420255
> 
> 赞同：1
> 
> 时间：2012-07-10T19:11:40.527
> 
> 标签：ios, uiscrollview, uiimageview, uiimageorientation

我有一个`UIImageView`嵌入`UIScrollView`...`image`加载时`zoom scale`设置为可见的最大数量`image`，但是当设备旋转时，外观不会保持并最终出现拉伸。视图模式设置为`redraw`。

```
- (void)viewDidLoad
{
[super viewDidLoad];
self.scrollView.delegate = self;
// get the url of the photo from flickr
NSURL* url = [FlickrFetcher urlForPhoto:self.photo format:FlickrPhotoFormatLarge];
// set the scrollview's title to be the title of the picture
self.title = [self.photo objectForKey:FLICKR_PHOTO_TITLE];
// convert the url into an image
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *image = [UIImage imageWithData:data];
// set the image as the image in the imageView
[self.imageView setImage:image];
// we will be scrolling over the size of the image
self.scrollView.contentSize = self.imageView.image.size;
}

-(void)viewWillAppear:(BOOL)animated
{
[super viewWillAppear:animated];
UIInterfaceOrientation currOrient = self.interfaceOrientation;
self.imageView.frame = CGRectMake(0, 0, self.imageView.image.size.width, self.imageView.image.size.height);
if (currOrient == UIInterfaceOrientationPortrait || currOrient == UIInterfaceOrientationPortraitUpsideDown)
    [self.scrollView setZoomScale: self.scrollView.frame.size.height / self.imageView.frame.size.height];
else {
    [self.scrollView setZoomScale: self.scrollView.frame.size.width / self.imageView.frame.size.width];

}
//     [self.imageView setNeedsDisplay];
// [self.scrollView setNeedsDisplay]; 
```

}

```
-(void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale
{
scrollView.transform = CGAffineTransformIdentity;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:22:34.967

在您的控制器中，您将必须实现：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration 
```

将缩放比例设置为 viewWillAppear 的动画。

# objective-c - “-Weverything”在每个 NSAssert 处放置“缺少 Varargs 参数，但作为扩展可以容忍”警告

> ID：11420257
> 
> 赞同：3
> 
> 时间：2012-07-10T19:11:45.723
> 
> 标签：objective-c, cocoa, llvm, clang

将新的添加`-Weverything`到 Clang's`other warning flags`后，我开始为我的所有**NSAsserts**收到此警告：

```
Varargs argument missing, but tolerated as an extension 
```

如何解决此问题，或者取消此警告？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T19:23:12.897

如果您真的想避免此警告，请将 a`nil`作为额外参数。看起来它`-Wpedantic`不喜欢没有值的可变参数参数，所以如果你有`NSAssert(condition, @"static string")`你没有为可变参数点提供参数（`NSAssert`看起来像`NSAssert(condition, format, ...)`）。通过坚持`nil`到底，您为 varargs 参数提供了一个值，但它没有任何成本。

# .net - 为什么 DataGridView 列相互堆叠？

> ID：11420258
> 
> 赞同：0
> 
> 时间：2012-07-10T19:11:46.977
> 
> 标签：.net, datagridview, delphi-prism, datagridviewcolumn, oxygene

在 winform 上，我有一个 DataGridView 和其中的列。出于某种奇怪的原因，当我运行我的程序时，这些列在运行时彼此堆叠在一起。无论我做什么，都不会改变。我不知道我是在设置某些属性还是什么。

**在设计期间：**

![在此处输入图像描述](../Images/541741f93edbebb8f59476847b1f653d.png)

**在运行期间：**

![在此处输入图像描述](../Images/94ee8f3db2004ee2bc35f9f92c814700.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:19:12.827

正如 lc 所建议的，需要设置列宽和最小宽度。我将列的宽度设置为 100，最小宽度设置为 5。当我将最小宽度更改为 100 时，它起作用了。

谢谢lc。

# c# - GridView OnRowCommand 第一次未触发

> ID：11420260
> 
> 赞同：2
> 
> 时间：2012-07-10T19:11:59.300
> 
> 标签：c#, asp.net, gridview

这可能看起来像重复，但我不这么认为。我已经搜索过stackoverflow，可能还不够。

这是我的挑战：

```
<asp:LinkButton runat="server" ID="DeleteRow" CommandName="deleterow" 
   CommandArgument='<%# Eval("ID") %>' Text="Delete" 
   OnClientClick="return confirm('Are you sure you want to delete this record?');" /> 
```

如果您第一次单击该链接，则不会触发 OnRowCommand。当您第二次单击它时，它会起作用。

我查看了来源，我有这些差异。

```
//When you first load the page: the GUID is the PK for that row 
1\. javascript:__doPostBack('ctl00$content$gvSchoolClasses$58fd1759-f358-442e-bf73-2e9cedfc27e8$DeleteRow','')

//After the link was clicked the first time, the link changed and the ID empty, but works
2\. javascript:__doPostBack('ctl00$content$gvSchoolClasses$ctl02$DeleteRow','') 
```

我从点击前和点击后`href`复制了两个代码。`asp:LinkButton`

怎么了？我的页面上只有另一个事件`RowDataBound`。

```
 protected void gvSchoolClasses_RowDataBound(object sender, GridViewRowEventArgs e)
  {
        e.Row.ID = Guid.NewGuid().ToString();
  }

  protected void Page_Load(object sender, EventArgs e)
  {
        CheckAuthentication();

        if (!Page.IsPostBack)
        {
            ClassesAcademicYearLabel.Text = "- Year " + Setting.Year;
            //FillClassesList();  //filling some combo boxes. Have checked the codes here too
            //FillLettersList();  //they didn't affect the Grid
            FillGrid();
        }

        ClassErrorLabel.Visible = false;

  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:35:16.197

通过在事件中设置行的 ID 属性`RowDataBound`，您已经创建了正在观察的问题。

由于在`RowDataBound`页面控件已添加到集合之后才会触发事件，因此 ASP.NET 无法更新已计算的客户端引用。因此，该命令不会以您期望的方式被触发。

我注意到您已经将`CommandArgument`属性设置为事件中生成的 ID `RowDataBound`，这也可能是您的问题的一部分（取决于事件触发的顺序；我手边没有管道图）。

编辑：对此的快速解决方法可能是简单地将 ClientID 属性（对不起，不是确切的名称，但智能感知应该让你了解它的其余部分）到某种手动，而不是自动确定。这样，您设置的 ID 就不会被框架更改。

要详细说明您看到此问题的原因，请考虑提供的客户端 ID：

`ctl00$content$gvSchoolClasses$ctl02$DeleteRow`

`DeleteRow`通过获取声明的 ID（JS 代码可以确信传递此字符串`getElementById`会以一致、可预测的方式运行。

为了能够生成所述ID，层次结构中的所有控件必须已经存在并且由渲染引擎解释。

现在让我们考虑当控件的 ID 属性更改时会发生什么（注意这不是`ClientID`，而只是名称为 的属性`ID`）。

`ctl00$content$gvSchoolClasses$58fd1759-f358-442e-bf73-2e9cedfc27e8$DeleteRow`

您会注意到`cl02`，它现在具有您生成并分配给它的 GUID，而不是行的命名容器 ( )。尝试使用先前分配的 ID 访问此容器的客户端 JS 将感到失望，因为它将不再按预期工作！

当 ASP.NET 控件通过调用来触发回发时`javascript:__doPostBack('ctl00$content$gvSchoolClasses$58fd1759-f358-442e-bf73-2e9cedfc27e8$DeleteRow','')`

回发将发生得很好而且花花公子，但是（您可以通过检查回发的表单参数来验证这一点）当服务器处理请求时，它将尝试（从视图状态）重新水合一个不存在的控件. 因此，它将创建一个新的控件实例（具有正确的 ID），它不知道已发出命令，因此`XXXCommand`永远不会触发事件。由于没有发生数据绑定（它是回发，并且您的代码正确检查了该条件），ID 永远不会重置，并且可以正常触发命令

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:56:18.463

不要更改 RowDataBound 事件中的 Row.ID。要么在网格中更改不同的值，要么只在你的 gridview 标记中执行此操作：

CommandArgument='<%: Guid.NewGuid.ToString(); %>'

如果您想在后面的代码中执行此操作，可以执行以下操作：

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            LinkButton deleteRow = (LinkButton)e.Row.FindControl("DeleteRow");
            if (deleteRow != null)
                deleteRow.CommandArgument = Guid.NewGuid().ToString();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:39:28.000

您需要将行索引设置为链接按钮的 CommandArgument 而不是 guid

正如你所说，它在第二次工作，但 html 如下所示

```
//After the link was clicked the first time, the link changed and the ID empty, but works
2\. javascript:__doPostBack('ctl00$content$gvSchoolClasses$ctl02$DeleteRow','') 
```

# c++ - 是否可以使用输入流读取无穷大或 NaN 值？

> ID：11420263
> 
> 赞同：49
> 
> 时间：2012-07-10T19:12:22.703
> 
> 标签：c++, numeric-limits

我有一些输入要由输入文件流读取（例如）：

`-365.269511 -0.356123 -Inf 0.000000`

当我使用`std::ifstream mystream;`从文件中读取到某些

`double d1 = -1, d2 = -1, d3 = -1, d4 = -1;`

（假设`mystream`已经打开并且文件有效），

`mystream >> d1 >> d2 >> d3 >> d4;`

`mystream`处于失败状态。我希望

`std::cout << d1 << " " << d2 << " " << d3 << " " << d4 << std::endl;`

输出

`-365.269511 -0.356123 -1 -1`. 我希望它改为输出`-365.269511 -0.356123 -Inf 0`。

这组数据是使用 C++ 流输出的。为什么我不能做相反的过程（读入我的输出）？如何获得我想要的功能？

来自 MooingDuck：

```
#include <iostream>
#include <limits>

using namespace std;

int main()
{
  double myd = std::numeric_limits<double>::infinity();
  cout << myd << '\n';
  cin >> myd;
  cout << cin.good() << ":" << myd << endl;
  return 0;
} 
```

输入：`inf`

输出：

```
inf
0:inf 
```

另见：http: [//ideone.com/jVvei](http://ideone.com/jVvei)

与此问题相关的还有`NaN`解析，尽管我没有给出示例。

我在已接受的答案中添加了关于 ideone 的完整解决方案。它还包括对“Inf”和“nan”的配对，这些关键字的一些可能变体可能来自其他程序，例如 MatLab。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T19:55:34.050

**更新**提供了一个简单的测试用例，表明 Boost Spirit 能够处理该领域的所有特殊值。见下文：**提升精神（FTW）**。

## 标准

我能找到的唯一规范信息是在 C99 标准的第 7.19.6.1/7.19.6.2 节中。

遗憾的是，最新的 C++ 标准文档 (n3337.pdf) 的相应部分似乎没有以相同的方式指定对`infinity`, `inf`and or的支持。`NaN`（也许我遗漏了一个引用 C99/C11 规范的脚注？）

## 库实现者

2000 年，Apache libstdcxx 收到[了一份错误报告](https://issues.apache.org/jira/browse/STDCXX-239)，指出

> `num_get<>`facet 的成员没有考虑到`do_get()`特殊的字符串。切面遇到此类字符串时会报告错误。有关允许的字符串列表，请参阅 C99 的 7.19.6.1 和 7.19.6.2。`[-]inf[inity]``[-]nan`

然而，随后的讨论表明（至少对于*命名的`locale`-s*而言）解析特殊值的实现实际上是非法的：

> 查找表中的字符为“0123456789abcdefABCDEF+-”。图书馆问题 221 会将其修改为“0123456789abcdefxABCDEFX+-”。“N”不存在于查找表中，因此 num_get<>::do_get() 的第 2 阶段不允许读取字符序列“NaN”。

## 其他资源

[securecoding.cert.org](https://www.securecoding.cert.org/confluence/plugins/viewsource/viewpagesrc.action?pageId=36929727)明确指出需要以下“合规代码”**以**避免解析*无穷大*或*NaN*。这意味着，一些实现实际上支持这一点——假设作者曾经测试过发布的代码。

```
#include <cmath>

float currentBalance; /* User's cash balance */

void doDeposit() {
  float val;

  std::cin >> val;
  if (std::isinf(val)) {
    // handle infinity error
  }
  if (std::isnan(val)) {
    // handle NaN error
  }
  if (val >= MaxValue - currentBalance) {
    // Handle range error
  }

  currentBalance += val;
} 
```

## 提升精神（FTW）

以下简单示例具有所需的输出：

```
#include <boost/spirit/include/qi.hpp>
namespace qi = boost::spirit::qi;

int main()
{
    const std::string input = "3.14 -inf +inf NaN -NaN +NaN 42";

    std::vector<double> data;
    std::string::const_iterator f(input.begin()), l(input.end());

    bool ok = qi::parse(f,l,qi::double_ % ' ',data);

    for(auto d : data)
        std::cout << d << '\n';
} 
```

输出：

```
3.14
-inf
inf
nan
-nan
nan
42 
```

# 摘要/ TL；博士

我倾向于说 C99 指定 *printf/*scanf 的行为包括*infinity*和*NaN*。遗憾的是，C++11 似乎没有指定它（甚至在存在命名语言环境的情况下禁止它）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-10T19:54:28.953

编写一个带有这样签名的函数：

```
std::istream & ReadDouble(std::istream & is, double & d); 
```

在里面，你：

1.  使用从流中读取字符串`operator>>`
2.  尝试使用各种方法之一将字符串转换为双精度。`std::stod`, `boost::lexical_cast`, 等等...
3.  如果转换成功，则设置双精度并返回流。
4.  如果转换失败，请使用“inf”或“INF”等测试字符串是否相等。
5.  如果测试通过，将双精度设置为无穷大并返回流，否则：
6.  如果测试失败，则在流上设置失败位并返回它。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-10T20:40:03.873

**编辑：**为了避免在 double 周围使用包装器结构，我将 an`istream`封装在包装器类中。

不幸的是，我无法弄清楚如何避免为`double`. 对于下面的实现，我在 周围创建了一个包装器结构`istream`，包装器类实现了输入法。输入法确定否定性，然后尝试提取双精度数。如果失败，它将开始解析。

**编辑：**感谢 sehe 让我更好地检查错误情况。

```
struct double_istream {
    std::istream &in;

    double_istream (std::istream &i) : in(i) {}

    double_istream & parse_on_fail (double &x, bool neg);

    double_istream & operator >> (double &x) {
        bool neg = false;
        char c;
        if (!in.good()) return *this;
        while (isspace(c = in.peek())) in.get();
        if (c == '-') { neg = true; }
        in >> x;
        if (! in.fail()) return *this;
        return parse_on_fail(x, neg);
    }
}; 
```

解析例程的实现比我最初想象的要复杂一些，但我想避免尝试`putback`整个字符串。

```
double_istream &
double_istream::parse_on_fail (double &x, bool neg) {
    const char *exp[] = { "", "inf", "NaN" };
    const char *e = exp[0];
    int l = 0;
    char inf[4];
    char *c = inf;
    if (neg) *c++ = '-';
    in.clear();
    if (!(in >> *c).good()) return *this;
    switch (*c) {
    case 'i': e = exp[l=1]; break;
    case 'N': e = exp[l=2]; break;
    }
    while (*c == *e) {
        if ((e-exp[l]) == 2) break;
        ++e; if (!(in >> *++c).good()) break;
    }
    if (in.good() && *c == *e) {
        switch (l) {
        case 1: x = std::numeric_limits<double>::infinity(); break;
        case 2: x = std::numeric_limits<double>::quiet_NaN(); break;
        }
        if (neg) x = -x;
        return *this;
    } else if (!in.good()) {
        if (!in.fail()) return *this;
        in.clear(); --c;
    }
    do { in.putback(*c); } while (c-- != inf);
    in.setstate(std::ios_base::failbit);
    return *this;
} 
```

此例程与默认`double`输入的行为不同之处在于，`-`如果输入是，例如，则不会使用字符`"-inp"`。失败时，`"-inp"`仍将在流中 for `double_istream`，但对于常规`istream`仅`"inp"`将留在流中。

```
std::istringstream iss("1.0 -NaN inf -inf NaN 1.2");
double_istream in(iss);
double u, v, w, x, y, z;
in >> u >> v >> w >> x >> y >> z;
std::cout << u << " " << v << " " << w << " "
          << x << " " << y << " " << z << std::endl; 
```

我系统上的上述代码段的输出是：

```
1 nan inf -inf nan 1.2 
```

**编辑：**添加一个“iomanip”之类的助手类。当一个对象在链`double_imanip`中多次出现时，它的作用就像一个切换。`>>`

```
struct double_imanip {
    mutable std::istream *in;
    const double_imanip & operator >> (double &x) const {
        double_istream(*in) >> x;
        return *this;
    }
    std::istream & operator >> (const double_imanip &) const {
        return *in;
    }
};

const double_imanip &
operator >> (std::istream &in, const double_imanip &dm) {
    dm.in = &in;
    return dm;
} 
```

然后用下面的代码来试一试：

```
std::istringstream iss("1.0 -NaN inf -inf NaN 1.2 inf");
double u, v, w, x, y, z, fail_double;
std::string fail_string;
iss >> double_imanip()
    >> u >> v >> w >> x >> y >> z
    >> double_imanip()
    >> fail_double;
std::cout << u << " " << v << " " << w << " "
          << x << " " << y << " " << z << std::endl;
if (iss.fail()) {
    iss.clear();
    iss >> fail_string;
    std::cout << fail_string << std::endl;
} else {
    std::cout << "TEST FAILED" << std::endl;
} 
```

上面的输出是：

```
1 nan inf -inf nan 1.2
inf 
```

**来自 Drise 的编辑：**我进行了一些编辑以接受最初未包含的变体，例如 Inf 和 nan。我还把它做成了一个编译的演示，可以在[http://ideone.com/qIFVo](http://ideone.com/qIFVo)查看。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-10T19:39:12.447

只需将变量读入字符串并解析它们。您不能将字符串放入双变量中并期望它们像字符串一样输出，因为如果它有效，则不需要字符串。

类似于：

```
string text;
double d;
while(cin >> text)
{
    if(text == "Inf")       //you could also add it with negative infinity
    {
         d = std::numeric_limits<double>::infinity();
    }
    else
    {
        d = atof(text.c_str());
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-05T09:48:42.130

尽管这个问题已经很老了，但我想贡献最适合我目的的解决方案。如果您考虑使用 Boost，但 Boost Spirit 似乎有点过头了，您可以尝试像这样使用`boost::math::nonfinite_num_put`和`boost::math::nonfinite_num_get`locale facets [1](https://www.boost.org/doc/libs/1_72_0/libs/math/doc/html/math_toolkit/fp_facets.html)：

```
#include <boost/math/special_functions/nonfinite_num_facets.hpp>
#include <iostream>
#include <limits>
#include <sstream>

int main()
{
  std::locale default_locale;
  std::locale tmp_locale(default_locale,
      new boost::math::nonfinite_num_put<char>());
  std::locale upgraded_locale(default_locale,
      new boost::math::nonfinite_num_get<char>());

  double inf = std::numeric_limits<double>::infinity();

  std::stringstream out_s;
  out_s.imbue(upgraded_locale);
  out_s << inf;
  std::cout << out_s.str() << std::endl;
  std::stringstream in_s(out_s.str());
  in_s.imbue(upgraded_locale);
  double check_inf;
  in_s >> check_inf;
  std::cout << (inf == check_inf ? "nice" : "not nice") << std::endl;
  return 0;
} 
```

输出：

```
inf
nice 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T19:38:55.237

您将不得不编写自定义提取函数，因为您的具体实现显然不能正确处理它们。

# jquery - 当背景滑块进入下一个/上一个时如何更改 div 内容

> ID：11420270
> 
> 赞同：0
> 
> 时间：2012-07-10T19:12:46.113
> 
> 标签：jquery, slideshow

如何根据背景页面的背景图片改变一个div的内容？

像这个：

[http://www.sap.com/index.epx](http://www.sap.com/index.epx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:00:40.243

对，然后添加一些方形图标，文本 - 任何你想要的触发器都会改变背景并将 onclick 事件添加到它，如下所示：

```
<div id="myDivTag">
    <img src="/Image/SquareIcon.gif" onclick="changeBackground()" />
</div> 
```

然后修改我的另一篇文章中更改它的代码行，以更改 div 标签：

```
document.getElementById("myDivTag").style.backgroundImage = backImage[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:22:44.627

修改你的下拉列表是这样的：

```
<select id="myDropDown" onchange="changeBackground()">
<option value="0">Image 1</option>
<option value="1">Image 2</option>
</select> 
```

在 head 部分添加一个新的 javascript 函数：

```
var backImage[0] = "/Images/33.jpg";
var backImage[1] = "/Images/34.jpg";    
function changeBackground() {
    if (document.getElementById("myDropDown").value = "0" {
        document.body.background = backImage[1];
    } else {
        document.body.background = backImage[0];
    }
} 
```

# google-app-engine - Go 有哪些方法可以轻松将数据转换为字节或字符串

> ID：11420275
> 
> 赞同：9
> 
> 时间：2012-07-10T19:12:56.743
> 
> 标签：google-app-engine, serialization, data-structures, memcached, go

我一直在使用 Google App Engine Go SDK 开发几个应用程序，它们使用 Memcache 作为从 Datastore 加载数据的缓冲区。由于 Memcache 只能以`[]byte`. 不用说，当我需要重复做这种事情 5 次时，这是相当乏味的。

是否有一种简单的方法可以将可以存储在 Datastore 中的任意结构转换为`[]byte`以便将其存储在 Memcache 中，然后将其加载回来，而无需为 GAE Golang 中的各种结构创建自定义代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T19:47:17.033

[http://golang.org/pkg/encoding/gob](http://golang.org/pkg/encoding/gob)或[http://golang.org/pkg/encoding/json](http://golang.org/pkg/encoding/json)可以将任意数据类型转换为 []byte 切片，因为某些规则适用于被编码的数据结构。您可能希望其中一个 gob 将编码为更小的尺寸，但如果需要，json 更容易与其他语言共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T20:11:26.830

我发现自己也需要同样的东西。所以我创建了一个名为：

## [AEGo/ds](https://github.com/scotch/aego/tree/master/v1/ds)

[文档](http://go.pkgdoc.org/github.com/scotch/aego/v1/ds)| [来源](https://github.com/scotch/aego/tree/master/v1/ds)

`go get github.com/scotch/aego/ds`

它使用与它相同的 API，`"appengine/datastore"`因此它可以作为替代品使用。

```
import "github.com/scotch/aego/v1/ds"

u = &User{Name: "Bob"}
key := datastore.NewKey(c, "User", "bob", 0, nil)
key, err := ds.Put(c, key, u)

u = new(User)
err = ds.Get(c, key, u) 
```

默认会缓存所有`Put`的s和`Get`s到memcache，但是你可以通过调用方法来修改这个行为[`ds.Register`](http://go.pkgdoc.org/github.com/scotch/aego/v1/ds#Register)：

```
ds.Register("User", true, false, false) 
```

该方法接受一个表示和 3 - , ,[`Register`](http://go.pkgdoc.org/github.com/scotch/aego/v1/ds#Register)的字符串。传递一个值将导致将记录保存到该存储。该存储对于您不希望更改的记录很有用，但如果您运行的实例不止一个，则可能包含陈旧数据。`Kind``bool``userDatastore``useMemcache``useMemory``true``AEgo/ds``Memory`

支持的方法有：

```
Put
PutMulti
Get
GetMulti
Delete
DeleteMulti
AllocateIDs 
```

注意：目前兑现仅发生在`Get`. `GetMulti`从数据存储中提取。

`AEGo/ds`是一项正在进行的工作，但代码已经过很好的测试。对于任何反馈，我们都表示感谢。

为了回答您的问题，这里是我如何[将实体序列化为 gob](https://github.com/scotch/aego/blob/master/v1/ds/appengine/memcache/memcache.go#L48)以实现 memcache 持久性。

# wpf - WPF 表单中的箭头键导航很奇怪

> ID：11420282
> 
> 赞同：0
> 
> 时间：2012-07-10T19:13:17.960
> 
> 标签：wpf, arrow-keys

我有一个 WPF 表单，我想用它进行箭头键导航。当前系统已关闭，即使我已成功指定选项卡导航顺序。我有两排三个单选按钮。当我在中间按钮，顶行，我应该能够点击左箭头并选择顶行的第一个按钮；相反，它选择第一个按钮，底行。我该如何纠正？

## 更新：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="20*"/>
        <ColumnDefinition Width="80*"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="15*"/>
        <RowDefinition Height="15*"/>
        <RowDefinition Height="15*"/>
        <RowDefinition Height="30*"/>
        <RowDefinition Height="25*"/>
    </Grid.RowDefinitions>
    <Label Grid.Column="0" Grid.Row="0" Content="Who:" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,0,5,0" FontSize="12"/>
    <Label Grid.Column="0" Grid.Row="1" Content="Caller:" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,0,5,0" />
    <Label Grid.Column="0" Grid.Row="2" Content="Office:" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,0,5,0" />
    <Label Grid.Column="0" Grid.Row="3" Content="Name:" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,0,5,0" />
    <Button Grid.Column="0" Grid.Row="4" Content="Find" VerticalAlignment="Bottom" HorizontalAlignment="Left" Margin="0,0,0,0" Width="50" Command="{Binding Path=FindCommand}" IsDefault="True" Click="Button_Click" TabIndex="9" />
    <Grid Grid.Column="1" Grid.Row="0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <RadioButton Content="All People" Grid.Column="0" HorizontalAlignment="Left" Margin="0,5,0,0" VerticalAlignment="Top" IsChecked="{Binding Path=IsPersonAll}" TabIndex="3" />
        <RadioButton Content="Users Only" Grid.Column="1" HorizontalAlignment="Left" Margin="0,5,0,0" VerticalAlignment="Top" IsChecked="{Binding Path=IsPersonUser}" TabIndex="4" />
        <RadioButton Content="Admin Only" Grid.Column="2" HorizontalAlignment="Left" Margin="0,5,0,0" VerticalAlignment="Top" TabIndex="5" />
    </Grid>
    <Grid Grid.Column="1" Grid.Row="1">
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <RadioButton Content="Off Campus" Grid.Column="0" HorizontalAlignment="Left" Margin="0,5,0,0" VerticalAlignment="Top" IsChecked="{Binding Path=IsCallerOff}" TabIndex="6" />
        <RadioButton Content="Admin" Grid.Column="1" HorizontalAlignment="Left" Margin="0,5,0,0" VerticalAlignment="Top" IsChecked="{Binding Path=IsCallerOnAd}" TabIndex="7" />
        <RadioButton Content="User" Grid.Column="2" HorizontalAlignment="Left" Margin="0,5,0,0" VerticalAlignment="Top" TabIndex="8" />
    </Grid>
    <ComboBox 
        Grid.Column="1" Grid.Row="2" 
        Height="25" HorizontalAlignment="Stretch" 
        Margin="0,0,0,0" VerticalAlignment="Top" 
        ItemsSource="{Binding Path=Offices}"
        SelectedItem="{Binding Path=Office}" TabIndex="2" />
    <Grid Grid.Column="1" Grid.Row="3">
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="55*"/>
            <RowDefinition Height="45*"/>
            <RowDefinition Height="50*"/>
    </Grid.RowDefinitions>
        <TextBox Name="lName" Grid.Column="0" Grid.Row="0" Margin="0,0,5,0" VerticalAlignment="Top" HorizontalAlignment="Stretch" Height="22" Text="{Binding Path=LastName, UpdateSourceTrigger=PropertyChanged}" TabIndex="0" />
        <TextBox Grid.Column="1" Grid.Row="0" Margin="5,0,0,0" VerticalAlignment="Top" HorizontalAlignment="Stretch" Height="22" Text="{Binding Path=FirstName, UpdateSourceTrigger=PropertyChanged}" TabIndex="1" />
        <Label Grid.Column="0" Grid.Row="1" Content="Last Name" HorizontalAlignment="Left" Margin="-5,-5,0,0" VerticalAlignment="Top" />
        <Label Grid.Column="1" Grid.Row="1" Content="First Name" HorizontalAlignment="Left" Margin="0,-5,0,0" VerticalAlignment="Top" />
        <Label Grid.Row="2" Grid.ColumnSpan="2" Content="Please supply search information in Department or Name." Foreground="Red" HorizontalAlignment="Stretch" Margin="-5,-5,0,0" VerticalAlignment="Top" Height="26" Visibility="{Binding Path=ErrVisibility}"/>
    </Grid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:26:10.553

这对我来说也是一种奇怪的行为，在玩弄它之后我可以告诉你它是由 Horizo​​ntalAlignment 属性引起的，但我无法真正解释为什么。也许其他人可以对此有所了解。

* * *

更多信息：

在您的情况下，控件由 content 属性按字母顺序排列。您可以通过更改轻松测试

```
<RadioButton Content="All People" Grid.Column="0" HorizontalAlignment="Left" 
```

至

```
<RadioButton Content="Pall People" Grid.Column="0" HorizontalAlignment="Left" 
```

更改后，由于字母顺序，控件现在从右到左正确地集中在第一行：用户 -> Pall 人员 -> 校外。

由于我不知道这种行为，我尝试通过使用以下 XAML 创建一个新项目来重现，但箭头键的行为与预期的一样，将下一个邻居集中在箭头键的方向：

```
<Grid>
        <Grid.RowDefinitions>
            <RowDefinition></RowDefinition>
            <RowDefinition></RowDefinition>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0">
            <Grid.RowDefinitions>
                <RowDefinition></RowDefinition>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <RadioButton Grid.Column="0" Content="All People"></RadioButton>
            <RadioButton Grid.Column="1" Content="Users Only"></RadioButton>
            <RadioButton Grid.Column="2" Content="Admin Only"></RadioButton>
        </Grid>

        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition></RowDefinition>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <RadioButton Grid.Column="0" Content="Off Campus"></RadioButton>
            <RadioButton Grid.Column="1" Content="Admin"></RadioButton>
            <RadioButton Grid.Column="2" Content="User"></RadioButton>
        </Grid>
</Grid> 
```

所以我删除了你的 xaml 单选按钮的属性，直到我最终通过删除 Horizo​​ntalAlignment 来达到目的。

XAML 现在按预期工作，至少对于单选按钮：

```
<Grid Grid.Column="1" Grid.Row="0">
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
    <RadioButton Content="All People" Grid.Column="0" Margin="0,5,0,0" VerticalAlignment="Top" IsChecked="{Binding Path=IsPersonAll}" TabIndex="3" />
    <RadioButton Content="Users Only" Grid.Column="1" Margin="0,5,0,0" VerticalAlignment="Top" IsChecked="{Binding Path=IsPersonUser}" TabIndex="4" />
    <RadioButton Content="Admin Only" Grid.Column="2" Margin="0,5,0,0" VerticalAlignment="Top" TabIndex="5" />
</Grid>
<Grid Grid.Column="1" Grid.Row="1">
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
    <RadioButton Content="Off Campus" Grid.Column="0" Margin="0,5,0,0" VerticalAlignment="Top" IsChecked="{Binding Path=IsCallerOff}" TabIndex="6" />
    <RadioButton Content="Admin" Grid.Column="1"  Margin="0,5,0,0" VerticalAlignment="Top" IsChecked="{Binding Path=IsCallerOnAd}" TabIndex="7" />
    <RadioButton Content="User" Grid.Column="2" Margin="0,5,0,0" VerticalAlignment="Top" TabIndex="8" />
</Grid> 
```

# php - Android：使用 PHP 通过 Json 解析 MySql 数据库的问题

> ID：11420287
> 
> 赞同：0
> 
> 时间：2012-07-10T19:13:33.857
> 
> 标签：php, android, mysql, json

我一直在做这个，但我不知道为什么数据会被调用到应用程序，但 Json 无法转换它。它在 logcat 中显示 JSONObject 无法转换为 JSONArray。

继承人类：

```
public class SqlTest extends Activity {
public String data;
public List<String> suggest;
public AutoCompleteTextView autoComplete;
public ArrayAdapter<String> aAdapter;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sqltest);
    suggest = new ArrayList<String>();
    autoComplete = (AutoCompleteTextView) findViewById(R.id.autocomplete_country);
    autoComplete.addTextChangedListener(new TextWatcher(){

        public void afterTextChanged(Editable editable) {
            //

        }

        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            //

        }

        public void onTextChanged(CharSequence s, int start, int before, int count) {
            String newText = s.toString();
            new getJson().execute(newText);
        }

    });

}
   class getJson extends AsyncTask<String,String,String>{

@Override
protected String doInBackground(String... key) {
    String newText = key[0];
    newText = newText.trim();
    newText = newText.replace(" ", "+");
    try{
        HttpClient hClient = new DefaultHttpClient();
        HttpGet hGet = new HttpGet("http://android.mojavenuclear.com/androidscript.php");
        ResponseHandler<String> rHandler = new BasicResponseHandler();
        data = hClient.execute(hGet,rHandler);
        suggest = new ArrayList<String>();
        JSONArray jArray = new JSONArray(data);
        for(int i=0;i<jArray.getJSONArray(1).length();i++){
        String SuggestKey = jArray.getJSONArray(1).getString(i);
        suggest.add(SuggestKey);
        }

    }catch(Exception e){
        Log.w("Error", e.getMessage());
    }
    runOnUiThread(new Runnable(){
        public void run(){
             aAdapter = new ArrayAdapter<String>(getApplicationContext(),R.layout.list_item,suggest);
             autoComplete.setAdapter(aAdapter);
             aAdapter.notifyDataSetChanged();
        }
    });

    return null;
    }

   }
} 
```

和 PHP：

```
<?php
mysql_connect("","","");
mysql_select_db("androiddatastore");
$desc = mysql_real_escape_string($_REQUEST['newText']); 
 $q = mysql_query("SELECT `Shrt_Desc`, `Carbohydrt_(g)` FROM `Abbrev` WHERE `Shrt_Desc` LIKE '$desc%' LIMIT 0, 30"); 
while($e=mysql_fetch_assoc($q))
    $output[]=$e;
print(json_encode($output));
mysql_close();
?> 
```

LogCat 输出：

```
07-10 11:57:20.872: W/KeyCharacterMap(15730): Using default     keymap: /system/usr/keychars/qwerty.kcm.bin
07-10 11:58:37.948: W/Error(15730): Value {"Carbohydrt_(g)":"0.06","Shrt_Desc":"BUTTER,WHIPPED,WITH SALT"} at 1 of type org.json.JSONObject cannot be   converted to JSONArray
07-10 11:58:38.358: W/Error(15730): Value {"Carbohydrt_(g)":"0.06","Shrt_Desc":"BUTTER,WHIPPED,WITH SALT"} at 1 of type org.json.JSONObject cannot be converted to JSONArray
07-10 11:58:38.468: W/Error(15730): Value {"Carbohydrt_(g)":"0.06","Shrt_Desc":"BUTTER,WHIPPED,WITH SALT"} at 1 of type org.json.JSONObject cannot be converted to JSONArray
07-10 11:58:38.818: W/Error(15730): Value {"Carbohydrt_(g)":"0.06","Shrt_Desc":"BUTTER,WHIPPED,WITH SALT"} at 1 of type org.json.JSONObject cannot be converted to JSONArray 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:16:56.243

```
JSONArray jArray = new JSONArray(data); 
```

应该

```
JSONObject jArray = new JSONObject(data); 
```

您可以从*JSONObject*中提取您的数组。

# javascript - 这种读取a位置的方法有什么问题 使用 javascript？

> ID：11420289
> 
> 赞同：0
> 
> 时间：2012-07-10T19:13:38.077
> 
> 标签：javascript, css

我正在尝试为我的网站制作一个持久标题。我写了以下不起作用的代码。在进行调试时，我发现它甚至无法读取 div 的正确位置，这就是问题所在。这是代码：

```
<script>
function UpdateTableHeaders() {

      /*var el             = $("#top_menu", this);
      var offset         = el.offset();
      var scrollTop      = $(window).scrollTop();
      var floatingHeader = $(".floatingHeader", this);

       if (scrollTop > offset.top) {
           floatingHeader.css(
            "visibility", "visible"
           );
       } else {
           floatingHeader.css(
            "visibility", "hidden"
           );      
       }; */
       //following lines is the code I have tried in turns to see if it can actually read the correct position or not
       $("#content").append( "position top:" + $('#top_menu').position().top);
       $("#content").append( "position top:" + $('#top_menu').offset().top);
}

// DOM Ready      
$(function() {

   var clonedHeaderRow;

       clonedHeaderRow = $("#top_menu", this);
       clonedHeaderRow
         .before(clonedHeaderRow.clone())
         .addClass("floatingHeader");

   $(window)
    .scroll(UpdateTableHeaders)
    .trigger("scroll");

}); 
```

但是，输出答案似乎不正确。这是我滚动页面时的输出：

position top:101.45001220703125position top:101.41668701171875position top:101.41668701171875position top:101.04998779296875position top:101.16668701171875position top:101.39999389648438position top:100.63333129882812position top:100.98333740234375position top:101.33331298828125position top:100.79998779296875position top:101.21665954589844position top:101.10000610351562position top :100.63333129882812position top:101.05000305175781position top:100.93333435058594position top:101.23333740234375position top:101.41667175292969position top:100.60000610351562position top:100.71665954589844position top:101.18333435058594position top:100.53334045410156position top:101.23333740234375position top:101.35000610351562position top:100.69999694824219position top:101.05000305175781位置顶部：100.51666259765625位置顶部：100.63333129882812位置顶部：100。86666870117188位置顶部：101.33332824707031位置顶部：100.91667175292969

它在 100 左右波动。谁能告诉我哪里出错了？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:24:47.317

不要这样做。改为在标题上使用 css `position : fixed`。

# javascript - 使用 AJAX 在我的域中获取脚本

> ID：11420297
> 
> 赞同：0
> 
> 时间：2012-07-10T19:14:05.847
> 
> 标签：javascript, jquery, ajax, json

我有一个 ajax 脚本，它引用了同一域中的某些内容。我想传递一些 HTML，然后传递与之关联的 javascript。我想既然它不是 X 域，它可能会让我这样做。我的目标是我正在接受一个 web 服务，然后返回一个字符串，该字符串将被放入一个 div ......当插入 javascript 时，它会被触发，这会发生很多好事。

我想知道我是否需要做任何特别的事情才能通过此请求从服务器传递 javascript。我当前的 AJAX 请求似乎清理并删除了脚本。想法？我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:21:34.940

如果您希望脚本包含在 AJAX 响应中并由浏览器执行，您首先需要执行与作为潜在副本发布的文章类似的操作，除了您还需要注入 HTML。像往常一样继续注入它，但是在设置内容之后，尝试以下操作：

```
$(responseText).find("script").each(function(index, element){
    var script = $(element).text();
    eval(script); 
} 
```

**未经测试**

但是，我会尝试找到一种方法来避免执行上述操作。JQuery 提供了处理动态添加到 DOM 的元素类的方法。见：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

# objective-c - 从 NSView 中移除弹性

> ID：11420298
> 
> 赞同：0
> 
> 时间：2012-07-10T19:14:09.330
> 
> 标签：objective-c, macos, cocoa, nsview

我有一个 NSView（它包含几个文本框和按钮等）。

现在在 MAC OS X Lion 中引入了一种弹性效果，就像 iPhone 一样，例如 safari

我的问题是如何从我的 NSView 中消除这种弹性效果？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:49:20.200

选择`NSScrollView`并转到**Attributes Inspector**并从**Automatic Elasticity**更改为**No Elasticity**，如下所示：

![在此处输入图像描述](../Images/4e3b0eb0e373e59f9bd7da3feaebb6f2.png)

# git - 我可以为所有用户添加一个 git 遥控器吗？

> ID：11420299
> 
> 赞同：1
> 
> 时间：2012-07-10T19:14:11.440
> 
> 标签：git, github

该公司刚刚切换到 git，我们在项目中使用了一些 github 存储库。

我想做的是有一些本地存储库，这些存储库是从上述 github 存储库中提取的。原因是（出于显而易见的原因）我希望构建项目的每个人都使用相同的 LIB_A 修订版（而不是每个用户根据他们上次获取的时间使用不同的修订版）。

我已将上游仓库本地添加到我自己的克隆中，现在有没有办法**将此远程推送到中央仓库**，以便每个人都可以从 github 拉取并更新我们的中央仓库？

这比让每个人都添加遥控器要容易一些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:58:46.980

如评论中所述，您应该使用子模块。子模块所做的是它们不仅指向另一个存储库，而且还根据包含的存储库“冻结”提交该存储库的位置。阅读 progit.org/book 中的第 6 章。

# ruby-on-rails - 是否有针对 belongs_to_active_hash 的 rspec，与 belongs_to 相同：other_model

> ID：11420312
> 
> 赞同：0
> 
> 时间：2012-07-10T19:14:58.883
> 
> 标签：ruby-on-rails, ruby, activerecord, rspec, matcher

我有许多可以正常工作的活动记录验证，例如：代码：`belongs_to :topics` 测试：`it { should belong_to :topic }`

但是我有一个 active_hash 关联和一个像这样的测试：

代码： `belongs_to_active_hash :day`
测试： `pending { should belong_to_active_hash :day }`

但测试失败：

未定义的方法`if' for #<Shoulda::Matchers`...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:57:00.060

应该不支持 ActiveHash 匹配器。您可以手动测试：

```
 specify do 
     reflection = YourModel.reflect_on_association(:day)
     options = {} # options you passed to belongs_to_active_hash

     reflection.should_not be_nil
     reflection.macro.should eq :belongs_to
     reflection.options.should eq options
  end 
```

如果你经常使用它，你可以创建一个自定义匹配器。

# forms - 在同一视图 grails 中上传文件和文本

> ID：11420314
> 
> 赞同：1
> 
> 时间：2012-07-10T19:15:07.157
> 
> 标签：forms, grails, file-upload, submit, form-submit

我无法从用户那里获取文本输入和文件上传，我将这两者都保存到数据库中。我在 .gsp 页面中有两种形式，一种用于文本输入，另一种用于文件上传。我可以保存文件或获取文本输入，但我不能两者都做。当我将提交按钮放在文本字段输入的标签内时，它会保存这些，当我将它放在标签中时，它会保存文件，但是我怎样才能通过单击单个提交按钮来完成这两项操作。我不想有多个提交按钮。这两个表单调用相同的方法来保存数据。

这个网站上的示例是我正在寻找的，但它没有说明如何通过单击单个提交按钮发送信息：

[http://www.ibm.com/developerworks/java/library/j-grails06099/index.html](http://www.ibm.com/developerworks/java/library/j-grails06099/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:44:28.547

标签所做的`<g:uploadForm...>`只是将表单 enctype 设置为`multipart/form-data`. 要上传标准文本输入和文件，我通常只需执行以下操作：

```
//GSP
<g:form method="post" enctype="multipart/form-data"  action="update">
   <input type="text" name="myTextField" id="myTextField" />    
   <input type="file" id="myFile" name="myFile" />
   <g:actionSubmit class="save" action="update" value="${message(code: 'default.button.update.label', default: 'Update')}" />
</g:form> //closing tag fixed 
```

那么你在控制器中做什么取决于你如何保存上传的文件。如果您将其保存到 a`byte [] myFile`中，如果字段名称设置正确，它将自动绑定，因此您无需执行任何操作 - 它可以正常工作。

```
//controller
myInstance.properties = params  //binds text as well as upload files 
```

如果要将其保存到文件系统，则可以执行以下操作（直接来自[手册](http://grails.org/doc/latest/guide/theWebLayer.html#uploadingFiles)）：

```
//Controller
def f = request.getFile('myFile')
if (f.empty) {
    flash.message = 'file cannot be empty'
    render(view: 'uploadForm')
    return
}
f.transferTo(new File('/some/local/dir/myfile.txt'))
response.sendError(200, 'Done') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:19:19.310

提交按钮提交它所包含的表单的内容。您的问题的答案是：a）有 1 个表单和 1 个提交按钮，或 b）各有 2 个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T23:26:31.997

如果`<g:form>`您不将其`<g:uploadForm>`设为标签，它也可以使用

# wordpress - WordPress 下一个和上一个

> ID：11420316
> 
> 赞同：0
> 
> 时间：2012-07-10T19:15:09.347
> 
> 标签：wordpress

我非常努力地显示下一个和上一个按钮，无论它是否在我的 wordpress 主题上处于活动状态。我似乎无法想办法让它发挥作用。我正在尝试这样做：[http](http://www.kinocreative.co.uk/hints-and-tips/wordpress-nextprevious-post-navigation-with-images-and-inactive-links/) : //www.kinocreative.co.uk/hints-and-tips/wordpress-nextprevious-post-navigation-with-images-and-inactive-links/ 但对于我的类别存档页面. 我试过使用类似的东西：

```
<?
echo '<a href="'.get_permalink( get_the_ID()-1 ).'" title="'.get_the_title( get_the_ID()-1 ).'">Previous</a>'; 
echo '<a href="'.get_permalink( get_the_ID()+1 ).'" title="'.get_the_title( get_the_ID()-1 ).'">Next</a>';
?> 
```

但这不适用于转到下一页/上一页的类别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:22:13.003

虽然这对您来说可能不是这样，但我通过我实现的不同主题发现，并非所有页面都支持添加下一个和上一个按钮。有一种从数据库请求帖子的方式并不总是给你想要的东西。

如果您已按照那里的指南进行操作（就像我所做的那样），那么该页面可能特别不支持它。我知道这不是您要寻找的答案，但请考虑一下，而不是浪费所有时间。您始终可以完全编辑主题以允许这样的功能。看看编辑您的主题如何完全生成帖子，而不是仅仅尝试添加按钮。

这些可能很方便：

[http://codex.wordpress.org/The_Loop](http://codex.wordpress.org/The_Loop)

[http://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)

# meteor - 流星应用程序可以负载平衡吗？

> ID：11420320
> 
> 赞同：5
> 
> 时间：2012-07-10T19:15:21.907
> 
> 标签：meteor

是否可以在负载均衡器后面使用 Mongodb 运行多个流星应用程序实例？

似乎如果一个应用程序的多个实例在不同的服务器上运行，那么他们将不知道其他实例对 Mongo DB 所做的更改 - 因此不会通知客户端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T21:23:49.640

Meteor 能够判断数据库何时被另一个流星实例更改，尽管有轻微的延迟（我注意到最多 5 秒）。

负载平衡不应该具有挑战性，它肯定是可能的。

您可以很容易地使用传统意义上的许多流星实例和负载均衡器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-10T17:56:20.950

Meteor Cluster 完全可以做到这一点。

*   设置 Meteor Cluster - [http://goo.gl/2aHJ2](http://goo.gl/2aHJ2)
*   设置负载平衡 - [http://goo.gl/uvtVH](http://goo.gl/uvtVH)

# windows - 正常启动后如何触发可启动 CD 的启动过程？

> ID：11420321
> 
> 赞同：0
> 
> 时间：2012-07-10T19:15:29.170
> 
> 标签：windows, linux, dos, boot, bootloader

我一直在玩弄多个启动软件的不同版本，试图用我最喜欢的 PC 工具和一个带有 ISO 的文件夹创建一个 USB 引脚，以便在正常启动到 DOS（或其他东西）后启动。

但是很多 ISO 不能正常工作，或者根本不能正常工作（即 Windows 启动 CD 等），所以我有了一个新想法：

是否可以创建一个可引导的 MS-DOS USB 引脚，然后在引导后，从 DOS 提示符触发 CD-ROM 的正常引导序列？

像这样：

*   打开电脑。
*   点击键获取启动顺序菜单（在我的情况下为 F12）。
*   选择“从 USB 启动”。
*   让 USB 引导到 DOS（...或其他任何可用于此目的的东西？）。
*   从 DOS 提示符启动“*一些程序/脚本*”以触发普通光驱中的可引导 CD，就好像它直接从 BIOS 引导顺序菜单触发一样。

（如果可能的话，我将继续添加一个菜单，其中包含启动虚拟 CD 驱动器软件并将 ISO 文件挂载到我的 USB 引脚的选项）

感谢您提供任何建议和/或想法和想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:30:49.603

理论上，您可以使用[Int13h/AH=4Ch](http://www.ctyme.com/intr/rb-0720.htm)从 BIOS 下运行的代码启动 CD-ROM 引导。但是，我似乎记得读过大多数 BIOS 实现实际上并没有实现[El Torito](http://download.intel.com/support/motherboards/desktop/sb/specscdrom.pdf)标准的这一部分。（那是很久以前的事了，所以也许你不会在现代 BIOS 上遇到这个问题，尽管我不会指望它。）

重要的是要注意（根据我的经验），一旦您启动了操作系统，这不太可能起作用。DOS 不会更改 CPU 模式（前提是您没有安装任何扩展内存驱动程序），但它会以其他方式更改系统上下文 - 例如，IIRC，它会挂钩几个 BIOS 中断。因此，一旦 DOS 运行，您就无法覆盖它（以便从 CD 引导另一个操作系统）而不会发生故障。

因此，为了使这项工作（a）您必须在没有操作系统的裸 BIOS 中运行您的代码；(b) 您需要一个能够正确实现引导功能的 BIOS。第一部分只是了解裸装配和[BIOS 功能](http://www.ctyme.com/intr/cat-003.htm)的窍门，但第二部分几乎是您无法控制的。

# actionscript-3 - Flash CS5.5 AS3 错误 - 按钮在除 HTML 页面之外的任何地方都有效

> ID：11420324
> 
> 赞同：0
> 
> 时间：2012-07-10T19:15:49.427
> 
> 标签：actionscript-3, flash, projector

我遇到了一个奇怪的错误。我有向前和向后推进一帧的按钮。

它单独在 SWF 中工作，在 .app 和 .exe 投影仪文件中都工作，但不能通过 HTML 生成的页面访问 SWF。

有没有人知道发生了什么？

两个按钮上的代码是：

```
import flash.events.MouseEvent;

stage.displayState = StageDisplayState.FULL_SCREEN;

function next1Click(event:MouseEvent): void {
gotoAndStop(this.currentFrame + 1);
}
function back1Click(event:MouseEvent): void {
gotoAndStop(this.currentFrame - 1);
}

//EVENT LISTENER AND VARIABLE DECLARATION
balancingNext.addEventListener(MouseEvent.CLICK, next1Click);
balancingBack.addEventListener(MouseEvent.CLICK, back1Click); 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:02:48.937

这不是错误，而是预期的行为。为此，`allowFullScreen`必须是`true`，并且您不能在没有用户事件的情况下激活它，否则程序将抛出异​​常（并崩溃，因为您没有捕获它）。

> 启动全屏模式的 ActionScript 只能在鼠标单击或按键响应时调用。如果在其他情况下调用它，它将被忽略（在 ActionScript 2.0 中）或引发异常（在 ActionScript 3.0 中）。

请参阅 Adob​​e 的[文档](http://www.adobe.com/devnet/flashplayer/articles/full_screen_mode.html)。

# android - 通过电子邮件发送用户输入信息的报价请求程序

> ID：11420328
> 
> 赞同：0
> 
> 时间：2012-07-10T19:16:09.830
> 
> 标签：android, android-ui

我有一个`Activity`有各种`EditText`盒子`Spinners`的盒子，用户将填写这些盒子以获得报价。此应用程序将由我们的外部销售团队使用，信息将通过电子邮件发送给我们的内部团队以处理报价。从中获取信息`Activity`并通过电子邮件发送的最佳方式是什么？

我打算这样做的方式是，当单击*Process* `Button`时，它将获取输入的数据并自动在电子邮件字段中填充该文本。这是最好的方法还是我应该查看表格？

我还考虑添加一个功能，要求某些字段具有信息，如果没有，您将无法继续提交报价。实现这一目标的最佳方法是什么？

最后，其中一个文本框要求外部销售人员输入“报价截止日期”。是否可以使用日历功能来执行此操作，以便当您单击*处理*并将报价发送给内部团队时，它将被添加到日历或双方都可以查看的东西以帮助跟踪待定报价？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:26:12.330

我不会通过应用程序发送电子邮件；相反，我会获取他们所有的数据，以 POST 请求的形式将其发送到 PHP 服务器，然后从那里进行处理。您可以将其保存在您的销售代表可以访问的数据库中，也可以立即通过那里将数据通过电子邮件发送给他们。通过这种方式，您可以避免所有令人讨厌的电子邮件身份验证，您必须将其保留在应用程序中，并且您也不需要将数据传递给电子邮件意图并让他们手动发送。

这是在 Android 中使用 HttpPost 请求的一个很好的答案：[https ://stackoverflow.com/a/4544026/1426565](https://stackoverflow.com/a/4544026/1426565)

# jquery - 在 asp.net 中使用 jquery 和 ajax 聊天即时创建控件时的跨域问题

> ID：11420329
> 
> 赞同：0
> 
> 时间：2012-07-10T19:16:13.310
> 
> 标签：jquery, ajax, chat

这是场景，我开发了具有聊天客户端和聊天服务器的聊天应用程序。在客户端中，我正在创建与 gmail 右下角弹出的 google 电子邮件聊天窗口非常相似的聊天窗口。我已使用此代码并转换为 asp.net (http://www.ajaxprojects.com/ajax/tutorialdetails.php?itemid=9) 我使用 Jquery-1.4.2.js 作为 jquery 库，我' ve 和 aspx 页面，其中包含具有 ajax 请求和响应 (XMLHttpRequest) 的 javascript，并且它具有使用 jquery 和 css 动态创建 html 控件的代码（例如 $("body").append(''..)。在代码隐藏我正在创建一个 cookie 来维护访问者会话。如果我在同一个域上托管客户端和服务器，我的代码工作绝对正常！！

我创建了 sitechat.htm 页面，它有；

LiveChat.aspx 有 javascript，它获取很少的服务器端变量，如用户 ID 等，并处理聊天请求和响应。

我面临的问题是 html 页面不同域不会使用 ajax 和 jquery 生成聊天弹出窗口？！此外，我可以创建 cookie，但在很短的时间内，它会突然消失。我对 JSONP 和 Iframe 感到很困惑，我真的需要一个方向来使它正常工作

请让我知道如何实现相同的目标？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:20:34.297

您的问题有点难以理解，但听起来您正试图通过 AJAX 访问不同域上的页面，这不允许[Access-Control-Allow-Origin](https://developer.mozilla.org/en/http_access_control)的跨域请求。

如果您自己管理此其他站点，请设置该标头以允许此站点的跨域请求。

# sql - 参考 SQL 中的当前记录

> ID：11420330
> 
> 赞同：0
> 
> 时间：2012-07-10T19:16:19.413
> 
> 标签：sql, ms-access-2010

考虑 Access 2010 中的这两个表：

# 动作注册

```
ActionID     Taskt1     Actiont1  
    1          t1         t1a1  
    2          t2         t2a1   
    3          t3         t3a1
    4          t1         t1a2 
    5          t1         t1a3
    6          t2         t2a2 
```

# 任务寄存器

```
ActionID     Taskt2     Actiont2  
    1          t1         
    2          t2         
    3          t3 
```

我为字段 Actiont2 赋予以下属性（在设计视图的查找选项卡中）：

*   显示控制 = 列表框
*   行源类型 = 表/查询

现在我希望此查询从 Actiont1 检索到 Actiont2 仅与 Task2 的值相关的记录，因此结果将是：

# 任务寄存器

```
ActionID     Taskt2     Actiont2  
    1          t1       (t1a1,t1a2,t1a3)  
    2          t2       (t2a1,t2a2)  
    3          t3       (t3a1) 
```

我用了：

```
SELECT ActionReg.Action1  
FROM ActionReg, TaskReg 
WHERE [ActionReg]![Task1]=[TaskReg]![Task2]; 
```

但如果 Task1 = Task2 中的任何记录，它会检索 Action1 中的所有记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:22:41.043

尝试在查询中使用 INNER JOIN。

# batch-file - 批量比较数字

> ID：11420331
> 
> 赞同：2
> 
> 时间：2012-07-10T19:16:22.610
> 
> 标签：batch-file, numbers, compare

发布正在寻找解决方法的部分代码

```
if 09 LSS 9 (ECHO YES) ELSE (ECHO NO) 
```

该命令始终回显“是”，因为它认为 09 小于 9。此命令的任何替代方案？

编辑：

谢谢，但是 Modulo 部分在我试图插入的命令中不起作用。

有一个包含“1234 09”的文件 test.txt 是我的命令

```
set actualdate=9
for /f "usebackq Tokens=1,2,3" %%d in (test.txt) do (SET /a x=1000%%e %% 1000 & if %x% LSS %ActualDate% ECHO %%d >> test2.txt) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T20:24:21.003

您的代码片段的问题在于语法和百分比扩展。
您可以`&`在一行中使用多个命令（而不是 pipe `|`）或将它们拆分为多行。
您无法`x`在块内使用百分比扩展访问变量，但延迟扩展在那里有效

```
setlocal EnableDelayedExpansion
set actualdate=9
for /f "usebackq Tokens=1,2,3" %%d in (test.txt) do (
   SET /a x=1000%%e %% 1000
   if !x! LSS %ActualDate% ECHO %%d >> test2.txt
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T19:34:47.910

如果您可以将数字放入变量中，则可以使用模去除前导零。

试试这个示例：

```
@ECHO OFF

SET a=09
SET b=9

SET /a x=1000%a% %% 1000
ECHO %x%
SET /a y=1000%b% %% 1000
ECHO %y%

if %x% LSS %y% (ECHO YES) ELSE (ECHO NO)

PAUSE 
```

如果您尝试执行 SET /aa=09，您将收到以下错误：

> 无效号码。数字常量可以是十进制 (17)、十六进制 (0x11) 或八进制 (021)。

# node.js - nodester 初始化应用程序错误

> ID：11420333
> 
> 赞同：0
> 
> 时间：2012-07-10T19:16:32.823
> 
> 标签：node.js

当我在nodester（来自win）上尝试初始化应用程序时，我收到上面的错误。我认为这个问题是在 nodester 达到 1.0 状态时开始的。

```
(1) Setup a new app from scratch?
(2) You just want to setup your existent app?
note: if you choose 2 be sure that you are into app's dir
(1) 1
nodester info initializing git repo for <folder> into folder <folder>
nodester warn this will take a second or two
nodester info cloning your new app in <folder>
nodester ERROR { [Error: Command failed: ] killed: false, code: 1, signal: null}
nodester not ok! 
```

文件夹和我在光盘上的文件已成功创建。创建、启动和停止应用程序工作正常。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:46:13.290

实际上那部分没有任何变化，这很奇怪。我可以建议您在 git-shell 中运行该命令。在 Windows 上，该`git`命令通常不在 PATH 中。也许这可能是问题所在。您也可以通过 irc.nodester.com 或 freenode 中的#nodester 加入我们。因此，我们可以为您提供更多帮助。

# ruby - LoadError on require 'tagfile/tagfile'

> ID：11420335
> 
> 赞同：0
> 
> 时间：2012-07-10T19:16:36.533
> 
> 标签：ruby, rubygems

当我尝试要求作为 rtaglib 一部分的标记文件/标记文件时，我得到一个 LoadError：

```
$ ruby main.rb 
/usr/share/rubygems/rubygems/custom_require.rb:36:in `require': cannot load such file -- tagfile/tagfile (LoadError)
    from /usr/share/rubygems/rubygems/custom_require.rb:36:in `require'
    from main.rb:4:in `<main>' 
```

我安装了 rtaglib

```
$ gem install rtaglib 
```

这是我的 main.rb 的顶部：

```
require 'date'
require 'find'

require 'tagfile/tagfile' 
```

这里的任何建议（[Ruby + rtaglib gem 问题](https://stackoverflow.com/questions/4291544/problem-with-ruby-rtaglib-gem)）都不起作用。已安装 taglib (1.7.2)

与其他宝石（如 sinatra）一起尝试，效果很好。有谁知道我无法加载 rtaglib 的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:46:32.813

你不能`require 'tagfile'`吗？我刚试了一下，效果很好。

# c++ - 无法使用 std=c++11 设置 Eclipse Juno C++

> ID：11420336
> 
> 赞同：6
> 
> 时间：2012-07-10T19:16:38.473
> 
> 标签：c++, eclipse, c++11, compiler-errors, eclipse-juno

我有 Eclipse Juno C++（内部版本号：20120614-1722）。我正在尝试使用指令 -std=c++11 或 -std=c++0x 设置编译器调用参数，但同时编译下面的代码。Eclipse Juno 中没有“工具设置”（至少对于 Mac），所以我无法转到“C/C++ 构建 -> 设置 -> 工具设置”。我的编译器是 GCC 4.8.0

```
#include <iostream>
#include <sstream>
#include <vector>
using namespace std;
int main(void) {
    vector<string> v = {"a","b","c"};
    for(string s: v){
        cout << s << endl;
    }
    return 0;
} 
```

我有：

```
HelloWorld.cpp:16:33: error: could not convert ‚Äò{"a", "b", "c"}‚Äô from ‚Äò&lt;brace-enclosed initializer list>‚Äô to ‚Äòstd::vector<std::basic_string<char> >‚Äô
HelloWorld.cpp:17:16: error: range-based ‚Äòfor‚Äô loops are not allowed in C++98 mode 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T04:37:49.870

您可以按照我在此答案中描述的步骤操作： [Eclipse CDT C++11/C++0x support](https://stackoverflow.com/questions/9131763/eclipse-cdt-c11-c0x-support/9135135#9135135)

一种可能性是，您的选项被应用于工具链的错误部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:20:22.840

我刚刚遇到了完全相同的问题。请检查您的项目是否有自定义 `"makefile" ( *.mk )`. 如果它有那个“makefile”，请将以下内容放入您的“makefile”并编译。

> “LOCAL_CFLAGS := -fexceptions -std=c++0x -std=c++11”

PS：LOCAL_CFLAGS 用于编译器标志，您可以将其放入“xxx > Miscellaneous”中。坦率地说，如果您的项目没有自定义“makefile”，我不知道如何解决它。但是，Eclipse Juno 从字面上看并没有上面描述的那些人的路径。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-07T01:23:19.960

The reason you don't see Tool Settings is because upon creating project, you should choose Executable instead of GNU Autotools

# nhibernate - 在 Fluent NHibernate 中映射此设计

> ID：11420344
> 
> 赞同：1
> 
> 时间：2012-07-10T19:17:52.003
> 
> 标签：nhibernate, fluent-nhibernate

我正在尝试找出完成 NHibernate 坚持的设计的最佳方法。以下是理想情况下的数据：

```
Person
===============
Id (int)
Name (nvarchar)

Privileges
==============
Person_Id
Right (int)
AccessLevel (int) 
```

理想情况下，我可以创建这样的类（假设我拥有所有 NHibernate 虚拟修饰符）：

```
public enum Rights
{
    Read = 0,
    Save = 1,
    Delete = 2
}

public enum AccessLevels
{
    LevelOne = 0,
    LevelTwo = 1,
    LevelThree = 2
}

public class Person
{
    public int Id { get; set; }
    public string Name { get; set; }
    public Dictionary<Rights, AccessLevels> Privileges { get; set; }
} 
```

最初我考虑了[这篇博文中描述的设计](http://noahblu.wordpress.com/2009/01/14/nhibernate-generic-dictionary-mapping/)，但我不想让`Rights`枚举成为一个类，因为我希望能够测试它而不必跟踪给定权限的 Id。我认为一对枚举是最简单的。

无论如何，我一直在努力弄清楚如何在 NHibernate 中实现这一点，更不用说 Fluent NHibernate。我希望一些NH大师可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:11:54.087

我不确定是否可能......但尝试这样的事情（我没有测试）：

```
 HasMany(x => x.Privileges)
            .WithTableName("Privileges")
            .KeyColumnNames.Add("Person_Id")
            .Cascade.All()
            .AsMap<string>(
                index => index.WithColumn("Right").WithType<Rights>(),
                element => element.WithColumn("AccessLevel").WithType<AccessLevels>()
            );
    } 
```

或者是这样的：

```
References(x => x.Privileges).AsMap<Rights>("Right").Element("AccessLevel", c => c.Type<AccessLevels>());. 
```

看看这个线程：[如何使用 Fluent NHibernate 自动映射来映射字典？](https://stackoverflow.com/questions/1943071/how-do-i-map-a-dictionary-using-fluent-nhibernate-automapping)

# css - 在 Chrome 和 Safari 中 img 后出现奇怪的中断，但在 Firefox 中正常

> ID：11420346
> 
> 赞同：0
> 
> 时间：2012-07-10T19:17:54.873
> 
> 标签：css, firefox, google-chrome, browser, safari

[现场直播。](http://massagebybodyworx.com/about)

在测试了我正在开发的网站后，我发现了一个奇怪的中断，它只发生在 Chrome 和 Safari 中。在 Firefox 中一切看起来都很好。

![铬/Safari](../Images/b96d7aba8a37e90bc91d0333dfa66b87.png)

欢迎来到 BodywoRx

```
 <div class="banner-image">
        <img src="<?php echo get_template_directory_uri(); ?>/img/large.jpg" alt="about-place-holder" id="aph" />
    </div><!-- end banner-image -->
    <p>Body WoRx was founded on the belief that many dysfunctions of the body can be healed through massage therapy.  In a world where prescriptions are written for variety of symptoms, we offer an alternative solution to helping the body heal itself.  We are located in historic downtown Grand Prairie, conveniently centered between Fort Worth and Dallas.</p>
    <div class="bio">
        <img src="<?php echo get_template_directory_uri(); ?>/img/bridgett.jpg" alt="bridgett-freiburger" id="bf" />
        <p>Bridgett suffered from chronic neck, back, and shoulder pain for many years.  She went to many doctors, specialists, had many MRI&apos;s, but no one knew what was causing the pain.  She had been prescribed countless medications to help ease discomfort, but nothing to address the cause.  Bridgett stumbled across massage therapy and has since become a firm believer and advocate in its many benefits and healing properties.  Before getting into massage therapy, Bridgett served in the Marine Corps, and then continued supporting the war fighter while working at Bell Helicopter. Bridgett is a graduate of North Texas School of Swedish Massage.</p>
    </div><!-- end bio -->
</div><!-- end about --> 
```

我确定这是小事，我只是无法弄清楚。有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:22:26.980

尝试`float`在第二张图片上使用。

```
.bio img {
    float: left;
} 
```

JS 小提琴：http: [//jsfiddle.net/J4MK4/2/](http://jsfiddle.net/J4MK4/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:22:42.253

文字是否应该在图像的右侧？

如果是这样，您需要浮动图像。

```
img {
    float: left;
} 
```

# javascript - 动态插入内容后“重置”功能

> ID：11420349
> 
> 赞同：1
> 
> 时间：2012-07-10T19:18:19.467
> 
> 标签：javascript, jquery, function, dom

人们！

我正在开发一个网站，其中有一个“优惠清单”（iframe）。在这个列表（）中，我有几个产品。

如果用户点击一个产品，该产品将进入“愿望清单”（其他，在父窗口上）。到目前为止还好。

但是，用户可以删除从“愿望清单”中选择的产品。到目前为止还好。但是愿望清单是动态“刷新”的（使用`.append()`方法，来自 iframe），所以我的事件`$(".button_to_delete").click()`事件不起作用，因为 jQuery 在 DOM 之后运行。`$(".button_to_delete").click()`将产品插入愿望清单后，如何“重新开始”活动？

我的代码： http: [//pastebin.com/uHevR1KL](http://pastebin.com/uHevR1KL)

谢谢！:) 抱歉英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:32:55.503

尝试使用[.on()](http://api.jquery.com/on/)：

```
$("#listaPedidos").on('click','.button_to_delete',function(){
     //Do some stuff
}); 
```

# asp.net-mvc-3 - 部分视图的输出缓存不起作用？

> ID：11420351
> 
> 赞同：2
> 
> 时间：2012-07-10T19:18:32.097
> 
> 标签：asp.net-mvc-3, caching, outputcache

**你好，**

我有一个 ASP.NET MVC 3 网站，我在其中创建了一个返回部分视图的操作。此视图有以下内容：

```
<%@ OutputCache Duration="10000" VaryByParam="none" %> 
```

为了从我的主视图中渲染它，我使用了这个：

```
<% Html.RenderAction("ImageWall", "Image"); %> 
```

问题是它根本没有缓存？设置断点时，我可以看到每次都在运行昂贵的绘图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:17:36.847

为此，请使用操作属性

```
<OutputCache(Duration:=10000, VaryByParam:="any")> 
Function ImageWall() As PartialViewResult
   Return PartialView()
End Function 
```

对于 Vb.Net 示例，抱歉

# printing - 如何在打印机驱动程序安装期间避免出现 Windows 安全框

> ID：11420353
> 
> 赞同：0
> 
> 时间：2012-07-10T19:18:39.697
> 
> 标签：printing, driver, signing, postscript, rundll32

我创建了一个 MSI 包（使用 InstallShield - IS），它可以安装我的应用程序以及 MS Postscript 驱动程序。我的问题主要集中在我整个安装过程中的 postscript 驱动程序安装部分。我创建了一个 IS 自定义操作以在安装 MS Postscript 驱动程序的正确时间运行命令文件 (.cmd)。命令文件包含以下 rundll32 行： `rundll32 printui.dll, PrintUIEntry /ia /m "AppX PS" /h "x64" /v "Type 3 - User Mode" /f "c:\(install)\afprint.inf" /F "%windir%\inf\ntprint.inf"`.

对于我被需要用户输入的 Microsoft 警告框所困扰的事实，上述方法非常有效。该框包含标题：Windows 无法验证此驱动程序软件的发布者。我可以选择“仍然安装此驱动程序软件”选项，整个过程确实有效。我确实对此进行了研究，即使我将“运行安静”开关添加到 PrintUIEntry 方法，似乎也没有办法避免警告。显然，我需要签署我的司机以避免安全箱，但在哪里？我这里没有二进制代码。我的安装使用一个自定义 INF 文件，该文件简单地委托给 Microsoft（通过 ntprint.inf）来安装 Postscript 驱动程序。Postscript 驱动程序已经在操作系统上。我只提供一个 PPD 文件。我到底需要签署什么是我的主要问题？由于我不熟悉驱动程序签名，我该怎么做？

我在 Windows 2008 R2 x64 上运行它。

这是我的 INF afprint.inf 的副本（它很小）：

```
[Version]
Signature="$Windows NT$"
Provider=%AF%
ClassGUID={4D36E979-E325-11CE-BFC1-08002BE10318}
Class=Printer
DriverVer=05/17/2007,1.0.0.1

[Manufacturer]
%AF%=Arbfile,NTamd64

[Arbfile]
"AppX PS" = AFCLIENT,,

[Arbfile.NTamd64]
"AppX PS" = AFCLIENT,,

[OEM URLS]
"Arbfile"   =   "http://www.arbfile.org"

[AFCLIENT]
CopyFiles=@AFCLIENT.PPD
DataFile=AFCLIENT.PPD
DataSection=PSCRIPT_DATA
Include=NTPRINT.INF
Needs=PSCRIPT.OEM,PSCRIPT_DATA

[DestinationDirs]
DefaultDestDir=66000

[Strings]
AF="Arbfile" 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:59:15.620

将[CatalogFile](http://msdn.microsoft.com/en-us/library/windows/hardware/ff547502%28v=vs.85%29.aspx)指令添加到文件的部分，`[Version]`用于生成文件，然后用于对文件进行签名。`inf`[`inf2cat`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553618%28v=vs.85%29.aspx)`cat`[`signtool`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551778%28v=vs.85%29.aspx)`cat`

如果您使用 Microsoft 交叉签名的证书，则不会出现安装程序安全警告。

您可以在 WDK中找到`inf2cat`和。`signtool`

# java - 未来事件/Java 类完成后发生动作的模式名称

> ID：11420356
> 
> 赞同：2
> 
> 时间：2012-07-10T19:18:50.947
> 
> 标签：java, design-patterns, asynchronous, functional-programming, functional-java

我目前有一个名为 Promise 的类，其工作方式如下：

1.  它具有未来价值
2.  它总是可以接受使用未来值作为参数的后续操作
3.  当值完成时，函数队列启动
4.  未来完成后添加的任何功能同步发生

所以这似乎是我们在 Java 中使用的函数式编程的设计模式。重要的是我们可以对延迟事件进行菊花链式连接，据我了解，这是 C# 3.0 语言中更多内置的功能，但您必须与 Java 类一起破解。不幸的是，第一，我不知道有比“承诺”或“未来”更好的名称，这似乎具有误导性，因为重点更多的是“DelayedCallStack”而不是手头的价值，第二，我不知道除了编写我们自己相当复杂的 Promise 类之外，还有其他方法可以做到这一点。理想情况下，我想把它从功能性 Java 库中提取出来，但到目前为止，我还没有理解这个概念。

注意 Java 甚至没有为带有参数的异步回调提供语言/库支持，这是我对能够找到它感到如此悲观的原因之一。

那么，这种模式是什么，可以在库中实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:23:57.250

看看 Guava 中的 ListenableFuture：

[http://code.google.com/p/guava-libraries/wiki/ListenableFutureExplained](http://code.google.com/p/guava-libraries/wiki/ListenableFutureExplained)

ListenableFuture 允许您添加回调以在 Future 计算完成时执行。您可以控制回调在哪个线程池下执行，因此它们可以同步或异步执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T19:27:23.953

我只能说我们在 Flex (ActionScript) 中实现了几乎完全相同的东西，我们也称它为 Promise。在 Clojure 中，promise 是相当轻量级的东西：对它的`get`操作会阻塞，直到另一个线程`deliver`成为 promise。它基本上是一个单元素队列，只是它永远保留它的值，所以后续`get`的 s 总是成功的。

你所拥有的是一种承诺，再加上它的价值观察者。我不知道有任何特殊术语恰好涵盖了这种情况。

# 编辑

现在我注意到您的“承诺/未来”可能拥有产生其未来价值的代码（至少它是否存在并不完全明显）。我提到的 ActionScript 实现并没有这样做——它的行为类似于 Clojure，值是从外部提供的。我认为这是未来和承诺之间的关键区别。

# python - MatPlotLib 中的定时/艺术家动画

> ID：11420357
> 
> 赞同：1
> 
> 时间：2012-07-10T19:18:54.800
> 
> 标签：python, animation, matplotlib, visualization, data-visualization

我喜欢 Matplotlib，但有时缺乏“白痴指南”的例子令人愤怒。

长话短说，我有几个来自多个实体的模拟运动投掷 3D 空间的 XYZ 位置数据的大型列表。我目前静态地这样做，即

```
for entity in entities:
    x=map(itemgetter(0),positionLog(entity))
    y=map(itemgetter(1),positionLog(entity))
    z=map(itemgetter(2),positionLog(entity))
    ax.plot(x,y,z,label=nameLookup(entity))
plt.show() 
```

我想做的是让这些列表“步出”，即所有实体都在 t(0) 处，然后添加 t(1) 点，依此类推。

但是，在我[找到的](http://matplotlib.sourceforge.net/examples/animation/subplots.html)[任何](http://matplotlib.sourceforge.net/examples/animation/simple_3danim.html)[示例](https://stackoverflow.com/questions/9514393/take-snapshots-every-second-using-artist-animation)中都不清楚如何实现这一点。我看到的示例显示了如何进行单独的运行，即针对一个实体，但我看不到如何以锁步方式完成所有 (N)。

请问有什么建议吗？:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:02:44.650

所以我认为你想要做的一种方法是制作 x、y 和 z 列表。将 t(0) 添加到绘图并显示绘图。接下来，将 t(1) 附加到原始 x、y、z 列表，使用新的 x、y、z 坐标更新绘图，然后刷新绘图（这是 matplotlib 中制作动画的旧方法）。

这个例子： http: [//matplotlib.sourceforge.net/examples/animation/basic_example.html](http://matplotlib.sourceforge.net/examples/animation/basic_example.html) 使用内置的动画功能以新的方式生成动画，这正是我认为你想要的，只需添加你的第三个坐标。

# objective-c - 从函数目标 c 返回字符串

> ID：11420358
> 
> 赞同：0
> 
> 时间：2012-07-10T19:18:55.690
> 
> 标签：objective-c, xml

我有这个函数可以通过请求操作获取 xml：

```
-(id)xmlRequest:(NSString *)xmlurl
{
    AFKissXMLRequestOperation *operation = [AFKissXMLRequestOperation XMLDocumentRequestOperationWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:xmlurl]] success:^(NSURLRequest *request, NSHTTPURLResponse *response, DDXMLDocument *XMLDocument) {
        NSLog(@"XMLDocument: %@", XMLDocument);
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, DDXMLDocument *XMLDocument) {
        NSLog(@"Failure!");
    }];
    [operation start];
    return operation;
} 
```

这是我调用此函数的代码：

```
Request *http=[[Request alloc] init];
NSString *data=[http xmlRequest:@"http://legalindexes.indoff.com/sitemap.xml"];
NSError *error;
DDXMLDocument *ddDoc=[[DDXMLDocument alloc] initWithXMLString:data options:0 error:&error];
NSArray *xmlItems=[ddDoc nodesForXPath:@"//url" error:&error];
NSMutableArray *returnArray = [[NSMutableArray alloc] initWithCapacity:[xmlItems count]];
for(DDXMLElement* itemElement in xmlItems){
    DDXMLElement *element = [[itemElement nodesForXPath:@"loc" error:&error] objectAtIndex:0];
    NSLog(@"valueasstring %@", element);
    [returnArray addObject:element];
} 
```

我需要 xmlRequest 返回一个字符串，以便我可以获取 XML，但是 [操作开始] 创建正确的输出，但我不能将它放入字符串中。如何将输出定向到字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:44:01.317

# objective-c - 禁用 NSDictionary 的排序

> ID：11420362
> 
> 赞同：1
> 
> 时间：2012-07-10T19:19:18.000
> 
> 标签：objective-c, ios, nsdictionary

我创建了一个 NSDictionary，我放了一些对象和键。但问题是键是按我理解的键的第一个字母排序的。例如，我输入“G”、“B”、“C”。因此，它将它们分类并显示为“B”、“C”、“G”。我想禁用排序，我该怎么做。我正在处理更复杂的示例，但我想在我的问题中保持简单。 **问题：**如何禁用 NSDictionary 中的排序，或者我如何自己对 NSDictionary 进行排序？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:20:59.820

“排序”不是 an 所`NSDictionary`知道的，如果您希望数据按特定顺序排列，则应该使用`NSArray`an

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T19:47:16.110

正如@Dan F 所说， NSDictionary 不会对其条目进行排序。正如@Hot Licks 在评论中所述，NSDictionary 将其内容按任意顺序排列。你永远不应该假设字典中条目的顺序。NSArray 更适合这种事情。

如果您真的想以某种预定义的排序顺序*显示*字典的内容，您可以获取使用与它们关联的值排序的键数组。NSDictionary 类具有支持这一点的`keysSortedByValueUsingSelector:`和`keysSortedByValueUsingComparator:`方法。因此，如果您想通过将值按升序排序来控制显示顺序，您可以执行如下操作：

```
NSArray *orderedKeys = [myDictionary keysSortedByUsingSelector:@selector(caseInsensitiveCompare:)];
for (int i = 0; i < [sortedKeys count]; i++) {
    NSString *key = [sortedKeys objectAtIndex:i];
    NSLog(@"%@ = %@", key, [myDictionary objectForKey:key]);
} 
```

结果应显示字典中的每个条目，并按每个条目中的值排序。

# c# - 检测光盘是否在 DVD 驱动器中

> ID：11420365
> 
> 赞同：6
> 
> 时间：2012-07-10T19:19:38.467
> 
> 标签：c#

是否有一种简单的方法可以检测 DVD 驱动器中是否插入了光盘？我不在乎哪种光盘（CD、DVD 或蓝光）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-10T19:23:16.623

使用 WMI 检测 CD/DVD 驱动器中的磁盘：

```
foreach (var drive in DriveInfo.GetDrives()
                               .Where(d => d.DriveType == DriveType.CDRom))  
MessageBox.Show(drive.Name + " " + drive.IsReady.ToString()); 
```

从[这里](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/1ecb74cd-d193-40f5-9aa3-47a3c9adb4ea/)。

[DriveType Enumeration](http://msdn.microsoft.com/en-us/library/system.io.drivetype%28v=vs.85%29.aspx)可以帮助您使用哪种光盘：

*   `CDRom`：驱动器是光盘设备，例如 CD 或 DVD-ROM。
*   `Fixed`: 驱动器是固定磁盘。
*   `Network`：驱动器是网络驱动器。
*   `NoRootDirectory` 该驱动器没有根目录。
*   `Ram`: 驱动器是 RAM 盘。
*   `Removable`：驱动器是可移动存储设备，例如软盘驱动器或 USB 闪存驱动器。
*   `Unknown`: 驱动器类型未知。

* * *

有关 CD/DVD/蓝光的种类，请参见[IMAPI_MEDIA_PHYSICAL_TYPE 枚举](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366217%28v=vs.85%29.aspx)：

*   未知
*   光盘
*   CDR
*   CDRW
*   光驱
*   影碟机
*   DVDPLUS
*   DVDPLUSRW
*   DVDPLUSR_DUALLAYER
*   DVDDASHR
*   DVDDASHRW
*   DVDDASHR_DUALLAYER
*   磁盘
*   DVDPLUSRW_DUALLAYER
*   高清DVD光盘
*   高清DVDR
*   硬盘驱动器
*   只读存储器
*   BDR
*   BDRE
*   最大限度

你的代码可能是这样的：

```
public bool IsDiscAvailable(int driveNumber)
{
    MsftDiscMaster2Class discMaster = new MsftDiscMaster2Class();
    string id = discMaster[driveNumber];

    MsftDiscRecorder2Class recorder = new MsftDiscRecorder2Class();
    recorder.InitializeDiscRecorder(id);

    MsftDiscFormat2DataClass dataWriter = new MsftDiscFormat2DataClass();
    if (dataWriter.IsRecorderSupported(recorder))
    {
        dataWriter.Recorder = recorder;
    }
    else
    {
        Console.WriteLine("Recorder not supported");
        return false;
    }
    if (dataWriter.IsCurrentMediaSupported(recorder))
    {
        var media = dataWriter.CurrentPhysicalMediaType;
        if (media == IMAPI_MEDIA_PHYSICAL_TYPE.IMAPI_MEDIA_TYPE_UNKNOWN)
        {
            Console.WriteLine("Unknown media or no disc");
        }
        else
        {
            Console.WriteLine("Found disc type {0}", media);
            return true;
        }
    }
    else
    {
        Console.WriteLine("Disc absent or invalid.");
    }
    return false;
} 
```

从[这里](http://social.msdn.microsoft.com/Forums/en/wpf/thread/4159cc0d-b517-40e2-9e8e-5b2a0c960359)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:22:11.967

[如何检测 CD-ROM 是否加载到 CD-ROM 驱动器中](http://www.codeproject.com/Tips/295010/How-to-Detect-CD-ROM-is-loaded-in-the-CD-ROM-drive)

从上面的链接

```
using System;
using System.Management;

class Application
{
    public static void Main()
    {
        SelectQuery query = 
            new SelectQuery( "select * from win32_logicaldisk where drivetype=5" );
        ManagementObjectSearcher searcher = 
            new ManagementObjectSearcher(query);

        foreach( ManagementObject mo in searcher.Get() )
        {
            // If both properties are null I suppose there's no CD
            if(( mo["volumename"] != null) || (mo["volumeserialnumber"] != null))
            {
                Console.WriteLine("CD is named: {0}", mo["volumename"]);
                Console.WriteLine("CD Serial Number: {0}", mo["volumeserialnumber"]);
            }
            else
            {
                Console.WriteLine("No CD in Unit");
            }
        }

        // Here to stop app from closing
        Console.WriteLine("\nPress Return to exit.");
        Console.Read();
    }
} 
```

# php - 多个上传php

> ID：11420368
> 
> 赞同：1
> 
> 时间：2012-07-10T19:19:55.513
> 
> 标签：php, html

我卡在一个问题上，

我创建了一个多重上传器，它工作正常，直到我希望我上传的文件在数据库中注册名称，我得到的错误消息是

> 警告：mysql_real_escape_string() 期望参数 1 是字符串，数组在第 16 行的 C:\wamp\www\bookstyled\profile.php 中给出

我的第 16 行是变量 file_name

```
$file_name = mysql_real_escape_string($_FILES['file_name']['name']); 
```

如果我删除 mysql_real_escape_string，它实际上保存到数据库但不是作为文件名，但它说“数组”

这是一些代码

```
if(isset($_FILES['file_name'])) {
    foreach ($_FILES['file_name'] ['tmp_name'] as $key => $tmp_name){

$file_name = mysql_real_escape_string($_FILES['file_name']['name']);

$dt1=date('y-m-d H:m:s');
$ip=$_SERVER['REMOTE_ADDR'];

    mysql_query("INSERT INTO `files` (`file_name`, `user_name`,`file_time`,`file_ip`) VALUES ('$file_name', '{$_SESSION['username']}','$dt1','$ip')") ; 
move_uploaded_file($tmp_name, "core/files/{$_FILES['file_name']['name'][$key]}");
}
} 
```

如果我没有提到它正在上传文件。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:40:21.960

您已启用多个上传。所以我猜你的字段的html名称是数组。例如：

```
<input type="file" name="file_name[]" multiple="multiple"> 
```

现在 $_FILES['file_name']['name'] 不保存一个文件，而是一个数组中的多个文件。

每个文件都通过单独访问

```
$_FILES['file_name']['name'][$i] //where $i is a 0,1,2..... 
```

由于您正在使用

```
$file_name = mysql_real_escape_string($_FILES['file_name']['name']) 
```

函数 mysql_real_escape_string 没有被赋予一个字符串作为参数，而是一个完整的数组，其中包含上传到“file_name”的每个文件。

解决方法很简单，你需要使用

```
file_name = mysql_real_escape_string($_FILES['file_name']['name'][$key]) 
```

$key 因为我看到您已经在 move_upload_file 函数中使用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:24:29.150

如果你改变这个

```
$file_name = mysql_real_escape_string($_FILES['file_name']['name']); 
```

对此

```
$file_name = mysql_real_escape_string($_FILES['file_name']['name'][$key]); 
```

当您`[$key]`在这句话中使用它时，`move_uploaded_file($tmp_name, "core/files/{$_FILES['file_name']['name'][$key]}");`我认为您也应该在第 16 行使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:26:30.310

看起来 $_FILES['file_name']['name'] 是一个数组而不是字符串，所以试试 $_FILES['file_name']['name']['key']

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T19:24:59.497

未经测试，但可以工作。

```
if(isset($_FILES['file_name'])) {
    foreach ($_FILES['file_name'] as $file){

       $file_name = mysql_real_escape_string($file['tmp_name']);

       $dt1=date('y-m-d H:m:s');
       $ip=$_SERVER['REMOTE_ADDR'];

       mysql_query("INSERT INTO `files` (`file_name`, `user_name`,`file_time`,`file_ip`) VALUES ('$file_name', '{$_SESSION['username']}','$dt1','$ip')") ; 
       move_uploaded_file($tmp_name, "core/files/{$file['name']}");
    }
} 
```

# javascript - 如何在 Google 脚本中删除 Google 缓存？

> ID：11420369
> 
> 赞同：1
> 
> 时间：2012-07-10T19:19:57.417
> 
> 标签：javascript, google-apps-script, google-sheets

我有一个用于从外部 API 返回信息的 Google 文档脚本。但我的问题是 Google 保存了 Cache ，所以它没有更新它。我的问题是如何删除**或**禁用 Google 缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T06:52:29.070

避免它比清除它更容易。可以通过添加带有随机数的附加 GET 参数来完成。只需生成它并附加它。

```
var randomNum = Math.floor(Math.random()*1001);
var result = UrlFetchApp.fetch("http://url.com/foobar?random=" + randomNum); 
```

1001 表示随机数将在 0 到 1000 之间，根据需要进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:16:53.880

我与 Digital Lemon 进行了交谈，我们这样做：

```
var randomNum = Math.floor(Math.random()*100);
var dot = repeat('.', randomNum)
var text =    UrlFetchApp.fetch("http://api.craea.name/esim/military/damage/json/"+unit+"/1"+dot).getContentText();

function repeat(s, n){
var a = [];
while(a.length < n){
    a.push(s);
}
return a.join('');
} 
```

这奏效了。谢谢你的帮助。

# playframework - Play Framework 2.0：将 pom.xml 与 SBT 一起使用

> ID：11420379
> 
> 赞同：1
> 
> 时间：2012-07-10T19:21:06.143
> 
> 标签：playframework, playframework-2.0, sbt

我正在为我的组织评估 Play 2.x for Java，并希望将 pom.xml（或者如果涉及到，ivy.xml）文件与我的 Build.scala 结合使用，因为这样更容易IDE 集成。

我查看了[https://github.com/playframework/Play20/wiki/SBTDependencies](https://github.com/playframework/Play20/wiki/SBTDependencies)和[https://github.com/harrah/xsbt/wiki/Library-Management](https://github.com/harrah/xsbt/wiki/Library-Management)，不幸的是我不知道我应该在哪里添加`externalPom()`通话。

所以我的项目结构如下：

```
projectname 
-pom.xml
-project
    - Build.scala 
```

这是我的 Build.scala 文件：

```
object ApplicationBuild extends Build {

    val appName         = "Siddhu Warrier"
    val appVersion      = "1.0-SNAPSHOT"

    val appDependencies = Seq(
      // Add your project dependencies here,
    )

    val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
      // Add your own project settings here
    )

} 
```

如何让它使用我的 pom.xml？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:56:30.163

这听起来像是一个纯粹的 sbt 相关问题（所以如果这不起作用，我建议在这里问它[https://groups.google.com/forum/?fromgroups#!forum/simple-build-tool](https://groups.google.com/forum/?fromgroups#!forum/simple-build-tool)），无论如何，尝试将 externalPom() 添加到现有设置块或主项目的设置中，即

```
val myExternalPom = super.settings ++ externalPom(baseDirectory(_ / "custom-name.xml"))
val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA, settings = myexternalPom).settings(
  // Add your own project settings here
) 
```

或者

```
 val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
      externalPom() :_*
    ) 
```

通常适用于大多数设置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:33:00.823

你看过 play2-maven-plugin 吗？似乎它应该按照您的要求执行，因为它似乎将使用您的 pom.xml 构建您的项目。据我了解，它只是包装了 Play 命令以供 Maven 使用。

[http://cescoffier.github.com/maven-play2-plugin/maven/release/](http://cescoffier.github.com/maven-play2-plugin/maven/release/)

请注意，我自己没有使用过这个插件，但最初是在开始一个 Play2 项目时对它感兴趣。

# mysql - MySQL 二级索引

> ID：11420383
> 
> 赞同：2
> 
> 时间：2012-07-10T19:21:18.513
> 
> 标签：mysql, performance, indexing

如果我试图提高使用来自特定表的 4 个不同列的查询的性能，我应该创建 4 个不同的索引（每列单独一个）还是应该创建 1 个包含所有列的索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:23:01.103

根据我的经验，一个包含所有 4 个值的索引是最快的。如果您使用 where，请尝试将列按对 where 有用的顺序排列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:28:23.553

包含所有四列的索引；WHERE 中使用的列应该首先出现，而您进行 == 比较的列应该首先出现。

有时，优先考虑整数列会得到更好的结果；YMMV。

例如，

```
 SELECT title, count(*) FROM table WHERE class = 'post' AND topic_id = 17
    AND date > @@BeginDate and date < @@EndDate; 
```

将有一个索引：topic_id、post、date 和 title，按此顺序。

索引中的“title”只是为了让数据库可以为那些匹配查询的记录找到“title”的值，而不需要额外访问数据表。

第一个字段上的记录分布越平衡，您将获得最好的结果（在此示例中，假设 10% 的行的 topic_id = 17，您将丢弃其他 90% 而无需运行字符串比较使用 'post' -- 并不是说​​字符串比较特别昂贵。根据数据，您可能会发现先索引日期并稍后发布，甚至使用日期优先作为 MySQL PARTITION 会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:34:24.010

单索引通常比索引合并更有效，所以如果你有像`f1 = 1 AND f2 = 2 AND f3 = 3 AND f4 = 4`单索引这样的条件，那就是正确的决定。

为了获得最佳性能，按基数降序（不同值的计数）枚举索引字段，这将有助于减少分析的行数。

少于 4 个字段的索引可能更有效，因为它需要更少的内存。

[http://www.mysqlperformanceblog.com/2008/08/22/multiple-column-index-vs-multiple-indexes/](http://www.mysqlperformanceblog.com/2008/08/22/multiple-column-index-vs-multiple-indexes/)

# php - 如何在 PHP 中随机化一组对象？

> ID：11420387
> 
> 赞同：1
> 
> 时间：2012-07-10T19:21:30.320
> 
> 标签：php, arrays, object, random, shuffle

我有一个对象数组的示例，每次执行`foreach`循环时都需要对其进行随机化。

看起来`shuffle`只适用于数组。

一件事是我不能将它转换成一个数组，因为那样它就会变成一个`STD object`我不能使用的，因为我的映射器的工作方式。

```
array(48) {
  [0] => object(Friends_Model_Friends)#142 (4) {
    ["_id":protected] => NULL
    ["_tal":protected] => object(stdClass)#194 (3) {
      ["thumb"] => object(stdClass)#196 (6) {
        ["id"] => string(8) "10884697"
        ["type"] => string(1) "2"
        ["gallery"] => string(1) "1"
      }
    }
    ["_friend":protected] => string(7) "3492149"
    ["_dependent_table":protected] => NULL
  }
  [1] => object(Friends_Model_Friends)#195 (4) {
    ["_id":protected] => NULL
    ["_tal":protected] => object(stdClass)#143 (3) {
      ["thumb"] => object(stdClass)#202 (6) {
        ["id"] => string(8) "11160632"
        ["type"] => string(1) "2"
        ["gallery"] => string(1) "1"
      }
    }
    ["_friend":protected] => string(7) "3301541"
    ["_dependent_table":protected] => NULL
  }
.... 
```

关于改组这个有什么想法吗？

**编辑：** `Zend_Debug::dump(shuffle($object));`返回`bool(true)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:30:26.343

```
<?php
$my_array;
echo '<pre>'; print_r($my_array); echo '</pre>';
shuffle ($my_array);
echo '<pre>'; print_r($my_array); echo '</pre>';
?> 
```

试试这个代码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T19:24:35.897

但是对象在一个数组中，而不是另一个对象，所以你可以使用`shuffle`......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-11T08:46:14.010

Shuffle 总是返回一个布尔值：

```
bool shuffle ( array &$array ) 
```

所以你不能像这样退货

```
return shuffle( $myAwesomeArray ); 
```

这就是我刚刚所做的，我想知道为什么它没有返回任何东西，因为你可能期待你的洗牌数组回来。

你只需要这样称呼它

```
shuffle( $myAwesomeArray );
return $myAwesomeArray; 
```

一切都应该正常工作。

# vim - 使用 VIM 移动到当前行中的下一个 _

> ID：11420388
> 
> 赞同：3
> 
> 时间：2012-07-10T19:21:32.023
> 
> 标签：vim

当我查看以下单词时遇到问题：

```
my_class_name 
```

按 w 会将我带到单词的末尾。然而，我想跳到下一次出现的_。

我正在使用 dt_ 删除直到 _。跳转命令有类似的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T19:23:52.317

在正常模式下使用`t``_`不带修饰符跳转到下一个字符之前的字符`_`。用于`f``_`直接跳转到该角色。或用于`/``_`搜索所有行的匹配项（将自动跳转到第一个匹配项）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T19:23:10.920

在命令模式下`f``_`就可以了。

# javascript - 使用 jQueryUI.autocomplete 和 Backbone JS 的 Javascript 模块

> ID：11420391
> 
> 赞同：2
> 
> 时间：2012-07-10T19:21:41.013
> 
> 标签：javascript, jquery, jquery-ui, backbone.js, requirejs

假设我想`jQueryUi.autocomplete`用来制作一个从`backboneCollection`.

我为自动完成模块实现了以下代码 (1)，
为 Backbone.view (2) 实现了以下代码。

实际上，我不喜欢它，因为当用户不键入任何字母时，也会执行集合的获取。

当用户开始在输入框中输入内容时，我应该如何执行`fetching collection`or only？`source function`

* * *

PS：
我已经发布了一个类似的问题[jQuery Autocomplete Plugin using Backbone JS](https://stackoverflow.com/questions/11413430/jquery-autocomplete-plugin-using-backbone-js)，但是由于 aoutocomplete 模块的需求可以在不同的视图之间共享，我决定在自动完成模块中移动集合的获取。

* * *

(1)

```
/*global define */
define([
    'users',
    'jquery',
    'jqueryUi'
], function (UserCollection, $) {
    "use strict";
    var autoComplete = function(element) {

        var userCollection,
            data;

        userCollection = new UserCollection(); 
        userCollection.fetch();

        data =  userCollection.toJSON();

        element.autocomplete({
            minLength: 3,
            source: function(request, response) {
                var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
                response($.grep(data, function(value) {
                    return matcher.test(value.name);
                }));
            },
            create: function() {
                element.val(data.name);
            },
            focus: function(event, ui) {
                element.val(ui.item.name);
                return false;
            },
            select: function(event, ui) {
                element.val(ui.item.name);
                return false;
            }
        }).data('autocomplete')._renderItem = function(ul, item) {
            return $('<li></li>')
                .data('item.autocomplete', item)
                .append('<a><img src="' + item.avatar + '" />' + item.name + '<br></a>')
                .appendTo(ul);
        };
    };

    return autoComplete;
}); 
```

* * *

(2)

```
// View1 (view using the module autocomplete)
define([
    'autoCompleteModule'
], function (autoCompleteModule) {
    var MyView = Backbone.View.extend({

        events: {
            'focus #names': 'getAutocomplete'
        },
        getAutocomplete: function (e) {
            autoCompleteModule($('#names'));
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:23:29.480

//来自 [使用 Backbone JS 的 jQuery 自动完成插件的伪代码](https://stackoverflow.com/questions/11413430/jquery-autocomplete-plugin-using-backbone-js)

```
var MyView = Backbone.View.extend({
initialize: function () {
    this.myCollection = new MyCollection();

},
events: {
    'focus #names': 'getAutocomplete',
    'keydown #names':'invokefetch'
},
invokefetch : function(){
   this.myCollection.fetch(); 
   $("#names").unbind( "keydown", invokefetch);
},    
getAutocomplete: function () {
    $("#names").autocomplete({
        source: JSON.stringify(this.myCollection)
    });
} 
```

});

EDIT-20120711--------- 这个怎么样：

//伪代码...

```
// View1 (view using the module autocomplete)
define([
    'autoCompleteModule'
], function (autoCompleteModule) {
    var MyView = Backbone.View.extend({

        events: {
            'keydown #names': 'getAutocomplete'
        },
        getAutocomplete: function (e) {
            var el = $('#names');
            if(!el.data){
                autoCompleteModule(el);
            }
        }
    });
}); 
```

# php - 检索 wordpress 页面的原始 url

> ID：11420395
> 
> 赞同：2
> 
> 时间：2012-07-10T19:22:03.253
> 
> 标签：php, wordpress

我知道，wordpress 会将紧密匹配的 url 重定向到其原始 url。但是，我需要在代码执行的一开始就知道实际的 url。是否可以？

1）如果有任何方法将 url 作为参数并返回其原始 wordpress url ，那会很好，但不确定它是否存在。有没有类似的东西？

2) 请问这个测试和重定向在代码中的哪个位置？

3）有没有什么钩子可以用来添加插件来控制这种情况？

提前致谢。

例子：

假设，我在这个网址上有一个帖子：“http://mydomain.com/example-post-page”

现在，如果我尝试通过“http://mydomain.com/example-post-page/”访问它，它会将您重定向到原始的第一个 url。对于 url 中的其他几个小更改也是如此，所有这些都会将您重定向到实际的永久链接 url。

我的目标是控制这种重定向。这就是为什么，当我在 "http://mydomain.com/example-post-page/" 上时，我想知道（我在根 index.php 上的代码）这是原始永久链接还是其他东西，在它重定向之前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:25:30.780

如果您尝试在 PHP 中执行此操作，您可以询问服务器请求的 URL 是什么。尝试访问 $_SERVER[ ] 看看这是否有你要找的东西。（提示：要在 php 中查看整个变量，请使用`print_r($_SERVER);`）

我在我的 wordpress 网站上执行了命令并返回：

```
 Array
(
    [SERVER_SOFTWARE] => Apache
    [REQUEST_URI] => /wordpress_NEWURL/cookbook/
    [REDIRECT_SCRIPT_URL] => /wordpress_NEWURL/cookbook/
    [REDIRECT_SCRIPT_URI] => http://openmdao.org/wordpress_NEWURL/cookbook/
    [REDIRECT_HTTPS] => off
    [REDIRECT_X-FORWARDED-PROTO] => http
    [REDIRECT_X-FORWARDED-SSL] => off
    [REDIRECT_STATUS] => 200
    [SCRIPT_URL] => /wordpress_NEWURL/cookbook/
    [SCRIPT_URI] => http://openmdao.org/wordpress_NEWURL/cookbook/
    [HTTPS] => off
    [X-FORWARDED-PROTO] => http
    [X-FORWARDED-SSL] => off
    [HTTP_HOST] => openmdao.org
    [HTTP_X_FORWARDED_HOST] => openmdao.org
    [HTTP_X_FORWARDED_SERVER] => openmdao.org
    [HTTP_X_FORWARDED_FOR] => 128.156.10.80
    [HTTP_HTTP_X_FORWARDED_PROTO] => http
    [HTTP_HTTPS] => off
    [HTTP_X_FORWARDED_PROTO] => http
    [HTTP_X_FORWARDED_SSL] => off
    [HTTP_CONNECTION] => close
    [CONTENT_LENGTH] => 92
    [HTTP_CACHE_CONTROL] => max-age=0
    [HTTP_ORIGIN] => http://openmdao.org
    [HTTP_USER_AGENT] => Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5
    [CONTENT_TYPE] => application/x-www-form-urlencoded
    [HTTP_ACCEPT] => text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
    [HTTP_REFERER] => http://openmdao.org/wordpress_NEWURL/cookbook/
    [HTTP_ACCEPT_ENCODING] => gzip,deflate,sdch
    [HTTP_ACCEPT_LANGUAGE] => en-US,en;q=0.8
    [HTTP_ACCEPT_CHARSET] => ISO-8859-1,utf-8;q=0.7,*;q=0.3
    [HTTP_COOKIE] => wp-settings-1=m7%3Do%26m11%3Do%26wplink%3D0%26editor%3Dtinymce%26hidetb%3D1%26align%3Dright; wp-settings-time-1=1341576701; wordpress_test_cookie=WP+Cookie+check; wordpress_logged_in_7f72de226f3f83cb831f7a36bd420125=admin%7C1342021433%7C1c54f9729f967300e8d1ecc80eea7e38; w3tc_referrer=http%3A%2F%2Fopenmdao.org%2Fwordpress_test%2Fsdk-1.5.6.2%2F_samples%2F; wp-settings-1=m7%3Do%26m11%3Do%26wplink%3D0; wp-settings-time-1=1339595284; greeting_set=True; _gauges_unique_month=1; _gauges_unique_year=1; _gauges_unique=1; wordpress_test_cookie=WP+Cookie+check; PHPSESSID=0302b71abfbfd5a8d7854ac168aba2f9; sessionid=7b87104b87d95624cab0fe282079aa07; csrftoken=e72c25d0cdc3a6682c89e4680742ff3b; __utma=192130932.1535996015.1339438190.1341938618.1341945509.58; __utmc=192130932; __utmz=192130932.1339605598.7.2.utmcsr=rss|utmccn=new-website|utmcmd=rss
    [HTTP_VIA] => 1.1 www-fw.grc.nasa.gov 8B58912A
    [PATH] => /usr/kerberos/sbin:/usr/kerberos/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin:/home/ph/trunk/python-hosting.com/new_site/monitor:/home/ph/trunk/python-hosting.com/new_site/manual_scripts:/root/bin
    [SERVER_SIGNATURE] => 
    [SERVER_NAME] => openmdao.org
    [SERVER_ADDR] => 127.0.0.1
    [SERVER_PORT] => 80
    [REMOTE_ADDR] => 128.156.10.80
    [DOCUMENT_ROOT] => /home/openmdao/webapps/_
    [SERVER_ADMIN] => [no address given]
    [SCRIPT_FILENAME] => /home/openmdao/webapps/wp_test/index.php
    [REMOTE_PORT] => 51907
    [REDIRECT_URL] => /wordpress_NEWURL/cookbook/
    [GATEWAY_INTERFACE] => CGI/1.1
    [SERVER_PROTOCOL] => HTTP/1.0
    [REQUEST_METHOD] => POST
    [QUERY_STRING] => 
    [SCRIPT_NAME] => /wordpress_NEWURL/index.php
    [PHP_SELF] => /wordpress_NEWURL/index.php
    [REQUEST_TIME] => 1341948361
    [argv] => Array
        (
        )

    [argc] => 0
) 
```

$_SERVER['PARAMATER'] 可以从脚本中的任何位置访问这些参数中的任何一个。我希望这可以帮到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:07:18.990

你是说the_permalink吗？[http://codex.wordpress.org/Function_Reference/the_permalink](http://codex.wordpress.org/Function_Reference/the_permalink)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T19:24:45.967

好的，最后我通过以下方式完成了它，对我来说似乎没问题：

1）收到大约网址。2) 使用这个近似 url 发出 cURL 请求。3）获取响应网址。4）返回响应网址。

代码如下：

```
function get_actual_url($approx_url){
$curlObj = curl_init();
curl_setopt($curlObj, CURLOPT_URL, $approx_url);
curl_setopt($curlObj, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curlObj, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($curlObj, CURLOPT_ENCODING , "gzip");
curl_setopt($curlObj, CURLOPT_TIMEOUT,180);

$content = curl_exec($curlObj);

$info = curl_getinfo($curlObj);
curl_close($curlObj);

if(!empty($info) && !empty($info["url"])){
    return $info["url"];
}
else {
    return $approx_url;
}} 
```

# facebook - 添加此 Facebook 分享

> ID：11420398
> 
> 赞同：0
> 
> 时间：2012-07-10T19:22:13.230
> 
> 标签：facebook, addthis

使用 AddThis 栏分享 Facebook 时遇到问题，这让我发疯。

我已经按照支持团队的建议设置了 og url 等，但连接到 facebook 需要永远 - 我收到的只是一条消息说“正在连接到 facebook”....我已将 URL 放入 facebook 调试和一切都好。

有人有什么想法吗？我几天前联系了 AddThis 支持团队，但没有回复：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:53:49.573

在连接到 Facebook 时，这听起来像是 Facebook 端的问题或您端的问题。您是否尝试过使用 Facebook 中的普通 Facebook Like 按钮来查看是否是问题所在，而不是 AddThis？您可以在此处获取该按钮：[https ://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

此外，如果 Facebook URL 调试器显示您的网站正在运行，那么它可能设置正确，只是运行缓慢。

# android - 如何移动自定义视图？

> ID：11420401
> 
> 赞同：0
> 
> 时间：2012-07-10T19:22:22.387
> 
> 标签：android, android-layout, android-custom-view

基本上我的问题是：**如何移动一个完整`view`的，而不是仅仅移动`canvas`?** **我有一个习惯`view`，我想移动整个东西，而不仅仅是`canvas`.* *

这是我尝试过的，但我得到了一个`NullPointerException`（代码不完整，我把我认为最相关的部分放在了，自定义的父级`view`也是 a `LinearLayout`）：

电阻视图类：

```
LinearLayout root;

public class ResistorView extends View{

    public ResistorView(Context context){
        super(context);         
        root = (LinearLayout)findViewById(R.id.main);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {        

    final int X = (int) event.getRawX();
    final int Y = (int) event.getRawY();
    switch (event.getAction() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            LinearLayout.LayoutParams lParams = (LinearLayout.LayoutParams) this.getLayoutParams();
            _xDelta = X - lParams.leftMargin;
            _yDelta = Y - lParams.topMargin;
            break;
        case MotionEvent.ACTION_UP:
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            break;
        case MotionEvent.ACTION_POINTER_UP:
            break;
        case MotionEvent.ACTION_MOVE:
            LinearLayout.LayoutParams layoutParams = (LinearLayout.LayoutParams) this.getLayoutParams();
            layoutParams.leftMargin = X - _xDelta;
            layoutParams.topMargin = Y - _yDelta;
            layoutParams.rightMargin = -250;
            layoutParams.bottomMargin = -250;
            this.setLayoutParams(layoutParams);
            break;
    }
    root.invalidate(); //There is a NullPointerException on this line.
    return true;
    } 
```

主要布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"        
    android:orientation="vertical"
    android:id="@+id/main">

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

<Button
    android:id="@+id/bAdd"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"        
    android:text="Add RES" />

</LinearLayout> 
```

我不知道我做错了什么，如果有人可以提供帮助，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:34:01.210

改变

```
root = (LinearLayout)findViewById(R.id.main); 
```

到

```
root = (LinearLayout)getParent(); 
```

您甚至可能希望在 onTouch 内部执行此操作并将其从构造函数中删除，例如：

```
if(root == null) {
    root = (LinearLayout)getParent();
}
root.invalidate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-08T09:03:19.940

我建议使用 FrameLayout 并调用 myCustomView.setX(x) 和 myCustomView.setY(y) 传递给方法的 x 和 y 是事件 rawX 和 rawY + deltaX 和 deltaY

ACTION_DOWN 案例

```
deltaX = v.x - event.rawX
deltaY = v.y - event.rawY 
```

deltaX 和 deltaY 是全局变量

并在 ACTION_MOVE 情况下执行此操作

```
v.x = event.rawX + deltaX
v.y = event.rawY + deltaY 
```

# python - 如何在python中调用同一类的不同实例？

> ID：11420406
> 
> 赞同：1
> 
> 时间：2012-07-10T19:22:28.870
> 
> 标签：python, instances

我是 Python 新手。我正在 SimPy 中编写一个模拟来模拟一条生产线，它看起来像：机器 1 -> 缓冲区 1 -> 机器 2 -> 缓冲区 2 -> 等等..

我的问题：我有一个类，机器，其中有几个实例。假设当前实例是机器 2。此实例的方法会影响机器 1 和机器 3 的状态。例如：如果缓冲区 2 为空，则机器 3 空闲。但是当机器 2 将零件放入缓冲区 2 时，机器 3 应该被激活。

那么，从该类的任何给定实例引用同一类的不同实例的方法是什么？另外，稍微不同的问题：从另一个类的当前实例调用对象（在这种情况下为缓冲区 1 和 2）的方法是什么？

编辑：编辑以增加系统的清晰度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:26:45.763

一个类的实例知道该类的其他实例并不常见。

我建议您在类本身中保留某种实例集合，并使用该类来查找实例：

```
class Machine(object):
    lst = []
    def __init__(self, name):
        self.name = name
        self.id = len(Machine.lst)
        Machine.lst.append(self)

m0 = Machine("zero")
m1 = Machine("one")

print(Machine.lst[1].name)  # prints "one" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T19:57:45.483

这是我编写的一个愚蠢的示例，您将一些数据放入第一台机器，然后将其移动到第一个缓冲区，然后将其移动到第二台机器......

每台机器只是用它的 ID 号标记数据并传递它，但你可以让机器做任何事情。您甚至可以注册一个函数，以便在每台机器获取数据时调用它。

```
class Machine(object):
    def __init__(self,number,next=None):
        self.number=number
        self.register_next(next)

    def register_next(self,next):
        self.next=next

    def do_work(self,data):
        #do some work here
        newdata='%s %d'%(str(data),self.number)
        if(self.next is not None):
            self.next.do_work(newdata)

class Buffer(Machine):
    def __init__(self,number,next=None):
        Machine.__init__(self,number,next=next)
        data=None

    def do_work(self,data):
        if(self.next is not None):
            self.next.do_work(data)
        else:
            self.data=data

#Now, create an assembly line
assembly=[Machine(0)]
for i in xrange(1,20):
    machine=not i%2
    assembly.append(Machine(i) if machine else Buffer(i))
    assembly[-2].register_next(assembly[-1])

assembly[0].do_work('foo')
print (assembly[-1].data) 
```

**编辑**

缓冲区现在也是机器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:38:12.507

既然您添加了有关该问题的更多信息，我将建议一个替代解决方案。

创建计算机后，您可能希望将它们链接在一起。

```
class Machine(object):
    def __init__(self):
        self.handoff = None
    def input(self, item):
        item = do_something(item)  # machine processes item
        self.handoff(item)  # machine hands off item to next machine

m0 = Machine()

m1 = Machine()
m0.handoff = m1.input

m2 = Machine()
m1.handoff = m2.input

def output(item):
    print(item)

m2.handoff = output 
```

现在，当您调用`m0.input(item)`它时，它将进行处理，然后将项目移交给`m1`，后者将执行相同的操作并移交给`m2`，后者将进行处理并调用`output()`。这个例子展示了同步处理（一个项目将在函数调用返回之前一直通过链），但您也可以让该`.input()`方法将项目放在队列中进行处理，然后立即返回；这样，您可以使机器并行处理。

使用这个系统，机器之间的连接是明确的，每台机器只知道跟随它的那个（它*需要*知道的那个）。

我用“线程”这个词来描述像这样将对象链接在一起的过程。正在处理的项目在到达输出之前跟随从机器到机器的线程。它有点模棱两可，因为它与执行线程无关，所以这个术语并不完美。

# objective-c - iOS 会改变对象的引用吗？

> ID：11420414
> 
> 赞同：1
> 
> 时间：2012-07-10T19:22:50.087
> 
> 标签：objective-c, ios, reference

我对 iOS 没有太多经验，但我正在处理一些遗留代码。在项目中，我们使用一个对象作为字典的键：

```
NSMutableDictionary * dict;
RoleContainer * role = [Class getRole];
[dict setObject:[Class getData] forKey:role]; 
```

我们将角色传递给另一个函数。当我们尝试检索数据时：

```
data = [dict objectForKey:role]; 
```

有时返回值为空。它发生在大约 10% 的时间。我单步执行了代码，在将角色传递给函数后发现“角色”对象的引用已更改！例如，从 0x002bf500 到 0x00222bad。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T20:10:06.100

为了与`NSMutableDictionary`您的`RoleContainer`类很好地玩耍，必须实现一个`hash`和`isEqual`方法。否则，相同的角色可能会在字典中记录两次，或者通过有效键查询可能会失败。

下面是一个简短的示例，说明如何在您的班级有一个识别成员时实现您的`hash`/ ：`isEqual`

```
@interface RoleContainer : NSObject
@property (nonatomic, readonly) NSString *name;
- (NSUInteger)hash;
- (BOOL)isEqual:(id)anObject;
@end

@implementation RoleContainer
@synthesize name = _name;
- (NSUInteger)hash {
    return [name hash];
}

- (BOOL)isEqual:(id)anObject {
    if (![anObject isKindOfClass:[RoleContainer class]]) {
        return NO;
    }
    RoleContainer *other = (RoleContainer*)anObject;
    return [_name isEqual:[other name]];
}
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:26:43.127

尝试

```
NSMutableDictionary * dict = [NSMutableDictionary dictionary]; 
```

看看你的`Class`. 它是一个类，而 getRole 是一个类方法吗？它是一个对象吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:50:15.723

在该代码中， dict 将为零，因此您将向任何内容发送消息。它实际上是指向后来的东西吗？

我假设您的 RoleContainer 响应 stringValue 方法，如果它超载，这可能是查看发生了什么的好地方。

如果它使用标准字符串值，那么它会返回类和内存位置。如果有人正在将对象重置为键，这可能不可靠。

您可能还会遇到一个问题，即 getData 对象在不应该被触及的地方被释放。尝试在调试器中[启用](https://stackoverflow.com/questions/5386160/how-to-enable-nszombie-in-xcode) [NSZombieEnabled](http://cocoadev.com/wiki/NSZombieEnabled)，或启用 ARC。

# wpf - 将 ItemsSource 绑定到 XML 字符串

> ID：11420422
> 
> 赞同：1
> 
> 时间：2012-07-10T19:23:31.000
> 
> 标签：wpf, data-binding, xmldataprovider

我有一个数据库存储过程调用，除其他列外，它返回一个包含 XML 格式数据的列。我正在尝试在网格中显示此调用的结果（调用是通过实体框架进行的，因此绑定到网格的实际对象是 POCO，有问题的列是`string`属性）。

虽然正常列正确显示，但我需要能够获取该列中的 XML 数据并将其内容（它将包含多个节点）绑定到`ItemsControl`单元格模板中的一个。

例如，假设我有一个显示以下对象集合的网格：

```
class Photo
{
    string PhotoId { get; set; }
    string Name { get; set; }
    string TagListXml { get; set; }
} 
```

这旨在表示一张照片，并且该`TagListXml`属性包含一个 XML 字符串，其中列出了已应用于该照片的所有标签。类似于...的东西

```
<PhotoTags>
    <Tag>Faces</Tag>
    <Tag>People</Tag>
    <Tag>Sepia</Tag>
</PhotoTags> 
```

（虽然很明显一个普通的 POCO 会有一个`List<string>`或类似的东西，让我们暂时假设我必须使用一个 XML 字符串）

在我的网格中，我希望能够指定一个`ItemsControl`使用此 XML 并最终为我提供项目`Faces`、`People`和`Sepia`.

我已经为单元格模板尝试过这个：

```
<DataTemplate>
    <ItemsControl ItemsSource="{Binding TagListXml, 
                                Converter={StaticResource xmlConverter}}" />
</DataTemplate> 
```

where`xmlConverter`是这样定义的：

```
<dc:StringToXmlConverter x:Key="xmlConverter" XPath="PhotoTags" /> 
```

And`dc:StringToXmlConverter`是一个自定义`IValueConverter`，它只接受一个字符串值，实例化一个`XmlDocument`并加载字符串，然后返回一个`XmlDataProvider`带有该新文档和`XPath`上面指定的。

虽然这不会在输出窗口中以异常或绑定错误的形式产生任何错误，但它不会*做*任何事情（没有显示结果）。

我相信这是因为 an`XmlDataProvider`不能`ItemsSource`直接设置为 a ，而是必须设置为`Source`a `Binding`。（换句话说，你必须做`ItemSource="{Binding Source={StaticResource xmlProvider}}"`而不是`ItemsSource="{StaticResource xmlProvider}"`）。

我似乎无能为力，在过去的几个小时里，我一直在努力解决这个问题。

**如何将 XML 字符串绑定`ItemsSource`到`ItemsControl`?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:27:11.353

为什么不返回 a`XmlNode[]`而不是 a `XmlDataProvider`（这主要用于 XAML）？

# php - MySQL Query 中的 Soundex 无法正常工作

> ID：11420425
> 
> 赞同：1
> 
> 时间：2012-07-10T19:23:45.160
> 
> 标签：php, mysql, database, soundex

我的任务是进行查询，即使在搜索时拼写错误，也可以通过数据库查找内容，因此我使用 strcmp 来比较查询中的 soundex。我当前的代码有问题。如果我搜索 AZUS，我的意思是 ASUS，并且有一个带有 ASUS 的标题，它不会出现。那是因为在`post_entry`华硕中，`<a href="">ASUS </a>`所以我必须`soundex("%'.$arraytagsd.'")`在下面的代码中取出 a`%`来执行此操作，但是对于每个选项 %s% 或 %s 或 s% 或 s 都会使我的脚本变慢。

无论如何，仍然使用 soundex 可以更快地做到这一点吗？

我创建了这个函数来获取搜索输入的每个单词并将其与数据库进行比较

```
$colname_getPosts = $_GET['post_title'];
mysql_select_db($database_Main);
function test($string) {
    $output = '';
    $arrays = explode(' ', $string);
    foreach ($arrays as $arraytagsd) {
        $output .= ' OR strcmp(soundex(post_title), soundex("%'.$arraytagsd.'%")) = 0';
        $output .= ' OR strcmp(soundex(post_entry), soundex("%'.$arraytagsd.'%")) = 0';
        $output .= ' OR strcmp(soundex(tags), soundex("%'.$arraytagsd.'%")) = 0';
        $output .= ' OR strcmp(soundex(post_author), soundex("%'.$arraytagsd.'%")) = 0';
    }
    return $output;
} 
```

我在按相关性排序的查询中使用它

```
$query_getPosts = "
SELECT post_id, post_date, post_title, post_author, post_entry, tags, sum(relevance)
FROM (
SELECT post_id, post_date, post_title, post_author, post_entry, tags, 10 AS relevance FROM blog_posts WHERE MATCH(post_title) AGAINST('%$colname_getPosts%' IN BOOLEAN MODE)  
UNION
SELECT post_id, post_date, post_title, post_author, post_entry, tags, 2 AS relevance FROM blog_posts WHERE MATCH(post_author) AGAINST('%$colname_getPosts%' IN BOOLEAN MODE)".test($colname_getPosts)." 
UNION
SELECT post_id, post_date, post_title, post_author, post_entry, tags, 5 AS relevance FROM blog_posts WHERE MATCH(post_entry) AGAINST('%$colname_getPosts%' IN BOOLEAN MODE) 
UNION
SELECT post_id, post_date, post_title, post_author, post_entry, tags, 7 AS relevance FROM blog_posts WHERE MATCH(tags) AGAINST('%$colname_getPosts%' IN BOOLEAN MODE))results
GROUP BY post_id, post_date, post_title, post_author, post_entry, tags ORDER BY relevance DESC";
$getPosts = mysql_query($query_getPosts) or die(mysql_error());
$row_getPosts = mysql_fetch_assoc($getPosts);
$totalRows_getPosts = mysql_num_rows($getPosts);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:37:39.997

您可能应该考虑为此使用 solr，但如果您想在 mysql 中执行此操作，我会这样做。

1.  对于您正在执行此搜索的列，请创建单独的 soundex 列。比如：product_name、product_name_soundex。
2.  要填充 product_name_soundex，您将不得不在代码中做很多事情：a) 检索产品名称，b) 标记名称，c) 计算每个标记的 soundex（但考虑使用双变音位），d) 存储product_name_soundex 中的结果字符串。这可能看起来像 product_name: Tonka Toy Truck product_name_soundex: T2242 T592 T2321。
3.  在 product_name 上创建一个全文索引，在 product_name_soundex 上创建一个。
4.  编写这样的代码，以便使用与构建 _soundex 列相同的标记化和 soundex 算法。

# python - 在 Pygame 中分割图像

> ID：11420426
> 
> 赞同：2
> 
> 时间：2012-07-10T19:23:50.043
> 
> 标签：python, image, split, pygame, blit

我在 pygame 中有一个 200x200px 的图像，我想将其切成两半，因此 2 个形状将是 100x200px。之后，我想在屏幕上用一定数量的像素对屏幕上的 2 个新图像进行 blit。如何以这种方式分割/裁剪图像？

编辑 - 已修复！我设法通过使用`pygame.transform.chop()`和自己解决了这个问题`pygame.transform.rotate()`。不过，感谢您的帮助。感谢 Tankor Smash 的帮助，我知道的更多。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T19:47:59.613

您不需要创建两个图像，只需使用一个并将其 blit 两次：

```
origin1 = (0,0)
separation = 20

# Load the image
img = pygame.image.load(image_path)

width, height = img.get_width()/2, img.get_height()
origin2 = origin1[0] + width + separation, origin1[1]

# Blit first half
source_area = pygame.Rect((0,0), (width, height))
screen.blit(img, origin1, source_area)

# Blit second half
source_area = pygame.Rect((width,0), (width, height))
screen.blit(img, origin2, source_area) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:33:10.890

我相信你会更好地使用`PIL`，这里[http://www.pythonware.com/products/pil/](http://www.pythonware.com/products/pil/)

但是如果你要使用 Pygame，它会类似于创建一个带有图像的表面，然后将表面的一半传送到屏幕的一部分，然后将另一半传送到另一个。

```
#load the image to a surface
img =pygame.image.load(path) 
#create a rect half the width of the image
half_rect = pygame.rect(img.width/2, img.height/2)
#blit first half
main_screen.blit((0,0), rect, img)
#blit second half
main_screen.blit((image.width+10,0),rect, img) 
```

现在那是伪代码，但我就是这样做的，大致

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T20:44:42.247

`subsurface`另一种方法是使用[http://www.pygame.org/docs/ref/surface.html#Surface.subsurface](http://www.pygame.org/docs/ref/surface.html#Surface.subsurface)

如果您在一张纸上有很多精灵，您可以将其用作精灵表：http://www.pygame.org/wiki/Spritesheet?parent [= CookBook](http://www.pygame.org/wiki/Spritesheet?parent=CookBook)

# iphone - iOS - iPhone 应用程序由包含导航栏的标签栏组成。覆盖模式视图使标签集上的区域难以点击

> ID：11420437
> 
> 赞同：0
> 
> 时间：2012-07-10T19:24:36.980
> 
> 标签：iphone, ios, modal-dialog, tabbar, viewcontroller

我有一个 iphone 应用程序，由 main.xib 中的标签栏控制器组成，其中标签栏控制器包含导航控制器，这些控制器与相应的视图控制器相关联。我认为这是非常标准的。

如果我从包含在此层次结构中的导航控制器中呈现模态视图控制器视图，则此视图控制器拥有的视图会按您的预期弹出。但是，我注意到如果我在这个“模态呈现”视图的最底部有控件（例如按钮），它很少检测到点击。似乎下面的标签集阻止了触摸。请注意，当我呈现模态视图控制器视图时，它会填充可见屏幕，它不会从选项卡集下方向上滑动。

我认为这个 tababar 控制器-> 导航控制器层次结构非常标准，我不应该能够在这个设置中从导航控制器呈现模态视图控制器而没有问题吗？我还尝试从标签栏控制器呈现模态视图控制器，效果相同。

如何在带有标签栏控制器->导航控制器层次结构的应用程序中呈现模态视图控制器，以便该视图的最低部分可以检测到触摸？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:06:48.283

查看Harry的第一个答案，我相信这个设置与您的情况有关。发布更新并让我们知道这是否有帮助：[UIView 在隐藏导航栏和标签栏时不会调整为全屏](https://stackoverflow.com/questions/1110052/uiview-doesnt-resize-to-full-screen-when-hiding-the-nav-bar-tab-bar)

另外，您使用什么代码来呈现模态视图？

# sql - 在sql查询中过滤计数结果

> ID：11420439
> 
> 赞同：0
> 
> 时间：2012-07-10T19:24:50.040
> 
> 标签：sql, sql-server-2008, tsql

如何过滤下面查询中的计数列以仅显示计数 > 1 的行？

```
select FirstName, COUNT(*) as [CountTickets] from tblParkingTickets
group by FirstName  
order by [CountTickets] desc 
```

这不起作用：

```
select FirstName, COUNT(*) as [CountTickets] from tblParkingTickets
where [CountTickets] > 1
group by FirstName  
order by [CountTickets] desc 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T19:25:53.113

与`HAVING`：

```
HAVING COUNT(*) > 1 
```

`WHERE`在 group by 之前过滤（因此`COUNT`没有任何意义）。`HAVING`分组后过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:27:10.227

```
select * from (select FirstName, COUNT(*) mycount from tblParkingTickets
group by FirstName  
order by 2 desc) where mycount > 1 
```

试试这个

# javascript - 将 JSHint 与 Express.js / 'delete' 一起使用（保留字）

> ID：11420440
> 
> 赞同：9
> 
> 时间：2012-07-10T19:24:52.947
> 
> 标签：javascript, node.js, express, jshint, gruntjs

我在 Node.js 之上使用 Express.js 来创建 RESTful API，并使用 grunt 来监视我的文件并自动检查我的 JavaScript。

每次我使用删除功能时，它都会被 JSHint 标记：

```
[L218:C9] Expected an identifier and instead saw 'delete' (a reserved word).
app.delete('/api/users/:userid', function deleteUser(req, res, next) { 
```

我知道“删除”是保留字，但它是由 Express.js 选择的！有没有更好的方法来检查我的 Express.js 应用程序？有什么办法可以关闭这个检查？？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-10T19:28:10.667

在 Express.js 中，使用`del`而不是`delete`.

```
app.del('/api/users/:userid', function deleteUser(req, res, next) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-03T04:52:26.847

解决此问题的另一种方法是使用[括号表示法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Member_Operators?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FOperators%2FMember_Operators#Bracket_notation)而不是[点表示法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Member_Operators?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FOperators%2FMember_Operators#Dot_notation)。

```
app['delete']('/api/users/:userid', function deleteUser(req, res, next) {
  /* function body */
}); 
```

过去，在使用定义了和方法的[IndexedDB](http://www.w3.org/TR/IndexedDB/)时，这种解决方法是必要的。`.delete``.continue`

这些天来，这种解决方法应该是不必要的。[自从 ES5](https://stackoverflow.com/a/17911822/778975) JavaScript 允许属性名使用保留字。很长一段时间，jsHint 默认假设你的代码是 ES3，但从[2.0.0 版本开始](http://jshint.com/blog/2013-05-07/2-0-0/)它默认假设它是 ES5，并且不会抱怨保留字被用作属性名称。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T06:53:36.960

在 JSHint 1.1.x 中，您可以`es5`为 jshint 设置选项，它允许您根据 ES5 规范使用保留字作为属性。

从 JSHint 2.0 开始，`es5`选项是默认选项，您应该被允许使用保留字作为属性。

有关更多信息，您可以[访问 http://www.jshint.com/docs/#options](http://www.jshint.com/docs/#options)

# mysql - 为什么此过程会引发“未知列”错误

> ID：11420443
> 
> 赞同：0
> 
> 时间：2012-07-10T19:25:01.497
> 
> 标签：mysql, stored-procedures

我有这个程序，但这会引发“未知列”错误

```
USE dhod;
DELIMETER @@
CREATE PROCEDURE sp_drive_size(IN uname VARCHAR(100),IN size INT)
BEGIN
    DECLARE dsize INT DEFAULT 0;
    DECLARE new_size INT DEFAULT 0;
    SELECT drive_size INTO dsize FROM profile WHERE username = uname;
    SET new_size=dsize+size;
    UPDATE profile SET drive_size=new_size WHERE username = uname; 
END @@ 
DELIMETER ; 
```

我 **在“where 子句”中收到此错误未知列“uname”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:35:00.913

这是您的原始代码

```
USE dhod;
DELIMETER @@
CREATE PROCEDURE sp_drive_size(IN uname VARCHAR(100),IN size INT)
BEGIN
    DECLARE dsize INT DEFAULT 0;
    DECLARE new_size INT DEFAULT 0;
    SELECT drive_size INTO dsize FROM profile WHERE username = uname;
    SET new_size=dsize+size;
    UPDATE profile SET drive_size=new_size WHERE username = uname; 
END @@ 
DELIMETER ; 
```

你会相信你拼错了DELIMETER ???

它应该是 DELIMITER（我会将其更改为 $$）

```
USE dhod;
DELIMITER $$
CREATE PROCEDURE sp_drive_size(IN uname VARCHAR(100),IN size INT)
BEGIN
    DECLARE dsize INT DEFAULT 0;
    DECLARE new_size INT DEFAULT 0;
    SELECT drive_size INTO dsize FROM profile WHERE username = uname;
    SET new_size=dsize+size;
    UPDATE profile SET drive_size=new_size WHERE username = uname; 
END $$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:32:18.363

建议：尝试去掉 @@delimiter 的开头和结尾，看看是否可以解决？我在网上找到的示例仅在顶部有分隔符，但没有看到包括底部第二个在内的示例。

# ruby-on-rails - 在 Rails 应用程序中执行 redis FLUSHALL 命令

> ID：11420445
> 
> 赞同：14
> 
> 时间：2012-07-10T19:25:16.987
> 
> 标签：ruby-on-rails, redis

每次 Rails 服务器启动时，我都想刷新 redis。

我怎样才能做到这一点？

提前致谢。

PS：我是rails新手，如果问题很简单，请原谅。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-10T19:29:50.497

```
port = 10000
$redis = Redis.new(:port => port)
$redis.flushall 
```

[http://fhwang.net/2010/09/23/Testing-Rails-against-a-running-Redis-instance-and-doing-it-with-Hydra-to-boot](http://fhwang.net/2010/09/23/Testing-Rails-against-a-running-Redis-instance-and-doing-it-with-Hydra-to-boot)

要在启动时运行它，请检查[https://stackoverflow.com/a/7091991/643500](https://stackoverflow.com/a/7091991/643500)

# c++ - 初始化器列表和运算符的 RHS

> ID：11420448
> 
> 赞同：48
> 
> 时间：2012-07-10T19:25:42.503
> 
> 标签：c++, c++11, operators, initializer-list

我不明白为什么不能在运算符的 RHS 上使用初始化列表。考虑：

```
class foo { };

struct bar
{
    template<typename... T>
    bar(T const&...) { }
};

foo& operator<<(foo& f, bar const&) { return f; }

int main()
{
    foo baz;
    baz << {1, -2, "foo", 4, 5};

    return 0;
} 
```

最新的 Clang（以及 gcc）抱怨：

```
clang.cc:14:9: error: initializer list cannot be used on the right hand side of operator '<<'
    baz << {1, -2, "foo", 4, 5};
    ^  ~~~~~~~~~~~~~~~~~~~~

    ^  ~~~~~~~~~~~~~~~ 
```

为什么 C++ 标准会禁止这样做？或者换句话说，为什么这会失败而不是

```
baz << bar{1, -2, "foo", 4, 5}; 
```

?

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-12T06:10:06.090

事实上，C++11 的最终版本不允许在二元运算符的右侧（或左侧）使用初始化列表。

首先，**初始化列表不是**标准第 5 节中定义的表达式。函数的参数以及二元运算符的参数通常必须是表达式，第 5 节中定义的表达式语法不包括大括号初始化列表的语法（即纯初始化列表；注意*后面的类型名通过*一个大括号初始化列表，例如`bar {2,5,"hello",7}`是一个表达式）。

为了能够方便地使用纯初始化器列表，标准定义了各种异常，这些异常总结在以下（非规范）注释中：

> *§8.5.4/1* [...] 注意：列表初始化可以用作
> 变量定义 (8.5)
> 中的初始化程序 — 作为新表达式 (5.3.4) 中的初始化程序
> — 在返回语句 (6.6 .3)
> — 作为函数参数 (5.2.2)
> — 作为下标 (5.2.1)
> — 作为构造函数调用的参数 (8.5, 5.2.3)
> — 作为非静态数据成员的初始化器 (9.2 )
> — 在 mem-initializer (12.6.2) 中
> — 在赋值 (5.17) 的右侧
> [...]

上面的第四项明确允许纯初始化列表作为函数参数（这就是为什么`operator<<(baz, {1, -2, "foo", 4, 5});`有效），第五项允许它在下标表达式中（即作为`operator[]`, eg的参数`mymap[{2,5,"hello"}]`是合法的），最后一项允许它们在右侧*赋值*的一面（但不是一般的二元运算符）。

对于像, or之类**的二元运算符没有这样的例外**，因此您不能在它们的任一侧放置一个纯初始化列表（即前面没有类型名的列表）。`+``*``<<`

至于**造成这种情况的原因，** Stroustrup 和 Dos Reis 从 2007 年开始的[草稿/讨论论文 N2215](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2007/n2215.pdf)提供了很多关于初始化列表在各种上下文中的许多问题的见解。具体来说，有一节是关于二元运算符的（第 6.2 节）：

> 考虑初始化器列表的更一般用途。例如：
> 
> ```
> v = v+{3,4};
> v = {6,7}+v; 
> ```
> 
> 当我们将运算符视为函数的语法糖时，我们自然会认为上述等价于
> 
> ```
> v = operator+(v,{3,4});
> v = operator+({6,7},v); 
> ```
> 
> 因此，将初始化列表的使用扩展到表达式是很自然的。初始化器列表与运算符结合的许多用途是一种“自然”表示法。
> 然而，编写一个允许任意使用初始值设定项列表的 LR(1) 文法并非易事。块也以 { 开头，因此允许初始化列表作为表达式的第一个（最左边）实体会导致语法混乱。
> 允许初始化列表作为二元运算符的右手操作数，在下标和语法的类似隔离部分中是微不足道的。真正的问题是允许`;a={1,2}+b;`作为赋值语句而不允许`;{1,2}+b;`. 我们怀疑允许初始化列表作为右手参数，但不允许 [原文如此] 作为大多数运算符的左手参数，这太过分了，[...]

**换句话说，初始化列表没有在右侧启用，*因为它们在左侧没有启用*，并且它们在左侧没有启用，因为这对解析器构成了太大的挑战.**

我想知道是否可以通过为初始化列表语法选择不同的符号而不是花括号来简化问题。

# android - Android无法在模拟器上安装应用程序

> ID：11420451
> 
> 赞同：0
> 
> 时间：2012-07-10T19:25:55.093
> 
> 标签：android, sockets, android-install-apk

我有一个 android 应用程序，正在尝试通过从 URL 下载来测试安装。该应用程序由我开发，我可以将应用程序加载到`emulator`使用`eclipse`并正常运行。

我上传`apk`到网络服务器并将模拟器 android 浏览器指向该位置`http://localhost:9080/myapp.apk`。模拟器正确下载应用程序。当我尝试单击下载的文件进行安装时，它会抛出一个错误，说`Unfortunately the process android.process.media has stopped`. 我不确定如何进一步解决此问题

```
Emulator Configuration: Android avd running on API 14, ICS 4.0.0 with 1GB sdcard.iso 
```

欣赏任何见解。

Logcat 显示以下内容：

```
07-10 19:17:19.195: I/qtaguid(380): Untagging socket 65 failed errno=-2
07-10 19:17:19.195: W/NetworkManagementSocketTagger(380): untagSocket(65) failed with errno -2
07-10 19:17:19.624: D/dalvikvm(80): GC_CONCURRENT freed 398K, 10% free 12133K/13383K, paused 10ms+10ms
07-10 19:17:20.174: D/dalvikvm(147): GC_CONCURRENT freed 699K, 31% free 11440K/16455K, paused 4ms+8ms
07-10 19:17:20.734: D/dalvikvm(147): GC_CONCURRENT freed 535K, 32% free 11325K/16455K, paused 3ms+7ms
07-10 19:17:21.025: D/dalvikvm(80): GC_EXPLICIT freed 105K, 10% free 12084K/13383K, paused 5ms+11ms
07-10 19:17:21.484: D/dalvikvm(380): GC_CONCURRENT freed 373K, 5% free 10112K/10631K, paused 4ms+5ms
07-10 19:17:24.464: W/KeyguardViewMediator(80): verifyUnlock called when not externally disabled
07-10 19:17:24.594: W/dalvikvm(380): Exception Ljava/lang/UnsatisfiedLinkError; thrown while initializing Landroid/drm/DrmManagerClient;
07-10 19:17:24.604: D/AndroidRuntime(380): Shutting down VM
07-10 19:17:24.614: W/dalvikvm(380): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
07-10 19:17:24.654: E/AndroidRuntime(380): FATAL EXCEPTION: main
07-10 19:17:24.654: E/AndroidRuntime(380): java.lang.ExceptionInInitializerError
07-10 19:17:24.654: E/AndroidRuntime(380):  at com.android.providers.downloads.DownloadDrmHelper.getOriginalMimeType(DownloadDrmHelper.java:97)
07-10 19:17:24.654: E/AndroidRuntime(380):  at com.android.providers.downloads.DownloadReceiver.openDownload(DownloadReceiver.java:153)
07-10 19:17:24.654: E/AndroidRuntime(380):  at com.android.providers.downloads.DownloadReceiver.handleNotificationBroadcast(DownloadReceiver.java:104)
07-10 19:17:24.654: E/AndroidRuntime(380):  at com.android.providers.downloads.DownloadReceiver.onReceive(DownloadReceiver.java:74)
07-10 19:17:24.654: E/AndroidRuntime(380):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2118)
07-10 19:17:24.654: E/AndroidRuntime(380):  at android.app.ActivityThread.access$1500(ActivityThread.java:122)
07-10 19:17:24.654: E/AndroidRuntime(380):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1196)
07-10 19:17:24.654: E/AndroidRuntime(380):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-10 19:17:24.654: E/AndroidRuntime(380):  at android.os.Looper.loop(Looper.java:137)
07-10 19:17:24.654: E/AndroidRuntime(380):  at android.app.ActivityThread.main(ActivityThread.java:4340)
07-10 19:17:24.654: E/AndroidRuntime(380):  at java.lang.reflect.Method.invokeNative(Native Method)
07-10 19:17:24.654: E/AndroidRuntime(380):  at java.lang.reflect.Method.invoke(Method.java:511)
07-10 19:17:24.654: E/AndroidRuntime(380):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-10 19:17:24.654: E/AndroidRuntime(380):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-10 19:17:24.654: E/AndroidRuntime(380):  at dalvik.system.NativeStart.main(Native Method)
07-10 19:17:24.654: E/AndroidRuntime(380): Caused by: java.lang.UnsatisfiedLinkError: Library drmframework_jni not found; tried [/vendor/lib/libdrmframework_jni.so, /system/lib/libdrmframework_jni.so]
07-10 19:17:24.654: E/AndroidRuntime(380):  at java.lang.Runtime.loadLibrary(Runtime.java:393)
07-10 19:17:24.654: E/AndroidRuntime(380):  at java.lang.System.loadLibrary(System.java:535)
07-10 19:17:24.654: E/AndroidRuntime(380):  at android.drm.DrmManagerClient.<clinit>(DrmManagerClient.java:56)
07-10 19:17:24.654: E/AndroidRuntime(380):  ... 15 more
07-10 19:17:24.804: W/InputManagerService(80): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@41647c30
07-10 19:17:25.044: I/WindowManager(80): createSurface Window{415ef168  paused=false}: DRAW NOW PENDING 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:36:13.753

正如@SevaAlekseyev 以上code.google.com/p/android/issues/detail?id=21173 所指出的，显然它是Android 中的一个错误

我可以通过单击下载中的应用程序进行安装

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:58:06.317

已在 4.1 (API 16) 中解决。由于不满意的链接错误 libdrmframework_jni.so，我得到了同样的错误。在设备上运行良好。

# android - 非市场安装的应用程序用户可以发布评论和评分吗？

> ID：11420458
> 
> 赞同：2
> 
> 时间：2012-07-10T19:26:15.410
> 
> 标签：android, google-play

我有用户通过非市场安装（手动 apk 安装）安装我的 Android 应用程序

他们能否在 Android Play 市场上发布星级评分和评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:29:32.803

简短的回答：没有。

但至少我必须有 30 个字符……对我来说它没有用。

# android - Android - webview 删除页眉和页脚仅显示选定的内容

> ID：11420463
> 
> 赞同：0
> 
> 时间：2012-07-10T19:26:37.247
> 
> 标签：android, webview

我需要将一个完整的网站转换为一个 android 应用程序。但我不希望显示每个页面中的页眉、菜单和页脚。

有什么方法可以让我单独获取网页内容并在网页视图中显示。？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-15T20:20:51.993

如果您使用的是 joomla ......我有一个对我有用的解决方案......

转到模板设置，隐藏徽标、菜单和页脚部分

在您的应用中，您不会看到任何页眉、页脚和徽标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:34:13.957

您可以控制网站的来源吗？如果是的话，为手机编写一个 css 文件（并使用 JS 来检测 UserAgent）比在移动应用程序本身中完成任何工作要容易得多。

但是，如果您真的想弄乱设备上的页面，您可以提取 html 源，更改它（删除页眉+菜单+页脚），然后将更改后的源加载到 webview 中。

# python - 在类中捕获异常

> ID：11420464
> 
> 赞同：18
> 
> 时间：2012-07-10T19:26:41.413
> 
> 标签：python, exception-handling

是否可以编写一个异常处理程序来捕获类中所有方法生成的运行时错误？我可以通过用 try/except 包围每一个来做到这一点：

```
class MyError(Exception):
    def __init__(self, obj, method):
        print 'Debug info:', repr(obj.data), method.__name__
        raise

class MyClass:
    def __init__(self, data):
        self.data = data

    def f1(self):
        try:
            all method code here, maybe failing at run time
        except:
            raise MyError(self, self.f1) 
```

我想知道是否有更通用的方法来实现相同的目标 - 对于课堂上任何地方的任何错误。我希望能够访问类数据以打印一些调试信息。另外，如何获取失败的方法名称（示例中的 f1）？

**更新**：感谢所有有见地的答案，装饰器的想法看起来像是要走的路。关于捕获所有异常的风险：分支`raise`中的语句`except`应该重新引发异常而不会丢失任何信息，不是吗？这就是为什么我也把它放在 MyError 中......

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-10T19:40:18.260

**警告：如果你想要这样的东西，很可能你不会……但如果你真的想要……**

就像是：

```
import functools

def catch_exception(f):
    @functools.wraps(f)
    def func(*args, **kwargs):
        try:
            return f(*args, **kwargs)
        except Exception as e:
            print 'Caught an exception in', f.__name__
    return func

class Test(object):
    def __init__(self, val):
        self.val = val

    @catch_exception
    def calc():
        return self.val / 0

t = Test(3)
t.calc() 
```

展示了如何装饰各个功能。然后你可以创建一个类装饰器来将这个装饰器应用到每个方法上（小心//`classmethod's`等等...）`staticmethod's``properties`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-10T19:55:19.883

假设你有一个装饰器`catch_exception`，就像@Jon Clement 的回答一样......

```
class ErrorCatcher(type):
    def __new__(cls, name, bases, dct):
        for m in dct:
            if hasattr(dct[m], '__call__'):
                dct[m] = catch_exception(dct[m])
        return type.__new__(cls, name, bases, dct)

class Test(object):
    __metaclass__ = ErrorCatcher

    def __init__(self, val):
        self.val = val

    def calc(self):
        return self.val / 0 
```

元类适用`catch_exception`于在定义`Test`.

* * *

为了响应有关每种方法的自定义消息的评论，可以将这样的消息（甚至是用于生成消息的回调函数）附加为属性：

```
class Test(object):
    __metaclass__ = ErrorCatcher
    def __init__(self, val):
        self.val = val

    def calc(self):
        return self.val / 0

    calc.msg = "Dividing by 0 is ill-advised" 
```

装饰器会在其参数上`catch_exception`寻找一个`msg`属性，并在处理异常时使用它（如果找到）。

这种方法可以扩展；而不是字符串，`msg`可以是异常类型到字符串的映射。在任何一种情况下，都可以用`catch_exception`任意回调函数替换字符串（当然，在 的支持下），该回调函数将引发的异常作为参数。

```
def calc_handler(exc):
    # ...

calc.callback = calc_handler 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T19:53:14.907

装饰器在这里是一个很好的解决方案。

这是一个如何做到这一点的示例：

```
import inspect

def catch_exception_decorator(function):
   def decorated_function:
      try:
         function()
      except:
         raise MyError(self.__class__, inspect.stack()[1][3])
   return decorated_function

class MyClass(object):
    def __init__(self):
         ...

    @catch_exception_decorator
    def f1(self):
         ... 
```

函数顶部的 @catch_exception_decorator 是`f1 = catch_exception_decorator(f1)`.

而不是做自己。**class**，您也可以从实例访问类数据，只要您不隐藏变量。inspect.stack()[1][3] 是当前函数的函数名。您可以使用这些来创建异常属性。

# objective-c - NSURLConnection didReceiveData 未调用

> ID：11420469
> 
> 赞同：6
> 
> 时间：2012-07-10T19:27:06.713
> 
> 标签：objective-c, ios, nsurlconnection

我已经阅读了大量的消息，一遍遍地重复着同样的事情：当你使用 NSURLConnection 时，*不会调用*委托方法。我知道 Apple 的文档不完整，并且引用了不推荐使用的方法，这很遗憾，但我似乎找不到解决方案。

请求的代码在那里：

```
// Create request
NSURL *urlObj = [NSURL URLWithString:url];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:urlObj cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:30];
[request setValue:@"gzip" forHTTPHeaderField:@"Accept-Encoding"];

if (![NSURLConnection canHandleRequest:request]) {
    NSLog(@"Can't handle request...");
    return;
}

// Start connection
dispatch_async(dispatch_get_main_queue(), ^{
    self.connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES]; // Edited
}); 
```

...委托方法的代码在这里：

```
- (void) connection:(NSURLConnection *)_connection didReceiveResponse:(NSURLResponse *)response {
    NSLog(@"Receiving response: %@, status %d", [(NSHTTPURLResponse*)response allHeaderFields], [(NSHTTPURLResponse*) response statusCode]);
    self.data = [NSMutableData data];
}

- (void) connection:(NSURLConnection *)_connection didFailWithError:(NSError *)error {
    NSLog(@"Connection failed: %@", error);
    [self _finish];
}

- (void) connection:(NSURLConnection *)_connection didReceiveData:(NSData *)_data {
    [data appendData:_data];
}

- (void)connectionDidFinishDownloading:(NSURLConnection *)_connection destinationURL:(NSURL *) destinationURL {
    NSLog(@"Connection done!");
    [self _finish];
} 
```

这里没有很多错误检查，但我已经确定了一些事情：

*   无论发生什么，`didReceiveData`都**不会**被调用，所以我没有得到任何数据
*   ...但数据已传输（我使用检查`tcpdump`）
*   ...并且其他方法被成功调用。
*   如果我使用`NSURLConnectionDownloadDelegate`而不是`NSURLConnectionDataDelegate`，一切正常，但我无法保留下载的文件（这是一个已知的错误）
*   错误的内存管理在完成之前不会释放请求
*   如果我在 Internet 上的某个地方使用标准 HTML 页面作为我的 URL，什么都不会改变
*   请求从主队列中启动

我不想使用第三方库，因为最终这些请求将包含在我自己的库中，并且我想最小化依赖关系。如果必须，我会`CFNetwork`直接使用，但这将是你知道的一个巨大的痛苦。

如果您有任何想法，那将有很大帮助。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-15T18:56:28.057

我遇到了同样的问题。很烦人，但似乎如果你实现这个方法：

```
- (void)connectionDidFinishDownloading:(NSURLConnection *)connection destinationURL:(NSURL *)destinationURL 
```

然后`connection:didReceiveData:`永远不会被调用。你必须改用......是的，文档说它已被`connectionDidFinishLoading:`弃用，但我认为那只是因为这种方法从.`NSURLConnectionDelegate``NSURLConnectionDataDelegate`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T19:53:13.977

我喜欢使用 sendAsynchronousRequest 方法。连接过程中信息较少，但代码更简洁。

```
 [NSURLConnection sendAsynchronousRequest:request queue:[[NSOperationQueue alloc] init] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error){
        if (data){
            //do something with data
        }
        else if (error)
            NSLog(@"%@",error);
    }]; 
```

来自苹果：

> 默认情况下，连接在创建时以默认模式在当前线程上调度。如果您使用 initWithRequest:delegate:startImmediately: 方法创建连接并为 startImmediately 参数提供 NO，则可以在使用 start 方法启动连接之前将连接安排在不同的运行循环或模式上。您可以在多个运行循环和模式上安排连接，或者在多个模式下在同一个运行循环上安排连接。

除非有理由在 [NSRunLoop currentRunLoop] 中显式运行它，否则您可以删除这两行：

```
[connection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];
[connection start]; 
```

或将模式更改为 NSDefaultRunLoopMode

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-27T06:40:25.353

NSURLConnection API 说“在为关联的 NSURLConnection 对象启动异步加载操作**的线程**上调用 ..delegate 方法。”

因为 dispatch_async 将启动新线程，并且 NSURLConnection 不会将回调传递给其他威胁，所以**不要将 dispatch_async**与 NSURLConnection 一起使用。

你不必担心冻结的用户界面，NSURLConnection 只提供异步加载的控件。

如果你有**更多的文件要下载**，你可以先开始一些连接，然后它们完成，在 connectionDidFinishLoading: 方法中你可以开始新的连接。

```
int i=0;
for (RetrieveOneDocument *doc in self.documents) {

    if (i<5) {
         [[NSURLConnection alloc] initWithRequest:request delegate:self];
        i++;
    }
}

..

-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    ii++;
    if(ii == 5) {
         [[NSURLConnection alloc] initWithRequest:request delegate:self];
        ii=0;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:31:52.737

一个可能的原因是传出`NSURLRequest`已设置为`-HTTPMethod`具有`HEAD`. 不过，很难做到这一点！

# drupal - Drupal 7 的干净 URL 的问题

> ID：11420477
> 
> 赞同：1
> 
> 时间：2012-07-10T19:27:33.757
> 
> 标签：drupal, drupal-7, clean-urls, pathauto

我环顾四周，找不到问题的答案，所以就在这里。

干净的 URL 在我的 Drupal 7 网站上启用，并且在我可以通过 www.mysite.com/about-us 和 www.mysite.com/node/12 访问“关于我们”页面的意义上“工作”。

但是，通常使用 Wordpress 和 get_permalink() 函数，每个菜单/链接（如 ?p=12）都会被重定向/重写到 /about-us。但是使用 Drupal，我的菜单链接采用 node/12 形式，当我单击链接时，我得到页面 /node/12，而不是 /about-us。

知道如何自动完成重写/重新路由吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T20:14:33.937

您最好的选择是[全局重定向](http://drupal.org/project/globalredirect)模块。它的许多功能中的第一个是：

> 检查当前 URL 的别名，如果没有使用，则进行 301 重定向。

我几乎在我创建的每个 Drupal 站点中都使用过它，而且效果很好。

# iphone - iPhone秒表应用程序以经度和纬度位置开始？

> ID：11420479
> 
> 赞同：1
> 
> 时间：2012-07-10T19:27:40.197
> 
> 标签：iphone, objective-c, nsdate, nstimer, stopwatch

是否可以让这个 iphone 应用程序 (http://www.apptite.be/tutorial_ios_stopwatch.php) 开始并根据经度和纬度计算单圈时间？因此，当手机越过 GPS 坐标时，计时器不会启动按钮，每次越过 GPS 坐标时，它会花费一圈时间并将其存储在 sql 数据库中。

希望这是有道理的...

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:36:28.433

有可能的。它可能没有您正在寻找的精度，但 Core Location 可以很容易地完成您想要的工作。

创建一个`CLLocationManager`，然后每隔一段时间生成一个`CLLocation`。调用具有可接受偏差`distanceFromLocation`的新`CLLocation`位置和起始位置。当您通过起始区域时，这应该让您知道。

这是实现位置管理器的类的头文件示例

```
#import <CoreLocation/CoreLocation.h>

@interface ViewController : UIViewController <CLLocationManagerDelegate>

@property (strong, nonatomic) CLLocationManager *locationManager;
@property (strong, nonatomic) CLLocation *startingPoint;

@end 
```

# c - 与 sizeof 一起使用的表达式的评估

> ID：11420480
> 
> 赞同：5
> 
> 时间：2012-07-10T19:27:47.637
> 
> 标签：c, expression, sizeof

是否有任何表达式将被评估为 sizeof 的操作数。我已经知道如果使用 sizeof 的可变长度操作数，表达式将被评估。但是我不能举个例子，我写了下面的代码，

```
int a[]={1,2,3};
printf("%d",sizeof(a[1]++));
printf("%d\n",a[1]); 
```

但是在这里我从输出表达式中观察到`a[1]++`没有评估。如何举个例子？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T19:55:51.327

您的数组不是可变长度数组。可变长度数组是大小不是常量表达式的数组。例如，`data`下面是一个变长数组：

```
int i = 10;
char data[i]; 
```

要查看已评估其操作数的代码示例`sizeof`，请尝试以下操作：

```
#include <stdio.h>

int main(void)
{
    int i = 41;
    printf("i: %d\n", i);
    printf("array size: %zu\n", sizeof (char[i++]));
    printf("i now: %d\n", i);
    return 0;
} 
```

它打印：

```
i: 41
array size: 41
i now: 42 
```

# c++ - 在 .net c++ 中使用 XmlDocument 编写 XML

> ID：11420481
> 
> 赞同：1
> 
> 时间：2012-07-10T19:27:49.977
> 
> 标签：c++, .net, xml, c++-cli

我正在尝试在 exe 中编写我的程序的配置，如下所示：

```
<test>
    <a1>
        <b>100</b>
        <c>2</c>
        <d>0</d>
    </a1>
    <a2>
        <b>100</b>
        <c>2</c>
        <d>0</d>
    </a2>
</test>
<test2>
<!-- ...-->
</test2> 
```

我正在尝试使用以下代码来做到这一点：

```
 XmlDocument^ doc = gcnew XmlDocument;
        doc->LoadXml( "<a1></a1");
            XmlElement^ newElem = doc->CreateElement( "value" );
            newElem->InnerText = "105";
            doc->DocumentElement->AppendChild( newElem );
            newElem = doc->CreateElement( "hotkey" );
            newElem->InnerText = "2";
            doc->DocumentElement->AppendChild( newElem );
            newElem = doc->CreateElement( "enable" );
            newElem->InnerText = "0";
            doc->DocumentElement->AppendChild( newElem );
        doc->LoadXml( "<a2></a2>");
            newElem = doc->CreateElement( "value" );
            newElem->InnerText = "105";
            doc->DocumentElement->AppendChild( newElem );
            newElem = doc->CreateElement( "hotkey" );
            newElem->InnerText = "2";
            doc->DocumentElement->AppendChild( newElem );
            newElem = doc->CreateElement( "enable" );
            newElem->InnerText = "0";
            doc->DocumentElement->AppendChild( newElem ); 
```

但第二个 loadXml 优先覆盖，我不知道如何做更多类别。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:37:39.830

看起来您忘记了[保存](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.save.aspx)您的修改`XmlDocument`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:50:35.617

您是否看过[XmlTextWriter](http://msdn.microsoft.com/en-us/library/system.xml.xmltextwriter.aspx)类？它是专门为编写 XML 而设计的，而不仅仅是表示它。链接的 MSDN 文章底部有一些简单的示例，它们与您想要做的非常相似。

如果您想要一个快速的“它只是工作”的解决方案，还可以考虑[XML 序列化。](http://msdn.microsoft.com/en-us/library/182eeyhh%28v=vs.100%29.aspx)

# iphone - ios MapKit，遵循路径

> ID：11420482
> 
> 赞同：0
> 
> 时间：2012-07-10T19:27:50.817
> 
> 标签：iphone, ios, mapkit

我的地图上有一个路径渲染。我有一系列航路点，我正在模拟通过它们的运动。

在更改显示区域时，我的坐标在转换为 CGPoint 时似乎是 Apple 实现的 floorf 。这会导致外观非常紧张，而不是平滑。

有没有办法解决这个问题？

```
[m_mapView setRegion: MKCoordinateRegionMake(coord, MKCoordinateSpanMake(0, 0))]; 
```

然后地图尝试以这个给定点为中心。但是，该点可能不是像素对齐的，可以通过以下函数查看。

```
CGPoint point = [m_mapView convertCoordinate:coord toPointToView:m_mapView]; 
```

因此，地图视图将中心点的结果置于底层，以对齐底层地图的所有像素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:46:38.967

我使视图大于屏幕以考虑偏移并避免剪裁。

我模拟一个沿路线移动的点并使用注释放置它，然后以每秒 30 帧的速度在该点上居中。

假设坐标是移动点的位置。

```
[m_mapView setCenterCoordinate: coord];

CGPoint p = [m_mapView convertCoordinate:m_mapView.centerCoordinate toPointToView:m_mapView];
CGPoint p1 = [m_mapView convertCoordinate:coord toPointToView:m_mapView];

CGPoint offset = CGPointMake(p.x - p1.x, p.y - p1.y);
CGRect frame = CGRectInset(CGRectMake(0.0f, 0.0f, 1024.0f, 1024.0f), -50.0f, -50.0f);
frame.origin.x+= offset.x;
frame.origin.y+= offset.y;
[m_mapView setFrame: frame]; 
```

# php - 来自数组的奇怪 str_replace 输出

> ID：11420485
> 
> 赞同：1
> 
> 时间：2012-07-10T19:28:04.583
> 
> 标签：php, mysql, arrays, str-replace

这类似于我之前的问题之一[，](https://stackoverflow.com/questions/11398418/intemperate-php-line-by-line)尽管这是在寻找解决方案而不是调试它的工具。我正在尝试构建一个脚本（除其他外）自动将在 MySQL 数据库中输入的名称替换为以 WikiMedia 格式加粗的名称，因此当我输入 NAME: 时，我希望得到`'''NAME''':`. 我实际得到的是`NAME'''''':`. 我已经尝试在上述问题上发布一个建议，以使用从我的数组中删除回车，`str_replace(array("\r", "\n"), array('', ''), $row);`但它没有效果。

我用来生成它的代码是：

```
<?php
$link = mysql_connect($host, $username, $pass);
$db = mysql_select_db($database, $link);
$query = "SELECT name FROM " . $prefix . ""; 
$result = mysql_query($query) or die(mysql_error());
$row = mysql_fetch_array($result) or die(mysql_error());
while($row = mysql_fetch_array($result)){
    $name[] = $row['name'];
}

$sim = $_POST['sim']; //Fetches SIM from text box.
$sim_wrap = wordwrap($sim, 80, "\n"); //Constrains to 80 columns for readability.
$sim_penultimate = str_replace("::", "<nowiki>::</nowiki>", $sim_wrap);

$sim_final = str_replace($row . ":", "'''" . $row . "''':", $sim_penultimate); //Bold     names
echo stripslashes($sim_final); //Removes slashes wordwrap() adds on some configurations example (James\'s).
?> 
```

谢谢你能给我的任何帮助，这真的让我很难过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:32:05.760

`$row`是来自`mysql_fetch_array()`- 换句话说，它是一个数组的结果。为什么要用字符串 ( `$row . ":"`) 连接它？将数组与字符串连接不起作用 - 您需要连接单个元素。

看起来你真正想做的是这样的事情......

```
$names = array();
$replaces = array();
while($row = mysql_fetch_array($result)){
    $names[] = $row['name'] . ":";
    $replaces[] = "'''" . $row['name'] . "''':";
} 
```

然后后来...

```
$sim_final = str_replace($names, $replaces, $sim_penultimate); // Bold names 
```

# c - 从C中的数组中删除空格？

> ID：11420486
> 
> 赞同：-1
> 
> 时间：2012-07-10T19:28:08.103
> 
> 标签：c, arrays, parsing, char

我试图从我的数组“secuencia”中删除空格，用户给了我这个条目：

“1 2 3 4 5 6 7 8 9”

我想删除空格，并将其保存在另一个数组中以备后用。然后，使用“ATOI”转换为整数，就像我对数组“palancas”和“palancaroja”所做的那样。这两个数组只包含一个数字，所以我对它们没有问题。

请帮助我...我正在使用 ANSI C 编程。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, const char * argv[])
{
    char palancas [20000];
    int palancai;
    char palancaroja[10];
    int palancarojai;
    char secuencia[20000];
    char temp[20000];
    int j = 0;

    printf("Dame El Numero De Palancas:");
    fgets(palancas, 20000, stdin);

    printf("Dame La Posision De La Palanca Roja:");
    fgets(palancaroja, 10, stdin);

    palancai = atoi(palancas);
    palancarojai = atoi(palancaroja);

    printf("Dame La cadena");
    fgets(secuencia, 20000, stdin);

    for (int i = 0; i < palancai; i++) {

        if (secuencia [i] != ' ') {

        temp [i] = secuencia [i];

            printf("%s", temp);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:39:00.760

这是从字符串中删除空格的最简单方法。

```
char *SourcePtr = secuencia;
char *TargetPtr = SourcePtr;

while (*SourcePtr != 0)
{
    if (*SourcePtr != ' ')
    {
       *TargetPtr = *SourcePtr;
       TargetPtr += 1;
    }
    SourcePtr += 1;
}
*TargetPtr = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:39:11.913

临界区的翻译版本

```
for (int i = 0; i < length; i++) {
    if (source[i] != ' ') {
        temp[i] = source[i];
        printf("%s", temp);
    }
} 
```

此代码将每个字符从数组复制`source`到数组`temp`，但只是跳过空格。所以 if用and is`temp`初始化，然后在循环执行之后。`XXXXX``source``A B C``temp``AXBXC`

您使用了两个索引（请参阅其他答案）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T10:45:27.340

```
#include <stdio.h>

//copy to d from s removed space
void remove_space(char *d, const char *s){
    for(;*s;++s){
        if(*s != ' ')
            *d++ = *s;
    }
    *d = *s;
}

int main(){//DEMO
    char secuencia[] = "1 2 3 4 5 6 7 8 9";
    char temp[sizeof(secuencia)];
    remove_space(temp, secuencia);
    puts(temp);//123456789
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T19:46:46.970

首先，我认为您的 for 循环正在查看错误的变量。你正试图在 palancai 上循环，你真的想在 secuencia 上循环。

您可以在下面找到一个解析 int 的函数。

```
int MyIntParse(char* str)
{
    int iReturn = 0;
    for(int i=0;i<20000;++i)
    {
        iReturn *=10;
        switch(str[i])
        {
            case '0':
            case '1':
            case '2':
            case '3':
            case '4':
            case '5':
            case '6':
            case '7':
            case '8':
            case '9':
            case '0':
                iReturn = iReturn + (str[i] - '0');
                break;
        }
    }
    return iReturn;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T19:37:31.437

您可以使用 strtok 并对分隔符字符串为“”的字符串进行标记。

换句话说：

```
char * tok;
int i = 0;
tok = strtok(secuencia, " ");
while(tok != NULL){
    temp[i] = tok[0];
    i++;
    tok = strtok(NULL, " ");
} 
```

这只有在保证每个空格之间只有一个数字时才有效。复制它的另一种方法是使用另一个循环，循环通过 strtok 直到达到 '\0'，或者使用 strcpy.

# javascript - 我可以在循环语句中使用这个编码吗

> ID：11420487
> 
> 赞同：0
> 
> 时间：2012-07-10T19:28:09.917
> 
> 标签：javascript, jquery

我有这样的代码

```
<div id="div1"></div>
<hr id="line1" color="#0f0" size="2" width="50px">
<div id="div2" ></div><br>
<hr id="line2" color="#0f0" size="2" width="50px" style="display:none;" >
<div id="div3" ></div><br>
<hr id="line3" color="#0f0" size="2" width="3.5%" style="display:none;" >
<div id="div4" ></div><br>
<hr id="line4" color="#0f0" size="2" width="3.5%" style="display:none;" >
<div id="div5" ></div><br>
<hr id="line5" color="#0f0" size="2" width="3.5%" style="display:none;"> 
```

我可以在使用脚本或 jquery 的任何循环语句中使用此编码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:39:08.727

是的。使用 HTML 模板。

试试[JQuery Tmpl](http://api.jquery.com/jquery.tmpl/)

[KnockoutJS](http://knockoutjs.com/documentation/template-binding.html)在他们的网站上详细讨论了模板。

[这个 SO answer](https://stackoverflow.com/questions/4912586/explanation-of-script-type-text-template-script)还提到了模板和几种使用它们的方法。

这是它在小提琴中的样子

[http://jsfiddle.net/YYfmu/](http://jsfiddle.net/YYfmu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:33:53.690

是的，您可以通过这种方式循环遍历 div：

```
for(var i = 0; i < 5; i++)
    $("#div"+i).some_method(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:34:54.627

[工作的jsFiddle](http://jsfiddle.net/minagabriel/JCMAJ/)

`div hr`如果你在 div 中有任何东西，你可以循环使用

或使用`hr`循环

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T19:49:59.667

我找到了答案。

```
for(var i =1; i<= 5; i++)
{
$('#target').append('<div id="div'+ i +'" </div><br>')
$('#target').append('<hr id=line'+i+'" color="#0f0" size="2" width="50px" style="display:none;">')
} 
```

# javascript - 一页上有多个 javascript 驱动的图像库

> ID：11420488
> 
> 赞同：0
> 
> 时间：2012-07-10T19:28:10.150
> 
> 标签：javascript

我在 lynda.com 上做了一个 jquery 教程来设置一个带有整洁效果和灯箱的 java 驱动（css 格式）图像库。它工作正常。

我现在想在一页上创建几个画廊，并且每个画廊只能显示与其关联的图像。问题是因为标签/ID 都是相同的，每个画廊都显示相同的图像。（有关问题的示例，请参阅... [http://www.chartoonz.com/portfolio/illustration.html](http://www.chartoonz.com/portfolio/illustration.html)）您可以看到基本功能有效。

如何让 java 脚本将一个画廊的功能限制在该画廊，而让其他画廊不理会？我想，由于 jquery 正在执行 $(document).ready，它会在渲染时发生，所以如果我可以循环它，它一次只会做一个画廊，但这仅考虑 onload 预览图像。如何分隔画廊，以便无论按下哪个缩略图，它们都不会做同样的事情？我可以吗？

正如我所说，我认为我可以循环播放它，但我遇到了麻烦！我尝试将所有 gallery_content 标签放入一个数组中，然后遍历该数组，但显然我没有这样做，因为它不起作用。

我希望我已经清楚地表达了这个问题。任何帮助，将不胜感激。这是我相关的javascript ...

```
// What to do when the document is ready
$(document).ready(function(){

// Capture the thumbnail links

$('.gallery_thumbnails a').click(function(e){

// Disable standard link behavior

e.preventDefault();

// Fade out thumbnails
// Commented out to be in their own function (/**/)
/*
$('.gallery_thumbnails a').removeClass('selected');
$('.gallery_thumbnails a').children().css('opacity', '1');
$(this).addClass('selected');
$(this).children().css('opacity', '.4');
*/

// Add variables to link thumbnail to preview
var photo_caption = $(this).attr('title');
var photo_fullsize = $(this).attr('href');
var photo_preview = photo_fullsize.replace('_fullsize', '_preview');

$('.gallery_caption').slideUp(500);
$('.gallery_preview').fadeOut(500, function(){

// preload
$('.gallery_preload_area').html('<img src="'+photo_preview+'"/>');
$('.gallery_preload_area img').imgpreload(function(){

// Write the HTML into the page
$('.gallery_preview').html('<a class="overlaylink" href="'+photo_fullsize+'"       
title="'+photo_caption+'" style="background-image:url('+photo_preview+');"></a>');

// Update the html for the gallery caption
$('.gallery_caption').html('<p><a class="overlaylink zoom" href="'+photo_fullsize+'"     
title="'+photo_caption+'">View larger</a></p><p>'+photo_caption+'</p>')

$('.gallery_preview').fadeIn(500);
$('.gallery_caption').slideDown(500);

setFancyboxLinks();
updateThumbnails();

});

});

}

// Initialize the gallery on load
var first_photo_caption = $('.gallery_thumbnails a').first().attr('title');
var first_photo_fullsize =$('.gallery_thumbnails a').first().attr('href');
var first_photo_preview = first_photo_fullsize.replace('_fullsize', '_preview');

$('.gallery_caption').slideUp(500);
$('.gallery_preview').fadeOut(500, function(){

// preload
$('.gallery_preload_area').html('<img src="'+first_photo_preview+'"/>');
$('.gallery_preload_area img').imgpreload(function(){

// Write the HTML into the page
$('.gallery_preview').html('<a class="overlaylink" href="'+first_photo_fullsize+'" title= 
"'+first_photo_caption+'" style="background-image:url('+first_photo_preview+');"></a>');

// Update the html for the gallery caption
$('.gallery_caption').html('<p><a class="overlaylink zoom" href="'+first_photo_fullsize+'" 
title="'+first_photo_caption+'">View larger</a></p><p>'+first_photo_caption+'</p>')

$('.gallery_preview').fadeIn(500);
$('.gallery_caption').slideDown(500);

setFancyboxLinks();
updateThumbnails();

});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:39:49.910

如果您在 jQuery 选择器中使用更多 id，您可以更具体地了解您的目标元素，并且您的代码将在大多数浏览器中运行得更快:-)

尝试向每个“galleryBodyWrapper” div 添加一个 id，如下所示：

```
div class="galleryBodyWrapper" id="gallery1">...
```

然后您可以为每个画廊编写单独的选择器，如下所示：

```
$('#gallery1 .gallery_thumbnails').click(function(e){...
```

当然，您必须为您正在使用的每个画廊编写一次代码。一个更简洁的方法是将画廊代码打包为一个可重用的对象，并将 jQuery 选择器传递给它的构造函数。

```
  chartoonz.ui.initGalleries('div.galleryBodyWrapper');

```

init 方法看起来像这样：

```
    /**
     * 为该页面上与选择器匹配的每个 div 创建一个画廊对象
     *
     * @return 无效
     */
    初始化画廊：功能（选择器）{
        chartoonz.$(选择器).each(
            函数（intIndex，domEle）{
                var galleryDiv = chartoonz.$(domEle);
                chartoonz.ui.gallery[intIndex] = new chartoonz.ui.gallery(galleryDiv);
            });

```
}, 
```

所以你可以像这样重构你的原始代码（我已经简单地测试过它，它似乎适用于你的 HTML）

```
//Set up a page namespace
chartoonz = {};
//localise the jQuery object to prevent conflicts
chartoonz.$ = jQuery;

/**
 * Object to contain page UI elements and interactions
 *
 */
chartoonz.ui={
    /**
     * Container for all chartoonz.ui.gallery objects on this page.
     * @var Array 
     */
    galleries:[],

    /**
     * Create a gallery object for each div on this page that matches the selector
     *
     * @return void
     */
    initGalleries:function(selector){

        chartoonz.$(selector).each(
                                   function(intIndex,domEle){
                                       var galleryDiv = chartoonz.$(domEle);
                                       chartoonz.ui.galleries[intIndex] = new chartoonz.ui.gallery(galleryDiv);
                                   });

    },

    /**
     * The gallery object
     */
    gallery:function(context){
        /**
         * container for all of the thumbnails in this gallery
         * @var Array
         */
        this.thumbnails = [];
        /**
         * The caption div for this gallery.
         * @var jQuery
         */
        this.captionEle = chartoonz.$('.gallery_caption',context);
        /**
         * The preview div for this gallery.
         * @var jQuery
         */
        this.previewEle = chartoonz.$('.gallery_preview',context);
        /**
         * The pre-load div for this gallery.
         * @var jQuery
         */
        this.preloadEle = chartoonz.$('.gallery_preload_area',context);
        /**
         * The pre-load image for this gallery.
         * @var jQuery
         */
        this.preloadEleImg = chartoonz.$('img',this.preloadEle);

        //initialise the thumbnails
        var parentGallery = this;
        chartoonz.$('a',context).each(
                                      function(intIndex,domEle){
                                          var obj = chartoonz.$(domEle);

                                          obj.click(function(e){
                                                    // Disable standard link behavior
                                                    e.preventDefault();

                                                    // Add variables to link thumbnail to preview
                                                    var photo_caption = obj.attr('title');
                                                    var photo_fullsize = obj.attr('href');
                                                    var photo_preview = photo_fullsize.replace('_fullsize', '_preview');

                                                    parentGallery.setMain(photo_caption,photo_fullsize,photo_preview);

                                                    });
                                          parentGallery.thumbnails[intIndex] = obj; 

                                      });

        /**
         * Update the html for the  gallery caption
         *
         * @return void
         */
        this.setCaption = function(photo_caption,photo_fullsize){

            this.captionEle.html('<p><a class="overlaylink zoom" href="'+photo_fullsize+'" title="'+photo_caption+'">View larger</a></p><p>'+photo_caption+'</p>')

        }

        /**
         * Set the  html for the preview
         *
         * @return void
         */
        this.setPreview = function(photo_caption,photo_fullsize,photo_preview){

            this.previewEle.html('<a class="overlaylink" href="'+photo_fullsize+'" title= "'+photo_caption+'" style="background-image:url('+photo_preview+');"></a>');  

        }

        /**
         * Set the  main image
         *
         * @return void
         */
        this.setMain = function(photo_caption,photo_fullsize,photo_preview){

            this.captionEle.slideUp(500);
            var parentGallery = this;
            this.previewEle.fadeOut(500, function(){

                                    // preload
                                    parentGallery.preloadEle.html('<img src="'+photo_preview+'"/>');
                                    parentGallery.preloadEleImg.imgpreload(function(){

                                                                           parentGallery.setPreview(photo_caption,photo_fullsize,photo_preview);
                                                                           parentGallery.setCaption(photo_caption,photo_fullsize);

                                                                           parentGallery.previewEle.fadeIn(500);
                                                                           parentGallery.captionEle.slideDown(500);

                                                                           setFancyboxLinks();
                                                                           updateThumbnails();

                                                                           });

                                    });

        }

        //  Initialize the gallery on load
        var first_photo_caption = this.thumbnails[0].attr('title');
        var first_photo_fullsize =this.thumbnails[0].attr('href');
        var first_photo_preview = first_photo_fullsize.replace('_fullsize', '_preview');
        this.setMain(first_photo_caption,first_photo_fullsize,first_photo_preview);   

    }

};

$(document).ready(function(){
                  // Navigation Menu
                  navWrapper();
                  //footerText();
                  followLogos();
                  calculateDate();

                  //This line sets up the galleries
                  chartoonz.ui.initGalleries('div.galleryBodyWrapper');

                  });

// Functions... Your other functions go here as before. 
```

希望有帮助

_佩斯

```

# php - 使用 PHP 邮件时，某些 $_POST 数组有时为空

> ID：11420495
> 
> 赞同：1
> 
> 时间：2012-07-10T19:28:29.793
> 
> 标签：php, html, forms, post

我在使用 php 邮件功能发送 html 表单的数据时遇到了一些问题。邮件功能工作正常，提交表单时接收电子邮件没有问题，但有时我的电子邮件中有空数组。

代码如下所示：

```
<?php 
error_reporting(E_ALL & ~E_NOTICE);

$email = $_POST['email'];

      //check if value is set:
if (isset($_POST['submit'])){

      $everyoneToppingList = substr(implode(', ', $_POST['everyone_platter_topping']), 0);
     $everyoneCondimentList = substr(implode(', ', $_POST['everyone_platter_condiment']), 0);

};  //end isset($_POST['submit']

$len = strlen($email);
if ($len > 0) 
{
$email_body = "Full Name: $title $fullname\n".
"Topping? - $everyoneToppingList\n".
    "Condiment? - $everyoneCondimentList\n\n";

 $email_to = "example@gmail.com"; 

   $email_from = $_POST['email']; // required

  $URL= "order.php";
  header ("Location: $URL"); 

    // create email headers

$headers = "From: $email_from \r\n";

$headers .= "Reply-To: $email_from \r\n";

$headers .= "Cc: $email_from \r\n";

$headers .= "X-Mailer: PHP/". phpversion();

mail($email_to, $email_subject, $email_body, $headers);    
 }  ?> 
```

html部分看起来像：

```
<table style="vertical-align:top;" class="form platter bread" cellspacing="2">
    <tr>
        <span class="bold">
            Choose Your Topping: 
        </span> 
        <span id="errorsDiv_everyone_platter_topping[]">
        </span>
        <td height="7" width="87" align="left" valign="middle">
             <input type="checkbox" name="everyone_platter_topping[]" value="Lettuce" id="everyone_lettuce" />
             <label for="everyone_lettuce">\
                 Lettuce
             </label>
         </td>
         <td height="7" width="87" align="left" valign="middle">
               <input type="checkbox" name="everyone_platter_topping[]" value="Tomatoes" id="everyone_tomatoes" />
               <label for="everyone_tomatoes">
                   Tomatoes
               </label>
          </td>
    </tr>
</table> 
```

当我收到电子邮件时，有时它只显示“Topping？ - , , , , , 。

真的需要帮助，任何建议都将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:58:48.177

很抱歉把它写在这里，但评论部分不足以提及对您问题的怀疑。

*   表单中的元素和 PHP 代码中使用的元素并不能清楚地说明问题。
*   也`$URL= "order.php"; header ("Location: $URL");`没有任何意义，它会重定向并且无论如何都不会发送邮件

如果我做这个微妙的改变

1.  从 PHP 代码中删除`header`代码
2.  在html表单中添加`email`输入框和`submit`提交按钮
3.  用方法在表格外添加表格`POST`

我只是通过进行上述更改使这段代码正常工作，没有任何麻烦。

我建议您编辑一个问题并再次询问或进行建议的更改（当然，您需要进行一些调整），您的代码将处于工作状态。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T19:43:07.343

在使用 em 之前首先初始化你的变量。

```
$everyoneToppingList = null;
$everyoneCondimentList = null;
if (isset($_POST['submit'])){

  $everyoneToppingList = substr(implode(', ', $_POST['everyone_platter_topping']), 0);
  $everyoneCondimentList = substr(implode(', ', $_POST['everyone_platter_condiment']), 0);

}; 

$len = strlen($email);
if ($len > 0) 
{
    if (!is_null($everyoneToppingList) && !is_null($everyoneCondimentList))
    {
        // Send your mail.
    }
} 
```

# c++ - 为什么我们不将 C++ 的 main 方法放在一个类中？

> ID：11420497
> 
> 赞同：14
> 
> 时间：2012-07-10T19:28:51.210
> 
> 标签：c++

在 C++ 中，我们为什么不将 main 方法放在一个类中（如 Java）？为什么这样做没有意义（我认为）？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-10T19:31:03.077

我们可以。`main`不是保留字。但是按照语言标准，C++ 工具链期望程序的入口点`main`在全局范围内。所以`main`类内部不会被识别为程序的入口点。

随意定义一个名为的类方法`main`，并从全局调用它`main`。

这种设计完全来自 C。与现有 C 代码的兼容性是早期 C++ 的主要设计目标，更改入口点约定几乎没有任何实际好处。所以他们保留了 C 标准。正如大家所说，C++ 与 Java 不同，它完全允许独立（即非类）函数。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-10T19:44:07.500

我们为什么要？为什么我们需要？

为了使类方法有意义，我们必须有一个对象的实例。当`main`被调用时，我们没有实例。

所以它*可以*改为静态成员函数，但*有什么意义*呢？它是“更面向对象”吗？怎么会这样？

我认为 C++ 这样做的方式很有意义：在你有任何对象之前，在任何实例存在*之前*`main`你就开始了。

 *在 Java 中，`main`是一个静态成员，因为不存在其他任何东西。但是在 C++ 中，存在非成员函数，那么为什么不`main`成为其中之一呢？

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-10T19:30:31.313

因为在远早于类的 C 中，它`main`是一个独立的函数，并且在 C++ 中没有更改以保持兼容性。

如果你真的想这样做，没有什么能阻止你编写一个你实例化的类`main`，然后调用一个`main`方法。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-11-26T06:23:32.410

C++ 没有要求，在 C# 和 Java 中发现，每段代码都属于某个描述的类。C++ 允许独立函数 amd`main`属于该类别。

因此不`main`属于*任何*阶级。

当然，您可以*创建*一个包含`main`函数的类，但这不会是在程序启动时自动调用*的主函数：*

```
#include <iostream>

class SomeClass {
public:
    SomeClass() {
        std::cout << "In SomeClass constructor\n";
    }
    ~SomeClass() {
        std::cout << "In SomeClass destructor\n";
    }
    static int main() {
        std::cout << "In SomeClass main\n";
        return 0;
    }
};

int main() {
    std::cout << "In real main\n";
    { SomeClass xyzzy; } // Just to ensure destructor called before main exit.
    std::cout << "Exit real main\n";
} 
```

的输出表明`main`未调用的类变体：

```
In real main
In SomeClass constructor
In SomeClass destructor
Exit real main 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-10T21:38:00.617

C++ 旨在并且应该与 C 向后兼容，如果不允许 main，cfront（第一个 C++ 编译器）将无法工作。

第一个/最初的C++编译器，叫做cfront，通过将C++转换成C来编译C++，而C语言需要使用main()

有关详细信息，请参阅以下 URL：

[http://en.wikipedia.org/wiki/Cfront](http://en.wikipedia.org/wiki/Cfront)

[http://www.physics.drexel.edu/courses/Comp_Phys/General/C_basics/](http://www.physics.drexel.edu/courses/Comp_Phys/General/C_basics/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-10T19:43:17.807

在 C++ 中，main() 是在程序运行时调用的函数，而不是方法。这个主函数可以在其执行中使用类和类的方法。

方法是在类中定义的函数，旨在与定义它们的类/对象保持接近。因此，main() 不会卡在类中，因为它不打算作用于单个类或对象

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-26T06:23:08.087

main 与 C++ 中的类无关。这是一个保留的函数名，链接器知道它是应用程序的入口点（地址）

[http://www.cplusplus.com/doc/tutorial/program_structure/](http://www.cplusplus.com/doc/tutorial/program_structure/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-20T18:09:49.390

由于 cpp 是从核心 c 演变而来的，因此两种语言的定义、声明和调用函数都遵循相同的过程......因为 cpp 是面向对象的，我们可以用它来玩类和对象的游戏......但是就像在 c 中一样，我们不能在任何用户派生函数中添加主方法，或者我们可以说主方法应该与函数隔离。同样在cpp中我们不能在任何类中添加主方法，它应该被隔离...在cpp中没有任何像驱动程序类这样的概念...在java中，是的！我们可以在类中添加main方法，或者我们必须在java中的类中添加main，我们可以说！！*

# wpf - 将 DataTemplate 应用于网格

> ID：11420500
> 
> 赞同：3
> 
> 时间：2012-07-10T19:29:04.817
> 
> 标签：wpf, xaml, datatemplate

a 如何`DataTemplate`应用于 a `Grid`？

我的文件中有一个`DataTemplate`名为*DataGrid_Template*的`Resources.xaml`文件，我想将它应用到`Grid`View.xaml*中*。

**资源.xaml**

```
<ResourceDictionary ... >
    <DataTemplate x:Key="DataGrid_Template">
        <Grid>
            <Grid.RowDefinitions ... />
            <DockPanel ... />
            <DataGrid ... />
        </Grid>
    </DataTemplate>
</ResourceDictionary> 
```

**查看.xaml**

```
<UserControl ... >
    <Grid /> <!-- want to apply DataGrid_Template to this -->
</UserControl> 
```

我尝试使用该`Grid` *属性* `TemplatedParent`，但这似乎是一个只读*属性*。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T20:52:04.310

您不能应用于`DataTemplates`面板（例如网格）。

如果您只想将该模板放置在某处，则可以使用 a`ContentControl`并将其设置为`ContentTemplate`via `StaticResource`。

（`ContentControl.Content`需要设置一些东西，否则`ContentTemplate`不应用，如果没有真正的“内容”设置，那么`Template`应该也可以工作。）

# actionscript-3 - 在 wordpress 上使用带 Flash 的 ExternalInterface？

> ID：11420502
> 
> 赞同：0
> 
> 时间：2012-07-10T19:29:27.560
> 
> 标签：actionscript-3, wordpress

无论如何，我看不到在添加的新 wordpress 页面上指定“javascript”文件。那么我如何将它与我的闪存文件一起使用。Flash 应用程序在没有外部接口的情况下无法运行。

# c# - 尝试在另一个 PartialViewResult 中检索它时丢失存储在一个 PartialViewResult 中的会话数据

> ID：11420503
> 
> 赞同：0
> 
> 时间：2012-07-10T19:29:27.360
> 
> 标签：c#, asp.net-mvc, session, session-state

我有一个场景，我使用 Session 将对象存储在一个控制器操作中，并尝试在另一个控制器操作中检索它。这两个动作都是从同一个视图触发的，并且驻留在同一个控制器上。不幸的是，我无法在第二个控制器中检索会话变量。会话 ID 保持不变，我确保在第一个操作中将对象写入会话。但是，当视图在第一个操作中返回时，会话数据会消失。

这是我的控制器代码流-

```
public PartialviewResult DoSearch(string paramCustId)
{
//invoking a method to perform a search task. I am also passing the controller session as a parameter
//this function is called in a separate thread and the main thread does not wait for it to complete before returning the view
multiSearch(paramCustId, Session);
}
return PartialView("_partialView1");

public void multiSearch(string searchParam, HttpSessionStateBase controllerSession)
{
//code to retrieve response from backend into the variable tempSearchSet
controllerSession["searchResult"] = tempSearchSet;
//verified that tempSearchSet is stored in Session under the key "searchResult" and Session.Count is 1.
}

//Another controller action that is triggered from the same view after a certain delay to fetch the data in session
public PartialViewResult PollSearchResults()
{
var tempSearchResult = Session["searchResult"] as List<SearchResultSet>;
//This is where i do not see data in the session. I have verified that the multiSearch method is complete and has updated the data in the session.
//here Session.SessionID is the same as above, but Session.Count is 0
} 
```

有没有不同的方法来处理 mvc 中的 Session 或者我在这里遗漏了一些基本的东西？此外，是否有更好的方法来管理这种缓存方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:07:38.343

找到了解决方案。我必须在 Global.asax.cs 的 Session_Start 方法中初始化会话变量。这一行使它对我有用。

```
HttpContext.Current.Session.Add("searchResult", new List<SearchResultSet>()); 
```

我仍然不清楚为什么需要这一行，因为会话变量 get 和 set 在第一个操作方法中工作而没有初始化。我想我会保留它以备将来研究。

# c++ - 在 C++ 中用另一个 std::string 替换给定 std::string 的实例

> ID：11420506
> 
> 赞同：3
> 
> 时间：2012-07-10T19:29:36.203
> 
> 标签：c++, string, std

我一直在网上寻找执行以下操作的东西，但没有成功。我有一些丑陋的字符串作为必发 SOAP 响应的一部分返回，该响应使用许多不同的字符分隔符来标识信息的某些部分。令人尴尬的是，它们并不总是只有一个字符长度。具体来说，我需要在字符处拆分一个字符串`':'`，但只有在我首先用我的个人标志替换**所有**实例之后（必须在第一次拆分后再次替换它）。`"\\:"``"-COLON-"`

基本上我需要这样的字符串的所有部分

```
 "6(2.5%,11\:08)~true~5.0~1162835723938~" 
```

成为

```
 "6(2.5%,11-COLON-08)~true~5.0~1162835723938~ 
```

在 perl 中是（从内存中）

```
 $mystring =~ s/\\:/-COLON-/g; 
```

我一直在寻找`std::string`一些`std::find`函数`std::replace`已经这样做了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T19:33:06.287

[`boost::replace_all(input_string, "\\:", "-COLON-");`](http://www.boost.org/doc/libs/1_50_0/doc/html/string_algo/reference.html#header.boost.algorithm.string.replace_hpp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:39:37.717

如果你有 C++11 这样的东西应该可以解决问题：

```
#include <string>
#include <regex>

int main()
{
std::string str("6(2.5%,11\\:08)~true~5.0~1162835723938~");
std::regex rx("\\:"); 
std::string fmt("-COLON-");
std::regex_replace(str, rx, fmt);

return 0;
} 
```

**编辑：**匹配类型还有一个可选的第四个参数，`std::regex_constants`我相信它可以是在命名空间中找到的任何东西。例如，仅将第一次出现的正则表达式匹配替换为提供的格式。

# haskell - haskell写大字符串

> ID：11420508
> 
> 赞同：3
> 
> 时间：2012-07-10T19:29:39.653
> 
> 标签：haskell

你好 Stackoverflow 社区。

我对 Haskell 比较陌生，我注意到将大字符串写入文件时 `writeFile`速度`hPutStr`非常慢。

对于 1.5 Mb 字符串，我的程序（使用 ghc 编译）大约需要 2 秒，而 c++ 中的“相同”代码只需要大约 0.1 秒。该字符串是从包含大约 10000 个元素的列表生成的，然后使用`writeFile`. 我还尝试以相同的结果`mapM_`遍历列表。`hPutStr`

有没有更快的方法来写一个大字符串？

**更新**

正如@applicative 指出的那样，以下代码立即完成了一个 2MB 的文件

```
main = readFile "input.txt" >>= writeFile "ouput.txt" 
```

所以我的问题似乎出在其他地方。这是我编写列表的两个实现（WordIndex 和 CoordList 是 Map 和 List 的类型别名）

使用 hPutStrLn

```
-- Print to File
indexToFile :: String -> WordIndex -> IO ()
indexToFile filename index =
    let 
        indexList = map (\(k, v) -> entryToString k v)  (Map.toList index)
    in do
        output <- openFile filename WriteMode
        mapM_ (\v -> hPutStrLn output v) indexList
        hClose output

-- Convert Listelement to String
entryToString :: String -> CoordList -> String
entryToString key value = (embedString 25 key) ++ (coordListToString value) ++ "\n" 
```

用 writeFile

```
-- Print to File
indexToFile :: String -> WordIndex -> IO ()
indexToFile filename index = writeFile filename (indexToString "" index)

-- Index to String
indexToString :: String -> WordIndex -> String
indexToString lead index = Map.foldrWithKey (\k v r -> lead ++ (entryToString k v) ++ r) "" index 
```

也许你们可以帮助我在这里找到一个加速。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:56:49.310

这是众所周知的问题。默认的 Haskell`String`类型很简单`[Char]`，根据定义很慢，如果它是惰性构造的（通常情况下），则速度很慢。但是，作为列表，它允许使用列表组合器进行简单而干净的处理，并且在性能不是问题时很有用。如果是，则应使用`ByteString`或`Text`打包。`ByteString`更好，因为它与 ghc 一起提供，但不提供 unicode 支持。`ByteString`hackage 上提供了基于 utf8 的软件包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T19:33:50.587

是的。例如，您可以使用`Text`模块中的类型`Data.Text`or `Data.Text.Lazy`，它在内部以比 Chars 列表更有效的方式（即 UTF-16）表示文本。

在编写二进制数据（可能包含也可能不包含以某种形式编码的文本）时，您可以使用`ByteString`s 或它们的惰性等效项。

修改`Text`or`ByteStrings`时，一些修改它们的操作在惰性版本上更快。如果您只想在创建这样的字符串后读取它，通常可以推荐非惰性版本。

# ant - 在 javac Ant 任务中禁用增量编译

> ID：11420510
> 
> 赞同：2
> 
> 时间：2012-07-10T19:29:43.233
> 
> 标签：ant, javac, annotation-processing

我需要轻松测试我的注释处理器，因此我准备了 Ant 脚本以启动`javac`所有必要的选项集。不幸的是，正如[另一个线程](https://stackoverflow.com/questions/2590579/can-standard-sun-javac-do-incremental-compiling)中所述：

> 默认情况下，该任务比较 .java 和对应的 .class 文件的时间戳，并且只告诉 Java 编译器重新编译比其对应的目标文件更新的源文件，或者根本没有目标文件的源文件。

大多数时候这对我来说很好，但当我需要测试我的注释处理器时，我需要每次启动 javac，无论是否已经存在相应的 .class 文件。

有什么办法可以禁用这个蚂蚁默认行为？我查看了所有`javac`任务选项，但一无所获。除了清理输出目录之外，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:38:30.103

根据您的报价，如果您删除 .class 文件，编译器将被迫重新编译 .java 文件

# java - ORA-01017: 无效的用户名/密码；使用 wss4j 时登录被拒绝

> ID：11420512
> 
> 赞同：3
> 
> 时间：2012-07-10T19:29:56.700
> 
> 标签：java, jdbc, oracle11g, bouncycastle, ora-01017

我有许多测试可以毫无问题地访问我们的 Oracle 数据库，但是当我在我们的代码库中运行这些测试以及使用密钥库的其他测试时，与数据库交互的测试不再能够连接。这是他们得到的例外：

> 引起：java.sql.SQLException：ORA-01017：用户名/密码无效；在 oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java) 的 oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:388) 的 oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:439) 处的登录被拒绝:381) 在 oracle.jdbc.driver.T4CTTIoauthenticate.processError(T4CTTIoauthenticate.java:431) 在 oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.receive) 的 oracle.jdbc.driver.T4CTTIfun.processError(T4CTTIfun.java:564)。 java:436) 在 oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186) 在 oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate.java:366) 在 oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate .java:752) 在 oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:359) 在 oracle.jdbc。

显然用户名和密码仍然是正确的。我很难弄清楚我们的代码中导致连接失败的原因，而且我真的不知道如何调试 Oracle 驱动程序尝试连接时发生的情况。我将 Oracle 瘦驱动程序与 Oracle 11g 一起使用。我们使用 Spring、Hibernate 和 Apache Commons DBCP。似乎驱动程序可能正在尝试建立与数据库的 SSL 连接？不过我不确定。当我们仍在使用 SQL Server 时，我似乎记得一个非常相似的问题，当时我只是忽略了它。现在，我们在单独的批处理和 JVM 中运行与密钥库交互的测试。

任何帮助将不胜感激。

**更新**

我进行了更多调试，最后将其追溯到我们通过 Spring-WS 使用 wss4j 库（版本 1.5.9）。最终 WSSConfig 类得到一组执行此操作的代码：

```
int ret = 0;
for (int i = 0; i < provs.length; i++) {
    if ("SUN".equals(provs[i].getName())
        || "IBMJCE".equals(provs[i].getName())) {
        ret =
            java.security.Security.insertProviderAt(
                (java.security.Provider) c.newInstance(), i + 2
            );
        break;
    }
} 
```

在此代码之后，我与 Oracle 的连接立即停止工作。看起来当使用充气城堡提供程序调用 insertProviderAt 方法时，我的 Oracle 连接开始失败。有任何想法吗？

**最小测试用例**

第一次连接尝试成功，但第二次尝试失败。

```
Connection conn = DriverManager.getConnection("jdbc:oracle:thin:@server/servicename", "username", "password");
conn.prepareStatement("select * from dual").getResultSet();
conn.close();
org.apache.ws.security.WSSConfig.getDefaultWSConfig();
conn = DriverManager.getConnection("jdbc:oracle:thin:server/servicename", "username", "password");
conn.prepareStatement("select * from dual").getResultSet();
conn.close(); 
```

**WSSConfig 初始化方法**

```
private synchronized void
    staticInit() {
        if (!staticallyInitialized) {
            org.apache.xml.security.Init.init();
            if (addJceProviders) {
                /*
                 * The last provider added has precedence, that is if JuiCE can be added
                 * then WSS4J uses this provider.
                 */
                addJceProvider("BC", "org.bouncycastle.jce.provider.BouncyCastleProvider");
                addJceProvider("JuiCE", "org.apache.security.juice.provider.JuiCEProviderOpenSSL");
            }
            Transform.init();
            try {
                Transform.register(
                    STRTransform.implementedTransformURI,
                    "org.apache.ws.security.transform.STRTransform"
                );
            } catch (Exception ex) {
                if (log.isDebugEnabled()) {
                    log.debug(ex.getMessage(), ex);
                }
            }
            staticallyInitialized = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T01:57:52.003

第二个连接字符串中的添加符号丢失

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:02:10.393

`SEC_CASE_SENSITIVE_LOGON`如果在 oracle中设置了参数，则会显示登录被拒绝错误`true`。您可以通过检查`SHOW PARAMETER SEC_CASE_SENSITIVE_LOGON`并更改它`ALTER SYSTEM SET SEC_CASE_SENSITIVE_LOGON = FALSE;`

现在错误应该得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T01:51:18.193

1.修改文件

```
%JAVA_HOME%/jre/lib/security/java.security
security.provider.10=org.bouncycastle.jce.provider.BouncyCastleProvider 
```

* * *

例子：

```
security.provider.1=sun.security.provider.Sun
security.provider.2=sun.security.rsa.SunRsaSign
security.provider.3=com.sun.net.ssl.internal.ssl.Provider
security.provider.4=com.sun.crypto.provider.SunJCE
security.provider.5=sun.security.jgss.SunProvider
security.provider.6=com.sun.security.sasl.Provider
security.provider.7=org.jcp.xml.dsig.internal.dom.XMLDSigRI
security.provider.8=sun.security.smartcardio.SunPCSC
security.provider.9=sun.security.mscapi.SunMSCAPI
security.provider.10=org.bouncycastle.jce.provider.BouncyCastleProvider 
```

或 2。

```
WSSConfig.setAddJceProviders(false); 
```

# android - Sencha Touch+Phonegap+Android 应用程序引用错误

> ID：11420513
> 
> 赞同：1
> 
> 时间：2012-07-10T19:30:00.143
> 
> 标签：android, cordova, sencha-touch-2

我按照官方 Sencha 学习教程设置了我的第一个 phonegap 应用程序与 sencha touch 给出了这个[链接](http://www.sencha.com/learn/a-sencha-touch-mvc-application-with-phonegap/)。

这是我的`index.html`代码 -

```
 <!DOCTYPE html>
 <html>
 <head>
 <title>Contacts</title>
 <script type="text/javascript" src="lib/touch/sencha-touch-debug.js"></script>
 <link href="lib/touch/resources/css/sencha-touch.css" rel="stylesheet"
type="text/css" />
 <script type="text/javascript" src="app/app.js"></script>  
 <script type="text/javascript" src="cordova-1.8.1.js"></script>
 <script type="text/javascript">
/* Ext.application({
    name : "DemoApp",
    launch : function() {
        console.log("App launch");
    }
}); */
  </script>
  <script type="text/javascript">
document.addEventListener("deviceready", DemoApp.launch, false);    
  </script>
  </head>
  <body>
  </body>
  </html> 
```

而我的`app/app.js`包含——

```
Ext.application({
name: 'DemoApp',
launch: function() {
    this.launched = true;
    this.mainLaunch();
},
mainLaunch: function() {
    if (!device || !this.launched) {return;}
    console.log('mainLaunch');
}
}); 
```

脚本的所有路径都绝对正确，但我仍然收到以下错误。

`Uncaught ReferenceError: DemoApp is not defined at file:///android_asset/www/index.html:19`

我也尝试自行安装，但上述错误仍然存`app.js`​​在。`index.html`Sencha js 和 css 被正确包含，因为我没有收到关于`Ext`未定义等的任何错误。

还有什么可能的原因。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:06:35.527

```
 <script type="text/javascript" src="app/app.js"></script>  
 <script type="text/javascript" src="cordova-1.8.1.js"></script> 
```

应该

```
 <script type="text/javascript" src="cordova-1.8.1.js"></script>
 <script type="text/javascript" src="app/app.js"></script> 
```

# android - aSmack + Android：MultiUserChat 类；getMembers、getModerators 等不工作？

> ID：11420514
> 
> 赞同：2
> 
> 时间：2012-07-10T19:30:02.583
> 
> 标签：android, xmpp, asmack

我正在使用 aSmack（Android 的 Smack 端口）连接到 XMPP 服务器（Openfire 3.7.1）并与之通信。只要使用 MultiUserChat 类发送消息，我就可以让多用户聊天工作。但是，调用任何列出房间居住者的方法都会失败。相关代码：

```
setDefaultConnection();
if(connection!=null) {
    mMuc = new MultiUserChat(connection, "hermitage_recycling@conference.jmartinw7");
    try {
        mMuc.join("chester");
        mMuc.getModerators();         //line 71
        ArrayList<Affiliate> dudes = new ArrayList<Affiliate>(mMuc.getMembers());
        Iterator<Affiliate> iter = dudes.iterator();
        while(iter.hasNext()) {
            Affiliate dude = iter.next();
            Log.w(this.getClass().getName(), dude.getNick());
        }
    } catch(XMPPException xmppe) {
        Log.w(this.getClass().getName(), "MUC error: "+xmppe.getMessage());
    }
} 
```

日志猫：

```
07-10 13:38:56.248: ERROR/AndroidRuntime(13003): FATAL EXCEPTION: main
    java.lang.ClassCastException: org.jivesoftware.smack.util.PacketParserUtils$2
    at org.jivesoftware.smackx.muc.MultiUserChat.getOccupants(MultiUserChat.java:1797)
    at org.jivesoftware.smackx.muc.MultiUserChat.getModerators(MultiUserChat.java:1761)
    at org.apache.android.xmpp.XMPPClient$1.onClick(XMPPClient.java:71)
    at android.view.View.performClick(View.java:2532) 
```

图书馆有问题还是我做错了什么？getOc​​cupants() 似乎有效。

MultiUserChat 示例和 javadocs：
[http ://www.igniterealtime.org/builds/smack/docs/latest/javadoc/](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/)
[http://www.igniterealtime.org/builds/smack/docs/latest/documentation/extensions/index.html](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/extensions/index.html)

aSmack： http:
[//code.google.com/p/asmack/](http://code.google.com/p/asmack/)
[http://code.google.com/p/asmack/issues/detail?id=72](http://code.google.com/p/asmack/issues/detail?id=72)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T20:04:36.620

我相信您的问题是由 asmack 无法加载 smack.providers 文件引起的，该文件告诉 asmack 要加载哪些类。如果您阅读自述文件，它描述了如何将 smack.providers 文件加载到 asmack 中（感谢 Flow）。您需要在开始任何 XMPP 活动之前执行此操作。

试试[https://github.com/Flowdalic/asmack](https://github.com/Flowdalic/asmack)，因为你正在使用的版本已经 2 年没有更新了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:52:01.417

请阅读[aSmack](https://github.com/Flowdalic/asmack/)的[README](https://github.com/Flowdalic/asmack/blob/master/README.markdown)并按照关于 ProviderManager 的说明进行操作。

# ruby - 无法通过测试单元（红宝石）通过 ARGV

> ID：11420517
> 
> 赞同：2
> 
> 时间：2012-07-10T19:30:04.147
> 
> 标签：ruby, watir-webdriver, testunit

我正在使用 watir-webdriver 运行自动化测试。我无法通过测试单元传递命令行参数 ARGV，我得到一个 ArgumentError。

```
require 'rubygems'
require 'watir-webdriver'
require 'test/unit'    
ARGV.each do |arg|
        if arg.downcase.include? 'chrome'
            $browser = 'chrome'
        elsif arg.downcase.include? 'firefox'
            $browser = 'firefox'
        elsif arg.downcase.include? 'ff'
            $browser = 'firefox'
        elsif arg.downcase.include? 'ie'
            $browser = 'ie'
        end
    end

class TEST_SITE < Test::Unit::TestCase
   def setup
     if $browser == 'chrome'
        $b = Watir::Browser.new :chrome
     elsif $browser == 'firefox'
        $b = Watir::Browser.new :ff
     elsif $browser == 'ie'
        $b = Watir::Browser.new :ie
     end
  end
end 
```

是否有另一种选择或以某种方式覆盖测试单元类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:32:17.783

测试/单元似乎有关于它如何处理 ARGV 中的值的逻辑，尽管不完全确定它正在检查什么值。但是，如果你让你的参数更像参数，它们会被测试/单元忽略，你的测试应该运行。

尝试从命令行运行以下命令（您不需要更改代码）：

```
ruby filename.rb -browser=ff 
```

# ruby-on-rails - 我将如何路由此层次结构

> ID：11420519
> 
> 赞同：0
> 
> 时间：2012-07-10T19:30:05.790
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在创建一个应用程序来跟踪用户的就业情况以及他们在公司中的位置。我需要一些帮助来尝试路由应用程序，我已经制作了`user`、`company`和`department`.

*   `user`
    *   `company`（用户 has_many :through => 就业）
        *   `department`

用户.rb

```
class User < ActiveRecord::Base
    #associations
    has_many :employments
    has_many :companies, :through => :employments
    has_one :department, :through => :employments
end 
```

就业.rb

```
class Employment < ActiveRecord::Base

  belongs_to :user
  belongs_to :company
  belongs_to :department
  has_many   :employment_histories
end 
```

就业历史.rb

```
class EmploymentHistory < ActiveRecord::Base

  belongs_to :employment
end 
```

公司.rb

```
class Company < ActiveRecord::Base

  has_many :employments
  has_many :users, :through => :employments
  has_many :departments
end 
```

部门.rb

```
class Department < ActiveRecord::Base
  belongs_to :company
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:33:39.813

对于路由，最简单的方法就是将你的资源声明为资源，然后通过对象的 id 访问它们。 [http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default](http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default)

然后通过关联查找，我建议您查看此 railscast：[http: //railscasts.com/episodes/3-find-through-association?view=asciicast](http://railscasts.com/episodes/3-find-through-association?view=asciicast)

如果通过关联进行路由和查找并不容易，您可能需要重构层次结构以在隐喻上更有意义。例如我的方法是：

*   用户 has_many :employments 并在用户模型中给它 default_scope order: 'employments.created_at DESC' 以确保最近的工作是第一个。
*   就业has_one：部门
*   所属部门：公司
*   公司 has_many :departments

然后您可以通过关联访问所有这些数据（参见上面的链接）。您只需要路由资源，然后知道如何在正确的控制器中访问它们。

# php - 匿名函数中的 PHP 变量

> ID：11420520
> 
> 赞同：135
> 
> 时间：2012-07-10T19:30:07.780
> 
> 标签：php, function, variables, global-variables, anonymous

我在 PHP 中使用匿名函数，并意识到它们似乎无法访问它们之外的变量。有没有办法解决这个问题？

例子：

```
$variable = "nothing";

functionName($someArgument, function() {
  $variable = "something";
});

echo $variable;  //output: "nothing" 
```

这将输出“无”。匿名函数有什么方法可以访问`$variable`？

* * *

## 回答 #1

> 赞同：332
> 
> 时间：2012-07-10T19:31:42.297

是的，[使用闭包](http://php.net/closure)：

```
functionName($someArgument, function() use(&$variable) {
  $variable = "something";
}); 
```

请注意，为了使您能够`$variable`在匿名函数范围之外修改和检索修改后的值，必须在闭包中使用`&`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-09-15T16:43:30.347

如果你的函数很短并且是单线性的，你可以使用[箭头函数](https://wiki.php.net/rfc/arrow_functions_v2)，从 PHP 7.4 开始：

```
$variable = "nothing";
functionName($someArgument, fn() => $variable = "something"); 
```

# jquery - jquery/ajax 获取用户输入并在不刷新页面的情况下查询数据库

> ID：11420522
> 
> 赞同：0
> 
> 时间：2012-07-10T19:30:29.137
> 
> 标签：jquery

我有一种情况，我需要获取用户客户 ID（从来自字段）并查询我的数据库并返回他/她的邮政编码而不刷新页面。任何帮助将不胜感激。j.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:44:24.190

如果你的表单有一个提交按钮，你可以给这个按钮一个“onclick='queryDB()'”字段。

```
<button value="submit" ... onclick="queryDB()" /> 
```

那么你的javascript代码可以包括

```
function queryDB(){
   var url = <location of php file>;
   var postData = formField.value(); // gets value from your text input
   jQuery.post( url , postData , function(data){ <...update your page...> });
} 
```

这是一个基本大纲，因为我没有关于您的页面的很多详细信息。如果您感到困惑，我建议您查看一些教程或发布更多信息。

**编辑：**
这个怎么样：

```
<form>
   <input type="text" name="name" value="Stackoverflow"/>
   <button onclick="queryDB()">Click Me!</button>
</form>
<div id="postResults33">
</div> 
<script> 
function queryDB(){ 
    var url = 'sendtest.php'; 
    var postData = formField.value(); // gets value from your text input 
    jQuery.post( url , {fieldValue:postData} , function(data){ $("#postResults33").html(data);
}); 
} 
</script> 
```

然后你的 sendtest.php 文件必须有这样的东西

```
if(isset($_POST['fieldValue'])){
   userId = $_POST['fieldValue'];
   *get zip code using userId*
   echo zipCode;
} 
```

# javascript - Tumblr 是否在他们的主题中使用了 Knockout 或其他一些 JS 实用程序

> ID：11420528
> 
> 赞同：0
> 
> 时间：2012-07-10T19:30:47.623
> 
> 标签：javascript, backbone.js, knockout.js, tumblr

我只是在看 Tumblr 关于如何创建自定义主题的页面： [http ://www.tumblr.com/docs/en/custom_themes#pro_tips](http://www.tumblr.com/docs/en/custom_themes#pro_tips)

而且我注意到他们正在使用类似于 Knockout 甚至 Backbone 的 JS，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:34:13.597

许多模板语言使用这种表示法或类似的东西，所以我会说，也许，但可能不是。

[Smarty](http://www.smarty.net/docsv2/en/)让人想起使用类似符号的东西。

尽管不相同，但[Jinja](http://jinja.pocoo.org/)也使用了`{`and `}`。

# perl - perl如何从文件中删除特定单词

> ID：11420532
> 
> 赞同：-1
> 
> 时间：2012-07-10T19:31:07.887
> 
> 标签：perl, unix

一个文件包含：

```
 rhost=localhost
    ruserid=abcdefg_xxx
    ldir=
    lfile=
    rdir=p01
    rfile=
    pgp=none
    mainframe=no
    ftpmode=binary
    ftpcmd1=
    ftpcmd2=
    ftpcmd3=
    ftpcmd1a=
    ftpcmd2a=
    notifycc=no
    firstfwd=Yes
    NOTIFYNYL=
    decompress=no
    compress=no 
```

我想编写一个简单的代码来删除第二行中的“_xxx”。请记住，永远不会有包含字符串“_xxx”的文件，因此这应该使它变得非常容易。我只是不太熟悉语法。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T20:00:51.830

**简短的回答：**

以下是如何仅删除文字“ `_xxx`”的方法。

`perl -pli.bak -e 's/_xxx$//' filename`

**详细解释：**

由于 Perl 以与线路噪音无法区分的代码而闻名，这里是对这些步骤的解释。

`-p`创建一个看起来像这样的隐式循环：

```
while( <> ) {
    # Your code goes here.
}
continue {
    print or die;
} 
```

`-l`有点像“auto-chomp”的行为，但也会在再次打印之前将结束的行放回行上。它比这更复杂，但在最简单的使用中，它会将隐式循环更改为如下所示：

```
while( <> ) {
    chomp;
    # Your code goes here.
}
continue {
    print $_, $/;
} 
```

-i 告诉 Perl “就地编辑”。在幕后，它会创建一个单独的输出文件，最后它会移动该临时文件以替换原始文件。

`.bak`告诉 Perl 它应该创建一个名为 'originalfile. **bak** ' 这样如果你犯了一个错误，它可以很容易地逆转。

在替换内部：

```
s/
    _xxx$     # Match (but don't capture) the final '_xxx' in the string.
 /$1/x;       # Replace the entire match with nothing. 
```

**参考资料：**

For future reference, information on the command line switches used in Perl "one-liners" can be obtained in Perl's documentation at [perlrun](http://perldoc.perl.org/perlrun.html). A quick introduction to Perl's regular expressions can be found at [perlrequick](http://perldoc.perl.org/perlrequick.html). And a quick overview of Perl's syntax is found at [perlintro](http://perldoc.perl.org/perlintro.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:42:21.540

`_xxx`这会覆盖原始文件，在第二行中删除：

```
use warnings;
use strict;
use Tie::File;

my $filename = shift;
tie my @lines, 'Tie::File', $filename or die $!;
$lines[1] =~ s/_xxx//;
untie @lines; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T20:00:20.097

也许这可以帮助

```
perl -ple 's/_.*// if /^ruserid/' < file 
```

将删除以“ruserid”开头的行中第一个“_”（包括）之后的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T19:37:34.957

一种使用方式`perl`。在第二行 ( `$. == 2`) 中，从最后一行删除`_`到行尾：

```
perl -lpe 's/_[^_]*\Z// if $. == 2' infile 
```

# jquery - 用 jQuery 对齐两个表

> ID：11420533
> 
> 赞同：0
> 
> 时间：2012-07-10T19:31:10.163
> 
> 标签：jquery, asp.net, html, css

我在一个固定高度的滚动容器中有一个巨大的网格视图。我不希望标题滚动，所以我将标题附加到不同的部分。所以基本上我有两张桌子，一张在支架内，一张在外面，但我希望两者都具有相同的列尺寸，以便它们对齐。

我该如何做到这一点？我不想固定任何大小，而且我肯定想附加 gridview 的标题列，因为如果我更改 gridview 我希望标题更改。我需要的只是让他们排队。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:40:28.497

您可以选择两个表格并使它们的高度相等。

```
var height = $("#object1").outerHeight();
$("#object2").height( height );

or shorter: $("#object2").height( $("#object1").outerHeight() ); 
```

其中 object1 是您的大表的 ID，而 object2 是您的小表的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:42:08.430

你可以试试这样的。**首先使用**表格标题构建表格。然后在准备好的文档上使用 jQuery 克隆表头，删除现有的表头，然后将克隆的副本放入另一个表中。在这种情况下，您可能不需要设置宽度，但如果您这样做，您可以获得原始表格列的宽度并将这些宽度应用于附加的表格（带有标题行的表格）。

如果您的内容表的列更改宽度，您必须获取所有列的宽度并将它们应用到相应的表标题单元格。

# sql - 使用变量和 TOP 子句的问题

> ID：11420535
> 
> 赞同：1
> 
> 时间：2012-07-10T19:31:12.413
> 
> 标签：sql, tsql, sql-server-2005

尝试运行以下代码时出现以下错误：

> TOP 子句中的行数必须是整数。

@constCnt 变量声明为 SMALLINT，@thresh 声明为 DECIMAL(6,4)。当我执行时，`select (floor((@constCnt*(1+@thresh))))`我得到一个不带小数的整数值。

任何想法如何解决这个问题？

```
 select top (@constCnt) * 
    into #temp
    from (
            select top (floor((@constCnt*(1+@thresh)))) pt.*,
                inLast = CASE WHEN lh.code IS NULL THEN 0 ELSE 1 END
            from #pretemp pt
            left join #last lh
            on lh.code = pt.code
            order by em desc ) a    
    order by inlast desc, emr desc, code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:40:52.193

尝试转换变量：

```
select top (cast(@constCnt as int)) *
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:43:40.810

您可以通过定义另一个变量来做到这一点：

```
declare @constCnt2 int = floor((@constCnt*(1+@thresh))) 
```

然后在子查询中使用它。

```
select top (@constCnt) *
into #temp
from (select top (@constCnt2) pt.*,
             inLast = CASE WHEN lh.code IS NULL THEN 0 ELSE 1 END
      from #pretemp pt left join
           #last lh
           on lh.code = pt.code
      order by em desc
     ) a
order by inlast desc, emr desc, code 
```

# php - 将目录中的所有文件从我的网站下载到 Zip 文件夹中

> ID：11420540
> 
> 赞同：4
> 
> 时间：2012-07-10T19:31:42.250
> 
> 标签：php

所有，我允许用户上传图片到我的网站。对于该用户，我想下载用户从我的网站上传到我的网站的所有图像。所以我想基本上有一个用户名的下拉列表，然后当我选择一个查询我的数据库并获取他们下载的所有图像时。那部分没有问题。

我的问题是我怎样才能浏览这些文件并将它们放入一个 zip 文件夹，然后下载 zip 文件夹（如果可能的话）。

关于如何去做这样的事情的任何想法？

提前致谢！

**编辑：**我知道如何使用以下代码压缩文件后下载文件：

```
header('Content-Type: application/zip');
header('Content-disposition: attachment; filename=filename.zip');
header('Content-Length: ' . filesize($zipfilename));
readfile($zipname); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:34:19.707

结合使用这两个功能：

[http://davidwalsh.name/create-zip-php](http://davidwalsh.name/create-zip-php)

[http://php.net/manual/en/function.readdir.php](http://php.net/manual/en/function.readdir.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T20:11:41.030

感谢@maxhud 的帮助，我能够想出完整的解决方案。这是用于实现我想要的结果的最终代码片段：

```
<?php
/* creates a compressed zip file */
function create_zip($files = array(),$destination = '',$overwrite = true) {
  //if the zip file already exists and overwrite is false, return false
  if(file_exists($destination) && !$overwrite) { return false; }
  //vars
  $valid_files = array();
  //if files were passed in...
  if(is_array($files)) {
    //cycle through each file
    foreach($files as $file) {
      //make sure the file exists
      if(file_exists($file)) {
        $valid_files[] = $file;
      }
    }
  }
  //if we have good files...
  if(count($valid_files)) {
    //create the archive
    $zip = new ZipArchive();
    if($zip->open($destination,$overwrite ? ZIPARCHIVE::OVERWRITE : ZIPARCHIVE::CREATE) !== true) {
      return false;
    }
    //add the files
    foreach($valid_files as $file) {
      $zip->addFile($file,$file);
    }
    //debug
    //echo 'The zip archive contains ',$zip->numFiles,' files with a status of ',$zip->status;

    //close the zip -- done!
    $zip->close();

    //check to make sure the file exists
    return file_exists($destination);
  }
  else
  {
    return false;
  }
}

$files_to_zip = array(
  'upload/1_3266_671641323389_14800358_42187034_1524052_n.jpg', 'upload/1_3266_671641328379_14800358_42187035_3071342_n.jpg'
);
//if true, good; if false, zip creation failed
$zip_name = 'my-archive.zip';
$result = create_zip($files_to_zip,$zip_name);

if($result){
header('Content-Type: application/zip');
header('Content-disposition: attachment; filename=filename.zip');
header('Content-Length: ' . filesize($zip_name));
readfile($zip_name);
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:43:20.417

一个 PHP 命令，可让您运行系统命令

*   [http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)
*   [http://www.php.net/manual/en/function.system.php](http://www.php.net/manual/en/function.system.php)

和一个系统命令，比如

*   [http://linux.about.com/od/commands/l/blcmdl1_zip.htm](http://linux.about.com/od/commands/l/blcmdl1_zip.htm)
*   [http://linux.about.com/od/commands/l/blcmdl1_tar.htm](http://linux.about.com/od/commands/l/blcmdl1_tar.htm)

一般效率更高。

我的 EX 创建文件系统的备份并覆盖以前的备份

```
$uploads = wp_upload_dir();
$file_name  = 'backup_filesystem.tar.gz';
unlink($uploads['basedir'] . '/' . $file_name);

ob_start();
$output = shell_exec(sprintf('tar -zcvf %s/%s %s', $uploads['basedir'], $file_name, ABSPATH));
ob_end_clean(); 
```

注意：输出缓冲区以防您的 php to shell 命令有输出并且您不希望标头已发送错误

# php - SetExpressCheckout 调用创建多循环付款配置文件的简单示例

> ID：11420543
> 
> 赞同：0
> 
> 时间：2012-07-10T19:31:46.953
> 
> 标签：php, paypal

我想使用 Express Cehckout 一步创建多个定期付款配置文件，我已经尝试了 2 天来完成此操作，但我偶然发现了文档中未解释的不同问题。所以我需要的是：

*   在一个 SetExpressCheckout -> DoExpressCheckout -> 创建配置文件中创建多个定期付款配置文件
*   我可能还需要一次性收费（因此会有多次重复的个人资料创建+即时收费）

这可能吗？如果是怎么办？谁能指出我如何实现这一目标的工作示例？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T21:09:05.833

不，不幸的是，这是不可能的。

但是，您可以做的是使用自适应预批准付款，并设置一个预批准，将资金分配给多个（并行或链式）接收方。

这样，您仍然可以在长达一年的时间内（由您发起）定期向买方开具账单，并在不同的收款人之间分配资金。

如果您决定采用这种方式，我建议您阅读以下文档：

1) Adaptive Payments 开发者指南：[ [https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_AdaptivePayments.pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_AdaptivePayments.pdf) ]
2) 应用程序的一般信息：[ [https://www.x.com /community/ppx/apps101](https://www.x.com/community/ppx/apps101) ]
3) 如何使用 PayPal 沙盒测试环境：[ [https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_Sandbox_UserGuide.pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_Sandbox_UserGuide.pdf) ]

4) 代码示例：[ [https://www.x.com/community/ppx/code_samples](https://www.x.com/community/ppx/code_samples) ]
5) 代码生成向导：[ [https://www.paypal-labs.com/integrationwizard/adaptive/](https://www.paypal-labs.com/integrationwizard/adaptive/) ]

第一个链接还包括有关如何使用嵌入式支付界面的信息。

# java - 休眠中的Java枚举

> ID：11420545
> 
> 赞同：1
> 
> 时间：2012-07-10T19:31:49.557
> 
> 标签：java, hibernate, enums

我在 MySQL 表中有一个列，其中有一个枚举变量：“questionTypes”

我将如何为此制作实体？

对于字符串，我这样做：

```
@Column(name = "explanation")

private String explanation

public String getExplanation() {
  return explanation;
}

public void setExplanation(String explanation) {
  this.explanation = explanation;
} 
```

我应该为枚举做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T19:57:51.370

添加 JPA 的枚举注解（getters/setters 省略）：

```
@Entity
class Answer {
   @Column(name = "explanation")
   private String explanation

   @Column(name = "questionType")
   @Enumerated(EnumType.STRING)
   private QuestionType type
} 
```

`QuestionType` 常规 Java 枚举在哪里。

# java - 遍历目录，读入文件，并将它们打印到 html 文件中

> ID：11420547
> 
> 赞同：0
> 
> 时间：2012-07-10T19:31:58.180
> 
> 标签：java, file-io, iteration, bufferedreader, filewriter

我正在尝试从 JfileChooser 中选择一个目录，然后遍历该目录，读取所有文件并将它们全部写入一个大 HTML 文件以便于查看。这是应该完成此操作的代码片段：

```
else if(arg0.getSource()==generate){
        //Create HTML report in same directory that file(s) came from
        try{

            fileChooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
            int returnval = fileChooser.showSaveDialog(this);
            if(returnval == JFileChooser.APPROVE_OPTION){
                File fileName = new File( "./report.html" );
                BufferedWriter bw = new BufferedWriter(new FileWriter(fileName));
                bw.write("<html>");
                bw.write("<body>");
                bw.write("<h1>Graded Assignment</h1>");
                bw.write("<p>");
                //for loop here that appends all the files in a directory
                File directory = new File(fileChooser.getSelectedFile().getAbsolutePath());
                for( File f : directory.listFiles() ){
                    FileInputStream fstream = new FileInputStream(f);
                    DataInputStream in = new DataInputStream(fstream);
                    BufferedReader br = new BufferedReader(new InputStreamReader(in));
                    bw.write(br.readLine() + "\n");
                }
                bw.write("</p>");
                bw.write("</body>");
                bw.write("</html>");

                bw.close();
                Desktop.getDesktop().browse(fileName.toURI());
            }
        }
        catch(FileNotFoundException fnf){
            fnf.printStackTrace();
        }
        catch(IOException io){
            io.printStackTrace();
        } 
```

它将进入 for 循环，但不会在第一个文件中读取。我收到某种 AWT-EventQueue 错误。谁能重新创建这个并告诉我问题可能是什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:04:50.590

如评论中所述，您应该检查它是否是目录并采取适当的行动：

```
File directory = new File(fileChooser.getSelectedFile().getAbsolutePath());
  getFiles(directory);//calls method to get all the files in the directory
  ...
  void getFiles(File directory) {
            for( File f : directory.listFiles() ){
                if(!f.isDirectory()) {//is a file lets read it
                    FileInputStream fstream = new FileInputStream(f);
                    DataInputStream in = new DataInputStream(fstream);
                    BufferedReader br = new BufferedReader(new InputStreamReader(in));
                    bw.write(br.readLine() + "\n");
               }else {//wil make it a recursive search
                   getFiles(f);
               }
          }
    } 
```

尽管我给出的方法也可以进行递归文件搜索，但如果给定目录中有一个目录，它将遍历其所有目录以获取所有文件

**附录：**

你应该使用：`chooser.showOpenDialog()`而不是`chooser.showSaveDialog()`在这里看到例如：

```
 JFileChooser chooser = new JFileChooser();
    chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
    int returnVal = chooser.showOpenDialog(parent);//this must be changed
    if(returnVal == JFileChooser.APPROVE_OPTION) {
       System.out.println("You chose to open this file: " +
            chooser.getAbsolutePath());
    } 
```

**参考：**

*   [http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JFileChooser.html](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JFileChooser.html)
*   [http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)

# android - Android NDK，编译共享对象

> ID：11420553
> 
> 赞同：0
> 
> 时间：2012-07-10T19:32:35.033
> 
> 标签：android, android-ndk

我目前正在尝试使用 Android NDK 并正在学习教程。其中一个步骤（第 3 步：编译共享对象）我不知道该怎么做。坦率地说，我不明白它是什么。有人可以向我解释该怎么做吗？提前致谢。

[https://ar.qualcomm.at/sdk](https://ar.qualcomm.at/sdk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:35:28.590

“共享对象”是动态库的 Unixy 术语。这就是编译的 NDK 代码所采用的形式。为您的项目构建这些：

*   运行 Cygwin
*   将目录更改为`jni`项目中的文件夹
*   `ndk-build`从 NDK 文件夹运行命令

# powershell - 在没有点源的文件中调用 powershell 函数

> ID：11420554
> 
> 赞同：5
> 
> 时间：2012-07-10T19:32:54.237
> 
> 标签：powershell

如果我在与文件同名的文件中只有一个函数，这可能吗？我似乎记得以前读过它。像这样的东西：

你好.ps1

```
function hello {
    Write-Host 'Hello, world'
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T23:34:39.533

我会完全摆脱函数调用。您根本不会丢失命名参数和 cmdlet 包装。所以这：

```
 function Hello
 {
    [CmdletBinding()]
    param(
       [Parameter(Mandatory=$true)]
       $Message
    )
    Write-Host "Hello, $Message!"
 } 
```

变成：

```
 [CmdletBinding()]
 param(
    [Parameter(Mandatory=$true)]
    $Message
 )
 Write-Host "Hello, $Message!" 
```

你可以这样：

```
> .hello.ps1 "World" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T20:12:56.993

默认情况下，函数 hello 只能在*脚本范围内*访问，除非您对脚本进行点源。这意味着，一旦脚本退出，它就不再可见。如果您希望它在没有点源的情况下在 hello.ps1 之外可用，您可以在全局范围内声明该函数：

```
function global:hello {
    Write-Host 'Hello, world' 
} 
```

然后你可以执行脚本然后调用函数：

```
PS C:\temp> .\hello.ps1
PS C:\temp> hello
Hello, world 
```

有关 powershell 范围的更多信息，[请查看帮助](http://technet.microsoft.com/en-us/library/dd315289.aspx)。

如果您只想让函数中的代码执行，请不要用函数声明包围它。在`hello.ps1`：

```
 Write-Host 'Hello, world' 
```

然后调用它：

```
PS C:\temp> .\hello.ps1
Hello, world 
```

# java - 在哪里可以调用 Java 程序？

> ID：11420561
> 
> 赞同：-1
> 
> 时间：2012-07-10T19:33:12.607
> 
> 标签：java

假设您将“main”参数添加到您使用的 Java 程序。那么Java程序的使用是否仅限于IDE中的控制台？换句话说，您只能在 IDE 上“使用”该程序吗？

现在假设您的 Java 程序中没有“主要”参数，如下所示：[http ://answers.yahoo.com/question/index?qid=20100727161815AAZAd9p](http://answers.yahoo.com/question/index?qid=20100727161815AAZAd9p)

它在 IDE 上没有做任何事情（比如当你按下“运行”时，它说你需要一个“主”参数）。那么，您甚至可以在哪里使用该程序呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:35:12.380

这是一个广泛的问题，需要很长的答案。

如果您在执行命令时告诉 JVM，一个类将被视为主类`java`（在 IDE 情况下，您可以在“运行配置”中配置主类）。

如果你没有`public static void main(String[] args) method`手段，那不是你执行的开始。没有 main 方法的类将根据业务功能在另一个类（主类/其他类）中实例化（或）扩展。

注意：即使一个类具有 main 方法，它也可能不是基于应用程序的执行的“开始”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:43:02.270

如果您正在考虑示例中列出的类以外的其他类，那么您可以考虑抽象类，即其他类使用的接口来实现适当的功能。当你考虑applet 时，大多数applet 没有main 方法，所以有很多方法可以让你的程序没有main。:)

# ios - UIButtons 动态添加到 UIScrollView 不接收触摸

> ID：11420563
> 
> 赞同：2
> 
> 时间：2012-07-10T19:33:24.660
> 
> 标签：ios, uiscrollview, uibutton

在我的应用程序中，我具有允许用户打开包含所有应用程序页面缩略图的菜单的功能，然后点击其中一个，从而进入特定页面。它基本上是一个`UIScrollView`，我在其中添加了`UIButton`一个每个页面的缩略图。

如果您在应用程序中间的某个页面上打开缩略图菜单，它的效果会非常好。但是，在很多情况下，打开缩略图菜单后，90% 的滚动视图按钮都没有收到触摸。它通常发生在用户手动到达应用程序的末尾，然后打开缩略图菜单时。

这是代码：

```
@interface BookmarkManager : UIView{
    UIScrollView *thumbnailScrollView;
}
@property (strong) UIScrollView *thumbnailScrollView;

@implementation BookmarkManager

@synthesize thumbnailScrollView;

-(id)init{
    self = [super initWithFrame:CGRectMake(0, 0, 1024, 768)];
    if(self){
        [self setBackgroundColor:[UIColor clearColor]];

        thumbnailScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 1024, 120)];
        [thumbnailScrollView setBackgroundColor:[UIColor clearColor]];

        UIImageView *background = [[UIImageView alloc] initWithImage:[UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/thumbnail_background.png", [[NSBundle mainBundle] resourcePath] ]]];
        [self addSubview:background];

        for(int i = 0; i < totalPages; i++){

            UIButton *pageThumbnail = [UIButton buttonWithType:UIButtonTypeCustom];
            [pageThumbnail setFrame:CGRectMake(0, 0, 125, 95)];
            [pageThumbnail setImage:[UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/p%d_thumb.png", [[NSBundle mainBundle] resourcePath], i]] forState:UIControlStateNormal];

            pageThumbnail.titleLabel.text = [NSString stringWithFormat:@"%d",i];

            pageThumbnail.center = CGPointMake(20 + (i * pageThumbnail.frame.size.width) + (i * 20) +(pageThumbnail.frame.size.width/2), 60);

            [thumbnailScrollView addSubview:pageThumbnail];
            [pageThumbnail addTarget:self action:@selector(thumbnailTapped:) forControlEvents:UIControlEventTouchDown];

        }

        [self addSubview:thumbnailScrollView];
        [thumbnailScrollView setContentSize:CGSizeMake(totalPages * 125 + (20*(totalPages+1)), 120)];

    }

    return self;
}

-(void)thumbnailTapped:(id)sender{

    UIButton *thumbnailButton = sender;
    int pageNumber = [thumbnailButton.titleLabel.text intValue];

    NSLog(@"tapped thumbnail for page: %d", pageNumber);
    [bookmarkManagerDelegate jumpToPage:pageNumber];

} 
```

我尝试过设置`userInteractionEnabled = YES`，`pageThumbnail`尝试过`thumbnailScrollView bringSubviewToFront:pageThumbnail`，但是没有用......按钮总是显示得很好，问题是有很多时候他们没有收到触摸（即 NSLog 从不打印）.. . 为什么会这样？

编辑：我实现`UIScrollView's` `scrollViewDidEndDecelerating`了，它在模拟器上被调用，但从未在设备上被调用。会不会是我的按钮图片太大了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:53:49.173

我在我的应用程序中做同样的事情。尝试使用 setBackgroundImage 代替 setImage:。这对我行得通

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T20:26:23.567

我过去做过类似的事情，唯一的区别是您将框架设置为按钮的方式。也许这就是问题所在

```
-(void)makeIconsView:(UIScrollView*)full :(NSArray*)images{
    int row=0;
    int column=0;
    for(int i = 0; i < images.count; ++i) {

        UIImage *thumb = [images objectAtIndex:i];
        UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];

        button.frame = CGRectMake(column*100+14, row*90+10, 84, 80);
        [button setImage:thumb forState:UIControlStateNormal];
        [button addTarget:self 
                   action:@selector(clickImage:) 
         forControlEvents:UIControlEventTouchUpInside];
        button.tag = i;
        button.layer.shadowColor = [UIColor colorWithWhite: 0.15 alpha: 0.55].CGColor;
        button.layer.zPosition = -8;
        button.layer.shadowOffset = CGSizeMake(0, 5);
        button.layer.shadowOpacity = 1;
        button.layer.shadowRadius = 2.0;
        button.clipsToBounds = NO;
        [full addSubview:button];

        if (column == 2) {
            column = 0;
            row++;
        } else {
            column++;
        }

    }

    [full setContentSize:CGSizeMake(320, (row+1) * 90 + 10)];   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:13:31.070

当我注意到滚动视图的滚动动画在模拟器中非常流畅但在设备（iPad 3）上很慢时，我尝试实现`UIScrollViewDelegate`.

在模拟器上，两者`scrollViewWillBeginDecelerating`都`scrollViewDidEndDecelerating`被调用。在设备上，`scrollViewWillBeginDecelerating`被调用但从`scrollViewDidEndDecelerating`未被调用。

造成这种情况的原因可能是，在设备上，滚动视图有太多需要处理的内容，并且从未完成计算其内容的最终位置在哪里。因此，在完成动画和重新定位内容之前，它会解除触摸。但是当内容很重时，这需要很长时间。

所以我的解决方案是在滚动视图开始减速时立即终止动画。我只是实现了这个：

```
-(void)scrollViewWillBeginDecelerating:(UIScrollView *)scrollView{
    CGPoint offset = scrollView.contentOffset;
    [scrollView setContentOffset:offset animated:NO];
} 
```

由[其他 StackOverflow 答案](https://stackoverflow.com/questions/3410777/how-can-i-programmatically-force-stop-scrolling-in-a-uiscrollview)提供。

# javascript - d3.js 树布局如何使用函数命名类

> ID：11420568
> 
> 赞同：0
> 
> 时间：2012-07-10T19:33:51.663
> 
> 标签：javascript, tree, d3.js

我想制作一棵树，可以多次列出相同的东西，并且在鼠标悬停时，所有相同的东西都会展开或点亮或其他东西。我不知道如何做到这一点。我最初的想法是使用像

```
.attr("class", function(d){return d}) 
```

但这似乎不起作用。如果有人对如何做到这一点有任何想法，将不胜感激。例如，树可能看起来像

```
Food
  Vegtables
    Carrot
    Pizza
  Tastes good
    Cake
    Pizza 
```

我希望能够做到这一点，这样如果我在我的树上悬停在披萨上一次，它们都会在鼠标悬停动作时做同样的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T04:32:12.803

很可能您的代码不起作用，因为`d`它是一个对象（表示树中的一个节点），并且对象的默认 to-string 行为返回“[object Object]”；将类属性设置为“[object Object]”不会帮助您按类选择节点。

您需要**将 class 属性定义为 data 的属性**。例如，如果您的数据有一个`type`属性，那么您可以将类属性定义为

```
.attr("class", function(d) { return "node " + d.type; }) 
```

接下来，注册一个 mouseover 和 mouseout 处理程序以进行交互：

```
.on("mouseover", function(d) { highlight(d.type); })
.on("mouseout", function(d) { highlight(null); }) 
```

最后，highlight 函数按类选择节点并切换覆盖填充颜色的*活动类。*

```
function highlight(type) {
  if (type == null) d3.selectAll(".node").classed("active", false);
  else d3.selectAll(".node." + type).classed("active", true);
} 
```

*活动*类定义为：

```
.node.active {
  fill: red;
} 
```

现场示例：

*   [http://bl.ocks.org/3087986](http://bl.ocks.org/3087986)

有关如何选择相关节点的更多详细信息，请参阅我对[如何选择（然后修改）相关元素的回答？](https://stackoverflow.com/a/11211391/365814)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:14:40.310

你的答案很简单。首先，您需要访问树的根目录吗？知道了？好的。现在您只需在其上调用 jQuery 来查找您要查找的内容，然后切换一个类。例子：

```
 $(root).find("pizza").hover(function(){
    $(this).toggleClass("colorChange");
 }); 
```

**这是未经测试的，但如果构建正确，将工作**

# batch-file - 在 For 循环中批量使用 If 条件

> ID：11420571
> 
> 赞同：1
> 
> 时间：2012-07-10T19:33:54.627
> 
> 标签：batch-file

截至目前，我使用批处理执行操作，如下所示。FOR /D %%G in ("*") DO 命令

*   这将在所有文件夹上执行命令，因为我已经提到了“*”，现在我需要在上述命令中跳过文件夹（名称为 *Shared）。

请告知我是否可以使用 IF 循环来执行相同的操作以及我该怎么做。或建议是否有任何简单的方法来执行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:52:17.590

您可以检查`%%G`变量以查看文件夹名称。从那里，您可以获取最后 6 个字符并查看值是否为`Shared`.

我们使用`SETLOCAL ENABLEDELAYEDEXPANSION`以便我们可以更新循环内的变量。

```
@ECHO OFF

SETLOCAL ENABLEDELAYEDEXPANSION 

FOR /D %%G in ("*") DO ( 
   SET str=%%G

   IF /I "!str:~-6!" NEQ "Shared" (
       Command
   )
)

PAUSE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T20:15:16.300

另一种选择是使用 FINDSTR 过滤 DIR 命令的输出并使用 FOR /F 处理结果。

```
for /f "eol=: delims=" %%G in ('dir /b /ad ^|findstr /lie "shared"') do command 
```

这是一个更强大的 LittleBobbyTables 解决方案版本，适用`!`于文件夹名称。它还正确地进行了不区分大小写的比较。

```
setlocal disableDelayedExpansion
for /d %%G in (*) DO ( 
  set "str=%%G"
  setlocal enableDelayedExpansion
  if /i "!str:~-6!" neq "shared" command
  endlocal
) 
```

# ruby-on-rails - 乘客无法启动

> ID：11420572
> 
> 赞同：1
> 
> 时间：2012-07-10T19:33:54.403
> 
> 标签：ruby-on-rails, ruby, centos, passenger, selinux

在运行 SELinux 的 Cent OS 6.0 上，我收到错误消息“由于此错误，无法初始化乘客：无法启动 Phusion 乘客看门狗”

这个线程讨论了这个问题。 [https://groups.google.com/forum/?fromgroups#!topic/phusion-passenger/qaVUIq2HceE](https://groups.google.com/forum/?fromgroups#!topic/phusion-passenger/qaVUIq2HceE)

有没有办法在不禁用 SELinux 的情况下解决这个问题。似乎它并不重要，应该配置而不是禁用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T20:24:17.340

由于 SELinux 对 Apache 保持警惕，您可以尝试允许 Apache 访问乘客文件和目录。尝试以下，但 YMMV！如果你已经通过 gem 安装了 Phusion Passenger，那么运行这个命令来确定 Phusion Passenger 的根文件夹：

```
passenger-config --root 
```

然后做

```
chcon -R -h -t httpd_sys_content_t /path-to-passenger-root 
```

如果您从某种 tarball 安装了 Passenger，请尝试以下操作：

```
chcon -R -h -t httpd_sys_content_t /path/to/passenger/folder 
```

在任何一种情况下，重新启动 Apache。

您可能还需要满足 SELinux 的 *httpd_sys_content_t* 安全上下文才能访问您的 rails 应用程序。您可能还需要执行以下操作：

```
chcon -R -h -t httpd_sys_content_t /path/to/your/rails/app 
```

也许这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T16:32:38.910

使用 chcon 只能暂时起作用。下次机器重新启动并且 SELinux 重新标记时，配置将丢失。这些文件将被重新标记为适合它们在文件系统中的位置的任何上下文。

如果您将 rails 应用程序放在 /var/www/html 下，那么 SELinux 将在重新标记时维护上下文，因为 SELinux 政策规定这是 Web 内容应该位于的位置。最初，您`restorecon -R /var/ww/html/path/to/app`需要设置上下文。

不过我发现，Passenger 做了很多 SELinux 想要否认的事情，所以仅仅重新标记是不够的。创建允许这样做的策略很容易，但我认为这是一种安全风险。太糟糕了，Rails 社区并没有让部署在普通服务器上变得更容易（即不是 Ruby 堆栈）。

# objective-c - MagicalRecord 插入太慢

> ID：11420579
> 
> 赞同：2
> 
> 时间：2012-07-10T19:34:30.163
> 
> 标签：objective-c, xcode, nsmanagedobject, magicalrecord

我使用 MagicalRecord 并且必须一次在我的数据库中插入几条（比如说大约 50 条）记录。这大约需要 3 秒。这些插入的正常时间是正常的吗？我可以让它更快吗？我也想知道为什么我在后台和主线程中得到一个保存语句......

保存每个元素我得到这个日志：

```
2012-07-10 21:27:55.319 MyApp[9815:1b53] -[NSManagedObjectContext(MagicalSaves) MR_saveWithErrorCallback:](0x47f2e0) -> Saving <NSManagedObjectContext: 0x47f2e0>: ***   BACKGROUND SAVE *** Context 
2012-07-10 21:28:13.024 MyApp[9815:707] -[NSManagedObjectContext(MagicalSaves) MR_saveWithErrorCallback:](0x480310) -> Saving <NSManagedObjectContext: 0x480310>: *** DEFAULT *** Context *** MAIN THREAD *** 
```

上下文是默认的：

```
NSManagedObjectContext *context = [NSManagedObjectContext MR_defaultContext]; 
```

插入代码如下所示：

```
theWord = [Word MR_createEntity];
theWord.text = aCard.word;
theWord.playCount = [NSNumber numberWithInt:0];
theWord.user = user;    
[context MR_save]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T19:49:02.833

好吧，永远不要打电话

```
[context MR_save] 
```

在一个循环中-.-

# php - mySql 多列连接与重合数据

> ID：11420581
> 
> 赞同：1
> 
> 时间：2012-07-10T19:34:35.187
> 
> 标签：php, mysql, join, left-join

我有三张桌子。每一个都有三列。它看起来像这样：

```
表 1 表 2 表 3
-------------------- -------- ---------- ----------
col1 col2 colA col1 col2 colB col1 col2 colC
1 A 数据 3 C 数据 5 E 数据
2 B 数据 2 B 数据 6 F 数据
3 C 数据 1 A 数据 3 C 数据
4 D 数据 4 D 数据 2 B 数据
5 E 数据 6 F 数据 1 A 数据
6 F 数据 5 E 数据 3 C 数据

```

我的问题是，JOINS 是否有可能输出如下内容：

```
输出表                
-----------------------------------------
col1 col2 colA colB colC
1个数据数据数据
2 B数据数据数据
3C数据数据数据
4D数据数据数据
5 E数据数据数据
6 F数据数据数据

```

请注意，Col1 和 Col2 在不同列中始终具有相同的值，但顺序不同。

我什至不知道这是否可能，但理想情况下，查询将连接三个表并将 col1 和 col2 上的信息与每个相应的表相关联，并对两个连接表重新排序并输出单个表/数组。

让我知道这是否真的很愚蠢或复杂......我一直在努力解决这个问题，但通过 mySql 知识非常有限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:39:48.543

```
SELECT *
FROM t1
LEFT JOIN t2 USING (col1, col2)
LEFT JOIN t3 USING (col1, col2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:39:49.633

当然有可能。只要您在表中拥有相同的数据，您就可以将它们链接起来并一起显示数据。

例如：

```
SELECT table1.*, colB, colC FROM table1, table2, table3
WHERE table1.col1 = table2.col1 AND table2.col1 = table3.col1
ORDER BY table1.col1 ASC; 
```

将在您的问题中输出表格。我没有`col2`在示例中用作条件，因为不需要将数据链接在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:40:12.710

这是用于简单双连接的 SQL。如果您需要澄清我误解的任何内容，可以进行调整。

```
SELECT 
  table1.col1, 
  table1.col2, 
  colA, 
  colB, 
  colC
FROM table1 
JOIN table2 
  ON table1.col1 = table1.col1 
  AND table1.col2 = table2.col2
JOIN table3 
  ON table1.col1 = table3.col1 
  AND table1.col2 = table3.col2 
```

# sql - SQL Join 同一张表

> ID：11420582
> 
> 赞同：-2
> 
> 时间：2012-07-10T19:34:41.113
> 
> 标签：sql, oracle

我有一个包含以下列的表格

*   产品类型
*   品牌 ID

我需要**brand_ids** A和B，但不是C

在该表中，可以有多个具有相同product_type 但具有不同brand_id 的记录。

可能是需要 INNER SELF JOIN 吗？或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:57:22.800

```
SELECT A.product_type
FROM product_table A
JOIN product_table B ON A.product_type = B.product_type
LEFT JOIN product_table C ON A.product_type = C.product_type
                         AND c.brand_id = 'C'
WHERE A.brand_id = 'A'
  AND B.brand_id = 'B'
  AND c.brand_id IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:39:20.677

我将假设这`(PRODUCT_TYPE, BRAND_ID)`是您表的唯一键。

这是一种方法来做我认为你所追求的：

```
SELECT product_type FROM product_table
  WHERE brand_id IN ('A','B')
  GROUP BY product_type
  HAVING COUNT(*) = 2
MINUS
SELECT product_type FROM product_table
  WHERE brand_id IN ('C') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:54:30.540

你可以试试这个解决方案：

```
SELECT a.product_type
FROM
(
    SELECT product_type 
    FROM tbl 
    WHERE brand_id IN ('A', 'B')
    GROUP BY product_type
) a
LEFT JOIN tbl b ON a.product_type = b.product_type AND b.brand_id = 'C'
WHERE b.brand_id IS NULL 
```

# iphone - 如何录制/保存 iPhone 应用程序中正在播放的音频？

> ID：11420586
> 
> 赞同：3
> 
> 时间：2012-07-10T19:34:56.483
> 
> 标签：iphone, core-audio, audio-recording, audiounit

我想录制（另存为文档目录中的文件）正在应用程序中播放的音频。基本上我可以连接到音频输出缓冲区并可以在文件中读取/保存这些缓冲区吗？

我读了一些博客并在谷歌上搜索。他们中的大多数都指向 AudioUnit。

我曾尝试使用 AudioUnit - RemoteIO 但我无法实现我想要的，可能是我搞砸了。

以下是我为初始化 AudioUnit 编写的代码

```
OSStatus status;

// Describe audio component
AudioComponentDescription desc;
desc.componentType = kAudioUnitType_Output;
desc.componentSubType = kAudioUnitSubType_RemoteIO;
desc.componentFlags = 0;
desc.componentFlagsMask = 0;
desc.componentManufacturer = kAudioUnitManufacturer_Apple;

// Get component
AudioComponent inputComponent = AudioComponentFindNext(NULL, &desc);

// Get audio units
status = AudioComponentInstanceNew(inputComponent, &mAudioUnit);

// Enable IO for recording
UInt32 flag = 1

// Enable IO for playback
status = AudioUnitSetProperty(mAudioUnit, 
                              kAudioOutputUnitProperty_EnableIO, 
                              kAudioUnitScope_Output, 
                              kOutputBus,
                              &flag, 
                              sizeof(flag));

// Describe format
AudioStreamBasicDescription audioFormat={0};
audioFormat.mSampleRate         = kSampleRate;
audioFormat.mFormatID           = kAudioFormatLinearPCM;
audioFormat.mFormatFlags        = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
audioFormat.mFramesPerPacket    = 1;
audioFormat.mChannelsPerFrame   = 1;
audioFormat.mBitsPerChannel     = 16;
audioFormat.mBytesPerPacket     = 2;
audioFormat.mBytesPerFrame      = 2;

// Apply format
status = AudioUnitSetProperty(mAudioUnit, 
                              kAudioUnitProperty_StreamFormat, 
                              kAudioUnitScope_Output, 
                              kInputBus, 
                              &audioFormat, 
                              sizeof(audioFormat));

// Set input callback
AURenderCallbackStruct callbackStruct;
callbackStruct.inputProc = playbackCallback;
callbackStruct.inputProcRefCon = self;

status = AudioUnitSetProperty(mAudioUnit, 
                              kAudioUnitProperty_SetRenderCallback, 
                              kAudioUnitScope_Input, 
                              kOutputBus,
                              &callbackStruct, 
                              sizeof(callbackStruct));
AudioUnitInitialize(mAudioUnit);
AudioOutputUnitStart(mAudioUnit); 
```

在回放回调中：

```
static OSStatus playbackCallback(void *inRefCon, 
                             AudioUnitRenderActionFlags *ioActionFlags, 
                             const AudioTimeStamp *inTimeStamp, 
                             UInt32 inBusNumber, 
                             UInt32 inNumberFrames, 
                             AudioBufferList *ioData) {    
double timeInSeconds = inTimeStamp->mSampleTime / kSampleRate;
printf("\nPLAYBACK %fs inBusNumber: %lu inNumberFrames: %lu ", timeInSeconds, inBusNumber, inNumberFrames);

AudioBufferList bufferList;

SInt16 samples[inNumberFrames]; // A large enough size to not have to worry about buffer overrun
memset (&samples, 0, sizeof (samples));

bufferList.mNumberBuffers = 1;
bufferList.mBuffers[0].mData = samples;
bufferList.mBuffers[0].mNumberChannels = 1;
bufferList.mBuffers[0].mDataByteSize = inNumberFrames*sizeof(SInt16);

ViewController* THIS = THIS = (__bridge ViewController *)inRefCon;

OSStatus status;
status = AudioUnitRender(THIS->mAudioUnit,     
                         ioActionFlags, 
                         inTimeStamp, 
                         kOutputBus, 
                         inNumberFrames, 
                         &bufferList);

if (noErr != status) {

    printf("AudioUnitRender error: %ld", status); 
    return noErr;
}

// Now, we have the samples we just read sitting in buffers in bufferList
ExtAudioFileWriteAsync(THIS->mAudioFileRef, inNumberFrames, &bufferList);

return noErr;
} 
```

上面的 mAudioFileRef 是我在`viewDidLoad`.

当我运行上面的程序时，我收到 AudioUnitRender 错误：-50。并且 mp3 文件没有填充数据。

可能我在设置音频单元或从 ioData 读取缓冲区时犯了一些错误。

非常感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:44:51.857

好的。这里很多事情都可能出错。

*   我不知道你是如何初始化你的 ExtAudioFileRef 的。
*   您设置的客户端格式是什么。
*   你设置什么音频格式（是的，正确的 mp3）。
*   您使用的是什么文件格式。
*   他们都必须无缝协作。

不过，看看这个条目。这是一个完美的工作示例代码：

[从 RemoteIO 录制到 AAC：正在写入数据但文件无法播放](https://stackoverflow.com/questions/10113977/recording-to-aac-from-remoteio-data-is-getting-written-but-file-unplayable)

它有点做你需要的。即时录制压缩音频。

你有没有`ExtAudioFileWriteAsync`像这样初始化你的（在回调之前）？

```
ExtAudioFileWriteAsync(extAudioFileRefVar, 0, NULL); 
```

如果没有更多的代码，真的很难说出所有可能的事情中哪些地方会出错。

# javascript - 为什么我的 JavaScript 权威指南类示例的替代版本不起作用

> ID：11420597
> 
> 赞同：1
> 
> 时间：2012-07-10T19:35:38.327
> 
> 标签：javascript

它在第 9 章关于类和模块的第 200-201 页。在我看来，下面的这种方法更简单，但下面的注释输出行由于未知原因不起作用：

```
Range.prototype = {
  includes: function(x) {
    return this.from <= x && x <= this.to;
  },

  foreach: function(f) {
    for (var x = Math.ceil(this.from); x <= this.to; x++) f(x);
  },

  toString: function() {
    return "(" + this.from + "..." + this.to + ")";
  },

  Z: "ZZZZZZZZZZZZZZZZZZZ",    
}

function Range(from,to) {
  this.from = from
  this.to = to
}

var r = new Range(1,3)

console.log(Range.prototype.Z)
console.log(r.constructor.prototype.Z)  //undefined 
console.log(r.Z)
console.log(r.includes(2));
console.log(r.toString());
console.log(r);  // Does not use Range.toString 
r.foreach(console.log); // TypeError 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:01:12.680

1)`console.log(r.constructor.prototype.Z) //undefined`

问题在于，`r.constructor === Object`而不是`Range`. 这是因为该值是从对象继承而来的`prototype`，该对象本身具有`constructor`of `Object`。

您必须在原型中覆盖它才能`Range`按预期引用它：

```
Range.prototype = {
  constructor: Range,
  ...
} 
```

[**编辑**]或者，您可以扩展现有对象，而不是将整个设置`prototype`为新对象：

```
Range.prototype.includes = function ...;
Range.prototype.foreach = function ...;
Range.prototype.toString = function ...;
Range.prototype.Z = "ZZZZZZZZZZZZZZZZZZZ"; 
```

有了这个，任何预设键，如`constructor`，仍然是 的一部分，`prototype`而无需自己设置。

* * *

2)`console.log(r); // Does not use Range.toString`

控制台根本不使用`toString()`. 相反，它将实例列为可浏览的，因此您可以查看其所有属性及其值。

如果您希望它显示 的结果`toString()`，则必须像之前在行中所做的那样自己调用它：

```
console.log(r.toString()); 
```

* * *

3)`r.foreach(console.log); // TypeError`

`log`特别需要它的上下文（的值`this`）为`console`，但它被作为没有上下文的简单函数引用传递。

您要么必须将其包装在另一个函数中，以便可以将其作为方法调用，要么[`bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)将其用于`console`：

```
r.foreach(function (n) { console.log(n); });
r.foreach(console.log.bind(console)); 
```

# java - 输入字符串时出现 Antlr 错误

> ID：11420598
> 
> 赞同：1
> 
> 时间：2012-07-10T19:35:38.167
> 
> 标签：java, string, antlr, literals, antlrworks

当我使用我的 Antlr 定义语言在我的 Java 编辑器中输入一个字符串时，我一输入第一个引号（“）就会出错。

**输入：**

```
 StatusString = ";
    break; 
```

**错误：**

```
java.lang.IllegalStateException: Lexer com.lexer.IpIdeLexer@5ab38d6b
  returned null token but lexerInput.readLength()=21
  lexer-state: null
  tokenStartOffset=557, readOffset=578, lookaheadOffset=579
  Chars: "";\n        break;\n}\n\n" - these characters need to be tokenized.
Fix the lexer to not return null token in this state. 
```

我怀疑这是因为我在语法中定义了我的字符串文字。

**语法定义**

```
STRING_LITERAL
    :  '"' ( EscapeSequence | ~('\\'|'"') )* '"' {setText(getText().substring(1,    getText().length()-1));}
    ;

fragment
EscapeSequence
    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')
    |   OctalEscape
    ; 
```

我怀疑正在发生的事情是，一旦它看到第一个引号，它就会尝试提取字符串。这是实时完成的，因为它是一个使用词法分析器对语法进行颜色编码的 IDE。我可以用我的语法做些什么来防止这个错误吗？

**编辑：**我想做的是让它检查到行尾。IDE 只会从引用开始将线涂成橙色，直到用户完成引用，就像 netbeans 或 eclipse 一样。我只是不确定如何通过语法来解决这个问题，所以它反映在词法分析器/解析器中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:51:12.650

如果您要尝试防止错误，那么如果您真的忘记了某处的引号，您也会错过错误，而不仅仅是在您刚刚输入了起始引号时。

我会通过让您的 IDE 等待几毫秒（1/2 秒左右）来解决这个问题，以便您有时间输入结束引号，或者让 IDE 自动插入结束引号？

尝试调整语法以使其也允许无效输入不是一个好主意，IMO。

# html - 带有生产网站的图像 GET 请求

> ID：11420599
> 
> 赞同：0
> 
> 时间：2012-07-10T19:35:47.810
> 
> 标签：html, css, ftp

我刚刚为我的个人网站获得了一个域。它仍然是一项正在进行中的工作，但立即引起我注意的一件事是，从网站查看时，徽标图像不会显示在浏览器中。它在本地主机上工作，我可以使用 DreamHost 上的 FTP 图像浏览器完美地看到图像。

此外，我的其他图像显示良好，它们都是在同一个程序中制作的，并保存为相同的类型，等等。我不知道问题可能是什么。看起来对图像的 GET 请求不成功。这是我的网站：www.daemondeveloper.com

会是什么呢？

Ps 使用 chrome 或 Firefox 查看，我尚未更改 CSS 以与 IE 一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:38:41.187

服务器的文件系统不区分大小写。您正在请求`ddlogo.png`并且文件名为`ddLogo.png`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:39:55.270

图像名称是“ddLogo.png”而不是“ddlogo.png”。修复你的html，你会没事的；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:40:26.710

我刚刚解决了。似乎使用我的本地主机 XAMPP，文件名不区分大小写，但使用 DreamHost 时是。我只需要更改 href 以引用确切的文件名，它就可以工作:)

# mysql - 使用命令行复制 mysql 数据库

> ID：11420601
> 
> 赞同：2
> 
> 时间：2012-07-10T19:35:58.623
> 
> 标签：mysql, database, permissions, terminal

我想复制一个`db1`使用命令行命名的 mysql 数据库。在这样做时，我想从中获取所有表和字段`db1`，但不是它的值。

我看过很多关于这个主题的问答。例如，[不使用 mysqldump 复制/复制数据库](https://stackoverflow.com/questions/25794/mysql-copy-duplicate-database)。不幸的是，我无法完成此链接中建议的两步过程：

1.  创建数据库
2.  mysqldump 从 db1 到 db2

这是我从 bash 终端开始的代码：

```
ubuntu@ip-xx-xxx-xxx-xx:~$ sudo -i
root@ip-xx-xxx-xxx-xx:~# mysql -h mysite.com -u timpeterson -p
Enter password: 
mysql> create database `db2`;
ERROR 1044 (42000): Access denied for user 'timpeterson'@'%' to database 'db2' 
```

似乎值得注意的是，`db2`只要我不`root`通过打字成为我就可以创造`sudo i`。不幸的是，如果我没有成为 root，我将无法弄清楚如何`db2`远程访问我的最终需要做的事情。也就是说，我不知道如何`db2`从我的网络应用程序访问`mysite.com`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:41:49.610

好吧，当然您需要使用具有创建数据库权限的登录名。

从 mysql 管理员帐户（通常是 root 或 mysqladm[in]），

```
CREATE DATABASE db2;
-- instead of ALL PRIVILEGES, see what privileges you really need for the application
GRANT ALL PRIVILEGES ON db2.* TO 'timpeterson'@'%' IDENTIFIED BY 'timspassword';
FLUSH PRIVILEGES; 
```

然后从命令行

```
mysqldump --opt --no-data db1 --user=USERWITHACCESSTODB1 --password | mysql db2 --user=timpeterson --password 
```

FLUSH PRIVILEGES 特别棘手——在*某些*安装中，权限不会自动重新加载，因此您可能会发现自己将 Clark Kent 的超能力授予用户，而该用户仍然无法执行任何操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:40:39.760

看起来您的第一个问题可能是权限问题。尝试以 root 身份登录 MySQL 控制台并执行`GRANT ALL PRIVILEGES ON db2.* TO 'timpeterson'@'%';`. 然后再试一次。

# xsd - simpleXML xs:choice 元素

> ID：11420608
> 
> 赞同：1
> 
> 时间：2012-07-10T19:36:16.983
> 
> 标签：xsd, simplexml, element, choice, annotate

我有以下内容：

```
<xs:complexType name="AnswerType">
    <xs:choice minOccurs="1" maxOccurs="1">
        <xs:element name="Checklist" type="ChecklistType" />
        <xs:element name="OptionList" type="OptionListType" />
        <xs:element name="Measurement" type="MeasureType" />
    </xs:choice>
</xs:complexType> 
```

如何使用 SimpleXML 注释选择 XSD 元素？目前我必须将它们全部设置为 required=false

```
@Element(name = "Checklist", required=false)
protected ChecklistType checklist;
@Element(name = "OptionList", required=false)
protected OptionListType optionList;
@Element(name = "Measurement", required=false)
protected MeasureType measurement; 
```

肯定有更好的办法。一个必须是 required=true 但如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:08:06.473

我在教程中找不到这个问题的答案，但我翻到了例子，找到了第二个例子来解决这个问题。在 javadocs 中查找[ElementUnion类。](http://simple.sourceforge.net/download/stream/doc/javadoc/org/simpleframework/xml/ElementUnion.html)例子在[这里](http://simple.sourceforge.net/download/stream/doc/examples/examples.php)

```
@Root
public class Example {

   @ElementUnion({
      @Element(name="text", type=String.class),
      @Element(name="int", type=Integer.class),
      @Element(name="double", type=Double.class)
   })
   private Object value;
} 
```

# java - 如何在 Android 的 PopupWindow 内创建 Spinner 小部件？单击 Spinner 时获取 BadTokenException

> ID：11420609
> 
> 赞同：1
> 
> 时间：2012-07-10T19:36:17.417
> 
> 标签：java, android, spinner, popupwindow

我一直在网上搜索这个问题的解决方案，但不幸的是，我似乎找不到答案。我为其中带有 Spinner 的 PopupWindow 创建了一个 XML 文件。在按钮事件侦听器中，我调用以下代码来膨胀 PopupWindow 并将其显示在屏幕上。

```
LayoutInflater inflater = getLayoutInflater();
settings_layout = inflater.inflate(R.layout.setting_popout, (ViewGroup) findViewById(R.id.setting_popout));

// Creates a popup window of required width and height, and displays
// the popup in the center of the screen.
pw_settings = new PopupWindow(settings_layout, 400, 470, true); 
pw_settings.showAtLocation(settings_layout, Gravity.CENTER, 0, 0);

spColors = (Spinner) settings_layout.findViewById(R.id.linecolor);

// Sets the initial values of the color spinner and the listener
ArrayAdapter<CharSequence> adapter_color = 
    ArrayAdapter.createFromResource(this, R.array.colors_array, android.R.layout.simple_spinner_item);
adapter_color.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spColors.setAdapter(adapter_color);
spColors.setSelection(adapter_color.getPosition(over.color)); 
```

单击按钮时，弹出窗口显示正常。但是，当我单击 Spinner 时，我在 LogCat 中收到以下错误。

> android.view.WindowManager$BadTokenException: 无法添加窗口——令牌 android.view.ViewRootImpl$W@41402a90 无效；您的活动正在运行吗？...

我不确定我做错了什么。任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-14T15:06:29.570

可能有点晚了，并且不完全是原始问题的答案，但我从另一个问题here中发现，将以下行插入到我的微调器的 xml 中可以防止发生该错误。

`android:spinnerMode="dialog"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-17T13:09:57.827

我现在已经遇到过几次这个问题，我发现的唯一不耗时的方法是上面 Mike Fosker 提出的方法。

```
android:spinnerMode="dialog" 
```

使微调器的选项列表显示在单独的弹出窗口中，这不会触发您在代码中打开的初始弹出窗口。例如 ：

```
<Spinner
android:id="@+id/myspinner"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:spinnerMode="dialog" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:44:35.333

尝试：

```
settings_layout = inflater.inflate(R.layout.setting_popout, null);
((ViewGroup) findViewById(R.id.setting_popout)).addView(settings_layout); 
```

另外，为什么要将弹出窗口中的布局附加到`ViewGroup`您的活动中？您可能会逃脱：

```
settings_layout = inflater.inflate(R.layout.setting_popout, null); 
```

# c# - 加载图像数组

> ID：11420611
> 
> 赞同：1
> 
> 时间：2012-07-10T19:36:25.060
> 
> 标签：c#, arrays, winforms, image

我在 Windows 窗体上有一组图像。当检查与图像相对应的复选框时，我想将图像添加到数组中。每次我选中该框时，它都会显示“未处理 FileNotFoundException”。

```
public partial class FrmSignage : Form
{
    Image[] images = new Image[12];
    int i = 0;
    public FrmSignage()
    {
        InitializeComponent();
    }

    private void chkRadiation_CheckedChanged(object sender, EventArgs e)
    {
        images[i] = Image.FromFile("radiation.gif");   
        i++;
    } 
```

错误在“images[i] = Image.FromFile("radiation.gif");" 行上抛出。文件名是正确的。我会错过什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:39:07.490

> 文件名是正确的。

您还需要提供文件的正确路径。文件名很可能是正确的，但当前目录不是您所期望的。

默认情况下，它将尝试从与 .exe 相同的文件夹加载图像 - 即：`Project\bin\Debug`，但这可以在运行时更改。在不指定路径的情况下加载图像是不安全的，因为可以更改当前目录，因此您应该指定完整路径。

System.IO 中的类（例如[Path](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)）为构建正确的路径提供了相当多的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:39:16.017

您应该确保路径“radiation.gif”有意义。这将始终检查运行可执行文件的目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:39:28.343

问题是找不到相对于正在运行的代码的文件。即使该文件存在于您的环境中，因为它是一个相对路径，它也必须相对于正在运行的代码存在。

一种方法是假设您将图像作为项目项，您可以将其构建操作更改为`Content`并将副本设置为输出目录`Copy if Newer`（这些选项可以在项目的“属性”窗口中找到）

您还应该在代码中添加一些错误处理，因为即使您已确保图像在正确的位置，有什么可以阻止您的用户删除图像？

# javascript - 如何使用 if 语句检查 sessionStorage 值是否为 NaN？

> ID：11420612
> 
> 赞同：0
> 
> 时间：2012-07-10T19:36:26.687
> 
> 标签：javascript, html

有人可以用正确的语法帮助我检查数值（或表示为数值的变量）是否为 Nan，以便我可以将其设置为数值吗？

我有

```
if (isNaN(sessionStorage.newDate)){
    sessionStorage.newDate=1984;
    } 
```

但它返回错误“isNan 未定义”

我使用 html5 sessionStorage 作为变量，但我认为它不依赖于它，因为我无法使用任何变量。

（上面的代码编辑正确）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:38:14.753

`isNaN(value)`函数名中的最后一个“n”大写

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:38:14.983

您要查找的函数的名称是[`isNaN()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/isNaN)（在 Javascript 中大小写很重要）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:40:04.340

你有一个案例问题。

你把：

```
isNan(sessionStorage.newDate) 
```

并且，您必须输入：

```
isNaN(sessionStorage.newDate) 
```

南，不是南。

# php - 使用 WP 类别帖子列表小部件动态显示特定类别 (WP/PHP)

> ID：11420615
> 
> 赞同：5
> 
> 时间：2012-07-10T19:36:31.180
> 
> 标签：php, wordpress

我正在尝试在我正在处理的博客上使用类别帖子 (WP-CPL) 插件按类别过滤“最近的帖子”。基本上，当有人点击博客上的类别名称时，我希望它显示该类别的帖子。这将通过 Life Is Simple 模板的“archives.php”文件。

该插件的简码是：

```
[wp_cpl_sc cat_id=40 list_num=4 css_theme=2 sticky_post="79"] 
```

这只是一个示例，其中“cat_id”表示插件将显示的类别。我不想只显示一个类别，我希望它在有人点击链接时显示适当的类别。如何让插件识别正在请求的类别并显示适当的帖子？

我知道类别标题是：

```
<?php single_cat_title(); ?> 
```

但是我如何以这种方式找到类别 ID 号？如果需要编辑，我在下面包含了名为“wp_cpl_shortcode.php”的插件文件的 PHP。为简单起见，我更愿意在网站的实际编码中使用简码。

```
<?php
/**
 * shortcode
 * The library of shortcode class
 * @author Swashata <swashata4u@gmail.com>
 * @subpackage WP Category Post List Plugin
 * @version 2.0.0
 */

/**
 * The WP CPL shorttag support
 * @since 1.1.0
 * This was started from the version 1.1.0 and was finished by 2.0.0
 */
class itgdb_wp_cpl_shortcode {
    /**
     * The wp_cpl_shortcode_handler function
     * This function is responsible for converting shortcodes into dynamic contents
     * @package WordPress
     * @subpackage WordPress Category Post List plugin
     * @since 1.1.0
     * @param array $atts The attributes passed through the shortcode
     * @param string $content The string passed through the shortcode. Used for generating title
     * @return string The modified content
     */
    public function wp_cpl_shortcode_handler($atts, $content = null) {
        /** first extract the attributes */
        $op = shortcode_atts(array(
        'cat_id'            => 1,
            'css_theme'                 => 0,
        'is_thumb'          => 'true',
        'list_num'          => 10,
        'show_comments'     => 'true',
        'sort_using'        => 1,
        'sort_order'        => 'asc',
        'exclude_post'      => '',
        'sticky_post'       => '',
            'show_date'                 => 'true',
            'show_author'               => 'true',
            'show_excerpt'              => 'true',
            'excerpt_length'            => 150,
            'optional_excerpt'          => 'false',
            'read_more'                 => __('Continue Reading', itgdb_wp_cpl_loader::$text_domain),
        ), $atts);

        /** Sanitize some of the user datas */
        $cat_id = (int) $op['cat_id'];
        $i = 0;
        /** Done, now the main thing */
        include_once itgdb_wp_cpl_loader::$abs_path . '/includes/wp_cpl_output_gen.php';
        $output_gen = new itgdb_wp_cpl_output_gen();
        return $output_gen->shortcode_output_gen($op);
    }
} 
```

抱歉，如果这个问题令人费解，我仍在学习，并认为我今天已经扭曲了我的大脑。谢谢你的帮助！

* * *

插件页面在这里：

[http://wordpress.org/extend/plugins/wp-category-posts-list/](http://wordpress.org/extend/plugins/wp-category-posts-list/)

PS 我也会在 wordpress.stackexchange.com 上发布这个，我只是想也许这也是在这个论坛上问的一个很好的 PHP 编码问题。

* * *

## 编辑

我尝试了几件事。

第一：

```
<?php $categoryid = get_the_category($post->ID);
echo do_shortcode( '[wp_cpl_sc cat_id=".$categoryid." list_num=4 css_theme=2 sticky_post="79"]'); 
?> 
```

这没有做任何事情。它只显示了前四个帖子。

第二（我在 WordPress 中发现了一个不同的 PHP 函数）：

```
<?php $category_current = get_query_var($cat);
echo do_shortcode('[wp_cpl_sc cat_id="$category_current" list_num=4 css_theme=2 sticky_post="79"]');
?> 
```

我从这里开始这个想法[http://www.wpsite.net/how-to-get-category-id-current-category/](http://www.wpsite.net/how-to-get-category-id-current-category/)。正如网站上所说，我还尝试将它作为 get_query_var('cat') ，但这也不起作用。我接近了吗？这是语法的小问题吗？基本上只需要获取当前类别 ID 号并将其传递到短代码的“cat_id”部分。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:52:50.053

有一种更简单的方法可以做我想做的事情（对于所有未来正在查看这篇文章的人）。我只是通过 PHP 从博客中动态调用不同的元素。我先这样设置：

```
<?php
global $post;
$category = get_the_category($post->ID);
$category = $category[0]->cat_ID;
$myposts = get_posts(array('numberposts' => 5, 'offset' => 0, 'category__in' => array($category), 'post__not_in' => array($post->ID),'post_status'=>'publish'));
foreach($myposts as $post) :
setup_postdata($post);
?> 
```

然后要调用的不同元素是缩略图： `<?php the_post_thumbnail(); ?>`

您还可以像这样调整缩略图的大小： `<?php set_post_thumbnail_size( 300, 300 ); ?>`

标题： `<?php the_title(); ?>`

摘录： `<?php the_excerpt(); ?>`

它们可以通过将这些元素包含在 div 中来设置样式，并因此设置 div 的大小。比尝试更改已经硬编码的插件要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:43:28.250

您可以使用 获取当前类别 ID `get_the_category($post->ID);`。这将为您提供您正在查看的帖子所分配的类别的 ID。

你如何显示你的插件？您是否在文件中的某处写下您的简码？如果是，请尝试[do_shortcode](http://codex.wordpress.org/Function_Reference/do_shortcode)。

# android - Android 模拟器 - 屏幕旋转

> ID：11420617
> 
> 赞同：18
> 
> 时间：2012-07-10T19:36:50.080
> 
> 标签：android, android-emulator, rotation, screen, emulation

我想在模拟器上测试手机的旋转，我到处都看到我们必须使用**`Ctrl`+`F11`**但它只旋转模拟器的图像并且不会启动配置更改事件或重绘活动。

这是我的**`Ctrl`+`F11`**：

![模拟器旋转](../Images/9ed02b1a769a4e91b18962e826c3a18f.png)

那么，我必须使用什么来模拟真正的旋转？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-10T08:09:29.563

你也可以这样做：

禁用加速度计控制旋转 - 只需执行一次

```
adb shell content insert --uri content://settings/system --bind name:s:accelerometer_rotation --bind value:i:0 
```

旋转景观：

```
adb shell content insert --uri content://settings/system --bind name:s:user_rotation --bind value:i:1 
```

旋转纵向：

```
adb shell content insert --uri content://settings/system --bind name:s:user_rotation --bind value:i:0 
```

旋转倒置景观：

```
adb shell content insert --uri content://settings/system  --bind name:s:user_rotation --bind value:i:3 
```

倒置纵向旋转：

```
adb shell content insert --uri content://settings/system  --bind name:s:user_rotation --bind value:i:2 
```

如果您有 WRITE_SETTINGS 权限，您也可以通过 java 代码中的内容提供程序进行编写。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T19:38:42.933

[http://developer.android.com/tools/help/emulator.html](http://developer.android.com/tools/help/emulator.html)这应该可以

你还支持纵向和横向模式吗

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-24T17:31:43.757

正如 Nicolas Jafelle[在这里](https://stackoverflow.com/questions/11265418/android-emulator-after-updating-to-adt-20-no-longer-automatically-rotates-screen)所建议的那样，您可以尝试在模拟器设置中添加属性“键盘支持-->是”。这对我有帮助。

PS：它还允许您的模拟器从您的键盘获取输入。[在这里](https://stackoverflow.com/questions/11235370/android-emulator-doesnt-take-keyboard-input-sdk-tools-rev-20)查看更多

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T17:10:38.507

这只是在 2.3 模拟器中不起作用，如果那是你使用的

看这里：

[Android - 横向模式下的模拟器，屏幕不旋转](https://stackoverflow.com/questions/7394447/android-emulator-in-landscape-mode-screen-does-not-rotate)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-08T03:06:47.150

我和你做了同样的事情，并在 AVD 中打开了“自动旋转屏幕”选项。像魅力一样工作。

# ruby-on-rails - 导轨中的清洁方式可根据环境具有不同的行为

> ID：11420619
> 
> 赞同：0
> 
> 时间：2012-07-10T19:37:04.977
> 
> 标签：ruby-on-rails

我正在寻找一种干净的方式来获得不同的行为，具体取决于我们是在测试、开发、登台还是生产环境中。

我的问题很笼统，但我最好的具体例子是发送通知。假设我的用户模型对象中有一个名为 notify 的函数

```
def notify(message)
  #send a notification to the user (differs depending on the environment)
end 
```

在测试环境中，我想使用一个模拟对象，它只是将通知保存到一个文件中。在登台和生产环境中，我想使用一个 PushNotification 对象，它实际上将 API 请求发送到第三方服务。我需要为每个环境使用不同的 api 密钥。

我在想我会在 lib/notifiers 创建一个文件夹并创建一个 file_notifier.rb 和一个 push_notifier.rb。我不知道在哪里（哪些文件）以及如何初始化正确的通知程序。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:47:11.470

对于初学者，我将成为一个爱发牢骚的婊子——你没有一个*函数*，而是一个*方法*。您会看到，在接收器对象上调用方法。*为什么这很重要？*因为如果你仔细想想，它就会揭示出你遇到困难的罪魁祸首：

### 用户对象没有切换“通知”对象的输出位置的业务。

因此，解决问题的第一步是创建一个对象来处理通知，并且可以独立配置为根据环境适当地运行。请注意，这个对象*本身不应该知道或关心*环境，但应该是可*配置*的，以便您可以在开发中轻松地模拟它，这可能发生在您的`development.rb`文件或初始化程序中（也许调用`configure_notifier.rb`它将为任何环境配置它）。

至于使用不同的 API 密钥，那完全是一个单独的问题——你真的不想将它们存储在你的存储库中，而普遍接受的方法是配置你运行的环境以维护他们。对于 Heroku，作为一个流行的例子，你可以运行`heroku config:add SOMESERVICE_API_KEY=abcdefg12345`然后在你的配置中通过`ENV['SOMESERVICE_API_KEY']`.

# android - 使用安卓测试账号有延迟吗？

> ID：11420629
> 
> 赞同：1
> 
> 时间：2012-07-10T19:37:53.397
> 
> 标签：android, in-app-purchase, android-service, in-app-billing

我已经按照 android 在应用程序购买中的步骤几乎一直到了 t。

我已经导出了我签名的应用程序，

我提出了 ITEM_ID 的请求包 - “剑”

我上传了 apk 并使用项目 ID“sword”创建了应用内购买条目，然后将我签名的 apk 安装到我的第二部手机上——该手机已分配给我的谷歌测试帐户。

我得到的只是RESULT_DEVELOPER_ERROR，根据：

[http://developer.android.com/guide/google/play/billing/billing_reference.html](http://developer.android.com/guide/google/play/billing/billing_reference.html)

说我犯了以下错误之一：

1/manifest 错误 - 我的清单明确要求计费 2/应用程序未正确签名 - 我正在安装已签名的 apk，我上传到 android 开发者控制台 3/缺少捆绑包密钥或无法识别的请求类型 - 我的捆绑包如下所示：

```
request.putString("BILLING_REQUEST", method);
request.putInt("API_VERSION", 1);
Log.e("sc2","package name is :"+mContext.getPackageName());

request.putString("PACKAGE_NAME", mContext.getPackageName()); 
```

其次是 ：

```
 request.putString("ITEM_ID", itemId);
        try {
            Bundle response = mService.sendBillingRequest(request);

            //The RESPONSE_CODE key provides you with the status of the request
            Integer responseCodeIndex   = (Integer) response.get("RESPONSE_CODE");
            //The PURCHASE_INTENT key provides you with a PendingIntent, which you can use to launch the checkout UI
            PendingIntent pendingIntent = (PendingIntent) response.get("PURCHASE_INTENT");
            //The REQUEST_ID key provides you with a unique request identifier for the request
            Long requestIndentifier     = (Long) response.get("REQUEST_ID");
            Log.i(TAG, "current request is:" + requestIndentifier);
            C.ResponseCode responseCode = C.ResponseCode.valueOf(responseCodeIndex);
            Log.i(TAG, "REQUEST_PURCHASE Sync Response code: "+responseCode.toString());

            startBuyPageActivity(pendingIntent, new Intent(), activityContext); 
```

itemId = "剑"

....我已经在这个问题上用尽了所有的努力——并且很想将机器人完全倾倒在应用计费中，除非某些英雄可能会捕捉到这里出了什么问题。

所有用于测试的标准产品 ID，如 android.test.purchase 等都可以完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:56:40.323

最后的答案是——是的——确实。这只是我添加我的谷歌测试账户和它实际上被识别之间的延迟：@！谷歌应该对此发出警告 - 应用内计费对编码来说是一场彻头彻尾的噩梦！

# nhibernate - nHibernate Eager Loading 在运行时

> ID：11420632
> 
> 赞同：0
> 
> 时间：2012-07-10T19:38:11.557
> 
> 标签：nhibernate, fluent-nhibernate, ncommon

我们正在使用 NCommon 的 UnitOfWorkScope，它包装了 nHibernate ISession 功能。我们的目标是按需预先加载复杂的属性，而不是总是通过配置预先加载它们。这个想法是，检索实体的给定服务可以通过调用代码进行一些自定义 - 有时我们只希望父实体被水合，其他时候我们可能也希望复杂的子属性也被水合。

为此，我们正在执行以下操作：

```
 var iSession = unitOfWorkScope.CurrentUnitOfWork<NHUnitOfWork>().GetSession<ParentEntity>();

  iSession.CreateCriteria<ParentEntity>().SetFetchMode("Children", FetchMode.Eager); 
```

在会话上设置好之后，我们使用 NCommon 的 IRepository 功能来检索实体：

```
 var parent = parentRepository.FirstOrDefault(x => x.Id == 123); 
```

但是，当我们检查 parent.Children 集合时，我们会得到：

```
 NHibernate.Collection.Generic.PersistentGenericBag<ChildEntity> 
```

...这告诉我没有发生急切加载。当我们修改 NH 映射以始终强制进行急切加载时，我们可以正确地看到子代。

任何人都可以阐明这一点吗？我假设我们错过了一些东西，因为 FetchMode.Eager 被忽略了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:17:36.140

这是解决方案，在这里找到：

[http://slynetblog.blogspot.com/2011/11/in-spite-of-common-now-approach-of.html](http://slynetblog.blogspot.com/2011/11/in-spite-of-common-now-approach-of.html)

# mysql - 来自多个表的mysql数据

> ID：11420648
> 
> 赞同：0
> 
> 时间：2012-07-10T19:39:02.883
> 
> 标签：mysql

我有一个尴尬的 mySQL 查询要进行，并且由于数据库结构不佳（我几年前就做到了）而苦苦挣扎：/

我有 3 张桌子`forum_list`，`forum_topics`和`forum_replies`。我正在通过 forum_list 表循环，显示名称，并且我想获取每个帖子中最后一篇文章的日期和 author_id。

问题是，最后一个帖子可能是 中的回复`forum_replies`，也可能是主题`forum_topics`

我需要一个子查询还是什么？

* * *

桌子`forum_list`

```
id     name    
1      General Chat 
```

* * *

桌子`forum_topics`

```
id    forum    author    date      
1     1        John      2012-12-12 12:12:12 
```

* * *

桌子`forum_replies`

```
id    forum    topic    author    date
1     1        1        John      2012-12-12 12:12:12 
```

## 更新

```
SELECT     forum_list.id
,          GREATEST(forum_topics.date, forum_replies.date) date
,          CASE GREATEST(forum_topics.date, forum_replies.date)
           WHEN forum_topics.date THEN MAX(forum_topics.author)
           WHEN forum_replies.date THEN MAX(forum_replies.author)
       END author
FROM       forum_list
LEFT JOIN  (
       SELECT   forum_topics.id
       ,        max(forum_topics.date) date
       FROM     forum_topics
       GROUP BY forum_topics.forum
       )        forum_topics_max
ON         forum_list.id = forum_topics_max.id
LEFT JOIN  forum_topics
ON         forum_topics_max.id = forum_topics.id
AND        forum_topics_max.date     = forum_topics.date
LEFT JOIN  (
       SELECT   forum_replies.id
       ,        max(forum_replies.date) date
       FROM     forum_replies
       GROUP BY forum_replies.topic
       )        forum_replies_max
ON         forum_list.id = forum_replies_max.id
LEFT JOIN  forum_replies
ON         forum_replies_max.id = forum_replies.id
AND        forum_replies_max.date     = forum_replies.date
GROUP BY   forum_list.id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:08:14.843

这应该得到答案，但它远非快速。

```
SELECT id, name, replies_1 .author, replies_1 .date
FROM forum_list
LEFT JOIN
(
    (SELECT forum, author, date FROM forum_topics)
    UNION
    (SELECT forum, author, date FROM forum_replies)
) AS replies_1 ON (replies_1.forum = forum_list.id)
LEFT JOIN
(
    (SELECT forum, author, date FROM forum_topics)
    UNION
    (SELECT forum, author, date FROM forum_replies)
) AS replies_2 ON (replies_2.forum = forum_list.id AND replies_2.date > replies_1.date)
WHERE replies_2.forum IS NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:11:41.440

这是一种方法：

```
SELECT     forum_lists.forum_id
,          GREATEST(forum_topics.date, forum_replies.date) date
,          CASE GREATEST(forum_topics.date, forum_replies.date)
               WHEN forum_topics.date THEN MAX(forum_topics.author)
               WHEN forum_replies.date THEN MAX(forum_replies.author)
           END author
FROM       forum_lists
LEFT JOIN  (
           SELECT   forum_topics.forum_id
           ,        max(forum_topics.date) date
           FROM     forum_topics
           GROUP BY forum_lists.forum_id
           )        forum_topics_max
ON         forum_lists.forum_id = forum_topics_max.forum_id
LEFT JOIN  forum_topics
ON         forum_topics_max.forum_id = forum_topics.forum_id
AND        forum_topics_max.date     = forum_topics.date
LEFT JOIN  (
           SELECT   forum_replies.forum_id
           ,        max(forum_replies.date) date
           FROM     forum_replies
           GROUP BY forum_replies.forum_id
           )        forum_replies_max
ON         forum_lists.forum_id = forum_replies_max.forum_id
LEFT JOIN  forum_replies
ON         forum_replies_max.forum_id = forum_replies.forum_id
AND        forum_replies_max.date     = forum_replies.date
GROUP BY   forum_lists.forum_id 
```

它看起来很复杂，但假设 forum_lists 不是太大，我认为这个解决方案会比 Kaii 的更快，尤其是随着 forum_replies 和 forum_topics 越来越大。

这是使用相关子查询的替代解决方案。它们通常比上面的解决方案慢，但如果 forum_lists 非常大（不太可能），那么它可能会更快：

```
SELECT     forum_lists.forum_id
,          GREATEST(forum_topics.date, forum_replies.date) date
,          CASE GREATEST(forum_topics.date, forum_replies.date)
               WHEN forum_topics.date THEN MAX(forum_topics.author)
               WHEN forum_replies.date THEN MAX(forum_replies.author)
           END author
FROM       forum_lists
LEFT JOIN  forum_topics
ON         forum_lists.forum_id = forum_topics.forum_id
AND        forum_topics.date = (
               SELECT MAX(date)
               FROM   forum_topics forum_topics_max
               WHERE  forum_topics_max.forum_id = forum_topics.forum_id
           )
LEFT JOIN  forum_replies
ON         forum_lists.forum_id = forum_replies.forum_id
AND        forum_replies.date = (
               SELECT MAX(date)
               FROM   forum_replies forum_replies_max
               WHERE  forum_replies_max.forum_id = forum_replies.forum_id
           )
GROUP BY   forum_lists.forum_id 
```

# c# - Silverlight WIA 扫描类数据类型问题

> ID：11420649
> 
> 赞同：0
> 
> 时间：2012-07-10T19:39:04.133
> 
> 标签：c#, silverlight, wia

我意识到有很多关于 C# 中的 WIA 扫描的问题，但与 Silverlight 相关的问题并不多。我一直在关注这里的一些代码：http: [//ithoughthecamewithyou.com/post/Scanning-from-the-ADF-using-WIA-in-C.aspx](http://ithoughthecamewithyou.com/post/Scanning-from-the-ADF-using-WIA-in-C.aspx) 我知道发生了什么，除了我不知道了解“设备”、“项目”、“属性”数据类型的来源。似乎没有人包含他们的 using 语句，而且对 C# 和 silverlight 不熟悉，我很困惑。

我在这里发现了另一个问题：[WIA Scanning via Feeder](https://stackoverflow.com/questions/7077020/wia-scanning-via-feeder)也使用了这些数据类型，但我似乎仍然无法弄清楚为什么当我尝试使用它们时在命名空间中的任何地方都找不到它们。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:58:49.927

我不知道您可以参考任何（免费）Silverlight 程序集以便与 WIA 交谈。您可以通过使用 COM 自动化来使用 WIA 提供的 COM 对象。Pete Brown 写了一篇非常有用的[文章](http://10rem.net/blog/2010/04/14/scanning-an-image-from-silverlight-4-using-wia-automation)，展示了如何做到这一点。我还在[博客](http://andrewolson.wordpress.com/2011/10/19/adf-scanning-with-silverlight/)中讲述了我编写 Silverlight 应用程序的经验，该应用程序使用 WIA 与具有文档进纸器的扫描仪通信。

# firebase - 从 Firebase 的引用中正确使用 hasChild() 和 forEach()？

> ID：11420650
> 
> 赞同：8
> 
> 时间：2012-07-10T19:39:07.327
> 
> 标签：firebase

以我有限的理解和 SQL 背景，我不太了解 hasChild() 和 forEach(); 的用法。他们觉得他们属于参考而不是快照。

（我将在余下的讨论中使用 hasChild()，但这些概念是可以互换的。）

这是我的推理：

1.  我有一个需要用户表的 Firebase 路径，比如说`appname/users`
2.  我想查看用户（Fred）是否存在
3.  我得到一个参考：`var users = new Firebase('appname/users')`

但我无法确定这里是否有孩子。所以这就是我现在所拥有的：

```
users.child('Fred').once('value', function(snapshot) {
   /** waits around forever if Fred doesn't exist */
}); 
```

但这并不完全奏效。因此，现在我必须通过以下方式获取用户的价值（感觉有点违反直觉，因为我对用户不感兴趣）：

```
var users = new Firebase('http://.../appname/users');
users.once('value', function(snapshot) { 
      snapshot.childExists('Fred', function(exists) { 
         /* do something here*/ 
      }); 
   }); 
```

根据文档，我不认为通过 fetching 会产生很大的开销`appname/users`，但是如果我只想确定键“Fred”是否存在，这感觉就像是一段难看的代码。

我想看到类似的东西：

```
var users = new Firebase('http://.../appname/users');
users.hasChild('Fred', function(exists[, snapshotOfFred]) { 
   /* do something here*/ 
}); 
```

有没有更好的方法来使用 forEach/hasChild？我在这里错过了任何重要的逻辑考虑吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T21:15:31.370

您的第一个代码片段实际上走在了正确的轨道上。.once() 将通过快照触发您的回调，无论 Fred 是否已经存在。所以你可以这样做：

```
users.child('Fred').once('value', function(snapshot) {
   if (snapshot.val() === null) {
       /* There is no user 'Fred'! */
   } else {
       /* User 'Fred' exists.
   }
}); 
```

您的第二个代码片段实际上*会*产生很大的开销，因为 Firebase 会从 Firebase 获取整个“用户”位置，如果您有 1000 个用户，这可能会非常大！所以第一个代码片段绝对是要走的路。

hasChild 和 forEach 位于 DataSnapshot 而不是 Firebase 的原因是它们可以同步。在我们早期的 API 测试中，我们在 Firebase 参考中混合了同步和异步方法，但我们发现这对人们来说是一个重要的绊脚石（如果人们看到 hasChild 方法，他们会期望它返回一个布尔值立即地）。因此，我们创建了 .on() 和 .once() 作为 Firebase 上唯一且唯一的异步回调方法。Firebase 引用上的所有其他内容都是同步的（尽管我们有时会提供可选的异步完成回调），而 DataSnapshot 上的所有内容都是 100% 同步的。

所以我们的目标是让人们更容易理解和使用 Firebase 的异步特性！但也许我们还没有 100% 成功。:-) 在规划未来的 API 调整时，我们会考虑您的反馈。谢谢！

# c# - Linq 与实体连接可枚举

> ID：11420653
> 
> 赞同：0
> 
> 时间：2012-07-10T19:39:10.133
> 
> 标签：c#, .net, linq, entity-framework, join

我有一个实体，比如说调用它`Blog`。每个`Blog`实体都有很多`Keyword`. 这 2 个通过关键字表上的 fk 相关联。

我有一个带有这样签名的查询`FindAllBlogByKeywords(IEnumerable<string> keywords)`

我将如何编写一个 linq 查询来提取与参数中所有关键字匹配的任何博客。

问题是 EF 不允许可枚举和表之间的连接。它也不包含，因为我希望查询匹配所有关键字，而不仅仅是任何一个 - 除了我有 2 个关键字列表，我需要参数中的关键字是持久性中关键字的子集。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T19:42:57.033

您可以为每个关键字添加 .Where 子句：

```
IEnumerable<Blog> FindAllBlogByKeywords(IEnumerable<string> keywords)
{
     IQueryable<Blog> query = context.Blogs;

     foreach(string key in keywords)
         query = query.Where(blog => blog.Keywords.Contains(key));

     // Execute query (optional)
     return query.ToList();
} 
```

这是有效的，因为查询执行被推迟到最后。通过链接多个`.Where`子句，您可以有效地创建“ALL”语句。

# segmentation-fault - rpmbuild 给出段错误

> ID：11420657
> 
> 赞同：2
> 
> 时间：2012-07-10T19:39:20.417
> 
> 标签：segmentation-fault, rpmbuild

我正在尝试使用 rpmbuild 工具构建 rpm。我有构建大约 30 GB 的二进制文件的源代码。我正在为其制作 rpm 的这个软件有几十个可执行文件。当我只复制单个可执行文件（例如 init）的二进制文件时，我的 rpm 构建成功。但是当我将整个构建转储到 rpm 时，rpmbuild 会执行所有操作，但最终会出现 seg 错误。

这是我的规格文件：

```
# This is a sample spec file for wget

%define _topdir     /root/mywget
%define name            source 
%define release     1
%define version     1.12
%define _builddir     /root/mywget/BUILD/glenlivet
%define _buildrootdir /root/mywget/BUILDROOT
%define _buildroot /root/mywget/BUILDROOT
%define _sourcedir    /root/mywget/SOURCES

BuildRoot:  %{_buildroot}
Summary:        GNU source
License:        GPL
Name:           %{name}
Version:        %{version}
Release:        %{release}
Source:         %{name}-%{version}.tar.gz
Prefix:         /usr
Group:          Development/Tools

%description
The GNU sample program downloads files from the Internet using the command-line.

%prep
%setup -q -n glenlivet

%build
cd %{_builddir}
make all

%install
rm -rf %{_buildrootdir}
mkdir -p %{_buildrootdir}/bin
cp -p -r %{_builddir}/build/obj-x64/* %{_buildrootdir}/bin/

%files
%defattr(-,root,root)
/bin/* 
```

如果我只复制一些二进制文件（比如说一个实用程序及其依赖的二进制文件），它可以正常工作。但是当我尝试复制整个构建时，我得到了一个段错误。在 rpmbuild 执行了这些部分后，我得到了 seg 错误： %prep %build %install

rpmbuild 也处理我的源文件。

处理文件：source-1.12-1

发现提供：

查找要求：

寻找补充：

提供：......

要求：……

检查未打包的文件：/usr/lib/rpm/check-files /root/mywget/BUILDROOT

检查未打包的文件：/usr/lib/rpm/check-files /root/mywget/BUILDROOT

分段故障

任何线索发生了什么问题或 rpmbuild 在哪里失败？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T20:05:46.950

我应该在谷歌上搜索更多关于这个问题的信息。似乎在尝试创建大于 2GB 的 RPM 时，rpmbuild 存在一些问题。为此提交了一个错误：

[https://bugzilla.redhat.com/show_bug.cgi?id=433795](https://bugzilla.redhat.com/show_bug.cgi?id=433795)

# java - Java 为 android 解析 JSON

> ID：11420659
> 
> 赞同：1
> 
> 时间：2012-07-10T19:39:24.297
> 
> 标签：java, android, json

我正在尝试为我的 android 应用程序解析 Json，但我无法让它工作。我正在使用 org.json 库，它是 android 的端口。我尝试了不同的教程，但我得到了一个名为 JSONException 的异常。

这是我需要解析的 json 响应。

```
{"status":0,"id":"8bb90729f836f30d179689b01f60fb41-1","hypotheses":[{"utterance":"this is a simple test to see if it's working","confidence":0.88661164}]} 
```

这是我用来解析它的代码。

```
public void extractJsonData(String feed){
        feed = feed.trim();
        feed = feed.trim();
        try {
                JSONObject jsonObject =new JSONObject();
                Log.i(GetJSon.class.getName(), jsonObject.getString("status"));
                Log.i(GetJSon.class.getName(), jsonObject.getString("id"));
                Log.i(GetJSon.class.getName(), jsonObject.getString("hypotheses"));
                gettting the array of hypotheses
                JSONObject hypotheses = jsonObject.getJSONObject("hypotheses");
                Log.i(GetJSon.class.getName(), hypotheses.getString("utterance"));
                //Log.i(GetJSon.class.getName(), hypotheses.getString("confidence"));
            //}
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

这是我得到的错误。

```
07-09 15:54:38.564: I/global(8719): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
07-09 15:54:38.564: I/Json Response(8719): {"status":0,"id":"8bb90729f836f30d179689b01f60fb41-1","hypotheses":[{"utterance":"this is a simple test to see if it's working","confidence":0.88661164}]}
07-09 15:54:38.564: W/System.err(8719): org.json.JSONException: JSONObject["status"] not found.
07-09 15:54:38.564: W/System.err(8719):     at org.json.JSONObject.get(JSONObject.java:287)
07-09 15:54:38.564: W/System.err(8719):     at com.isuru.recordapp.GetJSon.extractJsonData(GetJSon.java:19)
07-09 15:54:38.564: W/System.err(8719):     at com.isuru.recordapp.Main$7.onClick(Main.java:253)
07-09 15:54:38.564: W/System.err(8719):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:158)
07-09 15:54:38.564: W/System.err(8719):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-09 15:54:38.564: W/System.err(8719):     at android.os.Looper.loop(Looper.java:123)
07-09 15:54:38.564: W/System.err(8719):     at android.app.ActivityThread.main(ActivityThread.java:4363)
07-09 15:54:38.564: W/System.err(8719):     at java.lang.reflect.Method.invokeNative(Native Method)
07-09 15:54:38.574: W/System.err(8719):     at java.lang.reflect.Method.invoke(Method.java:521)
07-09 15:54:38.574: W/System.err(8719):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-09 15:54:38.574: W/System.err(8719):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-09 15:54:38.574: W/System.err(8719):     at dalvik.system.NativeStart.main(Native Method)
07-09 15:54:38.574: I/NotificationService(57): enqueueToast pkg=com.isuru.recordapp callback=android.app.ITransientNotification$Stub$Proxy@44d97440 duration=1
07-09 15:54:38.644: W/InputManagerService(57): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@44e09d28 
```

我从昨天开始就在尝试这个。但还是找不到解决办法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:42:12.503

```
JSONObject jsonObject =new JSONObject(); 
```

应该

```
JSONObject jsonObject =new JSONObject(feed); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T19:43:10.640

你让你的生活变得更加艰难。

```
public void extractJsonData(String feed){         
feed = feed.trim(); 
JSONObject json = new JSONObject(feed); 
```

然后提取键值对

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:42:00.620

那是因为你`JSONObject`是空的

```
JSONObject jsonObject =new JSONObject(); 
```

您必须像这样将 respose 字符串传递给`JSONObject`的构造函数

```
JSONObject jsonObject = new JSONObject(response); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T19:43:18.173

您正在创建一个与您传入的`JSONObject`内容无关的新空。您需要`String``new JSONObject(feed)`

# math - 重置旋转矩阵而不丢失比例

> ID：11420664
> 
> 赞同：1
> 
> 时间：2012-07-10T19:39:34.143
> 
> 标签：math, opengl, matrix, rotation

我有一个案例，我需要一种方法来将 OpenGL 中的模型矩阵旋转到绝对值。那里的大多数 rotate() 方法将旋转添加到当前矩阵与新旋转相乘的当前矩阵。我需要在不保留旧旋转的情况下将模型矩阵旋转到某个值。我目前所做的是将当前矩阵破坏为身份。然后根据我之前设置的比例变量从头开始计算它的比例。然后将它与从四元数获得的旋转矩阵相乘，并最终再次对其进行平移。

在我看来，这样的任务计算太多了。是否有更短的方法来重置矩阵旋转，同时保持其比例和平移部分完整？这是我当前的方法（Java）：

```
 public void rotateTo3( float xr,float yr,float zr) {

 Quaternion  xrotQ=   Glm.angleAxis( (xr),Vec3.X_AXIS);
 Quaternion  yrotQ=   Glm.angleAxis( (yr),Vec3.Y_AXIS);
 Quaternion  zrotQ=   Glm.angleAxis( (zr),Vec3.Z_AXIS);
  xrotQ= Glm.normalize(xrotQ);
  yrotQ= Glm.normalize(yrotQ);
  zrotQ= Glm.normalize(zrotQ);

  Quaternion acumQuat=new Quaternion();
  acumQuat= Quaternion.mul(xrotQ,yrotQ);
  acumQuat= Quaternion.mul(acumQuat,zrotQ);

  Mat4 rotMat=new Mat4(1);
  rotMat=Glm.matCast(acumQuat);

    _model = new Mat4(1);

   scaleTo(_scaleX, _scaleY, _scaleZ);//reconstruct scale
   _model = Glm.translate(_model, new Vec3(_pivot.x, _pivot.y, 0));

  _model=rotMat.mul(_model); ///add new rotation

   _model = Glm.translate(_model, new Vec3(-_pivot.x, -_pivot.y, 0));

   translateTo(_x, _y, _z);//reconstruct translation 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T22:19:53.413

这实际上很容易完成。关键的见解是，齐次变换矩阵由 3 部分组成：左上角的 3×3 矩阵是旋转缩放，最右边的顶部 1×3 列是平移，左下角的 3×1 允许仿射缩放和右下角是1。

所以我们可以写成

```
RS T
 A 1 
```

现在您要做的是将给定的 RS 分解为 R 和 S。现在旋转始终是正交的，这意味着 R^T = R^-1。但是缩放不是，至于缩放 S^T = S != S^-1，因此我们可以写

```
(RS)^T * RS = S^T * R^T * R * S = S^T * R^-1 * R * S = S^T * S = S^2 
```

缩放只发生在对角线上，因此您可以通过取对角线上元素的平方根来提取 x、y 和 z 缩放因子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:12:04.140

我不认为有任何矩阵魔法可以做到这一点，但你可以将你的旋转和缩放存储在单独的矩阵中吗？

```
void init() {
     _modelScale = some_scale_matrix;
}

void update() {
    _modelRot = LoadIdentity();
    do_some_rotation(_modelRot)

    _model = _modelRot * _modelScale;
} 
```

如果您愿意，也可以将其扩展到第三个矩阵进行翻译。

# regex - 是否可以创建一个正则表达式来匹配包含一个单词但不包含另一个单词的行？

> ID：11420672
> 
> 赞同：3
> 
> 时间：2012-07-10T19:40:00.043
> 
> 标签：regex

[有人问](https://stackoverflow.com/questions/9912914/regular-expression-searching-matching-one-word-but-not-another)[过](https://stackoverflow.com/questions/7839852/regex-find-one-word-but-not-another)[类似的](https://stackoverflow.com/questions/2953039/regular-expression-for-a-string-containing-one-word-but-not-another)[问题](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word) ，但没有人回答这个具体问题。

鉴于此代表性文本：

```
foo
bar
foo bar
bar foo
foo bar foo
bar foo bar 
```

是否可以使用正则表达式仅匹配包含该单词`foo`但不包含该单词的行`bar`？

如果在上面的文本上运行这个所需的正则表达式，它只会导致：

```
foo 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T19:48:36.080

这是一种相当简单的方法：

```
^(?!.*\bbar\b).*\bfoo\b.* 
```

解释：

```
^               # starting at beginning of the string
(?!             # fail if (negative lookahead)
   .*\bbar\b      # the word 'bar' exists anywhere in the string 
)               # end negative lookahead
.*\bfoo\b.*     # match the line with the word 'foo' anywhere in the string 
```

rubular：[http ://www.rubular.com/r/pLeqGQUXbj](http://www.rubular.com/r/pLeqGQUXbj)

`\b`在正则表达式中是一个[单词边界](http://www.regular-expressions.info/wordboundaries.html)。

Vim 版本：

```
^\(.*\<bar\>\)\@!.*\<foo\>.* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:45:39.140

是的。使用环视。

```
/^.*(?<!\bbar\b.*)\bfoo\b(?!.*\bar\b).*$/ 
```

# c# - 检测进程的两个窗口

> ID：11420676
> 
> 赞同：2
> 
> 时间：2012-07-10T19:40:07.390
> 
> 标签：c#, windows, process

假设我有 2 个 pdf 文档，我已经用 acrobat 精细阅读器打开了它们。所以我有2个不同的窗口。但是当我使用这段代码时：

```
foreach (Process p in Process.GetProcesses("."))
{
    try
    {
        Console.WriteLine("\r\n");
        Console.WriteLine("\r\n Window Title:" + p.MainWindowTitle.ToString());
        Console.WriteLine("\r\n Process Name:" + p.ProcessName.ToString());
        Console.WriteLine("\r\n Window Handle:" + p.MainWindowHandle.ToString());
        Console.WriteLine("\r\n Memory Allocation:" + p.PrivateMemorySize64.ToString());
    }
    catch { }
} 
```

它只给了我最后选择的 acrobat 窗口。但是我两个都需要，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:51:31.023

将`Process`只提供“主”窗口句柄，而不是每个窗口。

但是，您可以通过 Windows API 和 PInvoke 完成此操作。 [EnumWindows](http://www.pinvoke.net/default.aspx/user32.enumwindows)将让您枚举系统上打开的窗口。然后，您可以使用[GetWindowThreadProcessId](http://www.pinvoke.net/default.aspx/user32.getwindowthreadprocessid)来查看 Window 是否属于您的进程。

此时，您将拥有进程的每个窗口的窗口句柄。使用 Handle，您可以调用[GetWindowText](http://www.pinvoke.net/default.aspx/user32.getwindowtext)来获取窗口标题。

# ios - 从 xcode 获取 json

> ID：11420682
> 
> 赞同：0
> 
> 时间：2012-07-10T19:40:24.760
> 
> 标签：ios

我正在从xcode 4调用用.net编写的webservice。输出是一个json字符串。当使用静态IP地址使用url进行调用时，它会给出错误。HTTP错误404.0 - 未找到。但是在localhost中调用相同的url时有效。代码如下

```
- (void)viewDidLoad
{    
    [super viewDidLoad]; 
    NSURL *url=[NSURLURLWithString:@"http:// static ip address where serviceis located(169.254.216.8)/restGroceryService/WebService/insertList?prods=apples,bananas,milk"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    NSData *data = [NSData dataWithContentsOfURL:url];
    NSString *pageSource = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"page source%@",pageSource);
    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:data  options:kNilOptions error:nil];
    NSArray *array = [json objectForKey:@"result"]; 
    NSDictionary *store = [array objectAtIndex:0];
    NSNumber *storeId = [store objectForKey:@"storeId"];
    NSNumber *total = [store objectForKey:@"TOTAL"];
    self.priceTextField.text =[total stringValue];
    NSString *storeName = [store objectForKey:@"storeName"];
    self.storNameTextField.text = storeName;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:06:00.403

```
ithink the error was here try now:

NSURL *url=[NSURL URLWithString:@"your address"];/<------ here was the error
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    NSData *data = [NSData dataWithContentsOfURL:url];
    NSString *pageSource = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"page source%@",pageSource);
    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:data  options:kNilOptions error:nil];
    NSArray *array = [json objectForKey:@"result"];
    NSDictionary *store = [array objectAtIndex:0];
    NSNumber *storeId = [store objectForKey:@"storeId"];
    NSNumber *total = [store objectForKey:@"TOTAL"];
    self.priceTextField.text =[total stringValue];
    NSString *storeName = [store objectForKey:@"storeName"];
    self.storNameTextField.text = storeName; 
```

# configuration - 什么时候加载 logback 配置文件？

> ID：11420685
> 
> 赞同：7
> 
> 时间：2012-07-10T19:40:31.717
> 
> 标签：configuration, logback

logback.xml 文件的加载是如何工作的？具体来说，什么时候加载？

我在网上看到这个解释：

1.  Logback 尝试在类路径中查找名为 logback.groovy 的文件。
2.  如果没有找到这样的文件，logback 会尝试在类路径中找到一个名为 logback-test.xml 的文件。
3.  如果没有找到这样的文件，它会检查类路径中的文件 logback.xml。
4.  如果两个文件都没有找到，logback 会使用 BasicConfigurator 自动配置自己，这将导致日志输出被定向到控制台。

但没有提及何时加载。是第一次调用日志记录语句吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T07:33:12.250

Logback-clasic 初始化发生在第一次`getILoggerFactory()`调用`org.slf4j.LoggerFactory`. 该方法由该`LoggerFactory.getLogger()`方法间接调用。因此，在实践中，logback-clasic 初始化将在第一次调用`LoggerFactory.getLogger()`.

# jquery-ui - 对话框第一次关闭，但第二次不关闭

> ID：11420687
> 
> 赞同：0
> 
> 时间：2012-07-10T19:40:39.000
> 
> 标签：jquery-ui, jquery, jquery-ui-dialog

我有一个第一次工作正常的对话框，即当我单击其中的编辑按钮时，它关闭得很好。但是第二次，当我单击编辑按钮时它不起作用。

```
$(document).ready(function() {
    $('.btn').click(function() {
        $("#dialog").dialog({});
    });
    $('#editButton').click(function() {
        $('#refreshmydiv').load('/path/to/my/phpfile');
        $('#dialog').dialog("close");
    });
});​ 
```

这是html

```
<div id="dialog" style="display:none;">
    <div>
        Input Field1:<input type="text" id="xyz">
    </div>
    <div>
        InPut Field2: <input type="text" id="abc">
    </div>
    <div>
        <input type="submit" id="editButton" value="Edit">
    </div>
</div>

<div id="refreshmydiv">
<table class="table table-striped" id="authentication">
    <thead>
        <tr>
            <th>Username</th>
            <th>Password</th>
            <th>Edit</th>
            <th>Delete</th>
        </tr>
    </thead>
    <tbody>
        <?php foreach($user as $key=>$value){?>
        <tr class="rowData">
            <td class="username"><?php echo $key; ?>
            </td>
            <td class="password"><?php echo $value; ?>
            </td>
            <td><Button type="submit" class="btn">Edit</button>
            </td>
            <td>Delete
            </td>
        </tr>
        <?php  } ?>
    </tbody>
</table>
</div> 
```

**编辑**

如果我拿出

```
$('#refreshmydiv').load('/path/to/my/phpfile'); 
```

然后它工作......但我需要有负载......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T20:21:47.953

OK found the solution. THe dialog box leaves the content outside the body, so we have to remove it before load.

here is what would do

```
 $('#dialog').remove();
 $('#refreshmydiv').load('/path/to/my/phpfile');
 $('#dialog').dialog("close"); 
```

Thanks guys

# python - 如何在 Windows 上从 python 获取长文件系统路径

> ID：11420689
> 
> 赞同：10
> 
> 时间：2012-07-10T19:40:48.570
> 
> 标签：python, windows, path

这会返回一个短路径（DOS 约定）（在 Windows 上）：

```
import tempfile
tempDir = tempfile.mkdtemp()
print tempDir

Output >>> c:\users\admini~1\appdata\local\temp\tmpf76unv 
```

注意`admini~1`.

如何获取/将其转换为完整路径？例如 C:\users\administrator\appdata...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T20:03:44.513

请尝试以下代码（更新）：

```
from ctypes import create_unicode_buffer, windll
BUFFER_SIZE = 500
buffer = create_unicode_buffer(BUFFER_SIZE)
get_long_path_name = windll.kernel32.GetLongPathNameW
get_long_path_name(unicode(short_path_name), buffer, BUFFER_SIZE)
long_path_name = buffer.value 
```

希望这可以帮助。请参考[http://mail.python.org/pipermail/python-win32/2008-January/006642.html](http://mail.python.org/pipermail/python-win32/2008-January/006642.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-25T05:26:21.063

```
tempDir = win32file.GetLongPathName(tempDir) 
```

# .htaccess - 更改文件名后htaccess 301重定向

> ID：11420692
> 
> 赞同：1
> 
> 时间：2012-07-10T19:40:59.370
> 
> 标签：.htaccess, mod-rewrite, http-status-code-301

我使用这个重写：

```
RewriteRule post-(.*)\.html$ post.php?id=$1 
```

但此后将文件名 post.php 更改为 photo.php 所以我将其更改为

```
RewriteRule photo-(.*)\.html$ photo.php?id=$1 
```

这很好，但是当访问者来自搜索引擎并被定向到原始文件名 post.php?id=? 所以需要添加（我认为）301重定向，我试过了：

```
RewriteRule photo-(.*)\.html$ post.php?id=$1 
```

和：

```
RewriteRule photo-(.*)\.html$ post-(.*)\.html$[L,R=301] 
```

但两者都没有工作，老实说还没有真正的线索，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:19:04.593

我想你希望它是相反的方式。当人们访问您的*旧*URL ( `post.php?id=`) 时，重定向到*新*URL 。您要么想要其中之一：

```
RewriteRule post-(.*)\.html$ photo-$1.html [R=301]

RewriteRule post\.php$ photo.php [R=301] 
```

第一个采用[http://hostname.com/post-1234.html](http://hostname.com/post-1234.html)之类的 URL并将浏览器重定向到[http://hostname.com/photo-1234.html](http://hostname.com/photo-1234.html)，以便您的规则可以将其重写为 photo.php，第二个除了[http://hostname.com/post.php?id=1234](http://hostname.com/post.php?id=1234)到[http://hostname.com/photo.php?id=1234](http://hostname.com/photo.php?id=1234)之外，它的作用相同（请注意，第二个查询字符串会自动附加到末尾规则）。

# c# - Dropbox 集成

> ID：11420693
> 
> 赞同：7
> 
> 时间：2012-07-10T19:41:03.223
> 
> 标签：c#, asp.net, dropbox-api

我是集成投递箱的新手，但我不太确定如何生成调用以获取请求令牌机密。

[https://www.dropbox.com/developers/reference/api#request-token](https://www.dropbox.com/developers/reference/api#request-token)

我必须打电话给这个网址`https://api.dropbox.com/1/oauth/request_token`，最好的方法是什么？用 c#?。

感谢您提供的任何帮助

**PS：我只是不确定要为此使用哪些 c# 库。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:54:19.103

Codeplex 上有一个 .Net Dropbox 库，看起来相当不错：[http ://sharpbox.codeplex.com/](http://sharpbox.codeplex.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T20:37:54.397

像下面这样的东西应该可以工作：

```
System.Net.WebClient client = new System.Net.WebClient();
string response = client.DownloadString("https://api.dropbox.com/1/oauth/request_token"); // Add necessary query parameters

// Parse the response
System.Collections.Specialized.NameValueCollection collection = System.Web.HttpUtility.ParseQueryString(response); 
```

我包含了命名空间以阐明每个类的位置，但您可能应该只将*using 指令*放在文件的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T20:07:17.670

System.Net.WebRequest 是您想要的类。具体来说，您需要使用 URL 调用 Create()，然后调用 GetResponse() 来读取结果。

# amazon-web-services - 可以在单个请求中从 Amazon S3 获取多个对象吗？

> ID：11420694
> 
> 赞同：37
> 
> 时间：2012-07-10T19:41:04.910
> 
> 标签：amazon-web-services, amazon-s3

在 Amazon-S3 上有一些小文件，想知道是否可以在一个请求中获取 3-4 个。

环顾文档和一些 SDK，并没有发现任何明显的东西。我看到他们现在有“多重删除”，这很好，但多重获取会很棒

任何人都知道这样的事情是可能的吗？

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-10T20:04:39.650

如果您查看最低级别的文档（例如 REST API），对对象的 GET 操作每个请求只会为您带来一个对象，因此您在任何 AWS 开发工具包中找到的任何内容都将是此类请求的循环.

有一些工具可以更轻松地下载多个对象。例如，在命令行工具中：
`s3cmd get object1 object2 object3 s3://bucket-name`
此调用将发出顺序请求，这意味着总时间不会减少，但它确实使您的任务更容易完成。

如果您更喜欢以编程方式执行此操作，我建议使用对您的平台更有意义的任何 SDK，如果它不包含批处理 GET 对象操作，请根据您自己的喜好实现您自己的版本。

# javascript - jQuery：查找第二个最接近的 div

> ID：11420697
> 
> 赞同：6
> 
> 时间：2012-07-10T19:41:30.313
> 
> 标签：javascript, jquery

如何找到第二个最接近的 div？

例如，为了获得最接近的，我成功地使用了：

```
var closest_div_id = $(this).closest('div').attr('id'); 
```

现在，我如何获得第二近的？就像是：

```
$(this).(closest('div').closest('div')).attr('id'); ??? 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-10T19:44:53.350

假设`this`不是`<div>`元素，您可以将选择器传递给[parents()](http://api.jquery.com/parents/)并编写：

```
var secondClosestId = $(this).parents("div").eq(1).attr("id"); 
```

`parents()`返回从最近到外部排序的祖先，所以`eq()`可以在这里使用。有关一般情况，请参阅[此问题](https://stackoverflow.com/q/7093659/464709)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T19:50:05.103

[jQuery#closest()](http://api.jquery.com/closest/)将返回当前元素，如果它匹配选择器。因此，您可以像@Frederic 建议的那样使用[jQuery#parents() ，也可以手动增加一个元素：](http://api.jquery.com/parents/)

```
$(this).closest('div').parent().closest('div').attr('id'); 
```

也就是说，您的代码中还有另一个问题。您将两个最接近的（）调用包装在括号中。这将产生这两个调用在其他调用之前被评估的效果。由于您可能没有在您的范围内调用最接近的函数，因此给定的代码将因 ReferenceError 而失败。

（我只是为了解释你的初始代码失败的原因，你真的应该接受@Frederic 的建议）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:53:35.240

为了获得比 更好的性能`eq`，您可以使用`slice`：

```
var secondClosest = $(this).parents("div").slice(1, 2).attr('id'); 
```

# android - Adobe 是否有适用于其 PDF 阅读器的 Android SDK 或 API？

> ID：11420700
> 
> 赞同：7
> 
> 时间：2012-07-10T19:41:51.487
> 
> 标签：android

我希望能够在我们的应用程序的视图中显示本地 PDF 文件。（在 Android 4.03 下的平板电脑上运行）目前我们将 Adob​​eReader.apk 与我们的应用程序一起安装并使用 Intent 启动它。（我们的设备预装了我们的软件）但这意味着它单独运行并且我们无法对其进行编程控制（例如，一个太大而无法在屏幕上显示的图像将迫使用户四处移动 - 我宁愿将其缩小以适合指定的尺寸。）

那么 Adob​​e 是否提供适用于 Android 的 SDK？如果没有，是否有可靠的替代方案？我看过一些第三方的，但它们似乎还没有完成，还没有准备好进入黄金时段，或者它们存在与我们的商业/工业应用冲突的开放许可问题。

（我知道以前有人问过这个问题，但也许自上次被问到之后出现了一些新问题）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T20:12:13.743

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T19:49:29.933

像这样还是什么？ [http://www.adobe.com/devnet/readermobile.html](http://www.adobe.com/devnet/readermobile.html)

检查此堆栈问题[如何在 Android 应用程序中创建 PDF？](https://stackoverflow.com/questions/2499960/how-to-create-pdfs-in-android-sdk)它可能会有所帮助

# git - Git子模块返回空白？

> ID：11420701
> 
> 赞同：21
> 
> 时间：2012-07-10T19:41:58.487
> 
> 标签：git

我正在尝试使用`git submodule update`它并没有返回任何内容，也没有任何`git submodule`命令，并且我检查了`.gitmodules`文件并且它是否正确？

我不知道git是否可以调试或什么，这真的很烦人。

没有错误或任何东西，即使`2>&1`最后使用确实令人担忧。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-10T21:56:22.287

从您的`.git/config`. `git rm --cached path/to/submodule`将其从树中移除。确保您的工作目录是干净的。现在您可以初始化子模块：

```
git submodule init 
```

所有这一切都是用`.gitmodules`文件中的 url 填充您的配置。现在您可以填充子模块：

```
git submodule update 
```

如果您的子模块有嵌套的子模块，请添加递归选项：

```
git submodule update --recursive 
```

初始化和更新是分开的，这是有充分理由的。您可能希望有一个备用存储库来存储对子模块的更改。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-04T15:33:47.707

这可能是一个迟到的答案，但如果有人需要它：

只需删除您的空白子模块目录并再次运行

`git submodule add <https/ssh git link to your submodule`>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-17T17:58:24.163

我遇到了同样的问题，因为我帮助删除`.gitmodules`并提交了这个更改。再次使用添加模块后`git submodule add`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-13T20:15:59.293

希望这会帮助一些谷歌员工。

我有一个类似的问题，没有任何东西会使子模块出现。问题是我添加了带有转义窗口路径的子模块 .\\Asset\\MyAsset 而不是 Asset/MyAsset

检查您的 .gitmodules 是否没有具有这种路径样式的模块

# mysql - 如何在mysql表的列中按值添加分组

> ID：11420703
> 
> 赞同：3
> 
> 时间：2012-07-10T19:42:02.807
> 
> 标签：mysql

我有一个 mysql 表，如下所示

```
 **ip                  page                date                 page_Views
127.0.0.1              index.php           2012-07-09              25
182.445.11.1           abc.php             2012-07-09              11
116.142.24.7           index.php           2012-07-09              3 
```

我想提取按页面分组的 page_views 列

这意味着'index.php'它显示page_view = 28

我正在使用这个查询

SELECT * FROM `stats_tracker`GROUP BY `page` ORDER BY `stats_tracker`。`page_views`DESC

使用此查询，我根据页面对 page_views 进行分组，但不添加

page_views for index.php =25 根据我上面的查询

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T19:44:39.153

您需要 SUM 聚合函数：

```
SELECT
  ip,
  page,
  CONCAT(MIN(date), " - ", MAX(date)) as date_range,
  SUM(page_views) as total_page_views
FROM stats_tracker
GROUP BY page
ORDER BY total_page_views DESC 
```

基本推理是 MySQL 不知道在分组时要*如何*组合值。有时您想要计算，有时您想要求和，甚至可以使用平均值。查看[MySQL 聚合函数页面](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)。

# java - Thread.sleep() 挂起

> ID：11420708
> 
> 赞同：0
> 
> 时间：2012-07-10T19:42:32.960
> 
> 标签：java

嗨，我们面临着与物理机上描述的完全相同的问题：[Thread.sleep() 挂起？](https://stackoverflow.com/questions/6749159/thread-sleep-is-hung)

machiry@pag02:~$ uname -a Linux pag02 2.6.32-5-amd64 #1 SMP Mon Jan 16 16:22:28 UTC 2012 x86_64 GNU/Linux

machiry@pag02:~$ java -version java version "1.6.0_26" Java(TM) SE Runtime Environment (build 1.6.0_26-b03) Java HotSpot(TM) 64-Bit Server VM (build 20.1-b02, mixed mode)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:50:22.497

如果您还没有，请重新启动您的机器。这是最近发生[的与闰秒有关的错误。](https://serverfault.com/questions/403732)

# html - 由于 mime 类型不匹配，CSS 被忽略

> ID：11420710
> 
> 赞同：2
> 
> 时间：2012-07-10T19:42:51.263
> 
> 标签：html, css, mime-types, mime-message

我测试过的每个浏览器都忽略了我的站点样式表。在 IE9 - SEC7113 上测试时出现此错误：由于 mime 类型不匹配，CSS 被忽略

这是引用它的标头中的 html。如果您需要更多信息，请告诉我。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head runat="server">
    <title></title>

    <!--The style sheet below is the one being ignored-->
    <link rel="stylesheet" type="text/css" charset="UTF-8" href="Styles/Site.css"  />

    <!-- Skin CSS file -->
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.9.0/build/assets/skins/sam/skin.css" />
    <!-- Utility Dependencies -->
    <script src="http://yui.yahooapis.com/2.9.0/build/yahoo-dom-event/yahoo-dom-event.js"></script> 
    <script src="http://yui.yahooapis.com/2.9.0/build/element/element-min.js"></script> 
    <!-- Needed for Menus, Buttons and Overlays used in the Toolbar -->
    <script src="http://yui.yahooapis.com/2.9.0/build/container/container_core-min.js">     </script>
    <script src="http://yui.yahooapis.com/2.9.0/build/menu/menu-min.js"></script>
    <script src="http://yui.yahooapis.com/2.9.0/build/button/button-min.js"></script>
    <!-- Source file for Rich Text Editor-->
    <script src="http://yui.yahooapis.com/2.9.0/build/editor/editor-min.js"></script>
    <script src="http://yui.yahooapis.com/2.9.0/build/editor/simpleeditor-min.js"></script>

</head> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T20:53:48.717

我想通了，我刚开始工作的公司在设置我的计算机时未能为 IIS 安装静态内容功能。所以它忽略了我所有的样式表、图像和链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:13:34.053

您的服务器显然发送了错误的媒体类型信息。但是，这无法从您的服务器外部验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T18:07:14.017

我的文件名有错字，在链接和文件中都拼写为 myFile.ccs vs myFile.css。Firefox 很好，但是 IE 返回了这个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-13T18:05:39.640

我意识到，在我的新 Windows 10 机器上，我无法在本地 IIS 中启用静态内容。为此，请从控制面板转到“打开或关闭 Windows 功能”，然后导航到以下位置：

[![在此处输入图像描述](../Images/90ca8e0b9721afac9d701754ebbddfd6.png)](https://i.stack.imgur.com/pa1ud.png)

确保选中此“静态内容”选项。然后，以管理员身份打开命令窗口并执行 iisreset。

繁荣，固定。

# c# - 从控制台调用的 Form.Show() 冻结 GUI

> ID：11420717
> 
> 赞同：7
> 
> 时间：2012-07-10T19:43:16.533
> 
> 标签：c#, winforms

我正在尝试直接从控制台应用程序实例化表单。
出于某种奇怪的原因，当我调用`Form1.Show()`新创建的表单时，它不会绘制所有控件并冻结（HourGlass 图标）。但是，当我调用 ShowDialog() 时，一切正常，除了我需要返回控制台但我不能，所以这不是一个选项......
我应该怎么做才能让我的表单正确显示？我在这里错过了什么吗？

```
OrderControlForm OrderControlBox = new OrderControlForm();
OrderControlBox.BuyEvent += new OrderControl.BuyDelegate(doBuy);
OrderControlBox.SellEvent += new OrderControl.SellDelegate(doSell);
OrderControlBox.Show(); 
```

上面的代码是响应控制台用户输入的命令而调用的。

**编辑：** 这是工作代码：

```
 Thread mThread = new Thread(delegate()
        {
            StratControlBox = new StratControl(StratIDs);
            StratControlBox.ShowDialog();
        });

        mThread.SetApartmentState(ApartmentState.STA);

        mThread.Start(); 
```

我仍然不明白为什么我必须打电话`ShowDialog()`而不是`Show()`.
当我使用后者时，表格在绘画后立即“消失”。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T19:47:30.933

原因是因为`ShowDialog`执行它自己的消息循环，而`Show`没有。而不是 call `Show`，您需要 call `Application.Run`，它执行一个消息循环。但是，由于它是同步循环的，处理传入的窗口消息直到窗体关闭，它实际上与调用`ShowDialog`.

因此，如果要异步显示表单，则需要从另一个线程执行此操作。但是，为了安全起见，请确保新线程通过调用来使用单元线程`newThread.SetApartmentState(ApartmentState.STA);`。

另外，我建议只显示一个 UI 线程中的一个主窗体。如果该主窗体显示来自其自己线程的其他窗体，那很好，但是，如果您开始尝试显示多个窗体，每个窗体都来自它们自己的线程，则可能会导致问题。

**关于您的更新**

从线程调用`Show`不起作用的原因有两个。首先，它是同步的，所以在表单关闭之前它不会返回。这很重要，因为一旦执行离开您的匿名方法，线程就会终止。因此，当您调用时`Show`，它会立即返回，然后离开您的方法，从而终止线程。

其次，即使表单确实保持打开状态，它也会像以前一样因为所有相同的原因而没有响应。WinForms 需要一个消息循环来不断寻找新的传入窗口消息并处理它们。消息循环调用一个名为 的方法`WndProc`。如果没有消息循环调用该`WndProc`方法来处理传入的窗口消息，表单将完全不响应用户。例如，当鼠标驱动程序通知窗口用户按下了鼠标按钮时，窗口将向`WM_MOUSEDOWN`应用程序的消息队列发送一条消息。如果您在某处没有代码不断循环查看队列中是否有任何消息并对其进行操作，那么您将永远不会得到鼠标按下事件。

正如我上面提到的，该`ShowDialog`方法执行自己的消息循环，因此它可以工作，但`Show`不能。 `Show`假设它被一个已经运行的消息循环调用。如果由于某种原因你不想打电话`ShowDialog`，你可以打电话`Application.Run(StratControlBox)`，而不是。该`Run`方法将为您显示表单，然后停留在消息循环中，直到表单关闭。因此，它是一个同步调用，就像 一样`ShowDialog`，因此您的线程在表单关闭之前不会终止。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T19:46:07.890

> 我应该怎么做才能使我的表格正确显示？我在这里错过了什么吗？

问题是控制台应用程序不是 Windows 应用程序，并且没有适当的“管道”来处理 Windows 消息。没有这个，表单就无法正确处理项目，包括“绘制”的基本消息等。

这通常通过使用`Application.Run`启动消息处理来处理。但是，这会阻塞直到表单关闭（因此控制台不会继续“运行”）。处理这个问题的方法是将你的控制台代码移动到一个单独的线程中，并`Application.Run`像普通的 Windows 应用程序一样与你的表单一起使用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-02-28T14:32:46.413

在 .NET 4.7 中，我能够简单地更改

```
myForm.Show() 
```

至

```
Task.Run(() => { myForm.ShowDialog(); }); 
```

我已经在使用

```
[STAThread] 
private static void Main(string[] args)
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    .
    .
    .
} 
```

因为其他一些要求。

# safari - Safari 无法通过 https 或基本身份验证在 quicktime 插件中播放视频

> ID：11420723
> 
> 赞同：0
> 
> 时间：2012-07-10T19:43:26.427
> 
> 标签：safari, html5-video, quicktime

我正在尝试使用标准的 html5 视频标签加载视频。这在除 safari 之外的所有浏览器中都可以正常工作。当我在 safari（桌面和 iOS）中加载它时，视频在 http 上播放良好。如果我切换到 https 或使用基本身份验证，视频将无法加载。

我很确定问题是 quicktime 插件无法访问 safari 拥有的 cookie。所以它不识别身份验证。有没有人遇到过这个，我该怎么办？

# mysql - 使用带有 JdoCredentialStore 和 DataNucleus 的 GoogleAuthorizationCodeFlow 重复条目异常

> ID：11420727
> 
> 赞同：0
> 
> 时间：2012-07-10T19:43:38.727
> 
> 标签：mysql, jdo, datanucleus, google-api-java-client, duplicates

我对 GoogleAuthorizationCodeFlow ( **Java** ) 有疑问。我正在尝试使用 Google 的“OAuth 2.0 for Web Server Applications”为我的 Web 项目建立 Google Calender 连接。因此，您可以使用 Google 的 Java api 库。

我使用 Google 的 AuthorizationCallbackServlet 来接收访问和刷新令牌。

GoogleAuthorizationCodeFlow 将创建的凭据与 GoogleAuthorizationCodeFlow 及其 JdoCredentialStore 一起保存。作为一个 JDO 实现，我正在使用 DataNucleus。

```
static PersistenceManagerFactory pmf;

    static{ 
        Properties properties = new Properties(); 
        properties.setProperty("javax.jdo.PersistenceManagerFactoryClass",
              "org.datanucleus.api.jdo.JDOPersistenceManagerFactory");
        properties.setProperty("javax.jdo.option.ConnectionDriverName","com.mysql.jdbc.Driver");
        properties.setProperty("javax.jdo.option.ConnectionURL","jdbc:mysql://localhost:3306/rssparsetest");
        properties.setProperty("javax.jdo.option.ConnectionUserName","root");
        properties.setProperty("javax.jdo.option.ConnectionPassword","root");
        pmf = JDOHelper.getPersistenceManagerFactory(properties);

    }
public static CredentialStore JDO_CREDENTIAL_STORE = new JdoCredentialStore(pmf);
public static AuthorizationCodeFlow AUTHORIZATION_CODE_FLOW = getNewAuthorizationCodeFlow();

public static AuthorizationCodeFlow getNewAuthorizationCodeFlow(){
    return new GoogleAuthorizationCodeFlow.Builder(Constants.HTTP_TRANSPORT, Constants.JSON_FACTORY,
            Constants.CLIENT_ID, Constants.CLIENT_SECRET,
            Collections.singleton(CalendarScopes.CALENDAR)).setCredentialStore(Constants.JDO_CREDENTIAL_STORE).setAccessType("offline")
            .build();
} 
```

无状态 Bean 中的用法：

```
public List<CalendarListEntry> getCalendarList() {  
    Credential credential = null;

    AuthorizationCodeFlow authCodeFlow = Constants.getNewAuthorizationCodeFlow();

    try {
        credential = authCodeFlow.loadCredential("USERID");
    } catch (Exception e) {
    //...
} 
```

一切工作正常（我能够列出我的日历条目，凭据保存在我的 MySQL 数据库中） ，**除了**使用持久刷新令牌（GoogleAuthorizationCodeFlow 所做的）来引用访问令牌的时候。

```
Caused by: javax.jdo.JDODataStoreException: Duplicate entry 'USERID' for key 'PRIMARY'
NestedThrowables:
java.sql.BatchUpdateException: Duplicate entry 'USERID' for key 'PRIMARY'
at org.datanucleus.api.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:421)
at org.datanucleus.api.jdo.JDOPersistenceManager.jdoMakePersistent(JDOPersistenceManager.java:735)
at org.datanucleus.api.jdo.JDOPersistenceManager.makePersistent(JDOPersistenceManager.java:755)
at com.google.api.client.extensions.jdo.auth.oauth2.JdoCredentialStore.store(JdoCredentialStore.java:47) 
```

**总结一下，我可以**

1.  使用 accessToken 和 refreshToken 接收并保存 Credential
2.  列出日历条目（只要访问令牌的时间没有过期）

**如果没有获得“javax.jdo.JDODataStoreException: Duplicate entry ' *USERID* ' for key 'PRIMARY'”异常，我无法使用 GoogleAuthorizationCodeFlow**刷新我的访问令牌。****

 **我究竟做错了什么？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:04:02.403

通过“刷新”，您大概是指“坚持”，因为这就是您正在做的事情。它坚持一个与现有的具有相同“id”的人。如果您打算更新它，那么您检索它并更新它，它会在数据存储中更新。如果这是一些 Google lib 在幕后进行持久化，那么请询问他们的 API 中哪里可以进行“更新”调用。**

# git - 使用分离的分支进行部署

> ID：11420729
> 
> 赞同：5
> 
> 时间：2012-07-10T19:43:42.323
> 
> 标签：git, github, continuous-integration

我即将为客户设置和自动化构建环境。我想将 Git 存储库推送到客户端的构建服务器，但没有完整的 Git 历史记录。

我正在考虑一种方法`git checkout --orphan ci`，但我不清楚如何每天使用这样的分支设置工作。

也许是这样的（？）：

*   新的提交将在`master`.
*   一个功能在多次提交后完成。
*   然后`ci`分支在`master`.
*   `ci`分支已签出。
*   最近的提交（尚未推送到任何服务器）被压缩以向客户端隐藏不必要的历史记录。
*   `ci`分支被推送到构建服务器。
*   ...

这是一种有效的方法和/或是否存在更简单的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T20:00:22.973

一种简单的管理方法可能是：

*   正常工作`master`（或使用任何其他功能分支模型）。
*   每次你完成一个特性并想要将它推送到 CI 系统时，你：

    *   `git checkout ci`
    *   `git merge --squash master`这会将所有更改带入`master`您的`ci`分支。
    *   `git commit`您将有一个预填充的提交消息，其中包含所有压缩的提交消息。然后，您可以编辑此消息以反映功能中的所有更改。
    *   `git push origin ci`将您的更改发送到 CI 系统。

那里有许多分支模型，但这应该足够简单，并且可以满足您的需求。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:51:06.187

我会看看诸如[http://nvie.com/posts/a-successful-git-branching-model/之类的东西](http://nvie.com/posts/a-successful-git-branching-model/)

至于 CI，你可能最终会克隆/签出几乎整个分支，但除非你放入一堆大型二进制文件，否则我不会太担心它。

# php - MySQL INSERT 的语法，其中 $_POST 变量数组进入 VALUES

> ID：11420733
> 
> 赞同：1
> 
> 时间：2012-07-10T19:44:05.170
> 
> 标签：php, mysql

我是 PHP 和 MySQL 查询构造的新手。我昨天问了一个关于列的类似问题，现在需要关于 VALUES 的帮助。我有一个大型处理器。一些字段是必需的，大多数字段是用户可选的。在我的例子中，HTML id 和 MySQL 列名是相同的。我找到了有关使用数组将 $_POST 转换为 INSERT INTO 的字段和值的教程，但我无法让它们工作 - 很多小时后。我已经退后一步，使用数组和变量制作了一个非常简单的 INSERT，但我仍然很难过。以下行起作用并将 5 个变量的值插入到具有 100 多列的数据库中。前 4 项是字符串，第 5 项，monthlyRental 是一个整数。

```
$colsx = array('country', 'stateProvince', 'city3', 'city3Geocode', 'monthlyRental');
$col_string = implode(',', $colsx);
$query = "INSERT INTO `$table` ($col_string) VALUES ( '$country', '$stateProvince', '$city3', '$city3Geocode', '$monthlyRental')"; 
```

按照这个想法，我使用预处理的变量来构造一个数组，然后将它内爆来创建一个字符串。

```
//these variables are "pre-processed", e.g., $country=$_POST['country'] and validated, but not yet mysql_real_escape_string
$valsx = array( '$country',  '$stateProvince', '$city3', '$city3Geocode', '$monthlyRental' );
$val_string = implode(",", $valsx);
$query = "INSERT INTO `$table` ($col_string) VALUES ( $val_string )"; 
```

这没用。我尝试改变了很多东西，但没有任何结果。我使用此代码得到的 MySQL 错误是 - 'field list' 中的 Unknown column '$country' 它指的是 $valsx 数组中的 '$country'，但我看不出这是一个字段列表，或者如何解决问题。

请具体提出建议。我对 MySQL 和 PHP 很陌生。

好的，根据 Iserni 的建议，这是当前代码。它不执行。我需要有关他的代码的帮助，并且我需要有关在何处以及如何放置错误消息的帮助。

```
$colsx = $fields = $valsx = $values = array();
$colsx = array('country', 'stateProvince', 'city3', 'city3Geocode', 'monthlyRental');
$col_string = implode(',', $colsx);
$valsx = array( "$country",  "$stateProvince", "$city3", "$city3Geocode", "$monthlyRental" );
$val_string = implode(",", $valsx);
foreach($colsx as $col) {
    $fields[] = $col;
    if ( is_numeric($_POST[$col]) ) {
        $values[] = mysql_real_escape_string($_POST[$col]);
    }else{
        $values[] = "'".mysql_real_escape_string($_POST[$col])."'";
    }
}
$fields_sql = implode(',', $fields);
$values_sql = implode(',', $values);
$query = "INSERT INTO `$table` ($fields_sql) VALUES ($values_sql);"
if (!mysql_query($query,$conn))
{
    die('<li class=error>an error occurred posting to the database. </li>'. mysql_error());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:51:07.707

您需要将值括在引号中 - 否则，SQL 会将它们解释为字段名称：

```
INSERT INTO table (field) VALUES (country) 
```

将查找名为`country`;的列 然而

```
INSERT INTO table (field) VALUES ('country') 
```

将添加字符串`country`

当您的 SQL 失败时，总是值得打印出来以查看正在生成的内容，并直接在数据库中运行以确保它确实有效 - 您也会收到更有帮助的错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:52:59.483

```
$valsx = array( '$country',  
                '$stateProvince',
                '$city3',
                '$city3Geocode',
                '$monthlyRental'
         ); 
```

使用单引号将输出此处写入的文字字符。用双引号将它们括起来将使它们被变量内容替换。或者由于您没有额外的可打印字符添加到字符串中，请完全删除引号并仅使用变量：

```
$valsx = array( $country,  
                $stateProvince,
                $city3,
                $city3Geocode,
                $monthlyRental
         ); 
```

**编辑：**

附带说明一下，绝对值得学习使用 PDO 而不是已弃用的 mysql 函数。如果你用谷歌搜索它们，周围有一些很好的教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:58:44.977

我会这样做：

```
$colsx = array('country', 'stateProvince', 'city3', 'city3Geocode', 'monthlyRental');
// List of optional fields
$colsy = array('otherfield', 'other2', ...);

// Building the query
$fields = array();
$values = array();

// Mandatory fields
foreach($colsx as $col)
{
    if (!isset($_POST[$col]))
        die("MISSING field $col";
    $fields[] = $col;
    if (is_numeric($_POST[$col]))
        $values[] = mysql_real_escape_string($_POST[$col]);
    else
        $values[] = "'".mysql_real_escape_string($_POST[$col])."'";
}

// Optional fields
foreach($colsy as $col)
{
    //if (!isset($_POST[$col]))
    //    die("MISSING field $col";
    $fields[] = $col;
    if (is_numeric($_POST[$col]))
        $values[] = mysql_real_escape_string($_POST[$col]);
    else
        $values[] = "'".mysql_real_escape_string($_POST[$col])."'";
}

$fields_sql = implode(',', $fields);
$values_sql = implode(',', $values);

$query = "INSERT INTO `$table` ($fields_sql) VALUES ($values_sql);" 
```

如果您已经拥有经过验证的字段，则可以这样做（但是，正如我看到有人建议的那样，使用 PDO 代替 mysql_ 函数会更好；稍后考虑这样做）。

```
$data = array(
    // FIELD            VALUE ("$country" and $country are the same thing)
    'country'        => $country,
    'stateProvince'  => $stateProvince,
    'city3'          => $city3,
    ...
);

// If you need to add a field conditionally, you do it like this:
// if (isset($_POST['newfield']))
//     $data['newfield'] = $_POST['newfield'];
// or also, maybe:
//
// if (isset($_POST['newfield']) && !empty($_POST['newfield']))
//     $data['newfield'] = $_POST['newfield'];

// Process the values in $data to get SQL fields (PDO does this by itself)

$values = array();
foreach($data as $field => $value)
{
    if (is_numeric($value))
        $values[] = $value;
    else
        $values[] = "'".mysql_real_escape_string($value)."'";
}
// Now we have all we need. The "fields" are $data's keys.
$fields_sql = implode(',', array_keys($data));
$values_sql = implode(',', $values);

$query = "INSERT INTO `$table` ($fields_sql) VALUES ($values_sql);"; 
```

使用 PDO 也是一样：

```
$data = array(
    // FIELD            VALUE ("$country" and $country are the same thing)
    'country'        => $country,
    'stateProvince'  => $stateProvince,
    'city3'          => $city3,
    ...
);

// Process $data to get SQL fields (we could use array_fill)
$values = array();
foreach($data as $field => $value)
    $values[] = '?'; // Placeholder, without quotes

$fields_pdo = implode(',', array_keys($data));
$values_pdo = implode(',', $data);

// This is now INSERT INTO mytable (city,rent,...) VALUES (?,?,?,...);
$query = "INSERT INTO $table ($fields_sql) VALUES ($values_sql);";

$q = $conn->prepare($query);
$q->execute(array_values($data)); 
```

# asp.net-mvc - 从模型通知用户（视图）

> ID：11420736
> 
> 赞同：0
> 
> 时间：2012-07-10T19:44:08.453
> 
> 标签：asp.net-mvc

我有一个模型，在 DBContext 类中添加了一些业务逻辑。此逻辑检查是否有人会收到有关数据库更改的通知。如果由于电子邮件地址未存档而导致通知失败，我想将信息传递回调用 db.SaveChanges 的控制器，以便控制器可以然后相应地将其传递给视图。

我如何访问从模型中调用的控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T06:00:45.340

控制器动作应该有逻辑来捕捉通知问题（异常）

，然后用适当的视图响应

# google-app-engine - 编辑代理时参数类型不匹配

> ID：11420740
> 
> 赞同：0
> 
> 时间：2012-07-10T19:44:30.817
> 
> 标签：google-app-engine, gwt

我似乎无法弄清楚是什么导致了下面的问题。我能够创建并保留一个 B 类型的对象，该对象具有父 A (@Parent) 并具有 C 类型的嵌入对象。当我尝试编辑该对象时，尽管出现以下错误。什么会导致这个错误？

```
public class A extends DatastoreObject<Long>{
      @Id private Long id;

      @Override
      public Long getId() {
        return id;
      }

      public void setId(Long id) {
        this.id = id;
      }

    }

    public class C extends ValueProxy{
      private String name;

      public String getName() {
        return name;
      }

      public void setName(String name) {
        this.name = name;
      }

    }

    public class B extends DatastoreObject<Long>{
      @Id private Long id;
      @Parent public Key<A> a;
      public String label;
     @Embedded
     public C c;

      @Override
      public Long getId() {
        return id;
      }

      public void setId(Long id) {
        this.id = id;
      }

    public String getLabel() {
        return label;
     }

     public void setLabel(String label) {
        this.label = label;
     }

      public A getA(){
        if (a == null) {
            return null;
        }

        try {
            return new ADAO().get(a);
        } catch (NotFoundException e){
            return null;
        }
      }

      public void setA(A a) {
        this.a = new ADAO().key(a);
      }

     public void setCustomer(Key<A> a){
       this.a = a;
     }

     public C getC(){
        return c;
     }
     public void setC(C c){
      this.c = c;
     }

    }

private void updateSite(String label){

    BRequest bRequest = requestFactory.bRequest();
    BProxy b = bRequest.edit(bToEdit); //bToEdit is set when I get the object earlier
    b.setLabel("something");

    siteRequest.persist(b);
    siteRequest.fire(...);

}

com.google.web.bindery.requestfactory.server.RequestFactoryServlet doPost
SEVERE: Unexpected error
java.lang.IllegalArgumentException: argument type mismatch
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:104)
    at com.google.web.bindery.requestfactory.server.ReflectiveServiceLayer.setProperty(ReflectiveServiceLayer.java:234)
    at com.google.web.bindery.requestfactory.server.ServiceLayerDecorator.setProperty(ServiceLayerDecorator.java:193)
    at com.google.web.bindery.requestfactory.server.ServiceLayerDecorator.setProperty(ServiceLayerDecorator.java:193)
    at com.google.web.bindery.requestfactory.server.ServiceLayerDecorator.setProperty(ServiceLayerDecorator.java:193)
    at com.google.web.bindery.requestfactory.server.SimpleRequestProcessor$1.visitReferenceProperty(SimpleRequestProcessor.java:529)
    at com.google.web.bindery.autobean.vm.impl.ProxyAutoBean.traverseProperties(ProxyAutoBean.java:324)
    at com.google.web.bindery.autobean.shared.impl.AbstractAutoBean.traverse(AbstractAutoBean.java:166)
    at com.google.web.bindery.autobean.shared.impl.AbstractAutoBean.accept(AbstractAutoBean.java:101)
    at com.google.web.bindery.requestfactory.server.SimpleRequestProcessor.processOperationMessages(SimpleRequestProcessor.java:516)
    at com.google.web.bindery.requestfactory.server.SimpleRequestProcessor.process(SimpleRequestProcessor.java:210)
    at com.google.web.bindery.requestfactory.server.SimpleRequestProcessor.process(SimpleRequestProcessor.java:127)
    at com.google.web.bindery.requestfactory.server.RequestFactoryServlet.doPost(RequestFactoryServlet.java:133)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at com.google.inject.servlet.ServletDefinition.doService(ServletDefinition.java:263)
    at com.google.inject.servlet.ServletDefinition.service(ServletDefinition.java:178)
    at com.google.inject.servlet.ManagedServletPipeline.service(ManagedServletPipeline.java:91)
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:62)
    at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118)
    at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:363)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:51:42.440

看起来我忘记将 C 对象放在我的 BProxy 对象类中。哎呀。

# c - 嵌入式平台上的聊天 *Server*

> ID：11420743
> 
> 赞同：1
> 
> 时间：2012-07-10T19:44:44.957
> 
> 标签：node.js, c, node.js, embedded, chat, libpurple

我目前正在构建一个聊天服务器（meebo 风格）。

架构是这样的。

1.  [libpurple](http://pidgin.im)上的[Bitlbee](http://Bitlbee.org)位于主机*B*上。它是数据中心上的一个微不足道的服务器。
2.  *用户通过 Host A*上的 web 服务器（就像 meebo）与 bitlbee 通信。此 Web 服务器的后端维护聊天会话。它只是将用户命令转换为正确的 bitlbee comamnd 并发送回主机*A*。

**这里最重要的部分是主机*A*将部署在嵌入式 Linux 中。**

我有**2 个问题**。

1.  为了保持聊天会话持久，我正在考虑使用[node.js](/questions/tagged/node.js "显示标记为“node.js”的问题")。因为它更容易创建具有持久连接的实时应用程序。但我怀疑它是否在这样的平台上受支持。
2.  如果我使用 C 而不是 node.js（我没有使用任何 Web 服务器），我可以通过*libirc与主机**A*上的 irc 服务器通信。但是如何在 C 中实现所有 Web 服务器功能（如会话、url/cookie/post 数据解析等）？

 *另外，如果您认为我的方法是错误的或者有更好的方法，请告诉我如何改进这个架构？

注意：这不是高容量聊天服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:43:57.057

如果在嵌入式平台上构建 V8/Node.js 是令人望而却步的，那么下一个最好的办法是采用 Node 的事件循环和平台层 ( [libuv](https://github.com/joyent/libuv) ) 和 HTTP 解析器 ( [http-parser](https://github.com/joyent/http-parser) )，它们都是用 C 编写的并将它们用作一个起点。这些是用于构建 Node.js 的相同库，因此它们经过了实战测试，将为您提供所需的性能特征。

Node.js 的作者 Ryan Dahl 准确地演示了[如何使用 libuv 和 http-parser 在 C 中构建异步 Web 服务器](http://vimeo.com/24713213)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T01:58:27.180

在 Bitlbee 和基于 Web 的 IRC 客户端之间放置一个 ZNC 服务器。Bitlbee 会认为用户从未注销过，ZNC 可以保持积压的消息，直到用户再次与 Web 客户端连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:51:09.620

如果这是您的选择，我会尝试使用 node.js，它是什么嵌入式系统？因为知道这会更有帮助。此外，node.js 的另一个优点是它确实构建了会话处理，但如果您想在 C 中执行此操作，请尝试查看是否可以在嵌入式设备上运行 sqlite 包装器来存储会话信息。

但是，如果可能的话，坚持在嵌入式设备上做更少的工作，重新发明很多东西或者不得不为你的设备处理编译问题感觉很糟糕。*

# php - PHP在带有花括号的字符串中嵌入数组元素

> ID：11420745
> 
> 赞同：10
> 
> 时间：2012-07-10T19:44:53.727
> 
> 标签：php

我想知道在以下情况下使用花括号的好处是什么：

```
$world["foo"] = "Foo World!";
echo "Hello, {$world["foo"]}.\n"; 
```

结束于以下内容：

```
$world["foo"] = "Foo World!";
echo "Hello, $world["foo"].\n"; 
```

特别是，在这种情况下（或类似情况），大括号如何解决任何可能的歧义？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T19:49:42.030

第二个示例将不会被解析。所以首先更好:)

无论如何，我更喜欢使用

```
echo "Hello" . $world["foo"] . ".\n"; 
```

因为它对我来说更容易阅读。

除此之外，还有一种方法：

```
$world["foo"] = "Foo World!";
echo "Hello, $world[foo].\n"; 
```

没有理由使用一个或另一个。你（或你的团队）喜欢什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T19:48:17.320

请参阅“回声”解释的其他答案，但如果您使用的是heredoc，例如以下内容：

```
echo <<<EOHTML
<td>{$entity['name']}</td>
EOHTML; 
```

您需要花括号才能正确使用关联数组。

# ios - UIView 帧动画“摆动”

> ID：11420746
> 
> 赞同：4
> 
> 时间：2012-07-10T19:44:54.367
> 
> 标签：ios, core-animation, uiviewanimation

我有这段疯狂的代码。如何使用 Core Animation 为它制作动画，这样我的代码就更少了？我找到[了一些](https://stackoverflow.com/questions/7742127/wiggle-animation-in-objective-c)用于“摆动”动画的代码，但那是 3D 的，我只想让视图左右移动，我不想让它在两边弹跳。

```
[UIView animateWithDuration:0.1f
                 animations:^{
                     CGRect frame = tableView.frame;
                     frame.origin.x -= 4;
                     tableView.frame = frame;
               } completion:^(BOOL finished) {
                   [UIView animateWithDuration:0.1f
                                    animations:^{
                                        CGRect frame = tableView.frame;
                                        frame.origin.x += 4;
                                        tableView.frame = frame;
                                  } completion:^(BOOL finished) {
                                        [UIView animateWithDuration:0.1f
                                                         animations:^{
                                                             CGRect frame = tableView.frame;
                                                             frame.origin.x -= 4;
                                                             tableView.frame = frame;
                                                       } completion:^(BOOL finished) {
                                                             [UIView animateWithDuration:0.1f
                                                                              animations:^{
                                                                                  CGRect frame = tableView.frame;
                                                                                  frame.origin.x = 0;
                                                                                  tableView.frame = frame;
                                                                            } completion:^(BOOL finished) {
                                                                                  // Nothing
                                                                            }
                                                              ];
                                                       }
                                        ];
                                  }
                    ];
               }
]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-20T15:10:45.760

我想跟进这个问题，以防有人偶然发现它。我现在正在使用关键帧：

```
-(void)wiggleView {
    CAKeyframeAnimation *animation = [CAKeyframeAnimation animation];
    animation.keyPath = @"position.x";
    animation.values = @[ @0, @8, @-8, @4, @0 ];
    animation.keyTimes = @[ @0, @(1 / 6.0), @(3 / 6.0), @(5 / 6.0), @1 ];
    animation.duration = 0.4;
    animation.additive = YES;
    [self.layer addAnimation:animation forKey:@"wiggle"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:54:11.543

[这个问题](https://stackoverflow.com/questions/929364/how-to-create-iphones-wobbling-icon-effect)是执行重复运动动画的一种非常简洁的方法。我用它来旋转摆动，但你可以应用任何转换，在你的情况下，翻译

# python - 在 OpenCV/Python 中设置相机参数

> ID：11420748
> 
> 赞同：98
> 
> 时间：2012-07-10T19:45:04.327
> 
> 标签：python, opencv, camera, python-2.7

我将 OpenCV (2.4) 和 Python (2.7.3) 与 Thorlabs (DC1545M) 的 USB 摄像头一起使用。

我正在对视频流进行一些图像分析，我希望能够从我的视频流中更改一些相机参数。令人困惑的是，我可以更改某些相机属性，但不能更改所有属性，而且我不确定自己做错了什么。

这是代码，在 Python 中使用 cv2 绑定，我可以确认它运行：

```
import cv2

#capture from camera at location 0
cap = cv2.VideoCapture(0)
#set the width and height, and UNSUCCESSFULLY set the exposure time
cap.set(3,1280)
cap.set(4,1024)
cap.set(15, 0.1)

while True:
    ret, img = cap.read()
    cv2.imshow("input", img)
    #cv2.imshow("thresholded", imgray*thresh2)

    key = cv2.waitKey(10)
    if key == 27:
        break

cv2.destroyAllWindows() 
cv2.VideoCapture(0).release() 
```

作为参考，*cap.set()*命令中的第一个参数是指相机属性的枚举，如下所示：

```
0\. CV_CAP_PROP_POS_MSEC Current position of the video file in milliseconds.
1\. CV_CAP_PROP_POS_FRAMES 0-based index of the frame to be decoded/captured next.
2\. CV_CAP_PROP_POS_AVI_RATIO Relative position of the video file
3\. CV_CAP_PROP_FRAME_WIDTH Width of the frames in the video stream.
4\. CV_CAP_PROP_FRAME_HEIGHT Height of the frames in the video stream.
5\. CV_CAP_PROP_FPS Frame rate.
6\. CV_CAP_PROP_FOURCC 4-character code of codec.
7\. CV_CAP_PROP_FRAME_COUNT Number of frames in the video file.
8\. CV_CAP_PROP_FORMAT Format of the Mat objects returned by retrieve() .
9\. CV_CAP_PROP_MODE Backend-specific value indicating the current capture mode.
10\. CV_CAP_PROP_BRIGHTNESS Brightness of the image (only for cameras).
11\. CV_CAP_PROP_CONTRAST Contrast of the image (only for cameras).
12\. CV_CAP_PROP_SATURATION Saturation of the image (only for cameras).
13\. CV_CAP_PROP_HUE Hue of the image (only for cameras).
14\. CV_CAP_PROP_GAIN Gain of the image (only for cameras).
15\. CV_CAP_PROP_EXPOSURE Exposure (only for cameras).
16\. CV_CAP_PROP_CONVERT_RGB Boolean flags indicating whether images should be converted to RGB.
17\. CV_CAP_PROP_WHITE_BALANCE Currently unsupported
18\. CV_CAP_PROP_RECTIFICATION Rectification flag for stereo cameras (note: only supported by DC1394 v 2.x backend currently) 
```

（请注意，正如评论者 Markus Weber 在下面指出的那样，在 OpenCV 4 中，您必须从属性名称中删除“CV”前缀，例如 `cv2.CV_CAP_PROP_FRAME_HEIGHT -> cv2.CAP_PROP_FRAME_HEIGHT`）

我的问题是：

**是否可以通过 python/opencv 设置相机曝光时间（或其他相机参数）？**

**如果没有，我将如何设置这些参数？**

注意：相机制造商提供的 C++ 代码显示了如何执行此操作，但我不是 C++ 专家（从长远来看），我会欣赏任何基于 python 的解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-07-11T13:00:19.810

并非所有相机都支持所有参数 - 实际上，它们是 OpenCV 库中最麻烦的部分之一。每种相机类型——从安卓相机到 USB 相机再到专业相机，都提供了不同的界面来修改其参数。OpenCV 代码中有许多分支可以支持其中的许多分支，但当然不会涵盖所有可能性。

您可以做的是调查您的相机驱动程序，为 OpenCV 编写补丁并将其发送到 code.opencv.org。这样别人就会喜欢你的工作，就像你喜欢别人一样。

您的相机也有可能不支持您的要求 - 大多数 USB 相机既便宜又简单。也许该参数不能用于修改。

如果您确定相机支持给定的参数（您说相机制造商提供了一些代码）并且不想弄乱 OpenCV，您可以使用 boost::python 将该示例代码包装在 C++ 中，以使其在 Python 中可用。然后，享受使用它。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-24T20:57:06.050

我在 Raspberry Pi 上使用 openCV 时遇到了同样的问题……不知道这是否可以解决您的问题，但对我有用的是

```
import time
import cv2

cap = cv2.VideoCapture(0)

cap.set(3,1280)

cap.set(4,1024)

time.sleep(2)

cap.set(15, -8.0) 
```

您必须使用的时间可以不同

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-02-08T16:09:21.093

为了避免使用整数值来标识`VideoCapture`属性，可以使用例如`cv2.cv.CV_CAP_PROP_FPS`在 OpenCV 2.4 和`cv2.CAP_PROP_FPS`OpenCV 3.0 中。（另请参阅下面 Stefan 的评论。）

这是一个适用于 OpenCV 2.4 和 3.0 的实用程序函数：

```
# returns OpenCV VideoCapture property id given, e.g., "FPS"
def capPropId(prop):
  return getattr(cv2 if OPCV3 else cv2.cv,
    ("" if OPCV3 else "CV_") + "CAP_PROP_" + prop) 
```

`OPCV3`在我的实用程序代码中设置如下：

```
from pkg_resources import parse_version
OPCV3 = parse_version(cv2.__version__) >= parse_version('3') 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-08-04T11:58:42.997

我也无法解决 OpenCV 问题，但是在使用 Linux 时，video4linux (V4L2) 解决方法确实适用*于OpenCV。*至少，它可以在我的带有 Rasbian 的 Raspberry Pi 和我便宜的网络摄像头上使用。它不像您希望的那样坚固、轻便和便携，但在某些情况下它可能非常有用。

确保您已安装 v4l2-ctl 应用程序，例如来自 Debian v4l-utils 软件包。比运行（在运行 python 应用程序之前，或从内部）命令：

```
v4l2-ctl -d /dev/video1 -c exposure_auto=1 -c exposure_auto_priority=0 -c exposure_absolute=10 
```

它会将您的相机快门时间覆盖为手动设置，并将最后一个参数的快门时间（以毫秒为单位？）更改为（在本例中）10。此值越低，图像越暗。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-05-29T23:12:23.953

如果有人仍然想知道其中的价值`CV_CAP_PROP_EXPOSURE`可能是什么：

要看。对于我便宜的网络摄像头，我必须直接输入所需的值，例如 0.1 表示 1/10 秒。对于我昂贵的工业相机，我必须输入 -5 才能获得 2^-5s = 1/32s 的曝光时间。

# asp.net - 当 IIS6 设置为 .NET 4 时，ASP 网站停止工作

> ID：11420754
> 
> 赞同：0
> 
> 时间：2012-07-10T19:45:20.460
> 
> 标签：asp.net, .net-4.0, asp-classic

我有 2 个网站，一个是用 ASP 编写的，另一个是用 ASP.NET (4) 编写的。在我的 Web 服务器 (IIS) 中，当将 dot net 设置为版本 4 时，用 .NET 编写的 Web 工作正常，但停止使用 ASP。我确实以多种方式进行了更改，但我必须同时制作两个站点。如果有人有任何答案将不胜感激。

*   Windows是2003服务器，
*   IIS 是版本 6
*   ASP.NET 从 2 到 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:00:23.790

您必须在 IIS 中创建两个虚拟目录。一个用于 Asp.Net 4，一个用于其他版本的 Asp.net。选择虚拟目录并选择属性，然后设置所需的 asp.net 版本。

# c# - 根据该数据的内容选择要从 JSON 数据填充的类型

> ID：11420755
> 
> 赞同：0
> 
> 时间：2012-07-10T19:45:24.563
> 
> 标签：c#, json.net

这是我要反序列化的数据

```
{
    "elements": [
        {
            "name": "Conference Room 3D",
            "code": "room1",
            "type": 0,
            "bounds": {
                "southWestLat": 42.06258564597228,
                "southWestLng": -88.05174744187781,
                "northEastLat": 42.062638767104781,
                "northEastLng": -88.05170306794393
            }
        },
        // ....
    ]
} 
```

当我只期望某种数据时，这非常简单，但是我需要能够将其他类型的数据放入该元素数组中。类型对是一个枚举，它指定对象保存的数据类型。然后该数字映射到对象应序列化到的类。

例如

*   0 映射到 MapElementConferenceRoom
*   1 映射到 MapElementFocusRoom
*   等等

我想我可以写一个自定义的 JsonConverter 来读取类型键，但是你不能倒回 JsonReader 对象。

任何关于解决方案的建议都将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:12:57.440

```
dynamic dynJson = JsonConvert.DeserializeObject(json);
foreach (var item in dynJson.elements)
{
    if(item.type==0)
    {
        //Do your specific deserialization here using "item.ToString()"
        //For ex,
        var x = JsonConvert.DeserializeObject<MapElementConferenceRoom>(item.ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:51:09.493

创建一个直接映射到内容的视图模型。然后根据视图模型投影具体的实现。

# google-chrome - “清单文件无效”

> ID：11420756
> 
> 赞同：5
> 
> 时间：2012-07-10T19:45:25.910
> 
> 标签：google-chrome, google-chrome-extension

我正在更新我的 Chrome 扩展程序的清单版本。

在我的本地机器上，它可以工作。

当我尝试通过测试组安装时，它显示“清单文件无效”错误。

这是我的清单：

```
{
  "name": "MercadoLivre - Sugestões de busca",
  "description" : "Busque no MercadoLivre direto da barra de endereços",

  "version": "0.12",
  "manifest_version": 2,

  "icons": { "128": "logo.png" },

  "background": {
    "page": "background.html"
  },

  "content_security_policy": "script-src 'self' https://ssl.google-analytics.com; object-src 'self'",

  "omnibox": { "keyword" : "ml" },

  "permissions": [
    "http://suggest.mlapps.com/jm/*"
  ]
} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T17:53:25.877

注销并为我工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T01:20:01.587

对我来说，错误是更新我的插件然后尝试立即安装它的结果。当我等了几分钟，错误不再出现。在传播新更新期间，Google 扩展服务器可能有几分钟不同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T00:29:09.447

我今天遇到了同样的问题。重新启动对我有用。我从 Chromium[错误报告](https://code.google.com/p/chromium/issues/detail?id=103281)中得到了这个想法。虽然有时这是一个实际的包装问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T02:32:13.193

我也遇到了这个错误，我想可能是你的资源在 SkyDrive 文件夹或一些团队代码管理软文件夹下。尝试将资源复制到另一个路径，例如桌面。用新路径打包你的插件，然后你可以解决它！

# javascript - 如何减少文本行之间的空间量

> ID：11420757
> 
> 赞同：0
> 
> 时间：2012-07-10T19:45:27.627
> 
> 标签：javascript, jquery, css

在小提琴中，我试图减少每个问题选项中每个句子之间的空间量（选项是蓝色文本）：

[http://jsfiddle.net/25LjE/79/](http://jsfiddle.net/25LjE/79/)

我正在`pds-answer-group`使用该`line-height`属性降低班级的高度：

```
.pds-answer-group {
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
height:auto;
overflow:hidden;
line-height:50%;
} 
```

但是行之间的空间量并没有减少。如何更新 CSS 以减少问题选项每行文本之间的空间量？

小提琴背后的CSS：

```
.pds-question-top {
font-size:10pt !important;
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
}

.pds-pd-link, .pds-comments {
display:none !important;
}

.pds-box {
width:220px !important;
}

.pds-input-label {
width:85% !important;
}

.PDS_Poll {
margin-bottom:15px;
}

.pds-answer-span {
color:#00f;
}

.pds-vote {
background-color:#424242;
}

.pds-answer-text {
color:#00f;
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
}

.pds-answer-feedback {
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
}

.pds-votebutton-outer {
text-align:center;
}

.pds-answer-group {
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
height:auto;
overflow:hidden;
}

.pds-input-label,.pds-answer-input {
float:left;
}

.pds-view-results,.pds-links {
color:#FFF !important;
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
}

.pds-comments,.pds-return-poll {
color:#FFF !important;
}

.pds-links {
    display: inline !important;
}
.pds-pd-link {
display: none !important;
}
.pds-box {
    width: 220px !important;
}
.pds-input-label{
    width: auto! important;
}
.PDS_Poll{
    margin-bottom:15px;
}

.pds-question-top {padding:0 !important} 
```

小提琴背后的HTML：

```
<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6352993.js"></script>
<noscript><a href="http://polldaddy.com/poll/6352993/">This is very long test question to test how polldaddy handles questions that exceed that normal length............ yes a very long question indeed..............</a></noscript>

$(document).ready(function() {

    $('.pds-question-inner').prepend('<span style="color:red;font-weight:bold;font-size: 15px;float:left">Header</span>');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T20:03:07.063

看起来你的 CSS 被`.pds-input-label`类覆盖了。它可能是从您正在使用的 JS 文件中加载的。只需添加`line-height: 50% !important;`到`.pds-input-label`班级。请参阅此处的示例[http://jsfiddle.net/2Wrhd/](http://jsfiddle.net/2Wrhd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:51:40.493

你可以`line-height`在你的 CSS 中设置，这取决于你想要减少中间空间的文本。

**例子：**

```
.pds-answer-group {
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
height:auto;
overflow:hidden;
line-height:9pt /* worked when i changed this from 50% */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T20:06:27.827

事实上，有问题的元素是：

```
.pds-answer-span {
  line-height: 150% !important;
} 
```

您可以使用 Ctrl+Shift+i 在 Firefox 中轻松检查它（并将其重新定义为 100% 降低行数）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T20:07:04.293

我尝试过并且工作过。把跨度放进去

```
<p></p> 
```

并设置 line-height 属性：

```
<p style="line-height: 2pt';"><span class="pds-answer-span">blablabla</span></p> 
```

# json - 使用 RABL 将对象正确格式化为 json

> ID：11420759
> 
> 赞同：0
> 
> 时间：2012-07-10T19:45:38.070
> 
> 标签：json, rabl

我有一个数组 @user_designs，它有一些属性，包括名称、主题 ID 和令牌。目前我的 RABL 看起来像这样：

```
collection @user_designs 
attributes :token, :name, :theme_id 
```

并显示：

```
[
    {
        "user_design": {"token":"U081247840","name":"My Design","theme_id":1}},
    {
        "user_design": {"token":"U783042565","name":"facebook images","theme_id":2}
    }
] 
```

从 json 中看到的 id 是这样的：

```
{
     "status" : true,
     "user_designs" : 
           {
                "U081247840": {"name":"My Design","theme_id":1},
                "U783042565": {"name":"facebook images","theme_id":2}
           }

} 
```

我尝试浏览文档，但无法弄清楚。状态只是一个我想嵌入的变量，它独立于集合。我还希望将所有用户设计放在一个名为“用户设计”的散列中，该散列由其标记索引。

我将如何在 RABL 中执行此操作？我正在使用导轨 3.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:35:52.107

我还没有尝试过，但它应该基于文档工作：

```
collection @user_designs 
extends 'user_designs/show' 
```

在'user_designs/show'

```
object @user_design => @user_design.token
attributes :name, :theme_id 
```

要按令牌索引集合中的对象，您应该在控制器中执行此操作或在模型中定义订单范围。

# ruby-on-rails - 尝试使用 nagios 和 nrpe 监视 Rails 应用程序的内部，但只得到“NRPE：无法读取输出”

> ID：11420764
> 
> 赞同：0
> 
> 时间：2012-07-10T19:45:57.367
> 
> 标签：ruby-on-rails, ruby, monitoring, nagios, nrpe

我正在尝试使用`nagios`和`nrpe`插件监视 Rails 应用程序的内部，但只得到`NRPE: Unable to read output`

**这是我的监控机器代码“check_test.rb”脚本：**

```
#!/usr/bin/env ruby

# load rails

RAILS_ENV = 'production'
require '/var/www/production/current/config/environment'

error = 0

print "OK"

exit error # exit with the error code that is then interpreted by nagios 
```

这是我的监控主机调用：

```
$ sudo /usr/local/nagios/libexec/check_nrpe -H remote.machine.com -c check_test -t 240 
```

**如果我删除下面的行，它工作正常：**

```
# load rails

RAILS_ENV = 'production'
require '/var/www/production/current/config/environment' 
```

任何帮助都会非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:51:39.077

我创建了一个包装器 bash 脚本，如下所示：

* * *

#!/bin/bash

cd /var/www/production/current/

RAILS_ENV=生产 /usr/local/nagios/libexec/check_test.rb --silent

退出 $?

* * *

并从 check_test.rb 中删除了 RAILS_ENV 语句，因为它已经在包装脚本中声明了。

它现在工作正常：-DD

谢谢！

# extjs4 - 在 ext.grid.panel 的“工具”配置选项中显示自定义图像

> ID：11420765
> 
> 赞同：6
> 
> 时间：2012-07-10T19:45:59.537
> 
> 标签：extjs4, panel

我只有一个月大的 extjs 并且仍在试验。我的问题是：我有一个网格面板，其中包含“工具”配置选项。我正在使用它来启用/禁用 Ext.grid.feature.Grouping 变量。2 个处理函数具有通过单击出现在标题右侧的 2 个“交叉”按钮来禁用/启用 2 个视图的逻辑。逻辑很好。但是，我想显示我的一组自定义图像来代替“十字”按钮。这可以做到吗？如果是，如何？我需要为此对css代码进行一些更改吗？

我查看了文档并进行了很好的搜索，但似乎没有任何问题可以回答我的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T23:48:32.533

[`type`](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.panel.Tool-cfg-type)在您的工具上指定自定义配置：

```
Ext.create('Ext.grid.Panel', {
   ...
   tools: [
      {
         type: 'enable-grouping',
         handler: function() {
            ...
         }
      },
      {
         type: 'disable-grouping',
         handler: function() {
            ...
         } 
      }
   ]
}); 
```

然后在样式表中定义以下类来设置新工具的样式：

```
.x-tool-enable-grouping {
   background-image: url('path/to/tool/image/enable-grouping.png');
}

.x-tool-disable-grouping {
   background-image: url('path/to/tool/image/disable-grouping.png');
} 
```

工具图像的大小应为 15 x 15 像素

# html - 添加比包装更宽的行

> ID：11420766
> 
> 赞同：1
> 
> 时间：2012-07-10T19:46:03.950
> 
> 标签：html, css

我有一个固定宽度的居中容器，在里面我有一个元素必须是浏览器的全宽。

```
<div style="width: 960px; margin: 0 auto;">
    ...content...
    <div style="width 100% ??;"></div>
    ...content...
</div> 
```

我的问题是，有没有什么方法可以让它在不包装内容的顶部和底部的情况下工作？

谢谢你。

![在此处输入图像描述](../Images/2bdde60ded33a77e84ce4f42a9dcc56d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:48:36.493

只要容器是静态定位的，您就可以使用`position: absolute`：

```
left: 0;
position: absolute;
right: 0; 
```

请注意，您*根本不需要设置`top`，顶部也不需要具有静态高度*。

# c++ - 类的第二个实现文件中静态字段的C++外部？

> ID：11420770
> 
> 赞同：1
> 
> 时间：2012-07-10T19:46:16.077
> 
> 标签：c++, static, extern

我在一个 linux 静态库项目中有 3 个文件，其中我有一个静态字段的链接问题，我想在两个类方法实现文件中使用该静态字段。我有class1.h、class1main.cpp 和class1utils.cpp。class1.h 定义了一个名为 class1 的类，其中包含所有静态方法和一个名为 pDb 的静态字段。.cpp 文件定义了分成两个文件的 class1 方法的实现。

在 class1.h 中，我声明了静态：

```
class class1    {
public:
    static Database * pDb;
    ...
} 
```

在 class1main.cpp 中，我在顶部定义了实际的静态：

```
Database * class1::pDb; 
```

所以，我想我可以在 class1utils.cpp 中执行以下操作：

```
extern Database * class1::pDb; 
```

但是当我制作项目并引入库时，pDb 在链接时被多次定义。有人可以告诉我如何在第二个源文件中引用静态，以便我可以使用它（它会链接）？

如果我将 class1utils.cpp 中的方法移回 class1main.cpp，并删除 class1utils.cpp，则链接有效。

感谢您的任何建议。科里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:51:53.737

你应该简单地包括class1.h。声明变量不需要其他任何东西。

这样做的一个原因是，如果您可以在不存在类定义的情况下声明静态成员变量，那么静态成员的访问说明符将被隐藏。编译器将无法检查访问权限。

`extern Database *class1::pDb;`此外，您甚至不能在没有定义 class1 的情况下引用 class1 的成员（如 中）。如果你尝试`class class1; Database *class1::pDb;`，你应该得到一个错误，你正在使用未定义的类型`class1`。所以 extern 声明是多余的。

* * *

另一方面，如果你有一个没有非静态成员的类，这表明你可能不应该使用一个类。C++ 不像 Java，所有东西都必须在一个类中。在 C++ 中，您可以根据需要在命名空间中简单地声明自由函数和变量。

在这种情况下，您将使用 extern 在 class1.h 中声明变量，而不是使用静态：

```
// class1.h
namespace class1 {
    extern Database *pDb;
}

// class1main.cpp
Database *class1::pDb; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:13:24.920

您的`class1.h`标题已经包含 member 的声明`class1::pDb`。您将能够在任何实现文件中访问该成员，其中包括`class1.h`. 不需要额外的步骤。

您似乎试图通过`extern Database * class1::pDb`在另一个实现文件中重新声明该成员。这简直是​​无效的。声明类成员的唯一方法是提供完整的类定义。

# java - 如何编写验证测试？

> ID：11420779
> 
> 赞同：2
> 
> 时间：2012-07-10T19:46:41.183
> 
> 标签：java, validation, junit

假设您有一个这样定义的请求类：

```
public class CreateUserRequest {
  @NotNull
  @Pattern("^[a-zA-Z0-9]+$")
  @Size(min = 6, max = 16)
  public String userName;

  @NotNull
  @Pattern("^[a-zA-Z0-9]+$")
  @Size(min = 8, max = 32)
  public String password;

  @NotNull
  @Pattern("^[a-zA-Z]+ [a-zA-Z]+$")
  @Size(min = 3, max = 100)
  public String fullName;      
} 
```

你如何编写约束测试？你会写这些测试吗？

**小更新**

这与我在此示例中使用的约束无关。这是关于测试/不测试您拥有的*任何*限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:45:22.220

Hibernate 验证器允许验证单个字段，因此对于这种情况，可能的解决方案之一是为`userName`和`password`编写测试`fullName`。这种方法虽然很愚蠢，但您可以检查一下以获得更好的方法：[在多个类中使用相同的约束](https://stackoverflow.com/questions/11425797/using-same-constraints-in-multiple-classes)。

# wxpython - 禁用“下一步”按钮，直到 wx.WizardPageSimple 的单页满足条件

> ID：11420780
> 
> 赞同：0
> 
> 时间：2012-07-10T19:46:44.037
> 
> 标签：wxpython

使用`self.GetParent().FindWindowById(wx.ID_FORWARD).Disable()`我可以完全禁用下一个按钮，但我只希望向导中的第二页有一个禁用按钮，直到满足条件。如果一次创建所有页面，如何防止下一个按钮被禁用，直到我到达第二页？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T20:55:56.047

该向导非常酷，直到您真正想要修改这样的东西。我猜你将不得不跟踪你在哪个页面上，然后调用这样的东西（这是你已经知道的）：

```
forward_btn = self.FindWindowById(wx.ID_FORWARD) 
forward_btn.Disable() 
```

您可能可以使用 event.GetPage() 来确定您在哪个页面上。或者您可以使用一些面板重新实现向导并以这种方式进行切换。我个人认为这会更容易。我的[博客](http://www.blog.pythonlibrary.org/2010/06/16/wxpython-how-to-switch-between-panels/)上有一个面板切换示例，可能会对您有所帮助。

您可能还会发现我提出的这个非常[通用](http://www.blog.pythonlibrary.org/2012/07/12/wxpython-how-to-create-a-generic-wizard/)的向导实现也很有帮助。

# asp.net-mvc - 如何将日志记录添加到 MVC4 WebApi

> ID：11420783
> 
> 赞同：20
> 
> 时间：2012-07-10T19:46:56.110
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我正在尝试为`[LoggedApiCall]`a 创建一个过滤器`Get()`根据`ApiController` 这个：[ASP.NET Web API ActionFilter 示例](https://stackoverflow.com/questions/10307333/asp-net-mvc-4-webapi-actionfilter-example)

我创建了一个`System.Web.HttpFilters.ActionFilterAttribute`. 覆盖允许`OnActionExecuted(HttpActionExecutedContext actionExecutedContext)`

我似乎找不到从`HttpActionExecutedContext`

也许我打算以错误的方式记录每个 API 调用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T19:59:42.243

我们使用添加到的以下过滤器`HttpConfiguration.Filters`。一些代码：

```
internal class LoggingFilter : IExceptionFilter, IActionFilter
{
    private readonly ILog log;

    public LoggingFilter(ILog log)
    {
        if (log == null)
        {
            throw new ArgumentNullException("log");
        }

        this.log = log;
    }

    public bool AllowMultiple
    {
        get { return false; }
    }

    Task IExceptionFilter.ExecuteExceptionFilterAsync(HttpActionExecutedContext actionContext, CancellationToken cancellationToken)
    {
        if (actionContext == null)
        {
            throw new ArgumentNullException("actionContext");
        }

        this.log.Error(string.Format("Unexpected error while executing {0}", this.BuildLogEntry(actionContext.ActionContext)), actionContext.Exception);
        return TaskHelpers.Completed();
    }

    Task<HttpResponseMessage> IActionFilter.ExecuteActionFilterAsync(HttpActionContext actionContext, CancellationToken cancellationToken, Func<Task<HttpResponseMessage>> continuation)
    {
        if (actionContext == null)
        {
            throw new ArgumentNullException("actionContext");
        }

        if (continuation == null)
        {
            throw new ArgumentNullException("continuation");
        }

        if (!this.log.IsDebugEnabled)
        {
            // no point running at all if logging isn't currently enabled
            return continuation();
        }

        string logEntry = this.BuildLogEntry(actionContext);
        IDisposable logContext = this.log.DebugTiming("Executing {0}", logEntry);

        Task<string> requestContent;
        if (actionContext.Request.Content != null)
        {
            requestContent = actionContext.Request.Content.ReadAsStringAsync().ContinueWith(requestResult => string.IsNullOrEmpty(requestResult.Result) ? "N/A" : requestResult.Result);
        }
        else
        {
            requestContent = TaskHelpers.FromResult("N/A");
        }

        return requestContent.ContinueWith(
            requestResult =>
                {
                    this.log.DebugFormat("{0}, Request = {1}", logEntry, requestResult.Result);

                    return continuation()
                        .ContinueWith(t =>
                            {
                                Task<string> responseContent;
                                if (t.IsCompleted && t.Result.Content != null)
                                {
                                    responseContent = t.Result.Content.ReadAsStringAsync().ContinueWith(responseResult => string.IsNullOrEmpty(responseResult.Result) ? "N/A" : responseResult.Result);
                                }
                                else
                                {
                                    responseContent = TaskHelpers.FromResult("N/A");
                                }

                                return responseContent.ContinueWith(
                                    responseResult =>
                                        {
                                            using (logContext)
                                            {
                                                this.log.DebugFormat("{0}, Status Code: {1}, Response = {2}", logEntry, t.Result.StatusCode, responseResult.Result);
                                            }

                                            return t.Result;
                                        });
                            }).Unwrap();
                }).Unwrap();
    }

    /// <summary>
    /// Builds log data about the request.
    /// </summary>
    /// <param name="actionContext">Data associated with the call</param>
    private string BuildLogEntry(HttpActionContext actionContext)
    {
        string route = actionContext.Request.GetRouteData().Route.RouteTemplate;
        string method = actionContext.Request.Method.Method;
        string url = actionContext.Request.RequestUri.AbsoluteUri;
        string controllerName = actionContext.ActionDescriptor.ControllerDescriptor.ControllerName;
        string actionName = actionContext.ActionDescriptor.ActionName;

        return string.Format("{0} {1}, route: {2}, controller:{3}, action:{4}", method, url, route, controllerName, actionName);
    }
} 
```

我们使用 log4net，您可以用`ILog`您认为合适的任何方式替换实现。`ILog.DebugTiming`只是一种扩展方法，它使用秒表来获取每个呼叫的经过时间。

编辑：这篇[获取远程主机的 IP 地址的](https://stackoverflow.com/questions/9565889/get-the-ip-address-of-the-remote-host)帖子详细介绍了如何获取远程调用者的 IP 地址。

干杯，院长

# java - 如何调用此对象以返回它找到的所有字符串？

> ID：11420785
> 
> 赞同：0
> 
> 时间：2012-07-10T19:47:07.867
> 
> 标签：java, jsp

我有以下代码，它定义了一个 getParts 方法来在系统中查找给定的零件名称和零件编号。请注意，此代码来自我们系统的 API，因此如果没有人可以提供帮助，我将删除此问题。我认为有人可能会看到解决方案或一路帮助我。

```
<%! private QueryResult getParts( String name, String number )
        throws WTException, WTPropertyVetoException {

    Class cname = wt.part.WTPart.class;
    QuerySpec qs = new QuerySpec(cname);
    QueryResult qr = null;

    qs.appendWhere
        (new SearchCondition(cname,
                                 "master>name",
                                 SearchCondition.EQUAL,
                                 name, 
                                 false));
    qs.appendAnd();
    qs.appendWhere
        (new SearchCondition(cname,
                                 "master>number",
                                 SearchCondition.EQUAL,
                                 number, 
                                 false));

    qr = PersistenceHelper.manager.find(qs);

    System.out.println("...found: " + qr.size());

    return qr;
}
%> 
```

但我想让用户更灵活地找到这些部件。所以我设置了条件语句来检查单选按钮。这允许他们按零件名称和零件编号搜索、查找全部或使用通配符进行搜索。但是，我在实施后两个选项时遇到了麻烦。

为了尝试完成上述操作，我编写了以下代码：

```
<% 
String partName = request.getParameter("nameInput");
String partNumber = request.getParameter("numberInput");
String searchMethod = request.getParameter("selection");

//out.print(searchMethod);

QueryResult myResult = new QueryResult();

if(searchMethod.equals("search"))
    myResult = getParts(partName, partNumber);

else if(searchMethod.equals("all"))
{
    //Should I write a new function and do this?
    //myResult = getAllParts();
    //or is there a way I could use a for each loop to accomplish this?

}

//else if(searchMethod.equals("wildcard"))
    //get parts matching %wildcard%

while(myResult.hasMoreElements())
{
        out.print(myResult.nextElement().toString());
}

%> 
```

基本上，它接受用户输入并检查他们想要执行的搜索类型。有没有一种简单的方法可以将所有值传递给 myResult 对象？同样对于通配符搜索？就像我之前说的，在没有访问 API 的情况下尝试提供帮助可能是徒劳的，但希望不是这样。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:57:23.060

您可以（并且应该）重用该函数，但为了这样做，您将需要一个部件名称和编号（因为这些是它的输入参数）。因此，对于多结果选项，您需要获取零件名称+编号的列表/集合，并将它们单独提供给函数，然后以最适合您需要的格式收集结果

# c# - 如何根据gridview中的某些值更改标签的颜色

> ID：11420794
> 
> 赞同：4
> 
> 时间：2012-07-10T19:47:35.190
> 
> 标签：c#, asp.net

我有一个 sqldatasource 和 gridview。

我有两列：

```
ID | Status
1   Closed
2   Opened
3   Waiting 
```

如何根据`'status'`列中的值更改网格视图的视图状态中标签的颜色。

例如，如果单元格中的值为“ `Closed`”，则标签颜色将为红色，如果是，`opened`则它将变为绿色，依此类推。

我考虑过遍历`status`列的所有单元格，如果单元格包含某个值，颜色会改变。（在行数据绑定事件中）。但我没有这样做，因为我不认为这个想法是一个好的想法，因为循环部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:55:59.930

使用网格视图中的 RowDataBound 事件来检查状态。您不需要执行循环，因为正在调用该事件（如果您注册或未注册）。需要注意的一件事是，您需要确保您查看的是正确的行（页眉、页脚、备用等），所以像这样

```
void YourGridViewName_RowDataBound(Object sender, GridViewRowEventArgs e)
{

    if(e.Row.RowType == DataControlRowType.DataRow)
    {
       // Do your color change here by accessing the col with e.Row.Cells[column_index].BackColor = 'what ever you want'
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T19:56:45.063

您可以在标记中启用 RowDataBound 事件

```
<asp:GridView ID="gridview1" runat="server" OnRowDataBound="RowDataBound">

</asp:GridView> 
```

并将其放入您的代码隐藏文件中。

```
protected void RowDataBound(Object sender, GridViewRowEventArgs e)
   {
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
       // Retrieve the underlying data item. In this example
       // the underlying data item is a DataRowView object. 
       DataRowView rowView = (DataRowView)e.Row.DataItem;

       // Retrieve the state value for the current row. 
       String state = rowView["state"].ToString();

        //format color of the as below 
        if(state == "Closed")
                (e.Row.FindControl("lbl1") as Label).BackColor  = Color.Red;

        if(state == "Open")
                (e.Row.FindControl("lbl1") as Label).BackColor = Color.Green;

        if(state == "Waiting")
                (e.Row.FindControl("lbl1") as Label).BackColor = Color.Yellow;

   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:56:49.753

您必须在网格视图的 rowdatabound 事件中编写代码。例子：

```
private GridView1_RowDatabound(object sender,EventArgs e)
{
   if(e.Row.RowType == DataControlRowType.DataRow)
   {
     // You have to put your logic here. 
       if( e.Row.Cells[1].Text == "closed" ) 
       {
            // to get a reference to label control
           Label lb = e.Row.FindControl("LabelCOntrolID");

       }

   }               
} 
```

# javascript - 精确匹配 10 位未知边界的数字？

> ID：11420796
> 
> 赞同：0
> 
> 时间：2012-07-10T19:47:38.573
> 
> 标签：javascript, regex, node.js

我可以使用任何正则表达式来匹配正好 10 位数字的块吗？例如，我有这个：

```
/\d{10}(?!\d+)/g 
```

这`2154358383`在给定时匹配，但在给定时`2154358383`也匹配，这是我不想要的。`1213141516``12345678910111213141516`

我认为我需要的是一个后向断言（除了我已经在那里的前瞻之外），它检查以确保匹配之前的字符不是整数，但我不知道该怎么做。

我试过

```
/(?:[^\d]+)\d{10}(?!\d+)/g 
```

但这打破了我的第一场比赛`2154358383`，这很糟糕。

我怎样才能把它写成只匹配具有未知边界的 10 个整数组（不多也不少）？

我还应该注意，我正试图从一个更大的字符串中提取这些，所以`^`并且`$`是不可能的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:53:20.353

这应该有效：`([^\d]|^)\d{10}([^\d]|$)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T19:53:22.213

你能做类似的事情：

```
([^\d]|^)(\d{10})([^\d]|$) 
```

也就是说，字符串的开头还是一个非数字，十位数字，然后是字符串的结尾还是一个非数字。那应该可以解决您在上面寻找的情况。

您可以像这样使用正则表达式：

```
var regex = /([^\d]|^)(\d{10})([^\d]|$)/;
var match = regex.exec(s);
var digits = match[2]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:54:04.273

这应该匹配字符串开头 (the `^`) 或中间/结尾 (the`[^\d]`和`(?!\d)`在比赛中分组。

```
/(?:[^\d]|^)(\d{10})(?!\d)/g 
```

如果 JavaScript 正则表达式支持lookbehind，这将更容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T20:42:59.140

接下来呢？

```
perl -nle 'print if /(\b|\D)(\d{10})(\D|\b)/' <<EOF
123456789
x123456789
123456789x
1234567890
x1234567890
1234567890x
12345678901
x12345678901
x12345678901x
EOF 
```

只会打印

```
1234567890
x1234567890
1234567890x 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T19:50:00.690

试试这个

```
var re = /(?:^|[^\d])(\d{10})(?:$|[^\d])/g

re.exec ( "2154358383")
//["2154358383", "2154358383"]
re.exec ( "12345678910111213141516" )
//null
re.exec ( "abc1234567890def" )
//["c1234567890d", "1234567890"]

val = '1234567890 sdkjsdkjfsl 2234567890 323456789000 4234567890';
re.exec ( val )
//["1234567890 ", "1234567890"]
re.exec ( val )
//[" 2234567890 ", "2234567890"]
re.exec ( val )
//[" 4234567890", "4234567890"]
re.exec ( val )
//null 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T19:58:22.230

我知道你说“不 ^”，但如果你这样使用它也许没关系？：

```
rx = /(?:^|\D)(\d{10})(?!\d)/g 
```

这是一个快速测试：

```
> val = '1234567890 sdkjsdkjfsl 2234567890 323456789000 4234567890'
'1234567890 sdkjsdkjfsl 2234567890 323456789000 4234567890'
> rx.exec(val)[1]
'1234567890'
> rx.exec(val)[1]
'2234567890'
> rx.exec(val)[1]
'4234567890' 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-10T19:55:34.840

向后看很简单：

```
/(?<!\d)\d{10}(?!\d)/g 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-07-10T19:50:20.877

我会作弊并做类似的事情

```
if (myvar.toString().substring(1, 10) = "1234567890") .... 
```

:)

# actionscript-3 - 全局变量从级别收集分数然后显示在最后

> ID：11420797
> 
> 赞同：0
> 
> 时间：2012-07-10T19:47:45.593
> 
> 标签：actionscript-3, flash, global-variables

```
var scoreTotal:String = "Global"; //in the engine but not in the package

if (currentKey is Left && leftKey) //in each level to score points to score on stage and scoreTotal
{
    score += scoreBonus;
    scoreTotal += scoreBonus;
    currentKey.active = false;
}

public var score7:int = scoreTotal;// This is in the last level to print the score 
```

我收到错误 1120：访问未定义的属性 scoreTotal。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:46:54.167

使用全局变量不是一个好主意，AS3 中也没有这种东西。相反，而是创建一个`Score`类，其中包含与跟踪分数相关的任何内容。在您的主应用程序中保留此类的单个实例。然后使用事件和监听器来通知应用程序导致分数更新的游戏事件：

```
public class Score {
    private var total:int;
    private var levels:Array;

    public function addPoints ( level:int, points:int ) : void {
        total += points;
        levels[level] += points;
    }

    public function get scoreTotal() : int {
        return total;
    }

    public function getLevelScore( level:int ) : int {
        return levels[level];
    }

    public function Score(numLevels:int) : void {
        total = 0;
        levels = [];
        var i:int = -1;
        while( ++i < numLevels) levels[i] = 0;
    }
}

public class Main {
    private var score:Score = new Score( 7 );

    private var gameEngine:GameEngine;

    ....

    private function initGameScore() : void {
        gameEngine.addEventListener ( GameEvent.SCORE, onGameScore );
        gameEngine.addEventListener ( GameEvent.BONUS, onGameBonus );
    }

    private function onGameScore( ev:GameEvent ) : void {
        addPoints( ev.points );
    }

    ....
} 
```

当然，GameEvent 必须派生自`flash.events.Event`并包含一个 field `points:int`。每当发生任何值得评分的事情时，您都会从 GameEngine 发送这些。

那么，更高级的版本是保存事件和点的哈希表，并使实际的得分（即事件到点的映射）独立于 GameEngine 进行。

# c# - 确定是否未选中单选按钮

> ID：11420800
> 
> 赞同：0
> 
> 时间：2012-07-10T19:48:02.730
> 
> 标签：c#, winforms, radio-button, radiobuttonlist

表单上存在大量单选按钮。它们不在面板内，但在本例中，它们是表单上唯一的一组收音机。

初始化时，不会选择**任何**按钮。（很可能，这不是单选的正确实现，但它不在我的控制范围内；可以说，对于这个例子，表单必须以没有选择单选按钮开始。）

目前，我使用一个相当长的 if-else 语句来一次检查每个按钮，但我觉得必须有一种更简单的方法来立即确定是否没有检查任何按钮。除了按钮已经作为一个组工作，因为根据定义，最多强制选择 1 个。

**检测是否未选择单选按钮**的最佳做法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T19:54:37.253

您始终可以创建单选按钮的集合：

```
RadioButton[] radioButtons = new RadioButton[] { radioButton1, radioButton2 };

if (!radioButtons.Any(rb => rb.Checked))
    // No radio buttons are checked 
```

此外，使用这个类似的问题（[https://stackoverflow.com/questions/1797907](https://stackoverflow.com/questions/1797907/which-radio-button-in-the-group-is-checked)）作为参考，您可以执行以下操作：

```
if(!Controls.OfType<RadioButton>().Any(rb => rb.Checked))
    // No radio buttons are checked 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:55:51.060

我会猜测是这样的：

```
form.Controls.Where(x => x is RadioButton).Where(x => x.Selected == true).Count() 
```

或者，如果您将它们放在数组或某种列表中，则不必循环所有控件。

我想你可以通过以下方式加快速度：

```
form.Controls.Where(x => x is RadioButton && ((RadioButton)x).Selected == true).Count() 
```

# c++ - 跨文件的代码组织，必须处理模板函数和内联

> ID：11420802
> 
> 赞同：5
> 
> 时间：2012-07-10T19:48:18.027
> 
> 标签：c++, templates, compiler-construction, inline

我正在维护一个大型模板类库，这些模板类基于任一`float`或`double`类型执行代数计算。许多类都有访问器方法（getter 和 setter）和其他运行少量代码的函数，因此当编译器找到它们的定义时，这些函数需要被限定为内联。相比之下，其他成员函数包含复杂的代码，因此最好调用而不是内联。

函数定义的很大一部分位于标头中，实际上位于标头包含的 .inl 文件中。但是也有许多类的函数定义通过显式实例化而愉快地存在于 .cpp 文件中`float`和`double`，这在库的情况下是一件好事（[这里](https://stackoverflow.com/questions/2351148/explicit-instantiation)解释了原因）。最后，有相当多的类的函数定义在 .inl 文件（访问器方法）和 .cpp 文件（构造函数、析构函数和繁重的计算）中被破坏，这使得它们都很难维护。

只有当我知道一种可靠的方法来防止某些函数被内联时，我才会将我的所有类实现放在 .inl 文件中，或者如果`inline`关键字可以强烈建议编译器内联某些函数，则在 .cpp 文件中，当然，它才不是。我真的希望库中的所有函数定义都驻留在 .cpp 文件中，但是由于访问器方法在整个库中被广泛使用，我必须确保它们在被引用时被内联，而不是被调用。

因此，在这方面，我的问题是：

1.  标记模板函数的定义是否有意义`inline`，因为正如我最近在[这里](https://stackoverflow.com/questions/11416747/multiple-definitions-of-a-non-template-class-vs-a-template-class)了解到的那样，无论它是否标记为，编译器都会自动将其限定为内联`inline`？

2.  *最重要的是*，由于我希望将模板类的所有成员函数的定义聚集*在一个文件*中，无论是 .inl 还是 .cpp（在 .cpp 的情况下使用显式实例化），最好*仍然*能够提示编译器（MSVC 和 GCC）哪些函数应该被内联*，*哪些不应该被内联，确定模板函数是否可以实现这样的事情，*我该如何实现这一点，或者，*如果真的没有办法（我希望有)，*什么是最优化的折衷方案？*

## ----------

*EDIT1：*我知道该`inline`关键字只是对编译器内联函数的建议。

*EDIT2：*我真的知道。我喜欢向编译器提出建议。

*EDIT3：*我仍然知道。这不是问题所在。

## ----------

*鉴于一些新的信息，还有第三个问题与第二个问题并驾齐驱。*

*3.*如果编译器现在非常聪明，他们可以更好地选择应该内联哪个函数，应该调用哪个函数，*并且*能够生成链接时代码和链接时优化，这可以有效地让他们查看 .cpp -在链接时定位函数定义以决定其被内联或调用的命运，那么也许一个好的解决方案是将所有定义移动到相应的 .cpp 文件中？

## ----------

**那么结论是什么？**

首先，我感谢 Daniel Trebbien 和 Jonathan Wakely 的结构化和有根据的回答。两者都赞成，但只能选择一个。然而，没有一个给出的答案对我来说是一个可以接受的解决方案，所以选择的答案恰好是比其他人更能帮助我做出最终决定的答案，接下来会为感兴趣的人解释其细节。

好吧，由于我一直更重视代码的性能，而不是维护和开发的便利程度，在我看来，最可接受的折衷方案是移动每个访问器方法和其他轻量级成员函数将模板类放入相应标头包含的 .inl 文件中，用`inline`关键字标记这些函数，以尝试为编译器提供良好的提示（或为内联强制提供关键字），并将其余函数移动到相应的.cpp 文件。

将所有成员函数定义都放在 .cpp 文件中会阻碍轻量级函数的内联，同时释放链接时优化的一些问题，正如 Daniel Trebbien 为 MSVC（在较早的开发阶段）和 Jonathan Wakely 为 GCC 确定的那样（在目前的发展阶段）。并且将所有函数定义都放在头文件（或 .inl 文件）中并不会超过将每个类的实现分类到 .inl 和 .cpp 文件中以及该决定的额外副作用的总结好处：它将确保库的客户端只能看到原始访问器方法的代码，而二进制文件中隐藏了更多有趣的东西（确保这不是主要原因，但是对于任何熟悉软件库的人来说，这一点都很明显）。`inline`鼓励函数的内联状态（还不知道关键字应该在两个地方还是在这种特殊情况下只在一个地方）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T19:51:52.747

简而言之：将模板代码放在头文件中。如果优化器无法做出关于内联的正确决策，请使用编译器特定`forceinline`或关键字。`noinline`

* * *

您可以并且应该将模板成员的定义放入头文件中。这确保编译器在发现实际模板参数是什么时可以在使用点访问定义，并且能够执行隐式实例化。

关键字对模板的`inline`影响很小，因为模板函数已经免除了单一定义的要求（单一定义规则仍然要求所有定义都相同）。这是对编译器的提示，该函数应该被内联。您可以省略它作为提示编译器不要内联函数。所以就这样用吧。但是优化器仍然会考虑其他因素（函数大小）并在内联上做出自己的选择。

一些编译器有特殊的关键字，比如`__attribute__(always_inline)`or`__declspec(noinline)`来覆盖优化器的选择。

但是，大多数情况下，编译器足够聪明，不会内联“作为函数调用更有意义的复杂代码”。您不必担心它，只需让优化器完成它的工作即可。

可移植的内联控制没有好处，因为内联的权衡是非常特定于平台的。优化器应该已经意识到那些特定于平台的权衡，如果您确实需要覆盖编译器的选择，请在每个平台的基础上这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T12:51:04.870

> 1\. 用 inline 标记模板函数的定义是否有意义，因为正如我最近了解到的那样，无论它是否标记为 inline，编译器都会自动将其限定为 inline或不？行为是编译器特定的吗？

我认为您指的是在其类定义中定义的成员函数始终是*内联*函数的事实。这是根据 C++ 标准，自首次发布以来一直如此：

> **9.3 成员函数**
> 
> ...
> 
> 成员函数可以在其类定义中定义（8.4），在这种情况下，它是*内联*成员函数（7.1.2）

因此，在以下示例中，`template <typename FloatT> my_class<FloatT>::my_function()`始终是*内联*函数：

```
template <typename FloatT>
class my_class
{
public:
    void my_function() // `inline` member function
    {
        //...
    }
};

template <>
class my_class<double> // specialization for doubles
{
public:
    void my_function() // `inline` member function
    {
        //...
    }
}; 
```

但是，通过将 的定义移到 的定义`my_function()`之外`template <typename FloatT> my_class<FloatT>`，它不会自动成为*内联*函数：

```
template <typename FloatT>
class my_class
{
public:
    void my_function();
};

template <typename FloatT>
void my_class<FloatT>::my_function() // non-`inline` member function
{
    //...
}

template <>
void my_class<double>::my_function() // non-`inline` member function
{
    //...
} 
```

`inline`在后一个示例中，将说明符与定义一起使用确实有意义（例如，它不是多余的） ：

```
template <typename FloatT>
inline void my_class<FloatT>::my_function() // `inline` member function
{
    //...
}

template <>
inline void my_class<double>::my_function() // `inline` member function
{
    //...
} 
```

* * *

> 2\. 最重要的是，因为我希望将模板类的所有成员函数的定义聚集在一个文件中，无论是 .inl 还是 .cpp（在 .cpp 的情况下使用显式实例化），最好还是能够提示编译器（MSVC 和 GCC）哪些函数应该被内联，哪些函数不应该被内联，确定模板函数是否可以实现这样的事情，我该如何实现这一点，或者，如果真的没有办法（我希望有），什么是最优化的折衷方案？

如您所知，编译器可能会选择内联函数，无论它是否具有说明`inline`符；说明`inline`符只是一个提示。

没有强制内联或阻止内联的标准方法；但是，大多数 C++ 编译器都支持语法扩展来实现这一点。MSVC 支持一个[`__forceinline`](http://msdn.microsoft.com/en-US/library/z8y1yy88%28v=vs.100%29.aspx)关键字来强制内联并`#pragma auto_inline(off)`阻止它。G++ 支持[`always_inline`](http://gcc.gnu.org/onlinedocs/gcc-4.2.1/gcc/Inline.html)和`noinline`属性分别用于强制和阻止内联。您应该参考编译器的文档以获取详细信息，包括当编译器无法按要求内联函数时如何启用诊断。

如果您使用这些编译器扩展，那么您应该能够向编译器提示函数是否内联。

一般来说，我建议将所有“简单”的成员函数定义聚集在一个文件（通常是标题）中，我的意思是，如果成员函数不需要比定义所需的 s`#include`集更多的 s`#include`类/模板。有时，例如，成员函数定义将需要`#include <algorithm>`，但不太可能需要`<algorithm>`包含类定义才能进行定义。您的编译器能够跳过它不使用的函数定义，但是更多的`#include`s 会显着延长编译时间，而且您不太可能想要内联这些非“简单”函数。

* * *

> 3\. 如果编译器现在非常聪明，他们可以更好地选择应该内联哪个函数，应该调用哪个函数，并且能够生成链接时代码和链接时优化，这可以有效地让他们查看 .cpp -在链接时定位函数定义以决定其被内联或调用的命运，那么也许一个好的解决方案是将所有定义移动到相应的 .cpp 文件中？

如果您将所有函数定义都放入 CPP 文件中，那么您将依赖 LTO 进行大部分函数内联。这可能不是您想要的，原因如下：

1.  至少使用 MSVC 的 LTCG，您放弃了强制内联的能力（请参阅[inline、](http://msdn.microsoft.com/en-us/library/z8y1yy88.aspx) __inline、__forceinline 。）
2.  如果 CPP 文件链接到共享库，那么与共享库链接的程序将不会受益于库函数的 LTO 内联。这是因为编译器中间语言 (IL)（LTO 的输入）已被丢弃，并且在 DLL 或 SO 中不可用。
3.  如果[幕后：链接时代码生成](http://msdn.microsoft.com/en-us/magazine/cc301698.aspx)仍然正确，“无法优化对静态库中函数的调用”。
4.  链接器将执行所有内联，这可能比让编译器在编译时执行一些内联​​要慢得多。
5.  编译器的 LTO 实现可能存在导致它不内联某些函数的错误。
6.  使用 LTO 可能会对使用您的库的项目施加某些限制。例如，根据[Under The Hood: Link-time Code Generation](http://msdn.microsoft.com/en-us/magazine/cc301698.aspx)，“预编译头文件和 LTCG 不兼容”。/ LTCG [（链接时代码生成）](http://msdn.microsoft.com/en-us/library/xbf3tbeh.aspx) MSDN 页面有其他注释，例如“/LTCG 不适用于 /INCREMENTAL”。

如果您将可能内联的函数定义保留在头文件中，那么您可以*同时*使用编译器内联和 LTO。另一方面，将所有函数定义移动到 CPP 文件中会将编译器内联限制为仅在翻译单元内。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T23:28:51.307

1.  我不知道您从哪里了解到的，但是模板不是“无论是否标记为内联，编译器都会自动将其限定为内联”。模板和内联函数都具有有时称为“[模糊链接](http://gcc.gnu.org/onlinedocs/gcc/Vague-Linkage.html)”的东西，这意味着它们的定义可以存在于多个对象中而不会出错，并且链接器将使用其中一个定义并丢弃其他定义。但事实上模板和内联函数都有模糊的链接并不意味着模板是自动内联的。狮子和老虎都是大型猫科动物，但这并不意味着狮子是老虎。

2.  除非您事先知道您正在使用的所有实例化，否则您不能总是使用显式实例化，例如，如果您正在编写模板库供其他人使用，那么您无法提供所有显式实例化，因此您*必须*在`.h`（或`.inl`）代码用户可以使用的文件`#include`。如果您确实事先知道所有实例化，那么在`.cpp`文件中使用显式实例化具有缩短编译时间的优势，因为编译器仅在包含显式实例化的文件中实例化模板一次，而不是在使用它们的每个文件中。但这与内联无关。对于要内联的函数，其定义*必须*对调用它的代码可见，因此如果您只在文件中定义函数模板（或类模板的成员函数），`.cpp`那么它们不能在该文件中的任何地方内联。如果你在一个`.cpp`文件中定义它们并*限定*它们，`inline`那么你可能会在尝试从其他文件中调用它们时出现问题，这些文件看不到`inline`关键字（如果一个函数在一个翻译单元中声明为内联，则它必须在所有翻译单元中声明为内联它出现的翻译单元，[dcl.fct.spec]/4。）
    对于它的价值，我通常不费心使用`.inl`文件，我只是直接在`.h`文件，这样可以少处理一个文件。一切都在一个地方，而且它可以正常工作，所有使用模板的文件都可以看到定义并在需要时选择内联它们。在这种情况下，您仍然可以使用显式实例化来缩短编译时间并减少目标文件大小，而不会牺牲内联机会。

3.  为什么这比仅仅在它所属的标题中定义模板代码更好？你到底想达到什么目的？如果文件较少，请将模板代码放在头文件中，这将始终有效，编译器可以选择内联所有内容而不需要 LTO，并且每个类模板只有一个文件（并且您仍然可以使用显式实例化来缩短编译时间） . 如果您试图将所有代码移动到`.cpp`文件中（我认为您过于关注了），那么请继续执行。我认为这是一个坏主意，并且可能会导致问题（链接时优化仍然存在我尝试使用它的唯一编译器的问题，并且肯定不会使编译速度更快）但是如果这是您想要的，请执行任何漂浮你的船。

您的问题似乎围绕着这里的一个误解：

> 只有当我知道一种防止某些函数被内联的可靠方法时，我才会将我的所有类实现放在 .inl 文件中，

如果你所有的模板定义都在头文件中，你不需要“一种可靠的方法来防止某些函数被内联”......正如我上面所说，模板不会自动`inline`仅仅因为它们在标题中，如果他们' re 太大而无法内联编译器不会内联它们。第一个问题解决了。第二：

> 或者在 .cpp 文件中，如果 inline 关键字可以强烈建议编译器内联某些函数，当然，它不会，特别是如果标有 inline 的函数位于 .cpp 文件中。

正如我上面所说，文件中标记的函数`inline`格式`.cpp`错误，除非它也在标题中标记为内联，并且从未在任何其他`.cpp`文件中使用。所以这样做只会让生活变得困难，并可能导致链接器错误。何必。

同样，所有迹象都表明只需将模板定义放在标题中。您仍然可以使用显式实例化（正如`std::string`您链接到的帖子中提到的 GCC 所做的那样），这样您就可以两全其美了。它唯一没有实现的是对模板的用户隐藏实现，但无论如何这听起来不是你的目标，如果它提供非模板功能API，可以在模板方面实现一个`.cpp`文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T07:12:21.103

这不是一个完整的答案。

我读到 clang 和 llvm 能够进行非常全面的链接时间优化。这包括链接时间内联！要启用此功能，请在使用 clang++ 时使用优化级别 -O4 进行编译。目标文件将是 llvm 字节码而不是机器码。这就是使这成为可能的原因。因此，此功能应允许您将所有定义放在 cpp 文件中，并知道它们仍将在必要时内联。

顺便说一句，函数体的长度并不是决定它是否被内联的唯一因素。仅从一个位置调用的冗长函数可以很容易地在该位置内联。

# javascript - Dojo 中的动态内容单页应用

> ID：11420807
> 
> 赞同：1
> 
> 时间：2012-07-10T19:48:37.203
> 
> 标签：javascript, model-view-controller, dojo

基本上，它是这样的。我有一个非常结构化的 dojo 应用程序，使用 dojo 样板项目/模板（来自 Github）。我几乎完成了所有不同的模块以使我的应用程序成为它的样子（它有点像 cms）。因此，它是一个在某个区域动态呈现内容的单页应用程序。

我的 EntryPoint.html 看起来像这样：

```
<div style="height:100%;">
    <div
            data-dojo-type="dijit.layout.BorderContainer"
            data-dojo-attach-point = "appLayout"
            data-dojo-props="design: 'headline'"
            style="height:100%;">

        <div
                class="centerPanel"
                data-dojo-type="dijit.layout.ContentPane"
                data-dojo-props="region: 'center'">

                <button data-dojo-attach-point ="testButton" type="button" disabled="disabled">Click Me!</button>
            <div id="placeholder"></div>
        </div>
        <div
                class="edgePanel"
                data-dojo-type="dijit.layout.ContentPane"
                data-dojo-props="region: 'top'">Header content (top)
                <span class="test"></span>
            </div>
        <div
            id="leftCol" class="edgePanel"
            data-dojo-type="dijit.layout.ContentPane"
            data-dojo-props="region: 'left', splitter: true">

            <div id="administrationMenu" class="administrationMenu">
                <div class="administrationTitle"> Administration </div>
                <ul>
                    <li><img border="0" src="file:///C:/Users/Dev 2/Desktop/mpact-dojo-boilerplate/src/app/resources/img/silver-gray/user.png" alt="Pulpit rock" width="24" height="24"/><a href="#"> Users </a></li>
                    <li><img border="0" src="file:///C:/Users/Dev 2/Desktop/mpact-dojo-boilerplate/src/app/resources/img/silver-gray/email.png" alt="Pulpit rock" width="24" height="24"/><a href="#"> Emails </a></li>
                    <li><img border="0" src="file:///C:/Users/Dev 2/Desktop/mpact-dojo-boilerplate/src/app/resources/img/silver-gray/tools.png" alt="Pulpit rock" width="24" height="24"/><a href="#"> Settings </a></li>
                    <li><img border="0" src="file:///C:/Users/Dev 2/Desktop/mpact-dojo-boilerplate/src/app/resources/img/silver-gray/graph.png" alt="Pulpit rock" width="24" height="24"/><a href="#"> Logs </a></li>
                    <li><img border="0" src="file:///C:/Users/Dev 2/Desktop/mpact-dojo-boilerplate/src/app/resources/img/silver-gray/faq.png" alt="Pulpit rock" width="24" height="24"/><a href="#"> Help </a></li>
                </ul>
            </div>

            <div id="toolsMenu" class="toolsMenu">
                <div class="toolsTitle"> Managing tools </div>
                <ul>
                    <li><img border="0" src="file:///C:/Users/Dev 2/Desktop/mpact-dojo-boilerplate/src/app/resources/img/silver-gray/donwload.png" alt="Pulpit rock" width="24" height="24"/><a href="#"> Resources </a></li>
                    <li><img border="0" src="file:///C:/Users/Dev 2/Desktop/mpact-dojo-boilerplate/src/app/resources/img/silver-gray/play.png" alt="Pulpit rock" width="24" height="24"/><a href="#"> Playlists </a></li>
                    <li><img border="0" src="file:///C:/Users/Dev 2/Desktop/mpact-dojo-boilerplate/src/app/resources/img/silver-gray/clock.png" alt="Pulpit rock" width="24" height="24"/><a href="#"> Agenda </a></li>
                    <li><img border="0" src="file:///C:/Users/Dev 2/Desktop/mpact-dojo-boilerplate/src/app/resources/img/silver-gray/monitor.png" alt="Pulpit rock" width="24" height="24"/><a href="#"> Stations </a></li>
                </ul>
            </div>

        </div>
    </div>
</div> 
```

*我知道，我知道我的图像应该在 css 中，但我不是真正的设计师，我真的不喜欢创建/调整界面。

我的 EntryPoint.js：

```
define([
    "dojo/_base/declare",
    "dijit/_Widget",
    "dijit/_TemplatedMixin",
    "dijit/_WidgetsInTemplateMixin",

    "./ui/layout/GridLayout",

    "dojo/text!./ui/templates/EntryPoint.html",

    "dijit/layout/BorderContainer",
    "dijit/layout/TabContainer",
    "dijit/layout/ContentPane"
], function(
    declare,
    _Widget,
    _TemplatedMixin, 
    _WidgetsInTemplateMixin,

    GridLayout,
    template
){
    return declare([_Widget, _TemplatedMixin, _WidgetsInTemplateMixin], {

        templateString: template,

        constructor: function() {

        },

        postCreate: function() {
            //var gridLayout = new GridLayout({}, "placeholder");
            //gridLayout.placeAt("placeholder");
        }

    });
}); 
```

好的，所以我希望基本上能够点击我的各种列表（*AdministrationMenu*和*toolsMenu*）。因此，我的内容在*centerPanel*中加载/呈现。另外，我想在 url 中有我的点击项目。

用例场景：当我第一次加载我的应用程序时，它会加载主页。然后，如果我单击我的菜单项（例如设置），它会加载我的设置页面。并且 url 会变成这样： www.myapp.com/settings 。

谢谢你。

可能的解决方案：对于每个菜单，使用 data-dojo-attach-point 并指定一个名称。对每个使用 dojo.query("").connect 并从我的自定义代码（例如 new SettingsPage ）创建一个实例并将其呈现在我的 centerPanel ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:57:03.373

我有一个类似的设置，一个“列表”，将各种小部件加载到内容窗格中。底部链接的代码有点复杂，因为它具有加载微调器的功能，在卸载时检查 isdirty 并执行大量要求/垃圾收集..

最简单的情况是让 dijit.Tree 列出您的条目，例如使用如下 json 结构：

```
adminJson = { identifier:'url', items: [
     { url: 'admin/user', label: 'user' },
     { url: 'admin/email', label: 'email' }
]; 
```

在您的`Tree`, '链接' 这与特定的内容窗格 - 例如**centerPanel**。

```
tree.on("click", function (item) { // refer to paneRequested
   dijit.byId('centerPanel').set("href", this.model.store.getValue(item, 'url'));
}); 
```

使用树而不是`<li>`项目，您将获得一些选项，例如使用所有图标创建精灵表，然后使用 iconClass 设置正确的图标，例如：

```
<style>
.administrationListTree .dijitTreeNode .iconNode {
  background: url(.....app/resources/img/silver-gray/adminsprites.png) top left no-repeat transparent;
}
.administrationListTree .dijitTreeRow .iconNode.user { background-position: 0 0; }
.administrationListTree .dijitTreeRow .iconNode.email { background-position: -20px 0; }
</style>
<script>
new dijit.Tree({
   getIconClass: function(item, opened) {
      return item.label;
   }
});
</script> 
```

查看[https://github.com/mschr/oocms/blob/master/admin/include/application.js](https://github.com/mschr/oocms/blob/master/admin/include/application.js)了解一些额外的技巧，只需跳过 dtopic.publish("notify/progress/?") 和模块 = [?] 部分。
不过我有一种感觉，由于您使用的是“administrationMenu”名称，因此 unloadPane 之前的操作会很有趣。每个开关将要么 1) 调用 AbstractController.isDirty 或 2) 实施自定义检查 - 然后仅在用户允许或没有待处理的更改时卸载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:26:48.570

您可以使用 dojo.back 修改地址栏中的 url 并使浏览器后退/前进功能正常工作。

[http://dojotoolkit.org/reference-guide/1.7/dojo/back.html](http://dojotoolkit.org/reference-guide/1.7/dojo/back.html)

“设置页面”是从服务器加载的 html 页面，还是负责在浏览器上创建页面的 dojo 小部件？如果它是一个 html 页面，那么@mschr 给出的答案对你有用。

如果您希望“设置页面”成为一个小部件，那么您可以将中心面板设置为`dijit.StackContainer`. 选择菜单项时，创建适当的子小部件并将其添加到`StackContainer`后台调用服务器以获取必要的 json 数据。

[http://dojotoolkit.org/reference-guide/1.7/dijit/layout/StackContainer.html](http://dojotoolkit.org/reference-guide/1.7/dijit/layout/StackContainer.html)

# ide - 在 Lazarus ide 中启用 sqlite？

> ID：11420815
> 
> 赞同：0
> 
> 时间：2012-07-10T19:49:14.680
> 
> 标签：ide, sqlite, 64-bit, lazarus

我在 Windows 7 x64 上有 Lazarus IDE 1.1 (FPC 2.6.1) x64。

当我进入“包”，然后“安装/删除包”时，在“不安装”中，我可以选择“sqlite3laz 0.4”并将其移动到“安装”列中。然后我按“保存并重新编译 IDE”。它编译了一段时间然后告诉我：

> C:\lazarus\components\sqlite\registersqlite3.pas(1,1) 致命：找不到 registersqlite3 使用的单元 sqlite3ds

我怎样才能解决这个问题？谢谢！

**编辑**

`sqlite3ds.pas`虽然在`C:\lazarus\fpc\2.6.1\source\packages\fcl-db\src\sqlite`...

**编辑**

发现：[http](http://www.lazarus.freepascal.org/index.php/topic,12930.msg87799.html#msg87799)
://www.lazarus.freepascal.org/index.php/topic,12930.msg87799.html#msg87799我会尝试32位版本...

**编辑**

适用于 32 位版本。我可以让它与 64 位版本一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:34:47.253

Lazarus 真的在使用 2.6.1 吗？如果 lazarus 仍在使用 2.6.0，则可能不会搜索包含 2.6.1 预编译单元的目录。

请注意，您提到的路径是源路径，而 Lazarus 通常使用预编译 (ppu,o) 格式的 FPC 单元。源仅在正确配置时用于调试（源路径），从不被编译器搜索（单元路径）

# python - 如何在 Flask 的页面上显示小部件？

> ID：11420823
> 
> 赞同：3
> 
> 时间：2012-07-10T19:50:14.527
> 
> 标签：python, templates, flask, widget, jinja2

如何在网站上创建小部件，例如登录表单、动态菜单（从数据库中获取的项目）、网站统计信息？

我知道您可以渲染一个从基本模板扩展出来的模板。在基本模板中，您可以创建这些小部件。

但我不知道如何将逻辑从基本模板移动到我的代码中。例如，块的选择数据。这样的操作当然可以在模板中完成，但在我看来这将是一个糟糕的方法。

对不起，我的英语不好。如果你不能理解，我会尝试改写。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T20:43:02.420

您将使用一个名为[WTForms](http://wtforms.simplecodes.com/docs/1.0.1/)的 python 库。它可以帮助您编写代码以创建由数据库支持的表单和其他小部件，您可以使用 jinja2 模板呈现这些小部件。

```
 class YourForm(Form):
         your_field1 = TextField()
         ....
         your_fieldn = SubmitField()

   @app.route('/')
   def view():
       form=YourForm()
       return render_template('your.html', form=form)

   In your.html
   <form >
     {{ form.your_field1 }}
     ....
     {{ form.your_fieldn }}
   </form> 
```

查看此烧瓶模式以进行[表单验证和渲染](http://flask.pocoo.org/docs/patterns/wtforms/)以了解更多信息。

编辑：要创建可用于所有模板的全局变量，有两种方法：

1.  您可以使用[jinja environment 的全局字典](http://jinja.pocoo.org/docs/api/#the-global-namespace)。这是代码：

    ```
     app.jinja_env.globals.update({'variable':1}) 
    ```

2.  您可以使用[ContextProcessor](http://flask.pocoo.org/docs/templating/#context-processors)。代码：

    ```
    @app.context_processor
    def inject_variable():
        return dict(variable=1) 
    ```

现在您可以`variable`在应用程序的任何模板中访问。

# wordpress - WP-PAGINATE 的 Wordpress 分页 url 404 错误

> ID：11420827
> 
> 赞同：1
> 
> 时间：2012-07-10T19:50:24.003
> 
> 标签：wordpress

有谁知道为什么 Wordpress Multisite 的 WP-PAGINATE 插件在页码和上一个/下一个箭头的链接中重复一个站点的主页 url？该页面是默认帖子页面，不使用自定义帖子。该插件的所有分页链接都生成 404。我尝试更新永久链接。

以下是它提供的 URL 示例： [http ://www.site.com/a_site_name/a_site_name/page/2](http://www.site.com/a_site_name/a_site_name/page/2)

应该是： [http ://www.site.com/a_site_name/page/2](http://www.site.com/a_site_name/page/2)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T08:58:15.493

我知道这篇文章有点旧......但是如果它对某人有所帮助，那就太好了。我尝试使用 WP Paginate 插件，但它并没有为我做杰克，所以我选择了这个替代方案，它为我解决了所有问题。

**HTML/PHP：**

```
<?php
    //Fix homepage pagination
    if ( get_query_var('paged') ) { $paged = get_query_var('paged'); } else if ( get_query_var('page') ) {$paged = get_query_var('page'); } else {$paged = 1; }

    $temp = $wp_query;  // re-sets query
    $wp_query = null;   // re-sets query
    $args = array( 'post_type' => array('assignment', 'student-post'), 'orderby' => 'date', 'order' => 'DESC','posts_per_page' => 15, 'paged' => $paged);
    $wp_query = new WP_Query();
    $wp_query->query( $args );
    while ($wp_query->have_posts()) : $wp_query->the_post(); 
?> 
```

这允许做几件事。一种是检查您是在主页、页面还是单身，然后告诉 $paged 变量如何依次做出反应。它还允许您使用自定义帖子类型查询您的分页。此外，通过不使用 query_post，您可以避免使用它时有时会遇到的一些非常时髦的东西。

**在你的functions.php里面**

```
function paginate() {
global $wp_query, $wp_rewrite;
$wp_query->query_vars['paged'] > 1 ? $current = $wp_query->query_vars['paged'] : $current = 1;

$pagination = array(
    'base' => @add_query_arg('page','%#%'),
    'format' => '',
    'total' => $wp_query->max_num_pages,
    'current' => $current,
    'show_all' => true,
    'type' => 'list',
    'next_text' => '&raquo;',
    'prev_text' => '&laquo;'
    );

if( $wp_rewrite->using_permalinks() )
    if ( is_home() ) {
        //fixes index.php weird error on how it displays the pagination URL which causes errors only on index.php
        $pagination['base'] = user_trailingslashit( trailingslashit( remove_query_arg( 's', get_pagenum_link( 1 ) ) ) . '?page=%#%/', 'paged' );
    } else {
        $pagination['base'] = user_trailingslashit( trailingslashit( remove_query_arg( 's', get_pagenum_link( 1 ) ) ) . 'page/%#%/', 'paged' );
    }
if( !empty($wp_query->query_vars['s']) )
    $pagination['add_args'] = array( 's' => get_query_var( 's' ) );

echo paginate_links( $pagination );
} 
```

这最初来自[http://bavotasan.com/2011/simple-pagination-for-wordpress/](http://bavotasan.com/2011/simple-pagination-for-wordpress/)我稍微修改它以使分页在主页上工作。

这又做了几件事。它对您的页面进行分页，每个页面都有自己的链接（我觉得这很好），它还重写了 URL 以允许漂亮的永久链接。出于某种原因，wordpress 在 index.php 上提供了 404 页面，所以我更改了 'page/%#%/', 'paged' ); 到 '?page=%#%/', 'paged' ); 并将其包装在 is_home() 的条件中。这解决了我的分页和漂亮的永久链接问题。

**可选的分页样式**

```
ul.page-numbers {
    margin: 20px 0 10px;
    width: 100%;
    padding: 0;
    font-size: 12px;
    line-height: normal;
    clear: both;
    float: left;
}

ul.page-numbers li {
       float: left;
    }

ul.page-numbers a,
ul.page-numbers span {
    border-radius: 3px;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    background: -webkit-gradient(linear, left top, left bottom, from(#E4E3E3), to(#FFFFFF));
    background: -moz-linear-gradient(top,  #E4E3E3,  #FFFFFF);
    filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#E4E3E3', endColorstr='#FFFFFF');
    padding: 3px 4px 2px 4px; 
    margin: 2px;
    text-decoration: none;
    border: 1px solid #ccc;
    color: #666;
}

ul.page-numbers a:hover,
ul.page-numbers span.current {  
    border: 1px solid #666;
    color: #444;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:08:10.427

为了解决这个问题，我所做的是打开 wp-includes/link-template.php 并注释掉第 1389 行，将其替换为以下内容：

```
//$home_root = preg_quote( trailingslashit( $home_root ), '|' );
$home_root = preg_quote( $home_root, '|' ); 
```

（使用的 Wordpress 版本是 3.3.1）

# android - 使用 Android 支持库的简单方法？

> ID：11420833
> 
> 赞同：0
> 
> 时间：2012-07-10T19:50:52.863
> 
> 标签：android

我有一个为 API 11 及更高版本编写的项目，我也不需要它可用于 2.3.3 OS 设备，因此需要使用支持库。最简单的方法是什么？例如，我知道有些方法有不同的名称`Fragments`。可以使用“查找并替换所有”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:55:33.293

在大多数情况下，是的，这将是可能的。您还必须比您想象的要少改变，例如`Fragment`课程很好。

您将不得不更改`getFragmentManager`为`getSupportFragmentManager`，以及将您的基础更改`Activity`为`FragmentActivity`。这些是我脑海中最常见的两个。

最简单的方法是将目标更改为 2.2，将 support-package 添加为库，看看有什么问题，然后修复它——一旦你有了替换修复，你可以使用 find 和 replace all 来修复问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:59:15.203

> 可以使用“查找并替换所有”吗？

就我而言，做一个简单的“查找并替换所有”从来都不是一个好主意……犯错太容易了。

> 进行过渡的最简单方法是什么？

更改非常简单，根本不需要您更改构建目标（当然，假设您的目标是 Android 1.6 或更高版本）。您必须做出的主要改变是：

1.  对于`Activity`使用支持库的每一个，请`FragmentActivity`改为扩展它。

2.  在每个`FragmentActivity`中，将所有调用替换`getLoaderManager()`为`getSupportLoaderManager()`。

3.  在每个中，替换所有对to 的`FragmentActivity`调用。`getFragmentManager()``getSupportFragmentManager()`

4.  将所有相关`android.*`的导入替换为其相应的`support.v4.*`导入语句。

# android - 在 Android 应用商店中注册或声明应用名称

> ID：11420834
> 
> 赞同：2
> 
> 时间：2012-07-10T19:50:59.923
> 
> 标签：android, ios, app-store, google-play

在开发 iOS 应用程序时，可以通过在 iTunesConnect 中创建条目并提供占位符描述和屏幕截图来注册或声明应用程序名称。**安卓应用商店有类似的流程吗？**

我对抢占应用程序名称不感兴趣。我只是将一个 iOS 应用程序移植到 Android 上，我想要一个相同的应用程序名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T20:00:40.400

我认为 android 生态系统中没有等价物。以下是一些可能无法保证名称的建议，但在某些方面可能会有所帮助。

1) 您可以使用正确的包名称（如 com.company.appname）发布一个最低限度的应用程序。但我认为实际的应用程序名称部分仍然很开放。

2) 另一种方法可能是为您的应用购买 .com 域（如果它仍然可用）。这听起来可能有些牵强，但我相信（我可能错了）人们会考虑到这一点，以避免陷入商标和版权问题。如果您的应用程序足以在多个平台上发布，那么购买域名是有意义的。

# android - Android checkCallingOrSelfPermission 未正确返回

> ID：11420845
> 
> 赞同：5
> 
> 时间：2012-07-10T19:51:15.377
> 
> 标签：android, permissions

我正在编写一项服务，该服务需要查看其调用者是否拥有特定的私人权限。我不想阻止没有此权限的呼叫者，我只想知道状态以便我做出相应的反应。看起来 Context 方法`checkCallingPermission()`非常适合我的需要，如果调用者具有指定的权限，则返回 0，否则返回 -1。我发现 -1 在所有情况下都会返回。

我写了一个测试用例（使用从系统`checkCallingOrSelfPermission()`中提取我的包的类似方法`PackageInfo`，枚举我的每个权限（只有一个请求包），并显示结果`checkCallingOrSelfPermission()`。因为在这种情况下我要检查的权限正是我持有的权限，我希望`checkCallingOrSelfPermission()`只返回 0（PackageManager.PERMISSION_GRANTED）......购买它只返回 -1（PackageManager.PERMISSION_DENIED）。

我已经检查过了，在 4.0 模拟器和 2.3 设备上都收到了相同的结果。

知道我做错了什么导致这些调用失败吗？

我的测试清单包括：

```
<permission
    android:protectionLevel="signatureOrSystem"
    android:name="abcd" />
<uses-permission android:name="abcd" /> 
```

我的测试活动代码是：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    PackageManager pm = getPackageManager();
    try {
        PackageInfo pi = pm.getPackageInfo("com.test.check", PackageManager.GET_PERMISSIONS);
        if ((null == pi.requestedPermissions) ||
            (pi.requestedPermissions.length == 0)) {
            Log.d("CHECK", "Package has NO permissions!");
            finish();
            return;
        }

        for (int i = 0; i < pi.requestedPermissions.length; ++i) {
            Log.d("CHECK", pi.requestedPermissions[i] + " " + checkCallingOrSelfPermission(pi.requestedPermissions[i]));
        }
    } catch (NameNotFoundException e) {
        Log.d("CHECK", "Package name is wrong!");
    }

    finish();
} 
```

我的测试结果是：

```
D/CHECK   ( 3600): abcd -1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T15:21:16.870

我无法在需要检查权限的服务范围内解决此问题，但我找到了该服务的解决方法（以及我的测试用例中的问题）。

我的测试用例失败了，因为我创建和检查的权限“abcd”被 Android 在 <permission> 条目中重命名，但是 Android 未能在 <uses-permission> 条目中同样重命名它。它被重命名为在其前面加上我的包名称（如果我提供的名称中包含句点，则不会发生这种重命名，例如“test.abcd”）。

尽管更改权限名称修复了我的测试用例，但我在服务中的实际案例已经使用了完全限定的权限名称并且`checkCallingPermission()`继续失败。然而，我发现 PackageManager 的`checkPermission()`方法确实按预期工作（以我需要检索调用者包的名称为代价）。

总而言之，以下内容无法正常工作（尽管我不知道为什么）：

```
boolean permission = (PackageManager.PERMISSION_GRANTED == checkCallingPermission(PERMISSION_NAME)); 
```

虽然这似乎工作正常：

```
PackageManager pm = getPackageManager();
boolean permission = (PackageManager.PERMISSION_GRANTED == pm.checkPermission(PERMISSION_NAME, pm.getNameForUid(getCallingUid()))); 
```

# javascript - 我在 HTML5 中录制音频的代码有什么问题？

> ID：11420846
> 
> 赞同：2
> 
> 时间：2012-07-10T19:51:19.483
> 
> 标签：javascript, html, audio, web-audio-api, webrtc

我正在尝试使用最新的 Chrome beta（版本 21.0.1180.15）通过麦克风录制音频。似乎现在几乎所有要做的事情都在 Chrome beta 中实现了。我什至可以使用麦克风。虽然我无法将流与`audio`元素连接起来。但据我了解，如果没有错误，它应该可以工作。

`createMediaStreamSource()`尚未实施。作为一种解决方法，我想使用`createMediaElementSource()`通过静音`audio`元素路由来自麦克风的音频。

使用下面的代码，我在控制台中收到以下两条错误消息之一：

> GET blob:file%3A///625fd498-f427-43d5-959b-3b49c6d53ab5 404（未找到）

或者

> 不允许加载本地资源：blob:null/8df582cc-b663-489b-bf49-1785226fc7b7

错误是由这一行引起的：

```
audio.src = window.webkitURL.createObjectURL(stream) 
```

这条线有问题吗？如何将流连接到`audio`元素源？还是 Chrome 中的一个错误导致无法创建对象 URL？

## 代码：

```
var context = null;
var elementSource = null;

function onError(e) {
  if (e.code == 1) {
    alert('User denied access to their camera');
  } else {
    alert('getUserMedia() not supported by your browser');
  }
}

window.addEventListener('load', initAudio, false);
function initAudio() {
  navigator.webkitGetUserMedia({audio:true}, function (stream) {
    var audio = document.querySelector('#basic-stream');
    audio.src = window.webkitURL.createObjectURL(stream);
    audio.controls = true;
    context = new webkitAudioContext();
    elementSource = context.createMediaElementSource(audio);
    elementSource.connect(context.destination);
  }, onError);
}
```

```
<div>
    audio id="basic-stream" class="audiostream" autoplay muted></audio>
</div>
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:14:18.003

如果不是绝对必要，请不要重新发明方轮：[https ://github.com/mattdiamond/Recorderjs](https://github.com/mattdiamond/Recorderjs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:26:35.083

我不确定这是否相关，但关于 getUserMedia() 与音频存在一个悬而未决的问题。

[http://code.google.com/p/chromium/issues/detail?id=112367](http://code.google.com/p/chromium/issues/detail?id=112367)

# javascript - document.ready() 的 jQuery 异常 - 对象不支持此属性或方法

> ID：11420848
> 
> 赞同：2
> 
> 时间：2012-07-10T19:51:37.973
> 
> 标签：javascript, jquery, asp.net-mvc

我正在尝试执行一些简单的验证，并且我正在按照*JavaScript & jQuery, The Missing Manual*书中的一些说明进行操作。我的代码就是这样的：

```
<script src="~/Scripts/jquery-1.6.2.js"></script>
<script src="~/Scripts/jquery.validate.js"></script>

<form> form code here </form>

<script>
    $(document).ready(function() {
        $('#vaporizerForm').validate();
    });
</script> 
```

我收到了这个错误：

> /Scripts/jquery-1.6.2.js 中第 1039 行第 15 列的未处理异常
> 
> 0x800a01b6 - Microsoft JScript 运行时错误：对象不支持此属性或方法

如果我删除 $(document).ready 部分，然后这样做，它会起作用：

```
<script>
        $('#vaporizerForm').validate();
</script> 
```

知道为什么 $(document).ready() 部分不起作用吗？

**编辑——jQuery 调用堆栈和代码**

![在此处输入图像描述](../Images/920dfd4c286863e97e8222d9325ac3d6.png)

![在此处输入图像描述](../Images/e728adeb9d91a001add190361a09e043.png)

![在此处输入图像描述](../Images/daa1fb4457d7f259ff4d85dc8435e2b7.png)

![在此处输入图像描述](../Images/506a46e08b5c183cfdb0ac1a543b6e62.png)

**编辑 - 视图中的整个代码**

```
@model IEnumerable<DistributorManagement.Models.Vaporizer>

@{
    ViewBag.Title = "Vaporizer";
}
@{
    var grid = new @WebGrid(
        source: Model,
        rowsPerPage: 10);
}

<script src="~/Scripts/jquery-1.6.2.js" type="text/javascript"></script>
<script src="~/Scripts/jquery.validate.js" type="text/javascript"></script>

<script>
    $(document).ready(function () {
        $('#vaporizerForm').validate();
    });
</script>

<form action="#" method="post" name="vaporizerForm" id="vaporizerForm">
    <div>
        <label>Manufacturer</label>
        <input name="manufacturer" type="text" class="required" />

        <label>BuildDate</label>
        <input name="buildDate" type="text" class="required date" />

        <label>Rating</label>
        <input name="rating" type="text" class="required number" />
    </div>
    <div>
        <input type="submit" name="submit" value="Submit" />
    </div>
</form>

<br />
<h1>Vaporizer Info</h1>
<div class="webgrid-wrapper">
    <div id="grid">
        @grid.GetHtml(
            tableStyle: "webgrid",
            headerStyle: "webgrid-header",
            footerStyle: "webgrid-footer",
            alternatingRowStyle: "webgrid-alternating-rows",
            columns: grid.Columns(
                grid.Column("Id", "ID"),
                grid.Column("Manufacturer"),
                grid.Column("Status"),
                grid.Column("BuildDate", "Build Date"),
                grid.Column("Rating")))
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T20:56:28.597

我会去寻找明显的答案，你确定文件没问题`~/Scripts/jQuery/jquery.validate.js`吗？它的行为就像该文件是空的或损坏的。

要检查文件是否正常，请导航到该目录观察文件并在编辑器中打开它，它是否有任何内容。

如果您取出文档准备好的东西，您可能需要以下代码才能看到错误：

```
 try {
   $('#vaporizerForm').validate();
 }
 catch ()  {
   alert('still have error');
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:23:21.193

Put your validation script before the `<form>`.

```
<script src="~/Scripts/jquery-1.6.2.js"></script>
<script src="~/Scripts/jquery.validate.js"></script>
<script>
  $(document).ready(function(){
    $('#vaporizeForm').validate();
  });
</script>

<form> form code here </form> 
```

[Here](http://jsfiddle.net/H5p8E/) is a fiddle as an example.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:59:06.537

试试这个：

```
<script type="text/javascript" src="~/Scripts/jquery.validate.js"></script> 
```

**-- 已编辑 --**

并将 $(document).ready(.......) 放在页面底部。

当您的页面太长时，某些版本的 IE 会发生这种情况.... 将其放在正文之前！

# templates - Backbone Collections 和 Handlebars 各

> ID：11420849
> 
> 赞同：1
> 
> 时间：2012-07-10T19:51:37.933
> 
> 标签：templates, coffeescript, each, handlebars.js

我将一个名为 rowCollectionTest 的集合传递给车把模板，我认为存在语法问题。

我的车把模板上写着：

```
`<table id = "tableId" width= "600px" border + 1">
     {{#each row}}
     <tr>
        <td> {{ this.car }} <td>
        <td> {{ this.beans }} <td>
        <td> {{ this.exercise }} <td> 
        <td> {{ this.iron }} <td>
     </tr>` 
```

我正在传递一个 rowCollectionTest，它是两行的集合（看看我是否可以完成这项工作）。

传递我所做的值

```
@$el.find("#searchContainerId").append(Handlebars.templates["resultsPage"](
    row: rowCollectionTest
)} 
```

我的模板文件中出现错误，因此我怀疑那里存在语法错误。这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T20:07:22.897

你必须关闭`{{#each}}`，你应该关闭你的桌子。另外，`border + 1`这不是一个有效的 HTML 属性，我想你想要`border=1`：

```
<table id = "tableId" width="600px" border="1">
  {{#each row}}
  <tr>
    <td> {{ this.car }} </td>
    <td> {{ this.beans }} </td>
    <td> {{ this.exercise }} </td> 
    <td> {{ this.iron }} </td>
  </tr>
  {{/each}}
</table> 
```

我还修复了你的结束`</td>`标签。

演示：http: [//jsfiddle.net/ambiguous/Ha6du/](http://jsfiddle.net/ambiguous/Ha6du/)

# css - 在使用窗口构建器定位文本框和其他 gwt 小部件后，我们如何使用 css 定位它们

> ID：11420856
> 
> 赞同：0
> 
> 时间：2012-07-10T19:52:23.823
> 
> 标签：css, gwt

我是 GWT 的新手，我正在尝试将样式应用于我使用 CSS 创建的页面在使用窗口构建器定位文本框和其他 gwt 小部件之后，我们如何使用 CSS 定位它们。我尝试使用相对定位，但文本框与我使用窗口构建器拖放的标签重叠。请建议我如何在不重叠的情况下设计它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:02:24.413

[您必须在运行时更改它们的样式属性：您在使用 UiBinder](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Hello_Stylish_World)的声明式布局中有一个很好的起点。

使用 @UiField 注释的对象是小部件，您可以像[这样](http://blog.francoismaillet.com/?p=68)操作。

# jquery - 在 Javascript / jQuery 中将纯 JSON 内容打印到 html 页面

> ID：11420857
> 
> 赞同：5
> 
> 时间：2012-07-10T19:52:25.857
> 
> 标签：jquery, json

在以 JSON 文件的形式获得 HTTP 响应后，如何使用 jQuery 处理其纯内容？

我以前做过，但我现在不知道怎么做。

我正在使用这个函数来检索 JSON 内容。

```
var json = $.getJSON("test.json",  
   function(response){
           // do stuff
       }
); 
```

当然，我可以处理 JSON 中包含的数据，但我想处理和打印它的纯内容，如下所示：

```
{"name": "Pepe","age" : "20"} 
```

以下

```
alert(response); 
```

只是给我[对象对象]

还有这个

```
alert(jQuery.parseJSON(json)); 
```

只是给我空

我似乎无法在任何地方找到答案。我对这一切都很陌生，所以我一定使用了错误的搜索词，因为它看起来是一件微不足道的事情。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T19:55:56.467

`JSON.stringify`可能是你想要的。[MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-10T20:05:50.433

回调[`$.getJSON`](http://api.jquery.com/jQuery.getJSON/)实际上有 3 个参数。 `data`,`textStatus`和`jqXHR`.

该[`jqXHR`](http://api.jquery.com/jQuery.ajax/#jqXHR)对象包含一个`responseText`包含原始 JSON 字符串的属性。

```
var json = $.getJSON("test.json",  
   function(response, status, jqXHR){
           // do stuff
           console.log(jqXHR.responseText);
       }
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:54:47.637

与其使用警报查看输出，不如使用控制台，然后使用 John Resig 的解决方案来记录此类数据？

```
// usage: log('inside coolFunc',this,arguments);
// http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/
window.log = function(){
  log.history = log.history || [];   // store logs to an array for reference
  log.history.push(arguments);
  if(this.console){
    console.log( Array.prototype.slice.call(arguments) );
  }
}; 
```

进而：

```
window.log(response); 
```

取自： http: [//paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/](http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/)

# appharbor - 使用 AppHarbor 和 CloudAMQP 在云中进行 MT

> ID：11420860
> 
> 赞同：4
> 
> 时间：2012-07-10T19:52:30.250
> 
> 标签：appharbor, masstransit, cloudamqp

有人成功让 MassTransit 与 AppHarbor 和 CloudAMQP 合作吗？

我对它感到很厌烦。

我让发布者（网站）发送消息，但服务器（后台工作人员）似乎没有接收它们。

我担心的一件事是 MT 需要 rabbitmq 方案，而 CloudAMQP 将方案设置为 amqp。

我在配置总线时正在交换方案（从 amqp 到 rabbitmq），并注意到消息地址中的方案是 rabbitmq，这是有道理的，因为我替换了它们。但我想知道他们是否必须是 amqp 才能让服务器接他们？

这是我发送的一条简单消息，它到达了 RabbitMQ，但服务器没有接收到它。

```
message_id: 08cf2cbc-5b4f-14dd-1231-381f8b520000
delivery_mode:  2
headers:    
Content-Type:   application/vnd.masstransit+json
Payload
614 bytes
Encoding: string
{

  "destinationAddress": "rabbitmq://98eabe2a-aae8-464c-8555-855518dd87d0_apphb.com:*********@lemur.cloudamqp.com/98eabe2a-aae8-464c-8555-855518dd87d0_apphb.com/Messages.Product:ProductCreatedEvent",

  "headers": {},

  "message": {

    "id": "dd6ecfaa-60d2-4cd4-8cd6-a08a00e872fb"

  },

  "messageType": [

    "urn:message:Messages.Product:ProductCreatedEvent"

  ],

  "retryCount": 0,

  "sourceAddress": "rabbitmq://98eabe2a-aae8-464c-8555-855518dd87d0_apphb.com:**********@lemur.cloudamqp.com/98eabe2a-aae8-464c-8555-855518dd87d0_apphb.com/enterprise_web"

} 
```

谢谢，乔

编辑：感谢卡尔指出网址中的密码

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T17:10:10.543

**编辑**：为了让其他人考虑将 MassTransit 与 CloudAMQP 一起使用，您可能需要查看 EasyNetQ。没有从大众运输中拿走任何东西，这是一个伟大的项目。将它与 CloudAMQP 等每月收取数据使用费的服务一起使用时的问题是，MassTransit 使用轮询来检查消息，而不是订阅它们（至少在我使用的上一个版本 2.1.1 中）。即使您可能没有发布消息，此轮询也会消耗您的数据使用量。

那么这实际上是可能的。

来发现，这都是appharbor上后台worker的配置的一部分。

一旦解决了这个问题，后台工作人员就开始保持“活跃”并使用消息。问题围绕 app.config 与 myworker.exe.config 和配置转换展开。一旦我意识到这是一个配置问题，这个链接就会有所帮助。[appharbor 后台工作人员的 App.config 转换](https://stackoverflow.com/questions/10078835/app-config-transformation-for-appharbor-background-workers)

您必须将 amqp 方案换成 rabbitmq，但这还不错。这是后台工作人员的总线配置：

```
log.Info("Configuring MassTransit");
var rabbitUrl = ConfigurationManager.AppSettings["CLOUDAMQP_URL"];

var bus = ServiceBusFactory.New(sbc =>
{
    // configure for log4net
    sbc.UseLog4Net();

    // configure the bus
    sbc.UseRabbitMq();
    sbc.UseRabbitMqRouting();
    sbc.ReceiveFrom(String.Format("{0}/server", rabbitUrl.Replace("amqp://", "rabbitmq://"))); // need to swap the scheme for masstransit

    // finds all the consumers in the container and register them with the bus
    sbc.Subscribe(x => x.LoadFrom(container));

    sbc.BeforeConsumingMessage(() =>
    {
        var session = container.GetInstance<ISessionFactory>().OpenSession();
        CurrentSessionContext.Bind(session);
    });

    sbc.AfterConsumingMessage(() =>
    {
        var sessionFactory = container.GetInstance<ISessionFactory>();
        if (CurrentSessionContext.HasBind(sessionFactory) == false) return;

        var session = CurrentSessionContext.Unbind(sessionFactory);
        if (session != null)
        {
            session.Dispose();
        }
    });

    var results = sbc.Validate();
    if (results.Any())
    {
        throw new Exception("MassTransit may not be setup correctly. Review validate results");
    }
});

// finally inject the bus into the container
container.Inject(bus); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:53:03.397

我不知道邮件中有任何人这样做。祝你好运，如果你能正常工作，请向[邮件列表报告。](http://groups.google.com/forum/#!forum/masstransit-discuss)

MT 使用的协议`rabbitmq`来确定要使用的传输。

[根据RabbitMQ 连接器](http://www.rabbitmq.com/releases/rabbitmq-dotnet-client/v2.8.4/rabbitmq-dotnet-client-2.8.4-user-guide.pdf)的 .NET 文档，它应该使用该`amqp`协议。所以这不应该是问题；但是您可以从其他地方连接到实例吗？

# html - 添加自定义属性

> ID：11420862
> 
> 赞同：4
> 
> 时间：2012-07-10T19:52:38.260
> 
> 标签：html, attributes, custom-attributes, custom-data-attribute

在我正在创建的一个相当复杂的 HTML5 webapp 中，我发现向一些文档元素添加一些自定义属性很方便。使用 jQuery，我发现我可以毫无问题地检索这些属性——到目前为止，在 Chrome、Safari 和 Firefox 中，我希望也在 Android/iPhone 移动浏览器上。

问题 - 是这样的用法，注入自定义属性，好的还是我会打破一些东西。为了让事情进入上下文，我使用 jQuery Mobile，带有 jQ​​uery 和一些 jQuery 插件。

在相关说明中，我假设可以使用 jQuery 检索具有指定属性的所有元素？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T20:00:39.790

我建议不要使用自定义属性，而是使用 data attributes ，您可以在[HTML5 Doctor Website](http://html5doctor.com/html5-custom-data-attributes/)上阅读。

本质上，您可以为元素提供以 为前缀的自定义属性`data-`，并且您可以使用 jQuery 读取/设置这些属性。这是一个例子：

**HTML5 片段：**

```
<p id="porky" data-food="bacon">Porky was a tasty little piggy</p> 
```

**jQuery 片段：**

```
alert( $('#porky').data('food') ); // Alerts "bacon"
$('#porky').data('food', 'roast');
alert( $('#porky').data('food') ); // Alerts "roast" 
```

使用 data-attributes 将创建一个有效的、面向未来的应用程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T19:59:29.343

您可以使用`data-`属性：

```
<div data-someattr="1" data-someotherattr="'1'" data-obj="{prop:'val1'}" .... 
```

通过[jQuery.data()](http://api.jquery.com/jQuery.data/)检索那些：

```
$('div').data('someattr')           //1      Number
$('div').data('someotherattr')      //'1'    String
$('div').data('obj').prop          //'val1' String 
```

# javascript - Web 框架为程序员提供什么服务？

> ID：11420869
> 
> 赞同：1
> 
> 时间：2012-07-10T19:53:32.153
> 
> 标签：javascript, django, html

如果框架管理 HTML/ CSS/ javascript，程序员还需要了解 javascript 语言吗？还是在框架的抽象中考虑到了这一点？

我想使用 html5 canvas/webgl/ 任何其他可用的库来制作图形游戏/应用程序。通过 django 之类的 Web 框架对我来说会更有效吗？我不太确定它提供了哪些优势。我认为如果我想以有效的方式创建一个设计良好的动态网站，我会使用框架。但是如果我不关心外观，或者我只是在学习，那么我最好先玩javascript和html5吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T19:57:17.893

在我看来，您可以轻松地使用框架来简化您的开发，但请记住：使用每一个简化开发的框架或工具，您都会失去一点控制。

最终，您将到达需要了解 css/JavaScript 或任何底层技术以完成某些任务的地步。在这种情况下，您将处于需要学习“硬”内容的地步。

然而，即使在您达到这一点之前，我强烈建议您学习底层技术的基础知识，以便您了解这些工具的作用。造成这种情况的原因有很多，但最重要的是：

1.  如前所述，无论如何，您迟早都需要这样做。
2.  如果您不了解底层技术，您将费力并浪费大量时间试图理解为什么框架生成的页面/应用程序不会按照您希望的方式运行。
3.  故障排除更难
4.  新手开发人员很容易拿起一个框架并开始用它做***一些******非常***愚蠢的事情。可能导致安全漏洞、泄露敏感数据、让您和客户面临风险的事情。
    *   当然，有些框架可以保护新手开发人员免受 SQL 注入等问题的影响，但不是全部。需要了解这些工具“在幕后”做什么的人才能分辨出区别。

当然，你需要知道多少是有限度的。

打个比方，如果不花时间学习汽车的基本操作以及如何安全驾驶汽车，那就太愚蠢了。但是要开车，你不需要知道如何拆开发动机。如果您是希望能够拆开引擎（并将其重新组装起来）的人之一，那太好了！您将成为汽车领域至少一个领域的专家之一。

发展也是如此。不同的人需要/想要不同深度的知识......

但是对于网络来说，至少了解 HTML、css 和 JavaScript 的基础知识是必须的。这就像在加满油箱之前了解柴油和汽油之间的区别。这是每个 Web 开发人员都需要的基本知识。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T19:58:25.403

通常开发一个框架的目的是通过采取几个步骤并使它们对用户友好，从而使更大的任务更容易。除此之外，您经常会发现它们包含配置文件和自动安装程序，以简化服务器组件（例如数据库）的设置，以便非技术用户轻松使用。

然而，最大的问题是当用户遇到无法调试的错误或警告时，因为只能通过（通常）框架所基于的核心语言的少量专业知识来确认问题的基础.

简而言之，您可能不需要学习 Javascript 即可使用您所说的库，但强烈建议您了解内部工作原理，以便在不久的将来轻松调试和解决您遇到的问题。

享受和好运！

# jquery - jQuery - 绑定并执行单个处理程序？

> ID：11420871
> 
> 赞同：6
> 
> 时间：2012-07-10T19:53:37.847
> 
> 标签：jquery

我发现自己经常需要绑定一个事件处理程序，以及立即在 jQuery 中执行该处理程序。迄今为止，我一直在使用这种懒惰的人造模式来保持代码干燥：

```
$(...).bind('event', function() {
    ...
}).trigger('event'); 
```

今天被这个咬到了，因为其他handler已经绑定了`event`，而且我这样触发事件的时候也执行了，但是造成了很多问题，因为他们不应该被当时执行。

为了解决这个问题，我将模式更改为：

```
var handler = function() {
    ...
};

var element = $(...);

element.bind('event', handler);
handler.call(element); 
```

这按我预期的方式工作，但它像罪恶一样丑陋而且非常冗长，所以我正在考虑将这种模式封装到一个 jQuery 插件中：

```
$(...).bindAndExecute('event', function() { ... }); 
```

我在选项或任何其他方法中找不到与此等效`jQuery.bind()`的方法，但我可能错过了一些东西。有没有我没想到的更简洁的方法？我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:56:14.213

jQuery 支持[命名你的事件](http://docs.jquery.com/Namespaced_Events)。这是一种非常有用的技术，当您想要解除绑定或触发一组特定事件时非常方便。

```
$(...).bind('event.myNamespace', function() {
    ...
}).trigger('event.myNamespace'); 
```

当您开发更大的应用程序或 jQuery 插件时，使用这种技术几乎是不可避免的（或者至少明智的人不会避免使用它）。

[快速 jsFiddle 演示](http://jsfiddle.net/Sj4hE/1/)

# svn - 将 subversion checkout 置于 mercurial 版本控制之下的秘诀

> ID：11420872
> 
> 赞同：1
> 
> 时间：2012-07-10T19:53:38.820
> 
> 标签：svn, version-control, mercurial, dvcs

有人可以通过递归添加除 .svn 目录中的文件之外的所有文件来指出从 Subversion 签出创建 Mercurial 存储库的方法吗？我想它看起来像`hg add --exclude PATTERN`一些模式，比如`.svn`.

除了 .svn 目录中的文件之外，Subversion 签出是否有任何“特殊”文件？如果是这样，我也需要配方来排除这些。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:55:45.273

最简单的方法是进行 Subversion 导出而不是检出，然后您只需获得所需的目录结构，而无需 .svn 文件夹。

如果您必须使用结帐，`.hgignore`请在添加到 Mercurial 之前将其添加到根中调用的文件中：

```
syntax: glob
.svn 
```

此文件标识 Mercurial 不应尝试将其置于版本控制之下的文件和目录，在本例中为所有 .svn 目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T20:02:51.963

如果您想在本地使用 mercurial，但要与远程 SVN 存储库交互，您可以使用[hgsvn](http://pypi.python.org/pypi/hgsvn/)或[hgsubversion](https://bitbucket.org/durin42/hgsubversion/wiki/Home)扩展在两者之间推送/拉取变更集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T23:40:43.110

听起来您正在尝试将 Subversion 存储库导出到 Mercurial。试试 Mercurial 的[转换扩展](http://mercurial.selenic.com/wiki/ConvertExtension)。它随 Mercurial 一起提供。我们已经使用它在 Mercurial 存储库之间进行转换。它将从上次转换停止的地方开始。即，当您针对已转换的存储库重新运行它时，它只会转换尚未转换的提交。

# css - “进入”和“返回”状态的不同 css3 转换时间

> ID：11420876
> 
> 赞同：9
> 
> 时间：2012-07-10T19:53:53.587
> 
> 标签：css, css-transitions

我正在尝试使用 css3 过渡来淡化元素的不透明度（[http://www.w3schools.com/cssref/css3_pr_transition-duration.asp](http://www.w3schools.com/cssref/css3_pr_transition-duration.asp)）。

例如，我说：

```
-webkit-transition: opacity 2s ease-in-out; 
```

有没有办法指定与2s不同的“返回原始状态”时间？

我想在 2 秒内降低不透明度，但在 0.5 秒内恢复。

[CSS3 过渡：*IN* 和 *OUT* 的不同过渡（或从过渡状态返回）](https://stackoverflow.com/questions/8944456/css3-transition-different-transition-for-in-and-out-or-returning-from-tran)似乎可以实现这一点，但使用多个元素。有更好的办法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T16:20:10.760

是的，有更好的方法 - [http://jsfiddle.net/bJKpu/](http://jsfiddle.net/bJKpu/)

只需`transition-duration`为正常和悬停状态指定不同的 -s ：

```
div {
    height: 200px;
    width: 200px;
    background: orange;
    opacity: .5;
    -webkit-transition: all .5s ease-in-out;
       -moz-transition: all .5s ease-in-out;
}

div:hover {
    opacity: 1;
    height: 300px;
    width: 300px;
    -webkit-transition: all 2s ease-in-out;
       -moz-transition: all 2s ease-in-out;
} 
```

# jsf - 如何让 JSF 处理未设置的值？

> ID：11420878
> 
> 赞同：0
> 
> 时间：2012-07-10T19:54:04.487
> 
> 标签：jsf, jstl, unset

在我使用 JSF 之前，以下代码在 JSP 文件中运行：

```
<c:if test="${not (empty request.error)}">
    Error: ${request.getAttribute("error")}
</c:if> 
```

现在，当我使用 JSF 时，我收到了这个错误：

> /login.xhtml @24,51 test="${not (empty request.error)}" /login.xhtml @24,51 test="${not (empty request.error)}": 属性'error' not在 org.apache.catalina.connector.RequestFacade 类型上找到

这里有什么问题/解决方案？编辑器没有在任何内容下划线。

整个 login.xhtml：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./template.xhtml"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <ui:define name="userBar">
        <form method="POST" action="Login">
            <table>
                <tr>
                    <td>Login</td>
                    <td><input type="text" name="login" /></td>
                </tr>
                <tr>
                    <td>Password</td>
                    <td><input type="password" name="password" /></td>
                </tr>
                <tr>
                    <td colspan="2"><input type="submit" value="Login" /></td>
                </tr>
            </table>            
        </form>

        <c:if test="${not (empty request.error)}">
            Error: ${request.getAttribute("error")}
        </c:if>
    </ui:define>

    <ui:define name="content">
        content
    </ui:define>
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T02:25:06.930

由于 JSF2/Facelets，`#{request}`是一个隐含的 EL 变量，引用当前涉及的`HttpServletRequest`对象。另请参阅[JSF 2.0 中的通信 - 隐式 EL 对象](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ImplicitELObjects)。

您需要重命名您的托管 bean（或在 EL 范围内以完全相同的属性名称出现的任何名称），或通过 EL 范围映射显式引用它。假设它是请求范围的，您应该`#{requestScope.request}`改用它。

```
<c:if test="#{not empty requestScope.request.error}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:52:09.093

错误很明显。
您的名为 request 的 bean 类型为“org.apache.catalina.connector.RequestFacade”，没有名为“error”的属性。或者如果它存在，则可能没有 getter/setter。

如果您的意图是从 servlet 请求中获取值，您可以这样做：

```
<h:outputText value="#{param['error']}" /> 
```

此处的更多信息： [从 JSF 页面获取请求和会话参数和属性](https://stackoverflow.com/questions/550448/get-request-and-session-parameters-and-attributes-from-jsf-pages)

但是你为什么需要它？如果您想处理 JSF 中的错误，您可以捕获异常并根据需要显示它：

```
h:message tag
FacesMessage class 
```

一些网站： http:
[//www.jsftoolbox.com/documentation/help/12-TagReference/html/h_message.html](http://www.jsftoolbox.com/documentation/help/12-TagReference/html/h_message.html)

[http://docs.oracle.com/cd/E17824_01/dsc_docs/docs/jscreator/apis/jsf/javax/faces/application/FacesMessage.html](http://docs.oracle.com/cd/E17824_01/dsc_docs/docs/jscreator/apis/jsf/javax/faces/application/FacesMessage.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T01:46:34.440

这不是一个“未设置的值”，它是一个不存在的属性。HttpRequest 没有“错误”属性。`request.getAttribute("error")`语法是您应该使用的。

# asp.net - 登录页面不工作

> ID：11420883
> 
> 赞同：-2
> 
> 时间：2012-07-10T19:54:21.147
> 
> 标签：asp.net, login

我有一个奇怪的问题。我创建了一个登录页面，只要在任何文本框中输入焦点，页面就会自行重新加载。请查看[http://oasisitsolutions.com/Login.aspx](http://oasisitsolutions.com/Login.aspx)

我正在使用 HTML5，EntityFramework。

Webconfig 文件 contians

```
<system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <authentication mode="Forms"/>
    <customErrors mode="Off"/>
    <roleManager enabled="true" cacheRolesInCookie="true" cookieName=".ASPROLES" defaultProvider="CustomizedRoleProvider">
      <providers>
        <clear/>
        <add connectionStringName="ConnectionString" writeExceptionsToEventLog="true" name="CustomizedRoleProvider" type="CustomizedRoleProvider"/>
      </providers>
    </roleManager>
    <membership defaultProvider="CustomizedMembershipProvider" userIsOnlineTimeWindow="15">
      <providers>
        <clear/>
        <add name="CustomizedMembershipProvider" type="CustomizedMembershipProvider" connectionStringName="ConnectionString" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" passwordFormat="Hashed" writeExceptionsToEventLog="false"/>
      </providers>
    </membership>
  </system.web> 
```

提前致谢，

迪内什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:16:24.893

Dinesh，它实际上与 focus() 事件无关 - 您的整个页面被包裹在一个额外的标签中，该`<a href="Login.aspx">`标签直接位于您的导航容器下方。因此，无论何时您单击该锚标记中的任何内容（包括文本框），它都会像单击该链接并导航回 Login.aspx 一样执行。

只需删除该标签，它就会在您单击时停止刷新。

# javascript - onclick 使用 document.getElementByID 打开窗口传递变量

> ID：11420892
> 
> 赞同：0
> 
> 时间：2012-07-10T19:55:07.817
> 
> 标签：javascript, html, onclick, window

我究竟做错了什么？

```
<input type='text' name='keyword' id='keyword' size='16'>

<a href= "" onclick="window.open('http://scholar.google.com/scholar?q=document.getElementById('keyword')');"> 
```

它会打开一个没有 q = 关键字的新窗口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:57:56.040

您需要将其`document.getElementById('keyword')`作为代码的一部分，而不是超链接。

```
<input type='text' name='keyword' id='keyword' size='16'>  

<a href= "" 
    onclick="window.open('http://scholar.google.com/scholar?q=' + document.getElementById('keyword') + '');"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T20:03:05.360

你有`getElementById`引号括起来。

它应该是：

```
<a href="" onclick="window.open('http://scholar.google.com/scholar?q=' + document.getElementById('keyword').value);"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T20:00:01.697

声明`document.getElementById('keyword')`不会自动为您提供其中写入的值。为此，您需要执行`document.getElementById('keyword').value`.

您可能想要做的是：

```
<a onclick="window.open('http://scholar.google.com/scholar?q=' + document.getElementById('keyword').value);">Click here</a> 
```

# c - C 编译器 (gcc) 在 100.0 == 100 中将 int 转换为 float 或 float 转换为 int？

> ID：11420894
> 
> 赞同：1
> 
> 时间：2012-07-10T19:55:13.067
> 
> 标签：c

我无法弄清楚它会走哪条路。由于整个浮点问题，似乎将其转换为 int 会更有意义，但就像我说的那样，我不确定。有人知道吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T19:58:29.730

试试这个代码：

```
#include <stdio.h>

int main(void)
{
    if (100.1 == 100)
        printf("Must be integer compare\n");
    else
        printf("Must be floating point compare\n");
    return 0;
} 
```

另外，请考虑诸如`int i = 10; float j = 100.5 + i;`or之类的事情`100.2 == 100`。你不希望它用整数来完成！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T19:58:04.713

它列在 6.3.1.8 的“通常的算术转换”下。

> 否则，如果任一操作数的对应实数类型为双精度，则将另一操作数转换为对应实数类型为双精度的类型，而不改变类型域

6.5.9 将其拼写为`==`：

> 如果两个操作数都具有算术类型，则执行通常的算术转换。

### 编辑

我引用 C11 N1570。

# database-connection - java.sql.SQLException: 关闭连接 ibatis

> ID：11420896
> 
> 赞同：3
> 
> 时间：2012-07-10T19:55:27.350
> 
> 标签：database-connection, ibatis, weblogic-10.x, spring-3

我们只在生产环境中看到了一种奇怪的行为。该应用程序运行良好几个小时，之后我们开始看到 java.sql.SQLException: Closed Connection

这发生在我们的 spring + ibatis 代码库中（我们从 Hibernate 迁移到 iBatis）。

我们正在使用 weblogic 10.0.3、spring 3.0.2 和 iBatis 2.3.5

异常的行为是：

1.  使用 iBatis 更新时出现几个数据库异常（单个更新不是事务）。
2.  然后 java.sql.SQLException: ORA-01013: 用户请求取消当前操作
3.  然后原因：java.sql.SQLException: No more data to read from socket
4.  然后原因：java.sql.SQLException: OALL8 处于不一致状态。
5.  然后原因：java.sql.SQLException：Io异常：断管。

然后所有后续的数据库查询

原因：java.sql.SQLException：关闭连接，然后我们必须重新启动服务器以使连接活跃。

# ajax - 使用 link_to remote: true 将参数传递给 rails

> ID：11420898
> 
> 赞同：6
> 
> 时间：2012-07-10T19:55:28.580
> 
> 标签：ajax, ruby-on-rails-3, jquery, link-to-remote

所以我有一个包含多条消息的页面，每条消息都有一个链接，可以更改（优化）该消息的评级。当用户单击此链接时，我想要一个 AJAX 调用来更新数据库中该消息的相应列值。单击此链接时，应该不会发生任何明显的事情。不应有页面刷新或重新加载。

我一直在尝试使用 link_to remote: true 来做到这一点，但我似乎无法让它工作。在线文档在这个问题上相当不清楚，并且随着 Rails 2 和 3 之间的变化，不再支持 :with 之类的东西。

我已经复制了到目前为止的内容，但我知道它甚至远未接近解决方案。就我需要传递到数据库的参数而言，我需要 profile_id、message_id 和 new_rating。

提前致谢！

显示.html.haml

```
.status-bar
  = link_to "", { action: :refine_result }, remote: true 
```

profile_controller.rb

```
...

def refine_result
  @refinement = ResultRefinement.new
  @refinement.profile_id = params[:profile_id]
  @refinement.message_id = params[:message_id]

  @refinement.save

  respond_to do |format|
    format.html { render nothing: true }
    format.js { render nothing: true }
  end
end 
```

result_refinement.rb

```
class ResultRefinement < ActiveRecord::Base
  attr_accessible :profile_id, :message_id, :new_rating, :deleted

  belongs_to :profile
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T22:30:14.730

您需要先设置路线`ProfileController#refine_result`。就像是

```
match '/profile/refine_results' => 'profile#refine_results', :as => 'refine_results' 
```

然后你可以使用

```
.status-bar
  = link_to "", refine_results_url(profile_id: 1, message_id: 100, new_rating: "awful"), remote: true 
```

# javascript - CSS3 和 JS：点击每 90° 旋转一整圈？

> ID：11420899
> 
> 赞同：2
> 
> 时间：2012-07-10T19:55:32.090
> 
> 标签：javascript, jquery, css, css-transitions

可能是一个简单的问题，但是……我不知道。

```
<a href="#" id="line">|</a>​ 
```

`active`单击旋转`#line`90°的链接时，我切换了一个类。如果再次删除该类，则`#line`旋转回 0°。

我想知道如何让它在一个完整的圆圈内旋转？

所以我在它第一次向右旋转 90° 时单击它。如果我再次单击它，它会旋转回（向左）到 0°。但是我希望它再次向右旋转直到达到 180°。等等。所以它应该在一个完整的圆圈内旋转。

[http://jsfiddle.net/5mCTd/2/](http://jsfiddle.net/5mCTd/2/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T20:57:50.173

很简单，看[这里](http://jsfiddle.net/5mCTd/19/)。

```
var angle = 90;    

$('#line').click(function() {
    $(this).css ({
        '-webkit-transform': 'rotate(' + angle + 'deg)',
           '-moz-transform': 'rotate(' + angle + 'deg)',
             '-o-transform': 'rotate(' + angle + 'deg)',
            '-ms-transform': 'rotate(' + angle + 'deg)'
    });
    angle+=90;
});​ 
```

我已经注释掉了不需要的 CSS 和 JS。如果这不是您想要的效果，请告诉我。希望能帮助到你。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:01:45.953

最简单的方法：使用 JavaScript。每次将旋转量增加90，并将元素的内联样式设置为新的旋转量。

最大的问题是理论上你希望它从 270 到 360 而不是 0。所以仅仅设置四个类（0、90、180、270，...呃...0）是没有帮助的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T20:06:49.427

这里棘手的部分（感谢 Anthony Mills 指出）是从 270 到 360 的过渡——不能简单地返回 0，必须转到 360、450 等。因此，我们需要采用当前角度并始终添加 90。

尝试从`transform`属性中获取当前角度并将其添加 90 是不值得的，因为变换被浏览器存储为矩阵，您必须从矩阵逆向工程角度（不是*很*困难并且有脚本可以做到这一点，但是为什么要麻烦呢？）

相反，我将使用 N、E、W、S（北、东、西和南）来表示州，以便您知道字母的来源。默认值为 N，所以...

```
<a href="#" id="line" class="N" data-turns="0">|</a> 
```

然后是一点 jQuery。我使用该类来计算当前角度，因此我不必从`transform`.

```
$('#line').click(function() {
    var rot = 360 * $(this).attr('data-turns');
    switch ($(this).attr('class'))
    {
        case 'N':
            rot += 0;
            $(this).removeClass('N').addClass('E');
            break;
        case 'E':
            rot += 90;
            $(this).removeClass('E').addClass('S');
            break;
        case 'S':
            rot += 180;
            $(this).removeClass('S').addClass('W');
            break;
        case 'W':
            rot += 360;
            $(this).attr('data-turns', $(this).attr('data-turns') + 1);
            $(this).removeClass('W').addClass('N');
            break;
        default:
            $(this).attr('class', 'N');
    }
    $(this).css('transform', 'rotate('+rot+'deg)');
}); 
```

请注意，这仅在您不使用任何类时才有效`#line`。如果是，则必须使用`if`// with而不是with 。确实，可能有比类更好的字段来存储这些信息（例如 HTML5 字段）；我只是使用类，因为它更快/更容易编写 CSS 和 jQuery。`else if``else``hasClass()``switch``attr('class')``data-`

编辑：`N2`为`360deg`选项添加，以便旋转完成。不是 100% 确定`N2`to`E`转换是否会根据需要旋转。感谢 Anthony Mills 提到这一点。

EDIT2：完全删除了 CSS 样式，切换到基于类和特定`data-`字段计算正确的旋转，即`data-turns`.

# apex-code - 获取没有 SOQL 的用户自定义字段（如公式中的 $User）？

> ID：11420912
> 
> 赞同：1
> 
> 时间：2012-07-10T19:56:15.230
> 
> 标签：apex-code

我的用户对象上有一些自定义字段，我想在 VisualForce 触发器中使用 APEX 代码访问这些字段。当我从公式字段访问它时，我可以使用一个漂亮的 $User 引用，如下所示：

```
$User.my_prop__c 
```

从 APEX 我必须通过 UserId 查询 User 对象，如下所示：

```
[select my_prop__c from User where id = :UserInfo.getUserId()].my_prop__c; 
```

APEX 中是否已经有一些东西可以让我在没有 SOQL 查询的情况下获取用户属性？如果没有，是否有人知道用于延迟加载和缓存用户属性的实用程序类，因此开销最小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:49:33.747

我会使用类似于以下代码示例的内容。它使用单例模式在事务期间将信息静态存储在内存中。它类似于 twamley 提出的延迟加载，但我觉得这是一种更简单的方法。

用法一：UserUtil.CurrentUser.Email；

用法2：用户 someUser = UserUtil.getUser(someUserId);

这将允许您访问有关当前用户或系统中其他用户的相同信息。注意 queryUsers 方法只返回一个查询结果。这使得从查询中添加和删除字段变得容易，因为它以自己的方法隔离，使事情变得简单。

注意：此代码在使用时会吸引所有用户。大多数组织没有数百个用户，因此堆大小不应该是一个问题。但如果是，您可以修改 queryUsers() 方法以仅返回活动用户或根据其他条件进行过滤。

```
public class UserUtil {
//Protected Members
private static final UserUtil instance = new UserUtil();
private Map<Id, User> mapUsers;

//Properties
public static User CurrentUser {
    get { return getUser(UserInfo.getUserId()); }
}

//Constructor
private UserUtil() {
    mapUsers = new Map<Id, User>(queryUsers());
}

//Public Methods
public static User getUser(Id userId) {
    if (instance.mapUsers.containsKey(userId)) {
        return instance.mapUsers.get(userId);
    }
    else {
        throw new InvalidUserIdException('Unable to locate user id: ' + userId);
    }
}

//Private Methods
private List<User> queryUsers() {
    return [SELECT 
                Id
                , Name
                , UserName
                , Email
                , Alias 
            FROM 
                User];
}

//Internal Classes
public class InvalidUserIdException extends Exception {} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:51:24.960

我编写了自己的实用程序类。不过，我仍然对更好的技术感兴趣。此实用程序类在访问第一个属性时延迟加载。Update_Closed_Won_Opportunities__c 和 Set_Opportunities_to_Closed_Won__c 是我在用户对象上的自定义字段（仅对系统管理员可见，因此人们无法升级他们的权限）。

```
public with sharing class MyUserInfo {
    private Id userId;
    private User myUser; // Hold onto the user object once we've loaded it

    // Default constructor uses the active user id
    public MyUserInfo() {
        userId = UserInfo.getUserId();
    }

    // Secondary constructor accepts a user id as a parameter
    public MyUserInfo(Id someOtherUserId) {
        userId = someOtherUserId;       
    }

    // Only called one time when we first need it so grab all of the custom fields now
    private void LazyLoadUser() {
        System.AssertNotEquals(null, userId);
        myUser = [
            SELECT Update_Closed_Won_Opportunities__c, Set_Opportunities_To_Closed_Won__c
            FROM User 
            WHERE id = :userId
        ];
        System.AssertNotEquals(null, myUser, 'Unable to load user with id ' + userId); // could return defaults instead
    }

    // Getters (be sure to include each field in the SOQL of LazyLoadUser)
    public boolean UpdateClosedWonOpportunities { get {
        if (myUser == null) LazyLoadUser();
        return myUser.Update_Closed_Won_Opportunities__c;
    } }
    public boolean SetOpportunitiesToClosedWon { get {
        if (myUser == null) LazyLoadUser();
        return myUser.Set_Opportunities_To_Closed_Won__c;
    } }
} 
```

这是我使用该课程的触发器。第一行`myUserInfo = new MyUserInfo();`不运行任何 SOQL。在使用第一个自定义 get 属性之前不会发生这种情况。后续调用不需要 SOQL。

```
trigger LockClosedOpportunity on Opportunity (before update) {
    MyUserInfo myUserInfo = new MyUserInfo();
    for (Opportunity o : trigger.old)
    {
        if (!myUserInfo.UpdateClosedWonOpportunities && o.StageName == 'Closed Won')
            trigger.newMap.get(o.Id).addError('You do not have permission to change an Opportunity after it has been set to Closed Won.');
    }
    for (Opportunity o : trigger.new)
    {
        if ( !myUserInfo.SetOpportunitiesToClosedWon && o.StageName == 'Closed Won' && trigger.oldMap.get(o.Id).StageName != 'Closed Won' )
            o.addError('You do not have permission to set an Opportunity to Closed Won.');
    }
} 
```

它在公式中读起来类似于 $User，当一个（或零个）就足够了时，我不必担心执行多个 SOQL 调用。

# eclipse - 在 Eclipse 中编写 API

> ID：11420917
> 
> 赞同：0
> 
> 时间：2012-07-10T19:56:27.363
> 
> 标签：eclipse, api

我正在开发一种新型平台，我想使用 Eclipse 作为我的 API 的 IDE。我想用 C 编写 API 并用 C 编写应用程序。我想到了在 Eclipse 中从 Android 构建 API。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:00:05.860

您想使用 Eclipse 作为 IDE 编写 API，还是想编写在 Eclipse 之上运行的东西？首先，查找“CDT”。其次，查看基于 Java 的 Eclipse 插件开发工具包（当然您可以封装 C/C++），但请注意它并非无足轻重。

# java - 在 HashMap 的 ArrayList 中搜索 HashMap

> ID：11420920
> 
> 赞同：6
> 
> 时间：2012-07-10T19:56:35.737
> 
> 标签：java

我有一个 HashMap 的 ArrayList。我想在其中搜索 HashMap 但无法找到实现此目的的方法。请建议我怎么做？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T20:20:41.220

用我理解的方式回答你的问题！

```
for (HashMap<String, String> hashMap : yourArrayList)
    {
        // For each hashmap, iterate over it
        for (Map.Entry<String, String> entry  : hashMap.entrySet())
        {
           // Do something with your entrySet, for example get the key.
           String sListName = entry.getKey();
        }
    } 
```

您的 Hashmap 可能使用其他类型，这个使用字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T20:18:00.350

看看这是否有帮助：

```
@Test
public void searchMap() {
    List<Map<String, String>> listOfMaps = new ArrayList<Map<String,String>>();
    Map<String, String> map1 = new HashMap<String, String>();
    map1.put("key1", "value1");
    Map<String, String> map2 = new HashMap<String, String>();
    map1.put("key2", "value2");
    Map<String, String> map3 = new HashMap<String, String>();
    map1.put("key3", "value3");
    listOfMaps.add(map1);
    listOfMaps.add(map2);
    listOfMaps.add(map3);

    String keyToSearch = "key2";
    for (Map<String, String> map : listOfMaps) {
        for (String key : map.keySet()) {
            if (keyToSearch.equals(key)) {
                System.out.println("Found : " + key + " / value : " + map.get(key));
            }
        }
    }
} 
```

干杯!

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T20:18:11.800

```
Object myObj;
Object myKey;
//Traverse the list
for(HashMap curMap : listOfMaps){
    //If this map has the object, that is the key doesn't return a null object
    if( (myObj = curMap.get(myKey)) != null) {
         //Stop traversing because we are done
         break;
    }
}
//Act on the object
if(myObj != null) {
  //TODO: Do your logic here
} 
```

如果您希望获取对 Map 而不是对象的引用（无论出于何种原因），则应用相同的过程，只是您只需存储对地图的引用：

```
Map myMap;
Object myKey;
//Traverse the list
for(HashMap curMap : listOfMaps){
    //If this map has the object, that is the key doesn't return a null object
    if(curMap.get(myKey) != null) {
         //Store instance to the map
         myMap = curMap;
         //Stop traversing because we are done
         break;
    }
}
//Act on the map
if(myMap != null) {
  //TODO: Do your logic here
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T08:51:31.200

试试下面的改进代码来搜索 HashMap 列表中的键。

```
public static boolean searchInMap(String keyToSearch)
{
    boolean returnVal = false;
    List<Map<String, String>> listOfMaps = new ArrayList<Map<String, String>>();

    Map<String, String> map1 = new HashMap<String, String>();
    map1.put("key1", "value1");

    Map<String, String> map2 = new HashMap<String, String>();
    map1.put("key2", "value2");

    Map<String, String> map3 = new HashMap<String, String>();
    map1.put("key3", "value3");

    listOfMaps.add(map1);
    listOfMaps.add(map2);
    listOfMaps.add(map3);

    for (Map<String, String> map : listOfMaps)
    {
        if(map.containsKey(keyToSearch))
        {
            returnVal =true;
                break;
        }

    }
    return returnVal;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T08:05:53.277

我用来在数组列表中搜索哈希图而不使用循环的有效方式。由于循环使执行时间更长

```
try{
int index = list.indexOf(map); // map is your map to find in ArrayList
if(index>=0){
HashMap<String, String> map = array_list.get(index);
// Here you can get your values
}
}
catch(Exception e){
e.printStackTrace();
Log.i("HashMap","Not Found");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-20T10:26:23.943

如果您有这样的 ArrayList：**ArrayList<HashMap<String, String>>** 并且您想比较 HashMap 中的值之一，请尝试此代码。

我用它来比较我的警报通知的设置。

```
for (HashMap<String, String> map : AlarmList) {
  for (String key : map.keySet()) 
  {
      if (key.equals("SendungsID")) 
      {
         if(map.get(key).equals(alarmMap.get("AlarmID")))
         {
               //found this value in ArrayList
         } 
      }
   }
} 
```

# web-services - 为网络打开共享时 Metro 风格应用程序中的套接字异常

> ID：11420921
> 
> 赞同：5
> 
> 时间：2012-07-10T19:56:36.810
> 
> 标签：web-services, windows-8, microsoft-metro, windows-runtime

我正在开发一个 Metro 风格的应用程序，它通过 Web 服务与我们的服务器进行通信。早期，我发现我需要在清单中添加“家庭或工作网络”（privateNetworkClientServer）和“Internet 客户端”（internetClient）功能，否则应用程序在尝试对远程进行 Web 服务调用时会遇到异常主持人。

但是，现在，在某些机器上，当应用程序尝试调用我们的 Web 服务时，我会收到以下套接字异常：

```
System.ServiceModel.EndpointNotFoundException: There was no endpoint listening at https://[my_service_url] that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details. ---> System.Net.WebException: Unable to connect to the remote server
---> 
System.Net.Sockets.SocketException: An attempt was made to access a socket in a way forbidden by its access permissions [my_server_ip_address]:443
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Exception& exception)
   --- End of inner exception stack trace ---
   at System.Net.HttpWebRequest.EndGetRequestStream(IAsyncResult asyncResult, TransportContext& context)
   at System.ServiceModel.Channels.HttpOutput.WebRequestHttpOutput.GetOutputStreamAsyncResult.CompleteGetRequestStream(IAsyncResult result)
   --- End of inner exception stack trace ---
   at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannelProxy.TaskCreator.<>c__DisplayClass5`1.<CreateGenericTask>b__4(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult() 
```

有趣的是，如果我禁用共享（右键单击 wifi 连接，选择“打开或关闭共享”，然后选择“否，不要打开共享或连接到设备”），问题就会消失并调用网络服务成功。如果然后返回并重新打开共享（选择“是”而不是“否”），问题又回来了。

因此，问题似乎与网络是否启用了共享和设备有关。我不完全确定映射，但我认为这基本上归结为“家庭/工作”和“公共”网络之间的区别；在我的情况下，当网络为“家庭/工作”时，Web 服务调用失败，当网络为“公共”时成功 - 但我的应用程序声明了两种类型的网络功能，并且并非所有机器都出现此问题。也没有防火墙或其他网络限制；这是一个简单的 Win8 安装，没有额外的调整。

最后，这并不是孤立于 Web 服务的——同一个应用程序的 iframe 在与 Web 服务完全相同的某些条件下会失败或成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T19:28:33.063

我确实有同样的问题。我通过在 Package.appxmanifest 文件中设置正确的功能解决了这个问题。在那里您必须检查 Internet（客户端）和专用网络（客户端和服务器）。

这适用于 VS 2012 和 Windows RT。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-06T13:39:17.937

检查是否将专用网络配置为功能...如果网络连接配置为工作/家庭，则需要此功能

# c - C 编程中的 fork() 函数

> ID：11420932
> 
> 赞同：4
> 
> 时间：2012-07-10T19:57:04.693
> 
> 标签：c, fork

我只需要理解这句话：

```
if (fork() && !fork()) 
```

它不应该总是错误的吗？我的意思是，如果我写：

```
if (a && !a) 
```

它总是假的，所以第一个也应该总是假的，我错了吗？我当然是，但我希望有人能向我解释这件奇怪的事情。

我正在为考试学习 C，我必须解决此代码：

```
int main(){
if(fork && !fork()){
   printf("a\n");
}
else printf("b\n");
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T20:24:22.967

对 unix 进程创建系统调用 fork() 的每次调用都会返回两次。首先它将子进程的 PID 返回给父进程（调用 fork() 的进程）。其次，它对新创建的孩子返回 0。

来自手册页：

**返回值**

**成功时，父进程返回子进程的PID，子进程返回0。失败时，在父进程中返回 -1，不创建子进程，并适当设置 errno。**

在你的情况下

```
if (fork() && !fork()) 
```

里面的语句`if`，两次调用fork。那么接下来会发生什么：

```
A
|----------------B
|                |
|---C            |
|   |            | 
```

现在第一次调用`fork()`将在 A 和 B 中返回。在 A 中它将是非零的，而在 B 中它将是零。

对 fork() 的第二次调用将仅从 A 调用。因为第一次 fork 返回 0 到 B，它不会调用 second `fork()`。**这是因为`&&`如果发现第一个操作数非零，则评估会短路。**感谢丹尼尔指出这一点。

所以我们可以用这个做一个表格：

```
PID       fork()1      fork()2
------------------------------
A           >0          >0
B           =0          >0
C           >0          =0 
```

因此，从图表中，流程 C`if`将被评估为**TRUE**

重要的是要记住，`fork()1`没有回到 C 。它从其父级获得了**已评估表达式**的副本。

我希望这能解释你的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T20:05:06.097

首先，是一个函数。它可能并不总是返回相同的值。

在这种情况下，fork 是一个创建另一个进程的函数。原始进程得到一个正返回值（子进程的 pid），子进程得到一个返回值 0。

在您的代码中，最终共有三个进程。if 语句将评估其中 1 个为真（下面的过程 C）。

```
 A
     |__________B
     |          |
     |__C       |
     |  |       |       
     |  |       | 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T20:00:21.847

```
shouldn't be always false? 
```

不。

因为它不是变量，所以每次调用`fork()`都会创建一个新的子进程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T20:02:40.340

每次调用都`fork()`返回两个值，每个进程一个。因此，对于每一个决定，都有一个采用每条路径的过程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T20:07:38.303

函数调用返回 0 给子进程，`fork()`进程 ID 给父进程。基本上，它的作用是分叉一次。如果进程是父进程，则跳转到下一个块，然后子进程再次分叉。这个进程的父进程跳转到下一个块，这个块中的子进程执行`if`语句中的代码。

# ios - Ipad 信用卡读卡器：将卡数据从本机应用程序获取到 webview 以通过标准 http post 发送

> ID：11420934
> 
> 赞同：3
> 
> 时间：2012-07-10T19:57:05.700
> 
> 标签：ios, ipad, html, credit-card, cardreader

我正在着手开发一个 iOS 应用程序，该应用程序将 ipad 用作购买食品和服装的信息亭。

此外，我们会将应用程序设置为 html5 网页视图，所有信用卡处理都在我们自己的异地平台上进行。因此应用程序打开，用户（收银员）会看到待售商品的移动站点版本，然后他们点击商品将它们添加到购物篮中。

完成后，刷卡并将该信息从本机应用程序发送到 html 表单，然后将信息发布到我们的信用卡处理器。

所以我的两个问题是

1) 有哪些优秀的信用卡读卡器可以与 ipad 配合使用并支持将未加密的卡数据发送到本机 iOS 应用程序。

2）我如何将本地应用程序中的数据获取到 html 页面以将其发布到我们的服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-06T13:58:00.607

1) 如果您处理未加密的信用卡数据，您需要获得 PCI-DSS 认证。存在诸如[payworks 之](http://payworksmobile.com/)类的提供商可以帮助您解决此要求。

2) 您可以将您的 Web 应用程序打包为原生应用程序并集成现有的 iOS / Android SDK 之一。

披露：我是 payworks 的软件工程师。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T16:07:45.197

我使用 idtech 的 iMag 读卡器实现了该应用程序，该读卡器插入旧的 iphone 30 针连接器。文档不是很好，但他们的开发工具包确实附带了一个示例程序，可以安装在您的 iOS 设备上，您可以将其用作示例。

我还使用 idtech 的 Shuttle 读卡器实现了它，它插入类似于 square 和其他流行平台的音频插孔。这也可以与开发套件一起购买，适用于 iOS 和 Android 平台，并且适用于没有旧 30 针连接器的较新的 iOS 设备。

第二个问题解释起来要长一些，所以我只想说这取决于您使用的设备、设备上的固件和文档。通常会有一些服务在运行监听刷卡，当刷卡时会出现一个通知，你的应用程序必须监听。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T01:32:48.670

本身不是读卡器，您可能需要查看[PayPal iOS SDK](https://github.com/paypal/PayPal-iOS-SDK/)使用的[card.io](https://www.card.io/)。

# google-app-engine - 如何使用批量加载工具的 import_transform？

> ID：11420936
> 
> 赞同：0
> 
> 时间：2012-07-10T19:57:18.920
> 
> 标签：google-app-engine, google-cloud-datastore

在数据导入时，我应该应用以下转换：

```
if value:
    return hashlib.sha512(value + salt).hexdigest() 
```

如何将它与 import_transform 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:01:11.147

以下帮助：

```
import_transform: "lambda x: hashlib.sha512(x.encode('utf-8') + 'actual_salt_value').hexdigest()" 
```

更新。当上传文件中缺少字段时，以下代码处理这种情况：

```
import_transform: "lambda x: None if x is None or x=='' else hashlib.sha512(x.encode('utf-8') + 'actual_salt_value').hexdigest()" 
```

# qt - Qt jambi 4.7.1 - QGraphicsItem 在第二次拖动时返回其初始位置

> ID：11420939
> 
> 赞同：0
> 
> 时间：2012-07-10T19:57:26.943
> 
> 标签：qt, qgraphicsitem, qt-jambi

我的项目使用 Qt jambi 4.7.1。我创建了一个名为 Component 的抽象类，它扩展了 QGraphicsRectItem。我设置了我的组件标志，目的是将它移动到同一个 QGraphicsScene 中。

```
public abstract class Component extends QGraphicsRectItem{

 public Signal1<QPoint>  componentMoved = new Signal1<QPoint>();
 private int id;
 private int nextId;
 private List<Route> routes = new ArrayList<Route>();
 protected QPixmap image;
 protected static QSizeF size = new QSizeF(100, 100);    

public Component(int pointX1, int pointY1, int id) {

    super(new QRectF(new QPointF(pointX1,pointY1),size));       
    this.id = id;

    //this.setFlag(GraphicsItemFlag.ItemIsSelectable, true);
    this.setFlag(GraphicsItemFlag.ItemIsMovable,true);

    this.setFlag(GraphicsItemFlag.ItemSendsGeometryChanges, true);      
    this.setCacheMode(CacheMode.DeviceCoordinateCache,new QSize(1024,1024));

}

public void drawComponent(){
    new QGraphicsPixmapItem(image.scaled(size.toSize()), this);     
}   

@Override
public void mousePressEvent(QGraphicsSceneMouseEvent e){
    this.setTransformOriginPoint(e.scenePos());
}

@Override
public Object itemChange(GraphicsItemChange change, Object value){
    switch (change) {
    case ItemPositionHasChanged:

        QPointF currentPos = this.scenePos();
        componentMoved.emit(currentPos.toPoint());              
        break;
    default:
        break;
    }       
    return super.itemChange(change, value);
}

public int getId(){
    return id;
}

public int getNextId(){
    return nextId;
}   

public QPixmap getImage(){
    return image;
}

public List<Route> getRoutes(){
    return routes;
}

public QSizeF getSize(){
    return size;
}

public void addRoute(Component nextComponent){
    //routes.add(new Route(this, nextComponent));
} 
```

所以它起作用了，现在我可以通过单击鼠标在我的场景中移动我的组件。但是，当我移动我的组件时，我遇到了一个错误，它总是在每次拖动之前返回到它的初始位置。我确定这只是一件简单的事情，但是我在互联网上搜索了很长时间，但一无所获。

对不起，我的英语不好！:P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:49:32.997

由于未知原因，该错误不再发生！我认为我的组件没有将它们的位置正确更新到图形场景。所以我可能会修改一些与我的组件显示相关的代码并意外解决错误。如果我能找到导致此错误的确切原因，我将更新此帖子！

# php - 邮件解析主题编码

> ID：11420943
> 
> 赞同：1
> 
> 时间：2012-07-10T19:57:40.600
> 
> 标签：php

我正在使用这个类[https://code.google.com/p/php-mime-mail-parser](https://code.google.com/p/php-mime-mail-parser)

解析电子邮件

课堂充满了问题

今天我发现了一个大的

我刚刚收到来自 gmail 的消息

邮件主题已编码，我无法解码！

```
Subject: =?windows-1256?B?4+XjIMzPx/AgyO3kx8ogys7VIMfhz+bj7eQ=?=
From: Some One <someone@gmail.com> 
```

我无法解码主题..

有人知道更好的邮件解析类吗？

如果否：我如何解码这个主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:44:12.343

您可能必须手动转换为另一种编码：

```
$x = "=?windows-1256?B?4+XjIMzPx/AgyO3kx8ogys7VIMfhz+bj7eQ=?=";
@iconv('windows-1256', 'UTF-8', base64_decode($x));
print_r($x); 
```

查看[http://www.php.net/manual/en/ref.iconv.php](http://www.php.net/manual/en/ref.iconv.php)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T14:10:53.660

更灵活：

```
$x = "=?windows-1256?B?4+XjIMzPx/AgyO3kx8ogys7VIMfhz+bj7eQ=?=";
mb_internal_encoding("UTF-8");
echo mb_decode_mimeheader($x); 
```

检查[http://php.net/mb_decode_mimeheader](http://php.net/mb_decode_mimeheader)

# java - 带盐和迭代的 3des java 加密/解密

> ID：11420945
> 
> 赞同：0
> 
> 时间：2012-07-10T19:57:45.867
> 
> 标签：java, encryption, 3des

在解密类中，我无法正确解密。我已经在解密类中验证了我的盐和我的密文在我将它们转换回字节之前仍然携带相同的值。

程序本身没有出错，但是当我编译时，我将加密，将其保存到字符串 encryptPhrase，然后在解密方法中对其进行解密，我似乎无法正确解密。我已经在评论中标记了问题所在并给出了一个 badpadding 异常，但是没有填充？

奇怪的是......如果我取出解密方法中的所有内容并只返回 encryptPhrase，它实际上会返回正确的纯文本。

任何帮助，将不胜感激。谢谢！:)

```
import java.security.*;
import javax.crypto.*;
import javax.crypto.spec.*;
import java.util.*;

public class PasswordEncryption {

private static int ITERATIONS = 1000;
private static String saltString;
private static String ciphertextString;
private static String encryptPhrase;

private static void usage(){
    System.err.println("Usage: java PBE -e|-d password text");
    System.exit(1);
}

public static void main(String[] args) throws Exception{

    scan = new Scanner(System.in);

    System.out.println("Please enter plain text: ");
    String text = scan.nextLine();
    System.out.println("Please enter password to encrypt plain text: ");

    char [] pw = scan.nextLine().toCharArray();
    int option=3;

    while (option!=0){
    System.out.println("Are we encrypting(1) or decrypting(2) or Exit(0)? " );
    option = scan.nextInt();
    String output="exiting program";

    if (option == 1)
        output = encrypt(pw, text);
    else if (option ==2)
        output = decrypt(pw,text);
    System.out.println("Output: " +output);
    }

}
private static Scanner scan;

private static String encrypt(char[] password, String plaintext) throws Exception {

    //create random salt
    byte[]  salt = new byte[8];
    SecureRandom random = new SecureRandom();
    random.nextBytes(salt);

    //create key based on password
    int iterationCount = ITERATIONS;
    PBEKeySpec pbeSpec = new PBEKeySpec(password, salt, iterationCount);
    SecretKeyFactory keyFact = SecretKeyFactory.getInstance("PBEWithSHAAnd3KeyTripleDES");

    //create a cipher
    Cipher myCipher = Cipher.getInstance("PBEWithSHAAnd3KeyTripleDES");

    Key encryptKey = keyFact.generateSecret(pbeSpec);
    myCipher.init(Cipher.ENCRYPT_MODE, encryptKey);

    byte[] cipherText = myCipher.doFinal();
    System.out.println("Encrypted Text: " +toString(cipherText));

    //produce salt to string
    saltString = salt.toString();
    System.out.println("SALT: " +saltString);

    //produce cipher text to string
    ciphertextString = toString(cipherText);

    //stores salt and cipher string in encryptPhrase
    encryptPhrase = saltString+ciphertextString;

    return saltString+ciphertextString;
}

public static String decrypt(char[] password, String encryptPhrase) throws Exception{
    //split the encryption data into salt and ciphertext
    //System.out.println("encrypt Phrase: " +encryptPhrase);

    //convert salt into bytearray
    byte[] bsalt = toByteArray(saltString);
    //convert ciphertext into bytearray
    byte[] bciphert= toByteArray(ciphertextString);

    //produce cipher

    /////////////////////////////////////////////////////////////////////       
    int iterationCount = ITERATIONS;
    PBEKeySpec pbeSpec = new PBEKeySpec(password, bsalt, iterationCount);
    //use SHA and 3DES

    //create the key
    SecretKeyFactory keyFact = SecretKeyFactory.getInstance("PBEWithSHAAnd3KeyTripleDES");
    Cipher cDec = Cipher.getInstance("PBEWithSHAAnd3KeyTripleDES");
    Key sKey = keyFact.generateSecret(pbeSpec);

    //perform decryption
    cDec.init(cDec.DECRYPT_MODE,sKey);

    byte [] plainTextb = cDec.doFinal(bciphert); //gives me an error here. Says BadPaddingException: pad block corrupted?

    String plainText = toString(plainTextb); 

    return plainText;
    //return encryptPhrase;

}

/**
 * Convert a byte array of 8 bit characters into a String.
 * 
 *@param bytes the array containing the characters
 * @param length the number of bytes to process
 * @return a String representation of bytes
 */
public static String toString(byte[] bytes, int length)
{
    char[]  chars = new char[length];

    for (int i = 0; i != chars.length; i++)
    {
        chars[i] = (char)(bytes[i] & 0xff);
    }

    return new String(chars);
}

/**
 * Convert a byte array of 8 bit characters into a String.
 * 
 * @param bytes the array containing the characters
 * @return a String representation of bytes
 */
public static String toString( byte[]   bytes)
{
    return toString(bytes, bytes.length);
}

/**
 * Convert the passed in String to a byte array by
 * taking the bottom 8 bits of each character it contains.
 * 
 * @param string the string to be converted
 * @return a byte array representation
 */
public static byte[] toByteArray(String string)
{
    byte[]  bytes = new byte[string.length()];
    char[]  chars = string.toCharArray();

    for (int i = 0; i != chars.length; i++)
    {
        bytes[i] = (byte)chars[i];
    }

    return bytes;
}
private static String digits = "0123456789abcdef";

public static String toHex(byte[] data, int length)
{
    StringBuffer buf = new StringBuffer();

    for (int i=0; i!= length; i++)
    {
        int v = data[i] & 0xff;

        buf.append(digits.charAt(v >>4));
        buf.append(digits.charAt(v & 0xf));
    }
    return buf.toString();

}

/**
 * Return the passed in byte array as a hex string.
 * 
 * @param data the bytes to be converted.
 * @return a hex representation of data.
 */

public static String toHex(byte[] data)
{
    return toHex(data, data.length);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T23:06:58.170

字节和字符之间的另一个混淆。可能已经猜到了。请查看 base 64 编码，看看它为什么存在。然后注意实现`Object.toString()`和查找字符编码（不要`new String(byte[])`在随机字节上使用）。

# android - JQuery 中的 listview('refresh') 似乎不起作用

> ID：11420948
> 
> 赞同：0
> 
> 时间：2012-07-10T19:57:54.663
> 
> 标签：android, jquery, listview, cordova

我正在使用 Phonegap 和 JQuery 为 Android 开发一个应用程序。其中一项任务是动态地将一些内容添加到列表中。第一次，当我添加第一个元素并调用 .listview() 时，一切似乎都很好，但是当我添加一些内容时，它的样式无法正常工作，并且 listview('refresh') 和其他命令都没有'一点帮助都没有。我正在使用 jquery mobile 1.0a1。这是两个按钮的代码：

```
 $("#nextDay").click(function(){ 
$("#SheduleList").append('<li><a href="#"><h3 class="ui-li-heading">ololo1</h3></a></li>');
$('#SheduleList').listview('refresh');  
});

$("#prevDay").click(function(){
$("#SheduleList").append('<li><a href="#"><h3 class="ui-li-heading">ololo</h3></a></li>');
$("#SheduleList").listview();   
}); 
```

第一个按钮是“prevButton”。这是一些HTML：

```
<body onload="init();">
<div data-role="page">
<div data-role="header" data-theme="b">
<h1>Расписание группы 04-322</h1>
<h1 id=hday>День недели</h1>
</div>
<div data-role="content" data-theme="b">
<ul id="SheduleList"> 
</ul>
<button id="nextDay">Следующий день</button>
<button id="prevDay">Предыдущий день</button>
</div>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:58:04.183

你不是一个人。
这似乎对我最有效：

```
refresh = function (selector)
{
 try
 {            
 //this may throw an exception: 
 //  call methods on listview prior to initialization; attempted to call method 'refresh'
 $(selector).listview('refresh'); 
 }
 catch (e) 
 {
 }
}

refresh("#SheduleList"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T20:50:54.727

`data-role="listview"`在你`<ul>`的 HTML 中添加。

```
<ul id="SheduleList" data-role="listview" data-inset="true"></ul> 
```

# assembly - 纯汇编 - 没有链接的 C 函数

> ID：11420951
> 
> 赞同：5
> 
> 时间：2012-07-10T19:58:01.827
> 
> 标签：assembly, operating-system

我想尝试用汇编语言编写操作系统。请不要只说“白痴，你必须在 %s、%s、%s、%s 等方面做得更好才能考虑到这一点。” 我知道这通常不是边做边学的事情，而且需要几个月的工作，但我想尝试，如果我在这里没有得到答案，我会在其他地方问。您能否将我链接到使用 nasm 的入门教程，或者在汇编中不使用 C 函数写入屏幕的方法？我几乎知道所有主要的组装说明，并且我已经编码了很长时间。编辑：我想使用 nasm 和 win32

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T00:32:56.503

除了上面的其他优秀建议之外，还有一个 Nasm 论坛（您可以在以下位置获得最新版本的 Nasm 和友好手册）：

[http://www.nasm.us](http://www.nasm.us)

“Netwide”汇编器的主页上有国家代码，这似乎很奇怪。不要把它想象成“美国”，把它想象成“像，Nasm us，伙计！” :)

由于切换到 pmode 后 BIOS 中断将不可用，因此学习如何直接访问硬件是有意义的。写到屏幕上是一个简单的开始。您需要知道“屏幕”通常位于 0xB800000（B800:0000 为段：偏移形式 - 您可能需要）。您需要知道布局是字符的一个（偶数）字节和“属性”（主要是颜色）的一个（奇数）字节。即使您没有使用中断，RBIL 也包含“ports.lst”，您可能会发现它很有帮助。如上所述，osdev.org 是您最好的新朋友！

快乐的启动，

坦率

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T20:21:56.903

The only way to do it without using C functions or system calls is to have your assembly code run without any other operating system, or run inside an emulator like Bochs or QEMU.

[Here](http://wiki.osdev.org/Real_mode_assembly_I) is a simple tutorial for nasm that writes to the screen and does not use C functions, and at that level, is not dependent on Win32\. If you want to write something that does such things while running in windows, then I am afraid that C function are about the only way unless you can learn some software interrupt interface for doing such.

As an aside, osdev.org contains many good articles and tutorials, including many on how to write code in assembly, for many different aspects of operating system development.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T00:52:37.700

引用我同意的[Nick Morgan的话：](http://skilldrick.github.com/easy6502/)

> 好吧，我不认为学习 x86 有用。我认为你永远不必在日常工作中编写汇编语言——这个 [学习汇编程序] 纯粹是一种学术练习，可以扩展你的思维和思维。6502 [一种汇编语言] 是在另一个时代编写的，当时大多数开发人员直接编写汇编，而不是使用这些新奇的高级编程语言。因此，它被设计为由人类编写。更现代的汇编语言是由编译器编写的，所以让我们把它留给他们。另外，6502 很有趣。从来没有人称 x86 很有趣。

[我目前还在用DCPU-16 汇编语言](http://0x10cwiki.com/wiki/Developer_Tools)（你可能听说过）编写一个有趣的“操作系统” 。这很有趣，因为我可以使用许多可用的浏览器内“IDE”之一，例如[这个](http://aws.johnmccann.me/)IDE ，而且我想您需要了解的 x86 汇编的相同原则也适用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:35:06.373

If you're tageting Win32, there's classical Win32 Assembly Tutorials by Iczelion: [http://win32assembly.online.fr/tutorials.html](http://win32assembly.online.fr/tutorials.html)

# javascript - 使用 Google Chrome (V8) 时，Javascript 可以被视为解释语言吗？

> ID：11420954
> 
> 赞同：12
> 
> 时间：2012-07-10T19:58:12.887
> 
> 标签：javascript, google-chrome, browser, v8, interpreted-language

我正在阅读这篇关于 V8（Google 的 Javascript 引擎）的优秀文章：[https](https://developers.google.com/v8/design#mach_code) ://developers.google.com/v8/design#mach_code 。

有一次，他们说 Javascript 直接编译成机器语言，没有任何字节码或解释器。

去引用：

> V8 在第一次执行时将 JavaScript 源代码直接编译为机器码。没有中间字节码，没有解释器。

那么，为什么 Javascript 仍然与“脚本”和“解释”语言一起列出，当它被明确编译时（至少在 V8 中）？

* * *

**编辑：**如果已编译，我可以以某种方式从 Javascript 创建可执行文件吗？那需要以某种方式将其链接到 V8 吗？

考虑到这个问题，我找到了这句话：

> V8 可以独立运行，也可以嵌入到任何 C++ 应用程序中。

在这里：[http](http://code.google.com/p/v8/) ://code.google.com/p/v8/ 。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-10T20:11:23.440

这就是为什么“解释语言”和“编译语言”是草率术语的例子。语言是编译还是解释是*实现*的属性，而不是语言本身的属性。

许多人将“动态类型语言”（如 JavaScript）与“解释”混淆，将“静态类型语言”与“编译”混淆，但这些只是相关性而非绝对性。可以编译动态语言（尽管它通常比编译静态语言更棘手），并且可以解释静态语言（例如：Hugs 是 Haskell 的解释器）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T20:15:04.987

它是一种脚本语言，因为 JS 代码旨在作为源代码提供和运行。

如果编码器要提供编译后的二进制文件供您执行，那么它就不是脚本。

此外，无论它在 Chrome 上做什么，相同的 Javascript 源代码也必须在其他平台上运行，这可能或多或少是一个传统的脚本环境。这也不会改变代码本身作为脚本的性质。

即使你把它编译到了极致，JS本质上仍然是一种脚本语言。几乎所有您能想到的脚本语言（Perl、PHP ......）都有合适的传统编译器；这不会阻止它们成为脚本语言，也不会阻止它们的源代码成为脚本。

同样，许多传统上编译的语言都有解释器。

最后，将一种语言“编译”成另一种语言的概念进一步混淆了这个问题。这已经存在了一段时间，但这个想法已经真正开始使用像 Coffeescript 这样的旨在编译成 Javascript 的语言。那么你把编译后的 Coffeescript 代码称为什么？

该术语并不是真的很有帮助，尤其是现在，但是在您所问的上下文中，您的问题的最终答案是，是的，Javascript 仍然是一种脚本语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-03T01:17:36.443

在这里，让我演示一下代码：

```
exeFuncDefinedLater(100); // prove that js is a compiling language

function exeFuncDefinedLater(num) {
  console.log("Your number is: " + num);
} 
```

这段代码可以在 Chrome 浏览器和 Node js 上运行。

如果有人说 js 是解释型语言，那么这段代码就会崩溃，就像你运行 later() 时，它不应该知道后面的函数体。

这可以证明 js 是一种编译语言，因为它编译了稍后的函数（所以机器可以知道它），然后执行它。

# git - Gerrit 可以强制执行这个基于审查的 Git 工作流程吗？

> ID：11420957
> 
> 赞同：3
> 
> 时间：2012-07-10T19:58:21.770
> 
> 标签：git, workflow, gerrit

是否有一种工具可以在 git 中使拉取请求和组合评论变得万无一失且安全？

我知道有几个相关的问题，已经在 github 上提出过（另请参阅：[使用 git 进行代码审查](https://stackoverflow.com/questions/5319390/using-git-for-code-reviews)，[在线代码审查工具与 Git 集成](https://stackoverflow.com/questions/2285206/online-code-review-tool-with-git-integration)）。

人们一直在建议使用[gerrit](http://code.google.com/p/gerrit/)或[gist](https://gist.github.com/)。

先前问题中提出的解决方案具有很好的界面，但是在访问控制方面却失败了。我们公司太小了，不能强迫一个人审查代码或有专门的维护人员。因此，我们正在寻找一种工具来确保（或至少鼓励）在将代码推送到我们的中央存储库之前对其进行审查。

**注意**：不需要绝对的用户访问控制，因为我们通常信任我们的员工。但是，我们希望禁止直接推送到我们的中央存储库，而不限制推送给单个人的权限。

因此，该工具（或工具和脚本的组合）应至少完成以下任务：

*   使拉取请求在 Web 界面中可见。（gerrit 做到了）
*   中央存储库链接到该工具，因此可以进行只读访问，但推送至少需要另一个人来审查和确认变更集。
*   负责审查和确认的人可以是开发团队中的任意人。
*   该工具必须自动检测（并拒绝）导致合并冲突的拉取请求。
*   它不应该使用已知会更改提交的 SHA1 哈希的 git 函数。

我对此解决方案的建议：

*   使用 gerrit 进行拉取请求和审查处理。
*   gerrit 应该总是有一个 master 的克隆。
*   对于每个拉取请求，gerrit 检查补丁是否适用于 master 而没有冲突（这将是一个脚本挂钩，我不知道 gerrit 是否具有它们）。
*   中央存储库由具有 shell 访问权限的特权用户拥有（此处名为`gerrit`），并通过 http(s) 公开。
*   每当其他人查看代码时，Web 界面中都会有一个应用按钮，该按钮会自动将更改推送到中央存储库。

不幸的是，我不知道 gerrit 并且文档很少。是否可以在 gerrit 中实现此工作流程？是否有另一种工具可以满足这些要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:38:52.680

我认为 Gerrit 将满足您的大部分/所有需求。您可以集成一个 CI 工具，例如 Jenkins，它可以与 Gerrit 交互并在需要时添加额外的功能。

需要记住的一件事 - 发出拉取请求时，补丁可能能够干净地合并，但以后仍可能存在合并冲突。如果开发者 A 发出 pull request 1，可以干净合并，那么开发者 B 发出 pull request 2-9，也可以干净合并，如果 2-9 先审核并提交，则 pull request 1 可能不再干净合并。

Gerrit 有能力尝试检测这一点，并在需要重新定位补丁时提醒用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:57:59.980

严格来说，您不需要让 gerrit 将更改推送到另一个存储库以进行托管（尽管它具有允许推送的内置挂钩），因为 Gerrit 可以充当存储库主机。

可以将 Gerrit 限制为仅应用快进的补丁，拒绝那些需要合并的补丁。如果你的项目不止几个人，这可能会减慢你的速度：提交的人越多，补丁在被接受之前就越有可能需要重新定位。

应用补丁并不是一个单击操作：审查补丁后，审查者必须首先选择一个分数（范围从 -2 到 +2），其中 +2 启用“立即应用”按钮。如果您没有 CI 系统来验证补丁，他们可能还需要表明他们已经验证了源代码是否有效。如果您*确实*有一个 CI 机器人，并且在审阅者查看代码时尚未完成，他们可以留下他们的反馈，并且任何人（受权限限制）都可以在 CI 机器人完成时触发合并。

您对任意团队成员的要求是可以满足的，除非您的意思是“不是提交更改的成员的任意团队成员”。我怀疑这就是您真正想要的，但是您可能会对此进行追溯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-20T10:05:49.320

我真诚地推荐[Critic](https://github.com/jensl/critic)，一个在 Opera Software 开发和使用的 Git 评论系统。W3C 也使用它来[审查测试](https://critic.hoppipolla.co.uk/dashboard)。

* * *

`make pull requests visible in a web interface. (gerrit achieves that)`

批评家就是这样做的。它与 Git 完全集成。您只需将评论家设置为 Git-remote，然后推送到`r/your-branch`它，它将创建一个评论，并通过电子邮件发送这些文件的所有匹配的评论者。

`the central repository is linked to that tool, such that read-only access is possible, but pushing requires at least another person to review and acknowledge the changeset.`

Critic 确实有自己的存储库。它带有一些钩子来做不同的事情，但是对于您的用例，您可能会自己编写一些。

`the person responsible for review and acknowledgement can be an arbitrary person from the development team.`

这个可以。或者实际上，您（作为审阅者）为要审阅的内容设置了审阅过滤器。还有“观看”过滤器。在小型仓库中，我只是对 / （所有内容）进行过滤。在更大的项目中，我有`/desktop/linux/`一个，例如一个`.*.py`。

`the tool must autonomously detect (and refuse) pull requests that lead to merge conflicts. it shouldn't use git functions that are known to alter the SHA1 hash of the commit(s).`

好多了，两者都可以。我们使用它的方式是变基。你可以自己做，它会找出你改变了什么。如果您更改内容并进行 rebase，它会对您很生气，但会显示在 3-way review 中发生的所有更改。

我们有一个大多数用户已经安装的扩展，FiddleAndTweak，它允许您直接在 Review 界面中进行简单的修复，以及在推送之前进行 Interactive Rebase。

我们有自己的提交队列，Critic 使用一个简单的扩展连接到该提交队列。这使您可以在接受审核后一键将更改排队。它不会让你推动不干净的树枝。在合并之前执行实际编译和测试运行的是提交队列本身；但您可以允许它合并或重新调整您的更改。遗憾的是，我们的提交队列非常具体，不像 Critic 那样开源。虽然审查系统肯定是最难的部分。

因此，对于critic，您需要在外面编写一些小脚本才能执行“推送回购”。但是对于一些更简单的项目，很容易编写一个小的扩展，当按下“集成”按钮时，它只是将接受的代码合并到主控。

# java - 为哈希表中的现有键放置一个新值

> ID：11420959
> 
> 赞同：0
> 
> 时间：2012-07-10T19:58:24.343
> 
> 标签：java

我正在使用哈希图来填充 jtable。用户选择一行并单击编辑按钮。我从哈希图中获取值并将其放置在文本区域中。用户可以进行更改，然后单击另一个按钮。我有新的值和键，但我不确定如何将更改的值写回哈希图中的正确键。

这是我将数据写入文本区域的地方

```
private void outputSelection() {
  StringBuffer csb = new StringBuffer();
  String s = "";
  int[] row = selectTable.getSelectedRows();

  for(int i = row.length-1; i >= 0; i--){
     String check = (String) EdiMapTableModel.getMapInstance().getValueAt(i, EdiMapTableModel.getMapInstance().COMMENT_COL); 
     if (!isNullOrEmpty(check)) {
        if (csb.length() > 0) {
            csb.append("\n");
        }
        csb.append(check);
     }
  }

  s = csb.toString();
  csb.setLength(0);
  output.append(s); 
```

}

这是我试图恢复价值的地方

```
private void inputSelection() {
  String s = output.getText();
  int[] row = selectTable.getSelectedRows();
  for(int i = row.length-1; i >= 0; i--){
     TCComponentItemRevision check = (TCComponentItemRevision) EdiMapTableModel.getMapInstance().getValueAt(i, EdiMapTableModel.getMapInstance().ITEMID_COL); 
     EdiMapTableModel.getMapInstance().commentBackMap(check, s);
     repaint();
  } 
```

}

这是我试图把它放回地图的地方

```
public void commentBackMap(int row, TCComponentItemRevision id, String comment) {

   if(model.containsKey(id)) {
          model.put(id, comment);
   }           
   fireTableDataChanged();
}// end commentBackMap() 
```

我知道 containsKey 不在上面。id 是关键值

我是否需要遍历哈希图以寻找匹配项？不知道它是否重要，但它是一个linkedhashmap而不是一个hashmap

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T20:04:23.717

根据[`HashMap#put`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#put%28K,%20V%29)文档：

> 将指定的值与此映射中的指定键相关联。如果映射先前包含键的映射，则替换旧值。

所以你所要做的就是`put`用相同的键和新值调用，它会为你做替换。

这也适用，`LinkedHashMap`因为它继承`put`了`HashMap`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:30:48.913

如果您想维护地图条目的位置，则不`put`能再这样做，因为这会将其移动到`LinkedHashMap`. 您将需要一个持有者对象，例如 an `Object[1]`，您将在其中替换其成员，而无需再次放置地图条目。

或者重新评估您对`LinkedHashMap`.

# ms-access-2010 - Microsoft Access 2010 访问 SOAP Web 服务

> ID：11420962
> 
> 赞同：0
> 
> 时间：2012-07-10T19:58:30.173
> 
> 标签：ms-access-2010

有没有人尝试在 Microsoft Access 中访问 SOAP Web 服务？

我尝试使用以下链接中的信息来访问 Web 服务并收到此错误：Microsoft Access 数据库引擎在连接到数据服务时遇到错误：'模型包含类型为 'WebService' 的 Lob 系统 [外部系统]不支持。'

[http://office.microsoft.com/en-us/access-help/create-a-web-service-data-connection-HA010356867.aspx#BM3](http://office.microsoft.com/en-us/access-help/create-a-web-service-data-connection-HA010356867.aspx#BM3)

在屏幕中，他们显示对话框以创建到 Web 服务的链接，我在 MS Access 2010 中找不到。我在创建到数据服务的链接中看到了一个类似的屏幕，我用它来访问给我上面指定的错误的 Web 服务.

关于错误的任何想法，我是否必须下载任何加载项才能看到“创建 Web 服务链接”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:01:56.540

我使用 Office 2003 Web 服务工具包取得了巨大的成功

[http://www.microsoft.com/en-us/download/details.aspx?id=2224](http://www.microsoft.com/en-us/download/details.aspx?id=2224)

# android - 应用程序因“发送信号”而死。但没有例外或其他信息

> ID：11420963
> 
> 赞同：15
> 
> 时间：2012-07-10T19:58:38.387
> 
> 标签：android

我正在开发一个通过蓝牙记录数据的应用程序，但在收集数据数小时后它会间歇性地崩溃（使得很难追踪错误）。

logcat 输出不是很有帮助：

[http://i.imgur.com/EalnX.png](http://i.imgur.com/EalnX.png)

没有抛出异常，也没有任何导致进程终止的线索。

我怎样才能弄清楚出了什么问题？是否抛出了 logcat 未显示的异常？我怎样才能找到这个错误？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T20:21:38.603

信号 9 是 SIGKILL，它将立即终止进程（进程内不会运行任何处理程序）。从日志行来看，该进程正在杀死自己，因此它不是发出 SIGKILL 的外部代理。

我的猜测（实际上是猜测）是在您的进程中运行的内存管理代码（作为基础架构的一部分，而不是您编写的代码）决定您已经耗尽了一些资源，唯一的办法就是死。我希望在日志中达到这一点之前会有更多消息，因此可能值得浏览日志历史记录以查看在此之前的进程是否有有用的警告。

紧接在此之前的行是 GC 日志，这意味着某种内存资源正在运行不足。但看起来堆没有满，所以分配失败似乎不太可能。如果正在分配的对象太大而无法放入堆中，或者碎片阻止它被分配，您仍然可能会遇到分配失败。不过，我希望在这种情况下看到更多相关的日志消息。

我认为捕获更多日志（如有必要，可能通过应用程序的 PID 对其进行过滤）将帮助您取得进展。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-27T23:16:08.963

就我而言，日志中没有警告或任何线索。

**最终**我发现我的问题是我正在进行的一项活动
（比如说活动 X）正在注册到广播接收器，但从未取消注册。

因此，通过关闭活动（活动 X）并返回它导致**再次**注册到同一个广播接收器 - 这导致了混乱！

只需添加`unregisterReceiver(mybroadcast);`（在活动 X 中）即可解决。
（我将我的添加到 onDestroy。确保您在[正确的位置](https://stackoverflow.com/a/21136523/3263659)取消注册）。

如果你非常绝望，我建议你看这个幻灯片分享，它解释了[Android 崩溃调试](https://www.slideshare.net/AshishAgrawal22/android-crash-debugging-15694310)你的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-18T01:05:50.300

使用 RXjava 并且没有实现`onError`回调方法时会出现此问题

# grails - 在 Grails 项目中在哪里存储自定义异常类？

> ID：11420966
> 
> 赞同：6
> 
> 时间：2012-07-10T19:58:45.810
> 
> 标签：grails

应该将自定义异常类放在 Grails 中的什么位置？IMO，它们不是域类，也不是实用程序。

我应该/我可以`exceptions`在下面创建一个新文件夹`grails-app`吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T20:09:26.150

将它们放在 src/groovy（如果它们是 groovy 类）和 src/java（如果它们是 java 类）下。

# java - 使用 HttpURLConnection 发送带有 PUT 请求的文件

> ID：11420971
> 
> 赞同：1
> 
> 时间：2012-07-10T19:59:11.863
> 
> 标签：java, http, io, httpurlconnection

我正在尝试做一些相对简单的事情。我需要使用正文中的文件发出一个简单的 PUT 请求，以便将文件上传到不受我控制的服务器。这是我到目前为止的代码：

```
connection = ((HttpURLConnection)new URL(ticket.getEndpoint()).openConnection());
connection.setRequestMethod("PUT");
connection.setRequestProperty("Content-Type", "video/mp4");
connection.setRequestProperty("Content-Length", String.valueOf(getStreamFile().length()));
connection.setUseCaches(false);
connection.setDoOutput(true);

connection.connect();

outputStream = connection.getOutputStream();

streamFileInputStream = new FileInputStream(getStreamFile());
streamFileBufferedInputStream = new BufferedInputStream(streamFileInputStream);

byte[] streamFileBytes = new byte[getBufferLength()];
int bytesRead = 0;
int totalBytesRead = 0;

while ((bytesRead = streamFileBufferedInputStream.read(streamFileBytes)) > 0) {
    outputStream.write(streamFileBytes, 0, bytesRead);
    outputStream.flush();

    totalBytesRead += bytesRead;

    notifyListenersOnProgress((double)totalBytesRead / (double)getStreamFile().length());
}

outputStream.close();

logger.debug("Wrote {} bytes of {}, ratio: {}", 
        new Object[]{totalBytesRead, getStreamFile().length(), 
            (double)totalBytesRead / (double)getStreamFile().length()}); 
```

我正在查看我的网络管理员，但没有发送任何接近我文件大小的内容。事实上，我根本不知道是否正在发送任何东西*，*但我没有看到任何错误。

我需要能够发送这个请求并同步测量上传的状态，以便能够通知我的听众上传进度。如何修改现有示例以使其正常工作™？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T20:19:46.463

尝试将`content-type`参数设置为`multipart/form-data`. [W3C 表格](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4)。

# android - 将 imageView 动态添加到布局中

> ID：11420974
> 
> 赞同：0
> 
> 时间：2012-07-10T19:59:20.950
> 
> 标签：android, imageview, android-linearlayout, dynamically-generated

每次我动态地将图像视图添加到我的线性布局时，我都会得到一个空指针异常。

```
LinearLayout tables = (LinearLayout) findViewById(R.id.table);

        for(int i = 0; i < data.length; i++){
            ImageView image = new ImageView(getApplicationContext());
            try{
                int imgID = getResources().getIdentifier(data[i], "drawable", "package");
                image.setImageResource(imgID);

            }catch(Exception e){
                int imgID = getResources().getIdentifier("nia", "drawable", "package");
                image.setImageResource(imgID);
            }               
            tables.addView(image); //NULL POINTER THROWN HERE
        } 
```

当我调试时，imgID 有一个值，所以我知道它的工作原理。我只是不明白为什么它的 null if

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T20:01:51.613

如果这是导致空指针异常的行：

```
tables.addView(image); 
```

then`tables`为 null，简单地 findViewById() 没有`R.id.table`在当前显示的布局中找到任何具有 id 的 View。

（如果您需要帮助找出为什么`tables`为空，请发布您传递给的布局`setContentView()`）

**从评论中添加**

这是创建 PopupWindow 的一般方法。这使用 LayoutInflator 来膨胀布局，以便我们可以访问它以动态地将元素添加到布局中。（请注意，我们将 find 范围限定为`popupLayout.findViewById(...)`）：

```
public class Example extends Activity {
    private PopupWindow popupWindow;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TextView text = (TextView) findViewById(R.id.text);
        text.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                createPopup(view);
            }
        });
    }

    public void createPopup(View view) {
        LayoutInflater layoutInflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);  
        View popupLayout = layoutInflater.inflate(R.layout.popup, null);  
        // Customize popup's layout here

        Button dismissButton = (Button) popupLayout.findViewById(R.id.dismiss);
        dismissButton.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                popupWindow.dismiss();
            }
        });

        popupWindow = new PopupWindow(popupLayout, LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        popupWindow.showAtLocation(view, Gravity.CENTER, 0, 0);
    }
} 
```

了解其中的根元素`popup.xml`应该`background`定义一个属性，否则默认情况下窗口是透明的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T20:41:24.233

要检查您的 XML 布局是否有问题，您可以尝试以编程方式定义布局

```
 LinearLayout tables = new LinearLayout(getApplicationContext());

        for(int i = 0; i < data.length; i++){
            ImageView image = new ImageView(getApplicationContext());
            try{
                int imgID = getResources().getIdentifier(data[i], "drawable", "package");
                image.setImageResource(imgID);

            }catch(Exception e){
                int imgID = getResources().getIdentifier("nia", "drawable", "package");
                image.setImageResource(imgID);
            }               
            tables.addView(image); 
        } 
```

并像 ContentView 一样添加这个视图

```
 setContentView(tables); 
```

# php - 如何使用 PHP 从 jpegs 目录创建多页 PDF

> ID：11420978
> 
> 赞同：0
> 
> 时间：2012-07-10T19:59:37.670
> 
> 标签：php, pdf, gd

我有一个包含 50 个 jpeg、72 dpi、RGB、大小不一的目录。

我想创建一个 50 页的 PDF 8x10，每个图像在任一方向上最大 7x9，72dpi，RGB。然后是 .epub，然后是 .mobi。

我想创建第二个 50 页 PDF，8x6，现在每个图像在任一方向上最大 7x5，300dpi，CMYK，逆时针旋转 90（-90？）。

自 2007 年以来，我在 PS、ID、Acrobat 等领域手工完成了 200 次。每次完成 3-4 小时。我很好奇如何设计一个 PHP 脚本来做到这一点。我使用 PHP GD 来操作网页的 jpeg（裁剪和调整大小），但没有创建多页 PDF。

我在想自 2007 年以来所有这些都已经发展了一点，我应该能够在 PHP 中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:21:03.830

Welcome to StackOverflow!

If you know exactly what you want to do with your content, the most useful StackOverflow answers will come in response to code that *you* have written that implements some of what you're looking for.

For PDF generation, check out [TCPDF](http://www.tcpdf.org/), especially its [examples](http://www.tcpdf.org/examples.php). Multiple examples show you how to make multi-page documents. Example number 9 embeds an image on the page, and number 51 uses an image as a page background. TCPDF is roughly equivalent to FPDF, with a few more features and ongoing development.

For the epub and mobi formats, you'll need completely different tools.

There is a [format convertor](https://github.com/benskay/PHP-Digital-Format-Convert-Epub-Mobi-PDF) project on Github, but I haven't used it. It leverages other tools, like the ones below:

I know of [one project](http://www.phpclasses.org/package/6115-PHP-Create-ebook-in-EPUB-format-for-ex-Apple-iPad.html) that is a pure-PHP solution for generating epub content. And [phpMobi](https://github.com/raiju/phpMobi) seems to be an option for .mobi files.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T20:02:23.397

如果你想使用 PHP，有一个很棒的开源类：[FPDF](http://www.fpdf.org/)。看看 - 手册比我解释得更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:02:45.870

我打算休息一下吃午饭，但到目前为止，我发现 TCPDF 很有趣。

挑选其中一个示例，我没有找到以下文档来更改固定变量：

```
$pdf->Image('tcpdf/images/image_demo.jpg', 15, 140, 75, 113, 'JPG', 'http://www.tcpdf.org', '', true, 150, '', false, false, 1, false, false, false); 
```

是否有参考数字的顺序和真/假的含义？

# node.js - connect-redis - 如何保护会话对象免受竞争条件的影响

> ID：11420982
> 
> 赞同：4
> 
> 时间：2012-07-10T19:59:47.823
> 
> 标签：node.js, redis, express, race-condition

我正在使用带有 connect-redis 的 nodejs 来存储会话数据。

我在会话中保存用户数据，并在会话生命周期中使用它。

我注意到在两个更改会话数据的请求之间可能存在竞争条件。

我尝试使用 redis-lock 来锁定会话，但这对我来说有点问题。

我不想锁定整个会话，而是只锁定特定的会话变量。

我发现这是不可能的，我想了解决它的方向：

停止使用session对象存储用户数据，直接将变量保存在redis中并在使用前加锁。

我知道它可以工作，但它需要我手动管理所有对象，而不是仅仅通过会话对象访问 redis。

您能否与我分享最佳实践和您的建议？

谢谢，里奥

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T22:19:46.950

好吧，实现自己的存储可能是您的选择。[该文档](http://www.senchalabs.org/connect/middleware-session.html)显示您需要做的就是实现三个方法：`.get`和`.set`（`.destroy`请参阅最后一段）。它会是这样的（使用[node-redis 库](https://github.com/mranney/node_redis)并稍微修改[原始的 connect-redis 存储）：](https://github.com/visionmedia/connect-redis/blob/master/lib/connect-redis.js)

```
var redis = require("redis"),
    redis_client = redis.createClient(),
    session_prefix = 'session::',
    lock_suffix = '::lock',
    threshold = 5000,
    wait_time = 250,
    oneDay = 86400;

/* If timeout is greater then threshold, then we assume that
   one of the Redis Clients is dead and he cannot realese
   the lock. */

function CustomSessionStore(opts) {
    opts = opts || {};
    var self = this;
    self.ttl = opts.ttl; // <---- used for setting timeout on session

    self.lock = function(sid, callback) {
        callback = callback || function(){};
        var key = session_prefix + sid + lock_suffix;
        // try setting the lock with current Date
        redis_client.setnx(key, Date.now( ), function(err, res) {
            // some error handling?
            if (res) {
                // Everything's fine, call callback.
                callback();
                return;
            }

            // setnx failed, look at timeout
            redis_client.get(key, function(err, res) {
                // some error handling?
                if (parseInt(res) + threshold > Date.now( )) {
                    // timeout, release the old lock and lock it
                    redis_client.getset(key, Date.now( ), function(err, date) {
                        if (parseInt(date) + threshold > Date.now()) {
                            // ups, some one else was faster in acquiring lock
                            setTimeout(function() {
                                self.lock(sid, callback);
                            }, wait_time);
                            return;
                        }
                        callback();
                    });
                    return;
                }
                // it is not time yet, wait and try again later
                setTimeout(function() {
                    self.lock(sid, callback);
                }, wait_time);
            });
        });
    };

    self.unlock = function(sid, callback) {
        callback = callback || function(){};
        var key = session_prefix + sid + lock_suffix;
        redis_client.del(key, function(err) {
            // some error handling?
            callback();
        });
    };

    self.get = function(sid, callback) {
        callback = callback || function(){};
        var key = session_prefix + sid;
        // lock the session
        self.lock(sid, function() {
            redis_client.get(key, function(err, data) {
                if (err) {
                    callback(err);
                    return;
                }
                try {
                    callback(null, JSON.parse(data));
                } catch(e) {
                    callback(e);
                }
            });
        });
    };

    self.set = function(sid, data, callback) {
        callback = callback || function(){};
        try {
            // ttl used for expiration of session
            var maxAge = sess.cookie.maxAge
              , ttl = self.ttl
              , sess = JSON.stringify(sess);

            ttl = ttl || ('number' == typeof maxAge
                  ? maxAge / 1000 | 0
                  : oneDay);

        } catch(e) {
            callback(e);
            return;
        }
        var key = session_prefix + sid;
        redis_client.setex(key, ttl, data, function(err) {
            // unlock the session
            self.unlock(sid, function(_err) {
                callback(err || _err);
            });
        });
    };

    self.destroy = function(sid, callback) {
        var key = session_prefix + sid;
        redis_client.del(key, function(err) {
            redis_client.unlock(sid, function(_err) {
                callback(err || _err);
            });
        });
    };
} 
```

**旁注**：我没有为`.lock`and实现错误处理`.unlock`。我把这个留给你！:) 可能会有一些小错误（我现在没有 NodeJS，我是凭记忆写的 :D），但你应该理解这个想法。这是包含有关如何使用锁定/解锁 Redis的讨论[的链接。](http://redis.io/commands/setnx)`setnx`

**另一个注意事项**：您可能希望对路由进行一些自定义错误处理，因为如果任何路由抛出异常，那么 Redis 会话将不会被解锁。该`.set`方法总是作为路由中的最后一件事被调用 - 与`.get`Express 在路由一开始调用的方法相反（这就是我 lock at`.get`和 unlock at的原因`.set`）。你仍然只会被锁定 5 秒钟，所以它不一定是一个问题。请记住根据您的需要（尤其是变量）对其进行`threshold`调整`wait_time`。

**最后一点**：使用这种机制，您的请求处理程序只会为每个用户一个接一个地触发。这意味着，您将**无法为**每个用户运行并发处理程序。这可能是一个问题，因此另一个想法是将数据保存在会话之外并手动处理锁定/解锁。毕竟，有些事情必须手动处理。

我希望它有帮助！祝你好运！

# sql - VBA（Excel）与 SQL - 比较两行中的值（循环）

> ID：11420983
> 
> 赞同：3
> 
> 时间：2012-07-10T19:59:51.087
> 
> 标签：sql, excel, sql-server-2005, vba, for-loop

这在 SQL 中可能吗？这似乎是一个简单的概念。（我使用的是 SQL Server 2005）

循环遍历我的 SQL 表中的所有行，比较 m 列中的值，如果一行 = 65，下一行等于 120，则增加 j，并在另一列（q 列）中打印该值

```
Sub InsertProductionCycle() 

Dim LR As Long 
Dim j As Integer 

j = 1 
LR = Range("G" & Rows.Count).End(xlUp).Row 

    For i = 1 To LR Step 1 

        Cells(i, "Q").Value = j 

        If Cells(i, "M").Value = 65 And Cells(i + 1, "M").Value = 190 Then 
            j = j + 1 
        End If 
    Next i 

End Sub 
```

SQL 专家有什么想法吗？我可以在 SQL 中执行此操作吗？我对此的想法是：也许循环有点牵强，（我可以在 sql 作业中运行它），但是您可以比较行并将 j 循环值插入另一列。这就是我卡住的地方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T20:28:17.863

这是一个有趣的！可能有更有效的方法来执行此操作，但您可以在单个基于集合的语句中执行此操作，而无需循环或游标。

假设一个表格对您的数据进行建模，看起来像这样（`i`基本上是您的行号）：

```
CREATE TABLE MyTable (i int, M int) 
```

我使用自联接将`i`行与`i+1`行匹配，并使用 a`COUNT`来计算`Q`列。

```
;WITH data AS (
    SELECT a.i, a.M, b.M as NextM
        , CASE WHEN a.M = 65 AND b.M = 190 THEN 1 ELSE 0 END AS shouldIncreaseQ
    FROM MyTable a
       LEFT OUTER JOIN MyTable b
          ON a.i + 1 = b.i
)
SELECT data.M, data.NextM
   , (SELECT COUNT(*) + 1 FROM data AS ref 
      WHERE ref.shouldIncreaseQ = 1 AND ref.i <= data.i) as Q
FROM data 
```

如果需要，您可以使用[SELECT INTO](http://msdn.microsoft.com/en-us/library/aa213050%28v=sql.80%29.aspx)将数据放入另一个表中以供将来使用。

# qt - Windows 上的 QtCreator 使用 CodeSourcery 工具链为 Linux ARM 交叉编译

> ID：11420984
> 
> 赞同：5
> 
> 时间：2012-07-10T19:59:59.467
> 
> 标签：qt, qt-creator, cross-compiling, toolchain, linux-toolchain

我在我的 Windows 7 机器上安装了 Qt Creator，我的目标是 OMAP3 嵌入式 Linux 板。我下载了目标工具链 Sourcery-G++ Lite for Windows，并在我的 Windows 机器上安装了 MinGW ( [http://www.mingw.org/ )。](http://www.mingw.org/)在 QT Creator 中，我将 CodeSourcery 工具链添加为“手动”工具链，如下图所示。然后，我尝试通过在“模拟时钟”演示应用程序的“项目”下编辑“构建设置”来使用此工具链构建演示 Qt 应用程序“模拟时钟”。但是工具链在 Build Settings 下不可用，如第二张图所示。

如何使用 Build Options 中的 Code Sourcery Toolchain 从 Qt Creator 构建此演示应用程序或任何 Qt 应用程序？我绝对必须使用 Windows 来完成这个（不能使用 Linux VM...）。

我相信这可能与为目标构建 Qt 库有关，但不确定这是否属实或如何在 Windows 上执行此操作。我非常感谢您的帮助和洞察力。

![Qt Creator CodeSourcery 工具链](../Images/df77ff6a6f70fd2bfbe6f04cc2b028ce.png)

![Qt Creator 构建设置](../Images/3ba0b2346b05375c4e52191f4e222f3a.png)

编辑：新信息 - 需要帮助配置 Qt Creator：

我已经使用 CodeSourcery 工具链构建 Qt 4.8 库而没有错误，并且在遵循[http://c2143.blogspot.com/?view=classic](http://c2143.blogspot.com/?view=classic)之后，我在 /lib 目录中有 .so 文件。现在我正在尝试连接 CodeSourcery 编译器并将 Qt 4.8 构建到 Qt Creator，这样我就可以为目标板构建示例应用程序。

我阅读了以下文章： [http://doc.qt.nokia.com/qtcreator-2.4/creator-project-qmake.html](http://doc.qt.nokia.com/qtcreator-2.4/creator-project-qmake.html) [http://doc.qt.nokia.com/qtcreator-2.4/creator-tool-chains .html](http://doc.qt.nokia.com/qtcreator-2.4/creator-tool-chains.html) 描述如何将 Qt 版本的新工具链添加到 Qt Creator。请参阅所附图片，了解我如何配置 Qt Creator。我正在使用 Qt Creator 2.4.1。

![Qt 版本](../Images/fa4bb938bdc6978f11796b24e2a600e1.png) ![工具链](../Images/53ef7b504ff5ec61e92ff5855f0b78f7.png) ![构建设置](../Images/930e9ca880ff8c85da26c203ee3df637.png)

我收到一个错误，没有在下面粘贴太多信息...对此或我的配置有什么想法吗？

```
09:51:07: Running build steps for project analogclock...
09:51:07: Configuration unchanged, skipping qmake step.
09:51:07: Starting: "C:\QtSDK\mingw\bin\mingw32-make.exe" 
arm-none-linux-gnueabi-g++ -c -pipe -march=armv7-a -mtune=cortex-a8 -mthumb -mfpu=neon -mfloat-abi=softfp -Wa,-mimplicit-it=thumb -O2 -Wall -W -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I"..\qt-4.8-src\include\QtCore" -I"..\qt-4.8-src\include\QtNetwork" -I"..\qt-4.8-src\include\QtGui" -I"..\qt-4.8-src\include" -I"." -I"c:\QtSDK\Examples\4.7\widgets\analogclock" -I"." -I"..\qt-4.8-src\mkspecs\default" -o analogclock.obj c:\QtSDK\Examples\4.7\widgets\analogclock\analogclock.cpp
arm-none-linux-gnueabi-g++ -c -pipe -march=armv7-a -mtune=cortex-a8 -mthumb -mfpu=neon -mfloat-abi=softfp -Wa,-mimplicit-it=thumb -O2 -Wall -W -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I"..\qt-4.8-src\include\QtCore" -I"..\qt-4.8-src\include\QtNetwork" -I"..\qt-4.8-src\include\QtGui" -I"..\qt-4.8-src\include" -I"." -I"c:\QtSDK\Examples\4.7\widgets\analogclock" -I"." -I"..\qt-4.8-src\mkspecs\default" -o main.obj c:\QtSDK\Examples*\4.7\widgets\analogclock\main.cpp
C:\Users\pclass\Desktop\qt_creator_toolchain\qt-4.8-src\bin\moc.exe -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_SHARED -I"..\qt-4.8-src\include\QtCore" -I"..\qt-4.8-src\include\QtNetwork" -I"..\qt-4.8-src\include\QtGui" -I"..\qt-4.8-src\include" -I"." -I"c:\QtSDK\Examples\4.7\widgets\analogclock" -I"." -I"..\qt-4.8-src\mkspecs\default" c:\QtSDK\Examples\4.7\widgets\analogclock\analogclock.h -o moc_analogclock.cpp
mingw32-make.exe: *** [moc_analogclock.cpp] Error -1073741515
09:51:09: The process "C:\QtSDK\mingw\bin\mingw32-make.exe" exited with code 2.
Error while building project analogclock (target: Desktop)
When executing build step 'Make' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:01:20.163

您首先需要目标的 Qt 库。您可以使用 CodeSourcery 工具链构建它。然后，一些工具（qmake、moc...）和库可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:40:35.053

我将 mingw 添加到路径中，然后进行了构建，它成功了。如果我对示例执行“文件”命令，它会给我以下内容，这看起来很有希望。现在在板上试一试。

$ 文件模拟时钟模拟时钟：ELF 32 位 LSB 可执行文件，ARM，版本 1 (SYSV)，动态链接（使用共享库），用于 GNU/Linux 2.6.16，未剥离

# wordpress - 如何使 gzip 在 1and1 共 享主机 WordPress 网站上工作

> ID：11420992
> 
> 赞同：8
> 
> 时间：2012-07-10T20:00:10.840
> 
> 标签：wordpress, .htaccess, gzip

YSlow 告诉我应该压缩我的 css，但是经过几个小时的修补，我终生无法让 gzip 为我的网站工作。在这一点上，我什至不确定性能提升（会有一个吗？）是否值得付出努力。

我在 1&1 共享主机帐户上运行 WordPress 网站。

老实说，我真的不知道我在用这些东西做什么，而且似乎无法获得合适的设置。我在几个地方读到 1&1，“未安装模块 Apache mod_deflate 和 mod_gzip。”，所以我认为这是问题的一部分。

**我尝试了以下代码：**

这个似乎没有做任何事情：

```
<IfModule mod_gzip.c>  
    mod_gzip_on         Yes  
    mod_gzip_dechunk    Yes  
    mod_gzip_item_include file          \.(html?|txt|css|js|php|pl)$  
    mod_gzip_item_include handler       ^cgi-script$  
    mod_gzip_item_include mime      ^text\.*  
    mod_gzip_item_include mime      ^application/x-javascript.*  
    mod_gzip_item_exclude mime      ^image\.*  
    mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*  
</IfModule> 
```

这会导致 500 错误

```
<Location />
# Insert filter
SetOutputFilter DEFLATE

# Netscape 4.x has some problems...
BrowserMatch ^Mozilla/4 gzip-only-text/html

# Netscape 4.06-4.08 have some more problems
BrowserMatch ^Mozilla/4\.0[678] no-gzip

# MSIE masquerades as Netscape, but it is fine
BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
# Don't compress images
SetEnvIfNoCase Request_URI \
\.(?:gif|jpe?g|png)$ no-gzip dont-vary

# Make sure proxies don't deliver the wrong content
Header append Vary User-Agent env=!dont-vary
</Location> 
```

这（来自html5样板）似乎也没有做任何事情：

```
<IfModule mod_deflate.c>

  # Force deflate for mangled headers developer.yahoo.com/blogs/ydn/posts/2010/12/pushing-beyond-gzipping/
  <IfModule mod_setenvif.c>
    <IfModule mod_headers.c>
      SetEnvIfNoCase ^(Accept-EncodXng|X-cept-Encoding|X{15}|~{15}|-{15})$ ^((gzip|deflate)\s*,?\s*)+|[X~-]{4,13}$ HAVE_Accept-Encoding
      RequestHeader append Accept-Encoding "gzip,deflate" env=HAVE_Accept-Encoding
    </IfModule>
  </IfModule>

  # HTML, TXT, CSS, JavaScript, JSON, XML, HTC:
  <IfModule filter_module>
    FilterDeclare   COMPRESS
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/html
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/css
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/plain
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/x-component
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/javascript
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/json
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/xhtml+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/rss+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/atom+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/vnd.ms-fontobject
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $image/svg+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $image/x-icon
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/x-font-ttf
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $font/opentype
    FilterChain     COMPRESS
    FilterProtocol  COMPRESS  DEFLATE change=yes;byteranges=no
  </IfModule>

  <IfModule !mod_filter.c>
    # Legacy versions of Apache
    AddOutputFilterByType DEFLATE text/html text/plain text/css application/json
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE text/xml application/xml text/x-component
    AddOutputFilterByType DEFLATE application/xhtml+xml application/rss+xml application/atom+xml
    AddOutputFilterByType DEFLATE image/x-icon image/svg+xml application/vnd.ms-fontobject application/x-font-ttf font/opentype
  </IfModule>

</IfModule> 
```

这个好像没啥用。。。

```
AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css application/x-javascript 
```

我按照这里找到的教程

```
(http://mrrena.blogspot.com/2009/01/how-to-compress-php-and-other-text.html) 
```

但这基本上完全破坏了我网站的外观。

* * *

在我的 Functions.php 中尝试过这个，它似乎压缩了我的 html，但留下了一些未压缩的 js 和 css

```
if(extension_loaded("zlib") && (ini_get("output_handler") != "ob_gzhandler"))
    add_action('wp', create_function('', '@ob_end_clean();@ini_set("zlib.output_compression", 1);')); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-02-01T14:06:18.337

所以，过了一会儿，我想出了如何压缩具有 1&1 Webhosting 包的 html、css 和 js 文件。不支持放气！

对于动态内容，您将 php.ini 添加到您网站的根目录。php.ini 的内容：

```
zlib.output_compression =1
zlib.output_compression_level =9 
```

当然你也可以选择其他的压缩级别，9 是最高的（并且导致服务器负载最高）。这将压缩您动态生成的 html 文件。

要压缩静态文件（css、js 和图像...），您需要修改 .htaccess 文件。对于那个追加

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /
RewriteOptions Inherit
ReWriteCond %{HTTP:accept-encoding} (gzip.*) 
ReWriteCond %{REQUEST_FILENAME} !.+\.gz$ 
RewriteCond %{REQUEST_FILENAME}.gz -f 
RewriteRule (.+) $1.gz [QSA,L] 
</IfModule> 
```

到您的 .htaccess 文件（您可以在网站的根目录中找到该文件 - 否则创建它）。但压缩不会自动完成。所以你必须自己压缩文件！使用例如 7-zip 并使用 .gz 压缩 js 和 css 文件 -> 结果应该是例如 stylesheet.css.gz。然后将文件上传到与刚刚压缩的文件相同的目录。

现在它应该工作了！

PS：压缩并不总是有用的，尤其是当文件非常小时。所以检查压缩前后的差异。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T20:55:09.483

在我看来，你已经用尽了你的选择。从上面看，主机似乎确实没有 mod_deflate 或 mod_gzip。所以我猜你只是运气不好。

PHP 解决方案确实只适用于 HTML。所以坚持那个。HTML 也是添加压缩的最佳位置，因为大多数时候，CSS 和 JS 仅在第一页下载。

您可以通过 PHP 脚本将请求重定向到 CSS 和 JS，并使用 PHP 进行压缩。但我不会去那里，因为您还必须实施`304 Not modified`和设置适当的过期标头。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-26T06:08:45.023

启用 gzip 压缩
gzip 压缩可以在 php.ini 中使用以下代码激活：

```
zlib.output_compression = On
zlib.output_compression_level = 9
allow_url_fopen = On 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-22T02:56:05.500

我知道这个问题现在有点老了，但我找到了一个适合我的解决方案。

将一个名为“php.ini”的文件添加到包含以下内容的根文件夹中；

```
zlib.output_compression = On
zlib.output_compression_level = 9 
```

然后（这是您可能没想到的）将以下内容添加到您的 .htaccess 文件中；

```
AddType x-mapp-php6 .html .htm .php 
```

是的，这是正确的。我已经放进`php6`去了。显然，它将运行允许 gzip 压缩的最新稳定版本的 PHP（当前为 5.4）。这也将通过 PHP 解析器运行`.html`和`.htm`文件，这意味着它们可以被压缩（不通过 PHP 解析器运行的文件将不会被压缩）。随意添加您希望通过 PHP 运行的任何其他扩展（`.xml`例如）。

顺便说一句，如果您确实`.xml`通过 PHP 运行文件，请记住将标头设置为 xml 文件，否则将无法正常工作。

希望这可以帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-01T02:00:33.810

为我工作，

首先，您必须将 php.ini 复制到所有目录中。（1and1 在其常见问题解答中提供了一个脚本来促进这种操作），其中包含以下内容：

```
zlib.output_compression =1
zlib.output_compression_level =9 
```

然后在 htaccess 中添加：

```
<IfModule mod_gzip.c>
mod_gzip_on Yes
mod_gzip_item_exclude file \.(gz|zip|xsl)$
mod_gzip_item_include mime ^text/html$
mod_gzip_item_include mime ^text/plain$
mod_gzip_item_include mime ^image/x-icon$
mod_gzip_item_include mime ^httpd/unix-directory$
mod_gzip_item_include mime ^text/javascript$
mod_gzip_item_include mime ^application/javascript$
mod_gzip_item_include mime ^application/x-javascript$
mod_gzip_item_include mime ^text/x-js$
mod_gzip_item_include mime ^text/ecmascript$
mod_gzip_item_include mime ^application/ecmascript$
mod_gzip_item_include mime ^text/vbscript$
mod_gzip_item_include mime ^text/fluffscript$
mod_gzip_item_include mime ^text/css$
</IfModule> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-10T13:22:47.090

您可以通过将此代码添加到您的 .htaccess 文件中来启用压缩：

```
<IfModule mod_rewrite.c>

AddOutputFilterByType DEFLATE text/text text/html text/plain text/xml image/svg+xml image/x-icon text/css application/x-javascript application/javascript application/x-httpd-php application/x-httpd-fastphp application/x-httpd-eruby 

</IfModule> 
```