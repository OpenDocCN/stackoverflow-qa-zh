# StackOverflow 问答 102000-102999

# java - 如何启动具有更多内存的 Java 小程序？

> ID：102003
> 
> 赞同：13
> 
> 时间：2008-09-19T13:55:54.547
> 
> 标签：java, memory, applet, next-generation-plugin

对于大型 Java 应用程序，默认的 64 MB 最大堆内存可能很小。是否有任何小程序参数可以为已签名的小程序增加此参数？

对于 Java 程序，这是一个简单的命令行参数，但它对于浏览器中的小程序是如何工作的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-19T14:55:39.287

JDK6u10 中的[新插件架构](http://www.oracle.com/technetwork/java/javase/plugin2-142482.html#COMMAND_LINE_ARGS)支持这一点。在此之前，唯一的方法是在 Java 控制面板中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-19T14:07:25.410

使用 JavaConsole -> Java -> Java Applet Runtime 设置来定义初始和最大内存分配（使用 -Xms128 -Xmx512 或类似的）。

我了解较新版本的 Java（6？）允许开发人员对这些设置产生一些影响，但我还没有去过那里......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-11-10T21:24:16.293

将以下行添加到 JNLP 文件中的“资源”中

```
j2se version="1.6+" initial-heap-size="256m" max-heap-size="1024m"
    href="http://java.sun.com/products/autodl/j2se" /" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-09T13:28:50.127

实际上，在 Java Web Start (JNLP) 中启动 applet 可以让您指定与传统 Java 应用程序相同的内存限制。（Xms 和 Xmx）。

JNLP 默认支持小程序，因此在大多数情况下不需要更改代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-08-05T07:23:25.747

[有可能通过在示例中设置参数来更改此值它从https://jdk6.dev.java.net/plugin2/](https://jdk6.dev.java.net/plugin2/)的 java1.6.0_10 详细信息开始工作

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-06-11T11:52:19.337

可以通过以下几种方式完成：

i) 通过在 java 控制面板中增加 Xms、Xmx 和 Xmn 值以及 MaxPermSize java 参数；和/或

ii) 通过将 java_arguments PARAM 标记添加到 jsp/html 中的 OBJECT 标记：

此链接对此有更多了解：http: [//technoguider.com/2015/06/memory-requirements-for-an-applet/](http://technoguider.com/2015/06/memory-requirements-for-an-applet/)

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2008-09-19T14:06:27.020

不是我肯定知道，我已经很久没有写小程序了，但我认为你不能从小程序中设置它。

显然，您可以从 Java 插件控制面板为浏览器的 JVM 设置 JVM 的堆大小，但这是用户在启动 applet 之前必须做的事情。

您可以随时查看[http://forums.sun.com/thread.jspa?threadID=523105&messageID=3033288](http://forums.sun.com/thread.jspa?threadID=523105&messageID=3033288)以了解有关该主题的更多讨论。

# drupal - Drupal 5 CCK 单开/关复选框缺少标签

> ID：102005
> 
> 赞同：2
> 
> 时间：2008-09-19T13:56:11.117
> 
> 标签：drupal, cck

我正在使用 Drupal5 中的内容构建工具包 (CCK) 创建一个表单。

我添加了几个单独的开/关复选框，但没有显示它们的相关标签。帮助文本显示在复选框下方，但这不是所需的行为。对我来说，预期的行为是*标签*会出现在复选框旁边。

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-19T14:11:26.257

找到了[答案](http://drupal.org/node/152892#comment-571201)：

结果证明是 CCK 提供的功能，但它违反直觉。

对于单个开/关复选框，drupal 将使用在*允许值*字段中指定的*on*标签：

 *```
0
1|This is my label 
```*

# c++ - 什么时候最好使用堆栈而不是堆，反之亦然？

> ID：102009
> 
> 赞同：71
> 
> 时间：2008-09-19T13:57:08.743
> 
> 标签：c++

在 C++ 中，什么时候最好使用堆栈？什么时候最好使用堆？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2008-09-19T14:01:17.640

在当前函数返回后不会使用您的变量时使用堆栈。当需要变量中的数据超出当前函数的生命周期时，使用堆。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2008-09-19T14:04:38.130

根据经验，避免在堆栈上创建巨大的对象。

*   在堆栈上创建一个对象可以让您摆脱记住清理（读取删除）对象的负担。但是在堆栈上创建太多对象会增加堆栈溢出的机会。
*   如果您为对象使用堆，您将获得操作系统可以提供的尽可能多的内存，比堆栈大得多，但是您必须确保在完成后释放内存。此外，在堆中过于频繁地创建太多对象会导致内存碎片化，进而影响应用程序的性能。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2008-09-19T14:14:15.097

当正在使用的内存严格限制在您创建它的范围内时，请使用堆栈。这对于避免内存泄漏很有用，因为您确切地知道要在哪里使用内存，并且知道何时不再需要它，因此将为您清理内存。

```
int main()
{ 
   if (...)
   {
      int i = 0;
   }
   // I know that i is no longer needed here, so declaring i in the above block 
   // limits the scope appropriately
} 
```

但是，当您的内存可能在其创建范围之外被访问并且您不希望复制堆栈变量时，堆很有用。这可以让您明确控制内存的分配和释放方式。

```
Object* CreateObject();

int main()
{
    Object* obj = CreateObject();
    // I can continue to manipulate object and I decide when I'm done with it

    // ..
    // I'm done
    delete obj;
    // .. keep going if you wish
    return 0;
}

Object* CreateObject()
{
   Object* returnValue = new Object();
   // ... do a bunch of stuff to returnValue
   return returnValue;
   // Note the object created via new here doesn't go away, its passed back using 
   // a pointer
} 
```

显然，这里的一个常见问题是您可能忘记删除您的对象。这称为内存泄漏。随着您的程序变得越来越琐碎，而“所有权”（或确切负责删除事物的人）变得越来越难以定义，这些问题变得越来越普遍。

更多托管语言（C#、Java）中的常见解决方案是实现垃圾收集，因此您不必考虑删除内容。但是，这意味着后台有一些东西会不定期地运行以检查您的堆数据。在一个非平凡的程序中，这可能变得相当低效，因为“垃圾收集”线程弹出并突然消失，寻找应该删除的数据，而程序的其余部分被阻止执行。

在 C++ 中，处理内存泄漏的最常见和最好的（在我看来）解决方案是使用智能指针。其中最常见的是[boost::shared_ptr](http://www.boost.org/doc/libs/1_36_0/libs/smart_ptr/shared_ptr.htm)（[引用计数](http://en.wikipedia.org/wiki/Reference_counting)）

所以要重新创建上面的例子 boost::shared_ptr CreateObject();

```
int main()
{
    boost::shared_ptr<Object> obj = CreateObject();
    // I can continue to manipulate object and I decide when I'm done with it

    // ..
    // I'm done, manually delete
    obj.reset(NULL);
    // .. keep going if you wish
    // here, if you forget to delete obj, the shared_ptr's destructor will note
    // that if no other shared_ptr's point to this memory 
    // it will automatically get deleted.
    return 0;
}

boost::shared_ptr<Object> CreateObject()
{
   boost::shared_ptr<Object> returnValue(new Object());
   // ... do a bunch of stuff to returnValue
   return returnValue;
   // Note the object created via new here doesn't go away, its passed back to 
   // the receiving shared_ptr, shared_ptr knows that another reference exists
   // to this memory, so it shouldn't delete the memory
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-09-19T15:21:36.543

上述规则的一个例外是，您通常应该将堆栈用于函数范围之外不需要的局部变量：

如果递归函数分配较大的局部变量或递归调用多次，它们可能会耗尽堆栈空间。如果您有一个使用内存的递归函数，那么使用基于堆的内存而不是基于堆栈的内存可能是一个好主意。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-09-19T14:20:40.183

根据经验，尽可能使用堆栈。即在该范围之外永远不需要变量时。

它更快，导致更少的碎片，并且将避免与调用 malloc 或 new 相关的其他开销。从堆栈分配是几个汇编程序操作，malloc 或 new 是有效实现中的数百行代码。

它永远不会最好使用堆......只是不可避免的。:)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-19T14:01:38.543

这个问题（虽然不是真正的骗局）与[What and where are stack 和 heap](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)相关（尽管不是真正的骗局） ，这是几天前提出的问题。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-19T14:00:17.987

使用堆仅在运行时为对象分配空间。如果您在编译时知道大小，请使用堆栈。与其从函数返回堆分配的对象，不如将缓冲区传递给函数以供其写入。这样，可以在函数作为数组或其他基于堆栈的结构调用的地方分配缓冲区。

您拥有的 malloc() 语句越少，内存泄漏的机会就越少。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-19T14:04:32.157

这个问题不正确。

在某些情况下您需要堆栈，在其他情况下需要堆，在其他情况下需要静态存储，在其他情况下需要 const 内存数据，在其他情况下需要免费存储。

堆栈很快，因为分配只是 SP 的“增量”，并且所有“分配”都是在您所在的函数的调用时执行的。堆（或自由存储）分配/释放更耗时且容易出错.

# sql - SQL Server 2005 多数据库部署/升级软件建议

> ID：102019
> 
> 赞同：2
> 
> 时间：2008-09-19T13:58:01.297
> 
> 标签：sql, sql-server, deployment, triggers

我们有一个产品使用多个带有触发器的 SQL Server 2005 数据库。我们正在寻找一种可持续的解决方案，用于在客户服务器上部署和升级数据库模式。

目前，我们正在使用 Red Gate 的 SQL Packager，这对于这项特定工作来说似乎是错误的工具。不仅 SQL Packager 似乎面向单个数据库，而且我们拥有的特定（旧）版本在 SQL Server 2005 上存在一些问题。（我们的 SQL Packager 版本在 SQL Server 2000 上运行良好，尽管我们必须做一个很多变通方法使它能够处理带有触发器的多个数据库。）

有人可以推荐一个可以创建 EXE 或 .NET 项目的产品来执行以下操作吗？

```
* Create a main database with some default data.
* Create an audit trail database. 
* Put triggers on the main database so audit data will automatically be inserted into the audit trail database.
* Create a secondary database that has nothing to do with the main database and audit trail database. 
```

然后，当客户需要更新他们的数据库模式时，产品可以查看原始数据库集和我们服务器上更新的数据库集之间的变化。然后产品可以创建一个 EXE 或 .NET 项目，该项目可以在客户的服务器上...

```
* Temporarily drop triggers on the main database so alterations can be made.
* Alter database schemas, triggers, stored procedures, etc. on any of the original databases, while leaving the customer's data alone.
* Put the triggers back on the main database. 
```

基本上，我们正在寻找一种类似于 SQL Packager 的产品，但它可以轻松处理多个数据库。如果不存在这样的产品，我们将不得不自己制造。

提前感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T15:25:12.243

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-13T01:29:10.323

在撰写本文时（2009 年 6 月），市场上仍然没有产品可以为多个数据库完成所有这些工作。我为 Quest Software 工作，该公司是另一个数据库更改自动化系统 SQL Server 的 Change Director 的制造商。我们的数据库不像您所追求的那样处理多个数据库，而且我已经看到了其他数据库。没有骰子。

考虑到我在 SQL Server 管理中看到的方向，我也不会对它抱有希望。事情正朝着包含在单个数据库中的打包应用程序的方向发展，并且大部分代码都集中在这一点上。

# ruby-on-rails - Rails 最先进的垃圾邮件预防技术

> ID：102027
> 
> 赞同：4
> 
> 时间：2008-09-19T13:59:06.523
> 
> 标签：ruby-on-rails, captcha

Rails 中防止垃圾邮件帐户的最新技术是什么？验证码？有什么好的插件、教程或建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-20T00:57:21.447

**使用库**：你（几乎）总是从比你更擅长子域的人那里获得代码更好。Akismet 背后的 Wordpress 人员对博客垃圾邮件的遗忘比我知道的要多，我曾有一段时间是电子邮件反垃圾邮件研究员。您可能[对 Akismet 的 Rails 集成插件](http://github.com/joshfrench/rakismet)感兴趣。

**多样性防御**：垃圾邮件是一个古怪的问题，因为越流行的对策变得越糟糕。因此，特别是对于低调的网站，您可以通过编写简单的一次性绊线来获得令人作呕的好结果。我不会给你任何复制/粘贴的代码，因为它违背了练习的目的：有一个全球唯一的对策​​。

一个简单的例子是有一个隐藏的表单元素，它以一些随机字符串开始，并通过 Javascript 代码设置为已知的良好值。然后你反弹任何没有提供好的价值的东西。这会阻止不实施 Javascript 的客户端，其中包括绝大多数垃圾邮件脚本。当然，有一些问题，因为一些合法的客户端也阻止了 Javascript——但实际上，如果你使用的是 Rails，我猜你是在假设 cookie 处于打开状态并且 Javascript 可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-20T16:22:23.377

我还推荐 ReCAPTCHA，既因为它是您无需管理的高度可靠的服务，又因为它服务于两种常见的商品 - ReCAPTCHA 团队描述的 OCR 任务，以及在教人们验证码如何工作、减少放弃方面取得的进展率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T19:03:08.053

如果您想使用验证码来验证只有人类可以注册或添加内容，则有一个重新验证码插件：http: [//ambethia.com/recaptcha/files/README_rdoc.html](http://ambethia.com/recaptcha/files/README_rdoc.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-20T15:00:13.200

编辑：

看来 BranBuster 已经死了（这是几年前的事了）。但我真的很喜欢： [https ://github.com/matthutchinson/acts_as_textcaptcha](https://github.com/matthutchinson/acts_as_textcaptcha)

我是名为“BrainBuster”的 Rails 插件的忠实粉丝。这是一个基于逻辑的验证码，我发现它比“输入这些词”更可取，因为有时破译这些词很烦人……看“10 减 3 是多少？”很简单。并想出答案。YMMV：

[https://github.com/rsanheim/brain_buster](https://github.com/rsanheim/brain_buster)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T14:03:07.120

垃圾邮件是公平的。它不关心你在幕后运行什么。

所以通过扩展，在 Rails 上运行良好的东西与在 PHP、ASPNET 等上运行良好的东西是相同的。看看[Akismet](http://github.com/jfrench/rakismet/tree/master)和那里的各种“业力”反机器人工具。

对于一些现有的 ruby​​ 端口，但您可能需要重写一些才能完成任务。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T14:05:45.960

对于帐户创建，您可能需要使用验证码。我个人不是很喜欢它们，我认为它们没有那么有效。但是，如果您使用它们，我强烈建议您使用服务而不是尝试创建自己的服务。重新验证码浮现在脑海。不过，不确定是否有 Ruby 或 Rails 的包装器。

但是，为了防止垃圾邮件*内容*，我强烈建议[使用 Defensio](http://defensio.com)（免责声明：我过去曾在那里工作过）。它使用最先进的垃圾邮件过滤技术，例如用于电子邮件的技术，例如贝叶斯过滤。许多博客平台都有插件，包括 Mephisto（使用 Rails 制作）。该 API 很简单，您可以在几个地方查看如何在 Ruby 中使用它的工作示例。

# silverlight - Silverlight 2.0 中的 StaticResource 重用

> ID：102029
> 
> 赞同：0
> 
> 时间：2008-09-19T13:59:31.187
> 
> 标签：silverlight, static-resource

我目前正在使用 Silverlight 2.0 Beta 2 进行测试，我的目标是定义一次资源元素，然后在我的渲染中多次重复使用它。这个简单的示例将一个矩形 (myRect) 定义为资源，然后我尝试重复使用它两次 - 失败并出现错误：

属性 {StaticResource myRect} 值超出范围。[行：9 位置：83]

顺便说一句，这个示例在 WPF 中运行良好。

```
<UserControl x:Class="ReuseResourceTest.Page"
    xmlns="http://schemas.microsoft.com/client/2007" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    Width="200" Height="200">
    <Canvas x:Name="LayoutRoot" Background="Yellow">
        <Canvas.Resources>
            <RectangleGeometry x:Key="myRect" Rect="25,50,25,50" />
        </Canvas.Resources>
        <Path Stroke="Black" StrokeThickness="10" Data="{StaticResource myRect}" />
        <Path Stroke="White" StrokeThickness="4"  Data="{StaticResource myRect}" />
    </Canvas>
</UserControl> 
```

关于这里发生了什么的任何想法。

谢谢，

——埃德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T16:25:06.950

在尝试重用定义为静态资源的组件时，我也遇到了同样的问题。我发现的解决方法不是将控件声明为资源，而是定义样式设置您需要的所有属性，并在每次需要时使用该样式实例化一个新控件。

编辑：当您将控件分配给已经在另一个容器内的容器时，会发生超出范围的异常。它也发生在许多其他场景中（例如将样式应用于已经有样式的对象），但我相信这是您的情况。

# visual-studio-2005 - 为什么 VS2005 会一直检查项目进行编辑而不进行任何更改？

> ID：102040
> 
> 赞同：3
> 
> 时间：2008-09-19T14:00:35.520
> 
> 标签：visual-studio-2005

我有一个 VS2005 解决方案，其中包含各种项目（C++ DLL、C++ 静态库、C# 程序集、C++ windows 可执行文件），这些项目以各种方式组合以生成多个可执行文件。出于某种原因，每次我打开解决方案时，VS2005 都想签出其中一个项目进行编辑。该项目没有以任何方式修改，它只是签出。如果我将 VS2005 配置为在检出前提示，我可以在加载期间取消自动检出，而我看不到任何不良影响。它可能相关也可能不相关，但它不断检查的项目是 cppunit 版本 1.12.0（静态库版本）。我怎样才能停止这种恼人的行为？

其他可能相关（或不相关）的详细信息：

*   源代码控制是 Team Foundation Server（不是 Visual SourceSafe）
*   没有签入 .suo 或 .ncb 文件
*   正在签出 .vcproj 和 .vspscc 文件
*   当我关闭解决方案或关闭 Visual Studio 时，系统会询问我是否要保存对项目的更改。回答是导致文件没有更改（Kdiff3 将我的本地文件与服务器版本进行比较并报告“文件是二进制相等的”）
*   尝试签入“已修改”文件会导致 Visual Studio 消息显示“无需更改签入。所有更改都是未修改的文件或锁定。更改已被服务器撤消”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T14:13:18.673

正如 Charles 和 Graeme 所暗示的那样，即使您不直接对项目进行更改，Visual Studio 也会不断地更改用户选项文件等。

我不确定正在存储什么信息，但我知道它会发生。常见的补救措施是不包含 *.suo 文件。我也没有在酱汁控制中的 bin 或 obj 文件夹中存储任何内容，因为这可能与您谈论的效果相似（如果您构建）。（在构建时检查项目。认为这确实需要采取行动）。

总体来说是无法避免的。这就是 VS2005、2008 的工作方式。

这回答了你的问题了吗？

问候， 弗兰克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T14:06:19.047

您是否将 .suo 或 .ncb 文件放入源代码控制？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T14:07:40.387

您是否尝试在检查 cppunit 后关闭 VS2005，然后查看是否进行了任何更改？

我经常在 Web App 解决方案中遇到类似的情况，在您关闭工作室并重新打开它之前，项目文件实际上并没有保存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T14:08:45.360

澄清一下，我假设您的意思是 Visual SourceSafe2005 导致了问题，而不是 Visual Studio。（仅供参考，Visual SourceSafe 通常缩写为 VSS。）

我以前用 VSS 遇到过这个问题。我认为限制是 Visual SourceSafe 的根本：它只是不是一个好的产品，如果它是一个你可以影响的决定，我会转向其他东西。

如果您可以转移到其他东西，我建议将 Subversion 用于中小型项目。它是免费的，并且不使用 Visual SourceSafe 默认使用的悲观锁定机制。有一个出色的 Visual Studio 附加组件，称为 VisualSVN，它将在 IDE 中为您提供与 VSS 开箱即用的相同功能（查看哪些文件已更改等）。

如果您无法更改源代码控制系统，我相信 Visual SourceSafe 有一种称为“非排他性检出”的模式或类似的模式，它使用 Subversion 和其他源代码控制系统使用的乐观锁定。尝试至少为显然没有被更改的文件设置该选项，看看是否能解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T14:09:46.857

当解决方案中的一个项目具有源代码控制信息以及路径信息与您的工作站上的源代码控制不同时，我得到了很多。当 VS 打开项目时，它会自动尝试检查有问题的项目并

要修复它，您最好让使用该项目的每个人都删除他们的本地副本并执行“获取最新版本...”以获取源代码控制数据库中的内容。

您还可以检查 .sln 文件并在 GlobalScxtion(SourceCodeControl) 区域中查看每个项目的信息，并查看相对路径是否不是您将项目存储在工作站上的方式 - 尽管手动更改此文件而不是执行“获取最新版本...”更有可能给使用该解决方案的其他开发人员带来问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T14:09:50.163

您的 cppunit 项目可能会在项目首次加载时自动创建一个或多个附加文件，然后将这些文件添加到项目中。否则，项目的属性之一正在被更改或加载时增加。

如果您继续签入项目，下次加载它时是否会再次签出？或者检查它是否可以解决一段时间的问题？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-19T14:11:33.560

这种行为通常是由 VS 尝试更新源代码控制绑定引起的。

Graeme 是正确的，在您关闭 VS 之前，VS 不会保存项目或解决方案文件。

我会让VS检查文件，然后关闭VS，然后区分它们。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-30T23:10:56.207

我遇到了导致这种行为的两个原因。

第一个是旧的源代码控制绑定。如果您有一个项目曾经由另一个源代码管理工具管理，则它可能在项目文件中有剩余的绑定。打开项目文件，并从以下内容更改以下设置：

*   SccProjectName="$/Team/Platform/Projects/MyProject"
*   SccAuxPath="http://teamFoundationServer.example.com:8080"
*   SccLocalPath="."
*   SccProvider="{88888888-4444-4444-4444-BBBBBBBBBBBB}"

对此：

*   SccProjectName="SAK"
*   SccAuxPath="SAK"
*   SccLocalPath="SAK"
*   SccProvider="SAK"

不同的项目类型以不同的方式定义。上面的例子来自一个.vcproj，C#项目是XML，VB看起来像别的东西，但意思是一样的。只需将所有四个值设置为常量字符串“SAK”，Visual Studio 就会自动处理源代码控制。有关详细信息，请参阅[Alin Constantin 的博客](http://alinconstantin.blogspot.com/2008/02/sak-source-control-strings-in-visual.html)。

我还没有找到其他原因的根源，但是给我带来麻烦的项目也是CppUnit 1.12.0！我会继续挖掘并发布我的发现。

约翰

# bash - 如何在 bash 中转义通配符/星号字符？

> ID：102049
> 
> 赞同：154
> 
> 时间：2008-09-19T14:01:59.697
> 
> 标签：bash, shell, escaping

例如：

```
me$ FOO="BAR * BAR"
me$ echo $FOO
BAR file1 file2 file3 file4 BAR 
```

并使用`\`转义字符：

```
me$ FOO="BAR \* BAR"
me$ echo $FOO
BAR \* BAR 
```

我显然在做一些愚蠢的事情。

我如何获得输出`BAR * BAR`？

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2008-09-19T14:06:06.723

`$FOO`设置不够时引用。您还需要引用变量引用：

```
me$ FOO="BAR * BAR"
me$ echo "$FOO"
BAR * BAR 
```

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2008-09-19T17:46:31.407

**简短的回答**

就像其他人所说的那样-您应该始终引用变量以防止出现奇怪的行为。所以使用*echo "$foo"* in 而不是*echo $foo*。

**长答案**

我确实认为这个例子值得进一步解释，因为发生的事情比表面上看起来的要多。

我可以看到您的困惑来自哪里，因为在您运行第一个示例之后，您可能会认为 shell 显然在做：

1.  参数扩展
2.  文件名扩展

所以从你的第一个例子：

```
me$ FOO="BAR * BAR"
me$ echo $FOO 
```

参数展开后等价于：

```
me$ echo BAR * BAR 
```

文件名扩展后相当于：

```
me$ echo BAR file1 file2 file3 file4 BAR 
```

如果你只是`echo BAR * BAR`在命令行中输入，你会发现它们是等价的。

所以你可能会想“如果我转义 *，我可以防止文件名扩展”

所以从你的第二个例子：

```
me$ FOO="BAR \* BAR"
me$ echo $FOO 
```

参数展开后应该相当于：

```
me$ echo BAR \* BAR 
```

文件名扩展后应该相当于：

```
me$ echo BAR \* BAR 
```

如果您尝试直接在命令行中键入“echo BAR \* BAR”，它确实会打印“BAR * BAR”，因为转义阻止了文件名扩展。

那么为什么使用 $foo 不起作用呢？

这是因为发生了第三个扩展 - 引用删除。从 bash 手动引用删除是：

> 在前面的扩展之后，所有未引用的字符 '\'、''' 和 '"' 的出现均被删除，这些字符不是由上述扩展之一产生的。

所以发生的情况是，当您直接在命令行中键入命令时，转义字符不是先前扩展的结果，因此 BASH 在将其发送到 echo 命令之前将其删除，但在第二个示例中，“\*”是先前参数扩展的结果，因此它不会被删除。结果，echo 收到“\*”，这就是它打印的内容。

请注意第一个示例之间的区别 - "*" 不包含在将被 Quote Removal 删除的字符中。

我希望这是有道理的。最后得出相同的结论 - 只需使用引号。我只是想我会解释为什么转义，如果只有参数和文件名扩展在起作用，这在逻辑上应该起作用，但不起作用。

有关 BASH 扩展的完整说明，请参阅：

[http://www.gnu.org/software/bash/manual/bashref.html#Shell-Expansions](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Expansions)

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2012-11-20T23:43:47.277

我将在这个旧线程中添加一些内容。

通常你会使用

```
$ echo "$FOO" 
```

但是，即使使用这种语法，我也遇到了问题。考虑以下脚本。

```
#!/bin/bash
curl_opts="-s --noproxy * -O"
curl $curl_opts "$1" 
```

`*`需要逐字传递给，但会出现同样的`curl`问题。上面的示例不起作用（它将扩展为当前目录中的文件名），`\*`. 您也不能引用`$curl_opts`，因为它将被识别为`curl`.

```
curl: option -s --noproxy * -O: is unknown
curl: try 'curl --help' or 'curl --manual' for more information 
```

因此，如果应用于全局模式，我建议使用该`bash`变量来完全防止文件名扩展，或者使用内置标志。`$GLOBIGNORE``set -f`

```
#!/bin/bash
GLOBIGNORE="*"
curl_opts="-s --noproxy * -O"
curl $curl_opts "$1"  ## no filename expansion 
```

适用于您的原始示例：

```
me$ FOO="BAR * BAR"

me$ echo $FOO
BAR file1 file2 file3 file4 BAR

me$ set -f
me$ echo $FOO
BAR * BAR

me$ set +f
me$ GLOBIGNORE=*
me$ echo $FOO
BAR * BAR 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-19T14:05:55.943

```
FOO='BAR * BAR'
echo "$FOO" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-19T14:05:56.083

```
echo "$FOO" 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-19T14:25:56.443

`printf`养成使用而不是`echo`在命令行上使用的习惯可能是值得的。

在这个例子中，它并没有带来太多好处，但它可以在更复杂的输出中更有用。

```
FOO="BAR * BAR"
printf %s "$FOO" 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-12-05T20:55:12.297

如果您不想为 bash 的奇怪扩展而烦恼，您可以这样做

```
me$ FOO="BAR \x2A BAR"   # 2A is hex code for *
me$ echo -e $FOO
BAR * BAR
me$ 
```

这里解释为什么使用 echo 的 -e 选项让生活更轻松：

man here的相关引用：

```
SYNOPSIS
   echo [SHORT-OPTION]... [STRING]...
   echo LONG-OPTION

DESCRIPTION
   Echo the STRING(s) to standard output.

   -n     do not output the trailing newline

   -e     enable interpretation of backslash escapes

   -E     disable interpretation of backslash escapes (default)

   --help display this help and exit

   --version
          output version information and exit

   If -e is in effect, the following sequences are recognized:

   \\     backslash

   ...

   \0NNN  byte with octal value NNN (1 to 3 digits)

   \xHH   byte with hexadecimal value HH (1 to 2 digits) 
```

对于十六进制代码，您可以检查 man ascii 页面（八进制第一行，第二个十进制，第三个十六进制）：

```
 051   41    29    )                           151   105   69    i
   052   42    2A    *                           152   106   6A    j
   053   43    2B    +                           153   107   6B    k 
```

# .net - 自定义事件提供的事件参数的首选做法是什么？

> ID：102052
> 
> 赞同：1
> 
> 时间：2008-09-19T14:02:54.470
> 
> 标签：.net, design-patterns

关于 .NET 中的自定义事件，传递事件参数的首选设计模式是什么？对于每个可以引发的事件，您是否应该有一个单独的[EventArgs派生类，或者如果它们都是由同一类的事件引发的，那么为这些事件设置一个类是可以接受的？](http://msdn.microsoft.com/en-us/library/system.eventargs.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T14:06:24.477

我通常创建一个基础 EventArgs 类，该类具有每个事件的公共数据。如果某个特定事件有更多相关数据，我会为该事件创建一个子类；否则我只使用基类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T17:40:42.387

您不需要为每个事件都有一个单独的 EventArgs 派生类。使用现有的 EventArgs 派生类而不是重新发明轮子是完全可以接受的，甚至是可取的。

这些可能是现有的框架类（例如 System.Component.CancelEventArgs，如果您只想为事件处理程序提供取消操作的可能性。

或者，如果您有特定于应用程序的数据要传递给事件处理程序，则可以创建自己的 EventArgs 派生类。如果来自同一类或不同类的两个事件发送相同的数据，则没有理由不使用相同的 EventArgs 派生类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T14:05:16.523

这取决于事件是什么，但在大多数情况下，为了谁将使用您的事件，请创建一个从 EventArgs 派生的自定义类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T14:20:28.000

我想像 OAB 一样，创建一个自定义的“基本”args 类，通过添加特定于我使用它的组件或应用程序的数据来扩展 EventArgs。例如，在会计导出应用程序中，我的基本 ExportEventArgs 将添加一个 AccountNo 属性。

# javascript - 在 dom 中添加输入字段并在 IE 中聚焦

> ID：102055
> 
> 赞同：0
> 
> 时间：2008-09-19T14:03:25.107
> 
> 标签：javascript, internet-explorer, focus, prototypejs

我正在尝试制作一个 div，当您单击它时它会变成一个输入框，并聚焦它。我正在使用原型来实现这一点。这适用于 Chrome 和 Firefox，但不适用于 IE。IE 拒绝关注新添加的输入字段，即使我设置了 1 秒超时。

基本上代码是这样工作的：

```
var viewElement = new Element("div").update("text");
var editElement = new Element("input", {"type":"text"});
root.update(viewElement);

// pseudo shortcut for the sake of information:
viewElementOnClick = function(event) {
    root.update(editElement);
    editElement.focus();
} 
```

上面的例子是实际代码的缩短版本，实际代码除了 IE 中的焦点位外，运行良好。

IE中的焦点功能有限制吗？我需要将输入放在表单中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T14:15:47.403

我的猜测是，当您调用 focus() 时，IE 尚未更新 DOM。有时浏览器会等到脚本完成执行后再更新 DOM。

我会尝试做更新，然后做

```
setTimeout("setFocus", 0);

function setFocus()
{
    editElement.focus();
} 
```

您的另一个选择是让这两个项目始终存在于 DOM 中，并根据您在给定时间需要隐藏/显示的内容交换 style.display 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T14:08:58.400

什么版本的IE？您的 DocType 设置为什么？是严格、标准还是怪癖模式？出现任何 javascript 错误（检查左下方的状态栏是否有黄色警告标志）？通过工具 > 选项 > 高级为所有错误启用错误通知。

奥辛

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-27T04:07:49.720

[17 of 26](https://stackoverflow.com/questions/102055/adding-an-input-field-to-the-dom-and-focusing-it-in-ie#102152)已经回答了这个问题。我只想指出，Prototype 对此有本机机制：**[Function.defer()](http://www.prototypejs.org/api/function/defer)**

# r - 如何搜索“R”材料？

> ID：102056
> 
> 赞同：133
> 
> 时间：2008-09-19T14:03:25.997
> 
> 标签：r, search, r-faq

“The Google”非常有用……除非你的语言被称为“R”，在这种情况下，它会吐出大量不相关的东西。

有人对“R”有任何搜索引擎技巧吗？有一些专门的网站，如下所示，但你怎么能告诉谷歌你的意思是“R”语言？如果我正在搜索特定的东西，我将使用特定于 R 的术语，例如“cbind”。还有其他这样的技巧吗？

*   [rweb.stat.umn.edu](http://rweb.stat.umn.edu/R/doc/html/search/SearchEngine.html)
*   [www.rseek.org](http://www.rseek.org/)
*   [search.r-project.org](http://search.r-project.org/)
*   [www.dangoldstein.com/search_r.html](http://www.dangoldstein.com/search_r.html)

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-07-22T06:58:23.347

[http://rseek.org](http://rseek.org)是一个很棒的 R 手册、邮件列表和各种网站的搜索引擎。这是一款具有专门 UI 的 Google 联合搜索应用。我总是用它。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2009-07-09T12:18:03.347

*几年后的更新*

您需要的所有链接都在这里：

[https://stackoverflow.com/tags/r/info](https://stackoverflow.com/tags/r/info)

* * *

最近在 R-Help 邮件列表中对此进行[了讨论。](http://www.nabble.com/How-to-google-for-R-stuff--td23635068.html)

那里提到的一些这里没有涉及的事情是：

1.  使用RSiteSearch函数，和同名包。

2.  使用特定于 R 的搜索引擎。您提到了 RSeek 和 RSearch。您还可以在其他地方搜索[R 邮件存档](http://www.googlesyndicatedsearch.com/u/newcastlemaths)、[帮助 wiki](http://wiki.r-project.org/rwiki/doku.php)、[任务视图](http://cran.r-project.org/web/views/)、[RForge](http://r-forge.r-project.org/)和[Bioconductor 。](http://www.bioconductor.org/GettingStarted)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2008-09-20T23:02:51.013

大多数时候，我发现用谷歌搜索 R 加上我的搜索词效果很好。如果没有，我会尝试使用“R 项目”，或者将 CRAN、统计信息或语言添加到搜索中。

是否有您在搜索时遇到问题的特定主题？

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2009-09-12T18:02:34.843

一个新的 CRAN 包对此非常有帮助：[查看“sos”包](http://cran.r-project.org/web/packages/sos/)。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2011-04-21T14:17:33.993

很晚才加入这个讨论，但这是我在 Google 中首选的搜索字符串：[R] 后跟搜索字符串。

例如：

`[R] lm` 在 R 中找到几个线性建模的链接

这样做的原因是 StackOverflow 使用 [r] 标签，而 R 邮件列表也使用 [R]。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2009-10-16T13:25:10.517

我只想补充一点，搜索 R 脚本的一种好方法是在 google 中输入您的搜索词，并在末尾加上“ext:r”。这将返回所有具有 R 扩展名的文件。例如：

*   如果您想要[一些高性能计算示例](http://www.google.com/search?hl=en&rlz=1C1GGLS_enUS291US308&q=hpc+ext:r&aq=f&oq=&aqi=)，这将返回来自 Luke Tierney 和 Kate Cowles [“统计中的高性能计算”](http://www.stat.uiowa.edu/~luke/classes/295-hpc/)课程的 Russ Lenth 的[“用于 Netflix 分析的 R 代码”。](http://www.stat.uiowa.edu/~luke/classes/295-hpc/notes/Netflix-code.R)
*   如果您想要[bootstrapping 的示例](http://www.google.com/search?hl=en&rlz=1C1GGLS_enUS291US308&q=bootstrapping++ext:r&aq=f&oq=&aqi=)，这将返回许多脚本，其中大部分看起来非常相关。

我通常在开始时使用“r-project”进行基本的 R 搜索，因为大多数详细引用 R 的人通常也会引用该站点。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-09-19T14:14:03.413

[CRAN](http://cran.r-project.org/)是寻找R材料的权威场所。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2008-10-18T19:56:51.103

改为搜索“S-PLUS”。R 和 S-PLUS 是兄弟姐妹，但后者更容易搜索。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2011-04-21T15:36:52.217

我通常使用 r-seek.org，但您可以通过`+`在 R 前面加上一个直接在Google 上“按原样搜索”。

> 通过在单词前添加 +（请记住，不要在 + 后添加空格），您是在告诉 Google 在您键入时精确匹配该单词。在一个单词周围加上双引号会做同样的事情。

例如：+R cbind

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-09-19T14:11:48.957

谷歌搜索“r 语言”（带引号），然后搜索您的搜索词。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2010-04-29T01:08:44.193

类似于@MikeKSmith 的答案，在搜索框中输入 R+

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2009-10-06T15:37:38.000

在 Google 搜索框中输入 .R 而不仅仅是 R 会有所帮助。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2009-08-21T01:02:57.677

你可以使用这个网站：

[http://www.dangoldstein.com/search_r.html](http://www.dangoldstein.com/search_r.html)，“搜索 R 统计语言”。

具有“由 Google 提供支持的 R 多站点搜索”和“由 Rollyo 提供支持的 R 多站点搜索”。

请注意，它需要 JavaScript 才能工作（如果您的浏览器设置允许，可以限制为 www.dangoldstein.com 和 google.com - 例如在 Firefox 中使用 NoScript）。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2009-08-10T20:32:15.737

为了在 Stack Overflow 上找到问题/答案，我总是；转到标签，键入 R，找到 R 标签并单击它。

Jeff 提到了在播客上搜索 R 标签的更好方法，但我已经删除了它。:-(

抛开讨论不谈，Stack Overflow（或姊妹网站之一）对于 R 用户来说将是一个很好的资源。通过将像我这样的 Noobies 发送到此处的特定位置，可以减少非常大量的 R-help 电子邮件列表。一个令人困惑的问题是，虽然这些问题主要是关于 R 语言的，但它们通常是关于问题的正确统计测试或算法。

RW法利

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2012-06-21T22:09:22.663

GitHub带有语言限制[的高级搜索很有用。](https://github.com/search)试试这个：`language:R lubridate`例如。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2011-07-23T09:22:31.627

只需输入您想做的事情，例如谷歌中的“R 合并数据框”，效果很好！我没有阅读任何材料，只是在输入 R 代码时使用谷歌。简直太棒了！！！

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-19T14:05:20.517

考虑到 R 是一个统计程序，您可以随时搜索“R stats”。

编辑： [http ://www.google.com/search?source=ig&hl=en&rlz=&q=R+stats&btnG=Google+Search](http://www.google.com/search?source=ig&hl=en&rlz=&q=R+stats&btnG=Google+Search)

第一页显示了大量相关结果。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-19T15:07:01.303

添加“site:r-project.org”将有助于将结果范围缩小到只有官方项目网站上的内容。YMMV。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-07-08T13:22:01.023

“R统计”或“R包”怎么样？

此外，将您的搜索限制在域中`cran.r-project.org`。例如，搜索如何使用`ifelse`in `R`：

```
ifelse site:cran.r-project.org 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2010-05-18T09:02:23.863

对于您的原始问题，即如何在 google 中搜索：我以前的一位同事建议在 google 中搜索时将关键字“r-help”而不是“r”与您的问题一起使用。它在邮件列表中搜索答案。这总是对我有用。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2010-08-25T17:47:26.533

谷歌搜索时，“in R”效果很好，而不仅仅是“R”。

# fitnesse - 在 Fitnesse RowFixture 中格式化数据

> ID：102057
> 
> 赞同：7
> 
> 时间：2008-09-19T14:03:39.210
> 
> 标签：fitnesse

我有一个返回业务对象列表的 Fitnesse RowFixture。该对象有一个字段，它是一个代表 0 和 1 之间百分比的浮点数。业务对象的*使用者*将是来自设计者的网页或报告，因此百分比的格式将取决于设计者而不是业务对象。

如果页面可以在将数字转换为百分比时模拟设计器会更好，即显示 50% 而不是显示 0.5。但我宁愿不要用显示代码污染业务对象。有没有办法在 RowFixture 中指定格式字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T21:58:48.023

您当然不想仅仅为了让您的测试看起来更好而修改您的业务逻辑。然而，好消息是，有一种方法可以做到这一点，这并不困难，但不像传递格式说明符那么容易。

尝试将您的 Fit Fixture 视为 FitNesse 和您的应用程序代码之间的服务边界。**如果****您的****SUT**（**系统**测试）的实施细节发生变化，您想要定义一个不一定要更改的合同。

 ****让我们看一下您的业务对象的简化版本：

```
public class BusinessObject
{
    public float Percent { get; private set; }
} 
```

由于 RowFixture 的工作方式，我们需要定义一个简单的对象来作为合约工作。通常我们会使用一个接口，但这并不能满足我们的目的，所以一个简单的**DTO**（**Data** Transfer O **bject**）就足够**了。**

 ****像这样的东西：

```
public class ReturnRowDTO
{
    public String Percent { get; set; }
} 
```

现在我们可以定义一个 RowFixture 来返回我们自定义 DTO 对象的列表。我们还需要创建一种将 BusinessObjects 转换为 ReturnRowDTO 的方法。我们最终得到一个看起来像这样的 Fixture。

```
public class ExampleRowFixture: fit.RowFixture
    {
        private ISomeService _someService;

        public override object[] Query()
        {
            BusinessObject[] list = _someService.GetBusinessObjects();

            return Array.ConvertAll(list, new Converter<BusinessObject, ReturnRowDTO>(ConvertBusinessObjectToDTO));
        }

        public override Type GetTargetClass()
        {
            return typeof (ReturnRowDTO);
        }

        public ReturnRowDTO ConvertBusinessObjectToDTO(BusinessObject businessObject)
        {
            return new ReturnRowDTO() {Percent = businessObject.Percent.ToString("%")};
        }
    } 
```

您现在可以在不破坏实际拟合测试的情况下更改您的基础 BusinessObjects。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T19:57:58.827

我不确定“污染”是什么。要么要求您的业务对象返回一个以百分比表示的值，在这种情况下，您的业务对象应该提供该值 - 或者 - 您正在测试响应的真实值作为您现在拥有的浮点数。

试图让健身来按摩可读性的价值似乎有点奇怪。********

# java - Tomcat server.xml 中的调试级别 (0-99) 如何影响速度？

> ID：102058
> 
> 赞同：4
> 
> 时间：2008-09-19T14:03:46.167
> 
> 标签：java, apache, tomcat, servlets

控制 Apache Tomcat 的 servlet 容器启动的 server.xml 包含几乎每个主要组件的调试属性。debug 属性的详细程度取决于您给它的数字，0 表示最少，99 表示最详细。为大量用户提供服务时，调试级别如何影响 Tomcat 的速度？我假设零速度很快，而 99 相对较慢，但这是真的吗？如果没有抛出错误，这有关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T14:44:30.610

广泛的日志记录需要大量时间。这就是为什么放置如此重要的原因

```
if (log.isDebugEnabled())
  log.debug(bla_bla_bla); 
```

所以我想说将生产服务器设置为详细会严重影响性能。我假设它是您正在谈论的生产服务器，因为您说它必须为大量用户提供服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T17:41:17.470

日志不仅负责给您错误，还负责跟踪正在发生的事情。在某些情况下，代码无法在调试器中运行，那么日志记录是您唯一的选择。

这就是日志输出可能非常冗长的原因。我真的是这个*意思*。我记得有一次将 Catalina 的日志级别设置为 TRACE，最后得到了几兆字节的日志文件。那是*在*服务器收到任何点击之前。这是一个巨大的性能猪。数秒内可数。

如果您不需要 Tomcat 本身的日志记录，请不要在其任何组件上激活它。如果您怀疑您的设置或 Tomcat 本身存在错误，您通常只想修改 Tomcat 的日志级别。

对于您自己的应用程序，使用分析器或仅进行一些压力测试来测量日志记录成本。无论您的结果如何，我都建议您不要在生产环境中运行具有高日志级别设置的应用程序。*我当前的项目在 TRACE 设置下每个请求*转储大约 1 MB ，在 INFO 上只有大约三到四行，在 WARNING 上没有任何内容（如果一切顺利:-)。我建议不要超过最必要的日志记录。您的应用程序实际上应该只报告启动、关闭和故障，并且每个请求最多只报告一行。

# flash - 我可以使用 FLVPlayback 和 flash 9.0.115+ 获得旧的全屏缩放吗？

> ID：102059
> 
> 赞同：4
> 
> 时间：2008-09-19T14:04:21.987
> 
> 标签：flash, video, flv, fullscreen, scaling

在以前的 Flash 版本中，进入全屏模式会将舞台的高度和宽度增加到屏幕的尺寸。现在硬件缩放已经到来，高度和宽度设置为视频的尺寸（如果纵横比不同，则加上边框）。

没关系，除非您在视频上放置了控件。以前，你可以控制它们的大小；但是现在它们被放大了与视频相同的比例，并且像素化得可怕。控件很丑，字幕不可读。

用户可以关闭硬件缩放，但实现的只是关闭抗锯齿。控件仍然被炸得丑陋。

有没有办法恢复旧的缩放行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-10T02:45:37.023

这是解决它的另一种方法，它更简单，而且对我来说似乎效果很好。

```
`myFLVPlayback.[fullScreenTakeOver](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/fl/video/FLVPlayback.html#fullScreenTakeOver) = false;`
```

`该`fullScreenTakeOver`属性是在 Flash Player 9 **update 3**中引入的。文档都有点模糊，但这里有更多信息：`

 `[将`FLVPlayback`组件与 Flash Player 9 Update 3 一起使用](http://www.adobe.com/devnet/flash/articles/flvplayback_fplayer9u3_02.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T08:41:03.220

我终于找到了这个问题的答案。问题是 FLVPlayback 组件现在使用 stage.fullScreenSourceRect 属性进入硬件缩放的全屏模式。当它这样做时，它会拉伸 stage.fullScreenSourceRect 给定的渲染区域以填充屏幕，而不是增加舞台或任何组件的大小。

要阻止它，您必须创建一个使用 UIManager 子类的 FLVPlayback 子类，并覆盖设置 stage.fullScreenSourceRect 的函数。不利的一面是，您失去了硬件扩展性；但从好的方面来说，你的播放器看起来不像是一个三岁的孩子用蜡笔画的。

CustomFLVPlayback.as:

```
import fl.video.*;
use namespace flvplayback_internal;

public class CustomFLVPlayback
{
    public function CustomFLVPlayback()
    {
        super();
        uiMgr = new CustomUIManager(this);
    }
} 
```

CustomUIManager.as：

```
import fl.video.*;
import flash.display.StageDisplayState;

public class CustomUIManager
{
    public function CustomUIManager(vc:FLVPlayback)
    {
        super(vc);
    }

    public override function enterFullScreenDisplayState():void
    {
        if (!_fullScreen && _vc.stage != null)
        {
            try
            {
                 _vc.stage.displayState = StageDisplayState.FULL_SCREEN;
            } catch (se:SecurityError) {
            }
        }
    }
} 
```

我们使用动作脚本将 FLVPlayback 添加到我们的电影中，所以我们只需要替换

```
var myFLVPLayback:FLVPlayback = new FLVPlayback(); 
```

和

```
var myFLVPLayback:CustomFLVPlayback = new CustomFLVPlayback(); 
```

我不知道是否有办法使自定义类在组件库中可用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-09-20T01:09:40.793

```
stage.align     = StageAlign.TOP_LEFT; 
stage.scaleMode = StageScaleMode.NO_SCALE;
stage.addEventListener(Event.RESIZE, onStageResize);

function onStageResize(event:Event):void {
    //do whatever you want to re-position your controls and scale the video
    // here's an example
    myFLVPlayback.width = stage.stageWidth;
    myFLVPlayback.height = stage.stageHeight - controls.height;
    controls.y = stage.stageHeight - controls.height;
} 
```

或者，我对此并不完全确定，您可以尝试在 FLVPlayback 上进行一些 9 切片缩放，但我不知道这是否可行。

9 片缩放教程：[http ://www.sephiroth.it/tutorials/flashPHP/scale9/](http://www.sephiroth.it/tutorials/flashPHP/scale9/)`

# windows - Windows 上的时钟漂移

> ID：102064
> 
> 赞同：16
> 
> 时间：2008-09-19T14:04:49.347
> 
> 标签：windows, clock

我开发了一个跟踪业务事件的 Windows 服务。它使用 Windows 时钟为事件添加时间戳。然而，底层时钟可能会非常显着地漂移（例如，每分钟损失几秒钟），尤其是在 CPU 努力工作时。我们的服务器使用 Windows 时间服务与域控制器保持同步，域控制器在后台使用 NTP，但同步频率由域策略控制，在任何情况下，即使每分钟同步一次，仍然会出现明显的偏差。除了使用硬件时钟之外，我们可以使用任何技术来保持时钟更稳定吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-09-19T15:33:04.580

时钟滴答应该是可预测的，但是在大多数 PC 硬件上——*因为*它们不是为实时系统设计的——其他 I/O 设备中断优先于时钟滴答中断，并且一些驱动程序在中断服务例程中进行大量处理而不是而不是将其推迟到[延迟过程调用](http://en.wikipedia.org/wiki/Deferred_Procedure_Call)（DPC），这意味着系统可能无法在（有时）发出信号后很久才能为时钟滴答中断提供服务。

其他因素包括总线主控 I/O 控制器从 CPU 窃取许多内存总线周期，导致它在很长一段时间内缺乏内存总线带宽。

正如其他人所说，时钟生成硬件也可能随着组件值随温度的变化而改变其频率。

Windows 确实允许调整每个中断时添加到实时时钟的滴答数：请参阅 SetSystemTimeAdjustment。但是，这仅在您有可预测的时钟偏差时才有效。如果时钟只是略微偏离，SNTP 客户端（“Windows 时间”服务）将调整此偏差，以使时钟滴答声稍快或稍慢，以趋向正确的时间。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-03-08T21:34:45.863

我不知道这是否适用，但是...

Windows 有一个问题，如果你用[timeBeginPeriod()](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757624%28v=vs.85%29.aspx)改变定时器的分辨率很多，时钟会漂移。

实际上，Java 的 Thread `wait()`（和`os::sleep()`）函数的 Windows 实现中有一个错误导致了这种行为。它总是在等待之前将计时器分辨率设置为 1 毫秒，以便准确（不管睡眠时间长短），并在完成后立即恢复它，除非任何其他线程仍在睡眠。然后，此设置/重置将混淆 Windows 时钟，它期望 Windows 时间量是相当恒定的。

Sun 实际上[自 2006 年以来就知道这一点](http://bugs.sun.com/view_bug.do?bug_id=5005837)，并且还没有修复它，AFAICT！

因为这个，我们实际上让时钟快了两倍！一个在循环中休眠 1 毫秒的简单 Java 程序显示了这种行为。

解决方案是自己将时间分辨率设置为较低的值，并尽可能长时间地保持在那里。使用 timeBeginPeriod() 来控制它。（我们将其设置为 1 毫秒，没有任何不利影响。）

对于那些用 Java 编写代码的人来说，解决这个问题的更简单方法是创建一个只要应用程序存在就休眠的线程。

*请注意，无论哪个应用程序是真正的罪魁祸首，这将在全球范围内解决机器上的这个问题。*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-19T14:19:54.770

您可以在计划任务 .bat 文件中运行“w32tm /resync”。这适用于 Windows Server 2003。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-19T14:09:18.680

除了更频繁地重新同步时钟之外，我认为除了购买新主板之外您无能为力，因为您的时钟信号似乎不在正确的频率上。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-02-12T21:18:01.140

[http://www.codinghorror.com/blog/2007/01/keeping-time-on-the-pc.html](http://www.codinghorror.com/blog/2007/01/keeping-time-on-the-pc.html)

> PC 时钟通常应精确到每天几秒钟之内。如果你正在经历巨大的时钟漂移——每天大约几分钟——首先要检查的是你的交流电源。我个人观察到将 UPS 插入另一个 UPS 的系统（顺便说一句，这是一个禁忌），每天增加几分钟。从链中移除不必要的 UPS 解决了时间问题。我不是硬件工程师，但我猜测电源中的某些定时信号被主板上的实时时钟芯片使用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-02-12T21:04:33.930

如前所述，Java 程序可能会导致此问题。

另一个不需要修改代码的解决方案是添加 VM 参数`-XX:+ForceTimeHighResolution`（可在[NTP 支持页面](http://support.ntp.org/bin/view/Support/KnownOsIssues#Section_9.2.3.)上找到）。

> 9.2.3\. Windows 和 Sun 的 Java 虚拟机
> 
> Sun 的 Java 虚拟机需要使用 >-XX:+ForceTimeHighResolution 参数启动，以避免丢失中断。
> 
> 有关详细信息，请参阅[http://www.macromedia.com/support/coldfusion/ts/documents/createuuid_clock_speed.htm](http://www.macromedia.com/support/coldfusion/ts/documents/createuuid_clock_speed.htm)。

从引用的链接（通过[Wayback 机器](https://web.archive.org/web/20041023080803/http://www.macromedia.com/support/coldfusion/ts/documents/createuuid_clock_speed.htm)- 原始链接已消失）：

> ColdFusion MX：CreateUUID 提高 Windows 系统时钟速度
> 
> 在 Macromedia ColdFusion MX 及更高版本的负载下多次调用 createUUID 函数会导致 Windows 系统时钟加速。这是 Java 虚拟机 (JVM) 的一个问题，其中 Thread.sleep 调用少于 10 毫秒 (ms) 会导致 Windows 系统时钟运行得更快。此行为最初作为 Sun Java 错误 4500388 (developer.java.sun.com/developer/bugParade/bugs/4500388.html) 提交，并已在 1.3.x 和 1.4.x JVM 中得到确认。
> 
> 在 ColdFusion MX 中，createUUID 函数有一个 1 毫秒的内部 Thread.sleep 调用。当 createUUID 被大量使用时，Windows 系统时钟将每分钟增加几秒。加速率与 createUUID 调用的数量和 ColdFusion MX 服务器上的负载成正比。Macromedia 在 Windows XP、2000 和 2003 系统上的 ColdFusion MX 和更高版本中观察到了这种行为。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-19T14:10:08.633

增加重新同步的频率。如果同步是与您自己网络上的主服务器同步，则没有理由不每分钟同步一次。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-19T14:11:11.533

更频繁地同步。查看[W32Time 服务的注册表项](http://support.microsoft.com/kb/223184)，尤其是“Period”。“SpecialSkew”听起来会帮助你。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-19T14:13:23.430

时钟漂移可能是温度的结果；也许您可以尝试使温度更加恒定-也许使用更好的冷却？不过，你永远不会完全放弃漂移。

使用外部时钟（GPS 接收器等），以及将 CPU 时间与绝对时间相关联的统计方法是我们在这里用来同步分布式系统中的事件的方法。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-09-04T08:51:22.427

因为听起来你有一个大生意：

拿一台旧的笔记本电脑或其他没什么用的东西，但似乎有一个或多或少可靠的时钟，并将其称为计时器。计时员的唯一工作是每（例如）2 分钟一次，向服务器发送一条消息，告知时间。服务器不会使用 Windows 时钟作为它们的时间戳，而是记下从 Timekeeper 的最后一个信号开始的时间，加上从该信号开始经过的时间。每周用手表检查一次或两次计时员的时钟。这应该足够了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-19T14:13:56.457

你在运行什么服务器？在台式机中，我遇到这种情况的时间是启用了扩频 FSB，这会导致中断时序出现一些问题，这就是时钟滴答作响的原因。可能想看看这是否是其中一台服务器上的 BIOS 中的一个选项，如果启用则将其关闭。

您拥有的另一个选项是编辑时间轮询间隔并使用以下注册表项使其更短，很可能您必须添加它（注意这是一个 DWORD 值，该值以秒为单位，例如 600 表示 10 分钟） ：

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\W32Time\TimeProviders\NtpClient\SpecialPollInterval 
```

这是一个完整的检查：**[KB816042](http://support.microsoft.com/kb/816042)**

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-19T14:39:02.057

我曾经写过一个 Delphi 类来处理时间重新同步。它粘贴在下面。现在我看到了 Larry Silverman 提到的“w32tm”命令，我怀疑我是在浪费时间。

```
unit TimeHandler;

interface

type
  TTimeHandler = class
  private
    FServerName : widestring;
  public
    constructor Create(servername : widestring);
    function RemoteSystemTime : TDateTime;
    procedure SetLocalSystemTime(settotime : TDateTime);
  end;

implementation

uses
  Windows, SysUtils, Messages;

function NetRemoteTOD(ServerName :PWideChar; var buffer :pointer) : integer; stdcall; external 'netapi32.dll';
function NetApiBufferFree(buffer : Pointer) : integer; stdcall; external 'netapi32.dll';

type
  //See MSDN documentation on the TIME_OF_DAY_INFO structure.
  PTime_Of_Day_Info = ^TTime_Of_Day_Info;
  TTime_Of_Day_Info = record
    ElapsedDate : integer;
    Milliseconds : integer;
    Hours : integer;
    Minutes : integer;
    Seconds : integer;
    HundredthsOfSeconds : integer;
    TimeZone : LongInt;
    TimeInterval : integer;
    Day : integer;
    Month : integer;
    Year : integer;
    DayOfWeek : integer;
  end;

constructor TTimeHandler.Create(servername: widestring);
begin
  inherited Create;
  FServerName := servername;
end;

function TTimeHandler.RemoteSystemTime: TDateTime;
var
  Buffer : pointer;
  Rek : PTime_Of_Day_Info;
  DateOnly, TimeOnly : TDateTime;
  timezone : integer;
begin
  //if the call is successful...
  if 0 = NetRemoteTOD(PWideChar(FServerName),Buffer) then begin
    //store the time of day info in our special buffer structure
    Rek := PTime_Of_Day_Info(Buffer);

    //windows time is in GMT, so we adjust for our current time zone
    if Rek.TimeZone <> -1 then
      timezone := Rek.TimeZone div 60
    else
      timezone := 0;

    //decode the date from integers into TDateTimes
    //assume zero milliseconds
    try
      DateOnly := EncodeDate(Rek.Year,Rek.Month,Rek.Day);
      TimeOnly := EncodeTime(Rek.Hours,Rek.Minutes,Rek.Seconds,0);
    except on e : exception do
      raise Exception.Create(
                             'Date retrieved from server, but it was invalid!' +
                             #13#10 +
                             e.Message
                            );
    end;

    //translate the time into a TDateTime
    //apply any time zone adjustment and return the result
    Result := DateOnly + TimeOnly - (timezone / 24);
  end  //if call was successful
  else begin
    raise Exception.Create('Time retrieval failed from "'+FServerName+'"');
  end;

  //free the data structure we created
  NetApiBufferFree(Buffer);
end;

procedure TTimeHandler.SetLocalSystemTime(settotime: TDateTime);
var
  SystemTime : TSystemTime;
begin
  DateTimeToSystemTime(settotime,SystemTime);
  SetLocalTime(SystemTime);
  //tell windows that the time changed
  PostMessage(HWND_BROADCAST,WM_TIMECHANGE,0,0);
end;

end. 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-19T15:17:04.650

我相信 Windows 时间服务只实现了 SNTP，它是 NTP 的简化版本。完整的 NTP 实施会在决定同步频率时考虑时钟的稳定性。

您可以在[此处获取适用于 Windows 的完整 NTP 服务器](http://support.ntp.org/bin/view/Main/ExternalTimeRelatedLinks#Microsoft_Windows)。

# c# - Farseer 物理教程，帮助文件

> ID：102070
> 
> 赞同：11
> 
> 时间：2008-09-19T14:05:43.620
> 
> 标签：c#, silverlight, .net-3.5, farseer

有没有适合初学者c#程序员使用的教程或帮助文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-19T15:30:31.263

Farseer Physics 引擎的主要文档位于主页上。

[http://www.codeplex.com/FarseerPhysics/Wiki/View.aspx?title=Documentation&referringTitle=Home](http://www.codeplex.com/FarseerPhysics/Wiki/View.aspx?title=Documentation&referringTitle=Home)

您也可以查看源代码，那里有一个 demos 文件夹，虽然它只有一个示例，但它可以向您展示如何实现引擎

[http://www.codeplex.com/FarseerPhysics/SourceControl/DirectoryView.aspx?SourcePath=%24%2fFarseerPhysics%2fDemos%2fXNA3%2fGettingStarted&changeSetId=40048](http://www.codeplex.com/FarseerPhysics/SourceControl/DirectoryView.aspx?SourcePath=%24%2fFarseerPhysics%2fDemos%2fXNA3%2fGettingStarted&changeSetId=40048)

万不得已，请查看他们的论坛，并提出一些问题。他们看起来足够好，应该能够帮助您解决任何问题。

[http://www.codeplex.com/FarseerPhysics/Thread/List.aspx](http://www.codeplex.com/FarseerPhysics/Thread/List.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-12-17T19:22:13.640

我意识到这是一个老问题，但对于未来的搜索者，我将发布一些链接：

**Farseer 物理助手**

Blend 的物理助手可以很容易地使用几乎没有代码来创建逼真的游戏或演示 :)

[http://physicshelper.codeplex.com/](http://physicshelper.codeplex.com/)

**Farseer 物理引擎简单示例**

非常简单易懂的示例（与原始的 Farseer 相比）

[http://farseerssimplesamples.codeplex.com/](http://farseersimplesamples.codeplex.com/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-19T15:27:21.817

Andy Beaulieu 一直在做很多工作以使 Farseer 在 Silverlight 中更易于使用，您可以在此处阅读有关它的信息：

[http://www.andybeaulieu.com/Home/tabid/67/EntryID/115/Default.aspx](http://www.andybeaulieu.com/Home/tabid/67/EntryID/115/Default.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-03-23T01:36:15.617

带有 Farseer 教程的精彩网络广播 - [http://msdn.microsoft.com/en-us/hh781459.aspx](http://msdn.microsoft.com/en-us/hh781459.aspx)

# tdd - 与 TDD 的对抗性/幼稚配对：它的效果如何？

> ID：102072
> 
> 赞同：3
> 
> 时间：2008-09-19T14:05:55.007
> 
> 标签：tdd, pair-programming

我的一个朋友正在解释他们如何在他的工作场所使用 TDD 进行乒乓配对，他说他们采用“对抗性”方法。也就是说，当测试编写人员将键盘交给实施者时，实施者会尝试做最简单（有时是错误的事情）以使测试通过。

例如，如果他们正在测试 GetName() 方法并且测试检查“Sally”，则 GetName 方法的实现将是：

```
public string GetName(){
    return "Sally";
} 
```

当然，这会（天真地）通过测试。

他解释说，这有助于消除检查特定固定值的幼稚测试，而不是测试组件的实际行为或预期状态。它还有助于推动创建更多测试并最终实现更好的设计和更少的错误。

听起来不错，但在与他的短暂对话中，通过一轮测试似乎比其他方式花费了更长的时间，我并不觉得获得了很多额外的价值。

您是否使用这种方法，如果是，您是否看到它得到了回报？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-03T21:32:11.310

它可能非常有效。

它迫使您更多地考虑您必须编写什么测试才能让其他程序员编写您需要的正确功能。

您经常通过键盘逐段构建代码

这可能非常累人且耗时，但我发现很少有我不得不回来修复任何像这样编写的代码中的错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T14:25:05.353

我用过这种方法。它不适用于所有配对；有些人只是天生抗拒，不会给它一个诚实的机会。但是，它可以帮助您正确执行 TDD 和 XP。您想尝试慢慢地将功能添加到您的代码库中。您不想编写需要大量代码才能满足的庞大的单体测试。你想要一堆简单的测试。您还需要确保定期在两对之间来回传递键盘，以便两对都接合。有了对抗性配对，你就可以做到这两点。简单的测试导致简单的实现，代码构建缓慢，整个过程都涉及到两个人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T21:33:58.987

我有时喜欢它——但不要一直使用这种风格。有时可以很好地改变节奏。我不认为我想一直使用这种风格。

我发现它对于初学者来说是一个有用的工具，可以介绍测试如何推动实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-12T20:10:45.657

（首先，Adversarial TDD 应该很有趣。它应该是一个教学的机会。它不应该是人类统治仪式的机会。如果没有一点幽默的空间，那就离开团队。抱歉。在消极的环境中浪费生命是短暂的。）

这里的问题是命名错误的测试。如果测试看起来像这样：

```
foo = new Thing("Sally")
assertEquals("Sally", foo.getName()) 
```

然后我打赌它被命名为“ `testGetNameReturnsNameField`”。这是一个坏名字，但不是立即明显如此。此测试的正确名称是“ `testGetNameReturnsSally`”。这就是它的作用。任何其他名称都会使您产生虚假的安全感。所以这个测试的名字很糟糕。问题不在于代码。问题甚至不是测试。问题是测试的名称。

相反，如果测试人员将测试命名为“ `testGetNameReturnsSally`”，那么很明显这可能不是测试我们想要的。

因此，实施者有责任证明测试人员的错误选择。实现者的职责也是只写测试对他们的要求。

生产中出现如此多的错误不是因为代码做得比预期的少，而是因为它做得更多。是的，对所有预期的情况都有单元测试，但没有对代码所做的所有特殊边缘情况进行测试，因为程序员认为“我最好也这样做，我们可能需要那个”然后忘记了它。这就是为什么 TDD 比 test-after 工作得更好。这就是为什么我们在峰值之后丢弃代码。代码可能会做你想做的所有事情，但它可能会做一些你认为需要的事情，然后忘记了。

强迫测试作者测试他们真正想要的。仅编写代码以使测试通过，仅此而已。

RandomStringUtils 是你的朋友。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-09-19T14:37:52.777

这是基于团队的个性。每个团队的个性都是其成员的总和。您必须小心，不要以优越感来实践被动攻击性实施。一些开发人员对像这样的实现感到沮丧

> `return "Sally";`

这种挫败感将导致一个不成功的团队。我很沮丧，没有看到它得到回报。我认为更好的方法是进行更多的口头交流，就如何更好地实施测试提出建议。

# c# - C#.net 数据网格

> ID：102082
> 
> 赞同：0
> 
> 时间：2008-09-19T14:06:39.547
> 
> 标签：c#, .net, datagrid

如何在datagrid c#.net windows窗体中添加子行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-19T14:18:12.123

我不确定这是否是您要问的，但是如果您想附加行，最简单的方法是将它们附加到您在 DataBind() 之前使用的任何 DataSource

如果这不是您所追求的，请提供更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T14:18:28.223

通常您将数据网格绑定到数据集。您能否澄清一下您在寻找什么，以便我们更详细地了解？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T14:30:32.407

```
DataTable myDataTable = new DataTable();
DataGridView myGridView = new DataGridView();
myGridView.DataSource = myDataTable;
DataRow row = myDataTable.Rows.Add(1, 2, 3, 4, 5); //This adds the new row 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T14:37:00.067

如果您正在寻找嵌套表，则必须使用第三方控件。DataGridView 不支持它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-25T19:28:41.593

首先确定您的数据 GridView 名称并创建 DataTable

```
DataTable DT= new DataTable(); 
```

然后还创建 DataRow

```
DataRow row = new DataRow(); 
```

最后调用 add() 函数像这样：

```
 DT.Rows.Add("ID","Name","Addr","number"); 
```

并且不要错过在 DataGrideView 上设置源以显示数据：

```
DataGrideView.DataSource = DT; 
```

# regex - 在多个文件中查找和替换正则表达式的最佳工具是什么？

> ID：102083
> 
> 赞同：30
> 
> 时间：2008-09-19T14:06:45.257
> 
> 标签：regex, search, replace

如果可能的话，最好是免费的工具。

此外，搜索多个正则表达式并将每个替换为不同字符串的选项将是一个奖励。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2008-09-19T14:13:46.190

珀尔。

说真的，它使系统管理员的工作变得更加容易。这是一个例子：

```
perl -pi -e 's/something/somethingelse/g' *.log 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2008-09-19T15:19:53.490

`sed`快速简单：

```
sed -e "s/pattern/result/" <file list> 
```

你也可以加入它`find`：

```
find <other find args> -exec sed -e "s/pattern/result/" "{}" ";" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-23T19:50:29.703

我已经为 Windows 编写了一个免费的命令行工具来执行此操作。它被称为[rxrepl](https://sites.google.com/site/regexreplace/)，它支持 unicode 和文件搜索。有些人可能会觉得它很有用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-19T14:11:47.927

[Textpad](http://www.textpad.com/)在 Windows 上做得很好。它也是一个非常好的编辑器。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-19T14:16:02.003

不出所料，Perl 可以很好地处理这个问题，并结合了一个不错的 shell：

```
for file in @filelist ; do
  perl -p -i -e "s/pattern/result/g" $file
done 
```

这具有与以下相同的效果（但效率更高，并且没有竞争条件）：

```
for file in @filelist ; do
  cat $file | sed "s/pattern/result/" > /tmp/newfile
  mv /tmp/newfile $file
done 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-19T14:17:25.837

Emacs 的目录编辑器具有 `dired-do-query-replace-regexp' 功能来搜索和替换一组标记文件的正则表达式。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-19T14:10:40.270

Windows下，以前喜欢[WinGrep](http://www.wingrep.com)

在 Ubuntu 下，我使用 Regexxer。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-10-14T18:09:53.023

对于 Windows 上的多个文件的查找和替换，我发现[rxFind](http://www.codeplex.com/RxFind)非常有用。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-19T14:12:18.207

对于 Mac OS X，TextWrangler 可以完成这项工作。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-06-07T21:19:37.350

我个人最喜欢的是[JGSoft](http://www.powergrep.com/)的 PowerGrep。它与[RegexBuddy](http://www.regexbuddy.com/)接口，可以帮助您创建和测试正则表达式，自动备份所有更改（并提供撤消功能），提供解析多个目录（带有文件名模式）的能力，甚至支持 Microsoft Word 等文件格式、Excel 和 PDF。

![PowerGrep 截图](../Images/c73b8e2d14b8cecdbb126facc04a53a1.png)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-03-22T18:27:02.100

在 Windows 中，有一个效果最好的免费替代方案：Notepad++

转到“搜索”->“在文件中查找”。可以给出目录、文件模式、设置正则表达式，然后预览匹配项，最后递归替换所有文件。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-01-28T15:26:06.053

我喜欢这个工具：

[http://www.abareplace.com/](http://www.abareplace.com/)

为您提供正则表达式的“键入时”预览......对于那些不熟悉 RE 的人来说太棒了......并且一次更改数百或数千个文件的速度非常快......

然后让您也撤消您的更改...

非常好...

帕特里克·斯蒂尔 - [http://www.podiotools.com](http://www.podiotools.com)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-19T14:11:38.240

我会选择 bash + find + sed。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-19T14:12:39.657

[jEdit](http://www.jedit.org)在文件中的正则表达式搜索和替换相当不错。但是，如果您仅将其用于此目的，则有点矫枉过正。它也不支持您要求的多表达式替换。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-19T14:26:27.063

Vim 用于救援（和总统 ;-)）。尝试：

```
vim -c "argdo! s:foo:bar:gci" <list_of_files> 
```

（我很喜欢 Vim 的 -c 开关，它很神奇。或者如果你已经在 Vim 中，并打开了文件，例如：

```
vim <list_of_files> 
```

只需发出：

```
:bufdo! s:foo:bar:gci 
```

当然`sed`，`perl`也有能力。HTH。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-06-12T21:13:39.207

我拥有 Unix 和 Ubuntu 的奢侈；在这两种情况下，我都将**gawk**用于需要逐行搜索和替换的任何内容，尤其是对于子字符串的逐行搜索。最近，这是针对数百个文件（一个目录）中的数百万行处理 1100 次更改的最快方法在 Ubuntu 上，我是 regexxer 的粉丝

```
 sudo apt-get install regexxer 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-07-10T20:17:02.587

如果 'textpad' 是一个有效的答案，我会建议[Sublime Text](http://www.sublimetext.com/)放下手。

一般来说，多光标编辑是一种更有效的替换方式，但它的“[在文件中查找](http://docs.sublimetext.info/en/latest/search_and_replace/search_and_replace_files.html)”是批量正则表达式/普通查找替换的顶级。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-05-20T16:24:29.777

如果您是程序员：很多 IDE 也应该做得很好。

对我来说，[PyCharm](https://www.jetbrains.com/de-de/pycharm/)工作得很好：

*   *编辑>查找>替换路径*或**Strg + Shift + R**
*   检查顶部的正则*表达式*

它有一个实时预览。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-06-07T21:12:30.283

我发现[RxFind](http://rxfind.codeplex.com/)工具很有用（免费 OSS）。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-04-10T14:32:01.770

[括号](http://brackets.io)（源代码、deb/Ubuntu、OSx 和 Windows）具有良好的结果可视化效果，允许单独选择它们以应用替换。您可以按标准文本、区分大小写或不区分大小写以及正则表达式进行搜索。非常重要：您可以在搜索中排除文件和目录的模式。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-10-03T19:35:17.200

至少 25 年来，我一直在使用 Emacs 对大量文件进行大规模替换。运行`etags`以指定要搜索的任何文件集：

```
$ etags file1.txt file2.md dir1/*.yml dir2/*.json dir3/*.md 
```

然后打开 Emacs 并运行`tags-query-replace`，提示输入正则表达式和替换：

```
\b\(foo\)\b
\1bar 
```

# vb.net - VB.NET 的隐藏特性？

> ID：102084
> 
> 赞同：121
> 
> 时间：2008-09-19T14:07:01.887
> 
> 标签：vb.net, hidden-features

我已经通过浏览[C# 的隐藏特性](https://stackoverflow.com/questions/9033/hidden-features-of-c)学到了很多东西，当我找不到与 VB.NET 类似的东西时，我感到很惊讶。

那么它的一些隐藏或鲜为人知的功能是什么？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2008-09-19T14:16:17.807

该`Exception When`条款在很大程度上是未知的。

考虑一下：

```
Public Sub Login(host as string, user as String, password as string, _
                            Optional bRetry as Boolean = False)
Try
   ssh.Connect(host, user, password)
Catch ex as TimeoutException When Not bRetry
   ''//Try again, but only once.
   Login(host, user, password, True)
Catch ex as TimeoutException
   ''//Log exception
End Try
End Sub 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2008-09-19T14:22:32.113

# 定制`Enum`_

VB真正*隐藏*`completionlist`的特性之一是XML 文档标记，可用于创建`Enum`具有扩展功能的类似自己的类型。但是，此功能在 C# 中不起作用。

我最近的代码中的一个示例：

```
'
''' <completionlist cref="RuleTemplates"/>
Public Class Rule
    Private ReadOnly m_Expression As String
    Private ReadOnly m_Options As RegexOptions

    Public Sub New(ByVal expression As String)
        Me.New(expression, RegexOptions.None)
    End Sub

    Public Sub New(ByVal expression As String, ByVal options As RegexOptions)
        m_Expression = expression
        m_options = options
    End Sub

    Public ReadOnly Property Expression() As String
        Get
            Return m_Expression
        End Get
    End Property

    Public ReadOnly Property Options() As RegexOptions
        Get
            Return m_Options
        End Get
    End Property
End Class

Public NotInheritable Class RuleTemplates
    Public Shared ReadOnly Whitespace As New Rule("\s+")
    Public Shared ReadOnly Identifier As New Rule("\w+")
    Public Shared ReadOnly [String] As New Rule("""([^""]|"""")*""")
End Class 
```

现在，当为声明为 的变量赋值时`Rule`，IDE 会提供一个 IntelliSense 列表，其中包含`RuleTemplates`.

## /编辑：

由于这是一个依赖于 IDE 的功能，因此在使用它时很难展示它的外观，但我将仅使用屏幕截图：

[完成列表在行动 http://page.mi.fu-berlin.de/krudolph/stuff/completionlist.png](http://page.mi.fu-berlin.de/krudolph/stuff/completionlist.png)

事实上，IntelliSense 与使用`Enum`.

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2009-02-01T11:57:04.797

你注意到 Like 比较运算符了吗？

`Dim b As Boolean = "file.txt" Like "*.txt"`

更多来自[MSDN](http://msdn.microsoft.com/en-us/library/swf8kaxw.aspx)

```
Dim testCheck As Boolean

' The following statement returns True (does "F" satisfy "F"?)'
testCheck = "F" Like "F"

' The following statement returns False for Option Compare Binary'
'    and True for Option Compare Text (does "F" satisfy "f"?)'
testCheck = "F" Like "f"

' The following statement returns False (does "F" satisfy "FFF"?)'
testCheck = "F" Like "FFF"

' The following statement returns True (does "aBBBa" have an "a" at the'
'    beginning, an "a" at the end, and any number of characters in '
'    between?)'
testCheck = "aBBBa" Like "a*a"

' The following statement returns True (does "F" occur in the set of'
'    characters from "A" through "Z"?)'
testCheck = "F" Like "[A-Z]"

' The following statement returns False (does "F" NOT occur in the '
'    set of characters from "A" through "Z"?)'
testCheck = "F" Like "[!A-Z]"

' The following statement returns True (does "a2a" begin and end with'
'    an "a" and have any single-digit number in between?)'
testCheck = "a2a" Like "a#a"

' The following statement returns True (does "aM5b" begin with an "a",'
'    followed by any character from the set "L" through "P", followed'
'    by any single-digit number, and end with any character NOT in'
'    the character set "c" through "e"?)'
testCheck = "aM5b" Like "a[L-P]#[!c-e]"

' The following statement returns True (does "BAT123khg" begin with a'
'    "B", followed by any single character, followed by a "T", and end'
'    with zero or more characters of any type?)'
testCheck = "BAT123khg" Like "B?T*"

' The following statement returns False (does "CAT123khg" begin with'
'    a "B", followed by any single character, followed by a "T", and'
'    end with zero or more characters of any type?)'
testCheck = "CAT123khg" Like "B?T*" 
```

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2008-09-19T14:40:02.523

# 类型定义

VB 知道一种原始的`typedef`通过`Import`别名：

```
Imports S = System.String

Dim x As S = "Hello" 
```

这在与泛型类型结合使用时更有用：

```
Imports StringPair = System.Collections.Generic.KeyValuePair(Of String, String) 
```

* * *

## 回答 #5

> 赞同：45
> 
> 时间：2008-09-19T14:34:09.667

哦！并且不要忘记[XML Literals](http://msdn.microsoft.com/en-us/library/bb384629.aspx)。

```
Dim contact2 = _
        <contact>
          <name>Patrick Hines</name>
          <%= From p In phoneNumbers2 _
            Select <phone type=<%= p.Type %>><%= p.Number %></phone> _
          %>
        </contact> 
```

* * *

## 回答 #6

> 赞同：39
> 
> 时间：2008-09-19T14:17:56.633

对象初始化也在那里！

```
Dim x as New MyClass With {.Prop1 = foo, .Prop2 = bar} 
```

* * *

## 回答 #7

> 赞同：38
> 
> 时间：2008-09-19T16:06:08.713

# `DirectCast`

`DirectCast`是一个奇迹。从表面上看，它的工作原理类似于`CType`运算符，因为它将对象从一种类型转换为另一种类型。但是，它遵循一套更严格的规则。`CType`因此， 的实际行为通常是不透明的，并且执行哪种转换完全不明显。

`DirectCast`仅支持两种不同的操作：

*   值类型的拆箱，以及
*   在类层次结构中向上转换。

`Integer`任何其他强制转换都将不起作用（例如，尝试将 an 拆箱`Double`）并将导致编译时/运行时错误（取决于情况和静态类型检查可以检测到的内容）。因此，我`DirectCast`尽可能使用它，因为这最能体现我的意图：根据具体情况，我要么对已知类型的值进行拆箱，要么执行向上转型。故事结局。

`CType`另一方面，使用让代码的读者想知道程序员的真正意图是什么，因为它可以解析各种不同的操作，包括调用用户定义的代码。

为什么这是一个隐藏功能？VB 团队发布了一个指导方针¹，不鼓励使用`DirectCast`（即使它实际上更快！）以使代码更加统一。我认为这是一个糟糕的指导方针，应该颠倒过来：**只要有可能，优先`DirectCast`考虑更通用的`CType`运算符。**它使代码更清晰。`CType`另一方面，只有在确实是这样的情况下才应该调用，即当一个窄化`CType`运算符（参见[运算符重载](http://msdn.microsoft.com/en-us/library/yf7b9sy7(VS.80).aspx)）应该被调用时。

* * *

^(1))我无法提供该指南的链接，但我发现[Paul Vick](http://www.panopticoncentral.net/archive/2003/07/10/149.aspx)对此表示赞同（VB 团队的首席开发人员）：

> 在现实世界中，您几乎不会注意到差异，因此您不妨使用更灵活的转换运算符，如 CType、CInt 等。

* * *

（Zack 编辑：在此处了解更多信息：[我应该如何在 VB.NET 中进行投射？](https://stackoverflow.com/questions/40764/how-should-i-cast-in-vbnet)）

* * *

## 回答 #8

> 赞同：37
> 
> 时间：2008-09-19T14:14:25.207

# `If`条件和合并运算符

> 我不知道你会怎么称呼它，但是 Iif([expression],[value if true],[value if false]) As Object 函数可以计数。

它不像被**弃用**那样隐藏！VB 9 具有`If`更好的运算符，并且与 C# 的条件和合并运算符完全相同（取决于您想要什么）：

```
Dim x = If(a = b, c, d)

Dim hello As String = Nothing
Dim y = If(hello, "World") 
```

* * *

编辑以显示另一个示例：

这将适用于`If()`，但会导致异常`IIf()`

```
Dim x = If(b<>0,a/b,0) 
```

* * *

## 回答 #9

> 赞同：32
> 
> 时间：2008-12-26T19:59:06.013

这是一个不错的。VB.Net 中的 Select Case 语句非常强大。

当然有标准

```
Select Case Role
  Case "Admin"
         ''//Do X
  Case "Tester"
         ''//Do Y
  Case "Developer"
         ''//Do Z
  Case Else
       ''//Exception case
End Select 
```

但还有更多...

你可以做范围：

```
Select Case Amount
 Case Is < 0
    ''//What!!
 Case 0 To 15
   Shipping = 2.0
 Case 16 To 59
    Shipping = 5.87
 Case Is > 59
    Shipping = 12.50
 Case Else
    Shipping = 9.99
 End Select 
```

甚至更多...

您可以（尽管可能不是一个好主意）对多个变量进行布尔检查：

```
Select Case True
 Case a = b
    ''//Do X
 Case a = c
    ''//Do Y
 Case b = c
    ''//Do Z
 Case Else
   ''//Exception case
 End Select 
```

* * *

## 回答 #10

> 赞同：31
> 
> 时间：2008-09-19T14:10:48.723

我一直使用的一个主要的省时方法是**With**关键字：

```
With ReallyLongClassName
    .Property1 = Value1
    .Property2 = Value2
    ...
End With 
```

我只是不喜欢打字超过我必须的！

* * *

## 回答 #11

> 赞同：31
> 
> 时间：2009-06-02T16:13:53.457

最好和最简单的 CSV 解析器：

```
Microsoft.VisualBasic.FileIO.TextFieldParser 
```

通过添加对 Microsoft.VisualBasic 的引用，这可以在任何其他 .Net 语言中使用，例如 C#

* * *

## 回答 #12

> 赞同：26
> 
> 时间：2008-09-19T14:10:43.263

*   AndAlso/OrElse 逻辑运算符

（编辑：在此处了解更多信息：[我应该始终使用 AndAlso 和 OrElse 运算符吗？](https://stackoverflow.com/questions/55013/should-i-always-use-the-andalso-and-orelse-operators)）

* * *

## 回答 #13

> 赞同：25
> 
> 时间：2008-10-03T16:49:54.233

**方法中的静态成员。**

例如：

```
Function CleanString(byval input As String) As String
    Static pattern As New RegEx("...")

    return pattern.Replace(input, "")
End Function 
```

在上面的函数中，无论调用多少次，模式正则表达式只会被创建一次。

另一个用途是在周围保留一个“随机”实例：

```
Function GetNextRandom() As Integer
    Static r As New Random(getSeed())

    Return r.Next()
End Function 
```

此外，这与简单地将其声明为类的 Shared 成员不同；以这种方式声明的项目也保证是线程安全的。在这种情况下这无关紧要，因为表达式永远不会改变，但在其他情况下它可能会改变。

* * *

## 回答 #14

> 赞同：25
> 
> 时间：2009-07-13T15:44:40.117

在 vb 中，这些运算符之间存在差异：

`/`is忽略余`Double`
`\`数`Integer`

```
Sub Main()
    Dim x = 9 / 5  
    Dim y = 9 \ 5  
    Console.WriteLine("item x of '{0}' equals to {1}", x.GetType.FullName, x)
    Console.WriteLine("item y of '{0}' equals to {1}", y.GetType.FullName, y)

    'Results:
    'item x of 'System.Double' equals to 1.8
    'item y of 'System.Int32' equals to 1
End Sub 
```

* * *

## 回答 #15

> 赞同：23
> 
> 时间：2008-09-19T17:20:29.190

# 自定义事件

虽然很少有用，但事件处理可以大量定制：

```
Public Class ApplePie
    Private ReadOnly m_BakedEvent As New List(Of EventHandler)()

    Custom Event Baked As EventHandler
        AddHandler(ByVal value As EventHandler)
            Console.WriteLine("Adding a new subscriber: {0}", value.Method)
            m_BakedEvent.Add(value)
        End AddHandler

        RemoveHandler(ByVal value As EventHandler)
            Console.WriteLine("Removing subscriber: {0}", value.Method)
            m_BakedEvent.Remove(value)
        End RemoveHandler

        RaiseEvent(ByVal sender As Object, ByVal e As EventArgs)
            Console.WriteLine("{0} is raising an event.", sender)
            For Each ev In m_BakedEvent
                ev.Invoke(sender, e)
            Next
        End RaiseEvent
    End Event

    Public Sub Bake()
        ''// 1\. Add ingredients
        ''// 2\. Stir
        ''// 3\. Put into oven (heated, not pre-heated!)
        ''// 4\. Bake
        RaiseEvent Baked(Me, EventArgs.Empty)
        ''// 5\. Digest
    End Sub
End Class 
```

然后可以通过以下方式对其进行测试：

```
Module Module1
    Public Sub Foo(ByVal sender As Object, ByVal e As EventArgs)
        Console.WriteLine("Hmm, freshly baked apple pie.")
    End Sub

    Sub Main()
        Dim pie As New ApplePie()
        AddHandler pie.Baked, AddressOf Foo
        pie.Bake()
        RemoveHandler pie.Baked, AddressOf Foo
    End Sub
End Module 
```

* * *

## 回答 #16

> 赞同：23
> 
> 时间：2008-10-10T11:13:39.103

我非常喜欢Visual Basic 2005 中引入的**“My”命名空间。My***是*多组信息和功能的快捷方式。它提供对以下类型信息的快速直观的访问：

*   **My.Computer**：访问与计算机相关的信息，例如文件系统、网络、设备、系统信息等。它提供对许多非常重要的资源的访问，包括 My.Computer.Network、My.Computer.FileSystem 和 My .计算机.打印机。
*   **My.Application**：访问与特定应用程序相关的信息，例如名称、版本、当前目录等。
*   **My.User**：访问与当前经过身份验证的用户相关的信息。
*   **My.Resources**：以强类型方式访问驻留在资源文件中的应用程序使用的资源。
*   **My.Settings**：以强类型方式访问应用程序的配置设置。

* * *

## 回答 #17

> 赞同：21
> 
> 时间：2009-03-14T16:22:55.517

我刚刚发现一篇关于“！”的文章。运算符，也称为“字典查找运算符”。以下是文章摘录：http: [//panopticoncentral.net/articles/902.aspx](http://panopticoncentral.net/articles/902.aspx)

> 的技术名称！运算符是“字典查找运算符”。字典是由键而不是数字索引的任何集合类型，就像英语词典中的条目由您想要定义的单词索引的方式一样。字典类型最常见的示例是 System.Collections.Hashtable，它允许您将（键、值）对添加到哈希表中，然后使用键检索值。例如，以下代码将三个条目添加到哈希表，并使用键“Pork”查找其中一个。

```
Dim Table As Hashtable = New Hashtable
Table("Orange") = "A fruit"
Table("Broccoli") = "A vegetable"
Table("Pork") = "A meat" 
Console.WriteLine(Table("Pork")) 
```

> 这 ！运算符可用于从任何使用字符串索引其值的字典类型中查找值。! 之后的标识符 用作查找操作中的键。所以上面的代码可以改为：

```
Dim Table As Hashtable = New Hashtable
Table!Orange = "A fruit"
Table!Broccoli = "A vegetable"
Table!Pork = "A meat"
Console.WriteLine(Table!Pork) 
```

> 第二个例子完全等同于第一个，但看起来好多了，至少在我看来。我发现有很多地方！可以使用，尤其是在涉及到 XML 和 Web 时，其中只有大量由字符串索引的集合。一个不幸的限制是 ! 仍然必须是一个有效的标识符，所以如果你想用作键的字符串中有一些无效的标识符字符，你不能使用 ! 操作员。（例如，您不能说“Table!AB$CD = 5”，因为 $ 在标识符中是不合法的。）在 VB6 及之前的版本中，您可以使用括号来转义无效的标识符（即“Table![AB$ CD]")，但是当我们开始使用方括号来转义关键字时，我们就失去了这样做的能力。在大多数情况下，
> 
> 要获得真正的技术性，如果 x 具有将字符串或对象作为参数的默认属性，则 x!y 有效。在这种情况下，x!y 将更改为 x.DefaultProperty("y")。一个有趣的旁注是，该语言的词汇语法中有一条特殊规则可以使这一切正常工作。这 ！字符在语言中也被用作类型字符，类型字符在运算符之前被吃掉。因此，如果没有特殊规则，x!y 将被扫描为“x!y”而不是“x!y”。幸运的是，由于语言中没有连续两个标识符有效的地方，我们只是引入了规则，如果 ! 之后的下一个字符 是标识符的开始，我们考虑！成为运算符而不是类型字符。

* * *

## 回答 #18

> 赞同：19
> 
> 时间：2008-09-19T14:28:48.713

这是内置的，与 C# 相比具有明显优势。无需使用相同名称即可实现接口方法的能力。

如：

```
Public Sub GetISCSIAdmInfo(ByRef xDoc As System.Xml.XmlDocument) Implements IUnix.GetISCSIInfo

End Sub 
```

* * *

## 回答 #19

> 赞同：17
> 
> 时间：2010-05-14T20:45:28.817

**强制 ByVal**

在 VB 中，如果您将参数包装在一组额外的括号中，您可以覆盖方法的 ByRef 声明并将其转换为 ByVal。例如，下面的代码产生 4, 5, 5 而不是 4,5,6

```
Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim R = 4
    Trace.WriteLine(R)
    Test(R)
    Trace.WriteLine(R)
    Test((R))
    Trace.WriteLine(R)
End Sub
Private Sub Test(ByRef i As Integer)
    i += 1
End Sub 
```

请参阅[过程调用未修改参数 - 基础变量](http://msdn.microsoft.com/en-us/library/8bkbyhtx.aspx#sectionToggle1)

* * *

## 回答 #20

> 赞同：16
> 
> 时间：2008-12-03T16:03:22.777

按名称传递参数，并重新排序它们

```
Sub MyFunc(Optional msg as String= "", Optional displayOrder As integer = 0)

    'Do stuff

End function 
```

用法：

```
Module Module1

    Sub Main()

        MyFunc() 'No params specified

    End Sub

End Module 
```

也可以使用“：=”参数规范以任意顺序调用：

```
MyFunc(displayOrder:=10, msg:="mystring") 
```

* * *

## 回答 #21

> 赞同：15
> 
> 时间：2008-09-19T14:24:00.877

从 VB 8 开始，Using 语句是新的，C# 从一开始就有它。它会自动为您调用 dispose。

例如

```
Using lockThis as New MyLocker(objToLock)

End Using 
```

* * *

## 回答 #22

> 赞同：14
> 
> 时间：2008-09-19T14:22:04.783

导入别名在很大程度上也是未知的：

```
Import winf = System.Windows.Forms

''Later
Dim x as winf.Form 
```

* * *

## 回答 #23

> 赞同：14
> 
> 时间：2008-09-19T14:48:10.663

如果您需要一个变量名称来匹配关键字的名称，请用括号括起来。不是。虽然是最佳实践 - 但可以明智地使用它。

例如

```
Class CodeException
Public [Error] as String
''...
End Class

''later
Dim e as new CodeException
e.Error = "Invalid Syntax" 
```

例如来自评论的示例（@Pondidum）：

```
Class Timer
Public Sub Start()
''...
End Sub

Public Sub [Stop]()
''...
End Sub 
```

* * *

## 回答 #24

> 赞同：14
> 
> 时间：2008-09-19T16:44:56.187

考虑以下事件声明

```
Public Event SomethingHappened As EventHandler 
```

在 C# 中，您可以使用以下语法检查事件订阅者：

```
if(SomethingHappened != null)
{
  ...
} 
```

但是，VB.NET 编译器不支持这一点。它实际上创建了一个在 IntelliSense 中不可见的隐藏私有成员字段：

```
If Not SomethingHappenedEvent Is Nothing OrElse SomethingHappenedEvent.GetInvocationList.Length = 0 Then
...
End If 
```

更多信息：

[http://jelle.druyts.net/2003/05/09/BehindTheScenesOfEventsInVBNET.aspx](http://jelle.druyts.net/2003/05/09/BehindTheScenesOfEventsInVBNET.aspx) [http://blogs.msdn.com/vbteam/archive/2009/09/25/testing-events-for-nothing-null-doug -rothaus.aspx](http://blogs.msdn.com/vbteam/archive/2009/09/25/testing-events-for-nothing-null-doug-rothaus.aspx)

* * *

## 回答 #25

> 赞同：13
> 
> 时间：2009-12-17T22:50:43.103

关于 XML Literals 有几个答案，但不是关于这个特定案例：

您可以使用 XML Literals 来包含原本需要转义的字符串文字。例如，包含双引号的字符串文字。

而不是这个：

```
Dim myString = _
    "This string contains ""quotes"" and they're ugly." 
```

你可以这样做：

```
Dim myString = _
    <string>This string contains "quotes" and they're nice.</string>.Value 
```

如果您正在测试用于 CSV 解析的文字，这将特别有用：

```
Dim csvTestYuck = _
    """Smith"", ""Bob"", ""123 Anywhere St"", ""Los Angeles"", ""CA"""

Dim csvTestMuchBetter = _
    <string>"Smith", "Bob", "123 Anywhere St", "Los Angeles", "CA"</string>.Value 
```

（当然，您不必使用`<string>`标签；您可以使用任何您喜欢的标签。）

* * *

## 回答 #26

> 赞同：12
> 
> 时间：2009-02-01T11:45:57.707

您可以在一行中包含 2 行代码。因此：

```
Dim x As New Something : x.CallAMethod 
```

* * *

## 回答 #27

> 赞同：12
> 
> 时间：2009-06-29T14:51:37.937

DateTime 可以通过用 # 包围您的日期来初始化

```
Dim independanceDay As DateTime = #7/4/1776# 
```

您还可以将类型推断与此语法一起使用

```
Dim independanceDay = #7/4/1776# 
```

这比使用构造函数要好得多

```
Dim independanceDay as DateTime = New DateTime(1776, 7, 4) 
```

* * *

## 回答 #28

> 赞同：11
> 
> 时间：2008-11-27T16:24:49.410

**可选参数**

可选项比创建新的重载要容易得多，例如：

```
Function CloseTheSystem(Optional ByVal msg AS String = "Shutting down the system...")
   Console.Writeline(msg)
   ''//do stuff
End Function 
```

* * *

## 回答 #29

> 赞同：9
> 
> 时间：2008-12-19T15:41:46.067

**带参数的属性**

我一直在做一些 C# 编程，并发现了 VB.Net 缺少的一个特性，但这里没有提到。

可以在以下位置查看如何执行此操作的示例（以及 c# 限制）：[Using thetypical get set properties in C#... with parameters](https://stackoverflow.com/questions/236530/using-the-typical-get-set-properties-in-c-with-parameters)

我从那个答案中摘录了代码：

```
Private Shared m_Dictionary As IDictionary(Of String, Object) = _
             New Dictionary(Of String, Object)

Public Shared Property DictionaryElement(ByVal Key As String) As Object
    Get
        If m_Dictionary.ContainsKey(Key) Then
            Return m_Dictionary(Key)
        Else
            Return [String].Empty
        End If
    End Get
    Set(ByVal value As Object)
        If m_Dictionary.ContainsKey(Key) Then
            m_Dictionary(Key) = value
        Else
            m_Dictionary.Add(Key, value)
        End If

    End Set
End Property 
```

* * *

## 回答 #30

> 赞同：9
> 
> 时间：2008-09-19T14:51:41.870

VB.Net 中的标题案例可以通过旧的 VB6 fxn 实现：

```
StrConv(stringToTitleCase, VbStrConv.ProperCase,0) ''0 is localeID 
```

* * *

## 回答 #31

> 赞同：9
> 
> 时间：2009-06-02T15:09:03.387

**将多个 using 语句堆叠/组合在一起：**

```
Dim sql As String = "StoredProcedureName"
Using cn As SqlConnection = getOpenConnection(), _
      cmd As New SqlCommand(sql, cn), _
      rdr As SqlDataReader = cmd.ExecuteReader()

    While rdr.Read()

        ''// Do Something

    End While

End Using 
```

公平地说，你也可以在 C# 中做到这一点。但是很多人在这两种语言中都不知道这一点。

* * *

## 回答 #32

> 赞同：8
> 
> 时间：2009-07-30T15:50:54.053

我发现真正有用并有助于解决许多错误的功能之一是显式地将参数传递给函数，尤其是在使用可选时。

这是一个例子：

```
Public Function DoSomething(byval x as integer, optional y as boolean=True, optional z as boolean=False)
' ......
End Function 
```

那么你可以这样称呼它：

```
DoSomething(x:=1, y:=false)
DoSomething(x:=2, z:=true)
or
DoSomething(x:=3,y:=false,z:=true) 
```

这更干净，没有错误，然后像这样调用函数

```
DoSomething(1,true) 
```

* * *

## 回答 #33

> 赞同：7
> 
> 时间：2008-09-19T14:13:39.200

*   子命名空间在导入其父命名空间后在范围内。例如，不必导入 System.IO 或说 System.IO.File 来使用 File 类，您可以只说 IO.File。这是一个简单的例子：有些地方该功能真正派上用场，而 C# 没有做到这一点。

* * *

## 回答 #34

> 赞同：7
> 
> 时间：2009-02-01T11:49:13.987

您可以在一行中有一个 If。

```
If True Then DoSomething() 
```

* * *

## 回答 #35

> 赞同：7
> 
> 时间：2009-07-13T16:04:35.770

如果您不知道以下内容，您真的不会相信这是真的，这确实是 C# 缺乏的东西：

（称为 XML 文字）

```
Imports <xmlns:xs="System">

Module Module1

  Sub Main()
    Dim xml =
      <root>
        <customer id="345">
          <name>John</name>
          <age>17</age>
        </customer>
        <customer id="365">
          <name>Doe</name>
          <age>99</age>
        </customer>
      </root>

    Dim id = 1
    Dim name = "Beth"
    DoIt(
      <param>
        <customer>
          <id><%= id %></id>
          <name><%= name %></name>
        </customer>
      </param>
    )

    Dim names = xml...<name>
    For Each n In names
      Console.WriteLine(n.Value)
    Next

    For Each customer In xml.<customer>
      Console.WriteLine("{0}: {1}", customer.@id, customer.<age>.Value)
    Next

    Console.Read()
  End Sub

  Private Sub CreateClass()
    Dim CustomerSchema =
      XDocument.Load(CurDir() & "\customer.xsd")

    Dim fields =
      From field In CustomerSchema...<xs:element>
      Where field.@type IsNot Nothing
      Select
        Name = field.@name,
        Type = field.@type

    Dim customer = 
      <customer> Public Class Customer 
<%= From field In fields Select <f> 
Private m_<%= field.Name %> As <%= GetVBPropType(field.Type) %></f>.Value %>

                     <%= From field In fields Select <p> 
Public Property <%= field.Name %> As <%= GetVBPropType(field.Type) %>
 Get 
Return m_<%= field.Name %> 
End Get
 Set(ByVal value As <%= GetVBPropType(field.Type) %>)
 m_<%= field.Name %> = value 
End Set
 End Property</p>.Value %> 
End Class</customer>

    My.Computer.FileSystem.WriteAllText("Customer.vb",
                                        customer.Value,
                                        False,
                                        System.Text.Encoding.ASCII)

  End Sub

  Private Function GetVBPropType(ByVal xmlType As String) As String
    Select Case xmlType
      Case "xs:string"
        Return "String"
      Case "xs:int"
        Return "Integer"
      Case "xs:decimal"
        Return "Decimal"
      Case "xs:boolean"
        Return "Boolean"
      Case "xs:dateTime", "xs:date"
        Return "Date"
      Case Else
        Return "'TODO: Define Type"
    End Select
  End Function

  Private Sub DoIt(ByVal param As XElement)
    Dim customers =
      From customer In param...<customer>
      Select New Customer With
      {
        .ID = customer.<id>.Value,
        .FirstName = customer.<name>.Value
      }

    For Each c In customers
      Console.WriteLine(c.ToString())
    Next
  End Sub

  Private Class Customer
    Public ID As Integer
    Public FirstName As String
    Public Overrides Function ToString() As String
      Return <string>
ID : <%= Me.ID %>
Name : <%= Me.FirstName %>
             </string>.Value
    End Function

  End Class
End Module
'Results:

ID : 1
Name : Beth
John
Doe
345: 17
365: 99 
```

看看Beth Massi 的[XML Literals Tips/Tricks](http://blogs.msdn.com/bethmassi/archive/2007/10/26/xml-literals-tips-tricks.aspx)。

* * *

## 回答 #36

> 赞同：7
> 
> 时间：2009-09-18T18:31:15.537

## 使用 When 改进错误处理

注意`when`行中的使用`Catch ex As IO.FileLoadException When attempt < 3`

```
Do
  Dim attempt As Integer
  Try
    ''// something that might cause an error.
  Catch ex As IO.FileLoadException When attempt < 3
    If MsgBox("do again?", MsgBoxStyle.YesNo) = MsgBoxResult.No Then
      Exit Do
    End If
  Catch ex As Exception
    ''// if any other error type occurs or the attempts are too many
    MsgBox(ex.Message)
    Exit Do
  End Try
  ''// increment the attempt counter.
  attempt += 1
Loop 
```

最近在[VbRad中查看](http://www.vbrad.com/article.aspx?id=65)

* * *

## 回答 #37

> 赞同：6
> 
> 时间：2009-12-02T21:56:40.023

这是一个我没见过的有趣的；我知道它至少在 VS 2008 中有效：

**如果你不小心用分号结束了你的 VB 行**，因为你已经做了太多的 C#，**分号会被自动删除**。实际上不可能（同样，至少在 VS 2008 中）意外地用分号结束 VB 行。试试看！

（这并不完美；如果您在最终类名的中间键入分号，它不会自动完成类名。）

* * *

## 回答 #38

> 赞同：6
> 
> 时间：2010-11-05T12:06:22.577

与`break`VB 中的 C 语言不同，您可以`Exit`或`Continue`您想要的块：

```
For i As Integer = 0 To 100
    While True
        Exit While
        Select Case i
            Case 1
                Exit Select
            Case 2
                Exit For
            Case 3
                Exit While
            Case Else
                Exit Sub
        End Select
        Continue For
    End While
Next 
```

* * *

## 回答 #39

> 赞同：5
> 
> 时间：2009-05-19T18:57:57.000

Select Case in place of multiple If/ElseIf/Else statements.

Assume simple geometry objects in this example:

```
Function GetToString(obj as SimpleGeomertyClass) as String
  Select Case True
    Case TypeOf obj is PointClass
      Return String.Format("Point: Position = {0}", _
                            DirectCast(obj,Point).ToString)
    Case TypeOf obj is LineClass
      Dim Line = DirectCast(obj,LineClass)
      Return String.Format("Line: StartPosition = {0}, EndPosition = {1}", _
                            Line.StartPoint.ToString,Line.EndPoint.ToString)
    Case TypeOf obj is CircleClass
      Dim Line = DirectCast(obj,CircleClass)
      Return String.Format("Circle: CenterPosition = {0}, Radius = {1}", _
                            Circle.CenterPoint.ToString,Circle.Radius)
    Case Else
      Return String.Format("Unhandled Type {0}",TypeName(obj))
  End Select
End Function 
```

* * *

## 回答 #40

> 赞同：5
> 
> 时间：2009-02-01T12:03:53.210

在 VB8 及以前的版本中，如果您没有为您引入的变量指定任何类型，则会自动检测 Object 类型。在 VB9 (2008) 中，如果 Option Infer 设置为 On（默认情况下） ，则`Dim`将像 C# 的关键字一样`var`

* * *

## 回答 #41

> 赞同：5
> 
> 时间：2009-06-22T15:02:13.303

与[Parsa 的](https://stackoverflow.com/questions/102084/hidden-features-of-vb-net/500677#500677)答案类似，除了简单的通配符之外，[like 运算符](http://msdn.microsoft.com/en-us/library/swf8kaxw.aspx)还有**很多**可以匹配的东西。阅读 MSDN 文档时，我差点从椅子上摔下来 :-)

* * *

## 回答 #42

> 赞同：5
> 
> 时间：2009-07-13T16:30:44.783

```
IIf(False, MsgBox("msg1"), MsgBox("msg2")) 
```

结果是什么？两个消息框！！！！发生这种情况是因为 IIf 函数在到达该函数时会评估这两个参数。

VB 有一个新的 If 运算符（就像 C# ?: 运算符）：

```
If(False, MsgBox("msg1"), MsgBox("msg2")) 
```

将仅显示第二个 msgbox。

一般来说，我建议您替换 vb 代码中的所有 IIF，除非您希望它同时评估这两个项目：

```
Dim value = IIf(somthing, LoadAndGetValue1(), LoadAndGetValue2()) 
```

您可以确定这两个值都已加载。

* * *

## 回答 #43

> 赞同：5
> 
> 时间：2009-07-13T16:34:54.883

如果用 [ 和 ] 将名称括起来，则可以对属性和变量名称使用保留关键字

```
Public Class Item
    Private Value As Integer
    Public Sub New(ByVal value As Integer)
        Me.Value = value
    End Sub

    Public ReadOnly Property [String]() As String
        Get
            Return Value
        End Get
    End Property

    Public ReadOnly Property [Integer]() As Integer
        Get
            Return Value
        End Get
    End Property

    Public ReadOnly Property [Boolean]() As Boolean
        Get
            Return Value
        End Get
    End Property
End Class

'Real examples:
Public Class PropertyException : Inherits Exception
    Public Sub New(ByVal [property] As String)
        Me.Property = [property]
    End Sub

    Private m_Property As String
    Public Property [Property]() As String
        Get
            Return m_Property
        End Get
        Set(ByVal value As String)
            m_Property = value
        End Set
    End Property
End Class

Public Enum LoginLevel
    [Public] = 0
    Account = 1
    Admin = 2
    [Default] = Account
End Enum 
```

* * *

## 回答 #44

> 赞同：5
> 
> 时间：2009-10-23T11:17:01.627

在 vb.net 中声明数组时，始终使用“0 到 xx”语法。

```
Dim b(0 to 9) as byte 'Declares an array of 10 bytes 
```

它非常清楚数组的跨度。将其与等价物进行比较

```
Dim b(9) as byte 'Declares another array of 10 bytes 
```

即使您知道第二个示例由 10 个元素组成，但感觉并不明显。而且我不记得有多少次我看到程序员想要上面的代码，而是写了

```
Dim b(10) as byte 'Declares another array of 10 bytes 
```

这当然是完全错误的。由于 b(10) 创建了一个 11 字节的数组。而且它很容易导致错误，因为对于不知道要查找什么的人来说，它看起来是正确的。

“0 to xx”语法也适用于以下

```
Dim b As Byte() = New Byte(0 To 9) {} 'Another way to create a 10 byte array
ReDim b(0 to 9) 'Assigns a new 10 byte array to b 
```

通过使用完整的语法，您还将向将来阅读您的代码的任何人展示您知道自己在做什么。

* * *

## 回答 #45

> 赞同：4
> 
> 时间：2008-09-19T14:26:38.453

记住 VB.NET 项目默认情况下具有作为项目属性一部分的根命名空间也很重要。默认情况下，此根命名空间将与项目具有相同的名称。当使用命名空间块结构时，名称实际上附加到该根命名空间。例如：如果项目名为 MyProject，那么我们可以将变量声明为：

```
Private obj As MyProject.MyNamespace.MyClass 
```

要更改根命名空间，请使用 Project -> Properties 菜单选项。根命名空间也可以被清除，这意味着所有命名空间块都成为它们包含的代码的根级别。

* * *

## 回答 #46

> 赞同：4
> 
> 时间：2009-03-28T12:18:41.010

MyClass 关键字提供了一种方法来引用最初实现的类实例成员，忽略任何派生类覆盖。

* * *

## 回答 #47

> 赞同：4
> 
> 时间：2009-08-18T21:24:50.610

Nothing 关键字可以表示 default(T) 或 null，具体取决于上下文。您可以利用它来制作一个非常有趣的方法：

```
'''<summary>Returns true for reference types, false for struct types.</summary>'
Public Function IsReferenceType(Of T)() As Boolean
    Return DirectCast(Nothing, T) Is Nothing
End Function 
```

* * *

## 回答 #48

> 赞同：4
> 
> 时间：2008-10-13T16:12:36.927

可能这个链接应该有帮助

[http://blogs.msdn.com/vbteam/archive/2007/11/20/hidden-gems-in-visual-basic-2008-amanda-silver.aspx](http://blogs.msdn.com/vbteam/archive/2007/11/20/hidden-gems-in-visual-basic-2008-amanda-silver.aspx)

* * *

## 回答 #49

> 赞同：4
> 
> 时间：2009-07-13T16:22:48.747

与 C# 不同，在 VB 中，您可以依赖不可为空项的默认值：

```
Sub Main()
    'Auto assigned to def value'
    Dim i As Integer '0'
    Dim dt As DateTime '#12:00:00 AM#'
    Dim a As Date '#12:00:00 AM#'
    Dim b As Boolean 'False'

    Dim s = i.ToString 'valid
End Sub 
```

而在 C# 中，这将是一个编译器错误：

```
int x;
var y = x.ToString(); //Use of unassigned value 
```

* * *

## 回答 #50

> 赞同：3
> 
> 时间：2008-09-19T14:26:17.050

别名命名空间

```
Imports Lan = Langauge 
```

虽然不是 VB.Net 独有的，但在遇到命名空间冲突时经常会被遗忘。

* * *

## 回答 #51

> 赞同：3
> 
> 时间：2009-02-01T11:50:58.400

VB 还提供了 OnError 语句。但是这些天它并没有多大用处。

 `````
On Error Resume Next
' Or'
On Error GoTo someline 
````  `* * *

## 回答 #52

> 赞同：2
> 
> 时间：2008-09-19T14:10:56.743

我不知道你会说它有多隐蔽，但[`If`](http://msdn.microsoft.com/en-us/library/bb513985.aspx "If 运算符 (Visual Basic)")接线员可以数数。

在某种程度上，它与许多类 C 语言中的`?:`（三元）或运算符非常相似。`??`但是，重要的是要注意它确实评估了所有参数，因此重要的是不要传递任何可能导致异常（除非你想要它）或任何可能导致意外副作用的东西。

用法：

```
Dim result = If(condition, valueWhenTrue, valueWhenFalse)
Dim value = If(obj, valueWhenObjNull) 
```

* * *

## 回答 #53

> 赞同：2
> 
> 时间：2009-07-14T08:57:12.770

```
Private Sub Button1_Click(ByVal sender As Button, ByVal e As System.EventArgs)
        Handles Button1.Click
    sender.Enabled = True
    DisableButton(sender)
End Sub

Private Sub Disable(button As Object)
    button.Enabled = false
End Sub 
```

在此代码段中，您有 2 件（也许更多？）您在 C# 中永远无法做到的事情：

1.  处理 Button1.Click - 将处理程序附加到外部事件！
2.  VB 的隐含性允许您将处理程序的第一个参数声明为扩展类型。在 C# 中，您不能将委托寻址到不同的模式，即使它是预期的类型。

此外，在 C# 中，您不能在对象上使用预期的功能 - 在 C# 中，您可以梦想它（现在他们制作了 dynamic 关键字，但它与 VB 相去甚远）。在 C# 中，如果您编写 (new object()).Enabled，您将收到类型对象没有方法“启用”的错误。现在，我不是会推荐你的人，如果这是否安全，信息是按原样提供的，你自己做，仍然是总线，有时（比如在使用 COM 对象时）这是一件好事。当期望值肯定是一个按钮时，我个人总是写 (sender As Button)。

实际上此外：举这个例子：

```
Private Sub control_Click(ByVal sender As Control, ByVal e As System.EventArgs)
        Handles TextBox1.Click, CheckBox1.Click, Button1.Click
    sender.Text = "Got it?..."
End Sub 
```

* * *

## 回答 #54

> 赞同：2
> 
> 时间：2009-02-01T11:35:24.890

在 VB 中无法显式实现接口成员，但可以使用不同的名称实现它们。

```
Interface I1
    Sub Foo()
    Sub TheFoo()
End Interface

Interface I2
    Sub Foo()
    Sub TheFoo()
End Interface

Class C
    Implements I1, I2

    Public Sub IAmFoo1() Implements I1.Foo
        ' Something happens here'
    End Sub

    Public Sub IAmFoo2() Implements I2.Foo
        ' Another thing happens here'
    End Sub

    Public Sub TheF() Implements I1.TheFoo, I2.TheFoo
        ' You shouldn't yell!'
    End Sub
End Class 
```

[**请在 Microsoft Connect 投票支持此功能**](https://connect.microsoft.com/VisualStudio/feedback/details/454529/allow-implicit-interface-implementation-in-vb-like-in-c "允许像在 C# 中一样在 VB 中实现隐式接口")。

* * *

## 回答 #55

> 赞同：2
> 
> 时间：2008-09-19T14:44:50.110

您可以使用 REM 注释掉一行而不是 ' 。不是超级有用，但可以帮助重要的评论脱颖而出，而无需使用“！！！！！！！！！” 管他呢。

* * *

## 回答 #56

> 赞同：2
> 
> 时间：2010-10-14T16:25:55.960

可空日期！这在您有数据输入/输出数据库（在本例中为 MSSQL Server）的情况下特别有用。我有两个过程给我一个 SmallDateTime 参数，填充了一个值。其中一个获取一个普通的旧日期并测试它是否有任何值，分配一个默认日期。另一个版本接受 a`Nullable(Of Date)`以便我可以保留日期无价值，接受来自存储过程的默认值

```
<System.Diagnostics.DebuggerStepThrough> _
Protected Function GP(ByVal strName As String, ByVal dtValue As Date) As SqlParameter
    Dim aParm As SqlParameter = New SqlParameter
    Dim unDate As Date
    With aParm
        .ParameterName = strName
        .Direction = ParameterDirection.Input
        .SqlDbType = SqlDbType.SmallDateTime
        If unDate = dtValue Then    'Unassigned variable
            .Value = "1/1/1900 12:00:00 AM" 'give it a default which is accepted by smalldatetime
        Else
            .Value = CDate(dtValue.ToShortDateString)
        End If
    End With
    Return aParm
End Function
<System.Diagnostics.DebuggerStepThrough()> _
Protected Function GP(ByVal strName As String, ByVal dtValue As Nullable(Of Date)) As SqlParameter
    Dim aParm As SqlParameter = New SqlParameter
    Dim unDate As Date
    With aParm
        .ParameterName = strName
        .Direction = ParameterDirection.Input
        .SqlDbType = SqlDbType.SmallDateTime
        If dtValue.HasValue = False Then
            '// it's nullable, so has no value
        ElseIf unDate = dtValue.Value Then    'Unassigned variable
            '// still, it's nullable for a reason, folks!
        Else
            .Value = CDate(dtValue.Value.ToShortDateString)
        End If
    End With
    Return aParm
End Function 
```

* * *

## 回答 #57

> 赞同：1
> 
> 时间：2011-04-01T02:17:17.120

Documentation of code

```
''' <summary>
''' 
''' </summary>
''' <remarks></remarks>
Sub use_3Apostrophe()
End Sub 
```

* * *

## 回答 #58

> 赞同：1
> 
> 时间：2008-09-19T14:19:08.940

我以前很喜欢可选的函数参数，但现在我用得更少了，因为我经常在 C# 和 VB 之间来回穿梭。C# 什么时候支持它们？C++ 甚至 C 都有它们（某种意义上的）！

* * *

## 回答 #59

> 赞同：1
> 
> 时间：2009-02-01T12:01:19.953

有一天，基本用户没有引入任何变量。他们只是通过使用它们来介绍它们。VB 的 Option Explicit 被引入只是为了确保您不会因输入错误而错误地引入任何变量。您可以随时将其关闭，体验我们使用 Basic 的日子。

* * *

## 回答 #60

> 赞同：1
> 
> 时间：2009-07-14T10:12:07.093

**ByVal**和**ByRef**关键字的区别：

```
Module Module1

    Sub Main()
        Dim str1 = "initial"
        Dim str2 = "initial"
        DoByVal(str1)
        DoByRef(str2)

        Console.WriteLine(str1)
        Console.WriteLine(str2)
    End Sub

    Sub DoByVal(ByVal str As String)
        str = "value 1"
    End Sub

    Sub DoByRef(ByRef str As String)
        str = "value 2"
    End Sub
End Module

'Results:
'initial
'value 2 
```

* * *

## 回答 #61

> 赞同：0
> 
> 时间：2009-07-13T16:19:20.860

```
Sub Main()
    Select Case "value to check"
        'Check for multiple items at once:'
        Case "a", "b", "asdf" 
            Console.WriteLine("Nope...")
        Case "value to check"
            Console.WriteLine("Oh yeah! thass what im talkin about!")
        Case Else
            Console.WriteLine("Nah :'(")
    End Select

    Dim jonny = False
    Dim charlie = True
    Dim values = New String() {"asdff", "asdfasdf"}
    Select Case "asdfasdf"
        'You can perform boolean checks that has nothing to do with your var.,
        'not that I would recommend that, but it exists.'
        Case values.Contains("ddddddddddddddddddddddd")
        Case True
        Case "No sense"
        Case Else
    End Select

    Dim x = 56
    Select Case x
        Case Is > 56
        Case Is <= 5
        Case Is <> 45
        Case Else
    End Select

End Sub 
```

* * *

## 回答 #62

> 赞同：0
> 
> 时间：2011-05-09T20:24:35.510

又是可选参数！

```
Function DoSmtg(Optional a As string, b As Integer, c As String)
    'DoSmtg
End 

' Call
DoSmtg(,,"c argument")

DoSmtg(,"b argument") 
```

* * *

## 回答 #63

> 赞同：0
> 
> 时间：2010-10-14T15:12:51.283

方法的属性！例如，在设计时不应该可用的属性可以是 1) 从属性窗口中隐藏，2) 不序列化（对于用户控件或从数据库加载的控件来说尤其烦人）：

```
<System.ComponentModel.Browsable(False), _
System.ComponentModel.DesignerSerializationVisibility(System.ComponentModel.DesignerSerializationVisibility.Hidden), _
System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Always), _
System.ComponentModel.Category("Data")> _
Public Property AUX_ID() As String
    <System.Diagnostics.DebuggerStepThrough()> _
     Get
        Return mAUX_ID
    End Get
    <System.Diagnostics.DebuggerStepThrough()> _
     Set(ByVal value As String)
        mAUX_ID = value
    End Set
End Property 
```

`DebuggerStepThrough()`如果您进行任何数量的调试，放入也**非常有帮助**（请注意，您仍然可以在函数或其他任何内容中放置断点，但您不能单步执行该函数）。

此外，将事物分类（例如，“数据”）的能力意味着，如果您*确实*希望该属性显示在属性工具窗口中，则该特定属性将显示在该类别中。

* * *

## 回答 #64

> 赞同：-3
> 
> 时间：2010-06-03T20:02:18.367

**我的关键字**

“我”关键字在 VB.Net 中是独一无二的。我知道这很常见，但是“Me”和 C# 等效的“this”之间是有区别的。区别在于“this”是只读的，而“Me”不是。这在你有一个变量实例的构造函数中很有价值，你希望该变量已经被构造为相等，因为你可以设置“Me = TheVariable”，而不是在 C# 中你必须手动复制变量的每个字段（其中如果有很多字段并且容易出错，那可能会很糟糕）。C# 的解决方法是在构造函数之外进行赋值。这意味着你现在如果对象是自构造成一个完整的对象，你现在需要另一个函数。``

# php - WordPress XMLRPC：Expat 报告错误代码 5

> ID：102093
> 
> 赞同：1
> 
> 时间：2008-09-19T14:08:11.023
> 
> 标签：php, blogs, xml-rpc

`PHP`几个月前我写了一个小应用程序，它使用`WordPress XMLRPC library`来同步两个独立的 WordPress 博客。我有一个通用的“RPCRequest”函数来打包请求、发送它并返回服务器响应，我还有几个更具体的函数可以自定义发送的请求类型。

在这种特殊情况下，我调用“getPostIDs”来检索远程服务器上的帖子数量及其各自的 postid。这是代码：

```
$rpc = new WordRPC('http://mywordpressurl.com/xmlrpc.php', 'username', 'password');
$rpc->getPostIDs(); 
```

我收到以下错误消息：

```
expat reports error code 5
description: Invalid document end
line: 1
column: 1
byte index: 0
total bytes: 0

data beginning 0 before byte index: 
```

有点悬念的结局，这也很奇怪。但由于错误消息不是以 XML 格式格式化的，我的直觉是它是本地 XMLRPC 库生成错误，而不是远程服务器。

更奇怪的是，如果我将“getPostIDs()”调用更改为“getPostIDs(1)”或任何其他整数，它就可以正常工作。

下面是 WordRPC 类的代码：

```
public function __construct($url, $user, $pass) {
  $this->url = $url;
  $this->username = $user;
  $this->password = $pass;

  $id = $this->RPCRequest("blogger.getUserInfo",
                          array("null", $this->username, $this->password));
  $this->blogID = $id['userid'];
}

public function RPCRequest($method, $params) {
  $request = xmlrpc_encode_request($method, $params);
  $context = stream_context_create(array('http' => array(
                    'method' => "POST",
                    'header' => "Content-Type: text/xml",
                    'content' => $request
  )));

  $file = file_get_contents($this->url, false, $context);
  return xmlrpc_decode($file);
}

public function getPostIDs($num_posts = 0) {
  return $this->RPCRequest("mt.getRecentPostTitles",
                            array($this->blogID, $this->username,
                            $this->password, $num_posts));
} 
```

正如我所提到的，如果“getPostIDs”被赋予一个正整数参数，它就可以正常工作。此外，这过去可以很好地工作；默认参数 0 只是向 RPC 服务器表明它应该检索*所有*帖子，而不仅仅是最近的`$num_posts`帖子。直到最近才开始出现此错误。

我试过用谷歌搜索错误，但运气不佳。那么，我的问题是**，“外籍人士报告错误代码 5”究竟是什么意思，谁在产生错误？** 除此之外的任何细节/建议/见解也是受欢迎的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-23T19:20:34.267

@Novak：感谢您的建议。问题原来是内存问题。通过从远程位置检索所有帖子，响应超出了 PHP 允许使用的内存量，因此出现未关闭的令牌错误。

神秘且不完整的错误消息的问题是由于使用了过时的 XML-RPC 库版本。一旦我升级了 WordPress 的版本，它就会为我提供完整的错误输出，包括内存错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T17:48:47.657

Expat 是 PHP 中的 XML 解析器。错误代码 5 是许多 expat 错误常量之一，在这种情况下：`XML_ERROR_UNCLOSED_TOKEN`. 在我看来，从 RPC 调用返回的结果中有错误。您可能希望在 RPCRequest after`file_get_contents`和 before中进行一些错误检查`xmlrpc_decode`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-03T21:11:24.197

我修复了在 apache 上安装 php-xmlrpc 模块的这个错误

php-xmlrpc.x86_64 ：使用 XML-RPC 协议的 PHP 应用程序的模块

# git - 有没有好的、跨平台的、Mac、Win32、*nix、Git GUI 客户端？

> ID：102102
> 
> 赞同：5
> 
> 时间：2008-09-19T14:09:47.073
> 
> 标签：git, user-interface, version-control, cross-platform

它还应该支持初学者的 SSH2 和公钥身份验证。其次在 Mac/Windows 上它应该有一个不错的安装程序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2011-05-19T18:25:46.327

## 截至 2011 年...

这是一个老问题，但仍然非常相关。在过去的几年里，我不得不使用几乎所有版本控制系统在各种平台上开展项目。虽然最终我发现没有什么比熟悉命令行更安全和方便，但现实情况是，一个像样的 GUI 确实有助于可视化，一个非常好的 GUI 可以帮助您避免犯愚蠢的错误。

我一直试图充分利用开源产品，但有时你会开始欣赏产品中的一些额外修饰，因为你 (a) 累了，真的只想专注于推出自己的产品门和（b）您厌倦了向更多初级团队成员解释事情，因此只希望工具体验尽可能顺利和无故障。

在着手开发我们自己的 iPhone 应用程序时，我们最初选择了[SourceTree](http://www.sourcetreeapp.com/ "源树")，因为它是一个出色的 GUI，而且它还支持我喜欢的 Mercurial。在我看来，SourceTree 物有所值，您不会后悔使用它。

然而，在一个跨平台项目中，他领导的团队包括从初级到非常有经验的开发人员的一系列经验，该项目涉及...

*   iOS（Mac OS X 上的 XCode）
*   Windows Azure 和 ASP.NET 后端（Windows 上的 Visual Studio）

...不得不在 Mac 上的 SourceTree 和 Windows 上的 TortoiseGit 之间进行单独的配置设置并进行心理转换变得令人沮丧。

***然后我们发现了[SmartGit](http://www.syntevo.com/smartgit/index.html)。天哪，天哪，我喜欢 SmartGit。***

SmartGit 的价格为 70 美元，但我相信它对于提高生产力和为大多数团队成员节省的麻烦来说是非常值得的。它是一个出色的 Git 客户端，具有非常流畅、优美的 UI，它有自己的优点，已经成为我的最爱——但是当你考虑到它在 Windows/Mac/Linux 上运行的事实时，团队的价值主张就会增加成倍增长。我们爱爱爱，不必为不同的平台使用不同的客户端。

与我用于 Git 的任何其他 GUI 工具相比，SmartGit 有一个杀手级功能。我们大量使用 Git 子模块。如果您不知道或不使用子模块，那么这不适用于您。但是如果你这样做了，那么你就会明白 SmartGit 是如何做到的。我用过的其他 GUI Git 工具都没有。

警告：

1.  我们在使用 TortoiseGit 使用 RSA 私钥初始化的 repo 时遇到了麻烦。SmartGit 可以使用系统 ssh 或它自己内置的需要 OpenSSH 私钥的 ssh 客户端。由于我们使用 GitHub 作为我们的远程存储库，我们刚刚切换到使用 HTTPS URL 作为存储库，一切都很好。但是，要让它在 Mac 上与 Xcode 或 MonoDevelop 一起工作，只需确保为密钥生成 DSA 而不是 RSA。
2.  SmartGit 使使用子模块变得非常容易，但它似乎没有做的一件事是自动初始化嵌套的子模块。换句话说，如果您的子模块本身引用了其他子模块，则您必须右键单击每个视图以单独初始化。

然而，最终，我认为像 SmartGit 这样一流的跨平台 Git GUI 工具现在没有任何真正的竞争。

如果您想查看我对 OS X 的两个最佳 Git GUI 工具的比较，请阅读[此答案](https://stackoverflow.com/questions/83789/what-is-the-best-git-gui-on-osx/6062972#6062972)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-19T15:28:32.673

我刚刚开始使用[qgit](http://digilander.libero.it/mcostalba/)，它看起来很不错。[我通过MacPorts](http://www.macports.org/)将它安装在我的 Mac 上，有一个 Windows 安装程序（我还没有尝试过），我相信它也很容易用于 Linux。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T19:14:00.353

另一个合理的解决方案应该是`git-gui`，它需要安装一个 Tcl/Tk 框架。

# svn - SVN 标记主要版本

> ID：102128
> 
> 赞同：6
> 
> 时间：2008-09-19T14:12:28.237
> 
> 标签：svn, version-control

抱歉，我是 SVN 的新手，为此我环顾四周。如何在 SVN 中标记主要版本，有点像设置还原点。现在我只是设置了我的服务器并添加了我的所有文件——我一直在间歇性地提交不同的更改。当我有东西处于稳定状态时，有没有办法标记它，以便我可以在必要时轻松恢复到它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-19T14:13:03.273

听起来您正在寻找标签。

[Subversion 书中的标签](http://svnbook.red-bean.com/en/1.1/ch04s06.html)

“标签只是项目时间的“快照”

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-19T14:14:43.427

典型的方法是在存储库的根目录中创建一个“标签”目录，并将整个主干复制到该目录。（在 Subversion 中复制很便宜，因为它只是添加对现有文件的特定修订版的引用。）

所以你可能会说：

```
svn cp http://svn.example.com/trunk/ http://svn.example.com/tags/major-revision-01/ 
```

更多信息请参见[Subversion 书籍](http://svnbook.red-bean.com/)，尤其是[标签](http://svnbook.red-bean.com/en/1.4/svn.branchmerge.tags.html)章节。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-19T14:18:03.183

我们所做的就是创建一个分支。我们有标准的根目录：trunk、tags、releases、branch。

要记住的主要事情是，所有分支就像创建一个副本，并且所有从主干分支出来的分支就像创建一个副本（除了它是浅副本，只复制增量）。

对我们来说，所有的开发都是在主干中完成的。如果有人正在进行重大返工，则倾向于将其放在分支中。主要版本被放入版本中，我们想要标记的所有其他标签和项目都放在标签文件夹中。

对于我们的版本，我们有以下目录结构：

```
repository
+--trunk
+--releases
  +--v1.0
  +--v1.1
  +--v1.4
  +--v2.0
+--branches
+--tags 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-19T14:14:27.390

[检查标签](http://svnbook.red-bean.com/en/1.4/svn.branchmerge.tags.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-19T14:17:07.727

如果您使用的是 svn 标准结构，您应该有一个分支、标签和树干文件夹。

您要做的是将当前主干复制到标签中的文件夹中。

示例命令行：

svn 复制 mysvnurl/myproject/trunk mysvnurl/myproject/tags/majorrelease_01

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T14:14:50.463

尝试阅读此页面[svn copy](http://svnbook.red-bean.com/en/1.1/re07.html)。基本上你只需要做一个 svn copy

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-19T14:17:52.780

在 CVS 中，这被称为“标签”。SVN 不使用单独的标签机制，它只是创建一个分支。所以只需创建一个新分支，并给它一个描述性的名称，如“release-1.2”。

或者，懒惰的方法是在文本文件中写下当前的存储库修订号；）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-19T14:37:20.643

这是另一个有用的想法。使用 CruiseControl（或 CruiseControl.NET）以固定间隔（即每晚或每 15 分钟）自动标记

[立即获取构建过程！](http://www.sharpdeveloper.net/content/archive/2007/10/31/get-a-build-process-now.aspx)

# c# - 什么导致错误““ResolveManifestFiles”任务意外失败。路径中的非法字符

> ID：102163
> 
> 赞同：5
> 
> 时间：2008-09-19T14:16:27.323
> 
> 标签：c#, build

```
The "ResolveManifestFiles" task failed unexpectedly.
System.ArgumentException: Illegal characters in path.
   at System.Security.Permissions.FileIOPermission.HasIllegalCharacters(String[] str)
   at System.Security.Permissions.FileIOPermission.AddPathList(FileIOPermissionAccess access, AccessControlActions control, String[] pathListOrig, Boolean checkForDuplicates, Boolean needFullPath, Boolean copyPathList)
   at System.Security.Permissions.FileIOPermission..ctor(FileIOPermissionAccess access, String[] pathList, Boolean checkForDuplicates, Boolean needFullPath)
   at System.IO.Path.GetFullPath(String path)
   at Microsoft.Build.Tasks.Deployment.ManifestUtilities.Util.RemoveDuplicateItems(ITaskItem[] items)
   at Microsoft.Build.Tasks.ResolveManifestFiles.set_NativeAssemblies(ITaskItem[] value)

The "NativeAssemblies=@(NativeReferenceFile);@(_DeploymentNativePrerequisite)" parameter for the "ResolveManifestFiles" task is invalid.

The "ResolveManifestFiles" task could not be initialized with its input parameters. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-09-24T17:11:24.443

在我允许 VFP 在构建后自动注册我的 COM 库之前，我遇到了相同的构建错误。在我这样做之后，我必须从我的项目中删除对 .dll 的引用并重新添加它，然后我的项目构建并运行文件。

如果您遇到此问题，您可能需要确保您没有对未注册的本机库的引用。要手动注册这样的 .dll，请使用[Regsvr32 实用程序](http://technet.microsoft.com/en-us/library/bb490985.aspx)。

# ruby - 了解在 Ruby 中与 lambda 一起使用的注入行为

> ID：102165
> 
> 赞同：5
> 
> 时间：2008-09-19T14:16:41.097
> 
> 标签：ruby, lambda, inject

我经常将预先配置的 lambdas 插入到可枚举的方法中，例如“map”、“select”等，但“inject”的行为似乎有所不同。例如与

```
mult4 = lambda {|item| item * 4 } 
```

然后

```
(5..10).map &mult4 
```

给我

```
[20, 24, 28, 32, 36, 40] 
```

但是，如果我制作一个 2 参数 lambda 用于像这样的注入，

```
multL = lambda {|product, n| product * n } 
```

我想能够说

```
(5..10).inject(2) &multL 
```

因为'inject'有一个可选的初始值的*单个*参数，但这给了我......

```
irb(main):027:0> (5..10).inject(2) &multL
LocalJumpError: no block given
        from (irb):27:in `inject'
        from (irb):27 
```

但是，如果我将 '&multL' 填充到*第二个*参数中以进行注入，那么它就可以工作。

```
irb(main):028:0> (5..10).inject(2, &multL)
=> 302400 
```

我的问题是“为什么这行得通，而不是之前的尝试？”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-19T14:22:38.290

所以原因

```
(5..10).map &mult4 
```

作品和

```
(5..10).inject(2) &multL 
```

不是红宝石括号在第一种情况下是隐含的，所以它真的意味着

```
(5..10).map(&mult4) 
```

如果您愿意，对于第二种情况，您可以使用

```
(5..10).inject 2, &multL 
```

括号外的技巧仅适用于将块传递给方法，而不是 lambda 对象。

# java - 返回给定 JTextPane 位置的行号的方法？

> ID：102171
> 
> 赞同：4
> 
> 时间：2008-09-19T14:17:22.813
> 
> 标签：java, user-interface, swing, jtextpane

我正在寻找一种方法来计算 JTextPane 中给定文本位置的行号，并启用换行。

例子：

> 这是一条非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常长的线。
> 这是另一条非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常非常长的线。**|**

光标在第四行，而不是第二行。

有人可以为我提供该方法的实现：

```
int getLineNumber(JTextPane pane, int pos)
{
     return ???
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-19T15:20:11.180

试试这个

```
 /**
   * Return an int containing the wrapped line index at the given position
   * @param component JTextPane
   * @param int pos
   * @return int
   */
  public int getLineNumber(JTextPane component, int pos) 
  {
    int posLine;
    int y = 0;

    try
    {
      Rectangle caretCoords = component.modelToView(pos);
      y = (int) caretCoords.getY();
    }
    catch (BadLocationException ex)
    {
    }

    int lineHeight = component.getFontMetrics(component.getFont()).getHeight();
    posLine = (y / lineHeight) + 1;
    return posLine;
  } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-10-31T16:08:25.153

[http://java-sl.com/tip_row_column.html](http://java-sl.com/tip_row_column.html) 另一种适用于以不同样式格式化的文本片段

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-01T21:52:26.380

你可以试试这个：

```
public int getLineNumberAt(JTextPane pane, int pos) {
    return pane.getDocument().getDefaultRootElement().getElementIndex(pos);
} 
```

请记住，行号始终从 0 开始。

# apache-flex - 在 ActionScript 中复制复杂的 MXML 绑定

> ID：102185
> 
> 赞同：4
> 
> 时间：2008-09-19T14:18:42.107
> 
> 标签：apache-flex, data-binding, mxml

MXML 允许您进行一些非常强大的数据绑定，例如：

```
<mx:Button id="myBtn" label="Buy an {itemName}" visible="{itemName!=null}"/> 
```

我发现 BindingUtils 类可以将值绑定到简单的属性，但上面的绑定都没有这样做。是否可以在 AS3 代码中执行相同的操作，或者 Flex 是否可以从我的 MXML 静默生成多行代码？任何人都可以在纯 AS3 中复制上述内容，从：

```
var myBtn:Button = new Button();
myBtn.id="myBtn";
??? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T15:32:39.230

方法是使用`bindSetter`. 当您的示例中的 MXML 在编译之前转换为 ActionScript 时，这也是在幕后完成的方式。

```
// assuming the itemName property is defined on this:
BindingUtils.bindSetter(itemNameChanged, this, ["itemName"]);

// ...

private function itemNameChanged( newValue : String ) : void {
  myBtn.label   = newValue;
  myBtn.visible = newValue != null;
} 
```

...除了 MXML 到 ActionScript 转换生成的代码更长，因为它必须更通用。在此示例中，它可能会生成两个函数，一个用于每个绑定表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T18:34:00.480

您还可以通过在编译器设置中添加 -keep 参数来查看 flex 在编译 mxml 文件时自动生成的代码。您可以通过选择项目属性并查看“Flex Compiler”选项来找到您的设置，然后在“Additional compiler arguments:”下将“-keep”添加到已经存在的内容中。

完成后，Flex 将在您的源文件夹中创建一个“生成的”目录，在其中您会发现所有临时文件作为编译期间使用的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T15:27:47.730

我相信 flex 会生成一个小的匿名函数来处理这个问题。

您可以使用 ChangeWatcher 进行类似操作。您甚至可以在 changewatcher 调用中创建一个新的匿名函数。

# asp.net - 有没有办法在数据重复控件中“对齐”列？

> ID：102198
> 
> 赞同：0
> 
> 时间：2008-09-19T14:19:56.440
> 
> 标签：asp.net, datarepeater

有没有办法在数据重复控件中“对齐”列？

IE 目前看起来是这样的：

```
user1 - colA colB colC colD colE
user2 - colD colE 
```

我希望它看起来像：

```
 user1
   -colA
   -colB
   -colC
   -colD
   -colE

   user1

   -colD
   -colE 
```

当其他记录可能没有给定列的数据时，我需要为每条记录正确对齐列。

要求需要中继器而不是网格控件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T14:24:37.630

如果您可以访问重复中缺少多少列，则只需将以下内容作为表格标记。我你无权访问这个，你能发布你的数据转发器的源代码以及你要反对的数据源吗？

```
<td colspan='<%# MissingCount(Contatiner.DataItem) %>'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T18:30:44.450

我建议不要使用`<td>`定义列，而是使用 CSS。

```
.collink {
  width: 20px; 
  float: left; 
  height: 20px;
} 
```

和

```
<td style="padding :0px 0px 0px 0px;">
    <div class="collink">
        <asp:LinkButton ID="lnkEdit" runat="server" ... />
    </div>
</td> 
```

这种方法可以让内容增长而不会实际影响表结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T14:39:56.563

```
 <tr class="RadGridItem">
        <td width="100">
            <asp:Label ID="lblFullName" runat="server" 
                Text ='<%# DataBinder.Eval(Container.DataItem, "FullName") %>'
                ToolTip='<%# "Current Grade: " + DataBinder.Eval(Container.DataItem,"CurrentGrade") + "%" +
                             " Percent Complete: " + DataBinder.Eval(Container.DataItem,"PercentComplete") + "%" %>' />
        </td>
        <asp:Repeater ID="rptAssessments" runat="server" DataSource='<%# DataBinder.Eval(Container.DataItem, "EnrollmentAssessments") %>'>
            <ItemTemplate>
              <td style="padding :0px 0px 0px 0px; width:20px; height: 20px;">
                    <asp:LinkButton ID="lnkEdit" runat="server"
                        OnClick="AssessmentClick" 
                        style=' <%# "color:" + this.GetAssessmentColor(Container.DataItem)  %>'
                        ToolTip='<%# DataBinder.Eval(Container.DataItem, "AssessmentName") + Environment.NewLine + 
                                        DataBinder.Eval(Container.DataItem, "EnrollmentAssessmentStateName") + "(" + 
                                        DataBinder.Eval(Container.DataItem, "PercentGradeDisplay") + "%) " + 
                                        GetPointsPossible(Container.DataItem) + " pts possible" %>'
                        CommandArgument='<%# DataBinder.Eval(Container.DataItem, "EnrollmentAssessmentID") %>'
                        Text='<%# this.GetAssessmentDisplay(Container.DataItem) %>' />
                </td>
            </ItemTemplate>
        </asp:Repeater>
    </tr>
</ItemTemplate> 
```

这是代码。根据用于生成列表的标准，列数将是动态的。

谢谢。

# asp.net - 如何确定传输速率？

> ID：102206
> 
> 赞同：3
> 
> 时间：2008-09-19T14:21:06.500
> 
> 标签：asp.net

我能否从 ASP.NET 应用程序确定传输速率，即每秒传输多少 KB？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-19T14:45:52.540

您可以在 ASP.NET 上设置一些性能计数器。

有关一些示例，请参见[此处](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/852720c8-7589-49c3-a9d1-73fdfc9126f0.mspx?mfr=true)。

一些可以帮助你弄清楚你想要什么的具体是：

**请求总字节数**

发送到客户端的响应的总大小（以字节为单位）。这不包括标准 HTTP 响应标头。

**请求/秒**

每秒执行的请求数。这表示应用程序的当前吞吐量。在恒定负载下，这个数字应该保持在一定范围内，除非其他服务器工作（如垃圾收集、缓存清理线程、外部服务器工具等）。

**请求总数**

自服务启动以来的请求总数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T14:44:59.047

您可以使用许多调试工具在浏览器上进行检查。它当然会因页面、缓存设置、服务器负载、网络连接速度等而有所不同。

查看[http://www.fiddlertool.com/fiddler/](http://www.fiddlertool.com/fiddler/)

或者，如果您使用的是 Firefox，FireBug 插件[http://addons.mozilla.org/en-US/firefox/addon/1843](http://addons.mozilla.org/en-US/firefox/addon/1843)

# c# - 存储库模式实施经验

> ID：102213
> 
> 赞同：0
> 
> 时间：2008-09-19T14:22:06.780
> 
> 标签：c#, design-patterns, linq-to-sql, repository-pattern

我正准备开始一个新的 asp.net web 项目，我将使用 LINQ-to-SQL。我使用[Mike Hadlow](http://mikehadlow.blogspot.com/ "迈克·哈德洛")找到的一些信息做了一些工作来设置我的数据层，这些信息使用接口和泛型为数据库中的每个表创建一个存储库。起初我认为这是一种有趣的方法。但是，现在我认为创建一个基础 Repository 类并从它继承以为我需要访问的表创建一个 TableNameRepository 类可能更有意义。

哪种方法可以让我以干净可测试的方式添加特定于表的功能？这是我的存储库实现供参考。

```
public class Repository<T> : IRepository<T> where T : class, new()
{
    protected IDataConnection _dcnf;

    public Repository()
    {
        _dcnf = new DataConnectionFactory() as IDataConnection;
    }

    // Constructor injection for dependency on DataContext 
    // to actually connect to a database
    public Repository(IDataConnection dc)
    {
        _dcnf = dc;
    }

    /// <summary>
    /// Return all instances of type T.
    /// </summary>
    /// <returns>IEnumerable<T></returns>
    public virtual IEnumerable<T> GetAll()
    {
        return GetTable;
    }

    public virtual T GetById(int id)
    {
        var itemParam = Expression.Parameter(typeof(T), "item");
        var whereExp = Expression.Lambda<Func<T, bool>>
            (
                Expression.Equal(
                    Expression.Property(itemParam, PrimaryKeyName),
                    Expression.Constant(id)
                ), new ParameterExpression[] { itemParam }
            );
        return _dcnf.Context.GetTable<T>().Where(whereExp).Single();
    }

    /// <summary>
    /// Return all instances of type T that match the expression exp.
    /// </summary>
    /// <param name="exp"></param>
    /// <returns>IEnumerable<T></returns>
    public virtual IEnumerable<T> FindByExp(Func<T, bool> exp)
    {
        return GetTable.Where<T>(exp);
    }

    /// <summary>See IRepository.</summary>
    /// <param name="exp"></param><returns></returns>
    public virtual T Single(Func<T, bool> exp)
    {
        return GetTable.Single(exp);
    }

    /// <summary>See IRepository.</summary>
    /// <param name="entity"></param>
    public virtual void MarkForDeletion(T entity)
    {
        _dcnf.Context.GetTable<T>().DeleteOnSubmit(entity);
    }

    /// <summary>
    /// Create a new instance of type T.
    /// </summary>
    /// <returns>T</returns>
    public virtual T Create()
    {
        //T entity = Activator.CreateInstance<T>();
        T entity = new T();
        GetTable.InsertOnSubmit(entity);
        return entity;
    }

    /// <summary>See IRepository.</summary>
    public virtual void SaveAll()
    {
        _dcnf.SaveAll();
    }

    #region Properties
    private string PrimaryKeyName
    {
        get { return TableMetadata.RowType.IdentityMembers[0].Name; }
    }

    private System.Data.Linq.Table<T> GetTable
    {
        get { return _dcnf.Context.GetTable<T>(); }
    }

    private System.Data.Linq.Mapping.MetaTable TableMetadata
    {
        get { return _dcnf.Context.Mapping.GetTable(typeof(T)); }
    }

    private System.Data.Linq.Mapping.MetaType ClassMetadata
    {
        get { return _dcnf.Context.Mapping.GetMetaType(typeof(T)); }
    }
    #endregion
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2011-02-08T13:23:53.573

您不应该为每个表创建一个存储库。
相反，您应该为域模型中存在的每个“实体根”（或聚合根）创建一个存储库。您可以在此处了解有关该模式的更多信息并查看一个工作示例：

[http://deviq.com/repository-pattern/](http://deviq.com/repository-pattern/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T16:55:01.437

我很想建议你是否使用具体类型并不重要，就好像你使用依赖注入（城堡？）来创建存储库（这样你可以用不同的缓存等包装它们）然后你的代码库将是无论您采用哪种方式，都不会更明智。

然后只需向您的 DI 询问存储库。例如城堡：

```
public class Home {
  public static IRepository<T> For<T> {
    get {
      return Container.Resolve<IRepository<T>>();
    }
  }
} 
```

就个人而言，在您发现需要之前，我不会将类型降至最低。

我想您问题的另一半是您是否可以轻松地提供 IRepository 的内存实现以用于测试和缓存目的。为此，我会注意 linq-to-objects 可能会很慢，您可能会发现类似[http://www.codeplex.com/i4o](http://www.codeplex.com/i4o)的东西很有用。

# http - 静态内容的http标头中的“过期”？如何

> ID：102215
> 
> 赞同：4
> 
> 时间：2008-09-19T14:22:16.683
> 
> 标签：http, iis, asp-classic

在静态内容的 http 标头中添加“过期”的最佳方法是什么？例如。图片、CSS、JS

Web服务器是IIS 6.0；语言是经典的 ASP

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-19T17:52:21.267

你可以尝试这样的事情：

```
@ECHO OFF 
REM ---------------------------------------------------------------------------
REM Caching - sets the caching on static files in a web site
REM syntax 
REM     Caching.CMD 1 d:\sites\MySite\WWWRoot\*.CSS
REM 
REM   %1 is the WebSite ID
REM   %2 is the path & Wildcard - for example, d:\sites\MySite\WWWRoot\*.CSS
REM   _adsutil is the path to ADSUtil.VBS
REM ---------------------------------------------------------------------------

SETLOCAL

SET _adsutil=D:\Apps\Scripts\adsutil.vbs

FOR %%i IN (%2) DO (
  ECHO Setting Caching on %%~ni%%~xi
  CSCRIPT %_adsutil% CREATE W3SVC/%1/root/%%~ni%%~xi "IIsWebFile"
  CSCRIPT %_adsutil% SET    W3SVC/%1/root/%%~ni%%~xi/HttpExpires "D, 0x69780"
  ECHO.
) 
```

它将 Web 根目录中每个 CSS 文件的缓存值设置为 5 天，然后像这样运行它：

```
Caching.CMD 1 \site\wwwroot\*.css
Caching.CMD 1 \site\wwwroot\*.js
Caching.CMD 1 \site\wwwroot\*.html
Caching.CMD 1 \site\wwwroot\*.htm
Caching.CMD 1 \site\wwwroot\*.gif
Caching.CMD 1 \site\wwwroot\*.jpg 
```

有点痛苦，但可行。

顺便说一句 - 要获取 HttpExpires 的值，请在 GUI 中设置值，然后运行

```
AdsUtil.vbs ENUM W3SVC/1/root/File.txt 
```

获得您需要的实际价值

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-19T14:36:00.507

我认为这就是您所追求的，它是 IIS 管理器中 HTTP 标头下的内容过期。我使用将静态内容粘贴在 ~/Resources 之类的文件夹下的模式，并在该特定文件夹上设置过期时间，以使其具有比应用程序的其余部分更长的寿命。

这是完整文章的链接： **[IIS 6.0 F1：网站属性 - HTTP 标头选项卡](http://technet.microsoft.com/en-us/library/cc732442.aspx)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-15T08:48:44.860

对于来自谷歌的其他人：这**在 iis6 中不起作用，**但在 7 及更高版本中起作用。

在您的 web.config 中：

```
<staticContent>
  <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="7.00:00:00" />
</staticContent> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-27T01:13:00.113

在 IIS 管理员中，您可以为每种文件类型设置它，或者您可以（对于像 aspx 这样的动态文件）在代码中进行设置。设置完成后，您需要使用 Mozilla firefox + live headers plugin 之类的工具检查输出的标头 - 或者您可以使用基于 Web 的工具，例如[http://www.httpviewer.net/](http://www.httpviewer.net/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2008-09-19T14:32:26.100

我不知道这是否是您要查找的内容，但它确实可以防止我的页面被缓存。

```
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Cache-Control" CONTENT="no-store">
<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
<META HTTP-EQUIV="Expires" CONTENT="0">
<META HTTP-EQUIV="Cache-Control" CONTENT="max-age=0"> 
```

我从网上的一篇文章中得到这些，我不再有参考。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2009-03-31T19:25:24.750

糟糕的解决方案，使用 adsutil 创建的第一个命令将失败并出现错误 -2147024713 (0x800700B7)，因为您尝试创建的文件已经存在。

谢谢。

# com - 如何确定非托管代码使用的内存量

> ID：102222
> 
> 赞同：0
> 
> 时间：2008-09-19T14:23:04.203
> 
> 标签：com, unmanaged, arcobjects

我正在处理一个大型 COM 库 (ArcObjects)，并且我正在尝试查明内存泄漏。
确定非托管代码/对象使用的内存量的最可靠方法是什么。
可以使用哪些性能计数器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T14:41:37.417

使用[UMDH](http://support.microsoft.com/kb/268343)获取内存堆的快照，运行两次，然后使用工具显示在 2 个快照之间发生的所有分配。这对于帮助您追踪可能泄漏的区域非常有用。

[这篇文章](http://weblogs.asp.net/mdavey/archive/2004/03/09/86569.aspx)通俗易懂地解释。

我建议你使用 CComPtr<> 来包装你的对象，不要忘记在将它传递给返回原始指针引用的函数之前必须释放它（因为转换运算符将用于获取然后被覆盖的指针）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T14:32:19.563

进程的“虚拟字节”计数器表示该进程已保留的内存总量。如果您有内存泄漏，那么这将呈上升趋势。

# svn - 将 SourceSafe 与 SVN 同步

> ID：102230
> 
> 赞同：4
> 
> 时间：2008-09-19T14:24:00.957
> 
> 标签：svn, version-control, synchronization, visual-sourcesafe

我们公司有一项政策，要求将源代码保存在 SourceSafe 存储库中。我努力说服管理层迁移到 SVN，但没有成功（无论如何，这是另一个问题）。

由于我和我的几个同事使用放置在我计算机上的 SVN 存储库（通过 Apache），我制作了一个 PowerShell 脚本，它将存储库备份到公司服务器上（然后也会定期备份）。这很好用，但假设我还想在我们的 SourceSafe 服务器上保留一份源代码的副本。

有什么经验或技巧吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-19T14:53:42.913

***将SVN 存储库***签入到 SourceSafe 怎么样？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-15T21:10:38.267

我不确定有没有**好的**方法，但一种方法是使用[SVN Server Hooks](http://svnbook.red-bean.com/en/1.5/svn.reposadmin.create.html#svn.reposadmin.create.hooks "SVN 服务器挂钩")使用 VSS 命令行工具在 Source Safe 中执行类似的操作。我认为这已经在 svn-user 的邮件列表中讨论过了。您可以尝试在[此处搜索档案](http://svn.haxx.se/ "档案")。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T14:31:14.637

可怜的你，我感受到了你的痛苦。

将您的代码压缩并存储在 VSS 中的夜间导出怎么样？大多数工具都是为了另一种方式移动，所以如果你想自动化，你必须自己写一些东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T14:39:53.583

创建一个批处理文件来定期检查当前源代码从 SVN 到 sourcesafe 似乎是个好主意。

您可以创建一个通过计划任务每​​晚运行的批处理文件。它将使用[sourcesafe 命令行实用程序](http://msdn.microsoft.com/en-us/library/asxkfzy4(VS.80).aspx)将整个代码库检出到本地文件系统。然后，它会使用[subversion 命令行客户端](https://www.projects.dev2dev.bea.com/Subversion%20Clients/CommandLineSVN.html)执行相同的操作，将最新版本获取到同一目录中。然后，您可以使用 sourcesafe 命令行实用程序签入。

困难的部分是检测添加到 subversion 的新文件并将这些文件添加到 sourcesafe 数据库。假设您可以遍历所有文件并查看哪些文件在上次签入后未标记为只读。另一个问题是处理重命名和删除；我想删除的文件保留在 sourcesafe 中并不重要，因为听起来没有人真正使用该代码库。

# vb.net - 使用 Visual Basic 在 Windows 应用程序中创建下拉列表的最佳方法是什么？

> ID：102240
> 
> 赞同：1
> 
> 时间：2008-09-19T14:25:53.477
> 
> 标签：vb.net, visual-studio

我想向 Windows 应用程序添加一个下拉列表。它将有两个选择，都不可编辑。最好使用什么控件？它是编辑属性设置为否的组合框吗？

我正在使用 Visual Studio 2008。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-19T14:29:55.153

我建议看一下[Windows Vista 用户体验指南](http://msdn.microsoft.com/en-us/library/aa511258.aspx)。听起来你可能会更好地使用单选按钮，或者，如果它是一种明确的开/关类型的情况，使用复选框。不过，我认为我们确实需要更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T14:28:48.480

`yourComboBox.DropDownStyle = ComboBoxStyle.DropDownList`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T14:30:31.627

将 DropDownStyle 属性设置为 DropDownList。

请参阅[http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.dropdownstyle(VS.80).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.dropdownstyle(VS.80).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T14:30:34.077

通过将 DropDownStyle 属性更改为“DropDownList”，winforms 中的组合框兼作不可编辑的下拉列表：我认为没有单独的下拉列表控件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-22T18:01:50.133

创建两个相邻的文本框 TextBox1 和 TextBox2，为 TextBox2 设置多行并自动调整大小。

在某处创建您的下拉列表。在我的示例中，它位于包含大约 13,000 个条目的不同工作表中。

下面是两个函数，第一个驱动输入框，TextBox1。当您键入时，第二个框 TextBox2 显示剩余的有效选项。第二个函数，如果您单击第二个框中的选项，则加载第一个文本框

在下面，当前工作表上的单元格 B3 必须加载输入/选择的答案。在我的应用程序中，我只想搜索大写字符，因此使用了 UCase。我的列表数据是 Z 列中的 13302 个条目

```
Private Sub TextBox1_Keyup(ByVal KeyCode As MSForms.ReturnInteger, ByVal Shift As Integer)
Dim curtext As String
Dim k, where As Integer
Dim tmp As String
Dim bigtmp As String
curtext = TextBox1.Text
curtext = UCase(curtext)
TextBox1.Text = curtext
Range("b3").Value = curtext
If Len(curtext) = 0 Then
TextBox2.Visible = False
Exit Sub
End If

TextBox2.Visible = True
Application.ScreenUpdating = False
For k = 2 To 13303                                      '  YOUR LIST ROWS
  tmp = Sheets("General Lookup").Range("Z" & k).Value   '  YOUR LIST RANGE
  where = InStr(1, tmp, TextBox1.Text, 1)
  If where = 1 Then
  bigtmp = bigtmp & tmp & Chr(13)
  End If
Next

TextBox2.Text = bigtmp
Application.ScreenUpdating = True
End Sub

Private Sub TextBox2_MouseUp(ByVal Button As Integer, ByVal Shift As Integer, ByVal X As Single, ByVal Y As Single)
    If Len(TextBox2.SelText) > 0 Then
    TextBox1.Text = TextBox2.SelText
    Range("b3").Value = TextBox2.SelText
    TextBox2.Visible = False
    End If
End Sub 
```

# javascript - IE Javascript 点击问题

> ID：102261
> 
> 赞同：1
> 
> 时间：2008-09-19T14:28:15.627
> 
> 标签：javascript, internet-explorer, click

首先，我正在开发一个应用程序，该应用程序的编写使得一些典型的调试工具无法使用（或者至少我不知道如何使用 :)。

JavaScript、html 等在部署之前都是“熟”和编码的（我认为；我对这个过程的工作原理有点模糊），所以我不能将 VS 2005 附加到 ie，并且 firebug lite 不起作用好。此外，界面在框架中（糟糕），因此其他一些工具也无法正常工作。

Firebug 在 Firefox 中运行良好，它没有这个问题（Safari 也没有），所以我希望有人可能会发现我的代码在 IE 上运行的方式“明显”有问题。可以提供更多关于它的古怪的信息，但让我们从这个开始。

基本上，我有一个函数可以通过使普通表行不可见来将表“折叠”到它们的标题中。我有`"onclick='toggleDisplay("theTableElement", "theCollapseImageElement")'"`标签`<tr>`，表格以“class='closed'”开头。

在 FF 和 Safari 中单击折叠和展开表格，但 IE 表格需要多次单击（看似 1 到 5 之间的任意数字）才能展开。有时，在最初“打开”后，只需单击一会儿，表格就会展开和折叠，但最终会恢复为需要多次单击。我可以从我在 Visual Studio 中看到的一点点看出，每次实际上都在调用该函数。提前感谢您的任何建议！

这是JS代码：

```
bURL_RM_RID="some image prefix";
CLOSED_TBL="closed";
OPEN_TBL="open";
CLOSED_IMG= bURL_RM_RID+'166';
OPENED_IMG= bURL_RM_RID+'167';

//collapses/expands tbl (a table) and swaps out the image tblimg
function toggleDisplay(tbl, tblimg) {
    var rowVisible;
    var tblclass = tbl.getAttribute("class");
    var tblRows = tbl.rows;
    var img = tblimg;

    //Are we expanding or collapsing the table?
    if (tblclass == CLOSED_TBL) rowVisible = false;
    else rowVisible = true;

    for (i = 0; i < tblRows.length; i++) {
        if (tblRows[i].className != "headerRow") {
            tblRows[i].style.display = (rowVisible) ? "none" : "";
        }
    }

    //set the collapse images to the correct state and swap the class name
    rowVisible = !rowVisible;
    if (rowVisible) {
        img.setAttribute("src", CLOSED_IMG);
        tbl.setAttribute("class",OPEN_TBL);     
    }
    else {
        img.setAttribute("src", OPENED_IMG);
        tbl.setAttribute("class",CLOSED_TBL);
    }
} 
```

­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-19T14:32:12.713

您是否尝试过更改此行

```
tblRows[i].style.display = (rowVisible) ? "none" : ""; 
```

类似于

```
tblRows[i].style.display = (rowVisible) ? "none" : "table-row"; 
```

或者

```
tblRows[i].style.display = (rowVisible) ? "none" : "auto"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T15:01:20.927

setAttribute 在 IE 中不可靠。它将属性访问和对象属性访问视为同一件事，因此因为“class”属性的 DOM 属性称为“className”，所以您必须在 IE 上使用它。

此错误已在新的 IE8 beta 中修复，但直接使用 DOM Level 1 HTML 属性更容易：

```
img.src= CLOSED_IMAGE;
tbl.className= OPEN_TBL; 
```

您还可以在样式表中进行表格折叠，这样会更快，并且可以省去在脚本中循环遍历表格行的麻烦：

```
table.closed tr { display: none; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T14:36:20.317

您可能希望将 onclick 调用放在实际`<tr>`标签上，而不是单个`<th>`标签上。这样，您的 HTML 中的 JS 就更少了，这将使其更易于维护。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T14:42:40.287

如果您在 IE 中启用脚本调试（工具-> Internet 选项-> 高级）并放置一个“调试器；” 代码中的语句，IE 会在遇到调试器语句时自动调出 Visual Studio。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T14:50:13.263

我在 IE 中遇到过这个问题。如果我没记错的话，我需要在最初生成的 HTML 上直接为“显示”样式设置一个初始值。例如：

```
<table>
  <tr style="display:none"> ... </tr>
  <tr style="display:"> ... </tr>
</table> 
```

然后我可以使用 JavaScript 来改变风格，就像你做的那样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T15:50:04.133

我总是使用 style.display = "block" 和 style.display = "none"

# database - PeopleSoft 集成代理异步消息是否在接收端连续触发？

> ID：102265
> 
> 赞同：1
> 
> 时间：2008-09-19T14:28:41.817
> 
> 标签：database, asynchronous, messaging, peoplesoft

我在 PeopleSoft 应用程序上有一个奇怪的问题。似乎正在无序地处理集成代理消息。还有另一种可能性，那就是提交是异步触发的，允许事务无序完成。

有许多详细记录的插入，然后是尾记录，它对刚刚插入的行执行更新。有些行没有收到更新。这个问题是零星的，大约每 6 个月一次，但它会导致统计上显着的财务报告错误。

我希望有人对 PeopleTools 的内部进行了足够的处理，以了解它在做什么，这样也许我可以找到解决该问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-26T14:42:14.290

你没有提到你是否设置了这个，但是你可以选择集成代理。所有消息都流经消息通道，通道可以是有序的或无序的。如果一个通道是有序的，那么 - 如果一条消息出错 - 所有后续消息都在它后面排队，并且在它成功之前不会被处理。

通道是否已排序取决于 Application Designer 中消息通道属性上的复选框。默认情况下从内存通道排序，但您可以取消选中该框以增加吞吐量。

希望这可以帮助。

PS。从 Tools 8.49 开始，设置略有变化，Channels 变成了 Queues、Messages Service Operations 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-26T16:43:33.500

我从 GSC 那里听说的。我们在发送端有两个域，在接收端有两个域。所有人都很活跃。根据他们的说法，当每个服务器都有多个域来获取组中的一些消息时，这是可能的，因此可以异步处理它们，而不是真正串行地处理它们。

我们会将活动服务器减少到一个，并看到它再次发生，但它是如此零星，我们可能永远无法确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-12T11:18:44.553

PSFT 9 IB 中发生的变化很少，所以请让我知道您的应用程序的版本。异步服务现在可以与 Sync 一起使用。需要正确设置消息通道属性。我在 www.itwisesolutions.com/PsftTraining.html 网站上发现了类似的问题，但这与实现本身更相关。

谢谢

# perl - 你能想到 Perl 6 的联结有什么用途？

> ID：102271
> 
> 赞同：15
> 
> 时间：2008-09-19T14:29:26.403
> 
> 标签：perl

[来自Perl 6 维基百科条目的](http://en.wikipedia.org/wiki/Perl_6#Junctions)更多信息

**路口**

Perl 6 引入了联结的概念：由其他值组合而成的值。[24] 在 Perl 6 设计的早期，这些被称为“叠加”，类似于量子物理学中的量子叠加概念——可以同时占据多个状态的波形，直到观察“崩溃”它们。Damian Conway 在 2000 年发布的一个名为 Quantum::Superpositions[25] 的 Perl 5 模块提供了初步的概念证明。虽然起初，这种叠加值似乎只是一种程序化的好奇心，但随着时间的推移，它们的实用性和直观性得到了广泛的认可，并且连接现在在 Perl 6 的设计中占据了中心位置。

在最简单的形式中，联结是通过将一组值与联结运算符组合来创建的：

```
my $any_even_digit = 0|2|4|6|8; # any(0, 2, 4, 6, 8)
my $all_odd_digits = 1&3&5&7&9; # all(1, 3, 5, 7, 9) 
```

| 表示一个等于其左侧或右侧参数的值。& 表示一个等于其左右参数的值。这些值可以在任何使用正常值的代码中使用。在一个联结上执行的操作平等地作用于该联结的所有成员，并根据联结运算符进行组合。所以， ("apple"|"banana") ~ "s" 会产生 "apples"|"bananas"。在比较中，联结会返回一个 true 或 false 比较结果。如果对结的任何一个元素的比较为真，则“任何”结返回真。如果比较对于连接的所有元素都为真，则“所有”连接返回 true。

通过引入一种受限于类型连接的泛型编程风格，连接还可以用于更丰富地扩充类型系统：

```
sub get_tint ( RGB_Color|CMYK_Color $color, num $opacity) { ... }
sub store_record (Record&Storable $rec) { ... } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-22T21:26:42.210

一个月有多少天？

```
given( $month ){
  when any(qw'1 3 5 7 8 10 12') {
    $day = 31
  }
  when any(qw'4 6 9 11') {
    $day = 30
  }
  when 2 {
    $day = 29
  }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-22T23:39:25.057

junctions 最吸引人的特点是你不需要为复杂的情况编写大量的代码测试。你用路口描述情况，然后应用测试。您不会考虑如何获得答案（例如，使用短路运算符或 if 块），而是要问什么问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-23T00:36:15.233

自动线程听起来很酷，虽然我不知道它的当前状态是什么。

```
for all(@files) -> $file {
    do_something($file);
} 
```

连接没有顺序，因此 VM 可以自由地为其中的每个元素生成一个线程`@files`并并行处理它们。

# sql - 'active' 标志与否？

> ID：102278
> 
> 赞同：23
> 
> 时间：2008-09-19T14:30:22.470
> 
> 标签：sql, mysql, postgresql

好的，所以实际上每个基于数据库的应用程序都必须处理“非活动”记录。无论是软删除还是将某些内容标记为“被忽略”。我很好奇在“活动”列（或状态列）上是否有任何激进的替代想法。

例如，如果我有一个人员列表

```
CREATE TABLE people (
  id       INTEGER PRIMARY KEY,
  name     VARCHAR(100),
  active   BOOLEAN,
  ...
); 
```

这意味着要获取活跃人员列表，您需要使用

```
SELECT * FROM people WHERE active=True; 
```

有没有人建议将非活动记录移到单独的表中，并在哪里进行适当的 UNION 来加入两者？

好奇心强...

**编辑：** 我应该说清楚，我是从纯粹主义者的角度来看的。我可以看到对于大量数据可能需要数据归档，但这不是我的出发点。如果您执行 SELECT * FROM people ，那么这些条目在某种意义上是“活跃的”对我来说是有意义的

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-09-19T14:36:08.290

您根据活动标志对表进行分区，以便活动记录在一个分区中，而非活动记录在另一个分区中。然后为每个表创建一个活动视图，该视图上自动具有活动过滤器。数据库查询引擎自动将查询限制在其中包含活动记录的分区，这甚至比在该标志上使用索引要快得多。

下面是一个如何在 Oracle 中创建分区表的示例。Oracle 没有布尔列类型，所以我修改了您的表结构以供 Oracle 使用。

```
CREATE TABLE people
(
   id       NUMBER(10),
   name     VARCHAR2(100),
   active   NUMBER(1)
)
PARTITION BY LIST(active)
(
   PARTITION active_records VALUES (0)
   PARTITION inactive_records VALUES (1)
); 
```

如果您愿意，可以将每个分区放在不同的表空间中。您也可以对索引进行分区。

顺便说一句，这似乎是[这个](https://stackoverflow.com/questions/68323/what-is-the-best-way-to-implement-soft-deletion)问题的重复，作为一个新手我需要问，处理意外重复的程序是什么？

**编辑：**根据评论中的要求，提供了在 Oracle 中创建分区表的示例

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-19T14:32:22.853

好吧，为了确保您只在大多数情况下绘制活动记录，您可以创建只包含活动记录的视图。这样就更容易不遗漏活动部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-19T14:55:03.453

我们在大多数表中使用 enum('ACTIVE','INACTIVE','DELETED') 所以我们实际上有一个 3 路标志。我发现它适用于我们在不同的情况下。你的旅费可能会改变。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-19T14:55:15.560

移动不活跃的东西通常是一个愚蠢的想法。这是一个很大的开销，有很多潜在的错误，一切都变得更加复杂，比如取消存档等。你如何处理相关数据？如果你也移动所有这些，你必须修改每一个查询。如果你不动它，你希望得到什么好处？

这就引出了下一点：你为什么要移动它？当大小翻倍时，正确索引的表需要一次额外的查找。任何性能提升都注定是微不足道的。为什么你还要等到遥远的未来真正遇到性能问题时才会考虑它？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-19T14:57:15.103

我认为将其严格视为一条数据，那么原始帖子中显示的方式是正确的。活动标志数据块直接依赖于主键，应该在表中。

该表包含有关人员的数据，无论其数据的当前状态如何。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-19T14:32:37.737

活动标志有点难看，但它很简单而且效果很好。

您可以按照您的建议将它们移动到另一个表。我建议查看活动/非活动记录的百分比。如果您有超过 20% 或 30% 的非活动记录，那么您可能会考虑将它们移到其他地方。否则，这没什么大不了的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-19T14:35:55.840

是的，我们会的。目前，我们的许多表格中都有“active='T/F'”列，主要是为了显示“最新”行。当插入新行时，前一个 T 行被标记为 F 以保留它以供审计。

现在，我们正在转向 2-table 方法，当插入新行时，前一行将移动到历史表中。这在大多数情况下为我们提供了更好的性能 - 查看当前数据。

成本略高于旧方法，以前您必须更新和插入，现在您必须插入和更新（即不是插入新的 T 行，而是用所有新数据修改现有行），所以成本只是传递一整行数据而不是只传递更改。这几乎不会产生任何影响。

性能优势是您的主表的索引明显更小，并且您可以更好地优化表空间（它们不会增长这么多！）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-21T13:41:01.260

在你的模式中这样的二进制标志是一个坏主意。考虑查询

```
SELECT count(*) FROM users WHERE active=1
```

看起来很简单。但是当您拥有大量用户时会发生什么，以至于需要向该表添加索引。再一次，它看起来直截了当

```
ALTER TABLE users ADD INDEX index_users_on_active (active)
```

除了！！这个索引是没有用的，因为这一列的基数正好是二！任何数据库查询优化器都会忽略此索引，因为它的基数较低并进行表扫描。

在用有用的标志填充您的模式之前，请考虑您将如何访问该数据。

[https://stackoverflow.com/questions/108503/mysql-advisable-number-of-rows](https://stackoverflow.com/questions/108503/mysql-advisable-number-of-rows#108784)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-19T14:32:15.757

我们经常使用活动标志。但是，如果您的数据库将非常大，我可以看到将非活动值迁移到单独的表中的价值。

然后，当有人想要查看所有记录（无论是活动的还是非活动的）时，您只需要一个表的联合。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-19T14:33:12.570

在大多数情况下，指示删除的二进制字段就足够了。通常有一种清理机制会在一定时间后删除那些已删除的记录，因此您可能希望使用已删除的时间戳启动模式。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-19T14:33:46.640

搬到单独的桌子上并将它们重新带回需要时间。根据离线记录的数量以及您需要将它们恢复的频率，这可能是一个好主意，也可能不是一个好主意。

如果大多数人一旦被掩埋就不会回来，并且仅用于摘要/报告/其他任何内容，那么它将使您的主表更小，查询更简单并且可能更快。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-19T14:37:56.490

我们使用这两种方法来处理非活动记录。我们使用的方法取决于具体情况。对于本质上是查找值的记录，我们使用 Active 位字段。这允许我们停用条目以便它们不会被使用，但也允许我们维护数据与关系的完整性。

我们使用“移动到分离表”方法，其中不再需要数据并且数据不是关系的一部分。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-19T14:39:57.673

情况确实决定了解决方案，我认为：

如果表包含用户，那么可以使用几个“标志”字段。一个用于已删除、已禁用等。或者如果空间是一个问题，则禁用标志就足够了，如果它们已被删除，则实际删除该行。

它还取决于存储数据的策略。如果有保存数据存档的策略，那么在很长一段时间后很可能需要一个单独的表。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-19T14:42:35.590

不 - 这是很常见的事情 - 根据特定要求有几个变化（但您已经涵盖了它们）：

1) 如果您希望拥有一整套数据——比如数 TB 或更多——立即归档已删除的记录并不是一个坏主意——尽管你可以使用标记为已删除然后复制到归档表的组合方法。

2) 当然，硬删除记录的选项仍然存在——尽管我们的开发人员往往是数据包老鼠——我建议你应该查看业务流程并决定现在是否需要保留数据——如果有 - 这样做......如果没有 - 您可能应该随意扔掉这些东西......再次，根据具体的业务场景。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-19T16:49:49.623

从“纯粹主义的角度”来看，现实模型并没有区分视图和表格——两者都是关系。因此，如果实体被正确命名，例如 Person/ActivePerson，则使用使用鉴别器的视图是完全有意义和有效的。

此外，从“纯粹主义者的角度”来看，表应该命名为 person，而不是 people，因为关系的名称反映了一个元组，而不是整个集合。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2011-02-17T19:47:14.857

关于索引布尔值，为什么不：

```
ALTER TABLE users ADD INDEX index_users_on_active (id, active) ; 
```

这不会改善搜索吗？
但是我不知道这个答案有多少取决于平台。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-07-10T05:05:25.423

这是一个老问题，但对于那些搜索低基数/选择性索引的人，我想提出以下避免分区、辅助表等的方法：

诀窍是使用“dateInactivated”列来存储记录被停用/删除时的时间戳。顾名思义，当记录处于活动状态时，该值为NULL，但一旦停用，则写入系统日期时间。因此，随着“已删除”记录数量的增加，该列上的索引最终具有高选择性，因为每条记录都将具有唯一的（不是严格意义上的）值。

然后您的查询变为：

```
SELECT * FROM people WHERE dateInactivated is NULL; 
```

该索引将拉入您关心的正确行集。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-02-03T21:42:10.703

就性能而言，为大表过滤位标志上的数据并不是很好。如果“活动”确定虚拟删除，您可以创建具有相同结构的“TableName_delted”表，并使用删除触发器将已删除的数据移动到那里。

该解决方案将有助于提高性能并简化数据查询。

# privileges - 完全信任和以管理员身份运行的意思一样吗

> ID：102282
> 
> 赞同：15
> 
> 时间：2008-09-19T14:30:34.263
> 
> 标签：privileges, administrator, full-trust

完全信任与以管理员身份运行的含义相同吗？我读过一些文章说“要使其正常工作，该应用程序必须是完全信任的应用程序”。这是否与您必须具有管理员权限才能运行应用程序相同？如果不是，有什么区别？如何判断应用程序是否“完全信任”？

我被告知“不管是否是管理员，.Net 应用程序如果不是从‘受信任’的位置运行，它们就不会做某些事情。” 什么是“可信位置”？如果您从“受信任的位置”运行应用程序，您可以在不成为管理员的情况下执行“需要完全信任”的事情吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-19T14:33:45.893

不。完全信任是一个 .NET 术语，用于表示它没有在降低权限的 .NET 沙箱中运行。在 3.5 SP1 之前的 .NET 中，这包括从网络共享运行（在默认配置中）。它还包括作为未请求额外权限的 ClickOnce 应用程序或在其他一些基于浏览器的沙箱中运行。

完全信任意味着它可以做它正在运行的用户所能做的任何事情，而不是以管理员身份运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-19T14:31:58.627

不。从 2.0 版开始，.Net 框架有自己的小文件系统设置以确保安全。不管是否是管理员，.Net 应用程序如果不是从“受信任”位置运行，它们就不会做某些事情。

本地硬盘驱动器上的几乎所有东西都是可信的，但是（据说他们为 3.5sp1 修复了这个问题）甚至本地 Intranet 也*不可信*，因此大多数 .Net 桌面应用程序即使在网络驱动器上也无法启动或分享。

您可以更改机器上的配置，以便允许来自该区域的应用程序，但必须对将运行应用程序的*每台*机器进行此操作，这破坏了常见的公司部署方案。

从 ASP.Net 的角度来看，这也意味着某些活动比其他活动需要更多的“信任”。例如，如果设置不正确，发送电子邮件可能会导致异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-01-31T11:51:41.180

基本上完全信任意味着 C# 代码可以完全控制当前 (.Net) 进程以及在应用程序池帐户下运行的所有进程。

它与运行 C++ dll 相同

管理员访问将取决于 IIS 设置（即，如果您在系统或管理员帐户下运行网站）

# c# - 什么 WPF C# 控件类似于 C++ 中的 CWnd？

> ID：102283
> 
> 赞同：1
> 
> 时间：2008-09-19T14:30:35.527
> 
> 标签：c#, c++, wpf

什么是 C# (VS 2008) 中最好的 WPF 控件，您可以将其放置在允许您进行类似于 C++ 中 CWnd 类的“Paint”函数的绘图的表单上？此外，它可以显示位图、滚动条和接受用户输入的能力（即鼠标移动、按钮点击等）。基本上 WPF 表单上的控件中的 CWnd 的所有功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T14:37:19.487

UIElement 是支持输入和绘图的最低级别元素。虽然，使用 WPF，你真的需要做的手工绘图要少得多。你确定你需要这样做吗？此外，滚动条永远不会在您的元素中继承。如果您需要滚动行为，只需将元素包装在 ScrollViewer 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-19T10:00:06.743

UIElement 是开始的地方，而 OnRender 是要覆盖的方法。请注意，与 Win32 的 WM_PAINT 方式相反，WPF 主要用于编写 UI。除非您正在创建新的低级原语，否则几乎总是有更高效的替代方案。

# mysql - 如何根据关系针对一条记录获取多条记录？

> ID：102317
> 
> 赞同：12
> 
> 时间：2008-09-19T14:33:55.550
> 
> 标签：mysql, sql, database

我有两个表组织和员工有一对多的关系，即一个组织可以有多个员工。现在我想选择特定组织的所有信息以及该组织所有员工的名字。最好的方法是什么？我可以在单个记录集中获得所有这些，否则我将不得不根据否获得多行。员工？这是我想要的一些图形演示：

```
Org_ID      Org_Address    Org_OtherDetails    Employess

1           132A B Road    List of details     Emp1, Emp2, Emp3..... 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-09-19T23:16:53.310

The original question was database specific, but perhaps this is a good place to include a more generic answer. It's a common question. The concept that you are describing is often referred to as 'Group Concatenation'. There's no standard solution in SQL-92 or SQL-99\. So you'll need a vendor-specific solution.

*   **MySQL** - Use the built-in GROUP_CONCAT function. In your example you would want something like this:

```
select 
  o.ID, o.Address, o.OtherDetails,
  GROUP_CONCAT( concat(e.firstname, ' ', e.lastname) ) as Employees
from 
  employees e 
  inner join organization o on o.org_id=e.org_id
group by o.org_id

```

*   **PostgreSQL** - PostgreSQL 9.0 is equally simple now that string_agg(expression, delimiter) is built-in. Here it is with 'comma-space' between elements:

```
select 
  o.ID, o.Address, o.OtherDetails,
  STRING_AGG( (e.firstname || ' ' || e.lastname), ', ' ) as Employees
from 
  employees e 
  inner join organization o on o.org_id=e.org_id
group by o.org_id

```

PostgreSQL before 9.0 allows you to define your own aggregate functions with CREATE AGGREGATE. Slightly more work than MySQL, but much more flexible. See this [other post](https://stackoverflow.com/questions/43870/how-to-concatenate-strings-of-a-string-field-in-a-postgresql-group-by-query) for more details. (Of course PostgreSQL 9.0 and later have this option as well.)

*   **Oracle** - same idea using **LISTAGG**.

*   **MS SQL Server** - same idea using **STRING_AGG**

*   **Fallback solution** - in other database technologies or in very very old versions of the technologies listed above you don't have these group concatenation functions. In that case create a stored procedure that takes the org_id as its input and outputs the concatenated employee names. Then use this stored procedure in your query. Some of the other responses here include some details about how to write stored procedures like these.

```
select 
  o.ID, o.Address, o.OtherDetails,
  MY_CUSTOM_GROUP_CONCAT_PROCEDURE( o.ID ) as Employees
from 
  organization o

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-19T22:31:57.380

由于问题被标记为 MySQL，您应该能够使用 MySQL 特定的解决方案，即 GROUP_CONCAT。例如，

```
select Org_ID, Org_Address, Org_OtherDetails,
       GROUP_CONCAT(employees) as Employees
from  employees a, organization b
where a.org_id=b.org_id
group by b.org_id; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-19T14:49:02.580

在 MS SQL 中，您可以执行以下操作：

```
create function dbo.table2list (@input int)
returns varchar(8000)
as
BEGIN
declare @putout varchar(8000)
set @putout = ''
select @putout = @putout + ', ' + <employeename>
from <employeetable>
where <orgid> = @input
return @putout
end 
```

然后做：

```
select * from org, dbo.table2list(orgid)
from <organisationtable> 
```

我认为您也可以使用 COALESCE() 来做到这一点，但不记得我脑海中的语法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T19:50:49.623

这是您可以执行的操作，您有 2 个选项：

```
select *
FROM
  users u
  LEFT JOIN organizations o ON (u.idorg = o.id); 
```

这样，您将获得每行的额外数据 - 您并不真正需要的完整组织信息。

或者你可以这样做：

```
select o.*, group_concat(u.name)
FROM
  users u
  LEFT JOIN organizations o ON (u.idorg = o.id)
GROUP BY
  o.id 
```

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

如果您想查看即，第二种方法是适用的。用户名列表“user1，user2，user3”，但不想自己操作字段...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T14:39:38.373

如果您使用 Oracle，您可以创建一个 PL/SQL 函数，您可以在查询中使用该函数，该函数接受一个组织 ID 作为输入，并以字符串形式返回属于该组织的所有员工的名字。例如：-

```
select
   o.org_id,
   o.org_address,
   o.org_otherdetails,
   org_employees( o.org_id ) as org_employees
from
   organization o 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T14:41:03.940

这一切都取决于。如果您进行联接，您将获得每一行的所有组织数据。（每位员工 1 行）。那是有代价的。如果您执行两个查询。（Org 和 Emp）具有不同的成本。

选择你的毒药。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-19T14:54:29.837

最简洁的答案是不”。

如其他答案所述，有特定于供应商的方法可以实现此结果，但是没有纯 SQL 解决方案可以在一个查询中使用。

对于那个很抱歉 ：（

大概其中一种供应商特定的解决方案对您有用？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-05-19T13:16:34.557

对于 SQL Server，此项目中的 SQLCLR 聚合受到 MSDN 代码示例的启发，但是它们的性能要好得多，并且允许排序（作为字符串）和在需要时使用备用分隔符。它们提供与 MySQL 的 GROUP_CONCAT for SQL Server*几乎相同的功能。*

可以在文档中找到 CLR 聚合和 FOR XML 解决方案的优缺点的完整比较：

[http://groupconcat.codeplex.com](http://groupconcat.codeplex.com)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-11T19:50:05.083

对于 SQL Server 2017 和 Azure SQL，现在有一个函数 STRING_AGG (Transact-SQL) 可以与 MySQL 相提并论：

[https://docs.microsoft.com/en-us/sql/t-sql/functions/string-agg-transact-sql?view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/t-sql/functions/string-agg-transact-sql?view=sql-server-ver15)。

```
SELECT attribute1, STRING_AGG (attribute2, '|') AS Attribute2
FROM  table
GROUP BY attribute 
```

# mysql-management - MySQL 5.0 实例管理器类似于早期版本的功能？

> ID：102318
> 
> 赞同：0
> 
> 时间：2008-09-19T14:34:00.353
> 
> 标签：mysql-management, multiple-instances

MySQL 引入了一个服务器端实用程序，可让您管理远程机器上的多个实例。我正在为早期版本的 mysql 寻找类似的功能。

[1] [http://dev.mysql.com/doc/refman/5.0/en/instance-manager.html](http://dev.mysql.com/doc/refman/5.0/en/instance-manager.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-20T13:13:56.420

我不熟悉实例管理器，但我在多个系统（包括远程托管服务器）上使用了[phpMyAdmin ，并取得了巨大成功。](http://www.phpmyadmin.net)它支持 MySQL 5.0 和 4.1。

# php - 你会说什么是 PHP 相关内容的最佳在线资源？

> ID：102320
> 
> 赞同：3
> 
> 时间：2008-09-19T14:34:04.207
> 
> 标签：php

你会说什么是关于它的有趣事物`PHP`和周围事物的最佳在线资源？我正在按照博客或在线杂志的方式思考，它告诉我技巧、新闻和最佳实践。

请添加有关您推荐的网站的简短评论！

最好的问候，B

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-19T14:35:40.130

我发现 php.net 对于几乎所有与 PHP 相关的东西都是一个很好的资源。伟大的参考，伟大的社区和大量的代码。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-19T16:17:45.223

我订阅了[PHP 邮件列表](http://news.php.net/)——它们是获取信息和新闻的绝佳来源。否则这里有一些关于我的谷歌阅读器的提要：

*   [Programming.reddit](http://www.reddit.com/r/programming/)（一般但有用）
*   [PHP.reddit](http://www.reddit.com/r/php/)
*   [PHPDeveloper.org](http://www.phpdeveloper.org/)
*   [SO标记的PHP](https://stackoverflow.com/feeds/tag/php)

我还有更多，但最近我一直在修剪我的阅读列表——不过我认真推荐 PHP 邮件列表。php.internals 适合内部提问，关注 PHP 的发展，php.general 适合提问。

我还访问了一些论坛（例如[TalkPHP](http://www.talkphp.com)或[PHPFreaks](http://www.phpfreaks.com)），但我更喜欢新闻网站等。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-19T14:39:09.593

关于 php.net 的一件很酷的事情是您可以将函数名称附加到 url 的末尾。例子：

php.net/str_replace

将带您到正确的页面。它对空格也很宽容，如果找不到任何东西，它就会进行搜索。

Mysql 的类似之处在于它会搜索文档。尝试：

mysql.com/插入

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-19T14:39:42.510

php.net 是最好的恕我直言。

[但您也会在Zend.com](http://www.zend.com)和[Sitepoint](http://www.sitepoint.com)中找到大量知识

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-19T14:39:39.810

[gotAPI.com](http://www.gotapi.com/php)对[php.net上的帮助有很好的接口](http://www.php.net/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-19T14:39:53.477

[Planet-PHP](http://www.planet-php.net/)是一个不错的网站，提供有关 PHP 的新闻和其他内容。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-19T15:02:50.003

[Zend 开发者专区](http://devzone.zend.com/)有许多写得很好的和有趣的文章。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-19T14:37:30.720

在 php.net 站点中，在 php 的每个函数之后，程序员都会给出该函数的许多用法示例。当我想以特殊方式使用某些功能时，例如 imap_open 来读取 pop 帐户，那么我首先要做的是去 php.net 描述该功能。然后阅读人们对该功能的所有用途。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-20T16:31:44.633

我也经常使用 PHPClasses.org - 他们有一个每月通讯，其中包含“10 个最有用的 PHP 模块”竞赛，通过这种方式找到了一些宝石。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-11-28T01:32:16.013

不要忘记这个网站:)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-20T18:53:17.960

好吧，最好的部分不在网上，但我建议[PHP Architect的网站、书籍和杂志](http://www.phparch.com/)

他们的网站有一些不错的文章，但更重要的是，他们的许多书籍都是必备品：

*   [php|architect 的 Zend PHP 5 认证学习指南，第 2 版](http://www.phparch.com/c/books/id/0973862149)
*   [php|Zend 框架编程架构师指南](http://www.phparch.com/c/books/id/9780973862157)
*   [php|企业 PHP 开发架构师指南](http://www.phparch.com/c/books/id/9780973862188)

这其实是有一些问题的，由于过分强调TDD，但也是经典：

*   [php|PHP 设计模式架构师指南](http://www.phparch.com/c/books/id/0973589825)

也许是每个 PHP 开发人员都需要阅读的一本书：

*   php| Ilia Alshanetsky[的 PHP 安全架构师指南](http://www.phparch.com/c/books/id/0973862106)

他们的杂志可以通过在线订阅获得，并且可以追溯到很多年前；这些文章很棒，您可以将当前的杂志和过刊作为 PDF 格式。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-22T08:20:48.727

[PHPDeveloper](http://www.phpdeveloper.org/)由臭名昭著的 Chris "enygma" Cornutt 维护，是获取有关 PHP 世界中正在发生的事情的信息的好地方。PHPDeveloper 聚合了大量的博客和社区新闻。即使发布的特定文章不是很好，它来自的博客也可能是。另外，enygma 会坚持下去，每天至少发布 10 篇摘要，如果不是更多的话。

# java - java.awt.Desktop.getDesktop() 不支持的平台

> ID：102325
> 
> 赞同：20
> 
> 时间：2008-09-19T14:34:48.933
> 
> 标签：java, cross-platform, desktop

由于 Java 6 有一个类`java.awt.Desktop`. 有一些不错的方法，但并非所有平台都支持该类。这些方法[`java.awt.Desktop.getDesktop()`](http://java.sun.com/javase/6/docs/api/java/awt/Desktop.html#getDesktop())抛出一个

> java.lang.UnsupportedOperationException：当前平台不支持桌面 API

在某些平台上。或者该方法[`java.awt.Desktop.isDesktopSupported()`](http://java.sun.com/javase/6/docs/api/java/awt/Desktop.html#isDesktopSupported())返回false。

我知道它可以在 Windows XP、Windows 2003 和 Windows Vista 上运行。问题是它不支持哪个平台？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-19T15:09:05.527

引用：

> 桌面 API 仅支持 Windows 和 Gnome

来自[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6486393](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6486393)

然而这篇[文章](http://java-hamster.blogspot.com/2007/06/troubles-with-javaawtdesktop-browse.html)说，即使是 Gnome 支持在 Fedora 上也存在缺陷。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-04-29T10:27:24.173

无论是在 gnome 还是 fvwm 中，都不能在当前的 Debian (squeeze) 中工作。我没有尝试kde。

此错误会阻止最新版本的limewire 启动。堆栈输出为：

致命错误！

java.lang.ExceptionInInitializerError at com.limegroup.gnutella.gui.Initializer$6.run（未知来源）

…………

原因：java.lang.UnsupportedOperationException：当前平台不支持系统托盘。在 java.awt.SystemTray.getSystemTray(SystemTray.java:151)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-11-18T16:08:01.467

也适用于 OS X。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-07T11:00:04.957

要在 ubuntu 上解决它，请运行下一个命令：

```
apt-get install libgnome2-0 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-23T09:18:41.387

嗯，它不支持 Ubuntu 12.04 并且它给出这样的错误。

```
java.lang.UnsupportedOperationException: The system tray is not supported on the current platform. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-20T06:40:57.910

在 Arch linux 上，我必须安装 AUR libgnome 包

# asp.net - 在 OnClientClick 代码中包含 eval / bind 值

> ID：102343
> 
> 赞同：7
> 
> 时间：2008-09-19T14:37:22.157
> 
> 标签：asp.net, javascript, visual-studio

我需要从网格视图（VS 2005 / 2008）打开一个弹出详细信息窗口。我想要做的是在我的 TemplateColumn 的标记中有一个 asp:Button 控件，有点像这样：

```
<asp:Button ID="btnShowDetails" runat="server" CausesValidation="false"
   CommandName="Details" Text="Order Details" 
   onClientClick="window.open('PubsOrderDetails.aspx?OrderId=<%# Eval("order_id") %>',
   '','scrollbars=yes,resizable=yes, width=350, height=550');" 
```

当然，不工作的是附加 <%# Eval...%> 部分来设置查询字符串变量。

有什么建议么？还是有更好的方法来达到相同的结果？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-19T14:41:00.133

我相信这样做的方法是

> ```
> onClientClick=<%# string.Format("window.open('PubsOrderDetails.aspx?OrderId={0}',scrollbars=yes,resizable=yes, width=350, height=550);", Eval("order_id")) %> 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T14:45:14.383

我喜欢@ [AviewAnew](https://stackoverflow.com/questions/102343/including-eval-bind-values-in-onclientclick-code#102373)的建议，尽管您也可以通过将事件连接到网格视图 ItemDataBound 事件来从代码隐藏中编写它。然后，您将在事件 args 上使用 FindControl 方法来获取对按钮的引用，并将*onclick*属性设置为您的 window.open 语句。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-19T14:53:03.320

在代码隐藏中执行此操作。只需为 gridview_RowDataBound 使用事件处理程序。（我的示例使用 id 为“gvBoxes”的gridview。

```
Private Sub gvBoxes_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles gvBoxes.RowDataBound
    Select Case e.Row.RowType
        Case DataControlRowType.DataRow
            Dim btn As Button = e.Row.FindControl("btnShowDetails")
            btn.OnClientClick = "window.open('PubsOrderDetails.aspx?OrderId=" & DataItem.Eval("OrderId") & "','','scrollbars=yes,resizable=yes, width=350, height=550');"
    End Select 
End Sub 
```

# ms-access - 如何将版本号添加到 .msi 中的 Access 文件

> ID：102374
> 
> 赞同：1
> 
> 时间：2008-09-19T14:41:02.613
> 
> 标签：ms-access, windows-installer, version

我正在使用 VS 2003 构建安装。安装有一个 Excel 工作簿和两个 Access 数据库。无论用户计算机上现有数据库的创建/修改日期如何，我都需要强制加载 Access 文件。我目前使用 ORCA 在两个文件上强制输入版本号，但想找到一个更简单、更优雅的解决方案（手动编辑 .msi 文件并不是我认为的“最佳实践”。

有没有办法使用 Access 将版本号添加到数据库中，然后在安装中使用？

我有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T22:32:34.103

@LanceSc

我不认为 MsiFileHash 表在这里会有所帮助。请参阅 Aaron Stebner 的这篇[出色的文章](http://blogs.msdn.com/astebner/archive/2005/08/30/458295.aspx "Windows Installer 如何处理版本化和非版本化文件的文件替换逻辑")。客户端计算机上 Access 数据库的最后修改日期很可能与其创建日期不同。Windows Installer 将正确假定该文件自安装以来已更改并且不会替换它。

解决这个问题的正确方法（正如问题作者指出的那样）是在 File 表中设置 Version 字段。

不幸的是，Visual Studio 中的设置项目非常有限。您可以创建简单的 VBS 脚本来修改 File 表中的记录（使用 SQL），但我建议改用其他设置创作工具，例如[WiX](http://wix.sourceforge.net/)、InstallShield 或 Wise。我认为 WiX 是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T16:59:58.910

由于听起来您没有正确版本化的资源，您是否尝试过更改 REINSTALLMODE 属性？

IIRC，在“omus”的默认值中，它是“o”标志，只有在您有旧版本时才允许您安装。您可以尝试将其从“o”更改为“e”。请注意，这将覆盖丢失的、较旧且版本相同的文件。

手动添加版本是错误的开始方式，但这应该确保您不必手动增加版本号来安装它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T17:03:21.227

查看项目的构建事件。在构建事件期间可能会修改文件的版本。[只是不要引用我的话]。我不确定你是否可以，但这将是我首先开始调查的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T20:46:22.907

您应该为这些文件填充[MsiFileHash](http://msdn.microsoft.com/en-us/library/aa370107(VS.85).aspx?ppud=4)表。查看 WiFilVer.vbs ，它是 Microsoft Platform SDK 的一部分，以了解如何执行此操作。

我的另一个建议是使用[WiX](http://wix.sourceforge.net/)而不是 Visual Studio 2003 进行安装。Visual Studio 2003 对 MSI 的支持非常有限，最终您可能会花费大量时间与之抗争，而不是获得有用的工作。

# visual-c++ - 如何在 64 位 windows 服务器 2008 上优化在 Visual C++ 2005 中编译 32 位应用程序

> ID：102377
> 
> 赞同：0
> 
> 时间：2008-09-19T14:41:14.377
> 
> 标签：visual-c++, visual-studio-2005, windows-server-2008, cygwin, wow64

我刚刚安装了一个带有 64 位 windows server 2008 的构建服务器，用于持续集成。

我选择 64 位服务器的原因是拥有超过 ~3Gb 的 RAM。我曾希望这台机器能够提供极快的构建。

不幸的是，至少可以说，结果非常缺乏。我的桌面提供的构建速度比配备 Xeon 四核、15k RPM SAS 和 8 Gigs RAM 的服务器更快。

我们使用 Visual C++ 2005 用 Cygwin 编译我们的 32 位应用程序。

WOW64 模拟器会成为减慢构建过程的瓶颈吗？

任何指针，评论将不胜感激。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T15:15:26.730

WOW64 不是 x64 上的模拟器。处理器本机执行 32 位 x86 代码。在用户模式堆栈的底部，在 kernel32 *et al*下，是 DLL，它们将系统调用映射到 64 位调用接口。

请参阅[WOW64 实施细节](http://msdn.microsoft.com/en-us/library/aa384274.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T16:19:55.077

> 我们使用 Visual C++ 2005 用 Cygwin 编译我们的 32 位应用程序。

我认为这就是问题所在。我非常喜欢 Cygwin，但在文件 I/O 方面它**真的很慢。**它有助于停用 NTFS 文件系统功能以跟踪最后的文件访问。

为了获得更好的速度提升端口，您的 build-script / makefile 以使用本机命令 shell（如果 pssible），并且仅在确实没有可用替代品时调用 cygwin-tools。

如果您使用 gcc 编译器，请尝试使用 mingw 版本。那一个要快很多。

# linux - 带有密码的 ssh-agent，不会产生太多进程

> ID：102382
> 
> 赞同：6
> 
> 时间：2008-09-19T14:41:39.913
> 
> 标签：linux, ssh

我在 Linux 上使用 ssh-agent 和受密码保护的密钥。每次我登录到某台机器时，我都会这样做：

```
eval `ssh-agent` && ssh-add 
```

这工作得很好，但每次我登录并执行此操作时，我都会创建另一个 ssh-agent。偶尔，我会`killall ssh-agent`收割它们。有没有一种简单的方法可以在不同的会话中重用相同的 ssh-agent 进程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-19T14:47:18.153

看看钥匙串。它是由与你处境相似的人写的。 [钥匙链](http://www.gentoo.org/proj/en/keychain/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-19T14:46:06.720

你对这台机器有多少控制权？一种答案是将 ssh-agent 作为守护进程运行。其他选项在[此网页上](http://mah.everybody.org/docs/ssh)进行了说明，主要是测试代理是否在附近，如果不在则运行它。

要在此处重现其中一个想法：

```
SSH_ENV="$HOME/.ssh/environment"

function start_agent {
     echo "Initialising new SSH agent..."
     /usr/bin/ssh-agent | sed 's/^echo/#echo/' > "${SSH_ENV}"
     echo succeeded
     chmod 600 "${SSH_ENV}"
     . "${SSH_ENV}" > /dev/null
     /usr/bin/ssh-add;
}

# Source SSH settings, if applicable

if [ -f "${SSH_ENV}" ]; then
     . "${SSH_ENV}" > /dev/null
     #ps ${SSH_AGENT_PID} doesn’t work under cywgin
     ps -ef | grep ${SSH_AGENT_PID} | grep ssh-agent$ > /dev/null || {
         start_agent;
     }
else
     start_agent;
fi 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-20T01:40:55.133

你可以做：

```
ssh-agent $SHELL 
```

这将导致 ssh-agent 在 shell 退出时退出。它们仍然不会在会话之间共享，但至少当你这样做时它们会消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-20T01:37:46.217

根据您使用的 shell，您可以为登录 shell 和普通的新 shell 设置不同的配置文件。通常，您希望为登录 shell 启动 ssh-agent，但不是为每个子 shell 启动。例如，在 bash 中，这些文件将是`.bashrc`and `.bash_login`。

如今，大多数桌面 linux 都为您运行 ssh-agent。您只需使用 ssh-add 添加密钥，然后通过运行将密钥转发到远程 ssh 会话

```
ssh -A

```

# vim - 使用 Vim 的选项卡，如缓冲区

> ID：102384
> 
> 赞同：386
> 
> 时间：2008-09-19T14:42:04.827
> 
> 标签：vim, editor, tabs

我已经研究了在 Vim 中使用选项卡（使用 、 等）的能力`:tabe`，`:tabnew`以替代我目前在隐藏缓冲区中的同一窗口中打开许多文件的做法。

我希望我打开的每个不同文件始终位于其自己的选项卡中。但是，有些事情会阻碍这一点。我该如何解决这些问题：

1.  当命令喜欢`gf`并`^]`跳转到另一个文件中的某个位置时，该文件会在当前选项卡的新缓冲区中打开。有没有办法让所有这些类型的命令在新选项卡中打开文件，或者如果文件已经打开，则切换到带有文件的现有选项卡？

2.  当我可以使用切换缓冲区时 `:b <part of filename><tab>` ，它将完成现有缓冲区中的文件名。`<part of filename>`甚至可以是文件名的中间而不是开头。是否有切换标签的等价物？

* * *

## 回答 #1

> 赞同：680
> 
> 时间：2008-09-19T16:44:57.077

停，停，停。

这不是 Vim 选项卡的设计用途。事实上，他们的名字是错误的。更好的名称是“viewport”或“layout”，因为这就是选项卡——它是*所有*现有缓冲区的窗口的不同布局。

试图将 Vim 打入 1 个选项卡 == 1 个缓冲区是徒劳的。Vim 不知道也不关心，它不会在所有命令上都尊重它——特别是，任何使用 quickfix 缓冲区（`:make`, `:grep`，并且`:helpgrep`是那些浮现在脑海中的）的东西都会很高兴地忽略制表符，而且你无法停止那。

反而：

*   `:set hidden`
    如果你还没有这一套，那就去做吧。它使 vim 像地球上所有其他多文件编辑器一样工作。您可以编辑在某个窗口中不可见的缓冲区。
*   使用`:bn`, `:bp`, `:b #`, `:b name`, 和`ctrl-6`在缓冲区之间切换。我喜欢`ctrl-6`我自己（单独它切换到以前使用的缓冲区，或`#ctrl-6`切换到缓冲区号`#`）。
*   用于`:ls`列出缓冲区，或[MiniBufExpl](https://github.com/fholgado/minibufexpl.vim)或[BufExplorer 之](http://www.vim.org/scripts/script.php?script_id=42)类的插件。

* * *

## 回答 #2

> 赞同：284
> 
> 时间：2010-08-13T11:36:57.070

在这里聚会有点晚了，但很惊讶我没有在这个列表中看到以下内容：

`:tab sball`- 这将为每个打开的缓冲区打开一个新选项卡。

`:help switchbuf`- 这控制缓冲区切换行为，请尝试`:set switchbuf=usetab,newtab`。这应该意味着如果缓冲区打开，则切换到现有选项卡，否则创建一个新选项卡。

* * *

## 回答 #3

> 赞同：189
> 
> 时间：2012-01-23T15:05:38.093

Vim`:help window`很好地解释了“选项卡与缓冲区”的混淆。

> 缓冲区是文件的内存文本。
> 窗口是缓冲区上的视口。
> 标签页是窗口的集合。

**在 vim 中使用buffers**实现打开多个文件。在其他编辑器（例如 notepad++）中，这是通过选项卡完成的，因此 vim 中的选项卡名称可能会产生误导。

**Windows**的目的是拆分工作区并在一个屏幕上同时显示多个文件（缓冲区）。在其他编辑器中，这可以通过打开多个 GUI 窗口并在桌面上重新排列它们来实现。

最后，在这个类比中，vim 的**标签页**将对应多个桌面，即窗口的不同重新排列。

正如 vim`help: tab-page`解释的那样，当一个人想要临时编辑一个文件，但不想改变当前窗口和缓冲区布局中的任何内容时，可以使用标签页。在这种情况下，可以使用另一个标签页来仅用于编辑该特定文件。

当然，您必须记住，在许多标签页或窗口中显示相同的文件会导致显示相同的工作副本（缓冲区）。

* * *

## 回答 #4

> 赞同：58
> 
> 时间：2012-11-11T05:27:00.470

与此处的其他一些答案相反，我说您可以根据需要使用标签。vim 被设计为多功能和可定制的，而不是强迫您根据预定义的参数工作。我们都知道程序员喜欢把我们的“道德”强加给其他人，所以这个成就肯定是一个主要特征。

`<C-w>gf`是缓冲区`gf`命令的选项卡等效项。 `<C-PageUp>`并将`<C-PageDown>`在选项卡之间切换。（在 Byobu 中，这两个命令对我不起作用，但它们在 Byobu/tmux 之外工作。替代方法是`gt`和`gT`。） `<C-w>T`会将当前窗口移动到新标签页。

如果您希望 vim 尽可能使用现有选项卡，而不是创建重复的选项卡，请添加`:set switchbuf=usetab`到您的 .vimrc 文件中。您可以添加`newtab`到列表 ( `:set switchbuf=usetab,newtab`) 以强制显示编译错误的 QuickFix 命令在单独的选项卡中打开。相反，我更喜欢`split`它在拆分窗口中打开编译错误。

如果您启用了鼠标支持`:set mouse=a`，您可以通过单击它们与选项卡进行交互。默认情况下还有一个`+`按钮将创建一个新选项卡。

对于选项卡上的文档，请`:help tab-page`在正常模式下键入。（完成此操作后，您可以练习使用 将窗口移动到选项卡`<C-w>T`。）有很长的命令列表。一些窗口命令与选项卡有关，因此您可能还想通过`:help windows`.

**补充：2013-12-19**

要在 vim 中打开多个文件，每个文件在单独的选项卡中，请使用`vim -p file1 file2 ...`. 如果你和我一样总是忘记添加`-p`，你可以在最后添加，因为 vim 遵循正常的命令行选项解析规则。或者，您可以将 bash 别名映射添加`vim`到`vim -p`.

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2008-09-19T15:12:05.473

我遇到了同样的问题。我希望标签像缓冲区一样工作，但我从来没有设法让它们发挥作用。我最终确定的解决方案是让缓冲区表现得像制表符！

查看名为[Mini Buffer Explorer](http://vim.sourceforge.net/scripts/script.php?script_id=159)的插件，一旦安装和配置，您将能够以与选项卡相同的方式使用缓冲区，而不会丢失任何功能。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-03-30T18:15:36.017

对于那些不熟悉 Vim 并且来自其他文本编辑器（在我的例子中是 Sublime Text）的人来说，这是一个答案。

我通读了所有这些答案，但仍然不清楚。如果您阅读了足够多的内容，那么事情就会开始变得有意义，但是我花了几个小时在问题之间来回走动。

正如其他人所解释的那样，第一件事是：

**Tab Pages**听起来很像**tabs**，它们的行为类似于选项卡，并且看起来很像大多数其他 GUI 编辑器中的选项卡，但事实并非如此。我认为这是在 Vim 中构建的一个糟糕的心理模型，不幸的是，它掩盖了您在标签页中拥有的额外功能。

我理解的第一个描述来自[@crenate 的回答](https://stackoverflow.com/a/8973705/327074)是它们相当于多个桌面。从这方面来看，您只会打开几个桌面，但每个桌面内都会打开许多​​ GUI 窗口。

我会说它们与其他编辑器/浏览器中的相似：

1.  选项卡分组
2.  Sublime Text 工作区（即项目中打开的文件的列表）

当您看到它们时，您会意识到它们的强大之处在于您可以轻松地将文件集（缓冲区）组合在一起，例如不同标签页中的 CSS 文件、HTML 文件和 JS 文件。这实际上非常棒。

## 其他让我感到困惑的描述

### 视口

这对我来说毫无意义。一个视口，虽然它确实有一个[定义的字典术语](https://en.oxforddictionaries.com/definition/viewport)，但我只听说过在`:help window`文档中提到 Vim 窗口。对于 Sublime Text、Visual Studio、Atom、Notepad++ 等编辑器，我从未听说过 Viewport 一词。事实上，在我开始尝试使用标签页之前，我从未听说过 Vim。

如果您像查看多个桌面一样查看标签页，那么将桌面称为单个窗口似乎很奇怪。

### 工作区

这可能更有意义，[字典定义](https://en.oxforddictionaries.com/definition/workspace)是：

> 临时使用的内存存储设施。

所以它就像一个存储一组缓冲区的地方。

我最初听起来不像[Sublime Text 的](http://www.sublimetext.com/docs/2/projects.html)工作空间概念，它是您在项目中打开的所有文件的列表：

> sublime-workspace 文件，其中包含用户特定的数据，例如打开的文件和对每个文件的修改。

然而仔细想想，这确实是一致的。如果你将 Vim 选项卡页面视为 Sublime Text 项目，那么在每个项目中只打开一个文件并在项目之间不断切换似乎很奇怪。因此，为什么使用标签页只打开一个文件是奇怪的。

### 窗户的集合

以这种`:help window`方式引用标签页。加上许多其他答案使用相同的概念。但是，除非您了解 vim 窗口是什么，否则它并没有多大用处，就像在沙子上建造城堡一样。

正如我上面提到的，vim 窗口与视口相同，并且在这篇[linux.com 文章](https://www.linux.com/learn/vim-tips-using-viewports)中得到了很好的解释：

> Vim 中一个非常有用的功能是能够在一个或多个文件之间分割可视区域，或者只是分割窗口以更轻松地查看同一文件的两个位。Vim 文档将其称为视口或窗口，可以互换。
> 
> 如果您曾经通过使用 :help topic 或按 F1 键使用过 Vim 的帮助功能，您可能已经熟悉此功能。当您输入帮助时，Vim 会拆分视口并在顶部视口中打开帮助文档，而您的文档会在底部视口中打开。

我觉得很奇怪标签页被称为窗口集合而不是缓冲区集合。但我想你可以打开两个单独的标签页，每个标签页都有多个窗口都指向同一个缓冲区，至少到目前为止我是这样理解的。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-19T14:50:18.270

看着 :help 选项卡，vim 似乎不想像你那样工作......

缓冲区在选项卡之间共享，因此似乎不可能将给定缓冲区锁定为仅出现在某个选项卡上。

不过，这是个好主意。

通过使用支持选项卡的终端（如 multi-gnome-terminal），然后在每个终端选项卡中运行 vim 实例，您可能会获得您想要的效果。虽然不完美...

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-19T14:53:33.990

*   您可以映射通常操作缓冲区的命令来操作选项卡，就像我在 .vimrc 中使用 gf 所做的那样：

    ```
    map gf :tabe <cfile><CR> 
    ```

    我相信你也可以用 [^

*   我不认为 vim 支持这个选项卡（还）。我分别使用 gt 和 gT 移动到下一个和上一个选项卡。您也可以使用 Ngt，其中 N 是选项卡编号。我的一个烦恼是，默认情况下，选项卡编号不会显示在选项卡行中。[为了解决这个问题，我在.vimrc 文件](http://lucasoman.com/vimrc)的末尾添加了几个函数（我没有粘贴到这里，因为它很长并且格式不正确）。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-09-19T22:46:12.463

我使用像选项卡这样的缓冲区，使用[BufExplorer](http://www.vim.org/scripts/script.php?script_id=42)插件和一些宏：

```
" CTRL+b opens the buffer list
map <C-b> <esc>:BufExplorer<cr>

" gz in command mode closes the current buffer
map gz :bdelete<cr>

" g[bB] in command mode switch to the next/prev. buffer
map gb :bnext<cr>
map gB :bprev<cr> 
```

使用 BufExplorer，您的顶部没有标签栏，但另一方面，它可以节省屏幕空间，而且您可以打开无限数量的文件/缓冲区，并且可以搜索缓冲区列表......

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-06-27T21:12:55.770

如果您希望缓冲区像选项卡一样工作，请查看[tabline 插件](http://vim.sourceforge.net/scripts/script.php?script_id=1507)。

它使用单个窗口，并在顶部添加一行来模拟选项卡（仅显示缓冲区列表）。这是很久以前出现的，当时只在 GVim 中支持选项卡，但在命令行 vim 中不支持。由于它只使用缓冲区操作，所以一切都与 vim 的其余部分很好地集成在一起。

# python - 在 __iter__ 上对字典进行排序

> ID：102394
> 
> 赞同：5
> 
> 时间：2008-09-19T14:43:24.777
> 
> 标签：python, optimization, refactoring

我正在尝试根据其键对 dict 进行排序，并将迭代器返回到类中重写的 iter 方法中的值。有没有比创建一个新列表、在我对键进行排序时插入到列表中更好、更有效的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-19T14:49:06.933

像这样的东西怎么样：

```
def itersorted(d):
    for key in sorted(d):
        yield d[key] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-19T14:48:21.707

到目前为止，最简单的方法，几乎​​可以肯定是最快的方法是：

```
def sorted_dict(d):
    keys = d.keys()
    keys.sort()
    for key in keys:
        yield d[key] 
```

如果不获取所有键，您将无法进行排序。将所有键提取到一个列表中，然后对该列表进行排序是最有效的方法；列表排序非常快，并且像这样获取键列表的速度尽可能快。然后，您可以创建一个新的值列表或像示例一样生成值。请记住，如果您正在对其进行迭代（下一次迭代将失败），则无法修改该字典，因此如果您想在完成 sorted_dict() 的结果之前修改该字典，请使其返回一个列表.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-19T15:54:47.197

```
def sortedDict(dictobj):
    return (value for key, value in sorted(dictobj.iteritems())) 
```

这将创建一个中间列表，“sorted()”方法返回一个真实列表。但至少它只是一个。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-09-19T14:53:03.897

假设您需要默认排序顺序，您可以使用`sorted(list)`或`list.sort()`。如果您想要自己的排序逻辑，Python 列表支持基于您传入的函数进行排序的能力。例如，以下将是一种使用函数将数字从最小到最大（默认行为）排序的方法。

```
def compareTwo(a, b):
  if a > b:
    return 1
  if a == b:
    return 0
  if a < b:
    return -1

List.Sort(compareTwo)
print a 
```

这种方法在概念上比手动创建新列表并附加新值更简洁，并且允许您控制排序逻辑。

# visual-studio - Visual Studio 2008 有哪些好的可用性插件？

> ID：102396
> 
> 赞同：0
> 
> 时间：2008-09-19T14:43:42.903
> 
> 标签：visual-studio, visual-studio-2008, user-interface, tabs

我已经使用 Visual Studio 很长时间了，顶部代码选项卡的不断改组让我发疯了。我想知道是否有任何加载项可能会更改此或其他 UI 行为。

可能很酷的事情：

*   不会消失的粘性标签。
*   多代码文件可折叠选项卡（也许每个选项卡都是一个项目？）。
*   ~~让解决方案树自动转到您当前正在查看的文件。~~谢谢煎蛋！
*   你的想法在这里。

我做了一些谷歌搜索，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T14:55:10.427

“让解决方案树自动转到您当前正在查看的文件”功能在 VS2008 中已经存在，但默认情况下未启用。转到工具 -> 选项 -> 项目和解决方案 -> 常规，然后选中“在解决方案资源管理器中跟踪活动项目”框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-24T10:46:30.370

瑞克，

[Visual Studio 的Tabs Studio](http://www.tabsstudio.com)加载项是内置选项卡的替代品。多行选项卡使它们始终可见。选项卡可以分组，它可能接近您所说的“多代码文件选项卡”。

有关详细信息，请参阅[Tabs Studio 主页](http://www.tabsstudio.com)。

# c# - .Net 中的优先级队列

> ID：102398
> 
> 赞同：239
> 
> 时间：2008-09-19T14:43:54.277
> 
> 标签：c#, .net, data-structures, heap, priority-queue

我正在寻找优先级队列或堆数据结构的 .NET 实现

> 优先队列是比简单排序提供更多灵活性的数据结构，因为它们允许新元素以任意间隔进入系统。将新作业插入优先级队列比在每次到达时重新排序所有内容更具成本效益。
> 
> 基本优先级队列支持三个主要操作：
> 
> *   插入（Q，x）。给定一个带有键 k 的项目 x，将其插入优先级队列 Q。
> *   查找最小值 (Q)。返回指向其键值小于优先级队列 Q 中任何其他键的项的指针。
> *   删除-最小值（Q）。从优先级队列 Q 中移除 key 最小的 item

除非我找错了地方，否则框架中没有一个。有人知道一个好的，还是我应该自己推出？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2009-07-11T18:17:10.783

[您可能会喜欢C5 通用集合库](http://www.itu.dk/research/c5/)中的 IntervalHeap 。引用[用户指南](https://www.itu.dk/research/c5/latest/ITU-TR-2006-76.pdf)

> 类使用存储为对数组的间隔堆`IntervalHeap<T>`实现接口。and 操作和索引器`IPriorityQueue<T>`的get-accessor 需要时间 O(1)。, , Add 和 Update 操作以及索引器的 set-accessor 需要时间 O(log n)。与普通优先级队列相比，间隔堆以相同的效率提供最小和最大操作。`FindMin``FindMax``DeleteMin``DeleteMax`

API 足够简单

```
> var heap = new C5.IntervalHeap<int>();
> heap.Add(10);
> heap.Add(5);
> heap.FindMin();
5 
```

从 Nuget [https://www.nuget.org/packages/C5](https://www.nuget.org/packages/C5)或 GitHub [https://github.com/sestoft/C5/安装](https://github.com/sestoft/C5/)

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-12-08T10:32:02.940

这是我对 .NET 堆的尝试

```
public abstract class Heap<T> : IEnumerable<T>
{
    private const int InitialCapacity = 0;
    private const int GrowFactor = 2;
    private const int MinGrow = 1;

    private int _capacity = InitialCapacity;
    private T[] _heap = new T[InitialCapacity];
    private int _tail = 0;

    public int Count { get { return _tail; } }
    public int Capacity { get { return _capacity; } }

    protected Comparer<T> Comparer { get; private set; }
    protected abstract bool Dominates(T x, T y);

    protected Heap() : this(Comparer<T>.Default)
    {
    }

    protected Heap(Comparer<T> comparer) : this(Enumerable.Empty<T>(), comparer)
    {
    }

    protected Heap(IEnumerable<T> collection)
        : this(collection, Comparer<T>.Default)
    {
    }

    protected Heap(IEnumerable<T> collection, Comparer<T> comparer)
    {
        if (collection == null) throw new ArgumentNullException("collection");
        if (comparer == null) throw new ArgumentNullException("comparer");

        Comparer = comparer;

        foreach (var item in collection)
        {
            if (Count == Capacity)
                Grow();

            _heap[_tail++] = item;
        }

        for (int i = Parent(_tail - 1); i >= 0; i--)
            BubbleDown(i);
    }

    public void Add(T item)
    {
        if (Count == Capacity)
            Grow();

        _heap[_tail++] = item;
        BubbleUp(_tail - 1);
    }

    private void BubbleUp(int i)
    {
        if (i == 0 || Dominates(_heap[Parent(i)], _heap[i])) 
            return; //correct domination (or root)

        Swap(i, Parent(i));
        BubbleUp(Parent(i));
    }

    public T GetMin()
    {
        if (Count == 0) throw new InvalidOperationException("Heap is empty");
        return _heap[0];
    }

    public T ExtractDominating()
    {
        if (Count == 0) throw new InvalidOperationException("Heap is empty");
        T ret = _heap[0];
        _tail--;
        Swap(_tail, 0);
        BubbleDown(0);
        return ret;
    }

    private void BubbleDown(int i)
    {
        int dominatingNode = Dominating(i);
        if (dominatingNode == i) return;
        Swap(i, dominatingNode);
        BubbleDown(dominatingNode);
    }

    private int Dominating(int i)
    {
        int dominatingNode = i;
        dominatingNode = GetDominating(YoungChild(i), dominatingNode);
        dominatingNode = GetDominating(OldChild(i), dominatingNode);

        return dominatingNode;
    }

    private int GetDominating(int newNode, int dominatingNode)
    {
        if (newNode < _tail && !Dominates(_heap[dominatingNode], _heap[newNode]))
            return newNode;
        else
            return dominatingNode;
    }

    private void Swap(int i, int j)
    {
        T tmp = _heap[i];
        _heap[i] = _heap[j];
        _heap[j] = tmp;
    }

    private static int Parent(int i)
    {
        return (i + 1)/2 - 1;
    }

    private static int YoungChild(int i)
    {
        return (i + 1)*2 - 1;
    }

    private static int OldChild(int i)
    {
        return YoungChild(i) + 1;
    }

    private void Grow()
    {
        int newCapacity = _capacity*GrowFactor + MinGrow;
        var newHeap = new T[newCapacity];
        Array.Copy(_heap, newHeap, _capacity);
        _heap = newHeap;
        _capacity = newCapacity;
    }

    public IEnumerator<T> GetEnumerator()
    {
        return _heap.Take(Count).GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
}

public class MaxHeap<T> : Heap<T>
{
    public MaxHeap()
        : this(Comparer<T>.Default)
    {
    }

    public MaxHeap(Comparer<T> comparer)
        : base(comparer)
    {
    }

    public MaxHeap(IEnumerable<T> collection, Comparer<T> comparer)
        : base(collection, comparer)
    {
    }

    public MaxHeap(IEnumerable<T> collection) : base(collection)
    {
    }

    protected override bool Dominates(T x, T y)
    {
        return Comparer.Compare(x, y) >= 0;
    }
}

public class MinHeap<T> : Heap<T>
{
    public MinHeap()
        : this(Comparer<T>.Default)
    {
    }

    public MinHeap(Comparer<T> comparer)
        : base(comparer)
    {
    }

    public MinHeap(IEnumerable<T> collection) : base(collection)
    {
    }

    public MinHeap(IEnumerable<T> collection, Comparer<T> comparer)
        : base(collection, comparer)
    {
    }

    protected override bool Dominates(T x, T y)
    {
        return Comparer.Compare(x, y) <= 0;
    }
} 
```

一些测试：

```
[TestClass]
public class HeapTests
{
    [TestMethod]
    public void TestHeapBySorting()
    {
        var minHeap = new MinHeap<int>(new[] {9, 8, 4, 1, 6, 2, 7, 4, 1, 2});
        AssertHeapSort(minHeap, minHeap.OrderBy(i => i).ToArray());

        minHeap = new MinHeap<int> { 7, 5, 1, 6, 3, 2, 4, 1, 2, 1, 3, 4, 7 };
        AssertHeapSort(minHeap, minHeap.OrderBy(i => i).ToArray());

        var maxHeap = new MaxHeap<int>(new[] {1, 5, 3, 2, 7, 56, 3, 1, 23, 5, 2, 1});
        AssertHeapSort(maxHeap, maxHeap.OrderBy(d => -d).ToArray());

        maxHeap = new MaxHeap<int> {2, 6, 1, 3, 56, 1, 4, 7, 8, 23, 4, 5, 7, 34, 1, 4};
        AssertHeapSort(maxHeap, maxHeap.OrderBy(d => -d).ToArray());
    }

    private static void AssertHeapSort(Heap<int> heap, IEnumerable<int> expected)
    {
        var sorted = new List<int>();
        while (heap.Count > 0)
            sorted.Add(heap.ExtractDominating());

        Assert.IsTrue(sorted.SequenceEqual(expected));
    }
} 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2008-09-19T14:48:02.973

我喜欢使用[PowerCollections](http://www.codeplex.com/PowerCollections)`OrderedBag`中的和`OrderedSet`类作为优先级队列。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2011-02-14T17:03:26.583

这是我刚刚写的一个，也许它没有优化（仅使用排序字典）但易于理解。您可以插入不同种类的对象，因此没有通用队列。

```
using System;
using System.Diagnostics;
using System.Collections;
using System.Collections.Generic;

namespace PrioQueue
{
    public class PrioQueue
    {
        int total_size;
        SortedDictionary<int, Queue> storage;

        public PrioQueue ()
        {
            this.storage = new SortedDictionary<int, Queue> ();
            this.total_size = 0;
        }

        public bool IsEmpty ()
        {
            return (total_size == 0);
        }

        public object Dequeue ()
        {
            if (IsEmpty ()) {
                throw new Exception ("Please check that priorityQueue is not empty before dequeing");
            } else
                foreach (Queue q in storage.Values) {
                    // we use a sorted dictionary
                    if (q.Count > 0) {
                        total_size--;
                        return q.Dequeue ();
                    }
                }

                Debug.Assert(false,"not supposed to reach here. problem with changing total_size");

                return null; // not supposed to reach here.
        }

        // same as above, except for peek.

        public object Peek ()
        {
            if (IsEmpty ())
                throw new Exception ("Please check that priorityQueue is not empty before peeking");
            else
                foreach (Queue q in storage.Values) {
                    if (q.Count > 0)
                        return q.Peek ();
                }

                Debug.Assert(false,"not supposed to reach here. problem with changing total_size");

                return null; // not supposed to reach here.
        }

        public object Dequeue (int prio)
        {
            total_size--;
            return storage[prio].Dequeue ();
        }

        public void Enqueue (object item, int prio)
        {
            if (!storage.ContainsKey (prio)) {
                storage.Add (prio, new Queue ());
              }
            storage[prio].Enqueue (item);
            total_size++;

        }
    }
} 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2017-03-02T18:11:13.973

**.NET 6+：**正如@rustyx 评论的那样，.NET 6 添加了一个[System.Collections.Generic.PriorityQueue<TElement,TPriority>](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.priorityqueue-2?view=net-6.0)类。FWIW 它是开源的，并[在 c# 中实现](https://github.com/dotnet/runtime/blob/main/src/libraries/System.Collections/src/System/Collections/Generic/PriorityQueue.cs)。

**较早的 .NET Core 版本和 .NET Framework：** Microsoft 在 .NET Framework 中编写（并在线共享）了[2 个内部 PriorityQueue 类](https://referencesource.microsoft.com/#q=priorityqueue)。但是，正如@mathusum-mut 评论的那样，其中一个存在错误（当然，SO 社区已经为它提供了修复）：[Microsoft 内部 PriorityQueue<T> 中的错误？](https://stackoverflow.com/q/44221454/704808)

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2008-10-14T13:36:28.083

我在这里的博客上找到了 Julian Bucknall 的一篇文章 - [http://www.boyet.com/Articles/PriorityQueueCSharp3.html](http://www.boyet.com/Articles/PriorityQueueCSharp3.html)

我们稍微修改了它，以便队列中的低优先级项目最终会随着时间的推移“冒泡”到顶部，因此它们不会遭受饥饿。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-11-24T08:16:08.590

```
class PriorityQueue<T>
{
    IComparer<T> comparer;
    T[] heap;
    public int Count { get; private set; }
    public PriorityQueue() : this(null) { }
    public PriorityQueue(int capacity) : this(capacity, null) { }
    public PriorityQueue(IComparer<T> comparer) : this(16, comparer) { }
    public PriorityQueue(int capacity, IComparer<T> comparer)
    {
        this.comparer = (comparer == null) ? Comparer<T>.Default : comparer;
        this.heap = new T[capacity];
    }
    public void push(T v)
    {
        if (Count >= heap.Length) Array.Resize(ref heap, Count * 2);
        heap[Count] = v;
        SiftUp(Count++);
    }
    public T pop()
    {
        var v = top();
        heap[0] = heap[--Count];
        if (Count > 0) SiftDown(0);
        return v;
    }
    public T top()
    {
        if (Count > 0) return heap[0];
        throw new InvalidOperationException("优先队列为空");
    }
    void SiftUp(int n)
    {
        var v = heap[n];
        for (var n2 = n / 2; n > 0 && comparer.Compare(v, heap[n2]) > 0; n = n2, n2 /= 2) heap[n] = heap[n2];
        heap[n] = v;
    }
    void SiftDown(int n)
    {
        var v = heap[n];
        for (var n2 = n * 2; n2 < Count; n = n2, n2 *= 2)
        {
            if (n2 + 1 < Count && comparer.Compare(heap[n2 + 1], heap[n2]) > 0) n2++;
            if (comparer.Compare(v, heap[n2]) >= 0) break;
            heap[n] = heap[n2];
        }
        heap[n] = v;
    }
} 
```

简单的。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2010-11-11T21:05:51.520

您可能会发现此实现很有用：http: [//www.codeproject.com/Articles/126751/Priority-queue-in-Csharp-with-help-of-heap-data-st.aspx](http://www.codeproject.com/Articles/126751/Priority-queue-in-Csharp-with-help-of-heap-data-st.aspx)

它是通用的并且基于堆数据结构

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-08-24T19:20:33.623

## 算法套件

[我编写了一个名为AlgoKit](https://github.com/pgolebiowski/algo-kit)的开源库，可通过[NuGet](https://www.nuget.org/packages/AlgoKit)获得。它包含：

*   **隐式 d-ary 堆**（ArrayHeap），
*   **二项式**堆****
***   **配对堆**。**

 **该代码已经过广泛的测试。我绝对建议你试一试。

## 例子

```
var comparer = Comparer<int>.Default;
var heap = new PairingHeap<int, string>(comparer);

heap.Add(3, "your");
heap.Add(5, "of");
heap.Add(7, "disturbing.");
heap.Add(2, "find");
heap.Add(1, "I");
heap.Add(6, "faith");
heap.Add(4, "lack");

while (!heap.IsEmpty)
    Console.WriteLine(heap.Pop().Value); 
```

## 为什么是那三个堆？

实现的最佳选择与输入密切相关——正如 Larkin、Sen 和 Tarjan 在A back-to-basics 优先级队列的*实证研究*[arXiv:1403.0252v1 [cs.DS]](https://arxiv.org/abs/1403.0252v1)中所展示的那样。他们测试了隐式 d-ary 堆、配对堆、Fibonacci 堆、二项式堆、显式 d-ary 堆、等级配对堆、地震堆、违规堆、等级松弛弱堆和严格 Fibonacci 堆。

AlgoKit 具有三种类型的堆，它们似乎在测试的那些堆中效率最高。

## 选择提示

对于数量相对较少的元素，您可能会对使用隐式堆感兴趣，尤其是四元堆（隐式 4 进制）。如果在更大的堆大小上运行，二项式堆和配对堆等摊销结构应该表现更好。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-02-01T08:02:29.953

一个简单的最大堆实现。

[https://github.com/bharathkumarms/AlgorithmsMadeEasy/blob/master/AlgorithmsMadeEasy/MaxHeap.cs](https://github.com/bharathkumarms/AlgorithmsMadeEasy/blob/master/AlgorithmsMadeEasy/MaxHeap.cs)

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace AlgorithmsMadeEasy
{
    class MaxHeap
    {
        private static int capacity = 10;
        private int size = 0;
        int[] items = new int[capacity];

        private int getLeftChildIndex(int parentIndex) { return 2 * parentIndex + 1; }
        private int getRightChildIndex(int parentIndex) { return 2 * parentIndex + 2; }
        private int getParentIndex(int childIndex) { return (childIndex - 1) / 2; }

        private int getLeftChild(int parentIndex) { return this.items[getLeftChildIndex(parentIndex)]; }
        private int getRightChild(int parentIndex) { return this.items[getRightChildIndex(parentIndex)]; }
        private int getParent(int childIndex) { return this.items[getParentIndex(childIndex)]; }

        private bool hasLeftChild(int parentIndex) { return getLeftChildIndex(parentIndex) < size; }
        private bool hasRightChild(int parentIndex) { return getRightChildIndex(parentIndex) < size; }
        private bool hasParent(int childIndex) { return getLeftChildIndex(childIndex) > 0; }

        private void swap(int indexOne, int indexTwo)
        {
            int temp = this.items[indexOne];
            this.items[indexOne] = this.items[indexTwo];
            this.items[indexTwo] = temp;
        }

        private void hasEnoughCapacity()
        {
            if (this.size == capacity)
            {
                Array.Resize(ref this.items,capacity*2);
                capacity *= 2;
            }
        }

        public void Add(int item)
        {
            this.hasEnoughCapacity();
            this.items[size] = item;
            this.size++;
            heapifyUp();
        }

        public int Remove()
        {
            int item = this.items[0];
            this.items[0] = this.items[size-1];
            this.items[this.size - 1] = 0;
            size--;
            heapifyDown();
            return item;
        }

        private void heapifyUp()
        {
            int index = this.size - 1;
            while (hasParent(index) && this.items[index] > getParent(index))
            {
                swap(index, getParentIndex(index));
                index = getParentIndex(index);
            }
        }

        private void heapifyDown()
        {
            int index = 0;
            while (hasLeftChild(index))
            {
                int bigChildIndex = getLeftChildIndex(index);
                if (hasRightChild(index) && getLeftChild(index) < getRightChild(index))
                {
                    bigChildIndex = getRightChildIndex(index);
                }

                if (this.items[bigChildIndex] < this.items[index])
                {
                    break;
                }
                else
                {
                    swap(bigChildIndex,index);
                    index = bigChildIndex;
                }
            }
        }
    }
}

/*
Calling Code:
    MaxHeap mh = new MaxHeap();
    mh.Add(10);
    mh.Add(5);
    mh.Add(2);
    mh.Add(1);
    mh.Add(50);
    int maxVal  = mh.Remove();
    int newMaxVal = mh.Remove();
*/ 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-09-19T14:49:19.990

在 Java Collections 框架中的 Java 实现 (java.util.PriorityQueue) 上使用 Java 到 C# 转换器，或者更智能地使用算法和核心代码并将其插入到您自己制作的符合 C# Collections 框架的 C# 类中队列的 API，或者至少是集合的 API。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2011-07-08T14:45:56.920

这是 NGenerics 团队的另一个实现：

[NGenerics 优先队列](http://code.google.com/p/ngenerics/wiki/PriorityQueue)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-07-29T11:05:42.493

我最近遇到了同样的问题，最终为此创建了一个[NuGet 包](https://www.nuget.org/packages/MedallionPriorityQueue/)。

这实现了一个标准的基于堆的优先级队列。它还具有 BCL 集合的所有常见细节：`ICollection<T>`和`IReadOnlyCollection<T>`实现、自定义`IComparer<T>`支持、指定初始容量的能力，以及`DebuggerTypeProxy`使集合更易于在调试器中使用。

还有一个包的[内联](https://www.nuget.org/packages/MedallionPriorityQueue.Inline/)版本，它只是将单个 .cs 文件安装到您的项目中（如果您想避免采用外部可见的依赖项，这很有用）。

更多信息可在[github 页面上找到](https://github.com/madelson/MedallionUtilities/tree/master/MedallionPriorityQueue)。

* * *

## 回答 #14

> 赞同：-4
> 
> 时间：2013-01-01T20:47:19.923

下面的实现`PriorityQueue`使用`SortedSet`来自 System 库。

```
using System;
using System.Collections.Generic;

namespace CDiggins
{
    interface IPriorityQueue<T, K> where K : IComparable<K>
    {
        bool Empty { get; }
        void Enqueue(T x, K key);
        void Dequeue();
        T Top { get; }
    }

    class PriorityQueue<T, K> : IPriorityQueue<T, K> where K : IComparable<K>
    {
        SortedSet<Tuple<T, K>> set;

        class Comparer : IComparer<Tuple<T, K>> {
            public int Compare(Tuple<T, K> x, Tuple<T, K> y) {
                return x.Item2.CompareTo(y.Item2);
            }
        }

        PriorityQueue() { set = new SortedSet<Tuple<T, K>>(new Comparer()); }
        public bool Empty { get { return set.Count == 0;  } }
        public void Enqueue(T x, K key) { set.Add(Tuple.Create(x, key)); }
        public void Dequeue() { set.Remove(set.Max); }
        public T Top { get { return set.Max.Item1; } }
    }
} 
```**

# java - 保护嵌入式密码

> ID：102425
> 
> 赞同：8
> 
> 时间：2008-09-19T14:46:28.513
> 
> 标签：java, security, passwords, embedded-resource, copy-protection

我在 java 中有一个属性文件，其中存储了我的应用程序的所有信息，例如徽标图像文件名、数据库名称、数据库用户和数据库密码。

我可以将加密的密码存储在属性文件中。但是，可以使用反编译器从 jar 中读取密钥或密码。

有没有办法将 db pass 安全地存储在属性文件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T14:59:39.373

有多种方法可以管理这一点。如果您能找到一种方法让用户在应用程序启动时为密钥库提供密码，那么最合适的方法是使用密钥加密所有值，并将此密钥存储在密钥库中。密钥库的命令行界面是使用 keytool。然而，JSE 也有 API 以编程方式访问密钥库。

如果您无法让用户在启动时手动向密钥库提供密码（例如对于 Web 应用程序），那么一种方法是编写一个异常复杂的混淆例程，该例程可以混淆密钥并将其存储在还有一个属性文件。要记住的重要事项是，混淆和反混淆逻辑应该是多层的（可能涉及加扰、编码、引入虚假字符等），并且本身应该至少有一个可以隐藏在应用程序的其他类中的密钥使用不直观的名称。这不是一个完全安全的机制，因为拥有反编译器并且有相当多的时间和智慧的人仍然可以解决它，但它是我所知道的唯一一个不需要您闯入本机（即不易反编译）代码的机制.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T15:26:05.253

您将密码的 SHA1 哈希值存储在属性文件中。然后，当您验证用户密码时，您会散列他们的登录尝试并确保两个散列匹配。

这是将为您散列一些字节的代码。`getBytes()`您可以使用该方法轻松地从字符串中获取字节。

```
/**
     * Returns the hash value of the given chars
     * 
     * Uses the default hash algorithm described above
     * 
     * @param in
     *            the byte[] to hash
     * @return a byte[] of hashed values
     */
    public static byte[] getHashedBytes(byte[] in)
    {
        MessageDigest msg;
        try
        {
            msg = MessageDigest.getInstance(hashingAlgorithmUsed);
        }
        catch (NoSuchAlgorithmException e)
        {
            throw new AssertionError("Someone chose to use a hashing algorithm that doesn't exist.  Epic fail, go change it in the Util file.  SHA(1) or MD5");
        }
        msg.update(in);
        return msg.digest();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T14:53:54.270

不，那里没有。即使你加密它，也有人会反编译解密它的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T15:21:07.073

您可以为密码（直接数据库密码或密钥密码）创建一个单独的属性文件（在 jar 之外），并且不将该属性文件包含在分发中。或者您可以让服务器只接受来自特定机器的登录，这样就需要进行欺骗。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T15:32:18.343

除了如上所述加密密码外，请将任何密码放在单独的属性文件中，并在部署时尝试为该文件提供尽可能多的锁定权限。

例如，如果您的应用程序服务器在 Linux/Unix 上运行，`root`则将密码属性文件设置为`root`具有 400/`-r--------`权限。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T15:33:17.357

当然，在以某种方式进行身份验证后，您不能让应用程序通过 https 联系服务器并下载密码吗？

# .net - 查看、暂停和终止正在运行的 .Net 应用程序中的线程

> ID：102427
> 
> 赞同：4
> 
> 时间：2008-09-19T14:46:46.640
> 
> 标签：.net, multithreading

我正在开发一个.Net 应用程序，它有多个线程来做各种各样的事情。当生产中出现问题时，我希望能够查看哪些线程正在运行（通过它们的托管名称）并且还能够暂停/终止它们。

无论如何要做到这一点？

VS 并不总是可用的（虽然是一个不错的选择），而且 WinDbg UI 不适合轻率的人。

我考虑了一个程序内线程窗口，就像 VS 在调试时一样，但找不到一种编程方式来做到这一点。Process.GetThreads 返回非常少的可用数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-10-14T23:11:26.797

寻找线程：

```
using System.Diagnostics;

ProcessThreadCollection threads = Process.GetCurrentProcess().Threads; 
```

您通常可以使用 Thread.Abort() 终止托管线程。如果他们处于睡眠、等待或加入状态，您甚至可以摆脱（不那么讨厌的）Thread.Interrupt()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T15:00:54.657

.net 中没有内置任何东西可以做到这一点。如果您想以编程方式迭代您的活动线程，您必须在启动时在某处注册它们，并在完成时取消注册它们或在对它们采取行动之前对其进行过滤。我们做了一个版本，它需要大量的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T14:53:56.140

你可以附加一个托管调试器来查看/冻结线程，或者如果你想要更轻的东西，可以使用带有 SOS 扩展的 WinDbg。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-20T09:35:38.003

您可以使用 ProcessExplorer 按 id 和状态查看进程中正在运行的线程。

[http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)

使用“属性”窗口的“线程”选项卡。

还可以杀死线程并查看线程堆栈

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-20T09:59:39.973

远程调试呢？由于安全性和确保您拥有正确的调试符号，设置可能有点挑剔。

[远程调试设置](http://msdn.microsoft.com/en-us/library/y7f5zaaa.aspx "远程调试")

# c# - 为什么所有 Winforms 程序都需要 [STAThread] 属性？

> ID：102437
> 
> 赞同：9
> 
> 时间：2008-09-19T14:48:14.063
> 
> 标签：c#, winforms

为什么 Winforms 程序在 Main() 方法上有 [STAThread] 属性，删除它的后果是什么？

# asp.net-mvc - WF 和 ASPNET MVC

> ID：102445
> 
> 赞同：0
> 
> 时间：2008-09-19T14:49:21.223
> 
> 标签：asp.net-mvc, workflow-foundation

有没有办法在 ASPNET MVC 中以交互方式使用 MS WF？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-19T02:45:28.463

您是否看到在 StoreFront 示例中如何使用 WF 和 MVC？

[http://www.asp.net/learn/mvc-videos/video-428.aspx](http://www.asp.net/learn/mvc-videos/video-428.aspx)

# java - 使用不同的操作实现重用 Spring Webflow 定义

> ID：102453
> 
> 赞同：0
> 
> 时间：2008-09-19T14:50:08.583
> 
> 标签：java, spring, spring-webflow

我得到了相当大的 webflow 定义，我不想复制/粘贴以重复使用。XML中有对action bean的引用，这很自然。

我想两次使用相同的流定义：第二次使用不同配置的操作（向其注入不同的服务实现）。

有没有简单的方法可以做到这一点？

* * *

问题是我想在同一个应用程序中一次对不同的 bean 使用相同的流。复制/粘贴不好，但我现在看不到其他解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T12:20:48.947

You could try creating a new flow that extends the "pretty big one" and adding flowExecutionListeners to it.

The interface "FlowExecutionListener"defines methods for the following events in flow execution:

*   requestSubmitted
*   requestProceessed
*   sessionCreating
*   sessionStarting
*   sessionStarted
*   eventSignaled
*   transitionExecuting
*   stateEntering
*   viewRendered
*   viewRendering
*   stateEntered
*   paused
*   resuming
*   sessionEnding
*   sessionEnded
*   exceptionThrown

You can write a handler that injects the required resources to your flow (and use different handles with different flows) by storing it in the RequestContext, where you can access it in your flow definition.

Note that in that case you would still have to modify the "pretty big flow" to use those resources instead of referencing the beans directly.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-10-30T04:09:51.860

我与您处于同一个修复程序中...我有不同的子类，它们具有相应的操作 bean，但是很多流程是相同的。过去我们只是复制和粘贴……对此不满意！我有一些想法要尝试使用表达式语言。首先，我想出了一个动作 bean 工厂，它将返回正确的动作 bean 以用于给定的类，然后我可以调用该工厂来设置一个我可以使用的变量，而不是硬编码的 bean 名称。

这是流程的一部分：

```
<action-state id="checkForParams">
    <on-entry>
        <set name="flowScope.clientKey" value="requestParameters.clientKey"/>
        <set name="flowScope.viewReportBean" 
                 value="reportActionFactory.getViewBean(reportUnit)"/>
    </on-entry>
    <evaluate expression="viewReportBean"/> 
```

最后一行中的评估通常会直接引用一个 bean，但现在它引用了我刚刚所做的“设置”的结果。

好消息——正确的 bean 被调用。

坏消息——流范围内的任何东西都需要可序列化，所以我得到一个 NotSerializableException——啊！

我可以尝试在一个非常短暂的范围内设置一些东西，在这种情况下，它需要一直被调用......或者我可以找出某种代理，它将真正的 bean 保存为声明为“瞬态”的代理。

顺便说一句，我使用的是 Spring 2.5.6 和 webflow 2.0.7。以后的版本可能有更好的处理方法；特别是 EL 似乎受到了一些关注。我仍然坚持使用 OGNL，它是 Spring 1.x EL。

我敢肯定，一些 webflow 大师知道以不那么笨拙的方式做事的其他方式......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T19:19:45.470

我认为您不能将相同的 webflow 定义与以两种不同方式配置的操作一起使用。

如果您想使用不同的操作，您要么必须重新配置您的操作 bean，然后重新部署您的应用程序，要么使用不同配置的 bean 创建一个单独的 webflow 定义。

[这](http://www.ervacon.com/products/swf/intro/index.html)是一个很棒的 Spring WebFlow 资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-08T17:05:22.917

尝试重构子流中的公共可配置部分[，](http://docs.spring.io/spring-webflow/docs/2.0.x/reference/html/ch02s09.html)并从要重用它的不同主要流中调用子流。

将参数传递给子流以任何需要的方式对其进行配置，使用spring表达式语言传递不同的spring bean等。

# popup - 如何创建类似 SVG“工具提示”的框？

> ID：102457
> 
> 赞同：44
> 
> 时间：2008-09-19T14:50:13.967
> 
> 标签：popup, svg, tooltip

给定一个现有的有效 SVG 文档，创建“信息弹出窗口”的最佳方法是什么，这样当您悬停或单击某些元素（比如说）时，您会弹出一个带有任意数量（即不仅仅是单行工具提示）的框额外的信息？

这应该至少在 Firefox 中正确显示，并且如果图像被光栅化为位图格式，则它是不可见的。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-15T22:11:13.293

这个问题是在 2008 年提出的。在这四年间，SVG 得到了迅速的改进。现在我知道的所有平台都完全支持工具提示。使用`<title>`标签（不是属性），您将获得本机工具提示。

以下是文档： [https ://developer.mozilla.org/en-US/docs/SVG/Element/title](https://developer.mozilla.org/en-US/docs/SVG/Element/title)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2008-09-19T21:07:58.083

```
<svg>
  <text id="thingyouhoverover" x="50" y="35" font-size="14">Mouse over me!</text>
  <text id="thepopup" x="250" y="100" font-size="30" fill="black" visibility="hidden">Change me
    <set attributeName="visibility" from="hidden" to="visible" begin="thingyouhoverover.mouseover" end="thingyouhoverover.mouseout"/>
  </text>
</svg> 
```

进一步的解释可以在[这里](http://web.archive.org/web/20121023190528/http://www.ibm.com/developerworks/library/x-svgint/)找到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-01-28T18:52:39.280

由于该`<set>`元素不适用于 Firefox 3，我认为您必须使用 ECMAScript。

如果将以下脚本元素添加到 SVG 中：

```
 <script type="text/ecmascript"> <![CDATA[

    function init(evt) {
        if ( window.svgDocument == null ) {
        // Define SGV
        svgDocument = evt.target.ownerDocument;
        }
        tooltip = svgDocument.getElementById('tooltip');
    }

    function ShowTooltip(evt) {
        // Put tooltip in the right position, change the text and make it visible
        tooltip.setAttributeNS(null,"x",evt.clientX+10);
        tooltip.setAttributeNS(null,"y",evt.clientY+30);
        tooltip.firstChild.data = evt.target.getAttributeNS(null,"mouseovertext");
        tooltip.setAttributeNS(null,"visibility","visible");
    }

    function HideTooltip(evt) {
        tooltip.setAttributeNS(null,"visibility","hidden");
    }
    ]]></script> 
```

您需要添加`onload="init(evt)"`到 SVG 元素中以调用 init() 函数。

然后，在 SVG 的末尾添加工具提示文本：

```
<text id="tooltip" x="0" y="0" visibility="hidden">Tooltip</text> 
```

最后，在您希望使用鼠标悬停功能的每个元素上添加：

```
onmousemove="ShowTooltip(evt)"
onmouseout="HideTooltip(evt)"
mouseovertext="Whatever text you want to show" 
```

我在[http://www.petercollingridge.co.uk/interactive-svg-components/tooltip上写了一个更详细的解释并改进了功能](http://www.petercollingridge.co.uk/interactive-svg-components/tooltip)

我还没有包含多行工具提示，这需要多个`<tspan>`元素和手动换行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-21T08:35:16.617

这应该有效：

```
nodeEnter.append("svg:element")
   .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; })
   .append("svg:title")
   .text(function(d) {return d.Name+"\n"+d.Age+"\n"+d.Dept;}); // It shows the tool tip box with item [Name,Age,Dept] and upend to the svg dynamicaly 
```

# c++ - 为什么 std::stack 默认使用 std::deque ？

> ID：102459
> 
> 赞同：102
> 
> 时间：2008-09-19T14:50:23.840
> 
> 标签：c++, stl, containers

由于要在堆栈中使用容器所需的唯一操作是：

*   背部（）
*   推回（）
*   pop_back()

为什么它的默认容器是双端队列而不是向量？

deque 重新分配是否在 front() 之前提供元素缓冲区，以便 push_front() 是一种有效的操作？这些元素是不是被浪费了，因为它们永远不会在堆栈的上下文中使用？

如果以这种方式使用双端队列而不是向量没有开销，为什么priority_queue 的默认值也是向量而不是双端队列？（priority_queue 需要 front()、push_back() 和 pop_back() - 与堆栈基本相同）

* * *

**根据以下答案更新：**

看起来 deque 通常实现的方式是固定大小数组的可变大小数组。这使得增长比向量（需要重新分配和复制）更快，所以对于像堆栈这样的东西，它都是关于添加和删除元素的，deque 可能是一个更好的选择。

priority_queue 需要大量索引，因为每次删除和插入都需要运行 pop_heap() 或 push_heap()。这可能使向量成为更好的选择，因为无论如何添加元素仍然是摊销常数。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2008-09-19T14:58:03.760

随着容器的增长，向量的重新分配需要将所有元素复制到新的内存块中。增长双端队列会分配一个新块并将其链接到块列表 - 不需要副本。

当然，如果您愿意，您可以指定使用不同的支持容器。因此，如果您有一个知道不会增长太多的堆栈，请告诉它使用向量而不是双端队列（如果这是您的偏好）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-09-19T15:28:25.403

有关vector 和 deque 的相对优点，请参阅 Herb Sutter[第 54 周的 Guru 。](http://www.gotw.ca/gotw/054.htm)

我想priority_queue和queue之间的不一致只是不同的人实现了它们。

# windows-server-2003 - 对虚拟机的 Web 访问

> ID：102464
> 
> 赞同：2
> 
> 时间：2008-09-19T14:50:51.453
> 
> 标签：windows-server-2003, vmware, virtualization, vmware-server

他们是一种从主机访问安装在虚拟机（如 vmware）上的 web 服务器（如 windows server 2003）的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T14:57:24.027

如果 VMware 设置为使用桥接网络，那么每个客户操作系统实际上都有自己的 IP 地址，就像 Brien 所说，您只需将浏览器指向该地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T15:01:24.860

如果您将虚拟机配置为使用桥接网络而不是 NAT，它将在主机“旁边”拥有自己的 IP 地址，而不是在其“后面”拥有本地 IP 地址。然后，您可以使用该 IP 号连接到虚拟机。

（免责声明：我使用 VMware 工作站已经好几年了，但不是他们的服务器产品。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T14:54:36.623

是的，您应该能够指向虚拟机的 IP 地址。

您的 VM 网络是如何配置的？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T14:56:08.100

我到处都在这样做，只要确保虚拟机配置了一个 ip。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-24T11:48:29.697

我相信vmware（工作站？）还内置了一个可以连接的虚拟网络客户端（VNC）——通过转到vm的配置属性来启用它，在最后一个选项卡中有一个复选框。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-28T11:49:11.817

IP地址应该这样做。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-17T11:55:52.610

我遇到了同样的问题。您必须在 VM 中将网络连接设置为“桥接模式”。然后你必须找出你的网络服务器的IP。

有时 Web 服务器会重定向到特定的 URL。在这种情况下，您可以在 C:/Windows/System32/drivers/etc/hosts 中编辑您的主机文件，并使用重定向的 URL 添加您的 IP，如下所示：

```
192.168.0.37 some.url-you.need 
```

然后您的主机可以访问网络服务器。甚至您的以太网的参与者也可以访问网络服务器。

# php - 是否可以将元数据保存在图像中？

> ID：102466
> 
> 赞同：5
> 
> 时间：2008-09-19T14:51:29.313
> 
> 标签：php, image, metadata, exif

我们在我们的服务器上创建拇指图像，我正在寻找一种在该图像中保存元数据（文本）的方法。那可能吗？

此时我们使用`PHP`并创建`JPG`图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-12-31T15:22:27.353

[您的问题与在 php 中编写 exif 数据](https://stackoverflow.com/questions/5384962/writing-exif-data-in-php)相同。

我的回答是：

*   [PEL（PHP Exif 库）](https://github.com/pel/pel)。一个使用 PHP 读取和写入 JPEG 和 TIFF 图像中的 Exif 标头的库。
*   [PHP JPEG 元数据工具包](http://www.ozhiker.com/electronics/pjmt/)。允许读取、写入和显示以下 JPEG 元数据格式：EXIF 2.2、XMP / RDF、IPTC-NAA IIM 4.1 等
*   [perl 的 ExifTool](http://www.sno.phy.queensu.ca/~phil/exiftool/)。ExifTool 非常棒。它基本上得到了一切 - EXIF、IPTC 和 XMP 支持（读/写）和对制造商扩展的支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-26T20:37:14.617

我希望这可以帮助你！

[我修改了我在这里](http://php.net/manual/en/function.iptcembed.php)找到的一个类（感谢[debers](https://stackoverflow.com/a/5385143/702353)）。

所有对 IPTC 标签的引用都可以从此[PDF中阅读](http://www.iptc.org/std/photometadata/specification/IPTC-PhotoMetadata-201007_1.pdf)

代码（PHP >= 5.4）：

```
<?
define("IPTC_OBJECT_NAME", "005");
define("IPTC_EDIT_STATUS", "007");
define("IPTC_PRIORITY", "010");
define("IPTC_CATEGORY", "015");
define("IPTC_SUPPLEMENTAL_CATEGORY", "020");
define("IPTC_FIXTURE_IDENTIFIER", "022");
define("IPTC_KEYWORDS", "025");
define("IPTC_RELEASE_DATE", "030");
define("IPTC_RELEASE_TIME", "035");
define("IPTC_SPECIAL_INSTRUCTIONS", "040");
define("IPTC_REFERENCE_SERVICE", "045");
define("IPTC_REFERENCE_DATE", "047");
define("IPTC_REFERENCE_NUMBER", "050");
define("IPTC_CREATED_DATE", "055");
define("IPTC_CREATED_TIME", "060");
define("IPTC_ORIGINATING_PROGRAM", "065");
define("IPTC_PROGRAM_VERSION", "070");
define("IPTC_OBJECT_CYCLE", "075");
define("IPTC_BYLINE", "080");
define("IPTC_BYLINE_TITLE", "085");
define("IPTC_CITY", "090");
define("IPTC_PROVINCE_STATE", "095");
define("IPTC_COUNTRY_CODE", "100");
define("IPTC_COUNTRY", "101");
define("IPTC_ORIGINAL_TRANSMISSION_REFERENCE", "103");
define("IPTC_HEADLINE", "105");
define("IPTC_CREDIT", "110");
define("IPTC_SOURCE", "115");
define("IPTC_COPYRIGHT_STRING", "116");
define("IPTC_CAPTION", "120");
define("IPTC_LOCAL_CAPTION", "121");

class IPTC
{
    var $meta = [];
    var $file = null;

    function __construct($filename)
    {
        $info = null;

        $size = getimagesize($filename, $info);

        if(isset($info["APP13"])) $this->meta = iptcparse($info["APP13"]);

        $this->file = $filename;
    }

    function getValue($tag)
    {
        return isset($this->meta["2#$tag"]) ? $this->meta["2#$tag"][0] : "";
    }

    function setValue($tag, $data)
    {
        $this->meta["2#$tag"] = [$data];

        $this->write();
    }

    private function write()
    {
        $mode = 0;

        $content = iptcembed($this->binary(), $this->file, $mode);   

        $filename = $this->file;

        if(file_exists($this->file)) unlink($this->file);

        $fp = fopen($this->file, "w");
        fwrite($fp, $content);
        fclose($fp);
    }         

    private function binary()
    {
        $data = "";

        foreach(array_keys($this->meta) as $key)
        {
            $tag = str_replace("2#", "", $key);
            $data .= $this->iptc_maketag(2, $tag, $this->meta[$key][0]);
        }       

        return $data;
    }

    function iptc_maketag($rec, $data, $value)
    {
        $length = strlen($value);
        $retval = chr(0x1C) . chr($rec) . chr($data);

        if($length < 0x8000)
        {
            $retval .= chr($length >> 8) .  chr($length & 0xFF);
        }
        else
        {
            $retval .= chr(0x80) . 
                       chr(0x04) . 
                       chr(($length >> 24) & 0xFF) . 
                       chr(($length >> 16) & 0xFF) . 
                       chr(($length >> 8) & 0xFF) . 
                       chr($length & 0xFF);
        }

        return $retval . $value;            
    }   

    function dump()
    {
        echo "<pre>";
        print_r($this->meta);
        echo "</pre>";
    }

    #requires GD library installed
    function removeAllTags()
    {
        $this->meta = [];
        $img = imagecreatefromstring(implode(file($this->file)));
        if(file_exists($this->file)) unlink($this->file);
        imagejpeg($img, $this->file, 100);
    }
}

$file = "photo.jpg";
$objIPTC = new IPTC($file);

//set title
$objIPTC->setValue(IPTC_HEADLINE, "A title for this picture");

//set description
$objIPTC->setValue(IPTC_CAPTION, "Some words describing what can be seen in this picture.");

echo $objIPTC->getValue(IPTC_HEADLINE);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T14:53:51.350

[EXIF](http://www.exif.org/)或重用旧的“数据隐藏”概念，[速记](http://en.wikipedia.org/wiki/Steganography)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T14:59:58.437

是的，这是可能的。

您可以使用全能的 Exiftool perl 实用程序，它可以处理几乎所有已知的标签集，包括标准标签（EXIF、IPTC、Adobe 的 XMP 等）和专有标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T14:56:11.750

[在应用程序文件中嵌入 XMP 元数据](http://xml.coverpages.org/XMP-Embedding.pdf)(PDF)

# algorithm - 算法问题：字母组合

> ID：102468
> 
> 赞同：6
> 
> 时间：2008-09-19T14:51:37.317
> 
> 标签：algorithm, unique, combinations

我正在尝试编写一段代码来执行以下操作：

取数字 0 到 9 并为该数字分配一个或多个字母。例如：

```
0 = N,
1 = L,
2 = T,
3 = D,
4 = R,
5 = V or F,
6 = B or P,
7 = Z,
8 = H or CH or J,
9 = G 
```

当我有像 0123 这样的代码时，对它进行编码就很容易了。它显然会构成代码 NLTD。当引入像 5,6 或 8 这样的数字时，情况会有所不同。像 051 这样的数字会导致不止一种可能性：

NVL 和 NFL

很明显，对于较长的数字，包括 5,6 或 8 之类的几个数字，这会变得“更糟”。

由于数学很差，我还没有想出一个像样的解决方案，让我可以给程序输入一堆数字并让它吐出所有可能的字母组合。所以我很想得到一些帮助，因为我似乎无法弄清楚。挖掘了一些关于排列和组合的信息，但没有运气。

感谢您的任何建议/线索。我需要编写代码的语言是 PHP，但任何一般性提示都将受到高度赞赏。

### 更新：

更多背景信息：（非常感谢您的快速回复！）

我的问题背后的想法是构建一个脚本，帮助人们轻松地将他们想要记住的数字转换为更容易记住的单词。这有时被称为“伪命理”。

我希望脚本为我提供所有可能的组合，然后将这些组合保存在剥离单词的数据库中。这些被删除的单词只是来自字典，并且我在问题中提到的所有字母都被删除了。这样，要编码的数字通常可以很容易地与一个或多个数据库记录相关联。当这种情况发生时，你最终会得到一个单词列表，你可以用它来记住你想记住的数字。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-19T14:55:24.967

它可以很容易地递归地完成。

这个想法是，要处理大小为 n 的整个代码，您必须首先处理 n - 1 位数字。一旦您获得了 n-1 位数字的所有答案，就可以通过在最后一个数字后面附加正确的字符来推断整个答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-19T17:00:56.273

实际上，有一个比枚举一个数字的所有可能翻译并查找它们更好的解决方案：只需对字典中的每个单词进行反向计算，然后将数字字符串存储在另一个字段中。因此，如果您的映射是：

```
0 = N,
1 = L,
2 = T,
3 = D,
4 = R,
5 = V or F,
6 = B or P,
7 = Z,
8 = H or CH or J,
9 = G 
```

你的反向映射是：

```
N = 0,
L = 1,
T = 2,
D = 3,
R = 4,
V = 5,
F = 5,
B = 6,
P = 6,
Z = 7,
H = 8,
J = 8,
G = 9 
```

请注意，“ch”没有映射，因为“c”将被删除，“h”无论如何都会转换为 8。

然后，您所要做的就是遍历字典单词中的每个字母，如果匹配则输出适当的数字，如果不匹配则不执行任何操作。

将所有生成的数字字符串作为另一个字段存储在数据库中。当您想查找某些内容时，只需对输入的数字执行一个简单的查询，而不必对潜在单词进行数十（或数百或数千）次查找。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-19T15:14:28.697

您要保存数字 -> 字母分配的一般结构是一个或多个数组，类似于：

```
// 0 = N, 1 = L, 2 = T, 3 = D, 4 = R, 5 = V or F, 6 = B or P, 7 = Z, 
// 8 = H or CH or J, 9 = G
$numberMap = new Array (
    0 => new Array("N"),
    1 => new Array("L"),
    2 => new Array("T"),
    3 => new Array("D"),
    4 => new Array("R"),
    5 => new Array("V", "F"),
    6 => new Array("B", "P"),
    7 => new Array("Z"),
    8 => new Array("H", "CH", "J"),
    9 => new Array("G"),
); 
```

然后，一些递归逻辑给了我们一个类似的函数：

```
function GetEncoding($number) {
    $ret = new Array();
    for ($i = 0; $i < strlen($number); $i++) {
        // We're just translating here, nothing special.
        // $var + 0 is a cheap way of forcing a variable to be numeric
        $ret[] = $numberMap[$number[$i]+0];
    }
}

function PrintEncoding($enc, $string = "") {
    // If we're at the end of the line, then print!
    if (count($enc) === 0) {
        print $string."\n";
        return;
    }

    // Otherwise, soldier on through the possible values.
    // Grab the next 'letter' and cycle through the possibilities for it.
    foreach ($enc[0] as $letter) {
        // And call this function again with it!
        PrintEncoding(array_slice($enc, 1), $string.$letter);
    }
} 
```

为递归喝彩三声！这将通过以下方式使用：

```
PrintEncoding(GetEncoding("052384")); 
```

如果你真的想要它作为一个数组，使用输出缓冲并使用“\n”作为你的拆分字符串来爆炸。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-19T15:35:28.273

这类问题通常用递归来解决。在红宝石中，一个（快速而肮脏的）解决方案是

```
@values = Hash.new([])

@values["0"] = ["N"] 
@values["1"] = ["L"] 
@values["2"] = ["T"] 
@values["3"] = ["D"] 
@values["4"] = ["R"] 
@values["5"] = ["V","F"] 
@values["6"] = ["B","P"] 
@values["7"] = ["Z"] 
@values["8"] = ["H","CH","J"] 
@values["9"] = ["G"]

def find_valid_combinations(buffer,number)
 first_char = number.shift
 @values[first_char].each do |key|
  if(number.length == 0) then
     puts buffer + key
  else
     find_valid_combinations(buffer + key,number.dup)
    end
 end
end

find_valid_combinations("",ARGV[0].split("")) 
```

如果你从命令行运行它，你会得到：

```
$ ruby r.rb 051
NVL
NFL 
```

这与[蛮力搜索](http://en.wikipedia.org/wiki/Brute_force_search)和[回溯有关](http://en.wikipedia.org/wiki/Backtracking)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-19T15:30:09.690

这是 Python 中的递归解决方案。

```
#!/usr/bin/env/python

import sys

ENCODING = {'0':['N'],
            '1':['L'],
            '2':['T'],
            '3':['D'],
            '4':['R'],
            '5':['V', 'F'],
            '6':['B', 'P'],
            '7':['Z'],
            '8':['H', 'CH', 'J'],
            '9':['G']
            }

def decode(str):
   if len(str) == 0:
       return ''
   elif len(str) == 1:
       return ENCODING[str]
   else:
       result = []
       for prefix in ENCODING[str[0]]:
           result.extend([prefix + suffix for suffix in decode(str[1:])])
       return result

if __name__ == '__main__':
   print decode(sys.argv[1]) 
```

示例输出：

```
$ ./demo 1
['L']
$ ./demo 051
['NVL', 'NFL']
$ ./demo 0518
['NVLH', 'NVLCH', 'NVLJ', 'NFLH', 'NFLCH', 'NFLJ'] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T15:04:58.813

你能做到以下几点： 创建一个结果数组。在数组中创建一个值为“”的项目

循环遍历这些数字，比如 051 分别分析每个数字。

每次找到数字之间的 1 到 1 匹配时，将正确的值添加到结果数组中的所有项目。所以“”变成了N。

每次找到一对多匹配时，使用一个选项将新行添加到结果数组，并使用另一个选项更新现有结果。所以 N 变成 NV 并创建了一个新项目 NF

然后最后一个数字是 1 对 1 匹配，因此结果数组中的项目变为 NVL 和 NFL

要通过结果数组循环生成结果，打印它们，或者其他什么。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-19T15:13:00.370

让是给定数字字符串直到数字的所有可能字母组合的列表。`p[n]``s``n^(th)`

然后，以下算法将生成：`p[n+1]`

```
digit = s[n+1];
foreach(letter l that digit maps to)
{
    foreach(entry e in p(n))
    {
        newEntry = append l to e;
        add newEntry to p(n+1);
    }
} 
```

第一次迭代有点特殊，因为 p [-1]是未定义的。您可以简单地将 p [0]初始化为第一个字符的所有可能字符的列表。

因此，您的 051 示例：

迭代 0：

```
p(0) = {N} 
```

迭代 1：

```
digit = 5
foreach({V, F})
{
    foreach(p(0) = {N})
    {
        newEntry = N + V  or  N + F
        p(1) = {NV, NF}
    }
} 
```

迭代 2：

```
digit = 1
foreach({L})
{
    foreach(p(1) = {NV, NF})
    {
        newEntry = NV + L  or  NF + L
        p(2) = {NVL, NFL}
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-19T15:17:11.233

你想要的形式可能是这样的：

```
function combinations( $str ){
$l = len( $str );
$results = array( );
if ($l == 0) { return $results; }
if ($l == 1)
{  
   foreach( $codes[ $str[0] ] as $code )
   {
    $results[] = $code;
   }
   return $results;
}
$cur = $str[0];
$combs = combinations( substr( $str, 1, $l ) );
foreach ($codes[ $cur ] as $code)
{
    foreach ($combs as $comb)
    {
        $results[] = $code.$comb;
    }
}
return $results;} 
```

这很难看，pidgin-php 所以请先验证一下。基本思想是从 [1..n] 生成字符串的每个组合，然后在所有这些组合的前面添加 str[0] 的每个可能代码。请记住，在最坏的情况下，这将使您的字符串长度呈指数级增长，因为您的编码方案中实际上存在很多歧义。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-19T15:22:12.313

诀窍不仅在于生成与给定数字匹配的所有可能的字母组合，还在于选择最容易记住的字母序列。一个建议是在每个序列上运行[soundex算法，并尝试与](http://en.wikipedia.org/wiki/Soundex)[Wordnet](http://wordnet.princeton.edu/)等英语词典进行匹配，以找到最“真实单词”的序列。

# visual-studio-2008 - Linq to SQL 关联组合框顺序

> ID：102470
> 
> 赞同：0
> 
> 时间：2008-09-19T14:51:40.623
> 
> 标签：visual-studio-2008, linq-to-sql, ide

这是一个奇怪的问题，比技术砖墙更令人烦恼。

当我使用 Linq-to-SQL 设计器添加表等时，我想使用对话框创建关联。我右键单击其中一个目标表并像往常一样选择*Add* > *Association*，然后我会看到**Association Editor**。

*父类：*和*子类：*组合框填充了设计器中当前存在的表。

但它们不是按字母顺序排列的，它们是按添加到设计器中的顺序排列的。

我可以更改这些组合框的顺序吗？如果可以的话，我在哪里做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T15:16:35.073

我四处寻找并找到了答案。

**dbml**文件是一个 XML 文件，其中包含有关 Linq-to-SQL 所需的 SQL 表、连接等的所有基本信息。通过重新排序表格元素，您可以影响关联编辑器中使用的组合框的顺序。

# svn - 颠覆分支重新整合

> ID：102472
> 
> 赞同：69
> 
> 时间：2008-09-19T14:51:49.033
> 
> 标签：svn, merge, branch

当一个分支重新整合到主干时，那个分支实际上是死的吗？

您可以在重新集成后对分支进行修改并在以后将它们合并回主干吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2008-09-23T07:53:28.240

你可以从技术上做到这一点，你的分支没有死也没有被禁用，但不建议在重新集成后从分支合并到主干。

您可以在此处找到有关其原因的完整讨论：[Subversion merge reintegrate](http://blogs.collab.net/subversion/2008/07/subversion-merg)

基本上，它说，可以将您的更改再次合并到主干，但是由于重新集成迫使您在重新集成操作之前从主干合并到分支，您将面临反射/循环合并，这在 Subversion 1.5 中是非常有问题的.
根据文章，建议在重新集成后立即删除重新集成的分支，并创建一个具有相同（或不同）名称的新分支。

这是一个已知的 Subversion 行为，将在未来版本中解决（可能在 1.6 中）

* * *

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2010-05-26T11:21:48.760

实际上，您需要`--record-only`从主干合并到`--reintegrate`提交创建的修订分支：

```
$ cd trunk
$ svn merge --reintegrate ^my-branch 
$ svn commit

Committed revision 555\. 
# This revision is ^^^^ important 
```

现在你记录下来

```
$ cd my-branch
$ svn merge --record-only -c 555 ^trunk 
$ svn commit 
```

你很高兴现在保留分支

更多信息在*[第 4 章。分支和合并，高级合并](http://svnbook.red-bean.com/nightly/en/svn.branchmerge.advanced.html#svn.branchmerge.advanced.reintegratetwice)*。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2010-02-24T22:59:36.123

从分支重新集成到主干后，您应该执行以下两项操作之一：

*   [删除你的分支](http://svnbook.red-bean.com/nightly/en/svn.branchmerge.basicmerging.html#svn.branchemerge.basicmerging.reintegrate)。这是最简单的，但它使查看分支的历史变得更加困难。

*   [告诉你的分支不要合并 reintegrate commit](http://svnbook.red-bean.com/nightly/en/svn.branchmerge.advanced.html#svn.branchmerge.advanced.reintegratetwice)。如果您重新集成到主干，并将其作为修订版 X 提交，您可以在您的分支上运行此命令：`svn merge --record-only -c X url-to-trunk`. 但是，如果您在提交过程中进行了任何更改，而不是合并本身，则不应执行此操作。任何其他更改将永远不会回到您的分支。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-22T09:08:47.583

如果有人多次对分支进行更改（1.5 之前），有关合并更改的一些建议：**记住您在哪个修订版中进行了合并**！要么在某处写下修订号，**要么**（更容易）**制作一个标签**。（你当然可以稍后找到它，但那是一个 PITA。）

例子：

你有一个这样的存储库布局：

```
/your_project
  /trunk
  /branches
  /tags 
```

假设它是一个 Web 应用程序，并且您计划发布。您将创建一个标签，并从该标签（或从主干）创建一个用于修复错误的分支：

```
/your_project
  /trunk
  /branches
    /1.0.0-bugfixes
  /tags
    /1.0.0 
```

这样做，您可以在主干中集成新功能。所有错误修复都只会在错误修复分支内发生，并且在每次发布之前，您都会为当前版本制作一个标签（现在来自错误修复分支）。

假设您进行了大量的错误修复并将其发布到生产服务器，并且您在当前主干中迫切需要其中一个功能：

```
/your_project
  /trunk
  /branches
    /1.0.0-bugfixes
  /tags
    /1.0.0
    /1.0.1
    /1.0.2 
```

您现在可以将 1.0.0 和 1.0.2 之间的更改集成到您的主干中（假设您在您的工作副本中）：

```
svn merge http://rep/your_project/tag/1.0.0 http://rep/your_project/tag/1.0.2 . 
```

这是你应该记住的。您已经在主干上合并了 1.0.0 和 1.0.2 之间的更改。假设当前生产版本中有更多变化：

```
/your_project
  /trunk
  /branches
    /1.0.0-bugfixes
  /tags
    /1.0.0
    /1.0.1
    /1.0.2
    /1.0.3
    /1.0.4 
```

您现在已准备好从主干发布新版本，但您的错误修正的最后更改仍然缺失：

```
svn merge http://rep/your_project/tag/1.0.2 http://rep/your_project/tag/1.0.4 . 
```

现在您已将**所有**更改合并到您的主干上，您可以发布您的版本（不要忘记先测试它）。

```
/your_project
  /trunk
  /branches
    /1.0.0-bugfixes
    /1.1.0-bugfixes
  /tags
    /1.0.0
    /1.0.1
    /1.0.2
    /1.0.3
    /1.0.4
    /1.1.0 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-19T14:53:40.167

不，树枝还活着，但是，那一刻，它和树干一模一样。如果你继续在分支上开发，你可以在以后自由地与主干重新合并。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-19T20:22:41.997

正如每个人在这里已经说过的那样：分支并没有死，对分支的提交可以继续进行。

有时虽然你想在合并后杀死分支。唯一可靠的解决方案是删除分支。不利的一面是，如果您想查看它，则很难再次找到该分支，例如，出于历史原因。因此，许多人将“重要”分支留在周围，并同意不更改它们。我希望有一种方法可以将分支标记为死/只读，从而确保在另行通知之前没有人可以提交它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-19T14:53:43.007

您可以根据需要多次从分支合并到主干，或从主干合并到分支。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-15T09:44:43.217

首先，如果您仍然使用 Subversion 1.7 或更早版本，您应该升级您的 Subversion 客户端和服务器。没有理由使用非常旧的 Subversion 版本。截至 2016 年，当前版本是 Subversion 1.9。现在也支持 SVN 1.8，并且仍然会收到错误修复。

您询问的问题已在 Subversion 1.8 中解决。从 SVN 1.8 开始，`--reintegrate`选项已**弃用**。现在**自动**执行重新整合合并。请参阅[与改进相关的 Subversion 1.8 发行说明条目](http://subversion.apache.org/docs/release-notes/1.8.html#auto-reintegrate)。

阅读[SVNBook 1.8 | 重新整合一个分支](http://svnbook.red-bean.com/en/1.8/svn.branchmerge.basicmerging.html#svn.branchmerge.basicmerging.reintegrate)：

> 如果您选择在将分支重新集成到主干后不删除它，您可以继续从主干执行同步合并，然后再次重新集成分支。如果这样做，则只有在第一次重新集成后对分支所做的更改才会合并到主干。
> 
> ...
> 
> 只有 Subversion 1.8 支持功能分支的这种重用。早期版本需要进行一些特殊处理，然后才能多次重新集成功能分支。有关详细信息，请参阅本章的早期版本：http: [//svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html#svn.branchemerge.basicmerging.reintegrate](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html#svn.branchemerge.basicmerging.reintegrate)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-09-19T14:56:20.330

当您进行合并时，您指定目标。如果您愿意，可以将 TreeA 和 TreeB 的差异合并到 TreeC。正如克里斯暗示的那样，您的问题并没有那么大的意义。如果将分支合并到主干中，则分支保持不变。如果以后不需要该分支，您可以将其删除。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2008-09-19T14:57:08.987

您可以继续在分支上进行开发，您需要的功能是 Subversion 1.5 中的[合并跟踪](http://subversion.tigris.org/merge-tracking/)，这意味着来自分支的额外合并仅包含新更改。

# svn - 有没有办法在 SVN 中生成变更日志

> ID：102474
> 
> 赞同：3
> 
> 时间：2008-09-19T14:52:16.037
> 
> 标签：svn, cvs, changelog

在提交到 SVN 时，我可以添加一个顶级提交消息来详细说明正在提交的内容，但理想情况下，我希望有一种方法可以评论各个文件以及它们中发生的变化。我在以前的工作中看到过类似的东西，但这是使用 CVS（我不记得这是否是通过自制脚本生成骨架文件来实现的）

我已经查看了变更列表，但我不认为（尽管我愿意被证明是错误的）这给出了如下所述的粒度。

理想情况下，我正在寻找以下内容：

Foo.vb

> *   新增功能栏

酒吧.vb

> *   删除函数 foo
> *   在 xyz 中添加功能以执行 abc +/- 修改功能以记录错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T14:58:58.233

每当您完成一项特定任务时，您就可以提交。无论如何，这应该会带来更好的评论。对三个必要文件的“实施的电子邮件验证”的评论比“添加的功能 verify_email”告诉我更多。我可以在差异中看到后者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T14:58:34.180

我会在单个提交消息中执行此操作。[TortoiseSVN](http://tortoisesvn.tigris.org/)具有文件名自动补全功能，因此对此有很大帮助。

您可以做的另一件事是在提交之前 svn st 并将文件名复制/粘贴到您的提交消息中。

哦，一定要强烈质疑这个的价值。我知道一些 OSS 项目（linux？）需要这种保真度，但对于许多项目来说，这只是噪音。Diff 可以告诉你的远不止这些，而且更准确。

您可能要考虑的另一件事是使用[Git](http://git.or.cz/)。Git 允许您以较小的步骤在本地提交。然后，您将所有提交单独推送到主服务器，或者将所有提交消息压缩到单个提交中。这是一种简化的解释，但可能值得一试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-19T15:05:23.960

SVN 和 CVS 之间的本质区别之一是更改是原子提交的。在 CVS 中，每个文件都有自己的版本，但在 SVN 中，版本是针对整个项目的，包括一起签入的所有文件。

以下是解决方案的四个想法：

1.  使用自己的日志消息分别签入每个程序。这可能意味着，如果您签入五个文件，您将“用完”五个版本，其中四个可能会导致构建损坏。
2.  在单独的路径（即您自己的私有分支）上进行开发，如上所述，然后在战略时刻将您的分支合并到主干。
3.  将所有内容一起签入，并将各个记录作为注释保留在程序标题中。这可能意味着（一点）额外的工作，但无论如何您都必须编写单独的登录消息。
4.  对所有文件进行一次签入，但有一个很好的完整日志消息，详细说明每个文件的每个部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-20T07:48:33.440

我写了一个项目来做这种叫做[MOAP的事情](https://thomas.apestaart.org/moap/trac)

它的功能之一是从本地 diff 生成 ChangeLog 条目（目前支持 bazaar、cvs、svn、git 和 darcs）。您可以通过运行“moap changelog prepare”或“moap cl prep”来执行此操作，如果您启用该选项，该条目也可以包含更改的功能。

然后你去改变那个条目，描述你的改变。作为下一次提交的一部分，您可以删除不想提交的文件。

然后，您可以运行“moap changelog commit”来提交 ChangeLog 条目中描述的更改。它只会提交那里列出的文件，并将所有其他更改保留在本地。

希望有帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T15:02:22.703

如果对在每个提交的文件中写入注释的方式有一些规则，则可以获得这种结果。之后可以通过 svn 触发器提取这些注释。

# oracle - 解释计划成本与执行时间

> ID：102477
> 
> 赞同：4
> 
> 时间：2008-09-19T14:52:35.847
> 
> 标签：oracle, optimization

之前，我发现执行计划中的“成本”是相对执行时间的一个很好的指标。为什么这个案例不同？认为执行计划具有相关性，我是个傻瓜吗？我可以具体尝试什么来提高 v_test 性能？

谢谢你。

使用 Oracle 10g 我在下面定义了一个简单的查询视图

```
 create or replace view v_test as
  select distinct u.bo_id as bo_id, upper(trim(d.dept_id)) as dept_id
  from
      cust_bo_users u
  join cust_bo_roles r on u.role_name=r.role_name
  join cust_dept_roll_up_tbl d on 
                            (r.region is null or trim(r.region)=trim(d.chrgback_reg)) and 
                            (r.prod_id is null or trim(r.prod_id)=trim(d.prod_id)) and
                            (r.div_id is null or trim(r.div_id)=trim(d.div_id )) and
                            (r.clus_id is null or trim(r.clus_id )=trim( d.clus_id)) and
                            (r.prod_ln_id is null or trim(r.prod_ln_id)=trim(d.prod_ln_id)) and
                            (r.dept_id is null or trim(r.dept_id)=trim(d.dept_id)) 
```

定义为替换以下视图

```
 create or replace view v_bo_secured_detail
  select distinct Q.BO_ID, Q.DEPT_ID
  from (select U.BO_ID BO_ID, UPPER(trim(D.DEPT_ID)) DEPT_ID
        from CUST_BO_USERS U, CUST_BO_ROLES R, CUST_DEPT_ROLL_UP_TBL D
        where U.ROLE_NAME = R.ROLE_NAME and
                R.ROLE_LEVEL = 'REGION' and
                trim(R.REGION) = UPPER(trim(D.CHRGBACK_REG))
        union all
        select U.BO_ID BO_ID, UPPER(trim(D.DEPT_ID)) DEPT_ID
        from CUST_BO_USERS U, CUST_BO_ROLES R, CUST_DEPT_ROLL_UP_TBL D
        where U.ROLE_NAME = R.ROLE_NAME and
                R.ROLE_LEVEL = 'RG_PROD' and
                trim(R.REGION) = UPPER(trim(D.CHRGBACK_REG)) and
                trim(R.PROD_ID) = UPPER(trim(D.PROD_ID))
        union all
        select U.BO_ID BO_ID, UPPER(trim(D.DEPT_ID)) DEPT_ID
        from CUST_BO_USERS U, CUST_BO_ROLES R, CUST_DEPT_ROLL_UP_TBL D
        where U.ROLE_NAME = R.ROLE_NAME and
                R.ROLE_LEVEL = 'PROD' and
                trim(R.PROD_ID) = UPPER(trim(D.PROD_ID))
        union all
        select U.BO_ID BO_ID, UPPER(trim(D.DEPT_ID)) DEPT_ID
        from CUST_BO_USERS U, CUST_BO_ROLES R, CUST_DEPT_ROLL_UP_TBL D
        where U.ROLE_NAME = R.ROLE_NAME and
                R.ROLE_LEVEL = 'DIV' and
                trim(R.DIV_ID) = UPPER(trim(D.DIV_ID))
        union all
        select U.BO_ID BO_ID, UPPER(trim(D.DEPT_ID)) DEPT_ID
        from CUST_BO_USERS U, CUST_BO_ROLES R, CUST_DEPT_ROLL_UP_TBL D
        where U.ROLE_NAME = R.ROLE_NAME and
                R.ROLE_LEVEL = 'RG_DIV' and
                trim(R.REGION) = UPPER(trim(D.CHRGBACK_REG)) and
                trim(R.DIV_ID) = UPPER(trim(D.DIV_ID))
        union all
        select U.BO_ID BO_ID, UPPER(trim(D.DEPT_ID)) DEPT_ID
        from CUST_BO_USERS U, CUST_BO_ROLES R, CUST_DEPT_ROLL_UP_TBL D
        where U.ROLE_NAME = R.ROLE_NAME and
                R.ROLE_LEVEL = 'CLUS' and
                trim(R.CLUS_ID) = UPPER(trim(D.CLUS_ID))
        union all
        select U.BO_ID BO_ID, UPPER(trim(D.DEPT_ID)) DEPT_ID
        from CUST_BO_USERS U, CUST_BO_ROLES R, CUST_DEPT_ROLL_UP_TBL D
        where U.ROLE_NAME = R.ROLE_NAME and
                R.ROLE_LEVEL = 'RG_CLUS' and
                trim(R.REGION) = UPPER(trim(D.CHRGBACK_REG)) and
                trim(R.CLUS_ID) = UPPER(trim(D.CLUS_ID))
        union all
        select U.BO_ID BO_ID, UPPER(trim(D.DEPT_ID)) DEPT_ID
        from CUST_BO_USERS U, CUST_BO_ROLES R, CUST_DEPT_ROLL_UP_TBL D
        where U.ROLE_NAME = R.ROLE_NAME and
                R.ROLE_LEVEL = 'PROD_LN' and
                trim(R.PROD_LN_ID) = UPPER(trim(D.PROD_LN_ID))
        union all
        select U.BO_ID BO_ID, UPPER(trim(R.DEPT_ID)) DEPT_ID
        from CUST_BO_USERS U, CUST_BO_ROLES R
        where U.ROLE_NAME = R.ROLE_NAME and
                R.ROLE_LEVEL = 'DEPT') Q 
```

目的是消除对 ROLE_LEVEL 列的依赖。

v_test 的执行计划明显低于 v_bo_secured_detail 简单

```
select * from <view> where bo_id='value' 
```

查询。并且在实际查询中使用时显着降低

```
 select CT_REPORT.RPT_KEY,
         CT_REPORT_ENTRY.RPE_KEY,
         CT_REPORT_ENTRY.CUSTOM16,
         Exp_Sub_Type.value,
         min(CT_REPORT_PAYMENT_CONF.PAY_DATE),
         CT_REPORT.PAID_DATE
  from CT_REPORT,
      <VIEW> SD,
      CT_REPORT_ENTRY,
      CT_LIST_ITEM_LANG Exp_Sub_Type,
      CT_REPORT_PAYMENT_CONF,
      CT_STATUS_LANG Payment_Status
  where (CT_REPORT_ENTRY.RPT_KEY = CT_REPORT.RPT_KEY) and
        (Payment_Status.STAT_KEY = CT_REPORT.PAY_KEY) and
        (Exp_Sub_Type.LI_KEY = CT_REPORT_ENTRY.CUSTOM9 and Exp_Sub_Type.LANG_CODE = 'en') and
        (CT_REPORT.RPT_KEY = CT_REPORT_PAYMENT_CONF.RPT_KEY) and
        (SD.BO_ID = 'JZHU9') and
        (SD.DEPT_ID = UPPER(CT_REPORT_ENTRY.CUSTOM5)) and
        (Payment_Status.name = 'Payment Confirmed' and (Payment_Status.LANG_CODE = 'en') and
        CT_REPORT.PAID_DATE > to_date('01/01/2008', 'mm/dd/yyyy') and Exp_Sub_Type.value != 'Korea')
  group by CT_REPORT.RPT_KEY,
            CT_REPORT_ENTRY.RPE_KEY,
            CT_REPORT_ENTRY.CUSTOM16,
            Exp_Sub_Type.value,
            CT_REPORT.PAID_DATE 
```

执行时间完全不同。v_test 视图需要 15 个小时，而 v_bo_secured_detail 需要几秒钟。

* * *

**谢谢所有回复的人**

这是我要记住的一个。表达式的理论和数学与基于硬件的执行现实相结合的地方。哎哟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T15:22:03.983

执行计划是理论，执行时间是现实。

该计划向您展示了引擎如何执行您的查询，但某些步骤可能会导致解决查询的工作量过多。使用“x is null or x = y”闻起来很糟糕。如果 r 和 d 是大表，您可能会遇到某种组合爆炸，并且请求会在大量磁盘块列表中无休止地循环。我想您在执行期间会看到很多 I/O。

另一方面，联合选择又短又甜，因此可能会重用许多仍然存在于早期选择中的磁盘块，和/或您有一定程度的并行性受益于对相同磁盘块的读取。

同样到处使用 trim() 和 upper() 看起来有点可疑。如果您的数据如此不干净，则可能值得不时运行一些定期的房屋清洁，以便您可以说“x = y”并知道它有效。

更新：您要求提供改进 v_test 的提示。清理你的数据，这样 trim() 和 upper() 就没有必要了。它们可能会阻止使用索引（尽管这也会影响联合选择版本）。

如果你不能摆脱 "x is null or x = y" 那么 y = nvl(x,'does-not-exist') 可能有更好的特征（假设 'does-not-exist' 是一个“可以” t发生” id值）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-19T15:23:35.663

正如[Oracle 文档所说](http://download.oracle.com/docs/cd/A87860_01/doc/server.817/a76965/c20a_opt.htm#16287)，成本是相对于特定执行计划的估计成本。当您调整查询时，计算成本的特定执行计划可能会发生变化。有时戏剧性的。

v_test 性能的问题在于，Oracle 想不出除了执行嵌套循环之外的其他方法来执行它，对于每个 cust_bo_roles，扫描所有 cust_dept_roll_up_tbl 以找到匹配项。如果表的大小为 n 和 m，则需要 n*m 时间，这对于大型表来说很慢。相比之下， v_bo_secured_detail 被设置为一系列查询，每个查询都可以通过其他一些机制完成。（Oracle 有一个可能使用的数字，包括使用索引、动态构建散列或对数据集进行排序和合并。这些操作都是 O(n*log(n)) 或更好。）快速查询很快。

尽管很痛苦，但如果您希望此查询更快，那么您需要像之前的查询一样将其拆分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T15:21:12.813

低成本 - 高执行时间的一个方面是，当您查看大型数据集时，整体上批量处理通常更有效，而如果您想要快速结果，则更有效做尽可能少的工作来获得第一条记录。在处理大型集合时，重复进行看似快速响应的小操作不太可能产生好的结果。

很多时候，当您想要一个快速的结果时，USE_NL 优化器提示会有所帮助。

此外，在您的测试视图中，它依赖于 IS NULL ... IS NULL 不能使用索引，也不能在“table-side”参数上使用诸如 trim 之类的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T15:22:58.740

您是否收集了所有基础表的优化器统计信息？没有它们，优化者的估计可能与现实大相径庭。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T15:28:15.667

当您说“查询计划较低”时，您的意思是它更短，还是实际成本估算更低？替换视图的一个明显问题是与 cust_dept_roll_up_tbl 的联接几乎完全使用不可索引的标准（索引可以满足“为空”测试，但涉及对每个参数调用 trim 的测试不能满足），所以规划器必须至少对表进行一次，并且可能是多次顺序扫描才能满足查询。

我不确定Oracle是否有这个限制，但是许多数据库只能对每个包含的表进行一次索引扫描，所以即使你清理你的连接条件是可索引的，它也可能只能满足一个索引条件扫描并且必须对其余部分使用顺序扫描。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-11-18T03:41:45.687

稍微详细说明一下成本。

在 Oracle 9/10g 中，稍微简化一下，成本由公式确定：

成本 = (SrCount * SrTime + MbrCount * MbrTime + CpuCyclesCount * CpuCycleTime) / SrTime

其中 SrCount - 单块读取总数，SrTime - 根据收集的系统统计信息，单个块读取的平均时间，MbrCount 和 MbrTime，对应的多块读取相同（在全表扫描和索引快速全扫描期间使用），Cpu相关指标是不言自明的......并且全部除以单个块读取时间。

# asp.net - ASP.Net：动态添加到占位符的用户控件无法检索值

> ID：102483
> 
> 赞同：8
> 
> 时间：2008-09-19T14:53:15.660
> 
> 标签：asp.net, postback, user-controls

我正在向 PlaceHolder 服务器控件动态添加一些用户控件。我的用户控件由一些标签和一些文本框控件组成。

当我提交表单并尝试查看服务器上文本框（在每个用户控件中）的内容时，它们是空的。

回发完成后，文本框会包含我在回发之前输入的数据。这告诉我，框中的文本正在通过 ViewState 保留。我只是不知道为什么我在调试时找不到它们。

有人可以告诉我为什么我看不到用户在服务器上输入的数据吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-19T15:07:26.357

这是基于 .NET v1 事件序列，但它应该给你的想法：

*   初始化（初始化事件）
*   开始跟踪视图状态（检查是否回发）
    *   加载视图状态（如果回发）
    *   加载回发数据（如果回发）
*   加载（加载事件）
    *   引发更改的事件（如果回发）
    *   引发回发事件（如果回发）
*   PreRender（预渲染事件）
*   保存视图状态
*   使成为
*   卸载（卸载事件）
*   处置

如您所见，将 ViewState 数据加载回控件发生在 Load 事件之前。因此，为了让您动态添加的控件“保留”这些值，它们必须*存在*于 ASP.NET 页面才能重新加载这些值。在加载视图状态发生之前，您必须在 Init 阶段重新创建这些控件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-07-16T13:19:13.893

我昨天发现，您实际上可以通过在 loadviewstateevent 触发后立即加载控件树来使您的应用程序正常工作。如果您覆盖 loadviewstate 事件，调用 mybase.loadviewstate，然后在其后放置您自己的代码以重新生成控件，这些控件的值将在页面加载时可用。在我的一个应用程序中，我使用视图状态字段来保存可用于重新创建这些控件的 ID 或数组信息。

```
Protected Overrides Sub LoadViewState(ByVal savedState As Object)
    MyBase.LoadViewState(savedState)
    If IsPostBack Then
        CreateMyControls()
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-19T14:56:18.257

我相信您需要在页面生命周期的 Init 阶段将 UserControl 添加到 PlaceHolder，以便让 ViewState 由 Load 阶段填充以读取这些值。这是您加载这些的顺序吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T15:08:13.220

确保您在类级别定义动态控件并将它们添加到 ASP 容器中：

```
Private dynControl As ASP.MyNamespace_MyControl_ascx 
```

当您实例化控件时，请确保调用 LoadControl 以便正确添加对象：

```
dynControl = CType(LoadControl("~/MyNamespace/MyControl/MyControl.ascx"), ASP.MyNamespace_MyControl_ascx) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T14:58:40.560

您必须在 Page_PreInit 事件处理程序中创建您的控件。ASP.NET 服务器控制模型很棘手；您必须完全了解[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)才能正确执行此操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T15:01:15.640

正如其他人所说，任何形式的控制操作都必须在创建视图状态之前完成。

这是页面生命周期的一个很好的链接，可以帮助您：

[http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-19T15:14:04.110

我们经历过同样的事情，并通过在 page_load 上使用具有完全相同 .ID 的幽灵控件来处理它，然后回发获取事件和数据。正如其他人所说，在初始化阶段之后动态添加控件，状态已经构建，之后添加的控件没有存储。

希望这个对你有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-04T21:54:09.727

我还想补充一点，我已经看到用户控件的工作方式与您期望的一样，只需在运行时设置 Control.ID 属性即可。如果您不设置 ID，项目可能会以不同的顺序构建并且工作异常。

# scala - C#和PHP、ColdFusion、Ruby、Python之间的兼容加密

> ID：102496
> 
> 赞同：7
> 
> 时间：2008-09-19T14:54:19.010
> 
> 标签：scala, c#, php, ruby, encryption

我们正在开发一种可以接受`POST`请求的服务。一些`POST`数据需要先加密，`POST`因为它将存储在表单的隐藏字段中。

该应用程序是用 C# 编写的，但我们希望第三方客户端能够轻松与其集成。我们发现大多数客户端使用 PHP、Classic ASP 或 VB.Net。

第三方应该只进行加密。我们会做解密。没有双向沟通。

加密算法、填充模式和其他选项的最兼容组合是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T15:48:43.670

假设您有一种共享密钥的安全方式（无论是 RSA 加密、通过 SSH 或 HTTPS 链接检索，还是在安全电话线上呼叫其他开发人员），任何主要的现代加密（如 AES，如前所述@Ed Haber）将是合适的。我会支持他对 AES 的建议。应该有 PHP、VB、Ruby 等的库。

但是，请记住，在“没有双向通信”的情况下，您必须找到一种通道外方法来安全地将对称密钥传递给加密方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-19T16:53:30.033

如果您的意思是第三方应该不可能解密数据，那么您将需要使用非对称加密算法，例如 RSA。这将第三方使用您的公钥加密数据，然后只有您可以使用您的私钥解密数据，您不会透露。您提到的所有语言都应该有 RSA 的实现。

如果您不在乎第三方是否可以解密数据，那么 AES 就是您的选择。您将拥有一个与第三方共享的密钥。此密钥用于加密和解密。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-19T15:10:21.827

我会使用 AES 进行批量数据加密，使用 RSA 加密 AES 密钥。如果数据足够小，那么只需使用 RSA 加密整个数据。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-20T17:07:26.950

[埃德哈伯说](https://stackoverflow.com/questions/102496/compatible-encryption-between-c-and-php-coldfusion-ruby-python#102643)

> 我会使用 AES 进行批量数据加密，使用 RSA 加密 AES 密钥。如果数据足够小，那么只需使用 RSA 加密整个数据。

我认为这是一个很好的解决方案。我要做的是让您的应用程序发布一个用于获取公共 RSA 密钥的 API。当我第三方想要向您发送一些东西时，它会获得公钥。然后它会生成一个会话密钥，以使用分组密码（即 AES）进行实际加密，并通过使用您的公钥加密将密钥发送给您。您使用您的私钥解密会话密钥。然后第三方使用 AES 加密它想要发送给您的数据（使用您也发布的填充方案）并将其发送给您。您使用会话密钥对其进行解密。

上述方法存在一些问题。由于您没有发送任何信息（除了发布您的公钥之外，您无法控制会话密钥的生成方式。这意味着第三方可以使用非常不安全的方式来生成会话密钥，而您永远不会知道。第二个问题是每个想要向您发送数据的人都必须以与您相同的方式为 AES 填充数据。所以您必须确保每个人都协调。第二个问题不大，但第一个可能是个问题特别是如果您不太信任第三方从良好的加密安全随机数生成器生成非常好的会话密钥

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-20T16:36:31.610

您可以非常轻松地实现自己的基于 XOR 密钥的位加密。稍加思考和独创性，您就可以想出一些非常适合您的应用程序的东西。

这是一个 PHP 示例：

```
function XOREncryption($InputString, $KeyPhrase){

    $KeyPhraseLength = strlen($KeyPhrase);

    for ($i = 0; $i < strlen($InputString); $i++){

        $rPos = $i % $KeyPhraseLength;

        $r = ord($InputString[$i]) ^ ord($KeyPhrase[$rPos]);

        $InputString[$i] = chr($r);
    }

    return $InputString;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-20T17:06:38.153

ColdFusion 具有加密和解密功能，能够处理一系列算法和编码，包括上面推荐的 AES。

信息位于：[http ://www.cfquickdocs.com/cf8/?getDoc=encrypt#Encrypt](http://www.cfquickdocs.com/cf8/?getDoc=encrypt#Encrypt)

快速示例代码：

```
Key = generateSecretKey( 'AES' , 128 )

EncryptedText = encrypt( Text , Key , 'AES' , 'Hex' )

Text = decrypt( EncryptedText , Key, 'AES' , 'Hex' ) 
```

这个库为**PHP**提供了类似的功能：http :
[//www.chilkatsoft.com/p/php_aes.asp](http://www.chilkatsoft.com/p/php_aes.asp)

...以及 Java、Python、Ruby 和其他...
[http://www.example-code.com/java/crypt2_aes_matchPhp.asp](http://www.example-code.com/java/crypt2_aes_matchPhp.asp)
[http://www.example-code.com/python/aes_stringEncryption.asp](http://www.example-code.com/python/aes_stringEncryption.asp)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-19T14:56:32.670

听起来 RSA 是适合您的算法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-29T03:21:18.633

为什么不让您的服务器通过 HTTPS 公开？这样，任何可以处理 HTTPS 的客户端都可以安全地使用该服务。

# vb6 - 为 MAPI-MIME 转换创建 IDL

> ID：102514
> 
> 赞同：3
> 
> 时间：2008-09-19T14:56:11.267
> 
> 标签：vb6, outlook, mime, mapi, idl

我正在尝试为 IConverterSession 接口创建 IDL，但我对[MIMETOMAPI](http://msdn.microsoft.com/en-us/library/bb905204.aspx)方法的定义感到困惑。它将`LPMESSAGE pmsg`参数指定为 [out] 但注释声明它指向要加载的 MAPI 消息的指针。

我不清楚这些函数是否分配了 MAPI 消息对象并设置了指针，在这种情况下它不应该是指向 MESSAGE 指针的指针吗？或者调用代码是否应该已经实例化了消息对象，在这种情况下为什么标记为 [out] 而不是 [in]？

Utlitmately 这个接口将从 VB6 代码中使用，因此它必须是 [in] 或 [in, out] 但我确实需要知道是否在我使用的 IDL 中：-

```
[in] IMessage pmsg* 
```

或者

```
[in, out] IMessage pmsg** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T16:06:03.877

我认为在这种情况下，文档将参数标记为 [out] 时会产生误导。您必须将有效的 LPMESSAGE 传递给该方法，这就是为什么不是双指针。所以我会在你的 idl 定义中使用 [in]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-12-07T16:37:34.423

请参阅 MFCMapi 源 (http://mfcmapi.codeplex.com/) 中的 MAPIMime.h 作为权威来源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-06T22:28:30.350

正确的文档可以在这里找到：[https](https://docs.microsoft.com/en-us/office/client-developer/outlook/mapi/iconvertersession-mimetomapi) ://docs.microsoft.com/en-us/office/client-developer/outlook/mapi/iconvertersession-mimetomapi 。调用者必须提供要填写的 API 消息，因此对象必须进入 [in]。

# vb.net - 如何使用 VB.Net 2.0 在 ASP.Net 中处理季度（季度日期）？

> ID：102521
> 
> 赞同：4
> 
> 时间：2008-09-19T14:56:36.320
> 
> 标签：vb.net, datetime, .net-2.0, date

我知道[Sql Server 有一些方便的内置季度](http://wiki.lessthandot.com/index.php/How_to_find_the_first_and_last_days_in_years,_months_etc)内容，但是 .Net 原生[DateTime](http://msdn.microsoft.com/en-us/library/system.datetime_members(VS.80).aspx)对象呢？加、减和遍历四分之一的最佳方法是什么？

使用 VB 特有的[DateAdd()](http://msdn.microsoft.com/en-us/library/hcxe65wz(VS.80).aspx)函数是一件*坏事吗？*例如：

```
Dim nextQuarter As DateTime = DateAdd(DateInterval.Quarter, 1, DateTime.Now) 
```

编辑：扩展@bslorence 的功能：

```
Public Shared Function AddQuarters(ByVal originalDate As DateTime, ByVal quarters As Integer) As Datetime
    Return originalDate.AddMonths(quarters * 3)
End Function 
```

扩展@Matt 的功能：

```
Public Shared Function GetQuarter(ByVal fromDate As DateTime) As Integer
    Return ((fromDate.Month - 1) \ 3) + 1
End Function 
```

编辑：这里还有几个方便的功能：

```
Public Shared Function GetFirstDayOfQuarter(ByVal originalDate As DateTime) As DateTime
    Return AddQuarters(New DateTime(originalDate.Year, 1, 1), GetQuarter(originalDate) - 1)
End Function

Public Shared Function GetLastDayOfQuarter(ByVal originalDate As DateTime) As DateTime
    Return AddQuarters(New DateTime(originalDate.Year, 1, 1), GetQuarter(originalDate)).AddDays(-1)
End Function 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-19T15:26:34.487

我知道您可以通过以下方式计算日期的四分之一：

```
Dim quarter As Integer = (someDate.Month - 1) \ 3 + 1 
```

如果您使用的是 Visual Studio 2008，则可以通过查看[Extension Methods](http://msdn.microsoft.com/en-us/library/bb384936.aspx)来尝试将附加功能附加到 DateTime 类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-19T15:18:45.393

这个怎么样：

```
Dim nextQuarter As DateTime = DateTime.Now.AddMonths(3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T15:48:03.500

需要记住的一件事是，并非所有公司都会在一个月的最后一天结束他们的季度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T16:08:49.347

```
Public Function GetLastQuarterStart() As Date

    GetLastQuarterStart = DateAdd(DateInterval.Quarter, -1, DateTime.Now).ToString("MM/01/yyyy")

End Function

Public Function GetLastQuarterEnd() As Date

    Dim LastQuarterStart As Date = DateAdd(DateInterval.Quarter, -1, DateTime.Now).ToString("MM/01/yyyy")
    Dim MM As String = LastQuarterStart.Month
    Dim DD As Integer = 0
    Dim YYYY As String = LastQuarterStart.Year
    Select Case MM
        Case "01", "03", "05", "07", "08", "10", "12"
            DD = 31
        Case "02"
            Select Case YYYY
                Case "2012", "2016", "2020", "2024", "2028", "2032"
                    DD = 29
                Case Else
                    DD = 28
            End Select
        Case Else
            DD = 30
    End Select

    Dim LastQuarterEnd As Date = DateAdd(DateInterval.Month, 2, LastQuarterStart)

    MM = LastQuarterEnd.Month
    YYYY = LastQuarterEnd.Year

    Return String.Format("{0}/{1}/{2}", MM, DD, YYYY)

End Function 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-05T14:24:23.217

扩展马特布莱恩的回答：

```
Dim intQuarter As Integer = Math.Ceiling(MyDate.Month / 3) 
```

不确定这是否会增加速度优势，但它看起来更清洁 IMO

# toad - 我在哪里可以获得 Toad 语法着色方案？

> ID：102523
> 
> 赞同：15
> 
> 时间：2008-09-19T14:56:48.583
> 
> 标签：toad, skins

我非常喜欢用于编程的深色背景配色方案中的浅色 - 不幸的是，这不是 Quest 的 Toad 默认附带的。

我注意到可以在语言管理窗口下导出和导入设置，而且我知道 Toad 有大量的社区参与。所以我认为一定有一些地方人们发布他们的自定义配色方案。但是，部分原因是我不知道 Toad 人如何称呼它们（皮肤？着色？主题？），部分原因是 Google Toad +skins 太难了，我一辈子都找不到它们。

有谁知道是否有这样的地方，所以我不必手动设置颜色？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-01-06T20:16:09.160

*完全更新：*

1.  **正式名称是什么？**

    文件扩展名 ( `.dvtcolortheme`) 建议`"Color Theme"`或是`"DWT Color Theme"`正式名称。Toad 论坛上的大多数用户似乎使用相同的术语。

2.  **它们在哪里共享？**

    似乎没有专门的网站来分享颜色主题。[但是，在ToadWorld](http://www.toadworld.com/)和[ToadForOracle](http://toadfororacle.com/)上有几个论坛，人们在讨论交换这些颜色主题文件。我建议跳上论坛并询问其他人是否有文件要共享或知道任何存储库站点。

3.  **可用的颜色主题**

    ~~* GitHub 上的夜间主题：[https ://github.com/grng/Nocturnal-Toad-Color-Scheme](https://github.com/grng/Nocturnal-Toad-Color-Scheme)~~ ![夜间蟾蜍配色方案](../Images/8f2ff736a93aec0193b17fca2eeaf1f9.png)

    ~~* 一个不错的深色背景主题：[http ://toadfororacle.com/thread.jspa?messageID=93203](http://toadfororacle.com/thread.jspa?messageID=93203)~~

4.  **自己滚动**

    我知道你不想创建自己的，但它看起来比我们任何一个人预期的要容易得多。`.dwtcolortheme`设置文件只是 XML 。

    我建议访问[http://studiostyl.es/](http://studiostyl.es/) - 因为它是 Visual Studio 主题的大型存储库。找到您喜欢的缩略图，截取屏幕截图，然后使用颜色选择器捕获值。将它们放入您的 XML 设置文件中，您就可以开始使用了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-01-11T05:15:22.153

转到查看 -> Toad 选项。单击编辑器 -> 行为。有一个叫做语法高亮的按钮。在突出显示选项卡上（默认打开）是样式列表，单击样式将显示为该样式选择的选项...

例如，在我的设置中（这是我的默认安装），保留字是蓝色的，评论是绿色的，字符串是红色的，等等。

滚动浏览，您将看到选项，您可以根据需要进行更改。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-28T16:23:13.233

新版本 TOAD 的正确文件是**EditorLexers.xml**。

版本 12.9 在这里

C:\Users\%username%\AppData\Roaming\Dell\Toad for Oracle\12.9\User Files

而不是版本 12.11 在这里

C:\Users\%username%\AppData\Roaming\Quest Software\Toad for Oracle\12.11\User Files

[在这里你可以下载我的黑暗主题](https://drive.google.com/file/d/0B8C-yO8R_DFCc2VSUjRSc2NQUzA/view?usp=sharing)

享受！

更新：它也适用于 13.0 版。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-06T13:30:41.263

我创建了一个类似于 Visual Studio 2017 深色主题的架构

您可以从以下位置下载它：[EditorLexers.xml](https://drive.google.com/file/d/1lREZ-Wg3a5ijfAlyvsoENmq_kJEoY1aB/view?usp=sharing)

您需要替换位于以下位置的文件：

```
C:\Users\[YOUR_USER]\AppData\Roaming\Quest Software\Toad for Oracle\13.1\User Files 
```

![截屏](../Images/f84995596d096788099d0e99ac7f6ccb.png)

# xml - 多个文件输入？

> ID：102531
> 
> 赞同：6
> 
> 时间：2008-09-19T14:58:35.957
> 
> 标签：xml, xslt, io

在 XSLT 文档中，是否可以遍历当前目录中的一组文件？

我有一种情况，我有一个充满 xml 文件的目录，需要进行一些分析才能生成报告。我的样式表在单个文档上运行良好，但我想扩展它而不使用另一个工具来合并 xml 文档。

我是这样想的：

```
<xsl:for-each select="{IO Selector Here}">
    <xsl:variable select="document(@url)" name="contents" />
    <!--More stuff here-->
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-19T19:22:52.797

在 XSLT 2.0 和 Saxon 中，您可以使用以下`collection()`函数执行此操作：

```
<xsl:for-each select="file:///path/to/directory">
  <!-- process the documents -->
</xsl:for-each> 
```

有关详细信息，请参阅[http://www.saxonica.com/documentation/sourcedocs/collections.html 。](http://www.saxonica.com/documentation/sourcedocs/collections.html "Saxonica：XSLT 和 XQuery 处理：集合")

在 XSLT 1.0 中，您必须创建一个索引来列出您想要使用单独的工具处理的文档。您的环境可能会提供这样的工具；例如，Cocoon 有一个创建此类索引的[目录生成器。](http://cocoon.apache.org/2.1/userdocs/directory-generator.html)但是如果不知道你的环境是什么，就很难知道推荐什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T19:23:59.423

正如其他人所说，您不能以独立于平台的方式进行操作。在 .NET 世界中，您可以创建自定义 XmlResolver，以便 document('dir://c:/foo/') 以您希望的任意格式返回 'c:\foo' 目录中的文件列表。有关自定义 XmlResolver 的更多信息，请参阅以下链接：

[自定义 XmlUrlResolver 类](http://msdn.microsoft.com/en-us/library/bb669135.aspx)
[XmlResolver 的强大功能](http://www.tkachenko.com/blog/archives/000105.html)

您也可以在 XSLT 样式表中使用脚本（如[msxsl:script](http://msdn.microsoft.com/en-us/library/ms256042.aspx)元素）或扩展。

所有这些方法都将使您的 XSLT 代码无法移植到其他平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T15:33:53.860

我不认为 XSL 被设置为以这种方式工作：它被设计为由一个或多个文档上的其他东西使用，而其他东西将负责查找应该应用 XSLT 的文件。

如果您有一个主文档和一组固定的支持文档，则可以使用该[`document()`函数](http://www.w3schools.com/xsl/func_document.asp)返回特定的节点和/或值，但我怀疑您的情况不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T16:10:20.747

在 XSLT 中，我认为这是不可能的。

您可以将所有 XML 文件名作为逗号分隔列表传递给 <xsl:param name="files" />，并使用递归、substring-before() 和 substring-after() 对其进行循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T16:14:30.410

我有一个可以用于此目的的命令行工具——它使用 Ant（Java 构建工具）中内置的 XSLT 处理器来处理输入 + 转换为输出。很容易用批处理文件包装循环。

svn://donie.homeip.net/public/tools

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T14:38:19.633

如果您使用的是 .Net，您可以使用 XsltExtension 从您的 XSLT 文档调用 .net 类中的方法。然后该方法可以将节点集返回给您的 XSLT。所以你的方法可以处理文件 IO 部分。

# html - 通过链接发送值

> ID：102534
> 
> 赞同：0
> 
> 时间：2008-09-19T14:58:46.707
> 
> 标签：html, url

情况如下：我有 2 页。

我想要的是`<a href="">`在第 1 页上有许多文本链接（）都指向第 2 页，但我希望每个链接都发送不同的值。

在第 2 页上，我想像这样显示该值：

> 您好，您点击了 {value}

要考虑的另一点是在这种情况下我不能使用任何 php，只能使用 html。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T15:02:21.207

你可以使用任何脚本吗？像 Javascript 之类的东西。如果可以，则将查询字符串中的值（只需添加“？ValueName = Value”）传递到链接的末尾。然后在目标页面上检索查询字符串值。以下站点显示了如何解析它：[解析查询字符串](http://adamv.com/dev/javascript/querystring)。

这是您需要的 Javascript 代码：

```
var qs = new Querystring();
var v1 = qs.get("ValueName") 
```

从那里你应该能够使用传递的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T15:03:22.077

Javascript可以得到它。说，你正试图从这个 url 获取查询字符串值：http: [//foo.com/default.html?foo =bar](http://foo.com/default.html?foo=bar)

```
var tabvalue = getQueryVariable("foo"); 

function getQueryVariable(variable)
{
var query = window.location.search.substring(1);
var vars = query.split("&");
for (var i=0;i<vars.length;i++)
{
var pair = vars[i].split("=");
if (pair[0] == variable)
{
return pair[1];
}
}
} 
```

** 不是 100% 确定我的 JS 代码是否正确，因为我没有测试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T17:14:43.713

好的，感谢您的所有回复，如果我能找到使用脚本的方法，我会看看。这真的很烦人，因为我必须在 CMS 周围工作，因为在 CMS 中，所有页面都是使用所见即所得编辑器创建的，该编辑器倾向于过滤掉无法识别的标签/脚本。

编辑：好的，该死的所见即所得编辑器似乎只识别html标签......（如预期的那样）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T15:01:43.830

您可能可以使用 HTML 锚点来完成此操作。

[http://www.w3schools.com/HTML/html_links.asp](http://www.w3schools.com/HTML/html_links.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T15:04:36.007

将您的数据附加到链接广告的 HREF 标记，在第二页上使用 javascript 来解析 URL 并显示您想要的任何内容

[http://java-programming.suite101.com/article.cfm/how_to_get_url_parts_in_javascript](http://java-programming.suite101.com/article.cfm/how_to_get_url_parts_in_javascript)

它不干净，但它应该可以工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T15:11:37.253

使用**document.location.search**和**split()**

```
http://www.example.com/example.html?argument=value

var queryString = document.location.search();
var parts = queryString.split('=');
document.write(parts[0]);  // The argument name
document.write(parts[1]);  // The value 
```

希望能帮助到你

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-19T15:12:40.637

好吧，这对于 javascript 来说是非常基本的，但如果你想要更多这样的东西和更高级的东西，你应该真正研究一下 php。使用 php 很容易将变量从一个页面获取到另一个页面，这是一个示例：

网址：

```
localhost/index.php?myvar=Hello World 
```

然后，您可以使用以下代码访问 index.php 中的 myvar：

```
$myvar =$_GET['myvar']; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-04T02:30:50.300

使用 php

```
<?

$passthis = "See you on the other side";

echo '<form action="whereyouwantittogo.php" target="_blank" method="post">'.
'<input type="text" name="passthis1" value="'.
$passthis .' " /> '.
'<button type="Submit" value="Submit" >Submit</button>'.
'</form>';

?> 
```

您要将信息传递给的页面的脚本：

```
<?

$thispassed = $_POST['passthis1'];

echo '<textarea>'. $thispassed .'</textarea>';
echo $thispassed;

?> 
```

在单独的页面上使用这两个代码，后者在 whereyouwantittogo.php 上，你应该在做生意。

# python - 你可以使用生成器函数做什么？

> ID：102535
> 
> 赞同：225
> 
> 时间：2008-09-19T14:58:49.343
> 
> 标签：python, generator

我开始学习 Python 并且遇到了生成器函数，它们中有一个 yield 语句。我想知道这些函数真正擅长解决哪些类型的问题。

* * *

## 回答 #1

> 赞同：252
> 
> 时间：2008-09-19T15:09:25.340

生成器为您提供惰性评估。您可以通过迭代它们来使用它们，可以使用 'for' 显式地使用它们，也可以通过将其传递给任何迭代的函数或构造来隐式地使用它们。您可以将生成器视为返回多个项目，就好像它们返回一个列表一样，但它们不是一次全部返回它们，而是一个接一个地返回它们，并且生成器函数暂停直到请求下一个项目。

生成器适用于计算大量结果（特别是涉及循环本身的计算），您不知道是否需要所有结果，或者您不想同时为所有结果分配内存. 或者对于生成器使用*另一个*生成器或消耗其他资源的情况，如果这种情况发生得越晚越好。

生成器的另一个用途（实际上是一样的）是用迭代替换回调。在某些情况下，您希望函数完成大量工作并偶尔向调用者报告。传统上，您会为此使用回调函数。您将此回调传递给工作函数，它会定期调用此回调。生成器方法是工作函数（现在是生成器）对回调一无所知，并且只在它想要报告某些内容时产生。调用者不是编写单独的回调并将其传递给工作函数，而是在生成器周围的一个小“for”循环中完成所有报告工作。

例如，假设您编写了一个“文件系统搜索”程序。您可以完整地执行搜索，收集结果，然后一次显示一个。在显示第一个结果之前，必须收集所有结果，并且所有结果都将同时存储在内存中。或者您可以在找到结果时显示结果，这样会更节省内存并且对用户更友好。后者可以通过将结果打印函数传递给文件系统搜索函数来完成，或者可以通过将搜索函数作为生成器并迭代结果来完成。

如果您想查看后两种方法的示例，请参阅 os.path.walk()（带有回调的旧文件系统遍历函数）和 os.walk()（新的文件系统遍历生成器）。当然，如果你真的想在一个列表中收集所有结果，生成器方法很容易转换为大列表方法：

```
big_list = list(the_generator) 
```

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2008-09-19T15:09:28.520

使用生成器的原因之一是使某种解决方案的解决方案更清晰。

另一种是一次处理一个结果，避免构建庞大的结果列表，无论如何都要分开处理。

如果您有这样的斐波那契向上到 n 函数：

```
# function version
def fibon(n):
    a = b = 1
    result = []
    for i in xrange(n):
        result.append(a)
        a, b = b, a + b
    return result 
```

您可以更轻松地编写函数：

```
# generator version
def fibon(n):
    a = b = 1
    for i in xrange(n):
        yield a
        a, b = b, a + b 
```

功能更清晰。如果你使用这样的功能：

```
for x in fibon(1000000):
    print x, 
```

在此示例中，如果使用生成器版本，则根本不会创建整个 1000000 项列表，一次只创建一个值。使用列表版本时不会出现这种情况，首先会创建一个列表。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2013-01-18T08:17:56.467

我发现这个解释消除了我的疑问。因为有可能不知道的人`Generators`也不知道`yield`

**返回**

return 语句是销毁所有局部变量并将结果值返回（返回）给调用者的地方。如果稍后调用相同的函数，该函数将获得一组新的变量。

**屈服**

但是，如果我们退出函数时没有丢弃局部变量怎么办？这意味着我们可以`resume the function`在我们离开的地方。这是`generators`引入的概念和`yield`语句`function`从中断处继续的地方。

```
 def generate_integers(N):
    for i in xrange(N):
    yield i 
```

* * *

```
 In [1]: gen = generate_integers(3)
    In [2]: gen
    <generator object at 0x8117f90>
    In [3]: gen.next()
    0
    In [4]: gen.next()
    1
    In [5]: gen.next() 
```

`return`这就是 Python 中和`yield`语句之间的区别。

**Yield 语句使函数成为生成器函数。**

所以生成器是创建迭代器的简单而强大的工具。它们的编写方式与常规函数类似，但它们在`yield`想要返回数据时使用该语句。每次调用 next() 时，生成器都会从中断处继续（它会记住所有数据值以及最后执行的语句）。

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2008-09-19T15:07:13.410

[请参阅PEP 255](http://www.python.org/dev/peps/pep-0255/)中的“动机”部分。

生成器的一个不明显的用途是创建可中断的函数，它可以让您在不使用线程的情况下执行更新 UI 或“同时”（实际上是交错）运行多个作业等操作。

* * *

## 回答 #5

> 赞同：43
> 
> 时间：2014-05-07T23:20:11.100

## 现实世界的例子

假设您的 MySQL 表中有 1 亿个域，并且您想更新每个域的 Alexa 排名。

您需要做的第一件事是从数据库中选择您的域名。

假设您的表名是`domains`，列名是`domain`。

如果您使用`SELECT domain FROM domains`它将返回 1 亿行，这将消耗大量内存。所以你的服务器可能会崩溃。

所以你决定批量运行程序。假设我们的批量大小是 1000。

在我们的第一批中，我们将查询前 1000 行，检查每个域的 Alexa 排名并更新数据库行。

在我们的第二批中，我们将处理接下来的 1000 行。在我们的第三批中，它将是从 2001 到 3000 等等。

现在我们需要一个生成器函数来生成我们的批次。

这是我们的生成器函数：

```
def ResultGenerator(cursor, batchsize=1000):
    while True:
        results = cursor.fetchmany(batchsize)
        if not results:
            break
        for result in results:
            yield result 
```

正如你所看到的，我们的函数保持`yield`结果。如果您使用关键字`return`而不是`yield`，则整个函数将在返回时结束。

```
return - returns only once
yield - returns multiple times 
```

如果一个函数使用关键字`yield`，那么它就是一个生成器。

现在你可以像这样迭代：

```
db = MySQLdb.connect(host="localhost", user="root", passwd="root", db="domains")
cursor = db.cursor()
cursor.execute("SELECT domain FROM domains")
for result in ResultGenerator(cursor):
    doSomethingWith(result)
db.close() 
```

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2008-09-19T15:14:10.087

缓冲。如果以大块的形式获取数据是有效的，但以小块的形式处理它，那么生成器可能会有所帮助：

```
def bufferedFetch():
  while True:
     buffer = getBigChunkOfData()
     # insert some code to break on 'end of data'
     for i in buffer:    
          yield i 
```

以上使您可以轻松地将缓冲与处理分开。消费者函数现在可以一一获取值，而无需担心缓冲。

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2009-04-11T20:55:59.403

我发现生成器在清理代码方面非常有帮助，它为您提供了一种非常独特的方式来封装和模块化代码。在您需要根据自己的内部处理不断吐出值的情况下，并且当需要从代码中的任何位置（而不仅仅是在循环或块中）调用该东西时，生成器是*一个*功能采用。

一个抽象的例子是一个不在循环中的斐波那契数生成器，当从任何地方调用它时，总是会返回序列中的下一个数：

```
def fib():
    first = 0
    second = 1
    yield first
    yield second

    while 1:
        next = first + second
        yield next
        first = second
        second = next

fibgen1 = fib()
fibgen2 = fib() 
```

现在您有两个斐波那契数生成器对象，您可以从代码中的任何位置调用它们，它们将始终按如下顺序返回更大的斐波那契数：

```
>>> fibgen1.next(); fibgen1.next(); fibgen1.next(); fibgen1.next()
0
1
1
2
>>> fibgen2.next(); fibgen2.next()
0
1
>>> fibgen1.next(); fibgen1.next()
3
5 
```

生成器的可爱之处在于它们封装了状态，而不必经历创建对象的过程。考虑它们的一种方式是将它们视为记住其内部状态的“功能”。

我从*[Python Generators 获得了斐波那契示例——它们是什么？](http://www.neotitans.com/resources/python/python-generators-tutorial.html)*稍加想象，您可以想出许多其他情况，其中生成器是`for`循环和其他传统迭代结构的绝佳替代品。

* * *

## 回答 #8

> 赞同：20
> 
> 时间：2008-09-19T15:15:03.500

简单的解释：考虑一个`for`语句

```
for item in iterable:
   do_stuff() 
```

很多时候，其中的所有项目`iterable`不需要从一开始就在那里，而是可以根据需要即时生成。这在两者中都可以更有效

*   空间（您永远不需要同时存储所有项目）和
*   时间（迭代可能在需要所有项目之前完成）。

其他时候，你甚至不提前知道所有的项目。例如：

```
for command in user_input():
   do_stuff_with(command) 
```

您无法事先知道所有用户的命令，但是如果您有一个生成器来处理您的命令，您可以使用这样的一个不错的循环：

```
def user_input():
    while True:
        wait_for_command()
        cmd = get_command()
        yield cmd 
```

使用生成器，您还可以对无限序列进行迭代，这在迭代容器时当然是不可能的。

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2008-09-19T15:13:16.640

我最喜欢的用途是“过滤”和“减少”操作。

假设我们正在读取一个文件，并且只想要以“##”开头的行。

```
def filter2sharps( aSequence ):
    for l in aSequence:
        if l.startswith("##"):
            yield l 
```

然后我们可以在适当的循环中使用生成器函数

```
source= file( ... )
for line in filter2sharps( source.readlines() ):
    print line
source.close() 
```

reduce 示例类似。假设我们有一个文件，我们需要在其中定位`<Location>...</Location>`行块。[不是 HTML 标签，而是恰好看起来像标签的行。]

```
def reduceLocation( aSequence ):
    keep= False
    block= None
    for line in aSequence:
        if line.startswith("</Location"):
            block.append( line )
            yield block
            block= None
            keep= False
        elif line.startsWith("<Location"):
            block= [ line ]
            keep= True
        elif keep:
            block.append( line )
        else:
            pass
    if block is not None:
        yield block # A partial block, icky 
```

同样，我们可以在适当的 for 循环中使用这个生成器。

```
source = file( ... )
for b in reduceLocation( source.readlines() ):
    print b
source.close() 
```

这个想法是生成器函数允许我们过滤或减少序列，一次生成另一个序列一个值。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2014-09-27T12:40:27.043

您可以使用生成器的一个实际示例是，如果您有某种形状并且想要迭代它的角、边缘或其他任何东西。[对于我自己的项目（这里](https://github.com/Pithikos/python-rectangles)的源代码），我有一个矩形：

```
class Rect():

    def __init__(self, x, y, width, height):
        self.l_top  = (x, y)
        self.r_top  = (x+width, y)
        self.r_bot  = (x+width, y+height)
        self.l_bot  = (x, y+height)

    def __iter__(self):
        yield self.l_top
        yield self.r_top
        yield self.r_bot
        yield self.l_bot 
```

现在我可以创建一个矩形并在其角上循环：

```
myrect=Rect(50, 50, 100, 100)
for corner in myrect:
    print(corner) 
```

而不是`__iter__`你可以有一个方法`iter_corners`并用`for corner in myrect.iter_corners()`. 使用起来更加优雅，`__iter__`因为我们可以直接在`for`表达式中使用类实例名称。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2008-09-19T15:09:26.650

在迭代输入维护状态时基本上避免回调函数。

有关使用生成器可以完成的操作的概述，请参见[此处](http://www.python.org/dev/peps/pep-0255/)和[此处。](http://www.dabeaz.com/generators/index.html)

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2014-04-28T07:21:10.390

由于没有提到生成器的发送方法，这里举个例子：

```
def test():
    for i in xrange(5):
        val = yield
        print(val)

t = test()

# Proceed to 'yield' statement
next(t)

# Send value to yield
t.send(1)
t.send('2')
t.send([3]) 
```

它显示了向正在运行的生成器发送值的可能性。下面视频中关于生成器的更高级课程（包括`yield`来自解释、用于并行处理的生成器、逃避递归限制等）

[David Beazley 在 PyCon 2014 上谈发电机](http://pyvideo.org/video/2575/generators-the-final-frontier)

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2015-03-16T14:17:35.183

这里有一些很好的答案，但是，我还建议完整阅读 Python[函数式编程教程](https://docs.python.org/dev/howto/functional.html)，该教程有助于解释生成器的一些更有效的用例。

*   Particularly interesting is that it is now possible to [update the yield variable from outside the generator function](https://docs.python.org/dev/howto/functional.html#passing-values-into-a-generator), hence making it possible to create dynamic and interwoven coroutines with relatively little effort.
*   Also see [PEP 342: Coroutines via Enhanced Generators](https://www.python.org/dev/peps/pep-0342/) for more information.

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-09-19T15:17:51.060

当我们的 Web 服务器充当代理时，我使用生成器：

1.  客户端向服务器请求代理 url
2.  服务器开始加载目标url
3.  服务器在得到结果后立即将结果返回给客户端

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-19T15:14:43.237

一堆东​​西。任何时候您想生成一系列项目，但又不想一次将它们全部“物化”到一个列表中。例如，您可以有一个返回素数的简单生成器：

```
def primes():
    primes_found = set()
    primes_found.add(2)
    yield 2
    for i in itertools.count(1):
        candidate = i * 2 + 1
        if not all(candidate % prime for prime in primes_found):
            primes_found.add(candidate)
            yield candidate 
```

然后，您可以使用它来生成后续素数的乘积：

```
def prime_products():
    primeiter = primes()
    prev = primeiter.next()
    for prime in primeiter:
        yield prime * prev
        prev = prime 
```

这些都是相当琐碎的例子，但您可以看到它在处理大型（可能是无限的！）数据集时如何有用，而无需提前生成它们，这只是更明显的用途之一。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-09-22T14:06:40.320

Also good for printing the prime numbers up to n:

```
def genprime(n=10):
    for num in range(3, n+1):
        for factor in range(2, num):
            if num%factor == 0:
                break
        else:
            yield(num)

for prime_num in genprime(100):
    print(prime_num) 
```

# flash - AMFPHP服务新服务报错

> ID：102547
> 
> 赞同：-1
> 
> 时间：2008-09-19T14:59:49.653
> 
> 标签：flash, actionscript-3, amfphp

我正在尝试向 amfphp 添加一个新的 hello world 服务，我正在本地开发

```
<?php

/**
 * First tutorial class
 */
class HelloWorld {

   /**
    * first simple method
    * @returns a string saying 'Hello World!'
    */
   function sayHello()
   {
       return "Hello World!";
   }

}

?> 
```

在 amfphp 浏览器中浏览时，我收到“TypeError：错误 #1009：无法访问空对象引用的属性或方法”。需要帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-30T11:19:49.470

我推荐[Charles](http://www.charlesproxy.com/)来解决这类问题，这让你看看到底发生了什么。在您的情况下，这可能很简单，例如 php 文件中的语法错误。PHP 会将错误信息输出到服务浏览器所期望的 amf 编码数据中，从而对其尝试的任何解析造成严重破坏。使用 Charles，您可以轻松查看并修复它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T18:17:54.763

那是您的全部源代码吗？我确定这不是问题，但以防万一，您***打开***? **php**标记对吗？

这是我的一个简单服务类：

```
<?php

class Products {

    public function __construct() {
        mysql_connect("localhost", "myuser", "mypass");
        mysql_select_db("mydb");
    }
    /** 
    * Retrieves data
    * @returns data
    */
    function getProduct() {
        $sql = 'SELECT * FROM `content_type_product`'; 
        return mysql_query($sql);
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-30T02:11:34.567

我同意grapefrukt ...浏览器确实没有为您提供有关PHP错误的良好信息。Charles 是在 AMF 上做事的天赐之物，我强烈推荐它。您将获得有关请求和结果的信息以及任何 PHP 错误消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T17:45:34.637

您正在尝试访问为空的变量/方法。这里的代码很好，所以问题出在其他地方..

# asp.net - 使用 ASP.Net MVC 与 Web 表单的最大优势

> ID：102558
> 
> 赞同：164
> 
> 时间：2008-09-19T15:01:12.973
> 
> 标签：asp.net, asp.net-mvc

使用其中一个有哪些优势？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2008-09-22T10:39:29.613

**ASP.net MVC**的主要优点是：

1.  启用对呈现的 HTML 的完全控制。

2.  提供清晰的关注点分离 (SoC)。

3.  启用[测试驱动开发 (TDD)](http://en.wikipedia.org/wiki/Test-driven_development)。

4.  与 JavaScript 框架轻松集成。

5.  遵循 web 的无状态性设计。

6.  启用 SEO 的 RESTful url。

7.  没有 ViewState 和 PostBack 事件

**ASP.net Web Form**的主要优点是：

1.  它提供[RAD](http://en.wikipedia.org/wiki/Rapid_application_development)开发

2.  为来自winform开发的开发者提供简单的开发模型。

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2010-09-02T17:05:22.703

ASP.NET Web Forms 和 MVC 是 Microsoft 开发的两个 Web 框架 - 它们都是不错的选择。任何一个 Web 框架都不会被另一个替代，也没有计划将它们“合并”到一个框架中。持续的支持和开发由 Microsoft 并行完成，两者都不会“消失”。

这些 Web 框架中的每一个都提供了优点/缺点 - 在开发 Web 应用程序时需要考虑其中一些。可以使用任何一种技术来开发 Web 应用程序 - 它可以使特定应用程序的开发更容易选择一种技术而不是另一种技术，反之亦然。

**ASP.NET 网络表单：**

*   **开发支持状态** • 提供 Web 应用程序知道用户一直在做什么的错觉，类似于 Windows 应用程序。即使“向导”功能更容易实现。Web 表单在向开发人员隐藏很多复杂性方面做得很好。
*   **快速应用程序开发 (RAD)** • 只需“加入”并开始交付 Web 表单的能力。这在一些 MVC 社区有争议，但由微软推动。最后，它归结为开发人员的专业水平以及他们对什么感到满意。对于经验不足的开发人员，Web 表单模型的学习曲线可能较少。
*   **更大的控件工具箱** • ASP.NET Web 窗体提供了一个更大、更健壮的工具箱（Web 控件），而 MVC 提供了一个更原始的控件集，更多地依赖于通过 jQuery (Javascript) 的富客户端控件。
*   **成熟** • 自 2002 年以来一直存在，有大量关于问题、问题等的信息。提供更多第三方控制 - 需要考虑您现有的工具包。

**ASP.NET MVC：**

*   **关注点分离 (SoC)** • 从技术角度来看，MVC 中的代码组织非常干净、有条理和细化，这使得 Web 应用程序更容易（希望）在功能方面进行扩展。从开发的角度促进伟大的设计。
*   **更轻松地与客户端工具（丰富的用户界面工具）集成** • Web 应用程序变得比以往任何时候都更加丰富，就像您在桌面上看到的应用程序一样丰富。使用 MVC，它使您能够与此类工具包（例如 jQuery）集成，比在 Web 窗体中更轻松、更无缝。
*   **搜索引擎优化 (SEO) 友好/无状态** • URL 对搜索引擎更友好（即 mywebapplication.com/users/1 - 检索 ID 为 1 的用户与 mywebapplication/users/getuser.aspx（在会话中传递的 ID）相比）。同样，由于 MVC 是无状态的，这消除了从同一窗口生成多个 Web 浏览器（会话冲突）的用户的头痛。同样，MVC 遵循无状态 Web 协议，而不是与它“对抗”。
*   **非常适合需要高度控制的开发人员** • ASP.NET Web 表单中的许多控件会自动生成您在呈现页面时看到的大部分原始 HTML。这可能会让开发人员头疼。使用 MVC，它可以更好地完全控制渲染的内容，并且没有任何意外。更重要的是，HTML 表单通常比 Web 表单小得多，这相当于提高了性能——这是需要认真考虑的事情。
*   **测试驱动开发 (TDD)** • 使用 MVC，您可以更轻松地为 Web 端创建测试。额外的测试层将为意外行为提供另一层防御。

身份验证、授权、配置、编译和部署都是两个 Web 框架之间*共享的功能。*

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2011-02-15T20:49:09.717

任何年纪大到能记住经典 ASP 的人都会记得打开一个包含 html 和 javascript 代码的页面的噩梦——即使是最小的页面也很难弄清楚它到底在做什么。我可能是错的，我希望我是错的，但 MVC 看起来像是回到了那些糟糕的过去。

当 ASP.Net 出现时，它被誉为救世主，将代码与内容分离，并允许我们让网页设计师创建 html 并让编码人员处理背后的代码。如果我们不想使用 ViewState，我们将其关闭。如果我们出于某种原因不想使用后面的代码，我们可以将我们的代码放在 html 中，就像经典的 ASP 一样。如果我们不想使用 PostBack，我们会重定向到另一个页面进行处理。如果我们不想使用 ASP.Net 控件，我们使用标准的 html 控件。如果我们不想在我们的控件上使用 ASP.Net runat="server"，我们甚至可以询问 Response 对象。

现在，有大智慧的人（可能从未编写过经典 ASP 的人）决定是时候回到将代码与内容混合的时代，并将其称为“关注点分离”。当然，您可以创建更简洁的 html，但您可以使用经典的 ASP。说“如果你的视图中有太多代码，你就没有正确编程”就像是在说“如果你用经典的 ASP 编写了结构良好和注释良好的代码，那么它比 ASP.NET 更干净、更好”

如果我想回到将代码与内容混合的方式，我会考虑使用 PHP 进行开发，这种开发环境要成熟得多。如果 ASP.NET 有这么多问题，那么为什么不解决这些问题呢？

最后但同样重要的是，新的 Razor 引擎意味着更难区分 html 和代码。至少我们可以在 ASP 中查找开始和结束标记，即 <% 和 %>，但现在唯一的指示将是 @ 符号。

可能是时候迁移到 PHP 并再等 10 年，让某人再次将代码与内容分开。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-01-23T20:41:58.627

如果您正在与其他开发人员合作，例如 PHP 或 JSP（我猜是 Rails） - 您将更容易转换或在页面上协作，因为您不会拥有所有那些“讨厌”的 ASP.NET事件和控制无处不在。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2011-02-02T06:52:59.643

MVC 的问题在于，即使对于“专家”来说，它也会占用大量宝贵的时间并且需要大量的努力。无论背后的技术如何，企业都受到“有效的快速解决方案”的基本驱动。WebForms 是一种节省时间和金钱的 RAD 技术。任何需要更多时间的事情都是企业不能接受的。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2010-06-30T01:35:24.907

1.  正确的 AJAX，例如 JSONResults 没有部分页面回发废话。
2.  没有视图状态 +1
3.  没有重命名 HTML ID。
4.  干净的 HTML = 没有臃肿，并且在呈现 XHTML 或符合标准的页面方面表现不错。
5.  不再生成 AXD javascript。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2008-09-19T15:19:47.030

对我来说最大的单一优势是模型、视图和控制器层之间的明确分离。它有助于从一开始就促进良好的设计。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2011-04-18T03:46:05.800

我没有看到 MVC 比 ASP.Net 有任何优势。10 年前，微软提出了 UIP（用户界面进程）作为 MVC 的答案。这是一个失败。当时我们用 UIP 做了一个大型项目（4 名开发人员、2 名设计师、1 名测试人员），这简直是一场噩梦。

不要只是为了炒作而加入潮流。上面列出的所有优点都已经在 Asp.Net 中可用（[在 Asp.Net 4 中进行了更多的调整 [Asp.Net 4 中的新功能](http://msdn.microsoft.com/en-us/library/s57a598e.aspx?appId=Dev10IDEF1&l=EN-US&k=k%28MSDNSTART%29&rd=true)]）。

如果您的开发团队或使用 Asp.Net 的单个开发人员家庭只需坚持下去并快速制作精美的产品以满足您的客户（他们为您的工作时间付费）。MVC 会占用您宝贵的时间并产生与 Asp.Net 相同的结果 :-)

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2010-08-18T13:58:14.090

弗朗西斯·沙纳汉

1.  为什么将部分回发称为“废话”？这是 Ajax 的核心特性，在 Atlas 框架和优秀的第三方控件（如 Telerik）中得到了很好的利用

2.  我同意你关于视图状态的观点。但是如果开发人员小心地禁用视图状态，这可以大大减少呈现的 HTML 的大小，从而使页面变得轻量级。

3.  只有 HTML 服务器控件在 ASP.NET Web 窗体模型中被重命名，而不是纯 html 控件。不管它可能是什么，如果重命名完成了，你为什么这么担心？我知道你想在客户端处理大量的 javascript 事件，但是如果你巧妙地设计你的网页，你绝对可以得到你想要的所有 id

4.  甚至 ASP.NET Web 窗体也符合 XHTML 标准，我没有看到任何臃肿。这不是我们为什么需要 MVC 模式的理由

5.  再说一次，你为什么要为 AXD Javascript 烦恼？为什么它会伤害你？这又不是一个有效的理由

到目前为止，我是使用经典 ASP.NET Web 表单开发应用程序的粉丝。例如：如果你想绑定一个下拉列表或者一个gridview，你最多需要30分钟并且不超过20行代码（当然最少）。但是在 MVC 的情况下，与开发人员谈谈它是多么痛苦。

MVC 最大的缺点是我们要回到 ASP 的时代。还记得把 Server 代码和 HTML 混为一谈的意大利面条代码吗？？？哦，我的上帝，尝试阅读混合了 javascript、HTML、JQuery、CSS、服务器标签等等的 MVC aspx 页面……任何人都可以回答这个问题吗？

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2008-09-22T14:30:41.537

Web 表单还得益于 Telerik 等第三方控制提供商的更高成熟度和支持。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2008-10-22T10:15:09.640

在 web 表单中，您还可以手动渲染几乎整个 html，除了一些标签，如 viewstate、eventvalidation 和类似的标签，可以使用 PageAdapters 删除。没有人强迫您使用 GridView 或其他一些具有不良 html 呈现输出的服务器端控件。

我想说 MVC 的最大优势是速度！

接下来是强制分离关注点。但它并不禁止你将整个 BL 和 DAL 逻辑放在 Controller/Action 中！这只是视图的分离，这也可以在 web 表单中完成（例如 MVP 模式）。人们提到的很多关于 mvc 的事情都可以在 webforms 中完成，但需要付出一些额外的努力。
主要区别在于请求来自控制器，而不是视图，并且这两层是分开的，不通过 webforms 中的部分类连接（aspx + 后面的代码）

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2009-03-10T13:54:46.250

我的 2 美分：

*   ASP.net 表单非常适合快速应用程序开发和快速增加业务价值。我仍然将它用于大多数 Intranet 应用程序。
*   MVC 非常适合搜索引擎优化，因为您可以更大程度地控制 URL 和 HTML
*   MVC 通常会生成更精简的页面 - 没有视图状态和更清晰的 HTML = 快速加载时间
*   MVC 容易缓存页面的一部分。-MVC 写起来很有趣 :- 个人意见 ;-)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2009-01-25T23:14:55.703

MVC 让您在一个页面上拥有多个表单，这是我知道的一个小功能，但它很方便！

此外，我觉得 MVC 模式使代码更易于维护，尤其是。当你几个月后重新审视它时。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2011-05-13T20:33:29.350

MVC 控制器：

```
 [HttpGet]
    public ActionResult DetailList(ImportDetailSearchModel model)
    {
        Data.ImportDataAccess ida = new Data.ImportDataAccess();
        List<Data.ImportDetailData> data = ida.GetImportDetails(model.FileId, model.FailuresOnly);

        return PartialView("ImportSummaryDetailPartial", data);
    } 
```

MVC视图：

```
<table class="sortable">
<thead>
    <tr><th>Unique Id</th><th class="left">Error Type</th><th class="left">Field</th><th class="left">Message</th><th class="left">State</th></tr>
</thead>
<tbody>
    @foreach (Data.ImportDetailData detail in Model)
    {
    <tr><th>@detail.UniqueID</th><th class="left">@detail.ErrorType</th><th class="left">@detail.FieldName</th><th class="left">@detail.Message</th><th class="left">@detail.ItemState</th></tr>
    }
</tbody></table> 
```

那有多难？没有 ViewState，没有 BS Page 生命周期……只是纯粹的高效代码。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2010-01-15T04:11:26.283

我可以看到较小站点的唯一两个优势是：6）支持 SEO 的 RESTful url。7) 没有 ViewState 和 PostBack 事件（通常性能更高）

对小型站点进行测试不是问题，无论如何正确编码站点时的设计优势也不是问题，MVC 在许多方面会混淆并且使更改更难进行。我仍在决定这些优势是否值得。

我可以清楚地看到 MVC 在大型多开发人员站点中的优势。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2010-03-29T01:23:45.967

我发现的主要好处是它迫使项目进入一个更可测试的结构。这也可以很容易地通过 web 表单（MVP 模式）来完成，但需要开发人员对此有所了解，很多人不了解。

Webforms 和 MVC 都是可行的工具，它们在不同的领域都表现出色。

我个人使用 Web 表单，因为我们主要开发 B2B/LOB 应用程序。但是我们总是使用 MVP 模式来实现，这样我们的单元测试就可以实现 95% 以上的代码覆盖率。这也使我们能够自动测试 webcontrols 的属性，属性值通过视图暴露，例如

```
bool IMyView.IsAdminSectionVisible{
       get{return pnlAdmin.Visible;}
       get{pnlAdmin.Visible=value;}
    } 
```

) 我不认为这种级别的测试在 MVC 中很容易实现，而不会污染我的模型。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-01-25T06:29:09.283

您不再对使用“非回发控件”感到难过 - 并弄清楚如何将它们混入传统的 asp.net 环境。

[这](http://developer.yahoo.com/yui/examples/calendar/quickstart.html)意味着现代（免费使用）javascript 控件可以[全部](http://developer.yahoo.com/yui/examples/datatable/dt_basic.html)使用[，](http://developer.yahoo.com/yui/examples/colorpicker/colorpicker-fromscript.html)而无需尝试在方孔中安装圆钉。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2011-08-29T08:59:57.273

现代 javascript 控件以及 JSON 请求可以使用 MVC 轻松处理。在那里，我们可以使用许多其他机制将数据从一个动作发布到另一个动作。这就是为什么我们更喜欢 MVC 而不是 Web 表单。我们还可以构建轻量级页面。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2011-09-24T15:06:30.603

我个人的看法是，使用 ASP.Net MVC 的最大缺点是与 维护它的开发人员`CODE BLOCKS`混`HTML`... html 地狱...

# c# - 如何从 C# 关闭计算机

> ID：102567
> 
> 赞同：153
> 
> 时间：2008-09-19T15:02:26.650
> 
> 标签：c#, .net, windows, shutdown

从 C# 程序关闭计算机的最佳方法是什么？

我发现了一些有效的方法——我将在下面发布它们——但它们都不是很优雅。我正在寻找更简单和原生的.net 的东西。

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2008-09-19T18:20:09.810

从 windows XP 开始工作，在 win 2000 或更低版本中不可用：

这是最快的方法：

```
Process.Start("shutdown","/s /t 0"); 
```

否则，像其他人所说的那样使用 P/Invoke 或 WMI。

编辑：如何避免创建窗口

```
var psi = new ProcessStartInfo("shutdown","/s /t 0");
psi.CreateNoWindow = true;
psi.UseShellExecute = false;
Process.Start(psi); 
```

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2008-09-19T15:04:18.580

摘自：[Geekpedia 帖子](http://www.geekpedia.com/code36_Shut-down-system-using-Csharp.html)

此方法使用[WMI](http://en.wikipedia.org/wiki/Windows_Management_Instrumentation)关闭窗口。

您需要在项目中添加对 System.Management 的引用才能使用它。

```
using System.Management;

void Shutdown()
{
    ManagementBaseObject mboShutdown = null;
    ManagementClass mcWin32 = new ManagementClass("Win32_OperatingSystem");
    mcWin32.Get();

    // You can't shutdown without security privileges
    mcWin32.Scope.Options.EnablePrivileges = true;
    ManagementBaseObject mboShutdownParams =
             mcWin32.GetMethodParameters("Win32Shutdown");

     // Flag 1 means we want to shut down the system. Use "2" to reboot.
    mboShutdownParams["Flags"] = "1";
    mboShutdownParams["Reserved"] = "0";
    foreach (ManagementObject manObj in mcWin32.GetInstances())
    {
        mboShutdown = manObj.InvokeMethod("Win32Shutdown", 
                                       mboShutdownParams, null);
    }
} 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2008-09-19T15:05:18.687

该线程提供了必要的代码：http: [//bytes.com/forum/thread251367.html](http://bytes.com/forum/thread251367.html)

但这是相关代码：

```
using System.Runtime.InteropServices;

[StructLayout(LayoutKind.Sequential, Pack=1)]
internal struct TokPriv1Luid
{
    public int Count;
    public long Luid;
    public int Attr;
}

[DllImport("kernel32.dll", ExactSpelling=true) ]
internal static extern IntPtr GetCurrentProcess();

[DllImport("advapi32.dll", ExactSpelling=true, SetLastError=true) ]
internal static extern bool OpenProcessToken( IntPtr h, int acc, ref IntPtr
phtok );

[DllImport("advapi32.dll", SetLastError=true) ]
internal static extern bool LookupPrivilegeValue( string host, string name,
ref long pluid );

[DllImport("advapi32.dll", ExactSpelling=true, SetLastError=true) ]
internal static extern bool AdjustTokenPrivileges( IntPtr htok, bool disall,
ref TokPriv1Luid newst, int len, IntPtr prev, IntPtr relen );

[DllImport("user32.dll", ExactSpelling=true, SetLastError=true) ]
internal static extern bool ExitWindowsEx( int flg, int rea );

internal const int SE_PRIVILEGE_ENABLED = 0x00000002;
internal const int TOKEN_QUERY = 0x00000008;
internal const int TOKEN_ADJUST_PRIVILEGES = 0x00000020;
internal const string SE_SHUTDOWN_NAME = "SeShutdownPrivilege";
internal const int EWX_LOGOFF = 0x00000000;
internal const int EWX_SHUTDOWN = 0x00000001;
internal const int EWX_REBOOT = 0x00000002;
internal const int EWX_FORCE = 0x00000004;
internal const int EWX_POWEROFF = 0x00000008;
internal const int EWX_FORCEIFHUNG = 0x00000010;

private void DoExitWin( int flg )
{
    bool ok;
    TokPriv1Luid tp;
    IntPtr hproc = GetCurrentProcess();
    IntPtr htok = IntPtr.Zero;
    ok = OpenProcessToken( hproc, TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, ref htok );
    tp.Count = 1;
    tp.Luid = 0;
    tp.Attr = SE_PRIVILEGE_ENABLED;
    ok = LookupPrivilegeValue( null, SE_SHUTDOWN_NAME, ref tp.Luid );
    ok = AdjustTokenPrivileges( htok, false, ref tp, 0, IntPtr.Zero, IntPtr.Zero );
    ok = ExitWindowsEx( flg, 0 );
    } 
```

用法：

```
DoExitWin( EWX_SHUTDOWN ); 
```

或者

```
DoExitWin( EWX_REBOOT ); 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2009-03-20T09:09:44.710

不同的方法：

一种。`System.Diagnostics.Process.Start("Shutdown", "-s -t 10");`

B. Windows 管理规范 (WMI)

*   [http://www.csharpfriends.com/Forums/ShowPost.aspx?PostID=36953](http://www.csharpfriends.com/Forums/ShowPost.aspx?PostID=36953)
*   [http://www.dreamincode.net/forums/showtopic33948.htm](http://www.dreamincode.net/forums/showtopic33948.htm)

C. System.Runtime.InteropServices Pinvoke

*   [http://bytes.com/groups/net-c/251367-shutdown-my-computer-using-c](http://bytes.com/groups/net-c/251367-shutdown-my-computer-using-c)

D. 系统管理

*   [http://www.geekpedia.com/code36_Shut-down-system-using-Csharp.html](http://www.geekpedia.com/code36_Shut-down-system-using-Csharp.html)

投稿后，看到好多人也发了。。。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2008-09-19T15:05:14.007

短而甜。调用外部程序：

```
 using System.Diagnostics;

    void Shutdown()
    {
        Process.Start("shutdown.exe", "-s -t 00");
    } 
```

注意：这会调用 Windows 的 Shutdown.exe 程序，因此它只有在该程序可用时才能工作。您可能在 Windows 2000（其中 shutdown.exe 仅在资源工具包中可用）或[XP Embedded](http://www.microsoft.com/windowsembedded/en-us/products/wexpe/default.mspx)上遇到问题。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2008-09-19T15:09:07.523

老式的丑陋方法。使用`ExitWindowsEx`Win32 API 中的函数。

```
using System.Runtime.InteropServices;

void Shutdown2()
{
    const string SE_SHUTDOWN_NAME = "SeShutdownPrivilege";
    const short SE_PRIVILEGE_ENABLED = 2;
    const uint EWX_SHUTDOWN = 1;
    const short TOKEN_ADJUST_PRIVILEGES = 32;
    const short TOKEN_QUERY = 8;
    IntPtr hToken;
    TOKEN_PRIVILEGES tkp;

    // Get shutdown privileges...
    OpenProcessToken(Process.GetCurrentProcess().Handle, 
          TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, out hToken);
    tkp.PrivilegeCount = 1;
    tkp.Privileges.Attributes = SE_PRIVILEGE_ENABLED;
    LookupPrivilegeValue("", SE_SHUTDOWN_NAME, out tkp.Privileges.pLuid);
    AdjustTokenPrivileges(hToken, false, ref tkp, 0U, IntPtr.Zero, 
          IntPtr.Zero);

    // Now we have the privileges, shutdown Windows
    ExitWindowsEx(EWX_SHUTDOWN, 0);
}

// Structures needed for the API calls
private struct LUID
{
    public int LowPart;
    public int HighPart;
}
private struct LUID_AND_ATTRIBUTES
{
    public LUID pLuid;
    public int Attributes;
}
private struct TOKEN_PRIVILEGES
{
    public int PrivilegeCount;
    public LUID_AND_ATTRIBUTES Privileges;
}

[DllImport("advapi32.dll")]
static extern int OpenProcessToken(IntPtr ProcessHandle, 
                     int DesiredAccess, out IntPtr TokenHandle);

[DllImport("advapi32.dll", SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool AdjustTokenPrivileges(IntPtr TokenHandle,
    [MarshalAs(UnmanagedType.Bool)]bool DisableAllPrivileges,
    ref TOKEN_PRIVILEGES NewState,
    UInt32 BufferLength,
    IntPtr PreviousState,
    IntPtr ReturnLength);

[DllImport("advapi32.dll")]
static extern int LookupPrivilegeValue(string lpSystemName, 
                       string lpName, out LUID lpLuid);

[DllImport("user32.dll", SetLastError = true)]
static extern int ExitWindowsEx(uint uFlags, uint dwReason); 
```

在生产代码中，您应该检查 API 调用的返回值，但为了使示例更清晰，我将其省略了。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2014-12-31T20:50:34.073

```
System.Diagnostics.Process.Start("shutdown", "/s /t 0") 
```

应该管用。

对于重新启动，它是 /r

这将直接、干净地重新启动 PC 盒，没有对话框。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2017-06-18T12:21:54.747

只是为了添加 Pop Catalin 的答案，这是一个关闭计算机而不显示任何窗口的**衬里：**

```
Process.Start(new ProcessStartInfo("shutdown", "/s /t 0") {
  CreateNoWindow = true, UseShellExecute = false
}); 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2011-08-03T16:01:38.333

请注意，这`shutdown.exe`只是一个包装器[`InitiateSystemShutdownEx`](http://msdn.microsoft.com/en-us/library/aa376874%28v=vs.85%29.aspx)，它提供了一些缺少的细节`ExitWindowsEx`

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2008-09-19T15:04:09.393

您可以启动关机过程：

*   `shutdown -s -t 0` - 关闭
*   `shutdown -r -t 0` - 重新开始

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-05-21T10:48:04.683

我在尝试使用上面接受的 WMI 方法时遇到了麻烦，因为尽管以管理员身份运行程序，但我总是获得特权未持有异常。

解决方案是让进程为自己请求特权。[我在http://www.dotnet247.com/247reference/msgs/58/292150.aspx](http://www.dotnet247.com/247reference/msgs/58/292150.aspx)找到了由 Richard Hill 撰写的答案。

我在下面粘贴了我对他的解决方案的基本用法，以防链接变旧。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Management;
using System.Runtime.InteropServices;
using System.Security;
using System.Diagnostics;

namespace PowerControl
{
    public class PowerControl_Main
    {

        public void Shutdown()
        {
            ManagementBaseObject mboShutdown = null;
            ManagementClass mcWin32 = new ManagementClass("Win32_OperatingSystem");
            mcWin32.Get();

            if (!TokenAdjuster.EnablePrivilege("SeShutdownPrivilege", true))
            {
                Console.WriteLine("Could not enable SeShutdownPrivilege");
            }
            else
            {
                Console.WriteLine("Enabled SeShutdownPrivilege");
            }

            // You can't shutdown without security privileges
            mcWin32.Scope.Options.EnablePrivileges = true;
            ManagementBaseObject mboShutdownParams = mcWin32.GetMethodParameters("Win32Shutdown");

            // Flag 1 means we want to shut down the system
            mboShutdownParams["Flags"] = "1";
            mboShutdownParams["Reserved"] = "0";

            foreach (ManagementObject manObj in mcWin32.GetInstances())
            {
                try
                {
                    mboShutdown = manObj.InvokeMethod("Win32Shutdown",
                                                   mboShutdownParams, null);
                }
                catch (ManagementException mex)
                {
                    Console.WriteLine(mex.ToString());
                    Console.ReadKey();
                }
            }
        }

    }

    public sealed class TokenAdjuster
    {
        // PInvoke stuff required to set/enable security privileges
        [DllImport("advapi32", SetLastError = true),
        SuppressUnmanagedCodeSecurityAttribute]
        static extern int OpenProcessToken(
        System.IntPtr ProcessHandle, // handle to process
        int DesiredAccess, // desired access to process
        ref IntPtr TokenHandle // handle to open access token
        );

        [DllImport("kernel32", SetLastError = true),
        SuppressUnmanagedCodeSecurityAttribute]
        static extern bool CloseHandle(IntPtr handle);

        [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        static extern int AdjustTokenPrivileges(
        IntPtr TokenHandle,
        int DisableAllPrivileges,
        IntPtr NewState,
        int BufferLength,
        IntPtr PreviousState,
        ref int ReturnLength);

        [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        static extern bool LookupPrivilegeValue(
        string lpSystemName,
        string lpName,
        ref LUID lpLuid);

        [StructLayout(LayoutKind.Sequential)]
        internal struct LUID
        {
            internal int LowPart;
            internal int HighPart;
        }

        [StructLayout(LayoutKind.Sequential)]
        struct LUID_AND_ATTRIBUTES
        {
            LUID Luid;
            int Attributes;
        }

        [StructLayout(LayoutKind.Sequential)]
        struct _PRIVILEGE_SET
        {
            int PrivilegeCount;
            int Control;
            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 1)] // ANYSIZE_ARRAY = 1
            LUID_AND_ATTRIBUTES[] Privileges;
        }

        [StructLayout(LayoutKind.Sequential)]
        internal struct TOKEN_PRIVILEGES
        {
            internal int PrivilegeCount;
            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 3)]
            internal int[] Privileges;
        }
        const int SE_PRIVILEGE_ENABLED = 0x00000002;
        const int TOKEN_ADJUST_PRIVILEGES = 0X00000020;
        const int TOKEN_QUERY = 0X00000008;
        const int TOKEN_ALL_ACCESS = 0X001f01ff;
        const int PROCESS_QUERY_INFORMATION = 0X00000400;

        public static bool EnablePrivilege(string lpszPrivilege, bool
        bEnablePrivilege)
        {
            bool retval = false;
            int ltkpOld = 0;
            IntPtr hToken = IntPtr.Zero;
            TOKEN_PRIVILEGES tkp = new TOKEN_PRIVILEGES();
            tkp.Privileges = new int[3];
            TOKEN_PRIVILEGES tkpOld = new TOKEN_PRIVILEGES();
            tkpOld.Privileges = new int[3];
            LUID tLUID = new LUID();
            tkp.PrivilegeCount = 1;
            if (bEnablePrivilege)
                tkp.Privileges[2] = SE_PRIVILEGE_ENABLED;
            else
                tkp.Privileges[2] = 0;
            if (LookupPrivilegeValue(null, lpszPrivilege, ref tLUID))
            {
                Process proc = Process.GetCurrentProcess();
                if (proc.Handle != IntPtr.Zero)
                {
                    if (OpenProcessToken(proc.Handle, TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY,
                    ref hToken) != 0)
                    {
                        tkp.PrivilegeCount = 1;
                        tkp.Privileges[2] = SE_PRIVILEGE_ENABLED;
                        tkp.Privileges[1] = tLUID.HighPart;
                        tkp.Privileges[0] = tLUID.LowPart;
                        const int bufLength = 256;
                        IntPtr tu = Marshal.AllocHGlobal(bufLength);
                        Marshal.StructureToPtr(tkp, tu, true);
                        if (AdjustTokenPrivileges(hToken, 0, tu, bufLength, IntPtr.Zero, ref ltkpOld) != 0)
                        {
                            // successful AdjustTokenPrivileges doesn't mean privilege could be changed
                            if (Marshal.GetLastWin32Error() == 0)
                            {
                                retval = true; // Token changed
                            }
                        }
                        TOKEN_PRIVILEGES tokp = (TOKEN_PRIVILEGES)Marshal.PtrToStructure(tu,
                        typeof(TOKEN_PRIVILEGES));
                        Marshal.FreeHGlobal(tu);
                    }
                }
            }
            if (hToken != IntPtr.Zero)
            {
                CloseHandle(hToken);
            }
            return retval;
        }

    }
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2011-02-24T18:59:19.843

我尝试[了 roomaroo 的 WMI 方法来关闭 Windows 2003 Server，但在我将 `[STAThread]'（即“](https://stackoverflow.com/questions/102567/how-to-shutdown-the-computer-from-c/102583#102583)[单线程单元](http://msdn.microsoft.com/en-us/library/ms680112(v=vs.85).aspx)”线程模型）添加到 Main() 声明之前它不会起作用：

```
[STAThread]
public static void Main(string[] args) {
    Shutdown();
} 
```

然后我尝试从一个线程关闭，为了让它工作，我还必须将线程的“公寓状态”设置为 STA：

```
using System.Management;
using System.Threading;

public static class Program {

    [STAThread]
    public static void Main(string[] args) {
        Thread t = new Thread(new ThreadStart(Program.Shutdown));
        t.SetApartmentState(ApartmentState.STA);
        t.Start();
        ...
    }

    public static void Shutdown() {
        // roomaroo's code
    }
} 
```

我是 C# 菜鸟，所以我不完全确定 STA 线程在关闭系统方面的重要性（即使在阅读了我上面发布的链接之后）。也许其他人可以详细说明...？

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2011-08-05T12:42:36.413

**详细回答...

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
// Remember to add a reference to the System.Management assembly
using System.Management;
using System.Diagnostics;

namespace ShutDown
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void btnShutDown_Click(object sender, EventArgs e)
        {
            ManagementBaseObject mboShutdown = null;
            ManagementClass mcWin32 = new ManagementClass("Win32_OperatingSystem");
            mcWin32.Get();

            // You can't shutdown without security privileges
            mcWin32.Scope.Options.EnablePrivileges = true;
            ManagementBaseObject mboShutdownParams = mcWin32.GetMethodParameters("Win32Shutdown");

            // Flag 1 means we want to shut down the system
            mboShutdownParams["Flags"] = "1";
            mboShutdownParams["Reserved"] = "0";

            foreach (ManagementObject manObj in mcWin32.GetInstances())
            {
                mboShutdown = manObj.InvokeMethod("Win32Shutdown", mboShutdownParams, null);
            }
        }
    }
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-07-29T10:39:34.760

使用关机.exe。为了避免传递参数的问题，复杂的执行，从 WindowForms 执行使用 PowerShell 执行脚本：

```
using System.Management.Automation;
...
using (PowerShell PowerShellInstance = PowerShell.Create())
{
    PowerShellInstance.AddScript("shutdown -a; shutdown -r -t 100;");
    // invoke execution on the pipeline (collecting output)
    Collection<PSObject> PSOutput = PowerShellInstance.Invoke();
} 
```

System.Management.Automation.dll 应安装在操作系统上并在 GAC 中可用。

对不起我的英语不好。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-12-17T19:41:30.620

对于 Windows 10，我需要添加 /f 选项以便在没有任何问题和等待时间的情况下关闭电脑。

```
//This did not work for me
Process.Start("shutdown", "/s /t 0");

//But this worked
Process.Start("shutdown", "/s /f /t 0"); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-19T15:05:35.333

没有用于关闭计算机的 .net 本机方法。您需要 P/Invoke ExitWindows 或 ExitWindowsEx API 调用。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-06-04T04:53:51.590

如果要远程关闭计算机，则可以使用

```
Using System.Diagnostics; 
```

在任何按钮上单击

```
{
    Process.Start("Shutdown","-i");
} 
```

# perl - Perl 中的双下划线是什么？

> ID：102568
> 
> 赞同：5
> 
> 时间：2008-09-19T15:02:28.727
> 
> 标签：perl, syntax

我试图理解别人的 Perl 代码，但我自己却不了解 Perl。我会很感激你的帮助。

我遇到过这样的 Perl 函数：

```
MyFunction($arg1,$arg2__size,$arg3) 
```

中的双下划线语法是否有意义`$arg2`，或者它只是第二个参数名称的一部分？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-19T15:09:46.150

在 perl 变量名中使用 __ 没有特定含义。这可能是程序员的偏好，尤其是在您在问题中引用的情况下。[您可以在此处](http://perldoc.perl.org/perlvar.html#Technical-Note-on-the-Syntax-of-Variable-Names)查看有关 perl 变量命名的更多信息。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-19T15:24:41.217

在大多数语言中，下划线只是标识符的一部分；没有特别的意义。

但是你确定是 Perl 吗？变量上没有任何符号。您可以发布更多上下文吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-19T15:28:45.450

就解释器而言，下划线只是标识符中允许的另一个字符。它可以用作连接或驼峰式大小写的替代方法，以形成多字标识符。

前导下划线通常用于表示标识符仅供本地使用，*例如*用于模块的非导出部分。这只是一个约定；口译员不在乎。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-19T17:35:16.627

在您的问题的上下文中，双下划线没有任何程序意义。双下划线对于 Perl 中有限数量的值确实意味着一些特殊的东西，尤其是`__FILE__`& `__LINE__`。这些是不以印记 ( `$`,`%`或`@`) 为前缀的特殊文字，仅在引号之外插入。它们包含当前执行文件的完整路径和名称以及正在执行的行。[请参阅perldata](http://perldoc.perl.org/perldata.html)中的“特殊文字”部分或[Perl Monks 上的这篇文章](http://www.perlmonks.org/?node_id=295986)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-19T15:04:15.303

我相当肯定 arg2__size 只是一个变量的名称。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-19T22:52:56.130

马克的回答当然是正确的，没有什么特殊含义。

但我想指出，您的示例根本不像 Perl。Perl 变量不是空话。正如您从上面的链接中看到的那样，他们有印记。Perl 没有“函数”，它有子程序。

因此，对于我们谈论的是哪种语言，可能会有一些混淆。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-06-09T04:58:01.343

您需要告诉解释器“$arg2”是变量的名称。而不是“$arg2__size”。为此，您将需要使用括号。（这种用法类似于在 shell 中看到的）。

这应该工作 MyFunction($arg1,${arg2}__size,$arg3)

——比努

# asp.net - ASP.NET 控件/页面库问题

> ID：102587
> 
> 赞同：1
> 
> 时间：2008-09-19T15:04:44.477
> 
> 标签：asp.net

我正在开发一个包含预定义页面和可用控件的程序集。我在创建服务器控件方面没有任何困难，但我想知道在程序集中处理页面的“最佳实践”是什么。您可以将页面编译成程序集并将其作为 dll 发布吗？从客户端浏览器的角度来看，就他们将键入或通过链接定向到的地址而言，如何访问它？例如，我有一个简单的登录页面，其中包含标准用户名和密码文本框、登录按钮和“记住我”复选框，以及“我不记得我的用户名和/或密码”超链接。我可以像访问网络资源一样访问该页面吗？例如“ [http://www.site.name/webresource.axd?related_resource_id_codes](http://www.site.name/webresource.axd?related_resource_id_codes) ”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T15:19:42.087

如果您希望能够对其进行编码并将其视为真实页面，那么您最好的选择是实现一个[VirtualPathProvider](http://msdn.microsoft.com/en-us/library/system.web.hosting.virtualpathprovider.aspx)。使用 virtualpathprovider 将允许您将实际的 aspx 作为资源嵌入（或将其放入数据库中，等等）并从那里提供服务，并且仍然使用 asp.net 页面编译引擎。

这将使您仍然可以轻松地使用 Visual Studio 设计时工具，并避免您必须进行大量的构建自定义来预编译页面。你也可以在这里看到

如果您不想这样做，您可以尝试使用 aspnet_compiler 工具将 aspx 和此类页面预编译为 dll。这将需要一些构建自定义，以及允许从 dll 提供页面的技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T15:18:18.267

您可以将 httpHandler 元素添加到指向您的页面的 web.config。就像是：

```
<httpHandlers>
   <add verb="*" path="login.aspx" type="MyPages.LoginPage, MyPages" />
</httpHandlers> 
```

# sql - SQL 剥离文本并转换为整数

> ID：102591
> 
> 赞同：2
> 
> 时间：2008-09-19T15:04:51.997
> 
> 标签：sql, text, strip

在我的数据库（SQL 2005）中，我有一个包含评论的字段，但在评论中我有一个 id，我想只删除 id，如果可能将其转换为 int：

`activation successful of id 1010101`

上面的行是 db 字段中数据的确切结构。

不，我不想在应用程序的代码中这样做，我实际上不想碰它，以防万一你想知道;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T15:18:04.693

这应该可以解决问题：

```
SELECT SUBSTRING(column, PATINDEX('%[0-9]%', column), 999)
FROM table 
```

根据您的示例数据，字符串中仅出现一次整数并且它位于末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T15:15:42.920

```
-- Test table, you will probably use some query  
DECLARE @testTable TABLE(comment VARCHAR(255))  
INSERT INTO @testTable(comment)  
    VALUES ('activation successful of id 1010101')

-- Use Charindex to find "id " then isolate the numeric part  
-- Finally check to make sure the number is numeric before converting  
SELECT CASE WHEN ISNUMERIC(JUSTNUMBER)=1 THEN CAST(JUSTNUMBER AS INTEGER) ELSE -1 END  
FROM (  
       select right(comment, len(comment) - charindex('id ', comment)-2) as justnumber  
       from @testtable) TT 
```

我还要补充一点，这种方法更基于集合，因此对于一堆数据值更有效。但是，仅将一个值作为变量就可以非常容易地做到这一点。您可以使用变量，而不是使用列注释`@chvComment`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T15:15:47.040

我目前没有办法对其进行测试，但是：

```
select convert(int, substring(fieldName, len('activation successful of id '), len(fieldName) - len('activation successful of id '))) from tableName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T15:19:59.230

如果注释字符串完全一样，您可以使用替换。

```
select   replace(comment_col, 'activation successful of id ', '') as id from .... 
```

但几乎可以肯定不会——不成功的激活怎么办？您可能会得到嵌套的替换语句

```
select   replace(replace(comment_col, 'activation not successful of id ', ''), 'activation successful of id ', '') as id from .... 
```

[抱歉无法从这个编辑屏幕判断这是否是完全有效的 sql]

这开始变得一团糟；您可能会考虑创建一个函数并将替换语句放入其中。

如果这是一次性工作，那真的没关系。您也可以使用正则表达式，但这很慢（无论如何意味着您现在有两个问题）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T15:21:21.440

你愿意写一点代码吗？一种选择是创建 CLR 用户定义函数，然后使用正则表达式。您可以[在此处](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx)找到更多详细信息。这将处理复杂的字符串。

如果您的上述行始终格式化为“id ####### 激活成功”，并且您的号码位于字段末尾，则：

```
declare @myColumn varchar(100)
set @myColumn = 'activation successful of id 1010102'

SELECT
    @myColumn as [OriginalColumn]
,   CONVERT(int, REVERSE(LEFT(REVERSE(@myColumn), CHARINDEX(' ', REVERSE(@myColumn))))) as [DesiredColumn] 
```

会给你：

```
OriginalColumn                           DesiredColumn
---------------------------------------- -------------
activation successful of id 1010102      1010102

(1 row(s) affected) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T15:25:35.160

```
CAST(REVERSE(LEFT(REVERSE(@Test),CHARINDEX(' ',REVERSE(@Test))-1)) AS INTEGER) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-19T15:27:09.757

```
select cast(right(column_name,charindex(' ',reverse(column_name))) as int) 
```

# sql-server - 学习分析服务

> ID：102600
> 
> 赞同：3
> 
> 时间：2008-09-19T15:05:25.193
> 
> 标签：sql-server, reporting-services, ssas, cubes

任何人都可以推荐一个好的资源——书籍、网站、文章等——来帮助我学习 SQL Server 分析服务。

我现在对这项技术一无所知，但我确实经常使用传统意义上的 SQL Server。

我想了解多维数据集并使用 Reporting Services。我想从最底层开始，但是在我完成材料之后，理想情况下，我能够偶然发现一个真正的开发项目......

我希望从免费资源开始，但如果有人知道一本**非常好的**书，我也会接受。

或者，如果您不知道某个资源，您是如何开始使用该技术的？

谢谢你，
弗兰克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T21:59:23.457

[在此处](https://stackoverflow.com/questions/101242/nice-book-on-sql-server-analysis-services)查看我为回答类似问题而编译的 AS 资源列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-19T15:09:22.703

相当优秀的书：

[带有 MDX 的专业 SQL Server Analysis Services 2005](https://rads.stackoverflow.com/amzn/click/com/0764579185)

为您提供 SSAS 体系结构、查询语言 MDX 和管理/维护概述的良好概述。对于开发人员或系统管理员来说是一本很好的入门书。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-20T02:13:09.207

我个人最喜欢的关于该主题的书是[Microsoft SQL Server 2005 Analysis Services](https://rads.stackoverflow.com/amzn/click/com/0672327821 "Microsoft SQL Server 2005 分析服务")

一旦您开始了解有关该技术和 MDX 的更多信息，Mosha Pasumansky 的博客就是一个很好的资源

[http://sqlblog.com/blogs/mosha/default.aspx](http://sqlblog.com/blogs/mosha/default.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T15:08:01.397

这是[在线分析服务书籍](http://msdn.microsoft.com/en-us/library/ms175609(SQL.90).aspx)的链接。这是一个不错的资源，而且完全免费。

# javascript - 我可以使用客户端 Javascript 执行 DNS 查找（主机名到 IP 地址）吗？

> ID：102605
> 
> 赞同：101
> 
> 时间：2008-09-19T15:06:16.250
> 
> 标签：javascript, dns

我想使用客户端 Javascript 来执行从客户端计算机上看到的 DNS 查找（主机名到 IP 地址）。那可能吗？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2008-09-19T15:14:55.637

**编辑**：这个问题让我很痒，所以我在 Google App Engine 上建立了一个 JSONP 网络服务，它返回客户端的 IP 地址。用法：

```
<script type="application/javascript">
function getip(json){
  alert(json.ip); // alerts the ip address
}
</script>

<script type="application/javascript" src="http://jsonip.appspot.com/?callback=getip"> </script> 
```

是的，不需要服务器代理。

* * *

纯JS不行。如果您在打印它的同一域下有一个服务器脚本，您可以发送一个 XMLHttpRequest 来读取它。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2019-10-09T08:18:48.517

我知道很久以前有人问过这个问题，但我想我会提供一个更新的答案。

### HTTPS 上的 DNS (DoH)

您可以通过 HTTPS 向支持它的 DNS 解析器发送 DNS 查询。[RFC 8484](https://www.rfc-editor.org/rfc/rfc8484)中描述了 DOH 的标准。

这与所有其他答案所暗示的类似，只是 DoH 实际上是 HTTPS 上的 DNS 协议。它也是一个“提议的”互联网标准，并且变得非常流行。例如，一些主流浏览器要么支持它，要么计划支持它（Chrome、Edge、Firefox），微软正在将它构建到他们的操作系统中。

DoH 的目的之一是：

> 允许 Web 应用程序以与跨源资源共享 (CORS) 一致的安全方式通过现有浏览器 API 访问 DNS 信息

有一个开源工具专门用于从称为[dohjs](https://github.com/byu-imaal/dohjs)的 Web 应用程序中进行 DNS 查找。它执行[RFC 8484中所述的](https://www.rfc-editor.org/rfc/rfc8484)**DNS over HTTPS** (DoH) 有线格式查询。它同时支持 GET 和 POST 方法。

全面披露：我是 dohjs 的贡献者。

在这里可以找到另一个具有类似功能的 JavaScript 库 - [https://github.com/sc0Vu/doh-js-client](https://github.com/sc0Vu/doh-js-client)。我没有亲自使用过这个，但我认为它也可以在客户端工作。

### DNS over HTTPS JSON API

如果您不想打扰 DNS 有线格式，Google 和 Cloudflare 都为基于 HTTPS 的 DNS 提供 JSON API。

*   谷歌的端点：[https](https://dns.google/resolve) ://dns.google/resolve ?
*   谷歌的 JSON API 文档：[https ://developers.google.com/speed/public-dns/docs/doh/json](https://developers.google.com/speed/public-dns/docs/doh/json)
*   Cloudflare 的端点：[https](https://cloudflare-dns.com/dns-query) ://cloudflare-dns.com/dns-query ?
*   Cloudflare 的 JSON API 文档：[https ://developers.cloudflare.com/1.1.1.1/dns-over-https/json-format/](https://developers.cloudflare.com/1.1.1.1/dns-over-https/json-format/)

使用 Google 的 JSON DOH API 查找 example.com 的示例 Javascript 代码：

```
var response = await fetch('https://dns.google/resolve?name=example.com');
var json = await response.json();
console.log(json); 
```

### DOH GET 和 POST 的 RFC 中带有线格式的示例

以下是 RFC 为 GET 和 POST 提供的示例（请参阅[https://www.rfc-editor.org/rfc/rfc8484#section-4.1.1](https://www.rfc-editor.org/rfc/rfc8484#section-4.1.1)）：

获取示例：

> 第一个示例请求使用 GET 请求“www.example.com”。

> :method = GET
> :scheme = https
> :authority = dnsserver.example.net
> :path = /dns-query?dns=AAABAAABAAAAAAAAA3d3dwdleGFtcGxlA2NvbQAAAQAB
> accept = application/dns-message

发布示例：

> 使用 POST 方法对“www.example.com”进行相同的 DNS 查询将是：

> :method = POST
> :scheme = https
> :authority = dnsserver.example.net
> :path = /dns-query
> 接受 = application/dns-message
> content-type = application/dns-message
> content-length = 33

> <33字节由以下十六进制编码表示> 00 00 01 00 00 01 00 00 00 00 00 00 03 77 77 77 07 65 78 61 6d 70 6c 65 03 63 6f 6d 00 00 01 00 01

### 其他发送 DOH 查询的地方

您可以在几个地方找到一些支持 DNS over HTTPS 的公共 DNS 解析器列表：

*   [DNSCrypt在他们的 Github 上](https://github.com/DNSCrypt/dnscrypt-resolvers)有一个很长的公共 DoH 和 DNSCrypt 解析器列表，在[https://dnscrypt.info/public-servers/](https://dnscrypt.info/public-servers/)上有一个很好的交互式版本列表
*   [维基百科 - 公共递归名称服务器的比较](https://en.wikipedia.org/wiki/Public_recursive_name_server)
*   [在 Curl 的 wiki 上列出](https://github.com/curl/curl/wiki/DNS-over-HTTPS#publicly-available-servers)
*   [dnsprivacy.org 上的（简短）列表](https://dnsprivacy.org/wiki/display/DP/DNS+Privacy+Public+Resolvers#DNSPrivacyPublicResolvers-DNS-over-HTTPS(DoH))

Of the above resources, I'd say that the list on Curl's wiki and the DNSCrypt list are are probably the most complete and the most frequently updated. Curl's page also includes a list of open source tools for DoH (servers, proxies, client libs, etc).

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2008-09-19T15:13:49.867

javascript 标准库中没有主机或 IP 地址的概念。因此，您必须访问一些外部服务才能为您查找主机名。

我建议托管一个 cgi-bin，它会查找主机名的 ip 地址并通过 javascript 访问它。

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2014-09-21T17:58:54.130

很晚了，但我想很多人还是会通过“谷歌航空”登陆这里。一种现代方法是使用不需要服务器支持的 WebRTC。

[https://hacking.ventures/local-ip-discovery-with-html5-webrtc-security-and-privacy-risk/](https://hacking.ventures/local-ip-discovery-with-html5-webrtc-security-and-privacy-risk/)

下一个代码是来自[http://net.ipcalf.com/的复制和粘贴](http://net.ipcalf.com/)

```
// NOTE: window.RTCPeerConnection is "not a constructor" in FF22/23
var RTCPeerConnection = /*window.RTCPeerConnection ||*/ window.webkitRTCPeerConnection || window.mozRTCPeerConnection;

if (RTCPeerConnection) (function () {
    var rtc = new RTCPeerConnection({iceServers:[]});
    if (window.mozRTCPeerConnection) {      // FF needs a channel/stream to proceed
        rtc.createDataChannel('', {reliable:false});
    };  

    rtc.onicecandidate = function (evt) {
        if (evt.candidate) grepSDP(evt.candidate.candidate);
    };  
    rtc.createOffer(function (offerDesc) {
        grepSDP(offerDesc.sdp);
        rtc.setLocalDescription(offerDesc);
    }, function (e) { console.warn("offer failed", e); }); 

    var addrs = Object.create(null);
    addrs["0.0.0.0"] = false;
    function updateDisplay(newAddr) {
        if (newAddr in addrs) return;
        else addrs[newAddr] = true;
        var displayAddrs = Object.keys(addrs).filter(function (k) { return addrs[k]; }); 
        document.getElementById('list').textContent = displayAddrs.join(" or perhaps ") || "n/a";
    }   

    function grepSDP(sdp) {
        var hosts = []; 
        sdp.split('\r\n').forEach(function (line) { // c.f. http://tools.ietf.org/html/rfc4566#page-39
            if (~line.indexOf("a=candidate")) {     // http://tools.ietf.org/html/rfc4566#section-5.13
                var parts = line.split(' '),        // http://tools.ietf.org/html/rfc5245#section-15.1
                    addr = parts[4],
                    type = parts[7];
                if (type === 'host') updateDisplay(addr);
            } else if (~line.indexOf("c=")) {       // http://tools.ietf.org/html/rfc4566#section-5.7
                var parts = line.split(' '), 
                    addr = parts[2];
                updateDisplay(addr);
            }   
        }); 
    }   
})(); else {
    document.getElementById('list').innerHTML = "<code>ifconfig | grep inet | grep -v inet6 | cut -d\" \" -f2 | tail -n1</code>";
    document.getElementById('list').nextSibling.textContent = "In Chrome and Firefox your IP should display automatically, by the power of WebRTCskull.";
} 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2011-08-18T20:08:43.080

托管的 JSONP 版本就像一个魅力，但它似乎在大多数日子（东部时间）的夜间会占用它的资源，所以我不得不创建自己的版本。

这就是我用 PHP 完成它的方式：

```
<?php
header('content-type: application/json; charset=utf-8');

$data = json_encode($_SERVER['REMOTE_ADDR']);
echo $_GET['callback'] . '(' . $data . ');';
?> 
```

那么 Javascript 和之前完全一样，只是不是数组：

```
<script type="application/javascript">
function getip(ip){
    alert('IP Address: ' + ip);
}
</script>

<script type="application/javascript" src="http://www.anotherdomain.com/file.php?callback=getip"> </script> 
```

就那么简单！

旁注：如果您在任何面向公众的环境中使用它，请务必清理您的 $_GET！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-07-06T20:15:24.270

有一个第三方服务提供了一个 CORS 友好的 REST API 来从浏览器执行 DNS 查找 - [https://exana.io/tools/dns/](https://exana.io/tools/dns/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-22T09:24:07.003

我知道这是一个老问题，但我的解决方案可能会对其他人有所帮助。

我发现让这一切变得简单的 JSON(P) 服务不会永远持续下去，但在撰写本文时，以下 JavaScript 对我来说效果很好。

```
<script type="text/javascript">function z (x){ document.getElementById('y').innerHTML=x.query }</script>
<script type='text/javascript' src='http://ip-api.com/json/zero.eu.org?callback=z'></script> 
```

上面将我的服务器的 IP 写在它所在的页面上，但是可以通过将“zero.eu.org”更改为另一个域名来修改脚本以查找任何 IP。这可以在我的页面上看到：http: [//meon.zero.eu.org/](http://meon.zero.eu.org/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-01-17T09:19:30.530

正如许多人所说，您需要使用外部服务并调用它。这只会从服务器的角度为您提供 DNS 解析。

如果这足够好，并且您只需要 DNS 解析，您可以使用以下 Docker 容器：

[https://github.com/kuralabs/docker-webaiodns](https://github.com/kuralabs/docker-webaiodns)

**端点：**

`[GET] /ipv6/[domain]`：对给定域执行 DNS 解析并返回关联的 IPv6 地址。

```
 {
     "addresses": [
         "2a01:91ff::f03c:7e01:51bd:fe1f"
     ]
 } 
```

`[GET] /ipv4/[domain]`：对给定域执行 DNS 解析并返回相关的 IPv4 地址。

```
 {
     "addresses": [
         "139.180.232.162"
     ]
 } 
```

我的建议是您将 Web 服务器设置为反向代理到服务器中为您的 Javascript 提供服务的特定端点上的容器，并使用您的标准 Javascript Ajax 函数调用它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-08-14T16:21:42.323

有一个 JavaScript 库[DNS-JS.com](https://DNS-JS.com)就是这样做的。

```
DNS.Query("dns-js.com",
    DNS.QueryType.A,
    function(data) {
        console.log(data);
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-19T15:14:02.893

这样做需要破坏浏览器沙箱。尝试让您的服务器进行查找并通过 XmlHttp 从客户端请求。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-04T22:11:15.940

自 v60 以来，Firefox 有一个内置的 API，用于 WebExtensions：

[https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/dns/resolve](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/dns/resolve)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-04-02T13:15:05.283

确保您可以通过使用这种 dns 方法而无需使用任何添加，只需纯 javascript，`browser.dns.resolve("example.com");` 但它仅与 FIREFOX 60 兼容，您可以在 MDN [https://developer.mozilla.org/en-US/docs上查看更多信息/Mozilla/附加组件/WebExtensions/API/dns/resolve](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/dns/resolve)

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2008-09-19T15:12:22.023

出于安全原因，我认为大多数浏览器都不允许这样做，正如问题所要求的那样，在纯 JavaScript 上下文中。

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2013-09-05T22:13:02.870

也许我错过了重点，但在这里回复 NAVY 的人是浏览器如何告诉你“请求者”的 IP 地址（尽管可能只有他们的服务提供商）。

在页面中放置一个脚本标签，由调用（有 src 指向）另一个负载不平衡的服务器的客户端呈现（我意识到这意味着您需要访问第二台服务器，但是这些天托管很便宜，您可以轻松且便宜地进行设置）。

这是需要添加到客户端页面的代码类型：

在另一台服务器“someServerIown”上，您需要拥有 ASP、ASPX 或 PHP 页面；

----- 包含这样的服务器代码：

"<% Response.Write("var clientipaddress = '" & Request.ServerVariables("REMOTE_ADDR") & "';") %>" （没有外部 dbl 引号 :-)）

---- 并将这段代码写回脚本标签：

```
 var clientipaddress = '178.32.21.45'; 
```

这有效地创建了一个 Javascript 变量，您可以在页面上使用 Javascript 访问该变量。

希望您访问此 var 并将值写入准备发送回的表单控件。

当用户发布或收到下一个请求时，您的 Javascript 和/或表单将“otherServerIown”为您填写的变量的值发送回您想要的服务器。

这就是我如何绕过我们拥有的愚蠢的负载均衡器，它掩盖了客户端 IP 地址并使其看起来像负载均衡器的地址......愚蠢......愚蠢愚蠢愚蠢！

我没有给出确切的解决方案，因为每个人的情况都有点不同。然而，这个概念是合理的。另外，请注意，如果您在 HTTPS 页面上执行此操作，您的“otherServerIOwn”也必须以该安全形式交付，否则客户端会收到混合内容的警报。如果您确实有 https，请确保您的所有证书都有效，否则客户端也会收到警告。

希望它可以帮助某人！抱歉，花了一年的时间来回答/贡献。:-)

* * *

## 回答 #15

> 赞同：-4
> 
> 时间：2014-05-29T16:17:51.080

我的版本是这样的：

我的服务器上的php：

```
<?php
    header('content-type: application/json; charset=utf-8');

    $data = json_encode($_SERVER['REMOTE_ADDR']);

    $callback = filter_input(INPUT_GET, 
                 'callback',
                 FILTER_SANITIZE_STRING, 
                 FILTER_FLAG_ENCODE_HIGH|FILTER_FLAG_ENCODE_LOW);
    echo $callback . '(' . $data . ');';
?> 
```

页面上的 jQuery：

```
var self = this;
$.ajax({
    url: this.url + "getip.php",
    data: null,
    type: 'GET',
    crossDomain: true,
    dataType: 'jsonp'

}).done( function( json ) {

    self.ip = json;

}); 
```

它可以跨域工作。它可以使用状态检查。正在努力。

* * *

## 回答 #16

> 赞同：-13
> 
> 时间：2008-09-19T15:12:50.057

如果客户端安装了 Java，您可以执行以下操作：

```
ipAddress = java.net.InetAddress.getLocalHost().getHostAddress(); 
```

除此之外，您可能必须使用服务器端脚本。

# xml - 基于属性满足条件的节点数

> ID：102606
> 
> 赞同：3
> 
> 时间：2008-09-19T15:06:25.767
> 
> 标签：xml, xslt, loops, xpath, conditional-statements

下面是我正在使用[PHP 的 XSLTProcessor](http://php.net/XSLTProcessor)处理的 XML 的一部分：

```
<result>
    <uf x="20" y="0"/>
    <uf x="22" y="22"/>
    <uf x="4" y="3"/>
    <uf x="15" y="15"/>
</result> 
```

我需要知道在 x == y 的位置存在多少个“uf”节点。

在上面的示例中，这将是 2。

我试过循环和增加一个计数器变量，但我不能重新定义变量。

我尝试了很多 xsl:number 和 count/from 的组合，但无法正确获取 XPath 表达式。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-19T15:18:10.247

```
<xsl:value-of select="count(/result/uf[@y=@x])" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T15:18:09.593

```
count('/result/uf[@x = @y]') 
```

# c# - Winforms 消息框的形状

> ID：102614
> 
> 赞同：1
> 
> 时间：2008-09-19T15:07:32.723
> 
> 标签：c#, winforms

我正在寻找一种方法来控制 Winforms 中简单 MessageBox 的形状。我想控制传入的文本换行的位置，以使对话框矩形更窄。Windows 似乎希望在包装文本之前使对话框尽可能宽。有没有一种简单的方法来控制对话框的最大宽度而无需创建我自己的自定义表单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T15:08:44.483

您可以在文本中嵌入换行符以强制它在某个点换行。例如

```
"message text...\nmore text..." 
```

更新：我发布认为这是一个 win32 API 问题，但我认为该原则仍然适用。我假设 WinForms 最终会调用 MessageBox()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T15:09:46.710

真的只有两种方式（理智的方式）

1）自己在字符串中添加换行符以限制每行的长度。

2）制作自己的表格并使用它而不是消息框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T15:09:10.207

如果您在传递的字符串消息中添加自己的换行符会发生什么？如果我没记错的话，我很确定这会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T15:09:42.577

[This](https://stackoverflow.com/questions/102614/shape-of-a-winforms-messagebox#102622)，或者创建您自己的表单并使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-01-04T14:56:36.673

\n 换行符将为您提供足够的灵活性，然后执行此操作。我经常使用这个。例如。如果我给出警告，第一行将给出警告，下一行将给出内部错误消息或适当的进一步信息。如果您不这样做，您最终会得到一个非常宽且高度非常低的消息框！

MessageBox 只有有限的可变性 - 例如。按钮类型和图标。如果您需要更多，请创建您自己的。然后，您可以执行各种操作，例如添加 URL、帮助按钮等。

# c# - 如何在 C# (.NET 2.0) 中获取给定 TableAdaptor 和 SqlDataAdaptor 的 Sql 命令对象

> ID：102623
> 
> 赞同：0
> 
> 时间：2008-09-19T15:08:58.350
> 
> 标签：c#, sql, exception, reflection, error-handling

我正在为我们的应用程序创建一个通用的错误处理/日志记录类。目标是记录异常信息、有关类和函数（以及参数）的信息，以及有关`System.Data.SqlClient.SqlCommand`对象的信息（如果相关）。

我希望能够处理传入`SqlCommands`,`TableAdaptors`和`SqlDataAdaptors`.

我是使用反射的新手，我知道可以做到这一点，我只是不知道如何去做。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-19T15:21:34.623

这就是你在说的吗？

```
SqlDataAdapter da = new SqlDataAdapter();
var cmd1 = ((IDbDataAdapter)da).DeleteCommand;
var cmd2 = ((IDbDataAdapter)da).UpdateCommand;
var cmd3 = ((IDbDataAdapter)da).SelectCommand;
var cmd4 = ((IDbDataAdapter)da).InsertCommand; 
```

SqlDataAdapter 实现 IDbDataAdapter，它具有所有 CRUD 命令的 getter/setter。SqlDataAdapter 显式实现这些，因此它们不会出现在类的签名中，除非您首先将其强制转换为接口。无需反思。

# sql-server - 源列“PAT_NUM_ADT”的区域设置 ID“0”与目标列“PAT_ID_OLD”的区域设置 ID“1033”不匹配

> ID：102626
> 
> 赞同：7
> 
> 时间：2008-09-19T15:09:05.777
> 
> 标签：sql-server, locale

当我使用, 和另一个表名进行**批量插入时出现此错误：**`select * from [table_name]`

```
the locale id '0' of the source column 'PAT_NUM_ADT' and the locale id '1033' 
of the destination column 'PAT_ID_OLD' do not match 
```

我尝试重置我的数据库排序规则，但这没有帮助。

有没有人看到这个错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2010-01-14T19:45:11.940

如果您要从一个表复制不到一组完整的字段到另一个，无论该表是在世界各地的另一个域中，还是并置在同一个数据库中，您只需按顺序选择它们。SqlBulkCopyColumnMappings 不起作用。是的，我试过了。我使用了所有四个可能的构造函数，并将它们都用作 SqlBulkCopyMapping 对象，并且只是通过向 SqlBulkCopy.ColumnMappings.Add 的 Add 方法提供相同的信息。

我的列名称相同。如果您使用不同的名称和不同的顺序，您可能会发现您实际上必须重命名列。祝你好运。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-01-20T21:29:48.063

批量复制一些数据时，我刚刚收到此错误消息。虽然它可能与您遇到的问题不完全相同，但我遇到了同样的错误。

具体来说，我正在执行以下操作：SELECT NULL AS ColumnName ...

目标是一个可为空的 varchar(3)。

在这种情况下，我需要做的就是按如下方式更新我的选择语句：SELECT CONVERT(VARCHAR(3),NULL) AS ColumnName...

这工作得很好，错误消息消失了！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-11-24T12:52:56.993

没错，当我们使用 SqlBulkCopy 时，有时它会出错，这是使用 SqlBulkCopy 时映射列的最佳方式。

我以前的代码：

```
SqlConnectionStringBuilder cb = new SqlConnectionStringBuilder("Data Source=ServerName;User Id=userid;Password=****;Initial Catalog=Deepak; Pooling=true; Max pool size=200; Min pool size=0");

        SqlConnection con = new SqlConnection(cb.ConnectionString);

        SqlCommand cmd = new SqlCommand("select Name,Class,Section,RollNo from Student", con);

        con.Open();

        SqlDataReader rdr = cmd.ExecuteReader();

        SqlBulkCopy sbc = new SqlBulkCopy("Data Source=DestinationServer;User Id=destinationserveruserid;Password=******;Initial Catalog=DeepakTransfer; Pooling=true; Max pool size=200; Min pool size=0");

        sbc.DestinationTableName = "StudentTrans";

        sbc.WriteToServer(rdr);

        sbc.Close();
        rdr.Close();
        con.Close(); 
```

代码给我的错误是：源列“RollNo”的区域设置 ID“0”和目标列“部分”的区域设置 ID“1033”不匹配。

现在在列映射后我的代码运行成功。

我的修改代码是：

```
SqlConnectionStringBuilder cb = new SqlConnectionStringBuilder("Data Source=ServerName;User Id=userid;Password=****;Initial Catalog=Deepak;");

        SqlConnection con = new SqlConnection(cb.ConnectionString);

        SqlCommand cmd = new SqlCommand("select Name,Class,Section,RollNo from Student", con);

        con.Open();

        SqlDataReader rdr = cmd.ExecuteReader();

        SqlBulkCopy sbc = new SqlBulkCopy("Data Source=DestinationServer;User Id=destinationserveruserid;Password=******;Initial Catalog=DeepakTransfer;");

        sbc.DestinationTableName = "StudentTrans";

        sbc.ColumnMappings.Add("Name", "Name");
        sbc.ColumnMappings.Add("Class", "Class");
        sbc.ColumnMappings.Add("Section", "Section");
        sbc.ColumnMappings.Add("RollNo", "RollNo");

        sbc.WriteToServer(rdr);
        sbc.Close();
        rdr.Close();
        con.Close(); 
```

此代码运行成功。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-01-19T22:58:32.267

萨尔的回答

> 如果您要从一个表复制不到一组完整的字段到另一个，无论该表是在世界各地的另一个域中，还是并置在同一个数据库中，您只需按顺序选择它们。SqlBulkCopyColumnMappings 不起作用。

根据我的工作是绝对正确的！感谢您发布它。一切都必须相同 - 数据类型等。每次发现不匹配时，它都会抛出神秘的 Locale Id 错误 - 有趣但令人沮丧的是 h###。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-13T14:40:21.387

我遇到了同样的错误，结果我正在从 DataTable 中的 VARCHAR 列复制到 INT。

在我更改数据类型后，它完美无缺。我成功复制了字段子集，指定了正确的字段映射（映射由字段名称或序列号工作）。

因此，请确保您的数据类型正确。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T15:14:19.757

我会检查您的默认语言环境设置是什么。此外，您需要使用 sp_help 检查两个表的语言环境，以验证它们是否相同。如果不是，您需要将其转换为正确的语言环境

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-08-25T10:13:21.787

当您更改数据库的排序规则时，表列会保留旧的排序规则，因此您需要删除表并重新创建它们。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-10T13:34:52.440

非常感谢 Deepak Dwivedi 的帮助。这里有更多关于**COLLATE DATABASE_DEFAULT**的技巧，它最终为我解决了问题：

```
SqlConnectionStringBuilder cb = new SqlConnectionStringBuilder("Data Source=ServerName;User Id=userid;Password=****;Initial Catalog=Deepak;");
SqlConnection con = new SqlConnection(cb.ConnectionString);
SqlCommand cmd = new SqlCommand("select Name COLLATE DATABASE_DEFAULT Name ,Class COLLATE DATABASE_DEFAULT Class ,Section COLLATE DATABASE_DEFAULT Section ,RollNo COLLATE DATABASE_DEFAULT RollNo  from Student", con);
con.Open();
SqlDataReader rdr = cmd.ExecuteReader();
SqlBulkCopy sbc = new SqlBulkCopy("Data Source=DestinationServer;User Id=destinationserveruserid;Password=******;Initial Catalog=DeepakTransfer;");

sbc.DestinationTableName = "StudentTrans";

sbc.ColumnMappings.Add("Name", "Name");
sbc.ColumnMappings.Add("Class", "Class");
sbc.ColumnMappings.Add("Section", "Section");
sbc.ColumnMappings.Add("RollNo", "RollNo");

sbc.WriteToServer(rdr);
sbc.Close();
rdr.Close();
con.Close(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-11T08:08:54.763

调试此问题的一个好方法是将 SqlBulkCopy 中使用的 sql 查询作为选择输入在管理工作室中运行，例如，更改`select * from [table_name]`为`select * into newTable from [table_name]`，然后查看“newTable”与“table_name”的可空性和数据类型'。如果有任何差异，那么您很可能最终会遇到这种误导性错误。调整查询或目标表直到它们匹配，然后您的命令将起作用。

# web-crawler - 如何编写爬虫？

> ID：102631
> 
> 赞同：64
> 
> 时间：2008-09-19T15:09:24.090
> 
> 标签：web-crawler

我曾想过尝试编写一个简单的爬虫，它可能会爬取并为我们的 NPO 的网站和内容生成其发现的列表。

有人对如何做到这一点有任何想法吗？您将爬虫指向哪里开始？它如何发回其发现并继续爬行？它怎么知道它发现了什么，等等。

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2008-09-19T15:25:22.133

可以肯定的是，您将重新发明轮子。但这里是基础：

*   未访问的 URL 列表 - 使用一个或多个起始页面作为种子
*   访问过的 URL 列表 - 这样您就不会绕圈子
*   一组您不感兴趣的 URL 的规则 - 这样您就不会索引整个 Internet

将它们放在持久存储中，这样您就可以停止和启动爬虫而不会丢失状态。

算法是：

```
while(list of unvisited URLs is not empty) {
    take URL from list
    remove it from the unvisited list and add it to the visited list
    fetch content
    record whatever it is you want to about the content
    if content is HTML {
        parse out URLs from links
        foreach URL {
           if it matches your rules
              and it's not already in either the visited or unvisited list
              add it to the unvisited list
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2011-12-19T13:45:21.893

爬虫的复杂部分是如果你想将它扩展到大量的网站/请求。在这种情况下，您将不得不处理一些问题，例如：

*   不可能将信息全部保存在一个数据库中。

*   没有足够的 RAM 来处理巨大的索引

*   多线程性能和并发性

*   爬虫陷阱（通过更改 url、日历、会话 id ... 创建的无限循环）和重复的内容。

*   从多台计算机上爬网

*   格式错误的 HTML 代码

*   来自服务器的持续 http 错误

*   没有压缩的数据库，这使您对空间的需求增加了大约 8 倍。

*   重新抓取例程和优先事项。

*   使用压缩请求（Deflate/gzip）（适用于任何类型的爬虫）。

**还有一些重要的事情**

*   尊重 robots.txt

*   并且每个请求的爬虫延迟都不会使网络服务器窒息。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-12T15:40:05.093

**多线程网络爬虫**

如果你想爬取大型网站，那么你应该编写一个多线程爬虫。在文件/数据库中连接、获取和写入爬取的信息 - 这些是爬取的三个步骤，但如果您使用单线程，那么您的 CPU 和网络利用率将会下降。

一个多线程的网络爬虫需要两个数据结构——linksVisited（这应该实现为 hashmap 或 trai）和 linksToBeVisited（这是一个队列）。

网络爬虫使用 BFS 遍历万维网。

基本网络爬虫的算法：-

1.  将一个或多个种子 URL 添加到 linksToBeVisited。向 linksToBeVisited 添加 url 的方法必须同步。
2.  从 linksToBeVisited 中弹出一个元素并将其添加到 linksVisited。这个从 linksToBeVisited 中弹出 url 的弹出方法必须是同步的。
3.  从互联网上获取页面。
4.  解析文件并将页面中发现的任何到目前为止未访问的链接添加到 linksToBeVisited。如果需要，可以过滤 URL。用户可以给出一组规则来过滤要扫描的 url。
5.  在页面上找到的必要信息保存在数据库或文件中。
6.  重复步骤 2 到 5，直到队列为 linksToBeVisited 为空。

    这是有关如何同步线程的代码片段......

    ```
     public void add(String site) {
       synchronized (this) {
       if (!linksVisited.contains(site)) {
         linksToBeVisited.add(site);
         }
       }
     }

     public String next() {
        if (linksToBeVisited.size() == 0) {
        return null;
        }
           synchronized (this) {
            // Need to check again if size has changed
           if (linksToBeVisited.size() > 0) {
              String s = linksToBeVisited.get(0);
              linksToBeVisited.remove(0);
              linksVisited.add(s);
              return s;
           }
         return null;
         }
      } 
    ```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-19T15:19:01.743

爬虫的概念很简单。

您通过 HTTP GET 获取根页面，对其进行解析以查找 URL 并将它们放在队列中，除非它们已经被解析（因此您需要已解析页面的全局记录）。

您可以使用 Content-type 标头找出内容的类型，并将您的爬虫限制为仅解析 HTML 类型。

您可以去掉 HTML 标签以获取纯文本，您可以对其进行文本分析（以获取标签等，页面的内容）。如果您掌握了高级功能，您甚至可以在图像的 alt/title 标签上执行此操作。

在后台，您可以有一个线程池从队列中获取 URL 并执行相同的操作。您当然想限制线程数。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-19T15:19:44.097

如果您的 NPO 的网站相对较大或复杂（具有可有效创建“黑洞”的动态页面，例如带有“第二天”链接的日历），您最好使用真正的网络爬虫，如[Heritrix。](http://crawler.archive.org/)

如果站点总共有几页，您可以只使用 curl 或 wget 或您自己的。请记住，如果它们开始变大，或者您开始​​使脚本变得更复杂以使用真正的爬虫，或者至少查看其源代码以了解它们在做什么以及为什么。

一些问题（还有更多）：

*   黑洞（如所述）
*   重试（如果你得到 500 怎么办？）
*   重定向
*   流量控制（否则您可能会成为网站的负担）
*   robots.txt 实现

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-19T15:19:25.283

维基百科有一篇关于[网络爬虫](http://en.wikipedia.org/wiki/Web_crawler)的好文章，涵盖了许多算法和注意事项。

但是，我不会费心编写自己的爬虫。工作量很大，而且由于您只需要一个“简单的爬虫”，我认为您真正需要的只是一个[现成的爬虫](http://en.wikipedia.org/wiki/Web_crawler#Open-source_crawlers)。有很多免费和开源的爬虫可能会做你需要的一切，而你的工作很少。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-19T15:17:56.690

您可以制作一个单词列表，并为在 google 搜索的每个单词创建一个线程。
然后每个线程将为它在页面中找到的每个链接创建一个新线程。
每个线程都应该写入它在数据库中找到的内容。当每个线程完成读取页面时，它就会终止。
你的数据库中有一个非常大的链接数据库。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-19T15:13:08.950

使用 wget，做一个递归的网络吸吮，它将所有文件转储到你的硬盘上，然后编写另一个脚本来检查所有下载的文件并分析它们。

编辑：或者可能是 curl 而不是 wget，但我不熟悉 curl，我不知道它是否像 wget 那样进行递归下载。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-06-07T06:16:26.287

我在.net 中使用响应式扩展做了一个简单的网络爬虫。

[https://github.com/Misterhex/WebCrawler](https://github.com/Misterhex/WebCrawler)

```
public class Crawler
    {
    class ReceivingCrawledUri : ObservableBase<Uri>
    {
        public int _numberOfLinksLeft = 0;

        private ReplaySubject<Uri> _subject = new ReplaySubject<Uri>();
        private Uri _rootUri;
        private IEnumerable<IUriFilter> _filters;

        public ReceivingCrawledUri(Uri uri)
            : this(uri, Enumerable.Empty<IUriFilter>().ToArray())
        { }

        public ReceivingCrawledUri(Uri uri, params IUriFilter[] filters)
        {
            _filters = filters;

            CrawlAsync(uri).Start();
        }

        protected override IDisposable SubscribeCore(IObserver<Uri> observer)
        {
            return _subject.Subscribe(observer);
        }

        private async Task CrawlAsync(Uri uri)
        {
            using (HttpClient client = new HttpClient() { Timeout = TimeSpan.FromMinutes(1) })
            {
                IEnumerable<Uri> result = new List<Uri>();

                try
                {
                    string html = await client.GetStringAsync(uri);
                    result = CQ.Create(html)["a"].Select(i => i.Attributes["href"]).SafeSelect(i => new Uri(i));
                    result = Filter(result, _filters.ToArray());

                    result.ToList().ForEach(async i =>
                    {
                        Interlocked.Increment(ref _numberOfLinksLeft);
                        _subject.OnNext(i);
                        await CrawlAsync(i);
                    });
                }
                catch
                { }

                if (Interlocked.Decrement(ref _numberOfLinksLeft) == 0)
                    _subject.OnCompleted();
            }
        }

        private static List<Uri> Filter(IEnumerable<Uri> uris, params IUriFilter[] filters)
        {
            var filtered = uris.ToList();
            foreach (var filter in filters.ToList())
            {
                filtered = filter.Filter(filtered);
            }
            return filtered;
        }
    }

    public IObservable<Uri> Crawl(Uri uri)
    {
        return new ReceivingCrawledUri(uri, new ExcludeRootUriFilter(uri), new ExternalUriFilter(uri), new AlreadyVisitedUriFilter());
    }

    public IObservable<Uri> Crawl(Uri uri, params IUriFilter[] filters)
    {
        return new ReceivingCrawledUri(uri, filters);
    }
} 
```

您可以按如下方式使用它：

```
Crawler crawler = new Crawler();
IObservable observable = crawler.Crawl(new Uri("http://www.codinghorror.com/"));
observable.Subscribe(onNext: Console.WriteLine, 
onCompleted: () => Console.WriteLine("Crawling completed")); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-29T12:42:27.937

I'm using Open search server for my company internal search, try this : [http://open-search-server.com](http://open-search-server.com) its also open soruce.

# css - CSS Margin Collapsing

> ID：102640
> 
> 赞同：25
> 
> 时间：2008-09-19T15:10:09.020
> 
> 标签：css, margin

So essentially does margin collapsing occur when you don't set any margin or padding or border to a given div element?

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2008-09-19T15:21:41.940

No. When you have two adjacent vertical margins, the greater of the two is used and the other is ignored.

So, for instance, if you have two block-display elements, A, followed by B beneath it, and A has a bottom-margin of 3em, while B has a top-margin of 2em, then the distance between them will be 3em.

If you set a border or padding, this prevents the collapsing from occurring. In the above example, the distance between the two elements will then be 5em.

If you don't set any margins, then there won't be any margins to collapse. It has nothing whatsoever to do with the element type in use - it is applicable to all element types, not just `<div>` elements.

Read [the CSS 2.1 specification](http://www.w3.org/TR/CSS21/box.html#collapsing-margins) for more details.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-19T15:20:08.137

> "the expression collapsing margins means that adjoining margins (no non-empty content, padding or border areas or clearance separate them) of two or more boxes (which may be next to one another or nested) combine to form a single margin."

Source: [Box Model - 8.3.1 Collapsing margins](http://www.w3.org/TR/CSS21/box.html#collapsing-margins)

# iis - 我应该如何将排队的消息从 IIS 移动到不同服务器上的 Exchange？

> ID：102647
> 
> 赞同：2
> 
> 时间：2008-09-19T15:11:27.223
> 
> 标签：iis, email, smtp, exchange-server

我们目前有一个带有 Exchange 的公司电子邮件服务器，以及一个使用 IIS SMTP 的批量电子邮件处理服务器。我们正在升级到第 3 方 MTA (zrinity xms) 以进行批量发送。当我们切换到第 3 方软件时，我需要能够继续发送已经为 IIS 排队的消息。我是否可以简单地将 IIS 队列文件移动到 Exchange 服务器队列并让它们自动开始发送尝试？如果没有，有什么建议可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-19T15:18:39.450

您应该能够将 *.eml 文件移动到 Exchange 服务器的**拾取目录**中。或者将 IIS SMTP 服务设置为新 MTA 的**智能主机**，假设它们（第三方）允许来自您的 IP 地址的 SMTP 中继。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T17:47:40.200

移动文件将起作用。但是，任何标题中带有密件抄送行的电子邮件都将在密件抄送完整的情况下发送出去。一些客户端，例如gmail，会将信息显示给收件人，从而破坏了密件抄送的全部意义。

将 EML 文件复制到 MS-SMTP（Exchange 也使用）时会发生这种情况，因为 BCC 信息通常在 SMTP 移交（而不是从）MS-SMTP 期间从标头中剥离。

如果这就是最初传递消息的方式，那么您拥有的 EML 可能已经被分解为每个密件抄送的单独消息，并且该标头已被正确剥离。

只是有一点需要注意。

# dcom - DCOM 配置条目中的“本地路径”错误

> ID：102649
> 
> 赞同：0
> 
> 时间：2008-09-19T15:11:33.227
> 
> 标签：dcom

我在 DCOM Config 中有一个组件，其“本地路径”（在 dcomcnfg 中该组件的“属性”页面的“常规”选项卡上）指向错误的位置。但是，当我转到该目录并使用“componentname.exe /unregserver”取消注册组件时，该组件的本地路径保持不变。

我还尝试使用“componentname.exe /regserver”转到正确的目录并在那里注册组件，但“本地路径”中的值仍然没有改变。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T19:29:35.527

在我看来，componentname.exe 没有使用您认为它正在使用的 ProgID/GUID。那个或其注册/注销命令都不起作用。你有来源吗？您可以逐步完成注册程序，看看它在做什么。

# php - 是否有任何关于 PHP XMLWriter 功能的资源？

> ID：102652
> 
> 赞同：3
> 
> 时间：2008-09-19T15:11:38.377
> 
> 标签：php, xml, xmlwriter

PHP 文档可以在[这里](http://us.php.net/manual/en/book.xmlwriter.php)找到，但我认为它相当缺乏。没有关于如何使用这些功能的示例，并且很少（如果有）页面有用户评论。那么我在哪里可以找到关于如何使用这些函数来编写 XML 文档的解释（和示例代码）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T15:58:38.450

我不知道任何其他资源，但我发现[此页面](http://us.php.net/manual/en/ref.xmlwriter.php)评论中的示例非常有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-20T09:58:06.313

我建议查看[DOM 函数](http://us.php.net/manual/en/book.dom.php)而不是 SimpleXML 函数——它更加健壮。没有那么*简单*，但肯定有更多的功能。

# asp.net - 防止回发出现在历史记录中

> ID：102657
> 
> 赞同：6
> 
> 时间：2008-09-19T15:12:19.357
> 
> 标签：asp.net, vb.net, .net-2.0

我有一个页面，我在其中提交一些数据，然后返回原始表单并显示“保存成功”消息。但是，用户希望能够通过单击浏览器的“返回”按钮返回到他们所在的前一页（其中包含搜索结果）。但是，由于回发，当他们单击“返回”按钮时，他们并没有转到上一页，他们只是转到同一页面（但处于之前的状态）。我读到启用`SmartNavigation`将解决这个问题（回发出现在历史记录中）但是，它已被弃用。什么是“新”的最佳实践？

*编辑 - 我添加了一个`ScriptManager`控件，并将按钮包装在一个 中`UpdatePanel`，但是现在我收到以下错误：

`Type 'System.Web.UI.UpdatePanel' does not have a public property named 'Button'`

我缺少参考吗？

*忽略上面的编辑，我只是​​忘记将 < ContentTemplate > 部分添加到`UpdatePanel`:P

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T15:14:32.457

如果您将“保存”按钮放在[UpdatePanel](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.aspx)中，则回发将不会显示在用户历史记录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T15:17:27.520

如果可能的话，我会避免。更好的解决方案是在“保存成功”屏幕上设置一个按钮，让他们返回搜索结果。

ajaxy 保存的问题是您违反了用户期望的“返回”规则。该用户可能希望“返回”按钮返回“搜索”页面，但其他用户可能希望单击“返回”将他们返回到“添加/更新”页面。因此，如果另一个用户尝试更新某些内容，点击保存，然后“哎呀，我忘记了更新内容”，他们会点击返回，现在他们在搜索结果中，而不是预期的更新页面。

# ms-access - 剪贴板问题

> ID：102683
> 
> 赞同：0
> 
> 时间：2008-09-19T15:15:24.997
> 
> 标签：ms-access, vba

我目前支持的旧版应用程序在人们从数据表视图复制大量数据时出现问题。

该应用程序内置于 MS Access 中，被复制的行数可能会非常大（有时为数千）。

有趣的是，您可以将数据粘贴出来，但 Access 会不断将数据“呈现”为不同的格式，并在很长一段时间内成为 CPU 绑定。

MS Access 窗口右下角进度条旁边的状态消息是

> 将数据渲染为格式：Biff5

[根据来源](http://support.microsoft.com/kb/150447)，Biff5 是“二进制交换文件格式 (BIFF) 版本 5”

应用程序代码不在任何地方使用 BIFF5，所以我认为这不是应用程序问题。

我在网络上的任何地方都找不到有关此错误的任何数据，所以我认为这对于 stackoverflow 来说是一个好问题。

那么，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-20T13:28:42.343

您不能将查询导出到 Excel，而不是尝试复制粘贴吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T15:56:35.287

为此，我们都在同一个操作系统上，我正在调查在上一个维护窗口中发送的某些更新是否会导致此问题，因为在此之前它不是问题，并且没有新版本的软件那个时间段。

在很多机器上试过，所有机器都有同样的问题。

问题实际上是从 Access 中的数据表视图复制并粘贴到 Excel，而不是奇怪的相反。

这是用例

访问 --> “从数据表复制”（普通`Ctrl`+ `C`） --> “粘贴到 Excel”（普通`Ctrl`+ `V`）（这工作正常！）

然后，当您返回 Access 继续工作时，CPU 绑定执行“渲染数据以格式化：”事情，我在上面提到过。

老实说，我很难过，这有点奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T15:44:16.380

我不确定问题是什么，但有时您可能会在 Access 中遇到一些非常古怪的错误。你试过在不同的机器上运行它吗？不同的操作系统？是否可以将数据粘贴到 Excel 中，然后使用导入功能导入 Access？您可以直接导入数据而不是粘贴吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-16T19:57:13.473

尝试通过 VBA 进行复制粘贴操作：

一旦用户选择了要复制的数据，您可以在单击表单中的按钮时执行以下代码，然后在 excel 中进行特殊粘贴：

--- 用户选择的数据 ---

```
RunCommand acCmdCopy

   Dim xlApp As Object  
   Set xlApp = CreateObject(Class:="Excel.Application")

   'New Excel Workbook
   Dim xlWbook As Object   'Excel.Workbook
   Set xlWbook = xlApp.Workbooks.Add

   'Paste in excel
   xlWSheet.Range("A1").Select
   xlWSheet.PasteSpecial Link:=False, DisplayAsIcon:=False, Format:="Biff5" 
```

# c# - c# 如何计算出对象的哈希码？

> ID：102690
> 
> 赞同：12
> 
> 时间：2008-09-19T15:16:04.277
> 
> 标签：c#, hash, internals

这个问题来自关于[tuples](https://stackoverflow.com/questions/101825/whats-the-best-way-of-using-a-pair-triple-etc-of-values-as-one-value-in-c)的讨论。

我开始考虑元组应该具有的哈希码。如果我们接受 KeyValuePair 类作为元组呢？它不会覆盖 GetHashCode() 方法，所以它可能不会知道它的“孩子”的哈希码......所以，运行时将调用 Object.GetHashCode()，它不知道实物结构。

然后我们可以创建一些引用类型的两个实例，它们实际上是 Equal，因为重载了 GetHashCode() 和 Equals()。并将它们用作元组中的“孩子”来“欺骗”字典。

但它不起作用！运行时以某种方式计算出我们的元组的结构并调用我们类的重载 GetHashCode！

它是如何工作的？Object.GetHashCode() 做了什么分析？

当我们使用一些复杂的键时，它会在一些糟糕的情况下影响性能吗？（可能，不可能的情况......但仍然）

以这段代码为例：

```
namespace csharp_tricks
{
    class Program
    {
        class MyClass
        {
            int keyValue;
            int someInfo;

            public MyClass(int key, int info)
            {
                keyValue = key;
                someInfo = info;
            }

            public override bool Equals(object obj)
            {
                MyClass other = obj as MyClass;
                if (other == null) return false;

                return keyValue.Equals(other.keyValue);
            }

            public override int GetHashCode()
            {
                return keyValue.GetHashCode();
            }
        }

        static void Main(string[] args)
        {
            Dictionary<object, object> dict = new Dictionary<object, object>();

            dict.Add(new KeyValuePair<MyClass,object>(new MyClass(1, 1), 1), 1);

            //here we get the exception -- an item with the same key was already added
            //but how did it figure out the hash code?
            dict.Add(new KeyValuePair<MyClass,object>(new MyClass(1, 2), 1), 1); 

            return;
        }
    }
} 
```

**更新**我想我已经找到了对此的解释，如下所述。它的主要成果是：

*   小心你的密钥和它们的哈希码:-)
*   对于复杂的字典键，您必须正确覆盖 Equals() 和 GetHashCode()。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-19T15:26:38.323

不要在可变类上覆盖 GetHashcode() 和 Equals()，只在不可变类或结构上覆盖它，否则如果您修改用作键的对象，哈希表将不再正常工作（您将无法在修改键对象后检索与键关联的值）

此外，哈希表不使用哈希码来标识对象，它们使用键对象本身作为标识符，并不要求用于在哈希表中添加条目的所有键都返回不同的哈希码，但建议它们这样做，否则性能深受其害。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-30T17:23:11.063

这是 Quad 元组（内部包含 4 个元组组件）的正确哈希和相等实现。此代码确保在 HashSets 和字典中正确使用此特定元组。

更多关于这个主题（包括源代码）[在这里](http://rabdullin.com/using-tuples-in-c/)。

**注意***unchecked*关键字的使用（以避免溢出），如果 obj 为 null 则抛出 NullReferenceException（根据基本方法的要求）

```
public override bool Equals(object obj)
{
    if (ReferenceEquals(null, obj))
        throw new NullReferenceException("obj is null");
    if (ReferenceEquals(this, obj)) return true;
    if (obj.GetType() != typeof (Quad<T1, T2, T3, T4>)) return false;
    return Equals((Quad<T1, T2, T3, T4>) obj);
}

public bool Equals(Quad<T1, T2, T3, T4> obj)
{
    if (ReferenceEquals(null, obj)) return false;
    if (ReferenceEquals(this, obj)) return true;
    return Equals(obj.Item1, Item1)
        && Equals(obj.Item2, Item2)
            && Equals(obj.Item3, Item3)
                && Equals(obj.Item4, Item4);
}

public override int GetHashCode()
{
    unchecked
    {
        int result = Item1.GetHashCode();
        result = (result*397) ^ Item2.GetHashCode();
        result = (result*397) ^ Item3.GetHashCode();
        result = (result*397) ^ Item4.GetHashCode();
        return result;
    }
}
public static bool operator ==(Quad<T1, T2, T3, T4> left, Quad<T1, T2, T3, T4> right)
{
    return Equals(left, right);
}

public static bool operator !=(Quad<T1, T2, T3, T4> left, Quad<T1, T2, T3, T4> right)
{
    return !Equals(left, right);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-19T15:36:32.623

查看 Brad Abrams 的这篇[文章](http://blogs.msdn.com/brada/archive/2003/09/30/50396.aspx)以及 Brian Grunkemeyer 的评论，了解有关 object.GetHashCode 如何工作的更多信息。[另外，请查看 Ayande 博客文章](http://ayende.com/Blog/archive/2006/12/10/InterviewQuestionsFromHellTakeIV.aspx)的第一条评论。我不知道框架的当前版本是否仍然遵循这些规则，或者他们是否真的像 Brad 暗示的那样改变了它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T16:44:28.497

看来我现在有了线索。

我认为 KeyValuePair 是一个引用类型，但它不是，它是一个结构。因此它使用 ValueType.GetHashCode() 方法。MSDN 说：“派生类型的一个或多个字段用于计算返回值”。

如果您将真正的引用类型作为“元组提供者”，那么您将欺骗字典（或您自己......）。

```
using System.Collections.Generic;

namespace csharp_tricks
{
    class Program
    {
        class MyClass
        {
            int keyValue;
            int someInfo;

            public MyClass(int key, int info)
            {
                keyValue = key;
                someInfo = info;
            }

            public override bool Equals(object obj)
            {
                MyClass other = obj as MyClass;
                if (other == null) return false;

                return keyValue.Equals(other.keyValue);
            }

            public override int GetHashCode()
            {
                return keyValue.GetHashCode();
            }
        }

        class Pair<T, R>
        {
            public T First { get; set; }
            public R Second { get; set; }
        }

        static void Main(string[] args)
        {
            var dict = new Dictionary<Pair<int, MyClass>, object>();

            dict.Add(new Pair<int, MyClass>() { First = 1, Second = new MyClass(1, 2) }, 1);

            //this is a pair of the same values as previous! but... no exception this time...
            dict.Add(new Pair<int, MyClass>() { First = 1, Second = new MyClass(1, 3) }, 1);

            return;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T15:21:47.477

我不再有这本书的参考资料，我必须找到它来确认一下，但我认为默认的基本哈希只是将你对象的所有成员散列在一起。由于 CLR 的工作方式，它可以访问它们，所以它不是你可以像他们那样编写的东西。

这完全来自我简要阅读的内容的记忆，因此请随心所欲。

**编辑：**这本书是来自 MS Press的**Inside C# 。**盖子上有锯片的那个。作者花了很多时间解释 CLR 是如何实现的，语言如何翻译成 MSIL 等等。等等。如果你能找到这本书，那读起来还不错。

**编辑：**形成链接提供它看起来像

> Object.GetHashCode() 使用 System.Object 类中的内部字段来生成哈希值。创建的每个对象都被分配一个唯一的对象键，在创建时存储为整数。这些键从 1 开始，并在每次创建任何类型的新对象时递增。

嗯，如果我希望将对象用作散列键，我想我需要编写一些自己的散列码。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-09-19T15:48:19.240

> 所以它可能不会知道它的“孩子”的哈希码。

您的示例似乎证明并非如此 :-) 键`MyClass`和值的哈希码对于`1`两者都是相同`KeyValuePair`的。KeyValuePair 实现必须同时使用`Key`它`Value`自己的哈希码

向上移动，字典类需要唯一的键。它使用每个键提供的哈希码来解决问题。请记住，运行时不是在调用`Object.GetHashCode()`，而是在调用您给它的实例提供的 GetHashCode() 实现。

考虑一个更复杂的情况：

```
public class HappyClass
{

    enum TheUnit
    {
        Points,
        Picas,
        Inches
    }

    class MyDistanceClass
    {
        int distance;
        TheUnit units;

        public MyDistanceClass(int theDistance, TheUnit unit)
        {
            distance = theDistance;

            units = unit;
        }
        public static int ConvertDistance(int oldDistance, TheUnit oldUnit, TheUnit newUnit)
        {
            // insert real unit conversion code here :-)
            return oldDistance * 100;
        }

        /// <summary>
        /// Figure out if we are equal distance, converting into the same units of measurement if we have to
        /// </summary>
        /// <param name="obj">the other guy</param>
        /// <returns>true if we are the same distance</returns>
        public override bool Equals(object obj)
        {
            MyDistanceClass other = obj as MyDistanceClass;
            if (other == null) return false;

            if (other.units != this.units)
            {
                int newDistance = MyDistanceClass.ConvertDistance(other.distance, other.units, this.units);
                return distance.Equals(newDistance);
            }
            else
            {
                return distance.Equals(other.distance);
            }

        }

        public override int GetHashCode()
        {
            // even if the distance is equal in spite of the different units, the objects are not
            return distance.GetHashCode() * units.GetHashCode();
        }
    }
    static void Main(string[] args)
    {

        // these are the same distance... 72 points = 1 inch
        MyDistanceClass distPoint = new MyDistanceClass(72, TheUnit.Points);
        MyDistanceClass distInch = new MyDistanceClass(1, TheUnit.Inch);

        Debug.Assert(distPoint.Equals(distInch), "these should be true!");
        Debug.Assert(distPoint.GetHashCode() != distInch.GetHashCode(), "But yet they are fundimentally different values");

        Dictionary<object, object> dict = new Dictionary<object, object>();

        dict.Add(new KeyValuePair<MyDistanceClass, object>(distPoint, 1), 1);

        //this should not barf
        dict.Add(new KeyValuePair<MyDistanceClass, object>(distInch, 1), 1);

        return;
    }

} 
```

基本上......在我的示例中，您希望两个距离相同的对象为 Equals 返回“true”，但返回不同的哈希码。

# xmpp - 在 Windows 2003 上运行 Jabber/XMPP 的最佳选择是什么？

> ID：102704
> 
> 赞同：1
> 
> 时间：2008-09-19T15:17:56.550
> 
> 标签：xmpp, instant-messaging

我希望在 Windows 2003 服务器（网络场）上运行 Jabber 服务器，并且希望从运行具有约 500 个并发用户的实时环境的任何人那里获得一些实用建议。

评论标准：

*   表现
*   容量（即~并发用户数）
*   稳定

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-19T15:36:00.127

OpenFire 是 jabber 服务器的一个很好的 gpl java 实现。它有很多可供您使用的选项插件，并且可以很好地与 Active Directory [OpenFire 集成](http://www.igniterealtime.org/projects/openfire/index.jsp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T15:22:14.967

我认为您需要更明确一点 - 您正在寻找服务器配置或软件，例如 Jabber Server？

如果您正在考虑 Jabber 服务器，[EJabberD](http://www.ejabberd.im/)可能是最稳定、最灵活、能够集群等的。

在这里对开源服务器进行真正有用的比较...

[http://www.saint-andre.com/jabber/jsc/](http://www.saint-andre.com/jabber/jsc/)

# css - CSS（样式表）组织和颜色

> ID：102720
> 
> 赞同：4
> 
> 时间：2008-09-19T15:19:25.690
> 
> 标签：css

我刚刚完成了一个中型网站，我注意到我的 css 组织的一件事是我有很多硬编码的颜色值。这显然不利于可维护性。通常，当我设计一个网站时，我会为一个主题选择 3-5 种主要颜色。我最终在我的主要 css 的开头设置了段落、链接等的一些默认值，但是一些组件会改变颜色（例如图例标签）并要求我用我想要的颜色重新设置样式。你如何避免这种情况？我正在考虑为每种颜色创建单独的规则，并在需要重新设计时使用这些规则。

IE

```
.color1 {
    color: #3d444d;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-19T15:25:12.430

我在这里所做的一件事是将我的调色板声明从其他样式/布局标记中分离出来，将常用颜色的项目分组到列表中，例如

```
h1 { 
 padding...
 margin...
 font-family...
}

p {
 ...
}

code {
 ...
}

/* time passes */

/* these elements are semantically grouped by color in the design */
h1, p, code { 
 color: #ff0000;
} 
```

在预览中，JeeBee 的建议是对此的逻辑扩展：如果处理您的颜色声明有意义（当然，这可以适用于其他样式问题，尽管颜色具有不改变布局的独特属性），您可能会考虑将其推送到单独的 css 文件中，是的。这也使得热交换仅颜色主题变体变得更容易，只需将一个或另一个 colorxxx.css 配置文件作为您的包含。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T15:26:51.913

这正是你应该做的。

您可以使您的 CSS 越集中，将来进行更改就越容易。说真的，你将来会想要改变颜色。

您几乎不应该将任何 css 硬编码到您的 html 中，它应该**全部**在 css 中。

此外，我开始更频繁地做的事情是将你的 css 类放在彼此上，以便更容易改变颜色一次......代表无处不在。

样本（随机颜色）css：

```
.main_text {color:#444444;}
.secondary_text{color:#765123;}
.main_color {background:#343434;}
.secondary_color {background:#765sda;} 
```

然后进行一些标记，注意我如何将颜色层与 otehr 类一起使用，这样我就可以更改一个 css 类：

```
<body class='main_text'>
  <div class='main_color secondary_text'>
    <span class='secondary color main_text'>bla bla bla</span>
  </div>
  <div class='main_color secondary_text>
    You get the idea...
  </div>
</body> 
```

记住...内联 css = bad（大多数时候）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T15:31:04.977

请参阅：[在 .CSS 文件中创建一个变量以在该 .CSS 文件中使用](https://stackoverflow.com/questions/47487/create-a-variable-in-css-file-for-use-within-that-css-file)

总而言之，您有三个基本选择：

1.  使用宏预处理器替换样式表中的常量颜色名称。
2.  使用客户端脚本来配置样式。
3.  对每种颜色使用一个规则，列出它应该应用的所有选择器（我的最爱...）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T15:33:02.023

也许将所有颜色信息都拉到样式表的一部分中。例如改变这个：

```
p .frog tr.mango {
    color: blue;
    margin: 1px 3em 2.5em 4px;
    position: static;
}
#eta .beta span.pi {
    background: green;
    color: red;
    font-size: small;
    float: left;
}
// ... 
```

对此：

```
p .frog tr.mango {
    color: blue;
}
#eta .beta span.pi {
    background: green;
    color: red;
}
//...
p .frog tr.mango {
    margin: 1px 3em 2.5em 4px;
    position: static;
}
#eta .beta span.pi {
    font-size: small;
    float: left;
}
// ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-19T17:27:32.357

我有时会使用 PHP，并制作类似于 style.css.php 的文件。然后你可以这样做：

```
<?php 
    header("Content-Type: text/css");
    $colour1 = '#ff9'; 
?>
.username {color: <?=$colour1;?>; } 
```

现在，您可以在任何地方使用该颜色，并且只需在一个地方进行更改。当然，这也适用于除颜色以外的值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T15:24:13.540

您可以拥有一个 colours.css 文件，其中仅包含每个标签的颜色/图像。然后您可以通过替换文件、动态生成的 CSS 文件或提供不同的 CSS 文件并根据网站进行选择来更改颜色URL/子文件夹/属性/等。

或者您可以在编写时使用颜色标签，但是您的 HTML 会变成：

<p style="body gray">废话</p>

CSS 应该有一个特性，您可以在其中定义您希望通过样式保持一致但仅在一个地方定义的颜色之类的值。不过，还有搜索和替换。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-19T15:24:13.947

所以你说你不想回到你的CSS来改变颜色值，如果你发现另一种颜色“主题”可能会更好？

不幸的是，我没有办法解决这个问题。CSS 定义了样式，颜色是其中之一，改变它的唯一方法是进入 css 并改变它。

当然，您可以自己构建一个小程序，允许您通过选择网页上的色轮或其他东西来更改 css 文件，然后使用 filesystemobject 或其他东西将该值写入 css 文件，但这很多肯定比需要的工作更多。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-19T15:24:27.080

一般来说，最好只找到并替换您正在更改的颜色。

任何比这更强大的东西都会更复杂，而且好处很少。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-19T15:27:17.607

CSS 不是你的答案。您想研究 CSS 之类的抽象，例如[SASS](http://haml.hamptoncatlin.com/docs/rdoc/classes/Sass.html)。这将允许您定义常量并通常清理您的 css。

这是[CSS 框架](http://speckyboy.com/2008/03/28/top-12-css-frameworks-and-how-to-understand-them/)的列表。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-19T15:27:44.127

我在文件顶部保留了我使用过的所有颜色的列表。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-19T15:30:17.677

当 CSS 由服务器端脚本提供服务时，例如。PHP，通常编码人员将 CSS 作为模板文件并在运行时替换颜色。这也可以用来让用户选择颜色模型。

另一种方法是，避免每次都解析这个文件（尽管缓存应该处理这个），或者如果你有一个静态站点，是制作这样的模板并在上传到服务器之前用一些脚本/静态模板引擎解析它。

搜索/替换可以工作，除非两个最初不同的颜色最终相同：之后很难再次将它们分开！:-)

如果我没记错的话，CSS3 应该允许这样的参数化。但是，在 90% 的上网浏览器都可以使用此功能之前，我不会屏住呼吸！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-19T18:15:00.400

我喜欢将颜色信息分离到一个单独的文件中的想法，不管我怎么做。如果可以的话，我会在这里接受多个答案，因为我也喜欢 Josh Millard 的答案。我喜欢有单独的颜色规则的想法，因为一个特定的标签可能有不同的颜色，这取决于它出现的位置。也许这两种技术的结合会很好：

```
h1, p, code {
    color: #ff0000;
} 
```

然后也有

```
.color1 {
    color: #ff0000;
} 
```

当您需要重新设计时。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-10-21T13:39:43.897

这就是[SASS](https://sass-lang.com/)来帮助你的地方。

# hash - 为什么 ReSharper GetHashCode 覆盖使用“397”？

> ID：102742
> 
> 赞同：160
> 
> 时间：2008-09-19T15:20:45.513
> 
> 标签：hash, resharper, hash-code-uniqueness

像你们中的许多人一样，我使用 ReSharper 来加快开发过程。当您使用它来覆盖类的相等成员时，它生成的代码生成`GetHashCode()`如下所示：

```
 public override int GetHashCode()
    {
        unchecked
        {
            int result = (Key != null ? Key.GetHashCode() : 0);
            result = (result * 397) ^ (EditableProperty != null ? EditableProperty.GetHashCode() : 0);
            result = (result * 397) ^ ObjectId;
            return result;
        }
    } 
```

当然我也有一些我自己的成员，但我想知道为什么是 397？

*   编辑：所以我的问题的措辞会更好，397素数除了是素数之外还有什么“特殊”吗？

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2008-09-19T15:29:24.073

可能是因为 397 是一个足够大的素数，会导致结果变量溢出并在一定程度上混合散列的位，从而提供更好的散列码分布。397 没有什么特别之处可以将它与其他相同大小的素数区分开来。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-12-08T11:18:22.070

resharper 使用的哈希看起来像[FNV](https://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function)哈希的变体。FNV 经常使用不同的素数来实现。[这里](http://www.isthe.com/chongo/tech/comp/fnv/#fnv-prime)有关于 FNV 的适当质数选择的讨论。

# c# - 压缩文件时“回车”被删除

> ID：102758
> 
> 赞同：0
> 
> 时间：2008-09-19T15:21:53.843
> 
> 标签：c#, zip

压缩字符串“stream”时，“/r”会从“/r/n”中删除。我正在使用 ICSharp.zip 库进行压缩。有没有其他人遇到过这个问题，如果有，是否有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T15:49:36.710

您的 zip 库是否具有将流视为文本或二进制的参数？听起来它正在将其视为文本并正在更改行尾分隔符（某些应用程序这样做是为了确保它与目标平台匹配）。如果您可以告诉它将数据视为二进制，它可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-10T06:40:33.020

试试 DotNetZip。
它是一个托管代码库，在 CR/LF 翻译方面没有问题。费用。开源。

[CodePlex 上的 DotNetZip](http://www.codeplex.com/DotNetZip)

# sql - 数据库安全：中间“to_be_deleted”列/表？

> ID：102759
> 
> 赞同：0
> 
> 时间：2008-09-19T15:21:56.120
> 
> 标签：sql, database

每个人都无意中忘记`WHERE`了查询中的子句，`DELETE`并且一次或两次爆破了一些未备份的数据。我正在思考这个问题，我想知道我提出的解决方案是否实用。

如果代替实际`DELETE`查询，应用程序和维护脚本执行以下操作会怎样：

```
UPDATE foo SET to_be_deleted=1 WHERE blah = 50; 
```

然后设置一个 cron 作业并实际删除带有标志的所有内容？缺点是几乎所有其他查询都需要`WHERE to_be_deleted != 1`附加到它上面，但好处是您永远不会再次错误地丢失数据。您可以看到“2,349,325 行受影响”并说，“嗯，看起来我忘记了该`WHERE`子句”，然后重置标志。您甚至可以将 to_be_deleted 字段设为一`DATE`列，这样 cron 作业将检查一行的时间是否已经到来。

此外，您可以删除`DELETE`生产数据库用户的权限，因此即使有人设法将一些 SQL 注入您的站点，他们也无法删除任何内容。

所以，我的问题是：这是一个好主意，还是有我没有看到的陷阱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T15:26:03.083

如果您想这样做，那很好，但这似乎需要做很多工作。有多少人在手动更改数据库？它应该很少，特别是如果您的用户有一个可以使用的应用程序。

当我在生产数据库上工作时，我把我所做的一切都放在一个事务中，所以如果我搞砸了，我可以回滚。对我来说，像这样的标准做法对我有帮助。

我认为这并没有什么真正的问题，尽管每个应用程序中的单点数据操作都必须了解此功能，而不仅仅是它想要的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T15:27:25.780

只要您的应用程序不需要立即删除数据就可以了，因为您必须等待 cron 作业的下一个间隔。

我认为更好的解决方案和更常见的做法是使用开发服务器和生产服务器。如果您的开发数据库被炸毁，只需重新加载它。没有造成伤害。如果您在生产数据库上测试代码，那么您应该得到任何不好的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-19T15:28:27.167

很多人都有删除标志或行状态标志。但是如果有人通过后端进行更改（他们会这样做，因为人们经常需要完成无法通过前端完成的批量更改）并且他们犯了错误，他们仍然会经常去删除。最终，这无法替代在将脚本应用到生产环境之前对其进行测试。

另外......如果执行以下查询“UPDATE foo SET to_be_deleted=1”会发生什么，因为他们离开了 where 子句。除非您有带有时间戳的审计列，否则您如何知道哪些列被删除以及哪些列被错误地删除？但是，即使您有带有时间戳的审计列，如果审计是通过存储过程或程序员约定完成的，那么这些后端查询可能不会提供让您知道它们刚刚被应用的信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-19T15:29:08.943

太复杂。对此的标准方法是在事务中完成所有工作，因此如果您搞砸并忘记了 WHERE 子句，那么当您看到“2,349,325 行受影响”结果时，您只需回滚即可。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-19T15:31:55.130

为已删除的行创建并行表可能更容易。原始表上的`DELETE`触发器（`UPDATE`如果您也想撤消更改也可以）可以将受影响的行复制到并行表中。将 datetime 列添加到并行表以记录更改的日期和时间将使您可以使用 cron 作业永久删除超过特定年龄的行。

这样，您将`DELETE`在原始表上使用普通语句，因此您不会忘记运行您的特殊“ `DELETE`”语句。您还回避了`to_be_deleted != 1`表达式，这只是当某人不可避免地忘记时等待发生的错误。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-19T15:33:29.617

看起来你在这里描述了三个案例。

1.  案例 1 - 维护脚本。通过在生产环境之外的环境中开发和测试它们，可以将风险降到最低。为了快速维护，请在单个事务中进行维护，并在提交前检查所有内容。如果您犯了错误，请发出回滚命令。对于您不一定要等待或在单个事务中执行的更严重的维护，请考虑在运行维护作业之前直接进行备份，以便在遇到问题时始终可以恢复到运行脚本之前的位置严重的问题。

2.  案例 2 - SQL 注入。这是一个架构问题。您的应用程序不应将 SQL 传递到数据库中，应通过包/存储过程/函数来控制访问，并且将来自 UI 并在 DDL 语句中使用的值应使用绑定变量而不是通过通过将字符串附加在一起来创建动态 SQL。

3.  案例 3 - 常规批处理作业。这些应该在部署到生产之前进行测试。如果你删除太多，你就有一个错误，并且将不得不依赖你的备份策略。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-19T21:55:48.327

> 每个人都无意中忘记了 DELETE 查询中的 WHERE 子句，并且一次或两次爆破了一些未备份的数据。

不。我总是将我`DELETE`的 s 原型化为`SELECT`s 并且只有当后者给出我想要删除的结果时才将之前的语句更改`WHERE`为 a `DELETE`。这让我在做任何事情之前检查我想要影响的行的任何需要的细节。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-19T15:24:48.750

您可以在该表上设置一个选择 WHERE to_be_deleted != 1 的视图，并且您所有的正常选择都在该视图上完成 - 这避免了必须将 WHERE 放在所有查询上。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-19T15:25:10.560

陷阱在于它不必要地复杂，并且有人会无意中忘记检查他们查询中的标志。还有一个问题是可能需要立即删除某些内容，而不是等待计划的作业运行。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-19T15:25:54.410

为了避免 to_be_deleted WHERE 子句，您可以在删除命令触发之前创建触发器，以将已删除的行插入单独的表中。当您确定确实需要删除其中的所有内容时，可以清除此表，或者您可以将其保留用于存档目的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-19T15:27:25.233

您还可以获得“软删除”功能，因此您可以为（某些）最终用户提供“撤消”的功能 - 要取消软删除的好处，组合中必须有一个非常强大的缺点。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-19T15:29:17.007

每个其他查询中的“WHERE to_be_deleted <> 1”是一个巨大的查询。另一个问题是，一旦您意外运行了恶意查询，您将如何确定 2,349,325 中的哪*一个之前*被标记为已删除？

我认为实际的解决方案是定期备份，如果做不到这一点，可能是一个删除触发器来捕获要​​删除的元组。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-19T15:32:47.107

另一种选择是在每个表上创建一个删除触发器。当任何内容被删除时，它会将该“待删除”记录插入到另一个表中，最好命名为 TABLENAME_deleted。

缺点是数据库将有两倍多的表。

我一般不推荐触发器，但它可能是您正在寻找的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-19T15:33:14.877

这就是为什么当您手动编辑数据时，您应该 BEGIN TRAN，编辑您的数据，检查它是否看起来不错（例如，您没有删除比您预期更多的数据）然后 END TRAN。如果您使用的是 Postgres，那么您还需要创建大量保存点，以免拼写错误破坏您的中间工作。

但话虽如此，在许多应用程序中，让软件将记录标记为无效而不是删除它们确实是有意义的。添加一个自动更新的 last_modified 日期，您就可以将增量更新设置到数据仓库中。**即使你现在**没有数据仓库，在准备便宜的情况下为未来做准备也没有什么坏处。另外，如果出现手动错误，您仍然拥有数据，并且可以找到在您犯错时被“删除”的所有记录并修复它们。（不过，您仍然应该使用事务。）

# java - Apache 和 J2EE 共享安全领域/登录、单点登录

> ID：102778
> 
> 赞同：2
> 
> 时间：2008-09-19T15:23:01.813
> 
> 标签：java, apache, authentication, tomcat, jakarta-ee

这是我想创造的情况：

*   `www.blah.com/priv`- 受 Apache HTTP Basic Auth 保护，领域“foo”
*   `www.blah.com/application`- 受 Tomcat/Servlet HTTP Basic Auth 保护，领域“foo”
*   用户访问`/priv`，apache 请求登录信息，他们提供并被授予访问权限
*   同一用户然后请求`/application`。由于他们已经在上一步中通过了“foo”领域的身份验证，我希望他们能够直接进入。
*   如果其他用户`/application`在没有先访问的情况下访问`/priv`，则 Tomcat 需要身份验证（然后他们也可以稍后访问`/priv`而无需重新验证）

基本上，我希望 apache 和 tomcat 共享身份验证领域，理想情况下，共享用户数据库。

怎样才能最好地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T17:03:35.457

您是否已经尝试过这样做但失败了？我问是因为 HTTP Basic 身份验证纯粹是通过向请求添加 HTTP 标头来进行的；也就是说，一旦您在给定服务器上针对给定领域进行了身份验证，您的浏览器会在您的请求中添加一个额外的标头（例如，“授权：基本 amxldmludnskZXZsaW4=”），并且服务器会确认您已通过身份验证，因为那个标题。因此，鉴于您的示例，以及我刚刚进行的一些临时测试，我怀疑您描述的设置将无需您付出任何额外的努力即可正常工作。

# php - 在 PHP 中加密非常短的字符串的最佳方法是什么？

> ID：102788
> 
> 赞同：12
> 
> 时间：2008-09-19T15:24:03.463
> 
> 标签：php, encryption

我想加密可能只有大约三个或四个字符但运行到大约二十个字符的字符串。散列函数（[md5](http://www.php.net/md5)、[sha1](http://www.php.net/sha1)、[crypt](http://www.php.net/crypt)等）不适合，因为我也希望能够解密信息。[mcrypt](http://au.php.net/mcrypt)扩展有一系列令人生畏的可能性。

有没有人对安全加密短字符串的最佳方法有任何想法，*为什么*？有没有人链接到任何将临时程序员介绍给实际加密场景的材料？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-19T15:32:07.873

我喜欢将 GnuPG 用于任何需要在服务器上加密然后可能在服务器或另一台服务器上解密的东西（这通常是我的情况）。这允许额外的安全级别，因为在我的场景中，加密服务器没有解密数据的密钥。它还允许更轻松的手动解密。有一些很好的包装器可用于各种语言（另一个优点），用于 PHP 的包装器是[GnuPGP PHP Class](http://www.austintech.com/2003/06/11/gnupg-php-class/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-19T16:50:15.003

[默认情况下， mcrypt](http://www.php.net/manual/en/book.mcrypt.php)链接到大多数 PHP 版本。它包含您可能需要的所有原语。如果不了解更多关于您正在加密什么、您的威胁模型是什么等信息，就很难就使用什么算法、操作模式等给出具体建议。

我可以肯定地说：对于短文本字符串，您必须使用唯一的随机初始化向量比以往任何时候都更加重要。否则，有人对加密数据进行各种攻击是微不足道的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-26T22:18:48.437

我强烈推荐**Chris Kite**的建议。如果不了解更多关于您在做什么、为什么以及您预期需要防范 AES-128 的威胁可能就足够了。使用对称加密的能力非常适合作为数据解密器和加密器的独立应用程序。正如**Chris Kite**和**Arachnid**所说，由于数据量小，建议您填充数据并使用随机初始化向量。

> **更新：**至于为什么......直到捕获的密文。简而言之，这就是彩虹表的工作方式。

现在，如果您要在一台服务器上加密并在另一台服务器上解密，我会接受**pdavis**的建议。通过使用非对称方法，您可以将加密密钥与解密密钥分开。这样，如果加密数据的服务器被攻破，攻击者仍然无法解密数据。

如果可以的话，它将帮助社区更多地了解您的加密用例。正如我上面提到的，在评估安全控制时，正确理解可能的威胁是关键。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-19T15:26:28.323

**是否有人可以解密它有关系吗？** 如果您只是想稍微混淆*一下*，请使用 ROT13。这是老学校。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-19T16:35:46.800

如果您想在应用程序中加密和解密数据，您很可能希望使用对称密钥密码。AES 是美国国家安全局认证的用于保护绝密数据的对称块加密算法，是您的最佳选择。[www.phpaes.com](http://www.phpaes.com)上有一个纯 PHP 实现

对于您的使用，听起来 AES128 就足够了。您将希望将 CBC 模式与随机初始化向量一起使用，否则相同的数据将始终产生相同的密文。

选择正确的加密算法是很好的第一步，但是对于一个安全系统来说，有很多因素很难做到正确，例如密钥管理。那里有很好的资源，例如 Bruce Schneier 的 Applied Cryptography 和 Ross Anderson 的 Security Engineering（可在线免费获得）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-24T15:39:46.800

我同意 Chris Kite - 只需使用 AES 128，这就足够了。

我不确切地知道你的环境，但我猜你正在通过互联网以某种方式传输数据。

不要使用 ECB，这对于相同的纯文本总是会产生相同的结果。

CBC 模式是要走的路，不要忘记随机初始化向量。该向量必须与密文进行通信，并且可以明文发送。

关于您的数据，由于 AES 是块密码，因此结果始终是块大小的倍数。如果您不想让观察者知道您的数据是短还是长，请添加一些填充以将其扩展到最大预期大小。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-19T15:30:19.533

我猜任何单向加密算法（例如 Blowfish）都可以。河豚又快又开放。您可以通过 crypt() 函数使用 Blowfish。AFAIK 没有加密算法特别适用于小字符串。不过要注意的一件事是，暴力破解如此小的字符串将非常容易。也许您应该加密字符串以及“秘密”盐值以提高安全性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-20T21:09:13.640

您可以使用一般的编程思想而不依赖内置的加密/解密函数示例创建一个函数调用它

```
function encryptstring($string) {

$string_length=strlen($string);
$encrychars=""; 
/**
*For each character of the given string generate the code
*/
for ($position = 0;$position<$string_length;$position++){        
    $key = (($string_length+$position)+1);
    $key = (255+$key) % 255;
    $get_char_to_be_encrypted = SUBSTR($string, $position, 1);
    $ascii_char = ORD($get_char_to_be_encrypted);
    $xored_char = $ascii_char ^ $key;  //xor operation
    $encrypted_char = CHR($xored_char);
    $encrychars .= $encrypted_char;
} 
/**
*Return the encrypted/decrypted string
*/
return $encrychars;
} 
```

在带有链接的页面上包含需要加密的 id

```
 /**
    *While passing the unique value to a link
    *Do the following steps
    */

    $id=57;//or if you are fetching it automatically just pass it here
     /**
     *For more security multiply some value
     *You can set the multiplication value in config file
     */
     $passstring=$id*346244;
     $encrypted_string=encryptstring($passstring);
     $param=urlencode($encrypted_string);
     /**
     *Derive the url for the link
     */
     echo '<a href="target_file.php?aZ98#9A_KL='.$param.'">something</a>' ; 
```

在单击链接后打开的目标文件上

```
 /**
      *Retriving the value in the target file
      *Do the following steps
      */
      $fetchid=$_GET['aZ98#9A_KL'];
      $passstring=urldecode(stripslashes($fetchid));
      $decrypted_string= encryptstring($passstring);
      /**
       *Divide the decrypted value with the same value we used for the multiplication
       */
      $actual_id= $decrypted_string/346244; 
```

# qt - Qt 中具有单个模型的表格和列表视图

> ID：102789
> 
> 赞同：1
> 
> 时间：2008-09-19T15:24:09.703
> 
> 标签：qt, model, view

我有一个 2D 模型，其中每一行代表视频中的一帧，每一列代表一个对象。对象在每一帧上可以有不同的状态，这存储在模型中。然后我有一个显示这些数据的 QTableView。模型有标题数据，所以每一行都有一个像“frame k”这样的标题，每列都有一个像“object n”这样的标题。此表是可编辑的。但我希望用户以另一种方式编辑它。另一种方式是显示单个帧的图形视图。图形视图下方是代表每一帧的列表（水平方向）。这样，用户可以单击列表中的一个框架，图形视图现在会显示该框架。

问题是列表显示模型中每一行的第一列。我想要它做的是显示每一行的标题（所以列表显示“第 1 帧、第 2 帧等”）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-20T19:11:32.877

两种可能的解决方案：

1.  尝试使用代理模型（QAbstractProxyModel 的子类），它将行标题作为单行中的列进行访问。这不是微不足道的，因为代理模型将原始模型视为标头的数据显示为数据。

2.  显示模型的第二个 2D 视图，但隐藏除列标题之外的所有内容。由于您的框架是行，因此您需要一个代理模型来在行和列之间进行转置。

免责声明：我实际上并没有实施任何解决方案。

# charts - Web 服务器的数据可视化框架？

> ID：102801
> 
> 赞同：2
> 
> 时间：2008-09-19T15:24:33.947
> 
> 标签：charts, visualization

我需要一个用于生成数据可视化图表的框架。我拿起 Processing www.processing.org/ 但目前我无法从网络服务器以“无头”模式运行它。这个域还有其他候选人吗？如果您需要的图表类型多于开箱即用解决方案所支持的图表类型，有哪些选择

-巴拉尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-07T22:37:13.373

尝试使用[Silverlight](http://silverlight.net/)绘制客户端图表

一组很棒的 OpenSource Silverlight 图表已在 CodePlex 上发布 - 查看[http://silverlight.codeplex.com/](http://silverlight.codeplex.com/)

[视火](http://visifire.com/silverlight_charts_gallery.php)是 Silverlight 中提供的免费图表库

[这里](http://www.silverlightshow.net/items/Silverlight-1.0-Bar-Chart-Tutorial.aspx)有一个教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T06:52:25.773

[JFreeChart](http://www.jfree.org/jfreechart/)是一个选项，或者是一个软件报告软件工具，可以为您完成所有数据分析的步骤。我可以推荐**[i-net Clear Reports](http://www.inetsoftware.de)**，看看我是如何为 i-net 软件工作的……；）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-07T22:16:05.663

还有[Gnuplot](http://www.gnuplot.info/)，如果你想通过命令行调用东西，还有[Matplotlib](http://matplotlib.sourceforge.net/)，如果你使用 python。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-24T13:34:32.203

我现在正在使用 JDK 附带的 Graphics2D。有了这个，您不再局限于图表类型 - 只需集中数据模式并让 Graphics2D 完成它的工作。

# windows-server-2008 - 如何在运行 Vista x64 的虚拟机上启用网络？

> ID：102804
> 
> 赞同：1
> 
> 时间：2008-09-19T15:24:38.593
> 
> 标签：windows-server-2008, vista64, hyper-v

我正在运行带有 Hyper-V 的 Server 2008 64 位。我用 Vista 64bit 创建了一个虚拟机并安装了它。我无法让 Vista 虚拟机看到网络适配器。

我已经在虚拟网络管理器 (Hyper-V) 上设置了一个外部网络，并将其与虚拟机 (Vista) 相关联。我也尝试过使用旧版网络适配器，但这也不起作用，尽管当时 Vista 机器看到了网卡但无法通过它连接。

这是（显然）我第一次尝试设置虚拟机。

有任何想法吗？

编辑：我注意到这个问题已经被否决了几次。我知道这不是一个编程问题，但我是一名开发人员，我正在设置一个虚拟机来测试我的 C#/ASP.NET 代码，并认为其他开发人员在这样做时也可能会遇到这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T19:27:19.277

我不知道 Hyper-V，但我知道在 VMWare 中您可以在桥接模式下创建网络连接（这意味着如果启用，VM 将通过 DHCP 获得自己的 IP 地址）或仅主机模式（意味着 VM 只能与主人沟通）。当 Vista 可以看到该卡时，它是否可以与主机通信（这表明指定了仅主机连接）？它有什么样的 IP 地址（我猜 Hyper-V 有一个像 VMWare 一样的内置 DHCP 服务器？）——这可能会提供额外的线索。

抱歉，我不太了解 Hyper-V...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-20T05:46:25.903

事实证明，通过 Hyper-V 作为 VM 运行的 Vista x64 不支持虚拟网络连接/卡，您必须将其设置为旧版网卡。当我最终为旧网络正确设置配置并禁用它连接的虚拟网络时。

感谢您的帮助 - 非常感谢！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T20:25:24.970

确保您在来宾 VM 上安装了 Hyper-V 工具。您不应该需要旧适配器。

您可能还想确保您拥有所有可能已解决您的问题的最新更新。特别是 KB950050

[http://support.microsoft.com/kb/950050](http://support.microsoft.com/kb/950050)

# apache - RedHat 最新 RPM 的最佳来源在哪里？

> ID：102808
> 
> 赞同：0
> 
> 时间：2008-09-19T15:24:43.633
> 
> 标签：apache, redhat, rpm, rhel

我在哪里可以找到不同版本的 Redhat Enterprise Linux 的最新 RPM？具体来说，我正在寻找 Apache RPM。通常我会求助于：[http](http://dag.wieers.com/rpm/packages/) ://dag.wieers.com/rpm/packages/但他们似乎没有任何适用于 apache 的 RPMS。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-08T16:04:06.937

Fedora 为 RHEL 生成缺失但兼容的软件包，并将它们托管在名为 EPEL（企业 Linux 的额外软件包）的存储库中。

乍一看，我并没有在其中特别看到 Apache RPM，但 EPEL 绝对值得添加到您的其他软件存储库列表中。没有它，我无法忍受使用 RHEL/CentOS！

[http://fedoraproject.org/wiki/EPEL](http://fedoraproject.org/wiki/EPEL)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-09T07:59:13.270

您应该从 Red Hat Network 获得 RHEL 软件包。为了保持软件包的最大完整性，Red Hat 只修补具有严重错误（即安全性）的软件包，并将这些软件包反向移植到特定软件的主版本。

如果您想运行最新、最先进的 Apache，那么您几乎只能靠自己了。Red Hat 不会为未从 RHN 安装的特定 RHEL 版本的软件包提供任何支持。

虽然 Fedora Rawhide 等其他发行版的软件包可以干净地安装，但这些软件包并没有被 RHEL “祝福”。如果您正在运行 RHEL，请坚持使用 RHN 提供的软件包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T14:21:14.703

apache是​​指网络服务器吗？

如果是这样，它在 RHEL 中不称为“apache”。尝试：

```
yum install httpd 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T16:15:09.533

你看过[Fedora Rawhide](http://fedoraproject.org/wiki/Releases/Rawhide)吗？他们有 2.2.9 可用。它*应该*干净地安装在 RHEL 上。

# editor - 支持*超过* 4GB 文件的最佳免费文本编辑器？

> ID：102829
> 
> 赞同：82
> 
> 时间：2008-09-19T15:26:17.653
> 
> 标签：editor, text-editor, text-files, large-files

我正在寻找一个能够将 4+ GB 文件加载到其中的文本编辑器。文本板不起作用。我拥有它的副本并访问过它的支持站点，但它只是不这样做。也许我需要新硬件，但这是一个不同的问题。编辑器需要是免费的，或者，如果它要花费我，那么不超过 30 美元。对于 Windows。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2008-10-02T18:49:10.263

对于不同的用法，也可以考虑使用 glogg：

![格洛格截图](../Images/543288ca233beb28228c425d73755149.png)

警告（[Simon Tewsi](https://stackoverflow.com/users/216440/simon-tewsi)在[评论](https://stackoverflow.com/questions/102829/best-free-text-editor-supporting-more-than-4gb-files/163941#comment20978000_163941)中报告，2013 年 2 月）

> 一个警告 - 有两个搜索功能，`Main Search`和`Quick Find`.
> 下一个，我假设是`Quick Find`，至少比上一个慢一个数量级，后者很快。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2008-09-19T15:59:52.083

我不得不查看怪物（失控）日志文件（20+ GB）。我使用了可以处理任何大小文件的[hexedit 免费版。](http://www.hhdsoftware.com/free-hex-editor)它也是开源的。它是一个 Windows 可执行文件。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-09-19T15:30:16.567

杰夫阿特伍德在这里有一个帖子：http: [//www.codinghorror.com/blog/archives/000229.html](http://www.codinghorror.com/blog/archives/000229.html)

他最终选择了 Edit Pad Pro，因为“根据我之前的使用历史，我觉得 EditPad Pro 是最合适的：它在处理大型文本文件时速度非常快，具有同类最佳的正则表达式支持，而且它不会假装成为一个IDE。”

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-05-13T13:59:32.100

我没有在编辑器中加载巨大的日志文件，而是使用 Unix 命令行工具（如`grep`、`tail`、`gawk`等）将有趣的部分过滤到一个小得多的文件中，然后打开它。

在 Windows 上，尝试[Cygwin](http://www.cygwin.com/)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2011-01-30T12:11:54.477

您是否尝试过[上下文编辑器](http://www.contexteditor.org/)？它小而快。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-01-15T00:49:30.123

我多次偶然发现这篇文章，因为我经常需要处理大文件（10 Gigas+）。

在厌倦了 bug 和相当有限的免费软件之后，并且在试用期结束后不愿意为昂贵的编辑器付费（毕竟不值钱），我刚刚使用[VIM for Windows](ftp://ftp.vim.org/pub/vim/pc/gvim73_46.exe)并获得了巨大的成功和满足。

它非常适合这种需求，完全可定制，具有处理文本文件时可以想到的所有功能（搜索、替换、阅读等。你可以命名它）

我很惊讶没有人回答（除了以前的答案，但对于 MacOS）......

[为了记录，我在这篇博](http://blog.shlomoid.com/2009/08/free-text-editor-for-very-large-huge.html)文中偶然发现了它，它明智地建议了它。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-19T15:32:49.557

像这样处理4G文件真的很难。我曾经处理较大的文本文件，但我从来没有将它们加载到我的编辑器中。我在以前的公司主要使用 UltraEdit，现在我使用 Notepad++，但我只会得到那些我需要编辑的部分。（大多数情况下，文件从不需要编辑）。

为什么要将这么大的文件加载到编辑器中？当我处理这些大小的文件时，我使用了 GNU Core Utils。我对这些文件执行的最常见操作是 head（获取前 250k 行等）、tail、split、sort、shuf、uniq 等。它真的很强大。

使用 GNU Core Utils 可以做很多事情。我肯定会推荐那些，而不是新的编辑器。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2011-05-20T17:41:47.000

很抱歉在这么老的帖子上发帖，但我在这里尝试了几个技巧，但没有一个对我有用。

它与文本编辑器略有不同，但我发现 Beyond Compare 可以在我的 Vista 32 位机器上处理超大 (3.6 Gig) 文件。

这是 Emacs、Large Text File Viewer、HexEdit 和 Notepad++ 都无法使用的文件。

-埃里克

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-07-21T10:43:30.943

在尝试了几次读取 6GB mysqldump 文件后我最喜欢的：

**PilotEdit Lite** [http://www.pilotedit.com/](http://www.pilotedit.com/)

因为：

*   内存使用量（不知何故？！）从未超过 25MB，因此对我系统的其余部分基本上没有影响 - 尽管打开需要几分钟。
*   在那段时间有一个准确的进度条，所以我知道它是如何进行的。
*   一旦打开，简单的搜索和浏览文件都可以像一个小记事本文件一样工作。
*   免费。

其他我试过...

**EmEditor Pro**试用版非常令人印象深刻，文件几乎立即打开，但不幸的是对于我的要求来说太贵了。

**EditPad Pro**将整个 6GB 文件加载到内存中，让一切都慢了下来。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-19T15:28:31.860

对于 windows、unix 还是 Mac？在 Mac 或 *nix 上，您可以使用命令行或 GUI 版本的 emacs 或 vim。

对于 Mac：TextWrangler 可以很好地处理大文件。我对 Windows 环境不够精通，无法提供帮助。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-19T15:43:25.803

当我面对一个巨大的日志文件时，我不会尝试查看整个内容，我会使用[Free File Splitter](http://www.filesplitter.org)

诚然，这是一种解决方法而不是解决方案，有时您需要整个文件。但通常我只需要从一个较大的文件中查看几行，这似乎也是你的问题。如果没有，也许其他人会发现该实用程序很有用。

例如，如果您试图将其加载到 Excel 中以使用自动过滤器，则可以让您查看大量文本文件的查看器并没有多大帮助。由于我们都花一天时间将问题分解成更小的部分以便能够解决它们，因此将相同的原则应用于大文件并没有让我觉得有争议。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2010-07-02T22:41:11.053

如果您只想查看一个大文件而不是对其进行编辑，那么有几个免费软件程序可以一次读取文件块，而不是尝试将整个文件加载到内存中。当我需要阅读大型（> 5 GB）文件时，我会使用它们。

swiftgear [http://www.swiftgear.com/ltfviewer/features.html的大文本文件查看器](http://www.swiftgear.com/ltfviewer/features.html)

Team Walrus 的大文件查看器。

您必须自己找到最后一个链接，因为我最多只能发布一个超链接作为新手。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2011-10-05T16:41:05.983

HxD - 它是一个十六进制编辑器，但它允许就地编辑，并且不会对大文件产生干扰。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-01-07T09:56:13.293

[Tweak](http://www.chiark.greenend.org.uk/~sgtatham/tweak/)是一个十六进制编辑器，可以处理对非常大的文件的编辑，包括插入和删除。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-02-26T15:35:00.550

[EmEditor](http://www.emeditor.com/)应该处理这个问题。正如他们的[网站声称](http://www.emeditor.com/modules/feature1/rewrite/tc_7.html#large_file_controller)的那样：

> EmEditor 现在可以打开超过**248 GB（或 21 亿行）**的文件，方法是使用新的自定义栏 - 大文件控制器打开文件的一部分。大文件控制器允许您指定要打开的文件的起点、终点和范围。它还允许您停止打开文件并监视文件的实际大小和可用临时磁盘的大小。

虽然不是免费的。。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-03-19T13:47:36.043

我发现 FAR 指挥官可以打开大文件（我尝试了 4.2 GB xml 文件）并且它不会将整个文件加载到内存中并且运行速度很快。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-07-15T15:10:25.003

# 打开 5GB 文件（快速）：

1)**十六进制编辑器 Neo**

2) **010 编辑器**

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-19T15:43:54.057

Textpad 也适用于打开该大小的文件。当不得不处理 3-5gb 范围内的超大日志文件时，我已经做过很多次了。此外，使用 grep 拉出有价值的行，然后看看那些作品很棒。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-19T15:48:08.617

这个问题需要更多细节。
您只想查看文件（例如日志文件）还是编辑它？
您的内存是否比您要加载的文件的大小更多或更少？
例如，[TheGun](http://www.movsd.com/thegun.htm "枪")是一个用汇编语言编写的非常小的文本编辑器，它声称“*没有有效的文件大小限制，可以加载到其中的最大大小取决于可用内存和文件的加载速度。[.. .] 它已针对文件加载和保存进行了速度优化。* "

为了抽象内存限制，我想可以使用映射内存。但是，如果您需要编辑文件，则应该使用一些巧妙的方法，例如将本地更改存储在内存中，并在保存时逐块应用它们。在某些情况下可能无效（例如大搜索/替换）。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-10-05T02:55:32.060

我在 4G 文件上也遇到了 TextPad 的问题。Notepad++ 很好用。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2008-09-19T15:29:11.610

[Emacs](http://www.gnu.org/software/emacs/)可以处理[巨大的文件大小](http://www.freelists.org/archives/glug_t/03-2005/msg00032.html)，您可以在 Windows 或 *nix 上使用它。

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2008-09-19T15:32:54.160

您使用的是什么操作系统和 CPU？如果您使用的是 32 位操作系统，则系统上的进程在物理上不能寻址超过 4GB 的内存。由于大多数文本编辑器都试图将整个文件加载到内存中，我怀疑你会找到一个能做你想做的事。它必须是一个非常漂亮的文本编辑器，可以进行核外处理，即一次加载一个文件块。

如果您在具有 64 位 CPU 和 64 位操作系统的计算机上使用 64 位文本编辑器，您可能能够加载如此巨大的文件。而且您必须确保您的交换分区或交换文件中有足够的空间。

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2008-09-19T15:33:50.413

为什么要将 4+ GB 的文件加载到内存中？即使您找到可以做到这一点的文本编辑器，您的机器是否有 4 GB 内存？除非它有超过 4 GB 的物理内存，否则你的机器会变慢很多，并且交换文件会发疯。

那么为什么你想要一个 4+ GB 的文件呢？如果您想对其进行转换，或进行搜索和替换，您最好编写一个小型快速程序来完成它。

* * *

## 回答 #24

> 赞同：-2
> 
> 时间：2008-09-19T15:33:09.480

我也喜欢[记事本++](http://notepad-plus.sourceforge.net/uk/site.htm)。

# java - 使用 Seam/JSF 获取表单请求

> ID：102832
> 
> 赞同：2
> 
> 时间：2008-09-19T15:26:31.850
> 
> 标签：java, rest, jsf, seam

我有一个查询表单，我想以 GET 请求的形式提交，因此结果页面可能会被添加书签或 RESTful。这是带有提交按钮的经典文本字段。我如何诱导 Seam/JSF 使用 GET 并将查询表达式作为参数而不是默认的 POST？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-19T16:39:25.840

您需要做的就是在 web.xml 中启用 SeamFilter。有关使用 Seam 的示例 RESTful 应用程序，请参阅[博客示例。](http://docs.jboss.com/seam/2.0.2.SP1/reference/en-US/html_single/#blog)关键是使用一个Seam页面参数，定义在WEB-INF/pages.xml

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T15:31:50.947

您可以使用 PhaseListener 将 POST 请求转换为 GET 请求，或者只是解释 GET 请求，以便它们可以收藏。

这个页面应该更详细地解释：

[http://balusc.blogspot.com/2007/03/post-redirect-get-pattern.html](http://balusc.blogspot.com/2007/03/post-redirect-get-pattern.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-02-10T19:13:13.630

如果您使用`s:button`or `s:link`，您的表单将使用 GET 方法。

# asp.net - How do I use ASP.NET with Visual Studio 2008

> ID：102833
> 
> 赞同：3
> 
> 时间：2008-09-19T15:26:33.927
> 
> 标签：asp.net, visual-studio

I haven't used Visual Studio since VB 3 and am trying to give it a shot with ASP.NET. It seems that it should be able to connect to a website (via some sort of ftp like protocol I figure) and allow to edit without having to manually upload/download the files. Is this the way it is supposed to work or am I mis-understanding? I have tried using 'create new website' and 'open website' using my testing domain (hosted by godaddy, wondering if that may be the issue as well), each time it gives me errors. I'm not sure if I'm doing something wrong or trying to do something it wasn't meant to.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T15:28:53.013

You really don't want to be working directly on a live web site, do you? That's just crazy. One little mistake and you've hosed the site.

Visual Studio now has it's own built in web server. You use that for testing. If you really don't want to use that you can put IIS on your local machine or set up a Dev/QA server somewhere. In that case, you'd edit it via a file share.

You should be using some kind of source control. Even for a single developer it's very important. When finished with a programming session, you check your updates back into source control.

Finally, only after the site's gone through a suitable QA process, the production server is updated from source control, not from within visual studio.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T15:29:15.057

I would develop your website locally and ftp it to your godaddy website after or use the publish website feature in VS

# c# - 在 IIS7 中将表单发布到 404 + HttpHandler：为什么所有 POST 数据都丢失了？

> ID：102846
> 
> 赞同：2
> 
> 时间：2008-09-19T15:27:37.073
> 
> 标签：c#, .net, iis-7, httphandler

好的，这听起来可能有点混乱和复杂，所以请耐心等待。

我们编写了一个框架，允许我们定义友好的 URL。如果您浏览任意 URL，IIS 会尝试显示 404 错误（或者，在某些情况下，显示 403;14 或 405）。但是，IIS 已设置为将指向这些特定错误的任何内容发送到 .aspx 文件。这允许我们实现一个 HttpHandler 来处理请求并做一些事情，这包括找到关联的模板，然后执行与之关联的任何内容。

现在，这一切都适用于 IIS 5 和 6，在某种程度上，也适用于 IIS7 - 但有一个问题，当您发布表单时会发生这种情况。

看，当您将表单发布到不存在的 URL 时，IIS 会说“啊，但该 url 不存在”并抛出 405“方法不允许”错误。因为我们告诉 IIS 将这些错误重定向到我们的 .aspx 页面并因此使用我们的 HttpHandler 来处理它，所以这通常不是问题。但是从 IIS7 开始，所有的 POST 信息在被重定向到 405 后都丢失了。所以你不能再做涉及表单的最琐碎的事情了。

为了解决这个问题，我们尝试使用 HttpModule，它保留 POST 数据，但似乎没有在正确的时间（需要时）初始化 Session。我们还尝试对所有请求使用 HttpModule，而不仅仅是命中 404/403;14/405 的丢失请求，但这意味着图像、css、js 等内容正在由 .NET 代码处理，这非常低效。

这让我想到了一个实际的问题：有没有人遇到过这种情况，有没有人有任何建议或知道该怎么做才能让事情恢复正常？到目前为止，有人建议使用微软自己的[URL 重写模块](http://learn.iis.net/page.aspx/460/using-url-rewrite-module/)。这会帮助解决我们的问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-20T20:02:09.947

由于 IIS7 自上而下使用 .net，因此使用 HttpModule 不会产生任何性能开销，事实上，每个请求都会使用几个托管 HttpModule。当 BeginRequest 事件被触发时，SessionStateModule 可能尚未添加到 Modules 集合中，因此如果您尝试在此事件期间处理请求，则不会提供会话状态信息。如果请求的处理程序需要，设置 HttpContext.Handler 属性将初始化会话状态，因此您只需将处理程序设置为实现 IRequiresSessionState 的花哨的 404 页面。下面的代码应该可以解决问题，尽管您可能需要为 IsMissing() 方法编写不同的实现：

```
using System.Web;
using System.Web.UI;

class Smart404Module : IHttpModule
{
    public void Dispose() {}

    public void Init(HttpApplication context)
    {
        context.BeginRequest += new System.EventHandler(DoMapping);
    }

    void DoMapping(object sender, System.EventArgs e)
    {
        HttpApplication app = (HttpApplication)sender;

        if (IsMissing(app.Context))
            app.Context.Handler = PageParser.GetCompiledPageInstance(
                "~/404.aspx", app.Request.MapPath("~/404.aspx"), app.Context);
    }

    bool IsMissing(HttpContext context)
    {
        string path = context.Request.MapPath(context.Request.Url.AbsolutePath);

        if (System.IO.File.Exists(path) || (System.IO.Directory.Exists(path)
            && System.IO.File.Exists(System.IO.Path.Combine(path, "default.aspx"))))
            return true;
        return false;
    }
} 
```

编辑：我添加了 IsMissing() 的实现

注意：在 IIS7 上，会话状态模块默认不会全局运行。有两个选项：为所有请求启用会话状态模块（请参阅上面关于为所有请求类型运行托管模块的评论），或者您可以使用反射来访问 System.Web.dll 中的内部成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-08T19:02:28.527

微软为此发布了一个修补程序：

[http://support.microsoft.com/default.aspx/kb/956578](http://support.microsoft.com/default.aspx/kb/956578)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-10-19T20:37:25.350

IIS 7 中的 post 变量未传递到自定义错误处理程序的问题已在 Vista 的 Service Pack 2 中得到修复。还没有在 Windows Server 上尝试过，但我相信它也会在那里修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T15:50:54.333

只是一个猜测：在 IIS7 的 %windir%\system32\inetsrv\config\applicationhost.config 中指定的处理您的请求的处理程序根本不允许 POST 动词通过，它在确定 URL 是否为之前评估该规则不存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-20T10:56:45.003

是的，我肯定会推荐 URL 重写（使用 Microsoft 的 IIS7 之一或众多替代方案之一）。这是专门为提供友好的 URL 而设计的，而错误文档是失败的最后后盾，它往往会破坏传入的数据，因此它可能不是您所期望的。

# perl - 如何在没有 root 访问权限的情况下在本地安装 CPAN 模块（DynaLoader.pm 第 229 行错误）？

> ID：102850
> 
> 赞同：8
> 
> 时间：2008-09-19T15:27:47.650
> 
> 标签：perl, installation, cpan

不适用于其他模块，但举个例子。我使用 CPAN 设置安装了 Text::CSV_XS：

```
'makepl_arg' => q[PREFIX=~/lib], 
```

当我尝试运行 test.pl 脚本时：

> $ perl test.pl

```
#!/usr/bin/perl

use lib "/homes/foobar/lib/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi";

use Text::CSV_XS;

print "test"; 
```

我明白了

```
无法为模块 Text::CSV_XS: /homes/ 加载 '/homes/foobar/lib/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/Text/CSV_XS/CSV_XS.so' foob​​ar/lib/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/Text/CSV_XS/CSV_XS.so：无法打开共享对象文件：/www/common/perl 中没有这样的文件或目录/lib/5.8.2/i686-linux/DynaLoader.pm 第 229 行。
在 test.pl 第 6 行
在 test.pl 第 6 行的 require 编译失败。
BEGIN failed——编译在 test.pl 第 6 行中止。

```

我将错误追溯到 DynaLoader.pm 它发生在这一行：

```
# Many dynamic extension loading problems will appear to come from
# this section of code: XYZ failed at line 123 of DynaLoader.pm.
# Often these errors are actually occurring in the initialisation
# C code of the extension XS file. Perl reports the error as being
# in this perl code simply because this was the last perl code
# it executed.

my $libref = dl_load_file($file, $module->dl_load_flags) or
    croak("Can't load '$file' for module $module: ".dl_error()); 
```

**CSV_XS.so 存在于上述目录中**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-19T17:41:23.990

当你安装模块时，你看输出了吗？它在哪里说它安装了模块？查看*lib*。你看到你期望的下一个目录了吗？

查看 ~/lib 以查看所有内容的最终位置，以验证您的`use lib`语句中的目录名称是否正确：

```
% find ~/lib -name CSV_XS.so 
```

一旦您看到它的安装位置，请在您的`use lib`（或 PERL5LIB 或其他）中使用该目录名称。

我希望你有一个`lib/lib`不知何故。这`PREFIX`只是前缀，安装程序会将其他目录部分附加到该基本路径。这包括 lib、man、bin*等*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-23T01:28:44.040

我个人建议使用[local::lib](http://search.cpan.org/dist/local-lib/)。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-19T15:39:48.730

试试这个：

```
'makepl_arg' => q[PREFIX=~/] 
```

PREFIX 为您将安装到的所有目录（bin、lib 等）设置基础。

您的“~”也可能遇到外壳扩展问题。您可以尝试自己扩展它：

```
'makepl_arg' => q[PREFIX=/home/users/foobar] 
```

如果您包含用于获取您所询问的错误的命令，这也会很有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-07T23:17:33.287

从错误消息（“at /www/common ...”）中可以看出，您的脚本是 CGI 或 mod_perl 脚本。Web 服务器可能没有以用户 'foo' 的身份运行，您在其主目录下安装了模块 - 这可能导致 Web 服务器无法读取该目录。

它也可能在“ [chroot jail](http://en.wikipedia.org/wiki/Chroot_jail) ”中运行，这意味着您安装模块的目录可能对脚本不可见。

换句话说，仅仅因为*您*可以看到模块，并不意味着 Web 服务器以及您的脚本可以这样做。你应该检查相关的文件权限，如果服务器是chroot，你的模块目录是否挂载在虚拟文件系统中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T16:32:46.450

有问题的文件 (CSV_XS.so) 是否存在？

它是否存在于列出的位置？

如果你这样做：

```
set |grep PERL 
```

输出是什么？

您是否成功安装了其他本地 perl 模块？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T20:41:08.147

如果你有空间，我强烈建议在你自己的主目录中安装你自己的 perl。然后，您可以控制一切并保留自己的模块集，以及在管理员让您使用旧版本的 perl 时逃脱。（更不用说如果有一天他们升级并遗漏了你所依赖的所有模块，你就可以保护自己。）

# asp.net - 在 asp.net 2.0 中列出的 JSON 字符串或其他可用格式

> ID：102866
> 
> 赞同：1
> 
> 时间：2008-09-19T15:28:45.620
> 
> 标签：asp.net, json

我有一个`JSON`格式`string`。我需要将它存储在一个`key-pair`值或类似的东西中。我正在使用`asp.net 2.0`并且不能使用 3rd 方之`DLL`类的`Newtonsoft.Json.dll`。我想最后一个选择是使用`regular expression`.

*有人可以帮我吗？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-14T19:13:21.827

如果您访问[http://www.json.org/](http://www.json.org/)并查看页面底部，这里有几十个 json 库，其中大部分是开源的，我相信他们列出了 8 个 C#。如果您不能引用这些库之一，我认为您最好的选择是找到一个具有许可许可证的库，然后简单地将代码添加到您的项目中。

另一个想法是查看[http://www.json.org/](http://www.json.org/)上的图表、语法和语法，然后编写自己的解析器，但 regex**不是**这样做的方法。如果您不知道如何编写解析器，您可以查看其中一个开源 json 库或从不太复杂的东西开始，例如好的 CSV 解析器，这里有一篇看起来不错的论文：http: [//www.boyet.com /Articles/CsvParser.html](http://www.boyet.com/Articles/CsvParser.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-01T20:13:37.133

可以使用 C# 中的 JScript 将 JSON 序列化为键/值对。您需要为您的项目添加一些引用。它们是 .NET 框架的一部分，您只需将引用添加到您的项目中。你需要：

*   Microsoft.JSript
*   微软Vsa

首先，您班级顶部的使用：

```
using Microsoft.JScript;
using Microsoft.JScript.Vsa; 
```

`Page`然后需要在您的“ ”代码隐藏中的某处初始化将执行脚本的引擎：

```
VsaEngine Engine = VsaEngine.CreateEngine(); 
```

然后您只需创建此方法并通过传入您的 JSON 对象来调用它：

```
object EvalJScript(string JScript)
{
    object result = null;
    try
    {
        result = Microsoft.JScript.Eval.JScriptEvaluate(JScript, Engine);
    }
    catch (Exception ex)
    {
        return ex.Message;
    }

    return result;
} 
```

返回的类型`object`（如果传入 JSON）是“ `JSObject`”。您可以将其值作为键/值对访问。有关此对象的更多详细信息，请阅读[MSDN 文档](http://msdn.microsoft.com/en-us/library/microsoft.jscript.jsobject.aspx)。

下面是一个使用代码的例子：

```
string json = "({Name:\"Dan\",Occupation:\"Developer\"})";

JSObject o = EvalJScript(json) as JSObject;

string name = o["Name"] as string; // Value of 'name' will be 'Dan' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T15:34:53.563

你可以使用 JScript.NET 吗？

如果是这样，使用 eval() 应该很容易 - 然后只需遍历返回的对象并转换为 KeyValuePair 或其他

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-09-19T16:43:49.713

您将需要使用 jscript.net 作为语言背后的代码，但如果您喜欢的话，您网站的其他页面应该可以保留为 c#。

正如之前的评论中提到的，您需要了解安全方面和风险 - 如果您信任您正在解析的 JSON，请仅使用 eval ！

# wmi - 可以使用 WMI 创建 MSMQ 消息队列（PRIVATE 队列）吗？

> ID：102877
> 
> 赞同：1
> 
> 时间：2008-09-19T15:29:23.340
> 
> 标签：wmi, msmq

我需要在远程机器上创建一个 PRIVATE 消息队列，并且我已经决定不能以直接的方式使用 .NET Framework 执行此操作。我可以在远程机器上创建公共消息队列，但不能创建私人消息队列。我可以在本地创建一个消息队列（公共或私有）。

我想知道是否有人知道如何通过 WMI 访问 MSMQ。

**编辑：**我看不出使用 MSMQ 提供程序有什么用。可能不得不变得棘手并使用 PSExec 登录到远程服务器并执行一些代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-31T14:55:45.160

是的，在 .NET 中创建队列很简单，但是您不能以这种方式在远程计算机上创建私有队列。一段时间以来，我一直在考虑将队列创建添加到 MSMQ WMI 提供程序中……如果您需要它用于真正的产品/客户，您可以联系我，我会考虑优先考虑此功能。一切顺利，约尔·阿农

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T17:28:24.257

关于 MSMQ 和 WMI 的博客文章在这里：[http://msmq.spaces.live.com/blog/cns!393534E869CE55B7!210.entry](http://msmq.spaces.live.com/blog/cns!393534E869CE55B7!210.entry)

它说这里有一个提供者：[http://www.msmq.biz/Blog/MSMQWmiSetup.msi](http://www.msmq.biz/Blog/MSMQWmiSetup.msi)

它还说这里有一个参考：[http://www.msmq.biz/Blog/MSMQ%20WMI%20Provider%20Objects.doc](http://www.msmq.biz/Blog/MSMQ%20WMI%20Provider%20Objects.doc)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-01T00:58:44.057

WMI 无法立即执行此操作。上一个答案有一些晦涩的 WMI 提供程序，但它似乎甚至不支持创建队列。

然而，这在 .NET 中非常简单！我不会去 PSExec 这么远。 [消息队列.创建](http://msdn.microsoft.com/en-us/library/aa329475(VS.71).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-13T15:17:41.390

```
set qinfo = CreateObject("MSMQ.MSMQQueueInfo")
qinfo.PathName = ".\Private$\TestQueue"
qinfo.Label = ".\Private$\TestQueue"
qinfo.Journal = "1"
qinfo.Create 
```

在文本编辑器中复制代码，将文件另存为`.vb`s 并执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-01-08T18:30:45.410

我也想创建远程私有队列，但由于 .NET 不支持它，我们决定只使用远程公共队列。如果我们根据需要设置队列的发送和接收权限，这应该没问题。

一种解决方法是编写您自己的 Windows 服务或 Web 服务，这些服务或 Web 服务在队列需要驻留的同一台机器上运行。您可以通过套接字或 http 远程调用此服务，并且您的本地运行代码可以创建*本地*私有队列。

如果使用直接名称格式引用队列，*则可以*从远程专用队列发送和接收。

# sql - 如何让日期时间在 oracle 中以军用时间显示？

> ID：102881
> 
> 赞同：5
> 
> 时间：2008-09-19T15:29:34.230
> 
> 标签：sql, oracle

我正在运行一些查询来追踪我们的备份日志的问题，并希望以 24 小时军用时间显示日期时间字段。有没有一种简单的方法可以做到这一点？我试过谷歌搜索，什么也没找到。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-19T15:31:28.140

```
select to_char(sysdate,'DD/MM/YYYY HH24:MI:SS') from dual; 
```

以 24 小时格式给出时间。

[此处](http://www.oradev.com/oracle_date_format.jsp)描述了更多选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-20T04:03:11.733

如果您希望会话中的所有查询都显示完整的日期时间，请执行

```
alter session set NLS_DATE_FORMAT='DD/MM/YYYY HH24:MI:SS' 
```

在您的会话开始时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T15:32:05.283

使用`to_char(field,'YYYYMMDD HH24MISS')`.

[此处](http://www.ss64.com/orasyntax/fmt.html)提供了一个很好的日期格式列表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T15:31:21.060

确定日期显示的不是 oracle，而是您用来运行查询的工具。你用什么来显示结果？然后我们可以为您指出正确的设置。

# google-chrome - 有人瞄准谷歌浏览器吗？（网络应用程序、插件）

> ID：102894
> 
> 赞同：9
> 
> 时间：2008-09-19T15:30:43.883
> 
> 标签：google-chrome

有没有人专门编写应用程序来利用谷歌浏览器？
是否有企业用户正在考虑将其用作标准浏览器？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-20T21:51:05.630

是的，我已经开始非常关注 Google Chrome 的应用程序。最近的分析表明，我的用户中有 6%-15% 正在 Chrome 上访问我的应用程序（在不同的应用程序中从 6 到 15 不等）。而且，这个数字看起来呈上升趋势。

因此，我现在不能真正忽略它进行测试。

就以它为标准而言，那还有很长的路要走。我还要测试IE6！:( 不过，我们一直计划在 Chrome 使用率超过 25% 时开始使用 Gears 等功能（Chrome 内置 - 可在其他地方下载）。那时我相信我们会将 Chrome 视为我们的首选浏览器。我希望到那时我们已经有了 Chrome 1.0+！;)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-19T15:39:13.880

我切换到 Chrome 并没有回头，除了偶尔无法正常工作的网站，迫使我在 Firefox 中加载它。我所有现有的 Web 应用程序都可以在它上面正常工作，我正在使用它来对我当前的开发项目进行初步测试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-19T15:43:14.993

我实际上并不是针对 chrome，但我已将 chrome 添加到我的浏览器中以测试网站。我在这个产品中发现了一些奇怪的怪癖，其中一些插件会导致浏览器挂起，或者在某些环境中运行速度非常慢，但它们仍处于积极开发中的 beta 阶段。但我现在肯定要确保我工作的网站在 chrome、firefox、最新版本的 IE、safari、Konquerer 和 opera 中渲染得很好。我通常也会查看它在 lynx 上的外观，这有助于我捕捉图像中的“非交替文本”。是的，我知道这不是一个词，但有些人会明白我在说什么。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-19T15:36:54.197

因为 chrome 使用 webkit 来渲染 HTML，你可以放心，如果它在 safari 中工作，它会在 chrome 下工作，但是它的渲染引擎[还没有达到标准](http://www.flickr.com/photos/kurafire/2822606444/)。我认为编写利用它的应用程序类似于编写 iPhone 应用程序，记住 chrome 有望被 android 采用以使其类似于 iPhone。这样，它几乎可以利用所有这些 iPhone 应用程序。

我会安装它作为选择的浏览器吗？还没有——但我肯定会在所有浏览器上呈现的有效网页上工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-26T05:13:46.120

我们的一位主要客户已经取缔了 Chrome，因为它无需询问就安装在 C 盘上。他们部署了一个标准镜像，带有一个小的 C 盘和一个大的 D 盘，因此他们可以轻松地在 C 上重新克隆镜像的系统部分，而不会破坏 D 上的客户个人文件。大多数软件允许您选择安装目录。任何违反这一规定的行为都是不允许的，而且他们是一家足够大的公司，可以在大多数供应商中占有一席之地。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-26T06:08:22.530

我们有足够的头痛试图支持

*   火狐
*   两个版本的 IE，它们有自己的 iffy 错误
*   苹果浏览器

我不确定我们为什么继续支持 Safari。我们的大多数用户（企业）使用 IE6 或 IE7。我们试图确保事情在这两个方面都有效。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-08-20T11:44:33.100

也许不是出于编程目的，但带有 Google Reader 的 Chrome 是最强大的 RSS 阅读器。可以处理多达 1500 个提要，性能仍然可以，管理订阅仍然有效。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-19T15:31:38.500

我在我的工作机器上使用它，但仅此而已。它对我来说很稳定，我喜欢准系统 UI。不过，我仍然会为 Web 开发人员扩展切换到 Firefox。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-19T15:37:40.683

我喜欢 GoogleChrome 的一些内容——带有您最近的 9 个的起始页是我的赢家。该界面需要一点时间来适应，但速度令人印象深刻，尤其是在使用 Gmail 时。

但是，它与 Java 出现故障，目前排除了它进行认真工作的可能性。我主要使用 FireFox，并为工作中的“其他”网站使用 Chrome。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-19T16:01:14.700

我正在考虑在 Intranet 项目中使用 GWT，并考虑向使用 Chrome 的用户建议利用增强的 Javascript 性能。任何重 AJAX 的应用程序都是 Chrome 的理想选择。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-20T01:38:01.990

在我的公司，我们没有针对它，但我们肯定会关注它。我的老板正在使用它作为他的主要浏览器，我已经在我们的脚本中为它实现了浏览器检测，以防我们出于某种原因需要定位它。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-20T01:45:08.400

Chrome 存在 .png 不透明度错误，如果您尝试将不透明度从 0 转换为 1，则 .png 的透明部分为纯色。在 IE7 中，不透明部分为黑色，而在 Chrome 中，它们为白色。今天，我决定继续在我的 JavaScript 中解决这个错误。我并没有经常在 Chrome 上测试网站，但实际上我几乎所有的浏览都使用它。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-20T05:57:12.367

只要有稳定的 Linux 和 OSX 客户端可用，我就会以 Chrome 为目标。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-20T16:29:31.940

现在针对 Chrome/Chromium，我认为就像针对 Konqueror 网络浏览器一样。它会变得流行，但你应该等待更稳定的测试版和/或一些 Linux 和 OS X 客户端。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-10-26T06:26:46.520

我的网站统计数据显示 3.xx % 的访问者使用 Chrome 几周前才到达。而 Opera 仅 4.xx % 已经存在好几年了。

您可以轻松地看到 Chrome 的增长速度。

你可以看到谷歌也很容易接管你的计算世界和个人世界的所有领域。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-10-26T06:32:41.780

由于 Chrome 使用 Webkit，它具有与 Safari 相同的渲染引擎和 DOM 支持（但不一定是相同的 Webkit 版本）。通过在 Safari 中进行测试，您通常可以不用担心 Chrome。您发现的任何差异可能只是您应该提交而不是解决的错误。

但是，由于 Chrome 使用不同的 JS 引擎，可能与 Safari 存在一些不兼容之处。所以，如果你在用 JS 做任何事情，你不妨启动 Chrome 看看是否有什么明显的错误。

不过，一般来说，您的目标不是浏览器，而是渲染引擎（及其相关的 DOM 支持和 JS 引擎）。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2008-09-19T15:31:19.000

我正在使用谷歌浏览器，到目前为止，我所有的网络应用程序都可以正常工作，没有任何修改。

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2009-07-08T12:31:44.220

不。

1.  为什么要帮助谷歌进一步建立邪恶帝国？在这种特殊情况下，很明显他们并不关心用户，而只是痴迷于收集使用信息。

2.  它还不是主要参与者

# windows - 使用脚本构建新计算机

> ID：102900
> 
> 赞同：1
> 
> 时间：2008-09-19T15:31:01.137
> 
> 标签：windows, scripting, build-automation

我想自动化设置新 PC 的过程，这将包括下载和安装最新的 Windows 和 Office 更新；从网络共享安装软件（某些软件需要重新启动，因此脚本需要能够登录并继续）将 PC 添加到域并设置本地用户帐户。

这可能吗？实现这一目标的最佳脚本语言是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T15:33:44.330

查看[nLite](http://www.nliteos.com/)。允许您预先配置许多选项、滑流更新和服务包等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-21T04:27:16.813

企业 IT 中的标准方法是[Microsoft 部署工具包 (MDT)](https://docs.microsoft.com/en-us/windows/deployment/deploy-windows-mdt/deploy-windows-10-with-the-microsoft-deployment-toolkit)。即使使用了另一种操作系统部署技术（SCCM、BigFix、SpecOps...），Windows 映像通常也是在 MDT 中开发的。

没有比[Johan Arwidmark 的](https://deploymentresearch.com/Research)丛书[“部署基础”](https://deploymentartist.com/Books)更好的入门指南了。[Windows Noob](https://www.windows-noob.com/forums/forum/74-microsoft-deployment-toolkit-mdt/)也有材料。

部署操作系统后，您可以集成[Chocolatey](https://chocolatey.org/)、[BoxStarter](https://boxstarter.org/)或[Ninite](https://ninite.com/)进行应用程序管理。

# build-process - 什么是好的 CI 构建过程

> ID：102902
> 
> 赞同：12
> 
> 时间：2008-09-19T15:31:02.573
> 
> 标签：build-process, build-automation, continuous-integration

什么构成了一个好的 CI 构建过程？

我们使用 CI，但是当您依赖于应该部署的多个服务并且其他应用程序也可能依赖于这些服务时，部署到生产甚至是一个现实的 CI 目标。

当一个好的 CI 构建过程自动化到 QA 并从那里手动时，它是否足够好？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-19T17:09:44.160

这要看情况” ：）

我们使用 CI 系统来：

1.  构建和单元测试
2.  部署到单机，运行集成测试和代码分析
3.  部署到实验室环境
4.  在类似产品的系统中运行验收测试
5.  删除传递给代码删除以进行产品部署的构建

这是一个新项目，大约十几个服务和数据库部署到 20 多台服务器上，还依赖于六个其他“外部”服务。

使用 CI 工具将您的产品部署到生产环境作为一个现实的目标？再次......“这取决于”

你为什么想做这个？

*   如果你有这个过程，你可以更快、更频繁地滚动更改（和回滚）
*   减少人为错误的机会
*   您可以在投入生产之前在测试环境中测试相同的部署策略并尽早发现问题

在回答这个问题之前，您必须解决一些技术问题：

*   您的系统的正常运行时间要求是什么——您是否允许停机或是否需要 24/7 不间断运行？
*   您是否有需要人工干预/批准的变更控制流程？
*   如果部署失败，您的部署是否足够健壮，任何组件都可以回滚到已知良好状态？
*   您的系统是否设计为在一个或多个组件部署失败时处理不同版本的服务或客户端（并且您有上述回滚到最后一次已知的良好状态）？
*   该过程是否具有处理组件无法处理其依赖项/客户端的混合版本的部分部署的智能？
*   您如何处理数据库部署/升级？
*   您是否进行了监控，以便知道何时出现问题？

以下是一些关于[自动化](http://ayende.com/Blog/archive/2008/09/08/Requirements-101-Have-an-automated-deployment.aspx)和[构建您需要的工具](http://ayende.com/Blog/archive/2008/09/08/Build-the-tools-that-arent-there.aspx)的最新相关链接。

When it comes down to it the more complex your system the more difficult it is do automate everything, but that does not mean it is not a worthy goal, it just takes a lot more effort and willpower to get it done -- everything from knowing the difficulties you're going to face, the problems you have to account for (failure *will* happen), the political challenges of building infrastructure (vs. more product features).

Now heres the big secret... the technical challenges are challenging but not impossible... the *political* challenges may be insurmountable. Everything about this costs money whether its dev time or buying 3rd party solutions. So really, can you build the $1K, $10K, $100K, or $1M solution?

Whatever solution you go for make sure the automation is robust first, complete second... i.e. make sure you have as robust a solution as you can for getting deployment to a test environment rather than a fragile solution that deploys to production.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-19T15:36:37.457

CI 并非旨在作为一种部署机制。最好让您*的*CI 对 QA/Test 服务器执行任何自动部署，以确保您的构建工作的这些方面，但我不会使用像 Cruise Control 或 Bamboo 这样的 CI 系统作为部署手段。

CI 用于定期构建代码库以自动执行自动化测试、通过静态分析和其他类似检查来验证代码库。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-19T15:50:08.860

确保您了解 CI 构建背后的想法。CI 代表持续集成，CI 构建实际上是一次性构建，当开发人员将代码签入源代码控制系统（或在某个指定的时间间隔）时执行，以确保最新的更改不会破坏代码库（因此不断将更改集成到代码库的想法）。

为此，与构建过程中实际发生的情况相比，用于实际构建服务器过程的技术在很大程度上无关紧要。正如@pdavis 提到的，CI 构建应该编译代码库，执行一些代码分析（FxCop、StyleCop、Lint 等）、执行单元测试和代码覆盖率，并执行您想要执行的任何其他应该影响概念的自定义分析“成功”或“失败”的构建。

让 CI 构建自动部署到环境实际上并不在构建服务器的控制之下。话虽如此，您始终可以创建一个单独的项目，该项目在构建服务器上运行，当它检测到某些条件（例如构建成功完成）时处理部署，但这应该始终作为一个完全独立的事情来完成。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-19T15:37:55.067

我正在开始一个我非常期待的新项目。我们仍处于初始设计阶段，最近刚刚完成了逻辑系统架构。我们为测试和登台环境订购了新服务器，并正在建立一个基于 Cruise Control ( [http://cruisecontrol.sourceforge.net/](http://cruisecontrol.sourceforge.net/) ) 和 MSBuild ( [http://msdn2.microsoft) 的持续集成 (CI) 构建系统。 com/en-us/library/wea2sca5.aspx](http://msdn2.microsoft.com/en-us/library/wea2sca5.aspx)），它基本上是 ANT 的改进端口。似乎 Visual Studio 2005 项目和解决方案文件现在都是 MSBuild 格式。Cruise Control 会自动从 Visual Source Safe 中提取源代码（好吧，它不是 Subversion，但我们可以处理），编译它，然后通过 fxCop 运行它（[http://www.gotdotnet.com/Team/FxCop/](http://www.gotdotnet.com/Team/FxCop/) )、nUnit ( [http://www.nunit.org/](http://www.nunit.org/) )、nCover ( [http://ncover.org/site/](http://ncover.org/site/) )，最后但不租用 Simian （[http://www.redhillconsulting.com.au/products/simian/](http://www.redhillconsulting.com.au/products/simian/)）。Cruise Control 有一个非常好的网站界面，用于显示来自各种工具的所有编译结果，甚至可以显示从一个构建到下一个构建的代码更改。它还跟踪构建历史中的所有构建。我很期待测试驱动的开发，并认为这种与 nUnit/nCover 相结合的方法应该会给我们一个很好的主意，然后再推出我们没有破坏任何东西的更改。一旦我们在项目中走得足够远，还计划加入某种类型的自动化用户界面测试。根据工具的不同，这应该只是在构建服务器上安装工具并从 Cruise Control 调用它的问题。甜的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-19T15:38:55.300

一个好的 CI 过程将具有完整或几乎完整的单元测试覆盖率。单元测试测试类和方法，而集成测试则测试系统的多个部分。当您设置 CI 构建时，让它们自动执行单元测试。这样，CI 构建每天可以运行多次。我们设置为每 2 小时运行一次。

您可以拥有每天运行一次的运行时间更长的构建。这些可以使用其他服务并运行集成测试。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-19T15:39:44.017

我正在观看一个 ThoughtWorks 演示文稿（Cruise Control 的创建者），他们实际上解决了这个问题。他们的回答是，没有部署太复杂而无法测试。为什么？因为否则，您的客户将成为您的测试人员，而这正是您不想成为的地方。

如果您有复杂的部署结构，请设置可视化服务器。让它假装是您需要与之交谈的所有系统。它们始终可以以已知的良好状态启动，因为您可以重置为干净的图像。

为了回答您最初的问题，一个好的流程是能够在存储库和开发人员之间进行通信的流程。如果存储库处于不良状态（未编译代码、测试失败等），开发人员会尽快了解它，以便他们进行更正。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-19T16:17:46.143

越晚发现错误，修复的成本就越高。所以应该尽早发现错误。这就是 CI 背后的动机。

一个好的 CI 应该确保捕获尽可能多的错误。整个应用程序由代码（通常采用多种语言）、数据库模式、部署文件等组成。其中任何一个错误都可能导致错误——因此 CI 应该尝试尽可能多地使用它们。

CI 不会取代适当的 QA 纪律。此外，CI 在项目的第一天不需要非常全面。可以从一个简单的 CI 流程开始，该流程最初会进行基本的编译和单元测试。当您在 QA 中发现更多类别的错误时，您应该调整 CI 流程以尝试捕捉这些错误的未来发生。它还可以涉及静态代码分析检查，以便您可以在整个代码库中实现一致的编码和设计理念。

# asp.net-mvc - 使用存储库/服务模式和 MVC 时缓存数据对象

> ID：102913
> 
> 赞同：45
> 
> 时间：2008-09-19T15:31:39.327
> 
> 标签：asp.net-mvc, caching, design-patterns

我有一个基于 MVC 的站点，它使用存储库/服务模式进行数据访问。服务被编写用于大多数应用程序（控制台、winform 和 Web）。目前，控制器直接与服务通信。这限制了应用适当缓存的能力。

我看到我的选择如下：

*   为 Web 应用程序编写一个包装器，它实现了执行缓存的 IWhatEverService。
*   通过缓存每个 Action 的 ViewData 在每个控制器中应用缓存。
*   不用担心数据缓存，只需为每个 Action 实现 OutputCaching。

我可以看到每个的优点和缺点。使用 Repository/Service 进行缓存的最佳实践是/应该是什么

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2011-06-03T20:44:56.237

Steve Smith 写了两篇很棒的博客文章，展示了如何使用他的 CachedRepository 模式来实现您正在寻找的结果。

[介绍 CachedRepository 模式](http://ardalis.com/introducing-the-cachedrepository-pattern)

[通过策略模式构建 CachedRepository](http://ardalis.com/building-a-cachedrepository-via-strategy-pattern)

在这两篇文章中，他向您展示了如何设置此模式，并解释了它为何有用。通过使用这种模式，您可以获得缓存，而您现有的代码不会看到任何缓存逻辑。本质上，您使用缓存的存储库就像它是任何其他存储库一样。

```
public class CachedAlbumRepository : IAlbumRepository
{
    private readonly IAlbumRepository _albumRepository;

    public CachedAlbumRepository(IAlbumRepository albumRepository)
    {
        _albumRepository = albumRepository;
    }

    private static readonly object CacheLockObject = new object();

    public IEnumerable<Album> GetTopSellingAlbums(int count)
    {
        Debug.Print("CachedAlbumRepository:GetTopSellingAlbums");
        string cacheKey = "TopSellingAlbums-" + count;
        var result = HttpRuntime.Cache[cacheKey] as List<Album>;
        if (result == null)
        {
            lock (CacheLockObject)
            {
                result = HttpRuntime.Cache[cacheKey] as List<Album>;
                if (result == null)
                {
                    result = _albumRepository.GetTopSellingAlbums(count).ToList();
                    HttpRuntime.Cache.Insert(cacheKey, result, null, 
                        DateTime.Now.AddSeconds(60), TimeSpan.Zero);
                }
            }
        }
        return result;
    }
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-09-19T15:40:01.927

最简单的方法是在存储库提供程序中处理缓存。这样您就不必在应用程序的其余部分更改任何代码；它将忘记数据是从缓存而不是存储库中提供的这一事实。

因此，我将创建一个控制器用于与后端通信的接口，并在实现中添加缓存逻辑。用一些 DI 将它全部包装成一个漂亮的蝴蝶结，您的应用程序将设置为易于测试。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-08-19T16:02:57.487

根据[Brendan提供的答案，我](https://stackoverflow.com/users/22381/brendan-enrick)**为相对较小但很少更改但大量阅读的列表的特殊情况**定义了一个通用缓存存储库。

**一、界面**

```
public interface IRepository<T> : IRepository
    where T : class
{
    IQueryable<T> AllNoTracking { get; }

    IQueryable<T> All { get; }
    DbSet<T> GetSet { get; }

    T Get(int id);

    void Insert(T entity);
    void BulkInsert(IEnumerable<T> entities);
    void Delete(T entity);
    void RemoveRange(IEnumerable<T> range);
    void Update(T entity);
} 
```

**2.普通/非缓存仓库**

```
public class Repository<T> : IRepository<T> where T : class, new()
{
    private readonly IEfDbContext _context;

    public Repository(IEfDbContext context)
    {
        _context = context;
    }

    public IQueryable<T> All => _context.Set<T>().AsQueryable();

    public IQueryable<T> AllNoTracking => _context.Set<T>().AsNoTracking();

    public IQueryable AllNoTrackingGeneric(Type t)
    {
        return _context.GetSet(t).AsNoTracking();
    }

    public DbSet<T> GetSet => _context.Set<T>();

    public DbSet GetSetNonGeneric(Type t)
    {
        return _context.GetSet(t);
    }

    public IQueryable AllNonGeneric(Type t)
    {
        return _context.GetSet(t);
    }

    public T Get(int id)
    {
        return _context.Set<T>().Find(id);
    }

    public void Delete(T entity)
    {
        if (_context.Entry(entity).State == EntityState.Detached)
            _context.Set<T>().Attach(entity);

        _context.Set<T>().Remove(entity);
    }

    public void RemoveRange(IEnumerable<T> range)
    {
        _context.Set<T>().RemoveRange(range);
    }

    public void Insert(T entity)
    {
        _context.Set<T>().Add(entity);
    }

    public void BulkInsert(IEnumerable<T> entities)
    {
        _context.BulkInsert(entities);
    }

    public void Update(T entity)
    {
        _context.Set<T>().Attach(entity);
        _context.Entry(entity).State = EntityState.Modified;
    } 
```

}

**3.通用缓存存储库**是基于非缓存的

```
public interface ICachedRepository<T> where T : class, new()
{
    string CacheKey { get; }

    void InvalidateCache();
    void InsertIntoCache(T item);
}

public class CachedRepository<T> : ICachedRepository<T>, IRepository<T> where T : class, new()
{
    private readonly IRepository<T> _modelRepository;
    private static readonly object CacheLockObject = new object();

    private IList<T> ThreadSafeCacheAccessAction(Action<IList<T>> action = null)
    {
        // refresh cache if necessary
        var list = HttpRuntime.Cache[CacheKey] as IList<T>;
        if (list == null)
        {
            lock (CacheLockObject)
            {
                list = HttpRuntime.Cache[CacheKey] as IList<T>;
                if (list == null)
                {
                    list = _modelRepository.All.ToList();
                    //TODO: remove hardcoding
                    HttpRuntime.Cache.Insert(CacheKey, list, null, DateTime.UtcNow.AddMinutes(10), Cache.NoSlidingExpiration);
                }
            }
        }

        // execute custom action, if one is required
        if (action != null)
        {
            lock (CacheLockObject)
            {
                action(list);
            }
        }

        return list;
    }

    public IList<T> GetCachedItems()
    {
        IList<T> ret = ThreadSafeCacheAccessAction();
        return ret;
    }

    /// <summary>
    /// returns value without using cache, to allow Queryable usage
    /// </summary>
    public IQueryable<T> All => _modelRepository.All;

    public IQueryable<T> AllNoTracking
    {
        get
        {
            var cachedItems = GetCachedItems();
            return cachedItems.AsQueryable();
        }
    }

    // other methods come here
    public void BulkInsert(IEnumerable<T> entities)
    {
        var enumerable = entities as IList<T> ?? entities.ToList();
        _modelRepository.BulkInsert(enumerable);

        // also inserting items within the cache
        ThreadSafeCacheAccessAction((list) =>
        {
            foreach (var item in enumerable)
                list.Add(item);
        });
    }

    public void Delete(T entity)
    {
        _modelRepository.Delete(entity);

        ThreadSafeCacheAccessAction((list) =>
        {
            list.Remove(entity);
        });
    }
} 
```

使用 DI 框架（我使用的是 Ninject），可以轻松定义是否应缓存存储库：

```
// IRepository<T> should be solved using Repository<T>, by default
kernel.Bind(typeof(IRepository<>)).To(typeof(Repository<>));

// IRepository<T> must be solved to Repository<T>, if used in CachedRepository<T>
kernel.Bind(typeof(IRepository<>)).To(typeof(Repository<>)).WhenInjectedInto(typeof(CachedRepository<>));

 // explicit repositories using caching
 var cachedTypes = new List<Type>
 {
    typeof(ImportingSystem), typeof(ImportingSystemLoadInfo), typeof(Environment)
 };

 cachedTypes.ForEach(type =>
 {
    // allow access as normal repository
    kernel
       .Bind(typeof(IRepository<>).MakeGenericType(type))
       .To(typeof(CachedRepository<>).MakeGenericType(type));

     // allow access as a cached repository
     kernel
        .Bind(typeof(ICachedRepository<>).MakeGenericType(type))
        .To(typeof(CachedRepository<>).MakeGenericType(type));
  }); 
```

因此，从缓存的存储库中读取是在不知道缓存的情况下完成的。但是，更改它们需要注入`ICacheRepository<>`并调用适当的方法。

# ajax - AJAX 是如何实现的，它如何帮助 Web 开发？

> ID：102929
> 
> 赞同：2
> 
> 时间：2008-09-19T15:32:56.407
> 
> 标签：ajax, resources

从[http://en.wikipedia.org/wiki/AJAX](http://en.wikipedia.org/wiki/AJAX)，我对什么是 AJAX 有了相当好的了解。但是，看起来为了学习它，我必须同时深入研究多种技术才能从中获得任何好处。所以两个问题：

*   有哪些资源可以帮助我理解/使用 AJAX？
*   什么样的网站会从 AJAX 中受益？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T15:37:30.653

如果您对细节不感兴趣，您可以使用[JQuery](http://jquery.com/)或[Prototype](http://www.prototypejs.org/)等更高级别的库来为您创建底层 Javascript。主要好处是为基于 Web 的应用程序提供了响应速度更快的用户界面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T15:39:35.063

有许多库可以帮助您从 AJAX 中受益，而无需了解实现回调等。

你在使用.NET吗？查看[http://ajax.asp.net](http://ajax.asp.net)。如果你不是，那么看看像 qcodo for PHP 这样的工具，并了解prototype.js、jquery等。

就将受益的网站而言：每个 Web 应用程序。:) 通过交换信息与您进行交互的任何事物，而不仅仅是通过单击链接和阅读文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T15:40:50.333

每个网站都可以从 AJAX 中受益，但在我看来，AJAX 最大的好处在于数据输入部分——基本上是表单。我已经完成了整个网站的前端 - 用户看到的部分几乎没有 AJAX 功能。所有 AJAX 东西都在管理控制面板中，用于协助（正确！）数据输入。

没有什么比提交表单并返回错误更糟糕的了，使用 AJAX 几乎可以防止这种情况发生，但文件上传除外。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T15:42:25.727

我发现远离所有框架和其他助手，只做基本的 Javascript 是最简单的。这不仅可以让您了解幕后发生的事情，还可以让您以最简单的方式进行操作。真的没什么。使用 JS XML DOM 对象来创建一个 xml 文档客户端。使用 XMLHTTPRequest 将其发送到服务器，然后处理结果，再次使用 JS XML DOM 对象。从简单的事情开始。只需尝试将一条信息发送到服务器，然后返回一小段信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T15:37:02.730

Mozilla[文档](http://developer.mozilla.org/En/AJAX)很好。从中受益最多的站点是那些行为几乎像桌面应用程序并且需要高交互性的站点。但是，您通常可以通过使用它来提高几乎任何网站的可用性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T18:17:58.803

Ajax 应该被认为是一种在不重新加载整个页面的情况下更改页面上的某些内容的方法。

那么你什么时候需要这样做呢？仅当您在更改页面上的某些内容时希望保留一些用户交互或表单信息时才真正做到这一点。

# asp.net - 为没有“Xml 文档文件”选项的网站生成 Sandcastle 帮助文件

> ID：102940
> 
> 赞同：2
> 
> 时间：2008-09-19T15:33:42.253
> 
> 标签：asp.net, visual-studio, sandcastle

我正在尝试为网站生成 Sandcastle 帮助文件。在项目的属性窗口中，没有任何用于创建 Sandcastle 所需的 XML 文档文件的选项。

属性页中的构建选项卡仅包含以下选项：开始操作、构建解决方案操作和可访问性验证。我没有任何输出选项或 XML 文档文件，就像我的其他项目一样。

我正在使用的网站没有实际的 .proj 文件，这可能是问题所在。如果这是问题所在，那么为一个受源代码控制并由许多人进行工作且干扰最小的项目创建一个的最佳方法是什么？

这是使用 Visual Studio 2005 专业版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T15:37:52.183

VS2k5 中网站的问题在于，当它们被编译时，生成的 dll 是一团糟。没有命名空间、奇怪的名称等。

如果您真的想生成 Sandcastle 帮助文件，请考虑将您的网站转换为 Web 应用程序。您绝对可以为此生成源代码文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-03-08T16:54:26.797

我还没有尝试过，但您可能想尝试以下 来自 Eric Woodruff 的网站[记录网站/项目。](http://www.ewoodruff.us/shfbdocs/html/94c7f744-9b90-4254-93ab-9b15f47d9f42.htm)它给出了如何完成的细节。

更新：我确实尝试过，它适用于常规网站。我能看到的唯一问题是网站没有命名空间。所以当我运行它时，我会得到一个没有任何逻辑分组的 FolderName_WebPage 类格式的主题。所以它是按文件夹和页面名称排列的。创建内容后，您可以使用帮助编译器/构建器编辑帮助文件，并根据需要对主题进行分组。

# c# - C# VB.NET 转换

> ID：102956
> 
> 赞同：1
> 
> 时间：2008-09-19T15:35:21.907
> 
> 标签：c#, .net, vb.net

您使用哪些工具在 C# 和 VB.NET 之间进行转换？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-19T15:36:04.433

查看Telerik的[代码转换器。](http://converter.telerik.com/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-19T15:36:59.267

这个问题已经问了很多次了。像这里：[什么是最好的 C# 到 VB.net 转换器？](https://stackoverflow.com/questions/88359/what-is-the-best-c-to-vbnet-converter)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-04T05:35:58.040

[反光板](http://en.wikipedia.org/wiki/.NET_Reflector)。这不是最好的任务，但它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-05T10:27:53.993

Tangible 有 C++ <> C#、Java <> C#、VB <> C# 等。我不确定如何量化哪个是“最好的”，但如果有错误，它们的支持会响应。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-05T10:35:44.753

使用片段转换器转换代码..[片段转换器](http://codeconverter.sharpdevelop.net/SnippetConverter.aspx)

# jsp - 计算 c:forEach 循环中所有数字的总和

> ID：102964
> 
> 赞同：21
> 
> 时间：2008-09-19T15:35:42.920
> 
> 标签：jsp, foreach, sum, jstl

我有一个这样的Java bean：

```
class Person {
  int age;
  String name;
} 
```

我想在 JSP 中遍历这些 bean 的集合，在 HTML 表格行中显示每个人，在表格的最后一行中，我想显示所有年龄的总数。

生成表格行的代码如下所示：

```
<c:forEach var="person" items="${personList}">
  <tr><td>${person.name}<td><td>${person.age}</td></tr>
</c:forEach> 
```

但是，我正在努力寻找一种方法来计算将在最后一行中显示的总年龄，**而不使用 scriptlet 代码**，有什么建议吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2008-09-19T17:39:59.673

***注意：****我尝试结合答案来制作一个完整的列表。我在适当的地方提到了名字，以便在应得的地方给予赞扬。*

有很多方法可以解决这个问题，每种方法都有优缺点：

**纯JSP解决方案**

正如上面提到的 ScArcher2，一个非常简单的解决方案是直接在 JSP 中实现它，如下所示：

```
<c:set var="ageTotal" value="${0}" />
<c:forEach var="person" items="${personList}">
  <c:set var="ageTotal" value="${ageTotal + person.age}" />
  <tr><td>${person.name}<td><td>${person.age}</td></tr>
</c:forEach>
${ageTotal} 
```

这个解决方案的问题是 JSP 变得混乱到您可能已经引入了 scriplets 的地步。如果您预计查看该页面的每个人都能够遵循呈现的基本逻辑，那么这是一个不错的选择。

**纯EL溶液**

如果您已经使用 EL 3.0 (Java EE 7 / Servlet 3.1)，请使用[对流和 lambdas](http://docs.oracle.com/javaee/7/tutorial/jsf-el004.htm)的新支持：

```
<c:forEach var="person" items="${personList}">
  <tr><td>${person.name}<td><td>${person.age}</td></tr>
</c:forEach>
${personList.stream().map(person -> person.age).sum()} 
```

**JSP EL 函数**

另一种在不将 scriplet 代码引入 JSP 的情况下输出总数的方法是使用 EL 函数。EL 函数允许您在公共类中调用公共静态方法。例如，如果您想遍历您的集合并对值求和，您可以在公共类中定义一个名为 sum(List people) 的公共静态方法，可能称为 PersonUtils。在您的 tld 文件中，您将放置以下声明：

```
<function>
  <name>sum</name>
  <function-class>com.example.PersonUtils</function-class>
  <function-signature>int sum(java.util.List people)</function-signature>
</function> 
```

在您的 JSP 中，您将编写：

```
<%@ taglib prefix="f" uri="/your-tld-uri"%>
...
<c:out value="${f:sum(personList)}"/> 
```

JSP EL 函数有一些好处。它们允许您使用现有的 Java 方法，而无需编写特定的 UI（自定义标签库）。它们也很紧凑，不会让非编程导向的人感到困惑。

**自定义标签**

另一种选择是滚动您自己的自定义标签。这个选项将涉及最多的设置，但会给你我认为你正在寻找的东西，绝对没有脚本。可以在[http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/JSPTags5.html#74701找到使用简单自定义标签的好教程](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/JSPTags5.html#74701)

涉及的步骤包括子类化 TagSupport：

```
public PersonSumTag extends TagSupport {

   private List personList;

   public List getPersonList(){
      return personList;
   }

   public void setPersonList(List personList){
      this.personList = personList;
   }

   public int doStartTag() throws JspException {
      try {
        int sum = 0;
        for(Iterator it = personList.iterator(); it.hasNext()){
          Person p = (Person)it.next();
          sum+=p.getAge();
        } 
        pageContext.getOut().print(""+sum);
      } catch (Exception ex) {
         throw new JspTagException("SimpleTag: " + 
            ex.getMessage());
      }
      return SKIP_BODY;
   }
   public int doEndTag() {
      return EVAL_PAGE;
   }
} 
```

在 tld 文件中定义标签：

```
<tag>
   <name>personSum</name>
   <tag-class>example.PersonSumTag</tag-class>
   <body-content>empty</body-content>
   ...
   <attribute>
      <name>personList</name>
      <required>true</required>
      <rtexprvalue>true</rtexprvalue>
      <type>java.util.List</type>
   </attribute>
   ...
</tag> 
```

在 JSP 的顶部声明 taglib：

```
<%@ taglib uri="/you-taglib-uri" prefix="p" %> 
```

并使用标签：

```
<c:forEach var="person" items="${personList}">
  <tr><td>${person.name}<td><td>${person.age}</td></tr>
</c:forEach>
<p:personSum personList="${personList}"/> 
```

**显示标签**

正如前面提到的 zmf ，您也可以使用 display 标记，尽管您需要包含适当的库：

[http://displaytag.sourceforge.net/11/tut_basic.html](http://displaytag.sourceforge.net/11/tut_basic.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-19T15:44:07.707

你想把所有年龄加起来吗？

您可以在控制器中计算它并仅在 jsp 中显示结果。

您可以编写自定义标签来进行计算。

您可以像这样使用 jstl 在 jsp 中计算它。

```
<c:set var="ageTotal" value="${0}" />
<c:forEach var="person" items="${personList}">
  <c:set var="ageTotal" value="${ageTotal + person.age}" />
  <tr><td>${person.name}<td><td>${person.age}</td></tr>
</c:forEach>
${ageTotal} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-19T15:40:11.943

查看显示标签。[http://displaytag.sourceforge.net/11/tut_basic.html](http://displaytag.sourceforge.net/11/tut_basic.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T15:57:04.100

ScArcher2 有最简单的[解决方案](https://stackoverflow.com/questions/102964/jstl-collection-iteration/103065#103065)。如果您想要尽可能紧凑的东西，您可以创建一个带有“sum”函数的标签库。就像是：

```
class MySum {
public double sum(List list) {...}
} 
```

在您的顶级域名中：

```
<function>
<name>sum</name>
<function-class>my.MySum</function-class>
<function-signature>double sum(List)</function-signature>
</function> 
```

在您的 JSP 中，您将拥有如下内容：

```
<%@ taglib uri="/myfunc" prefix="f" %>

${f:sum(personList)} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T15:39:10.150

这有点 hacky，但是在您的控制器代码中，您可以创建一个包含总数的虚拟 Person 对象！

你如何检索你的对象？HTML 允许您设置一个[<TFOOT>](http://www.w3schools.com/tags/tag_tfoot.asp)元素，该元素将位于您拥有的任何数据的底部，因此您可以将总数与 Person 对象分开设置，并将其按原样输出到页面上，而无需在 JSP 页面上进行任何计算。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T03:34:11.867

您可以根据以下使用 JSTL 迭代集合

```
<c:forEach items="${numList}" var="item">
      ${item}
</c:forEach> 
```

如果它是一张地图，你可以在下面做

```
<c:forEach items="${numMap}" var="entry">
  ${entry.key},${entry.value}<br/>
</c:forEach> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-30T05:59:02.000

在控制器中计算 Totals/ 或其他摘要——而不是在 JSP 中——确实是非常可取的。

使用 Java 代码和 MVC 方法，例如 Spring MVC 框架，而不是尝试在 JSP 或 JSTL 中做太多；用这些语言进行重要的计算既弱又慢，并且使您的 JSP 页面变得不那么清晰。

例子：

```
class PersonList_Controller implements Controller {
    ...
    protected void renderModel (List<Person> items, Map model) {
        int totalAge = 0;
        for (Person person : items) {
            totalAge += person.getAge();
        }
        model.put("items", items);
        model.put("totalAge", totalAge);
    }
} 
```

明智的设计决策——任何需要总计的地方，下个月都可以扩展为需要平均值、中位数、标准差。

JSTL 计算和总结几乎没有结合在一起，只是得到一个总数。您真的要满足 JSTL 中的任何进一步的汇总要求吗？我相信答案是否定的——因此正确的设计决策是在控制器中进行计算，因为同样/更简单，而且肯定更合理——可扩展的需求。

# iis-7 - IIS7迁移是小菜一碟吗

> ID：102980
> 
> 赞同：0
> 
> 时间：2008-09-19T15:36:56.303
> 
> 标签：iis-7, migration

我希望将网站迁移到 Windows 2008 平台，是否有任何明显的陷阱我应该注意？

代码库是 c# 3.5,asp.net 和 ms ajax。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T16:24:28.997

I googled a bit and found this link:

[http://weblogs.asp.net/steveschofield/archive/2008/09/04/iis6-to-iis7-migration-tips-tricks.aspx](http://weblogs.asp.net/steveschofield/archive/2008/09/04/iis6-to-iis7-migration-tips-tricks.aspx)

Biggest Issue i find is that 3rd party components needs to have 64bit version ready to get most of benefits.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-13T22:27:06.607

我没有任何迁移应用程序无法正常工作的经验。我只做了一些，但我们在这里测试了一些工作，它们都在 IIS7 下运行良好。

唯一的问题是 .NET“托管管道模式”默认设置为“集成”，这在我们的一些应用程序中造成了问题。在您的应用程序池中将其设置为“Classic”，或者将您的应用程序切换为使用“Classic .NET”应用程序池应该可以解决问题。有关新管道的更多信息，[请在此处阅读](http://learn.iis.net/page.aspx/244/how-to-take-advantage-of-the-iis7-integrated-pipeline/)。

哦 - 和 +1 在 wacked-out 界面上。我想要我的旧 IIS6 接口回来！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T15:38:36.253

不要让古怪的用户界面让你失望（但它会让你迟钝）