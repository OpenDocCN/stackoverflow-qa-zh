# StackOverflow 问答 10422000-10422999

# algorithm - 输入的编码（时间复杂度）

> ID：10422000
> 
> 赞同：3
> 
> 时间：2012-05-02T21:28:15.183
> 
> 标签：algorithm, encoding, clrs

不确定这是否是问这个问题的正确地方。在 Cormen 第 1056 页中，我读到如果算法的运行时间为 O(k)，并且“k”以一元表示，即 k 1s 的字符串，则该算法的运行时间为 0(n)，其中“n”是输入大小以位为单位，如果“k”表示为二进制，则 n=lg k+1 ，算法的运行时间变为 o(2^n)。

所以我的疑问是为什么在这种情况下不会首选“一元”表示，因为它给出了多项式时间，而在其他情况下是指数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T21:35:48.463

一元时间给出了相对于输入大小的多项式时间，但**实际运行时间是相同的，无论使用何种表示**。

问题是复杂性是作为输入的函数计算的。使用一元表示时，您会增加输入的大小，而不会更改运行时间。
由于要`k`以一元基数表示您需要`n`位，`O(k)`因此是`O(n)`- 因为它在输入的大小上是线性的。`O(k) = O(2^logk) = O(2^n)`但是，对于相同的解决方案，如果您使用二进制表示，它将是，因为您需要`logk`位来表示`k`。

您所描述的与[**伪多项式时间**](http://en.wikipedia.org/wiki/Pseudo-polynomial_time)算法密切相关，例如具有动态规划的[背包](http://en.wikipedia.org/wiki/Knapsack_problem)`O(W*n)`解决方案，它是伪多项式，因为它实际上是用于表示**的位数的指数**`W`。

# computer-science - 快速概率概念：N 位字符串

> ID：10422004
> 
> 赞同：0
> 
> 时间：2012-05-02T21:28:36.520
> 
> 标签：computer-science, probability, probability-theory

假设您生成一个 N 位字符串（仅由 1 和 0 组成）。所有这些 0 和 1 的总和是 X。如果 N 为奇数，X 为奇数的概率是多少？如果 N 为偶数，X 为奇数的概率是多少？

由于任何位为 0 或 1 的可能性是 50%，我只假设两个答案都是 50%。但是，我不认为这是完全正确的。我能得到一些关于如何解决这个问题的想法吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:30:18.080

题外话，但我会咬：

有多少个可能的长度为 N 的字符串？其中有多少位和是偶数？其中有多少具有奇数位和？

换句话说，假设有`a`偶数长度（N-1）个字符串和`b`奇数长度（N-1）个字符串。要形成长度为 N 的字符串，请附加 0 或 1。这会产生`a+b`偶数字符串和`a+b`奇数字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:15:56.440

X 是奇数的概率为**50% 。**

如果 N 为 1，则唯一可能的字符串是 0 和 1，因此 X 有 50% 的可能性是奇数。

N=2 时可能出现的字符串是 N=1 加上 0 或 1 的字符串：00、01、10、11。由于 N=1 的几率已经是 50%，而数字的几率是 50%添加后，N=2 的几率为 50%。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T19:37:09.873

你的直觉是对的。也许正式看到这一点可能很有用。

这些比特为 0 和 1，概率为 1/2，是参数 p=1/2 的伯努利分布的随机变量。参数的 N 个独立伯努利随机变量的总和遵循（根据定义）具有参数 (N,p) 的二项式分布。因此，您的总和是带有参数 (N,1/2) 的二项式分布。

请参阅[维基百科关于二项分布的页面](http://en.wikipedia.org/wiki/Binomial_distribution)。

现在这个数字是（比如说）偶数的概率 P 是：

```
P = Sum[Binomial[n,k]*1/2^n,k=all even values between 0 and n]

P = Sum[Binomial[n, 2 k]*1/2^n, k=0..Floor[n/2]]

P = 1/2 * Sum[Binomial[Floor[n/2],k]*1/2^n, k=0..Floor[n/2]] 
```

众所周知，这个总和等于一（这是[牛顿的二项式公式](http://en.wikipedia.org/wiki/Binomial_theorem#Statement_of_the_theorem)），所以你只剩下

```
P = 1/2 
```

[这个问题在Math StackExchange](https://math.stackexchange.com/)上会更合适，我的意思是我可以在答案中使用 LaTeX :)

# jquery - 从屏幕右侧拉出 div

> ID：10422005
> 
> 赞同：3
> 
> 时间：2012-05-02T21:28:48.017
> 
> 标签：jquery, css, html, hidden, slide

从左边拉出一个div？非常简单。从右边拉出来？没那么多。

我正在寻找一个隐藏在屏幕外但连接到屏幕上的小标签的 div。当用户点击标签时，整个 div 滑出。从左边开始，这是使用 jQuery 和 CSS 非常基本的。但是，从右侧，用户可以滚动查看“隐藏”的 div！

这是我想要的（[http://jsfiddle.net/yHPTv/](http://jsfiddle.net/yHPTv)），除了 div 不是**部分**隐藏在屏幕外，我希望它部分隐藏在屏幕外。

这是我迄今为止尝试过的（[http://jsfiddle.net/LU8En/](http://jsfiddle.net/LU8En/)），显然它不起作用，因为只能向右滚动。

使用动画（或滑动或切换下拉）的问题是我不希望整个 div 只是消失/出现，我希望那一点存在。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T21:34:49.467

[http://jsfiddle.net/yHPTv/3/](http://jsfiddle.net/yHPTv/3/)

**请注意，下面的示例不适用于较新版本的 jQuery，请阅读下面的示例。**

```
$(function () {
    $("#clickme").toggle(function () {
        $(this).parent().animate({right:'0px'}, {queue: false, duration: 500});
    }, function () {
        $(this).parent().animate({right:'-280px'}, {queue: false, duration: 500});
    });
}); 
```

从左到右更改所有内容，然后重新定位 clickme div 和文本内容。

另外，给 body 一个`overflow-x: hidden`以防止水平滚动条。

* * *

一些小的更新使其与最新版本兼容：

```
$(function () {
    var rightVal = -280; // base value
    $("#clickme").click(function () {
        rightVal = (rightVal * -1) - 280; // calculate new value
        $(this).parent().animate({right: rightVal + 'px'}, {queue: false, duration: 500});
    });
}); 
```

[http://jsfiddle.net/yHPTv/2968/](http://jsfiddle.net/yHPTv/2968/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T07:51:52.833

可能需要做：

```
body,html { overflow-x:hidden; } 
```

只是没有“，html”的正文对我不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-12T17:39:38.463

请检查下面的代码和链接，可能会对您有所帮助。

[http://jsfiddle.net/avinashMaddy/4bs3zp44/](http://jsfiddle.net/avinashMaddy/4bs3zp44/)

```
<div id="slideout">
   <div id="slidecontent">
       Yar, there be dragonns herre!
   </div>
</div>
<div class="clickme">
    &nbsp;
</div>

<script>
  $(function () {
     $(".clickme").toggle(function () {
       $("#slideout").animate({left:'0px'}, {queue: false, duration: 500});
      }, function () {
    $("#slideout").animate({left:'-280px'}, {queue: false, duration: 500});
   });
  });
</script> 
```

# matlab - 在matlab中绘制大尺寸的图形

> ID：10422006
> 
> 赞同：1
> 
> 时间：2012-05-02T21:28:49.943
> 
> 标签：matlab, plot, matlab-figure

我正在尝试绘制一个大尺寸的图形

这是我的代码

```
% this code gives me good appearance
scrsz = get(0,'ScreenSize');
figure('Position',[30 50 scrsz(3)/1.2 scrsz(4)/1.2]); 
```

我的问题是：

如果这段代码在不同的计算机上运行，​​图形的外观会改变吗？

有没有办法直接绘制最大屏幕尺寸的图形？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:54:41.043

人物的外观肯定会发生变化。

如果您想要最大的屏幕尺寸，我会使用以下 [文件交换提交](http://www.mathworks.com/matlabcentral/fileexchange/10274-maximize-figure-windows)。

# ruby-on-rails - 在单个控制器操作中创建子和孙回形针记录

> ID：10422010
> 
> 赞同：0
> 
> 时间：2012-05-02T21:29:16.443
> 
> 标签：ruby-on-rails, paperclip, many-to-one, grandchild

我被要求修改使用回形针的上传系统。目前用户有很多上传，但现在他们希望通过提供上传图片来扩展此功能，以帮助用户更好地可视化上传。

所以：

*   用户有很多上传
*   上传有一个用户
*   上传有很多图片
*   图片有一个上传

现在我的上传是在用户控制器中的一个动作中创建的。但是我的客户希望我让用户可以选择提交多张图片以及父上传。这是我当前的代码：

```
 def upload_files 
      @user = User.find_by_username(params[:username])
      @uploads = @user.uploads.paginate(:page => params[:page], :per_page => 10)
      1.times { @user.uploads.build }      
      respond_to do |format|
        format.html # uploads.html.erb
        format.json { render json: @user }
      end
  end 
```

我不确定我应该如何以这种方法构建我的孩子照片记录以及我的上传记录。

关于如何让它发挥作用的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:01:44.777

我找到了答案。随着更多的挖掘，看起来我想做的是异步地建立一个子和孙记录。我更新了问题以证明这一点，这是执行此操作的代码。

```
 def upload_files 
      @user = User.find_by_username(params[:username])
      @uploads = @user.uploads.paginate(:page => params[:page], :per_page => 10)
      1.times do
        child = @user.uploads.build
        1.times { child.upload_images.build }
      end     
      respond_to do |format|
        format.html # uploads.html.erb
        format.json { render json: @user }
      end
  end 
```

干杯

# c# - 如何在 WPF 中的页面之间传递数据库中的值？

> ID：10422014
> 
> 赞同：0
> 
> 时间：2012-05-02T21:29:40.330
> 
> 标签：c#, wpf

我创建了一个连接到 SDF 数据库的应用程序。给用户一个电影院中的电影列表。用户可以选择电影并按下“确定”按钮。

然后应该向用户呈现另一个数据网格，其中包含该电影的所有信息。

我尝试在两个页面之间传递 SelectedIndex，它将 SelectedIndex 发送到信息页面，但不会将其分配给相同的 SelectedIndex。

```
 public Desc(int input_id)
    {
        InitializeComponent();

        cinemaEntities = new cinema1.cinemaDBEntities();
        movieViewSource = ((System.Windows.Data.CollectionViewSource)(this.FindResource("moviesViewSource")));

        System.Data.Objects.ObjectQuery<cinema1.movie> moviesQuery = this.GetMovieQuery(cinemaEntities);

        movieViewSource.Source = moviesQuery.Execute(System.Data.Objects.MergeOption.OverwriteChanges);
        moviesListView.SelectedIndex = id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:55:59.197

为什么不直接将 Movie 对象传递到第二页？然后使用 .SelectedItem。如果只是一部电影的详细信息，为什么第二页仍然需要整个列表？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:02:37.120

做什么取决于软件的目的，但无论如何我建议在你的软件架构上多花一点力气。当您想使用 WPF 时，您应该决定是否采用 MVVM（模型-视图-视图模型）方法，该方法具有高度可维护性且具有许多优点，但需要一些时间来熟悉。对于小型或简单的应用程序来说绝对没问题的快速解决方案是在视图和控件的代码隐藏中编写您的 GUI 逻辑。

无论如何，我会创建一个模型层，以根据类型镜像您的数据库数据（MovieDatabase 有一个电影集合等）。然后编写一个适配器来填充数据库中的模型。然后在您的视图中使用模型 - 如果您想快速完成 - 或者将 ViewModels 写入您的模型（更好）并在您的视图中使用它们。

话虽这么说，从您发布的代码很难看出问题所在。你有更多的上下文吗？为什么不通过 SelectedItem？

# ftp - FTP - `名称或服务不知道`

> ID：10422016
> 
> 赞同：6
> 
> 时间：2012-05-02T21:29:51.097
> 
> 标签：ftp, connection, lan

我的 iphone 上有一个应用程序，它允许我也可以通过 ftp 从我的 linux 桌面传输歌曲。该应用程序表明主机地址是`192.168.0.4`，要使用的端口是`5021`。我可以从 filezilla 很好地连接到设备，但是当我尝试通过命令行连接时，它会因标题中提到的错误而失败。

我正在使用的命令是，`ftp 192.168.0.4:5021`但它失败了。我完全被难住了。当我在互联网上寻求帮助时，答案就是简单地做我已经做过的事情。

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T21:31:32.807

该`ftp`命令不支持`:5021`端口号的语法。相反，必须有另一种方式。

对于某些 FTP 客户端，您可以使用`-P`命令行选项：

```
ftp -P 5021 192.168.0.4 
```

对于其他人，您需要将端口号放在主机地址之后，并带有*空格*：

```
ftp 192.168.0.4 5021 
```

用于`man ftp`查看您的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-25T14:53:31.417

将域和 ip 添加到您计算机的主机文件中。

# java - 在我的项目中实施添加任务时出错

> ID：10422021
> 
> 赞同：0
> 
> 时间：2012-05-02T21:30:13.450
> 
> 标签：java, android

我有广告任务管理器在另一个项目中工作，但是当我转换代码时，当我尝试运行它时它给了我一个错误。错误是

```
E/AndroidRuntime(681): java.lang.RuntimeException: Unable to start activity ComponentInf {com.screenssample/com.sudarmuthu.android.taskmanager.ViewTasksActivity}: java.lang.ClassCastException: android.app.Application
```

而且我不知道如何通过调试来发现错误，但如果它在另一个项目中正确工作，应该不会有任何错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:33:28.080

```
java.lang.ClassCastException: android.app.Application 
```

看来您正试图将一种类类型转换为另一种毫无关系的类型。一些代码可能有助于获得更准确的答案。

# xcode - XCode - 为什么我找不到文件？

> ID：10422023
> 
> 赞同：4
> 
> 时间：2012-05-02T21:30:29.817
> 
> 标签：xcode, urbanairship.com

我已将 Airship（来自 UrbanAirship）目录添加到我的 iPhone/iPad 应用程序的 xcode 项目中。在我的“构建设置>搜索路径>标题搜索路径”和“构建设置>搜索路径>库搜索路径”中，我递归地指向这些目录。我还将 libuairship-1.2.1.a 文件 3 包含到所需的框架/库中。

当我进入我的 appdelegate.m 和 appdelegate.h 时，只要我输入`#import "UA"`，它就会自动完成`#import "UAirship.h"`。所以我认为这很好，因为我想这意味着它知道文件存在！

但是当我进行构建时，它 Xcode 抱怨无法找到文件 UAirship.h。我尝试输入#import "directoryname/UAirship.h"，但仍然找不到。

我该如何解决这个问题？

![描述错误消息的屏幕截图](../Images/7d508614c2e7b0c8b55bad759eb203ee.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T19:50:46.960

我确定它是 - 标题搜索路径下的路径。

我刚刚将其设置为 ../Airship/** 并且遇到了与您相同的问题。

现在我将其更改为 ./Airship/** 并且工作正常。

我还必须导入

```
#import "UAirship.h"
#import "UAPush.h"
#import "UAInbox.h"
#import "UAInboxUI.h" 
```

在应用程序委托中。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-12T20:29:01.877

对于 XCode 5.1，我必须将其设置为`./Airship`（递归）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T22:32:07.823

这可能意味着该文件是您项目的一部分，但其路径不正确（无论出于何种原因）。这将是可见的，如果您在项目浏览器中找到该文件，其名称将为红色。

假设是这种情况，您可以选择它并编辑文件位置属性，或者将其从项目中删除，然后再次添加该文件。

如果您从其他系统导入或打开项目，这很容易发生。

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-08T14:06:45.740

这对我有用，

删除 Pod 文件夹和 Podfile.lock

然后“吊舱安装”

然后是“pod 更新”</p>

或者有时，pod update 然后 pod install

# sql - 向表中插入值 Oracle SQL

> ID：10422024
> 
> 赞同：12
> 
> 时间：2012-05-02T21:30:38.520
> 
> 标签：sql, oracle, database-design, insert-into

我正在尝试将值插入 Oracle SQL 中的“员工”表中。我有一个关于输入由外键确定的值的问题：

我的员工有 3 个由外键确定的属性：State、Position 和 Manager。我正在使用`INSERT INTO`语句插入值并手动输入数据。我是否需要物理查找每个引用以输入数据，或者是否有可以使用的命令？例如

```
INSERT INTO Employee 
(emp_id, emp_name, emp_address, emp_state, emp_position, emp_manager)
VALUES 
(001, "John Doe", "1 River Walk, Green Street", 3, 5, 1000) 
```

这应该用 填充员工表`(John Doe, 1 River Walk, Green Street, New York, Sales Executive, Barry Green)`。纽约`state_id=3`在`State`表中；销售主管`position_id=5`在`positions`表中；巴里格林`manager_id=1000`在`manager`桌子上。

有没有一种方法可以输入引用表的文本值，以便 Oracle 识别文本并将其与相关 ID 匹配？我希望这个问题有意义，我很乐意澄清任何事情。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T21:45:04.110

您可以扩展以下功能，以便在插入之前从数据库中提取更多参数：

```
--
-- insert_employee  (Function) 
--
CREATE OR REPLACE FUNCTION insert_employee(p_emp_id in number, p_emp_name in varchar2, p_emp_address in varchar2, p_emp_state in varchar2, p_emp_position in varchar2, p_emp_manager in varchar2) 
RETURN VARCHAR2 AS

   p_state_id varchar2(30) := '';
 BEGIN    
      select state_id 
      into   p_state_id
      from states where lower(emp_state) = state_name;

      INSERT INTO Employee (emp_id, emp_name, emp_address, emp_state, emp_position, emp_manager) VALUES 
                (p_emp_id, p_emp_name, p_emp_address, p_state_id, p_emp_position, p_emp_manager);

    return 'SUCCESS';

 EXCEPTION 
   WHEN others THEN
    RETURN 'FAIL';
 END;
/ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T21:42:43.703

```
INSERT
INTO    Employee 
        (emp_id, emp_name, emp_address, emp_state, emp_position, emp_manager)
SELECT  '001', 'John Doe', '1 River Walk, Green Street', state_id, position_id, manager_id
FROM    dual
JOIN    state s
ON      s.state_name = 'New York'
JOIN    positions p
ON      p.position_name = 'Sales Executive'
JOIN    manager m
ON      m.manager_name = 'Barry Green' 
```

请注意，一个拼写错误（或额外的空格）将导致不匹配，并且不会插入任何内容。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-02T21:41:10.207

您可以从 SELECT 插入到表中。

```
INSERT INTO
  Employee (emp_id, emp_name, emp_address, emp_state, emp_position, emp_manager)
SELECT
  001,
  'John Doe',
  '1 River Walk, Green Street',
  (SELECT id FROM state WHERE name = 'New York'),
  (SELECT id FROM positions WHERE name = 'Sales Executive'),
  (SELECT id FROM manager WHERE name = 'Barry Green')
FROM
  dual 
```

或者，类似地...

```
INSERT INTO
  Employee (emp_id, emp_name, emp_address, emp_state, emp_position, emp_manager)
SELECT
  001,
  'John Doe',
  '1 River Walk, Green Street',
  state.id,
  positions.id,
  manager.id
FROM
  state
CROSS JOIN
  positions
CROSS JOIN
  manager
WHERE
      state.name     = 'New York'
  AND positions.name = 'Sales Executive'
  AND manager.name   = 'Barry Green' 
```

尽管这确实假设所有查找都存在。例如，如果没有职位名称“销售主管”，则此版本不会插入任何内容。

# html - 使用 Ruby 下载 HTML 文本

> ID：10422026
> 
> 赞同：0
> 
> 时间：2012-05-02T21:30:42.480
> 
> 标签：html, ruby

我正在尝试在指定网页上创建字母（a、b、c 等）的直方图。我计划使用哈希制作直方图本身。但是，我在实际获取 HTML 时遇到了一些问题。

我当前的代码：

```
#!/usr/local/bin/ruby

require 'net/http'
require 'open-uri'

# This will be the hash used to store the
# histogram.
histogram = Hash.new(0)

def open(url)
    Net::HTTP.get(URI.parse(url))
end

page_content = open('_insert_webpage_here')

page_content.each do |i|
    puts i
end 
```

这在获取 HTML 方面做得很好。然而，它得到了一切。对于 www.stackoverflow.com，它给了我：

```
<body><h1>Object Moved</h1>This document may be found <a HREF="http://stackoverflow.com/">here</a></body> 
```

假装它是正确的页面，我不想要 html 标签。我只是想得到`Object Moved`and `This document may be found here`。

有没有相当简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:50:00.577

当你`require 'open-uri'`，你不需要`open`用 Net::HTTP 重新定义。

```
require 'open-uri'

page_content = open('http://www.stackoverflow.com').read

histogram = {}
page_content.each_char do |c|
  histogram[c] ||= 0
  histogram[c] += 1
end 
```

注意：这不会`<tags>`在 HTML 文档中去掉，所以`<html><body>x!</body></html>`会有. 要删除标签，您可以使用诸如 Nokogiri 之类的东西（您说它不可用）或某种正则表达式（例如[Dru's answer](https://stackoverflow.com/a/10422238/234944)中的那个）。`{ '<' => 4, 'h' => 2, 't' => 2, ... }``{ 'x' => 1, '!' => 1 }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:49:55.437

[请参阅此处](http://apidock.com/ruby/Net/HTTP "Net::HTTP Documentation")的 Net::HTTP 文档中的“以下重定向”部分

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T21:51:25.373

在没有 Nokogiri 的情况下剥离 html 标签

```
puts page_content.gsub(/<\/?[^>]*>/, "") 
```

[http://codesnippets.joyent.com/posts/show/615](http://codesnippets.joyent.com/posts/show/615)

# php - 同一页面链接在 Codeigniter 中不起作用

> ID：10422030
> 
> 赞同：0
> 
> 时间：2012-05-02T21:31:07.043
> 
> 标签：php, codeigniter, hyperlink, markdown, footnotes

我写了自己的博客，比如说在 example.com。我正在尝试为我的帖子使用脚注。所以我在地址上有一个帖子：

```
http://www.example.com/blog/2012/04/post-slug 
```

我将此代码用于脚注（由 markdown-extra 生成）：

```
<p>That's some text with a footnote.<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></p>

<div class="footnotes">
<hr />
<ol>
<li id="fn:1">
<p>And that's the footnote.&#160;<a href="#fnref:1" rev="footnote">&#8617;</a></p>
</li>
</ol>
</div> 
```

此代码作为帖子的正文保存在数据库中。

问题是，当我将浏览器指向帖子并单击它们指向我网站主页的链接时，如下所示：

```
http://www.example.com/#fnref:1 
```

和

```
http://www.example.com/#fn:1 
```

而不是正确的：

```
http://www.example.com/blog/2012/04/post-slug#fnref:1 
```

和

```
http://www.example.com/blog/2012/04/post-slug#fn:1 
```

分别。

那就是他们不考虑 URL 的部分

```
/blog/2012/04/post-slug 
```

他们“认为”他们出于某种原因在主页中。在 Codeigniter 中，我选择不在 URL 中包含 index.php。当然，我在 routes.php 文件中有一些路由定义。我无法弄清楚为什么会出现这个问题。也许它与路由有关。我已经尝试了 config.php 文件中的所有可用选项：

```
$config['uri_protocol'] =  'AUTO'; 
```

（PATH_INFO 等）但没有帮助。

任何人都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:12:49.190

CI 总是表现得像它在根中一样，因为这是它的 index.php 文件所在的位置，并且所有的控制器/方法都是从那里调用的。为了解决您的情况，我建议您为`href`属性添加路径，或者使用`base`，就像 Zenbait 说的那样。

# c++ - 何时在 C++ 中使用 extern

> ID：10422034
> 
> 赞同：497
> 
> 时间：2012-05-02T21:31:27.583
> 
> 标签：c++, variable-declaration

我正在阅读“Think in C++”，它只是介绍了`extern`声明。例如：

```
extern int x;
extern float y; 
```

我想我理解它的含义（没有定义的声明），但我想知道它什么时候证明有用。

有人可以提供一个例子吗？

* * *

## 回答 #1

> 赞同：653
> 
> 时间：2012-05-02T21:32:52.277

当您有全局变量时，这很有用。您在头文件中声明全局变量的*存在*，以便包含头文件的每个源文件都知道它，但您只需要在您的一个源文件中“定义”一次。

澄清一下， using`extern int x;`告诉编译器一个`int`名为的对象`x`存在*某处*。知道它存在于哪里不是编译器的工作，它只需要知道类型和名称，这样它就知道如何使用它。编译完所有源文件后，链接器将解析`x`对它在已编译源文件之一中找到的一个定义的所有引用。为了使它起作用，`x`变量的定义需要有所谓的“外部链接”，这基本上意味着它需要在函数之外（通常称为“文件范围”）声明并且没有`static`关键字。

### 标题：

```
#ifndef HEADER_H
#define HEADER_H

// any source file that includes this will be able to use "global_x"
extern int global_x;

void print_global_x();

#endif 
```

### 来源1：

```
#include "header.h"

// since global_x still needs to be defined somewhere,
// we define it (for example) in this source file
int global_x;

int main()
{
    //set global_x here:
    global_x = 5;

    print_global_x();
} 
```

### 来源 2：

```
#include <iostream>
#include "header.h"

void print_global_x()
{
    //print global_x here:
    std::cout << global_x << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：229
> 
> 时间：2012-05-02T21:32:44.003

当您在几个模块之间共享一个变量时，它很有用。您在一个模块中定义它，并在其他模块中使用 extern。

例如：

在 file1.cpp 中：

```
int global_int = 1; 
```

在 file2.cpp 中：

```
extern int global_int;
//in some function
cout << "global_int = " << global_int; 
```

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2016-01-24T06:38:13.470

这都是关于*联动*的。

先前的答案提供了关于`extern`.

但我想补充一点。

你问的是`extern`在**C++**中，而不是在**C**中，我不知道为什么在 C++ 中没有提到这种情况的`extern`答案`const`。

在 C++ 中，`const`变量默认具有内部链接（不像 C）。

所以这种情况会导致*链接错误*：

**来源 1：**

```
const int global = 255; //wrong way to make a definition of global const variable in C++ 
```

**来源 2：**

```
extern const int global; //declaration 
```

它需要是这样的：

**来源 1：**

```
extern const int global = 255; //a definition of global const variable in C++ 
```

**来源 2：**

```
extern const int global; //declaration 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-05-02T21:33:37.623

当您想要拥有一个全局变量时，这很有用。您在某个源文件中定义全局变量，并在头文件中将它们声明为 extern，这样任何包含该头文件的文件都将看到相同的全局变量。

# ruby-on-rails - Rails 3.2 Obj.try() 失败

> ID：10422037
> 
> 赞同：2
> 
> 时间：2012-05-02T21:31:39.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我刚刚从 Rails 3.1.0 升级到 3.2.3。一旦我清除了我的 gem 依赖问题，我就设法运行测试，我发现了这一点：

```
1.9.2p180 :005 > Rails.version
 => "3.2.3" 
1.9.2p180 :006 > a = 'test'
 => "test" 
1.9.2p180 :007 > a.try(:banana)
NoMethodError: undefined method `banana' for "test":String
    from /Users/jamesthullbery/.rvm/gems/ruby-1.9.2-p180@app_tier/gems/activesupport-3.2.3/lib    /active_support/core_ext/object/try.rb:32:in `try'
    from (irb):7
    from /Users/jamesthullbery/.rvm/gems/ruby-1.9.2-p180@app_tier/gems/railties-3.2.3/lib/rails    /commands/console.rb:47:in `start'
    from /Users/jamesthullbery/.rvm/gems/ruby-1.9.2-p180@app_tier/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
    from /Users/jamesthullbery/.rvm/gems/ruby-1.9.2-p180@app_tier/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'
1.9.2p180 :008 > 
```

当我在 Rails 3.1.0 上执行相同的命令时，我没有遇到任何问题：

```
1.9.2p180 :004 >   Rails.version
 => "3.1.0" 
1.9.2p180 :005 > a = 'test'
 => "test" 
1.9.2p180 :006 > a.try(:banana)
 => nil 
1.9.2p180 :007 > 
```

有没有人看到这个问题？当然，我的环境有问题，而不是 Rails 框架。好像很难准确的搜索到try的方法，所以网上还没找到。还有人看到这个吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:41:31.500

`Object#try`应该处理 nil 接收器。不应使用它来避免`NoMethodError`异常。

您在 3.1.0 中看到的行为是一个错误，并且在 7 个月前（截至撰写本文时）[已“修复” 。](https://github.com/rails/rails/commit/82d41c969897cca28bb318f7caf301d520a2fbf3)

# java - java.net，挂在java中

> ID：10422041
> 
> 赞同：-2
> 
> 时间：2012-05-02T21:31:58.800
> 
> 标签：java, networking

我似乎无法弄清楚为什么我的 httpurlconnection 挂起。

我有以下设置：连接url，检查响应码是否为200，如果1秒没有休眠，调用httpurlconnection.disconnect()，然后重试，如果6秒过去，停止尝试并返回。如果有 200 响应代码，则尝试使用缓冲读取器读取输入流，使用`(if String (i =readLine())!=null`，将读取超时设置为 8 秒。

所有这些都是使用线程完成的，有时它会挂起，有时它不会，所以我用`Callable`and测试了它`executorservice`，所以我可以在它在 30 秒后没有返回输入流后终止。但是，如果`timeoutexception`执行程序服务中有 a ，用于关闭 a 的 finally 块`bufferedreader`不会被执行，并且某些东西仍然挂起。没有无限循环，并且代码，考虑到 8 秒的读取超时`httpurlconnection`和 6 秒的限制来获得 200 响应，不应该超过 14-15 秒，但它经常这样做。

那么在任何情况下，变量设置为`httpurlconnection`, 都不会通过调用正确终止流`disconnect()?`此外，javadoc for`urlconnection`的`setReadTimeout`方法指出：“此方法的某些非标准实现会忽略指定的超时。”这是什么意思?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:24:00.627

> 我有以下设置：连接url，检查响应码是否为200，如果1秒没有休眠，调用httpurlconnection.disconnect()，然后重试，如果6秒过去，停止尝试并返回。如果有 200 响应代码，则尝试使用缓冲读取器读取输入流，使用 (if String (i =readLine())!=null，将读取超时设置为 8 秒。

扔掉它并使用 URLConnection.setReadTimeout()。这就是它的用途。当您使用 HTTP 时，您将获得“标准实现”，因此您不必担心“忽略”部分。显然你甚至没有尝试过，或者你已经知道了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T21:36:46.060

哎呀，这似乎是一个不必要的复杂解决方案。为什么不使用 apache 的 Java HTTPCLient？[http://hc.apache.org/httpcomponents-client-ga/](http://hc.apache.org/httpcomponents-client-ga/)

# r - 编写一个带有参数的函数，该参数指示要应用的函数

> ID：10422046
> 
> 赞同：2
> 
> 时间：2012-05-02T21:32:29.117
> 
> 标签：r

有没有办法编写一个函数，其中一个参数指示要应用什么函数？

例如，如果我有一个功能：

```
mf = function(data, option, level) 
```

我想在哪里选择来判断是否计算`mean`,`median`或`sd`数据集？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T21:45:00.997

是的，一种选择是将函数传递给`option`. 例如

```
mf <- function(data, option) {
    option <- match.fun(option)
    option(data)
}

set.seed(42)
dat <- rnorm(10)
mf(dat, option = mean) 
```

这使：

```
> set.seed(42)
> dat <- rnorm(10)
> mean(dat)
[1] 0.5472968
> mf(dat, option = mean)
[1] 0.5472968
> sd(dat)
[1] 0.8354488
> mf(dat, option = sd)
[1] 0.8354488 
```

`match.fun()`是匹配可用函数的标准 R 方式。在示例中，我传递了函数本身，但`match.fun()`允许以其他方式引用函数，例如作为字符串：

```
> mf(dat, option = "mean")
[1] 0.5472968 
```

`match.fun()`返回一个可以用作任何其他函数的函数，因此`option()`该函数与传递给参数的函数本质上相同，`option`或者是在参数中命名的`option`函数。

目前尚不清楚该`level`论点应该如何用于我忽略了上面的内容。

我可能应该补充一点，如果您想将任何参数传递给应用函数，那么您将希望`...`在函数定义中使用，例如：

```
mf <- function(data, option, ...) {
    option <- match.fun(option)
    option(data, ...)
} 
```

因此我们可以做这样的事情

```
set.seed(42)
dat2 <- rnorm(10)
dat2[4] <- NA
mean(dat2)
mean(dat2, na.rm = TRUE)
mf(dat2, mean, na.rm = TRUE) 
```

最后三行给出

```
> mean(dat2)
[1] NA
> mean(dat2, na.rm = TRUE)
[1] 0.5377895
> mf(dat2, mean, na.rm = TRUE)
[1] 0.5377895 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T21:40:19.353

R中的“数据集”通常意味着一个数据帧并且没有median.data.frame，所以你需要同时使用lapply和do.call：

```
 df <- data.frame(x=rnorm(10), y=rnorm(10))
 mf = function(data, option="mean") {lapply( data, 
                                       function(col) do.call(option, list(col))) }
 mf(df)
#-------------
$x
[1] 0.01646814

$y
[1] 0.5388518 
```

你没有指出应该做什么“级别”，所以我把它排除在等式之外，

```
> mf(df, sd)
$x
[1] 1.169847

$y
[1] 0.8907117 
```

# ruby-on-rails-3 - 如何使用共享的 Passenger gem 在 Apache2 上启动多个 Rails 应用程序？

> ID：10422047
> 
> 赞同：1
> 
> 时间：2012-05-02T21:32:30.227
> 
> 标签：ruby-on-rails-3, apache, passenger

我正在尝试将 Apache V2 配置为使用 VirtualHost 指令同时处理两个 Rails (3.2.2) 应用程序。我正在本地笔记本电脑上执行此操作。（Ubuntu、Ruby 1.9.2 和Passenger 3.0.12。）

使用了 "Agile Web Development .... Rails", V4 中的部署说明。第一个简单的应用程序启动时没有问题。

然后我创建了第二个具有非常相似特征的简单应用程序。使用第二个 VirtualHost 指令编辑 /etc/apache2/apache2.conf，并编辑 /etc/hosts 以将第二个命名 URL 映射到相同的 127.0.0.1 地址。

重启 Apache 会爆炸，如下图所示：

apache2：/etc/apache2/apache2.conf 的第 240 行语法错误：无法加载 /home/bubby/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.12/ext/apache2/mod_passenger .so 进入服务器：/home/bubby/.rvm/gems/ruby-1.9.2-p180/gems/passenger 3.0.12/ext/apache2/mod_passenger.so：无法打开共享对象文件：没有这样的文件或目录

这两个应用程序都与Passenger捆绑在一起。“locate mod_passenger.so”返回正确的位置。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:46:03.623

做文件

```
/home/bubby/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.12/ext/apache2/mod_passenger.so 
```

真的存在并且它对 apache 是可读的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:57:23.453

一定。

对于生产，通过在安装命令中添加 sudo 以系统范围模式而不是用户模式安装 rvm。在开发中，您可以保留用户模式。

在您指定的 ruby​​ 的全局 gemset 中安装乘客 gem。对将被多个应用程序使用的 gem 执行相同的操作（请记住每个 gem 的版本要求）

在服务器中运行 install apache-passenger-mod 命令后，复制生成的 mod 加载

然后要获得正确的 gemset 加载，将此文件添加到您的配置文件夹

```
# setup_load_path.rb
if ENV['MY_RUBY_HOME'] && ENV['MY_RUBY_HOME'].include?('rvm')
  begin
    rvm_path     = File.dirname(File.dirname(ENV['MY_RUBY_HOME']))
    rvm_lib_path = File.join(rvm_path, 'lib')
    $LOAD_PATH.unshift rvm_lib_path
    require 'rvm'
    # RVM.use_from_path! File.dirname(File.dirname(__FILE__))
    # edit this line according to you ruby version
    RVM.use!('1.9.2@YOUR_GEMSET')
  rescue LoadError
    # RVM is unavailable at this point.
   raise "RVM ruby lib is currently unavailable."
 end
end

# Select the correct item for which you use below.
# If you're not using bundler, remove it completely.
#
# # If we're using a Bundler 1.0 beta
ENV['BUNDLE_GEMFILE'] = File.expand_path('../Gemfile', File.dirname(__FILE__))
require 'bundler/setup'
#
# # Or Bundler 0.9...
# if File.exist?(".bundle/environment.rb")
#   require '.bundle/environment'
# else
#   require 'rubygems'
#   require 'bundler'
#   Bundler.setup
# end 
```

之后，只需让 apache 指向正确的公共目录

```
DocumentRoot /var/www/app/public
  <Directory /var/www/app/public> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T18:14:29.303

这就是我为乘客设置多个虚拟主机的方式：

```
user@debian:# cat /etc/apache2/mods-enabled/passenger.conf 
<IfModule mod_passenger.c>
  PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11
  PassengerRuby /usr/local/rvm/wrappers/ruby-1.9.3-p125/ruby
</IfModule>

user@debian:# cat /etc/apache2/mods-enabled/passenger.load 
LoadModule passenger_module /usr/local/rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11/ext/apache2/mod_passenger.so

user@debian:# cat /etc/apache2/sites-enabled/site1
<VirtualHost *:80>
  ServerName site1
  RailsEnv development

  DocumentRoot /var/www/site1/public
  <Directory /var/www/site1/public>
    Options None
    AllowOverride None

    Order deny,allow
    Allow from all
  </Directory>
</VirtualHost>

user@debian:# cat /etc/apache2/sites-enabled/site2
<VirtualHost *:80>
  ServerName site2
  RailsEnv development

  DocumentRoot /var/www/site2/public
  <Directory /var/www/site2/public>
    Options None
    AllowOverride None

    Order deny,allow
    Allow from all
  </Directory>
</VirtualHost> 
```

# cocos2d-iphone - 如何循环遍历复合 CCArray 中的所有对象

> ID：10422053
> 
> 赞同：0
> 
> 时间：2012-05-02T21:33:11.907
> 
> 标签：cocos2d-iphone

我正在做一个项目，该项目需要我创建一个包含更多 CCArray 的 CCArray。我正在寻找一种方法来遍历根数组内的数组中的所有对象。我想使用 CCARRAY_FOREACH 遍历所有 15 个对象。这可能吗？

*   rootArray [0] - 包含有 5 个对象的 subArrayA
*   rootArray [1] - 包含充满 5 个对象的 subArrayB
*   rootArray [2] - 包含充满 5 个对象的 subArrayC

我在通过使用 CCARRAY_FOREACH([batchnode children], object) 使用 CCSpriteBatchNode 时使用了 CCARRAY_FOREACH，但是如何与数组数组一起使用？我知道 CCARRAY_FOREACH(rootArray, object) 不起作用，因为它返回内部数组而不是这些数组中的对象。

如果有菜鸟问题，请告诉我并抱歉。:0/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:32:27.000

你可以使用 foreach 循环...

```
for(CCArray *array in yourArray)
{
 for(YourObject *obj in array)
  {
       //access objects here
  }
} 
```

检查语法，因为我现在没有 x-code.. 它只是一个片段.. 希望这会有所帮助.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:05:04.370

你试过这个吗？

```
CCARRAY_FOREACH(array, innerArray) 
{
    CCARRAY_FOREACH(innerArray, item) 
    {
        // stuff
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T12:35:42.047

递归是你的朋友。

```
-(void) recurseIntoArray:(CCArray*)array
{
    for (id item in array)
    {
        if ([item isKindOfClass:[CCArray class]])
        {
             [self recurseIntoArray:(CCArray*)item];
        }
        else
        {
             NSLog(@"item: %@", item);
        }
    }
} 
```

只需在根数组的任何地方开始迭代：

```
[self recurseIntoArray:rootArray]; 
```

值得一提的是：CCARRAY_FOREACH 不再是必需的，至少在 cocos2d 1.1 和 2.0 中你可以使用 for 的常规快速迭代。也可以在 cocos2d 1.0.1 中工作，我想我在那里也使用了快速枚举。

# gradle - 有没有办法在 Gradle 中列出任务依赖项？

> ID：10422054
> 
> 赞同：173
> 
> 时间：2012-05-02T21:33:17.440
> 
> 标签：gradle

`./gradle tasks`列出“一些”任务。查看 [http://gradle.org/docs/current/userguide/java_plugin.html](http://gradle.org/docs/current/userguide/java_plugin.html)有隐藏的未列出。此外，其他插件不会有如此漂亮的任务之间的依赖关系图。

有没有办法

1.  使用 gradle 列出所有插件中的所有任务
2.  列出任务以及它们所依赖的任务（有点像 maven，`dependency:tree`但用于任务）

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2017-04-20T07:11:16.680

> 列出任务以及它们所依赖的任务（有点像 maven 的 depenceny:tree 但用于任务）

为此，您可以使用`--dry-run`（或`-m`）选项列出按特定命令执行的任务，但不执行命令，例如

```
gradle assemble --dry-run 
```

你可以在[这里找到更多](https://docs.gradle.org/current/userguide/tutorial_gradle_command_line.html#sec:dry_run)

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2012-05-02T21:59:57.730

在 Gradle 3.3 之前，您可以使用该`--all`标志来获取可用任务和任务依赖项的更详细列表：

```
gradle tasks --all 
```

出于性能原因，从 Gradle 3.3 开始，从该任务中删除了依赖项报告。[Gradle 3.3 发行说明](https://docs.gradle.org/3.3/release-notes.html#improved-performance-of-tasks-report)中记录了此更改及其基本原理。

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2016-01-19T15:08:30.683

你可以试试[com.dorongold.task-tree](https://plugins.gradle.org/plugin/com.dorongold.task-tree)插件：

```
plugins {
  id "com.dorongold.task-tree" version "2.1.0"
} 
```

使用简单：

```
gradle <task 1>...<task N> taskTree 
```

[自述文件](https://github.com/dorongold/gradle-task-tree)的示例结果：

```
gradle build taskTree --no-repeat

:build
+--- :assemble
|    \--- :jar
|         \--- :classes
|              +--- :compileJava
|              \--- :processResources
\--- :check
     \--- :test
          +--- :classes
          |    +--- :compileJava
          |    \--- :processResources
          \--- :testClasses
               +--- :compileTestJava
               |    \--- :classes
               |         +--- :compileJava
               |         \--- :processResources
               \--- :processTestResources 
```

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2017-10-25T11:47:16.593

您可以将其粘贴到您的`build.gradle`：

```
gradle.taskGraph.whenReady {taskGraph ->
    println "Found task graph: " + taskGraph
    println "Found " + taskGraph.allTasks.size() + " tasks."
    taskGraph.allTasks.forEach { task ->
        println task
        task.dependsOn.forEach { dep ->
            println "  - " + dep
        }
    }
} 
```

或者这个进入你的`build.gradle.kts`：

```
gradle.taskGraph.whenReady(closureOf<TaskExecutionGraph> {
    println("Found task graph: $this")
    println("Found " + allTasks.size + " tasks.")
    allTasks.forEach { task ->
        println(task)
        task.dependsOn.forEach { dep ->
            println("  - $dep")
        }
    }
}) 
```

然后用 gradle 运行你的任务：

```
./gradlew build 
```

你应该看到这个：

```
Found task graph: org.gradle.execution.taskgraph.DefaultTaskGraphExecuter@36eb780c
Found 19 tasks.
task ':compileJava'
  - task 'compileJava' input files
task ':compileScala'
  - task 'compileScala' input files
  - compileJava
task ':processResources'
  - task 'processResources' input files
task ':classes'
  - org.gradle.api.internal.tasks.DefaultTaskDependency@287a7782
  - task 'classes' input files
  - compileJava
  - dirs
  - compileScala
  - processResources
task ':jar'
  - task 'jar' input files
task ':assemble'
  - task 'assemble' input files
  - org.gradle.api.internal.artifacts.DefaultPublishArtifactSet$ArtifactsTaskDependency@5bad9616
task ':compileTestJava'
    - task 'compileTestJava' input files
task ':compileTestScala'
  - task 'compileTestScala' input files
  - compileTestJava
task ':processTestResources'
  - task 'processTestResources' input files
task ':testClasses'
  - processTestResources
  - task 'testClasses' input files
  - compileTestScala
  - org.gradle.api.internal.tasks.DefaultTaskDependency@42c1fa08
  - compileTestJava
  - dirs
task ':compileIntegrationTestJava'
  - task 'compileIntegrationTestJava' input files
task ':compileIntegrationTestScala'
  - task 'compileIntegrationTestScala' input files
  - compileIntegrationTestJava
task ':processIntegrationTestResources'
  - task 'processIntegrationTestResources' input files
task ':integrationTestClasses'
  - processIntegrationTestResources
  - compileIntegrationTestJava
  - org.gradle.api.internal.tasks.DefaultTaskDependency@7c8aa0fe
  - compileIntegrationTestScala
  - dirs
  - task 'integrationTestClasses' input files
task ':composeUp'
  - task 'composeUp' input files
task ':integrationTest'
  - task ':composeUp'
  - task 'integrationTest' input files
task ':test'
  - task 'test' input files
task ':check'
  - task 'check' input files
  - task ':test'
  - task ':integrationTest'
task ':build'
  - task 'build' input files
  - check
  - assemble 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2013-10-22T18:00:10.460

gradle 任务树可以通过以下插件进行可视化`gradle tasks --all` **或尝试：**

**Graphs Gradle 和 Talaiot：** 查看以下内容：[https](https://proandroiddev.com/graphs-gradle-and-talaiot-b0c02c50d2b1) ://proandroiddev.com/graphs-gradle-and-talaiot-b0c02c50d2b1博客，因为它以图形方式列出了查看任务和依赖项。这使用**免费**的开放式 Graphviz 工具**Gephi** ( [https://gephi.org/features/](https://gephi.org/features/) )

**gradle-task-tree**：[https](https://github.com/dorongold/gradle-task-tree) ://github.com/dorongold/gradle-task-tree和

**gradle-visteg**：[https ://github.com/mmalohlava/gradle-visteg](https://github.com/mmalohlava/gradle-visteg)

1.  **gradle-visteg**插件：生成的文件可以通过[Graphviz](http://www.graphviz.org/) `dot`实用程序进行后处理。

2.  **例如**，生成 png 图像如下：

    `cd build/reports/; dot -Tpng ./visteg.dot -o ./visteg.dot.png`

欲了解更多信息，请访问[Graphviz](http://www.graphviz.org/)主页。

无论实际用于运行任务的任务（例如：）`build`都可以使用`--profile`选项在漂亮的 HTML 页面中查看

gradle **--profile**清理构建

完成后，转到 build/reports/profile 文件夹并浏览 .html 文件。您将在一个漂亮的 html 页面中看到依赖项解析和其他信息。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2020-10-03T18:58:55.100

为此有一个新插件：

```
plugins {
    id 'org.barfuin.gradle.taskinfo' version '1.0.1'
} 
```

然后你可以输入：

```
./gradlew tiTree assemble 
```

得到这样的东西：

```
:assemble                             (org.gradle.api.DefaultTask)
+--- :jar                             (org.gradle.api.tasks.bundling.Jar)
|    `--- :classes                    (org.gradle.api.DefaultTask)
|         +--- :compileJava           (org.gradle.api.tasks.compile.JavaCompile)
|         `--- :processResources      (org.gradle.language.jvm.tasks.ProcessResources)
+--- :javadocJar                      (org.gradle.api.tasks.bundling.Jar)
|    `--- :javadoc                    (org.gradle.api.tasks.javadoc.Javadoc)
|         `--- :classes               (org.gradle.api.DefaultTask)
|              +--- :compileJava      (org.gradle.api.tasks.compile.JavaCompile)
|              `--- :processResources (org.gradle.language.jvm.tasks.ProcessResources)
`--- :sourcesJar                      (org.gradle.api.tasks.bundling.Jar) 
```

该插件还可以显示任务的执行顺序：

```
In order to execute task ':assemble', the following tasks would be executed in this order:

  1\. :compileJava      (org.gradle.api.tasks.compile.JavaCompile)
  2\. :processResources (org.gradle.language.jvm.tasks.ProcessResources)
  3\. :classes          (org.gradle.api.DefaultTask)
  4\. :jar              (org.gradle.api.tasks.bundling.Jar)
  5\. :javadoc          (org.gradle.api.tasks.javadoc.Javadoc)
  6\. :javadocJar       (org.gradle.api.tasks.bundling.Jar)
  7\. :sourcesJar       (org.gradle.api.tasks.bundling.Jar)
  8\. :assemble         (org.gradle.api.DefaultTask) 
```

[插件文档](https://gitlab.com/barfuin/gradle-taskinfo#gradle-taskinfo)中的更多信息。
完全披露：我是 gradle-taskinfo 的作者。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-05-03T03:35:10.193

您可以使用 Gradle.getTaskGraph() 以编程方式访问任务图以在构建脚本中对其进行检查

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-07-07T13:26:30.810

随着您的多项目的增长，我标记为正确的解决方案变得有点笨拙且难以阅读

```
gradle tasks --all 
```

相反，我已经转向查看一个特定的项目，使其更容易

```
gradlew :full-httpproxy:tasks --all 
```

其中'full-httpproxy'是我的项目的名称（和典型的目录）。

然而，我很好奇如何在主/根项目上列出任务，并且在这里也有一个悬而未决的问题

[如何仅在 gradle 中列出主项目的所有任务？](https://stackoverflow.com/questions/38362977/how-to-list-all-tasks-for-the-master-project-only-in-gradle)

因为现在似乎不可能这样做。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-02-10T14:38:30.313

根据 cstroe 的回答，下面还打印了每个 Gradle 任务的输入和输出文件。这很有用，因为依赖关系有时由输入/输出关系定义。即，如果任务 B 使用任务 A 的输出，则 cstroe 的答案不会向您显示依赖关系。以下是非常原始的，但确实显示了每个任务的输入和输出文件列表：

```
gradle.taskGraph.whenReady {taskGraph ->
    println "Found task graph: " + taskGraph
    println "Found " + taskGraph.allTasks.size() + " tasks."
    taskGraph.allTasks.forEach { task ->
        println()
        println("----- " + task + " -----")
        println("depends on tasks: " + task.dependsOn)
        println("inputs: ")
        task.inputs.getFiles().getFiles().collect { f -> println(" - " + f)}
        println("outputs: ")
        task.outputs.getFiles().getFiles().collect { f -> println(" + " + f)}
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-12-03T19:07:54.133

你也可以为你的本地环境 build.gradle 添加以下插件，[https://github.com/dorongold/gradle-task-tree](https://github.com/dorongold/gradle-task-tree)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-17T10:50:42.103

如果插件不适合你，你可以在你的 build.gradle 中使用这个要点

[https://gist.github.com/jrodbx/046b66618c558ca9002a825629d59cde](https://gist.github.com/jrodbx/046b66618c558ca9002a825629d59cde)

# mysql - 在 MySQL 5.5 中添加用户问题

> ID：10422061
> 
> 赞同：1
> 
> 时间：2012-05-02T21:34:09.383
> 
> 标签：mysql, linux, ubuntu

我有一个安装脚本，它设置了一个 MySQL 用户 + 数据库 + 一些表。它在 mysql 5.0 中运行良好，但我们最近升级到了 mysql 5.5 附带的 Ubuntu 12.04。但是在 mysql 5.5 中我遇到了错误。

该问题似乎与添加用户有关。我使用这样的一行来创建一个 root 用户，稍后用于登录并设置其余的东西：

```
INSERT INTO mysql.user VALUES('%','myrootuser','','Y','Y','Y','Y','Y','Y','Y',
'Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y',
'Y','Y','','','','',0,0,0,0,'','');
flush privileges; 
```

命令成功。但是，当使用这个新的“myrootuser”登录时，用户似乎没有足够的权限：

```
jeroen@jeroen-ubuntu:~$ mysql -u myrootuser -e 'select * from mysql.user;'
ERROR 1142 (42000) at line 1: SELECT command denied to user ''@'localhost' for table 'user' 
```

我还注意到我可以使用不存在的用户名登录，这可能会混淆真正的问题：

```
ubuntu@myserver:~$ mysql -u thisuserdoesnotexist
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 40
Server version: 5.5.22-0ubuntu1 (Ubuntu)

mysql> 
```

5.5 中的 MySQL 身份验证是否有一些我不知道的变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:47:14.893

对于用户创建问题，尝试使用phpMyAdmin添加。PMA 比 SQL 查询好！

对于您的登录问题，删除`*`用户列表中的用户（使用 PMA）。它将解决您的问题！我遇到了同样的问题，我这样做是为了解决它。

# c# - 进程被杀死后是否可能导致内存泄漏？

> ID：10422063
> 
> 赞同：1
> 
> 时间：2012-05-02T21:34:24.230
> 
> 标签：c#, .net, wpf, windows, google-chrome

我正在编写一个生成并杀死 Chrome 浏览器的应用程序。虽然我以编程方式终止进程（与通过 Windows 任务管理器终止进程的效果相同），但有人建议这也可能导致内存泄漏 - 即来自与原始进程未正确关联的内核资源等元素.

在进程被杀死后，应用程序是否有可能泄漏内存或以其他方式拥有不可回收的内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:09:23.477

这*可能会*发生，但当它发生时，它*绝不*是程序中的错误。它总是由 Windows 内核代码或某些内核驱动程序中的错误/错误引起的。此外，您甚至不太可能在 Windows 的标准安装中遇到此类行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:20:53.893

一个程序可能会启动多个进程。杀死父进程本身并不能保证子进程会终止。这可能看起来像内存泄漏。就操作系统而言，所有分配的内存仍然与正在运行的进程相关联，只是您可能不希望所有这些进程仍在运行。

就 Chrome 而言，它确实产生了许多子进程。我*认为*它可以确保当父进程意外终止时它们会自行清理，但我不能确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T22:49:49.600

直接在任务管理器中杀死进程可能会导致内存泄漏。有证据表明不断杀死“explorer.exe”会减慢整个操作系统的速度。

每个 Chrome 窗口都有一个 GUI 进程和每个活动选项卡的后台进程。后台进程负责获取页面内容、发送请求/发布数据，并且比 GUI 进程持有更少的内核对象句柄。任何编程框架都会有至少两种方法来关闭活动进程。例如，在 .NET 中，Process 类有以下两种方法：

1.  关闭主窗口（）
    *   向主窗口消息循环发送 WM_QUIT 消息以请求关闭进程。这使程序有机会重新调用其子窗口及其内核对象。
2.  杀（）
    *   强制终止进程，与在任务管理器中终止进程相同。这是关闭后台进程的唯一方法。但是当这适用于 GUI 进程时，这不会触发所有 GUI/内核事件来释放资源。内核对象包括 GDI 对象、文件/打印机句柄、数据库/网络连接上下文等。释放这些资源需要一些时间，同时跟踪整个内存链表/映射以释放内核对象的资源。甚至 .NET/java 都有它的垃圾收集器来确定释放“托管”内存，内核对象的非托管资源并不总是被覆盖。

以下是 .NET C# 中的测试应用程序。我们可以使用 Visual Studio 附加组件将 CloseMainWindow() 与 Kill() 进行比较：Memory Profiler。在几乎所有情况下，Kill() 速度更快，但通过检查实时内存图中的“根引用”和“实例引用”释放的内存更少。

```
private Process _chromeProcess = new Process();

private void bntCreate_Click(object sender, EventArgs e)
{
    string chromePath = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData),
        @"Google\Chrome\Application\chrome.exe");

    _chromeProcess.StartInfo = new ProcessStartInfo(chromePath, @"-app=http://localhost:(a local Web site)");
    _chromeProcess.Start();
}

private void btnKill_Click(object sender, EventArgs e)
{
    _chromeProcess.Kill();
    _chromeProcess.WaitForExit();
    _chromeProcess.Close();
}

private void btnClose_Click(object sender, EventArgs e)
{
    _chromeProcess.CloseMainWindow();
    _chromeProcess.WaitForExit();
    _chromeProcess.Close();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T22:14:03.767

如果一个程序在剪贴板上放置了大量内存，它可能*看起来*像内存泄漏，但剪贴板仍然负责内存，并在其他东西复制新内容时释放它。

这是我能想到的唯一一种内存超过程序生命周期的情况。

# jquery - Jquery在点击时添加值

> ID：10422067
> 
> 赞同：0
> 
> 时间：2012-05-02T21:34:46.983
> 
> 标签：jquery

执行点击功能时，我在累加值时遇到问题。

我有简单的单选按钮：

```
<input type="radio" name="product1" class="price" value="4" /> 4
<input type="radio" name="product2" class="price" value="6" /> 6 
```

我想在执行单击时添加值。显然我可以通过点击获得价值，但我不知道如何将它们相加。

```
$('.price').click(function() {
    price = $(this).val();
} 
```

好的，其他问题。

如果我们有两个单独的点击函数，像这样：

```
<input type="radio" name="product1" class="price" value="4" /> 4
<input type="radio" name="product2" class="price" value="6" /> 6

<input type="radio" name="product1" class="number" value="3" /> 3
<input type="radio" name="product2" class="number" value="7" /> 7 
```

和

```
$('.price').click(function() {
    price = $(this).val();
}

$('.number').click(function() {
    number = $(this).val();
} 
```

如何将 .price 单选和 .number 单选的值相加？最重要的是，确保您只能从每个值中添加一个值，而不是不管哪组单选按钮都会添加所有值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:36:05.150

尝试

```
var price = 0;

$('.price').click(function() {
    price += parseInt($(this).val(), 10);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:25:52.367

我认为我不了解用于显示/选择价格的元素的问题，因此我将添加一些提示，希望它们有用：

要选择给定名称的所有单选按钮（例如“product1”），您可以：

```
$('input:radio[name="product1"]') 
```

要选择所有选中的 givan name 单选按钮（只能有一个）：

```
$('input:radio[name="product1"]:checked') 
```

要选择所有选中的单选按钮而不考虑名称：

```
$('input:radio:checked') 
```

汇总输入元素的 jQuery 集合中的所有值（可解析为数字）的函数：

```
function sumValues($inputs) {
    var sum = 0;
    $inputs.each(function () { sum += +this.value; });
    return sum;
}; 
```

你的处理程序应该看起来像这样（插入适当的选择器）：

```
$(<whatever-triggers-recalc>).click(function() {
    // change selector to the one that selects the radios you need summed
    var sum = sumValues( $('input:radio[name="product1"]') );
    // here, you have your sum
}); 
```

您不想**更新**总和（在事件上），而是每次都需要**重新计算。**

您可能不需要`classes`，`name`如果该属性足以识别要发送到服务器的信息，则该属性就足够了。

我希望这些是有帮助的。

# dynamic - 使用 Facebook C Sharp SDK 访问 FQL 语句的结果

> ID：10422068
> 
> 赞同：0
> 
> 时间：2012-05-02T21:34:46.987
> 
> 标签：dynamic, facebook-c#-sdk, facebook-fql

我有这个 FQL 语句：

```
 var fb = new FacebookClient(accessToken);
        dynamic result = fb.Get("fql",
            new { q = "SELECT post_id, actor_id, target_id, message FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed') AND is_hidden = 0" }); 
```

现在我正在尝试像这样访问每个单独的列：

```
dynamic a = result.post_id; 
```

但是，它返回 null。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:38:32.257

FQL 返回属性“数据”内的数据......并且该属性是一个数组......所以......要获取您需要的整个集合：

```
var rows = result.data; 
```

获取第一行的“post_id”：

```
var post_id = result.data[0].post_id; 
```

所以......如果你想显示'post_id'的列表......你可以：

```
foreach (var item in result.data)
{
    Response.Write(item.post_id);
} 
```

希望有帮助！

# django - Django Admin：如何为用户显示附加字段？

> ID：10422070
> 
> 赞同：0
> 
> 时间：2012-05-02T21:35:02.927
> 
> 标签：django, user-interface, django-admin, django-templates

使用 Django“创建用户配置文件的方法”页面上的示例为用户创建一些额外的字段，效果令人满意，但我遇到的问题是当你想将这些新数据插入用户时，因为我从管理员和其他人那里看到我找到的解决方案不是来自表单，但我实际上更喜欢它来自 Django admin 的想法，以保持管理状态。

因此，它向用户模型插入了额外的字段：

```
## User Additional Fields
User.add_to_class ('nit' models.IntegerField (max_length = 20, null = True))
User.add_to_class ('company', models.CharField (max_length = 30, null = True))
User.add_to_class ('address', models.CharField (max_length = 30, null = True))
User.add_to_class ('city', models.CharField (max_length = 10, null = True))
User.add_to_class ('phone', models.CharField (max_length = 10, null = True))
User.add_to_class ('Mobile', models.CharField (max_length = 10, null = True)) 
```

另一方面，像我这样的同一用户中的“权限”功能将其删除，因为平台不需要此信息，并且附加字段保留在“个人信息”中，所有这些都是管理员：

**个人信息**

名：

姓：

电子邮件地址：

尼特：

公司：

地址：

城市：

电话：

移动的：

你能帮我看看如何在管理员 Django1.4 中获取这些新字段吗？我需要帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:42:55.993

我认为您想要做的是与用户一起在管理员中编辑您的 UserProfile？如果是这样，请尝试将以下内容放入您定义了 UserProfile 的任何应用程序的 admin.py 文件中：

```
from django.forms.models import inlineformset_factory
from django.contrib import admin
from django.contrib.auth.models import User
from django.contrib.auth.admin import UserAdmin

from myapp.models import UserProfile

class UserProfileFormSet(inlineformset_factory(User, UserProfile)):
    def __init__(self, *args, **kwargs):
        super(UserProfileFormSet, self).__init__(*args, **kwargs)
        self.can_delete = False

class UserProfileInline(admin.StackedInline):
    model = UserProfile
    fk_name = 'user'
    formset = UserProfileFormSet

class MyUserAdmin(UserAdmin):
    inlines = [UserProfileInline]

# Re-register altered UserAdmin
admin.site.unregister(User)
admin.site.register(User, MyUserAdmin) 
```

# magento - Magento - 客户资料照片上传

> ID：10422071
> 
> 赞同：2
> 
> 时间：2012-05-02T21:35:03.263
> 
> 标签：magento

我一直在尝试找到一种方法将照片添加到 Magento 的客户资料中。除了这个，他们什么都有，我在任何地方都找不到怎么做。任何帮助表示赞赏。我正在使用社区版。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:47:08.797

要在 magento 中为客户上传个人资料照片，我们需要执行以下几个步骤。

*   为个人资料照片添加一个新字段（[如何为客户创建新字段](https://stackoverflow.com/questions/8426242/how-to-create-new-fields-for-customer)- 检查此链接它将帮助您）。
*   上面的链接可帮助您在 DB 中添加新文件，您需要手动上传该照片，下面的代码将帮助您在 magento 中上传照片。

    ```
     if(isset($_FILES['logo']['name']) and (file_exists($_FILES['logo']['tmp_name']))) 
                    {

                      try {
                        $uploader = new Varien_File_Uploader('logo');
                        $uploader->setAllowedExtensions(array('jpg','jpeg','gif','png'));
                        $uploader->setAllowRenameFiles(false);
                        $uploader->setFilesDispersion(false);
                        $path       = Mage::getBaseDir('media') . DS .'catalog/customer/logo/';
                        $newName    = time() . $_FILES['logo']['name'];
                        $uploader->save($path, $newName);
                        $customer->setLogo($newName);

                        // actual path of image
                        $imageUrl = $path . $newName;

                        // path of the resized image to be saved
                        // here, the resized image is saved in media/resized folder
                        $imageResized = $path . $newName;

                        // resize image only if the image file exists and the resized image file doesn't exist
                        // the image is resized proportionally with the width/height 135px
                        if (!file_exists($imageResized)&&file_exists($imageUrl)) :
                            $imageObj = new Varien_Image($imageUrl);
                            $imageObj->constrainOnly(TRUE);
                            $imageObj->keepAspectRatio(TRUE);
                            $imageObj->keepFrame(FALSE);
                            $imageObj->resize(150, 150);
                            $imageObj->save($imageResized);

                        endif;
                      }catch(Exception $e) {

                      }
                    } 
    ```

*   上传后我们需要将文件名保存在数据库中。

    $customer->setLogo($newName);

# extjs - d3.select 在 ExtJs 文档中返回空

> ID：10422073
> 
> 赞同：0
> 
> 时间：2012-05-02T21:35:24.817
> 
> 标签：extjs, extjs4, d3.js

我正在使用 D3 从 Json 数据源渲染到 ExtJs 组件。

来自 test.html：

```
<html>
    <head>
        <title>Test</title>
        <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js"></script>
        <script type="text/javascript" src="http://docs.sencha.com/ext-js/4-0/extjs/ext-all.js"></script>
        <script type="text/javascript" src="Test.js"></script>
    </head>
    <body>
        <script type='text/javascript'>
            Ext.onReady(function(){
                Ext.create('Ext.panel.Panel',
                {
                    layout: 'fit',
                    renderTo: Ext.getBody(),
                    items: [
                        {
                            xtype: 'panel',
                            html : 'There should be a test below this'
                        },
                        {
                            id: 'testPanel',
                            xtype: 'xxxviewtest'
                        }
                    ]
                });
                d3.json("Test1.json", function(json) { Ext.getCmp ('testPanel').deliverJson (json); });
            });
        </script>
    </body>
</head> 
```

和 Test.js：

```
Ext.define('xxx.view.Test', {
    extend: 'Ext.Component',
    alias: 'widget.xxxviewtest',

    deliverJson: function(json) {
        var target = d3.select("#" + this.id);
        if (target[0][0]) {
            // install svg element and draw
            ...
        }
    }
}); 
```

在简单的测试用例中，这可以正常工作，但在涉及选项卡面板和许多 UI 组件的更复杂的文档用例中，Test.js 中对 d3.select 的调用返回一个空选择。

我需要做什么才能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:05:27.883

如果“Test.js 中的 d3.select 返回一个空选择”，我认为当时您查询的 Ext 组件还没有完全显示。所以我建议将`d3.json(...)`into`render`事件的处理程序移动到消除一种可能性。如果问题仍然存在，我们将找到另一种方法。

# java - ArrayList 上的 Collections.sort() 似乎没有正确排序

> ID：10422074
> 
> 赞同：1
> 
> 时间：2012-05-02T21:35:26.293
> 
> 标签：java, sorting, arraylist, floating-point, nan

我正在尝试对 TokenDoubleCounters（我的自定义对象）的 ArrayList 进行排序。在 TokenDoubleCounter 中，我实现了 equals 和 compareTo，如下所示：

```
public class TokenDoubleCounter implements Comparable<TokenDoubleCounter> {
private String word;
private double count;

public boolean equals(Object o) {
    if (o instanceof TokenDoubleCounter) {
        TokenDoubleCounter other = (TokenDoubleCounter) o;
        if (other.word.equals(this.word) && other.count == this.count)
            return true;
    }
    return false;
}

public int compareTo(TokenDoubleCounter other) {
    double result = this.count - other.getCount();
    if (result > 0.0) 
        return 1;
    if (result < 0.0) 
        return -1;
    return this.word.compareTo(other.getWord());
}

    //rest of class omitted
} 
```

这些对象在以下函数调用中创建和排序：

```
 public List<TokenDoubleCounter> chiSquareValueAll(int cl, int cl2) {
    List<TokenDoubleCounter> list = new ArrayList<TokenDoubleCounter>();

    for (String word : map.keySet()) {
                                                        //chiSquareValue2 returns a double
        list.add(new TokenDoubleCounter(word, chiSquareValue2(cl,cl2,word)));       
    }
    Collections.sort(list, Collections.reverseOrder());
    return list;
} 
```

最后，遍历这些结果，我将它们写入文件：

```
 public boolean printChiSquare(PrintWriter out, int cl, int cl2) {
    for (TokenDoubleCounter tdc : this.chiSquareValueAll(cl,cl2)) {
        if (tdc.getCount() > 2.7) {
             //getWord() returns string value "word"  and getCount() returns double value "count"
            out.write(tdc.getWord() + "," + tdc.getCount() + "\n");

        }
    }
    return true;
} 
```

结果让我有些惊讶，因为它们似乎不符合我要求的顺序：

> 一句话，8.937254901960785
> 字，8.937254901960785
> 字，8.937254901960785
> 字，5.460792811839323
> 字，4.746170542635659
> 字，4.382692307692308
> 字，4.382692307692308
> 字，4.382692307692308
> 字，4.382692307692308
> 字，4.382692307692308
> 字，4.382692307692308
> 字，4.382692307692308
> **字，8.937254901960785**
> 字，8.937254901960785
> 字，8.937254901960785
> 字，8.937254901960785
> 字， 8.937254901960785
> 字,8.937254901960785
> 字,8.937254901960785
> 字,5.460792811839323
> 字,4.746170542635659
> 字,4.746170542635659
> 字，4.746170542635659
> 字，4.382692307692308
> ...

我错过了什么？如果您需要更多详细信息，请告诉我。

另外，我应该补充一点，所有条目“word”实际上都是不同长度的字符串，等等，但我认为这不相关。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:59:53.777

试试这个：

```
public int compareTo(TokenDoubleCounter other) {
    int result = Double.compare(count, other.count);
    return result != 0 ? result : word.compareTo(other.word);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:48:00.507

比较器不必只返回 -1、0、1。您可能会考虑使用计数之间的差异来创建幅度（如果这对您的数据有意义）。然后，项目应根据它们的相对顺序放置到位。

我认为您最终会得到一堆具有相同比较器结果的项目，并且在这种情况下它们会保持插入顺序。

# ruby-on-rails - Rails 压缩文件 - 读取二进制数据

> ID：10422075
> 
> 赞同：1
> 
> 时间：2012-05-02T21:35:34.167
> 
> 标签：ruby-on-rails, ruby, zip, binaryfiles

我正在使用[ruby​​zip](http://rubyzip.sourceforge.net/)库来压缩文件。
但我遇到问题。
我尝试：

```
 Zip::ZipOutputStream.open('c:/sites/efiling2/test.zip') do |zos|
        zos.put_next_entry("test.rtf")
        zos.write IO.read('c:/sites/efiling2/test.rtf')
        zos.put_next_entry("test.jpg")
        zos.write IO.read('c:/sites/efiling2/test.jpg')
    end 
```

但是 write 方法限制了原始文件的大小。例如，我的源文件**test.jpg**的大小为**11913 字节**，但在存档中有一个文件**test.jpg**的大小**为 11551 字节**。与 test.rtf 有相同的情况。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:59:36.520

我怀疑你的问题可能是`IO.read()`。我不太确定它是否正确处理二进制数据。

我会试试这个，看看它是否能解决问题：

```
File.open(filename, "rb") { |f| f.read } 
```

# cocos2d-iphone - 具有合成和 CCSpriteBatchNode 的游戏对象

> ID：10422081
> 
> 赞同：1
> 
> 时间：2012-05-02T21:35:57.013
> 
> 标签：cocos2d-iphone, code-organization

我目前正在 iPhone 上使用 cocos2d 和 box2d 开发游戏。
我阅读了很多关于游戏代码组织、游戏对象结构等的文章。我首先通过继承自 CCSprite 的基类来开发我的游戏对象。我有一个 CCSpriteBatchNode 来在一次绘制调用中绘制所有玩家可以与之交互的游戏项目。这很简单，因为我的 Item 类间接继承自 CCSprite，因此我可以轻松地将我的项目添加到 CCSpriteBatchNode。最重要的是，我可以依靠 cocos2d 来保留我的对象。

在阅读了这些文章之后，我明白需要用更面向组合的风格而不是继承风格来重构我的代码。所以我选择了一个继承自 NSObject 的 GameObject 基类，并具有一个或多个 CCSprite、一个 b2Body 等属性。

我现在面临的问题是我不能再直接将我的游戏对象添加到 CCSpriteBatchNode 中。我首先认为我可以通过将 GameObject 的 sprite 属性添加到 CCSpriteBatchNode 来轻松解决问题。没关系，但谁保留拥有 CCSprite 的对象？如何轻松地从 CCSprite 访问原始对象（用户数据/对象是否正常）？

我应该创建一个数组来保留我的物品吗？我想知道您将如何使用具有这种游戏对象结构的 CCSpriteBatchNode ？

已经有一个关于未答复的[线程](https://stackoverflow.com/questions/9222967/cocos2d-object-composition-and-ccspritebatch)，我真的很想听听这个主题。不是一个直接的答案，而是一些更进一步的元素。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T12:28:27.243

我个人不建议再使用 NSObject 作为 cocos2d 类的基类。仅仅因为你失去了一些 cocos2d 的便利特性，比如调度，你可以很容易地在内存管理方面给自己开枪。

您想要的是场景具有一个或多个精灵批处理节点的设置。您可以将它们视为您的精灵的图层。从 CCNode 派生的实际游戏对象（将它们视为 MVC 控制器）可以添加到任何地方，通常直接添加到场景中。

```
scene
 + batch node 1
   + sprite 1
   + sprite 2
   + sprite n
 + batch node 2
   + sprite 1
   + sprite 2
   + sprite n
 + game node 1
 + game node 2
 + game node 3
 + game node n 
```

要记住的是，每个游戏节点都有一个或多个精灵作为实例变量，但它们不是节点的子节点。例如，游戏节点 1 类可能如下所示：

```
game node 1 class
  CCSprite* sprite1;  // instance variable
  CCSprite* sprite2;  // instance variable 
```

现在，当您初始化游戏节点 1 及其精灵时，您将精灵添加到适当的精灵批处理节点。通常，您会希望像单例一样访问您的场景以访问其 sprite 批处理属性。

```
sprite1 = [CCSprite spriteWithSpriteFrameName:@"doodle.png"];
[[scene sharedScene].batchNode1 addChild:sprite1];
sprite2 = [CCSprite spriteWithSpriteFrameName:@"splash.png"];
[[scene sharedScene].batchNode2 addChild:sprite2]; 
```

请注意，您不需要保留精灵，只要它们是精灵批处理节点的子节点。addChild 方法为您保留它。实际上，它只是将其添加到执行保留的数组中。另外，如果您仍在考虑“保留”，请[务必开始使用 ARC](http://www.learn-cocos2d.com/2012/04/enabling-arc-cocos2d-project-howto-stepbystep-tutorialguide/)。

您不需要弄清楚如何访问精灵批处理中的精灵。它可以作为游戏节点类的实例变量使用，如果您愿意，也可以将其作为属性公开提供给其他类。

游戏节点类显然运行所有对象的游戏逻辑，包括定位和修改精灵的属性。在游戏节点类中唯一需要注意的是从批处理节点中删除精灵，否则可能会泄漏。为此，请覆盖清理方法：

```
-(void) cleanup
{
    [sprite1 removeFromParentAndCleanup:YES];
    sprite1 = nil;
    [sprite2 removeFromParentAndCleanup:YES];
    sprite2 = nil;

    [super cleanup];
} 
```

将变量设置为 nil 很重要，因为清理后可能会有代码运行，包括 dealloc 方法中的代码。您也可以删除 dealloc 中的精灵，但根据您的设置，由于对游戏节点类仍持有的精灵的引用，甚至可能不会调用 dealloc。因此，如果精灵不是游戏节点类本身的子（或孙），则使用清理方法通常更安全。

# ruby-on-rails - 如何正确地将值数组传递给 `attr_accessible` 方法？

> ID：10422083
> 
> 赞同：3
> 
> 时间：2012-05-02T21:36:02.487
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3, attr-accessible

我正在使用 Ruby on Rails v3.2.2，我想处理一个*符号数组，*以便将它的值传递给`attr_accessible`方法，以及它应该被制作。也就是说，我有：

```
attr_array = [:one, :two, ...] 
```

如果我使用：

```
attr_accessible attr_array 
```

我得到以下信息：

```
self.accessible_attributes.inspect
# => #<ActiveModel::MassAssignmentSecurity::WhiteList: {"[:one, :two, ..."]}> 
```

但是，我想得到：

```
# => #<ActiveModel::MassAssignmentSecurity::WhiteList: {"one", "two", "..."}> 
```

以及应该做的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T21:45:00.650

像这样 ：

```
attr_accessible *array 
```

# regex - 正则表达式匹配除两个名称和 在特定单词之后

> ID：10422085
> 
> 赞同：1
> 
> 时间：2012-05-02T21:36:05.493
> 
> 标签：regex, expression, match, names, negative-lookahead

我在这些汇总的电子邮件中有一堆姓名和电子邮件地址，我想摆脱除`First Last <email@domain.com>`整个文档之外的所有内容。基本上我有...

```
From: Name Wood <email@gmail.com>
Subject: Yelp entries for iPod contest
Date: April 20, 2012 12:51:07 PM EDT
To: email@domain.cc

Have had a great experience with .... My Son ... is currently almost a year into treatment. Dr. ... is great! Very informative and always updates us on progress and we have our regular visits. The ... buck program is a great incentive which they've implemented to help kids take care of their teeth/braces. They also offer payment programs which help for those of us that need a structured payment option. Wouldn't take my kids anywhere else. Thanks Dr. ... and staff
Text for 1, 2, and 3 entries to Yelp
Hope ... wins!!
Begin forwarded message:

From: Name Wood <email@gmail.com>
Subject: reviews 2 and 3
Date: April 20, 2012 12:44:26 PM EDT
To: email@domain.cc

Have had a great experience with ... Orthodontics. My Son ... is currently almost a year into treatment. Dr. ... is great! Very informative and always updates us on progress and we have our regular visits. The ... buck program is a great incentive which they've implemented to help kids take care of their teeth/braces. They also offer payment programs which help for those of us that need a structured payment option. Wouldn't take my kids anywhere else. Thanks Dr. ... and staff
Have had a great experience with... 
```

我只想匹配...

```
Name Wood <email@gmail.com>
Name Wood <email@gmail.com> 
```

从这个文本。所以基本上我想匹配单词`"From: "`plus之后的下两个单词，`"<"+email address+">"`不包括单词`"From: "`。我从研究中了解到，这是一个消极的前瞻性（我认为）搜索两个完整的单词（不知何故使用`{0,2}`），然后是一个从一个`<`字符到另一个字符的电子邮件地址`>`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:49:34.197

你可以这样做：

```
/(?:From: )(.*)/g 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:49:43.857

此正则表达式将找到您要查找的内容：

```
(?<=From:)\s*[^<]+<[^>]+> 
```

但是，从您的问题来看，您将如何处理它有点不清楚。匹配的文本可能应该被放入一个或多个组中，以便您可以提取所需的文本。（姓名在一个组中？电子邮件在一个单独的组中？还是两者都在一起？）您还没有说您想用它做什么，所以您必须提供更多信息。以上是最简单的情况。

解释：

```
(?<=From:)   # positive lookbehind to find "From:"
\s*          # optional whitespace
[^<]+<       # everything up to the first '<' (the name)
[^>]+>       # everything up to the '>' (the email) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T23:12:38.503

如果您想删除除姓名和电子邮件之外的所有内容。
修饰符's'（点包括换行符），
两个正则表达式的全局查找和替换是`$1\n`

这更快，但会在成功时留下额外的换行符。

```
Find .*?From:[^\S\n]*([^<\n]+<[^>\n]*\@[^>\n]*>)|.*$ 
```

这比较慢（使用前瞻），但不会留下额外的换行符。

```
Find  .*?From:[^\S\n]*([^<\n]+<[^>\n]*\@[^>\n]*>)(?:(?!From:[^\S\n]*[^<\n]+<[^>\n]*\@[^>\n]*>).)* 
```

# java - JVM 字节码中的 NOP 是做什么用的？

> ID：10422086
> 
> 赞同：18
> 
> 时间：2012-05-02T21:36:07.903
> 
> 标签：java, jvm, bytecode, nop

`NOP`Java 虚拟机的操作码在今天的 JVM 中是否有任何实际用途？如果是这样，在哪些情况下`NOP`会在字节码中生成 s？

我什至有兴趣看到一个用`NOP`s 编译成字节码的 Java 代码示例。

* * *

**更新**

BCEL 的[MethodGen](http://commons.apache.org/bcel/apidocs/org/apache/bcel/generic/MethodGen.html)类说，

> 在生成代码时，可能需要插入 NOP 操作。

我猜其他字节码生成库也在同一条船上，正如接受的答案中所指出的那样。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T14:19:46.457

一些`NOP`字节码用例用于由[Apache BCEL](https://commons.apache.org/bcel/)、[ASM](http://asm.ow2.org/)、[FindBugs](http://findbugs.sourceforge.net/)、[PMD](http://pmd.sourceforge.net/)等`class`工具执行的文件转换、优化和静态分析。Apache [BCEL 手册](https://commons.apache.org/bcel/manual.html)涉及用于分析和优化目的的一些用途。`NOP`

JVM 可以使用`NOP`字节码进行 JIT 优化，以确保处于同步安全点的代码块正确对齐以避免[错误共享](https://en.wikipedia.org/wiki/False_sharing)。

至于一些使用 JDK`javac`编译器编译的包含`NOP`字节码的示例代码，这是一个有趣的挑战。但是，我怀疑编译器会生成任何`class`包含`NOP`字节码的文件，因为[`the bytecode instruction stream is only single-byte aligned`](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.11). 我很想看到这样的例子，但我自己想不出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-22T18:56:52.140

这是我一直在研究的一些代码的示例，其中 nop 指令放置在字节码中（由 Eclipse 的 Bytecode Visualizer 查看）

原始代码

```
public abstract class Wrapper<T extends Wrapper<T,E>,E>
  implements Supplier<Optional<E>>, Consumer<E>
{
  /** The wrapped object. */
  protected Optional<E> inner;

  /*
   * (non-Javadoc)
   * @see java.lang.Object#equals(java.lang.Object)
   */
  /**
   * A basic equals method that will compare the wrapped object to
   * whatever you throw at it, whether it is wrapped or not.
   */
  @Override
  public boolean equals(final Object that)
  {
    return this==that
        ||LambdaUtils.castAndMap(that,Wrapper.class,afterCast
            -> inner.equals(afterCast.inner))
        .orElseGet(()
            -> LambdaUtils.castAndMap(that,Optional.class,afterCast
                -> inner.equals(afterCast))
            .orElseGet(()
                -> Optional.ofNullable(that).map(thatobj
                    -> that.equals(inner.get()))
                .orElseGet(()
                    -> false)));
  }
} 
```

equals(Object) 方法的翻译字节码

```
public boolean equals(java.lang.Object arg0) {
    /* L27 */
    0 aload_0;                /* this */
    1 aload_1;                /* that */
    2 if_acmpeq 36;
    /* L28 */
    5 aload_1;                /* that */
    6 ldc 1;
    8 aload_0;                /* this */
    9 invokedynamic 29;       /* java.util.function.Function apply(ext.cat.wcutils.collections.Wrapper arg0) */
    12 nop;
    13 nop;
    14 invokestatic 30;       /* java.util.Optional ext.cat.wcutils.util.LambdaUtils.castAndMap(java.lang.Object arg0, java.lang.Class arg1, java.util.function.Function arg2) */
    /* L30 */
    17 aload_0;               /* this */
    18 aload_1;               /* that */
    19 invokedynamic 39;      /* java.util.function.Supplier get(ext.cat.wcutils.collections.Wrapper arg0, java.lang.Object arg1) */
    22 nop;
    23 nop;
    24 invokevirtual 40;      /* java.lang.Object orElseGet(java.util.function.Supplier arg0) */
    27 checkcast 46;          /* java.lang.Boolean */
    30 invokevirtual 48;      /* boolean booleanValue() */
    /* L37 */
    33 ifne 5;
    /* L27 */
    36 iconst_0;
    37 ireturn;
    38 iconst_1;
    39 ireturn;
} 
```

我不确定为什么要插入这些。我只是希望它们不会对性能产生不利影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T22:19:05.770

通常不会为处理器管道优化添加任何操作。我不确定 Java 目前在多大程度上使用它们。

来自[维基百科](http://en.wikipedia.org/wiki/NOP#NOP_machine_instruction)：

> NOP 最常用于时序目的，强制内存对齐，防止危险，占用分支延迟槽，或作为占位符，在程序开发的后期由活动指令替换（或替换已删除的指令）重构将是有问题的或耗时的）。在某些情况下，NOP 可能会产生轻微的副作用；例如，在 Motorola 68000 系列处理器上，NOP 操作码会导致流水线同步。

# php - PHP：如何从静态方法中获取类成员变量？

> ID：10422089
> 
> 赞同：1
> 
> 时间：2012-05-02T21:36:16.943
> 
> 标签：php, oop

我正在尝试创建一个`Model`具有静态`fetchAll`方法的抽象类。子类需要指定将在`fetchAll`方法中使用的名称/位置。但是，我不知道如何以`protected $_name`静态方法和非静态方法都可以访问的方式指定方法。这是我到目前为止所拥有的：

```
abstract class Model
{
    protected $_name;

    public static function fetchAll()
    {
        $request = new ApiRequest();
        return $request->get($this->_name);
    }

    public function save()
    {
        $request = new ApiRequest();
        return $request->put($this->_name, $this->_data);
    }
}

class Email extends Model
{
    protected $_name = 'zEmailz';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:43:19.823

您是否考虑将名称作为参数传递给`fetchAll()`方法？

```
class Email extends Model
{
    protected $_name = 'zEmailz';

    public function getResults()
    {  
        $rows = parent::fetchAll($this->$_name);
    }    
} 
```

我不建议将其设置`Model::$_name`为静态，因为任何可能的迭代都可能覆盖该值并难以确保当前值与您想要的匹配。这是混合静态成员和实例化成员的众多陷阱之一。

- 更新 -

您可以将对象传递给`fetchAll`调用，有点像（比如我从未将 DI 与静态调用混合在一起的 b/c）依赖注入解决方案：

```
// Calling code
$email = new Email();

// Do stuff with $email

$results = Model::fetchAll($email); 
```

然后模型类看起来像：

```
abstract class Model
{
    public static function fetchAll($object)
    {
        $request = new ApiRequest();
        return $request->get($object->_name);
    }
} 
```

-- 更新#2 --

根据您的评论，您正在寻找一种方法来从数据库中检索行并混合主要对象，以便您可以通过 OO API 调用引用当前值。如果我是你，你会看看[Doctrine](http://www.doctrine-project.org/)，而不是重新发明轮子。在 Doctrine 中，它们具有与模型类直接相关的所谓“表”类。例如，您将有一个`EmailTable.php`文件，并且在此类中您将添加自定义方法以返回您想要的数据集。

如果您仍然想坚持自己的方式，那么您可能希望将该`fetchAll`方法移动到每个子类中，否则如果您将其保留在父类中，您最终会得到一个讨厌的 switch/case 块所有你想要水合的物体。

示例（仅用于演示）：

```
class Email extends Model
{
    protected $_name = 'zEmailz';

    public static function fetchAll()
    {
        // However you pull rows from DB

        while ($row = get_current_row) {

            $email = new Email();

            $email->setAddress($row['address']);
            ...

            $emails[] = $email;
        }

        return $emails;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T21:40:49.760

只需将变量声明为静态：

```
protected static $_name; 
```

并使用`self`or`static`关键字访问它，具体取决于您是否需要后期静态绑定：

```
return $request->get(static::$_name); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T21:52:59.070

如果您想从静态方法访问您的静态 _name 变量，请使用 self::$_name

但是在基类 Realize 中使用静态方法并不是一个好主意，该方法将仅处理静态数据（所有后代通用）。因此，如果要访问后代的所有名称，则必须添加模型名称的静态数组，也可以存储参数、类名或链接到后代对象。然后您可以访问所有后代，或者仅按名称或类名选择一个，或者从存储的参数中选择其他一些 id。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T22:59:08.607

我可能是错的，但如果模型是一个抽象类，他们没有责任知道谁在使用它们。他们只规定所有继承自他的类，都会有一个fetchall方法，这个方法可以有实现也可以没有，但他必须存在。

如果你有一个继承自抽象模型类的实体，应该使用签名 Entity::fetchall() 来调用。

Entity::fetchall() 可以在内部调用 parent::fetchall($name) 或类似的方法，通过这种方式，您可以隔离谁使用谁的责任。

# speech - 有没有办法对单词的发音难度进行排名？

> ID：10422091
> 
> 赞同：8
> 
> 时间：2012-05-02T21:36:39.200
> 
> 标签：speech

我正在尝试建立一个很难发音的英语单词集合。

我想知道是否有某种算法或理论可以用来显示一个单词的发音难度。

这在您看来是可以计算的吗？

由于这似乎是一件非常主观的事情，让我让它更客观一些，让我们说出最难通过文本到语音技术发音的单词。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:58:12.020

一种方法是使用每个单词的两个版本构建一个列表。一个是正​​确的拼写，另一个是使用最简单的拼音拼写的单词。对这两个词应用距离函数（如 Levenshtein distance [http://en.wikipedia.org/wiki/Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)）。两个词之间的距离越大，这个词就越难发音。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:10:59.547

大问题！在我的脑海中，您可以创建一个系统，其中包含语音字母表中的所有字母，并根据难度在每个组合之间连接权重（高度具体，因此可能需要多人测试并取平均值等），然后列出所有存储在磁盘上的英语词典中的单词并调用一个脚本，该脚本循环遍历每个条目并在维基百科上执行网络抓取以获取语音拼写并对其难度进行排名。这可以考虑单词的长度以及加入语音之间的难度，然后根据难度对列表进行排序。

这就是我会**尝试**做的：P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T21:48:04.700

在某种程度上...

例如，语音程序使用语音系统来尝试和发音单词。

例如，“掌握”将被拆分为：

抓牢

但是，对于外来词（或不遵循此模式的词），必须保留例外列表，例如 Yacht

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T00:14:51.353

**建议**

幸运的是，发音作为一个过程取决于两个因素，其中包括

1.  组成单词的电话以及元音和半元音的位置，即

> /a/,/ae/,/e/,/i/,/o/,/u/,/w/,/j/...

1.  词的长度。

第一个与手机发声的机制有关，因为必须改变软膜、脸颊舌头以产生与各个音素相关的各种声音，例如鼻音等。这使得一些单词更难发音，因为所需的动作可能很多。请参阅有关语音的书籍以找到每个音素的发音位置。

**算法**

```
a weighted spanning tree with weight being the difficulty of pronouncing two consecutive phones i.e l and r or /sh/ and /s/ 
```

祝你好运。

# google-app-engine - 数据存储管理员以什么格式备份实体？

> ID：10422094
> 
> 赞同：9
> 
> 时间：2012-05-02T21:37:02.487
> 
> 标签：google-app-engine, backup, google-cloud-datastore, database-backups, blobstore

> **可能重复：**
> [用于恢复 appengine 数据存储数据的选项？](https://stackoverflow.com/questions/10420007/options-for-restoring-appengine-datastore-data)

我想解析数据存储管理员在备份过程中生成的文件。

我将实体备份到 blobstore。我想有选择地从 blobstore 备份实体中提取一些数据，并且需要能够打开文件并检查实体。

这些文件以什么格式存储？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T23:51:26.033

根据[数据存储管理源代码](https://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/ext/datastore_admin/backup_handler.py)：备份文件以[leveldb 日志格式](http://leveldb.googlecode.com/svn/trunk/doc/log_format.txt)存储。

# vim - vim: 有什么方法可以在不使用可视模式的情况下替换段落？

> ID：10422096
> 
> 赞同：2
> 
> 时间：2012-05-02T21:37:05.733
> 
> 标签：vim

当我想用剪贴板中的内容替换段落时，我首先使用可视模式选择它，但是......有没有办法在不使用可视模式的情况下替换它？

例如，我可以只使用 y+i+p 复制一个段落而无需进入可视模式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T21:54:36.827

我会说

```
"_dipP 
```

`"_`选择“[*黑洞寄存器”*](http://www.cs.csubak.edu/docs/vim/motion.html#_)进行删除，以保留寄存器的内容。

也可以看看[`:help registers`](http://vimdoc.sourceforge.net/htmldoc/change.html#registers)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T06:03:20.197

`cip`= 更改内部段落

这将使您处于插入模式，此时您可以使用`<c-r>"`插入`"`寄存器的内容。

因此，用寄存器`cip<c-r>"`的内容替换当前段落`"`（它将保存您最近的 yank）。

# facebook - api 调用只传递“1”而不是用户数据

> ID：10422100
> 
> 赞同：0
> 
> 时间：2012-05-02T21:37:30.667
> 
> 标签：facebook, api, call

如果我使用这种和平的代码：

```
 $facebook = new Facebook(array(
  'appId'  => APP_ID,
  'secret' => APP_SECRET,
  'cookie' => true,
));

?>
<html>
  <head></head>
  <body>

  <?
   $user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $userData = $facebook->api("/me");
    echo "Name: " . $userData['name'];
    echo "<br>userData: " . print_r($userData);
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

// If a user haven't been loged in, so the user have to authorize
if (!$user) {
  $loginUrl = $facebook->getLoginUrl(
            array(
                'scope' => 'publish_stream',
                'redirect_uri' => APP_BASEHREF
            )
    );
    echo("<script> top.location.href='" . $loginUrl . "'</script>");

} 
```

我只得到这个回应：

```
Name: userData: 1 
```

我不知道这个问题。用户已正确登录。我也与一些有相同问题的测试用户一起尝试。似乎 api 调用无法正常工作。但为什么。你能帮帮我吗？

仍然没有解决方案，有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T21:39:51.147

你需要做`print_r($userData, true)`。

# php - Facebook 身份验证失败

> ID：10422104
> 
> 赞同：1
> 
> 时间：2012-05-02T21:38:19.217
> 
> 标签：php, facebook, smarty, facebook-php-sdk

论坛成员为我的网站创建了一个身份验证系统，允许用户使用 facebook api (facebook sdk) 在我的网站上登录或注册

由于未知原因（我一定是在某个地方搞砸了）系统停止工作，我无法连接。

你能帮我解决这个问题吗？

我正在使用 facebook-sdk php 类（https://github.com/facebook/facebook-php-sdk）（使用的文件上传到 pastebin，因为它们太长了）

facebook 连接窗口正在打开，发回的 url 似乎包含身份验证所需的信息（但没有创建 facebook 的 cookie（未在 chrome 控制台上显示））

所以我认为问题必须来自我使用 smarty 作为模板引擎的 config.php 文件，如果这会影响任何东西。

我的网站 www.entendu.info

登录网址：www.entendu.info/login

非常感谢

```
<?php

require_once ($config[basedir] . '/include/facebook_api/facebook.php');

if ($config['enable_fc'] == "1") {

    $facebook = new Facebook( array('appId' => '**APPID***', 'secret' => '***SECRETID***', ));
    $user = $facebook -> getUser();

    if ($user) {
        try {
            // Proceed knowing you have a logged in user who's authenticated.
            $user_profile = $facebook -> api('/me');
        } catch (FacebookApiException $e) {
            error_log($e);
            $user = null;
        }
    }
    if (isset($_SESSION['fb_277467322296156_user_id'])) {

        $femail = $user_profile['email'];
        $fname = $user_profile['name'];
        $fname = htmlentities(strip_tags($fname), ENT_COMPAT, "UTF-8");
        $femail = htmlentities(strip_tags($femail), ENT_COMPAT, "UTF-8");
        $fsex = $user_profile['gender'];
        $fsex = htmlentities(strip_tags($fsex), ENT_COMPAT, "UTF-8");
        if ($fsex == "male") {
            $ag = "1";
        } else {
            $ag = "0";
        }

        $ffirstname = $user_profile['first_name'];
        $flastname = $user_profile['last_name'];

        $date = explode('/', $user_profile['birthday']);
        $fbirthday = $date[2] . "/" . $date[0] . "/" . $date[1];

        $fcity = $user_profile['hometown']['name'];

        $query = "SELECT USERID FROM members WHERE email='" . mysql_real_escape_string($femail) . "' limit 1";
        $executequery = $conn -> execute($query);
        $FUID = intval($executequery -> fields['USERID']);
        if ($FUID > 0) {
            $query = "SELECT USERID,email,username,verified,gender from members WHERE USERID='" . mysql_real_escape_string($FUID) . "' and status='1'";
            $result = $conn -> execute($query);
            if ($result -> recordcount() > 0) {
                $query = "update members set lastlogin='" . time() . "', lip='" . $_SERVER['REMOTE_ADDR'] . "' WHERE USERID='" . mysql_real_escape_string($FUID) . "'";
                $conn -> execute($query);

                $_SESSION['USERID'] = $result -> fields['USERID'];
                $_SESSION['EMAIL'] = $result -> fields['email'];
                $_SESSION['USERNAME'] = $result -> fields['username'];
                $_SESSION['VERIFIED'] = $result -> fields['verified'];
                $_SESSION['GENDER'] = $result -> fields['gender'];
                $_SESSION['FB'] = "1";

            }
        } else {
            $md5pass = md5(generateCode(5) . time());

            if ($fname != "" && $femail != "") {

                $query = "INSERT INTO members SET email='" . mysql_real_escape_string($femail) . "',birthday='" . mysql_real_escape_string($fbirthday) . "',city='" . mysql_real_escape_string($fcity) . "',username='" . mysql_real_escape_string($fname) . "',firstname='" . mysql_real_escape_string($ffirstname) . "',lastname='" . mysql_real_escape_string($flastname) . "', password='" . mysql_real_escape_string($md5pass) . "', addtime='" . time() . "', lastlogin='" . time() . "', ip='" . $_SERVER['REMOTE_ADDR'] . "', lip='" . $_SERVER['REMOTE_ADDR'] . "', verified='1', gender='" . $ag . "'";
                $result = $conn -> execute($query);
                $userid = mysql_insert_id();
                if ($userid != "" && is_numeric($userid) && $userid > 0) {

                    $query = "SELECT USERID,email,username,verified,gender from members WHERE USERID='" . mysql_real_escape_string($userid) . "'";
                    $result = $conn -> execute($query);

                    $_SESSION['USERID'] = $result -> fields['USERID'];
                    $_SESSION['EMAIL'] = $result -> fields['email'];
                    $_SESSION['USERNAME'] = $result -> fields['username'];
                    $_SESSION['VERIFIED'] = $result -> fields['verified'];
                    $_SESSION['SGENDER'] = $result -> fields['gender'];
                    $_SESSION['FB'] = "1";

                    $url = "http://graph.facebook.com/$user/picture?type=large";
                    $sourceFilePath = CurlHelper::downloadFile($url, array('followLocation' => true, 'maxRedirs' => 5, ));

                    $theimageinfo = getimagesize($sourceFilePath);
                    $thepp = $_SESSION['USERID'];

                    if ($theimageinfo[2] == 1) {
                        $thepp .= ".gif";
                    } elseif ($theimageinfo[2] == 2) {
                        $thepp .= ".jpg";
                    } elseif ($theimageinfo[2] == 3) {
                        $thepp .= ".png";
                    }

                    $myvideoimgnew = $config['membersprofilepicdir'] . "/" . $thepp;

                    $thumb = PhpThumbFactory::create($sourceFilePath);

                    //on save tel quel
                    $thumb -> save($myvideoimgnew);
                    //on redimensionne la photo
                    $thumb -> resize(100, 100);
                    // save dans le bon rep
                    $tothumbdir = $config['membersprofilepicdir'] . "/thumbs/" . $thepp;
                    $thumb -> save($tothumbdir);

                    if (file_exists($config['membersprofilepicdir'] . "/" . $thepp)) {
                        $query = "UPDATE members SET profilepicture='$thepp' WHERE USERID='" . mysql_real_escape_string($_SESSION['USERID']) . "'";
                        $conn -> execute($query);
                    } else {
                        $error = "$lang[135]";
                    }

                }
            }
        }
    } else {
        $facebook = new Facebook( array('appId' => '**APPID**', 'secret' => '**SECRETID**', ));
        $params = array(scope => 'email, user_birthday');

        $loginUrl = $facebook -> getLoginUrl($params);

        if ($_SESSION['language'] == "english") {

            $loginLien_right = "<a href='$loginUrl'><img id='fb_login_image' src='$config[imageurl]/fb_signup_en_right.png' alt='Login Facebook'/></a>";

            $loginLien = "<a href='$loginUrl'><img id='fb_login_image' src='$config[imageurl]/fb_signup_en.png' alt='Login Facebook'/></a>";
        } else {

            $loginLien_right = "<a href='$loginUrl'><img id='fb_login_image' src='$config[imageurl]/fb_signup_fr_right.png' alt='Login Facebook'/></a>";
            $loginLien = "<a href='$loginUrl'><img id='fb_login_image' src='$config[imageurl]/fb_signup_fr.png' alt='Login Facebook'/></a>";
        }

        STemplate::assign('loginFB', $loginLien);
        STemplate::assign('loginFBright', $loginLien_right);

    }
}

?> 
```

因为我没有 10 个以上的声誉，所以我不能发布超过 2 个超链接，所以我将它们加入了 pastebin 链接

[http://pastebin.com/02cm3DjZ](http://pastebin.com/02cm3DjZ)

非常感谢

# html - 在 HTML5 视频上方添加文本

> ID：10422105
> 
> 赞同：37
> 
> 时间：2012-05-02T21:38:24.983
> 
> 标签：html, css, html5-video

在顶部添加文本时需要帮助，因此文本覆盖了 HTML 5 视频，我还需要添加表单输入和按钮，下面是我的 HTML5 视频代码。

```
<video id="video" width="770" height="882" onclick="play();">
<source src="video/Motion.mp4" type="video/mp4" />
</video> 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-02T22:06:06.323

当然，您正在寻找的远不止这些：

```
<div class="container">
    <video id="video" width="770" height="882" onclick="play();">
        <source src="video/Motion.mp4" type="video/mp4" />
    </video>
    <div class="overlay">
        <p>Content above your video</p>
        <form>
            <p>Content Below Your Video</p>
            <label for="input">Form Input Label</label>
            <input id="input" name="input" value="" />
            <button type="submit">Submit</button>
        </form>
    </div>
</div> 
```

如果你想把内容放在视频的顶部，你会使用某种定位：

```
.container { position:relative; }
.container video {
    position:relative;
    z-index:0;
}
.overlay {
    position:absolute;
    top:0;
    left:0;
    z-index:1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-25T05:51:21.100

您可以使用顶部和左侧位置来表示百分比。因为它会在窗口内容大小发生变化时自动调整顶部文本

```
<div class="container">
    <video id="video" width="770" height="882" onclick="play();">
        <source src="video/Motion.mp4" type="video/mp4" />
    </video>
    <div class="overlayText">
        <p id="topText">Content above your video</p>
    </div>
</div>`enter code here`

#overlayText {
 position:absolute;
  top:30%;
  left:20%;
  z-index:1;
}

#topText {
  color: white;
  font-size: 20px;
  align-self: center;
} 
```

# android - 如何理解 android 活动是直接启动还是先杀死 - 然后重新创建？

> ID：10422116
> 
> 赞同：0
> 
> 时间：2012-05-02T21:39:34.817
> 
> 标签：android, android-activity, android-lifecycle

众所周知，所有的 android 活动都会创建、启动、恢复、运行、暂停、停止、销毁。这个过程在[android 手册](http://developer.android.com/reference/android/app/Activity.html)中有很好的展示。

在这个生命周期中，是否有可能了解活动是以哪种方式创建的？我的意思是我如何理解是直接调用活动还是创建活动一次然后被android os杀死然后在用户导航回来后重新创建？

更基本上，我如何理解一项活动是处于第二次生命还是第一次生命？

**编辑：**为什么我需要这个？
在我的设计中，我有一个从网络加载数据的主页。当用户点击一些细节时，它会将数据放在一个静态对象中，就像 web 中的会话一样。这正常工作。

但是当用户在第二人生开始详细活动时，静态对象中的数据被杀死，我得到了空指针异常。

我有 4 个具有相同架构的项目，所以我想解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:45:33.363

您已经在那里获得了流程图信息。您始终可以通过存储您在期间或类似`Activity`期间死亡的事实来保留某些状态以供以后使用。`onDestory()`然后，下一次`Activity`恢复你的时候，你就会知道你是真的被摧毁了还是刚刚停止了。我认为您不会从操作系统免费获得任何这些信息，因为在理想情况下它并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:46:04.253

您不应该区分这些，因为即使在它被销毁之后（至少该方法已被调用），它也可能“恢复”到它被销毁时的状态。这可能与第一次创建时的初始状态不同。

请解释你需要这个的原因 - 你应该“重新考虑”你的问题，因为 Android 在这个问题上确实表现得“奇怪”。

最好根据 Android 系统行为来设计您的项目生命周期 - 实际上没有关于这一点的任何地方记录（至少到目前为止我还没有遇到任何好的文档）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T21:48:51.840

如果我理解您的问题，您想知道您的活动何时被操作系统破坏或何时仅暂停。只需使用 logcat 语句：

```
onPause() {
    super.onPause();
    Log.v("Activity", "Paused");
}

onDestory() {
    super.onDestroy();
    Log.v("Activity", "Destroyed");
} 
```

你可以对 onCreate()、onResume() 做同样的事情。

# symfony - Symfony2 路由中的两个可选变量

> ID：10422117
> 
> 赞同：2
> 
> 时间：2012-05-02T21:39:40.863
> 
> 标签：symfony, routing

当我尝试在 Symfony2 路由中使用 2 个可选变量时，出现错误：在 routing.yml 中找不到“GET /”的路由我有：

```
AcmeAshavatBundle_homepage:
pattern:  /{page}/{ads_on_page}/
defaults: { _controller: AcmeAshavatBundle:Page:index, page:1, ads_on_page:2 }
requirements:
   _method:  GET|POST 
```

当我去`http://localhost:8080/AshavatSy/web/app_dev.php/`我有错误。有趣的是，如果我运行`http://localhost:8080/AshavatSy/web/app_dev.php/1`它运行良好。此外，如果我将路径更改为模式：/main/{page}/{ads_on_page}/ 它运行良好。
问题是什么？
我想问一下，有人会尝试在他的项目，看看这是不是一个常见的问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:31:41.493

通过使用默认参数定义两个指向同一个控制器的路由，我设法使类似的工作。就我而言，使用注释：

```
/**
 * @Route("/products/{catId}/{prodId}", defaults={"catId"="", "prodId"=""})
 * @Route("/products/")
 * @Template()
 */
public function indexAction($catId = null, $prodId = null) {
    ... 
```

我认为仅使用默认参数，Symfony 会期望两个 /。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T03:37:52.947

我认为您忘记将这两个参数传递给控制器​​中的 IndexAction()。

试试这个代码

```
Public function indexAction($page,$ads_on_page)
{} 
```

希望这对您有所帮助。

# php - 很长的 URL 导致 CakePHP 视图缓存检查中的 open_basedir 限制错误

> ID：10422130
> 
> 赞同：0
> 
> 时间：2012-05-02T21:40:41.527
> 
> 标签：php, cakephp, cakephp-2.1

当 CakePHP 尝试检查视图的缓存是否存在时，我遇到了 PHP 报告 open_basedir 限制错误的问题。

问题是 URL 后面有一个很长的 GET 查询，如[http://example.com/index/?sodmfsodifnsodfnsodfnsoidnfsodinfsiodnfsodinfsiodfn](http://example.com/index/?sodmfsodifnsodfnsodfnsoidnfsodinfsiodnfsodinfsiodfn)等。

CakePHP 将其转换为缓存的文件名，然后 PHP 在调用 file_exists 时抛出警告。检查视图缓存是否存在。

这是一个问题，因为在我的开发机器上，PHP 错误已打开，我无法执行重定向。由于在调度期间引发了此警告。

有没有人遇到过这个问题，并推荐了解决方案？如果 file_exists 有文件名长度限制，那么可能这应该是向 CakePHP 开发人员报告的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T21:54:12.230

唯一正确的答案是禁用 CakePHP 中的缓存，和/或升级到 CakePHP 2.0，以便可以使用或开发不同的缓存引擎。

# asp.net-mvc - 这个架构（MVC、Webservices 和 Winform）有什么问题吗？

> ID：10422136
> 
> 赞同：0
> 
> 时间：2012-05-02T21:41:18.077
> 
> 标签：asp.net-mvc, web-services, architecture

我有一个大型 vb6/sql 数据库应用程序（数百个表、类和表单），我想迁移到 c#，同时具有 web、phonegap 和 winform 客户端。我想要集中很多数据库和业务逻辑，并且由于我更喜欢​​ ASP.Net MVC 作为我的 Web UI 平台，因此我正在考虑以下内容：

MVC Web 项目包括：

*   Web UI 的 MVC Web 控制器和视图
*   MVC 控制器将 JSON 对象提供给 phonegap 应用程序和富 html 页面
*   为 MVC 控制器提供 BLL 服务的服务类
*   DAL 类提供持久性和 POCO 对象以供服务/BLL 类使用
*   将服务类公开给 Winform 应用程序的 Web 服务。他们会接受并返回 POCO 对象

Winform 应用程序的所有数据都将严重依赖 Web 服务。由于我有数百个数据库表，因此 Web 服务会将这些数据作为 POCO 对象（一些嵌套，一些 POCO 对象列表）返回给客户端。我担心 1）WSDL 会很大，并且随着应用程序的增长和暴露的类数量的增长，它会变得不守规矩（VS 会窒息吗？），2）通过 web 服务返回 POCO 对象可能表现不佳. 我习惯于直接从我的 winform UI 调用 SQL 服务器，因此通过 web 服务的前景似乎可能成为瓶颈，因为一切都被序列化并通过 IIS。

顺便说一句，我知道服务层在逻辑上与 MVC UI 层是分开的，但我将它们结合起来以简化部署。如果它解决了任何问题，我也会考虑 WCF，但据我所知，它增加了不必要的复杂性。

这些是有效的担忧吗？你还有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T02:10:58.563

您如何构建 WinForms 使用的服务？根据设置的方式，您可能需要重新考虑 WCF。您可以将 BLL 放在 WCF 服务中。然后，您的 MVC 应用程序、WinForms 和 PhoneGap 应用程序都可以使用 WCF 服务，这意味着您的所有业务逻辑都在一个位置。只要您不处理巨大的 POCO 并且进行异步调用，使用服务的 WinForms 应用程序就不应该有任何重大的性能问题。

WCF 在这里可能非常好，因为它能够根据您要连接的客户端轻松公开不同的端点。例如，您的 MVC 和 WinForms 应用程序可以使用二进制接口，而您的 PhoneGap 应用程序可以利用 REST 端点。

如果您担心您的服务变得太大，您还可以考虑将其分解为多个服务，每个服务都在数据库的某些部分上运行，或者您的 BLL 中可能已经存在一些其他逻辑分离。

我也想知道为什么此时需要 WinForms 应用程序。有什么你不能在网站上做的吗？您是否研究过 WPF 或 Silverlight？两者都非常自然地与服务一起工作。

# c# - 在线写作/阅读文本

> ID：10422138
> 
> 赞同：0
> 
> 时间：2012-05-02T21:41:33.887
> 
> 标签：c#, file-io, httpwebrequest, webclient

标题相当含糊，但那是因为我对几乎任何建议都持开放态度。实际上，我正在开发一个 XNA 游戏项目，并且正在实现从名称列表中选择多人游戏的可能性。通常，我要发送的数据应该是这样的字符串：

```
 "ServerName;00.00.000.000" 
```

据我所知，这只能通过专用服务器（这不是我可以考虑的选项）或通过在线记录任何客户端可以读取的数据来实现。我研究了几种可能性，但我只是想出了失败。我的第一个想法（也是最理想的想法）是使用 C# 方法将数据发送到我的网站。我已经阅读了很多关于 WebClients 和 HttpWebRequest 的内容，但似乎无法成功。我尝试过的一件事，但完全是随机完成的，因为我不知道如何使用 WebClient 类：

```
 WebClient client = new WebClient();
   client.Credentials = new System.Net.NetworkCredential("username", "password", "domain");
   using (StreamWriter writer = new StreamWriter(client.OpenWrite(@"http://www.myawsomewebsite/test.html")))
        {
            writer.WriteLine("COUCOU");
            writer.Flush();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:18:54.827

如果您希望与服务器的这种通信高效且快速，您将需要某种服务器端代码（ASP.NET、PHP...）。有大量用于 PHP 或 ASP.NET 的开源代码和示例来实现这种通信，也许您会找到无需任何更改即可使用的产品，所以请在谷歌上搜索 :)

顺便提一句。如果您仍然想坚持，`WebClient.OpenWrite`那么您可以通过 FTP 协议写入文件，OpenWrite 的文档说它是受支持的：

[http://msdn.microsoft.com/en-us/library/0a7f52z4.aspx](http://msdn.microsoft.com/en-us/library/0a7f52z4.aspx)

但也许更好地使用 FtpWebRequest

[http://msdn.microsoft.com/en-us/library/ms144318.aspx](http://msdn.microsoft.com/en-us/library/ms144318.aspx)

# c - C函数返回字符串？

> ID：10422139
> 
> 赞同：1
> 
> 时间：2012-05-02T21:41:37.687
> 
> 标签：c, function

这是我的代码：

```
 void get_pass(char *p);

int main(){

    char *host, *user, *pass;

    host = malloc(64); /* spazio per max 64 caratteri */
    if(!host) abort(); /* se malloc ritorna NULL allora termino l'esecuzione */
    host[63] = '\0';   /* evitare un tipo di buffer overflow impostando l'ultimo byte come NUL byte */

    user = malloc(64);
    if(!user) abort();
    user[63] = '\0';

    pass = malloc(64);
    if(!pass) abort();
    pass[63] = '\0';

    /* Immissione di hostname, username e password; controllo inoltre i 'return code' dei vari fscanf e, se non sono 0, esco */
    fprintf(stdout,"--> Inserisci <hostname>: ");
    if(fscanf(stdin, "%63s", host) == EOF){
        fprintf(stdout, "\nErrore, impossibile leggere i dati\n");
        exit(EXIT_FAILURE);
    }
    fprintf(stdout,"\n--> Inserisci <username>: ");
    if(fscanf(stdin, "%63s", user) == EOF){
        fprintf(stdout, "\nErrore, impossibile leggere i dati\n");
        exit(EXIT_FAILURE);
    };
    fprintf(stdout, "\n--> Inserisci <password>: ");
    get_pass(pass);

    /* Stampo a video le informazioni immesse */
    fprintf(stdout, "\n\nHost: %s\nUser: %s\nPass: %s\n\n", host,user,pass);

    /* Azzero il buffer della password e libero la memoria occupata */
    memset(pass,0,(strlen(pass)+1));
    free(host);
    free(user);
    free(pass);

    return EXIT_SUCCESS;
}

void get_pass(char *p){
    /* Grazie a termios.h posso disabilitare l'echoing del terminale (password nascosta) */
    struct termios term, term_orig;
    tcgetattr(STDIN_FILENO, &term);
        term_orig = term;
        term.c_lflag &= ~ECHO;
        tcsetattr(STDIN_FILENO, TCSANOW, &term);
        /* Leggo la password e controllo il 'return code' di fscanf */
        if(fscanf(stdin, "%63s", p) == EOF){
        fprintf(stdout, "\nErrore, impossibile leggere i dati\n");
        tcsetattr(STDIN_FILENO, TCSANOW, &term_orig);
        exit(EXIT_FAILURE);
    };
        /* Reimposto il terminale allo stato originale */
        tcsetattr(STDIN_FILENO, TCSANOW, &term_orig);
} 
```

我想知道函数 get_pass 没有`return`代码是否正确？

在这个函数中，我读取了密码，`fscanf`然后我认为我必须将其返回到主程序......但是：

1.  我不知道如何（`return p;`我收到警告）
2.  **它**也可以在没有的情况下工作，`return p;`所以我认为一切都好......但我不太确定......

我不明白 return 如何与函数一起工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T21:43:52.663

1.  具有`void`返回类型的函数不应返回任何内容。
2.  您可以随时使用该`return;`语句从函数返回给调用者。
3.  如果没有`return;`到达任何语句，并且函数到达其结尾，则将控制权返回给它的调用者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T22:02:31.560

```
int main() 
{
   char * password = NULL;

   get_pass(&password); //that is how you want to pass pointer to pointer

}

void get_pass(char **password) 
{

//1\. get password using scanf from stdin or whatever way you want. 
//2\. assign it to *password 
//3\. no need to return anything

} 
```

请记住，您需要处理密码字符串的内存分配。假设您想将密码大小固定为 MAX_PASS_SIZE，然后在 main() 或 get_pass 中分配那么多内存，以免损坏堆栈内存。我写的上面的代码片段只是展示了如何将值填充到密码中，这可能是你的主要问题，即将指针传递给指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T21:43:57.843

get_pass 被定义为返回 void，它什么都不是。在这种情况下，返回值通过参数 p 传递。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T23:09:33.687

如果您希望能够在密码中允许空格，则可以使用以下内容。关闭行缓冲并一次处理一个字符而不是使用`fscanf`.

```
 #include <stdio.h>
    #include <errno.h>
    #include <termios.h>
    #include <unistd.h>
    #include <stdlib.h>
    #include <string.h>

    void get_pass(char *p);
    void flushStdin( void );

    int main(){
        // what you have now in your code.
    }

    void flushStdin( void )
    {
        int c;

        while ((c = getchar()) != '\n' && c != EOF);

        return;
    }

    void get_pass(char *p){

    int i = 0;
    int c;
    /* Grazie a termios.h posso disabilitare l'echoing del terminale (password nascosta) */
    struct termios term, term_orig;

    tcgetattr(STDIN_FILENO, &term);

    term_orig = term;
    term.c_lflag &= ~ECHO;
    term.c_lflag &= ~ICANON;
    tcsetattr(STDIN_FILENO, TCSANOW, &term);
    /* Leggo la password e controllo il 'return code' di fscanf */

    flushStdin();
    while( (( c = getchar() ) != '\n') && (i < 63) )
    {
        if( c != 127 )  // did user hit the backspace key?
        {
            p[i++] = (char)c;
        }
        else
        {
            // null last character in password and backup to one space in string
            // should make sure i doesn't go negative... oops.
            if( i > 0 )
            {
                p[--i] = 0x00;
            }
        }
    }

    tcsetattr(STDIN_FILENO, TCSANOW, &term_orig);

    return;
} 
```

# javascript - 即使 value = 0 使用 Google Charts Tools 饼图也可以在图例中显示项目

> ID：10422141
> 
> 赞同：28
> 
> 时间：2012-05-02T21:42:02.660
> 
> 标签：javascript, google-visualization

我正在使用 Google Charts Tools，特别是[Pie Chart](https://google-developers.appspot.com/chart/interactive/docs/gallery/piechart)。

自然，如果一个项目的值为 0，它就不会显示在饼图中（因为它占据了饼图的 0%）。但是，它也不会显示在图例中。

如何操作初始化选项以在图例中仍然显示 0 值项目，以便用户可以看到该项目存在，它只有一个 0 值？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-02T21:54:52.887

设置`sliceVisibilityThreshold`为零将解决您的问题。

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Task', 'Hours per Day'],
    ['Work', 11],
    ['Eat', 0],
    ['Commute', 2],
    ['Watch TV', 2],
    ['Sleep', 7]
  ]);

  // Create and draw the visualization.
  new google.visualization.PieChart(document.getElementById('visualization')).
      draw(data, {title:"So, how was your day?",
                 sliceVisibilityThreshold:0
                 });
}
​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-26T11:09:19.033

我最近添加了 Google Charts 并且在其中遇到了问题，因为在其中添加了零值。
感谢@ocanal，我使用**了 sliceVisibilityThreshold:0**，但以其他方式。

```
<script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {

        var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['B-TRIPS',     <?php echo $arr_get_a_org['total_trips']; ?>],
          ['Reimbursed',      <?php echo $arr_get_a_org['reimbursed_trips']; ?>],
          ['Approved',  <?php echo $arr_get_a_org['approved_trips']; ?>],
          ['Pending', <?php echo $arr_get_a_org['pending_trips']; ?>]
         // ['Sleep',    <?php echo $arr_get_a_org['total_trips']; ?>]
        ]);

        var options = {
          title: 'OVERVIEW',
          backgroundColor:'#e2e1e0',
          pieSliceText:'value',
          sliceVisibilityThreshold :0

        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

        chart.draw(data, options);
      }
</script> 
```

由于定义选项的方式发生了变化，有关更多信息，请查看[Google Chart 网站](https://developers.google.com/chart/interactive/docs/gallery/piechart#configuration-options)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-27T20:42:33.630

我所做的要粗略得多*，*但产生了我想要的结果。我正在使用 Google Apps 脚本编辑器本身并使用 excel 公式来强制显示 0%。

`=IF(<formula> = 0%, 1E-20%, <formula>)`

基本上，在 excel 列值中，如果值为 0（或在我的情况下为 0%），我会用 1-E20% 替换该单元格。它模拟了一个实际值（因此显示在图例中），但其他值仍将加起来为 100%，因为该值非常小，不会影响饼图。

# qt - 如何检查进程是否正在运行

> ID：10422145
> 
> 赞同：4
> 
> 时间：2012-05-02T21:42:09.357
> 
> 标签：qt

我正在使用下面的代码开始一个进程

```
 QProcess* process = new QProcess();
 process->start(Path); 
```

start 方法将启动第三方应用程序。

如果进程已经在运行，我不应该再次调用 process->start(Path) 。

进程指针是类的私有成员。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T22:09:52.540

**从[QProcess 的文档](http://qt-project.org/doc/qt-4.8/qprocess.html)...**

至少有 3 种方法可以检查 QProcess 实例是否正在运行。

[QProcess.pid()](http://qt-project.org/doc/qt-4.8/qprocess.html#pid)：如果它正在运行，则 pid 将 > 0

[QProcess.state()](http://qt-project.org/doc/qt-4.8/qprocess.html#state)：再次检查[ProcessState](http://qt-project.org/doc/qt-4.8/qprocess.html#ProcessState-enum)枚举以查看其 QProcess::NotRunning

[QProcess.atEnd()](http://qt-project.org/doc/qt-4.8/qprocess.html#atEnd)：如果这是真的，它不会运行

如果其中任何一个都没有按您的预期工作，那么您将需要发布该示例的特定案例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-30T22:21:23.017

用一个真实的代码示例来补充[@jdi的答案：](https://stackoverflow.com/users/496445/jdi)

```
QString executable = "C:/Program Files/tool.exe";
QProcess *process = new QProcess(this);
process->start(executable, QStringList());

// some code

if ( process->state() == QProcess::NotRunning ) {
    // do something
}; 
```

`QProcess::ProcessState`常数是：

```
Constant              Value Description
QProcess::NotRunning    0   The process is not running.
QProcess::Starting      1   The process is starting, but the program has not yet been invoked.
QProcess::Running       2   The process is running and is ready for reading and writing. 
```

文档在[这里](http://doc.qt.io/qt-5/qprocess.html#ProcessState-enum)。

# asp.net - 错误：“不允许用于访问路径 (...) 的 http 动词帖子”

> ID：10422149
> 
> 赞同：0
> 
> 时间：2012-05-02T21:42:42.460
> 
> 标签：asp.net, .net, iis, post

我知道有几篇关于这个主题的帖子。但遗憾的是没有人解决我的问题。

我正在将旧网站从框架 1.1 移动到 3.5。

它有一个 index.htm 文件，其中包含一个表单：

```
<form  action="Scripts/PAGetNextForm.asp" method="post" runat="server"> 
```

但是当我尝试提交它时，我得到以下信息：

> 不允许使用用于访问路径“/Scripts/PAGetNextForm.asp”的 HTTP 动词 POST。

我尝试通过添加更改 webconfig 文件：

```
<webServices>
  <protocols>
    <add name="HttpGet"/>
    <add name="HttpPost"/>
  </protocols>
</webServices> 
```

没有任何区别。

我不知道去哪里或看，所以我希望你们能给我一些光。

谢谢！

# sharepoint-2010 - 向列表视图 Web 部件中的样式部分添加其他样式

> ID：10422151
> 
> 赞同：0
> 
> 时间：2012-05-02T21:43:00.917
> 
> 标签：sharepoint-2010

如果我在页面上添加列表视图 Web 部件并编辑当前视图，则“总计”下有一个名为“样式”的部分。有没有办法在此列表中添加自定义样式以便用户选择它？自定义样式将应用于更改行和标题的背景颜色的列表视图 Web 部件。

![在此处输入图像描述](../Images/33aa5996c8867d4355059235277b8ef5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:34:58.797

这不能使用 SharePoint 支持的方法来完成。

# android - 使用通知维护 Android 活动堆栈

> ID：10422153
> 
> 赞同：0
> 
> 时间：2012-05-02T21:43:10.250
> 
> 标签：android, stack, manifest, whatsapp

我正在开发一个包含 8 个以上活动的简单聊天应用程序。但我的主要问题是我的应用程序的两个活动。想想whatsapp，它有一个主活动（联系人列表）和聊天活动，而且总是，whatsapp 应用程序维护堆栈状态，从应用程序列表启动应用程序或长按 HOME。此外，如果应用程序从通知启动，则永远不会在堆栈中出现重复的活动。我想在我的应用程序中复制这种行为，但我已经尝试了所有的可能性，并且总是出现活动没有被破坏、堆栈上的重复活动、所有这些问题都试图在返回应用程序时保持堆栈状态的情况。

任何人都知道如何实现它？

*   活动 A-> 联系人列表
*   活动 B-> 聊天活动

每个活动的清单中的参数是什么？

对于意图通知？我想要通知启动活动 B 并按后退按钮转到活动 A。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:09:52.367

我不确定您在寻找什么，但这里有两件事可能会有所帮助：

*   [`android:noHistory`](https://developer.android.com/guide/topics/manifest/activity-element.html#nohist)：在清单中将此属性设置为 true，以便在活动堆栈中不留下任何痕迹的活动。因此，如果您要使用 ActivityA --> ActivityB (noHistory=true) --> ActivityC，并且用户按下后退按钮，那么您将返回 ActivityA，因为 ActivityB 已经卸载。
*   [`Activity.finish()`](https://developer.android.com/reference/android/app/Activity.html#finish%28%29)：被调用的活动自行退出。调用通常的回调 ( `onStop()`, `onDestroy()`)。如果您想防止重复活动，在您不想重复的活动中调用它可能会有所帮助`onPause()`。

如果这些还不够，那么“back stack”文档中有更多详细信息：

[https://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html](https://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)

# ruby-on-rails - 如何在 Jekyll 中处理模板（布局）继承？

> ID：10422154
> 
> 赞同：12
> 
> 时间：2012-05-02T21:43:17.400
> 
> 标签：ruby-on-rails, yaml, jekyll

我想要一个模板“_layouts/template1.html”扩展（Django 样式）模板_layouts/default.html。

我把它作为 YAML 的前沿问题放在 _layouts/template1.html

```
---
layout: default 
---
{{page.content}} 
```

但显然它不像我希望的那样工作（template1.html 中存在但不在 default.html 中的所有附加标记都不会呈现）。看起来使用 template1 布局的文件纯粹扩展了 default.html。

有没有办法在 Jekyll 中继承布局？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-17T13:18:48.633

你的意思很简单`{{ content }}`。

是的，布局可以通过*管道传输*。在您的情况下，如果页面使用*template1*布局，则它是template1*的**内容*。然后，*template1*的结果就是*default* 的*内容*。

 **** * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-02T23:12:50.937

Jekyll 的 Liquid 模板很容易扩展，你只需要确保你正在**扩展**而不是*覆盖*你想要的模板。

您实际上可能想要扩展页面而不是默认值。

因此，在您的模板 Front Matter 中：

```
---
layout:page
--- 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-02T21:53:57.377

试试 Liquid Inheritance Gem：[https ://github.com/danwrong/liquid-inheritance](https://github.com/danwrong/liquid-inheritance)

参考： http: [//www.sameratiani.com/2011/10/22/get-jekyll-working-with-liquid-inheritance.html](http://www.sameratiani.com/2011/10/22/get-jekyll-working-with-liquid-inheritance.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T23:07:49.847

`template1.html``default.html`只要后者包含一个`{{ content }}`块，来自您的示例就会扩展。例如，请参见[此处](https://github.com/pkazmierczak/pkazmierczak.github.com/blob/octopress-source/source/_layouts/page.html)。它不会做的是它不会覆盖任何`default.html`已经包含的内容。为此，您需要 @juddlyon 提到的 Liquid Inheritance Gem。***

# zend-framework - Zend 框架 ORDER BY

> ID：10422173
> 
> 赞同：2
> 
> 时间：2012-05-02T21:45:28.817
> 
> 标签：zend-framework

我有一个我想按字母顺序订购的项目列表，这是我的代码：

```
public function indexAction()
{
    $this->authoriseUser();
    $this->view->assign('title', 'Clubs');
    $this->view->headTitle($this->view->title, 'PREPEND');
    $clubs = new Application_Model_DbTable_Clubs();
    $this->view->clubs = $clubs->fetchAll();
    $select = $clubs->select();
    $select->order('club_name ASC');
} 
```

怎么了？因为它不起作用..

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T21:51:01.513

您需要将选择对象传递给 fetchAll 方法

```
public function indexAction()
{
    $this->authoriseUser();
    $this->view->assign('title', 'Clubs');
    $this->view->headTitle($this->view->title, 'PREPEND');
    $clubs = new Application_Model_DbTable_Clubs();
    $select = $clubs->select()
        ->order('club_name ASC');
    $this->view->clubs = $clubs->fetchAll($select);
} 
```

# vim - 有没有办法让 ctrl-6 跳回与前一个文件完全相同的页面内容

> ID：10422174
> 
> 赞同：2
> 
> 时间：2012-05-02T21:45:29.543
> 
> 标签：vim

我用ctrl-6在两个文件之间跳转，逐页比较这两个文件，但是每次切换回来，页面内容都变了。也就是说，现在显示的是屏幕中间有先前光标行的新页面。

有没有办法在我切换回来时保持屏幕中的页面位置不变。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T21:50:18.090

我可以建议使用标签（`C-PgUp`和`C-PgDn`切换）吗？

你总是可以从做开始`C-w``s``C-^``C-w``T`

否则，请参阅我的这个 odler answer 以获取有关恢复光标位置的提示：

*   [在 :windo 之后，如何让光标回到原来的位置？](https://stackoverflow.com/questions/9984032/after-a-windo-how-do-i-get-the-cursor-back-where-it-was/9989348#9989348)
*   [窗口拆分时的 Vim 缓冲区位置更改（烦恼）](https://stackoverflow.com/questions/9625028/vim-buffer-position-change-on-window-split-annoyance/9626591#9626591)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:42:49.143

这可能不是您要查找的内容，但以防万一：对于您正在执行的任务的不同方法（直观地比较两个文件），请参阅`:help scrollbind`. 您可以`:set scrollbind`在两个并排的窗口中进行操作，并在每个窗口中打开一个文件，然后一起滚动浏览它们并链接。另请参阅`vimdiff`以了解更多功能。

# vb.net - App_Code 模块忽略 machine.config 命名空间

> ID：10422177
> 
> 赞同：0
> 
> 时间：2012-05-02T21:45:44.180
> 
> 标签：vb.net, web-config, asp.net-3.5, machine.config

我有一个旧版 ASP.NET/VB.NET 网站。machine.config 文件中包含几个 App_Code 模块/代码文件，它们使用来自常见命名空间（例如“系统”等）的类型。

出于某种原因，这些模块无法识别 machine.config 文件中包含的命名空间。machine.config 文件的修改不再对这些模块产生影响。

当我创建一个新的 ASP.NET/VB.NET 网站项目时，我无法复制这种情况。正如预期的那样，对 machine.config 文件的修改具有所需的效果。我认为这个问题是由 WebSite Web.config 文件中的某些特定选项引起的。任何提示/参考将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:58:32.380

此问题是由以下 VB.NET 编译器故障引起的：由于缺少一些依赖程序集而导致许多其他复杂错误。由于某些原因，VB.NET 编译器无法识别 machine.config 文件中包含的命名空间中的模块。一旦解决了缺少依赖程序集的复杂错误，machine.config 命名空间的问题就消失了。

# unit-testing - WF代码活动的单元测试

> ID：10422180
> 
> 赞同：8
> 
> 时间：2012-05-02T21:45:58.340
> 
> 标签：unit-testing, workflow-foundation-4

我已经创建了编码活动，现在我想对其进行单元测试，但我不知道如何。任何示例将不胜感激。

我的简单示例如下。

```
 public sealed class ParameterActivity : CodeActivity
{
    public InArgument<int> Argument1 { get; set; }
    public InArgument<int> Argument2 { get; set; }
    public OutArgument<int> Result { get; set; }

    protected override void Execute(CodeActivityContext context)
    {
        var a = context.GetValue(Argument1);
        var b = context.GetValue(Argument2);

        context.SetValue(Result, a + b);
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-02T22:41:45.697

首先，如果您的活动返回单个值，只需从*[CodeActivity<TResult>](http://msdn.microsoft.com/en-us/library/dd465967.aspx)*继承并轻松覆盖*Execute()*并将*TResult*作为返回类型。此外，您已经可以使用*[OutArgument<TResult> Result](http://msdn.microsoft.com/en-us/library/dd987724.aspx)*。

```
public sealed class ParameterActivity : CodeActivity<int>
{
    public InArgument<int> Argument1 { get; set; }
    public InArgument<int> Argument2 { get; set; }

    protected override int Execute(CodeActivityContext context)
    {
        var a = Argument1.Get(context);
        var b = Argument2.Get(context);

        return a + b;
    }
} 
```

话虽如此，***[WorkflowInvoker](http://msdn.microsoft.com/en-us/library/system.activities.workflowinvoker.aspx)***是对几乎所有活动进行单元测试的方法。以上述自定义代码活动为例：

```
[TestFixture]
public sealed class ParameterActivityTests
{
    [Test]
    public void ParameterActivity_Test()
    {
        var activity = new ParameterActivity();

        var input1 = new Dictionary<string, object> 
        {
            { "Argument1", 10 },
            { "Argument2", 5 }
        };

        var input2 = new Dictionary<string, object> 
        {
            { "Argument1", -13 },
            { "Argument2", 3 }
        };

        var output1 = WorkflowInvoker.Invoke<int>(activity, input1);
        var output2 = WorkflowInvoker.Invoke<int>(activity, input2);

        Assert.That(output1, Is.EqualTo(15));
        Assert.That(output2, Is.EqualTo(-10));
    }
} 
```

除了*[WorkflowInvoker](http://msdn.microsoft.com/en-us/library/system.activities.workflowinvoker.aspx)*，您还可以使用*[WorkflowApplication](http://msdn.microsoft.com/en-us/library/system.activities.workflowapplication.aspx)*但对于单元测试，当您只想快速调用短期工作流让他们做“他们的事情”并返回时，这似乎根本没有必要。除非你想测试更复杂的东西，比如异步工作流和/或书签。

您还需要检查***[Microsoft.Activities.UnitTesting](http://wf.codeplex.com/wikipage?title=Microsoft.Activities.UnitTesting%20Overview)***。

# magento - Magento - 存储用于属性的值的正确位置

> ID：10422185
> 
> 赞同：0
> 
> 时间：2012-05-02T21:46:26.743
> 
> 标签：magento

我在模块设置期间创建了一个下拉属性。

我想在我的模块安装时用一些值预先填充这个属性。我可以做到这一点，目前只需将值存储在一个数组中，然后在安装脚本中创建将选项添加到属性。

在哪里存储这些值的正确位置 - 在模型中？如果是这样，它会是使用 toOptionArray 方法的源模型吗？这在技术上用于表单，因此看起来不正确。但也不只是将值存储在设置脚本中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:01:20.757

是的，该`toOptionArray`方法符合 Magento 的标准做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:55:11.223

如果您要问的话，通常可以在 Helpers 中找到 toOptionArray()。助手扩展的类少得多，因此继承的方法比模型少得多。这使得它们对于简单任务（例如设置一系列选项）的重量要轻得多，前提是它们是静态的。

如果这些值存储在一个新的数据库表中，并且可以由用户扩展，则将其放在可以直接访问您的数据库表的模型中可能更有意义。

# php - Facebook 的 5000 个帖子 API 限制

> ID：10422186
> 
> 赞同：8
> 
> 时间：2012-05-02T21:46:33.523
> 
> 标签：php, facebook, facebook-graph-api

我对 Facebook 限制您的 api 调用的方式有疑问。

在这篇文章的底部：http: [//developers.facebook.com/blog/post/478/](http://developers.facebook.com/blog/post/478/) facebook 说：

> 除了上面列出的每个表和连接的文档中提到的限制之外，知道在运行可见性检查之前我们将获取的最大结果数是 5,000 是有帮助的。

我想知道如何通过这样的公共数据进行分页。例如，以夏奇拉为例：她上传的每张照片都会获得很多赞，这个 api 调用：

[https://graph.facebook.com/5027904559_10150854808869560/likes?format=json&limit=1000&offset=0&__after_id=100002349968919](https://graph.facebook.com/5027904559_10150854808869560/likes?format=json&limit=1000&offset=0&__after_id=100002349968919)

最终停止在5000个喜欢。

[https://graph.facebook.com/5027904559_10150854808869560/likes?format=json&limit=1000&offset=5000&__after_id=100000881924617](https://graph.facebook.com/5027904559_10150854808869560/likes?format=json&limit=1000&offset=5000&__after_id=100000881924617)

有趣的一点是，这些数据都是公开的，我不必登录 Facebook 就可以看到它。我知道有关于您*如何*使用数据的隐私政策，这不是我的问题。如果数据是公开的，这些数据是什么，为什么我们不能全部获取，如果可以，如何获取？

主要问题是：

1.  您能否获得超过 5000 个特定 API 调用的结果，如上图所示？

2.  是最近的5000赞吗？因此，如果您立即开始收集该帖子的数据，然后每 10 分钟左右返回一次以寻找新的喜欢，您是否能够通过这种防止 5000 限制的方法获取所有数据？

3.  它是对 API 调用的限制，还是对他们发送给一个用户的结果数量，或者对他们为某个帖子发回的结果数量等的限制？

4.  这是否适用于帖子、标记和评论以及喜欢分页？

我知道这个问题有点开放，但我到处寻找答案，但没有很好的记录。任何帮助都会很棒，我想很多人将来可能会参考这些信息。

**更新：**

运行此 API 调用时：

[https://graph.facebook.com/5027904559_10150854808869560/likes?format=json&limit=1000&offset=4964&__after_id=100000881924617](https://graph.facebook.com/5027904559_10150854808869560/likes?format=json&limit=1000&offset=4964&__after_id=100000881924617)

你得到一个结果，因此达到了极限（至少接近极限）。有人建议使用 FQL，这可能会返回更多。但我尝试用 FQL 在 PHP 中做同样的事情，但只得到了 1 条记录。

```
$select = urlencode("SELECT user_id, object_id, post_id FROM like WHERE post_id='5027904559_10150854808869560' LIMIT 1000 OFFSET 4964");
        $fql_query_url = 'https://graph.facebook.com/fql?q=' . $select;
        $fql_query_result = file_get_contents($fql_query_url);
        $fql_query_obj = json_decode($fql_query_result, true); 
```

**所以，到目前为止，唯一的答案是“不”，你总是被限制在 5000 个结果中。而且我不认为/不知道具有某些特定权限的特定 access_token 是否有帮助。**

还有一个更新，当我去夏奇拉的页面并点击“x 数量的这样的人”并开始向下滚动列表时，我也达到了限制。因此，Facebook 不仅限制了 API 和 FQL 返回，而且还限制了自己的页面。

我很想看看是否有人知道为什么？他们一次只有 5k 的缓存，如果人们用这么多请求访问数据库，他们将无法处理规模？只是一个猜测。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T21:52:07.903

遗憾的是，没有办法获得超过最后 5000 个对象。

除非，正如你所说，你从少于 5000 个的时候开始维护它，并将它们存储起来。:)

这可能是有意的，也可能不是有意的（也许他们正试图让旧消息消亡并且不容易被发现），或者，它可能与您在 Facebook 上允许的好友数量（5000）相吻合。

# xml - XPath 查询：为什么没有结果？

> ID：10422189
> 
> 赞同：1
> 
> 时间：2012-05-02T21:46:58.100
> 
> 标签：xml, string, xpath

我有以下 XML：

```
<pets>
    <dog name="Rupert" color="grey"/>
    <dog name="Ralph" color="brown"/>
    <cat name="Marvin the Cat" color="white"/>
    <cat name="Garfield the Cat" color="orange"/>
    <cat name="Cat" color="grey"/>
    <cat name="Fluffy" color="black"/>
</pets> 
```

我有以下 XPath 查询：

```
//cat[@*[translate(., 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')] = 'marvin the cat'] 
```

但它不返回任何结果。我正在尝试将 的值转换`@*`为小写。

**我正在寻找的是一个“匹配整个单词”同时不区分大小写的结果。如何更改此查询以达到我想要的结果？**

注意：我本来想使用 XPath 2.0`matches`功能，但我发现我只能使用 XPath 1.0。因此我需要一个解决方法！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T21:52:43.127

您过早地结束了谓词。试试这个：

```
//cat[@*[translate(., 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz') = 'marvin the cat']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:55:32.770

避免翻译所有属性....

```
//cat[translate(@name, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz') = 'marvin the cat'] 
```

# node.js - 是否有令人信服的理由使用基于 AMQP 的服务器而不是 beanstalkd 或 redis？

> ID：10422190
> 
> 赞同：11
> 
> 时间：2012-05-02T21:47:02.697
> 
> 标签：node.js, background, scheduled-tasks, task-queue

我正在为一个项目写一篇文章，该项目负责处理面向数据服务器的主应用程序之外的任务，该数据服务器是使用 Node.js 用 javascript 编写的。它需要处理未来安排的任务，并可能处理“现在”的任务。“现在”只是意味着下次有工作人员可用时，它将执行该任务，因此该位可能无关紧要。工作人员都将与外部资源交谈，一个示例工作是发送电子邮件。我们是一家小商店，我们没有大量资源，所以我不想做的一件事就是在这个过程中开始混合语言，我已经看到 Node 可以很容易地为我们做到这一点，所以这就是我们

尽管如此，我不知道是否有令人信服的理由使用基于 AMQP 的服务器，比如[OpenAMQ](http://www.openamq.org/)或[RabbitMQ](http://www.rabbitmq.com/)，而不是像[Kue](https://github.com/learnboost/kue)或[Beanstalkd](http://kr.github.com/beanstalkd/)这样的节点客户端。所以，我们开始：

是否有令人信服的理由使用基于 AMQP 的服务器而不是带有 Kue 的 beanstalkd 或 redis？如果是，哪款基于 AMPQ 的服务器最适合我布置的架构？如果不是，哪种 nosql 解决方案（beanstalkd、redis/Kue）最容易设置和部署最快？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-03T00:19:56.677

FWIW，我还没有接受我的答案，我将解释我的决定以及原因。如果我没有得到任何似乎比我决定的更好的答案，我稍后会接受我自己的答案。

我选择了酷。它支持多个异步运行的worker，并且通过集群它可以利用多核系统。它很容易扩展以提供安全性。它以 Redis 为后盾，完全用于这个确切的事情，所以我知道我不会用未经证实的软件支持我的工作流程服务器（这并不是说其他​​任何软件都未经证实。）

我选择 Kue 的最令人信服的原因是它提供了一个 JSON api，以便客户端应用程序（第一个客户端将是一个基于 Web 的应用程序，但我们也计划制作智能手机应用程序）可以轻松添加工作而无需通过面向节点实例的主应用程序，所以在我写这篇文章时，我可以完全避开我团队的其他成员。我不需要路线，我不需要任何东西，而且都是为我提供的，所以我不需要写任何东西来支持这一点。这还有另一个优点，提供 l/p 安全性的扩展，只有授权的客户端才能添加作业，所以我不必将我的 redis 服务器直接暴露给客户端应用程序。它还有一个内置的 Web 控制台，API 允许客户端很容易地拉回与给定用户关联的作业列表，

另一个令人信服的原因是缺乏与让 redis 和 Kue 为我服务相关的陡峭学习曲线。我之前设置过redis，Kue简单有效。

是的，我是一个懒惰的开发者，但我是那种懒惰的开发者。

更新：

我让它工作和做工作，吞吐量是惊人的。我将任务编组逻辑拆分到它自己的节点实例中，基本上我所要做的就是将我的 repo 部署到一台新机器上并运行 node task-server.js 来扩展我的工人。我可能需要添加更多对 Kue 的求职电话，因为我如何实现了一些事情，但这很容易。

# open-source - 使用语音进行性别识别的开源工具

> ID：10422193
> 
> 赞同：3
> 
> 时间：2012-05-02T21:47:15.247
> 
> 标签：open-source, speech-recognition, kinect, cmusphinx

晚上好，我正在使用 Kinect 进行一个项目，我需要使用传感器麦克风捕获的语音信息来执行性别识别。识别也可以是*基于文本的*，即用户所说的句子总是相同的。我“只是”需要男性/女性的二元答案。

我已经检查了非常流行的开源 Sphinx，但我不明白它是否可以满足我的需求。

知道我可以使用什么吗？
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-11T09:04:27.513

为了完整起见，最后我在不分析语音输入的情况下解决了识别任务。

还可以通过学习然后对视觉生物特征进行分类，以可接受的精度检测性别。我只使用语音识别作为“界面”来激活演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:46:07.510

有几种方法可以实现这一点。您可以跟踪音高（较低的音高值为男性，否则为女性）。或者尝试构建一个 GMM（Sphinx 不能这样做，但 HTK 可以），一个模型用于男性，另一个用于女性，另一个用于儿童。

# asp.net-mvc - 如何在多个 Asp.net MVC 应用程序中使用通用布局和样式

> ID：10422194
> 
> 赞同：7
> 
> 时间：2012-05-02T21:47:22.890
> 
> 标签：asp.net-mvc, layout, razor, asp.net-mvc-4, telerik-mvc

我有一个视觉工作室解决方案，其中包含多个具有相同外观和感觉的 Telerik MVC4 剃须刀项目。我不想在所有 MVC4 项目中复制相同的布局、CSS/样式、图像和 js 文件。实现这种可重用性的最佳方法是什么？我尝试创建一个 commonUI 项目的虚拟目录，并尝试在 _ViewStart.cshtml 中使用[http://localhost/](http://localhost/) ... 引用 _layout.cshtml 但它抱怨说“http:/localhost/MyMvcApp/Views/Shared/_Layout.cshtml ' 不是有效的虚拟路径。”

请帮忙！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T16:16:06.187

四个建议：

1）查看区域，也许不是有单独的项目，这些是同一系统的不同组件（管理员等）？

2）使用在visual studio中添加现有项目并通过链接添加项目。这仍然会复制它们以进行部署，但您可以保留一个源。

3）考虑通过构建自己的nuget包来做到这一点。这样，虽然您将复制 CSS 和图像，但您可以将其打包并根据需要更新包。好处是您可以更新一个项目，而不必重新测试另一个项目（如果它们是分开的并且 1）不适用）。

4）我觉得这个比其他的更丑，但是在 IIS 中我相信你可以映射到文件夹中，所以你可以通过项目中的链接来引用这些文件，而不是在那里部署它们，然后在部署时映射到适当的文件夹中使用单一来源路径。

我知道没有办法分享应用程序路径。

## 编辑：

我以前从未尝试过，因此无法保证它可以正常工作，但可能会在单独的项目中编译您的共享项目，然后在所有其他项目中引用 DLL。

我找到的参考是这个，但我还没有确认这是否有效，只是认为这可能是一条可行的探索途径：

[http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/](http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-11T13:13:59.683

区域不好，因为您不能单独部署它们。像你一样，我尝试使用虚拟目录，并成功地使用相对语法引用布局：

```
@{
    Layout = "~/Common/Layouts/Layout-001.cshtml";
} 
```

上面，项目的布局继承了根目录下 /common/ 虚拟目录中的布局。随着通用布局（连同它的 bootstrap 和 jquery 版本）的发展，您可以使用并排版本命名的物理文件夹（如 common.v01、common.v02）。因此，您可以通过将 VD 的路径更改为适当的版本来将您的应用程序升级到更新的通用布局。

这样做的缺点是您需要使用 IIS（而不是 express）作为您的开发和测试平台。

# javascript - 从 location.host 获取根域

> ID：10422198
> 
> 赞同：7
> 
> 时间：2012-05-02T21:47:50.457
> 
> 标签：javascript, string-parsing

有很多 SO 问题似乎可以解决这个问题的变体。但它们往往是复杂的正则表达式答案，我希望我能找到更简单的东西。

给定 location.host 的值

```
foo.mysite.com
app.foo.mysite.com
mysite.com 
```

如何获得根域`mysite.com`？

我可以做一些事情，比如找到倒数第二个`.`，但这看起来很难看，并且不适用于任何 TLD 之类的`.co.uk`。如果 jQuery 有一个包含这些信息的对象，我很乐意使用它。

我的目标是创建存在于所有子域中的 cookie。为此，我需要找到`.mysite.com`. 我不想硬编码它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T20:30:17.257

考虑到我们的域从 .com 以外的任何地方更改的可能性极低，更不用说更改为 SLD，我在其中编写了类似的代码。

```
var temp = location.host.split('.').reverse();
var root_domain = '.' + temp[1] + '.' + temp[0]; 
```

维护 TLD 或 SLD 列表并与之进行比较的开销和维护对我们来说不值得。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-06-15T17:04:59.080

如果你想在一条线上全部 -

```
document.domain.split('.').reverse().splice(0,2).reverse().join('.') 
```

或者

```
location.hostname.split('.').reverse().splice(0,2).reverse().join('.') 
```

对于输入：`'foo.example.com', 'foo.bar.example.com', 'foo.bar.fizz.buzz.example.com'`

它将返回：`'example.com'`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-02T22:22:37.157

您不能将 .co.uk 称为 TLD。它实际上是一个[二级域](https://en.wikipedia.org/wiki/Second-level_domain)。因此，根域是什么总是模棱两可的。
但是，您可以列出所有可用的 TLD 和二级域并尝试查找匹配项。但这将是一项非常昂贵且乏味的操作。
如果您想这样做，此[TLD 和 SLD 列表](https://github.com/gavingmiller/second-level-domains)可能有用：

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-02-19T10:29:01.047

我一直在使用这个：

```
const rootDomain = s => {
    const r =  /.*\.([^.]*[^0-9][^.]*\.[^.]*[^.0-9][^.]*$)/;
    return s.replace(r, '$1');
}; 
```

Which is similar in output to the above method using split, reverse etc., but it doesn't modify straight IP addresses.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-23T07:28:30.983

```
const rootDomain = '.' + window.location.hostname.split('.').slice(-2).join('.'); 
```

# jsp - 在 jsp 中，请求参数（带有空格的字符串值）仅显示到文本框中的第一个空格

> ID：10422203
> 
> 赞同：0
> 
> 时间：2012-05-02T21:48:11.847
> 
> 标签：jsp

```
<input type="text" name="designation" value=<%=request.getParameter("designation")%> ></input> 
```

在这个 JSP 中，我使用 window.location.replace() 函数通过 javascript 从另一个 JSP 页面发送请求参数。

我想在这个jsp页面的文本框中显示那个请求参数。

但它只显示字符串的一部分，直到第一个空格。剩余的字符串被修剪。

这个问题的原因可能是什么？

例如，如果 designation="software Engineer" 那么它在文本框中只显示“软件”，而不是“”（空格）和“工程师”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T21:50:05.920

您需要用引号将属性值括起来。

```
<input type="text" name="designation" value="<%=request.getParameter("designation")%>"> 
```

否则，空格将被解释​​为 HTML 元素属性分隔符，下一个单词将成为另一个 HTML 元素属性。

* * *

**与具体问题无关**，如果您在整个 JSP 中使用这种方法，也用于重新显示来自 DB 的用户控制数据，那么您就有了[XSS 攻击](http://en.wikipedia.org/wiki/Cross-site_scripting)漏洞。确保正确地对它们进行 HTML 转义。另请参阅[JSP/Servlet Web 应用程序中的 XSS 预防](https://stackoverflow.com/questions/2658922/xss-prevention-in-java)。

# android - Android测试UI元素/View是否存在

> ID：10422213
> 
> 赞同：4
> 
> 时间：2012-05-02T21:49:30.630
> 
> 标签：android, android-widget

如果我有一个定义的 UI 元素，例如

```
<TextView
    android:id="@+id/output"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:text="@string/hello"
    android:typeface="monospace" 
    android:textSize="12sp" /> 
```

我可以用类似的东西来引用它

```
TextView output = (TextView) findViewById(R.id.output); 
```

但是，如果 TextView 不存在，那么我什至无法编译代码，因为没有`R.id.output`生成并且在编译时被捕获。

有没有办法在不通过 引用它的情况下测试元素是否存在`R.id...`，因为如果不存在则会产生编译时错误？

实际上，我相信我不仅需要测试它是否存在，还需要另一种引用它的方式。

也许像

```
TextView output = null;
if((output = findViewByName("output")) != null)
{
    // Do something with output
} 
```

（当然，该`findViewByName`功能不存在。）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:13:34.730

您可以使用[Resources 类](http://developer.android.com/reference/android/content/res/Resources.html)方法[getIdentifier()](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)按名称查找资源，尽管如文档中所述，它比按 id 查找效率低得多。

# sql - 带有 many-ISNULL 的多列 UPDATE-JOIN 需要很长时间？

> ID：10422221
> 
> 赞同：7
> 
> 时间：2012-05-02T21:49:56.373
> 
> 标签：sql, sql-server-2008, join, isnull

我们的数据库中有一个存储过程，它通过在 where 条件下连接 30 列上的 2 个表来更新表。SQL 的一般格式为：

```
UPDATE Target
SET col1 = Source.col1
INNER JOIN Source 
on 
ISNULL(Target.Col2, '') = ISNULL(Source.Col2, '') and
ISNULL(Target.Col3, '') = ISNULL(Source.Col3, '') and
.
.
.
ISNULL(Target.Col31, '') = ISNULL(Source.Col31, '') and 
```

这是查询计划。将其保存到您的 PC 并重新打开它，以便更好地扩展。

![在此处输入图像描述](../Images/3ce88ea92b159fd997f98db8a4f51240.png)

Source 表有 65M 记录，Target 有 165M。以前它曾经在几分钟内运行。考虑到查询的丑陋和潜在的低效，我觉得这很令人惊讶。这个月它运行了 1.5 小时，使用了 100% 的处理器，我们不得不杀死它。

任何建议如何即兴发挥以下查询并使其按时运行..？

我们在 30-col 连接条件中使用的一些列上有单列索引。

我知道 ISNULL 函数和 30 列上的连接是疯狂的，这是一个糟糕的设计。别怪我，我继承了这个经济。

不幸的是，没有时间重新设计。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T22:05:28.357

1.  请发布预估执行计划的截图
2.  我怀疑以前的查询使用了哈希连接（它应该这样做），但不知何故，基数估计现在出错了，你得到了一个循环连接。在查询上打一个哈希连接提示，看看它是否修复了这个（`INNER HASH JOIN`）。一旦我们有了确切的计划，我们就可以说更多。
3.  将等式更改为`(A1 = A2 OR (A1 IS NULL AND A2 IS NULL))`。SQL Server 实际上识别出这种模式并在内部将其转换为“完全等于没有愚蠢的空语义”。即使使用空值，您也可以通过这种方式查找索引。

如果这没有帮助，请务必执行步骤 (3) 并在 col2-col31 上创建一个覆盖索引，包括 col1。这将为您提供一个合并连接，这是在这种情况下可能最有效的计划。它真的很快。警告：这将使表的磁盘大小加倍并减慢更新速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T04:51:36.860

DBa 建议我们按照查询分析器的建议添加一个包含所有 30 列的索引，其中大多数是“包含”列。这允许查询完成。下个月我们运行时，通常在 1.5 小时内运行的相同更新 SQL 并没有在 24 小时内完成。当我们运行更新统计信息时，它在一小时内完成。

# c++ - 列表的元素和下一个元素的迭代器

> ID：10422229
> 
> 赞同：-1
> 
> 时间：2012-05-02T21:50:53.923
> 
> 标签：c++, list, std

我不明白 Bjarne 的想法：

> 列表迭代器必须比指向元素的简单指针更复杂，因为列表的元素通常不知道该列表的下一个元素在哪里。因此，列表迭代器可能是指向链接的指针

我知道列表的节点有指向下一个和前一个节点的指针。那么它怎么“一般不知道”呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:32:21.407

相比之下，让我们考虑一个`std::vector`. 尽管您可能不想这样做*，*但您基本上可以将其实现为一个简单的指针：

```
template <class T>
class vector {
    T *data;
    size_t current_size;
    size_t alloc_size;
public:
    typedef T *iterator;
    iterator begin() { return data; }
    iterator end() { return data+current_size; }
    // ...
}; 
```

并且由于向量中的数据是连续的，因此当您（例如）`++`在迭代器上执行操作时，它会做正确的事情（让您进入向量中的下一项）。

使用链表，它不可能那么简单——如果你曾经`typedef`让迭代器成为 的别名`T *`，它就不能正常工作。当您尝试`++`在迭代器上执行操作时，它只会增加指针，而不是像需要的那样将您带到链表中的下一个元素。

您需要在迭代器类中构建一些智能，以便 operator++（例如）知道“追逐”指针，而不仅仅是递增。

```
template <class T>
class list { 

    class node { 
        T data;
        node *next;
        node *prev;
    };
public:
    class iterator {
        node *pos;
    public:
        iterator operator++() {
            return pos = pos->next;
        }
        iterator operator--() {
            return pos = pos->prev;
        }
    };
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:53:34.860

不要将列表节点与列表元素混淆。它*可能*是一个指针，但指向一个包含元素和下一个/上一个链接的节点。如果它只是一个指向元素的指针，你将无法随它移动。（虽然它不太可能只是指针，因为它通常必须重载 operator++ 来获取下一个指针而不是自增）。

这不适用于插入式列表，其中节点 == 元素，但这不是 std::list。

```
// illustrative
template <typename ElementType>
struct list_node {
    ElementType element;
    list_node *next, *prev;
}; 
```

# python - Python wxTextCtrl将tab键上的文本移动4个空格？

> ID：10422234
> 
> 赞同：0
> 
> 时间：2012-05-02T21:51:04.987
> 
> 标签：python, wxpython, wxtextctrl

我有一个 wxTextCtrl，我让光标在 tab 键上向下移动 4 个空格。但是，如果我没有输入任何内容，那么当我按下制表符时，光标不会移动，文本也不会移动。

```
self.editor = wx.TextCtrl(splitter, style = wx.TE_MULTILINE)
wx.EVT_KEY_DOWN(self.editor, self.on_key_down)

def on_key_down(self, e):
    if e.GetKeyCode() == wx.WXK.TAB:
        current = self.editor.GetInsertionPoint()
        tab = current + 4
        self.editor.SetInsertionPoint(tab)
    else:
        e.Skip() 
```

如果有人可以帮助我移动光标，即使我没有在光标前面输入任何内容，也没有在光标前面输入任何文本。

我也想在输入时让某些关键词改变颜色。如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:10:03.000

尝试使用 WriteText：

```
def on_key_down(self, e):
    if e.GetKeyCode() == wx.WXK_TAB:
        tab = ' ' * 4
        self.editor.WriteText(tab)
    else:
        e.Skip() 
```

# javascript - 如何将变量用于具有较少混合的图像路径

> ID：10422235
> 
> 赞同：0
> 
> 时间：2012-05-02T21:51:10.600
> 
> 标签：javascript, html, css, less, retina-display

我是 Less 的新手，我正在尝试使用[http://retinajs.com/](http://retinajs.com/)尽可能加载视网膜图像。

该脚本在调用 CSS 中的图像时使用了这个 mixin：

```
.at2x(@path, @w: auto, @h: auto) {
  background-image: url(@path);
  @at2x_path: ~`"@{path}".split('.').slice(0, "@{path}".split('.').length - 1).join(".") + "@2x" + "." + "@{path}".split('.')["@{path}".split('.').length - 1]`;
  @media all and (-webkit-min-device-pixel-ratio : 1.5) {
    background-image: url(@at2x_path);
    background-size: @w @h;
  }  
} 
```

我的问题是，如果我为我的一张图像使用变量，我如何正确使用该变量在 mixin 中工作。

做这样的事情是行不通的：

```
 .at2x('@myImgPathVariable', 150px, 64px); 
```

这也不是：

```
 .at2x('("@{myImgPathVariable}/logo.png")', 150px, 64px); 
```

希望这是有道理的，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:46:08.273

卢克和奥姆都在做某事。如何声明变量可能会产生很大的不同。这样做似乎对我有用：

```
@myImgPathVariable: ~'https://developers.google.com/images/developers-logo.png';

div {
    .at2x(@myImgPathVariable, 200px, 48px);
} 
```

完整示例：http: [//jsfiddle.net/jstam/yUtxp/](http://jsfiddle.net/jstam/yUtxp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:56:46.717

```
/* did you try without quotes? */

  .at2x(@myImgPathVariable, 150px, 64px); 
```

# java - 如何使这个 Java 接口灵活

> ID：10422243
> 
> 赞同：4
> 
> 时间：2012-05-02T21:51:53.580
> 
> 标签：java, class, interface

我有这个 Java 接口：

```
public interface Box {
   public void open();
   public void close();
} 
```

这个接口由这个类扩展：

```
public class RedBox implements Box {

   public void open() {

   }

   public void close() {

   }
} 
```

问题是我希望将来添加其他也将实现 Box 接口的类。这些新类将有自己的方法，例如其中一个类将有一个 putInBox() 方法，但是如果我将 putInBox() 方法添加到 Box 接口，我也将被迫添加一个空的 putInBox() 实现) 方法添加到之前实现 Box 接口的类，如上面的 RedBox 类。

我将 putInBox() 添加到 Box 接口，因为有一个类 Caller 采用实现 Box 接口的类的对象，例如：

```
public class Caller {

    private Box box;
    private int command;

    public Caller(Box b) {
        this.box = b;
    }

    public void setCommandID(int id) {
        this.command = id;
    }

    public void call() {

        if(command == 1) {
            box.open();
        }
        if(command == 2) {
            box.close();
        }

        // more commands here...
    }
}

Caller c = new Caller(new RedBox());

c.call(); 
```

如何在新类中实现 Box 接口，而不会被迫将新方法的空实现添加到以前实现 Box 接口的每个类中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T22:01:41.220

您不仅限于单个界面 - 您可以构建整个层次结构！例如，您可以制作这三个接口：

```
public interface Box {
    public void open();
    public void close();
}
public interface LockableBox extends Box {
    public void lock();
    public void unlock();
}
public interface MutableBox extends Box {
    public void putItem(int item);
    public void removeItem(int item);
} 
```

现在您的盒子可以从适合您的设计的层次结构中实现接口。

```
public class RedBox implements LockableBox {
    public void open() {}
    public void close() {}
    public void lock() {}
    public void unlock() {}
}

public class BlueBox implements MutableBox {
    public void open() {}
    public void close() {}
    public void putItem(int item) {}
    public void removeItem(int item) {}
} 
```

有了层次结构，您可以继续对接口进行编程：

```
MutableBox mb = new BlueBox();
mb.putItem(123);
LockableBox lb = new RedBox();
lb.unlock(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T21:56:06.930

实现 Box 接口的新类只需要实现 Box 接口中的方法，而不需要实现 Box 接口的其他类中的任何其他方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T22:03:27.413

如上所述，不需要在 Box 接口本身添加新类中的新方法，您可以将其留在新类中，因此不会干扰任何其他实现。

但是，如果您确实希望在接口级别拥有新方法，那么引入一些灵活性的一种方法是使用接口的（抽象）基本实现，该实现提供所有方法的（空）实现：

```
public abstract class BoxBase implements Box {
  public void open() { }

  public void close() { }

}

public class RedBox extends BoxBase {

   @Override
   public void open() {
     // open a red box
   }
} 
```

这样，当向 Box 接口添加新方法时，您只需将方法的实现添加到`BoxBase`类中，并且不会干扰您的`RedBox`类。

# jquery - 为什么jquery ajax回调函数不起作用？

> ID：10422244
> 
> 赞同：9
> 
> 时间：2012-05-02T21:51:54.580
> 
> 标签：jquery, ajax, callback, jquery-callback

我在 jQuery ajax 中遇到了一个简单的回调函数的问题。谷歌不会提供帮助，堆栈溢出也不会，所以我想这可能不是特定的东西，而是我太无知而无法看到的东西。对我来说，代码看起来和它应该的完全一样。

所以，这里是代码：

```
function sendMessage(message)
{
//Establish connection to php script
$.ajax({
    type: 'POST',
    url: 'action/chat/test.php',
    success: function(feedback){

        alert(feedback);

    }
}).error(function(){
    //Do some error handling here
});
} 
```

在 test.php 它只是说

```
<?php
    echo "called";
?> 
```

就我而言，应该提醒“被叫” - 但事实并非如此。我已经检查过调用了函数 sendMessage() （参数消息现在无关紧要）。

有谁有想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T22:01:21.830

**更新：**还需要注意一件事，确保您使用某种调试器，例如 firebug。然后您可以转到网络选项卡并手动查看请求 url 和响应，以查看它是否收到 200 响应或内部服务器错误等。

尝试`console.log(data);`在成功函数中添加 a 以查看是否返回任何内容。

你也可以使用`.always(data)`：

```
function sendMessage(message)
{
  //Establish connection to php script
  $.ajax({
      type: 'POST',
      url: 'action/chat/test.php'   
  }).done(function(data) { console.log(data); })
    .fail(function() { alert("error"); })
    .always(function() { alert("complete"); });
} 
```

从文档：

**弃用通知：** jqXHR.success()、jqXHR.error() 和 jqXHR.complete() 回调将在 jQuery 1.8 中弃用。要为最终删除准备代码，请改用 jqXHR.done()、jqXHR.fail() 和 jqXHR.always()。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-29T09:50:10.567

仅供参考，有一种行为可能会像这样结束（即 done() 未调用）。

这里是：

1.  假设您需要一个 JSON 对象（您使用“Accept”mime 类型请求它）。
2.  假设 Json 字符串无效。

在这种情况下 done() 永远不会被调用，但 always() 会被调用。在 always() 中，您将得到纯文本格式的“错误”格式答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T21:55:51.707

这可能是错误处理。如果你想处理错误，还有另一个属性可以给你传递给ajax的对象，它是“错误”，也是处理页面超时的“超时”。查找 $.ajax 函数，您会发现这些属性。

# android - 我可以使用一个 标记来布置作为 ActionBarSherlock TabsPager 一部分的片段？

> ID：10422246
> 
> 赞同：0
> 
> 时间：2012-05-02T21:51:59.783
> 
> 标签：android, android-fragments, android-tabhost, android-viewpager

我有一个带有标签的多片段 ABS 片段活动，并且 ViewPager 工作得很好，但是对于我的应用程序的实际功能，我需要能够获取片段并与它们进行通信。为了能够调用 findFragmentById()，片段需要 ID，这（如果我理解正确的话）要求它们具有`<fragment`> 标记或由 FragmentTransaction 创建。我使用的 TabsAdapter/ViewPager 代码使用 Fragment.instantiate() 从 Fragment 类创建片段，它不允许设置 ID。

那么，关于如何使用带有 ViewPager 的标签或使用 FragmentTransaction 来创建标签片段的任何想法？我可以很容易地在我的 TabsAdapter 中实现我自己的 id/fragment 映射，但如果可以的话，我宁愿使用标准机制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:38:55.140

FragmentPagerAdapter 使用名为 makeFragmentName 的私有方法标记它包含的所有 Fragment-tabs。

这是一个脆弱的解决方案，但从 ABS 4.0.2 开始可以使用。您需要知道要查找的 Fragment 的位置索引

老实说，您应该只使用自己的、不那么脆弱的解决方案。至少那时您将控制它何时/如何中断。

```
public Fragment getFragmentByPosition(ViewPager container, int position) {
    String name = makeFragmentName(container.getId(), position);
    return  mFragmentManager.findFragmentByTag(name);
}

//WARNING: this will break if ABS changes this method.
private static String makeFragmentName(int viewId, int index) {
    return "android:switcher:" + viewId + ":" + index;
} 
```

# symfony - 手动身份验证检查 Symfony 2

> ID：10422251
> 
> 赞同：15
> 
> 时间：2012-05-02T21:52:32.423
> 
> 标签：symfony

我正在开发一个 Symfony 2 应用程序，用户必须在登录过程中选择一个配置文件。

用户可能有多个要使用的配置文件，他们只知道自己的配置文件。所以首先，我需要提示输入用户名和密码，如果正确，我不应该登录用户，我需要提示用户将在会话期间使用的配置文件。

因此，我展示了一个带有用户名和密码字段的表单，并使用 Ajax 请求发送它，如果用户名和密码正确或错误代码，该请求将使用配置文件列表进行响应。最后，用户使用用户名、密码和配置文件登录系统。

问题是我不知道如何检查身份验证数据是否正确（使用我所有的身份验证管理器、用户提供程序等）来完成这个中间步骤（提示输入配置文件）而实际上没有记录用户。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-02-19T11:10:25.207

@Jordon 的代码的一个问题是它不适用于为相同密码生成不同哈希的哈希算法（例如 bcrypt，它在内部记录其参数，包括迭代次数和盐）。使用 Encoder 的 isPasswordValid 比较密码更正确。

这是与 bcrypt 一起工作的改进代码：

```
$username = trim($this->getRequest()->query->get('username'));
$password = trim($this->getRequest()->query->get('password'));

$em = $this->get('doctrine')->getManager();
$query = $em->createQuery("SELECT u FROM \Some\Bundle\Entity\User u WHERE u.username = :username");
$query->setParameter('username', $username);
$user = $query->getOneOrNullResult();

if ($user) {
  // Get the encoder for the users password
  $encoder_service = $this->get('security.encoder_factory');
  $encoder = $encoder_service->getEncoder($user);

  // Note the difference
  if ($encoder->isPasswordValid($user->getPassword(), $password, $user->getSalt())) {
    // Get profile list
  } else {
    // Password bad
  }
} else {
  // Username bad
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-10T03:43:49.153

你可以做这样的事情来检索用户并手动测试密码 -

```
$username = trim($this->getRequest()->query->get('username'));
$password = trim($this->getRequest()->query->get('password'));

$em = $this->get('doctrine')->getEntityManager();
$query = $em->createQuery("SELECT u FROM \Some\Bundle\Entity\User u WHERE u.username = :username");
$query->setParameter('username', $username);
$user = $query->getOneOrNullResult();

if ($user) {
  // Get the encoder for the users password
  $encoder_service = $this->get('security.encoder_factory');
  $encoder = $encoder_service->getEncoder($user);
  $encoded_pass = $encoder->encodePassword($password, $user->getSalt());

  if ($user->getPassword() == $encoded_pass) {
    // Get profile list
  } else {
    // Password bad
  }
} else {
  // Username bad
} 
```

从客户端取回您的个人资料后，您也可以轻松地在 AJAX 服务器控制器中手动执行登录 -

```
// Get the security firewall name, login
$providerKey = $this->container->getParameter('fos_user.firewall_name');
$token = new UsernamePasswordToken($user, $password, $providerKey, $user->getRoles());
$this->get("security.context")->setToken($token);

// Fire the login event
$event = new InteractiveLoginEvent($this->getRequest(), $token);
$this->get("event_dispatcher")->dispatch("security.interactive_login", $event); 
```

可能需要一些使用行 -

```
use Symfony\Component\Security\Core\Authentication\Token\UsernamePasswordToken;
use Symfony\Component\Security\Http\Event\InteractiveLoginEvent; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-10T09:14:41.610

我使用来自[@Jordon](https://stackoverflow.com/users/605735/jordon)和[@Potor Polak](https://stackoverflow.com/users/2298527/piotr-polak)的代码将逻辑包装在一个独立服务中，该服务使用当前访问令牌来验证密码。也许有些人需要这个：

`services.yml`：

```
app.validator.manual_password:
    class: AppBundle\Service\ManualPasswordValidator
    arguments:
        - '@security.token_storage'
        - '@security.encoder_factory' 
```

`ManualPasswordValidator.php`：

```
<?php

namespace AppBundle\Service;

use Symfony\Component\Security\Core\Authentication\Token\Storage\TokenStorage;
use Symfony\Component\Security\Core\Encoder\EncoderFactory;

/**
 * Class ManualPasswordValidator
 *
 * @package AppBundle\Service
 */
class ManualPasswordValidator
{
    /**
     * @var EncoderFactory
     */
    protected $encoderFactory;

    /**
     * @var TokenStorage
     */
    protected $tokenStorage;

    /**
     * ManualPasswordValidator constructor.
     * 
     * @param EncoderFactory $encoderFactory
     * @param TokenStorage $tokenStorage
     */
    public function __construct(TokenStorage $tokenStorage, EncoderFactory $encoderFactory)
    {
        $this->encoderFactory = $encoderFactory;
        $this->tokenStorage = $tokenStorage;
    }

    /**
     * @param $password
     * @return bool
     */
    public function passwordIsValidForCurrentUser($password)
    {
        $token = $this->tokenStorage->getToken();

        if ($token) {
            $user = $token->getUser();

            if ($user) {
                $encoder = $this->encoderFactory->getEncoder($user);

                if ($encoder->isPasswordValid($user->getPassword(), $password, $user->getSalt())) {
                    return true;
                }
            }
        }

        return false;
    }
} 
```

在此之后，您可以在任何地方注入`ManualPasswordValidator`并使用它，例如：

```
$password        = $request->get('password');
$passwordIsValid = $this->manualPasswordValidator->passwordIsValidForCurrentUser($password); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-03T11:18:45.330

我可以在控制器上验证我的用户的唯一方法是发出子请求然后重定向。这是我的代码，我使用的是 silex，但您可以轻松地将其调整为 symfony2：

```
$subRequest = Request::create($app['url_generator']->generate('login_check'), 'POST', array('_username' => $email, '_password' => $password, $request->cookies->all(), array(), $request->server->all());

$response = $app->handle($subRequest, HttpKernelInterface::MASTER_REQUEST, false);

return $app->redirect($app['url_generator']->generate('curriculos.editar')); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-28T14:52:26.023

在 Symfony 4 中，建议在控制器中使用 UserPasswordEncoderInterface。只需将 UserPasswordEncoderInterface 作为参数添加到要检查密码的函数中，然后添加下面的代码。

```
public function changePasswordAction($old, $new, UserPasswordEncoderInterface $enc) {
   // Fetch logged in user object, can also be done differently.
   $auth_checker = $this->get('security.authorization_checker');
   $token = $this->get('security.token_storage')->getToken();
   $user = $token->getUser();

   // Check for valid password
   $valid = $encoder->isPasswordValid($user, $old);

   // Do something, e.g. change the Password
   if($valid)
      $user->setPassword($encoder->encodePassword($user, $new));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-03-01T19:41:14.987

#### Symfony 5.4

密码验证可以使用*UserPasswordHasherInterface来完成*

```
use Symfony\Component\PasswordHasher\Hasher\UserPasswordHasherInterface;

class AuthenticaitonServices
{    
    public function __construct(UserPasswordHasherInterface $hasher)
    {
        $this->hasher = $hasher;
    }

    public function validate($request)
    {
         $form = [
            "username" => $request->request->get("_username"),
            "password" => $request->request->get("_password")
         ];

         if(!$this->hasher->isPasswordValid($user, $form['password']))
         {
             // Incorrect Password
         } else {
             // Correct Password
         } 
```

> *isPasswordValid*返回一个 bool 响应

如果有人在 Symfony 5.4 中检查密码验证解决方案。上面的代码用于验证从登录表单发布的密码。

希望这会有所帮助。

# haskell - Haskell - 将 Data.Dynamic 放在地图中的任何简单方法？

> ID：10422256
> 
> 赞同：2
> 
> 时间：2012-05-02T21:53:18.670
> 
> 标签：haskell, map, dynamictype

我想将`Data.Dynamic`s 映射到其他`Data.Dynamic`s。但是，我不会写

```
Map Dynamic Dynamic 
```

因为没有`Ord Dynamic`。是否有任何解决方案（例如`Dynamic`其`toDyn`功能仅接受`Ord`事物并在装箱时具体化类型类的版本？）

~~这样做的动机是在 EDSL 编译器中拥有来自变量 --> 值的映射。（显然变量可以有不同的类型）。~~ **编辑**：对不起，这个问题没有必要，我可以/应该只将变量名存储为键。但是，我仍然对这个问题感兴趣。

提前致谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T22:09:00.987

不，没有办法。由参与创造的类型`Dynamic`不可能存在。如果你想不纯，你可以使用`StablePtr`，但这是我能想到的最好的。

但是通过更改 toDyn 的类型以包含 Ord 可以完成。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T22:36:54.667

如果有人感兴趣，我破解了一个解决方案；这有点棘手/有趣:)

代码在这里： http: [//pastebin.com/KiJqqmpj](http://pastebin.com/KiJqqmpj)。

[（我还为高阶类型编写](http://pastebin.com/aqjwFv9p)了一个`Typeable1`，如果您始终具有相同的高阶类型函数，则无需编写难的。）`Typeable1`

一些价值观：

```
float1 = mk_ord_dyn (1 :: Float)
float2 = mk_ord_dyn (2 :: Float)
int1 = mk_ord_dyn (1 :: Int)
int2 = mk_ord_dyn (2 :: Int) 
```

一个小测试，

```
*OrdDynamic> int1 == int1
True
*OrdDynamic> int2 == int2
True
*OrdDynamic> int1 < int2
True
*OrdDynamic> int2 < float1
False
*OrdDynamic> float1 < int2
True
*OrdDynamic> int1 == float1
False 
```

# qt - 如何将 qundocommand 保存到文件并重新加载？

> ID：10422259
> 
> 赞同：2
> 
> 时间：2012-05-02T21:53:35.487
> 
> 标签：qt, undo-redo

我正在使用 qt 的撤消框架，它使用 qundocommand 来做一些应用程序支持撤消。有没有一种简单的方法可以用来将这些 qundocommand 保存到文件并重新加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:00:23.767

没有内置的方法。我认为在会话之间保存撤消堆栈并不常见。您必须自己通过迭代堆栈上的命令来序列化命令，并使用[QDataStream](http://qt-project.org/doc/qt-4.8/qdatastream.html)保存每个命令的唯一数据。它可能看起来像这样：

```
...
dataStream << undoStack->count(); // store number of commands

for (int i = 0; i < undoStack->count(); i++)
{
    // store each command's unique information
    dataStream << undoStack->command(i)->someMemberVariable;
}
... 
```

然后您将再次使用 QDataStream 将数据反序列化回 QUndoCommands。

您可以使用[QFile](http://qt-project.org/doc/qt-4.8/qfile.html)来处理文件管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:34:26.217

使用 Qt 的序列化，如下所述：

[使用 Qt 进行序列化](https://stackoverflow.com/questions/2570679/serialization-with-qt)

然后在您的 QUndoCommands 中，您可以使用临时文件将数据写入其中：

[http://qt-project.org/doc/qt-4.8/qtemporaryfile.html](http://qt-project.org/doc/qt-4.8/qtemporaryfile.html)

但是，这可能会给您带来问题，因为每个文件都保持打开状态，因此在某些平台（Linux）上，您可能会用完打开的文件句柄。

为了解决这个问题，您必须创建一些其他工厂类型对象来处理您的命令 - 然后这可以自动传递对 QTemporaryFile 的引用。这个 factory/QUndoCommand 看护对象必须与 QUndoCommands 具有相同的生命周期。如果没有，则临时文件将从磁盘中删除，并且您的 QUndoCommands 将中断。

您可以做的另一件事是使用 QUndoCommand 作为您真正的撤消命令的代理 - 这意味着您可以节省相当多的内存，因为当您的撤消命令保存到文件时，您可以删除内部指针/将其设置为空。然后稍后恢复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-02T13:38:51.150

这是用于序列化/酸洗 QUndoCommands 的 PyQt 解决方案。棘手的部分是让父母先打电话`__init__`，然后是孩子。此方法依赖于`__setstate__`在父级之前调用所有子级，这发生在酸洗时，因为子级在父级中返回`__getstate__`。

```
class UndoCommand(QUndoCommand):
    """
    For pickling
    """
    def __init__(self, text, parent=None):
        QUndoCommand.__init__(self, text, parent)
        self.__parent = parent
        self.__initialized = True

        # defined and initialized in __setstate__
        # self.__child_states = {}

    def __getstate__(self):
        return {
            **{k: v for k, v in self.__dict__.items()},
            '_UndoCommand__initialized': False,
            '_UndoCommand__text': self.text(),
            '_UndoCommand__children':
                [self.child(i) for i in range(self.childCount())]
        }

    def __setstate__(self, state):
        if hasattr(self, '_UndoCommand__initialized') and \
                self.__initialized:
            return

        text = state['_UndoCommand__text']
        parent = state['_UndoCommand__parent']  # type: UndoCommand

        if parent is not None and \
                (not hasattr(parent, '_UndoCommand__initialized') or
                 not parent.__initialized):
            # will be initialized in parent's __setstate__
            if not hasattr(parent, '_UndoCommand__child_states'):
                setattr(parent, '_UndoCommand__child_states', {})
            parent.__child_states[self] = state
            return

        # init must be called on unpickle-time to recreate Qt object
        UndoCommand.__init__(self, text, parent)
        for child in state['_UndoCommand__children']:
            child.__setstate__(self.__child_states[child])

        self.__dict__ = {k: v for k, v in state.items()}

    @staticmethod
    def from_QUndoCommand(qc: QUndoCommand, parent=None):
        if type(qc) == QUndoCommand:
            qc.__class__ = UndoCommand
            qc.__initialized = True

        qc.__parent = parent

        children = [qc.child(i) for i in range(qc.childCount())]
        for child in children:
            UndoCommand.from_QUndoCommand(child, parent=qc)

        return qc 
```

# solr - 为什么实体有时需要“url”参数，有时不需要？

> ID：10422262
> 
> 赞同：0
> 
> 时间：2012-05-02T21:53:59.857
> 
> 标签：solr, dataimporthandler

我正在尝试设置 DataImportHandler 并在尝试进行完全导入时收到此错误：

> 严重：完全导入失败：java.lang.RuntimeException：java.lang.RuntimeException：org.apache.solr.handler.dataimport.DataImportHandlerException：SolrEntityProcessor：需要参数“url”处理文档＃1

我在 solr 附带的示例 data-config.xml 中看到，有时 Entity 有 url 参数，有时没有。如果需要，为什么某些示例没有它？

它在寻找什么 URL？

文档实际上没有将“url”显示为 SqlEntityProcessor 的必需参数

> 对于 SqlEntityProcessor，实体属性为：
> query（必需）：用于查询 db 的 sql 字符串
> deltaQuery：仅用于 delta-import
> parentDeltaQuery：仅用于 delta-import
> deletedPkQuery：仅用于 delta-import
> deltaImportQuery：（仅使用在增量导入中）。如果不存在，DIH 会尝试通过（在识别增量之后）修改“查询”来构造导入查询（这很容易出错）。有一个命名空间 ${dataimporter.delta.} 可以在这个查询中使用。例如：从 tbl 中选择 *，其中 id=${dataimporter.delta.id} Solr1.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:57:34.397

这取决于`EntityProcessor`您使用的具体实现。每个`EntityProcessor`都有自己的实体属性。`SQLEntityProcessor`不需要 url 参数，因为它依赖于[`dataSource`](http://wiki.apache.org/solr/DataImportHandler#DataSource)元素来获取连接到数据库所需的信息，而例如`SolrEntityProcessor`不需要`dataSource`元素但依赖于`url`属性来获取从中导入的 Solr 实例的 url数据。也有不同的`DataSource`实现，如果你看一下[`JdbcDataSource`](http://wiki.apache.org/solr/DataImportHandler#jdbcdatasource)你会发现它需要 url 参数本身。

# php - openssl_seal 问题

> ID：10422268
> 
> 赞同：3
> 
> 时间：2012-05-02T21:54:33.243
> 
> 标签：php, openssl

我在加载公钥以使用 PHP 中的 openssl_seal 函数进行加密时遇到一些问题...

我使用 openSSL 命令行工具创建了公钥和私钥：

```
openssl genrsa -des3 -out private.pem 1024

openssl rsa -in private.pem -out public.pem -outform PEM -pubout 
```

但是，当我在我的 PHP 代码中运行它时，会出现以下错误：

```
openssl_seal() [function.openssl-seal]: Don't know how to get public key from this private key
openssl_seal() [function.openssl-seal]: not a public key (1th member of pubkeys) 
```

当我使用：openssl verify public.pem 验证公钥时，我得到：

```
unable to load certificate
1876:error:0906D06C:PEM routines:PEM_read_bio:no start line:.\crypto\pem\pem_lib
.c:648:Expecting: TRUSTED CERTIFICATE 
```

有谁知道为什么会这样？

PHP代码：

```
public function encrypt($valueToEncrypt, $publicKeyFile)
{
    $pk = file_get_contents($publicKeyFile);
    $publicKey = openssl_pkey_get_public($pk);

    $encrypted = '';
    $a_envelope = array();
    $a_key = array($publicKey);
    if (openssl_seal($valueToEncrypt, $encrypted, $a_envelope, $a_key) === FALSE)
            {
                while ($msg = openssl_error_string())
                    echo $msg . "<br />\n";
                die('Failed to encrypt data!');
            }
            openssl_free_key($publicKey);
.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:26:46.210

对于遇到相同问题的任何人，该问题与在 Windows 上安装 xampp 有关。在全新安装的 php 上运行命令行运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:49:51.210

除了 StuffandBlah 的回答：它实际上与 Windows 上 XAMPP 中的 Apache 和 PHP 中的不同 OpenSSL 版本有关。这是[一篇](https://stackoverflow.com/questions/11399613/issues-with-openssl-on-php-different-behaviour-for-different-versions/11427989#11427989)关于如何解决问题（复制 DLL）的帖子。

# html - 在这种情况下，响应式设计是要走的路吗？

> ID：10422271
> 
> 赞同：0
> 
> 时间：2012-05-02T21:54:40.017
> 
> 标签：html, css, responsive-design

我编写了一个非常复杂的 php 游戏，大约有 40 页。我现在正在设计它。在这种情况下，响应式设计会是正确的选择吗？还有哪些其他选择？也许我应该只制作三种布局（3 种不同的样式表 - 普通、平板电脑和手机）？

由于页面太多，移动所有这些元素似乎是一项荒谬的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T00:14:05.080

从 html/css 的角度来看，创建响应式站点并不难，尽管我不确定您的 php 将如何影响它。实际上，您总是拥有相同的类/ID，并且只需使用媒体查询（在同一张表内）将样式应用于它们。编写 3 张单独的工作表意味着要付出更多的努力，但话又说回来：取决于您的代码。一般来说，诀窍就是要有良好的语义、干净的代码（例如，明智地使用位置）。一开始需要一些时间来组织所有内容，但是一旦您在考虑到响应能力的基础上构建了基础知识，它就会变得非常容易。那 40 页应该都具有相同的结构，对吧？

另一种选择是液体设计。您无需更改样式，而是使用百分比或动态度量。但我强烈推荐网格，你只需要做一次，用不了多久，每个人都会做响应式网站。

但是如果游戏很复杂并且需要进行一些认真的调整，你应该考虑为移动设备做一个完全独立的事情（平板电脑应该很容易适应，你的选择）。这真的取决于产品设计，在 320 像素宽的情况下看起来会非常不同。祝你游戏好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:03:24.410

如果内容在所有设备上都是相同的，并且你想不出一个很好的理由来分叉代码为不同的设备提供不同的内容，那么响应式设计就是要走的路。

# android - 不幸的是，系统 UI 已停止

> ID：10422275
> 
> 赞同：30
> 
> 时间：2012-05-02T21:55:03.317
> 
> 标签：android, android-emulator

每次我在 WXGA800 模式下启动 4.0.3 模拟器时都会收到此消息。我的应用程序在不运行系统 UI 的情况下工作正常，除了操作栏不出现并且我无法测试我的操作栏功能。我的操作系统是 Win7 x64。SDK修订版19。有什么想法吗？ ![系统消息截图](../Images/b3d5e0475606c3a522d9c1afad87ac35.png)

堆栈跟踪：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to create service com.android.systemui.SystemUIService: java.lang.RuntimeException: Tablet device cannot show navigation bar and system bar
at android.app.ActivityThread.handleCreateService(ActivityThread.java:2263)
at android.app.ActivityThread.access$1600(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1201)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.RuntimeException: Tablet device cannot show navigation bar and system bar
at com.android.systemui.statusbar.tablet.TabletStatusBar.makeStatusBarView(TabletStatusBar.java:451)
at com.android.systemui.statusbar.StatusBar.start(StatusBar.java:64)
at com.android.systemui.statusbar.tablet.TabletStatusBar.start(TabletStatusBar.java:390)
at com.android.systemui.SystemUIService.onCreate(SystemUIService.java:93)
at android.app.ActivityThread.handleCreateService(ActivityThread.java:2253) 
```

我想到了。当 hw.mainKeys 在 AVD 设置中设置为 false 时会发生这种情况。感谢您的回答！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T22:20:08.360

您不能同时拥有系统栏和导航栏：

> 原因：java.lang.RuntimeException：平板设备无法显示导航栏和系统栏

这取自[`TabletStatusBar#makeStatusBarView`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/com/android/systemui/statusbar/tablet/TabletStatusBar.java#TabletStatusBar.makeStatusBarView%28%29)注释的来源：

```
 try {
         // Sanity-check that someone hasn't set up the config wrong and asked for a navigation
         // bar on a tablet that has only the system bar
         if (mWindowManager.hasNavigationBar()) {
             throw new RuntimeException(
                     "Tablet device cannot show navigation bar and system bar");
         }
     } catch (RemoteException ex) {
     } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-31T05:13:14.093

将**hw.mainKeys=yes**放入您的 .android->avd->youavdfoldername->config
打开文件并更改 **hw.mainKeys=yes**它对我的工作

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-02T23:08:14.887

也许删除您当前的 AVD 并尝试制作一个新的？有时模拟器只是表现得很时髦（或者您可能输入了错误的设置）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T05:32:02.160

当我第一次开始android开发时，我也遇到了同样的问题。我的系统很旧。它甚至不支持英特尔的 VT 技术。如果您的情况也是如此，请使用旧电脑制作具有小屏幕分辨率的 avd，而不是使用选项卡（Galaxy Nexus）。使用“WQVGA”之类的东西并将 RAM 更改为 1024 MB（如果您的系统大于该值）。然后部署。它对我有用。:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T08:30:04.463

我发布了 Seraph 找到的答案，以便其他人清楚。在 config.ini 文件中设置 hw.mainKeys=yes。在你的开发文件夹中检查它，然后 sdk /.android / avd /（你的 AVD 的名称）

我注意到这个错误只发生在 V.4.0 和 v.4.03 中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-04T04:59:36.607

chage 配置文件在 --> .android->avd->youavdfoldername->config
打开文件并更改
hw.dPad=yes
hw.mainKeys=yes

# php - IOS 向特定用户推送通知？

> ID：10422278
> 
> 赞同：5
> 
> 时间：2012-05-02T21:55:26.007
> 
> 标签：php, iphone, ios, apple-push-notifications

是否可以向特定设备发送 iOS 推送通知？我已经建立了一个论坛类型的应用程序，用户可以创建一个问题，其他人可以回答它。我需要向提出问题的特定用户发送 iOS 推送通知，通知他们问题已得到解答。这可以通过PHP或其他方法完成吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T22:01:13.227

是的，您绝对可以向特定设备发送推送通知。

首先，您需要向设备请求接收推送通知的权限：

```
[[UIApplication sharedApplication]
 registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge |
                                     UIRemoteNotificationTypeSound |
                                     UIRemoteNotificationTypeAlert)]; 
```

然后，如果用户接受，您将收到委托消息 didRegisterForRemoteNotificationsWithDeviceToken。然后，您使用应用程序中的用户 ID 将该 deviceToken 传递到您的服务器，该用户 ID 在您的论坛中识别用户。像这样的东西：

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)_deviceToken {

    NSString* deviceToken = [[[[_deviceToken description]
                            stringByReplacingOccurrencesOfString: @"<" withString: @""] 
                            stringByReplacingOccurrencesOfString: @">" withString: @""] 
                            stringByReplacingOccurrencesOfString: @" " withString: @""];

   //send deviceToken and your userId to your server to associate the two together 
} 
```

然后你需要建立你的推送服务器来发送通知，我不会在这里讨论，因为网上有大量的文档，而且涉及到很多。您还可以为此使用第三方服务，例如 Urban Airship 和 StackMob。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T01:12:13.173

马特乌斯，

tl;博士：是的，你可以。

由于您的论坛应用程序是用 php 编写的，因此这里有一些可能对您有用的框架：

*   [http://www.easyapns.com/](http://www.easyapns.com/)
*   [http://code.google.com/p/apns-php/](http://code.google.com/p/apns-php/)

如果您最终使用 Easy APNS：您可以使用一组用户标识符将消息发送给单个用户（如您的示例中）或一组用户（可能是“观看”该线程的每个人）。这里有很多例子：[https ://github.com/manifestinteractive/easyapns/blob/master/src/php/samples.php](https://github.com/manifestinteractive/easyapns/blob/master/src/php/samples.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T22:01:17.050

当您发送推送通知时，设备会获得一个唯一 ID，您可以使用该 ID 发送给 Apple，告诉他们将消息传递给谁。当您获得此唯一 ID 时，您将其发送到您的服务器，当您这样做时，您可以包含任何其他数据，例如用户名、refs 等。
它更多的是服务器端问题，而不是 iOS 问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T20:28:21.593

当然，有很多免费的推送通知服务器 - 例如[QuickBlox](http://quickblox.com) 您不需要任何服务器代码，QuickBlox 已经为您编写了所有内容。

只需查看[Push Notifications iOS 示例](http://quickblox.com/developers/SimpleSample-messages_users-ios)- 此示例使您可以随时通过 API 或易于使用的管理面板向特定用户或用户组发送通知和警报。只需下载它，将其中的一些代码移至您的应用程序 - 并享受它。

# google-api - 适用于 IOS 的 Google Hangout API

> ID：10422282
> 
> 赞同：3
> 
> 时间：2012-05-02T21:55:41.643
> 
> 标签：google-api, hangout

我一直在寻找 IOS 上使用的 Google Hangout API 的参考。有人告诉我，在过去一周左右的时间里，Google 发布了在 IOS 上运行的环聊 API，但我找不到任何东西……还有其他人听说过这个吗？或者也许它已经存在了一段时间，而我只是没有看到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T14:46:00.700

仅桌面浏览器支持环聊应用（和环聊 API）。您可以通过 iOS Google+ 应用程序在没有应用程序的情况下发起和加入环聊。

# javascript - 序列化没有表单的值

> ID：10422283
> 
> 赞同：0
> 
> 时间：2012-05-02T21:55:44.470
> 
> 标签：javascript, jquery

我正在为 ajax 调用构建数据。我正在使用 jquery。

我的功能（简化）如下。我想在 vname 和 vemail 上使用 jquery serialize()，但似乎你只能在表单 vars 上执行此操作。有没有办法用普通的变量来做到这一点，或者我需要做其他事情来使这些变量对 ajax 调用安全吗？

谢谢

```
function sendEmailNotify(vname, vemail, docID){
       $.ajax({
           type: "POST",
           url: "/servlet/trainingServlet",
           data: ({method: 'ajaxEmailNotify',vname: vname , vemail: vemail }),
           dataType: 'json',
           success: function(data){
               if ( data.success != "OK" ){
                   alert(data.message);
               }
           }
       });

   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T22:05:31.783

`.serialize()`可以在包含一个或多个表单的 jQuery 对象或包含一组特定的单独表单输入元素的 jQuery 对象上调用jQuery函数，并将返回具有所有这些值的 URL 参数字符串。

如果`vname`并且`vemail`在您的代码中引用输入元素，那么您可以创建一个包含这些元素的 jQuery 对象，然后调用`.serialize()`. 但是，如果它们只是简单的值，那么您不需要对它们做任何其他事情。

作为半相关的说明，您不需要在传递给`data`属性的对象周围加上括号 - 我不知道这样做是否会导致问题，但由于它们在那里没有任何意义，您不妨删除他们。

# java - 如何使用对象的相同实例

> ID：10422284
> 
> 赞同：0
> 
> 时间：2012-05-02T21:55:48.460
> 
> 标签：java, singleton, instance

我想知道是否有一种简单的方法可以在 Java 中使用相同的对象实例。

我有一个`MySerial`类，用于通过串行通信（我正在使用 RXTX 库，但它与问题无关）。

让我们假设：

*   有一个带有“连接”按钮的 GUI，单击它会实例化一个 MySerial 对象并连接到串行端口；
*   有一个由线程驱动的执行器类，每两秒通过串行发送一条消息（如果连接可用）；

我希望`MySerial`GUI 中使用的相同实例与`Performer`类中使用的相同。问题是`Performer`GUI 彼此不认识：就像它们是两个独立的程序，所以我不能只传递`MySerial`给构造函数。

我尝试使用 SingleTon 和 ClassLoader，但都没有奏效。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:14:41.473

即使单例模式可以解决您的问题 - 它不是您应该经常使用的东西（不惜一切代价避免它）。**为什么不简单地将引用发送到对象？**如果它太难了，你可能在架构上遇到了一些问题。修复架构——不要避免单例模式的问题，否则你会发现自己陷入了很多混乱！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:02:26.810

似乎单例模式是您所需要的。它实现起来相当简单，不应该产生问题（根据您的描述）例如：

```
public class MySingleton {

    private static MySingleton instance;

    private MySingleton() {}

    public static MySingleton getInstance() {
        if (instance == null)
            instance = new MySingleton();
        return instance;
    }

    private String s = "hello";
    public String getString() {
        return s;
    }

} 
```

来自 GUI / 表演者：

```
String someString = MySingleton.getInstance().getString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T22:32:09.987

如果每个实例都有自己的实例`JVM`（ Windows`java.exe`中的*TaskManager*中的一个），则不能共享`MySerial`. 您需要在两个应用程序的**同一进程中****初始化。**您可以使用o 。**`enum``Singleton`**

 **```
public class Main {
    enum MySerial { ... }
    public static void main(String... args) {
       Performer.main(args);
       GUI.main(args);
    }
} 
```**

# asp.net - 将查询字符串数据传递给 ASP.NET MVC 2 中的模型

> ID：10422288
> 
> 赞同：0
> 
> 时间：2012-05-02T21:55:53.913
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-2, viewdata

我有一个从 POCO 类继承的强类型视图。我想在视图加载时使用 Querystring 值初始化模型的属性。

在 View Load 我使用 ViewData 来保存代码：

```
 public ActionResult Data() { 

    ViewData["QueryStringValue"] = this.Request.QueryString["Param1"]
    return View();

    } 
```

在 HTML 标记中，我使用此代码在隐藏变量中初始化模型属性

```
<%:Html.HiddenFor(m=>m.Param,
Convert.ToInt32(Html.Encode(ViewData["QueryStringValue"]))) %> 
```

m.param 是字节类型。

请求的 URL 有点像这样：[http://TestApp/Data/AddData?Param1=One](http://TestApp/Data/AddData?Param1=One)

在 View Save 事件中，我正在使用模型绑定，但问题是我看不到控制器中初始化的 param 的值。它始终为 NULL。

我的保存事件映射到控制器：

```
[HttpPost]
public ActionResult SaveData(MyData d)
{
string paramValue = d.Param; //this always returns null 
```

BO.保存（d）；}

我检查了 HTML 源代码，发现隐藏字段本身的值是空白的。不知道为什么会发生这种情况，因为下面的代码有效并在标题元素中显示了参数值

```
<h2> <%=Html.Encode(ViewData["QueryStringValue"]) %> </h2> 
```

我不知道我在哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:04:41.737

`ViewData`我认为，您应该将其设置为您的属性值`ViewModel/ Model`并将其传递给您的视图，而不是传递 Querystring 值。

```
public ActionResult Data()
{
  YourViewModel objVm=new YourViewModel();
  objVm.Param=Request.QueryString["Param1"];
  return View(objVm);
} 
```

现在在您的强类型视图中，像这样使用它

```
@model YourViewModel 

@using(Html.BeginForm())
{
  @html.HiddenFor(@m=>m.Param);
  <input type="submit" value="Save" />
} 
```

现在 Param 值将在您的`HttpPost`操作方法中可用

```
[HttpPost]
public ActionResult Data(YourViewModel objVm)
{
  string param=objVm.Param;
  //Do whatever you want with param 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:22:22.760

刚刚完成这项工作，问题出在这一行：

```
 <%:Html.HiddenFor(m=>m.Param,
Convert.ToInt32(Html.Encode(ViewData["QueryStringValue"]))) %>. I stated in the question that m.Param is of type byte. I figured out that issue was with casting. 
```

我尝试了这段代码并且它有效

```
<%:Html.HiddenFor(m => m.Param, (byte)Convert.ToInt16(this.Request.QueryString["Param1"].ToString()))%> 
```

# java - Java 100% CPU

> ID：10422292
> 
> 赞同：1
> 
> 时间：2012-05-02T21:56:10.293
> 
> 标签：java, jstack

我在 jboss 上运行的服务器 (.war) 有时会达到 100% cpu。我使用 jstack 进行了转储，但没有成功看到占用 100% cpu 的指示。jstack -F 不成功，所以我在没有标志的情况下运行它。还有更多的行，但我不能全部发布...

我有一个想法，但不确定这是正确的：可能是因为 0x00002aaab58c0900 上的所有锁定？

还有一些像下面这样的可运行的

```
 "Connect thread 120.18.1.17 session" prio=10 tid=0x00002aaad41ce800 nid=0x604b runnable [0x00000000448d8000..0x00000000448d8b10]
   java.lang.Thread.State: RUNNABLE
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at com.jcraft.jsch.IO.getByte(IO.java:82)
    at com.jcraft.jsch.Session.read(Session.java:821)
    at com.jcraft.jsch.Session.run(Session.java:1241)
    at java.lang.Thread.run(Thread.java:619)

"Thread-28" prio=10 tid=0x00002aaad4e9e400 nid=0x6409 runnable [0x0000000044cdc000..0x0000000044cdcd10]
   java.lang.Thread.State: RUNNABLE
    at com.company.departement.application.infrastruct.SSHAgent.executeCommand(SSHAgent.java:128)
    at com.company.departement.application.server.DataCollector.getcomponentKPIs(DataCollector.java:3345)
    - locked <0x00002aaab58c0900> (a com.company.departement.application.server.DataCollector)
    at com.company.departement.application.server.DataCollector.getAllDataRun(DataCollector.java:2021)
    - locked <0x00002aaab58c0900> (a com.company.departement.application.server.DataCollector)
    - locked <0x00002aaab5e6e768> (a java.lang.Object)
    at com.company.departement.application.server.Initapplication$DataThread.run(Initapplication.java:12) 
```

这是转储的开始

```
2012-05-02 15:02:25
Full thread dump Java HotSpot(TM) 64-Bit Server VM (11.0-b16 mixed mode):

"Attach Listener" daemon prio=10 tid=0x000000005fa00400 nid=0x6f17 waiting on condition [0x0000000000000000..0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"http-0.0.0.0-8180-13" daemon prio=10 tid=0x00002aaadc2c1400 nid=0x277c waiting for monitor entry [0x00000000460ef000..0x00000000460f0a90]
   java.lang.Thread.State: BLOCKED (on object monitor)
    at com.company.departement.application.server.DataCollector.componentKPIsToClient(DataCollector.java:1413)
    - waiting to lock <0x00002aaab58c0900> (a com.company.departement.application.server.DataCollector)
    at com.company.departement.application.server.getComponentKPIsServiceImpl.getComponentKPIs(getComponentKPIsServiceImpl.java:20)
    at sun.reflect.GeneratedMethodAccessor78.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:81)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
    at org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalValve.java:39)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:153)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:59)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:112)
    at java.lang.Thread.run(Thread.java:619)

"http-0.0.0.0-8180-12" daemon prio=10 tid=0x00002aaadc2bf800 nid=0x2663 waiting for monitor entry [0x0000000045fee000..0x0000000045fefa10]
   java.lang.Thread.State: BLOCKED (on object monitor)
    at com.company.departement.application.server.DataCollector.componentKPIsToClient(DataCollector.java:1413)
    - waiting to lock <0x00002aaab58c0900> (a com.company.departement.application.server.DataCollector)
    at com.company.departement.application.server.getComponentKPIsServiceImpl.getComponentKPIs(getComponentKPIsServiceImpl.java:20)
    at sun.reflect.GeneratedMethodAccessor78.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:81)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
    at org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalValve.java:39)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:153)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:59)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:112)
    at java.lang.Thread.run(Thread.java:619)

"http-0.0.0.0-8180-11" daemon prio=10 tid=0x00002aaadc036000 nid=0x25b7 in Object.wait() [0x0000000045eee000..0x0000000045eeeb90]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00002aaab67e1c98> (a org.apache.tomcat.util.net.MasterSlaveWorkerThread)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.await(MasterSlaveWorkerThread.java:81)
    - locked <0x00002aaab67e1c98> (a org.apache.tomcat.util.net.MasterSlaveWorkerThread)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:107)
    at java.lang.Thread.run(Thread.java:619)

"http-0.0.0.0-8180-10" daemon prio=10 tid=0x00002aaadc034800 nid=0x24a8 waiting for monitor entry [0x0000000045dec000..0x0000000045dedb10]
   java.lang.Thread.State: BLOCKED (on object monitor)
    at com.company.departement.application.server.DataCollector.componentKPIsToClient(DataCollector.java:1413)
    - waiting to lock <0x00002aaab58c0900> (a com.company.departement.application.server.DataCollector)
    at com.company.departement.application.server.getComponentKPIsServiceImpl.getComponentKPIs(getComponentKPIsServiceImpl.java:20)
    at sun.reflect.GeneratedMethodAccessor78.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:81)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
    at org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalValve.java:39)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:153)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:59)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:112)
    at java.lang.Thread.run(Thread.java:619)

"http-0.0.0.0-8180-9" daemon prio=10 tid=0x00002aaadc034000 nid=0x244d in Object.wait() [0x0000000045cec000..0x0000000045cecc90]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00002aaab67e3c98> (a org.apache.tomcat.util.net.MasterSlaveWorkerThread)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.await(MasterSlaveWorkerThread.java:81)
    - locked <0x00002aaab67e3c98> (a org.apache.tomcat.util.net.MasterSlaveWorkerThread)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:107)
    at java.lang.Thread.run(Thread.java:619)

"http-0.0.0.0-8180-8" daemon prio=10 tid=0x00002aaadc02e800 nid=0x233e in Object.wait() [0x00000000458e8000..0x00000000458e8c10]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00002aaab67e5c98> (a org.apache.tomcat.util.net.MasterSlaveWorkerThread)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.await(MasterSlaveWorkerThread.java:81)
    - locked <0x00002aaab67e5c98> (a org.apache.tomcat.util.net.MasterSlaveWorkerThread)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:107)
    at java.lang.Thread.run(Thread.java:619)

"http-0.0.0.0-8180-7" daemon prio=10 tid=0x00002aaadc002800 nid=0x6edd in Object.wait() [0x0000000045beb000..0x0000000045bebc90]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00002aaab5e57af8> (a org.apache.tomcat.util.net.MasterSlaveWorkerThread)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.await(MasterSlaveWorkerThread.java:81)
    - locked <0x00002aaab5e57af8> (a org.apache.tomcat.util.net.MasterSlaveWorkerThread)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:107)
    at java.lang.Thread.run(Thread.java:619)

"http-0.0.0.0-8180-6" daemon prio=10 tid=0x00002aaadc000c00 nid=0x6edc in Object.wait() [0x0000000045aea000..0x0000000045aeac10]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00002aaab5e6b0e8> (a org.apache.tomcat.util.net.MasterSlaveWorkerThread)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.await(MasterSlaveWorkerThread.java:81)
    - locked <0x00002aaab5e6b0e8> (a org.apache.tomcat.util.net.MasterSlaveWorkerThread)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:107)
    at java.lang.Thread.run(Thread.java:619)

"http-0.0.0.0-8180-5" daemon prio=10 tid=0x00002aaadc010000 nid=0x6edb waiting for monitor entry [0x00000000459e8000..0x00000000459e9d90]
   java.lang.Thread.State: BLOCKED (on object monitor)
    at com.company.departement.application.server.DataCollector.componentKPIsToClient(DataCollector.java:1413)
    - waiting to lock <0x00002aaab58c0900> (a com.company.departement.application.server.DataCollector)
    at com.company.departement.application.server.getComponentKPIsServiceImpl.getComponentKPIs(getComponentKPIsServiceImpl.java:20)
    at sun.reflect.GeneratedMethodAccessor78.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:81)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
    at org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalValve.java:39)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:153)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:59)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:112)
    at java.lang.Thread.run(Thread.java:619)

"http-0.0.0.0-8180-4" daemon prio=10 tid=0x00002aaadc00ec00 nid=0x6da0 waiting for monitor entry [0x00000000457e6000..0x00000000457e7a90]
   java.lang.Thread.State: BLOCKED (on object monitor)
    at com.company.departement.application.server.DataCollector.componentKPIsToClient(DataCollector.java:1413)
    - waiting to lock <0x00002aaab58c0900> (a com.company.departement.application.server.DataCollector)
    at com.company.departement.application.server.getComponentKPIsServiceImpl.getComponentKPIs(getComponentKPIsServiceImpl.java:20)
    at sun.reflect.GeneratedMethodAccessor78.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:81)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
    at org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalValve.java:39)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:153)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:59)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:112)
    at java.lang.Thread.run(Thread.java:619)

"http-0.0.0.0-8180-3" daemon prio=10 tid=0x00002aaadc026800 nid=0x6d9f waiting for monitor entry [0x0000000041506000..0x0000000041507a10]
   java.lang.Thread.State: BLOCKED (on object monitor)
    at com.company.departement.application.server.DataCollector.componentKPIsToClient(DataCollector.java:1413)
    - waiting to lock <0x00002aaab58c0900> (a com.company.departement.application.server.DataCollector)
    at com.company.departement.application.server.getComponentKPIsServiceImpl.getComponentKPIs(getComponentKPIsServiceImpl.java:20)
    at sun.reflect.GeneratedMethodAccessor78.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:810)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:81)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
    at org.jboss.web.tomcat.security.CustomPrincipalValve.invoke(CustomPrincipalValve.java:39)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:153)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:59)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:112)
    at java.lang.Thread.run(Thread.java:619)

"http-0.0.0.0-8180-2" daemon prio=10 tid=0x00002aaadc026000 nid=0x6d9c in Object.wait() [0x0000000044bdb000..0x0000000044bdbb90]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00002aaab5ef7ac0> (a org.apache.tomcat.util.net.MasterSlaveWorkerThread)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.await(MasterSlaveWorkerThread.java:81)
    - locked <0x00002aaab5ef7ac0> (a org.apache.tomcat.util.net.MasterSlaveWorkerThread)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:107)
    at java.lang.Thread.run(Thread.java:619)

"TP-Monitor" daemon prio=10 tid=0x00002aaad4d84c00 nid=0x6414 in Object.wait() [0x00000000456e6000..0x00000000456e6c90]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00002aaab5e594c0> (a org.apache.tomcat.util.threads.ThreadPool$MonitorRunnable)
    at org.apache.tomcat.util.threads.ThreadPool$MonitorRunnable.run(ThreadPool.java:559)
    - locked <0x00002aaab5e594c0> (a org.apache.tomcat.util.threads.ThreadPool$MonitorRunnable)
    at java.lang.Thread.run(Thread.java:619)

"TP-Processor4" daemon prio=10 tid=0x00002aaad4ffb400 nid=0x6413 runnable [0x00000000455e5000..0x00000000455e5c10]
   java.lang.Thread.State: RUNNABLE
    at java.net.PlainSocketImpl.socketAccept(Native Method)
    at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:384)
    - locked <0x00002aaab5e6eb10> (a java.net.SocksSocketImpl)
    at java.net.ServerSocket.implAccept(ServerSocket.java:453)
    at java.net.ServerSocket.accept(ServerSocket.java:421)
    at org.apache.jk.common.ChannelSocket.accept(ChannelSocket.java:295)
    at org.apache.jk.common.ChannelSocket.acceptConnections(ChannelSocket.java:641)
    at org.apache.jk.common.SocketAcceptor.runIt(ChannelSocket.java:852)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
    at java.lang.Thread.run(Thread.java:619)

"TP-Processor3" daemon prio=10 tid=0x00002aaad4909800 nid=0x6412 in Object.wait() [0x00000000454e4000..0x00000000454e4d90]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00002aaab5e58698> (a org.apache.tomcat.util.threads.ThreadPool$ControlRunnable)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:656)
    - locked <0x00002aaab5e58698> (a org.apache.tomcat.util.threads.ThreadPool$ControlRunnable)
    at java.lang.Thread.run(Thread.java:619)

"TP-Processor2" daemon prio=10 tid=0x00002aaad5147800 nid=0x6411 in Object.wait() [0x00000000453e3000..0x00000000453e3d10]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00002aaab5e58b50> (a org.apache.tomcat.util.threads.ThreadPool$ControlRunnable)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:656)
    - locked <0x00002aaab5e58b50> (a org.apache.tomcat.util.threads.ThreadPool$ControlRunnable)
    at java.lang.Thread.run(Thread.java:619)

"TP-Processor1" daemon prio=10 tid=0x00002aaad5013c00 nid=0x6410 in Object.wait() [0x00000000452e2000..0x00000000452e2a90]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00002aaab5e59008> (a org.apache.tomcat.util.threads.ThreadPool$ControlRunnable)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:656)
    - locked <0x00002aaab5e59008> (a org.apache.tomcat.util.threads.ThreadPool$ControlRunnable)
    at java.lang.Thread.run(Thread.java:619)

"http-0.0.0.0-8180-1" daemon prio=10 tid=0x00002aaadc025400 nid=0x640f in Object.wait() [0x00000000451e1000..0x00000000451e1a10]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00002aaab5f20ee8> (a org.apache.tomcat.util.net.MasterSlaveWorkerThread)
    at java.lang.Object.wait(Object.java:485)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.await(MasterSlaveWorkerThread.java:81)
    - locked <0x00002aaab5f20ee8> (a org.apache.tomcat.util.net.MasterSlaveWorkerThread)
    at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:107)
    at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T00:00:23.983

这里有两个明显的问题。

您有一个卡住或长时间运行的线程阻止其他请求完成。长时间运行的任务 ( `DataCollector.getAllDataRun()`) 正在阻止其他请求完成。您在最初的评估中看到了这一点。这很可能是您的客户端没有得到响应的原因，因为这些新请求正在运行到`Waiting to Lock`getAllDataRun() 创建的锁（查看所有）中。该线程阻塞可能有几个原因。

*   SSHAgent 被阻止，因为它正在长时间访问服务器。正在执行的作业可能需要调整。
*   SSHAgent 连接的主机没有响应，并且您没有配置正确的超时。
*   某些东西被困在一个循环中并且永远不会返回
*   如果这是一个计划中的长期运行作业，您可能希望从 JBoss 服务器中删除它并将其移动到它自己的进程中，这样它就不会干扰其余部分。

第二部分是 100% 的 CPU。等待锁定线程可能没有使用任何 CPU 周期，因为它们等待获得可以继续处理的信号。这里最可能的罪魁祸首是`SSHAgent.executeMethod()`方法。您将希望查看该方法与该`DataCollector.getAllDataRun()`方法一起执行的操作。

如果您在基于 unix 的操作系统上运行它，您可以阅读我在[此处](https://stackoverflow.com/a/6868752/425406)发布的另一个答案。 `prstat`在 Solaris 上或`top`[shift+h when it opens] 在其他基于 unix 的操作系统上，您可以将 CPU 活动分解到 JVM 中的线程 ID，这会给您带来问题。您可以将此信息与您的线程转储配对，以确定究竟是哪一段代码导致了您的问题。

# rspec - FactoryGirl & Mongoid Embedded_in 和 build_list

> ID：10422294
> 
> 赞同：4
> 
> 时间：2012-05-02T21:56:22.733
> 
> 标签：rspec, mongoid, factory-bot

## 问题

好的，所以我遇到的问题是 FactoryGirl 在我的测验中构建嵌入式作业，它使用 mongo 而不是活动记录。我尝试使用与我的活动记录模型一起使用的 build_list，但我在使用 mongoid 时遇到了问题......

我可以调用以下命令并取回 quiz_assignments：

```
@quiznos.quiz_assignments.new(due_at: Time.now+ 1.day, published_at: Time.now) 
```

但是，如果我打电话

```
@quiznos = FactoryGirl.build(:quizWassignments) 
```

@quiznos 将创建一个测验，但 @quiz.quiz_assignments == []

我什至可以运行以下命令并过去

```
@quiz = FactoryGirl.build(:quiz)
@quiznos = FactoryGirl.build(:quiz_assignment, quiz: @quiz)
@quiz.quiz_assignments.should == [@quiznos] 
```

## 问题

有没有办法让它与 :quizWassignments 一起使用？

## 编码

```
class Quiz
  include Mongoid::Document
  include Mongoid::Timestamps
  field :user_id
  field :title
  field :description
  field :assignment_id
  field :due_at, :type => DateTime
  field :published_at, :type => DateTime
  embeds_many :quiz_assignments
end

class QuizAssignment
  include Mongoid::Document
  include Mongoid::Timestamps 
  field :due_at, :type => DateTime
  field :published_at, :type => DateTime
  embedded_in :quiz
  embeds_many :quiz_assignees
  validates_presence_of :due_at, :published_at
  validates_associated :quiz_assignees
end

FactoryGirl.define do
  factory :quiz do
    title { Factory.next(:name) }
    description { Factory.next(:description) }
    quiz_type "Practice"

    factory :quizWassignments do
      ignore do
        count 3
      end
      after_create do |quiz, evaluator|
        FactoryGirl.build_list(:quiz_assignment, evaluator.count, quiz: quiz)
      end
    end
  end

  factory :quiz_assignment do
    due_at Time.now + 1.day
    published_at Time.now
  end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T03:37:44.263

当我第一次从 Active Record 切换到 Mongoid 时，我很难让 Factory Girl 玩得好。我最终切换到了[Fabrication](http://fabricationgem.org/) - 它支持开箱即用的 Mongoid。

# javascript - 电话间隙中的“这个”

> ID：10422298
> 
> 赞同：3
> 
> 时间：2012-05-02T21:56:42.703
> 
> 标签：javascript, cordova, coffeescript, haml, this

phonegap中的“this”是什么？我正在开发一个应用程序，其中包含应用程序的本地 javascript 和从服务器提取的远程 javascript。我正在使用咖啡脚本来生成所有的 javascript。

这两个文件都包含在应用程序的索引头中，通过 haml 生成，如下所示：

```
%script{:src=>"javascripts/file1.js"}
%script{:src=>"http://192.168.5.205:3000/assets/file2.js"} 
```

文件 1.js.coffee：

```
@myObj1 = property: true 
```

文件 2.js.coffee：

```
@myObj2 = property: true 
```

`myObj1`全局可用，可以直接引用`myObj1`，但`myObj2`只能通过 via 获得`document.myObj2`，不能简单引用`myObj2`。怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T22:17:18.293

好吧，如果你这样说：

```
@myObj2 = property: true 
```

并且您必须在其他任何地方引用`myObj2`，然后必须在何时执行。如果您的代码通过或类似方式执行（例如：http: [//jsfiddle.net/ambiguous/6DFK9/](http://jsfiddle.net/ambiguous/6DFK9/)），则可能会发生这种事情。`document.myObj2``this``document``file2.js.coffee``$(document).ready()`

如果您希望某些东西是全球性的，那么您确实应该明确说明并使用`window`：

```
# in file1.js.coffee:
window.myObj1 = property: true

# in file2.js.coffee:
window.myObj2 = property: true 
```

这样您就不必担心调用上下文，更重要的是，您的意图将是明确的，并且`this`当您尝试修复错误时，您不必担心六个月后应该或应该是什么。说出你的意思：如果你想要它是全局的，把它放在`window`.

# php - Zend Framework-CE 安装：如何在共享主机上安装？

> ID：10422308
> 
> 赞同：0
> 
> 时间：2012-05-02T21:58:50.097
> 
> 标签：php, zend-framework

当我尝试将主 Zen 服务器（Deb/RPM 安装程序脚本......为 linux 提供的唯一内容）安装到我的 bluehost 帐户时，我收到此错误：

无法安装：您的发行版不适合使用 Zend 的 DEB/RPM 存储库进行安装。您可以使用通用 tarball 安装程序在大多数 Linux 发行版上安装 Zend Server Community Edition。有关更多信息，请参阅[http://www.zend.com/en/community/zend-server-ce](http://www.zend.com/en/community/zend-server-ce)

最终，它会直接返回到同一个下载页面。我对下一步该怎么做感到困惑。

Bluehost 使用某种版本的 linux 和 PHP 5.2.17

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T01:22:57.670

安装脚本 install_zs.sh 在 /etc/issue 中查找支持的操作系统列表。编辑 install_zs.sh 并将您的操作系统名称（在 /etc/issue 中找到）添加到 SUPPORTED_OS 变量。

例如，Amazon 的 EC2 默认机器映像在 /etc/issue 中有“Amazon Linux AMI”。我的 install_zs.sh 现在看起来像这样。

SUPPORTED_OS='Amazon Linux AMI|CentOS|Red Hat Enterprise Linux Server|Enterprise Linux Enterprise Linux Server|Fedora|SUSE|Debian GNU/Linux|Ubuntu|Oracle Linux Server'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:33:10.167

我也没有看到 tarball 安装程序，也没有看到关于它的最新版本的大量文档。当前的[文档](http://files.zend.com/help/Zend-Server-Community-Edition/zend-server-community-edition.htm#choosing_which_distribution_to_install.htm)没有说明关于非 deb/rpm 安装程序的任何内容，并且对于受支持的操作系统仅显示 debs 或 rpms。他们可能不再提供 tarball 版本，但我不确定。

如果您在共享主机上，您可能能够成功安装 ZendServer-CE，但您将无法运行它，因为 Apache 服务器和 Zend 服务器必须绑定到系统上只有特权用户才能执行的端口。Zend Server 安装自己的 Apache 和 PHP 版本，以及管理这些实例的 Zend Server 管理器。这样的软件只能由系统上的root用户运行，我猜你的共享帐户不是。

但是，您可以在本地机器上安装 ZS-CE，或者您可以从[Zend Studio 下载](http://www.zend.com/en/products/studio/downloads)页面下载虚拟开发服务器。我相信虚拟开发服务器预装了 Zend Server CE 和 Zend Studio。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T17:51:06.147

Zend 安装脚本正在搜索 /etc/issue 以获取有效操作系统的列表。您可以将“CentOS”（或其他内容）添加到 /etc/issue 或注释掉安装脚本中的检查。

# ios - 移动 Safari 中的定位服务：不允许保存...永远？即使重置

> ID：10422322
> 
> 赞同：41
> 
> 时间：2012-05-02T22:01:17.703
> 
> 标签：ios, geolocation, mobile-safari

在我开始测试“不允许”用例之前，我使用位置服务的 Web 应用程序运行良好。现在 iPhone 拒绝允许定位服务，即使我回答“确定”到“Safari”想使用您当前的位置。

重现... 在 iOS 5.1 上使用 iPhone：

1.  加载进行定位服务调用的网页（如[http://smithsrus.com/geo.html](http://smithsrus.com/geo.html)）
2.  出现用户权限提示时回答“不允许”。
3.  重新加载页面并再回答“不允许”2 次。
4.  重新加载页面并在没有提示的情况下查看“用户被拒绝”。
5.  转到“设置->常规->重置->重置位置警告”，然后点击“重置警告”。
6.  返回 Safari，重新加载页面，现在看到用户权限提示。
7.  即使您回答“OK”，网页仍然会被拒绝。

我杀死并重新启动 Safari，删除所有网站数据，打开和关闭定位服务，甚至重新启动，即使我说我想要，Safari 仍然拒绝实际允许定位服务。

完成这些步骤后，该 Web 域就不再适用于位置服务了。我用完了要测试的域

我搜索了许多 StackOverflow、Apple Developer 和其他网站的答案。但这对我来说确实像是一个错误。用“允许”回答提示但被拒绝一定是一个错误。回答“允许”后，位置服务图标会短暂出现在屏幕顶部，但随后消失，在“位置服务”设置中，Safari 会出现“开启”和旁边的灰色图标。

在尝试了重置位置警告、打开和关闭位置服务以及关闭并重新启动浏览器的组合之后，我确实设法得到了一个新错误：
“操作无法完成。（kCLErrorDomain 错误 1。）”听起来有问题。

我宁愿这是我正在做的愚蠢的事情，有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-21T18:09:38.773

在放弃并认为没有解决方案之后，我得到了它。通过执行以下操作，我设法在 iPhone 4s 上分享了我的位置：

转到**Settings -> General**，滚动到底部并转到**Reset-> Reset Location & Privacy**。

下次我打开我的网络应用程序来测试它的用户位置功能时，它就像一个魅力。希望这对所有遇到此问题的人有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-19T08:59:55.220

以下步骤为我解决了这个问题：

1.  在相关域打开的情况下关闭 safari 中的所有选项卡。
2.  关闭 Safari（按住主页按钮并划掉）。
3.  设置 -> 常规 -> 重置 -> 重置位置警告/重​​置位置和隐私。
4.  打开 Safari 并重试。

诀窍（与马克的答案相比）是确保您完全关闭 Safari。当我按照马克的回答时，我的提示重新出现在 Safari 本身，但不是我的域。关闭 Safari 然后按照标记的回答后，我收到 2 个连续提示，首先是 Safari，然后是我的域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:59:30.760

由于反复点击“不允许”选项，我遇到了同样的问题。

我在 iPad 2 中解决此问题的方法是进入“设置 > 常规 > 限制”，然后启用限制（必须输入密码）。从那里我进入“允许更改”部分下的“位置”并选中“允许更改”并确保所有列出的应用程序的位置服务都已打开。这似乎为我重置了它。之后，我可以返回“常规 > 限制”并再次禁用限制。

希望这对你有帮助！

# jquery - jquery顺时针移动元素

> ID：10422331
> 
> 赞同：0
> 
> 时间：2012-05-02T22:02:30.643
> 
> 标签：jquery, html

我对 jquery 非常陌生，我写了一个页面，其中有一个容器，中心有一个正方形，周围有 4 个矩形 - 每个都有另一种颜色。我想做的是用动画顺时针移动它们我只需要一些指导..因为我不知道如何在 jquery 中旋转元素或知道如何更改正确的位置...

有什么想法吗？（我不知道我是否真的需要轮换）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:33:21.733

假设您要旋转所有元素，请检查此小提琴：

[http://jsfiddle.net/zuul/VBN5W/3/](http://jsfiddle.net/zuul/VBN5W/3/)

请注意，使用背景颜色可以更好地直观地表示正在运行的瓦数！

**编辑：**

现在只有数字元素旋转的版本：

[http://jsfiddle.net/zuul/VBN5W/4/](http://jsfiddle.net/zuul/VBN5W/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:09:46.910

将四个矩形放在一个 div 中，每个内部矩形绑定到边缘，然后使用[jQuery-Rotate 旋转](http://code.google.com/p/jquery-rotate/)容器。

# python - 在 python 模块中声明类

> ID：10422333
> 
> 赞同：1
> 
> 时间：2012-05-02T22:02:37.020
> 
> 标签：python

我有一个我制作的 python 模块，其中包含常规函数定义和类。出于某种原因，当我调用构造函数并传递一个值时，它并没有更新类变量。

我的模块称为 VODControl (VODControl.py)。我在模块中声明的类称为 DRMPath。DRMPath 类有两个实例变量：日志文件和结果。logfile 是一个字符串， results 是一个字典。

我的构造函数如下所示：

```
def __init__(self, file):
    self.logilfe = file
    self.results['GbE1'] = ""
    self.results['GbE2'] = ""
    self.results['NetCrypt'] = ""
    self.results['QAM'] = "" 
```

当我从我的其他 python 脚本中导入它时，我会这样做：

```
import VODControl 
```

我使用的电话如下：

```
d = VODControl.DRMPath('/tmp/adk.log') 
```

但是，当我打印 logfile 实例变量的值时，它不会使用我传递给构造函数的内容进行更新：

```
print d.logfile 
```

打印后，它仍然是一个空字符串。是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:04:17.083

`self.logilfe = file` is not the same as `self.logfile = file` In addition, it is likely returning `None`, not an empty string.

# file - 我想做一个简单的批处理文件

> ID：10422335
> 
> 赞同：1
> 
> 时间：2012-05-02T22:02:37.320
> 
> 标签：file, batch-file, minecraft

这将打开 Minecraft.exe，并在单击时登录。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:06:06.310

嗯，这是你想要的吗？它应该工作：

```
@echo off
"%cd%\minecraft.exe" username password serverip 
```

根据自己的喜好编辑用户名、密码和 ip。

* * *

我认为更好的解决方案：

只是想通了，但是批处理文件不起作用；当设置为快捷方式时！所以创建一个新的快捷方式并为路径使用这个：

格式：

```
"<FilePath>" <username> <password> <server> 
```

例子：

```
"C:\Program Files\Minecraft\Minecraft.exe" bobjones passchuck 123.123.123.123 
```

希望这对你有用，比沐浴文件 IMO 简单得多。

此外，如果您不包含 IP，它只会登录到我的世界。停在标题画面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:04:10.280

[http://www.minecraftwiki.net/wiki/Tutorials/Setting_up_a_server#Start_the_Minecraft_Server_.28.jar_version.29](http://www.minecraftwiki.net/wiki/Tutorials/Setting_up_a_server#Start_the_Minecraft_Server_.28.jar_version.29)

要在 Windows 上启动 jar 版本的 Minecraft，请在记事本中创建一个新文件，然后粘贴 java -Xms512M -Xmx1G -jar minecraft_server.jar 将文件另存为 startserver.bat，并将文件放在与 minecraft_server.jar 相同的文件夹中. .bat 扩展名将文件保存为批处理文件。

# cakephp - afterFind() + paginate = CakePHP 中的错误

> ID：10422339
> 
> 赞同：0
> 
> 时间：2012-05-02T22:03:14.437
> 
> 标签：cakephp, pagination

所以我在模型的 afterFind 中运行了一个简单的函数：

```
 public function afterFind($results) {
        foreach ($results as $key => $val) {
            if ($val['User']['password']) {
                $results[$key]['User']['status'] = 'active';
            } else if ($val['Ticket']['id']) {
                $results[$key]['User']['status'] = 'pending';
            } else {
                $results[$key]['User']['status'] = 'inactive';
            }
        }
        return $results;
    } 
```

它给了我两个错误，即使定义了这些变量，并且页面正在正常呈现（除了错误）：

```
Notice (8): Undefined index: User [APP/Model/User.php, line 145]

Notice (8): Undefined index: Ticket [APP/Model/User.php, line 147] 
```

当我 die() 未分页的结果时，一切都很好......当我 die() 分页的结果时，即使所有数据都是相同的，我仍然会收到这些错误。

是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T05:42:55.480

您需要检查密钥是否已设置。当分页执行 )` 查询时，它可能会失败，而`find('count`返回的唯一值是计数。

像这样的支票`isset($results[$key]['User']['password'])`应该可以解决问题。

# sitecore - 扩展 Sitecore 用户配置文件 - 我可以使用哪些字段类型？

> ID：10422341
> 
> 赞同：0
> 
> 时间：2012-05-02T22:03:23.807
> 
> 标签：sitecore, sitecore6

我在 Sitecore 6.4.1 中创建了一个自定义用户配置文件，并尝试向用户配置文件添加一个基本下拉列表。似乎无论我将哪种类型的字段添加到用户配置文件中，它都会在“编辑用户”对话框中呈现为纯文本字段。是否对用户个人资料有限制，或者我需要使用其他方法来允许内容编辑者选择要与用户个人资料关联的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:31:03.063

用户管理器无法正确呈现所有字段类型。如果可能，您应该坚持使用单行文本值，并避免使用用户管理器界面来编辑信息本身。更多地将其用作自定义数据存储。

**编辑**：作为参考，我已经使用此功能和扩展配置文件，其中包含简单字段，用于使用 Sitecore 的基于登录的系统。我们的网站允许用户注册一个帐户，从而在核心数据库中创建具有“扩展配置文件”的外网用户。当这些用户登录到前端访问他们的前端站点上的个人资料页面时，他们可以编辑基本数据，如姓名、地址等。我将这些基本数据点存储在自定义个人资料 SLT 字段中，所以它仅用作数据存储。没有人真正从 Sitecore shell 的用户管理器中编辑内容。

# android - 要设置哪个xml属性来禁用android seekbar

> ID：10422345
> 
> 赞同：6
> 
> 时间：2012-05-02T22:03:28.247
> 
> 标签：android, android-layout, android-widget, android-ui, seekbar

请帮助我通过 xml 文件而不是通过代码禁用搜索栏

```
<SeekBar
    ........
    android:clickable="false"
    android:longClickable="false"
    android:focusable="false"
    android:focusableInTouchMode="false" /> 
```

已尝试使用上述所有属性，但无法禁用搜索栏。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T22:09:53.437

简单的：

```
android:enabled="false" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-09T16:35:39.260

正如[这个答案](https://stackoverflow.com/a/27779040/3819411)所说，您可以覆盖对象`setOnTouchListener`上的事件`SeekBar`并返回`true`不允许用户更改控制值。我希望这有帮助 ;）

# php - jQuery UI 自动完成和 CodeIgniter

> ID：10422347
> 
> 赞同：0
> 
> 时间：2012-05-02T22:04:09.643
> 
> 标签：php, jquery, codeigniter

我正在尝试使用 jQuery UI 和 CodeIgniter 2 实现一个简单的自动完成脚本，但我的模型一直告诉我有一个未定义的变量，所以我不知道我的设置是否正确。

我的观点

```
$(function() {
   $("#txtUserSuburb").autocomplete({
      source: function(request, response){
         $.ajax({ 
            url: "autocomplete/suggestions",
            data: { 
               term: $("#txtUserSuburb").val()
            },
            dataType: "json",
            type: "POST",
            success: function(data){
               response(data);
            }
         });
      },
      minLength: 2
   });
}); 
```

我的控制器

```
function suggestions(){
   $this->load->model('autocomplete_model');
   $term = $this->input->post('term', TRUE);
   $rows = $this->autocomplete_model->getAutocomplete($term);
   echo json_encode($rows);
} 
```

我的模特

```
function getAutocomplete() {
   $this->db->like('postcode', $term, 'after'); 
   $query = $this->db->get('tbl_postcode');
   $keywords = array();
   foreach($query->result() as $row){
      array_push($keywords, $row->postcode);
   }        
   return $keywords;
} 
```

除了似乎没有将 $term 变量传递给模型之外，没有任何错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T22:13:31.167

是的，我认为你需要 getAutocomplete() 有一个参数“$term”：

```
function getAutocomplete($term) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-19T05:07:37.560

更改 Ajax 中的 post 值

```
$(function() {
  $("#txtUserSuburb").autocomplete({
      source: function(request, response){
         $.ajax({ 
            url: "autocomplete/suggestions",
            data: { 
               term: request.term //change post value
            },
            dataType: "json",
            type: "POST",
            success: function(data){
               response(data);
            }
         });
      },
      minLength: 2
   });
}); 
```

在控制器中将页眉设置为 JSON

```
function suggestions(){
   $this->load->model('autocomplete_model');
   $term = $this->input->post('term', TRUE);
   $rows = $this->autocomplete_model->getAutocomplete($term);
   $this->output
        ->set_content_type('application/json')
        ->set_output(json_encode($rows));
} 
```

# .net - 关闭 Excel 数据透视表小计 VB.NET

> ID：10422349
> 
> 赞同：1
> 
> 时间：2012-05-02T22:04:11.527
> 
> 标签：.net, vb.net, excel

我在 VB.NET 中创建数据透视表并遇到了一个我认为不会像结果那样困难的问题。当我创建一个数据透视表时，它会为每一行添加小计，我不希望这样。在 excel 中，您只需向下拖动小计选项并告诉它不显示小计。我查看了它的 VBA，这种格式有几行：

```
 ActiveSheet.PivotTables("Main Highway Pivot").PivotFields("Division"). _
    Subtotals = Array(False, False, False, False, False, False, False, False, False, False, _
    False, False) 
```

这是数量惊人的代码，但这很好，所以我一直在尝试与我在 VB.NET 中的数据透视表类似的东西

```
With ptTable
.ManualUpdate = True
.PivotFields("Division").orientation = Excel.XlPivotFieldOrientation.xlRowField
.PivotFields("Net Sales Amt").orientation = Excel.XlPivotFieldOrientation.xlDataField
.PivotFields("Division").Subtotals = false
.ColumnGrand = False
.RowGrand = True
.ManualUpdate = False
End With 
```

我尝试了几种不同的变体

```
 .PivotFields("Division").Subtotals = false 
```

行，但运气不佳。这是正确的代码，我指定的错误部分是错误的吗？为什么没有

```
.subtotal = false 
```

让这更容易？

无论如何，这对我来说似乎很简单，但经过一番挖掘后，我不知道如何解决它，所以任何帮助将不胜感激。

一如既往地谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T22:51:36.987

这是 VBA 的片段（来自[http://www.pcreview.co.uk/forums/hide-subtotals-rowfields-pivot-table-t974940.html](http://www.pcreview.co.uk/forums/hide-subtotals-rowfields-pivot-table-t974940.html)）可能会有所帮助：

```
'=========================
Sub NoSubtotals()
'turns off subtotals in pivot table
'.PivotFields could be changed to
'.RowFields or .ColumnFields
Dim pt As PivotTable
Dim pf As PivotField
On Error Resume Next
For Each pt In ActiveSheet.PivotTables
For Each pf In pt.PivotFields
'First, set index 1 (Automatic) to True,
'so all other values are set to False
pf.Subtotals(1) = True
pf.Subtotals(1) = False
Next pf
Next pt
End Sub
'======================== 
```

# objective-c - 使用 ARC，静态 const 数组的值是否自动分配为零？

> ID：10422350
> 
> 赞同：2
> 
> 时间：2012-05-02T22:04:12.183
> 
> 标签：objective-c, automatic-ref-counting

在 ARC 下，我知道“堆栈变量是用 nil 初始化的”（[文档](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-%20TransitioningToARC/Introduction/Introduction.html)）。静态常量数组的值呢？这是有道理的，但我找不到官方的说法。例如：

```
static NSString * const strings[5] = {
    [2] = @"value2",
    [4] = @"value3",
}; 
```

会`strings[3]`==`nil`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T22:06:29.057

不管 ARC 是什么，根据 C 语言的定义，静态变量分配为 NULL/nil/0。

# twitter - 重复框混乱的网站上的 twitter 提要

> ID：10422352
> 
> 赞同：0
> 
> 时间：2012-05-02T22:04:17.003
> 
> 标签：twitter, web, repeat

我的网站上有一个 twitter 提要，我试图把它放在一个盒子里，该盒子有一个顶部、一个中间部分，根据需要重复以容纳文本和底部图像以及底部下方的图像。问题是最初提要在一个没有重复的盒子里，或者提要只是在盒子的顶部，但现在我无法正确设置盒子或提要来做这件事。这是我的代码：

```
#twitter_update_list {
overflow: hidden;
font-family:Arial, Helvetica, sans-serif;
font-size: 12px;
color: #FFFFFF;
line-height: 20px;
padding-top: 0;
padding-right: 0;
padding-bottom: 0;
padding-left: 0;
}

#twitter_update_list li {
font-family:Arial, Helvetica, sans-serif;
color:#000000;
list-style: none;
}

#twitter_update_list li a {
color:#f7f6e7;
text-decoration: none;
}

#twitter_update_list li a:hover {
border-bottom-width: 1px;
border-bottom-style: dotted;
border-bottom-color: #f7f6e7;
}

.twitter_top {
position:absolute;
left:632px;
top: 39px;
    width: 333px;
    height: 27px;
    background:url(twittertop.png);
}

.twitter_mid {
width: 333px;
background:url(twittermiddle.png);
background-repeat:repeat-y;
padding: 0 15px;
}

.twitter_bot {
width: 333px;
height: 27px;
background:url(twitterbottom.png);
background-repeat:no-repeat;
margin-bottom: 0px;
}

    .twitter_whale {
    width: 140px;
    height: 67px;
    left: 900px;
    background-image: url(Layer-6.png) no-repeat;
    position: absolute;
    left: 9px;
    top: 9px;
    line-height: 13px;
    }

<div class="twitter_top"></div>
<div class="twitter_mid">
<ul id="twitter_update_list"></ul>
</div>
<div class="twitter_bot"></div>
<div class="twitter_whale">

    <div id="twitter_div"><ul id="twitter_update_list"><li></li></ul></div>

(update list i'm not putting in here because it's just the js)
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:21:15.220

```
<div id="twitter_box">
  <div id="twitter_top">
  </div>

  <div id="twitter_middle">
  </div>

  <div id="twitter_bottom">
  </div>
</div> 
```

我认为将它们全部包含在一个 div 中会更有意义，从这里你可以设置你的样式，因为你希望中间部分扩展离开高度动态。

# desire2learn - 用于在 Desire2Learn 中更改用户角色的 API

> ID：10422354
> 
> 赞同：0
> 
> 时间：2012-05-02T22:04:18.257
> 
> 标签：desire2learn

在[用户 api 文档](http://docs.valence.desire2learn.com/res/user.html)中提到要在组织级别更改用户的角色，我们需要使用模式“PUT /d2l/api/lp/(D2LVERSION: version)/users/(D2LID: userId)”这需要 UpdateUserData JSON 块作为输入，但 UpdateUserData JSON 块中没有角色 ID。那么，我们将如何传递用户的新角色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:05:15.497

角色适用于组织中的特定级别，因此不是用户的固有属性，而是用户与组织或用户与组织单位（部门、课程等）之间关系的属性。

因此，您可以在 org 级别删除然后创建用户的注册。[（通过org info call](http://docs.valence.desire2learn.com/res/orgunit.html#get--d2l-api-lp-%28D2LVERSION-version%29-organization-info)检索组织级别的 ID ）

[删除注册](http://docs.valence.desire2learn.com/res/enroll.html#delete--d2l-api-lp-%28D2LVERSION-version%29-enrollments-orgUnits-%28D2LID-orgUnitId%29-users-%28D2LID-userId%29)的操作在注册页面。并且创建注册的操作在同一页面上。

但是，用户在组织级别没有注册并不典型（例如，如果删除和创建之间存在连接中断，则不清楚未在组织中注册的状态意​​味着什么）

我不确定这是否适合您的应用程序，但是，比在组织级别添加和删除注册更典型的是在特定组织级别添加和删除它们。这样，用户始终在组织中存在，但是，您可以通过该组织单位管理权限。

# c# - Regex.IsMatch() 不识别转义序列？

> ID：10422355
> 
> 赞同：2
> 
> 时间：2012-05-02T22:04:28.430
> 
> 标签：c#, regex

我正在对一些转义字符串进行匹配比较：

```
Regex.IsMatch("\\Application.evtx", "DebugLogs\\ConfigurationServices.log"); 
```

我不明白为什么我得到：

> “解析“DebugLogs\ConfigurationServices.log” - 无法识别的转义序列 \C。”

`\C`逃跑了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T08:10:39.720

编辑真的骗了很多人，包括我！

'\' 是正则表达式中的一个特殊字符——它[实际上是一个转义字符或表示一个转义序列](http://www.regular-expressions.info/reference.html)。

因此，RegEx 引擎会看到 DebugLogs* *\C* *onfigurationServices.log，这实际上是一个无法识别的转义序列。\A 实际上是一个现有的转义序列。

所以你需要转义转义字符。最简单的方法是将使用的斜杠数量加倍：

```
Regex.IsMatch("\\\\Application.evtx", "DebugLogs\\\\ConfigurationServices.log"); 
```

RegEx 引擎将其视为“\\Appplication.evtx”和“DebugLogs\\ConfigurationServices.log”之间的比较 - 现在反斜杠已被转义并且没有特殊含义。

```
Regex.IsMatch(@"\\Application.evtx", @"DebugLogs\\ConfigurationServices.log"); 
```

也可以正常工作并且更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:07:51.347

该`\`字符是字符串中的转义字符。例如，如果您想要回车，您可以使用`\r`. 为了解决这个问题，要么使用文字字符串

```
@"\Application.evtx" 
```

或转义转义字符

```
"\\Application.evtx" 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-02T22:08:26.977

你可能想要

```
Regex.IsMatch(@"\Application.evtx", @"DebugLogs\ConfigurationServices.log"); 
```

如果没有“@”，C# 会将 \C 视为转义序列，类似于将 \n 转换为换行符的方式，但是 \C 不是公认/有效的转义序列。

# c++ - 正确使用 for 循环

> ID：10422356
> 
> 赞同：3
> 
> 时间：2012-05-02T22:04:37.883
> 
> 标签：c++, loops, for-loop

我现在正在学习 c++ 课程，我知道 for 循环会像这样工作，但我想知道它是“正常”还是“正确”

```
for (int i = 0; getline(cin, input); i++) 
```

这应该是

```
int i = 0;
while (getline(cin, input))
    i++; 
```

我只是想知道，因为我知道 for 循环应该是一个计数器循环，但这个循环的条件与 i 控制的次数无关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T22:08:13.817

是的，for 循环的规则非常简单。只要你符合规则，语法可以是任何你想要的。

在两者中，只需选择您认为最易读的一个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T22:09:43.213

严格来说，没有“正确”的方式来编写`for`循环：可以将三个部分的任意组合留空（实际上，K&R 建议将三个部分都留空以实现“永远”循环），并且没有硬性具有停止条件的要求取决于循环计数器。

`for`循环优于循环的一个优点`while`是您可以`continue`在体内自由使用，而不必担心忘记增加计数器。这可能有助于具有大量嵌入式`continue`语句的循环的可读性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T22:10:13.793

很好，但就**风格**而言，我更喜欢`while`循环。

for 循环一般用于有界迭代，在这种情况下你可以提前知道迭代的次数，而 while 循环用于更一般的情况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T22:10:57.053

两者的工作方式相同。然而，这不仅仅关乎他们做了什么，还关乎如何让“人类”更容易理解代码。

您可以将您的源代码视为详细的文档，讨论如何执行特定任务。实际上如此详细，以至于即使是编译器，即愚蠢的机器，也可以理解它。换句话说，你为其他人编写代码，编译成机器代码是一个令人愉快的副作用。

考虑到这一点，以令人惊讶的方式使用句法结构并不是最好的主意。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T22:10:49.460

他们都工作。

声明是大多数人会写的`while`方式，而且很容易理解。该`for`声明略短一些，但大多数人不得不看两次才能理解它在做什么。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-02T22:20:14.253

虽然我通常不会认为`for`循环仅限于具有预先指定边界的计数循环，但我*通常*会认为它是`increment`循环的一部分直接参与循环完成的循环。

举个例子，我认为遍历一个链表是完全合理的，比如：

```
for (ptr = list_head; ptr != NULL; ptr = ptr->next)
    process(ptr->data); 
```

# continuous-integration - 詹金斯/哈德逊构建错误

> ID：10422362
> 
> 赞同：0
> 
> 时间：2012-05-02T22:05:13.437
> 
> 标签：continuous-integration, hudson, jenkins

由于以下原因，我的构建集成失败：

```
ERROR: Publisher hudson.plugins.pmd.PmdPublisher aborted due to exception
java.lang.NullPointerException: Name is null
    at java.lang.Enum.valueOf(Enum.java:213)
    at hudson.plugins.analysis.util.model.Priority.valueOf(Priority.java:18)
    at hudson.plugins.analysis.core.HealthAwarePublisher.getMinimumPriority(HealthAwarePublisher.java:622)
    at hudson.plugins.analysis.core.AbstractHealthDescriptor.<init>(AbstractHealthDescriptor.java:36)
    at hudson.plugins.pmd.PmdHealthDescriptor.<init>(PmdHealthDescriptor.java:25)
    at hudson.plugins.pmd.PmdResultAction.<init>(PmdResultAction.java:31)
    at hudson.plugins.pmd.PmdPublisher.perform(PmdPublisher.java:138)
    at hudson.plugins.analysis.core.HealthAwarePublisher.perform(HealthAwarePublisher.java:338)
    at hudson.tasks.BuildStepMonitor$2.perform(BuildStepMonitor.java:27)
    at hudson.model.AbstractBuild$AbstractRunner.perform(AbstractBuild.java:705)
    at hudson.model.AbstractBuild$AbstractRunner.performAllBuildSteps(AbstractBuild.java:680)
    at hudson.model.AbstractBuild$AbstractRunner.performAllBuildSteps(AbstractBuild.java:658)
    at hudson.model.Build$RunnerImpl.post2(Build.java:162)
    at hudson.model.AbstractBuild$AbstractRunner.post(AbstractBuild.java:627)
    at hudson.model.Run.run(Run.java:1459)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:239)
[ANALYSIS-COLLECTOR] Skipping publisher since build result is FAILURE 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:12:26.193

看起来您在作业配置中选中了“发布 PMD 分析结果”，但 Jenkins 找不到包含分析结果的文件。

# ios - iOS - 视网膜显示资产不工作？

> ID：10422363
> 
> 赞同：10
> 
> 时间：2012-05-02T22:05:13.560
> 
> 标签：ios, retina-display

我在 iPhone 4 上运行我的应用程序，导航栏和我的所有标签都非常模糊（非视网膜）。大多数模糊的 ui 元素是 iOS 默认 UI。

当我在手机上运行其他应用程序时，它们看起来好多了，你可以很容易地看到差异。

为了在我的应用程序中使用更高质量的资产，我是否需要更改任何项目设置？

**编辑：**

我不关心自己的资产，我现在关心的是**IOS中的DEFAULT UI ELEMENTS**

**编辑：**

我在主 UINavigationController 中添加了一个阴影，为了提高阴影动画的性能，我将 ShouldRasterize 设置为 YES，删除这行 xode 可以解决问题

```
[self.navigationController.view.layer setShouldRasterize:YES]; 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-02T23:31:02.073

如果你设置了应该光栅化你必须记住设置你的光栅化比例。

```
[self.view.layer setShouldRasterize:YES];
[self.view.layer setRasterizationScale:[UIScreen mainScreen].scale]; 
```

您必须记住，光栅化将图层转换为存储在内存中的简单位图，以在复杂动画期间节省 CPU 周期。但是，如果您使用的是 Retina 设备，则需要确保以两倍的比例保存它，因为屏幕的像素是 4 倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:07:57.607

您是否制作了带有@2x 后缀的双倍尺寸图像？

例如 navBarBackground.png & navBarBackground@2x.png （最后一个是第一个的两倍）

[http://developer.apple.com/library/ios/DOCUMENTATION/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW16](http://developer.apple.com/library/ios/DOCUMENTATION/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW16)

# ruby-on-rails - 如何在视图中按变量排序数组

> ID：10422365
> 
> 赞同：3
> 
> 时间：2012-05-02T22:05:21.017
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

第一篇 StackOverFlow 帖子，请耐心等待 :)

所以我有一个帖子模型，它与投票模型具有多态关联。

我的主要问题是按最高票数对每个帖子进行排序。我正在尝试实施 Upvote 系统。问题：**我如何按最高票排序帖子？（@全部的）**

看来我的视图中有代码（@upcount、@downcount、@total），我的控制器中可能有这些代码，但我不知道该怎么做。

理想情况下，我想在社区行动中做这样的事情： Post.order("@total") 但显然这行不通。

后模型

```
class Post < ActiveRecord::Base 
belongs_to :user
has_many :votes, :as => :votable 
```

投票模式：

```
t.integer  "upvote"
t.integer  "downvote"
t.string   "votable_type"
t.integer  "votable_id"
t.integer  "user_id" 
```

后控制器：

```
def community
@post = @votable = Post.all
end 
```

在“我的视图”页面中（这就是事情变得棘手的地方）：

```
 <% @post.each do |post| %>
<div class="eachpostrate">
<% if signed_in? then %>
  <%= form_for [post, Vote.new] do |f| %>
    <%= f.hidden_field :downvote, :value => "0" %>
     <%= f.hidden_field :upvote, :value => "1" %>
     <%= f.submit "8", :class => "upvotethumbup" %>
       <% end %>
    <% if post.votes.empty? then %>
    <span class="upvotecount">
           <p> 0 </p>
      </span>
      <% else %>
      <% @upcount = [] %>
      <% @downcount = [] %>
      <span class="upvotecount">
      <p>
           <% post.votes.each do |vote| %>
           <% @upcount << vote.upvote %>
           <% @downcount << vote.downvote %>
           <% end %>
           <% @total = @upcount.sum - @downcount.sum %>
          <%= @total %>  
            </p>
    </span>
    <% end %> 
```

**我使用 nilbus 提供**的说明解决了这个问题，除了将 score 方法放在我的 Post 模型中而不是 Vote 模型中

```
 def score 
self.votes.upvotes.count - self.votes.downvotes.count 
  end 
```

否则，我的帖子现在是根据 Upvote 排序的！感谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T22:25:41.800

您应该计算 Post 模型中的赞成票、反对票和总数。一般来说，尽量在模型中而不是视图中放置尽可能多的与模型相关的代码和逻辑。这样您也可以在其他视图中再次使用它，并且它的分组更合乎逻辑。

特别是在这种情况下，您需要使用模型关联提供的方法以及范围。

```
class Vote < ActiveRecord::Base
  scope :upvotes, where(:upvote => 1)
  scope :downvotes, where(:downvote => 1)
end 
```

使用这些范围，您可以相当轻松地计算每个帖子的投票数。

```
upvotes = post.votes.upvotes.count
downvotes = post.votes.downvotes.count
total = post.votes.count 
```

您可以通过从赞成票中减去反对票来计算投票的分数。

```
class Vote < ActiveRecord::Base
  def score
    upvotes.count - downvotes.count
  end
end 
```

然后，您可以使用该分数对您的帖子进行排序，然后像在您的视图中一样遍历它们。

```
@posts = @posts.sort_by(&:score) 
```

为了获得最佳性能，最好在首次加载帖子时包含所有投票。为此，您可以`include`在控制器中使用。否则，在计算分数时，它必须执行额外的查询来查找投票。

```
def community
  @post = @votable = Post.includes(:votes).all
end 
```

顺便说一句-您创建两个具有相同内容的变量（@post 和@votable）的原因是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:18:45.647

```
posts.sort {|x, y| (x.votes.collect(&:upvote).size - x.votes.collect(&:downvote).size) <=> (y.votes.collect(&:upvote).size - y.votes.collect(&:downvote).size) } 
```

# ruby-on-rails - Rails 对象属性混淆

> ID：10422366
> 
> 赞同：0
> 
> 时间：2012-05-02T22:05:28.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的 Rails 应用程序中，我正在执行以下步骤：

用户需要登录 -> 用户创建授权 -> 用户创建

该应用程序似乎在该过程的最后一步出现问题。

我成功创建授权：

```
Authorization Load (0.9ms)  SELECT "authorizations".* FROM "authorizations" WHERE "authorizations"."provider" = 'facebook' AND "authorizations"."uid" = '2259711' LIMIT 1
Authorization attributes hash: {"id"=>1, "uid"=>"2259711", "provider"=>"facebook", "user_id"=>1, "created_at"=>Wed, 02 May 2012 06:06:13 UTC +00:00, "updated_at"=>Wed, 02 May 2012 06:06:13 UTC +00:00} 
```

但它随后在用户创建步骤中窒息：

```
User Load (0.8ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Completed 500 Internal Server Error in 26ms

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  app/controllers/sessions_controller.rb:21:in `create' 
```

会话控制器的第 21 行是这样的：`session[:user_id] = @auth.user.id`

然而这没有任何意义，因为我已经清楚地用正确的 id 初始化了一个用户对象......

控制此步骤的代码如下：

会话#创建控制器

```
def create
    # create the auth hash here
    auth_hash = request.env['omniauth.auth']

    if session[:user_id]
      # Means our user is signed in. Add the authorization to the user
      User.find(session[:user_id]).add_provider(auth_hash)

      redirect_back_or User.find(session[:user_id])
#     render :text => "You can now login using #{auth_hash["provider"].capitalize} too!"
    else
      # Log him in or sign him up
      @auth = Authorization.find_or_create(auth_hash)

      # Create the session
      logger.debug "Person attributes hash: #{@auth.attributes.inspect}"
      session[:user_id] = @auth.user.id 
#       render :text => "Welcome #{auth.user.name}!"

      sign_in @auth.user
      redirect_back_or @auth.user
    end     
  end 
```

授权 find_or_create 模型方法

```
def self.find_or_create(auth_hash)
        unless auth = find_by_provider_and_uid(auth_hash["provider"], auth_hash["uid"])
            user = User.create :name => auth_hash["info"]["name"], :email => auth_hash["info"]["email"]
            logger.debug "Within Authorization find_or_create: Person attributes hash: #{user.attributes.inspect}"
            auth = create :user => user, :provider => auth_hash["provider"], :uid => auth_hash["uid"]
        end
        auth
    end 
```

更新

当我尝试这个时：`logger.debug "User attributes hash: #{@auth.user.attributes.inspect}"` 在上面的会话控制器中，我收到了这个错误：

```
NoMethodError (undefined method `attributes' for nil:NilClass):
  app/controllers/sessions_controller.rb:21:in `create' 
```

这意味着用户对象为零。这不应该是这种情况，因为我在授权`find_or_create`方法中调用了 user.create ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:31:30.987

我认为这不会`find_by_provider_and_uid`设置用户属性，因此如果成功，您需要考虑到这一点。

```
auth = find_by_provider_and_uid(auth_hash["provider"], auth_hash["uid"])

if auth.nil? # i don't know if nil is the right condition to check for, my active record fu is not up to date.
   # do your unless code
else
   #need to fetch and set user property
end

auth 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:35:45.180

用户可能未通过验证并且实际上并未被创建。更改`User.create`为`User.create!`，您将立即看到它是否未通过验证，因为它会引发异常。

# android - 设置多个警报时仅触发一个警报

> ID：10422375
> 
> 赞同：2
> 
> 时间：2012-05-02T22:06:25.127
> 
> 标签：android, flags, android-pendingintent, android-alarms

我的目标是为每个事件发出警报，`eventsDb.getFavouriteEvents()`但每次只触发一个。

在我看来，这可能是由设置引起的`PendingIntent.FLAG_UPDATE_CURRENT`，但是我需要这个标志来有意地发布 Extras。有没有办法不设置这个标志并仍然有意图地发布 Extras？

我将它们存储`PendinIntents`在 Collection ( `pendingIntents`) 中，因为我要在`onDestroy()`此类中取消它们`Service`。

这是来自的代码`onCreate()`：

```
for(Event event : eventsDB.getFavouriteEvents()) {
  Intent intent = new Intent(AlarmReciever.ONCOMING_EVENT);
  intent.putExtra(Event.TITLE, event.getTitle());

  PendingIntent pendingIntent = PendingIntent.getBroadcast(EventAlarmService.this, 0, intent, 
    Intent.FLAG_GRANT_READ_URI_PERMISSION | PendingIntent.FLAG_UPDATE_CURRENT);
  alarmManager.set(AlarmManager.RTC_WAKEUP, event.getTime(), pendingIntent);

  pendingIntents.add(pendingIntent);
} 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T22:11:29.367

如果 PendingIntent 共享相同的代码，则它们将在发送时被覆盖。更改每个发送意图的代码应该可以解决此问题。

# python - cron 作业执行的脚本中的相对路径

> ID：10422377
> 
> 赞同：9
> 
> 时间：2012-05-02T22:06:50.757
> 
> 标签：python, cron, crontab

我正在设置我的第一个 cron 作业，但它不起作用。我认为问题可能是相对路径问题。

给定 cron 工作：

```
*/1 * * * * python2.7 /home/path/to/my/script/my_script.py 
```

和 my_script.py：

```
import sqlite3
db = sqlite3.connect('my_db.db')
cur = db.cursor()
... 
```

我如何确保在（与房屋相同的目录）中`my_script.py`查找而不是在 crontab 所在的任何目录中查找？`my_db.db``/home/path/to/my/script/``my_script.py`

也欢迎其他故障排除建议。

注意 - 我认为问题可能是路径问题，因为当我尝试从 以外的任何位置运行`my_script.py`时，我收到“无法打开数据库”错误。`python2.7 /home/path/to/my/script/my_script.py``/home/path/to/my/script/`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-02T22:13:08.800

```
import sqlite3
import os

dir_path = os.path.dirname(os.path.abspath(__file__))

db = sqlite3.connect(os.path.join(dir_path, 'my_db.db'))
cur = db.cursor()
... 
```

请记住，在操作路径时，Python 的[os.path 模块是您最好的朋友。](http://docs.python.org/library/os.path.html#module-os.path)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-17T19:45:35.117

你可能想做点不同的事：

```
os.chdir(os.path.dirname(os.path.abspath(__file__)))
db = sqlite3.connect('my_db.db') 
```

使用 chdir 将允许在本地目录中执行您的脚本，如果您有多个本地引用，则允许您保持所有本地引用不变，这可能会节省您一些时间:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-15T18:40:13.990

我被卡住了一段时间，因为我没有使用 python 命令的完整路径（可以用 来检查`which python`）。

您也可以尝试在 crontab 文件中设置 PATH。

# c# - Attach behavior in code behind

> ID：10422385
> 
> 赞同：7
> 
> 时间：2012-05-02T22:07:50.817
> 
> 标签：c#, wpf, xaml, mvvm, code-behind

I have the following Xaml that is used in a user control that used as an editor inside a property grid. The question is, what would the c# look like to attach a behavior from the code behind?

```
<i:Interaction.Behaviors>
    <igExt:XamComboEditorSelectedItemsBehavior SelectedItems="{Binding SelectedItems, ElementName=_uc}"/>
</i:Interaction.Behaviors> 
```

Since this is on an editor that is loaded dynamically in a PropertyGrid, I was just going to create an instance of the editor with binding from code behind rather than having to have different xaml files that are really short and just contain one editor.

Or would it be easier to simply re implement all of the code that is in the Behavior and call it while I'm creating the editor in the code behind?

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-03T07:22:18.887

```
XamComboEditorSelectedItemsBehavior behavior = new XamComboEditorSelectedItemsBehavior();
behavior.SetBinding(XamComboEditorSelectedItemsBehavior.SelectedItemsProperty, new Binding() 
    { 
        ElementName = "_uc", 
        Path = new PropertyPath("SelectedItems"), 
        Mode = BindingMode.TwoWay 
    });
Interaction.GetBehaviors(yourElementName).Add(behavior) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-03T15:17:19.397

The accepted answer does not appear to work in the designer, because the `OnAttached` event is never raised. An approach that works at runtime and also in the designer is using the `Attach()` method on the behavior. In this case, that would look like this:

```
XamComboEditorSelectedItemsBehavior behavior = new XamComboEditorSelectedItemsBehavior();
behavior.SetBinding(XamComboEditorSelectedItemsBehavior.SelectedItemsProperty, new Binding() 
    { 
        ElementName = "_uc", 
        Path = new PropertyPath("SelectedItems"), 
        Mode = BindingMode.TwoWay 
    });
multiSelectBehavior.Attach(yourElementName) 
```

# flash - 文本字段不会在 Flash 中显示数字和大写字母，怎么办？

> ID：10422394
> 
> 赞同：0
> 
> 时间：2012-05-02T22:08:30.820
> 
> 标签：flash, numbers, actionscript-2, textfield, movieclip

我有一点有线问题。

我有一个名为`PWD`. 在里面我有一个动态文本/经典文本字段，名为`ATF`.

我正在尝试将一些文本加载到其中，但它似乎加载了大写字母或数字。

```
PWD.ATF.htmlText = "username: <font color = \'#FFFFFF\'> " + _root.xDATA.username + " </font> 
```

所以如果`username`是`Example123`我只能看到`xample`

我正在使用 AS2。

有任何想法吗？

编辑：

即使我对一些数字进行硬编码，它们仍然不会出现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:20:07.090

看来，您只使用带有小写字母的字体，或者您在那里使用只有小写字母的嵌入字体

# image-processing - 如何使用Matlab将图像划分为8个区域

> ID：10422402
> 
> 赞同：0
> 
> 时间：2012-05-02T22:09:18.983
> 
> 标签：image-processing, matlab

我有 256x256 的图像，有没有简单的方法将它分成 8 个区域（32x32）并得到一个特定的区域？例如：地区 4,6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T22:40:12.070

图像存储为二维数组。

```
function region = fnGetRegion(C,I,J);
% C is 256x256 image, I, J each range 1:8 to get 32x32 subregion of C
region = C((I-1)*32+[1:32],(J-1)*32+[1:32]);
end 
```

# hbase - hbase 0.92 和 opentsdb 兼容性

> ID：10422406
> 
> 赞同：0
> 
> 时间：2012-05-02T22:09:26.893
> 
> 标签：hbase, opentsdb

我正在尝试迁移 opentsdb 以使用 hbase 0.92，因为由于某种原因，使用分支版本的 hadoop 核心 jar 的 hbase 0.90.x 不能很好地与任何版本的 hadoop 配合使用。可悲的是，在我配置并连接好所有东西后，我在 hbase 的日志中不断收到以下错误

```
2012-05-02 21:48:25,725 WARN org.apache.hadoop.hbase.regionserver.HRegion: No such column family in batch put
org.apache.hadoop.hbase.regionserver.NoSuchColumnFamilyException: Column family t does not exist in region tsdb,,1335994142141.79b560b1ba606c2f9eef533ddc31e86e. in table {NAME => 'tsdb', FAMILIES => [{NAME => 'id', BLOOMFILTER => 'NONE',REPLICATION_SCOPE => '0', COMPRESSION => 'NONE', VERSIONS => '3', TTL => '2147483647', MIN_VERSIONS => '0', BLOCKSIZE => '65536', IN_MEMORY => 'false', BLOCKCACHE => 'true'}, {NAME => 'name', BLOOMFILTER => 'NONE', REPLICATION_SCOPE => '', COMPRESSION => 'NONE', VERSIONS => '3', TTL => '2147483647', MIN_VERSIONS => '0', BLOCKSIZE => '65536', IN_MEMORY => 'false', BLOCKCACHE => 'true'}]}
        at org.apache.hadoop.hbase.regionserver.HRegion.checkFamily(HRegion.java:3907)
        at org.apache.hadoop.hbase.regionserver.HRegion.checkFamilies(HRegion.java:2184)
        at org.apache.hadoop.hbase.regionserver.HRegion.doMiniBatchPut(HRegion.java:1790)
        at org.apache.hadoop.hbase.regionserver.HRegion.put(HRegion.java:1723)
        at org.apache.hadoop.hbase.regionserver.HRegionServer.multi(HRegionServer.java:3062)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.hbase.ipc.WritableRpcEngine$Server.call(WritableRpcEngine.java:364)
        at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1326) 
```

当我通过 opentsdb 的前端 UI 搜索时，我得到了这个错误

```
org.hbase.async.NoSuchColumnFamilyException: org.apache.hadoop.hbase.regionserver.NoSuchColumnFamilyException: Column family t does not exist in region tsdb,,1335994142141.79b560b1ba606c2f9eef533ddc31e86e. in table {NAME => 'tsdb', FAMILIES => [{NAME => 'id', BLOOMFILTER => 'NONE', REPLICATION_SCOPE => '0', COMPRESSION => 'NONE', VERSIONS => '3', TTL => '2147483647', MIN_VERSIONS => '0', BLOCKSIZE => '65536', IN_MEMORY => 'false', BLOCKCACHE => 'true'}, {NAME => 'name', BLOOMFILTER => 'NONE', REPLICATION_SCOPE => '0', COMPRESSION => 'NONE', VERSIONS => '3', TTL => '2147483647', MIN_VERSIONS => '0', BLOCKSIZE => '65536', IN_MEMORY => 'false', BLOCKCACHE => 'true'}]}

    at org.apache.hadoop.hbase.regionserver.HRegion.checkFamily(HRegion.java:3907)
    at org.apache.hadoop.hbase.regionserver.HRegion.getScanner(HRegion.java:1422)
    at org.apache.hadoop.hbase.regionserver.HRegion.getScanner(HRegion.java:1401)
    at org.apache.hadoop.hbase.regionserver.HRegionServer.openScanner(HRegionServer.java:2054)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.hbase.ipc.WritableRpcEngine$Server.call(WritableRpcEngine.java:364)
    at org.apache.hadoop.hbase.ipc.HBaseServer$Handler.run(HBaseServer.java:1326)

Caused by RPC: OpenScannerRequest(table="tsdb", key=[0, 0, 1, 79, -95, 75, -16], family="t", qualifier=null, start_key=[0, 0, 1, 79, -95, 75, -16], stop_key=[0, 0, 1, 79, -95, -68, -9], max_num_kvs=4096, populate_blockcache=true, attempt=1, region=RegionInfo(table="tsdb", region_name="tsdb,,1335994142141.79b560b1ba606c2f9eef533ddc31e86e.", stop_key=""))
    at org.hbase.async.NoSuchColumnFamilyException.make(NoSuchColumnFamilyException.java:56) ~[asynchbase-1.2.0.jar:bead2c4]
    at org.hbase.async.NoSuchColumnFamilyException.make(NoSuchColumnFamilyException.java:32) ~[asynchbase-1.2.0.jar:bead2c4]
    at org.hbase.async.RegionClient.deserializeException(RegionClient.java:1182) ~[asynchbase-1.2.0.jar:bead2c4]
    at org.hbase.async.RegionClient.deserialize(RegionClient.java:1159) ~[asynchbase-1.2.0.jar:bead2c4]
    at org.hbase.async.RegionClient.decode(RegionClient.java:1080) ~[asynchbase-1.2.0.jar:bead2c4]
    at org.hbase.async.RegionClient.decode(RegionClient.java:82) ~[asynchbase-1.2.0.jar:bead2c4]
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:470) ~[netty-3.2.7.jar:na]
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:443) ~[netty-3.2.7.jar:na]
    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:80) ~[netty-3.2.7.jar:na]
    at org.hbase.async.RegionClient.handleUpstream(RegionClient.java:936) ~[asynchbase-1.2.0.jar:bead2c4]
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564) ~[netty-3.2.7.jar:na]
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559) ~[netty-3.2.7.jar:na]
    at org.hbase.async.HBaseClient$RegionClientPipeline.sendUpstream(HBaseClient.java:1974) ~[asynchbase-1.2.0.jar:bead2c4]
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:274) [netty-3.2.7.jar:na]
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:261) [netty-3.2.7.jar:na]
    at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:351) [netty-3.2.7.jar:na]
    at org.jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys(NioWorker.java:282) [netty-3.2.7.jar:na]
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:202) [netty-3.2.7.jar:na]
    at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108) [netty-3.2.7.jar:na]
    at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:44) [netty-3.2.7.jar:na]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [na:1.6.0_24]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [na:1.6.0_24]
    at java.lang.Thread.run(Thread.java:662) [na:1.6.0_24] 
```

是不是因为 asynchbase-1.2 和 hbase 0.92 配合不好。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:20:58.297

我不确定您是如何做到的，但这清楚地表明您错误地创建了表格。OpenTSDB 需要两个表，`tsdb`并且`tsdb-uid`（名称可配置）。该`tsdb`表有一个列族，`t`，并且`tsdb-uid`有两个：`name`和`id`。

从上面的摘录中，很明显您的`tsdb`表具有以下列族`tsdb-uid`：

`{NAME => 'tsdb', FAMILIES => [{NAME => 'id', ...}, {NAME => 'name', ...}]}`

使用 OpenTSDB 的`src/create_table.sh`脚本来创建表。有了它，你就不会弄错了。

# linux - Hazelcast 作为 Linux 服务

> ID：10422407
> 
> 赞同：2
> 
> 时间：2012-05-02T22:09:33.540
> 
> 标签：linux, hazelcast

我已经在我的应用程序中配置了 Hazelcast 并将其部署在 glassfish 中，并在 REST 服务中使用一些简单的方法对其进行了测试。

现在我想将它作为 Linux 服务安装在我的服务器中，以便在服务器启动时开始运行，并且我希望我的 glassfish 应用程序能够识别该服务并使用分布式锁在我的地图中读取或设置变量。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:19:25.513

您可以创建一个 init.d 脚本来启动`Hazelcast`节点并`HazelcastClient`在您的应用程序中使用以连接到`Hazelcast`节点。

看一个类似问题的答案：

[Hazelcast 专用节点](https://stackoverflow.com/a/10395372/682580)

以及关于启动独立节点的博文；

[Hazelcast：启动独立 Hazelcast 节点](http://blog.ilikeplaces.com/2012/05/hazelcast-starting-standalone-hazelcast.html)

在部署到 Glassfish 的应用程序中使用连接`Hazelcast`节点；`HazelcastClient`

```
ClientConfig config = new ClientConfig();
config.getNetworkConfig().addAddress("localhost");
HazelcastInstance client = HazelcastClient.newHazelcastClient(config);
Map map = client.getMap("map"); 
```

# soundcloud - 使用 d3.js + SoundCloud API - 需要显示曲目标题

> ID：10422417
> 
> 赞同：1
> 
> 时间：2012-05-02T22:09:54.607
> 
> 标签：soundcloud, d3.js

我将 d3.js 与 SoundCloud API 一起使用。我想创建一个气泡图，它将在气泡中显示曲目标题。

一旦页面加载到“圆圈”元素中，它们就会显示在 HTML 中。但我不确定他们为什么不显示。

并尝试创建一个显示曲目标题的气泡图。

我正在做的一个例子可以在这里看到：http: [//butchershopcreative.github.com/ui-experiments/soundcloud/example/](http://butchershopcreative.github.com/ui-experiments/soundcloud/example/)

代码如下所示：

```
SC.initialize({
  client_id: "7kIeyF5f2ETFo1fEWKwNQ",
  redirect_uri: "http://localhost:8000/soundcloud/example/",
});

SC.get("/tracks?genres=dubstep&order=hotness", {limit: 100}, function(tracks){
  var svg = d3.select("#chart").append("svg")
      .attr("width", 640)
      .attr("height", 480);
  var y = 500;
  var x = 1000;
  var circle = svg.selectAll("circle")
      .data(tracks) // data binds information to the circles
    .enter().append("circle").transition() // Added transitions
      .duration(1000)
      .delay(function(d, i) { return i * 10; })
      .attr("r", function(d) { return Math.sqrt(d * scale); })
      .style("fill", "steelblue")
      .style("stroke","#000")
      .style("stroke-width", "3px")
      .attr("class", "track")
      .attr("cx", function() {
            return Math.random() * x;}) // produces random x position
      .attr("cy", function() {
            return Math.random() * y;}) // produces random y position
      .attr("r", 50)
      .text(function(track) {
          console.log(track);
          return track.title; 
      });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:33:00.200

问题是您正在使用`circle`文本元素。您应该使用 SVG`text`元素，我会将圆圈和文本组合在一个`g`元素中。

像这样（分离`enter()`和`update`代码）：

```
var bubble = svg.selectAll(".bubble")
  .data(tracks) // data binds information to the bubbles

bubble.enter().append("svg:g")
  .attr("class", "bubble");

bubble.append("svg:circle")
  .attr("r", function(d) { return Math.sqrt(d * scale); })
  .style("fill", "steelblue")
  .style("stroke","#000")
  .style("stroke-width", "3px")
  .attr("class", "track")
  .attr("cx", function() {
    return Math.random() * x;}) // produces random x position
  .attr("cy", function() {
    return Math.random() * y;}) // produces random y position
  .attr("r", 50);

bubble.append("svg:text")
  .text(function(track) {
    return track.title; 
  }); 
```

# java - 类似 Linq 的 Java 表达式库，能够将表达式树编译为可执行的 JVM 字节码

> ID：10422421
> 
> 赞同：3
> 
> 时间：2012-05-02T22:10:14.833
> 
> 标签：java, compilation, bytecode, linq-expressions

System.Linq.Expressions 命名空间包含大量用于 .Net 语言中的所有构造的 Expression 类。您可以使用这些类的对象构建表达式树，然后可以即时编译和执行。

在 Java 世界中是否有类似的东西，我可以在其中构建表达式树，即时编译它们，然后执行它们？

只是给你一个非常简单的例子，我需要一个库来允许我写这样的东西：

```
BinaryExpression add = new BinaryExpression(BinaryOperators.Add, new ConstantExpression(10), new ConstantExpression(20));

Executable exec = add.compile();
System.out.println(exec.Execute()); // <= this would print 30 
```

谢谢

只是一个更新。找到了这个库，它符合我的想法：[http](http://unkrig.de/w/janino) ://unkrig.de/w/janino 。

# ember.js - 单击其他元素时如何获取 EmberJS 视图的句柄

> ID：10422424
> 
> 赞同：0
> 
> 时间：2012-05-02T22:10:35.090
> 
> 标签：ember.js

[http://jsfiddle.net/maxl/aShMQ/4/](http://jsfiddle.net/maxl/aShMQ/4/)

我在模板中声明了内联的 Ember.TextField，模板内部是一个具有回调的按钮。我希望能够在单击时设置 TextField.enabled=true。由于模板是集合中的一个元素，所以不可能使用绝对路径

单击 JsFiddle 示例中的编辑图标应该说明我所追求的

[http://jsfiddle.net/maxl/aShMQ/4/](http://jsfiddle.net/maxl/aShMQ/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:29:28.633

只需将`disabled`Textfield 的 绑定到您的属性`itemView`，请参阅[http://jsfiddle.net/pangratz666/gXLXW/](http://jsfiddle.net/pangratz666/gXLXW/)：

```
{{view Ember.TextField disabledBinding="isDisabled" valueBinding="content.v"}} 
```

```
App.Items = Ember.CollectionView.create({
    itemViewClass: Ember.View.extend({
        templateName: 'itemView',
        isDisabled: true,
        __edit: function(evt) {
          this.toggleProperty('isDisabled');
          console.log(evt.get('content'))
        }
    })
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T19:22:12.073

上面的 pangratz 示例不适用于 ember 1.0 pre，因为内容作为“视图”传递给子视图。我对其进行了一些修改以使其正常工作。见[http://jsfiddle.net/musashimm/T9q6R/](http://jsfiddle.net/musashimm/T9q6R/)

# wpf - GridSplitter 高度不尊重网格行容器高度

> ID：10422429
> 
> 赞同：0
> 
> 时间：2012-05-02T22:11:24.000
> 
> 标签：wpf, xaml

使用下面的 XAML，您仍然可以抓住底部的网格拆分器，为什么？

```
<Grid Background="Blue" Margin="20">
  <Grid.RowDefinitions>
    <RowDefinition Height="1*" />
    <RowDefinition Height="0*" />
  </Grid.RowDefinitions>
  <Border Background="Red" />
  <GridSplitter Grid.Row="1" Height="8" HorizontalAlignment="Stretch" VerticalAlignment="Top" />
</Grid> 
```

行高 0 不应该阻止您抓取网格拆分器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:48:42.997

不，这是正常行为。表示在控件 ( [msdn](http://msdn.microsoft.com/en-us/library/system.windows.controls.gridsplitter.aspx) )`GridSplitter`的列或行之间重新分配空间的控件。`Grid`

因此，如果您需要其他行为 - 当然，请尝试使用转换器将 绑定`Visibility`到`Row.Height`属性或类似内容。但请注意 - 当您将 更改为`Visibility`或时，您将无法通过鼠标/键盘/[其他输入设备]与它们进行交互。`GridSplitter``Visibility.Collapsed``Visibility.Hidden`

# android - 在 SherlockFragment 中切换布局 XML

> ID：10422432
> 
> 赞同：2
> 
> 时间：2012-05-02T22:11:57.447
> 
> 标签：android, android-layout, android-fragments, actionbarsherlock

我有一个带有 ABS 的操作栏选项卡系统。第一个选项卡是登录选项卡。我将登录用户存储在本地 SQLite 数据库和 Web SQL 数据库中。当用户点击 loginButton 并且 Async loginTask 完成时，我想更改登录选项卡的 xml 布局。

所以基本上我可以运行测试来查看用户是否登录，如果是，则使用新布局。**是否有任何合理的方法可以在位于 actionBar 选项卡系统中的 SherlockFragment 中完成布局切换？**

显然，我还需要在 onResume 内部运行相同的检查，以确保用户是否登录，正确的 UI 会显示出来。我的问题是 onCreateView 中的布局当前膨胀，不会重新运行。

这是一些代码：

```
public class LoginFragment extends SherlockFragment {
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    userFunctions = new UserFunctions();
//test ive made that has no effect since onCreateView only runs once.
    if(userFunctions.isUserLoggedIn(activity.getApplicationContext())) {
        View v = inflater.inflate(R.layout.loggedin, container, false);
        return v;
    } else {//standard method when I didnt use the above test
    View v = inflater.inflate(R.layout.loginfragment, container, false);
    return v;
    }
} 
```

我有一个托管选项卡等的活动，这是它的相关代码：

```
public static class TabsAdapter extends FragmentPagerAdapter
implements ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }
    /*Constructor method that adds a TabsAdapter to each tab that is created.
     * It also adds the ViewPager to each tab so that the user can swipe to change tabs.
     */
    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }
    /*A fairly simple method that sets the TabInfo for each tab so that the TabsAdapter
     * knows which class the tab that is being added actually belonds to. It also updates
     * the UI interface when each tab is added. 
     */
    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    public int getCount() {
        return mTabs.size();
    }
    /*A method that is used in other classes to allow each tab Fragment to 
     * access its inherited methods from a mother-class, in this case, SherlockFragment
     */
    public SherlockFragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return (SherlockFragment)Fragment.instantiate(mContext, info.clss.getName(), info.args);
    }
    /*This method reads the user's selection for a new tab and sets that tab as
     * the new current focus.*/
    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
    }
    public void onPageScrollStateChanged(int state) {}
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {}
    /* This is the method that actually draws the newest tab onto the screen when
     * it is selected.*/
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        mViewPager.setCurrentItem(tab.getPosition());
        Object tag = tab.getTag();
        for (int i=0; i<mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);
            }
        }
    }
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {}
    public void onTabReselected(Tab tab, FragmentTransaction ft) {}
    public void onTabReselected(Tab tab, android.app.FragmentTransaction ft) {}
    public void onTabUnselected(Tab tab, android.app.FragmentTransaction ft) {}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:01:54.987

在您的片段布局中，您可以使用[ViewSwitcher](http://developer.android.com/reference/android/widget/ViewSwitcher.html)在两个视图之间切换，一个用于登录，另一个用于您希望在用户登录时显示的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T04:20:39.620

也许我的解决方案会过于简​​单，但我的一个活动中发生了类似的事情，据我所知，我并没有受到巨大的性能影响。这就是我所做的。

我将所有 xml 项放在一个布局 .xml 文件中。将RelativeLayout 设为您的父布局，然后在RelativeLayout 中创建两个布局。一个包含来自**R.layout.loggedin**的 xml ，另一个布局包含**R.layout.loginfragment** xml 项。然后，我会在 onActivityCreated 上进行以下调用。

```
if(userFunctions.isUserLoggedIn(activity.getApplicationContext())) {
   loginfragment.setVisibility(RelativeLayout.GONE);
   //Your other appropriate code here to interact with the items in this layout
} else {//standard method when I didnt use the above test
    loggedin.setVisibility(RelativeLayout.GONE);
   //More code here to interact with the items in this layout
} 
```

我有我的 TabsAdapter 类等效设置为

```
 android:stateNotNeeded="true" 
```

在我的 AndroidManifest.xml 中。这使我能够启动写入数据库的活动，当我回来时，由于屏幕被重绘，所以会进行适当的更改。使用这种方法，虽然我不确定您为什么要这样做，但您甚至可以根据需要在活动中反复调用 xml 中的更改。

我在我拥有的 Activity 中成功使用了它，并且它可以流畅地工作。希望这可以帮助！

# windows - 递归查找和替换文件

> ID：10422433
> 
> 赞同：1
> 
> 时间：2012-05-02T22:12:14.530
> 
> 标签：windows, batch-file, cmd, batch-processing

我想做的是跟随。我想创建一些 bat 文件，它将递归搜索从当前目录开始的文件并替换为我提供的文件。例如。如果我想搜索和替换 test1.txt，我打开这个迷你应用程序并编写 text1.txt，然后放置我想要替换的文件。

*   目录
    *   应用程序.bat
    *   test1.txt // 应用程序将在文件夹 1 和文件夹 2 中递归搜索，并将所有找到的结果替换为 test1.txt
    *   文件夹 1
    *   文件夹 2

我想知道，出于这个原因，是否有准备好去应用程序或 bat 文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T00:54:37.370

下面的批处理文件从当前目录开始，递归搜索第一个参数中给出的文件并复制它（同名）第二个参数中给出的文件：

```
@echo off
set targetName=%~NX1
set replacementFile=%~F2
call :processFolder
goto :EOF

:processFolder
rem For each folder in this level
for /D %%a in (*) do (
   rem Enter into it, process it and go back to original
   cd %%a
   if exist "%targetName%" (
      copy "%replacementFile%" "%targetName%" /Y
   )
   call :processFolder
   cd ..
)
exit /B 
```

例如：

```
app test1.txt c:\data\replacementfile.txt 
```

# facebook - Facebook，对象调试器，问题（解析为类型“url”和错误解析输入 URL）

> ID：10422434
> 
> 赞同：-1
> 
> 时间：2012-05-02T22:12:17.577
> 
> 标签：facebook, facebook-like

-删除文本，以便谷歌删除地址-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:23:13.623

目前我得到

`<meta property="og:type" content="website">`

`<meta property="og:url" content="adasaphotographicart.com/">`

作为您的 Open Grab 标签。

og:url 在开始时需要 http:// 并且应该可以解决这个问题。

[https://developers.facebook.com/tools/debug/og/echo?q=http%3A%2F%2Fwww.adasaphotographicart.com%2F](https://developers.facebook.com/tools/debug/og/echo?q=http%3A%2F%2Fwww.adasaphotographicart.com%2F)

当您喜欢您网站的根页面时，您需要 og:type website

来自：[https ://developers.facebook.com/docs/opengraphprotocol/](https://developers.facebook.com/docs/opengraphprotocol/)

> 将文章用于表示临时内容的任何 URL - 例如新闻文章、博客文章、照片、视频等。请勿将网站用于此目的。website 和 blog 旨在代表整个站点，带有 website 或 blog 类型的 og:type 标签通常应该只出现在域的根目录中。

# php - 电子邮件垃圾邮件问题

> ID：10422436
> 
> 赞同：2
> 
> 时间：2012-05-02T22:12:31.643
> 
> 标签：php, email, spam

我将我的第一个网站放到网上，我担心垃圾邮件。网站的某些部分具有反馈表（未显示电子邮件），而其他一些页面则显示了电子邮件。. .

我听说人们谈论电子邮件机器人在许多网站上爬行并将它们发送到死亡的垃圾邮件中。

请问您对这个问题有什么建议。

如果这个地方在我看来是问这个问题的最佳地方，请原谅我。我在这里很新。

感谢您的时间和耐心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:15:04.537

在表单中添加验证码会有很大帮助！这是一个很好的：[ReCaptcha](http://www.google.com/recaptcha)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:15:15.720

您可以做一些简单的事情，例如用描述符替换部分电子邮件......

```
foo[at]bar.com
foo@bar(dot)com
foo[at]bar[dot]com 
```

...或者只是将电子邮件显示为图像。一切都取决于您想要投入的努力程度，以及您的用户最有用的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-01T13:31:57.370

这是您摆脱垃圾邮件的方法。

编辑：应我朋友@RamenChef 的要求，将示例代码放在这里。

假设您有一个容易受到垃圾邮件攻击的密码重置/丢失密码页面，您可以这样做。下面的示例代码。

尝试发送伪造请求或尝试重播请求。

**index.html - 查看**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>App secured from Spamming.</title>
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {
            $("form").submit(function (event) {
                // Stop form from submitting normally
                event.preventDefault();
                /* Serialize the submitted form control values to be sent to the web server with the request */
                var formValues = $(this).serialize();
                // Send the form data using post
                $.post("test.php", formValues, function (data) {
                    // Display the returned data in browser
                    $("#result").html(data['message']);
                });
            });
        });
    </script>
    <script>
        $(window).load(function(){
            $.post("test.php", function (data) {
                // Display the returned data in browser
                $('#token').val(data['token']);
                $("#result").html('<br>token generated --> '+data['token']);
            });
        });
    </script>
</head>
<body>
<form>
    <p>Forgot password ?</p>
    <label>Email:
        <input type="email" name="email">
        <input type="hidden" name="token" id="token" >
    </label>
    <br><br>
    <input type="submit" value="Send">
</form>
<div id="result"></div>
</body>
<footer style="text-align: center">Try clicking the Send button multiple times and the request is entertained only <b>ONCE for a session.</b></footer>

</html> 
```

**test.php {服务器端}**

```
<?php
session_start();
header("Access-Control-Allow-Origin: *");
header("Content-Type: application/json; charset=UTF-8");
$email = isset($_POST["email"]) ? $_POST["email"] : "1";
$token = isset($_POST["token"]) ? $_POST["token"] : "1";

$data = array();

if ($email == 1 && $token == 1) {
    $serverToken = getToken(30);
    //generate token

    $_SESSION["current-token"] = $serverToken;
    $data['token'] = $serverToken;
    echo json_encode($data);
} else {
    if ($_SESSION["current-token"] == $token) {
        //lets process the valid request
        $data['message'] = 'Password reset link sent to ' . $email;
        $serverToken = getToken(30);

        //generate token
        $_SESSION["current-token"] = $serverToken;
        echo json_encode($data);
    } else {
        $data['message'] = 'false client' . '  ----' . $_SESSION["current-token"];
        echo json_encode($data);
    }

}

function getToken($length)
{
    $token = "";
    $codeAlphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    $codeAlphabet .= "abcdefghijklmnopqrstuvwxyz";
    $codeAlphabet .= "0123456789";
    $max = strlen($codeAlphabet); // edited

    for ($i = 0; $i < $length; $i++) {
        $token .= $codeAlphabet[crypto_rand_secure(0, $max)];
    }

    return $token;
}

function crypto_rand_secure($min, $max)
{
    $range = $max - $min;
    if ($range < 1) return $min; // not so random...
    $log = ceil(log($range, 2));
    $bytes = (int)($log / 8) + 1; // length in bytes
    $bits = (int)$log + 1; // length in bits
    $filter = (int)(1 << $bits) - 1; // set all lower bits to 1
    do {
        $rnd = hexdec(bin2hex(openssl_random_pseudo_bytes($bytes)));
        $rnd = $rnd & $filter; // discard irrelevant bits
    } while ($rnd >= $range);
    return $min + $rnd;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-02T22:17:27.187

虽然不是万无一失，但另一种策略是在表单中使用隐藏字段。大多数机器人会盲目地填写它。检查是否填写，如果填写，则不允许表单提交。

```
 if ($_POST["bait"]!='') {
            header("location: http://www.google.com");
            exit;
               } else { 
```

# java - 变量的命名约定

> ID：10422437
> 
> 赞同：1
> 
> 时间：2012-05-02T22:12:40.723
> 
> 标签：java, naming, convention

我在一个程序中有四个变量：xPos、yPos、xVel、yVel

他们每个人都应该有一个 setter/getter，但是这样说会很尴尬：

```
setXpos()
getXpos()
getXvel()
setXvel() 
```

这些变量是否有一个简短而有效的命名约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:16:53.633

您在代码片段中列出的*是*命名约定。

更重要的问题是，如何重构它们以提高可读性？作为没有看过您的程序的人，您列出的四个功能对我来说似乎非常清楚。我很难想出更清晰的东西。

任何时候你放弃约定，即使约定让事情变得讨厌，你也会失去可读性/清晰度（因为人们期望这些约定得到满足）。你必须权衡放弃一个讨厌的约定结果以获得更好的东西的好处与放弃约定的损失。

说了这么多，我允许你使用'getXvel()'。神速。=)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T22:23:44.333

`getXPos()`和怎么样`getXVel()`？虽然，`getXPosition()`而且`getXVelocity()`似乎更清晰。这取决于上下文，但我花了一秒钟才弄清楚你不是那个意思`val`。

* * *

这超出了您的问题，但是（在适当的情况下）我可能会争辩这样做：

```
foo.getX().position();
foo.getX().velocity(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T22:19:36.767

关于命名约定有一些思想流派。如果您遵循 java bean 约定，那么您的 setter 和 getter 是正确的，但是我会考虑将您的变量重命名为更具描述性，即`horizontalPosition`, `verticalPosition`, `verticalVelocity`,`horizontalVelocity`并适当命名 getter 和 setter。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T22:31:04.590

将类 Point 用于 (x, y)。

# python - 检查 HDF5 Store 对象是否为空？

> ID：10422438
> 
> 赞同：1
> 
> 时间：2012-05-02T22:12:45.810
> 
> 标签：python, hdf5, pandas

我正在使用 pandas HDFSTore 对象打开 hdf5 文件并存储`DataFrame`对象。但在我这样做之前，我想知道文件是否为空。有没有办法找出我的

```
In[12]:
import pandas
store = pandas.io.pytables.HDFStore('store.h5')
Out[12]:
<class 'pandas.io.pytables.HDFStore'>
File path: store.h5
Empty 
```

有没有办法在 store.h5 中浏览层次结构树以检查对象是否为空。我想获取 store.h5 中的对象列表

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:37:38.870

您可以使用

```
store.keys() 
```

获取存储对象的列表

# git - 如何使用 Git 组织我的代码？我应该分叉还是分支？

> ID：10422442
> 
> 赞同：0
> 
> 时间：2012-05-02T22:12:55.910
> 
> 标签：git, branch, fork

我有一个我分叉的微控制器的代码库。不幸的是，它还不是一个可以在其他外部项目中编译的工具库——在开发您的特定微控制器应用程序时，您可能需要在“核心”模块中破解一些东西。只要它在 github 上，就可以保持理智并将修复和功能推送到父 repo 等，但我担心我的特定应用程序 - 我在哪里为它们保存代码？

据我了解，分支在 git 中被认为是短暂的人工制品吗？我应该为每个特定的应用程序分叉我的回购吗？

有问题的代码位于[https://github.com/Miceuz/LPC1343CodeBase](https://github.com/Miceuz/LPC1343CodeBase)我有主代码库和两个分支 - 温度控制器固件和 LED 板固件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:20:09.387

对于单独的项目，我会选择分叉，而对于特定项目的开发，我会创建一个分支。想象一个项目是一棵树；您将为项目的每个部分都有分支，这些分支可以合并成一个“大”分支，该分支仍然是该树的一部分，然后您可以复制并“种植”新项目的树。

这里很晚了好吗！:P

# google-docs-api - 查找最大更改戳

> ID：10422446
> 
> 赞同：1
> 
> 时间：2012-05-02T22:13:30.183
> 
> 标签：google-docs-api, google-drive-api

我正在使用 gdata-python-client。有没有办法获得最大更改戳？

我使用 gdata.docs.DocsClient.GetAllResources() 构建了完整的目录结构。要轮询新更改，我想获得最大更改戳。

我现在唯一能想到的方法是迭代地请求多个 DocsClient.GetChanges(changestamp=i+100, max_results=100) - 如果我有数千个更改，这会很昂贵。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T22:30:08.093

您可以调用 GetMetadata 来检索有关用户的信息并检查 docs:largestChangestamp 元素的值：

[https://developers.google.com/google-apps/documents-list/#getting_general_information_about_a_users_account](https://developers.google.com/google-apps/documents-list/#getting_general_information_about_a_users_account)

# c# - 用于 MS Access 更新表的 OleDbDataAdapter，为什么我的更新不起作用？

> ID：10422449
> 
> 赞同：1
> 
> 时间：2012-05-02T22:13:36.063
> 
> 标签：c#

我不确定我在这里做错了什么 - 在调试器中，对文件名所做的更改是正确地对我从更新命令中提取的数据集进行的，但是当我之后检查数据库时没有改变了……所以我有点困惑……

```
using (System.Data.OleDb.OleDbConnection con = new System.Data.OleDb.OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;" +
                               "Data Source=J:\\Physics.mdb"))
        {
            using (OleDbDataAdapter dbAdapter = new OleDbDataAdapter("select thesisID, filename FROM Theses", con))
            {

                DataSet ds = new DataSet();
                con.Open();
                dbAdapter.Fill(ds);

                for (int j = 0; j < ds.Tables[0].Rows.Count; j++)
                {
                    ds.Tables[0].Rows[j]["filename"] = ds.Tables[0].Rows[j]["filename"].ToString().Replace(',', '_');
                    string newFileName = ds.Tables[0].Rows[j]["filename"].ToString();
                    int ID = Convert.ToInt32(ds.Tables[0].Rows[j]["thesisID"].ToString());
                    using (OleDbCommand updateCommand = con.CreateCommand())
                    {
                       updateCommand.CommandText = "update theses set filename = @newFileName where thesisID = @ID";
                        updateCommand.Parameters.AddWithValue("@ID", ID);
                        updateCommand.Parameters.AddWithValue("@newFileName", newFileName);

                        updateCommand.ExecuteNonQuery();

                    }

                }
                con.Close();
                }

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T22:25:55.950

尝试颠倒添加参数的顺序：

```
using (OleDbCommand updateCommand = con.CreateCommand()) 
{ 
   updateCommand.CommandType = CommandType.Text;
   updateCommand.CommandText = "update theses set filename = @newFileName where thesisID = @ID"; 
   updateCommand.Parameters.AddWithValue("@newFileName", newFileName);
   updateCommand.Parameters.AddWithValue("@ID", ID);   
   updateCommand.ExecuteNonQuery(); 
} 
```

原因是[OleDb 不支持命名参数](https://stackoverflow.com/questions/1476770/oledbcommand-parameters-order-and-priority)，因此添加它们的顺序很重要。

请注意，以这种方式表示的 OleDb 查询通常很常见：

```
using (OleDbCommand updateCommand = con.CreateCommand()) 
{ 
   updateCommand.CommandType = CommandType.Text;
   updateCommand.CommandText = "update theses set filename = ? where thesisID = ?"; 
   updateCommand.Parameters.Add(new OleDbParameter("", "", ""...));
   updateCommand.Parameters.Add(new OleDbParameter("", "", ""...));
   updateCommand.ExecuteNonQuery(); 
} 
```

这强调了顺序很重要——问号只是占位符，它们按照参数添加到命令的顺序被替换。

# jquery - jQuery获取响应图像的高度

> ID：10422451
> 
> 赞同：1
> 
> 时间：2012-05-02T22:13:45.170
> 
> 标签：jquery

我有一组响应页面的图像（即 max-width 设置为 100% ）。

```
<div class="exh">
   <img src="#" />
</div>
<div class="exh">
   <img src="#" />
</div>
<div class="exh">
   <img src="#" />
</div> 
```

和

```
.exh img {
   max-width:100%;
} 
```

调整窗口大小后以及加载页面时如何检索图像的高度？当我使用以下内容时，我得到的高度为 0。

```
$(".exh img").each(function() {
    var $this = $(this);
    console.log( $this.height() );
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T22:17:38.767

如果您需要在页面加载时以及调整页面大小时执行此操作：

```
$(document).ready( function() { //Fires when DOM is loaded
    getImageSizes();
    $(window).resize(function() { //Fires when window is resized
        getImageSizes();
    });
});
function getImageSizes() {
    $(".exh img").each(function() {
        var $this = $(this);
        console.log( $this.height() );
    });
} 
```

有关 .resize() 的更多信息：http: [//api.jquery.com/resize/](http://api.jquery.com/resize/)

有关 .ready() 的更多信息：http: [//api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T22:17:21.507

根据这个答案，我给了一个类似的问题：

[为什么 jQuery.css('width') 在不同的浏览器中返回不同的值？](https://stackoverflow.com/questions/9608642/why-does-jquery-csswidth-return-different-values-in-different-browsers/9608677#9608677)

`.width()`或者`height()`是元素的“在 DOM 中渲染”的大小 - 要返回大于 0 的值，该元素需要对 DOM 完全可用（也就是图像需要完全加载）

你想要的是：

```
var myImage= new Image();
myImage.onload=function() { alert(this.height);}
myImage.src= "your/image/url"; 
```

简而言之-您需要在调用之前保证图像已加载`height()`

# labview - 如何在 LabVIEW 中自定义即时帮助？

> ID：10422452
> 
> 赞同：2
> 
> 时间：2012-05-02T22:13:49.890
> 
> 标签：labview

是否有一些简单的方法可以在 LabVIEW 中编写上下文帮助以使其更有趣？ *（编辑：不是最初的问题，但我相信“更愉快”的同义词可能更丰富、更漂亮、更独特等）*

我想包含更多信息，例如图片、图表，甚至是不同类型字体的文本，但我在网上没有找到有用的手册。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T01:34:22.700

您是否正在寻找更多这样的东西？我相信这是您可以为您的子 VI 实现的丰富的上下文帮助。

![在此处输入图像描述](../Images/af4dafdf7d15008ea6dd75542b8414ab.png)

您可能需要查看[创建和编辑 VI 描述](http://zone.ni.com/reference/en-XX/help/371361E-01/lvhowto/creatingediting_vi_desc/)，以便您至少在子 VI 中包含有用的描述。引用[此 NI 论坛主题](http://forums.ni.com/t5/LabVIEW/How-to-document-a-labview-project/td-p/29231)的答案，我列出了应包含在您的子 VI 中的一些内容：

> 1.  常规：（VI 名称、版本号、编码日期、作者）。
> 2.  描述：（总结其整体功能的段落）。
> 3.  细节：（指定唯一或复杂代码的详细子段落）。
> 4.  杂项：（数据类型输入/输出、vi 工作的独特条件、限制等）。

最后，我指出了这个旧的但有用的[LabVIEW 开发指南](http://www.ni.com/pdf/manuals/321393c.pdf)，也在上面的线程中引用。请参阅第 5 章 - 创建文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:50:12.487

LabVIEW 中的上下文帮助确实是有限的。

我相信[您已经在 NI LabVIEW 论坛上问过这个问题](http://forums.ni.com/t5/LabVIEW/Writing-context-help-in-labview/td-p/1975683)并得到了相同的答案。

来自 NI 网站：[在即时帮助窗口中格式化文本](http://zone.ni.com/reference/en-XX/help/371361H-01/lvhowto/bold_context_help_text/)

# java - ObjectInputStream.readObject() 中的 ClassNotFoundException

> ID：10422456
> 
> 赞同：0
> 
> 时间：2012-05-02T22:14:34.383
> 
> 标签：java, serialization, classnotfoundexception, objectinputstream

我正在尝试将客户端应用程序传递的对象转换为服务器应用程序中相同类的对象。

我目前在服务器应用程序中收到的错误是：

```
mei 02, 2012 11:44:43 PM server.UserThread process
SEVERE: null
java.lang.ClassNotFoundException: client.User 
```

服务器正在通过 Socket -> ObjectInputStream 接收对象。

所以我想知道你们是否可以帮助我将 client.User 类转换为我的 Server.User 类。唯一可行的是将包放在 1 个项目中，然后定义类的确切位置。

始终可以提供代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:10:39.770

> 将 client.User 类转换为我的 Server.User 类

你不能。他们不是同一个班级。它们在不同的包装中。它们不一样。如果要在服务器和客户端之间共享一个类，则必须共享一个 .class 文件。这可能意味着为共享内容创建第三个包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:45:20.063

正如一些用户在回答您的问题时建议的那样，这些类必须相同。使用默认的序列化过程来展平和膨胀对象似乎不是一个好选择。[如果您使用Externalizable](http://docs.oracle.com/javase/7/docs/api/java/io/Externalizable.html)接口，您可以定义自己的协议，而不是 Serializable，您可以使用 writeExternal 和 readExternal 来自定义序列化过程。

如果您尝试将对象从服务器发送到客户端，我真的不鼓励使用对象流。我可以建议[Protobuff](http://code.google.com/p/protobuf/)这样做吗？

> 原型：
> 
> 协议缓冲区是一种以高效且可扩展的格式对结构化数据进行编码的方法。Google 几乎所有内部​​ RPC 协议和文件格式都使用协议缓冲区。

# doctype - Yesod Hamlet 中有哪些可用的文档类型？

> ID：10422458
> 
> 赞同：1
> 
> 时间：2012-05-02T22:14:40.380
> 
> 标签：doctype, yesod, hamlet

在哈姆雷特中，`$doctype 5`生成`<!DOCTYPE html>`. [Yesod 书说](http://www.yesodweb.com/book/shakespearean-templates)“我们支持 a 的许多不同版本`doctype`”，但没有记录这些。还支持哪些其他文档类型，语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:44:54.660

您可以在源代码中查看列表：

[https://github.com/yesodweb/shakespeare/blob/master/hamlet/Text/Hamlet/Parse.hs#L526](https://github.com/yesodweb/shakespeare/blob/master/hamlet/Text/Hamlet/Parse.hs#L526)

这背后的理论是人们会要求他们需要的所有其他文档类型，一旦我们有了一个完整的列表，我们就会把它放在文档中。似乎没有人关心 HTML 5 文档类型。

# asp.net - ASP.NET Web API 中除 IQueryable 之外的 OData 查询和类型

> ID：10422460
> 
> 赞同：4
> 
> 时间：2012-05-02T22:14:44.753
> 
> 标签：asp.net, rest, asp.net-web-api, odata

我正在构建一个返回 Atom 或 RSS 提要的 ASP.NET Web API 应用程序。为此，它构建 a`System.ServiceModel.Syndication.SyndicationFeed`和一个 custom`MediaTypeFormatter`负责处理 HTTP Accept Header，将 转换`SyndicationFeed`为 an`Atom10FeedFormatter`或 an `Rss20FeedFormatter`，并将结果流式传输到响应流。到目前为止，一切都很好。

我的控制器看起来像这样：

```
    公共类 FeedController : ApiController
    {
        公共 HttpResponseMessage 获取（）
        {
            FeedRepository feedRepository = new FeedRepository();
            HttpResponseMessage<SyndicationFeed> successResponseMessage = new HttpResponseMessage<SyndicationFeed>(feedRepository.GetSyndicationFeed());
            返回成功响应消息；
        }
    }

```

我想做的是利用内置的 OData 查询来过滤我的提要，但是将`Get()`方法的返回类型更改为`IQueryable<SyndicationFeed>`显然不起作用，因为 a`SyndicationFeed`没有实现`IQueryable`.

有没有办法在`IEnumerable<SyndicationItem>`属性上使用内置的 OData 查询`SyndicationFeed`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:48:01.927

这个问题不再相关，因为 Microsoft 删除了 Web API Beta 版本中对 OData 查询的基本支持。

未来的版本将包括更完整的 OData 支持。可以通过 CodePlex 和 NuGet 获得早期版本，这里有更多详细信息：http: [//blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net -web-api.aspx](http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T16:24:19.737

System.Linq 命名空间为接口提供了一个名为AsQueryable[的](http://msdn.microsoft.com/en-us/library/bb353734.aspx)`IEnumerable`扩展方法。您的代码将如下所示：

```
public class FeedController : ApiController
{
    public IQueryable<SyndicationFeed> Get()
    {
        FeedRepository feedRepository = new FeedRepository();

        //TODO: Make sure your property handles empty/null results:
        return feedRepository.GetSyndicationFeed()
                   .YourEnumerableProperty.AsQueryable();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-29T16:33:06.383

使用 OData 时，您不必从控制器返回 IQuerable。检查[https://docs.microsoft.com/en-us/aspnet/web-api/overview/odata-support-in-aspnet-web-api/supporting-odata-query-options上的“直接调用查询选项”部分](https://docs.microsoft.com/en-us/aspnet/web-api/overview/odata-support-in-aspnet-web-api/supporting-odata-query-options)

对于您的情况，它看起来像：

```
public SyndicationFeed Get(ODataQueryOptions<SyndicationItem> opts)
{
    var settings = new ODataValidationSettings();

    opts.Validate(settings);

    SyndicationFeed result = feedRepository.GetSyndicationFeed();

    result.Items = opts.ApplyTo(result.Items.AsQuerable()).ToArray();

    return result;
} 
```

# css - 结合不同的溢出属性

> ID：10422461
> 
> 赞同：1
> 
> 时间：2012-05-02T22:14:46.037
> 
> 标签：css, overflow

我正在尝试创建类似于 OS X 的列视图的多线程导航：

![起点：带箭头的漂亮列](../Images/28a8bc87a2dc2d25afdcf8455a0f8a0b.png)

在此处的标记中，我有一个列表列表，位于`<nav>`具有定义高度的父项中。然后每个`li`都以定义的宽度和 a 向左浮动`height: 100%`。然后我使用[css 三角形技巧](http://css-tricks.com/snippets/css/css-triangle/)来制作小箭头，并将其放置在带有正数的下一列中`z-index`。到目前为止，一切都很好。

但是，第 2 列太长：我希望它滚动。但是，当我分配`ul`一个`overflow-y: auto`时，我得到：

![滚动条！ 滚动条无处不在！](../Images/e81fa2a266ff589a741543ebcf4e91d3.png)

等一下！所有这些滚动条是从哪里来的！？我不想要 x 的滚动条！但即使我设置`overflow-x: visible`了，它也会忽略它并给我一个滚动条。遗憾的是，这是[指定](http://www.w3.org/TR/css3-box/#collapse-scroll)的。是否有针对此的 CSS 解决方法？我是否必须编写一些古怪的 JavaScript 才能对列表滚动和重新定位箭头做出反应？

编辑：添加了[jsbin](http://jsbin.com/agugeq/3)

# jquery - 在jQuery中随机化一个值

> ID：10422467
> 
> 赞同：1
> 
> 时间：2012-05-02T22:15:27.233
> 
> 标签：jquery, html, slider

该滑块 FancyTransitions 不支持随机效果。所以要解决这个问题，我需要`effect: 'curtain'`随机的值，可以是“窗帘”、“拉链”或“波浪”。除非有更好的解决方法。

```
<script type="text/javascript">
    $(document).ready( function(){
        $('#slideshowHolder').jqFancyTransitions({
        width: 500, // width of panel
        height: 333, // height of panel
        strips: 10, // number of strips
        delay: 4000, // delay between images in ms
        stripDelay: 50, // delay beetwen strips in ms
        titleOpacity: 0.7, // opacity of title
        titleSpeed: 1000, // speed of title appereance in ms
        position: 'alternate', // top, bottom, alternate, curtain
        direction: 'random', // left, right, alternate, random, fountain, fountainAlternate
        effect: 'curtain', // curtain, zipper, wave
        navigation: false, // prev next and buttons
        links : false // show images as links                                                   });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:19:34.947

你的意思是

```
effect: ['curtain', 'zipper', 'wave'][Math.floor(Math.random() * 3)] 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:22:57.077

尝试类似...

```
var effect;
var i = Math.floor((Math.random()*3)+1);

if (i==1) effect = "curtain";
if (i==2) effect = "zipper";
if (i==3) effect = "wave"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T22:30:40.150

```
var effects = ["curtain", "zipper", "wave"];

$(document).ready( function(){
    $('#slideshowHolder').jqFancyTransitions({
    ...
    effect: effects[Math.floor(Math.random() * 3)], // curtain, zipper, wave
    ...
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T23:50:54.353

插件没有过渡回调，因此您需要对其进行修改以允许随机化效果参数。

在插件代码中添加`params.effect = ['curtain', 'zipper', 'wave'][Math.floor(Math.random() * 3)];`到`$.transition`函数的顶部会随机设置每个过渡的效果参数。未经测试，但这应该是方式。

我强烈建议使用更好的幻灯片插件，例如[循环](http://jquery.malsup.com/cycle/)或[nivo-slider](http://nivo.dev7studios.com/)。

# java - Swing 中的 Java 任务进度条

> ID：10422468
> 
> 赞同：3
> 
> 时间：2012-05-02T22:15:48.150
> 
> 标签：java, swing, jprogressbar

我需要一个关于在 Java 中开发 GUI 的进度条的非常简单的（骨架）教程。进度条可以是“不确定的”，最好有一个可更新的文本标签。

这是一些骨架代码，我希望有人可以对其进行扩展以使其正常工作。

```
class MyFunView extends FrameView {

  // class vars and other stuff...

  @Action
  public void excitingButtonPressed() {

     /* I have n files to download */
     // Download file 1, set progress bar status to "downloading file 1"
     // ...
     // Download file n, set progress bar status to "downloading file 2"

  }

} 
```

基本上，我如何以及如何包装我的下载代码？（我知道需要某种 Task 的子类？）

提前非常感谢。

编辑：

我们都只有这么多宝贵的时间来活着，而且没有任何方法可以像我希望的那样用尽可能少的代码或时间来完成，所以我不会使用进度条。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T22:19:23.057

> 我需要一个关于在 Java 中开发 GUI 的进度条的非常简单的（骨架）教程。

*   [如何使用进度条](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)

*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

*   [初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

*   [事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

*   [摇摆工人](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

*   [这里的例子](http://www.java2s.com/Code/Java/Swing-JFC/CatalogSwing-JFC.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T22:19:26.753

You can use [SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html) in conjunction with a [JProgressBar](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html).

The other alternative is to execute your task (e.g. `Runnable`) and periodically update the `JProgressBar`. Beware though, that in Swing any UI manipulations have to be done on the [EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html). `SwingWorker` has a nice property of taking care of this detail. Your own solution will have to use `SwingUtilities.invokeLater`,. for example:

```
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        progressBar.setValue(progressCounter++);
    }
}); 
```

Lot of code for a stupid thing, isn't it? Maybe the `SwingWorker` with a `PropertyChangeListener` is a better solution in the end...

# ios - 无法在 Xcode 4 中创建快照

> ID：10422470
> 
> 赞同：2
> 
> 时间：2012-05-02T22:15:58.493
> 
> 标签：ios, xcode, snapshot

当我尝试创建新快照时，它以以下消息结束：

```
The following paths are ignored by one of your .gitignore files: /Users/path/to/project/.svn
Use -f if you really want to add them.
fatal: no files added 
```

我发现的所有其他主题都是关于 .DS_Store 文件的类似问题。我在项目目录中找到了 3 个 .gitignore 文件，但没有一个包含 .svn

我该怎么做才能让它发挥作用？

# python - 是否可以在 Python 中定义 Tcl 过程？

> ID：10422474
> 
> 赞同：2
> 
> 时间：2012-05-02T22:16:03.277
> 
> 标签：python, menu, tcl, tk

根据本[教程](http://www.tkdocs.com/tutorial/menus.html#platformmenus)，您需要定义一个名为的 Tcl 过程`::tk::mac::ShowPreferences`，以使应用程序菜单上的首选项... 选项处于活动状态。是否有可能在 Python 中做到这一点？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T22:26:34.297

似乎有可能，至少 IDLE 是这样做的。它的[源代码](http://hg.python.org/cpython/file/tip/Lib/idlelib/macosxSupport.py#l136)包含以下行：

```
root.createcommand('::tk::mac::ShowPreferences', config_dialog) 
```

如果你用谷歌搜索`createcommand`你会发现其他相关的 OSX 示例。

# android - Android MotionEvent 一致性保证

> ID：10422476
> 
> 赞同：1
> 
> 时间：2012-05-02T22:16:27.280
> 
> 标签：android, android-view

Android 类文档中标题为*Consistency Guarantees*`MotionEvent`的部分指出，视图应该能够处理异常情况，例如在`ACTION_DOWN`没有先接收到的情况下接收和`ACTION_UP`。这是否意味着一个视图应该能够容忍任何可以想象的异常情况，例如在没有先接收到的`ACTION_POINTER_DOWN`情况下接收到一个`ACTION_DOWN`，或者在`ACTION_MOVE`没有先接收到一个的情况下接收到一个`ACTION_DOWN`？`MotionEvent`有什么保证吗？

# css - 通过 CSS 嵌入字体；似乎没有任何工作

> ID：10422478
> 
> 赞同：0
> 
> 时间：2012-05-02T22:16:36.033
> 
> 标签：css, fonts, embed

我在这里遇到了很多问题，但我不明白为什么我正在做的事情不起作用——但事实并非如此。我想在网站中使用几个非标准字体，通过 css 嵌入。

这是我从 FontSquirrel 得到的 CSS 的样子：

```
@font-face {
    font-family: 'CrimsonRoman';
    src: url('Crimson-Roman-webfont.eot');
    src: url('Crimson-Roman-webfont.eot?#iefix') format('embedded-opentype'),
         url('Crimson-Roman-webfont.woff') format('woff'),
         url('Crimson-Roman-webfont.ttf') format('truetype'),
         url('Crimson-Roman-webfont.svg#CrimsonRoman') format('svg');
    font-weight: normal;
    font-style: normal; 
```

这是我的主要 CSS 样式表中引用它的地方：

```
p {
  margin: 0 0 9px;
  font-family: 'CrimsonRoman', Garamond, Times, Times New Roman, serif;
  font-size: 13px;
  line-height: 18px;
} 
```

现在一切都在同一个目录中，所以我什至还没有处理目录导航。“p”声明本身似乎正在工作，因为如果我将第一个术语更改为“Crimson”，即字体在我的计算机上的名称，它会很好地加载它（或者如果我将它切换到我在本地安装的任何其他字体）。不管是什么问题，我都没有看到。

两张表都在我的 html 文档中成功链接，并且字体链接在主表之前。

我正在使用 Firefox 进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:23:37.560

确保您的目录路径正确并指向您的字体在服务器上的文件夹。

例如

```
@font-face {
    font-family: 'CrimsonRoman';
    src: url('/fonts/Crimson-Roman-webfont.eot');
    src: url('/fonts/Crimson-Roman-webfont.eot?#iefix') format('embedded-opentype'),
         url('/fonts/Crimson-Roman-webfont.woff') format('woff'),
         url('/fonts/Crimson-Roman-webfont.ttf') format('truetype'),
         url('/fonts/Crimson-Roman-webfont.svg#CrimsonRoman') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:17:49.613

事实证明，这与 Dreamweaver 如何呈现页面或读取 CSS 等有关。我最终将所有内容上传到该站点，以便向几个人展示发生了什么以及神秘地加载的字体。所以我今晚的教训是将 Dreamweaver 的设计视图视为一个可能不准确的草图，并在我花费数小时试图修复未损坏的东西之前准确地查看它们将在哪里。:\

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T22:31:12.727

不是您要寻找的答案，但我真的想建议为此使用 Cufon。[（直接链接到Cufon）](http://cufon.shoqolate.com/generate/)

尽管@font-face 越来越多地被 IE 等浏览器支持，但它仍然不能在每台计算机上完美运行。正如我们所说，Cufon 得到以下机构的支持：

*   Internet Explorer 6、7 和 8
*   Internet Explorer 9 beta（从 1.09i 开始）
*   火狐浏览器 1.5+
*   野生动物园 3+
*   Opera 9.5+（9.01+ 1.10）
*   谷歌浏览器 1.0+
*   iOS 2.0+
*   Opera Mini（在一定程度上）

...并在这种方式旁边提供更酷的字体选项。

# ios5 - UITableViewController 并在其上推送 DetailViewController

> ID：10422482
> 
> 赞同：0
> 
> 时间：2012-05-02T22:16:50.523
> 
> 标签：ios5, uinavigationcontroller, uitableview

我有一个 UITableViewController 并想推送一个 DetailViewController ： UIViewController。我是否需要使 UITableViewController 成为 UINavigationController 的一部分，或者我可以只从 UITableViewController 执行 pushViewController 吗？

我知道 UINavigationController（和 UITabBarController）有一个 viewController 的数组来管理视图控制器的查看。UITableViewController 是否具有相同的功能？

对不起，如果问题听起来令人费解。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:53:43.543

如果你想要一个可以推送和弹出视图控制器的导航堆栈，你需要 UINavigationController。

最简单的方法是将您的 UITableViewController 放入 UINavigationController（假设它是显示的第一个屏幕），然后您可以从控制器进行简单的推送。它看起来像这样：

```
// First create viewController and then push it like this:
[self.navigationController pushViewController:viewController animated:YES]; 
```

# c++ - 如何在构造函数中初始化 char 数组？

> ID：10422487
> 
> 赞同：11
> 
> 时间：2012-05-02T22:17:14.063
> 
> 标签：c++, arrays, char

我在声明和初始化 char 数组时遇到问题。它总是显示随机字符。我创建了一小段代码来展示我在更大的程序中尝试的内容：

```
class test
{
    private:
        char name[40];
        int x;
    public:
        test();
        void display()
        {
            std::cout<<name<<std::endl;
            std::cin>>x;
        }
};
test::test()
{
    char name [] = "Standard";
}

int main()
{   test *test1 = new test;
    test1->display();
} 
```

抱歉，如果我的格式不好，我几乎无法弄清楚这个网站，更不用说如何修复我的代码了 :(

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T22:30:47.837

如果没有特别的理由不使用`std::string`，请使用`std::string`。

但是如果你真的需要初始化那个字符数组成员，那么：

```
#include <assert.h>
#include <iostream>
#include <string.h>
using namespace std;

class test
{
    private:
        char name[40];
        int x;
    public:
        test();
        void display() const
        {
            std::cout<<name<<std::endl;
        }
};

test::test()
{
    static char const nameData[] = "Standard";

    assert( strlen( nameData ) < sizeof( name ) );
    strcpy( name, nameData );
}

int main()
{
    test().display();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T22:28:45.940

您的构造函数没有设置成员变量`name`，而是声明了一个局部变量。一旦局部变量在构造函数结束时超出范围，它就会消失。同时成员变量仍然没有初始化并且被随机垃圾填充。

如果要使用老式字符数组，还需要使用老式函数，例如`strcpy`复制到成员变量中。如果您只想将其设置为空字符串，则可以使用`name[0] = 0`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-02T22:23:28.717

考虑到您将问题标记为 C++，您应该使用`std::string`：

```
#include <string>

class test
{
    private:
        std::string name;
        int x;
    public:
        test();
        void display()
        {
            std::cout<<name<<std::endl;
            std::cin>>x;
        }
};
test::test() : name("Standard")
{

} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-02T22:23:21.743

由于您使用的是 C++，我建议使用字符串而不是 char 数组。否则，您需要使用 strcpy （或朋友）。

此外，您忘记删除 test1 实例。

```
#include <iostream>
#include <string>

class test
{
    private:
        std::string name;
        int x;
    public:
        test();
        void display()
        {
            std::cout<<name<<std::endl;
        }
};

test::test()
{
    name = "Standard";
}

int main()
{   
    test test1;
    test1.display();

    std::cin>>x;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-16T00:40:13.030

[c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")实际上提供了两种方法来做到这一点。您可以在其声明行中默认成员，也可以使用构造函数初始化列表。

声明行初始化示例：

```
class test1 {
    char name[40] = "Standard";
public:
    void display() { cout << name << endl; }
}; 
```

构造函数初始化示例：

```
class test2 {
    char name[40];
public:
    test2() : name("Standard") {};
    void display() { cout << name << endl; }
}; 
```

您可以在此处查看这两个示例：http: [//ideone.com/zC8We9](http://ideone.com/zC8We9)

我个人的偏好是使用声明行初始化，因为：

1.  在不需要构造其他变量的情况下，这允许使用生成的默认构造函数
2.  在需要多个构造函数的情况下，这允许变量仅在一个位置初始化，而不是在所有构造函数初始化列表中

* * *

说了这么多，使用 a`char[]`作为生成的默认赋值运算符可能会被认为是有害的，并且复制/移动构造函数将不起作用。这可以通过以下方式解决：

1.  制作会员`const`
2.  使用 a `char*`（如果成员将包含除文字字符串之外的任何内容，则此方法将不起作用）
3.  一般情况下`std::string`应该优先

# iphone - 在iOS中从数组到数组的appendString

> ID：10422490
> 
> 赞同：0
> 
> 时间：2012-05-02T22:17:19.607
> 
> 标签：iphone, ios, nsmutablearray, append

我有 2 个包含字符串的独立 Plist NSMutableArrays。

第一个数组示例包含以下产品：

足球、羽毛球拍、网球、

第二个数组包含上述产品的数量：

12、5、17、

我想要实现的是将数量添加到产品名称的末尾，即如下所示：

足球数量：(12)，羽毛球拍数量：(5)，网球数量：(17)，

NSMutableString *emailString = [NSMutableString 字符串];

```
for(int i = 0; i < [theProducts count]; i++) {

    NSString *str = [theProducts objectAtIndex:i];
    [emailString appendString:[NSString stringWithFormat:@"<br /> %@: QTY: %@", str, theQuantity]];
} 
```

任何有关执行此操作的最佳方法的建议将不胜感激。我已经查看了附加字符串方法并循环将字符串添加到上述数组中的字符串但是我似乎无法让它工作:-(

感谢您的关注！

更新：

这对我有用

```
 NSMutableString *emailString = [NSMutableString string];

for(int i = 0; i < [theProducts count]; i++) {

     NSString *result = [NSString stringWithFormat: @"<br /> %@ QTY: (%d)", [theProducts objectAtIndex: i], [[theQuantity objectAtIndex: i] intValue], nil];
    [emailString appendString:[NSString stringWithFormat:@"%@", result]];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:30:22.350

这是一种方法（未经测试的代码，我直接想到了）：

```
NSMutableArray *newArray = [[NSMutableArray alloc] init];
int i = 0;

for (NSString *what in itemArray) {
    [newAray addObject:[NSString stringWithFormat:@"%@: (%d)", what, [quantityArray objectAtIndex:i]]];
    i++
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:30:25.317

有很多方法可以做到这一点，但我可能会使用这样的东西：

```
 NSString *result = [NSString stringWithFormat: @"%@ QTY: (%d)", name, quantity, nil]; 
```

您可以用您的字符串数组替换名称，并以任何有意义的方式从第二个数组中获取数量。如果第一个数组称为名称，第二个是称为数量的 NSNumber 对象数组，则该行可能如下所示：

```
 NSString *result = [NSString stringWithFormat: @"%@ QTY: (%d)", [names objectAtIndex: i], [[quantities objectAtIndex: i] intValue], nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T22:31:07.757

那不应该那么难...代码超出我的想法。所以可能会有错误;)。

```
int i = 0;
int len = products.count;

for(i = 0; i < len; i++) {
   [NSString stringWithFormat:@"%@ QTY: (%d)", [products objectAtIndex:i], ([quantities objectAtIndex:i]]
} 
```

*注意：您必须检查两个数组是否具有相同的计数。所以最好还是在前面插入一个断言来检查那个条件。*

# jquery - jQuery在附加元素内追加

> ID：10422501
> 
> 赞同：19
> 
> 时间：2012-05-02T22:18:21.787
> 
> 标签：jquery, append

我有以下有效的 jQuery 代码，但它让我思考是否可以对正在附加的内容执行附加操作，而无需指定我想要附加的内容。`append().append()`没有做到这一点，它只是将两个元素放在一起，而不是第一个`append()`动作的子元素。

# 作品：

```
var container = $('#container'),
    child = 'child';

$('#container').append($('<div/>',{
    'id'    : 'child'
}));

$('#' + child).append($('<a/>', {
    'class' : 'close',
    'href'  : 'javascript:;',
    html    : 'close',
    click   : function(e){
        e.preventDefault();
        $('#' + child).remove();
    }
})); 
```

# 不工作：

```
var container = $('#container'),
    child = 'child';

$('#container').append($('<div/>',{
    'id'    : 'child'
})).append($('<a/>', {
    'class' : 'close',
    'href'  : 'javascript:;',
    html    : 'close',
    click   : function(e){
        e.preventDefault();
        $('#' + child).remove();
    }
})); 
```

[http://jsfiddle.net/Y8TwW/1/](http://jsfiddle.net/Y8TwW/1/)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-02T22:25:44.303

您可以使用[`.appendTo()`](http://api.jquery.com/appendTo/)将第一个附加`<div>`到具有 ID 容器的元素，以便您可以引用该新元素，然后使用`.append()`：

```
$('<div/>',{
    'id'    : 'child'
}).appendTo('#container').append(
    $('<a/>', {
        'class' : 'close',
        'href'  : 'javascript:;',
        html    : 'close',
        click   : function(e){
            e.preventDefault();
            $('#' + child).remove();
        }
    })
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T22:55:37.370

因为`append`不返回对附加内容的引用。它指的是同一个对象，即`container`在第一次追加之后，或者无论您将运行多少次追加。因此，作为其他建议的用途`appendTo`，或者您可以使用以下内容来更好地说明您失败的原因：

```
var container = $('#container'),
child = 'child';

$('#container').append($('<div/>',{
    'id'    : 'child'
})).find('#' + child).append($('<a/>', {
    'class' : 'close',
    'href'  : 'javascript:;',
     html   : 'close',
     click  : function(e){
        e.preventDefault();
        $('#' + child).remove();
     }
}));​ 
```

小提琴[http://jsfiddle.net/Y8TwW/3/](http://jsfiddle.net/Y8TwW/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T22:24:41.367

我会使用 appendto，然后附加 [http://jsfiddle.net/Y8TwW/2/](http://jsfiddle.net/Y8TwW/2/)

```
var container = $('#container'),
    child = 'child';
$('<div/>', { 'id': child }
 ).appendTo(container
 ).append($('<a/>', {
    'class' : 'close',
    'href'  : 'javascript:;',
    html    : 'close',
    click   : function(e){
        e.preventDefault();
        $('#' + child).remove();
    }
})); 
```

# php - PHP/SSH 正则表达式脚本/命令从许多文件中删除相同的恶意软件代码

> ID：10422503
> 
> 赞同：3
> 
> 时间：2012-05-02T22:18:25.487
> 
> 标签：php, regex, wordpress, security

我有一种病毒，它感染了我客户的一台服务器上的数千个文件。

幸运的是，我已经在这个人的服务器上处理了许多其他恶意软件，而且这个看起来很容易做简单的正则表达式（他把他所有的网站都放在同一个帐户上：（但我正在与他一起解决这个问题）。

基本上，与我见过的大多数恶意软件不同，它在 GOOD 代码的关闭 ?> 之前注入 php（这使得很难确定什么是好代码/坏代码），这个当前的恶意软件总是添加一个新的`<?php ... malware ... ?>`.

所以基本上，说这里有很好的代码：

```
<?php
require('./wp-blog-header.php'); 
?> 
```

与其在 require 语句之后但在 ?> 之前立即添加某种 base64_decode eval（当页面碰巧以条件/复杂语句结束时，这会使删除变得困难），这将始终添加以下代码和 NEW`<?php ... ?>`像这样：

```
<?php
require('./wp-blog-header.php'); 
?><?php ... malware ...?> 
```

我不想在这里放任何恶意代码，但是，恶意代码总是这样开始的：

```
<?php @error_reporting(0); if (!isset($eva1fYlbakBcVSir)) {$eva1fYlbakBcVSir = "tons and tons of characters";$eva1tYlbakBcVSir = "\x6335\1443\3x6f\1534\x70\170\x65";$SNIPSNIPSNIPSNIP;} ?> 
```

我想搜索每个文件`<?php @error_reporting(0); if (!isset`，如果它是页面上的最后一个 PHP 语句，则删除

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T22:46:31.387

这是使用纯 php 清理整个项目的方法。

> 在任何情况下，我均不对任何损害承担任何责任，包括但不限于因使用提供的代码而引起、导致或以任何方式与之相关的直接、间接、特殊或后果性损害，无论是否基于在保证、合同、侵权或其他方面；伤害是否由人员或财产或其他原因造成；以及是否因使用此代码的结果而遭受损失或产生损失。;p

```
<?php 
//Enter it as it is and escape any single quotes
$find='<?php @error_reporting(0); if (!isset($eva1fYlbakBcVSir)) {$eva1fYlbakBcVSir =\'\';?>';

echo findString('./',$find);

function findString($path,$find){
    $return='';
    ob_start();
    if ($handle = opendir($path)) {
        while (false !== ($file = readdir($handle))) {
            if ($file != "." && $file != "..") {
                if(is_dir($path.'/'.$file)){
                    $sub=findString($path.'/'.$file,$find);
                    if(isset($sub)){
                        echo $sub.PHP_EOL;
                    }
                }else{
                    $ext=substr(strtolower($file),-3);
                    if($ext=='php'){
                        $filesource=file_get_contents($path.'/'.$file);
                        $pos = strpos($filesource, $find);
                        if ($pos === false) {
                            continue;
                        } else {
                        //The cleaning bit
                        echo "The string '".htmlentities($find)."' was found in the file '$path/$file and exists at position $pos and has been removed from the source file.<br />";
                        $clean_source = str_replace($find,'',$filesource);
                        file_put_contents($path.'/'.$file,$clean_source);
                        }
                    }else{
                        continue;
                    }
                }
            }
        }
        closedir($handle);
    }
    $return = ob_get_contents();
    ob_end_clean();
    return $return;
}
?> 
```

祝你好运。

## 更新（使用正则表达式）：

```
<?php 
error_reporting(E_ALL);
$find='<\?php @error_reporting\(0\); if \(!isset\((.*?)\?>';

echo findString('./',$find);

function findString($path,$find){
    $return='';
    ob_start();
    if ($handle = opendir($path)) {
        while (false !== ($file = readdir($handle))) {
            if ($file != "." && $file != "..") {
                if(is_dir($path.'/'.$file)){
                    $sub=findString($path.'/'.$file,$find);
                    if(isset($sub)){
                        echo $sub.PHP_EOL;
                    }
                }else{
                    $ext=substr(strtolower($file),-3);
                    if($ext=='php'){

                        $filesource=file_get_contents($path.'/'.$file);
                        //The cleaning bit
                        echo "The string '".htmlentities($find)."' was found in the file '$path/$file and has been removed from the source file.<br />";
                        $clean_source = preg_replace('#'.$find.'#','',$filesource);
                        // $clean_source = str_replace($find,'',$filesource);
                        file_put_contents($path.'/'.$file,$clean_source);
                    }else{
                        continue;
                    }
                }
            }
        }
        closedir($handle);
    }
    $return = ob_get_contents();
    ob_end_clean();
    return $return;
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:43:30.980

到目前为止，这是最接近的（谢谢 mvds）

`sed -e "s/<?php @error_reporting.*?>//g" --in-place=_cleaned *`

尽管 --in-place=_cleaned 给出了错误`sed: illegal option -- -`

# python - line, = plot(x,sin(x)) 逗号代表什么？

> ID：10422504
> 
> 赞同：12
> 
> 时间：2012-05-02T22:18:32.463
> 
> 标签：python, numpy, matplotlib

我正在尝试制作动画情节。这是一个示例代码：

```
from pylab import *
import time

ion()

tstart = time.time()               # for profiling
x = arange(0,2*pi,0.01)            # x-array
line, = plot(x,sin(x))
for i in arange(1,200):
    line.set_ydata(sin(x+i/10.0))  # update the data
    draw()                         # redraw the canvas

print 'FPS:' , 200/(time.time()-tstart) 
```

我不明白`line,`。没有逗号，代码将不起作用。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-02T22:22:40.697

逗号是表示单元素元组的 Python 语法。例如，

```
>>> tuple([1])
(1,) 
```

在这种情况下，它用于参数解包：`plot`返回一个单元素列表，该列表被解包为`line`：

```
>>> x, y = [1, 2]
>>> x
1
>>> y
2
>>> z, = [3]
>>> z
3 
```

另一种可能更易读的方法是使用类似列表的语法：

```
>>> [z] = [4]
>>> z
4 
```

虽然`z, =`在 Python 代码中更常见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-25T02:47:58.750

情况1：

```
a=1,
type(a)
tuple 
```

案例2：

```
a=1
type(a)
int 
```

# linq - LINQ to CRM - 或在 Where 子句中

> ID：10422514
> 
> 赞同：3
> 
> 时间：2012-05-02T22:19:31.133
> 
> 标签：linq, dynamics-crm-2011, dynamics-crm, crm, microsoft-dynamics

我正在尝试使用 LINQ 从 Dynamics CRM 2011 中获取一些数据。目标是使所有联系人记录自特定日期以来发生更改或子实体（PERC 文件）自同一日期以来发生更改。查询如下所示：

```
// Bring all students who have changes (at Contact entity) after specific date
// momentInTime or the status of any of their perc files has been changed since
// that date 
var students = (from c in ContactSet
                join pl in cga_portallogonSet on c.Id equals pl.cga_ContactId.Id
                join ef in cga_percfileSet on c.Id equals ef.cga_StudentId.Id
                where
                    (pl.cga_PortalLogonRole.Value == 284970000) // student
                where
                    (c.ModifiedOn >= momentInTime || c.CreatedOn > momentInTime)
                    ||
                    (ef.cga_statuschangedate >= momentInTime)
                select c.cga_StudentNumber).Distinct().ToList(); 
```

这会产生以下错误消息：

> 'Contact' 实体不包含 Name = 'cga_statuschangedate' 的属性。

我无法弄清楚如何对两个不同的实体进行 OR。MSDN 说每个实体都需要 WHERE 子句：

> where 子句
> 
> 为了过滤结果集，可以针对一个或多个 >entities 添加 where 子句。每个 where 子句只能包含针对单个实体类型的条件。>涉及多个实体的复合条件无效。相反，每个实体 > 应该在单独的 where 子句中过滤。

[http://msdn.microsoft.com/en-us/library/ff681565.aspx](http://msdn.microsoft.com/en-us/library/ff681565.aspx)

有没有另一种方法来实现我所需要的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T03:15:45.263

不幸的是，您无法在单个 linq 语句中实现您想要的，因为他们使用的 liunq 提供程序归结为 fetchXML，而 fetchXML 不支持您正在使用的场景。

更多细节... Fetch 为您提供实体或链接实体内部的条件。这些条件元素不能包含来自其他链接实体的属性，只有直接父实体或链接实体。[这是许多引用 fetchXML 限制的微软论坛帖子之一](http://social.microsoft.com/Forums/uk/crmdevelopment/thread/de488189-a44f-4a33-be55-cb9d6c0f1659)

可能不是你要找的答案，嗯？作为一个丑陋的替代方案，您可以运行两个单独的查询并在内存中进行过滤（这可能会损害性能）。或者更好的是，如果您是本地部署，您可以针对过滤后的视图编写一些 sql。祝你好运。

# css - @字体颜色？

> ID：10422517
> 
> 赞同：3
> 
> 时间：2012-05-02T22:19:47.487
> 
> 标签：css, colors, font-face

我正在尝试使用在网站上放置一些特定字体

```
@font-face 
```

除了颜色，一切似乎都很好。

有没有办法改变`.otf`CSS中字体的颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T22:21:18.497

您将使用选择器进行声明。

例如

```
p {
    font-family: 'AsapRegular';
    color: #c50000;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:22:42.037

像往常一样简单地更改颜色就足够了：

```
p { color:red; } 
```

确保它没有被覆盖，并且您的声明具有足够高的特异性。

# java - Salesforce - 通过 API 创建案例后触发自动响应规则

> ID：10422523
> 
> 赞同：5
> 
> 时间：2012-05-02T22:20:15.677
> 
> 标签：java, email, rest, salesforce

我正在使用 Salesforce REST API 创建案例。我将 SuppliedEmail 字段分配给创建案例的用户的电子邮件，以及所有其他必要的字段。该案例已在 Salesforce 中正确创建，但未触发为其设置的自动响应规则。我已经验证该规则有效且处于活动状态，该规则的所有条件都已满足，因此这不是规则不匹配的问题。

问题是在通过 API 创建案例后，salesforce 没有评估/触发自动响应规则。通过 SOAP API，您可以使用[EmailHeader](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_header_emailheader.htm)进行设置，但我找不到通过 REST API 进行设置的方法。

需要明确的是，我正在`/sobjects/Case`使用案例本身的 JSON 值作为请求正文向 URI 发出 POST 请求。

有没有办法`EmailHeader.triggerAutoResponseEmail`使用 REST API 将字段设置为 true，也许通过请求正文中的一些附加字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:58:03.040

好吧，更少的复杂性几乎总是以更少的功能为代价。API 标头的丢失就是其中之一。至少在 Java 中，您可以使用许多可用的工具包正确使用 WSDL，在 .NET 中，WCF 几乎是无用的，因为 MS 认为 SOAP 标头并不酷（该死的标准）。

因此，要么使用 WSDL/SOAP，要么创建将在创建案例时触发的工作流规则，并将电子邮件发送到所需地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-09T15:06:47.667

有可能的。

您需要将 REST API 与 APEX 代码结合起来，这就是它的工作方式。假设我们有一个基于 REST API 的案例创建功能按预期工作。在 APEX 中您需要做的就是添加一个触发器来处理以下功能：

```
trigger AfterCaseInsert on Case (after insert) {

    if (trigger.isAfter && trigger.isInsert) {

        List<Case> newlyInsertedCases = [SELECT Id From Case WHERE Id IN :trigger.new];

        Database.DMLOptions autoResponseOptions = new Database.DMLOptions();
        autoResponseOptions.EmailHeader.triggerAutoResponseEmail = true;

        for (Case c : newlyInsertedCases ) {
            Database.update(c, autoResponseOptions); 
        }   

    }
} 
```

有一个必须修改的 DMLOptions EmailHeader 选项。如果您使用 WSDL/SOAP，您可以在实际提交案例之前对其进行设置。在这里，将其注入案例创建过程的唯一方法是使用新选项更新刚刚创建的案例。但显然，执行案例插入需要两次以上的事务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-11T22:21:40.487

not able to comment (yet) but i wasnt able to get the dml options to trigger the auto-response rules. i ended up just creating the email in apex, which may hit the email limit in an extreme case. the one difference was that i wasnt using the dml through a trigger on the case, i was using it in the rest class that was creating the case, setting case options and inserting using dml.insert(case, options). case was being created, auto response rules not firing

# algorithm - graph - 如何获得最小权重连通子集？

> ID：10422524
> 
> 赞同：4
> 
> 时间：2012-05-02T22:20:17.453
> 
> 标签：algorithm, data-structures, graph, minimum-spanning-tree

这是一个消费税：

> 考虑从加权连通图 G 中找到最小权重连通子集 T 的问题。T 的权重是 T 中所有边权重的总和。给出一个计算最小权重连通子集 T 的有效算法。

这是我得到的：

1.  我必须假设权重是由正负混合的。对于这种消费税，只有两种权重的混合才有意义。

2.  我将首先对边缘进行排序，因此负边缘将首先出现。

3.  我会考虑使用 Kruskal 的算法，但应该进行一些修改

4.  因为我欢迎负边缘，所以我会尝试添加尽可能多的负边缘。

5.  此外，可以添加一些正边沿，以防并非所有负边沿都连接，并且它们可能需要一些正边沿作为桥接。

* * *

好的，以上是我的想法。但是当我试图弄脏我的手时，我被卡住了。

如何始终记录可能设置的最小权重？

例如，

{0, 1} 的权重为 -20

{2, 3} 的权重为 -10

如果 {1, 3} 的权重为 11，那么我当然不想要 {1, 3}

或者如果 {1, 3} 的权重为 9，那么我想要

使用哪种数据结构，我可以始终保持最小权重和该权重的顶点？

* * *

值得注意的是，本次消费税所针对的子集`edges`。

> 考虑从加权连通图 G中找到最小权重连通**子集 T 的问题**

这意味着仍然需要包含所有顶点。

它也不仅仅是一个 MST。考虑如果一个顶点有两条边，一条是-1，另一条是-2。在正常的 MST 算法中，只会采用 -2 的边。但是在这种消费税中，需要同时采用-1和-2来进一步降低整体重量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T22:38:27.037

我认为您的算法已经基本正确，但是稍作修改就变得微不足道了。

首先，必须包含*每个*负边缘以最小化最终的权重。接下来，计算连通分量的数量`c`。如果`c=1`，你就完成了。否则你需要额外的`c-1`积极边缘。

现在，当您添加负边缘时，已将其视为 Kruskal 算法过程。每个负边都可能将克鲁斯卡尔森林中的几棵树联合起来。但是，即使它的末端属于 Kruskal 森林中的同一棵树，您也要添加负边——这与通常的 Kruskal 算法不同，您只添加那些连接两棵不同树的边。

在这个阶段之后，你会得到一个`c`连接组件的图表（它们可能不再是树了）。现在像往常一样继续 Kruskal 算法。按递增顺序处理正边缘，跟踪您使用正边缘创建的联合数。一旦这个数字达到`c-1`，你就完成了。

顺便说一句，如果将森林表示为[不相交集数据结构](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)，则可以轻松实现 Kruskal 算法的所有过程。它只需要编写几行代码，然后跟踪已创建的联合的数量是微不足道的。

* * *

一些伪代码如下：

```
sort(edges);
c := n;
for edge in edges:
    if edge.weight < 0:
        if find(edge.firstEnd) != find(edge.secondEnd):
            --c;
        unite(edge.firstEnd, edge.secondEnd);
    else:
        if c == 1: break;
        if find(edge.firstEnd) != find(edge.secondEnd):
            unite(edge.firstEnd, edge.secondEnd);
            --c; 
```

这里`unite`和`find`是不相交集数据结构的功能。

# asp.net - 如何在结果集中添加额外的行以显示总计？

> ID：10422527
> 
> 赞同：1
> 
> 时间：2012-05-02T22:20:51.293
> 
> 标签：asp.net, sql, tsql

这是我的查询：

```
SELECT      p.Company
        ,   p.Project_ID
        ,   p.Name as 'Project_Name'
        ,   p.Company
        ,   t.Name as 'Task_Name'
        ,   r.Owner
        ,   t.Status
        ,   r.Work_Date
        ,   r.Minutes_Spent
        ,   r.Type
        ,   r.Description
FROM        TK_Project      p 
INNER JOIN  TK_Task         t
ON          p.Project_ID    = t.Project_ID 
JOIN        TK_Time_Record  r
ON          t.ID            = r.Task_ID
WHERE       p.Company       = 248 
AND         p.Name          = 'Technical Support'
AND         r.Work_Date     BETWEEN  '01/01/2012'  AND  '05/02/2012'
AND         r.Type          NOT LIKE '%non%'
--AND       (
--                  r.Type = 'Programming-Billable' 
--              OR  r.Type = 'Consulting-Billable'
--          )
AND         (
                    r.Type = 'Data Maintenance' 
                OR  r.Type = 'Tech Support-Billable' 
                OR  r.Type = 'Training'
            )
ORDER BY    r.Work_Date DESC 
```

这是它返回的数据：

```
Company Project_ID Project_Name      Company Task_Name         Owner   Status    Work_Date             Minutes_Spent Type                   Description
------- ---------- ----------------- ------- ----------------- ------- ------- ----------------------- ------------- --------------------- ------------
248     512        Technical Support 248     Technical Support Tim     Started 2012-03-06 00:00:00.000      15       Tech Support-Billable Notes.
248     512        Technical Support 248     Technical Support Patrick Started 2012-02-24 00:00:00.000      15       Data Maintenance      Notes.
248     512        Technical Support 248     Technical Support Tim     Started 2012-02-24 00:00:00.000      15       Tech Support-Billable Notes.
248     512        Technical Support 248     Technical Support Tim     Started 2012-02-14 00:00:00.000      15       Tech Support-Billable Notes.
248     512        Technical Support 248     Technical Support Tim     Started 2012-01-05 00:00:00.000      15       Tech Support-Billable Notes.
248     512        Technical Support 248     Technical Support Tim     Started 2012-01-04 00:00:00.000      15       Tech Support-Billable Notes. 
```

asp.net 或 sql 中获取 Minutes_Spent 列总数的最佳方法是什么？我试图让 WITH ROLLUP 工作，但无法正常工作。我试过 COMPUTE 但不能返回多个结果集（也许我可以但不确定如何在 asp.net 中访问它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:36:39.523

好吧，考虑到您的问题，我想侧面请求不是您想要的。
至于 asp，我发现这篇文章可能会让您感兴趣，尽管您已经尝试过：
[如何计算asp.net中数据表列的总和？](https://stackoverflow.com/questions/5892993/how-to-calculate-the-sum-of-the-datatable-column-in-asp-net)

如果过滤器有问题，请查看这篇文章：
[具有计算但没有过滤器的 SUM 数据表列](https://stackoverflow.com/questions/7466202/sum-datatable-column-with-compute-but-no-filter)

我希望它会帮助你！

# html - Salesforce 垂直响应电子邮件中的 URLENCODE 变量

> ID：10422540
> 
> 赞同：1
> 
> 时间：2012-05-02T22:21:50.793
> 
> 标签：html, salesforce, urlencode, force.com

这是一个相当简单的问题，但我无法从 Salesforce 中找到有关它的文档。

我正在设置来自 Salesforce Vertical Response 的 HTML 时事通讯，我需要在电子邮件正文中放置一个链接，该链接将转到另一个站点，该站点将用户的电子邮件地址作为查询字符串。我这样做是为了当用户单击 HTML 电子邮件中的链接时，他们将自动注册到不同的博客邮件列表。

该链接将如下所示`www.mywebsite.com/blog/subscribe?email=your_email@email.com`。我可以通过使用 {EMAIL_ADDRESS} 变量轻松完成此操作，因此链接如下所示：

```
<a href="http://www.mywebsite.com/blog/subscribe?email={EMAIL_ADDRESS}">Subsribe</a> 
```

这很有效，但是当用户收到电子邮件并单击链接时，“@”符号会从 URL 中删除。现在我想弄清楚如何解决这个问题。我看到了有关 SalesForce 的 URLENCODE() 函数的一些文档，但是当我尝试在 SalesForce 的 HTML 电子邮件编辑器中使用它时，就像`URLENCODE({EMAIL_ADDRESS})`它不执行它一样，而是将其逐字解释为文本。谁能帮我？甚至可以使用 SalesForce HTML 电子邮件编辑器中的功能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:11:28.837

我没有使用 VerticalResponse，但如果它依赖于 salesforce 通信模板，那么您始终可以创建一个电子邮件模板作为 Visualforce 页面。然后，您可以将`Encode`函数应用于合并字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:47:35.333

很高兴您能够找到解决方法。如果您再次处理 URL，最好在使用合并字段时禁用我们的点击跟踪。这可以通过在 http 之前添加 nr_ 来完成。示例：订阅 - 如果您尝试过但它不起作用，或者如果您有任何其他问题，请通过我们的支持渠道之一告诉我们：

support@verticalresponse.com 866-683-7842 x1 我们还提供实时聊天：http: [//help.verticalresponse.com/](http://help.verticalresponse.com/)

问候，

Keith Gluck VerticalResponse 客户支持

# javascript - Javascript 冲突 ajax 邮件和 scriptaculous

> ID：10422541
> 
> 赞同：0
> 
> 时间：2012-05-02T22:21:58.950
> 
> 标签：javascript

我添加了一个在指南中找到的 javascript 元素。如下

```
$(document).ready(function ()
    {
        $('.dropdownbutton').click(function ()
        {
        $.post("send.php", $(".mycontactform").serialize(),  function (data) 
            {   
            });
        $('#success').html('Message sent!');
        $('#success').hide(2000);
    });
}); 
```

现有的 javascript 是

```
 function toggleDisplayWait(divId, imgId, durationmSec) {
        if(!$(divId).visible()) {
            move = Effect.BlindDown;
            newImage = "./img/minus.png";
        }
        else {
            move = Effect.BlindUp;
            newImage = "./img/plus.png";  
        }        
        move(divId, {duration: durationmSec / 1000.0 });
        setTimeout(function() { $(imgId).src = newImage; }, durationmSec)
    }

function BDEffect(divId, imgId)
    {
        /* new Effect.BlindDown(element, {duration:3});
        }*/

        if(!$(divId).visible()) 
            {
                move = Effect.BlindDown;
                newImage = "./img/feedbacktab_open.png";
                setTimeout(function() { $(imgId).src = newImage; }, 0)
            }
        else 
            {
                move = Effect.BlindUp;
                newImage = "./img/feedbacktab.png";
                setTimeout(function() { $(imgId).src = newImage; }, 2)
            }        
            move(divId, {duration:2});
            /*setTimeout(function() { $(imgId).src = newImage; }, 0)*/
    }
</script> 
```

但是旧代码和新代码现在都不起作用。

当我尝试使用旧脚本时，错误控制台现在报告“$(divId).visible is not a function”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:51:03.317

旧代码看起来使用 Prototype 框架，而新代码使用 jQuery。

当您将两者一起使用时，您需要使用 jQuery `noConflict()`，这样它们就不会都尝试使用该`$`变量。

首先，在包含 jQuery 库之后，添加如下脚本：

```
<script>
  jQuery.noConflict()
</script> 
```

然后修改你的 jQuery 代码，如下所示：

```
jQuery(function ($) {
    $('.dropdownbutton').click(function() {
    $.post("send.php", $(".mycontactform").serialize(), function(data) {});
    $('#success').html('Message sent!');
    $('#success').hide(2000);
}); 
```

有了`noConflict`，在任何你想使用 jQuery 的地方，你都必须使用`jQuery`变量而不是`$`. 但是，你仍然可以`$`作为局部变量传入，并且不会与 Prototype 冲突。

另外，请注意，我将您的`document.ready(function() { ... })`函数更改为[jQuery 的简写版本](http://api.jquery.com/ready/): `jQuery(function() { ... })`。该函数还将传递`jQuery`对象，我`$`为方便起见命名。

# .net - 给定类型的任意值？

> ID：10422543
> 
> 赞同：0
> 
> 时间：2012-05-02T22:22:23.413
> 
> 标签：.net, libraries

我需要在 .NET 中指定一个值类型并获取一个任意值。

就像是：

```
var foo = _valuesCreator.GetArbitraryValue<int>(); // 4812
var foo = _valuesCreator.GetArbitraryValue<CacheItemPriority>(); // AboveNormal
var foo = _valuesCreator.GetArbitraryValue<DateTime>(); // 49 days ago at 2PM 
```

在我开始编写它之前，是否已经有一个流行的库来生成此类数据？

# php - Facebook 开发人员 - 致命错误：未捕获的 CurlException：26：创建表单发布数据失败

> ID：10422544
> 
> 赞同：1
> 
> 时间：2012-05-02T22:22:24.957
> 
> 标签：php, facebook, image, facebook-php-sdk

我在这个平台上阅读了很多，但似乎没有人得到关于我的问题的答案。

有我的代码：

```
$file= $str.".png";

$facebook->setFileUploadSupport(true);

$post_data = array(
  "message" => "my message."
); 
$post_data[basename($file)] = '@' . dirname(__FILE__) . '/'.$file.'';
$data = $facebook->api('/me/photos', 'post', $post_data); 
```

我得到一个 CurlException: 26 错误。我什至尝试使用这个：

```
$post_data[basename($file)] = '@' . realpath($file); 
```

但我得到了同样的错误。

我首先认为我的问题出在 $file 上。如果我对此进行回应，我的图像名称如下：0gwP7eDAtb2X.png

现在，如果我测试这段代码：

```
$post_data[basename($file)] = '@' . realpath(0gwP7eDAtb2X.png); 
```

图片已正确上传到我的墙上。

# sql - 如何计算结果集中前一行的工作日数？

> ID：10422545
> 
> 赞同：2
> 
> 时间：2012-05-02T22:22:32.680
> 
> 标签：sql, sql-server-2008, sql-server-2005

有人可以帮我解决这个令人困惑的情况吗？我有一个在 SQL Server 2008 中生成的表。

```
Number  Date
------  ---------
22619   30/06/11
22617   01/07/11
22556   03/07/11
22556   03/07/11
22560   04/07/11
22560   05/07/11
22560   08/07/11
22561   07/07/11
22561   17/07/11
22564   09/07/11
22564   20/07/11 
```

我想为每个数字从前一个角色生成天数，这些天数在下面相同。

我想返回以下内容：

```
Number  Date        Days
------  ----------  ----
22619   30/06/11       0
22617   01/07/11       0
22556   03/07/11       0
22556   03/07/11       0
22560   04/07/11       0
22560   05/07/11       1
22560   08/07/11       3
22561   07/07/11       0
22561   17/07/11      10
22564   09/07/11       0
22564   20/07/11      11 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:40:22.293

我想你想要这个：

```
with data as (
    select number = 22619, date = convert(datetime, '20110630') union all
    select 22617, convert(datetime, '20110701') union all
    select 22556, convert(datetime, '20110703') union all
    select 22556, convert(datetime, '20110703') union all
    select 22560, convert(datetime, '20110704') union all
    select 22560, convert(datetime, '20110705') union all
    select 22560, convert(datetime, '20110708') union all
    select 22561, convert(datetime, '20110707') union all
    select 22561, convert(datetime, '20110717') union all
    select 22564, convert(datetime, '20110709') union all
    select 22564, convert(datetime, '20110720')
)
select next.number, next.date, days = isnull(DATEDIFF(dd, prev.date, next.date),0)
from (
    select *, sequence_no = ROW_NUMBER() OVER(PARTITION BY number ORDER BY date ASC)
    from data
) next
left join (
    select *, sequence_no = ROW_NUMBER() OVER(PARTITION BY number ORDER BY date ASC)
    from data
) prev
on prev.number = next.number
and prev.sequence_no + 1 = next.sequence_no 
```

# c# - 数组的最小值和最大值

> ID：10422549
> 
> 赞同：-3
> 
> 时间：2012-05-02T22:22:45.770
> 
> 标签：c#, arrays

我正在编辑一个由谁知道，一位老师制作的程序。无论如何，它是显示存储在图表中显示的数组中的股票值。老师已经注意到图形 Y 轴不正确，但我们不必更改它。我们必须更改的是复选框的单选按钮，以便我们可以在图表上显示多个股票值。

因此，要绘制新图表，我们必须获得所选股票的最小和最大 Y 值。我决定去：

```
if (checkBox1.Checked == true)
{
    GetStockValues(0);
    maxVal[0] = StockArray.Max();
}
int maxValue = Convert.ToInt16(maxVal.Min());
return maxValue; 
```

minValue 也是如此。问题是我没有得到任何正确的数字。这是整个程序：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace VC2008_StockMktGraphics
{
    public partial class frmMaster : Form
    {
        // let's make the stock values array be public so we don't have to pass
        // them back and forth.

        public double[] StockArray = new double[ 30 ] ;
        public double[] minVal = new double [ 4 ];
        public double[] maxVal = new double[4];

        public frmMaster()
        {
            InitializeComponent();
        }

        private void frmMaster_Resize(object sender, EventArgs e)
        {
            this.Invalidate() ;
        }

        protected override void OnPaint(PaintEventArgs e)
            {
            int h = this.Bounds.Height ;
            int w = this.Bounds.Width ;

            Rectangle r = new Rectangle();

            // Create the graphics context to draw into
            Graphics gc = this.CreateGraphics() ;
            Pen pBl = new Pen( Color.Black , 2) ;
            SolidBrush sB = new SolidBrush(Color.Honeydew ) ;

            // if the window is too small, force it to a size
            if ( ( h < 200 ) || ( w < 200 ) )
            {
                this.Width = 200 ;
                this.Height = 200 ;
            }

            // Set dynamic location of graphics box
            r.X=Convert.ToInt32( Convert.ToDouble( w ) * 0.2 ) ;
            r.Y=Convert.ToInt32( Convert.ToDouble( w ) * 0.2 ) ;
            r.Width=Convert.ToInt32( Convert.ToDouble( w ) * 0.8 ) -r.X ;
            r.Height=Convert.ToInt32( Convert.ToDouble( h ) * 0.8 -r.Y );

            // draw the outer rectangle and fill with a light color
            gc.DrawRectangle(pBl, r);
            gc.FillRectangle(sB, r);

            // set the location of the buttons
            btnExit.Left = r.X + r.Width + 10;
            btnExit.Top = 10;
            chkStartAtZero.Left = r.X + r.Width + 10;
            chkStartAtZero.Top = btnExit.Top + 25;
            checkBox1.Left = r.X + r.Width + 10;
            checkBox1.Top = chkStartAtZero.Top + 25;
            checkBox2.Left = checkBox1.Left;
            checkBox2.Top = checkBox1.Top + 25;
            checkBox3.Left = checkBox2.Left;
            checkBox3.Top = checkBox2.Top + 25;
            checkBox4.Left = checkBox3.Left;
            checkBox4.Top = checkBox3.Top + 25;

            if (checkBox1.Checked == true)
                DrawStock(0, gc, r);
            if (checkBox2.Checked == true)
                DrawStock(1, gc, r);
            if (checkBox3.Checked == true)
                DrawStock(2, gc, r);
            if (checkBox4.Checked == true)
                DrawStock(3, gc, r);

            // dispose of object memories we've allocated
            pBl.Dispose() ;
            sB.Dispose();
            gc.Dispose() ;
        }

        public void DrawStock( int iWhichStock , Graphics gc , Rectangle r ) 
        {
            int i ;
            int iLabelX;
            int iMinY = 999999;
            int iMaxY = 0;
            int iCnt;

            double dxIncrement;
            double dyIncrement;

            string strAxisLabel;

            Point pLineStart = new Point();
            Point pLineEnd = new Point();

            Pen pB2 = new Pen(Color.Red, 2);

            Font f = new Font("Ariel", (float)10.0);

            Brush b = new SolidBrush(Color.Blue);

            // Normally, we'd get stock from a database, I'm just going to go 
            // get it from a function with hard-coded values for demonstration
            // purposes.
            iMinY = Convert.ToInt16(GetMin());
            iMaxY = Convert.ToInt16(GetMax());

            // Take the min and max to the next increment of 5 outside them.
            iMinY = Convert.ToInt16( iMinY / 5 ) * 5 ;
            iMaxY = ( Convert.ToInt16(iMaxY / 5 ) + 1 ) * 5 ;

            // Find the number of x-coordinate values
            iCnt = 0;
            foreach (double d in StockArray)
            {
                if (d > 0)
                    iCnt++;
            }

            // so now we know how many x values there are to spread on the x-axis

            dxIncrement = Convert.ToDouble(r.Width / iCnt);

            // if the zero checkbox is checked, then we'll set the minimums to zero
            if (chkStartAtZero.Checked == true)
            {
                iMinY = 0;
                dMinStockValue = 0.0;
            }

            // so each y-axis pixel must contain this many dollars of actual stock price

            dyIncrement = Convert.ToDouble(r.Height / (iMaxY - iMinY));

            // set the starting point of the stock line
            pLineStart.X = r.X;
            pLineStart.Y = r.Top + r.Height - 
                           Convert.ToInt16(dyIncrement * (StockArray[ 0 ] - Convert.ToDouble(iMinY) ) ) ;

            // now graph them
            for( i = 1 ; i < StockArray.Length ; i++ )
            {
                if( StockArray[i] == 0 )
                    continue ;
                pLineEnd.X = pLineStart.X + Convert.ToInt16(dxIncrement);
                pLineEnd.Y = r.Top + r.Height -
                                  Convert.ToInt16(dyIncrement * (StockArray[i] - Convert.ToDouble(iMinY)));
                gc.DrawLine(pB2,pLineStart, pLineEnd ) ;
                pLineStart = pLineEnd ;
            }

            // now draw the y-axis labels
            i = iMinY;
            pLineStart.X = r.X;
            pLineStart.Y = r.Top + r.Height - Convert.ToInt16(0);
            pLineEnd.X = r.X - 8;

            while( i <= iMaxY )
            {
                pLineStart.Y = r.Top + r.Height - 
                               Convert.ToInt16( Convert.ToDouble(i-iMinY ) * dyIncrement ) ;
                pLineEnd.Y = pLineStart.Y;
                gc.DrawLine(pB2, pLineStart, pLineEnd);
                strAxisLabel = Convert.ToString(i);
                iLabelX = pLineEnd.X - 18;
                if (i < 10)
                    iLabelX = pLineEnd.X - 8;
                else
                    if (i < 100)
                        iLabelX = pLineEnd.X - 18;
                    else
                        if (i < 1000)
                            iLabelX = pLineEnd.X - 28;

                gc.DrawString(strAxisLabel, f, b, iLabelX, pLineEnd.Y - 8);
                i += 10;
            }                
        }

        public double GetMin()
        {    
            if (checkBox1.Checked == true)
            {
                GetStockValues(0);
                minVal[0] = StockArray.Min();
            }
            if (checkBox2.Checked == true)
            {
                GetStockValues(1);
                minVal[1] = StockArray.Min();
            }
            if (checkBox3.Checked == true)
            {
                GetStockValues(2);
                minVal[2] = StockArray.Min();
            }
            if (checkBox4.Checked == true)
            {
                GetStockValues(3);
                minVal[3] = StockArray.Min();
            }
            int minValue = Convert.ToInt16(minVal.Min());
            label1.Text = Convert.ToString(minValue);
            return minValue;
        }

        public double GetMax()
        {
            if (checkBox1.Checked == true)
            {
                GetStockValues(0);
                maxVal[0] = StockArray.Max();
            }
            if (checkBox2.Checked == true)
            {
                GetStockValues(1);
                maxVal[1] = StockArray.Max();
            }
            if (checkBox3.Checked == true)
            {
                GetStockValues(2);
                maxVal[2] = StockArray.Max();
            }
            if (checkBox4.Checked == true)
            {
                GetStockValues(3);
                maxVal[3] = StockArray.Max();
            }
            int maxValue = Convert.ToInt16(maxVal.Min());
            label2.Text = Convert.ToString(maxValue);
            return maxValue;
        }

        public void GetStockValues(int iWhichStock)
        {
         if (iWhichStock == 0)
            {
                // IBM
                StockArray[0] = 147.64;  // 1-10-11
                StockArray[1] = 147.28;
                StockArray[2] = 149.10;
                StockArray[3] = 148.82;
                StockArray[4] = 150.00;
                StockArray[5] = 150.65; 
                StockArray[6] = 155.69;
                StockArray[7] = 155.80;
                StockArray[8] = 155.50;
                StockArray[9] = 159.63;
                StockArray[10] = 161.44;
                StockArray[11] = 161.04;
                StockArray[12] = 161.07;
                StockArray[13] = 159.21;
                StockArray[14] = 162.00;
                StockArray[15] = 163.56;
                StockArray[16] = 163.30;
                StockArray[17] = 163.53;
                StockArray[18] = 164.00;
                StockArray[19] = 164.83;
            }
            if (iWhichStock == 1)
            {
                // BA (The Boeing Company)
                StockArray[0] = 69.09;  // 1-10-11
                StockArray[1] = 68.96;
                StockArray[2] = 70.15;
                StockArray[3] = 69.63;
                StockArray[4] = 70.07;
                StockArray[5] = 72.47; 
                StockArray[6] = 71.73;
                StockArray[7] = 71.12;
                StockArray[8] = 71.68;
                StockArray[9] = 72.73; 
                StockArray[10] = 72.24;
                StockArray[11] = 70.02;
                StockArray[12] = 70.56;
                StockArray[13] = 69.23;
                StockArray[14] = 69.48;
                StockArray[15] = 70.29;
                StockArray[16] = 71.00;
                StockArray[17] = 70.98;
                StockArray[18] = 71.38;
                StockArray[19] = 71.93;
            }
            if (iWhichStock == 2)
            {
                // CAP (CAI International
                StockArray[0] = 19.44;  // 1-10-11
                StockArray[1] = 19.66;
                StockArray[2] = 19.68;
                StockArray[3] = 19.45;
                StockArray[4] = 19.79;
                StockArray[5] = 19.90;
                StockArray[6] = 19.53;
                StockArray[7] = 19.06;
                StockArray[8] = 19.05;
                StockArray[9] = 19.14;
                StockArray[10] = 19.28;
                StockArray[11] = 20.11;
                StockArray[12] = 19.74;
                StockArray[13] = 19.06;
                StockArray[14] = 19.04;
                StockArray[15] = 20.03;
                StockArray[16] = 19.69;
                StockArray[17] = 19.56;
                StockArray[18] = 19.61;
                StockArray[19] = 19.63;
            }
            if (iWhichStock == 3)
            {
                // TOT (Total Societe Anonyme)
                StockArray[0] = 53.00;  // 1-10-11
                StockArray[1] = 53.32;
                StockArray[2] = 55.00;
                StockArray[3] = 56.03;
                StockArray[4] = 57.11;
                StockArray[5] = 57.10;
                StockArray[6] = 56.95;
                StockArray[7] = 57.12;
                StockArray[8] = 57.12;
                StockArray[9] = 58.04;
                StockArray[10] = 58.79;
                StockArray[11] = 58.69;
                StockArray[12] = 59.00;
                StockArray[13] = 59.50;
                StockArray[14] = 57.80;
                StockArray[15] = 58.77;
                StockArray[16] = 61.03;
                StockArray[17] = 60.70;
                StockArray[18] = 59.76;
                StockArray[19] = 59.25;
            }
        }

        private void btnExit_Click(object sender, EventArgs e)
        {
            Application.Exit();
        }

        private void chkStartAtZero_CheckedChanged(object sender, EventArgs e)
        {
            this.Invalidate();
        }

        private void checkBox1_CheckedChanged(object sender, EventArgs e)
        {
            this.Invalidate();
        }

        private void checkBox2_CheckedChanged(object sender, EventArgs e)
        {
            this.Invalidate();
        }

        private void checkBox3_CheckedChanged(object sender, EventArgs e)
        {
            this.Invalidate();
        }

        private void checkBox4_CheckedChanged(object sender, EventArgs e)
        {
            this.Invalidate();
        }

        private void frmMaster_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:36:13.310

几个问题。你的主要问题是你打电话`int maxValue = Convert.ToInt16(maxVal.Min());`，`GetMax()`我想你想要`int maxValue = Convert.ToInt16(maxVal.Max());`的。

但是，一旦您解决了这个问题，您就会遇到这样一个事实：您正在比较 maxVal 数组的未初始化/旧值。

假设我只选中了复选框 1 和 3，然后我取消选中 3，第二次运行 GetMax 或 GetMin 时 maxVal[2] 的值是多少，（这里有一个提示，它不是 0）

# php - 如何确定输入字段类型“提交”的当前 ID 以在 PHP else if 条件表达式中使用？

> ID：10422552
> 
> 赞同：0
> 
> 时间：2012-05-02T22:22:57.747
> 
> 标签：php, javascript, jquery, forms

我还在学习 PHP，所以请耐心等待。我正在尝试创建一个包含 2 个 DIV 的注册表单。在第一个 div（个人信息）上单击提交后，它会滑开，而第二个 div（计费信息）会使用 jQuery 向上滑动。

我的问题是......我需要一些帮助来确定如何确定提交函数来自第一个 div 还是第二个。如果它是第一个 div，则发生幻灯片。如果是第二个 div，则提交表单。

**带有表单的**HTML****

 **```
<div id="container">
        <!-- #first_step -->
        <div id="first_step">
            <h1>SIGN UP FOR 17 FIT CLUB</h1>
            <form class="signup" action="post/signup" method="post">
            <input type="hidden" name="step" value="user" />
            <div class="form">
                <input type="text" name="email" id="email_signup" value="" />
                <label for="email">Your email address. We send important administration notices to this address. </label>  

                <input type="text" name="confirmemail" id="cemail_signup" value="" />
                <label for="username">Please re-type your email to verify it is correct.</label>

                <input type="text" name="firstname" id="firstname_signup" value="" />
                <label for="firstname">Your First Name. </label>

                <input type="text" name="lastname" id="lastname_signup" value="" />
                <label for="lastname">Your Last Name. </label>

                <input type="text" name="username" id="username_signup" value="" />
                <label for="username">At least 6 characters. Uppercase letters, lowercase letters and numbers only.</label>

                <input type="password" name="password" id="password_signup" value="" />
                <label for="password">At least 6 characters. Use a mix of upper and lowercase for a strong password.</label>

                <input type="password" name="cpassword" id="cpassword_signup" value="" />
                <label for="cpassword">If your passwords aren’t equal, you won’t be able to continue with signup.</label>
            </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->
            <input class="submit" type="submit" name="submit_first" id="submit_first" value="submit"/>
    </form>
        </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->

        <!-- #second_step -->
        <div id="second_step">
            <h1>SIGN UP FOR 17 FIT CLUB</h1>
            <form class="signup" action="post/signup" method="post">
            <input type="hidden" name="step" value="user" />
            <div class="form">
                <input type="text" name="nameoncard" id="nameoncard_signup" value="" />
                <label for="email">Enter the name on the credit or debit card used for billing. </label>  

                <select name="cardtype" id="cardtype_signup" >
                    <option name="visa">Visa</option>
                  <option name="mastercard">Mastercard</option>
                  <option name="amex">American Express</option>
                  <option name="discover">Discover</option>
                </select>
                <label for="cardtype">What type of card are you using?</label>

                <input type="text" name="cardnumber" id="cardnumber_signup" value="" />
                <label for="cardnumber">Enter the card number.</label>
                <div id="exp_date_signup">
                <select name="exp_month" id="exp_month_signup" >
                    <option name="01">01</option>
                  <option name="02">02</option>
                  <option name="03">03</option>
                  <option name="04">04</option>
                </select>
                <select name="exp_year" id="exp_year_signup" >
                    <option name="12">12</option>
                  <option name="13">13</option>
                  <option name="14">14</option>
                  <option name="15">15</option>
                </select>
                </div>
                <label for="exp_year">Enter the expiration date on the card.</label>

                <input type="text" name="CVV2" id="cvv2_signup" value="" />
                <label for="CVV2">Enter the 3 or 4 digit CVV2 number.</label>

                <select name="country" id="country_signup">
                  <option value=" " selected>(please select a country)</option>
                  <option value="AF">Afghanistan</option>
                  <option value="ZM">...More options...</option>
                  <option value="ZW">Zimbabwe</option>
                </select>
                <label for="country">Enter the country for your billing address.</label>

                <input type="text" name="billingaddress" id="billingaddress_signup" value="" />
                <label for="bilingaddress">Enter the street name and number for the credit or debit card billing address.</label>

                <input type="text" name="billingcity" id="billingcity_signup" value="" />
                <label for="billingcity">Enter the city for you billing address.</label>

                <select name="billingstate" id="billingstate_signup">
                  <option value="AL">Alabama</option>
                  <option value="AK">...More options...</option>
                  <option value="WY">Wyoming</option>
                </select>
                <label for="billingstate">Choose the state for your billing address.</label>

                <input type="text" name="billingpostalcode" id="billingpostalcode_signup" value="" />
                <label for="cpassword">Enter the postal code for your billing address.</label>

            </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->
            <input class="send submit" type="submit" name="submit_second" id="submit_second" value="submit" />
            </form>
        </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->

</div> 
```

**Javascript**（我把“？？？”放在我认为我需要帮助的地方）

```
<script type="text/javascript">
   $(function(){
  $('form.signup').submit(function(event){
    event.preventDefault();
    uri = $(this).attr('action');
    data = $(this).queryString();       
    $.get(uri, data, function(response){
        if(response.status == 0){
            alert(response.message);    
        }
        else if(???){
            //show next step
      $('#first_step').slideUp();
      $('#second_step').slideDown();

        }
        else {
                           // redirect to internal home page
            window.location = '<?=PROTOCOL?>//<?=DOMAIN?>/home';
        }
    }, 'json');
});
$('form.signup input').focus(function(event){
    if(!$(this).hasClass('clicked')){
        $(this)
            .val('')
            .addClass('clicked');
    }
    });
      });
   </script> 
```

任何帮助将不胜感激！我确信这有一个简单的解决方案，但我无法破解它。n00b！

**更新：**

下面列出的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:06:50.177

我建议将两种形式组合成一种形式；用两个单独的按钮用 div 标签拆分两个“表单”，然后像这样有 jquery

```
//First Button Click Handler
$.("form div#first input.submit").click(function(){
    $("div.first").slideUp('fast',function(){
        $("div.second").slideDown('fast');
    });
});

//Second Button Click Handler
$.("form div#second input.submit").click(function(){
    var data = $('form').serialize();
    var url = "whatever";
    $.get(url,data,function(response){
    //Handle Response

    });
}); 
```

诀窍是禁用表单的正常提交触发器，然后使用特定的点击处理程序直接处理它们

默认情况下，html中的类似内容将停止您的表单提交

```
<form onsubmit="return false;">
    <input type="password"/>
    <input type="submit"/>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:31:20.207

在账单信息的底部有一个调用 jQuery 函数的下一步按钮和提交按钮。前任：

```
function(slide){
  $('#first_step').slideUp();
  $('#second_step').slideDown();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T17:09:36.420

这是我的问题的答案。我在 RL 的一个人的帮助下想通了。两个提交输入都有自己的值，分别是“用户”和“计费”。

```
 <script type="text/javascript">
     $(function(){
      $('form.signup').submit(function(event){
        event.preventDefault();
        uri = $(this).attr('action');
        data = $(this).queryString();  
    step = $(this).find('input[name=step]').val(); // <--update
        if(response.status == 0){
        alert(response.message);    
        }
      else{                                                   // <--update
      if(step == 'user'){                                     // <--update
    //show next slide                                     // <--update
    $('#first_step').slideUp();                           // <--update  
    $('#second_step').slideDown();                        // <--update
      }                                                       // <--update 
     else if(step == 'billing'){                              // <--update
    //redirect to internal home page                      // <--update
    window.location = '<?=PROTOCOL?>//<?=DOMAIN?>/home';  // <--update
    }                                                         // <--update
       }                                                     
     }, 'json');
     });
     $('form.signup input').focus(function(event){
     if(!$(this).hasClass('clicked')){
     $(this)
        .val('')
        .addClass('clicked');
     }
     });
     });
     </script> 
```**

# java - eclipse rcp 应用程序中的 svn 支持

> ID：10422553
> 
> 赞同：0
> 
> 时间：2012-05-02T22:23:00.617
> 
> 标签：java, eclipse, subclipse, subversive, svnkit

我需要为我自己的 eclipse rcp 应用程序添加 svn 支持。我需要显示提交历史记录并从 svn 服务器签出文件的特定版本。

我是否需要使用 sublipse 或 subversive 或 svnkit 就足够了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:06:26.257

Subclipse 和 Subversion 做同样的事情。Subclipse 来自 SVN，Subversive 来自 Eclipse 阵营。SVNKit 只是连接器。我使用来自 SVN 阵营的 Subclipse 主要是因为它是由 SVN 社区构建的，并且通常总是可以完美运行。Subversive 是 SVN 端恕我直言的不太可靠的插件。

Subclipse 还支持几乎所有的 SVN 细节级别属性，并且可以直接在 SVN 透视图中工作，因此您可以管理 IDE 和项目中的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:47:07.517

如果您只是在寻找 API，并且想要自己完成所有工作来调用 API 并为所需的 SVN 功能构建 UI，则可以使用 SVNKit。如果你想重用 UI 和已经完成的工作，那么你需要使用 Subclipse 并从你的代码中驱动它的视图和命令。

# mysql - 在使用 ODBC 通过 VS2008 执行 MySQL 查询时需要帮助

> ID：10422556
> 
> 赞同：0
> 
> 时间：2012-05-02T22:23:21.787
> 
> 标签：mysql, vb.net, visual-studio-2008, odbc

我正在开发一个小项目（仅用于学习，我不是专业人士），其中涉及创建可供店主用于生成发票的软件。它涉及将商店的所有产品存储在 MySQL 5.5 数据库中。Visual Studio 2008 用于前端（项目开始于 VS2005，后来转换）。MySQL ODBC Driver 5.1 用于连接目的。我还是一名学生，还没有能够学习 .NET。因此，我使用[以下链接](http://www.vbmysql.com/articles/vbnet-mysql/myodbc-connector)连接数据库和接口。我可以通过标签从数据库中获取所有数据，例如 VB 表单上的“产品名称”、“价格”等。

现在，为了生成发票，只要按下名为“添加到购物车”的按钮，标签中的数据（即“产品名称”和“价格”）都应添加到另一个名为“购物车”的表中。我该如何实施？我的意思是，谁能给我提供一个代码片段来获取标签中显示的数据并通过“INSERT”语句将其添加到另一个表中？提前致谢。

PS 基本上我需要的是 VB 中的代码片段，当在表单中按下按钮时，它可以让我执行 SQL 查询（任何查询，如 INSERT 或 SELECT 或 UPDATE）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:33:31.960

*产品*

```
|id|  name  | price |
| 1|  Acer  |  10   |
| 2|  Dell  |  100  |
| 3| Lenovo |  100  | 
```

**id** - 行的唯一 id -> 因此产品

*订单*

```
| id|  user_id  |    date    | finished | delivery_address | billing_address |
|  1|    107    | 10.02.2012 |     1    |                  |                 |
|  2|    309    | 17.04.2012 |     0    |                  |                 | 
```

**id** - 订单的唯一id
**user_id** - 下单的用户id
**finished** - 是否应该继续出现在购物车中

*大车*

```
| id| order_id | product | quantity |
|  1|     1    |    2    |    10    |
|  2|     1    |    3    |    20    | 
```

**id** - 只是一个唯一的 id，你可以在某天使用它
**order_id** - 订单的 id

您要求查询：

```
INSERT INTO `cart` (order_id, product, quantity) VALUES (2, 1, 300); 
```

# java - 我可以在 hibernate.properties 中指定 hibernate 注释类吗？

> ID：10422561
> 
> 赞同：1
> 
> 时间：2012-05-02T22:23:56.987
> 
> 标签：java, hibernate, orm, annotations

大多数或所有核心 hibernate 配置属性都可以在启动属性文件中指定，作为在 hibernate.cfg.xml 中指定映射的替代方法。

有没有一种简单的方法可以在属性文件中指定带注释的类的映射？

**您可以在hibernate.cfg.xml**配置中像这样映射带注释的类：

```
<session-factory>
    <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
        ...
        <mapping class="com.annotated.classes.EntityOne"/>
</session-factory> 
```

可以使用属性文件编写类似的配置，即**hibernate.properties**

```
hibernate.connection.driver_class = com.mysql.jdbc.Driver
hibernate.mapping = ??? 
```

如果可能的话，我还没有弄清楚如何使用属性配置指定带注释的类（实体）的映射。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T23:23:30.890

I don't think there is any way to specify entities in the properties file.

I suppose you could create your own custom initialization code using [`Configuration`](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/cfg/Configuration.html) to accomplish what you are looking for. The problem with using a properties file, though, is that you cannot specify a property with a list of values unless you identify a way to split the value into a list. You would then need to write code that parses the value accordingly.

# xml - actionscript 3.0 XML 列表菜单进入 for 循环

> ID：10422562
> 
> 赞同：0
> 
> 时间：2012-05-02T22:23:58.433
> 
> 标签：xml, actionscript-3

我是 actionscript 的新手，想以 for 循环样式编写以下代码。它是从 xml 文件加载的菜单

```
nav_menu.nav_1.text=gallery_xml.gallery[0].@name;
nav_menu.nav_2.text=gallery_xml.gallery[1].@name;
nav_menu.nav_3.text=gallery_xml.gallery[2].@name;
nav_menu.nav_4.text=gallery_xml.gallery[3].@name;
nav_menu.nav_5.text=gallery_xml.gallery[4].@name;
nav_menu.nav_6.text=gallery_xml.gallery[5].@name;
nav_menu.nav_7.text=gallery_xml.gallery[6].@name; 
```

我试着写成一个数组。数组的追踪结果是对的。但我不知道如何将数组放入动态文本框...

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:27:00.090

像 belove 一样首先使用 XMLList 类。

```
var list:XMLList = gallery_xml.gallery; 
```

在那之后，当你让它成为一个循环时，试着动态地制作菜单项。您应该根据需要调整菜单位置。

```
var nav_menu:Sprite = new Sprite();
addChild(nav_menu);
var navItem:Array = [];

var forX:Number = 0;
for(var i:int = 0; i < list.length(); i++){
   navItem[i] = new NavItem();
   navItem[i].tx_txt.autoSize = TextFieldAutoSize.LEFT;
   navItem[i].tx_txt.text = list[i].@name;
   navItem[i].x = forX;
   forX += navItem[i].width + 20; //(horizontal order with 20px space)
   nav_menu.addChild(navItem[i]);
} 
```

您应该在库中有一个带有 tx_txt 字段的 NavItem，或者一个 NavItem 类（这对初学者来说很难）。

注意：我在网页中编写了代码，它可能有错误，但这是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:45:53.010

我认为你正在寻找一个 for 循环尝试这样的事情，假设画廊实际上是一个数组。

```
for(var i:int = 0 ; i < gallery_xml.gallery.length ; i++){
     var menuText:int = i + 1; //since it looks like your nav_ text fields are not 0 indexed
     nav_menu['nav_' + menuText].text = gallery_xml.gallery[i].@name;
} 
```

这将从您的图库数组中的 0 开始，一直持续到 6（您的数组长度）。var i 将表示数组中的当前索引。i + 1 看起来是相应的文本字段

# ruby-on-rails - 从 .txt 文件将变量插入 ERB

> ID：10422564
> 
> 赞同：2
> 
> 时间：2012-05-02T22:24:04.047
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我构建了一个 .erb 文件，其中列出了一堆变量。

```
 <body>
    <h1>
        <%= header %>
    </h1>
    <p>
        <%= intro1 %>
    </p>
    <p>
        <%= content1 %>
    </p>
    <p>
        <%= content2 %>
    </p>
    <p>
        <%= content3 %>
    </p>
  </body> 
```

然后我有一个包含变量的文本文件：

```
header=This is the header
intro1=This is the text for intro 1
content1=This is the content for content 1
content2=This is the content for content 2
content3=This is the content for content 3 
```

我需要从文本文件中获取变量并将它们插入到 .erb 模板中。这样做的正确方法是什么？我想的只是一个 ruby​​ 脚本，而不是整个 rails 站点。它仅适用于小页面，但需要多次执行。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T22:30:52.267

我会跳过 txt 文件，而是使用 yml 文件。

查看此站点以获取有关如何操作的更多信息：http: [//innovativethought.net/2009/01/02/making-configuration-files-with-yaml-revised/](http://innovativethought.net/2009/01/02/making-configuration-files-with-yaml-revised/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T02:54:01.477

我想很多人都是从“我如何从它们存储的地方获取值？”来解决这个问题的。并忽略了问题的另一半：“如何`<%= intro1 %>`用内存中的一些 Ruby 变量替换？

像这样的东西应该工作：

```
require 'erb'
original_contents = File.read(path_to_erb_file)
template = ERB.new(original_contents)

intro1 = "Hello World"
rendered_text = template.result(binding) 
```

这里的`binding`意思是每个局部变量在渲染时都可以在 ERB 内部看到。（从技术上讲，它不仅仅是变量，还有范围内可用的方法，以及其他一些东西）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T23:04:22.563

我同意 YML。如果您真的想要（或必须）使用文本文件，您可以执行以下操作：

```
class MyClass
  def init_variables(text)
    text.scan(/(.*)=(.*)\n/).each do |couple|
      instance_variable_set("@" + couple[0], couple[1])
    end
  end
end

my_obj = MyClass.new
my_obj.init_variables("header=foo\ncontent1=bar") 
```

# actionscript-3 - 哪个更好 Math.random() 或 UIDUtil.createUID()

> ID：10422566
> 
> 赞同：1
> 
> 时间：2012-05-02T22:24:18.793
> 
> 标签：actionscript-3, flex4

我需要生成一个随机数/字符串以附加到 URL 以防止缓存图像。

哪个会更好：

`Math.random()`或者`UIDUtil.createUID()`

我知道这很可能会归结为用户偏好，但我想了解每个人对使用哪一个以及为什么使用的意见。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T22:33:39.507

我经常看到使用的 cachebuster 是：

```
new Date().getTime() 
```

Math.random() 当然有可能不生成唯一的 url（但不太可能）。除此之外无所谓。

# php - Android：从 PHP 网页获取空字符串

> ID：10422567
> 
> 赞同：0
> 
> 时间：2012-05-02T22:24:25.487
> 
> 标签：php, android, web-services

我有两份申请，一份我寄得很长。和纬度坐标到 php 文件，其他应用程序检索 long。和纬度。坐标。为了测试，看看我是否能得到第一个工作，我创建了一个函数，我发布了纬度和经度。协调两个 php 服务，我将它们放回同一个应用程序中。我把它们放在吐司里，看看它是否有效。我什至实现了位置监听器来上传坐标并在同一个应用程序中检索它们以进行测试，然后再尝试在另一个应用程序中接收它们。它工作正常。但是当我尝试在其他应用程序中使用相同的代码来接收坐标时，我会收到空​​白坐标。我调试了它，它只是空白，好像当我从另一个应用程序调用服务器时，它会删除 php 服务中的当前值。

将坐标放置在应用程序一中的代码：

```
public void postData(String longCord, String latCord) throws JSONException{  
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(".../android/serverFile.php");
    JSONObject json = new JSONObject();

    try {
        // JSON data:
        json.put("longitude", longCord);
        json.put("latitude", latCord);
        JSONArray postjson=new JSONArray();
        postjson.put(json);

        // Post the data:
        httppost.setHeader("json",json.toString());
        httppost.getParams().setParameter("jsonpost",postjson);
        // Execute HTTP Post Request
        //System.out.print(json);
        HttpResponse response = httpclient.execute(httppost);

        // for JSON:
        if(response != null)
        {

            InputStream is = response.getEntity().getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(is));
            StringBuilder sb = new StringBuilder();
            String line = null;
            try {
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                try {
                    is.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
                                    JSONObject jsonObj = new JSONObject(jsonStr);
                // grabbing the menu object 
                String longitudecord = jsonObj.getString("lon");
                String latitudecord = jsonObj.getString("lat");

                Toast.makeText( getApplicationContext(),longitudecord,Toast.LENGTH_SHORT).show();
                Toast.makeText( getApplicationContext(),latitudecord,Toast.LENGTH_SHORT).show();
        }

    }catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
} 
```

.php 文件：

```
<?php
$json = $_SERVER['HTTP_JSON'];
$data = json_decode($json);
$lon = $data->longitude;
$lat = $data->latitude;
$variable = array( 'lon' => "$lon", 'lat' => "$lat" );
// One JSON for both variables
echo json_encode($variable); 
```

?>

现在，当我在另一个应用程序上运行此代码时......它与上面的相同减去发布坐标......我得到 lon:"" 和 lat:""。有点像通过发出请求，它以某种方式删除了其他应用程序发布的信息。是这样吗？

```
 public void recieveData() throws JSONException{  
        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(".../android/serverFile.php");
        try {
            HttpResponse response = httpclient.execute(httppost);
            // for JSON:
            if(response != null)
            {
                InputStream is = response.getEntity().getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(is));
                StringBuilder sb = new StringBuilder();
                String line = null;
                try {
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                    try {
                        is.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
                String jsonStr = sb.toString();
                JSONObject jsonObj = new JSONObject(jsonStr);
                // grabbing the menu object 
                String longitudecord = jsonObj.getString("lon");
                String latitudecord = jsonObj.getString("lat");

                Toast.makeText( getApplicationContext(),longitudecord,Toast.LENGTH_SHORT).show();
                Toast.makeText( getApplicationContext(),jsonStr,Toast.LENGTH_SHORT).show();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:08:15.817

尝试在浏览器中访问您的 URL，并确保您的 PHP 脚本在以下行中没有给出任何错误（因为您没有在第二个应用程序中提供任何 JSON 输入）：

```
$data = json_decode($json);
$lon = $data->longitude;
$lat = $data->latitude; 
```

此外，很高兴听到您如何在服务器上**保存**纬度/经度，以便它们在通话之间持续存在。

例如，您可以使用以下 PHP 代码：

```
$db_host = "localhost";
$db_name = "********";
$db_user = "********";
$db_pass = "********";

// connect to MySQL
$db = mysql_connect($db_host, $db_user, $db_pass);
if( !$db ) {
    die( 'Unable to connect to server : ' . mysql_error() );
}

// select the DB
if( !mysql_select_db($db_name) ) {
    die( 'Unable to select DB : ' . mysql_error() );
}

// create table, if not exists
if( !mysql_query( "CREATE TABLE IF NOT EXISTS `locations` (
    `id` int(11) NOT NULL auto_increment,
    `latitude` double NOT NULL COMMENT 'latitude',
    `longitude` double NOT NULL COMMENT 'longitude',
    PRIMARY KEY  (`id`)
    ) ENGINE=MyISAM  DEFAULT CHARSET=utf8;"
) ) {
    die( 'Unable to create table : ' . mysql_error() );
}

// save values
mysql_query( "INSERT INTO locations (`latitude`, `longitude`) VALUES ( '$lat', '$lon')" );

// read them back
$track = array()
$result = mysql_query( "SELECT * FROM locations" );
while( $data = mysql_fetch_assoc($result) ) {
    $track[] = array(
        'latitude' => $data['latitude'],
        'longitude' => $data['longitude'] );
}

// here you may convert `track` into JSON / XML and send coordinates list to your application 
```

# android - 如何同时发布 URL 和 Hashtags

> ID：10422568
> 
> 赞同：6
> 
> 时间：2012-05-02T22:24:29.460
> 
> 标签：android, twitter

按照另一个线程上的[这个示例](https://stackoverflow.com/a/10358126/562776)，我可以发布**URL**：

```
String tweetUrl = "https://twitter.com/intent/tweet?text=PUT TEXT HERE &url="
                        + "https://www.google.com";
Uri uri = Uri.parse(tweetUrl);
startActivity(new Intent(Intent.ACTION_VIEW, uri)); 
```

显示为：

> 在此处输入文字[https://www.google.com](https://www.google.com)

**或**标签：

```
String tweetUrl = "https://twitter.com/intent/tweet?text=PUT TEXT HERE &url="
                        + "https://www.google.com &hashtags=android,twitter";
Uri uri = Uri.parse(tweetUrl);
startActivity(new Intent(Intent.ACTION_VIEW, uri)); 
```

显示为：

> 在此处输入文字#android #twitter

但由于某种原因，我无法在 Twitter 框中**同时显示 URL 和主题标签。**

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T12:15:32.907

回答我自己的问题：之前**不**应该有空格`&hashtags`。换句话说，上面应该写成：

```
String tweetUrl = "https://twitter.com/intent/tweet?text=PUT TEXT HERE &url="
                        + "https://www.google.com&hashtags=android,twitter";
Uri uri = Uri.parse(tweetUrl);
startActivity(new Intent(Intent.ACTION_VIEW, uri)); 
```

希望这可以帮助某人。

# codeigniter - 使用 Codeigniter 的混合身份验证

> ID：10422573
> 
> 赞同：7
> 
> 时间：2012-05-02T22:25:00.867
> 
> 标签：codeigniter, hybridauth

我在这里下载了 HybridAuth 的 codeigniter 扩展：

[https://github.com/andacata/HybridIgniter](https://github.com/andacata/HybridIgniter)

我按照使用说明进行操作。当我尝试通过以下任何提供商登录时：`www.mydomainname.com/hauth/login/twitter`它会加载一个页面，上面写着：

```
HybridAuth
Open Source Social Sign On PHP Library. 
hybridauth.sourceforge.net/ 
```

它永远不会起作用。我有 Twitter 和 Facebook 的有效 API 凭证，但都加载了这个页面，没有其他任何事情发生。任何提示将非常感谢。

**更新**

我的日志说：

```
Hybrid_Provider_Adapter::login( facebook ), redirect the user to login_start URL. -- Array
(
    [hauth_return_to] => http://www.sitename.com/hauth/login/facebook
    [hauth_token] => 6vjglu8usmsjqsi74cku8o85j3
    [hauth_time] => 1335997302
    [login_start] => http://sitename.com/hauth/endpoint?hauth.start=facebook&hauth.time=1335997302
    [login_done] => http://sitename.com/hauth/endpoint?hauth.done=facebook
)

INFO -- 127.0.0.1 -- 2012-05-03T00:21:42+02:00 -- Enter Hybrid_Auth::redirect( http://sitename.com/hauth/endpoint?hauth.start=facebook&hauth.time=1335997302, PHP ) 
```

**更新**

这是控制器的链接

[https://github.com/andacata/HybridIgniter/blob/master/application/controllers/hauth.php](https://github.com/andacata/HybridIgniter/blob/master/application/controllers/hauth.php)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T17:15:59.327

上面的答案对我没有多大帮助，但我发现了问题所在。

添加`index.php`到`base_url`_`config/hybridauthlib.php`

```
'base_url' => '/index.php/hauth/endpoint', 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T08:36:42.263

这是我 100% 工作的代码：

```
class Auth extends MX_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->template->set_layout('login');

    }

    //social login
    public function social($provider)
    {
        try{
            $this->load->library('HybridAuthLib');
            $this->load->model('auth_model');
            $serviceEnabled = $this->hybridauthlib->serviceEnabled($provider);
            if ($serviceEnabled)
            {

                $this->service = $this->hybridauthlib->authenticate($provider);
                if ($this->service->isUserConnected())
                {
                    $user_profile = $this->service->getUserProfile();
                    if($this->auth_model->count_user_by_uid($user_profile->identifier) === 0)
                    {
                        $this->session->set_flashdata('message','You Dont have account.. Create one.');
                        redirect('/users/register','refresh');
                    }
                    else
                    {
                        $dump_data = $this->auth_model->get_by(array('provider_uid'=>$user_profile->identifier));
                        $user = $this->ion_auth->user($dump_data->user_id)->row();

                        $session_data = array(
                            'identity'             => $user->{$this->config->item('identity', 'ion_auth')},
                            'username'             => $user->username,
                            'email'                => $user->email,
                            'user_id'              => $user->id, //everyone likes to overwrite id so we'll use user_id
                            'old_last_login'       => $user->last_login
                        );

                        $this->ion_auth->update_last_login($user->id);

                        $this->ion_auth->clear_login_attempts($this->config->item('identity', 'ion_auth'));

                        $this->session->set_userdata($session_data);

                        if ($this->config->item('remember_users', 'ion_auth'))
                        {
                            $this->ion_auth->remember_user($user->id);
                        }

                        $this->ion_auth->trigger_events(array('post_login', 'post_login_successful'));
                        $this->ion_auth->set_message('login_successful');
                        redirect('/','refresh');
                    }
                }
                else // Cannot authenticate user
                {
                    $this->session->set_flashdata('message','Cannot authenticate user');
                    redirect('/users/auth/login/','refresh');
                }

            }
            else // This service is not enabled.
            {
                $this->session->set_flashdata('message','This providers is not enabled.');
                redirect('/users/auth/login/','refresh');
            }
        }
        catch(Exception $e)
        {
            $error = 'Unexpected error';
            switch($e->getCode())
            {
                case 0 : $error = 'Unspecified error.'; break;
                case 1 : $error = 'Hybriauth configuration error.'; break;
                case 2 : $error = 'Provider not properly configured.'; break;
                case 3 : $error = 'Unknown or disabled provider.'; break;
                case 4 : $error = 'Missing provider application credentials.'; break;
                case 5 : log_message('debug', 'controllers.HAuth.login: Authentification failed. The user has canceled the authentication or the provider refused the connection.');
                         //redirect();
                         if (isset($service))
                         {
                            $service->logout();
                         }
                         $error = 'User has cancelled the authentication or the provider refused the connection.';
                         break;
                case 6 : $error = 'User profile request failed. Most likely the user is not connected to the provider and he should to authenticate again.';
                         break;
                case 7 : $error = 'User not connected to the provider.';
                         break;
            }

            if (isset($this->service))
            {
                $this->service->logout();
            }
            log_message('error', 'controllers.HAuth.login: '.$error);
            $this->session->set_flashdata('message', $error);
            redirect('/users/auth/login/', 'refresh');          
        }       

    }

    public function endpoint()
    {
        log_message('debug', 'controllers.HAuth.endpoint called.');
        log_message('info', 'controllers.HAuth.endpoint: $_REQUEST: '.print_r($_REQUEST, TRUE));

        if ($_SERVER['REQUEST_METHOD'] === 'GET')
        {
            log_message('debug', 'controllers.HAuth.endpoint: the request method is GET, copying REQUEST array into GET array.');
            $_GET = $_REQUEST;
        }

        log_message('debug', 'controllers.HAuth.endpoint: loading the original HybridAuth endpoint script.');
        require_once ADDONPATH.'/users/third_party/hybridauth/index.php'; //ADDONPATH is my modules path
    }
} 
```

我希望你能发现它有用。我将 ion_auth 用于主登录系统。auth_model 是一个小模型，用于检查用户是否启用了此提供者的名称，因为我希望用户即使使用另一个社交网络登录也拥有相同的数据。

# mysql - 我可以在我的 WordPress 安装的 wp_options 表中删除瞬态吗？

> ID：10422574
> 
> 赞同：68
> 
> 时间：2012-05-02T22:25:13.103
> 
> 标签：mysql, database, wordpress

我最近注意到我的`wp_options`桌子似乎有点大。它包含 1161 行，大小约为 2.1mb。

我已经安装了[Clean Options](http://wordpress.org/extend/plugins/clean-options/)。看起来该插件的开发早在 2010 年就停止了，但它仍然完成了这项工作。

我现在有一长串可能孤立的条目。有没有一种简单的方法可以对这些进行排序，并确定哪些要删除，哪些要保留？此外，这是否会导致网站出现性能问题？

感谢您的阅读，欢迎任何想法！

**更新**：Clean Options 插件在列表中返回了一些瞬态，这使我发现`wp_options`表中有数百个瞬态文件。有一大堆看起来像：

*   `_site_transient_browser_5728a0f1503de54634b3716638...`
*   `_site_transient_timeout_browser_03df11ec4fda7630a5...`
*   `_transient_feed_83dcaee0f69f63186d51bf9a4...`
*   `_transient_plugin_slugs`
*   `_transient_timeout_feed_83dcaee0f69f63186d51bf9a4b...`

等等。就像我说的，有几百行看起来像这样。只丢弃它们是否安全？

谢谢

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-08-16T20:32:46.943

You can safetly dump them. Wordpress and some plugins will re-create transients as needed. A transient is more or less the stored value from a complex query. The results are saved as a transient so that the system doesn't have to perform a common query over and over, instead it just looks for the transient if it exists and hasn't expired. Of course, make a backup of your database before making a change lest something goes wrong!

After backing everything up, you can run a mysql statement like this:

```
DELETE FROM `wp_options` WHERE `option_name` LIKE ('%\_transient\_%') 
```

[**EDIT:** statement fixed with escape characters, after comment suggestion]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-28T19:01:59.303

您可以删除瞬变，因为它们将被重新创建。由于故障情况或某些插件的设计问题，可能会累积过期瞬态。解决此问题的一种方法是删除过期的瞬态，同时允许当前的瞬态执行其功能。仅清除过期几天的瞬态，您就有机会监控哪些插件导致过时的瞬态，并采取任何措施来修复问题或报告问题。

下面将查找数据库中的任何 wp*option 表，并删除超过一周陈旧的五个最大的临时选项。这为任何插件提供了足够长的时间来删除它们将自行清除的选项。

```
#!/bin/bash

DBNAME="mydatabase"
DBUSER="${USER}"
DBPASSWD="secret"
MYSQLBIN=/usr/bin/mysql # OR MYSQLBIN=/usr/local/mysql/bin/mysql
MYSQL="${MYSQLBIN} -s -D ${DBNAME} -u ${DBUSER} -p${DBPASSWD}"
TMP=/var/tmp/
ENTRIES_FILE="${TMP}entries.$$"

# Find option tables
for OPTION_TABLE in $( echo 'show tables like "%wp%options";' | ${MYSQL} )
do
    # Find up to five large long expired transients
    ${MYSQL} > ${ENTRIES_FILE} <<EOF
    select option_name from ${OPTION_TABLE} where option_name in
        (select concat("_transient",substr(option_name,19))
            FROM ${OPTION_TABLE} WHERE option_name LIKE '_transient_timeout%' AND
            option_value < UTC_TIMESTAMP() - INTERVAL 1 WEEK order by option_value)
    order by length(option_value) desc limit 5;
EOF
    for OPTION in $( < ${ENTRIES_FILE} )
    do
        echo Deleting ${OPTION} from ${OPTION_TABLE}
        echo delete from ${OPTION_TABLE} where option_name = \"${OPTION}\"\; | ${MYSQL}
        if [[ $? -eq 0 ]]; then
            echo delete from ${OPTION_TABLE} where option_name = \"_transient_timeout${OPTION:10}\"\; | ${MYSQL}
        fi
    done
done
rm -f ${ENTRIES_FILE} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-29T05:47:57.847

安装插件[Delete Expired Transients](https://wordpress.org/plugins/delete-expired-transients/)以每天自动清理数据库。

# silverlight - 从域服务编辑数据

> ID：10422575
> 
> 赞同：0
> 
> 时间：2012-05-02T22:25:20.320
> 
> 标签：silverlight

我需要在 WCF RIA 域服务中编辑数据。我能找到的所有示例都使用数据网格。我有以下但它正在重新调整一个空值，我哪里错了？？？

```
var mytask = from v in  DomainRentDetail.tblRentDetails 

where v.CustID == xCustID 
select v; 

tblRentDetail t = mytask.FirstOrDefault<tblRentDetail>(); 
t.ReturnDate = DateTime.Now; 

DomainRentDetail.SubmitChanges(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:59:31.003

请给我们更多细节，但我认为它必须是这样的，在域服务类中（我想你在 web 项目中）

```
 from v in  this.ObjectContext.tblRentDetails 
 where v.....
 select v 
```

如果你的表上有一些记录**tblRentDetails**

您可以通过 FirstOrDefault << Type >> ()== null 检查它

创建域服务类时，您必须选择域（edmx）。然后 ObjectContext 携带您的实体对象。向这个 ObjectContext 成员询问您的实体。

注：以下状态为极端状态。也许你以后可能会面对。

如果您需要不同的模型，则不会创建域服务类，因为还有其他一些技术，

```
//Scope level domain service class definition. Not offered.
//Generally views solves this issue
using(XDomainService service=new XDomainService())
{
  from one in service 
  from two in this.objectContext
  where...
  select new member
} 
```

# r - r中的颜色键图例

> ID：10422581
> 
> 赞同：2
> 
> 时间：2012-05-02T22:25:58.780
> 
> 标签：r, graphics, legend, legend-properties, color-key

我正在努力想办法在我的情节中添加颜色网格标签（[链接到上一个问题](https://stackoverflow.com/questions/10405967/barplot-in-loop-in-r)）。很抱歉一直问，但这是我可以推动我前进的最大值。

```
#data 1:
lab1 <- 1:10
group <- rep(1:3, each = length (lab1))
label <- rep(lab1, 3)
avar <-  rep(c(0, 1, 4, 5, 6, 8, 10,  11, 12,  13), 3)
myd <- data.frame (group, label, avar)

# data 2
fillcol <- rep(rnorm(length(lab1)-1, 0.5, 0.2), 3)
group1 <- rep(1:3, each = length(fillcol)/3)
 # this variable will be used to fill color in bars
 filld <- data.frame(group1, fillcol)

colbarplot <- function(group) {

    myd1 <- myd[myd$group == group,]
    filld1 <- filld[filld$group1 == group,]
    blues <- colorRampPalette(c("yellow", "blue"))
    barplot(as.matrix(diff(myd1$avar)), horiz=T,
            col=blues(10)[10* filld1$fillcol], 
            axes=F, xlab="Mark")
    axis(1, labels=myd$label, at=myd$avar)
    axis(3, labels=myd$avar, at=myd$avar)
}

par(mfrow = c(4, 1))
par(mar = c(2.5, 1, 2.5, 1))
sapply(unique(myd$group),function(x) colbarplot(x)) 
```

现在我正在努力添加图例，对不起这个新用户。

```
 blues <- colorRampPalette(c("yellow", "blue"))
  colors <- blues(10)
  count <- length(colors)
  m <- matrix(1:count, count, 1)
  m1 <- m 
 image(m, col=colors, ylab="", axes=FALSE) 
```

我制作的色标不是我所期望的，我正在尝试绘制一个较小的图例，宽度和高度较小，以及在颜色编码中使用的原始比例。

![在此处输入图像描述](../Images/ca787b311f70a23ee7a7c2dc68ba17c3.png)

以下是一些不成功的标签试验：

```
 colab <- c(round (min(filld$fillcol), 2), round(max(filld$fillcol), 2))
  colpos <- c(0.33 * max(mapdat$position),0.66 * max(mapdat$position))  
  axis(1, labels=colab, at=colpos) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:31:38.760

使用 ggplot2 更容易获得体面的图例

```
library(plyr)
myd$group <- factor(myd$group)
gData <- ddply(myd, .(group), function(x){
  data.frame(delta = diff(x$avar), label = paste(head(x$label, -1), tail(x$label, -1), sep = "-"))
})
gData$FillCol <- rnorm(nrow(gData))
ggplot(gData, aes(x = group, y = delta, fill = FillCol, label = label)) + geom_bar(stat = "identity") + coord_flip() + scale_fill_gradient(low = "blue", high = "yellow") + geom_text(position = "stack") 
```

![ggplot2 图形](../Images/861f88d7cd3bf5b6203675c3a02ed7ce.png)

# clr - 自升级到 ASP.NET 4.0 后每次自动回收后应用程序池崩溃

> ID：10422583
> 
> 赞同：0
> 
> 时间：2012-05-02T22:26:05.877
> 
> 标签：clr, iis-7.5, asp.net-4.0, application-pool, crash-dumps

将 ASP.NET 解决方案升级到 4.0 后，我们注意到每次应用程序池自动回收（每 1740 分钟），恰好 32 秒后，我们在事件日志中收到事件 ID 5009 的错误。

我在服务器上安装了调试器并在故障转储上运行了分析工具，您可以在下面看到我得到了什么。你能帮我理解可能是什么问题吗？这发生在 4 台不同的机器上（它们都是虚拟机）。我注意到在完整的调用堆栈中存在一个“循环”（出于空间原因，我在这里省略了你），以下一组调用一遍又一遍地重复：

> clr!Thread::DoAppropriateWaitWorkerAlertableHelper+4d 00000000 `00000000 00000000`1bb30ba0 00000000 `20a0cf60 00000000`00000000
> clr!Thread::DoAppropriateWaitWorker+146 00000000 `1bb30ba0 00000000`00000001 00000000 `01c05970 00000000`00000000
> clr!Thread::DoAppropriateWait+73 00000000 `20a0c0a0 00000000`00000001 000007fe `e4736ca9 000007fe`e4736c2c
> clr!CLREvent::WaitEx+c1 00000000 `00000000 00000000`00000000 00000000 `00000000 000007fe`e7e7f960
> clr! RegMeta::SaveToStream+134 00000000 `20a0b740 00000000`1bb30ba0 00000000 `dc951994 00000000`76df0e4a
> clr!WaitForEndOfShutdown+9 00000000 `00010000 000007fe`e7804b65 00000000 `00000000 00000000`00000000
> clr!Thread::RareDisablePreemptiveGC+490 00000007fe `e4a8cca0 00000000`2000009000009`dc951994 00000000`
> clr!EEHashTableBase,0>::FindItem+5c 000007fe `e4a8cca0 00000000`20a0b9f0 00000000 `00000001 000007fe`efbc229b
> clr!IsCerRootMethod+b1 00000000 `00000001 00000000`00000000 00000000 `00000000 00000000`ffffff98
> clr!TAStackCrawlCallBack+1e9 00000000 `20a0bd90 00000000`20a0b9f0 00000000 `20a0bd90 00000000`20a0bd90
> clr!Thread::MakeStackwalkerCallback+2f 00000000 `20a0c2a0 00000000`00000002 00000000 `00000002 00000000`20a0c060
> clr!Thread:: StackWalkFramesEx+8d 00000000 `1bb30ba0 00000000`1bb30ba0 00000000 `1bb30ba0 00000000`00020019
> clr!Thread::ReadyForAsyncException+197 00000000 `76f471ba 00000000`1bb30ba0 00000000 00000000 `00000000 00000000`clr
> !Thread::HandleThreadAbort+6c `76def5e4 000007fe`0000000000000000000009`1bb30ba0 00000000`
> clr!Thread::HandleThreadInterrupt+7e 00000000 `000007c0 00000000`000007c0 000007fe `e79ae71c 000007fe`e4d9f9dc

**分析摘要**
类型描述建议错误在 w3wp_QAWEB4 _PID_4668 *_Date__05_02_2012__Time_04_16_30PM_242* _Second_Chance_Exception_C0000005.dmp*中的汇编指令 clr!* *CLREvent* ::WaitEx+f in C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll尝试在线程 20 上写入内存位置 0x20990ff0 时导致访问冲突异常 (0xC0000005) 请跟进供应商 Microsoft Corporation for C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll

*信息DebugDiag*确定此转储文件 (w3wp_QAWEB4 *_PID_4668* *_Date__05_02_2012__Time_04_16_30PM_242* _Second_Chance_Exception_C0000005.dmp )是故障转储，并且没有执行任何挂起分析。如果您希望为故障转储启用组合的崩溃和挂起分析，请编辑 Globals.asp 脚本（位于 DebugDiag\Scripts\inc 文件夹中）并将 g_DoCombinedAnalysis 常量设置为 True。

 ****分析细节**

w3wp_ *QAWEB4* _PID_ *4668* _Date__05_02_2012__Time_04_16_30PM_ *242* _Second_Chance_Exception_C0000005.dmp 的报告 执行的分析类型 崩溃分析 机器名称 XXXX01-QA-WEB01 操作系统 Windows Server 2008 Service Pack 2 处理器数量
进程 ID 4668 进程映像 c:\Windows\System3 .exe 系统正常运行时间 4 天 14:59:36 进程正常运行时间 00:06:32

**线程 20 - 系统 ID 4364** 入口点 clr!Thread::intermediateThreadProc 创建时间 2012 年 5 月 2 日下午 4:10:16 在用户模式下花费的时间 0 天 0:0:1.421 在内核模式下花费的时间 0 天 0:0： 0.453

**.NET 调用堆栈**

函数 System.Threading.Thread.SleepInternal(Int32) System.Threading.Thread.Sleep(System.TimeSpan) Sitecore.Services.Heartbeat.WorkLoop() ***错误：模块加载已完成，但无法为 Sitecore.Kernel.dll 加载符号System.Threading.ExecutionContext.runTryCode(System.Object) System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode, CleanupCode, System.Object) System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean) System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object) System.Threading.ThreadHelper.ThreadStart()

***由于空间原因删除了***完整的调用堆栈****

 *****异常信息** CLR!CLREVENT::WAITEX+FIn w3wp_ *QAWEB4* _PID_ *4668* _Date__05_02_2012__Time_04_16_30PM_ *242* _Second_Chance_Exception_C0000005.dmp 汇编指令 clr!CLREvent::WaitEx+f in C:\Windows\Microsoft.33\Framework64\rv41.dll0 Microsoft Corporation 在尝试写入线程 20 上的内存位置 0x20990ff0 时导致访问冲突异常 (0xC0000005)

**模块信息** 图像名称：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll 符号类型：PDB 基地址：0x00000003 00000000 注释：Flavor=Retail COM DLL：False 公司名称：Microsoft Corporation ISAPIExtension：False 文件说明：Microsoft .NET Runtime 公共语言运行时 - WorkStation ISAPIFilter：False 文件版本：4.0.30319.239 (RTMGDR.030319-2300) 托管 DLL：False 内部名称：clr.dll VB DLL：False 法律版权：© Microsoft Corporation。版权所有。加载的图像名称：clr.dll 合法商标：`00905a4d Time Stamp: Sat Jul 09 05:44:20 2011
Checksum: 0x00000000`
映射图像名称：原始文件名：clr.dll 模块名称：clr 私有构建：DDBLD205 单线程：False 产品名称：Microsoft® .NE​​T Framework 模块大小：9.39 MBytes 产品版本：4.0.30319.239 符号文件名：c:\symcache\ clr.pdb\887DDF30473443C9905C3217115D7DE72\clr.pdb 特殊版本：&

**脚本摘要**
脚本名称 状态 错误代码 错误源 错误说明 源行 CrashHangAnalysis.asp 已完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:48:03.720

事件 ID 5009 描述中列出的错误代码是什么？[http://www.eventid.net/display-eventid-5009-source-Microsoft-Windows-WAS-eventno-8833-phase-1.htm](http://www.eventid.net/display-eventid-5009-source-Microsoft-Windows-WAS-eventno-8833-phase-1.htm)表示这可能是由以前的 .Net 版本中的空文件夹引起的。*****

# java - 制作不可编辑的游戏存档

> ID：10422584
> 
> 赞同：1
> 
> 时间：2012-05-02T22:26:33.927
> 
> 标签：java, file, console, blackjack

我正在做的是为了好玩而制作控制台二十一点。我想省钱，以便用户可以每天玩，但我不想将其保存在文本文件中，用户可以随意更改金额。

我已经想过使用密码制作隐藏文件或加密文件，但我不喜欢那样。我希望它有点像当你打开一些随机的 dll 文件时，你看到的只是你无法理解的胡言乱语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:38:00.933

防止用户篡改其统计数据的一种防弹方法是将统计数据存储在远离他们的远程服务器上。不过，这将要求用户在游戏期间在线。OTOH，您将能够展示顶级玩家的阶梯等等。

如果您想要离线存储，加密文件可能是最佳途径。您只需要正确隐藏文件。

在修改文件之前，请阅读其修改时间。更新后，恢复时间。用户将很难确定哪个文件已更改。

使用游戏使用的无害文件，其中包含格式允许的数据块。它可以是一个 XML 文件，将加密字符串存储在注释中。它可以是 JPG 或 PNG 文件，将加密字符串存储在注释或 EXIF 部分中，位于已知偏移量处（因此您无需解析文件）。WAV、OGG、MP3 也允许包含非解释数据。当您将数据隐藏在实际像素值等中时，这不是真正的隐写术，而且要容易得多。

我想你明白一个有反汇编器和调试器的破解者可以破解这个方案。但是普通用户可能不会打扰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:28:44.500

听起来您在谈论[隐写术](http://en.wikipedia.org/wiki/Steganography)，但传统加密可能更安全且更易于实施。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T22:30:16.750

您可以对文件中的值进行加密： 看看：[http](http://dinofilias.com/encrypt.htm) ://dinofilias.com/encrypt.htm 使用这样的基本加密，只要用户无权访问密钥，您的数据就相对安全。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T22:43:26.870

您可以使用加密获得包含乱码的文件的效果。只需将加密数据保存为字节（不转换为 ASCII 表示）。由于加密数据的值可以在 0x00 和 0xFF 之间，因此会有乱码。

这是一个如何加密文本的简单示例：[http ://www.exampledepot.com/egs/javax.crypto/desstring.html](http://www.exampledepot.com/egs/javax.crypto/desstring.html)

# jquery - 委内瑞拉 JVectorMap 不起作用

> ID：10422586
> 
> 赞同：0
> 
> 时间：2012-05-02T22:26:41.677
> 
> 标签：jquery, .net, html, jvectormap

我正在尝试使用 JVectorMap 显示委内瑞拉的地图，只是带有下一个代码的简单示例：

$('#map').vectorMap({map: 've_en'});

但是，它不起作用。我有从[http://jvectormap.com/maps/countries/venezuela/下载的 .js“ve_en”](http://jvectormap.com/maps/countries/venezuela/)

这是我的 div：

我在美国地图的其他页面上有相同的代码，它确实有效。拜托，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:09:09.313

好吧，您缺少地图的背景颜色，并且显示为“白色”。完整的代码应该是：

```
$('#map').vectorMap({map: 've_mill_en', backgroundColor: 'black' }); 
```

看一个以黑色背景绘制的委内瑞拉地图示例：

[http://jsfiddle.net/pmking/ADEXq](http://jsfiddle.net/pmking/ADEXq)

结果如下：

![在此处输入图像描述](../Images/a2aa9e4e5dd82c8826f3c0c0e879bf8e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T04:07:14.757

检查您是否从新站点下载了所有文件。它绝对有效，因为您可以在[jvectormap.com](http://jvectormap.com)上看到渲染的地图。

# domain-driven-design - 根据定义，域模型是不可变的吗？

> ID：10422588
> 
> 赞同：0
> 
> 时间：2012-05-02T22:26:50.867
> 
> 标签：domain-driven-design

也就是说，是否存在过域模型在其创建之外可用于修改的情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T01:57:29.817

[值对象](http://domaindrivendesign.org/node/135)通常是不可变的。[另一方面，实体](http://domaindrivendesign.org/node/109)不必是不可变的。例如，您的域可以有一个订单实体，并且允许添加订单项或更改送货地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T08:29:52.440

与 Dmity 的回答不同，我假设您是指整个模型的设计，而不是运行时的单个实体。

答案是肯定的。事实上，这就是领域建模的重点。商业模式会随着时间而改变（这是不可避免的——商业必须适应才能生存）并且模式必须不断发展以适应它。结合敏捷开发技术的领域建模考虑了这一点。诀窍是设计你的领域模型，以便它可以发展。

# c# - 如何延迟评估 wpf:DataGrid，仅根据需要检索数据

> ID：10422592
> 
> 赞同：4
> 
> 时间：2012-05-02T22:27:11.260
> 
> 标签：c#, wpf, datagrid, wpfdatagrid, lazy-evaluation

我有一个 WPF 数据网格，绑定到由数据库中的 linq-to-sql 填充的列表。绑定是双向的，允许用户更改每行中的值

```
 <wpf:DataGrid AutoGenerateColumns="False" 
              ItemsSource="{Binding MyList}" 
              SelectedItem="{Binding SelectedItem}" > 
```

当显示大约 20000 行时，程序在列表初始化期间因内存不足异常而崩溃。即使行数较少，性能也会变得难以忍受。

我知道在初始化时，数据网格会遍历每一行以测量最大列宽和其他属性。无论它们是否在屏幕上，它显然都会对所有行执行此操作。

我尝试将数据网格绑定到`myQuery.ToList()`（允许通过单击列对数据网格进行排序）或直接绑定到 IQueryable。（排序不适用于此）

两者都产生相同的结果。仅具有 20000 个项目的 ToList() 不会导致大量内存消耗，仅当它绑定到 datagrid 时才会发生这种情况。

忽略数据网格中的 20000 行有多有用的问题（这些是当前要求；更改这些工作示例会有所帮助）。

什么是最简单的方法来延迟加载当前显示在屏幕上的数据，而忽略其他所有内容，直到它被滚动到视图中？

这可以在没有第三方库和主要代码更改的情况下完成吗？

如果没有，推荐的解决方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T16:27:11.953

事实证明，问题完全是我的用户错误：

WPF Datagrid 可以很好地进行 UI 虚拟化：仅在需要时才绘制消耗内存的行对象；如果一行超出数据网格的可见边界，则不会实例化。

但是，如果数据网格包含在 ScrollViewer 中，这将不起作用。在滚动查看器中，数据网格的每个部分都是虚拟可见的，因此将呈现整个数据网格。然后，滚动查看器仅显示此呈现的数据网格中适合 UI 窗口的部分。

由于滚动查看器中的数据网格看起来就像管理自己的滚动条的数据网格，所以我没有注意到滚动查看器。

移除滚动查看器后，即使高度和宽度可变，大量行也不会造成任何问题。数据网格只是填充可用空间，并且只根据需要实例化新行。

**所以简而言之，我的问题的解决方案是：不要将数据网格放在滚动查看器中**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T01:31:14.247

在这种情况下，您要绑定的属性假设您`MyList`由 MyFile 对象 ( `List<MyFile>`) 组成，那么您必须将 MyFile 类创建为：

```
 class MyFile
    {
        public string FullPath { get; set; }

        public string Extension
        {
            get
            {
                return Path.GetExtension(FullPath);
            }
        }

        public string PathRoot
        {
            get
            {
                return Path.GetPathRoot(FullPath);
            }
        }

        public DateTime CreationTime
        {
            get
            {
                return File.GetCreationTime(FullPath);
            }
        }

    } 
```

这样，您将在每个对象中存储更少的信息，并在网格中显示的少数项目上调用 get 方法。与将实际值存储在类中相比。希望这可以帮助

# jquery - 重新编译资产时引导奇怪的错误

> ID：10422595
> 
> 赞同：3
> 
> 时间：2012-05-02T22:27:37.107
> 
> 标签：jquery, ruby-on-rails, twitter-bootstrap, asset-pipeline

我有这个奇怪的错误...

在我的 application.js 文件中，我有

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require twitter/bootstrap 
```

如果我做

```
 RAILS_ENV=development rake assets:precompile 
```

我的引导下拉菜单停止工作。但是，如果我删除 require twitter/bootstrap 并在我的编辑器上点击保存，然后在我的本地计算机上刷新页面。它再次起作用。

我不明白为什么。这个 jquery/bootstrap 加载几个星期以来一直是个问题。重新编译我的资产会破坏它。如果我重新编译它就可以了，然后删除它并刷新浏览器

更新。

我的 CSS 正在使用 custom.css.scss。那里没有什么特别的，除了

```
@import "bootstrap"; 
```

在文件的顶部。

我恢复到 scss 而不是 less，我的 application.js 看起来像......

```
//= require jquery
//= require bootstrap
//= require jquery-ui
//= require jquery_ujs
//= require_tree . 
```

在我的开发机器上，出现了上面的奇怪错误，但在生产中一切似乎都工作正常

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T02:00:46.467

我修好了它。我必须做...

```
rake assets:clean 
```

有些东西可能是腐败的，而且......

```
config.serve_static_assets = false 
```

在我的 development.rb

# javascript - 使用 javascript 更改 URL

> ID：10422596
> 
> 赞同：0
> 
> 时间：2012-05-02T22:27:45.870
> 
> 标签：javascript, html

**我有一个使用以下 javascript 的 HTML 选项卡系统：**

```
(function() {

        var $tabsNav    = $('.tabs-nav'),
            $tabsNavLis = $tabsNav.children('li'),
            $tabContent = $('.tab-content');

        $tabContent.hide();
        $tabsNavLis.first().addClass('active').show();
        $tabContent.first().show();

        $tabsNavLis.on('click', function(e) {
            var $this = $(this);

            $tabsNavLis.removeClass('active');
            $this.addClass('active');
            $tabContent.hide();

            $( $this.find('a').attr('href') ).fadeIn();

            e.preventDefault();
        });

    })(); 
```

**HTML 标记是：**

```
<ul class="tabs-nav">

    <li class="active">
        <a href="#1">TAB 1</a>
    </li>
    <li>
        <a href="#2">TAB 2</a>
    </li>
    <li>
        <a href="#3">TAB 3</a>
    </li>

</ul><!-- end .tabs-nav -->

<div class="tabs-container">
    <div class="tab-content" id="1">

        CONTENT OF TAB 1

    </div><!-- end #tab1 -->

    <div class="tab-content" id="2">

        CONTENT OF TAB 2

    </div><!-- end #tab2 -->

    <div class="tab-content" id="3">

        CONTENT OF TAB 3

    </div><!-- end #tab3 --> 
```

*UL*是选项卡的名称，当您单击一个时，它们会将您带到该选项卡的内容。正如您在单击选项卡时看到的那样，链接是 www.thepage.com#tab1 等，但在地址栏中没有出现任何内容。我希望能够访问 thepage.com#tab2 并显示选项卡 2，但这不起作用。

我已经搜索了不同的方法，如javascript中的*window.location或 html5 中的**pushstate*发布在[此页面上](http://spoiledmilk.dk/blog/html5-changing-the-browser-url-without-refreshing-page)，但我不知道如何使它们起作用。最好使用 thepage.com/tab1 而不是哈希标签用于 SEO 目的。我知道您可以使用 html5 中的 pushstate 来实现这一点，例如：

```
window.history.pushState(“object or string”, “Title”, “/new-url”); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T00:25:19.920

如果您使用 pushstate html5 功能，它将不适用于 IE8 和其他较旧的浏览器，但如果您只想拥有 ajaxy-history，您可以使用 url 的哈希部分。您可以使用以下方法修改 url 的哈希：

```
window.location.hash="mytabid";
// url will be http://foo.com/#mytabid 
```

将此与哈希更改事件结合使用（您可能希望使用 jQuery 或插件来处理跨浏览器事件问题），您可以通过访问 location.hash 属性对使用后退按钮或页面加载时做出反应.

```
window.onhashchange = function(a){
    console.log(a); //probably easiest to access the location.hash here.
} 
```

# java - 什么可能导致 RMI 方法调用间歇性失败？

> ID：10422603
> 
> 赞同：3
> 
> 时间：2012-05-02T22:29:02.210
> 
> 标签：java, networking, rmi

长话短说，我有一个 RMI 服务器和客户端。服务器和客户端能够相互进行 RMI 调用。Client 连接到 Server 后，Server 可能会在 Client 上连续快速调用数百个方法。

问题是这样的——在大量服务器到客户端方法调用结束时，有些会失败，因为 RMI 声称它无法建立从服务器到客户端的连接，即使在它成功之前的数百次调用也是如此。我不能发布任何真正的代码，因为这个项目相当大（大约 50k 行），但这里是抛出异常的完整堆栈跟踪：

```
java.rmi.ServerException: RemoteException occurred in server thread; nested exception is:
java.rmi.ConnectIOException: error during JRMP connection establishment; nested exception is:
java.net.SocketException: Connection reset
at sun.rmi.server.UnicastServerRef.dispatch(Unknown Source)
at sun.rmi.transport.Transport$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at sun.rmi.transport.Transport.serviceCall(Unknown Source)
at sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(Unknown Source)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(Unknown Source)
at sun.rmi.transport.StreamRemoteCall.executeCall(Unknown Source)
at sun.rmi.server.UnicastRef.invoke(Unknown Source)
at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(Unknown Source)
at java.rmi.server.RemoteObjectInvocationHandler.invoke(Unknown Source)
at $Proxy0.findClassDefinition(Unknown Source)
at com.fabric.network.NetworkClassLoader.findClass(NetworkClassLoader.java:111)
at java.lang.ClassLoader.loadClass(Unknown Source)
at com.fabric.network.NetworkClassLoader.loadClass(NetworkClassLoader.java:131)
at java.lang.ClassLoader.loadClass(Unknown Source)
at com.fabric.network.MessageSocket$CustomObjectInputStream.resolveClass(MessageSocket.java:171)
at java.io.ObjectInputStream.readNonProxyDesc(Unknown Source)
at java.io.ObjectInputStream.readClassDesc(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readObject(Unknown Source)
at com.fabric.network.MessageSocket.receive(MessageSocket.java:118)
at com.fabric.application.driver.NodeRemoteDriver$IncomingMessageThread.run(NodeRemoteDriver.java:205)
Caused by: java.rmi.ConnectIOException: error during JRMP connection establishment; nested exception is:
java.net.SocketException: Connection reset
at sun.rmi.transport.tcp.TCPChannel.createConnection(Unknown Source)
at sun.rmi.transport.tcp.TCPChannel.newConnection(Unknown Source)
at sun.rmi.server.UnicastRef.invoke(Unknown Source)
at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(Unknown Source)
at java.rmi.server.RemoteObjectInvocationHandler.invoke(Unknown Source)
at $Proxy2.findClassDefinition(Unknown Source)
at com.fabric.network.ClassDefinitionCache.findClassDefinition(ClassDefinitionCache.java:78)
at com.fabric.management.host.NodeManagementServices.findClassDefinition(NodeManagementServices.java:231)
at sun.reflect.GeneratedMethodAccessor16.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at sun.rmi.server.UnicastServerRef.dispatch(Unknown Source)
at sun.rmi.transport.Transport$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at sun.rmi.transport.Transport.serviceCall(Unknown Source)
at sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(Unknown Source)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(Unknown Source)
at java.io.BufferedInputStream.fill(Unknown Source)
at java.io.BufferedInputStream.read(Unknown Source)
at java.io.DataInputStream.readByte(Unknown Source)
... 21 more 
```

再次，抱歉我不能提供太多的代码，但我不一定要求修复代码 - 我只是想弄清楚为什么会发生这种情况。

**编辑**

添加了完整的堆栈跟踪。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T16:52:14.543

好的，所以在几乎把我所有的头发都拉出来之后，事实证明 RMI 试图打开太多的端口。我在后台使用自定义`RMISocketFactory`实现。这个自定义实现是单例的，所以我认为没有必要实现`hashCode()`and `equals()`。确实是一个非常痛苦的错误……

事实证明，如果 RMI 确定它需要创建的套接字是由`RMISocketFactory`不等同于创建它想要重用的套接字的工厂创建的，那么 RMI 不会重用套接字。RMI 依赖`equals()`并`hashCode()`执行此检查。一旦我在自定义套接字工厂中正确实现了这两种方法，这些间歇性问题就消失了。

可以在此处找到此问题的描述：

[http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/faq.html](http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/faq.html)

无论如何，感谢大家看这个，我非常感谢你的时间！

**附加信息**

我之前没有注意到的第二个问题是，`ServerSocket`我使用的连接请求的队列空间不足，这也导致连接被丢弃。`new ServerSocket(port, newConnectionQueueSize, bindAddress)`使用更大的构造函数`newConnectionQueueSize`也有助于解决这个问题。

# javascript - 如何在当前事件之后调用先前绑定的事件？

> ID：10422606
> 
> 赞同：1
> 
> 时间：2012-05-02T22:29:29.910
> 
> 标签：javascript, jquery, javascript-events

当我尝试绑定到同一个对象的多个事件时，我想到了这个问题。我仍然试图找到最简单的解决方案。

想象一下我们有这个标记：

```
​&lt;select class="class1 class2">
    <option>Value 1</option>
    <option>Value 2</option>
    <option>Value 3</option>
</select>
​&lt;p></p>​​​​​​​​​​​​​​​​​​​​​ 
```

以及绑定到事件的两种`select`方法`change`：

```
$(".class1").on("change", function() {
    // first method for change
    $("p").append("<div>Event for class1</div>");
});

$(".class2").on("change", function() {
    // second method for change
    $("p").append("<div>Event for class2</div>");
}); 
```

​ 现在，如果您进行选择更改，内容`p`将是：

```
Event for class1
Event for class2 
```

我的“研究”问题是如何重写**第二个** `on`处理程序以使其首先触发其处理**程序**。所以最后的内容`p`应该是：

```
Event for class2
Event for class1 
```

这种情况使我们无法`on`在源代码中交换语句。

你有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:45:46.723

首先，虽然这可能不是您研究的目标，但您不需要两个类来将事件绑定到处理程序。你可以打`$(".class1").on(...);`两次电话。

其次，处理程序执行顺序应该不重要，但我知道这是纯粹的测试/研究。

关于您的问题，我想到了两个选项...

1.- 如果可能，取消绑定/绑定事件。代码将是这样的：

```
$(".class1").on("change", function() {
    // first method for change
    $("p").append("<div>Event for class1</div>");
});

// Unbind event, then bind again
$(".class1").off("change").on("change", function() {
    // second method for change
    $("p").append("<div>Event for class2</div>");
    $("p").append("<div>Event for class1</div>");
}); 
```

2.- 如问题[How to order events bound with jQuery](https://stackoverflow.com/questions/290254/how-to-order-events-bound-with-jquery)，创建自己的事件：

```
$(".class1").on("change", function() {
    // first method for change
    $("p").append("<div>Event for class1</div>");
});

// Bind custom event
$(".class1").on("myCustomEvent", function() {
    // first method for change
    $("p").append("<div>Event for class1</div>");
});

$(".class2").off("change").on("change", function() {
    // second method for change
    $("p").append("<div>Event for class2</div>");

    // Trigger custom event
    $(".class1").trigger("myCustomEvent");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:48:04.180

有解决方案。一个例子是[`preBind`乔纳森·康威](https://gist.github.com/1046209)的。

这个插件为一个元素操作 jQuery 的事件处理程序列表，并在它的前面而不是在末尾添加一个事件。

因此`$(...).preBind`，您使用`bind`之前使用的位置。这并不适用，`$(...).on`但可以很容易地从中得出类似的解决方案。

但是，我**强烈建议您不要这样做**，因为争夺第一名的事件通常是不良架构的标志。

# php - 使用 fopen 和 fread 时出现语法错误

> ID：10422612
> 
> 赞同：1
> 
> 时间：2012-05-02T22:30:09.590
> 
> 标签：php

```
$file = "status.txt";
$open = fopen($file, "r");
$size = filesize($file);
$count = fread($open, $size);

if($count == 1) {
    header('Location: http://www.google.com/');
} else {
    echo "Status is unavailable";
} 
```

您好，我正在尝试读取文本文件。
执行此操作时出现错误`Parse error: syntax error, unexpected T_STRING`。
我正在尝试读取 status.txt，如果它有 1 它将重定向，否则它会说 Status 不可用。
有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:40:35.447

错误肯定不在那些行中！请包含整个 PHP 脚本，在这些行之前或之后一定有问题。

请试试这个代码！

```
<?php

    $file = 'status.txt';
    $contents = file_get_contents($file);
    if ((strlen($contents)-1) == 1) {
        header('Location: http://www.google.com');
    } else {
        echo 'Status is unavailable';
    }

?> 
```

压缩中的 (-1) 是因为最后一行的换行字符数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:36:30.180

我必须指出，对于像这样的简单文件，这[`file_get_contents`](http://php.net/manual/en/function.file-get-contents.php)比`fopen`, `fread`, `fclose`（您省略了）等要容易得多。

您发布的代码本身似乎没有任何问题。也许你在整个街区之前搞砸了？尝试并注释掉以隔离错误。这是您需要掌握的调试技能。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T22:34:25.737

如果您在谈论“status.txt”的内容，请将“1”放在引号之间。如果它只是一个 TRUE 或 FALSE 语句，只需使用 if($count){ ... }else{ ...}

# ruby-on-rails - 使用 RSpc 2.9.0 + FactoryGirl 3.2 通过验证测试 has_many

> ID：10422621
> 
> 赞同：5
> 
> 时间：2012-05-02T22:30:46.000
> 
> 标签：ruby-on-rails, rspec, factory-bot

**RSpec 和 Factory Girl 的新手，并且输掉了这场战斗！**

我有一个连接表 MealItems，它对它的一个属性进行了验证。在 Rails 控制台中，我可以成功执行以下操作：

```
meal = Meal.create!( ... )
food = Food.create!( ... )
item1 = MealItem.create!( meal, food, 1234 )  # 1234 being the property that is required 
```

然后我可以通过 MealItem 自动获取给定膳食中的一系列食物，如下所示：

```
meal.foods 
```

问题是我无法弄清楚如何正确创建工厂，因此这种关系在规范中可用。我可以将这些物品分配给一顿饭，并对其进行测试，但无法通过关系工作获得 has_many (meal.foods)

**楷模**

```
class Meal < ActiveRecord::Base

  has_many :meal_items
  has_many :foods, :through => :meal_items

end

class MealItem < ActiveRecord::Base

  belongs_to :meal
  belongs_to :food

  validates_numericality_of :serving_size, :presence => true,
                                           :greater_than => 0
end

class Food < ActiveRecord::Base

  has_many :meal_items
  has_many :meals, :through => :meal_items

end 
```

**规格/工厂.rb**

```
FactoryGirl.define do

  factory :lunch, class: Meal do
    name      "Lunch"
    eaten_at  Time.now
  end

  factory :chicken, class: Food do
    name            "Western Family Bonless Chicken Breast"
    serving_size    100
    calories        100
    fat             2.5
    carbohydrates   0
    protein         19
  end

  factory :cheese, class: Food do
     name            "Armstrong Light Cheddar"
     serving_size    30
     calories        90
     fat             6
     carbohydrates   0
     protein         8
   end

 factory :bread, class: Food do
    name            "'The Big 16' Multigrain Bread"
    serving_size    38
    calories        100
    fat             1
    carbohydrates   17
    protein         6
  end

  factory :item1, class: MealItem do
    serving_size      100
    association       :meal, factory: :lunch
    association       :food, factory: :chicken
  end

  factory :item2, class: MealItem do
      serving_size      15
      association       :meal, factory: :lunch
      association       :food, factory: :cheese
  end

  factory :item3, class: MealItem do
    serving_size      76
    association       :food, factory: :bread
    association       :meal, factory: :lunch
  end    

  factory :meal_with_foods, :parent => :lunch do |lunch|
    lunch.meal_items { |food| [ food.association(:item1),
                           food.association(:item2),
                           food.association(:item3)
                          ]}

  end
end 
```

**规格/模型/meal_spec.rb**

```
...

describe "Nutritional Information" do

before(:each) do 

  #@lunch = FactoryGirl.create(:meal_with_foods)  

  @item1 = FactoryGirl.create(:item1)
  @item2 = FactoryGirl.create(:item2)
  @item3 = FactoryGirl.create(:item3)
  @meal = FactoryGirl.create(:lunch)

  @meal.meal_items << @item1
  @meal.meal_items << @item2
  @meal.meal_items << @item3

  @total_cals = BigDecimal('345')
  @total_fat = BigDecimal('7.5')
  @total_carbs = BigDecimal('34')
  @total_protein = BigDecimal('35')

end

# Would really like to have
#it "should have the right foods through meal_items" do
  #@meal.foods[0].should == @item1.food
#end

it "should have the right foods through meal_items" do
  @meal.meal_items[0].food.should == @item1.food
end

it "should have the right amount of calories" do
  @meal.calories.should == @total_cals
end

... 
```

**我的问题是：**

我将如何设置这些工厂，以便我可以在测试中引用 Meal.foods，因为由于连接表上的验证要求，我无法将食物直接分配给一顿饭。在测试期间我是否没有正确地将 MealItem 工厂写入数据库，这就是为什么我的规范中不存在 has_many through 关系的原因？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:30:53.310

是的，您需要 MealItem 的工厂，并且您需要在规范中使用该工厂才能通过验证。如果除了两个外键之外没有任何必填字段，它可能已经可以工作了。因此，在使用默认服务器大小设置工厂后，您将替换它：

```
@meal.meal_items << @item1
@meal.meal_items << @item2
@meal.meal_items << @item3 
```

有了这个：

```
FactoryGirl.create(:meal_item, :meal => @meal, :item => @item1)
FactoryGirl.create(:meal_item, :meal => @meal, :item => @item1)
FactoryGirl.create(:meal_item, :meal => @meal, :item => @item1) 
```

另一种方法是在您的模型中设置默认份量。这将允许您保持测试原样，并且可以更轻松地在实际代码中使用您喜欢的语法。

# iphone - 从 NSMutableArray 中的对象创建 NSArray

> ID：10422628
> 
> 赞同：0
> 
> 时间：2012-05-02T22:31:16.810
> 
> 标签：iphone, objective-c, ios, xcode

我有`NSMutableArray`10,000 个对象，每个对象都有名称、详细信息等。我想创建一个`NSArray`仅包含所有对象名称的内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T22:33:20.847

使用 KVC

```
NSArray *names = [myArray valueForKey:@"name"]; 
```

检查[NSArray的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)

> **valueForKey：**
> 返回一个数组，其中包含调用 valueForKey 的结果：对数组的每个对象使用键。

# javascript - jQuery UI Datepicker：如何在页面加载时触发 onChangeMonthYear？

> ID：10422631
> 
> 赞同：1
> 
> 时间：2012-05-02T22:31:33.380
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

我想`onChangeMonthYear`在文档准备好时触发我的事件。

到目前为止，我发现的唯一解决方案如下：

```
$(function() {
    var $element = $('#datepicker');
    var date = new Date();
    var onChangeMonthYear = $element.datepicker("option", "onChangeMonthYear");
    onChangeMonthYear(date.getFullYear(), date.getMonth() + 1, $element);
}); 
```

但是对于这样一个简单的要求，这看起来有点矫枉过正。有更简单的解决方案的人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T02:58:17.480

您需要做的是创建一个函数并从两者内部调用它，`beforeShow`如下`onChangeMonthYear`所示：（未经测试）

```
$(".datepicker").datepicker({
    beforeShow: function (input, inst) {
        var datePicked = $(this).datepicker('getDate');
        doMyStuff(datePicked.getYear(),datePicked.getMonth(), inst); 
    },
    onChangeMonthYear: function (year, month, inst) {
        doMyStuff(year,month, inst);                        
    }
}); 
```

# asp.net-mvc-3 - 如何使用 HandleError 只处理特定类型的异常，并让其余的异常正常抛出？

> ID：10422634
> 
> 赞同：0
> 
> 时间：2012-05-02T22:31:54.393
> 
> 标签：asp.net-mvc-3, error-handling

我正在做一个团队项目，我处于以下情况：

我创建了自己的 Exception 类，我希望处理所有抛出的 myException 类型的异常并自动重定向到错误视图，我可以在其中很好地显示错误，这是可以的。这是我在 Web.config 中添加的内容：

```
<customErrors mode="On" defaultRedirect="Error" /> 
```

问题是我希望正常抛出所有其余异常，查看有关它的所有信息，包括堆栈跟踪、源文件和行错误，这对团队项目非常有用。

我已经尝试过 [HandleError(ExceptionType=typeof(myException)]，但它没有用。

我还尝试覆盖控制器的 OnException 函数，如果异常不是 myException，那么我会再次抛出它，但我仍然会进入错误视图。

```
protected override void OnException(System.Web.Mvc.ExceptionContext filterContext)
{
    if (filterContext.Exception.GetType() != typeof(myException)) {
        throw filterContext.Exception;
    }
    base.OnException(filterContext);
} 
```

有什么想法可行吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:32:28.887

您可以通过关闭自定义错误来获得您想要的结果（这样对于所有错误，您都会显示堆栈跟踪），并将您想要的异常重定向到您需要的控制器/视图（这样一个友好的页面将是显示）。

您可以为所有控制器定义一个基本控制器，并使用以下内容覆盖其 OnException 方法：

```
 if (filterContext.Exception.GetType() == typeof(YourCustomException))
        {
            filterContext.ExceptionHandled = true;
            filterContext.Result = RedirectToAction("ActionName", "ControllerName", new { customMessage  = "You may want to pass a custom error message, or any other parameters here"});
        }
        else
        {
            base.OnException(filterContext);
        } 
```

# arrays - Lua 中的函数、表格和 for

> ID：10422635
> 
> 赞同：0
> 
> 时间：2012-05-02T22:31:57.153
> 
> 标签：arrays, function, for-loop, lua, lua-table

现在我正在做一些测试，但我似乎找不到这段代码有什么问题——知道吗？

```
function IATetris(Pieza,Rotacion,Array)
io.write("The table the script received has: ",Pieza,"\n")
RotacionInicial = Rotacion
PosInicial = 7
final = #Array --this gets the size of the array
i = 1

    for y = 1, 20 do --the array of my tetris board is 20 in x and 14 in y so it would be something like this Array2D[20][14]

    io.write(" First for y ",y,"\n")
    Array2D[y]={} --clearing the new array
    for x = 1,14 do
    io.write(" First for x ",x,"\n")
        if i == final then break end

        io.write(" First for i",i,"\n")
        Array2D[y][x] = Array[i] 
        i= i+1 --seems like you cant use i++ in lua
        end
   end
end 
```

我正在做的是获得 2 个整数和 1 个数组。我不得不在控制台中写代码来检查程序的实际运行位置，而我得到的是......

第一条日志消息：`"The table the script received has: "`

和第二条日志消息：`" First for y "`

但是我没有比那些更进一步，所以程序可能在那里崩溃了？这个函数每隔 20 秒左右就会被调用一次。我真的不知道为什么会这样。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:05:59.193

如果此行记录：

```
io.write(" First for y ",y,"\n") 
```

并且此行不记录：

```
io.write(" First for x ",x,"\n") 
```

那么问题出在以下几行之一：

```
Array2D[y]={} --clearing the new array
for x = 1,14 do 
```

`for x...`绝对适合我，所以我建议它是 Array2D 线。它在语法上没有任何问题，所以它一定是运行时错误。运行时错误应该由 Lua 或其嵌入的应用程序报告。如果它们不是并且函数只是“停止”，那么你就是在盲目地调试，你会在这样的问题上浪费很多时间。

我认为该行可能发生的唯一错误是 if `Array2D`is not a table。由于您正在尝试对其进行索引，因此必须这样做。`Array2D`没有在你的函数中声明，如果它是一个已经在别处定义的全局变量，这很好。但是，如果它*只是*用于此函数的局部变量，那么您应该添加`local Array2D = {}`它。

不知道是什么`Array2D`，或者你的实际错误是什么，很难给出更准确的答案。如果您真的没有比记录更好的方法来找出问题，那么就在 Array2D 行之前，应该测试我的假设：

```
io.write("Array2D is: ", type(Array2D), "\n") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T23:08:20.413

看起来`Array2D`没有初始化（或不是表），所以它在`Array2D[y]={}`.

您可以使用`pcall`调用函数并捕获错误，如下所示：

```
local ok, msg = pcall(IATetris, pieza, rotacion, array)
if not ok then
    print("ERROR:", msg)
end 
```

旁注：您应该尽可能使用`local`关键字来限制变量的范围。

# javascript - jQuery Unobtrusive 在 IE7 或 IE8 中不起作用

> ID：10422636
> 
> 赞同：4
> 
> 时间：2012-05-02T22:31:59.043
> 
> 标签：javascript, jquery, asp.net-mvc-3, jquery-validate

好的，我已经在 J​​SFiddle 中重现了这个问题。以下形式适用于 Chrome 和 IE9，但不适用于 IE7 或 IE8。我发现一些关于 jQuery 特定版本的传言；我们使用的是 1.4.4。这是小提琴的链接：

[http://jsfiddle.net/xtkuV/77/](http://jsfiddle.net/xtkuV/77/)

### 表格

```
<form action="" id="step1Form" method="post">
<label for="FirstName">FirstName</label>
<input class="text-box single-line" data-val="true" data-val-required="The FirstName field is required." id="FirstName" name="FirstName" type="text" value="" />
<span class="field-validation-valid" data-valmsg-for="FirstName" data-valmsg-replace="true"></span>
<br/>

<label for="LastName">LastName</label>
<input class="text-box single-line" data-val="true" data-val-length="The field LastName must be a string with a maximum length of 60." data-val-length-max="60" data-val-required="The LastName field is required." id="LastName" name="LastName" type="text" value="" />
<span class="field-validation-valid" data-valmsg-for="LastName" data-valmsg-replace="true"></span>
<br />

<label for="Age">Age</label>
<input class="text-box single-line" data-val="true" data-val-number="The field Age must be a number." data-val-range="The field Age must be between 1 and 130." data-val-range-max="130" data-val-range-min="1" data-val-required="The Age field is required." id="Age" name="Age" type="text" value="" />
<span class="field-validation-valid" data-valmsg-for="Age" data-valmsg-replace="true"></span>
    <br/>
    <input type="submit" value="Submit"/>
</form> 
```

### Javascript

```
$(function(){    
    $('#step1Form').live('submit',function(e){
        e.preventDefault();
        console.log('sup');
        //do an ajax request here or something!
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:34:49.630

“您可能想做的第一件事就是将 jquery 版本更新到最新版本，今天是 1.9 版

执行此操作后，您的客户端验证**将在 Internet Explorer 7 和 Internet Explorer 8 中停止工作。**

这是因为 jquery.validate 版本与 jquery 版本 > 1.6 不兼容。解决方案很简单，您还需要更新 jquery.validate 的版本。您可以从 Microsoft 的 CDN 找到当前版本 1.9。" ***

***以上资料来自[本站：](http://blog.degree.no/2012/01/jquery-validation-not-working-in-ie7-and-ie8/)

# c# - 如何使用创建和设计包含两种不同形式的界面？

> ID：10422653
> 
> 赞同：1
> 
> 时间：2012-05-02T22:34:01.350
> 
> 标签：c#, winforms, multiple-forms

我正在创建一个程序（在 c# 中，使用 Visual Studios 2010），它将有 3 个不同的窗口。它们中的每一个都需要相互访问（通过工具条/菜单条）并且它们引用相同的信息（相同的变量、数据库等......我的问题是，创建和设计这些不同界面的最佳方法是什么？我可以想到两种方法，但它们都有一些缺点。

我想到的第一种方法是制作一个“隐藏/显示”无效，它将隐藏将第一个区域中所有组件的可见性变为假，并将所有想要的组件变为可见性为真。

问题是它既愚蠢又混乱。

我想到的第二种方式 - 使用第二种形式。

缺点 - 所有变量传输都非常混乱，主要是 - 我不希望弹出不同的表格。我希望这一切都在一个程序下。

我想有一种有效和更聪明的方法可以做到这一点。我希望我在这件事上足够清楚。

谢谢，

巴拉克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:22:29.810

您可以创建一个主表单（如 asp.net 中的母版页）并从该主表单继承所有三个表单。

# vb.net - 创建一个大容量的 StringBuilder

> ID：10422655
> 
> 赞同：1
> 
> 时间：2012-05-02T22:34:18.910
> 
> 标签：vb.net, stringbuilder

我在老板的项目中发现了以下代码：

```
Dim strBuilder As New System.Text.StringBuilder("", 1000000) 
```

在我打电话给他之前，我想确认一下这条线是否真的为那个字符串生成器设置了一个兆字节（或 Unicode 中的两个兆字节？）的内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T22:40:07.137

初始化`Char()`长度为 1000000 的 a。

所以内存中需要的实际大小是**2000000 Bytes** = ~2 MB，因为 char 是 unicode 并且需要 2 个字节。

**编辑**：万一你的老板不相信，这反映在 ILSpy 上：

```
// System.Text.StringBuilder
[SecuritySafeCritical]
public unsafe StringBuilder(string value, int startIndex, int length, int capacity)
{
    if (capacity < 0)
    {
        throw new ArgumentOutOfRangeException("capacity", Environment.GetResourceString("ArgumentOutOfRange_MustBePositive", new object[]
        {
            "capacity"
        }));
    }
    if (length < 0)
    {
        throw new ArgumentOutOfRangeException("length", Environment.GetResourceString("ArgumentOutOfRange_MustBeNonNegNum", new object[]
        {
            "length"
        }));
    }
    if (startIndex < 0)
    {
        throw new ArgumentOutOfRangeException("startIndex", Environment.GetResourceString("ArgumentOutOfRange_StartIndex"));
    }
    if (value == null)
    {
        value = string.Empty;
    }
    if (startIndex > value.Length - length)
    {
        throw new ArgumentOutOfRangeException("length", Environment.GetResourceString("ArgumentOutOfRange_IndexLength"));
    }
    this.m_MaxCapacity = 2147483647;
    if (capacity == 0)
    {
        capacity = 16;
    }
    if (capacity < length)
    {
        capacity = length;
    }
    this.m_ChunkChars = new char[capacity];
    this.m_ChunkLength = length;
    fixed (char* ptr = value)
    {
        StringBuilder.ThreadSafeCopy(ptr + (IntPtr)startIndex, this.m_ChunkChars, 0, length);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:39:55.590

您可以尝试 [`GC.GetTotalMemory()`](http://msdn.microsoft.com/en-us/library/system.gc.gettotalmemory.aspx)在该分配之前和之后调用，看看它是否增加。注意：这不是一个好的、科学的方法，但*可以*证明你的观点。

# jackrabbit - Jackrabbit 访问控制

> ID：10422656
> 
> 赞同：0
> 
> 时间：2012-05-02T22:34:23.070
> 
> 标签：jackrabbit

我有一个在这里或 Jackrabbit 文档中找不到答案的问题，希望你们中的任何人都可以提供帮助。

我正在执行以下操作：

*   管理员创建“someuser”
*   管理员创建上述节点： /templates/templateall[ jcr:uuid: a9b629a4-d1dd-4ba3-a602-629e4ca1a7fd jcr:mixinTypes: mix:referenceable, rep:AccessControllable, label: templateall jcr:primaryType: nt:unstructured /templates/templateall /rep:policy[ jcr:primaryType: rep:ACL /templates/templateall/rep:policy/allow[ rep:privileges: jcr:all, rep:principalName: someuser jcr:primaryType: rep:GrantACE

*   someuser 尝试删除 /templates/templateall 节点，但在 save() 上出现以下异常

javax.jcr.AccessDeniedException: /templates/templateall: 不允许在 org.apache.jackrabbit.core.ItemSaveOperation.perform(ItemSaveOperation. java:216) 在 org.apache.jackrabbit.core.session.SessionState.perform(SessionState.java:216) 在 org.apache.jackrabbit.core.ItemImpl.perform(ItemImpl.java:91) 在 org.apache.jackrabbit .core.ItemImpl.save(ItemImpl.java:329) 在 org.apache.jackrabbit.core.session.SessionSaveOperation.perform(SessionSaveOperation.java:64) 在 org.apache.jackrabbit.core.session.SessionState.perform(SessionState .java:216) 在 org.apache.jackrabbit.core.SessionImpl.perform(SessionImpl.java:361) 在 org.apache.jackrabbit.core.SessionImpl.save(SessionImpl.java:812)

*   之后，我尝试使用管理员用户删除 /templates/templateall 并成功完成删除。
*   然后我尝试做同样的事情，但我让用户“someuser”jcr:all 访问节点 /templates 而不是 /templates/templateall，然后“someuser”能够成功删除 /templates/templateall

所以我对第一个结构示例的结论是：“someuser”可以删除节点 /templates/templateall 的任何子节点，但不能删除节点本身，需要提供 jcr:removeChildNodes 访问 no /templates 才能做到这一点。

我的结论正确吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:20:48.247

我想是的。我不知道关于 Jackrabbit 安全性的所有细节，但是：

在 Jackrabbit 中删除一个节点会修改父节点，因为每个节点都包含子节点 ID 列表。

# ios - 如何将精确圆添加到 MKAnnotation

> ID：10422657
> 
> 赞同：6
> 
> 时间：2012-05-02T22:34:24.247
> 
> 标签：ios, mkmapview

我有一个自定义注释来代表一辆移动的公共汽车，我喜欢拥有那个“脉冲”。我相信它也被称为精度圈。有没有办法在其上使用图像叠加层？

# javascript - 在 Javascript 中使用正则表达式查找单词

> ID：10422660
> 
> 赞同：1
> 
> 时间：2012-05-02T22:34:43.673
> 
> 标签：javascript, regex

如何在 Javascript 中找到带有正则表达式的单词？

例如：

```
http://127.0.0.1/w/?id=2&tab=wow 
```

我想知道此链接是否包含“标签”一词。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T22:37:26.107

```
var string = 'http://127.0.0.1/w/?id=2&tab=wow'
var containsTab = string.indexOf('tab') > -1 
```

或者，如果您真的想使用正则表达式：

```
var containsTab = string.match(/tab/); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:38:08.383

1.  jQuery 不是一种语言。这是一个为 JavaScript 编写的库。
2.  您不需要正则表达式。
3.  使用`indexOf`.

    ```
    var str = 'http://127.0.0.1/w/?id=2&tab=wow';

    if(str.indexOf('tab') > -1) {
        // Contains string
    } else {
        // Doesn't
    } 
    ```

# database - 如何将用户创建的符号数学存储在数据库中？

> ID：10422661
> 
> 赞同：1
> 
> 时间：2012-05-02T22:34:50.347
> 
> 标签：database, postgresql, math, mathml, mathjax

我的网站要求用户输入大量的数学和科学记数法。自然，我需要一种方法来存储此服务器端以供将来使用。这是我理想的做法：用户输入一段文本，可能带有或不带有数学符号，提交输入，然后将其转换为适合数据库的格式，最后，在每次后续查看输入的数学，它应该被转换为 MathML。MathML 由 MathJax 转换为可读格式。

我以前从未将数学存储在数据库中，而我希望允许用户能够将数学与文本内联插入这一事实产生了一些影响。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:56:18.560

将这种事情正常化的愿望是可以理解的。这也是错误的。

为了使用关系数据库，您唯一应该“扩展”成更多语义类型的东西就是出现在`where`子句中的任何东西。

如果您想要运行看起来像（伪代码：）的查询是合理的

```
SELECT * FROM FORMULAE
WHERE "/theta" in free_vars(FORMULAE.FORMULA)
AND "bob" in FORMULAE.USERS; 
```

然后你想使用一种数据类型，使这样的查询高效。另一方面，如果数据库不会对存储的公式进行任何类型的处理，那么除了最有用的外部表示（正确表示公式的标记）之外，不要尝试将其转换为或转换为任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:38:36.850

将 MathML 存储为文本。如果它不适合 VARCHAR，则使用 CLOB

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T23:49:18.350

我建议将其作为 MathML 文本存储在数据库中。这样，在插入时，您将它转换为 MathML 一次，然后每次访问它时，都不需要转换它（即：更快）。

# php - 需要PHP Mysql数据库MVC结构建议

> ID：10422666
> 
> 赞同：0
> 
> 时间：2012-05-02T22:35:09.653
> 
> 标签：php, mysql, model-view-controller, database-design

我试图找出让页面动态知道要输出哪些数据的最佳方法。

我有一个 index.php，我希望能够将一些 $_GET 变量传递给它，然后基于它知道要显示什么。除了内容不同，内容的类型也不同，我有产品和其他类型的页面，如博客文章等。产品存储在不同的表中，然后是其他页面。并且表结构也略有不同。

目前我有以下表格。

主题、页面和类别。

```
Table = Subjects
id | menu_name | menu_number | category | menu_position | active

Table = Pages
id | subject_id | category_id | page_name

Table = Categories
id | category 
```

这些是概述站点主要结构的主要表格。然后，我有包含页面实际数据的辅助表。

帖子、post_details、post_pypes 和产品、product_details、product_types 和 product_specs。

我想要激活的是一个变量将在查询字符串中发送，并且基于此应用程序将知道要显示什么信息。

我的问题是如何制作一个表格，该表格将使用唯一 ID 对所有条目（帖子和产品）进行分类，这将是我的应用程序确定如何继续所需的唯一变量。即查询保存该唯一ID 的数据库中的表并告诉应用程序它是一个“产品”并且产品ID 是X 并继续查询所需的表以获取信息。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:59:17.717

我强烈建议您研究像 CodeIgniter 这样的安全、结构化环境来完成您在上面尝试描述的任何事情。该问题的范围非常广泛，这可能表明您将从某种预构建的框架中受益。

# iphone - 使用新推文 (iPad) 使视图看起来像 twitter 应用程序一样

> ID：10422668
> 
> 赞同：2
> 
> 时间：2012-05-02T22:35:18.807
> 
> 标签：iphone, objective-c, ios, ipad

我正在尝试实现类似于 twitter 在您打开新的推文对话时所做的效果。它们从顶部下拉视图，缩小其他视图，但如果您关闭键盘，仍然允许您与所有视图进行交互。这显然不是模态视图，但我无法确定做类似事情的起点是什么。

![视图出现](../Images/bd28f4482b6be12305fc6adfe0b2e54f.png)

![仍在与其他视图交互](../Images/a02ee3e593aa1ad3432c14e97e4ce5a7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:24:56.997

它作为一个视图层次结构看起来很直接，只是巧妙地装饰了艺术。底部是常规界面，上面是一个包含 UITextView 的视图，周围有一些漂亮的记事本艺术。

实现此目的的一种方法是将两个子视图挂在视图控制器的主视图下。第一个孩子包含记事本艺术和文本视图。它位于 0,-NOTEPAD_HEIGHT。第二个孩子位于 0,0 并占据整个父视图的边界。

撰写按钮告诉文本视图成为第一响应者，当编辑开始时......

```
- (void)textViewDidBeginEditing:(UITextView *)textView {
    [self setNotepadHidden:NO animated:YES];
} 
```

我经常制作以下形式的显示/隐藏方法来重新排列这样的事情......

```
- (void)setNotepadHidden:(BOOL)hidden animated:(BOOL)animated {

    NSTimeInterval duration = (animated)? 0.3 : 0.0;
    CGFloat offset = (hidden)? -NOTEPAD_HEIGHT : NOTEPAD_HEIGHT;

    [UIView animateWithDuration:duration animations:^{
        self.firstChild.frame = CGRectOffset(self.firstChild.frame, 0.0, offset);
        self.secondChild.frame = UIEdgeInsetsInsetRect(self.secondChild.frame, UIEdgeInsetsMake(offset, 0, 0, 0));
    }];
} 
```

当你想再次隐藏它时，用 ...Hidden:YES 调用。确保第二个孩子的子视图具有自动调整大小的行为设置，以便当他们的父母缩小时他们做正确的事情。

我经常发现需要这样一个，也...

```
- (BOOL)isNotepadHidden {
    return self.firstChild.frame.origin.y < 0.0;
} 
```

希望这是一个好的开始。

# html - 如何调整其内容的 IFrame 高度

> ID：10422674
> 
> 赞同：0
> 
> 时间：2012-05-02T22:36:16.743
> 
> 标签：html

如何调整其内容的 IFrame 高度？我从搜索中尝试了很多代码，但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:42:24.693

这取决于 iframe 的内容是否与主页在同一个域内。

如果它们在同一个域上，那么您可以将一些 JavaScript 添加到 iframe 内容页面，以将内容的高度传递回主页。

如果它们位于不同的域中，则浏览器安全性会禁止这两个页面通过 JavaScript 进行通信。

# hibernate - 如何在hibernate中使用两列作为主键

> ID：10422680
> 
> 赞同：0
> 
> 时间：2012-05-02T22:36:57.323
> 
> 标签：hibernate, mapping, composite-primary-key

我有一张有五列的表。这两列一起构成了我的表的主键。我正在尝试使用休眠实例化与该表对应的实体类。问题是我如何告诉 hiberante 主键不仅仅是类的一个字段，而是两个。我不希望 hiberante 为我创建数据库模式，因为我已经使用所有必要的主键设置创建了它。

我已经阅读了有关**复合键**的信息，但它认为这不适合我。毕竟，我只有一张桌子，我的代码中不会有一对多或类似的基数。

我尝试了类似的方法，但显然不起作用。

```
 <?xml version="1.0"?>
    <!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
    <hibernate-mapping>
       <class name="blog.Message" table="MESSAGES">
       <id name="title" column="MESSAGE_TITLE"></id>
       <id name="author" column="MESSAGE_AUTHOR"></id>
       <property name="body" column="MESSAGE_BODY"/>
         // ....AND TWO MORE FIELDS

    </class>
    </hibernate-mapping> 
```

这样做的方法是什么？复合键是必须的吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:50:42.150

理想情况下，如果可能的话，您应该避免使用 hibernate 的自然键。如果您创建单个 id 列，Hibernate 会更好地工作，hibernate 可以使用它来管理行的标识。

# android - 调试应用程序分段错误？编译器的错？

> ID：10422681
> 
> 赞同：1
> 
> 时间：2012-05-02T22:37:13.580
> 
> 标签：android, gcc, segmentation-fault

我目前正在为 pandaboard 编译 Android Linaro build 11.11 (staging-panda)。

在构建过程中，Android 会使用宿主 gcc 编译器编译一些工具。在我的 Linux Mint 12（基于 Ubuntu-11.10）上，我默认安装了 gcc-4.6。

我构建了 Android，一切运行良好，pandaboard 已启动，但随后启动任何应用程序都会导致分段错误（logcat 中的信号 11）。

然后我了解到 Linaro 使用 gcc-4.5 构建了这个版本，而不是 4.6 版本。我使用 apt-get 安装了它。我删除了 out/ 目录并完全重建了 Android。

编译运行良好，但链接器侮辱我：

```
g++-4.5 -Wl,-rpath-link=out/target/product/pandaboard/obj/lib -Wl,-rpath,\$ORIGIN/../lib -Lout/host/linux-x86/obj/lib   -Wl,--no-undefined   -m32          out/host/linux-x86/obj/EXECUTABLES/acp_intermediates/acp.o     -Wl,--whole-archive   -Wl,--no-whole-archive  out/host/linux-x86/obj/STATIC_LIBRARIES/libhost_intermediates/libhost.a   -o out/host/linux-x86/obj/EXECUTABLES/acp_intermediates/acp 
g++-4.5 -Wl,-rpath-link=out/target/product/pandaboard/obj/lib -Wl,-rpath,\$ORIGIN/../lib -Lout/host/linux-x86/obj/lib   -Wl,--no-undefined   -m32          out/host/linux-x86/obj/EXECUTABLES/mkbootfs_intermediates/mkbootfs.o     -Wl,--whole-archive   -Wl,--no-whole-archive     -o out/host/linux-x86/obj/EXECUTABLES/mkbootfs_intermediates/mkbootfs 
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.5.4/libstdc++.so when searching for -lstdc++
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.5.4/libstdc++.a when searching for -lstdc++
/usr/bin/ld: cannot find -lstdc++
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.5.4/libgcc_s.so when searching for -lgcc_s
/usr/bin/ld: cannot find -lgcc_s
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.5.4/libgcc.a when searching for -lgcc
/usr/bin/ld: cannot find -lgcc
collect2: ld returned 1 exit status 
```

链接器抓取 gcc-4.5 的 64 位库，尽管它可能适用于 32 位版本。到目前为止，这是我尝试过的事情，但没有成功：

1.  [按照这些说明](http://source.android.com/source/initializing.html)重新安装软件包
2.  须藤 ldconfig
3.  重新启动我的机器
4.  我考虑删除 gcc-4.6 以在我的机器上只获得 gcc-4.5。但是突触显示需要卸载太多依赖项，所以我没有做这一步 :)

最后我被告知要安装 gcc-4.5-multilib 和 g++-4.5-multilib。它奏效了，并且构建更进一步。我启动了熊猫，但应用程序（例如 com.android.launcher）仍然无法启动。我知道这是一个假设，但我认为这个段错误与编译器有某种联系。

我的问题很简单：

1.  com.android.launcher 是交叉编译还是使用主机 32 位编译器编译？我应该寻找什么关键字来在构建日志中找到相关的命令？
2.  如何调试此分段错误？特别是，我正在寻找使用“am”命令启动 com.android.launcher。
3.  strace 会为此问题提供有价值的信息吗？

多谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:49:14.163

使用**gdb**。要求：

`#`是目标 shell，虽然不是必须的 root 是
`$`主机 shell

1.  应用程序必须在调试模式下编译
    `LOCAL_CFLAGS += -g`
2.  在目标上启动 gdbserver：（
    `# gdbserver :5039 </system/bin/executable>`
    或）
    `# gdbserver :5039 --attach <pid>`
3.  将 tcp 端口转发到 adb 连接：
    `$ adb forward tcp:5039 tcp:5039`
4.  在主机上启动 gdbclient：
    `$ gdbclient :5039 <executable>`

如果您遇到困难`gdbclient`，请检查`build/envsetup.sh`函数的定义位置：
`$ type gdbclient`
添加详细`-v`选项可能会有所帮助。此外，如果您的可执行文件不在 中`system/bin`，您肯定需要修改`build/envsetup.sh`它，因为它是硬编码的。

可以在[此处](https://source.android.com/devices/tech/debug/gdb)找到更多信息。

# mysql - 带有整数的 MySQL 中的逗号分隔列表 REGEX

> ID：10422683
> 
> 赞同：0
> 
> 时间：2012-05-02T22:37:18.223
> 
> 标签：mysql, regex

我可以使用正则表达式将 GUID 的逗号分隔列表与作为字符串的列进行比较，但我无法使用如下所示的整数来进行比较。我做错了什么还是不可能？

```
select * from sims_role where organization_id REGEXP '4929,4930' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:44:29.567

也许你想要：

```
select * from sims_role where organization_id REGEXP '^(4929|4930)$' 
```

您使用的内容与以下内容相同：

```
select * from sims_role where organization_id LIKE '%4929,4930%' 
```

# javascript - 使用他们的类从一组中选择可见的 div

> ID：10422686
> 
> 赞同：0
> 
> 时间：2012-05-02T22:37:35.680
> 
> 标签：javascript, jquery, class, visible

`div`我在其中很多之间只有一个可见。怎么能选呢？

以下代码在 localhost 中有效，但不能在线：

```
var page_div_visible = $(".gform_page").filter(":visible"); 
```

我知道可以`divs`使用 .each() 并使用 .is(":visible") 进行选择，但我更喜欢单行解决方案。不可能吗？

**编辑：**

html 看起来像这样：

```
<div id='gform_page_20_6' class='gform_page' style='display:none;'>
</div>
<div id='gform_page_20_7' class='gform_page' style='display:none;'>
</div>
<div id='gform_page_20_8' class='gform_page' >
</div> 
```

**编辑 2**

不可能让它在线工作。这是**最终的解决方案**：

```
var page_div_visible;

$(".gform_page").each(function(i){
    if ($(this).css("display") !== "none"){
        page_div_visible = $(this);
        return false;
    }
}) 
```

谢谢你的支持。-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:42:59.790

你为什么不这样做呢？

```
 var page_div_visible = $(".gform_page:visible"); 
```

[http://jsfiddle.net/JoshuaPack/AtBx3/1/](http://jsfiddle.net/JoshuaPack/AtBx3/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:55:04.687

您使用的是哪个版本的 jQuery？可能是您也与 $ 冲突或在代码之后向 div 添加类。

查看您的评论，它受到其他一些 js 代码的干扰，请尝试使用 jQuery 而不是 $

```
// at the very beginning of your main JavaScript file
var jQ = jQuery.noConflict();

// at the place where you are doing other stuff with $, like your issue
var page_div_visible = jQ(".gform_page:visible"); 
```

# .htaccess - 重定向顶级域，Drupal 中的一页除外

> ID：10422687
> 
> 赞同：0
> 
> 时间：2012-05-02T22:37:36.993
> 
> 标签：.htaccess, drupal, mod-rewrite, url-rewriting

我有两个顶级域指向我的 Drupal 安装，abc.com 和 xyz.com。

我想强制所有页面使用 abc.com，除了一个页面（节点），它应该始终使用 xyz.com。

我尝试了一堆不同的.htaccess，似乎都没有。这是我得到的最接近的：

```
# Redirect abc.com/path/to/my/page to xyz.com/path/to/my/page
RewriteCond %{HTTP_HOST} ^(www\.)?abc\.com$ [NC]
RewriteRule ^path/to/my/page$ http://www.xyz.com$1 [R,L,NC]

# Redirect xyz.com to www.abc.com
RewriteCond %{HTTP_HOST} ^(www\.)?xyz\.com$ [NC]
RewriteRule ^ http://www.abc.com%{REQUEST_URI} [R,L] 
```

以上适用于整个站点重定向，但是当您转到 abc.com/path/to/my/page 时，它​​会重定向到主页 abc.com。我也试过这个：

```
# Redirect abc.com/path/to/my/page to xyz.com/path/to/my/page
RewriteCond %{HTTP_HOST} ^(www\.)?abc\.com$ [NC]
RewriteRule ^path/to/my/page$ http://www.xyz.com/path/to/my/page [R,L,NC] 
```

但这只是给了我一个关于太多重定向到 xyz.com/path/to/my/page 的错误。

有任何想法吗？我不确定我的 .htaccess 代码是否错误，或者它是否与 Drupal 的干净 URL 函数有关，或者什么。

这是完整的 Drupal .htaccess 文件：

```
#
# Apache/PHP/Drupal settings:
#

# Protect files and directories from prying eyes.
<FilesMatch "\.(engine|inc|info|install|make|module|profile|test|po|sh|.*sql|theme|tpl(\.php)?|xtmpl)$|^(\..*|Entries.*|Repository|Root|Tag|Template)$">
Order allow,deny
</FilesMatch>

# Don't show directory listings for URLs which map to a directory.
Options -Indexes

# Follow symbolic links in this directory.
Options +FollowSymLinks

# Make Drupal handle any 404 errors.
ErrorDocument 404 /index.php

# Set the default handler.
DirectoryIndex index.php index.html index.htm

# Override PHP settings that cannot be changed at runtime. See
# sites/default/default.settings.php and drupal_initialize_variables() in
# includes/bootstrap.inc for settings that can be changed at runtime.

# PHP 5, Apache 1 and 2.
<IfModule mod_php5.c>
php_flag magic_quotes_gpc                 off
php_flag magic_quotes_sybase              off
php_flag register_globals                 off
php_flag session.auto_start               off
php_value mbstring.http_input             pass
php_value mbstring.http_output            pass
php_flag mbstring.encoding_translation    off
</IfModule>

# Requires mod_expires to be enabled.
<IfModule mod_expires.c>
# Enable expirations.
ExpiresActive On

# Cache all files for 2 weeks after access (A).
ExpiresDefault A1209600

<FilesMatch \.php$>
# Do not allow PHP scripts to be cached unless they explicitly send cache
# headers themselves. Otherwise all scripts would have to overwrite the
# headers set by mod_expires if they want another caching behavior. This may
# fail if an error occurs early in the bootstrap process, and it may cause
# problems if a non-Drupal PHP file is installed in a subdirectory.
ExpiresActive Off
</FilesMatch>
</IfModule>

# Various rewrite rules.
<IfModule mod_rewrite.c>
RewriteEngine on

# Redirect abc.com/path/to/my/page to xyz.com/path/to/my/page
RewriteCond %{HTTP_HOST} ^(www\.)?abc\.com$ [NC]
RewriteRule ^(path/to/my/page)$ http://www.xyz.com/$1 [R=302,L,NC]

# Redirect xyz.com to www.abc.com (except for /path/to/my/page)
RewriteCond %{REQUEST_URI} !^/path/to/my/page$ [NC]
RewriteCond %{HTTP_HOST} ^(www\.)?xyz\.com$ [NC]
RewriteRule ^ http://www.abc.com%{REQUEST_URI} [R=302,L]

# Block access to "hidden" directories whose names begin with a period. This
# includes directories used by version control systems such as Subversion or
# Git to store control files. Files whose names begin with a period, as well
# as the control files used by CVS, are protected by the FilesMatch directive
# above.
#
# NOTE: This only works when mod_rewrite is loaded. Without mod_rewrite, it is
# not possible to block access to entire directories from .htaccess, because
# <DirectoryMatch> is not allowed here.
#
# If you do not have mod_rewrite installed, you should remove these
# directories from your webroot or otherwise protect them from being
# downloaded.
RewriteRule "(^|/)\." - [F]

# If your site can be accessed both with and without the 'www.' prefix, you
# can use one of the following settings to redirect users to your preferred
# URL, either WITH or WITHOUT the 'www.' prefix. Choose ONLY one option:
#
# To redirect all users to access the site WITH the 'www.' prefix,
# (http://example.com/... will be redirected to http://www.example.com/...)
# uncomment the following:
# RewriteCond %{HTTP_HOST} !^www\. [NC]
# RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
#
# To redirect all users to access the site WITHOUT the 'www.' prefix,
# (http://www.example.com/... will be redirected to http://example.com/...)
# uncomment the following:
# RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
# RewriteRule ^ http://%1%{REQUEST_URI} [L,R=301]

# Modify the RewriteBase if you are using Drupal in a subdirectory or in a
# VirtualDocumentRoot and the rewrite rules are not working properly.
# For example if your site is at http://example.com/drupal uncomment and
# modify the following line:
# RewriteBase /drupal
#
# If your site is running in a VirtualDocumentRoot at http://example.com/,
# uncomment the following line:
# RewriteBase /

#custom redirects (there are lots of these, all are specific paths used on an old site mapped to their respective pages on the new, reorganized site)
RewriteRule ^specific/old/path/$ http://www.abc.com/corresponding/new/path [R=301,L]    
#end custom redirects

# Pass all requests not referring directly to files in the filesystem to
# index.php. Clean URLs are handled in drupal_environment_initialize().
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !=/favicon.ico
RewriteRule ^ index.php [L]

# Rules to correctly serve gzip compressed CSS and JS files.
# Requires both mod_rewrite and mod_headers to be enabled.
<IfModule mod_headers.c>
# Serve gzip compressed CSS files if they exist and the client accepts gzip.
RewriteCond %{HTTP:Accept-encoding} gzip
RewriteCond %{REQUEST_FILENAME}\.gz -s
RewriteRule ^(.*)\.css $1\.css\.gz [QSA]

# Serve gzip compressed JS files if they exist and the client accepts gzip.
RewriteCond %{HTTP:Accept-encoding} gzip
RewriteCond %{REQUEST_FILENAME}\.gz -s
RewriteRule ^(.*)\.js $1\.js\.gz [QSA]

# Serve correct content types, and prevent mod_deflate double gzip.
RewriteRule \.css\.gz$ - [T=text/css,E=no-gzip:1]
RewriteRule \.js\.gz$ - [T=text/javascript,E=no-gzip:1]

<FilesMatch "(\.js\.gz|\.css\.gz)$">
# Serve correct encoding type.
Header set Content-Encoding gzip
# Force proxies to cache gzipped & non-gzipped css/js files separately.
Header append Vary Accept-Encoding
</FilesMatch>
</IfModule>
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:40:55.593

您的代码会生成一个循环。`abc.com/path/to/my/page`重定向到，但所有 xyz 网址都重定向到 abc.com，因此它会一遍又一遍地`xyz.com/path/to/my/page`重定向回。`abc.com/path/to/my/page`

```
# Redirect abc.com/path/to/my/page to xyz.com/path/to/my/page
RewriteCond %{HTTP_HOST} ^(www\.)?abc\.com$ [NC]
RewriteRule ^(path/to/my/page)$ http://www.xyz.com/$1 [R=302,L,NC]

# Redirect xyz.com to www.abc.com (except for /path/to/page)
RewriteCond %{ENV:REDIRECT_STATUS} ^$
RewriteCond %{REQUEST_URI} !^/path/to/my/page$ [NC]
RewriteCond %{HTTP_HOST} ^(www\.)?xyz\.com$ [NC]
RewriteRule ^ http://www.abc.com%{REQUEST_URI} [R=302,L] 
```

您的第一个代码中的规则不正确，重定向`abc.com/path/to/my/page`到`abc.com/`（并且没有创建循环）。

```
RewriteRule ^path/to/my/page$ http://www.xyz.com$1 [R,L,NC] 
```

这是因为 $1 引用了第一对括号，但您没有任何括号。其次，您需要`/`在它之前添加一个，否则它会重定向到`xyz.compath/to/my/page`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-24T18:55:02.873

如果这个“页面”是一个文件，那么你可能需要这样做。我用它来保留原始服务器提供的所有 Drupal 文件，然后将所有非文件流量转发到新站点。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !^/files/.* [NC]
RewriteCond %{HTTP_HOST} ^(www\.)?iradvocates\.org$ [NC] 
```

# css - CSS3 相当于 HTML5 shiv？

> ID：10422688
> 
> 赞同：7
> 
> 时间：2012-05-02T22:37:38.133
> 
> 标签：css, html5shiv

有人知道是否有一个像 HTML5 shiv for CSS3 这样的插件，它允许在 IE9 之前的浏览器版本中重写和正确呈现 CSS3 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T22:41:19.387

你可以试试[CSS3PIE](http://css3pie.com/)。

不久前为我做了这项工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T13:35:58.920

CSS3Pie 很棒（并且对建议它的两个答案都 +1），但它只涵盖了少数 CSS 属性。

如果您需要其他 CSS 功能才能工作，那么您可能还需要查看以下一些内容：

*   [CSS砂纸](https://github.com/zoltan-dulac/cssSandpaper)
*   [选择性](http://selectivizr.com/)
*   [此处列出](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)的几个脚本中的任何一个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T22:42:08.600

[CSS3 PIE](http://css3pie.com/)是一个不错的选择。

# android - 对“UselessParent”Lint 检查感到困惑

> ID：10422690
> 
> 赞同：1
> 
> 时间：2012-05-02T22:37:51.050
> 
> 标签：android, android-layout, android-lint

我有一些布局文件，Lint 给了我以下警告：

> 无用的父母
> 
> 摘要：检查是否可以删除父布局。
> 
> 优先级：2 / 10 严重性：警告类别：性能
> 
> 没有兄弟的子布局，**不是滚动视图**或根布局，并且没有背景，可以删除并将其子级直接移动到父级中，以获得更平坦和更有效的布局层次结构。

我感到困惑的部分是粗体。我的布局（在修复此警告之前）如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:paddingLeft="@dimen/default_margin"
        android:paddingTop="@dimen/default_margin_small"
        android:paddingBottom="@dimen/default_margin_small">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingRight="@dimen/default_margin"
            android:orientation="vertical">

            <!-- TEXTVIEWS & EDITTEXTS HERE -->

        </LinearLayout>

    </ScrollView>

</LinearLayout> 
```

但我修复了这样的警告：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingLeft="@dimen/default_margin"
    android:paddingTop="@dimen/default_margin_small"
    android:paddingBottom="@dimen/default_margin_small">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingRight="@dimen/default_margin"
        android:orientation="vertical">

        <!-- TEXTVIEWS & EDITTEXTS HERE -->

    </LinearLayout>

</ScrollView> 
```

这对我来说很有意义，但是 Lint 检查中上面的粗体部分让我有点困惑，因为我在 LinearLayout 中有一个 ScrollView。我不应该像这样修复它，还是因为 ScrollView 从 FrameLayout 继承**而将 ScrollView 作为布局文件的根元素没有问题**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:53:52.157

`ScrollView`布局文件的根元素没有问题。lint 投诉大概是关于你原来的 root ，它并没有为小时候`LinearLayout`增加任何价值。`ScrollView`

# android - 如何在开发环境中强制安装Android App？

> ID：10422692
> 
> 赞同：44
> 
> 时间：2012-05-02T22:38:01.920
> 
> 标签：android

我厌倦了卸载而不是在开发中重新安装。
有没有办法做 adb -force install some.apk ？我的意思是这样可以节省很多时间。每次去系统->应用程序->卸载每次签名都不同。

显然调试是一种开发设置，所以我不明白为什么需要经常手动卸载应用程序，这是浪费时间吗？任何可以使开发更容易的东西都会产生更好的代码和更好的应用程序，那么这是怎么回事？

我在更短的时间内热部署到服务器端 Java EE 服务器。这在命令行上不是一个问题，因为可以执行卸载或将 adb 脚本替换为卸载后安装。
然而，在日食中它仍然是一种痛苦。有人指出，这主要是关于签名更改。是的。但是为什么签名会在开发和调试模式中发生变化，并导致重新安装问题？

* * *

## 回答 #1

> 赞同：227
> 
> 时间：2012-08-19T16:44:45.300

adb 有 [-r] 参数要重新安装。

```
adb install -r some.apk 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-02T23:32:42.617

您可以进行的网络搜索显示您的 adb 问题的答案是：

```
adb uninstall some.package.name 
```

请注意，这不是您在 adb install 中使用的 file.apk 名称，而是它最终安装的实际包名称。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-02T23:00:36.563

正常的构建过程使用 android 调试密钥库，该密钥库可以在您的主目录的 android 文件夹中找到（路径取决于您的操作系统）。

使用此调试密钥库，您的应用程序将被签名。只要您的应用程序没有安装另一个签名，这个调试签名就可以安装在世界上的每一台安卓设备上。

当你说你只做代码检查时，重建和你的签名是不同的，而不是你的构建过程可能被破坏了。您的调试密钥库至少有效期为一年，只要您在同一台 PC 上构建生成的 APK，就永远不会有不同的签名。

为了进一步检查，您应该在开发过程中带来一些亮点。你用什么？蚀？

如果您在不同的开发机器上工作，请从一台机器中选择一个密钥库并将其放入您的版本控制中，并使用它来使用调试签名对您的 apk 进行签名。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-07-04T12:47:56.303

**您可以通过传递-r**参数来强制安装应用程序。

**-r**参数让 adb 重新安装应用程序。

```
adb install -r app-release.apk 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-03-02T11:33:50.480

adb install -r -d path/to/file.apk

-r 替换 -d 强制降级

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-16T06:48:51.830

debug keystore 可以在 Eclipse 中的 Preferences/Android/Build/Custom debug keystore 中设置，在团队工作时非常有用。每个成员都应该在那里设置相同的密钥库，然后共享设备就没有问题了。

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2012-11-30T11:34:44.567

用于卸载 adb 卸载 app_package_name

用于安装 adb install app_package_name

进入 Windows 的命令提示符和 linex/Macos 的终端

# backbone.js - Backbonejs - CORS 错误

> ID：10422695
> 
> 赞同：0
> 
> 时间：2012-05-02T22:38:12.473
> 
> 标签：backbone.js, cors

我有一个 REST 服务`http://restservice.net`。我正在骨干网中实现此服务的客户端。客户端只是一个 html 文件（用于引导应用程序）和一堆 js 文件，其中包含我的backbonejs 代码。我将这些文件托管在另一个站点上`http://client.net`。

我的backbonejs代码正在调用，`http://restservice.net`但由于`same origin policy`. 我已经看过其他关于我如何只能交谈的 SO 问题`http://client.net`。

我是否必须通过`http://client.net`. 我认为这是低效的。那么使用客户端 MVC 框架有什么意义呢？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T06:52:52.123

You have two options: JSONP and CORS both of these demand that your `http://restservice.net` server is setup to suppor the protocols. Forcing backbone to use JSONP simply requires you passing an option to `Backbone.sync`. One way to do this is like this:

```
sync: function(method, model, options){   
   options.dataType = "jsonp";  
   return Backbone.sync(method, model, options);  
} 
```

The problem with JSONP is that you can only make GET requests, so your REST api is effectively read only. To get CORS working you simply need to configure your api server to send back the proper headers . This would pretty liberal:

```
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: POST, GET, PUT, DELETE OPTIONS 
```

[here is a pretty good run down](https://developer.mozilla.org/en/HTTP_access_control) on CORS. If you set that up, then things will pretty much work as usual.

If you don't have the ability to make changes to the server at `http://restservice.net` then you have no choice but to proxy all the requests to that service. This is definately inefficient but implementing is probably simpler than you would expect. One thing to consider is a [reverse proxy](http://en.wikipedia.org/wiki/Reverse_proxy)

# android - Android加载器，要走的路？

> ID：10422697
> 
> 赞同：26
> 
> 时间：2012-05-02T22:38:19.927
> 
> 标签：android, list, android-4.0-ice-cream-sandwich, android-3.0-honeycomb

我习惯于使用适配器在 android 中构建列表。如果我需要一些长时间获取的数据，我会使用 asynctask 或简单的 runnable 来更新适配器所依赖的数据结构，并在适配器上调用 notifyDataChanged。

虽然它并不简单，但我最终发现这是一个简单的模型，它可以很好地分离逻辑表示（在 asynctask 中，更新数据结构）和视图（主要是充当视图工厂的适配器）。

尽管如此，我最近阅读了有关 HoneyComb 中引入并包含在向后兼容性支持库中的加载程序，我尝试了它们并发现引入了很多复杂性。它们很难处理并通过加载器管理器为整个过程添加某种魔力，添加大量代码并且不会减少类或协作项目的数量，但我可能错了，想听听一些好的观点装载机。

*   加载程序在代码行数、清晰度和工作量方面的优势是什么？
*   加载器在数据加载期间的角色分离方面，或者更广泛地说，在设计方面有什么优势？
*   它们是要走的路吗，我应该替换所有列表数据加载以通过加载器实现它们吗？

好的，这是一个开发者论坛，所以这里是一个例子。请用装载机让它变得更好：

```
package com.sof.test.loader;

import java.util.ArrayList;
import java.util.List;

import android.app.ListActivity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.ArrayAdapter;
import android.widget.TextView;

/** The activity. */
public class LoaderTestActivity extends ListActivity {

    private DataSourceOrDomainModel dataSourceOrDomainModel = new DataSourceOrDomainModel();
    private List<Person> listPerson;
    private PersonListAdapter personListAdapter;
    private TextView emptyView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        listPerson = new ArrayList<Person>();
        personListAdapter = new PersonListAdapter( listPerson );
        setListAdapter( personListAdapter );
        setUpEmptyView();
        new PersonLoaderThread().execute();
    }

    public void setUpEmptyView() {
        emptyView = new TextView( this );
        emptyView.setLayoutParams( new LayoutParams( LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT ) );
        emptyView.setVisibility(View.GONE);
         ((ViewGroup)getListView().getParent()).addView(emptyView);
        getListView().setEmptyView(emptyView);
    }

    /** Simulate a long task to get data. */
    private class PersonLoaderThread extends AsyncTask<Void, Integer, List<Person>> {
        @Override
        protected List<Person> doInBackground(Void... params) {
            return dataSourceOrDomainModel.getListPerson( new ProgressHandler());
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            emptyView.setText( "Loading data :" + String.valueOf( values[ 0 ] ) +" %" );
        }

        @Override
        protected void onPostExecute(List<Person> result) {
            listPerson.clear();
            listPerson.addAll( result );
            personListAdapter.notifyDataSetChanged();
        }

        private class ProgressHandler implements ProgressListener {

            @Override
            public void personLoaded(int count, int total) {
                publishProgress( 100*count / total );
            }

        }
    }

    /** List item view factory : the adapter. */
    private class PersonListAdapter extends ArrayAdapter<Person> {

        public PersonListAdapter( List<Person> listPerson ) {
            super(LoaderTestActivity.this, 0, listPerson );
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            if( convertView == null ) {
                convertView = new PersonView( getContext() );
            }
            PersonView personView = (PersonView) convertView;
            personView.setPerson( (Person) getItem(position) );
            return personView;
        }
    }
} 
```

进度的小回调接口

```
package com.sof.test.loader;

/** Callback handler during data load progress. */
public interface ProgressListener {
    public void personLoaded(int count, int total );
} 
```

列表项小部件

```
package com.sof.test.loader;

import com.sof.test.loader.R;
import android.content.Context;
import android.view.LayoutInflater;
import android.widget.LinearLayout;
import android.widget.TextView;

/** List Item View, display a person */
public class PersonView extends LinearLayout {

    private TextView personNameView;
    private TextView personFirstNameView;

    public PersonView(Context context) {
        super(context);
        LayoutInflater inflater= (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate( R.layout.person_view,this );
        personNameView = (TextView) findViewById( R.id.person_name );
        personFirstNameView = (TextView) findViewById( R.id.person_firstname );
    }

    public void setPerson( Person person ) {
      personNameView.setText( person.getName() );   
      personFirstNameView.setText( person.getFirstName() );
    }
} 
```

它是 xml：res/person_view.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/person_view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/person_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true" />

    <TextView
        android:id="@+id/person_firstname"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/person_name" />

</RelativeLayout> 
```

数据源或模型，提供数据（缓慢）

```
package com.sof.test.loader;

import java.util.ArrayList;
import java.util.List;

/** A source of data, can be a database, a WEB service or a model. */
public class DataSourceOrDomainModel {
    private static final int PERSON_COUNT = 100;

    public List<Person> getListPerson( ProgressListener listener ) {
        List<Person> listPerson = new ArrayList<Person>();
        for( int i=0; i < PERSON_COUNT ; i ++ ) {
            listPerson.add( new Person( "person", "" + i ) );
            //kids, never do that at home !
            pause();
            if( listener != null ) {
                listener.personLoaded(i,PERSON_COUNT);
            }//if
        }
        return listPerson;
    }//met

    private void pause() {
        try {
            Thread.sleep( 100 );
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
} 
```

POJO 代表一个人：

```
package com.sof.test.loader;

/** A simple POJO to be displayed in a list, can be manipualted as a domain object. */
public class Person {
    private String name;
    private String firstName;

    public Person(String name, String firstName) {
        this.name = name;
        this.firstName = firstName;
    }

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getFirstName() {
        return firstName;
    }
    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }
}//class 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T07:04:26.197

如果有人正在寻找我之前示例的加载器版本：这里是：

```
package com.sof.test.loader;

import java.util.ArrayList;
import android.app.LoaderManager;
import java.util.List;

import android.app.ListActivity;
import android.content.AsyncTaskLoader;
import android.content.Context;
import android.content.Loader;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.ArrayAdapter;
import android.widget.TextView;

/** The activity. */
public class LoaderTestActivity2 extends ListActivity implements
        LoaderManager.LoaderCallbacks<List<Person>> {

    private DataSourceOrDomainModel dataSourceOrDomainModel = new DataSourceOrDomainModel();
    private List<Person> listPerson;
    private PersonListAdapter personListAdapter;
    private TextView emptyView;
    private Loader<List<Person>> personLoader;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        listPerson = new ArrayList<Person>();
        personListAdapter = new PersonListAdapter(listPerson);
        setListAdapter(personListAdapter);
        personLoader = new PersonLoader(this, dataSourceOrDomainModel, new ProgressHandler() );
        setUpEmptyView();
        getLoaderManager().initLoader(0, null, this);
        personLoader.forceLoad();
    }

    public void setUpEmptyView() {
        emptyView = new TextView(this);
        emptyView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));
        emptyView.setVisibility(View.GONE);
        ((ViewGroup) getListView().getParent()).addView(emptyView);
        getListView().setEmptyView(emptyView);
    }

    public void publishProgress(int progress) {
        emptyView.setText("Loading data :" + String.valueOf(progress) + " %");
    }

    @Override
    public Loader<List<Person>> onCreateLoader(int arg0, Bundle arg1) {
        return personLoader;
    }

    @Override
    public void onLoadFinished(Loader<List<Person>> personLoader, List<Person> result) {
        listPerson.clear();
        listPerson.addAll(result);
        personListAdapter.notifyDataSetChanged();
    }

    @Override
    public void onLoaderReset(Loader<List<Person>> arg0) {
        listPerson.clear();
        personListAdapter.notifyDataSetChanged();
    }

    /** List item view factory : the adapter. */
    private class PersonListAdapter extends ArrayAdapter<Person> {

        public PersonListAdapter(List<Person> listPerson) {
            super(LoaderTestActivity2.this, 0, listPerson);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            if (convertView == null) {
                convertView = new PersonView(getContext());
            }
            PersonView personView = (PersonView) convertView;
            personView.setPerson((Person) getItem(position));
            return personView;
        }
    }

    private class ProgressHandler implements ProgressListener {

        @Override
        public void personLoaded(final int count, final int total) {
            runOnUiThread( new Runnable() {
                @Override
                public void run() {
                    publishProgress(100 * count / total);                   
                }
            });
        }
    }
}

 class PersonLoader extends AsyncTaskLoader<List<Person>> {

    private DataSourceOrDomainModel dataSourceOrDomainModel;
    private ProgressListener progressHandler;

    public PersonLoader(Context context, DataSourceOrDomainModel dataSourceOrDomainModel, ProgressListener progressHandler ) {
        super(context);
        this.dataSourceOrDomainModel = dataSourceOrDomainModel;
        this.progressHandler = progressHandler;
    }

    @Override
    public List<Person> loadInBackground() {
        return dataSourceOrDomainModel.getListPerson( progressHandler );
    }
} 
```

在此示例中添加支持（支持库）会更加困难，因为支持库中没有等效的 ListAcitivity。我必须创建一个 ListFragment 或创建一个 FragmentActivity 并给它一个包含列表的布局。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-02T23:19:34.003

加载程序要解决的一个问题是，如果您的活动在异步任务仍在进行中时重新启动（例如由于设备轮换或配置更改），会发生什么情况？在您的情况下，您重新启动的活动将启动任务的第二个实例并丢弃第一个实例的结果。当第一个完成时，您最终可能会崩溃，因为您的异步任务有一个引用是现在已完成的活动。

是的，使用加载器通常会产生更多/更复杂的代码，特别是如果您不能使用提供的加载器之一。

# hibernate - 在 Hibernate Join 中过滤

> ID：10422704
> 
> 赞同：0
> 
> 时间：2012-05-02T22:39:30.403
> 
> 标签：hibernate

如何将过滤器添加到 Hibernate 的加入？我有一个有三个孩子的实体父级，我想按这些子实体的某些字段过滤数据。它通过我的 DAO 创建的 JOIN

```
sessionFactory.getCurrentSession().createCriteria(Cartel.class).add( create(instance) ).list(); 
```

我想如果我设置我想要过滤的字段，Hibernate 会自动构建由这些字段过滤的 JOIN，但它会返回所有结果（构建的 select 语句在 where 子句中只有 1=1）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:18:51.267

我解决了：

```
criteria.add(Restrictions.eq("xxx",Object); 
```

谢谢。问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:57:49.420

不幸的是，HQL 不允许`ON`连接子句的概念，这就是您所暗示的。

但是，您可以编写原始 SQL 并用于`createSQLQuery()`执行任意 SQL，这当然可以指定一个`ON`子句（假设您的数据库支持它）

# php - 使用具有多个标题的 php 邮件功能在发送电子邮件后显示 /r/n

> ID：10422707
> 
> 赞同：2
> 
> 时间：2012-05-02T22:39:37.243
> 
> 标签：php, email, header

我正在使用 php 邮件功能，并且我有多个标题。问题是当我发送它们时，它们会在电子邮件信息中显示 /r/n。为什么会显示这个？

我已将标题放入一个数组中，由 /r/n 分隔。发送电子邮件时，它会在用户收件箱中显示 rn。我需要做什么才能不显示 rn？

```
$headers=array(
    'From: xzy@gmail.com',
    'Content-Type:text/html',
    'Reply-To: xyz@gmail.com'
);
mail($email_address,$subject,$body,implode("/r/n",$headers)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T22:41:49.483

您正在使用`/`而不是`\`. 换行符用反斜杠表示，所以应该是`\r\n`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T22:43:01.590

使用“\r\n”而不是“/r/n”。你使用了错误的斜线

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T22:42:21.793

应该是`"\r\n"`，反斜杠是针对不能显示的特殊字符的！
此外，它们仅在双引号字符串 ( `"`)中解析

# wordpress - 如何将两个 wordpress 页面重定向到 https？

> ID：10422709
> 
> 赞同：1
> 
> 时间：2012-05-02T22:39:47.790
> 
> 标签：wordpress, .htaccess, redirect, ssl, https

我的网站上安装了 SSL 证书，我想将两个特定页面重定向到 https，例如`http://domain.com/?page=credit and http://domain.com/?page=submit_form`https。

我的网络主机将以下代码添加到我的 .htaccess 文件中，在 Wordpress 设置上方，但它仍然没有重定向页面：

```
Redirect /?page=credit https://domain.com/?page=credit

RewriteEngine On
RewriteCond %{SERVER_PORT} !^443$
RewriteCond %{QUERY_STRING} (^|&)p=(credit)($|&)
RewriteRule (.*) https://domain.com/?page=credit [R=301,QSA,L] 
```

对不起，我不太擅长这个。我能得到的任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:17:47.723

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTPS} !=on
RewriteCond %{QUERY_STRING} (^|&)page=(credit|submit_form)(&|$) [NC]
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteCond %{HTTPS} =on
RewriteCond %{QUERY_STRING} !(^|&)page=(credit|submit_form)(&|$) [NC]
RewriteRule ^ http://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

# php - 如何使用从 PHP 脚本调用的 Blender 渲染文件？

> ID：10422711
> 
> 赞同：0
> 
> 时间：2012-05-02T22:39:56.963
> 
> 标签：php, permissions, executable, blender

我正在编写一个基本的 Web 服务来渲染具有良好照明和阴影的色板，在其“命令行”模式下使用搅拌器，并从 php 脚本调用（该脚本还处理数据库中的编目色板）。一切都在win32上的apache下运行，使用php 5.2

一切似乎都运行良好，直到实际渲染某些东西的最后一步都失败了。我尝试过使用所有不同的 php 执行命令（exec()、system()、passthru() 等），结果都相同——例如什么都没有。奇怪的是它正在工作，因为如果我将格式错误的参数传递给搅拌机，那么 php 会回显来自搅拌机的正确错误消息，这会验证它肯定正在启动程序。如果我提供正确的参数，那么 exec() 等就会挂起，并且任务管理器中不会出现任何搅拌机进程。

我感觉这是一个文件权限问题，因为 Blender 需要将 jpg 文件写入 web 文件夹（该文件夹位于默认的 apache 安装目录中，例如：在程序文件中），但我不知道如何设置正确的权限在窗户下。

从命令窗口执行我的渲染命令完全符合它的要求并输出渲染文件，但 PHP 中的相同命令失败。

这是我的 php 代码（在这种情况下使用 system() 但所有其他变体似乎具有相同的结果）：

```
$swatchId = $args->swatchId;
$sql = "SELECT * FROM `colours` WHERE `Id` = ".$swatchId." LIMIT 0, 1 ";
$rows = mysql_query($sql);
$command =  ".\blender\blender -b _swatches.blend ";

while ($row = mysql_fetch_assoc($rows)) {
    $filename = $row["ProductCode"];
    $red = $row["Red"];
    $green = $row["Green"];
    $blue = $row["Blue"];
}

$command = $command."-o ".$filename." -F JPEG -x 1 -f 1";
echo json_encode(array("Command"=>$command));
$result = system($command); 
```

这导致命令：

```
.\blender\blender -b _swatches.blend -o NPRKGAP -F JPEG -x 1 -f 1 
```

它在命令窗口中正确执行，但在 php 中调用（来自 web 请求）时不能正确执行。

我在 PHP 中关闭了安全模式，并且提高了脚本可以使用的最大内存，尽管渲染的混合并不那么苛刻。

如果有人可以提供帮助，我将永远感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-20T16:20:18.000

尝试将标志添加到搅拌机命令中。

```
-noaudio -nojoystick 
```

我正在做类似的事情，除了我使用的是 python。

背景故事：当我试图让 www-data 用户启动搅拌机（你也在做什么）时，我遇到了疯狂的权限问题。我查看了 George Reith 的评论，并在 netrender 示例中看到它们让您放置 noaudio 和 nojoystick。所以我随机尝试了一下，突然 www-data 可以运行搅拌机了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-03T17:37:09.897

创建一个脚本并将以下代码放入该文件并将其另存为`.py`

```
import bpy

bpy.ops.render.render(animation=True) 
```

和改变

```
$command =  ".\blender\blender -b _swatches.blend "; 
```

和

```
$command =  ".\blender\blender -b _swatches.blend " + "Directory\script.py"; 
```

# python - Python代码片段的解释

> ID：10422722
> 
> 赞同：1
> 
> 时间：2012-05-02T22:40:44.277
> 
> 标签：python

对于课堂作业，我正在分析亚马逊的 Kindle 数字版权管理实施的工作原理以及如何克服它。在我的研究中，我遇到了一组 Python 脚本，它们可以从加密中提取图书数据。它符合我解释论文中加密破解部分的需要。

问题是，我不流利地使用 Python，或者除了`print 'Hello World'`.

在通过源代码工作时，我遇到了这个片段

```
def __init__(self, infile):
    # initial sanity check on file
    self.data_file = file(infile, 'rb').read()
    self.mobi_data = ''
    self.header = self.data_file[0:78]

    if self.header[0x3C:0x3C+8] != 'BOOKMOBI' and self.header[0x3C:0x3C+8] != 'TEXtREAd':
        raise DrmException("invalid file format")

    self.magic = self.header[0x3C:0x3C+8]
    self.crypto_type = -1 
```

我对代码的解释是这样的：

1.  `self.data_file`是调用时返回`read()`的字节数组。`file(infile, 'rb')`
2.  `self.header`是数据文件前79个字节的值

我遇到的问题是什么`self.header[0x3C:0x3C+8]`意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T22:42:56.417

这是一个普通的切片，就像`self.data_file[0:78]`，除了使用十六进制文字作为偏移量。`0x3C`在 base10 中是 60，所以它与`self.header[60:60+8]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T22:43:06.587

`self.header[0x3C:0x3C+8]``header`将从偏移量 0x3C 处得到一个 8 字节的字符串。

# java - Java字符串到一种类型的字符

> ID：10422724
> 
> 赞同：1
> 
> 时间：2012-05-02T22:40:53.000
> 
> 标签：java, string, character

是否可以用一种类型的字符替换整个字符串？有没有一种方法可以做到这一点？当然是一行。

```
Example:

"1234567890" turns to "xxxxxxxxxx" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T22:42:37.663

您可以使用replaceAll：

```
String newString = origString.replaceAll(".", "x"); 
```

例如，这个：

```
System.out.println("hello".replaceAll(".", "*")); 
```

输出：

```
***** 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T22:48:50.497

比一个更轻量级的解决方案`replaceAll`：

```
char[] chars = new char[origString.length()];
Arrays.fill(chars,'x');
String newString = new String(chars); 
```

哦，对不起，你想要一行：

```
char[] chars = new char[origString.length()]; Arrays.fill(chars,'x'); String newString = new String(chars); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T22:48:04.373

> 是否可以用一种类型的字符替换整个字符串？

不，`String`是[不可变](http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html)的，因此无法*更改* ¹，因此您不能将 "1234567890"*转换为*"xxxxxxxxxx"

您可以按照[@BinyaminSharet的建议创建一个](https://stackoverflow.com/questions/10422724/java-string-to-one-type-of-character/10422742#10422742)*新`String`对象*，将其替换

* * *

(1) 从技术上讲，可以使用[反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)来更改不可变对象——但应不惜一切代价避免。

# oop - Backbone：以正确顺序呈现和重新呈现订阅者视图的模式

> ID：10422734
> 
> 赞同：1
> 
> 时间：2012-05-02T22:41:57.393
> 
> 标签：oop, backbone.js, backbone-events

所以基本上我一直在玩弄这种 pubsub 模式，当父“控制器”视图调用时，子视图会重新渲染（对不起，如果这令人困惑）。如果子视图基于集合或模型的获取（下面未显示），有时它们不会以正确的顺序呈现我也需要它们，即如果 SubView1 是 Subview2 的小导航，我不想要它在 SubView2 下方。

我认为这样一个常见问题必须有一个模式。让我知道这是否没有意义，我会澄清一下。但我正在处理的基本情况如下。

标记：

```
 <div id="main-container">
   <div class="inner-container"></div>
 </div> 
```

js：

```
 var ToggleNavView = Backbone.View.extend({
    //let's say this template has two links
    template: Handbars.compile(linkstmpl),

    el: $('#main-container'),
    events: {
      "click a": "toggleViews"
    }
    initialize: function(){
      _.bindAll(this, 'render', 'toggleViews');

      // whoa, nice looking event aggregator http://bit.ly/p3nTe6
      this.vent = _.extend({}, Backbone.Events);

      this.render();
    },
    render: function(){
       $(this.el).append(this.tmpl);

       // suppose subviews below are declared as modules above with, say, requirejs
       var sub1 = new SubView1({ vent: this.vent }),
           sub2 = new SubView2({ vent: this.vent });

    },

    toggleViews: function(e){
      e.preventDefault();

      // get name of section or view you're toggling to
      var section = $(e.currentTarget).data('section');

      // publish events to subscribers
      this.vent.trigger('toggleInboxViews', this, section);

    },

   });

   var SubView1 = Backbone.View.Extend({
      template: Handlebars.compile(tmpl1),
      initialize: function(ops){
        _.bindAll(this, 'render', 'removeOrRerender');

        this.vent = ops.vent || null;
        this.render()
      },
      render: function(){
        $(this.el).append(this.template()).appendTo($(".inner-container"))
      },

      removeOrRerender: function(obj, section){
        if( section == 'my-section'){
          this.render();
        } else if( section == 'other-section' ) {
          $(this.el).fadeOut();
        }
      },

    })

    // another subview with same functionality etc... 

    // init view
    new ToggleNavView(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:26:10.803

如果您需要子视图显示在特定位置，则父视图应定义该结构，并且应告知子视图在何处呈现自身。然后，由于整体结构不会改变，因此绘制的顺序无关紧要。

例如，如果您希望一个子视图显示在顶部，另一个显示在其下方，则主视图应如下所示：

```
<div id="main-view">
    <div id="sub1"></div>
    <div id="sub2"></div>
</div> 
```

然后主视图将使用以下内容呈现子视图：

```
 var sub1 = new SubView1({ el: this.$el.find('#sub1'), vent: this.vent }),
 var sub2 = new SubView2({ el: this.$el.find('#sub2'), vent: this.vent }); 
```

通过`el`为子视图指定 ，它们在页面上的位置不再是它们的问题，并且如果它们以不同的顺序呈现，它们也不会移动位置。这种结构的一个愉快的副作用是子视图只关心它们自己并且很好地独立。父视图只需要通过正确构造其模板将各个部分放在正确的位置，并且一切正常。

这是一个可以阐明结构的简单演示：http: [//jsfiddle.net/ambiguous/9u3S5/](http://jsfiddle.net/ambiguous/9u3S5/)

# javascript - 在 D3.js 中缩放或平移时限制域

> ID：10422738
> 
> 赞同：9
> 
> 时间：2012-05-02T22:42:18.173
> 
> 标签：javascript, charts, d3.js, zooming, pan

我已经实现了一个可以缩放和平移的简单 D3.js 折线图。它基于 Stephen Bannasch 的出色[示例](http://bl.ocks.org/1182434)。

我的数据域是 x 维中的 [0, n]。

如何使用内置的缩放行为（即使用鼠标滚轮事件）限制缩放和平移到该域？

我想防止用户在下端平移 0 或在上端平移 n，例如，他们不应该在 x 轴上看到负值，并且希望将缩放限制在同一个窗口。

我发现的基于 Jason Davies 的示例使用 extent( [...],[...],[...] ) 在 2.9.1 版本中似乎不再适用。不幸的是，缩放行为目前是其他出色的 API 文档中未记录的少数功能之一。

欢迎任何指点。

PS。*我在 D3.js 邮件列表上发布了同样的问题，但没有得到回复：[https](https://groups.google.com/d/topic/d3-js/w6LrHLF2CYc/discussion)* ://groups.google.com/d/topic/d3-js/w6LrHLF2CYc/discussion 。为交叉张贴道歉。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T23:31:57.087

可悲的是，Bill 发布的解决方案只起到了一半的作用：虽然它确实抑制了平移，但如果应用缩放，它会导致图形扭曲。然后通常不可能返回到适当比例和定位的图形。

在以下版本中，即使滚动到边界，轴的比例也会保持不变。

一旦比例达到 100%，比例的域就会重置为其原始位置。这保证了正确的定位，即使中间步骤返回了非法的轴参数。

虽然并不完美，但我希望这个脚本可以帮助某人，直到 d3（重新）实现这个功能。

```
# x and y are the scales
# xAxis and yAxis are the axes
# graph is the graph you want attach the zoom to

x0 = x.copy()
y0 = y.copy()

successfulTranslate = [0, 0]

zoomer = d3.behavior.zoom()
  .scaleExtent([1,2])

onZoom = ->
  ev = d3.event # contains: .translate[x,y], .scale
  if ev.scale == 1.0
    x.domain x0.domain()
    y.domain y0.domain()
    successfulTranslate = [0, 0]
  else
    xTrans = x0.range().map( (xVal) -> (xVal-ev.translate[0]) / ev.scale ).map(x0.invert)
    yTrans = y0.range().map( (yVal) -> (yVal-ev.translate[1]) / ev.scale ).map(y0.invert)
    xTransOk = xTrans[0] >= x0.domain()[0] and xTrans[1] <= x0.domain()[1]
    yTransOk = yTrans[0] >= y0.domain()[0] and yTrans[1] <= y0.domain()[1]
    if xTransOk
      x.domain xTrans
      successfulTranslate[0] = ev.translate[0]
    if yTransOk
      y.domain yTrans
      successfulTranslate[1] = ev.translate[1]
  zoomer.translate successfulTranslate

graph.select('g.x.axis').call(xAxis)
graph.select('g.y.axis').call(yAxis)
drawBars()

zoomer.on('zoom', onZoom)

# ...
graph.call(zoomer) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:14:20.110

您只需要在重绘时限制域。以下代码将防止图形被缩小超过其初始域（如[http://bl.ocks.org/1182434](http://bl.ocks.org/1182434)中使用的）。

```
SimpleGraph.prototype.redraw = function() {
  var self = this;
  return function() {

    self.x.domain([Math.max(self.x.domain()[0], self.options.xmin), Math.min(self.x.domain()[1], self.options.xmax)]);

    self.y.domain([Math.max(self.y.domain()[0], self.options.ymin), Math.min(self.y.domain()[1], self.options.ymax)]);

    .... 
```

# javascript - 运算符“>>”（双箭头）和“|”是什么意思？（单管道）在 JavaScript 中是什么意思？

> ID：10422744
> 
> 赞同：12
> 
> 时间：2012-05-02T22:42:54.827
> 
> 标签：javascript

我在一些 JS 代码中看到了这一点：

```
 index = [
            ascii[0] >> 2,
            ((ascii[0] & 3) << 4) | ascii[1] >> 4,
            ((ascii[1] & 15) << 2) | ascii[2] >> 6,
            ascii[2] & 63
        ]; 
```

我很想知道这意味着什么。特别是“>>”，单管道“|” 和最后一行的“&”符号？

非常感激！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-02T22:48:07.937

`x >> y`表示将 的位`x`向右`y`移动（`<<`向左）。

`x | y`表示比较 和 的位，`x`如果在该位置有或有 a ，则将`y`a`1`放入每个位。`x``y``1`

`x & y`与 相同`|`，只是结果是`1`if BOTH`x`和`y`have a `1`。

例子：

```
#left-shifting 1 by 4 bits yields 16
1 << 4 = b00001 << 4 = b10000 = 16

#right-shifting 72 by 3 bits yields 9
72 >> 3 = b1001000 >> 3 = b1001 = 9

#OR-ing 
8 | 2 = b1000 | b0010 = b1010 = 10

#AND-ing
6 & 3 = b110 & b011 = b010 = 2 
```

有关详细信息，请在[Google 中搜索“位运算符”](http://google.com/search?q=bitwise+operators)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-02T22:51:03.590

`>>`是右移。它获取这些位并将它们向右移动*n 个*位置¹。例如，让我们检查一下`35 >> 2`：

```
35 = 100011 shift two places
     001000 = 8 
```

确实，`35 >> 2 == 8`.

* * *

`|`是按位或。它获取每个操作数中的每一位并将它们或它们在一起。您可以将其设想为一种二进制加法，但当 top 和 bottom 都是`1`. 例如，这里是`5 | 3`：

```
5 = 101
3 = 011
| -----
    111 = 7 
```

确实，`5 | 3 == 7`.

* * *

最后，`&`是按位与。它取每个操作数中的每一位，除了如果一位或另一位为 1 则不给出 1，如果一位 AND 另一位均为 1 则给出 1。例如，这里是`5 & 3`：

```
5 = 101
3 = 011
& -----
    001 = 1 
```

试试看; `5 & 3 == 1`.

* * *

您可能需要注意的其他一些是`<<`，这是一个左移位，以及`^`，这是一个 XOR（当两个位相同时为 0，如果它们不同则为 1）。

[¹实际上，它是 n 模 32。`1 >> 32`是`1`. 不知道为什么。]

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-02T22:55:45.380

和运算`>>`符`<<`是按位移位。例如，

```
11 =      00001011
11 << 3 = 01011000 = 88 
```

值得注意的是`m << n = m * 2^n`和`m >> n = m / 2^n`。这有时用于执行非常有效的 2 次方乘法/除法。

和分别是按位`&`和`|`和或。

```
11 =      00001011
28 =      00011100
11 & 28 = 00001000 = 8

11 =      00001011
28 =      00011100
11 | 28 = 00011111 = 31 
```

说到这里，我应该提一下`^`运算符，它不是用于幂运算，而是用于按位异或。

```
11 =      00001011
28 =      00011100
11 ^ 28 = 00010111 = 23 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T22:53:39.200

*   &（按位与）
*   | （按位或）
*   <<（左移）
*   >>（符号传播右移）

示例（来自[https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators)）：

按位和：

```
 9 (base 10) = 00000000000000000000000000001001 (base 2)
    14 (base 10) = 00000000000000000000000000001110 (base 2)
                   --------------------------------
14 & 9 (base 10) = 00000000000000000000000000001000 (base 2) = 8 (base 10) 
```

左移（9 << 2 将 9 的二进制位，左移 2 位）：

```
 9 (base 10): 00000000000000000000000000001001 (base 2)
                  --------------------------------
9 << 2 (base 10): 00000000000000000000000000100100 (base 2) = 36 (base 10) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T22:44:23.230

在我看来像位运算符：

[http://web.eecs.umich.edu/~bartlett/jsops.html](http://web.eecs.umich.edu/~bartlett/jsops.html)

编辑：那个 ascii 数组是一个死的赠品......哈哈

# c++ - C++：包含头文件的最佳位置

> ID：10422750
> 
> 赞同：1
> 
> 时间：2012-05-02T22:43:19.053
> 
> 标签：c++, header

假设我们有四个文件：ah、a.cpp、b1.h 和 b2.h。而且，我们需要在 ah 或 a.cpp 中包含 b1.h 和 b2.h。我应该在哪里包括 b1 和 b2？假设只有 a.cpp 需要 b1 和 b2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T22:45:04.070

如果头文件不需要它，则将其包含在 cpp 中。

这减少了编译时间并有助于理解模块之间的依赖关系。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T22:45:12.387

一般规则是，您应该避免在不使用其中定义的标头中包含标头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T22:45:53.667

仅包含标题中需要的内容。

ah的类定义和函数声明需要b1.h还是b2.h？然后包括需要的内容。

否则仅包含在 .cpp 中。

请记住，每次包含文件时，您的编译时间都会更长。

以下是一些关于何时需要的提示：

*   不需要包含返回值或参数。例如`std::string blahFunc(std::string a);`不需要`<string>`包含在头文件中（但仍然需要前向声明）

*   不需要包含指针类型，它们只需要前向声明即可。例如`randomType * f();`不需要在其标头中包含 randomType 的标头。您所要做的就是向前声明`class randomType;`

*   引用也可以只是前向声明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T22:48:13.747

如果 b1.h 和/或 b2.h在 ah 中实际*使用*`struct`了类似or`typedef`等​​定义（例如，在函数原型中作为参数或返回类型），那么您应该将它们包含在标题的顶部。

 *否则，如果 b1.h/b2.h 仅提供 a.cpp 内部使用的定义（私有成员等），则将其包含在 a.cpp 的顶部。

您应该尝试仅在文件中包含编译器理解该文件实际需要的内容。（与窗户不同，它的怪物是`<Windows.h>`.）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-02T23:30:38.027

I think the include directives should always be in your .h** files. The only include you should put in the a.cpp file should be

```
#include "a.hpp" 
```

To understand why, suppose Bob uses your code inside his program, and your code is not disclosed (i.e., you provide it only as a library). Then all he can see are your headers. If you include everything you need in your headers, he will still be able to check what are the dependencies of your code and make sure he has everything needed by your code. If you put the include directives in the .c** files, then unless your code is open source (i.e. he has access to the .c** files) he won't be able to see what are the packages he must make sure to have installed.*

# ruby-on-rails - 未定义的方法“包括？” 对于关系模型

> ID：10422753
> 
> 赞同：1
> 
> 时间：2012-05-02T22:43:35.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3, relationship

我正在尝试使用包含过滤掉数组中的一些对象？方法，但我一直遇到这个错误`undefined method 'include?' for #<Trip:0xa01b7b0>`。

我基本上有两个模型，eventdeal和trip。我创建了第三个关系模型 eventdealtrip，它将两个模型联系在一起。

行程.rb

```
class Trip < ActiveRecord::Base
  has_many :eventdealtrips, :dependent => :destroy
  has_many :eventdeals, :through => :eventdealtrips
end 
```

eventdeal.rb

```
class Eventdeal < ActiveRecord::Base
  has_many :eventdealtrips
  has_many :trips, :through => :eventdealtrips, :dependent => :destroy
end 
```

eventdealtrip.rb

```
class Eventdealtrip < ActiveRecord::Base
  belongs_to :eventdeal
  belongs_to :trip
end 
```

eventdealtrips/new.html.erb

```
<% if !@trips.blank? %>
  <% @trips.each do |trip| %>
    <% if !trip.include?(@eventdeal) %>
       <!--Content-->
    <% end %>
  <% end %>
<% end %> 
```

基本上，我只想显示不包括当前事件交易（在控制器中定义）的行程。

关于为什么我得到未定义的方法错误的任何见解？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T22:57:21.797

包括？方法通常用于数组，试试这个：

```
<% if !trip.eventdeals.include?(@eventdeal) %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T22:57:43.640

你确定`trip`是一个数组吗？你试过`trip.inspect`吗？

我不确定你到底`@trips`是什么，但我猜它是一个 s 数组`Trip`。你也应该发布那个。

```
trip.eventdealtrips.include? @eventdealtrip
// or
trip != @eventdealtrip 
```

# snmp - SNMPv3 是否需要使用用户名/身份验证和社区字符串？

> ID：10422762
> 
> 赞同：2
> 
> 时间：2012-05-02T22:44:38.227
> 
> 标签：snmp

如果这是一个微不足道的问题，请原谅我的无知。我正在编写一些代码来支持通过 SNMPv3 进行通信；我们的应用程序目前仅支持 SNMPv2c。

除非我匹配社区字符串，否则使用 SNMPv3 通信时的响应对象是空白的。我的印象是社区字符串是“SNMPv2/1 事物”，而“新方法”是使用用户名/真实协议/隐私协议。

维基百科指出：

> 尽管 SNMPv3 除了增加加密安全性之外没有对协议进行任何更改，但由于新的文本约定、概念和术语，它看起来有很大不同。 [1]

这个声明让我相信我确实也需要提供社区字符串。

我只是想确认这一点，因为我很难判断我是因为满足 SNMPv2 要求还是因为我成功满足了所有 SNMPv3 要求而正在取回数据。

我正在使用 Dart 的 SNMP 库与其他设备进行通信，并且我已经指定我的请求应该使用 SNMP 版本 3——但是当给定有效的 SNMP 社区时，它可能会退回到幕后的 SNMPv2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:38:48.663

不，你没有。内部数据包结构更改为许多新概念，如上面的引用试图表明的那样。上面所说的协议方面与PDU操作等有关。IE，从技术上讲，SNMP有3个版本：

```
version 1:  community string based authentication with SMNPv1 PDUs
version 2c: community string based authentication with SNMPv2 PDUs
            (the SNMPv2 PDUs add GETBULK, INFORM, and REPORT PDUs)
version 3:  modular security with SNMPv2 PDUs 
```

IE，版本 3 没有涉及实际操作的工作方式（它仍然使用版本 2 中的 PDU 类型），而只是在它们周围添加了其他标头内容（例如更好和更模块化的安全性；实际上我们现在有 3 种不同的安全性此时要选择的类型：USM、SSH 和 (D)TLS)。

# wcf - WCF Rest 奇怪的路由行为

> ID：10422764
> 
> 赞同：0
> 
> 时间：2012-05-02T22:44:49.840
> 
> 标签：wcf, rest, routing

我在 [http://localhost/resource有一个可用的资源](http://localhost/resource)

我没有像 http://localhost/resource?name=john 这样的路由

但是当我尝试点击上面的 URI 时，我得到了[http://localhost/resource](http://localhost/resource)的结果。我期待一个404。

知道为什么它忽略 ?name=john 并匹配 url 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T00:23:58.333

查询字符串参数是可选的，而不是地址的“正式”部分 - 它从方案到路径（通过主机和端口）。在很多情况下，您在地址[http://something.com/path](http://something.com/path)处进行一项操作，并*在操作代码中*查看查询字符串参数以做出决定。例如，下面的代码在查询字符串中查找可能会或可能不会传递的“格式”参数，并且所有请求（有或没有它）都正确路由到操作。

```
public class StackOverflow_10422764
{
    [DataContract(Name = "Person", Namespace = "")]
    public class Person
    {
        [DataMember]
        public string Name { get; set; }
        [DataMember]
        public int Age { get; set; }
    }
    [ServiceContract]
    public class Service
    {
        [WebGet(UriTemplate = "/NoQueryParams")]
        public Person GetPerson()
        {
            string format = WebOperationContext.Current.IncomingRequest.UriTemplateMatch.QueryParameters["format"];
            if (format == "xml")
            {
                WebOperationContext.Current.OutgoingResponse.Format = WebMessageFormat.Xml;
            }
            else if (format == "json")
            {
                WebOperationContext.Current.OutgoingResponse.Format = WebMessageFormat.Json;
            }

            return new Person { Name = "Scooby Doo", Age = 10 };
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        WebServiceHost host = new WebServiceHost(typeof(Service), new Uri(baseAddress));
        host.Open();
        Console.WriteLine("Host opened");

        WebClient c = new WebClient();
        Console.WriteLine(c.DownloadString(baseAddress + "/NoQueryParams"));

        c = new WebClient();
        Console.WriteLine(c.DownloadString(baseAddress + "/NoQueryParams?format=json"));

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

**评论后更新**：如果你想强制请求包含模板中指定的参数，那么你可以使用类似消息检查器的东西来验证它。

```
public class StackOverflow_10422764
{
    [DataContract(Name = "Person", Namespace = "")]
    public class Person
    {
        [DataMember]
        public string Name { get; set; }
        [DataMember]
        public int Age { get; set; }
    }
    [ServiceContract]
    public class Service
    {
        [WebGet(UriTemplate = "/NoQueryParams")]
        public Person GetPerson()
        {
            string format = WebOperationContext.Current.IncomingRequest.UriTemplateMatch.QueryParameters["format"];
            if (format == "xml")
            {
                WebOperationContext.Current.OutgoingResponse.Format = WebMessageFormat.Xml;
            }
            else if (format == "json")
            {
                WebOperationContext.Current.OutgoingResponse.Format = WebMessageFormat.Json;
            }

            return new Person { Name = "Scooby Doo", Age = 10 };
        }

        [WebGet(UriTemplate = "/TwoQueryParam?x={x}&y={y}")]
        public int Add(int x, int y)
        {
            return x + y;
        }
    }
    public class MyForceQueryMatchBehavior : IEndpointBehavior, IDispatchMessageInspector
    {
        #region IEndpointBehavior Members

        public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
        {
        }

        public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
        {
        }

        public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
        {
            endpointDispatcher.DispatchRuntime.MessageInspectors.Add(this);
        }

        public void Validate(ServiceEndpoint endpoint)
        {
        }

        #endregion

        #region IDispatchMessageInspector Members

        public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
        {
            UriTemplateMatch uriTemplateMatch = (UriTemplateMatch)request.Properties["UriTemplateMatchResults"];

            // TODO: may need to deal with the case of implicit UriTemplates, or if you want to allow for some query parameters to be ommitted

            List<string> uriTemplateQueryVariables = uriTemplateMatch.Template.QueryValueVariableNames.Select(x => x.ToLowerInvariant()).ToList();
            List<string> requestQueryVariables = uriTemplateMatch.QueryParameters.Keys.OfType<string>().Select(x => x.ToLowerInvariant()).ToList();
            if (uriTemplateQueryVariables.Count != requestQueryVariables.Count || uriTemplateQueryVariables.Except(requestQueryVariables).Count() > 0)
            {
                throw new WebFaultException(HttpStatusCode.NotFound);
            }

            return null;
        }

        public void BeforeSendReply(ref Message reply, object correlationState)
        {
        }

        #endregion
    }
    static void SendRequest(string uri)
    {
        Console.WriteLine("Request to {0}", uri);
        WebClient c = new WebClient();
        try
        {
            Console.WriteLine("  {0}", c.DownloadString(uri));
        }
        catch (WebException e)
        {
            HttpWebResponse resp = e.Response as HttpWebResponse;
            Console.WriteLine("  ERROR => {0}", resp.StatusCode);
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        ServiceEndpoint endpoint = host.AddServiceEndpoint(typeof(Service), new WebHttpBinding(), "");
        endpoint.Behaviors.Add(new WebHttpBehavior());
        endpoint.Behaviors.Add(new MyForceQueryMatchBehavior());
        host.Open();
        Console.WriteLine("Host opened");

        SendRequest(baseAddress + "/NoQueryParams");
        SendRequest(baseAddress + "/NoQueryParams?format=json");
        SendRequest(baseAddress + "/TwoQueryParam?x=7&y=9&z=other");
        SendRequest(baseAddress + "/TwoQueryParam?x=7&y=9");

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# git - 无限期地保持 Git Reflog？

> ID：10422768
> 
> 赞同：14
> 
> 时间：2012-05-02T22:45:04.353
> 
> 标签：git, version-control, git-reflog

我倾向于对我的数据有点偏执，包括恢复它的能力。

Git reflog 数据在 30 天后被修剪。有没有办法设置它，以便无限期地维护和保留 reflog 数据？

这样做有什么主要的优势或劣势（除了空间或速度方面的考虑）吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T22:54:10.387

警告：引用日志是本地的，不会通过推/拉操作发送/接收。

缺点：reflogs 可能会导致（否则）无法访问的快照（以及随之而来的 blob）被保留，使你的 repo 增长到比可能需要的更大的大小。寻找`gc.reflogexpireunreachable`可能在这方面有所帮助的东西。

两个配置设置管理 reflog 条目的过期：

> `gc.reflogexpire`,`gc.<pattern>.reflogexpire`
> 
> > git reflog expire 删除比这个时间更早的 reflog 条目；默认为 90 天。在中间使用“<pattern>”（例如“refs/stash”）时，该设置仅适用于与 .
> 
> `gc.reflogexpireunreachable`,`gc.<ref>.reflogexpireunreachable`
> 
> > git reflog expire 删除比此时间更早的 reflog 条目，并且无法从当前提示访问；默认为 30 天。中间有“<pattern>”（例如“refs/stash”），该设置仅适用于匹配<pattern> 的引用。

# c++ - CMFCEditBrowseCtrl 未在 Visual Studio 2010 中定义，即使此类对象由 ClassWizard 自动创建

> ID：10422770
> 
> 赞同：0
> 
> 时间：2012-05-02T22:45:10.387
> 
> 标签：c++, visual-studio-2010, mfc

我正在 Visual Studio 2010 中创建一个对话框应用程序。我`EditBrowse`在对话框编辑器的工具箱中添加了一个 MFC 控件。然后我右键单击并“添加变量”，接受 ClassWizard 的默认值。

ClassWizard 自动创建我的 Dialog 类的新成员，类型为`CMFCEditBrowseCtrl`. 此外，此类已正确添加到`DoDataExchange()`函数中，并且似乎设置正确。

但是，编译器抱怨这`CMFCEditBrowseCtrl`是未定义的。

以下头文件已自动包含在内：

```
#include "afxcmn.h" 
```

我应该添加另一个`#include`，还是这里有更深层次的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:48:34.540

[根据文档](http://msdn.microsoft.com/en-us/library/bb983421.aspx)，它在`afxeditbrowsectrl.h`.

# networking - 保护 Web 服务器，但允许开发人员访问

> ID：10422779
> 
> 赞同：0
> 
> 时间：2012-05-02T22:46:13.527
> 
> 标签：networking, webserver, dmz

我们在 DMZ 中有一个 Web 服务器，它可以访问 Internet（当然）和 RDP 通过内部防火墙访问我们的内部网络。我们的 Web 开发人员（使用包括 Visual Studio 在内的许多不同工具）需要能够将内容更改和新项目“发布”到 Web 服务器上的特定文件夹。此功能需要将驱动器映射到您要发布到的服务器。

问题是，我们的网络团队拒绝在内部开放 NTFS 对服务器的访问。我有点同意他们的观点——没有办法通过端口号来限制 NTFS 访问。它根本不作为我所知道的选项存在。

所以我们的问题变成了——其他公司必须有这种需要来保护从内部网络进出 Web 服务器的流量。如何在不完全打开 Web 服务器的情况下允许映射驱动器到 DMZ 中的 Web 服务器？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:16:55.273

[CIFS](http://en.wikipedia.org/wiki/CIFS)通常在以下几个端口之一上运行：TCP 445、137、139；UDP 137, 138。您的防火墙团队应该能够为这些特定的端口戳洞到应该有权更新实时网络服务器的特定内部主机。

如果它是一个“真正的”DMZ，在主机两侧都有单独的防火墙，那么修改防火墙和 Web 服务器的主机防火墙以允许访问应该很容易。如果 DMZ 被单个防火墙“伪造”了一点，仍然可以允许仅来自防火墙和服务器主机防火墙上的内部主机的访问，但我可以理解对单个防火墙如此信任的沉默.

# c++ - 我在这个布隆过滤器实现中做错了什么？

> ID：10422783
> 
> 赞同：3
> 
> 时间：2012-05-02T22:47:21.217
> 
> 标签：c++, c, hash, bitarray, bloom-filter

我有一个分段布隆过滤器的位表。在这里，每一列都由一个哈希函数管理。

```
unsigned char bit_table_[ROWS][COLUMNS];//bit_table now have 8*ROWS*COLUMNS bits
unsigned char bit_mask[bits_per_char] = { 0x01,0x02,0x04,0x08,
                                          0x10,0x20,0x40,0x80}; 
```

有**ROWS**个散列函数，每个散列函数处理**COLUMNS*8**位的设置和检查。

元素被散列并且**bit_index**和**bit**被计算为

```
compute_indices(unsigned int hash)
{
   bit_index=hash%COLUMNS;
   bit=bit_index%8;
} 
```

现在插入完成为

```
for (std::size_t i = 0; i < ROWS; ++i)
      {
        hash=compute_hash(i,set_element);
        compute_indices(hash);
        bit_table_[i][bit_index ] |= bit_mask[bit]; 
      } 
```

查询是

```
for (std::size_t i = 0; i < ROWS; ++i)
      {
     hash=compute_hash(i,set_element);
      compute_indices(hash);

      if (((bit_table_[i][bit_index])& bit_mask[bit]) != bit_mask[bit])
         {
            return false;
         }      
  } 
```

我的问题是布隆过滤器很快就满了，我怀疑我没有正确使用字符的各个位。例如，我想我应该有类似的东西：

**bit_table_[i][bit_index][bit]|=bit_mask[bit];**

对于插入，但是，由于**bit_table**被声明为二维数组，我不允许这样做。

我应该怎么做才能使用 char 数组的各个位？

英语是我的第二语言，所以你可能无法理解我的问题。如果需要，我很乐意进一步解释我的观点。

编辑： **compute_hash(i,set_elemnt)**使用预定义的盐值来计算要插入或查询的元素的哈希值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:34:31.613

您的 compute_indices 方法中存在错误。

您正在计算列索引，然后在此列索引上应用模 8。最后，您将始终在列中使用相同的位。例如，对于第 10 列，您将始终使用第 2 位。

你应该有 ：

```
compute_indices(unsigned int hash)
{
    int bitIndex = hash % (COLUMNS * 8);
    bit_index= bitIndex / 8;
    bit = bitIndex % 8;
} 
```

# android - 仅从 Twitter 捕获共享？

> ID：10422784
> 
> 赞同：0
> 
> 时间：2012-05-02T22:47:36.710
> 
> 标签：android, twitter, android-intent

此清单的代码将允许我的活动捕获任何应用程序共享的任何文本数据：

```
<intent-filter
    android:label="my_label">
    <action android:name="android.intent.action.SEND" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="text/plain" />
</intent-filter> 
```

我希望我的活动仅捕获来自 Twitter 官方应用程序的份额。我希望它只出现在 Twitter 应用程序的共享列表中。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:10:28.807

一般来说，没有办法`<intent-filter>`说“不，我只想使用 XYZ 应用程序”。您可以用于此类事情的唯一事情是：

*   自定义权限，Twitter 必须使用`<uses-permission>`您的自定义权限元素修改他们的应用程序

*   自定义权限，设置为`android:protectionLevel="signature"`，这将要求 Twitter 使用您的签名密钥签署他们的应用程序

*   自定义类别，或对其`ACTION_SEND` `Intent`.

这些似乎都不太可能。

# python - 我正在尝试在我的 python 游戏的右上角添加一个倒数计时器

> ID：10422788
> 
> 赞同：1
> 
> 时间：2012-05-02T22:48:11.747
> 
> 标签：python, timer, pygame, countdown

我不想导入 pygame 以外的任何东西...>>我的游戏是 50 fps 我的屏幕是 640x480

我正在尝试在屏幕的右上角添加一个计时器。计时器需要从 10 开始倒计时......我已经尝试了很多东西，但无法让它工作。到目前为止，这就是我所拥有的：

```
class Timer(games.Sprite):
    """ countdown timer """
    def __init__(self):
       timer_message = games.Text(
       value = 10,
       size = 50,
       color = color.black,
       x = games.screen.width - 30,
       y = games.screen.height - 420)
    timer_delay = 50 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:33:50.293

我没有看到任何实际导致计时器倒计时的代码。在不了解其余代码的情况下，我建议使用

```
class Timer(games.Sprite):
    def __init__(self):
        ....
        self.start()

    def start(self):
        while self.timer_message.value != 0:
            time.sleep(1)
            self.timer_message.value -= 1 
```

并且不要为分配 timer_delay 烦恼。

# php - 将文件中的数字除以数组列

> ID：10422790
> 
> 赞同：0
> 
> 时间：2012-05-02T22:48:18.377
> 
> 标签：php

**[这个问题和我之前的问题](https://stackoverflow.com/questions/10420829/read-through-a-file-and-add-numbers-to-array-parts)类似，但我表述错了。我很抱歉; 这是实际的问题。**

我有一个文件，其中有数千个数字。让我们使用这个来简化：

```
4
7
1
9
3
3
8
6
2
6
5
1 
```

我需要的是输出具有可变数量矩阵行的矩阵（以数组的形式）。文件中的数字必须按行划分，第一个数字到第一行，第二个数字到第二行，依此类推。或者，如果你愿意，第一个数字，之后每隔四个数字，去到第 1 列。第二个数字，之后每隔四个数字，到第 2 列，依此类推。在下面的示例中，行数为 3：

```
array (
  [0] => 4,9,8,6
  [1] => 7,3,6,5
  [2] => 1,3,2,1
) 
```

在此示例中，行数为 4：

```
array (
  [0] => 4,3,2
  [1] => 7,3,6
  [2] => 1,8,5
  [3] => 9,6,1
) 
```

行数是可变的。

目前，在[Oscar Jara](https://stackoverflow.com/users/1178686/oscar-jara)的帮助下，我现在有了这个：

```
$path = "data.csv";
$array = explode("\n", file_get_contents($path));
$numbers = array();
foreach(array_chunk($array, 3) as $number){
  $numbers[] = implode(",", $number);
} 
```

但这会通过行而不是列输出文件中的数字：

```
array (
  [0] => 4,7,1
  [1] => 9,3,3
  [2] => 8,6,2
  [3] => 6,5,1
) 
```

将此代码转换为列时我感到困惑。如果你不这样做，那么任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:53:10.680

试试这个：

```
$path = "data.csv";
$data = file($path);
$numbers = Array();
$rowcount = 4;
foreach($data as $i=>$n) {
    $numbers[$i % $rowcount][] = $n;
}
// OPTIONAL: Join rows together into comma-separated string
$numbers = array_map(function($a) {return implode(",",$a);},$numbers); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T23:26:03.963

```
$verticallyChunked = array();
$numColumns = 4;
$i = 0;
// optionally pad the array to next largest multiple of the chunksize
// important if you output an html table and like valid well formed html
$totalRows = ceil(count($array) / $numColumns);
$array = array_pad($array, $totalRows * $numColumns, '');

foreach ($array as $val) {
    $verticallyChunked[$i++ % $numColumns][] = $val;
} 
```

# django - 将经过身份验证的用户作为字段的 Django 表单验证

> ID：10422791
> 
> 赞同：5
> 
> 时间：2012-05-02T22:48:19.907
> 
> 标签：django, forms, validation, authentication, modelform

模型：

```
class ProjectType(models.Model):
    project_type_id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=45, help_text='Type of project', verbose_name='Project Type')
    slug = models.SlugField(max_length=45, blank=True)
    description = models.CharField(max_length=400, help_text='Description of the main  purpose of the project', verbose_name='Project Type Description')
    default = models.BooleanField(default=False)
    owner = models.ForeignKey(User)
class Meta:
    ...
    unique_together = (('slug', 'owner'),('name', 'owner')) 
```

我需要一个表单来创建/更新 ProjectType。请注意*所有者*字段 - 它应该是当前登录用户。问题是如何确保**unique_together**中的约束得到正确验证。

我不想在表单上显示*所有者*字段 - 它是当前用户，所以它应该由系统自动设置。但是无论我如何尝试这样做，验证都不起作用，或者还有其他错误。

在我尝试过的方法中（单独或组合）：

*   在相关的 ModelField 中创建隐藏字段
*   在 ProjectTypeForm 中定义*init*（以各种方式），例如：

    ```
    def __init__(self, *args, **kwargs):
        self.user = kwargs.pop('user', None)
        super(ProjectTypeForm, self).__init__(*args, **kwargs)
        self.fields['owner'].initial = self.user 
    ```

*   在视图中设置值，例如：

    ```
    ...
    if request.method == 'POST':
        project_type = ProjectType(owner=request.user)
        form = ProjectTypeForm(request.POST, instance=project_type, user = request.user.pk) # also tries w/o pk
    ... 
    ```

*   以各种方式覆盖表单的 clean() 方法，如下所示：

    ```
    def clean(self):
        cleaned_data = super(ProjectTypeForm, self).clean()
        slug=cleaned_data.get('slug')
        owner = cleaned_data.get('owner')

        if slug:
            user = User.objects.get(pk=owner)
            ... 
    ```

其中许多方法都基于在 stackoverflow.com 上找到的各种答案。但是，无论我尝试什么，我都找不到完成我需要的方法：（1）所有者字段的自动设置和（2）唯一性验证：所有者/type_name 和 owner/type_slug。我遇到的典型错误是（a）*所有者*未被识别为用户（它被视为 PK），（b）不正确的验证（如缺少它或它错过了它是正在编辑的同一记录等事实） , (c) 所有者是必填字段。

作为记录 - 如果*所有者*是表单中的常规字段，则一切都按预期工作，但我不能允许用户设置*所有者*值。

有什么，希望优雅的解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T23:37:17.103

从表单中排除所有者字段，并将用户保存在表单的 init 方法中 - 然后您可以使用它来验证表单，例如

```
class ProjectTypeForm(...):
    ...
    def __init__(self, user, *args, **kwargs):
        super(ProjectTypeForm, self).__init__(*args, **kwargs)
        self.user = user

    def clean(self):
        user_projects = ProjectType.objects.filter(owner=self.user)
        if user_projects.filter(slug=self.cleaned_data['slug']):
            raise forms.ValidationError('...')
        elif user_projects.filter(name=self.cleaned_data['name']):
            raise forms.ValidationError('...')
        else:
            return self.cleaned_data 
```

然后在您看来，在创建新的 ProjectType 时执行以下操作：

```
if request.method == 'POST':
    form = ProjectTypeForm(request.user, request.POST)
    if form.is_valid():
        ptype = form.save(commit=False)
        ptype.owner = request.user
        ptype.save() 
```

你不应该需要它来保存现有的 ProjectType 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:37:45.263

正如我在评论中提到的，一种可能的解决方案本质上是与 Django 表单一起使用并使用表单上的*所有者*字段。所以，我所做的就是以这种方式修改**init ：**

```
def __init__(self, user, *args, **kwargs):
    super(ProjectTypeForm, self).__init__(*args, **kwargs)
    self.fields['owner'] = forms.ModelChoiceField(
        label='Owner*',
        queryset=User.objects.filter(username=user.username),
        help_text="Project types are unique to logged-in users who are set as their owners.",
        required=True,
        empty_label=None) 
```

基本上，它仍在使用 ChoiceField，但将其设置为一个选项 - 当前用户。此外，empty_label=None 确保没有“空”选项。效果是（因为用户名是唯一的）当前用户名显示可见，并且是其他下拉列表中的唯一选择，具有更多选择。

在我看来，我遵循这种方法：

```
...
if request.method == 'POST':
    project_type = ProjectType()
    form = ProjectTypeForm(request.user,request.POST, instance=project_type,)
    if form.is_valid():
        project_type.save()

        return HttpResponseRedirect(reverse('project_types'))
else:
    form = ProjectTypeForm(request.user)
... 
```

基本上，就是这样 - 验证唯一约束（和整个事情）就像一个魅力。

我喜欢这个解决方案吗？不，我认为它是一种 hack（具有讽刺意味的是，即使它与标准 Django 方法一起使用）。但它需要一些完全不必要的东西。这种方法的一个好处是它可以清楚地向当前用户传达她/他被设置为项目类型所有者的信息。但即使考虑到这一点，我宁愿显示一条消息（而不是一个字段），*当前用户 X 将被设置为正在创建的项目类型的所有者*。**所以，如果有人有更好的解决方案，请提交它以说明 Django 的全部功能和灵活性。**

# mysql - MySQL 根据 int_id 查询值的总和

> ID：10422796
> 
> 赞同：0
> 
> 时间：2012-05-02T22:48:38.333
> 
> 标签：mysql

这是我的桌子的一个例子。

```
int_id    ranking    prize
1         1          120
1         2          60
1         3          30
2         1          40
2         2          25
3         1          500 
```

我试图弄清楚如何将这张表计算出每个事件的奖金并列出 int_id 和总金额。所以它看起来像这样

```
int_id    total_money
1         210
2         65
3         500 
```

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:51:41.173

对于这样的事情，您需要使用聚合函数 SUM，按 int_id 分组：

```
SELECT int_id, sum(prize) as total_money
from tablename
GROUP BY int_id 
```

# c# - 您如何在 IEnumerable 的子列表成员上使用（或可以使用）Linq Intersect 方法？

> ID：10422802
> 
> 赞同：0
> 
> 时间：2012-05-02T22:49:45.097
> 
> 标签：c#, linq, c#-3.0

我正在做以下...

```
//first I have a list of sports...
List<string> sports = new List<string> {"football","basketball"}

//then I have a list of partners who are offering that sport
List<Partner> = Partner.GetAvailablePartners();

//Partner is a type that has a List<string> Sports members. 
```

现在我想做的是过滤我的合作伙伴列表，以便只有提供包含在其中的运动的合作伙伴，`sports`但我不知道如何。

我认为可以像这样使用 Intersection 扩展方法...

```
var filteredPartners = (List<Partner>) (from p in partners where p.Sports.Intersect(sports).Count()>0 select p); 
```

但我猜它不起作用，因为我在成员列表而不是根列表上行事。

这可以通过 intersect （或其他一些 linq ）方法来完成吗？

赛斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:58:33.180

如果您确实需要 List 中的结果，请在 LINQ 语句的末尾调用 ToList() 。否则，您应该能够：

```
IEnumerable<Partner> partners = partners.Where(p => p.Sports.Intersect(sports).Count() == sports.Count); 
```

...或在结果列表中：

```
List<Partner> partners = partners.Where(p => p.Sports.Intersect(sports).Count() == sports.Count).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:51:38.473

`.Where()`和所有其他 lINQ 方法返回一个`IEnumerable<T>`惰性迭代，而不是`List<T>`.
您不能将它们投射到`List<T>`.

如果你想要一个`List<T>`，打电话`ToList()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T22:55:24.277

使用相交。

使用两个 IEnumerable 的示例

```
var ids = original.Select(x => x.ID).Intersect(yourEnumerable); 
```

# c# - 拖放到 WebBrowser

> ID：10422803
> 
> 赞同：1
> 
> 时间：2012-05-02T22:50:01.290
> 
> 标签：c#, .net, drag-and-drop, webbrowser-control

我正在使用 .Net 4.0，并且`TreeView`我想从中将项目拖入嵌入式`WebBrowser`控件，但`WebBrowser`不支持 和 之类`DragEnter`的事件`DragDrop`。

我试图监听 mouseup 事件，`WebBrowser.Document`但是当您将鼠标移到 webbrowser 控件上时，当鼠标已经按下时，它似乎不会触发。

我试图用它`Microsoft.Win32.Hooks`来捕捉 mouseup 事件，`MainForm`但它似乎不稳定并且光标正在变为“no drop”。

我现在正在考虑是否有可能实现我自己的控件，`WebBrowser`该控件将支持拖放功能，但很难找到任何可行的示例。

实现这种功能的最佳方式是什么？

**注意：** 我能够通过在 TreeView 上使用 ItemDrag 事件处理程序来实现它，而无需执行 DoDragDrop，然后在 WebBrowser.Document 元素上使用 Microsoft.Win32.MouseHooks 和 MouseMove 事件跟踪 MouseUp 事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T02:37:59.713

您`dragdrop`可以`mouseup`从`Document`. （通过调用`webBrowser.Document.Body.AttachEventHandler`）

# ruby-on-rails - 为什么这种导轨形式找不到正确的路径？

> ID：10422804
> 
> 赞同：0
> 
> 时间：2012-05-02T22:50:02.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3, error-handling

所以我一直把头撞在墙上，试图弄清楚为什么这不起作用。我不断得到

```
ActionView::Template::Error:
   undefined method `admin_information_index_path' for #<#<Class:0x007fc67971cab8>:0x007fc67d775740> 
```

随着跟踪：

```
 # ./app/views/admin/informations/_form.html.erb:1:in `_app_views_admin_informations__form_html_erb__2815737811953353352_70245242566200'
 # ./app/views/admin/informations/new.html.erb:2:in `_app_views_admin_informations_new_html_erb___3700624853666844924_70245242606040' 
```

任何正确方向的提示？

* * *

我的路线：

```
namespace :admin do
  resources :informations
end 
```

我的控制器：

```
class Admin::InformationsController < Admin::AdminController
  def new
    @information = Information.new
  end
end 
```

意见/管理/信息/new.html.erb：

```
<h1>Add New Information Page</h1>
<%= render :partial => 'form', locals: { information: @information } %> 
```

意见/管理/信息/_form.html.erb：

```
<%= form_for [:admin, information] do |f| %>
    <%= error_messages_for information %>

    <%= f.label :title %><br>
    <%= f.text_field :title %><br><br>

    <%= f.label :content %><br>
    <%= f.text_area :content %><br><br>

    <%= f.submit "Submit" %>
<% end %> 
```

* * *

的输出`rake routes`

```
 admin_informations GET    /admin/informations(.:format)           admin/informations#index
                       POST   /admin/informations(.:format)           admin/informations#create
 new_admin_information GET    /admin/informations/new(.:format)       admin/informations#new
edit_admin_information GET    /admin/informations/:id/edit(.:format)  admin/informations#edit
     admin_information GET    /admin/informations/:id(.:format)       admin/informations#show
                       PUT    /admin/informations/:id(.:format)       admin/informations#update
                       DELETE /admin/informations/:id(.:format)       admin/informations#destroy
            admin_root        /admin(.:format)                        admin/sessions#new 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:18:11.773

试一试

```
<%= form_for information ,:namespace=>'admin' do |f| %> 
```

更新：

查看您的路线“信息”复数形式，但您使用单数形式“信息”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T09:57:44.157

您必须使用正确形式的控制器，因为：

'information'.pluralize
是
“信息”，而不是信息。

因此，重命名控制器并查看文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T01:19:53.113

我不确定这是否可行……只是猜测。

`form_for @admin.information`或类似的规定。

# objective-c - 游戏中心调用排行榜功能没有响应？

> ID：10422805
> 
> 赞同：0
> 
> 时间：2012-05-02T22:50:04.803
> 
> 标签：objective-c, ios, xcode, game-center

我这样称呼排行榜：

```
-(void)viewscores:(SPEvent*)event
{  

    GKLeaderboardViewController *leaderboardController = [[GKLeaderboardViewController alloc] init];      
    if (leaderboardController != nil) {  
        leaderboardController.leaderboardDelegate = self;  

        UIWindow* window = [UIApplication sharedApplication].keyWindow;  
        [window addSubview: self.rootViewController];  
        [self presentModalViewController: leaderboardController animated: YES];  

    }     
} 
```

当我单击排行榜按钮时，我收到一个错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[UIViewController presentModalViewController:animated:]: unrecognized selector sent to class 0x3e2fc7f8' 
```

这是正常的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:58:37.837

您可能应该在 viewController 中调用该函数。在我的一个应用程序中，代码如下所示：

```
-(IBAction)showLeaderBoard {

    GKLeaderboardViewController *leaderBoardCont = [[GKLeaderboardViewController alloc] init];
    if (leaderBoardCont) {
        leaderBoardCont.category=@"1S";
        leaderBoardCont.timeScope=GKLeaderboardTimeScopeWeek;
        leaderBoardCont.leaderboardDelegate=self;
        [self presentModalViewController:leaderBoardCont animated:YES];
    } 
```

}

然后你还应该实现委托方法：

```
-(void) leaderboardViewControllerDidFinish:(GKLeaderboardViewController *)viewController {

    [self dismissModalViewControllerAnimated:YES];
    viewController = nil;
} 
```

这里 1S 是您在 iTunes Connect 中创建的排行榜的标识符。希望这可以帮助。

**编辑**：由于您仍然遇到问题，请查看这些教程。它们涵盖了有关排行榜和成就的所有内容。

[第一部分](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-game-center-achievements-and-leaderboards-part-1/)

[第二部分](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-game-center-achievements-and-leaderboards-part-2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-11T15:53:51.360

您将`presentModalViewController`消息发送到无法识别的对象。因此，您在“Game.m”文件中编写的类不会继承自`UIViewController`. 不知道您使用的是什么框架，但您必须初始化一个`UIViewController`实例才能显示 GameCenter 视图。

# linux - 在 Linux 内核（内核空间）中检索会话 ID

> ID：10422806
> 
> 赞同：1
> 
> 时间：2012-05-02T22:50:24.180
> 
> 标签：linux, linux-kernel, kernel, sessionid

我想在 linux 内核（内核空间）中检索当前进程的 sessionid。我看到`task_struct`有一个字段`sessionid`，但仅在宏`CONFIG_AUDITSYSCALL`打开时才定义。所以我试图用这个宏构建内核，但我仍然没有得到结果。我也尝试从`CONFIG_AUDITSYSCALL`on函数中获取它的值，`audit_get_sessionid(current)`但得到的是 -1 或垃圾值（与 `getsid(0)`用户空间中的方法不同）。

在这一点上我很震惊。任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T23:01:19.683

您可以`getsid`在这里查看系统调用：[http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=kernel/sys.c#l1106](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=kernel/sys.c#l1106)

```
SYSCALL_DEFINE1(getsid, pid_t, pid)
{
     struct task_struct *p;
     struct pid *sid;
     int retval;

     rcu_read_lock();
     if (!pid)
             sid = task_session(current);
     else {
     ... 
```

这建议您可以使用内核函数 task_session() 来获取会话 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:02:49.243

pid_vnr(task_session(current)); 会做你想做的！

# python - 从python中的文件中读取单个字符？

> ID：10422817
> 
> 赞同：2
> 
> 时间：2012-05-02T22:51:50.700
> 
> 标签：python, file-io

我的问题是除了下面是否还有其他方法可以一次遍历一个字符的文件？

```
with open(filename) as f:
  while True:
    c = f.read(1)
    if not c:
      print "End of file"
      break
    print "Read a character:", c 
```

由于没有像 Java 那样检查是否有要读取的内容的功能，因此还有哪些其他方法。此外，在示例中，当变量 c 确实到达文件末尾时，它会是什么？感谢任何人的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T23:06:34.283

另一种选择是使用[`itertools.chain.from_iterable()`](http://docs.python.org/library/itertools.html#itertools.chain.from_iterable)：

```
import itertools

with open("test.txt") as f:
    for c in itertools.chain.from_iterable(f):
        print(c) 
```

`chain.from_iterable`生成一个可迭代对象，该可迭代对象从给定可迭代对象中的第一个可迭代对象返回元素，直到它用尽，然后继续下一个可迭代对象，直到所有可迭代对象都用完。通常这用于展平列表列表，但在这种情况下，它允许您忽略行。

这是否真的比嵌套循环更好是另一回事（它会快一点，但这不太重要），但值得一提。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T22:59:07.810

这是一种方式：

```
with open(filename) as f:
    for line in f:
        for c in line:
            pass 
```

或者这个呢？

```
with open(filename) as f:
    for c in f.read():
        pass 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T23:06:17.247

以下是文件对象的其他方法：

'close'、'fileno'、'flush'、'isatty'、'newlines'、'next'、'read'、'readinto'、'readline'、'readlines'、'seek'、'softspace'、'tell '、'截断'、'写入'、'writelines'、'xreadlines'

您可以在[文档](http://docs.python.org/library/stdtypes.html#file-objects)中阅读。

`c`如果没有更多要读取的内容，该变量将是一个空字符串。它评估为 False，因此测试`if not c`为 True。这表明您在文件的末尾。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T02:00:07.383

另一种方法是使用生成器：

```
def blocks(infile, bufsize=1024):
    while True:
        try:
            data=infile.read(bufsize)
            if data:
                yield data
            else:
                break
        except IOError as (errno, strerror):
            print "I/O error({0}): {1}".format(errno, strerror)
            break

f=open('somefile.txt','rb')

for c in blocks(f,1):
    print c 
```

使用生成器，整个文件不会保存在内存中，底层操作系统通常会对磁盘读取执行足够的缓冲。

作为生成器，它将像任何其他可迭代对象一样工作；当文件中没有更多字符要读取时，它将中断。

# java - 简单的 GUI 计算器应用程序 java

> ID：10422818
> 
> 赞同：2
> 
> 时间：2012-05-02T22:51:53.950
> 
> 标签：java, swing, user-interface, math, calculator

我是新手，遇到了问题。我使用包含 30 个 JTextField 的 netbeans 设计视图创建了一个 gui。然后将这些文本字段排列成 3 列，每列 10 个文本字段。所以这个想法是让用户能够在文本字段的 2 列中输入数字，然后将前 2 列的相应行相乘，结果将显示在文本字段的第三列中。到目前为止我有

```
 float a1 = Float.parseFloat(text1.getText()) //This 30 times one for each field

    float [] cola; 
    cola = newfloat[10] //I did this 3 times to create 3 columns

    cola[0] = a1 // I did this to place the variables in the columns
    cola[1] = a2 // cola and colb for retrieved from user and colc for results 
```

这继续创建3列......然后我将它们相乘在一起......

```
 result = (colla*colb);
    colc.setText(String.valueOf(result)); 
```

但这不起作用。我想要的结果是让我在“colc”中排列的 10 个文本字段成为 2 列文本字段的用户输入的产物。我想我在处理这个问题时都错了，或者只是缺少一行代码？任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T06:09:28.823

对于您在评论中提到的问题（为了清楚起见，我将在这里重复，因为评论中的代码不是很悦目）：

```
public static void main(String[] args) { 
  int arr[] = {9,9,9}; 
  int arr1[] = {9,9,9}; 
  int sum[] = {0,0,0}; 
  for (int i=0; i < arr.length; i++) 
    sum = arr[i] + arr1[i]; 
  System.out.println(sum); 
} 
```

这有一个编译错误，还有一件事你可能也不想要。

1.  `sum = arr[i] + arr1[i];`不会编译。如果您花一些时间考虑一下……在左侧，您有一个数组（长度为 3 的 int 数组），并且您尝试在右侧为此分配一个 int。你可能想要做的是`sum[i]=arr[i] + arr1[i];`，
2.  将`System.out.println(sum);`打印出乱码，因为数组的`toString`. 您可能想要使用的是[`Arrays#toString`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28int%5B%5D%29)方法

这是相当基本的数组操作，因此您可能想再次阅读 Java 数组教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T05:59:47.870

一次解决一个问题。从添加一列数字的工作[示例开始。](https://stackoverflow.com/a/8703807/230513)更改`N`为`2`, 并更改`GridLayout(0, 1)`为`GridLayout(1, 0)`; 现在你有一个可以添加的*行*面板。将其中的十个添加到`JPanel`with 中`GridLayout(0, 1)`。*瞧！*

查看[`GridLayout`](http://docs.oracle.com/javase/7/docs/api/java/awt/GridLayout.html)API 以获取详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:14:57.463

使用`GridLayout`而不是`Flowlayout`，这是默认设置。如果发生错误，请编辑您的问题以包含[SSCCE](http://sscce.org/)，我将根据我的知识提出建议。

# macos - 启用 Mac 应用程序以唤醒显示

> ID：10422819
> 
> 赞同：1
> 
> 时间：2012-05-02T22:52:06.250
> 
> 标签：macos

我有一个生成击键的应用程序。如果屏幕保护程序正在运行，击键将使显示屏进入正常操作模式，并且应用程序正常工作。但是，如果显示器处于睡眠模式，则击键不会唤醒显示器，并且应用程序无法正常运行。有什么办法可以让应用唤醒显示器吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T03:41:58.530

如果您的要求是防止睡眠，您可以使用 UpdateSystemActivity()。检查[技术问答 QA1160](http://developer.apple.com/library/mac/#qa/qa1160/_index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:56:24.020

我不确定这是否有效。 [技术问答 QA1340](https://developer.apple.com/library/mac/#qa/qa1340/_index.html)讨论了用于防止显示器进入睡眠状态的 API。断言显示器不应该休眠可能会唤醒处于休眠状态的显示器。

# matlab - 坐标变换，概念

> ID：10422820
> 
> 赞同：0
> 
> 时间：2012-05-02T22:52:07.130
> 
> 标签：matlab

我想将 x,y,z 坐标转换为极坐标。我在 y coordiantes 中得到 (-)。有人可以解释我为什么会得到它。这将是很大的帮助。

我正在从软件中读取这些值（xyz，az_elev_r）并且无法更改。我只是不确定角度的顺序（az & elev）。使用我的代码，我得到 -y 而不是 y。这意味着有 180 个旋转。我的代码是：

```
xyz=[-0.564 3.689 -0.735;
      2.011 5.067 -1.031;
     -1.181 3.943 -1.825; % Reference values
    ]; 
```

%% az_elev_r-->xyz

```
 az_elev_r=[ 261.30 -11.24 3.80;
               291.65 -10.692 5.548;
               253.34 -23.897 4.50]; % Also Reference (degree)

az_elev_r(:,1:2)=deg2rad(az_elev_r(:,1:2));

r=az_elev_r(:,3);
az=az_elev_r(:,1);
elev=az_elev_r(:,2);

x=r.*cos(az).*cos(elev)
y=r.*sin(az).*cos(elev)
z=r.*sin(elev) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T00:00:29.273

您的矩阵与您的参考`az_elev_r`不一致。`xyz`

```
>> [az, el, r] = cart2sph(xyz(:,1), xyz(:,2), xyz(:,3));
>> rad2deg(az)
ans =
          98.6924675475501
          68.3527736950233
          106.673911589314 
```

您的答案与函数返回的值一致`sph2cart`。（示例从您的原始输入开始，在`dec2rad`替换之前。

```
>> [x, y, z] = sph2cart(deg2rad(az_elev_r(:,1)), deg2rad(az_elev_r(:,2)), az_elev_r(:,3))
x =
         -0.563766229670505
          2.01131973806906
         -1.17951822049783
y =
         -3.68422880893852
         -5.06709019311118
         -3.94153436658676
z =
         -0.740692730942158
         -1.02931719412937
         -1.82292172199717 
```

顺便说一句，如果您只使用该函数并以弧度工作，您的代码将更具可读性`sph2cart`，除非您试图理解转换本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T21:01:53.667

OpenCV 具有转换为极坐标并返回的代码。这种转换对于通过相关查找对象旋转或以其他方式创建以对象为中心的“与旋转无关”的对象表示非常有用。可视化每个极坐标以及它们的联合图像很有用。下面的图像应该是自我解释的。极坐标图以角度为水平轴，半径为垂直轴，因此 4 个峰值对应于输入图像的 4 个角。附上代码（带有 OpenCV 的 C++）。 ![极坐标可视化](../Images/41bf21d74ddc6ac793baa468f3926e3e.png)

```
//================================
// Name        : PolarCoord.cpp
// Author      : V.Ivanchenko cudassimo@gmail.com
// Version     :
// Copyright   : Your copyright notice
// Description : Hello World in C++, Ansi-style
//======================================

#include <iostream>
#include "opencv.hpp"
using namespace std;
using namespace cv;

#define VALID(x, y, w, h) ((x)>=0 && (y)>=0 && (x)<(w) && (y)<(h)) // validates index

/*
 *   1\. Original binary image HxW CV_8U
 *              |
 *              |
 *              V
 *   2\. Two coordinate Mats HxW CV_32F
 *              |
 *              |
 *              V
 *   3\. Visualization CV_8U
 *      a. gray HxW for a single coordinate image
 *      b. binary Rx360 for two coordinate images
 */

// convert a binary 2D image into two Mats with float coordiantes
void imageToCoord(const Mat& img, Mat& X, Mat& Y, bool centered = true) {
    if (img.empty())
        return;

    int h = img.rows;
    int w = img.cols;
    X.create(h, w, CV_32F);
    Y.create(h, w, CV_32F);
    float Cx = w/2.0f;
    float Cy = h/2.0f;

    for (int i=0; i<h; ++i){
        const uchar* img_row = img.ptr<uchar>(i);
        float* x_row = X.ptr<float>(i);
        float* y_row = Y.ptr<float>(i);

        for (int j=0; j<w; ++j) {
            if (img_row[j]>0) {
                float x = j;
                float y = i;
                if (centered) {
                    x-=Cx;
                    y-=Cy;
                }
                x_row[j] = x;
                y_row[j] = y;
            }
        } // j
    } // i
} //imageToCoord()

// convert a single float ploar coord Mat to a gray image
void polarToImg(const Mat& PolarCoord, Mat& img) {
    if (PolarCoord.empty())
        return;

    int h = PolarCoord.rows;
    int w = PolarCoord.cols;
    img.create(h, w, CV_8U);
    float maxVal = std::numeric_limits<float>::min();

    // find maxVal
    for (int i=0; i<h; ++i){
        const float* x_row = PolarCoord.ptr<float>(i);
        for (int j=0; j<w; ++j) {
            if (maxVal < x_row[j])
                maxVal = x_row[j];
        } // j
    } // i

    // create an image
    if (maxVal>0) {
        float k = 255.0/maxVal;
        for (int i=0; i<h; ++i){
            uchar* img_row = img.ptr<uchar>(i);
            const float* x_row = PolarCoord.ptr<float>(i);
            for (int j=0; j<w; ++j) {
                img_row[j] = saturate_cast<uchar>(k*x_row[j]);
            }// j
        } // i
    } // if
} // plarToImg()

// convert two polar coord Mats to a binary image
void polarToImg(const Mat& radius, const Mat& angle, Mat& img) {
    if (angle.empty() || radius.empty())
        return;

    int h = angle.rows;
    int w = angle.cols;
    assert(radius.cols==w && radius.rows==h);
    const int imgH = sqrt(h*h+w*w)+0.5f; // radius
    const int imgW = 360;                 // angle, deg
    img.create(imgH, imgW, CV_8U);

    // create an image
    for (int i=0; i<h; ++i){
        const float* ang_row = angle.ptr<float>(i);
        const float* r_row = radius.ptr<float>(i);

        for (int j=0; j<w; ++j) {
            int x = ang_row[j] + 0.5f;
            int y = r_row[j] + 0.5f;

            if (x>0) {
                cout<<x<<endl;
            }
            if (VALID(x, y, imgW, imgH))
                img.at<uchar>(y, x) = 255;
            else {
                cout<<"Invalid x, y: "<<x<<", "<<y<<endl;
            }
        }// j
    } // i
} // plarToImg()

int main() {
    cout << "Cartesian to polar" << endl; // prints "Syntax training in openCV"
    const int W=400, H=400;
    Mat Minput(H, W, CV_8U);
    Minput(Rect(W/4, H/4, W/2, H/2)) = 255;
    Mat X, Y, Angle, Radius, Mr, Mang, Mpolar;

    // processing
    imageToCoord(Minput, X, Y);             // extract coordinates
    cartToPolar(X, Y, Radius, Angle, true);// convert coordiantes

    // visualize
    polarToImg(Radius, Mr);
    polarToImg(Angle, Mang);
    polarToImg(Radius, Angle, Mpolar);

    // debug
    //cout<<Mpolar<<endl;

    namedWindow("input", 0);
    namedWindow("angle", 0);
    namedWindow("radius", 0);
    namedWindow("Polar", 0);

    const int winw=200, winh=200;
    resizeWindow("input", winw, winh);
    resizeWindow("angle", winw, winh);
    resizeWindow("radius", winw, winh);
    resizeWindow("Polar", 360, (int)sqrt(H*H + W*W));

    moveWindow("input", 0, 0);
    moveWindow("angle", winw, 0);
    moveWindow("radius", 2*winw, 0);
    moveWindow("Polar", 3*winw, 0);

    imshow("input", Minput);
    imshow("angle", Mang);
    imshow("radius", Mr);
    imshow("Polar", Mpolar);
    waitKey(-1);

    return 0;
} 
```

# python - “包含”Django URL 模式时，“函数”对象不可下标？

> ID：10422822
> 
> 赞同：1
> 
> 时间：2012-05-02T22:52:08.970
> 
> 标签：python, django, typeerror

我正在制作一个 Django 网站，根据我在[http://youtube.com](http://youtube.com)上观看的教程，我遇到了问题。这是我的 urls.py 脚本：

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
# admin.autodiscover()

urlpatterns = patterns('',
    (r'^', include['FirstBlog.apps.homepage.urls']),
    # Examples:
    # url(r'^$', 'FirstBlog.views.home', name='home'),
    # url(r'^FirstBlog/', include('FirstBlog.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    # url(r'^admin/', include(admin.site.urls)),
) 
```

我的输出：

```
TypeError at /
'function' object is not subscriptable
Request Method: GET
Request URL:    http://127.0.0.1:8000/
Django Version: 1.4
Exception Type: TypeError
Exception Value:    
'function' object is not subscriptable
Exception Location: /Users/thor/Sites/FirstBlog/FirstBlog/urls.py in <module>, line 8
Python Executable:  /usr/bin/python
Python Version: 2.7.1
Python Path:    
['/Users/thor/Sites/FirstBlog',
 '/Library/Python/2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC',
 '/Library/Python/2.7/site-packages']
Server time:    Wed, 2 May 2012 17:42:04 -0500 
```

请帮忙？

另外，如果你有一个很好的教程我可以学习，请给我链接！此外，我更愿意将 Mamp Pro 用于数据库。帮助n00b？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T22:57:24.847

`include`是一个函数；您正在下标它，就好像它是一个列表一样。

例如：

```
apples = [ 'Granny Smith', 'Russet' ]
red_apple = apples[1]    # <-- Subscripting a list 
```

由于函数不能下标，因此您会收到您发布的错误。但是，从注释示例中可以看出，您应该使用以下语法*调用*该函数：`()`

```
(r'^', include('FirstBlog.apps.homepage.urls'))
#             ^                              ^ 
```

# javascript - 当我的脚本开头有多个 Jquery 选择器时，如何优化页面的负载？

> ID：10422826
> 
> 赞同：-1
> 
> 时间：2012-05-02T22:52:28.097
> 
> 标签：javascript, jquery, optimization

我的 javascript 开头有几个 jquery 选择器。

```
jQuery('.enter').show();
jQuery('.btnsecond').show();
jQuery('#id div.my-class').hide();
jQuery('.classes p:last').hide(); 
```

此 jquery 代码在页面的任何重新加载时运行...

我认为这是一个选择正确 DOM 的过程，哪种解决方案可以简化或优化这个加载过程？也许使用 Css 以不同的方式定位 dom。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:56:27.423

```
jQuery('.enter, .btnsecond').show();
jQuery('#id div.my-class, .classes p:last').hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:56:38.170

由于您没有在这些 javascript/jQuery 语句中应用编程逻辑，因此应用这些初始条件的最快方法是在样式表中使用 CSS 规则设置它们，而不是使用 javascript。这样，它们将在页面显示之前立即应用，而不是通过 javascript 设置，后者必须等到 DOM 加载后才能运行。

```
.enter, .btnsecond {display: block;}
#id div.my-class, .classes p:last {display: none;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T23:02:43.160

要添加到 mgraphs 代码，您可以在选择器中指定上下文。这意味着您指定项目的包含元素，以便它仅在该容器中搜索您的元素。这减少了 dom 遍历。

```
$exampleContainerDiv = $("#ContainerDivForSelectorsBelowExample");
jQuery('.enter, .btnsecond', $exampleContainerDiv).show();
jQuery('#id div.my-class, .classes p:last', $exampleContainerDiv).hide(); 
```

# java - ClassNotFoundException HttpRequestInterceptor

> ID：10422830
> 
> 赞同：7
> 
> 时间：2012-05-02T22:53:21.093
> 
> 标签：java

我在这条线上遇到了这个奇怪的异常：

```
HttpSolrServer server = new  HttpSolrServer("http://localhost:8080/solr/"); 
```

堆栈跟踪：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/http/HttpRequestInterceptor
    at com.polgar.dipl.index.SolrIndex.init(SolrIndex.java:36)
    at com.polgar.dipl.index.SolrIndex.getInstance(SolrIndex.java:30)
    at com.polgar.dipl.main.ArticleIndexer.main(ArticleIndexer.java:44)
Caused by: java.lang.ClassNotFoundException: org.apache.http.HttpRequestInterceptor
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 3 more 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-02T23:42:49.330

遇到同样的问题。我们都必须在玩 Solr 3.6

我必须从 HttpComponents 项目下载 HttpClient jar。它们似乎没有包含在 Solr 3.6 中

[http://hc.apache.org/downloads.cgi](http://hc.apache.org/downloads.cgi)

3.6 有一个新版本的客户端，它使用新的 HttpComponents (4.0) 东西，而不是旧的 HttpClient (3.1) 东西。旧的 3.1 jar 在那里，但不是新的。

一旦我把罐子复制过来，它就起作用了。

我复制了以下内容（并非全部都需要）。

```
httpclient-4.1.3.jar
httpclient-cache-4.1.3.jar
httpcore-4.1.4.jar
httpmime-4.1.3.jar 
```

现在为我工作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-17T19:16:39.740

如果您使用 Maven 包含 SOLRJ，您还需要在 POM 中包含以下短语：

```
<dependency>
    <groupId>org.apache.httpcomponents</groupId>
    <artifactId>httpclient</artifactId>
    <version>4.2.1</version>
</dependency>
<dependency>
    <groupId>org.apache.httpcomponents</groupId>
    <artifactId>httpmime</artifactId>
    <version>4.2.1</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T23:12:03.970

看起来您在运行时类路径中缺少 HttpClient Jar 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-28T10:07:00.423

我也面临这个问题。为了解决这个问题，我做了以下工作：

1.  检查“~.m2\repository\org\apache\httpcomponents”目录中http组件的可用版本
2.  基于此在您的 pom.xml 文件中添加以下条目，并通过运行`mvn clean install`和`mvn eclipse:eclipse`命令一一重建您的项目。（如果您在代理后面，请确保您在 settings.xml 文件中提供了必要的配置）

这应该可以解决问题，它对我有用。:)

```
 <dependency>
                <groupId>org.apache.httpcomponents</groupId>
                <artifactId>httpclient</artifactId>
                <version>4.2.3</version>
        </dependency>
        <dependency>
                <groupId>org.apache.httpcomponents</groupId>
                <artifactId>httpmime</artifactId>
                <version>4.2.3</version>
        </dependency> 
```

# ruby-on-rails - HasAndBelongsToMany rails 类构建方法调用 super

> ID：10422831
> 
> 赞同：0
> 
> 时间：2012-05-02T22:53:26.743
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我试图找出我认为是 Rails 中 has_and_belongs_to_many 方法中的错误。问题是我在课堂上使用了不规则的复数形式。我们将把这个类称为 StreetOfCars。我正确设置了不规则复数，如下所述。类名只是示例，重要的是 StreetOfCars 的不规则性并且它以“s”结尾。我有两个问题。

1.  这到底是怎么回事？
2.  超级终于降落在哪里？

如果您需要任何其他信息，请告诉我。

```
StreetOfCars.reflect_on_assocation(:cities).options[:join_table]
#=> 'cities_streets_of_cars'

City.reflect_on_assocation(:streets_of_cars).options[:join_table]
#=> 'cities_streets_of_car'

class StreetOfGold
  has_and_belongs_to_many :cities
end

class City
 has_and_belongs_to_many :streets_of_gold
end

#File config/initializers/inflections.rb
   ActiveSupport::Inflector.inflections do |inflect|
     inflect.irregular 'street_of_gold', 'streets_of_gold'
   end

# File activerecord/lib/active_record/associations/builder/has_and_belongs_to_many.rb, line 7
  class HasAndBelongsToMany < CollectionAssociation
    def build
      reflection = super
      check_validity(reflection)
      define_destroy_hook
      reflection
    end
  end

# File activerecord/lib/active_record/associations/builder/collection_association.rb, line 21
  class CollectionAssociation < Association
    def build
      wrap_block_extension
      reflection = super
      CALLBACKS.each { |callback_name| define_callback(callback_name) }
      reflection
    end
  end
# File active_record/associations/association.rb
  class Association
    # build is not defined in this class.
  end 
```

# svn - 提交到 SVN 时如何保护配置登录信息？

> ID：10422836
> 
> 赞同：0
> 
> 时间：2012-05-02T22:53:56.003
> 
> 标签：svn, ignore, svnignore

我在 repo 中有一个 CodeIgniter php 项目，并对包含我所有登录信息的数据库配置文件进行了大量更新。我希望其他用户或开发人员能够签出我的项目并仍然获得配置文件，而无需我登录。

我确信这是某个地方的简单疏忽，但我根本找不到它的参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:06:15.307

不，你不能这样做：svn 是一个*基于文件的*版本控制系统。这意味着它将每个*文件*作为一个唯一的原子实体来处理，可以有单独的历史记录，可以提交或忽略，但只能作为一个完整的文件。

如果您想隐藏您的凭据，您必须将敏感信息从配置文件（例如 config.php）提取到另一个文件（例如 credentials.php）。然后在你的config.php 中包含credentials.php 并将credentials.php 添加到svn 忽略列表而不提交它。您还必须与您的大学沟通，将他们的证书放入他们的 credentials.php，或者更好的是，您可以提交一个模板 credentials.php，如[Greg 的链接](https://stackoverflow.com/questions/2779293/protect-files-from-svn-commit)中所述。

# php - 执行代码时文档大小会影响性能吗？

> ID：10422840
> 
> 赞同：0
> 
> 时间：2012-05-02T22:54:26.843
> 
> 标签：php, filesize

我刚刚写完一个相当大的类，结果它明显很慢（从执行函数时）。

该类包含 3 个公共函数和至少 10 个私有函数，产生 1,569 行代码（其中相当一部分也是注释）。

现在我必须承认，在调用其中一个公共函数时，有大量的歌舞在幕后进行，但是响应时间太差了，甚至不值得使用这个类。

类文件大小为 57KB。我想知道文件大小是否是这里的问题，或者仅仅是因为我正在执行的代码 - 那么我可以将文件分解，还是我将不得不对我的代码进行缺陷？

我也尝试过简单地包含另一个文件中的类文件，同样如此......

如果这有任何好处：

1.) 类中有不少涉及文件读/写的函数（如`file_exists()`, `fopen()`, `fwrite()`, 等）

2.) 没有数据库查询/连接

3.) 没有`huge`（超过 20 个）循环

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:57:22.520

IO 很可能是你最慢的操作。

程序本身的大小并不是什么大问题。您可以使用[xdebug](http://xdebug.org/)分析您的代码，以确定具体是什么拖累了您。使用它，您可以优先考虑将首先优化的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:58:20.130

我有大文件，在速度方面没有问题。

如果您没有有效地使用文件句柄，则很可能是速度缓慢的原因。例如，如果您在每次使用后关闭一个文件，与在脚本结束时关闭它相比（或者只是通过不手动关闭它来隐式关闭它），它会花费更长的时间。

# asp.net - 从 Web App (asp.net MVC) 加载/保存 Word 文档

> ID：10422841
> 
> 赞同：5
> 
> 时间：2012-05-02T22:54:29.703
> 
> 标签：asp.net, asp.net-mvc, sharepoint, ms-word, webdav

我正在制作一个网络应用程序。其中一部分包括自动生成word文档（字母）。这些文档需要由最终用户打开，然后在完成编辑后保存回服务器。

我为此尝试使用 webdav，但我实际上可以从（使用 active-x）启动 word 的唯一浏览器是 IE。我还找到了一个用于 Firefox 的插件，但对于 Chrome，我找不到可行的方法。

接下来，我考虑让客户端将驱动器映射到 webdav（或类似的），然后将文件提供为 file://... 链接，但这仅适用于网页在本地计算机上的情况。

在我放弃词（客户不会喜欢这个）并使用 CKEditor 或 TinyMCE 之前，还有其他方法吗？

简而言之，我想在页面上有一个文档的链接，当点击它时，它会在 word 中打开，但文件应该保持远程 - 然后在保存时，它是被更新的远程文件。

我也看过 Zoho，但对于这个项目来说它可能非常昂贵，而且我认为它不能贴上白色标签，而且在 UI 方面看起来也有点过时。

也许 Sharepoint 可以做我需要的？没看那么多。还想过让客户端应用程序在系统托盘中运行并处理事情。

如果有一种在浏览器中使用 CKEditor/TinyMCE 之类的工具编辑 Word 文档的好方法，并且一旦完成，转换回 Word 格式实际上可以 100% 工作，这就足够了。

如果有人有任何想法，我愿意接受全新的想法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T01:39:15.483

目前 Chrome、Firefox 和 Safari 支持 MS Office 插件。他们可以直接打开文档并将其保存到服务器。大约一个月前，我用 MS Office 2007 和 MS Office 2007 对此进行了测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:57:25.153

理想情况下，您的用户将能够本机使用 Word。您是否有机会[创建一个与](http://msdn.microsoft.com/en-us/office/hh128772.aspx)[BeforeDocumentSave](http://msdn.microsoft.com/en-us/library/bb221290.aspx)事件挂钩的 Office 加载项，查找该文件与您的应用程序关联的一些指示符，并将更新的文件保存到您的服务器？

通过 Word 加载项保存到服务器可能需要包含一些唯一标识符（除了文件名），因此您可以覆盖以前版本的服务器端。然后，如果您使用的是[SignalR 之类的东西，则可以在服务器上（通过](http://signalr.net/)[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx) ）成功保存文件（假设它们仍在该网页上）时触发网页上的刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:15:34.030

我自己也有同样的问题。

我通过在服务器上使用摘要身份验证 (SabreDAV) 设置 webdav 共享来解决它，并将其绑定到我的应用程序后端的用户表中。

关于客户端，我通过创建一个使用 java Desktop 类 (getDesktop().open()) 打开文件的小型 java 小程序来解决访问问题。您需要确保正确处理客户端机器类型（Windows、OS X 或 Linux）的路径

您还需要让最终用户在本地永久挂载或映射 webdav 共享。

# assembly - 存储指令中数据总线的状态

> ID：10422842
> 
> 赞同：3
> 
> 时间：2012-05-02T22:54:30.137
> 
> 标签：assembly, instructions

我只是对装配中的商店指令感到困惑。当地址总线携带要写入的内存地址时，数据总线的状态是什么。它是否携带指向的地址的内存内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:03:25.257

是的，在一个简单的处理器/模型中，由指令计算的地址被放在地址总线上，如果这是一个写操作，那么数据就会在数据总线上传输，通常会有一个写选通信号向内存表明这是一个写操作以及某种使能告诉内存这实际上是一个内存周期。为了简化逻辑，有时允许数据总线甚至地址总线做任何事情，并且仅在存在正确的启用/选通信号时才有效。

[http://github.com/dwelch67](http://github.com/dwelch67)有逻辑模拟器，你可以运行它来查看它的实际效果。amber_samples repo 和 mips1_core_samples 还允许您查看正在运行的总线。

我说简单是因为一旦涉及到缓存和 mmu，事情就会变得更加复杂。地址可以更改，可能需要多次读取才能执行一次简单的写入。在处理器内核的深处，最接近内核的内存总线仍将类似于某种地址和数据总线，它从您的指令中获取位并将它们放在这些总线上。

没有两个处理器系列是相同的，一个 ARM 和一个 x86 和一个 mips 没有理由以任何方式彼此相似，并且很可能看起来不一样，即使在它们上你可以说例如将值 0x1234 存储到地址 0x1000 使用指令。

# asp.net-mvc-3 - MVC 3 Code First EF 没有从模型中重新生成我的数据库

> ID：10422843
> 
> 赞同：0
> 
> 时间：2012-05-02T22:54:38.033
> 
> 标签：asp.net-mvc-3, entity-framework-4, ef-code-first

我已经使用我的 MVC 应用程序几个星期了，对模型进行更改并重新构建等。现在，在最近对数据注释进行更改之后，尽管在 Application_Start 上的 global.asax 文件中有策略，但我的数据库没有重新生成

因此，我从 sql express 中手动删除了数据库，认为它会在我构建时创建一个新数据库。没有。

这是我的启动代码：

```
protected void Application_Start()
        {
        Models.cummins_sqldb c = new Models.cummins_sqldb();
        c.Database.Initialize(true);
        System.Data.Entity.Database.SetInitializer(new System.Data.Entity.CreateDatabaseIfNotExists<cummins_db.Models.cummins_sqldb>());
        System.Data.Entity.Database.SetInitializer(new System.Data.Entity.DropCreateDatabaseIfModelChanges<cummins_db.Models.cummins_sqldb>());

        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
        } 
```

我在 web.config 文件中有连接字符串。

关于我可以尝试什么的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T00:24:09.560

像这样的事情通常发生在我身上，当你在更改表定义时发生冲突例如：你已经在 DB 中有一些数据并向表中添加了一个不能为空的外键，以便将你令人兴奋的表与新表相关联一

表上数据的外键字段保持为空，并且与新表定义解决方案冲突，如下所示：

```
 // Create  a department for course to point to.
Sql("INSERT INTO dbo.Department (Name, Budget, StartDate) VALUES ('Temp', 0.00, GETDATE())");
//  default value for FK points to department created above.
AddColumn("dbo.Course", "DepartmentID", c => c.Int(nullable: false, defaultValue: 1)); 
//AddColumn("dbo.Course", "DepartmentID", c => c.Int(nullable: false)); 
```

Tom Dykstra，有很好的教程来解决这个问题： [getting-started-with-ef-5-using-mvc-4](http://www.asp.net/mvc/tutorials/getting-started-with-ef-5-using-mvc-4/creating-a-more-complex-data-model-for-an-asp-net-mvc-application)

看看它（在第 4 章），希望这会有所帮助

之后，您可以轻松回滚上一次工作迁移，然后更新数据库进行一些更改，然后再次根据您的愿望更新您的数据库

> 哦，伙计，我现在看到了询问的日期，希望对其他人有所帮助... :))

# sql-server - 索引是否会提高 varchar(max) 查询性能，以及如何创建索引

> ID：10422844
> 
> 赞同：16
> 
> 时间：2012-05-02T22:54:58.400
> 
> 标签：sql-server, sql-server-2008, indexing, full-text-indexing, database-optimization

首先，我应该指出我对 SQL Server 索引了解不多。

我的情况是我有一个 SQL Server 2008 数据库表，它有一个 varchar(max) 列，通常填充*很多*文本。

我的 ASP.NET Web 应用程序有一个搜索工具，可以查询此列以进行关键字搜索，并且根据搜索的关键字的数量，它们可能是 SQL 查询中的一个或多个*LIKE '%keyword%'*语句来进行搜索。

我的 Web 应用程序还允许按此表中的各种其他列进行搜索，而不仅仅是那一列。还有一些来自其他表的连接。

我的问题是，是否值得在此列上创建索引以提高这些搜索查询的性能？如果是这样，什么类型的索引，仅索引一列就足够了，还是我需要包括其他列，例如主键和其他可搜索列？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-03T00:21:54.433

我见过的关于为什么索引无助于`'%wildcard%'`搜索的最佳类比：

带两个人。递给每个人相同的电话簿。对你左边的人说：

***告诉我这本电话簿中有多少姓“史密斯”的人。***

现在对你右边的人说：

***告诉我这本电话簿中有多少人的名字是“西蒙”。***

索引就像电话簿。很容易寻找一开始的东西。很难扫描到中间或末尾的东西。

每次我在会话中重复此操作时，我都会看到灯泡亮起，所以我认为在这里分享可能会有用。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-02T23:07:16.400

您不能在 varchar(max) 字段上创建索引。索引的最大字节数为 900。如果列大于 900 字节，您可以创建索引，但任何超过 900 字节的插入都将失败。

我建议您阅读[全文](http://msdn.microsoft.com/en-us/library/ms142571%28v=sql.100%29.aspx)搜索。在这种情况下它应该适合你

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-02T23:00:45.597

如果您正在执行**LIKE '%keyword%'**搜索，则不值得创建常规索引。原因是索引的工作方式就像搜索字典一样，从中间开始，然后拆分差异，直到找到单词。该通配符查询就像要求您查找包含文本“to”或其他内容的单词 - 查找匹配项的唯一方法是扫描整个字典。

但是，您可能会考虑使用全文搜索，它适用于这种情况（[请参阅此处](https://docs.microsoft.com/en-us/sql/relational-databases/search/full-text-search?view=sql-server-2017)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T22:59:23.627

找出答案的最好方法是创建一堆类似于现实生活中发生的测试查询，并尝试在有和没有索引的情况下针对您的数据库运行它们。但是，一般来说，如果您正在执行许多 SELECT 查询和很少的 UPDATE/DELETE 查询，则索引*可能*会使您的查询更快。

但是，如果您进行大量更新，索引可能会损害您的性能，因此您必须在做出此决定之前知道您的数据库必须处理什么样的查询。

# javascript - 如果 Internet Explorer - 添加脚本

> ID：10422848
> 
> 赞同：2
> 
> 时间：2012-05-02T22:55:30.267
> 
> 标签：javascript, jquery, browser, cross-browser

如果用户使用 Internet Explorer，我正在尝试动态添加脚本。我尝试了 IE Con​​ditionals，但 chrome 不喜欢该`!IE`标签，所以我尝试使用 jquery 方式：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script>
<script type="text/javascript">
    if($.browser.msie){
        document.write('<script type="text/javascript" src="ie/ieFix.js" ></script>');
    }
    else{
        document.write('<script type="text/javascript" src="dynamic.js" ></script>');
    }
</script> 
```

我不知道为什么它不让我添加这个，而是返回`'); } else{ document.write(''); }`

将它们放入变量中具有相同的效果：/

**IE 条件**

```
<!--[if !ie]>-->
    <script type="text/javascript" src="dynamic.js" ></script>
<!--<![endif]-->
<!--[if ie]>-->
    <script type="text/javascript" src="ie/ieFix.js" ></script>
<!--<![endif]--> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T23:02:44.393

`</script>`在行_

```
document.write('<script type="text/javascript" src="ie/ieFix.js" ></script>'); 
```

实际上匹配为的结束标签

```
<script type="text/javascript"> 
```

在它上面的线上。您应该将其重写为类似

```
document.write('<script type="text/javascript" src="ie/ieFix.js" ></scr' + 'ipt>'); 
```

这样您就不会将浏览器与结束`</script>`标签混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T13:58:42.433

任何 IE 检查

```
function detectIEEdge() {
    var ua = window.navigator.userAgent;

    var msie = ua.indexOf('MSIE ');
    if (msie > 0) {
        // IE 10 or older => return version number
        return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
    }

    var trident = ua.indexOf('Trident/');
    if (trident > 0) {
        // IE 11 => return version number
        var rv = ua.indexOf('rv:');
        return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);
    }

    var edge = ua.indexOf('Edge/');
    if (edge > 0) {
       // Edge => return version number
       return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);
    }

    // other browser
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T23:02:37.807

`!IE`如果你做得对，Chrome 可以正常工作：

```
<!--[if !ie]>-->
    Put stuff for non-IE browsers here
<!--<![endif]--> 
```

您在上面的代码中遇到问题的原因是 HTML 解析器将`</script>`视为脚本的结尾而不是字符串的一部分。人们通常使用`<\/script>`.

* * *

更新：你现在做错了“如果 IE”。

```
<!--[if ie]>
    IE stuff - this is a "conditional reveal"
<![endif]-->
<!--[if !ie]>-->
    Non-IE stuff - this is a "conditional hide"
<!--<![endif]--> 
```

# mysql - MYSQL Query - 如何通过执行 CONCAT 并创建具有正确倍数总值的新列来显示正确的值，而不是 blob？

> ID：10422853
> 
> 赞同：-1
> 
> 时间：2012-05-02T22:55:56.653
> 
> 标签：mysql

> **可能重复：**
> [MySQL 查询 - 'CAST' ' CONCAT' - 如何将几行数据乘以一定数量并在新列中显示它们各自的总数？](https://stackoverflow.com/questions/10404780/mysql-query-cast-concat-how-to-multiply-several-rows-of-data-by-a-certa)

这是我的查询，但我想通过将计数乘以 1.50 英镑来在总价列中显示以英镑为单位的值。目前他们只是显示'BLOB'值，我做错了什么？我无法弄清楚，任何帮助都非常感谢......

```
SELECT CONCAT_WS(" ", c.customer_title, c.customer_fname, c.customer_sname) AS Customer,
COUNT(O.order_name) AS Ordertotal, concat('£' * 1.5) TotalPrice 
FROM Order O, Friend F, Customer C, FriendOrder 
WHERE C.customer_id = F.Customer_id 
AND F.Friend_id = FriendOrder.friend_id 
AND O.order_id = FriendOrder.order_id 
GROUP BY Customer 
ORDER BY C.customer_sname, C.customer_fname 
```

结果：ps出于保密原因，我已将客户名称列排除在外

```
Name COUNT totalPrice
     4       BLOB
     2       BLOB
     1       BLOB
     3       BLOB
     3       BLOB
     3       BLOB
     1       BLOB
     1       BLOB
     2       BLOB
     3       BLOB
     2       BLOB 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:19:05.353

您的问题是您将字符与小数相乘，这是没有意义的。
改为这样做：

```
concat('£', price_column * 1.5) TotalPrice 
```

注意：更改`price_column`为您总计金额的列名称，或`count(*)`获得 1.5 倍的行数（从您的问题中不清楚您想要什么）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:19:15.787

您将字符串乘以`'£'`数字`1.5`。我不完全确定那是做什么的，但它肯定不能达到你想要的。

请尝试：

```
CONCAT('£', COUNT(*) * 1.5) 
```

# android - 简单的文本输入，然后在标签上显示结果

> ID：10422863
> 
> 赞同：-3
> 
> 时间：2012-05-02T22:57:19.983
> 
> 标签：android

我想制作我的第一个 android 应用程序，它将是一个非常基本的实用程序。这就像一个文本输入，用户在其中计时他们想要的日期，并且在标签上会显示自该日期以来已经过了多少天。

EG：用户类型日期--->标签显示过去多少天--->用户可以保存他们输入的日期，并且应用程序仍会显示标签的输出。

就这么简单。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:06:01.533

你的问题真的很广泛。欢迎来到 Stack Overflow，在这里您可以梦想代码。但请具体说明您的问题。我们无法读懂您的想法，尽管我们想帮助您明确提出问题，但自然会吸引写得很好且有用的答案:)

首先，我会邀请您阅读官方文档中的一些内容。

在这里获得一些[方向](http://developer.android.com/training/index.html)。

或者这个怎​​么[样](http://developer.android.com/training/basics/firstapp/index.html)：

> 本课程将教您如何构建您的第一个 Android 应用程序。您将学习如何创建 Android 项目并运行可调试版本的应用程序。您还将学习 Android 应用程序设计的一些基础知识，包括如何构建简单的用户界面和处理用户输入。

但也请阅读[背景](http://developer.android.com/guide/topics/fundamentals.html)。我仍然在提及它。如果你愿意，你可以阅读尽可能多的例子——如果你没有在小屋下看一眼，你会迷路的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:00:16.873

请查阅官方安卓文档：

[http://developer.android.com/resources/tutorials/hello-world.html](http://developer.android.com/resources/tutorials/hello-world.html)

[http://developer.android.com/resources/tutorials/views/index.html](http://developer.android.com/resources/tutorials/views/index.html)

# windows-8 - Visual Studio 11 中的错误：“由于错误 80090317 无法获得许可证”

> ID：10422868
> 
> 赞同：1
> 
> 时间：2012-05-02T22:57:29.513
> 
> 标签：windows-8, visual-studio-2012

我一直在玩 Windows 8 Developer Preview 和 Visual Studio 11 Express，但我遇到了一个有点烦人的问题。每隔 1 或 2 天，我在打开 Visual Studio 时收到以下错误：“**由于错误 80090317 无法获得许可证**”

![在此处输入图像描述](../Images/f5a7736d26441bc89532fe0dd2954b13.png)

[这里](http://social.msdn.microsoft.com/Forums/en/vssetup/thread/6398fce9-d31e-4fb4-abf2-1ddb7121e38a)和[这里](http://connect.microsoft.com/VisualStudio/feedback/details/728710/failed-to-get-developer-license-for-visual-studio-11-beta-both-express-and-ultimate-sku-on-machines-upgraded-from-windows-7#)都提到了这个问题，但在这两种情况下，都说当 Windows 8 安装为 Windows 7 的升级时会出现问题，这不是我的方案。我在新分区中进行了全新安装并安装了所有可用的更新。到目前为止，我发现的解决方法是将我的系统日期放在几个月前，运行 Visual Studio 并获得许可证，然后将当前日期放回去。这会持续一段时间，直到消息再次出现。

**有人遇到过这个问题吗？
有人对此有更永久的解决方法吗？**

有关我当前设置的更多详细信息：

![在此处输入图像描述](../Images/72c1da8e9d905da7c7f6d95e9bbaba3c.png)

![在此处输入图像描述](../Images/c51168fa499a97a1a5f824d8292b31c6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:17:59.703

不要使用开发者预览版。 ~~下载 Windows 8 Consumer Preview 和 Visual Studio 11 Beta~~

**2012 年 6 月 15 日更新：** 下载 Windows 8 Release Preview 和 Visual Studio 2012 Release Candidate

# java - Java - 执行一个 .SH 文件

> ID：10422869
> 
> 赞同：1
> 
> 时间：2012-05-02T22:57:37.820
> 
> 标签：java, runtime

我将如何执行一个 .SH 文件（这是本地主机，没有远程连接或任何东西）？当我搜索时，我已经看到了很多`Runtime.exec`其他的东西，但这些似乎没有用。

这是 Java 6。另外，如果重要的话，SH 所做的只是移动两个文件夹。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T22:59:18.523

您可以使用[ProcessBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)

```
 ProcessBuilder pb = new ProcessBuilder("myshell.sh", "myArg1", "myArg2");
 Process p = pb.start();
 BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));
 String line = null;
 while ((line = reader.readLine()) != null)
 {
    System.out.println(line);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:17:55.807

如果您不想通过直接调用操作系统命令使代码依赖于平台，您也可以考虑使用[JSch 库。](http://www.jcraft.com/jsch/)

# jmeter - 我们如何使用 Jmeter 参数化显示在 Html 页面上的数据？

> ID：10422874
> 
> 赞同：0
> 
> 时间：2012-05-02T22:58:03.907
> 
> 标签：jmeter

是否有任何方法可以帮助对显示在 html 页面上的数据进行参数化，以及在不使用 CSV 文件的情况下通过表单输入的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:30:26.223

1.  [用户参数](http://jmeter.apache.org/usermanual/component_reference.html#User_Parameters)

2.  [用户定义变量](http://jmeter.apache.org/usermanual/component_reference.html#User_Defined_Variables)
    [Jmeter UDV 用户定义变量提示和帮助](http://coreplex.blogspot.com/2008/10/jmeter-udv-user-defined-variable-tips.html)

对此[也](https://stackoverflow.com/a/6099307/993246)进行调查。

# cocoa-touch - 为什么我的 NSOperation 子类永远不会完成？

> ID：10422883
> 
> 赞同：4
> 
> 时间：2012-05-02T22:58:41.433
> 
> 标签：cocoa-touch, key-value-observing, nsoperation

我有一个`NSOperation`要同时运行的子类。

我的理解是，要使并发操作起作用：

*   我需要定义`isConcurrent`返回`YES`。
*   我需要定义`start`方法
*   我需要在完成时发送 KVO`isExecuting`通知`isFinished`。
*   当和`@synthesize`的值发生更改时，使用将自动发送适当的 KVO 通知。`isExecuting``isFinished`

尽管如此，我已经验证我的队列永远不会移动到下一个项目。

这是我的代码的主要内容：

```
@interface MyOperation()

@property (readwrite) BOOL isExecuting;
@property (readwrite) BOOL isFinished;

@end

@implementation MyOperation

- (void)start
{
    @autoreleasepool {
        self.isExecuting = YES;
        self.HTTPOperation = [[AFHTTPRequestOperation alloc] initWithRequest: URLRequest];

        _HTTPOperation.completionBlock = [^{
            [self completed];

            self.isExecuting = NO;
            self.isFinished = YES;
        } copy];

        [_HTTPOperation start];
    }
}

- (BOOL)isConcurrent
{
    return YES;
}

- (void)completed
{
}

@end 
```

我错过了什么？

（这是在 iPhone 上，但我无法想象这很重要。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T23:30:22.337

看起来无论 KVO 通知`@synthesize`发送什么都不足以`NSOperationQueue`继续前进。

手动发送通知可以解决问题：

```
- (void)start
{
    @autoreleasepool {
        [self willChangeValueForKey:@"isExecuting"];
        self.isExecuting = YES;
        [self didChangeValueForKey:@"isExecuting"];

        NSURLRequest *URLRequest = [self buildRequest];
        if (!URLRequest) {
            [self willChangeValueForKey:@"isFinished"];
            [self willChangeValueForKey:@"isExecuting"];
            _isExecuting = NO;
            _isFinished = YES;
            [self didChangeValueForKey:@"isExecuting"];
            [self didChangeValueForKey:@"isFinished"];
            return;
        }

        self.HTTPOperation = [[AFHTTPRequestOperation alloc] initWithRequest: URLRequest];

        _HTTPOperation.completionBlock = [^{
            [self completed];

            [self willChangeValueForKey:@"isFinished"];
            [self willChangeValueForKey:@"isExecuting"];
            _isExecuting = NO;
            _isFinished = YES;
            [self didChangeValueForKey:@"isExecuting"];
            [self didChangeValueForKey:@"isFinished"];
        } copy];

        [_HTTPOperation start];
    }
} 
```

也可以看看：

*   [为什么 NSOperation 禁用自动键值观察？](https://stackoverflow.com/questions/3573236/why-does-nsoperation-disable-automatic-key-value-observing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T02:12:24.040

你的“队列”是什么样的？你在使用 NSOperationQueue 吗？

无论如何，我会尝试用我的理解回答你的问题：P

我会为我的 NSOperation 创建一个委托，并让**KVO**负责调用它。

比如说你的**NSOperation**类看起来像这样

```
@interface MyOperation : NSOperation

@property (assign) id<MyOperationDelegate> delegate; 
```

**您的实施**

```
@synthesize delegate;
@synthesize error;

    -(id)init{
    self = [super init];
    if(self){
        [self addObserver:self forKeyPath:@"isFinished" 
                  options:NSKeyValueObservingOptionNew 
                  context:NULL];
    }
    return self;
}

-(void)dealloc{
    [self removeObserver:self forKeyPath:@"isFinished"];
    [super dealloc];
}

-(void)observeValueForKeyPath:(NSString *)keyPath 
                     ofObject:(id)object change:(NSDictionary *)change context:(void *)context{

    if([keyPath isEqualToString:@"isFinished"] == YES){
    if([self isCancelled] == NO){
        if(delegate != nil && [delegate respondsToSelector:@selector(operationComplete:)]){
            [delegate taskComplete:self];
        }
    }else{
        if(delegate != nil && [delegate respondsToSelector:@selector(operationCancelled)]){
            [delegate taskCancelled];
        }
    }
} 
```

}

```
-(void)main{
    [NSException exceptionWithName:kTaskException 
                            reason:@"Only to be used with subclass" 
                          userInfo:nil];
} 
```

最后是你的协议

```
@class MyOperation;
@protocol MyOperationDelegate <NSObject>

@optional
-(void)operationComplete:(MyOperation*)operation;
-(void)operationCancelled; 
```

# php - 我在哪里为嵌入式 Symfony2 表单中的关联实体设置默认值？

> ID：10422886
> 
> 赞同：0
> 
> 时间：2012-05-02T22:58:57.057
> 
> 标签：php, symfony, doctrine-orm

我有一个与另一个实体有 OneToOne 关联的实体。出于这些目的，我将调用初始实体“父”和关联的实体“子”。

我有一个嵌入子表单的父表单工作正常，并且两个实体的所有表单元素都出现了，我可以将数据很好地保存在控制器中。

现在我想为嵌入式学说实体中的许多属性设置默认值。我可以在控制器中为新实体设置值，但子实体是在嵌入式表单类中创建的：

```
// Parent form
class Parent extends AbstractType
{

    public function buildForm(FormBuilder $builder, array $options)
    {
         //parent->add(...) 
         $builder->add('child', new Child(), array());
    }

// In Child Form
class Child extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {

        $builder->add('visibilitycode', 'entity', array('label' => 'Visibility', 'class'=>'Acme\MyBundle\Entity\Visibility', 'property'=>'name'));
        public function getDefaultOptions(array $options)
        {
            return array(
                'data_class' => 'Acme\MyBundle\Entity\Child',
            );
        } 
```

其中许多默认值用于关联的外键，所以如果我在控制器中设置它们，我可能会使用这样的东西：

```
$child->setVisibilityCode($em->getReference('AcmeMybundle:Visibility', 'P')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:18:35.463

为您提供了两种解决方案（或者更多:-)）：

*   初始化`Child`实体本身的默认值（例如在构造函数中）
*   使用`empty_data`Form 组件的选项：

    ```
    class Child extends AbstractType {
    public function buildForm(FormBuilder $builder, array $options)
    {

        $builder->add('visibilitycode', 'entity', array(
            'label' => 'Visibility', 
            'class'=>'Acme\MyBundle\Entity\Visibility',
            'property'=>'name'
        ));
        public function getDefaultOptions(array $options)
        {
            return array(
                'data_class' => 'Acme\MyBundle\Entity\Child',
                'empty_data' => function() use($visibility) {
                    $child = new Child();
                    $child->setVisibility($visibility);
                    return $child;
                }
            );
         }
    } 
    ```

# javascript - 用于选择具有某个直接子级的标签的 jQuery

> ID：10422890
> 
> 赞同：0
> 
> 时间：2012-05-02T22:59:14.100
> 
> 标签：javascript, jquery, html, jquery-selectors

如何使用 jQuery 选择所有 p 标记，其中至少有一个 a 标记作为直接子级？

对于文档：

```
<div>
    <p><a>My Link</a></p>
    <p><div><a>My nested Link</a></div></p>
</div> 
```

它只会返回第一个 p 标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:09:24.330

我想你可能不得不使用`.filter()`来做到这一点。以下代码应该可以满足您的需求：

```
$('p').filter(function() { return $(this).children('a').length > 0;}); 
```

[jsFiddle 演示](http://jsfiddle.net/DrqzJ/1/)

编辑：修改了演示以包含有效的 HTML（用第二`<div>`个`<span>`内部的a 替换`<p>`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T23:10:36.493

~~$('p:has(a)')~~

会成功的。

[http://jsfiddle.net/xKc8T/](http://jsfiddle.net/xKc8T/)

**更新**

标签的问题`font`可以这样解决：

```
$('p:has(a):not(:has(font))') 
```

~~[http://jsfiddle.net/xKc8T/1/](http://jsfiddle.net/xKc8T/1/)~~

**更新 2**

好吧，把这一切都废了。根据评论，`:has()`过滤器不仅仅查看直接子级。那么我们换一种方式如何选择所有`a`标签，然后选择父级为 a 的那些标签的父级`p`。

```
$('a').parent('p') 
```

或避免选择`a`您可以做的所有标签

```
$('p > a').parent() 
```

[http://jsfiddle.net/xKc8T/3/](http://jsfiddle.net/xKc8T/3/)

**又一次更新**

感谢@BoltClock 的建议。以下语法也适用：

```
$('p:has(> a)') 
```

[http://jsfiddle.net/xKc8T/4/](http://jsfiddle.net/xKc8T/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T23:03:52.960

~~这很简单：~~

 ~~```
$("div p:first-child") 
```~~ 

您可能需要考虑将 a`id`或 a应用`class`到 the`div`以将 DOM 遍历限制为仅相关的`div`和`p`块。

~~[这个答案或多或少是一样的](https://stackoverflow.com/questions/543513/getting-last-child-of-div)，只是寻找最后一个孩子。~~

*更新*对不起，误读了“第一个 p 标签”位。

尝试这个：

```
$("div p:has(a)") 
```

# jquery - jQuery水平滚动

> ID：10422893
> 
> 赞同：-3
> 
> 时间：2012-05-02T22:59:17.297
> 
> 标签：jquery, jquery-animate

我试图让这个工作，在这里找到：[Horizo​​ntal scrolling div using buttons](https://stackoverflow.com/questions/8561124/horizontal-scrolling-div-using-buttons)

但我遇到了一个错误；我的代码中有意外的标记，我无法弄清楚我错过了什么。

```
 $('#left-button').click(function {
         $('#productcontainer').animate(
           marginLeft: +="200px"
           , "fast");
      }); 
```

感谢您的提醒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:12:33.337

尝试像这样修复您的代码：

**查询**

```
$('#left-button').click(function() {
    $('#productcontainer').animate({
        marginLeft : "+=200px"
    }, "fast");
}); 
```

*请注意对代码的调整！*

检查这个[小提琴](http://jsfiddle.net/zuul/Wa66q/)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:14:06.197

如果您查看链接到的内容，您会发现您缺少`{}`for animate 方法。

```
.animate({ parma1, param2, etc }) 
```

# python - 查找 A，B 的所有序列，使得每个元素具有指定数量

> ID：10422902
> 
> 赞同：1
> 
> 时间：2012-05-02T23:00:08.420
> 
> 标签：python, itertools

例如，给定两个字母 A 和 B，我想生成所有长度为 n 且具有 x A 和 y B 的字符串。

我希望这能有效地完成。我考虑过的一种方法是构建一个长度为 x 的 A 列表，然后以各种可能的方式将 y B 插入到列表中。但是插入 python 列表是线性的，所以当列表变大时，这种方法会很糟糕。

性能目标（这可能不合理，但这*是*我的希望）：在不到一分钟的时间内生成所有长度为 20 且 A 和 B 数量相等的字符串。

编辑：建议使用 permutations('A' * x, 'B' * y) 。虽然不是一个坏主意，但它浪费了很多。如果 x = y = 4，您将多次生成字符串 'AAAABBBB'。有没有更好的方法可以只生成每个字符串一次？我已经尝试了 set(permutations('A' * x, 'B' * y)) 效果的代码，它太慢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T23:05:32.047

一个简单的方法如下：

```
import itertools

def make_sequences(x, y):
    return set(itertools.permutations("A" * x + "B" * y)) 
```

该`itertools.permutations()`函数不考虑输入列表中的重复元素。它最终生成与先前生成的排列重复的排列。因此，使用`set()`构造函数会删除结果中的重复元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T23:37:27.013

关于您对性能的担忧，这里是您的想法的实际生成器实现（不带`insert`）。它找到相应的位置`B`并填写列表。

```
import itertools

def make_sequences(num_a, num_b):
    b_locations = range(num_a+1)
    for b_comb in itertools.combinations_with_replacement(b_locations, num_b):
        result = []
        result_a = 0
        for b_position in b_comb:
            while b_position > result_a:
                result.append('A')
                result_a += 1
            result.append('B')
        while result_a < num_a:
            result.append('A')
            result_a += 1
        yield ''.join(result) 
```

它确实表现更好。与[Greg Hewgill](https://stackoverflow.com/a/10422959/843822)的解决方案（命名`make_sequences2`）比较：

```
In : %timeit list(make_sequences(4,4))
10000 loops, best of 3: 145 us per loop

In : %timeit make_sequences2(4,4)
100 loops, best of 3: 6.08 ms per loop 
```

**编辑**

通用版本：

```
import itertools

def insert_letters(sequence, rest):
    if not rest:
        yield sequence
    else:
        letter, number = rest[0]
        rest = rest[1:]
        possible_locations = range(len(sequence)+1)
        for locations in itertools.combinations_with_replacement(possible_locations, number):
            result = []
            count = 0
            temp_sequence = sequence
            for location in locations:
                while location > count:
                    result.append(temp_sequence[0])
                    temp_sequence = temp_sequence[1:]
                    count += 1
                result.append(letter)
            if temp_sequence:
                result.append(temp_sequence)
            for item in insert_letters(''.join(result), rest):
                yield item

def generate_sequences(*args):
    '''
    arguments : squence of (letter, number) tuples
    '''
    (letter, number), rest = args[0], args[1:]
    for sequence in insert_letters(letter*number, rest):
        yield sequence 
```

用法：

```
for seq in generate_sequences(('A', 2), ('B', 1), ('C', 1)):
    print seq

# Outputs
# 
# CBAA
# BCAA
# BACA
# BAAC
# CABA
# ACBA
# ABCA
# ABAC
# CAAB
# ACAB
# AACB
# AABC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T23:06:02.783

这应该会给你一个想法（我已经包含了每个步骤，所以你可以看到发生了什么）：

```
>>> x = 2
>>> y = 3
>>> lst_a = ['A'] * x
>>> lst_b = ['B'] * y
>>> print lst_a, lst_b
['A', 'A'] ['B', 'B', 'B']
>>> lst_a.extend(lst_b)
>>> lst_a
['A', 'A', 'B', 'B', 'B']
>>> print list(itertools.permutations(lst_a)) 
```

# javascript - Javascript：当 iframe 在某个页面上时关闭窗口？

> ID：10422904
> 
> 赞同：1
> 
> 时间：2012-05-02T23:00:25.580
> 
> 标签：javascript

我的网站上有一个系统可以让用户登录。用户登录后，我需要关闭它所在的弹出窗口并刷新父窗口。这个系统可能会根据用户是否曾经去过不同的页面，等等，但结束页面总是相同的。

我尝试为此编写自己的 JavaScript，但由于我几乎不使用它，我无法让它正常工作。这是我所拥有的，我相信它非常接近我想要的最终结果：

```
<script type="text/javascript">
var iframe = document.getElementById("IFRAME ID").contentWindow.location.href;
var url = "ENDING PAGE URL";
function LoadFrame() {
if (iframe == url) {
window.close();
if (window.opener && !window.opener.closed) {
window.opener.location.reload();
} else {
} 
</script> 
```

所以我想我是在问我需要改变/添加/修复/摆脱/做什么才能使这项工作？

# python - 在 Python 中规范化具有不规则间隔的数据集

> ID：10422905
> 
> 赞同：3
> 
> 时间：2012-05-02T23:00:28.090
> 
> 标签：python, graph

我在 Python 中有一些数据最终绘制在图表（Highcharts）上，问题是 x 轴（时间）上数据点之间的间隔不规则。虽然准确，但这使得图表在视觉上看起来有点不稳定。

数据格式如下：

```
data = {"points": [[1335360000, 1335361920, 93374739787], [1335361920, 1335447840, 11738851087.0]......]} 
```

即：timestamp from、timestamp to、value

我需要做的是修改数据，使其标准化为最低频率/最长时间间隔，以便在绘制在图表上时看起来一致。

关于最有效的方法有什么想法吗？

## 更新

在这种情况下，我真的不能使用任何 3rd 方库。

图表通常是这样渲染的，在数据​​点靠得更近的地方显得更加参差不齐：

[![图表示例](../Images/f393b7a0b0157897f7e9dd9151d28e88.png)](https://i.stack.imgur.com/nFB9U.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:37:25.270

如果您还没有尝试过，您可能会发现该[`pandas`](http://pandas.pydata.org/)库对于将不规则时间序列转换为规则时间序列（以及其他类型的数据操作-jui-jitsu，一般来说）很有用。使用（干净、可重用的习语，一旦你学习它们）和运行时快速（cython 优化）进行编程是有效的。

为了让您体验一下，这里有一些基于您描述的数据格式的 pandas 示例。

1.  将数据读入`pandas.DataFrame`. （DataFrame 的作用类似于列的字典，其中的值是 numpy 数组。）

    ```
    In [33]: df = pandas.DataFrame(data['points'], columns=['from', 'to', 'value'])

    In [34]: df
    Out[34]: 
             from          to  value
    0  1335360000  1335360004      3
    1  1335360004  1335360008     32
    2  1335360008  1335360009      4
    3  1335360009  1335360011     36
    4  1335360011  1335360014     38 
    ```

2.  转换现有列并添加派生列

    ```
    In [46]: utcfromtimestamp = datetime.datetime.utcfromtimestamp

    In [47]: df['from'] = df['from'].map(utcfromtimestamp)

    In [48]: df['to'] = df['to'].map(utcfromtimestamp)

    In [49]: df['delta'] = [x.total_seconds() for x in (df['to'] - df['from'])]

    In [50]: df['avg/s'] = df['value'] / df['delta']

    In [51]: df
    Out[51]: 
                      from                   to  value  delta      avg/s
    0  2012-04-25 13:20:00  2012-04-25 13:20:04      3      4   0.750000
    1  2012-04-25 13:20:04  2012-04-25 13:20:08     32      4   8.000000
    2  2012-04-25 13:20:08  2012-04-25 13:20:09      4      1   4.000000
    3  2012-04-25 13:20:09  2012-04-25 13:20:11     36      2  18.000000
    4  2012-04-25 13:20:11  2012-04-25 13:20:14     38      3  12.666667 
    ```

3.  分组并选择要绘制的信息

    ```
    In [78]: df.groupby('from')['avg/s'].mean()
    Out[78]: 
    from
    2012-04-25 13:20:00     0.750000
    2012-04-25 13:20:04     8.000000
    2012-04-25 13:20:08     4.000000
    2012-04-25 13:20:09    18.000000
    2012-04-25 13:20:11    12.666667
    Name: avg/s 
    ```

有关上采样或下采样时间序列的信息，请参阅[此链接](http://pandas.sourceforge.net/timeseries.html#up-and-downsampling)。下一个版本 (0.8) 仍在开发中，计划提供更简洁的方法来重新采样时间序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T00:07:56.637

我想你可以做某种形式的曲线拟合（最小二乘或其他），但为了准确起见，也许你应该坚持不规则的间隔？

如果你把它变成一个折线图，你可能会对你的原始数据没问题。

# eclipse - Eclipse 插件：如何强制它使用特定版本的 SWT.jar？

> ID：10422911
> 
> 赞同：0
> 
> 时间：2012-05-02T23:01:13.380
> 
> 标签：eclipse, eclipse-plugin, swt

我的 Eclipse 插件有一个需要 SWT 3.75M 或更高版本的外部库。因此，我将相应的 jar 文件添加到类路径中。现在，如果我编写一个测试驱动程序来实例化并调用 lib 的一些类和方法，它可以工作，但是如果我启动我的整个插件并想从那里调用相同的方法，它就不起作用，因为 SWT 低于 3.75米

我认为问题是，该插件不使用我的LIB文件夹中的SWT（我使用插件中的“适当”选项卡添加到插件中，而是使用Eclipse安装中的SWT Jar。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:10:46.183

你应该在你的插件中使用 SWT 作为一个包/插件（而不是把 Jar 文件放在你的类路径中）。然后您可以在引用捆绑包时指定所需的最低版本。在引用 SWT 的插件清单中执行此操作。然后，您需要确保所需的 SWT 插件在您的目标平台中可用。

# c# - 当某些属性可能是通用的时，遍历嵌套属性

> ID：10422915
> 
> 赞同：0
> 
> 时间：2012-05-02T23:01:43.537
> 
> 标签：c#, generics, reflection

```
public class MyContext: DbContext
{
    public MyContext() : base("VidallyEF") {}

    public DbSet<User> Users { get; set; }
    public DbSet<Role> Roles { get; set; }
    public DbSet<Contest> Contests { get; set; }
    public DbSet<Comment> Comments { get; set; }
    public DbSet<Submission> Submissions { get; set; }
} 
```

我正在尝试遍历 MyContext 的属性，然后遍历每个属性的属性。我有这个：

```
foreach (var table in typeof(MyContext).GetProperties())
            {
                // TODO add check that table is DbSet<TEntity>..not sure..

                PropertyInfo[] info = table.GetType().GetProperties();

                foreach (var propertyInfo in info)
                {
                    //Loop 
                    foreach (var attribute in propertyInfo.GetCustomAttributes(false))
                    {
                        if (attribute is MyAttribute)
                        {
                           //do stuff
                        }
                    }
                }        

            } 
```

问题是因为 MyContext 的属性是泛型的，所以 GetType().GetProperties() 没有返回底层对象的属性。我需要如何获取用户和角色对象。

任何帮助，将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T23:08:05.667

PropertyInfo 上有一些有用的东西。`IsGenericType`将告诉您属性类型是否为泛型，`GetGenericArguments()`调用将返回一个`Type`包含泛型类型参数类型的数组。

```
foreach (var property in someInstance.GetType().GetProperties())
{
    if (property.PropertyType.IsGenericType)
    {
        var genericArguments = property.PropertyType.GetGenericArguments();
        //Do something with the generic parameter types                
    }
} 
```

同样重要的是要注意`GetProperties()`只返回指定类型上可用的属性。如果您想要指定类型可能*包含或使用的*类型，则必须进行一些挖掘才能获得它们。

# ruby-on-rails - RoR 如何使用向下钻取创建表单

> ID：10422916
> 
> 赞同：0
> 
> 时间：2012-05-02T23:02:05.797
> 
> 标签：ruby-on-rails

我有一个带有客户表和项目表的 Rails 应用程序。我想创建一个表单，用户首先从下拉列表中选择客户端，然后从属于该客户端的项目的下拉列表中进行选择。

您能否指点我一些“操作方法”信息。

谢谢

PS - 如果有用的话，我会在应用程序中使用 jQuery 和 Bootstrap

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:20:36.880

您可以使用 jquery 来执行此操作：-

这是一个示例，如果您从下拉列表中选择了 Type1，它将向您显示许可证 div。

```
$(document).ready(function(){
    $('#user_account_type').change(function(){
        if ($('form select option:selected').val() == 'Type1'){
            $('.license').show();
          }else{
            $('.license').hide();
        }
    });
}); 
```

# c++ - 将参数从非模板传递到模板函数？

> ID：10422917
> 
> 赞同：0
> 
> 时间：2012-05-02T23:02:16.760
> 
> 标签：c++, parameters

我在通过非模板函数传递模板函数的参数时遇到了一些麻烦。

假设我有这个：

```
template <class T>
void A(Array <T> &A) {
    cout << "here";
}

void menu(Array<myType>& fooList) { // my type specified class type, created by me. 
    cout << "enter option ";
    cin >> a;

    switch {
       case 1: A(fooList); break;
    }
} 
```

我希望这个例子足够清楚。这可能吗？我可以将参数从非模板函数传递到模板函数吗？

编辑： - 自我尝试构建的原型以来的实际代码没有帮助。

域.h

```
template <class T>
void printAll(Array <T> &DBst, Array <T> &DBas){
    for(int i=0; i<DBst.lenght; i++){
        DBst.M[i].printStudent();
        std::cout<<" ___ ";
        DBas.M[i].printAssgn();
        std::cout<<std::endl;
    }
} 
```

控制器.h

```
template <class T>
void _printAll(Array <T> &DB1, Array <T> &DB2){
    cout<<"List of students with their Assignment!"<<endl;
    printAll(DB1, DB2);
    cout<<"done!"<<endl;
} 
```

菜单.cpp

```
void Menu::mainMenu(Array <Student> &DBst,Array <Assignment> &DBas){
showMainMenu();
int ret = Menu::intInputHandler();

while(ret){
    switch(ret){
    case 1:studentMenu(DBst,DBas);break;
    case 2:assignmentMenu(DBst,DBas);break;
    case 3:statsMenu(DBst,DBas);break;
    case 4:_printAll(DBst,DBas);break; //// ERROR ***
    case 0:/*exit*/;break;
    default:cout<<"Wrong option selected!";break;
    }
    }

    } 
```

菜单.h

```
class Menu{

public:
    void showMainMenu();
    void showStudentMenu();
    void showAssignmentMenu();
    void showStatisticsMenu();
    string stringInputHandler();
    int intInputHandler();
    void mainMenu(Array <Student> &,Array <Assignment> &);
    void studentMenu(Array <Student> &,Array <Assignment> &);
    void assignmentMenu(Array <Student> &,Array <Assignment> &);
    void statsMenu(Array <Student> &,Array <Assignment> &); 
```

};

***`..\Menu.cpp:90:29: error: no matching function for call to '_printAll(Array<Student>&, Array<Assignment>&)'`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T23:20:08.923

那么你`_printAll(DBst,DBas);`是两种不同类型的数组；并且`_printAll`只能采用两个相同类型的数组。您需要定义一个函数

```
template <class T1, class T2>
void printAll(Array <T1> &DBst, Array <T2> &DBas) 
```

和相应的 _printAll

# c# - 如何从网站下载特定图像文件并将这些图像转换为电子邮件地址？

> ID：10422920
> 
> 赞同：-5
> 
> 时间：2012-05-02T23:02:25.807
> 
> 标签：c#, image, email

有一个网站可以将所有内部电子邮件转换为如下图像：

![在此处输入图像描述](../Images/62a7500e7aff05786763e7aeadbabea0.png)

有没有办法获得这些电子邮件地址？
意思是有软件可以完成这项工作还是我可以为此编写代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T23:05:27.077

您是否曾经认为他们将这些电子邮件地址显示为图像是有原因的？也许那个原因是程序无法抓取地址并继续向它们发送垃圾邮件？

无论如何，您正在寻找的是称为[光学字符识别](http://en.wikipedia.org/wiki/Optical_character_recognition)(OCR)。

这里有几个关于 OCR 的 Stack Overflow 问题：

*   [任何开源 C# OCR 库？](https://stackoverflow.com/questions/744966/any-open-source-c-sharp-ocr-library)
*   [需要 C# OCR 库将图像转换为文本](https://stackoverflow.com/questions/2410335/need-c-sharp-ocr-library-to-convert-image-to-text)
*   [任何免费的 C# OCR 库？](https://stackoverflow.com/questions/1512271/any-free-ocr-library-for-c)

普遍的共识是，[Tesseract for .NET](http://www.pixel-technology.com/freeware/tessnet2/)是这里的出路，因为它是开源的。

但是请不要发送垃圾邮件，否则我们都会恨你。

# c# - 使用进度条添加 ListBoxItem

> ID：10422921
> 
> 赞同：0
> 
> 时间：2012-05-02T23:02:35.683
> 
> 标签：c#, wpf, listbox, progress-bar

嘿，我想知道如何将具有完整工作进度条的 ListBoxItem 添加到 ListBox。

情况是：

我有一个用作 Actionlog 的 ListBox，我在程序中有一个下载功能，当我开始下载时，它会出现在日志中。

现在我想在显示下载进度的日志中添加一个进度条。

我自己尝试过，但不是很成功：

```
 ListBoxItem lbitem = new ListBoxItem();
        ProgressBar pb1 = new ProgressBar();
        pb1.Width = 100;
        pb1.Height = 20;

        lbitem.Content = "Downloading file - " + pb1;

        listbox1.Items.Add(lbitem); 
```

但也许这让你知道我实际上想要做什么。

我希望有人可以帮助我解决这个问题，

问候，

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:11:00.587

您最好使用`ListView`添加`ProgressBar`.

看看这个：[一个更容易使用的 ListView](http://www.codeproject.com/Articles/16009/A-Much-Easier-to-Use-ListView "一个更容易使用的 ListView")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:16:03.947

我自己对 C# 还很陌生，所以我可能没有完整/正确的答案，但这是我在类似情况下所做的。

首先，如果您使用的是进度条，那么您需要知道您正在加载的项目总数，以便您可以告诉进度条最大值是多少。然后你设置一个循环来加载列表框的数据并增加进度条的计数。

关于循环的几句话：
如果进度条计数超过您设置的最大值，您将收到运行时错误。
如果您将大量项目加载到列表框中，则不要每次都更新进度条，而是每 10、20、50、100 个项目更新一次（无论如何，您不应该真的有一个包含数千个项目的列表框，这是非常低效的）。
您可能需要刷新屏幕显示，以便在您处于紧密循环中时用户可以看到正在运行的进度条。

这是一个小样本“空气代码”：

```
pb1.Maximum = maxNumberItemsToLoad;
for (int i==0; i<maxNumberItemsToLoad; i++)
{
   lbItem = "String to add to Listbox"; //Read/Get your data to put into listbox here
   listbox1.Items.Add(lbItem);
   pb1.Increment(1);
   //May need to do a this.Refresh(); here if pb1 does not update
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T17:25:52.883

在您的代码中：

```
...
lbitem.Content = pb1;
... 
```

在 XAML 中，在 ListBox 的实例上：

```
<ListBox ...>
    <ListBox.ItemTemplate>
        <DataTemplate>
             <StackPanel Orientation="Horizontal">
                 <TextBlock Text="Downloading file - " VerticalAlignment="Center"/>
                 <ContentPresenter Content="{Binding }"/>
             </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
....
</ListBox> 
```

更好的方法是有一个列表，其中包含每个项目的进度（即进度条的值），并且`ProgressBar`是`DataTemplate`.

# javascript - javascript中setTimeout的问题

> ID：10422926
> 
> 赞同：1
> 
> 时间：2012-05-02T23:02:49.193
> 
> 标签：javascript, jquery

```
$(document).ready(function () {       
function EndSession() {

            window.close();
        };

       setTimeout("EndSession()", 10000);

}); 
```

上面显示的是使用 window.open() 打开的子页面中的代码。

问题是在尝试调用 EndSession 十秒钟后，它会抛出错误“Microsoft JScript 运行时错误：'EndSession' 未定义”

这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T23:05:22.953

也许旧方式“字符串”的问题在于它在全局范围内寻找方法，而该方法是在用于 jQuery 的函数内部定义的`ready`。

如果我们对它有适当的引用，我们可以显式地传递我们真正想要的函数。

咱们试试吧：

```
$(document).ready(function () {       
    var endSession = function() {
        window.close();
    };

    setTimeout(endSession, 10000);
}); 
```

虽然我还没有尝试过，但也许这会起作用：

```
$(document).ready(function () {       
    setTimeout(window.close, 10000);
}); 
```

我不确定您是否也需要准备好 jQuery，除非您有意在文档完全加载后开始计算时间（我希望很快就会关闭弹出窗口）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T23:04:15.637

应该是这样的

```
setTimeout(EndSession, 10000); 
```

[演示](http://jsfiddle.net/VE6GR/1)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T23:07:47.903

当超时事件触发时，您指定的代码将在全局命名空间中运行。

您的代码是`"EndSession()"`，因此浏览器尝试使用名称查找全局函数`EndSession`。没有这样的函数，因为您`EndSession()`在传递给的匿名函数中定义了`$(document).ready()`.

因此，定义`EndSession`为全局就足够了。

```
function EndSession() {
    window.close();
};

$(document).ready(function () {
    setTimeout("EndSession()", 10000);
}); 
```

此外，按照惯例，不是构造函数的函数应该以小写字母开头；）

# web-hosting - Rackspace 云站点和 ASP.NET Web API

> ID：10422933
> 
> 赞同：0
> 
> 时间：2012-05-02T23:02:58.683
> 
> 标签：web-hosting, asp.net-web-api

我在我的站点中使用 ASP.NET Web API。当我将它添加到我的 Rackspace 云站点时，我的 web.config 中的程序集无法识别。我收到配置错误，例如：

> 无法加载文件或程序集“System.Json，Version=4.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。

Rackspace Support 说我需要添加 dll 文件。这是否意味着它们不支持 ASP.NET Web API？是否可以自己添加dll文件？如果是，我从哪里得到它们？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:33:57.087

确保您的云站点设置为 .NET 4.0。只有最近的更新允许您选择 4.0（在所有 ASP.NET 站点默认为 3.5 之前）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T18:42:52.810

我可以通过从我的 C:\Program Files\Microsoft ASP.NET\ASP.NET MVC 4\Assemblies 文件夹中复制 DLL 文件来完成这项工作。

# c# - 将 Azure ACS（访问控制服务）与 ASP.NET Web API 结合使用

> ID：10422937
> 
> 赞同：4
> 
> 时间：2012-05-02T23:03:25.080
> 
> 标签：c#, asp.net-mvc, azure, acs

我现在在一个项目中使用新的 ASP.NET Web API，它需要用户身份验证和授权才能执行一些操作：例如，更新个人资料页面。

在没有 API 要求的使用 ASP.NET MVC 3 的同一项目的先前版本中，我使用 Azure ACS 和基于角色的访问控制（基于[本](http://msdn.microsoft.com/en-us/library/windowsazure/gg185914.aspx)教程）取得了很大成功。

我希望能够再次将 ACS 与 Web API 一起使用，但我不明白 ACS 的工作原理是否足够好，无法知道这是否受支持。是否有可能/我在尝试这样做时可能会遇到任何挑战？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T06:40:16.900

> > 但我不明白 ACS 是如何运作良好的，无法知道这是否受支持。

支持。ASP.NET Web API 允许我们构建 REST 服务。ACS 支持任何类型的 REST 服务。[本文](https://azure.microsoft.com/en-us/documentation/articles/active-directory-dotnet-how-to-use-access-control/)中描述的通常的索赔验证过程将起作用。我们只需要将 WCF 更改为 Web API。

最好的祝福，

明旭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:30:35.330

根据我的经验，您指出的链接可能无济于事，因为它用于客户端（WPF/Windows Phone/等）。在服务端使用 ACS，我们将处理索赔，我们可以配置 ACS 以返回我们喜欢的任何索赔。声明可以是用户名，但也可以是角色。例如，我们可以创建一个规则来将特定用户映射到角色，然后 ACS 会将角色声明返回给我们。

但是如果我们想与 ASP.NET 角色集成，我们需要解析声明（即使是角色声明），并将声明分配给 Thread.CurrentPrincipal。如果我们将 ACS 配置为返回 SAML 令牌，WIF 会为我们执行此操作。如果 ACS 返回一个 SWT 令牌，我们需要自己做，或者使用别人为我们编写的库。其中一个库是由 DPE 团队编写的 DPE.OAuth。您可以从[http://msdn.microsoft.com/en-us/IdentityTrainingCourse_ACSAndWindowsPhone7](http://msdn.microsoft.com/en-us/IdentityTrainingCourse_ACSAndWindowsPhone7)获得它。虽然该教程告诉我们如何在 Windows Phone 中使用 ACS，但可以重用服务端 OAuth 库。

最好的祝福，

明旭。

# java - 播放战争命令不起作用

> ID：10422938
> 
> 赞同：2
> 
> 时间：2012-05-02T23:03:29.850
> 
> 标签：java, playframework, playframework-2.0

当我输入`play war`或`play war blah -o blah.war --zip`收到此错误时

```
[error] Not a valid command: war (similar: start, run)
[error] Not a valid project ID: war
[error] Not a valid configuration: war
[error] Not a valid key: war (similar: watch, run, target)
[error] war
[error]    ^
```

我一直在尝试用谷歌搜索它，但我没有运气。当我运行 play 时，我的本地主机上一切正常，我正试图将它部署到我的 ubuntu 服务器上

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T07:49:52.197

对于您显示的错误，您似乎正在使用 Play 2.0。Play 2.0 还不支持 WAR 打包，目前仅适用于 Play 1.2.4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:30:05.233

您可以将 play 应用程序部署为独立的 java 应用程序，而无需制作其 war 文件。Play 框架具有 Netty NIO 服务器，它嵌入在分发文件中，您需要按照以下步骤生成该文件：

```
1\. Navigate to project folder
2\. type "play"
3\. type "dist" 
```

这将在您的播放应用程序的 dist 文件夹中生成项目快照 zip 文件。

在某个文件夹中提取 zip 文件。在那里你会找到一个启动 shell 脚本文件。只需执行该脚本文件

注意：要使文件可执行类型：chmod 777 start

。/开始

这将发布应用程序并打开端口以在默认端口 9000 上接收 http 请求。如果您想在执行文件时更改端口，

./start -Dhttp.port=8080

这将在端口 8080 上发布应用程序

# c# - Installshield winforms 使用特定登录用户帐户创建服务

> ID：10422940
> 
> 赞同：0
> 
> 时间：2012-05-02T23:03:44.980
> 
> 标签：c#, asp.net, windows-services, windows-installer, installshield

使用此 c# 代码，我可以获得我的 Windows 服务的用户

```
 System.Management.SelectQuery sQuery = new System.Management.SelectQuery(string.Format("select Name,startname from Win32_Service where name ='MyWindowsServices' ")); 

            using (System.Management.ManagementObjectSearcher mgmtSearcher = new System.Management.ManagementObjectSearcher(sQuery))
            {
                foreach (System.Management.ManagementObject service1 in mgmtSearcher.Get())
                {

            //If not local system , then associated with different user                                  
             if(service1["startname"].ToString().ToLower()!="localsystem")
                               {
                             service1["startname"].ToString()).ToString()
                               }
                   }
               } 
```

这是我的 installshield 脚本，它创建了我的 Windows 服务安装。IE。如果系统已经安装了我的 windows 服务，当他们再次重新安装时，我需要确保我需要指向运行 windows 服务的任何用户。（如果它的本地系统应该指向本地系统，如果它是一个特定的用户，比如有密码的shareye500，那么它应该指向shareye500（用户）并弹出（如设置服务登录）密码应该显示）。

```
Set objCreate = objWMIService.Get("Win32_BaseService")

Get Window Service 
Set colListOfServices = objWMIService.ExecQuery _
 ("Select * from Win32_Service Where Name = 'MyWindowsServices'")
'First Stop and Delete service and then install
For Each objService in colListOfServices 
```

//我获取服务关联的用户名

```
 startName=objService.StartName   
    objService.StopService()   
    Next   

'I have delete service logic & then i install Window Service again

objCreate.Create "MyWindowsServices" ,"My Windows Service Description" ,
"c:\test\" & "MyWindowsServices.exe", OWN_PROCESS, NORMAL_ERROR_CONTROL,
 "Automatic", NOT_INTERACTIVE, startName, "" 
```

但是，当我以上述语法传递 startName 时，我的安装失败，但如果我传递 Null，它会使用 localsystem 用户帐户创建 Windows 服务安装。

如何获取与 Windows 服务关联的用户帐户并通过 installshield 脚本将其分配回安装？

* * *

```
 System.Management.SelectQuery sQuery = new System.Management.SelectQuery(string.Format("select startname from Win32_Service where name ='MyWindowsService' ")); 
            using (System.Management.ManagementObjectSearcher mgmtSearcher = new System.Management.ManagementObjectSearcher(sQuery))
            {
                foreach (System.Management.ManagementObject service in mgmtSearcher.Get())
                {
                    if (service["startname"].ToString().ToLower() != "localsystem" || service["startname"].ToString().ToLower() != "localservice")
                    {
                        this.ServiceProcessInstaller1.Account = System.ServiceProcess.ServiceAccount.User;
                        this.ServiceProcessInstaller1.Username = service["startname"].ToString();
                    }
                    else
                    {

                        this.ServiceProcessInstaller1.Account = System.ServiceProcess.ServiceAccount.LocalSystem;
                        this.ServiceProcessInstaller1.Password = null;
                        this.ServiceProcessInstaller1.Username = null;
                    }

                }
            } 
```

* * *

我有这个逻辑，我需要做的就是把它放在 installscript（在 vb 中），但是我正在努力如何在 installscript 中使用 ManagementObject。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T02:21:44.527

这种方法行不通。首先，虽然您可以很容易地获取服务帐户的用户名，但您不能调用方法来获取该帐户的密码（一个明显的安全限制）。

删除服务将顺利进行，但 Create 方法需要除 LocalSystem 以外的任何帐户的用户名和密码（再次，为了安全），您不会完全拥有。这对于 LocalSystem 以外的任何帐户都是一个问题。

为什么您必须删除并重新安装您的服务？您可以简单地停止服务并更新服务调用的底层可执行文件/dll吗？您甚至可以使用 API 函数更改服务的命令行...

# opengl - 如何用opengl制作2D地形？

> ID：10422947
> 
> 赞同：6
> 
> 时间：2012-05-02T23:04:42.047
> 
> 标签：opengl

我想制作一个简单的 2d 地形，只有一些颠簸和高度变化：

![带车的地形](../Images/bf59fe479205b6979a0bba129a10f310.png)

我想过只使用随机数来描述某个顶点的高度，但我不知道如何从中制作一个网格。我正在寻找一种方法来找到地形的顶点和索引缓冲区。
我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:35:06.487

您可以将 GL_POLYGON 与所有顶点的列表一起使用，其中第一个和最后一个顶点位于视图下方。

如果你想使用三角形网格，你必须在每个高度点正下方创建一个点（视野外），那么模式（顺时针排序）将是：

```
for (number of height points-1)
    //vertices
     vertice below height;
     height vertice;
     next_height vertice;

     next height vertice;
     vertice below next height;
     vertice below height; 
```

然后计算索引取决于您如何存储顶点，但数组中会有类似的模式。

# html - CSS 背景不透明度

> ID：10422949
> 
> 赞同：802
> 
> 时间：2012-05-02T23:05:00.163
> 
> 标签：html, css, opacity

我正在使用类似于以下代码的内容：

```
<div style="opacity:0.4; background-image:url(...);">
    <div style="opacity:1.0;">
        Text
    </div>
</div> 
```

我希望这会使背景的不透明度为 0.4，文本的不透明度为 100%。相反，它们的不透明度均为 0.4。

* * *

## 回答 #1

> 赞同：1307
> 
> 时间：2012-05-02T23:07:20.533

孩子继承不透明度。如果他们不这样做会很奇怪和不方便。

您可以为背景图像使用半透明的 PNG 文件，或为背景颜色使用 RGBa（a 表示 alpha）颜色。

例如，50% 褪色的黑色背景：

```
<div style="background-color:rgba(0, 0, 0, 0.5);">
   <div>
      Text added.
   </div>
</div>
```

* * *

## 回答 #2

> 赞同：231
> 
> 时间：2013-09-24T15:26:58.280

您可以使用伪元素[`::before`或`::after`](https://drafts.csswg.org/css-pseudo/#generated-content)获得半透明背景，并且只需一个容器即可。使用这样的东西：

```
<article>
  Text.
</article> 
```

然后应用一些 CSS：

```
article {
  position: relative;
  z-index: 1;
}

article::before {
  content: "";
  position: absolute;
  top: 0; 
  left: 0;
  width: 100%; 
  height: 100%;  
  opacity: .4; 
  z-index: -1;
  background: url(path/to/your/image);
} 
```

例子：

```
body {
  background: red;
}

article {
  position: relative;
  z-index: 1;
}

article:before {
  content: " ";
  position: absolute;
  top: 0; 
  left: 0;
  width: 100%; 
  height: 100px;  
  opacity: .4; 
  z-index: -1;
  background: url(https://31.media.tumblr.com/8ec07e49f33088c2e32c158ca4262eb2/tumblr_n5wav6Tz4R1st5lhmo1_1280.jpg);
}
```

```
<article>
  Text.
</article>
```

注意：您可能需要调整这些`z-index`值。

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2013-09-24T16:06:32.510

以下方法可用于解决您的问题：

1.  CSS alpha 透明度方法（在 Internet Explorer 8 中不起作用）：

    ```
    #div{background-color:rgba(255,0,0,0.5);} 
    ```

2.  根据您的选择使用透明的PNG图像作为背景。

3.  使用以下 CSS 代码片段创建跨浏览器的 alpha 透明背景。这是一个`#000000`不透明度为 @ 0.4%的示例

    ```
    .div {
        background:rgb(0,0,0);
        background: transparent\9;
        background:rgba(0,0,0,0.4);
        filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#66000000,endColorstr=#66000000);
        zoom: 1;
    }
    .div:nth-child(n) {
        filter: none;
    } 
    ```

有关此技术的更多详细信息，请参阅[此](http://hammerspace.co.uk/2011/10/cross-browser-alpha-transparent-background-css)，它有一个在线 CSS 生成器。

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2012-05-02T23:28:58.623

我会做这样的事情

```
<div class="container">
  <div class="text">
    <p>text yay!</p>
  </div>
</div> 
```

CSS：

```
.container {
    position: relative;
}

.container::before {
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    background: url('/path/to/image.png');
    opacity: .4;
    content: "";
    z-index: -1;
} 
```

它应该工作。这是假设您需要有一个半透明的图像顺便说一句，而不是颜色（您应该只使用 rgba）。还假设您不能事先在 Photoshop 中更改图像的不透明度。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2016-03-21T12:53:40.197

您可以使用[Sass'](http://en.wikipedia.org/wiki/Sass_%28stylesheet_language%29) `transparentize`。

我发现它是最有用和最简单易用的。

```
transparentize(rgba(0, 0, 0, 0.5), 0.1) => rgba(0, 0, 0, 0.4)
transparentize(rgba(0, 0, 0, 0.8), 0.2) => rgba(0, 0, 0, 0.6) 
```

查看更多：*[#transparentize($color, $amount) ⇒ Sass::Script::Value::Color](http://sass-lang.com/documentation/Sass/Script/Functions.html#transparentize-instance_method)*

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-03-16T06:08:45.880

```
.transbg{/* Fallback for web browsers that don't support RGBa */
background-color: rgb(0, 0, 0);
/* RGBa with 0.6 opacity */
background-color: rgba(0, 0, 0, 0.6);
/* For IE 5.5 - 7*/
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
/* For IE 8*/
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-05-02T23:14:06.940

这是因为内部 div 具有它所嵌套的 div 的 100% 的不透明度（具有 40% 的不透明度）。

为了规避它，您可以做一些事情。

您可以像这样创建两个单独的 div：

```
<div id="background"></div>
<div id="bContent"></div> 
```

为背景设置所需的 CSS 不透明度和其他属性，并使用 z-index 属性 ( [z-index](http://www.w3schools.com/cssref/pr_pos_z-index.asp) ) 设置 bContent div 的样式和位置。有了这个，您可以将 div 放置在背景 div 的上方，而不会破坏它的不透明度。

* * *

另一种选择是[RGBa](http://css-tricks.com/rgba-browser-support/)。这将允许您嵌套 div 并仍然实现 div 特定的不透明度。

* * *

最后一个选项是在所需的图像编辑器中简单地制作一个半透明的 .png 图像，然后将 background-image 属性设置为图像的 URL，然后您就不必担心搞砸了使用 CSS 并失去嵌套 div 结构的功能和组织。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-07-25T23:57:22.913

只需确保将前景的宽度和高度与背景相同，或者尝试设置顶部、底部、左侧和右侧属性。

```
<style>
    .foreground, .background {
        position: absolute;
    }
    .foreground {
        z-index: 1;
    }
    .background {
        background-image: url(your/image/here.jpg);
        opacity: 0.4;
    }
</style>

<div class="foreground"></div>
<div class="background"></div> 
```

# java - 扩展（向下滑动）JTable 行

> ID：10422951
> 
> 赞同：1
> 
> 时间：2012-05-02T23:05:16.510
> 
> 标签：java, swing, jtable, jpanel

我使用 jPanel 作为我的单元格，表格只有一列。它看起来像这样（[JTable: Buttons in Custom Panel in Cell](https://stackoverflow.com/questions/3606864/jtable-buttons-in-custom-panel-in-cell/3606915#3606915)）。

![](../Images/9668b20a75ec22a9762ed426fbedf5c6.png)

默认情况下，与行 (celll) 关联的面板包含创建日期。我想实现一个 ActionListere 方法，该方法将扩展（向下滑动）发生操作的 jpanel 以查看整个 jPanel 数据。

希望你明白我的意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:41:34.603

基本上，您想做与 JList.ensureIndexIsVisible(int) 相同的事情，但要使用表格。

组件有一个名为“scrollRectToVisible(Rectangle aRect)”的方法，它应该可以满足您的需要。

因此，使用您的 JTable，您可以获得 cellRect(int width, int height, boolean includeSpacing) 并将其传递给“scrollRectToVisible”

你将不得不做一些聪明的工作来找出动作的行，但我假设你正在使用一个表格单元格编辑器，它已经为你提供了这些信息

# ios - iOS5将蓝色单元格选择更改为自定义图像渐变而不进行子类化

> ID：10422954
> 
> 赞同：1
> 
> 时间：2012-05-02T23:05:22.520
> 
> 标签：ios, ios5, uikit

所以在一个`UITableViewCell`子类中这很好用：

```
- (void)awakeFromNib {
    [super awakeFromNib];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"table-highlight.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)]];
    imageView.contentMode = UIViewContentModeScaleToFill;
    self.selectedBackgroundView = imageView;
} 
```

但是，我有一个 tableView，它只使用没有子类的标准表格单元格。我已经尝试了在其他答案中找到的各种组合，但没有运气：

```
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"table-highlight.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)]];
    imageView.contentMode = UIViewContentModeScaleToFill;
    cell.selectedBackgroundView = imageView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:07:29.430

该死。发布此消息 30 秒后想到一件事。留下它以防它帮助别人。我的 imageView 上没有框架。工作代码：

```
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"table-highlight.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)]];
    imageView.frame = cell.frame;
    imageView.contentMode = UIViewContentModeScaleToFill;
    cell.selectedBackgroundView = imageView;
} 
```

# c# - Java中的数据绑定方法类似于WPF？

> ID：10422957
> 
> 赞同：1
> 
> 时间：2012-05-02T23:05:27.773
> 
> 标签：c#, java, .net

有没有一种方法或 IDE 可以像在 Visual Studio/Silverlight/WPF 中那样在 java 中轻松实现数据绑定？在 Java 中进行数据绑定的最佳方法是什么？使用休眠或什么？与 .Net 替代方案相比，在 Swing 和 Java 中构建 GUI 是否困难得多？虽然 Java 的跨平台优势也是一个重要因素，但在 silverlight/WPF 中编程似乎也比 Java 快得多。我还应该考虑什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:31:15.643

考虑使用 Eclipse RCP，它具有良好的数据绑定支持和完整的 GUI 环境。

# ruby-on-rails - 为什么在ActiveSupport::Callbacks时与回调同名的方法需要run_callbacks

> ID：10422958
> 
> 赞同：1
> 
> 时间：2012-05-02T23:05:27.883
> 
> 标签：ruby-on-rails, callback, activesupport

我已经制作了这个测试类来试验不在 AR 中的回调。但由于某种原因，我必须手动调用它们。在某种程度上，这似乎毫无意义。

```
 class TestClass
    include ActiveSupport::Callbacks

    define_callbacks :save

    set_callback :save, :before, :speak
    set_callback :save, :after, :bark

    def save
      puts 'saving...'
    end
    def other_it 
      run_callbacks :save do
        puts 'saving...'
      end
    end
    def speak
      puts "hi"
    end
    def bark
      puts "ruff"
    end

  end 
```

似乎我不必在 :save 方法中指定 run_callback 方法，但我显然必须这样做。我错过了什么？看到这个输出：

```
ruby-1.8.7-p352 :016 > t = TestClass.new
ruby-1.8.7-p352 :017 > t.save
saving...
 => nil 
ruby-1.8.7-p352 :018 > t.other_it
hi
saving...
ruff
 => nil 
```

保存回调不在保存方法中运行，除非我手动调用它们。

# javascript - 如何使用jquery将项目的动态列表水平滑入和滑出div

> ID：10422960
> 
> 赞同：2
> 
> 时间：2012-05-02T23:05:51.867
> 
> 标签：javascript, jquery, html, css

我使用 div 容器作为窗口，使用 jquery 将水平 li 项目列表滑入和滑出视图。

这是我到目前为止所拥有的：http: [//jsfiddle.net/TX5fJ/5/](http://jsfiddle.net/TX5fJ/5/)

它初始化一个包含 8 个项目的列表，并允许您在 div 窗口中左右滚动它们。它还具有将项目添加到列表末尾和从列表开头删除项目的功能。

我正在尝试做的事情：

1）将一个项目添加到列表的末尾（项目不可见）

2）向左滚动列表，使刚刚添加的项目可见（第一个项目移出视图）

3）从列表的头部删除项目（不再需要）

问题是删除第一项会导致整个列表向左移动。

如果我不删除第一个项目，它似乎可以工作。（见我的测试功能）

我对该解决方案的担忧是 ul 必须足够宽以容纳所有潜在项目。如果我不给它一个固定的宽度，它就不起作用。

所以我想我可以把它设为 99999px 宽，并在测试按钮中使用当前方法。

有人对当前更好的实施有想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T23:25:27.830

You could simply reset the margin-left property of your list after you have removed the list-item from the head:

```
function RemoveItem() {
    $('#slider-items li').first().remove();
    $('#slider-items').css('marginLeft', 0);
} 
```

Updated [fiddle](http://jsfiddle.net/dRGBH/).

# iphone - 从控制台构建时找不到头文件

> ID：10422961
> 
> 赞同：4
> 
> 时间：2012-05-02T23:05:58.137
> 
> 标签：iphone, objective-c, ios, restkit, xcodebuild

我有一个使用嵌套项目依赖项的项目，在我的例子中是[RestKit](http://restkit.org)。

## 在 Xcode 中

当我从 Xcode 中构建项目时，RestKit 也会被编译并将其头文件放在这里：

```
~/Library/Developer/Xcode/DerivedData/myproject-blrrqydtywxuereiowkehhhcbozj/Build/Headers 
```

相应地设置该`Header Search Path`值：

```
${TARGET_BUILD_DIR}/../../Headers 
```

## 从航站楼

但是，当我从终端构建我的项目时，标题会出现在此处：

```
~/MyProjectSourceFolder/RestKit/Build/Headers 
```

我在编译过程中遇到一个`RestKit`找不到的错误。

现在我如何`xcodebuild`使用相同的位置或相同的构建环境，以便我的构建也可以从控制台工作？非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T14:27:55.673

当我指定`-scheme = MyScheme`选项时，我的脚本可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:08:33.687

最简单的方法是设置您的首选项以使用旧版构建设置。转到 Preferences->Locations->advanced 并选择 legacy。这将强制它为 UI 和终端中的产品使用 Build director。

# scala - 我们如何在 Lift 片段中获取当前页面 URL？

> ID：10422965
> 
> 赞同：2
> 
> 时间：2012-05-02T23:06:12.507
> 
> 标签：scala, lift

我们如何在 Lift 片段中获取当前页面 URL？我试图弄清楚当前请求是否在 SSL（http 或 https）中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T23:55:55.997

您没有指定您正在使用的 Lift 的版本，但有几个选项。在最近的版本中，您可以使用[`CurrentReq`](http://scala-tools.org/mvnsites/liftweb-2.4/net/liftweb/http/CurrentReq$.html)：

```
import net.liftweb.http.CurrentReq

val secure = CurrentReq.value.request.scheme == "https" 
```

另一种选择是`S`'s`request`方法：

```
import net.liftweb.http.S

val secure = S.request.map(_.request.scheme == "https").openOr(false) 
```

您可以使用其他方法检索页面 URL 的其余部分[`HTTPRequest`](http://scala-tools.org/mvnsites/liftweb-2.4/net/liftweb/http/provider/HTTPRequest.html)。

# jquery - 如何使用 Javascript/jQuery 获取元素的框高？

> ID：10422969
> 
> 赞同：0
> 
> 时间：2012-05-02T23:06:25.107
> 
> 标签：jquery, height

我尝试使用 jQuery`.height()`函数来获取元素的高度，但它似乎忽略了填充和边距。

如何使用 Javascript 和/或 jQuery 获取元素框的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:08:32.193

使用外部高度

[http://api.jquery.com/outerHeight/](http://api.jquery.com/outerHeight/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T23:10:08.393

您是否能够在另一个 div 中使用填充/边距包装 div 并获取容器 div 的高度？

```
<div id="container">
 <div id="divWithPadding">
   content
 </div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T23:12:36.940

使用[externalHeight() 的示例；](http://api.jquery.com/outerWidth/)

[http://jsfiddle.net/HruqF/2/](http://jsfiddle.net/HruqF/2/)

# hibernate - 复合键上的 Grails 一对多映射 stalestaleexception

> ID：10422980
> 
> 赞同：5
> 
> 时间：2012-05-02T23:08:01.317
> 
> 标签：hibernate, grails, grails-orm

我使用 grails 2.0.0。我有三个对象 Member、Product 和 ProductType。成员有许多产品，并且是一对多的关系。Product 指向 ProductType（参考表）并且是多对一的关系。我的问题是关于删除产品。它适用于一种情况，而不适用于另一种情况。继续阅读。

以下映射的粗略轮廓：

**成员.groovy：**

```
class Member  {
   Long id
   ....
   SortedSet products
   static hasMany = [products:Product]
   static mapping = {
        table 'T_MEMBER'
        id column:'MEMBER_ID'...
       products cascade: "all-delete-orphan"
   }
} 
```

**产品.groovy：**

```
class Product {
   Long id
   ProductType productType
   ...
   static belongsTo = [member:Member]
   static mapping = {
        table 'T_PRODUCT'
        id column:'PRODUCT_ID'
        member column: 'MEMBER_ID'
        productType column: 'PRODUCT_TYPE'
        ...
   }
} 
```

**ProductType.groovy：**

```
class ProductType {
   Long id
   ..
   static mapping = {
        table 'T_PRODUCT_TYPE'
        id column:'PRODUCT_TYPE', generator:'assigned'
    ...
   }
} 
```

我得到了客户服务代码，其大纲是......

```
 if((newMember.products) && (newMember.products.size() >0)) {
        def addList = newMember.products - existingMember.products
        def removeList = existingMember.products- newMember.products
        removeList.each { product ->
            existingMember.removeFromProducts(product)
        }
        addList.each {product ->
            existingMember.addToProducts(product)
        }
    } 
```

到目前为止，一切都很好。这是完美的工作。但是，当我通过执行以下操作为 T_PRODUCT 表引入复合主键时：

```
 static mapping = {
        table 'T_PRODUCT'
        //id column:'PRODUCT_ID'
        id composite:['member', 'productType']
        member column: 'MEMBER_ID'
        productType column: 'PRODUCT_TYPE'
        ...
   } 
```

我明白了：

> org.hibernate.StaleStateException：批量更新批量更新从更新[0]返回了意外的行数；实际行数：0；预期：1 org.hibernate.StaleStateException：批量更新从更新 [0] 返回了意外的行数；实际行数：0；预期：1 在 ProductService.cleanUpGorm(ProductService.groovy:442) 在 ProductService.maintainProduct(ProductService.groovy:213) 在 ClientService$_maintainMembers_closure5.doCall(ClientService.groovy:158) 在 ClientService.maintainMembers(ClientService.groovy:152) 在ClientService.processMembers(ClientService.groovy:394)

知道我哪里可能出错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T12:12:29.683

Your Product domain class must implements `Serializable` and override methods `hashCode()` and `equals()`, this thing must be done in situations where you use composite key.

Your Product domain class must be like this

```
class Product implements Serializable {
        Long id
        ProductType productType
        ...

        static mapping = {
             table 'T_PRODUCT'
             id composite:['member', 'productType']
             member column: 'MEMBER_ID'
             productType column: 'PRODUCT_TYPE'
        }

        boolean equals(other) {
            if (!(other instanceof Product )) {
                return false
            }
            other.member== member && other.productType== productType
        }

        int hashCode() {
            def builder = new HashCodeBuilder()
            builder.append member
            builder.append productType
            builder.toHashCode()
        }

    } 
```

I think this way everything will be OK.

In case of problems write.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:16:00.987

我强烈推荐阅读[Grails 文档 5.5.2.5 Composite Primary Keys](http://grails.org/doc/latest/guide/single.html#compositePrimaryKeys)。他们确实指出了您不尊重的以下内容：

1.  使用复合主键映射的域类必须实现`Serializable`接口并覆盖`equals()`和`hashCode()`方法，使用复合键中的属性进行计算。
2.  您还需要注意使用复合主键是关联，尤其是映射的列名。
3.  可能是，在复合键中使用多对一映射类型并不是很好。

也许它可以帮助您找到正确的方向。

# f# - Converting OCaml to F#: Converting OCaml quotation add and quotation expander to F#

> ID：10422985
> 
> 赞同：4
> 
> 时间：2012-05-02T23:08:28.117
> 
> 标签：f#, ocaml

I am converting several modules based on OCaml to F# and ran into the OCaml ''Quotation.add'' compiler directive for a quotation expander.

> A quotation expander is a function written in OCaml. A call to the Camlp4 library function ''Quotation.add'' adds the quotation expander.

[Camlp4 - Tutorial, Ch. 3](http://caml.inria.fr/pub/docs/manual-camlp4/manual004.html)

After searching for both a quotation expander and the ''Quotation.add'' compiler directive in F# books, the F# site, Google and here, the answer I get is no.

Can someone confirm that F# does not support the concept of the OCaml ''Quotation.add'' compiler directive or the concept of OCaml quotation expanders.

EDIT

Note: I just learned that Camlp4 is a preprocessor-pretty-printer of OCaml, I thought it was a separate library for OCaml when I asked the question; now it makes sense.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T01:09:12.053

You're correct - the camlp4 library is not available for F#, so I'm afraid you'll need to use another approach to re-implement the required functionality in F#.

In general, there are a couple of related technologies that you can use from F# (but it is hard to tell if any of them is useful for you without knowing more about the specific problem):

*   [F# Quotations](http://msdn.microsoft.com/en-us/library/dd233212.aspx) allow you to manipulate F# code, but have limited compilation capabilities (are good i.e. for translating F# to SQL, JavaScript or perhaps GPU)
*   [F# CodeDom](http://fsharppowerpack.codeplex.com/) (from F# PowerPack) allows you to generate code and compile it using F# compiler, but you can either generate code as text or using .NET object-oriented style.
*   [T4 Templating](http://msdn.microsoft.com/en-us/library/bb126445.aspx) is a .NET templating mechanism, though last time I checked, it did not support F# (but I think the Mono version might work)
*   [F# Type Providers](http://msdn.microsoft.com/en-us/library/hh156509(v=vs.110).aspx) (thanks to kvb) make it possible to generate types by F# plugin for a compiler. This handles cases where you're using camplp4 to generate some types to be used later (i.e. from a shorter specification), but they have only limited use if you need to generate some code

# c# - 在本地范围之后“对象”会发生什么？

> ID：10422989
> 
> 赞同：0
> 
> 时间：2012-05-02T23:08:37.943
> 
> 标签：c#, garbage-collection

我很想知道 .NET 中的对象超出范围时会发生什么。像这样的东西：

```
class A
{
    ClassB myObjectB = new ClassB();
}
//what happens to object at this point here? 
```

记忆中发生了什么？当 GC 超出范围并在堆中释放它的引用时，是否会调用 GC？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T23:19:11.697

> 记忆中发生了什么？当 GC 超出范围并在堆中释放它的引用时，是否会调用 GC？

否 - 此时不会调用 GC。

发生的情况是该对象留在内存中，但现在“无根” - 基本上，没有任何其他对象对该对象的引用。因此，该对象现在*可以*进行垃圾回收了。

在未来的某个时候，GC 将运行。发生这种情况时，无根对象现在将有资格进行垃圾收集。根据持有对象的世代，它可能会或可能不会在那时被清理。最终，如果程序继续执行并且如果内存压力导致适当的代被收集，则该对象的内存将被回收。

没有明确的时间点会发生这种情况（除非您明确调用`GC.Collect`，这是一个坏主意）。但是，使用托管代码，您不必担心何时会发生这种情况。只需假设它会在适合您的特定应用程序时发生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T23:22:30.250

根据 pst 的评论，一个更好的例子可能是这样的：

```
void M() 
{ 
    ClassB myObjectB = new ClassB(); 
} 
//what happens to object at this point here? 
```

在这个例子中，`myObjectB`是一个局部变量而不是一个字段。那么，当局部变量超出范围时会发生什么？ **没有！作用域与 C# 中的对象生命周期无关。**

真正发生的是 JIT 编译器决定*在某个时候释放该对象。*如果变量不会在方法的其余部分中使用， 那可以*在变量的范围结束之前。*一旦不再引用该对象，正如其他答案也提到的那样，它就有*资格*被 GC 收集。直到 GC 运行（实际上，直到 GC 收集对象所在的代）才真正收集它。

正如 pst 所暗示的，一个字段是一个糟糕的例子，因为只要它的包含对象是可访问的，它总是可访问的，因此范围和对象生命周期之间的分离更大：

```
class A
{
    private object o = //whatever
}

void B()
{
    var a = new A();
    // here, the field o is not in scope, but the object it refers to is reachable and cannot be collected.
    GC.KeepAlive(a);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T23:20:08.627

我发现“超出范围”是一种更特定于 C++ 的思考方式，在给定范围的末尾，具有自动存储的对象被释放并调用其析构函数。

在 C# 世界中，没有“超出范围”。变量（读取：名称）存在于某个范围内，仅此而已。GC 真的不关心这个；一个对象可以在其名称范围结束之前甚至退出之前被收集，也可以在很久之后被收集，具体取决于引用它的内容以及 GC 何时决定收集是必要的。

然后应该将这两个概念分开并分别进行推理。作用域是关于名称的，而垃圾收集只关心对象的可达性。当一个对象不再可以从已知的根之一到达时，它将被安排进行收集。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T23:12:25.620

如果没有引用该对象，它最终会被 GC 收集。问题是，你无法准确预测它何时会发生。你只知道，它会发生。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T23:33:49.590

一般来说，垃圾收集发生在 3 个不同的代（0、1 或 2）。何时收集这些资源取决于操作系统需要多少资源。

调用 GC.Collect() 将收集所有可用资源，但可以定义要收集哪一代资源。

# php - 如何清除准备好进行 fwrite 的文本文件

> ID：10422990
> 
> 赞同：2
> 
> 时间：2012-05-02T23:08:47.573
> 
> 标签：php, fwrite

我有一个正在用 fwrite 写入的文本文件，我将如何删除这个文本文件的所有内容，以便我可以重新写入它。我试图找到另一个功能，但没有运气。

我正在使用的示例代码，我想在输入此信息之前将其清除：

```
$string = ', {"key": "'.$info['Name'].'", "value": "'.$info['Name'].'"}';
    $fp = fopen('data_old.txt', 'a');
    fwrite($fp, $string);
    fclose($fp); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T23:11:25.390

如果您查看 的 PHP 文档[`fopen`](http://php.net/manual/en/function.fopen.php)，您将在第二个参数中看到可用的“模式”列表。您正在传递`"a"`，这意味着追加。你想通过`"w"`这意味着“写”。

> **'a'** 只供书写；将文件指针放在文件末尾。如果该文件不存在，请尝试创建它。
> 
> **'w'** 只为书写而打开；将文件指针放在文件的开头并将文件截断为零长度。如果该文件不存在，请尝试创建它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T23:11:08.613

您可以在以下位置更改模式参数[`fopen`](http://php.net/manual/en/function.fopen.php)：

```
$fp = fopen('data_old.txt', 'w+'); 
```

顺便说一句，`w+`如果你也想从中读取，我使用它，因为你可以使用`w`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T23:11:57.150

使用 w 选项而不是 fopen 中的 a 选项。

像 fopen('file.txt','w');

这将指针放在文件的开头而不是结尾

[http://php.net/manual/en/function.fopen.php](http://php.net/manual/en/function.fopen.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T23:13:46.070

要覆盖现有文件，请使用 fopen 的只写模式，这将打开文件进行写入并将指向文件的开头设置并将文件截断为零长度：

```
$string = ', {"key": "'.$info['Name'].'", "value": "'.$info['Name'].'"}';
$fp = fopen('data_old.txt', 'w');
fwrite($fp, $string);
fclose($fp); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-28T10:36:13.780

你可以用另一种方式做到这一点

```
$file_destination = "./your_text_file_name.txt";
unlink($file_destination);
$your_data = "ABCabc";
$handle = fopen ($file_destination, "a+");
fputs($handle, $your_data);
fclose($handle); 
```

# wpf - 在 WPF 中创建 XPS - 使用的图像文件被锁定，直到我的应用退出

> ID：10422992
> 
> 赞同：4
> 
> 时间：2012-05-02T23:09:10.850
> 
> 标签：wpf, flowdocument, xps, file-locking

在我的 WPF 应用程序中，我`FlowDocument`通过将其 XAML 标记构建为字符串来创建一个，然后使用`XamlReader.Parse`将字符串转换为一个`FlowDocument`对象，然后将其保存到 XPS 文档文件中。有用。

我需要在我的文档中包含一个图像，因此为了实现这一点，我在 temp 目录中创建并保存图像作为临时文件，然后在我`FlowDocument`的 XAML 中使用绝对路径引用它。这也有效 - 在 XPS 文档创建过程中，图像实际上被嵌入到 XPS 文档中，这很棒。

**但问题是，我的应用程序会在此图像上保留文件锁定，直到应用程序退出。**

我正在清理所有资源。我生成的 XPS 文件没有文件锁定 - 只是图像文件。如果我注释掉创建 XPS 文件的代码部分，则图像文件不会被锁定。

我的代码（我在 .NET 4 CP 上）：

```
var xamlBuilder = new StringBuilder();

// many lines of code like this
xamlBuilder.Append(...);

// create and save image file
// THE IMAGE AT THE PATH imageFilePath IS GETTING LOCKED
// AFTER CREATING THE XPS FILE
var fileName = string.Concat(Guid.NewGuid().ToString(), ".png");
var imageFilePath = string.Format("{0}{1}", Path.GetTempPath(), fileName);
using (var stream = new FileStream(imageFilePath, FileMode.Create)) {
  var encoder = new PngBitmapEncoder();
  using (var ms = new MemoryStream(myBinaryImageData)) {
    encoder.Frames.Add(BitmapFrame.Create(ms));
    encoder.Save(stream);
  }
  stream.Close();
}

// add the image to the document by absolute path
xamlBuilder.AppendFormat("<Paragraph><Image Source=\"{0}\" ...", imageFilePath);

// more lines like this
xamlBuilder.Append(...);

// create a FlowDocument from the built string
var document = (FlowDocument) XamlReader.Parse(xamlBuilder.ToString());

// set document settings
document.PageWidth = ...;
...

// save to XPS file
// THE XPS FILE IS NOT LOCKED. IF I LEAVE OUT THIS CODE
// AND DO NOT CREATE THE XPS FILE, THEN THE IMAGE IS NOT LOCKED AT ALL
using (var xpsDocument = new XpsDocument(filePath, FileAccess.ReadWrite)) {
  var documentWriter = XpsDocument.CreateXpsDocumentWriter(xpsDocument);
  documentWriter.Write(((IDocumentPaginatorSource) document).DocumentPaginator);
  xpsDocument.Close();
} 
```

（实际上，它是临时目录中动态生成的图像这一事实无关紧要 - 如果我在机器上的任何图像文件的路径中硬编码，则会出现此问题 - 它会被锁定。）

有人会认为 XPS 创建代码中存在导致文件锁定的错误。

还有什么我可以尝试的吗？或者通过代码删除文件锁定的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:49:49.567

您可以像这样更改您的 xaml：

```
<Image>
    <Image.Source>
        <BitmapImage CacheOption="None" UriSource="your path" />
    </Image.Source>
</Image> 
```

为了能够使用该`CacheOption`参数，指定 Xaml Builder 应如何加载图像文件，因为默认值似乎对其保持锁定（似乎等待 GC 完成其工作）。

这是关于 SO 的一些相关问题：[如何确保 WPF 从内存中释放大的 BitmapSource？](https://stackoverflow.com/questions/1684489/how-do-you-make-sure-wpf-releases-large-bitmapsource-from-memory)

# wpf - 设置为 ICollectionView.Filter 的方法将类中的其他属性视为 null，即使它们不为 null

> ID：10422994
> 
> 赞同：0
> 
> 时间：2012-05-02T23:09:30.017
> 
> 标签：wpf, predicate, collectionviewsource, icollectionview, collectionview

我正在尝试在 WPF 中实现一个基本的过滤列表框。用户键入一些内容，列表缩小到以键入的短语开头的值。

我有：

*   一个**视图**：
    *   一个 TextBox，其 Text 属性绑定到`InstitutionFilteringString`ViewModel 类中的属性，该属性设置为数据上下文，
    *   一个 ListBox，其 ItemSource 属性绑定到视图模型中的一个`ICollectionView`命名`Institutions`
*   具有上述属性的**ViewModel类。**

代码（去掉了不相关的部分）：

```
class ChooseInstitiutionAndPublisherPageViewModel : WizardPageViewModelBase
{
    private ICollectionView _institutions;
    public ICollectionView Institutions
    {
        get
        {
            return _institutions;
        }
        set
        {
            _institutions = value;
            NotifyPropertyChanged("Institutions");
        }
    }

    private string _institutionFilteringString;
    public string InstitutionFilteringString
    {
        get
        {
            return _institutionFilteringString;
        }
        set
        {
            _institutionFilteringString = value;
            NotifyPropertyChanged("InstitutionFilteringString");
            //WORKAROUND
            //Institutions.Filter = new Predicate<object>(FilterInstitutions);
            Institutions.Refresh();
        }
    }

    public ChooseInstitiutionAndPublisherPageViewModel(WizardViewModel parent)
        : base(parent)
    {
        Institutions = CollectionViewSource.GetDefaultView(CentralRepository.Instance.GetInstitutions());
        Institutions.Filter = new Predicate<object>(FilterInstitutions);
    }

    private bool FilterInstitutions(object obj)
    {
        //I may refer directly to the field or through the property, it doesn't change anything
        if (_institutionFilteringString == null || _institutionFilteringString.Length == 0)
            return true;

        //some more filtering, irrelevant
        //[cut]
    }
} 
```

视图和绑定：

```
<TextBox Text="{Binding Path=InstitutionFilteringString, Mode=TwoWay}" Height="23" Margin="6,6,87,0" Name="institutionNameTextBox" VerticalAlignment="Top" TextChanged="institutionNameTextBox_TextChanged" />
<ListBox Margin="6,35" Name="institutionsListBox" ItemsSource="{Binding Path=Institutions}" IsSynchronizedWithCurrentItem="True" /> 
```

所以，说到点子上了。的设置器`InstitutionFilteringString`被正确调用。根据[此处](http://www.wpftutorial.net/dataviews.html)的建议，setter 调用集合视图上的 Refresh() 方法。该`FilterInstitutions()`方法被调用。

现在是错误：即使字符串是在一秒钟之前设置的，但在`FilterInstitutions`方法内部它是空的。如果我在调用堆栈中使用调试器，从设置器的角度来看，它仍然设置为类型化的值，但在过滤方法内部它是空的。

在 setter 中有一行注释掉的代码。取消注释它可以修复错误，但这几乎不是应该如何完成的。

我究竟做错了什么？

（我不确定，但在我看来，setter 和过滤方法似乎对类的两个不同实例进行操作。但怎么可能，我只创建一个实例，并且类不可克隆）

## 编辑

对不起，我好像撒谎了。我在构造函数中放置了一个断点，看来我确实创建了该类的两个实例并为两者`CollectionViewSource.GetDefaultView`返回相同的实例。`ICollectionView`好吧，但我实际上希望对同一个集合有两个视图。好吧，我已经遵循[了这个答案](https://stackoverflow.com/a/2163503/1371188)，它似乎有效:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:22:56.697

你创建你的机构一次吗？并设置

```
Institutions.Filter = new Predicate<object>(FilterInstitutions) 
```

一次？如果是，它可以:) 你可以发布你的代码以及 FilterInstitutions 方法的代码吗？我在我的项目中一直这样做并且没有问题。