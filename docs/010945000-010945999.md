# StackOverflow 问答 10945000-10945999

# php - Sendmail ZF2 空格从主题中删除

> ID：10945002
> 
> 赞同：0
> 
> 时间：2012-06-08T07:52:03.773
> 
> 标签：php, php-5.3, sendmail, zend-framework2

我刚刚为 Zend Framework 2 创建了一个邮件程序类。它使用了 Sendmail 类。

问题是我用多个单词设置了电子邮件的主题。在发送之前，我转储了主题，所有空格都可以。发送电子邮件后，我检查了我的 gmail，主题中的所有空格都被删除了。

当我运行脚本时，我得到“testemail”作为主题。

在我创建的课程的一部分下面：

```
public function addFile($p_sPath, $p_sMimetype, $p_sFilename){
    $rFile = fopen($p_sPath,'rb');
    $this->_m_oAttachment = new Mimepart(fread($rFile,filesize($p_sPath)));
    $this->_m_oAttachment->type = $p_sMimetype;
    $this->_m_oAttachment->filename = $p_sFilename;
    $this->_m_oAttachment->disposition = 'attachment';
    $this->_m_oAttachment->encoding = Mime::ENCODING_BASE64;
}

public function sendEmail()
{
    $aParts = (!is_null($this->_m_oAttachment)) 
            ? array($this->_m_oBodymessage, $this->_m_oAttachment) 
            : array($this->_m_oBodymessage);

    $this->_m_oBodypart->setParts($aParts);

    $this->_m_oMessage->setEncoding('utf-8')
                      ->setBody($this->_m_oBodypart)
                      ->addFrom($this->_fromAddress, $this->_fromName)
                      ->addReplyTo($this->_fromAddress, $this->_fromName)
                      ->setSubject($this->_subject);
                      // even here the spaces are still intact.
    $this->send($this->_m_oMessage);
}

$oMailer = $this->getLocator()->get('Core\Mailer');
$oMailer->setBodyHtml('mail/mail.phtml', array('aData' => $aData));
$oMailer->setSubject('test email');
$oMailer->setRecipient('jacob@myemail.com', 'jacob');
$oMailer->addFile(realpath(dirname(__file__). '/../../../../../'.$sPath.$sSubfolder.'/'.$sFilename), 'application/pdf', $aData['data']['eventID'].'_'.$aDeclaratie['data']['userID'].'.pdf');
$oMailer->sendEmail(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:53:19.910

Zend Framework 2 stable 解决了这个问题

[http://framework.zend.com/issues/browse/ZF2-258](http://framework.zend.com/issues/browse/ZF2-258)

# html - 对齐中心代码（错误的渲染输出？）在 MediaWiki 中不起作用

> ID：10945006
> 
> 赞同：2
> 
> 时间：2012-06-08T07:52:12.130
> 
> 标签：html, html-table, mediawiki

我注意到`<td align="center">`代码在 MediaWiki.org 页面和 en.wikipedia.org 页面上的工作方式不同。我在两个 wiki 上键入了相同的以下测试代码：

*   [http://www.mediawiki.org/wiki/User:Scottie33/sandbox](http://www.mediawiki.org/wiki/User:Scottie33/sandbox)
*   [http://en.wikipedia.org/wiki/User:Scottie33/sandbox](http://en.wikipedia.org/wiki/User:Scottie33/sandbox)

源（测试）代码：

```
<table border="1">
  <tr>
    <td align="center">
      test test test test test test

      test

      <table border="1"><tr><td>
      [[File:Information_icon.svg|20px]]
      </td></tr></table>

      test
    </td></tr>
</table> 
```

**为什么 MediaWiki.org 页面会产生以下（错误）代码：**

```
<td style="text-align: center;"> 
```

**而不是（预期的）这个：**

```
<td align="center"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T11:20:43.237

当`wgHtml5`启用（在 MediaWiki 软件中默认启用，但在大多数 Wikimedia Foundation wiki 上禁用，并且最近在 mediawiki.org 上启用）时，MediaWiki 中的 Html 处理器会去除诸如此类的表示属性，并将它们替换为粗略的等效内联样式属性。

该系统在诸如此类的场景中有一个错误（归档为[错误 #36495 (bugzilla.wikimedia.org) ），因为单独的 text-align 或 float 并不能涵盖所有这些。](https://bugzilla.wikimedia.org/show_bug.cgi?id=36495)

也可以看看：

*   [$wgHtml5](https://www.mediawiki.org/wiki/Manual:$wgHtml5)
*   [$wgCleanupPresentationalAttributes](https://www.mediawiki.org/wiki/Manual:$wgCleanupPresentationalAttributes)

但是问题的原因就这么多了。回到手头的问题，简短的版本是：这些属性已被弃用，你最好不要一开始就使用它们。

而是使用 CSS。或者，在这个特定的示例中（正如前面提到的 Bergi），还有一种更合适的替代方法：在语法中使用`|center|`关键字。`[[File:`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T08:54:07.633

wiki 似乎使用[$wgCleanupPresentationalAttributes](https://www.mediawiki.org/wiki/Manual%3a%24wgCleanupPresentationalAttributes)~~[的 HTML Tidy](http://www.mediawiki.org/wiki/Manual%3a%24wgUseTidy)~~值的不同配置运行，这将更正已弃用的样式 html 属性以支持 css。

然而，`align="center"`并`style="text-align:center"`没有表现出完全相同的行为。虽然 align 属性同时影响内联元素、块元素和 afaik 本身，但 css 属性仅对齐内联元素（文本）。要对齐块元素，您将使用边距属性。

正确的标记：

```
{| style="text-align:center; border:1px solid;"
| test test test test

test
<div style="margin-left:auto; margin-right:auto;">
[[File:Information icon.svg|20px]]
</div>
|} 
```

或者，更容易：

```
[[File:Information icon.svg|center|20px|border]] 
```

# java - 尝试 google 联系人 API 示例时出现 NoLongerAvailable 异常

> ID：10945010
> 
> 赞同：0
> 
> 时间：2012-06-08T07:52:46.950
> 
> 标签：java, api, contacts

我正在尝试从谷歌日历 API 开始。我从这个官方链接[Google Calendar API开始，并从这里](https://developers.google.com/google-apps/contacts/v3/#audience)[Google API Samples](http://code.google.com/p/gdata-java-client/downloads/list)下载了 java 示例代码。我试图运行它并出现异常：

由 ClassNotFoundException 引起的 .../util/NoLongerAvailableException 的 NoClassDefFoundError ： .../util/NoLongerAvailableException

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:55:26.087

`ClassNotFoundException`当 JVM 找不到类（在你的情况下`NoLongerAvailableException`）时抛出。确保`gdata-core-xx.yy.jar`在您的类路径或`WEB-INF/lib`包含`NoLongerAvailableException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:01:49.993

只需使用给出的 ant 脚本命令运行应用程序即可解决问题：

“ant -f build-samples.xml sample.xxxxx.run”

其中 xxxxxx 是示例名称（例如联系人或日历），您应该从 gdata/java 文件夹中运行此命令。

您还可以修改示例的 java 文件中的任何代码并重新运行脚本以检查更新。

谢谢你们。

# hibernate - 如何定义两个抽象类之间的多对一关系

> ID：10945014
> 
> 赞同：2
> 
> 时间：2012-06-08T07:53:31.147
> 
> 标签：hibernate

我有4个课程如下...

```
@MappedSuperclass
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)
public abstract class Platform{

    @Id
    @Column(name = "PLATFORM_ID")
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Integer platformId;

    ...

@Entity
@Table(name = "ANDROID_PLATFORM")
public class AndroidPlatform extends Platform{

    public AndroidPlatform(){

    }
    ...

@MappedSuperclass
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)
public abstract class Application{

    @Id
    @Column(name = "APPLICATION_ID")
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Integer applicationId;

    @ManyToOne(cascade = CascadeType.ALL)
    @JoinColumn(name="PLATFORM_ID")
    private Platform platform;

    ...

@Entity
@Table(name = "ANDROID_APPLICATION")
public class AndroidApplication extends Application {
    public AndroidApplication(){

    }
    ... 
```

当我开始我的项目时，它会引发这样的错误

```
org.hibernate.AnnotationException: @OneToOne or @ManyToOne on com.***.model.AndroidApplication.platform references an unknown entity: com.***.model.Platform
... 
```

我的课程有什么问题，或者在 hibernate 中使用抽象类的最佳方法是什么？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:27:14.250

在您的抽象类应用程序（以及通过继承 AndroidApplication）中，您正在使用`private Platform platform;`. Platform 是一个无法实例化的抽象类，它只有部分映射信息（缺少具体的表名）。

Hibernate 需要一个无参数的构造函数来实例化加载的实体。它还需要知道要使用哪个类（不是抽象类，而是实现类），并且它需要按成员变量类型的所有映射信息。

解决方案：你必须在Application或AndroidApplication中进行交换`private Platform platform`，`private AndroidPlatform platform`并且这个AndroidPlatform类型的变量必须有hibernate注解。

第二种解决方案：如果您绝对需要 Java 结构，那么您可以使用 xml 映射文件。您可以在每个子类中指定确切的类型，即使成员变量的 Java 类是该类型的超类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T22:14:38.967

尝试使用`@Entity`而不是`@MappedSuperClass`

# android - 通过 Google Drive SDK 列出 Google Drive 中的所有可用文件

> ID：10945019
> 
> 赞同：2
> 
> 时间：2012-06-08T07:53:59.320
> 
> 标签：android, google-docs-api, google-drive-api

以前，在桌面应用程序中，我使用 Google Document List API 列出 Google Drive 中的所有可用文件。

[http://jstock.hg.sourceforge.net/hgweb/jstock/jstock/file/808b03e824bf/src/org/yccheok/jstock/gui/Utils.java#l1188](http://jstock.hg.sourceforge.net/hgweb/jstock/jstock/file/808b03e824bf/src/org/yccheok/jstock/gui/Utils.java#l1188)

但是，Android 平台不支持 Google Document List API。为了让它在 Android 平台上工作，我需要使用 Google Drive SDK。

[https://developers.google.com/drive/v1/reference/files/get](https://developers.google.com/drive/v1/reference/files/get)

我没有看到 Google Drive SDK 提供这样的功能。那么，Android 开发者可以做些什么，来达到**列出 Google Drive 中所有可用文件的**目的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T22:29:50.367

请参阅@Nivco[对此帖子](https://stackoverflow.com/questions/10330053/google-drive-docs-api-for-android)的回答。

诚然，这不是一组很好的选择，但可能“HTTP REST API 加 XML 解析器”是您近期最好的选择......

# jquery - jQuery 验证计数日期

> ID：10945020
> 
> 赞同：2
> 
> 时间：2012-06-08T07:54:11.897
> 
> 标签：jquery, jquery-validate

我正在使用[这个](http://bassistance.de/jquery-plugins/jquery-plugin-validation/ "鼠标悬停时出现此文本")jQuery 表单验证插件，我遇到了一个困难，我有 3 个选择框 [Day] [Month] [Year]，它用于 dob，所以我需要计算的是 13 岁以上的用户，但我就是想不通怎么做，也许其他人也有类似的困难？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:47:10.763

我觉得你会搜索这个

```
 $("#id").validate({
   submitHandler: function (a) {
        var months;
        var d1=new Date($('#selectbox1').val(),$('#selectbox2').val()-1,$('#selectbox3').val()); // YYYY,MM,DD
        var d2= new Date();
        months = (d2.getFullYear() - d1.getFullYear()) * 12;
        months -= d1.getMonth() + 1;
        months += d2.getMonth();
        if((months/12)>13){
            /* write your coding here*/
        }else{
            alert('enter your message here');
        }
     },
     rules: {

    /* your rules*/

      }

}); 
```

# jquery - Jquery 内部 UL FadeIn / FadeOut

> ID：10945022
> 
> 赞同：0
> 
> 时间：2012-06-08T07:54:26.203
> 
> 标签：jquery, menu, fadein, fadeout

我正在尝试完成一件简单的事情。我有一个带有嵌套 UL 的 2 级菜单。内部 UL 设置为 display:none，因此仅显示主要类别。我想阻止主要类别上的默认 onclick 行为，并将它们各自的内部 UL 淡入一边。

我的html是这样的：

```
<nav id="type-navigation">
    <ul id="nav_categories" class="subs">
        <li><a href="#">Category 1</a>
                <ul>
                <li><a href="#">Link1</a></li>
                <li><a href="#">Link2</a></li>
                <li><a href="#">Link3</a></li>
                </ul>
        </li>
        <li><a href="#">Category 2</a>
                <ul>
                <li><a href="#">Link1</a></li>
                <li><a href="#">Link2</a></li>
                <li><a href="#">Link3</a></li>
                </ul>
        </li>
</ul>
</nav> 
```

我想使用 Jquery 来做到这一点。当我单击第一个类别时，其子 UL 应与 FadeIn 一起显示在一边。当我点击另一个类别时，之前显示的 UL 应该 FadeOut 而其他类别 UL 应该 FadeIn。

这是我的 Jquery，它没有按预期工作：

```
$("ul li a").toggle(function() { 
                  $(this).children("ul").fadeIn("slow");
                  },
                   function() { 
                 $(this).children("ul").fadeOut("slow"); 
                }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:17:43.813

试试[这个例子](http://jsfiddle.net/f6Xy6/)。

来自示例的 CSS：

```
nav > ul > li > ul {
 display:none;   
}​ 
```

来自示例的 jQuery：

```
$( 'ul#nav_categories > li > a' ).click( function(e) {
    e.preventDefault();
    theClickedLi = $( this );
    $( '#nav_categories' ).find( 'ul' ).fadeOut();
    theClickedLi.parent('li').find( 'ul' ).fadeIn();
} ); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T08:11:44.050

假设你`<ul>`旁边的你`<a>`用 css 隐藏`display:none`：

```
$(".subs > li > a").click(function() {
    $(this).parents('.subs').find('ul').hide();
    if($(this).next("ul").is(":visible")) {
            $(this).next("ul").fadeOut("slow");
    }    else {
        $(this).next("ul").fadeIn("slow");
    }
    return false;
}); 
```

# oracle - 将 Oracle Webcenter Interaction 与 Oracle Webcenter Spaces 集成

> ID：10945023
> 
> 赞同：1
> 
> 时间：2012-06-08T07:54:31.483
> 
> 标签：oracle, webcenter, plumtree

这是我在 Oracle OTN 论坛上发布的一个问题的重新发布，但尚未得到答复 - 我想这不是好兆头 - 但我想我会在这里尝试。

我想知道是否有人尝试将 Webcenter 协作（即以前的 Plumtree/BEA Aqualogic 协作工具）与 Webcenter Spaces 集成？

提供一些背景知识，我计划将 Plumtree 安装迁移到 Webcenter Spaces，但我的初步调查工作表明，Spaces 中的日记和列表功能没有当前用户群强调的一些关键要求，因为开箱即用的功能，例如甘特图视图、子任务、定期日记事件、项目的组合社区视图等。

我的想法是 Spaces 可以使用通过协作作为 portlet 提供的服务，并以与 WCI 相同的方式直接链接到项目浏览器 - 如此有效地只是替换前端？

无论如何，我自己和我的同事将进一步调查，但如果有人在这方面有经验，任何意见将不胜感激。

谢谢。

# java - 为什么组件扫描不获取我的@Configuration？

> ID：10945026
> 
> 赞同：3
> 
> 时间：2012-06-08T07:54:42.457
> 
> 标签：java, spring, configuration, annotations

我有一个配置文件

```
package com.mypackage.referencedata.config;

@Configuration
@ComponentScan ("com.mypackage.referencedata.*")
public class ReferenceDataConfig { 
```

如果我有，在 spring xml 中

```
<context:component-scan base-package="com.mypackage.referencedata.config.*" /> 
```

它没有被加载。

如果我使用

```
<context:component-scan base-package="com.mypackage.referencedata.*" /> 
```

有用。

是什么赋予了？我希望第一个也能正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T07:59:43.770

```
<context:component-scan base-package="com.mypackage.referencedata.config.*" /> 
```

将扫描里面的包裹，`com.mypackage.referencedata.config`因为它是包裹。

```
com.mypackage.referencedata.config 
```

会正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T08:32:05.643

您不需要在 SpringFramework 的组件扫描中扫描 @Configuration 类。但是您需要在 Web 应用程序的 Application Initializer 类中注册它，该类定义了 web.xml 文件中所需的配置。您需要在那里实现 WebApplicationInitializer 接口并定义 onStartup 方法。

在该 onStartup 方法中，您需要将 @Configuration 类注册到 Web 应用程序的 rootContext。请看下面的代码片段。

**1.作为web.xml工作的类**

```
public class ApplicationInitializer implements WebApplicationInitializer {

    //Called first when the application starts loading.
    public void onStartup(ServletContext servletContext)
            throws ServletException {
        System.out.println("Inside application initializer...");

        //Registering the class that incorporates the annotated DispatcherServlet configuration of spring
        AnnotationConfigWebApplicationContext rootContext = new AnnotationConfigWebApplicationContext();
        rootContext.register(DispatcherConfig.class);

        //Adding the listener for the rootContext
        servletContext.addListener(new ContextLoaderListener(rootContext));

        //Registering the dispatcher servlet mappings.
        ServletRegistration.Dynamic dispatcher = servletContext.addServlet("dispatcher", new DispatcherServlet(rootContext));
        dispatcher.setLoadOnStartup(1);
        dispatcher.addMapping("/");
    }

} 
```

**2\. Web 应用程序的@Configuration 类包含bean 和其他设置。**

```
@EnableWebMvc
@Configuration
@ComponentScan(basePackages={"com.abcprocure.servicerepo.controller", "com.abcprocure.servicerepo.model", "com.abcprocure.servicerepo.service"})
public class DispatcherConfig extends WebMvcConfigurerAdapter {

    //Registers the url paths for resources to skip from spring. Eg. JS, CSS and images.
    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        // TODO Auto-generated method stub
        registry.addResourceHandler("/js/**").addResourceLocations("/js/**");
        registry.addResourceHandler("/html/**").addResourceLocations("/html/**");
    }

    //Defines the ViewResolver that Spring will use to render the views.
    @Bean
    public ViewResolver viewResolver() {
        System.out.println("Inside View Resolver...");
        InternalResourceViewResolver viewResolver = new InternalResourceViewResolver();
        viewResolver.setViewClass(JstlView.class);
        viewResolver.setPrefix("/WEB-INF/views/");
        viewResolver.setSuffix(".jsp");

        return viewResolver;
    }

    //Defines the DataSource to use in the application.
    @Bean
    public DataSource dataSource() {
        System.out.println("Inside DataSource bean creation....");
        BasicDataSource dataSource = new BasicDataSource();
        dataSource.setDriverClassName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        dataSource.setUrl("jdbc:sqlserver://192.168.100.131;databaseName=test");
        dataSource.setUsername("egptender");
        dataSource.setPassword("egp#123");
        return dataSource;
    }

    //Defines the Hibernate's SessionFactory.
    @Bean
    public SessionFactory sessionFactory() {
        LocalSessionFactoryBuilder builder = new LocalSessionFactoryBuilder(dataSource()).addAnnotatedClasses(Services.class, Operations.class, OperationParameters.class, ServiceModels.class, Businesslogic.class,TblFormMaster.class,TblFormBuilder.class);
        builder.setProperty("hibernate.dialect", "org.hibernate.dialect.SQLServerDialect");
        builder.setProperty("hibernate.show_sql", "true");
        return builder.buildSessionFactory();
    }
} 
```

希望这对您有所帮助。干杯。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-10-02T08:09:00.587

如果您使用的是 maven，请检查您是否具有正确的依赖项

# c# - 如何避免 RowDefinition 重复？

> ID：10945031
> 
> 赞同：3
> 
> 时间：2012-06-08T07:54:59.317
> 
> 标签：c#, wpf

我有 15-20 行，其中一些是不同的，但大多数是相似的：

```
 <RowDefinition Height="Auto" /> 
```

而且我想避免代码重复，因为它大约有 10 行，一一对应。怎么做到呢？

它可以在没有 XAML 的代码中完成，但我认为解决这个问题的方法是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:52:49.783

我认为不可能以某种方式简写网格行的声明，尤其是当并非所有网格行的 Height 属性都设置为“Auto”时。您可以尝试使用附加的依赖属性，如此[处所示](http://blog.xyzzer.me/2011/04/19/using-attached-properties-to-style-rowdefinitions-of-a-grid-in-wpf/)。

请注意，此示例指定了网格行数，您可以看到它以编程方式设置每行的 Height 属性。您可能必须以更复杂的方式决定为每一行分配什么高度。尽管这种解决方案在 XAML 中可能被证明更美观，但实现起来可能更复杂，并且您可能很难为每一行分配正确的高度。就个人而言，只声明每一行似乎更容易，因为 Visual Studio 将允许折叠标签和一个漂亮、清晰的方面。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:12:09.353

我之前通过编写一个类来解决这个问题，该类提供一个附加属性来根据一个简单的逗号分隔列表自动定义行和列。您基本上需要做的是创建一个附加属性（我调用它`AutoRows`并为属性更改的元数据定义一个方法。该方法解析值并简单地创建新`RowDefinition`元素。

我使用了一个简单的语法，其中逗号分隔列表中的每个值都等于一行。所以`20,20,20`会创建 3 行的高度`20`。为了允许具有高度的行`auto`并节省空间，我添加了一种新格式来在一个块中定义多个自动行。例如`20,~5,20`定义一个带有 height 的行`20`，然后是 5 个自动行，最后是另一个带有 height 的行`20`。

我的变更处理程序基本上是这样做的：

```
public static void AutoRowsChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
{
    RowDefinitionCollection rows = ((Grid)obj).RowDefinitions;
    rows.Clear();

    foreach (string segment in ((string)e.NewValue).Split(','))
    {
        if (segment.StartsWith("~"))
        {
            int count;
            if (!int.TryParse(segment.Substring(1), out count))
                count = 1;

            for (int i = 0; i < count; i++)
                rows.Add(new RowDefinition() { Height = GridLength.Auto });
        }
        else
        {
            GridLengthConverter converter = new GridLengthConverter();
            rows.Add(new RowDefinition() { Height = (GridLength)converter.ConvertFromString(segment) });
        }
    }
} 
```

我遗漏了几行以确保它被正确解析并且没有任何错误。如您所见，我使用`GridLengthConverter`使每个非自动值都接受法线`RowDefinition`支持的任何值。因此，您可以通过逗号轻松连接所有行高，并将其用作附加属性的值。

# axapta - ax查询和选择有什么区别

> ID：10945034
> 
> 赞同：2
> 
> 时间：2012-06-08T07:55:18.000
> 
> 标签：axapta, x++, ax, dynamics-ax-2012

我正在寻找[ax](http://msdn.microsoft.com/en-us/library/aa893981%28v=ax.10%29.aspx) **query**和**select**（或**while select**）之间的区别

我想我误解了 ax 查询范围的语法:'(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T09:26:10.037

(while) select 是一个“一次性使用”语句，即，您将其内联在代码中，并且仅在此处使用。

可以将查询设置为需要参数，并且可以在整个班级中多次使用，也可以保存到 AOT 中以供任何班级使用。

通常，我只将 select 语句用于不值得努力创建查询的简单查询，对于更复杂的查询，我使用查询。

# facebook - 由于令牌无效，无法发布到 Facebook 页面

> ID：10945035
> 
> 赞同：0
> 
> 时间：2012-06-08T07:55:18.510
> 
> 标签：facebook, facebook-graph-api, publishing

我在发布到 Facebook 页面时遇到错误“错误使访问令牌无效：会话与当前存储的会话不匹配。” 我也没有更改密码。

我已经从我的 facebook 帐户中删除了该应用程序，然后重新安装它，但仍然是相同的消息。一件奇怪的事情是我可以在墙上发帖，但不能在页面上发帖。

有人也面临这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:08:24.000

我认为页面和访问令牌存在一些问题 - 我报告了错误 - [http://developers.facebook.com/bugs/368315619896504](http://developers.facebook.com/bugs/368315619896504) - 如果您正在处理多个页面（或正在开发），则通过该过程将使来自同一应用程序的任何其他页面令牌无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:35:29.857

您的令牌应该具有 manage_pages 和 publish_stream 权限。然后您必须使用 userid/accounts 查询页面令牌。

在那里，您会获得用户拥有发布权限的页面列表。

要在页面上发布，您应该使用从帐户路径获得的令牌。

# .htaccess - .htaccess 不匹配

> ID：10945036
> 
> 赞同：1
> 
> 时间：2012-06-08T07:55:21.750
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, get, apache2

htaccess 不匹配

```
RewriteCond     %{REQUEST_URI}           ^/catalog/products_in_scene.php?(.*)$
RewriteRule     ^(.+)                    "/services/hpv/index.php?%1"

RewriteCond     %{REQUEST_URI}           ^/shop/derivation_tree.php?(.*)$
RewriteRule     ^(.+)                    "/services/dt/index.php?%1" 
```

第一个与所有 GET 变量匹配良好，第二个匹配并将我发送到正确的页面，但从不发送 GET 变量；为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:24:14.697

你最好使用`[QSA]`标志：

```
RewriteRule ^/shop/derivation_tree.php  /services/dt/index.php [QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:42:41.080

从您的 RewriteRule 中删除引号。

如果它不起作用，则意味着您的 php GET 变量有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T19:14:58.970

将您的代码更改为：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^catalog/products_in_scene\.php$ services/hpv/index.php [R,L,NC]

RewriteRule ^shop/derivation_tree\.php$ services/dt/index.php [R,L,NC] 
```

# css - 使用 div 的 2 行和 2 合并行的高度

> ID：10945039
> 
> 赞同：1
> 
> 时间：2012-06-08T07:55:29.657
> 
> 标签：css, html, row-height

基本上我想使用 DIV 来实现这一点：

```
---------------
|one   |       |
|------| three |
|two   |       |
---------------- 
```

其中“三”的高度与“一”和“二”的高度匹配。

我的代码：

```
<div class="detail-main">
    <div class="detail-leftcol">
        <div class="detail-one">
            This is One         
                       </div>
        <div class="detail-two">
            This is Two
        </div>
    </div>
    <div class="detail-three">
        This is Three
    </div>
</div> 
```

CSS：

```
div.detail-main    {
     position:relative;
     width:500px;
}

div.detail-leftcol
{    
    float:left;    
    width:250px;
}

div.detail-one    {
    border: thin solid;
    margin-bottom:2.5px;
}

div.detail-two    {
    border: thin solid;
    margin-bottom:2.5px;
}

div.detail-three    {
    border: thin solid;
    float:right;
    width:245px;
    margin-left:2.5px;
} 
```

我得到的结果是这样的：

```
|-----------------|
|One     | Three  |
|------------------
|Two     |
---------- 
```

应该将什么更改为“三”以符合“一”和“二”的高度？

帮助会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:03:35.880

你可以这样写：

**HTML**

```
<div class="left">
    <div class="one">one</div>
    <div class="two">two</div>
</div>
<div class="three">one</div> 
```

**CSS**

```
.left, .three{
    display:table-cell;
    width:100px;
}
.three{background:red;}
.left > div{
    height:100px;
    background:green;
}
.left .two{background:blue} 
```

检查这个[http://jsfiddle.net/suNUK/4/](http://jsfiddle.net/suNUK/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T08:12:42.720

在不更改标记的情况下，您可以像这样使用 jQuery：

```
var detail1Height = $(".detail-one").outerHeight();
var detail2Height = $(".detail-two").outerHeight();

$(".detail-three").height(detail1Height + detail2Height + 1); 
```

这是一个演示：http: [//jsfiddle.net/rniestroj/M4tpx/](http://jsfiddle.net/rniestroj/M4tpx/)

# c# - 每个模型请求的数据库往返？

> ID：10945044
> 
> 赞同：3
> 
> 时间：2012-06-08T07:55:44.593
> 
> 标签：c#, asp.net-mvc-3, entity-framework, orm

这是我在控制器中的代码

```
var q = context.post;
return View(q); 
```

在视野中

```
@model IEnumerable<post>
@{
  Line1:  var question = Model.FirstOrDefault(o => o.parent == null);
  Line2:  var answers = Model.Where(o => o.parent != null);
} 
```

我已经检查了 sql-profiler ，每个**line1**和**line2**实体都将 sql-command 发送到 database 。这真的是使用ORM的意义和目的吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T08:10:22.540

在你的情况下是的。您将 set 传递给 context 并且您正在对该 set 执行查询。我什至希望这两个查询都从数据库中提取所有帖子并在您的应用程序内存中执行 Linq 查询，因为转换为`IEnumerable<post>`您的视图定义的。如果您只想对数据库执行单个查询，则必须将加载的对象传递给您的视图，例如：

```
var q = context.post.ToList(); 
```

但是最好创建一个新的视图模型并在控制器中执行两个单独的查询 - 视图应该被转储并且它不应该包含任何额外的逻辑：

```
var postModel = new PostViewModel {
                    Question = context.post.FirstOrDefault(o => o.parent == null),
                    Answers = cotnext.post.Where(o => o.parent != null).ToList()
                };
return View(postModel); 
```

**编辑：**

当我正在查看这些查询时，甚至应该可以在一次往返数据库中使用它们来执行它们`Concat`- 例如：

```
var result = context.post.Where(o => o.parent != null)
                    .Concat(context.post.Where(o => o.parent == null)
                                        .OrderBy(...).Take(1))
                    .ToList();
var postModel = new PostViewModel {
                    Question = result.FirstOrDefault(o => o.parent == null),
                    Answers = result.Where(o => o.parent != null).ToList()
                }; 
```

它没有经过测试，但你可以试一试。

# android - Adview 获取的广告 URL

> ID：10945046
> 
> 赞同：3
> 
> 时间：2012-06-08T07:55:52.043
> 
> 标签：android, adview

我想捕捉 Adview 显示的图像，即实际的广告。我不想截图。只有实际的图像本身。如果这是不可能的，有没有办法捕获图像的 URL，以便我可以单独获取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:27:43.853

这很可能违反了您的广告网络的服务条款，因此您不应该这样做。除非他们为它公开一个公共 API，这是极不可能的。

# php - ajax 不会在后台加载我的 php 文件

> ID：10945053
> 
> 赞同：0
> 
> 时间：2012-06-08T07:56:40.207
> 
> 标签：php, ajax

我的ajax调用有问题。我正在通过 php 向 mySQL 提交一些信息，提交部分运行良好，它正在将数据添加到数据库中，但是 ajax 函数没有在后台加载该 php，而是在窗口中加载它并显示 php 文件结果。

这是HTML代码。

```
<form action="upload.php" class="addItem" method="post">
      Firstname:<br><input type="text" class="firstname" name="firstname" /><br>
      Lastname:<br><input type="text" class="lastname" name="lastname" /><br>
      Age:<br><input type="text" class="age" name="age" /><br>
      Photo:<br><input type="file" name="image" accept="image/jpeg" /><br><br>
      <input type="submit" class="submitItem" value="Add Row" />
  </form>
  <a href="logout.php">Logout</a>
  </div>

  <script>
  $(document).ready(function(){
    $(".submitItem").click(function(){
    // Start AJAX send
      jQuery.ajax({
        // Enter below the full path to your "send" php file
        url: "upload.php",
        type: "POST",   
        data: data,
        cache: false,
        success: function (html) {
          // If form submission is successful
          if ( html == 1 ) {
            $('.successMessage').show(200);
            $('.successMessage').delay(2000).hide();
          }
          // Double check if maths question is correct
          else {
            $('.errorMessage').show(200);
            $('.errorMessage').delay(2000).hide();
          }
        }
      });
      });
    });

  </script> 
```

这是PHP代码

```
<?php

$name = $_POST['firstname'];
$surname = $_POST['lastname'];
$age = $_POST['age'];

if(($name === "") || ($surname === "") || ($age === "")){
    echo "please fill in all fields";
} else {
    $con = mysql_connect("localhost","user","password");
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }

    mysql_select_db("my_db", $con);

    $sql="INSERT INTO Persons (FirstName, LastName, Age)
    VALUES
    ('$_POST[firstname]','$_POST[lastname]','$_POST[age]')";

    if (!mysql_query($sql,$con))
      {
      die('Error: ' . mysql_error());
      }

    if ($sql) { echo "1"; }
    else{echo "error";}
    }

    mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:58:16.297

您的处理程序需要`return false;`指示浏览器不要执行其常规提交操作。

（另外，你真的应该考虑使用`submit`表单的事件，而不是`click`按钮的事件。）

```
<script type="text/javascript">
$(function(){
  $("form.addItem").submit(function(){
    // Start AJAX send
    jQuery.ajax({
      // ... your parameters ...
    });
    return false;     
  });
});
</script> 
```

# android - 移动文本和重绘图像设备问题

> ID：10945056
> 
> 赞同：5
> 
> 时间：2012-06-08T07:56:52.133
> 
> 标签：android, android-image

我想要的是，用手指触摸图像来移动文本，单击按钮将现有图像重绘为新图像，就像粘贴在其上的文本一样。

它适用于 v3.1 以及模拟器。但我尝试在 v2.2 设备上进行测试，它发生了关闭。虽然它对设备有所有支持。你能帮我离开这里吗？几周后它会很重要。提前致谢。

```
///Redrawing the image & touchin Move of the Canvas with text
public void redrawImage(String path,float sizeValue,String textValue,int colorValue) {
        BitmapFactory.Options options = new BitmapFactory.Options();
        try {
             options.inMutable = true;
        } catch (Exception e) {
             // TODO: handle exception
             System.out.println("#############Error is======"+e.getMessage());
        }

        Bitmap bm = BitmapFactory.decodeFile(path,options);

        proxy = Bitmap.createBitmap(bm.getWidth(), bm.getHeight(), Config.ARGB_8888);
        Canvas c = new Canvas(proxy);

        //Here, we draw the background image.
        c.drawBitmap(bm, new Matrix(), null);

        Paint paint = new Paint();
        paint.setColor(colorValue); // Text Color
        paint.setStrokeWidth(30); // Text Size
        paint.setTextSize(sizeValue);

        System.out.println("Values passing=========="+someGlobalXvariable+",   "+someGlobalYvariable+",   "
                                      +sizeValue+",   "+textValue);

        //Here, we draw the text where the user last touched.
        c.drawText(textValue, someGlobalXvariable, someGlobalYvariable, paint);

        popImgae.setImageBitmap(proxy);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T16:22:53.580

知道何时发生强制关闭会有所帮助，例如在应用程序启动后，一旦您在文本绘制之前触摸？

**在设备上调试**
一个非常简单且完全可靠的技术是在实际设备上以调试模式运行代码。在函数的开头添加一个断点并遍历每一行，直到它强制关闭。

**可能 OOM**
如果您重复调用 redrawImage，就像触摸期间的每一帧一样，那么分配新的位图可能会很快消耗大量内存并导致崩溃：

```
Bitmap bm = BitmapFactory.decodeFile(path,options); 
```

然后强制关闭可能会在一段时间后发生。尝试将 bm 更改为从文件中分配和读取一次的方法参数或成员字段。

# java - BigInteger如何计算（ae + r）mod q？

> ID：10945058
> 
> 赞同：0
> 
> 时间：2012-06-08T07:57:04.573
> 
> 标签：java, biginteger

我正在实施 Schnorr 识别协议。我有一个来自“应用密码学手册”示例 10.37 的示例。没有一件事，一切都有效。

```
(p = 48731, q = 433, B = 11444) - public params.
v = 7355 - public Key.
a = 357 - privateKey.
t = 8 - identification certanity, 
```

协议操作

```
A choses r = 274 and sends to B x = B^r mod p = 37123.
B sends to A e ( 1 <=e <= 2^t), e = 129.
A sends to B y = (ae + r) mod q. - this doesn't work. should be 255.
B comutes z = ((B^y)(V^e)) mod p. if z == x then identity is ok. 
```

所以，我对 (ae + r) mod q 有问题，应该是 255，我有 429。代码：

```
BigInteger ae = a.multiply(e);
ae = ae.mod(q);
y = ae.add(r);      
y = y.mod(q); 
```

结果 y = 429 如果我计算

```
BigInteger ae = a.multiply(e); 
y = ae.add(r);      
y = y.mod(q); 
```

结果是一样的。

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:29:33.250

`q=433`不正确，应该是 的除数`p-1`。正确值为 443。

# magento - 如何获得特定产品的浏览量/点击量

> ID：10945067
> 
> 赞同：2
> 
> 时间：2012-06-08T07:57:59.690
> 
> 标签：magento, click, views, product, impressions

正如标题所示，我如何在 Magento 中获取特定产品的查看次数/点击次数/印象数。欢迎任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T08:27:11.810

这个简单的示例将为您提供在您指定的日期之间查看过的产品列表 + 他们的查看次数：

```
$fromDate = '2010-01-01';
$toDate   = now();

$viewedProducts = Mage::getResourceModel('reports/product_collection')
                ->addViewsCount($fromDate, $toDate);

foreach($viewedProducts as $product) {
    echo "ID: " . $product->getData('entity_id') . " - View Count: " . $product->getData('views') . "<br/>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-01T19:52:52.550

它帮助了我，仅获得一种产品的浏览量。

```
$resource = Mage::getResourceModel('reports/event');

$select = $resource->getReadConnection()->select()
    ->from(array('ev' => $resource->getMainTable()), array(
        'product_id' => 'object_id',
        'view_count' => new Zend_Db_Expr('COUNT(*)')
     ))
     ->join(
          array('et' => $resource->getTable('reports/event_type')),
                "ev.event_type_id=et.event_type_id AND et.event_name='catalog_product_view'",'')
     ->group('ev.object_id')
     ->where('ev.object_id IN(?)', [$entity_id])
     ->where('ev.logged_at >= ?', $from)
     ->where('ev.logged_at <= ?', $to);
$views = $resource->getReadConnection()->fetchPairs($select);
$views = !empty($views[$entity_id]) ? $views[$entity_id] : 0; 
```

# c++ - NRVO 案例中 const 返回类型的相关性

> ID：10945068
> 
> 赞同：3
> 
> 时间：2012-06-08T07:58:14.447
> 
> 标签：c++

[这是Calling constructor in return statement](https://stackoverflow.com/questions/10941730/calling-constructor-in-return-statement)的后续问题。

这是一个类中的运算符重载乐趣。

```
const Integer operator+(const Integer& IntObject)
{
    cout << "Data : " << this->data << endl;
    return Integer(this->data + IntObject.data); 
} 
```

const 在此类函数的返回类型中的相关性是什么？

```
int main()
{
    Integer A(1); //Create 2 object of class Integer

    Integer B(2);

    const Integer C = A + B;  //This will work

    Integer D = A + B;        //This will also work

    fun(A + B);               //Will work
}

void fun(Integer F) {} 
```

这是由于 NRVO 在返回步骤期间未创建临时对象的情况。要返回的对象是直接在被调用者的地址上构造的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T08:03:53.113

这是一个更好的例子：

```
struct Foo
{
    void gizmo();
    Foo const operator+(Foo const & rhs);
}; 
```

现在，如果您有`Foo x; Foo y;`，那么您*不能*说：

```
(x + y).gizmo();  // error! 
```

常量返回值意味着您不能将其用于非常量操作。对于原始类型，这不太相关，因为您可以在临时对象上执行的非常量操作并不多，因为临时对象上`++`不允许有很多“有趣的”操作（如 prefix- ）。

也就是说，对于 C++11，人们应该真正尝试采用永不返回常量值的新习惯，因为非常量值现在可以进行移动优化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T08:05:41.273

有些人曾经建议这样做，以防止写诸如`A + B = C`. 但是，在 C++11 中，它可以防止一些优化，因为它使返回值不可移动。因此，您不应该这样做。

在这种情况下，它还会阻止您编写完全有效的代码，例如`D = A + B + C`，但这只是因为作者忘记声明 operator `const`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T08:02:09.493

您的代码片段没有相关性，因为您正在制作返回值的**副本**。

通常，很难找到返回`const`值的充分理由。我只能看到它在这种类型的表达式中产生影响，试图在`const`临时上调用非常量方法：

```
(someObject.someMethodReturningConstValue()).someNonConstMethod(); // error, calls non const method on const temporary 
```

因此，仅当您想禁止在临时对象上调用非常量方法时才应使用它。另一方面，它杀死了 C++11 中的移动语义，因此不鼓励使用。

# c - 如何避免在特定情况下忙循环

> ID：10945072
> 
> 赞同：2
> 
> 时间：2012-06-08T07:59:00.297
> 
> 标签：c, linux, networking

我有一个问题，我真的不知道如何解决。我有一个多路复用多个连接的程序。这些连接同时接收流数据。我必须配置非阻塞套接字，因为流具有不同的比特率。现在我实际上所做的是将这些套接字保存在一个数组中，循环遍历它们，并使用 select 检测是否有数据要读取，如果没有则继续处理数组中的下一个元素。它工作得很好，除了 CPU 总是 100% 的事实。实际上，如果在某个时候没有任何内容可以从任何套接字读取，它仍然会循环。我真的不知道如何在任何套接字上没有可用数据时阻塞循环，并在有数据时继续运行。我认为这可能是解决方案，但我真的不知道我该怎么做。

我非常感谢你。

PS.：仅供参考，我仍在学习，所以即使解决方案可能很明显，也请不要怪我。

* * *

编辑：

这是一些伪代码：

当录制请求进来时，我创建一个新连接并连接到流地址。如果成功，我使用以下函数构建我的 fdset：

```
build_fdset()
{
    int ii;
    /* */
    FD_ZERO(&fdset);
    /* */
    for (ii = 0; ii < max; ii++)
    {
        if (astRecorder[ii].bUsed != FALSE && astRecorder[ii].socket != INVALID_SOCKET)
        {
            FD_SET(astRecorder[ii].socket,&fdset);
            /* */
            if (astRecorder[ii].socket > maxSocket)
                maxSocket = astRecorder[ii].socket;
        }
    }
} 
```

然后循环处理连接：

```
main_loop()
{
    struct timeval timeout;
    /* */
    timeout.tv_sec = 1;
    timeout.tv_usec = 0;
    /* */
    for (;;)
    {   
        memcpy(&fdset_cpy,&fdset,sizeof(fdset));

        int ret = select((maxSocket + 1) , &fdset_cpy, NULL, NULL, &timeout);

        if (iSelectRet <= 0)
            continue;
        else
        {
            int ii;

            for(ii = 0; ii < max; ii++)
            {
                if ((recorders[ii].bUsed) && (FD_ISSET(recorders[ii].socket, &fdset_cpy)))
                {
                    /* receive from socket */
                    /* handle received data */
                }
            }
        }
    }
} 
```

问题：当我将超时设置为 timeout.tv_sec = 1 timeout.tv_usec = 0 时，一切正常，但我得到 100% 的 CPU 使用率！当我将 NULL 作为超时时，尽管套接字上有数据，但程序会在 select() 上阻塞。

* * *

解决方案：

好吧，我终于找到了错误！在上面的代码中，我只在主循环之前设置了一次超时值。那么问题在于，对于 fdset，超时结构是由 select() 函数修改的。所以在第一次正确的超时选择之后，超时结构被select（）函数修改并设置为0。这导致0超时，因此问题是下一次循环到达选择函数时，超时给定到选择是0！！！

仍然非常感谢那些试图提供帮助的人！我很欣赏它=）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T08:03:49.717

呼叫的超时`select`可能`NULL`意味着永远等待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:47:56.310

您也可以`sleep`在检查所有流以在循环结束时放弃 CPU 后使用。这样一来，您就不必依赖单个流在不久的将来某个时候获得传入数据，从而冒着无法为其他流提供服务的风险。

# java - 使用 arraylist 的 '.add()' 方法时，将值添加到 arrayList 的所有索引而不是最后一个索引

> ID：10945074
> 
> 赞同：0
> 
> 时间：2012-06-08T07:59:02.747
> 
> 标签：java, jakarta-ee

我正在尝试迭代整数列表，并为列表的每个值生成一个对象。我想将该对象存储在另一个列表中。我正在使用以下代码。

```
 public String getPersonalDetails() {
  ViewAssociateDetailsVo detailsVo=null;
  try {
  List<ViewAssociateDetailsVo> personalDetailsList=new ArrayList<ViewAssociateDetailsVo>();
  for(int i=0;i< staffIdList.size();i++){
   detailsVo=new ViewAssociateDetailsVo();
    detailsVo=viewDetailsService.getPersonalDetails(staffIdList.get(i));
   System.out.println(detailsVo.getStaffID());
    personalDetailsList.add(detailsVo);
   } 
  detailsVoList.addAll(personalDetailsList);
  }catch (OATSException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
  }
  return "viewReport";

 } 
```

我面临的问题是，当我尝试在输出对象列表中添加值时，输出列表中所有元素的值都被替换为与“staffIdList”的最后一个元素对应的值。请帮助....

# opencv - cv::Matx 的优点

> ID：10945076
> 
> 赞同：29
> 
> 时间：2012-06-08T07:59:16.970
> 
> 标签：opencv, matrix

我注意到新的**OpenCV**版本中添加了一个新的数据结构**cv::Matx**，用于编译时已知大小的小矩阵，例如

 **```
cv::Matx31f  // matrix 3x1 of float type 
```

检查[文档](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=matx#Matx)我看到大多数矩阵运算都是可用的，但我仍然没有看到使用这种新类型而不是旧的 cv::Mat 的优势。

我什么时候应该使用 Matx 而不是 Mat？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T08:53:28.520

它是关于内存管理，而不是浪费（在某些情况下很重要）内存或只是为稍后使用的对象保留内存。

这就是我的理解——也许其他人可以给出更好的解释。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-09T15:27:25.510

简短的回答： cv::Mat 使用堆来存储它的数据，而 cv::Matx 使用堆栈。

cv::Mat 使用动态内存分配（在堆上）。这适用于大矩阵（如图像），并允许您执行矩阵的浅拷贝等操作，这是 cv::Mat 的默认行为。

但是，对于 cv::Matx 设计的小矩阵，与在堆栈上做同样的事情相比，堆分配会非常昂贵。我已经看到一个数学块通过切换到使用堆栈分配类型（例如 cv::Point 和 cv::Matx）而不是 cv::Mat 将处理时间减少了 75% 以上。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-16T13:24:34.047

这是一个迟到的答案，但它仍然是一个有趣的问题！

dom 的答案相当准确，user1460044 中的堆/堆栈引用也很有趣。

从实际的角度来看，**我不会使用** `Matx`(或`Vec`)，除非它是完全必要的。Matx 的主要优点是

1.  使用堆栈（*高效*！[1]）
2.  初始化。

问题是，最后你将不得不将你的`Matx`数据移动到 a`Mat`来做大部分事情，因此你将再次回到堆中。另一方面，a 的“酷初始化”`Matx`可以在普通 Mat 中完成：

```
// Matx initialization:
Matx31f A(1.f,2.f,3.f);
// Mat initialization:
Mat B = (Mat_<float>(3,1) << 1.f, 2.f, 3.f); 
```

此外，初始化（堆/堆栈之外）的东西也有所不同。如果您尝试将 5 个值放入 M​​atx31，它将崩溃（运行时异常），而`Mat_::operator<<`使用 5 个值调用只会存储前三个。

[1]如果您的程序必须创建大量少于约 10 个元素的矩阵，则*效率很高。*在这种情况下使用`Matx`矩阵。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-04-14T13:00:37.750

`Matx`我更喜欢其他两个原因`Mat`：

1.  可读性：阅读代码的人可以立即看到矩阵的大小，例如：

    ```
    cv::Matx34d transform = ...; 
    ```

    很明显，这是一个 3x4 矩阵，因此它包含 (R,t) 类型的 3D 变换，其中 R 是旋转矩阵（与轴角相对）。`transform(i,j)`同样，使用vs访问元素更自然`transform.at<double>(i,j)`。

2.  易于调试。由于 for 的元素以`Matx`已知长度的数组分配在堆栈上，因此 IDE 或调试器可以在单步执行代码时很好地显示整个内容。**

# java - Tomcat JAASRealm：启动服务器后获取“未添加类”

> ID：10945079
> 
> 赞同：0
> 
> 时间：2012-06-08T07:59:28.177
> 
> 标签：java, authentication, jaas, tomcat5.5

我正在为 tomcat JAASRealm使用[http://blog.frankel.ch/custom-loginmodule-in-tomcat教程。我在 server.xml 中添加了下面](http://blog.frankel.ch/custom-loginmodule-in-tomcat)

领域 className="org.apache.catalina.realm.JAASRealm" appName="CustomLogin" userClassNames="ch.frankel.blog.loginmodule.PlainUserPrincipal" roleClassNames="ch.frankel.blog.loginmodule.PlainRolePrincipal" />

在启动服务器时我得到

> 信息：启动 Servlet 引擎：Apache Tomcat/5.5.27 2012 年 6 月 8 日下午 1:18:24 org.apache.catalina.realm.JAASRealm parseClassNames **严重：找不到类 ch.frankel.blog.loginmodule.PlainUserPrincipal！未添加类。** 2012 年 6 月 8 日下午 1:18:24 org.apache.catalina.realm.JAASRealm parseClassNames **严重：找不到类 ch.frankel.blog.loginmodule.PlainRolePrincipal！未添加类**。2012 年 6 月 8 日下午 1:18:24 org.apache.catalina.core.StandardHost 开始信息：XML 验证已禁用 2012 年 6 月 8 日下午 1:18:24 org.apache.catalina.startup.HostConfig deployWAR 信息：部署 Web 应用程序归档 CustomLogin.war

我正在使用 tomcat 5.5.27。当我调用我的 servlet 身份验证工作正常但授权有一些问题，可能是由于**“未添加类”。**

请帮忙....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:40:44.753

它得到了解决......我在 /server/lib 文件夹中添加了一个包含上述类的 jar，它工作正常。

# android - CheckBox inside a View inside a ListView

> ID：10945087
> 
> 赞同：1
> 
> 时间：2012-06-08T07:59:59.143
> 
> 标签：android, android-listview, adapter

Here's my aproach:

I have a custom ListView containing a custom Adapter containing two different kind of Views. One of them has a CheckBox in each View.

I just want to notify the Activity when one of those CheckBoxes have been clicked, and to pass it a boolean: true if ANY of the boxes are checked, false otherwise.

How should I do it?

I just need the theorethical answer, not code.

Thank you very much.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:04:22.807

1- implement the activity by checkedChangeListene and override the code in activity

```
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {
        if ( isChecked )
        {

               Object obj = buttonView.getTag();
            // perform logic
        }

    } 
```

2- pass the activity in custom adapter constructor.

3- set in getView

```
 CheckBox  chkBx = (CheckBox ) findViewById( R.id.repeat_checkbox );
    if(null!=chkBx ){
    chkBx.setOnCheckedChangeListener(mActivty);
    chkBx.setTag(position);
   } 
```

# javascript - Twitter Bootstrap 样式默认 JS 警报

> ID：10945090
> 
> 赞同：0
> 
> 时间：2012-06-08T08:00:17.880
> 
> 标签：javascript, twitter-bootstrap

是否可以使用 Twitter Bootstrap 设置默认 JS 警报的样式？例如：

```
alert("You can select maximum 8 files at once."); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:05:39.273

您无法设置普通警报窗口的样式。它们的外观和感觉由操作系统控制。你能做的最好的就是`alert`用你自己的一个来隐藏真正的功能。例如，您可以`alert`使用将消息写入控制台的函数进行覆盖：

```
​alert = function(msg) {
    console.log(msg);  
};

alert("Hello"); 
```

在您的自定义`alert`方法中，您可以使用消息打开[Bootstrap 的模式窗口](http://twitter.github.com/bootstrap/javascript.html#modals)之一。

这是上述代码的一个[工作示例。](http://jsfiddle.net/J97Ns/)

# c# - 从 WPF 应用程序打开正在运行的应用程序

> ID：10945091
> 
> 赞同：1
> 
> 时间：2012-06-08T08:00:26.017
> 
> 标签：c#, wpf

在我的 WPF 应用程序中，我有一个显示 PC 上所有打开的窗口和活动应用程序的视图，我使用以下代码实现了这一点：

```
 Process[] processlist = Process.GetProcesses(".");

  foreach (Process p in processlist)
  {
    if (!String.IsNullOrEmpty(p.MainWindowTitle))
    {
      TreeViewItem item = new TreeViewItem();
      item.MouseDoubleClick += new MouseButtonEventHandler(item_MouseDoubleClick);
      item.Tag = p;
      item.Header = p.MainWindowTitle.ToString();
      TreeViewExternal.Items.Add(item);
    }

  } 
```

1) 如何在双击树视图项时显示正在运行的应用程序？2）有没有办法获取正在运行的应用程序的图标？例如 VS 的当前窗口标题旁边的 VS 图标。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:05:02.910

对于图标使用这个

```
Icon ico = Icon.ExtractAssociatedIcon(p.MainModule.FileName); 
```

# c# - C# 早期和晚期绑定概念

> ID：10945094
> 
> 赞同：2
> 
> 时间：2012-06-08T08:00:31.653
> 
> 标签：c#, binding

众所周知，早期绑定是声明特定数据类型的对象的概念，它不能容纳任何其他类型的对象。虽然后期绑定是声明泛型对象的概念，并且可以保存任何其他类型的实例。考虑这个例子：

```
public abstract class Animal  
{ 
 public virtual string Name { get { return "Animal"; } } 
} 

public class Dog : Animal 
{ 
  public override string Name { get { return "Dog"; } } 
} 

public class Cat : Animal 
{ 
  public override string Name { get { return "Cat"; } } 
} 

public class Test  
{ 
  static void Main() 
  {
      Animal animal = new Dog(); 
      Animal animalTwo = new Cat(); 

      Console.WriteLine(animal.Name); 
      Console.WriteLine(animalTwo.Name); 
   } 
} 
```

我的问题是编译器何时会识别对象的函数调用，无论是在编译时还是运行时？如果我不清楚，我很抱歉。但我的意思是要问 Virtual override 和 virtual 方法的概念是否涉及后期绑定？..如果不是那么这怎么可能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T08:10:36.657

运行。

虚函数意味着调度在运行时被路由到活动对象引用上的函数。在 C++ 中，这是通过称为 vtable 的指针表完成的。我不确定 C# 是如何做到的，我认为它依赖于实现，但结果是一样的。

在编译时，编译器会将函数调用绑定到基类上的函数。该基类函数是虚拟的，因此在运行时.Net 将查看实际的对象类型并查看它是否覆盖了该函数。如果确实如此，则将调用该派生类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:11:35.967

是的，虚方法涉及后期绑定。

要了解有关绑定及其迟到的更多信息，请阅读这篇文章：http: [//blogs.msdn.com/b/ericlippert/archive/2012/02/06/what-is-quot-binding-quot-and-what -makes-it-late.aspx](http://blogs.msdn.com/b/ericlippert/archive/2012/02/06/what-is-quot-binding-quot-and-what-makes-it-late.aspx)

# python - 使用 django 的 Web 服务器 ini 文件编辑器

> ID：10945095
> 
> 赞同：2
> 
> 时间：2012-06-08T08:00:32.270
> 
> 标签：python, django, ini

我想通过网络服务器编辑ini文件，决定使用django，已经使用了几天了。我不知道如何做到这一点。我的ini文件结构如下：

```
{'GROUP', {PROPERTY : VALUE}} 
```

当我阅读这种 ini 文件时的示例：

```
[LOG]
    FilePath = C:/Log
[CMD]
    Level = 5 
```

我将像这样填充我的数据结构：

```
{'LOG', {'FilePath' : 'C:/Log',}, 
{'CMD', {'Level', '5'}}} 
```

循环看起来像这样：

```
for group in settingsDict:
    print group                         # group
for property in settingsDict[group]:
    print property ,                      # property
    print settingsDict[group][property]     # value 
```

我正在使用[ini 文件解析器](https://stackoverflow.com/a/3220891/410624)。

我无法理解如何在 django 中正确开发：`views.py`是 django 的某种控制器，模板是视图，模型是我的 ini 文件（可能使用 django 模型与 db 链接），还是我有什么问题？

我可以毫无问题地将这个字典传递给模板，在其中创建一个 for 循环并创建 html 标签，例如：`<input type="text" name={{ property }} value={{ value }} maxlength="100" />`。但是我如何将所有编辑后的值发布回控件以将它们保存在文件（或数据库）中？我需要所有 3 个值，即`GROUP, PROPERTY and VALUE`.

然后我发现 django 也有 html 小部件，您可以在其中创建`views.py`然后将其传递给模板。但这是我停止理解事物的地方，因为我在我的控制器类中创建小部件，但即使我是。

我应该创建一个所有 django 小部件的列表并将其传递给模板吗？出现同样的问题，如何将所有小部件值返回到控制器（views.py）？

更新（11.6.2012）：我的代码如下所示：views.py

```
class DynForm(forms.Form):    
    def setFields(self, kwds):
        keys = kwds.keys()
        keys.sort()
        for k in keys:
            self.fields[k] = kwds[k]

def settings(request):
    global Settings #my ini dict
    kwargs = {}
    for group in Settings:
        for property in Settings[group]:
            kwargs[property] = forms.CharField(label = property, initial = Settings[group][property])

    f = DynForm()
    f.setFields(kwargs)

    return render_to_response('/settings.html', 
    {
       'textWidget'   : f,
    })

@csrf_exempt  
def save(request):

    if request.method == 'POST': # If the form has been submitted...
        form = DynForm(request.POST) # A form bound to the POST data
        if form.is_valid(): # All validation rules pass
            # process form data
            # and return response 
```

设置.html

```
<form action="/save/" method="post">
  {% csrf_token %}
  {% for field  in textWidget %}
        <div class="fieldWrapper">
            {{ field.errors }}
            {{ field.label }}: {{ field }}
        </div>
    {% endfor %}
  <p><input type="submit" value="Save" /></p>
</form> 
```

问题是，`DynForm(request.POST)`返回 null 所以我无法获取字段值。我的 request.POST 是正确的，包含所有字段和值。据我所知，我不应该“手动”解析 request.POST 数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:40:40.060

好的，终于想通了，花了我很多时间（我缺乏很多python和django知识）。由于版权权限，我无法粘贴最终解决方案，这是概念：

```
Form
class DynamicForm(forms.Form):
    def __init__(self,*k,**kw):
        forms.Form.__init__(self,*k,**kw)
        # loop over data from **kw
        # create field 
        # set field default value 
```

关于此代码的注释：

*   如果表单不使用`super(SuperForm, self).__init__(*args, **kwargs)`，您必须使用`forms.Form.__init__(self,*k,**kw)`，以便您可以使用 self.fields 属性将字段附加到表单。
*   如果您需要使用默认字段值，请使用`self.data[field] = defVal`not `initial = defVal`。表单变得未绑定，您将无法在 request.POST 方法中解析数据。未绑定的表单（并且有错误）将始终返回`is_valid() False`.

使用这个类，您可以毫无问题地解析`request.POST`数据。循环遍历动态表单字段如下所示：

```
View
for name,field in form.fields.items():
    # name - field name
    # form.data[name] - field value 
```

笔记：

*   为了简单起见，在 POST 方法之前使用 @csrf_exempt 标签。见[http://jordanmessina.com/2010/05/24/django-1-2-csrf-verification-failed/](http://jordanmessina.com/2010/05/24/django-1-2-csrf-verification-failed/)

模板代码循环遍历表单中的字段，显示字段标签和用分隔的值`:`

```
Template
<form action="/Tris/save/" method="post">
  {% csrf_token %}
  {% for field  in textWidget %}
        <div class="fieldWrapper">
            {{ field.errors }}
            {{ field.non_field_errors }}
            {{ field.label }}: {{ field }}
        </div>
    {% endfor %}
  <p><input type="submit" value="Save" /></p>
</form> 
```

大多数解决方案都来自这里：http: [//jacobian.org/writing/dynamic-form-generation/](http://jacobian.org/writing/dynamic-form-generation/)和 django 文档。

# sql - sql plus 的初学者 - 我在这个查询中做错了什么？为什么我得到的结果是“0 条记录已更新”？

> ID：10945099
> 
> 赞同：0
> 
> 时间：2012-06-08T08:01:07.920
> 
> 标签：sql, oracle, sqlplus

我在 oracle 中尝试 sql plus 中的一些问题，但它不起作用并且没有返回所需的结果。有人可以告诉我我做错了什么吗？

问题是：-

开发一个查询，该查询将识别并标记那些账单逾期超过 30 天的非活动客户（这通常可以使用子查询来完成）。请记住，您只是将客户标记为非活动状态，而不是实际从系统中删除客户记录。

这是我尝试过的查询：-

```
SELECT CUSTID, CUSTFIRSTNAME, CUSTSTATUS FROM CUSTOMER;

UPDATE CUSTOMER
SET CUSTSTATUS='I'
WHERE CUSTID IN
(SELECT CUSTID FROM BILLING
 WHERE (SYSDATE - DUEDATE) > 30 AND PAIDDATE IS NULL);

SELECT CUSTID, CUSTFIRSTNAME, CUSTSTATUS FROM CUSTOMER; 
```

计费表中的值如下：-

```
--INSERT STATEMENTS FOR TABLE BILLING

INSERT INTO BILLING(CUSTID,BILLID,BILLAMT,DUEDATE,PAIDAMT,PAIDDATE )
VALUES(1, 1, 30, DATE '2012-07-01', 30, DATE '2012-07-01' );

INSERT INTO BILLING(CUSTID,BILLID,BILLAMT,DUEDATE,PAIDAMT,PAIDDATE )
VALUES(2, 2, 80, DATE '2012-06-25', 0,  );

INSERT INTO BILLING(CUSTID,BILLID,BILLAMT,DUEDATE,PAIDAMT,PAIDDATE )
VALUES(3, 3, 50, DATE '2012-04-01', 0,  );

INSERT INTO BILLING(CUSTID,BILLID,BILLAMT,DUEDATE,PAIDAMT,PAIDDATE )
VALUES(4, 4, 30, DATE '2012-06-11', 30, DATE '2012-06-11' );

INSERT INTO BILLING(CUSTID,BILLID,BILLAMT,DUEDATE,PAIDAMT,PAIDDATE )
VALUES(5, 5, 50, DATE '2012-04-30', 0,  );

INSERT INTO BILLING(CUSTID,BILLID,BILLAMT,DUEDATE,PAIDAMT,PAIDDATE )
VALUES(6, 6, 80, DATE '2012-06-01', 80, DATE '2012-05-30' );

INSERT INTO BILLING(CUSTID,BILLID,BILLAMT,DUEDATE,PAIDAMT,PAIDDATE )
VALUES(7, 7, 30, DATE '2012-06-15', 0,  );

INSERT INTO BILLING(CUSTID,BILLID,BILLAMT,DUEDATE,PAIDAMT,PAIDDATE )
VALUES(8, 8, 30, DATE '2012-05-30', 0,  );

INSERT INTO BILLING(CUSTID,BILLID,BILLAMT,DUEDATE,PAIDAMT,PAIDDATE )
VALUES(9, 9, 80, DATE '2012-05-25', 0,  );

INSERT INTO BILLING(CUSTID,BILLID,BILLAMT,DUEDATE,PAIDAMT,PAIDDATE )
VALUES(10, 10, 50, DATE '2012-04-01', 0,  ); 
```

这些是 BILLING 和 Customer 表的结构：-

```
SQL> desc customer;
 Name                                                                     Null?    Type
 ------------------------------------------------------------------------ -------- -----------------
 CUSTID                                                                   NOT NULL NUMBER(5)
 CUSTSTATUS                                                               NOT NULL CHAR(1)
 CUSTDELETERZN                                                                     VARCHAR2(100)
 CUSTDELETEDATE                                                                    DATE
 EMPID                                                                    NOT NULL NUMBER(5)
 CUSTFIRSTNAME                                                            NOT NULL VARCHAR2(30)
 CUSTLASTNAME                                                             NOT NULL VARCHAR2(20)
 CUSTSTARTDATE                                                                     DATE
 PACKID                                                                   NOT NULL NUMBER(2)
 CUSTPHONE                                                                         VARCHAR2(12)
 CUSTSTREET                                                                        VARCHAR2(30)
 CUSTCITY                                                                          VARCHAR2(20)
 CUSTSTATE                                                                         CHAR(2)
 CUSTZIP                                                                           NUMBER(5)
 CUSTEMAIL                                                                         VARCHAR2(30)

SQL> desc billing;
 Name                                                                     Null?    Type
 ------------------------------------------------------------------------ -------- -----------------
 CUSTID                                                                   NOT NULL NUMBER(5)
 BILLID                                                                   NOT NULL NUMBER(5)
 BILLAMT                                                                  NOT NULL NUMBER(5)
 DUEDATE                                                                  NOT NULL DATE
 PAIDAMT                                                                           NUMBER(5)
 PAIDDATE                                                                          DATE 
```

我也试着写`" WHERE (SYSDATE - DUEDATE) > 30 AND PAIDDATE ='');"`

这也不起作用。

编辑：-

我现在在我的 INSERT 语句中插入了 NULL，现在我收到了这个错误：-

更新客户 * 第 1 行出现错误：ORA-02290：违反检查约束 (D03318785.CC_CUSTOMER_F_CUSTSTATUS)

有人可以帮忙吗？

创建客户表如下：-

```
CREATE TABLE CUSTOMER(
    custid      NUMBER(5) NOT NULL
    CONSTRAINT pk_custid PRIMARY KEY,
    custstatus      CHAR(1) NOT NULL,
    custdeleterzn   VARCHAR2(100),
    custdeletedate  DATE,
    empid       NUMBER(5) NOT NULL,
    custfirstname   VARCHAR2(30) NOT NULL,
    custlastname    VARCHAR2(20) NOT NULL,
    custstartdate   DATE,
    packid      NUMBER(2) NOT NULL,
    custphone       VARCHAR2(12),
    custstreet      VARCHAR2(30),
    custcity        VARCHAR2(20),
    custstate       CHAR(2),
    custzip     NUMBER(5),
    custemail       VARCHAR2(30)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T09:57:47.400

这个说法：

```
INSERT INTO BILLING(CUSTID,BILLID,BILLAMT,DUEDATE,PAIDAMT,PAIDDATE )
VALUES(5, 5, 50, DATE '2012-04-30', 0,  ); 
```

是无效的 SQL，不会运行。

它**不会**将“无”放入列`PAIDDATE`中。您应该在运行它们时遇到语法错误。

如果您忽略了这一点并仍然提交了插入，则将不会运行无效语句，因此这些行**没有**被插入（因此表中没有 PAIDDATE 值为 NULL 的行）。因此，您的更新没有找到它们。

该错误`ORA-02290: check constraint (D03318785.CC_CUSTOMER_F_CUSTSTATUS`意味着允许用于`CUSTSTATUS`列的值是有限的，并且`'I'`您尝试分配的值不是其中之一。您将需要找到创建检查约束的 SQL 脚本，以便查看允许哪些值。

要检索检查约束的定义，您可以使用以下语句：

```
select dbms_metadata.get_ddl('CONSTRAINT', 'CC_CUSTOMER_F_CUSTSTATUS') 
from dual; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:08:58.250

尝试这个：

```
WHERE DUEDATE < TRUNC(SYSDATE) - 30 AND PAIDDATE IS NULL 
```

应尽可能避免将函数应用于列名，并使用 IS NULL 测试 NULL 值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T08:24:11.557

在您的插入语句中，您没有填写最后一个值（以前从未见过）。尝试使用这样的空值显式设置它：

```
INSERT INTO BILLING(CUSTID,BILLID,BILLAMT,DUEDATE,PAIDAMT,PAIDDATE )
VALUES(5, 5, 50, DATE '2012-04-30', 0, NULL); 
```

# haskell - 密集的信号树

> ID：10945101
> 
> 赞同：2
> 
> 时间：2012-06-08T08:01:11.897
> 
> 标签：haskell, functor, mutable, unboxing, zipper

我收集实时信号，计算派生信号并将原始数据和派生数据存储在循环缓冲区中，因此我只保存最后一百万个样本。

有时我需要序列化所有信号的当前值。所以我需要类似的东西：

```
type D0 a = M.Map SignalType D1

data D1 a = D1 
    { foo :: M.Map DoorType a
    , bar :: D2 a
    , baz :: a
    }

data D2 = D2 
    {
        quux :: a
    ,   zoo :: a
    }

data MyData = D0 SignalBuffer 

data CurrentSignals = D0 SignalValue 
```

`SignalBuffer`是一个序列`SignalValue`。它可以是一个未装箱的浮点数组。Haskell 可以`Functor`为我派生实例，因此我可以使用从每个`fmap`中获取最后一个并将结构传递给以进行序列化。`SignalValue``SignalBuffer``Aeson`

如何实现循环缓冲区 API，`SignalBuffer`以便在新滴答到达时将新值推送到所有缓冲区？我想节省内存，所以我想我必须使用未装箱的数组。使用可变的未装箱数组（`STUArray`？）是否有利，因此数组更新不会堆积在内存中？是否可以在此设置中使用可变数组？我已经准备好改变`MyData`，`CurrentSignals`无论做什么工作。

我知道如何实现循环缓冲区，问题是如何优雅地将更新应用于`MyData`.

我在想类似的东西

```
type UpdateFunc a = MyData -> SignalValue -> Modifier SignalBuffer

updateAllBuffers :: D0 UpdateFunc -> Modifier MyData 
```

一些信号是其他信号的“卷积”（不是真正的卷积，而是一种类似的处理）。要更新信号的缓冲区，我需要访问其他信号的缓冲区——这就是 UpdateFunc 接受`MyData`并`SignalValue`返回缓冲区修改函数的原因。

`updateAllBuffers`然后“拉链”`D0 UpdateFunc`并`MyData`获得新的`MyData`.

当然，我已经准备好使用`Modifier`适合我任务的任何东西——它可以是一个函数、一个单子值等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-19T20:34:45.813

我不完全理解你想用上面的代码做什么，但你可以使用`IOVector`Data.Vector.Unboxed.Mutable[为](http://hackage.haskell.org/package/vector-0.12.0.3/docs/Data-Vector-Unboxed-Mutable.html#t:IOVector)高性能数组创建一个循环缓冲区：

```
{-# LANGUAGE GADTs #-}

import Data.IORef (IORef, newIORef, readIORef, writeIORef)
import Data.Vector.Unboxed.Mutable (IOVector, Unbox)
import qualified Data.Vector.Unboxed.Mutable as V

data CircularBuffer a where
  CircularBuffer :: Unbox a =>
    { start :: IORef Int -- index for getting an element
    , end   :: IORef Int -- index for putting an element
    , array :: IOVector a
    } -> CircularBuffer a 

newCircularBuffer :: (Unbox a) => Int -> IO (CircularBuffer a)
newCircularBuffer size = CircularBuffer <$> newIORef 0 <*> newIORef 0 <*> V.new size 

putCircularBuffer :: Unbox a => a -> CircularBuffer a -> IO ()
putCircularBuffer newEndValue (CircularBuffer _start end array) = do
  endIndex <- readIORef end
  V.write array endIndex newEndValue
  writeIORef end $! (endIndex + 1) `mod` V.length array

getCircularBuffer :: Unbox a => CircularBuffer a -> IO a
getCircularBuffer (CircularBuffer start _end array) = do
  startIndex <- readIORef start
  startValue <- V.read array startIndex
  writeIORef start $! (startIndex + 1) `mod` V.length array
  pure startValue 
```

然后，您可以制作一个类似函数的映射（尽管它是 IO），它将一个函数应用于`CircularBuffer`'s 数组中的每个项目。

# .net - 运行时不要锁定应用程序的文件

> ID：10945105
> 
> 赞同：3
> 
> 时间：2012-06-08T08:01:16.293
> 
> 标签：.net, self-updating

我正在创建一个能够自我更新的软件应用程序。启动后，应用程序检查是否有可用的更新，下载这些文件（程序集），然后继续加载它们。

但是，问题是当应用程序由多个用户同时运行时。在终端服务器上运行时会发生这种情况。该应用程序无法替换那些旧文件，因为 Windows 将它们锁定。

有没有简单的方法来解决这个问题？这是一个遗留应用程序，我没有时间更改应用程序的大部分内容或更新机制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T08:06:32.583

好吧，Windows*确实*允许您重命名各个文件，即使它们正在使用中。因此，您可以重命名为更新的文件，用新版本替换它们并重新启动应用程序。

我想如果不更改更新机制，您将无法解决此问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T08:12:04.377

Most of updater have a bootstrapper executable that performs the update of the main application.

The idea is to run the bootstrapper instead of your application. Then the bootstrapper apply any update if required, before launching the actual application.

Another technique (I never tried, it's only a clue) is to use [shadow assemblies](http://msdn.microsoft.com/en-us/library/ms404279.aspx). The concept is to "duplicate" the assembly on the file in order to avoid file in use locking.

Finally, you can take a look at [clickonce](http://msdn.microsoft.com/library/t71a733d.aspx) which can easily create self updating applications, if you accepts the drawbacks of this mechanism.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T08:09:13.207

一个简单的解决方案是使用[Shadow Copying](http://msdn.microsoft.com/en-us/library/ms404279.aspx)。

简单的例子：

```
class Program
{
    static void Main(string[] args)
    {
        var x = AppDomain.CreateDomain("TestAssembly", null, new AppDomainSetup() { 
                                                            ShadowCopyFiles = "true",
                                                            CachePath = @"c:\tmp", 
                                                            ApplicationName = "ShadowCopyTest"
                                                       });
        var a = x.Load("TestAssembly"); // Load Assembly and run...
    }
} 
```

您可以创建一个可执行文件，将您的应用程序（*您的可执行用户现在正在启动*）加载到使用影子复制的新应用程序域中。`CachePath`必须是特定于用户的，例如用户临时目录。

这样，每个用户都将创建应用程序加载的所有程序集的副本。但是您必须自己清理复制的文件。

All you have to do then is to ensure the application gets started by your new wrapper executable.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T08:09:43.503

I guess you are downloading assemblies directly in place of the old assemblies. Lets say you have an assembly myprogram.dll . First download the new updated dll with a different name ( _myprogram.dll for example) . Fire an event after the download is competed that will replace the myprogram.dll with _myprogram.dll. This event should declare all running processes to stop at first then replace the assemblies. replacement should take at a moment. You cannot avoid the service cut on this moment.

EDİT:

There should be a process that will always running and checking for updates. Send the name of the files to this process first. The process will now it will download for example 5 files. The process should download the files in a predefined name format(Concatenating it with underscore for example). After the process finishes downloading 5th file the process should kill all other processes ( or preferably only the processes related to the downloaded assemblies), then replace the assemblies with the newer ones. Than start the processes again.

# ios - 使用 iOS SDK 登录后通过 UIWebView 访问网页时保持 Facebook 身份验证

> ID：10945106
> 
> 赞同：1
> 
> 时间：2012-06-08T08:01:15.907
> 
> 标签：ios, facebook, facebook-graph-api

我已成功将 facebook ios SDK 集成到我的应用程序中，以便用户可以通过提要对话框发布到他们的墙上。

但是，我想通过我的应用程序发布一个打开的图形对象，但由于目前仅在网页上支持（这是正确的吗？），我想我可以在 UIWebView 中加载带有元标记的网页。但是，如果我这样做，我相信用户也必须对我的网络应用程序进行身份验证？

当用户已经通过 iOS SDK 登录时，有没有办法不需要用户在 UIWebView 中对我的 Web 应用程序进行身份验证？我想保留 iOS SDK 登录过程，因为它不需要用户输入他们的 facebook 详细信息（假设他们安装了 coz 的 facebook 应用程序）

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:16:15.997

it looks like i am able to post feeds in UIWebView after logging in with the iOS SDK. I did logout of facebook on my safari app just in case....

# c# - Form.Parent 和 StartPosition.CenterParent

> ID：10945107
> 
> 赞同：14
> 
> 时间：2012-06-08T08:01:20.263
> 
> 标签：c#, winforms, .net-3.5

我需要在另一个表格之前显示一个表格，这导致我提出以下问题。

为什么一个表单可以有一个起始位置，`CenterParent`而字段`this.Parent`等于 null？

它必须知道父节点才能正确定位自己，但它`Parent`没有设置该字段。这很奇怪。我错过了什么吗？

```
 Form2 f = new Form2();
        f.ShowDialog(); 
```

这就是我在子表单上所做的一切。父级设置为默认窗口位置。无论我将父窗体移动到何处，子窗体都会显示在父窗体的中心。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T08:19:23.187

有关所有者的信息通过 API 调用传递给创建的对话框（您可以在 ShowDialog(IWin32Window owner) 方法中的 Reflector 中看到）：

```
UnsafeNativeMethods.SetWindowLong(new HandleRef(this, base.Handle), -8, new HandleRef(owner, handle)); 
```

如果在 ShowDialog 调用中没有指定所有者，`owner`则通过 GetActiveWindow API 调用计算变量：

```
IntPtr activeWindow = UnsafeNativeMethods.GetActiveWindow();
IntPtr handle = (owner == null) ? activeWindow : Control.GetSafeHandle(owner); 
```

要访问 Owner f 对话框表单，您可以使用[GetWindowLong API 调用](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633584%28v=vs.85%29.aspx)：

```
IntPtr ownerHandle = NativeMethods.GetWindowLong(nonModalForm.Handle, -8); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T09:42:00.560

在 Winforms 中，窗口的父级和所有者之间的区别有点混乱。在这种情况下，CenterParent 真正的意思是 CenterOwner。不是 Windows 功能，它是在 Winforms 中实现的，由基本的 Form.OnLoad() 方法完成。一个对话框应该总是有一个所有者，当你没有在 ShowDialog() 调用中指定一个时，它会寻找一个所有者。其中使用 GetActiveWindow() 作为最佳猜测。

要亲自查看，请在对话框表单中重载 OnLoad，如下所示：

```
public partial class Form2 : Form {
    public Form2() {
        InitializeComponent();
        this.StartPosition = FormStartPosition.CenterParent;
    }
    protected override void OnLoad(EventArgs e) {
        //base.OnLoad(e);
    }
} 
```

请注意，它不再以所有者为中心。

可以在Reference Source，Form.cs类，OnLoad方法中看到相关代码：

```
if (GetState(STATE_MODAL)) {
    FormStartPosition startPos = (FormStartPosition)formState[FormStateStartPos];
    if (startPos == FormStartPosition.CenterParent) {
        CenterToParent();
    }
    else if (startPos == FormStartPosition.CenterScreen) {
        CenterToScreen();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T08:46:11.080

我相信出于某种原因，此信息由 .NET Framework 内部存储。无论如何，如果您想访问父表单，可以将其设置为子表单的[Owner 属性](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WINDOWS.FORMS.FORM.OWNER%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V2.0%22%29;k%28DevLang-CSHARP%29&rd=true)：

```
Form form = new Form();
form.Owner = this;
form.Show(); 
```

然后在子窗体中，您可以使用 Owner 属性访问父窗体。当一个表单被另一个表单拥有时，它会被最小化并与所有者表单一起关闭。拥有的表格也永远不会显示在其拥有者表格的后面，如果我理解正确的话，这正是您所需要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T09:18:34.913

此代码将打开父 TAG 中间的对话框。

```
 ObjectDistrubution od = new ObjectDistrubution();
    od.StartPosition = FormStartPosition.CenterParent;
    od.ShowDialog(); 
```

# php - 如何检测用户在网页上的位置并插入mysql？

> ID：10945110
> 
> 赞同：0
> 
> 时间：2012-06-08T08:01:38.800
> 
> 标签：php, mysql, insert, location, detect

我想检测网页上访问者的位置并将其插入到 mysql 中的表中。尝试了很多方法，在互联网上进行了研究，但没有解释如何插入 mysql。

示例：用户位置 John 'City','Country'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:07:14.333

PHP 可以通过 获取用户的 IP 地址`$_SERVER['REMOTE_ADDR']`，您可以在 Geoloaction 数据库中进行比较。这是一个[数据库列表](http://whatismyipaddress.com/geolocation-providers)。

另请注意，本周早些时候推出了 IPv6，您可能必须拥有两个地理定位数据库。

# java - if() 中 && 的意义

> ID：10945111
> 
> 赞同：1
> 
> 时间：2012-06-08T08:01:42.980
> 
> 标签：java

我想知道这两个代码之间的性能有什么区别。

```
String sample="hello";
    if(sample!=null)
    {
       if(!sample.equals(""))
        {
            // some code in here
         }
    } 
```

或者

```
String sample="hello";
    if(sample!=null && !sample.equals(""))
    {

            // some code in here
    } 
```

据我了解，在第一个代码中，如果 sample 不为空，那么只有它会进入块。第二段代码也是如此。我想知道的是性能或更好的编码标准有什么区别，为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T08:02:39.437

如果您询问性能，您应该始终*测量*. 但是不，应该没有区别。此外，如果*这*是你唯一的性能问题代码，那么我真的很羡慕你。

至于编码标准。更少的嵌套几乎总是更好地阅读和遵循。这意味着`if`最好将两者放在一个中，尤其是因为它们是相关的。图案

```
if (check_foo_for_null && compare_foo) 
```

很常见，因此比另一个嵌套*的*`if`.

**编辑：**备份它：

我有两个小方法：

```
static boolean x(String a) {
    if (a != null && a.equals("Foo"))
        return true;
    else return false;
}

static boolean y(String a) {
    if (a != null) {
        if (a.equals("Foo")) {
            return true;
        } else return false;
    } else return false;
} 
```

产生以下代码：

```
 static boolean x(java.lang.String);
    Code:
       0: aload_0       
       1: ifnull        15
       4: aload_0       
       5: ldc           #16                 // String Foo
       7: invokevirtual #21                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      10: ifeq          15
      13: iconst_1      
      14: ireturn       
      15: iconst_0      
      16: ireturn       

  static boolean y(java.lang.String);
    Code:
       0: aload_0       
       1: ifnull        17
       4: aload_0       
       5: ldc           #16                 // String Foo
       7: invokevirtual #21                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      10: ifeq          15
      13: iconst_1      
      14: ireturn       
      15: iconst_0      
      16: ireturn       
      17: iconst_0      
      18: ireturn 
```

因此，除了一个无关的`else`跳转目标之外，代码是相同的。如果你甚至没有`else`：

```
static boolean z(String a) {
    if (a != null) {
        if (a.equals("Foo"))
            return true;
    return false;
} 
```

那么结果真的是一样的：

```
 static boolean z(java.lang.String);
    Code:
       0: aload_0       
       1: ifnull        15
       4: aload_0       
       5: ldc           #16                 // String Foo
       7: invokevirtual #21                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      10: ifeq          15
      13: iconst_1      
      14: ireturn       
      15: iconst_0      
      16: ireturn 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-08T08:17:14.927

正如其他人所说，性能应该没有任何差异。小提示 - *equals*几乎总是调用*instanceof*，它为 null 返回*false*。所以写：

```
if( !"".equals(foo)) {...} 
```

做同样的检查并且是空安全的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T08:07:21.350

两者在性能方面没有区别。因为在第一种情况下它会检查一个条件，如果失败则不会进入内部。在第二种情况下，JVM 也会检查第一个条件，如果它返回 false，那么 JVM 将永远不会进行第二次检查。如果 first 为**false** ，逻辑 && 运算符将始终为**false**。

 **在编码标准方面，我会选择第二个选项，因为它的编码行数较少。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T08:04:09.090

由于在编译时执行优化，`bytcode`生成的很可能会被优化。`if(sample!=null && !sample.equals(""))``java`

如果您谈论的是您编写的实际代码，最好只有一个`if`. 由于两个的结构`if`对于编译器来说更复杂（没有优化）。虽然我没有经验数据来支持这一点。**

# objective-c - 格式返回 47130101 后的 NSDate？

> ID：10945112
> 
> 赞同：0
> 
> 时间：2012-06-08T08:01:56.750
> 
> 标签：objective-c, nsdate

代码如下：

```
NSDateFormatter *formatter;
formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyyMMdd"];

for (int i=0; i<10000; i++) {

    dispatch_queue_t aQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
        dispatch_async(aQueue, ^{
    NSString *dateKey = [formatter stringFromDate:[NSDate date]];

        NSLog(dateKey);

    });

} 
```

datekey 有时是 47130101 吗？正常值是 20120608。但我有时会得到 47130101。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:20:40.240

您的代码完全有效，我试了几次检查它是有效的。

尝试这个：

```
NSLog(@"%@", dateKey); 
```

你会看到的。可能您在其他部分感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:43:41.840

您绝对不想同时`NSDateFormatter`在多个线程上使用同一个对象。

[线程安全](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafetySummary/ThreadSafetySummary.html)确实表明 NSDateFormatter 是明确的线程不安全的。

我建议，如果你要在 GCD 中执行此操作，要么使用多个 NSDateFormatter（如果你真的需要做 10,000 个，可能是一个池），或者如果你的主要问题是“意外”使用单线程访问它在多个线程中。

如果你选择后者，我会为 NSDateFormatter 创建一个专用的串行调度队列，并使用它来控制访问，这样它一次只能在一个线程上运行，否则如果你不太可能会快速执行发生碰撞。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-06-08T08:12:49.633

```
 NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
  [formatter setDateFormat:@"yyyyMMdd"];
  NSString *dateKey = [formatter stringFromDate:[NSDate date]]; 
```

# ruby - 自定义代码上的 Ruby `require` 调用失败

> ID：10945114
> 
> 赞同：3
> 
> 时间：2012-06-08T08:02:01.243
> 
> 标签：ruby

我发现我使用`require`加载 Sinatra Web 框架之类的东西没有问题，但我似乎无法使用`require`加载我自己的自定义代码？

例如我有两个文件：

1.  测试1.rb
2.  test2.rb

'test1.rb' 的内容是：

```
#!/usr/bin/env ruby
require 'test2' 
```

'test2.rb' 的内容是：

```
class String
    def vowels
        self.scan(/[aeiou]/i)
    end
end 
```

如果我尝试运行，`ruby test1.rb`则会收到以下错误...

```
/Users/<username>/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- test2 (LoadError)
    from /Users/<username>/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from test1.rb:3:in `<main>' 
```

然后我注意到，如果我尝试使用`shotgun`gem 加载 Web 服务器，那么我会得到一个不同但更详细的错误堆栈跟踪......

```
Boot Error
Something went wrong while loading test1.rb
LoadError: cannot load such file -- test2

/Users/<username>/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/Users/<username>/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/Users/<username>/Dropbox/Library/Ruby/Passage/test1.rb:3:in `<top (required)>'
/Users/<username>/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/Users/<username>/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/shotgun-0.9/lib/shotgun/loader.rb:114:in `inner_app'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/shotgun-0.9/lib/shotgun/loader.rb:102:in `assemble_app'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/shotgun-0.9/lib/shotgun/loader.rb:86:in `proceed_as_child'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/shotgun-0.9/lib/shotgun/loader.rb:31:in `call!'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/shotgun-0.9/lib/shotgun/loader.rb:18:in `call'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/shotgun-0.9/lib/shotgun/favicon.rb:12:in `call'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/shotgun-0.9/lib/shotgun/static.rb:14:in `call'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/builder.rb:134:in `call'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.3.1/lib/thin/connection.rb:80:in `block in pre_process'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.3.1/lib/thin/connection.rb:78:in `catch'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.3.1/lib/thin/connection.rb:78:in `pre_process'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.3.1/lib/thin/connection.rb:53:in `process'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.3.1/lib/thin/connection.rb:38:in `receive_data'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.3.1/lib/thin/backends/base.rb:61:in `start'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/thin-1.3.1/lib/thin/server.rb:159:in `start'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/rack-1.4.1/lib/rack/handler/thin.rb:13:in `run'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/gems/shotgun-0.9/bin/shotgun:156:in `<top (required)>'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/bin/shotgun:19:in `load'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/bin/shotgun:19:in `<main>'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/bin/ruby_noexec_wrapper:14:in `eval'
/Users/<username>/.rvm/gems/ruby-1.9.3-p125/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我不确定是什么问题？

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T08:05:20.370

当前目录（相对于主 ruby​​ 文件）不是加载路径（`require`查找的路径集）的一部分。因此，您要么需要将其添加到加载路径（最好通过调用 ruby​​ as 来完成`ruby -I. test1.rb`），要么通过 using`require "./test2.rb"`或通过 using `require_relative "test2.rb"`，这需要相对于文件目录的文件。

# ios - UIScrollview 行为，如 UIImagePicker 滚动视图

> ID：10945115
> 
> 赞同：0
> 
> 时间：2012-06-08T08:02:08.747
> 
> 标签：ios, uiview, uiscrollview, uiimageview, uiimagepickercontroller

我想创建具有像 UIImagePicker 这样的图像滑动行为的自定义 uiimagepicker，但是当我在一张图像的中间停止滑动时，无法找到将弹跳模式设置为向后或向前反弹的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:17:18.033

```
int moveY = reckView.frame.origin.y - parentScrollView.contentOffset.y - parentScrollView.contentInset.top;

if (moveY > 0) {
    [parentScrollView setContentOffset:CGPointMake(0, parentScrollView.contentOffset.y + moveY - reckView.frame.size.height) animated:YES];
} else {
    [parentScrollView setContentOffset:CGPointMake(0, parentScrollView.contentOffset.y + moveY) animated:YES];
} 
```

I think this code will bring you close to your solution. Note that, this will not bounce, instead it will slowly adjust scrollView position.

Here,

parentScrollView is the scrollView.

reckView is the view which contains thumb image.

# java - 通过调用堆栈自省的方法签名

> ID：10945118
> 
> 赞同：2
> 
> 时间：2012-06-08T08:02:14.897
> 
> 标签：java

有没有办法通过调用堆栈内省找到被调用方法的签名。我们是否有任何替代方法可以找到相同的答案。我没有源代码，只有字节码文件

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T08:13:59.870

堆栈自省将为您提供方法的调用者或最多提供方法的一些细节，对于精确的方法签名，您将不得不使用反射。

```
StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace(); 
```

> 官方文档说：
> 
> 返回表示此线程的堆栈转储的堆栈跟踪元素数组。如果此线程尚未启动或已终止，此方法将返回一个长度为零的数组。如果返回的数组长度非零，则数组的第一个元素表示堆栈的顶部，这是序列中最近的方法调用。数组的最后一个元素表示堆栈的底部，它是序列中最近的方法调用。

通过这种方式，您可以从[StackTrace](http://docs.oracle.com/javase/6/docs/api/java/lang/StackTraceElement.html)获取方法名称、文件名、行号。

对于完整的方法签名，您将不得不使用反射

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T09:49:42.500

您可以使用[Java 反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)和[StackTraceElement](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/StackTraceElement.html)。

```
StackTraceElement[] elements = new Throwable().getStackTrace();

    String calleeMethod = elements[0].getMethodName();
    String callerMethodName = elements[1].getMethodName();
    String callerClassName = elements[1].getClassName();

    System.out.println("CallerClassName=" + callerClassName + " , Caller method name: " + callerMethodName);
    System.out.println("Callee method name: " + calleeMethod); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-18T21:25:38.253

StackTraceElement 不包含有关参数的任何信息，因此如果您在调用类中有多个同名的方法并且您想知道是哪一个，则需要访问源代码。对于原始问题，您可以尝试使用反编译器重新创建源，从这些源编译，然后重新创建堆栈跟踪并查看重新创建的源中的行号。

如果重载方法不是问题，您可以这样做：

```
public class TestTest {
    @Test
    public void overloaded1() throws Exception {
        doTheThing("foo", 42, this);
    }

    @Test
    public void overloaded2() throws Exception {
        doTheThing(1);
    }

    @Test
    public void notOverloaded() throws Exception {
        printMethodSignature();
    }

    public void doTheThing(int overloaded) throws Exception {
        printMethodSignature();
    }

    public void doTheThing(String dumm1, int dummy2, Object dummy3) throws Exception {
        printMethodSignature();
    }

    public void printMethodSignature() throws Exception {
        StackTraceElement[] elements = Thread.currentThread().getStackTrace();
        // elements[0] will contain java.lang.Thread.getStackTrace() here
        // elements[1] will contain this method: printMethodSignature()
        // elements[2] will contain the method from which printMethodSignature() was called

        System.out.println(elements[2] + " -> " + toSignature(elements[2]));
    }

    // Represent class & method as string
    public String toSignature(StackTraceElement st) throws Exception {
        Class callingClass = Class.forName(st.getClassName());
        return Stream.of(callingClass.getMethods())
            .filter(m -> m.getName().equals(st.getMethodName()))
            .map(m -> String.format("%s.%s(%s)", callingClass.getName(), m.getName(), toSignature(m)))
            .collect(Collectors.joining("\n"));
    }

    // Represent parameters as a String
    public String toSignature(Method method) {
        return Stream.of(method.getParameters())
            .map(p -> p.getParameterizedType().getTypeName())
            .collect(Collectors.joining(", "));
    }
} 
```

# ruby-on-rails - 在任务之前调用方法

> ID：10945119
> 
> 赞同：0
> 
> 时间：2012-06-08T08:02:16.970
> 
> 标签：ruby-on-rails

在运行我构建的 rake 任务时，rails 中是否有任何方法可以自动调用方法，例如以前？

假设我们有

```
namespace :migrate do

  def before
    # do this before all tasks 
  end

  desc 'migrate authors from legacy database'
  task :authors => :environment do
    # some code here
  end

end 
```

我希望每次运行任务时都运行 before 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:07:32.100

看看这是否有帮助：[http ://www.rubyflow.com/items/4104](http://www.rubyflow.com/items/4104)

# objective-c - 尝试制作自定义 TabBar。iPhone 3GS 中的 viewController 转换崩溃（但在 iPhone 4 中没有）

> ID：10945124
> 
> 赞同：0
> 
> 时间：2012-06-08T08:02:32.930
> 
> 标签：objective-c, ios, crash, transition, viewcontroller

首先，我是 iOS 和 Objective-C 编程的新手（我是一个月前开始的）。

我正在尝试做一个自定义的tabBar，它在我的带有iOS 5.1.1 的iPhone 4 中运行良好，但它不适用于带有iOS 4.2.1 的3GS。我会更新它以查看它是否与 iOS 版本而不是手机型号相关，但我更喜欢在 iOS 4 中进行测试。

*   首先，如果有人帮助我找出导致此崩溃的原因以及如何避免它，我将非常高兴。好吧，正如调用堆栈中显示的那样，我的 viewController 似乎没有响应`transitionFromViewController:toViewController:duration:options:animations:completion:`，但它在 iOS 5 中工作......难道它是 iOS 4 中不存在的新功能？如果这是刚刚发生的事情，我如何在没有这个选择器的情况下从一个 viewController 转换到另一个？

*   其次，我想知道我的做法是否正确：正如我之前提到的，我想要的是我自己的自定义 TabBar。我所做的是制作一个具有 5 个按钮的 viewController，并且几乎整个屏幕都是一个带有插座的视图，可以根据按下的按钮在其中加载相应的 viewController。例如：

- 标题：

```
//  CustomTabBarViewController.h
#import <UIKit/UIKit.h>
#import "Tab1ViewController.h"

@interface TabBarCustomViewController : UIViewController

// View Controllers
@property (retain, nonatomic) Tab1ViewController *myTab1ViewController;
@property (retain, nonatomic) Tab2ViewController *myTab2ViewController;

// Reference of the current shown viewController, for the transitions
@property (retain, nonatomic) UIViewController *currentViewController; 

// Outlet to switch the viewController inside the view mainView;
@property (retain, nonatomic) IBOutlet UIView *mainView; 
```

- .m 文件

```
#import "TabBarCustomViewController.h"

@interface TabBarCustomViewController ()

@end

@implementation TabBarCustomViewController

@synthesize myTab1ViewController, myTab2ViewController;
@synthesize currentViewController;
@synthesize mainView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    //Instantiation of the viewControllers
    self.myTab1ViewController = [[Tab1ViewController alloc]initWithNibName:@"Tab1ViewController" bundle:nil];
    self.myTab2ViewController = [[Tab2ViewController alloc]initWithNibName:@"Tab2ViewController" bundle:nil];

    // Adding those viewControllers to the root viewController  
    [self addChildViewController:self.myTab1ViewController];
    [self addChildViewController:self.myTab2ViewController];

    //the entry view
    [mainView addSubview:self.myTab1ViewController.view];
    currentViewController = self.myTab1ViewController;   
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

// My methods

- (IBAction)tab1Pressed
{
    NSLog(@"tab1Pressed");

    [self transitionFromViewController:currentViewController toViewController:self.myTab1ViewController duration:0.2    options:UIViewAnimationOptionTransitionCrossDissolve animations:nil completion:nil];

    // Updating the reference of which viewController is currently being displayed
    currentViewController = myTab1ViewController;
}

- (IBAction)tab2Pressed
{
    NSLog(@"tab2Pressed");

    [self transitionFromViewController:currentViewController toViewController:self.myTab2ViewController duration:0.2    options:UIViewAnimationOptionTransitionCrossDissolve animations:nil completion:nil];

    // Updating the reference of which viewController is currently being displayed
    currentViewController = myTab2ViewController;
}

@end 
```

- 这是发生第一点提到的崩溃时控制台中抛出的内容：

```
2012-06-08 08:25:55.991 myTabBar[4597:307] tab2Pressed
2012-06-08 08:25:56.003 myTabBar[4597:307] -[TabBarCustomViewController transitionFromViewController:toViewController:duration:options:animations:completion:]: unrecognized selector sent to instance 0x143cc0
2012-06-08 08:25:56.028 myTabBar[4597:307] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[TabBarCustomViewController transitionFromViewController:toViewController:duration:options:animations:completion:]: unrecognized selector sent to instance 0x143cc0'
*** Call stack at first throw:
(
0   CoreFoundation                      0x314d0987 __exceptionPreprocess + 114
1   libobjc.A.dylib                     0x319a149d objc_exception_throw + 24
2   CoreFoundation                      0x314d2133 -[NSObject(NSObject) doesNotRecognizeSelector:] + 102
3   CoreFoundation                      0x31479aa9 ___forwarding___ + 508
4   CoreFoundation                      0x31479860 _CF_forwarding_prep_0 + 48
5   myTabBar                            0x00003707 -[TabBarCustomViewController tab2Pressed] + 126
6   CoreFoundation                      0x31477fed -[NSObject(NSObject) performSelector:withObject:withObject:] + 24
7   UIKit                               0x338c14ad -[UIApplication sendAction:to:from:forEvent:] + 84
8   UIKit                               0x338c144d -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 32
9   UIKit                               0x338c141f -[UIControl sendAction:to:forEvent:] + 38
10  UIKit                               0x338c1171 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 356
11  UIKit                               0x338c19cf -[UIControl touchesEnded:withEvent:] + 342
12  UIKit                               0x338b7355 -[UIWindow _sendTouchesForEvent:] + 368
13  UIKit                               0x338b6ccf -[UIWindow sendEvent:] + 262
14  UIKit                               0x338a1fc7 -[UIApplication sendEvent:] + 298
15  UIKit                               0x338a1907 _UIApplicationHandleEvent + 5090
16  GraphicsServices                    0x35d66f03 PurpleEventCallback + 666
17  CoreFoundation                      0x314656ff __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 26
18  CoreFoundation                      0x314656c3 __CFRunLoopDoSource1 + 166
19  CoreFoundation                      0x31457f7d __CFRunLoopRun + 520
20  CoreFoundation                      0x31457c87 CFRunLoopRunSpecific + 230
21  CoreFoundation                      0x31457b8f CFRunLoopRunInMode + 58
22  GraphicsServices                    0x35d664ab GSEventRunModal + 114
23  GraphicsServices                    0x35d66557 GSEventRun + 62
24  UIKit                               0x338d5329 -[UIApplication _run] + 412
25  UIKit                               0x338d2e93 UIApplicationMain + 670
26  myTabBar                            0x000027cb main + 102
27  myTabBar                            0x00002760 start + 40
)
terminate called after throwing an instance of 'NSException'
(lldb) 
```

我知道我可以使用`[mainView addSubview:myTab1ViewController.view];` 而不是`[self transitionFromViewController:currentViewController toViewController:self.myTab2ViewController duration:0.2 options:UIViewAnimationOptionTransitionCrossDissolve animations:nil completion:nil];`

但是这种方式我不能做过渡动画，除了我不确定这是否是做我想做的事情的正确方法。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:09:04.257

根据官方文档： http: [//developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/transitionFromViewController :toViewController:duration:options ：动画：完成](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/transitionFromViewController:toViewController:duration:options:animations:completion)：

transitionFromViewController:toViewController:duration:options:animations:completion 可用：

*可用性
适用于 iOS 5.0 及更高版本。*

所以你可以期待`unrecognized selector sent to instance`iOS 5.0 之前的所有版本

对于自定义 TabBar，您可能需要查看以下帖子：http:
[//mobiledevelopertips.com/open-source/ios-open-source-custom-tabbar-controller-bctabbarcontroller.html](http://mobiledevelopertips.com/open-source/ios-open-source-custom-tabbar-controller-bctabbarcontroller.html)
[https://stackoverflow.com/a/4912328/ 200272](https://stackoverflow.com/a/4912328/200272)

# c# - 从 C# Codebehind 访问 App_Code 中的 VB 代码

> ID：10945127
> 
> 赞同：2
> 
> 时间：2012-06-08T08:02:55.423
> 
> 标签：c#, asp.net, webforms, app-code

我正在 VS 中开发一个主要用 VB 编写的 Web 项目（不是网站）。我正在使用 C# 创建一个新的 Web 窗体。Web 表单本身效果很好，但我无法访问 App_Code 文件夹中的类。App_Code 文件夹中的类是用 VB.net 编写的。

我试图在要编译的 vb 类文件上设置 Build Action，但这只会导致文件无法构建。（在注释行“字符文字中的字符过多”和导入“命名空间不能直接包含字段或方法等成员”时出现错误）。我也尝试过“使用” App_Code 文件夹，但我找不到它。

任何有关我如何解决此问题或解决方法的建议将不胜感激。

- - 编辑 - -

如果您将网站打开为“Web 应用程序”而不是“网站”，则 Visual Studio 的行为似乎有所不同。我猜这是因为它正在打包文件或其他东西。对不起，我没有意识到这一点，这就是导致问题的原因。该网站是一个用 VB 编写的 CMS 系统，但我正在用 C# 为它构建自定义用户控件/Web 表单，当我将它作为网站而不是作为 Web 应用程序时，它工作得很好。我们正在尝试将此 CMS 系统迁移到 Azure，我从全新安装的 CMS 系统开始。从站点创建 Web 角色的唯一方法是它是 Web 应用程序。这就是为什么在我让网站在 Azure 上运行并开始为 CMS 创建自定义模块之前我没有发现这个问题的原因。

---编辑：解决方法---

我重新开始了 CMS 安装，开箱即用，并将其导入到 Web 应用程序项目中。然后我创建了两个新库，一个 C# 库和一个 VB 库。我将 App_Code 文件夹中的代码移动到 VB 库中，并在 Web 应用程序项目和 C# 库中引用了该库。我在 Web 应用程序项目中对 C# 库进行了引用，并在 C# 库中添加了构建操作以将 .aspx 和 .ascx 文件复制到 Web 应用程序项目代表文件夹。我现在可以使用 C# 作为语言创建新的 Web 控件和 Web 窗体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:33:39.303

VB 和 C# 代码可以共存于同一个 App_Code 中。请参阅[此页面](http://virendradugar.wordpress.com/2009/06/15/using-c-and-vb-net-classes-together-in-the-app_code-folder/)以了解如何操作。基本上，您只需将每个文件分开到它们自己的目录中并修改您的 web.config。

# python - 如何为 neo4j 配置 django settings.py？

> ID：10945135
> 
> 赞同：3
> 
> 时间：2012-06-08T08:03:42.683
> 
> 标签：python, django, neo4j

我正在尝试使用 django 和 neo4j 编写一个简单的应用程序。

我从github下载[了neo4j-django-tutorial](https://github.com/johanlundberg/neo4j-django-tutorial)，一步一步运行。

但是，我发现在本教程的settings.py中，db的配置如下：

```
DATABASES = {
'default': {
    'ENGINE': 'django.db.backends.sqlite3',
    'NAME': join(NEO4JTUT_ROOT, 'db/neo4jtut.sqlite'),
}
} 
```

我怀疑这个项目仍然使用 sqlite3 作为后端数据库，而不是 neo4j。

我应该怎么做才能用neo4j配置它？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:22:46.140

本项目同时使用 neo4j 和 sqlite3。正如您在apps/neo4japp 中的models.py 和views.py 中看到的，节点也存储在sqlite3 中，但一些查询通过new4jclient.py 发送到neo4j。

对于使用 neo4j 作为数据库备份，这应该会有所帮助：[Developing a web application in python with neo4j](https://stackoverflow.com/questions/7721737/developing-a-web-application-in-python-with-neo4j)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T03:29:53.393

试试灯泡快速入门：[http ://bulbflow.com/quickstart/](http://bulbflow.com/quickstart/)

它是一个普通的 Python 库，它使用 Neo4j Server（免费）而不是 Neo4j Embedded，所以你不必弄乱 Java。Neo4j Server 可以更好地与 Django 和 Flask 等 Web 框架配合使用。

一旦你构建了你的应用程序，你就可以使用 Neo4j 插件在 Heroku 上免费运行它。

# azure - 如何在 Azure 预览门户中从 Blob 存储中的包创建部署？

> ID：10945141
> 
> 赞同：2
> 
> 时间：2012-06-08T08:04:13.940
> 
> 标签：azure

在之前的 Silverlight Azure 管理门户中，可以“浏览存储”并从 Blob 存储中选择服务包和服务配置：

![旧门户](../Images/ce0c7fbe1ed98fbf7dbd27f38a833d9b.png)

这非常方便。

现在在“预览”新门户中，等效对话框如下所示：

![新门户](../Images/21c4b86360f108f253611c2c43bad376.png)

看起来现在唯一的选择是直接从我的电脑上传文件。

现在如何从 Blob 存储中的文件创建或更新部署？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:01:42.353

我认为这在新门户中尚不可用。您始终可以从较新的门户转到旧门户并从那里使用该功能。还有一些新门户不会做的事情（例如 SQL Azure 管理、管理共同管理员等），对于这些，您需要转到旧门户。

希望这可以帮助。

# java - 如何在我的代码中使用 Base64.java 文件？

> ID：10945147
> 
> 赞同：3
> 
> 时间：2012-06-08T08:04:38.903
> 
> 标签：java, jakarta-ee, base64, http-authentication

我正在尝试这个

```
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.URL;

public class HttpBasicAuth {

public static void downloadFileWithAuth(String urlStr, String user, String pass, String outFilePath) {
    try {
        // URL url = new URL ("http://ip:port/download_url");
        URL url = new URL(urlStr);
        String authStr = user + ":" + pass;
        String authEncoded = Base64.encodeBytes(authStr.getBytes());

        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setRequestMethod("GET");
        connection.setDoOutput(true);
        connection.setRequestProperty("Authorization", "Basic " + authEncoded);

        File file = new File(outFilePath);
        InputStream in = (InputStream) connection.getInputStream();
        OutputStream out = new BufferedOutputStream(new FileOutputStream(file));
        for (int b; (b = in.read()) != -1;) {
            out.write(b);
        }
        out.close();
        in.close();
    }
    catch (Exception e) {
        e.printStackTrace();
    }
}
} 
```

1.  它工作正常，但给出错误“找不到符号错误 Base64Encoder”
2.  下载 Base64.java 文件

现在我不知道如何在我的项目中使用这个文件来消除错误。你能告诉我如何使用 Base64.java 文件来消除错误吗？

感谢期待。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:40:55.363

您可以只使用 JDK 本身中存在的 Base64 编码/解码功能。包**javax.xml.bind**包含一个**DatatypeConverter**类，它提供打印/解析各种形式的方法，包括

```
static byte[] parseBase64Binary(String lexicalXSDBase64Binary)
static String printBase64Binary(byte[] val) 
```

只需导入**javax.xml.bind.DatatypeConverter**并使用提供的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T08:10:41.847

需要将其`Base64`导入您的代码。导入取决于您的源文件。 [Apache Commons Codec](http://commons.apache.org/codec/)具有 Base64 的可靠实现。

例子：

```
import org.apache.commons.codec.binary.Base64; 
```

# android - @font-face 在 Android 浏览器中不起作用

> ID：10945159
> 
> 赞同：6
> 
> 时间：2012-06-08T08:05:39.153
> 
> 标签：android, css, google-chrome, font-face

除了and （来自[http://oftn.org/css/global.css](http://oftn.org/css/global.css) ）之外，以下`@font-face`声明在每个主要浏览器中都可以正常工作：`(including Chrome for Android)``Android Browser``Firefox for Android`

```
@font-face {
        font-family: "OFTN Aller";
        src: url("../fonts/OFTN-Aller-Bold.woff") format("woff"),
             url("../fonts/OFTN-Aller-Bold.ttf") format("truetype");
        font-weight: bold;
        font-style: normal;
}
@font-face {
        font-family: "OFTN Aller";
        src: url("../fonts/OFTN-Aller.woff") format("woff"),
             url("../fonts/OFTN-Aller.ttf") format("truetype");
        font-weight: normal;
        font-style: normal;
} 
```

我可能做错了什么？

## 截图

**安卓 4.0.3 浏览器：**

![oftn.org 的截图](../Images/03105760e0bf8c277a9b8b89ba0a1654.png)

**Windows 7 上的 Chrome 19：**

![oftn.org 的截图](../Images/4978ad2fafc825f7a26c80737d9c1ba5.png)

**Windows 7 上的 Firefox 13：**

![oftn.org 的截图](../Images/4bc3d779dca5975196b9d313e5e4d6e0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:13:50.030

.woff 在 android 中不受支持

检查 [字体支持](http://caniuse.com/woff)

编辑：我认为页面加载正确，因为它在桌面上看起来相同。

```
Our Name
ΩF:∅ means "ohm-farad to none", and we usually pronounce it as "often". 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T21:00:33.843

我将 OFTN Aller（粗体）子集更多，因为我不再将它用于其他标题（只有徽标），这似乎解决了问题。

# android - 使用 setListAdapter

> ID：10945161
> 
> 赞同：2
> 
> 时间：2012-06-08T08:05:45.857
> 
> 标签：android, actionbarsherlock

在我的应用程序中，4 个片段附加到一个活动类。在我的活动类中，我使用它设置了根内容视图

```
setContentView(R.layout.fragment_pager); 
```

我的四个片段位于单独的 java 文件中。

在我的一个片段中，我正在显示我使用的联系人列表

```
mAdapter = new SimpleCursorAdapter(getActivity(),
                android.R.layout.simple_list_item_1, null,
                new String[] {ContactsContract.Contacts.DISPLAY_NAME},
                new int[] { android.R.id.text1}, 0);

setListAdapter(mAdapter);
setListShown(true); 
```

我想知道在我的情况下 setListAdapter 的用途是什么以及它将 SimpleCursorAdapter 类给出的内容列表放在哪里？以及如何设置片段的标题。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:drawable/gallery_thumb">

    <TextView android:id="@+id/text"
        android:layout_width="match_parent" android:layout_height="wrap_content"
        android:gravity="center_vertical|center_horizontal"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="@string/hello_world"/>

    <!-- The frame layout is here since we will be showing either
    the empty view or the list view.  -->
    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1" >
        <!-- Here is the list. Since we are using a ListActivity, we
             have to call it "@android:id/list" so ListActivity will
             find it -->
        <ListView android:id="@android:id/list"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:drawSelectorOnTop="false"/>

        <!-- Here is the view to show if the list is emtpy -->
        <TextView android:id="@android:id/empty"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:text="No items."/>

    </FrameLayout>

</LinearLayout>

 @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);  

         mAdapter = new SimpleCursorAdapter(getActivity(),
                android.R.layout.simple_list_item_1, null,
                 new String[] {ContactsContract.Contacts.DISPLAY_NAME},
                 new int[] { android.R.id.text1}, 0);
         //setListAdapter(mAdapter);
        // setListShown(true);
        // getLoaderManager().initLoader(0, null, this);
    }    

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.fragment_pager_list, container, false);
        View tv = v.findViewById(R.id.text);
        ((TextView)tv).setText("Contacts");

        return v;
    } 
```

当我使用此方法并删除两个方法 onCreate 和 onCreateView 时，我的光标显示数据

```
@Override 
    public void onActivityCreated(Bundle savedInstanceState) {
       super.onActivityCreated(savedInstanceState);

       mAdapter = new SimpleCursorAdapter(getActivity(),
                android.R.layout.simple_list_item_1, null,
                new String[] {ContactsContract.Contacts.DISPLAY_NAME},
                new int[] { android.R.id.text1}, 0);
       setListAdapter(mAdapter); 
       setListShown(true);
       getLoaderManager().initLoader(0, null, this);

    } 
```

但是当我同时使用这三种方法时，我的应用程序会意外停止。当我同时使用这三种方法时会出现什么错误？

```
package com.keepintouch.android;

import android.os.Bundle;

import android.content.Context;
import android.database.Cursor;
import android.net.Uri;

import android.provider.ContactsContract;

import android.support.v4.app.Fragment;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;

import android.support.v4.widget.SimpleCursorAdapter;
import android.util.Log;

import android.view.View;

import android.widget.ListView;

import com.actionbarsherlock.app.SherlockListFragment;

public class ContactsFragment extends SherlockListFragment implements LoaderManager.LoaderCallbacks<Cursor>{

     // This is the Adapter being used to display the list's data.
    SimpleCursorAdapter mAdapter;

    // If non-null, this is the current filter the user has provided.
    String mCurFilter;  
    View lv;

    // These are the Contacts rows that we will retrieve.
    static final String[] CONTACTS_SUMMARY_PROJECTION = new String[] {
        ContactsContract.Contacts._ID,
        ContactsContract.Contacts.DISPLAY_NAME,
    };

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);  

    }    

    public static Fragment newInstance(Context context){
        ContactsFragment contactFragment = new ContactsFragment();
        return contactFragment;
    }

    @Override 
    public void onActivityCreated(Bundle savedInstanceState) {
       super.onActivityCreated(savedInstanceState);

       mAdapter = new SimpleCursorAdapter(getActivity(),
                android.R.layout.simple_list_item_1, null,
                new String[] {ContactsContract.Contacts.DISPLAY_NAME},
                new int[] { android.R.id.text1}, 0);

       setListAdapter(mAdapter); 
       setListShown(true);
       getLoaderManager().initLoader(0, null, this);

    }

    @Override 
    public void onListItemClick(ListView l, View v, int position, long id) {
        // Insert desired behavior here.
        Log.i("FragmentComplexList", "Item clicked: " + id);
    }

    public Loader<Cursor> onCreateLoader(int id, Bundle args) {
         // This is called when a new Loader needs to be created.  This
        // sample only has one Loader, so we don't care about the ID.
        // First, pick the base URI to use depending on whether we are
        // currently filtering.
        Uri baseUri;
        if (mCurFilter != null) {
            baseUri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_FILTER_URI,
                      Uri.encode(mCurFilter));
        } else {
            baseUri = ContactsContract.Contacts.CONTENT_URI;
        }

        // Now create and return a CursorLoader that will take care of
        // creating a Cursor for the data being displayed.
        String select = "((" + ContactsContract.Contacts.DISPLAY_NAME + " NOTNULL) AND ("
                + ContactsContract.Contacts.HAS_PHONE_NUMBER + "=1) AND ("
                + ContactsContract.Contacts.DISPLAY_NAME + " != '' ))";
        return new CursorLoader(getActivity(), baseUri,
                CONTACTS_SUMMARY_PROJECTION, select, null,
                ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC");
    }

    public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
        // Swap the new cursor in.  (The framework will take care of closing the
        // old cursor once we return.)
        mAdapter.swapCursor(data);

        // The list should now be shown.
        if (isResumed()) {
            setListShown(true);
        } else {
            setListShownNoAnimation(true);
        }
    }

    public void onLoaderReset(Loader<Cursor> loader) {
        // This is called when the last Cursor provided to onLoadFinished()
        // above is about to be closed.  We need to make sure we are no
        // longer using it.
        mAdapter.swapCursor(null);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:09:29.073

如果您使用 Listfragement setListAdapter 设置默认列表中的 Adapter 随附 Listfragement..

如果使用操作栏 (android:targetSdkVersion="15")

```
ActionBar ab =  this.getActionBar();
ab.setTitle("       "); 
```

如果不是那么

```
 getActivity().setTitle("     "); // after onAttach called 
```

# php - 从对象数组制作表格

> ID：10945163
> 
> 赞同：0
> 
> 时间：2012-06-08T08:06:05.503
> 
> 标签：php, mysql, object

我有这个对象：

```
stdClass Object
(
[daily_inventoryID] => 1
[inventory_timestamp] => 2012-06-08 14:35:42
[inventory_date] => 2012-06-08
[inventory] =>
Array
(
[0] => stdClass Object
    (
        [ingredientID] => 2
        [code] => Bf
        [description] => 1st Class Flour
        [volume] => 8268
        [price] => 750
        [amount_gram] => 0.02980
        [status] => Inactive
        [uom_id] => 1
        [flour] => Yes
    )

[1] => stdClass Object
    (
        [ingredientID] => 3
        [code] => Sf
        [description] => 3rd Class Flour
        [volume] => 18490
        [price] => 635
        [amount_gram] => 0.02540
        [status] => Inactive
        [uom_id] => 5
        [flour] => Yes
    )
........... 
```

假设我们将对象命名为 $inv，我想显示 $inv->inventory 的值，它是一个包含对象的数组。

我将如何使用 foreach 或 for 循环来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:07:35.940

```
foreach ($inv->inventory as $inventory) {
  print_r($inventory);
} 
```

# java - Wicket：从类变量名称中获取 DropDownChoice 列表项名称

> ID：10945164
> 
> 赞同：1
> 
> 时间：2012-06-08T08:06:06.090
> 
> 标签：java, wicket

我正在使用 wicket 开发搜索功能。该类`DropDownChoice`用于选择要搜索的搜索项的哪个字段。如何做到这一点，以便直接从搜索的类中获取下拉名称。

假设我有一个`FooBar`包含变量的类`foo`和`bar`. 如果我想选择哪一个是选择条件字段，我如何从资源文件中获取命名，在我的资源文件中给出值，例如

```
 FooBar.foo="Search for foo"
   FooBar.bar="Search for bar" 
```

资源文件应该是这样的，但是如何在java类端连接呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:51:15.957

首先，您可以像这样获取字段及其值

```
import java.lang.reflect.Field;

public class FooBar extends AbstractFooBar{
public String foo = "Search for foo";
public String bar = "Search for bar";

public static void main(String[] args) throws IllegalArgumentException, IllegalAccessException {
    Field[] fields = FooBar.class.getFields();
    // Field[] fields = AbstractFooBar.class.getFields();
    for (Field field : fields) {
        System.out.println(field.get(new Object()).toString());
    }
} 
```

但是你可以猜到你不能使用任何抽象。此外，您的所有字段都必须是公开的。

您可以使用资源文件初始化您的类。您可以通过使用 IChoiceRenderer 将字段传递给 DropDownChoice，然后通过反射获取字段。

您的 DropDownChoice 类型可以是 Field 并且您可以通过提供字段列表来初始化它。然后在您的 IchoiceRenderer 中，您可以获得模型对象。

我希望它会有所帮助。

# assembly - 零标志和进位标志有什么区别？

> ID：10945166
> 
> 赞同：4
> 
> 时间：2012-06-08T08:06:22.550
> 
> 标签：assembly, zero, mov

零标志和进位标志有什么区别？

对于零标志，它说

```
mov ax , 0FFFF ; 
inc ax ; AX= 0 , ZF=1 
```

* * *

对于携带标志，它说

```
mov al , 0FFh
add al , 1  ; CF=1,AL=00 
```

的值`AL`等于零，那么为什么零标志没有设置为 1？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T12:49:36.660

听起来您了解标志的含义/作用，以防万一：

零标志非常简单如果操作的结果是零零标志将被设置否则它将被清除

进位标志有多种使用方式，但在这种情况下，对于加法操作，它是进位位，即无符号溢出。

假设你将两个十进制数字 92 和 5 相加得到 97，没问题，如果你将 92 和 12 相加得到 104，但是如果你有一台十进制计算机或有一小张纸，你只能拿着两个数字因此答案是 04 而不是 104，答案可能被认为是错误的，具体取决于您想要做什么。当你做那个数学时，你对自己说 2+2 = 4，然后 9 + 1 = 0 携带 1。这就是进位的来源，你将那个携带到下一列，但处理器的列数有限.

加法逻辑（子使用加法）不知道或关心有符号（二进制补码）与无符号数（这是二进制补码的美妙之处），您将操作数提供给相同的逻辑，您会得到相同的答案。不同之处在于溢出，无符号溢出是进位位。如果处理器有符号溢出（我说的是通常不是特定于一个处理器），则检测结果是否包含足够的信息来存储答案。例如 0x80 + 0x80 = 0x00。unsigned 是 128 + 128 并且你得到一个有符号溢出， unsigned 它是 -128 + -128 结果是 -256。您添加了两个负数，减号加减号等于减号，但最终得到 0x00，这是一个正数，溢出。

无论使用什么指令集，如果您使用标志，您都需要查找和/或记忆受每条指令影响的标志（您用于设置标志）。每个指令集都有不同的标志规则，并非每条 alu 指令都会影响所有标志，等等。如果你有一个 inc 指令与一个可用于执行 inc 的加法（小）立即指令分开，那么在合理范围内设计师将有一个影响标志，而另一个则没有。对于像这样的情况，特别是你有同一个寄存器的这些拆分定义，EAX，AX，AH，AL，在哪里可以对寄存器的一部分进行操作，即使寄存器的其余部分不为零，您是否声明 AH 操作为零？它是基于操作大小的定义还是基于您操作的部分之外的整个寄存器？这里的每个人都可能知道答案，但是当您在第一次开始学习这个处理器时看到寄存器定义时，这应该是第一个想法。在您查找答案并记住它之前，您应该在每次想要从指令中获取标志时查找它。设计人员会故意将操作放入不与标志混淆的操作中，以节省执行操作所需的指令。有些可能不会强制标志始终是决策分支之前的指令，有些（mips）分支本身是alu操作和决策（无标志）。在您查找答案并记住它之前，您应该在每次想要从指令中获取标志时查找它。设计人员会故意将操作放入不与标志混淆的操作中，以节省执行操作所需的指令。有些可能不会强制标志始终是决策分支之前的指令，有些（mips）分支本身是alu操作和决策（无标志）。在您查找答案并记住它之前，您应该在每次想要从指令中获取标志时查找它。设计人员会故意将操作放入不与标志混淆的操作中，以节省执行操作所需的指令。有些可能不会强制标志始终是决策分支之前的指令，有些（mips）分支本身是alu操作和决策（无标志）。

您的问题的答案是在文档中查找，养成查找的习惯。不要假设所有 alu 操作都会影响所有标志，请查找相关指令和寄存器。“为什么”的答案是因为这就是他们想要做的事情，它就是这样，除非你在一个设计新处理器的团队中，作为程序员，你得到你得到的东西，使用它......你的问题本身会导致对不同答案的期望，您从 16 位操作切换到 8 位操作，然后从添加切换到 inc，其中一个或两个对于设计人员更改定义是完全有效的，期望他们这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T10:07:14.307

不，在这两种情况下都会设置零标志。证据在布丁中：

![在此处输入图像描述](../Images/a5c356dc9be42087bb1cf3ace6dc6908.png)

INC 指令不影响进位标志。x86 指令集中的一个怪癖，但几乎可以肯定是故意这样做的，以允许在使用 ADC 计算任意精度加法时增加指针或索引。

# c# - 使用 RhinoMock 进行单元测试：在预期调用语句中从 CuT 调用方法

> ID：10945168
> 
> 赞同：1
> 
> 时间：2012-06-08T08:06:26.127
> 
> 标签：c#, unit-testing, rhino-mocks

实际上我正在编写单元测试，为此我使用 RhinoMocks。

测试方法：

```
{
   ...
   var classA = repo.StrictMock<IMyInterface>();
   Expect.Call(()=>classA.AddItem()). // call here method cuT.ItemAdded()
   repo.ReplayAll();

   // test
   cuT.DoSomething(classA);

   ...
} 
```

待测类：

```
{
   ...
   public void DoSomething(IMyInterface myInterface)
   {
      myInterface.AddItem();
   }

   public void ItemAdded(object sender, ItemEventArgs e)
   {
     UpdateModel(); // update model only if item wasn't added by AddItem() method called from DoSomething()..
     ...
   }
} 
```

我的问题是，我如何定义 Expect.Call() 语句，以便通过调用接口上的预期方法 AddItem() 来调用 cuT.ItemAdded() 。

在此先感谢您的帮助！

问候， rhe1980

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:39:13.050

你真正想要的是两个测试，因为使用事件表明添加项目可能来自不同的来源（而不是`DoSomething`方法）：

```
// 1: This test will simply verify that tested method calls dependency
public void DoSomething_AddsItemOnMyInterface()
{
    var myInterface = MocksRepository.GenerateMock<IMyInterface>();
    myInterface.Expect(m => m.AddItem()).Repeat.Once();

    cut.DoSomething(myInterface);

    myInterface.VerifyAllExpectations();
}

// 2: Here we assure that model gets updated when item was added
public void ItemAdded_UpdatesModel_WhenMyInterfaceRaisesEvent()
{
    var myInterface = MocksRepository.GenerateMock<IMyInterface>();
    myInterface.Expect(m => m.AddItem()).Repeat.Once();

    myInterface.Raise(m => m.ItemAddedEvent += null, myInterface,
        new ItemEventArgs());

    // How exactly model is updated when event is raised? The 'how'
    // should be asserted here.
} 
```

例如，如果`UpdateModel`将您的类属性设置为某个值，您会断言。如果它正在清除某些集合，则在断言中您将检查该集合是否为空。从测试的角度来看，事件本身并不有趣（将其视为**条件**）；有趣的是引发该事件时*会发生什么*（**合同）。**并且测试应该检查合同确实发生了*什么。*

顺便说一句，您使用的语法（Record-Replay）有点旧。Rhino 现在支持更流畅的 Arrange-Act-Assert 语法（使用`Expect`,`Stub`和`Verify`方法）。更多可以在 wiki 页面上[找到](http://ayende.com/wiki/Rhino%20Mocks%203.5.ashx)。

# hadoop - 使用 Sqoop 将 Hive 转换为 Vectorwise

> ID：10945170
> 
> 赞同：1
> 
> 时间：2012-06-08T08:06:48.547
> 
> 标签：hadoop, hive, sqoop, ingres

我安装了 Vectorwise 2.0.2 和 Sqoop 1.4.1。

当我尝试使用时`sqoop-export`：

```
sudo -u hdfs ./sqoop-export --driver com.ingres.jdbc.IngresDriver --connect jdbc:ingres://172.16.63.157:VW7/amit --username ingres -P -m 1 --table book_call_log --export-dir /user/hive/warehouse/book_call_log --input-fields-terminated-by '\001' --verbose

Warning: /usr/lib/hbase does not exist! HBase imports will fail.
Please set $HBASE_HOME to the root of your HBase installation.
Enter password: 
12/06/08 19:00:52 INFO manager.SqlManager: Using default fetchSize of 1000
12/06/08 19:00:52 INFO tool.CodeGenTool: Beginning code generation
12/06/08 19:00:53 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM book_call_log AS t WHERE 1=0 
```

操作在这里卡住了。没有错误提示，也没有出现提示。

任何与此相关的帮助表示赞赏。

# flash - 如何通过 red5 服务器在音频中进行 2 路交互

> ID：10945175
> 
> 赞同：1
> 
> 时间：2012-06-08T08:07:18.700
> 
> 标签：flash, flex4, streaming, audio-streaming, red5

我是 Flash 开发的新手。我正在尝试创建一个 flash（我已经做到了，并且可以将流保存到 red 5 服务器），在其中我可以选择将我自己的麦克风流发布到 red5 服务器，而且，我有收听已发布的流的选项。我将在两台不同的机器上使用相同的闪光灯。我将通过为流提供不同的名称来发布两台机器的麦克风。然后我将尝试打开来自对面机器的流，所以我可以从 2 台机器上进行 2 路音频聊天。

例如，从机器 1 发布的流是 Stream1。从机器 2 发布的流是 Stream2。

```
The stream played from machine 1 was Stream2.
The stream played from machine 2 was Stream1. 
```

我面临的问题是我很难实现双向通信。也就是说，我无法从第一台机器听到流 2。当我从第二台机器发布流时，我的第一个流被断开并且是被第二个流覆盖。谁能给我一个适当的建议，如何纠正这个问题以实现 gud 2 路连接，或者我如何将 2 个音频流在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T21:23:25.333

                  好吧，要拥有一个使用 red5 和 flex 4.5 的音频聊天应用程序，您可以尝试下面的代码。当然，它应该根据您的目的进行调整：

语音聊天机 1          

```
<mx:Script>
     <![CDATA[
         import mx.controls.Alert;

         private var netConnection:NetConnection;
         private var InsertStream:NetStream;
         private var getStream:NetStream;
         private var connectionUrl:String="rtmp://YOURSERVER/vchat";

         private function init():void
         {
             netConnection=new NetConnection();
             netConnection.connect(connectionUrl);
             netConnection.addEventListener(NetStatusEvent.NET_STATUS,connectHandler);
         }                                   

         private function connectHandler(e:NetStatusEvent):void
         {
          if(e.info.code=="NetConnection.Connect.Success")
          {                                            
            InsertStream=new NetStream(netConnection);
              InsertStream.attachAudio(Microphone.getMicrophone());
              InsertStream.publish("stream1","live");
              getStream=new NetStream(netConnection);
              getStream.attachAudio(Microphone.getMicrophone());
              getStream.play("stream2"); // play the machine 2 stream
          }
          else
          {
              Alert.show("server Problem");
          }                                
  }
 ]]>
 </mx:Script> 
```

机器 2

```
<mx:Script>
     <![CDATA[
         import mx.controls.Alert;

         private var netConnection:NetConnection;
         private var InsertStream:NetStream;
         private var getStream:NetStream;
         private var connectionUrl:String="rtmp://YOURSERVER/vchat";

         private function init():void
         {
             netConnection=new NetConnection();
             netConnection.connect(connectionUrl);
             netConnection.addEventListener(NetStatusEvent.NET_STATUS,connectHandler);
         }                                   

         private function connectHandler(e:NetStatusEvent):void
         {
          if(e.info.code=="NetConnection.Connect.Success")
          {                                            
              InsertStream=new NetStream(netConnection);
              InsertStream.attachAudio(Microphone.getMicrophone());
              InsertStream.publish("stream2","live");
              getStream=new NetStream(netConnection);
              getStream.attachAudio(Microphone.getMicrophone());
              getStream.play("stream1"); // play stream from the other machine
          }
          else
          {
              Alert.show("server Problem");
          }                                
  }
 ]]>
 </mx:Script> 
```

# blackberry-webworks - BB 10 WebWorks 签名疑点

> ID：10945184
> 
> 赞同：0
> 
> 时间：2012-06-08T08:07:46.983
> 
> 标签：blackberry-webworks, blackberry-10

我对 BB 10 WebWorks 中的签名和打包有疑问。

签名密钥是否类似于普通的智能手机签名密钥，还是与剧本不同？

如果是这样，安装在文件夹中的签名密钥将在哪里。

我遇到了签名问题。

```
D:\Program Files\Research In Motion\BlackBerry 10 WebWorks SDK 1.0.0.7>bbwp E:\A 
```

ppBB10\HelloWorldBB10.zip -s E:\PackBB10 -g Pass123# -o E:\OutputBB10

D:\Program Files\Research In Motion\BlackBerry 10 WebWorks SDK 1.0.0.7>"D:\Progr am Files\Research In Motion\BlackBerry 10 WebWorks SDK 1.0.0.7\dependencies\node \node.exe" "D:\ Program Files\Research In Motion\BlackBerry 10 WebWorks SDK 1.0.0 .7\lib\bbwp.js" E:\AppBB10\HelloWorldBB10.zip -s E:\PackBB10 -g Pass123# -o E:\O utputBB10 [INFO ] 填充应用程序源 [INFO] 解析 config.xml [错误] 无法签署应用程序 - 找不到签名密钥

D:\Program Files\Research In Motion\BlackBerry 10 WebWorks SDK 1.0.0.7>

谁可以帮我这个事

问候 Rakesh Shankar.P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:08:58.300

当我使用 BB 10 Web Works(1.0.0.15) 的最新 beta SDK 版本进行更新时，问题得到了解决。

# clojure - Clojure 中的 pound-quote (hash-quote, #') 是否运行解析和符号函数？

> ID：10945187
> 
> 赞同：18
> 
> 时间：2012-06-08T08:08:19.233
> 
> 标签：clojure, eval

也许你可以帮我在文档中找到这个。我使用 pound-quote 能够在执行之前传递未评估的函数名称。例如：

```
(#'cons 1 ())
;(1)

(defn funcrunner [func a b]
  (func a b))

(funcrunner cons 'a ())
;(a)

(funcrunner 'cons 'a ())
'()

(funcrunner #'cons 'a ())
;(a)

#'cons
;#'clojure.core/cons

(resolve (symbol 'cons))
;#'clojure.core/cons 
```

我的猜测是这是一个阅读器宏。

我的问题是 (a) 英镑引号 (#') 的简写是什么？(b) 你能解释一下它在做什么吗？(c) 你能在文档中找到它吗？(d) 它实际上是解析和符号函数的简写吗？

PS - 对于那些不在美国的人 - # 也称为“哈希”或“交叉哈希”。

PPS - 我知道我的示例使得对此的需求有些多余。我很想知道这是完全多余的还是有特定的用例。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-08T08:22:15.637

`#'`是扩展为 的阅读器宏`(var foo)`。您在这里所做的不是传递未评估的函数，而是传递包含函数的 vars。之所以如此，是因为 vars 是查找其包含的值并调用它的函数：

```
user=> (defn foo [x] (+ x 10))
#'user/foo
user=> (#'foo 10)
20
user=> ((var foo) 10)
20 
```

请注意，当我定义函数时，返回了一个 var。看起来你一直在做什么！:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T08:20:47.443

`#'`是阅读器宏`var`。请参阅[http://clojure.org/special_forms#var](http://clojure.org/special_forms#var)和[http://clojure.org/vars](http://clojure.org/vars)

`(var foo)`返回由 symbol 命名的 var `foo`，它可以保存任何类型的值，包括函数。

# python - python中字符串的完全匹配

> ID：10945188
> 
> 赞同：0
> 
> 时间：2012-06-08T08:08:20.357
> 
> 标签：python, string

我试图在一个字符串中找到一个子字符串，但我没有达到我想要的结果。

我有几个字符串包含指向不同目录的方向：

```
'/Users/mymac/Desktop/test_python/result_files_Sample_8_11/logs', 
'/Users/mymac/Desktop/test_python/result_files_Sample_8_1/logs', 
'/Users/mymac/Desktop/test_python/result_files_Sample_8_9/logs' 
```

这是我的代码的一部分，我试图找到与子字符串完全匹配的部分：

```
 for name in sample_names:

        if (dire.find(name)!=-1): 

            for files in os.walk(dire):

                for file in files:
                    list_files=[]
                    list_files.append(file)
                    file_dict[name]=list_files 
```

一切正常，除了在包含目录的字符串中查找 Sample_8_1 时，if 条件也接受名称 Sample_8_11。我怎样才能使它完全匹配以防止多次进入同一目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:15:13.860

您可以尝试搜索`sample_8_1/`（即包括以下斜杠）。我猜你的代码是`dire.find(name+'/')`. 这只是一种快速而肮脏的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T08:20:53.780

假设`dire`用绝对路径名填充

```
for name in sample_names:
    if name in dire:
        ... 
```

例如

```
samples = ['/home/msvalkon/work/tmp_1',
           '/home/msvalkon/work/tmp_11']

dirs = ['/home/msvalkon/work/tmp_11']

for name in samples:
    if name in dirs:
        print "Entry %s matches" % name

Entry /home/msvalkon/work/tmp_11 matches 
```

# url - 如何从 XSLT 中的 url 动态获取值

> ID：10945195
> 
> 赞同：1
> 
> 时间：2012-06-08T08:09:13.640
> 
> 标签：url, xslt

我有一个类型为 C:/Documents and Settings/Saxon/output1/index.html?value=65abc 的 url

现在我需要从我的 xslt 中的 url '65abc' 获取这部分。单击链接时，我从上一页获取此值。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:16:42.523

**使用**：

```
substring-after($pPath, '=') 
```

其中是对包含类似 url 的文件路径的值的`$pPath`全局外部的引用，从转换的调用者传递。`xsl:param`

**如果`pPath`包含多个查询字符串参数并且您想要访问第一个的值，则使用**：

```
substring-after(substring-before(substring-after($pPath, '?'), '&amp;'), '=') 
```

**如果您使用的是 XSLT 2.0 (XPath 2.0)，那么您可以访问名为`$pQName`using**的查询字符串参数的值：

```
 substring-after
   (tokenize(substring-after($pPath, '?'), '&amp;')
         [starts-with(., concat($pQName, '='))],
   '='
   ) 
```

**以下是完整的代码示例**：

1.  **最简单的情况**：

. . .

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:param name="pPath" select=
     "'C:/Documents and Settings/Saxon/output1/index.html?value=65abc'"/>

 <xsl:template match="node()|@*">
     <xsl:sequence select="substring-after($pPath, '=')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当这应用于任何 XML 文档（未使用）时，会产生想要的结果**：

```
65abc 
```

.2\. **当对任何 XML 文档（未使用**）执行此转换时：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:param name="pPath" select=
     "'C:/Documents and Settings/Saxon/output1/index.html?value=65abc&amp;x=1&amp;y=2'"/>
  <xsl:param name="pQName" select="'x'"/>   

 <xsl:template match="node()|@*">
     <xsl:sequence select=
     "substring-after
       (tokenize(substring-after($pPath, '?'), '&amp;')
             [starts-with(., concat($pQName, '='))],
      '='
      )"/>
 </xsl:template>
</xsl:stylesheet> 
```

**生成所需的字符串（名为 的查询字符串参数的值`x`）**：

```
1 
```

# android - 我如何在android中动态获取lat/long？

> ID：10945197
> 
> 赞同：0
> 
> 时间：2012-06-08T08:09:21.053
> 
> 标签：android, google-maps

当我在谷歌地图上绘制两个标记（源和目的地）时，我想动态地获得两个纬度/经度点。我可以在哪里使用这些纬度/经度点进行进一步的实施。

请帮助我如何得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:18:35.140

试试下面的代码。可能会帮助你..:)

```
mapView.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            GeoPoint p = null;

            if (event.getAction() == MotionEvent.ACTION_UP) {
                p = mapView.getProjection().fromPixels((int) event.getX(),
                        (int) event.getY());
                mapBackButton.setText(p.getLatitudeE6() / 1E6 + ","
                        + p.getLongitudeE6() / 1E6 + "Action is : "
                        + event.getAction());
                return true;
                Toast.makeText(
                        getBaseContext(),
                        p.getLatitudeE6() / 1E6 + "," + p.getLongitudeE6()
                                / 1E6 + "Action is : " + event.getAction(),
                        Toast.LENGTH_SHORT).show();
            }
            return false;
        }
    });

     mapView.dispatchTouchEvent(ev); 
```

根据您的需要进行编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:04:45.660

您可以使用[LocationManager](http://developer.android.com/reference/android/location/LocationManager.html)获取 Location 的实例[（](http://developer.android.com/reference/android/location/Location.html)使用 [getLastKnownLocation](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation%28java.lang.String%29)方法），其中包含有[getLatitude](http://developer.android.com/reference/android/location/LocationManager.html)和[getLongitude](http://developer.android.com/reference/android/location/Location.html#getLongitude%28%29)方法，然后使用这些方法获取纬度和经度。

# twig - 树枝变量中的树枝变量

> ID：10945200
> 
> 赞同：17
> 
> 时间：2012-06-08T08:09:41.410
> 
> 标签：twig

我有一个树枝变量**html**。为了在树枝模板中显示它，我会这样做`{{html}}`。

该变量如下所示：

`<div>{{region_top}}</div><div>{{region_center}}</div>`

`region_*`也是一个变量。当 Twig 解析我的`html`变量时，它不会解析内部变量（区域）。

我该做什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-08T08:15:29.263

> 我有树枝变量 html。为了在树枝模板中显示它，我使用 {{html}}。该变量看起来像 {{region_top}}{{region_center}}。region_* 也是变量。当 twig 解析我的 html 变量时，他没有解析内部变量（区域）。我该怎么办？

Twig 将您的字符串作为文字字符串，这意味着您将看到已转义的变量内容。如果您希望它也能够显示 {{region_top}}，我建议您这样做：

```
{{html|replace({'{{region_top}}': region_top, '{{region_center}}': region_center})}} 
```

如果您的 html 变量的内容也是动态的（这意味着它可以包含的不仅仅是这两个变量），我会编写一个可以执行您想要的操作的 twig 插件。编写插件很容易做到。

**编辑**：这是我刚写完的扩展。

**编辑 2**：扩展现在使用环境来呈现字符串，因此它评估字符串，而不仅仅是替换变量。这意味着您的变量可以包含模板可以包含的任何内容，并且它将由 Twig 本身呈现和转义。我真棒。

```
<?php

/**
* A twig extension that will add an "evaluate" filter, for dynamic evaluation.
*/
class EvaluateExtension extends \Twig_Extension {
    /**
    * Attaches the innervars filter to the Twig Environment.
    * 
    * @return array
    */
    public function getFilters( ) {
        return array(
            'evaluate' => new \Twig_Filter_Method( $this, 'evaluate', array(
                'needs_environment' => true,
                'needs_context' => true,
                'is_safe' => array(
                    'evaluate' => true
                )
            ))
        );
    }

    /**
     * This function will evaluate $string through the $environment, and return its results.
     * 
     * @param array $context
     * @param string $string 
     */
    public function evaluate( \Twig_Environment $environment, $context, $string ) {
        $loader = $environment->getLoader( );

        $parsed = $this->parseString( $environment, $context, $string );

        $environment->setLoader( $loader );
        return $parsed;
    }

    /**
     * Sets the parser for the environment to Twig_Loader_String, and parsed the string $string.
     * 
     * @param \Twig_Environment $environment
     * @param array $context
     * @param string $string
     * @return string 
     */
    protected function parseString( \Twig_Environment $environment, $context, $string ) {
        $environment->setLoader( new \Twig_Loader_String( ) );
        return $environment->render( $string, $context );
    }

    /**
     * Returns the name of this extension.
     * 
     * @return string
     */
    public function getName( ) {
        return 'evaluate';
    }
} 
```

示例用法：

```
$twig_environment->addExtension( new EvaluateExtension( ) ); 
```

在模板中：

```
{% set var = 'inner variable' %}
{{'this is a string with an {{var}}'|evaluate}} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-18T19:28:28.310

见[http://twig.sensiolabs.org/doc/functions/template_from_string.html](http://twig.sensiolabs.org/doc/functions/template_from_string.html)

似乎这经常被忽略，因为大多数人在期望过滤器/函数以他们正在起草的当前语言进行评估时认为（并搜索）“eval”。来自字符串的模板不是第一个搜索查询头脑。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-10T17:58:58.123

一种选择是将模板呈现为字符串。你可以这样做：

```
$env = new \Twig_Environment(new \Twig_Loader_String());
echo $env->render(
  "Hello {{ name }}",
  array("name" => "World")
); 
```

我将由您决定如何准确地构建代码以使其工作，但它可能会是这样的： 1) 获取包含未被替换的变量的内部模板文本。2) 将该内部模板文本呈现到 $html 变量中。一定要传入你需要的任何变量。3) 渲染包含 {{html}} 的原始模板。请务必在 vars 数组中传入 'html' => $html

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-17T07:28:00.730

您还可以将数组或对象传递给视图，然后使用 twig attribute() 方法：[http ://twig.sensiolabs.org/doc/functions/attribute.html](http://twig.sensiolabs.org/doc/functions/attribute.html)

```
{% if attribute(array, key) is defined %}
    {{ attribute(array, key) }}
{% endif %} 
```

# java - Itemtap和监听事件功能Sencha Touch 2 List

> ID：10945202
> 
> 赞同：0
> 
> 时间：2012-06-08T08:09:47.337
> 
> 标签：java, javascript, google-maps, extjs, sencha-touch-2

大家好，我发现很难设置回调函数，我有一个列表，在我的控制器中，我正在尝试收听列表中的每个项目，以便在录制每个项目后，它会显示一个带有指向我商店中为该特定项目指定的指定纬度和日志的标记。我在想一个 itemtap 甚至会是最好的，但我不知道如何在我的控制器中设置它。

这是我的商店：

```
Ext.define('List.store.Presidents', {
extend : 'Ext.data.Store',

config : {
    model : 'List.model.President',
    sorters : 'lastName',
    storeId: 'contactmap',
    grouper : function(record) {
        return record.get('lastName')[0];
    },

    data : [{
        firstName : "Ikhlas HQ",
        lastName : "Tower 11A, Avenue 5, Bangsar South, No.8 Jalan Kerinchi 59200 Kuala Lumpur",
        lat : 3.110649,
        lng : 101.664991,
        id: '200',
    },
    {
        firstName : "PEJABAT WILAYAH SELANGOR",
        lastName : "No. 97, 97-1 & 97-2, Jalan Mahogani 5/KS7, Ambang Botanic, 41200 Klang, Selangor",
        lat : 3.003384,
        log : 101.45256,
        id: '001',
    },]}
}); 
```

这是我的控制器：

```
Ext.define('List.controller.Main', {
extend: 'Ext.app.Controller',
config: {
    refs: {
        main: 'mainpanel',
      },
    control: {
        'presidentlist': {
            disclose: 'showDetail'
        },
     } },
showDetail: function(list, record) {
            this.getMain().push({
                xtype: 'presidentdetail',
                title: record.fullName(),
                data: record.getData(),
listeners: {
    itemtap : function(component, map, geo, eOpts) {
                     var contactmap = Ext.getStore('contactmap'); 

                contactmap.load({ 
                    callback:function(records,map,componet,lad,log){
                        var position = new google.maps.LatLng(); 
                 }
                 var marker = new google.maps.Marker({
                    position: position,
                    map: map
                        });

                var infowindow = new google.maps.InfoWindow({
                    content: 'Working Fine'
                        });

            google.maps.event.addListener(marker, 'click', function() {
                    infowindow.open(map, marker);
                        });
                });

                },
              }, 
        })
     },
}); 
```

希望我能在这里得到一些帮助以继续我在这一点上被困住了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:13:59.797

```
Ext.define('List.controller.Main', {
extend: 'Ext.app.Controller',
config: {
    refs: {
        myList: 'presidentlist', // 'presidentlist' is xtype of your list
      },
    control: {
        myList: {
            itemtap: 'onMyListItemTap'
        },
     }
},
onMyListItemTap: function(list, index, target, record, e, eOpts) {
  // some functionality here
  var myLat = record.data.lat;  // etc.
  var myLng = record.data.lng;  // etc.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T06:23:46.880

我的控制器：

```
Ext.define('List.controller.Main', {
extend: 'Ext.app.Controller',
config: {
refs: {
    main: 'mainpanel',
  },
control: {
    myList: {
        itemtap: 'onMyListItemTap'
    },
    'presidentlist': {
            disclose: 'showDetail'
        },
 }
},
showDetail: function(list, record) {
            this.getMain().push({
                xtype: 'presidentdetail',
                title: record.fullName(),

onMyListItemTap: function(list, index, target, record, e, eOpts) {
    var position = new google.maps.LatLng();

    var myLat = record.data.lat;  
    var myLng = record.data.lng;

    var marker = new google.maps.Marker({
                    position: position,
                    map: map
                        });

google.maps.event.addListener(marker, 'click', function() {
                    infowindow.open(map, marker);
                        });

                    setTimeout(function() {
                    map.panTo(position);
                        }, 1000);
},
});
 },
}); 
```

我的店铺：

```
Ext.define('List.store.Presidents', {
extend : 'Ext.data.Store',

config : {
    model : 'List.model.President',
    sorters : 'lastName',
    storeId: 'contactmap',
    grouper : function(record) {
        return record.get('lastName')[0];
    },

    data : [{
        firstName : "Ikhlas HQ",
        lastName : "Tower 11A, Avenue 5, Bangsar South, No.8 Jalan Kerinchi 59200 Kuala Lumpur",
        lat : 3.110649,
        log : 101.664991,
        id: '200',
    },
    {
        firstName : "PEJABAT WILAYAH SELANGOR",
        lastName : "No. 97, 97-1 & 97-2, Jalan Mahogani 5/KS7, Ambang Botanic, 41200 Klang, Selangor",
        lat : 3.003384,
        log : 101.45256,
        id: '001',
    }, {
        firstName : "PEJABAT WILAYAH KEDAH",
        lastName : "57, Jalan Lagenda 3, Legenda Heights, 08000, Sungai Petani, Kedah Darul Aman",
        lat : 5.657754,
        log : 100.50014,
        id: '002',
    },] 
},
}); 
```

我的模型：

```
Ext.define('List.model.President', {
extend : 'Ext.data.Model',
config : {
    store: 'Presidents',
    fields : ['firstName', 'middleInitial', 'lastName', 'lat', 'log', 'id']
},
fullName : function() {
    var d = this.data, names = [d.firstName, (!d.middleInitial ? "" : d.middleInitial + "."), d.id];
    return names.join(" ");
}
}); 
```

# android - 一个简单的相对布局，与父右对齐不起作用

> ID：10945205
> 
> 赞同：4
> 
> 时间：2012-06-08T08:09:55.470
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我做了一个简单的**相对布局**，它只包含 3 `TextView`，代码如下：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    > 

    <TextView 
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

    <!--Why this "age" TextView is not align to parent right?-->
    <TextView 
        android:id="@+id/age"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/name"
        android:layout_alignParentRight="true"/>

    <TextView 
        android:id="@+id/gender"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/name"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"/>

</RelativeLayout> 
```

我希望将第二个`TextView`(id="age") 定位在右侧，所以我使用`layout_alignParentRight="true"`，但是，它总是显示在第一个`TextView`(id="name") 之后，为什么？为什么它不去父母的权利（最右边）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T08:11:13.507

删除这个：

```
android:layout_toRightOf="@id/name" 
```

从年龄 TextView

# matlab - Matlab中从另一个子矩阵中挑选元素的最快方法是什么？

> ID：10945209
> 
> 赞同：0
> 
> 时间：2012-06-08T08:10:14.000
> 
> 标签：matlab

考虑有一个矩阵。从这个矩阵中，我从每一行中选择相同数量的元素。假设矩阵是`nxn`，并且从每一行中取`m`元素 ( `m<n`)。

我将用这个选定的元素构建一个`mxm`矩阵。在每一行中，我都放置了取自原始矩阵的元素（当然是相同的行索引）。

实现这一目标的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T08:17:29.640

此处说明了实现此目的的一种方法。定义一个数组`a`来玩......

```
a = randi(6,6);
b = a([1 3 5],[2 4 6]) 
```

这演示了使用索引向量将行和列从一个矩阵选择到另一个矩阵。这取决于能否指定要用作索引的向量。你也可以写：

```
c = a(1:2:end,2:2:end) 
```

现在，如果您告诉我们您所说的“最佳方式”是什么意思，我们也可以告诉您！

**编辑**

所以我再次阅读了这个问题，似乎“最好”是指“最快”。我从不关心测量这种操作的速度，我感兴趣地等待潜伏在这里的一位真正的 Matlab 专家提供比这更聪明的答案。

当然，最快的方法是根本不构建子矩阵，而是对原始矩阵的元素进行操作。我不知道您的算法是否可以适应避免构建子矩阵。

# android - 我可以使用 USB 直接连接两个 Android 设备吗？

> ID：10945210
> 
> 赞同：0
> 
> 时间：2012-06-08T08:10:16.127
> 
> 标签：android, connection, usb

我需要编写一个程序，允许 Android 设备（运行 2.2 版）通过 USB 连接将数据（一个简单的字符串）发送到另一台设备（也运行 2.2 版）。有没有图书馆可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:22:57.473

我相信这些设备必须在硬件中支持 USB 主机模式。然后其中一个需要处于存储媒体模式，然后您将使用标准文件系统访问功能。但硬件方面需要先处理。我会检查特殊的 USB 主机电缆，看看可以做什么。并非所有 Android 设备都可以进入 USB 主机模式。

# wpf - 如何使用 ItemsControl 获取 SelectedItem 并显示标题？

> ID：10945221
> 
> 赞同：1
> 
> 时间：2012-06-08T08:10:56.940
> 
> 标签：wpf, wpf-controls, itemscontrol

我正在开发 WPF Windows 应用程序。我正在使用 ItemsControl 来显示收藏列表。处理这个我发现 ItemsControl 中没有 SelectedItem 属性。那么如何从 ItemsControl 中获取 Selected Item。还有我如何显示 ItemsControl 的标题。

```
<ItemsControl ItemsSource="{Binding CustomSalesProducts, Mode=TwoWay}">
        <ItemsControl.Template>
            <ControlTemplate TargetType="ItemsControl">
                <Border>
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <ItemsPresenter/>
                    </ScrollViewer>
                </Border>
            </ControlTemplate>
        </ItemsControl.Template>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel CanHorizontallyScroll="True" CanVerticallyScroll="True" Orientation="Vertical"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Grid x:Name="SalesGrid" Background="White">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <controls:HeaderedContentControl Header="{Binding ProductName, Mode=TwoWay}" Margin="{DynamicResource Margin4}" Style="{DynamicResource HeaderedContentControlStyle}" HorizontalContentAlignment="Right">
                    </controls:HeaderedContentControl>
                    <TextBox Text="{Binding OrderQty, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Row="1" Margin="{StaticResource Margin4}" Style="{DynamicResource MiniTextBoxStyle}" ToolTip="Quantity" />
                    <TextBlock Text="{Binding UnitSalePrice, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="1" Grid.Row="1" Margin="{StaticResource Margin4}" ToolTip="Price"/>
                    <TextBox Text="{Binding Discount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="2" Grid.Row="1" Margin="{StaticResource Margin4}" Style="{DynamicResource MiniTextBoxStyle}" ToolTip="Discount"/>
                    <TextBlock Text="{Binding TaxAmount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="3" Grid.Row="1" Margin="{StaticResource Margin4}" ToolTip="Tax Amount"/>
                    <TextBlock Text="{Binding LineTotal, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="4" Grid.Row="1" Margin="{StaticResource Margin4}" ToolTip="Total"/>

                </Grid>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:13:30.427

正如你所说`SelectedItem`，在`ItemsControl`. 你可以`ListBox`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T03:40:48.583

我发现对于使用标题有 HeaderdItemsControl。有了这个我可以添加标题，而且它是不可重复的。但问题是我们必须为 header 及其项目定义静态大小，如果我们定义自动大小，那么 headeredItemsControl 的 UI 并不完美，所以我们必须给出它的静态大小。

您可以阅读[本文](https://radhikakhacharia.wordpress.com/2012/06/13/how-to-use-headereditemscontrol/)了解如何使用 HeaderedItemsControl？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-02T19:21:05.633

聚会有点晚了，但我遇到了同样的问题，希望这可以帮助其他人，这是我推出自己的 SelectedItem 的方式，因为我不想使用 ListBox。

您可以将 SelectedCustomSalesProduct 属性公开给您用作 DataContext 的类，然后您可以通过在选择项目时对其进行设置来自己跟踪所选项目。

在您的 SalesGrid 中，您可以为 MouseLeftButtonDown 和 TouchDown 事件添加事件处理程序，并使用 Tag 属性来保持对正在呈现的项目的引用，如下所示：

请注意，在我的例子中，我使用的是 StackPanel 而不是 Grid，并且我没有编译下面的代码，将其用于说明目的。

通过使用此示例，您应该能够大致了解并在您的业务服务中设置 Selected 项。

```
<DataTemplate>
    <Grid x:Name="SalesGrid" Background="White"
          Tag="{Binding}" 
          TouchDown="DataTemplate_Touch"
          MouseLeftButtonDown="DataTemplate_Click"> 
```

然后在您的用户控件/窗口代码中，您可以跟踪所选项目，如下所示：

```
/// <summary>
/// MyScreen.xaml
/// </summary>
public partial class MyScreen : UserControl
{
    private MyServiceWrapper _serviceWrapper;

    public MyScreen()
    {
        InitializeComponent();
    }
    public MyScreen(MyServiceWrapper serviceWrapper)
    {
        //Instrumentation.Log(typeof(MyScreen), LogTypes.Trace, "Creating instance of MyScreen");

        this._serviceWrapper = serviceWrapper;

        // Set your DataContext, is this the class that would also have your 
        // CustomSalesProducts property exposed 
        this.DataContext = this._serviceWrapper;
        InitializeComponent();
    }

    private void DataTemplate_Touch(object sender, System.Windows.Input.TouchEventArgs e)
    {
        SetSelectedCustomSalesProduct(sender);
    }

    private void DataTemplate_Click(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        SetSelectedCustomSalesProduct(sender);
    }

    private void SetSelectedCustomSalesProduct(object sender)
    {
        _serviceWrapper.SelectedCustomSalesProduct = ((Grid)sender).Tag as CustomSalesProduct;

    }

} 
```

# silverlight - Silverlight 绑定对父类属性的可见性

> ID：10945227
> 
> 赞同：0
> 
> 时间：2012-06-08T08:11:42.757
> 
> 标签：silverlight, binding, parent, visibility

我在列表框项模板中与父对象中的属性绑定可见性有问题。这是自定义 xaml 样式模板的一小段代码：

```
<!-- DATA BINDING ITEM TEMPLATE -->
<StackPanel Orientation="Vertical">
    <TextBlock Height="19"
        ....
        Text="{Binding InfoTop}"/>
    <Rectangle Height="1"
        ....
        Visibility="{Binding _linesVisibility[0], RelativeSource={RelativeSource AncestorType=my:PatientsList}}"/>
    <TextBlock Height="19"
        ....
        Text="{Binding InfoMiddle}"
        Visibility="{Binding _linesVisibility[0], ElementName=patientsControl}"/>
    <Rectangle Height="1"
        ....
        Visibility="{Binding _linesVisibility[1]}"/>
    <TextBlock Height="19"
        ....
        Text="{Binding InfoBottom}"
        Visibility="{Binding _linesVisibility[1]}"/>
</StackPanel> 
```

我设法通过在代码文件中分配 ItemsSource 来绑定文本值，但我无法绑定可见性。如您所见，我尝试了一些不同的想法，但都没有奏效。

`public Visibility[] _linesVisibility = new Visibility[2];`我的自定义控件中有公共变量。此控件包含具有上述自定义样式的列表框。如何正确绑定我的 _linesVisibility 到 listbox-item 样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:20:46.973

您不能直接绑定到数组：

```
Visibility="{Binding _linesVisibility[1]}" 
```

这行不通。

您需要绑定到一个属性，并且您的类需要实现`INotifyPropertyChanged`：

```
private Visibility backingVariable;
public Visbilility PublicProperty
{
    get { return backingVariable; }
    set
    {
        backingVariable = value;
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs("PublicVariable"));
        }   
    }
} 
```

它不必是 type 的属性`Visibility`。只要您通过返回的转换器绑定，它就可以是任何类型`Visibility`：

```
public class BoolToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        bool visibility = (bool)value;
        return visibility ? Visibility.Visible : Visibility.Collapsed;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        Visibility visibility = (Visibility)value;
        return (visibility == Visibility.Visible);
    }
} 
```

用法：

```
Visibility="{Binding SomeBoolean, Converter={StaticResource boolToVisibilityConverter}}" 
```

转换器在 XAML 中声明如下：

```
<UserControl.Resources>
    <globalConverters:BoolToVisibilityConverter x:Key="boolToVisibilityConverter" />
</UserControl.Resources> 
```

# database - 使用 dojo 根据在其他下拉列表中的选择动态地从数据库中填充下拉列表

> ID：10945231
> 
> 赞同：0
> 
> 时间：2012-06-08T08:12:18.027
> 
> 标签：database, servlets, drop-down-menu, dojo, cascadingdropdown

我只想知道如何使用 Dojo 设计 UI 我想根据其他下拉选择来填充下拉列表，并且关系可以是一对多的，即第二个下拉列表将基于第一个下拉列表，但随后，第三个下拉列表将根据第一个和第二个填充，依此类推。我的要求是，每当我在下拉列表中选择一个选项时，它应该被发送到一个 servlet（在给定的 URL 上运行），并带有选定的选项（以及之前所做的任何选择），以便 servlet 可以返回数据填充下一个下拉列表

具体问题

1.  我如何编写下拉表单元素的代码（使用dojo）
2.  如何将数据从 servlet 发送回网页，以便下拉列表中填充的 dojo 读取

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:53:38.057

请参阅[http://dojotoolkit.org/reference-guide/1.7/dijit/form/FilteringSelect.html#codependent-filteringselect-combobox-widgets](http://dojotoolkit.org/reference-guide/1.7/dijit/form/FilteringSelect.html#codependent-filteringselect-combobox-widgets)

# windows - Windows 媒体播放器的字幕

> ID：10945232
> 
> 赞同：1
> 
> 时间：2012-06-08T08:12:26.470
> 
> 标签：windows, vb.net, label, windows-media-player

我正在开发一个简单的视频播放器，它将在 Internet 上搜索视频并播放它们。我计划下载字幕（一些视频共享网站，例如 YouTube，支持此功能）并在我的基于 Windows Media Player 的表单中显示它们。

但似乎 WMP 不支持字幕。有一些解决方法，例如使用 VobSub，但这不起作用，因为我直接从 Internet 播放视频（搜索和下载字幕可能需要一段时间，所以我无法在播放视频时添加它们） . 所以我试图在 WMP 控件上显示一个标签，但我不能让它透明（当然只有它的背景）。

所以我正在寻求解决方案。我能做些什么来解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-29T13:12:06.913

我知道这已经很长时间了，但我也在为此研究解决方案，在 VB 中有一个透明键设置，我正在使用类似于你的想法。它将是透明的，除了一个标签将在顶部显示字幕。我已经制作了标签，现在正在制作字幕阅读器。

您要做的就是首先使表单无边框，然后转到表单属性并选择某种颜色的透明度键，然后为表单背景选择相同的颜色。它将使表单背景透明，任何使用相同颜色的控件也透明。

编辑：

```
Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load

'Setting Transperency Key
Me.TransparencyKey = Color.Aqua

'Setting Form Background color to transperency key
Me.BackColor = Me.TransparencyKey

'Making form borderless to make it completely transperent 
'but this will also result in being unable to move the form
Me.FormBorderStyle = Windows.Forms.FormBorderStyle.None

End Sub 
```

# javascript - javascript 粘贴到 textarea 时将 sitename.com 替换为 sitename2.com

> ID：10945237
> 
> 赞同：0
> 
> 时间：2012-06-08T08:12:54.467
> 
> 标签：javascript, replace

只是想知道每当用户将其粘贴到文本区域时，我将如何将 sitename.com 替换为 sitename2.com，即使在多行上也是如此。

例如，用户粘贴
sitename.com/index.php?v=somecrap
sitename.com/index.php?v=somecrap2
sitename.com/index.php?v=somecrap3

粘贴后它被替换为
sitename2.com/index.php?v=somecrap
sitename2.com/index.php?v=somecrap2
sitename2.com/index.php?v=somecrap3

让我知道是否可以使用 javascript。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:15:36.187

通过“onchange”处理程序和正则表达式的巧妙组合应该可以实现。带有示例的 jquery 片段：

```
function replacer() {
    var txt = $(this).val ();
    txt = txt.replace ( /sitename\.com/g, 'sitename2\.com' );
    $(this).val ( txt );    
} 

$('textarea').mouseup ( replacer ).keyup (replacer);​ 
```

这里：http: [//jsfiddle.net/u97WD/4/](http://jsfiddle.net/u97WD/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:48:53.050

如何使用`paste`事件？

但它在粘贴完成之前会触发，要编辑粘贴的内容，我需要`setTimeout`等待它完成。

[JSFiddle](http://jsfiddle.net/WnAhF/)

```
var pasted = document.getElementById("pasted"),
    replace = function() {
      pasted.value = pasted.value.replace(/sitename\.com/g, "sitename2.com");
    };
pasted.addEventListener("paste", function () {
  // Wait to the pasting completed
  setTimeout(replace, 0);
}, false); 
```

# add - 使用 Libelf/Elfio 库时遇到问题：ELF 不再可执行

> ID：10945239
> 
> 赞同：1
> 
> 时间：2012-06-08T08:13:12.693
> 
> 标签：add, executable, elf

我正在使用 Libelf 和 Elfio 尝试向 ELF 文件添加一个新部分。我希望它是可执行的，就像`.text`.

这是我的问题：使用Libelf，一旦我加载（`elf_begin()`）、更新（`elf_update()`）和释放（`elf_end()`）我的ELF，它就停止可执行（启动时出现*段错误*）。`readelf -S`显示部分但也返回错误：

```
readelf: Warning: the .dynamic section is not contained within the dynamic segment 
```

我没有在 Libelf 中找到任何可以将该部分“添加”`.dynamic`到该`DYNAMIC`段的功能。

但是我可以使用 Elfio（使用`segment->add_section_index()`函数）来做到这一点，但是我必须手动将每个其他部分添加到每个其他部分，因为 Elfio 在加载 ELF 时似乎会覆盖它们。

有没有人对这些图书馆有任何经验？

我的最终目标是能够在 ELF 中创建一个新的可执行部分，并修改其入口点以跳转并直接执行该新部分，以创建一个打包程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:47:04.347

Libelf 不管理可执行 ELF 文件的段（即程序头条目）。但是，默认情况下，它会在您调用`elf_update()`.

重新布局后，程序头条目很可能包含过时的偏移量。然后，加载器将尝试（或拒绝）从仅在编辑之前正确的文件偏移量中加载部分。

因此错误消息：.dynamic 部分现在位于文件中的另一个偏移量，加载程序注意到它不再位于 DYNAMIC 段中。

你可以通过调用来告诉Libelf你负责部分布局`elf_flagelf(elf, ELF_C_SET, ELF_F_LAYOUT)`。

但是话又说回来，添加一个新部分将不再那么容易了......

# java - 发件人和服务器 UDP 问题

> ID：10945249
> 
> 赞同：-1
> 
> 时间：2012-06-08T08:14:06.323
> 
> 标签：java, udp, client, server-side

我的发件人和服务器 UDP 有问题。`SenderUDP`发送一个对象并且必须`ServerUDP`接收它。对于第一个对象，一切正常，但是当我尝试发送另一个对象时，服务器会抛出一个`StreamCorruptedException`. 这里是客户端代码：

```
public class SenderUDP implements Runnable {
private java.net.DatagramSocket clientsocket;
private ObjectOutputStream out;
private int port;
private InetAddress ip;
private Packet objToSend;
private ByteArrayOutputStream baos;

public SenderUDP(String ip, int port, Packet p) throws UnknownHostException{
    this.ip =InetAddress.getByName(ip);
    this.port = port;
    this.objToSend = p;
    this.out = null;
    this.clientsocket = null;
}

@Override
public void run(){
    try{
        clientsocket = new DatagramSocket ();
        System.out.println("Inside senderUDP");
        byte[] sendData;                    
        baos = new ByteArrayOutputStream(1024);
        out = new ObjectOutputStream(baos);
        out.writeObject(objToSend);
        sendData = baos.toByteArray();           
        DatagramPacket sendpacket = new DatagramPacket(sendData,sendData.length,ip,port);            
        clientsocket.send(sendpacket);                 
        System.out.println("Sended packet with UDP");
        out.flush();
        if(this.objToSend.getOP() == 1){
            byte[] buf = new byte[1024];                
            int read;
            ByteArrayOutputStream bas = new ByteArrayOutputStream((int)this.objToSend.getFile().length());                
            FileInputStream fis = new FileInputStream(objToSend.getFile());
            while((read = fis.read(buf)) != -1){
                bas.write(buf, 0, read);
            }
            DatagramPacket sendfile = new DatagramPacket(bas.toByteArray(), bas.toByteArray().length, ip, port);
            clientsocket.send(sendfile);
        }           
        out.close();             
    }
    catch(UnknownHostException uhe) {
        System.err.println(uhe.getMessage());
    }
    catch(IOException ioe) {
        System.err.println(ioe.getMessage());
    }
} 
```

}

这是服务器端代码：

```
class ServerUDP implements Runnable {
private DatagramSocket socket;
private int port;
private Controller controller;
private byte[] buffer;
private DatagramPacket packet;
private Packet p;
private ObjectInputStream ois;

public ServerUDP(int port, Controller controller){
    this.socket = null;
    this.port = port;
    this.controller = controller;
}

@Override
public void run() {
    try {
            socket = new DatagramSocket(port);
        } catch (SocketException ex) {
            Logger.getLogger(ServerUDP.class.getName()).log(Level.SEVERE, null, ex);
        }
    while(true){               
        buffer = new byte[1000000];
        packet = new DatagramPacket(buffer,buffer.length);
        System.out.println("Ascolto UDP!");
        try {                
            socket.receive(packet);
            System.out.println(packet);
            System.out.println("1");
        } catch (IOException ex) {
            Logger.getLogger(ServerUDP.class.getName()).log(Level.SEVERE, null, ex);
        }
        System.out.println("Packet UDP Received!");
        try {
            ois = new ObjectInputStream(new ByteArrayInputStream(buffer));
        } catch (IOException ex) {
            Logger.getLogger(ServerUDP.class.getName()).log(Level.SEVERE, null, ex);
        }
        try {
            p = (Packet) ois.readObject();
            System.out.println("Pacchetto/Evento arrivato con UDP!");
            System.out.println(p);
        } catch (IOException | ClassNotFoundException ex) {
            Logger.getLogger(ServerUDP.class.getName()).log(Level.SEVERE, null, ex);
        }
        if(p.getOP() == 1){
            Thread t = new Thread(new FilesManager(socket,p,false, controller));
            t.start();
        }
        controller.enqueue(p);
        try {
            ois.close();
        } catch (IOException ex) {
            Logger.getLogger(ServerUDP.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

}

被`StreamCorruptedException`抛出

```
ois = new ObjectInputStream(new ByteArrayInputStream(buffer)); 
```

和

```
p = (Packet) ois.readObject(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T21:26:47.080

每次在另一端有一个新的 ObjectOutputStream 时，您都需要使用一个新的 ObjectInputStream，并且在其他任何时候都不需要。在这种情况下，您使用的是数据报独立的 UDP，因此每个数据包都需要一个新的 OIS，因此每个数据包也需要一个新的 OOS。

正如 David Schwartz 指出的那样，您还需要考虑如果数据包没有到达、两次到达或乱序时会发生什么，但解决您当前问题的方法是每个数据包都有一个新的 OOS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:39:07.070

嗯，你完全忘了实现一个协议！您忘记了传输步调、重复数据报检测、校验和、数据报重新排序、重新传输、确认、慢启动、滑动窗口以及几乎所有其他事情！您可能并不绝对需要所有这些东西，但您需要其中的大部分，或者您需要以其他方式完成这些基本功能。

您已经完成了大约 1% 的使用 UDP 发送数据的工作。在你完成工作之前它不会起作用。

如果您希望通过 UDP 进行最少的文件传输，那么 TFTP 就是您要研究的内容。以下是如何通过 UDP 进行文件传输的描述：

> 发起主机 A 在众所周知的端口号 69 上向主机 S 发送一个 RRQ（读请求）或 WRQ（写请求）数据包，其中包含文件名和传输模式。
> 
> S 用 ACK（确认）数据包回复 WRQ，并直接用 DATA 数据包回复 RRQ。数据包是从一个新分配的临时端口发送的，所有未来发送到主机 S 的数据包都应该发送到这个端口。
> 
> 源主机向目标主机发送编号的 DATA 数据包，除了最后一个之外，所有数据包都包含完整大小的数据块（512 字节）。目标主机对所有 DATA 数据包使用编号的 ACK 数据包进行回复。
> 
> 最终的 DATA 包必须包含小于一个完整大小的数据块，以表明它是最后一个。如果传输文件的大小是块大小的精确倍数，则源发送包含 0 字节数据的最终 DATA 包。
> 
> 接收器使用相关编号的 ACK 响应每个 DATA。发送者用下一个块的 DATA 响应块的第一个接收到的 ACK。
> 
> 如果最终没有收到 ACK，则重传计时器重新发送 DATA 包。
> 
> [普通文件传输协议](http://en.wikipedia.org/wiki/Trivial_File_Transfer_Protocol)- 维基百科

这避免了通过一次只保持一个数据块“在飞行中”来进行传输起搏、慢启动、窗口或数据报重新排序的需要。这使得它非常慢，但也很简单。如上所述，每次往返时间最多可以交换 512 个字节。

# wpf - 如何在WPF网格中的一行上设置焦点

> ID：10945250
> 
> 赞同：3
> 
> 时间：2012-06-08T08:14:18.950
> 
> 标签：wpf, grid, focus, componentone, c1flexgrid

我有一个编辑窗口，弹出一个网格。这个网格是 ComponentOne 制作的 C1FlexGrid。（但我认为这可能是其他网格的类似问题..）

当我从主窗口打开该窗口时，我希望该网格中的第一行获得焦点并被选中。

最好在 xaml 中，但如果这在代码隐藏或继承 flexgrid 中是不可能的。

我知道如何设置要选择的行和获取焦点的网格，但该行没有聚焦，因此我无法通过使用键盘上的向上和向下箭头移动来遍历网格中的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-15T10:19:08.067

以编程方式选择 WPF DataGrid 中的一行，然后以编程方式将焦点放在该单元格上，这样您就可以使用键盘上的箭头键在 DataGrid 中导航，用于选择的部分代码是：

```
int index = 1;
dgUsers.SelectedItem = dgUsers.Items[index];
dgUsers.ScrollIntoView(dgUsers.Items[index]);
DataGrid dgrow =                                                                                                 (DataGrid)dgUsers.ItemContainerGenerator.ContainerFromItem(dgUsers.Items[index]);
dgrow.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next)); 
```

# javascript - 是否需要使用参数？

> ID：10945252
> 
> 赞同：-3
> 
> 时间：2012-06-08T08:14:26.637
> 
> 标签：javascript, parameters

例如：

```
 function test(x) {
       alert("This is a " + x);
    }

    test("test"); 
```

老实说，我没有看到其中的意义（可能是因为我对这个主题没有太多了解），但如果你能解释一下，那就太棒了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:22:34.513

参数允许替换：我们不是一遍又一遍地编写相同的代码，而是使用我们自己的值重新使用它。在*您的*示例中，该方法的作用不大，因此几乎没有优势。

但只需稍作调整，它可能更有意义：

```
function test(x) {
    var y = x * 2
    if (y === NaN) {
        alert("That was no number!");
    } else {
        alert("Multiplied by 2, " + x + " is " + y);
    }
} 
```

我们不想在每次想要运行该代码时都编写它，替换我们的值：

```
var y = "test" * 2
if (y === NaN) {
    alert("That was no number!");
} else {
    alert("Multiplied by 2, test is " + y);
}

var y = 5 * 2
if (y === NaN) {
    alert("That was no number!");
} else {
    alert("Multiplied by 5, test is " + y);
} 
```

*注意：该值可能来自表单、数据库、Web 服务等。* *在我们的示例中，它是硬编码的，但在现实生活中，这不太可能。*

相反，我们创建`test`方法，通用代码来处理我们关心的情况。

然后我们可以写：

```
test("test");
test(5); 
```

如果我们需要做的*改变*，我们改变一个`test`方法，而不是找到我们使用相同逻辑的代码中的所有地方。这使得程序维护和测试更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T08:35:36.170

> JavaScript 中有四种调用模式：方法调用模式、函数调用模式、构造函数调用模式和应用调用模式。模式的不同在于如何初始化奖金参数。调用运算符是一对括号，跟在任何产生函数值的表达式之后。括号可以包含零个或多个表达式，以逗号分隔。每个表达式产生一个参数值。每个参数值都将分配给函数的参数名称。**当参数的数量和参数的数量不匹配时，不会出现运行时错误。如果参数值太多，多余的参数值将被忽略。如果参数值太少，未定义的值将替换缺失的值。**参数值没有类型检查：任何类型的值都可以传递给任何参数。

*“JavaScript：Douglas Crockford 的优秀部分。版权所有 2008 Yahoo! Inc., 978-0-596-51774-8。”*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T08:36:56.483

Javascript 不支持函数重载，但每次调用函数`arguments`时，都会使用传递的所有参数的数组设置变量，即使它们没有在函数声明中命名。例如：

```
function prod() {
    var res = 1;
    for (var i = 0; i < arguments.length; i++)
        res *= arguments[i];
    return res;
}
var p = prod(5, 3, 7);    // => 105 
```

注意：`arguments`实际上不是一个`Array`对象，即它没有相同的`prototype`. 但它可以很容易地转换为数组：

```
var args = Array.prototype.slice.call(arguments, 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T08:17:11.220

这将在没有参数检查的情况下工作在这里

# [演示](http://jsfiddle.net/ZqtzS/)

注意：如果您在函数中使用该参数，那么最好在函数调用中传递它，否则它仍然是“未定义”...

**最终结论**

```
function test(a) 
{     
  alert(a); 
}  

test(1); // outputs 1 
test(); // outputs undefined 
```

当您不传递参数的值时，它设置为未定义。你没有例外。在某些情况下，这可能是一种使您的功能更加通用的便捷方法。Undefined 的计算结果为 false，因此您可以检查是否传入了值

# .net - 使用 VSTO 将数组分配给 Excel 2007 中的单元格时丢失长文本字符串

> ID：10945255
> 
> 赞同：0
> 
> 时间：2012-06-08T08:14:39.087
> 
> 标签：.net, vsto, excel-2007, watin

我发现当通过数组将长字符串分配到单元格时，它会随机删除字符串。

例如，我有一个二维数组（1 行，大约 20 个值），包括项目编号和正文 HTML（来自 WatiN 自动化的正文 Html）。

当我将该数组分配到一行（当然大小相同）时，它偶尔不会将 HTML 插入其单元格，但该单元格两侧的值看起来都很好。

假设字符串太长，我尝试从 HTML 中删除不需要的空格并且它起作用了......但不是因为长度！

事实证明，如果我简单地修剪字符串它会起作用（即使没有尾随空格！）。

**字符串本身可能是什么导致 Excel 拒绝它，为什么简单的字符串操作（如 Trim）可以解决问题？**

```
EXCEL.Range range = worksheet.GetRange(1,1,10,10);
object[,] cells = range.GetCells();
cells[1,1] = "123456789";
cells[1,2] = waitnbrowser.Body; // Get 10K body text HTML string
cells[1,3] = "something else";
range.Value = cells; // Sometimes the body text is left out, even though it shows in the cells array fine. 
```

如果我向长字符串添加修剪，即使长度没有改变：

```
cells[1,2] = waitnbrowser.Body.Trim(); // this (or other string manipulation) fixes the problem!
range.Value = cells; // now works every time! 
```

# plsql - 对象类型操作问题

> ID：10945256
> 
> 赞同：1
> 
> 时间：2012-06-08T08:14:39.510
> 
> 标签：plsql

我有一段看似无害的代码，如下所示。

```
CREATE TYPE rec_type AS object (
  storename VARCHAR2(50),
  storecode VARCHAR2(50),
  --enters number,
  --exits number,
  log_ts    DATE,
  opentime  VARCHAR2(50),
  closetime VARCHAR2(50),
  ttotals   VARCHAR2(50) );

/

CREATE TYPE t_tab
  IS TABLE OF rec_type;

/

CREATE OR replace PROCEDURE Dx_proc_dly_charmingcharlie (
  p_ce_id            IN NUMBER,
  p_strt_dt          IN DATE,
  p_end_dt           IN DATE,
  p_date_format      IN VARCHAR2 DEFAULT 'mm/dd/yy',
  p_time_format      IN VARCHAR2 DEFAULT 'hh24miss',
  p_store_format     IN NUMBER DEFAULT 1,
  p_file_sep         IN VARCHAR2 DEFAULT ',',
  p_total_type       IN VARCHAR2 DEFAULT 'B',
  p_act_imp_ind_reqd IN VARCHAR2 DEFAULT 'N')
AS
  ltotals VARCHAR2(100);
  lstr    VARCHAR(500);
  --type t_tab is table of rec_type;
  tt_tab  t_tab := T_tab();
  CURSOR cce IS
    SELECT ce_id,
           url_adr user_store_code
    FROM   tce
    WHERE  ce_id = p_ce_id
           AND hist_ctrl = 0
           AND cmpl_ind = 'Y'
           AND end_ind = 'N'
           AND ce_fnct_typ_id IN ( 1, 2, 6 )
    UNION
    SELECT a.ce_id,
           a.url_adr user_store_code
    FROM   tce a,
           tce_rlt b
    WHERE  b.ce_prn_id = p_ce_id
           AND b.ce_dpn_id = a.ce_id
           AND b.hist_ctrl = 0
           AND a.hist_ctrl = 0
           AND a.cmpl_ind = 'Y'
           AND a.end_ind = 'N'
           AND a.ce_fnct_typ_id IN ( 1, 2, 6 )
           AND b.cmpl_ind = 'Y'
           AND b.end_ind = 'N';
  CURSOR ctrf(
    p_ce_id NUMBER) IS
    SELECT a.url_adr                         StoreName,
           Rfg_get_cust_id_gen(a.url_adr)    Storecode,
           SUM(b.total_enters)               enters,
           SUM(b.total_exits)                exits,
           b.log_ts                          log_ts,
           To_char(b.day_strt_ts, 'hh24:mi') opentime,
           To_char(b.day_end_ts, 'hh24:mi')  closetime
    FROM   tce a,
           mv_tmp_daily_traffic b,
           v_ce_tmp c
    WHERE  c.ce_id = a.ce_id
           AND b.tmp_id = c.tmp_id
           AND a.ce_id = p_ce_id
           AND b.log_ts >= p_strt_dt
           AND b.log_ts <= p_end_dt
    GROUP  BY a.url_adr,
              Rfg_get_cust_id_gen(a.url_adr),
              To_char(b.log_ts, 'YYYY/MM/DD'),
              b.log_ts,
              To_char(b.day_strt_ts, 'hh24:mi'),
              To_char(b.day_end_ts, 'hh24:mi')
    ORDER  BY 1,
              2,
              5;
BEGIN
    FOR c IN cce LOOP
        FOR t IN ctrf(c.ce_id) LOOP
            lTotals := CASE p_total_type
                         WHEN 'B' THEN To_char(t.enters)
                                       || ','
                                       || To_char(t.exits)
                         WHEN 'E' THEN To_char(t.enters)
                         ELSE To_char(t.exits)
                       END;

            tt_tab.extend;

Tt_tab(tt_tab.last) :=
Rec_type(t.storename, t.storecode, t.log_ts, t.opentime, t.closetime, lTotals);

lStr := CASE p_total_type
          WHEN 'B' THEN
          'Store ID|Store Name|Date|Open Time|Close Time|Traffic In|Traffic Out'
          WHEN 'E' THEN
          'Store ID|Store Name|Date|Open Time|Close Time|Traffic In'
          ELSE 'Store ID|Store Name|Date|Open Time|Close Time|Traffic Out'
        END;

dbms_output.Put_line(lStr);
--dbms_output.put_line(t.Storecode||p_file_sep||t.StoreName||p_file_sep||to_char(t.log_ts,p_date_format)||p_file_sep||t.opentime||p_file_sep||t.closetime||lTotals);
END LOOP;
END LOOP;

FOR rec IN 1..tt_tab.count LOOP
    dbms_output.Put_line(Tt_tab(rec).Storecode
                         ||p_file_sep
                         ||Tt_tab(rec).StoreName
                         ||p_file_sep
                         || Tt_tab(rec).log_ts
                         ||p_file_sep
                         ||Tt_tab(rec).opentime
                         ||p_file_sep
                         ||Tt_tab(rec).closetime
                         ||p_file_sep
                         || Tt_tab(rec).lTotals);
END LOOP;
EXCEPTION
  WHEN OTHERS THEN
             Raise_application_error(-20001, Substr(SQLERRM, 1, 100));
END;

/ 
```

这是给出错误

```
84/206         PLS-00302: component 'LTOTALS' must be declared   
84/2           PL/SQL: Statement ignored 
```

虽然我已将变量“LTOTALS”声明为全局变量。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:14:45.440

我在您的代码中看到了这一点：

```
tt_tab(rec).lTotals 
```

`lTotals`但是记录类型没有属性`rec_type`，只有`tTotals`。

# iphone - IOS 5 的 SOAP 指南

> ID：10945259
> 
> 赞同：0
> 
> 时间：2012-06-08T08:14:56.767
> 
> 标签：iphone, web-services, ios5, soap

我是 Objective-C 和 IOS 编程的初学者，我想获得一些关于如何在 IOS 5 中使用 SOAP 的最新指导。我在网上看到了一些教程，但它们已经很老了（一年多了），而且我真的不知道是否有一些更新的方法来处理 SOAP Web 服务。

如果有人能给我一些指导/链接，我会很高兴:)

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:27:42.013

如果您**真的需要**使用 SOAP，我建议您尝试[SudzC](http://sudzc.com/)，您必须将 SOAP 传递`wsdl`给服务，这会返回一个文件夹，其中包含示例演示项目以及调用 Web 服务的所有方法。在该文件夹中，您还可以找到 html 中的项目文档。您还可以查看实现文件，因此您可以根据您的要求调整一些功能。对我来说，这项服务非常有帮助。

还有其他类似于 SudzC 的项目，例如[wdsl2objc](http://code.google.com/p/wsdl2objc/)，但我还没有使用它。

# android - 在 Android 中使用 Intent 传递字符串参数

> ID：10945265
> 
> 赞同：0
> 
> 时间：2012-06-08T08:15:30.720
> 
> 标签：android

我正在尝试解析通过 content1 或 content2 搜索的网站，具体取决于单击了哪个按钮。我有一个运行良好的算法，但我被要求在两个类中进行。我希望它不会让我改变我的整个算法。但是，我在向新活动发送字符串参数时遇到了麻烦，我讨厌它。

我定义了全局参数：

```
String content1;
String content2; 
```

我需要在名称为“namesurname”和“district”的 EditText 中获取字符串：

```
content1 = district.getText().toString();
content2 = namesurname.getText().toString(); 
```

我有两个有监听器的按钮：

```
 search1.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent search = new Intent(FirstActivity.this, SecondActivity.class);
            search.putExtra("param_a", content1);
                    startActivity(search);
        }               
    });
    search2.setOnClickListener(new View.OnClickListener() {         
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent search = new Intent(AvukatParserActivity.this, ParserActivity.class);
            search.putExtra("param_b", content2);
        startActivity(search);
        }
    }); 
```

从现在开始，我的 SecondActivity.class 出现了。

我正在尝试在新活动中获得意图：

```
 Intent search = getIntent();
    String location = search.getStringExtra("param_a");
    String name_surname = search.getStringExtra("param_b"); 
```

这是我检查内容的方法1：

```
Toast.makeText(this, location, Toast.LENGTH_LONG).show(); 
```

它与 content2 一样为 null。没有错误，没有警告。我不明白我做错了什么。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:19:23.203

把这条线

```
 search1.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
           content1 = district.getText().toString(); //if district is gloaal and has been set in onCreate
            Intent search = new Intent(FirstActivity.this, SecondActivity.class);
            search.putExtra("param_a", content1);
                    startActivity(search);
        }               
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:37:34.870

你可以做

```
Bundle bundle=new Bundle();//make it global
search1.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
           content1 = district.getText().toString(); //if district is gloaal and has been set in onCreate
            Intent search = new Intent(FirstActivity.this, SecondActivity.class);
            bundle.putString("param_a",content1);
            search.putExtras(bundle);
                    startActivity(search);
        }               
    });
search2.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
           content2 = namesurname.getText().toString(); //if district is gloaal and has been set in onCreate
            Intent search = new Intent(FirstActivity.this, SecondActivity.class);
            bundle.putString("param_b",content2);
            search.putExtras(bundle);
                    startActivity(search);
        }               
    }); 
```

在第二个活动 onCreate

```
Budle bundle=this.getIntent().getExtras();

String username=bundle.getString("param_b");
String location=bundle.getString("param_a"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T08:22:41.730

1.  每个侦听器都只将一个值而不是两个都放入意图中，并且 toast 只显示其中一个。

2.  关于这段代码：

    ```
    content1 = district.getText().toString();
    content2 = namesurname.getText().toString(); 
    ```

    把它放在 onClick 方法中，然后告诉我们它是否有帮助。我猜你把旧值放在那里，所以它得到 null 而不是更新的值。

# html - 使用覆盖禁用整个页面

> ID：10945268
> 
> 赞同：5
> 
> 时间：2012-06-08T08:15:36.430
> 
> 标签：html, css

我想创建一个将在弹出窗口后面使用的叠加层。但是当页面向下滚动时，覆盖就不再存在了吗？我可以使用 javascript 来获取页面内容的高度，然后可以将相同的高度应用于覆盖，但是有任何基于 css 的解决方案吗？

```
#overlay{
    width: 100%;
    height: 100%;
    position: absolute;
    left: 0px;
   top: 0px;
   background-color:#000;
   opacity: .75
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T08:17:45.273

`position`必须`fixed`并且为了防止堆叠问题`z-index: 9999999;`
**[在 dabblet.com 上添加演示](http://dabblet.com/gist/2894437)**

```
#overlay{
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-color:#000;
    opacity: .75;
    z-index: 9999999;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T08:16:27.070

只需将`position`属性更改为`fixed`.

# openerp - 仅当用户已分配任务时才应显示任务

> ID：10945270
> 
> 赞同：7
> 
> 时间：2012-06-08T08:15:45.047
> 
> 标签：openerp

我只希望我分配任务的人看到项目模块中的任务。我不希望项目的其他用户看到这个人的任务。

然而，目前任何具有用户访问权限的用户都可以查看所有任务，即使他们没有被分配。

有解决办法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-08T10:57:24.950

OpenERP/Odoo 有两种可以分配给用户组的安全限制：

*   [**访问权限**](https://www.odoo.com/documentation/13.0/reference/security.html#access-control)是 CRUD 是/否标志（类似于 Unix FS 权限），并允许**按模型**访问控制。它们说明该组的成员是否可以对特定文档模型的任何文档（例如项目任务）执行创建、读取、更新和删除操作。默认策略是 DENY，因此默认情况下，如果用户没有通过其组的访问权限之一明确有权执行任何操作，则默认情况下将拒绝任何操作。
*   [**记录规则**](https://www.odoo.com/documentation/13.0/reference/security.html#record-rules)是应用于 CRUD 操作的过滤器，一旦已授予访问权限，就**允许对每个文档进行访问控制。**如果文档与至少一个记录规则匹配，用户将只能对给定文档执行操作。默认策略是 ALLOW，因此如果给定模型不存在规则，则具有必要访问权限的用户可以访问该模型的所有文档。

访问权限和记录规则也可以在全局范围内定义，而无需将它们分配给特定组，在这种情况下它们适用于每个人。记录规则有一个陷阱：全局规则可能不会被其他规则放松（故意！），因此请谨慎使用。

在您的情况下，您似乎应该在项目用户组上定义一个额外的记录规则，明确将项目任务的访问权限限制为您自己的任务（可能还有那些尚未分配的任务）。您需要使用以下参数在“安全规则”菜单中创建一个新条目：

*   对象/模型：`project.task`
*   姓名：`See own tasks only`
*   领域：`['|',('user_id','=',False),('user_id','=',user.id)]`
    *   （意味着：您自己的任务和未分配的任务）
*   申请阅读：`[x]`
*   申请写：`[x]`
*   申请创建：`[x]`
*   申请删除：`[x]`
*   团体：`Project / User`

记录规则是一个标准的`domain`OpenERP/Odoo 域，它在您尝试执行操作的记录上进行评估，并且可以引用`user`包含当前用户数据的变量（技术上，`browse_record`当前用户的 a）。[该文档](https://www.odoo.com/documentation/13.0/reference/orm.html#reference-orm-domains)有一个描述`domain`。

如果您希望允许特殊用户（例如项目经理）查看系统中的所有任务，您可以通过向项目经理组添加另一个允许访问所有任务的规则来放松此规则。有一个特殊的“域过滤器”，意思是“允许所有”，有助于放宽另一个更严格的规则：`[(1,'=',1)]`.

**注意 1**：查看现有的记录规则以了解它们首先在做什么，并确保在添加您的规则时阅读记录规则表单上的说明。要记住的一件重要事情是特定于组的规则与`OR`运算符相结合。因此，如果您添加我上面描述的规则，您可能看不到任何限制效果，因为其他特定于组的规则仍在授予访问权限。您可能必须禁用它们、编辑它们或更改它们应用到的用户组，以获得您想要的确切效果。

**注意 2**：请记住，如果您对访问权限和记录规则做错了什么，您可以随时修复`admin`帐户的混乱，因为这些安全限制不适用于`admin`（类似于`root`Unix 上的用户）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-31T16:23:59.530

注意：在 OpenERP 7 中，您必须修改或禁用名为的默认规则

> 项目/任务：员工：公共、门户、员工或关注或分配

让您的规则发挥作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-21T09:16:40.653

创建一个新的安全规则，选择对象为“ **project.task** ”，将域过滤器设置为**[("user_id","=",user.id)]**。无需添加任何组，因此它将是全局的。而已！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-20T05:11:01.320

我的问题有点复杂。我想让用户只能看到他们分配的任务，而有些用户也可以看到其余的。

在 Odoo 11 中，我发现标准项目用户继承`Employees \ Employee`，而后者又具有`Project/Task: employees: follow required for follower-only projects`让用户查看其他任务的规则。

我做了什么：

1.  创建一个新组->重复`Project / Users`

2.  **从odony**的回答中实施了规则->`['|',('user_id','=',False),('user_id','=',user.id)]`

3.  `Project/Task: employees: follow required for follower-only projects`从中删除记录规则`Employees / Employee`并将其添加到`Project / Users`

现在我可以决定谁是*项目用户*，谁可以看到项目的所有任务，谁是*工人*，谁只能看到分配给他们的任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-10T09:00:36.563

正如@user1534055 在 openERP 7 中已经指出的那样，它有点不同。

找到名为的规则`Project/Task: employees: public, portal, employee or following or assigned`

![查找关联的记录规则](../Images/8254e1f55c31bf06f02f17758c80c8c8.png)

编辑它并`('project_id.privacy_visibility', 'in', ['public', 'portal', 'employees']), '&',`从规则定义中删除，然后点击保存。

在此之后任务将仅对已分配的人员可见。

# .net - 带参数的 WCF 服务实例

> ID：10945271
> 
> 赞同：1
> 
> 时间：2012-06-08T08:15:46.577
> 
> 标签：.net, multithreading, wcf

我在使用参数创建 WCF 服务实例时遇到问题。情况是在服务调用内部我无法创建第三方库 COM 对象（存在一些线程问题，该对象只能在主线程中创建）。因此，我想在服务函数内部简单地维护一个要创建的对象列表，并让主线程完成实际的对象创建工作。

但我不清楚如何简单地将列表传递给服务实例的构造函数。就我对 WCF 的了解而言，我认为服务实例是由框架本身创建的，它在构造函数中不带任何参数。那么将这个列表从主线程传递到服务实例的最简单方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:21:33.063

尝试玩：

*   默认构造函数
*   手动服务主机。继承自：
    *   `System.ServiceModel.ServiceHost`
    *   `System.ServiceModel.Activation.ServiceHostFactory`
*   `ServiceBehavior.InstanceContextMode`：
    *   `InstanceContextMode.Single`， ETC。
*   类范围字段：

    ```
    public class Service : IService
    {
        private AnotherClass _a = new AnotherClass(); // maybe static?
    } 
    ```

    它将在默认构造函数调用之前实例化，或者无论如何如果您没有默认构造函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T08:28:38.770

不要尝试将其传递给服务类构造函数。这可能会产生问题，因为它会在服务类和 COM 类之间产生耦合。相反，只需通过静态列表属性或类似属性从服务方法中访问 COM 对象：

```
void MyServiceMethod()
{
   List<MyCOMObject> myComObject = MyHelperClass.COMObjectsList //the list is created elsewhere;
   ...
} 
```

# javascript - AJAX 脚本更改响应导航

> ID：10945273
> 
> 赞同：1
> 
> 时间：2012-06-08T08:16:04.387
> 
> 标签：javascript, ajax, jsp

我有一个简单的搜索应用程序，我在其中尝试使用 AJAX 导航到不同的响应。

我的问题很简单，我确信有一个简单的解决方案，但我根本无法找到它。

我以这种方式发送一个新请求：

```
xhrObj.open('post', 'search.do', false);
xhrObj.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
xhrObj.send('id=1'); 
```

我希望，在此请求调用和必要的业务逻辑之后，浏览器将视图更改为后端指定的新页面。取而代之的是，我在响应中收到了页面 HTML 代码，但永远不会导航到该页面。

我的印象是，如果将`async`参数设置为`false`流，则其行为将符合我的预期。

如何让我的 JS 脚本在 AJAX 调用后跳转到新页面的导航。请记住，我不能`location.href`用来跳转到新页面，因为这个新页面是在服务器上构建的 .JSP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:33:11.627

也许您应该从 search.do 请求一个 url，然后执行此操作。

```
xhrObj.onreadystatechange=function()  {
  if (xhrObj.readyState==4 && xhrObj.status==200)
    {
    window.location=xhrObj.responseText;
    }
  } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:23:55.417

如果你想拥有类似guthub 的东西，你需要HTML5 History API。如果没有 HTML5 History API，您将无法在不进行任何重定向的情况下操纵 URL（借助 JS）。

通常你可以在 url (domain/#hash/blabla/bla) 中使用哈希，但这也不好。

# testing - 如何在 Selenium IDE 中创建跨域测试？

> ID：10945275
> 
> 赞同：3
> 
> 时间：2012-06-08T08:16:18.910
> 
> 标签：testing, selenium, functional-testing

我需要做一个测试，打开一个站点，然后打开另一个不是来自同一个域的站点。如何在 Selenium IDE 中做到这一点？任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:34:13.087

不幸的是，Selenium IDE 并不是最好的工具。看看使用 Selenium WebDriver，因为它不在 JavaScript 沙箱中运行，并允许更多自由地做你想做的事

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:26:23.490

使用以下方法

将基本网址设为[http://www.google.com](http://www.google.com)

给出以下命令

```
open                      /
waitForPageToLoad      30000
open                http://mail.yahoo.com
waitForPageToLoad      30000 
```

它会工作

# jquery - 在 Perl 中调用 Ajax 吗？

> ID：10945277
> 
> 赞同：-3
> 
> 时间：2012-06-08T08:16:31.543
> 
> 标签：jquery, ajax, perl

```
#!/usr/bin/perl
print "Content-type: text/html \n\n";
print qq(<html>
<head>
<script type="text/javascript" src="/jquery.js"></script>
<script>
jQuery(document).ready(function(){
jQuery("#form_lang").submit(function(e){

    var str = jQuery(this).serialize();
    alert("dfdaf"); 
    jQuery.ajax({
        type: "POST",
        url:"contacts.pl",
        success: function(){
        jQuery("#note").ajaxComplete(function(event, request, settings){
                    if(msg == 'OK') 
                            alert("Your message!");
                });
            },
          });
});
});
</script>
</head> 
```

这是表格部分：

```
<form id ="form_lang" action="helloworld.pl" method="POST">
<p>Enter Language: </p>
<input type="text" id="lang" name="lang"  /><br/>
<p>Enter Description: </p>
<textarea id="lang_desc" name="lang_desc"  ></textarea><br/>
<input type="submit" value="submit"  /> 
```

在这里，控件上升到警报（“dfdaf”）。之后它被提交给 helloworld.pl...contacts.pl 没有被引用..Y 是吗？那怎么打电话呢？提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:27:46.710

当您提交表单时，将触发提交事件。这将触发提交处理程序，该处理程序将启动 Ajax 请求。

然后浏览器将正常提交表单（因为没有任何东西阻止它）。

浏览器将加载一个新页面，并**删除运行 JavaScript 的环境**。Ajax 将被取消（请求可能会到达服务器，但响应不会被浏览器处理）。

如果你想在提交表单时做一些事情，然后在`helloworld.pl`

当您想在不离开页面的情况下与服务器进行通信时，请使用 Ajax。

（您也可以取消表单提交，然后在 Ajax 请求返回时使用 JS 重新提交……但这过于复杂且效率低下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:21:25.490

您不是“从 Perl 调用 Ajax”。

您正在使用 Perl 编写 Javascript。

Javascript将从服务器发送，然后在浏览器上执行。

而且我猜浏览器没有找到“contacts.pl”。

问：您是否在浏览器窗口中收到错误消息（如“404”或“500”）？

问：您是否在服务器的错误和/或访问日志中看到任何内容？

# iphone - ios ktphotobrowser 将滚动视图的内容大小设置为缩放图像大小

> ID：10945279
> 
> 赞同：0
> 
> 时间：2012-06-08T08:16:35.183
> 
> 标签：iphone, ios, uiscrollview, zooming

我正在为我的应用程序使用 ktphotobrowser。在大图像屏幕（ktphotoscrollviewcontroller）中，当我点击两次缩放图像时，滚动视图的内容大小（ktphotoview - 它是一个 uiscrollview 对象）增长到 bound.size * maximumzoomscale 但我的缩放图像大小仍然小于滚动视图的内容大小。缩放图像大小和滚动视图的内容大小必须相同，所以我在哪里可以对代码进行这些计算？

如果有人使用 ktphotobrowser 可以帮助我解决这个问题，我将非常感激。

我找到了点击计数，但在此代码之后我找不到内容大小增长（缩放）或图像增长（缩放）代码的位置

您可以在下面找到 ktphotoview.h 页面的完整代码，其中对点击计数和缩放操作进行了编码：

```
#import "KTPhotoView.h"
#import "KTPhotoScrollViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface KTPhotoView (KTPrivateMethods)
- (void)loadSubviewsWithFrame:(CGRect)frame;
- (BOOL)isZoomed;
- (void)toggleChromeDisplay;
@end

@implementation KTPhotoView

@synthesize scroller = scroller_;
@synthesize index = index_;

- (id)initWithFrame:(CGRect)frame
{
   self = [super initWithFrame:frame];
   if (self) {
      [self setDelegate:self];
      [self setMaximumZoomScale:2.0];
      [self setShowsHorizontalScrollIndicator:NO];
      [self setShowsVerticalScrollIndicator:NO];
      [self loadSubviewsWithFrame:frame];

        NSLog(@"scrollview2 %f",self.contentSize.height);
   }
   return self;
}

- (void)loadSubviewsWithFrame:(CGRect)frame
{
   imageView_ = [[UIImageView alloc] initWithFrame:frame];
   [imageView_ setContentMode:UIViewContentModeScaleAspectFit];
   [self addSubview:imageView_];
}

- (void)setImage:(UIImage *)newImage 
{
   [imageView_ setImage:newImage];
}

- (void)layoutSubviews 
{
   [super layoutSubviews];

   if ([self isZoomed] == NO && CGRectEqualToRect([self bounds], [imageView_ frame]) == NO) {
      [imageView_ setFrame:[self bounds]];
   }
}

- (void)toggleChromeDisplay
{
   if (scroller_) {
      [scroller_ toggleChromeDisplay];
   }
}

- (BOOL)isZoomed
{
   return !([self zoomScale] == [self minimumZoomScale]);
}

- (CGRect)zoomRectForScale:(float)scale withCenter:(CGPoint)center 
{

   CGRect zoomRect;

   // the zoom rect is in the content view's coordinates. 
   //    At a zoom scale of 1.0, it would be the size of the imageScrollView's bounds.
   //    As the zoom scale decreases, so more content is visible, the size of the rect grows.
   zoomRect.size.height = [self frame].size.height / scale;
   zoomRect.size.width  = [self frame].size.width  / scale;

   // choose an origin so as to get the right center.
   zoomRect.origin.x    = center.x - (zoomRect.size.width  / 2.0);
   zoomRect.origin.y    = center.y - (zoomRect.size.height / 2.0);
    NSLog(@"zoomRectHeight %f",[self frame].size.height);
   return zoomRect;
}

- (void)zoomToLocation:(CGPoint)location
{
   float newScale;
   CGRect zoomRect;
   if ([self isZoomed]) {
      zoomRect = [self bounds];

   } else {
      newScale = [self maximumZoomScale];
      zoomRect = [self zoomRectForScale:newScale withCenter:location];

   }
  // NSLog(@"zoomRectHeight %f",location.);
   [self zoomToRect:zoomRect animated:YES];
}

- (void)turnOffZoom
{
   if ([self isZoomed]) {
      [self zoomToLocation:CGPointZero];
   }
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
   UITouch *touch = [touches anyObject];

   if ([touch view] == self) {
      if ([touch tapCount] == 2) {
         [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(toggleChromeDisplay) object:nil];
         [self zoomToLocation:[touch locationInView:self]];
      }
   }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
   UITouch *touch = [touches anyObject];

   if ([touch view] == self) {
      if ([touch tapCount] == 1) {
         [self performSelector:@selector(toggleChromeDisplay) withObject:nil afterDelay:0.5];
      }
   }
}

#pragma mark -
#pragma mark UIScrollViewDelegate Methods

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
   UIView *viewToZoom = imageView_;
    NSLog(@"scrollview %f",self.contentSize.height);
   return viewToZoom;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T22:36:04.107

我在 ktphotoview.m 文件中使用以下代码来解决我的问题，希望这会有所帮助：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
UITouch *touch = [touches anyObject];

if ([touch view] == self) {
  if ([touch tapCount] == 2) {

     [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(toggleChromeDisplay) object:nil];
      [self zoomToRect:[self zoomRectForScale:[self maximumZoomScale] withCenter:[touch locationInView:self]] animated:YES];
      float abc=(self.contentSize.height-(imageView_.image.size.height*320/imageView_.image.size.width*self.maximumZoomScale))/2 *-1;

      [self setContentInset:UIEdgeInsetsMake(abc, 0, abc, 0)];

  }
}
} 
```

# ruby-on-rails - 如何在模型和表单构建器中使用外键？

> ID：10945280
> 
> 赞同：0
> 
> 时间：2012-06-08T08:16:36.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form, rails-models

我有两个模型：`User`如下`Location`：

```
class User < ActiveRecord::Base
  attr_accessible :location, :password, :user_name, :password_confirmation

  validates :location, :user_name, :presence => true
  validates :password, :presence => true, :confirmation => true

  has_one :location, :foreign_key => 'location'

end

class Location < ActiveRecord::Base
  attr_accessible :loc_id, :loc_name

  belongs_to :user, :foreign_key => 'loc_id'
end 
```

您可以看到我为模型使用了自定义的 foreign_key。我使用表单生成器来构建用户注册表单，但是当我提交数据时出现错误：

```
Location(#2170327880) expected, got String 
```

我`simple_form`用来构建表单，相关代码是：

```
= f.input :location, :collection => Location.all.collect {|c| [c.loc_name, c.loc_id]} 
```

我该如何解决这个问题？`location_id`或者我必须像关联一样使用默认的 foreign_key吗？

谢谢。

更新：

当我将模型中的`location`字段重命名为并删除这样的：`User``loc_id``:foreign_key`

```
class User < ActiveRecord::Base
  attr_accessible :loc_id, :password, :user_name, :password_confirmation

  validates :loc_id, :user_name, :presence => true
  validates :password, :presence => true, :confirmation => true

  has_one :location, :foreign_key => 'location'

end

class Location < ActiveRecord::Base
  attr_accessible :loc_id, :loc_name

  belongs_to :user
end 
```

它工作正常。但我仍然想知道如何关联`User`和`Location`模型。

PS我使用`Location`模型来存储国家代码和国家名称，永远不会更新`User`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:27:05.437

听起来你真的想要

```
class User < ActiveRecord::Base
  belongs_to :location
end

class Location < ActiveRecord::Base
  has_many :users
end 
```

这意味着用户有一个`location_id`列。如果您以其他方式执行操作（位置上的 user_id 列），则给定位置只能与一个用户相关联。rails 方式是`location_id`用户在位置表中的 id 列上“点”。如果您希望它指向不同的列，请使用该`:primary_key`选项（`:foreign_key`如果您希望用户列被称为 location_id 以外的其他名称，则该选项是）

就表单而言，你做不到`f.select :location`——表单不知道如何传递这样一个复杂的对象。在这些情况下，您要设置表单来控制 location_id 属性，即

```
= f.input :location_id, :collection => Location.all.collect {|c| [c.loc_name, c.id]} 
```

如果您沿着让 location id 列引用 location 上的 loc_id 列的路线走下去，那么您需要将其更改为

```
= f.input :location_id, :collection => Location.all.collect {|c| [c.loc_name, c.loc_id]} 
```

就个人而言，如果您只是刚开始使用 rails，我会坚持使用默认值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T08:23:01.807

看起来你在滥用外键。在 User 模型中，您应该有 just`has_one :location`并且 location 模型应该有 user_id 属性。在位置模型中，您只需要编写`belongs_to :user`. 外键始终是另一个（外部）表的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T08:30:17.940

```
class User < ActiveRecord::Base
  # stuff

  has_one :location    
end

class Location < ActiveRecord::Base
  # more stuff

  belongs_to :user
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T15:53:11.513

如果您最终想要选择具有相同位置的所有用户，您可能希望对模型进行一些不同的设置。现在，因为每个用户在位置表中都有自己的位置记录，所以您最终会得到重复的位置，并且您必须找到所有这些位置以获得唯一位置并从中提取 user_ids。

而是这样做

```
class User < ActiveRecord::Base
   has_one :placement
   has_one :location, through: :placement
end

class Placement < ActiveRecord::Base
    belongs_to :user
    belongs_to :location
end

class Location < ActiveRecord::Base
    has_many :placements
    has_many :users, through: :placements
end 
```

. 至于迁移，Placement 应该有一个 :user_id 和 :location_id。您可以删除当前在 Location 中的 :user_id。这段代码的意思是我们有很多用户，我们有很多独特的位置，我们通过创建展示位置将用户放置在独特的位置，这表明具有 :user_id 的用户位于具有 :location_id 的位置。另外，不要忘记添加一行

```
add_index :placements, [:user_id, :location_id], unique: true 
```

这样您就不能将用户多次放置在一个位置。

编辑：忘记添加：您可以通过简单地获取位置记录并调用 location.users 来获取某个位置的所有用户

# java - 在java中使用正则表达式搜索和替换url末尾的“/”

> ID：10945283
> 
> 赞同：-1
> 
> 时间：2012-06-08T08:17:02.923
> 
> 标签：java, regex, pattern-matching

下面是我的正则表达式：-

```
\\bhttps?://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|]\\b 
```

当请求 url 是 type`http://www.example.com/`时，最后一个字符不会在我的较短 url 中替换，`/`而是附加在末尾。

正则表达式无法找到最后一个`/`.

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:30:01.733

我认为 / 将是一个单词边界，所以如果添加一个 ? 到 and，所以它写着：

```
\\bhttps?://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|]\\b? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T08:31:50.607

关于什么：

```
if(url.endsWith("/"))
  url = url.substring(0,url.length()-1); 
```

或者如果您需要使用正则表达式，您可以执行以下操作：

```
url = url.replaceAll("(\\bhttps?://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*)/(\\b?)","$1$2"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T08:24:18.877

如果您只想替换尾随`/`（这是您的问题直接提出的问题），您可以简单地执行以下操作：

```
url = url.substring(0, url.lastIndexOf('/')); 
```

记得经常[亲吻](http://en.wikipedia.org/wiki/KISS_principle)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T09:36:25.220

**你可以简单地使用：**

```
url = url.replaceAll("\/+$",""); 
```

# ruby-on-rails - Ruby (Rack) 应用程序无法启动错误消息

> ID：10945288
> 
> 赞同：0
> 
> 时间：2012-06-08T08:17:40.623
> 
> 标签：ruby-on-rails, mongodb, terminal, redis, resque

我的 ruby​​ 应用程序运行良好，直到本周早些时候，系统崩溃了，现在我在页面上收到一条错误消息......

错误消息： **无法连接到 localhost:27017 的主节点（Mongo::ConnectionFailure）**

异常类： **PhusionPassenger::UnknownError**

应用程序根目录： **/home/deploy/www/gm-git**

系统是这样设置的...

• Ruby on Rails 3.0.8 • Mongoid 2.0.2 • Redis & Resque 用于后台处理

我尝试了以下启动顺序，但没有成功...

```
/opt/redis/redis-server
/opt/mongodb/bin/mongod --force --logpath /opt/mongodb/bin
rake environment rescue:workers
touch /home/proyectos/gm/test_git/goldenmile 
```

我已经更新了很多次，例如

```
/opt/redis/redis-server
/opt/mongodb/bin/mongod --fork --logpath /opt/mongodb/bin
/opt/mongodb/bin/mongod --repair
rake environment rescue:workers
touch /home/proyectos/gm/test_git/goldenmile 
```

但是我在终端中收到错误消息，例如

```
/opt/mongodb/bin/mongod --start
ERROR: unknown option start

/opt/mongodb/bin/mongod --status
ERROR: unknown option status

/opt/mongodb/bin/mongod start
Invalid command: start

/opt/mongodb/bin/mongod/ --logpath /opt/mongodb/bin
-bash: /opt/mongodb/bin/mongod/: Not a directory

/opt/mongodb/bin/mongod/ --logpath /opt/mongodb/bin/mongod/
-bash: 2b.: command not found

/opt/mongodb/bin/mongod/ --logpath /opt/mongodb/bin/mongod
-bash: /opt/mongodb/bin/mongod/: Not a directory 
```

任何帮助/指导都是最有用的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:32:04.227

The Mongo::ConnectionFailure error for localhost:27017 is typical when **mongod** is not running. You should check for this using the **ps** command, restart mongod if necessary, and then run the **mongo** shell. If the mongo shell reports "Error: couldn't connect to server 127.0.0.1 shell/mongo.js:84" then go back and check the status of your mongod server process.

The following lines are suspicious.

```
/opt/mongodb/bin/mongod --fork --logpath /opt/mongodb/bin
/opt/mongodb/bin/mongod --repair 
```

It appears that you are trying to run the mongod server and repair at the same time. The repair attempt will bail out if mongod is already running, and I'm guessing that you really intended to run it before starting db service. If you are on a 64-bit platform, journaling is on by default and you should not do a repair to recover a consistent state, see [http://www.mongodb.org/display/DOCS/Durability+and+Repair](http://www.mongodb.org/display/DOCS/Durability+and+Repair)

Also, repair can take a long time, and during this time, you cannot start another mongod for db service. I suspect that this is your underlying problem - that repair was running, causing attempts to start db service to fail.

Regardless, it appears that **mongod** is not running. Options like --start, --status, start are all unknown as stated, and mongod also prints a full list of options for each of these errors. Having a trailing slash after a shell command (after mongo) is telling the OS to look for a directory. Did you try to execute mongod in the shell with no options? What happens? You need to get mongod running as a db server (not repair) and should verify that it is up and that you can connect using the **mongo** shell before you go any further.

Let us know how it works out.

# mercurial - Mercurial 自动同步用户

> ID：10945289
> 
> 赞同：1
> 
> 时间：2012-06-08T08:17:41.577
> 
> 标签：mercurial

我有一个使用 IIS 提供服务的内部 mercurial Web 服务器，使用窗口安全性，并且我的外部 Web 服务器上的另一台服务器以相同的方式设置。

开发人员将代码提交到内部服务器，然后 teamcity 从那里构建。

然而，我们现在正在网站上开发一个客户门户，该门户可以列出一些反复无常的信息。这将连接到 mercurial 的本地实例（即外部服务器上的实例）

我已经在内部服务器上安装了 mercurial autosync 插件，目的是更新外部服务器上代码的主副本，并允许网站从那里读取它的信息。代码永远不会直接签入外部服务器，所有更新都将来自内部服务器。所有存储库都是外部服务器上的存储库的克隆。

我已经在内部服务器“hg autosync -D”的存储库中运行了 autosync 命令，并且已经使用“hg autosync -D -u username”进行了尝试，但是当我检查自动同步日志时，我看到的是：

------------------ 06/08/12 08:54:56 ---------- -------------------- 同步：提交工作副本更改没有更改同步：从其他存储库获取更改 http 授权要求领域：www.mydomain.co.uk 用户：响应预期同步：发生错误，将在下一个间隔重试

有人知道如何正确指定用户（和密码？）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:49:26.723

您可能需要将凭据添加到`C:\Users\<username>\mercurial.ini`运行 Mercurial 的用户的文件中：

```
[auth]
mydomain.prefix = mydomain.co.uk
mydomain.username = <username>
mydomain.password = <password> 
```

# mysql - 跨多个表的 SQL 查询

> ID：10945292
> 
> 赞同：2
> 
> 时间：2012-06-08T08:17:49.483
> 
> 标签：mysql, sql

我只有非常基本的SQL知识，所以如果这是一个愚蠢的Q，请原谅。我在互联网上搜索但无法得到答案。

我有三张桌子：

> ## 标题
> 
> id int <- PK
> 
> 艺术家 ID 整数
> 
> 专辑 ID 整数
> 
> desc varchar
> 
> ## 艺术家
> 
> arist_id int <- FK
> 
> desc varchar
> 
> ## 专辑
> 
> 专辑ID int <- FK
> 
> desc varchar

* * *

> ## 标题数据
> 
> 1、1、1，“给我一切”
> 
> 1、2、2、“更多”
> 
> 1, 3, 3, “什么让你美丽”
> 
> ## 艺人资料
> 
> 1、“斗牛犬”
> 
> 2、《引路人》
> 
> 3、《一个方向》
> 
> ## 专辑数据
> 
> 1、《星球坑》
> 
> 2、“更多”
> 
> 3、《彻夜未眠》

如果我想搜索一个表，我会这样做：

> select * from artist where desc like '%direction%';

我的目标是在三个表中进行搜索。搜索 SQL 查询应返回“title”表的行，其中使用 artist_id 和 album_id 字段（它们是链接键）在三个表中的任何一个的“desc”字段中满足搜索条件。

今天我的大脑完全糊涂了。如果 Q 不清楚，请询问清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T08:24:44.487

您需要`inner join`像这样在表之间创建：

```
select t.* from title t
inner join artist ar on ar.artist_id = t.artist_id
inner join album al on al.album_id = t.album_id
where (t.desc like '%direction%' or ar.desc like '%direction%' or al.desc like '%direction%') 
```

# javascript - 在 chrome 中使用 setTimeout 和 showModalDialog 将阻止选项卡

> ID：10945295
> 
> 赞同：1
> 
> 时间：2012-06-08T08:18:04.580
> 
> 标签：javascript, google-chrome, settimeout, window.open, showmodaldialog

我需要一个关于带有 setTimeout 的 ShowModalDialog 的功能，所以我在 Google Chrome 中测试了弹出窗口和 ModalDialog，我遇到了一些问题。页面加载时显示了两个弹出窗口。一个由 winodw.open() 打开，另一个由 window.showmodaldialog() 打开，如下所示：

```
setTimeout(function(){window.open("PopupWindow.html","_blank","")},100);
setTimeout(function(){window.showModalDialog("ModalDialog.html","","")},100)}; 
```

打开两个弹出窗口后，我单击 PupupWindow.html 上的一个按钮。它将按如下方式调用该函数：

```
function test()
{
  setTimeout(function(){alert("test");},1000);
} 
```

**它在 Google Chrome 14 中运行良好**。在我将 Google Chrome 更新到版本 19 后，PopupWindow.html 将在调用 test() 时挂起，直到 ModalDialog.html 关闭。请告诉我为什么谷歌浏览器 19 上的案例坏了，或者在谷歌浏览器 19 上做 showModalDialog 和 window.open() 的任何方式。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:05:35.247

新版本的 Chrome 实际上表现出正确的行为。我在 Safari 和 Firefox 中也会发生同样的行为。

模态对话框本质上应该阻止用户与应用程序的其余部分进行交互，直到他们完成模态对话框。

Chrome 一直被许多无法正确处理的问题所困扰。请参阅[http://code.google.com/p/chromium/issues/detail?id=4202](http://code.google.com/p/chromium/issues/detail?id=4202)、[http://code.google.com/p/chromium/issues/detail?id=16045](http://code.google.com/p/chromium/issues/detail?id=16045)和[http:// code.google.com/p/chromium/issues/detail?id=42939](http://code.google.com/p/chromium/issues/detail?id=42939)有一些例子。如果您遇到不同的行为，他们似乎最终开始清理其中的一些。

通常`window.showModalDialog`应避免使用，原因有很多，我在此详述 - [http://tjvantoll.com/2012/05/02/showmodaldialog-what-it-is-and-why-you-should-never-use-它/](http://tjvantoll.com/2012/05/02/showmodaldialog-what-it-is-and-why-you-should-never-use-it/) .

如果您需要模态对话框，我强烈推荐[jQuery UI 的对话框插件](http://jqueryui.com/demos/dialog/)。

# ajax - 如何使用 在平原 代替 ?

> ID：10945297
> 
> 赞同：3
> 
> 时间：2012-06-08T08:18:12.340
> 
> 标签：ajax, jsf

我有一个搜索表单，它使用标准 HTML`<form>`标记并像这样发送一个 GET 请求`search.jsf?country=x&city=y`。它们被设置为视图范围 bean 中的视图参数。

搜索表单包含两个级联下拉菜单，一个用于国家，一个用于城市。如何在`<f:ajax>`不更改`<form>`并`<h:form>`因此破坏 GET 功能的情况下更新城市下拉列表？我必须使用“普通香草”ajax`XMLHttpRequest`吗？我如何在 JSF 支持 bean 上使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:37:51.393

`<h:form>`只要提交按钮提交，我就会继续使用JavaScript 并寻求一些帮助，以便将其转换为 GET 表单。

就像是：

```
<h:form prependId="false" onsubmit="doGet(this)">
    <h:selectOneMenu id="country" value="#{bean.country}">
        <f:selectItems value="#{bean.countries}" />
        <f:ajax listener="#{bean.loadCities}" render="city" />
    </h:selectOneMenu>
    <h:selectOneMenu id="city">
        <f:selectItems value="#{bean.cities}" />
    </h:selectOneMenu>
    <input type="submit" value="Search" />
</h:form> 
```

用这个 JS 把它变成一个 GET 表单并删除两个`<h:form>`特定的隐藏字段：

```
function doGet(form) {
    form.method = "get";
    form.removeChild(document.getElementsByName(form.name)[1]);
    form.removeChild(document.getElementById("javax.faces.ViewState"));
} 
```

# ios - 计算适合固定矩形 TextView 的字符

> ID：10945298
> 
> 赞同：3
> 
> 时间：2012-06-08T08:18:13.250
> 
> 标签：ios, nsstring, uitextview

我在这里看到人们需要计算给定大小的 NSString 的大小，但我需要做相反的事情。

给定一个指定的矩形（或固定的 UITextView，或多行 UILabel，没有滚动）我需要知道：

*   如果它设法显示我的 NSString 的所有字符
*   如果不是，显示的最后一个字符是什么

这样我就可以在另一个 UITextView 中显示剩余的文本（当然，如果我可以使用单个 UITextView，我就不会有这个问题）。

起初这似乎是一件简单的事情，但实际上我没有找到方法，直觉上我认为我可以使用 UITextView 的任何一个：

```
textView.contentSize.height; 
```

或 NSString 的：

```
sizeWithFont:constrainedToSize:lineBreakMode: 
```

或两者的组合，但我需要精确，这些方法不能帮助我告诉最后一个设法适合 UITextView 可见区域的字符是什么。

不确定这是否真的可行，但我的客户认为编程 iOS 就像打印报纸并希望能够围绕图像格式化文本......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:54:56.443

您也许可以从一个字符长的字符串中获得一行文本的最大高度。

如果您将它与 sizeWithFont:constrainedToSize:lineBreakMode: 一起使用，那么您应该能够知道您的文本是否超过一行（如果 cgsize 高度大于一行文本的高度）。

为了找出最后一个字符（或单词），您必须在字符串的长度周围循环添加字符（或单词），并检查 cgsize 高度何时增加以添加新行，这将为您提供何时拆分为多个字符串（用于多个字段/标签/文本视图）或何时在文本中插入换行符（如果使用单个多行文本视图或标签）的字符点。

我希望你能找到一个更简单的方法...

# sql - SQL 将 DATETIME 转换为 VARCHAR？

> ID：10945302
> 
> 赞同：-2
> 
> 时间：2012-06-08T08:18:40.687
> 
> 标签：sql

我正在处理一个需要 DATE 的查询！！

```
DECLARE @YesterDay DATETIME, @Today DATETIME 

SET @YesterDay = DateAdd(DD, DateDiff(DD, 0, GETDATE())-1, 0) 
SET @Today = DateAdd(DD, DateDiff(DD, 0, GETDATE()), 0) 
select @YesterDay = convert(varchar, getdate()-1 , 110) 
select @Today = convert(varchar, getdate() , 110) 
EXEC    @return_value = [dbo].[post_sec_admin_list_user_log]
        @pDateFr = @YesterDay ,
        @pDateTo = @Today,
        @pName = '',
        @pSec = NULL

@DateFr is varchar(50)
@DateT0 is varchar(50) 
```

`@dateFr`和`@dateTo`都是`varchar`.. _

我尝试执行它，它打印时间格式是这样的`2011-06-09 16:15:38.927`

错误声明

> 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。

另外，`varchar`我需要的格式是`MM-DD-YYYY`

有人知道我的错误在哪里吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:38:28.517

您的代码令人困惑：

```
DECLARE @YesterDay DATETIME, @Today DATETIME
SET @YesterDay = DateAdd(DD, DateDiff(DD, 0, GETDATE())-1, 0) 
SET @Today = DateAdd(DD, DateDiff(DD, 0, GETDATE()), 0) 
select @YesterDay = convert(varchar, getdate()-1 , 110) 
select @Today = convert(varchar, getdate() , 110) 
```

因此，您将其声明为 DATETIME，使用 DateDiff 设置值，然后使用使用不同方法重新计算的日期的 varchar 表示覆盖该值。

在第 4 行和第 5 行，@Yesterday 和 @Today 变量仍然是 DATETIME，因为它是这样声明的。

**编辑：**正如对我的回答的评论中提到的，您需要一个变量来传递给该过程。因此，正确的解决方法是在开始时将变量声明为 VARCHAR(50) 并直接进行转换。

```
DECLARE @YesterDay VARCHAR(50), @Today VARCHAR(50)
SELECT @YesterDay = convert(varchar(50), dateadd(dd, -1, getdate()) , 110) 
SELECT @Today = convert(varchar(50), getdate() , 110) 
```

然后按照您最初的方式调用该过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:31:51.097

我的猜测是 getdate()-1 部分是错误的。

另外，你正在制作`dateadd`，`datediff`为什么？试试这样：

```
SET @YesterDay = dateadd(dd, -1, GETDATE()) 
SET @Today = GETDATE() 
select @YesterDay = convert(varchar(50), dateadd(dd, -1, getdate()) , 110) 
select @Today = convert(varchar(50), getdate() , 110)
EXEC    @return_value = [dbo].[post_sec_admin_list_user_log]
        @pDateFr = @YesterDay ,
        @pDateTo = @Today,
        @pName = '',
        @pSec = NULL 
```

# php - php 中的 $_POST 不一致

> ID：10945303
> 
> 赞同：-8
> 
> 时间：2012-06-08T08:18:44.967
> 
> 标签：php, post

我已经开始学习PHP。`$_POST`变量在一些文件中工作，我什至可以将获得的数据发布`$_POST`到数据库中。

奇怪的`$_POST`是，在几个文件中不起作用。我的意思是它不一致。

下面是html：

```
<html>
<title></title>
<head>
</head>
<body>
 <form method="POST" action="addemail.php">
<label for="firstname">First name:</label>
<input type="text" id="firstname" name="firstname" /><br />
<label for="lastname">Last name:</label>
<input type="text" id="lastname" name="lastname" /><br />
<label for="email">Email:</label>
<input type="text" id="email" name="email" /><br />
<input type="submit" name="submit" value="Submit" />
</form>
</body>
</html> 
```

下面是PHP代码：

```
<html>
<body>

<?php 
    $first_name = $_POST['firstname'];
    $last_name = $_POST['lastname'];
    $email = $_POST['email'];   

    print($first_name);

    $dcf = mysqli_connect('localhost','uname','XXX','elvis_store') 
                 or die('Error connecting to MYSQL Server.');

    $query = "INSERT INTO email_list (first_name, last_name, email) " .
                    "VALUES ('$first_name', '$last_name', '$email')";

    $result = mysqli_query($dcf, $query);

    mysqli_close($dcf);

?>

</body>
</html> 
```

任何克服这个问题的建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:26:36.890

$_POST 不应该有任何一致性问题。这可能是很多事情：

**可能的代码错误**

1.  你拼错了一个键名

2.  确保您实际设置了值

3.  也许您正在通过 URL www.example.com?var=x (GET) 传递一些变量，然后尝试引用`$_POST['var']`而不是`$_GET['var']`

4.  也许您实际上并没有 POST 到该页面。如果您从表单提交，请确保`method`属性设置为`POST`(method="POST")

我敢肯定还有很多其他的可能性（比如你的开发环境），但不太可能`$_POST`不一致。我需要在您的最后看到更多代码。

**可能的环境/使用错误**

1.  确保 WAMP 已启动（它并不总是自动启动）

2.  确保您正在访问您的页面，`http://localhost/path/file.php`而不是试图直接从它所在的文件夹中打开它 ie `C:\path\file.php`。它必须通过 Apache 运行。

即只有`$_POST`那不起作用吗？如果你输入`<?php echo "TEST"; ?>`你的脚本，它会回显`TEST`吗？

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-08T08:22:57.073

您必须检查您要发布的 HTML 文件中的字段名称。所以，您的 HTML 文件中的字段名称可能有问题。仔细查看。

# excel - JasperReports 中的 Excel 格式不正确

> ID：10945304
> 
> 赞同：2
> 
> 时间：2012-06-08T08:18:51.480
> 
> 标签：excel, jasper-reports, format

当我将报告导出到 Excel 时，如果要显示多行，我的单元格不会显示整个文本；它只是削减了一部分，我需要手动扩展行以查看其中的所有数据

我使用以下格式：

```
<band height="21">
            <staticText>
                <reportElement style="pageHeader" mode="Opaque" x="0" y="6" width="88" height="15"/>
                <textElement textAlignment="Left">
                    <font fontName="Cambria" size="10"/>
                </textElement>
                <text><![CDATA[First Name]]></text>
            </staticText>
</band>

 <band height="30" splitType="Prevent">
            <textField isStretchWithOverflow="true">
                <reportElement positionType="Float" stretchType="RelativeToTallestObject" x="0" y="0" width="88" height="25"/>
                <textElement textAlignment="Left">
                    <font fontName="Cambria" size="10"/>
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{firstName}]]></textFieldExpression>
            </textField>
</band> 
```

我应该设置一个 xls 属性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:51:50.920

I solved this problem setting line spacing to double at text field properties menu.

Dosn't look different but shows full text.

# r - 函数不应该返回 NaN

> ID：10945307
> 
> 赞同：2
> 
> 时间：2012-06-08T08:18:59.687
> 
> 标签：r

我定义了以下两个函数

```
test <- function(t) {   
   return( (0.5*eta^2/theta)*(1-exp(-2*theta*t)) )   
}

test2 <- function(s,t=s) {   
   return( (0.5*eta^2/theta)*exp(-theta*(s+t))*(exp(2*theta*min(s,t)) - 1) )   
} 
```

并放

```
> theta=1.2  
> eta=1.8  
> mu=0.2 
```

现在定义了测试函数，以便`test(t)=test2(t,t)`. 问题是返回以下内容

```
> test2(500)   
[1] NaN    
> test(500)    
[1] 1.35 
```

这里有什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:26:25.450

可能在第二个函数中缺少乘法，这对我有用

```
test <- function(t) {
   return( (0.5*eta^2/theta)*(1-exp(-2*theta*t)) )
}

test2 <- function(s,t=s) {
   return (0.5*eta^2/theta)*exp(-theta(s+t))*(exp(2*theta*min(s,t)) - 1) 
}

theta=1.2
eta=1.8
mu=0.2

test2(500)
test(500) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T08:41:23.193

@tomaskrehlik 正确识别了原始指数计算中的下溢/上溢问题。为避免该问题，您可以将其重写为：

```
test3 <- function(s,t=s) {
   return((0.5*eta^2/theta)*exp(-theta*(s+t)+2*theta*min(s,t)) -
      exp(-theta*(s+t))) 
```

`return [expression that evaluates to NaN]`与此同时，我对另一个答案中那个有趣的代码发生了什么感到有点困惑......？？

# c#-4.0 - 如何在 c# 控制台应用程序中包含 config.properties 之类的文件，以便我可以修改它应用程序应该采用这些值？

> ID：10945317
> 
> 赞同：1
> 
> 时间：2012-06-08T08:19:54.540
> 
> 标签：c#-4.0, properties, config

我正在开发一个 C# 控制台应用程序。我想包含一些属性文件，它具有名称值排序 pf 对，我可以在运行时使用它们并且可以像 java 中的 config.properties 一样可编辑有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-30T23:51:40.930

只需[将 App.config 文件添加到项目中](http://msdn.microsoft.com/en-us/library/ms184658.aspx)

然后设置你的配置文件来保存属性值

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="Property1" value="value1"/>
    <add key="Property2" value="value2"/>
    <add key="Property3" value="value3"/>
  </appSettings>    </configuration> 
```

之后，您需要在项目的解决方案资源管理器中[添加](http://msdn.microsoft.com/en-us/library/wkze6zky.aspx)对 .NET`System.Configuration`程序集的引用（如果您尚未引用它）。

然后你可以做这样的事情

```
using System;
using System.Configuration;

namespace YourAppNamespace
{
    class Program
    {
        static void Main(string[] args)
        {
            string property1 = ConfigurationManager.AppSettings["Property1"];
            string property2 = ConfigurationManager.AppSettings["Property2"];
            string property3 = ConfigurationManager.AppSettings["Property3"];

            Console.WriteLine(property1);
            Console.WriteLine(property2);
            Console.WriteLine(property3);
        }
    }
} 
```

# sqlite - SQLCipher + POCO C++

> ID：10945319
> 
> 赞同：3
> 
> 时间：2012-06-08T08:20:06.683
> 
> 标签：sqlite, build, sqlcipher, poco-libraries

我正在尝试在我的 Mac Lion 上用[sqlcipher替换 POCO 的 sqlite。](http://sqlcipher.net/)关于构建过程和替换的信息不多，但是我想我应该试一试。

我已经合并了 sqlcipher，然后我将 Data/Sqlite/src Poco 目录中的 sqlite3.c 和 sqlite3.h 替换为 sqlcipher 的那些，将 SQLITE_HAS_CODEC 和 SQLITE_TEMP_STORE=2 参数添加到 Makefile 并尝试构建它整件事情。

但是我收到以下错误：

```
Undefined symbols for architecture x86_64:
  "_EVP_get_cipherbyname", referenced from:
      _sqlcipher_activate in sqlite3.o
      _sqlcipher_codec_ctx_set_cipher in sqlite3.o
  "_OPENSSL_add_all_algorithms_noconf", referenced from:
      _sqlcipher_activate in sqlite3.o
  "_RAND_bytes", referenced from:
      _sqlcipher_random in sqlite3.o
  "_EVP_CIPHER_key_length", referenced from:
      _sqlcipher_codec_ctx_set_cipher in sqlite3.o
  "_EVP_CIPHER_iv_length", referenced from:
      _sqlcipher_codec_ctx_set_cipher in sqlite3.o
  "_EVP_CIPHER_block_size", referenced from:
      _sqlcipher_codec_ctx_set_cipher in sqlite3.o
  "_EVP_sha1", referenced from:
      _sqlcipher_codec_ctx_set_cipher in sqlite3.o
      _sqlcipher_page_hmac in sqlite3.o
  "_EVP_MD_size", referenced from:
      _sqlcipher_codec_ctx_set_cipher in sqlite3.o
  "_HMAC_CTX_init", referenced from:
      _sqlcipher_page_hmac in sqlite3.o
  "_HMAC_Init_ex", referenced from:
      _sqlcipher_page_hmac in sqlite3.o
  "_HMAC_Update", referenced from:
      _sqlcipher_page_hmac in sqlite3.o
  "_HMAC_Final", referenced from:
      _sqlcipher_page_hmac in sqlite3.o
  "_HMAC_CTX_cleanup", referenced from:
      _sqlcipher_page_hmac in sqlite3.o
  "_EVP_CipherInit", referenced from:
      _sqlcipher_page_cipher in sqlite3.o
  "_EVP_CIPHER_CTX_set_padding", referenced from:
      _sqlcipher_page_cipher in sqlite3.o
  "_EVP_CipherUpdate", referenced from:
      _sqlcipher_page_cipher in sqlite3.o
  "_EVP_CipherFinal", referenced from:
      _sqlcipher_page_cipher in sqlite3.o
  "_EVP_CIPHER_CTX_cleanup", referenced from:
      _sqlcipher_page_cipher in sqlite3.o
  "_PKCS5_PBKDF2_HMAC_SHA1", referenced from:
      _sqlcipher_cipher_ctx_key_derive in sqlite3.o
ld: symbol(s) not found for architecture x86_64 
```

以前有人试过吗？有人知道对此的潜在解决方法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T12:45:38.790

这些是 OpenSSL 符号，因此您可能没有链接到 libcrypto。添加`-lcrypto`到链接器标志。

# python - 动态更改并行线程数

> ID：10945320
> 
> 赞同：2
> 
> 时间：2012-06-08T08:20:07.957
> 
> 标签：python, multithreading, networking, optimization

我有一个程序需要通过网络进行大量查询，所以我正在做的是并行化工作。它实际上是 I/O 受限的，我只是在做：

```
for i in range(options.workers):
    w = Worker(queue, output_queue, options.site)
    w.setDaemon(True)
    w.start()

for i, dataset_metadata in enumerate(datasets_metadata):
    queue.put((i+1, dataset_metadata))

queue.join() 
```

the `options.workers` comes from the command line. Now I want to dynamically change the number of works.

First question: how to add workers after `queue.join`?

Second question: how to evaluate the optimal number of workers at run time? I think I've to monitor the speed tasks/time, increase the number of workers until this ratio doesn't change.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:04:25.773

您可能可以自己启动和停止您的工作人员，但您需要的大部分功能可能已经可用：

*   该[`multiprocessing.dummy`](http://docs.python.org/library/multiprocessing#module-multiprocessing.dummy)模块导出与 相同的 API `multithreading`，仅使用线程而不是进程实现。
    这意味着您可以使用[`Pool`](http://docs.python.org/library/multiprocessing#using-a-pool-of-workers)已经实现的工作程序，并且如果在某些时候需要，它可以很容易地从线程切换到多处理。
*   [`concurrent.futures`](http://docs.python.org/py3k/library/concurrent.futures)API 提供了更高级的并发模型。它在 python3.2+ 的标准库中，但有[早期](http://pypi.python.org/pypi/futures)版本的反向移植。

# objective-c - 如何在 xcode 中访问其他视图控制器变量/属性

> ID：10945325
> 
> 赞同：0
> 
> 时间：2012-06-08T08:20:37.417
> 
> 标签：objective-c, ios4, xcode4, uiviewcontroller, xcode4.2

我知道以前有人问过类似的问题，但请多多包涵，因为我是 Objective C 的新手（对 C 有很好的了解）。

我的情况是我有一个带有两个窗口的标签栏控制器。当我在“秒”中按下按钮时，我更改了一个变量`changeName`。我想`changeName`在我的“第一个”视图控制器中使用值，但偶然发现了一些问题：

为了到达另一个视图控制器，我从 SO 中找到了这个（不幸的是我忘记了在哪里）：

```
-(NSString *)newName{

// Create a UIStoryboard object of "MainStoryBoard_iPhone" named storyboard
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:(NSString *)@"MainStoryBoard_iPhone" bundle:(NSBundle *)nil];

// Create a UIViewController object of the wanted element from MainStoryBoard_iPhone
UIViewController *secondview = [storyboard instantiateViewControllerWithIdentifier:(NSString *)@"secondBoard"];

return secondview.changeName;
} 
```

我在我的第一个.m。`MainStoryBoard_iPhone`是 .xib/storyboard 文件的名称。

但不是。错误说

```
Property 'changeName' not found on object of type 'UIViewController *' 
```

在我的 second.h 我有

```
 @property (readwrite, retain) NSString *changeName; 
```

在 second.m

```
 @synthesize changeName; 
```

感谢所有帮助，但请记住，我只使用了两天的 OOP。谢谢大家

编辑：我应该在这里输入什么？

```
 - (void)viewDidLoad
{
[super viewDidLoad];
mylabel.text = Name; // or [mylabel.text Name] or something? 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T08:27:13.177

您需要将视图控制器转换为您自定义的第二个视图控制器（因为`UIViewController`没有属性`changeName`）。

所以请执行以下操作：

```
// Create a UIViewController object of the wanted element from MainStoryBoard_iPhone
SecondViewController *secondview = (SecondViewController *)[storyboard instantiateViewControllerWithIdentifier:(NSString *)@"secondBoard"]; 
```

我假设 SecondViewController 是您的第二个控制器的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T16:48:59.880

在我的情况下，我想从 FirstViewController 传递一个字符串以在 SecondViewController 中设置一个文本字段，所以：

1- 在 SecondViewController.h

> @property (strong, nonatomic) IBOutlet UITextField *someTextField;// 这是链接到 UITextField

2- 在 FirstViewController.m 中：

> #import "SecondViewController.h"

3-我将在 FirstViewController 中按下按钮后执行此操作：

> SecondViewController *SecondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
> 
> //设置字段值
> 
> ```
>  SecondView.someTextField.text = @"HeLLO from First";
> 
> UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController: SecondView]; 
> ```
> 
> //显示广告视图
> 
> ```
>  [self.navigationController presentViewController:nav animated:YES completion:nil]; 
> ```

4-就是这样！

5- 有一种情况，如果我在 FirstViewController 中并想以相同的方式在 SecondViewController 中设置一个字符串属性，则在您按下 SecondViewController 中的某个按钮之前，该字符串不会获得值，它不会例如在 viewDidLoad 中得到它！不知道为什么。

# android - 在android中移动小部件

> ID：10945329
> 
> 赞同：-2
> 
> 时间：2012-06-08T08:20:51.013
> 
> 标签：android, android-widget, live-wallpaper, android-appwidget

我在android中使用appWidgetManager制作了一个数字时钟作为小部件。现在我想在主屏幕上移动那个时钟。请帮忙谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:49:27.600

执行以下步骤：

1.  长按主屏幕

2.  从列表中选择“小部件”

3.  从列表中选择要添加的小部件

选定的小部件将添加到您的主屏幕。

# python - Gearman工人client_id python

> ID：10945335
> 
> 赞同：0
> 
> 时间：2012-06-08T08:21:32.190
> 
> 标签：python, gearman

这个命令是什么 GearmanWorker.set_client_id(client_id) ？ [http://packages.python.org/gearman/worker.html#gearman.worker.GearmanWorker.set_client_id](http://packages.python.org/gearman/worker.html#gearman.worker.GearmanWorker.set_client_id)

这意味着工作人员只为具有指定 id 的客户提供服务？如果是，我怎样才能找到客户的 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:27:36.053

来自[Gearman 协议](http://gearman.org/protocol/)的文档：

```
SET_CLIENT_ID

    This sets the worker ID in a job server so monitoring and reporting
    commands can uniquely identify the various workers, and different
    connections to job servers from the same worker. 
```

所以它与工人-客户关系没有任何关系。这仅由客户端传递且工作人员正在注册的函数句柄处理。此 ID 可能出现在管理命令的输出中，可以帮助您调试/监控您的应用程序。事实上，某些接口（例如 PHP）不支持此设置，但仍然完全可用。

# php - 发布和摘录

> ID：10945338
> 
> 赞同：1
> 
> 时间：2012-06-08T08:21:51.153
> 
> 标签：php, wordpress, substr

我有以下一段代码，它输出了一篇长文章：

`<?php the_content(); ?>`

我试图只显示文章的摘录（前 29 个单词），去掉 HTML 并在末尾添加“...更多”。

```
<?php substr(the_content, 29) ?> 
```

我试过这个，但它对长度没有影响。

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:27:14.433

你需要的是[the_excerpt](http://codex.wordpress.org/Template_Tags/the_excerpt)

```
<?php the_excerpt(); ?> //and you could check the doc how to set the length. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:26:46.740

```
<?php echo substr(get_the_content(), 0, 29); ?> 
```

[the_content](http://codex.wordpress.org/Function_Reference/the_content)打印内容，[get_the_content](http://codex.wordpress.org/Function_Reference/get_the_content)会得到它。

# jquery - TileView 类似 HTML5 的控件

> ID：10945345
> 
> 赞同：0
> 
> 时间：2012-06-08T08:22:39.647
> 
> 标签：jquery, html

是否可以创建某种控件，或者如果它在 jquery 中存在类似于此控件[http://demos.telerik.com/silverlight/#TileView/FirstLook](http://demos.telerik.com/silverlight/#TileView/FirstLook)的平铺视图控件，示例链接是 silverlight 控件...但我需要在 jquery 中进行此控制。

有 jquery Masonry 但是，是否可以制作像 Telerik 的 tileview 这样的控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:30:42.920

你可以使用[jQueryUI 可排序](http://jqueryui.com/demos/sortable/)

# android - 我是否需要为我的所有 Android 应用程序使用相同的证书？

> ID：10945353
> 
> 赞同：2
> 
> 时间：2012-06-08T08:23:09.923
> 
> 标签：android, certificate, publishing, google-play

如果它们都在同一个 Google Play 帐户下发布，我是否需要使用不同的证书来签署不同的应用程序，或者我可以始终使用相同的证书吗？如果没有特别要求，最佳做法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T08:29:04.323

您不需要使用相同的证书在同一个开发者帐户上发布所有应用程序，并且每个应用程序可以使用一个证书。

但是您必须使用最初发布时使用的相同证书发布应用程序的更新。这意味着您应该确保您的密钥库保存在多个位置。

最佳实践是每个开发者帐户拥有一个密钥库，因为使用相同证书的应用程序可以在同一进程中运行，并以安全的方式共享数据（根据[文档](http://developer.android.com/guide/publishing/app-signing.html#strategies)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T08:25:25.477

不，你不必。如果你这样做了，你可以声明基于签名的权限，这样你就可以从你的一个应用程序中公开服务，只有你自己的应用程序可以访问。不利的一面是，如果您丢失了密钥，您将同时丢失所有应用程序（您必须重新发布）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-04T08:38:58.697

我更喜欢每个应用程序都有一个，特别是因为这样可以更轻松地将应用程序转移给其他人，而无需向他们提供所有应用程序的证书。

# java - 尝试在 Oracle 11.2.0.2.0（64 位）中获取连接时出现 java.lang.ArithmeticException

> ID：10945359
> 
> 赞同：7
> 
> 时间：2012-06-08T08:23:55.670
> 
> 标签：java, oracle, oracle11g, java-stored-procedures

我目前正在使用 Oracle 中的 Java 存储过程，并且在尝试在我的 Java 代码中建立连接时看到一些奇怪的行为。

我的 Java 被打包成一个 jar 文件，然后使用`loadjava`命令行实用程序部署到 Oracle 中。`package`然后在数据库中创建A ，它将指定 Java 类中的每个方法通过调用规范映射到 PL/SQL 函数。

我正在使用的一些列是`CLOB`s。在 Java 中，我尝试将 this 的值`CLOB`（在调用规范中映射为`oracle.sql.CLOB`）提取到 a中`String`：

```
private static String getStringFromCLOB(CLOB clob) throws SQLException {
    long length = clob.length();
    return clob.getSubString(1, (int) length);
} 
```

当我运行此代码时，我会在 SQL*Plus 中看到以下堆栈跟踪：

```
java.lang.ArithmeticException: / by zero
    at oracle.jdbc.driver.T2SConnection.<init>(T2SConnection.java:107)
    at oracle.jdbc.driver.T2SDriverExtension.getConnection(T2SDriverExtension.java:31)
    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:481)
    at oracle.jdbc.driver.OracleDriver.defaultConnection(OracleDriver.java:505)
    at oracle.sql.DatumWithConnection.getPhysicalConnection(DatumWithConnection.java:53)
    at oracle.sql.DatumWithConnection.getInternalConnection(DatumWithConnection.java:177)
    at oracle.sql.CLOB.getDBAccess(CLOB.java:1383)
    at oracle.sql.CLOB.length(CLOB.java:197) 
```

在我刚刚看到的消息之前，`Exception`我用 a 包装了有问题的方法的内容，`try / catch`这样我就可以将完整的堆栈跟踪转储到`System.out`.

值得注意的是，**我已经在 Oracle 11.2.0.1.0 (32bit) 上运行了这个，但它不适用于 Oracle 11.2.0.2.0 (64bit)**。

我也有其他支持 Java 的 PL/SQL`function`正常工作。只有那些试图建立连接的人才会失败。

我看过了`<ORACLE_HOME>\jdbc\lib`，这些罐子虽然名称相同，但在这两个发行版中似乎有所不同。目录中的 jars 是（显示 11.2.0.1.0 大小和 11.2.0.2.0 大小）：

*   `ojdbc5.jar`(1,950KB | 1,983KB)
*   `ojdbc5_g.jar`(3,010KB | 3,271KB)
*   `ojdbc5dms.jar`(2,374KB | 2,489KB)
*   `ojdbc5dms_g.jar`(3,030KB | 3,291KB)
*   `ojdbc6.jar`(2,062KB | 2,102KB)
*   `ojdbc6_g.jar`(3,323KB | 3,782KB)
*   `ojdbc6dms.jar`(2,594KB | 2,698KB)
*   `ojdbc6dms_g.jar`(3,344KB | 3,805KB)
*   `simplefan.jar`(20KB | 20KB) <-- 可能相同

这些 jar 的清单文件确认它们是为特定版本构建的，即 11.2.0.1.0 或 11.2.0.2.0。11.2.0.2.0 中是否可能引入了错误？还是更有可能是用户，即我的错误:-)

另外，`oracle.jdbc.driver.T2SConnection`班级住在哪里？

非常感谢任何帮助/指导。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-06-27T13:44:26.320

当我的密码到期时，我遇到了这个问题。我解决了这个只是更改密码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T17:54:45.657

最近的 Oracle JDBC 驱动程序有类似的问题。我们的案例似乎是混合来自不同版本的 jar 的问题，例如 11.2.0.1 和 11.2.0.3，例如来自 11.2.0.1 的 ojdbc6.jar 和来自 11.2.0.3 的 oi18n.jar。一种不错的技术是反编译 Oracle JDBC 驱动程序的整个 jar，并查看源代码中引发错误的行。可以提供有关错误/错误的提示。

尝试在两台客户端机器上使用相同的 JDBC 驱动程序版本。

`oracle.jdbc.driver.T2CConnection`存在于驱动程序的任何主 jar 中，例如 ojdbc5.jar。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-22T19:09:53.013

我的 Java/JDBC 代码一天一天地突然停止工作。

这里同样的问题。密码过期。我尝试了 ojdbc6 和 ojdbc7。升级了我的虚拟机环境。该代码对不同的数据库运行良好。

```
target_user="c##ora$rman_bkp"
Placeholder START_DATE=20170422
Placeholder START_DATE_TIME=2017Apr22-20h47m13s
jdbcURL='jdbc:oracle:oci8:@twelve_static'
Exception in thread "main" java.lang.ArithmeticException: / by zero
        at oracle.jdbc.driver.OraclePreparedStatement.<init>(OraclePreparedStatement.java:1387)
        at oracle.jdbc.driver.T2CPreparedStatement.<init>(T2CPreparedStatement.java:109)
        at oracle.jdbc.driver.T2CDriverExtension.allocatePreparedStatement(T2CDriverExtension.java:81)
        at oracle.jdbc.driver.PhysicalConnection.prepareStatementInternal(PhysicalConnection.java:2013)
        at oracle.jdbc.driver.PhysicalConnection.prepareStatement(PhysicalConnection.java:1960)
        at oracle.jdbc.driver.T2CConnection.prepareStatement(T2CConnection.java:57)
        at oracle.jdbc.driver.PhysicalConnection.prepareStatement(PhysicalConnection.java:1866)
        at oracle.jdbc.driver.T2CConnection.prepareStatement(T2CConnection.java:57)
        at LV.verifyLicensedDbId(LV.java:238)
        at RmanJ.<init>(RmanJ.java:1891)
        at RmanJ.main(RmanJ.java:1809)

SYS@TWELVE:SQL> select account_status from dba_users where username='c##ora$rman_bkp';

ACCOUNT_STATUS
--------------------------------
EXPIRED(GRACE)

SYS@TWELVE:SQL> connect "c##ora$rman_bkp"
Enter password:
ERROR:
ORA-28002: the password will expire within 5 days

Connected.
c##ora$rman_bkp@TWELVE:SQL> password
Changing password for "c##ora$rman_bkp"
Old password:
New password:
Retype new password:
Password changed 
```

测试了我的代码，它再次正常工作。甲骨文软件中的另一个令人难以置信的错误。他们的质量保证永远不会正确。我绝对相信他们甚至没有适当的测试计划，否则他们会遇到严重的错误，例如过期密码被零除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T09:10:36.780

对于那些可能遇到此问题的人，我们发现它是由 Oracle 中的 JVM 安装损坏引起的。这可能是由于安装不当造成的。

重新安装 Oracle 的 JVM 方面允许`oracle.jdbc.driver.OracleConnection.defaultConnection()`运行而没有任何问题，无论是显式调用还是作为另一个调用的堆栈的一部分调用，例如`oracle.sql.CLOB.length()`.

# visual-studio-2010 - 如何更改默认部署属性？

> ID：10945363
> 
> 赞同：0
> 
> 时间：2012-06-08T08:24:12.780
> 
> 标签：visual-studio-2010, biztalk, biztalk-deployment

我们的 BizTalk Server 已重命名，但是当我们创建一个新项目时，它仍然默认使用以前的服务器。我一直在寻找，但我找不到任何地方来设置这些默认值并更新它。

编辑：

因为如果我添加图像可能会更清楚，所以我做到了。

基本上现在当创建一个新项目时，下面屏幕中的服务器是 BizTalkDev_1。我们可以在创建新项目时将其更改为始终为 localhost 吗？某处隐藏的ini文件？

![我想要默认的图像](../Images/a705defdc399cd1a415b836483cf8931.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T16:02:23.103

当你去视觉工作室项目时。右键单击项目...转到属性...在部署部分您可以更改服务器名称...

# perl - 使用 shell 脚本删除换行符

> ID：10945366
> 
> 赞同：2
> 
> 时间：2012-06-08T08:24:20.160
> 
> 标签：perl, shell, sed, awk

我有一个如下所示的文本文件。它有一些我想删除的额外换行符。

```
LINE1: @Line1Col1 @Line1Col2

LINE2: @Line1Col3 @Line1Col4 @ Line1Col5@

LINE3: @Line2Col1 @Line2Col2 @Line2Col3

LINE4: @Line2Col4@

LINE5: Line2Col5 @ 
```

我想删除换行符，使其看起来像这样：

```
@Line1Col1 @Line1Col2 @Line1Col3 @Line1Col4 @Line1Col5@

@Line2Col1 @Line2Col2 @Line2Col3 @Line2Col4@ Line2Col5@ 
```

如果一行以@定界符开始并以@定界符结束，则该行被定义为完整。请注意，分隔符 @ 已存在于文件中。例如，追加 LINE1 和 LINE2 使该行完整。类似地，附加 LINE3、LINE4 和 LINE5 会形成另一个完整的行（其中，在每一行上，数据 LineXcolX 用于说明目的）。因此，我需要删除 LINE1 中存在的换行符并保留 LINE2 中的换行符。同样，我需要删除 LINE3 和 LINE4 中的换行符并保留 LINE5 中的换行符。中间可以有多个空格；因此，空格不能用于解决方案。

**重新编辑[添加了实际文件的一部分]**

我能想到的一个逻辑是，仅在前一行以“@”结尾且当前行以“@”开头的条件下保留新行。但是，我不确定如何在 shell 中实现这一点，或者是否可能有更好的逻辑。

@ 258908159@ 258908159@Subwork=E,Mment=SS09 @ 4@2012 年 6 月 5 日 23:24:41 @2012 年 6 月 5 日 23:24:00 @ 2@ *** "DUMMYI"U 120605 DUMMY DATA @Jun 5 2012 23:26:00 @ 403@ 21@PRCAIE @ 10780093@ -2@ @ -1@ -2@ 1@ 35@ 1@@ -1@ NULL@ -1@ 154@ 1@ 40958044@ 1@ 1@ 3@ 0@ -2@ 1@ @ 258908158@ 258908158@Subwork=E,Mment=SS09 @ 4@Jun 5 2012 23:24: 41 @2012 年 6 月 5 日 23:24:00 @ 2@ 3TEST300@2@3TEST300@2@3TEST3Mment=SS09 @ 4@Jun 5 2012 23:24:41 @Jun 5 2012 23:24:00 @ 2@ 3TEST3Mment=SS09 @ 4@Jun 5 2012 23:24:41 @Jun 5 2012 23:24:00 @ 2@ 3TEST3
结束@2012 年 6 月 5 日 23:26：00@402@21@@10780093@-2@@-1@-2@1@35@1@@ -1@ NULL@ -1@ 154@ 1@ 40958044@ 1@ 1@ 3@ 0@ -2@ 0@

#####New Line is required 这里必须删除所有其他新行

@ 258908158@ 258908158@Subwork=E,Mment=SS09 @ 4@2012 年 6 月 5 日 23:24:41 @2012 年 6 月 5 日 23:24:00 @ 2@ *** “DUMMYI”U 120605 DUMMY @Jun 5 2012 23:26:00 @ 402@ 21@PRCAIE @ 10780093@ -2@ @ -1@ -2@ 1@ 35@ 1@@ -1@ NULL@ -1@ 154@ 1@ 40958044@ 1@ 1@ 3@ 0@ -2@ 1@ @ 258908157@ 258908157@Subwork=E,Mment=SS09 @ 4@Jun 5 2012 23:24: 41 @2012 年 6 月 5 日 23:24:00 @ 2@ 3TEST300@2@3TEST300@2@3TEST3Mment=SS09 @ 4@Jun 5 2012 23:24:41 @Jun 5 2012 23:24:00 @ 2@ 3TEST3Mment=SS09 @ 4@Jun 5 2012 23:24:41 @Jun 5 2012 23:24:00 @ 2@ 3TEST3
结束@2012 年 6 月 5 日 23:26：00@401@21@@10780093@-2@@-1@-2@1@35@1@@ -1@ NULL@ -1@ 154@ 1@ 40958044@ 1@ 1@ 3@ 0@ -2@ 0@

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:18:20.173

我的理解是我们在进行过程中连接和存储行。如果当前行以“@”开头并且存储的串联批次以“@”结尾，那么我们处于行边界。然后我们打印存储的批次并重新开始。

```
awk '/^@/ && l~/@$/ { print l; l=$0; next } { l=l $0} END { print l }' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:32:56.983

这可能对您有用：

```
sed ':a;$bb;N;/@ *\n *@/!{y/\n/ /;ba};:b;P;D' file 
```

解释：

删除除被`@`'s 包围的所有换行符：

*   为循环制作一个标签：`:a`
*   如果最后一行换行到第二个标签`b`。`$bb`
*   将下一行追加到模式空间。`N`
*   寻找被`@`标志包围的换行符。`/@ *\n *@/`
*   如果没有这样的模式，则将换行符转换为空格并循环到 label `a`。`!{y/\n/ /;ba}`
*   找到模式（所有换行符都转换完毕）或文件结束条件。打印到换行符。`:b;P`
*   删除上面打印的行并开始新的循环（不要阅读下一行）。`D`

一个更神秘的解决方案：

```
 sed '$!{N;/@ *\n *@/!{s/\(.*\)\n/\n\1/;D}};P;D' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:47:59.320

这个简单的 Perl 程序应该做你想做的事。

它的工作原理是连接输入文件中的行，并在累积的字符串包含一对`@`符号（可能由空格分隔）时拆分它。

请注意，它希望输入文件作为命令行上的参数，并将修改后的数据发送到 STDOUT。

```
use strict;
use warnings;

my $line;

while (<>) {
  chomp;
  $line .= $_;
  while ($line =~ s/^(.+?\@)\s*(?=\@)//) {
    print $1, "\n";
  }
}

print $line, "\n"; 
```

**输出**（使用您的示例输入数据）

```
@Line1Col1 @Line1Col2@Line1Col3 @Line1Col4 @ Line1Col5@
@Line2Col1 @Line2Col2 @Line2Col3@Line2Col4@Line2Col5 @ 
```

* * *

**更新**

从您的*实际文件数据*来看，好像`@`记录中间可以有两个 s，因此上述方法不起作用。

但看起来你正在处理`@`- 分隔的数据，分析它告诉我每条记录有 25 个字段，这意味着 26 个`@`字符。

这个替代程序累积数据直到它包含 26 个或更多`@`字符，然后输出它。它似乎适用于您发布的实际数据。

```
use strict;
use warnings;

my $line;

while (<>) {
  chomp;
  $line .= $_;
  if ($line =~ tr/\@// >= 26) {
    print ">>", $line, "\n";
    undef $line;
  }
}

print $line, "\n" if $line; 
```

# bash - 如何： make -jx // 其中 x 是自动确定的

> ID：10945370
> 
> 赞同：6
> 
> 时间：2012-06-08T08:24:52.033
> 
> 标签：bash, makefile, alias

阅读此问题的答案后： [将“make”默认为“make -j 8”](https://stackoverflow.com/questions/2151605/make-make-default-to-make-j-8)

我想知道是否有办法让 -j 选项自动使用正确数量的编译线程？

所以我说`make`。命令`make`本身使用 6 或 4 或 8 个线程，具体取决于硬件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-08T08:28:48.447

`make`如果您只使用 -- 相反，它不会自行查找内核数`make -j`，而是并行化到最大值。但是，您应该能够通过

```
grep -c "^processor" /proc/cpuinfo 
```

或（根据 Azor-Ahai 的评论，如果在您的系统上可用）

```
nproc 
```

因此：

```
make -j $(nproc) 
```

有关详细信息，请参阅“如何[从命令行获取 Linux 中的 CPU/内核数？](https://stackoverflow.com/q/6481005/946850) ”。另外，请参阅[GNU make：作业数量是否应该等于系统中 CPU 内核的数量？](https://stackoverflow.com/q/2499070/946850)

# dojo - 刷新 dijit.form.Select

> ID：10945371
> 
> 赞同：2
> 
> 时间：2012-06-08T08:24:56.207
> 
> 标签：dojo

首先，您必须知道我正在使用 Struts 开发我的项目（J2EE 这是我的问题：

我的页面中有 2 个 dijit.form.Select 小部件，这些 Select 填充了相同的列表（由 Java 类返回）。

当我在我的第一个“选择小部件”中选择一个选项时，我想更新我的第二个选择小部件，并从我的第一个小部件中禁用所选选项（以防止用户选择相同的项目两次）。

我成功地做到了这一点（稍后我将向您展示我的代码），但我的问题是当我打开我的第二个列表时，即使是一次，它也永远不会再次刷新。所以我可以用我的第一个选择玩很长时间，并选择许多其他选项，我第二个列表中唯一禁用的选项是我选择的第一个。

这是我的 JS 代码：

```
function removeSelectedOption(){
       var list1 = dijit.byId("codeModif1");
       var list2 = dijit.byId("codeModif2");
       var list1SelectedOptionValue = list1.get("value");

       if(list1SelectedOptionValue!= null){
           list2.reset();
           for(var i = 0; i < myListSize; i++){
               // If the value of the current option = my selected option from list1
               if(liste2.getOptions(i).value == list1SelectedOptionValue){
                   list2.getOptions(i).disabled = true;
               } else {
                   list2.getOptions(i).disabled = false;
           }
       }
   } 
```

谢谢你的帮助

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:21:49.147

我认为您必须在更新其选项的属性后重置（） Select 。就像是：

```
function removeSelectedOption(value)
{
    var list2 = dijit.byId("codeModif2"),
        prev  = list2.get('value');

    for(var i = 0; i < myListSize; i++)
    {
        var opt = myList[i];
        opt.disabled = opt.value === value;
        list2.updateOption(opt);
    }
    list2.reset();
    // Set selection again, unless it was the newly disabled one.
    if(prev !== value)  list2.set('value', prev);
}; 
```

（我假设您有一个包含此处可能选项的 myList 以及随附的 myListSize。）

# java - 连接mysql服务器失败

> ID：10945372
> 
> 赞同：0
> 
> 时间：2012-06-08T08:25:01.713
> 
> 标签：java, mysql, jdbc, database-connection

```
x1.instance3650.db.xeround.com-nino_db 
[chatserver.sql.MySqlConnection.rehash()]   
this is con null [.()]   
connection to MySQL server failed 
com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException:  
Cannot load connection class because of underlying exception: 
'java.lang.NumberFormatException: For input string: "chatserver"'.  
[chatserver.sql.MySqlConnection.connect()]  
Exception in thread "AWT-EventQueue-0"  [.()] 
java.lang.NullPointerException [.()]  at   
chatserver.sql.MySqlConnection.ensureConnected(MySqlConnection.java:105) [.()]  at 
chatserver.sql.MySqlConnection.getServerConfig(MySqlConnection.java:936) [.()]  at 
chatserver.objects.ServerConfig.loadConfigFromSql(ServerConfig.java:57) [.()]  at 
chatserver.objects.ServerConfig.<init>(ServerConfig.java:49) [.()]  at 
chatserver.objects.Server.<init>(Server.java:36) [.()]  at 
chatserver.objects.Server.getInstance(Server.java:88) [.()]  at 
chatserver.main.ServerMain$1.run(ServerMain.java:24) [.()]  at 
java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209) [.()]  at 
java.awt.EventQueue.dispatchEvent(EventQueue.java:597) [.()] at 
java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269) [.()]  
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184) [.()]  
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174) [.
()]  at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169) [.()]  at 
java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161) [.()]  at 
java.awt.EventDispatchThread.run(EventDispatchThread.java:122) [.()] 
```

这是由以下代码块引发的..

```
try {
     //conn = DriverManager.getConnection ("jdbc:mysql://localhost:chatserver");
     // Joshua - change
     // dbPassword = "";
     conn = DriverManager.getConnection("jdbc:mysql://" + dbHost + ":"
                  + dbPort + "/" + dbDatabase + "?" + "user=" + dbUser
                    + "&"
                    + "password=" + dbPassword);
     lastMySqlActionTime = new Date().getTime();
} catch (SQLException e) {
     System.out.println("this is con "+conn);
     ServerLog.logError("connection to MySQL server failed "+e);
     return false;
} 
```

我可以通过命令提示符访问数据库并使用数据库...它不会在驱动程序中引发任何错误...

请有人可以帮助我..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:29:05.403

从可用的堆栈跟踪和代码片段看来，您`dbPort`是`chatserver`，而 port 是 int 之类的`3306`，因此在将其解析为 Integer 时它失败并给了您`NumberFormatException`。

所以而不是

```
conn = DriverManager.getConnection ("jdbc:mysql://localhost:chatserver") 
```

试试这个

```
conn = DriverManager.getConnection ("jdbc:mysql://localhost:3306/chatserver") 
```

完整的连接字符串如下所示：

```
DriverManager.getConnection("jdbc:mysql://localhost:3306/chatserver",
                            "root", "root"); 
```

在上面您可以放置​​您的用户名、密码、dbPort、数据库名称等

在这里，我假设您要连接到名为 chatserver 的模式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:30:19.897

我认为问题出在

```
conn = DriverManager.getConnection ("jdbc:mysql://localhost:chatserver"); 
```

你得到一个 NumberFormatException，因为端口号应该是数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:12:52.793

看看我下面的代码，并尝试在此处实现它....我希望它会运行顺利..一旦您开始获得所需的查询结果，请将其修改为您的心脏内容以进行进一步的研发。

请`change the password and username`在这个节目中

```
import java.sql.Connection;

import java.sql.DriverManager;

import java.sql.PreparedStatement;

import java.sql.ResultSet;

import java.sql.ResultSetMetaData;

import java.sql.SQLException;

import java.sql.Statement;

import java.util.Vector;

import javax.swing.JTable;

import com.my.views.*;

public class DBDiary {

    Connection conn;
    EntryDisplay entryD;

    public DBDiary(){

        this.getConn();

    }

    public Connection getConn(){

        try {
            conn = getConnection();

        } catch (SQLException e) {

            System.out.println("Connection Couldnt be Obtained");
        }
           return conn;
    }

    public static Connection getConnection() throws SQLException {

        String drivers = "com.mysql.jdbc.Driver";
        String url = "jdbc:mysql://localhost:3306/test";
        String username = "root";
        String password = "root";

        System.setProperty(drivers,"");

        return DriverManager.getConnection(url,username,password);

    }

    public void createTable() {

        Statement stat = null;
        String sql = "create table items(item varchar(30), cost DOUBLE(12,3),day integer,month varchar(15), year integer);";
        if (conn != null){

            try {

                 stat = conn.createStatement();

            } catch (SQLException e) {

                System.out.println("Connection Couldnt be Obtained");
            }

            if (stat != null){

                try {
                    stat.executeUpdate(sql);
                } catch (SQLException e) {
                    //System.out.println("Table already Exists");
                }       
            }

        }
    }

    public void addItems(String item, double cost,int day, String month, int year) {

        PreparedStatement pstat = null;

        String sql = "INSERT INTO ITEMS Values(?,?,?,?,?);";

        if (conn != null){

            try {

                 pstat = conn.prepareStatement(sql);

            } catch (SQLException e) {

                System.out.println("Connection Couldnt be Obtained");
            }

        }

        if (pstat != null) {

            try {

                 pstat.setString(1, item);
                 pstat.setDouble(2, cost);
                 pstat.setInt(3, day);
                 pstat.setString(4, month);
                 pstat.setInt(5,year);
                 pstat.executeUpdate();

            } catch (SQLException e) {

                e.printStackTrace();
                System.out.println("Insertion of the entry was unsuccessful");
            }
        }

    }

    public static void main(String[] args) {

    DBDiary db = new DBDiary();
    db.createTable();
    db.addItems("Cards", 40.00,29, "Mar", 2012);

    } 
```

# cordova - PhoneGap iOS，如何获取应用程序“文档”文件夹的完整路径？

> ID：10945375
> 
> 赞同：13
> 
> 时间：2012-06-08T08:25:28.427
> 
> 标签：cordova, path, documents

我需要将照片复制到此路径中。但如何得到它？

**“iPhone模拟器/5.1/Applications/996C42CE-B8BF-4F1A-B16C-DBF194BD5A71/Documents/”**

[http://docs.phonegap.com/en/1.8.0/cordova_file_file.md.html#FileTransfer](http://docs.phonegap.com/en/1.8.0/cordova_file_file.md.html#FileTransfer)
我想将图像下载到我的应用程序文档文件夹中。但我不知道该文件的完整路径。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-08T08:50:07.320

试试这个代码：

```
document.addEventListener("deviceready", onDeviceReady, false);

    function onDeviceReady() {
        console.log("device is ready");
        window.requestFileSystem  = window.requestFileSystem || window.webkitRequestFileSystem;
        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
    }

    function fail() {
        console.log("failed to get filesystem");
    }

    function gotFS(fileSystem) {
        console.log("got filesystem");

            // save the file system for later access
        console.log(fileSystem.root.fullPath);
        window.rootFS = fileSystem.root;
    }

    function downloadImage(url, fileName){
        var ft = new FileTransfer();
        ft.download(
            url,
            window.rootFS.fullPath + "/" + fileName,
            function(entry) {
                console.log("download complete: " + entry.fullPath);

            },
            function(error) {
                console.log("download error" + error.code);
            }
        );
    } 
```

[要点](https://gist.github.com/2894564)显示了适用于 iOS 和 Android 的实现

# database-design - 我应该计算或将这些累积总和存储在表中吗？

> ID：10945376
> 
> 赞同：2
> 
> 时间：2012-06-08T08:25:52.063
> 
> 标签：database-design

我需要能够从 SQL Server 和 Sybase 数据库访问这种格式的数据（`date, product`是关键）。

```
date, product, dailyProfit, monthlyCumulativeprofit, yearlyCumulativeProfit 
```

目前，我接手的一个项目有这样的表格，其中`dailyProfits`更新、添加、删除......因此，现有代码似乎损坏了每月累积利润以及年度累积利润。

为了克服这个问题并且不必挖掘代码+恢复表的完整性，我可以有一个表，例如：

```
date, product, dailyProfit 
```

它将接收 INSERT、UPDATE、DELETE 并使用某种机制（触发器？或者考虑到这个较小的表平均包含**300 万行**，这是否有风险？）这会给我一个包含累积总和的同步视图，以更自动化的方式和值得信赖的方式...

你对此的看法如何 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:17:37.293

这实际上取决于您使用的数据库和数据使用信息。拥有预先汇总的数据可能会导致信息过时，因此建议谨慎行事。只要有可能，应该首选“即时”计算（尤其是在性能不是问题的情况下）。

这里还有一些可供探索的选项。索引/物化视图（[链接](http://www.sqlteam.com/article/indexed-views-in-sql-server-2000)）或使用 M-Olap 多维数据集预聚合信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T18:33:38.320

只要可行，请避免存储冗余数据。如果您同时存储单个值和总计，则您可能会创建总计可能与单个值的总和不匹配的可能性。这可能会导致神秘的错误，其中读取单个值的函数与使用存储总数的函数给出不同的结果。如果幸运的话，有人注意到屏幕 A 上的值与屏幕 B 上的值不同，您可以调查并修复它。但如果事情更复杂，比如您使用一组值作为选择标准，另一组值用于显示，则可能没人会注意到。

保持值同步可能是一个主要的编程难题，具体取决于关系是什么。如果幸运的话，您也许可以设置一些触发器，在每次添加、更改或删除单个值时自动更新总数，因此至少只在一个地方完成。

但这里的关键词是“只要可行”。举个简单的例子：每次用户访问他的银行账户时，他可能都想查看余额。如果要显示我们必须将他开户以来的每笔交易都加起来，可能是很多年前，那可能是一个性能杀手。

因此，在必要时存储多余的总数，但仅在必要时存储。如果您必须存储冗余总计，请尽可能保留较少的级别。我不会存储每日总计、每周总计、每月总计和年度总计。我会尝试为总数选择一个级别并保持不变。就像您可以随时重新计算每天和每周的总数一样。也许保持每月，然后你可以通过加起来12个月来计算每年。或者也许只保留年度以进行长期计算，而所有的东西都少了即时计算。这完全取决于您有多少记录以及您需要什么输出。但是，每增加一个总数，就需要保持同步，因此又是一个潜在的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:34:42.553

这取决于。如果您经常请求累积总和，那么存储它们是一个好主意，因为每次请求都计算它们会占用大量资源。

您可以设置触发器，以便在添加时增加累积值，在删除时减少累积值。在更新时，您会充分更新。

出于同样的原因，互联网论坛通常有每个用户的帖子计数，尽管每个请求当然可以计算帖子（这会对性能产生巨大影响）。触发器只是在添加新帖子时增加计数器，并在删除帖子时减少。

# android - Logcar 错误：AdapterView 不支持 addView(View)

> ID：10945381
> 
> 赞同：0
> 
> 时间：2012-06-08T08:26:16.983
> 
> 标签：android, android-listview, android-adapterview

我正在为 Android 做一个应用程序，如果我单击“生成”按钮，它会生成一个列表，其中每一行都有一个图像、文本视图和 2 个按钮。列表的数量是随机的，超过 30 个。使用布局充气器，我想在 main.xml 布局中添加一个子视图。但是当我单击“生成”按钮时，会发生 Logcat 错误。

**06-08 05:33:19.340: E/AndroidRuntime(853): java.lang.UnsupportedOperationException: addView(View) 在 AdapterView 中不受支持**

我不明白什么是“AdapterView”以及如何解决这个错误。

这是我的代码。

```
package com.android.listtest1;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TextView;

public class ListTest1Activity extends Activity implements View.OnClickListener {
    /** Called when the activity is first created. */
    int[] images = new int[50];
    TextView tv1, tv2;
    Button btn_gen, btn_clear;
    Button btn_phone, btn_sms;
    ImageView img;
    ArrayAdapter<String> list;
    LinearLayout new_linear;
    ListView listview;
    Intent intent1;
    int list_cnt = 0;
    @Override
    public void onCreate(Bundle savedInstanceState) {        
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        listview = (ListView)findViewById(R.id.listView1);
        btn_gen = (Button)findViewById(R.id.btn_gen);
        btn_clear = (Button)findViewById(R.id.btn_clear);

        btn_gen.setOnClickListener(this);
        btn_clear.setOnClickListener(this);
    }
    @Override
    public void onClick(View v) {

        // TODO Auto-generated method stub
        if( v == btn_gen){

            int i, j, rand, cnt_rand;
            for(i=0;i<50;i++){
                images[i] = i;
            }
            images[0] = R.drawable.c1992_1;
            images[1] = R.drawable.c1992_2;
            images[2] = R.drawable.c1993;
            images[3] = R.drawable.c1994;
            images[4] = R.drawable.c1995_1;
            images[5] = R.drawable.c1995_2;
            images[6] = R.drawable.c1996_1;
            images[7] = R.drawable.c1996_2;
            images[8] = R.drawable.c1998;
            images[9] = R.drawable.c2000;
            images[10] = R.drawable.c2001;
            images[11] = R.drawable.c2002;
            images[12] = R.drawable.c2004;
            images[13] = R.drawable.c2005;
            images[14] = R.drawable.c2007_1;
            images[15] = R.drawable.c2008;
            images[16] = R.drawable.c2009_1;
            images[17] = R.drawable.c2009_2;
            images[18] = R.drawable.c2009_3;
            images[19] = R.drawable.c2010_1;
            images[20] = R.drawable.d2005_1;
            images[21] = R.drawable.d2005_2;
            images[22] = R.drawable.d2010_2;
            images[23] = R.drawable.d2010_3;
            images[24] = R.drawable.d2010_4;
            images[25] = R.drawable.i01;
            images[26] = R.drawable.i2010_1;
            images[27] = R.drawable.alien_1;
            images[28] = R.drawable.alien_2;
            images[29] = R.drawable.balloon;
            images[30] = R.drawable.bear;
            images[31] = R.drawable.beaver;
            images[32] = R.drawable.birthdaycake;
            images[33] = R.drawable.chocolatecake;
            images[34] = R.drawable.david;
            images[35] = R.drawable.davinci;
            images[36] = R.drawable.dragon;
            images[37] = R.drawable.earth;
            images[38] = R.drawable.fireworks1;
            images[39] = R.drawable.fireworks2;
            images[40] = R.drawable.fish;
            images[41] = R.drawable.frog1;
            images[42] = R.drawable.frog2;
            images[43] = R.drawable.hand;
            images[44] = R.drawable.leaf;
            images[45] = R.drawable.monkey1;
            images[46] = R.drawable.women;
            images[47] = R.drawable.sun;
            images[48] = R.drawable.rose;
            images[49] = R.drawable.rabbit;

            String str_name, str_desc;          
            LayoutInflater inflater = getLayoutInflater();
            new_linear = (LinearLayout)inflater.inflate(R.layout.list, null);           
            img = (ImageView)new_linear.findViewById(R.id.img);
            tv1 = (TextView)new_linear.findViewById(R.id.name);
            tv2 = (TextView)new_linear.findViewById(R.id.desc);
            str_name = tv1.getText().toString();
            str_desc = tv2.getText().toString();    
            //List<Integer> list = new ArrayList<Integer>();
            for(i = 0; i < 50; )
            {
                rand = ((int)(Math.random() * 50)) + 1;             

                cnt_rand = ((int)(Math.random() * 100)) + 30;
                for(j = 0; j < cnt_rand; j++){
                    img.setImageResource(images[rand]);
                    tv1.setText(str_name+Integer.toString(j));
                    tv2.setText(str_desc+Integer.toString(j));
                    listview.addView(new_linear);
                }
            }

        }else if( v == btn_clear){

        }
    }
} 
```

这是 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/list_info"
        android:layout_width="180dp"
        android:layout_height="wrap_content"
        android:text="@string/list_info"

        android:layout_gravity="center" android:textSize="20dp"/>
    <ListView
        android:id="@+id/listView1
        android:layout_width="fill_parent"
        android:layout_height="0dp" />
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >
        <Button
            android:id="@+id/btn_gen"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:text="@string/btn_gen" 
            android:layout_marginLeft="30dp" 
            android:layout_marginRight="20dp"/> 

        <Button
            android:id="@+id/btn_clear"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:text="@string/btn_clear" 
            android:layout_marginLeft="20dp"/>
    </LinearLayout>

</LinearLayout> 
```

这是 add.xml 我要添加为列表的每一行的内容。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/c1992_1" />
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
        <TextView
            android:id="@+id/name"
            android:layout_width="120dp"
            android:layout_height="wrap_content"             
            android:layout_marginTop="30dp" 
            android:textSize="25dp"
            android:text="11"
        />

        <TextView
            android:id="@+id/desc"
            android:layout_width="120dp"
            android:layout_height="wrap_content"            
            android:layout_marginTop="20dp" 
            android:textSize="20dp"
            android:text="11"
        />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
        <Button
            android:id="@+id/btn_phone"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:text="@string/phone" android:layout_marginTop="25dp"/>
        <Button
            android:id="@+id/btn_sms"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:text="@string/sms" />
    </LinearLayout>

</LinearLayout> 
```

请详细解释一下，我能理解。（我是真正的第一个程序员）

感谢您提供的一切！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:42:38.887

An[`AdapterView`](http://developer.android.com/reference/android/widget/AdapterView.html)是一个视图，其子级由 确定[`Adapter`](http://developer.android.com/reference/android/widget/Adapter.html)。[`ListView`](http://developer.android.com/reference/android/widget/ListView.html)是它的子类，由[`AdapterView`](http://developer.android.com/reference/android/widget/AdapterView.html)a 填充[`ListAdapter`](http://developer.android.com/reference/android/widget/ListAdapter.html)。您可以查看[“Hello, Views: List View”](http://developer.android.com/resources/tutorials/views/hello-listview.html)教程来了解如何使用[`ListView`](http://developer.android.com/reference/android/widget/ListView.html).

在您的情况下，您需要创建一个自定义适配器，它将覆盖该`getView`方法并返回包含膨胀 add.xml 实例的自定义视图。

# sql - Firebird SQL 语句获取表定义

> ID：10945384
> 
> 赞同：8
> 
> 时间：2012-06-08T08:26:28.973
> 
> 标签：sql, firebird

我正在使用 ibpp 库编写自己的 Firebird 数据库浏览器。有没有办法可以使用 SQL 语句获取表定义？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-08T08:46:07.507

Firebird 不支持模式，因此您无法获取该信息。

最接近的可能是所有者，您可以通过查询获得`RDB$RELATIONS`

**编辑**

“模式”是数据库内的命名空间。显然您正在寻找表定义，而不是模式。

您可以通过查询 RDB$FIELDS 和 RDB$RELATION_FIELDS 来检索表的列及其数据类型：

```
select rf.rdb$relation_name as table_name, 
       rf.rdb$field_name as column_name,
       case f.rdb$field_type
         when 14 then 'CHAR'
         when 37 then 'VARCHAR'
         when 8 then 'INTEGER'
         ...
       end as data_type,
       f.rdb$field_length,
       f.rdb$field_scale
from rdb$fields f
  join rdb$relation_fields rf on rf.rdb$field_source = f.rdb$field_name
where rf.rdb$relation_name = 'FOOBAR' 
```

数据类型以整数形式存储在 RDB$FIELD 列中。该列中值的完整列表记录在 Interbase 参考指南中： http: [//www.ibphoenix.com/files/60LangRef.zip](http://www.ibphoenix.com/files/60LangRef.zip)（该系统表中的所有其他列和所有其他系统表也是如此）。您可能需要查看所有更新指南，以检查自 IB 6.0 以来系统表是否有任何更改（Firebird 手动是一个**真正的*混乱）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-02T09:01:40.290

显示表表名；例如：

> `SHOW TABLE users`

# c++ - 无法打开包含文件 - 'gtest.h' - 没有这样的文件或目录

> ID：10945386
> 
> 赞同：5
> 
> 时间：2012-06-08T08:26:43.247
> 
> 标签：c++, visual-studio-2010, googletest

我正在尝试在 Visual Studio 中构建 gtest，但似乎在获取引用并包含为项目正确指定时遇到了一些问题。

**错误 C1083: 无法打开包含文件: 'gtest/gtest.h': 没有这样的文件或目录 c:\gtest-1.6.0\src\gtest-all.cc**

```
1>InitializeBuildStatus:
1>  Touching "Debug\GTestBuild.unsuccessfulbuild".
1>ClCompile:
1>  gtest-all.cc
1>c:\gtest-1.6.0\src\gtest-all.cc(40): fatal error C1083: Cannot open include file: 'gtest/gtest.h': No such file or directory
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:01.61 
```

对于项目，我在 Project Project Pages > C/C++>Additional Include Directories 列表中添加了对以下内容的引用：

```
c:\gtest-1.6.0
c:\gtest-1.6.0\src
c:\gtest-1.6.0\include
c:\gtest-1.6.0\include\gtest

```

但我似乎遗漏了其他一些内容，或者可能没有设置正确，并且希望在解决这个问题方面提供一些帮助，并学习如何为未来做这件事。

PS。切换自

```
#include "gtest/gtest.h"
// The following lines pull in the real gtest *.cc files.
#include "src/gtest.cc"
#include "src/gtest-death-test.cc"
#include "src/gtest-filepath.cc"
#include "src/gtest-port.cc"
#include "src/gtest-printers.cc"
#include "src/gtest-test-part.cc"
#include "src/gtest-typed-test.cc" 
```

至

```
#include <gtest/gtest.h>

// The following lines pull in the real gtest *.cc files.
#include <src/gtest.cc>
#include <src/gtest-death-test.cc>
#include <src/gtest-filepath.cc>
#include <src/gtest-port.cc>
#include <src/gtest-printers.cc>
#include <src/gtest-test-part.cc>
#include <src/gtest-typed-test.cc> 
```

不是解决方案。我已经尝试过了，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:52:08.450

如果您查看文件 gtest-all.cc 的属性页，它的 Additional Include Directories 字段应显示：

```
..;..\include;%(AdditionalIncludeDirectories) 
```

如果您使用了提供的 msvc\gtest.sln，否则：

```
C:/gtest-1.6.0/include;C:/gtest-1.6.0;%(AdditionalIncludeDirectories) 
```

如果您使用 CMake 创建 VS 解决方案。

如果该字段为空，则它不会获取您为整个项目设置的目录，因为它们是通过`%(AdditionalIncludeDirectories)`变量应用的。如果*是*这种情况，可能值得重新下载并重新开始，因为构建不再处于良好状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T08:42:03.380

检查完整的编译输出以查看这些包含目录是否被合并到编译中。它应该看起来像：

```
...
-Ic:\gtest-1.6.0 -Ic:\gtest-1.6.0\src -Ic:\gtest-1.6.0\include -Ic:\gtest-1.6.0\include\gtest
... 
```

您是否也在这些目录中*查找*过文件？不要忘记，当您将其包含在目录中时，您必须`gtest.h`在以下目录中查找：

```
c:\gtest-1.6.0\gtest
c:\gtest-1.6.0\src\gtest
c:\gtest-1.6.0\include\gtest
c:\gtest-1.6.0\include\gtest\gtest 
```

（注意`gtest`使用时的子目录`#include "gtest/gtest.h"`）

# sql-server - 处理 sql server db 中未使用的磁盘空间

> ID：10945388
> 
> 赞同：2
> 
> 时间：2012-06-08T08:26:48.707
> 
> 标签：sql-server, sql-server-2008

我有一个数据库，其大小增长非常快。目前它的大小约为 60GB，但是在执行 db_spaceused 存储过程之后，我可以验证有超过 40GB 未使用（未使用的空间不同，我理解的不是保留空间用于表增长）。实际数据大小约为 10-12 GB，保留空间中只有几 GB。

现在为了收集未使用的空间，我尝试使用收缩操作，但结果没有帮助。进一步搜索后，我还发现不要使用收缩数据库，因为这会导致生成数据片段，从而导致磁盘操作时的延迟。现在我真的不确定我应该尝试什么其他操作来重新收集空间并重新收集数据库。我不知道由于大小查询可能需要比预期更长的时间，并且回收这个空间可能有助于提高性能（不确定）。

在调查时，我还遇到了 Gererate Scripts 功能。它也有助于导出数据、模式，但我不确定它是否也有助于创建脚本（每个用户、权限和其他东西），这样脚本将帮助创建数据库的副本（深拷贝/克隆），然后使用 create scema将数据填充到其他数据库/服务器？

任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T08:49:59.680

如果您的数据库是 60GB，则意味着它已增长到 60GB。即使数据只有 20Gb，您也可能有不时增加数据的操作（例如，夜间索引维护作业）。建议**将数据库保留为 60Gb**。不要试图回收空间，你只会造成伤害，并且任何导致数据库增长到 60Gb 的*事情都可能再次发生*并触发数据库增长。

其实你应该**反其道而行之**。尝试找出它增长到 60Gb 的*原因*，并推断当您的数据达到 30Gb 时会发生什么。数据库会增长到 90Gb 吗？如果是，您**现在**应该将其增加到 90Gb。您最不想看到的就是随机增长，并且可能在关键时刻耗尽磁盘空间。事实上，您现在应该检查您的服务器是否启用了[即时文件初始化。](http://blogs.msdn.com/b/sql_pfe_blog/archive/2009/12/23/how-and-why-to-enable-instant-file-initialization.aspx)

当然，现在的问题是：*什么*会导致 3 倍的数据量增长，以及如何识别它？我不知道有什么简单的方法。我建议从查看您的 SQL 代理作业开始。检查您的维护脚本。查看应用程序本身，它是否具有数据增长和删除的模式？查看过去的备份（您确实拥有它们，对吗？）并进行比较。

顺便说一句，我假设进行了尽职调查，并且您检查了*数据*文件是否已增长到 60Gb。如果是 LOG 文件已经增长那么容易，这意味着您启用了完全恢复模式并忘记备份日志。

# c# - Why is "long" being allowed as array length in C#?

> ID：10945404
> 
> 赞同：18
> 
> 时间：2012-06-08T08:27:36.160
> 
> 标签：c#, .net, memory-management, buffer-overflow

I wanted to try to allocate a 4 billion bytes array and this is my C# code:

```
long size = 4 * 1000;
size *= 1000;
size *= 1000;
byte[] array = new byte[size]; 
```

this code fails with `System.OverflowException` on the line containing `new`. Okay, turns out `Length` returns `int`, so the array length is also limited to what `int` can store.

Then why is there no compile-time error and `long` is allowed to be used as the number of array elements at allocation?

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-08T08:35:38.613

Because the specification says so in section 7.6.10.4:

> Each expression in the expression list must be of type `int`, `uint`, `long`, or `ulong`, or implicitly convertible to one or more of these types.

This is most likely to easily *allow* creation of arrays larger than 2 GiB, even though they are not supported *yet* (but will be without a *language* change once the CLR makes such a change). [Mono does support this, however](http://www.mono-project.com/Release_Notes_Mono_2.0#Big_Arrays) and [.NET 4.5 apparently will allow larger arrays too](http://msdn.microsoft.com/en-us/library/hh285054%28v=vs.110%29.aspx).

Regarding array length being an `int` by the way: There is also `LongLength`, returning a `long`. This was in .NET 1.1 and probably a future-proofing change.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-08T08:45:40.540

why long is allowed as array length?

Answer is: long in .net means Int64

And array indexing can be Int64 according to specification.

2nd question: Why overflowexception is showing?

Because any single object can not be allocated more than 2GB of memory.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-08T08:35:46.160

It is a limitation of the CLR, no single object can exceed 2GB, including arrays:

[Large array C# OutOfMemoryException](https://stackoverflow.com/questions/5791868/large-array-c-sharp-outofmemoryexception)

This is regardless of 32-bit or 64-bit OSs. That said, it doesn't stop you from using more than that amount in total, just not on one object.

It is a ***runtime*** error because if you keep the `long` (or other initializing value) within range, it will work.

You can initialize arrays with all integral types: `sbyte`, `char`, `short`, `int`, and `long` - all compile; the unsigned variants work too.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-14T00:36:48.037

There is a solution in .Net 4.5-4.6 for allowing large size for an array.

```
<runtime>
    <gcAllowVeryLargeObjects enabled="true" />
</runtime> 
```

[See documentation](https://docs.microsoft.com/en-us/dotnet/framework/configure-apps/file-schema/runtime/gcallowverylargeobjects-element).

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-08T08:37:48.257

The `long` is an integral type, so it can be used to define the array; the exception is from building too large of an array, not specifically from using a `long`.

Ex, this works just fine:

```
long size = 20;
byte[] array = new byte[size]; 
```

# json - Extjs4如何解码带有json字符串的json代码？

> ID：10945405
> 
> 赞同：0
> 
> 时间：2012-06-08T08:27:38.220
> 
> 标签：json, extjs

我想用 Ext.decode(string) 在 extjs4 中解码，一个 json 字符串，里面有 json 字符串，就像这样：

```
var string = "{success:true, 
rows:[{"jsonfields":"[
{\\"name\\":\\"cm:title\\",\\"title\\":\\"Titolo\\",\\"description\\":\\"Titolo del contenuto\\",\\"dataType\\":\\"d:mltext\\",\\"url\\":\\"\/api\/property\/cm_title\\"},
{\\"name\\":\\"cm:content\\",\\"title\\":\\"Contenuto\\",\\"description\\":\\"Contenuto\\",\\"dataType\\":\\"d:content\\",\\"url\\":\\"\/api\/property\/cm_content\\"},
{\\"name\\":\\"cm:name\\",\\"title\\":\\"Nome\\",\\"description\\":\\"Nome\\",\\"dataType\\":\\"d:text\\",\\"url\\":\\"\/api\/property\/cm_name\\"}]"}
]}"; 
```

如您所见，“jsonfields”是一个 json 字符串代码。我如何用 Ext.decode(string) 解码这个字符串有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:37:18.907

这是使用 Ext 解码 JSON 的正确方法，异常可能会告诉您 JSON 字符串中存在一些无效语法。[JSON 格式](http://www.json.org/)非常严格。

您可以使用像[jsonlint](http://jsonlint.com/)这样的在线验证器来帮助找出您的语法有什么问题。

另一个注意事项：在这种情况下，在字符串周围使用单引号通常更容易，这样您就可以嵌入双引号而不必转义它们。

```
var string = '{ "success": true, ...}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:06:53.097

您的 JSON 代码存在一些问题。

1.  您的所有键都需要用引号引起来（成功和行不是）。
2.  将 JSON 字符串直接嵌入 javascript 时使用单引号。这样您就可以避免使用转义字符。

下面是正确的 JSON 代码。我还更新了您的[jsfiddle](http://jsfiddle.net/H4QEP/6/)链接。

```
var string = '{
"success": true,
"rows": [
    {
        "jsonfields": [
            {
                "name": "cm: title",
                "title": "Titolo",
                "description": "Titolodelcontenuto",
                "dataType": "d: mltext",
                "url": "/api/property/cm_title"
            },
            {
                "name": "cm: content",
                "title": "Contenuto",
                "description": "Contenuto",
                "dataType": "d: content",
                "url": "/api/property/cm_content"
            },
            {
                "name": "cm: name",
                "title": "Nome",
                "description": "Nome",
                "dataType": "d: text",
                "url": "/api/property/cm_name"
            }
        ]
    }
]}';

var decodedString = Ext.decode(string);
console.log(decodedString); 
```

​</p>

# css - class="c1 c2" 的 css 选择器是什么

> ID：10945411
> 
> 赞同：0
> 
> 时间：2012-06-08T08:27:55.467
> 
> 标签：css, css-selectors

> **可能重复：**
> [适用于具有两个类的元素的 CSS 选择器](https://stackoverflow.com/questions/3772290/css-selector-that-applies-to-elements-with-two-classes)

所以我有一个“.data-label”类，它有一个宽度，被设计为像布局一样的表格中“行”的一部分，但我也想有一个带有“.inline .data-”的元素label'，这将省去宽度，但仍保留来自 '.data-label' 的字体设置

一次选择 2 个类的正确 css 选择器是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:31:18.243

简单地

`.inline.data-label`

它应该工作。

# php - 重定向后停止页面在历史记录中被记住

> ID：10945412
> 
> 赞同：3
> 
> 时间：2012-06-08T08:27:57.240
> 
> 标签：php, html, user-experience, browser-history

我有一个页面，当`a`单击链接（必须保持`a`链接，没有 JavaScript）时，它被重定向到 PHP 脚本以执行近乎瞬时的操作，然后发送回上一页。

问题是，当用户单击返回按钮时，页面会返回到执行脚本之前已加载的页面，并且用户必须单击两次返回按钮才能返回发送页面。

有没有办法阻止这种情况？必须单击两次后退箭头并不是一种很好的用户体验，并且必须有一种（相对简单的）方法来阻止这种情况的发生。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T08:31:26.880

发送 301 标头。`header('HTTP/1.1 301 Moved Permanently');`- 它**必须**在任何输出之前发送。然后，您重定向到的任何页面都将替换 PHP 页面。

# sql - SQL Server 2008 BCP 导出抛出：NativeError = 945，由于文件不可访问或内存不足，无法打开数据库

> ID：10945413
> 
> 赞同：0
> 
> 时间：2012-06-08T08:28:00.843
> 
> 标签：sql, sql-server-2008, bcp, export-to-csv

我正在尝试使用 BCP 导出到 CSV 文件，如下所示：

```
 DECLARE @SQL AS VARCHAR(1000)
 DECLARE @CMD AS VARCHAR(8000)

 SET @SQL='SELECT * from Pondor.dbo.tblLD'
 SET @CMD = 'bcp "' + @SQL + '" QUERYOUT "' + @FILE + '" -c -t "," -U"UserA" -P"Password" 

 exec master..xp_cmdshell @cmd 
```

这不起作用并引发以下错误：

> SQLState = 37000, NativeError = 945
> 由于文件不可访问或内存或磁盘空间不足，无法打开数据库“Pondor”。有关详细信息，请参阅 SQL Server 错误日志。

做一个`SELECT * from Pondor.dbo.tblLD`作品并返回行。关于 BCP 命令有什么问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:05:40.337

您没有在命令中指定服务器。添加`-S`具有正确值的选项。如果您的服务器是服务器上的“默认”实例，您可以放置`-S.`

[Pinal Dave](http://blog.sqlauthority.com/2007/08/02/sql-server-fix-error-945-database-cannot-be-opened-due-to-inaccessible-files-or-insufficient-memory-or-disk-space-see-the-sql-server-error-log-for-details/)解释了修复数据库打开错误的步骤

1.  如果可能，通过从硬盘中删除不必要的文件或添加更大尺寸的新硬盘来添加更多硬盘空间。

2.  检查数据库是否设置为 Autogrow on。

3.  检查试图访问数据库的帐户是否有足够的权限执行操作。

4.  确保 .mdf 和 .ldf 文件在操作系统文件系统级别上未标记为只读。

# wso2 - Message Builder 和 Message Formatter 的区别以及如何使用消息中继？

> ID：10945414
> 
> 赞同：0
> 
> 时间：2012-06-08T08:28:01.930
> 
> 标签：wso2, wso2esb, synapse, messageformat

我正在建设一个 POC。我正在尝试使用 wso2 esb 访问 facebook 的图形 api。但似乎我没有得到完整的 json 数据。所以我决定使用[这里](https://stackoverflow.com/questions/10750309/wso2-esb-unable-to-convert-complete-json-data-to-xml)提到的消息中继 但是在搜索如何使用它的示例时，我遇到了两个术语，即：消息生成器和格式化程序。谁能解释一下这两者之间的区别。此外，我无法找到一个足以解释使用消息中继的工作示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T14:24:48.953

消息生成器：来自 AXis2 的概念。当消息通过给定的传输（HTTP）到达 wso2 esb 时，我们需要根据消息的内容类型从中构建一个 SOAP 消息（例如，将 JSON 转换为 SOAP/XML）。

消息格式化程序：当消息从 ESB 发出时，再次根据输出内容类型，应将消息转换为所需的格式。（例如：SOAP 到 JSON）

二进制中继：请参考[这篇](http://charithaka.blogspot.com/2010/04/how-to-setup-binary-relay-in-wso2-esb.html)文章。

# tfs - 可以轻松备份 TFS 2012 Express Edition 吗？

> ID：10945415
> 
> 赞同：6
> 
> 时间：2012-06-08T08:28:03.297
> 
> 标签：tfs, database-backups

我使用 TFS 2012 Express 版本供个人使用（我主要使用它来对源代码进行版本化）。

我简要查看了有关备份策略的文档，这似乎是一项艰巨的工作:(。当我只是对可以备份和恢复我的版本化源感兴趣时，是否有可用的快捷方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T10:12:42.090

[使用TFS Power Tools 2012](http://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f) “Team Foundation Backup”功能轻松进行备份。

它本质上为 TFS 数据库的备份/恢复创建了一个无缝过程。

![TFS 备份计划](../Images/37dc33cd9442dd29c638d5c4acb06036.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:39:48.147

答案中提供的信息基于 TFS 标准版而不是 TFS 2012 Express。我浏览了整个互联网，发现只有手动执行的脚本。我已经安装了 Power Tools Update 1（**Visual Studio Team Foundation Server 2012 Update 1 Power Tools.msi**）并且控制台中没有任何变化。

这是另一种手动方式 ::[备份 TFS 2012 Express](http://tsells.wordpress.com/2012/09/23/backing-up-tfs-2012-express/)

![在此处输入图像描述](../Images/279a455ca36324e35e08eed9eb313aba.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-23T21:24:03.250

如果只是偶尔备份 TFS，那么我只需下载并安装[Microsoft® SQL Server® 2008 Management Studio Express](http://www.microsoft.com/en-us/download/details.aspx?id=7593)。

在 SQL Server 管理工作室 (SSMS) ...

1.  连接到“ **.\SQLEXPRESS** ”
2.  在左侧的树视图中打开“数据库”节点
3.  右键单击名称中包含“TFS”部分的每个数据库，然后选择上下文菜单项“**任务 > 备份...** ”

要稍后恢复 TFS（例如在全新的 Windows 安装上），再次在 SSMS 中...

1.  连接到“ **.\SQLEXPRESS** ”
2.  在左侧的树视图中打开“数据库”节点
3.  右键单击名称中包含“TFS”部分的每个数据库，然后选择上下文菜单项“ **Tasks > Restore > Database...** ”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-25T23:09:02.513

使用此链接：[Microsoft Team Foundation Server Power Tools](http://www.microsoft.com/en-us/download/details.aspx?id=35775)用于安装 Power Tools，包括 Backup Assistent

出于任何原因，Visual Studio 库中的 Power-Tools 不包括备份工具。[在这个 SO Answer](https://stackoverflow.com/a/19817084/466935)中查看更多信息。

# c# - 在 ASP.NET MVC HttpPostedFileBase 集合中只有空项

> ID：10945416
> 
> 赞同：1
> 
> 时间：2012-06-08T08:28:12.093
> 
> 标签：c#, asp.net, .net, asp.net-mvc, file-upload

这是我的代码：

```
@using (Html.BeginForm("UploadImages", "Administration", new { _id = Model.Album.AlbumID, enctype = "multipart/form-data" }, FormMethod.Post))
{ 
    <input type="file" name="fileUpload" id="file1" /><br />      
    <input type="file" name="fileUpload" id="file2" /><br />      
    <input type="file" name="fileUpload" id="file3" /><br /> 
    <input name="addPhoto" type="submit" value="Добавить фото" />
}

 [Authorize]
   [HttpPost]
   public ActionResult UploadImages(int _id, IEnumerable<HttpPostedFileBase> fileUpload)
        {
            gb_albumdbEntities1 entityes = new gb_albumdbEntities1();
            foreach (var file in fileUpload)
            {
                if (file == null) continue; // **<---fileUpload items is always null!**
                string path = AppDomain.CurrentDomain.BaseDirectory + "Photos/";
                if (Path.GetFileName(file.FileName) != null)
                {
                    string filename = file.GetHashCode().ToString();
                    string fullpath = Path.Combine(path, filename);
                    file.SaveAs(fullpath);
                    entityes.Photos.AddObject(new Photo() { AlbumID = _id, PhotoUrl = @"http://site.ru/Photos/" + filename });
                }
            }
            entityes.SaveChanges();
            return RedirectToAction("AlbumEdit", new { id = _id });
        } 
```

文件上传项目始终为空。问题出在哪里？哦

**UPD：计算结果发布网址：** `http://localhost:56193/Administration/UploadImages?_id=4&enctype=multipart%2Fform-data`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:43:34.183

如果需要对文件输入进行编号以使模型绑定起作用，则列出您的列表。在最简单的形式中，您的视图应如下所示：

```
<html>
<head>
    <title>Index</title>
</head>
<body>
    <div>
        @using (Html.BeginForm("Index", "Upload", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {            
            for (int i = 0; i < 3; i++)
            {
                @Html.TextBox(string.Format("fileUpload[{0}]", i), null, new { type="file" })<br />
            }
            <input name="submit" type="submit" value="Go" />
        }
    </div>
</body>
</html> 
```

和你的控制器：

```
 public class UploadController : Controller
    {
        //
        // GET: /Upload/

        public ActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public ActionResult Index(IEnumerable<HttpPostedFileBase> fileUpload)
        {

            return View();
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:04:06.247

尝试以下我以前使用过的帖子。为我工作。

[http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)

# css - 某些 CSS 类在 FF 中停止工作，但在 Chrome 中仍然有效

> ID：10945417
> 
> 赞同：1
> 
> 时间：2012-06-08T08:28:14.387
> 
> 标签：css, firefox, google-chrome, browser

我希望我的这个问题不要超越这个论坛的界限，但我相信它在范围内，尽管它不是“与代码相关”

我正在开发一个使用 CSS 进行样式设置的 Web 应用程序。我昨天发现 GUI 的一部分看起来很奇怪，即带有输入字段和按钮的搜索面板。面板失去了所有 CSS 偏好；填充、边框和背景颜色。我在课堂上没有改变任何东西，所以我对此感到非常惊讶。我删除了 localhost 的 cookie 以强制重新读取样式表，因为我不得不多次这样做。然而这并没有帮助。

由于我不知道可能出了什么问题，出于某种原因，我决定在 Chrome 中尝试该应用程序，而不是我一直运行的 Firefox。奇怪的是，在 Chrome 中它看起来很好，它应该看起来的样子和它在 Firefox 中的样子直到昨天。它是在浏览器中运行的同一个 Web 应用程序、相同的代码和相同的 URL。仍然在 Firefox 中，它完全忽略了影响搜索面板的样式表部分。GUI 的所有其他实例似乎都可以，我没有发现任何问题。

如果您从自己的经验中认识到这个问题，或者听说过它并且知道我可以尝试做些什么来解决它，除了删除 cookie（我已经尝试过），那么请回复！谢谢！

**编辑：**在希望看到代码之后，我意识到这是两个被忽略的 CSS 类，它们在视觉上看起来非常相似，所以这就是我之前没有注意到它的原因。

```
.m2m-table-action-bar {
    background-color: #C9C9C9;
    border-top: 1px solid #949494;
    border-left: 1px solid #949494;
    border-right: 1px solid #949494;
}

.m2m-top-button-panel {
    background-color: #C9C9C9;
    border-bottom: 1px solid #949494;
    border-top: 1px solid #949494;
    padding: 10px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:57:36.320

Firefox 可能正在存储该站点的缓存版本。尝试删除缓存，然后刷新页面。

# asp.net-mvc - 在 Application_start (global.asax) 中注册 RequestContext

> ID：10945423
> 
> 赞同：2
> 
> 时间：2012-06-08T08:28:25.383
> 
> 标签：asp.net-mvc, inversion-of-control, autofac

我正在尝试为我的 IoC 容器（autofac）注册 RequestContext。我在 Application_start 中完成所有注册。

RequestContext 注册如下所示：

```
builder.Register(x => HttpContext.Current.Request.RequestContext).As<RequestContext>(); 
```

这在开发网络服务器上运行良好，但在 IIS 7（集成模式）中，问题是 RequestContext 上下文在 Application_start 中不可用。

我可以在这里做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T15:53:56.867

看来这里有两个问题需要解决：

1.  你如何注册RequestContext？
2.  为什么 RequestContext 不能正确解析？

如果您使用 Autofac MVC 集成，您可以为注册做的最简单的事情是：

```
builder.RegisterModule<AutofacWebTypesModule>(); 
```

已经有一个模块可以注册各种 Web 抽象（HttpContextBase、RequestContext 等），其范围适当地限定为每个 HTTP 请求的实例。它已经过测试，可以为您节省大量时间。

相反，如果您想自己手动注册它，那么如果您将其范围限定为 InstancePerHttpRequest（这样您就不会在每个请求中一遍又一遍地获取它），那么您应该做的事情。

此外，您可以将其“链接”到模块中的当前上下文中：

```
builder.Register(c => new HttpContextWrapper(HttpContext.Current))
    .As<HttpContextBase>()
    .InstancePerHttpRequest();
builder.Register(c => c.Resolve<HttpRequestBase>().RequestContext)
    .As<RequestContext>()
    .InstancePerHttpRequest(); 
```

这照顾了第一部分，但第二部分有点棘手。

如果由于 RequestContext 不可用而在应用程序启动时出现错误，那么**在您的应用程序的某个地方，您正在尝试在实际收到请求之前解决使用 RequestContext 的问题。**例如，手动尝试解析将 RequestContext 作为构造函数参数的内容的 HttpModule 实现。

注册中的 lambda 实际上直到解决才被评估，因此错误可能来自您正在解决的问题，即试图过早使用 RequestContext。

在这种情况下，问题是：**当您尝试解析 RequestContext 并且没有请求时，您希望如何处理解析？**

默认情况下，你会得到一个异常，这可能就是你现在看到的。

如果您希望它为空，请进行如下注册：

```
// Register context as instance-per-dependency and handle the
// case where it's null. Also handle HttpException because IIS7
// can throw if you access HttpContext.Current too soon in app startup.
builder.Register(
  c => {
    try
    {
      var ctx = HttpContext.Current;
      return ctx == null ? null : new HttpContextWrapper(ctx);
    }
    catch(HttpException)
    {
      return null;
    }
  }).As<HttpContextBase>();

// RequestContext also gets registered instance-per-dependency
// and handles the null context case.
builder.Register(
  c => {
    var ctx = c.Resolve<HttpRequestBase>();
    return ctx == null ? null : ctx.RequestContext;
  }).As<RequestContext>(); 
```

这应该可以帮助您解决应用程序启动问题。

综上所述……**您应该弄清楚在应用程序启动时尝试使用 RequestContext 的原因，看看您是否可以修复设计**。在正常情况下，您不应该最终需要做这种事情。

# android - Android启动服务而不启动应用程序？

> ID：10945426
> 
> 赞同：1
> 
> 时间：2012-06-08T08:28:31.003
> 
> 标签：android, service

是否可以在不启动应用程序的情况下启动服务？我需要至少每小时刷新一次我的应用程序的数据，如果我的应用程序中没有用户，我该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T08:37:21.590

您可以在启动时启动您的服务。您的 AndroidManifest.xml 文件中需要以下内容：

1.  在您的 <manifest> 元素中：

    `<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />`

2.  在您的 <application> 元素中（确保为您的 BroadcastReceiver 使用完全限定的 [或相对] 类名）：

在 MyBroadcastReceiver.java 中：

```
package com.example;

public class MyBroadcastreceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        Intent startServiceIntent = new Intent(context, MyService.class);
        context.startService(startServiceIntent);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T08:41:29.653

是的，有可能。

[您可以在此处](https://stackoverflow.com/questions/2566350/how-to-always-run-a-service-in-the-background)阅读有关这样做的不同方法。

# optimization - Haskell：列表融合，哪里需要？

> ID：10945429
> 
> 赞同：6
> 
> 时间：2012-06-08T08:28:38.940
> 
> 标签：optimization, haskell, lazy-evaluation, fusion

假设我们有以下内容：

```
l = map f (map g [1..100]) 
```

我们想做：

```
head l 
```

所以我们得到：

```
head (map f (map g [1..100])) 
```

现在，我们必须得到这个的第一个元素。`map`定义如下：

```
map f l = f (head l) : (map f (tail l)) 
```

那么我们得到：

```
f (head (map g [1..100])) 
```

然后再次申请：

```
f (g (head [1..100])) 
```

这导致

```
f (g 1) 
```

仅仅由于懒惰，没有形成中间列表。

这个分析正确吗？并具有这样的简单结构：

```
foldl' ... $ map f1 $ map f2 $ createlist 
```

是否曾经创建过中间列表，即使没有“列表融合”？（我认为懒惰应该轻松消除它们）。

* * *

我能看到保留列表的唯一原因是我们这样做了：

```
l' = [1..100]
l = map f (map g l') 
```

如果在其他地方使用，我们可能想要保留`l'`的地方。然而，在`l'`上面的例子中，编译器意识到重新计算上面的列表而不是存储它应该是相当简单的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T11:49:40.043

当中间数据结构昂贵时，融合受益最大。当传递的结构是惰性的，并且以顺序方式访问时，结构可能相对便宜（就像列表一样）。

*   对于惰性结构，融合消除了创建 thunk 的常量因素，并立即对它进行垃圾收集。
*   对于严格的结构，融合可以消除*O(n)*的工作。

因此，最大的好处是对于严格的数组和类似的结构。然而，即使融合惰性列表仍然是一个胜利，因为增加了数据局部性，因为更少的中间结构被分配为 thunk。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T08:45:43.780

在您的`map`示例中，创建了列表单元格，然后立即进行垃圾收集。使用列表融合，不需要 GC 或 thunk 操作（它们都不是免费的）。

# php - 从 ajax 响应中提取数据

> ID：10945433
> 
> 赞同：0
> 
> 时间：2012-06-08T08:29:02.890
> 
> 标签：php, javascript, jquery, ajax, json

我需要从 php 数据中提取 URL，我该如何实现呢？

PHP

```
$query = 'SELECT * FROM picture LIMIT 3';
$result = mysql_query($query);

while ($rec = mysql_fetch_array($result,  MYSQL_ASSOC)) {
    $url.=$rec['pic_location'].";";
}

echo json_encode($url); 
```

阿贾克斯

```
 <script type="text/javascript">
    $(document).ready(function() {
    $(".goButton").click(function() {
       var dir =  $(this).attr("id");

   var imId = $(".theImage").attr("id");
   $.ajax({
      url: "viewnew.php",
      data: {
         current_image: imId,
         direction    : dir
      },
     success: function(ret){
          console.log(ret);
          var arr = ret;
          alert("first: " + arr[0] + ", second: " + arr[1]);
          alert(arr[0]);
          $(".theImage").attr("src", +arr[0]);
          if ('prev' == dir) {
        imId ++;
     } else {
        imId --;
     }
     $("#theImage").attr("id", imId);
          }
       });

    });
    });
    </script> 
```

警报消息不起作用，它只是打印 HT（我认为这些是 http://...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:32:17.147

您正在返回一个未解析为 JSON 的字符串。只需添加`dataType: "json"`到 ajax 设置。

由于您在 javascript 中将其作为数组读取，因此您应该像这样返回它：

```
while ($rec = mysql_fetch_array($result,  MYSQL_ASSOC)) {
    $url[] = $rec['pic_location'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T08:34:11.757

您在 PHP 中发送一个字符串，并期望一个数组作为 javascript 中的响应。将您的 PHP 更改为

```
while ($rec = mysql_fetch_array($result,  MYSQL_ASSOC)) {
    $url[] = $rec['pic_location'];
} 
```

和 javascript 到

```
$.ajax({
      url: "viewnew.php",
      dataType: "JSON",
      data: {
         current_image: imId,
         direction    : dir
      },
      success: function(ret){
          console.log(ret[0]);
          var arr = ret;
          alert(arr);  
          alert("first: " + arr[0] + ", second: " + arr[1]);    // THIS IS NOT WORKING!!!!
          if ('prev' == dir) {
            imId ++;
         } else {
            imId --;
         }
         $("#theImage").attr("id", imId);
      }
   }); 
```

# iphone - 检测点击 uitextview 上的 nsurl

> ID：10945439
> 
> 赞同：2
> 
> 时间：2012-06-08T08:29:34.067
> 
> 标签：iphone, uiwebview, overriding, uitextview

我的文本视图中有一个 URL，当我们单击此 URL 时，它会在默认 safari 中打开此 URL。我想检测这个事件。我也试过[这个](https://stackoverflow.com/questions/2543967/how-to-intercept-click-on-link-in-uitextview)

但它不适合我。任何人都可以建议我如何做到这一点。为此提供我一个样本。

我的应用程序委托是 UIResponder 类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:59:11.977

[另一个答案](https://stackoverflow.com/questions/2543967/how-to-intercept-click-on-link-in-uitextview)按预期工作。

创建`New File`,选择`Objective-C Class`

*   班级：`MyApplication`
*   子类：`UIApplication`

将此代码粘贴到`.m`文件中：

```
- (BOOL)openURL:(NSURL *)url {
    if  ([self handleOpenURL:url])
        return YES;
    else
        return [super openURL:url];
}
- (BOOL)handleOpenURL:(NSURL*)url {
    NSLog(@"my url handler");
    return YES;
} 
```

接下来打开你的`main.m`并更改第三个参数

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([SampleAppDelegate class])); 
```

到您的`UIApplication`-subclass 名称

```
return UIApplicationMain(argc, argv, @"MyApplication", NSStringFromClass([SampleAppDelegate class])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T22:10:46.987

假设您只需要显示带有链接的静态标签，我们在 Nimbus 中有一个相当强大的属性标签，您可能希望查看：

[http://docs.nimbuskit.info/group___nimbus_attributed_label.html](http://docs.nimbuskit.info/group___nimbus_attributed_label.html)

该标签使用 CoreText 和 NSAttributedString，因此它建立在 Apple 核心技术之上。它在各个方面都像 UILabel 一样。下面是实现 NIAttributedLabel 委托的示例：

[https://github.com/jverkoey/nimbus/blob/master/examples/attributedlabel/BasicAttributedLabel/BasicAttributedLabel/src/MashupViewController.m#L92](https://github.com/jverkoey/nimbus/blob/master/examples/attributedlabel/BasicAttributedLabel/BasicAttributedLabel/src/MashupViewController.m#L92)

更多信息： http: [//nimbuskit.info/](http://nimbuskit.info/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T08:40:09.590

看看这个 GitHub 项目：[MSTextView](https://github.com/marksands/MSTextView)

# parsing - flac 和 wav 的 ffmpeg 输出不同，为什么？

> ID：10945440
> 
> 赞同：2
> 
> 时间：2012-06-08T08:29:53.267
> 
> 标签：parsing, ffmpeg, wav, flac

我需要解析 ffmpegs 元数据输出，但由于某种原因，wav 和 flac 文件之间存在差异。

弗拉克：

```
(int) 14 => '  Duration: 00:03:18.93, bitrate: 1045 kb/s',
(int) 15 => '    Stream #0:0: Audio: flac, 44100 Hz, stereo, s16', 
```

声音：

```
(int) 13 => '  Duration: 00:00:15.00, bitrate: 1411 kb/s',
(int) 14 => '    Stream #0:0: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 44100 Hz, stereo, s16, 1411 kb/s', 
```

我认为我也可以从持续时间线获得比特率，但为什么会有所不同？未来的版本会不会有更多不同？真的很糟糕，没有比解析它的输出更好的方法来从 ffmpeg 获取信息。有更好的想法吗？

这是我的整个 ffmpeg 输出和我的解析结果：

[http://pastebin.com/4qJfzZNL](http://pastebin.com/4qJfzZNL)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T21:17:48.480

我最终通过使用 ffmpeg 附带的 ffprobe 解决了它。

```
ffprobe -v quiet -show_streams -show_format -show_error -print_format <format> <file> 
```

[有关它支持的格式，请参阅文档的作者部分](http://ffmpeg.org/ffprobe.html#Writers)，我使用过 json，但也支持 xml、csv 和 ini。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:36:27.020

流线提供不同的信息，因为每个编解码器具有不同的参数。您将需要解析该行并根据音频类型，您需要了解它之后的那些参数。

您可以只在持续时间行中使用比特率，但是如果不知道正在使用哪个编解码器，这可能会产生误导。

# css - H1图像替换替代

> ID：10945443
> 
> 赞同：0
> 
> 时间：2012-06-08T08:30:05.430
> 
> 标签：css, image, header, seo, replace

我希望在我的标题中添加一个 h1 元素，但是我在标题中使用标签（不是背景图像），当屏幕分辨率发生变化时它们会相互替换。

我看过技术

```
<h1 class="technique-four">
<a href="#">
    <img src="images/header-image.jpg" alt="CSS-Tricks" />
</a>
</h1>

h1.technique-four {
width: 350px; height: 75px;
background: url("images/header-image.jpg");
text-indent: -9999px;
} 
```

...但是由于我的布局是流畅的，因此可以在图像更改时看到背景。

甚至有必要用图像替换 h1 吗？我不能做类似的事情：

```
<h1 class="headerhone">kb-k bwf-kb</h1> 

<a href="#"><img src="<?php bloginfo('stylesheet_directory'); ?>/images/720.jpg" class="show-on-phones"/></a>

<a href="#"><img src="<?php bloginfo('stylesheet_directory'); ?>/images/980_full.jpg" class="hide-on-phones"alt=""/></a> 
```

（忽略php）

然后给 h1 一个零高度：

```
h1.headerhone{
height:0px;
text-indent: 100%;
white-space: nowrap;
overflow: hidden;

} /*this was suggested to me as an alternative to the -9999px; thing.*/ 
```

这行得通吗？它会有任何负面的 SEO 影响或可用性问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:47:51.447

谷歌从来没有对隐藏文本和在`<h1>`标签中使用图像有任何积极的评价，所以我总是犹豫是否推荐它作为解决方案。您的最后一项技术几乎肯定会属于向搜索引擎提供不同内容的范畴，因此我也建议您反对。

你的第二个想法是在正确的轨道上。您要做的是使用[响应式设计](http://en.wikipedia.org/wiki/Responsive_Web_Design)来确定布局的宽度并相应地调整图像。事实上，[谷歌最近在他们的博客上写了很多关于它的文章](http://googlewebmastercentral.blogspot.com)。我强烈建议学习如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:32:08.050

在第二个解决方案中，在屏幕阅读器上，您的 h1 内容将是“kb-k bwf-kb”，屏幕阅读器不会理解`alt`以下图像的属性实际上是您的 h1。

对于谷歌来说，第二个解决方案似乎你想在 h1 标签中隐藏内容：不好。

一个视觉示例会很有用，我不明白你想要实现的所有目标。

# c# - 如何一次将DataGridview中的多行插入数据库表中

> ID：10945447
> 
> 赞同：2
> 
> 时间：2012-06-08T08:30:32.607
> 
> 标签：c#, entity-framework, datagridview, linq-to-entities

我有一个支持添加新记录的 Unbound DataGridview。用户可以在此 DataGridview 中输入一条或多条记录，此时不应保存任何内容。

当用户完成输入记录时，我希望他们单击​​一个按钮并将 DataGridview 中的所有行插入到一个表中。

**我正在使用 Linq To 实体。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:37:31.247

EF 不直接支持批量插入。您可以使用[SqlBulkCopy 类 (System.Data.SqlClient)](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)。[这](http://cgeers.com/2011/05/19/entity-framework-bulk-copy/)是一篇好文章。

# c# - 如何在 .Net 2.0 应用程序中引用 a.Net 4.0 COM

> ID：10945449
> 
> 赞同：0
> 
> 时间：2012-06-08T08:30:45.803
> 
> 标签：c#, dll, .net-4.0, com, .net-3.5

我在 DotNet 2.0 应用程序中使用 DotNet 4.0 DLL 时遇到问题，谷歌搜索该问题显示了[一个合适的解决方案：COM](https://stackoverflow.com/questions/2382927/can-i-use-a-net-4-0-library-in-a-net-2-0-application)

无论如何，我现在正在尝试这样做，但是当我在我的应用程序中添加引用时，我不断收到以下错误（引用是**tlb**）：

> ActiveX 类型库“MyLib.tlb”是从 .NET 程序集中导出的，不能作为参考添加。请直接参考大会。

我错过了什么吗？它在许多网站上声明此选项应该有效： [Example1](http://blogs.microsoft.co.il/blogs/arik/archive/2011/05/30/how-to-use-a-net-4-based-dll-from-net-2-based-application.aspx)，[Example2](http://jumbloid.blogspot.de/2009/12/making-net-dll-com-visible.html)

另一方面，它在[微软的一个旧链接上](http://connect.microsoft.com/VisualStudio/feedback/details/120882/reference-a-com-from-visual-2005)声明这个选项是不可能的“按设计”

有任何想法吗？提示？

家我不是混淆的事情。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T08:38:03.217

因为它会导致在已经加载 .NET2 运行时的进程中加载​​ .NET4 运行时——这在设计上是不可能的！.NET 4 中引入了对在一个进程中混合 .NET 版本的支持。

如果您真的需要完成这项工作：

*   制作一个使用该 .NET4 DLL 的本机进程外 COM 服务器
*   然后从您的 .NET2 进程中使用该服务器（而不是直接使用 .NET4 DLL！）

备注 - 在看到您对 EF4 的评论后：

我强烈建议将您的 .NET2 应用程序转换为 .NET 4 - 其他任何事情都将是真正的维护噩梦！

# django - Django TemplateResponse 如何处理多个模板

> ID：10945452
> 
> 赞同：0
> 
> 时间：2012-06-08T08:30:59.017
> 
> 标签：django, django-templates

Django 文档说`TemplateResponse.template`可以是一系列模板名称。那么如果有多个模板，会渲染哪些模板呢？

换句话说，如何`TemplateResponse`处理多个模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:45:13.763

它的行为方式应该与 相同[`render_to_string()`](https://docs.djangoproject.com/en/dev/ref/templates/api/#the-render-to-string-shortcut)，即：选择存在的第一个。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T11:11:01.330

TemplateResponse 对象保留了视图提供的模板和上下文的详细信息以计算响应。所以它由View控制。

你也可以重写这个方法 SimpleTemplateResponse.resolve_template(template) 来自定义模板渲染

参考： [https ://docs.djangoproject.com/en/dev/ref/template-response/](https://docs.djangoproject.com/en/dev/ref/template-response/)

# php - PHP/Ajax/jQuery - 将 jquery 值传递给 php 脚本

> ID：10945459
> 
> 赞同：6
> 
> 时间：2012-06-08T08:31:12.063
> 
> 标签：php, jquery, ajax, jqgrid

我有一个 bookings.php 页面，其中有一个 jqgrid，显示所有在线预订。当您双击一行时，这将打开一个 jq 对话框，其中显示有关该预订的所有详细信息。此外，当您双击时，我定义了一个变量，它是我要传递给 php 脚本的预订参考：

```
var brData = rowData['bookref']; 
```

我通过 ajax 发送这个变量：

```
function getGridRow(brData) {

   $.ajax({

    // Request sent from control panel, so send to cp.request.php (which is the handler)
    url: 'scripts/php/bootstrp/all.request.php',
    type: 'GET',

    // Build data array - look at the '$_REQUEST' parameters in the 'insert' function
    data: {

        //ft: "getDGRow",
        rowdata: 'fnme=getDGRow&row_data='+brData,
        data: brData,

        // Either pass a row id as the 'id' OR a where clause as the 'condition' never both
        id: null,
        condition: null
    },
    dataType: 'text',
    timeout: 20000,
    error: function(){
        alert("It failed");
        $('#cp-div-error').html('');
        $('#cp-div-error').append('<p>There was an error inserting the data, please try again later.</p>');
        $('#cp-div-error').dialog('open');
    },
    success: function(response){

        // Refresh page

       // response = brData;
       // alert(response);

    }
});

} 
```

这是 all.inc.php 的 switch 案例：

```
case 'getDGRow':
//header('Content-type: text/xml');
DatagridController::getGridRow($_REQUEST['rowdata']);
break; 
```

这是我将 jquery 变量发送到的 PHP 函数，以在我的 PHP 代码中使用：

```
public static function getGridRow($rowdata) {

    $rowdata = $_GET['data'];
    echo $rowdata;

    $pdo = new SQL();
    $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

    try {

        $query = ("SELECT * FROM tblbookings WHERE bookref = '$rowdata'");

        $stmt = $dbh->prepare($query);

        $stmt->execute();

        $row = $stmt->fetch(PDO::FETCH_BOTH);

        BookingDocket::set_id($row['id']);
        BookingDocket::set_bookref($row['bookref']);
        BookingDocket::set_bookdate($row['bookingdate']);
        BookingDocket::set_returndate($row['returndate']);
        BookingDocket::set_journeytype($row['journeytype']);
        BookingDocket::set_passtel($row['passengertel']);
        BookingDocket::set_returndate($row['returndate']);

        $stmt->closeCursor();

    }

    catch (PDOException $pe) {
        die("Error: " .$pe->getMessage(). " Query: ".$stmt->queryString);
    }

    $dbh = null;

}

} 
```

我已经把 echo $rowdata; 在 PHP 函数中查看是否正在传递变量，因为我可以在 firebug 控制台中看到“BR12345”。问题是这个查询：

```
 $query = ("SELECT * FROM tblbookings WHERE bookref = '$rowdata'"); 
```

没有获取任何结果。如果我要说：

```
 $query = ("SELECT * FROM tblbookings WHERE bookref = 'BR12345'"); 
```

它确实获取了我需要的结果，所以我不明白为什么当变量 brData 被传递给 $rowdata 时这个查询不起作用

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:47:05.983

想知道为什么您的代码中有一个准备好的语句，但实际上没有正确使用它。

```
$stmt = $dbh->prepare("SELECT * FROM tblbookings WHERE bookref = :data");
$stmt->execute(array(
    ':date' => trim($rowdata),
)); 
```

我已经添加`trim()`以确保它周围没有空格或换行符可能会搞砸。

**更新**

现在是调试时间：

```
public static function getGridRow($rowdata) {

    $rowdata = $_GET['data'];
    echo $rowdata; 
```

添加以下行：

```
 echo "=====DEBUG====== ";
    var_dump($rowdata); 
    echo " =====DEBUG====== ";
    exit; 
```

这将写入值并立即停止您的脚本，以便您可以详细检查其值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T08:38:07.113

使用函数

```
HtmlSpecialChar() 
Trim() 
```

然后显示 $rowdata 变量，如果字符串格式正确，则

试试这个

```
 $query = ("SELECT * FROM tblbookings WHERE bookref = '$rowdata'"); 
```

或者

```
 $query = ("SELECT * FROM tblbookings WHERE bookref = '".$rowdata."'"); 
```

PHP 可以看到没有 -> ' 的变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T08:41:32.023

**我的答案是错误的，我没有删除它，所以没有人发布这个错误的答案**
证明我错了：[http ://codepad.org/fvHM81Uh](http://codepad.org/fvHM81Uh)

尝试

`$query = ("SELECT * FROM tblbookings WHERE bookref = '" . $rowdata . "'");`

在 PHP 中，字符串中的 vars 是这样处理的：

```
$variable = "Hello";
echo "$variable"; //=> Hello
echo '$variable'; //=> $variable 
```

但：

```
 echo "'$variable'"; //=> 'Hello' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T15:59:25.270

不确定 $rowdata 是否是一个数组，但我假设它不是。在这种情况下，您是否尝试过：

```
$query = "SELECT * FROM tblbookings WHERE bookref = " . $rowdata; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T17:18:58.947

试着先解决你的问题。你说你对firebug没有问题，试着把`console.dir()`响应放在这里验证。

同时执行以下操作：

然后`$_REQUEST`用`print_r()`. 你的变量在那里吗？如果是这样，请执行`var_dump($_REQUEST['rowdata'])`并检查。

在`public static function getGridRow($rowdata)`看到你覆盖`$rowdata`看到回声。最后，如果您现在一切顺利，请正确准备您的查询

# javascript - 类似取景器的功能和裁剪

> ID：10945463
> 
> 赞同：0
> 
> 时间：2012-06-08T08:31:31.800
> 
> 标签：javascript, image-processing, canvas

我目前正要使用 Javascript 构建一个小书签，它上面会有一个小窗口，其中包含一个相当大的图像。用户应该能够在窗口中单击并拖动以移动图像，然后当他们单击按钮时，图像将被裁剪为取景器的大小并通过 Ajax 上传到服务器。任何人都知道用 Javascript 实现这一点同时仍然能够支持 IE 的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:36:43.257

你试过**[Jcrop](http://deepliquid.com/content/Jcrop.html)**吗？

**Jcrop**是将图像裁剪功能添加到 Web 应用程序的快速简便的方法。它结合了典型 jQuery 插件的易用性和强大的跨平台 DHTML 裁剪引擎，忠实于熟悉的桌面图形应用程序。

# wpf - 创建线框 3D 立方体

> ID：10945472
> 
> 赞同：8
> 
> 时间：2012-06-08T08:32:11.437
> 
> 标签：wpf, xaml, 3d

我有这段代码在 WPF Viewport3D 中绘制一个立方体：

```
 <Viewport3D Name="viewport3D1">
            <Viewport3D.Camera>
                <PerspectiveCamera x:Name="camMain" Position="6 5 4" LookDirection="-6 -5 -4">
                </PerspectiveCamera>
            </Viewport3D.Camera>
            <ModelVisual3D>
                <ModelVisual3D.Content>
                    <DirectionalLight x:Name="dirLightMain" Direction="-1,-1,-1">
                    </DirectionalLight>
                </ModelVisual3D.Content>
            </ModelVisual3D>
            <ModelVisual3D>
                <ModelVisual3D.Content>
                    <GeometryModel3D>
                        <GeometryModel3D.Geometry>
                            <MeshGeometry3D x:Name="meshMain"
                                Positions="0 0 0  1 0 0  0 1 0  1 1 0  0 0 1  1 0 1  0 1 1  1 1 1"
                                TriangleIndices="2 3 1  2 1 0  7 1 3  7 5 1  6 5 7  6 4 5  6 2 0  2 0 4  2 7 3  2 6 7  0 1 5  0 5 4">
                            </MeshGeometry3D>
                        </GeometryModel3D.Geometry>
                        <GeometryModel3D.Material>
                            <DiffuseMaterial x:Name="matDiffuseMain">
                                <DiffuseMaterial.Brush>
                                    <SolidColorBrush Color="Red"/>
                                </DiffuseMaterial.Brush>
                            </DiffuseMaterial>
                        </GeometryModel3D.Material>
                    </GeometryModel3D>
                </ModelVisual3D.Content>
            </ModelVisual3D>
        </Viewport3D> 
```

这给出了以下结果：

![](../Images/acdb1b958edaa47d36101f9eb2dbddb5.png)

如何使渲染为线框？

![](../Images/36f8e00c56fac19f718afbe6e5bc9382.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T09:42:47.137

查看`LinesVisual3D`（免费）Helix 3D 工具包（[https://github.com/helix-toolkit](https://github.com/helix-toolkit)）中的课程。这是“屏幕空间线”的一个版本，可让您像示例一样绘制线框。

如果您正在做任何 WPF 3D 工作，我强烈推荐[Helix 3D Toolkit 。](https://github.com/helix-toolkit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:51:16.867

也许这可以帮助：

```
 <GeometryModel3D.Material>
                    <DiffuseMaterial x:Name="matDiffuseMain">
                        <DiffuseMaterial.Brush>
                            <SolidColorBrush Color="Red" Opacity="0.5" />
                        </DiffuseMaterial.Brush>
                    </DiffuseMaterial>
                </GeometryModel3D.Material>
                <GeometryModel3D.BackMaterial>
                    <DiffuseMaterial x:Name="matDiffuseMain2">
                        <DiffuseMaterial.Brush>
                            <SolidColorBrush Color="Red" Opacity="0.5" />
                        </DiffuseMaterial.Brush>
                    </DiffuseMaterial>
                </GeometryModel3D.BackMaterial> 
```

# c# - 将 ASP 中继器数据源转换为 C# 列表

> ID：10945477
> 
> 赞同：0
> 
> 时间：2012-06-08T08:32:25.833
> 
> 标签：c#, asp.net, repeater

我有一个名为 rptFoo 的中继器和一个名为 listFoo 的 C# `List<String>`。我只知道我可以将 List 分配为 repeater `DataSource`，如下所示：

```
rptFoo.DataSource = listFoo
rptFoo.DataBind(); 
```

这个转发器被渲染到文本框，然后我对文本框的文本进行了一些更改。我可以反过来得到列表吗？我的意思是，当我的转发器项目**的某个文本框上的数据发生更改**时，我可以将它分配给我的 C# 列表，如下所示：

```
listFoo = DataSource 
```

我正在寻找比通过`foreach`. 任何想法？

这就是我的做法：

```
foreach (RepeaterItem item in rptFoo.Items)
{
  TextBox myTextBox= (TextBox)item.FindControl("myTextBox");
  listFoo[item.ItemIndex] = myTextBox.Text;
} 
```

我想在我的转发器上获取任何已编辑的数据以反映在我的列表中。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:46:54.523

比遍历每个中继器项并查找文本框更好的方法可能是利用 TextBox 控件的**OnTextChanged**事件处理程序。这将使您可以直接访问 TextBox 对象和它的新值。

# jquery - 我可以在 preventDefault() 之后执行链接吗？

> ID：10945478
> 
> 赞同：12
> 
> 时间：2012-06-08T08:32:32.810
> 
> 标签：jquery

代码 ：

```
$('#myLink').click(function (e) {
    e.preventDefault();

    ...

    if (someCondition) {
        ... code ...
    } else {
        ... execute the link
    }
}); 
```

我想，如果`someCondition`是假的，执行链接的原始href（所以，去那个链接，改变页面）。这可能吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-08T08:37:49.967

```
$('#myLink').click(function (e) {
    e.preventDefault();

    ...

    if (someCondition) {
      //do stuff
    } else {
        location.href = $(this).attr('href');
    }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T08:35:17.887

只需移动`preventDefault`if/else 语句内部：

```
$('#myLink').click(function (e) {

    ...

    if (someCondition) {
        e.preventDefault();

        ... code ...

    } else {
        ... execute the link
    }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T08:37:12.550

看看：[Jquery Location Href?](https://stackoverflow.com/questions/7078660/jquery-location-href)

基本上你可以使用`window.location.href = 'http://example.com';`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T08:36:01.293

只是把`e.preventDefault();`里面的条件？

# jquery - jQuery 获取函数

> ID：10945481
> 
> 赞同：1
> 
> 时间：2012-06-08T08:32:47.973
> 
> 标签：jquery, replace, get

我想使用 jquery get 函数读取一个 html 文件，替换一些字符然后显示结果。我写了get函数，可以替换文本。表中有很多行。行内的所有数据都显示为文本。行以空格结尾；所以我想替换“;” 每行的字符。但是下面的代码只是替换了第一行的字符。我怎样才能替换所有“;” 所有行的字符？

```
$.ajax({
        url: 'http://url',
            type: 'GET',
            success: function(data) {
            var def = $(data).find('tbody#div.divWord').html();

                $('#def').append('<p><b>' + word + '</b>:' + def + '</p>');

                $("div").each(function() {
                    var text = $(this).text();
                    text = text.replace("  ;", "@");
                    $(this).text(text);
                });

            },
            error: function(data) {
                alert('error'); 
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:37:27.890

Replace 函数默认只匹配第一个结果。

如果要替换每一次出现，则必须采用正则表达式并设置“全局标志”：

```
text = text.replace(/ ;/g, "@"); 
```

或者

```
text = text.replace(/\s;/g, "@"); 
```

where`\s`匹配空白字符。

或者

```
text = text.replace(new RegExp(" ;","g"),"@"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T08:35:23.297

```
text = text.replace("  ;", "@"); -> text = text.replace(/  ;/g, "@"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T08:35:58.737

在替换中使用正则表达式，以便您可以指定全局 (g) 标志：

```
text = text.replace(/  ;/g, "@"); 
```

# css - 使用表单输入归档剩余空间

> ID：10945483
> 
> 赞同：1
> 
> 时间：2012-06-08T08:32:57.190
> 
> 标签：css, forms, css-float

好吧，假设我有一个这样的表单元素：

HTML：

```
<div class="form-item">
    <label>Current password</label>
    <input id="edit-current-pass" class="form-text" type="password" maxlength="128" size="25" name="current_pass" autocomplete="off">
    <div class="description">lorum ispum</div>
</div> 
```

CSS：

```
.description {
    clear: both;
}

label {
    float: left;
    line-height: 34px;
    margin-right: 20px;
    width: 140px;
}
form input.form-text {
    background-image: none !important;
    border: 1px solid #E5E5E5;
    height: 30px;
    padding: 1px 2px;
} 
```

是否有可能使输入占据除了左浮动标签元素之外的行的**剩余宽度？**

（仅供参考，父容器设置了宽度）。

我想让这个响应，以便表单增长和缩小到浏览器窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:45:54.153

我认为这对于纯 HTML/CSS 可能是不可能的，但我在输入框周围使用了一个额外的包装器来管理它。[在 JSFiddle 上查看](http://jsfiddle.net/hwm5V/2/)。

# HTML

```
<div class="form-item">
    <label for="edit-current-pass">Current password</label>
    <span class="input">
        <input id="edit-current-pass" type="password" maxlength="128" size="25" name="current_pass" autocomplete="off">
    </span>
    <div class="description">lorum ispum</div>
</div>​ 
```

# CSS

```
.description {
    clear: both;
}

label {
    float: left;
    line-height: 34px;
    margin-right: 20px;
    width: 140px;
}
.input {
    display: block;
    border: 1px solid #E5E5E5;
    padding: 1px 2px;
    overflow: auto;
}
.input input {
    display: block;
    float: left;
    background: transparent;
    width: 100%;
    height: 30px;
    border: 0;
    padding: 0;
    margin: 0;
}​ 
```

# php - Zend 帖子视图删除/取消链接

> ID：10945484
> 
> 赞同：0
> 
> 时间：2012-06-08T08:33:03.060
> 
> 标签：php, zend-framework

嗨，我有一个 zend 视图，其中 echo 是一个 `<img src>`标签，我想在页面渲染后删除这个图像文件，有什么想法可以做到这一点吗？

在视图执行后流程是否返回到控制器，或者它只是在那里完成？我试图在回显之后取消链接文件，但当然当时还没有呈现 html。

那么我要问的是，在呈现 html 之后，是否可以使用某种 post view 操作来取消链接文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:42:17.300

至少在浏览器检索到图像之前，图像需要在那里才能被渲染。此时，您的服务器请求已经完成。

在请求完成后删除文件的常用方法是使用定期执行的“清理”cron 任务。

希望有帮助，

# java - Java6、Guava、泛型、类型推断

> ID：10945487
> 
> 赞同：6
> 
> 时间：2012-06-08T08:33:07.427
> 
> 标签：java, generics, guava, type-inference, scjp

我用 Java 编写了一个实用程序方法：

```
public static final ImmutableSortedSet<TimeUnit> REVERSED_TIMEUNITS = ImmutableSortedSet.copyOf(
        Collections.<TimeUnit>reverseOrder(),
        EnumSet.allOf(TimeUnit.class)
);

/**
 * Get the number of ..., minutes, seconds and milliseconds
 *
 * You can specify a max unit so that you don't get days for exemple
 * and can get more than 24 hours if you want to display the result in hours
 *
 * The lowest unit is milliseconds
 * @param millies
 * @param maxTimeUnit
 * @return the result map with the higher unit first
 */
public static Map<TimeUnit,Long> getCascadingDateDiff(long millies,TimeUnit maxTimeUnit) {
    if ( maxTimeUnit == null ) {
        maxTimeUnit = TimeUnit.DAYS;
    }
    Map<TimeUnit,Long> map = new TreeMap<TimeUnit,Long>(Collections.<TimeUnit>reverseOrder());
    long restInMillies = millies;
    Iterable<TimeUnit> forUnits = REVERSED_TIMEUNITS.subSet(maxTimeUnit,TimeUnit.MICROSECONDS); // micros not included
    // compute the number of days, then number of hours, then minutes...
    for ( TimeUnit timeUnit : forUnits ) {
        long numberForUnit = timeUnit.convert(restInMillies,TimeUnit.MILLISECONDS);
        map.put(timeUnit,numberForUnit);
        restInMillies = restInMillies - timeUnit.toMillis(numberForUnit);
    }
    return map;
} 
```

它适用于：

```
 Map<TimeUnit,Long> map = new TreeMap<TimeUnit,Long>(Collections.reverseOrder()); 
```

但我第一次尝试

```
 Map<TimeUnit,Long> map = Maps.newTreeMap(Collections.reverseOrder()); 
```

我的 IntelliJ 什么也没说，而我的编译器说：

> DateUtils.java:[302,48] 不兼容的类型；不存在类型变量 K,V 的实例，因此 java.util.TreeMap 符合 java.util.Map [错误] 发现：java.util.TreeMap [错误] 需要：java.util.Map

没有比较器它工作正常：

```
 Map<TimeUnit,Long> map = Maps.newTreeMap(); 
```

但我尝试过：

```
Map<TimeUnit,Long> map = Maps.newTreeMap(Collections.<TimeUnit>reverseOrder()); 
```

与：

```
Map<TimeUnit,Long> map = Maps.newTreeMap(new Comparator<TimeUnit>() {
    @Override
    public int compare(TimeUnit timeUnit, TimeUnit timeUnit1) {
        return 0; 
    }
}); 
```

我得到了同样的错误。因此，似乎每次我在 TreeMap 中使用比较器时，类型推断都不再起作用。为什么？

* * *

Guava 方法的签名是：

```
 public static <C, K extends C, V> TreeMap<K, V> newTreeMap(Comparator<C> comparator) 
```

预期的返回类型是没有比较器的类型，Java 能够推断出 K = TimeUnit 和 V = Long。

使用 TimeUnit 类型的比较器，Java 知道 C 是 TimeUnit。它还知道预期的返回类型是 K = TimeUnit 和 V = Long 的类型。K 扩展 C 受到尊重，因为 TimeUnit 扩展了 TimeUnit（无论如何，如果您认为它是错误的，我也尝试使用 Object 比较器......）

所以我只是想知道为什么类型推断在这种情况下不起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T09:22:14.813

就像 Michael Laffargue 建议的那样，这是一个 OpenJDK6 类型推断错误：

[https://bugs.openjdk.java.net/show_bug.cgi?id=100167](https://bugs.openjdk.java.net/show_bug.cgi?id=100167)

[http://code.google.com/p/guava-libraries/issues/detail?id=635](http://code.google.com/p/guava-libraries/issues/detail?id=635)

它在我的 IntelliJ 中运行良好，在版本 7 中使用 OpenJDK，在版本 6 中使用其他 JDK。

* * *

kutschkem 的以下建议有效：

```
 Map<TimeUnit,Long> map = Maps.<TimeUnit,TimeUnit,Long>newTreeMap(Collections.<TimeUnit>reverseOrder()); 
```

注意`<TimeUnit,TimeUnit,Long>`which 允许显式地强制类型化参数。检查此相关主题：[Java 中的泛型用法是什么？X.<Y>方法()](https://stackoverflow.com/questions/10945616/whats-this-generics-usage-in-java)

谢谢大家

# delphi - 我如何为 TLinkLabel 申请 VCLStyle

> ID：10945492
> 
> 赞同：6
> 
> 时间：2012-06-08T08:33:42.297
> 
> 标签：delphi, delphi-xe2, vcl-styles

我尝试将 VCLStyle 应用于 TLinkLabel。

可悲的是，我无法显示下划线（A 标签的句子）

```
TLinkLabel.Caption := 'Sma<a>pl</a>e'; 
```

我该如何解决这个问题？

解决这个问题，但是标签可能没有出现这个“样本” ![在此处输入图像描述](../Images/10bc78b3a6e7201bf4097476a5124515.png)

```
procedure TgLinkLabelHook.Paint(Canvas: TCanvas);
var
  LDetails: TThemedElementDetails;
  ParseStr: String;
  DrawRect: TRect;
  DC: HDC;
  TextSize: TSize;
  SaveFont: HFont;
  ThemeTextColor: TColor;
begin
  ParseStr := ParseLinks;
  LDetails := StyleServices.GetElementDetails(tbPushButtonPressed);
  DC := GetDC(0);
  try
    SaveFont := SelectObject(DC, TLinkLabel(Control).Font.Handle);
    try
      GetTextExtentPoint32(DC, PWideChar(ParseStr), Length(ParseStr), TextSize);
    finally
      SelectObject(DC, SaveFont);
    end;
  finally
    ReleaseDC(0, DC);
  end;
  Canvas.Font := TLinkLabel(Control).Font;
  Canvas.Font.Style := Canvas.Font.Style + [fsUnderline];
  Canvas.Font.Size := TLinkLabel(Control).Font.Size;
  if StyleServices.GetElementColor(LDetails, ecBodyTextColor, ThemeTextColor) then
    Canvas.Font.Color := ThemeTextColor;
//  DrawRect := Rect(0, 0, TextSize.cx, TextSize.cy);
  DrawRect := Control.ClientRect;
  DrawControlText(Canvas, LDetails, ParseStr, DrawRect, DT_VCENTER or DT_CENTER);
end;

procedure TForm8.FormCreate(Sender: TObject);
begin
  TStyleManager.Engine.RegisterStyleHook(TLinkLabel, TgLinkLabelHook);
end; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T10:03:55.660

***如何根据您使用的画布字体设置呈现标签文本：***

使用[`TCustomStyleServices.DrawText`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Themes.TCustomStyleServices.DrawText)功能：

```
StyleServices.DrawText(Canvas.Handle, LDetails, ParseStr, DrawRect, DT_VCENTER or DT_CENTER, Canvas.Font.Color); 
```

而不是[`TStyleManager.DrawControlText`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Themes.TStyleHook.DrawControlText). 这个函数使用默认的控制字体设置，所以它只是忽略你所做的设置。在第一行，它从分配的控件中获取字体，将画布字体设置为默认控件的字体：

```
Canvas.Font := TWinControlClass(Control).Font; 
```

***关于你的意图：***

请注意，标签链接不能使用自定义颜色，因为它们是由系统呈现的。只有两种变通方法可以更改它们，您可以设置用于链接字体渲染的系统颜色或完全由您自己解析和渲染标签标题，这使得`TLinkLabel`使用无用。

# java - Java 文件中的编码问题

> ID：10945500
> 
> 赞同：2
> 
> 时间：2012-06-08T08:35:19.343
> 
> 标签：java, character-encoding, diacritics

我在java中有String，它是包含变音符号的文件名。文件正确存储在 Win 7 Pro 磁盘上（元音变音等正确显示在资源管理器文件列表中）。我还尝试将文件名保存到文本文件，然后使用变音符号正确输出文件名。但是当我使用 File 中的方法 exists() 时，它说文件不存在。如果我尝试使用方法 createNewFile()，它会创建像 Ã¤.txt（最初是 ä.txt）这样的文件。我的设置可能有什么问题？我正在使用 Tomcat 6 和 Eclipse 来运行我的 Web 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:42:16.107

如果文件名将作为静态常量包含在源代码中，则执行代码的位置不会有所不同，但是当您从远程地址读取文件名时，它会产生显着差异。

默认情况下，每个 Java 实例都作为 Windows 上的默认字符集，这通常是“Cp1252”，在其他系统上通常是“UTF-8”。因此，从/向网络或文件系统读取或写入字符串的每个方法都使用默认字符集 - 只要您不使用明确指定字符集的方法版本。

因此，将文件名写入文件并不能说明一切，因为它是否正确显示取决于您使用的文本编辑器，而不是编写它的 Java 程序。

结论：检查您的代码并确保您明确设置了字符集。这`getBytes()`与 String 的方法以及每个将 Reader/Writer 实例连接到 InputStream/OutpuStream 的地方尤其相关。

# php - 为什么这个功能不起作用？strlen，用于循环的数组

> ID：10945503
> 
> 赞同：-1
> 
> 时间：2012-06-08T08:35:35.537
> 
> 标签：php, arrays, strlen

此函数通过遍历字符数组并检查是否有任何字符与允许的字符列表不匹配来检查特殊字符。这个功能有什么问题？如果能帮上忙，非常感谢！

假设 str_split_array($stringPassed); 完美运行（我 99% 确定它确实如此，我在其他各种功能中使用它）

```
 // returns true if a string has special characters
// $stringPassed = input string to split and check
// $checkWhiteSpace = check for whitespace, true or false
function hasSpecialCharacters($stringPassed, $checkWhiteSpace = true) {
    // Array of characters ALLOWED
    $allowedCharacters = array("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", 1, 2, 3, 4, 5, 6, 7, 8, 9, 0);
    $arrayLen = strlen($stringPassed);
    $array = str_split_array($stringPassed);
    for($i=0;$i<$arrayLen;$i++) {
        if(!in_array($array[$i], $allowedCharacters)) {
            return true;
        } else if($checkWhiteSpace==true && $array[$i]==" ") {
            return true;
        }
    }
    return false;
} 
```

再次感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T08:49:08.557

更好的解决方案是正则表达式。

`return (bool) preg_match("/[^0-9a-z".($allowWhiteSpace ? " ":"")."]/i", $stringPassed);`

`i`使其不区分**大小写**。

更多关于正则[表达式](http://www.regular-expressions.info/reference.html)。

我也改为`$checkWhiteSpace`消除`$allowWhiteSpace`歧义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:55:01.940

废弃该功能并使用 preg_match 代替，它更有效

```
function hasSpecialCharacters($stringPassed, $checkWhiteSpace = true)
{
    if($checkWhiteSpace)
    {
        $regex = "/^[a-z0-9 ]+$/" 
    }
    else
    {
        $regex = "/^[a-z0-9]+$/"
    }
    if(preg_match($regex, $stringPassed)
    {
        return true;
    }
    return false;
} 
```

这是您应该熟悉的[正则表达式备忘单。](http://www.addedbytes.com/download/regular-expressions-cheat-sheet-v1/png/)

# node.js - 在 process.exit() 之前完成时，不显示在 Node.js 子进程上使用 util.format 的输出

> ID：10945508
> 
> 赞同：1
> 
> 时间：2012-06-08T08:35:46.287
> 
> 标签：node.js

我确实有一个启动一个节点应用程序。我使用该`spawn()`方法而不是`fork()`创建子实例，因为有时我需要使用不同的节点命令行参数（例如调试）来启动子进程。

考虑以下示例：

***大师.js***

```
var child = require("child_process").spawn("node", ["child"]);
child.stdout.pipe(process.stdout, { end: false }); 
```

***child.js***

```
console.log("Hello World!");
console.log(require("util").format("Hello World2!"));
setTimeout(function(){
    console.log("Error!");
    console.log(require("util").format("Error2!"));
    process.exit(1);
},2000); 
```

运行***master.js***（在 Windows 上）时，实际输出为

```
Hello World!
Hello World2!
Error! 
```

“错误2！” 消息丢失，我不明白为什么。你知道这里出了什么问题吗？

提前致谢！

# azure - 为 Azure 网站预览配置新的分布式缓存

> ID：10945509
> 
> 赞同：0
> 
> 时间：2012-06-08T08:35:46.170
> 
> 标签：azure

**更新：**没关系，我找到了。它不是通过 Azure 门户完成的，而是在 Visual Studio 内的 Azure 项目属性对话框中完成的。

有人知道[Scott 在他的帖子中提到的](http://weblogs.asp.net/scottgu/archive/2012/06/07/meet-the-new-windows-azure.aspx)**新**分布式缓存功能（我不是在谈论 Azure AppFabric 缓存）可以为网站配置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:31:26.847

为那些可能想知道它是什么的人添加信息：

是的，“分布式缓存”是一个特定于实例的功能，可以在开发期间使用 Windows Azure June SDK 通过 Visual Studio 中的角色属性进行配置，如下面的屏幕截图所示：

![在此处输入图像描述](../Images/e5eec02d02563d2d572a78076dbf5ebc.png)

此功能仅适用于 Windows Azure 虚拟机和角色，但不适用于“共享模式下的 Windows Azure 网站（免费）”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T11:46:16.773

分发缓存在 Azure 网站免费或共享中不可用，因为您并不孤单。它应该成为可能的保留，但仍然不可用。不要忘记分发缓存仍处于预览阶段，因此一直在发展。

# java - Java Mail: sending email via gmail with TLS

> ID：10945511
> 
> 赞同：0
> 
> 时间：2012-06-08T08:35:52.947
> 
> 标签：java, email, gmail, jakarta-mail

I'm trying to send simple email with my java application, but when I will execute sending mail, I get just "220 2.0.0 Ready to start TLS" on console and nothing is happening later. Here is method code:

```
try
    {
        /** Recipient address **/
        String messageRecipient = "@live.com";

        String pass = "";
        /** sender address **/
        String messageSender = "@gmail.com";

        /** get my properties **/
        Properties properties = System.getProperties();
        properties.put("mail.smtp.auth", "true");
        properties.put("mail.smtp.starttls.enable", "true");
        properties.put("mail.smtp.host", "smtp.gmail.com");
        properties.put("mail.smtp.user", messageSender);
        properties.put("mail.smtp.password",  pass);
        properties.put("mail.debug", "true");
        properties.put("mail.smtp.debug", "true");
        properties.put("mail.smtp.port", "587");

        /** get default session object **/
        Session session = Session.getDefaultInstance(properties,// null);
                new javax.mail.Authenticator()
        {
            protected PasswordAuthentication getPasswordAuthentication()
            {
                return new PasswordAuthentication("@gmail.com", "");
            }
        });

        try
        {
            MimeMessage message = new MimeMessage(session);
            message.setFrom(new InternetAddress(messageSender));

            //set to: header field of the header
            message.addRecipient(Message.RecipientType.TO, 
                            new InternetAddress(messageRecipient));
            //set subject: header field
            message.setSubject("Welcome to java mail!");

            //send message
            Transport transport = session.getTransport("smtp");
            transport.connect("smtp.gmail.com", 587, messageSender, pass);
            transport.sendMessage(message, message.getAllRecipients());
            transport.close();

            System.out.println(Errors.MESSAGE_SENT_SUCCESSFULLY);
            return null;
        }
        catch(MessagingException mex)
        {
            return Errors.MESSAGE_NOT_SENT;
        }
    }
    catch(Exception e)
    {
        return Errors.FILE_NOT_FOUND;
    }
} 
```

And debug output in console:

```
 DEBUG: JavaMail version 1.4.5
    DEBUG: successfully loaded resource: /META-INF/javamail.default.providers
    DEBUG: Tables of loaded providers
    DEBUG: Providers Listed By Class Name:         {com.sun.mail.smtp.SMTPSSLTransport=javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSS        LTransport,Sun Microsystems, Inc],                         com.sun.mail.smtp.SMTPTransport=javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTranspo        rt,Sun Microsystems, Inc],         com.sun.mail.imap.IMAPSSLStore=javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Su        n Microsystems, Inc], com.sun.mail.pop3.POP3SSLStore=javax.mail.Provider[STORE,pop3s,com.sun.mail.pop3.POP3SSLStore,Su        n Microsystems, Inc], com.sun.mail.imap.IMAPStore=javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Sun                 Microsystems, Inc],         com.sun.mail.pop3.POP3Store=javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP3Store,Sun         Microsystems, Inc]}
    DEBUG: Providers Listed By Protocol:         {imaps=javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Sun Microsystems, Inc],         imap=javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Sun Microsystems, Inc],         smtps=javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Sun                 Microsystems, Inc],         pop3=javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP3Store,Sun         Microsystems, Inc],         pop3s=javax.mail.Provider[STORE,pop3s,com.sun.mail.pop3.POP3SSLStore,Sun         Microsystems, Inc],         smtp=javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun                 Microsystems, Inc]}
    DEBUG: successfully loaded resource: /META-INF/javamail.default.address.map
    DEBUG: getProvider() returning         javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]
    DEBUG SMTP: useEhlo true, useAuth true
    DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 587, isSSL false
    220 mx.google.com ESMTP e20sm6680361wiv.7
    DEBUG SMTP: connected to host "smtp.gmail.com", port: 587

    EHLO gadon-Komputer
    250-mx.google.com at your service, [83.22.91.238]
    250-SIZE 35882577
    250-8BITMIME
    250-STARTTLS
    250 ENHANCEDSTATUSCODES
    DEBUG SMTP: Found extension "SIZE", arg "35882577"
    DEBUG SMTP: Found extension "8BITMIME", arg ""
    DEBUG SMTP: Found extension "STARTTLS", arg ""
    DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
    STARTTLS
    220 2.0.0 Ready to start TLS
    DEBUG: getProvider() returning         javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]
    DEBUG SMTP: useEhlo true, useAuth true
    DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 587, isSSL false
    220 mx.google.com ESMTP et10sm6688757wib.2
    DEBUG SMTP: connected to host "smtp.gmail.com", port: 587

    EHLO gadon-Komputer
    250-mx.google.com at your service, [83.22.91.238]
    250-SIZE 35882577
    250-8BITMIME
    250-STARTTLS
    250 ENHANCEDSTATUSCODES
    DEBUG SMTP: Found extension "SIZE", arg "35882577"
    DEBUG SMTP: Found extension "8BITMIME", arg ""
    DEBUG SMTP: Found extension "STARTTLS", arg ""
    DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
    STARTTLS
    220 2.0.0 Ready to start TLS 
```

Can somebody tell me what's wrong with this? I read houndreds topics about javamail but I couldn't find answer for my problem.. Nothing is changing in output if I will change password.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:19:00.627

You can simplify your code using the [Gmail example in the JavaMail FAQ](http://www.oracle.com/technetwork/java/javamail/faq/index.html#gmail). (Don't set the port number, use the "smtps" protocol, and get rid of the Authenticator.) Also, [change getDefaultInstance to getInstance](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:05:22.963

if you don't I suggest you to use Spring to simply the Send Email process.

To send a simple email you have to write this:

```
 `import org.springframework.beans.factory.annotation.Autowired;
  import org.springframework.mail.MailException;
  import org.springframework.mail.MailSender;
  import org.springframework.mail.SimpleMailMessage;`
.........
@Autowired
private MailSender mailSender;

SimpleMailMessage mailMessage = new SimpleMailMessage();
            mailMessage.setTo("example@gmail.com");
            mailMessage.setFrom("myemail@gmail.com");
            mailMessage.setSubject(this.subject);
            mailMessage.setText(text.toString());
            try {
                this.mailSender.send(mailMessage);
                logger.info("Email inviata con successo");
            }
            catch (MailException ex) {
                // just log it and go on
                logger.warn("An exception occured when trying to send email", ex);
            } 
```

And in your applicationContext.xml

```
 <!-- MailSender used by EmailAdvice -->
    <bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
        <property name="host" value="${mail.host}"/>
        <property name="port" value="${mail.port}" />
        <property name="username" value="${mail.username}" />
        <property name="password" value="${mail.password}" />

        <property name="javaMailProperties">
           <props>
                  <prop key="mail.smtp.auth">true</prop>
                  <prop key="mail.smtp.starttls.enable">true</prop>
               </props>
        </property>
    </bean> 
```

For more info follow this simple tutorial [http://www.mkyong.com/spring/spring-sending-e-mail-via-gmail-smtp-server-with-mailsender/](http://www.mkyong.com/spring/spring-sending-e-mail-via-gmail-smtp-server-with-mailsender/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:59:20.660

Try by removing `properties.put("mail.smtp.starttls.enable", "true")`, change the port to 465 and add these two properties:

```
props.put("mail.smtp.socketFactory.port", "465");
props.put("mail.smtp.socketFactory.class",
            "javax.net.ssl.SSLSocketFactory"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T17:30:45.813

The below code is a simple implementation of Email using java, I wrote this after referring the docs of java mail API and it works perfectly..

```
import java.util.Properties;
import javax.mail.Message;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;
import javax.mail.PasswordAuthentication;
import javax.mail.Transport;

public class Email
{
public Email()
    {
try {
    String host = "smtp.gmail.com";
    String username = "youmailid@gmail.com";
    String password = "XXXXXX";
    String body = "This is the message body.";
    String subject = "This is the message subject."; 
    //Set the properties
    Properties props = new Properties();
    props.put("mail.smtps.auth", "true");
    // Set the session here
    Session session = Session.getDefaultInstance(props);
    MimeMessage msg = new MimeMessage(session);
    // set the message content here
      msg.setSubject(subject);
      msg.setText(body);
      msg.setFrom(new InternetAddress(username));
      msg.addRecipient(Message.RecipientType.TO, 
              new InternetAddress(username));
    Transport t = session.getTransport("smtps");

    t.connect(host, username, password);
    t.sendMessage(msg, msg.getAllRecipients());
        t.close();
    }
   catch (Exception e) {
   e.printStackTrace();
   }
 finally {

    }
     }
    public static void main(String[] args)
    throws Exception {
            new Email();
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-12T14:50:30.937

I am a bit late, but I faced a similar issue and wanted to post my feedback. Sometimes, the port is blocked by an antivirus. Avast for example does that.

# javascript - 像谷歌新闻这样的缩放事件

> ID：10945513
> 
> 赞同：0
> 
> 时间：2012-06-08T08:35:53.760
> 
> 标签：javascript, html, css, events, layout

我必须做出类似[Google News](https://news.google.co.in/?ar=1339141747)的缩放行为。当我们放大两三倍时，他的左侧边栏隐藏了。我们怎么能做到这一点？我所知道的是首先我们必须检测缩放事件。当我搜索 SO 并进行了一些谷歌搜索时，我开始知道 HTML-DOM 中不存在直接缩放事件。有一些方法可以这样做：

1.  使用`onresize`放大或缩小时会触发两次的事件。但是现在我们如何检测它是放大还是缩小。`onresize`一种方法是比较事件前后任何元素的维度。但除此之外还有什么别的吗。

我试图找到谷歌新闻是如何实现它的，但并没有太大的收获。请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:40:19.980

您可以`@media`在 CSS 中使用查询。例如，如果您的浏览器`width`是`1024`，则显示一个内容，但如果较少，则不显示。一个代码是：

```
@media (max-width: 500px) {
    .left-sidebar {
        display: none;
    }
}
@media (min-width: 500px) {
    .left-sidebar {
        display: block;
    }
} 
```

IE 7 和 IE 8 尚不支持它！在这种情况下，您需要使用 JavaScript 或 jQuery 来触发。试试看。：） 希望能帮助到你！:)

在此处查看基本示例[Media Query Demo](http://webdesigntutsplus.s3.amazonaws.com/tuts/221_responsive_widget/Media-Query-Files-DEMO/index.html)。调整浏览器宽度并检查底部。

的CSS是：

```
@media only screen and (min-width: 320px) {
    body:after {
        content: "320 to 480px";
        background-color: hsla(90,60%,40%,0.7);
    }
}
@media only screen and (min-width: 480px) {
    body:after {
        content: "480 to 768px";
        background-color: hsla(180,60%,40%,0.7);
    }
}
@media only screen and (min-width: 768px) {
    body:after {
        content: "768 to 1024px";
        background-color: hsla(270,60%,40%,0.7);
    }
}
@media only screen and (min-width: 1024px) {
    body:after {
        content: "1024 and up";
        background-color: hsla(360,60%,40%,0.7);
    }
} 
```

# firebird - 无法在 php-ubuntu 服务器 12.04 中显示 firebird 数据

> ID：10945516
> 
> 赞同：0
> 
> 时间：2012-06-08T08:36:03.660
> 
> 标签：firebird, internal-server-error, ubuntu-server

我的 dataTable 无法显示来自 firebird 数据库的数据。这是我搬到新服务器后发生的（旧服务器有硬盘损坏）。所有php数据和mysql数据库已经备份然后恢复到新服务器。但是，我的一个 php 页面无法显示来自 firebird 数据库的数据（来自另一台服务器）。

奇怪的是为什么在我的旧服务器上它可以显示而在新服务器上却不能？

我的服务器`os`是`ubuntu server 12.04`然后我尝试：

`sudo apt-get install php5-firebird --> i get firebird2.5`

但是，我的 php 文件仍然无法显示 firebird 数据。 `500 internal server error`

我的旧服务器是`ubuntu server 10.04`并且已经安装了`firebird2.1`. 有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:08:24.673

我可以解决这个问题，如果为这种情况移动任何东西到新服务器，我必须准备：

1.  sudo apt-get install php5-firebird
2.  sudo apt-get install firebird2.5-server-common
3.  sudo apt-get install firebird2.5-classic
4.  须藤纳米/etc/apache2/httpd.conf
5.  添加ServerName localhost，保存退出
6.  须藤 /etc/init.d/apache2 重启
7.  重新加载页面

然后，一切都可以正常工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:00:37.573

sudo apt-get install php5-interbase

# python - 使用 unix 将 .py 文件转换为 .exe

> ID：10945517
> 
> 赞同：0
> 
> 时间：2012-06-08T08:36:21.603
> 
> 标签：python

我使用的是 unix 的 c shell。我在 python 中创建了一个带有文件扩展名的脚本`.py`。
现在我想将此`.py`文件转换为`.exe`unix 的 c shell 中的文件。
我发现该`py2exe`软件包不适用于 csh，但`freeze.py`我可以用它来转换说谷歌。
但我无法在我的情况下使用它。当我使用`python freeze.py hello.py` 它时会引发错误：`freeze.py not found` 在 UNIX 中是否有其他方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:09:22.397

简单回答是不”。虽然有一个选项：将 WINE 与[PyInstaller](http://www.pyinstaller.org/)一起使用。

> PyInstaller 是一个在 Windows、Linux、Mac OS X、Solaris 和 AIX 下将 Python 程序转换（打包）为独立可执行文件的程序。与类似工具相比，它的主要优点是 PyInstaller 可以与自 2.2 以来的任何 Python 版本一起使用，由于透明压缩，它可以构建更小的可执行文件，它是完全多平台的，并且使用操作系统支持来加载动态库，从而确保完全兼容。

# java - 在构造函数中启动线程

> ID：10945520
> 
> 赞同：1
> 
> 时间：2012-06-08T08:36:30.910
> 
> 标签：java, concurrency

在[Brian Goetz 关于安全施工技术的文章中，](http://www.ibm.com/developerworks/java/library/j-jtp0618/index.html#code4)您可以阅读：

> [...] 通常当一个对象拥有一个线程时，**要么该线程是一个内部类，要么我们将 this 引用传递给它的构造函数**（或者该类本身扩展了 Thread 类）。如果一个对象要拥有一个线程，最好该对象提供一个 start() 方法，就像 Thread 一样，从 start() 方法而不是从构造函数启动线程。虽然这确实通过接口暴露了类的一些实现细节（例如可能存在的自有线程），这通常是不可取的，但在这种情况下，从构造函数启动线程的风险超过了实现隐藏的好处。

我想使用以下代码应该没有任何问题。因为它不是内部类，我也没有传递`this`. 但我想确定。

```
private Controller controller;
private View view;

public Facade() {
    view = new View();
    controller = new Controller(view);
    controller.start();
} 
```

我不断收到 NetBeans 警告......那么这段代码是安全的还是不安全的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:46:23.643

主要原因不在构造函数中启动线程 - 在创建“this”之前（在执行构造函数之后）不要暴露“this”。在您的代码中，我看不到这样的代码：

```
new Thread(this); 
```

所以应该没问题。

# perl - 从我用 Perl 创建的 Excel 2007 文件中读取标题行时出现问题

> ID：10945523
> 
> 赞同：3
> 
> 时间：2012-06-08T08:36:44.927
> 
> 标签：perl, excel, excel-2007, solaris

我在合并两个动态创建的 Excel 2007 文件时遇到问题。我的文件是使用Solaris 上的 Perl 模块**Excel::Writer::XLSX创建的。**

假设我有两个文件，fileA.xlsx 和 fileB.xlsx。现在我想将它们合并在一起（fileA + fileB => fileC）。此时实际上不可能将 fileB*附加*到 fileA。这是 Excel::Writer::XLSX 的限制，它只能创建新文件。

这两个 .xlsx 文件都可以在 Excel 2007、LibreOffice 3（在 linux 上）和（在 Microsoft 的 xlsx 到 xls 转换器的帮助下）甚至在 Excel 2003 中打开而不会出现投诉。

但是，当我用 perl 打开它们时（使用模块**Spreadsheet::XLSX**），标题行（第 0 行）的内容总是被跳过；

```
# ...
foreach my $infile (@infiles) {
    my $excel = Spreadsheet::XLSX->new($infile);
    my $i     = 0;

    foreach my $sheet ( @{ $excel->{Worksheet} } ) {

        printf( "Infile '$infile', Sheet $i: %s\n", $sheet->{Name} );

        $sheet->{MaxRow} ||= $sheet->{MinRow};

        print "$infile: " . $sheet->{MaxRow} . " rows\n";
        print "data starts at row: " . $sheet->{MinRow} . ". \n";

        next unless $i == 0;    # only copy data from the first sheet (for speed)
        my $start_row = $sheet->{MinRow};

        foreach my $row ( $start_row .. $sheet->{MaxRow} ) {

            $sheet->{MaxCol} ||= $sheet->{MinCol};
           foreach my $col ( $sheet->{MinCol} .. $sheet->{MaxCol} ) {
              my $cell = $sheet->{Cells}[$row][$col];

              if ($cell) {

              # do something with the data
              # ...
              # write to outfile
              $excel_writer->sheets(0)->write($dest_row, $col, $cell->{Val} )
              }
           }

        }
  }
} 
```

现在，这个代码片段的输出总是

```
data starts at row: 1\. 
```

但这不是真的，它从第 0 行开始。如果我手动从第 0 行读取数据，$cell 是未定义的（尽管它不应该是）。

有趣的是，当我在 Microsoft Excel 中打开文件并进行简单更改（例如，通过在标题行中的一个单元格值中添加一个空格）并保存文件时，代码找到了标题行以上。

```
data starts at row: 0\. 
```

顺便说一句，当我在 LibreOffice 中打开、更改、保存文件时，当我使用上面的代码重新读取日期值时，会出现许多关于日期值的警告。（因此，LibreOffice 似乎稍微错误地保存了日期时间值）。

生成文件的代码如下所示（注意：一些变量是在这个子之外定义的）：

```
sub exportAsXLS {
    #require Spreadsheet::WriteExcel;
    require Excel::Writer::XLSX;
    my ( $data, $dir, $sep, @not2export ) = @_;
    my $val;

    my $EXCEL_MAXROW = 1048576;

return undef unless $data;
return "."   unless scalar @$data > 0;

    my $time = time2str( "%Y%m%d_%H%M%S", time() );
    my $file = "$outdir/$dir/${host}_${port}-${time}.xlsx";

    #my $workbook  = Spreadsheet::WriteExcel->new($file);
    my $workbook  = Excel::Writer::XLSX->new($file);
    $workbook->set_optimization();
    my $worksheet = $workbook->add_worksheet();

    # Set the default format for dates.
    #my $date_formatHMS = $workbook->add_format( num_format => 'mmm d yyyy hh:mm AM/PM' );
    #my $date_formatHMS = $workbook->add_format( num_format => 'yyyy-mm-ddThh:mm:ss.sss' );
    my %formats;
    $formats{date_HM}  = $workbook->add_format( num_format => 'yyyy-mm-ddThh:mm' );
    $formats{date_HMS} = $workbook->add_format( num_format => 'yyyy-mm-ddThh:mm:ss' );
    $formats{num}      = $workbook->add_format();
    $formats{num}->set_num_format();
    $formats{headline} = $workbook->add_format();
    $formats{headline}->set_bold();
    $formats{headline}->set_num_format('@');
# Format as a string. use the Excel text format @:
# Doesn't change to a number when edited
$formats{string} = $workbook->add_format( num_format => '@' );
$worksheet->set_row( 0, 15, $formats{headline} );
    my $row = 0;
    my $col = 0;

for ( my $r = -1 ; $r < @$data && $r < $EXCEL_MAXROW ; $r++ ) {

    for ( my $i = 0 ; $i < @$column ; $i++ ) {
        next if grep( $_ eq $column->[$i], @not2export );
        my $val = $data->[$r]{ $column->[$i] };
        my $t   = int $type->[$i];
        if ( $r < 0 ) {

            #warn " type: $type->[$i] , ";
            # Erste Zeile = Spaltennamen ausgeben
            $worksheet->write_string( $row, $col++, $column->[$i], $formats{string});
            #$worksheet->write_comment( 0, 0, "\x{263a}" );       # Smiley
            #$worksheet->write( $row, $col++, $column->[$i], $formats{headline} );
        } elsif ( ( $t == 11 ) or ( $t == 9 ) ) {

            # 11 - Der Wert ist ein Datum, im SHORT Format, 9- long
            $val = time2str( "%Y-%m-%dT%H:%M:%S", str2time( $data->[$r]{ $column->[$i] } ) );
            $worksheet->write_date_time( $row, $col++, $val, $formats{date_HMS} );

        } else {
            $worksheet->write( $row, $col++, $val );
        }
    }
    $col = 0;
    $row++;
}

return $file; 
```

}

文件之间的区别如下。 ![xml文件差异](../Images/49d99a86748e6ebaf3c848a59a173fcd.png)

左边是 Excel::Writer::XLSX 生成的文件。右边是 MS Excel 2003 在对标题行进行细微更改后生成的文件。行标题数据被重构，外部化到不同的文件 sharedStrings.xml

看起来像这样。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="5" uniqueCount="5">
  <si>
    <t>SITE</t>
  </si>
  <si>
    <t>LOG_DATE</t>
  </si>
  <si>
    <t>KTZI201_WF_TEMPERATUR</t>
  </si>
  <si>
    <t>KTZI300_TEMP_RESERVOIR</t>
  </si>
  <si>
    <t>XPEDITION</t>
  </si>
</sst> 
```

如果 .xlsx 文件的格式如图右半部分所示，Spreadsheet::XLSX 可以读取标题，但当格式为左半部分时会跳过标题行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:56:40.067

当我针对此 Excel::Writer::XLSX[示例程序](http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX/Examples.pm#Example%3a_a_simple.pl)的输出运行您的程序时，它会正确报告第一行中的数据（行 == 0）：

```
Infile 'a_simple.xlsx', Sheet 0: Sheet1
a_simple.xlsx: 10 rows
data starts at row: 0\. 
```

也许您应该仔细检查生成输入文件的程序。

此外，请确保您使用的是最新版本的[Excel::Writer::XLSX](http://search.cpan.org/dist/Excel-Writer-XLSX/)。

# perl - 如何使用 Data::Section？

> ID：10945524
> 
> 赞同：2
> 
> 时间：2012-06-08T08:36:50.350
> 
> 标签：perl, perl-module

我刚刚找到了[Data::Section](http://p3rl.org/Data%3a%3aSection)，我对它很感兴趣。不幸的是，我根本无法`package Letter::Resignation`运行该页面上的示例。

那里有 Data::Section 的工作示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:47:33.093

好吧，在网上进行了一些不那么简单的搜索之后，我终于设法在网上找到了一个（我猜也是唯一的）我可以在这里阅读的示例：

*   [RJBS Advent Calendar 2009 - 像 <DATA>，只是不那么愚蠢](http://advent.rjbs.manxome.org/2009/2009-12-09.html)

最后向我解释了如何设置 Data::Section - 诀窍是它总是需要一个包名引用。最后，对于扩展部分中的变量，[如何扩展文本字符串中的变量？- perlmonks.org](http://www.perlmonks.org/?node=How%20can%20I%20expand%20variables%20in%20text%20strings%3F)非常有用。

因此，如果您不想使用包名称，这里是一个 MWE：

```
use strict;
use warnings;
use utf8;
use charnames ':full';

# sudo perl -MCPAN -e shell
# install Data::Section

use Data::Section -setup; 

my $name = "testing \t escapes \n variable";

my $sections = main::->merged_section_data;
for my $filename (keys %$sections) {
  printf "== %s ==\n%s\n", $filename, main::->section_data($filename);
}
my $template = main::->section_data ("test_file");

# expands variables in the template as well!!
$$template =~ s/(\$\w+)/$1/eeg;
die if $@;                  # needed on /ee, not /e

print $$template;

__DATA__

__[ test_file ]__
  \t testing \r escapes \n data::section \t

    Here

  --
  {{ $name }}

__END__ 
```

如果您使用包名，则略有不同：

```
package aPerlTest;

use strict;
use warnings;
use utf8;
use charnames ':full';

# sudo perl -MCPAN -e shell
# install Data::Section

use Data::Section -setup; 

my $name = "testing \t escapes \n variable";

my $sections = aPerlTest::->merged_section_data;
for my $filename (keys %$sections) {
  printf "== %s ==\n%s\n", $filename, aPerlTest::->section_data($filename);
}
my $template = aPerlTest::->section_data ("test_file");

# expands variables in the template as well!!
$$template =~ s/(\$\w+)/$1/eeg;
die if $@;                  # needed on /ee, not /e

print $$template;

__DATA__

__[ test_file ]__
  \t testing \r escapes \n data::section \t

    Here

  --
  {{ $name }}

__END__ 
```

在这两种情况下，终端输出都是：

```
$ perl aPerlTest.pl
== test_file ==
SCALAR(0x9f079d0)
  \t testing \r escapes \n data::section \t

    Here

  --
  {{ testing     escapes 
 variable }} 
```

希望这对某人有所帮助 - 干杯！

# string - 在日志文件中查找字符串的 Windows 脚本

> ID：10945527
> 
> 赞同：0
> 
> 时间：2012-06-08T08:37:07.433
> 
> 标签：string, find

我有 IBM Cognos TM1 应用程序在 Windows Server 2008 上作为服务运行。当我启动服务时，TM1 将在“D:\TM1\log\”上写入一个名为“tm1server.log”的日志文件。TM1 会持续写这个日志，直到服务准备好，一般需要 3 个小时才能服务准备好。当服务就绪时，TM1 会在日志中写入“TM1 Server is ready”。

我想制作一个脚本来持续检查日志文件，直到写入字符串“TM1 Server is ready”。找到字符串后，我希望脚本运行另一个将向我发送电子邮件的脚本。我已经制作了发送电子邮件的脚本。

有谁能够帮我？

谢谢并恭祝安康，

克里斯

- 编辑 -

我使用 findstr 命令搜索字符串：

findstr /d:d:\TM1\log\ "TM1 服务器准备就绪" "D:\TM1\log\tm1server.log" >> result.log

但 result.log 包含 tm1server.log 的所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:06:38.967

在我的服务器上，每次服务器启动时都会写入“TM1 服务器准备就绪”。所以我在一个文件中有很多“TM1 服务器已准备好”。

您可以测试最后返回的“TM1 服务器已准备好”，看看它何时发生，看看它是否发生在过去 5（或其他）小时内，如下所示：

```
PS E:\TM1_Server_Logs> (Get-Date(select-string .\tm1server.log -pattern '(?<timestamp>\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}).*TM1 server is ready' | select -expand Matches | foreach {$_.groups["timestamp"].value} | Get-Date -format "yyyy-MM-dd HH:mm:ss" | Select-Object -last 1)).AddHours(-5) -ge (Get-Date).AddHours(-5) 
```

这是一个很长的单行，但它应该工作。如果它返回 true，您可以决定下一步该做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-18T14:24:13.317

你也可以试试

```
findstr /C:"your token to find" "C:\targetFile.log" 
```

# facebook - facebook open graph action 仅显示在“最近的活动”中，而不是单独的帖子

> ID：10945533
> 
> 赞同：6
> 
> 时间：2012-06-08T08:37:32.583
> 
> 标签：facebook, facebook-graph-api

我成功地遵循了开放图形对象教程（https://developers.facebook.com/docs/opengraph/tutorial/）并设法在我的时间线上发布了一个开放图形对象。

但是，该帖子仅出现在“最近活动”框下，其中还包括“喜欢”和“成为朋友”等其他活动

我实际上如何设法使帖子在其自己的提要框中成为单独的帖子（就像如果我更新我的状态，只会有一个单独的帖子用于我的状态）？我认为这是可能的，因为每当我对 pinterest 发表评论时，它都会为我的评论操作显示一个单独的框......

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:59:20.307

我想你忘了填写`Aggregations`开放图表设置。 ![在此处输入图像描述](../Images/6f24ac502840e1c8f313f3b90f921a5f.png)

在开放图形设置上设置聚合非常简单。

1.  给出聚合的名称
2.  选择布局
3.  提供字幕
4.  并设置其他东西
5.  立即保存 发布一些帖子并检查您的时间线 :) ![在此处输入图像描述](../Images/914b31e697a1f820f9d67213a13fdfe1.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T23:41:09.863

Open Graph 活动最初仅显示在“最近的活动”部分下。一旦应用程序产生了可观的流量，它将开始出现在时间线上。开发人员的目标应该是专注于提高应用程序的质量，使其更具吸引力，从而吸引更多用户。

# javascript - javascript document.anchors.length 在 Firefox 中返回 1

> ID：10945536
> 
> 赞同：3
> 
> 时间：2012-06-08T08:37:49.653
> 
> 标签：javascript, firefox, google-chrome

我正在尝试使用 javascript 在页面中运行 6 个锚点的列表，以对它们进行一些操作。但是，循环没有被执行，因为 anchors.length 返回 1。以下是我的代码片段：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script type="text/javascript">
function load()
{
alert(document.anchors.length);
for (i = 0; i <= document.anchors.length; i++)
    {
        alert(document.anchors[i].innerHTML);
    }
}
</script>
</head>
<body onload="load()">
<div>        
<ul>
<a id="sectionlinks" href="page1.html">link 1</a></li>
<a id="sectionlinks" href="page2.html">link 2</a></li>
<a id="sectionlinks" href="page3.html">link 3</a></li>
<a id="sectionlinks" href="page4.html">link 4</a></li>
<a id="sectionlinks" href="page5.html">link 5</a></li>
<a id="sectionlinks" href="page6.html">link 6</a></li>
<ul>
</div>
</body>
</html> 
```

这在 IE9 中运行良好。但是在 Firefox 和 Chrome 中，它是说计数等于 1。如果有人能指出我在这里错过的内容，那就太好了。

正如您可能已经猜到的那样，我是 JS 的新手，并且正在学习它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T08:42:07.063

至少，你正在学习正确的方法，继续前进！

您做错的是`document.anchors`指锚链接（使用`name`属性的旧锚链接），而不是普通链接。例如，以下是一个锚点：

```
<a name="tab"></a> 
```

以下是一个链接：

```
<a href="/some/link"></a> 
```

链接位于`document.links`HTMLCollection 中，因此您可以使用`document.links.length`.

如果要获取所有`<a>`元素，无论它们的属性是什么，都可以使用`document.getElementsByTagName( 'a' ).length`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T08:42:03.053

[请参阅MDN 文档](http://dorward.me.uk/tmp/anchor.html)中的注释：

> 出于向后兼容的原因，返回的锚点集仅包含使用 name 属性创建的锚点，而不包含使用 id 属性创建的锚点。

该属性旨在找到要链接的锚点，而不是从中链接。

用于`document.getElementsByTagName('a')`获取`<a>`元素的集合或[`document.links`](https://developer.mozilla.org/en/DOM/document.links)获取那些和`<area>`s

# c# - 永远不会达到与 WebRequest 相关的 AsyncCallback

> ID：10945540
> 
> 赞同：0
> 
> 时间：2012-06-08T08:37:58.997
> 
> 标签：c#, asp.net, asynchronous, .net-3.5

我有一个 ASPX 页面，它应该异步检索一些内容（一些纯文本数据），并在操作之前/期间/之后写一些东西。

目前，我可以到达“期间”步骤，但之后页面内容不再更改。

大问题是由于基础设施（错误）配置和不允许运行远程调试工具，我**无法**执行**任何类型的调试，我必须依靠发布并看看会发生什么......**

后面的代码看起来像这样（这是一个 .NET 3.5（更改目标框架*不是*一个选项）项目在 VS2008 下创建，后来升级到 VS2010）

```
void Page_Load()
{
    myLabel = "Preparing to fetch content ...";
    FetchContent();
}

void FetchContent()
{
    try {
        // "http://myUrl" returns text with header 'Content-disposition: inline;'
        // If called directly, Text can be seen in the browser alright.
        WebRequest request = WebRequest.Create("http://myUrl");
        myLabel = "Fetching ...";
        request.BeginGetResponse(new AsyncCallback((result)=>
        {
            //EXCEPTION HERE: 401 Unauthorized ??? url works via browser!
            WebResponse resp = request.EndGetResponse(result);

            StreamReader stream = new StreamReader(resp.GetResponseStream());
            myLabel = "Done";
        }        
    } catch {myLabel = "Request KO"; }
} 
```

在 ASPX 代码中，`myLabel`简单显示：

```
<body>
    <pre><%=myLabel %></pre>
</body> 
```

如果从浏览器调用，该 url 响应相当快，但在此代码中`myLabel`从未显示`Done.`，它停留在`Fetching...`文本上，就像从未触发回调一样。

我在这里遗漏了一些明显的东西吗？

**更新**

仔细检查发现`EndGetResponse`返回一个`401 Unauthorized`状态码。如果我通过浏览器调用完全相同的 url，它可以完美地工作！一些现在更集中的搜索现在让我找到了解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:56:09.553

在找到`401 Unauthorized`响应中的状态代码后，我设法在 SO 上找到了其他答案，这让我解决了我的（事实证明）微不足道的问题，添加了这个：

```
request.UseDefaultCredentials = true; 
```

# python-3.x - Python3 urllib 图像检索

> ID：10945542
> 
> 赞同：4
> 
> 时间：2012-06-08T08:38:04.560
> 
> 标签：python-3.x, urllib

我正在编写一个小的 Python 脚本来通过谷歌图像抓取图像。我已经设法将我想要的图像的网址放在一个方便的列表中。现在，我只需要抓住它们......

对于每个图像 url，我这样做：

```
 print("Retrieving:{0}".format(sFinalImageURL))
    sExt = sFinalImageURL.split('.')[-1]
    #u = urllib.request.urlopen(sFinalImageURL)
    try:
        u = urllib.request.urlopen(sFinalImageURL)
    except:
        print("error: cannot retrieve image")
        continue
    raw_data = u.read()
    print("read {0} bytes".format(len(raw_data)))
    u.close()
    global sImagesFolder
    try:
        f = open("{0}/{1}_{2}.{3}".format(sImagesFolder,sImage,i,sExt),'wb')
        f.write(raw_data)
        f.close()
    except:
        print("couldn't write to {0}/{1}_{2}.{3}".format(sImagesFolder,sImage,i,sExt))
    print() 
```

以下是我遇到的问题：

即使我可以直接在浏览器中打开 URL，尝试打开一些 URL 也会给我 403。因此，图像服务器不喜欢 HTTP 请求标头中的某些内容……有什么想法吗？

这是一些输出：

```
Retrieving:http://upload.wikimedia.org/wikipedia/commons/thumb/4/43/Timba%2B1.jpg/220px-Timba%2B1.jpg

error: cannot retrieve image

Retrieving:http://upload.wikimedia.org/wikipedia/commons/thumb/2/26/YellowLabradorLooking_new.jpg/260px-YellowLabradorLooking_new.jpg

error: cannot retrieve image
Retrieving:http://1.bp.blogspot.com/-7SsJ1n3RdoA/Tf07NOgD5nI/AAAAAAAAABo/tl8qLLIU01Y/s1600/english-shepherd-dog-0003.jpg

read 11123 bytes

Retrieving:http://completedogfood.net/wp-content/uploads/2010/07/complete-dog-food.bmp
read 419630 bytes 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T09:47:14.347

似乎维基百科只允许访问真实的浏览器。
这个问题可以通过指定一个`User-Agent`真实浏览器的字符串来解决，因为 Python默认`urllib`发送类似的东西`Python-urllib/3.2`。

这是一个有效的示例（使用`User-Agent`我使用的浏览器字符串）：

```
url = 'http://upload.wikimedia.org/wikipedia/commons/thumb/4/43/Timba%2B1.jpg/220px-Timba%2B1.jpg'
user_agent = 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Ubuntu/12.04 Chromium/18.0.1025.168 Chrome/18.0.1025.168 Safari/535.19'
u = urllib.request.urlopen(urllib.request.Request(url, headers={'User-Agent': user_agent})) 
```

# jquery - jQuery Mobile+PhoneGap listViews：列表视图属性问题 Auto-Divider 和 Img Source 无法正常工作

> ID：10945546
> 
> 赞同：0
> 
> 时间：2012-06-08T08:38:34.670
> 
> 标签：jquery, android, iphone, jquery-mobile, cordova

我已经使用 jQuery Mobile 和 Phone-Gap 实现了一个 iPhone 应用程序。

我需要两个要求：

**1.按字母顺序设置分隔符（使用自动分隔符）** ![在此处输入图像描述](../Images/b2cc14ef6f946a62c564e15d94659517.png)

**2.在行的左侧添加一个图像视图（使用img src="egg.jpg"）**

![在此处输入图像描述](../Images/009eb1be654a3b81e1a7bde1c525f45e.png)

**1.自动分配器：-**

*`I used list-divides A,F,J,R for this table image`* *它适用于* **少量数据** **自动分割器**。***`but for large amount of data we need to use`***

 **所以，**我使用 AutoDividers**作为设置 deviders 的最佳选项，**但它不起作用**。

*我已经使用 listodividers 获得了图表中显示的上述格式*

```
<ul data-role="listview" data-autodividers="true" class="ui-listview">
      <li><a href="astra.html">Astra</a></li>
      <li><a href="zappa.html">Frank Zappa</a></li>
      <li><a href="tull.html">Jethro Tull</a></li>
      <li><a href="radiohead.html">Radiohead</a></li>
      <li><a href="who.html">The Who</a></li>
    </ul> 
```

**2\. 图片来源**

我已将***`<img src="egg.jpg"/>`***图像用作如下设置的最佳选项，**但它不起作用。**

```
<ul data-role="listview" data-autodividers="true" class="ui-listview">
                        <li><img src="egg.jpg"/> 
                            <a href="#egg" data-panel="main">Egg......</a>
                        </li>
                        <li><img src="egg.jpg"/>  
                            <a href="#egg" data-panel="main">Egg......</a>
                        </li>
                        <li><img src="egg.jpg"  class="ui-li-icom"/>  
                            <a href="#egg" data-panel="main">Egg......</a> 
                        </li>
                        <li><img src="album-bb.jpg" class="ui-li-thumb"/>
                            <a href="#egg" data-panel="main">Egg......</a>
                        </li>
                    </ul> 
```

图像以不同格式显示在文本或单元格上方，如列表项中所述

**`Why these are not working for properly my app......?`**

我使用**了 xcode 4.1**

**用于 phoneGap 的**Cordova 1.7.0****

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T09:32:49.283

像这样使用

```
<li>
     <a href="#egg" data-panel="main">
         <img src="egg.jpg"/>  
         <p>Egg......</p>
     </a>
 </li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:06:21.593

我认为您的问题与PhoneGap 无关。我建议您在 Chrome 或 Firefox 等浏览器中浏览您的页面，并使用开发人员工具检查您的 CSS。如果它在那里工作，然后在应用程序中尝试。****

# visual-studio-2010 - VS 2010 在使用运行时库选项多线程 DLL (/MD) 时给出错误 LNK2001

> ID：10945549
> 
> 赞同：1
> 
> 时间：2012-06-08T08:38:51.137
> 
> 标签：visual-studio-2010, dynamic-linking

我有一个包含 9 个项目的解决方案。这些项目使用的是 Boost 1.49，我已经使用共享和静态运行时链接选项为 VS2010 构建了发布和调试模式。在发布模式下，当我编译所有运行时库选项设置为**多线程 (/MT)**的项目时，它编译得很好。但是当我使用设置为**Multi-threaded DLL (/MD) 的**运行时库选项时，我得到了很多链接错误。

仅供参考，在 9 个项目中，8 个项目的“配置类型”设置为**静态库 (.lib)**，这 8 个项目中的一些项目依赖于其中的其他项目。**当我使用设置为Multi-threaded DLL (/MD) 的**Runtime Library 选项独立构建这 8 个项目时，它们编译得很好。

但是当我尝试使用**/MD**选项编译唯一的其他项目时，我得到了链接错误。此项目的“配置类型”设置为**动态库 (.dll)**。这个项目正在使用所有其他 8 个项目的 .lib 文件来创建它的 .dll 文件。

为方便起见，我提供了显示错误[因字符限制而截断]的构建输出：

```
8>BaseMulti.lib(src10.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>PAL.lib(src11.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>Netmulti.lib(src12.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src13.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src14.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>libboost_thread-vc100-mt-1_49.lib(thread.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>StringPrep.lib(src15.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src16.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src17.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src18.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src19.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src20.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src21.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src22.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src23.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src24.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src25.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src26.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src27.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src28.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src29.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src30.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src31.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src32.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src33.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src34.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src35.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src36.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src37.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src38.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src39.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>PAL.lib(src40.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>PAL.lib(src41.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src42.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>yyyyy.lib(src43.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>PAL.lib(src44.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>PAL.lib(src45.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>PAL.lib(src46.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>PAL.lib(src47.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>src48.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>BaseMulti.lib(TextUtil.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>BaseMulti.lib(tstring.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>PAL.lib(src49.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)" (__imp_?_Xlength_error@std@@YAXPBD@Z)
8>Netmulti.lib(src4.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>Netmulti.lib(src5.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>Netmulti.lib(src1.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>asyncRes.lib(ares_process1.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>Netmulti.lib(src8.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>Netmulti.lib(src2.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>Netmulti.lib(src3.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>PAL.lib(src11.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>Netmulti.lib(src12.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>Netmulti.lib(src6.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>Netmulti.lib(src7.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>libboost_thread-vc100-mt-1_49.lib(thread.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>StringPrep.lib(src15.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>BaseMulti.lib(Base64.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>BaseMulti.lib(src10.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src17.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src18.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src13.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src14.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src21.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src22.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src23.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src16.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src25.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src26.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src27.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src20.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src29.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src30.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src31.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src24.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src33.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src34.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src35.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src28.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src36.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src37.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src38.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src32.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>PAL.lib(src40.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>PAL.lib(src41.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src42.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>yyyyy.lib(src43.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>PAL.lib(src44.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>PAL.lib(src45.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>PAL.lib(src46.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>PAL.lib(src47.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>src48.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>BaseMulti.lib(TextUtil.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>BaseMulti.lib(tstring.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>PAL.lib(src49.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)" (__imp_?_Xout_of_range@std@@YAXPBD@Z)
8>BaseMulti.lib(TextUtil.obj) : error LNK2001: unresolved external symbol __imp__toupper
8>BaseMulti.lib(tstring.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: class std::basic_ostream<char,struct std::char_traits<char> > & __thiscall std::basic_ostream<char,struct std::char_traits<char> >::flush(void)" (__imp_?flush@?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV12@XZ)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: class std::basic_ostream<char,struct std::char_traits<char> > & __thiscall std::basic_ostream<char,struct std::char_traits<char> >::flush(void)" (__imp_?flush@?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV12@XZ)
8>BaseMulti.lib(tstring.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: void __thiscall std::basic_ostream<char,struct std::char_traits<char> >::_Osfx(void)" (__imp_?_Osfx@?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEXXZ)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: void __thiscall std::basic_ostream<char,struct std::char_traits<char> >::_Osfx(void)" (__imp_?_Osfx@?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEXXZ)
8>BaseMulti.lib(tstring.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) bool __cdecl std::uncaught_exception(void)" (__imp_?uncaught_exception@std@@YA_NXZ)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) bool __cdecl std::uncaught_exception(void)" (__imp_?uncaught_exception@std@@YA_NXZ)
8>BaseMulti.lib(tstring.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: void __thiscall std::basic_ios<char,struct std::char_traits<char> >::setstate(int,bool)" (__imp_?setstate@?$basic_ios@DU?$char_traits@D@std@@@std@@QAEXH_N@Z)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: void __thiscall std::basic_ios<char,struct std::char_traits<char> >::setstate(int,bool)" (__imp_?setstate@?$basic_ios@DU?$char_traits@D@std@@@std@@QAEXH_N@Z)
8>BaseMulti.lib(tstring.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: __int64 __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::sputn(char const *,__int64)" (__imp_?sputn@?$basic_streambuf@DU?$char_traits@D@std@@@std@@QAE_JPBD_J@Z)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: __int64 __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::sputn(char const *,__int64)" (__imp_?sputn@?$basic_streambuf@DU?$char_traits@D@std@@@std@@QAE_JPBD_J@Z)
8>BaseMulti.lib(tstring.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: int __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::sputc(char)" (__imp_?sputc@?$basic_streambuf@DU?$char_traits@D@std@@@std@@QAEHD@Z)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: int __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::sputc(char)" (__imp_?sputc@?$basic_streambuf@DU?$char_traits@D@std@@@std@@QAEHD@Z)
8>yyyyy.lib(src20.obj) : error LNK2001: unresolved external symbol __imp__puts
8>libboost_thread-vc100-mt-1_49.lib(thread.obj) : error LNK2001: unresolved external symbol __imp___beginthreadex
8>PAL.lib(PALthread.obj) : error LNK2001: unresolved external symbol __imp___beginthreadex
8>StringPrep.lib(StringPrepWithSaslPrepProfile.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: void __thiscall std::_Container_base0::_Orphan_all(void)" (__imp_?_Orphan_all@_Container_base0@std@@QAEXXZ)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: virtual __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::~basic_streambuf<char,struct std::char_traits<char> >(void)" (__imp_??1?$basic_streambuf@DU?$char_traits@D@std@@@std@@UAE@XZ)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "public: virtual void __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::_Lock(void)" (?_Lock@?$basic_streambuf@DU?$char_traits@D@std@@@std@@UAEXXZ)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "public: virtual void __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::_Unlock(void)" (?_Unlock@?$basic_streambuf@DU?$char_traits@D@std@@@std@@UAEXXZ)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "protected: virtual __int64 __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::showmanyc(void)" (?showmanyc@?$basic_streambuf@DU?$char_traits@D@std@@@std@@MAE_JXZ)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "protected: virtual int __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::uflow(void)" (?uflow@?$basic_streambuf@DU?$char_traits@D@std@@@std@@MAEHXZ)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "protected: virtual __int64 __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::xsgetn(char *,__int64)" (?xsgetn@?$basic_streambuf@DU?$char_traits@D@std@@@std@@MAE_JPAD_J@Z)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "protected: virtual __int64 __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::xsputn(char const *,__int64)" (?xsputn@?$basic_streambuf@DU?$char_traits@D@std@@@std@@MAE_JPBD_J@Z)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "protected: virtual class std::basic_streambuf<char,struct std::char_traits<char> > * __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::setbuf(char *,__int64)" (?setbuf@?$basic_streambuf@DU?$char_traits@D@std@@@std@@MAEPAV12@PAD_J@Z)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "protected: virtual int __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::sync(void)" (?sync@?$basic_streambuf@DU?$char_traits@D@std@@@std@@MAEHXZ)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "protected: virtual void __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::imbue(class std::locale const &)" (?imbue@?$basic_streambuf@DU?$char_traits@D@std@@@std@@MAEXABVlocale@2@@Z)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) __int64 const std::_BADOFF" (__imp_?_BADOFF@std@@3_JB)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: virtual __thiscall std::basic_iostream<char,struct std::char_traits<char> >::~basic_iostream<char,struct std::char_traits<char> >(void)" (__imp_??1?$basic_iostream@DU?$char_traits@D@std@@@std@@UAE@XZ)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) protected: char * __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::_Pninc(void)" (__imp_?_Pninc@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEPADXZ)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) protected: __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::basic_streambuf<char,struct std::char_traits<char> >(void)" (__imp_??0?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAE@XZ)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) private: static void __cdecl std::ios_base::_Ios_base_dtor(class std::ios_base *)" (__imp_?_Ios_base_dtor@ios_base@std@@CAXPAV12@@Z)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) const std::ios_base::`vftable'" (__imp_??_7ios_base@std@@6B@)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) const std::basic_ios<char,struct std::char_traits<char> >::`vftable'" (__imp_??_7?$basic_ios@DU?$char_traits@D@std@@@std@@6B@)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: virtual __thiscall std::basic_ios<char,struct std::char_traits<char> >::~basic_ios<char,struct std::char_traits<char> >(void)" (__imp_??1?$basic_ios@DU?$char_traits@D@std@@@std@@UAE@XZ)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: __thiscall std::basic_iostream<char,struct std::char_traits<char> >::basic_iostream<char,struct std::char_traits<char> >(class std::basic_streambuf<char,struct std::char_traits<char> > *)" (__imp_??0?$basic_iostream@DU?$char_traits@D@std@@@std@@QAE@PAV?$basic_streambuf@DU?$char_traits@D@std@@@1@@Z)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: class std::basic_ostream<char,struct std::char_traits<char> > & __thiscall std::basic_ostream<char,struct std::char_traits<char> >::operator<<(unsigned int)" (__imp_??6?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV01@I@Z)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: class std::basic_ostream<char,struct std::char_traits<char> > & __thiscall std::basic_ostream<char,struct std::char_traits<char> >::operator<<(unsigned short)" (__imp_??6?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV01@G@Z)
8>Netmulti.lib(src9.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: void __thiscall std::basic_ios<char,struct std::char_traits<char> >::clear(int,bool)" (__imp_?clear@?$basic_ios@DU?$char_traits@D@std@@@std@@QAEXH_N@Z)
8>Netmulti.lib(src4.obj) : error LNK2001: unresolved external symbol __imp__vsnprintf
8>Netmulti.lib(src50.obj) : error LNK2001: unresolved external symbol __imp__vsnprintf
8>Netmulti.lib(src4.obj) : error LNK2001: unresolved external symbol __imp___snprintf
8>Netmulti.lib(src4.obj) : error LNK2001: unresolved external symbol __imp__rewind
8>asyncRes.lib(ares_init1.obj) : error LNK2001: unresolved external symbol __imp___wcsdup
8>asyncRes.lib(ares_init1.obj) : error LNK2001: unresolved external symbol __imp___getpid
8>../Bin/ReleaseU/somelib.dll : fatal error LNK1120: 41 unresolved externals
9>------ Rebuild All started: Project: yyyyyCInterfaceToDll, Configuration: Unicode Release Static Win32 ------
9>  yyyyy.cpp
9>yyyyy.cpp(47): warning C4800: 'int' : forcing value to bool 'true' or 'false' (performance warning)
9>yyyyy.cpp(403): warning C4800: 'int' : forcing value to bool 'true' or 'false' (performance warning)
9>yyyyy.cpp(483): warning C4800: 'int' : forcing value to bool 'true' or 'false' (performance warning)
9>  yyyyyCInterfaceToDll.vcxproj -> E:\somepath\src\yyyyyCInterfaceToDll\Unicode Release Static\yyyyyCInterfaceToDll.lib
========== Rebuild All: 8 succeeded, 1 failed, 0 skipped ========== 
```

不知道我在哪里错过了窍门。请让我从黑洞里出来。

此致

哈立德

# c# - Nancy Ninject 模块构建

> ID：10945561
> 
> 赞同：1
> 
> 时间：2012-06-08T08:39:33.280
> 
> 标签：c#, ninject, inversion-of-control, nancy

我正在尝试使用 Ninject 作为 IoC 容器来测试我的 Nancy 模块。我的问题是我似乎无法让 Nancy 使用我的 IoC 绑定来解析 NancyModule 类型。

我在 Nuget 上使用最新的 Nancy，最新的 Nancy.Bootstrap.Ninject 使用最新的 Ninject 从源代码构建。

我的测试设置如下：

```
[TestFixtureSetUp]
    public virtual void ClassSetup()
    {
        Assembly.Load(typeof (MyModule).Assembly.FullName);
        var bootstrapper = new AspHostConfigurationSource();
        this.host = new Browser(bootstrapper);
    }

[Test]
public void test()
{
/*snip */
    var id = entity.Id;

    var response = host.Put("/path/to/{0}/".With(id.Encode()),
            (with) =>
            {
                with.HttpRequest();
                with.Header("Accept", "application/xml");
            });

        response.StatusCode.Should().Be(Nancy.HttpStatusCode.OK);

            /*snip */
    } 
```

这是我的测试设置，剪断了。现在是我的主机设置（在我的程序集中定义）：

```
public class MyBootstrapper: Nancy.Bootstrappers.Ninject.NinjectNancyBootstrapper
{
    public bool ApplicationContainerConfigured { get; set; }

    public Ninject.IKernel Container
    {
        get { return ApplicationContainer; }
    }

    public bool RequestContainerConfigured { get; set; }

    protected override void ConfigureApplicationContainer(Ninject.IKernel existingContainer)
    {
        this.ApplicationContainerConfigured = true;
        base.ConfigureApplicationContainer(existingContainer);

        Nancy.Json.JsonSettings.MaxJsonLength = Int32.MaxValue;
        StaticConfiguration.DisableCaches = true;
    }

    protected override void ConfigureRequestContainer(Ninject.IKernel container, NancyContext context)
    {
        container.Load(new[] { new ServiceModule() });
    }

    protected override DiagnosticsConfiguration DiagnosticsConfiguration
    {
        get { return new DiagnosticsConfiguration { Password = @"12345" }; }
    }
} 
```

我的 IoC 绑定如下：

```
Bind<Nancy.NancyModule>()
        .ToMethod(context =>
        {
            return new MyModule1(context.Kernel.Get<IMongoRepository<Guid, Entity>>(
                Properties.Settings.Default.NamedCollection1),
                                                  context.Kernel.Get<IMongoRepository<Guid, Entity>>(
                                                    Properties.Settings.Default.NamedCollection2));
        })
        .Named(typeof(MyModule1).FullName);

Bind<Nancy.NancyModule>()
        .ToMethod(context =>
        {
            return new MyModule2(context.Kernel.Get<IMongoRepository<Guid, Entity>>(
                Properties.Settings.Default.NamedCollection3),
                                                  context.Kernel.Get<IMongoRepository<Guid, Entity>>(
                                                    Properties.Settings.Default.NamedCollection4));
        })
        .Named(typeof(MyModule2).FullName); 
```

我想控制 Nancy 模块的构建。我查看了 Nancy 的源代码，看起来对于请求，nancy 向配置的 IoC 容器询问具有适当键的 NancyModule 类型的所有已注册绑定。下面的代码在 Nancy.Bootstrappers.Ninject 程序集中定义

```
 protected override sealed NancyModule GetModuleByKey(IKernel container, string moduleKey)
    {
        return container.Get<NancyModule>(moduleKey);
    } 
```

密钥看起来是使用密钥生成器对象生成的：

```
public class DefaultModuleKeyGenerator : IModuleKeyGenerator
{
    /// <summary>
    /// Returns a string key for the given type
    /// </summary>
    /// <param name="moduleType">NancyModule type</param>
    /// <returns>String key</returns>
    public string GetKeyForModuleType(Type moduleType)
    {
        return moduleType.FullName;
    }
} 
```

这就是我的绑定设置为命名绑定的原因。这个想法是，当 Nancy 请求一个命名绑定（对于一个模块）时，它会选择我的命名绑定。

它没有按预期工作。Ninject 抱怨我为 NancyModule 类型设置了多个绑定。

重申一下：我的目标是控制 Nancy 模块的构建。

任何想法将不胜感激。

[PS当我谈论将依赖项注入模块时，我会/不/像这个问题一样](https://stackoverflow.com/questions/8022062/how-to-inject-an-object-into-a-ninject-module)参考NinjectModules

# android - 在警报对话框上更新 ui

> ID：10945563
> 
> 赞同：1
> 
> 时间：2012-06-08T08:39:37.807
> 
> 标签：android, android-intent, android-alertdialog

我有一个`Activity`哪个有 Submit `Button`。单击提交时，`AlertDialog`会显示一个，其中有一个 Save `Button`。现在单击列表中的项目时`Button`会显示。我选择了一些值，然后单击警报对话框上的保存。现在保存时我需要更新列表中的项目字符串。但是它不起作用。

在保存时`AlertDialog`我已经打电话了

```
 Intent intent = new Intent(EditPropertyActivity.this,
                    SetProperties.class);
            startActivity(intent);
            finish(); 
```

如何确保不再调用活动并更新 ui。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:57:04.667

由于您在保存函数中调用了 finish()，您需要再次调用该活动。

而不是在解雇之前编辑您的列表并解雇您的对话框。在保存按钮单击功能中

1.  更新你的 ArrayList

2.  listviewObject.getAdapter().notifyDataSetChanged();

# sql - 客户到技能的数据库设计

> ID：10945565
> 
> 赞同：0
> 
> 时间：2012-06-08T08:39:55.497
> 
> 标签：sql, database, database-design

我有一个问题，我们有一个客户表，其中包括姓名、电子邮件、地址和一个技能表，它是 qts，由一个 id 关联的急救。例如

```
Customer
id = 1
Name = James
Address =  some address

Skills
1, qts
2, first aid 
```

我现在正在尝试配对这种关系。我首先通过创建一个只有 customerId 的技能表来快速解决问题，并且每个技能都有一个真/假值。然后在 customer_skills 与 customerId 到 SkillId 之间创建一个跳转。但是当值发生变化时，我不知道如何更新记录，因为没有唯一的 id。

任何人都可以帮助解决此问题的最佳方法吗？

谢谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:45:32.850

您想要的解决方案实际上取决于您的数据，并且这个问题之前已经被问过数千次。如果你用谷歌搜索 [实体属性值与严格的关系模型](https://www.google.co.uk/search?q=Entity+Attribute+Value+Antipattern)，你会看到无数文章比较和对比了可用的方法。

* * *

**严格关系模型**

您将为每个技能添加额外的`BIT`或`DATETIME`字段（其中`NULL`日期时间表示客户不具备该技能）到您的客户表中。如果您的技能很少随着时间的推移不太可能发生很大变化，那么这很有效。这允许简单的查询来定位具有技能的客户，尤其是具有各种技能组合的客户，例如（使用日期时间字段）

```
SELECT  *
FROM    Customer
WHERE   Skill1 >= '20120101' -- SKILL 1 AQUIRED AFTER 1ST JAN 2012
AND     Skill2 IS NOT NULL  -- HAS SKILL 2
AND     Skill2 IS NULL      -- DOES NOT POSSESS SKILL 3 
```

* * *

**实体-属性-值模型**

这是对经典实体-属性-值模型的轻微改编，因为该值是由记录的存在表示的布尔值。您将创建一个像这样的表：

```
CREATE TABLE CustomerSkills
(       CustomerID      INT NOT NULL,
        SkillID         INT NOT NULL
    PRIMARY KEY (CustomerID, SkillID),
    FOREIGN KEY (CustomerID) REFERENCES Customer (ID),
    FOREIGN KEY (SkillID) REFERENCES Skills (ID)
) 
```

您可能希望添加 DateAdded、AddedBy 等其他列来跟踪添加技能的时间和添加者等，但可以从上面收集核心原则。使用这种方法，添加技能要容易得多，因为它不需要添加列，但可以使简单的查询变得更加复杂。上面的查询必须写成：

```
SELECT  Customer.*
FROM    Customer
        INNER JOIN
        (   SELECT  CustomerID
            FROM    CustomerSkills
            WHERE   SkillID IN (2, 3)   -- SKILL2,SKILL3
            OR      (SkillID = 1 AND DateAdded >= '20120101')
            GROUP BY CustomerID 
            HAVING  COUNT(*) = 2
            AND     COUNT(CASE WHEN SkillID = 3 THEN 1 END) = 0
        ) skills
            ON Skills.CustomerID = Customer.ID 
```

与关系模型相比，这更加复杂且资源密集，但整体结构更加灵活。

* * *

总而言之，这真的取决于你自己的具体情况，有几个因素需要考虑，但有很多资源可以帮助你做出决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:02:17.583

如果您有一个表将其他两个表的主键链接在一起以形成多对多关系（例如在您的示例中），则不必更新该表。相反，您可以删除并将值重新插入其中。

如果您正在编辑客户（例如 customerId 46）并更改该客户的技能，您可以删除该客户的所有技能，然后在存储更改时重新插入新的技能集。

如果您的“链接表”除了两个主键列之外还包含一些附加信息，那么情况可能会有所不同。但是根据您的描述，您似乎只想使用每个表中的主键将表链接在一起。在这种情况下，删除+重新插入应该没问题。

同样在这种表中，您应该使两个外键字段的组合成为绑定表的主键。

# javascript - 带有字符索引检查的速记 if

> ID：10945566
> 
> 赞同：0
> 
> 时间：2012-06-08T08:39:58.780
> 
> 标签：javascript, shorthand-if

我正在使用简写 if 语句来检查内容中是否有斜体标签。

```
remove = (content.indexOf('<i>') === true) ? true : false;
alert("ORIGINAL CONTENT: " + content + "\nDoes content contain <i>? " + remove); 
```

当该警报弹出时，它显示以下内容： [警报框显示 < i > in string，但返回 false](http://photostand.co.za/images/c8rohscblnz82rzmhxij.jpg)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T08:41:20.363

`indexOf`返回字符串在另一个字符串中的位置，如果未找到则返回 -1。这不像`strpos`在 PHP 中。所以你必须检查`content.indexOf('<i>') !== -1`。

在你的情况下，我会简单地定义

```
remove = content.indexOf('<i>') !== -1; 
```

三元运算符（我以前知道这个名字）在这里并不是必需的，因为比较已经给出了您需要的布尔值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:46:19.743

您是否考虑过使用正则表达式？

```
remove = /<i>/.test(content); 
```

感谢 RobG 的更正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:10:44.230

主要涵盖在其他答案中，但在：

```
> content.indexOf('<i>') === true 
```

请注意，[String.prototype.intexOf](http://es5.github.com/#x15.5.4.7)返回一个数字，并且它正在与布尔值进行比较。由于它们是不同的类型，因此结果将始终为 false。如果使用了等于运算符“==”，那么如果左侧表达式返回零 (0) 以外的任何值，它将返回 true。

顺便说一句，斜体文本可以使用除 I 之外的元素来实现，例如通过 CSS 应用适当样式的 span 元素。

# mysql - 如何通过sql查询获取文件的文件扩展名？

> ID：10945568
> 
> 赞同：13
> 
> 时间：2012-06-08T08:40:06.737
> 
> 标签：mysql, sql, subquery, dao

我有一个名为的表`datas`，我正在执行这样的查询：

```
SELECT linkurl AS DOWNLOADURL,
       lastrevlevel AS VERSION,
       code AS DESCRIPTION,
       created AS RELEASEDATE,
       name AS TYPE
FROM datas
WHERE id IN (SELECT child_id
          FROM   datas _datas
          WHERE  parent_id = (SELECT Max(id)
                              FROM   datas
                              WHERE  code = 'AN4307SW')) 
```

它返回如下结果：

```
DOWNLOADURL               VERSION DESCRIPTION RELEASEDATE    TYPE
/artifacts/download.txt   2.0     images       25/6/12      download.txt 
```

在`Type`列中，我正在获取文件的名称。我需要获取`Type`列中文件名的文件扩展名。我怎样才能做到这一点？

例子：

```
TYPE
.txt
.pdf
.xls 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-08T08:45:28.760

您可以使用[`SUBSTRING_INDEX`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_substring-index). 像这样：

```
select linkurl as DOWNLOADURL,lastrevlevel as VERSION,
code  as DESCRIPTION,created as RELEASEDATE,
SUBSTRING_INDEX(name,'.',-1) as TYPE
from datas where id in
(select child_id from datas _datas 
where parent_id=( select max(id) from datas 
where code = 'AN4307SW')) 
```

**编辑**

如果您看到有关此功能的文档，我认为这将很好地满足您的要求。

> 在计数出现分隔符 delim 之前从字符串 str 返回子字符串。如果 count 为正，则返回最终分隔符左侧的所有内容（从左侧开始计数）。如果 count 为负数，则返回最终分隔符右侧（从右侧开始计数）的所有内容。SUBSTRING_INDEX() 在搜索 delim 时执行区分大小写的匹配。

这也将处理这样的情况：

```
select SUBSTRING_INDEX('Test.Document.doc','.',-1); 
```

**编辑2**

如果您使用的是 oracle。下次请在正确的事项中标记问题。甲骨文中没有`SUBSTRING_INDEX`。但我可以看到你可以很容易地做到这一点：

```
SELECT SUBSTR('Test.Document.doc', INSTR('Test.Document.doc', '.',-1)) 
FROM dual; 
```

像这样的完整查询：

```
select linkurl as DOWNLOADURL,lastrevlevel as VERSION,
    code  as DESCRIPTION,created as RELEASEDATE,
    SUBSTR(name, INSTR(name, '.',-1))  as TYPE
    from datas where id in
    (select child_id from datas _datas 
    where parent_id=( select max(id) from datas 
    where code = 'AN4307SW')) 
```

参考[这里](https://stackoverflow.com/questions/856817/finding-last-index-of-a-string-in-oracle)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T08:48:09.087

```
select linkurl as DOWNLOADURL,lastrevlevel as VERSION,
code  as DESCRIPTION,created as RELEASEDATE,reverse(substring(reverse(name), 1,charindex('.', reverse(name))-1)) as TYPE
from datas where id in
(select child_id from datas _datas 
where parent_id=( select max(id) from datas 
where code = 'AN4307SW')) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T08:57:18.473

认为你需要这样的东西

```
SELECT REPLACE(name,SUBSTRING(name ,0, CHARINDEX('.', name )),'') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-18T12:01:36.650

```
SELECT REVERSE(SUBSTRING(REVERSE(name),1,LOCATE('.',REVERSE(name),1‌​))); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-30T04:59:51.393

可以这样做

```
SELECT SUBSTRING_INDEX(FILE_NAME,"." ,-1) from TABLE_NAME 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-08T14:23:19.023

```
SELECT
    SUBSTRING(file_name,(LENGTH(file_name)-LOCATE('.',REVERSE(file_name)))+2)
FROM <table name> WHERE file_id=<file_id>; 
```

# c++ - Visual C++：分配大小无效。为什么会这样？

> ID：10945570
> 
> 赞同：0
> 
> 时间：2012-06-08T08:40:11.550
> 
> 标签：c++, debugging, visual-studio-2008, visual-studio-debugging

我是学习C++的过程。我在 VC++ 上调试我的一些代码时遇到了以下错误 -

```
Debug Error
*path to filename.exe*
Invalid allocation size:429496723 bytes. 
```

当调试器到达以下块时，该错误恰好发生：**编辑**：我添加了整个 main 函数以帮助检查*maxlen*是否具有任何意外值（尽管我没有注意到）

```
int main(){

    vector <Student_info> students;

    Student_info record;

    string::size_type maxlen=0;// length of the longest name

    //read and store all the students data.

    //maxlen contains the length of the name of the longest student.

    while (read(cin,record)){
    // find the length of the longest name
        max(maxlen,record.name.size());
        //add the student record to the vector.

        students.push_back(record);
    }
    //arrange the records alphabetically.
    sort(students.begin(),students.end(),compare);// this may look weird but the fact that the names have to be compared is checked using the predicate.

        //write out the names and grades.

        for(vector<Student_info>::size_type i =0;i!=students.size();i++){

            //padding to ensure that there is vertical alignment.
            cout<<students[i].name<<string(maxlen+1-students[i].name.size(),' ');// debugger stops here!
            //compute grade.
            try{
                double final_grade=grade(students[i]);
                streamsize prec=cout.precision();
                cout<<setprecision(3)<<final_grade<<setprecision(prec);
            }
            catch(domain_error e){
            //catch error if hw vector is empty!

                e.what();

            }
            cout<<endl;

            }
        return 0;
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T08:43:20.380

你可能会看这条线：

```
max(maxlen,record.name.size()); 
```

有没有可能你的意思是：

```
maxlen = max(maxlen,record.name.size()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T10:03:49.443

在将 maxlen 初始化为 0 之后，您永远不会为它分配一个值。然后，您会从该值中减去 1，从而给出一个负偏移量。

在您的第一个 while 循环中，您可能想要...

```
 maxlen = max( maxlen, record.name.size() ); 
```

# windows - Windows批处理：将日期格式化为变量

> ID：10945572
> 
> 赞同：120
> 
> 时间：2012-06-08T08:40:14.577
> 
> 标签：windows, batch-file

如何将 YYYY-MM-DD 格式的当前日期保存到 Windows .bat 文件中的某个变量中？

Unix shell 类似物：

```
today=`date +%F`
echo $today 
```

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-06-08T09:02:34.097

您可以使用与语言环境无关的方式获取当前日期

```
for /f "skip=1" %%x in ('wmic os get localdatetime') do if not defined MyDate set MyDate=%%x 
```

然后您可以使用子字符串提取各个部分：

```
set today=%MyDate:~0,4%-%MyDate:~4,2%-%MyDate:~6,2% 
```

另一种方法是，您可以获得包含各个部分的变量：

```
for /f %%x in ('wmic path win32_localtime get /format:list ^| findstr "="') do set %%x
set today=%Year%-%Month%-%Day% 
```

比摆弄子字符串要好得多，但会污染变量命名空间。

如果您需要 UTC 而不是本地时间，该命令或多或少是相同的：

```
for /f %%x in ('wmic path win32_utctime get /format:list ^| findstr "="') do set %%x
set today=%Year%-%Month%-%Day% 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2016-03-03T12:57:27.420

用于`date /T`在命令提示符下查找格式。

如果日期格式是`Thu 17/03/2016`这样使用的：

```
set datestr=%date:~10,4%-%date:~7,2%-%date:~4,2%
echo %datestr% 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2014-05-20T08:59:29.450

如果您希望在批处理文件中使用标准 MS-DOS 命令来实现此目的，那么您可以使用：

```
FOR /F "TOKENS=1 eol=/ DELIMS=/ " %%A IN ('DATE/T') DO SET dd=%%A
FOR /F "TOKENS=1,2 eol=/ DELIMS=/ " %%A IN ('DATE/T') DO SET mm=%%B
FOR /F "TOKENS=1,2,3 eol=/ DELIMS=/ " %%A IN ('DATE/T') DO SET yyyy=%%C 
```

我确信这可以进一步改进，但这会将日期分为 3 个变量，分别代表日 (dd)、月 (mm) 和年 (yyyy)。然后，您可以稍后根据需要在批处理脚本中使用它们。

```
SET todaysdate=%yyyy%%mm%%dd%
echo %dd%
echo %mm%
echo %yyyy%
echo %todaysdate% 
```

虽然我知道这个问题的答案已被接受，但许多希望在不使用 WMI 控制台的情况下实现这一目标的人可能会喜欢这种替代方法，所以我希望它为这个问题增加一些价值。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2015-01-31T11:05:36.193

另外两种不依赖于时间设置的方法（均取自*[How get data/time Independent from localization](http://www.dostips.com/forum/viewtopic.php?f=3&t=4555)*）。两者也都获得了星期几，而且都不需要管理员权限！：

1.  **MAKECAB** - 适用于每个 Windows 系统（速度快，但会创建一个小的临时文件）（foxidrive 脚本）：

    ```
    @echo off
    pushd "%temp%"
    makecab /D RptFileName=~.rpt /D InfFileName=~.inf /f nul >nul
    for /f "tokens=3-7" %%a in ('find /i "makecab"^<~.rpt') do (
        set "current-date=%%e-%%b-%%c"
        set "current-time=%%d"
        set "weekday=%%a"
    )
    del ~.*
    popd
    echo %weekday% %current-date% %current-time%
    pause 
    ```

2.  **ROBOCOPY** - 它不是[Windows XP](http://en.wikipedia.org/wiki/Windows_XP)和[Windows Server 2003](http://en.wikipedia.org/wiki/Windows_Server_2003)的本机命令，但可以[从 Microsoft 站点下载](http://www.microsoft.com/en-us/download/details.aspx?id=17657)。但它内置于 Windows Vista 及更高版本的所有内容中：

    ```
    @echo off
    setlocal
    for /f "skip=8 tokens=2,3,4,5,6,7,8 delims=: " %%D in ('robocopy /l * \ \ /ns /nc /ndl /nfl /np /njh /XF * /XD *') do (
        set "dow=%%D"
        set "month=%%E"
        set "day=%%F"
        set "HH=%%G"
        set "MM=%%H"
        set "SS=%%I"
        set "year=%%J"
    )

    echo Day of the week: %dow%
    echo Day of the month : %day%
    echo Month : %month%
    echo hour : %HH%
    echo minutes : %MM%
    echo seconds : %SS%
    echo year : %year%
    endlocal 
    ```

    还有另外三种使用其他 Windows 脚本语言的方法。它们会给你更多的灵活性，例如你可以得到一年中的一周，毫秒的时间等等。

3.  **JScript/BATCH**混合（需要另存为`.bat`）。JScript 在[Windows NT](https://en.wikipedia.org/wiki/Windows_NT)及更高版本的每个系统上都可用，作为[Windows Script Host](http://en.wikipedia.org/wiki/Windows_Script_Host)的一部分（[虽然可以通过注册表禁用，但这种情况很少见](http://technet.microsoft.com/en-us/library/ee198684.aspx)）：

    ```
    @if (@X)==(@Y) @end /* ---Harmless hybrid line that begins a JScript comment

    @echo off
    cscript //E:JScript //nologo "%~f0"
    exit /b 0
    *------------------------------------------------------------------------------*/

    function GetCurrentDate() {
        // Today date time which will used to set as default date.
        var todayDate = new Date();
        todayDate = todayDate.getFullYear() + "-" +
                       ("0" + (todayDate.getMonth() + 1)).slice(-2) + "-" +
                       ("0" + todayDate.getDate()).slice(-2) + " " + ("0" + todayDate.getHours()).slice(-2) + ":" +
                       ("0" + todayDate.getMinutes()).slice(-2);

        return todayDate;
    }

    WScript.Echo(GetCurrentDate()); 
    ```

4.  **VBScript/BATCH**混合（[是否可以在不使用临时文件的情况下在批处理文件中嵌入和执行 VBScript？](https://stackoverflow.com/questions/9074476/is-it-possible-to-embed-and-execute-vbscript-within-a-batch-file-without-using-a)）与 jscript 相同的情况，但混合不是那么完美：

    ```
    :sub echo(str) :end sub
    echo off
    '>nul 2>&1|| copy /Y %windir%\System32\doskey.exe %windir%\System32\'.exe >nul
    '& echo current date:
    '& cscript /nologo /E:vbscript "%~f0"
    '& exit /b

    '0 = vbGeneralDate - Default. Returns date: mm/dd/yy and time if specified: hh:mm:ss PM/AM.
    '1 = vbLongDate - Returns date: weekday, monthname, year
    '2 = vbShortDate - Returns date: mm/dd/yy
    '3 = vbLongTime - Returns time: hh:mm:ss PM/AM
    '4 = vbShortTime - Return time: hh:mm

    WScript.echo  Replace(FormatDateTime(Date, 1), ", ", "-") 
    ```

5.  **PowerShell** - 可以安装在每台具有 .NET 的机器上 - 从 Microsoft 下载（[v1](http://www.microsoft.com/en-us/download/details.aspx?id=7217)、[v2](http://support.microsoft.com/kb/968929/bg)和[v3](http://www.microsoft.com/en-us/download/details.aspx?id=34595)（仅适用于 Windows 7 及更高版本））。默认安装在 Windows 7/Win2008 及更高版本的所有设备上：

    ```
    C:\> powershell get-date -format "{dd-MMM-yyyy HH:mm}" 
    ```

6.  **自编译 jscript.net/batch**（我从未见过没有 .NET 的 Windows 机器，所以我认为这是一个非常便携的）：

    ```
    @if (@X)==(@Y) @end /****** silent line that start jscript comment ******

    @echo off
    ::::::::::::::::::::::::::::::::::::
    :::       Compile the script    ::::
    ::::::::::::::::::::::::::::::::::::
    setlocal
    if exist "%~n0.exe" goto :skip_compilation

    set "frm=%SystemRoot%\Microsoft.NET\Framework\"
    :: searching the latest installed .net framework
    for /f "tokens=* delims=" %%v in ('dir /b /s /a:d /o:-n "%SystemRoot%\Microsoft.NET\Framework\v*"') do (
        if exist "%%v\jsc.exe" (
            rem :: the javascript.net compiler
            set "jsc=%%~dpsnfxv\jsc.exe"
            goto :break_loop
        )
    )
    echo jsc.exe not found && exit /b 0
    :break_loop

    call %jsc% /nologo /out:"%~n0.exe" "%~dpsfnx0"
    ::::::::::::::::::::::::::::::::::::
    :::       End of compilation    ::::
    ::::::::::::::::::::::::::::::::::::
    :skip_compilation

    "%~n0.exe"

    exit /b 0

    ****** End of JScript comment ******/
    import System;
    import System.IO;

    var dt=DateTime.Now;
    Console.WriteLine(dt.ToString("yyyy-MM-dd hh:mm:ss")); 
    ```

7.  **Logman**这不能得到星期几。它相对较慢，还创建一个临时文件，并且基于 logman 在其日志文件上放置的时间戳。适用于 Windows XP 及更高版本的所有内容。它可能永远不会被任何人使用 - 包括我 - 但它是另一种方式......

    ```
    @echo off
    setlocal
    del /q /f %temp%\timestampfile_*

    Logman.exe stop ts-CPU 1>nul 2>&1
    Logman.exe delete ts-CPU 1>nul 2>&1

    Logman.exe create counter ts-CPU  -sc 2 -v mmddhhmm -max 250 -c "\Processor(_Total)\%% Processor Time" -o %temp%\timestampfile_ >nul
    Logman.exe start ts-CPU 1>nul 2>&1

    Logman.exe stop ts-CPU >nul 2>&1
    Logman.exe delete ts-CPU >nul 2>&1
    for /f "tokens=2 delims=_." %%t in  ('dir /b %temp%\timestampfile_*^&del /q/f %temp%\timestampfile_*') do set timestamp=%%t

    echo %timestamp%
    echo MM: %timestamp:~0,2%
    echo dd: %timestamp:~2,2%
    echo hh: %timestamp:~4,2%
    echo mm: %timestamp:~6,2%

    endlocal
    exit /b 0 
    ```

[有关 Get-Date 函数的更多信息](http://ss64.com/ps/get-date.html)。

* * *

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-09-15T08:42:32.857

根据@ProVi 的回答，只需更改以适合您需要的格式

```
echo %DATE:~10,4%-%DATE:~7,2%-%DATE:~4,2% %TIME:~0,2%:%TIME:~3,2%:%TIME:~6,2% 
```

将返回

```
yyyy-MM-dd hh:mm:ss
2015-09-15 18:36:11 
```

**编辑** 根据@Jeb 评论，上述时间格式只有在您的 DATE /T 命令返回时才有效

```
ddd dd/mm/yyyy
Thu 17/09/2015 
```

它很容易编辑以适应您的语言环境，但是，通过使用相关 %DATE% 环境变量返回的字符串中每个字符的索引，您可以提取所需的字符串部分。

例如。使用 %DATE~10,4% 将扩展 DATE 环境变量，然后仅使用从扩展结果的第 11 个（偏移量 10）字符开始的 4 个字符

例如，如果使用美式日期，则以下适用

```
ddd mm/dd/yyyy
Thu 09/17/2015

echo %DATE:~10,4%-%DATE:~4,2%-%DATE:~7,2% %TIME:~0,2%:%TIME:~3,2%:%TIME:~6,2%
2015-09-17 18:36:11 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-03-20T15:45:27.643

我真的很喜欢 Joey 的方法，但我想我会进一步扩展它。

在这种方法中，您可以多次运行代码，而不必担心旧的日期值“保留”，因为它已经定义了。

每次运行此批处理文件时，它将输出与 ISO 8601 兼容的组合日期和时间表示。

```
FOR /F "skip=1" %%D IN ('WMIC OS GET LocalDateTime') DO (SET LIDATE=%%D & GOTO :GOT_LIDATE)
:GOT_LIDATE
SET DATETIME=%LIDATE:~0,4%-%LIDATE:~4,2%-%LIDATE:~6,2%T%LIDATE:~8,2%:%LIDATE:~10,2%:%LIDATE:~12,2%
ECHO %DATETIME% 
```

在此版本中，您必须小心不要将相同的代码复制/粘贴到文件中的多个位置，因为这会导致标签重复。您可以为每个副本设置一个单独的标签，或者只是将此代码放入其自己的批处理文件中，并在必要时从源文件中调用它。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-01-16T12:26:37.863

只需使用`%date%`变量：

```
echo %date% 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-03-30T22:48:34.147

我通过执行以下操作将环境变量设置为所需数字格式的值：

```
FOR /F "tokens=1,2,3,4 delims=/ " %a IN ('echo %date%') DO set DateRun=%d-%b-%c 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-07-24T10:02:39.533

检查这个..

```
for /f "tokens=2 delims==" %%a in ('wmic OS Get localdatetime /value') do set "dt=%%a"
set "YY=%dt:~2,2%" & set "YYYY=%dt:~0,4%" & set "MM=%dt:~4,2%" & set "DD=%dt:~6,2%"
set "HH=%dt:~8,2%" & set "Min=%dt:~10,2%" & set "Sec=%dt:~12,2%" & set "MS=%dt:~15,3%"
set "datestamp=%YYYY%%MM%%DD%" & set "timestamp=%HH%%Min%%Sec%" & set "fullstamp=%YYYY%-%MM%-%DD%_%HH%-%Min%-%Sec%-%MS%"
echo datestamp: "%datestamp%"
echo timestamp: "%timestamp%"
echo fullstamp: "%fullstamp%"
pause 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-06-21T17:37:34.267

这是乔伊答案的扩展，包括时间并用 0 填充部分。

例如，结果将是 2019-06-01_17-25-36。另请注意，这是 UTC 时间。

```
 for /f %%x in ('wmic path win32_utctime get /format:list ^| findstr "="') do set %%x

  set Month=0%Month%
  set Month=%Month:~-2%
  set Day=0%Day%
  set Day=%Day:~-2%
  set Hour=0%Hour%
  set Hour=%Hour:~-2%
  set Minute=0%Minute%
  set Minute=%Minute:~-2%
  set Second=0%Second%
  set Second=%Second:~-2%

  set TimeStamp=%Year%-%Month%-%Day%_%Hour%-%Minute%-%Second% 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-09-02T21:43:49.407

可以使用 PowerShell 并通过循环将其输出重定向到环境变量。

从命令行 ( `cmd`)：

```
for /f "tokens=*" %a in ('powershell get-date -format "{yyyy-MM-dd+HH:mm}"') do set td=%a

echo %td%
2016-25-02+17:25 
```

在批处理文件中，您可能会转义`%a`为`%%a`：

```
for /f "tokens=*" %%a in ('powershell get-date -format "{yyyy-MM-dd+HH:mm}"') do set td=%%a 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-09-15T10:44:18.023

如果你安装了 Python，你可以这样做

```
python -c "import datetime;print(datetime.date.today().strftime('%Y-%m-%d'))" 
```

您可以根据需要轻松调整格式字符串。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-04-25T02:03:51.053

由于日期和时间格式是特定于位置的信息，因此从 %date% 和 %time% 变量中检索它们需要额外的努力来解析带有格式转换的字符串。一个好主意是使用一些 API 来检索数据结构并根据需要进行解析。WMIC 是一个不错的选择。下面的示例使用[Win32_LocalTime](https://msdn.microsoft.com/en-us/library/aa394171(v=vs.85).aspx)。您还可以使用[Win32_CurrentTime](https://msdn.microsoft.com/en-us/library/aa394114(v=vs.85).aspx)或[Win32_UTCTime](https://msdn.microsoft.com/en-us/library/aa394510(v=vs.85).aspx)。

```
@echo off  
SETLOCAL ENABLEDELAYEDEXPANSION  
for /f %%x in ('wmic path Win32_LocalTime get /format:list ^| findstr "="') do set %%x  
set yyyy=0000%Year%  
set mmmm=0000%Month%  
set dd=00%Day%  
set hh=00%Hour%  
set mm=00%Minute%  
set ss=00%Second%  
set ts=!yyyy:~-4!-!mmmm:~-2!-!dd:~-2!_!hh:~-2!:!mm:~-2!:!ss:~-2!  
echo %ts%  
ENDLOCAL 
```

结果：
2018-04-25_10:03:11

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-12-16T12:07:32.680

我正在使用以下内容：

```
set iso_date=%date:~6,4%-%date:~3,2%-%date:~0,2% 
```

或与日志文件名称“MyLogFileName”结合使用：

```
set log_file=%date:~6,4%-%date:~3,2%-%date:~0,2%-MyLogFileName 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-07-11T03:44:39.503

```
echo %DATE:~10,4%%DATE:~7,2%%DATE:~4,2% 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-05-18T04:04:09.303

如果 powershell 可用，您可以使用以下代码：

```
# get date
$BuildDate=(get-date -format "yyMMdd")
echo BuildDate=$BuildDate

# get time
$BuildTime=(get-date -format "hhmmss")
echo BuildTime=$BuildTime 
```

结果如下：

```
BuildDate=200518
BuildTime=115919 
```

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2016-01-04T11:25:56.243

如果您不介意一次性投入 10 到 30 分钟来获得可靠的解决方案（不依赖于 Windows 的区域设置），请继续阅读。

让我们解放思想。您想简化脚本使其看起来像这样吗？（假设您要设置 LOG_DATETIME 变量）

```
FOR /F "tokens=* USEBACKQ" %%F IN (`FormatNow "yyyy-MM-dd"`) DO (
  Set LOG_DATETIME=%%F
)

echo I am going to write log to Testing_%LOG_DATETIME%.log 
```

你可以。只需使用 C# .NET 构建一个 FormatNow.exe 并将其添加到您的 PATH 中。

笔记：

1.  您可以使用任何 Visual Studio 版本（例如 Visual Studio Express）来构建 FormatNow.exe。
2.  在 Visual Studio 中，选择“控制台应用程序”C# 项目，而不是“Windows 窗体应用程序”项目。
3.  常识：构建的 FormatNow.exe 需要 .NET Framework 才能运行。
4.  常识：将 FormatNow.exe 添加到 PATH 变量后，需要重启 CMD 才能生效。它也适用于环境变量的任何变化。

好处：

1.  它并不慢（在 0.2 秒内完成）。
2.  支持许多格式[https://msdn.microsoft.com/en-us/library/8kb3ddd4(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/8kb3ddd4(v=vs.110).aspx) 例如 FormatNow "ddd" 只获取星期几，FormatNow "yyyy" 只获取那一年
3.  它不依赖于 Windows 的区域设置，因此它的输出更加可靠。另一方面，%date% 在不同的计算机上没有给出一致的格式，并且不可靠。
4.  你不需要创建这么多 CMD 变量并污染变量命名空间。
5.  它需要批处理脚本中的 3 行来调用程序并获得结果。它应该足够短。

我使用 Visual Studio 2010 构建的 FormatNow.exe 的源代码（我更喜欢自己构建它以避免下载未知的可能是恶意程序的风险）。只需复制并粘贴下面的代码，构建一次程序，然后您就拥有了一个可靠的日期格式化程序以供​​将来使用。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Globalization;

namespace FormatNow
{
    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                if (args.Length < 1)
                {
                    throw new ArgumentException("Missing format");
                }
                string format = args[0];
                Console.Write(DateTime.Now.ToString(format, CultureInfo.InvariantCulture.DateTimeFormat));
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
        }

    }
} 
```

一般来说，在处理复杂的逻辑时，我们可以通过构建一个非常小的程序并调用该程序将输出捕获回一个批处理脚本变量来简化它。我们不是学生，我们不会参加要求我们遵循仅批处理脚本规则来解决问题的考试。在实际工作环境中，允许任何（合法）方法。为什么我们仍然要坚持许多简单任务需要变通方法的 Windows 批处理脚本的低劣功能？为什么我们应该使用错误的工具来完成这项工作？

# oracle - Oracle Reports 6i - 总体布局属性

> ID：10945579
> 
> 赞同：1
> 
> 时间：2012-06-08T08:41:07.913
> 
> 标签：oracle, report, oraclereports

您好我正在使用 Oracle Reports Builder 6i。
我想知道我们是否可以在运行时动态控制常规布局属性（分页前、页面保护等）？
我需要这些信息来重复帧。

谢谢拉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:26:34.280

您不能在运行时动态更改这些参数。

但是，您可以做的是创建布局对象的多个“版本”，并编写有条件地显示和隐藏每个版本的 PL/SQL 触发器。

根据您想要做什么，通常有一种方法可以获得您需要的布局 - 但有时会变得很棘手。

例如，如果您希望特定框架有时有分页前，但有时没有，您可以在其中添加一个额外的框架，将分页前设置为是；并将条件放在那个框架上。不确定，但这可能对你有用。

# java - 如何在同一个 jar 中使用 manifest.mf 类路径作为替代主路径？

> ID：10945584
> 
> 赞同：3
> 
> 时间：2012-06-08T08:41:29.160
> 
> 标签：java, classpath, manifest.mf

我创建了一个包含两个主要类的可执行 jar 文件。所有库都包含在 jar 中，主 Main-Class 在执行时可以正常工作：

> java -jar MyApplication.jar

但是当我尝试像这样运行另一个主类时：

> java -cp MyApplication.jar my.other.mainClass

它不包括 manifest.mf 的类路径，并且找不到 jar 文件中的库。

有没有一种简单的方法让其他主类可以使用 manifest.mf 中的类路径？还是我应该创建两个单独的可执行 jar？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T19:40:53.687

您可以编写一个类，该类调用使用反射作为其第一个参数传递的任何类的主要方法 - 并将其配置为您的 jar 中的主类。这样，您可以从同一个 jar 调用多个主要方法`java -jar file.jar my.other.mainClass`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T15:17:49.263

> 有没有一种简单的方法让其他主类可以使用 manifest.mf 中的类路径？还是我应该创建两个单独的可执行 jar？

仅当您使用选项时才使用 JAR 清单类路径`-jar`，相反，如果不使用命令行参数，则仅将其解释为类名`-jar`。您不能混合使用这两种方法。

但是，这并不意味着您必须创建第二个 JAR 文件。例如，您可以编写一个简单的 shell 脚本来使用从清单复制的类路径和辅助入口点类名来启动 JVM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T19:36:03.860

您确定您的问题与jar**中的库有关吗？**你用的是什么版本的java？

我建议您尝试以下方法：

```
java -cp MyApplication.jar <add external libraries here> my.other.mainClass 
```

因此，您只需要添加 jar 中尚不存在的类的**路径**。您可以使用[通配符](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html)来缩短列表。

这是另一个有趣的选项，[使您的不可运行的 JAR 能够使用 java -jar 命令运行](http://www.javaworld.com/javaworld/javatips/jw-javatip127.html)。它描述了如何在 jar 文件中选择一个主类并制作另一个可运行的副本。

# templates - liferay 模板如何显示页面特定信息

> ID：10945592
> 
> 赞同：1
> 
> 时间：2012-06-08T08:42:04.687
> 
> 标签：templates, liferay

我需要根据我所在的页面使模板中的某些部分显示或隐藏。我知道我可以在 liferay-look-and-feel.xml 文件中创建多个主题并提供设置，但这会在管理员中创建多个主题。

是否有其他方法可以访问有关此页面上的 portlet 的信息。例如，如果它有登录 portlet，那么不显示导航链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:10:54.960

我认为简单的方法是在 javascript 上添加这个函数。使用 javascript，您可以例如观察 login-portlet-id 的存在，然后隐藏导航。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:34:50.860

在 liferay 模板中，有一个速度变量可用，称为 $processor。它不过是对象

> com.liferay.portlet.layoutconfiguration.util.velocity.TemplateProcessor

portletId 在此对象中可用，但没有直接的方法来获取它。请看一下：

[模板处理器.java.html](http://docs.liferay.com/portal/5.2/javadocs/portal-impl/com/liferay/portlet/layoutconfiguration/util/velocity/TemplateProcessor.java.html)

一旦获得 portletId，您就可以编写逻辑来隐藏某些部分。

# html - 用于淡化背景颜色的 CSS 动画

> ID：10945597
> 
> 赞同：1
> 
> 时间：2012-06-08T08:42:28.403
> 
> 标签：html, css

有没有办法让按钮的背景颜色在悬停时从一种颜色变为另一种颜色并具有淡入淡出效果？我知道这可以在 javascript 中完成，但我宁愿只使用 css。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T08:44:41.100

[CSS3 过渡属性](http://www.w3schools.com/css3/css3_transitions.asp)是您的解决方案。

```
.btn {
  background-color: lightblue;
  -webkit-transition: all 0.3s ease-out;  /* Saf3.2+, Chrome */
     -moz-transition: all 0.3s ease-out;  /* FF4+ */
      -ms-transition: all 0.3s ease-out;  /* IE10 */
       -o-transition: all 0.3s ease-out;  /* Opera 10.5+ */
          transition: all 0.3s ease-out;
}  

.btn:hover {
  background-color: lightgreen;  
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T08:46:09.960

试试这个CSS，

```
button{background-color:#888;}
button:hover{background-color:#CCC;}
​ 
```

HTML是，

```
<button>Test</button>​ 
```

工作代码：http: [//jsfiddle.net/HJmK9/](http://jsfiddle.net/HJmK9/)

# javascript - 检查是否在开发者模式下安装了 Opera 扩展

> ID：10945606
> 
> 赞同：2
> 
> 时间：2012-06-08T08:43:21.473
> 
> 标签：javascript, opera, browser-extension, opera-extension

是否可以在扩展代码中使用一些谓词或变量来确定它是正常安装还是在开发人员模式下安装？

（我想让一些调试输出仅在开发人员模式下可见。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:07:03.197

不，无法直接获取此信息。

但是您可以执行以下操作：在您的扩展文件夹中
创建一个具有名称`debug.txt`（或您想要的名称）的文件。
**确保在创建压缩的 .oex 文件时始终删除此文件！**

现在您可以将以下代码添加到后台脚本中：

```
var debugFile = opera.extension.getFile("/debug.txt");
if (debugFile) {
    //This is debug mode!!
} 
```

如果文件存在，您将获得一个有效的`[File]`-Object，`null`否则。

（信息：[http](http://dev.opera.com/articles/view/extensions-api-resourceloader/) ://dev.opera.com/articles/view/extensions-api-resourceloader/ ）

# android - 从 tabhost 添加/删除选项卡及其内容

> ID：10945607
> 
> 赞同：0
> 
> 时间：2012-06-08T08:43:23.220
> 
> 标签：android, android-tabhost, tabactivity

我有九个标签（比如 0 到 8），屏幕上只显示五个标签。这五个选项卡将是这九个选项卡中的 0 到 3 个选项卡，第五个选项卡将是更多选项卡。更多选项卡将显示带有 GridView 的活动，显示剩余九个选项卡的图像+标题（例如 4 到 8）。现在单击 GridView 中的任何项目（图像+标题）将用其各自的活动替换更多选项卡图像+标题及其内容/活动。

我能够替换选项卡指示器（图像+标题），但在替换其各自的内容/活动时遇到了困难。

与其他类似线程一样，他们建议使用 clearAllTabs 并再次添加/重新创建需要选项卡。但我觉得清除所有标签只是为了替换一个标签很重。

我正在使用带有 Intents 的 TabActivity。据我所知，TabActivity 已被其旧应用程序弃用，最初它只有 5 个选项卡，但现在需要添加更多选项卡。

需要您的帮助来实现这一点。如果 TabActivity 不可能，那么切换到片段选项卡对我有帮助吗？

我试图实现这个[图像](http://ptgmedia.pearsoncmg.com/imprint_downloads/informit/images/books/sadun/101211_9780321754264_05fig06.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:44:07.067

我肯定会推荐片段。我过去使用过 TabHost，它非常有问题。

您可以简单地在顶部使用 Button 来控制下面片段的可见性。通过这种方式，您甚至可以添加过渡。

此链接提供了有关该主题的更多信息。[使用 Fragments 为 Android 中的每个选项卡单独返回堆栈](https://stackoverflow.com/questions/6987334/tabs-in-android-using-fragments)

# c - 检测所有当前发出信号的信号量

> ID：10945611
> 
> 赞同：0
> 
> 时间：2012-06-08T08:43:40.427
> 
> 标签：c, windows, winapi, semaphore

有没有办法找出窗口中所有当前发出信号的信号量？

一种方法是反复调用WaitForMultipleObjects(bWaitAll=FALSE, dwMilliseconds=0)
，每次删除一个（信号）HANDLE，直到我们得到一个WAIT_TIMEOUT，
但这既麻烦又慢。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:45:38.543

`WaitForSingleObject()`? 我认为任何标准函数都不会给出信号对象的位掩码/数组。

# asp.net - ADFS 安装是否需要 Active Directory？

> ID：10945612
> 
> 赞同：1
> 
> 时间：2012-06-08T08:43:46.813
> 
> 标签：asp.net, single-sign-on, wif, adfs2.0, ws-federation

为了在使用 ADFS 的（可能不止一个）客户和我的 Web 应用程序之间实施联合登录，我知道我需要在我的环境中安装 ADFS。

如果我要这样做（并安装 Active Directory），我看不到我永远需要 Active Directory，因为身份验证将通过 ADFS 委托给客户 AD。

所以...

我需要在我的应用程序环境中安装 Active Directory 吗？并且\或者有没有其他方法可以这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T08:46:45.157

是的，您需要 Active Directory for Adfs，因为它不提供任何其他开箱即用的身份提供程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T02:54:16.713

如果您在 ADFS 的 web.config 中注释掉所有 Identity 方法，您会得到 ADFS 充当代理，即没有自己的凭证存储。所以它不需要AD。

但是，我不确定当您尝试安装 ADFS 时会发生什么，因为此时它与域 AD 绑定。不知道如果没有找到广告会有什么影响。

您总是可以安装 AD，然后基本上忽略它。

# java - Java中的泛型用法是什么？X。 方法（）

> ID：10945616
> 
> 赞同：18
> 
> 时间：2012-06-08T08:44:03.410
> 
> 标签：java, generics, type-inference, scjp

我已经阅读了整个 SCJP6 书籍 Sierra 和 Bates 的书，考试成绩为 88%。

但是，我从来没有听说过这种代码是如何工作的，因为它没有在泛型章节中解释：

```
Collections.<TimeUnit>reverseOrder() 
```

这种泛型用法是什么？我在一些代码中发现了它，但从未读过任何关于它的内容。在我看来，它允许为类型推断提供一些帮助。我已经尝试过搜索，但并不容易找到（甚至在 SCJP 书籍/考试中也没有！）

那么有人可以给我一个正确的解释它是如何工作的，这是所有的用例等吗？

谢谢

* * *

**编辑** 感谢您的回答，但我希望有更多详细信息:) 所以如果有人想添加一些额外的信息：

更复杂的情况呢？

*   使用类中声明的类型，我可以做类似`Collections.<T>reverseOrder()`的事情吗？
*   使用`extends`, `super`?
*   使用`?`
*   只给编译器部分帮助（即`O.manyTypesMethod<?,MyHelpTypeNotInfered,?,?,?,?,?>()`）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-08T08:46:54.247

它是泛型方法的显式类型规范。您总是可以这样做，但在大多数情况下，它是不需要的。但是，如果编译器无法自行推断泛型类型，则在某些情况下需要它。

[请参阅教程页面](http://docs.oracle.com/javase/tutorial/java/generics/genmethods.html)末尾的示例。

**更新：**只有你的第一个例子是有效的。显式类型参数必须是显式的，所以没有通配符，`extends`或者`super`在那里被允许。此外，您要么明确指定每个类型参数，要么不指定它们；即显式类型参数的数量必须与被调用方法的类型参数的数量相匹配。`T`如果在当前范围内定义良好，例如作为封闭类的类型参数，则允许使用诸如此类的类型参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T08:49:19.770

您是 100% 正确的，这是为了帮助进行类型推断。大多数时候您不需要在 Java 中执行此操作，因为它可以推断类型（甚至从赋值的左侧，这非常酷）。Java 网站上的[泛型教程](http://docs.oracle.com/javase/tutorial/java/generics/genmethods.html)中介绍了此语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T09:04:20.463

只是对其他回复的一个小补充。

当得到相应的编译器错误时：

而“传统”的铸造方式

```
(Comparator<TimeUnit>) Collections.reverseOrder() 
```

看起来类似于泛型方法

```
Collections.<TimeUnit>reverseOrder() 
```

转换方法当然不是类型安全的（可能的运行时异常），而泛型方法会在出现问题时产生编译错误。因此，当然首选泛型方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T13:42:37.277

正如其他答案所阐明的那样，这是为了帮助编译器找出您想要的泛型类型。当使用`Collections`返回泛型类型但不接收参数的实用方法时，通常需要它。

例如，考虑`Collections.empty*`返回空集合的方法。如果您有一个方法需要`Map<String, String>`：

```
public static void foo(Map<String, String> map) { } 
```

你*不能*直接传递`Collections.emptyMap()`给它。即使[编译器](http://ideone.com/1B8m3)*知道*它需要一个`Map<String, String>`：

```
// This won't compile.
foo(Collections.emptyMap()); 
```

你必须[在调用中明确声明你想要的类型](http://ideone.com/43kCB)，我认为这看起来很丑：

```
foo(Collections.<String, String>emptyMap()); 
```

[或者，如果在将返回值传递给函数之前将返回值](http://ideone.com/oOuHR)[分配给`emptyMap`](http://ideone.com/oOuHR)变量，则可以在方法调用中省略该类型声明，我认为这很荒谬，因为这似乎没有必要，并且表明编译器确实不一致：*有时*对没有参数的泛型方法进行类型推断，但有时它不会：

```
Map<String, String> map = Collections.emptyMap();
foo(map); 
```

这似乎不是一件很重要的事情，但是当泛型类型开始变得更复杂（例如`Map<String, List<SomeOtherGenericType<Blah>>>`）时，一种开始希望 Java 具有更智能的类型推断（但是，事实并非如此，人们可能会开始编写新的不需要它的类，只是为了避免所有那些丑陋的`<>`=D）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T08:50:43.440

在这种情况下，它是一种告诉 reverseOrder 方法应根据您指定的类型对对象施加何种排序的方法。比较器需要获取有关如何订购物品的特定信息。

# php - 过期的 MySQL 条目

> ID：10945617
> 
> 赞同：0
> 
> 时间：2012-06-08T08:44:07.150
> 
> 标签：php, linux, mysqli

我想制作一个表格，其中条目在 Linux 服务器上的 PHP 和 MySQLi/MySQL 中插入 24 小时后过期。我将它用于我的程序，该程序会将数据上传到服务器以传输到另一台计算机 - 但为了节省存储空间并减少我想要的服务器负载，以便数据将在 24 小时后过期。它是这样工作的：

1.  用户告诉我的程序获取传输代码。
2.  我的程序将其数据上传到服务器，服务器返回一个唯一 ID - 然后我的程序将其显示给用户。
3.  用户在另一台装有我的程序的计算机上键入它。
4.  我的程序从服务器下载数据，然后从数据库中删除该条目。
5.  如果用户在 24 小时内没有输入代码，服务器会以某种方式将其删除。

我可以使用 cron 作业每小时运行一个 php 文件，但这可能会增加服务器负载，特别是因为我的服务器将用于许多其他事情，而 MySQLi 中可能有更好的方法。

此外，我使用的编程语言无法在客户端执行此操作，并且 SSL 在我的服务器上不可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:48:09.223

使用每天运行一次的 cron 作业并删除所有超过 24 小时的条目。

# php - PHP linter 的替代品

> ID：10945619
> 
> 赞同：0
> 
> 时间：2012-06-08T08:44:13.793
> 
> 标签：php

基本上， php -l 不会检测到任何语法错误，给出以下代码：

```
<?php
date®;
?> 
```

很明显，执行的时候会报错。

是否有任何替代或额外的 linter 可用于 PHP？

编辑：

非常感谢你们。显然它*是*一个有效的常量名称，正如文档所建议的那样 ([a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T08:50:40.070

它只会出错，因为您没有 date® 的常量定义

如果在包含您的测试文件之前的另一个脚本文件中的某个位置，您有：

```
define('date®','Value'); 
```

这将是有效的（尽管毫无意义）并且可以正常运行

所以在语法上这个文件是有效的，并且 lint 检查适当地报告它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:47:00.133

您正在寻找的是`php_check_syntax`（http://php.net/manual/en/function.php-check-syntax.php）。

让我纠正我的答案。它不会将后一个代码检测为错误（如注释中所述，这不是错误代码）。但是，如果您想检查文件是否有错误，您应该坚持使用后一个功能。

# io - 一个键的 Hadoop 自定义值

> ID：10945623
> 
> 赞同：0
> 
> 时间：2012-06-08T08:44:24.813
> 
> 标签：io, hadoop, mapreduce

我尝试实现自定义可写而不是使用 IntWritable。背后的原因是我想拥有一对价值观。特别是我想实现以下目标：user_id;counter;length_of_messages;

输入文件如下：

user_id;time_stamp;length_of_messages

然后输出文件应汇总信息

user_id;counter;length_of_messages

从语义上讲，我通过汇总用户在本周内写消息的次数以及他在本周内消息长度的总和来获得给定时间段（例如 1 周）的用户统计信息。

```
public class ValuesWritable implements Writable {
  private int counter;
  private int durations;

public void write (DataOutput out) throws IOException{
  out.writeInt(counter);
  out.writeInt(durations);
}
public void readFields(DataInput in) throws IOException{
  counter = in.readInt();
  durations = in.readInt();
}

public ValuesWritable read(DataInput in) throws IOException{
  ValuesWritable v = new ValuesWritable();
  v.readFields(in);
  return v;
}
} 
```

我将这个类作为内部类包含在我的 mapreduce 作业类中。我现在的问题是：我如何与这个类进行交互？我从哪里获得 DataOutput 和 DataInput？我阅读了教程[http://developer.yahoo.com/hadoop/tutorial/module5.html#keytypes](http://developer.yahoo.com/hadoop/tutorial/module5.html#keytypes)并为我的目的修改了示例。但现在我无法编译我的课程。

# css - 在下拉菜单中更改 CSS 下拉菜单

> ID：10945625
> 
> 赞同：1
> 
> 时间：2012-06-08T08:44:35.890
> 
> 标签：css, menu

我几乎可以肯定这个问题已经以一种或另一种形式得到了回答。应用我在这里和其他地方发现的更改似乎并没有让我更进一步。

我正在尝试将css菜单从crisislab.nl从下拉菜单更改为下拉菜单。（正如您在我目前正在开发的网站上看到的那样。）

我遇到的当前问题是菜单似乎工作正常，预计菜单文本向下显示并且菜单向上移动的事实（如果这听起来不合逻辑，请查看crisislab.nl )

请参阅下面的代码了解我当前的进度。有愿意帮忙的吗？

提前谢谢了！

```
 #navigation {
                width: 980px;
                height: 38px;

        }
            #navigation li {
                float: left;
                position: relative;

                               top: 220px;
            } #navigation li:hover { background: transparent  url(gfx/navigation_hover.png) repeat; }
                #navigation li a {
                    text-transform: uppercase;
                    color: white;
                    padding: 13px 33px;
                    line-height: 38px;
                    font-size: 11px;
                }
                    #navigation li a:hover { text-decoration: none;}
                    #navigation li ul {

                        position: absolute;
                        background: transparent  url(gfx/navigation_hover.png) left top repeat;
                        z-index: 1000;
                        min-width: 100%;
                                                 display:none; 
                                                left:-1px;
                    }
                    #navigation li:hover ul {

                                                        display:block;   

                    }
                        #navigation li ul li {
                            background: none;
                            width: 100%;
                    }
                            #navigation li ul  li:hover {
                                    background: none;
                                background-color: #2a51b5;

                            }
                            #navigation li ul li a {
                                text-transform: uppercase;
                                color: white;
                                padding-left: 8px 10px;
                                line-height: 28px;
                                width: 100%;
                                display:block;

                            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T08:59:06.243

从下拉菜单到下拉菜单的基本区别是 child 的偏移量`ul`：

下拉菜单有`top:<x>px;`，如果你想要一个下拉菜单，你只需说：`bottom:<x>px;`

我修改了您的代码以使其工作：http: [//jsfiddle.net/fJSVz/](http://jsfiddle.net/fJSVz/)

基本上我改变了以下规则：

```
#navigation li ul {
     top: -9999px;        /* <- removed */
     display:none;        /* <- this will trigger the hide/show */
}
#navigation li:hover ul {
     bottom:20px;         /* <- this is the trick to push the ul up */
     display:block;       /* <- show the ul on hover */
} 
```

# wpf - 如何自动更新 ListBox 中的内容

> ID：10945626
> 
> 赞同：1
> 
> 时间：2012-06-08T08:44:36.963
> 
> 标签：wpf, listbox, automation, wpf-controls, itemscontrol

我正在开发 WPF Windows 应用程序。我正在使用 ListBox 来查看/编辑内容。在那我正在做计算的东西。所以我想要如果我更改一个项目的值，它会自动更改计算而不添加额外的按钮来重新生成它。

```
<ListBox ItemsSource="{Binding CustomSalesProducts, Mode=TwoWay}" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch">
        <ItemsControl.Template>
            <ControlTemplate TargetType="ItemsControl">
                <Border>
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <ItemsPresenter/>
                    </ScrollViewer>
                </Border>
            </ControlTemplate>
        </ItemsControl.Template>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel CanHorizontallyScroll="True" CanVerticallyScroll="True" Orientation="Vertical"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Grid x:Name="SalesGrid" Background="White">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <controls:HeaderedContentControl Header="{Binding ProductName, Mode=TwoWay}" Margin="{DynamicResource Margin4}" Style="{DynamicResource HeaderedContentControlStyle}" HorizontalContentAlignment="Right">
                    </controls:HeaderedContentControl>
                    <TextBox Text="{Binding OrderQty, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Row="1" Margin="{StaticResource Margin4}" Style="{DynamicResource MiniTextBoxStyle}" ToolTip="Quantity" />
                    <TextBlock Text="{Binding UnitSalePrice, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="1" Grid.Row="1" Margin="{StaticResource Margin4}" ToolTip="Price"/>
                    <TextBox Text="{Binding Discount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="2" Grid.Row="1" Margin="{StaticResource Margin4}" Style="{DynamicResource MiniTextBoxStyle}" ToolTip="Discount"/>
                    <TextBlock Text="{Binding TaxAmount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="3" Grid.Row="1" Margin="{StaticResource Margin4}" ToolTip="Tax Amount"/>
                    <TextBlock Text="{Binding LineTotal, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="4" Grid.Row="1" Margin="{StaticResource Margin4}" ToolTip="Total"/>

                </Grid>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ListBox> 
```

**编辑：**

我尝试了触发器，但它在列表框中不起作用

喜欢：

```
<TextBox Text="{Binding OrderQty, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="{StaticResource Margin4}" Style="{DynamicResource MiniTextBoxStyle}" ToolTip="Quantity" >
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="LostFocus">
                                    <i:InvokeCommandAction Command="{Binding RefreshProduct}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </TextBox> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:14:58.437

所以这就是我的建议：

*   确保您的模型类（例如 CustomSalesProduct）正在实现 INotifyPropertyChanged 接口。
*   当您的 OrderQty 属性值更改时（例如，当用户在 TextBox 中键入另一个数量时）然后调用您的方法来计算属性集中的总数。这将自动刷新视图中的 LineTotal 值。

**编辑：**如果您决定使用[MVVM 设计模式](https://stackoverflow.com/questions/1405739/mvvm-tutorial-from-start-to-finish)，那么：

创建一个 ViewModel 类，如：

```
public class CustomSalesViewModel
{
   public ObservableCollection<CustomSalesProduct> CustomSalesProducts {get;set;}

   public CustomSalesViewModel()
  {
    //Initialize your collection in constructor
    CustomSalesProducts = new ObservableCollection<CustomSalesProduct>();
    //Populate list
    CustomSalesProducts.Add(new CustomSalesProduct(){....});
    //.... Add rest of items
  }
} 
```

然后将 View 的 DataContext 设置为 CustomSalesViewModel 的实例。您可以在 View (XAML) 代码隐藏的构造函数中执行此操作，例如：

```
DataContext = new CustomSalesViewModel(); 
```

这里是示例类：

```
public class CustomSalesProduct : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        private int _orderQty;

        public int OrderQty
        {
            get { return _orderQty; }
            set
            {
                _orderQty = value;
                OnPropertyChanged("OrderQty");
                CalcTotal();
            }
        }

        private double _unitSalePrice;

        public double UnitSalePrice
        {
            get { return _unitSalePrice; }
            set
            {
                _unitSalePrice = value;
                OnPropertyChanged("UnitSalePrice");
            }
        }

        private double _discount;

        public double Discount
        {
            get { return _discount; }
            set
            {
                _discount = value;
                OnPropertyChanged("Discount");
            }
        }

        private double _taxAmount;

        public double TaxAmount
        {
            get { return _taxAmount; }
            set
            {
                _taxAmount = value;
                OnPropertyChanged("TaxAmount");
            }
        }

        private double _lineTotal;

        public double LineTotal
        {
            get { return _lineTotal; }
            set
            {
                _lineTotal = value;
                OnPropertyChanged("LineTotal");
            }
        }

        private string _productName;

        public string ProductName
        {
            get { return _productName; }
            set
            {
                _productName = value;
                OnPropertyChanged("ProductName");
            }
        }

        public void CalcTotal()
        {
            LineTotal = OrderQty*UnitSalePrice*(1 - Discount);
        }

        protected void OnPropertyChanged(string name)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(name));
            }
        }
    } 
```

# sql - 自动递增编号

> ID：10945627
> 
> 赞同：-3
> 
> 时间：2012-06-08T08:44:39.713
> 
> 标签：sql

谁能告诉我如何在 SQL 中生成自动编号？我已经尝试过，但它显示以下错误

> “AUTO_INCREMENT 附近的 sytnax 不正确”。

我究竟做错了什么？

```
create table auto1
(
    Sno int NOT NULL AUTO_INCREMENT, 
    fname varchar(50)
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:47:00.677

我假设您使用的 SQL-Server 的语法与其他数据库引擎不同

```
create table auto1 
(
    Sno int NOT NULL IDENTITY(1,1), 
    fname varchar(50) 
) 
```

有关表创建的详细信息，请参见[此处](http://www.google.de/url?sa=t&rct=j&q=sql%20server%20create%20table%20&source=web&cd=1&ved=0CGkQFjAA&url=http://msdn.microsoft.com/de-de/library/ms174979.aspx&ei=WbzRT4jSO-Ki4gTp64GJAw&usg=AFQjCNGV-BrIZ6jxDD4gZbw6MxxY6WHgUw&cad=rja)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:58:07.913

请尝试以下一项

```
CREATE TABLE test (
sno INT NOT NULL AUTO_INCREMENT PRIMARY KEY ,
fname VARCHAR( 20 ) NOT NULL
) 
```

# java - 需要将多线程套接字服务器的输出重定向到其他客户端。

> ID：10945628
> 
> 赞同：0
> 
> 时间：2012-06-08T08:44:40.010
> 
> 标签：java, sockets, system.out

我拥有的是一个监听客户端的多线程套接字服务器。为打开的连接创建并启动新线程。客户端可以通过 Runtime .exec() 方法请求服务器执行一些命令。接收到的任何新命令都由新线程处理（将 PrintWriter 作为参数传递），并且所有输出（std/err）都通过带有 PrintWriter 的套接字发送。

问题是当命令需要更长的时间（即守护程序）并且客户端由于任何原因断开连接时，我无法再获得输出。我需要找到一种从另一个连接上的命令执行线程获取输出的方法（新的客户端会话将在另一个线程上）。

我可以尝试将命令的所有输出发送到 System.out 并尝试使用 PrintWriter 通过套接字发送它（System.out）（我不知道该怎么做）。如果我成功了，也许有一种方法可以将所有这样的输出发送到每个连接的客户端。

但是，我将所有输出保存到数据库中，如果连接了多个客户端，我最终会在我的数据库中有多个输入。

请给我一些想法，让我知道如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:02:36.693

你可能想让你的调用异步。永远不应该同步执行持续时间未知的任务。

我会考虑使用“反应器”类型的服务器（即：每个客户端一个线程=快速死亡）并使用某种类型的消息传递机制进行长时间运行的事务。有很多中间件可以做这种工作，这真的取决于你在什么平台上。

顺便说一句，使用套接字连接在远程机器上执行命令是一个安全漏洞，但你可能已经知道了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:52:19.473

那么，您是否考虑过为每个连接使用会话 ID？此 ID 将与每次执行的输出相关联。因此，可以在同一用户的后续调用中检索到相同的输出。暂时可以将输出存储在存储库中（例如数据库、内存、文件）。

如果我没有正确回答您的问题，请纠正我。

# barcode - 从 UPC 获取产品描述的 API

> ID：10945630
> 
> 赞同：4
> 
> 时间：2012-06-08T08:44:52.117
> 
> 标签：barcode

一旦我获得 UPC 代码，我如何才能获得产品描述，如名称、mrp 等。我看到了一个类似的问题，答案是这个链接：[http](http://www.upcdatabase.org/api.php) ://www.upcdatabase.org/api.php 但那个网站我想已经没有用了，必须有一个 API 来查找产品详细信息。请有人帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T23:25:01.653

试试[http://www.digit-eyes.com](http://www.digit-eyes.com)。他们在美国和国外也有大约 2700 万个代码。

# php - joomla 2.5 如何获取“模块类后缀”

> ID：10945636
> 
> 赞同：0
> 
> 时间：2012-06-08T08:45:33.157
> 
> 标签：php, joomla, joomla2.5

我正在尝试获取我的菜单模块的模块类后缀。这就是我试图实现这一目标的方式： echo $module->$params->get('class_sfx'); 但没有结果..有人知道怎么做吗？还有当我

print_r($module->params); 结果是

```
{"menutype":"test","startLevel":"1","endLevel":"0","showAllChildren":"0","tag_id":"","class_sfx":"cc_page_main_body_bottom_menu_item_panel_menu_container_first","window_open":"","layout":"_:center-top","moduleclass_sfx":"cc_page_main_body_bottom_menu_item_panel_website","cache":"1","cache_time":"900","cachemode":"itemid"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:54:45.433

我认为你的回声中有太多的美元。它应该是 $module->params->get('class_sfx'); 观察参数中的 $ 。

在模块本身中，您通常可以使用 $params->get('class_sfx') 获取该模块的参数，而不使用 $module 片段。

# mysql - Ruby On Rails：更改数据库用户名和密码

> ID：10945637
> 
> 赞同：2
> 
> 时间：2012-06-08T08:45:34.843
> 
> 标签：mysql, ruby-on-rails

我不熟悉 Ruby on Rails，但有人要求我将 RoR 应用程序从一台服务器移动到另一台服务器。除了我在 log/production.log 中得到这个日志条目之外，这一切似乎都有效：

```
Mysql2::Error (Access denied for user 'root'@'10.0.0.76' (using password: NO)): 
```

但是，在我的 database.yml 文件中，我没有使用 root 用户。这是它的样子：

```
 development:
   adapter: mysql2
   encoding: utf8
   reconnect: false
   database: astral
   pool: 5
   username: some_user_name
   password: xyz
   host: 10.0.0.76
   socket: /tmp/mysql.sock

 # Warning: The database defined as "test" will be erased and
 # re-generated from your development database when you run "rake".
 # Do not set this db to the same as development or production.
 test:
   adapter: mysql2
   encoding: utf8
   reconnect: false
   database: astral
   pool: 5
   username: some_user_name
   password: xyz
   socket: /tmp/mysql.sock

 production:
   development 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:44:38.997

我没有意识到这一点，现在我觉得自己很愚蠢。但是，也许刚刚起步的人可以通过这个答案为自己节省几分钟的时间。

事实证明，只有在重新启动/重新加载 apache 服务后才会应用对 database.yml 文件的更改。现在一切正常。

# c# - 如何从列表视图中获取最后一项

> ID：10945639
> 
> 赞同：1
> 
> 时间：2012-06-08T08:45:37.543
> 
> 标签：c#, winforms, listview, drag-and-drop

我的问题是关于处理 ListView 中的拖放。

所以我得到了选定的 ListViewItem。

```
ListView.SelectedListViewItemCollection itemCollection = (ListView.SelectedListViewItemCollection)e.Data.GetData("System.Windows.Forms.ListView+SelectedListViewItemCollection"); 
```

如果我通过拖放（例如从 Windows 资源管理器）移动新元素，则 itemCollection 等于 null，因为我没有在列表视图中选择项目。

```
private void DragDropHandler(object sender, DragEventArgs e)
{
        ListView.SelectedListViewItemCollection itemCollection = (ListView.SelectedListViewItemCollection)e.Data.GetData("System.Windows.Forms.ListView+SelectedListViewItemCollection");

        if (itemCollection == null)
        {
            itemCollection = (ListView.SelectedListViewItemCollection)e.Data.GetData("System.Windows.Forms.ListView");
        }
} 
```

对于这种情况，我会得到列表视图中的最后一个元素，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:02:07.890

试试这个：

```
var r = Enumerable.Empty<ListViewItem>();

if(this.listView1.Items.Count > 0)
    r = this.listView1.Items.OfType<ListViewItem>();

var last = r.LastOrDefault();

if (last != null)
{
    // do your stuff
} 
```

# java - 获取特定xml元素的xsd限制

> ID：10945640
> 
> 赞同：3
> 
> 时间：2012-06-08T08:45:39.333
> 
> 标签：java, xml, xsd

当我在 Java 中解析 XML 文件时，是否可以获得特定元素的限制？

例如，如果我有一个架构：

```
<xs:element name="MyString" minOccurs="0">
  <xs:simpleType>
   <xs:restriction base="xs:string">
    <xs:maxLength value="100"/>
   </xs:restriction>
  </xs:simpleType>
</xs:element> 
```

当我在 XML 文件解析期间获取节点 MyString 时，我希望能够获取其限制`xs:string`和**maxLength = 100**的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:54:02.387

您可以寻找/编写一个 JAXB 插件来生成 Bean Validation Annotations (JSR-303)，例如：

[http://metro.1045641.n5.nabble.com/JAXB-plugin-to-generate-Bean-Validation-Annotations-JSR-303-td5598189.html](http://metro.1045641.n5.nabble.com/JAXB-plugin-to-generate-Bean-Validation-Annotations-JSR-303-td5598189.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T23:02:10.693

我会推荐这个[项目](https://github.com/krasa/krasa-jaxb-tools)。

它与 Puce 链接的 jaxb 插件相同，但具有适当的 maven 项目和一些改进。

# jquery - 一起使用 JQuery-Mobile/Phonegap 的正确方法？

> ID：10945643
> 
> 赞同：108
> 
> 时间：2012-06-08T08:45:48.790
> 
> 标签：jquery, jquery-mobile, cordova

一起使用 JQuery Mobile 和 Phonegap 的正确方法是什么（迄今为止）？

这两个框架都需要加载才能使用。在我可以使用它们之前，如何确保两者都已加载？

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2012-10-10T13:59:11.350

您可以使用 JQuery 的延迟功能。

```
var deviceReadyDeferred = $.Deferred();
var jqmReadyDeferred = $.Deferred();

document.addEventListener("deviceReady", deviceReady, false);

function deviceReady() {
  deviceReadyDeferred.resolve();
}

$(document).one("mobileinit", function () {
  jqmReadyDeferred.resolve();
});

$.when(deviceReadyDeferred, jqmReadyDeferred).then(doWhenBothFrameworksLoaded);

function doWhenBothFrameworksLoaded() {
  // TBD
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-28T16:17:08.440

根据上面的示例，这是它对我的工作方式

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
        <title>InforMEA</title>
    </head>
    <body>
        <script type="text/javascript" src="js/jquery-1.8.3.js"></script>
        <script type="text/javascript">
            var dd = $.Deferred();
            var jqd = $.Deferred();
            $.when(dd, jqd).done(doInit);

            $(document).bind('mobileinit', function () {
                jqd.resolve();
            });
        </script>
        <script type="text/javascript" src="js/jquery.mobile-1.2.0.js"></script>
        <script type="text/javascript" src="cordova-2.2.0.js"></script>
        <script type="text/javascript">
            document.addEventListener('deviceready', deviceReady, false);
            function deviceReady() {
                dd.resolve();
            }

            function doInit() {
                alert('Ready');
            }
        </script>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-08T09:53:13.070

为了将 phonegap 与 jquery mobile 一起使用，您需要像这样使用它

```
<head>
<title>Index Page</title>

<!-- Adding viewport -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, user-scalable=no">

<!-- Adding jQuery scripts -->
<script type="text/javascript" src="jquery/jquery-1.7.1.min.js"></script>

<!-- Since jQuery Mobile relies on jQuery core's $.ajax() functionality,
 $.support.cors & $.mobile.allowCrossDomainPages must be set to true to tell
 $.ajax to load cross-domain pages. -->
<script type="text/javascript">
    $(document).bind("mobileinit", function() {
        $.support.cors = true;
        $.mobile.allowCrossDomainPages = true;
    });
</script>

<!-- Adding Phonegap scripts -->
<script type="text/javascript" charset="utf-8"
    src="cordova/cordova-1.8.0.js"></script>

<!-- Adding jQuery mobile scripts & CSS -->
<link rel="stylesheet" href="jquerymobile/jquery.mobile-1.1.0.min.css" />
<script type="text/javascript"
    src="jquerymobile/jquery.mobile-1.1.0.min.js"></script>

</head>
<script type="text/javascript">
    // Listener that will invoke the onDeviceReady() function as soon as phonegap has loaded properly
    document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
        navigator.splashscreen.hide();

        document.addEventListener("backbutton", onBackClickEvent, false); // Adding the back button listener    

    }
    </script>
<body>
<div data-role="page" id="something" data-ajax="false">
        <script type="text/javascript">
            $("#something").on("pageinit", function(e) {

            });

            $("#something").on("pageshow", function(e) {

            });

            $("#something").on("pagebeforeshow", function(e) {

            });
        </script>

        <div data-role="header">            
        </div>

        <div data-role="content">           
        </div>      
    </div>
</body> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-13T18:55:18.147

正如许多人建议的那样，只要您不关心什么顺序`deviceready`和发生了什么，使用延迟是一个不错的选择。但就我而言，当应用程序首次加载时`mobileinit`我需要一些事件，并且扩展这些/ /etc 事件是所有在完成之前触发，所以我无法在它们上使用 deferred 正确绑定它们。这种比赛条件不是一件好事。`pageshow``mobileinit``pageshow``pagebeforeshow``deviceready`

我需要做的是确保在 ' `deviceready`' 已经被解雇之后才发生 'mobileinit'。因为`mobileinit`当您加载 JQM 时会立即触发，所以我选择在完成`jQuery.getScript`后使用它来加载它`deviceready`。

```
<script src="cordova-2.2.0.js"></script>
<script src="js/jquery-1.8.2.min.js"></script>
<script src="js/async.min.js"></script>
<script src="js/app.js"></script>
<script>
  document.addEventListener(
    'deviceready',
    function () {
      $('body').css('visibility', 'hidden');
      $(document).one("mobileinit", function () {
        app.init();
        $('body').css('visibility', '');
      });
      $.getScript('js/jquery.mobile-1.2.0.min.js');
    },
    false
  );
</script> 
```

我隐藏正文的原因是这种方法的副作用是在 jquery.mobile 加载之前原始 HTML 文档的可见性只有半秒。在这种情况下，隐藏它多半秒的空白空间比查看无样式文档更可取。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-22T04:39:21.873

我相信没有必要使用延迟功能。（也许新版本的phonegap 不需要这样做？）我在index.html 文件的头部有这个，一切正常。我确实认为包含 jquery、phonegap 和 jquery mobile 的顺序很重要。

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />

    <!-- Adding jQuery -->
    <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>

    <!-- Add Phonegap scripts -->
    <script type="text/javascript" src="phonegap.js"></script>

    <!-- Add jQuery mobile -->
    <link rel="stylesheet" href="css/jquery.mobile-1.3.2.css" />
    <script type="text/javascript" src="js/jquery.mobile-1.3.2.min.js"></script>

    <title>MY TITLE</title>
</head> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-20T08:02:00.477

这对我来说是工作。基于 dhaval，当我学习使用 sqlite 时的这个示例

```
<!DOCTYPE html>
<html>
 <head>
<title>Cordova Sqlite+Jquery</title>
<script type="text/javascript" charset="utf-8" src="js/jquery-1.8.3.min.js"></script>   
<script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>
<script type="text/javascript" charset="utf-8">`

// Call onDeviceReady when Cordova is loaded.
//
// At this point, the document has loaded but cordova-1.8.0.js has not.
// When Cordova is loaded and talking with the native device,
// it will call the event `deviceready`.
//
function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
}

// Populate the database 
//
function populateDB(tx) {
    tx.executeSql('DROP TABLE IF EXISTS DEMO');
    tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
    tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
    tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');
}

// Query the database
//
function queryDB(tx) {
    tx.executeSql('SELECT * FROM DEMO', [], querySuccess, errorCB);
}

// Query the success callback
//
function querySuccess(tx, results) {
    var len = results.rows.length;
    //console.log("DEMO table: " + len + " rows found.");
    $('#result').html("DEMO table: " + len + " rows found.");
    var listval = '';
    for (var i=0; i<len; i++){
        //console.log("Row = " + i + " ID = " + results.rows.item(i).id + " Data =  " + results.rows.item(i).data);
         listval += '<li>'+ results.rows.item(i).data + '[' + results.rows.item(i).id + '] </li>';
    }

    $('#listItem').html(listval);

}

// Transaction error callback
//
function errorCB(err) {
    console.log("Error processing SQL: "+err.code);
}

// Transaction success callback
//
function successCB() {
    var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
    db.transaction(queryDB, errorCB);
}

// Cordova is loaded and it is now safe to make calls Cordova methods
//
function onDeviceReady() {
    // Now safe to use the Cordova API
    //alert('ready');
    var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
    db.transaction(populateDB, errorCB, successCB);
    //$('#result').html('hello');
}

</script>
  </head>
 <body onload="onLoad()">
  <div>result:</div><div id="result"></div>
  <ul id="listItem">
  </ul>
 </body>
 </html> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-04T18:03:37.500

为了建立@Jeffrey 的答案，我找到了一种更简洁的方法，它隐藏 HTML 标记，直到 JQM 完成处理页面并呈现第一个 Page 元素，因为我注意到在 JQM 呈现之前 1/2 秒的裸标记闪烁。

您只需要使用 css 隐藏所有标记...JQM 的 PageShow() 将为您切换可见性。

```
 ```
//snip
<style type="text/css">
.hide {
  display:none;
}
</style>

//snip - now the markup notice the hide class
<div id="page1" data-role="page" class="hide">
     //all your regular JQM / html form markup
</div>

//snip -- down to the end of /body
<script src="cordova-2.2.0.js"></script>
<script src="js/jquery-1.8.2.min.js"></script>
<script>
   document.addEventListener(
     'deviceready',
      function () {
         $(document).one("mobileinit", function () {
         //any JQM init methods

       });
      $.getScript('js/jquery.mobile-1.2.0.min.js');
   },
   false);
</script> 
``` 
            回答 #8

赞同：0

时间：2013-02-19T22:50:54.523

以下在 PG 2.3 和 JQM 1.2 上为我工作，包括。Facebook 连接插件：

```
<head>
<script src="./js/jquery-1.8.2.min.js"></script>
<script>
    $.ajaxSetup({
        dataType : 'html'
    });

    var dd = $.Deferred();
    var jqd = $.Deferred();
    $.when(dd, jqd).done(function() {                

        FB.init({ appId: auth.fbId, nativeInterface: CDV.FB, useCachedDialogs: false });
    });

    $(document).bind('mobileinit', function () {
        jqd.resolve();
    });                        
</script>
<script src="./js/jquery.mobile-1.2.0.min.js"></script>
<script>
    $.mobile.loader.prototype.options.text = "loading";
    $.mobile.loader.prototype.options.textVisible = true;
    $.mobile.loader.prototype.options.theme = "a";
    $.mobile.loader.prototype.options.html = "";

    $.mobile.ajaxEnabled = false;
    $.mobile.allowCrossDomainPages = true;
    $.support.cors = true;       

    $('[data-role=page]').live('pagecreate', function(event) {                      
        tpl.renderReplace('login', {}, '#content-inner', function() {                   
            auth.init();
        });
    });
</script>
<script src="./js/cordova-2.3.0.js"></script>
<script src="./js/cdv-plugin-fb-connect.js"></script>
<script src="./js/facebook_js_sdk.js"></script>                     
<!--some more scripts -->
<script>        
    document.addEventListener('deviceready', function() {
        dd.resolve();
    }, false);                        
</script>  
<head> 
```

            回答 #9

赞同：-1

时间：2012-06-08T09:05:44.110

PhoneGap 的加载与 jQuery 的加载略有不同。jQuery 更像是一个实用程序库，因此您可以将其包含在内，并且可以立即使用。另一方面，PhoneGap 需要本机代码的支持才能正确初始化，因此它在包含在页面中后不久就无法使用。

Phonegap 建议注册并等待`deviceready`执行任何本机特定代码的事件。

```
<!DOCTYPE html>
<html>
  <head>
    <title>PhoneGap Example</title>

    <script type="text/javascript" charset="utf-8" src="lib/jquery.min.js"></script>
    <script type="text/javascript">
        // jquery code here
    </script>
    <script type="text/javascript" charset="utf-8" src="lib/android/cordova-1.7.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    function onLoad(){
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    // Cordova is ready
    function onDeviceReady() {
        // write code related to phonegap here
    }
    </script>
  </head>
  <body onload="onLoad()">
    <h1>Phonegap Example</h1>
  </body>
</html> 
```

有关更多信息，请查看[文档](http://docs.phonegap.com/en/1.8.0/cordova_events_events.md.html#deviceready)

```

# google-chrome-extension - 将 JavaScript 注入预定义页面并使用页面操作

> ID：10945648
> 
> 赞同：0
> 
> 时间：2012-06-08T08:45:55.873
> 
> 标签：google-chrome-extension

好吧，我有一个域列表（大约 10 个），我的 chrome 扩展程序将与之交互。

当我研究需要使用的 chrome 扩展文档时，`content_scripts` 我已将这些行包含在 manifest.json

```
 "content_scripts": [ {
      "all_frames": true,
      "js": [ "js/main.js" ],
      "matches": [ "http://domain1.com/*",
                   "http://domain2.com/*",
                   "http://domain3.com/*",
                   "http://domain4.com/*",
                   "http://domain5.com/*",
                   "http://domain6.com/*",
                   "http://domain7.com/*",
                   "http://domain8.com/*",
                   "http://domain9.com/*",
                   "http://domain10.com/*"
      ],
      "run_at": "document_start"
   }], 
```

这意味着在加载每个页面时，如果 url 与清单文件中定义的 url 匹配，那么 main.js 将被注入到页面中。我对吗？是的。

所以我想在脚本注入时做一些UI`page action`

我在清单中包含了这些行：

```
 "page_action": {
      "default_icon": "images/pa.png",
      "default_title": "This in one of that 10 domains, that is why I showed up!"
   }, 
```

似乎还不够。我必须手动触发页面操作。但是哪里 ？我意识到为此我需要一个 background.html 文件。

但为什么我不能在同一个 main.js 文件中包含触发器？回答：

```
However, content scripts have some limitations. They **cannot**:

 - Use chrome.* APIs (except for parts of chrome.extension)
 - Use variables or functions defined by their extension's pages
 - Use variables or functions defined by web pages or by other content scripts 
```

因此将其包含在清单中：

```
"background_page": "background.html" 
```

这是内容：

```
 <html>
          <head>
            <script>
                function check (tab_id , data , tab){
                    //test just one domain to be simple
                    if (tab.url.indexOf('domain1.com') > -1){
                        chrome.pageAction.show(tab_id);
                    };
                };
                chrome.tabs.onUpdated.addListener(check);
            </script>
          </head>

        </html> 
```

**到这里为止还算公平，**

我想要**但我不知道**的是如何添加打开/关闭扩展的功能。

用户单击页面操作图标 -> 图标更改并关闭/打开（main.js 会有所不同）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:56:42.600

除了通过清单添加内容脚本，您还可以将[`chrome.tabs.onUpdated`](http://code.google.com/chrome/extensions/tabs.html#event-onUpdated)与 结合使用[`chrome.tabs.executeScript`](http://code.google.com/chrome/extensions/tabs.html#method-executeScript)：

```
// Example:
var url_pattern = /^http:\/\/(domain1|domain2|domain3|etc)\//i;
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
    if (url_pattern.test(tab.url)) {
        if (changeInfo.status === 'complete') { // Or 'loading'
            chrome.tabs.executeScript(tabId, {'file':'main.js'});
            chrome.pageAction.show(tabId);
        }
    } else {
        chrome.pageAction.hide(tabId);
    }
}); 
```

不要忘记检查 value `changeInfo.status`，否则内容脚本将被执行两次。

在这些`if`语句之一中，您可以合并检查扩展是否处于活动状态，并对其采取行动：

```
if (changeInfo.status === 'complete' && am_I_active_questionmark) ... 
```

侧不：除了使用`background_page`，您还可以使用`"background": {"scripts":["bg.js"]}`，并将后台脚本放在`bg.js`.

# javascript - 调整列大小时如何获取网格面板的列宽？

> ID：10945649
> 
> 赞同：0
> 
> 时间：2012-06-08T08:46:04.703
> 
> 标签：javascript, extjs, extjs4.1

我使用 ExtJS 4.1，但我不知道如何在调整网格面板的大小时获得它的宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:46:03.340

您可能想查看`getState`方法： [http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.Panel-method-getState](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.Panel-method-getState)

ExtJs 使用它来保存/恢复网格状态，包括列及其宽度。

# jquery - 使用jquery扩展动态相对定位的容器，其中包含绝对定位的内容

> ID：10945650
> 
> 赞同：0
> 
> 时间：2012-06-08T08:46:05.730
> 
> 标签：jquery, resize, expand

我正在尝试使用 Jquery 动态扩展相对定位的容器 div，因为 UL 的内部是绝对定位的，并且 FadedIn 和 FadedOut。整个事情需要是动态的，因为每个 UL 都有不同的高度，因为它包含不同数量的 LI。

**这是我的 HTML 代码**

```
<div id="container">
<nav id="type-navigation">
<ul id="nav_categories" class="subs">
    <li><a href="#">Category 1</a>
            <ul>
            <li><a href="#">Link1</a></li>
            <li><a href="#">Link2</a></li>
            <li><a href="#">Link3</a></li>
            </ul>
    </li>
    <li><a href="#">Category 2</a>
            <ul>
            <li><a href="#">Link1</a></li>
            <li><a href="#">Link2</a></li>
            <li><a href="#">Link3</a></li>
            <li><a href="#">Link4</a></li>
            <li><a href="#">Link5</a></li>
            </ul>
    </li>
</ul>
</nav> 
```

**这是我的 jQuery**

```
$("#type-navigation #nav_categories > li > a").click(function(event){           
      event.preventDefault();
});

$(".subs > li > a").click(function() {
$(this).parents('.subs').find('ul').hide();
if($(this).next("ul").is(":visible")) {
    $(this).next("ul").fadeOut("slow");
} else {
    $(this).next("ul").fadeIn("slow");
}
return false;
}); 
```

这是上述元素的 CSS

```
#container {
overflow: hidden;
padding: 20px 0 !important;
background: none;}
#type-navigation ul ul{
position: absolute;
top:0;
right: 20px;
}

#type-navigation > ul > li > ul {
 display:none;   
}​ 
```

# java - 如何在 Java Servlet 中将字符串转换为双精度值？

> ID：10945663
> 
> 赞同：0
> 
> 时间：2012-06-08T08:46:51.237
> 
> 标签：java, android, string, double

我将我的纬度和经度作为 url 参数传递给我的 java servlet。我想使用休眠将这些纬度和经度存储到我的 mySQL 数据库中。要将 String 转换为 Double，我使用以下代码，但它给了我一个 nullPointerException。

```
 FileWriter fstream = new FileWriter("out2.txt");
            req.setCharacterEncoding("UTF-8");
            resp.setCharacterEncoding("UTF-8");
            String par1 =  req.getParameter("param1");
            String par2 = req.getParameter("param2");
            BufferedWriter out = new BufferedWriter(fstream);
            out.append(par1);
            out.append("  ");
            out.append(par2);
            double lat=0.0;
            double lon=0.0;
            try
            {
              lat =Double.parseDouble(par1);
            }
            catch(NumberFormatException e)
            {
              //not a double
            }
            try
            {
              lon= Double.parseDouble(par2);
            }
            catch(NumberFormatException e)
            {
              //not a double
            } 
```

我在控制台中收到以下错误：

```
SEVERE: Servlet.service() for servlet [org.spark.servlet.PostDataReceiverServlet] in context with path [/HelloServlet] threw exception
java.lang.NullPointerException
    at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:991)
    at java.lang.Double.parseDouble(Double.java:510)
    at org.spark.servlet.PostDataReceiverServlet.doGet(PostDataReceiverServlet.java:48)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at  org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:185)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:151)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:269)
           at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1773)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

如果我删除两个 parseDouble 语句，代码工作正常。@All 我很确定 par1 或 par2 都不为空。我刚刚检查了一下，我的文件中出现了以下输出。`28.500788 77.395829`. 这些是我从我的 android 应用程序发送的坐标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:56:37.397

我很确定 par1 或 par2 为空。

修改您的代码，如下所示。

```
public static double parseDoubleSafely(String str) {
    double result = 0;
    try {
        result = Double.parseDouble(str);
    } catch (NullPointerException npe) {
        //sysout found null
        return 0; 
    } catch (NumberFormatException nfe) {
        //sysout NFE 
        return 0; 
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:55:07.713

这两行中的一条或两条很可能不会返回任何值：

```
String par1 = req.getParameter("param1");
String par2 = req.getParameter("param2"); 
```

这就是您收到 NPE 的原因。

尝试：

```
System.out.println("par1 = " + par1 + " and par2 = " + par2); 
```

在进行类型转换之前，只是为了验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T08:56:05.010

req.getParameter("param1") 返回 null 吗？你在传递这些参数吗？

解析前检查：

```
if(par1 != null) lat =Double.parseDouble(par1);
if(par2 != null) lon= Double.parseDouble(par2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T09:08:32.390

这样试试看

```
 FileWriter fstream = new FileWriter(new File("out2.txt"),true);
        req.setCharacterEncoding("UTF-8");
        resp.setCharacterEncoding("UTF-8");
        String par1 =  req.getParameter("param1");
        String par2 = req.getParameter("param2");
        BufferedWriter out = new BufferedWriter(fstream);

        out.append(par1);
        out.append("  ");
        out.append(par2);
        double lat=0.0;
        double lon=0.0;
        try
        {
///////////////////////////null Condition chk within Single try///////////

         if ((part1.equals(null)) & (part2.equals(null)))
        {
          lat =Double.parseDouble(par1);
          lon= Double.parseDouble(par2);
        }

///////////////////////////null Condition chk within Single try///////////

        }
        catch(NumberFormatException e)
        {
          System.out.println("One or both of the value is null");
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T09:21:18.650

```
 String par1 =  (String) req.getParameter("param1");
 String par2 =  (String) req.getParameter("param2"); 
```

进行此更改并尝试。

# .net - 在 64 位系统上以 32 位运行 AnyCPU

> ID：10945664
> 
> 赞同：9
> 
> 时间：2012-06-08T08:46:54.123
> 
> 标签：.net, 32bit-64bit

我们正在使用似乎被编译为 AnyCPU 的第三方程序集。

但是，我们有许多应用程序安装，这会导致问题。此第三方程序集使用 oracle 数据访问库，并且不适用于仅安装了 32 位 oracle 客户端的 64 位计算机。

安装一个额外的 64 位 oracle 客户端是可能的，但也很昂贵（需要很多时间，许多机器必须更新等）

有没有办法强制 AnyCPU .Net 程序集以 32 位运行而无需重新编译？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T08:48:23.420

看看[CorFlags.exe](http://msdn.microsoft.com/en-us/library/ms164699%28v=VS.100%29.aspx)。

示例（设置 32BIT 标志）：

```
corflags [path]\[YourAssembly.exe] /32Bit+ 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-08T08:53:49.090

假设您正在构建引用 AnyCPU 第三方程序集的 .EXE，您需要将项目构建为 x86。该项目可以引用 AnyCPU 程序集，但被标记为 x86，它将在 32 位和 64 位 Windows 上作为 32 位进程运行。

# javascript - 网络工作者和访问附加到窗口对象的对象

> ID：10945672
> 
> 赞同：6
> 
> 时间：2012-06-08T08:47:08.790
> 
> 标签：javascript, html, web-worker

我有一个像这样创建的 ember 应用程序：

```
window.App = Ember.Application.create({}); 
```

我想对网络工作者进行一些后台处理。

如何在单独的 Web 工作线程中访问窗口对象或其他一些全局对象？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-08T09:13:10.887

简短的回答。你不能。

Web 工作者唯一可用的资源是他们使用从 JavaScript 文件加载的资源`importScripts()`或通过`postMessage()`.

但是，您现在可以将对象传递给它们。它们会自动序列化和反序列化为 JSON。

此外，Worker 无法访问本地存储。

# java - 是什么让 Scala 可扩展？

> ID：10945674
> 
> 赞同：5
> 
> 时间：2012-06-08T08:47:14.760
> 
> 标签：java, scala

我是一个学习 Scala 的新手，据说它是一种[可扩展的语言](http://en.wikipedia.org/wiki/Scala_%28programming_language%29)。我知道 Scala 代码编译成 JVM 兼容的字节码。我的问题是什么使 Scala 编译器生成“**可扩展的字节码**”，为什么 java 编译器，即 Javac 不能做同样的事情？

# python - gcc：无法找到 Python.h，当它在 /usr/includes/python2.7 中时？

> ID：10945675
> 
> 赞同：4
> 
> 时间：2012-06-08T08:47:16.887
> 
> 标签：python, c, gcc, include, include-path

我的 C 代码：

```
#include<stdio.h>
#include "Python.h"

int main()
{
    printf("Hello World");
    return 0;
} 
```

我已经`python-dev`为 python2.7 安装了。此外，`Python.h`可在`/usr/include/python2.7`.

`gcc myfile.c`# Python.h: 没有这样的文件或目录

我什至尝试过： `gcc -L/usr/include/python2.7/ myfile.c`# Python.h：没有这样的文件或目录

`ujson`我尝试使用 pip构建一个 python c 模块`Python.h`，它能够编译。

**我错过了什么/做错了什么？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T08:50:30.380

它应该是`-I`，而不是`-L`：

```
gcc -I/usr/include/python2.7 myfile.c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:57:06.603

采用

```
#include <Python.h> 
```

代替

```
#include "Python.h" 
```

包括[头](https://stackoverflow.com/questions/21593/what-is-the-difference-between-include-filename-and-include-filename)文件。Python.h 文件应该是包含的第一个文件。

@see[使用 C 或 C++ 扩展 Python](http://docs.python.org/extending/extending.html)（第 1.1 节注释）

> 由于 Python 可能会定义一些影响某些系统上的标准头文件的预处理器定义，因此您必须在包含任何标准头文件之前包含 Python.h。

# mocking - 模拟存根深层遗留对象

> ID：10945679
> 
> 赞同：0
> 
> 时间：2012-06-08T08:47:29.507
> 
> 标签：mocking, tdd, stub

我不确定我是否仍然知道如何“单元”测试这样的遗留代码......

我的大部分代码是从 A 类的对象中放置和删除东西，该对象内部有许多其他对象，依此类推，就像一棵树。在这棵树的叶子上是一个由 OR 映射的数据库行支持的数据项对象...创建一个真实的 classA 对象是一项不平凡的任务，因为它涉及创建这棵树的所有节点。我什至看不到 A 中超过一级的课程。

当 classAobj 为状态 X 时需要执行我的代码，并且此代码会将 classAobj 移动到状态 Y

让 classAobj 进入状态 X 的最佳方法是什么？

我听说过 Mock 对象和 Stub 对象，但不确定我将如何处理任何有深切期望的事情，以及当我需要所有树时如何创建存根？

您如何发现 classAobj 需要哪些其他对象才能运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:24:14.280

将单元测试添加到不是为单元测试而设计的遗留代码非常困难，并且您可能最终编写的测试真的只是想在稍后重构整个对象树时变得垃圾。

我会考虑编写集成测试，因为这将为您提供最大的重构自由度，但设置成本很高。

# iphone - 如何使用代码伪造 iPhone 中的当前位置

> ID：10945682
> 
> 赞同：1
> 
> 时间：2012-06-08T08:47:35.873
> 
> 标签：iphone, sdk, location

我正在使用核心定位框架。是否可以伪造当前位置以用于社交网络应用程序？如果是，那怎么办？

请帮忙。

先感谢您。

:: 已编辑 ::

在浏览了更多内容后，我为此编写了代码，它可能会使用 CLLocationManager 类的重写方法进行更改。像下面这样的代码：

```
@interface MyHeading : CLHeading
        -(CLLocationDirection) newHeading;
-(CLLocationDirection) new1Heading;
@end

@implementation MyHeading
-(CLLocationDirection) newHeading { return 55; }
-(CLLocationDirection) new1Heading { return 56; }
@end

@implementation CLLocationManager (LF)
- (void)setFLocation {
    CLLocation *location = [[CLLocation alloc] initWithLatitude:40.778023 longitude:-73.981935];
    [[self delegate] locationManager:self didUpdateToLocation:location fromLocation:nil];

    id heading  = [[MyHeading alloc] init];
    [[self delegate] locationManager:self didUpdateHeading: heading];
}

-(void)startUpdatingHeading {
    [self performSelector:@selector(setFLocation) withObject:nil afterDelay:0.1];
}

- (void)startUpdatingLocation {
    [self performSelector:@selector(setFLocation) withObject:nil afterDelay:0.1];
}
@end 
```

谢谢大家的分享。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:52:34.170

试试下面的[框架。](https://github.com/futuretap/FTLocationSimulator)

# javascript - 如何以百分比设置 YUI 数据表列宽？

> ID：10945683
> 
> 赞同：0
> 
> 时间：2012-06-08T08:47:46.467
> 
> 标签：javascript, css, yui

在 YUI 中，数据表列宽设置为

var myColumnDefs = [ {key:"Date",formatter:YAHOO.widget.DataTable.formatDate, sortable:true, width:100}, {key:"To", sortable:true, width:10}, {key:"来自", sortable:true,width:70}, {key:"Subject", sortable:true, } ];

宽度默认以像素为单位处理。我想以 %age 为单位取这个宽度。

# titanium - android上没有对话框的ActivityIndi cator？

> ID：10945684
> 
> 赞同：0
> 
> 时间：2012-06-08T08:47:47.663
> 
> 标签：titanium

我是钛的新手，我正在尝试创建一个不确定的预加载器（或在钛中称为活动指示器）。问题是在android上，活动指示器会自动放置在对话框中，阻止用户与应用程序交互，直到对话框关闭。

有没有办法在不使用 android 对话框的情况下添加一个简单的不确定预加载器？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:44:52.760

根据[Appcelerator Docs](http://docs.appcelerator.com/titanium/2.1/#!/api/Titanium.UI.ActivityIndicator-property-cancelable)

> 在 Android 和 iOS 上必须以不同的方式使用活动指示器：
> 
> 在 Android 上，活动指示器是一个阻止 UI 的模式对话框。调用 show 显示指示器，调用 hide 删除它。

您可以使用的一个选项是将 cancelable 属性设置为 true，这让用户可以通过按下 BACK 按钮来取消活动指示器对话框。

Appcelerator 文档说：

> 活动指示器可用于在 UI 中显示操作的进度，以让用户知道正在执行某些操作。活动指示器由旋转动画和可选文本消息组成，用于指示长度不确定的正在进行的活动。要显示进度，请改用***Titanium.UI.ProgressBar*** 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:06:46.680

```
Titanium.App.addEventListener('show_indicator', function(e) {

showIndicator(e.title_msg, e.sub_msg);
});

function showIndicator(title_msg, sub_msg) {

    var actIndG = Titanium.UI.createActivityIndicator({
        style : Titanium.UI.iPhone.ActivityIndicatorStyle.BIG,
        top :10
        left : 130,
        height : 60,
        width : 60,
        height : screenheigth,
        width : screenwidth

    });
    indView.add(actIndG);
    indWin.open();
 } 
```

如果对您有帮助，请投票或标记为最佳。

# php - 如果在移动设备上查看网站，则更改样式

> ID：10945690
> 
> 赞同：2
> 
> 时间：2012-06-08T08:48:11.443
> 
> 标签：php, javascript, html

> **可能重复：**
> [CSS 媒体类型：如何为移动设备加载 CSS？](https://stackoverflow.com/questions/1248756/css-media-type-how-to-load-css-for-mobile)

我正在进行一个项目，您可以在源代码中看到我使用的所有代码。

在主页上有一个轻量级的 javascript 滑块，问题是由于某种原因它在移动设备上使用时不显示。那么任何人都可以帮我想出一个解决方案，或者告诉我如果在手机上查看它，我该如何展示不同的东西？

为了显示不同的 IE 样式，我使用了这个：

```
<!--[if IE]>
<link rel="stylesheet" type="text/css" href="css/ie.css" />
<![endif]--> 
```

手机有类似的吗？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T08:50:50.973

您可以为此使用媒体查询：http: [//www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

基本上它看起来像这样：

```
@media only screen and (max-device-width: 480px) {
   /* .... styles */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:52:03.917

要使用 PHP 执行此操作，您可以使用类似于以下内容的内容：

```
// check if user agent is mobile
function isOnMobile()
{
  // match popular mobile devices
  if (preg_match('/phone|iphone|itouch|ipod|symbian|android|htc_|htc-|palmos|blackberry|opera mini|mobi|windows ce|nokia|fennec|hiptop|kindle|mot |mot-|webos\/|samsung|sonyericsson|^sie-|nintendo|mobile/', strtolower($_SERVER['HTTP_USER_AGENT'])))
  {
    return TRUE;
  }
  return FALSE;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T08:54:17.617

尝试使用媒体查询：

```
@media (max-device-width: 500px) {

}
@media (min-device-width: 500px) {

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T09:04:47.780

有些人认为浏览器嗅探是一种不好的做法，因此媒体查询可能是一个很好的解决方案。

从我的角度来看，由于移动设备也有不同的浏览器，并且每个浏览器的行为都不同（特别是黑莓设备）。您将需要对媒体查询进行浏览器嗅探。

每个移动设备都有不同的屏幕分辨率，因此您需要为每个要支持的移动设备提供不同的 css 条件。

此链接上有一个非常好的教程。

[如何使用媒体查询](http://www.vanseodesign.com/css/media-queries/)

[分辨率特定的样式表](http://css-tricks.com/resolution-specific-stylesheets/)

[Javascript 浏览器检测](http://www.w3schools.com/js/js_browser.asp)

# c# - 将图像保存到数据库

> ID：10945692
> 
> 赞同：2
> 
> 时间：2012-06-08T08:48:26.463
> 
> 标签：c#, sql-server, asp.net-mvc-3, image

我有一些简单的实体，现在需要一个个人资料图像。这样做的正确方法是什么？因此，这是一对一的关系，一张图像仅与一个实体相关，反之亦然。此图像应通过网络表单上传，并插入相关实体。

如果有人能指出我正确的方向，那么如何将图像保存到数据库和相关实体将会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T08:58:31.650

只是一个旁注：**我认为将图像存储在 db 中不是一个好主意**。

一般来说，在 db 中存储图像并不是一个好主意，因为 dbs 旨在存储文本而不是大的二进制块。存储图像的路径并将图像放在文件夹中要好得多。如果您想确定具有实体 ID (1323.jpg) 的 1 对 1 关系名称图像。

如果您想拥有图像路径，您应该遵循一些准则（一般代码防御性）：

*   在上传图像时检查图像是否有效（甚至对图像头进行二进制检查）
*   在插入新实体的情况下，不允许覆盖现有图像。
*   将图像命名为主键（1.jpg、2.jpg）
*   在加载图像时不要假设图像会在那里。
*   不允许（如果可能）与图像进行手动交互（禁止在机器中远程处理并将图像从一个地方复制到另一个地方）。手动交互可能会导致不一致。

但我认为出于某种原因你应该这样做。**所以为了达到你想要的：**

**数据库设计**

*   在表中创建一个二进制列（binary 或 varbinary）
*   如果您在具有 1-1 关系的不同表中创建它会更好。然而，这个想法是避免在水合实体时加载图像。仅在需要时使用延迟加载方法来加载图像。
*   当您进行大选择时，您必须避免加载图像（例如，如果您想在一个组合中加载所有实体，请避免 SELECT * From 不管），因为它会加载数千张图像。正如我所说，这可以通过将图像放在不同的表中，或在 SELECT 中仅加载适当的列或通过延迟加载来完成。（或者更好的是在数据库中没有图像，只有路径）

**C# 代码**

*   使用 BynaryReader 阅读
*   用户字节数组来存储它

*   检查此链接以获取代码示例： http: [//www.codeproject.com/Articles/21208/Store-or-Save-images-in-SQL-Server](http://www.codeproject.com/Articles/21208/Store-or-Save-images-in-SQL-Server)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T08:58:24.963

代码很简单，但为什么是数据库？如果这是一个网站，为什么不将它保存到磁盘上可以轻松引用的位置呢？

数据库经过优化以存储已知大小和相对较小的数据。您的图像长度很可能超过 8KB（意味着它是 MAX 数据类型）。该图像将存储在与您的“个人资料”不同的行/页上。

就我个人而言，我会将图像保存在一个已知文件夹中，并使用 id 作为图像名称。对于没有图像并使用标准 gif 或类似文件的配置文件，可能通过将配置文件 id 的 simlinks/hardlinks 连接到通用 gif 来保持简单/修剪。

```
public class Profile
{
    public int Id {get;}
    public string Name {get; private set;}
    public Image Picture {get; private set;}

    public void Save()
    {
        using (var connection = new SqlConnection("myconnectionstring"))
        using (var command = new SqlCommand("", connection))
        {
            command.CommandText =
                "UPDATE dbo.TblProfile " +
                "SET " +
                    "Name = @name, " +
                    "Picture = @picture " +
                "WHERE ID = @id";
            command.Parameters.AddWithValue("@name", Name);
            command.Parameters.AddWithValue("@picture", Picture);
            command.Parameters.AddWithValue("@id", Id);
            command.ExecuteNonQuery();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T08:56:48.263

我认为以下链接将为您提供解决方案，

[上传图片并保存在数据库中](http://csharpdotnetfreak.blogspot.in/2009/07/fileupload-control-save-images-database.html)

# asp.net-mvc - 以 asp.net mvc 框架的模块化方法创建数据库表

> ID：10945697
> 
> 赞同：0
> 
> 时间：2012-06-08T08:48:53.737
> 
> 标签：asp.net-mvc, entity-framework-4, repository-pattern, dbcontext

我正在尝试扩展 Asp.NET MVC 框架，以便制作模块。我希望能够制作单独的迷你 mvc 项目，将它们组合在 mvc-app 中并构建/安装整个东西。这样，我可以将所需的模块选择到一个应用程序中。

要制作迷你 MVC 项目，我想使用这种方法：[http ://www.wynia.org/wordpress/2008/12/aspnet-mvc-plugins/](http://www.wynia.org/wordpress/2008/12/aspnet-mvc-plugins/)

现在我正在尝试使用多个 dbcontexts 构建数据库。我使用 IRepository 模式来实现这一点。首先，我使用这种模式创建了一个实体框架 (4.3) 项目，并且能够使用 OnModelCreating 事件创建一个完整的数据库。

```
public class Context : DbContext
    {
        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            base.OnModelCreating(modelBuilder);

            //    /* Use MEF to load all plugins. I'll use the mock interface IPlugin */

            List<IContext> Contexts = new List<IContext>();
            Contexts.Add(new BikeContext());
            Contexts.Add(new CarContext());
            Contexts.Equals(new BlogContext());

            foreach (IContext context in Contexts)
                context.Setup(modelBuilder);
        }   
    } 
```

这是一个运行安装程序并在每个子上下文中的示例函数：

```
public class CarContext : Context, IContext
    {
        public List<Car> Cars { get; set; }

        void IContext.Setup(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Car>().ToTable("Cars");
            modelBuilder.Entity<Car>().HasKey(car => car.Id);               
        }
    } 
```

此存储库来自[MEF Plugins 和 EF CodeFirst - How？](https://stackoverflow.com/questions/8730830/mef-plugins-and-ef-codefirst-how)

如果我在 mvc 应用程序中使用它（默认使用 EF，对吗？） OnModelCreating 函数会运行，设置函数也会运行，但它既不创建数据库也不创建表。最后我得到一个错误，因为应用程序在尝试选择数据时无法连接到数据库。这是合乎逻辑的，因为没有数据库。

我基本上想要的是在 MVC 应用程序中使用 mef-plugins-and-ef-codefirst 解决方案。我错过了什么吗？是否有另一种方法可以在 MVC/EF 的代码中手动创建表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T19:24:50.593

好吧，我自己找到了解决方案：

我将此添加到控制器的索引中：

```
Context context = new Context();
            context.Database.CreateIfNotExists(); 
```

并将 CarContext 中的 public List 改为 public DbSet。

它现在用表格制作数据库，我通过 CarContext 获取数据。

# android - 在 adb_usb.ini 中进行更改是否与编辑 51-android.rules 相同？

> ID：10945698
> 
> 赞同：3
> 
> 时间：2012-06-08T08:48:57.043
> 
> 标签：android

我注意到在某些情况下您需要在 /etc/udev/rules.d/51-android.rules 中添加一些供应商 ID 和产品 ID。例如要添加的行如：SUBSYSTEM=="usb", ATTR{idVendor}=="05c6", ATTR{idProduct}=="9025", MODE="0666", OWNER=""

同样，通过添加以下行来编辑 ~/.android/adb_usb.ini 即可：0x05c6; 0x9025

这些指令是否在做同样的事情？另外，当我们运行命令时： android update adb

adb_usb.ini 是新生成的，之前所做的更改将被覆盖。

~/.android/adb_usb.ini 到底是干什么用的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T17:57:06.113

Apkudo 创建了一个 adb_usb.ini，其中包含每个已知的 Android 供应商 ID（以及地球上所有其他 USB 供应商）。这是如何做到的：

要克隆到您的 .android 目录（以便通过 git 轻松更新）：

```
$ cd ~/.android
$ rm adb_usb.ini
$ git init
$ git remote add origin git@github.com:apkudo/adbusbini.git
$ git pull origin master 
```

或者，只需将最新文件直接复制到您的 .android 中：

```
$ curl -L http://raw.github.com/apkudo/adbusbini/master/adb_usb.ini \
 --O ~/.android/adb_usb.ini 
```

如果您对数据有其他用途，可解析列表包含在 VENDORS 中，使用以下格式：

这里有一个关于它的博客：http: [//blog.apkudo.com/2012/08/21/one-true-adb_usb-ini-to-rule-them-all/](http://blog.apkudo.com/2012/08/21/one-true-adb_usb-ini-to-rule-them-all/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T08:53:32.503

绝对不一样：udev 规则是针对 udev 的，它们的目的是确保您获得读取和写入插入手机时创建的设备的权限。adb_usb.ini 是 adb 的配置文件，但我不确定它到底是做什么的。也许 adb 正在即时更改权限或进行自己的访问管理，但它必须以 root 身份运行才能做到这一点。如果这被记录在某个地方会很有趣。除此之外，请检查 adb 代码。编辑：显然它基于文件的内容构建了一系列受支持的供应商。因此，如果您想添加 adb 不知道的供应商，则必须将其添加到 ini 文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-28T05:30:40.737

*   `/etc/udev/rules.d/51-android.rules`用于udev。
*   `~/.android/adb_usb.ini`用于亚行。

# iphone - Objective-C - 如何测试 UIPopoverArrowDirection 的值？

> ID：10945699
> 
> 赞同：0
> 
> 时间：2012-06-08T08:49:03.467
> 
> 标签：iphone, objective-c, ios, ipad, uipopovercontroller

当我调用该方法时

```
- (void)presentPopoverFromRect:(CGRect)rect inView:(UIView *)view 
permittedArrowDirections:(UIPopoverArrowDirection)arrowDirections 
animated:(BOOL)animated 
```

UIPopoverController，我通过 UIPopoverArrowDirectionUp | UIPopoverArrowDirectionDown 作为 allowedArrowDirections 参数的参数。

我的问题很简单：

如何在 arrowDirections 中测试 UIPopoverArrowDirectionDown 的存在？

```
if (arrowDirections == UIPopoverArrowDirectionDown)
    NSLog(@"arrowDirections contains UIPopoverArrowDirectionDown"); 
```

不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:00:46.080

```
if (arrowDirections & UIPopoverArrowDirectionDown == UIPopoverArrowDirectionDown) {
    NSLog(@"arrowDirections contains UIPopoverArrowDirectionDown");
} 
```

# r - 计算列子集上的行均值

> ID：10945703
> 
> 赞同：68
> 
> 时间：2012-06-08T08:49:24.170
> 
> 标签：r, dataframe

给定一个示例数据框：

```
C1<-c(3,2,4,4,5)
C2<-c(3,7,3,4,5)
C3<-c(5,4,3,6,3)
DF<-data.frame(ID=c("A","B","C","D","E"),C1=C1,C2=C2,C3=C3)

DF
    ID C1 C2 C3
  1  A  3  3  5
  2  B  2  7  4
  3  C  4  3  3
  4  D  4  4  6
  5  E  5  5  3 
```

创建包含`ID`列和每行平均值的第二个数据框的最佳方法是什么？像这样的东西：

```
ID  Mean
A    3.66
B    4.33
C    3.33
D    4.66
E    4.33 
```

类似于：

```
RM<-rowMeans(DF[,2:4]) 
```

我想保持手段与他们`ID`的一致。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-08T12:06:27.787

**计算列子集上的行均值：**

创建一个新的 data.frame，它将 DF 的第一列指定为名为 ID 的列，并计算该行上所有其他字段的平均值，并将其放入标题为“平均值”的列中：

```
data.frame(ID=DF[,1], Means=rowMeans(DF[,-1]))
  ID    Means
1  A 3.666667
2  B 4.333333
3  C 3.333333
4  D 4.666667
5  E 4.333333 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-06-08T09:03:16.810

从您的数据框开始`DF`，您可以使用该`data.table`包：

```
library(data.table)

## EDIT: As suggested by @MichaelChirico, setDT converts a
## data.frame to a data.table by reference and is preferred
## if you don't mind losing the data.frame
setDT(DF)

# EDIT: To get the column name 'Mean':

DF[, .(Mean = rowMeans(.SD)), by = ID]

#      ID     Mean
# [1,]  A 3.666667
# [2,]  B 4.333333
# [3,]  C 3.333333
# [4,]  D 4.666667
# [5,]  E 4.333333 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-04-16T03:08:36.943

`$`您可以在数据框中创建一个与均值对应的新行

```
DF$Mean <- rowMeans(DF[,2:4]) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-05-15T14:59:40.757

使用*dplyr*：

```
library(dplyr)

# exclude ID column then get mean
DF %>%
  transmute(ID,
            Mean = rowMeans(select(., -ID))) 
```

或者

```
# select the columns to include in mean
DF %>%
  transmute(ID,
            Mean = rowMeans(select(., C1:C3)))

#   ID     Mean
# 1  A 3.666667
# 2  B 4.333333
# 3  C 3.333333
# 4  D 4.666667
# 5  E 4.333333 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-12T19:42:44.797

`rowMeans`很好，但是如果您仍在尝试围绕`apply`函数系列进行思考，那么这是开始理解它的好机会。

```
DF['Mean'] <- apply(DF[,2:4], 1, mean) 
```

请注意，我正在做的作业与第一个示例略有不同。这种方法更容易将其合并到 for 循环中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-15T09:10:32.350

（另一个使用`pivot_longer`&`pivot_wider`来自最新`Tidyr`更新的解决方案）

您应该尝试使用 pivot_longer 将数据从宽格式变为长格式 阅读有关 pivot_longer 和 pivot_wider 的最新 tidyR 更新（[https://tidyr.tidyverse.org/articles/pivot.html](https://tidyr.tidyverse.org/articles/pivot.html)）

```
library(tidyverse)
C1<-c(3,2,4,4,5)
C2<-c(3,7,3,4,5)
C3<-c(5,4,3,6,3)
DF<-data.frame(ID=c("A","B","C","D","E"),C1=C1,C2=C2,C3=C3) 
```

在这里输出

```
 ID     mean
  <fct> <dbl>
1 A      3.67
2 B      4.33
3 C      3.33
4 D      4.67
5 E      4.33 
```

# parsing - 通过 yyparse 解析第二个文件时要遵循的步骤

> ID：10945706
> 
> 赞同：0
> 
> 时间：2012-06-08T08:49:45.280
> 
> 标签：parsing, yacc, lex

我想解析两个文件。我有生成解析器的 Yacc/lex 代码。

当我解析第一个文件（a.txt）时它工作正常，但是当我解析第二个文件（b.txt）时它返回错误（语法错误），但是当我首先解析第二个文件（b.txt）时它可以解析它顺利。

我的猜测是，在开始读取第二个文件时读取第一个文件后，某些缓冲区或状态不会被清除。所以我想知道在继续解析第二个文件之前我是否必须重置解析器维护的一些缓冲区或状态。

我无法在此处粘贴我的代码，因为它太大了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T10:54:14.937

实际上，我通过其他一些问题找到了答案。问题在于清除缓冲区，所以如果你添加一个

> `YY_FLUSH_BUFFER`

在打开新文件之前，它可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:06:23.150

你想要一个可重入解析器。Bison 至少支持这一点，我不确定 yacc 是否会这样做，但切换到 bison 应该是无痛的。

添加`%pure-parser`你的语法文件。

[http://www.delorie.com/gnu/docs/bison/bison_66.html](http://www.delorie.com/gnu/docs/bison/bison_66.html)

# r - 加速大型数据集的 plot() 函数

> ID：10945707
> 
> 赞同：27
> 
> 时间：2012-06-08T08:49:45.653
> 
> 标签：r, plot

我正在使用`plot()`超过 100 万个数据点，结果非常慢。

有什么方法可以提高速度，包括编程和硬件解决方案（更多的内存、显卡......）？

绘图数据存储在哪里？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-08T10:11:36.583

[（这个问题与Scatterplot with too many points](https://stackoverflow.com/questions/7714677/scatterplot-with-too-many-points/16122003#16122003)密切相关，尽管这个问题关注的是在大散点图中看到任何东西的难度而不是性能问题......）

hexbin 图实际上向您展示了一些东西（不像@Roland 在评论中提出的散点图，它可能只是一个巨大的、缓慢的、blob），并且在我的机器上大约需要 3.5 秒，例如：

```
set.seed(101)
a<-rnorm(1E7,1,1)
b<-rnorm(1E7,1,1)
library(hexbin)
system.time(plot(hexbin(a,b)))  ## 0.5 seconds, modern laptop 
```

![在此处输入图像描述](../Images/89310d2bd3c3c656048420e7839ad00f.png)

另一个稍慢的替代方案是 base-R`smoothScatter`函数：它绘制平滑密度加上所要求的尽可能多的极值点（在本例中为 1000）。

```
system.time(smoothScatter(a,b,cex=4,nr=1000))  ## 3.3 seconds 
```

[![在此处输入图像描述](../Images/72eebc1b404607feed95cf239c6f2e2f.png)](https://i.stack.imgur.com/M1UVc.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-11-04T17:18:59.763

一个简单快捷的方法是设置`pch='.'`. 性能如下图

```
x=rnorm(10^6)
> system.time(plot(x))
  user  system elapsed 
  2.87   15.32   18.74 
> system.time(plot(x,pch=20))
  user  system elapsed 
  3.59   22.20   26.16 
> system.time(plot(x,pch='.'))
  user  system elapsed 
  1.78    2.26    4.06 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T11:32:48.130

你看过 tabplot 包了吗？它专为大数据而设计 [http://cran.r-project.org/web/packages/tabplot/](http://cran.r-project.org/web/packages/tabplot/)我使用它比使用 hexbin 更快（甚至使用默认的向日葵图进行过度绘图）

我还认为 Hadley 在 DS 的博客上写了一些东西，修改 ggplot for big data 在[http://blog.revolutionanalytics.com/2011/10/ggplot2-for-big-data.html](http://blog.revolutionanalytics.com/2011/10/ggplot2-for-big-data.html)

"""我目前正在与另一名学生 Yue Hu 合作，将我们的研究转化为强大的 R 包。""" 2011 年 10 月 21 日

也许我们可以问 Hadley 更新的 ggplot3 是否准备好

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-26T19:50:33.627

这个问题是在`reticulate`R 中运行 Python 命令的包还不存在时提出的。

现在可以调用高效的[`matplotlib`Python 库](https://matplotlib.org/)来绘制大型数据集。

`matplotlib`[此处](https://stackoverflow.com/a/63089600/13513328)描述了 R 中的设置。

绘制 100 万个点`matplotlib`大约需要 1.5 秒：

```
library(reticulate)
library(png)

mpl <- import("matplotlib")
mpl$use("Agg") # Stable non interactive back-end
plt <- import("matplotlib.pyplot")
mpl$rcParams['agg.path.chunksize'] = 0 # Disable error check on too many points

# generate points cloud
a <-rnorm(1E6,1,1)
b <-rnorm(1E6,1,1)

system.time({
  plt$figure()
  plt$plot(a,b,'.',markersize=1)
  # Save figure
  f <- tempfile(fileext='.png')
  plt$savefig(f)
  # Close figure
  plt$close(plt$gcf())
  # Show image
  img <- readPNG(f)
  grid::grid.raster(img)
  # Close temporary file
  unlink(f)
}) 
```

![](../Images/38b94ff74e2816850fc6d4af8c3fde05.png)

```
#>        User      System       Total 
#>        1.29        0.15        1.49 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2020-07-26 创建)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-09T22:12:11.033

这里没有提到，但是绘制到高分辨率光栅图像是另一个合理的选择（如果你真的想绘制一个巨大的 blob :-)）。创建速度会很慢，但生成的图像会是合理的大小，并且会很快打开。因为 PNG[会根据相邻像素的相似性来压缩文件](https://en.wikipedia.org/wiki/Portable_Network_Graphics#Compression)，所以随着分辨率的增大，blob 的外部（全白）和内部（全黑）不会占用更多存储空间 - 您所做的只是渲染更详细的斑点边缘。

```
set.seed(101)
a<-rnorm(1E7,1,1)
b<-rnorm(1E7,1,1)
png("blob.png",width=1000,height=1000)
system.time(plot(a,b)) ## 170 seconds on an old Macbook Pro
dev.off() 
```

生成的图像文件为 123K，并且可以通过稍微增加渲染大小（创建和打开文件）和文件大小来获得更高的分辨率。

[![在此处输入图像描述](../Images/79d8c967cc131969d8131b06c7b2d271.png)](https://i.stack.imgur.com/rJ2xj.png)

# ios - 适用于从 iOS 应用程序链接到 iTunes 的规则

> ID：10945708
> 
> 赞同：0
> 
> 时间：2012-06-08T08:49:46.420
> 
> 标签：ios, hyperlink, itunes, hig

我从我的应用程序链接到各种 iTunes 产品，但我似乎找不到任何涵盖此的规则/文档。我可以使用 iTunes 徽标吗？在链接机制方面我需要做些什么特别的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:04:02.013

有关商标的建议，请参见此处的第 8.1 节：

[https://developer.apple.com/appstore/resources/approval/guidelines.html](https://developer.apple.com/appstore/resources/approval/guidelines.html)

至于链接到 iTunes 产品，我想您正在使用`openURL:`调用`UIApplication`来执行此操作，这就足够了。

希望这可以帮助。

# selenium - 如何使用 Selenium RC 读取和保存 html 文本？

> ID：10945709
> 
> 赞同：0
> 
> 时间：2012-06-08T08:49:47.603
> 
> 标签：selenium, selenium-rc

在我正在测试的网站中，我创建了一个新客户。创建此客户后，将为该客户分配一个新 ID，该 ID 不会作为表单字段存储在客户网页中，而是以纯文本形式存储在首页上，例如 (Customer 601619 - name1)

我有这个 html 标签

```
<h1> Customer 601619 - name1 </h1> 
```

我的问题是如何使用 Java selenium RC 检索此客户 ID

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:14:18.307

使用以下代码

```
String str = seleniumobj.getText("//h1");
System.out.println(str); 
```

`Customer 601619 - name1`上面的代码在控制台 打印

# php - 存储用户密码（服务器端），将其连接到 cookie - 安全问题

> ID：10945712
> 
> 赞同：1
> 
> 时间：2012-06-08T08:50:01.313
> 
> 标签：php, security, session, cookies, session-hijacking

我正在尝试找到一个安全的解决方案来解决我遇到的关于 Cookie/会话和数据库数据的问题。

我已经阅读了不同的文章，例如[http://www.devshed.com/c/a/PHP/Sessions-and-Cookies/](http://www.devshed.com/c/a/PHP/Sessions-and-Cookies/)，这些文章解释了不同的 Cookie 盗窃和会话固定方法，以了解我的安全问题要去面对。

问题如下：我有存储数据条目的数据库表`AES_ENTRYPT()`，使用用户密码对其进行加密。这意味着，即使要读取信息，我也必须使用**明文密码**来解密数据。

如果我只将密码存储在变量中，这可能不会成为问题，`$_SESSION`但这将拒绝通过 cookie 保持登录数天的能力。

换句话说，我必须将明文密码存储在 cookie 中（至少，以使该功能保持登录状态）

现在，您可以使用加盐的 MD5() 或 SHA-256() 哈希作为标识符，而不是密码。但我不能用哈希解密数据。这意味着我必须**存储密码服务器端**（在数据库中？还是有其他安全方式？），将它连接到标识符 - 但是密码对于有权访问数据库的每个人来说都是可以访问的，并且可以直接解密那里的数据。

有没有一种安全的方法来连接我存储在 cookie 中的标识符，并将其连接到服务器存储的用户输入（密码/帐户名），而实际上却让可以访问数据库的人有可能读取该服务器端存储用户输入？

**要求是**，即使在最坏的情况下，有人转储了数据库和 cookie（但无法访问服务器 RAM），该人不应该能够访问用户密码并用它解密存储的数据。

为避免混淆，简单回顾一下：

这不是用户识别问题 - 登录过程单独发生（通过通常的方式：密码/登录数据的 md5() 哈希）。我的问题是，用户数据（如地址、姓名、电子邮件）是用用户密码加密的。所以我需要登录密码来解密它们。如果用户只是登录，这没问题，因为我在 $_POST 数据中有密码，并且可以使用它。但是登录后呢？只要 $_POST 或 $_SESSION 消失，我就无法再次解密数据。

* * *

**可能的解决方案**

经过一些输入后，我可能想出了一个方法——它并不完全安全，但它应该工作得很好：

（这里与登录/用户认证过程是分开的，我只指加密/密钥部分）

```
user registers OR changes password:

    generate a new hash out of $email and $password => $auth

    do NOT store $auth in the usertable, just keep it

    generate a new random key for the user => $key (only on registering, not on pw change)

    encrypt $key with $auth, storing it into the usertable

    encrypt all user data with $key

user logs in (or after registering / password change):

    generate $auth ($password + $email)

    set cookie with $auth as variable

user is logged in (cookie / session / after login):

    decrypt $key with $auth

    use $key for data encryption / decryption (serverside) 
```

这里唯一的问题是，如果有人可以获得 $auth，他们可以解密 $key，然后解密数据。我正在考虑为每次登录生成一个新的 $auth，但这会引发一个问题，如果旧的 $auth 丢失，我如何解密密钥。这与令牌之间的区别在于，这增加了另一层，其中令牌不是加密密钥本身。无论如何，我认为解决方案是最接近我想要的，在公钥/私钥之外。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:53:31.877

在您的用户表中有一个名为的字段，`token`当您第一次插入用户时，它可以是随机散列......

```
$token = md5(uniqid(mt_rand(), true)); 
```

然后将用户 ID 和令牌存储在 cookie 中，您可以使用它来查找用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:01:55.570

据我了解您的要求，您不能在客户端或服务器端存储密码。因此，您根本无法存储它。让用户为每个页面加载输入密码。

您可以使用例如 memcached 或 APC 将内容存储在 RAM 中，或者通过创建您自己的可以在服务器上与之通信的软件。这不会为您提供太多增强的安全性，因为任何有权访问服务器（通过 shell）的人都可以以与您的软件完全相同的方式询问密码。在我看来，它破坏了“无文件，无数据库”要求的大部分目的，但它可能是您的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T09:23:37.137

关键是想办法把一条信息存储在cookie中，一条信息存储在数据库中，一起得到明文密码，但单独是没用的。

我能想到的最好办法是创建一个类似于@fire 建议的随机令牌：

```
$token = md5(uniqid(mt_rand(), true));` 
```

然后使用这个令牌加密密码，并将加密后的密码与 cookie 一起存储在 cookie 中`userid`，这样你就知道这个加密的部分是什么了。

当客户端返回时，可以使用cookie来检索数据库的row by `id`，您可以从数据库中拉取token来解密cookie信息，从而得到明文密码。这样，如果有人破解了 cookie，他们就会得到一个加密的密码；如果他们进入数据库，他们将获得解锁密码的密钥，但没有加密密码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T10:20:07.880

### 保持用户登录

使用简单的令牌系统，将令牌存储在用户数据库和 cookie 用户端。如果您需要有关此的更多信息，我建议您使用谷歌（这很简单）

### 对于纯文本密码

您可以使用多种方法将其存储在 RAM 中，这是 memcache 的一个示例

```
$memcache->set($token, $password); 
```

然后，使用以下命令从 RAM 中检索信息：

```
$user_password = $memcache->get($_COOKIE['token']); 
```

有几种使用 PHP 将数据存储在 ram 中的解决方案：[Memcache](http://php.net/manual/en/book.memcache.php)和[APC（用户缓存部分）](http://php.net/manual/en/book.apc.php)

# windows-phone-7 - 本地化和绑定不能一起工作

> ID：10945714
> 
> 赞同：1
> 
> 时间：2012-06-08T08:50:05.917
> 
> 标签：windows-phone-7, globalization

我正在开发我的第一个应用程序，并且正在尝试使其成为多语言。
使用[AppHub 示例](http://forums.create.msdn.com/forums/p/87002/522440.aspx)和其他一些链接，我创建了资源文件，修复了组件上的绑定字符串并设置了设置页面。
我遇到的第一个问题是菜单项和应用程序栏按钮不能使用本地化字符串（项目启动时抱怨）所以我有：

*   TextBlocks 和其他与本地化字符串绑定的组件
*   使用加载本地化字符串的过程手动本地化 Appbar 按钮和项目

现在我有了我的设置页面，用户可以更改的一项是语言。
好吧，根据用户选择选择正确的CultureInfo，然后我使用

```
Thread.CurrentThread.CurrentUICulture = Settings.Language; 
```

当我按下后退按钮并返回主页时，应用栏项目已正确本地化，而其他所有内容均未正确本地化。
唯一的解决方法（我真的不喜欢，只是为了理解）是这样的：

```
public MainPage()
{
    Thread.CurrentThread.CurrentUICulture = Settings.Language;
    InitializeComponent();
    // Everything else I need here
} 
```

所以我必须在创建组件之前设置语言以使其工作。
怎么了？使用绑定字符串更改语言后刷新页面的正确方法是什么？
我没有放很多代码，因为我基本上使用了链接中提供的代码，但是如果您需要更多信息，我将编辑我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:16:47.080

我终于找到了一种解决方案，可以自动更新我的应用程序组件以响应语言变化。
一个很好的教程可以在[这里](http://dotnetbyexample.blogspot.it/2012/03/instant-language-update-in-windows.html)找到；简而言之，您必须找到一种方法来通知您的应用程序本地化资源已更改。

```
 public class LocalizedStrings : ViewModelBase
  {
      private static AppResources localizedresources = new AppResources();

      public AppResources LocalizedResources
      {
          get { return localizedresources; }
      }

      public void UpdateLanguage()
      {
          localizedresources = new AppResources();
          RaisePropertyChanged(() => LocalizedResources);
      }

      public static LocalizedStrings LocalizedStringsResource
      {
          get
          {
              return Application.Current.Resources["LocalizedStrings"]
                     as LocalizedStrings;
          }
      }
  } 
```

当用户更改语言时，您应该简单地运行

```
LocalizedStrings.LocalizedStringsResource.UpdateLanguage(); 
```

工作就完成了。

# asp.net - 手动更新表单身份验证票：

> ID：10945715
> 
> 赞同：12
> 
> 时间：2012-06-08T08:50:06.120
> 
> 标签：asp.net, forms-authentication, httpcookie

表单身份验证票过期的另一个问题。我需要使用滑动过期设置为真。我已经阅读了论坛并理解了精度损失的问题，即只有在过期时间的一半之后发出请求时才会更新票证。

问题：在我的webconfig中，我有以下内容：

```
 <authentication mode="Forms">
        <forms timeout="20" name="SqlAuthCookie" protection="All" slidingExpiration="true" />
    </authentication>
    <sessionState timeout="20" />
    <authorization> 
```

只有在 20 分钟间隔内没有请求时，用户才必须注销并重定向到 login.aspx。问题是用户正在发出请求，但仍然被抛出到登录页面。这不应该发生。我想做的是为每个请求手动重置 SqlAuthCookie 。

下面是我的代码。它在 context.AcquireRequestState 上调用。

```
 void context_AcquireRequestState(object sender, EventArgs e)
    {
        HttpContext ctx = HttpContext.Current;
        ResetAuthCookie(ctx);
     }

            private void ResetAuthCookie(HttpContext ctx)
    {
        HttpCookie authCookie = ctx.Request.Cookies[FormsAuthentication.FormsCookieName];
        if (authCookie == null)
            return;

        FormsAuthenticationTicket ticketOld = FormsAuthentication.Decrypt(authCookie.Value);
        if (ticketOld == null)
            return;

        if (ticketOld.Expired)
            return;

        FormsAuthenticationTicket ticketNew = null;
        if (FormsAuthentication.SlidingExpiration)
           ticketNew = FormsAuthentication.RenewTicketIfOld(ticketOld);

        if (ticketNew != ticketOld)
            StoreNewCookie(ticketNew, authCookie, ctx);
    }

    private void StoreNewCookie(FormsAuthenticationTicket ticketNew, HttpCookie authCookie, HttpContext ctx)
    {
        string hash = FormsAuthentication.Encrypt(ticketNew);
        if (ticketNew.IsPersistent)
            authCookie.Expires = ticketNew.Expiration;

        authCookie.Value = hash;
        authCookie.HttpOnly = true;

        ctx.Response.Cookies.Add(authCookie);
    } 
```

我的问题是：

1.  在每个请求上重置 cookie 是错误的还是可接受的解决方案？
2.  为什么它仍然不起作用？似乎新票永远不会更新。
3.  是否还有其他可能的原因，因为用户的表单身份验证过早过期，我应该调查？

谢谢， 问候，

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-11T20:22:01.157

A forms authentication cookie only renews itself after half it's expiration time has passed.

From Microsoft:

> If the Web page is accessed before half of the expiration time passes, the ticket expiration time will not be reset. For example, if any Web page is accessed again at 5:04 00:00:00 PM, the cookies and ticket timeout period will not be reset.
> 
> To prevent compromised performance, and to avoid multiple browser warnings for users that have cookie warnings turned on, the cookie is updated when more than half the specified time has elapsed.

This may be your issue. If your clients access your site at the 9 minute mark and don't access it again for 10 minutes they'll be timed out. This occurs even though you have your session timeout set to 20 minutes.

Manually renewing your ticket like you're doing isn't necessary. You just need sliding expiration enabled. If the 'half the specific time' rule doesn't work for you then you'll have to look at other solutions.

# php - 制作php函数来获取数据

> ID：10945717
> 
> 赞同：0
> 
> 时间：2012-06-08T08:50:18.340
> 
> 标签：php

我正在尝试使用搜索引擎 API 收集流行的关键字数据。

它们支持 Get 方法来接收数据。

如果我发送这样的查询，我可以获得流行的关键字数据。

```
 <form action='https://openapi.example.com/OApi/RestApiSSL/NC/300010/HotKeyWord/v1   ' method='GET'>
        <div> 
            Oauth<input type='text' name='oauth_consumer_key' value='d029d563644872e08e4e2e40042b8cbceff'>
        </div>
        <div>
            category <input type='text' name='category' value='daykeyword'>
        </div>
        <div>
            count <input type='text' name='count' value='10'>
        </div>
        <div>
            <input type='submit' value='submit'>
        </div>
    </form> 
```

我想做的是我想做一个 php 函数并每小时接收数据。

首先，我需要制作 PHP 函数。

我必须使用哪个 php 命令来发送输入值和获取 GET 数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:56:52.667

这应该有效：

```
$file = file_get_contents('https://openapi.example.com/OApi/RestApiSSL/NC/300010/HotKeyWord/v1?oauth_consumer_key=d029d563644872e08e4e2e40042b8cbceff&category=daykeyword&count=10'); 
```

您可以使用将 GET 值添加到查询字符串`?key=value&key2=value2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:52:22.573

查看 cURL [http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

# r - R 函数适用于某些数据帧，但不适用于其他数据帧？

> ID：10945718
> 
> 赞同：2
> 
> 时间：2012-06-08T08:50:28.027
> 
> 标签：r, function

我有一个数据框，它总结了传递给它的数据框中缺失和非缺失观察的数量[1]。然后我被要求在我拥有的数据中测试两个治疗组之间的差异（我个人不同意这样做的必要性或效用，但这是我被要求做的）。所以我写了一个小函数来做到这一点......

```
quick.test <- function(x, y){
  chisq   <- chisq.test(x = x,  y = y)
  fisher  <- fisher.test(x = x, y = y)
  results <- cbind(chisq  = chisq$statistic,
                   df     = chisq$parameter,
                   p      = chisq$p.value,
                   fisher = fisher$p.value)
  results
} 
```

然后我使用 apply() 将相关列传递给该函数，如下所示...

```
apply(miss.t1, 1, function(x) quick.test(x[2:3], x[4:5])) 
```

这对于上面指定的 miss.t1 数据框很好，但是我正在使用时间序列数据并且我希望总结三个时间点，所以有 miss.t2 和 miss.t3（每个都在总结数字每个时间点的当前/缺失数据，并已使用 [1] 中描述的函数以相同的方式创建）。

miss.t2 失败并出现以下错误...

```
apply(miss.t2, 1, function(x) quick.test(x[2:3], x[4:5]))
Error in chisq.test(x = x, y = y) : 
  'x' and 'y' must have at least 2 levels 
```

我最初的想法是其中一列由于某种原因缺少值，但情况似乎并非如此......

```
> describe(miss.t2)
miss.t2 

 5  Variables      171  Observations
--------------------------------------------------------------------------------
variable 
      n missing  unique 
    171       0     171 

lowest : Abtotal   Abyn      agg_ment  agg_phys  All.score
highest: z_pf      z_re      z_rp      z_sf      z_vt      
--------------------------------------------------------------------------------
nmiss.1 
      n missing  unique    Mean 
    171       0       4   8.649 

0 (6, 4%), 8 (9, 5%), 9 (153, 89%), 10 (3, 2%) 
--------------------------------------------------------------------------------
npresent.1 
      n missing  unique    Mean 
    171       0       4   9.351 

8 (3, 2%), 9 (153, 89%), 10 (9, 5%), 18 (6, 4%) 
--------------------------------------------------------------------------------
nmiss.2 
      n missing  unique    Mean 
    171       0       4   10.65 

0 (6, 4%), 11 (160, 94%), 12 (4, 2%), 13 (1, 1%) 
--------------------------------------------------------------------------------
npresent.2 
      n missing  unique    Mean 
    171       0       4   14.35 

12 (1, 1%), 13 (4, 2%), 14 (160, 94%), 25 (6, 4%) 
-------------------------------------------------------------------------------- 
```

我尝试的下一件事是通过获取 head(miss.t2, n=XX) 来尝试 miss.t2 的子集，并且它在第 54 行之前工作正常......

```
> apply(head(miss.t2, n=53), 1, function(x) quick.test(x[2:3], x[4:5]))
     1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28
[1,] 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
[2,] 1 1 1 1 1 1 1 1 1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
[3,] 1 1 1 1 1 1 1 1 1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
[4,] 1 1 1 1 1 1 1 1 1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
     29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53
[1,]  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
[2,]  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
[3,]  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
[4,]  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
There were 50 or more warnings (use warnings() to see the first 50)
> apply(head(miss.t2, n=54), 1, function(x) quick.test(x[2:3], x[4:5]))
Error in chisq.test(x = x, y = y) : 
  'x' and 'y' must have at least 2 levels
> miss.t2[54,]
   variable nmiss.1 npresent.1 nmiss.2 npresent.2
54      psq      10          8      11         14
> traceback()
5: stop("'x' and 'y' must have at least 2 levels") at #2
4: chisq.test(x = x, y = y) at #2
3: quick.test(x[2:3], x[4:5])
2: FUN(newX[, i], ...)
1: apply(head(miss.t2, n = 54), 1, function(x) quick.test(x[2:3], 
       x[4:5])) 
```

与数据框的“底部”类似，最后 26 行被解析得很好，但不是倒数第 27 行......

```
> apply(tail(miss.t2, n=26), 1, function(x) quick.test(x[2:3], x[4:5]))
     146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163
[1,]   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
[2,]   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
[3,]   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
[4,]   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
     164 165 166 167 168 169 170 171
[1,]   0   0   0   0   0   0   0   0
[2,]   1   1   1   1   1   1   1   1
[3,]   1   1   1   1   1   1   1   1
[4,]   1   1   1   1   1   1   1   1
There were 26 warnings (use warnings() to see them)
> apply(tail(miss.t2, n=27), 1, function(x) quick.test(x[2:3], x[4:5]))
Error in chisq.test(x = x, y = y) : 
  'x' and 'y' must have at least 2 levels
In addition: Warning message:
In chisq.test(x = x, y = y) : Chi-squared approximation may be incorrect

> miss.t2[118,]
    variable nmiss.1 npresent.1 nmiss.2 npresent.2
118     sf16       9          9      11         14 
```

我看不出这两行有什么问题，这意味着它们应该失败，并且上面显示的 traceback() 没有显示任何有用的信息（在我看来）。

任何人都可以就为什么或哪里出了问题提供任何建议吗？

提前谢谢了，

尼尔

编辑：格式化回复文森特 Zoonekynd ...

我选择了 chisq.test(x = x, y = y) 中描述的版本？ （性格）论据。

放置打印语句并显示 x 和 y 的长度会导致相同的错误，但将值和长度显示为...

```
> miss.t2.res <- data.frame(t(apply(miss.t2, 1, function(x) quick.test(x[2:3], x[4:5])))) 
[1] "Your x is : 9" "Your x is : 9" 
[1] 2    ### < Length of x
[1] "Your y is : 11" "Your y is : 14"
[1] 2    ### < Length of y
Error in chisq.test(x = x, y = y) : 'x' and 'y' must have at least 2 levels 
```

编辑 2：感谢 Vincent Zoonekynd 的指针，问题是因为两个单元格的计数相同，所以对 chisq.test() 的调用将它们视为因素并折叠它们。解决方案是修改 quick.test() 函数并强制传递给矩阵的参数，所以现在起作用的函数是......

```
quick.test <- function(x, y){
  chisq   <- chisq.test(rbind(as.numeric(x), as.numeric(y)))
  fisher  <- fisher.test(rbind(as.numeric(x), as.numeric(y)))
  results <- cbind(chisq  = chisq$statistic,
                   df     = chisq$parameter,
                   p      = chisq$p.value,
                   fisher = fisher$p.value)
  results
} 
```

非常感谢文森特的帮助和指点，非常感谢。

[1] [http://gettinggeneticsdone.blogspot.co.uk/2011/02/summarize-missing-data-for-all.html](http://gettinggeneticsdone.blogspot.co.uk/2011/02/summarize-missing-data-for-all.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T14:58:46.940

Vincent Zoonkeynd 在上面的评论中建议的解决方案是修改 quick.test() 函数并强制传递给矩阵的参数，所以现在起作用的函数是......

```
quick.test <- function(x, y){
  chisq   <- chisq.test(rbind(as.numeric(x), as.numeric(y)))
  fisher  <- fisher.test(rbind(as.numeric(x), as.numeric(y)))
  results <- cbind(chisq  = chisq$statistic,
                   df     = chisq$parameter,
                   p      = chisq$p.value,
                   fisher = fisher$p.value)
  results
} 
```

# android - Android Facebook apprequest 通知未显示在手机上

> ID：10945721
> 
> 赞同：2
> 
> 时间：2012-06-08T08:50:38.307
> 
> 标签：android, facebook, notifications

我在 android 上开发了一个应用程序，它将向另一个 facebook 帐户发送一个 apprequest，它运行良好。当我在计算机的浏览器中打开 facebook 时，它会显示我的 android 应用程序已发送 apprequest 的通知。但是，如果我在手机上使用适用于 android 的 facebook 应用程序打开 facebook，我看不到该通知（其他通知，例如有人在我的墙上发布的消息仍然显示，因此通知功能正在工作）。是我的代码问题还是apprequest根本无法在手机上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T11:17:28.287

您需要在 facebook 上的应用页面中更改配置。您需要在“基础”部分将其编写为“移动网络”应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:00:02.010

如果您使用计算机的浏览器并在您的 Facebook 个人资料墙帖子中收到通知。然后它被成功发布并按原样工作。

但是，如果您无法在 Facebook 移动应用程序中看到该帖子，那是因为 Facebook 的安全性。请通过计算机的浏览器更改您的 Facebook 个人资料的安全性。然后尝试使用 facebook 移动应用程序查看它。

希望它会帮助你。

享受。:)

# file - Windows资源管理器中[Del]和[Shift][Del]之间的奇怪区别

> ID：10945727
> 
> 赞同：1
> 
> 时间：2012-06-08T08:50:58.523
> 
> 标签：file, explorer, privileges

`Del`之前我认为单独按键和组合`Shift`+的区别在于`Del`前者将文件放入回收站，这就是所有的区别。

但是不，还有更多：我以编程方式更改了文件的访问权限，因此只能`SYSTEM`访问它（好的，存在不一致之处：我仍然是该文件的所有者）。当我查看其属性时，仅`SYSTEM`显示在“安全”选项卡上。当我按下该`Enter`键时，记事本启动并尝试打开文件，并显示拒绝访问消息。当我按下`Del`时，几秒钟后会显示拒绝访问消息。但是当我按`Shift`+时`Del`，文件会立即被删除。

在 Windows XP 和 Windows 7 中都会发生。

这怎么解释？

# linux - Teamcity 构建代理处于断开状态

> ID：10945729
> 
> 赞同：3
> 
> 时间：2012-06-08T08:51:05.640
> 
> 标签：linux, teamcity, disconnected, build-agent

我在 Linux 服务器上运行 teamcity，它工作得很好。一旦我重新启动服务器机器并且它停止工作。我设法使用 runAll.sh 命令启动了 teamcity 服务器，但构建代理仍处于“断开连接”状态。不活动原因显示为“服务器关闭”。我尝试使用“agent.sh stop”和“agent.sh start”启动代理，但它似乎不起作用。无法从日志中获得任何有意义的信息。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-22T18:42:53.497

如果您修改了 teamcity 端口，那么您需要更改构建代理配置文件以反映新的 serverUrl 值。您可以在 C:\TeamCity\buildAgent\conf\buildAgent.properties 文件中找到此设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:31:02.470

在重新启动的计算机上，确保防火墙没有恢复到阻止访问/来自代理的状态。当您重新启动代理时，teamcity-agent.log 文件应该有一行内容类似于“buildServer.AGENT.registration - 在服务器上注册”。如果成功，它应该说类似“buildServer.AGENT.registration - Registered: id:.., authorizationToken:..”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-07T23:19:33.867

只是在查看我未回答的问题时发现了这一点，这实际上是一个权限问题。我没有以 root 用户身份运行命令。一旦我以 root 用户身份运行“agent.sh stop”和“agent.sh start”，它就可以正常工作了。

# javascript - jTweetsAnywhere 搜索参数

> ID：10945733
> 
> 赞同：0
> 
> 时间：2012-06-08T08:51:27.363
> 
> 标签：javascript, twitter

是否可以仅从 HowToEnjoyBLFST 流、带有#HowToEnjoyBLFST 的推文和带有@HowToEnjoyBLFST 的推文以及 jTweetsAnywhere 中的 searchParams 函数获取推文？

换句话说，没有其他推文中提到了 HowToEnjoyBLFST。

谢谢， C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:54:33.720

如果有人感兴趣，它是通过一个简单的查询完成的

```
q=%40HowToEnjoyBLFST+OR+%23HowToEnjoyBLFST+OR+from:HowToEnjoyBLFST 
```

# vb.net - 在 vb.net 中包装一个不可继承的类

> ID：10945737
> 
> 赞同：1
> 
> 时间：2012-06-08T08:51:38.587
> 
> 标签：vb.net, class, types, wrapper

为了方便起见，我想在我的命名空间中使用一个类 Cookie，它具有与 System.Web.Cookie 相同的功能，或者更好的是等效的。我不能从 System.Web.Cookie 派生，因为它是不可继承的......

在 C 中，我可以简单地将其 typedef 为另一种类型，但除了编写一个模仿所有函数的包装类之外，我在 VB.net 中看不到任何可能性。

是否有另一种方法可以“重命名”VB.net（Framework 4.0）中的类型？

**编辑：**

我找到了一个解决方案，以不同的名称导入类：

```
imports Cookie = System.Web.HttpCookie 
```

但我仍然会对其他解决方案感兴趣。因此，我没有将此添加为答案。

# asp.net - cookie 域上的奇怪行为

> ID：10945738
> 
> 赞同：3
> 
> 时间：2012-06-08T08:51:45.293
> 
> 标签：asp.net, cookies, forms-authentication

背景：

*   AspNet 网络应用程序/C# 3.5
*   IIS7
*   对比 2010
*   Windows 7的

当用户通过身份验证时，我们创建一个 cookie，这样：

```
var cookieASP = FormsAuthentication.GetAuthCookie(user.Id, true);
cookieASP.Domain = "x.y.local"; 
```

是的，`domain`对于这个例子是硬编码的。

使用 Firefox 11 中的 cookie 查看器扩展，我可以看到`domain`cookie 是 : `.x.y.local`，前导`.`. 我知道它允许在`w.x.y.local`和之间共享 cookie `q.x.y.local`。行。

但是，当用户单击断开连接时，他并没有被踢出...

```
 var cookieAsp = System.Web.Security.FormsAuthentication.GetAuthCookie(u.Identifiant, true);
 cookieAsp.Expires = DateTime.Now.AddDays(-10);
 Response.Cookies.Set(cookieAsp);
 FormsAuthentication.SignOut(); 
```

使用调试器我们可以看到它`cookieAsp.Domain`是空的。并且 cookie 不会从浏览器的 cookie 中删除。

如果我编辑 cookie 域（直接从浏览器），并将其域设置为`x.y.local` **不带**前导`.`，则 cookie 被删除并且用户断开连接。

我不明白为什么`.`要添加它，以及为什么浏览器不能很好地理解它。

**编辑（我猜是最重要的）**：我们这样做是因为如果我们不设置`domain`，那么 IE8（只有 8）就无法理解我们的 cookie...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:44:38.240

当您想要删除 cookie 时，您必须使用要删除的 cookie 的**确切**域来指定 cookie。cookie 域不是由浏览器根据请求发送的，因此当您尝试在调试器会话中检查它时，您总是会得到一个空值。

所以在`Response.Cookies.Set(cookieAsp);`添加之前`cookieASP.Domain = "x.y.local";`。

# asp.net-mvc - MVC3 json反序列化日期传递到控制器中的列表

> ID：10945743
> 
> 赞同：0
> 
> 时间：2012-06-08T08:52:12.910
> 
> 标签：asp.net-mvc, json, datetime, date, jquery

在视图中，我发送编码如下的模型：

```
var model = '@Html.Raw(Json.Encode(Model))'; 
```

到控制器动作。该模型是一个电影列表，每部电影都包含一个发布*日期*。这是控制器动作方法

```
[HttpPost]
    public void createDoc(IEnumerable<Movie> movies)
    {
        //blablabla ...
        String date = "Date:" + movies.ElementAt(i).ReleaseDate + " ";
        //print date into a file
    } 
```

当我打印日期时，它打印为*Date:01/01/0001 00:00:00* 传递的序列化数据显示为警报并打印如下： *“/Date(1070233200000)/”*

在 createDoc 控制器操作中接收到电影列表，我认为问题出在开始：它以错误的格式保存日期，所以我无法做任何事情来解析它。我的日期属性模型电影是：

```
[DataType(DataType.Date)]
public DateTime ReleaseDate { get; set; } 
```

我是否必须更改模型类中的某些内容才能以正确的格式存储数据，将其从 View post 传递到 Controller Action，或者我可以在发送或接收 json 数据之前做些什么来解析它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:42:11.153

在您的操作方法中，您将日期值分配给 String 类型，所以为什么不使用 string.Format... 类似的东西：

```
String date = string.Format("Date: {0:dd MM yyyy}", movies.ElementAt(i).ReleaseDate) 
```

# javascript - a 在我的谷歌地图中为空

> ID：10945746
> 
> 赞同：0
> 
> 时间：2012-06-08T08:52:27.700
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-api-2

我将 javascript 代码放在我的 main.js 文件中。具有以下内容：

[http://jsfiddle.net/Rochefort/Q7Vwg/](http://jsfiddle.net/Rochefort/Q7Vwg/)（不能在这里复制我的代码）

但是检查 Firebug，我得到了这个错误：

''a is null'' 在 29\. 行。

![在此处输入图像描述](../Images/a219643a3ba609f8226747e67f46b478.png)

我的问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T21:58:43.367

我曾经遇到过这个错误。确保地图脚本仅在使用地图的页面上运行。您可以使用“如果”来检查地图是否存在。像这样的东西：

```
if ($('mapClass').length>0) { 
   // here you run the google maps functions 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:03:24.393

`a is null`通常意味着您的地图未初始化并且您正在尝试使用它

# rest - IIS6 上的 PUT 动词创建文件

> ID：10945748
> 
> 赞同：1
> 
> 时间：2012-06-08T08:52:43.810
> 
> 标签：rest, wcf-rest, http-put

我有一个带有 PUT 方法的 WCF REST Web 服务，我已经部署在 IIS6 服务器上。当我请求 PUT 资源时，Web 服务永远不会受到影响。相反，会在根文件夹上创建一个文件，其内容是 JSON 帖子正文。

为什么请求没有命中服务？这似乎是 PUT 动词的问题。GET 和 POST 按预期工作。

# jquery - 用于检测 Internet 连接的 Jquery 插件

> ID：10945759
> 
> 赞同：10
> 
> 时间：2012-06-08T08:53:38.400
> 
> 标签：jquery, google-chrome

我目前在我的应用程序中使用 Tom Riley 的 Jquery 插件来检测 Internet 连接，它在 Internet Explorer 中运行良好，但在 Google Chrome 中实现它时没有响应。

任何人都可以建议一个更好的检测互联网连接的插件，它在谷歌浏览器（所有浏览器）中完美运行

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T08:57:52.073

您不需要插件，只需执行以下操作：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
  if (! window.jQuery) {
    alert('No internet Connection !!');
  }
  else {
     // internet connected
  }
</script> 
```

上述工作的原因是因为 jQuery lib 是从需要互联网连接的谷歌 CDN 读取的，如果页面无法读取它，则意味着互联网连接不存在。

## 更新

您可以执行以下操作：

```
function checkConnection() {
  var connected = true;
  var img = document.createElement('img');
  img.src = "path to remoate image on your server";
  img.onerror = function() { connected = false; }
  return connected;
} 
```

您可以随时这样使用它：

```
if (checkConnection()) {
  // connected
} 
```

## 更新 2

您也可以像这样定期/自动检查它：

```
setInterval(function(){
  var isConnected = checkConnection(); // checkConnection() comes from above code
  if (isConnected) {
    alert('Connected');
  }
  else {
    alert('Not Connected');
  }
}, 10000); // 10000 = 10 seconds, check for connection every 10 seconds 
```

* * *

**其他有用的链接：**

*   [检查是否存在使用 Javascript 的 Internet 连接？](https://stackoverflow.com/questions/2384167/check-if-internet-connection-exists-with-javascript)
*   [如果有互联网连接，则检测到 JQuery Mobile](https://stackoverflow.com/questions/5626832/jquery-mobile-detected-if-theres-internet-connection)
*   [checkNet：我的用于检测 Internet 连接的 jQuery 插件](http://tomriley.net/blog/archives/111)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T20:05:26.173

checkNet 插件 ( [http://tomriley.net/blog/archives/111](http://tomriley.net/blog/archives/111) ) 适用于所有浏览器，包括 Chrome。它不依赖于查询 google.com（因为 google 在某些国家/地区被封锁，大陆之间的连接可能不可靠！）

如果没有显示错误消息，通常是因为您仍在本地服务器上 - 它在 Internet 上时可以正常工作。

此外，看看你用它做什么会很酷。如果您想分享，请给我一个链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-25T05:51:39.343

无需下载任何文件或图像，您可以通过一段简单的代码进行检查。

单击下面的“运行代码片段”按钮并查看它的实际效果。

```
function checkInternetConnection(){
        var status = navigator.onLine;
        if (status) {
            console.log('Internet Available !!');
        } else {
            console.log('No internet Available !!');
        }  
        setTimeout(function() {
            checkInternetConnection();
        }, 1000);
      }
      checkInternetConnection();
```

**编辑 - 没有功能的更简单的方法**

```
setInterval(function(){
    var status = navigator.onLine;
    if (status) {
        console.log('Internet Available !!');
    } else {
        console.log('No internet Available !!');
    }  
}, 1000); // 1000 = 1 seconds, check for connection after every 1 seconds
```

# objective-c - 在 Mac 应用程序中调用带有参数的 shell 脚本

> ID：10945766
> 
> 赞同：0
> 
> 时间：2012-06-08T08:54:10.033
> 
> 标签：objective-c, xcode, cocoa, shell

我在调用一个 shell 脚本时遇到问题，该脚本从我的 Mac 的 Cocoa 应用程序中获取一个参数。

我已经创建了 shell 脚本，并将它放在应用程序的本地存储库中。它被称为脚本。它需要一个参数，即 URL 地址。

我按如下方式调用脚本，但没有任何反应，没有错误或消息，只是脚本在什么都不做后停止。

```
NSString *address = [_addressField stringValue];
NSString *resPath = [[NSBundle mainBundle] resourcePath];

NSTask *task;
task = [[NSTask alloc] init];
[task setLaunchPath: [NSString stringWithFormat:@"%@/SCRIPT", resPath]];

NSArray *arguments;
arguments = [NSArray arrayWithObjects: address, nil];
[task setArguments: arguments];

NSPipe *pipe;
pipe = [NSPipe pipe];
[task setStandardOutput: pipe];

NSFileHandle *file;
file = [pipe fileHandleForReading];

[task launch];

NSData *data;
data = [file readDataToEndOfFile];

NSString *status;
status = [[NSString alloc] initWithData: data encoding: NSUTF8StringEncoding];
NSLog (@"%@", status); 
```

提前谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:36:15.367

`/bin/echo`如果我尝试使用作为启动路径，Objective-C 代码接缝对我来说可以正常工作。所以我想问题出在脚本上。您可以在问题中包含脚本吗？请注意，从 Cocoa 应用程序运行时的环境可能与在交互式 shell 中运行时的环境完全不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-03T14:11:26.083

会不会是权限问题？尝试调用 /bin/sh 并将脚本路径设置为第一个参数。

# excel - Excel 计算公式错误

> ID：10945767
> 
> 赞同：2
> 
> 时间：2012-06-08T08:54:16.740
> 
> 标签：excel, formula, evaluate

我的 VBA 代码是

```
Function yEval(entry As String)
yEval = Evaluate(entry)
Application.Volatile
End Function 
```

在单元格 f4 的 Sheet1 中，我`=yEval(Sheet2!E19)` 在 sheet1 上有公式单元格 d4 包含数字 12 Sheet2！I19 包含字符串 $Q

> 如果 Sheet2!e19 有字符串 INDIRECT("pries!"&Sheet2!I19&12) 或 INDIRECT("pries!"&Sheet2!I19&Sheet1!d4) 或 INDIRECT("pries!"&Sheet2!I19&"Sheet1!D"&row()+12)公式从表格中返回结果！$Q12
> 
> 如果 Sheet2!e19 有字符串 INDIRECT("pries!"&Sheet2!I19&address(row(),4)) 或 INDIRECT("pries!"&Sheet2!I19&"Sheet1!D"&row()) 公式返回结果 0 看起来像忽略 row() 函数

如何使这个公式工作以根据行号更改 d4 部分，如果行是 5 则 d5

```
INDIRECT("pries!"&Sheet2!I19&Sheet1!d4) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:04:19.143

有趣的问题...要进一步了解该问题，请从即时或观察窗口尝试这些：

```
?[indirect("rc",0)]
?[index(a:a,row())]
?[offset(a1,row()-1,column()-1)] 
```

`A1`奇怪的是，无论哪个单元格处于活动状态，它们都会评估。`Evaluate`当返回值是范围引用时，这是相对于 A1 而不是活动（调用）单元格处理`[]`引用的一个怪癖。您可以将其`row()`视为等效`row(RC)`于相对于 A1 评估的 RC 符号。

但是，请注意，在上面的三个公式中更改`]`为`&""]`会导致第一个错误，但最后两个是预期结果，因此`row()`现在相对于活动单元格进行评估。因此，当返回值不是范围引用时，Evaluate 的功能似乎有所不同。

**更新**

根据这些观察，您可以使用 INDEX 作为行引用并将 INDIRECT 移到外部：

```
Sheet1!F4:=INDIRECT(yEval(Sheet2!E19))
Sheet2!E19:"pries!"&Sheet2!I19&INDEX(Sheet1!D:D,Row()) 
```

...或者只使用 RC 样式的引用而不需要 UDF：

```
=INDIRECT("pries!"&Sheet2!I19&INDIRECT("RC4",0)) 
```

# c# - 如何在 wp7 的文本框中隐藏特定文本

> ID：10945769
> 
> 赞同：0
> 
> 时间：2012-06-08T08:54:31.893
> 
> 标签：c#, windows-phone-7

在我的 wp7 网络浏览器应用程序中，我有一个用于 URL 的文本框（名为 UrlTextBox），因为即使页面正在导航或导航，我也不需要**http://可见。**我不知道如何在文本框中隐藏特定文本。如果我尝试永久省略 http://，那么我的应用程序中将会出现错误。有人可以帮我吗？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:36:30.980

我猜你可能正在做类似的事情：

```
webBrowser.Navigate(urlTextBox.Text); 
```

相反，您可以这样做：

```
webBrowser.Navigate("http://" + urlTextBox.Text); 
```

显然有适当的检查等。

或者

```
if (urlTextBox.Text.StartsWith("http://")
{
    urlTextBox.Text = urlTextBox.Text.SubString(7);
} 
```

# gdata - 如何将 scribe 授权与 gdata 服务相结合

> ID：10945774
> 
> 赞同：0
> 
> 时间：2012-06-08T08:54:55.053
> 
> 标签：gdata, scribe

有谁知道如何将 oauth 与 scribe 与 Gdata 服务相结合：

因此，在使用 scribe 进行身份验证后，我拥有访问令牌并需要将其推送到 gdata ContactsService 的实例（对于任何其他服务，我猜它的工作方式相同）。

我试过简单

```
GoogleCredential credential = new GoogleCredential();
credential.setAccessToken(accessTokenString); 
```

其中 accessTokenString 是运行后从 scribe 获得的 String

```
Token accessToken = service.getAccessToken(requestToken, verifier); 
```

但这在请求时没有例外：

```
Exception in thread "main" java.lang.NullPointerException: No authentication header information
at com.google.gdata.util.AuthenticationException.initFromAuthHeader(AuthenticationException.java:96)
at com.google.gdata.util.AuthenticationException.<init>(AuthenticationException.java:67)
at com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:608)
at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:564)
at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:560)
at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538)
at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
at com.google.gdata.client.Service.getFeed(Service.java:1135)
at com.google.gdata.client.Service.getFeed(Service.java:998)
at com.google.gdata.client.GoogleService.getFeed(GoogleService.java:645)
at com.google.gdata.client.Service.getFeed(Service.java:1017) 
```

将 scribe 与 gdata 结合起来会很好，因为我已经准备好了 scribe，并且 gdata 提供了更好的 api 来处理来自 google 的数据

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:49:21.457

我不知道`accessTokenString`你的例子是什么。`toString`我认为这是在 Scribes accessToken 对象上调用该方法的结果。

如果是这样并且 gdata 只需要访问令牌，您应该这样做：

```
Token accessToken = service.getAccessToken(requestToken, verifier);
GoogleCredential credential = new GoogleCredential();
credential.setAccessToken(accessToken.getToken()); 
```

# linux - 使用VBA将linux文本文件加载到excel中

> ID：10945779
> 
> 赞同：17
> 
> 时间：2012-06-08T08:55:28.823
> 
> 标签：linux, vba, excel

我在 linux 上创建了一个文本文件，如果我在 Word pad 中打开它，文件会正常显示。但是，当我在记事本中打开它并尝试使用下面的代码将其加载到 excel 中时，它会显示为一行。

```
' Open the file
Open Filename For Input As #1

' Look for the Table Title
Do While Not (EOF(1) Or InStr(TextLine, TableTitle) > 0)
    Line Input #1, TextLine
Loop 
```

如何将其拆分为原始行？是否有行尾分隔符，vba 可以使用？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-08T09:39:36.817

Linux 使用*换行符*( `\n`) 来表示新行，而不是 Windows 使用的*回车*+*换行符*( `\r\n`)，因此您不能使用`Line input`，而是：

```
Open Filename For Input As #1
'//load all
buff = Input$(LOF(1), #1)
Close #1

'//*either* replace all lf -> crlf
buff = replace$(buff, vbLf, vbCrLf)
msgbox buff

'//*or* line by line
dim lines() As String: lines = split(buff, vbLf)
for i = 0 To UBound(lines)
   msgbox lines(i)
next 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T10:08:59.653

**功能**

```
Public Function GetLines(fpath$) As Variant
    'REFERENCES:
    'Microsoft Scripting Runtime // Scripting.FileSystemObject
    'Microsoft VBScript Regular Expressions 5.5 // VBScript_RegExp_55.RegExp
    Dim fso As New Scripting.FileSystemObject, RE As New VBScript_RegExp_55.RegExp
    If fso.FileExists(fpath) = True Then
        Dim mts As MatchCollection, mt As Match
        Dim lines() As String
        Dim content$: content = fso.OpenTextFile(fpath).ReadAll()
        With RE
            .Global = True
            .Pattern = "[^\r\n]+" 'catch all characters except NewLines/Carraige Returns
            If .test(content) = True Then
                Set mts = .Execute(content)
                ReDim lines(mts.Count - 1)
                Dim pos&
                For Each mt In mts
                    lines(pos) = mt.Value
                    pos = pos + 1
                Next mt
            Else
                MsgBox "'" & Dir(fpath) & "' contains zero bytes!", vbExclamation
            End If
        End With
        GetLines = lines
    Else
        MsgBox "File not found at:" & vbCrLf & Dir(fpath), vbCritical
    End If
End Function 
```

**并且可以由 (from `immediate window`)调用**

```
?GetLines("C:\BOOT.INI")(2) 
```

**和输出**

```
default=multi(0)disk(0)rdisk(0)partition(1)\WINDOWS 
```

* * *

# 上面的示例可用于从源自任何操作系统的任何文本文件中获取所有行。

* * *

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-09T13:10:51.397

使用 Windows“写字板”打开 linux 文本文件。保存文件。写字板将在保存文件时将 linux 换行符 (\n) 转换为回车+换行符 (\r\n)。无需编码。

# html - 如何显示合并两种语言的文本（英语+阿拉伯语）

> ID：10945783
> 
> 赞同：2
> 
> 时间：2012-06-08T08:55:32.953
> 
> 标签：html, character-encoding, arabic

从过去 15 天或更长时间开始，我一直在努力解决一个奇怪的问题。实际上我有一些阿拉伯语文本，但也有一些英文文本。

```
MY NAME "some arabic text"
"some arabic text"
"some arabic text" english "some arabic text" 
```

问题：我无法按原样复制粘贴它，因为 eng 是从左到右，而阿拉伯语是从右到左。

那么如何将这段文本复制粘贴到 html 文件中。

我需要在 html 中设置一些属性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:18:11.033

只需将阿拉伯语包含在`<span>`标签中，类的方向 CSS 属性设置为 ltr。

```
MY NAME <span class="artext">"some arabic text"</span>
<span class="artext">"some arabic text"</span>
<span class="artext">"some arabic text"</span> english <span class="artext">"some arabic text"</span> 
```

和

```
.artext {
    direction: rtl;
 } 
```

在样式定义文件或头部的某个地方。

# android - 重启安卓应用

> ID：10945785
> 
> 赞同：0
> 
> 时间：2012-06-08T08:55:43.323
> 
> 标签：android

在我的应用程序结束时，我有一个重新启动应用程序的按钮..

在按钮的onClick监听器中重启应用程序的方法是什么？

我尝试通过使用“com.android.action.main”创建意图来做到这一点

但它不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T08:59:35.510

将以下代码放入您的`onClick`

```
Intent i = getBaseContext().getPackageManager()
             .getLaunchIntentForPackage( getBaseContext().getPackageName() );
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i); 
```

# model - 从 app_controller 查询而不加载模型

> ID：10945791
> 
> 赞同：0
> 
> 时间：2012-06-08T08:56:06.463
> 
> 标签：model, controller, cakephp-1.3

在`AppController`我有几个使用数据库的函数。一些用于不相关模型之间的复杂查询。

我知道的一种方法是加载模型并将其用于查询。

有没有办法在不加载模型的情况下做到这一点？有没有办法使用`AppModel`它？

### 更新

我需要的是：每个视图中都应该有一些信息（通过一个元素），它由几个表组成，一个“宽”连接查询。为了得到它，我必须将模型加载到内存并通过它进行查询。

但是，由于我不需要某个模型，所以我需要随机选择一个模型来加载。不是最佳编程实践...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:49:44.187

您可以使用对当前数据源执行查询

```
$this->query(); 
```

因为 AppModel 扩展了定义 query() 函数的模型。[查看query()](http://api13.cakephp.org/class/model#method-Modelquery)的文档。

# php - MySQL 左连接不适用于 AS 关键字

> ID：10945794
> 
> 赞同：5
> 
> 时间：2012-06-08T08:56:20.213
> 
> 标签：php, mysql

我喜欢对关联选择使用自我解释的名称，有时甚至必须避免重复，所以我经常使用 AS 关键字。但这给我的左连接带来了一些麻烦。

这有效：

```
$sql = "SELECT *,
        projects.id as projects_id
       FROM projects";

$sql .= " LEFT JOIN".
    " (SELECT 
        projectfiles.id as projectfiles_id,
        projectfiles.fileID as projectfiles_fileID,
        projectfiles.projectID as projectfiles_projectID
       FROM projectfiles
       ) AS projectfiles".
    " ON projects.id = projectfiles_projectID"; 
```

但是，现在我最终得到了来自 的无用数据`projects`，因为它还获取了我不需要的字段`userID`和。`name`它也拿起了 id 两次。

所以我尝试将其更改为；

```
$sql = "SELECT 
        projects.id as projects_id
       FROM projects"; 
```

随着上线成为

```
" ON projects_id = projectfiles_projectID"; 
```

但这给出了错误`Unknown column projects_id`

所以我尝试了

```
" ON projects.projects_id = projectfiles_projectID"; 
```

但仍然是同样的错误

然后我开始试验，并尝试（作为测试）

```
$sql = "SELECT id,name,userID FROM projects";

$sql .= " LEFT JOIN".
    " (SELECT 
        projectfiles.id as projectfiles_id,
        projectfiles.fileID as projectfiles_fileID,
        projectfiles.projectID as projectfiles_projectID
       FROM projectfiles
       ) AS projectfiles".
    " ON projects.id = projectfiles_projectID"; 
```

令我惊讶的是， LEFT JOIN 似乎根本没有收到任何东西。

代码：

```
$sql = "SELECT id,name,userID FROM projects";

$sql .= " LEFT JOIN".
    " (SELECT 
        projectfiles.id as projectfiles_id,
        projectfiles.fileID as projectfiles_fileID,
        projectfiles.projectID as projectfiles_projectID
       FROM projectfiles
       ) AS projectfiles".
    " ON projects.id = projectfiles_projectID";

$res = mysql_query($sql);
if(!$res) die(mysql_error());

if(mysql_num_rows($res) > 0)
{
    $rownum = 0;
    while($row = mysql_fetch_assoc($res))
    {
        print_r($row);
        echo "<br/><br/>";
    $rownum++;
    }
} 
```

输出：

![问题](../Images/19d8b5b5f72d97483b97e6aaac3eecde.png)

这很奇怪，因为该projectID只有一行，`projects`但有3行`projectfiles`......我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:02:29.707

使用查询的简短形式：

```
$sql = "SELECT projects.id,projects.name,projects.userID FROM projects LEFT JOIN
       projectfiles ON projects.id = projectfiles.projectID"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:03:14.100

```
SELECT p.*, pf.id, pf.fileId
FROM projects p LEFT JOIN projectfiles pf 
on p.id = pf.projectID 
```

你可以使用“as”来做你想做的事。不需要子选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T09:16:07.597

仅从`projectfiles`表中选择：

```
$sql = "SELECT projectfiles.*,
        projects.id as projects_id
       FROM projects";

// rest of the code is the same 
```

**更新**

```
$sql = "SELECT projectfiles.* FROM projects";
// rest of the code is the same 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T09:05:23.777

```
$sql = "SELECT p.id,p.name,p.userID FROM projects p";

$sql .= " LEFT JOIN".
    " projectfiles pf ".
    " ON p.id = p.projectID"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T09:30:09.927

```
$sql = "SELECT prj.id as prjId,
    prj.name as prjName,
    prj.userID as prjUid,
    pf.id as pfId, 
    pf.fileID as pfFileId, 
    pf.projectID as pfProjecId 
FROM projects as prj 
LEFT JOIN projectfiles AS pf 
ON prj.id = pf.projectID"; 
```

# linux - 如何在linux中添加一个cron作业

> ID：10945806
> 
> 赞同：11
> 
> 时间：2012-06-08T08:57:11.040
> 
> 标签：linux, cron

我正在使用 sphinx 进行搜索。我每天都会获得添加到数据库中的新数据。

我必须将此数据添加到 sphinx 搜索索引中，以便可以对其进行搜索。为此，我需要定期重新索引 sphinx 搜索索引。

如何在 linux 中设置 cron 来执行此操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T09:22:05.077

crontab 的定义如下：

```
MIN HOUR DOM MON DOW CMD 
```

因此，如果您想每天运行一项任务，请尝试：

```
0 0 * * * /path/to/your/script 
```

这将在每天 0:00 触发您的脚本启动

* * *

有关更多详细信息，请参阅[cron 标签 wiki](https://stackoverflow.com/tags/cron/info)

# jquery - 如何使用（out）使用表格使我的文件列表看起来更好？

> ID：10945808
> 
> 赞同：0
> 
> 时间：2012-06-08T08:57:24.620
> 
> 标签：jquery, html, css

我正在使用我的文件的那种列表和编辑描述：http: [//jsfiddle.net/GSC3x/5/](http://jsfiddle.net/GSC3x/5/)简单地说，当单击文件名时，它会在页面中间打开一个 jQuery 表单，但是让我们说我有几个不同名称的文件，然后这个东西看起来很丑

（我的案例：[http](http://derivativeofln.com/files.png) ://derivativeofln.com/files.png ）。

我想在单页上列出三列这样的列表，我正在考虑使用表格，但是当我尝试这样做时，当我单击其中一个文件名时，我的 jQuery 表单没有打开。

你建议在这里使用什么？

**@@更新**

这是（[http://derivativeofln.com/fileslist.png](http://derivativeofln.com/fileslist.png)）我使用的列表

```
 li {float:left; width:200px; 
```

但是现在我只有一列，如何从页面顶部开始第二列（如第一列开始）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:10:53.167

你应该使用foating li's。将此添加到您的CSS：

```
li {float:left; width:200px;} 
```

将宽度调整为页面宽度除以 3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:42:07.737

用这个

```
ul{
float: left;
width: 210px; /* The width of the column */
}

li{
width:200px;
} 
```

然后结束第一个 ul 并在您想要另一列时开始一个新的 ul。

# ruby-on-rails - 为什么javascript不能部署到heroku？

> ID：10945809
> 
> 赞同：6
> 
> 时间：2012-06-08T08:57:31.250
> 
> 标签：ruby-on-rails, heroku

将 Rails 应用程序部署到 Heroku 后，没有 javascript 函数在工作。

这些文件似乎已经编译（尽管在缩小的文件中不容易看到）。

找出javascript为什么不起作用的逻辑步骤是什么（它在生产中运行良好）。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T09:54:02.550

这个问题与资产管道有关。您应该编译资产。

为了解决它，在 config/environments/production.rb 中将 config.assets.compress 设置为 true，

IE

```
 config.assets.compress = true 
```

然后运行`RAILS_ENV=production bundle exec rake assets:precompile .`

再次推送代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T09:33:56.550

有时我会因为资产管道和我对它的误解而遇到问题。所以我所做的只是为了确保正确打包东西只是在页面加载时发出一个简单的警报（把它放在一些用户无法访问的随机页面上，等等）

```
alert('some-unique-string') 
```

将代码推送到服务器。然后在 chrome 中打开页面并使用开发工具，转到“脚本”选项卡。从那里您可以搜索字符串`some-unique-string`，因为您的字符串文字不会被缩小。如果您没有看到，那么您知道您的 javascript 由于某种原因没有被包含在内。

这至少会给你一个起点。

# java - Spring事务上下文包装？

> ID：10945810
> 
> 赞同：2
> 
> 时间：2012-06-08T08:57:32.063
> 
> 标签：java, spring, hibernate

我正在使用弹簧/休眠。我有服务层和 DAO 层。事务放在服务层。我有 FirstServiceImpl 类。在 FirstServiceImpl 类的一个方法中，它有 500 行代码。我所做的是将所有 500 行代码放在一个单独的类中（编写了一个接口和实现类。在 FirstServiceImpl 类中，我自动装配了新创建的接口以访问其单个方法）。我将 @Transactional 放在 FirstServiceImpl 类上。

我的问题是“新创建的类逻辑是否也在事务上下文中运行”？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:49:52.553

我不确定，但我认为它会使用[事务传播](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#tx-propagation)。但我可以告诉你确定的方法来测试它是否有效。

在单个事务中通过您的代码执行以下数据库操作。

> 在数据库中插入/更新一行，尝试在同一事务中插入/更新第二行。
> 
> 在插入第二行时故意引发异常。如果您可以在数据库中看到“第一个条目”，则表示您的事务没有回滚。它不起作用。
> 
> 而如果数据库中没有第一行条目，则意味着您的事务已回滚。在这里你可能会得到**UnexpectedRollbackException**。

在测试之前，请确保您的注释是`@Transactional(propagation=Propagation.REQUIRED)`

# networking - VPN 和本地网络访问

> ID：10945816
> 
> 赞同：0
> 
> 时间：2012-06-08T08:57:53.150
> 
> 标签：networking, vpn

我是 VPN 新手，我想了解更多。如果这个问题没有意义，我深表歉意。

在两个或多个办公室之间拥有 VPN 是否意味着您可以（从任何办公室）访问主办公室、本地网站等的本地 SMB 共享？

例如，如果我通常通过[http://192.168.X.XX/application](http://192.168.X.XX/application)访问总部的某个 Web 服务器，我是否可以通过 VPN 访问相同的东西（使用该地址）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:04:09.160

是的，但不是自动的。如果您想向其他 vpn 用户打开您的 samba 共享，您仍然需要手动打开 vpn ip 范围（例如 10.2.0.x）。

# c - 如何在gstreamer中设置元素的sink pad属性？

> ID：10945817
> 
> 赞同：2
> 
> 时间：2012-06-08T08:57:57.400
> 
> 标签：c, gstreamer

如何在程序中设置水槽垫的属性，例如：

```
sin_00::outWidth=1280 sin_00::outHeight=720 in this way pipeline was run using gst-launch-0.10 ..... 
```

并设置此属性，我使用`gst_pad_set_property()`了 API，但它不工作，它显示以下错误：

```
3_video_temp.c: In function 'main':
3_video_temp.c:551: warning: implicit declaration of function 'gst_pad_set_property'
/tmp/cc2zDbzt.o: In function `main':
/home/project/compWorkspace/Edubeam/3_video_temp.c:551: undefined reference to `gst_pad_set_property'
collect2: ld returned 1 exit status
make: *** [all] Error 1 
```

请告诉如何尽快设置该值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T22:57:40.353

如果 pad 具有属性（就像 videomixer 中的 pad 一样），您只需像使用任何属性一样使用 g_object_set，例如：

```
g_object_set (pad, "width", 1280, NULL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T21:00:27.477

大多数垫没有属性。宽度和高度通常通过设置在缓冲区和焊盘上的上限进行协商。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T01:22:46.033

您的系统上安装了哪个版本的 GStreamer？使用以下方法快速检查：

```
gst-inspect --version 
```

您在哪里找到 gst_pad_set_property() 的文档或示例？我刚刚在我的 Linux 开发系统上的 /usr/include/gstreamer-0.10/gst/* 中搜索了 gst_pad_set_property，结果空手而归。但是当我搜索 GStreamer 的最新源快照时，会出现该功能。这使我相信您可能正在查看 GStreamer 的开发版本的文档或示例，该版本具有早期版本中没有的新便利 API（我有时会遇到类似的问题）。

您到底想在水槽垫上设置什么属性？

# php - 剪掉这个巨大的字符串（php）

> ID：10945818
> 
> 赞同：0
> 
> 时间：2012-06-08T08:58:01.403
> 
> 标签：php, string, query-string

我有以下字符串，需要将其切成碎片。但是如何正确地做到这一点？

字符串：`$sting = 0nl10000143947019,23000143947456,....,10450143947022`

`...`意味着更多的nrs可以在这里

现在我想在以下部分减少这个字符串：

`$first`包含字符串中的第一个 nr 或字母。所以在这种情况下应该是：`0`

`$second`包含字符串中的第二个和第三个 nrs 或字母。所以在这种情况下应该是：`nl`

`$third`包含字符串中第三个 nr 或字母之后的所有内容。所以在这种情况下应该是：`10000143947019,23000143947456,....,10450143947022`

`$fourth``,`包含字符串中最后一个之后的所有内容。请注意，此 nr 可以比此示例中的更大或更小。所以在这种情况下应该是：`10450143947022`

希望这是可能的！

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:04:24.633

正则表达式应该这样做，这是让你开始的东西

```
preg_match("/^(\d+)([a-z]+)(.*?,([^,]*))$/i", $string, $m);

print_r($m); 
```

看这里：

[http://ideone.com/Xk1oV](http://ideone.com/Xk1oV)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T09:04:43.793

用一个简单的正则表达式

```
([0-9A-Za-z]{1})([0-9A-Za-z]{2})(.*)\,([^\,]+)$ 
```

应该管用。在 PHP 中，这将像

```
$string = "0nl10000143947019,23000143947456,23000143947456,10450143947022";
preg_match("@([0-9A-Za-z]{1})([0-9A-Za-z]{2})(.*)\,([^\,]+)$@i", $string, $matches);
// map $matches to the right variables. But you can do that yourself :-) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T09:10:05.537

尝试以下操作：

```
$first = substr($sting,0,1);
$second = substr($sting,1,2);
$third = substr($sting,3);
$fourth = end(explode(',',$sting)); 
```

# c# - c#中的受保护属性

> ID：10945820
> 
> 赞同：2
> 
> 时间：2012-06-08T08:58:05.480
> 
> 标签：c#, protected

```
class A
{ 
    protected int i = 13; 
}

class B : A
{
    int i = 9;

    public void fun() {
        console.write(i);
    }
} 
```

从 B 类对象调用方法`fun()`后，它会打印值 9。如果
我想访问. `i=13``fun()`

当protected属性与派生类private属性同名时，如何在派生类中访问基类的protected属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:01:52.823

无论如何，这将是一个坏主意。不过你可以试试`base.i`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T09:02:59.737

使用`base`关键字访问继承的类：

```
Console.Write(base.i); 
```

（代码经过测试，它使用 A 类中的成员。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T09:03:06.487

如果您想从派生类中访问它，请尝试：

```
 class B : A
  {
    public void fun()
    {
      Console.Write(base.i);
    }
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T09:12:15.763

Sana Tahseen，在基类和派生类中具有相同名称的类成员被认为是不好的做法，编译器将生成警告消息。我建议你避免这种做法，但如果你绝对需要这样做，那么你也应该在派生类的成员定义中使用 new 关键字：

```
class A
{    
    protected int i = 13;    
}

class B : A
{
    protected new int i = 9;

    public void fun()
    {
        Console.Write(base.i);
    }
} 
```

但是，推荐的方法是不要使用具有相同名称的成员。您可以在派生类的构造函数中更改继承的受保护成员字段的值：

```
class A
{    
    protected int i = 13;    
}

class B : A
{
    public B()
    {
        i = 9;
    }

    public void fun()
    {
        Console.Write(i);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T09:18:07.063

```
 public class AcessBaseDataMember
{
   public static void Main()
   {
       DerivedClass obj = new DerivedClass();
       obj.Get_Base_DataMember();
       obj.Get_Derived_DataMember();
       Console.Read();
   }

}
public class BaseClass
{
    protected int i = 13;
} 
```

公共类 DerivedClass:BaseClass { int i = 9; 公共无效 Get_Derived_DataMember() { Console.WriteLine(i); } 公共无效 Get_Base_DataMember() { Console.WriteLine(base.i); } }

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T09:03:29.470

```
class A
{ 
    protected int i = 13; 
}

class B : A
{
    int i = 9;

    public void print_own_member() {
        console.write(i);
    }

    public void print_base_class_member() {
        console.write(base.i);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-08T09:09:46.800

B 类中的变量 i 隐藏了 A 类中的变量 i。它闻起来是设计问题。但是，如果你真的想通过 fun 方法访问 i，你可以这样做：

```
class A {    
    protected int i = 13;    
};

class B : A {    
    int i = 9;

    public void fun() {
        console.write( "B's i == " + i );
        console.write( "A's i == " + base.i );    
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-08T09:21:34.617

您应该`base`为此使用关键字。

```
Console.Write(base.i); // It prints A class attribute i 
```

检查这些链接

[http://msdn.microsoft.com/en-us/library/ms173149.aspx](http://msdn.microsoft.com/en-us/library/ms173149.aspx)

[http://msdn.microsoft.com/en-us/library/ms173149(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173149(v=vs.80).aspx)

# javascript - 护照 Facebook 手机

> ID：10945822
> 
> 赞同：1
> 
> 时间：2012-06-08T08:58:15.330
> 
> 标签：javascript, android, node.js, mobile, express

我正在使用带有expressjs和passportjs的passport-facebook

我想知道我们如何将显示参数设置为 touch，以便当我们的 android 设备获取登录所需的 url 并允许应用程序时，它将显示出来，以便可以为手机正确呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:25:36.623

该参数不是标准的 OAuth 2.0 参数，因此 Facebook 策略中尚不支持它。但是，这有一些钩子，如果你[提出问题](https://github.com/jaredhanson/passport-facebook/issues)，我会添加对它的支持。

如果您想尝试自己添加支持，请参阅Google OAuth 2.0 策略中的[这一行](https://github.com/jaredhanson/passport-google-oauth/blob/master/lib/passport-google-oauth/oauth2.js#L96)。它解析传递给身份验证调用的选项，并确定应该将哪些选项作为参数添加到授权 URL。

一旦支持到位，您就可以执行以下操作：

```
passport.authenticate('facebook', { display: 'touch' }) 
```

# asp.net - 保存页面时 Visual Studio 2010 asp.net 挂断

> ID：10945824
> 
> 赞同：0
> 
> 时间：2012-06-08T08:58:22.653
> 
> 标签：asp.net, .net

> **可能重复：**
> [我的 Visual Studio 2010 挂断](https://stackoverflow.com/questions/10938786/my-visual-studio-2010-hangs-up)

我使用 Visual Studio 2010 很长时间（现在大约 2 年没有遇到任何类似的问题）。
四天前，当我试图保存页面时，VS突然挂断了（参考我的主人）。
我的主文件有一个

> ContentPlaceHolderID="头内容"

作为开始。
在“body”和“form”之后

```
<asp:ContentPlaceHolderID="MainContent"  runat="server">
<asp:Panel ID="Panel1" runat="server">
<asp:SiteMapPath id="SiteMapPath1" runat="server>
</asp:Content> 
<asp:ContentPlaceHolderID="Buttons"  runat="server>
</asp:Content>  
<asp:ContentPlaceHolderID="CenterHolder"  runat="server>
</asp:Content> 
<asp:ContentPlaceHolderID="BottomHolder"  runat="server>
</asp:Content> 
</asp:Panel>
</asp:Content> 
```

还有一个 Default.aspx 文件，其中包含以下代码：

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content> 
```

我在我的 Default.aspx 中使用；作为默认内容持有者的“MainContent”
，我正在添加下一个内容持有者，即“按钮”，
现在当我试图保存 Default.aspx 文件更改时，VS 挂断了底部的小图标，试图节省。
就是这样，我把它留了一整晚，但什么也没发生（那是一个让我蓝屏的时间）。
我不得不卸载 VS 和每个环境。什么都没有发生……有没有同样经历的人？

从我注意到...当问题开始时 CPU 使用率为 100% 但内存使用率正常 199Kb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:36:13.717

我终于找到了解决问题的方法。
任何“ContentPlaceHolder”都不能像我一样嵌套在通用“ContentPlaceHolder”中。
安装 VS SP1 时会发生这种情况。

# c# - DataContractJsonSerializer 解析 iso 8601 日期

> ID：10945825
> 
> 赞同：8
> 
> 时间：2012-06-08T08:58:23.100
> 
> 标签：c#, .net, windows-phone-7, windows-8, .net-4.5

我有一个json，它的日期为`2012-06-07T00:29:47.000`，必须反序列化。但是在

```
 DataContractJsonSerializer serializer = new DataContractJsonSerializer(type);
 return (object)serializer.ReadObject(Util.GetMemoryStreamFromString(json)); 
```

我得到以下异常

```
There was an error deserializing the object of type System.Collections.Generic.List`1
[[MyNameSpace.MyClass, MyNameSpace, Version=1.0.4541.23433, Culture=neutral, PublicKeyToken=null]].
 DateTime content '2012-06-07T00:29:47.000' does not start with '\/Date(' and end with ')\/' as required for JSON 
```

它在 windows mobile 7 中工作，但相同的代码在 windows 8 中不工作。
它期望日期格式`\/Date(1337020200000+0530)\/`而不是`2012-06-07T00:29:47.000`.

如果是，它是否需要自定义序列化，那么如何？而且我不能使用`JSON.NET`我一定要使用`DataContractJsonSerializer`，我不能更改 JSON 的格式，因为相同的 JSON 用于 android。
**我是.net 的新手。谢谢。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T09:31:11.737

使用一个字符串属性进行序列化/反序列化，并使用一个单独的非序列化属性将其转换为 DateTime。更容易看到一些示例代码：

```
[DataContract]
public class LibraryBook
{
    [DataMember(Name = "ReturnDate")]
    // This can be private because it's only ever accessed by the serialiser.
    private string FormattedReturnDate { get; set; }

    // This attribute prevents the ReturnDate property from being serialised.
    [IgnoreDataMember]
    // This property is used by your code.
    public DateTime ReturnDate
    {
        // Replace "o" with whichever DateTime format specifier you need.
        // "o" gives you a round-trippable format which is ISO-8601-compatible.
        get { return DateTime.ParseExact(FormattedReturnDate, "o", CultureInfo.InvariantCulture); }
        set { FormattedReturnDate = value.ToString("o"); }
    }
} 
```

您可以改为在 FormattedReturnDate 的设置器中进行解析，以便在收到错误日期时使其提前失败。

* * *

编辑以包含[GôTô](https://stackoverflow.com/users/456167)的建议，为序列化的 DataMember 提供正确的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-27T12:54:51.150

在 DataContractJsonSerializer 构造函数中传递格式

```
var serializer = new DataContractJsonSerializer(
   typeof(Client),
   new DataContractJsonSerializerSettings {
       DateTimeFormat = new DateTimeFormat("yyyy-MM-dd hh:mm:ss"),
    }); 
```

# forms - symfony2 form.vars.value 中的动态表单不起作用

> ID：10945826
> 
> 赞同：1
> 
> 时间：2012-06-08T08:58:23.010
> 
> 标签：forms, symfony

在我的 VMachine 表单中，我有 2 个字段（实体）数据存储和集群，每个集群托管许多数据存储。所以我想根据选择的集群动态显示数据存储列表。

实体数据存储包含适当集群的 id，这将允许我应用过滤。

问题是我无法获取当前选定项目的值来过滤我的数据存储列表：这是我的表单视图代码：

```
<form action="{{ path('vm_create') }}" method="post" {{ form_enctype(form) }}>
{{ form_errors(form) }}
<div>
   {{ form_label(form.cluster) }}
   {{ form_errors(form.cluster) }}
   {{ form_widget(form.cluster) }}
</div>
<div>
{# the list of all datastores is passed on parameters to the form view from the   
 controller #}

{% block datastore_widget%}
{% spaceless %}
<select {{ block('widget_attributes') }}>
     {% for datastore in datastores %}    
            {{ form.vars.value.cluster }}
       {% if  datastore.cluster.id == form.vars.value.cluster  %}
            <option value="{{ datastore.nom }}">{{ datastore.nom }}</option>
       {% endif %}  
    {% endfor %}       
 </select>
{% endspaceless %}
{% endblock datastore_widget%}

</div> 
```

似乎 form.vars.value.cluster 没有检索所选集群的当前值！

# asp.net - 单击一天时，ASP.NET“丢失”我日历上的标记日期

> ID：10945828
> 
> 赞同：1
> 
> 时间：2012-06-08T08:58:27.490
> 
> 标签：asp.net, calendar, master-pages

我有一个 asp.net 网络应用程序。`UpdatePanel`在我的母版页中，我有一个包含在（ajax）中的日历。

我在日历中使用`Calendar1.SelectedDates.Add(xxxx-xx-xx)`.

现在我的问题是，当我单击日历上的某个日期时，我“丢失”了所有标记的日期，只有今天的日期和我单击的日期被标记。

如何保存所有标记的日期，以便当我点击某一天时，他们会保留这些标记？

谢谢。

ps 我在母版页后面的代码中插入标记的日期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:18:47.043

您必须将您选择的日期存储在 ViewState 中，以便在回发/回调后选择它们。您还必须在后面的代码中添加一些逻辑。请参考以下链接：

[http://dotnetspeaks.net/post/Multiple-Date-Selection-inc2a0ASPc2a0Calendar.aspx](http://dotnetspeaks.net/post/Multiple-Date-Selection-inc2a0ASPc2a0Calendar.aspx)

# c++ - 线程中的套接字接受所有端口连接？C++

> ID：10945830
> 
> 赞同：1
> 
> 时间：2012-06-08T08:58:47.083
> 
> 标签：c++, multithreading, sockets, pthreads

我有 3 个套接字侦听来自同一 IP（10080、20081、30082）的不同端口。我已经在不同的线程（实际上是 pthreads）中创建了套接字并绑定了它等等。当我执行 Accept() 时，3 个套接字等待客户端调用，但是当我对任何端口进行调用时，总是回答发出最后一个 Accept() 的套接字。

这是我的过程（C++）：

**线程 1**

为端口 10080 创建套接字

为端口 10080 绑定套接字

监听 10080 端口

接受端口 10080

..................................................... .....................

**线程 2**

为端口 20081 创建套接字

为端口 20081 绑定套接字

监听 20081 端口

接受端口 20081

..................................................... .....................

**线程 3**

为端口 30082 创建套接字

为端口 30082 绑定套接字

监听 30082 端口

接受端口 30082

..................................................... .....................

不管我调用哪个端口（10080、20081 或 30082）总是继续处理“线程 3”。

任何人都可以帮助我处理正确线程中的信息吗？

谢谢。

PS：我正在监视主套接字中的端口以及Accept（）指令创建的套接字中的端口，并且主套接字仍然正确（30082）并且Accept套接字具有被调用端口（10080、20081或30082 ）。

```
struct addrinfo lRequestAddrInfo;
struct addrinfo * lResultAddrInfo;
int lSocketOption = 1;

memset(&lRequestAddrInfo,0,sizeof(lRequestAddrInfo));
lRequestAddrInfo.ai_socktype=SOCK_STREAM;
lRequestAddrInfo.ai_flags=AI_PASSIVE;
int lReturn = 0;

lReturn = getaddrinfo(lAddress->ip.c_str(), lAddress->port.c_str(), &lRequestAddrInfo, &lResultAddrInfo);

int lSocket = socket(lResultAddrInfo->ai_family, SOCK_STREAM, lResultAddrInfo->ai_protocol);
setsockopt(lSocket, SOL_SOCKET, SO_REUSEADDR, &lSocketOption, sizeof(lSocketOption));
lReturn = bind(lSocket, lResultAddrInfo->ai_addr, lResultAddrInfo->ai_addrlen);
lReturn = listen(lSocket, SOMAXCONN);
while(IsConnected())
{
    struct sockaddr lSocketAddress;
    socklen_t lSocketAddresslen = sizeof(lSocketAddress);
    lNewSocket = accept(pListener->_connection, &lSocketAddress, &lSocketAddresslen);

    if (lNewSocket > -1)
    {
        //process information in new thread
    }   
} 
```

这是线程内部的代码。更多信息：

**线程 1**

lSocket = 3（端口 10080）

**线程 2**

lSocket = 5（端口 20081）

**线程 3**

lSocket = 7（端口 30082）

当我在 10080 港口停靠时

lSocket = 7（端口 30082） lNewSocket = 4（端口 10080）

当我在 20081 港口停靠时

lSocket = 7（端口 30082） lNewSocket = 6（端口 20081）

当我在 30082 港口停靠时

lSocket = 7（端口 30082） lNewSocket = 8（端口 30082）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:12:23.490

我认为您错过了代码的重要部分。因为你没有包含它，所以很难判断你是否使用了 FD_SET()、FD_ISSET() 和朋友。如果不是，那么肯定会得到奇怪的结果。我认为粘贴代码比用文字解释更容易。这就是类似的事情对我有用的方式：

```
socket_descriptor=bindsock(thd);
while(true) {
        fd_set      rfs, wfs;
        FD_ZERO(&rfs);
        FD_ZERO(&wfs);

        FD_SET(socket_descriptor,&rfs);
        maxfd = conn_select(thd,&rfs, &wfs);

        if (select(maxfd + 1, &rfs, &wfs, NULL, NULL) == -1) {
            if (errno == EINTR) {
                continue;
            }
            break;
        }
        if (FD_ISSET(socket_descriptor, &rfs)) {
            thd->client_fd = accept(socket_descriptor, &thd->cliaddr,&clilen); 
```

……

和函数内部：

```
int
conn_select(struct THD*thd,fd_set * rfs, fd_set * wfs) {
    int maxfd = -1;
    size_t i;
    DBUG_ENTER("conn_cullselect");

    if (vector == NULL) {
        DBUG_PRINT("info",("vector == NULL"));
        DBUG_RETURN(0);
    }

    for (i = 0; i < MAX_CONNECTIONS; i++) {
        conn_t     *v;

        if (vector[i] == NULL) {
            DBUG_PRINT("info",("continue"));
            continue;
        }
        v = vector[i];
        switch (v->state) {
            case AWAITING_REQUEST:
                DBUG_PRINT("info",("AWAITING_REQUEST"));
                if (maxfd < v->sd) {
                    maxfd = v->sd;
                }
                FD_SET(v->sd, rfs);
                break;
            case SENDING_FILE:
                DBUG_PRINT("info",("SENDING_FILE"));
                if (maxfd < v->fd) {
                    maxfd = v->fd;
                }
                FD_SET(v->fd, rfs);
                break;
            case SENDING_HEADER:
                DBUG_PRINT("info",("SENDING_HEADER"));
                if (maxfd < v->sd) {
                    maxfd = v->sd;
                }
                FD_SET(v->sd, wfs);
                break;
        }
    }
    DBUG_PRINT("info",("returning %d from conn_cullselect",maxfd));
    DBUG_RETURN(maxfd);
} 
```

想法是一样的，而不取决于你正在监听多少个端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:26:38.337

最后我做到了！**我在线程外**编写了套接字创建和侦听操作，并在线程**内**编写了接受操作。

我希望这对其他人有帮助！

感谢大家的回答！

# javascript - IE9 JS 无法获取属性“显示”的值：对象为空或未定义

> ID：10945835
> 
> 赞同：1
> 
> 时间：2012-06-08T08:59:17.040
> 
> 标签：javascript, magento, prototypejs, internet-explorer-9

最近推出了一个 Magento 商店，主页上有一个图像滑块。在 Firefox、Chrome 等中完美运行，但像往常一样，IE9 引起了问题 - 奇怪的是，这在 IE 中运行，所以不确定是什么导致它停止运行。

就目前而言，在 IE9 中，它无法检测滑块中的图像范围（仅显示序列中的第一个），因此不会在任何地方滑动。

在 IE9 开发者模式下，错误是：-

=======#

```
SCRIPT438: Object doesn't support property or method 'dispatchEvent'
prototype.js, line 5734 character 7 
```

代码片段：

```
5733 if (document.createEvent)
5734   element.dispatchEvent(event);
5735 else
5736   element.fireEvent(event.eventType, event); 
```

=======#

和...

=======#

```
SCRIPT5007: Unable to get value of the property 'display': object is null or undefined
prototype.js, line 2542 character 5 
```

代码片段：

```
2538 else if (Prototype.Browser.IE) {
2539   Element.Methods.getStyle = function(element, style) {
2540     element = $(element);
2541     style = (style == 'float' || style == 'cssFloat') ? 'styleFloat' : style.camelize();
2542     var value = element.style[style];
2543     if (!value && element.currentStyle) value = element.currentStyle[style]; 
```

=======#

在 Magento (1.6.2.0) 中，我们使用的是最新版本的 prototype.js (1.7)。

我们还在头部添加了 IE 标准模式...

```
<!-- Enable IE8 Standards mode -->
<meta http-equiv="X-UA-Compatible" content="IE=8" > 
```

类似的错误确实出现在 Firefox 和 Chrome 中，但它们似乎不会影响功能。

请任何人都可以看看并建议问题可能出在哪里，因为我不确定要解决什么。有问题的网站是[http://www.showermania.co.uk/](http://www.showermania.co.uk/)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:34:12.157

最终解决了这个问题。

重置 Magento 的会话 cookie 管理设置（可能还值得清除缓存、重新索引所有并清除所有会话和锁定）。它解决了我的问题（很奇怪），所以如果有人遇到类似的事情，可能值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T21:30:36.600

我在我的一个应用程序中遇到了同样的错误。为了修复它，我将 X-UA-COMPATIBLE 更改为：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9"> 
```

# r - 在 R 中创建新的条件字符串变量，它是现有字符串变量的 paste()

> ID：10945836
> 
> 赞同：0
> 
> 时间：2012-06-08T08:59:18.287
> 
> 标签：r, conditional-statements

我对 R 有一个问题，这让我发疯....

我根据报告的数据（清理和验证）设置了很多条件变量，并且一直遇到这个问题。它与替换向量的长度和条件语句有关（请原谅我的解释不佳......）。

让我举一个你的例子：

根据报告的数据，我创建了一个“合成”字符变量`batch_id`，如下所示`paste(var1, var2, sep="")`。但是，仅当`var2`6 个字符长且以“B”结尾时。

如果 var2 更短（通常是这样）或不以“B”结尾，我想要`batch_id <- NA`（缺失）

我尝试了以下方法：

`data <- within(data, batch_id[nchar(data$var2) <6] <- NA)`

`data <- within(data, batch_id[nchar(data$var2) == 6 & !substr(data$var2, 6, 6) == "B"] <- NA)`

`data <- within( data, batch_id[nchar(data$var2) == 6 & substr(data$var2, 6, 6) == "B"] <- paste(data$var1, data$var2, sep=""))`

但是，在最后一行代码中，我收到错误消息：

`number of items to replace is not a multiple of replacement length`

哦，我多么喜欢这个错误信息！:)

我知道，通过`[...]`在右侧为**两者** `var1`设置相同的条件，`var2`它确实有效，但必须有更好的（稍后更优雅、更易读）的方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:13:01.027

```
data$batch_id <- paste(data$var1, data$var2, sep="") 
```

之后，您可以根据您的条件将值更改为 NA 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:37:17.237

我建议：

```
batch_id = ifelse(grepl("B$",data$var2) & nchar(data$var2)==6, 
                             paste(data$var1, data$var2, sep=""), NA) 
```

把所有东西都放在一条线上，避免了添加额外库和学习如何使用它们的复杂性……有什么不喜欢的？！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:46:53.470

你可以这样做：

```
library(stringr)

# generate some dummy data
df <- data.frame(var1=c("a", "b", "c"), var2=c("12345B", "123B", "123456"),stringsAsFactors=F)

df$batch_id <- with(df, ifelse(nchar(var2) == 6 & str_sub(var2, -1) == "B", str_c(var1, var2), NA)) 
```

# c# - 条件搜索和替换 C#

> ID：10945837
> 
> 赞同：-4
> 
> 时间：2012-06-08T08:59:23.337
> 
> 标签：c#, search, replace, conditional-statements

您好，感谢您的关注。

编辑：我不是程序员，我几乎不知道 C# 或任何其他语言，所以，对不起这个问题，我一直在寻找解决方案，但没有任何效果。无论如何，谢谢你否决了我的问题。

至此，我得到了这段代码：

```
using System;
using VisualWebRipper.Internal.SimpleHtmlParser;
using VisualWebRipper;
public class Script
{

    public static string TransformContent(WrContentTransformationArguments args)
    {
        try
        {
            //Place your transformation code here.
            //This example just returns the input data

            return args.Content;
        }
        catch(Exception exp)
        {
            //Place error handling here
            args.WriteDebug("Custom script error: " + exp.Message);
            return "Custom script error";
        }
    }
} 
```

我需要用 C# 做一个 Condition 让我在 * *args.Content*（包含变量字符串）中找到字符串*"No se exige"*，如果 Find 匹配，它将字符串值更改为数字 (0) 并返回它。如果不是什么都没有改变。

所以，我只需要搜索一个字符串并将其替换为一个数字，如果它与字符串“No se exige”匹配。

非常感谢您努力阅读我的英语，希望您能帮助我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:04:32.077

只需使用[Replace](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)方法：

```
args.Content = args.Content.Replace("No se exige", "0"); 
```

# java - ftp 上的同时连接数

> ID：10945839
> 
> 赞同：1
> 
> 时间：2012-06-08T08:59:25.613
> 
> 标签：java, multithreading, ftp

是否可以知道 FTP 服务器可以使用 Java 支持的同时连接数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:05:32.310

您在询问 FTP 服务器的功能是否支持同时连接。即使它支持，我认为除了发送请求之外，你可以使用 java 做很多事情。

# asp.net-mvc - 将缓存对象暴露给视图的最佳方式

> ID：10945840
> 
> 赞同：2
> 
> 时间：2012-06-08T08:59:27.973
> 
> 标签：asp.net-mvc, caching, razor, views

我正在使用 Translator 对象（自定义类）来公开网站文本（该对象存储数据库中的文本）。Translator 对象存储在缓存中的 Application_Start() 函数中。

我目前对 Translator 对象的使用是：

*   我有一个 MasterViewModel

    ```
    public class MasterViewModel
    {
        public Translator Translator = HttpContext.Current.Cache.Get("Translator") as   Translator;
    } 
    ```

*   每个视图都有一个视图模型，它来自 MasterViewModel

    ```
    public class RandomViewModel : MasterViewModel
    {
    } 
    ```

*   在我看来，我可以使用我的 Translator 对象

    ```
    @model ViewModels.RandomViewModel

    @Model.Translator.GetText(label) 
    ```

我不认为这是一个很好的方法。在 App_Code 中做一个剃须刀助手是个好主意吗，这样在我看来我可以使用

```
 @Translate.GetText("RANDOM_TEXT") 
```

这将是 Helper 函数（在 Translate.cshtml 中）

```
 @helper GetText(string label)
    {
        Translator Translator = @Cache.Get("Translator") as Translator;
        @: Translator.GetTextByLabel(label);
    } 
```

所以我的问题是将缓存对象暴露给我的所有视图的最佳方式是什么。上述方法之一好吗？还是我应该采用另一种解决方案？

（我希望我的英语没问题，我是荷兰人）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:23:04.863

有不同的方法可以实现这一点，但我将通过派生`WebViewPage`并强制所有剃刀视图从此类继承来创建一个基类。

```
public abstract class MyWebViewPageBase<T>: WebViewPage<T>
{
   private Translator _translator;

   protected override void InitializePage()
   { 
     _translator = Context.Cache.Get("Translator") as Translator;
   }

   public string Translate(string label)
   {
     if(_translator != null)
       return _translator.GetText(label);

     return "";
   }
} 
```

`MyWebViewPage`现在我可以通过以下几种方式继承in razor 视图：

第一种方法是从你必须使用`@inherits`指令的每个角度来看。

前任。

```
// Index.cshtml
@inherits MyWebViewPageBase
@model ...

.... 
```

另一种方法是为所有视图设置基本页面的全局方法，为此您必须修改`Views`文件夹中存在的 web.config。

您必须如下设置`pageBaseType`of`pages`元素，

```
<pages pageBaseType="MyWebViewPageBase"> 
```

现在从任何角度来看，您都可以简单地调用 translate 方法，如下所示，

```
@Translate("RANDOM_TEXT") 
```

希望这可以帮助！

# python - CURL无法连接到scrapy python中的主机

> ID：10945841
> 
> 赞同：1
> 
> 时间：2012-06-08T08:59:30.153
> 
> 标签：python, curl, scrapy

我正在研究scrapy，我正在安排我用以下命令编写的蜘蛛

```
curl http://localhost:6800/schedule.json -d project=example -d spider=exampledotcom 
```

我通过在scrapy教程中看到来使用它，但是当我运行上面的命令时，我曾经得到以下错误

```
curl: (7) couldn't connect to host 
```

为什么 curl 无法连接到主机，命令有什么问题吗？还有谁能解释一下我们为什么要使用的概念`"http://localhost:6800/schedule.json"`，因为最后我的意图是在一个项目中运行多个蜘蛛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:55:53.953

调度蜘蛛意味着告诉`scrapyd`它什么时候可以运行蜘蛛。因此，在尝试联系它之前，您必须[运行：`scrapyd`](http://doc.scrapy.org/en/latest/topics/scrapyd.html#starting-scrapyd)

```
scrapy server 
```

或者

```
twistd -ny extras/scrapyd.tac 
```

# objective-c - 在 Mac 应用程序中移动由 shell 脚本创建的文件

> ID：10945845
> 
> 赞同：0
> 
> 时间：2012-06-08T08:59:36.163
> 
> 标签：objective-c, xcode, cocoa, nsfilemanager

我无法在我的 Mac 应用程序中移动由 shell 脚本创建的文件。

该文件似乎保存在：

```
/Users/USERNAME/Library/Developer/Xcode/DerivedData/APPLICATION_NAME/Build/Products/Debug/ 
```

我尝试按如下方式使用 NSFileManager 但没有任何反应：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
[[NSFileManager defaultManager] movePath:[NSString stringWithFormat:@"%/Users/USERNAME/Library/Developer/Xcode/DerivedData/APPLICATION_NAME/Build/Products/Debug/%@", filename] toPath:documentsDirectory handler:nil]; 
```

以及尝试使用带有 NSTask 的 shell 脚本移动文件。

我可能做错了什么，有人知道如何将文件从该文件夹移动到 Documents 文件夹甚至更好的桌面吗？

提前谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:45:08.880

要在应用程序包中找到该文件，您需要使用`mainBundle`. 假设您有一个`foo.txt`需要定位的文件，并且它存储在标准资源位置，请执行以下操作：

```
NSBundle *appBundle = [NSBundle mainBundle];
NSString *srcPath = [appBundle pathForResource: @"foo" ofType: @"txt"]; 
```

此时，您应该`foo.txt`在 srcPath 中有路径。

如果要为用户下载文件，则应将其放入用户的 Downloads 目录。如果您下载文件供内部使用，它属于`/Library/Application Support/<yourapp>/...`或`~/Library/Application Support/<yourapp>...`。

找到这些的正确方法是使用`NSSearchPathForDirectoriesInDomains`.

```
NSArray *paths = NSSearchPathForDirectoriesInDomains( NSDownloadsDirectory, 
                    NSUserDomainMask, YES); 
```

将产生一个数组（应该是 1 个元素），其中包含当前用户的下载目录路径。如果他们正在请求该文件，您应该将其用作目标路径。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains( NSApplicationSupportDirectory,
                    NSUserDomainMask, YES); 
```

将产生一个数组（应该是 1 个元素），其中包含当前用户的应用程序支持路径。如果这是应用程序内部使用的每个用户下载，则应将其存储在使用附加到此路径的应用程序名称或标识符创建的子目录中。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains( NSApplicationSupportDirectory, 
                   NSSystemDomainMask, YES); 
```

将产生一个数组（应该是 1 个元素），其中包含机器的应用程序支持路径。如果这是应用程序内部使用的机器范围下载，则应将其存储在使用附加到此路径的应用程序名称或标识符创建的子目录中。

创建源路径和目标路径后，您需要使用它`NSFileManager`来将文件移动到位。对于应用程序支持目录，您需要首先验证您想要的目录是否存在，如果不存在，请创建它（使用`-createDirectoryAtPath:withIntermediateDirectories:attributes:error`）。

```
NSFileManager *manager = [[NSFileManager alloc] init];
NSError *error;
if (![manager copyItemAtPath: srcPath toPath: dstPath error: &error]) {
    NSLog("Error copying %@ to %@, %@", srcPath, dstPath, error);
}
[manager release]; 
```

# objective-c - UIBezierPath containsPoint 只工作一次

> ID：10945846
> 
> 赞同：0
> 
> 时间：2012-06-08T08:59:42.297
> 
> 标签：objective-c, ios, cocoa-touch, ipad, uibezierpath

以下是我在 UITextView 上绘制角的代码。

在 .h 文件中：

```
 @property(nonatomic,strong)  UIBezierPath *   upperLeft;
    @property(nonatomic,strong)  UIBezierPath *   upperRight;

-  (void)drawRect:(CGRect)rect
{

 upperLeft = [UIBezierPath bezierPathWithArcCenter:CGPointMake(xCorner + margin, yCorner + margin)
                                                   radius:5.5
                                               startAngle:0
                                                 endAngle:DEGREES_TO_RADIANS(360)
                                                clockwise:YES];
        [[UIColor blackColor]setFill];
        [upperLeft fill];
        [upperLeft closePath];

upperRight = [UIBezierPath bezierPathWithArcCenter:CGPointMake(xCorner+ widths - margin, yCorner + margin)
                                                radius:5.5
                                            startAngle:0
                                              endAngle:DEGREES_TO_RADIANS(360)
                                             clockwise:YES];
    [[UIColor blackColor]setFill];
    [upperRight fill];
    [upperRight closePath];
}

-  (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

     touchStart  =  [[touches anyObject] locationInView:self];

    isResizingUL = [upperLeft containsPoint:touchStart];
    isResizingUR= [upperRight containsPoint:touchStart];
} 
```

当我第一次点击路径时，它会给出布尔值是。但是对于以后的命中，它会为任何路径赋予 NO 值。即使命中路径。任何人都可以帮助我为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:36:56.120

看起来您正在尝试存储 upperLeft 和 lowerRight，但您没有使用该属性，因此 ARC 不会通过保留这些值来帮助您。因此，当您超出范围时，upperLeft 和 lowerRight 将变得未定义。我有点惊讶它没有崩溃。

如果你使用`self.upperLeft=...`and `self.lowerRight=...`，你应该会成功。

# android - 如何从活动中捕获通知

> ID：10945857
> 
> 赞同：0
> 
> 时间：2012-06-08T09:00:40.807
> 
> 标签：android

我有一个活动 (ActivityA)。这是应用程序的启动活动。然后我从 ActivityA 调用一个服务（ServiceB）。然后 ServiceB 获取一些其他参数并通知标题栏。

```
mNotificationManager.notify(DataHolder.TITLE_BAR_NOTOFICATION_ID, notification); 
```

我现在想要的是 ActivityA 也可以识别某些通知已调用。并显示有通知。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:03:58.580

*我现在想要的是 ActivityA 也可以识别某些通知已调用。并显示有通知。*

*   解决方案是让您的活动触发自定义广播，当 ActivityA 或 ActivityB 在`onReceive`方法中接收到该广播时，他们可以显示通知。

**假设一个场景是 Class1 正在做某项任务，一旦任务完成，他想通知其他类。**

```
public class Class1 extends Activity{

    public static final String CUSTOM_INTENT = "org.some.action";

    @Override
    public void onCreate(Bundle bundle) {

        //Do some operation.......now once operation is done send Broadcast 
         to other activities

        Intent i = new Intent();
        i.setAction(CUSTOM_INTENT);
        context.sendBroadcast(i);
    }

} 
```

**现在 Class2 将在他收到广播后得到通知。**

```
public class Class2 extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals("org.some.action")) {
            System.out.println("I got Notified");
        }
    }
} 
```

**不要忘记在清单文件中添加 Class2 作为接收器。**

```
<receiver android:name=".Class2" android:enabled="true">
    <intent-filter>
      <action android:name="org.some.action"></action>
    </intent-filter>
</receiver> 
```

# iphone - “导航项中不支持普通样式”警告我的自定义条形按钮项

> ID：10945859
> 
> 赞同：93
> 
> 时间：2012-06-08T09:00:58.490
> 
> 标签：iphone, ios, xcode, uibarbuttonitem, uibarbuttonitemstyle

我将圆形矩形按钮拖动到右侧条形按钮项的位置，并将图像设置为圆形矩形按钮。一切正常，除了警告“导航项中不支持普通样式”。即使我将 Bar Button Item 的样式选择为“Bordered”，警告仍然存在。Xcode 4.2 有什么问题？提前致谢！

附言。我使用圆形矩形按钮自定义了许多条形按钮项，有时 Xcode 4.2 在条形按钮项上仅显示一个警告，有时在所有条形按钮项上显示警告。

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2014-07-04T00:08:23.033

我可以通过手动编辑情节提要文件来消除这些错误，并在`<navigationItem>`元素中的 Bar Button 项目上找到有问题的 style="plain" 条目。

更改自：

```
<barButtonItem key="rightBarButtonItem" style="plain" id="juB-DL-F9i"> 
```

至：

```
<barButtonItem key="rightBarButtonItem" id="juB-DL-F9i"> 
```

这清除了警告......对或错。

这可能是一个惊人的 hack，更大的问题是我没有从根本上导致它或从整个文档中删除不可见的条形按钮项。这是在逐个浏览所有元素并发现一些导航栏是空的（没有子级）并且可能发生在大量复制和粘贴（cmd + c | v）继承而不使用重复（cmd + d）构建界面。虽然根源不是根本原因，但症状是栏项目没有显示在要修复的文档“大纲视图”中。Interface Builder 的行为有时让我印象深刻，而在大纲视图中应该有一些东西的空容器是一种气味。好吧，现在对我来说。有时删除有问题的节点并重建可以解决最奇怪的问题。

警告：在你尝试这个之前备份你的故事板......版本控制是你的朋友......当你的故事板完全被冲洗并且无法编译时，我不承担任何责任。你只会得到一个“我告诉过你！” 我学习了几次艰难的方法，但勤奋的源代码控制让我很头疼。

编辑：将括号放在代码块中

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-11-12T17:48:47.650

如果您单击警告并且没有转到有问题的导航项，请执行以下操作。（从添加的评论中用更安全的方法直观地表示 Hunter 的答案）

在文件浏览器中右键单击情节提要并选择`Open As Source Code`

[![在此处输入图像描述](../Images/85299ffb8ff5d24e61ce4d5fe2663d15.png)](https://i.stack.imgur.com/rtehZ.png)

在源代码页中搜索“plain”，找到附加到导航项的那个。

[![在此处输入图像描述](../Images/c8dc4057bb17c7d1feb23405e336a498.png)](https://i.stack.imgur.com/lcvec.png)

要获取视图的名称，请在搜索栏中输入“场景”，然后单击返回搜索箭头以搜索该标签*上方*的第一个实例`navigationItem`

[![在此处输入图像描述](../Images/cc40067f3050a464b7bc978f1439e029.png)](https://i.stack.imgur.com/yoEbI.png)

这是您的场景的名称，您现在可以`Interface Builder - Storyboard`使用上述右键单击方法将您的故事板视图更改回，然后在场景菜单中选择场景，然后选择其中的 Bar Item。

[![在此处输入图像描述](../Images/ac6613da8511abc627c12e19838e8d31.png)](https://i.stack.imgur.com/mia3t.png)

转到属性检查器并将样式从更改`Plain`为`Bordered`

[![在此处输入图像描述](../Images/e328052eed9f28147928ec4b051cb2cc.png)](https://i.stack.imgur.com/vPY65.png)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-05-08T02:36:10.427

通过在文档大纲中四处寻找，我停止了关于普通样式的警告。那是显示我的导航项，在这 2 个条形按钮项中，在每个按钮中。有问题的设置在条形按钮项目上。在其属性检查器中，我将 Style 从 Plain 更改为 Done，警告消失了。注意：我使用的是 XCode 5。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-06-03T10:26:26.973

如果您正在使用情节提要，然后单击警告，它应该会将您带到有问题的导航项（我有两个问题，一个带我到那里，另一个没有） - 更改样式并清理项目。

![条形按钮样式设置为普通](../Images/941e3caea9917fb6377768d5c30dbcce.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-06-08T10:10:22.527

`backBarButtonItem` `leftBarButtonItem`并且`rightBarButtonItem`是`UINavigationItem`对象。没有`style`财产，`UINavigationItem`所以这是警告的原因。您应该以编程方式设置 barButtons：

iOS 4：  

```
UIButton *bt=[UIButton buttonWithType:UIButtonTypeRoundedRect];
 [bt setFrame:YourFrame];
 //[bt setImage:[UIImage imageNamed:@"backBT"] forState:UIControlStateNormal];
 [bt addTarget:self action:@selector(popViewController:) forControlEvents:UIControlEventTouchUpInside];
 UIBarButtonItem *leftButton=[[UIBarButtonItem alloc] initWithCustomView:bt];
 self.navigationItem.leftBarButtonItem=leftButton; 
```

对于 iOS 5+：

[阅读UIBarButtonItem 参考](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIBarButtonItem_Class/Reference/Reference.html)的“自定义外观”部分。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-08T09:11:11.290

在导航栏中尝试使用 UIBarButtonItem 而不是圆形矩形按钮并为其设置图像。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-16T16:32:10.583

在我的例子中，它是一个后向箭头的图像，设置为“普通”。

错误消息似乎是指导航栏中的所有项目。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-10T14:40:20.043

在确定故事板中的所有条形按钮都设置为非普通按钮后，请确保执行 git commit 并删除派生数据。我花了很长时间试图弄清楚为什么问题没有自行解决，并删除派生数据文件夹为我解决了问题。

# iphone - 选择文本字段时如何更改其背景？

> ID：10945862
> 
> 赞同：0
> 
> 时间：2012-06-08T09:01:05.330
> 
> 标签：iphone

我有一个应用程序，我想仅在选择文本字段时更改它的背景图像。然后，如果未选择更改回以前的图像？有人可以帮我实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:06:53.757

在 didBeginEditing 方法中添加此代码 myTextField.background = [UIImage imageNamed:@"selectedimg.png"]; 并在 didEndEditing 方法上将取消选择的图像添加到文本字段。

# c# - 多层次的继承

> ID：10945864
> 
> 赞同：0
> 
> 时间：2012-06-08T09:01:09.690
> 
> 标签：c#

如果我有多个子类，我只想确保我正在正确地考虑继承和构造函数。我的类看起来像这样，Shape 是基类，其他派生类

```
Shape<-----Shape2D<------Box 
```

这段代码正确吗？它正在工作，但我只是想知道这是否是最好的方法？

```
 public Shape(int inputA, int inputB)
    {
        valueA = inputA;
        valueB = inputB;
    }

    public Shape2D(int inputA, int inputB) : base(inputA, inputB)
    {

    }

    public Box(int inputA, int inputB) : base(inputA, inputB)
    {

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:04:53.543

您的代码示例中没有任何内容 - 链接看起来很好，并且在构造时，`Box`将按预期填充。`valueA``valueB`

不确定“最佳方式”是什么意思 - 以这种方式链接构造函数绝对没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:07:51.090

是的，这对我来说似乎是正确的。

如果您不想在后代类中进行任何特殊初始化，可以将初始化任务委托给层次结构中的基类。在那里定义的成员变量，因此它可以处理任何需要的初始化。

如果你在后代中需要一些特殊的东西，那么你必须在那里处理特殊的初始化。但在您需要完全相同的初始化之前，我认为这是建议的方法。

你在你的问题中想过这个吗？

# java - code::blocks 不支持 JNI 宏？

> ID：10945865
> 
> 赞同：1
> 
> 时间：2012-06-08T09:01:09.847
> 
> 标签：java, macros, java-native-interface, codeblocks

```
JNIEXPORT jint JNICALL JNI_Func(....) {
  ....
} 
```

当我尝试在本机代码中使用宏*（JNIEXPORT 和 JNICALL）运行 java 程序时，出现不满意的链接错误。*但是当我删除宏时，我也不例外。IDE *Code::Blocks*是否不支持 JNI 宏？如果它支持我应该怎么做才能启用它们？

*注意：*我没有收到与定义的宏相关的错误或警告。它只是使运行失败，因为它给了我不满意的链接错误。

*编辑 ：*

堆栈跟踪 ：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError:  keylogger.TestKeys.initializeJNIVars()V
    at keylogger.TestKeys.initializeJNIVars(Native Method)
    at keylogger.TestKeys.main(TestKeys.java:22) 
```

但在抛出此异常之前，它会从本机代码中打印一行。问题实际上是宏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:23:27.667

如果源代码编译并创建了 DLL，那么 Code::Blocks 没有任何问题。Code::Blocks 使用 gcc，gcc 可以毫无问题地创建 JNI DLL

如果在运行 Java 类时遇到此错误，请确保已将 DLL 放在`java.library.path`

## 编辑

您需要添加这两个选项`Project->Build options->Linker Settings->Other Linker Options`才能使其工作：

`-Xlinker --add-stdcall-alias`

# iphone - iPhone：如何为任何内置类对象创建动态实例？

> ID：10945869
> 
> 赞同：1
> 
> 时间：2012-06-08T09:01:45.753
> 
> 标签：iphone

我想为内置类对象创建动态实例。我不确定如何实现这一目标。例如，我想动态创建下面的音频播放器对象实例，以便我可以播放动态的多个数据。

```
audioPlayer = [[AVAudioPlayer alloc] initWithData:pData error:nil]; 
```

而不是这个，我想成为下面的东西，

```
audioPlayer1 = [[AVAudioPlayer alloc] initWithData:pData error:nil];
audioPlayer2 = [[AVAudioPlayer alloc] initWithData:pData error:nil];
audioPlayer3 = [[AVAudioPlayer alloc] initWithData:pData error:nil]; 
```

这里1、2、3可以动态添加，因为我不知道一次要添加多少，必须动态创建。

我虽然可以喜欢，

```
AVAudioPlayer *[NSString stringWithFormat:@"audioPlayer%d", value] = [[AVAudioPlayer alloc] initWithData:pData error:nil]; 
```

但这是不可接受的。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T09:06:38.517

只需使用循环来创建实例并将它们放入可变数组中。

```
NSMutableArray *players = [NSMutableArray array];
for (int i = 0; i < 3; i++) {
    AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithData:pData error:nil];
    [players addObject:audioPlayer];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:16:10.547

如`@Ole Begemann`建议的那样，将动态创建放在 for 循环中。但是，我要做的是创建一个接受`dynamic`需要创建多少个值的方法：

```
-(void)createAudioPlayers:(int)count {

    //Assuming `players` array is declared in your header as an NSMutableArray and initialized.

    pData = ... // your data

    for (int i = 0; i < count; i++) {

     AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithData:pData error:nil];
     [audioPlayer play];
     [players addObject:audioPlayer];

    }

} 
```

现在您可以简单地传递一个`int`值，即您想要创建多少玩家。

```
[self createAudioPlayers:4]; 
```

或者

```
[self createAudioPlayers:8]; 
```

希望这可以帮助 ！

# iphone - 如何使用图形 API 从 facebook 注销

> ID：10945870
> 
> 赞同：1
> 
> 时间：2012-06-08T09:01:47.020
> 
> 标签：iphone, ios

我遵循了图形 API，到目前为止一切顺利。当我尝试从 Facebook 注销时出现问题。永远不会发生注销：我使用了这种方法：

```
 [facebook logout]; 
```

我已经实现了委托方法：

```
 - (void) fbDidLogout {

NSLog(@"did logout");

// Remove saved authorization information if it exists
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"]) {
    [defaults removeObjectForKey:@"FBAccessTokenKey"];
    [defaults removeObjectForKey:@"FBExpirationDateKey"];
    [defaults synchronize];
} 
```

}

问题是用户再次运行应用程序时再次登录。我希望每次进入 Facebook 屏幕时，新用户都应该登录。然而这种方法不起作用。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T10:24:12.223

```
- (void)logOutFB {

fbGraph.accessToken = nil;
NSHTTPCookie *cookie;
NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for (cookie in [storage cookies])
{
    NSString* domainName = [cookie domain];
    NSRange domainRange = [domainName rangeOfString:@"facebook"];
    if(domainRange.length > 0)
    {
        [storage deleteCookie:cookie];
    }
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:18:28.193

实现以下代码

```
Facebook *fb; //your fbconnect object

if([fb isSessionValid])
{
    fb.accessToken = nil;
    fb.expirationDate = nil;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:27:56.650

试试看 ：

```
-(void)fbLogout  {  
    fbGraph.accessToken = nil;  
    NSHTTPCookie *cookie;   
    NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];   
    for (cookie in [storage cookies])   {
        NSString* domainName = [cookie domain];
        NSRange domainRange = [domainName rangeOfString:@"facebook"];
        if(domainRange.length > 0)
        {
            [storage deleteCookie:cookie];
        }       }   [NSUserDefaults resetStandardUserDefaults];
    [[NSUserDefaults standardUserDefaults]removeObjectForKey:@"fb_accesstoken"];    fbGraph.accessToken = nil;
    NSHTTPCookie *cookie;
    NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    for (cookie in [storage cookies])
    {
        NSString* domainName = [cookie domain];
        NSRange domainRange = [domainName rangeOfString:@"facebook"];
        if(domainRange.length > 0)
        {
            [storage deleteCookie:cookie];
        }
    }  } 
```

# android - 使用模拟器连接相机服务失败？

> ID：10945872
> 
> 赞同：0
> 
> 时间：2012-06-08T09:01:51.593
> 
> 标签：android, android-emulator

今天我想测试一个我几天前开发的应用程序，camers 服务是其中的一部分。今天，我想在模拟器上测试那个应用程序，但我发现 logcat 说：

```
Fail to connect to the camera service 
```

尽管如此，我之前使用 EMULATOR 测试过同一个应用程序，它工作正常，但今天，我收到了这个错误。

**显现**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.androidbook.SaveImgPathSQLite"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.CAMERA"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".SaveImg"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

日志猫：

```
 06-08 05:28:46.539: E/AndroidRuntime(765): FATAL EXCEPTION: main
06-08 05:28:46.539: E/AndroidRuntime(765): java.lang.RuntimeException: Fail to connect to camera service
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.hardware.Camera.native_setup(Native Method)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.hardware.Camera.<init>(Camera.java:258)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.hardware.Camera.open(Camera.java:235)
06-08 05:28:46.539: E/AndroidRuntime(765):  at amr.NAVKA_Projekt.MPTest.CameraSurface.surfaceCreated(CameraSurface.java:44)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.view.SurfaceView.updateWindow(SurfaceView.java:543)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.view.SurfaceView.dispatchDraw(SurfaceView.java:348)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.view.View.draw(View.java:6883)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.view.View.draw(View.java:6883)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
06-08 05:28:46.539: E/AndroidRuntime(765):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1862)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.view.ViewRoot.draw(ViewRoot.java:1522)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1258)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.os.Looper.loop(Looper.java:130)
06-08 05:28:46.539: E/AndroidRuntime(765):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-08 05:28:46.539: E/AndroidRuntime(765):  at java.lang.reflect.Method.invokeNative(Native Method)
06-08 05:28:46.539: E/AndroidRuntime(765):  at java.lang.reflect.Method.invoke(Method.java:507)
06-08 05:28:46.539: E/AndroidRuntime(765):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-08 05:28:46.539: E/AndroidRuntime(765):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-08 05:28:46.539: E/AndroidRuntime(765):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:47:25.180

您可以使用使用相机服务的应用程序

如果您真的想在模拟器上使用它，请[按照此说明进行操作](https://stackoverflow.com/questions/1276450/how-to-use-web-camera-in-android-emulator-to-capture-a-live-image/1283741#1283741)

# python - 如何在代码执行中使用 python exclude stderr 获取 stderr？

> ID：10945879
> 
> 赞同：0
> 
> 时间：2012-06-08T09:02:17.723
> 
> 标签：python, exception-handling

正如我在这里看到的：[如何获取子进程的 stderr 流输出的最后 N 行？](https://stackoverflow.com/questions/4995095/how-to-get-the-last-n-lines-of-a-subprocess-stderr-stream-output)，我们得到了程序执行的标准错误 - 这对我来说不太好。我想得到异常或错误，就在系统没有那么多资源（RAM 或 CPU）来运行我的程序时。我怎么能抓住这个？

# wpf - 在 Silverlight 中将文件缓存或保存到光盘

> ID：10945880
> 
> 赞同：1
> 
> 时间：2012-06-08T09:02:24.043
> 
> 标签：wpf, silverlight

我正在构建一个触摸应用程序并考虑在 Silverlight 中制作它，以前我只使用 WPF，但现在我正在考虑使用 Silverlight。

在 WPF 中，我将电影、音乐和高清图像缓存在磁盘上，因此我不必每次都流式传输它们（它用于教育软件）。这种方法在 Silverlight 中可行吗？或者 Silverlight 中是否有其他选择？数据范围可以从 10Mg 到 2Gb。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:34:58.253

您需要将它们缓存在[隔离存储](http://msdn.microsoft.com/en-us/library/3ak841sy%28VS.95%29.aspx)中，因为您无法在浏览器模式下直接访问硬盘驱动器（非提升权限）。

隔离存储的默认配额仅为 1MB，但显然在最新版本的 Silverlight 中[您可以请求的内容](http://blogs.microsoft.co.il/blogs/alex_golesh/archive/2008/08/14/silverlight-isolated-storage-maximum-quota.aspx)没有上限。

*[增加请求](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.increasequotato%28v=vs.95%29.aspx)会弹出一个对话框让用户请求增加可用空间的权限，但这只需要发生一次*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:35:41.713

对的，这是可能的。有几种方法可以做到这一点：

**银光 3、4：**

这些版本的 silverlight 限制了对文件系统的访问。您只能保存到[独立存储](http://msdn.microsoft.com/en-us/library/3ak841sy%28v=vs.80%29.aspx)。由于其大小为 1 MB，您应该要求用户增加其配额。[更多信息](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.increasequotato%28v=vs.95%29.aspx)。您还可以访问受信任应用程序中的 MyDocuments、MyMusic、MyPictures 和 MyVideos 文件夹。它是您配置为需要提升信任的应用程序。

**银光 5：**

在此版本中，您可以无限制地访问受信任应用程序中的本地文件系统。[更多信息](http://msdn.microsoft.com/en-us/library/ee721083%28v=vs.95%29.aspx#file_system_access)。

# android - 在 ImageButton 上对齐图像

> ID：10945881
> 
> 赞同：0
> 
> 时间：2012-06-08T09:02:24.493
> 
> 标签：android, android-layout, android-image, android-2.3-gingerbread

我正在尝试将图像设置在 ImageButton 的顶部，如下所示

![在此处输入图像描述](../Images/2a9d0e5d0dac8a7650d9c24124c15bb2.png)

但我不能这样做。如果我使用以下代码

```
<LinearLayout
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"

>
    <ImageButton

         android:id="@+id/btn"
         android:layout_width="40dip"
         android:layout_height="40dip"
         android:src="@drawable/button_bar_top"
         android:scaleType="fitStart"
         android:adjustViewBounds="true"
    />

</LinearLayout> 
```

我得到以下外观

![在此处输入图像描述](../Images/7daf2eba1ff6fabc389a4d9b1aacc896.png)

所以我想将它与顶部对齐，并且我想删除红色条周围的额外填充。图像的大小为 40 X 10，ImageView 的宽度也相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:39:55.920

看来您可以`Button`在此处使用与`android:drawableTop`您正在尝试做的完全一样的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:58:45.280

**试试这个它会解决问题**

```
 <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher" >
        </ImageView>

        <ImageButton
            android:id="@+id/imgbtnNew"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="10sp"
            android:onClick="onNew"
            android:padding="10sp"
            android:scaleType="fitXY"
            android:src="@drawable/ic_launcher" />
    </LinearLayout> 
```

# java - 从对象列表生成 CSV

> ID：10945882
> 
> 赞同：1
> 
> 时间：2012-06-08T09:02:25.727
> 
> 标签：java, reflection, csv

我想从自定义对象列表中生成一个 CSV 文件。

我有一个抽象类：

```
public abstract class MyClass{
    public static final String SEPARATOR = ";";

    // many private variables

    @Override
    public String toString(){
        // return all my variables values separated by SEPARATOR
    }
} 
```

以及从这个类继承的几个具体类。我想`toString()`只在这个类中实现该方法，而不在每个具体类中重新实现。

是否有任何有用的库来实现这一点，还是我必须`toString()`为每个类手动实现方法？我应该使用反射吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:05:41.427

有一个类似于您的要求的库，名称为[opencsv](http://opencsv.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:18:28.440

反射方法的问题是 1) 您可以轻松地在具体类中获得您不希望在 csv 表中出现的字段。2) 你如何为你的 csv 表生成一个标题？

另外，我发现将 csv 生成逻辑放在自定义对象中是不好的设计，当然这取决于它们所代表的内容（毫无疑问，也可能有支持您的方法的原因）。考虑为此使用单独的类。

是的，你可以（甚至必须）使用反射，不，我不知道是否已经存在一个为你处理这个的库。其他人提到的 OpenCSV 可以完成将所有内容放在一起的工作，一旦您在 CSV 表中获得所需的值。

看看 Class.getFields(), Field.setAccessible() （如果你需要的话），应该可以。实际上使用反射并不难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T09:05:59.953

使用[`OpenCSV`](http://opencsv.sourceforge.net/). 它是一个用于解析和编写 CSV 文件的库，可以处理引号、不同的分隔符和多行值。

# jquery - JQuery .animate() 完成函数在完成前执行

> ID：10945883
> 
> 赞同：1
> 
> 时间：2012-06-08T09:02:25.913
> 
> 标签：jquery, jquery-animate

有一个`div (#content)`带有`10px`填充的容器及其`content (#inner_content)`​​. 我正在通过`ajax`（新的 html 包含 a 中的所有内容`#inner_content div`）加载一些新内容，并将 # `content's`html 替换为新的 html。

这样做时，我希望容器`div (#content)`的高度通过动画调整到新内容的高度。所以我为容器 div 设置了溢出：隐藏，当我加载新内容时，我得到它的高度并将容器 div 设置为相同的高度。一切都很好，期望有时高度`(10-20 pixels`可能比需要的大一些，这给设计带来了麻烦。

所以我在动画完成后将`.animate()`容器的高度设置`div`为''（`auto`）的完整功能，以便高度正确。问题是完整的功能立即运行，动画被跳过并且高度立即变为自动。这是代码：

```
$("#content").html(response); 
$("#content").animate({height: $("#inner_content").height()+"px"}, 300, function () {
$("#content").css({height: ''});
}); 
```

我怎么解决这个问题？我需要执行动画，然后将高度设置为自动（这会导致进程中出现一个小的“间隙”，因为 div 立即缩短了 10-20 像素，但没关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:08:30.933

嗯，没有任何源代码很棘手，但我的直觉是，出于某种原因，你`#content`和`#inner_content`divs 实际上是相同的高度（我猜是 0），这导致动画立即执行，从而立即触发事件也是。

你能提供任何来源吗？

我建议首先`outerHeight()`在分区上使用该方法，看看会发生什么。此外，请尝试关闭`overflow: hidden`并尝试以下伪代码：

1.  在隐藏的单独加载新内容`div`
2.  获取新内容的高度
3.  动画当前内容
4.  用新内容更新当前内容

# javascript - Knockout JS 值未显示/绑定/更新，但可通过 ko.toJS($data).value

> ID：10945884
> 
> 赞同：4
> 
> 时间：2012-06-08T09:02:27.047
> 
> 标签：javascript, knockout.js

我有一个奇怪的问题，至少我觉得很奇怪。

以下将不显示任何内容：

```
<input type="text" data-bind="value: selectedAddress.street1" /> 
```

但是，如果像这样绑定，那么它会显示正确的值，但不会更新（显示值但似乎没有绑定到对象）：

```
<input type="text" data-bind="value: ko.toJS($data).selectedAddress.street1" /> 
```

我检查了 selectedAddress 对象是否实际上包含以下数据：

```
JSON.stringify(ko.toJS(selectedAddress), null, 2) 
```

它确实

```
{
 "id": 5631,
 "street1": "Some Adress 43",
 "street2": null,
 "postcode": "15850",
 "city": "GhostTown",
 "country": "UK",
 "addressTypes": []
} 
```

**如何让输入字段正确绑定到对象属性并相应地显示/更新值？**

视图模型：

```
var theViewModel = function() {
        var self = this;
        self.no = ko.observable();
        self.name = ko.observable();
        self.addresses = ko.observableArray([]);
        self.selectedAddress = ko.observable(new Address());
        ...
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T23:36:28.440

括号仅在某些情况下是可选的，但在引用对象的属性（可能是也可能不是 observable 的值）时不是。因此，您需要显式使用括号来获取 observable 的值`selectedAddress`。然后，你可以参考`street1`这个对象的属性（括号现在是可选的）：

```
data-bind="value: selectedAddress().street1" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T12:35:08.787

这是单向绑定的解决方案（值不会更新）。

[这是来自 KnockoutJS 文档http://knockoutjs.com/documentation/value-binding.html](http://knockoutjs.com/documentation/value-binding.html)的引用

> 如果您引用的不是简单属性，例如复杂的 JavaScript 表达式或子属性，KO 会将表单元素的初始状态设置为该值，但当用户编辑时，它将无法写回任何更改表单元素。在这种情况下，它是一次性的值设置器，而不是真正的绑定。

要获得双向绑定功能，请使用模板。就像是：

```
<script type="text/html" id="someTemplate">
    <input type="text" data-bind="value: street1" />
</script>

<div data-bind="template: { name: 'someTemplate', data: selectedAddress }"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-15T04:44:58.727

If someone had the same issue and wondered about this part

```
self.selectedAddress = ko.observable(new Address()); 
```

And you might ask whether there's a need to create a constructor or an object to fill up the ko.observable function, well you can, but if you don't like creating a model for this one, just add up an empty array and the parenthesis method should work.

example :

```
self.selectedAddress = ko.observable([]); 
```

then :

```
selectedAddres().street1 
```

This may not work for other instances but so far it worked on me. Thank you for this answer too, saved me a lot of time!

# visual-studio-2010 - 无法使用 Visual Studio Lightswitch 进行调试

> ID：10945886
> 
> 赞同：0
> 
> 时间：2012-06-08T09:02:31.047
> 
> 标签：visual-studio-2010, debugging, visual-studio-express, visual-studio-debugging, visual-studio-lightswitch

请帮助使用 Visual Studio Lightswitch/Visual Studio Express。

我有一个 nunit 测试项目的解决方案。要运行单元测试，我使用以下行，它将调试器附加到 nunit 运行器。

```
NUnit.Gui.AppEntry.Main(new string[] { Assembly.GetExecutingAssembly().Location }); 
```

在 Visual Studio Express 下它工作正常，但是当使用 Lightswitch 打开此解决方案时，我收到一条错误消息，提示“调试器未正确安装”。

我尝试从 ReSharper 的运行程序进行调试，它给出了一个错误消息“无法启动调试器。错误代码：-1989083114”。只需使用 ReSharper 运行测试即可。

任何帮助表示赞赏！

**[笔记]**

只是为了确保我清楚：不，这不是 Lightwitch 应用程序，但我想使用 VS Lightswitch 来拥有 ReSharper，它不适用于 Express。此外，Lightswitch 确实具有比 Express 更多的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:08:36.690

显然，这对于 Lightswitch 是不可能的，至少根据[MSDN的人说](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/3a8a27b2-26b8-4dea-86e1-80e7f512cac5/)

# full-text-search - 弹性搜索中的范围与术语提升

> ID：10945889
> 
> 赞同：7
> 
> 时间：2012-06-08T09:02:37.610
> 
> 标签：full-text-search, elasticsearch

我正在努力在 Elastic Search 中按照我想要的方式进行提升工作。

假设我有一些包含性别、兴趣和年龄的个人资料索引，假设我发现性别匹配最相关，然后兴趣和最不重要的标准是用户的年龄。我期待下面的查询会根据刚才提到的原则对匹配的配置文件进行排序，但是当我执行它时，我先得到一些男性，然后在喜欢汽车的女性 Maria 之前得到 50 岁的女性 Anna ……为什么玛丽亚的分数没有比安娜高？？

```
{
    "query": {
        "bool" : {
            "should" : [
                { "term"  : { "gender" : { "term": "male", "boost": 10.0 } } },
                { "term"  : { "likes"  : { "term": "cars", "boost" : 5.0 } } },
                { "range" : { "age"    : { "from" : 50,    "boost" : 1.0 } } }
            ],
            "minimum_number_should_match" : 1
        }
    }    
} 
```

提示将不胜感激，

斯廷

* * *

这些是执行的 curl 命令：

```
$ curl -XPUT http://localhost:9200/users/profile/1 -d '{
    "nickname" : "bob",
    "gender" : "male",
    "age" : 48,
    "likes" : "airplanes"
}'

$ curl -XPUT http://localhost:9200/users/profile/2 -d '{
    "nickname" : "carlos",
    "gender" : "male",
    "age" : 24,
    "likes" : "food"
}'

$ curl -XPUT http://localhost:9200/users/profile/3 -d '{
    "nickname" : "julio",
    "gender" : "male",
    "age" : 18,
    "likes" : "ladies"
}'

$ curl -XPUT http://localhost:9200/users/profile/4 -d '{
    "nickname" : "maria",
    "gender" : "female",
    "age" : 25,
    "likes" : "cars"
}'

$ curl -XPUT http://localhost:9200/users/profile/5 -d '{
    "nickname" : "anna",
    "gender" : "female",
    "age" : 50,
    "likes" : "clothes"
}'

$ curl -XGET http://localhost:9200/users/profile/_search -d '{
    "query": {
        "bool" : {
            "should" : [
                { "term" : { "gender" : { "term": "male", "boost": 10.0 } } },
                { "term" : { "likes" : { "term": "cars", "boost" : 5.0 } } },
                { "range" : { "age" : { "from" : 50, "boost" : 1.0 } } }
            ],
            "minimum_number_should_match" : 1
        }
    }    
}' 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T11:08:20.917

该`boost`值不是绝对的 - 它[与其他因素相结合](http://lucene.apache.org/core/3_6_0/scoring.html)来确定每个术语的相关性。

你有两个“性别”（我会假设），但有很多不同的“喜欢”。所以`male`被认为几乎无关紧要，因为它在您的数据中经常出现。然而，`cars`可能只出现几次，因此被认为更相关。

此逻辑对全文搜索很有用，但不适用于枚举，枚举本质上是用作过滤器。

`omit_term_freq_and_positions`幸运的是，您可以使用和在每个字段的基础上禁用此功能`omit_norms`。

尝试如下设置映射：

```
curl -XPUT 'http://127.0.0.1:9200/test/?pretty=1'  -d '
{
   "mappings" : {
      "test" : {
         "properties" : {
            "likes" : {
               "index" : "not_analyzed",
               "omit_term_freq_and_positions" : 1,
               "omit_norms" : 1,
               "type" : "string"
            },
            "gender" : {
               "index" : "not_analyzed",
               "omit_term_freq_and_positions" : 1,
               "omit_norms" : 1,
               "type" : "string"
            },
            "age" : {
               "type" : "integer"
            }
         }
      }
   }
}
' 
```

**更新**：完整的工作示例：

删除现有索引：

```
curl -XDELETE 'http://127.0.0.1:9200/users/?pretty=1' 
```

使用新映射创建索引：

```
curl -XPUT 'http://127.0.0.1:9200/users/?pretty=1'  -d '
{
   "mappings" : {
      "profile" : {
         "properties" : {
            "likes" : {
               "index" : "not_analyzed",
               "omit_term_freq_and_positions" : 1,
               "type" : "string",
               "omit_norms" : 1
            },
            "age" : {
               "type" : "integer"
            },
            "gender" : {
               "index" : "not_analyzed",
               "omit_term_freq_and_positions" : 1,
               "type" : "string",
               "omit_norms" : 1
            }
         }
      }
   }
}
' 
```

索引测试文档：

```
curl -XPOST 'http://127.0.0.1:9200/users/profile/_bulk?pretty=1'  -d '
{"index" : {"_id" : 1}}
{"nickname" : "bob", "likes" : "airplanes", "age" : 48, "gender" : "male"}
{"index" : {"_id" : 2}}
{"nickname" : "carlos", "likes" : "food", "age" : 24, "gender" : "male"}
{"index" : {"_id" : 3}}
{"nickname" : "julio", "likes" : "ladies", "age" : 18, "gender" : "male"}
{"index" : {"_id" : 4}}
{"nickname" : "maria", "likes" : "cars", "age" : 25, "gender" : "female"}
{"index" : {"_id" : 5}}
{"nickname" : "anna", "likes" : "clothes", "age" : 50, "gender" : "female"}
' 
```

刷新索引（以确保可以搜索到最新的文档）：

```
curl -XPOST 'http://127.0.0.1:9200/users/_refresh?pretty=1' 
```

搜索：

```
curl -XGET 'http://127.0.0.1:9200/users/profile/_search?pretty=1'  -d '
{
   "query" : {
      "bool" : {
         "minimum_number_should_match" : 1,
         "should" : [
            {
               "term" : {
                  "gender" : {
                     "boost" : 10,
                     "term" : "male"
                  }
               }
            },
            {
               "term" : {
                  "likes" : {
                     "boost" : 5,
                     "term" : "cars"
                  }
               }
            },
            {
               "range" : {
                  "age" : {
                     "boost" : 1,
                     "from" : 50
                  }
               }
            }
         ]
      }
   }
}
' 
```

结果：

```
# {
#    "hits" : {
#       "hits" : [
#          {
#             "_source" : {
#                "nickname" : "bob",
#                "likes" : "airplanes",
#                "age" : 48,
#                "gender" : "male"
#             },
#             "_score" : 0.053500723,
#             "_index" : "users",
#             "_id" : "1",
#             "_type" : "profile"
#          },
#          {
#             "_source" : {
#                "nickname" : "carlos",
#                "likes" : "food",
#                "age" : 24,
#                "gender" : "male"
#             },
#             "_score" : 0.053500723,
#             "_index" : "users",
#             "_id" : "2",
#             "_type" : "profile"
#          },
#          {
#             "_source" : {
#                "nickname" : "julio",
#                "likes" : "ladies",
#                "age" : 18,
#                "gender" : "male"
#             },
#             "_score" : 0.053500723,
#             "_index" : "users",
#             "_id" : "3",
#             "_type" : "profile"
#          },
#          {
#             "_source" : {
#                "nickname" : "anna",
#                "likes" : "clothes",
#                "age" : 50,
#                "gender" : "female"
#             },
#             "_score" : 0.029695695,
#             "_index" : "users",
#             "_id" : "5",
#             "_type" : "profile"
#          },
#          {
#             "_source" : {
#                "nickname" : "maria",
#                "likes" : "cars",
#                "age" : 25,
#                "gender" : "female"
#             },
#             "_score" : 0.015511602,
#             "_index" : "users",
#             "_id" : "4",
#             "_type" : "profile"
#          }
#       ],
#       "max_score" : 0.053500723,
#       "total" : 5
#    },
#    "timed_out" : false,
#    "_shards" : {
#       "failed" : 0,
#       "successful" : 5,
#       "total" : 5
#    },
#    "took" : 4
# } 
```

**更新：替代方法**

在这里，我提出了一个替代查询，它虽然更详细，但可以为您提供更可预测的结果。它涉及使用[自定义过滤器得分查询](http://www.elasticsearch.org/guide/reference/query-dsl/custom-filters-score-query.html)。首先，我们将文档过滤为至少匹配一个条件的文档。因为我们使用[恒定分数](http://www.elasticsearch.org/guide/reference/query-dsl/constant-score-query.html)查询，所以所有文档的初始分数都是 1。

自定义过滤器分数允许我们在每个文档匹配过滤器时提升它：

```
curl -XGET 'http://127.0.0.1:9200/_all/_search?pretty=1'  -d '
{
   "query" : {
      "custom_filters_score" : {
         "query" : {
            "constant_score" : {
               "filter" : {
                  "or" : [
                     {
                        "term" : {
                           "gender" : "male"
                        }
                     },
                     {
                        "term" : {
                           "likes" : "cars"
                        }
                     },
                     {
                        "range" : {
                           "age" : {
                              "gte" : 50
                           }
                        }
                     }
                  ]
               }
            }
         },
         "score_mode" : "total",
         "filters" : [
            {
               "boost" : "10",
               "filter" : {
                  "term" : {
                     "gender" : "male"
                  }
               }
            },
            {
               "boost" : "5",
               "filter" : {
                  "term" : {
                     "likes" : "cars"
                  }
               }
            },
            {
               "boost" : "1",
               "filter" : {
                  "range" : {
                     "age" : {
                        "gte" : 50
                     }
                  }
               }
            }
         ]
      }
   }
}
' 
```

您会看到与每个文档相关的分数都是很好的整数，很容易追溯到匹配的子句：

```
# [Fri Jun  8 21:30:24 2012] Response:
# {
#    "hits" : {
#       "hits" : [
#          {
#             "_source" : {
#                "nickname" : "bob",
#                "likes" : "airplanes",
#                "age" : 48,
#                "gender" : "male"
#             },
#             "_score" : 10,
#             "_index" : "users",
#             "_id" : "1",
#             "_type" : "profile"
#          },
#          {
#             "_source" : {
#                "nickname" : "carlos",
#                "likes" : "food",
#                "age" : 24,
#                "gender" : "male"
#             },
#             "_score" : 10,
#             "_index" : "users",
#             "_id" : "2",
#             "_type" : "profile"
#          },
#          {
#             "_source" : {
#                "nickname" : "julio",
#                "likes" : "ladies",
#                "age" : 18,
#                "gender" : "male"
#             },
#             "_score" : 10,
#             "_index" : "users",
#             "_id" : "3",
#             "_type" : "profile"
#          },
#          {
#             "_source" : {
#                "nickname" : "maria",
#                "likes" : "cars",
#                "age" : 25,
#                "gender" : "female"
#             },
#             "_score" : 5,
#             "_index" : "users",
#             "_id" : "4",
#             "_type" : "profile"
#          },
#          {
#             "_source" : {
#                "nickname" : "anna",
#                "likes" : "clothes",
#                "age" : 50,
#                "gender" : "female"
#             },
#             "_score" : 1,
#             "_index" : "users",
#             "_id" : "5",
#             "_type" : "profile"
#          }
#       ],
#       "max_score" : 10,
#       "total" : 5
#    },
#    "timed_out" : false,
#    "_shards" : {
#       "failed" : 0,
#       "successful" : 20,
#       "total" : 20
#    },
#    "took" : 6
# } 
```

# asp.net - 在没有任何 WebForms 经验的情况下学习 ASP.NET MVC，这合理吗？

> ID：10945894
> 
> 赞同：0
> 
> 时间：2012-06-08T09:03:07.427
> 
> 标签：asp.net, asp.net-mvc

不确定这与 stackoverflow 有多大相关性，但这里有……一年多以前，我的朋友说她对学习 Web 开发/编程很感兴趣，并要求我协助她学习。我解释了一些概念，概述了我的经验，我教过她 HTML、OO JavaScript 和 CSS。现在她对那些她说她想开始使用更强大的工具/语言的人充满信心，我建议使用带有 C# 的 ASP.NET。我讨论了我对 WebForms 的不喜欢（我非常讨厌 Webforms，我从使用 ASP/ASP.NET 跳到 PHP 和 ROR 有几年了）但是，一旦 ASP.NET MVC 发布，我就重新加入并现在使用它作为我的默认技术。我建议她在提供资源（书籍、视频、

我现在不确定我是否给出了正确的建议，并且可能由于大多数资源都集中在或假设 Webforms 知识而使她的学习更加困难。无论有没有 WebForms 知识，是否有人对学习 MVC 有过意见或经验。如果您在没有 Webforms 知识的情况下成功地学习了 ASP.NET MVC，请就您是如何实现这一目标的（资源、书籍、网站等）提供建议。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:06:21.483

以前接触过 WebForms 甚至可能成为有效学习和使用 MVC 的障碍。我阅读的有关该主题的大多数在线教程和书籍都没有假定任何 WebForms 经验。

这是我可以推荐的一本书：[ASP.NET MVC 4 in Action](http://manning.com/palermo3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:07:09.023

这取决于你已经知道什么。

从 WebForms 学习 MVC 要求您忘记 WebForms 的可怕抽象。

WebForms 的构建是为了让 MS 可以轻松地将其所有忠实的 winforms 开发人员移植到网络上，而不是帮助他们学习任何明智的范例或实践。

首先要学习的最好的东西是 HTTP，以及如何在 Web 上实际发出请求。如果你理解这一点，你就可以使用任何半体面的框架，它只是学习他的语法

# ios5 - 在 iOS 5 应用中快速打开/关闭蓝牙

> ID：10945903
> 
> 赞同：0
> 
> 时间：2012-06-08T09:03:43.480
> 
> 标签：ios5, bluetooth

是否有一个 API（记录与否）可以在运行 iOS 5 的 iOS 设备中关闭或打开蓝牙？

我不想发布应用程序，我需要创建一个只是为了满足我的个人需求。（该应用程序的想法是：打开它，如果蓝牙关闭，则将其打开，否则，将其关闭）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:56:09.770

逆向工程看一下名为：BT Mono（蓝牙单声道）的 SBSettings 插件，它具有更改蓝牙激活状态的能力。

# excel - Excel 宏的控制文件

> ID：10945904
> 
> 赞同：2
> 
> 时间：2012-06-08T09:03:45.057
> 
> 标签：excel, vba, batch-file

我有一个 Excel 宏，我也用它来运行命令行程序。在那个宏中，我为不同的文件路径、文件名等设置了一些参数，现在我想将它们放入（也许）一个 Windows 批处理文件中，这样我（或用户）就不需要触摸宏，但可以更改该 .bat 控制文件中的文件路径并让宏相应地更改其值。

我怎么能完成这样的任务？也许有一些例子你可以指出我。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:21:33.060

Excel 不提供任何标准的文档化方式来将参数从命令行传递到工作簿。

但是，有一种未记录的、棘手的且有些有限的方法可以做到这一点。滥用 Excel 的`/e`参数。

在您的 BAT 文件中，您以这种方式调用 excel

```
 start excel "workbook.xls" /e/oneparm/anotherparm/yetanotherparm 
```

然后在 workbook.xls 文件中，使用函数访问命令行

```
 Declare Function GetCommandLineA Lib "Kernel32" () As String 
```

然后只是解析它......

```
 Private Sub Workbook_Open()
   ...
   commandline = GetCommandLineA
   ...
   epos = Search("/e", commandline, 1) + 1
   p1pos = Search("/", commandline, epos) + 1 
   onearg = Mid(commandline, epos, p1pos-epos)

   p2pos = Search("/", commandline, p1pos)
   anotherarg = Mid(commandline, p1pos, p2pos-p1pos)
   ... 
```

警告，此方法非常有限，如果参数中有空格或斜线或与号或插入符号或其他保留字符，则它不起作用。为了克服这个限制，你需要在参数中实现一些编码方法；对于这种情况，我通常使用*urlencoding*但任何其他技巧（用下划线或加号替换空格。决定取决于你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T12:03:07.777

批处理文件中最简单的方法是简单地设置一些环境变量；它们将在创建进程时被 excel 继承；

**蝙蝠**

```
set FILE_1=c:\bleep\bloop\some.file
set HELLO=Hello bob
set TAX=17.5
start excel "c:\null\book1.xlsm" 
```

**Excel**

```
Sub Workbook_Open()
msgbox environ$("FILE_1")
msgbox environ$("HELLO")
msgbox environ$("TAX") 
```

# windows - 科尔多瓦 mac 在 Safari 中打开 URL

> ID：10945905
> 
> 赞同：3
> 
> 时间：2012-06-08T09:03:47.943
> 
> 标签：windows, cordova, safari, hyperlink

我正在使用以下[https://github.com/apache/incubator-cordova-mac](https://github.com/apache/incubator-cordova-mac)制作 mac os x 应用程序，但似乎我无法打开 _blank 链接。如果有人知道那会很棒。

答案 1) - 没有用

我把它放在 WebViewDelegate.m -

> UIWebViewNavigationType < 是错误

```
- (BOOL) webView:(WebView*)theWebView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
{
    //return [self.viewController webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType];
    NSURL *url = [request URL];

    // Intercept the external http requests and forward to Safari.app
    // Otherwise forward to the PhoneGap WebView
    if ([[url scheme] isEqualToString:@"http"] || [[url scheme] isEqualToString:@"https"] || [[url scheme] isEqualToString:@"itms-apps"]) {
        [[UIApplication sharedApplication] openURL:url];
        return NO;
    }
    else {
        return [self.viewController webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:24:07.783

我认为 _blank 更改是最近的更改，尚未在 iOS 中实现。我目前使用这段本机代码`AppDelegate.m`在 Safari 中打开外部 URL

```
- (BOOL) webView:(UIWebView*)theWebView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
{
    //return [self.viewController webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType];
    NSURL *url = [request URL];

    // Intercept the external http requests and forward to Safari.app
    // Otherwise forward to the PhoneGap WebView
    if ([[url scheme] isEqualToString:@"http"] || [[url scheme] isEqualToString:@"https"] || [[url scheme] isEqualToString:@"itms-apps"]) {
        [[UIApplication sharedApplication] openURL:url];
        return NO;
    }
    else {
        return [self.viewController webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:55:18.020

**这**适用于 2.3.0 oO'

```
- (BOOL) webView:(UIWebView*)theWebView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType{
//return [self.viewController webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType];
NSURL *url = [request URL];

// Intercept the external http requests and forward to Safari.app
// Otherwise forward to the PhoneGap WebView
if ([[url scheme] isEqualToString:@"http"] || [[url scheme] isEqualToString:@"https"] || [[url scheme] isEqualToString:@"itms-apps"]) {
    [[UIApplication sharedApplication] openURL:url];
    return NO;
}
else {
    return [ super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType ];
}} 
```

# android - Android：从特定目录读取 Zip 文件

> ID：10945907
> 
> 赞同：3
> 
> 时间：2012-06-08T09:03:50.937
> 
> 标签：android, file, assets

我有一个问题，几个小时都找不到答案。我在 Android 库项目中有一个 zip 文件，由于多种原因，我无法将其放入 assets 或 raw 目录（从这些目录中读取文件很容易没有问题）。现在，我只是将 zip 文件放在必须从中读取它的同一个源包中。

我的问题：

1）甚至可以从资产和原始目录之外的其他目录读取android中的文件吗？2）不在这些目录中的文件的路径是什么。假设我将 zip 文件放在名为 a.source.package 的包中。当我签署我的应用程序并将其导出为 apk 时，zip 文件位于 a/source/package/file.zip，但我无法使用此路径访问它。

我只是尝试像这样读取文件：

```
ZipInputStream zipInputStream = new ZipInputStream(new ZipInputStream(new FileInputStream(new File(pathToZip)))); 
```

但得到以下例外：

```
06-08 11:02:03.612: W/System.err(3412): java.io.FileNotFoundException: /data/app/com.package.myapp.apk/com/my/package/tools/data.zip: open failed: ENOTDIR (Not a directory) 
```

谢谢你的帮助！

# html - 我们可以添加吗 内部标签？

> ID：10945908
> 
> 赞同：8
> 
> 时间：2012-06-08T09:03:53.680
> 
> 标签：html, dreamweaver, markup

 当我在锚标记内编写 html 代码时，我的 Dreamweaver 编辑器在锚标记中显示错误。不应该使用内部标签吗？是否有任何规则编写/使用标签？ 

我正在使用 Html 5。这是我的代码。[http://jsfiddle.net/CfPnj/](http://jsfiddle.net/CfPnj/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T09:19:13.323

在 HTML5 中，您可以将块元素放入大小`<a>`元素中。请参阅[http://dev.w3.org/html5/markup/a.html#a-changes](http://dev.w3.org/html5/markup/a.html#a-changes)
这是 HTML5 中的新功能。在任何其他版本的 HTML 中，它都是非法的。

更新（稍后添加，当我更好地理解 HTML5 时）

这是因为`<a>`的内容模型从内联更改为透明。换句话说，现在可以放入 an`<a>`的内容与您可以放入`<a>`的父级的内容相同。这里问题的实际答案是“这取决于”。
例如，

```
<div><a><ul><li></ul></a></div> 
```

是完全有效的 HTML5，而

```
<span><a><ul><li></ul></a></span> 
```

不是（因为`span`是内联元素）。
希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T09:13:51.433

`<ul>`是一个块元素标签，并且`<a>`是一个内联元素标签 - 块元素标签不应该**进入**内联元素标签，只能反过来（或其他内联元素标签内的内联元素标签）......

从这里开始，然后用谷歌搜索更多信息：http: [//line25.com/articles/10-html-tag-crimes-you-really-shouldnt-commit](http://line25.com/articles/10-html-tag-crimes-you-really-shouldnt-commit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T09:13:22.707

一般来说，内联元素只允许其他内联元素作为子元素。如果您检查[HTML 4.01 Doctype Definition](http://www.w3.org/TR/html4/sgml/loosedtd.html)，您会发现标签确实是这种情况`<a>`（第 342 行）。您的 IDE 将`<ul>`标签内的`<a>`标签标记为无效是正确的，尽管大多数浏览器仍然会“做正确的事”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T09:22:35.200

你是否试图做这样的事情：

```
<a href="google.com">
    <ul>
        <li>Google.com</li>
        <li>Gmail.com</li>
    </ul>
</a>​ 
```

根据 HTML 规则，它在语法上是正确的，因为 HTML 不显示任何`error`内容，因此它会像*`bug`*在您的 Dreamweaver 中一样显示。

它会播种这样的东西：

[- Google.com
- Gmail.com](http://google.com)

但两个链接的位置相同*google.com*。

我以为你正在尝试做这样的事情：

```
<ul>
    <li><a href="google.com">Google.com</a></li>
    <li><a href="stackoverflow.com">stackoverflow.com</a></li>
</ul> 
```

它将呈现为：

*   [谷歌网站](http://google.com)
*   [stackoverflow.com](http://stackoverflow.com)

那是没有任何错误..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T09:18:50.040

根据[http://validator.w3.org](http://validator.w3.org)这在 HTML5 中有效

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>title</title>
  </head>
  <body>
     <a href="#"><ul><li>foo</li></ul></a>
  </body>
</html> 
```

但不在 HTML4.1 中（严格）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
  "http://www.w3.org/TR/html4/strict.dtd">
  <html lang="en">
    <head>
      <title>title</title>
    </head>
    <body>
      <p>
        <a href="#"><ul><li>foo</li></ul></a>
      </p>
   </body>
  </html> 
```

但这样做在语义上（对我来说）感觉不对:-)

查看规范 a`<ul>` [是允许的，](http://www.w3.org/TR/2011/WD-html5-20110525/grouping-content.html#the-ul-element) *其中预期流内容*并被`<a>` [归类](http://www.w3.org/TR/2011/WD-html5-20110525/content-models.html#flow-content)为*流内容*。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T09:07:23.450

您不必将代码放在锚链接中，因为当您单击链接时，您将被重定向到锚的顶部，因此您不需要将所有代码都写在`<a>`

# java - 客户端服务器，设计协议

> ID：10945913
> 
> 赞同：0
> 
> 时间：2012-06-08T09:04:15.020
> 
> 标签：java, jaxb, client-server, unmarshalling

我在套接字上编写客户端-服务器应用程序，我的任务是设计自己的协议。客户端和服务器使用 xml 进行通信。我使用 JAXB 库。客户端完美地将 XML 写入输出流。但我无法在服务器中读取它。你能展示如何正确接收来自客户端的数据吗？

这是一个`Client`：

```
public class Client {
    public static final String SERVER_HOST = "localhost";
    public static final Integer SERVER_PORT = 4444;
    public static final Logger LOG = Logger.getLogger(Client.class);

    public static void main(String[] args) throws IOException {

        System.out.println("Welcome to Client side");
        XMLProtocol protocol = new XMLProtocol();
        Socket fromserver = null;

        fromserver = new Socket(SERVER_HOST, SERVER_PORT);

        BufferedReader in = new BufferedReader(new InputStreamReader(fromserver.getInputStream()));

        PrintWriter out = new PrintWriter(fromserver.getOutputStream(), true);

        BufferedReader inu = new BufferedReader(new InputStreamReader(System.in));

        String fuser, fserver;

        while ((fuser = inu.readLine()) != null) {

            protocol.setComId((long) 0);
            protocol.setContent("Client content");
            protocol.setLogin("User");

            try {

                JAXBContext jaxbContext = JAXBContext.newInstance(XMLProtocol.class);
                Marshaller jaxbMarshaller = jaxbContext.createMarshaller();
                jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
                jaxbMarshaller.marshal(protocol, out);

            } catch (JAXBException e) {
                LOG.error("Error while processing protocol"+e);             
            }

            fserver = in.readLine();

            System.out.println(fserver);

            if (fuser.equalsIgnoreCase("close"))
                break;
            if (fuser.equalsIgnoreCase("exit"))
                break;
        }

        out.close();
        in.close();
        inu.close();
        fromserver.close();
    }

} 
```

和服务器：

```
package dataart.practice.server;

import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

import org.apache.log4j.Logger;

public class Server {

    public static final Logger LOG = Logger.getLogger(Server.class);
    public static final String SERVER_HOST = "localhost";
    public static final Integer SERVER_PORT = 4444;
    public static Integer userCount = 0;

    public static void main(String[] args) throws IOException {

        LOG.trace("Server started");
        ServerSocket s = new ServerSocket(SERVER_PORT);

        try {
            while (true) {
                LOG.trace("Waiting for connections...");
                Socket socket = s.accept();

                try {
                    new ServerThread(socket);
                    LOG.trace("Users in the chat: "+(userCount+1));
                    userCount++;

                } catch (IOException e) {
                    socket.close();
                }
            }
        } finally {
            s.close();
        }
    }
} 
```

还有我的线。

```
public class ServerThread extends Thread {
    private static final Logger LOG = Logger.getLogger(ServerThread.class);
    private Socket socket;
    private BufferedReader in;
    private PrintWriter out;
    private String buffer;
        public ServerThread(Socket s) throws IOException {
        socket = s;
        in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);
        start();
    }

    public void run() {
        try {
            while (true) {

            //  if ((buffer = in.readLine()).endsWith("</xmlProtocol>")) {
                    JAXBContext jaxbContext = JAXBContext.newInstance(XMLProtocol.class);
                    Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
                    sXMLProtocol protocol = (XMLProtocol) jaxbUnmarshaller.unmarshal(in);
                    LOG.trace("Getting message from user" + protocol.getContent());
                }
                LOG.trace("Nop");
            }
        } catch (JAXBException e) {
            e.printStackTrace();
        } catch (IOException e) {

            e.printStackTrace();
        } finally {
            try {
                socket.close();
                LOG.trace("Socket closed");
            } catch (IOException e) {
                LOG.error("Socket no closed" + e);
            }
        }
    }
} 
```

我应该在服务器上写什么来解析我得到的 XML？我尝试解析 InputStream。

**`Edit my question:`**现在它向我显示异常。我改变马歇尔参数。

> DefaultValidationEventHandler：[FATAL_ERROR]：元素类型“xmlProtent”必须后跟属性规范“>”或“/>”。位置：第 2 行 javax.xml.bind.UnmarshalException：prolog 中不允许内容。- 带有链接异常：[org.xml.sax.SAXParseException; 行号：1；列号：1；序言中不允许内容。] DefaultValidationEventHandler：[FATAL_ERROR]：序言中不允许内容。位置：com.sun.xml.bind.v2.runtime.ErrorHandlerAdaptor.propagateEvent(ErrorHandlerAdaptor.java:82) com.sun.xml.bind.v2.runtime.SAXUnmarshallerHandlerImpl.handleEvent(SAXUnmarshallerHandlerImpl.java:870) 的第 1 行在 com.sun.xml.bind.v2.runtime.ErrorHandlerAdaptor.fatalError(ErrorHandlerAdaptor.java: AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:214) at dataart.practice.server.ServerThread.run(ServerThread.java:41) 引起：org.xml.sax.SAXParseException; 行号：1；列号：1；序言中不能有内容。在 com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198) 在 com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:177) ... 16 更多 javax.xml.bind.UnmarshalException：元素类型“xmlProtent”必须后跟属性规范“>”或“/>”。- 带有链接异常：[org.xml.sax.SAXParseException; 行号：2；列号：12；元素类型“xmlProtent” 160) 在 javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:214) 在 dataart.practice.server.ServerThread.run (ServerThread.java:41) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread。 run(Thread.java:722) 引起：org.xml.sax.SAXParseException; 行号：2；列号：12；元素类型“xmlProtent”必须后跟属性规范“>”或“/>”。在 com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:10:51.337

你试过调试线路吗

```
 (buffer = in.readLine()).endsWith("</xmlProtocol>") 
```

也许它的结果是错误的

# c# - Assembly.GetExportedTypes throws 异常方法没有实现

> ID：10945923
> 
> 赞同：1
> 
> 时间：2012-06-08T09:04:46.413
> 
> 标签：c#, reflection, .net-assembly

我正在实现具有以下定义的接口

```
public interface Math
{

 int Calculate(int a, int b)
}

public class MathImpl : Math
{
  public int Calculate(int a, int b){ return a + b; }
} 
```

这是代码是程序集的一部分，可以正确构建

当我调用`Assembly.GetExportedTypes()`它时抛出异常方法没有实现。

```
Assembly assembly = Assembly.LoadFrom(filePath);
assembly.GetExportedTypes(); 
```

如果我将方法实现更改为

```
int Math.Calculate( int a, int b){ return a + b; } 
```

它工作正常。

在第一种情况下引发错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:18:23.597

从[GetExportedTypes](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getexportedtypes.aspx)的帮助：

> 获取在此程序集中定义且在程序集外可见的**公共类型。**

您的界面（导致这里出现问题）和您的课程都不是公开的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:20:43.310

Interfaces 的默认访问说明符为 Public，但您的类默认为 internal。所以当你说

```
int Math.Calculate( int a, int b){ return a + b; } 
```

它正在工作，因为您有公共接口。如果你为你的内部类实现它，它将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:57:39.483

我不能确切地说发生了什么，但我很确定问题与[加载上下文](http://blogs.msdn.com/b/suzcook/archive/2003/05/29/57143.aspx)有关。

# c# - 从 Blob 存储读取 PDF 并将其转换为文本

> ID：10945927
> 
> 赞同：2
> 
> 时间：2012-06-08T09:04:57.470
> 
> 标签：c#, pdf

我从 azure blob 存储读取 PDf 文件并将其转换为文本格式时遇到问题。C#.net 中是否有任何方法可以读取 PDf 文件。或任何可用的 3ed 方免费 dll。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:09:50.753

对于 pdf 阅读和操作[Itextsharp](http://sourceforge.net/projects/itextsharp/) libraby 很好。

要从 pdf 中提取文本，请参阅[此](http://www.codeproject.com/Articles/14170/Extract-Text-from-PDF-in-C-100-NET)

# xml - 使用 sax 解析 xml 文件，其中包含隐藏的换行符

> ID：10945929
> 
> 赞同：2
> 
> 时间：2012-06-08T09:05:09.907
> 
> 标签：xml, saxparser, remote-server

我正在使用 sax 从远程服务器解析 xml 文件，问题是 xml 文件有一些标签内容隐藏换行符，所以我不能解析它来获取数据。

```
<description>
ĐB: 09481 1: 72335 2: 23703 3: 02861 - 52441 4: 47646 - 88373 - 55927 - 07223 - 26879 - 60261 - 30624 5: 0484 6: 1980 - 6883 - 6140 7: 0028: 11
</description> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:21:50.210

我不确定，在这种情况下“隐藏换行符”是什么意思。但是请注意，SAX 不保证一次性生成数据元素的全部内容（例如，对于大数据元素，或跨越 64 kByte 边界的数据元素），因此在任何情况下都必须进行一些后处理以将零件粘合在一起。在这里很容易过滤掉任何不需要的字符。

# iphone - 在 Objective-C 中显示特殊字符的问题

> ID：10945940
> 
> 赞同：0
> 
> 时间：2012-06-08T09:05:55.007
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我希望我的 UILabel 显示来自 SQLite 数据库的文本。但它不能识别换行符“\n”——它只是像“Hello \n World”一样在屏幕上打印它。

这就是我从数据库中获取文本值的方式：

```
...
NSString *aDescription = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 3)];
myLabel.text = aDescription
... 
```

有什么建议么？

**UPD**：这个问题不是如何在 UILabel 中显示多行。它是如何在 SQLite 中存储和稍后编码换行符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:37:31.043

似乎您保存`\n`而不是换行符。

如果您使用 SQLite 编辑器，您可能希望使用换行符从 textedit 复制文本。

如果你不能在输入端解决它，你应该这样做，那么你需要`\n`用换行符替换文字：

```
NSString *aDescription = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 3)];
myLabel.text = [aDescription stringByReplacingOccurrencesOfString:@"\\n" withString:@"\n"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:14:06.270

默认情况下，UILabel 不允许换行。如果您希望换行符有效，则必须将标签的行号设置为相当大的数字（并扩展其`frame`属性）：

```
label.numberOfLines = 5; 
```

或者，正如马蒂亚斯建议的那样：

```
label.numberOfLines = 0; 
```

允许标签根据需要显示尽可能多的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:14:44.567

你的标签高度不够2行打印数据，增加高度，也增加行数 lbl.numberOfLines = 2;

# firefox - Mozilla Marketplace 是否允许提交打包的应用程序？

> ID：10945942
> 
> 赞同：1
> 
> 时间：2012-06-08T09:06:13.060
> 
> 标签：firefox, google-chrome, web-applications, firefox-os

我想向 Mozilla Marketplace 提交一个应用程序。我还没有发布该应用程序，它是一个*打包的应用程序*，符合[Chrome Web Store 的定义](https://developers.google.com/chrome/apps/docs/developers_guide)。

我尝试向[Mozilla Marketplace 提交应用程序](https://marketplace.mozilla.org/it/developers/submit/app/manifest)，但它似乎不支持打包应用程序。我需要它，因为我不想在网站上发布我的应用程序。

有人知道 Mozilla 市场（已经）是否允许打包应用程序提交？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T04:36:54.037

Mozilla Marketplace 将来会添加打包的应用程序功能。我认为我们采用这种方式的最好理由是在这个 wiki 页面中： [https ://wiki.mozilla.org/Apps/PackagingProposal](https://wiki.mozilla.org/Apps/PackagingProposal)

打包的应用程序将：

*   成为资产的压缩文件夹
*   在其根部有一个清单
*   be signed by Mozilla Marketplace once it is reviewed and approved

MDN also has some documentation on packaged apps: [https://developer.mozilla.org/en-US/docs/Apps/Packaged_apps](https://developer.mozilla.org/en-US/docs/Apps/Packaged_apps)

If you want your app to be used on the upcoming Firefox OS phone and have access to various sensitive web APIs (like the camera, or SMS, etc) you'll need to plan on using a packaged app.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T12:17:51.177

**注意**：此答案已过时。有关更多当前信息，请参阅 robhudson 的答案。

不，Mozilla 的 Open Web Apps 概念建立在现有的 Web 标准之上，其目标是在浏览器中广泛采用 - 这意味着 Web 应用程序必须保留在 Web 服务器上，即使它可能在[没有 Internet 连接的情况下也可以使用](https://developer.mozilla.org/en/Apps/Using_apps_offline)。不在网络上某处的“网络应用程序”似乎并不真正符合这个概念，并且必然会使用专有概念（如 Chrome 的`chrome-extension://`协议）。

如果您的目标是仅 Firefox 相当于 Chrome 的打包应用程序，那么构建一个常规扩展程序将是可行的方法。例如，使用[Add-on SDK](https://addons.mozilla.org/en-US/developers/builder)，您可以将 Web 应用程序的文件添加到`data/`目录中，并在单击[图标](https://addons.mozilla.org/en-US/developers/docs/sdk/1.6/packages/addon-kit/widget.html)时[在新选项卡中打开它们](https://addons.mozilla.org/en-US/developers/docs/sdk/1.6/packages/addon-kit/tabs.html#open%28options%29)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T22:18:28.127

好吧，它很快就会与 Firefox OS 一起推出，所以我认为最终我们会在桌面上看到同样的事情发生。

如果你足够好奇，可以看看最近的 Mozilla 会议记录：[https ://wiki.mozilla.org/Apps/StatusMeetings/Engineering/2012-08-08#state_of_packaged_apps](https://wiki.mozilla.org/Apps/StatusMeetings/Engineering/2012-08-08#state_of_packaged_apps)

此外，虽然 Chrome 可能会使用专有方式来提供平台访问权限，但希望这将是迈向标准化的第一步，Mozilla 的实施工作将大大增加。

# android - 在 libgdx 中使用大纹理区域时帧速率低

> ID：10945943
> 
> 赞同：0
> 
> 时间：2012-06-08T09:06:17.843
> 
> 标签：android, textures, libgdx

这就是我所做的：

1.  用 min 创建 textureAtlas。过滤器 = 最近和 mag。过滤器 = 最近。
2.  从 textureAtlas.findRegion() 获取一个 TextureRegion。
3.  使用 SpriteBatch 将其绘制到屏幕上。这很简单，但是当我绘制一个大区域（在我的情况下为 480x320）时，帧速率会大大降低！

绘制 1-30 个区域通常是 30 fps，但只有 1 个大的 480x320 区域只有 20 fps！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T16:19:32.290

你是在模拟器上运行的吗？模拟器永远不是应用程序实际性能的指标。在真机上测试。

话虽这么说：在常见的 Android 设备上，您可以填充屏幕大约 1.6-2 次。这个数字当然只是一个大概的数字，并且受以下因素的影响，例如是否启用混合（如果启用则更糟）、过滤（接近、线性，需要更多的处理能力）、纹理的颜色深度（16 位RGB，32位RGBA，越高需要的带宽越多）。

虽然不是您的问题的一部分，但您也应该尽可能避免切换纹理。例如，这将是一个反模式：

```
batch.begin();
batch.draw(tex1, 0, 0);
batch.draw(tex2, 10, 30);
batch.draw(tex1, 40, 20);
....
batch.end(); 
```

这可以通过对相同纹理的绘制进行分组或使用纹理图集来解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T10:04:29.190

如果您还没有阅读它，那么您可能会发现[这篇文章](http://www.badlogicgames.com/wordpress/?p=1403)很有用。它描述了绘制大纹理时的性能特征。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T12:27:41.450

据我所知，在绘制许多区域时，一部分绘制命令会发送到 GPU 进行渲染，而您仍在向 spritebatch 添加新的绘制命令。
当达到批处理的大小、绑定新纹理或调用 flush() 时，会发生这种情况。
如果我对文档的理解正确，这样 cpu 和 gpu 就不必互相等待很长时间，并且可以获得性能提升。
但是，如果每帧只有一个大区域的绘制命令，则 spritebatch 无法将命令部分发送到 gpu，因为......嗯......只有一个^^

如果你真的只想画一个精灵，你可以把它分成几个区域......（正如你所说，你有 10fps 以上）
但我想一旦你必须绘制更多的精灵，除了大的，会有无需拆分它。

# windows-phone-7 - WP7-ListBox：我应该使用 Tap 还是 SelectionChanged？

> ID：10945949
> 
> 赞同：4
> 
> 时间：2012-06-08T09:06:35.403
> 
> 标签：windows-phone-7, listbox

我正在创建一个带有包含 ListBox 的 PhoneApplicationPage 的 WP7 应用程序。
当用户在 ListBox 中选择一个项目时，将打开另一个页面。

现在我有点困惑：我应该使用哪个 ListBox 事件处理程序来检测选择，Tap 还是 SelectionChanged？在 Tap 的情况下如何获得被点击的项目？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T09:19:29.853

我建议您使用该`SelectionChanged`事件，如果单击某个项目，它将始终以正确的方式注册。

使用该`SelectionChanged`事件的一个好处是您将获得包含有用信息的[SelectionChangedEventArgs 。](http://msdn.microsoft.com/en-us/library/system.windows.controls.selectionchangedeventargs.aspx)

然而，一件重要的事情是当一个项目被点击时将选定的索引重置为 -1，否则当用户返回页面时，该项目仍然被选中并且该项目将不可点击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T22:46:29.667

只是为了添加其他答案，您还必须在您的 SelectionChanged 事件中进行空检查，因为当您选择索引 = -1 时，它也会触发 SelectionChanged 事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T21:10:22.790

SelectionChanged 事件存在一个问题。如果您选择了一个项目并被发送到一个新页面并再次返回，您将无法再次选择同一项目，因为它仅在选择更改时才有效:)。要时刻铭记在心

# javascript - 用户在文本框中输入时如何在图像上显示文本？

> ID：10945952
> 
> 赞同：1
> 
> 时间：2012-06-08T09:06:41.963
> 
> 标签：javascript, image

下面是示例： [http ://www.potterybarn.com/products/saddle-stitch-leather-luggage-tag/?catalogId=69&cm_src=AutoRel](http://www.potterybarn.com/products/saddle-stitch-leather-luggage-tag/?catalogId=69&cm_src=AutoRel)

当用户在“查看您的个性化在此项目上的外观”中键入一些文本时。指定文本：' 并按下预览，然后该文本将出现在具有某种特定字体样式的图像上。所以问题是如何做到这一点？这是 JavaScript 吗？如果是的话，我应该从哪里得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:21:47.363

然后从中汲取灵感

```
<html>
<head>
<script>
function preview()
{
document.getElementById("txt").innerHTML=document.getElementById("person").value;
}</script></head>
<body>
<div style="position:relative;">
<img src="whatever"><span id="txt" style="font:20px Tahoma;position:absolute;top:0px;left:0px;"></span>
</div>
<label for="person">See how your personalization would look on this item. Specify text:</label><input type="text" id="person" >
<button onclick="preview()">Preview</button></body></html> 
```

# rdf - RDFS 子类：属性重定义

> ID：10945953
> 
> 赞同：1
> 
> 时间：2012-06-08T09:06:45.580
> 
> 标签：rdf, modeling, rdfs

玩具示例：

* * *

考虑以下类型：

*   `Hamburger, Veggieburger, Component, Vegetable, Meat`

在哪里

*   `Veggieburger`是`subclass_of` `Hamburger`
*   `Vegetable`并且`meat`是`Component`

考虑以下属性：

*   `Has_component`: 域 = `Hamburger`, 范围 =`Component`

* * *

现在，我想重新定义`Has_component`并`Veggieburger`指出它只能包含蔬菜`Components`。

有没有办法重新定义（即覆盖）属性`Has_component`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:10:28.930

如果您只愿意使用 RDFS，那么我可能会建议以下内容：

```
@prefix menu: <http://yourdomain/menu#>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.

menu:Burger rdf:type rdfs:Class.

menu:Veggieburger rdf:type rdfs:Class;
                  rdfs:subClassOf menu:Burger.

menu:Hamburger rdf:type rdfs:Class;
               rdfs:subClassOf menu:Burger.

menu:Component rdf:type rdfs:Class.

menu:VeggieComponent rdf:type rdfs:Class;
                     rdfs:subClassOf menu:Component.

menu:MeatComponent rdf:type rdfs:Class;
                   rdfs:subClassOf menu:Component.

#use camel casing for property names
menu:hasComponent rdf:type rdf:Property;
                  rdfs:domain menu:Burger;
                  rdfs:range menu:Component.

menu:hasMeatComponent rdf:type rdf:Property;
                  rdfs:subPropertyOf menu:hasComponent;
                  rdfs:domain menu:MeatBurger;
                  rdfs:range menu:MeatComponent.

menu:hasVeggieComponent rdf:type rdf:Property;
                  rdfs:domain menu:VeggieBurger;
                  rdfs:subPropertyOf menu:hasComponent;
                  rdfs:range menu:VeggieComponent. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T12:45:26.333

您可以在 RDFS 中添加另一对域/范围公理，推理器会将实际范围解释为两个类 Component 和 VeggieComponent 的交集，在这种情况下是可以的。在某些情况下，这是不可取的，所以请记住这一点。

您也可以使用 OWL 和限制来获得您想要的东西，ala

VeggieBurger subClassOf some(HasComponent, VeggieComponent)

# c# - 错误：已建立的连接被主机中的软件中止

> ID：10945954
> 
> 赞同：1
> 
> 时间：2012-06-08T09:06:47.330
> 
> 标签：c#, .net, sockets

我正忙着用 C# 编写一个 .NET 数据提供程序，作为我们的 Java JDBC 驱动程序的 .NET 对应物。此驱动程序必须使用 XDR（旧编组协议）通过 TCP/IP 连接到我们的 RulesService。JDBC 驱动程序工作正常，但 C# 的第一个原型给了我错误“已建立的连接被主机中的软件中止”。

我花了 2 天时间才找到解决方案：使用`System.IO.BufferedStream`！

例如：

```
socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

socket.SendTimeout = timeout;
socket.ReceiveTimeout = timeout;

socket.SendBufferSize = 1048510;
socket.ReceiveBufferSize = 1048510;

socket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.KeepAlive, true);
socket.NoDelay = true;

socket.Connect(host, port);

this.datastream = new **BufferedStream**((Stream)new NetworkStream(socket), 1048510); 
```

希望这篇文章可以帮助人们不要花 2 天时间寻找解决方案 :-)

# jquery - 使用悬停类

> ID：10945958
> 
> 赞同：0
> 
> 时间：2012-06-08T09:07:06.387
> 
> 标签：jquery

使用 css 的悬停类。

我有一个名为“show”的标签，我有一个按钮。所以基本上我想在我将鼠标悬停在标签上时更改按钮的背景（想要相同的悬停颜色），即我想使用 css 中已经存在的 btn:hover {} 类。

```
show - > on hover -> addClass - > btn:hover {} to (btn)  

$('.addingAction').hover(function() {
        $('.btnRBlk').css({
            //use hover class

        }};                 
        },function() {

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:12:07.100

您可以使用纯 CSS（没有 jQuery）来做到这一点，但您需要发布您的 HTML。

然而，事实上，最简单的方法是在你的 CSS 中添加一个类名：

```
btn:hover, .hovered {
    /* Styles */
} 
```

然后使用 jQuery[`addClass`](http://api.jquery.com/addClass/)和[`removeClass`](http://api.jquery.com/removeClass/)方法：

```
$('.addingAction').hover(function() {
    $('.btnRBlk').addClass("hovered");
}, function() {
    $('.btnRBlk').removeClass("hovered");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:12:58.593

尝试这样做：

```
$(".addinAction").hover(function(){
    $(".btnRBlk").trigger("mouseenter");
},function(){
    $(".btnRBlk").trigger("mouseleave");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:14:41.623

你的jQuery代码有错误

```
 $('.addingAction').hover(function() {
            $('.btnRBlk').css({
                //use hover class

            });//this was errorneaous                 
            },function() {

    }); 
```

# php - 错误处理函数停止错误记录

> ID：10945960
> 
> 赞同：1
> 
> 时间：2012-06-08T09:07:13.070
> 
> 标签：php, error-handling

我在脚本的前几行中有这个简单的代码，它在记录错误方面非常有效，直到我添加了错误处理函数。我的错误处理功能做得很好，我没有发现任何问题，期待这一点。

```
ini_set("log_errors" , "1");
ini_set("error_log" , $_SERVER['DOCUMENT_ROOT']."/logs/Errors.log.txt"); 
```

这个东西是 php 的默认工作，一旦您开始错误处理，错误记录就会停止？

如果是，我该如何克服？

我的错误处理函数可能会有所帮助。

```
function userErrorHandler($errno, $errstr, $errfile = '', $errline = 0, $errcontext = array())
{
    // Check if the error code is not included in error_reporting
    if (!(error_reporting() & $errno))
    {
        return;
    }

    // Restore default handlers to prevent errors in errors
    restore_error_handler();
    if (function_exists('restore_exception_handler'))
    {
        restore_exception_handler();
    }

    // Load error page
    require('_errors/error.php');
    exit();
}
set_error_handler('userErrorHandler'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:11:37.783

当您开始使用`set_error_handler()`时，内置的错误处理将不会发生，解析错误可能除外（但仅当`error_log`是在您的 PHP 脚本本身之外定义时，例如`.htaccess`）。

PHP 所做的默认错误回显也是如此。

**更新**

前一个错误处理程序是内置错误处理程序时的返回值，因此无法使用您自己的函数收到的参数调用`set_error_handler()`它。`NULL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:31:08.690

好的。所以它会覆盖默认处理程序并且错误记录停止，他们也无法克服这一点。但是这里还可以做一些其他的事情，并产生与预期相同的输出。

```
function userErrorHandler($errno, $errstr, $errfile = '', $errline = 0, $errcontext = array())
{
    // Getting error type
    $errorType = array (
            E_ERROR            => 'ERROR',
            E_WARNING        => 'WARNING',
            E_PARSE          => 'PARSING ERROR',
            E_NOTICE         => 'NOTICE',
            E_CORE_ERROR     => 'CORE ERROR',
            E_CORE_WARNING   => 'CORE WARNING',
            E_COMPILE_ERROR  => 'COMPILE ERROR',
            E_COMPILE_WARNING => 'COMPILE WARNING',
            E_USER_ERROR     => 'USER ERROR',
            E_USER_WARNING   => 'USER WARNING',
            E_USER_NOTICE    => 'USER NOTICE',
            E_STRICT         => 'STRICT NOTICE',
            E_RECOVERABLE_ERROR  => 'RECOVERABLE ERROR'
            );

    if (array_key_exists($errno, $errorType)) {
        $err = $errorType[$errno];
    } else {
        $err = 'CAUGHT EXCEPTION';
    }

    // Logging error to a certain file
    $file           = ini_get('error_log');
    $error_string   = "[" . date("d-M-Y H:i:s", $_SERVER['REQUEST_TIME']) . '] PHP ' . $err . '::' . $errstr . " in " . $_SERVER['SCRIPT_FILENAME'] . " on line " . $errline . "\r\n";
    error_log($error_string, 3, $file);

    // Check if the error code is not included in error_reporting
    if (!(error_reporting() & $errno))
    {
        return;
    }

    // Restore default handlers to prevent errors in errors
    restore_error_handler();
    if (function_exists('restore_exception_handler'))
    {
        restore_exception_handler();
    }

    // Load error page
    require('_errors/error.php');
    exit();
}
set_error_handler('userErrorHandler'); 
```

我想做的一样:)

在这里阅读完整的工作：http: [//blog.abhishekg.com/2012/06/error-handling-in-php-with-error-logger-working/](http://blog.abhishekg.com/2012/06/error-handling-in-php-with-error-logger-working/)

# c# - ssl 或 https 在这种情况下最有用的是什么

> ID：10945961
> 
> 赞同：0
> 
> 时间：2012-06-08T09:07:20.457
> 
> 标签：c#, ssl, openssl

想要一个只发送和接收小 JSON 字符串的 ssl C# 服务器。

客户端可以是来自移动设备或计算机的任何东西。

需要一些反馈来选择什么，因为某些客户端可能有 ssl 限制或其他限制。

我应该创建一个（openssl）ssl ftp 套接字服务器吗？
我应该创建一个 HTTPS 服务器吗？
我应该创造别的东西吗？？？？

HTTPS 看起来最简单，因为它的历史和宽度使用很长。

任何反馈都会很感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:40:13.883

给WCF一个机会。

它具有非常强大的可定制堆栈，具有可外部化的配置文件，适用于服务器端和客户端。

此外，它可以通过多条线路发布服务。这可以帮助您解决大多数情况，例如“简单”的 https 加密到证书验证。

您甚至可以为超特定的上下文定义自己的频道。

从开发人员的角度来看最后一句话：WCF 的想法是将服务与其连接性分离。在当今世界，这是一个巨大的优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:48:53.843

HTTPS 是[基于 SSL/TLS 的 HTTP](https://www.rfc-editor.org/rfc/rfc2818)：您首先建立一个 SSL/TLS 连接，然后在其之上交换 HTTP 请求和响应（就好像它是一个普通的 TCP 连接一样）。

由于您想在这两种情况下都使用 SSL/TLS，您似乎要问的是您应该设计自己的协议还是使用现有的协议。

> 我应该创建一个（openssl）ssl ftp 套接字服务器吗？

有多种使用 SSL/TLS 保护 FTP 的方法。这当然不是最简单的方法。

> 我应该创建一个 HTTPS 服务器吗？我应该创造别的东西吗？？？？

设计您自己的协议意味着您必须自己为每个设备提供一个实现。HTTPS 的优点是被广泛支持。您甚至不必自己使用很多底层 SSL/TLS API（无需学习 OpenSSL API）。唯一的要求可能是了解一些 SSL/TLS 配置，例如设置证书。

即使您正在考虑减少由于 HTTP 标头造成的开销，您的协议仍然必须以一种或另一种方式执行类似的有效负载管理，至少要知道请求和响应的开始和结束位置。

目前尚不清楚您的要求是什么，但除非您真的注意到 HTTPS 的问题，否则使用 HTTPS 与现有库（例如 WCF）交换 JSON 字符串比您的其他建议更有意义。

# php - 使用 Zend Framework 2 安全吗？

> ID：10945965
> 
> 赞同：1
> 
> 时间：2012-06-08T09:07:53.620
> 
> 标签：php, zend-framework2

我尝试搜索但找不到 Zend Framework 2 正式发布的预期日期。

将它用于将于 8 月上线的项目是否安全？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T09:33:46.550

如上所述，这取决于您如何定义“安全”以及您的项目类型。

但是，如果您的项目要部署到生产环境中，那么对我来说它看起来不太安全。根据最新的 beta[版本说明](http://framework.zend.com/zf2/blog/entry/Zend-Framework-2-0-0beta4-Released)：

> beta 发布周期遵循 beta 的“gmail”风格，每个新版本都会添加新功能，不保证 BC（向后兼容性）

所以，如果你还想试一试，你至少有一些选择：

*   等到候选发布流程开始，（根据 RN，在 6 月底）。
*   如果 API 在下一个测试版中发生更改，请准备好重写部分应用程序。
*   坚持使用测试版而不升级它（在我看来，这不是最好的主意）。

希望有帮助，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T09:12:39.180

ZF 2.0 是一个非常好的工具，但您如何定义安全？ZF2 没有很好的文档记录，也没有正式发布，这意味着如果您使用 ZF1.11.11 或 Symphony2，您将无法获得支持

您想使用 ZF2 是否有特定原因？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T09:15:13.760

Zend Framework 2 仍处于开发/测试阶段。这意味着他们仍在添加/更改 API。我个人永远不会出于开发目的而购买测试版。但我宁愿说探索功能/更新只是为了了解将来我准备好用于开发目的时盒子里可能会有什么。

# ruby-on-rails - 在 ruby on rails 应用程序中使用 application.html.erb 以外的布局？

> ID：10945967
> 
> 赞同：2
> 
> 时间：2012-06-08T09:08:05.193
> 
> 标签：ruby-on-rails, templates

如何在 RoR 应用程序中创建和使用新模板而不是 application.html.erb？我需要更改哪些设置才能拥有另一个模板？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T09:14:49.320

实际上，默认情况下，所有控制器都会在`/views/layouts`回退到`application.html.erb`. 例如，`UsersController`将搜索`users.html.erb`. 无论如何，要使用其他布局，请在控制器旁边添加：

```
class UsersController < ApplicationController
  layout 'custom'
end 
```

# sql-server-2005 - 将用户和密码添加到 Sql Server 数据库

> ID：10945968
> 
> 赞同：6
> 
> 时间：2012-06-08T09:08:06.753
> 
> 标签：sql-server-2005

我在 Web.Config 中定义的连接字符串当前表明不需要用户或密码：

```
<connectionStrings>
    <add name="CinemaxConnectionString" connectionString="Data Source=PCName\SQLEXPRESS;Initial Catalog=Cinemax;Integrated Security=True"
      providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

我想添加用户和密码，如下所示：

```
<connectionStrings>
    <add name="CinemaxConnectionString" connectionString="Data Source=PCName\SQLEXPRESS;Initial Catalog=Cinemax;User=cinemax; Password=abc"
      providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

显然，这需要更改**Sql Server 中的一些设置来添加用户和密码**。做这个的最好方式是什么？我指定我有 Sql Server 2005 Express 并且**当前的身份验证模式是 "Sql Server and Windows Authentication"**。预先感谢您的帮助。很高兴看到对此有双重看法：用户界面和代码解决方案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-08T09:26:55.870

以下陈述将为您完成这项工作。

```
CREATE LOGIN cinemax WITH PASSWORD = 'abc';

GO

CREATE USER cinemaxUser FOR LOGIN cinemax

GO

GRANT SELECT TO cinemaxUser

GO

GRANT INSERT TO cinemaxUser

GO

GRANT UPDATE TO cinemaxUser

GO

GRANT DELETE TO cinemaxUser

GO 
```

# android - 在android的webview中通过按钮单击html页面打开一个对话框

> ID：10945969
> 
> 赞同：1
> 
> 时间：2012-06-08T09:08:08.517
> 
> 标签：android, webview

我有一个查询要使用类似问题所说的内容。我正在通过我的 android 应用程序中的 WEBVIEW 显示一个 html 文件，该应用程序上有一个按钮。我无法弄清楚这个按钮的 onClick 事件。因为我想打开一个新对话框

任何帮助都会有所帮助 在此先感谢

# junit - JscrollBar isEnabled 总是返回true？

> ID：10945970
> 
> 赞同：0
> 
> 时间：2012-06-08T09:08:19.147
> 
> 标签：junit, scrollbar

我使用 jfcunit，我有以下代码：

```
if ((Component)event.getSource() instanceof JScrollPane) {
                    JScrollPane scrollPane= (JScrollPane) (Component)event.getSource();
                    JScrollBar scrollBar=(JScrollBar) scrollPane.getVerticalScrollBar();
                    if(!scrollBar.isVisible()||!scrollBar.isEnabled()){
                        return;
                    } 
```

它在鼠标滚轮事件上运行并获取它的源。问题是 scrollBar.isVisible() 工作正常，但 scrollBar.isEnabled() 总是返回 true，即使滚动条被禁用，我似乎也不知道为什么。

也许有一个属性我应该检查滚动窗格，或者我可能遗漏了一些东西。任何建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:30:27.853

我找到了解决方法：如果 visibleAmount 和最大数量相同，则表示滚动条被禁用：

```
 if(!scrollBar.isVisible()
||(scrollBar.getVisibleAmount()==scrollBar.getMaximum())){
                            return;
                        } 
```

# linq - 获取 lambda 表达式属性的字符串版本

> ID：10945972
> 
> 赞同：1
> 
> 时间：2012-06-08T09:08:26.970
> 
> 标签：linq, generics, c#-4.0, expression

**类似于问题[How can I get property name strings used in a Func of T](https://stackoverflow.com/questions/4726565/how-can-i-get-property-name-strings-used-in-a-func-of-t)。**

假设我有一个像这样存储在一个名为“getter”的变量中的 lambda 表达式

```
Expression<Func<Customer, string>> productNameSelector =
    customer => customer.Product.Name; 
```

**如何从中提取字符串“Product.Name”？**

我现在用

```
var expression = productNameSelector.ToString();
var token = expression.Substring(expression.IndexOf('.') + 1); 
```

但我想找到一种更可靠的方法;-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:02:01.580

您的表达式的表达式树如下所示：

```
 .
          / \
         .   Name
        / \
customer   Product 
```

如您所见，没有节点可以代表`Product.Name`. 但是您可以使用递归并自己构建字符串：

```
public static string GetPropertyPath(LambdaExpression expression)
{
    return GetPropertyPathInternal(expression.Body);
}

private static string GetPropertyPathInternal(Expression expression)
{
    // the node represents parameter of the expression; we're ignoring it
    if (expression.NodeType == ExpressionType.Parameter)
        return null;

    // the node is a member access; use recursion to get the left part
    // and then append the right part to it
    if (expression.NodeType == ExpressionType.MemberAccess)
    {
        var memberExpression = (MemberExpression)expression;

        string left = GetPropertyPathInternal(memberExpression.Expression);
        string right = memberExpression.Member.Name;

        if (left == null)
            return right;

        return string.Format("{0}.{1}", left, right);
    }

    throw new InvalidOperationException(
        string.Format("Unknown expression type {0}.", expression.NodeType));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:19:02.387

如果你有一个表达式，你可以使用 ToString 方法来提取字符串表示：

```
Expression<Func<Customer, string>> productNameSelector = 
    customer => customer.Product.Name;

var expression = productNameSelector.ToString();
var token = expression.Substring(expression.IndexOf('.') + 1); 
```

# ios - Zxing Barcode Scanner PhoneGap Plugin iOS横屏模式

> ID：10945976
> 
> 赞同：1
> 
> 时间：2012-06-08T09:08:41.340
> 
> 标签：ios, cordova, xcode4.3, zxing, barcode-scanner

[我已经使用来自https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner)的 PhoneGap 1.7.0 和 Zxing Barcode Scanner 在 ipad 中实现了 Zxing Barcode Scanner 。但方向只是纵向。我想通过修改此代码将其更改为横向

```
if ([previewLayer isOrientationSupported]) {
    [previewLayer setOrientation:AVCaptureVideoOrientationPortrait];
} 
```

还有这段代码

```
if (interfaceOrientation == UIInterfaceOrientationPortrait) return YES; 
```

在 CDVBarcodeScanner.mm 中，将 Portrait 的值更改为 LandscapeRight。我的问题是视频不是全屏，右边有黑色部分。此外，即使在横向模式下，只有纵向而不是横向时才能扫描条形码。

有什么解决方案可以使横向模式完美吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T09:40:57.917

删除这个

```
if (result.empty() && hints.getTryHarder() && image->isRotateSupported()) {} 
```

关于 zxing-all-in-one.cpp 文件

# performance - 有没有办法提高使用相同图像的图像控件的图像内存使用率？

> ID：10945981
> 
> 赞同：3
> 
> 时间：2012-06-08T09:09:22.027
> 
> 标签：performance, image, windows-phone-7, optimization, sprite-sheet

在一个 WP7 游戏中，我正在构建我的`Enemy`类被包裹在一个`EnemyControl`. 敌人控制使用`spritesheet`该敌人类型的所有不同动画状态中的一种。我静态缓存位图的只有 4 张图像。

我遇到的问题是，尽管图像都被缓存（`BitmapImage`静态和`CacheMode="BitmapCache"`），当控件加载图像时，它会为每个控件添加大约 2 兆的纹理/系统内存。

这是一个重大问题，因为它限制了我可以想象的在屏幕上拥有的敌人数量。

有谁知道如何改善这种情况？或以其他方式解决它？

如果有兴趣，这是xaml：

```
<Canvas x:Name="canEnemyControl">
    <Canvas.RenderTransform>
        <TranslateTransform x:Name="enemyControlTransform" X="0"/>
    </Canvas.RenderTransform>
    <Canvas.Clip>
        <RectangleGeometry x:Name="clipGeometry" Rect="0,0,60,60" />
    </Canvas.Clip>
    <Image x:Name="imgEnemy" Stretch="None" CacheMode="BitmapCache" >
        <Image.RenderTransform>
            <TranslateTransform x:Name="enemyImageTransform" X="0" Y="0" />
        </Image.RenderTransform>
    </Image>
</Canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:44:57.470

我认为您的实现不会扩展，因为我认为多个`Image`元素不知道共享同一个位图缓存。

## 解决方案：CompositionTarget.Rendering 和 WriteableBitmapEx

一种可能的解决方案是使用[CompositionTarget.Rendering](http://msdn.microsoft.com/en-us/library/ms748838.aspx)进行渲染，就像[我在此处的回答](https://stackoverflow.com/questions/10073433/playing-two-videos-simultaneously/10125496#10125496)中一样。这会在屏幕更新之前触发一个事件，以便您可以进行自己的绘图。我相信这就是 Krashlander 和其他一些 Silverlight 游戏的工作方式（尽管我认为他可能在以后的版本中切换到了 XNA）。

然后我认为您可以使用[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)使用源图像的一个实例将其绘制到缓冲区的多个位置。您应该更好地缩放，因为您的缓冲区大小与屏幕/视口一样大，并且每个图像都有一份副本。显示 1 个敌人和 1000 个敌人的内存要求应该相同。

* * *

我将添加一个免责声明，我没有尝试过这种确切的方法，但我确实`CompositionTarget.Rendering`在我的一个应用程序中使用了平滑的屏幕更新。

# c# - 满足条件时如何进入调试模式？

> ID：10945984
> 
> 赞同：5
> 
> 时间：2012-06-08T09:09:30.263
> 
> 标签：c#, visual-studio-2010, visual-studio, debugging, conditional-statements

有没有办法在满足特定条件时进入调试模式？

例如，假设我想在`i == 1`变为 true 的行上进入调试模式：

```
using System;

namespace ConditionalDebug
{
    public class Program
    {
        public static void Main(string[] args)
        {
            var r = new Random();
            var i = r.Next(2);
            i += r.Next(2);
            i += r.Next(2);
            i += r.Next(2);
            i += r.Next(2);
            i = 1;
            Console.WriteLine(i);
        }
    }
} 
```

我知道可以设置条件断点，例如：

![条件断点](../Images/cd6db118b1429f89d0352798f16ba6f4.png)

但是我当然不能使用它，因为我必须为代码中的每一行添加一个条件断点，条件值可能会改变，这在实际应用程序中会变得非常混乱。

那么，有没有办法全局设置条件`i == 1`，以便调试器在满足条件的行上中断？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:44:16.277

最简洁的答案是不'

长答案是'不是真的，但有点'。你可以做一些事情来接近你想要的行为。

*   您可以使用 Watch 窗口并手动单步执行代码并查看它的变化。
*   您可以找到变量上的所有引用，并隔离所有可以更改变量和放置断点的语句。
*   您可以执行上述操作，但使用包装函数（或使其成为属性）并仅通过该函数（或属性设置器）设置变量的值，然后您可以在其中设置条件断点来比较旧/新值。
*   您可以在每一行上设置一个断点，并立即为所有行设置条件。您可能可以通过编写 VS 插件或宏来自动执行此操作。
*   这超出了我的能力——但我确信可以做一些非常复杂和令人惊叹的事情，比如编写你自己的调试器并实现你的“每当 X 更改时中断”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:23:56.537

我会说不，如果您考虑一下，您是在要求调试器验证我在范围内的每一行代码，尽管我会看这个，看看是否有人能想到一个解决方法，因为这会很有趣：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T09:13:49.073

在 VS 的断点窗口中，可以选择多个断点，然后鼠标右键可以一步设置两个断点的特定条件。

这个可以吗？

# drupal-7 - 表单如何在 Drupal 中提交时调用自身

> ID：10945991
> 
> 赞同：0
> 
> 时间：2012-06-08T09:09:55.000
> 
> 标签：drupal-7

我正在创建一个自定义模块，我想用它来显示来自模块的表单。该表单查询数据库并显示一些信息。数据库连接正常，已成功检索数据。该表单也已成功显示，但我可以弄清楚如何将所有链接在一起以在提交表单时再次显示页面。我的代码是：

```
<?php 

function menu($may_cache) {

$items = array();

$items['admin/reporting/report_details'] = array(

  'title' => 'Report: User details by stores',

  'access arguments' => array('access content'),

  'page callback' => 'say_report_details',

  'type' => MENU_CALLBACK,

);  

return $items;
}

// This function should execute the logic if the $_GET variable is set

function say_report_details($values = array()) {

// The $_GET logic will be somtehing like this

//   if (count($_GET) > 0) 

// Get all the form values from the $_GET wit something like:

//   if (count($_GET) > 0) {

  //   $start = mktime(0, 0, 0, $_GET['from_month'], $_GET['from_day'],

 $_GET['from_year']);

  //   $end = mktime(23, 59, 59, $_GET['to_month'], $_GET['to_day'], $_GET['to_year']);

 if ($_GET['store'] > 0) {

  $form = drupal_get_form("report_details_form");

   $output = theme("report_page", $form, $output);

return $output;
 }

function report_details_form() {

 $form["search"] = array(

'#type' => 'fieldset',

'#title' => t('Search params'),

'#collapsible' => FALSE,

'#tree' => TRUE,

 );

   for ($i = 1; $i < 32; $i++) {

   $days_opt[$i] = $i;

                            }
  for ($i = 1; $i < 13; $i++) {

 $month_opt[$i] = $i;

  }

 for ($i = 2008; $i < date("Y") + 3; $i++) {

 $year_opt[$i] = $i;

  }

$form["search"]["from_day"] = array(

'#type' => 'select',

'#title' => 'Date from',

'#options' => $days_opt,

'#default_value' => (($_GET['from_day'] == "") ? date("d") : $_GET['from_day'])

);

$form["search"]["from_month"] = array(

'#type' => 'select',

'#title' => '&nbsp;',

'#options' => $month_opt,

'#default_value' => (($_GET['from_month'] == "") ? date("m") : $_GET['from_month'])

);

$form["search"]["from_year"] = array(

'#type' => 'select',

'#title' => '&nbsp;',

'#options' => $year_opt,

'#default_value' => (($_GET['from_year'] == "") ? date("Y") : $_GET['from_year'])

);

$form["search"]["to_day"] = array(

'#type' => 'select',

'#title' => 'Date to',

'#options' => $days_opt,

'#default_value' => (($_GET['to_day'] == "") ? date("d") : $_GET['to_day'])

);

$form["search"]["to_month"] = array(

'#type' => 'select',

'#title' => '&nbsp;',

'#options' => $month_opt,

'#default_value' => (($_GET['to_month'] == "") ? date("m") : $_GET['to_month'])

 );

$form["search"]["to_year"] = array(

'#type' => 'select',

'#title' => '&nbsp;',

'#options' => $year_opt,

'#default_value' => (($_GET['to_year'] == "") ? date("Y") : $_GET['to_year'])

 );

$result = db_query('SELECT taxonomy_term_data.name, taxonomy_term_data.tid FROM 

    taxonomy_term_data WHERE vid = 10');

  $strs = array("all" => "All");

  foreach ($result as $store) {

  $strs[$store->tid] = $store->name;

}

$form["search"]["store"] = array(

'#type' => 'select',

'#title' => 'Stores',

'#options' => $strs,

'#default_value' => $_GET['store']

);

 $form["submit"] = array("#type" => "submit", "#value" => "Show report");

  return $form;

 }

   function theme_report_page($form, $result = array()) {

  $output = '

<div id="report_form">

 '. $form .'

</div> 

 <div id="report_result">
 '. $result .'
 </div>
 ';

 return $output;

 }

  function theme_report_details_form($form) {

 unset($form['search']['from_day']['#title']);

 unset($form['search']['from_month']['#title']);

 unset($form['search']['from_year']['#title']);

unset($form['search']['to_day']['#title']);

unset($form['search']['to_month']['#title']);

unset($form['search']['to_year']['#title']);

unset($form['search']['store']['#title']);

  $output = "<fieldset>

  <legend>Search params</legend>

<div class='fieldtitles'>". t('Date From') .":</div>

". drupal_render($form['search']['from_day']) ."

". drupal_render($form['search']['from_month']) ."

". drupal_render($form['search']['from_year']) ."

<div class='clearing'>&nbsp;</div>

<div class='fieldtitles'>". t('Date To') .":</div>

". drupal_render($form['search']['to_day']) ."

". drupal_render($form['search']['to_month']) ."

". drupal_render($form['search']['to_year']) ."

<div class='clearing'>&nbsp;</div>

<div class='fieldtitles'>". t('Store') .":</div>

". drupal_render($form['search']['store']) ."

  <div class='clearing'>&nbsp;</div>

 ". drupal_render($form['submit']) ."

 </fieldset>";

 unset($form['search']);

  $output .= drupal_render($form);

 return $output;
 }

 function report_details_form_submit($form_id, $form_values) {

  $query = "";

// This next line is the one we are having an issue right now, as is trowing an 

     error due to $form_values is empty for some UNKNOWN reason...

  foreach ($form_values['search'] as $key => $value) {

 $query .= "&". $key ."=". $value;
 }

 return array('admin/reporting/report_details', $query);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T22:24:08.983

我没有看表单的所有细节，但是 D7 的提交函数应该是这样的：

```
function my_module_example_form_submit($form, &$form_state) {
  // do something
} 
```

我认为这应该可以解决问题。如果不查看此链接：[http ://api.drupal.org/api/drupal/includes%21form.inc/group/form_api/7](http://api.drupal.org/api/drupal/includes%21form.inc/group/form_api/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T01:16:08.267

请阅读并遵循 mikewink 提供的答案。

此外，在我创建的三个工作表单中，菜单项数组如下：

```
$items = array();
$items['admin/config/system/dataforms/SiteAccessform']=array(
    'title'=>'Site Access' //this should be watever the Title of your form is
    ,'description'=>'Configuration for the Data Forms module' //shows up by your menu item as it's description (where applicable)
    ,'page callback'=>'drupal_get_form' //this, as I understand it, is required for forms to work properly (& may be part of the cause of your problems)
    ,'page arguments'=>array('dataforms_main_form') //IMPORTANT this is the actual name of your function that will be executed to produce the form 
    ,'access arguments'=>array('administer settings for dataforms') //??
    ,'type'=>MENU_CALLBACK//these work when the path is accessed though no menu items are created
    ,
); 
```

还有几点，当你在一个特定的“菜单”项上，它的页面参数数组元素设置为你的表单时，它只认为它是一个表单。也就是说，一个函数将是唯一能够创建表单的函数（根据我的经验）。因此，如果适用，请在该函数中使用逻辑来产生不同的形式......（而不是试图拥有一个调用另一个函数的按钮......这对我不起作用）。

另外，再次参考 mikewink 的回答， $form_state 变量是存储您要注意的状态的方法，而不是标准的 $_GET 或 $_POST 变量。

此链接可能会有所帮助：[https ://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7](https://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7)

但是，我从示例模块中收集了最有价值的信息：[https ://drupal.org/project/examples](https://drupal.org/project/examples)

祝你好运！

# android - 使用 HOGDescriptor (OpenCV for Android) 对图像进行梯度和角度可视化

> ID：10945992
> 
> 赞同：1
> 
> 时间：2012-06-08T09:09:57.083
> 
> 标签：android, windows, opencv

我尝试可视化由 Android 的 OpenCV Lib 的 HOGDescriptor 计算的图像的梯度和角度。一开始我有一个带有 8 位无符号整数（CV_8UC3）的 3 通道图像 Mat()。计算结果是梯度的 MAT() (CV_32FC2) 和角度的 Mat() (CV_8UC2)。我如何可视化这个结果？代表什么价值观？为什么有角度 Mat() 2 个通道？梯度 Mat() 的 2 个通道是梯度的 x 和 y 分量吗？我找不到 computeGradiant-Method 的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:53:36.047

HOG 描述符是一个方向梯度的直方图：它是一个直方图，其中每个 bin 代表对相应方向的梯度的投票。为了计算这个描述符，您应该首先将 3 通道彩色图像转换为灰度图像

```
cv::cvtColor(CV_BGR2GRAY); 
```

“ComputeGradient”方法的结果是例如两个图像（与原始大小相同）：x 分量和 y 分量。然后，您应该能够为每个像素计算梯度幅度和方向。

```
mag=sqrt(x*x+y*y)
alpha=atan(y/x) 
```

然后你可以填充你的直方图。请注意，HOG 描述符是由块和单元格计算的。有关更多详细信息，请参阅[此](http://en.wikipedia.org/wiki/Histogram_of_oriented_gradients)。

# java - 使用 Java 反射查找 Collection 的元素类型？

> ID：10945993
> 
> 赞同：4
> 
> 时间：2012-06-08T09:10:02.417
> 
> 标签：java

考虑以下 Java 代码：

```
public class Test
{
    private Foo< String, String > foo1;
    private Foo< Integer, Integer > foo2;
}

public class Foo< T, V >
{
    private Bar< V > bar;
    private T a;
}

public class Bar< T >
{
    @MyAnnotation
    private List< T > list;
} 
```

首先，从名为“Test”的类开始，我递归地搜索所有字段，这些字段用“MyAnnotation”注释，其类型派生自“java.lang.Collection”。对于给定的示例，结果将是：

*   Test.foo1.bar.list
*   Test.foo2.bar.list

很明显，第一个只能接受字符串作为其元素，而第二个只能接受整数。

**我的问题是：找到所有使用“MyAnnotation”注释的 Collection 字段并*告诉它们的元素类型*的最佳（最简单）方法是什么？**

从 java.lang.Collection 类型中查找带注释的字段不是问题。但是，对于给定的示例，我们如何获得类似于以下结果的结果？

*   Test.foo1.bar.list<字符串>
*   Test.foo2.bar.list<整数>

我尝试了几种方法，它们总是给我“对象”作为集合的元素类型，而不是“字符串”。

我真的坚持这一点。提前谢谢了！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T09:20:59.150

也许你可以这样尝试：

```
Field field = Test1.class.getField("list");

Type genericFieldType = field.getGenericType();

if(genericFieldType instanceof ParameterizedType){
    ParameterizedType aType = (ParameterizedType) genericFieldType;
    Type[] fieldArgTypes = aType.getActualTypeArguments();
    for(Type fieldArgType : fieldArgTypes){
        Class fieldArgClass = (Class) fieldArgType;
        System.out.println("fieldArgClass = " + fieldArgClass);
    }
} 
```

这将返回`fieldArgClass = java.lang.String`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:54:50.913

由于 Java 的类型擦除，这是不可能的。编译后，泛型类型将被原始类型替换，结果如下：

```
public class Test
{
    private Foo foo1;
    private Foo foo2;
}

public class Foo
{
    private Bar bar;
    private Object a;
}

public class Bar
{
    @MyAnnotation
    private List list;
} 
```

`foo1`然后在您直接使用和的地方填充实际类型`foo2`。例如，下面的代码：

```
Test test = new Test();
List<String> a = test.foo1.bar;
String b = a.get(0);
Integer b = test.foo2.a; 
```

将被翻译成类似：

```
Test test = new Test();
// The generic type is erased here...
List a = test.foo1.bar;
// ...and a cast is added here
String b = (String) a.get(0);
Integer b = (Integer) test.foo2.a; 
```

长话短说：您无法检索该类型，因为它在编译时被丢弃。

# javascript - 在javascript中异步执行同步工作

> ID：10945996
> 
> 赞同：1
> 
> 时间：2012-06-08T09:10:09.643
> 
> 标签：javascript, asp.net, activex

以下有什么办法吗？

我需要调用一个在客户端同步执行的 ActiveX 方法。如果此调用需要很长时间才能完成，问题就开始了，因此我想终止等待此方法返回的响应，而不是 ActiveX 方法本身（因为这是第三方组件并且没有这种能力）。

另一个问题是我在开发环境中没有那个 ActiveX，只有在生产环境中，所以我模拟了一个简单的同步请求来调用该方法到一个 httphandler（asp.net 通用处理程序），它持有线程 10 秒和然后返回结果如下：

```
public void ProcessRequest(HttpContext context)
    {
        int interval = 10;
        try
        {
            interval = int.Parse(context.Request["interval"]);
        }
        catch
        {
        }
        Thread.Sleep(interval * 1000);

        context.Response.Write("+OK");
    } 
```

所以当我说“试图调用 ActiveX 方法”时，我的意思是“我对服务器进行了同步调用，它在 10 秒后给了我一个响应”。

这是我已经尝试过的事情

1）由于 JavaScript 不支持多线程，我尝试先异步调用一些虚拟 url，然后在收到响应（异步）后，尝试调用 ActiveX 方法。这里的问题是，一旦浏览器调用该方法，整个页面就会变得无响应。这是代码：

```
$.ajax({
url:'../test/ThreadSleep.ashx',
async:true,
data:{ interval: 2 },
success: function(response){
    // here is the actual simulation of the ActiveX method call
    $.ajax({
        url:'../test/ThreadSleep.ashx',
        async:false,
        data:{ interval: 15 },
        success: function(response){
            console.log(response);
            alphaActiveX.xml = getAlphaXml();
        }
    });
} 
```

});

2) 第二种解决方案是尝试在 iframe 中打开另一个页面。此页面将进行 ActiveX 调用，并且由于调用将在不同页面上进行，因此我的主页应该保持响应。这也行不通。一旦 iframe 页面进行调用，主页面就会变得无响应。

这是打开页面的javascript： $('').dialog({ width:300, height:200, modal:true, title:'Calling ActiveX component', buttons:[ { text:'Close', click: function(){ $(this).dialog('close') } } ], close: function(){ $(this).dialog('destroy'); } });

这是在页面 dom 就绪上运行的 javascript 代码：

```
 $(function() {
        if (window.location.href.indexOf('completed=1') == -1) {
            //console.log(response);
            setTimeout(function() {
                $.ajax({
                    url: 'ThreadSleep.ashx',
                    async: false,
                    data: { interval: 15 },
                    success: function(response) {
                        //console.log(response);
                        //alphaActiveX.xml = getAlphaXml();
                        window.location.href = 'iframeActiveX.aspx?completed=1'
                    }
                });
            }, 1000);
        }
    }); 
```

3）我尝试用window.open（''）调用这个页面，我想，因为这将是一个新页面，也许我的页面会保持响应，但我错了。

4）如果我尝试在全新的浏览器窗口中打开此页面，也会发生同样的事情，例如：

```
$('<div><a href="../test/iframeActiveX.aspx" target="_blank">Call the ActiveX component</a></div>').dialog({

                    width:300,
                    height:200,
                    modal:true,
                    title:'Calling ActiveX component',
                    buttons:[
                        {
                            text:'Close',
                            click:function(){
                                $(this).dialog('close')
                            }
                        }
                    ],
                    close: function(){
                        $(this).dialog('destroy');
                    }
                }); 
```

任何帮助将不胜感激。

谢谢

# matlab - MATLAB/Opencv：将 24 位 RGB 图像转换为 16 位灰度

> ID：10945997
> 
> 赞同：1
> 
> 时间：2012-06-08T09:10:23.497
> 
> 标签：matlab, image-processing, opencv

我们是否在 OpenCV 或 MATLAB 中有函数可以将 24 位 RGB 图像转换为 16 位灰度图像。我试过 CvConvertColor 但在这里没用。

（我可以使用 cvtColor(src, bwsrc, CV_RGB2GRAY) 转换为灰度，需要更多帮助，但我想将其从 32 位转换为 16 位。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:49:40.763

我相信 matlab 中有 rgb2gray 运算符。

这是您可以从 mathworks 网站上阅读的链接：

[http://www.mathworks.com/help/toolbox/images/ref/rgb2gray.html](http://www.mathworks.com/help/toolbox/images/ref/rgb2gray.html)

这甚至会告诉您如何读取图像。您应该需要的大部分代码都在那里！！！

```
I = imread('board.tif');
J = rgb2gray(I);
figure, imshow(I), figure, imshow(J); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:23:29.937

你试过 OpenCV 的 cvtcolor 吗？我不确定您使用的是哪个 opencv 版本，但 CvConvertColor 不再存在，您可能应该设置最新版本。

简历颜色：

[http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#cvtcolor](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#cvtcolor)

cvtColor 本身没有进一步的参数，它足够聪明地检查源矩阵和命运矩阵的位数。Opencv 矩阵对象，Mat 对象，有一个自定义的 opencv 类型，可以保存它们的位数、颜色通道数和原始类型（详细信息： http: [//docs.opencv.org/modules/core/doc/basic_structures.html#datatype](http://docs.opencv.org/modules/core/doc/basic_structures.html#datatype)）。

如果要确定生成的矩阵是否为 16 位，可以检查 Mat 类型。如果矩阵不在您需要的位数，opencv 有其他转换器：[http ://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=convert#mat-convertto](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=convert#mat-convertto)

# symfony1 - 未知的记录属性/相关组件，具有多个引用到一个表

> ID：10945998
> 
> 赞同：0
> 
> 时间：2012-06-08T09:10:25.130
> 
> 标签：symfony1, reference, doctrine

在模型定义中

```
 $this->hasMany('Photo', array(
         'refClass' => 'StyleLangHasPhoto',
         'local' => 'style_lang_id',
         'foreign' => 'photo_id'));

    $this->hasMany('Photo as Preview', array(
         'refClass' => 'StyleLangHasPreviewPhoto',
         'local' => 'style_lang_id',
         'foreign' => 'photo_id')); 
```

但吸气剂`getPreview`甚至`$this->_get('Preview')`抛出`Unknown record property / related component "Preview" on "StyleLang"`

我试着做这样

```
 $this->hasMany('Photo as Slide', array(
         'refClass' => 'StyleLangHasPhoto',
         'local' => 'style_lang_id',
         'foreign' => 'photo_id'));

    $this->hasMany('Photo as Preview', array(
         'refClass' => 'StyleLangHasPreviewPhoto',
         'local' => 'style_lang_id',
         'foreign' => 'photo_id')); 
```

但没有任何改变

我做错了什么？

**UDP1：** getPhoto、setPhoto、setPreview 效果很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:28:46.183

问题已解决

`foreignAlias:`in `relations`for`Photo`并且`Preview`必须不同

谢谢

# css - CSS - 显示表上的填充溢出其容器

> ID：10945999
> 
> 赞同：5
> 
> 时间：2012-06-08T09:10:30.513
> 
> 标签：css, padding, css-tables

示例： http: [//www.homeroe.com/homeroe.com/newHome/pulpaForum/test.php](http://www.homeroe.com/homeroe.com/newHome/pulpaForum/test.php)

为什么每当我添加填充时表格 div 会从其容器中取出？

有没有解决这个问题的方法？

```
<style>
.foroContainer {
    width: 700px;
    margin-left: auto; 
    margin-right: auto; 
    background: yellow;
}

.foroContainer .table{
    display: table;
    width: 100%;
    padding: 8px;
    border: 1px solid #a9a9a9;
    margin-bottom: 1em;
}

.foroContainer .row{
    display: table-row;
}

.foroContainer .cell{
    display: table-cell;
}

#right.cell{
    text-align: right;
    border-top: 1px solid #a9a9a9;
}
}
</style>

<div class="foroContainer">
<div class="table">
    <div class="row">
        <div class="cell">asdasdasdas</div>
    </div>
    <div class="row">
        <div id="right" class="cell">asdasdas | asdasdsad | asdasdasdas</div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T13:59:54.830

或者，您可以尝试更改 box-sizing 属性，无论是针对页面上的每个元素，还是仅针对那个容器。例如，对于页面上的每个元素，您可以编写：

```
* { box-sizing: border-box; } 
```

这将改变浏览器使用的默认框模型，以便元素的宽度不会改变，无论是否填充。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T09:16:31.097

CSS中封装的层次是：margin-border-padding

当您向对象添加填充时，您实际上会改变它的宽度。如果某物的宽度为 100px 并且您添加 padding:10px 它的宽度将变为 120px （100 + 10 padding-left + 10 padding right）

这就是你的容器被推过去的原因（它的宽度：100%），一个好的方法是你的桌子内部的另一个容器，宽度：100%，但桌子没有宽度。