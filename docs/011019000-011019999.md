# StackOverflow 问答 11019000-11019999

# actionscript-3 - 如何点击矩形（如 mouseChildren = true）

> ID：11019002
> 
> 赞同：0
> 
> 时间：2012-06-13T16:09:07.830
> 
> 标签：actionscript-3, mouseevent

我有这个问题，我使用这个图像平移类： http: [//www.lextalkington.com/blog/2009/08/auto-pan-class-for-panning-an-image-on-mouse-movement/](http://www.lextalkington.com/blog/2009/08/auto-pan-class-for-panning-an-image-on-mouse-movement/)

但问题是其中的对象/精灵/电影剪辑必须是可点击的，唯一的问题是 mouseChildren 和 mouseEnabled 属性不能应用于 Rectangle 对象。

任何人都知道如何能够点击它，以便我可以在平移项目中访问我的对象？（如果那有意义的话...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:27:15.227

此类使用 a`Rectangle`作为`scrollRect`图像。唯一指定图像的`scrollRect`可见区域。这不是您想要检测鼠标点击的东西。

相反，您可以监听图像本身的鼠标点击。

从您链接到的代码中，图像是一个`DisplayObject`名为`_clip`.

在该图像平移类的构造函数中，您可以添加鼠标侦听器：

```
_clip.addEventListener(MouseEvent.CLICK, onImageClick); 
```

然后定义事件处理程序：

```
private function onImageClick(event:Event):void
{
   // do something
} 
```

顺便说一句，因为`_clip`is a `DisplayObject`，它没有`mouseChildren`or`mouseEnabled`属性（这些在 DisplayObject 的子类中定义）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T16:56:20.467

```
_clip.mouseEnable = false; 
```

这应该可以工作，考虑到 _clip 将被点击

# debugging - VBS 找不到目录 - '找不到路径'

> ID：11019003
> 
> 赞同：4
> 
> 时间：2012-06-13T16:09:09.563
> 
> 标签：debugging, vbscript, permissions, windows-server-2008-r2, filesystemobject

我有一个脚本，可以获取有关特定目录中当前文件夹和子文件夹的信息。它工作得很好，但我偶然发现了一个奇怪的问题：

```
dim FSO, objFolder, datafolder, foldername, objSubfolder, totalSize
dim objSubfolder2, objFolder2, mSize, size, today, dateLastMod

foldername = "D:\folder\subfolder"
set FSO = CreateObject("Scripting.FileSystemObject")
set objFolder = FSO.GetFolder(foldername) 
set colSubfolders = objFolder.Subfolders
today = Now
ShowFolderDetails objFolder

Function ShowFolderDetails(oF)

    datafolder = oF.Size/1073741824
    wscript.echo oF.Name & " :Size= " & datafolder & " GB"
    wscript.echo oF.Name & " #Files= " & oF.Files.Count
    wscript.echo oF.Name & " #Folders= " & oF.Subfolders.count
    wscript.echo oF.Name & " Date Last Modified= " & oF.DateLastModified
    totalSize = totalSize + datafolder

end Function 
```

还有更多要遵循的，但我的问题是`path not found`当我调用该函数时会得到一个。

该文件夹不在 C:\ 驱动器上 - 这应该不是问题。我已经完成了相同的脚本，但更改了`foldername = D:\folder\differentsubfolder`它完美的工作。但是当我把它改回另一个文件夹时，它给了我一个找不到路径的错误。

我还尝试将 set FSO = CreatObject("Scripting.FileSytemObject") 下面的所有内容放在 IF 语句中：

> IF FSO.FolderExists(文件夹名) 然后 ....

这**确实**进入了那个 IF 语句，这让我相信 VBS 看到了它，但我仍然在`line 17 (datafolder = oF.Size/1073741824)`.

我尝试放入变量文件夹名称所在的完整文件夹路径（用引号括起来）。

我尝试运行指向其他目录的 vbs，它运行 100%。它只是那个特定的文件夹。文件夹名称中没有空格。还有什么我想念的吗？我对 D:\

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:53:14.400

我敢打赌，原因不是隐藏文件或文件夹，而是诸如 Thumbs.db 之类的系统文件位于许多包含图像的文件夹中，也可以看到它们编辑文件夹选项以查看系统文件，删除系统文件并重试。当您询问文件夹的大小时，您需要访问其下的所有文件夹和文件。如果您在例如您的个人资料文件夹上尝试您的脚本，您肯定会得到错误，该文件夹的管理员或所有者与否。

如果有帮助，这里有一个脚本，它提供文件的属性

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.GetFile("c:\ruby193.zip")
If objFile.Attributes AND 0 Then
    Wscript.Echo "No attributes set."
End If    
If objFile.Attributes AND 1 Then
    Wscript.Echo "Read-only."
End If    
If objFile.Attributes AND 2 Then
    Wscript.Echo "Hidden file."
End If    
If objFile.Attributes AND 4 Then
    Wscript.Echo "System file."
End If    
If objFile.Attributes AND 32 Then
    Wscript.Echo "Archive bit set."
End If    
If objFile.Attributes AND 64 Then
    Wscript.Echo "Link or shortcut."
End If    
If objFile.Attributes AND 2048 Then
    Wscript.Echo "Compressed file."
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T20:43:29.117

文件夹的 .Size 属性是动态计算的。因此，该子树中的所有分支和叶子对于操作的成功至关重要。我的 C:\ 包含一个隐藏的系统文件夹“系统卷信息”，我可以获得以下的 .Name 但不是 .Size：

```
>> sFP = "System Volume Information"
>> If goFS.FolderExists(sFP) Then WScript.Echo goFS.GetFolder(sFP).Name
>>
System Volume Information
>> If goFS.FolderExists(sFP) Then WScript.Echo goFS.GetFolder(sFP).Size
>>
Error Number:       70
Error Description:  Permission denied 
```

我承认“权限被拒绝”不是“找不到路径”，但似乎某些子文件夹的属性或权限可能是罪魁祸首。

**更新**

为了进行测试，我让我的 root 搞乱了我的 linux 共享上映射为 e:\bin 的文件夹。根看到：

```
bin
[-rwx------ eh         16]  bin/dragit-ssh.sh
[lrwxrwxrwx eh         33]  bin/komodo -> /home/eh/Komodo-Edit-6/bin/komodo
[drwxr-xr-x eh       4.0K]  bin/pics
[-rwxr--r-- eh       6.0K]  bin/pics/Thumbs.db
[-rwxr--r-- eh        20K]  bin/pics/jsa.JPG
[-rwx------ root      10K]  bin/pics/x
[-rwxr-xr-x eh         45]  bin/rhinos.sh
[drwx------ root     4.0K]  bin/rootsown
[-rwxr-xr-x root      10K]  bin/rootsown/x
[-rwx------ eh        523]  bin/showpath.sh
[-rwxr--r-- eh        325]  bin/sp6p.sh

2 directories, 9 files

14392   /home/eh/bin/rootsown
40595   /home/eh/bin/pics
60025   /home/eh/bin 
```

在 linux 上，我可以看到：

```
bin
[-rwx------ eh         16]  bin/dragit-ssh.sh
[lrwxrwxrwx eh         33]  bin/komodo -> /home/eh/Komodo-Edit-6/bin/komodo
[drwxr-xr-x eh       4.0K]  bin/pics
[-rwxr--r-- eh       6.0K]  bin/pics/Thumbs.db
[-rwxr--r-- eh        20K]  bin/pics/jsa.JPG
[-rwx------ root      10K]  bin/pics/x
[-rwxr-xr-x eh         45]  bin/rhinos.sh
[drwx------ root     4.0K]  bin/rootsown [error opening dir]
[-rwx------ eh        523]  bin/showpath.sh
[-rwxr--r-- eh        325]  bin/sp6p.sh

2 directories, 8 files

4096    bin/rootsown
40595   bin/pics
49729   bin 
```

两个重要的事实：我不允许“查看”rootsown 目录，所以我看不到 bin/rootsown/x 或调整其大小；但是 bin/pics/x 的大小并不是什么秘密，尽管我被禁止阅读、更改或执行它。

*VB脚本：*

```
>> sf = "e:\bin\pics"
>> WScript.Echo goFS.GetFolder(sf).Size
>>
36499 
```

您可以获得包含讨厌文件的文件夹的 .Size 。

```
>> sf = "e:\bin"
>> WScript.Echo goFS.GetFolder(sf).Size
>>
Error Number:       70
Error Description:  Permission denied 
```

您无法获得包含讨厌的子（子...）文件夹的文件夹的 .Size 。

```
>> sf = "e:\bin\pics\rootsown"
>> WScript.Echo goFS.GetFolder(sf).Size
>>
Error Number:       76
Error Description:  Path not found 
```

当您询问讨厌的文件夹的 .Size 时，您会收到“找不到路径”错误

基于此，我愿意接受彼得的赌注。如果您可以通过更改文件的属性或权限来证明**您**可以使父文件夹的 .Size 分别成功。失败，我将支付 10 欧元，- 给我遇到的下一个无家可归者。

*不起眼的目录：*

要获得文件夹的大小，我会先尝试

```
dir /s e:\bin
Volume in drive E is eh
Volume Serial Number is 0ED6-233C

Directory of e:\bin

4.06.2012  18:42    <DIR>          .
4.06.2012  08:04    <DIR>          ..
2.01.2012  12:21                45 rhinos.sh
3.06.2012  22:55    <DIR>          rootsown
3.10.2011  16:42               325 sp6p.sh
4.06.2012  19:46    <DIR>          pics
1.07.2010  23:34               523 showpath.sh
8.10.2010  16:57               582 komodo
4.05.2010  12:53                16 dragit-ssh.sh
              5 File(s)          1.491 bytes

Directory of e:\bin\pics

4.06.2012  19:46    <DIR>          .
4.06.2012  18:42    <DIR>          ..
5.08.2011  10:22            10.296 x
0.07.2008  03:44             6.144 Thumbs.db
9.06.2012  23:29            20.059 jsa.JPG
              3 File(s)         36.499 bytes

    Total Files Listed:
              8 File(s)         37.990 bytes
              6 Dir(s)  29.060.050.944 bytes free 
```

似乎 dir 知道我被允许知道的内容，并且它并没有被讨厌的文件夹过度干扰。

*使用 dir 的脚本：*

```
Option Explicit

Dim reX  : Set reX  = New RegExp
reX.Pattern = "Directory\s+of\s+(.+?)\r[\s\S]+?Total[\s\S]+?([.\d]+\sbytes)"
Dim oMTS : Set oMTS = reX.Execute(WScript.StdIn.ReadAll())
If 1 = oMTS.Count Then
   WScript.Echo "Size of", oMTS(0).SubMatches(0), "=>", oMTS(0).SubMatches(1)
Else
   WScript.Echo "Bingo!"
End If 
```

样品用途：

```
dir /s e:\bin | cscript folsiz2.vbs
Size of e:\bin => 37.990 bytes 
```

RegExp 模式搜索

```
Directory\s+of\s+            The first "Directory of "
(.+?)                        capture the path of the folder, that is
                             the sequence of 'everything except \n' but non greedy, so
\r                           the first \r will not be included in the capture
[\s\S]+?                     non greedy sequence of 'really everything (space or non-space)'
Total                        until "Total" is found
[\s\S]+?                     advance but stop for the first
([.\d]+\sbytes)              sequence of . or digits followed by " bytes", capture
                             that because that is the first sum after Total 
```

# javascript - 将表单字段输出到 textarea 的 JavaScript 以输出 textarea 结束，但随后立即自行清除？

> ID：11019007
> 
> 赞同：0
> 
> 时间：2012-06-13T16:09:20.797
> 
> 标签：javascript, html, forms

以下是我的问题的简要概述：

我有一个 JavaScript 函数，它获取一堆表单字段的值，然后将它们组合到另一个名为 outputArea 的变量中，然后我使用相同的函数将名为“outputArea”的文本区域的值更改为我为 outputArea 创建的值在 JScript (document.thisForm.outputArea.value = outputArea) 中。

但是当我按下调用该函数的“制作我的笔记”按钮时，它会抓取变量，触发我的警报以转储变量以确保其工作，然后输出到我想要它的表单字段......但是，立即函数完成后，它会自行清除。就其本身而言，我的意思是整个表单都被清除了，包括 outputArea。

我已经多次检查了我的源代码，并且有 0 个对重置按钮的引用或在调用函数后应该清除这些值的任何内容，所以我很茫然。

以下是我的功能：

```
<script type="text/javascript">
    function getNotes() {
        var spokeTo = document.thisForm.spokeWith.value;
        var problemWith = document.thisForm.problemWith.value;
        var resolvedBy = document.thisForm.resolvedWith.value;
        var thisTech = document.thisForm.techName.value;
        var liveChat = document.thisForm.onLiveChat.value;
        var passTo = document.thisForm.passTo.value;
        var fSpace = ".  ";
        var fSign = "  - ";

        alert(spokeTo + problemWith + resolvedBy + thisTech);

        outputValue = 'Spoke with: ' +spokeTo + fSpace + problemWith + resolvedBy + passTo + fSign + thisTech;
        document.thisForm.outputArea.value = outputValue;
        alert('DISMISS');
    } 
```

调用该函数的按钮很简单：

```
<input type="submit" class="button" value="Make My Notes!" onClick="javascript:getNotes();" tabindex="4" style="margin-right:1em;" /> 
```

和输出字段：

```
<textarea name="outputArea" id="outputArea" onClick="this.select();" readonly="yes"></textarea> 
```

我添加了警报（'DISMISS'）；试图看看我是否可以（暂时）通过强制用户按 OK 来阻止表单清除自己，但奇怪的是，它在调用 document.thisForm.outputArea.value = outputValue 之前调用了 Alert，我不明白。在它调用它并输出之后，它会立即清除每个表单字段。这是目前整个页面唯一的javascript功能，并且看不到任何重置按钮。

我以前做过很多事情，实际上有一个使用类似方法的应用程序现在正在运行并且工作正常，所以我完全感到困惑。我到底做错了什么？

我非常感谢任何花时间为我研究这个问题的人。干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:12:00.633

在我看来，这实际上看起来像您的页面正在刷新，因为按钮正在执行提交操作。将您的活动更改`onClick`为：

```
onClick="getNotes(); return false;" 
```

因为这是生成一个 POST 请求（可能是对它自己），所以页面就像是第一次加载一样。

# php - 使用 php 填充可编辑的 PDF 表单字段

> ID：11019009
> 
> 赞同：2
> 
> 时间：2012-06-13T16:09:24.900
> 
> 标签：php, tcpdf, fpdf, pdf-form

我的办公室已经创建了一个现有的 PDF 表单，其中包含供用户填写（以电子方式）和打印的表单字段。在将它传递给用户之前，我想打开现有的 PDF 并使用 php.ini 填充尽可能多（如果不是全部）的数据。我已经研究过像 TCPDF 和 FPDI 这样的扩展，但我无法通过查看示例和文档来确认我想做的事情是否可行。你们有没有人这样做过？

我确实看到了[TCPDF::setFormDefaultProp](http://www.tcpdf.org/doc/classTCPDF.html#a1611451af253619217095e279f52fa52)，它看起来很有希望......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:59:07.483

pdftk 有一个[`fill_form`](http://www.pdflabs.com/docs/pdftk-man-page/#dest-op-fill-form)命令。由于它没有 PHP 绑定，因此您必须将其安装在您的服务器上并使用`exec()`et al 调用它，但这很容易。要使用它，您必须生成一个 FDF 文件，Pdftk 将根据[`generate_fdf`](http://www.pdflabs.com/docs/pdftk-man-page/#dest-op-generate-fdf)命令执行该文件，然后将所需的数据插入其中。[您可以在](https://github.com/andrewheiss/pdftk-php)[此处](http://www.pdfhacks.com/forge_fdf/)和[此处](http://www.myown1.com/linux/pdf_formfill.shtml)找到有关 FDF 文件的一些信息以及一些示例 PHP 代码。事实上，我认为您可以将生成的 FDF 文件放入您的 PDF 脚本中，并在正确转义的情况下，像在任何字符串中一样填充值，然后将其通过管道传输回.`pdftk fill_form`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T14:03:25.770

您可以使用像 SetPDF [http://www.setasign.com/这样的商业产品](http://www.setasign.com/)

# .net - 将 byte[] 转换为 String（未知 byte[] 类型）

> ID：11019010
> 
> 赞同：2
> 
> 时间：2012-06-13T16:09:35.947
> 
> 标签：.net, c#-4.0

所以我是一个非常业余的程序员，试图按照一些例子来为我正在开发的这个应用程序创建一个小型审计系统。

我们在 C# .NET 4.0 之上使用的框架 (StrataFrame) 要求将审计值存储为字节数组。我遵循了他们论坛的一个小例子，让我这样做了；

```
 System.Runtime.Serialization.Formatters.Binary.BinaryFormatter formatter = new                       System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
        System.IO.MemoryStream outstream = new System.IO.MemoryStream();

        foreach (DataColumn dc in jobHeaderBO1.CurrentDataTable.Columns)
        {
                if (!dr[dc.ColumnName, DataRowVersion.Original].Equals(dr[dc.ColumnName, DataRowVersion.Current]))
                {
                    formatter.Serialize(outstream, dr[dc.ColumnName, DataRowVersion.Current] + " " + dr[dc.ColumnName, DataRowVersion.Original]);

                    Auditor.ShouldAuditDataChanges(jobHeaderBO1);
                    Auditor.InsertAuditEvent("JOB HEADER", dc.ColumnName + " changed.", outstream.ToArray());
                    Auditor.InsertAuditRecords(jobHeaderBO1);
                }
        } 
```

因此，据我所知，所有工作都有效——记录被插入到适当的表中，当我查看它时，它是一堆垃圾。所以现在我需要向用户展示这些垃圾！

我发现了一些例子，说只是做一些事情，例如：

```
 string oldv = System.Text.Encoding.UTF8.GetString(adf.adf_OldValue);
  string newv = System.Text.Encoding.UTF8.GetString(adf.adf_NewValue); 
```

当我打印出 oldv 和 newv 时，这些值无法正确显示。一些存储文本的字段大多显示正常，但日期和数字却不行。我想问题是我不知道它是什么类型的编码，我也找不到。有什么建议么？

# android - Android Checkbox - 控制 EditText？

> ID：11019012
> 
> 赞同：2
> 
> 时间：2012-06-13T16:09:45.877
> 
> 标签：android, checkbox, android-edittext

我想要一个复选框来打开或关闭通知。（我没有在设置菜单中使用它）。

我只是想要一个带有标签的 EditText 字段，除非选中此复选框，否则它会略微变灰且不可点击。一旦发生这种情况，EditText 字段就会变得栩栩如生并且可以使用。怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:11:40.970

您可以使用复选框 oncheckchanged 侦听器并在未选中时修改edittext，更多信息在这里：[http ://mgmblog.com/2008/02/18/android-checkbox-oncheckedchangelistener/](http://mgmblog.com/2008/02/18/android-checkbox-oncheckedchangelistener/)

# gcc - 为什么 jom 在 QtCreator 中隐藏 gcc 警告？

> ID：11019024
> 
> 赞同：1
> 
> 时间：2012-06-13T16:10:47.320
> 
> 标签：gcc, qt-creator

在我的 Windows QtCreator 项目中，我使用 jom 来编译具有多个内核的 C++。问题是，当激活 jom 时，并非所有警告都显示在构建问题选项卡中。在编译选项卡中，未显示的警告以黑色显示，而在构建问题选项卡中实际显示的所有警告均以红色打印。在 QT 网站上，我读到红色文本表示标准错误，而黑色文本表示标准输出。

那么，为什么 jom 将一些警告从 stderr 转移到 stdout？

警告的类型似乎无关紧要，一些未使用的参数警告进入标准输出，一些进入标准错误。我还尝试禁用 jom，然后所有警告都正确显示在构建问题选项卡中（并在编译选项卡中以红色文本打印）

干杯，感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:32:25.113

我们发现了同样的问题，作为临时解决方案，我们恢复到了 jom 1.0.08（它是 Jom 的最新版本，仍然可以正常工作）。

[您可以从ftp://ftp.qt.nokia.com/jom/](ftp://ftp.qt.nokia.com/jom/)下载 Jom 1.0.08

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T13:44:18.823

Jom 1.0.11 版也有同样的问题。我更改为最新版本（1.0.13），现在警告和错误再次显示在 tje 'build-problems'-tab 中。

# linq - LINQ 在同一列上连接多个表

> ID：11019031
> 
> 赞同：1
> 
> 时间：2012-06-13T16:11:13.473
> 
> 标签：linq, c#-4.0

我有一个名为 TestNotifications 的表，它有一个 CompanyID 和一个 TestCompanyID。这些 ID 链接到具有 companyName 列的 Companies 表。我需要获取公司的 companyName 和 testCompany。下面的代码不起作用，我得到一个不能隐式转换的错误。任何帮助表示赞赏。

```
testNotifications = from t in db.CT_TestNotifications
    join c in db.CT_Companies on t.CompanyID equals c.CompanyID
    join tc in db.CT_Companies on t.TestCompanyID equals tc.CompanyID 
    select new
    {
        t.TestNotificationID,
        c.CompanyName,
        //tc.CompanyName
        TestCompanyName = tc.CompanyName
    }; 
```

这是错误：

```
Cannot implicitly convert type 'System.Linq.IQueryable<AnonymousType#1>' to
'System.Linq.IQueryable<CT_TestNotification>'. An explicit conversion exists 
(are you missing a cast?) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:22:08.177

您正在投影到匿名类型，但`testNotifications`期望`CT_TestNotification`.

`CT_TestNotification`尝试在你的创建一个实例`select`：

```
testNotifications = from t in db.CT_TestNotifications
    join c in db.CT_Companies on t.CompanyID equals c.CompanyID
    join tc in db.CT_Companies on t.TestCompanyID equals tc.CompanyID
    select new CT_TestNotification       // Here's the major difference
    {
        PropName = t.TestNotificationID, // PropName must be changed to the
        PropName = c.CompanyName,        // properties of your actual class
        //tc.CompanyName
        TestCompanyName = tc.CompanyName
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:33:59.510

I suspect the issue lies in how you declared testNotifications. If you did something like the following, you would see that error:

```
IQueryable<CT_TestNotifications> testNotifications;

testNotifications = from t in db.CT_TestNotifications 
    join c in db.CT_Companies on t.CompanyID equals c.CompanyID 
    join tc in db.CT_Companies on t.TestCompanyID equals tc.CompanyID  
    select new 
    { 
        t.TestNotificationID, 
        c.CompanyName, 
        //tc.CompanyName 
        TestCompanyName = tc.CompanyName 
    }; 
```

You would also get this same issue if you declared the testNotifications at the start and then continued with the query later on because you are trying to change the type of the value from the known type to an anonymous type.:

```
var testNotifications = db.CT_TestNotifications;
    testNotifications = from t in testNotifications 
        join c in db.CT_Companies on t.CompanyID equals c.CompanyID 
        join tc in db.CT_Companies on t.TestCompanyID equals tc.CompanyID  
        select new 
        { 
            t.TestNotificationID, 
            c.CompanyName, 
            //tc.CompanyName 
            TestCompanyName = tc.CompanyName 
        }; 
```

Since you are projecting an anonymous type, you need to use type inference and not explicitly declare the variable:

```
var testNotifications = from .. select ..; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T16:18:21.063

查看您的加入条件是否属于相同类型 - IE 是 t.CompanyID 和 int 和 c.CompanyID。

# static - Heroku Cedar 纯机架静态站点

> ID：11019032
> 
> 赞同：2
> 
> 时间：2012-06-13T16:11:18.217
> 
> 标签：static, heroku, rack, cedar

我一直在尝试整合两个托管静态站点的教程：

*   [为 cedar 堆栈部署基于机架的应用程序](https://devcenter.heroku.com/articles/rack#pure_rack_apps)
*   [Heroku/Bamboo 上使用 Ruby 的静态站点](https://devcenter.heroku.com/articles/static-sites-on-heroku)

基本上我希望能够做你在雪松堆栈上的旧竹教程中所做的事情。我可以让雪松教程工作，但是当我尝试修改它以提供文件时，我得到一个错误。

我看过[下面的帖子](https://stackoverflow.com/questions/9147891/static-website-on-heroku-cedar//)，但是 github repo 似乎不再存在了，我无法弄清楚我哪里出错了。

当我尝试按照第一个教程在本地运行站点时，我收到以下错误：

```
martin@crunchbang:~/code/martinrichards.me$ rackup -p 9292 config.ru &
[2] 4065
martin@crunchbang:~/code/martinrichards.me$ /home/martin/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval':     /home/martin/code/martinrichards.me/config.ru:2: syntax error, unexpected tIDENTIFIER, expecting '}' (SyntaxError)
200, ... |env|"
... 
```

我已经把到目前为止我所拥有的东西放在[Github](https://github.com/martinffx/heroku-static-site-example)上，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:20:31.347

好吧，首先，你`config.ru`的几乎完全是空的。看起来您正在遵循与 Heroku 教程相同的站点结构，所以从 config.ru 开始，如下所示：

```
use Rack::Static, 
  :urls => ["/stylesheets", "/images"],
  :root => "public"

run lambda { |env|
  [
    200, 
    {
      'Content-Type'  => 'text/html', 
      'Cache-Control' => 'public, max-age=86400' 
    },
    File.open('public/index.html', File::RDONLY)
  ]
} 
```

由于您在 Cedar 上，因此使用 a`Procfile`来启动您的流程会很有帮助。因此，将一个名为`Procfile`（无扩展名）的文件添加到您的根目录，并将以下内容放入其中：

`web: bundle exec rackup config.ru -p $PORT`

那应该这样做。

如果你想使用 Sinatra，Heroku 为 Cedar 上的 Ruby 站点提供了分步教程：[https ://devcenter.heroku.com/articles/ruby](https://devcenter.heroku.com/articles/ruby)

**编辑：**

事实证明，您的`config.ru`. 这就是 GitHub 无法正确显示文件的原因。您的行尾是`^M`DOS/Windows/Mac OS 9 行尾。这就是为什么 Ruby 在第 2 行抛出错误 - 这是第一个换行符。不确定您使用的是什么文本编辑器，但它可能支持更改行尾。将它们切换到 Unix，一切都应该正常工作。如果您正在寻找可以执行此操作的文本编辑器，请查看[Sublime Text 2](http://www.sublimetext.com/2)。行尾功能位于“查看”菜单中。

由于您正在构建一个纯 Rack 应用程序，因此您实际上不需要`Procfile`.，因为默认的 Heroku Cedar buildpack 会`config.ru`为您检测到。但是，`Procfile`一旦您开始使用其他框架（如 Sinatra），它就会派上用场。另外，如果您使用的是 Mac，您可以使用[Foreman](https://devcenter.heroku.com/articles/procfile#developing_locally_with_foreman)来模拟 Heroku 的启动过程。请注意，`Profile`它没有扩展名并带有大写“P”。

# python - cProfile 报告几乎所有花费在 :1( )

> ID：11019036
> 
> 赞同：1
> 
> 时间：2012-06-13T16:11:24.340
> 
> 标签：python, profiling, cprofile

我正在分析一些代码，cProfile 报告几乎所有时间都花在`<string>:1(<lambda>)`. 这意味着什么？
这是 cProfile 的输出：

```
10182 function calls in 191.365 seconds
Ordered by: standard name
ncalls  tottime  percall  cumtime  percall filename:lineno(function)
   727  187.331    0.258  187.331    0.258 <string>:1(<lambda>)
     1    0.000    0.000  191.365  191.365 <string>:1(<module>)
   727    0.791    0.001    0.837    0.001 function_base.py:822(gradient)
   727    0.003    0.000    0.031    0.000 numeric.py:65(zeros_like)
     1    0.000    0.000  191.365  191.365 ode.py:316(integrate)
     1    2.447    2.447  191.365  191.365 ode.py:685(run)
  1454    0.376    0.000    1.213    0.001 useful.py:117(q_powers_opr)
   727    0.296    0.000  188.918    0.260 useful.py:95(dWave)
  1454    0.001    0.000    0.001    0.000 {len}
   727    0.001    0.000    0.001    0.000 {method 'append' of 'list' objects}
   727    0.013    0.000    0.013    0.000 {method 'astype' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
   727    0.024    0.000    0.024    0.000 {method 'fill' of 'numpy.ndarray'objects}
   727    0.004    0.000    0.004    0.000 {numpy.core.multiarray.empty_like} 
   727    0.001    0.000    0.001    0.000 {range}
   727    0.078    0.000    1.291    0.002 {sum} 
```

这是分析代码：

```
import useful
import numpy as np
import sympy as sp
import cProfile
u=sp.Symbol('u')
q=sp.Symbol('q')
x_0=sp.Symbol('x_0')
p_0=sp.Symbol('p_0')
w=sp.Symbol('w')
L_u=sp.Lambda(u,u**4/4-5*u**2/2)
V_q=sp.Lambda(q,10*q)
sys=useful.system(L_u)
pAxis=np.linspace(-60+0j,60,10000)
pWave=useful.numpify(useful.gaussian_wavefunction.subs({x_0:5,p_0:0,w:1}))(pAxis)
pWave_t=sys.time_evolve(pWave,pAxis,V_q)
print "Starting Integration"
cProfile.run("pWave2=pWave_t.integrate(0.2)") 
```

这里是有用的.py，它实际上做了所有事情：

```
import numpy as np
import sympy as sp
import functools
from scipy import integrate
from itertools import *
u=sp.Symbol('u')
q=sp.Symbol('q')
p=sp.Symbol('p')
w=sp.Symbol('w')
x_0=sp.Symbol('x_0')
p_0=sp.Symbol('p_0')
hStep=sp.Lambda(p,(1+sp.sign(p))/2)
gaussian_wavefunction=sp.Lambda(p,(2*sp.pi*w**2)**(-sp.Rational(1,4))*\
    sp.exp(-sp.I*x_0*p)*sp.exp(-(p-p_0)**2/(4*w**2)))
class system:
    def __init__(self,K_u):
        """
        This function accepts a definition of kinetic energy in terms of
        velocity (u). Lagrangeans with cross terms between u and q are at the
        moment outside the scope of this program; this may change.
        """
        #This file will use the convention {function}_{input variables}
        #I can't figure out how to allow parameterization of the lagrangean,
        #   so I won't for now.
        self.p_u=sp.Lambda(u,sp.diff(K_u(u),u))
        u_crit=sp.solve(sp.diff(self.p_u(u),u))
        self.p_crit=map(self.p_u,u_crit)
        n_p_crit=sorted([complex(sp.N(p_crit))
            for p_crit in self.p_crit],key=lambda x: x.real)
        #print n_p_crit
        self.H_u=sp.Lambda(u,sp.expand(self.p_u(u)*u-K_u(u)))
        self.u_p=[sp.Lambda(p,u_p_i) for u_p_i in sp.solve(self.p_u(u)-p,u)]
        #This will fail horribly if there is only one critical point;
        #   really you shouldn't be using it in that case, though, so..
        test_points=[2*n_p_crit[0]-n_p_crit[1]] #Left of the leftmost point
        test_points+=[(p_1+p_2)/2 for (p_1,p_2) in
            izip(n_p_crit[:-1],n_p_crit[1:])] #average of every pair of points
        test_points+=[2*n_p_crit[-1]-n_p_crit[-2]]#Right of the rightmost point
        def slopeSign(f):
            #Given a symbolic function f, returns a numerical function over the
            #   same domain, which gives the sign of the slope of f.
            def out(x):
                deriv=sp.diff(f(p),p).subs(p,x)#Note this is still sympified
                return int(np.sign(complex(deriv).real))
            return out
        #Note that the below is a generator. A streight list will not close
        #   arround u_p_i, and they'll all reference the last one. Annoying,
        #   although a generator is better for this job anyway.
        n_orientation_p=(slopeSign(u_p_i) for u_p_i in self.u_p)
        orientation=[[n_orientation_p_i(point)
            for point in test_points] for n_orientation_p_i in n_orientation_p]
        #The following determines the validity of u(p) in each region for each
        #   velocity functuion
        valid=[[-0.0001<complex(u_p_i(point)).imag<0.0001
            for point in test_points] for u_p_i in self.u_p ]
        step=[sp.Lambda(p,hStep(n_p_crit[0]-p))]
        step+=[sp.Lambda(p,hStep(p-p_1)*hStep(p_2-p))
            for (p_1,p_2) in izip(n_p_crit[:-1],n_p_crit[1:])]
        step+=[sp.Lambda(p,hStep(p-n_p_crit[-1]))]
        #The effective factors are functions of p, valued at -1,0,or 1, that
        #   are multiplied by the various possible functions of p based on
        #   functions of u (see H_eff_p for example)
        def signedSteps(sign,nonzero):
            for (step_i,sign_i,nonzero_i) in izip(step,sign,nonzero):
                yield step_i(p)*sign_i*int(nonzero_i)
        def eff_factor(orientation_i,valid_i):
            return sp.Lambda(p,sum(signedSteps(orientation_i,valid_i)))
        self.eff_factors_p=[eff_factor(orientation_i,valid_i)
                for (orientation_i,valid_i) in izip(orientation,valid)]
        self.H_eff_p=self.effective_function(self.H_u)
        #a system will have the following:
        #p_u,H_u,u_p,H_p,eff_factors_p,H_eff_p
    def effective_function(self,f_u):
        f_p=[sp.Lambda(p,sp.expand(f_u(u_p_i(p)))) for u_p_i in self.u_p]
        #The above is a list of functions in terms of p.
        return sp.Lambda(p,sum(f_p_i(p)*eff_factors_p_i(p)\
            for (f_p_i,eff_factors_p_i) in izip(f_p,self.eff_factors_p)))
    def time_evolve(self,pWave,pAxis,V_q=0):
        H_eff_p_n=numpify(self.H_eff_p)
        if V_q==0:
            return pWave*np.exp(-(0+1j)*t*H_eff_p_n(pAxis))
        else:
            try:
                #[-2::-1] gives the coeffs in order q^1,q^2,q^3...
                V_q_coeffs=V_q(q).as_poly().all_coeffs()[-2::-1]
                V_q_coeffs=map(complex,V_q_coeffs)#De-sympifies the coeffs
            except TypeError, te:#Not everything is a polynomial...
                print "Nonpolynomial potentials are not supported"
                raise
            if (np.abs(np.diff(pAxis,2))<0.0001).all():
                spacing=pAxis[1]-pAxis[0]
            else:
                spacing=np.gradient(pAxis)
            print spacing
            def dWave(t,pWave,pAxis):
                dWave=-(0+1j)*H_eff_p_n(pAxis)*pWave
                dWave+=-(0+1j)*sum(q_powers_opr(pWave,V_q_coeffs,spacing))
                """
            def dWave(pWave,H_eff_p_n,V_q_coeffs,pAxis,spacing):
                dWave=np.empty_like(pWave)
                dWave[1::2]=-H_eff_p_n(pAxis)*pWave[::2]
                dWave[::2]=H_eff_p_n(pAxis)*pWave[1::2]
                vWave=sum(q_powers_opr(pWave,V_q_coeffs,spacing))
                dWave[1::2]=-vWave[::2]
                dWave[::2]=vWave[1::2]
                del vWave
                """
                return dWave
            ode=integrate.ode(dWave)
            ode.set_integrator('zvode')
            ode.set_f_params(pAxis)
            ode.set_initial_value(pWave)
            #ode.set_f_params(H_eff_p_n,V_q_coeffs,pAxis,spacing)
            return ode
            #integrate.odeint(dWave,pWave,[0,t],
            #    args=(H_eff_p_n,V_q_coeffs,spacing))
def q_powers_opr(wave,coeffs,spacing):
    #nextWave=np.empty_like(wave)
    for c in coeffs:
        yield c*(0+1j)*np.gradient(wave)/spacing
        """
        nextWave[1::2]=c*np.gradient(wave[::2])/spacing
        nextWave[::2]=-c*np.gradient(wave[1::2])/spacing
        wave=nextWave
        """
def numpify(func):
    try:
        return map(numpify,func)
    except TypeError, te:#If there is only one function
        return sp.lambdify(func.variables,func(*func.variables),"numpy")
def niceIfft(pAxis,pWave):
    pRange=pAxis[-1]-pAxis[0]
    p0=pAxis[0]
    length=np.size(pAxis)
    xRange=2*np.pi*length/pRange
    xAxis=np.linspace(-xRange/2,xRange/2,length)
    iAxis=np.arange(length)
    xWave=(1/np.sqrt(2*np.pi)*pRange*np.fft.ifftshift(np.fft.ifft(pWave))*
        np.exp(2*np.pi*(0+1j)*(-p0)/pRange*iAxis))
    return (xAxis,xWave) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:53:33.467

我认为问题是你的`numpify`功能。它用于 create `H_eff_p_n`，这是唯一`dWave`没有在输出中明确命名的函数。我不知道它是如何`lambdify`工作的，但它必须以某种方式通过`exec`输入一个字符串来创建一个 lambda 函数。当然，a`lambda`是匿名的！

```
>>> (lambda x: x).func_name
'<lambda>' 
```

我刚刚在上面看到您的评论；一个简单的解决方法是简单地使用`def`. 如...

```
H_eff_p_n_lambda=numpify(self.H_eff_p)
def H_eff_p_n(*args, **kwargs):
    return H_eff_p_n_lambda(*args, **kwargs) 
```

这不会表现得那么好，但它至少会清楚（通过`cumtime`）哪个 lambda 很慢。我认为修改`__name__`or`func_name`属性可能会有所帮助，但它对我不起作用。

更仔细地查看 of 的来源`profile`（我假设它与此处大致相同`cProfile`），似乎使用的函数名称`profile`不是来自`func.func_name`，而是来自[`func.func_code.co_name`](http://hg.python.org/cpython/file/2.7/Lib/profile.py#l277)，它是只读的！因此，为 lambda 命名以进行分析可能很难。

# qt - 从 ObServer 发出的选择性 D-BUS 信号（单播信号）

> ID：11019048
> 
> 赞同：3
> 
> 时间：2012-06-13T16:12:15.000
> 
> 标签：qt, observer-pattern, dbus

我有一种情况，我有一个 ObServer 对象和一组客户端。ObServer 和客户端通过 D-BUS (IPC) 连接。ObServer 具有适用于所有客户端的通用接口。但是，有时 ObServer 需要通知客户端一些事件。客户端监听 ObServer 通用接口信号 OnNotify()。

问题：如何从 ObServer 向指定的客户端发出 D-BUS 信号（OnNotify()）（而不是向所有客户端广播）？

ps

Qt D-BUS 用于包装，但欢迎使用任何方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T19:59:09.527

你不能。所有在 DBus 接口上注册了该信号的客户端都会接收信号。

您可以向`OnNotify`信号添加参数，并在客户端中处理它，或者为每个客户端创建单独的信号。但是，如果您希望此组件是动态的（在运行时添加客户端），则必须使用第一种方法（参数 to `OnNotify`）。

编辑：有关信号的更多信息

信号定义如下：

> DBus 中的信号由单个消息组成，由一个进程发送到任意数量的其他进程。也就是说，信号是单向广播。信号可能包含参数（数据负载），但因为它是广播，所以它永远不会有“返回值”。将此与方法调用（参见“调用方法 - 幕后”一节）进行对比，其中方法调用消息具有匹配的方法回复消息。
> 
> 信号的发射者（又名发送者）不知道信号接收者。接收者向总线守护进程注册以根据“匹配规则”接收信号——这些规则通常包括发送者和信号名称。总线守护程序仅将每个信号发送给对该信号表示感兴趣的接收者。

[原始来源](http://dbus.freedesktop.org/doc/dbus-tutorial.html#signalprocedure)。

编辑：根据德米特里的评论更新答案。

过滤 dbus 信号不适用于任何当前可用的绑定（没有检查所有绑定，只有 2 个（dbus-cpp 和 qt），因此任何人都可以跟进）。

但是，可以`DESTINATION`使用 dbus 接口 ( ) 中可用的函数来设置 dbus 消息头中的字段`dbus-message.h`：

```
dbus_bool_t dbus_message_set_destination (DBusMessage  *message, const char *destination) 
```

如果是 QT 绑定，您必须按如下方式修改绑定：在`qdbusmessage.cpp`方法中

```
DBusMessage *QDBusMessagePrivate::toDBusMessage(const QDBusMessage &message, QDBusError *error) 
```

在案例分支上，`DBUS_MESSAGE_TYPE_SIGNAL`您需要调用`q_dbus_message_set_destination`.

此外，目的地必须可从上层获得。最简单的方法是扩展`QDBusMessage`类以保留目的地，然后将其传递到下面的 dbus 层。

如果您能够修改项目中的 QT 绑定，那么您可能会这样做:)。

# javascript - 我自己的“分享”插件

> ID：11019054
> 
> 赞同：-2
> 
> 时间：2012-06-13T16:12:54.003
> 
> 标签：javascript, html

```
textarea onclick="this.focus(); this.select();" rows="1" cols="100" readonly="readonly" style="background: #ffffcc; font-family: Monospace;">
a href="http://127.0.0.1:8000/ajax/share?url=......" onclick="window.open(this.url, 'blabla', 'width=600,height=400 ');">
/文本区域>

```

我想做一些像 Twitter 那样的插件。我的意思是这个最简单的“Tweet this”。这是粘贴的代码，但我现在不知道如何获取当前网站的 url。也许是一个 javascript 但如何？你能修改我的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:20:16.777

您可以从 window.location.href 获取当前页面的 url：

```
<button onclick="window.open('http://myUrl?from='+window.location.href)">
    Click!
</button> 
```

# silverlight - 在 Silverlight 中显示带有超链接的动态文本

> ID：11019055
> 
> 赞同：1
> 
> 时间：2012-06-13T16:12:58.207
> 
> 标签：silverlight, silverlight-toolkit

我有一个应该有点像留言板的应用程序：文本被解析，超链接被“活”并显示。只有它在 Silverlight 中。正因为如此，我不能像他们在这里那样使用 TextBlock [WPF - Making hyperlinks clickable](https://stackoverflow.com/questions/861409/wpf-making-hyperlinks-clickable)，不知何故它在 Silverlight 中有所不同，并且不可能在其中执行带有 Run 的 Hyperlink。

我已经尝试过 RichTextBlock，正如它[在 Silverlight 中的 Wrapping Text and Hyperlinks](https://stackoverflow.com/questions/3793601/wrapping-text-and-hyperlinks-in-silverlight)所说的那样，但我一生都无法弄清楚如何从代码中创建段落和超链接，因为我需要动态填充它。

然后我想我会选择一个不太优雅的解决方案，在 WrapPanel 中涉及 TextBlocks 和 HyperlinkBut​​tons。我添加了一个命名空间引用，就像它[在 Silverlight 4 toolkit 中的 WrapPanel](https://stackoverflow.com/questions/3988744/wrappanel-in-silverlight-4-toolkit)所说的那样，但是当我在 XAML 中引用它时，其中没有 WrapPanel，只有 DataField、DataForm 和 VisualStateManager。

这个[文本区域和超链接？](https://stackoverflow.com/questions/8691783/text-areas-and-hyperlinks)也不起作用，Silverlight RichTextBox 不同，并且缺少 LinkLabel。

也许还有另一种我不知道的解决方案？我保持开放的心态。任何帮助表示赞赏。

# php - 存在用户名或电子邮件时不返回错误

> ID：11019061
> 
> 赞同：2
> 
> 时间：2012-06-13T16:13:34.837
> 
> 标签：php, jquery, codeigniter

我试图弄清楚为什么当我的数据库中与我的用户名或电子邮件地址匹配时它不报告验证错误。

它仍然将此显示为正确的帖子参数。在将焦点移开时，它确实会执行两个不同的发布请求。

注册控制器：

```
public function is_username_available()
{
    if ($this->users_model->is_username_available($this->input->post('username')))
    {
        return false;
    }
    else
    {
        return true;
    }        
}

public function is_email_available()
{
    if ($this->users_model->is_email_available($this->input->post('email_address')))
    {
        return false;
    }
    else
    {
        return true;
    }        
} 
```

注册.js

```
rules: {
        username: {
            minlength: 6,
            maxlength: 12,
            remote: {
                type: 'post',
                url: 'register/is_username_available',
                data: {
                    'username': function() { return $('#username').val(); }
                },
                dataType: 'json'
            }
        },
        email_address: {
            email: true,
            remote: {
                type: 'post',
                url: 'register/is_email_available',
                data: {
                    'email_address': function() { return $("#email_address").val(); }
                },
                dataType: 'json'
            }
        } 
```

用户型号：

```
/**
 * Check if username available for registering
 *
 * @param   string
 * @return  bool
 */
function is_username_available($username)
{
    $this->db->select('username', FALSE);
    $this->db->where('LOWER(username)=', strtolower($username));

    $query = $this->db->get($this->users_table);
    echo $this->db->last_query();
    return $query->num_rows() == 0;
}

/**
 * Check if email available for registering
 *
 * @param   string
 * @return  bool
 */
function is_email_available($email)
{
    $this->db->select('email', FALSE);
    $this->db->where('LOWER(email)=', strtolower($email));

    $query = $this->db->get($this->users_table);
    return $query->num_rows() == 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:31:34.097

我认为 ajax 在服务器端不接受 TRUE 或 FALSE，你应该发送一个字符串告诉 ajax 你必须这样做。例如：

在模型中：

```
function is_username_available($username)
{
    $this->db->select('username', FALSE);
    $this->db->where('LOWER(username)=', strtolower($username));

    $query = $this->db->get($this->users_table);

    if($query->num_rows() > 0)
    {
      // no available
      return FALSE;
    }
    else
    {
      // available
      return TRUE;
    }
} 
```

在控制器中：

```
public function is_username_available()
{
    if (!$this->users_model->is_username_available($this->input->post('username')))
    {
        // no available
        exit('n');
    }
    else
    {
        // available
        exit('y');
    }        
} 
```

在您的库 jquery 中找到一个事件“成功”，并询问如下内容：

```
success: function(data){ 

      if(data == 'y')
      {
        alert('available');
      }
      else
      {
        alert('no available');
      }
} 
```

我认为验证插件的规则是一一起作用的。然后您可以根据第一次咨询发送多个答案，例如，第一条用户消息：exit ('user_y') exit ('user_n') 和电子邮件：exit ('email_y') exit ('email_n' )

并在插件的“成功”处使用如下开关：

```
success: function(data){ 

      switch(data)
      {
        case 'user_y':
              alert('user_msg_yes');
        break;
        case 'user_n':
              alert('user_msg_no');
        break;
        case 'email_y':
              alert('email_msg_yes');
        break;
        case 'email_n':
              alert('email_msg_no');
        break;
      }
} 
```

# php - php.ini 中的 include_path

> ID：11019063
> 
> 赞同：0
> 
> 时间：2012-06-13T16:13:39.080
> 
> 标签：php, pear

我正在尝试使用 PEAR 框架（和 WAMP）发送邮件。

我安装了 PEAR 和包 MAIL，它位于正确的文件夹中。问题在于 php.ini 中的 include_path。

当我检查我的 php.ini (php --ini) 在哪里时，我得到了结果：

> 配置文件 (php.ini) 路径：C:\Windows
> 
> 加载的配置文件：C:\wamp\bin\php\php5.3.13\php.ini
> 
> 在以下位置扫描其他 .ini 文件：
> 
> 解析的其他 .ini 文件：

在 C:\wamp\bin\php\php5.3.13\php.ini 我设置：

```
include_path = ".;C:\wamp\bin\php\php5.3.13\pear" 
```

我重新启动了 WAMP。

单击按钮发送邮件后，出现以下错误：

> 警告：include(Mail.php) [function.include]：无法打开流：第 2 行的 C:\wamp\www\send_mail.php 中没有这样的文件或目录
> 
> 警告：include() [function.include]：无法在第 2 行的 C:\wamp\www\send_mail.php 中打开“Mail.php”以包含 (include_path='.;C:\php\pear')
> 
> 致命错误：在第 45 行的 C:\wamp\www\send_mail.php 中找不到类“邮件”

不知道，为什么 include_path 在这里 '.;C:\php\pear'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:09:11.890

Mike B 告诉我查看您的 phpinfo() 以准确了解正在使用的 ini 文件。该文件在 cli 和 apache 调用之间有所不同（php --ini 具有误导性）。

# powershell - PowerShell：将对象转换为字符串

> ID：11019067
> 
> 赞同：9
> 
> 时间：2012-06-13T16:13:45.110
> 
> 标签：powershell

我们有以 UsersA-B、UsersC-D 等开头的 Exchange 信息存储，然后是一些超出该命名约定的存储。

```
$allIS = Get-MailboxDatabase |
             Where { $_.name -notlike "*Users*" } |
             Select Identity 
```

我将查找当前用户的信息存储，然后尝试对 $allIS 数组进行比较。如果匹配，请执行一些操作。

例如，当我输出 $allIS[0] 的值时，它返回`@{Identity=MSCCR\CEO\CEO}`.

我想将这些转换后的字符串放入不同的数组中，然后进行比较。这将有一个动态的信息存储列表进行比较。但也许这不是最好、最有效的方法。尝试进行这种比较的最佳方法是什么，因为现在我在这里比较苹果和橙子？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T17:29:06.170

如果没有看到第二部分，很难判断是否可以优化......

但是很容易获得一组平面的身份。要么`-ExpandProperty`在选择上使用，要么使用`foreach { $_.Identity }`而不是选择：

```
$allIS = Get-MailboxDatabase | ? { $_.name -notlike "*Users*" } | select -expand Identity
$allIS = Get-MailboxDatabase | ? { $_.Name -notlike '*Users*' | foreach { $_.Identity} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:47:36.380

### 强大的方式

```
$isNames = @()
$allIS = Get-MailboxDatabase | 
    Where { $_.name -notlike "*Users*" } | 
    Select Identity | 
    %{ $isNames += $_.name } 
```

它使用管道将输出传递给`foreach`循环`%`。

### 更程序化的方式

```
$isNames = @()

foreach ($is in $allIS)
{
    $isNames += $is.identity
} 
```

这为您提供了一个仅包含信息存储名称的简单数组，作为字符串而不是对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-20T19:44:44.593

当您尝试使用“属性取消引用运算符”'。对于不是数组类成员的属性，它将改为取消引用数组的每个元素。

```
$allIS = (Get-MailboxDatabase | ? { $_.name -notlike "*Users*" }).Identity 
```

# ios - 苹果的错误响应是否识别无效令牌？

> ID：11019069
> 
> 赞同：3
> 
> 时间：2012-06-13T16:13:51.530
> 
> 标签：ios, apple-push-notifications, devicetoken

我正在尝试从 Apple 获得一些错误响应。认为这可能是检查消息是否已传递到实际 dev_token 的好方法。我在文档中读到了它，它说：

> 使用这种格式，如果 APNs 遇到无法理解的命令，它会在断开连接之前返回错误响应。

资料来源：[Apple 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html)

问题是：如果有效负载大小无效或丢失，我只会收到错误响应，但即使 Apples Feedback-Service 将其列为无效，我也不会收到“无效令牌”错误。我的问题：

错误响应是否仅用于获取有关代码格式的信息/检查有效负载是否有效等？

任何帮助将非常感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:11:45.860

您使用的是真正的 APNS 服务还是沙盒？我的经验是沙盒可以接受任何东西，而真正的服务更加挑剔。

# c++ - 在 C++ 和 Objective-C 中使用字符串指针

> ID：11019072
> 
> 赞同：2
> 
> 时间：2012-06-13T16:14:14.877
> 
> 标签：c++, objective-c, ios

[我在 github](https://github.com/jamesor/TestCase)上有一个示例项目，我在其中为要在 Objective-C 中使用的外部 C++ 库创建了一个 C++ 包装类。

我不明白为什么我返回的指针有时是正确的，有时是错误的。这是示例输出：

```
Test Data = 43343008
In Compress 43343008
Returned Value = 43343008
Casted Value = 43343008

Test Data = 2239023
In Compress 2239023
Returned Value = 2239023
Casted Value = 2239023

Test Data = 29459973
In Compress 29459973
Returned Value = 29459973
Casted Value = l.remote

Test Data = 64019670
In Compress 64019670
Returned Value = 
Casted Value = stem.syslog.master 
```

在上面的输出中，您可以看到按钮的第一次和第二次单击输出了我期望的结果。在其他每一次点击中，返回的值或转换的值都是无效的。我假设这是因为我的指针指向一个我没想到的地址。多次运行应用程序时，任何按钮点击都可能是对的或错的。

我也尝试过使用单个线程，但遇到了类似的结果。

完整的代码在[github](https://github.com/jamesor/TestCase)上，但这里是重要的部分。

**视图控制器.m**

```
#import "ViewController.h"

extern const char * CompressCodeData(const char * strToCompress);

@implementation ViewController

...

// IBAction on the button
- (IBAction)testNow:(id)sender 
{
    [self performSelectorInBackground:@selector(analyze) withObject:nil];
}

- (void)analyze
{
    @synchronized(self) {

        const char *testData = [[NSString stringWithFormat:@"%d", 
                      (int)(arc4random() % 100000000)] UTF8String];
        NSLog(@"Test Data = %s", testData);

        const char *compressed = CompressCodeData(testData);
        NSLog(@"Returned Value = %s", compressed);

        NSString *casted = [NSString stringWithCString:compressed
                                          encoding:NSASCIIStringEncoding];
        NSLog(@"Casted Value = %@\n\n", casted);

    }
}

@end 
```

**SampleWrapper.cpp**

```
#include <iostream>
#include <string.h>
#include <CoreFoundation/CoreFoundation.h>

using namespace std;

extern "C" 
{
    extern void NSLog(CFStringRef format, ...); 

    /**
     * This function simply wraps a library function so that 
     * it can be used in objective-c.
     */
    const char * CompressCodeData(const char * strToCompress) 
    {
        const string s(strToCompress);

        // Omitted call to static method in c++ library
        // to simplify this test case.

        //const char *result = SomeStaticLibraryFunction(s);
        const char *result = s.c_str();

        NSLog(CFSTR("In Compress %s"), result);
        return result;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:57:14.873

您正在返回一个指向已释放对象的指针。

```
const string s(strToCompress);
…
const char *result = s.c_str();

NSLog(CFSTR("In Compress %s"), result);
return result; 
```

`s`函数结束后不存在`CompressCodeData()`，所以指向它的内部存储器的指针是无效的。

* * *

您可以分配一块内存来保存响应，但由调用者来释放它。

```
char *compressed = CompressCodeData(testData);
NSLog(@"Returned Value = %s", compressed);

NSString *casted = [NSString stringWithCString:compressed
                                      encoding:NSASCIIStringEncoding];
free(compressed);
NSLog(@"Casted Value = %@\n\n", casted);

…

const char * CompressCodeData(const char * strToCompress)
…
char *result = strdup(s.c_str()); 
```

另一种解决方案是传入内存来存储数据。

```
char compressed[2048]; // Or whatever!
CompressCodeData(testData, compressed, sizeof(compressed));
NSLog(@"Returned Value = %s", compressed);

NSString *casted = [NSString stringWithCString:compressed
                                      encoding:NSASCIIStringEncoding];
NSLog(@"Casted Value = %@\n\n", casted);

…

void CompressCodeData(const char * strToCompress, char *result, size_t size)
…
s.copy(result, size - 1);
result[s.length() < size ? s.length() : size-1] = '\0'; 
```

# jquery - 删除标签值时出错

> ID：11019073
> 
> 赞同：0
> 
> 时间：2012-06-13T16:14:18.083
> 
> 标签：jquery

```
jQuery('.chk').click(function(){
   for(var k=0; k<2; k++) {
      deleteRow(k);  
   }                       
}); 
```

和函数 deleteRow()

```
function deleteRow(id) {
    var table = document.getElementById("modem_list");
    var rowName = 'row_'+id;
    if (table.rows.namedItem(rowName)) {
        table.deleteRow((table.rows.namedItem(rowName).rowIndex));
    }
}

<table id="modem_list">
   <tr name="row_1">Test 1</tr>
   <tr name="row_2">Test 2</tr>
</table>
<a class="chk" href="">CLICK</a> 
```

当我点击结果不是删除 2 个标签时，如何修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:35:22.477

```
$(function(){

    $('a.chk').click(function(e){
        e.preventDefault();
        $('table#modem_list tr').remove();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:22:30.633

您的整个解决方案可能很短：

```
$('.chk').click(function() {
    $('#modem_list tr').each(function() {
        $(this).remove();
    });
}); 
```

（从我可以从您的问题中阅读/想象的内容来看。）

或者，要仅删除`TR`以您开头的类，`row_`可以使用：

```
$('.chk').click(function() {
    $('#modem_list tr[class^=row_]').each(function() {
        $(this).remove();
    });
}); 
```

较短的变体，没有循环遍历行，也可以工作——但我不确定：

```
$('.chk').click(function() {
    $('#modem_list tr[class^=row_]').remove();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T16:38:36.800

```
You are starting the for loop from 0 and you row id is starting from 1 thats why second one is not removing 
jQuery('.chk').click(function(){
    for(var k=1; k<=2; k++) {
         deleteRow(k);  
    }                       
});

    //  OR you can use another solution
jQuery('.chk').click(function($) {
    $('#modem_list tr').each(function() {
        $(this).remove();
    }); 
```

# loops - 一次循环遍历 n 个对象的集合

> ID：11019075
> 
> 赞同：2
> 
> 时间：2012-06-13T16:14:26.367
> 
> 标签：loops, powershell, powercli

我是一个自学成才的新手程序员，我觉得这是一个非常基本的问题，如果我真的学过计算机科学，我就能回答这个问题：P 在我搜索 intertrons 和 StackOverflow 时，我没有无法找到我正在寻找的答案。所以我希望有人可以放纵我。

我有一个对象集合。我想一次对它们进行五个操作，然后继续进行下一个五个。上下文是重启一堆虚拟机；我被要求错开它们，这样主机就不会因为所有虚拟机同时重新启动而受到猛烈抨击。

我觉得正确的道路是`for i`某种能力的循环，而不是`foreach`. 我也觉得它可能是和的组合，`do-until`但`for i`我无法从我的大脑中筛选出答案。

我可能可以通过从集合中删除对象来做到这一点，但这感觉像是“错误”的做法，即使它会起作用。

我正在使用 Powershell 和 PowerCLI 执行此操作，但我觉得我试图理解的逻辑比依赖任何语言更基本，所以即使你不熟悉 Powershell，我对你的回答。

编辑：根据下面大卫的回答，以下代码似乎是我正在寻找的：

```
$someLetters = @("a","b","c","d","e","f","g","h","i","j","k")

for($i=0; $i -lt $someLetters.length; $i+=5)
{
    Write-Host ("the letter is " + $someLetters[$i] + " and i is " + $i)
    Write-Host ("the letter is " + $someLetters[$i+1] + " and i is " + $i)
    Write-Host ("the letter is " + $someLetters[$i+2] + " and i is " + $i)
    Write-Host ("the letter is " + $someLetters[$i+3] + " and i is " + $i)
    Write-Host ("the letter is " + $someLetters[$i+4] + " and i is " + $i)
    write-host "finished block of five"
} 
```

给出输出：

```
the letter is a and i is 0
the letter is b and i is 0
the letter is c and i is 0
the letter is d and i is 0
the letter is e and i is 0
finished block of five
the letter is f and i is 5
the letter is g and i is 5
the letter is h and i is 5
the letter is i and i is 5
the letter is j and i is 5
finished block of five
the letter is k and i is 10
the letter is  and i is 10
the letter is  and i is 10
the letter is  and i is 10
the letter is  and i is 10
finished block of five 
```

谢谢大卫！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:34:50.313

你没有说你的对象在什么样的容器中。我假设它是一个数组。所以，你可以这样做：

```
for($i=0; $i -lt $objectArray.length; $i+=5)
{
    #do something with $objectArray[$i]
} 
```

# .net - C++/CLI 找不到资源

> ID：11019078
> 
> 赞同：3
> 
> 时间：2012-06-13T16:14:30.680
> 
> 标签：.net, winforms

我的问题类似于我在过去几个小时谷歌搜索后发现的一些问题。但是，我无法让它与我所阅读的内容一起使用，我将不胜感激。我有一个名为（例如）some.thing 的 C++/CLI 项目，位于名为 some.thing 的文件夹中，其中包含一个 Windows 窗体。我将所有类都放在命名空间 some::thing 中。为什么？可能我误解了，但我在某处读到这是标准。无论如何，这不是这里的问题。一切正常，直到我从设计师那里添加资源（背景图像）到表单。它会生成一个运行时异常：System.Resources.MissingManifestResourceException。

消息是*找不到任何适合指定区域性或中性区域性的资源。确保“some.thing.myForm.resources”在编译时被正确嵌入或链接到程序集“some.thing”中，或者所有所需的附属程序集都是可加载的并且是完全签名的*

现在，对于我用谷歌搜索和 stackoverflow 搜索的内容，这并不少见，但提供的解决方案不适用于我的情况，不适用于 C++CLI，或者对于我的新手来说不够清楚。

我尝试更改表单类代码中的行`gcnew System::ComponentModel::ComponentResourceManager(...)`，我搜索默认命名空间的项目设置，我试图查看资源文件的代码，搜索周围的一些属性以定义命名空间......无法解决它。我希望能够在设计器中看到背景图像，不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:11:31.557

在我们的 C++/CLI 项目中为此苦苦挣扎——请参阅我在原始问题下的评论。在运行时，当加载表单时，它正在寻找例如“Namespace1.Form1.Resources”。但是资源文件是 Namespace2.Form1.resources，例如。

我设法通过更改项目中每个构建配置的 EmbeddedResource 元素下的 LogicalName 元素来解决此问题。（卸载项目并在 .vcxproj 文件中进行查找/替换）。我们将其更改为

```
<LogicalName>$(IntDir)$(RootNamespace).%(Filename).resources</LogicalName> 
```

但是，那些 LogicalName 行是罪魁祸首——它们与生成的实际 .resource 文件的名称不匹配。

因此，您的情况可能并不完全相同，但我敢打赌它与您项目文件中的那些 LogicalName 值有关。（每个表单也有 LogicalNamee 覆盖，如果上述方法不起作用，也请检查它们——我们的为空，因此它能够为所有表单使用项目默认的 LogicalName。）

请问2008年到2010年的VS升级是不是有问题？我们的问题从那时开始。

# ruby-on-rails - Rails 3.1 - 在连接模型中编辑属性？

> ID：11019082
> 
> 赞同：0
> 
> 时间：2012-06-13T16:14:47.257
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我很难通过连接模型来编辑 has_many 中的属性。我已经建立了一个非常简单的应用程序来进行试验；食谱、配料和 Recipe_Ingredients（连接）。

任何人都可以帮助完成这项工作吗？事实上，它会从连接模型中提取“数量”，而不是实际成分。

我已经发布了一个任何人都可以下载玩的公共回购：[https ://github.com/EssentialMusic/Recipes](https://github.com/EssentialMusic/Recipes)

型号：

```
class Ingredient < ActiveRecord::Base
  attr_accessible :name  
  has_many :recipe_ingredients, :dependent => :destroy
  has_many :recipes, :through => :recipe_ingredients
end

class Recipe < ActiveRecord::Base
  attr_accessible :author, :description, :name, :recipe_ingredients_attributes, :ingredients_attributes
  has_many :recipe_ingredients, :dependent => :destroy
  has_many :ingredients, :through => :recipe_ingredients
  accepts_nested_attributes_for :ingredients, :reject_if => lambda { |a| a[:name].blank? }, :allow_destroy => :true
  accepts_nested_attributes_for :recipe_ingredients
end

class RecipeIngredient < ActiveRecord::Base
  belongs_to :recipe
  belongs_to :ingredient
  attr_accessible :measure, :qty, :special_instructions
end 
```

表格

```
<%= form_for(@recipe) do |f| %>
  <% if @recipe.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@recipe.errors.count, "error") %> prohibited this recipe from being saved:</h2>

      <ul>
      <% @recipe.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :author %><br />
    <%= f.text_field :author %>
  </div>
  <div class="field">
    <%= f.label :description %><br />
    <%= f.text_area :description %>
  </div>

<div>
    <%= f.fields_for :recipe_ingredients do |ri| %>
    <%= ri.text_field :qty %> - 
        <%= ri.fields_for :ingredients do |i| %>
            <%= i.text_field :name %><br>
        <% end %>   
    <% end %>   
</div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

干杯！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T20:58:03.960

在第二个嵌套的 fields_for 中用 f 替换 ri，如下所示：

```
<%= f.fields_for :recipe_ingredients do |ri| %>
 <%= ri.text_field :qty %> -
      <%= **f**.fields_for :ingredients do |i| %>
         <%= i.text_field :name %><br>
      <% end %>
<% end %> 
```

# javascript - 如何将位置从 Window phone 7 的观察者转换为谷歌地图的位置

> ID：11019084
> 
> 赞同：0
> 
> 时间：2012-06-13T16:14:50.757
> 
> 标签：javascript, windows-phone-7, google-maps

实际上，我正在使用 Windows Phone 7 上的谷歌地图。我正在尝试将 Windows Phone 7 的观察者的位置转换为谷歌地图的位置。与：lat =“47.6818256764486”lng =“-122.064292703125”

**C# 在库 System.Device.Location 中使用观察器**

```
void watcher_PositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
    {

        String lat = "" + e.Position.Location.Latitude;
        String lng = "" + e.Position.Location.Longitude;

        Browser.InvokeScript("Marker_up", lat, lng);
    } 
```

**Javascript**

```
 function Marker_up(lat,lng) {

     var Lat = Number(lat);
     var Lng = Number(lng);   
     var New_lc = new google.maps.LatLng(Lat,Lng);
     marker = new google.maps.Marker({
                position: New_lc,
                map: map
            });
           marker.setmap(map);
           map.setCenter(New_lc);
  } 
```

但它不能。我不知道为什么。请有人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:49:08.567

如果你没有`IsScriptEnabled = true`在浏览器上设置，脚本将不起作用。

[WebBrowser.IsScriptEnabled](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.webbrowser.isscriptenabled%28v=VS.92%29.aspx)

# emacs - Flymake 指定 Makefile 的位置

> ID：11019085
> 
> 赞同：2
> 
> 时间：2012-06-13T16:14:53.630
> 
> 标签：emacs, haxe, flymake

我正在尝试从 Haxe 编译器提供 flymake 输出，但我不知道如何告诉它 make 文件的位置（理想情况下，我会使用 nxml 文件）。到目前为止，我在 Makefile 中有这个：

```
BIN = ./bin
MAIN = com.wunderwafer.Main
SWF = wunderwafer.swf
SWFSETTINGS = -debug -swf-version 10 -swf-header 800:600:31
HFLAGS = -main $(MAIN) $(SWFSETTINGS) -cp ./src -swf $(BIN)/$(SWF)
HC = haxe

default: compile

compile: $(HC) $(HFLAGS)

clean:
    $(RM) -r $(BIN)/*

.PHONY: check-syntax

check-syntax:
    $(HC) $(HFLAGS) 
```

如果我稍后像这样运行它：

```
$ make -k check-syntax 
```

它产生预期的输出。然而，flymake 无法找到 Makefile（或者看起来如此），因为我试图检查的文件位于 src 目录的更深处。

配置flymake的方法是什么让它知道makefile在哪里？（或者，更好的是，只执行一个 shell 命令，因为编译 Haxe 代码的常用方法是使用 *.nxml 设置文件。

**编辑：**

看起来我越来越近了，非常感谢，但是 flymake 正在做一些奇怪的事情，我不明白它到底做了什么，所以，这里是日志：

```
received 65 byte(s) of output from process 967
file /home/wvxvw/projects/wafer/src/com/wunderwafer/map/Battlefield.hx, init=haxe-flymake-init
parsed 'Error : Invalid class name /home/wvxvw/projects/wafer/build.nxml', no line-err-info
file /home/wvxvw/projects/wafer/src/com/wunderwafer/map/Battlefield.hx, init=haxe-flymake-init
process 967 exited with code 1
cleaning up using haxe-flymake-cleanup
deleted file /tmp/flymake-Battlefield-855Cad.hx
Battlefield.hx: 0 error(s), 0 warning(s) in 0.15 second(s)
switched OFF Flymake mode for buffer Battlefield.hx due to fatal status CFGERR, warning Configuration error has occurred while running (haxe /home/wvxvw/projects/wafer/build.nxml) 
```

我试图让它运行的命令如下所示：

```
(defun haxe-flymake-get-cmdline (source base-dir)
  "Gets the cmd line for running a flymake session in a Haxe buffer.
This gets called by flymake itself. The output is a list of two elements:
the command to run, and a list of arguments.  The resulting command is like:

  $ haxe ${project-root}/build.nxml

"
  (message "base-dir %s" (file-name-as-directory base-dir))
  (list *haxe-compiler*
        (list
     (concat (file-name-as-directory base-dir)
         *build-nxml*)))) 
```

打印的消息如下所示：

```
base-dir /home/wvxvw/projects/wafer/ 
```

因此，据我所知，生成的命令应该是：

`haxe /home/wvxvw/projects/wafer/build.nxml`

但是看起来 flymake 要么在参数之前或之后添加了一些东西，这使得 Haxe 编译器生成错误“错误：无效的类名” - 如果有一个额外的参数，编译器会理解为这个错误会给出一个额外的类来编译。但是日志没有显示正在发送的内容......

**编辑2：**

我已经添加：

```
#!/usr/bin/env bash

echo "$@" > /home/wvxvw/projects/wafer/log 
```

并让flymake调用这个脚本而不是编译器，它只传递一个参数，正如我所期望的那样......*叹息*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:24:11.200

这是个好问题。我不知道在flymake中添加新的制作工具“风味”的简单方法。我知道一种方法，它并不简单。这就是我为 php codesniffer 所做的 - 对于任何任意的 make 工具都是类似的。

首先，定义一个安装 fn。

```
(defun fly/phpcs-install ()
  "install flymake stuff for PHP CodeSniffer files."
  (add-to-list
   'flymake-err-line-patterns
   (list fly/phpcs-error-pattern 1 2 3 4))

  (let* ((key "\\.php\\'")
         (phpentry (assoc key flymake-allowed-file-name-masks)))
    (if phpentry
        (setcdr phpentry '(fly/phpcs-init fly/phpcs-cleanup))
      (add-to-list
       'flymake-allowed-file-name-masks
       (list key 'fly/phpcs-init 'fly/phpcs-cleanup))))) 
```

这会在 flymake alist 中安装一个新条目，键入 .php 作为文件扩展名。flymake 列表中的条目基本上将文件扩展名与一对函数相关联，一个用于初始化，一个用于清理。

init fn 只是返回要运行以检查语法的命令。这可以是一个带有适当参数的 shell 命令。对于codesniffer，这个fn看起来像这样：

```
(defun fly/phpcs-init ()
  "initialize flymake for PHP using the PHP CodeSniffer tool."
  (let ((create-temp-f 'fly/phpcs-create-temp-intemp)
        (use-relative-base-dir t)
        (use-relative-source t)
        (get-cmdline-f 'fly/phpcs-get-cmdline)
        args
        temp-source-file-name)
    (setq temp-source-file-name (flymake-init-create-temp-buffer-copy create-temp-f)
          args (flymake-get-syntax-check-program-args
                temp-source-file-name "."
                use-relative-base-dir use-relative-source
                get-cmdline-f))
    args)) 
```

哎呀！我们去兔子洞。get-cmdline fn 如下所示：

```
(defun fly/phpcs-get-cmdline (source base-dir)
  "Gets the cmd line for running a flymake session in a PHP buffer.
This gets called by flymake itself. The output is a list of two elements:
the command to run, and a list of arguments.  The resulting command is like:

  php.exe -d auto_append_file="" -d auto_prepend_file="" phpcs\scripts\phpcs --report=emacs file.php

"
  (list fly/phpcs-phpexe
        (list
         "-d" "auto_append_file=''"
         "-d" "auto_prepend_file=''"
         (concat (file-name-as-directory fly/phpcs-phpcs-dir)
                 "scripts\\phpcs")
         (concat "--standard="  fly/phpcs-standard)
         "--report=emacs"
         "-s" ;; show the fullname of the rule being violated
         (expand-file-name source)))) 
```

[您可以在http://www.emacswiki.org/emacs/flyphpcs.el](http://www.emacswiki.org/emacs/flyphpcs.el)看到完整的 elisp

可能有更简单的方法。我只是不知道。

# c# - .net 图表清除并重新添加

> ID：11019086
> 
> 赞同：19
> 
> 时间：2012-06-13T16:14:57.990
> 
> 标签：c#, asp.net, charts

我有一个图表，我需要清除它以便用不同的值填充它。该图表有 3 个系列，均在 .aspx 页面中定义。

问题是当我打电话时

```
chart.Series.Clear(); 
```

然后重新添加系列，如：

```
chart.Series.Add("SeriesName"); 
```

它不保留 3 个初始系列的任何属性。如何清除值并保留系列属性？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-13T16:16:47.173

这应该有效：

```
foreach(var series in chart.Series) {
    series.Points.Clear();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-10-13T21:40:26.103

这应该工作

```
 chartnameHERE.Series["SeriesNameHERE"].Points.Clear(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-05T20:10:35.400

这实际上将从图表中完全删除系列（不仅仅是从系列中删除点）。

```
while (chart1.Series.Count > 0) { chart1.Series.RemoveAt(0); } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-16T05:37:13.953

我遇到了一种问题（但对于 Windows 窗体应用程序）。那么你能告诉我你什么时候将数据源传递给图表。

我在将数据传递给图表控件时使用了错误的顺序

**第一次我这样做：**

```
chart1.Series["Series1"].XValueType = System.Windows.Forms.DataVisualization.Charting.ChartValueType.Auto;

chart1.DataSource = sqlChartTabel; //sqlChartTable is my DataTable
// Assigning new Data to the charts
chart1.Series.Clear();   // clearing chart series (after the DataTable is assigned with data)
chart1.Series.Add("Violations");
chart1.Series["Series1"].XValueMember = "Month_name";
chart1.Series["Series1"].YValueMembers = "Salary";
chart1.ChartAreas["ChartArea1"].AxisX.Title = "Months";
chart1.ChartAreas["ChartArea1"].AxisY.Title = "Salary";
chart1.DataBind();
chart1.Visible = true; 
```

所以，然后我意识到，我在清除图表之前分配了数据，所以我只是改变了我的声明顺序，它起作用了：

**我的工作代码：**

```
chart1.Series.Clear();   // changed position of clear(before Assigning the datatable)
chart1.Series.Add("Violations");
chart1.Series["Series1"].XValueType = System.Windows.Forms.DataVisualization.Charting.ChartValueType.Auto;
chart1.DataSource = sqlChartTabel;   //sqlChartTable is my DataTable

// Assigning new Data to the charts
chart1.Series["Series1"].XValueMember = "Month_name";
chart1.Series["Series1"].YValueMembers = "Salary";
chart1.ChartAreas["ChartArea1"].AxisX.Title = "Months";
chart1.ChartAreas["ChartArea1"].AxisY.Title = "Salary";
chart1.DataBind();
chart1.Visible = true; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-03T11:10:50.937

这对我有用

```
foreach(var series in chart.Series)
{
    series.Points.Clear();
}
reloadData();
this.chart.DataBind(); 
```

# xml - 使用模板参数作为 xml 指针 (xpaths) 的修饰符

> ID：11019088
> 
> 赞同：0
> 
> 时间：2012-06-13T16:15:18.160
> 
> 标签：xml, xslt, xpath, xsl-fo

我整个上午和昨天下午都在搜索，但仍然找不到解决问题的方法。如果你能帮忙就太好了。

我正在处理一个 xsl-fo 文件，该文件将使用 apache fop 转换为 PDF 格式。我正在尝试使用参数将 xpaths 修改为我的 xml 文件。这是一个比以下示例复杂得多的系统，但我已将其简化为问题的根源。

假设我的 xml 文件如下所示：

```
<sc931>
    <whyoming>
              <train>
                   <miles>98</miles>
                   <time>9888</time>
    </whyoming>
    <georgia>
              <train>
                   <miles>98</miles>
                   <time>9888</time>
    </georgia>
</sc931> 
```

我想做的是使用模板参数来访问这些值，如下所示：

参数声明

```
<xsl:param name="state" select="whyoming"/> 
```

称呼

```
<xsl:value-of select="concat(/sc931/, $state, /train/miles)"/> 
```

但是这个调用不起作用，因为 concat 函数返回一个字符串而不是指向正确节点的指针。使用模板参数修改赋予 value-of 语句的地址的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:37:25.710

在 XSLT 3.0 之前没有动态 XPath 评估，但对于您的简单情况，使用`<xsl:value-of select="/sc931/*[local-name() = $state]/train/miles"/>`.

[编辑]我忽略了您的参数被定义为`<xsl:param name="state" select="whyoming"/>`，您需要将其更改`<xsl:param name="state" select="'whyoming'"/>`为我的建议才能起作用。

# ios - iOS - 根据手机时钟上的时间执行特定代码的程序方法

> ID：11019090
> 
> 赞同：0
> 
> 时间：2012-06-13T16:15:31.640
> 
> 标签：ios, timing

是否可以在 iPhone 的时钟达到特定时间时执行代码。这是否能够在 iPhone 关闭（屏幕变黑）但应用程序仍在运行（用户没有返回主屏幕）后工作。

例如，是否有可能将方法编程为在下午 1:30:15 关闭，与当前时间无关，是否有任何限制取决于手机是否关闭或应用程序是否正在运行的背景？

我在这里找到了一个类似的帖子 How to generate event on a specific time of clock in C#? 但这会根据当前时间生成一个计时器以稍后运行方法，而不是使用与当前时间无关的时钟。

我创造了一种糟糕的方式来做到这一点-

```
{

time_t rawtime;
struct tm * timeinfo;

time ( &rawtime );
timeinfo = localtime ( &rawtime );
NSLog(@"TESTSTART - TEST START");
// Check
if(timeinfo->tm_hour == 12 && timeinfo->tm_min == 01 && timeinfo->tm_sec == 48)
{
    NSLog(@"Run Method");

    printf("the time is 12:01:48");
}    else {
    NSLog(@"ELSE");

    [self syncTest];
}
} 
```

这将在 12:1:48 运行一个方法，但这很可能不是一种可接受的方式。有谁知道任何更好的方法来做到这一点以及这种方式会给cpu带来多少压力？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:56:33.413

使用`NSTimer`并设置`fireDate`您希望计时器触发的任何日期，然后捕获它已触发的通知并执行您的任务。

# hibernate - Hibernate 映射 SQL 视图

> ID：11019094
> 
> 赞同：-2
> 
> 时间：2012-06-13T16:15:42.223
> 
> 标签：hibernate, view, hql

```
2012-06-13 18:09:47,777 ERROR [main] SchemaUpdate - Unsuccessful: 
alter table *************.******** add index FKBCA22C66AF04751F(xxxxxxx, zzzzzz),
add constraint FKBCA22C66AF04751F foreign key (xxxxxxxx, zzzzzzz) references
***********.************* (categoria_id, azienda_id)

2012-06-13 18:09:47,779 ERROR [main] SchemaUpdate - '************.********' 
is not BASE TABLE 
```

我的架构中有一个视图，但我不正确理解如何在我的项目中将其与休眠进行映射

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:28:22.877

根据日志，您似乎尝试通过[SchemaUpdate](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/tool/hbm2ddl/SchemaUpdate.html)更新数据库视图的定义。这很可能不是您想要做的。

如何避免这种情况取决于您如何配置 Hibernate。如果是通过 hibernate.cfg.xml，您应该删除以下内容（或更改更新以验证）：

```
<property name="hbm2ddl.auto">update</property> 
```

# java - Java 从具有许多条件的列表中搜索子列表

> ID：11019095
> 
> 赞同：2
> 
> 时间：2012-06-13T16:15:46.717
> 
> 标签：java, list, search

我想从餐厅列表中创建搜索方法。用户有一个 GUI 表单并且只填写他想要的字段。我做了一个方法 meetCriteria 来检查这家餐厅是否存在。它有效，但并非在所有情况下都有效。

```
public class RestaurantList {
    private ArrayList<Restaurant> _restaurants = new ArrayList<Restaurant>();
        RestaurantList selRest;

        RestaurantList searchRestaurant(String name, String area, String phone, String category)
                {
                    selRest = new RestaurantList();
                    for (int i=0; i< _restaurants.size(); i++)
                    {
                        if(_restaurants.get(i).meetsCriteria(name, area, phone, category))
                        {
                            selRest.addRestaurant(_restaurants.get(i));
                        }

                    }
                    return this.selRest;
                }

public class Controller {

    //this is list with all Restaurants
    static RestaurantList restList = new RestaurantList();
    //this is list with the result of the search.

    public static RestaurantList selList; // selectedList

    public void addRestaurant (Restaurant rest)
    {
        restList.addRestaurant(rest);
    }

    public  void searchCriteria(String name, String area, String phone, String category)
    {

        int size = restList.getRestaurants().size();
        for(int i =0; i<size; i++)
            selList = restList.searchRestaurant(name, area, phone, category);

    }  
}

public class Restaurant {
        private String _name;
    private String _address;
    private String _phoneNum;
        private Area _area;

        public boolean meetsCriteria(String name, String area, String phone, String category)
        {
            if( this._name.equals(name) && this._area.getArea().equals(area) && this._phoneNum.equals(phone) && this._category.equals(category) )
            {
                return true;

            }
            if ( name.equals("") && area.equals(this._area.getArea()) && phone.equals("") && category.equals("") )
            {
                return true;

            }
            if ( name.equals("") && area.equals(this._area.getArea()) && phone.equals(this._phoneNum) && category.equals("") )
            {
                return true;

            }
            if (name.equals("") && area.equals(this._area.getArea()) && phone.equals("") && category.equals(this._category) )
            {
               return true; 

            }
            if ( area.equals(this._area.getArea()) && phone.equals("") && category.equals("") )
            {
                int index = this._name.indexOf(name);
                if (index != -1)
                {
                    return true; 
                }else return false;

            }
            if (area.equals(this._area) && category.equals(this._category) )
            {
                return true;
            }
            else
            {
            return false;
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:27:52.913

首先为“meetsCriteria”方法编写单元测试，以便您可以轻松查看哪些条件通过，哪些条件失败。

例如：

```
assertTrue(myRestaurant.meetsCriteria("nandos", "new york", "0124536", "tasty")); 
```

Ps.，我可能会将您的“searchRestaurant”更改为如下内容：

```
List<Restaurant> searchRestaurant(List<Restaurant> allRestaurants, String name, String area, String phone, String category) {
    List<Restaurant> matches = new ArrayList<Restaurant>();
    for (Restaurant restaurant : allRestaurants) {
        if (restaurant.meetsCriteria(name, area, phone, category)) {
            matches.addRestaurant(allRestaurants.get(i));
        }
    }
    return matches;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:32:09.357

您的 meetCriteria() 方法似乎有点复杂，并且遗漏了许多指定或未指定的标准组合。由于您有 4 个参数并且可以指定或不指定每个参数，因此您有 16 (2^4) 种可能的不同情况。显然，您的代码不包含那么多。对于您添加到此 Restaurant 类的每个字段，可能的案例数量会翻倍。您必须找到一种方法来避免这种组合爆炸，确保您只需要为每个字段添加一个测试。

我可以建议你尝试这种方式：

```
public class Restaurant {
    private String _name;
    private String _address;
    private String _phoneNum;
    private Area _area;

    public boolean meetsCriteria(String name, String area, String phone, String category)
    {
        if ( !name.equals("") && !name.equals(this._name) && this._name.indexOf(name) < 0){
            // name has been specified and does not match
            return false;
        }

        if(!areas.equals("") && this._aread.getArea().equals(area)){
            // area has been specified and does not match
            return false;
        }

        // ... snip ...
        // do the same kind of thing for phone and category
        // ... snip ...

        // At this point, all the criteria that have been specified by the user match,
        // and all the criteria that haven't been specified have been ignored.
        return true;
    }
} 
```

您可能可以在一个巨大的 if() 语句中完成所有这些操作，但这可能不太可读。

或者更好的是，您可以将每个字段的匹配逻辑提取到它们自己的方法中，如下所示：

```
public class Restaurant {
    private String _name;
    private String _address;
    private String _phoneNum;
    private Area _area;

    public boolean meetsCriteria(String name, String area, String phone, String category)
    {
        return matchesName(name) && matchesArea(area) && matchedPhone(phone) && matchesCategory(category);
    }

    private boolean matchesName(String name){
        return name.equals("") || name.equals(this._name) || this._name.indexOf(name) >= 0;
    }

    private boolean matchesArea(String area) {
        return areas.equals("") || this._aread.getArea().equals(area);
    }

    // create the missing methods yourself.
} 
```

# c# - 隐式 AsQueryable

> ID：11019100
> 
> 赞同：1
> 
> 时间：2012-06-13T16:16:07.573
> 
> 标签：c#, linq, entity-framework, linq-to-entities

以下 linq2entities 代码似乎调用了 FirstOrDefault 扩展的 IEnumerable 版本，因为 PersonH​​istories 是一个 ICollection。然而，在运行时，它实际上调用了 IQueryable 版本。

```
var test = db.Persons.Where(d => d.PersonKey == 4)
        .Select(f => f.PersonHistories.FirstOrDefault()); 
```

我遇到的问题是我使用的自定义查询提供程序不执行此自动转换，并且我收到错误“...ICollection 不能用于 IQueryable 类型的参数”。因此需要显式调用 AsQueryable 来解决这个问题，但是对于复杂的查询，它变得非常多余并且感觉不是很干燥：

```
db.Persons.Where(d => d.PersonKey == 4)
        .Select(f => f.PersonHistories.AsQueryable().FirstOrDefault()); 
```

我已经在框架参考源中挖掘，试图找到 Linq 2 Entities 访问者/提供者的东西，但没有运气（也许不是任何开放参考源的一部分）。 **基础提供者如何实现对 AsQueryable 的隐式使用？**

* * *

我明白这些被翻译成表达式树。我明白 Enumerable.FirstOrDefault 被提供商替换为 Queryable.FirstOrDefault 。这就是问题的前提。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:21:52.887

> 基础提供者如何实现对 AsQueryable 的隐式使用？

他们没有。您的代码根本没有*真正*执行`FirstOrDefault()`。它构建了一个表示调用的*表达式树*，但这不是直接执行的。查询提供者看到，计算出它`f.PersonHistories`实际上是基于数据库中的实体，并适当地转换查询。

# php - 关于 PHP 类中的数据库连接的建议

> ID：11019103
> 
> 赞同：0
> 
> 时间：2012-06-13T16:16:17.353
> 
> 标签：php, database, oop, class

我正在玩 OOP 编程，并且遇到了我可以使用建议的障碍。

我有嵌套类的情况。我有一个“公司”类，其中包含一个名为 people 的数组。该数组包含“Person”类的许多实例。

“公司”和“个人”的数据都存储在数据库中，相关类在需要时从该数据库中检索信息。

我的问题很简单：“我什么时候连接到数据库？” 我是否：- a) 首先在我的 PHP 页面中连接，然后将连接传递给“公司”实例以供其使用。b) 将用户名、密码等直接放入“公司”类并在那里连接。

我原以为后者会创建到数据库的多个连接——每个“公司”实例一个——所以答案可能是“A”。但是，如果我要将课程传给另一个开发人员（这只是一个学习练习，所以我不打算这样做），他将不得不自己连接到数据库，并且不允许我的课程为他做.

无论哪种情况，连接会自动传递给“Person”类的每个实例，还是每次创建新实例时都必须传递连接？

我对此进行了一些研究，我认为答案是“A”（连接到我的 PHP 页面中的数据库，并将连接传递给 Company 类的每个实例），但只是认为我应该在得到之前仔细检查太远。

感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:37:49.870

您的解决方案 A）对我来说听起来很熟悉。这样，您只需将数据库连接传递给对象或维护一个全局注册表以将连接对象（例如 PDO）存储到其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:38:05.647

我认为你在正确的轨道上。

您所描述的称为[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)，使用它通常是一个好主意。

当您处理更复杂的项目时，完全抽象数据检索可能是一个好主意。创建一个界面，即“PersonFinder”或“CompanyFinder”，它只处理其相关记录的查找和检索。该接口的具体实现可能包括数据库查找、CSV 文件查找，甚至是某种基于 Web 的服务查找。创建时将您的 Finder 传递给您的 Company 或 Person 对象。

这样，您可以轻松更改查找记录的方式，而无需更改处理它们的代码。

# javascript - javascript switch/case：类型比较？

> ID：11019104
> 
> 赞同：9
> 
> 时间：2012-06-13T16:16:30.943
> 
> 标签：javascript

> **可能重复：**
> [在 Javascript switch 语句中假设严格比较是否安全？](https://stackoverflow.com/questions/6989902/is-it-safe-to-assume-strict-comparison-in-a-javascript-switch-statement)

javascript 中的 switch/case 语句是比较类型还是只比较值？

换句话说，当我有以下代码时：

```
switch (variable)
{
    case "0": [...] break;
    case "1": [...] break;
    default: [...] break;
} 
```

是否等同于

```
if ( variable == "0" )
{
    [...]
}
else if ( variable == "1" )
{
    [...]
}
else
{
    [...]
} 
```

或者

```
if ( variable === "0" )
{
    [...]
}
else if ( variable === "1" )
{
    [...]
}
else
{
    [...]
} 
```

编辑：有没有办法一次强制比较值和类型？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T16:21:45.030

是的，类型是比较的。

> 如果输入等于 === 运算符定义的子句选择器，则将 found 设置为 true。

[ECMA-262](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)，第 95 页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:19:51.520

它也检查类型，

例子：

```
var x = false;

switch (x) {
case "":
    alert('x'); /// Not happening
    break;
case false:
    alert('y');  // happen
    break;
}​ 
```

[**现场演示**](http://jsfiddle.net/y6cc3/1)

正如规范所说：

> 如果输入等于 === 运算符定义的子句选择器，则...

# c - wait() 和 exit() 与父子进程

> ID：11019105
> 
> 赞同：-3
> 
> 时间：2012-06-13T16:16:32.427
> 
> 标签：c, fork, wait, exit

代码中已经发生了分叉：

```
if (pid == 0) {
    printf("I am child PID %d\n", getpid());
    exit(EXIT_SUCCESS);
} else {
    pid_t child;
    int status;
    //need wait() function that gets child pid and exit status
    printf("Child PID %d terminated with return status %d\n", child, status);
} 
```

正如代码中所评论的，我需要一个适当的等待函数来等待孩子结束并获取孩子的 PID 和由此产生的退出状态代码。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:19:06.147

您可以使用[`wait()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/wait.html), 或[`waitpid()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/waitpid.html)（实际上是同一页）。

或者，如果您使用的是 BSD ，，，`wait3()`或`wait4()`（但不是，AFAIK，`wait2()`）。

# spss - 签名。SPSS 19.0 中的方差分析和模型汇总表中缺少值

> ID：11019111
> 
> 赞同：1
> 
> 时间：2012-06-13T16:17:00.740
> 
> 标签：spss

我正在使用 SPSS Statistics 19.0 并为 DESHARNAIS 数据集运行回归分析（输入方法）。

问题是在结果中出现的方差分析表中，F 和 Sig 没有任何值！！此外，在模型汇总表中，Sig F. Change 也没有价值。问题是什么？使用其他数据集（如 COCOMO81、NASA93），我可以获得这些数据集的值。

请帮我

# javascript - Mediaelement.js load() 和 play() 问题

> ID：11019112
> 
> 赞同：1
> 
> 时间：2012-06-13T16:17:03.123
> 
> 标签：javascript, django, html5-video, html5-audio, mediaelement.js

我在我的网站上使用[mediaelementplayer](http://mediaelementjs.com/)播放来自 youtube 的一些视频。我已经编写了自己的播放列表，我可以在其中单击播放列表中的任何曲目，播放器将自动开始播放该曲目。

以下是代码的一些相关部分：

**初始化**：

```
var videoplayer = new MediaElementPlayer("#videoplayer",
{
defaultVideoWidth: 480,
defaultVideoHeight: 270,
videoWidth: -1,
videoHeight: -1,
audioWidth: 960,
audioHeight: 30,
startVolume: 0.8,
loop: false,
enableAutosize: true,
features: ['playpause','progress','current','duration','tracks','volume'],
success: function(mediaElement,domObject) {
  mediaElement.addEventListener('ended', function(e) {
//Next song.
playTitle((currentIndex<playlist.length-1)?currentIndex+1:0);
  }, false);
},
startLanguage: '',
translations: [],
translationSelector: false,
googleApiKey: '' }); 
```

这是我将曲目从当前曲目更改为下一个曲目的部分：

```
function playTitle(url){
videoplayer.pause();
videoplayer.setSrc(mejs.Utility.absolutizeUrl(url));
videoplayer.load();
videoplayer.play();
} 
```

问题是，下一首曲目没有加载。当前曲目暂停，*并*显示下一曲目的长度，但不开始播放。

这是有趣的部分：如果我在 chrome 控制台中键入相同的步骤，它会按预期完美运行。当前曲目被暂停，下一首被加载，并在进入`videoplayer.play();`时开始播放。

我猜这是某种延迟问题，在此期间某些事件被触发。我无法弄清楚是哪一个，以及如何捕获它！

# php - 我可以使用 DOMXPath 在 Li 类中提取图像源吗？

> ID：11019115
> 
> 赞同：0
> 
> 时间：2012-06-13T16:17:09.733
> 
> 标签：php, dom

> **可能重复：**
> [使用 xpath 选择 css 类](https://stackoverflow.com/questions/8808921/selecting-a-css-class-with-xpath)

我正在尝试提取像这样的 html 中所有图像的源

```
 <li class="carousel_item">
    <img src="http://www.xxxx.com/1fc1c1c2db5852e08ffcff38.jpg" 
                        width="200" 
                        height="200" 

                        style="margin-bottom:1px" 
                        class="image_error" /> 
                    <span class="image_error" title="jpg"></span> 
                    <span class="image_error" title="2.jpg"></span> 
                </li> 
```

当我使用以下命令时，我会获取文档中的所有图像

```
 $nodelist = $xpath->query( "//img/@src" );
   foreach ($nodelist as $n){
    echo  $n->nodeValue."<br>";
 } 
```

但我只想要 class="carousel_item" 中列出的项目

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:22:47.087

当然，只需`<li>`在查询中包含 及其类属性。您只需要将 xpath 字符串更改为：

```
$nodelist = $xpath->query( "//li[@class='carousel_item']/img/@src" ); 
```

[演示](http://codepad.viper-7.com/uyOy7Z)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:28:10.093

```
$nodelist = $xpath->query('//li[contains(@class, "carousel_item")]/img/@src'); 
```

# sharepoint - 通过电子邮件将文档提交到 sharepoint

> ID：11019117
> 
> 赞同：0
> 
> 时间：2012-06-13T16:17:19.717
> 
> 标签：sharepoint, workflow

从 SharePoint 专家那里，我想知道 SharePoint 2010 中是否可以进行以下操作：

我们可以通过电子邮件将离线表格（word/excel 格式的文档）发送到 SharePoint 服务器，以便它进入文档管理系统并进行审批工作流程。仅具有电子邮件访问权限且无法访问 SharePoint 门户的用户可以使用此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:40:35.407

是的，这是 SharePoint 2010 中的内置功能。您必须在管理中心启用它。然而，这不是一项简单的任务。服务器上需要进行很多配置。文档在[这里](http://technet.microsoft.com/en-us/library/cc262947.aspx)。

# android - 无法实例化活动 ComponentInfo ... java.lang.NullPointerException

> ID：11019119
> 
> 赞同：4
> 
> 时间：2012-06-13T16:17:41.157
> 
> 标签：android, android-activity

我的应用程序中出现错误“无法实例化活动 ComponentInfo”。我已经在 AndroidManifest.xml 中声明了 Activity，但我仍然收到错误消息。我不知道那是什么。有人可以帮忙吗？

谢谢

错误：

```
 FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{br.com.controladoratividades/br.com.controladoratividades.activities.NovaAtividadeActivity}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
at android.app.ActivityThread.access$2300(ActivityThread.java:125)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at android.content.ContextWrapper.getResources(ContextWrapper.java:80)
at android.content.Context.getString(Context.java:182)
at br.com.controladoratividades.activities.NovaAtividadeActivity.<init>(NovaAtividadeActivity.java:15)
at java.lang.Class.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1429)
at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
... 11 more 
```

我的 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="br.com.controladoratividades"
    android:versionCode="1"
    android:versionName="1.0" >

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".activities.ControladorAtividadesActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".activities.NovaAtividadeActivity"
            android:label="@string/nova_atividade" >            
        </activity>

           <activity
            android:name=".activities.PlanejadorActivity"
            android:label="@string/novo_plano" >            
        </activity>         

    </application>

    <uses-sdk android:minSdkVersion="7" />

</manifest> 
```

活动：

```
package br.com.controladoratividades.activities;

import br.com.controladoratividades.R;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;

public class NovaAtividadeActivity extends Activity {

    private String[] DIAS = new String[] {getString(R.string.domingo), 
            getString(R.string.segunda),
            getString(R.string.terca),
            getString(R.string.quarta),
            getString(R.string.quinta),
            getString(R.string.sexta),
            getString(R.string.sabado)};
    protected boolean[] DIAS_SELECIONADOS =  new boolean[ DIAS.length ];

    static final int DIAS_DIALOG_ID = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.nova_atividade);

        Button btAlterarDias = (Button)findViewById(R.id.btSalvarPlano);
        btAlterarDias.setOnClickListener(new AlterarDiasClickHandler());

        for (int i = 1;  i < DIAS_SELECIONADOS.length; i++) {
            DIAS_SELECIONADOS[i] = true;
        }
    }

    public class AlterarDiasClickHandler implements View.OnClickListener{

        @Override
        public void onClick(View v) {
            showDialog(DIAS_DIALOG_ID);

        }       
    }

    @Override
    protected Dialog onCreateDialog( int id ) 
    {
        return 
        new AlertDialog.Builder( this )
            .setTitle( "Planets" )
            .setMultiChoiceItems( 
                    DIAS,
                    DIAS_SELECIONADOS, 
                    new DialogSelectionClickHandler() )
            .setPositiveButton( "OK", new DialogButtonClickHandler() )
            .create();
    }

    public class DialogSelectionClickHandler implements DialogInterface.OnMultiChoiceClickListener
    {
        public void onClick( DialogInterface dialog, int clicked, boolean selected )
        {
            Log.i( "ME", DIAS[ clicked ] + " selected: " + selected );
        }
    }

    public class DialogButtonClickHandler implements DialogInterface.OnClickListener
    {
        public void onClick( DialogInterface dialog, int clicked )
        {
            switch( clicked )
            {
                case DialogInterface.BUTTON_POSITIVE:
                    //printSelectedPlanets();
                    break;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T16:19:31.113

我们没有任何代码可以确认，但该错误似乎表明您正在尝试`getString`从`NovaAtividadeActivity`的构造函数中使用。An`Activity`在调用之前不会创建`onCreate`，因此您必须将代码从构造函数移动到该函数。

**更新：**现在您添加了活动的代码，我们可以看到您正在调用`getString`初始化成员`DIAS`，这将发生在类的构造函数中。相反，将初始化移动`DIAS`到`onCreate`。

# python - 使用 Pydev 和 RSE 服务器在远程 Linux 机器上定义远程解释器

> ID：11019120
> 
> 赞同：18
> 
> 时间：2012-06-13T16:17:42.690
> 
> 标签：python, eclipse, virtualenv, pydev

我有一个 Windows 盒子和一个 Linux 红帽盒子。

Eclipse 安装在 Windows 上，遵循此 Eclipse[页面](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.rse.doc.user/gettingstarted/g1installing.html)上给出的说明。我设法建立了一个在 Linux 机器上运行的 RSE 服务器；我还可以在远程机器上创建一个项目。

实际上我在 Linux 上使用虚拟环境，我想在开发时选择它们。

有没有办法为 PyDev 或 Django 项目定义**远程解释器？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-16T03:02:53.393

我曾经在Ubuntu 虚拟机中使用**远程 python 解释器遇到过同样的问题。**我想你也应该能够通过`ssh`你的情况进行连接。

虽然 Pycharm 可以有远程解释器（即使是使用[Vagrant](http://www.vagrantup.com)的虚拟机），但像我这样的一些人更喜欢像[Sublime Text 3](http://www.sublimetext.com/3)这样的编辑器，即，不是 IDE。在那里，您可以指定主机内任何解释器的路径。我猜 Pydev 还允许在主机内指定一个 python 解释器。

我能找到使用远程解释器的最简单方法（但可能不是最好的方法）是在我的主机中安装虚拟机的环境文件夹（python 可执行文件和模块所在的位置）。因此，您可以执行以下操作：

1.  **在虚拟机**（guest）中——>在任何你想要的路径中创建一个**虚拟环境**，例如，`~/myGuestEnvs/testEnv/`. 您可以使用[`virtualenv`](https://virtualenv.readthedocs.org/en/latest/)之前安装的[`pip`](https://pypi.python.org/pypi/pip).

2.  **在您的主机**中--> 像这样在您的主机中安装[`win-sshfs`](https://code.google.com/p/win-sshfs/)和挂载虚拟机的对应文件夹`~/myGuestEnvs/testEnv/`--> `~/myHostMountedFolder/`。如果我理解得很好，您是从 Windows 编码并在 Linux 上运行代码。我必须承认，`ssh`在 Windows 上挂载磁盘并不是最简单的方法，但它仍然是可能的！您可以通过其他方式查看[此 SoF 问题](https://stackoverflow.com/questions/443732/how-do-i-mount-a-remote-linux-folder-in-windows-through-ssh)。

3.  **始终在您的主机中**--> 将您的 python 解释器指向已安装的文件夹：`python_interpreter`--> `~/myHostMountedFolder/bin/python`。

**小心**，如果您只挂载/指向`bin`环境的文件夹，python 可执行文件所在的位置，您将丢失所有*代码完成*、*转到定义*... IDE 的可用性，因为它无法找到您导入的模块.

我应该补充一点，如果虚拟机关闭，那么 Pydev 将无法使用 python_interpreter，因为挂载的文件夹将为空。每次编码时，都必须启动虚拟机，如果没有，则可能会使用默认的主机 python 解释器和主机 python 包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-22T10:07:27.880

Pycharm IDE 支持从 Remote Interpreter 运行您的项目/程序，还支持部署到远程服务器（作为**Pro 版本**的一部分）。

Pycharm 也支持 Git/Vagrant/GoogleApp Engine。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-28T13:56:37.273

我设法以这种方式工作的唯一 Python 产品（例如 Eclipse 调试 Java 中的远程代码）是（商业的，专有的）WingIDE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-02T09:53:43.457

我设法通过执行以下操作来实现这一目标：

1）创建一个python venv

```
python3 -m venv /home/me/venv 
```

2) 通过转到 Window->Preferences->PyDev_Interpreters->Python Interpreter-> Browse for python/pypy 将 pydev 解释器设置为 venv

3) 如果需要，备份 python 可执行文件：

```
mv /home/me/venv/bin/python3 /home/me/venv/bin/python3.bkp 
```

4）创建一个新的同名python可执行文件：

```
nano /home/me/venv/bin/python3 
```

5）粘贴以下内容：

```
#!/bin/bash

remote_username=me
remote_interpreter=python3
remote_hostname=10.0.0.1

file_path=(${2//$remote_hostname/ })

ssh $remote_username@$remote_hostname "$remote_interpreter $1 ${file_path[1]}" 
```

6) 更改 remote_username、remote_interpreter 和 remote_hostname 以匹配您的配置。

享受 ！

# c# - 如何向网站发送回传？

> ID：11019121
> 
> 赞同：0
> 
> 时间：2012-06-13T16:17:44.023
> 
> 标签：c#, .net, web-scraping

我正在尝试从网站上抓取此网格：

显然这会很困难，因为网格是分页的。使用萤火虫，将鼠标悬停在其中一个数字上会给我这个 javascript：

```
"javascript:__doPostBack('ctl00$ctl00$ctl00$CMSGMainContentPlaceHolder$ToolContentPlaceHolder$MCDContentPlaceHolder$ncdControl1$ncdGridView','Page$2')" 
```

无论如何我可以触发回发，并取回 HTML 吗？

编辑：网格位于更新面板中，因此当您循环浏览分页时 url 不会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:47:36.847

您应该能够执行以下操作：

```
ie.Link(Find.ByUrl("javascript:__doPostBack('GridView1','Select$0')")).Click(); 
```

也许您将不得不跳过[一些障碍来获得](https://stackoverflow.com/questions/9727963/finding-the-child-of-a-parents-sibling-element-with-watin)控件的正确 ID。

# java - 如果我用java编程，我应该下载什么Eclipse？

> ID：11019126
> 
> 赞同：9
> 
> 时间：2012-06-13T16:18:06.880
> 
> 标签：java, eclipse

在[Eclipse 站点上，有几个 Eclipse 下载](http://eclipse.org/downloads/)，我应该选择哪一个？

这 -[面向 Java EE 开发人员的 Eclipse IDE](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/indigosr2)

这 - [Eclipse Classic 3.7.2](http://www.eclipse.org/downloads/packages/eclipse-classic-372/indigosr2)

或者这个 -[面向 Java 开发人员的 Eclipse IDE](http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/indigosr2)

现在我正在编写常规 Java 应用程序、2d 图形（awt、graphics2d 等）以及未来的 JSP。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T16:21:04.900

对于一般的 Java 编程，Eclipse Classic 是合适的。

如果你想做 Web 开发，那么我建议使用适合 JSP 的 Java EE 变体（它还包含 Classic 变体所做的一切）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T16:27:26.037

现在选择“面向 Java 开发人员的 Eclipse IDE”。除了 JSP 之外，它什么都做。当您到达您想要处理 JSP 的阶段时 - 您可以升级您的 Eclipse 并添加 EE 功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T16:23:51.113

任何软件包都将执行“常规 java 程序”和“2d”内容。“3d”东西需要额外的库，可以添加到任何产品中；但是，使用 Java EE 产品开发“jsp”内容会容易得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-06T13:48:24.537

我会建议您使用第二个选项，即适用于 Java EE 开发人员的 Eclipse IDE，因为如果您将来想要开发基于 Web 的应用程序，那么它将很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T16:21:08.423

听起来你将来会做基于网络的工作。推荐EE版（企业版）

# axapta - 获取系统 Dynamics AX 2012 上的所有地址

> ID：11019127
> 
> 赞同：1
> 
> 时间：2012-06-13T16:18:20.017
> 
> 标签：axapta, x++, dynamics-ax-2012

**问题：**

我想知道如何在查询中获取系统上的所有地址，包括（客户、供应商、银行和税务机关），并将其放在带有列（*名称*、*地址*）的视图上。因此，它将是缔约方和非缔约方实体。

**我试图做的事情：**

我使用表格概念为各方找出问题：

![位置数据模型的一部分](../Images/04f3c854cfbb842b400ee3f07435efe7.png)

**LogisticsPostalAddress** - 表包含系统中可能与各种实体相关联的地址。是关于地址的主要信息在哪里，其余的似乎是这些地址的额外描述。

CustTable和 VendTable 对**DirPartyTable****有**一个 FK 。**BankAccountTable**和**TaxAuthorityAddress**直接与**LogisticsLocation**有关系，后者与LogisticsPostalAddress**在**关系 Location_FK 处有关系。

 ********现在的问题是如何构建从客户、银行账户、供应商和税务机关获取地址的*查询*，并将其放在具有 (name,address) 对的视图中？**

*已编辑*

我找到了一种使用方法获取所有地址的方法，但不使用查询，效率不高，但对于我想要的已经足够了：

1）创建一个表：`AllAddresses`例如：带有字段：*名称，地址*

2）创建工作：

```
static void GettingAllAddresses(Args _args)
{
    CustTable custTable;
    VendTable vendTable;
    TaxAuthorityAddress taxAuthorityAddress;

    LogisticsPostalAddress logisticsPostalAddress;
    AllAddresses allAddresses;

    ;

    while select * from custTable
    {
        allAddresses.Address = custTable.address();
        allAddresses.Name = custTable.name();
        allAddresses.CustAccount = custTable.AccountNum;
        allAddresses.doInsert();
    }

    //Getting all vendors
    while select * from vendTable
    {

        allAddresses.Address = vendTable.address();
        allAddresses.Name = vendTable.name();
        allAddresses.doInsert();
    }

    //Getting all tax authorities addresses
    while select * from taxAuthorityAddress
    {

        allAddresses.Address = TaxAuthorityAddress::address(taxAuthorityAddress.TaxAuthority);
        allAddresses.Name = taxAuthorityAddress.Name;
        allAddresses.doInsert();
    }

    //Getting all bank addresses
    while select * from bankAccountTable
    {
        logisticsPostalAddress = LogisticsLocationEntity::location2PostalAddress(bankAccountTable.Location);
        allAddresses.Address = logisticsPostalAddress.Address;
        allAddresses.Name = bankAccountTable.Name;
        allAddresses.doInsert();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:07:46.203

看看视图`LogisticsEntityPostalAddressView`是如何构建的，它可能已经提供了您需要的信息。如果 table 中的`Description`字段`LogisticsLocation`不够好，而您确实需要 table 中的`Name`字段，`BankAccountTable`则需要构建一个类似的视图。

您可以看到 view 使用了 view `LogisticsEntityLocationView`，它有一个联合查询，可以从多个表中提取数据。您可以构建一个类似的视图来从、和中提取`Name`字段。`BankAccountTable``DirPartyTable``TaxAuthorityAddress`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-28T16:59:36.080

从您的数据库图中可以看出，全局地址簿的关系非常复杂（而且在许多地方确实不直观）。您似乎没有解决的一件事是您获得的 LogisticsPostalAddress 是否处于活动状态（由 ValidFrom 和 ValidTo 日期确定）。AX 的代码保留了 LogisticsPostalAddress 中正在更改的地址的当前状态，只需在更改提交前将 ValidTo 设置为 2 秒，并创建一个新的 LogisticsPostalAddress 记录，并将 ValidTo 设置为提交日期，因此它将处于活动状态。如果您没有对地址进行很多更改，那么您可能不会有太大问题，但如果有很多更改，您可能会得到很多不需要的地址记录。这里有一篇文章[http://hyperdaptive.com/2016/04/320/](http://hyperdaptive.com/2016/04/320/)其中包含一些可能会有所帮助的细节 - 它还有一些 X++ 和 SQL 代码，如果您碰巧仍在从事此工作，这些代码可能会非常有帮助。祝你好运。******

# php - 如何制作一个计数计时器，为 php/html 的每个人显示相同的数字

> ID：11019130
> 
> 赞同：-4
> 
> 时间：2012-06-13T16:18:25.497
> 
> 标签：php, mysql, html, timer

我找到了一个有计数器的网站，它一直在计数，并为每个人显示相同的数字。一些如何存储号码。有人可以帮我在 php 或 html 中重新创建这个计数计时器。谢谢。这是我所指的网站“http://addmefast.com”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:37:57.533

我在打开两个浏览器窗口的情况下访问了 addmefast.com，并且计数器不同。所以对于两个人来说，这个数字实际上是不一样的……至少假设这样可能是不安全的。

![在此处输入图像描述](../Images/165a96b80746825897a9fec2f5130d10.png)

如果您检查源代码

[http://addmefast.com/flipCounter/counter.php](http://addmefast.com/flipCounter/counter.php)

您将看到用于刷新计数的 javascript。您还将看到他们每 60 秒进行一次 ajax 调用以同步计数器。

```
var refreshId = setInterval(function(){
    var jqxhr = $.get("getstats.php", function(result) {
        showcountercount(result,50000);
      });
}, 60000); 
```

他们正在使用flipCounter jquery 插件来管理所有这些。

php 后端很简单：只需将日期存储在系统中的某个位置，然后将该日期传递给您的计数器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:27:33.140

您引用的网站使用 flipCounter Jquery 插件：

[http://bloggingsquared.com/jquery/flipcounter/](http://bloggingsquared.com/jquery/flipcounter/)

也许您可以看一下它，然后再提出更具体的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T06:26:14.127

此代码可以帮助您：

我认为以下代码会对您有所帮助。1) 设置变量名 ID 2) 然后为其设置间隔，如函数所示

```
var refreshId = setInterval(function(){
var jqxhr = $.get("getstats.php", function(result) {
    showcountercount(result,50000);
  }); 
```

}, 60000);

//设置计数器值

# c# - 在 UpshotContext 上调用 DataSource() 期间出现异常

> ID：11019131
> 
> 赞同：1
> 
> 时间：2012-06-13T16:18:26.620
> 
> 标签：c#, asp.net-mvc, upshot

我正在尝试为现有的 MVC 项目添加结果。

在线上

```
@(Html.UpshotContext().DataSource<DataServiceController>(x => x.GetAllProducts())) 
```

我得到了例外

```
Could not load file or assembly 'System.Web.Http.Common, Version=4.0.0.0,
Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. 
The system cannot find the file specified. 
```

我已安装的 nuget 软件包列表是

```
<packages>
  <package id="AspNetMvc" version="4.0.20505.0" />
  <package id="AspNetWebApi" version="4.0.20505.0" />
  <package id="AspNetWebApi.Data" version="4.0.20221.15125" />
  <package id="EntityFramework" version="4.3.1" />
  <package id="jQuery" version="1.7.2" />
  <package id="jQuery.Ajax.Unobtrusive" version="2.0.20505.0" />
  <package id="jQuery.UI.Combined" version="1.8.20" />
  <package id="jQuery.Validation" version="1.9" />
  <package id="jQuery.Validation.Unobtrusive" version="2.0.20505.0" />
  <package id="knockoutjs" version="2.1.0" />
  <package id="Microsoft.AspNet.Mvc" version="4.0.20505.0" />
  <package id="Microsoft.AspNet.Razor" version="2.0.20505.0" />
  <package id="Microsoft.AspNet.WebApi" version="4.0.20505.0" />
  <package id="Microsoft.AspNet.WebApi.Client" version="4.0.20505.0" />
  <package id="Microsoft.AspNet.WebApi.Core" version="4.0.20505.0" />
  <package id="Microsoft.AspNet.WebApi.WebHost" version="4.0.20505.0" />
  <package id="Microsoft.AspNet.WebPages" version="2.0.20505.0" />
  <package id="Microsoft.jQuery.Unobtrusive.Ajax" version="2.0.20505.0" />
  <package id="Microsoft.jQuery.Unobtrusive.Validation" version="2.0.20505.0" />
  <package id="Microsoft.Net.Http" version="2.0.20505.0" />
  <package id="Microsoft.Web.Infrastructure" version="1.0.0.0" />
  <package id="Modernizr" version="2.5.3" />
  <package id="Newtonsoft.Json" version="4.5.7" />
  <package id="Ninject" version="3.0.1.10" />
  <package id="Ninject.MVC3" version="3.0.0.6" />
  <package id="Ninject.Web.Common" version="3.0.0.7" />
  <package id="SinglePageApplication" version="4.0.20221.15125" />
  <package id="Upshot" version="1.0.0.2" />
  <package id="WebActivator" version="1.5.1" />
</packages> 
```

谷歌没有给我任何例外。有任何想法吗？

编辑：认为完整的堆栈跟踪可能有用：

```
[FileNotFoundException: Could not load file or assembly 'System.Web.Http.Common, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.]
   System.Web.Http.Data.Metadata.MetadataProviderAttribute..ctor(Type providerType) +0
   System.Web.Http.Data.EntityFramework.Metadata.DbMetadataProviderAttribute..ctor() +77
   System.RuntimeTypeHandle.CreateCaInstance(RuntimeType type, IRuntimeMethodInfo ctor) +0
   System.Reflection.CustomAttribute.GetCustomAttributes(RuntimeModule decoratedModule, Int32 decoratedMetadataToken, Int32 pcaCount, RuntimeType attributeFilterType, Boolean mustBeInheritable, IList derivedAttributes, Boolean isDecoratedTargetSecurityTransparent) +1539
   System.Reflection.CustomAttribute.GetCustomAttributes(RuntimeType type, RuntimeType caType, Boolean inherit) +161
   System.RuntimeType.GetCustomAttributes(Type attributeType, Boolean inherit) +58
   System.Web.Http.Data.DataControllerDescription.CreateMetadataProvider(Type dataControllerType) +455
   System.Web.Http.Data.DataControllerDescription.CreateDescription(HttpControllerDescriptor controllerDescriptor) +134
   System.Web.Http.Data.<>c__DisplayClass1.<GetDescription>b__0(Type type) +42
   System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory) +62
   System.Web.Http.Data.DataControllerDescription.GetDescription(HttpControllerDescriptor controllerDescriptor) +158
   System.Web.Http.Data.Helpers.MetadataExtensions.Metadata(HtmlHelper htmlHelper) +215

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor) +0
   System.Reflection.RuntimeMethodInfo.UnsafeInvokeInternal(Object obj, Object[] parameters, Object[] arguments) +92
   System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture) +110
   System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters) +19
   System.Web.Http.Data.Helpers.UpshotConfigBuilder.GetMetadata(Type dataControllerType) +233
   System.Web.Http.Data.Helpers.UpshotConfigBuilder.ToHtmlString() +360
   System.Web.HttpUtility.HtmlEncode(Object value) +38
   System.Web.WebPages.WebPageBase.Write(Object value) +68
   ASP._Page_Views_Search_Index_cshtml.Execute() in c:\code\Website\Views\Search\Index.cshtml:11
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +197
   System.Web.Mvc.WebViewPage.ExecutePageHierarchy() +97
   System.Web.WebPages.StartPage.RunPage() +17
   System.Web.WebPages.StartPage.ExecutePageHierarchy() +62
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +76
   System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) +260
   System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer) +115
   System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +295
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +13
   System.Web.Mvc.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17() +23
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +242
   System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +21
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +177
   System.Web.Mvc.Async.<>c__DisplayClass2a.<BeginInvokeAction>b__20() +89
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +102
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57
   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +43
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +14
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +57
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +47
   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__4(IAsyncResult asyncResult) +25
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +48
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9615056
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:59:36.137

根据关于[此](http://aspnetwebstack.codeplex.com/discussions/358133)线程的讨论： Current SPA (beta) is not compatible with MVC 4 RC

ASP.NET 团队建议人们暂时坚持使用 MVC4 beta + SPA Nuget 包。另一种建议是获取冲突库的代码并自己构建它们，但这只是在团队前进时要求头痛和返工。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T00:08:40.760

尝试从[NuGet](http://nuget.org/packages/System.Web.Http.Common)安装它：

```
PM> Install-Package System.Web.Http.Common 
```

# php - Drupal 7 升级 user_external_login 不再存在，有什么新的解决方案？

> ID：11019134
> 
> 赞同：3
> 
> 时间：2012-06-13T16:18:46.897
> 
> 标签：php, drupal-7

我正在升级使用的 CMS

```
$logged_in = user_external_login($account); 
```

在他们点击外部服务后验证登录。

[http://drupal.org/update/modules/6/7](http://drupal.org/update/modules/6/7)建议了这个解决方案

```
 user_login_submit(array(), array('uid' => $account->uid));
   drupal_goto(); 
```

这会在运行时引发“只能通过引用传递变量”错误。我不确定还能做什么。[像这里http://drupal.org/node/497612](http://drupal.org/node/497612)一样环顾四周，建议使用相同的解决方案。有人可以填写我所缺少的内容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:22:57.760

对于这一行：

```
 user_login_submit(array(), array('uid' => $account->uid)); 
```

...它期望第二个参数是一个参考。您给它的是一个值，而不是参考。

试试这个：

```
$account = array('uid' => $account->uid);
user_login_submit(array(), $account);
// rest of your code follows after... 
```

我认为 Drupal.org 上的文档搞砸了。 `user_login_submit(array(), array('uid' => $account->uid));`是不正确的，除非我错过了什么。

# log4j - Log4j 查看器，允许将多个日志文件交织在一起

> ID：11019136
> 
> 赞同：1
> 
> 时间：2012-06-13T16:18:58.253
> 
> 标签：log4j

我一直在寻找一个允许多个日志文件交织在一起的 log4j 查看器。现在我一直在尝试在 Chainsaw 上执行此操作，但它会将每个单独的日志文件打开到不同的窗口中。

我希望同时查看我的 UI 和后端的日志文件，但希望将它们放在同一个窗口中，但按时间排序。有谁知道可以做到这一点的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:28:28.097

电锯可以做到。这里有两种方法：

1.  将首选项面板中的“选项卡名称/事件路由表达式”更改为会导致它们路由到同一选项卡的内容（例如“事件”，它只是固定文本，会导致所有事件被路由到名为“未知'）。

2.  使用自定义表达式日志面板表达式：查看菜单，从表达式创建选项卡。与任何选项卡中的表达式匹配的事件将被添加到新选项卡中......有点像数据库视图。随着新事件的出现，如果它们与新表达式匹配，它们也将最终出现在这个新选项卡中。

我可能使用的是最新开发者快照中的菜单名称——它有很多新功能。可在此处获得：http: [//people.apache.org/~sdeboy](http://people.apache.org/~sdeboy)

# installation - 在 WIX 中停止服务并在安装完成时启动

> ID：11019140
> 
> 赞同：6
> 
> 时间：2012-06-13T16:19:10.193
> 
> 标签：installation, wix, wix3.5

我正在使用 WiX 3.5 创建一个安装程序，用于安装 Windows 服务并将 DLL 复制到第三方应用程序的 bin 目录中。第三方应用程序具有一系列 Windows 服务，在 DLL 被复制之前需要停止，并在安装完成后启动。我需要做些什么来实现这一点。我已经寻找示例，但只能找到如何启动我正在安装的服务。

***附带说明，我正在安装的服务需要在特定用户帐户下运行。我看到了如何在 WIX 中定义服务帐户/密码，但我犹豫要不要使用它，因为它以 XML 格式存储未加密的密码，我对此有安全问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T08:29:26.353

首先，要停止服务，您需要使用 ServiceControl 元素。

```
<ServiceControl Id="serviceName" Name="actualServiceName" Stop="both" Start="both" Wait ="yes" /> 
```

为了不回答您的问题，您可以将用户名和密码设置为用户发送到 MSI 或用户从 GUI 输入的属性。

```
<ServiceInstall Id="serviceName" Name="shortName" DisplayName="longName" Type="ownProcess" Start="auto" ErrorControl="normal" Account="[USER]" Password="[USERPWD]" Description="description" />
<Property Id="USER" Value="defaultValue" />
<Property Id="USERPWD" Value="defaultValue" Hidden="yes" /> 
```

当然，默认值是不需要的，也不是很推荐，但我还是把它放在那里。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T18:07:13.547

采用`<ServiceControl/>`

```
<ServiceControl Id="thirdPartyService" Name="thirdPartyService" Stop="install" Start="install" Wait="yes" /> 
```

# javascript - 字符串问题的javascript日期

> ID：11019141
> 
> 赞同：1
> 
> 时间：2012-06-13T16:19:24.437
> 
> 标签：javascript, date, time

我正在尝试从输入的字符串中获取日期对象。我发现我可以将字符串传递给`Date()`构造函数。因此，如果我在输入文本中输入“2012 年 6 月 12 日”，则 Date(“2012 年 6 月 12 日”) 将为我提供日期对象，以便我可以将其进一步转换为 Ymd 格式，用于我的数据库。

*问题是*：

如果我只输入“12 June”，它会自动添加 2001 年，这是我猜的默认值。所以结果是 2001-06-12。如果没有给出年份，我希望它使用默认年份。任何想法如何做到这一点？我不想解析字符串，因为日期可以以多种格式输入，所以我不知道到底要解析什么。

谢谢你。

编辑：问题解决了，datejs 库完成了所有工作 :) 谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:24:18.383

> 问题是：如果我只输入“12 June”，它会自动添加 2001 年

不是 2001 年，而是当前年份。如果您在服务器端（Node.js 等）执行此操作，您可以更改当前日期。如果是浏览器——没办法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:23:57.657

不确定在标准 JS 中是否有任何简单的方法可以做到这一点，但您可以尝试使用这样的日期库：

[http://www.datejs.com/](http://www.datejs.com/)

# lightbox - 内容流和灯箱 2

> ID：11019146
> 
> 赞同：0
> 
> 时间：2012-06-13T16:19:35.087
> 
> 标签：lightbox, javascript, lightbox2

有谁知道如何集成 ContentFlow ( [http://www.jacksasylum.eu/ContentFlow](http://www.jacksasylum.eu/ContentFlow) ) 和 Lightbox2 ( [http://lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/) )？

我需要图像不仅可以在灯箱中打开，而且在打开时，还需要让用户能够查看下一张和上一张图像。

现在，我正在将 ContentFlow 与 Lightbox Addon 一起使用（您可以在 ContentFlow 网站上找到它），但它只使用原始 Lightbox，所以我无法制作画廊（或者至少我不知道如何至）。

ContentFlow 似乎是一个非常善变的产品，它不接受很多东西。

谢谢大家的帮助，欢迎评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:16:35.533

在 ContentFlow 的官方网站上有 AJAX 部分，以及如何使用它的示例：[http](http://www.jacksasylum.eu/ContentFlow/ajax_example.inc.php) ://www.jacksasylum.eu/ContentFlow/ajax_example.inc.php 。

主要思想是所有这些图像都在一个地方处理。

```
var ajax_cf = new ContentFlow('ajax_cf', 
...

function addPictures(t){
        var ic = document.getElementById('itemcontainer');
        var is = ic.getElementsByTagName('img');
        for (var i=0; i< is.length; i++) {
            ajax_cf.addItem(is[i], 'last');
        }
} 
```

appPictures 是图像加载完成时调用的回调函数。

您可以根据灯箱期望的结构将它们分组到隐藏的 div 中。

我将它与 jquery preloader 的回调一起使用

```
jQuery.preloadImages = function () {
    if (typeof arguments[arguments.length - 1] == 'function') {
        var callback = arguments[arguments.length - 1];
    } else {
        var callback = false;
    }
    if (typeof arguments[0] == 'object') {
        var images = arguments[0];
        var n = images.length;
    } else {
        var images = arguments;
        var n = images.length - 1;
    }
    var not_loaded = n;
    for (var i = 0; i < n; i++) {
        jQuery(new Image()).attr('src', images[i]).load(function () {
            if (--not_loaded < 1 && typeof callback == 'function') {
                callback();
            }
        });
    }
} 
```

用法 ：

```
$.preloadImages(imagesArray, function () {
    addPictures();
}); 
```

在我的情况下，imagesArray 是相对路径的数组

请注意，ContentFlow 很吸引人：

1.  清除和重新填充流

2.  只显示两张图片

3.  圆形视图

4.  一次推送10多张图片

# jsf - 禁用输入键

> ID：11019151
> 
> 赞同：0
> 
> 时间：2012-06-13T16:19:49.680
> 
> 标签：jsf, primefaces

我想`Enter`在我的 JSF 页面中禁用密钥。我是 JavaScript 新手。如果可以使用 JS，我该如何绑定 JS 和 Primefaces 组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:24:14.623

你所有的组件都有一个ID，如果没有，创建它，JS 有必要知道他在和谁一起工作。

这是一段代码，它是jQuery：

```
$('#your_element_id').keypress(function(e)
{
   if ( event.which == 13 ) {
     event.preventDefault();
   }
}); 
```

它将阻止`enter`执行任何操作。

# sql - 如何对一组结果进行计数

> ID：11019153
> 
> 赞同：0
> 
> 时间：2012-06-13T16:19:57.650
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试对一组值进行计数，但计数会带来额外的值。

这是一些背景信息。以下 T-SQL 查询返回我需要的数据：

```
SELECT DISTINCT [REQ_INFO].UDAValue as 'UDA value', REQ_INFO.ProjectID, 
REQ_INFO.BaselineID, Req_ID
FROM [REQ_INFO]
INNER JOIN [Project_INFO] ON [REQ_INFO].[ProjectID]=[Project_INFO].[ProjectID]
INNER JOIN [Baseline_INFO]ON [REQ_INFO].[BaselineID]=[Baseline_INFO].[BaselineID]
WHERE [Project_INFO].[Name] = 'Address Book'
AND [Baseline_INFO].Name = 'Current Baseline'
AND [UDAName] = 'Requirement Priority'
ORDER BY REQ_INFO.Req_ID 
```

这将返回以下数据：

![在此处输入图像描述](../Images/4c8546c937a032bbd626e1e5cf05463d.png)

我还需要计算每个值在 UDA 值列中出现的次数。如上所示，总和应为 11。但是我尝试了以下代码，但它正在计算额外的行：

```
SELECT [REQ_INFO].UDAValue as 'UDA value',COUNT (*) as 'UDA Num'
FROM [REQ_INFO]
INNER JOIN [Project_INFO] ON [REQ_INFO].[ProjectID]=[Project_INFO].[ProjectID] 
INNER JOIN [Baseline_INFO]ON [REQ_INFO].[BaselineID]=[Baseline_INFO].[BaselineID]
WHERE [Project_INFO].[Name] = 'Address Book' 
AND [Baseline_INFO].Name = 'Current Baseline'
AND [UDAName] = 'Requirement Priority'
GROUP BY REQ_INFO.UDAValue 
```

![在此处输入图像描述](../Images/cfe5fc634f30b5bbe73ea35a17dbf115.png)

有人对我做错了什么有建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:27:54.027

更改您的计数以包括不同的；像这样的东西：

```
SELECT [REQ_INFO].UDAValue as 'UDA value',COUNT (DISTINCT REQ_INFO.Req_ID) as 'UDA Num'
... rest of your query 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T16:25:08.997

在我看来，这很可能是`distinct`第一个查询中的语句导致了差异。

如果您要查找的是 [REQ_INFO].UDAValue 出现的实际计数。然后，您应该`distinct`从第一个查询中删除该子句，以查看第二个查询实际计数的内容。

作为替代方案，您可以像这样查看第一个查询的分组值的总数，但这与您的第一个和第二个查询不同。

```
SELECT [REQ_INFO].UDAValue as 'UDA value',COUNT (*) as 'UDA Num' 
FROM [REQ_INFO] 
INNER JOIN [Project_INFO] ON [REQ_INFO].[ProjectID]=[Project_INFO].[ProjectID]  
INNER JOIN [Baseline_INFO]ON [REQ_INFO].[BaselineID]=[Baseline_INFO].[BaselineID] 
WHERE [Project_INFO].[Name] = 'Address Book'  
AND [Baseline_INFO].Name = 'Current Baseline' 
AND [UDAName] = 'Requirement Priority' 
GROUP BY REQ_INFO.UDAValue, REQ_INFO.ProjectID, REQ_INFO.BaselineID, Req_ID 
```

从你的问题中很难判断这是否是你想要的。如果您真的想要对第一个查询中出现的值进行计数（影响 4 列和所有列的不同语句）。然后你可能会用子查询来处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:00:27.967

我能够通过创建一个临时表让我执行计数来解决这个问题。这是我使用的 SQL 语句：

```
DECLARE @UDAcount TABLE (UDAValue nvarchar(max), ProjectID int, 
BaselineID int, Req_ID int, Version nvarchar(128))

INSERT INTO @UDAcount (UDAValue, ProjectID, BaselineID, Req_ID, Version)
SELECT DISTINCT [REQ_INFO].UDAValue as 'UDA value', REQ_INFO.ProjectID, 
REQ_INFO.BaselineID, Req_ID, REQ_INFO.Version
FROM [REQ_INFO]
INNER JOIN [Project_INFO] ON [REQ_INFO].[ProjectID]=[Project_INFO].[ProjectID]
INNER JOIN [Baseline_INFO]ON [REQ_INFO].[BaselineID]=[Baseline_INFO].[BaselineID]
WHERE [Project_INFO].[Name] = 'Address Book'
AND [Baseline_INFO].Name = 'Current Baseline'
AND [UDAName] = 'Requirement Priority'
ORDER BY REQ_INFO.Req_ID

SELECT UDAValue as 'UDA value',COUNT (*) as 'UDA Num'
FROM @UDAcount
GROUP BY UDAValue 
```

它可能不是最优雅的解决方案，但它确实返回了所需的结果。如果您对如何改进这一点有任何建议，我很高兴听到他们的声音。

# c++ - 循环、功能设计和效率：两个问题

> ID：11019157
> 
> 赞同：5
> 
> 时间：2012-06-13T16:20:16.633
> 
> 标签：c++, loops, function-pointers, performance

我有两个相关的问题，一个是一般性的，一个是针对我正在从事的项目的具体问题。

1.  一般来说，如果我有一个包含大量迭代（数百万次）的循环，并且某些部分代码在特定条件下执行，那么让一个带有多个条件语句的循环还是多个没有它们的循环更好（更有效）。例如。

示例 1：

```
while (something())
{
    // some common code
    if (condition_a)
        // some code
    if (condition_b)
        // some code
    // some more common code
} 
```

示例 2：

```
if (condition_a && condition_b)
{
    while (something())
    {
        // some common and specific code
    }
}
else if (condition_a)
    while (something()) //..
else if (condition_b)
    // Another loop
else //... 
```

似乎示例 2 会以冗余为代价产生更高效的代码，因为条件只检查一次而不是数百万次。如果通用代码很大或者有很多可能的情况，这似乎是非常多余的。

1.  现在到我的具体问题。我有一个从文件中读取点并将它们插入数据结构的函数。它看起来像这样：

    while (reader->read_point) { // 做一些事情 // 插入点 }

问题是有几个函数可以根据用户提供的标准来读取一个点。例如 read_point_inside_circle()、read_point_inside_rectangle() 等。

理想情况下，我想使用函数指针来事先决定正确的函数，但是我认为这是不可能的，因为 reader 是 Reader 类的一个实例（如果有可能以某种方式解决我的所有问题）。

在这种情况下，如果我有多个仅在条件上有所不同的循环，或者我应该使用多个 if 语句来避免冗余代码，那会更好，例如。

```
for(;;)
{
    if (read_every_point)
        if(!reader->read_point())
            break;
    else if (read_inside_circle)
        if(!reader->read_inside_circle())
            break;
    else if // ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:24:28.727

要回答您的具体问题：读取文件所需的时间将超过 if/else 所花费的时间。写任何更具可读性的东西。这通常更有效，并且在您证明它是一个瓶颈之前不要对其进行优化。

回答您的一般问题：取决于很多事情，现代编译器非常擅长独立于您的直觉有效地做事。因此，在您拥有特定编译器和架构的工作代码之前，这是一个理论上的讨论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T16:23:33.797

> 理想情况下，我想使用函数指针来事先决定正确的函数，但是我认为这是不可能的，因为 reader 是 Reader 类的一个实例（如果有可能以某种方式解决我的所有问题）。

您可以为此使用*成员函数指针*，假设所有*读取*函数都具有相同的签名：

```
typedef void (Reader::*read_fun_t)();
read_fun_t read_fun = &Reader::read_point;
// or
read_fun_t read_fun = &Reader::read_inside_circle;

...

(reader->*read_fun)(); 
```

或者，如果您对它们不满意，只需创建自己的免费函数来包装方法调用：

```
void read_point( Reader* reader ){ reader->read_point(); }
void read_inside_circle( Reader* reader ){ reader->read_inside_circle(); } 
```

并改用常规函数指针。

# javascript - 我可以关注动态加载的 AJAX 元素吗？

> ID：11019163
> 
> 赞同：3
> 
> 时间：2012-06-13T16:20:34.913
> 
> 标签：javascript, jquery, html, ajax

我的情况是我的页面上有一个表单。我的客户希望能够完全填写表格而无需触摸鼠标。问题是我有一种“自动完成”功能，可以搜索我们的数据库（通过 AJAX）寻找类似的条目，并将它们动态加载到一个选择元素中。然后，您可以单击您希望“自动完成”表单的条目。

为了取悦我的客户，我试图找到一种方法让动态选择元素在加载后获得焦点，以便用户可以按下箭头键并输入以选择他们想要的内容，而无需使用鼠标。

在谷歌搜索解决方案后，我尝试添加

```
 document.getElementById('ajaxbox').focus(); 
```

进入触发 onreadystatechange 时调用的函数。我还尝试将该行添加为脚本，并在将选择框写入页面时写入脚本。这些都不起作用（由于我无法确定的原因，或者因为我收到 ajaxbox 为空的错误，告诉我它试图在框加载到页面上之前调用 focus() ）。

有任何想法吗？我可以提供更多信息，但不能提供功能示例页面。首选 Javascript 或 JQuery 解决方案。

编辑：添加了一些代码。第一个函数中引用的 URL 指向将动态 html 写入页面（通过打印编写器）的 java servlet。我目前无法真正改变这一点（由于时间限制）。这都是继承的代码，所以如果有什么可以/应该改变的，请告诉我。我不会生气的。

这是我试图设置焦点的 javascript 的一部分。

```
 function xmlreqGET(url) {
//alert('ajax');
    var xmlhttp=false;
    var xmlreq;
    try {
if (window.XMLHttpRequest) { // Mozilla, etc.
            xmlhttp=new XMLHttpRequest();
            xmlreq = new CXMLReq('', xmlhttp);
            xmlreqs.push(xmlreq);
            urlAr.push(url);
            xmlhttp.onreadystatechange = xmlhttpChange;
            //alert(url);
            xmlhttp.open("GET",url,true);
            xmlhttp.send(null);
} else if (window.ActiveXObject) { // IE
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    if (xmlhttp) {
                    xmlreq = new CXMLReq('', xmlhttp);
                    xmlreqs.push(xmlreq);
        xmlhttp.onreadystatechange = xmlhttpChange;
        xmlhttp.open("GET",url,true);
        xmlhttp.send();

    }
        }
    } catch (e) { }
  }

function xmlhttpChange() {
if (typeof(window['xmlreqs']) == "undefined") {
        return;
    }
    try {

    if (window.ActiveXObject) { // IE
        for (var i=0; i < xmlreqs.length; i++) {

                if (xmlreqs[i].xmlhttp.readyState == 4) {
                        if (xmlreqs[i].xmlhttp.status == 200 || xmlreqs[i].xmlhttp.status == 304) {
                                // 200 OK
                                // get response info here before splicing - see below on creating an xml object
                                var response = xmlreqs[i].xmlhttp.responseText;
                                //alert(name + '     ' + response);
                                if (name != "assignCase")
                                    document.getElementById(div_id).style.top = 15;
                                    document.getElementById(div_id).style.left = 50;
                                if (name == "streetName" || name == "equipName")
                                    document.getElementById(div_id).style.top = 400;
                                    document.getElementById(div_id).style.left = 50;
                                if (name == "equipment" ) {
                                    document.getElementById(div_id).style.top = 150;
                                    document.getElementById(div_id).style.left = 475;
                                }

                                document.getElementById(div_id).innerHTML = response;

                                xmlreqs.splice(i,1); i--;
                                urlAr.splice(i,1); i--;

                        } else {
                                xmlreqs.splice(i,1); i--;
                                urlAr.splice(i,1); i--;
                        }
                }
        }
   } else {
       //alert('at else');
        for (var i=0; i < xmlreqs.length; i++) {
      //alert(i + ':' + name + ':' + xmlreqs.length);
                if (xmlreqs[i].xmlhttp.readyState == 4) {
                        if (xmlreqs[i].xmlhttp.status == 200 || xmlreqs[i].xmlhttp.status == 304) {
                                // 200 OK
                                // get response info here before splicing - see below on creating an xml object
                               // alert('200 was here' + name);
                                var response = xmlreqs[i].xmlhttp.responseText;
                                var len = response.length;
                                if (name == "streetName" || name == "equipName" || name == "city" || name == "zip" || name == "grid") {
                                    document.getElementById(div_id).style.top = 270;
                                    document.getElementById(div_id).style.left = 50;
                                } else if (name == "upstream"){
                                      document.getElementById(div_id).style.left = 600;
                                      document.getElementById(div_id).style.top = 150;
                                } else if (name == "equipment" ) {
                                    document.getElementById(div_id).style.top = 125;
                                    document.getElementById(div_id).style.left = 500;
                                } else if (name == "pingMeter"){
                                    document.getElementById(div_id).style.left = 1025;
                                    document.getElementById(div_id).style.top = 210;
                                } else if (name == "assignCase") {
                                    //document.getElementById(div_id).style.top = 60;
                                    //document.getElementById(div_id).style.left = 120;
                                } else {
                                    document.getElementById(div_id).style.top = 400;
                                    document.getElementById(div_id).style.left = 50;
                                }

                                document.getElementById(div_id).innerHTML = response;

                                if (response == "") {
                        //            xmlreqGET(urlAr[i]);
                                    xmlreqs.splice(i,1); i--;
                                    urlAr.splice(i,1); i--;
                                } else {
                                    //document.getElementById(div_id).innerHTML = response;
                                    xmlreqs.splice(i,1); i--;
                                    urlAr.splice(i,1); i--;
                                }
                        }

                }
               if (xmlreqs[i].xmlhttp.readyState < 4) {
                  // confirm('at nloading');
                        document.getElementById(div_id).style.top = 270;
                        document.getElementById(div_id).style.left = 50;    
                        document.getElementById(div_id).innerHTML = "<div align=center class='fixedwidth' style='background-color:#ffff8f'>&nbsp;<br>&nbsp; &nbsp;<img src='omscontrol/common/images/loading.gif' width='20'><Font size=1> Loading Content....Please Wait!&nbsp; &nbsp;</Font><br>&nbsp;</div>";
                        } 
        }
   }
    alert(document.getElementById('firstOption'));
    document.getElementById('firstOption').focus();
   } catch (e) { }

    } 
```

servlet 中关于如何编写 HTML 的示例。这不是我现在想要改变的东西。

```
 comboOption = new StringBuffer();
                        /* Version 1.0.2 */
                        comboOption.append("<select id=\"" + id + "\" class='fixedwidth' style=\'background-color:#ffff8f\' size='4' "
                                + "onchange=\"popVal(this.options[this.selectedIndex].value); populateValues('" + id + "');\">");
                        comboOption.append("<option value=''>" + "No Matches Found!" + "</option>");
                        /* Version 1.0.2 */

                    comboOption.append("</select>");
                    out.print(comboOption.toString()); 
```

我曾尝试将 focus() 添加到脚本中，并将其放入最后一个追加中。我不确定这是否可行，但它不适合我。

编辑 2：我添加了 document.getElementById('firstOption').focus(); 到最后两个readyState == 4 if 条件。我可以说那个元素当时确实存在，但我的关注点实际上什么都没有。（我发现通过添加

```
 $(document.activeElement).change(function(){
                        alert("NEWFOCUS: " + document.activeElement.id);
                    }); 
```

到我的 JSP。如果这不可靠，请告诉我。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:25:11.550

在调用焦点函数之前，您必须先将输入元素附加到 DOM

```
var div = document.getElementById("dynamic");
$.ajax({
   ...
   success:function (data) {
     // append the new created input to the DOM
     ....
     div.appendChild(newInput);
     newInput.focus();

   }
}); 
```

您可能正试图`ajaxbox`在它出现在 DOM 之前进行访问，这就是您获得`null`

# django - 如何在 Django 通用类视图中编写基本的 try/except

> ID：11019164
> 
> 赞同：3
> 
> 时间：2012-06-13T16:20:41.670
> 
> 标签：django, django-views

如果查询集中没有任何内容，我想编写一个 except 子句来重定向用户。欢迎任何建议。我是一个 Python 菜鸟，我得到的是这里的问题。

这是我当前的代码：

```
def get_queryset(self):
    try:
        var = Model.objects.filter(user=self.request.user, done=False)
    except:
        pass

    return var 
```

我想做这样的事情：

```
def get_queryset(self):
    try:
        var = Model.objects.filter(user=self.request.user, done=False)
    except:
        redirect('add_view')

    return var 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T17:10:10.507

方法中的 try except 块`get_queryset`并不真正合适。首先，`Model.objects.filter()`如果查询集为空，则不会引发异常 - 它只返回一个空查询集。其次，该`get_queryset`方法旨在返回一个查询集，而不是一个`HttpResponse`，因此如果您尝试在该方法内重定向，您会遇到问题。

我认为您可能会发现编写基于函数的视图更容易。第一次尝试可能如下所示：

```
from django.shortcuts import render

def my_view(request):
    """
    Display all the objects belonging to the user 
    that are not done, or redirect if there are not any,
    """
    objects = Model.objects.filter(user=self.request.user, done=False)
    if not objects:
        return HttpResponseRedirect("/empty-queryset-url/")
    return render(request, 'myapp/template.html', {"objects": objects}) 
```

优点是您的功能流程非常简单。它没有`ListView`基于通用类的视图那么多的功能（例如，它缺少分页），但是任何阅读您的代码的人都非常清楚视图在做什么。

如果你真的想使用基于类的视图，你必须深入[研究多个对象混合的 CBV 文档](https://docs.djangoproject.com/en/dev/ref/class-based-views/mixins-multiple-object/)和[源代码](https://github.com/django/django/blob/1.4/django/views/generic/list.py)，并找到一个合适的方法来覆盖。

在这种情况下，您会发现该`ListView`行为与您想要的完全不同，因为它从不重定向。它默认显示一个空白页面，如果您设置了`allow_empty = False`. 我认为您必须重写该`get`方法才能看起来像这样（未经测试）。

```
class MyView(ListView):
    def get_queryset(self):
        return Model.objects.filter(user=self.request.user, done=False)

    def get(self, request, *args, **kwargs):
        self.object_list = self.get_queryset()

        if len(self.object_list == 0):
            return HttpResponseRedirect("/empty-queryset-url/")
        context = self.get_context_data(object_list=self.object_list)
        return self.render_to_response(context) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T17:37:29.447

这纯粹是对@Alasdair 答案的补充。它确实应该是一个评论，但不能以这种方式正确格式化。而不是实际重新定义`get`，`ListView`您可以简单地覆盖：

```
class MyView(ListView):
    allow_empty = False # Causes 404 to be raised if queryset is empty

    def get(self, request, *args, **kwargs):
        try:
            return super(MyView, self).get(request, *args, **kwargs)
        except Http404:
            return HttpResponseRedirect("/empty-queryset-url/") 
```

这样，您无需负责`get`. 如果 Django 将来改变它，你仍然可以继续。

# jquery - 在第二次执行 onclick 模态对话框后，Jquery 不会清空部分视图

> ID：11019165
> 
> 赞同：2
> 
> 时间：2012-06-13T16:20:42.563
> 
> 标签：jquery, asp.net-mvc-3, asp.net-mvc-4

# 事实

*   我有一个 mvc 项目。
*   我正在使用 jquery。

# 问题

$('#ModalData').empty(); 没有按我的预期工作。

# 细节

当我点击测试链接三次时，我得到 ![在此处输入图像描述](../Images/ee47276568ed36fa007e209e154063e0.png)

然而，hello world 应该被
$('#ModalData').empty(); 清空。但它没有。相反，每次我单击测试链接时，它都会打开模式对话框并创建一个新的 hello world。

另请注意，如果我在不使用局部视图的情况下附加 html，则 jquery empty 可以工作。有什么帮助吗？

```
 $(".modal").on("click", function () {

        $.ajaxSetup({

        cache: false
    });
    $("#dialog-form").dialog("open");

    $('#ModalData').empty();//not working to well

    $.get("/MedicineManagement/GetModal/", function (data)
    { $("#ModalAjaxData").append(data); });
});

$("#dialog-form").dialog({
    autoOpen: false,
    height: 400,
    width: 550,
    modal: true,
    buttons: {
        "Modify Actual Potential": function () {

            if (true) {
                $(this).dialog("close");

            }
        },
        Cancel: function () {
            $(this).dialog("close");

        }
    },
    close: function () {

    }
}); 
```

# 控制器

```
 [HttpGet]
        public PartialViewResult GetModal()
        {
            return PartialView("_AddMedicineList");
        } 
```

# 触发 jquery 的 HTML

```
 <div id="dialog-form" title="Edit Actual Potential">
        <div class="ModalAjaxData" id="ModalAjaxData"></div>
    </div>
    <a href="#" class ="modal">test </a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:22:31.627

在您的 AJAX 成功回调中，您要附加：

```
$("#ModalAjaxData").append(data); 
```

`#ModalAjaxData`而不是设置div的html ：

```
$("#ModalAjaxData").html(data); 
```

此外，您似乎正在清空一些`#ModalData`我在您的标记中看不到的元素，因此什么都不做也就不足为奇了`$('#ModalData').empty();`。你可能的意思是`$('#ModalAjaxData').empty();`。但是，如果您使用`$("#ModalAjaxData").html(data);`而不是附加，则不需要清空任何东西。

# jquery - jquery 切换仅在您单击两次时才起作用

> ID：11019166
> 
> 赞同：1
> 
> 时间：2012-06-13T16:20:58.727
> 
> 标签：jquery, tooltip

我正在实现一个从锚标记触发的工具提示，如果您单击锚，我们会在其正下方显示 div。我有以下代码，但您必须单击两次锚点才能弹出。有任何想法吗？

```
<script>
$('.tooltip-trig').click(function() {
    $(this).next().toggle();
});
</script>

<a href="#" id="test" onclick="return false;" class="tooltip-trig" title="">Tooltip</a>
<div class="test-tooltip tt-red-top" style="display: none;">
    <div class="title">Test</div>
    test
    <a href="#" onclick="return false;" class="close">
        <span class="hidden">Close</span>
    </a>
</div> 
```

# python - 将 PL/Pythonu 与 virtualenv 一起使用

> ID：11019169
> 
> 赞同：2
> 
> 时间：2012-06-13T16:21:10.983
> 
> 标签：python, postgresql, plpython

我正在使用 postgres 中的 PL/Pythonu 扩展在 python 中的 postgres 中编写函数。我希望 postgres 使用我的虚拟环境（我正在使用 virtualenv）而不是全局安装。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:34:55.137

事实证明，必须将找到库的路径添加到 postgres 中的 PYTHONPATH 环境变量中。不要忘记引用您的价值，例如：

PYTHONPATH='库路径​​'

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-22T16:18:49.373

在[https://stackoverflow.com/a/24892335/5430上回答](https://stackoverflow.com/a/24892335/5430)

tl;dr - plpython 函数中的 exec activate_this.py 将为 postgresql 会话的生命周期设置 python 解释器。

# selenium-rc - Selenium RC-如何从图像中捕获动态文本并在其旁边的文本框中键入相同的内容

> ID：11019174
> 
> 赞同：0
> 
> 时间：2012-06-13T16:21:41.557
> 
> 标签：selenium-rc

我是 Selenium 的新手，一直在尝试使用注册网页来学习它。在注册页面中，我有一张图片，其中包含每次完成新注册时都会更改的动态文本。该文本必须被捕获并按原样输入到一个文本框中，该文本框经过验证以完成注册。在 Selenium RC 中，在检查元素时，验证值选项被禁用。

当我使用 verifytext 时，会显示文本，但不会显示图像内的值。有人可以在 RC 中建议，我如何在没有验证值选项的情况下捕获图像中的值，因为它被禁用。

谢谢小号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:07:06.203

你在谈论验证码，你不能自动化验证码，因为它是为了避免功能自动化而提供的。
要自动化验证码，您需要人工交互。
您可以输入中断命令或使用输入框，您可以在其中键入验证码值，然后您可以将其传递到为验证码文本提供的文本框。
对于示例脚本，您可以访问 [这里](http://radical-qa.blogspot.in/2012/03/selenium-ide-and-captcha.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:11:16.020

We write script but need to provide break point to insert CAPTCHA code manually. In this situation when script will be executed; every time CAPTCHA code must be entered manually. Use following script for that..

```
storeEval   |   prompt("Enter Captcha:")  | varName
type  |  id=recaptcha_response_field  |   ${varName} 
```

# python - 在 Python 中通过 SOCKS5 代理代理 UDP

> ID：11019179
> 
> 赞同：7
> 
> 时间：2012-06-13T16:21:56.217
> 
> 标签：python, proxy, socks

是否可以使用任何 SOCKS 客户端库在 Python 中通过 SOCKS5 代理发送 UDP 数据报？SocksiPy 似乎不起作用，或者我只是用错了。以下代码不起作用，它尝试直接连接到目标：

```
s = socks.socksocket ( socket.AF_INET, socket.SOCK_DGRAM )
s.setproxy(socks.PROXY_TYPE_SOCKS5,"socks.proxy.lan")
s.sendto ( payload, ( ip, port ) ) 
```

如果我更改`SOCK_DGRAM`代码`SOCK_STREAM`也不起作用，那么它不会尝试连接任何地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:01:48.533

您是否尝试过使用 connect() 和 send() 而不是 sendto()？从 SocksiPy 源码来看，没有实现无连接模式。

**编辑**：

```
req = struct.pack('BBB', 0x05, 0x01, 0x00) 
```

TCP 流连接 (0x01) 似乎在这里被硬编码。SocksiPy 是行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T17:55:45.260

你有没有试过这个：

```
socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, "socks.proxy.lan", 8080, True) 
```

如果要启用 rdns，请将 8080 替换为端口，“True”为 True。

如果您使用 Python 3 及更高版本，我建议您使用 PySocks，它会是

```
socks.set_default_proxy(socks.PROXY_TYPE_SOCKS5, "socks.proxy.lan", 8080, True) 
```

# html - 将 div 中的链接垂直居中

> ID：11019186
> 
> 赞同：5
> 
> 时间：2012-06-13T16:22:24.290
> 
> 标签：html, css

我有一个无序列表...

```
<ul class="hide">
  <li class="home">
    <div class="link">
      <a href="/">Home</a>
    </div>
  </li>
  <li class="about">
    <div class="link">
      <a href="/about">About Our Community</a>
    </div>
  </li>
  <li class="contact">
    <div class="link">
      <a href="/contact">Contact Us</a>
    </div>
  </li>
</ul> 
```

我的 CSS 看起来像这样......

```
#sitenav ul li .link a {
  color: #555;
  text-decoration: none;
  float: left;
  padding-right: 3px;
  margin-top: auto;
  margin-bottom: auto;
} 
```

但边距不会垂直居中链接

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T16:30:52.683

这个解决方案可以为你工作：http: [//jsfiddle.net/WLQAS/8/](http://jsfiddle.net/WLQAS/8/)

`margin-top: auto;`并且`margin-bottom: auto;`不要垂直对齐对象。

**更新的 CSS**

```
li {
  color: #555;
  text-decoration: none;
  float: left;
  padding-right: 3px;    
}

.link {
    vertical-align: middle;
    display: table-cell;
    height: 50px;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T20:55:41.793

这是一个跨浏览器兼容的解决方案，用于将`a`-element 与 a 内的未知高度垂直对齐`div`：

**适用**于带和不带换行符的链接文本。

**CSS**

```
* { margin: 0; padding: 0 }

ul {}
ul li {
    display: table;
    height: 75px;
    #position: relative; /* ie hack */
    overflow: hidden;
    border: 1px solid red;
}

ul li div {
    #position: absolute; /* ie hack */
    #top: 50%; /* ie hack */
    display: table-cell;
    vertical-align: middle;
}

ul li div a {
    #position: relative; /* ie hack */
    #top: -50%; /* ie hack */
    border: 1px solid green
} 
```

这里不推荐使用 CSS hacks，而是使用[条件注释](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)。

**现场演示**： http: [//jsfiddle.net/ahdzg/1/](http://jsfiddle.net/ahdzg/1/)
**有关此技巧的更多信息**：[http ://www.jakpsatweb.cz/css/css-vertical-center-solution.html](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

希望这可以帮助。否则随时问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-27T20:24:51.583

```
.parent_div{display:table;}.child_div{display:table-cell;vertical-align:middle;} 
```

然后将您的链接放在子 div 中。

# java - Jersey 客户端 API - 发布 InputStream

> ID：11019207
> 
> 赞同：3
> 
> 时间：2012-06-13T16:23:36.223
> 
> 标签：java, rest, jersey

实现这一点的最佳方法是什么：

我的应用程序允许用户上传图像，这是通过 RESTful 服务完成的，编码为“multipart/form-data”。

现在，在服务的主体中，我真的不需要保存这个文件，但我想用它来传递和调用另一个服务。那么我是否可以使用 Jersey 客户端 API 进行另一个调用，而不必将文件保存到磁盘，然后传入所谓的“临时”文件。

这是我的一些代码：

```
@Path("/file")
public class UploadFileService {

    @POST
    @Path("/upload")
    @Consumes(MediaType.MULTIPART_FORM_DATA)
    public Response uploadFile(
        @FormDataParam("file") InputStream uploadedInputStream,
        @FormDataParam("file") FormDataContentDisposition fileDetail) {

            //Given that I have ‘uploadedInputStream’ can I just pass this  
            //directly into the second call, below?

            ClientConfig config = new DefaultClientConfig();
            Client client = Client.create(config);
            WebResource wr = client.resource(baseURI);
            ClientResponse response = wr.type("image/*")
                                        .entity(uploadedInputStream)   //legal??
                                        .post(ClientResponse.class);

    }
} 
```

我猜测上述方法的替代方法是临时保存文件，然后将 java.io.File 的实例传递给 entity() 方法。但是，有可能摆脱这种情况吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-13T17:38:38.000

是的，这应该有效。如果没有，请在[http://java.net/jira/browse/JERSEY提交错误](http://java.net/jira/browse/JERSEY)

# ruby-on-rails-3 - 如何不封装 Coffeescript

> ID：11019209
> 
> 赞同：4
> 
> 时间：2012-06-13T16:23:45.907
> 
> 标签：ruby-on-rails-3, coffeescript, encapsulation

我不知道是否所有的coffeescript 编译器都将它们的脚本包装在匿名函数中，但我看到Rails 就是这样做的。如何禁用此封装？

我想将几个初始化函数放在一个咖啡脚本文件中，然后从页面`<script>`标记中调用其中一个（以便每个页面调用不同的初始化程序）。如果初始化函数被封装，这不可能。

*Coffeescript 初始化函数：*

```
initializerA = -> console.log 'foo'
initializerB = -> console.log 'bar' 
```

*页面代码：*

```
<script>$(document).ready(initializerA)</script> 
```

*系统：coffee-rails 3.2.1、Rails 3.2.3、Ruby 1.9.3*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T16:35:13.943

Coffeescript 文档说，为了封装/安全，所有脚本都将被包装在一个匿名函数中。要使某些内容在全局范围内可访问，请执行以下操作：

```
window.myvar = myvar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T16:35:14.243

您可以通过执行以下操作将多个文件放入一个文件中：

```
((Demo, $, undefined_) ->
  Demo.utils = Demo.utils or {}

  Demo.utils.bacon = (->
      alert("bacon called")
    )()

  Demo.utils.eggs = (->
      alert("eggs called")
    )()
) window.Demo = window.Demo or {}, jQuery 
```

然后在您的页面中调用适当的方法：

```
Demo.utils.bacon(); 
```

可以[在这里找到对这种模式的一个很好的解释。](http://enterprisejquery.com/2010/10/how-good-c-habits-can-encourage-bad-javascript-habits-part-1/)

# eclipse - 哪些 UI 模型工具可用于生成 Eclipse UI“截图”？

> ID：11019215
> 
> 赞同：2
> 
> 时间：2012-06-13T16:24:00.110
> 
> 标签：eclipse, user-interface

有哪些 UI 模型工具可用于生成看起来像 Eclipse UI 的设计？也许有一个 Eclipse 项目可用于此？（[http://www.eclipse.org/projects/listofprojects.php](http://www.eclipse.org/projects/listofprojects.php)浏览所有项目并了解它们并不容易。）我会考虑适用于任何平台的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:51:36.233

它们是线框草图，而不是像样机那样的 Eclipse-UI，但我发现[http://wireframesketcher.com/](http://wireframesketcher.com/)或[http://marketplace.eclipse.org/content/wireframesketcher](http://marketplace.eclipse.org/content/wireframesketcher)非常有用。

它快速且易于使用，请参阅此处的功能列表： [http ://wireframesketcher.com/features.html](http://wireframesketcher.com/features.html)

他们似乎没有提到的一件事是他们的 SWT Spy 插件，它“允许您将现有的 SWT UI 转换为您可以在之后编辑和修改的线框”（他们的话来自线框草图功能的帮助内容）。

他们有 14 天的试用期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T13:39:10.320

我最终在 Mac OS X 应用商店购买了[SwordSoft Layout](http://www.swordsoft.idv.tw/)。它价格便宜（6.99 美元）且易于使用。虽然它没有特定于 Eclipse 的模板，但创建看起来与我提议的内容非常接近的模型并不难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T06:51:30.810

我们使用 balsamiq [Balsamiq 网站](http://www.balsamiq.com/products/mockups)。您可以免费使用他们的网络版本。[网页版](http://builds.balsamiq.com/b/mockups-web-demo/) 但是，网页版不保存。所以你需要手动存储xml。使用 export as xml 并将粘贴复制到本地文件并再次使用 import as xml 重新启动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T17:45:28.083

您可以查看[ForeUI](http://www.foreui.com/)，它可以帮助创建具有各种样式（手绘、线框、Windows xp、Mac OS X 和 Windows 7）的 UI 模型，并允许您定义模型的行为，然后在 Web 浏览器中运行 HTML5 模拟。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-28T18:51:15.257

作为参考，Eclipse有一个项目

[http://eclipse.org/windowbuilder/](http://eclipse.org/windowbuilder/)

这实际上可用于构建插件模型并通过生成大量 UI 内容来启动插件项目。由于它是一个 Eclipse 项目，它使用 Eclipse 中显示的所有 Eclipse 人工制品，因此目前可能没有更好的工具。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-26T05:11:11.817

您可以使用[MockupUI](http://mockupui.com/ "样机UI")。它是一个桌面用户界面模型软件。不使用 Eclipse，但它可以让您绘制具有原生 Windows 7、8 或 10 外观的高保真 UI 屏幕。

# vba - 简单的 Word VBA 替换宏

> ID：11019217
> 
> 赞同：3
> 
> 时间：2012-06-13T16:24:09.210
> 
> 标签：vba, ms-word

我正在尝试搜索 Word 文档并用指定的值替换特定的字符串（现在使用硬编码的“Special”值）。该宏清楚地表明它在 Word 编辑器中找到了正确的文本，但替换功能不起作用。这是我绝对的第一次 VBA 体验，所以如果可能的话，我希望能得到一些帮助。以下代码是宏...

```
 Sub Test()
'
' Test Macro
'
'
    Documents.Open FileName:="C:\Users\abensch\Documents\NANTDocMerge\DMID - Backups\System Clock Ability.docx", _
        ConfirmConversions:=False, _
        ReadOnly:=False, AddToRecentFiles:=False, _
        PasswordDocument:="", PasswordTemplate:="", _
        Revert:=False, WritePasswordDocument:="", _
        WritePasswordTemplate:="", _
        Format:=wdOpenFormatAuto, _
        XMLTransform:=""
    Selection.Find.ClearFormatting
    Selection.Find.Replacement.ClearFormatting
    With Selection.Find
        .Text = "Special"
        .Replacement.Text = "Potato"
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False
    End With
    Selection.Find.Execute

End Sub 
```

我不确定 Select.Find 中的大多数指定参数是否是必需的，并且删除它们似乎不会影响宏的性能，但我想我会把它们留在里面以确保安全。我想知道这是否可能是 Word 格式问题，尽管我尝试使用两个 ClearFormatting 调用删除所有格式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:33:56.807

如果你想做一个全部替换然后改变

```
Selection.Find.Execute 
```

至

```
Selection.Find.Execute Replace:=wdReplaceAll 
```

如果您只想替换第一个实例而不是全部，请使用它

```
Selection.Find.ClearFormatting
Selection.Find.Replacement.ClearFormatting
With Selection.Find
    .Text = "Special"
    .Replacement.Text = "Potato"
    .Forward = True
    .Wrap = wdFindContinue
    .Format = False
    .MatchCase = False
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False
End With
With Selection
    If .Find.Forward = True Then
        .Collapse Direction:=wdCollapseStart
    Else
        .Collapse Direction:=wdCollapseEnd
    End If
    .Find.Execute Replace:=wdReplaceOne
End With 
```

# git - 合并git分支时，如何避免分支中的提交日志？

> ID：11019223
> 
> 赞同：1
> 
> 时间：2012-06-13T16:24:27.213
> 
> 标签：git, branch, commit

如果另一个开发人员在分支 DEVELOPER_A 上分支，并在该分支上进行了大量提交，当他完成后，我想将他的工作合并到 master 上。但我不希望他所有的小提交都出现在主分支历史上，只关心最后一次提交。那么有没有办法在合并该分支时“压缩”他在分支 DEVELOPER_A 上的历史记录？

我可以在developer_A分支上打补丁，然后申请master，但我担心git会忘记结果是从developer_A分支合并的事实，只是认为这是一些独立的变化

谢谢杨

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:39:10.243

您可以通过多种方式执行此操作，但最明显的是使用压缩合并。

```
git merge --squash <other_branch>
git commit 
```

请注意，git 将使用来自压缩提交的日志消息预先填充您的合并提交消息，但您可以自由编辑或删除消息以适合自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:16:49.500

大多数时候你想清理历史，而不是把所有东西混在一起。用于此的工具是 git rebase （使用时要格外小心，*切勿*在已发布的内容上使用，因为不断变化的历史会对您的下游造成严重破坏）。

OTOH，手头有详细的历史记录（微提交）以追踪错误（查看 git bisect）非常有用。

# javascript - jquery可拖动禁用包含内容的单击功能

> ID：11019225
> 
> 赞同：2
> 
> 时间：2012-06-13T16:24:31.610
> 
> 标签：javascript, jquery, asp.net, html, css

我正在尝试在 div 中放置一个 flash 视频（对象、swf），并让该 div 可在用户页面周围拖动。我下面的代码在除了 Chrome 之外的所有东西都可以正常工作，其中播放器中的所有按钮都变得不可点击。（由于某种原因，您仍然可以将鼠标悬停在按钮上并获得反馈，例如 Flash 播放器中的鼠标悬停，但您无法单击它）

这意味着静音、暂停、音量、全屏等都在 chrome 中被破坏。单击播放器上的任意位置只会将其视为拖动单击（在播放器上的任何位置单击都不会提供反馈，但按住它并拖动会拖动 div）

我正在寻找的是 div 周围的单击/可拖动边框，内部有一个功能正常的视频播放器（就像它在 IE 和 FF 中工作一样），当用户向上和向下滚动页面时，它保持在屏幕上的当前位置内容。

我只是在我的 js 中运行以下内容：

```
$('#video').draggable(); 
```

我的相关CSS是：

```
#video
{
    position: fixed;
    right: 0;
    bottom: 0;
    padding: 10px;
    border-radius: 10px;
    background-color: #0DD0FC;
    display: block;
    width: 640px;
    cursor: pointer;
    height: 360px;
} 
```

在我的 HTML 中，我有

```
<div id="video" style="z-index: 4500;">
        <object width="100%" height="100%">
            <param name="movie" value="http://www.domain.com/value;autoplay=true" />
            <param name="allowscriptaccess" value="always" />
            <param name="allowfullscreen" value="true" />
            <param name="wmode" value="transparent" />
            <embed src="http://www.domain.com/value;autoplay=true" type="application/x-shockwave-flash"
                allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%"
                wmode="transparent"></embed></object> 
    </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:29:31.110

您可以[指定哪些孩子不应激活 draggable](https://stackoverflow.com/questions/8681381/how-can-i-make-an-element-draggable-but-not-its-child-elements-using-jquery-ui)，但恐怕我不能保证这如何与 Flash 内容一起使用。

# asp.net-mvc - 为什么创建新 ViewModel 会返回与旧 ViewModel 相同的数据？

> ID：11019228
> 
> 赞同：1
> 
> 时间：2012-06-13T16:24:40.267
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我现在只是在学习 MVC3，这真的让我很困惑。

我有一个`ViewModel`包含一些子视图模型。每个 ChildViewModel 都使用不同的 Partial View 渲染，并在提交时在 Controller 上执行不同的操作。所有 ChildViewModel 都应该对其数据执行一些自定义验证，如果成功，它应该转到下一页。如果验证失败，它应该简单地返回`ParentView`并显示错误。

```
[HandleError]
public class MyController: Controller
{
    public ActionResult Index()
    {
        var viewModel = new ParentViewModel();
        return View("ParentView", viewModel);
    }

    [HttpPost]
    public ActionResult ChildViewModelB_Action(ChildViewModelB viewModel)
    {
        if (ModelState.IsValid)
        {
            return View("ChildViewModelB_Page2", viewModel);
        }
        else
        {

            // I'm having trouble returning to the ParentView and
            // simply displaying the ChildViewModel's errors, however
            // discovered that creating a new copy of the VM and displaying 
            // the ParentView again shows the existing data and any errors
            // But why??
            var vm = new ParentViewModel();
            return View("ParentView", vm);
        }
    }
} 
```

例如，

*   该页面加载了 3 个选项。
*   用户选择选项 B 并填写表格。
*   提交后，子 ViewModel B 得到验证并失败。
*   页面返回 ParentView，ChildB 全部填写完毕，但 ChildB 错误现在也显示出来。

为什么创建与原始数据相同的`ParentViewModel`显示的新副本？`ParentView``ParentViewModel`

`ParentView`在进行服务器端验证之后，我应该以不同的方式返回吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:51:17.713

如果您打算修改 POST 操作中的值，则需要清除模型状态

```
else
{
    ModelState.Clear();
    var vm = new ParentViewModel();
    return View("ParentView", vm);
} 
```

这样做的原因是因为诸如 TextBoxFor 之类的 Html 助手在绑定它们的值时将首先查看模型状态，然后再查看模型。而且由于模型状态已经包含 POSTed 值，这就是所使用的 => 模型被忽略。这是设计使然。

话虽这么说，在您的情况下正确的做法是简单地重定向到已经使模型空白的 GET 操作并尊重[Redirect-After-Post 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)：

```
else
{
    return RedirectToAction("Index");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:43:15.817

> 为什么创建 ParentViewModel 的新副本会显示与原始 ParentViewModel 具有相同数据的 ParentView？

因为字段的值是从 POSTed 表单中检索的，而不是从模型中检索的。这是有道理的吧？我们不希望用户显示一个填充了与他们提交的值不同的值的表单。

# python - 阿帕奇蟒错误

> ID：11019229
> 
> 赞同：1
> 
> 时间：2012-06-13T16:24:42.767
> 
> 标签：python, django, apache, mod-wsgi, wsgi

我在我的错误日志文件中得到了这个。我一直在寻找解决方案，但一无所获。我正在尝试使用 mod_wsgi 部署 django。

```
[Wed Jun 13 12:15:53 2012] [error] [client 207.46.13.117] ImportError: /usr/lib/python2.6/lib-dynload/_functools.so: wrong ELF class: ELFCLASS32
[Wed Jun 13 12:15:53 2012] [error] [client 207.46.13.117] mod_wsgi (pid=20219): Target WSGI script '/home/dbs/public_html/test.wsgi' cannot be loaded as Python module.
[Wed Jun 13 12:15:53 2012] [error] [client 207.46.13.117] mod_wsgi (pid=20219): Exception occurred processing WSGI script '/home/dbs/public_html/test.wsgi'.
[Wed Jun 13 12:15:53 2012] [error] [client 207.46.13.117] Traceback (most recent call last):
[Wed Jun 13 12:15:53 2012] [error] [client 207.46.13.117]   File "/home/dbs/public_html/test.wsgi", line 6, in <module>
[Wed Jun 13 12:15:53 2012] [error] [client 207.46.13.117]     import django.core.handlers.wsgi
[Wed Jun 13 12:15:53 2012] [error] [client 207.46.13.117]   File "/home/dbs/sites/domain.com/django/core/handlers/wsgi.py", line 2, in <module>
[Wed Jun 13 12:15:53 2012] [error] [client 207.46.13.117]     from threading import Lock
[Wed Jun 13 12:15:53 2012] [error] [client 207.46.13.117]   File "/usr/lib/python2.6/threading.py", line 13, in <module>
[Wed Jun 13 12:15:53 2012] [error] [client 207.46.13.117]     from functools import wraps
[Wed Jun 13 12:15:53 2012] [error] [client 207.46.13.117]   File "/usr/lib/python2.6/functools.py", line 10, in <module>
[Wed Jun 13 12:15:53 2012] [error] [client 207.46.13.117]     from _functools import partial, reduce 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:28:58.147

您安装的`functional`模块版本错误。要么安装正确的二进制版本，要么使用纯 python 版本。

# reporting-services - 具有多值参数的空白参数不返回任何内容

> ID：11019230
> 
> 赞同：1
> 
> 时间：2012-06-13T16:24:42.993
> 
> 标签：reporting-services

我有三个参数（@person_id、@Person_name、@Supervisor_name），都启用了*允许多个值*和*允许空白值*属性。

报告的列是使用具有相同列的数据集表创建的 Person_id、Person_name、Supervisor_name、Claims_done、average_claims_perday。

返回数据的数据集在查询中有过滤器：

```
where @person_id in (@person_id) 
or [PersonName] in (@Person_name)
or Supervisor_name in (@supervisor_name) 
```

要求在三个参数中，如果任何一个参数为空，则查询应根据多值选择的参数给出结果。

例如：数据集创建以下结果。

11, abc, 约翰, 12, 3
22, def, 约翰, 345, 9
33, ghi, bryan, 89, 7
44, jkl, bryan, 45, 6
55, mno, bryan, 60, 7

如果我选择参数 @Person_name = 'mno' 和 @Supervisor_name = 'John' 并保持 @person_id 为空白，那么它应该给出结果：

11, abc, 约翰, 12, 3
22, def, 约翰, 345, 9
55, mno, 布莱恩, 60, 7

如果我选择@person_id = 11、44 和@Supervisorname = 'John'，并将@Person_name 留空，那么它应该给出结果：

11, abc, 约翰, 12, 3
22, def, 约翰, 345, 9
44, jkl, 布莱恩, 45, 6

当我将任何参数保留为空白时，报告不会显示任何内容，如果我为所有参数选择至少一个值，它会给出完美的结果。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:36:09.000

如果我理解正确，您对处理参数的要求可以改写为：*如果设置了参数，则对其进行过滤；否则不要过滤它。*

如果正确，请将 where 子句更改为以下内容：

```
WHERE (Person_id in (@person_id) OR @person_id = '')
AND (PersonName in (@Person_name) OR @Person_name = '')
AND (Supervisor_name in (@supervisor_name) OR @supervisor_name = '') 
```

这意味着必须满足*每个*参数*，或者**必须*为空白。

# java - “错误：未正确定义 JAVA_HOME。” 在构建 Jikes rvm

> ID：11019231
> 
> 赞同：6
> 
> 时间：2012-06-13T16:24:46.680
> 
> 标签：java, jvm, environment-variables, java-home, jikes

当我在 Ubuntu 上构建 Jikes RVM 时，我得到了这个错误。任何的想法？

```
bin/buildit localhost production
---> Config: production
/bin/bash --login -c  '/bin/bash --login -c  "   cd /home/jack/Programs/jikesrvm-3.1.2 &&  export JAVA_HOME=/opt/jdk1.6.0 &&   ant very-clean -Dhost.name=ia32-linux &&  ant check-components-properties -Dhost.name=ia32-linux -Dtarget.name=ia32-linux -Dcomponents.cache.dir=/home/jack/.buildit_components_cache  &&   ant -Dtarget.name=ia32-linux -Dconfig.name=production -Dhg.revision= -Dhost.name=ia32-linux -Dcomponents.cache.dir=/home/jack/.buildit_components_cache "' 
Error: JAVA_HOME is not defined correctly.
  We cannot execute /opt/jdk1.6.0/bin/java
Wed Jun 13 12:23:37 EDT 2012
===================== Summary =====================
Local   : /home/jack/Programs/jikesrvm-3.1.2
Build   : ubuntu:/home/jack/Programs/jikesrvm-3.1.2
Target  : ubuntu:/home/jack/Programs/jikesrvm-3.1.2
Start   : Wed Jun 13 12:23:37 EDT 2012
Config  : production [FAILED Wed Jun 13 12:23:37 EDT 2012]
=================================================== 
```

操作系统：

```
Linux ubuntu 2.6.32-24-generic #39-Ubuntu SMP Wed Jul 28 06:07:29 UTC 2010 i686 GNU/Linux 
```

环境变量：PATH

```
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/lib/jvm/java-6-sun-1.6.0.22/bin< 
```

JAVA_HOME

```
/usr/lib/jvm/java-6-sun-1.6.0.22 
```

我`java`在`JAVA_HOME/bin`目录中检查了它，它可以工作。无论我如何更改环境变量，错误一直在抱怨

> “我们无法执行 /opt/jdk1.6.0/bin/java”。

看来我没有修改正确的“位置”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T18:25:05.587

运行这个命令：

```
find . -exec grep "jdk1.6.0" {} \; 
```

找出哪个文件将 JAVA_HOME 设置为该路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T12:52:13.447

在构建 jikes 时，您可以使用 ant 或使用您正在使用的命令来构建它。如果 JAVA_HOME 问题导致使用麻烦

```
bin/buildit localhost production -j"path to your jvm directory" 
```

- 这出现在“ `/usr/bin/jvm`”中。

另一种方法：有bin/buildit.base_config，其中特别提到了JAVA_HOME的路径。所以在“ `# Default JAVA_HOME values`”下可以修改适当的位置，例如，

```
global.javahome.ppc32-linux=/usr/lib/jvm/java-6-sun-1.6.0.26
global.javahome.ppc64-linux=/usr/lib/jvm/java-6-sun-1.6.0.26
global.javahome.ia32-linux=/usr/lib/jvm/java-6-sun-1.6.0.26
global.javahome.x86_64-linux=/usr/lib/jvm/java-6-sun-1.6.0.26 
```

您可以选择要使用的。如果不熟悉您的架构，请修改所有内容，现在您可以构建，而不必担心明确提及您的 java 路径。有关更多详细信息，请查看[此博客](http://jikes-research.blogspot.in/)

我还写了一篇关于如何[开始摆弄 Jikes的小文章](https://www.academia.edu/22910870/How_to_fiddle_with_Jikes_RVM)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:21:43.723

它是 JRE，但不是 JDK。安装 JDK 并使 JAVA_HOME 指向它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-05-27T09:30:54.480

由于几个原因，您可能会收到此错误。要快速解决此问题，请按照以下步骤操作，

首先找到java位置。要获取已安装 Java 平台的列表，请从终端运行以下命令：

```
$ sudo update-alternatives --config java 
```

现在设置 JAVA_HOME 和 PATH，

```
$ export JAVA_HOME=<java_home>

$ export PATH=$JAVA_HOME/jre/bin:$PATH 
```

创建符号链接

```
$ sudo ln -s <java_home>/jre <java_symlink_path> 
```

当我们以您的案例为例时：

```
$ sudo ln -s /usr/lib/jvm/java-6-sun-1.6.0.22/jre /opt/jdk1.6.0 
```

Above command will create the symlink location where the system is trying to find in your issue.

Finally do the try your app.

# c++ - 如何为一系列整数值专门化 C++ 模板？

> ID：11019232
> 
> 赞同：43
> 
> 时间：2012-06-13T16:24:56.947
> 
> 标签：c++, templates

有没有一种方法可以基于一系列值而不是一个值来进行模板专业化？我知道以下代码不是有效的 C++ 代码，但它显示了我想做的事情。我正在为 8 位机器编写代码，因此使用整数和字符的速度存在差异。

```
template<unsigned SIZE>
class circular_buffer {
   unsigned char buffer[SIZE];
   unsigned int head; // index
   unsigned int tail; // index
};

template<unsigned SIZE <= 256>
class circular_buffer {
   unsigned char buffer[SIZE];
   unsigned char head; // index
   unsigned char tail; // index
}; 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-13T16:33:23.003

尝试[std::conditional](http://en.cppreference.com/w/cpp/types/conditional)：

```
#include <type_traits>

template<unsigned SIZE>
class circular_buffer {

    typedef typename
        std::conditional< SIZE < 256,
                          unsigned char,
                          unsigned int
                        >::type
        index_type;

    unsigned char buffer[SIZE];
    index_type head;
    index_type tail;
}; 
```

如果您的编译器尚不支持 C++11 的这一部分，则在[boost 库中有等价的。](http://www.boost.org/doc/libs/1_46_1/libs/type_traits/doc/html/boost_typetraits/reference/conditional.html)

话又说回来，自己动手很容易（归功于 KerrekSB）：

```
template <bool, typename T, typename F>
struct conditional {
    typedef T type;
};

template <typename T, typename F>  // partial specialization on first argument
struct conditional<false, T, F> {
    typedef F type;
}; 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-06-13T16:31:32.140

使用额外的默认`bool`参数：

```
// primary template handles false
template<unsigned SIZE, bool IsSmall = SIZE <= 256>
class circular_buffer {
   unsigned char buffer[SIZE];
   unsigned int head; // index
   unsigned int tail; // index
};

// specialization for true
template<unsigned SIZE>
class circular_buffer<SIZE, true> {
   unsigned char buffer[SIZE];
   unsigned char head; // index
   unsigned char tail; // index
}; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-13T16:35:49.873

另一种可能的选择：

```
template <unsigned SIZE>
struct offset_size {
    typedef typename offset_size<SIZE - 1>::type type;
};

template <>
struct offset_size<0> {
    typedef unsigned char type;
};

template <>
struct offset_size<257> {
    typedef unsigned int type;
};

template<unsigned SIZE>
class circular_buffer {
   unsigned char buffer[SIZE];
   typename offset_size<SIZE>::type head; // index
   typename offset_size<SIZE>::type tail; // index
}; 
```

（[ideone例子](http://ideone.com/vYPow)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-08T20:45:30.290

我讨厌处理类型会变得多么混乱，所以我提出了一些更简单的东西，利用`constexpr`. 当不需要变化类型时，此变体允许不同的行为，并解决了适合范围而不是值的一侧的需要：

```
template<bool> struct If;

constexpr bool InClosedRange(std::size_t Value, std::size_t Lower, std::size_t Upper)
{
    return (Lower <= Value) && (Value <= Upper);
}

// Usage:
template<size_t Width, If<true>>
class Foo;

template<size_t Width, If<InClosedRange(Width, 1, 41)>>
class Foo { /* ... */ };

template<size_t Width, If<InClosedRange(Width, 42, 142)>>
class Foo { /* ... */ }; 
```

灵感来源：[https ://stackoverflow.com/a/9516959/929315](https://stackoverflow.com/a/9516959/929315)

# c# - C# 中的 Facebook 扩展权限

> ID：11019239
> 
> 赞同：0
> 
> 时间：2012-06-13T16:25:13.707
> 
> 标签：c#, asp.net, facebook, permissions, facebook-oauth

我正在开发一个 Facebook 应用程序（使用 ASP.NET C# 和 Nathan Totten 的 Facebook C# SDK）并尝试访问扩展权限。我在 localhost 上尝试过（使用 facebook 中的现有应用程序），每个人都可以工作。但是当我尝试直接在 facebook 中使用它时，我得到一个空白页面（我仍然在 facebook 上连接）。

这是我的代码：

页面/aspx：

```
protected void btn_ask_question_Click(object sender, EventArgs e)
    {
        if (ControllerAccess.testUserConnected())
        {
            if (txt_ask_question.InnerText != "")
            {
                Dictionary<string, object> action = new Dictionary<string,object>();
                action.Add("action", "askQuestion");
                action.Add("message", txt_ask_question.InnerText);
                action.Add("idTheme", ddl_choose_question_category.SelectedValue);
                HttpContext.Current.Session["ActionToDo"] = action;
                String s = Controller.GetExtendedPermission2(this, ControllerAccess.getScopeByAction("askQuestion"));
                try{
                    Response.Redirect(s, false);
                } catch(Exception ex)
                {
                }
            }
        }
    } 
```

在我的 Page_Load() 中：

```
if (HttpContext.Current.Session["ActionToDo"] != null)
            {
                Dictionary<string, object> action = HttpContext.Current.Session["ActionToDo"] as Dictionary<string, object>;
                String s = action["action"].ToString();
                switch (s)
                {
                    case "askQuestion":
                        Guid idTheme;
                        Boolean themeExists =  Guid.TryParse(action["idTheme"].ToString(), out idTheme);
                        if(themeExists)
                        {
                            askQuestion(action["message"].ToString(), idTheme);
                            lbl_errors.Text = "Votre question a bien été posée";
                        }
                        break;
                    default:
                        break;
                }
                HttpContext.Current.Session["ActionToDo"] = null;
            } 
```

在 Control.cs 中：

```
 public static string GetCustomOAuthDialogParameters(string AppID, string RedirectURI, string Scope, string State)
    {
        string CustomParameters = "?client_id=" + AppID + "&redirect_uri=" + RedirectURI + "&scope=" + Scope + "&state=" + State;
        return CustomParameters;
    }

    public static void GetExtendedPermission(Page page, String scope)
    {

        ecritureFichier("GetExtendedPermission");
        Label lbl_errors = page.Form.FindControl("lbl_errors") as Label;
        string OAuthDialogAbsoluteURL = "";
        try
        {
            string OAuthDialogURL = "https://www.facebook.com/dialog/oauth";
            string PageLocation = GetCurrentPageFacebookPublishedPath(page.Request); //The redirect page (eg: https://apps.facebook.com/democsharpsdk/TestsExtendedPermission.aspx)
            string UniqueReferenceCode = Guid.NewGuid().ToString();

            OAuthDialogAbsoluteURL = OAuthDialogURL + GetCustomOAuthDialogParameters(AppID, PageLocation, scope, UniqueReferenceCode);
            page.Response.Redirect(OAuthDialogAbsoluteURL, false);
        }
        catch (Exception exp)
        {
            lbl_errors.Text += "Erreur Catchée via ASP.NET : " + exp.Message;
        }
    } 
```

当我使用这一行时出现空白页： page.Response.Redirect(OAuthDialogAbsoluteURL, false);

但是我记录了所有步骤，并且我的 OAuthDialogAbsoluteURL 是正确的：

[https://www.facebook.com/dialog/oauth?client_id=XXXXXXXXXXXXXXXXX&redirect_uri=https://apps.facebook.com/name_of_my_app&scope=email&state=0443030f-dddd-4fe6-9d6c-9454409d01b3](https://www.facebook.com/dialog/oauth?client_id=XXXXXXXXXXXXXXXXX&redirect_uri=https://apps.facebook.com/name_of_my_app&scope=email&state=0443030f-dddd-4fe6-9d6c-9454409d01b3)

当我手动将其输入地址栏中时，一切正常。

您对本地版本和已发布版本之间的区别或重定向不起作用的原因有任何想法吗？也许facebook会阻止一些请求？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:26:41.363

如果您想使用该应用程序测试不同的环境，请确保您的设置指向托管版本。出于安全原因，Facebook 不允许您授权来自未连接到您的应用程序的站点的用户。

通常，您会看到诸如“URL 不属于应用程序”之类的错误或类似的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:22:19.727

我终于使用 Chrome Debugger 解决了我的问题。错误是：

```
Refused to display document because display forbidden by X-Frame-Options 
```

我使用 Javascript 来修复它，并且我的重定向是这样的：

```
Response.Write("<script>");
Response.Write("window.open('"+redirect+"','_top')");
Response.Write("</script>"); 
```

希望它会帮助一些人。

# c# - 尝试使用 htmlagiliypack 从 htmlnode 提取链接时遇到问题

> ID：11019240
> 
> 赞同：0
> 
> 时间：2012-06-13T16:25:14.050
> 
> 标签：c#, html, scrape

[这是我之前提出的问题的后续。](https://stackoverflow.com/questions/11015527/extract-the-contents-of-a-string-between-two-string-delimiters-using-match-in-c)

[我从这里得到了非常出色的链接解析代码。](http://runtingsproper.blogspot.com/2009/11/easily-extracting-links-from-snippet-of.html)

所以我有以下形式的html：

```
<html>
    <head>
        RANDOM JAVASCRIPT AND CSS AHHHHHH!!!!!!!!
    </head>
    <body>
        <a href="/Random/link/here">Random</a>
        <a href="/Random/link/here">Random</a>
        <a href="/Random/link/here">Random</a>
        <a href="/Random/link/here">Random</a>
        <a href="/Random/link/here">Random</a>
        <a href="/Random/link/here">Random</a>
        <table class="table">
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
            <tr><a href="/subdir/members/Name">Name</a></tr>
        </table>
    <body>
</html> 
```

我有以下代码，创建的目的是提取 中包含的信息，然后从该信息中提取链接：

```
public class MainClass
{
    public static void Main(String[] args)
    {
        string url = args[1];
        Extractinfo pageScrape = new Extractinfo();
        pageScrape.RenderPage(url);
    }
}
public class Extractinfo
{
    public HtmlDocument RenderPage(string url)
    {
        try
        {
                HtmlDocument pageSource = new HtmlDocument();
                var webGet = new HtmlWeb();
                pageSource = webGet.Load(url);

                ExtractLinks(pageSource);
        }
        catch (WebException e)
        {
            Console.WrtieLine(e.Message + ": " + e.StackTrace);
        }
    }

    private List<string> ExtractHrefTags(HtmlNode htmlSnippet)
        {
            List<string> hrefTags = new List<string>();

            foreach (HtmlNode link in htmlSnippet.SelectNodes("//a[@href]"))
            {
                HtmlAttribute att = link.Attributes["href"];
                hrefTags.Add(att.Value);
            }

            return hrefTags;
        }

        public void ExtractLinks(HtmlDocument pagesource)
        {

            var elements = pagesource.DocumentNode.SelectNodes("//table[@class='table']");
            List<string> hrefTags = new List<string>();
            foreach (var ele in elements)
            {
                 hrefTags = ExtractHrefTags(ele);
            }
        }
    }
} 
```

现在，`<table class="table>*****</table>`这段代码将页面上的所有链接都放入 List hreftags 中，而不是只获取位于 中的链接。我在这里做错了什么？如何修复错误，以便提取的唯一链接是其中的链接`<table class="table>*****</table>`？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:29:13.677

您需要添加一个“。” 到您的 XPath 以匹配表的子节点，如下所示：

```
htmlSnippet.SelectNodes(".//a[@href]") 
```

# python - PIL 安装问题 - 似乎我可能缺少一些必需的库，但是哪些以及如何安装？

> ID：11019241
> 
> 赞同：0
> 
> 时间：2012-06-13T16:25:16.430
> 
> 标签：python, installation, python-imaging-library

我在我的 Python/Django 站点上上传图像时出错，因此安装了 PIL 库（在带有 CentOS 的 python 2.4 上为 1.1.6），并且还使用 $ sudo yum install freetype freetype-devel jpeg jpeg-devel libpng libpng 安装了 jpeg 库-devel 和使用 wget 的 pil 库[http://effbot.org/downloads/Imaging-1.1.6.tar.gz](http://effbot.org/downloads/Imaging-1.1.6.tar.gz)

解压后运行：python setup.py build_ext -i 和 sudo python setup.py install

我收到一长串错误，但它们以（以前的都是关于错误：预期属性等...）：

```
_imaging.c:3041: error: expected â=â, â,â, â;â, âasmâ or â__attribute__â before        âfunctionsâ
_imaging.c:3138: warning: return type defaults to âintâ
_imaging.c: In function âDL_EXPORTâ:
_imaging.c:3138: error: expected declaration specifiers before âinit_imagingâ
_imaging.c:3149: error: expected â{â at end of input
error: command 'gcc' failed with exit status 1 
```

请让我知道是否需要更多错误消息才能正确排除故障。

# php - 空格在数据库的输出中不可见

> ID：11019242
> 
> 赞同：0
> 
> 时间：2012-06-13T16:25:16.743
> 
> 标签：php, html, css, whitespace

我以以下格式将一些数据存储在数据库中：

```
 XXXXX
      X
    XXXXX 
```

空格很重要。当我使用 PHP 从数据库中检索数据然后将其输出到我的 HTML 页面时，空格被删除。

我正在使用[nl2br](http://php.net/nl2br)将换行符转换为`<br>`标签，效果很好。有什么我可以用来为空间做同样的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:28:31.500

您正在输出到不显示连续空格的 HTML 页面。您可以将输出包装在`<pre>` `</pre>`（预先格式化的标签）中，以便在存储空间时显示它们。

或者，您可以将 CSS 样式`white-space: pre`应用于要在其中输出的 HTML 元素。`white-space` [你可以在这里](http://www.w3.org/wiki/CSS/Properties/white-space)阅读不同的价值。

请注意，默认行为是`normal`以下状态：

> 该值指示用户代理折叠空白序列

# java - java URL文件下载

> ID：11019244
> 
> 赞同：1
> 
> 时间：2012-06-13T16:25:25.097
> 
> 标签：java, url

我正在尝试创建一个 Java 控制台应用程序，它将从 URL 下载文件。该文件是在运行时创建的，我不知道文件名。当我在浏览器中复制并粘贴 URL 时，会弹出保存文件以保存文件。现在我想创建登录到服务器的 Java 代码（验证我已经完成的用户）转到该 URL 并下载文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:35:27.567

Sergii 的回答是一个好的开始；但是，如果您要使用的网站需要的不仅仅是简单的下载，请考虑使用[Apache 的 HttpClient](http://hc.apache.org/httpclient-3.x/features.html)。

它支持 cookie、身份验证、URI 以及 URL 和文件上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:29:16.150

来自文档的简单示例，只是将您的网址设置为[http://www.oracle.com/](http://www.oracle.com/)，然后更改`System.out.println(inputLine);`为在磁盘上写入文件。

```
import java.net.*;
import java.io.*;

public class URLReader {
    public static void main(String[] args) throws Exception {

        URL oracle = new URL("http://www.oracle.com/");
        BufferedReader in = new BufferedReader(
        new InputStreamReader(oracle.openStream()));

        String inputLine;
        while ((inputLine = in.readLine()) != null)
            System.out.println(inputLine);
        in.close();
    }
} 
```

# java - SwitchPreference onChecked/onClick 监听器

> ID：11019248
> 
> 赞同：32
> 
> 时间：2012-06-13T16:25:52.667
> 
> 标签：java, android

我整晚都在绞尽脑汁，但似乎无法完成这件小事。我想将 SwitchPreference 添加到我的应用程序的 PreferenceActivity 中。下面是一张图片。

在我说太多之前，我的问题就是这样：我似乎不能只在偏好的 Switch 部分上放置一个监听器。我可以在首选项上设置一个 onPreferenceTreeClick 和一个 onPreferenceClick ，如果我按下文本部分，效果很好。但是当我将它从关闭更改为开启时，开关本身什么也不做。

我已阅读有关[SwitchPreference](http://developer.android.com/reference/android/preference/SwitchPreference.html)的文档。我还查看了 android/packages/Settings，看起来 AOSP 使用的是 Switch，而不是 Wi-Fi 和蓝牙的 SwitchPreference。

这是我的尝试（如果您按下整个首选项，则工作，但如果您仅按下 Switch，则不会）：

样本：

```
public class Preferences extends SherlockPreferenceActivity {

public static final String PREF_THEME = "pref_theme_interface";
public static final String PREF_ROOT = "pref_root";
public static final String PREF_APP = "pref_app";

public static SharedPreferences mTheme;
private static SharedPreferences mUpdate;
public static SharedPreferences.Editor mEditor;

public boolean SDK_COMPAT = true;

boolean pSwitch = false; 
boolean update = true;

Preference autoUpdate;

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            this.finish();
            break;
    }
    return super.onOptionsItemSelected(item);
}

    @Override
protected void onCreate(Bundle savedInstanceState) {
    setTheme(MainActivity.THEME);
    super.onCreate(savedInstanceState);
    final ActionBar actionBar = getSupportActionBar();
    actionBar.setHomeButtonEnabled(true);
    actionBar.setDisplayHomeAsUpEnabled(true);
    actionBar.setIcon(R.drawable.ic_preferences);

    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
        SDK_COMPAT = false;
    }

    mUpdate = PreferenceManager.getDefaultSharedPreferences(this);
    update = mUpdate.getBoolean("update", false);

    // Load the preferences from an XML resource
    addPreferencesFromResource(R.xml.preferences);

    setPreferenceScreen(createPreferenceSDK());

}

private PreferenceScreen createPreferenceSDK() {
    // Root
    PreferenceScreen root = (PreferenceScreen)findPreference(PREF_ROOT);

    PreferenceCategory prefApp = (PreferenceCategory)findPreference(PREF_APP);

    //root.addPreference(prefApp);

    if (SDK_COMPAT == true) {
        pSwitch = true;
        autoUpdate = new SwitchPreference(this);
        autoUpdate.setKey("auto_update_pref");
        autoUpdate.setTitle(R.string.auto_update);
        //autoUpdate.setSummary(update == false ? "Disabled" : "Enabled");
        prefApp.addPreference(autoUpdate);
    } else {
        pSwitch = false;
        autoUpdate = new CheckBoxPreference(this);
        autoUpdate.setKey("auto_update_pref");
        autoUpdate.setTitle(R.string.auto_update);
        autoUpdate.setSummary(R.string.auto_update_summary);
        prefApp.addPreference(autoUpdate);
    }

    autoUpdate.setOnPreferenceClickListener(new OnPreferenceClickListener() {

        public boolean onPreferenceClick(Preference preference) {
            mEditor = mUpdate.edit();
            boolean checked = ((SwitchPreference) preference)
                    .isChecked();
            if (checked) {
                update = true;
                mEditor.putBoolean("update", true);
                mEditor.commit();
                autoUpdate.setSummary(update == false ? "Disabled" : "Enabled");
            } else {
                update = false;
                mEditor.putBoolean("update", false);
                mEditor.commit();
                autoUpdate.setSummary(update == false ? "Disabled" : "Enabled");
            }
            return true;
        }

    });

    return root;
} 
```

所以重申我的问题，以防我失去你。如何在 SwitchPreference 的 Switch 部分设置监听器？如果事情如此明显，请善待。当我试图添加这个时，昨晚已经很晚了。

非常感谢你。

注意事项： 1\. 我不反对坚持使用 CheckBoxPreference，但我更喜欢使用 Switch，因为它看起来不错。

1.  是的，我知道有一个更简单/更好的方法？使用 res/xml 和 res/xml-v14 添加动态首选项的方法，而不是进行 SDK 检查。我只是为了测试而这样做。

[偏好屏幕的图片](http://i.imgur.com/Pqdodl.png)

**编辑**

希望这对其他人有帮助！感谢 Tushar 的建议:-)

```
autoUpdate.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {

        @Override
        public boolean onPreferenceChange(Preference preference,
                Object newValue) {
            boolean switched = ((SwitchPreference) preference)
                    .isChecked();
            update = !switched;
            mEditor = mUpdate.edit();
            mEditor.putBoolean("update", update);
            mEditor.commit();
            autoUpdate.setSummary(update == false ? "Disabled" : "Enabled");

            return true;
        }

    }); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-13T20:25:51.600

使用`setOnPreferenceChangeListener()`而不是`setOnPreferenceClickListener()`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-12-16T12:02:01.200

工作代码

```
public static class SettingsFragment extends PreferenceFragment {

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            addPreferencesFromResource(R.xml.pref_notification);

            SwitchPreference vibrateSwitch = (SwitchPreference) findPreference("notification_vibrate");

            if (vibrateSwitch != null) {
                vibrateSwitch.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {
                    @Override
                    public boolean onPreferenceChange(Preference arg0, Object isVibrateOnObject) {
                        boolean isVibrateOn = (Boolean) isVibrateOnObject;
                        if (isVibrateOn) {
                            Vibrator v = (Vibrator) getActivity().getSystemService(Context.VIBRATOR_SERVICE);
                            v.vibrate(400);
                        }
                        return true;
                    }
                });
            }
        }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T08:29:38.077

如果您还没有想出一个好的方法来做到这一点，我已经想出了一些不会创建多个调用的方法，`onPreferenceChange`而单击首选项会这样做。我在另一个问题中写了它：[双重功能 SwitchPreference](https://stackoverflow.com/a/17588533/1570640)。

# ruby-on-rails - :counter_cache => true 用于存储总和

> ID：11019253
> 
> 赞同：6
> 
> 时间：2012-06-13T16:26:33.460
> 
> 标签：ruby-on-rails, counter-cache

我有桌子`users`和`scores`。以下是关联：

```
belongs_to :user #score model
has_many :scores #user model 
```

该表`users`具有名为 的列`scores_count`。在此列中，我存储表中所有值的总和`scores`。

我想用这种方式将所有的总和存储`scores`在列中[`scores_count: :counter_cache => true`](http://railscasts.com/episodes/23-counter-cache-column?view=asciicast)

但`:counter_cache => true`只保存表中的行数`scores`。有没有类似的方法来存储表中所有值的总和`scores`？还是我必须自己执行此任务？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-03T11:25:15.793

您可以使用[counter_culture](https://github.com/magnusvk/counter_culture#totaling-instead-of-counting)宝石。

```
class Score < ActiveRecord::Base
  belongs_to :user
  counter_culture :user, column_name: 'scores_sum', delta_column: 'score_value'
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T16:39:19.033

不，你必须自己实现它。计数器缓存仅用于存储关联记录的数量。您可以使用回调来实现它`Score`以更新关联的`User`. 另请参阅[如何在 rails 中缓存计算列？](https://stackoverflow.com/questions/181090/how-can-i-cache-a-calculated-column-in-rails)

此外，除非每次求和都有明显的性能问题，否则请避免使用这样的缓存。这只是很容易出错和过时的东西。如果你真的不需要它，那就不值得麻烦了。

# php - 使用 CSV 文件更新 MySQL 表

> ID：11019255
> 
> 赞同：2
> 
> 时间：2012-06-13T16:26:41.050
> 
> 标签：php, mysql, csv

我当前的 MySQL 表`employee_data`有 13k 行和 17 列。表中的数据来自 CSV 文件`Employees.csv`。导入我的 csv 数据后，我添加了一个新列“密码”（因此它不在 csv 文件中）密码是通过门户网站编辑和访问的。我现在有一个更新的 csv 文件，我想用该数据更新我的主表，但我不想丢失我的密码信息。

我是否应该将新的 CSV 文件导入数据库中的临时表中，以及如何比较它们？我不知道从哪里开始，我愿意接受建议。

**我现在意识到我应该将密码信息保存在单独的表格中。嗬！**

我想我可以创建一个 php 文件，根据employee_id 字段比较每一行，但如果有 13k 行，恐怕它可能会超时。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T16:39:48.077

我会这样做：

*   使用语法创建[临时表](http://dev.mysql.com/doc/refman/5.0/en/create-table.html)`CREATE TABLE new_tbl LIKE orig_tbl;`
*   用于[`LOAD DATA INFILE`](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)将数据从 CSV 导入表中
*   用于使用[`UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/update.html)主键/唯一列更新主表（也许`employee_id`）

我处理过包含 1.2 亿行的表格，并将包含 3000 万行的 CSV 文件导入其中 - 这是我一直使用的方法 - 比 PHP 中的任何方法都高效（这也是我选择的服务器端语言）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:36:54.037

尝试除基于 php 的工具以外的其他工具*phpMyAdmin* [MySQL 工作台](http://www.mysql.com/products/workbench/)是一个很棒的工具，根据您的连接，使用您的数据查询数据库需要一段时间。
有 php 超时限制的解决方法， [set_time_limit();](http://php.net/manual/en/function.set-time-limit.php)

# javascript - Internet Explorer 现代化工具

> ID：11019257
> 
> 赞同：4
> 
> 时间：2012-06-13T16:26:52.173
> 
> 标签：javascript, jquery, internet-explorer, cross-browser

我想知道你们中是否有人知道一些库可以帮助/改善 IE >= 7 对我必须修改的网站的响应。

我已经加载了modernizr 库，但我知道有一些库可以帮助IE 表现得像现代浏览器一样。那么，你有什么推荐的？我有什么选择？

我真的厌倦了花几个小时试图为 X 版本的 IE 修复一件事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T12:46:57.890

我不认为这很简单。我不知道有一个库可以让它们都表现得“正常”。我使用的一些是：

*   Modernizr 可以帮助旧浏览器中的新 html5 元素
*   用于跨浏览器 DOM 操作的 jQuery
*   用于跨浏览器主题的 jQuery UI

但是没有什么灵丹妙药库可以随时随地工作。有时您必须根据浏览器功能调整 UI。这样做的一种常见方法称为[渐进增强](http://en.wikipedia.org/wiki/Progressive_Enhancement)。

> 渐进增强是一种网页设计策略，它强调可访问性、语义 HTML 标记以及外部样式表和脚本技术。渐进式增强以分层方式使用 Web 技术，允许每个人使用任何浏览器或 Internet 连接访问网页的基本内容和功能，同时还为那些拥有更高级浏览器软件或更好带宽的人提供页面的增强版本.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:20:01.890

查看 ie7.js [http://code.google.com/p/ie7-js/](http://code.google.com/p/ie7-js/)它并不完美，但它可以帮助解决一些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T20:35:35.987

您可以告诉用户他们需要安装 Google Chrome Frame [https://developers.google.com/chrome/chrome-frame/](https://developers.google.com/chrome/chrome-frame/)

“Google Chrome Frame 是一个开源插件，可将 Google Chrome 的开放网络技术和快速的 JavaScript 引擎无缝引入 Internet Explorer”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T20:45:48.207

我使用[CSS3Pie](http://css3pie.com/)。这是您放置在服务器上的 .htc 文件，它为许多 CSS3 样式元素（例如边框半径、文本阴影、框阴影和渐变）提供了多边形填充。它非常方便，因为它也解决了 IE8 和 IE9 的许多相同问题。

设置起来可能有点棘手，因为有时您需要在服务器上为 .htc 定义 MIME 类型，并且您必须确保将 CSS 文件中的路径设置为 .htc 文件所在的位置，而不是那，太好了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T04:03:09.787

我认为您的问题没有通用的解决方案。我建议尝试这个名为 dynaTrace AJAX 版 ( [http://www.compuware.com/application-performance-management/ajax-performance-testing.html](http://www.compuware.com/application-performance-management/ajax-performance-testing.html) ) 的工具，免费版足以帮助您。

你要做的是：

1.  开始会话并选择您的 IE 浏览器
2.  打开并单击您的 Web 应用程序
3.  关闭浏览器
4.  双击 dynaTrace 上的“时间轴”。

您会看到网站性能的细分，以便您确定哪个 Javascript 是问题所在。您还将看到减速是否仅仅是因为您加载了不可用的外部资源 - 我发现 IE 处理得不好。

# javascript - 布局渲染后加载 Google Web 字体

> ID：11019258
> 
> 赞同：2
> 
> 时间：2012-06-13T16:26:53.077
> 
> 标签：javascript, jquery, html, webfonts

我的页面上有一个脚本，它使用出色的 jQuery Masonry 插件将一堆框重新排列成像马赛克一样的 pinterest。我从页面底部（就在之前）这样调用框布局渲染方法：

```
<script type="text/javascript">
  $(function() {
    wall.drawBoxes();
  });
</script> 
```

我也使用这样的谷歌网络字体，就在标签之后：

```
<script type="text/javascript">
  WebFontConfig = {
    google: { families: [ 'Montserrat::latin' ] }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })(); 
</script> 
```

问题是这些框是在字体加载之前呈现的。并且当字体加载后，框的大小会增加，使渲染的马赛克布局看起来像废话。

我能做些什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:55:19.463

我添加了`fontactive`触发然后字体完成加载的回调。

```
$(document).ready(function() {

  WebFontConfig = {
    google: { families: [ 'Montserrat::latin' ] },
    fontactive: function(fontFamily, fontDescription) { wall.drawBoxes() }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })(); 

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T13:07:22.333

您可以添加 `loading`回调 - 它会在所有字体完成加载时触发。

```
$(document).ready(function() {

  WebFontConfig = {
    google: { families: [ 'Montserrat::latin' ] },
    loading: function() {wall.drawBoxes()}
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })(); 

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T16:30:35.957

您可以在 drawboxes 调用之前移动 Web 字体调用以首先加载字体。

我建议将您的功能移动到 domready 功能中。例如

您还可以在加载 DOM 之前将字体调用放在`<head>`加载字体中。

你能加载谷歌样式表吗？`<link href="http://fonts.googleapis.com/css?family=Lobster:regular" rel="stylesheet" type="text/css" >`

```
$(document).ready(function() {

  WebFontConfig = {
    google: { families: [ 'Montserrat::latin' ] }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })(); 

  $(function() {
    wall.drawBoxes();
  });

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-28T15:26:14.607

您可以添加回调 - 它会在**所有字体呈现**`active`时触发。

 **```
$(document).ready(function() {

  WebFontConfig = {
    google: { families: [ 'Montserrat::latin' ] },
    active: function() {wall.drawBoxes()}
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })(); 

}); 
```

有关可用事件的参考，请参阅[webfontloader 自述文件](https://github.com/typekit/webfontloader)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-13T16:31:33.193

使用 css 更简单：

```
@import url(http://fonts.googleapis.com/css?family=....); 
```**

# xcode - 如何将我的应用程序的版本号与 Xcode 4.2 中的构建绑定？

> ID：11019261
> 
> 赞同：1
> 
> 时间：2012-06-13T16:27:01.323
> 
> 标签：xcode, version

我现在正在使用 Xcode 4.2。我想知道是否有办法在每次构建应用程序时更新我的​​应用程序的版本（颠覆）号。比如现在是 1.5.17，然后在构建之后会变成 1.5.18

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:30:39.183

您可以通过 sh 脚本增加内部版本号。

单击项目目标中的**构建阶段，然后****添加运行脚本**并添加以下脚本：

```
#!/bin/bash
buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" MYPROJECTDIR/MYPROJECTDIR-Info.plist)
buildNumber=$(($buildNumber + 1))
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" MYPROJECTDIR/MYPROJECTDIR-Info.plist 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-20T16:28:48.137

如果您想推出自己的解决方案，@WrightsCS 的答案非常好。如果您想尝试**Apple**在内部的做法，请查看[使用 agvtool 自动化版本和内部版本号](https://developer.apple.com/library/ios/qa/qa1827/_index.html)。

# tdd - 基于 TDD CRUD 的场景

> ID：11019262
> 
> 赞同：1
> 
> 时间：2012-06-13T16:27:08.847
> 
> 标签：tdd, testdriven.net, testdrivendesign

我有一个简单的基于 CRUD 的应用程序要完成。我正在尝试以 TDD 方式解决此问题。我是 TDD 的新手，实际上无法理解如何进行测试。

场景是：

*   我需要能够创建/更新/删除员工（一次一个）。
*   我需要能够检索员工列表以进行显示

为简单起见，您可以假设这是一个命令行应用程序。（我实际上打算将其作为 WPF MVVM 应用程序来执行。）

我不确定我的第一个测试应该是什么。

到目前为止，我尝试过的是：

假设我有一个返回一组员工的员工存储库。

我尝试的第一个测试是：

```
[Test]
public void RepositoryShouldReturnTheListOfEmployees()
{
    var repository = new EmployeeRepository();
    var employees = repository.GetEmployees();

    Assert.IsNotEmpty(employees);
} 
```

我从这个开始，然后从 GetEmployees() 方法返回一个 Employee 对象以使我的测试通过。然后，一旦测试通过，我就重构了 EmployeeRepository 以实现一个接口并在测试方法上使用它。

这是一项非常微不足道的任务，这种方法对我来说似乎有点过头了（至少现在是这样）。但是我敢肯定，当应用程序变得更大时，即使是微不足道的测试也会开始得到回报。

但我有一种感觉，我的方法有些不对劲。有经验的 TDDer 会采用同样的方法吗？或者那会是什么。我也想不出可以用于“添加员工”功能的测试。

我可以跳过这些 CRUD 场景，并可能尝试测试其他更复杂的功能。但这是正确的方法吗？

基本上我现在正在做的是测试驱动我的存储库，除了持久化和检索信息之外没有做任何事情。到目前为止，这个 TDDing 这对我来说似乎是一项非常平凡的任务。

感谢您的所有投入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:10:40.423

有时做正确的事很无聊。

我是这样看的。。

您的 EmployeeRepository 是一个角色，它应该支持 EmployeeObjects 的 CRUD。所以这是您的应用程序和数据库/数据存储之间的端口。（请参阅端口和适配器模式 Cockburn 等）。

1.  编写测试来记录 EmployeeRepository 必须满足的规范。这些测试调用角色/接口上的方法。您应该能够替换任何实现（在设置中创建实例）并能够针对它运行测试。例如 SqlEmployeeRepository。这将有资格作为集成测试 - 您正在测试 sql 子系统是否遵循 EmployeeRepository 合同。每个成员都以 advt 的身份工作。
2.  应用程序其余部分的单元测试将为此角色使用模拟。他们将测试您的应用程序是否对 EmployeeRepository 进行了正确调用。Step1 将确保您的测试快速运行。因为您已经从测试中消除了 SQL 依赖关系。

# javascript - JavaScript中索引数组的多维索引

> ID：11019269
> 
> 赞同：1
> 
> 时间：2012-06-13T16:27:26.167
> 
> 标签：javascript, arrays, indexing, switch-statement, multidimensional-array

JavaScript中有没有办法选择多维数组的元素。其中深度/等级/维度是可变的，键由索引数组给出。这样我就没有分别处理每个可能的维度深度。具体来说，我想摆脱像这里这样的开关盒：

```
/**
 * set tensor value by index
 * @type {array} indices [ index1, index2, index3 ] -> length == rank.
 * @type {string} value.
 */
tensor.prototype.setValueByIndex = function( indices, value ) {
    var rank = indices.length;

    switch(rank) {
        case 0:
            this.values[0] = value;
        break;
        case 1:
            this.values[indices[0]] = value;
        break;
        case 2:
            this.values[indices[0]][indices[1]] = value;
        break;
        case 3:
            this.values[indices[0]][indices[1]][indices[2]] = value;
        break;
    }
} 
```

this.values**是**一个多维数组。

这样我得到的东西看起来更像这样：

```
/**
 * set tensor value by index
 * @type {array} indices, [ index1, index2, index3 ] -> length == rank
 * @type {string} value
 */
tensor.prototype.setValueByIndex = function( indices, value ) {
    var rank = indices.length;

    this.values[ indices ] = value;
} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:51:23.587

```
tensor.prototype.setValueByIndex = function( indices, value ) {
    var array = this.values;
    for (var i = 0; i < indices.length - 1; ++i) {
        array = array[indices[i]];
    }
    array[indices[i]] = value;
} 
```

这用于`array`指向我们当前所在的嵌套数组，并通过 for 读取从 current`indicies`中查找下一个值。一旦我们到达列表中的最后一个索引，我们就找到了要存放值的数组。最终索引是我们存放值的最终数组中的插槽。`array``array``indices`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:30:18.933

像这样？

```
tensor.prototype.setValueByIndex = function( indices, value ) {
  var t = this, i;
  for (i = 0; i < indices.length - 1; i++) t = t[indices[i]];
  t[indices[i]] = value;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T16:43:21.197

像这样的东西：

```
tensor.prototype.setValueByIndex = function( indexes, value ) {
    var ref = this.values;  
    if (!indexes.length) indexes = [0];  
    for (var i = 0; i<indexes.length;i++) {
       if (typeof ref[i] === 'undefined') ref[i] = [];
       if (ref[i] instanceof Array) {  
           ref = ref[i];
       } else {
           throw Error('There is already value stored') 
       }
    } 
    ref = value;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T16:56:13.197

你为什么想这么做？我会说写作

```
tensor.values[1][5][8][2] = value; 
```

比

```
tensor.setValues([1, 5, 8, 2], value); 
```

如果你真的需要这样做，这将是一个简单的数组循环：

```
tensor.prototype.setValueByIndex = function(indices, value) {
    var arr = this.values;
    for (var i=0; i<indices.length-1 && arr; i++)
        arr = arr[indices[i]];
    if (arr)
        arr[indices[i]] = value;
    else
        throw new Error("Tensor.setValueByIndex: Some index pointed to a nonexisting array");
}; 
```

# opencv - 在 OpenCV 中连接 Mat

> ID：11019272
> 
> 赞同：9
> 
> 时间：2012-06-13T16:27:39.427
> 
> 标签：opencv, concatenation, opencv-mat

我在`Mat`对象中有几张图像，它们都具有相同的尺寸我想创建一个 bix`cv::Mat`对象来保存它们

所以新矩阵的维度是：*widthNew = widthOld x number of matrixes*，height保持不变。

我发现这样的副本可以使用：

```
void cvCopy(const CvArr* src, CvArr* dst, const CvArr* mask=NULL) 
```

但是，如何为三个矩阵定义三个不同的时间？

问候， 莫阿塔兹

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-12-16T15:58:47.963

我认为有一个简单的方法可以做到这一点。*OpenCV*有一个未记录的方法，称为`hconcat()`and `vconcat()`。第一个用于水平连接，第二个用于垂直连接。

您可以通过以下方式使用它们：

```
Mat A, B;
... //In this part you initialize the Mat A and Mat B.

Mat H, V; //These are the destination matrices
hconcat(A, B, H);
vconcat(A, B, V); 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T16:42:47.000

您使用 roi 定义实际上是目标图像区域的图像，然后复制到该区域。请参阅[在另一个 ROI 内复制 cv::Mat](https://stackoverflow.com/questions/10481411/opencv-copy-an-cvmat-inside-a-roi-of-another)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T21:14:07.183

您可能想查看[的源代码`cvShowManyImages()`](http://opencv.willowgarage.com/wiki/DisplayManyImages)，该函数将多张图像作为输入并将它们连接成一个要显示的 3 通道图像：

> 使用的方法是设置单个大图像的 ROI，然后调整输入图像的大小并将其复制到单个大图像上。

如果您创建的目标图像足够大以容纳其他图像，则无需调整它们的大小。

如果您想知道如何在`IplImage`<->之间进行转换`cv::Mat`，请查看[此线程](http://opencv-users.1802565.n2.nabble.com/IplImage-lt-gt-cv-Mat-td5317470.html)。

# php - 如何选择一个类别中的所有项目

> ID：11019273
> 
> 赞同：0
> 
> 时间：2012-06-13T16:27:39.870
> 
> 标签：php, mysql, html

这是目标：用户需要查看特定类别的问题。这是列表中最古老的问题。这是我使用的代码，但其中有错误。当我单击“Zoeken”按钮时，什么也没有发生。页面刚刚刷新。有什么帮助吗？

```
<form method="post" action="<?php echo $_SERVER["h5/PHP_SELF"] ?>">
Selecteer een categorie:<select name="categorieid">
<?php
$db=mysql_connect("localhost","*****","******") or die("Kan niet verbinden: ".mysql_error());
mysql_select_db("*****",$db);

    $sql = "SELECT * FROM Categorie";

    $resultaat  = mysql_query($sql); // voer SQL code uit
    while ($rij = mysql_fetch_array($resultaat)) {
        echo "<option value=\"";
        echo $rij["Categorie_ID"]."\">";
        echo $rij["Categorienaam"]."</option>\n";
    }

mysql_close($db);
?>
//de tabel weergeven
<?php
if ($_POST["Zoek"]) {
$_POST["categorieid"];
$db=mysql_connect("localhost","********","********") or die("Kan niet verbinden: ".mysql_error());
mysql_select_db("**********",$db);

$sql = "SELECT * FROM Probleem";
if(isset($_POST["categorieid"])){
    $cat_id = $_POST["categorieid"];
    //sanitize $cat_id to reduce injection risk here
    $sql .= " WHERE Categorie_ID = $cat_id"; //use correct column name
}
$sql .= " ORDER BY Datum ASC";
$resultaat  = mysql_query($sql); // voer SQL code uit

echo "<table border=1>";
echo "<tr><td><b>Probleem_ID</b></td><td><b>Categorie</b></td><td><b>Datum</b></td><td><b>Omschrijving;</b></td><td><b>Gebruiker_ID</b></td><td><b>Oplossing</b></td></tr>"; // bovenste regel
if ($resultaat) {
    while ($rij = mysql_fetch_array($resultaat)) {

    echo "<tr>";
echo "<td>".$rij['Probleem_ID']."</td>";
echo "<td>".$rij['Categorie_ID']."</td>";
echo "<td>".$rij['Datum']."</td>";
echo "<td>".$rij['Probleem']."</td>";
echo "<td>".$rij['Gebruiker_ID']."</td>";
echo "<td>".$rij['Oplossing']."</td>";
echo "</tr>";
    }
}
echo "</table>";
mysql_close($db);
}
?>

<form name="form1" method="post" action="">
  <input type="submit" name="Zoek" id="Zoek" value="zoek">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:27:40.347

正如@Bonzo 所说：

> 您的“Zoeken”按钮应该与表单的其余部分位于同一部分，而不是位于不同的表单中。

PS。这个问题不再出现在“未回答/没有答案”部分；）

# codeigniter - 致命错误：将文件移动到新集群服务器时调用成员函数 field_data()

> ID：11019274
> 
> 赞同：1
> 
> 时间：2012-06-13T16:27:42.420
> 
> 标签：codeigniter, codeigniter-datamapper

我正在使用基于[codeIgnighter](http://codeigniter.com/)的自定义 CMS 。以前它一直在[Heart Internet](http://www.heartinternet.co.uk/)服务器上运行。[我们正在使用tsohost](http://www.tsohost.co.uk/)迁移到集群服务器。

我的代码在旧服务器（linux、php 5.2、mySQL）上运行得非常好。我已经设置了具有相同斑点的新服务器（据我所知）。我想最终迁移到 5.3，但现在我只需要在不重写我的大部分代码的情况下让它工作，所以如果你的答案可以是 php 5.2，它会更有帮助。

现在我得到错误：

```
Fatal error: Call to a member function field_data() on a non-object in /var/sites/p/pplsport.eu/public_html/system/database/DB_driver.php on line 863 
```

我已将问题追溯到代码中的以下行：

```
$fields = $this->db->field_data($this->table); 
```

我检查了`$this->db`它是否存在（确实存在），并且`$this->table`确实引用了正确的表/模型。

这是在[旧服务器](http://www.pplsport.com)和[新服务器](http://www.pplsport.eu)上运行的站点。

恐怕我已经没有想法了，想不出如何进一步调试它。如果有人可以提供帮助，那就太好了。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:21:28.633

感谢评论，我能够通过找出我的数据库设置错误来解决这个问题。

我将数据库设置`debug`为`TRUE`，然后意识到我无法连接到数据库。

我的表名使用的是保留名，因此无法使用。

谢谢@Daniel 和@Yan

# java - Proguard 不混淆方法 getId() 和 getSerialNumber()

> ID：11019276
> 
> 赞同：0
> 
> 时间：2012-06-13T16:27:48.850
> 
> 标签：java, obfuscation, proguard

我有简单的 POJO，每个属性都有 getter 和 setter。除了那些名为 id 和 serialNumber 的东西外，所有东西都被混淆了。

id 属性不会被重命名，它的 getter 和 setter 也不会。

serialNumber 属性确实被重命名，但它的 getter 和 setter 没有。

这些属性没有什么特别之处，我也没有在我的 Proguard 配置中添加任何东西来让 Proguard 以不同的方式对待它们。

我的 Proguard 配置

```
# Fudge around some issues
-dontskipnonpubliclibraryclasses

# Preserve all annotations.
-keepattributes *Annotation*

# Preserve all native method names and the names of their classes.
-keepclasseswithmembernames class * {
    native <methods>;
}

# Preserve the special static methods that are required in all enumeration
# classes.
-keepclassmembers class * extends java.lang.Enum {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

# Explicitly preserve all serialization members. The Serializable interface
# is only a marker interface, so it wouldn't save them.
# You can comment this out if your application doesn't use serialization.
# If your code contains serializable classes that have to be backward 
# compatible, please refer to the manual.
-keepclassmembers class * implements java.io.Serializable {
    static final long serialVersionUID;
    static final java.io.ObjectStreamField[] serialPersistentFields;
    private void writeObject(java.io.ObjectOutputStream);
    private void readObject(java.io.ObjectInputStream);
    java.lang.Object writeReplace();
    java.lang.Object readResolve();
}

# Keep some source file attributes so we have a chance of decoding stack traces
-renamesourcefileattribute SourceFile
-keepattributes Exceptions,InnerClasses,Signature,Deprecated,
        SourceFile,LineNumberTable,*Annotation*,EnclosingMethod

# make sure we keep info for downstream libraries
-dontshrink
-dontoptimize
-useuniqueclassmembernames 
```

以及地图文件的输出

```
java.lang.String id -> id
  int productCode -> a
  int platform -> b
  java.lang.String model -> c
  java.lang.String serialNumber -> d
  java.lang.String machineID -> e
  java.lang.String parentSerialNumber -> f
  long clientTime -> g
  38:38:java.lang.String getId() -> getId
  47:48:void setId(java.lang.String) -> setId
  52:52:int getProductCode() -> a
  57:58:void setProductCode(int) -> a
  62:62:int getPlatform() -> b
  67:68:void setPlatform(int) -> b
  72:72:java.lang.String getModel() -> c
  77:78:void setModel(java.lang.String) -> a
  82:82:java.lang.String getSerialNumber() -> getSerialNumber
  87:88:void setSerialNumber(java.lang.String) -> setSerialNumber
  92:92:java.lang.String getMachineID() -> d
  97:98:void setMachineID(java.lang.String) -> b
  102:102:java.lang.String getParentSerialNumber() -> e
  107:108:void setParentSerialNumber(java.lang.String) -> c
  112:112:long getClientTime() -> f
  117:118:void setClientTime(long) -> a 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T19:18:03.203

这是由于使用了该`-useuniqueclassmembernames`选项。

*如果类成员名称必须全局*对应（**包括 Java 运行时库**），则此选项将所有类中的所有类成员链接在一起。

这意味着，如果在一个类中有任何方法`Foo#getName()`被混淆`a()`，其他类中但具有相同名称的方法`Bar#getName()`也将映射到混淆名称`a()`：

```
Foo.getName() -> Foo.a()
Bar.getName() -> Bar.a() 
```

现在开始使用图书馆罐子。由于 ProGuard 还查看库 jar 以查找有关引用，因此它将扫描`rt.jar`类并找到以下类：

*   com/sun/servicetag/SystemEnvironment
*   java/security/cert/X509CertSelector
*   等等

这些类也有方法方法：

*   com.sun.servicetag.SystemEnvironment.getSerialNumber()
*   java.security.cert.X509CertSelector.getSerialNumber()
*   等等

这些成员被忽略以进行混淆，但它们的名称映射 ( `getSerialNumber`> `getSerialNumber`) 由 ProGuard 记录并由于 useUniqueClassMemberNames 配置选项而保存在描述符映射中。

供参考：我通过使用您的配置文件调试 ProGuard 发现了这一点。对于成员信息链接器，似乎是使用 AllMemberVisitor 而不是 BottomClassFilter 的情况，但我对 ProGuard 的内部如何工作并不确定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T19:20:53.043

该选项`-useuniqueclassmembernames`会执行此操作，以确保代码更改的混淆映射不会过时。未来的代码可能会为这个类和一些包含这些方法的库类添加一个公共接口。如果方法被重命名，这将破坏映射。

# parameters - 如何探索 PLSQL 块中的 out 游标参数？

> ID：11019278
> 
> 赞同：0
> 
> 时间：2012-06-13T16:27:50.080
> 
> 标签：parameters, plsql, cursor, out

我需要验证一个具有 out 游标参数的过程。具体来说，我需要查看正在检索的内容。

我试试这个：

```
declare
  type cursor_out is ref cursor;
  cur cursor_out; 
  fila activ_economica%rowtype;
  procedure test(algo out cursor_out) is
  begin
    open algo for select * from activ_economica;  
  end;
begin
  test(cur);
  for i in cur loop
    fila := i;
    dbms_output.put(fila.id_activ_economica ||' ' );
    dbms_output.put_line(fila.nom_activ_economica);
  end loop;
end; 
```

错误是“cur”尚未定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:33:04.203

您不能将光标 FOR 循环与 ref 光标一起使用，您必须这样做：

```
declare
  type cursor_out is ref cursor;
  cur cursor_out; 
  fila activ_economica%rowtype;
  procedure test(algo out cursor_out) is
  begin
    open algo for select * from activ_economica;  
  end;
begin
  test(cur);
  loop
    fetch cur into fila;
    exit when cur%notfound;
    dbms_output.put(fila.id_activ_economica ||' ' );
    dbms_output.put_line(fila.nom_activ_economica);
  end loop;
  close cur;
end; 
```

注意：不再需要定义您自己的 ref 游标类型（除非您使用的是非常旧的 Oracle 版本）。您可以只使用 SYS_REFCURSOR 代替：

```
declare
  cur sys_refcursor; 
  ... 
```

# java - 用小端写一个整数

> ID：11019279
> 
> 赞同：4
> 
> 时间：2012-06-13T16:27:50.737
> 
> 标签：java, io, nio, bytebuffer, endianness

我必须在一个 4bytes 的文件中写入一个小端（java 使用大端）表示整数的文件，因为外部 c++ 应用程序必须读取这个文件。我的代码没有在 te 文件中写入任何内容，但 de 缓冲区中有数据。为什么？我的功能：

```
public static void copy(String fileOutName, boolean append){
    File fileOut = new File (fileOutName);

    try {
         FileChannel wChannel = new FileOutputStream(fileOut, append).getChannel();

         int i = 5;
         ByteBuffer bb = ByteBuffer.allocate(4);
         bb.order(ByteOrder.LITTLE_ENDIAN);
         bb.putInt(i);

         bb.flip();

         int written = wChannel.write(bb);
         System.out.println(written);    

         wChannel.close();
     } catch (IOException e) {
     }
} 
```

我的电话：

```
copy("prueba.bin", false); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T16:38:19.190

当你不知道为什么失败时，忽略空 try-catch 块中的异常是个坏主意。

您在无法创建文件的环境中运行程序的可能性很大；但是，您给出的处理这种特殊情况的指示是什么都不做。所以，很可能你有一个程序试图运行，但由于某种原因失败了，甚至没有向你显示原因。

试试这个

```
public static void copy(String fileOutName, boolean append){
    File fileOut = new File (fileOutName);

    try {
         FileChannel wChannel = new FileOutputStream(fileOut, append).getChannel();

         int i = 5;
         ByteBuffer bb = ByteBuffer.allocate(4);
         bb.order(ByteOrder.LITTLE_ENDIAN);
         bb.putInt(i);

         bb.flip();

         int written = wChannel.write(bb);
         System.out.println(written);    

         wChannel.close();
     } catch (IOException e) {
// this is the new line of code
         e.printStackTrace();
     }
} 
```

我敢打赌，你会发现为什么它不能马上工作。

# visual-studio - 删除表中重复出现的条目 Visual Studio 2005

> ID：11019280
> 
> 赞同：0
> 
> 时间：2012-06-13T16:27:51.960
> 
> 标签：visual-studio, bids

我在 Visual Studio 中创建了一个表。该表有两列。第一个是父母的名字，第二个是孩子的名字。如果一位父母有几个孩子，我希望他的名字只出现一次（不确定是否重要，但数据是从 SSMS 生成的，我在 Visual Studio 中使用的环境称为投标）。

例如：

```
Name      Child_Name
Gil       Mike
          Eduardo
Victoria  Tanya
          Pamela 
```

并不是：

```
Name      Child_Name
Gil       Mike
Gil       Eduardo
Victoria  Tanya
Victoria  Pamela 
```

我怎样才能在 Visual Studio 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T19:27:54.230

毕竟，我设法找到了解决这个问题的方法。1) 在 Visual Studio 中，转到布局选项卡。2) 右键单击​​该列。3) 选择表达式。4) 转到常用功能。5) 转到杂项。6) 使用函数Previous 将当前字段值与前一个字段值进行比较。例如：

```
iif(Fields!name.Value = Previous(Fields!name.Value), "", Fields!name.Value) 
```

# grails - GORM 按 has_many 排序

> ID：11019286
> 
> 赞同：1
> 
> 时间：2012-06-13T16:28:14.440
> 
> 标签：grails, groovy, grails-orm

这是在 Grails 和 GORM 的上下文中

如果域 A 有许多域 B，并且域 B 有一个名为 name 的字段，它是一个字符串，那么生成 A 列表的最简洁方法是什么，该列表已根据 B 的“最佳”值进行排序。例如如果 A 的一个实例具有 B 的名称为“Andrew”和“Zed”，那么它应该出现在 B 的名称为“Jim”和“Fred”的 A 之前。

这就是我所拥有的，正在寻找更多 Grails-y 的东西：

```
def apps = B.executeQuery("select distinct c from A as c left join fetch c.bs as b order by b.name",[max:pmax, offset:poffset]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T03:27:44.597

我通常不直接执行 SQL 查询，我只是使用 GORM 来处理它们。

如果您可以将域类设置为双向关联（不支持单向关联），那么您可以执行以下操作：

```
class classA {

    static constraints = {
    }

    static mapping = {
        bList sort :'name', order:'asc'
    }

    static hasMany = [bList: classB]
} 
```

现在B类：

```
class ClassB {

    static constraints = {
    }

    static belongsTo = [classAInstance: classA]

    String name
} 
```

我将此添加到`BootStrap.groovy`文件中以添加一些实例：

```
class BootStrap {

    def init = { servletContext ->
        def a = new ClassA()
        def b1 = new ClassB(name: 'Andrew')
        def b2 = new ClassB(name: 'Lisa')
        def b3 = new ClassB(name: 'Walter')
        def b4 = new ClassB(name: 'Brandon')
        def b5 = new ClassB(name: 'Cathy')

        a.addToBList(b1)
        a.addToBList(b2)
        a.addToBList(b3)
        a.addToBList(b4)
        a.addToBList(b5)
        a.save()
    }

    def destroy = {
    }
} 
```

然后这是我用来测试它的控制器：

```
class TestController {

    def index() {
        def aInstance = ClassA.get(1)
        def lst = aInstance.bList

        lst.each { println it.name }
    }
} 
```

您应该能够去`http://localhost:8080/test/test/index`然后查看打印标准输出的位置，然后您应该看到：

```
Andrew
Brandon
Cathy
Lisa
Walter 
```

可能有一些更好的方法来做这件事的某些部分，但这是我能想到的……

# c# - Windows Phone 7 上的 WebClient 外部调试

> ID：11019288
> 
> 赞同：0
> 
> 时间：2012-06-13T16:28:25.610
> 
> 标签：c#, windows-phone-7, webclient

我有一个 Windows Phone 和应用程序，它使用 WebClient 从 Azure 服务中获取一些数据。我能够从 VS 部署应用程序并在设备上对其进行调试。它似乎工作正常，正在联系 Web 服务并获得响应。

但是，当我断开设备与 PC 的连接并尝试在设备上单独运行该应用程序时，它一直失败并显示“远程服务器返回错误：未找到”。在调试模式下运行应用程序和单独运行应用程序（使用相同的 URL，Azure 服务仍在运行等）之间没有任何变化（我知道）。该应用程序具有在其 WMAppManifest 中定义的 ID_CAP_NETWORKING 功能。

我错过了什么吗？我是否需要执行其他操作才能使应用程序在手机上打开 HTTP 连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T18:43:42.807

当 Windows Phone 通过 USB 连接到计算机时，它通过 USB 连接通过主机访问网络。

这可能意味着 Windows Phone 在插入计算机时可能具有连接性，但在拔出时会失去连接。如果拔出后连接情况发生变化，则最好在拔出后检查连接。

# css - 视觉 Web 开发人员中是否有 Visual Studio 的“转到定义”之类的选项？

> ID：11019294
> 
> 赞同：0
> 
> 时间：2012-06-13T16:28:36.970
> 
> 标签：css, visual-web-developer, visual-web-developer-2010

在 Visual Studio 中，我可以右键单击大多数内容（方法、类实例、局部变量……），然后我会获得“转到定义”和“查找所有引用”的选项。

视觉Web开发人员中有类似的东西吗？特别是，我能否以某种方式获取使用 CSS 文件中特定样式的每个位置（-我在 CSS 页面中看到该样式，并想知道它是否以及在哪里使用）？

（我指的是一个 Web 应用程序项目。这有关系吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:39:11.527

没有。那还不可用。我看不出这在 css 类上是如何实现的，因为这些功能依赖于反射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:41:10.077

暂时我假设它们不存在。如果他们这样做了——请随时纠正我。

（我接受我的答案，而不是另一个，因为它可能*是*可能的。问题是只有在 VWD 中完成。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T17:31:55.330

在 VS 2012 中，如果您突出显示 css 类并点击 f12 它应该带您进行样式定义。

# unity3d - 是否可以将设备摄像头的视频设置为 Unity3d 中的背景？

> ID：11019296
> 
> 赞同：1
> 
> 时间：2012-06-13T16:28:47.047
> 
> 标签：unity3d

我正在实现一个增强现实原型。但我还没有弄清楚如何将视频设置为背景。有一个[WebCamTexture](http://unity3d.com/support/documentation/ScriptReference/WebCamTexture.html)类可以设置为 GUITexture 的纹理。但在这种情况下，其他 3d 对象不可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:43:41.877

1.  创建平面
2.  将其附加到相机节点
3.  GameObject->Align View to Selected
4.  把飞机翻译成900
5.  缩放平面以适合屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T08:16:03.277

创建 2 台摄像机，一台用于查看所有 3d 对象，另一台使用 GUITexture。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-23T02:18:17.603

将以下代码附加到您的主摄像头，您就完成了

```
public class webcam_example : MonoBehaviour
{
    WebCamTexture webcamTexture;
    bool webcam_ok = false;
    void Start()
    {
        WebCamDevice[] webCams = WebCamTexture.devices;
        if (webCams.Length > 0) {
           webcamTexture = new WebCamTexture();
           webcamTexture.Play();
           webcam_ok = true;
        }
    }

    void OnPreRender()
    {
        if (webcam_ok)
        {
            Graphics.Blit(webcamTexture, (RenderTexture)null);
        }
    }
} 
```

# google-app-engine - 清理 Google App Engine 中的日志

> ID：11019298
> 
> 赞同：9
> 
> 时间：2012-06-13T16:28:53.327
> 
> 标签：google-app-engine, logging

我在 Google App Engine 上进行了压力测试，现在：Logs Stored Data say 82.77 GBytes

如何清理该特定版本的日志？我尝试使用 bash 脚本下载，但它们仍然存在。有没有办法配置我不想存储超过免费配额的日志？

==================================================== ============================= 更新：金额不计入每日费用..可能它就在那里一个信息..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T16:34:09.393

目前无法删除特定版本的日志。但是您可以做的是在应用程序设置中将日志保留时间更改为 0 天。这将删除您的日志。然后，您可以将日志保留更改为所需的值。

# delphi - 如何检测表是否在我的应用程序外部添加或删除了行？

> ID：11019302
> 
> 赞同：3
> 
> 时间：2012-06-13T16:29:16.913
> 
> 标签：delphi, firebird, data-integrity, integrity

这是一个特定的场景。我需要实现的是：

1.  如果有人在我的应用程序 UI 之外的指定表中插入或删除一行或多行，那么它应该检测到该表已被修改。
2.  它不应该**使用**触发器。

这是它**不需要**做的：

1.  区分是删除还是插入。
2.  检测**谁**进行了更改或更改了**位置**。
3.  如果用户同时执行相同数量的插入和删除。从技术上讲，这可以算作更改，因此不需要将其检测为插入和删除。

这就是我们认为可以完成这项工作的方法：创建一个存储被监视的表名、行数和验证键的表，让我们调用`integrity_tbl`. 插入或删除后，更新行数和验证键。仅当验证键有效时才更新行数。每次比较失败时使验证密钥无效。当需要数据完整性验证时，计算表中的行数并与`integrity_tbl`.

您认为这是一个好方法还是我们应该尝试其他方法？

为此，我们使用 Delphi 和 Firebird。如前所述，我们正在使用 IBX 连接到数据库。但逻辑是问题而不是访问数据库的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:00:41.870

Firebird 有一个非常好的机制来通知客户端是否以及何时数据库中的任何地方发生了某些特定的更改。该机制称为[Firebird 事件](http://www.firebirdsql.org/file/documentation/papers_presentations/Power_Firebird_events.pdf)。阅读该文档以正确了解其功能。

通常，事件用于触发器或存储过程。您使用关键字`POST_EVENT <event_name>`将特定事件发送到所有连接的客户端。`<event_name>`可以是最多 127 个字符的任何字符串。然后，在 Delphi 中，您需要使用名为的组件`TIBEvents`（或`TIBEventAlerter`在较旧的 Delphi 版本中）。在那里，您可以使用`Events`指定一个或多个`<event_name>s`您有兴趣接收的属性。之后，您需要编写代码，以便`TIBEvents.OnEventAlert`在每次触发所有已注册事件时对它们做出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T20:21:15.523

从每个表中计算 MD5（或其他）校验和或签名，将其存储在某个位置，例如 .ini 文件、另一个表（特定于此目的）等。

# c# - 如何使用 XMLTextReader 读取完整节点？

> ID：11019304
> 
> 赞同：1
> 
> 时间：2012-06-13T16:29:25.027
> 
> 标签：c#, xml-serialization

我有这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<Data>
    <ConfigDatas>
        <ArrayOfConfigData xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/BTTest.Models">
            <ConfigData>
                <id>4</id>
                <ip>111111</ip>
                <port>34</port>
            </ConfigData>
            <ConfigData>
                <id>0</id>
                <ip>222222</ip>
                <port i:nil="true" />
            </ConfigData>
        </ArrayOfConfigData>
    </ConfigDatas>
    <OtherTypeDatas>
        <ArrayOfConfigData ...>
            ....
        </ArrayOfConfigData>
    <OtherTypeDatas>
</Data> 
```

我想解析 xml，获取 ConfigDatas 和 OtherTypeDatas 节点（我可以通过读取来做到这一点），但是当我得到例如 ConfigDatas 节点时能够一次读取所有 ArrayOfConfigData 节点文本。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:33:47.583

XmlTextReader 旨在遍历 XML 文档。这是非常节省内存的，因为您不会一次创建整个文档的内存表示。如果您有非常大的 XML 文档，则必须以这种方式处理它们。

如果您想加载整个 XML 以便您可以使用 XPath 查询，请使用[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)或[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)，具体取决于您的具体需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:41:53.507

It is possible; what you need to do is remember the nesting level at the start node (ConfigDatas), then read XML in a loop while nesting level is higher (meaning, while you are below the start node). If there are other parts of the XML that you don't care for, this approach can save you memory, since you will not be loading the entire document which could be too large, if you only need a few smaller nodes.

# wcf - 如果客户端通过发送 SOAP 1.1 消息进行消费，那么在 WCF 服务中应该使用什么绑定？

> ID：11019307
> 
> 赞同：0
> 
> 时间：2012-06-13T16:29:34.760
> 
> 标签：wcf, wcf-binding, wcf-client

我有 WCF 服务。第三方客户端向服务发送 SOAP 1.1 消息。我发现该服务可以使用 basicHttpBinding 来接受 SOAP 1.1 消息，因此我将服务配置为使用 basicHttpBinding。但是客户端收到如下错误消息。

我确信没有合同不匹配，所以我正在研究客户端和服务器之间是否存在绑定/安全不匹配。此外，我已经使用 basicHttpBinding 从测试应用程序测试了我的服务，它工作正常。我不确定为什么在从第三方客户端发送 SOAP 1.1 消息时会出现错误。如果有人能指出我应该检查的其他内容或我应该与第三方供应商检查的任何问题，我将不胜感激？提前致谢。

注意：该服务不使用身份验证。第三方不是基于 .NET 的客户端。我只有一个可供客户端使用的 OperationContract。除了 [OperationContract] 之外，它没有使用任何特殊属性进行装饰。如果您需要任何其他信息，请告诉我。

```
The message with Action '' cannot be processed at the receiver, due to a ContractFilter mismatch at the EndpointDispatcher. This may be because of either a contract mismatch (mismatched Actions between sender and receiver) or a binding/security mismatch between the sender and the receiver. Check that sender and receiver have the same contract and the same binding (including security requirements, e.g. Message, Transport, None) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:01:14.673

我不明白你是写服务还是客户端，但问题肯定是客户端没有发送 SOAPAction HTTP 标头，或者服务使用soap11 但有一些wsaddressing。在这种情况下，您应该使用自定义绑定并在 textBindingElmenet 上定义正确的地址。

# javascript - 防止 IE8 中的 onclick 事件

> ID：11019309
> 
> 赞同：3
> 
> 时间：2012-06-13T16:29:37.600
> 
> 标签：javascript, jquery, internet-explorer, onclick

我似乎无法让 IE8 阻止 onclick 功能执行。尝试了许多代码变体。任何帮助，将不胜感激。就目前而言，当我单击链接时，我会弹出不应发生的警报弹出窗口。

```
 <p><a href="#" onclick="openMoreProductVideos('Video title','videocode','false');return false;"><span class="txt">View all videos</span></a></p>

function openMoreProductVideos(title,productCode,fastprevoew) 
{  
  alert ("openMoreProductVideos - should not see this!");
}

$('a[onclick^=openMoreProductVideos]').click(function (event) {
   if (event.stopPropagation){
         event.stopPropagation();
   }
   else if(window.event){
      window.event.cancelBubble=true;       
   }       
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:44:18.530

试试这个..删除其他条件..

```
$('a[onclick^=openMoreProductVideos]').click(function (event) {

   event.preventDefault();      //will prevent the event from occuring

}); 
```

检查 jsfiddle .. [jsfiddle.net/kabichill/qu7kP](http://jsfiddle.net/kabichill/qu7kP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:32:37.037

据我了解，`stopPropagation()`并`cancelBubble`用于阻止事件在侦听器链中进一步上升，但仍将执行当前侦听器。你试过`event.preventDefault()`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T12:39:49.633

这在 IE8+ 和 FF 中对我来说很好用

```
function stopEvent(e) {    
    if (!e) e = window.event;

    if (e.cancelBubble != null) e.cancelBubble = true;
    if (e.stopPropagation) e.stopPropagation(); //e.stopPropagation works in Firefox.
    if (e.preventDefault) e.preventDefault();
    if (e.returnValue != null) e.returnValue = false; // http://blog.patricktresp.de/2012/02/
    return false;
} 
```

**IMP：**仅供参考，我被 IE 的 if(e.cancelBubble) 卡住了，它必须是 if(e.cancelbubble != null)

# jquery - MVC3 razor Microsoft JScript 运行时错误：无法获取属性“提交”的值：对象为空或未定义

> ID：11019310
> 
> 赞同：1
> 
> 时间：2012-06-13T16:29:47.640
> 
> 标签：jquery, asp.net-mvc-3, c#-4.0, razor

单击提交按钮时出现此错误

*Microsoft JScript 运行时错误：无法获取属性“提交”的值：对象为空或未定义*

这是我的提交按钮

```
<input type="submit" id="btnSave" name="saveCommand" value="Save" /> 
```

这是脚本

```
 $("#btnSave").live('click', function (event) {
                        $(this).closest('form')[0].submit();
                    }); 
```

关于为什么我收到此错误的任何评论？如何解决此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:30:35.353

试试这样：

```
$("#btnSave").live('click', function (event) {
    $(this).closest('form').submit();
}); 
```

也`.live()`已弃用。如果您使用的是 jQuery 1.7，您应该使用以下[`.on()`](http://api.jquery.com/on/)方法：

```
$('form').on('click', '#btnSave', function() { 
    $(this).closest('form').submit();
}); 
```

另外，使用 javascript 订阅按钮`.click`事件`submit`并提交包含表单的意义何在？这就是提交按钮的用途 => 提交该按钮所属的表单。或者这个提交按钮可能不在表单内？这可以解释为什么您会收到错误 =>`closest`选择器没有返回任何内容，也没有什么可提交的。

# ios - 在 iOS 应用内拍照，而不出现在 iOS 照片应用内

> ID：11019311
> 
> 赞同：0
> 
> 时间：2012-06-13T16:29:52.633
> 
> 标签：ios, photos

我正在开发一个应用程序，其中添加了添加照片和视频的功能。但是，我希望照片和视频只能在应用程序本身中查看，而不是在 iOS 标准照片应用程序中。有谁知道是否有办法限制相机保存路径？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:40:44.240

当您在应用程序中拍照时，它们不会自动显示在相机胶卷中。这是默认设置（即，如果您*希望*它们出现在相机胶卷中，您必须做一些特别的事情）。

# c# - JQuery ajax 对 MVC 操作的调用总是在没有错误时返回错误

> ID：11019312
> 
> 赞同：12
> 
> 时间：2012-06-13T16:30:01.717
> 
> 标签：c#, jquery, asp.net-mvc

这是一个 MVC3 应用程序。我对我的操作有以下 javascript 调用：

```
 function editDescription(docId,fileName, fileDescription) {
    $.ajax({
         type: "POST",
         url: "/OrderDetail/LoadModelData",
         contentType: "application/json; charset=utf-8",
         data: "{'id': '"+docId +"', 'filename': '"+fileName+"', 'description': '"+fileDescription+"'}",
         dataType: "json",
         success: function (result) {
         alert("ok: "+ result.d);
         },
         error: function (result) {
             alert('Oh no: '+ result.responseText);
         }
     }); 
```

这是我的行动：

```
 [HttpPost]
    public string LoadModelData(string id, string filename, string description)
    {
        return filename;
    } 
```

我运行代码，使用参数调用动作，没有什么是空的，但每次都会调用错误函数。所以每次都会出现带有“Oh no”的警告框，但是从操作返回的字符串是正确的。如果文件名是 test.pdf，则错误警报框会显示

```
 'Oh No: test.pdf'. 
```

我查看了 Firebug，没有错误。尽管没有错误，为什么不调用成功函数？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-13T16:34:43.963

您期望（返回）`string`您的操作方法的值。为什么需要将数据类型指定为`json`then ？删除它，看看会发生什么。并且响应中没有**d属性！**所以只需在警报中使用结果。

```
$.ajax({
         type: "POST",
         url: "/OrderDetail/LoadModelData",
         contentType:"application/json; charset=utf-8",         
         data: JSON.stringify({ 
                             id: docId, 
                             filename: fileName, 
                             description: fileDescription 
                            }),
         success: function (result) {
         alert("ok: "+ result);
         },
         error: function (result) {
             alert('Oh no: '+ result.responseText);
         }
     }); 
```

该`datatype` 属性告诉服务器客户端期望返回什么样的内容作为结果。

**编辑：**正如 Darin 提到的，请使用该`JSON.stringify`方法来构建 JSON 请求。更新此答案以包括未来访问者的正确方法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-13T16:41:44.863

永远不要使用字符串操作构建 JSON：

```
data: "{'id': '"+docId +"', 'filename': '"+fileName+"', 'description': '"+fileDescription+"'}", 
```

这**绝对是可怕和错误**的。你没有编码任何东西。足够的报价，`description`一切都会打破。操作 JSON 时始终使用 JSON 解析器

像这样：

```
$.ajax({
     type: "POST",
     url: "/OrderDetail/LoadModelData",
     contentType: "application/json; charset=utf-8",
     data: JSON.stringify({ 
         id: docId, 
         filename: fileName, 
         description: fileDescription 
     }),
     success: function (result) {
         alert("ok: "+ result.filename);
     },
     error: function (result) {
         alert('Oh no: '+ result.responseText);
     }
 }); 
```

该`JSON.stringify`方法是本地内置的现代浏览器。如果您需要支持旧版浏览器，您可以包含[json2.js](https://github.com/douglascrockford/JSON-js)脚本

另一个错误是您的控制器操作签名。在 ASP.NET MVC 控制器操作必须返回 ActionResults，而不是字符串：

```
[HttpPost]
public ActionResult LoadModelData(string id, string filename, string description)
{
    return Json(new { filename = filename });
} 
```

# activemq - 停止时的 ActiveMQ 异常

> ID：11019313
> 
> 赞同：11
> 
> 时间：2012-06-13T16:30:02.980
> 
> 标签：activemq, jmx

配置：Redhat 5.3、Sun Java 1.6.31、ActiveMQ 5.4.2

每次我停止 activemq 时都会出现异常（$> service activemq stop）

```
ACTIVEMQ_HOME: /opt/apache/apache-activemq-5.4.2
ACTIVEMQ_BASE: /opt/apache/apache-activemq-5.4.2
Connecting to JMX URL: service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
ERROR: java.lang.RuntimeException: Failed to execute stop task. Reason: java.io.IOException: Failed to retrieve RMIServer stub: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: localhost; nested exception is: 
    java.net.ConnectException: Connection refused]
java.lang.RuntimeException: Failed to execute stop task. Reason: java.io.IOException: Failed to retrieve RMIServer stub: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: localhost; nested exception is: 
    java.net.ConnectException: Connection refused]
    at org.apache.activemq.console.command.ShutdownCommand.runTask(ShutdownCommand.java:107)
    at org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)
    at org.apache.activemq.console.command.AbstractJmxCommand.execute(AbstractJmxCommand.java:316)
    at org.apache.activemq.console.command.ShellCommand.runTask(ShellCommand.java:143)
    at org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)
    at org.apache.activemq.console.command.ShellCommand.main(ShellCommand.java:85)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.activemq.console.Main.runTaskClass(Main.java:251)
    at org.apache.activemq.console.Main.main(Main.java:107)
ERROR: java.lang.Exception: java.io.IOException: Failed to retrieve RMIServer stub: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: localhost; nested exception is: 
    java.net.ConnectException: Connection refused]
java.lang.Exception: java.io.IOException: Failed to retrieve RMIServer stub: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: localhost; nested exception is: 
    java.net.ConnectException: Connection refused]
    at org.apache.activemq.console.command.ShutdownCommand.runTask(ShutdownCommand.java:108)
    at org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)
    at org.apache.activemq.console.command.AbstractJmxCommand.execute(AbstractJmxCommand.java:316)
    at org.apache.activemq.console.command.ShellCommand.runTask(ShellCommand.java:143)
    at org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)
    at org.apache.activemq.console.command.ShellCommand.main(ShellCommand.java:85)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.activemq.console.Main.runTaskClass(Main.java:251)
    at org.apache.activemq.console.Main.main(Main.java:107)
Caused by: java.io.IOException: Failed to retrieve RMIServer stub: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: localhost; nested exception is: 
    java.net.ConnectException: Connection refused]
    at javax.management.remote.rmi.RMIConnector.connect(Unknown Source)
    at javax.management.remote.JMXConnectorFactory.connect(Unknown Source)
    at javax.management.remote.JMXConnectorFactory.connect(Unknown Source)
    at org.apache.activemq.console.command.AbstractJmxCommand.createJmxConnector(AbstractJmxCommand.java:214)
    at org.apache.activemq.console.command.AbstractJmxCommand.createJmxConnection(AbstractJmxCommand.java:237)
    at org.apache.activemq.console.command.ShutdownCommand.runTask(ShutdownCommand.java:71)
    ... 11 more
Caused by: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: localhost; nested exception is: 
    java.net.ConnectException: Connection refused]
    at com.sun.jndi.rmi.registry.RegistryContext.lookup(Unknown Source)
    at com.sun.jndi.toolkit.url.GenericURLContext.lookup(Unknown Source)
    at javax.naming.InitialContext.lookup(Unknown Source)
    at javax.management.remote.rmi.RMIConnector.findRMIServerJNDI(Unknown Source)
    at javax.management.remote.rmi.RMIConnector.findRMIServer(Unknown Source)
    ... 17 more
Caused by: java.rmi.ConnectException: Connection refused to host: localhost; nested exception is: 
    java.net.ConnectException: Connection refused
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(Unknown Source)
    at sun.rmi.transport.tcp.TCPChannel.createConnection(Unknown Source)
    at sun.rmi.transport.tcp.TCPChannel.newConnection(Unknown Source)
    at sun.rmi.server.UnicastRef.newCall(Unknown Source)
    at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
    ... 22 more
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(Unknown Source)
    at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(Unknown Source)
    at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(Unknown Source)
    ... 27 more 
```

该过程仍然死亡，但不是优雅的。有什么建议么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-13T18:14:00.897

我找到了解决方法，但我不确定它是否解决了根本问题。ActiveMQ 启动后，我使用以下命令检查端口 1099 是否实际打开：

```
$> netstat -lptun | grep 1099 
```

此命令不打印任何内容，表明端口未打开（已启动 ActiveMQ）。这意味着即使 ActiveMQ 已启动，它也不会侦听任何 JMX 连接（这是脚本将尝试停止它的方式）。环顾四周后，我发现这个[链接](http://mail-archives.apache.org/mod_mbox/activemq-users/201101.mbox/%3CA3B05739BDB5D8498E1750CDF4A5D5DD020822861E@SP2-EX07VS01.ds.corp.yahoo.com%3E)将我带到**{ACTIVEMQ_HOME}/conf/activemq.xml**文件。在这个文件中有以下部分：

```
 <!-- 
     The managementContext is used to configure how ActiveMQ is exposed in 
     JMX. By default, ActiveMQ uses the MBean server that is started by 
     the JVM. For more information, see: 

         http://activemq.apache.org/jmx.html 
 -->
 <managementContext>
   <managementContext createConnector="false"/>
 </managementContext> 
```

设置**createConnector="true"**解决了我的问题（这将在 ActiveMQ 启动时启动 JVM 中的 MBean 服务器）。关机输出现在看起来像这样（如预期的那样）：

```
...
ACTIVEMQ_HOME: /opt/apache/apache-activemq-5.4.2
ACTIVEMQ_BASE: /opt/apache/apache-activemq-5.4.2
Connecting to JMX URL: service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
Stopping broker: localhost
.. FINISHED 
```

此外，更改此标志后，我可以验证默认 JMX 端口（1099）在启动 ActiveMQ 后是否打开

```
$> netstat -lptun | grep 1099
tcp        0      0 :::1099                     :::*                        LISTEN      30033/java 
```

# exchangewebservices - 对作为列表的属性使用 SearchFilter

> ID：11019314
> 
> 赞同：3
> 
> 时间：2012-06-13T16:30:03.107
> 
> 标签：exchangewebservices

我目前正在 Outlook 2010 上使用 EWS。我正在尝试根据“**类别**”字段查找用户的联系人。我基本上想返回其类别字段包含特定子字符串的每个联系人。下面是一个例子：

```
ExchangeService service = new ExchangeService
{
    Credentials = new WebCredentials(user, password, domain),
    Url = new Uri(exchangeUrl),
};
string searchString = "abc";
SearchFilter filter = new SearchFilter.ContainsSubstring(ItemSchema.Categories, searchString);
ItemView view = new ItemView(200);
Mailbox mailbox = new Mailbox("blah@blah.com");
FolderId folderId = new FolderId(WellKnownFolderName.Contacts, mailbox);
FindItemsResults<Item> results = service.FindItems(folderId, filter, view); 
```

这当然会失败，因为**类别**字段现在令人讨厌的是 a`StringList`而不是普通的字符串。我们所有的用户联系人只有 1 个与之关联的类别。有没有一种方法可以`SearchFilter`通过仅在第一个 Category 上运行比较来*使其**工作***？

**请注意**：由于我无法控制的原因，我[不能使用 AQS 字符串](http://msdn.microsoft.com/en-us/library/bb266512%28VS.85%29.aspx)。它们根本不是一种选择。我必须使用`SearchFilter`对象（*或其他一些机制来过滤结果*）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:17:49.277

从我所见，您必须使用[AQS](http://social.technet.microsoft.com/Forums/en/exchangesvrdevelopment/thread/e297b09d-0a69-4a62-8da1-12084df9265f)或[Exact Match](http://social.technet.microsoft.com/Forums/en-US/exchangesvrdevelopment/thread/c94c8cb0-9fd0-4363-ada7-4ea735991f04)。如果你不能使用任何一个，总是有暴力方法自己[使用`ItemView`和分页所有消息类别属性](http://msdn.microsoft.com/en-us/library/hh148195%28v=exchg.140%29.aspx)以实现包含实现。

# javascript - 鼠标滚轮滚动DIV元素

> ID：11019317
> 
> 赞同：1
> 
> 时间：2012-06-13T16:30:13.870
> 
> 标签：javascript, html, scroll, mouseevent

如果我有两个`DIV`元素：

```
#my-div1 {
  position:absolute; /* relative or fixed  */
  z-index:20;
}
#my-div2 {
  position:absolute;
  z-index:10;
  height:500px;
  overflow:scroll;
} 
```

`#my-div2`鼠标光标结束时是否可以`#my-div1`使用javascript滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:00:43.747

您可以将[.mouseover()](http://api.jquery.com/mouseover/)与滚动库结合使用来执行滚动 javascript：

```
$('#my-div1').mouseover(function() {
  //use Scroll library
}); 
```

一个好的库是[ScrollTo](http://archive.plugins.jquery.com/project/ScrollTo)。

# php - 在 LAMP 堆栈上，如何限制并发连接数并为超出该限制的用户提供静态页面？

> ID：11019319
> 
> 赞同：3
> 
> 时间：2012-06-13T16:30:22.087
> 
> 标签：php, apache, apache2

我知道 Apache 指令`MaxClients`和`ListenBacklog`. 我试图设置一个限制，比如说 100 个并发连接，之后新连接将被提供一个静态页面。这可以做到吗？MaxClients 和 ListenBacklog 应该高于还是低于该限制？我该如何测试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:57:55.197

如果可以把 nginx 放在 apache 前面，可以试试这个 nginx 模块[https://github.com/cfsego/nginx-limit-upstream](https://github.com/cfsego/nginx-limit-upstream)。它限制到 apache 的连接数并将其他连接放置到队列中。这不完全是您正在寻找的东西，但是，我认为，可以修改模块以呈现静态页面，而不是放置到队列中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:21:08.763

我是这样做的：假设我要允许 X 个并发请求，之后接下来的 Y 个并发请求将留在队列中，等待第一个 X 完成，超过 X+Y 的所有内容都将提供一个静态页面：

1.  `httpd.conf`必须在以下指令中设置：

    ```
    MaxClients X
    ServerLimit X
    ListenBacklog Y 
    ```

2.  在 MySQL 中以 root 身份登录，设置`max_connections`：

    ```
    set global max_connections = X 
    ```

3.  编辑`.htaccess`服务器公共根文件夹中的文件：

    ```
    ErrorDocument 503 error_503.html 
    ```

4.  确保您的 error_503.html 在一个请求中提供。所有样式表和脚本都必须在此文件中。如果要包含图像，则必须使用[data uri scheme](http://en.wikipedia.org/wiki/Data_URI_scheme)。此外，您必须将图像切片，因为在 IE 数据中，URI 必须小于 32KiB。

# android - 子活动中的 Android SSO 不会调用 OnComplete

> ID：11019320
> 
> 赞同：1
> 
> 时间：2012-06-13T16:30:25.337
> 
> 标签：android, facebook, android-intent, single-sign-on, android-activity

我有一个类似菜单活动（我们称之为活动 1）的东西，用户按下一个按钮，另一个活动（我们称之为活动 2）开始。我想在活动 2 中使用 Facebook SSO。

活动1中启动活动2的代码如下：

```
Intent i = new Intent(this, ViewDomanda.class);
startActivity(i); 
```

到目前为止，一切顺利... ViewDomanda（即活动 2 开始正常）。的相关代码`ViewDomanda.java`为：

```
public class ViewDomanda extends Activity {
      private Facebook qqFacebook;
      private SharedPreferences mPrefs;

 @Override
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.domanda);

            this.qqFacebook = new Facebook(MY_APP_ID);

        /*
         * Get existing access_token if any
         */
        mPrefs = getPreferences(MODE_PRIVATE);
        String access_token = mPrefs.getString("access_token", null);
        long expires = mPrefs.getLong("access_expires", 0);

        Log.i("access_token",String.valueOf(access_token));

        if(access_token != null) {
            this.qqFacebook.setAccessToken(access_token);
        }
        if(expires != 0) {
            this.qqFacebook.setAccessExpires(expires);
        }

        /*
         * Only call authorize if the access_token has expired.
         */
        if(!this.qqFacebook.isSessionValid()) {

            this.qqFacebook.authorize((Activity)this, new String[] {},
                     new DialogListener() {
                  public void onComplete(Bundle values) {
                    SharedPreferences.Editor editor = mPrefs.edit();
                    editor.putString("access_token", qqFacebook.getAccessToken());
                    editor.putLong("access_expires", qqFacebook.getAccessExpires());
                    editor.commit();
                    Log.i("onComplete","done");
                  }

                  public void onFacebookError(FacebookError error) {}

                  public void onError(DialogError e) {}

                  public void onCancel() {}
                });
        }
} 
```

然后我有通常的：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            super.onActivityResult(requestCode, resultCode, data);
            this.qqFacebook.authorizeCallback(requestCode, resultCode, data);
    } 
```

我已登录 Facebook 应用程序，因此授权方法只是要求我授予 FB 应用程序权限。

问题是：

1.  在授予 FB 应用程序权限后，活动 2 突然关闭，活动 1 又回来了。

2.  更糟糕的是，没有调用 DialogListener 的 OnComplete 方法，并且当我的 FB 用户安装了 FB 应用程序时，Android 应用程序未获得授权。

我以为我完全按照教程中的内容进行了操作，但我肯定遗漏了一些东西。任何帮助将不胜感激。

# c++ - DirectX Color：为什么不能是浮点数？

> ID：11019331
> 
> 赞同：0
> 
> 时间：2012-06-13T16:30:56.220
> 
> 标签：c++, directx

在我的顶点声明中，我可以使用各种数据类型来表示颜色。包含：

*   INT
*   双字
*   D3DCOLOR

但是我不能使用浮点数，它会导致我的着色器获得不正确的值。

我知道浮点数是 4 个字节，我列出的所有其他数据类型也是如此。那么为什么浮动不起作用而其他浮动呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:36:22.293

单个浮点数如何代表 4 个`(A,R,G,B)`组件？如果您想知道 int 是如何做到的，它会在其 32 位（4 字节）值中包含 4 个字节。

# database - 在 Django ORM 中，一个“学生-课程”模型设计

> ID：11019346
> 
> 赞同：2
> 
> 时间：2012-06-13T16:31:59.930
> 
> 标签：database, django, django-models, django-views, pinax

我想在 Django 中为一所在线私立学校设计一个模型。它侧重于和之间`Students`的关系。`Tutors``Courses`

应该考虑的最重要的因素是`Students`可以添加和`Tutors`创建课程。

我想扩展内置的 Djano 的“用户”并扩展它的功能。

我设计了一个非常草稿的模型，如下所示：

```
from django.db import models
from django.contrib.auth.models import User , Group
from django.utils.translation import ugettext as _

class Course(models.Model):
    name = models.CharField(max_length = 70)
    slug = models.SlugField()
    created = models.DateTimeField(auto_now = True)
    updated = models.DateTimeField(auto_now_add = True)
    description = models.TextField()
    student = models.ManyToManyField('Student' , null = True, blank = True, related_name = _('Student courses'))
    tutor = models.ManyToManyField('Tutor' , null = True, blank = True , related_name = _('Tutor courses'))

    def __unicode__(self):
        return self.name

    class Meta:
        verbose_name = ('course')
        verbose_name_plural = ('courses')

class Student(models.Model):
    user = models.ForeignKey(User , blank = True)
    #photo = models.ImageField(_('photo'), upload_to='photos/', blank=True)

class Tutor(models.Model):
    user = models.ForeignKey(User , blank = True)
    #photo = models.ImageField(_('photo'), upload_to='photos/', blank=True) 
```

首先：这是一个正确的方法吗？我想要用户，所以我可以在视图和模板层中使用它。

第二，如何查询哪个学生上过哪些课程？

提前谢谢你..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:21:09.497

正如@cberner 所说，您应该查看用户配置文件。归根结底，您希望学生和导师都是真正的蓝色`User`，这样您就可以在他们登录后从请求中访问他们。

话虽如此，拥有单独的模型仍然有一些优点，只要它们是*代理*模型。您可以将代理模型视为一种别名。他们不能向数据库中添加额外的字段，但他们可以拥有自己独特的方法、管理器等。例如：

```
class Student(User):
    class Meta:
        proxy = True

    def __unicode__(self):
        return u'Student: %s' % super(Student, self).__unicode__() 
```

这是一个非常基本的示例，但它旨在说明即使`User`就数据库而言这仍然是一个，您可以覆盖和添加使其本身独一无二的方法。

当然，不过，您需要一些方法来区分 a`Student`和 a`Tutor`甚至是普通的 old `User`。我发现组是为`User`代理完成此任务的最佳方式。例如，您可以创建“学生”和“导师”组，然后分配到“学生”组的任何用户，例如，都可以通过`Student`模型获得。

```
class StudentManager(models.Manager):
    def get_query_set(self):
        return self.filter(groups__name='Student')

class Student(User):
    class Meta:
        proxy = True

    def save(self, *args, **kwargs):
        super(Student, self).save(*args, **kwargs)
        if not self.groups.filter(name='Student').exists():
            group, created = Group.objects.get_or_create('Student')
            self.groups.add(group) 
```

这确保了任何时候您创建一个`Student`，它都会自动添加到“学生”组，并且如果您使用`Student`（例如`Student.objects.all()`）检索对象，您只会获得`User`属于“学生”组的 s。

因为这些是单独的模型，您也可以在管理员中单独引用它们，因此您可以拥有单独的更改列表和更改表单 a `Student`、 a`Tutor`和常规`User`（如果需要）。

将它们分配给组也可以很容易地限制部分管理员。例如，由于只有`Tutor`s 应该能够创建、更改或删除课程，因此您可以将以下方法添加到您的`CourseAdmin`:

```
def has_add_permission(self, request):
    return request.user.is_superuser or request.user.groups.filter(name='Tutor').exists()

def has_change_permission(self, request, obj=None):
    return request.user.is_superuser or request.user.groups.filter(name='Tutor').exists()

def has_delete_permission(self, request, obj=None):
    return request.user.is_superuser or request.user.groups.filter(name='Tutor').exists() 
```

只有超级用户或“导师”组的成员才能添加全新的课程或更改或删除现有课程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T16:37:21.960

我会考虑使用Django 支持的[用户配置文件](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)，而不是使用`Student`和模型。此外，auth 模块具有相当完整的[权限](https://docs.djangoproject.com/en/dev/topics/auth/#permissions)模型，您可以使用它而不是创建自己的系统来仅允许某些用户创建课程。`Tutor`

# linux - 在 Perl 脚本中执行 SQLite DB 时遇到问题

> ID：11019348
> 
> 赞同：2
> 
> 时间：2012-06-13T16:32:08.660
> 
> 标签：linux, perl, sqlite

所以我是 Perl 的新手，也是 SQLite 的新手。我有 SQL 经验，但是这种新的 Perl 语法让我有点吃惊。

所以我有一个问题，我试图使用 Perl 脚本从 IPtable 日志创建数据库，以解析表中的数据并向人们发送通知。该脚本还会向用户发送通知，但我认为这与此问题无关。

这是我收到的错误。

> DBD::SQLite::db prepare failed: no such table: syslog_decom_notif at ./send_notification_syslog.pl line 251\. 无法在 ./send_notification_syslog.pl 第 252 行对未定义值调用方法“执行”。

以下是我收到错误的代码：

```
2 sub select_contacts {
233         my @contact_info;
234         my $dbh = DBI->connect( DECOM_NOTIFICATION_DB ,"","");
235
236         my ( $where_clause, @exec_params ) = build_where_clause();
237
238         my $SQL = <<SQL;
239 select
240                 contact
241         ,       status
242         ,       contact_mngr
243         ,       hostname
244         ,       contact_type
245         ,       syslog_server
246 from
247         syslog_decom_notif
248 $where_clause
249 SQL
250         debug  ( __LINE__ . " Excuting SQL = \n[ $SQL ]\n" );
251         my $sth = $dbh->prepare( $SQL );
252         $sth->execute( @exec_params );
253         if ( $debug_mode ) {
254                 my @cols = @{$sth->{NAME}};
255                 print join '|', @cols;
256                 print "\n";
257         }
258         while (my @res = $sth->fetchrow) {
259                 for ( my $i=0; $i<@res; $i++ ) { $res[$i] = 'Null' if ! defined $res[$i]; }
260                 my $row = join '|', @res;
261                 debug "$row\n";
262                 push @contact_info, $row;
263         }
264         $sth->finish();
265         return @contact_info;
266 } 
```

我四处寻找，似乎找不到任何可以真正帮助解决这个问题的东西。

我很欣赏任何和所有的想法。

此致

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T16:45:12.973

`syslog_decom_notif`好吧，简单的事实是，正如它所说，DBI在您打开的数据库中找不到调用的表。失败后，`prepare`其他任何事情都不会起作用。

我想你的表名是正确的，所以我想知道`DECOM_NOTIFICATION_DB`. 这是从哪里来的？它可能是一个用 定义的字符串`use constant`吗？

在`connect`调用 SQLite 时，DBI 需要一个看起来像`dbi:SQLite:dbname=my_db_file`. 如果文件不存在，它将被创建，所以也许你设置错误并且你正在使用一个空数据库？

* * *

**更新**

要查看您已连接到的数据库中的内容，请在`DBI->connect`调用后立即添加。它将打印连接数据库中的表列表。确保`END`终止符出现在行首，并且前后没有空格。

```
my $tables = $dbh->selectcol_arrayref(<<END);
SELECT name FROM sqlite_master
WHERE type='table'
ORDER BY name
END

print "$_\n" for @$tables; 
```

# asp.net-mvc - 我们如何声明局部变量并输出其值？

> ID：11019351
> 
> 赞同：6
> 
> 时间：2012-06-13T16:32:18.410
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我已经声明了一个这样的变量

```
@{ int i = 1; } 
```

现在，在`foreach`循环内部，我想在每次处理循环时分配 i 的值；

```
 @foreach (var line in Model.Cart.Lines)
 {
      <input type="hidden" name="item_name_@i" value="@line.Product.ProductName" />
      <input type="hidden" name="amount_@i" value="@line.Product.Price" />
      <input type="hidden" name="quantity_@i" value="@line.Quantity" />
      @i++;
 } 
```

但它不起作用。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T14:28:00.717

您还没有解释什么不起作用，但是从您的代码看来，“i”变量的值没有增加，而是您检查了“0++;”的输出。

这是因为 razor 中 @ 符号的目的是

1.  输出
2.  标识符，因此它输出标识符“i”，然后继续剩余文本“++;”。

为了实现您显然想要做的事情（仅增加 i 的值），您必须将其包含在代码块中，如下所示：

```
@{ i++; } 
```

但是，如果您确实想在增加 i 之前输出它的值，那么您应该将它包装在一个表达式块中，如下所示：

```
@(i++) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T16:39:47.453

如果您需要访问索引，则使用普通`for`循环更有意义：

```
@for (int i = 0; i < Model.Cart.Lines.Count; i++)
{
    var line = Model.Cart.Lines[i];
    ...
} 
```

或者，您可以使用 LINQ 表达式：

```
@foreach (var item in Model.Cart.Lines.Select((x, i) => new { Line = x, Index = i }))
{
    // Now you can access, for example, `item.Line` for the line, and 
    // `item.Index` for the index (i.e. `i`)
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T04:05:51.383

我在考虑范围。请参阅[http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3razor.aspx](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3razor.aspx)

尝试一个代码块，例如：

```
@{
    var i = 1;
    var tmp = "";

    foreach (var line in Model.Cart.Lines)
    {
        tmp = "item_name_" + i;
        <input type="hidden" name="@tmp" value="@line.Product.ProductName" />
        i++;
    }
} 
```

# jquery - 用于智能手机的 jQuery 手风琴

> ID：11019352
> 
> 赞同：2
> 
> 时间：2012-06-13T16:32:24.040
> 
> 标签：jquery

这个想法是，这款手风琴仅适用于智能手机，以提高小型设备的可用性。

但是，它仅在您刷新 480 下的浏览器时才有效。

有没有办法在函数中包含一些东西，一旦窗口大小调整到 480 以下，浏览器就会刷新？

手动刷新浏览器根本无法使用。

```
var windowWidth = $(window).width(); //retrieve current window width
function accordion() {
if (windowWidth<=480)
{

$('h3').click(function() {

    $('h3').next().hide(2000);

    if($(this).next().is(':hidden') == true) {

          $(this).next().show(1000); } 

                         });

                    }}

$(document).ready(function() {
 accordion();
 }); 
```

HTML 标记

```
 <section class="box">

                        <h3>Service 1</h3>

                       <div class="box2"> <p></p></div>

                    </section><!-- end box_1 --> 

                    <section class="box">

                        <h3>Service 2</h3>

                        <div class="box2"><p></p>   </div>                     

                    </section><!-- end box_2 --> 

                    <section class="box">

                        <h3>Service 3</h3>

                        <div class="box2"><p></p>   </div>                     

                    </section><!-- end box_3 -->  

                    </section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:35:58.890

您只获得初始窗口宽度。

```
$(window).resize(function () { windowWidth = $(this).width(); }); 
```

如果窗口再次变宽，您还需要`accordion`适当地运行并将其关闭。`accordion`也许只是在方法中添加一个调用就`window.resize`足够了，但我还没有测试过。

# php - 将数据从 PHP 发送到不同域中的 Javascript

> ID：11019355
> 
> 赞同：2
> 
> 时间：2012-06-13T16:32:48.050
> 
> 标签：php, javascript, cross-domain

我使用 AJAX 将数据从 Javascript 发送到 PHP 文件，但我无法将响应数据从 PHP 取回到 Javascript，因为我知道 Javascript 代码与 PHP 代码位于不同的域中。任何人都有解决这个问题的想法？

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:45:11.713

要在 JS 跨域中接收响应，您可以通过添加`Access-Control-Allow-Origin`标头来启用 CORS。但是，这可能是参差不齐的。

[更好的解决方案是将编码为JSONP](http://en.wikipedia.org/wiki/JSONP)的响应发回。

这是一个使用 JSONP 的示例。我调用的 API 是我自己的，它支持 JSONP 响应。 [**JSONP 示例**](http://jsfiddle.net/cLdGY/8/)

相反，以下示例也适用。在这种情况下，我没有使用 JSONP。此请求有效，因为我的 API 启用了 CORS。但是，就像我说的那样，我发现这很不稳定，并且会推荐 JSONP。

[**CORS 示例**](http://jsfiddle.net/cLdGY/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:44:31.033

跨域 javascript 可能很困难。看看[http://easyxdm.net/wp/](http://easyxdm.net/wp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T16:42:29.067

AFAIK 出于安全原因，没有办法将 ajax 请求发送到不同的域。我可以想到一些解决方法：

*   调用 php 代理，然后通过套接字或 curl 发出请求。[例子](http://developer.yahoo.com/javascript/howto-proxy.html)
*   制作一个调用它的 Flash 电影并设置一个 crossdomain.xml 文件

# couchdb - CouchDB 文档大小限制

> ID：11019360
> 
> 赞同：3
> 
> 时间：2012-06-13T16:32:56.327
> 
> 标签：couchdb

我正在整理我的应用程序的安全性，我有一个快速的问题。

我查看了我的 couchdb 配置，发现最大文档大小为 4294967296。那是 4 MB 吗？你能不能用人类的术语来表达，比如一个 100,000 行的 JSON 文档？更多的？较少的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T16:41:04.707

那是 4 GB。

所以，那是一张DVD。

# asp.net-mvc-3 - “虚假”Web 项目需要缺少剃须刀的 Web 组件消息

> ID：11019361
> 
> 赞同：4
> 
> 时间：2012-06-13T16:33:03.130
> 
> 标签：asp.net-mvc-3, visual-studio-2010, razor, webforms, csproj

使用 Visual Studio 2010、MVC 3（发行版）打开特定项目时出现此错误，该项目是我添加了 MVC 的传统 Web 表单项目：

“Web 项目 '' 需要缺少 Web 组件才能与 Visual Studio 一起运行。您想立即使用 Web 平台安装程序下载并安装吗？

具有 Razor 语法的 ASP.NET 网页。”

*   我已安装 MVC 并完全运行。其他纯 MVC 和另一个混合的 Web 窗体/MVC 项目打开没有任何问题。
*   单击“是”似乎会完成下载和安装，但错误仍然存​​在。
*   单击“否”会打开项目，其中我有 Razor 的智能感知和语法突出显示，我的所有 MVC 上下文项（添加视图、添加控制器等）。简而言之，除了看似虚假的错误消息外，一切似乎都运行良好。

我对 sln、csproj 和 web.config 文件进行了文件比较，并添加了所有相关的内容。在此之前，我错过了 ProjectTypeGuids 中的一些条目，这些条目的添加使 MVC 上下文菜单和 Razor intellisense 正常工作。我尝试重置 ProjectGuid，但仍然收到错误消息。

我之前也经历过卸载 MVC3、MVC2、ASP.NET 网页，修复 Visual Studio，从独立安装程序安装 MVC 3，可能还有更多事情。我还没有尝试重新安装完整的系统。我正在使用相对干净的 Windows 7 安装。这是大约 2 周前的全新设置，仅安装了 VS 2010（没有旧版本或测试版）。

在这一点上我没有想法。有人有什么建议吗？我有点困惑，因为这是特定于项目的，但错误消息表明问题出在 Visual Studio 上。

**更新：**它变得更有趣了。另一位开发人员能够在他的机器上打开相同的项目，而不会出现任何错误或警告。所以这是我工作站上这个项目特有的东西。在这一点上，我愿意把它写成一些模糊的边缘案例错误。

**更新 2：**现在重新启动系统更新后，它可以在我的工作站上运行。绝对是某种边缘情况，绝对不是我可以复制的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:12:09.093

您可以从更新中看到，在系统更新提示重新启动后问题已经消失。因此，如果其他人在这里遇到了类似的问题，并且您已经经历了所有其他可能性，请尝试重新启动。

# android - android WebView saveState/restoreState 在 4.0+ 中是否损坏

> ID：11019363
> 
> 赞同：2
> 
> 时间：2012-06-13T16:33:07.380
> 
> 标签：android, android-webview

我已经实现了 webview saveState() restoreState() 逻辑来恢复 webview 的当前页面和历史记录，如下所示：

```
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

    ...

    if(savedInstanceState != null)
    {
        webView.restoreState(savedInstanceState);
    }
    else
    {
        webView.loadUrl(url);
    }
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);

    if(webView != null) webView.saveState(outState);
} 
```

我正在通过在应用程序处于后台时通过 DDMS 终止应用程序进程来测试状态保存。

重新启动应用程序时，它在 2.x 设备上按预期工作，但在 4.x 设备上不正常。相反，我要么得到一个空白的 webview，要么奇怪的是，显示历史中的第一页。

有没有人遇到过 webview 的 4.x 特定问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:38:52.793

解决了这个问题。

`Save/restore`不是问题，原来问题出在我正在加载的特定 URL 上。他们在 3.0+ 中包含了一个与此错误相冲突的井号：[问题详细信息](http://code.google.com/p/android/issues/detail?id=19293)

# javascript - 使用 JavaScript 提取 IFrame 源

> ID：11019364
> 
> 赞同：0
> 
> 时间：2012-06-13T16:33:08.637
> 
> 标签：javascript

我有一个简单的 HTML/PHP 网页和一个 IFrame。IFrame 包含指向外部网站的链接。

我需要一些 JavaScript 来提取当前显示在 IFrame 内的网页的确切 URL（而不仅仅是外部站点的基本 URL）。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:36:23.947

您可以使用[`.contents()`](http://api.jquery.com/contents/)来获取 iFrame 的内容。该页面也有一个示例。

以下行将为您提供 iFrame 的**当前**URL。不是最初的，而是当你调用它时它显示的任何内容：

```
 document.getElementById("iframe").contentWindow.location.href 
```

注意：这仅在页面位于同一域中时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:36:49.063

访问 iframe 上的 url 的方法是检查 src 属性。

```
console.log(iframe.src);
// will print http://example.com 
```

但是，当用户导航到 iframe 中的不同页面时，父窗口仍会在 src 属性上显示原始 url

# css - Prettyphoto 中的 Facebook 和 Twitter 按钮被截断

> ID：11019371
> 
> 赞同：2
> 
> 时间：2012-06-13T16:33:23.817
> 
> 标签：css, prettyphoto

我正在使用 prettyphoto 在画廊中显示图像和视频。但是，社交按钮正在被截断。我尝试在 prettyPhoto CSS 中将`overflow`属性更改为`auto`，但所做的只是添加一个滚动条。无论照片或视频的大小如何，都会发生这种情况（请参见下面的屏幕截图）。有没有办法解决这个问题？

![在此处输入图像描述](../Images/77df4051104ba176aaeea3d5ba0b88b1.png) ![在此处输入图像描述](../Images/1eb7256ac5481a064fc76e3938cdd526.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T02:16:59.050

有同样的问题。更改了社交按钮的 CSS，如下所示：

```
.pp_social { float: left; margin: 0; width:450px;}
.pp_social .twitter { float: left; width: 90px; }
.pp_social .facebook { float: left; margin-left: 15px; width: 80px; overflow: hidden;} 
```

希望这可以帮助。

# google-drive-api - 为什么参数名称是 $accessToken？

> ID：11019375
> 
> 赞同：1
> 
> 时间：2012-06-13T16:33:42.433
> 
> 标签：google-drive-api

Drive SDK 的开发人员 - 或者通常是 OAuth2.0 PHP 客户端库！

在 apiClient.php 中有一个`setAccessToken`函数：

```
 public function setAccessToken($accessToken) {
    if ($accessToken == null || 'null' == $accessToken) {
      $accessToken = null;
    }
    self::$auth->setAccessToken($accessToken);
  } 
```

这个函数的@param 是这样的：

```
{"access_token":"TOKEN", "refresh_token":"TOKEN", "token_type":"Bearer",
        "expires_in":3600, "id_token":"TOKEN", "created":1320790426} 
```

如果访问令牌*只是*此 JSON 编码字符串的一部分，为什么要将此参数命名**为 $accessToken ？**

 *我认为这非常具有误导性。

当我们更深入地查看：`$auth->setAccessToken($accessToken);`在 apiOAuth2.php 中，我们看到：

```
 public function setAccessToken($accessToken) {
    $accessToken = json_decode($accessToken, true);
    if ($accessToken == null) {
      throw new apiAuthException('Could not json decode the access token');
    }
    if (! isset($accessToken['access_token'])) {
      throw new apiAuthException("Invalid token format");
    }
    $this->accessToken = $accessToken;
  } 
```

看看第二个**if** : `$accessToken['access_token']`。这有什么意义？accessToken 中的访问令牌 ?? :)

您应该将`$accessToken`这些函数的参数（整个 JSON 字符串）命名为其他名称`$credentials`或其他名称，因为它有点模糊......但如果我错了，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:12:04.840

正如一些评论提到的，我会在 Google APIs PHP 客户端库表单上发布这个：[https](https://groups.google.com/forum/?fromgroups#!forum/google-api-php-client) ://groups.google.com/forum/?fromgroups#!forum/google-api-php-client 或者在他们的问题跟踪器：[http ://code.google.com/p/google-api-php-client/issues/list](http://code.google.com/p/google-api-php-client/issues/list)

这将确保从事 PHP 客户端库的工程师能够意识到这一点。

你是对的，这很有意义:)*

# android - 从 Android 中的选项菜单进行网络检查

> ID：11019378
> 
> 赞同：0
> 
> 时间：2012-06-13T16:33:47.490
> 
> 标签：android, android-optionsmenu

我知道 onCreateOptionsMenu 只在活动上调用一次，但是否可以在 onOptionsItemSelected 上设置网络检查？

我曾尝试在选择项目时使用 ConnectivityManager 网络检查，但它总是返回 true ......我不确定它是否在调用 onCreateOptionsMenu 然后锁定网络状态时设置。

这是我的代码：

```
public void refreshCheck(){

try
{
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    if(cm == null)
        isAvailable = false;
    else
        isAvailable = cm.getActiveNetworkInfo().isAvailable();
}
catch(Exception e){}

if(isAvailable == true)
{   

    listDataPopulate();    

}
else
{
    Toast refresherror = Toast.makeText(this, "Connection interrupted. Unable to refresh.", duration);
    refresherror.show();    
}       

}

@Override
public boolean onCreateOptionsMenu(Menu menu){

MenuInflater menuInflater = getMenuInflater();
menuInflater.inflate(R.menu.news_menu, menu);
return true;

}

@Override
public boolean onOptionsItemSelected(MenuItem item){

switch(item.getItemId())
{
case R.id.aboutMenuItem:
AlertDialog.Builder alert=new AlertDialog.Builder(this);
alert.setTitle("About App").setMessage("About this app....").setNeutralButton("OK", null).show();
break;
case R.id.refreshNewsMenuItem:

    refreshCheck();

break;
default:
}
{

}
return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:24:46.500

把你的逻辑检查（以及对你发现的反应）放在[onPrepareOptionsMenu()](http://developer.android.com/reference/android/app/Activity.html#onPrepareOptionsMenu%28android.view.Menu%29)里面。

每次打开选项菜单时都会调用该方法，而不仅仅是第一次。这样，每次用户打开选项时它都会检查它是否有连接，因此应该显示刷新选项。

# gcc - 配置：错误：构建 GCC 需要 GMP 4.2+、MPFR 2.3.1+ 和 MPC 0.8.0+

> ID：11019382
> 
> 赞同：2
> 
> 时间：2012-06-13T16:33:57.120
> 
> 标签：gcc, build, compilation, compiler-errors

我正在尝试在运行 OS X 10.7.4 的 MacBook Pro 上构建 GCC-4.7.0。但是，我继续遇到同样的错误：

```
configure: error: Building GCC requires GMP 4.2+, MPFR 2.3.1+ and MPC 0.8.0+. 
```

运行以下行后发生此错误：

```
./configure --prefix=/Users/jreese/Documents/school/edinburgh/project/local/ 
```

为了摆脱这个错误，我尝试了以下操作：

*   我使用自制软件下载了 gmp-5.0.4、mpc-0.21 和 mpfr-3.1.0。此时，我尝试使用以下命令指向 gmp、mpc 和 mpfr 所在的位置：

    ```
    ./configure --prefix=/Users/jreese/Documents/school/edinburgh/project/local/     --with-gmp=/usr/local/Cellar/ --with-mpfr=/usr/local/Cellar/ --with-mpc=/usr/local/Cellar/ 
    ```

    但是，这导致了同样的错误。因此，我尝试将 gcc 指向 Cellar 目录周围的各个位置：

    ```
    ./configure --prefix=/Users/jreese/Documents/school/edinburgh/project/local/ --with-gmp=/usr/local/Cellar/gmp/ --with-mpfr=/usr/local/Cellar/mpfr --with-mpc=/usr/local/Cellar/mpc/
    ./configure --prefix=/Users/jreese/Documents/school/edinburgh/project/local/ --with-gmp=/usr/local/Cellar/gmp/5.0.4/ --with-mpfr=/usr/local/Cellar/mpfr/3.1.0/ --with-mpc=/usr/local/Cellar/mpc/0.21/
    ./configure --prefix=/Users/jreese/Documents/school/edinburgh/project/local/ --with-gmp=/usr/local/Cellar/gmp/5.0.4/include/ --with-mpfr=/usr/local/Cellar/mpfr/3.1.0/include/ --with-mpc=/usr/local/Cellar/mpc/0.21/share/ 
    ```

    最后这些都产生了同样的错误。然后，我下载了 gcc 错误消息中链接的 gmp、mpc 和 mpfr 版本（可在此处找到：ftp: [//gcc.gnu.org/pub/gcc/infrastructure/](ftp://gcc.gnu.org/pub/gcc/infrastructure/)）。从源代码构建这些并运行所有相同的配置后，我遇到了同样的问题。我在此安装中尝试的配置是：

    ```
    ./configure --prefix=/Users/jreese/Documents/school/edinburgh/project/local/
    ./configure --prefix=/Users/jreese/Documents/school/edinburgh/project/local/ --with-gmp=/usr/local/ --with-mpfr=/usr/local/ --with-mpc=/usr/local/
    ./configure --prefix=/Users/jreese/Documents/school/edinburgh/project/local/ --with-gmp=/usr/local/include/ --with-mpfr=/usr/local/include/ --with-mpc=/usr/local/include/ 
    ```

然后我在某处读到，如果我没有明确地将配置设置为在 64 位模式下运行，可能会出现问题。因此，我再次尝试了所有这些配置，并添加了“CC = gcc -m64”设置。但这并没有改变什么。如果有人有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T17:56:13.707

如果您不知道如何构建并将 GCC 的配置正确地定向到库，您可以将它们放在 GCC 本身的源代码树中：

/some/dir/source/gcc/[libstdc++|libgomp|gcc|libiberty|....] /some/dir/source/gcc/gmp/[configure|...] /some/dir/source/gcc/ mpfr/[配置|...] /some/dir/source/gcc/mpc/[配置|...]

所以没有附加版本号。然后只运行 GCC 配置，不带任何与 GMP/MPC/MPFR 相关的参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-21T14:18:22.247

我遇到过同样的问题，通过安装相应的开发包很容易解决：gmp-devel、mpfr-devel 和 libmpc-devel

*   伊格尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:24:21.767

EasyBuild（一个使构建软件更容易的工具）在这里可以提供帮助。它带有一个小的 easyconfig 文件，用于指定要构建的 GCC 版本以及要启用的功能（参见例如[https://github.com/hpcugent/easybuild/blob/master/easybuild/easyconfigs/g/GCC/GCC- 4.7.0.eb](https://github.com/hpcugent/easybuild/blob/master/easybuild/easyconfigs/g/GCC/GCC-4.7.0.eb) )。

一旦你下载了 EasyBuild 并配置了它，你就可以运行

```
$EBHOME/easybuild.sh myGCC.eb 
```

将 EBHOME 设置为您解压缩 EasyBuild 的位置，并将 myGCC.eb 设置为示例 GCC easyconfig 的副本，您可以根据需要对其进行修改。

在对任何依赖项（例如 GMP、MPFR 和 MPC）执行相同操作后，此命令将为您下载 GCC 源 tarball 并构建/安装它，从而为您省去很多麻烦。

有关 EasyBuild 的更多信息，请参阅[https://github.com/hpcugent/easybuild/wiki](https://github.com/hpcugent/easybuild/wiki)。

# blackberry - 当应用程序在黑莓中关闭时如何收听通知？

> ID：11019383
> 
> 赞同：0
> 
> 时间：2012-06-13T16:33:59.090
> 
> 标签：blackberry

我想开发一个应用程序来持续监听诸如短信、电子邮件等通知。我可以通过将应用程序置于后台来做到这一点。但是即使关闭，我也想做同样的事情？

请问有什么建议和技巧吗？

# linq - linq 无法隐式转换类型'System.Linq.IQerable

> ID：11019384
> 
> 赞同：0
> 
> 时间：2012-06-13T16:34:01.013
> 
> 标签：linq

我有以下查询：

```
 tblVAL tblval = db.tblVALs.Where(p => p.PID == pid); 
```

请注意，我希望获得应返回的项目列表。tblVAL 是实体框架中的一个表。请注意，我需要一份要退回的物品清单，因为退回的物品可能超过 1 件。因此，我不想使用 First() 等。

我收到以下消息

无法将类型“System.Linq.IQuerable”隐式转换为 wa.Models.tblVAL。存在隐式转换（您是否缺少演员表？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:35:31.217

您的查询正在返回一个集合。您需要调用[`SingleOrDefault`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.singleordefault.aspx)、`Single`、`First`或`FirstOrDefault`来获取一条记录。

```
tblVAL tblval = db.tblVALs.Where(p => p.PID == pid).SingleOrDefault(); 
```

如果您想要一个集合，请将您的变量类型更改为一个集合：

```
IEnumerable<tblVAL> tblval = db.tblVALs.Where(p => p.PID == pid); 
```

您还可以调用`ToList`强制执行查询：

```
List<tblVAL> tblval = db.tblVALs.Where(p => p.PID == pid).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:03:57.047

如果你能得到很多结果，那么简单的事情就是调用 ToList。

熟悉 linq 的方法，[`System.Linq.Enumerable`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx)您将成为 linq 的专家。

# mysql - MySQL：仅同步丢失的表

> ID：11019390
> 
> 赞同：1
> 
> 时间：2012-06-13T16:34:42.270
> 
> 标签：mysql, linux, refresh

我正在尝试同步两个 MySQL 数据库。不是通过复制，而是已经在不同的环境中设置。

基本上，我们拥有的两个环境是 QA 环境和生产环境。我们正在寻求部署新产品，而我们的 QA 团队错过了记录数据库插入的一些步骤。

我遇到的问题是我有一个具有复制（主动/被动）设置的生产环境。它丢失了 QA 拥有的几个表，他们不知道哪些表丢失了，并且收到了大量与丢失表相关的数据库错误。

有没有办法导出数据库（我正在使用`-d`这样只有结构过来，没有数据）并且只有 MySQL 插入丢失的表？

如果没有，我的解决方案是擦除我们的生产实例并用我们的 QA 实例刷新它，而没有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T21:25:00.687

如果您添加`--skip-add-drop-table`（或`--skip-opt`），您的表将不会有任何删除语句。如果您在其他数据库上运行转储，现有表的创建语句将失败，但不会影响任何内容。

我看不到 mysqldump 为创建表添加“如果不存在”的任何选项，但我不确定您是否真的需要它。

# image - 如何在 SVG 中控制从两个图像创建的图像蒙版输出的不透明度？

> ID：11019402
> 
> 赞同：2
> 
> 时间：2012-06-13T16:35:22.423
> 
> 标签：image, svg, transparency, masking

在 SVG 中使用两个图像创建图像蒙版时，如何保持图像的不透明度？如下图所示，图像几乎是透明的——它应该是完全不透明的。为什么会发生这种情况，如何强制蒙面产品具有 100% 的不透明度？

这是我得到的结果：

![在此处输入图像描述](../Images/9f83c44d41610ffa2cd6d7085b000526.png)

这是我正在使用的蒙版图像： ![在此处输入图像描述](../Images/eda030d04e36a011d9a25edbdecf0f4d.png)

这是我的代码（对 PHP 变量感到抱歉）：

```
<svg width="'.$width.'" height="'.$height.'" version="1.1"
    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <defs>                          
            <mask id="mask'.$id.'" maskUnits="userSpaceOnUse"
                x="0" y="0" width="'.$width.'" height="'.$height.'">

                <image id="maskImg'.$id.'" x="0" y="0" width="'.$width.'px" height="'.$height.'px"
                    xlink:href="images/'.$treatment_url.'" >
                </image>        
            </mask>

            <g id="imgGroup'.$id.'">
                <rect x="0" y="0" width="'.$width.'" height="'.$height.'" fill="rgba(30,30,30,0.2)"  />
                <image id="listingImg'.$id.'" 
                    x="0" y="0" width="'.$width.'px" height="'.$height.'px"
                    xlink:href="'. $img_url .'">
                </image>
            </g>                    
        </defs> 

    <use xlink:href="#imgGroup'.$id.'" mask="url(#mask'.$id.')" opacity="1" />';    
</svg> 
```

仅供参考：组`<rect>`中`<g>`的 只是当 MASKED 图像在 x 或 y 维度上小于 MASKING 图像时提供背景；它不会影响我遇到的掩蔽问题，因为我已经尝试过两种方式。

我很难过，感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T21:47:49.503

SVG 1.1 使用[亮度遮罩](http://www.w3.org/TR/SVG11/masking.html#Masking)。一个简单且有些不准确的解释是：蒙版图像中的白色表示完全不透明，黑色表示完全透明。[这里](http://apike.ca/prog_svg_mask.html)有更多的解释。一些更高级的带有图像的蒙版示例，请参见[此处](http://kaioa.com/b/1102/svgjng/index.html)。

Alpha 掩码已被[提议](http://www.w3.org/Graphics/SVG/WG/wiki/Proposals/Alpha_mask)并被[接受](http://www.w3.org/Graphics/SVG/WG/wiki/SVG2_Requirements_Input#Masks_using_alpha_or_luminance)为 SVG2 的要求。

# jquery - 选择事件的 fullCalendar UNIX 时间戳转换问题

> ID：11019405
> 
> 赞同：2
> 
> 时间：2012-06-13T16:35:31.463
> 
> 标签：jquery, global-variables, fullcalendar, unix-timestamp

我正在使用 jQuery 小部件 DatePicker 和 Dialog 与 Adam Shaw [http://arshaw.com/fullcalendar](http://arshaw.com/fullcalendar)的 fullCallendar 进行交互。我有很多工作要做。我可以使用 DatePicker 跳转到完整日历中的特定日期。当我选择预订活动时，会出现 jQuery 对话框，我使用 ajax 调用将字段发送到 php 脚本以处理数据。

然而，我的问题来自 fullcalendar 的开始和结束变量中使用的 UNIX 时间戳。我在 html 文件的顶部设置了一个全局变量，并在 fullcalendar 中设置了选择的开始/结束时间，以便将数据传递给对话框。从对话框中，我将它传递给我的 PHP 脚本。但是，当我将该 UNIX 时间戳转换为格式为“YmjHis”的日期时，我得到了奇怪的结果。

这是fullcalendar中“select”方法的相关代码：

```
select: function(start, end, allDay) { 
        // need to check the day first. If the selected day/time < today, throw an alert
        // otherwise allow the booking of the conference.
            var now = calendar.fullCalendar('getDate');
            if (start < now )
            {
                alert('You cannot book a conference in the past!');
                calendar.fullCalendar( 'unselect' );
            }
            else
            {
                                    // set the global variables
                st = start;
                et = end;

                $('#dialog-form').dialog('open'); // open the dialog form
            }

            }, 
```

现在，在对话框中执行此操作（主要直接取自 jQuery UI 示例页面：

```
$( "#dialog-form" ).dialog({
        autoOpen: false,
        height: 300,
        width: 350,
        modal: true,
        buttons: {
            "Create Event": function() {
                var bValid = true;
                allFields.removeClass( "ui-state-error" );

                bValid = bValid && checkLength( name, "name", 3, 25 );
                bValid = bValid && checkLength( title, "title", 1, 20 );
                bValid = bValid && checkLength( email, "email", 6, 80 );
                bValid = bValid && checkLength( ports, "ports", 1, 2 );

                bValid = bValid && checkRegexp( name, /^[a-z]([0-9a-z_])+$/i, "Name may consist of a-z, 0-9, underscores, begin with a letter." );
                // From jquery.validate.js (by joern), contributed by Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/
                // change to ensure a domain email address
                bValid = bValid && checkRegexp( email, /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i, "eg. ui@jquery.com" );

                if ( bValid ) {
                    // code to insert into DB goes here
                    // need to somehow grab either a global variable or access
                    // full calendar start/end times from the selection phase
                    // in order to pass to the DB. 
                    $.ajax(
                    {
                        url: "bookings.php",
                        type: "POST",
                        data: {e: email.val(), t: title.val(), n: name.val(), p: ports.val(), start: +st, end: +et},                
                        dataType: "HTML",
                        success: function(data) {
                                $('.result').html(data);
                                // reload fullCalendar here maybe??
                            }
                    });
                    $( this ).dialog( "close" );
                }
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        },
        close: function() {
            allFields.val( "" ).removeClass( "ui-state-error" );
        }
    }); 
```

好的，现在我的 bookings.php 文件只有以下测试代码：

```
$file = 'variables.txt'; 
$arr= $_REQUEST; 
$fp = fopen($file, 'w') or die('Could not open file!');  
fwrite($fp, "variables are:\n");
foreach ($arr as $key => $value) { 
    $toFile = "Key: $key; Value: $value \n"; 
// write to file  
fwrite($fp, "$toFile") or die('Could not write to file'); 
}

// DEBUG CODE write some blank space
fwrite($fp, "\n\n") or die('Could not write to file');
$startTime = $_REQUEST['start'];
$endTime = $_REQUEST['end'];

$start = date('YmjHis', $startTime);
fwrite($fp, "start time: $startTime = $start\n") or die('Could not write to file');
$end = date('YmjHis', $endtime);
fwrite($fp, "end time: $endTime = $end\n") or die('Could not write to file');

// close file  
fclose($fp); 
```

当我查看 variables.txt 文件时，我看到：

```
Key: e; Value: me@blah.com
Key: t; Value: blah
Key: n; Value: blah
Key: p; Value: 2
Key: start; Value: 1339610400000
Key: end; Value: 1339617600000

start time: 1339610400000 = 444200724160000
end time: 1339617600000 = 19691231160000 
```

我期望的是开始和结束时间的格式如下：20120613113000，哦，而不是以 1969 年的日期结束。

所以我显然在我的转换中做错了什么。这是完整实施 fullCalendar 来做我需要做的事情的最后一个障碍，我很难过。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:02:34.293

现在看起来你的开始时间和结束时间有太多的零。我的猜测是，当您将其从请求中拉出时，它会因某种原因得到填充。

Unix 转换

开始时间1339610400000
= 07/24/20 @ 6:00:00pm EST in (M/D/Y @ h:m:s)

结束时间 1339617600000 = 10/16/20 @ 2:00:00am EST in (M/D/Y @ h:m:s)

我认为您使用的日期不是 2020 年而是 2012 年，所以我将上面的数字缩短到 10 位数（截至 2012 年 6 月 12 日的当前 TS @ 12:57pm = 1339610258）

开始时间 1339610400 = 06/12/12 @ 1:00:00pm EST

结束时间 1339617600 = 06/13/12/ @ 3:00:00pm EST

现在这看起来更像是您在日历中预订的日期。

我的猜测是你在约会的某个地方得到了额外的零。

# performance - 充分利用高性能 MDB

> ID：11019408
> 
> 赞同：1
> 
> 时间：2012-06-13T16:35:37.543
> 
> 标签：performance, transactions, application-server, message-driven-bean

应用服务器在调用 MDB 的 onMessage 方法之前创建一个新事务。我也在 onMessage 方法中处理数据库更新。事务会产生额外的开销，并且在一个事务中处理多个消息可以提高性能。

是否可以让 App 服务器对多条消息使用一个事务。或者也许还有其他方法可以解决这个问题？

而且，顺便说一句，我不能使用多个实例，因为我需要保留序列顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T08:56:56.333

我想您可以将消息存储在一个列表中，并根据您要在一个事务中处理多少消息，您可以检查列表的大小并处理消息。

# c - libxml2 将节点及其所有内容转换为原始 xml 字符串

> ID：11019413
> 
> 赞同：2
> 
> 时间：2012-06-13T16:35:58.970
> 
> 标签：c, xml, libxml2

我想将一个节点及其所有内容和子节点转换为字符串。

例如我有这个节点

```
<node i="a">
  <child1>azerty</child1>
  <child2>qwerty</child2>
</node> 
```

我想要一个函数来转换为字符串“str1”，字符串的内容将是这样的：

```
<node i="a">
  <child1>azerty</child1>
  <child2>qwerty</child2>
</node> 
```

那是与源 xml 文件中完全相同形状的原始节点内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:39:30.753

这可能会有所帮助：

`xmlChar * xmlXPathCastNodeSetToString (xmlNodeSetPtr ns)` 将节点集转换为其字符串值。

从[文档](http://xmlsoft.org/html/libxml-xpath.html)

# sql - 从 100 个表中按年和月导出

> ID：11019424
> 
> 赞同：0
> 
> 时间：2012-06-13T16:36:43.173
> 
> 标签：sql, sql-server, sql-server-2008, ssms

我被要求从 100 个表中导出数据。

对于每个表，它会是这样的：

```
select * from table1
where datepart(yyyy,table1.DOS)=2011
and datepart(mm,table1.DOS)=01 
```

进而：

```
select * from table1
where datepart(yyyy,table1.DOS)=2011
and datepart(mm,table1.DOS)=02 
```

ETC...

我需要为每张桌子的每一年和每个月做这个

我需要将这些数据集导出到 CSV

您能给我一些指导，让我了解如何自动执行此操作，而不是手动使用导入/导出向导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:49:49.947

带有 sp_msforeachtable 的动态 SQL。这是包含信息和示例的链接：

[http://weblogs.asp.net/nunogomes/archive/2008/08/19/sql-server-undocumented-stored-procedure-sp-msforeachtable.aspx](http://weblogs.asp.net/nunogomes/archive/2008/08/19/sql-server-undocumented-stored-procedure-sp-msforeachtable.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T16:54:42.150

我的建议 -通过在文件`Window Services`中设置时间（调度）来帮助你`Application Configuration`

# java - Java Oracle jdbc COLUMN 语句

> ID：11019428
> 
> 赞同：0
> 
> 时间：2012-06-13T16:36:56.823
> 
> 标签：java, oracle, variables, jdbc

问题如下通过在 SQL Plus 中执行以下查询，一切正常：

```
column firstname new_value v_firstname
select firstname from tbcustomer where customer_id = 111
select '&v_firstname', wrk.* from tbwork where customer_id = 111 
```

但是当我尝试从 Java 程序执行这些查询时，我得到**java.sql.SQLException: ORA-00900: invalid SQL statement** on the first SQL query

```
 Connection connection = null;
    Statement stat = null;
    String query = "column due_date new_value v_due_date";
    try {

        // Load the JDBC driver
        String driverName = "oracle.jdbc.driver.OracleDriver";
        Class.forName(driverName);
        connection = DriverManager.getConnection(url, username, password);
        stat = connection.createStatement();
        boolean res_num = stat.execute(query);

    } catch (ClassNotFoundException e) {
        // Could not find the database driver
    } catch (SQLException e) {
        e.printStackTrace();
    } 
```

现在的问题是如何克服这个错误并执行第一个查询，或者您是否有任何其他解决方案可以在 oracle 会话上定义变量并在其他 SQL 语句中使用它。例如，第三个查询是我需要执行的众多查询之一，它们都将具有相同的名字字段

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:52:09.297

`column`是一个 SQL*Plus 命令。它在 SQL 或 PL/SQL 中无效，因此您不能在 Java 应用程序中使用它。类似的替换变量`&v_firstname`也是一个 SQL*Plus 构造——它们在 SQL 或 PL/SQL 中无效，因此您不能在 Java 应用程序中使用它们。

如果您的目标是在单个查询中获取`firstname`from`tbcustomer`和所有列`tbwork`，则需要连接这两个表。假设两个表都有一个`customer_id`列，这就是应该如何连接两个表

```
SELECT cust.firstname,
       work.*
  FROM tbcustomer cust
       JOIN tbwork work ON (cust.customer_id = work.customer_id)
 WHERE cust.customer_id = 111 
```

但是，假设您将针对多个`customer_id`值执行此查询，那么 111 应该是一个绑定变量而不是文字，并且您的 Java 代码应该使用 a来准备 SQL 语句，然后在执行之前`PreparedStatement`使用该方法绑定一个像 111 这样的值`setInt`询问。

如果你想把它分成两个数据库调用，你可以简单地做类似的事情

```
PreparedStatement stmtGetFirstName = connection.prepareStatement("select firstname from tbcustomer where customer_id = ?");
stmtGetFirstName.setInt( 1, 111 );
ResultSet rsGetFirstName = stmtGetFirstName.executeQuery();
String firstName = rsGetFirstName.getString();

PreparedStatement stmtGetWork = connection.prepareStatement("select ?, work.* from tbwork where customer_id = ?");
stmtGetWork.setString( 1, firstName );
stmtGetWork.setInt( 2, 111 );
ResultSet rsGetWork = stmtGetWork.executeQuery(); 
```

如果您可以保证所有 6 亿次执行都将发生在同一个数据库会话中，那么您可以使用数据库上下文。您需要创建上下文和它在数据库中使用的包

```
SQL> create or replace context fname_ctx using scott.pkg_get_fname;

Context created.

SQL> ed
Wrote file afiedt.buf

  1  create or replace package pkg_get_fname
  2  is
  3    procedure set_fname( p_customer_id in number );
  4    function get_fname return varchar2;
  5* end;
SQL> /

Package created.

SQL> create or replace package body pkg_get_fname
  2  is
  3    procedure set_fname( p_customer_id in number )
  4    as
  5    begin
         -- Obviously, you'd get the data here from your table rather than hard-coding 'Bob'
  6      dbms_session.set_context( 'fname_ctx', 'fname', 'Bob' );
  7    end;
  8
  9    function get_fname
 10      return varchar2
 11    is
 12      l_fname varchar2(100);
 13    begin
 14      l_fname := sys_context( 'fname_ctx', 'fname' );
 15      return l_fname;
 16    end;
 17  end;
 18  /

Package body created. 
```

然后，您可以从 Java 调用`pkg_get_fname.set_fname(111)`以设置上下文并`pkg_get_fname.get_fname`在查询中使用该函数。

然而，关注性能并计划从 Java 对数据库执行 6 亿次查询似乎很奇怪。这将涉及中间层和数据库服务器之间的大量网络往返——如果你真的关心性能，你会将这项工作推送到数据库中的存储过程以消除网络循环——旅行。而且您多次执行它们的事实使我怀疑您正在执行大量逐行处理，而不是让数据库执行基于集合的操作。这也将成为业绩不佳的主要原因。另外，数据库生来就是为了连接，所以如果有适当的索引，像这样的简单连接会显着增加查询的成本是很不寻常的。

# google-apps-script - 使用脚本提交表单时发送 Google 表单复杂电子邮件

> ID：11019432
> 
> 赞同：1
> 
> 时间：2012-06-13T16:37:16.230
> 
> 标签：google-apps-script

我现在有这个脚本，可以向自己发送一封电子邮件作为测试，表明有一个新的申请提交，但我希望有一封完整的电子邮件发送给我们的人力资源部门，给出每个字段的名称，然后a : 和一个空格，然后他们的答案是什么。我知道你可以做到这一点，并且找到了一个我试图开始工作的脚本，但它一直失败，开发人员没有帮助我修复它。我真的很想为我的人力资源部门完成这项工作，这样我们就可以继续创建一个新的应用程序。到目前为止，这是我的代码，由于隐私问题，我删除了我的电子邮件：

```
function sendFormByEmail(e){
  var email = "emailgoeshere";
  var subject = "A New Employment Application has been Submitted"; 
  var message = "A New Application Has Been Submited. Please go to the spreadsheet for more details.";
  MailApp.sendEmail(email, subject, message);
} 
```

再次感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T18:14:18.167

或者你可以试试这个非常简单的：（**仔细阅读脚本中的注释）**

```
function sendFormByEmail(){
var email = "email adress comes here";
var subject = "A New Employment Application has been Submitted";
var message = "A New Application Has Been Submited. Please find the details below :";
var row = SpreadsheetApp.getActiveSpreadsheet().getLastRow();// assuming data is on the last row of the spreadsheet
var messagebody=createmessage(row);
MailApp.sendEmail(email, subject, message+messagebody);
}
//
function createmessage(row){
   var sh = SpreadsheetApp.getActiveSheet();
   var ss = SpreadsheetApp.getActiveSpreadsheet();
   var lastCol = ss.getLastColumn();
   var LF=  "\r\n"
   var body = LF
   var headers = sh.getRange(1,1,1,lastCol).getValues();
   var data = sh.getRange(row,1,1,lastCol).getValues();
   for(nn=0;nn<headers[0].length;++nn){
     body+=headers[0][nn]+" : "+data[0][nn]+LF
     }
Logger.log(body)
return body
}
//
//eof 
```

如前所述，来自表单的数据必须在工作表的最后一行数据中，并且必须有一些数据来检查它是如何工作的，否则答案=问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:33:18.357

我开发了一个可以帮助你的脚本，它叫做 FormEmailer。您可以在 Script Gallery 中找到它或在其[网站](http://sites.google.com/site/formemailer)上获取代码。

# iis - 禁用某些路径的 IIS 请求过滤

> ID：11019438
> 
> 赞同：4
> 
> 时间：2012-06-13T16:37:29.667
> 
> 标签：iis, iis-7, requestfiltering

有什么方法可以配置 IIS 7.0+（或 7.5+），以便完全禁用某些路径的请求过滤。那是，

```
http://host.local/foo/bar.cs 
```

被禁止（因为在`*.cs`中明确禁止提供文件`applicationHost.config`），但是

```
http://host.local/foo/allow-all/bar.cs 
```

被允许。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T16:56:01.660

在您的`allow-all`目录中，您可以使用以下配置创建一个 web.config 文件：

```
<configuration>
    <system.webServer>
        <security>
            <requestFiltering>
                <fileExtensions>
                    <remove fileExtension=".cs" />
                </fileExtensions>
            </requestFiltering>
        </security>
        <staticContent>
            <mimeMap fileExtension=".cs" mimeType="text/plain" />
        </staticContent>
    </system.webServer>
</configuration> 
```

此配置从请求过滤中删除`.cs`扩展。此外，为了让 IIS 正确地提供内容，它需要一个 MIME 类型，因此`.cs`扩展名被添加为 text/plain。

这些更改也将适用于`allow-all`. 此配置适用于集成应用程序池。Classic 可能需要额外的更改，因为也有明确禁止 .cs 的 HTTP 处理程序。

# ipython - 如何使用指定的命名空间启动 IPython Notebook

> ID：11019440
> 
> 赞同：8
> 
> 时间：2012-06-13T16:37:42.553
> 
> 标签：ipython

我有一个用 Python 编写的基于 GUI（TraitsUI/PyQt/Envisage）的应用程序。我想生成一个 IPython Notebook，我在其中公开了一个小 API 和一些对象。这些对象包括一个 SQLAlchemy 会话和一堆 SQLAlchemy 模型。

我看了很多，但我找不到任何这样的例子。我可以开始一个笔记本：

```
from IPython.frontend.html.notebook import notebookapp
app = notebookapp.NotebookApp.instance()
app.initialize()
app.start() 
```

并且效果很好（虽然我更喜欢'start'是非阻塞的......我假设如果需要我可以在另一个线程中完成它），但我不能改变命名空间。

我还发现了这样的例子：

```
from IPython.zmq.ipkernel import IPKernelApp

namespace = dict(z=1010)

kapp = IPKernelApp.instance()
kapp.initialize()

# Update the ns we want with special variables auto-created by the kernel
namespace.update(kapp.shell.user_ns)
# Now set the kernel's ns to be ours
kapp.shell.user_ns = namespace

kapp.start() 
```

但我不确定如何从这里实际打开笔记本。

有人有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-09-24T23:15:29.950

```
>>> import IPython
>>> z=1010
>>> IPython.embed()
Python 3.5.2 (default, Oct  8 2019, 13:06:37)
Type 'copyright', 'credits' or 'license' for more information
IPython 7.9.0 -- An enhanced Interactive Python. Type '?' for help.

In [1]: z
Out[1]: 1010 
```

# shell - 当没有给出参数时，如何防止需要参数的选项使用下一个选项？

> ID：11019441
> 
> 赞同：1
> 
> 时间：2012-06-13T16:37:45.570
> 
> 标签：shell, sh, getopts

我在 test.sh 中有以下代码：

```
while getopts "f:i:" opt; do
  case $opt in
  f)
    echo $OPTARG
  i) echo $OPTARG 
```

现在如果我运行`./test.sh -f`我会得到错误：

```
option requires an argument -- i 
```

但是，当我运行`./test.sh -f -i test`它时，它会回显 -i。

我知道这是因为它只是将下一个参数用空格分隔，但是有没有简单的方法来处理这个问题？

我可以做`if [ $OPTARG == "-i" ]; then exit 1`，但我希望当我有多种选择时有一种更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:41:52.633

如果您使用 getopts，它有自己的方式。放手去做。

毕竟，谁说选项的参数不能以破折号开头？如果是文件名，用户可能希望文件名以破折号开头。如果它是一个数字，它可能是一个负数。

# push-notification - 增强的推送格式是否可以防止被苹果断开连接？

> ID：11019444
> 
> 赞同：3
> 
> 时间：2012-06-13T16:37:50.123
> 
> 标签：push-notification, apple-push-notifications, devicetoken

通过增强推送通知推送到我的所有设备（18k）时，我必须运行反馈服务​​并删除无效令牌以防止苹果断开我的流。测试时，我注意到虽然第一个令牌无效（由反馈服务告知），但消息仍然传递到其他测试设备。在使用增强推送格式之前，连接停止并且在无效令牌之后没有传递给任何人。增强的推送格式是否可以防止断开连接？还是苹果只需要一些时间就可以识别出一个无效的令牌，然后在那个无效的令牌之后停止几个令牌？

任何帮助将非常感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:18:24.910

当您发送错误的设备 ID 时，Apple 会停止处理消息，在使用增强格式时也是如此。至少这是我在从我的应用程序的调试版本发送设备 ID 后注意到的。我确实收到了指示错误的 6 字节消息，但之后无法通过 SSL 套接字发送更多消息的数据。

从文档中，我还认为如果您使用增强格式，Apple 会继续处理，但事实并非如此。

# entity-framework - EF 代码第一个父子映射

> ID：11019448
> 
> 赞同：3
> 
> 时间：2012-06-13T16:38:13.297
> 
> 标签：entity-framework, ef-code-first

这可能是一个重复的 qn，但它无法得到这个场景的正确答案。我有以下表结构：

```
public class File
{
     public int FileId { get; set; } //PK
     public int VersionID { get; set; }

     public virtual ICollection<FileLocal> FileLLocalCollection { get; set; }
}

public class FileLocal
{
     public int FileId { get; set; } //PK, FK
     public int LangID { get; set; } //PK,FK
     public string FileName { get; set; }
} 
```

我没有在这里包含第三个表（它基本上是 LangID (PK) & LangCode）我如何在 fluent Api 中指定这个映射，以便我可以为每个 File 对象加载“FileLLocalCollection”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T20:20:16.940

映射的第一部分可以这样完成：

```
modelBuilder.Entity<File>()
    .HasMany(f => f.FileLocalCollection)
    .WithRequired()
    .HasForeignKey(fl => fl.FileId);

modelBuilder.Entity<FileLocal>()
    .HasKey(fl => new {fl.FileId, fl.LangId}); 
```

第二部分取决于您`Lang`的定义方式。例如，如果您将导航属性添加`FileLocal`到`Lang`您可以这样映射它：

```
modelBuilder.Entity<FileLocal>()
    .HasRequired(fl => fl.Lang)
    .WithMany()
    .HasForeignKey(fl => fl.LangId); 
```

# ios - UIApplicationStateActive 时如何处理通知

> ID：11019452
> 
> 赞同：1
> 
> 时间：2012-06-13T16:38:30.487
> 
> 标签：ios, xcode, ios5, xcode4.3

我已经设置了一个注册远程通知的应用程序。

```
- (void)application:(UIApplication*)application
didReceiveRemoteNotification:(NSDictionary *)userInfo
{    
    NSString *status = [NSString stringWithFormat:@"Notification Received:\n%@",userInfo.description];
    NSLog(@"%@",status);

    UIAlertView *alert=[[UIAlertView alloc] 
                        initWithTitle:@"didReceiveRemoteNotification" 
                        message:eventName
                        delegate:self 
                        cancelButtonTitle:@"Hide" 
                        otherButtonTitles:@"View", 
                        nil];
    alert.tag = kAlertTypeNotification;
    [alert show];
    [self vibrate];

if ( application.applicationState == UIApplicationStateActive ) {
    // app was already in the foreground
    **DO SOMETHING HERE**

}
else {
    // app was just brought from background to foreground

}
} 
```

所以，当应用程序未激活时，我会收到非常漂亮的横幅提醒，在 iPhone 上看起来很不错。

但是，当应用程序打开时，我似乎唯一的选择是呈现一个 UIAlertView。在我看来，这是侵入性的。有没有办法在 application.applicationState == UIApplicationStateActive 时显示横幅？或者，是否有实现这种功能的开源库？

感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-21T01:51:39.607

我在这里更直接地问了这个问题：

[当您的应用程序打开并在前台显示股票 iOS 通知横幅？](https://stackoverflow.com/questions/30852870/displaying-a-stock-ios-notification-banner-when-your-app-is-open-and-in-the-fore/30855842#30855842)

简短的回答是，从 iOS 9 开始，当您的应用程序处于前台时，您无法显示**股票iOS 横幅。**

相反，您将不得不依赖自制或第 3 部分通知横幅。

请复制此雷达请求此功能：rdar://22313177

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:51:21.857

当应用程序处于前台时，您可以做任何您想做的事情。谁说你必须显示 UIAlertView？

# haskell - Haskell Prime 测试混乱

> ID：11019453
> 
> 赞同：3
> 
> 时间：2012-06-13T16:38:35.147
> 
> 标签：haskell, primality-test

所以我对 Haskell 完全陌生，希望它不会显示太多。无论如何，我试图创建一个函数来确定一个数字是否是素数。基本思想是这样的：给定一个数，看看它是否能被任何比它小的数整除。如果是，则返回 false。如果不是，则为素数，返回 true。到目前为止的代码（已知有效）是这样的：

```
divisible :: Integer -> Integer -> Bool
divisible x 2 = even x
divisible x y = ((x `mod` y) /= 0) && not (divisible x (y-1))
isPrime :: Integer -> Bool
isPrime x = not (even x) && not (divisible x (x-1)) 
```

产生：

```
ghci> isPrime 9
False
ghci> isPrime 13
True 
```

我想做的是稍微优化一下，因为我只需要检查小于或等于 sqrt(x) 的值。问题是，当我尝试实现它时，事情变得疯狂：

```
isPrime x = not (even x) && not (divisible x (ceiling(sqrt(fromIntegral(x-1))))) 
```

除了它看起来很糟糕（我说我是新手）之外，它并没有给出正确的结果：

```
ghci> isPrime 9
False
ghci> isPrime 13
False 
```

我试图弄清楚发生了什么变化，因为：

```
ghci> ceiling(sqrt(13))
4 
```

似乎给了我正确的号码。我知道这是一个小问题，但我很困惑......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T16:47:46.920

你把你的条件搞混了：

```
divisible x y = ((x `mod` y) /= 0) && not (divisible x (y-1)) 
```

应该

```
divisible x y = (x `mod` y) == 0 || divisible x (y-1) 
```

为测试工作。

照原样，您的`divisible`功能会扩展，例如

```
divisible 21 5 = (21 `mod` 5 /= 0) && not (divisible 21 4)
               = (21 `mod` 5 /= 0) && not ((21 `mod` 4 /= 0) && not (divisible 21 3))
               = not ((21 `mod` 4 /= 0) && not ((21 `mod` 3 /= 0) && not (divisible 21 2)))
               = not (True && not (False && not (divisible 21 3)))
               = not (not False)
               = False 
```

因为`21 `mod` 3 == 0`, 并以平方根为界`isPrime 21`求值。`True`

但是，我得到

```
*StrangePrime> isPrime 9
True
*StrangePrime> isPrime 13
True 
```

使用平方根的代码。

没有平方根，它碰巧适用于奇数，因为奇数复合和它的任何除数之间的差总是偶数。展开`divisible`几步，我们看到奇数复合的最小素因子在`n = p*m`哪里`p``n`

```
divisible n (n-1) = n `mod` (n-1) /= 0 && not (divisible n (n-2))
                  = not (divisible n (n-2))
                  = not (n `mod` (n-2) /= 0 && not (divisible n (n-3)))
                  = not (not (divisible n (n-3)))
                  = not^2 (divisible n (n-3)) 
```

并归纳地

```
divisible n (n-1) = not^(k-1) (divisible n (n-k)) 
```

如果没有`n`大于的除数`n-k`。现在，在上述情况下，最大的除数`n`是`m = n - (p-1)*m`，所以我们得到

```
divisible n (n-1) = not^((p-1)*m-1) (divisible n m)
                  = not^((p-1)*m-1) (n `mod` m /= 0 && not (...)) 
```

但是`n `mod` m == 0`，所以我们有

```
divisible n (n-1) = not^((p-1)*m-1) False 
```

因为`p`是奇数，`p-1`所以是偶数，所以 s 也是`(p-1)*m`，所以我们总共有奇数个`not`s，与一个 相同`not`，给出

```
divisible n (n-1) = True
isPrime n = not (even n) && not (divisible n (n-1)) = True && not True = False 
```

如果`p`是奇素数，展开达到`divisible p (p-1) = not^(p-3) (divisible p (p - (p-2)))`。`p-3`是偶数，`divisible p 2`是`even p`，是`False`。

一般来说，考虑`divisible n s`一个奇数`n`，并让`d`是`n`不超过的最大除数`s`，如果`n`是合数，或者`d = 2`如果`n`是素数。`divisible n s`仍然以同样的方式展开

```
divisible n s = not^k (divisible n (s-k)) 
```

虽然没有找到除数并且`s-k > 2`. 所以在复合的情况下`n`，我们发现

```
divisible n s = not^(s-d) (divisible n d)
              = not^(s-d) (n `mod` d /= 0 && not (...))
              = not^(s-d) False
              = odd (s-d)
              = even s     -- since d is odd, as a divisor of an odd number 
```

在奇素数的情况下`n`，

```
divisible n s = not^(s-2) (divisible n 2)
              = not^(s-2) (even n)
              = not^(s-2) False
              = odd s 
```

因此测量到下一个较小除数或到 2`divisible n s`的距离的奇偶性，以较大者为准。什么时候，起点总是偶数，所以它计算正确，但可能是奇数，在这种情况下，结果被翻转并且复合被声明为素数，反之亦然。`s``n``s``n-1``ceiling (sqrt (fromIntegral (n-1)))`

`divisible`如果您确保第一个调用获得偶数第二个参数（因此如果`ceiling (sqrt (fromIntegral (n-1)))`是奇数，则从 开始），您可以使您的函数用于具有平方根界限的奇数的素数测试`ceiling (sqrt (fromIntegral (n-1))) + 1`，但该函数的逻辑令人困惑，它的名字并不能正确地描述它的结果。

一种更惯用的写法是

```
isPrime n = and [n `mod` k /= 0 | k <- [2 .. ceiling (sqrt $ fromIntegral n)]] 
```

当跳过先前测试中已知为非除数的候选除数时，测试变得更加有效，容易跳过除 2 之外的所有偶数，

```
isPrime 2 = True
isPrime n = all ((/= 0) . (n `mod`)) (2 : [3, 5 .. ceiling (sqrt (fromIntegral n))]) 
```

稍微多一些，但更有效的是跳过 3 的倍数

```
isPrime n = all ((/= 0) . (n `mod`)) (takeWhile (<= bound) (2:3:scanl (+) 5 (cycle [2,4])))
  where
    bound = ceiling (sqrt (fromIntegral (n-1))) 
```

同样，可以从试验除数中消除更多小素数的倍数，每个都获得一点效率，但以更复杂的轮子为代价，例如也消除 5 的倍数导致

```
isPrime n = all ((/= 0) . (n `mod`)) (takeWhile (<= bound) (2:3:5: scanl (+) 7 (cycle [4,2,4,2,4,6,2,6])))
  where
    bound = ceiling (sqrt (fromIntegral (n-1))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T16:51:03.487

这是我的做法：

```
divisibleBy :: (Integral a) => a -> a -> Bool
divisibleBy x y = mod x y == 0

isPrime :: (Integral a) => a -> Bool
isPrime x = or $ map (divisibleBy x) [2..(x-1)] 
```

`divisibleBy`是一个简单的可分性测试。`isPrime`对 1 和 x 之间的所有整数执行此测试，如果`x`可被任何这些整数整除，则返回 true。您可以将上限更改为 root `x`，就像您在代码中所做的那样，但除此之外这是可行的。

# android - LinearLayout：如何在 fill_parent 视图的下方/右侧放置视图？

> ID：11019456
> 
> 赞同：1
> 
> 时间：2012-06-13T16:38:45.570
> 
> 标签：android, android-linearlayout

我想在左边有一个填充空间的 TextView，在右边有一个右对齐的 TextView。我试过摆弄重力、layout_gravity，并让第二个 TextView fill_parent 也一样，但是只要第一个是 fill_parent，第二个 TextView 总是不可见。我注意到如果 LinearLayout 是垂直的，也会出现同样的问题。该怎么办？

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="fill_horizontal"
    android:orientation="horizontal" >
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Left Side"/>
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Right side"
        android:background="#ff606060"/>
</LinearLayout> 
```

目标：Android 2.2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T17:01:34.630

我想这就是你想要的。如果您不希望它换行文本，也可以将 singleLine（和 ellipsize）添加到左视图。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Left Side"
        android:layout_weight="1"
        />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Right side"
        />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:40:31.087

在您的. `layout_weight`_ 因此，在第一个 TextView 上将权重设置为 3，然后在第二个上设置为 1/`layout_width``0dp``TextView`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T16:45:04.237

为什么不使用RelativeLayout？

将右对齐的TextView设置为layout_alignParentRight，然后将填充空间的另一个设置为layout_alignParentLeft和layout_toLeftOf右对齐的TextView

# java - 如何编译 Hive UDF

> ID：11019465
> 
> 赞同：5
> 
> 时间：2012-06-13T16:39:12.837
> 
> 标签：java, classpath, user-defined-functions, hive

我正在尝试编译这个 UDF：

```
package com.dataminelab.hive.udf;
import org.apache.hadoop.hive.ql.exec.UDF;
import org.apache.hadoop.io.Text;
import java.security.*;

/**
 * Calculate md5 of the string
*/
public final class Md5 extends UDF {

    public Text evaluate(final Text s) {
        if (s == null) {
            return null;
        }
        try {
            MessageDigest md = MessageDigest.getInstance("MD5");
            md.update(s.toString().getBytes());
            byte[] md5hash = md.digest();
            StringBuilder builder = new StringBuilder();
            for (byte b : md5hash) {
            builder.append(Integer.toString((b & 0xff) + 0x100, 16).substring(1));
            }
            return new Text(builder.toString());
            } catch (NoSuchAlgorithmException nsae) {
            System.out.println("Cannot find digest algorithm");
            System.exit(1);
        }
        return null;
    }
} 
```

尝试编译：

```
javac Md5.java 
```

但我得到：

```
Md5.java:2: package org.apache.hadoop.hive.ql.exec does not exist
import org.apache.hadoop.hive.ql.exec.UDF;
                                     ^
Md5.java:3: package org.apache.hadoop.io does not exist
import org.apache.hadoop.io.Text; 
```

我假设这些在某处的 jar 文件中，但我不确定 hadoop 将它们安装到哪里，所以我无法将它们添加到我的类路径中。有谁知道默认位置或如何找出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T20:54:48.273

以下对我有用，但我怀疑详细信息会因您的安装和源代码的作用而异：

```
export CLASSPATH=/usr/lib/hive/lib/hive-exec-0.9.0.15.jar:/usr/lib/hadoop/hadoop-core.jar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:01:15.853

您是否在类路径中包含了 $HIVE_HOME/lib/hive-serde-*.jar 和 $HIVE_HOME/lib/hive-exec-*.jar 形式的罐子？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:59:14.200

将 hive-0.4.1 jar 文件添加到 lib

# r - 使用 facet_wrap 固定地块的“数量”

> ID：11019470
> 
> 赞同：7
> 
> 时间：2012-06-13T16:39:28.243
> 
> 标签：r, ggplot2

如果我有一个 data.frame`dat`并想使用以下方法绘制数据组`facet_wrap`：

```
dat <- data.frame(x = runif(150), y = runif(150), z = letters[1:15])

ggplot(dat[dat$z %in% letters[1:9], ], aes(x, y)) +
  geom_point() +
  facet_wrap( ~ z, ncol = 3, nrow = 3) 
```

这看起来很棒并且按预期执行。但是，如果我在新图上绘制下一组`z`：

```
ggplot(dat[dat$z %in% letters[10:15], ], aes(x, y)) +
  geom_point() +
  facet_wrap( ~ z, ncol = 3, nrow = 3) 
```

我不再有 3 行和 3 列。我可以使用来修复绘图的纵横比，`opts(aspect.ratio = 1)`但我仍然让它们的布局与我之前的绘图不同。我希望它看起来好像页面上总是有 9 个图，即使有 6 个或 1 个。这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T20:01:32.993

试试这个，

```
library(ggplot2)
library(plyr)
library(gridExtra)

dat <- data.frame(x=runif(150), y=runif(150), z=letters[1:15])

plotone = function(d) ggplot(d, aes(x, y)) + 
  geom_point() + 
  ggtitle(unique(d$z))

p = plyr::dlply(dat, "z", plotone)
g = gridExtra::marrangeGrob(grobs = p, nrow=3, ncol=3)
ggsave("multipage.pdf", g) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-16T04:42:27.250

`library(cowplot)`提供了一个方便的函数`plot_grid`，我们可以使用它来排列绘图列表。

首先，让我们构建各个图的列表：

```
p = lapply(unique(dat$z), function(i){
      ggplot(dat[dat$z == i, ], aes(x, y)) +
        geom_point() +
        facet_wrap(~z)
        }) 
```

现在我们可以使用 plot_grid 排列面板：

```
plot_grid(plotlist = p[1:9], nrow = 3, ncol = 3) 
```

[![在此处输入图像描述](../Images/62d48627c588215e83296f4d98567218.png)](https://i.stack.imgur.com/8ULdg.png)

```
plot_grid(plotlist = p[10:15], nrow = 3, ncol = 3) 
```

[![在此处输入图像描述](../Images/850cf189b44ea48582aac9cb751100a0.png)](https://i.stack.imgur.com/TyCHU.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-21T12:46:37.940

对于像我这样迟到的人，您可以使用`facet_wrap_paginate`from`ggforce`来继续使用`ggplot2`. 帮助文件说：“此扩展`ggplot2::facet_wrap()`将允许您将多面图拆分为多个页面。” 像下面这样的东西会起作用：

```
library(ggplot2)
library(ggforce)
data("diamonds")
ggplot(diamonds) +
  geom_point(aes(carat, price), alpha = 0.1) +
  facet_wrap_paginate(~clarity, ncol = 2, nrow = 2, page = 2) 
```

用于`page`选择要查看的页面或循环包装以在文档中显示全部内容。

# google-app-engine - 在全文搜索 GAE 上更改 NamespaceManager

> ID：11019473
> 
> 赞同：0
> 
> 时间：2012-06-13T16:39:34.120
> 
> 标签：google-app-engine, full-text-search

我们在 GAE 中有一个应用程序，我们正在重新设计它以使用全文。我们必须索引 GAE 中已经存在的所有数据，并且我们的应用程序也使用命名空间。

我们正在尝试创建一个由没有命名空间的管理员运行的 java 过程。在其他服务中，我们创建了类似的 java 程序，通过代码应用命名空间，因此想法是索引每个命名空间中的所有数据。（我们使用 NamespaceFilter 来控制用户域。）

这是代码的一部分：

```
private static final Index INDEX = SearchServiceFactory.getSearchService()
  .getIndex(IndexSpec.newBuilder().setName("Actividad"));

NamespaceManager.set("userdomain1");
INDEX.add(doc); 
```

设置命名空间被忽略。

这是预期的行为吗？是否有另一种方法来索引每个命名空间中的所有信息？

在数据存储上使用类似的代码可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T20:39:45.977

SearchService 对象绑定到命名空间，因此您需要在调用 SearchServiceFactory.getSearchService() 之前调用 NamespaceManager.set()。或者，调用具有命名空间参数的 getSearchService() 版本。看：

[https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/SearchServiceFactory#getSearchService(java.lang.String](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/SearchServiceFactory#getSearchService(java.lang.String) )

# javascript - Jquery 不允许在文本区域中换行

> ID：11019479
> 
> 赞同：2
> 
> 时间：2012-06-13T16:39:57.547
> 
> 标签：javascript, jquery, forms, textarea, newline

我有一个奇怪的问题。添加对 Jquery 1.7.2 的支持时，我无法在表单中的 textareas 中添加换行符。当我单击，输入时，没有任何反应。

我在jquery中摆弄了源代码，发现如果我注释掉以下代码（在第4845行）

```
for ( var type in Expr.match ) {
    Expr.match[ type ] = new RegExp( Expr.match[ type ].source + (/(?![^\[]*\])(?![^\(]*\))/.source) );
    Expr.leftMatch[ type ] = new RegExp( /(^(?:.|\r|\n)*?)/.source + Expr.match[ type ].source.replace(/\\(\d+)/g, fescape) );
} 
```

添加换行符的能力已恢复。我没有看到其他人有这个问题，所以我猜还有其他事情发生。但是，我的问题是：上面代码的目的是什么（我不是很懂 javascript），删除它会带来任何风险吗？我只想删除代码并恢复 textareas 的换行功能，但不想在不知不觉中破坏网站。我确实注意到，在这样做之后，我在 js 控制台中看到了一个错误：

```
Uncaught TypeError: Cannot call method 'exec' of undefined -- jquery.js:4185 
```

任何帮助将不胜感激！

* * *

这是一些代码示例。的HTML：

```
 <form class="form-input" method="post">
  <fieldset>
    <ol>
      <li>
          <label for="activity_type_id">Activity Type&nbsp;<em>*</em></label>
          <select name="activity_type_id"><option value="17" label="Call">Call</option><option value="23" label="Connectivity Meeting">Connectivity Meeting</option><option value="22" label="Conversation">Conversation</option><option value="16" label="Email (incoming)">Email (incoming)</option><option value="15" label="Email (outgoing)">Email (outgoing)</option><option value="19" label="Implementation Notes">Implementation Notes</option><option value="20" label="Meeting Minutes">Meeting Minutes</option><option value="18" label="Task">Task</option><option value="21" label="Tip / Unusual Attribute">Tip / Unusual Attribute</option></select>      </li>    
      <li>
          <label for="summary">Summary&nbsp;<em>*</em></label>
          <input size="40" maxlength="80" id="summary" name="summary" value=""/>
      </li>   
      <li>
          <label for="details">Details&nbsp;</label>
          <textarea class="wide" name="details" id="details" rows="10" columns="80"></textarea>
      </li>
          </ol>
  </fieldset>
  <input id="submit" name="addactivity" value="Add Activity" type="submit" />
  </form> 
```

以及其他插件中不包含的 javascript：

```
<script>
// Dynamic lookup of C2 companies
$(document).ready(function ()
{
  $(window).keydown(function(event)
  {
    if(event.keyCode == 13) 
    {
      event.preventDefault();
      return false;
    }
  });
  $("#search_input").autocomplete(
  {
    source: function(request,response)
    {
      $("#loading-search").show();
      $("#no-results").hide();
      $.getJSON("/services/json/cust_search.php",request,function(data) 
      {
        response(data);
        $("#loading-search").hide();
        if (data.length == 0)
        {
          $("#no-results").show();
        } else
        {
          $("#no-results").hide();
        }
      });
    },                                              
    minLength: 3,
    select: function(event,ui)
    {
      $("#search_input").hide();
      $("#search_input").val(ui.item.value);
      $("#search_source").val(ui.item.source);
      $("#search-form").submit();
    } 
  });
});
</script> 
<script type="text/javascript">
//---------------------------------------------------------------------------
//  Hide all the submenus on start.  When a non-expanded menu is clicked,
//  expand that menu while collapsing the menu above it.  If a menu is 
//  clicked when its expanded, collapse.
//---------------------------------------------------------------------------
$(function() 
{
//  $("dd:not(:first)").hide();
  $("dd").hide();
  $("#menu-nexmark").slideDown("fast");
  $("dt a").click(function() 
  {
    var curr_dd = $(this).parent().next();
     if (curr_dd.css("display") != "none")
    {
      $("dd:visible").slideUp("medium");
      return;
    }
    $("dd:visible").slideUp("slow");
    curr_dd.slideDown("slow");
    return false;
  });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:03:45.340

问题是这段代码：

```
$(window).keydown(function(event)
  {
    if(event.keyCode == 13) 
    {
      event.preventDefault();
      return false;
    }
  }); 
```

将其设置为仅引用它所影响的 div（我们希望禁用单击输入功能的自动完成搜索菜单），在其他任何地方恢复换行功能：

```
$("#somediv").keydown(function(event)
  {
    if(event.keyCode == 13) 
    {
      event.preventDefault();
      return false;
    }
  }); 
```

# twitter - Twitter API - 如何只接收“地理”结果？

> ID：11019480
> 
> 赞同：1
> 
> 时间：2012-06-13T16:40:15.147
> 
> 标签：twitter

可以修改此查询以仅返回具有重要“地理”值的结果吗？

[http://search.twitter.com/search.json?geocode=38.947,-77.090,39km&result_type=recent&page=1](http://search.twitter.com/search.json?geocode=38.947,-77.090,39km&result_type=recent&page=1)

# vhdl - if elsif vhdl 行为

> ID：11019481
> 
> 赞同：2
> 
> 时间：2012-06-13T16:40:16.463
> 
> 标签：vhdl, xilinx

我正在使用 webPack ISE v 13 使用以下代码对 Nexys 3 板进行编程，并通过在 if elsif 语句中交换语句来注意到完全不同的行为。本质上，我在板上使用了三个按钮：当按下第一个按钮 btn(0) 时，8 个开关的状态存储在一个寄存器中。当我按下 btn(1) 时，开关的状态应显示在 8 个 LED 中，并且 LED 应保持此状态。当我按下 btn(2) 时，我强制点亮所有 LED，如果没有按下 btn 1 或 2，它们应该保持这种状态。通过交换按钮 1 和 2 的 if 和 elsif 下的操作，行为会发生变化：仅当我按下相应的按钮时才会显示开关的状态，一旦松开，所有 LED 都会亮起。

不仅仅是寻找“这是你需要让它工作的东西”，我还在解释为什么 vhdl 的行为与 C++ 如此不同，比如说（在这种情况下，顺序无关紧要）

以下是代码摘录；我指出要评论/取消评论哪些行以获得行为“a”或行为“b”。

### 行为“一”：

*   按下 btn(0) 时，8 个开关的状态会正确加载到 data_reg
*   当我按下 btn(1) 时，LED 全部亮起（“111...11”）
*   如果我按 btn(2)，LED 会显示 data_reg 内容
*   如果未按下任何按钮，则 LED 的状态为最后一次按下按钮所指示的状态

### 行为'b'：

*   按下 btn(0) 时，8 个开关的状态会正确加载到 data_reg
*   当我按下 btn(1) 时，LED 显示 data_reg 内容
*   如果我按 btn(2)，LED 全部亮起（“111...11”）
*   如果未按下任何按钮，则所有 LED 都亮起，查看 data_reg 内容的唯一方法是按住 btn(1)。

`

> 进程（时钟）
> 
> > 开始
> > 
> > > ```
> > > if (clk'event and clk='1') then 
> > > ```
> > > 
> > > > ```
> > > >  if (db_btn(0)='1') then          --load sw state into data_reg
> > > >       data_reg <= sw;
> > > >    end if; 
> > > > ```
> > > > 
> > > > 万一; 结束进程；

```
 process(btn,data_reg)
   begin
     if btn(1)='1' then 
        data_s2f <= "1111111111111111";   --behvr a; comment this line for behvr b
        -- data_s2f <= "00000000" & data_reg; -- uncomment for behvr b; comment for behvr a
     elsif btn(2)='1' then -- read     
       data_s2f <= "00000000" & data_reg; --behvr a; comment this line for behvr b
       --data_s2f <= "1111111111111111";  -- uncomment for behvr b; comment for behvr a
      end if;
   end process;
   -- output
   led <= data_s2f(7 downto 0);  --display data_s2f in LEDs 
```

* * *

## 仿真试验台

这是我的模拟测试台。每当我执行所有信号的结果都是 UUU..UU 任何评论将不胜感激：

```
LIBRARY ieee;
USE ieee.std_logic_1164.ALL;

-- Uncomment the following library declaration if using
-- arithmetic functions with Signed or Unsigned values
--USE ieee.numeric_std.ALL;

ENTITY ifstmt_tb IS
END ifstmt_tb;

ARCHITECTURE behavior OF ifstmt_tb IS 

    -- Component Declaration for the Unit Under Test (UUT)

    COMPONENT ram_ctrl_test
    PORT(
         clk : IN  std_logic;
         reset : IN  std_logic;
        sw : IN  std_logic_vector(7 downto 0);
        btn : IN  std_logic_vector(2 downto 0);
        led : OUT  std_logic_vector(7 downto 0)
        );
    END COMPONENT;

   --Inputs
  signal clk : std_logic := '0';
  signal reset : std_logic := '0';
  signal sw : std_logic_vector(7 downto 0) := (others => '0');
  signal btn : std_logic_vector(2 downto 0) := (others => '0');

    --Outputs
   signal led : std_logic_vector(7 downto 0);

   -- Clock period definitions
   constant clk_period : time := 10 ns;

BEGIN

    -- Instantiate the Unit Under Test (UUT)
   uut: ram_ctrl_test PORT MAP (
          clk => clk,
          reset => reset,
          sw => sw,
          btn => btn,
          led => led
        );

   -- Clock process definitions
   clk_process :process
   begin
        clk <= '0';
        wait for clk_period/2;
        clk <= '1';
        wait for clk_period/2;
   end process;

   -- Stimulus process
   stim_proc: process
   begin        
      -- hold reset state for 100 ns.
        reset <= '1';
        sw <= "11001100";
        btn<= (others => '0');
      wait for 100 ns;  
        reset <= '0';
      wait for clk_period*10;
        -- load register
        btn<= (0=>'1', others => '0');
       wait for clk_period*2;   
        btn<= (others => '0');  
       wait for clk_period*10;  
        -- display with btn 1
        btn<= (1=>'1', others => '0');
       wait for clk_period*5;   
        btn<= (others => '0');  
       wait for clk_period*10;  
        -- display with btn 2
        btn<= (2=>'1', others => '0');
       wait for clk_period*5;   
        btn<= (others => '0');  
       wait for clk_period*10;  
        -- change pattern
        sw <= "11100111";
        wait for clk_period;
        -- load register
        btn<= (0=>'1', others => '0');
       wait for clk_period*2;   
        btn<= (others => '0');  
       wait for clk_period*10;  
        -- display with btn 2
        btn<= (2=>'1', others => '0');
       wait for clk_period*5;   
        btn<= (others => '0');  
       wait for clk_period*10;  
        -- display with btn 1
        btn<= (1=>'1', others => '0');
       wait for clk_period*5;   
        btn<= (others => '0');  

      -- insert stimulus here         

      wait;
   end process;  

END; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T19:55:12.703

VHDL 使用级联顺序执行 if 语句，从而可以驱动各种条件语句的输出。所有的条件都是完全计算的（让我们忽略这一点的传播延迟）。硬件“选择”第一个满足您条件的语句（后续 if elsif 分支的输出驱动较低语句的启用，因此如果一个评估为假，则启用下一个）。

我认为您看到的行为确实看起来“奇怪”，但实际上您期望什么。如果您不提供默认值，您将获得基于硬件的意外结果。您需要进行黑白编程。现在你正在编程灰色。对于程序员的意图，VHDL 的宽容度要低得多。你必须始终是明确的和明确的。

一个可能的答案是，这不是编写此 if 语句的最佳方式。一种更好的方法是创建一个指示“确定”按钮按下的“滴答”信号，该信号驱动一个单独的顺序锁存过程，记录按下的选项。我想您看到的行为取决于硬件，因此难以解释。

这里没有提到的另一点是你应该实现一个开关去抖动器。实际上，当按住并以您不期望的方式操作时，开关可能会切换很多（将其连接到示波器并将其置于边缘模式，您会看到）。您应该在按下开关时计算一段时间（例如 1 毫秒），并且仅在该时间段后打开。关机也是一样。这可能会更好地缓冲您可能拥有的任何弹性。这就是你如何让你的“确定”按钮按下“勾号”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T19:22:41.483

听起来 btn(2) 的硬件抛出的 '1' 比您预期的要多，或者更频繁地获得高信号。看看映射到不同的硬件按钮是否有帮助。确保 btn (2) 设置为上拉模式而不是下拉模式。

至于代码部分，请注意结构是嵌套的 if，因此当 btn(1) 和 btn(2) 都为高时，您会看到行为上的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T09:38:06.413

除了用模拟器检查行为...

*   您确定您的开关已映射到 FPGA 上的正确引脚吗？
*   开关是否接线以便按下它们会产生`1`- 有时它们会浮动到 a`1`并`0`在按下时产生。

# sql - SQL：复制行和降序积分

> ID：11019485
> 
> 赞同：0
> 
> 时间：2012-06-13T16:40:36.823
> 
> 标签：sql, sql-server-2008, tsql

我正在写这个查询，我遇到了一个心理障碍。我一直在自己周围循环，这令人沮丧。

这是表格：

PO_HEADER（IC_PO_HEADER 唯一）

```
IC_PO_HEADER  |  po_number | revision_number
123              p123              0
456              p123              2         
789              p123              48 
```

PO_LINE（IC_LINE_KEY & IC_PO_LINE 唯一）

```
IC_PO_HEADER  | po_number  | line_rev_no  | ic_line_key  |  ic_po_line
123             p123               0        8246321         214578
123             p123               0        8246322         214579
123             p123               0        8246322         214580 
```

每列大约有 150 个表，但这些是唯一真正重要的表，因为这是所有内容都在检查的，我想复制整行以显示如下：

```
IC_PO_HEADER  | po_number  | line_rev_no  | ic_line_key  |  ic_po_line
123             p123               0        8246321         214578
123             p123               0        8246322         214579
123             p123               0        8246323         214580
456             p123               2        8246324         214581
456             p123               2        8246325         214582
456             p123               2        8246326         214583
789             p123               48       8246327         214584
789             p123               48       8246328         214585
789             p123               48       8246329         214586 
```

我打算使用带有选定巢穴的插入物，但我一直在绕圈跑。这是示例数据，在某处大约有 15,000 条记录`PO_HEADER`，目前在 40,000 条记录中`PO_LINE`。

伪代码：

```
If PO_HEADER.ic_po_header does not exist in PO_LINE.ic_po_header AND
PO_HEADER.po_number does exist in PO_LINE.po_number
COPY PO_LINE.* where the above is true AND 
    SET PO_LINE.line_rev_no to PO_HEADER.revision_number (do this until no more PO_HEADER.revision_number's exist that do not meet the criteria)
    AUTONUMBER/INCREMENT PO_LINE.ic_line_key AND PO_LINE.ic_po_line 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:58:17.550

以下将产生您指定的输出。

```
WITH cte 
     AS (SELECT ph.IC_PO_HEADER, 
                ph.PO_NUMBER, 
                ph.revision_number, 
                pl.ic_line_key, 
                pl.ic_po_line, 
                Row_number() 
                  OVER ( 

                    ORDER BY ph.IC_PO_HEADER, IC_LINE_KEY) Rn 
         FROM   PO_HEADER ph 
                INNER JOIN PO_LINE pl 
                        ON ph.po_number = pl.po_number 
         ) 
SELECT t1.IC_PO_HEADER, 
       t1.PO_NUMBER, 
       t1.revision_number, 
       t1.ic_line_key,
       t2.ic_line_key + t1.rn - 1, 
       t2.IC_PO_LINE + t1.rn - 1
FROM   cte t1
       INNER JOIN cte t2 
       ON t2.rn = 1

ORDER  BY IC_PO_HEADER 
```

使用 ROW_NUMBER，您可以生成一个 AUTONUMBER。通过自加入 CTE，我们可以找到 IC_LINE_KEY 和 IC_PO_LINE (t2.rn = 1) 的初始值

[演示](http://sqlfiddle.com/#!3/6983f/18)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:17:57.933

可能是这样的，我没有测试它：

```
SELECT po_header.*
      , 'ic_line_key' = (SELECT max(ic_line_key) FROM PO_LINE) + rank() OVER (ORDER BY newid() ASC)
      , 'ic_po_line' = (SELECT max(ic_po_line) FROM PO_LINE) + rank() OVER (ORDER BY newid() ASC)
FROM
    PO_HEADER
CROSS JOIN
    PO_LINE
WHERE
    po_header.po_number = po_line.po_number
    AND po_header.ic_po_header <> po_line.ic_po_header 
```

# emacs - 腻子 emacs 中的文本放大

> ID：11019488
> 
> 赞同：1
> 
> 时间：2012-06-13T16:40:55.533
> 
> 标签：emacs, emacs23

我目前正在通过 putty 在远程服务器上使用 Emacs 23.1。我希望能够缩小（这样我可以在需要时查看我的所有代码）。我尝试了几种方法，但都没有奏效。

Text-scale-decrease 和 text-scale-increase 没有错误，但不改变文本大小

当我尝试使用它的任何方法时，zoom-frm 插件告诉我“符号的函数定义是无效的：查询字体集”（列出的所有依赖项都已安装）

doremi-frm 插件要么不报错，也不做任何事情，要么抱怨 face-remap（取决于使用的函数）

我现在想知道在腻子中是否可以缩放，如果可以，我该如何让它正常工作。

PS 不能使用 Emacs GUI 打开远程 X11 会话。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:48:49.057

您需要进行配置`putty`。

打开腻子，然后`right click > Change Settings > Window > Fonts`在左侧面板上更改字体大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T17:47:18.510

1.  你用的是什么 Emacs？你说 Emacs 23.1，但它有 `query-fontset'（旧的和更新的 Emacs 版本也是如此，从 GNU Emacs 20 到最新的 GNU Emacs 24 开发版本）。

2.  同样，GNU Emacs 23.1 也有`face-remap' and all of its relatives,`face-remap-*'。

3.  我无法回答腻子问题，但是您能否以其他方式检查远程端的 Emacs 是否使用您描述的任何方法实际缩放正常？IOW，尝试从等式中删除腻子，看看会发生什么。

# .net - 正则表达式：在预定义的标记之间读取

> ID：11019489
> 
> 赞同：0
> 
> 时间：2012-06-13T16:41:03.807
> 
> 标签：.net, regex

我很茫然，我需要一些帮助。

字符串看起来像：

```
"Hello World

@start some text @end

@start more text @end" 
```

我需要一个正则表达式模式，它将匹配从`@start`第一个到第一个`@end`。在此示例中，我们将有两个匹配项 ( `@start (some text) @end`)。@ 标签内的文本可以包含换行符。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:56:58.290

这段代码：

```
string s = "Hello world\n@start text1 @end\n@start text2 @end";
Regex r = new Regex(@"(?<=@start)[\s\S]*?(?=@end)");
var mm = r.Matches(s); 
```

制作了2场比赛。

诀窍是：

*   使用非贪婪匹配（`*?`而不是 just `*`）
*   用于`[\s\S]`匹配*任何*字符，包括换行符
*   使用前瞻/后瞻 ( `(?...)`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:53:48.290

编辑：（得到*？向后。修复它。）

```
(?<=@start).*?(?=@end) 
```

编辑：哎呀，做那个单行

“。” 默认情况下不会匹配换行符，但您可以启用它。如何做到这一点取决于您使用的正则表达式引擎，但通常称为“单行”

编辑：看到您正在使用.NET。试试这个：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;

namespace RegexSandboxCSharp {
  class Program {
    static void Main(string[] args) {

      string l_input = @"Hello World  

@start some text @end  

@start more text @end";

      // This is the relevant piece of code:    
      MatchCollection l_matches = Regex.Matches( l_input, "(?<=@start).*?(?=@end)", RegexOptions.Singleline );

      foreach ( Match l_match in l_matches ) {
        Console.WriteLine( l_match.Value );
      }

      Console.ReadKey( true );

    }
  }
} 
```

# midi - RtMIDI - 在 OSX 下工作，在 Windows 下不接收

> ID：11019494
> 
> 赞同：2
> 
> 时间：2012-06-13T16:41:35.080
> 
> 标签：midi

qt 4.7 下的 RtMIDI；将端口 0 用于 MIDI 输入和 MIDI 输出端口，使用 MIDI 通道 1 进行发送和接收。

这在 OSX 下完美运行。发送和接收，没有任何问题。

它在 Windows 下编译良好（在我的 Mac 上的 VMware Fusion Windows XP VM 中运行），应用程序可以向我的控制界面发送消息，但什么也没有收到……我从来没有收到回调，所以没有 midi 输入。MIDI 输入和输出设备的打开似乎都正常，没有出现错误。

我可以切换回 OSX，运行相同的应用程序（当然是为 OSX 编译的），一切都可以再次运行，而控制界面上没有配置更改。

so : 表面正在连接和打开（在windows下接收MIDI）；但我什么也没得到。

我在这里错过了什么吗？

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T21:09:17.700

在 Windows XP 下，打开输入的设备需要是设备 1（0...1）

*在 Windows 7 启动器下，为输出*打开的设备需要是设备 1（0...1）

在 OSX 下，输入和输出都需要为零。

就是这样。稍后的配置对话框，问题解决了（好吧，至少移交给最终用户。）

RtMidi 是一个不错的包，文档很少，但除此之外，超级棒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-17T19:40:28.120

在 windows 设备 0 下始终是 windows 媒体播放器 midi 合成器，midi 设备从设备 1 开始。如果您读取端口名称然后选择索引值偏移量，则可以按名称选择 midi 端口，这允许在更改端口位置时添加/删除其他设备，以便您的程序选择相同的默认 MIDI 设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T03:27:59.510

与 OSX 不同，Windows 不一定将同一设备的输入和输出端口保持在相同的 ID/端口号。酷吧？

配置对话框确实很有帮助，但如果您知道一个端口，那么您可以搜索相反 IO 方向的端口名称以获取对应的端口。

# iphone - 在 iphone 中使用我自己的颜色更改文本颜色

> ID：11019495
> 
> 赞同：0
> 
> 时间：2012-06-13T16:41:40.963
> 
> 标签：iphone, uilabel

我想用我自己的颜色代码值（#003366）更改我所有的文本颜色。

我知道这件事-

```
myLabel.textColor = [UIColor whiteColor]; 
```

但我想要的不是白色#003366（蓝色）

如何在 iPhone 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:46:53.567

```
//would be pale red
myLabel.textColor = [UIColor colorWithRed:1.0f green:0.8f blue:0.8f alpha:1.0f]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:01:17.237

将此代码定义为宏，

```
#define UIColorFromRGB(rgbValue) [UIColor colorWithRed:((float)((rgbValue & 0xFF0000) >> 16))/255.0 green:((float)((rgbValue & 0xFF00) >> 8))/255.0 blue:((float)(rgbValue & 0xFF))/255.0 alpha:1.0] 
```

接着

```
myLabel.textColor = UIColorFromRGB(0x003366); 
```

# backbone.js - Backbone.Router 错误匹配片段

> ID：11019503
> 
> 赞同：0
> 
> 时间：2012-06-13T16:42:18.630
> 
> 标签：backbone.js, backbone-routing

我有以下内容`routes object`：

```
 routes: {
        "*defaults": "home",
        '#test': 'test'
    } 
```

这是网址选项：

```
myApp.html // home is called as desired 

myApp.html#test // home is called instead of test 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:47:22.927

根据[文档](http://backbonejs.org/#Router)，您不需要路由中的哈希标记（这是骨干路由约定所暗示的）。此外，“*defaults”路由将捕获所有内容，因此您应该将它放在更具体的路由之后。所以，像这样：

```
routes: {
    'test': 'test'
    "*defaults": "home",
} 
```

应该导致*myApp.html#test*被路由到*test*。

# facebook - Facebook 提要图像大小

> ID：11019508
> 
> 赞同：1
> 
> 时间：2012-06-13T16:42:51.247
> 
> 标签：facebook, facebook-graph-api

我正在尝试通过 facebook graph api 在我的墙上发布消息。我设置了一个图片参数（一个外部 url）和一个消息参数。消息本身包含一个链接。但是，当该项目发布到提要时，图像会显示为一个非常小的缩略图，并且旁边有一个指向我的网站的链接（在右侧）。我想做的是让缩略图在帖子上显示为全宽（就像您通过 facebook 本身发布时一样）。我没有在任何地方设置指向我网站的链接，只设置了图片 url 和消息参数 - 那么它来自哪里，有没有办法删除它并使图片出现在消息的正下方，占据整个宽度邮政？

谢谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-09T02:44:07.747

要显示全宽图片，您的图片尺寸必须在`1200x630`高分辨率设备上获得最佳显示。

[Facebook 分享最佳实践](https://developers.facebook.com/docs/sharing/best-practices)

# c - 在 C Socket 中发送和接收两个字符串

> ID：11019511
> 
> 赞同：2
> 
> 时间：2012-06-13T16:43:12.883
> 
> 标签：c, sockets

这是客户端，它提示用户输入字符串并将其发送到服务器

```
//send
printf("\nPlaintext : ");
gets(send_data);
send(sock,send_data,strlen(send_data), 0);

//recv
bytes_recieved = recv(sock, recv_data, 1024, 0);
recv_data[bytes_recieved] = '\0';
printf("\nEnciphered text = %s " , recv_data);
fflush(stdout);
close(sock); 
```

这是服务器端。

```
sin_size = sizeof(struct sockaddr_in);

//accept
connected = accept(sock, (struct sockaddr *)&client_addr,&sin_size);

printf("\n I got a connection from (%s , %d)", inet_ntoa(client_addr.sin_addr), ntohs(client_addr.sin_port));

//recv
bytes_recieved = recv(connected, recv_data, 1024,0);

recv_data[bytes_recieved] = '\0';

printf("\n RECIEVED DATA = %s " , recv_data);

cod = encipher(recv_data, key, 1); //printf("Code: %s\n", cod);
dec = encipher(cod, key, 0); //printf("Back: %s\n", dec);

//send
send(connected, cod, strlen(cod), 0);
send(connected, dec, strlen(dec), 0); 
```

所以问题是，我想从客户端发送两个名为“plaintext”和“key”的字符串。在服务器端，我希望它接收两个字符串并在 encipher() 函数下对其进行处理，然后将其发送回客户端。

如何从客户端发送两个字符串并从服务器接收两个字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:04:47.100

我会先发送字符串，然后让服务器向客户端写回它收到它的确认。然后客户端可以发送密钥，服务器可以做它需要的并将消息返回给客户端。如果您保持套接字连接打开，您可以继续从/到连接的任一端发送和接收信息，`send()`并且`recv()`. 根据字符串的结构，有多种方法。您可以在发送到服务器的数据中使用分隔符来指示字符串的结尾，以便剩下的部分是您的密钥 - 这将允许服务器在一个数据包中接收数据并在一个数据包中回复。我不确定是否有正确的方法来做到这一点-您必须根据应用程序的需要来决定。无论哪种方式，您都应该检查套接字函数的返回值，以检查您正在获取和发送您认为的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:08:46.733

发送一个包含第一个字符串大小的 16 位短字符串，然后是第一个字符串，然后是另一个包含第二个字符串大小的短字符串，然后是第二个字符串。在服务器上，读取一个 16 位 int 然后读取那么多字节，然后对第二个字符串执行相同的操作。

# jquery - 切换菜单时背景变灰

> ID：11019517
> 
> 赞同：2
> 
> 时间：2012-06-13T16:44:00.853
> 
> 标签：jquery, css, mobile, navigation, sass

所以我有一个显示菜单的链接。当该菜单可见（展开）时，我需要背景变暗。所以这就是我正在尝试的。

```
if($('.expanded').html){
  $('nav').css("height", ($(window).height()))
}; 
```

这样当 .expanded 类打开和关闭时，它应该可以工作（当然不是）

这是我的切换：

```
$('.js .menu-button').click(function() {
  $(this).toggleClass('expanded');
  $('[role="navigation"]').slideToggle('fast', function() {});
}); 
```

这是SASS

```
nav
  padding: 0
  margin: 0
  +transparent(#000, .6)
  width: 100% 
```

因此，当切换“扩展”时，css中的透明黑色应该覆盖整个视口

非常感谢您对此的任何帮助。

我也尝试过这样做：

```
$('.js .menu-button').click(function() {
  $(this).toggleClass('expanded');
  $('[role="navigation"]').slideToggle('fast', function() {});
  $('nav').css("height", ($(window).height()))
}); 
```

这会打开深色背景，但我无法将其关闭。

HTML：

```
<div class="menu-button"></div>
  <nav> 
  <ul role="navigation" id="nav">
    <li><a href="#">Home</a></li>
    <li><a href="#">My Stay</a></li>
    <li><a href="#">Hotel Info</a></li>
    <li><a href="#">Buzz</a></li>
    <li><a href="#">Local Info</a></li>
    <li><a href="#">Things to Do</a></li>
    <li><a href="#">Offers</a></li>
    <li><a href="#">Settings</a></li>
    <li><a href="#">Help</a></li>
  </ul>
</nav> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:00:08.603

为什么不简单地在 click() 函数() 中设置深色背景？

```
$('.js .menu-button').click(function() {
  $(this).toggleClass('expanded');
  //test for expanded class
  if ($(this).hasClass('expanded'))
  {
     //turn something dark

  }
  else
  {
     //remove dark
  }

  $('[role="navigation"]').slideToggle('fast', function() {});
  $('nav').css("height", ($(window).height()))
}); 
```

# c++ - 在 QPlainTextEdit 的第 80 列画一条线

> ID：11019519
> 
> 赞同：3
> 
> 时间：2012-06-13T16:44:04.600
> 
> 标签：c++, qt, qt4

我正在编写一个文本编辑器并将 Qt 用于 GUI。我是 Qt 的菜鸟，我很难做到这一点。

我需要在 QPlainTextEdit 的第 80 列中画一条线，但我真的不知道怎么做。我正在使用 QPainter，但我无法正确使用它，有什么帮助吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T19:40:28.070

这就是我的做法。诚然，这并不完全是微不足道的。确定第 80 列位置的输入是：

1.  80 x 浮点平均字符宽度。使用整数值会将舍入误差放大 80 倍。因此使用`QFontMetricsF`.

2.  由于滚动条的偏移量来自`contentOffset()`. 用起来就不好了`horizontalScrollbar()->value()`。后者目前有效，但依赖于特定于实现的细节。QPlainTextEdit 恰好将滚动条值映射到像素——谁知道它明天是否不会改变。它没有记录，因此属于未指定的行为。

3.  `QTextDocument`实现自己的保证金，可通过`documentMargin()`.

`viewport()`另一个陷阱：您必须在派生自的任何类中绘制`QAbstractScrollArea`- 并且`QPlainTextEdit`这样做。如果你不这样做，你`paintEvent`就变成了无操作。它已记录在案，但您必须足够聪明才能真正查看文档。我认为这是 API 的一个糟糕的极端案例，它会做一些意想不到的事情。在其他所有`paintEvent`中，您只需创建`QPainter p`or `QPainter p(this)`，它就可以工作。

注意：这是经过测试的可编译代码。

```
//main.cpp
#include <cmath>
#include <QtWidgets>

class Edit : public QPlainTextEdit
{
public:
    Edit(QWidget * parent = 0) : QPlainTextEdit(parent) {}
protected:
    void paintEvent(QPaintEvent * ev)
    {
        QPlainTextEdit::paintEvent(ev);
        const QRect rect = ev->rect();
        const QFont font = currentCharFormat().font();
        int x80 = round(QFontMetricsF(font).averageCharWidth() * 80.0)
                + contentOffset().x()
                + document()->documentMargin();
        QPainter p(viewport());
        p.setPen(QPen("gray"));
        p.drawLine(x80, rect.top(), x80, rect.bottom());
        qDebug() << x80 << contentOffset() << document()->documentMargin() << font << endl;
    }
};

static QString filler()
{
    QString str;
    for (char c = '0'; c < '9'; ++ c) {
        str.append(QString(10, c));
    }
    return str;
}

int main(int argc, char ** argv)
{
    QApplication app(argc, argv);
    Edit ed;
    QTextCharFormat fmt = ed.currentCharFormat();
    fmt.setFontFamily("courier");
    fmt.setFontFixedPitch(true);
    ed.setCurrentCharFormat(fmt);
    ed.setLineWrapMode(QPlainTextEdit::NoWrap);
    qDebug() << fmt.font() << endl;
    ed.setPlainText(filler());
    ed.show();
    app.exec();
}

#include "main.moc" 
```

# asterisk - Asterisk Web API 计算等待时间

> ID：11019520
> 
> 赞同：1
> 
> 时间：2012-06-13T16:44:09.667
> 
> 标签：asterisk, asp.net-web-api, pbx

我想知道是否有星号的 web api。我还想知道与客户服务代理交谈的平均等待时间是否通过 api 公开。

我在网上看了一圈，但没有得到确切的答案。

任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:27:25.347

AFAIK，不，Asterisk 中没有这样的东西。

确实存在解析[queue_log 文件](http://www.asteriskdocs.org/en/3rd_Edition/asterisk-book-html-chunk/ACD_id289009.html)的能力。您可以得到呼叫开始的时刻，呼叫被座席接听的时刻，然后减去它们 - 这将为您提供等待时间。此外，CONNECT 事件的第一个额外数据值包含等待的时间。

（如果没有心情解析文本文件，可以在数据库中注册队列日志，并使用SQL根据日志生成报告。这其实是我比较喜欢的方式。）

如果您想将此信息提供给其他应用程序，您可以编写自己的应用程序来读取 queue_log 文件/表并提供返回等待时间的 Web 服务。如果您决定这样做，我们可以尝试一些更可靠的答案。

# dozer - 在推土机映射中访问环境变量

> ID：11019521
> 
> 赞同：1
> 
> 时间：2012-06-13T16:44:16.567
> 
> 标签：dozer

我想在推土机映射文件中访问我的环境变量。有办法吗？我查看了官方文档，他们列出了变量的用法。但它们不是环境变量。还有一种方法可以访问推土机映射文件中的 .property 文件值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:46:25.010

最简单的方法是使用类工厂并创建该类的新实例并传入所需的环境变量。请参阅文档。[http://dozer.sourceforge.net/documentation/custombeanfactories.html](http://dozer.sourceforge.net/documentation/custombeanfactories.html)

```
public class EnvironmentSetterBeanFactory implements BeanFactory {

public Object createBean(Object source, Class<?> sourceClass, String targetBeanId) {

try {
    Class<?> targetClass;
    targetClass = Class.forName(targetBeanId);
    Object instance = targetClass.newInstance()
    if (instance instanceof YourClass) {
        YourClass yourClass = (YourClass) idSource;
        yourClass.setThatVar(System.getenv("myenvvar"));            
    }
    return instance;
} catch (InstantiationException e) {
    throw new RuntimeException(e);
} catch (IllegalAccessException e) {
    throw new RuntimeException(e);
}
    }

} catch (ClassNotFoundException e) {
    throw new RuntimeException(e);
} 
```

}

# php - 在 Wordpress 导航菜单中使用标签？

> ID：11019524
> 
> 赞同：0
> 
> 时间：2012-06-13T16:44:28.147
> 
> 标签：php, wordpress, html, wordpress-theming

我在一个单页网站上工作，我正在寻找一个 wordpress 解决方案来创建每个帖子的链接。例如，我想实现这样的目标

```
<ul id="navigation" class="menu1">
    <li><a href="#post-1">...</a></li>
    <li><a href="#post-2">...</a></li>
    <li><a href="#post-3">...</a></li>
    <li><a href="#post-4">...</a></li>
</ul> 
```

到目前为止，我看到的解决方案涉及编辑 .htaccess，否则它们不是永久性的。

我怎样才能在主题级别上实现这样的目标？

这是一个能够实现我想要做的主题：[http ://themes.mdnw.net/?theme=shapeshifter](http://themes.mdnw.net/?theme=shapeshifter)

如果您单击左侧的链接（博客除外），它只会在网站上上下滚动。如何设置这样的导航？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:32:06.010

您可以像这样使用 jQuery：

```
$("#navigation a").click(function(event) {
    event.preventDefault();
    var link_href = $(this).attr('href');
    var post_id = link_href.replace(/[^0-9]/g, '');
    $.scrollTo('#post-' + post_id, 800);
}); 
```

例如，单击导航链接时，会从 href 哈希 #post-432 中提取 POST 编号/ID。并使用[$.scrollTo 插件](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)滚动到具有相同帖子编号/ID 的 div。

这是从一组帖子生成导航菜单的示例代码。

```
<ul id="navigation" class="menu1">
<?php
global $post;
$args = array( 'numberposts' => 5 );
$myposts = get_posts( $args );
foreach( $myposts as $post ) :  setup_postdata($post); ?>
    <li><a href="#post-<?php the_ID(); ?>"><?php the_title(); ?></a></li>
<?php endforeach; ?>
</ul> 
```

您仍然需要查询每个帖子的内容。类似的查询应该可以解决问题并获取`the_content()`

# r - 计算r中的特定数字重复

> ID：11019527
> 
> 赞同：2
> 
> 时间：2012-06-13T16:44:47.133
> 
> 标签：r, function, count, dataframe

这是一个小例子：

```
A <- c(1,1,1,1, 0, 0, 0, 2,2,2)
B <- c(1,1,1,1, 0, 0, 0, 0,2,2)
C <- c(1,1,3,3, 0,0, 2,2,2, NA)
myd <- data.frame (A, B, C) 
```

我需要应用一个函数说“prod”（prod (myd$myvar, na.rm = TRUE)，在应用之前我需要计算 0 的数量。

```
(1) If number zeros are equal to or less than 3, I need to replace with NA
    myd$A[myd$A ==0] <- NA

(2) If  number of zeros are greater than 3, no replacement action need to be done.
   myd$B[myd$B ==0] <- 0 
```

我如何计算零并应用代码来获得结果。

编辑：在上述数据集中，A 和 C 满足条件 1 和 B 条件 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:03:41.897

你在寻找这样的东西吗？

```
f <- function(X) {
    if(sum(X==0, na.rm=TRUE) <= 3) X[X==0] <- NA
    X
}

data.frame(lapply(myd, f))
#     A B  C
# 1   1 1  1
# 2   1 1  1
# 3   1 1  3
# 4   1 1  3
# 5  NA 0 NA
# 6  NA 0 NA
# 7  NA 0  2
# 8   2 0  2
# 9   2 2  2
# 10  2 2 NA 
```

# c# - IIS 中托管的 WCF 服务的生命周期

> ID：11019530
> 
> 赞同：5
> 
> 时间：2012-06-13T16:44:58.623
> 
> 标签：c#, .net, wcf, singleton

问题是关于类中的静态数据。

如果那是一个服务类，那么我认为实例化模式很重要。但是如果我有另一个独立的单例类会发生什么？

我可以在那里创建一个可用于所有每次通话的对象吗？IIS 是否永远在内存中拥有该 dll，以便单例将一直在内存中？

如何使某些对象可用于所有 WCF 客户端调用？是否可以在 IIS 中执行此操作，还是应该在 Windows 服务中托管 WCF 服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:17:51.013

将根据您提供的简短上下文提供一些提示

*   如果您有一个静态类，则只要您有权访问相同的 WCF 代理，该状态就会保持不变。主机（IIS 或 Windows 服务）无关紧要。

*   如果您想跨客户端请求维护“全局静态变量”，为什么不将它们存储在存储库（文件/数据库/等）中？

*   如果您想保留每个客户端请求的状态，您可以尝试查看“Durable WCF services”（[相关线程](https://stackoverflow.com/questions/5313407/is-wcf-durable-services-the-right-choice)）。我之前使用过它 - 所以它确实可以工作，前提是您的场景需要类似会话的行为并且知道性能成本。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:14:24.507

在我的本地 IIS 中检查了问题。

这是我的代码。

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)] 
public class Service : IService
{

    public static int _counter = 0;

    public string GetData()
    {
        _counter++;
        return _counter.ToString();
    }
} 
```

使用默认的 IIS 配置，每个应用程序拉动都会运行一个进程，并且此代码按预期工作。结果在每次服务调用中递增。

这是有道理的，因为`InstanceContextMode`不管理线程。它只控制生命`InstanceContext`周期。

知道我们仍然不能考虑将静态变量用于可变数据作为最佳实践。IIS 可以配置为“Web Garden”。该配置意味着每个应用程序池允许多个工作进程，并且每个进程都将拥有自己的静态变量副本。

[http://www.iis.net/ConfigReference/system.applicationHost/applicationPools](http://www.iis.net/ConfigReference/system.applicationHost/applicationPools)

> 如何使某些对象可用于所有 WCF 客户端调用？是否可以在 IIS 中执行此操作，还是应该在 Windows 服务中托管 WCF 服务？

对象应该存储在持久性存储中，例如数据库或分布式缓存。IIS 仍然是一个很好的服务宿主，它提供了 Windows 服务可以做的一切以及更多。

# excel - 使用 VBA 的 Excel 中的应用程序定义或对象定义错误

> ID：11019537
> 
> 赞同：0
> 
> 时间：2012-06-13T16:45:34.307
> 
> 标签：excel, vba

VBE 指向导致错误的这段代码：

```
Sheets("Topology").Range(Me.Get_Cell_Location).Interior.Color = RGB(255, 255, 255) 
```

整个函数定义如下：

```
Public Function Colour_Me(choice As Integer) As Boolean

If choice = 1 Then

    Debug.Print "Choice 1"

     If Me.Get_Enabled1 = True Or Me.Get_Enabled2 = True Or Me.Get_Enabled3 = True Then
        Sheets("Topology").Range(Me.Get_Cell_Location).Interior.Color = RGB(255, 255, 0)
        Colour_Me = True
     Else
        Sheets("Topology").Range(Me.Get_Cell_Location).Interior.Color = RGB(255, 255, 255)
        Colour_Me = False
     End If

ElseIf choice = 2 Then

      Debug.Print "Choice 2"

     If Me.Get_Enabled1 = True Or Me.Get_Enabled2 = True Or Me.Get_Enabled3 = True Then
        Sheets("Topology").Range(Me.Get_Cell_Location).Interior.Color = RGB(0, 0, 255)
        Colour_Me = True
     Else
        Sheets("Topology").Range(Me.Get_Cell_Location).Interior.Color = RGB(255, 255, 255)
        Colour_Me = False
     End If
End If

End Function 
```

选项 1 中的代码似乎可以正常工作，但选项 2 给我带来了问题。

**更新**

```
Public Property Let Set_Cell_Location(location As String)
    cell_location = location
End Property

Public Property Get Get_Cell_Location()
    Get_Cell_Location = cell_location
End Property 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:04:37.230

我相信您会收到该错误，因为 Excel 无法确定范围。我已经介绍了错误处理并添加了一个 MSGBOX。看看它给你带来了什么价值？

尝试这个

```
Public Function Colour_Me(choice As Integer) As Boolean
    Dim Rng As Range

    On Error GoTo Whoa

    Set Rng = Sheets("Topology").Range(Me.Get_Cell_Location)

    If choice = 1 Then
        Debug.Print "Choice 1"
        If Me.Get_Enabled1 = True Or Me.Get_Enabled2 = True Or _
        Me.Get_Enabled3 = True Then
           Rng.Interior.Color = RGB(255, 255, 0)
           Colour_Me = True
        Else
           Rng.Interior.Color = RGB(255, 255, 255)
           Colour_Me = False
        End If
    ElseIf choice = 2 Then
        Debug.Print "Choice 2"
        If Me.Get_Enabled1 = True Or Me.Get_Enabled2 = True Or _
        Me.Get_Enabled3 = True Then
           Rng.Interior.Color = RGB(0, 0, 255)
           Colour_Me = True
        Else
           Rng.Interior.Color = RGB(255, 255, 255)
           Colour_Me = False
        End If
    End If
    Exit Function
Whoa:
    '~~> I have just put this here for testing
    Msgbox Me.Get_Cell_Location
End Function 
```

# c# - 带有 C# 库的 BigTable

> ID：11019544
> 
> 赞同：0
> 
> 时间：2012-06-13T16:46:20.213
> 
> 标签：c#, linq, google-app-engine, bigtable

是否有任何类型的 LinqToBigTable 库或任何使其与 C# 链接的东西？我希望与 App Engine BigTable 集成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:50:54.770

无法从 AppEngine 应用程序外部与 AppEngine 数据存储区进行直接交互。做不到。

进行此类工作的最佳选择是通过与 JSON 对话的 RESTful 接口公开您的 AppEngine 数据存储。然后，您可以使用[Linq-to-JSON](http://json.codeplex.com/)以您想要的方式处理数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:53:19.977

Google App Engine 唯一支持的语言是 Python 和 Java（加上 Go，实验性的）。见[这里](https://developers.google.com/appengine/kb/general#language)。由于两者都不是 .net 语言，因此您不能将 Linq 与 Google App Engine 一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-18T21:36:13.937

Cloud Bigtable有一个[C# 客户端库](https://cloud.google.com/bigtable/docs/reference/libraries#client-libraries-install-csharp)，但 App Engine 没有。

# ruby-on-rails - 在保存之前重新格式化属性并在需要时返回错误

> ID：11019545
> 
> 赞同：0
> 
> 时间：2012-06-13T16:46:24.393
> 
> 标签：ruby-on-rails, parsing, activerecord, formatting, youtube

我正在 RoR 中制作一个网络应用程序

我有一个带有 YouTube 视频 ID 的模型，因此我可以使用它将视频嵌入网页。

它运作良好，但我想让管理员更轻松地添加视频，而且我已经找到了如何从 YouTube 的 URL 解析视频的 ID，但现在我想在哪里添加它。

我想通知用户他输入了错误的数据，就像验证一样，但是如果我添加一些`parse_video_id`模型方法或添加一个`before_save`钩子，我怎样才能向对象添加一个错误，以便我可以告诉用户呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:50:17.310

您添加错误：

```
errors.add(:attribute, message) 
```

# c++ - 返回班级成员时遇到问题

> ID：11019546
> 
> 赞同：0
> 
> 时间：2012-06-13T16:46:24.300
> 
> 标签：c++, compiler-errors, return, binary-search-tree

我正在制作一个**二进制**搜索树（**简称**BST ），但遇到了一个我无法弄清楚的问题**。**

我将尝试减少代码量，但恐怕仍然需要相当多的时间。

节点：

```
template <typename Type>
class BSTNode {          // Binary Search Tree nodes
    private:
        int key;        // we search by key, no matter what type of data we have
        Type data;
        BSTNode *left;
        BSTNode *right;

    public:

        BSTNode (int, Type); 
        bool add (int, Type);
        Type search (int);
        BSTNode<Type> *remove (int, BSTNode*);   
        BSTNode<Type> *minNode (int);                                                
}; 
```

根：

```
template <typename Type>
class BST {                    // The binary search tree containing nodes
    private:
        BSTNode<Type> *root;   // Has reference to root node

    public:

        BST ();
        bool add (int, Type);
        Type search (int);
        bool remove (int); 
```

};

我不知道要给出多少代码，因为我不想夸大其词，如果您需要更多代码，请说出来。

我都做递归搜索和删除

```
template<typename Type>
BSTNode<Type> *BSTNode<Type>::remove(int removeKey, BSTNode *parent) {

     // Here I try to remove nodes
     // Depending on the number of children a node has, I remove in different ways
     // The error occurs at removing a node with 2 children
     // here I look for smallest node greater than current node, replace current node, delete node I replaced WITH

    if (this->left != NULL && this->right != NULL){

        int *auxKey = &key;

        this = this->right->minNode(auxKey);  // replace

        return this->right->remove(this->key, this); // remove old node
    }
} 
```

这是minNode：

```
template<typename Type>
Type *BSTNode<Type>::minNode (int oldKey) {
    if (this->left == NULL) {
        //oldKey = this->key;
        return this->data;
    } else
        return left->minNode();
} 
```

**这是发生错误的地方：**

```
this = right->minNode(auxKey); 
```

这会导致一系列错误，但我认为主要错误是：

```
error: invalid conversion from 'int*' to 'int' [-fpermissive] 
```

我猜这是我忽略的一些简单的东西，但我就是找不到它，已经尝试了一段时间。

**编辑：**现在决定简单地传递`key`并`minNode()`忽略 oldKey 和 auxKey，修改 minNode 以返回指针。

新错误，同一个地方

```
lvalue required as left operand 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:49:09.557

您的 minNode 函数接受一个表示旧键的 int 值，但您在 remove 函数（特别是 auxKey）中将一个 int* 传递给它。尝试传入旧键的值，而不是指向它的指针。或者，如果您想更新 in 参数以保持正确的值（您似乎正在尝试这样做），请将参数更改为参考参数。

希望这可以帮助！

# visual-studio - 内存泄漏 (_CrtSetReportMode()/_CrtSetDbgFlag())

> ID：11019550
> 
> 赞同：0
> 
> 时间：2012-06-13T16:46:38.690
> 
> 标签：visual-studio, winapi, memory-leaks

在通过 _CrtSetReportMode()/_CrtSetDbgFlag() 函数组合寻找内存泄漏时，是否有机会不转储所有未释放的块，而只转储一些未释放的块？那么要产生紧凑性输出呢？

# erlang - ejabberd作为回合制MMORPG的核心技术是一个不错的选择吗？

> ID：11019551
> 
> 赞同：11
> 
> 时间：2012-06-13T16:46:40.650
> 
> 标签：erlang, ejabberd

我为我的项目考虑技术堆栈，并考虑使用 ejabberd。该项目将看起来像经典的多用户地牢 RPG，玩家将在世界各地从一个位置移动到另一个位置（位置看起来与聊天室完全一样），他们还将在回合制模式下互相对抗以及具有 AI 的生物.

我从未使用过 ejabberd，但我有一些使用 erlang 编写服务器应用程序的经验。

ejabberd 对于这种游戏来说是不是有点过头了？它有很多我永远不需要的功能。然而，它为 erlang 开发人员所熟知，并且非常稳定和成熟。ejabberd 是否值得将它用作我的在线游戏的一种传输层，或者我应该更好地发明自己的轮子，一些小而简单的东西？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T19:00:25.553

我有几年的商业经验，使用 ejabberd 做这样的事情。所以，我的看法：

**优点：**

1.  它在技术上当然是有能力的。
2.  这很容易摸索。
3.  它非常容易扩展和修改。
4.  如果您定期更新它，它将解决两个非常重要的方面。A. 网络安全（这对我来说非常重要）；B.正确完成认证。仅这两个就足以成为使用它的理由。
5.  它出奇的快。
6.  它免费为您提供聊天、状态和好友列表。
7.  它免费为您提供 MUC（房间）。权限之类的所有事情都很好地解决了。

**缺点：**

1.  不要真的期望找到任何可用的文档。来源主要是你唯一的朋友。
2.  不要真的期望找到一个社区。这是一条孤独的路。有一个房间 - ejabberd@conference.jabber.ru 但它非常安静（几乎是空的）。那里的大多数人不是开发人员，而只是 ejabberd 用户。邮件列表稍微好一点，但通常不足以找到您所寻求的答案。
3.  源代码本身并不是 erlang 项目的最佳示例。如果你想学习如何编写大型、模块化、分布式的 erlang 软件，最好看看 Riak 之类的东西。
4.  内部 API 不是很稳定（它们随版本变化很大）。因此，我建议将您的软件编写为一个单独的 erlang 应用程序，并作为外部 XMPP 组件连接到 ejabberd。因此，您将被保证通过稳定的协议 (XMPP) 进行通信。当然，您也无法避免编写一些内部内容。身份验证和名册（朋友列表）模块是首先想到的。这种组合很难维护和更新，特别是如果您需要热代码加载，但它对我来说仍然是最好的解决方案。尝试将“in-ejabberd”代码保持在可行的最低限度。
5.  话虽如此，只有一个（据我所知）可用的 XMPP erlang 库。它被称为 exmpp，由与 ejabberd (ProcessOne) 相同的公司开发。它还没有被认为是稳定的。我已经使用它很长一段时间了，现在没有问题，但你永远不知道。它也大多是无证的（或者，当我学习它时）。

# html - 添加链接以查看带有 HTML 图像的电子邮件

> ID：11019552
> 
> 赞同：0
> 
> 时间：2012-06-13T16:46:48.340
> 
> 标签：html, email

我被要求在 HTML 电子邮件模板中添加一个链接，单击该链接时，会显示电子邮件中所有被阻止的图像。我已经翻遍了，找不到任何关于如何完成的信息。

基本上，会有一个链接：“查看这封带有图片的电子邮件”

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:48:02.043

您需要创建一个显示与电子邮件相同内容的网站，然后创建指向该页面的链接。

它没有什么特别之处。

# wix - WIX 3.6 刻录 SQL Server 卸载失败

> ID：11019553
> 
> 赞同：1
> 
> 时间：2012-06-13T16:46:50.853
> 
> 标签：wix, wix3.6

我正在执行以下代码以静默模式安装 SQL Server 2012。安装成功，但 SQL Server 的卸载并未发生，即使它在安装程序 gui 中显示“卸载成功”。我

我从命令行执行了卸载命令，它正确卸载了 SQL 服务器。

```
<Chain>    
<ExePackage PerMachine="yes"
              Cache="yes"
              SourceFile="SQLEXPR_x64_ENU.exe"
              DisplayName="SQLServerExpress"
              InstallCommand="/Q /IACCEPTSQLSERVERLICENSETERMS /ACTION=install /FEATURES=SQLEngine /INSTANCENAME=MSSQLSERVER /SAPWD=database /SECURITYMODE=SQL /BROWSERSVCSTARTUPTYPE=Automatic"
              RepairCommand="/Q /ACTION=Repair /FEATURES=SQLEngine /INSTANCENAME=MSSQLSERVER /HIDECONSOLE"
              UninstallCommand="/Q /ACTION=Uninstall /FEATURES=SQLEngine /INSTANCENAME=MSSQLSERVER /HIDECONSOLE"
              Description="Installs SQL Server Express 2012 silently"
              Vital="yes" >
    <ExitCode Behavior="success" Value="0"/>        
  </ExePackage>
</Chain> 
```

我需要创建另一个 MSI 并将其添加到上面的链中，这将在安装 SQL Server 2012 后创建一些数据库模式（待完成）。如果我遗漏了什么，请告诉我。

**卸载日志**

```
[0EC4:0328][2012-06-13T11:04:20]: Burn v3.6.3013.0, Windows v6.1 (Build 7601: Service Pack 1), path: C:\Users\Admin\Desktop\DemoBootstrapper.exe, cmdline: '/uninstall /log uninstall.log -burn.unelevated BurnPipe.{EC3D39B1-3C1A-459A-B28A-D802799C0481} {DF47D5D9-E434-45B3-B417-0CFEB8B33682} 2632'
[0EC4:0328][2012-06-13T11:04:20]: Setting string variable 'WixBundleLog' to value 'C:\Users\Admin\Desktop\uninstall.log'
[0EC4:0328][2012-06-13T11:04:20]: Setting string variable 'WixBundleOriginalSource' to value 'C:\Users\Admin\Desktop\DemoBootstrapper.exe'
[0EC4:0328][2012-06-13T11:04:21]: Detect 1 packages
[0EC4:0328][2012-06-13T11:04:21]: Detected package: SQLEXPR_x64_ENU.exe, state: Absent, cached: Complete
[0EC4:0328][2012-06-13T11:04:21]: Detect complete, result: 0x0
[0EC4:0328][2012-06-13T11:04:23]: Plan 1 packages, action: Uninstall
[0EC4:0328][2012-06-13T11:04:23]: Skipping dependency registration on package with no dependency providers: SQLEXPR_x64_ENU.exe
[0EC4:0328][2012-06-13T11:04:23]: Planned package: SQLEXPR_x64_ENU.exe, state: Absent, default requested: Absent, ba requested: Absent, execute: None, rollback: None, cache: No, uncache: Yes, dependency: None
[0EC4:0328][2012-06-13T11:04:23]: Plan complete, result: 0x0
[0EC4:0328][2012-06-13T11:04:23]: Apply begin
[0A48:0FA8][2012-06-13T11:04:23]: Creating a system restore point.
[0A48:0FA8][2012-06-13T11:04:30]: Created a system restore point.
[0A48:0FA8][2012-06-13T11:04:30]: Removing cached package: SQLEXPR_x64_ENU.exe, from path: C:\ProgramData\Package Cache\E4561D5CAA761A5D1DAA0D305F4FECEDC6A0D39C\
[0A48:0FA8][2012-06-13T11:04:30]: Removed bundle dependency provider: {b18c55d0-824f-4d9b-93ed-71907b83ceb0}
[0A48:0FA8][2012-06-13T11:04:30]: Removing cached bundle: {b18c55d0-824f-4d9b-93ed-71907b83ceb0}, from path: C:\ProgramData\Package Cache\{b18c55d0-824f-4d9b-93ed-71907b83ceb0}\
[0EC4:0328][2012-06-13T11:04:30]: Apply complete, result: 0x0, restart: None, ba requested restart:  No
[0EC4:0328][2012-06-13T11:04:32]: Shutting down, exit code: 0x0
[0EC4:0328][2012-06-13T11:04:32]: Variable: WixBundleAction = 3
[0EC4:0328][2012-06-13T11:04:32]: Variable: WixBundleElevated = 1
[0EC4:0328][2012-06-13T11:04:32]: Variable: WixBundleInstalled = 1
[0EC4:0328][2012-06-13T11:04:32]: Variable: WixBundleLog = C:\Users\Admin\Desktop\uninstall.log
[0EC4:0328][2012-06-13T11:04:32]: Variable: WixBundleName = Demo Kit
[0EC4:0328][2012-06-13T11:04:32]: Variable: WixBundleOriginalSource = C:\Users\Admin\Desktop\DemoBootstrapper.exe
[0EC4:0328][2012-06-13T11:04:32]: Variable: WixBundleProviderKey = {b18c55d0-824f-4d9b-93ed-71907b83ceb0}
[0EC4:0328][2012-06-13T11:04:32]: Variable: WixBundleTag = 
[0EC4:0328][2012-06-13T11:04:32]: Variable: WixBundleVersion = 1.0.0.0
[0EC4:0328][2012-06-13T11:04:33]: Exit code: 0x0, restarting: No 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:07:02.200

您需要提供一个 DetectCondition 以便 Burn 可以发现 SQL 已安装；否则，它认为它“不存在”并且不会尝试卸载它。

# c# - 如何使用 xUnit.net 进行单元测试控制台输出？

> ID：11019555
> 
> 赞同：5
> 
> 时间：2012-06-13T16:47:08.033
> 
> 标签：c#, unit-testing, console, xunit.net

我有一个打印类的私有变量的方法。

```
public class Test
{
    private int number;

    public Test(int number)
    {
        this.number = number;
    }

    public void PrintValue()
    {
        Console.WriteLine("Number: " + number);
    }
} 
```

如何创建单元测试以确保它在控制台上打印我期望的值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T17:03:33.493

使控制台输出成为依赖项。由于`Console.WriteLine`会将其输出重定向到[`Console.Out`property](http://msdn.microsoft.com/en-us/library/system.console.out.aspx)，因此您只需要`TextWriter`实例：

```
public Test(TextWriter outputWriter, int number)
{
    this.outputWriter = outputWriter;
    this.number = number;
}

public void PrintValue()
{
    outputWriter.WriteLine("Number: " + number);
} 
```

在实际应用程序中，您将其传递`Console.Out`给打印到系统控制台。在测试中，您只需使用假作家（例如`StringWriter`基于`StringBuilder`）：

```
const int NumberToPrint = 5;
var content = new StringBuilder();
var writer = new StringWriter(content);
var sut = new Test(writer, NumberToPrint);

sut.PrintNumber();

var actualOutput = content.ToString();
Assert.AreEqual(actualOutput, "Number: 5"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-28T14:59:37.023

您可以使用[Console.SetOut](https://docs.microsoft.com/en-us/dotnet/api/system.console.setout?view=net-5.0)来重定向控制台输出并完全按照您的意愿进行操作！

```
 var output = new StringWriter();
 Console.SetOut(output);

 do_something_that_writes_to_console();
 var outputString = output.ToString();
 //check for whatever you need here. 
```

# objective-c - Cocos2d - 如何检查不同层中对象之间的交集

> ID：11019556
> 
> 赞同：1
> 
> 时间：2012-06-13T16:47:11.700
> 
> 标签：objective-c, cocos2d-iphone, collision-detection, linear-algebra

我目前正在为 iPhone 开发 Cocos2d 中的涂鸦跳跃风格游戏，并设置了一个包含两个不同层的场景 - 游戏对象（平台、收藏品等）和玩家（角色，由玩家控制）。

我将它们放在单独的层中，因为我想在玩家跳起来时向下滚动整个游戏对象层——给它一种垂直的、涂鸦跳跃风格的感觉。

问题是玩家和平台之间不会发生交叉，因为它们位于不同的层上。

有谁知道如何解决这个问题？有些人提到了 convertToWorldCoords 但我迷失了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T17:05:20.350

是的先生，convertToWorldCoords！或者，类似的东西——基本上你想了解你的玩家和游戏对象的位置，并且一种方法是将它们全部转换为“世界”坐标。或者，您可以将玩家位置/矩形转换为游戏对象的坐标系。

想通过一些 CGRect 交叉测试来保持简单吗？扩展`CCNode`一个类别：

**CCNode+CoordHelpers.h**

```
#import "CCNode.h"

@interface CCNode (CoordHelpers)
- (CGRect) worldBoundingBox;
@end 
```

**CCNode+CoordHelpers.m**

```
#import "CCNode+CoordHelpers.h"

@implementation CCNode (CoordHelpers)
-(CGRect)worldBoundingBox {
    CGRect rect = CGRectMake(0, 0, contentSize_.width, contentSize_.height);
    return CGRectApplyAffineTransform(rect, [self nodeToWorldTransform]);
}
@end 
```

然后，对于超级简单的 CGRect 碰撞测试：

```
if(CGRectIntersectsRect([playerObj worldBoundingBox], [otherObj worldBoundingBox])    
{/*...do stuff...*/} 
```

确保`#import "CCNode+CoordHelpers.h"`在需要使用此方法的任何地方！

# c - 在 C 中的函数中创建一个数组

> ID：11019557
> 
> 赞同：-1
> 
> 时间：2012-06-13T16:47:15.427
> 
> 标签：c, arrays

为什么不能在 C 中的函数中创建一个类似于我下面的数组？

```
int **image;
int height, weight;//initialized in a method not shown

void generateMatrices()
{
    image = (int **)malloc(sizeof(int*) * height);
    if(image == NULL)
    {
        fprintf(stderr, "Image matrix could not be made\n");
        exit(-1);
    }
    int y;
    for(y = 0; y < height; y++)
    {
        image[y] = (int *)malloc(sizeof(int) * width);
        if(image[y] == NULL)
        {
            fprintf(stderr, "Image matrix row %d could not be made\n", y);
            exit(-1);
        }
    }
}

int main(int argc, char* argv[])
{
    generateMatrices();
    image[height-2][width-2] = 90;//Fails here
    return 0;
} 
```

首先，我想为提出这个不清楚的问题道歉。澄清一下，我确实知道如何制作这些矩阵，事实上，它确实有效。但是，所有这些代码最初都在我的主要语句中，我想通过将其放入各种方法来重构我的代码。其中一种方法名为 generateMatrices()。出于某种原因，即使矩阵被认为是全局的，并且即使它们存在于方法中，当我尝试从该方法外部访问它们时，例如在主要之后立即访问它们时，我得到一个段错误。

另一个编辑以进一步澄清代码。

事实证明，这段代码确实有效，而且我显然是在初始化`height`并且`width` *在*我调用了这个方法之后。浪费大家的时间是我的坏事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:00:48.247

您发布的代码有效，但请注意它不会创建矩阵。如果你想创建一个矩阵，这个任务就更复杂了。

有两种简单的方法可以做到这一点，其中一种比另一种简单得多。

**场景 1：其中一个界限在编译时是固定的。**

这使您的代码非常简单，请考虑以下几点：

```
int (*image)[height] = NULL;
int width;

void generateMatrices()
{
    free(image); // in case it's already been allocated
    image = malloc(sizeof(image) * width); // you are done, you can now access the matrix
} 
```

**场景 2：多弹性边界**

```
int **image = NULL;
int width, height;

void generateMatrices()
{
    if (image)
    {
        free(*image); // in case it has already been allocated
        free(image);
    }

    image = malloc(sizeof(int *) * width);
    image[0] = malloc(sizeof(int) * width * height);
    for (int i = 1; i < width; i++)
        image[i] = (image[0] + (i * height));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:04:27.890

我怀疑你可能想要一个二维数组——而你只是在这里分配一个双指针的一维数组。

1) 生成一个指向指针的数组`(int**)`；这有点像二维数组中的“标题”。2）第一个数组中的每个元素都指向另一个指针——第二个指针是一个一维数组，您可以将其视为二维数组或矩阵中的单行。因此，您循环遍历第一个数组`(int**)`，然后执行另一个 malloc 为行 [(int*)'s] 创建一个数组，该数组是您想要的多列宽。

需要意识到的重要一点是，每个数组都可以被视为指向第一个元素的指针，并与第一个元素的偏移量相结合，并且指针可以指向其他指针。因此，您有一个指向行的指针数组，而每一行又是一个指针+偏移量（在您可能期望的传统数组意义上）。

试试这里的代码片段：http: [//pleasemakeanote.blogspot.com/2008/06/2d-arrays-in-c-using-malloc.html](http://pleasemakeanote.blogspot.com/2008/06/2d-arrays-in-c-using-malloc.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T16:54:47.807

如果您从指向 [whatever] 的指针的指针开始，您可能不是在创建矩阵——您正在创建（实际上是分配）一个指针数组。然后（为了能够用它做任何事情）你必须为每个指向的指针分配一些空间。

```
int generateMatrices(int rows, int columns) {
    image = malloc(sizeof(int *) * rows;
    if (image == NULL)
        return 0;
    for (int i=0; i<rows; i++) {
        image[i] = malloc(sizeof(int) * columns);
        if (image[i] == NULL)
            return 0;
   }
   return 1;
} 
```

您还需要提供一个`destroyMatrices`（或任何您喜欢的名称），它在反向上基本相同 - 遍历行，释放每一行，然后释放指针数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T04:42:48.783

编辑后，二维分配似乎没问题。`height`和的值`width` *可能*出错了。[我在这里](http://ideone.com/Wlqel)试过你的例子，它适用于正确的值`height`和`width`

# c# - 如何正确表示空白字符

> ID：11019561
> 
> 赞同：28
> 
> 时间：2012-06-13T16:47:33.877
> 
> 标签：c#

我想知道如何在 C# 中表示空白字符。我找到了空字符串表示`string.Empty`。有没有类似的东西代表一个空白字符？

我想做这样的事情：

```
test.ToLower().Split(string.Whitespace)
//test.ToLower().Split(Char.Whitespace) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-13T16:49:07.613

*哪个*空白字符？空字符串非常明确 - 它是 0 个字符的序列。但是，`" "`和`"\t"`都是`"\n"`包含单个字符的字符串，该字符被表征为空格。

如果您只是指空格，请使用空格。如果您指的是其他空白字符，则很可能有一个自定义转义序列（例如`"\t"`制表符），或者您可以使用 Unicode 转义序列 ( `"\uxxxx"`)。我不鼓励您在源代码中包含非 ASCII 字符，尤其是空白字符。

编辑：既然你已经解释了你想要做什么（这应该是你的问题开始），你最好使用代表空格[`Regex.Split`](http://msdn.microsoft.com/en-us/library/ze12yx1d.aspx)的正则表达式：`\s`

```
Regex regex = new Regex(@"\s");
string[] bits = regex.Split(text.ToLower()); 
```

有关其他字符类的更多信息，请参阅[Regex Character Classes](http://msdn.microsoft.com/en-us/library/20bw873z)文档。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-13T16:49:01.880

不，没有这样的常数。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-03-05T01:17:53.307

WhiteSpace CHAR 可以在[此处使用 ASCII 代码引用。](https://www.dotnetperls.com/ascii-table) 并且 Character# 32 代表一个空格，因此：

```
char space = (char)32; 
```

例如，您可以使用这种方法在您想要的任何地方生成所需数量的空白：

```
int _length = {desired number of white spaces}
string.Empty.PadRight(_length, (char)32)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-05-19T22:37:28.473

所以我遇到了同样的问题，所以我所做的是创建一个带有空格的字符串，然后只索引字符。

```
String string = "Hello Morning Good Night";

char empty =  string.charAt(5); 
```

现在，每当我需要一个空字符时，我都会从内存中的引用中提取它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T16:49:13.660

哪个空白字符？最常见的是普通空格，它位于我句子中的每个单词之间。这只是`" "`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T16:54:47.127

使用正则表达式，您可以用元字符“\s”表示任何空白字符

[MSDN 参考](http://msdn.microsoft.com/en-us/library/ms972966.aspx#regexnet_topic8 "MSDN 参考")

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-02T23:40:45.097

您始终可以使用 Unicode 字符，对我个人而言，这是最明确的解决方案：

```
var space = "\u0020" 
```

# android - Android 3.0 上的 HLS（http 直播）和寻求

> ID：11019564
> 
> 赞同：25
> 
> 时间：2012-06-13T16:47:40.697
> 
> 标签：android, android-3.0-honeycomb, http-live-streaming

我们有一个提供程序，它为我们提供了用于 HLS 流的 m3u8 文件（最初旨在用于 iOS 应用程序）。

Android 3.0+ 支持 http 直播 (http://developer.android.com/guide/appendix/media-formats.html) - 实际上我们可以在 Android 3.0+ 上使用标准 VideoView 播放这些 m3u8 文件。

编辑：Android 似乎将此视为“实时”视频源，并禁用了寻找或计算视频持续时间的能力。（在 iOS 中，您可以毫无问题地在流中搜索）

有没有办法强制 android 3.0+ 在这些文件中寻找？

以下是供其他人测试的示例活动：

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.MediaController;
import android.widget.VideoView;

public class SandboxActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        VideoView vw = (VideoView) findViewById(R.id.videoView);
      vw.setVideoPath("http://devimages.apple.com/iphone/samples/bipbop/gear4/prog_index.m3u8"); 
        vw.setMediaController(new MediaController(this));
        vw.requestFocus();
        vw.start();
    }
} 
```

和示例布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center" android:id="@+id/root">

    <VideoView
        android:id="@+id/videoView"
        android:layout_width="wrap_content"
        android:layout_height="match_parent" />
</RelativeLayout> 
```

这是使用 Apple 的示例 HLS 链接。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T23:10:35.350

看看这个（你也提到过）[页面](http://developer.android.com/guide/appendix/media-formats.html)

它说：

> *   协议版本 3（Android 4.0 及以上）
> *   协议版本 2 (Android 3.x)

在这里您可以查看[HLS 的草稿](https://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-02)。您可以在页面顶部选择一个版本。

在草案 3 中首次提到了寻求（与草案 2 Android 3.x 相比）

> 日期和时间的值提供了媒体时间线到适当挂钟时间的信息映射，可用作**搜索的基础**

只想确认一下。我没有通读整个草稿。但是，我的猜测是Android在Android 3.0中实现了相当早的草案并且他们可能已经部分实现了它，这足以玩，但还不够寻求。

我不认为你有一个简单的解决方法，除了在第 3 方 HLS 客户端中引入（如 vipw 所建议的）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T16:01:50.203

对不起，伙计们，你正试图从石头上取血。Android 3.0 支持的 HLS 子集非常有限，为了支持在实时流中搜索，您将需要比 Google 提供的更好的 HLS 客户端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T09:34:32.603

我不确定，但由于 VideoView 不支持寻找您的案例，您可以尝试一些不同的选项，例如：[http](http://wiki.videolan.org/AndroidCompile) ://wiki.videolan.org/AndroidCompile （易于编译）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T19:14:32.760

与此有些相关 - 似乎有一个错误会阻止实时 HLS 提要从他们应该的实时点开始。我想这可能是由于这种寻求限制。当您在 Android 上启动实时 HLS 提要（没有 EXT-X-ENDLIST 标记）时，核心 HLS 解析组件中存在一个错误，无法在实时点（提要结尾）开始，而是从流的开头开始。

在 code.google.com 上提交了一个关于此的错误 - 您可以在那里“加星”或投票：

[http://code.google.com/p/android/issues/detail?id=37156](http://code.google.com/p/android/issues/detail?id=37156)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-04T18:20:48.397

我的猜测是您描述的搜索行为是使用仅 iframe 播放列表 (#EXT-XI-FRAMES-ONLY) 实现的，这需要至少支持 Pantos 规范第 4 版的客户端。

# java - 试图将 JSON 数据发布到 Spring 控制器.. 根本不工作

> ID：11019565
> 
> 赞同：1
> 
> 时间：2012-06-13T16:47:41.587
> 
> 标签：java, ajax, json, spring, spring-mvc

试图将 JSON 数据发布到 Spring 控制器.. 根本不工作

JSP 代码：

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>This is a project to show how to use RESTful</title>
</head>
<body>
<script type="text/javascript">var contexPath = "<%=request.getContextPath()%>";</script>
<script src="<%=request.getContextPath()%>/js/jquery.js"></script>

<script type="text/javascript">
function doAjaxPost() {  

    alert("doAjaxPost Called");

     var queryString = $('#htmlform').serialize();

       $.ajax({
            contentType : "application/json",
            dataType : 'json',
            type : "PUT",
            url : contexPath + "/service/employee",
            data : queryString, //json serialization (like array.serializeArray() etc)

            success : function(data) {
                alert("Thanks for submitting.  \n\n" + response.result);
               // response
            },
            error : function(request, status, error) {
                   alert('Error: ' + e); 
            }
        });
    }  
</script>

<H1>Add Employee</H1>

<p>
<form name="htmlform">
<table border=1>
    <thead><tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
    </tr></thead>

    <tr>
        <td><input  type="text" name="ID" maxlength="5" size="3"></td>
        <td><input  type="text" name="Name" maxlength="10" size="10"></td>
        <td><input  type="text" name="Email" maxlength="10" size="10"></td>
    </tr>

</table>
<input type="button" value="Save Employee" onclick="doAjaxPost();" />
<p>
<p>
</form>
[<a href="http://localhost:8080/RESTful/service/employees">List all Employees</a> | <a href="add.jsp">Employee Form Test</a>]

</body>
</html> 
```

控制器代码：

```
@RequestMapping(headers ={"Accept=application/json"}, method=RequestMethod.PUT, value="/employee" )
    public ModelAndView updateEmployee(@RequestBody Employee employee ) {
        System.out.println("in put body:");
        System.out.println("HELLO WORD" + employee.toString());

        return new ModelAndView(XML_VIEW_NAME, "object", employee);
    } 
```

现在对于输出或错误：

```
2012-06-13 12:46:52,571 [http-8080-2] DEBUG org.springframework.web.servlet.DispatcherServlet - DispatcherServlet with name 'rest' processing PUT request for [/RESTful/service/employee]
2012-06-13 12:46:52,576 [http-8080-2] DEBUG org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapping [/employee] to HandlerExecutionChain with handler [dw.spring3.rest.controller.EmployeeController@7ba6eeab] and 1 interceptor
2012-06-13 12:46:52,604 [http-8080-2] DEBUG org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerExceptionResolver - Resolving exception from handler [dw.spring3.rest.controller.EmployeeController@7ba6eeab]: org.springframework.web.HttpMediaTypeNotSupportedException: Content type 'application/json;charset=UTF-8' not supported
2012-06-13 12:46:52,606 [http-8080-2] DEBUG org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver - Resolving exception from handler [dw.spring3.rest.controller.EmployeeController@7ba6eeab]: org.springframework.web.HttpMediaTypeNotSupportedException: Content type 'application/json;charset=UTF-8' not supported
2012-06-13 12:46:52,606 [http-8080-2] DEBUG org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver - Resolving exception from handler [dw.spring3.rest.controller.EmployeeController@7ba6eeab]: org.springframework.web.HttpMediaTypeNotSupportedException: Content type 'application/json;charset=UTF-8' not supported
2012-06-13 12:46:52,607 [http-8080-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'rest': assuming HandlerAdapter completed request handling
2012-06-13 12:46:52,607 [http-8080-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Successfully completed request 
```

让我们看看是否有人可以让这个工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:00:55.173

试着取下

```
headers ={"Accept=application/json"}, 
```

部分，我没有把它放在我的控制器中，它们工作正常。

# java - 在Java中将XML转换为二进制

> ID：11019569
> 
> 赞同：0
> 
> 时间：2012-06-13T16:48:30.373
> 
> 标签：java

我想将 XML 转换为 Java 中的二进制数据？最快和最简单的方法是什么？

有没有我可以使用的内部 Java 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:05:43.283

如果您只想压缩 xml，那么您可以阅读它并使用 GZIPOutputStream 或 ZipOutputstream，如此处[所述](https://stackoverflow.com/questions/3649485/how-to-compress-a-string)。

# iphone - UIImage 截图失去了它的质量

> ID：11019570
> 
> 赞同：3
> 
> 时间：2012-06-13T16:48:33.673
> 
> 标签：iphone, objective-c, ios, xcode, uiimage

我正在合并两个图像，然后通过应用以下代码截取屏幕截图：

```
UIGraphicsBeginImageContext(size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
img_AddText=viewImage;

[dragView removeFromSuperview];
imgV_SelectedImg.image=nil;
imgV_SelectedImg.image=img_AddText;
UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil); 
```

问题是当最终图像失去其质量时，它会变得模糊。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T18:04:15.980

尝试使用 UIGraphicsBeginImageContext 的 withOptions 版本

```
UIGraphicsBeginImageContextWithOptions(size, NO, 0.0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-19T10:30:46.767

我得到了高质量和特定屏幕位置的快照。通过这段代码。

```
-(UIImage *)takeScreenShot
{
    CGRect grabRect;
    grabRect = CGRectMake(0,70,320,260);
    UIGraphicsBeginImageContextWithOptions(grabRect.size, self.view.opaque, 0.0);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextTranslateCTM(ctx, -grabRect.origin.x, -grabRect.origin.y);
    [self.view.layer renderInContext:ctx];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return viewImage;
} 
```

它给了我很好的快照..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T06:45:41.660

UIGraphicsBeginImageContextWithOptions（大小，否，2.0）；这通过将规模从 1.0 增加到 2.0 来解决我的问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T20:13:40.927

我在课堂上做了一个类别`UIImage`，可能会对你有所帮助。它是这样的：

```
+ (UIImage*)imageWithView:(UIView *)view opaque:(BOOL)opaque bgColor:(UIColor*)bgColor{
    UIGraphicsBeginImageContextWithOptions(view.bounds.size, opaque, [[UIScreen mainScreen] scale]);

    if(!opaque){
        [bgColor set];
    }
    [view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage * img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;
} 
```

这对我来说可以。未检测到模糊。尝试使用它。如果您仍然拥有它，那么问题很可能出在您的保存代码中......

干杯... :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T17:57:46.763

您是否提供了用于视网膜显示的图像？你应该检查一下。您可能正在模拟器中运行（在视网膜中）。

# windows - 如何使用 UAC 提升 Perl 进程

> ID：11019571
> 
> 赞同：4
> 
> 时间：2012-06-13T16:48:47.317
> 
> 标签：windows, perl, uac, elevation

假设我有一个脚本需要从普通用户不允许阅读的地方（例如其他用户的文件夹）读取信息。

目前我所能做的就是抱怨没有以“超级用户”身份运行并退出，但我更希望脚本本身要求提升。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:09:32.330

根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx)和[PerlMonks](http://www.perlmonks.org/?node_id=935549)，您可以尝试：

```
Win32::FileOp::ShellExecute( runas => 'yourprogram.exe' ) 
```

或者

```
Win32::FileOp::ShellExecute( runasuser => 'yourprogram.exe' ) 
```

这些应该（未经测试）在需要时要求您提高高度。（仅适用于 Windows 7）。

相关：[在运行时请求管理员权限](https://stackoverflow.com/questions/3405319/how-do-i-request-admin-privs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-25T15:18:23.853

厌倦了在自己的工作中没有很好的答案，我写了[Win32::RunAsAdmin](https://metacpan.org/pod/Win32%3a%3aRunAsAdmin)。它所做的只是通过 OLE 调用 Windows Shell，并使用“runas”作为动词，但它很方便地对其进行了打包，因此您所要做的就是在代码的开头粘贴以下内容：

```
use Win32::RunAsAdmin qw(force); 
```

在导入步骤中，它将检查提升的权限，如果您已经在提升模式下运行，它会静默返回。否则，它将以提升模式重新启动脚本，并弹出 UAC。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T17:12:39.460

如果您可以通过快捷方式启动，则可以使用以下命令：

1.  创建 perl.exe 的快捷方式
2.  编辑快捷方式。

    1.  在快捷方式选项卡上，将“目标”更改为

        "c:...\bin\perl.exe" "c:...\script.pl"

    2.  [可选] 在快捷方式选项卡上，将“开始于”更改为脚本所在目录的路径。

    3.  在快捷方式选项卡上，单击“高级”，然后选中“以管理员身份运行”。

有一个名为“ `runas`”的工具，但如果不询问管理员密码，我似乎无法让它工作。

# c# - X 的每个可能组合都分成 N 个堆栈

> ID：11019574
> 
> 赞同：8
> 
> 时间：2012-06-13T16:48:58.050
> 
> 标签：c#, algorithm, math, combinatorics

我确信这个问题有一个正式的名称，知道这个名称可能会帮助我找到解决方案，但我不知道，并且为谷歌问题的措辞一直指向我的[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)，这是不一样的事物。

我想取一些值 X 并找到将该值拆分为 N 个整数堆栈的所有可能组合。

如果我的措辞令人困惑，这里是 X = 4, N = 3 的示例

```
Stack -> 1 | 2 | 3 |
----------------------
#1-----> 4 | 0 | 0 |
----------------------
#2-----> 3 | 1 | 0 |
----------------------
#3-----> 2 | 1 | 1 |
----------------------
#4-----> 2 | 2 | 0 | 
```

重复是可以接受的，因为它很容易删除，但理想情况下它不会被计算。解决问题的算法将是完美的，但即使找出问题的名称也会使研究更容易。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T17:42:33.987

这些实际上是[整数分区](http://mathworld.wolfram.com/Partition.html)作为删除答案的备注。使用[*数学*](http://www.wolfram.com/mathematica/)：

```
IntegerPartitions[4, 3] // PadRight //Grid 
```

输出：

```
4   0   0
3   1   0
2   2   0
2   1   1 
```

* * *

我找不到 C# 实现，但这里有几个相关的问题：

[用于整数分区的优雅 Python 代码](https://stackoverflow.com/q/10035752/618728)

[Java中的整数分区](https://stackoverflow.com/q/7515430/618728)

[生成整数分区的算法](https://math.stackexchange.com/q/18659/9909)

* * *

谷歌点击：

[Jerome Kelleher 的整数分区算法](http://homepages.ed.ac.uk/jkellehe/partitions.php)

[Daniel Scocco 的整数分区算法](http://www.programminglogic.com/integer-partition-algorithm/)

[生成整数分区的快速算法](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.42.1287&rep=rep1&type=pdf)(PDF)（看起来很繁重）

[Stony Brook 算法存储库 - 分区](http://www.cs.sunysb.edu/~algorith/files/generating-partitions.shtml)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:37:23.613

这似乎可以解决问题：

```
vector<vector<int> > partitions(int X, int N, int Y)
{
    vector<vector<int> > v;
    if(X<=1 || N==1)
    {
        if(X<=Y)
        {
            v.resize(1);
            v[0].push_back(X);
        }
        return v;
    }
    for(int y=min(X, Y); y>=1; y--)
    {
        vector<vector<int> > w = partitions(X-y, N-1, y);
        for(int i=0; i<w.size(); i++)
        {
          w[i].push_back(y);
          v.push_back(w[i]);
        }
    }
    return v;

   }

int main()
{
    vector<vector<int> > v = partitions(5, 3, 5);
    int i;
    for(i=0; i<v.size(); i++)
    {
        int x;
        for(x=0; x<v[i].size(); x++)
            printf("%d ", v[i][x]);
        printf("\n");
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T18:02:35.400

这是 user434507 在 C# 中的答案：

```
class Program
{
    static void Main(string[] args)
    {
        var v = Partitions(5, 3, 5);

        for (int i = 0; i < v.Count; i++)
        {
            for (int x = 0; x < v[i].Count; x++)
                Console.Write(v[i][x] + " "); 
            Console.WriteLine();
        }
    }

    static private List<List<int>> Partitions(int total, int stacks, int max)
    {
        List<List<int>> partitions = new List<List<int>>();

        if (total <= 1 || stacks == 1)
        {
            if (total <= max)
            {
                partitions.Add(new List<int>());
                partitions[0].Add(total);
            }

            return partitions;
        }
        for (int y = Math.Min(total, max); y >= 1; y--)
        {
            var w = Partitions(total - y, stacks - 1, y);
            for (int i = 0; i < w.Count; i++)
            {
                w[i].Add(y);
                partitions.Add(w[i]);
            }
        }

        return partitions;
    }
} 
```

# facebook - Selenium Perl munti 弹出窗口

> ID：11019575
> 
> 赞同：0
> 
> 时间：2012-06-13T16:48:59.307
> 
> 标签：facebook, selenium

我在使用弹出窗口时遇到 selenium perl 问题

问题：这是一个 Facebook 问题，当您单击 Facebook 连接或单击事件完成时显示的任何弹出窗口时，任何人都有问题定位 Facebook 弹出窗口

我试过`select_window_ok`，，结合它们`get_all_window_ids`，`get_all_window_names`但没有运气

请使用 Perl 代码而不是 Javascript 代码。

* * *

```
use strict;
use warnings;
use Time::HiRes qw(sleep);
use Test::WWW::Selenium;
use Test::More "no_plan";
use Test::Exception;

my $sel = Test::WWW::Selenium->new( host => "localhost", 
                                    port => 4444, 
                                    browser => "*chrome", 
                                    browser_url => "http://www.electrotank.com/" );

$sel->open_ok("/docs/es5/live-examples/FacebookConnect/");
$sel->click_ok("//a[\@class='fb_button fb_button_medium']/span");
sleep 10;
$sel->wait_for_pop_up_ok("", "30000",'Log in | Facebook');
$sel->select_pop_up("null");
$sel->type_ok("email", "email\@email.com",'User enters Facebook credentials - Username');
$sel->type_ok("pass", "password",'User enters Facebook credentials - Password');
$sel->click_ok("name=login");
$sel->select_window("null"); 
```

这是我在 IE9 Win7 中尝试的代码，它无法正常工作，无法检测到弹出窗口，当我在 FireFox 中运行它时，它工作正常

谢谢你

我已经更新了代码，所以任何人都可以尝试调试代码为什么它在 IE9 中不起作用

2012 年 6 月 18 日编辑

# php - 有没有办法知道一行是否更新？

> ID：11019578
> 
> 赞同：2
> 
> 时间：2012-06-13T16:49:04.783
> 
> 标签：php, mysql

我需要像这样进行更新的查询：

```
"UPDATE users SET email_code='1' WHERE id=".$id." AND email_code='".$email_code."'"; 
```

如果该行已更新，则设置`$_SESSION['verified']=1`

所以我必须知道该行是否已更新。

有办法知道吗？或者我必须先进行一个 SELECT 查询才能知道该行是否存在？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T16:51:43.937

您可以使用`mysqli_affected_rows`来查看执行查询后是否更改了任何行。

```
if(mysqli_affected_rows($link) > 0){
    // do session stuff
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:51:17.307

您可以在 MySQL 中为 users 表设置一个触发器，并让 MySQL 运行一个脚本来设置一些可以访问该会话的变量。但这会给后部带来不必要的巨大痛苦。

我会在必要的页面上创建一个 AJAX 心跳来检查该行是否存在，然后更新您需要的会话。这样更干净。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T16:53:20.520

在`mysql_`和`mysqli_`函数族中有[`mysqli_affected_rows`](http://www.php.net/manual/en/mysqli.affected-rows.php)和[`mysql_affected_rows`](http://www.php.net/manual/en/function.mysql-affected-rows.php)。我对 PDO 不是很熟悉，但肯定有类似的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T17:12:23.390

您还可以检查查询返回 true 还是 false 并相应地设置 $_SESSION['verified'] 。[http://php.net/manual/en/function.mysql-query.php](http://www.php.net/manual/en/mysqli.query.php)

[http://www.php.net/manual/en/mysqli.query.php](http://www.php.net/manual/en/mysqli.query.php)

# php - 使一个php页面加载另一个php脚本服务器到服务器通信

> ID：11019582
> 
> 赞同：0
> 
> 时间：2012-06-13T16:49:17.177
> 
> 标签：php, communication

几天来，我一直在尝试寻找解决此问题的方法，但我感到很困惑。

目标：

> 当用户访问服务器 A 时，让 PHP 服务器（“服务器 A”）直接与另一个 PHP 服务器（“服务器 B”）通信。然后它向服务器 B 发送一个查询字符串以添加到服务器 B 的数据库中。

全文：

> 访问者将访问服务器 A 并注册到他们的网站，作为其注册的一部分，服务器 A 将使用所有访问者信息写入服务器 A 的数据库。此时我希望服务器 A 在服务器 B 上加载一个 .php 文件并发送一个查询字符串，例如： [http](http://example.com/api/add.php?name=Craig&age=21&key=32r932r9832yr813hr813rh1389ry13r7y31r) ://example.com/api/add.php?name=Craig&age=21&key=32r932r9832yr813hr813rh1389ry13r7y31r . 服务器 B 请求了一个 PHP 文件，它将获取变量并在 add.php 上运行脚本（获取变量并将其添加到它的数据库中）。

**重要提示：我不希望客户端机器知道这一点，最初我想使用 JQUERY 但意识到这会从客户端机器而不是服务器直接发送请求。**

做这个的最好方式是什么？

*提前谢谢了！*

克雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T04:37:17.070

[学习卷曲](http://www.php.net/manual/en/book.curl.php)。这是[一个](http://www.php.net/manual/en/curl.examples-basic.php)帮助您入门的示例：

```
<?php

$ch = curl_init('http://example.com/api/add.php?name=Craig&age=21&key=32r932r9832yr813hr813rh1389ry13r7y31r');
curl_setopt($ch, CURLOPT_HEADER, 0);

$response = curl_exec($ch);

curl_close($ch);

?> 
```

# c - MATLAB 编码器精度

> ID：11019589
> 
> 赞同：1
> 
> 时间：2012-06-13T16:49:29.167
> 
> 标签：c, xcode, matlab, precision, matlab-deployment

如何通过 Coder 工具箱生成的 c 源代码提高变量的精度？

不幸的是，我有一个病态的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:24:50.420

我认为除非您依赖外部库，否则您无法以比`long double`允许的精度更高的精度工作。我不知道（但我可能是错的）将 Coder 连接到本机代码上的[Multiple Precision Toolbox类型的任何能力。](http://www.mathworks.com/matlabcentral/fileexchange/6446)

我建议从生成的 C 源代码开始，然后使用任意精度库，例如[apfloat](http://www.apfloat.org/)。不过，这需要您付出一些额外的努力。

# visual-studio-2010 - 如何将二进制文件添加到数据网格视图

> ID：11019601
> 
> 赞同：0
> 
> 时间：2012-06-13T16:50:27.690
> 
> 标签：visual-studio-2010, datagridview, binaryfiles, binary-data

我正在做一个 c++ 项目，我想知道是否可以在不使用数据库的情况下添加数据网格的项目。使用 xxxxxx.dat 文件。那可能吗？

pd：对不起，我的英语不好，我不会说英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:33:58.087

Create a couple of classes. One to describe a row in the file. One to open up a list of the above. add a method to load from the dat file, (and save to it?) Then just bind your grid to the list class.

Another possible option would be ODBC Text driver, but there area good few ifs and buts around that.

# android - 访问 android facebook sdk 上的状态消息

> ID：11019603
> 
> 赞同：0
> 
> 时间：2012-06-13T16:50:37.880
> 
> 标签：android, facebook-graph-api

当我在下面的代码中询问用户状态时遇到问题：

私有类 StatusRequestListener 实现 RequestListener{

```
 public void onComplete(String response, Object state) {
        try {
            Log.d("GETTING RESPONSE", "Response: " + response.toString());
            JSONObject json = Util.parseJson(response);
            STATUS = json.getString("message");

        } catch (FacebookError e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

我在日志中看到的内容：

06-13 16:44:39.265: D/GETTING RESPONSE(1193): 响应: {"error":{"message":"Unknown path components: /status","type":"OAuthException","code": 2500}}

和

06-13 16:44:39.265: W/System.err(1193): com.facebook.android.FacebookError: 未知路径组件: /status

我怎样才能克服这个麻烦 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:16:05.277

Graph API 用户连接称为状态，而不是状态……</p>

# objective-c - 在 Objective-C 的循环外声明变量是否有任何优化效果？

> ID：11019604
> 
> 赞同：5
> 
> 时间：2012-06-13T16:50:45.813
> 
> 标签：objective-c, xcode, optimization, loops

我已经养成了在其他语言中工作后在循环外声明重用变量的习惯，如下所示：

```
NSString *lcword;
for( NSString *word in tokens )
{
    lcword = [ word lowercaseString ];
    ...    
} 
```

在 Objective-C 中也这样做是否合理，或者编译器是否足够聪明以至于不需要它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T17:07:34.580

据我所知，Objective-C 没有任何好处。AFAIK 每个现代 Objective-C 编译器都会在函数或方法的开头为局部变量分配堆栈空间。将变量范围限定为循环只会阻止您在循环外使用名称，并阻止编译器在需要时重用堆栈空间。

另请参阅：[在循环中声明变量是否有任何开销？（C++）](https://stackoverflow.com/questions/982963/is-there-any-overhead-to-declaring-a-variable-within-a-loop-c)（这是一种不同的语言，所以我不会将其标记为欺骗，但工作中的编译器技术非常相似）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:53:30.217

如果你可以重用一个变量，那就去做吧。如果不需要，则无需在每次迭代时声明一个新的。

# c - 了解 C 套接字指令

> ID：11019605
> 
> 赞同：0
> 
> 时间：2012-06-13T16:50:48.680
> 
> 标签：c, sockets, struct

这是一个我还没有完全理解的说法。

```
serv_addr.sin_addr.s_addr = ((struct in_addr*)(hp->h_addr)) -> s_addr; 
```

这是否意味着：

1.  我`hp`投入`h_addr`
2.  `struct in_addr*`类型转换`hp->h_addr`
3.  所有这些都被复制到`s_addr`

因此 serv_addr.sin_addr.s_addr 包含所选主机的主机名和 IP 地址。
这是正确的吗？
（PS：马力是`struct hostent *hp ; hp=gethostbyname(argv[1]);`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:55:29.770

您需要了解[箭头运算符](http://publib.boulder.ibm.com/infocenter/iadthelp/v7r1/index.jsp?topic=/com.ibm.etools.iseries.langref.doc/as400clr91.htm)。

本质上，当您拥有指向该结构的指针时，它使您可以访问该结构的成员。

因此，`hp->h_addr`您可以访问指向的结构的`h_addr`成员。然后，您将该成员强制转换为 a并取消引用，以便您可以访问该结构的成员。`hostent``hp``in_addr *``s_addr``in_addr`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T16:55:39.157

(1) 错误。`hp->h_addr`是 的缩写`(*hp).h_addr`。这是取消引用加上成员选择。

在英语中，有人可能会说“将`hp`'s复制`h_addr`到`serv_addr`'s`s_addr`中。这需要演员表。”

# yii - Yii 嵌套 dropDownList 与选项组

> ID：11019609
> 
> 赞同：0
> 
> 时间：2012-06-13T16:51:03.860
> 
> 标签：yii

几天前我开始学习yii，现在我被以下问题困扰了几个小时......

我想生成一个 dropDownList 像

```
<div class="cars-select">
    <?php echo CHtml::dropDownList('Cars', 'car_id', array(
        'Mazda'=>array(
            'mazda-rx7'=>'RX7',
            'mazda-rx5'=>'RX5',
        ),
        'Volvo'=>array(
            'volvo-b9tl'=>'B9TL',
            'volvo-l90e-radlader'=>'L90E Radlader',
        ),
    )); ?>
</div> 
```

但是我使用以下表结构从数据库中获取数据：

```
Table Studycourse: 
id, coursename, extension_of

1, Law, 0
2, Economics, 0
3, Business Law, 1
4, Macro Economics, 2 
```

我的没有选项组的 DropDownList 正在工作：

```
$courseExt = Studycourse::model()->findAll("extension_of IS NOT NULL", array('order' => 'id'));
echo $form->dropDownList($model, 'studycourse_id', GxHtml::listDataEx($courseExt)); 
```

但是如何使用选项组填充下拉列表？

它应该生成以下html：

```
<select name="studycourse" id="course">
        <optgroup label="Law">
            <option value="law-business">Business Law</option>
        </optgroup>
        <optgroup label="Economics">
            <option value="economics-macro">Macro Economics</option>
        </optgroup>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T09:26:18.777

分类表：
id 名称 grp
1 女士办公软件
2 照相馆软件
3 C++ 编程
4 Java 编程
5 PHP 编程

$category = CHtml::listData(Category::model()->findAll(), 'id', 'name','grp');

echo CHtml::dropDownList('location', '', $location);

# java - 如何使用 Java 实现循环遍历树 HTML 的算法？

> ID：11019610
> 
> 赞同：0
> 
> 时间：2012-06-13T16:51:05.110
> 
> 标签：java, html, xml, tree

我必须走一棵从 NodeList 到达我的树，我需要一个算法来按顺序遍历所有节点，很可能是深入的，但不是如何实现它。我想我需要一些递归。有人可以帮忙吗？

部分代码为：NodeList nodeLista = documento.getElementsByTagName("html");

```
for (int s = 0; s < nodeLista.getLength(); s++) {
    Node Raiz = nodeLista.item(s); 
```

……

```
 for (int h = 0; h < nodeLista.getLength(); h++) {

    //Level of depth 1.
    Node Primer_Hijo = nodeLista.item(h); // In the first iteration for the HEAD will enter in the second iteration enter the BODY.

    //Level of depth 2.
    Element SegundoElemento = (Element) Primer_Hijo;
    NodeList ListadeNodos2 = SegundoElemento.getChildNodes(); 
```

......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:01:19.077

递归下降正是您正在寻找的。

[http://en.wikipedia.org/wiki/Recursive_descent_parser](http://en.wikipedia.org/wiki/Recursive_descent_parser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:11:44.610

对于解析 html，我过去使用过[Jerry](http://jodd.org/doc/jerry/index.html)。

它自称为 jquery for java 并允许您使用 css 样式选择器。我认为现在有几个库实现了 CSS 样式选择器。

尽管它可能不适合您的用例，但它会导致更易于阅读的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:13:11.073

这是伪代码

```
 traverse_tree(node)   {
    childNodes = node.getChildNodes();
    if(chidNodes is empty){
      print valueOf(node);
      return;
    }
    for each childNode in childNodes{
     traverse_tree(childNode);
    }
} 
```

通过调用 traverse_tree(rootNode) 开始遍历 //root 是树的根节点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T17:17:18.263

像这样的东西：

```
public static void main(String[] args) {
    //get the nodeList
    //...
    for (int h = 0; h < nodeLista.getLength(); h++) {
        Node Primer_Hijo = nodeLista.item(h); 
        navegate(Primer_Hijo);
    }

    //or (better) the root node
    navegate(rootNode);
}

void navegate(Node node){
    //do something with node
    node.getAttributes();
    //...

    for(int i=0; i<node.getChildNodes().getLength(); i++)
        navegate(node.getChildNodes().item(i));
    }
} 
```

# java - 从文件开头跳过字符

> ID：11019614
> 
> 赞同：0
> 
> 时间：2012-06-13T16:51:18.760
> 
> 标签：java, file-io

我正在按字符读取文件，但我想从文件开头跳过字符数。例如这是文件的内容：

**你好。按字符阅读内容**

```
 FileInputStream fis = new FileInputStream(file);

      int skipNumberOfCharacter = 12;
      char readCharacter;
      int ch;
      while ((ch = fis.read()) != -1) {
        readCharacter = (char) ch;
        System.out.print(readCharacter);
      } 
```

当文件处理时，它应该从内容中删除前 12 个字符，并返回输出为：

**按字符内容**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:54:11.257

BufferedReader 中有一个skip 方法。

可能你想看看它。

[`BufferedReader#skip (long)`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#skip%28long%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T16:53:25.357

采用`fis.skip(12);`

或者创建一个计数器

```
int count = 12;
while (..) {
    count--;
    if (count > 0) continue;
    // your code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T16:57:07.577

你应该能够做到：

```
fis.read(new byte[12]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T16:54:26.603

循环`fis.read()`通过`skipNumberOFCharacter`。

`for(int i = 0; i < skipNumberOfCharacter; i++) fis.read();`

# java - c++ 11 等价于 java atomiclongarray

> ID：11019615
> 
> 赞同：2
> 
> 时间：2012-06-13T16:51:21.637
> 
> 标签：java, c++, multithreading, c++11, atomic

我正在开发 Java 库的 C++ 端口。问题之一是我找不到与 Java 的 AtomicLongArray 等效的东西。任何人都知道在 c++ 11 中是否已经有任何等价的东西或者如何实现类似的功能？我看了一下 C++11 atomics 但找不到任何东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T16:54:37.183

[AtomicLongArray](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicLongArray.html)的文档说：

> 一个长数组，其中的元素可以自动更新。有关原子变量属性的描述，请参见`java.util.concurrent.atomic`包规范。

在我看来，这听起来像是一个简单的数组`std::atomic<long>`：

```
std::array<std::atomic<long>, N> array;
// or, if size is not known at compile time
std::vector<std::atomic<long>> vector(n); 
```

请注意，只有元素是原子的，容器本身不是，所以不要绕到`push_back`向量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:15:14.247

在 [container.requirements.dataraces] 标准中说

> -2- 尽管有（17.6.5.9），当同时`vector<bool>`修改同一序列中不同元素中包含的对象的内容时，需要实现来避免数据竞争，除了 。
> 
> -3- [*注意：*对于`vector<int> x`大小大于1的a，`x[1] = 5`可以`*x.begin() = 10`并发执行而不会发生数据竞争，但`x[0] = 5`并发`*x.begin() = 10`执行可能会导致数据竞争。作为一般规则的一个例外，对于 a `vector<bool> y, y[0] = true`may 与`y[1] = true`. *——尾注*]

所以任何容器（除了 evil `vector<bool>`）都允许在没有数据竞争的情况下更新单独的元素。为了确保对单个元素的更新是安全的，请使用原子类型的容器，例如`std::vector<std::atomic<long>>`

# trigger.io - 在 Trigger.io 中为 forge.request.ajax 设置 cookie

> ID：11019618
> 
> 赞同：2
> 
> 时间：2012-06-13T16:51:22.550
> 
> 标签：trigger.io

我正在尝试在 forge.request.ajax 调用中设置一个额外的 cookie。有没有办法点这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:03:43.207

如果需要，您可以`headers`手动使用 request.ajax 的参数，例如

```
window.forge.ajax({
  type: 'GET',
  url: 'http://my.server.com/protected/,
  headers: {
    'COOKIE': 'csrftoken=47ac86bb7965b343e8ca21343b164ef3',
  },
  success: function (data) { },
  error: function (error) { alert(JSON.stringify(error)); }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T01:53:16.147

通过 forge.request.ajax 发出请求实际上使用了与您的 JavaScript 完全不同的上下文 - 这是为了绕过可能对普通 JavaScript 施加的跨域限制。

我们目前不允许在 forge.request 上下文中手动设置 cookie，但请注意，作为请求的一部分设置的任何 cookie 都将保留（如适用）到后续请求，因此我们不希望人们拥有手动设置它们的值...

# eclipse - 生成的 CXF 客户端无法在 Eclipse 上使用 Java 1.5 进行编译

> ID：11019620
> 
> 赞同：0
> 
> 时间：2012-06-13T16:51:34.483
> 
> 标签：eclipse, cxf, java-5

今天我使用提供的工具 wsdl2java 生成了一个带有 CXF 2.6.1（最新版本）的 web 服务客户端。我想在 Eclipse 上使用 Java 5 编译生成的类，但由于以下导入而失败：

```
import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebResult;
import javax.jws.WebService;
import javax.jws.soap.SOAPBinding; 
```

[CXF FAQ](http://cxf.apache.org/faq.html)声明我可以将它与 Java 5 一起使用。所以我不明白为什么它不能在 Eclipse 中编译。

我要求`build.xml`生成一个。当我`ant`使用该脚本运行时，它可以工作。`build.xml`可以通过下载CXF 2.6.1或者inline[作为模板](http://svn.apache.org/repos/asf/cxf/tags/cxf-2.6.1/tools/javato/ws/src/main/java/org/apache/cxf/tools/java2wsdl/processor/internal/build.xml.vm)找到（容易理解；使用的ant-target是`build`）。从中，我推断我需要获取以下库，我做了这些库并将其放入我的 eclipse 项目中。

*   cxf-manifest.jar
*   geronimo-jaxws_2.2_spec-1.1.jar
*   jaxb-api-2.2.6.jar

那么如何在 Eclipse 中编译它呢？我错过了哪些图书馆（如果有的话）？

笔记：

*   我必须使用JDK5来编译和运行。
*   我的 Eclipse 版本是 3.7。
*   我安装了 Java 6，但我的 JAVA_HOME 很好地指向了我的 JDK5 实例。当我`set`在 Windows 命令提示符下键入时，没有对我的 Java 6 安装文件夹的引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:40:42.087

我不需要复制 CXF 库，只需将它们链接到我的项目中。这行得通，因为 cxf-manifest.jar 是一个 jar 文件，其中除了一个类路径之外什么都没有，它依次加载 CXF 的所有库。

# android - 从 code.google.com 下载源代码

> ID：11019624
> 
> 赞同：0
> 
> 时间：2012-06-13T16:51:45.123
> 
> 标签：android

我在互联网上发现了一个非常有趣的 android 应用程序，叫做 mytracks。我想从 code.google.com 下载它的源代码。我在网上阅读了一些论坛，他们建议从以下链接[http://downloadsvn.codeplex.com/](http://downloadsvn.codeplex.com/)下载 svn1.3 。但是当我尝试下载源代码时，它给了我以下错误-

下载失败：底层连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:57:13.623

我会使用 MyTracks Source 页面：

[http://code.google.com/p/mytracks/source/checkout](http://code.google.com/p/mytracks/source/checkout)

以及相关的 Mercurial 常见问题解答：

[http://code.google.com/p/support/wiki/MercurialFAQ#Why_should_I_create_a_server-side_clone](http://code.google.com/p/support/wiki/MercurialFAQ#Why_should_I_create_a_server-side_clone)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:04:05.967

关于下载错误，可能是由于您的浏览器设置，您可能需要调整安全设置。我通常有两种浏览器，一种有严格设置，一种没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T16:57:31.600

我不知道使用 svn1.3，但我一直使用[Tortoise Hg](http://tortoisehg.bitbucket.io/)。您可以转到要查看源代码的文件夹，右键单击，然后选择 Tortoise Hg -> 克隆。从那里您将复制 URL `https://code.google.com/p/mytracks/` ，它应该全部下载。我刚做了，对我来说效果很好。

# caching - Varnish 3.0 返回 503 错误

> ID：11019625
> 
> 赞同：2
> 
> 时间：2012-06-13T16:51:55.217
> 
> 标签：caching, varnish, varnish-vcl

我正在使用清漆来缓存我网站的内容。它按预期工作，但有一个问题。随机返回一个 503 错误，这真的很奇怪，因为应用程序服务器正常，负载低于 0.8，数据库服务器也正常。这是我的配置的一部分：

```
backend app05 {
  .host = "app05.site.com";
  .port = "80";
  .connect_timeout = 0.7s;
  .first_byte_timeout = 30s;
  .between_bytes_timeout = 30s;
  .probe = {
    .url = "/";
    .interval = 5s;
    .timeout = 1s;
    .window = 5;
    .threshold = 3;
  }
}

director app_director round-robin {
  { .backend = app01; }
  { .backend = app02; }
  { .backend = app03; }
  { .backend = app04; }
  { .backend = app05; }   
}

sub vcl_fetch {

  # remove all cookies
  # unset beresp.http.set-cookie;

  # cache for 12 hours
  # set beresp.ttl = 2h;

  # Don't allow static files to set cookies.
  if (req.url ~ "(?i)\.(png|gif|jpeg|jpg|ico|swf|css|js|html|htm|mp4|flv)(\?[a-z0-9]+)?$") {
    unset beresp.http.set-cookie;
    set beresp.ttl = 12h;
  } else {
    set beresp.ttl = 30m;
  }

  # If the backend server doesn't return properly, don't send another connection to it
  # for 60s and try another backend via restart.
  #
  # https://www.varnish-cache.org/docs/trunk/tutorial/handling_misbehaving_servers.html
  # --
  if(beresp.status == 500) {
    set beresp.saintmode = 5m;
    if (req.request != "POST") {
      return(restart);
    } else {
      error 500 "Failed";
    }
  }

  # Allow items to be stale if needed.
  set beresp.grace = 1h;

} 
```

我是否还必须添加到 if beresp.status == 503？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T18:39:19.870

我已经解决了这个问题。我只需要增加连接过期的时间并检查重新连接的次数。这是我添加的行：

```
host = "app01.site.com";
  .port = "80";
  .connect_timeout = 1.5s;
  .first_byte_timeout = 45s;
  .between_bytes_timeout = 30s;

if (req.restarts > 3) {
  set beresp.saintmode = 5m;
} 
```

# c# - 每个 .Next() 调用的随机数 [方法中的多个 .Next()]

> ID：11019628
> 
> 赞同：4
> 
> 时间：2012-06-13T16:52:16.980
> 
> 标签：c#

我在 C# 中生成随机数时遇到问题

我已经尝试了所有我找到的解决方案。大多数情况下，我们每次只使用相同的随机对象，它只适用于每个对象，而不是每个属性。

所以我用它作为随机数的代码：

```
private static readonly Random random = new Random();
private static readonly object syncLock = new object();

public static int RandomNumber(int min, int max)
{
            lock (syncLock)
            { // synchronize
                return random.Next(min, max);
            }
} 
```

现在我想`.Next()`在同一个方法中多次调用，生成一个随机对象：

```
public void StartDuiven()
{
   for (int i = 0; i <= 6; i++)
   {
      var d = new Duif();
      d.Naam = /*NameGenerator.GenRandomFirstName() +" "+ NameGenerator.GenRandomLastName()*/ "Jantje";
      d.GeboorteDatum = DateTime.Now;
      d.Snelheid = Genrator.RandomNumber(0, 4);
      d.Vliegtechniek = Genrator.RandomNumber(0, 4);
      d.Vormpeil = Genrator.RandomNumber(0, 4);
      d.Conditie = Genrator.RandomNumber(0, 4);
      d.Aerodynamica = Genrator.RandomNumber(0, 4);
      d.Intelligentie = Genrator.RandomNumber(0, 4);
      d.Libido = Genrator.RandomNumber(0, 4);
      d.Nachtvliegen = Genrator.RandomNumber(0, 4);
      d.Navigatie = Genrator.RandomNumber(0, 4);
      d.Ervaring = Genrator.RandomNumber(0, 4);
      d.Transfer = false;

      int g = Genrator.RandomNumber(0, 2); // Edited

      if (g == 0)
         d.Geslacht = false;
      else
         d.Geslacht = true;

      AddDuif(d);
   }
} 
```

每个新对象我都会得到一个不同的号码，但不是每次我调用 . `Next()`方法。

因此，对于 1 个对象，所有属性值都相同。

我该如何解决这个问题？为什么每次`.Next()`调用我都没有得到一个新值？

谢谢

再见！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:58:44.813

`Random.Next(0, 1)`总会回来`0`的。最大值是独占的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:03:11.023

由于鸽巢原理，很难:) 在 [0-4) 范围内获得 5 个不同的整数值。

由于数字是随机的，因此您应该期望在某些情况下所有值都相同。

（除了@IngisKahn 使用 of 识别的错误`Random.Next(0,1)`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:02:02.280

尝试

```
return (random.Next() % (max - min)) + min 
```

# javascript - Javascript：为什么我调用此代码时没有抛出错误？

> ID：11019629
> 
> 赞同：4
> 
> 时间：2012-06-13T16:52:18.727
> 
> 标签：javascript, html, syntax, canvas

我正在玩 HTML 画布并使用 Javascript 在上面写一些文本。

在这样做时，我犯了一个简单的错误，我花了一些时间才找到。我写：

```
context.fillText = ("My message", x-coord, y-coord); 
```

等号阻止了我预期的行为。但有一件事我不明白：为什么这段代码在 Chrome 的 Javascript 控制台中没有给我一个错误？

这是有效的 Javascript 吗？如果是：你能解释一下当等号存在时代码会做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T16:56:26.823

是的，这是有效的 Javascript。它使用[逗号运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comma_Operator)，它只计算左边的表达式，然后计算右边的表达式，然后返回右边的表达式的值。

由于表达式`"My message"`和`x-coord`没有副作用，因此与以下内容相同：

```
context.fillText = y-coord; 
```

或者：

```
"My message"; // Does nothing
x-coord;      // Does nothing
context.fillText = y-coord; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T16:55:50.700

[逗号运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comma_Operator)计算每个表达式并返回最后一个，因此右侧的计算结果为：

```
y-coord 
```

...并`context.fillText`设置为等于它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T16:59:14.777

如果您要询问两者之间的区别

`context.fillText = ("My message", x-coord, y-coord);`

和

`context.fillText("My message", x-coord, y-coord);`

答案是您将`=`符号右侧的表达式分配给`context.fillText`，因此试图覆盖方法本身，而不是使用参数调用它。

# javascript - 为什么有些 javascript 错误可以恢复而有些则不能

> ID：11019632
> 
> 赞同：2
> 
> 时间：2012-06-13T16:52:48.493
> 
> 标签：javascript

我在我的网站上使用了很多 javascript，当然有时在构建代码和出现错误时会出现问题。有时页面遇到错误，所有脚本都停止工作。如果在页面加载期间触发错误，则尤其如此。有时一些错误似乎并没有阻止页面运行更多脚本。

然后有时我查看网络上的某些页面，按 F12，我看到该页面有 5-10 个 javascript 错误，但看起来仍然正常工作。

是什么让一些 javascript 错误致命而另一些可以恢复？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:55:51.893

当块在加载时由浏览器评估时，除了解析它们之外，`<script>`实际上还**执行了代码。**因此，该过程中的异常会导致整个脚本块被中止。如果后续代码依赖于应该由此类脚本建立的全局符号，但不是由于错误，其他脚本也可能会失败。

但是，处理某些事件期间的错误只会导致该事件循环中止。因此，“单击”处理程序中的代码错误仅意味着单击某些内容时应该发生的某些事情根本不会发生。否则，页面可以继续正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T16:56:39.897

解析错误是致命的，即使是在一个`try..catch`块内，因为它无法可靠地找到`try`.

其他错误是可捕获的。在`try..catch`块内，`catch`将接收有关错误的信息。在出现错误情况后，该块中的其余代码将不可靠并且可能不安全。然而，其他`<script>`标签是独立的，因此可以毫无问题地运行。如果有帮助，您可以想象`<script>`标签意味着以下内容：

```
<script>
    try { // implied
        // your code here
    } catch(e) {throw e;} // implied
</script> 
```

# javascript - Javascript - 打开新 URL 并根据两个表单值传输数据

> ID：11019633
> 
> 赞同：1
> 
> 时间：2012-06-13T16:52:50.297
> 
> 标签：javascript, forms, cookies, web-storage

我对 javascript 完全陌生，但我正在尝试为焦点小组测试创建一个 beta 表单。最终产品将是专业开发的，但我需要一个短期的、有效的解决方案。它只需要在一台计算机上运行一次，因此我可以使用任何方法（cookies、webstorage 等）在页面之间传输数据。

我有一个带有 10 个选项的 ddl 表单。例如：

```
<select name="sector" id="sectorchoice"><option value="religion">Religion</option><option value="health">Health</option></select> 
```

我还有一个单选按钮，它将打开两个 URL 之一，具体取决于它是否被选中（onclick="greport"() 通过提交按钮）。

```
 <script>
function greport() {
    if (document.getElementById('radio1').checked = true) {
        window.open ("http://www.sampleurl.com","mywindow");
    }

    if (document.getElementById('radio1').checked = false) {
        window.open ("http://www.sampleurl2.com","mywindow");
    }
} 
```

我需要根据第一个下拉列表中的“sectorchoice”值在 sampleurl.com 和 sampleurl2.com 上加载九个图像之一。如何转移价值并创建功能以打开正确的图像？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:00:04.263

`=`和`==`是两个不同的东西。

`=`赋值运算符

```
var box = "A Big Box"; 
```

`==`是比较运算符，语句返回一个布尔值

```
a == b 
```

因此您将在代码中进行此更改

```
document.getElementById('radio1').checked == true 
```

# c# - 管理大型 WinForm 代码

> ID：11019637
> 
> 赞同：0
> 
> 时间：2012-06-13T16:53:13.307
> 
> 标签：c#, winforms, visual-studio-2010

我想问那里的专业开发人员他们如何管理一个大窗口窗体类。`partial`用关键字将其拆分到不同的文件中是个好主意吗？这就是我到目前为止所做的事情，但它会创建不必要的设计器文件，当你在 VS 中双击它们时，会弹出一个空白的 winform：

![在此处输入图像描述](../Images/94c86e10e5b08f7eeaa728a64a619a00.png)

所以我所做的基本上是在一个文件中为每个相关的控件组分组事件和代码逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:11:56.893

我的回答是“我没有”。如果您需要在一个类（在这种情况下是一个表单）中有很多代码，这通常意味着您的类正在做很多事情，您需要减少它的耦合度。实现这一点的一个好方法是使用一种 MVC 或 MVP 模式形式将逻辑放在另一个地方，并使用 UserControls，这样您就可以在不同的控件中拥有不同的功能（使用它们的控制器或演示者，具体取决于您是否实现 MVC或 MVP）。分而治之。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:12:24.840

我不认为我是专家，但是一旦我们遇到了类似的问题，主要形式并没有停止成长。

解决方案只是 OOP，制作未附加且可重用的类，这些类可以位于具有内部可见性的同一个命名空间中。

例如，您有一个**ComparisionForm.Menu**，它看起来可以与 ComparisionForm 中的主代码**分离**。

从另一个角度来看**“可读性”**。- 部分类很有用，但考虑到即使在不同文件中划分代码，逻辑也不总是划分的，这使得代码难以阅读、理解并最终难以维护.

将我的课程按逻辑划分为我的解决方案。你知道他们说什么“分而治之”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:13:41.650

我认为分离表单代码的最佳方法是使用 UserControl。

就我而言，当我有一个大类时，我使用区域而不是部分类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T18:30:25.663

不是专业人士，但我的两分钱是：*没有*大班。将大部分代码提取到其他类。

您还将获得，您将能够使用大多数方法`private`，从而减少 Intellisense “噪音”。

# string - 后缀树如何工作？

> ID：11019644
> 
> 赞同：5
> 
> 时间：2012-06-13T16:53:22.027
> 
> 标签：string, algorithm, data-structures, suffix-tree

我正在浏览[The Algorithm Design Manual](https://rads.stackoverflow.com/amzn/click/com/0387948600)中的数据结构章节，并遇到了 Suffix Trees。

该示例指出：

输入：

```
XYZXYZ$
 YZXYZ$
  ZXYZ$
   XYZ$
    YZ$
     Z$
      $ 
```

输出：

![在此处输入图像描述](../Images/12e23b0db24e74fb33dfd4ae8e90980b.png)

我无法理解该树是如何从给定的输入字符串生成的。后缀树用于在给定字符串中查找给定子字符串，但给定树如何帮助实现这一点？我确实理解下面显示的另一个给定的 trie 示例，但是如果下面的 trie 被压缩为后缀树，那么它会是什么样子？

![在此处输入图像描述](../Images/6e3adab7afc179fd2a7787666ac536ee.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T17:03:00.963

构建后缀树的标准高效算法绝对是不平凡的。这样做的主要算法称为 Ukkonen 算法，它是对朴素算法的修改，具有两个额外的优化。您可能最好阅读[这个较早的问题](https://stackoverflow.com/questions/1304469/understanding-ukkonens-algorithm-for-suffix-trees)，以了解有关如何构建它的详细信息。

您可以通过使用[基数上的标准插入算法来构建后缀树，尝试](http://en.wikipedia.org/wiki/Radix_tree)将每个后缀插入树中，但这样做会花费时间 O(n ² )，这对于大字符串来说可能很昂贵。

至于进行快速子字符串搜索，请记住后缀树是原始字符串的所有后缀的压缩树（加上一些特殊的字符串结束标记）。如果字符串 S 是初始字符串 T 的子字符串，并且您有 T 的所有后缀的 trie，那么您只需搜索 T 是否是该 trie 中任何字符串的前缀。如果是这样，那么 T 必须是 S 的子串，因为它的所有字符都按顺序存在于 T 中的某个位置。后缀树子串搜索算法正是应用于压缩特里树的这种搜索，您在每一步都遵循适当的边缘。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:04:49.780

> 我无法理解该树是如何从给定的输入字符串生成的。

您实际上创建了一个包含您列出的所有后缀的 patricia trie。插入 patricia trie 时，您从输入字符串中的第一个字符开始搜索根以查找子节点，如果存在，则继续沿树向下，如果不存在，则从根中创建一个新节点。根的子节点与输入字符串中的唯一字符（$、a、e、h、i、n、r、s、t、w）一样多。您可以对输入字符串中的每个字符继续该过程。

> 后缀树用于在给定字符串中查找给定子字符串，但给定树如何帮助实现这一点？

如果您正在寻找子字符串“hen”，则从根开始搜索以“h”开头的子字符串。如果子“h”中字符串的长度，则继续处理子“h”，直到到达字符串的末尾，或者输入字符串和子“h”字符串中的字符不匹配。如果匹配所有子“h”，即输入“hen”匹配子“h”中的“he”，然后继续搜索“h”的子元素，直到找到“n”，如果它未能找到开始的子元素使用“n”则子字符串不存在。

[紧凑后缀特里代码](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/CompactSuffixTrie.java)：

```
└── (black)
    ├── (white) as
    ├── (white) e
    │   ├── (white) eir
    │   ├── (white) en
    │   └── (white) ere
    ├── (white) he
    │   ├── (white) heir
    │   ├── (white) hen
    │   └── (white) here
    ├── (white) ir
    ├── (white) n
    ├── (white) r
    │   └── (white) re
    ├── (white) s
    ├── (white) the
    │   ├── (white) their
    │   └── (white) there
    └── (black) w
        ├── (white) was
        └── (white) when 
```

[后缀树代码](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/SuffixTree.java)：

```
String = the$their$there$was$when$
End of word character = $
└── (0)
    ├── (22) $
    ├── (25) as$
    ├── (9) e
    │   ├── (10) ir$
    │   ├── (32) n$
    │   └── (17) re$
    ├── (7) he
    │   ├── (2) $
    │   ├── (8) ir$
    │   ├── (31) n$
    │   └── (16) re$
    ├── (11) ir$
    ├── (33) n$
    ├── (18) r
    │   ├── (12) $
    │   └── (19) e$
    ├── (26) s$
    ├── (5) the
    │   ├── (1) $
    │   ├── (6) ir$
    │   └── (15) re$
    └── (29) w
        ├── (24) as$
        └── (30) hen$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:03:24.307

当没有选择时，后缀树基本上只是将一系列字母压缩在一起。例如，如果您查看问题中 trie 的右侧，在您看到 a 之后`w`，实际上只有两个选择：`was`和`when`。在 trie 中，`as`in`was`和`hen`in 中`when`的每个字母仍然有一个节点。在后缀树中，您可以将它们放在两个节点中，分别为`as`and `hen`，因此您的 trie 的右侧将变为：

![在此处输入图像描述](../Images/0f3f5333d16af51262234d70d3a1b6e4.png)

# php - 当主表包含这些项目ID时，从其他mysql表中获取真实的条目名称

> ID：11019648
> 
> 赞同：0
> 
> 时间：2012-06-13T16:53:25.967
> 
> 标签：php, mysql

当我有连接到其他表（cpu、ram、hdd ..）的主表（PC）时，我找不到从其他 mysql 表获取信息的好解决方案。在 PC 表中还有其他组件 ID（cpu、ram、hdd..）。

有我正在使用的代码：

```
<?php
$query="SELECT * FROM pc ORDER by id";
mysql_query("SET NAMES 'UTF8'");
$result = mysql_query ($query);
$i=1;
echo '<table border = "1">';
echo '<tr><td><b>Nr.</b></td><td><b>CPU:</b></td><td><b>RAM</b></td><td><b>HDD</b></td><td><b>MB</b></td><td><b>GPU</b></td><td><b>Monitor</b></td></tr>';
while($nt=mysql_fetch_array($result)){
$proc = $nt['proc_id'];
$ram = $nt['ram_id'];
$hdd = $nt['hdd_id'];
$mb = $nt['mot_id'];
$gpu = $nt['gpu_id'];
$mon = $nt['monit_id'];

echo '<tr><td><b>'.$i++.'.</b></td><td>'.$proc.'</td><td>'.$ram.'</td><td>'.$hdd.'</td><td>'.$mb.'</td><td>'.$gpu.'</td><td>'.$mon.'</td></tr>';

}
echo '</table>';
?> 
```

```
_______________________________
|Nr.  CPU  RAM  GPU HDD MONITOR |
| 1    1     2    1   2     2   |
--------------------------------- 
```

我正在获取零件 ID 号列表，但我需要打印这些组件的真实名称，这些组件位于其他表中，而不是 ID 中。所以我的问题是如何使用 PC 表中的 ID 来获取包含该 ID 的项目名称。例如：

```
________________________________________________________
|Nr.  CPU        RAM      GPU        HDD     MONITOR    |
| 1  Intel    2gb adata    GTX 460   WD 1tb     LCD..   |
--------------------------------------------------------- 
```

希望你能理解我的问题，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:59:01.370

改变：

```
SELECT * 
FROM pc 
ORDER by id 
```

类似于

```
SELECT * 
FROM PC 
LEFT JOIN RAM on PC.Ram_ID = Ram.ID
LEFT JOIN GPU on PC.GPUID = GPU.ID
...
ORDER BY PC.ID 
```

为了更好地理解连接，请参阅[http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:02:49.133

看不到你的表结构，所以这里有一些伪代码。在您的 SQL 查询中，您需要连接到其他表。另外，我不知道您的任何列中是否有任何空值，因此您可能需要这样做`LEFT JOINS`而不是`INNER`. JOINS 根据这些表中某些列之间的关系联合来自两个或多个表的数据。由于您的 RealNames 位于除 pc 之外的其他表中，因此您必须将它们带入查询以获取 RealNames。 `INNER JOIN`将带回两个表中匹配的任何内容。 `LEFT JOIN`将为您提供左表中的所有行，即使右表中没有匹配项 - 因此，例如，如果您有一个空监视器，您将需要 a`LEFT`或该行根本不会返回。研究加入！

```
SELECT pc.Id,PC.RealName,cpu.cpuId,cpu.RealName, ram.ramId ,ram.RealName,hdd.hddId          ,hdd.RealName,...
FROM pc  
INNER JOIN cpu ON cpu.cpuId = pc.cpu
INNER JOIN ram ON ram.ramId = pc.ram 
INNER JOIN hdd ON hdd.hddId = pc.hdd 
...
ORDER by pc.id 
```

# php - 试图从一个类中的多个函数调用一个数组

> ID：11019658
> 
> 赞同：1
> 
> 时间：2012-06-13T16:53:50.723
> 
> 标签：php, multidimensional-array

（在PHP中）这是我的问题，我想在我的类中初始化一个数组，让构造函数填充它，然后我可以在其他函数中使用数组的变量..当我在构造函数中回显我的数组时，它工作得很好，但是当我尝试在另一个函数中呼应它时，它给了我一些非常不同的东西。

```
class myProblem
{
    public $phaseArray;

    function myProblem()
    {
        $count1 = 0;
        $metaFile = fopen( 'MyFile.txt', 'r' ) or exit( "Unable to open file!" );
        while( !feof( $metaFile ) )
        {
            $this->phaseArray[0][$count1] = 0;
            $this->phaseArray[1][$count1] = fgets( $metaFile );
            echo $this->phaseArray[1][$count1], $count1, '</br>'; //this part displays well
            $count1++;
        }
        close( $metaFile );
    }

    function displayError()
    {
        foreach( $this->phaseArray as $key => $value )
        {
            echo $key, $value, '</br>'; //this part does not show up correctly
        }
        echo $this->phaseArray[0][2]; //this part does not show up correctly
        echo $this->phaseArray[1][1]; //this part does not show up correctly
    }
} 
```

对缩进感到抱歉，我无法让它工作。正确的打印输出是（来自构造函数）；0苹果 1橙 3梨 4草莓

但显示第二个功能；0阵列 1阵列

0阵列 0阵列

关于我做错了什么的任何想法？感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:06:50.733

它的显示方式是正确的，您可以决定它是否错误，您如何填充它或您如何从中读取数据

您正在创建一个二维数组，其中第二维也是一个数组。所以当你想输出所有第二维的项目时，通过另一个foreach循环它：

```
foreach( $this->phaseArray as $key => $values ) {
  foreach( $values as $value ) {
    echo $key, $value, '</br>'; //this part show up correctly
  }
} 
```

如果您想知道数组的结构，可以使用以下命令轻松打印出来：

```
echo "<pre>";
var_dump( $aVar );
echo "</pre>"; 
```

# javascript - 检测 Applet 何时可以使用

> ID：11019661
> 
> 赞同：1
> 
> 时间：2012-06-13T16:54:07.237
> 
> 标签：javascript, java, dom, applet, dom-events

我正在使用[这种技术](https://stackoverflow.com/questions/3737175/window-onfocus-not-firing-in-ie7-inconsistent-in-opera)来检测当前选项卡何时获得焦点，而[这个](https://stackoverflow.com/questions/11014753/restore-focus-to-java-applet-when-browser-tab-gains-focus)技术将焦点设置在 上`<applet>`，但是由于在页面加载期间发生第一个 onFocus 时小程序尚未准备好，因此出现了一些错误。它似乎没有停止任何工作，但错误并不理想！

在一个完美的世界中，我只会在小程序准备好后设置焦点处理程序。或者，焦点处理程序会在“触摸”它之前检查小程序是否有效……取决于哪个更简单，两者都可以。请首选非 jQuery 答案！

我的 HTML 看起来像：

```
<head>
<script language="javascript">
function focusIn()
{
    document.myApplet.requestFocus();
}
if ("onfocusin" in document)
    document.onfocusin = focusIn;
else
    window.onfocus= focusIn;
</script>
</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:33:54.033

在`Applet.start()`方法的最后，调用一个 JS 函数来表示“小程序准备就绪”。小程序甚至可以检测到小程序页面的选项卡更改或从最小化状态恢复的浏览器。

# java - 通过 Socket 连接的服务器/客户端 String[] 数组

> ID：11019662
> 
> 赞同：-2
> 
> 时间：2012-06-13T16:54:10.817
> 
> 标签：java, database, sockets

我正在尝试通过打开的套接字连接发送 String[] ，但它不起作用。我去从数据库发送一个数组并在套接字连接后在客户端发送结果集！

## 服务器

```
public class ServerConnectionHandler implements Runnable {

private static String String;
private Socket clientSocket;

public ServerConnectionHandler(Socket clientSocket) {
    this.clientSocket = clientSocket;
}

public String[] toStringArray(ResultSet resultSet, String columnLabel) {
    LinkedList<String> resultList = new LinkedList<String>();

    try {
        while (resultSet.next()) {
            resultList.add(resultSet.getString(columnLabel));
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }

    return resultList.toArray(new String[0]);
}

@Override
public void run() {

    ResultSet val = null;
    System.out.println("Client " + clientSocket.getInetAddress() + ":" + clientSocket.getPort() + " has connected.");
    Mysql conn = new Mysql("****", "root", "","*****");
    val = conn.executeSelect(CONSTANT.QUERY_ALL);
    String[] mybytearray = toStringArray(val,"real_url");

    try {
        PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
        BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

        String inputline, outputline;
        outputline = "Connected to server...type in the console to interact!";
        out.println(outputline);

        while((inputline = in.readLine()) != null){
            outputline = "Server echoes: " + mybytearray;
            out.println(outputline);
        }
    }

    catch(Exception e) {
        System.out.println("Client " + clientSocket.getInetAddress() + ":" + clientSocket.getPort() + " has disconnected.");
    }

} 
```

}

## 客户

```
public class ClientMain {

private String host;
private int port;

public ClientMain(String host, int port) {
    this.host = host;
    this.port = port;
}

public void start() {
    try {
        Socket clientSocket = new Socket(host, port);
        PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
        BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

        String inputline, outputline;
            while((inputline = in.readLine()) != null){
                System.out.println(inputline);
                outputline = getUserInput();
                out.println(outputline);

            }
    } 

    catch (Exception e) {
        System.out.println("Server not running, shutting down...");
        System.exit(-1);
    } 
}

private static String getUserInput() {
    String s = "";
    InputStreamReader isr; 
    BufferedReader br;
    try {
        isr = new InputStreamReader(System.in);
        br = new BufferedReader(isr);
        s += br.readLine();

    }
    catch(IOException e){
        e.printStackTrace();
        System.exit(-1);
    }

    return s;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:04:16.560

除了整体有缺陷的设计之外，我很确定这条线是非常错误的：

```
outputline = "Server echoes: " + mybytearray; 
```

您正在将字符串“服务器回显：”与数组连接起来。你不能这样做。

相反，试试这个：

```
outputline = "Server echoes: ";
for (String s : mybytearray) {
    outputline += s;
} 
```

但是你到底为什么要调用 String 数组`mybytearray`呢？

*作为职业建议，请考虑使用每个现代 Java IDE 中提供的调试器工具。*

# oracle - ORA-00904 在 DATE 列上使用“MERGE INTO”和“SELECT FROM dual”时出现“无效标识符”错误

> ID：11019664
> 
> 赞同：2
> 
> 时间：2012-06-13T16:54:21.230
> 
> 标签：oracle, date, merge, ora-00904, dual-table

我在 Oracle 数据库上有以下 PL/SQL 存储过程：

```
PROCEDURE MyProcedure (
    p_id IN NUMBER
  , p_date IN DATE
  , p_num IN NUMBER) 
  AS
  BEGIN
    MERGE INTO MY_TABLE mytable
    USING (SELECT
            p_id,
            p_date,
            p_num
          FROM dual) temp
    ON (mytable.myid = temp.p_id AND mytable.mydate = temp.p_date)
  WHEN MATCHED THEN
    UPDATE SET
      DIFFERENCE = temp.p_num,
  WHEN NOT MATCHED THEN
    INSERT VALUES (
      MY_TABLEIDSEQ.NEXTVAL,
      temp.p_id,
      temp.p_date,
      temp.p_num);
END MyProcedure; 
```

MY_TABLE 表定义如下：

```
CREATE TABLE "MY_DBO"."MY_TABLE" 
   (
     "MYTABLEID" NUMBER(38,0),
     "MYID" NUMBER(38,0),
     "MYDATE" DATE,
     "MYNUM" NUMBER(25,4)
   ) 
```

但是，当我使用输入字段的有效值运行存储过程时，我收到以下错误：

> ORA-00904: "TEMP"."P_DATE": 无效标识符
> 
> ORA-06512：在“MY_DBO.MY_PKG”，第 54 行
> 
> ORA-06512: 在第 18 行

我不知道是什么原因造成的，任何帮助将不胜感激。请注意，存储过程从 MY_PKG 的第 45 行开始。

[我在这里](https://stackoverflow.com/questions/10233417)发现了一个类似的问题，但是将“dual”更改为“MY_TABLE”的解决方案似乎对我不起作用。

PS：我对 Oracle 很陌生 :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T17:15:04.503

在“select from dual”语句中，您使用了存储过程的输入参数作为值。Oracle 确实为这些列生成了隐式名称，我目前无法预测。但是您可以在该语句中提供自己的列名/别名：

```
USING (SELECT
        p_id col_id,
        p_date col_date,
        p_num col_num
      FROM dual) temp 
```

这些名字只是例子。我强烈建议您在这种情况下使用唯一名称，以防止以后出现任何歧义。您需要用您提供的别名替换合并语句中对 temp.* 的任何使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:46:19.027

这不会真正回答您的问题，因为 Juergen Hartelt 已经回答了它，但它会为您提供更多信息。

由于您仅在此处插入或更新一行，因此另一种选择可能是放弃使用and并`MERGE`使用 and 的组合。`INSERT``UPDATE`

在你的情况下，你会使用

```
PROCEDURE MyProcedure (
    p_id IN NUMBER
  , p_date IN DATE
  , p_num IN NUMBER) 
  AS
  BEGIN
    Update MY_TABLE mytable
    Set MYNUM = p_num
    Where mytable.MYID = p_id AND mytable.MYDATE = p_date;

    If SQL%ROWCOUNT = 0 then
      INSERT INTO MY_TABLE mytable 
      Values (MY_TABLEIDSEQ.NEXTVAL,
      temp.p_id,
      temp.p_date,
      temp.p_num);
    END IF;

END MyProcedure; 
```

此外，可能值得查看“[如何 UPSERT](https://stackoverflow.com/questions/237327/oracle-how-to-upsert-update-or-insert-into-a-table) ”这个问题，因为这将为您提供解决此问题的完整选项菜单。

# javascript - 使用 jQuery，我如何以不同的间隔重复一个函数？

> ID：11019667
> 
> 赞同：2
> 
> 时间：2012-06-13T16:54:30.723
> 
> 标签：javascript, jquery

我需要该功能在第一次 8 秒后重复，然后在 30 秒后再次重复。我使用过 setTimeout 但不确定这是否是解决方法。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T16:56:14.013

您可以使用`setTimeout`and的连词`setInterval`：

```
window.setTimeout(function() {
    // this will run 8 seconds later

    window.setInterval(function() {
        // do here whatever you want to do at 30 seconds intervals
    }, 30000);    
}, 8000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T16:56:38.740

setTimeout 是完美的。

```
(function() {
    var func = function() {
        // Code here
    }
    setTimeout(func, 8000);
    setTimeout(func, 30000);
})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T16:57:28.460

使用 JavaScript：

```
var interval = setInterval(yourFunction, 8000); 
```

其中 8000 是再次执行函数的间隔，interval 是间隔句柄，以防您想使用 clearInterval 停止它

# css - 一些 CSS 属性在 JavaFX 2.1 中无法正常工作

> ID：11019668
> 
> 赞同：2
> 
> 时间：2012-06-13T16:54:32.137
> 
> 标签：css, javafx-2

我不确定是不是我，没有使用正确的属性来通过 CSS 设置控件样式。但是今天我测试了 Ensemble 应用程序中的一个示例，发现它也无法正常工作。

我发现最难设置的一个是： **-fx-text-fill** 更改标签的文本颜色，例如：

```
#pill-left:selected .label {
 /* -fx-text-fill: black; */
 -fx-text-fill:red;
 -fx-effect: dropshadow( one-pass-box , white , 0, 0.0 , 0 , 1 );
} 
```

无论我放什么，文本总是使用默认值颜色。

我正在使用 JavaFx 2.1。也许这已经在 2.2 中修复了，但我想我应该指出这一点，因为它是非常基本的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T17:01:34.417

95% 确定这是一个错误。

您需要使用的解决方法，`-fx-fill: red;`而不是`-fx-fill-text`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T09:56:52.763

好的，经过一些广泛的测试，我设法使用 StyleSheets 使其工作。

关键是删除**.label**属性并仅使用控件的 ID，并根据需要附加状态（*:hover*、*:selected*等）。

```
 #pill-left {
    -fx-padding: 5;
    -fx-text-fill:red;
    -fx-border-image-source: url("left-btn.png");
    -fx-border-image-slice: 4 4 4 4 fill;
    -fx-border-image-width: 4 4 4 4;
    -fx-border-image-insets: 0;
    -fx-border-image-repeat: stretch;
    -fx-background-color: null !important; 
}

#pill-left:hover, #pill-left:hover:selected { -fx-text-fill:blue; }
#pill-left:selected { 
    -fx-text-fill:green;
    -fx-border-image-source: url("left-btn-selected.png"); } 
```

由于这一切都基于直接取自 ensemble 项目的代码示例，因此我们认为这是正确的。许多程序员会发现自己像我一样在这个问题上拉头发。

无论如何，这是关于如何将 styleSheets 与 Javafx 一起使用的重要一课，尽可能避免使用 ID 以外的任何内容来指定某些属性，例如文本颜色。

# jquery - 如何在 jQuery 中验证经纬度和电子邮件地址

> ID：11019677
> 
> 赞同：3
> 
> 时间：2012-06-13T16:54:54.263
> 
> 标签：jquery, email, latitude-longitude

我正在创建纬度和经度的验证。

现在这是我的 jQuery 脚本：

```
var latlngVal = /^(-?([1-8]?[1-9]|[1-9]0)\.{1}\d{1,6}),{1}(-?([1]?[1-7][1-9]|[1]?[1-8][0]|[1-9]?[0-9])\.{1}\d{1,6})/;
var latlng = $("input#latlng").val();
var invalid_latlng = 'Latitude and Longitude are not correctly typed';

// Validate Latitude and Longitude
if(!latlngVal.test(latlng)) {

    // ERROR

    $("#error").html(invalid_latlng);
    return false;;
}; 
```

谷歌的输出可以是这样的：63.548552，-127.529297。

我正在向他们展示如何直接从谷歌复制纬度和经度并将其与视频一起放入。但不知何故，验证继续说输入的纬度和经度是错误的。

我想知道我的 var latlngVal 是对还是错。

然后我也在做这个脚本，它似乎也不起作用..：

```
var emailVal = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
var email = $("input#email").val();
var invalid_email = 'Please type a valid e-mail address';

// If e-mail address is not empty - validate
if (!email == '') {
    if(!emailVal.test(email)) {

        // ERROR - customize

        $('#error').html(invalid_email);
        return false;
    }
}; 
```

这里的问题只是它似乎没有检查电子邮件是否为空，所以请告诉我这里是否也有问题。如果他们没有输入电子邮件，我不想验证电子邮件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T19:29:41.947

我冒昧地对您的代码进行了一些更改。

我将您的正则表达式更改为：

```
/^-?([0-8]?[0-9]|90)\.[0-9]{1,6},-?((1?[0-7]?|[0-9]?)[0-9]|180)\.[0-9]{1,6}$/; 
```

它适用于 lat `-90.XXXXXX`to`90.XXXXXX`和 lng `-180.XXXXXX`to`180.XXXXXX`

例子：`-85.123456,-100.123456`

并检查电子邮件是否为空：

```
if (email.length !== 0) { 
```

**演示** [http://jsfiddle.net/nRha8/2/](http://jsfiddle.net/nRha8/2/)

# android - 将 Android 480w 视为缩放的 320/640w 移动网页设计

> ID：11019679
> 
> 赞同：0
> 
> 时间：2012-06-13T16:55:17.283
> 
> 标签：android, iphone, mobile-website, responsive-design

我的设计师递给我一个 640w 的设计，可以在 iPhone 和 Android 移动网站上使用。

我使用 320w 测量值进行了所有设置，并用基于像素比的媒体查询替换了图形。这主要是设计中的图像被用作元素的背景图像以及在 PX 维度中定义的其他元素的问题。我们已将所有排版调整为 EM 的大小，因此一个简单的媒体查询可以调整所有排版，但图标和布局图形仍然不正确。

我遇到的问题是 480px 宽的 Android 测试设备看起来太缩小了，我尝试使用元视口标签的不同变体来处理这个问题。下面的每一个都被独立地尝试过，但没有产生预期的效果。

`<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, target-densitydpi=device-dpi" />`

`<meta name="viewport" content="width=device-width" />`

`<meta name="viewport" content="width=320" />`

这主要是设计中的图像被用作元素的背景图像以及在 PX 维度中定义的其他元素的问题。我们已将所有排版调整为 EM 的大小，因此一个简单的媒体查询可以调整所有排版，但图标和布局图形仍然不正确。

移动网络对我来说有点未知，我想找到一种方法来处理视口设置而不是定义额外的媒体查询。我的理解是，视口元的存在是为了帮助处理跨多个视口大小的此类问题，而无需在每次略有不同的视口进入市场时都定义新的媒体查询。

如果我的方法不可行，请分享对更好方法的参考。我们混合了需要流动且相当固定的元素，这使得这是一个挑战，但我愿意接受建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:55:40.343

用这些替换您的元标记，看看它是否有帮助：

```
<meta name="HandheldFriendly"   content="True">
<meta name="MobileOptimized"    content="320">
<meta name="viewport"           content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

如果这些都没有帮助，那么查看您的代码以了解您的 CSS 和 HTML 的布局方式会有所帮助。

# javascript - 使用 Jquery 单击时使链接变为粗体

> ID：11019682
> 
> 赞同：6
> 
> 时间：2012-06-13T16:55:26.330
> 
> 标签：javascript, jquery, css

我有两个用于排序的链接。一个按品牌，一个按型号（两者都是升序和降序）。

现在我有它，所以当你加载页面时，你只能看到模型降序和降序。如果您要单击让我们说模型降序，它会隐藏该链接并显示模型升序的链接。

**问：我想让当前选中的用于排序的列在单击后变为粗体。一旦选择了另一列，就会取消粗体并重置为原始链接。**

HTML：

```
<a href='#' id='modelD'>Model D</a>
<a href='#' id='modelA'>Model A</a>
<a href='#' id='makeD' >Make D</a>
<a href='#' id='makeA' >Make A</a>​ 
```

查询：

```
$('#modelA').hide();
$('#makeA').hide();

$('#modelD').click(function(){
    $('#modelD').hide();
    $('#modelA').show();
});

$('#modelA').click(function(){
    $('#modelA').hide();
    $('#modelD').show();  
});

$('#makeD').click(function(){
    $('#makeD').hide();
    $('#makeA').show();

});

$('#makeA').click(function(){
    $('#makeA').hide();
    $('#makeD').show();
}); 
```

这是代码的小提琴。 [http://jsfiddle.net/JKFKC/1/](http://jsfiddle.net/JKFKC/1/)

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T16:57:22.307

用这个

```
.css('font-weight', 'bold') 
```

让你的代码更小

```
$('#modelD, #modelA').click(function() {
    $('#modelD, #modelA').toggle().css('font-weight', 'bold');
    $('[id^=make]').css('font-weight', 'normal');
});

$('#makeA, #makeD').click(function() {
    $('#makeA, #makeD').toggle().css('font-weight', 'bold');
    $('[id^=model]').css('font-weight', 'normal');
}); 
```

**[演示](http://jsfiddle.net/JKFKC/10/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:58:48.817

为连接在一起的链接定义一个类，例如`model`. 然后，当单击模型时：

```
$(".model").css({"font-weight":"normal"}); // un-bold all the model links
$(this).css({"font-weight":"bold"}); // bold the clicked link. 
```

# r - 使用 for 循环将注释放在 ggplot2 中一系列直方图的顶部

> ID：11019692
> 
> 赞同：5
> 
> 时间：2012-06-13T16:56:05.330
> 
> 标签：r, for-loop, ggplot2

我正在创建许多直方图，我想在图表顶部添加注释。我正在使用 for 循环绘制这些，因此我需要一种方法将注释放在顶部，即使我的 ylims 从一个图形更改为另一个图形。如果我可以将每个图形的 ylim 存储在循环中，我可以使注释的 y 坐标根据当前图形而变化。我在注释中包含的 y 值必须随着循环在迭代中的进行而动态变化。这是一些示例代码来演示我的问题（注意注释是如何移动的。我需要根据每个图的 ylim 来更改它）：

```
library(ggplot2)

cuts <- levels(as.factor(diamonds$cut))

pdf(file = "Annotation Example.pdf", width = 11, height = 8,
    family = "Helvetica", bg = "white")

for (i in 1:length(cuts)) {
  by.cut<-subset(diamonds, diamonds$cut == cuts[[i]])
  print(ggplot(by.cut, aes(price)) +
    geom_histogram(fill = "steelblue", alpha = .55) +
  annotate ("text", label = "My annotation goes at the top", x = 10000 ,hjust = 0, y = 220, color = "darkred"))
}    
dev.off() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T18:13:45.013

`ggplot`在其位置中使用`Inf`来表示绘图范围的极值，而不更改绘图范围。因此`y`可以将注解的值设置为`Inf`，`vjust`也可以调整参数以获得更好的对齐。

```
...
print(ggplot(by.cut, aes(price)) +
      geom_histogram(fill = "steelblue", alpha = .55) +
      annotate("text", label = "My annotation goes at the top", 
               x = 10000, hjust = 0, y = Inf, vjust = 2, color = "darkred"))
... 
```

对于`i<-2`，这看起来像：

![在此处输入图像描述](../Images/bdb51e2e0892aa56b3a124c2a116f2c6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:11:57.510

可能有一种更简洁的方法，但您可以获得最大计数并使用它`y`在注释调用中进行设置：

```
for (i in 1:length(cuts)) {

  by.cut<-subset(diamonds, diamonds$cut == cuts[[i]])

  ## get the cut points that ggplot will use. defaults to 30 bins and thus 29 cuts
  by.cut$cuts <- cut(by.cut$price, seq(min(by.cut$price), max(by.cut$price), length.out=29))

  ## get the highest count of prices in a given cut.
  y.max <- max(tapply(by.cut$price, by.cut$cuts, length))

  print(ggplot(by.cut, aes(price)) +
    geom_histogram(fill = "steelblue", alpha = .55) +
    ## change y = 220 to y = y.max as defined above
    annotate ("text", label = "My annotation goes at the top", x = 10000 ,hjust = 0, y = y.max, color = "darkred"))
} 
```

# c++ - 如何在保留选择的同时刷新 QSqlTableModel？

> ID：11019694
> 
> 赞同：12
> 
> 时间：2012-06-13T16:56:11.550
> 
> 标签：c++, qt, model-view, qsqltablemodel

我正在使用`QSqlTableModel`and`QTableView`来查看 SQLite 数据库表。

我想让表每秒左右自动刷新一次（它不会是一个非常大的表 - 几百行）。我可以这样做 - 像这样：

```
QTimer *updateInterval = new QTimer(this);
updateInterval->setInterval(1000);
updateInterval->start();
connect(updateInterval, SIGNAL(timeout()),this, SLOT(update_table()));

...

void MainWindow::update_table()
{
    model->select(); //QSqlTableModel*
    sqlTable->reset(); //QTableView*
} 
```

但这会删除我拥有的任何选择，因此选择最多只能持续一秒钟。这很烦人，因为 GUI 中的另一个窗格取决于选择的内容。如果未选择任何内容，则它会重置为说明启动页面。

然后我尝试了一种有点 hacky 的方法，它获取选定的行号，重置表，然后选择该行。但这也不起作用，因为选定的行可以根据对表格的添加向上或向下移动。

我知道其他班级有`dataChanged()`信号，这将是理想的。

你们有谁知道**我如何让表刷新以反映对数据库的更改**（来自命令行使用或程序的其他实例）**并保持当前选择？**

我知道我可以从当前选择中获取数据，然后在重置后搜索同一行，然后重新选择它，但这似乎是一个适得其反的问题解决方案。

编辑：目前的解决方案尝试：

```
void MainWindow::update_table()
{    

    QList<QModelIndex> selection = sqlTable->selectionModel()->selection().indexes();
    QList<int> selectedIDs;
    bool somethingSelected = true;

    for(QList<QModelIndex>::iterator i = selection.begin(); i != selection.end(); ++i){
        int col = i->column();
        QVariant data = i->data(Qt::DisplayRole);

    if(col == 0) {
            selectedIDs.append(data.toInt());
        }
    }

    if(selectedIDs.empty()) somethingSelected = false;

    model->select();
    sqlTable->reset();

    if(somethingSelected){
        QList<int> selectedRows;

        int rows = model->rowCount(QModelIndex());
        for(int i = 0; i < rows; ++i){
            sqlTable->selectRow(i);
            if(selectedIDs.contains(sqlTable->selectionModel()->selection().indexes().first().data(Qt::DisplayRole).toInt())) selectedRows.append(i);
    }

    for(QList<int>::iterator i = selectedRows.begin(); i != selectedRows.end(); ++i){
        sqlTable->selectRow(*i);
    }
}
} 
```

好的，所以这或多或少现在有效......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T18:53:20.853

真正的交易是查询结果的主键。`QSqlTableModel::primaryKey()`Qt 的 API 提供了从列列表到列列表的相当迂回的路径。结果`primaryKey()`是 a `QSqlRecord`，您可以遍历它`field()s`以查看它们是什么。您还可以从 中查找构成查询的所有字段`QSqlTableModel::record()`。您在后者中找到前者以获取构成查询的模型列的列表。

如果您的查询不包含主键，则您必须自己设计一个并使用某种协议提供它。例如，您可以选择如果`primaryKey().isEmpty()`为 true，则将模型返回的最后一列用作主键。由您决定如何键入任意查询的结果。

然后可以简单地通过它们的主键（组成键的单元格的值列表 - a ）对选定的行进行索引`QVariantList`。为此，如果其设计没有损坏，您可以使用**自定义选择模型**( )。`QItemSelectionModel`关键方法，例如`isRowSelected()`不是虚拟的，你不能重新实现它们:(。

相反，您可以通过为数据提供自定义来使用模拟选择的代理模型`Qt::BackgroundRole`。您的模型位于表模型的顶部，并保留了选定键的排序列表。每次`data()`调用代理模型时，您都会从底层查询模型中获取行的键，然后在排序列表中搜索它。最后，如果该项目被选中，您将返回一个自定义背景角色。您必须为`QVariantList`. 如果`QItemSelectionModel`可用于此目的，您可以将此功能放入`isRowSelected()`.

该模型是通用的，因为您订阅了用于从查询模型中提取键的特定协议：即使用`primaryKey()`.

如果模型支持，您也可以使用持久索引，而不是显式使用主键。唉，至少在 Qt 5.3.2 之前，在`QSqlTableModel`重新运行查询时不会保留持久索引。因此，一旦视图更改了排序顺序，持久索引就会变得无效。

下面是一个完整的示例，说明如何实现这样的野兽：

![示例截图](../Images/3808fe1d35c94da7287af1cf7b16fb36.png)

```
#include <QApplication>
#include <QTableView>
#include <QSqlRecord>
#include <QSqlField>
#include <QSqlQuery>
#include <QSqlTableModel>
#include <QIdentityProxyModel>
#include <QSqlDatabase>
#include <QMap>
#include <QVBoxLayout>
#include <QPushButton>

// Lexicographic comparison for a variant list
bool operator<(const QVariantList &a, const QVariantList &b) {
   int count = std::max(a.count(), b.count());
   // For lexicographic comparison, null comes before all else
   Q_ASSERT(QVariant() < QVariant::fromValue(-1));
   for (int i = 0; i < count; ++i) {
      auto aValue = i < a.count() ? a.value(i) : QVariant();
      auto bValue = i < b.count() ? b.value(i) : QVariant();
      if (aValue < bValue) return true;
   }
   return false;
}

class RowSelectionEmulatorProxy : public QIdentityProxyModel {
   Q_OBJECT
   Q_PROPERTY(QBrush selectedBrush READ selectedBrush WRITE setSelectedBrush)
   QMap<QVariantList, QModelIndex> mutable m_selection;
   QVector<int> m_roles;
   QBrush m_selectedBrush;
   bool m_ignoreReset;
   class SqlTableModel : public QSqlTableModel {
   public:
      using QSqlTableModel::primaryValues;
   };
   SqlTableModel * source() const {
      return static_cast<SqlTableModel*>(dynamic_cast<QSqlTableModel*>(sourceModel()));
   }
   QVariantList primaryValues(int row) const {
      auto record = source()->primaryValues(row);
      QVariantList values;
      for (int i = 0; i < record.count(); ++i) values << record.field(i).value();
      return values;
   }
   void notifyOfChanges(int row) {
      emit dataChanged(index(row, 0), index(row, columnCount()-1), m_roles);
   }
   void notifyOfAllChanges(bool remove = false) {
      auto it = m_selection.begin();
      while (it != m_selection.end()) {
         if (it->isValid()) notifyOfChanges(it->row());
         if (remove) it = m_selection.erase(it); else ++it;
      }
   }
public:
   RowSelectionEmulatorProxy(QObject* parent = 0) :
      QIdentityProxyModel(parent), m_roles(QVector<int>() << Qt::BackgroundRole),
      m_ignoreReset(false) {
      connect(this, &QAbstractItemModel::modelReset, [this]{
         if (! m_ignoreReset) {
            m_selection.clear();
         } else {
            for (auto it = m_selection.begin(); it != m_selection.end(); ++it) {
               *it = QModelIndex(); // invalidate the cached mapping
            }
         }
      });
   }
   QBrush selectedBrush() const { return m_selectedBrush; }
   void setSelectedBrush(const QBrush & brush) {
      if (brush == m_selectedBrush) return;
      m_selectedBrush = brush;
      notifyOfAllChanges();
   }
   QList<int> selectedRows() const {
      QList<int> result;
      for (auto it = m_selection.begin(); it != m_selection.end(); ++it) {
         if (it->isValid()) result << it->row();
      }
      return result;
   }
   bool isRowSelected(const QModelIndex &proxyIndex) const {
      if (! source() || proxyIndex.row() >= rowCount()) return false;
      auto primaryKey = primaryValues(proxyIndex.row());
      return m_selection.contains(primaryKey);
   }
   Q_SLOT void selectRow(const QModelIndex &proxyIndex, bool selected = true) {
      if (! source() || proxyIndex.row() >= rowCount()) return;
      auto primaryKey = primaryValues(proxyIndex.row());
      if (selected) {
         m_selection.insert(primaryKey, proxyIndex);
      } else {
         m_selection.remove(primaryKey);
      }
      notifyOfChanges(proxyIndex.row());
   }
   Q_SLOT void toggleRowSelection(const QModelIndex &proxyIndex) {
      selectRow(proxyIndex, !isRowSelected(proxyIndex));
   }
   Q_SLOT virtual void clearSelection() {
      notifyOfAllChanges(true);
   }
   QVariant data(const QModelIndex &proxyIndex, int role) const Q_DECL_OVERRIDE {
      QVariant value = QIdentityProxyModel::data(proxyIndex, role);
      if (proxyIndex.row() < rowCount() && source()) {
         auto primaryKey = primaryValues(proxyIndex.row());
         auto it = m_selection.find(primaryKey);
         if (it != m_selection.end()) {
            // update the cache
            if (! it->isValid()) *it = proxyIndex;
            // return the background
            if (role == Qt::BackgroundRole) return m_selectedBrush;
         }
      }
      return value;
   }
   bool setData(const QModelIndex &, const QVariant &, int) Q_DECL_OVERRIDE {
      return false;
   }
   void sort(int column, Qt::SortOrder order) Q_DECL_OVERRIDE {
      m_ignoreReset = true;
      QIdentityProxyModel::sort(column, order);
      m_ignoreReset = false;
   }
   void setSourceModel(QAbstractItemModel * model) Q_DECL_OVERRIDE {
      m_selection.clear();
      QIdentityProxyModel::setSourceModel(model);
   }
};

int main(int argc, char *argv[])
{
   QApplication app(argc, argv);
   QWidget w;
   QVBoxLayout layout(&w);

   QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
   db.setDatabaseName(":memory:");
   if (! db.open()) return 255;

   QSqlQuery query(db);
   query.exec("create table chaps (name, age, constraint pk primary key (name, age));");
   query.exec("insert into chaps (name, age) values "
              "('Bob', 20), ('Rob', 30), ('Sue', 25), ('Hob', 40);");
   QSqlTableModel model(nullptr, db);
   model.setTable("chaps");

   RowSelectionEmulatorProxy proxy;
   proxy.setSourceModel(&model);
   proxy.setSelectedBrush(QBrush(Qt::yellow));

   QTableView view;
   view.setModel(&proxy);
   view.setEditTriggers(QAbstractItemView::NoEditTriggers);
   view.setSelectionMode(QAbstractItemView::NoSelection);
   view.setSortingEnabled(true);
   QObject::connect(&view, &QAbstractItemView::clicked, [&proxy](const QModelIndex & index){
      proxy.toggleRowSelection(index);
   });

   QPushButton clearSelection("Clear Selection");
   QObject::connect(&clearSelection, &QPushButton::clicked, [&proxy]{ proxy.clearSelection(); });

   layout.addWidget(&view);
   layout.addWidget(&clearSelection);
   w.show();
   app.exec();
}

#include "main.moc" 
```

# c# - 从列名获取数据类型

> ID：11019700
> 
> 赞同：1
> 
> 时间：2012-06-13T16:56:23.063
> 
> 标签：c#, datatable, sqldatatypes, sql-view

我需要使用列名获取列的数据类型。我正在用 C# 编码。情况是我有一个将一些日期转换为 varchar 的视图，以便我可以更好地显示它们（准确地说，没有时间）。但是，这意味着列的数据类型现在不正确。我想做的是使用列名从 DataTable 模式中查找列，然后获取该列的数据类型。在这种情况下，我将从主表而不是视图中收集实际数据类型。想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:02:37.273

[`DataTable.Columns`](http://msdn.microsoft.com/en-us/library/system.data.datatable.columns.aspx)属性是 a [`DataColumnCollection`](http://msdn.microsoft.com/en-us/library/system.data.datacolumncollection.aspx)，可以通过[列名索引](http://msdn.microsoft.com/en-us/library/x9fyswbf.aspx)得到 a [`DataColumn`](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.aspx)，它有一个[`DataType`](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.datatype.aspx)属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:00:52.967

**information_schema.columns**表提供了比**sys.columns**表更清晰的信息。您可以尝试以下方法：

```
SELECT data_type, character_maximum_length
FROM information_schema.columns
WHERE table_name = 'tableName' AND column_name = 'columnName' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T16:59:20.363

如果不从值中推断类型，我看不出这是怎么可能的。如果您有来自视图的结果和代码中的列名，则有关视图使用的表的信息此时会丢失。

如果你知道它的名字，你当然可以得到关于这个表的信息；这可以使用这样的简单查询来完成：

```
SELECT TOP 0 * FROM <<tableName>> 
```

或使用 DMV：

```
SELECT * FROM sys.columns WHERE object_id = OBJECT_ID('<<tableName>>') 
```

在第一种情况下，您在 IDataReader 上使用 GetSchemaTable 并遍历行以按名称查找列；在第二种情况下，您可以遍历结果集本身并以这种方式找到您的列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T17:15:36.203

如果您使用的是 SQL Server，则可以使用 SET FMTONLY。它仅将元数据返回给客户端。它可用于测试响应的格式，而无需实际运行查询。

```
SqlCommand cmd = connection.CreateCommand();
cmd.CommandText = "SET FMTONLY ON; select column from table; SET FMTONLY OFF";
SqlDataReader reader = cmd.ExecuteReader();
SqlDbType type = (SqlDbType)(int)reader.GetSchemaTable().Rows[0]["ProviderType"]; 
```

礼貌：[堆栈溢出](https://stackoverflow.com/questions/7470258/how-to-get-the-sqltype-of-a-column-in-a-datatable)

# php - 加载从教义模型继承的类，使用教义查询

> ID：11019702
> 
> 赞同：0
> 
> 时间：2012-06-13T16:56:28.167
> 
> 标签：php, doctrine

我有 2 节课

```
Class form extends Baseform
{
        /* this is doctrine model class */
} 
```

下面是继承类

```
Class admissionForm extends form
{
        /* this is inherited class */
} 
```

我正在尝试使用**教义**查询查询数据库并搜索**表单**模型。根据我的结果，我想要**admissionForm**类的对象而不是**表单**类。

我曾尝试使用如下教义的**序列化**和**反序列化**函数，但它用表单类的实例替换**了 $admissionFormObj 。**

```
$admissionFormObj->unserialize($formObj->serialize()); 
```

# ios - 将 90 分钟添加到 NSDate

> ID：11019709
> 
> 赞同：18
> 
> 时间：2012-06-13T16:56:43.773
> 
> 标签：ios, time

这段代码有什么问题？

```
NSDate *matchDateCD = [[object valueForKey:@"matchDate"] description]; // from coredata NSDate
NSDate *add90Min = [matchDateCD dateByAddingTimeInterval:5400];

if ( matchDateCD >=[NSDate date] || add90Min <= matchDateCD )
{

    cell.imageView.image = [UIImage imageNamed: @"r.gif"];//Show image in the table

} 
```

如果比赛正在进行或持续 90 分钟，我需要在表格中显示此图像

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-13T19:37:38.900

我不知道`object`你调用`valueForKey:`的是什么，但假设它返回一个`NSDate`对象，你的额外调用`description`会将一个`NSString`（描述的返回值）分配给`matchDateCD`. 那不是你想做的。

这就是你想要做的：

```
NSDate *matchDateCD = [object valueForKey:@"matchDate"];
NSDate *add90Min = [matchDateCD dateByAddingTimeInterval:(90*60)]; // compiler will precompute this to be 5400, but indicating the breakdown is clearer

if ( [matchDateCD earlierDate:[NSDate date]] != matchDateCD ||
     [add90Min laterDate:matchDateCD] == add90Min )
{
    cell.imageView.image = [UIImage imageNamed: @"r.gif"];//Show image in the table
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-13T17:06:16.380

使用 NSDate 的 dateByAddingTimeInterval 方法将秒数添加到时间。

```
NSDate* newDate = [oldDate dateByAddingTimeInterval:90]; 
```

然后，您可以使用 NSDateFormatter 或 NSDateComponents 重新获取新的时间。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-09T15:01:43.877

您还可以设置小时、年、月和秒等

```
 NSDateComponents *components= [[NSDateComponents alloc] init];
    [components setMinute:30];
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDate *myNewDate=[calendar dateByAddingComponents:components toDate:[NSDate date] options:0]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-26T20:23:28.427

对于**斯威夫特 4**

要将 90 分钟添加到[日期](https://developer.apple.com/documentation/foundation/date)，请使用[addTimeInterval(_:)](https://developer.apple.com/documentation/foundation/date/1948745-addingtimeinterval)

```
let now = Date()
let minutes: Double = 90
let add90MinsDate = now.addingTimeInterval(minutes * 60) 
```

对于问题，下面的快速代码

```
if let matchDateCD: Date = objest.value(forKey: "matchDate") as? Date {
   let add90Min = matchDateCD.addingTimeInterval(90 * 60)
   if matchDateCD >= Date() || add90Min > matchDateCD {
        cell.imageView.image = UIImage(named: "r.gif")
   }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T17:17:49.283

日期是对象，所以比较指针不好。将它们转换为常见的时间间隔（浮点数）：

```
NSDate *now = [NSDate date];
NSDate *tenMinsLater = [now dateByAddingTimeInterval:600];

NSTimeInterval nowInterval = [now timeIntervalSinceReferenceDate];
NSTimeInterval *tenMinsLaterInterval = [tenMinsLater timeIntervalSinceReferenceDate];

if (nowInterval > tenMinsLaterInterval) NSLog(@"never get here"); 
```

或者，使用比较器：

```
// also false under newtonian conditions
if (now > [now laterDate:tenMinsLater]) NSLog(@"einstein was right!"); 
```

或使用 earlyDate: 或比较：

# c++ - 可以使用隐式构造函数初始化具有此向量成员的类吗？

> ID：11019711
> 
> 赞同：0
> 
> 时间：2012-06-13T16:56:53.483
> 
> 标签：c++, constructor, stdvector

我的班级需要一个`std::vector<MyType> my_list`有五个元素的成员。`MyType`s 应该使用它们的默认构造函数初始化。我必须为这个类编写一个显式的构造函数，还是可以不用它来解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:00:25.307

在 C++11 中，您可以执行以下操作并通过隐式生成的构造函数正确初始化向量：

```
class foo {
    std::vector<int> my_list { 1, 2, 3, 4, 5 };
}; 
```

没有 C++11，你必须自己写：

```
template <typename T, std::size_t N>
T* begin(T(&arr)[N]) { return &arr[0]; }

template <typename T, std::size_t N>
T* end(T(&arr)[N]) { return &arr[0] + N; }

class foo {
    // imitate initializer list
    static const int default_list[] = { 1, 2, 3, 4, 5 };
    std::vector<int> my_list;
public:
    foo() : my_list(begin(default_list), end(default_list)) {}
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:00:05.180

你需要自己写。编译器生成的构造函数将默认初始化`my_list`，这意味着它将为空。你需要这样的东西：

```
class MyClass {
    std::vector<MyType> my_list;

    MyClass() : my_list(5) {}
}; 
```

# php - CSV 文件在浏览器中打开内联而不是提示 DL

> ID：11019719
> 
> 赞同：2
> 
> 时间：2012-06-13T16:57:28.537
> 
> 标签：php, javascript, csv, export

所以我有一个 php 文件，它使用 fopen、fputcsv、fclose 和一个用于引导窗口打开所述 csv 文件的导出按钮的 javascript 函数创建一个 csv 文件。csv 文件被正确创建，但是当我点击导出按钮时，它只是在另一个选项卡中打开 csv 文件，其中只有原始数据。我一直在寻找（并期待）是提示下载或打开文件（然后我会用 excel 打开）。如果我保存现在打开的页面，它会在 excel 中正常打开，但它有来自 html 的标记（我不想要），所以我只是想看看是否有任何特别的东西可以解决这个问题。到目前为止，我已经在 ie9 和 firefox 中对其进行了测试。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:01:36.000

在发送输出之前您是否发送了适当的标头？

```
ob_clean();
header('Content-Type: text/csv');
header('Content-Disposition: attachment; filename="some_filename_' . date('Ymd') . '.csv"'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:59:17.730

将标头中的内容类型设置为 application/vnd.ms-excel

```
header("Content-type: application/vnd.ms-excel"); 
```

然后将您的文件发送回浏览器（这将强制它打开 excel）。如果要为 CSV 发送正确的内容类型，请将其设置为 text/csv

# c++ - 如何在 C++ 中反转字符串向量？

> ID：11019722
> 
> 赞同：3
> 
> 时间：2012-06-13T16:57:55.413
> 
> 标签：c++, string, printing, vector

我有一个字符串向量，我想反转向量并打印它，或者简单地说，以相反的顺序打印向量。我该怎么做呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T17:00:18.173

如果要以相反的顺序打印矢量：

```
#include <algorithm>
#include <iterator>
#include <iostream>
#include <vector>
#include <string>

std::copy(v.rbegin(), v.rend(), 
  std::ostream_iterator<std::string>(std::cout, "\n")); 
```

如果要反转向量，然后打印它：

```
std::reverse(v.begin(), v.end());
std::copy(v.begin(), v.end(),
  std::ostream_iterator<std::string>(std::cout, "\n")); 
```

如果要创建矢量的反向副本并打印：

```
std::vector<std::string> r(v.rbegin(), v.rend());
std::copy(r.begin(), r.end(),
  std::ostream_iterator<std::string>(std::cout, "\n")); 
```

最后，如果您更喜欢编写自己的循环而不是使用`<algorithm>`：

```
void print_vector_in_reverse(const std::vector<std::string>& v){
  int vec_size = v.size(); 
  for (int i=0; i < vec_size; i++){ 
    cout << v.at(vec_size - i - 1) << " ";
  }
} 
```

或者，

```
void print_vector_in_reverse(std::vector<std::string> v) {
  std::reverse(v.begin(), v.end());
  int vec_size = v.size();
  for(int i=0; i < vec_size; i++) {
    std::cout << v.at(i) << " ";
  }
} 
```

参考：

*   [http://en.cppreference.com/w/cpp/algorithm/reverse](http://en.cppreference.com/w/cpp/algorithm/reverse)
*   [http://en.cppreference.com/w/cpp/algorithm/copy](http://en.cppreference.com/w/cpp/algorithm/copy)
*   [http://en.cppreference.com/w/cpp/iterator/ostream_iterator](http://en.cppreference.com/w/cpp/iterator/ostream_iterator)
*   [http://en.cppreference.com/w/cpp/container/vector/rbegin](http://en.cppreference.com/w/cpp/container/vector/rbegin)

# sqlite - 使用 SQLite 替换文件系统

> ID：11019723
> 
> 赞同：0
> 
> 时间：2012-06-13T16:58:02.587
> 
> 标签：sqlite

我有一个将配置文件作为 XML 存储在磁盘上的应用程序。我想在崩溃等情况下降低数据文件损坏的风险。似乎常见的建议是使用 SQLite。

您对仅使用 BLOB 存储当前 XML 格式有何看法？该表如下所示：

```
CREATE TABLE t ( filename TEXT, filedata BLOB ) 
```

一方面，这似乎不优雅，但另一方面，它将避免将配置转换为适当格式的所有工作（和相应的错误）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:50:01.820

听起来效率低下。您需要加载和解析`BLOB`以获取配置值，并为每次更改保存整个配置文件。

我假设您切换到 SQLite 数据库的原因是事务机制将为您提供一定程度的崩溃容错能力。如果您将每个配置文件存储为一个，`BLOB`那么您需要在事务完成之前保存整个文件，而不是只保存应该更快的更新值。

此外，如果您使用基于 DOM 的 XML 解析器，您最终会同时将`BLOB`DOM 树和已解析的 DOM 树加载到内存中。取决于可能占用大量资源的配置文件的大小和数量。

恕我直言，您最好为每个配置文件创建一个表，其中每个配置值都有一行。您将获得更好的读/写性能、更少的内存使用并能够使用 SQLite 的所有关系机制。

# php - 高级 URL 参数

> ID：11019724
> 
> 赞同：1
> 
> 时间：2012-06-13T16:58:07.977
> 
> 标签：php, mod-rewrite, url-rewriting

我正在尝试整理我的网址。我有一个 mod_rewrite 可以找到以 '.php?slug=[some+text]' 结尾的文件并替换为 '/[some+text]'。然而，这并不能让您在一个 url 中存储多个变量而不会使它看起来很乱。

我试图编写一个 php 脚本，它的 url 看起来像：

```
.php?slug=search/this+is+a+search/tags/php+sql/page/2 
```

应该将其替换为

```
array(
   'search'->'this is a search',
   'tags'->'php sql',
   'page'->2
); 
```

我已经走到这一步了。

```
if(isset($_GET['slug'])&&$_GET['slug']!=''){
$url=$_GET['slug'];
$params=explode(DIRECTORY_SEPARATOR,$url);
print_r($params);
} 
```

这将返回：

```
Array ( 
  [0] => search
  [1] => this is a search
  [2] => tags 
  [3] => php sql 
  [4] => page 
  [5] => 2 
) 
```

如何将其转换为顶部的数组？有一个更好的方法吗？

我在玩耍后发现的一种方法是：

```
if(isset($_GET['slug'])&&$_GET['slug']!=''){
    $url=$_GET['slug'];
    $params=explode(DIRECTORY_SEPARATOR,$url);
    $out=array();
    $array_size = count($params);
    for($i = 0; $i < $array_size; $i+=2)
    {
        $key=$params[$i];
        $value=$params[$i+1];
        $out[$key]=$value;
    }
    print_r($out);

} 
```

这类作品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:05:49.643

我可能会使用 .htaccess 文件完成所有工作。

```
RewriteRule    ^([A-Za-z0-9]+)/?$    index.php?search=$1    [QSA]
RewriteRule    ^([A-Za-z0-9]+)/([A-Za-z0-9]+)/?$    index.php?search=$1&tags=$2    [QSA]
RewriteRule    ^([A-Za-z0-9]+)/([A-Za-z0-9]+)/([0-9]+)/?$    index.php?search=$1&tags=$2&page=$3    [QSA] 
```

然后你所要做的就是像这样访问每一个：

```
<?php
$search = $_GET['search'];
$tags = $_GET['tags'];
$page = $_GET['page'];
?> 
```

注意：[QSA] 意味着您仍然可以在整洁的 url 变量之后拥有凌乱的 url 变量。如果您想传递一个布尔值或一个 id 但不介意它是否看起来很乱，这很方便。

我知道这不是你问的问题，但你可能会发现这样更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:13:30.340

这将做到：

```
$params = array_combine(array_map(function($a) {return $a[0];},$tmp = array_chunk($params,2)),array_map(function($a) {return $a[1];},$tmp)); 
```

单线！

请注意，您实际上并没有取得任何成就。比较：

```
somefile.php?search=some+text&tags=php+sel&page=2
somefile/search/some+text/tags/php+sel/page/2 
```

除了删除扩展程序之外，您没有任何收获。您需要解析一个复杂的字符串，这只会让自己变得更难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:17:15.227

`/`您可以使用数组键的第一个值来破坏字符串。

```
//$url = $_SERVER['REQUEST_URI'];
//$url = $_GET['slug'];
$url = 'search/this+is+a+search/tags/php+sql/page/2';

preg_match_all('~([^/]+)/([^/]+)~', $url, $matches, PREG_SET_ORDER);

$values = array();
foreach($matches as $match)
{
    $values[$match[1]] = $match[2];
}

print_r($values); 
```

# servlets - 在浏览器上注销关闭spring mvc

> ID：11019725
> 
> 赞同：-1
> 
> 时间：2012-06-13T16:58:10.380
> 
> 标签：servlets, spring-mvc, spring-security, browser

当我关闭浏览器时，登录的人将自动需要注销。有什么解决办法吗。请帮我。我正在使用 Spring MVC。当我们关闭 gmail 的窗口时，我们会自动注销。有没有我们需要实现的特殊方法。任何人有想法请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:03:44.973

关闭浏览器将强制用户在返回 web 应用程序时再次登录。但这并不意味着它的会话会在服务器端自动关闭。这意味着会话cookie将被浏览器遗忘。

没有其他办法了。您无法控制客户端发生的事情。这就是会话超时的原因。

# google-chrome - 更改主干模板时Chrome不会刷新本地文件

> ID：11019727
> 
> 赞同：7
> 
> 时间：2012-06-13T16:58:22.743
> 
> 标签：google-chrome, backbone.js, underscore.js, google-chrome-devtools

我正在使用 Google Chrome (v19.0.1084.56) 上的主干应用程序，当我使用模板时，我（在 Mac OSX Lion 上）和另一个开发人员（在 Fedora 上）都必须关闭选项卡并重新打开文件看到新的变化。强制刷新（cmd+R 或 f5）不起作用。

我正在使用这些标志让 chrome 处理文件：

```
open /Applications/Google Chrome.app --args --allow-file-access-from-files --disable-web-security 
```

我对这个关闭/打开的过程让自己发疯了。有没有人遇到过这个问题，你有没有找到刷新文件的方法？

**更新：**商店中的另一位开发人员没有上述问题，并且使用的是 chrome 18 而不是 Fedora 上的 19。它开始看起来像一个 Chrome 错误。

**进一步更新：**还尝试`--disk-cache-size=1 --media-cache-size=1`在打开 Chrome 时使用 as 标志，但问题仍然存在。使用隐身模式也不起作用。但是，如果我手动转到`Tools > Clear Browsing History`并检查`Clear Browsing History`and`Empty the Cache`并点击刷新，模板将正确加载。这将其缩小到缓存问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T19:11:59.750

在谷歌搜索和研究之后，有一种方法可以禁用页面上的缓存。通过打开开发者控制台，在右下角有一个齿轮。在该菜单中有一个复选框`Disable Cache`，一旦启用，就可以解决问题。

# abstract-class - mongodb lift class Snippet 需要是抽象的

> ID：11019732
> 
> 赞同：0
> 
> 时间：2012-06-13T16:58:41.783
> 
> 标签：abstract-class, lift

我已经实现了一个基于 mongodb-record 的模型，我正在尝试编写表单以将数据（事件记录）存储到数据库中。

要存储的对象的片段是：

```
class eventSnippet extends StatefulSnippet with PaginatorSnippet[event] {

  var dispatch: DispatchIt = {
    case "editForm" => editForm _
  }

  var editingevent = event.createRecord

  def editForm(xhtml: NodeSeq): NodeSeq = {
        ("#editName" #> editingevent.title.toForm &
         "#editDescription" #> editingevent.description.toForm &
         "#editDT" #> editingevent.date_time.toForm &
         "#editCat" #> editingevent.category.toForm &
         "#editPrivacy" #> editingevent.privacy.toForm &
          "type=submit" #> SHtml.submit(?("Save"), () => save )).apply(xhtml)
  }

  def save = {
    editingevent.save
    redirectToHome
  }} 
```

错误是：

```
class eventSnippet needs to be abstract, since:
[error] method page in trait Paginator of type => Seq[code.model.event] is not defined
[error] method count in trait Paginator of type => Long is not defined 
```

当我将类更改为抽象时，它可以编译，但在浏览器上出现错误：

```
Message: java.lang.InstantiationException
sun.reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:30)
java.lang.reflect.Constructor.newInstance(Constructor.java:513) 
```

我正在使用 sbt 0.7.5 和 Scala 2.9.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:23:54.890

Lift 需要为您的代码段创建实例，因此它不能是抽象的。

我在您的代码段中看不到任何需要分页的内容。您应该简单地删除`with PaginatorSnippet[event]`而不是使类抽象。

如果确实需要分页，则必须提供`page`和`count`方法的实现。

```
class eventSnippet extends StatefulSnippet with PaginatorSnippet[event] {
  def page: Seq[event] = // return itemsPerPage events, starting at curPage*itemsPerPage

  def count: Long = // return total count of events.

  // ...
} 
```

# c# - 如何对异常错误进行分类？

> ID：11019734
> 
> 赞同：4
> 
> 时间：2012-06-13T16:58:48.843
> 
> 标签：c#, exception, globalization

我有这个以消费者为目标的应用程序，它内置了错误报告。有时我会收到有关异常的错误报告，`the remote name could not be resolved` 例如 google.com 等主机名。这显然不是我的应用程序的问题，而是用户端的问题。

我如何在我的应用程序中对某些异常进行分类，而不是提供发送错误报告，而是显示一个对话框，建议用户检查他/她的某些事​​情。还要考虑到用户已本地化 .NET 框架安装这一事实。（以他们的语言显示的错误消息）

编辑：这真的不是关于`SQLException`从中分离的问题`WebException`，更多的是我如何从 WebException 确定类型`remote name could not be resolved`的 WebException`The operation has timed-out`例如。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:00:01.757

在 WebException 的情况下，您可以确定错误是 HTTP 错误（即：404）还是不使用“状态”属性。

```
catch (WebException ex)
{
    if (ex.Status != WebExceptionStatus.ProtocolError)
       // in this case it was probably a connection issue
} 
```

[您可以在此处](http://msdn.microsoft.com/en-us/library/system.net.webexceptionstatus.aspx)找到有关 WebExceptionStatus 枚举的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:46:02.783

我强烈建议您查看[Enterprise Library Exception Handling Application Block](http://msdn.microsoft.com/en-us/library/ff664698%28v=pandp.50%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:04:29.737

您想将 try/catch 语句与多个 catch 块一起使用：

```
try { ... connect... }
catch(SocketException ex) { 
  switch(ex.ErrorCode)
  {
    case 123: ....
    default: ....
  }
}
catch(WebException ex) { 
  if(ex.InnerException is SocketException)
  {
    switch(((SocketException)ex.InnerException).ErrorCode)
    {
      case 123: ....
      default: ....
    }
  }
  switch(ex.Status)
  {
    case 500: ....
    default: ....
  }
}
....
catch(Exception ex) { .... something unforeseen, send error report .... } 
```

基本上，这些异常中的每一个都*应该*包含属性中的附加信息，您可以在不依赖字符串比较的情况下检查这些信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T17:06:09.450

在可能的情况下按类型捕获异常（和内部异常，如果需要）或者当没有足够具体的类型时，另外检查消息或任何其他异常详细信息（错误代码/编号/等）然后通过触发正确的用户来适当地处理这种情况 -面对对话。

函数的一些伪代码：

```
public UserError DoStuff()
{
 try
 {
  // some web code
  // some sql code
 }
 catch (WebException webEx)
 {
   if (webEx.Message.Contains("SSL"))
   {
     return new UserError { Type = ErrorType.SSL };
   }

   return new UserError { Type = ErrorType.Web };
 }
 catch (SqlException sqlEx)
 {
    return new UserError { Type = ErrorType.SQL };
 }
} 
```

# java - 使用新常量会破坏我的 android 应用程序吗？

> ID：11019735
> 
> 赞同：3
> 
> 时间：2012-06-13T16:58:48.780
> 
> 标签：java, android

我正在使用以下方法检查视图内屏幕的方向：

```
getResources().getConfiguration().orientation 
```

新版本的 Android 提供了更多的方向状态，所以我正在考虑使用一个开关来处理我想要处理的所有状态。

```
switch (getResources().getConfiguration().orientation) {
    case ActivityInfo.SCREEN_ORIENTATION_PORTRAIT:
    case ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT:
    case ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE:
    case ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE:
} 
```

现在，这会破坏旧设备上的应用程序吗？鉴于某些常量对于 API 9+ 来说是新的？我不确定，因为我不确定`final static`编译器如何处理常量 ( )。它们是内联的还是引用的？我认为如果它们是内联的，那么这种方法应该没有问题。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:01:25.837

> 现在，这会破坏旧设备上的应用程序吗？

如果您按照自己的方式使用它们，则不会。Java 编译器将在编译时将符号替换为其数字等价物。

但是，您无法通过在旧设备上进行反射来获得这些值，尽管这将是一种相当不寻常的技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:17:22.250

不，额外的情况不会破坏您的申请，因为

1.  更改将在编译时添加额外的案例
2.  在运行时会确定这种情况。
3.  这就像一个额外的条件。

# c# - 显示与表格中的数字不同的数字？

> ID：11019738
> 
> 赞同：-2
> 
> 时间：2012-06-13T16:58:57.057
> 
> 标签：c#, asp.net, wpf

我有一个 C# 程序，它显示了一个患者列表，其中列出了护士要注意的药物冲突。表中有严重级别 1、2、3 和 9。但是如果有一个“9”，我们想显示一个“U”表示未知。我可以在这里做吗？

```
 //var warnings = new List<POWarningsDetail>();
        while (r != null && r.Read())
        {
            war.ConflictDesc = r.To("CONFLICT_DESC", "");
            war.SeverityLevel = r.To("SEVERITY_LEVEL", "");
        }
    });

}
warnings = warnings.Where(w => w.ConflictDesc != null && w.ConflictDesc != string.Empty).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:02:30.173

您可能应该在您的 UI 层 - 网页或 WPF 视图中完成此操作。你可以使用类似的东西：

```
label.Text = warning.SeverityLevel == 9 ? "U" : warning.SeverityLevel.ToString(); 
```

# javascript - jQuery递归淡入功能

> ID：11019741
> 
> 赞同：2
> 
> 时间：2012-06-13T16:59:08.227
> 
> 标签：javascript, jquery

我正在尝试为徽标制作动画。标记如下所示：

```
<div id="logo">
    <h1>
        <span>A</span><span>n</span><span>t</span><span>o</span><span>n</span><span>i</span><span>o</span><span>R</span><span>o</span><span>s</span><span>s</span><span>i</span>
    </h1>
    <h2>composer</h2>
</div> 
```

我要做的是为每个`<span>`inside制作淡入效果`#logo`。为此，我正在使用以下代码：

```
function fadeInRecursive (elementToFade) {

    if (!elementToFade) {
        elementToFade = $('#logo span:first-child')
    }

    var next = elementToFade.next('#logo span')

    if (!next) {return false}

    elementToFade.animate({
        opacity: 1
    }, 3000, fadeInRecursive(next))
}

$(document).ready( fadeInRecursive ) 
```

但是 Firefox 崩溃了...

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:12:52.570

这是一个通用函数，它将一个接一个地淡入选择器中的每个项目：

```
function fadeInSuccessive(selector, t) {
    var items = $(selector);
    var index = 0;

    function next() {
        if (index < items.length) {
            items.eq(index++).fadeIn(t, next);
        }
    }
    next();
}

fadeInSuccessive("#logo span", 1000); 
```

还有一个工作演示：http: [//jsfiddle.net/jfriend00/vzgBd/](http://jsfiddle.net/jfriend00/vzgBd/)

这实际上并没有使用递归（尽管它可能看起来像），因为连续调用`next()`发生在一段时间后由动画的完成触发，并且当它被调用时，先前的调用`next()`已经完成，所以它在技术上不是递归.

* * *

这是一个更通用的实现，作为 jQuery 方法完成：

```
$.fn.fadeInSuccessive = function(t, fn) {
    var index = 0;
    var self = this;

    function next() {
        if (index < self.length) {
            self.eq(index++).fadeIn(t, next);
        } else {
            if (fn) {
                fn.call(self);
            }
        }
    }
    next();
}

$("#logo span").fadeInSuccessive(1000, function() {
    $(document.body).append("<br>Done!");
}); 
```

一个工作演示：http: [//jsfiddle.net/jfriend00/zTURy/](http://jsfiddle.net/jfriend00/zTURy/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:11:15.933

您可以通过将元素放入[队列](http://api.jquery.com/queue/)来避免递归：

```
$("#logo span").each(function(n, e) {
    $(e).hide();
    $("#logo").queue(function() { $(e).fadeIn(function() { $("#logo").dequeue()}) });            
}); 
```

[http://jsfiddle.net/YmVrQ/](http://jsfiddle.net/YmVrQ/)

这是一种“递归”方法：

```
function fadeInRecursive (elems) {
    if (elems)
        $(elems.shift()).fadeIn(function() { fadeInRecursive(elems) });
}

fadeInRecursive($.makeArray($("#logo span"))); 
```

或者本着 jfriend00 发布的精神：

```
var n = 0;
(function () { $("#logo span").eq(n++).fadeIn(arguments.callee) })(); 
```

# ruby-on-rails - 运行 'bundle install' 时，bundler 会尝试安装已在本地安装的 gem

> ID：11019742
> 
> 赞同：0
> 
> 时间：2012-06-13T16:59:08.803
> 
> 标签：ruby-on-rails, rubygems, bundler

捆绑器尝试安装“nokogiri”gem 时遇到了一些问题，所以我们继续使用“gem install nokogiri”手动安装它——这是在 RVM ruby​​ 中，并使用本机扩展安装。

现在，当运行“捆绑安装”时，捆绑似乎仍在尝试安装 nokogiri！我看到它说当 bundle 运行时，它首先在本地检查 gems，为什么这不会发生？

更新：

我们正在使用 Capistrano 进行部署，当我覆盖 'bundle:install' 任务以仅运行 'gem list --local' 时，我得到以下输出：

```
 * executing "gem list --local"
    servers: ["myServer"]
    [myServer] executing command
 ** [out :: myServer] actionmailer (3.2.3, 3.0.11, 2.3.5)
 ** [out :: myServer] actionpack (3.2.3, 3.0.11, 2.3.5)
 ** [out :: myServer] activemodel (3.2.3, 3.0.11)
 ** [out :: myServer] activerecord (3.2.3, 3.0.11, 2.3.5)
 ** [out :: myServer] activeresource (3.2.3, 3.0.11, 2.3.5)
 ** [out :: myServer] activesupport (3.2.3, 3.0.11, 2.3.5)
 ** [out :: myServer] bundler (1.0.22, 1.0.21 ruby)
 ** [out :: myServer] capistrano (2.12.0)
 ...
 ** [out :: myServer] nokogiri (1.4.3.1)
 ...
    command finished in 863ms 
```

因为，在我们的 Gemfile 中，require 看起来像：

```
gem "nokogiri", "= 1.4.3.1" 
```

在我看来，安装了正确的 gem 版本。但是当回到标准的 'bundle:install' 任务时，输出包括：

```
 * executing "cd /path/to/releases/20120619165617 && bundle install --gemfile /path/to/releases/20120619165617/Gemfile --path /path/to/shared/bundle"
    servers: ["myServer"]
    [myServer] executing command
 ** [out :: myServer] Fetching source index for http://rubygems.org/
 ** [out :: myServer] Using rake (0.9.2.2)
 ** [out :: myServer]
 ** [out :: myServer] Using activesupport (2.3.5)
 ** [out :: myServer]
 ** [out :: myServer] Using rack (1.0.1)
 ** [out :: myServer]
 ** [out :: myServer] Using actionpack (2.3.5)
 ** [out :: myServer]
 ** [out :: myServer] Using actionmailer (2.3.5)
 ** [out :: myServer]
 ** [out :: myServer] Using activerecord (2.3.5)
 ** [out :: myServer]
 ** [out :: myServer] Using activeresource (2.3.5)
 ...
 ** [out :: myServer] Installing nokogiri (1.4.3.1)
 ** [out :: myServer] with native extensions
 ** [out :: myServer]
 ** [out :: myServer] ←[33mGem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
 ** [out :: myServer] 
```

# jquery - 使用 jquery 更改输入的大小

> ID：11019746
> 
> 赞同：5
> 
> 时间：2012-06-13T16:59:18.283
> 
> 标签：jquery, html, dom

我有以下输入：

```
<input id="input_2_2" 
       class="medium" 
       type="file" 
       tabindex="4" 
       size="20" 
       value="" 
       name="input_2"> 
```

我无权访问 HTML，因此我想应用 jQuery 将大小更改为“60”。

请问有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-13T17:01:32.903

您可以使用以下[`.attr`](http://api.jquery.com/attr/)方法：

```
$('#input_2_2').attr('size',60); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:01:51.713

用这个：

```
$("#input_2_2").attr("size", "60"); 
```

我相信这应该工作..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T17:03:35.703

`$("input_2_2").attr("size", "60");`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T17:02:32.417

使用[**attr();**](http://api.jquery.com/attr/)

像这样：

`<input id="input_2_2" class="medium" type="file" tabindex="4" size="20" value="" name="input_2">`

`$("#input_2_2").attr("size","60");`

或者，您可以设置`width`元素的，在我看来它更好。

# reporting-services - ssrs 订阅不支持路径格式

> ID：11019752
> 
> 赞同：0
> 
> 时间：2012-06-13T16:59:46.680
> 
> 标签：reporting-services

我为一份报告创建了一个 SSRS 标准订阅。在订阅的预定时间之后，我收到一条消息，如“写入文件 \D:\testexcels\FirstReport.html 失败：不支持给定路径的格式。” 在报表管理器订阅页面中。sql server 作业成功，在创建时输入路径时没有错误。我尝试过使用 pdf、html 等不同格式，但同样的错误正在出现。请帮助我。

![在此处输入图像描述](../Images/fdb735240eb05af73fbbbc5920c2f5aa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:14:16.190

D 前面的反斜杠不正确。应该只是`D:\testexcels\FirstReport.html`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:23:42.993

尝试给出这样的路径（UN\ServerName\ShareName\FileName）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-04T21:15:17.453

**如何为 ssrs 报告订阅提供正确的 UNC 路径**

转到窗口

按窗口键和 R

输入\ **DEVI** \C$

并输入 -- **DEVI**是我的本地机器名称，您的 PC 名称将不同

您的目标路径将像这种格式。 **\Devi\c$\Users\Abhirup Subba\DestinationFolder**

从那里转到您要保存文件的特定路径并将整个路径复制到订阅

**确保您的目标文件夹应授予对文件的完全访问权限 .. 像分享给所有人..**

# php - PHP文件时间不更新

> ID：11019753
> 
> 赞同：1
> 
> 时间：2012-06-13T16:59:49.833
> 
> 标签：php, filesystems, lastaccesstime

我个人知道有限的 PHP，但是我有一个由另一个提供的脚本，我稍微调整了一下

```
<?php

function getFiles($dir)
{
    $arr=scandir($dir);
    $res=array();
    foreach ($arr as $item)
    {
        if ($item=='..' || $item=='.'){continue;}
        $path=$dir.'/'.$item;
        if (is_dir($path))
        {
            $res=array_merge($res,getFiles($path));
        }
        else
        {
            $res[$path]=fileatime($path);
        }
    }
    return $res;
}

 $files=getFiles(dirname('Manuals'));
 arsort($files);
 $files=array_slice(array_keys($files),0,11);
 foreach ($files as $file)
 {
 $URL=$file;
 $file = trim(substr($file, strrpos($file, '/') + 1));
 $file = str_replace(".pdf", "", $file);
     echo '<!--<li style="margin-left: -25px; white-space: pre;">--><a href="'.$URL.'" title="'.$file.'">'.$file.'</a><br />';
 }

?> 
```

在 "$res[$path]=fileatime($path);" 中将前一个 filemtime 更改为 fileatime

据我所知，这应该显示上次访问文件的时间，但它的功能似乎与 filemtime 或 filectime 没有什么不同。也许服务器没有更新访问时间？（所有文件均为 html、php 和 pdf）

知道这是否是权限问题吗？服务器的事？代码的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:07:03.490

您可能会看到以下两种效果之一：

*   在许多 web 服务器上，承载 web 数据的文件系统被挂载`noatime`以节省每次请求更新的昂贵 IO。

*   PHP 的 fstat 缓存往往有自己的生命：用它`clearstatcache()`来克服这个问题。

# tfs - 告诉文件何时在 TFS 中签出？

> ID：11019756
> 
> 赞同：7
> 
> 时间：2012-06-13T16:59:52.977
> 
> 标签：tfs, version-control, vcs-checkout

我们有一个奇怪的问题，我们需要找出顾问签出文件的时间。有没有办法在 TFS 或 VS2008 中做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-13T19:39:35.643

[http://msdn.microsoft.com/en-us/library/9s5ae285%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/9s5ae285%28v=vs.90%29.aspx)

简而言之：TF.exe 状态 /format:detailed /user:someone

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:51:56.990

如果您只想知道退房时间，可以使用 TFS 中的电子邮件通知功能。这意味着，如果有人签出文件，将会有一封电子邮件发送给您，并告诉您签出时间、操作员等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T02:07:25.237

下载并安装 TFS 电动工具。然后从您的源代码管理资源管理器中，您可以右键单击您的代码/解决方案文件夹，应该有一个“在源代码管理中查找”选项，然后是“状态”。选择它，您将能够查询所有签出的文件或某个用户​​签出的文件。

# objective-c - NSDateComponents 工作日不显示正确的工作日？

> ID：11019761
> 
> 赞同：3
> 
> 时间：2012-06-13T17:00:09.747
> 
> 标签：objective-c, ios, ios5, nsdate, nsdatecomponents

我得到了一个 NSDate，例如 1/6 -12（星期五），并试图找出它是星期几。我的一周从星期一开始，所以星期五应该是工作日 5。

```
 NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    [calendar setFirstWeekday:2];
    NSDateComponents *components = [calendar components:NSWeekdayCalendarUnit fromDate:firstOfJulyDate];
    NSLog(@"weekday %i",components.weekday); 
```

输出：工作日 6

不管我将 setFirstWeekday 设置为什么，输出始终为 6。我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T17:09:12.027

尝试做这样的事情：

```
NSCalendar *gregorian = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
[gregorian setFirstWeekday:2]; // Sunday == 1, Saturday == 7
NSUInteger adjustedWeekdayOrdinal = [gregorian ordinalityOfUnit:NSWeekdayCalendarUnit inUnit:NSWeekCalendarUnit forDate:[NSDate date]];
NSLog(@"Adjusted weekday ordinal: %d", adjustedWeekdayOrdinal); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-13T19:54:32.510

正如 NSDateComponents 的文档所说：

> 工作日单位是数字 1 到 n，其中 n 是一周中的天数。例如，在公历中，n 为 7，星期日由 1 表示。
> 
> 此值在使用它的日历的上下文中进行解释 - 请参阅日期和时间编程指南中的“日历、日期组件和日历单位”。

如果您查看 NSGregorianCalendar，正如预期的那样，它将 1-7 的含义定义为 Sunday-Saturday。

调用 setFirstWeekday:2 意味着你的星期从星期一开始，用于计算这是否是本月的第二周等。这并不意味着你的星期一突然变成星期日。2012 年 6 月 1 日仍然是星期五，而不是星期四，所以你得到 6，而不是 5。

如果您想知道从一周开始算起多少天，而不是工作日，这很容易：

```
(components.weekday - calendar.firstWeekday + 1) % 7 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-03T02:02:21.167

**NSDateComponents**不会自动同步所有组件，例如：

```
NSDate *date = [NSDate date];
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *component = [calendar components:NSDayCalendarUnit|NSMonthCalendarUnit|NSWeekdayCalendarUnit fromDate:date];

currentMonth = component.month;

// printing the next 3 month's start dates MUST have the setYear! 

for (int i = currentMonth; i < currentMonth + 3; i++) {

    [components setDay:1];
    [components setMonth:i];
    [components setYear:2014];

    NSDate *newDate = [calendar dateFromComponents:components];

    NSDateComponents *components2 = [calendar components:NSDayCalendarUnit |NSMonthCalendarUnit | NSWeekdayCalendarUnit fromDate:newDate];

    monthInt = [components2 month];
    weekIndex = [components2 weekday];
} 
```

确保为跨入下一年的日期编写代码（在循环之前包含一个简单的 if 语句）

# php - 一键获取产品的 shopify Metafields

> ID：11019763
> 
> 赞同：20
> 
> 时间：2012-06-13T17:00:15.637
> 
> 标签：php, shopify

我一直在尝试为 100 多种产品获取元字段，这意味着我必须为每种产品分别进行 100 次 API 调用。如果有一种方法可以在一个 xml 文件中获取所有产品的所有元字段，就像变体附加到产品的方式一样。因此，通过一次 api 调用，我获取了所有 100 个产品，而不是为每个产品进行 100 个单独的 api 调用。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T19:55:21.860

如果在 API 文档中提到它会很好。什么都没有

> 接收所有元字段的列表 GET /admin/metafields.json?since_id=721389482

表示它只会返回商店元字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:31:45.210

我们有很多请求在同一个请求中获取多个资源的元字段。然而，其中很多可以通过将信息保存在应用程序端（例如，在数据库中）以及资源的 id 来处理。通过这种方式，数据更接近使用它的位置。

使用元字段有两个很好的理由

*   存储元数据以从流动模板中使用
*   应用程序之间的共享存储

液体模板的元字段非常棒，因为数据接近用于页面渲染的位置。这使得呈现速度更快且更可定制，因为自定义字段可以由应用程序提供并在店面中呈现。

应用程序之间的共享存储是使用元字段的另一个好理由，但这似乎不是使用元字段的常见原因。在这种情况下，元字段 API 目前缺少一种同时访问多个资源上的元字段的方法。

但是，将元数据与产品一起返回并不是一个很好的选择。这是因为其他应用程序可能会将数据存储在您的应用程序可能不关心的元字段中，因此一个应用程序最终可能会减慢许多甚至不使用元字段的其他应用程序的速度。这就是为什么元字段 API 具有查询参数来限制检索哪些元字段，因此不会不必要地返回其他应用程序的元字段。

# ios - 如何在 CALayer 中使用 UITextField？

> ID：11019768
> 
> 赞同：0
> 
> 时间：2012-06-13T17:00:38.793
> 
> 标签：ios, uitextfield

我想在 CALayer 中添加一个文本字段，但我没有等待。

代码：

```
-(void)drawInContext:(CGContextRef)ctx
{        
    NSLog(@"OK");
    UITextField *field = [[UITextField alloc] initWithFrame:CGRectMake(0,120, self.frame.size.width, 100)];
    [field setText:@"Test"];
    [self addSublayer:field.layer];
} 
```

任何想法，建议，良好做法:) ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:44:18.897

您无法设法将作为 UIView 的子类的 UITextField 放置为 CALayer 的子（子层），它需要一个具有 CALayer 祖先的对象。

但是，您当然可以找到 CALayer 的 superview，它继承 UIView 并将 UITextField 放在显示时间的好位置，并将 CALayer 设置为 UITextField 的委托以在您键入时保持内容同步（请参阅 UITextFieldTextDidChangeNotification通知或 -textFieldDidEndEditing：UITextField 中的委托方法）。

这是它在 Quartz Composer 中的样子（使用 Cocoa，而不是 Cocoa Touch）

![Quartz Composer 处于编辑模式](../Images/a19b99ccc05365a7148d46b003e90d94.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T14:39:03.810

> 好的做法:)？

在我看来，这是一种不好的做法。层比视图低，你不应该像这样混合它们。[如this question](https://stackoverflow.com/q/21728564/608157)所示，这样做可能会产生您没有想到的后果/副作用。

您应该去所有更高的级别并跳过层的想法，只需将 UITextView 放入视图中，或者去所有较低的级别并将 CATextLayer 放入图层中。请注意，CATextLayer 仅用于绘图，不用于编辑。如果您需要 UITextField 的行为，包括成为第一个响应者的能力（即支持键盘输入），那么更好的解决方案是坚持使用视图。

* * *

作为旁注：将视图添加到图层的*位置*是*非常糟糕的*做法。绘图方法如`drawInContext:`和`drawRect:`应该用于*绘图*。这些方法可能会被调用很多很多次，在这种情况下，您最终会在彼此之上添加很多很多视图/层。

# ios - CoreData - 改变关系的一侧是否会影响另一侧

> ID：11019772
> 
> 赞同：1
> 
> 时间：2012-06-13T17:00:45.807
> 
> 标签：ios, core-data, relationship

我在 Animal 和 Exhibit 之间有一对多的关系。一个展品可以包含许多动物。

1.  更换动物展品会自动改变另一边并将动物从展品中移除，还是我也应该从另一边做？
2.  设置是否`exhibit.animals = nil`会删除所有关系？

谢谢

沙尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:46:46.020

1.  是的，如果您在 Exhibit 和 Animal 之间有反向关系
2.  是的，它会删除所有的关系，但它是否删除展览本身，取决于删除规则。

# windows - 使用 MSTSCLib 时如何找到远程桌面会话 ID

> ID：11019780
> 
> 赞同：0
> 
> 时间：2012-06-13T17:01:20.870
> 
> 标签：windows, api, remote-desktop, rdp, mstsc

我正在尝试编写一个远程桌面客户端以在我的测试环境中使用。

目标是第一次登录到计算机（新虚拟机），让用户配置文件和第一次登录期间发生的所有事情发生，然后注销。

我能够使用 MSTSCLib/AxMsRdpClient6NotSafeForScripting 接口创建会话并以用户身份登录到计算机。

现在我想使用 WTSLogoffSession 函数将用户从计算机上注销（不仅仅是断开连接）。但是这个函数需要会话 ID，我不知道如何为在 RdpClient 接口中运行的当前会话找到它。

您在哪里/如何在您创建的 RDP 会话中找到会话的会话 ID？看起来这应该是一个属性或在某个地方很容易找到的东西，但我在任何地方都找到了它。

我假设当给出一个简单的解决方案时我会打自己的头，但到目前为止它一直在避开我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:21:47.380

我认为不可能从 RDP 控制接口获取会话 ID（我已经尝试过并且希望被证明是错误的！）。您最好的选择可能是使用[WTSEnumerateSessions](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383833%28v=vs.85%29.aspx)和[WTSQuerySessionInformation](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383838%28v=vs.85%29.aspx)（使用 WTSInfoClass = WTSSessionInfo 从[WTSINFO 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/bb736370%28v=vs.85%29.aspx)中获取登录时间）或使用像[Cassia](https://code.google.com/p/cassia/)这样的包装库（如果您使用的是 .NET 语言和不想处理 P/Invokes）。

# c++ - SFINAE 不适用于 llvm/clang

> ID：11019781
> 
> 赞同：0
> 
> 时间：2012-06-13T17:01:25.417
> 
> 标签：c++, c++11, clang, sfinae

在下面的代码中，我试图用它作为参数的任何参数来调用仿函数，“whatever”是一组有限的选项（这里的两个不是我的代码中唯一的选项）。

```
#include <memory>
#include <iostream>

template<class T>
struct call_with_pointer {
    // last resort: T*
    template<class Callable>
    static auto call(Callable &callable, const std::shared_ptr<T> &param) -> decltype(callable(param.get())) {
        return callable(param.get());
    }
};

template<class T>
struct call_with_shared : public call_with_pointer<T> {

    // best: call with shared_ptr<T>.
    // SFINA
    // error: Candidate template ignored: substitution failure [with Callable = Test]: no matching function for call to object of type 'Test'
    template<class Callable>
    static auto call(Callable &callable, const std::shared_ptr<T> &param) -> decltype(callable(param)) {
        return callable(param);
    }

    using call_with_pointer<T>::call;
};

class Test {
public:
    bool operator () (int * x) {
        return *x == 42;
    }
};

int main ()
{
    Test t;

    auto i = std::make_shared<int>(4);

    auto x = call_with_shared<int>::call(t, i); // No matching function for call to 'call'

    return 0;
} 
```

此代码在 VS 和[GCC](http://ideone.com/5pkSf)中运行良好。不幸的是，它没有叮当声。错误信息是：

> 呼叫“呼叫”没有匹配的功能
> 
> 候选模板被忽略：替换失败 [with Callable = Test]：没有匹配的函数调用类型为“Test”的对象

所以它忽略了使用智能指针的候选者。好的。但它似乎并没有继续考虑可以正常工作的继承调用。

*问题：我该如何解决这个问题？我怎样才能让 llvm 在这里做正确的事情？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:27:10.363

尝试以下操作：

```
template<class T>
struct call_with_pointer {
    // last resort: T*
    template<class Callable>
    static auto call(Callable &callable, const std::shared_ptr<T> &param) -> decltype(callable(param.get())) {
        return callable(param.get());
    }
};

template<class T>
struct call_with_pointer_2 {
    // last resort: T*
    template<class Callable>
    static auto call(Callable &callable, const std::shared_ptr<T> &param) -> decltype(callable(param)) {
        return callable(param);
    }
};

template<class T>
struct call_with_shared : public call_with_pointer<T>, public call_with_pointer_2<T>{
    using call_with_pointer<T>::call;
    using call_with_pointer_2<T>::call;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:17:49.903

严格来说，clang 是对的，因为 C++11 的 7.3.3p15（继承函数模板的 using 声明被忽略，因为它与派生类的成员函数模板具有相同的名称和参数）。尽管很明显该段在不考虑这些不冲突的声明方面存在缺陷。

您可以通过在其中一个模板中使用类似于`typename YieldFirstType<std::shared_ptr<T>, Callable>::type` 第二个参数类型的东西来解决它。

# ruby-on-rails - 使用 rails active_record 'includes' 会根据包含的内容更改 has_many 属性访问器的结果

> ID：11019788
> 
> 赞同：2
> 
> 时间：2012-06-13T17:01:49.160
> 
> 标签：ruby-on-rails, activerecord

我有一个`Project`和`User`模型，它们通过一个`Permission`带有 has_many 多态关联的模型连接。权限表还跟踪挂起状态。相关设置如下：

```
class Project < ActiveRecord::Base
  has_many :permissions, as: :permissionable
  has_many :contributors, through: :permissions, source: :user
  has_many :pending_contributors, through: :permissions, source: :user, conditions: '"permissions"."accepted" = false'
  ...
end

class Permission < ActiveRecord::Base
   belongs_to :user
   belongs_to :permissionable, polymorphic: true
   ...
end

class User < ActiveRecord::Base
  has_many :permissions
  has_many :projects, through: :permissions, source: :permissionable, source_type:'Project'
  ...
end 
```

我正在尝试访问项目中的贡献者和 pending_contributors 列表，而不会在渲染所有项目时导致 N+1 查询问题。问题是我不能使用`includes(:contributors, :pending_contributors)`，因为首先提到的两者中的任何一个都是唯一有效的。

例如在我的 Rails 控制台中：

```
u = User.find(2)
u.projects.includes(:contributors, :pending_contributors).each do 
  |p| puts p.contributors.map(&:id).inspect
end 
```

在我的 rails 控制台中的结果是：

```
User Load (0.7ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
Project Load (1.3ms)  SELECT "projects".* FROM "projects" INNER JOIN "permissions" ON "projects"."id" = "permissions"."permissionable_id" WHERE "permissions"."user_id" = 2 AND "permissions"."permissionable_type" = 'Project'
Permission Load (1.1ms)  SELECT "permissions".* FROM "permissions" WHERE "permissions"."permissionable_type" = 'Project' AND "permissions"."permissionable_id" IN (64, 56, 54, 53, 51, 50, 61, 62, 63, 57, 65, 66, 48, 49, 67, 68, 69, 70, 71, 60, 72, 16, 14, 11)
User Load (0.7ms)  SELECT "users".* FROM "users" WHERE "users"."id" IN (2, 18, 20, 41, 40, 3, 17, 34, 37, 39, 43, 19, 22, 42) 
```

前三个结果是：

```
[2, 18, 20, 2]
[2]
[41, 2, 40, 18] 
```

现在交换包含的顺序如下：

```
u = User.find(2)
u.projects.includes(:pending_contributors, :contributors).each do 
  |p| puts p.contributors.map(&:id).inspect
end 
```

结果突然发生了变化（产生了我预期的结果）-注意权限加载行，它现在将 :pending_contributors 条件添加到该查询中：

```
User Load (0.8ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
Project Load (1.1ms)  SELECT "projects".* FROM "projects" INNER JOIN "permissions" ON "projects"."id" = "permissions"."permissionable_id" WHERE "permissions"."user_id" = 2 AND "permissions"."permissionable_type" = 'Project'
Permission Load (1.4ms)  SELECT "permissions".* FROM "permissions" WHERE "permissions"."permissionable_type" = 'Project' AND "permissions"."permissionable_id" IN (64, 56, 54, 53, 51, 50, 61, 62, 63, 57, 65, 66, 48, 49, 67, 68, 69, 70, 71, 60, 72, 16, 14, 11) AND ("permissions"."accepted" = false)
User Load (0.8ms)  SELECT "users".* FROM "users" WHERE "users"."id" IN (18, 19, 40, 3, 22, 43, 42, 41, 2, 20) 
```

结果是：

```
[20]
[]
[41, 40, 18] 
```

如果我不是访问pending_contributors，而是访问贡献者，我会反过来遇到同样的问题。我很确定这是因为 pending_contributors 和贡献者都使用相同的来源，但我不确定为什么这是一个问题。

有没有办法呈现所有项目并访问贡献者，以及每个项目的 pending_contributors 而不会导致 N+1 查询？

注意：我在 Rails 3.2 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:20:49.937

看起来您通过尝试将同一表中的两组重叠行加载到不同的关联中来混淆 ActiveRecord。

由于`pending_contributors`关联包含在 中`contributors`，因此我不会将其设为单独的关联，尤其是如果您要像这样并排使用它们。

相反，我将定义`pending_contributors`为贡献者的过滤器：

```
class Project < ActiveRecord::Base
  has_many :permissions, as: :permissionable
  has_many :contributors, through: :permissions, source: :user
  def pending_contributors
    permissions.include(:user).select do |p|
      not p.accepted
    end.map do |p|
      p.user
    end
  end
  ...
end 
```

这不是非常有效，因为这意味着每次访问`pending_contributors`时，它都会`contributors`从数据库中获取所有内容，但我认为在这种情况下这是一个非常合理的权衡。

另一种方法是在 ActiveRecord 中进行一些深入研究，或者在模型上同时使用关联和过滤方法，这似乎有点混乱。

# visual-c++ - LNK2028 托管 C++ DLL 在另一个托管 C++ DLL 中调用函数

> ID：11019791
> 
> 赞同：2
> 
> 时间：2012-06-13T17:02:00.197
> 
> 标签：visual-c++, dll, clr, linker-errors, managed

我正在使用带有托管 C++ DLL 的 VS2010 调用另一个托管 C++ DLL 中的函数，并且我收到了许多看起来像这样的[LNK2028链接错误。](http://msdn.microsoft.com/en-us/library/ms235590%28v=vs.80%29.aspx)

```
1>udpPkt.obj : error LNK2028: unresolved token (0A0000AA) "unsigned short __cdecl ComputeCrc16(void const *,unsigned int)" (?ComputeCrc16@@$$FYAGPBXI@Z) referenced in function "public: short __thiscall CPrivateUdpPkt::ComputeCrc(void)const " (?ComputeCrc@CPrivateUdpPkt@@$$FQBEFXZ) 
```

当我在调用的 DLL 上使用**dumpbin /export**时，我看到未解析的函数列为：

```
7 6 00001040 ?ComputeCrc16@@YAGPBXI@Z = ?ComputeCrc16@@YAGPBXI@Z (  unsigned short __cdecl ComputeCrc16(void const *,unsigned int)) 
```

将转储中列出的函数原型与错误消息中列出的原型进行比较，扩展的原型似乎匹配，但损坏的名称不匹配。

```
err ?ComputeCrc16@@$$FYAGPBXI@Z unsigned short __cdecl ComputeCrc16(void const *,unsigned int)
dump?ComputeCrc16@@YAGPBXI@Z    unsigned short __cdecl ComputeCrc16(void const *,unsigned int) 
```

在[LNK2028](http://msdn.microsoft.com/en-us/library/ms235590%28v=vs.80%29.aspx)链接中，它提到了使用 __clrcall 调用 _cdecl 的问题，但它说在调用导出的本机函数时会发生这种情况，但是它没有描述如何解决该问题。此外，我正在使用 /clr 编译被调用的 DLL 和调用 DLL，因此调用或被调用的函数都不应该是我理解的原生函数。

调用代码如下所示

```
unsigned short __declspec(dllimport) ComputeCrc16(const void * i_pData, size_t i_nBytes);

short CPrivateUdpPkt::ComputeCrc() const
{
    const Byte * pByte = reinterpret_cast<const Byte *>(&m_Crc) + sizeof(m_Crc);
    size_t len = &m_aData[DataLen()] - pByte;
    return ComputeCrc16(pByte, len);
} 
```

被调用的函数如下所示：

```
unsigned short __declspec(dllexport) ComputeCrc16(const void * i_pData, size_t i_unNumBytes)
{
...
} 
```

# windows - 如何在指定的日期/时间运行 bat 文件？

> ID：11019792
> 
> 赞同：1
> 
> 时间：2012-06-13T17:02:01.007
> 
> 标签：windows, batch-file, scheduler

我有一个 bat 文件，我想在每个季度的特定日期/时间运行一年。我是命令行新手，我知道如何通过任务调度程序运行它，这很容易。

假设对于每个季度，第 1 个月和第 2 个月，我的 bat 文件应该在其他周运行。对于一个季度的第三个月，它应该每周运行一次。可能的时间是清晨 6:00 am 我该怎么做？请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T09:41:30.880

下面的批处理文件做你想做的事：

```
@echo off
rem Get the "monthInQuarter@weekInMonth" value of the last run:
set /P lastRun=< scheduler.txt
rem Get values from today date
for /F "tokens=1,2 delims=/" %%a in ("%date%") do (
   set /A "monthInQuarter=(1%%a-100)%%4, weekInMonth=(1%%b-101)/7+1, oddWeekInMonth=weekInMonth%%2"
)
if %weekInMonth% gtr 4 (
  set /A weekInMonth=4, oddWeekInMonth=0
)
set thisRun=%monthInQuarter%@%weekInMonth%
rem For 1st and 2nd month in each quarter:
if %monthInQuarter% leq 2 (
   rem For alternative weeks (1=yes, 2=no, 3=yes, 4=no):
   if %oddWeekInMonth% equ 1 (
      if "%thisRun%" neq "%lastRun%" (
         echo %thisRun%> scheduler.txt
         call :TheProcess
      )
   )
rem For the third month of a quarter:
) else if %monthInQuarter% equ 3 (
   rem Run it weekly:
   if "%thisRun%" neq "%lastRun%" (
      echo %thisRun%> scheduler.txt
      call :TheProcess
   )
)
exit

:TheProcess
rem Place here the desired process, ie:
echo This run only on selected weeks!
exit /B 
```

此值表可能有助于理解调度逻辑：

```
month:          1 2 3 4 5 6 7 8 9 10 11 12
monthInQuarter: 1 2 3 0 1 2 3 0 1  2  3  0

day:            1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 ...
weekInMonth:    1 1 1 1 1 1 1 2 2  2  2  2  2  2  3  3  3  3  3 ...
oddWeekInMonth: 1 1 1 1 1 1 1 0 0  0  0  0  0  0  1  1  1  1  1 ... 
```

笔记：

*   此批处理文件假定 ECHO %DATE% 命令以 MM/DD/YYYY 格式显示日期，如果月或日小于 10，则左零。如果这不是您的区域设置日期格式，则需要稍作修改。

*   尽管可以修改此程序以使用任何日期格式，但我认为这不是通用文件，而是针对您的特定需求的非常特殊的要求。

*   该程序必须每天早上 6:00 通过任务调度程序运行。

*   程序第一次运行“系统找不到指定的文件”。在创建辅助 SCHEDULE.TXT 文件之前出现消息。

我希望它有所帮助。

安东尼奥

PS - 我不认为这个问题可以通过 vbs 脚本或 C#、JAVA 等以更简单的方式解决......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:05:45.413

有[windows scheduler](http://windows.microsoft.com/en-us/windows7/Schedule-a-task)，但我怀疑您是否能够仅使用 windows scheduler 进行高级调度。

我要做的是用某种高级语言（C#、JAVA 等）编写调度逻辑（例如，当您希望批处理文件运行时），然后在批处理文件的开头调用该程序以查看它是否是你关心的日期。

可以使用 Windows 调度程序将批处理文件设置为每天运行（如果需要，每天运行多次），但只有当您的 C#/JAVA 程序表明这是您关心的日期时，它才会执行“真正的工作” .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-26T08:14:33.710

公共静态 void main(String[] args) 抛出异常 {

```
 String hours=PropertyUtil.getProperty("START_HOURS");
 String minutes=PropertyUtil.getProperty("START_MINUTES");
  String hours1=PropertyUtil.getProperty("SECOND_START_HOURS");
     String minutes1=PropertyUtil.getProperty("SECOND_START_MINUTES");
    Calendar calendar = Calendar.getInstance();
    calendar.set(Calendar.HOUR_OF_DAY,Integer.parseInt(hours));
    calendar.set(Calendar.MINUTE, Integer.parseInt(minutes));
    calendar.set(Calendar.SECOND, 00);
     Long currentTime = new Date().getTime();
     System.out.println("Current time is : "+currentTime);
     //Check if current time is greater than our calendar's time. If So, then change date to one day plus. As the time already pass for execution.
     if (calendar.getTime().getTime() < currentTime) {
            calendar.add(Calendar.DATE, 1);
        }

    Date time = calendar.getTime(); 
    long  period = 1000L  60L  60L * 24L; // 24 Hours
    System.out.println(" First run  time is : "+time);
    System.out.println("milli seconds: "+period);
    Timer timer = new Timer();
    timer.schedule(new TimerTask() {
        @Override
        public void run() {

            try {
            System.out.println("  Service Started...."+new Date());
                //main logic
            System.out.println("service completed...."+new Date());
            } catch (Exception e) {
             e.printStackTrace();
            }

        }
    }, time, period);
    Calendar calendar1 = Calendar.getInstance();
    calendar1.set(Calendar.HOUR_OF_DAY,Integer.parseInt(hours1));
    calendar1.set(Calendar.MINUTE, Integer.parseInt(minutes1));
    calendar1.set(Calendar.SECOND, 00);
    //Check if current time is greater than our calendar's time. If So, then change date to one day plus. As the time already pass for execution.
    if (calendar1.getTime().getTime() < currentTime) {
        calendar1.add(Calendar.DATE, 1);
    }
    Date time1 = calendar1.getTime();   
    System.out.println("Second run Time is : "+time1);
    System.out.println("Milli seconds : "+period);
    Timer timer1 = new Timer();
    timer1.schedule(new TimerTask() {
        @Override
        public void run() {

            try {
            System.out.println("  Service Started...."+new Date());
                //main logic
            System.out.println("service completed...."+new Date());
            } catch (Exception e) {
             e.printStackTrace();
            }

        }
    }, time1, period);

    } 
```

# sql - 如何按名称调用 INSERT 查询？

> ID：11019794
> 
> 赞同：0
> 
> 时间：2012-06-13T17:02:07.460
> 
> 标签：sql, function, coldfusion, insertion, cfquery

我必须`#FORM.classid#`多次克隆一个类 ID，但不是每次需要它时都编写 INSERT sql 查询，是否有任何解决方案只编写一次并用它的`addClass`名称调用查询？我希望我知道如何编写函数，但我是 CFML 编程的新手。

```
<cfquery name="currentClass" datasource="#dsn#">
        SELECT class_name, class_description
        FROM classes
        WHERE classid = <cfqueryparam value="#FORM.classid#" cfsqltype="cf_sql_numeric"> 
</cfquery>
<cfquery name="addClass" datasource="#dsn#">   
        INSERT INTO classes (class_name,class_description)
        VALUES ('#currentClass.class_name#', '#currentClass.class_description#')
</cfquery>
<cfquery name="getNewID" datasource="#dsn#">
        Select LAST_INSERT_ID() as classid
</cfquery> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:26:08.347

创建一个函数为您完成工作，然后调用该函数。如果在 ColdFusion 中制作，这就是您可以执行该功能的方式。您可以简化为达到最终目标而运行的查询数量，但我只是通过您已经在做的事情写了这个：

```
<cffunction name="AddTheClass" access="public" returntype="numeric">
    <cfargument name="ClassID" required="true" type="numeric" />

    <cfscript>
        var currentClass    = "";
        var addClass        = "";
        var getNewID        = "";

        var myResult        = 0;
    </cfscript>

    <cfquery name="currentClass" datasource="#dsn#">
        SELECT class_name, class_description
        FROM classes
        WHERE classid = <cfqueryparam value="#Arguments.classid#" cfsqltype="cf_sql_numeric"> 
    </cfquery>
    <cfquery name="addClass" datasource="#dsn#">   
        INSERT INTO classes (class_name,class_description)
        VALUES ('#currentClass.class_name#', '#currentClass.class_description#')
    </cfquery>
    <cfquery name="getNewID" datasource="#dsn#">
        Select LAST_INSERT_ID() as classid
        </cfquery>

    <cfset myResult = getNewID.classid />

    <cfreturn myResult />
</cffunction>

<!--- How to call it --->
<cfset intNewClassID    = AddTheClass(ClassID=Form.classid) /> 
```

编辑：您可能需要对数据源变量进行调整。有点取决于它来自哪里并且很难说，因为您没有确定该变量的范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T17:34:37.963

这是一种方法。阅读文档中的函数也是一个好的开始。[http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f5c.html](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f5c.html)

```
<cffunction name='addClass' returntype='numeric'>
    <cfargument name='ClassID' type='numeric' required='yes' />
    <cfargument name='DSN' type='string' required='yes' />

    <cfset var currentClass = '' />
    <cfset var addClass = '' />
    <cfset var getNewID = '' />

    <cfquery name="currentClass" datasource="#Arguments.dsn#">
    SELECT class_name, class_description
    FROM classes
    WHERE classid = <cfqueryparam value="#Arguments.classid#" cfsqltype="cf_sql_numeric"> 
    </cfquery>
    <cfquery name="addClass" datasource="#Arguments.dsn#">   
    INSERT INTO classes (class_name,class_description)
    VALUES ('#currentClass.class_name#', '#currentClass.class_description#')
    </cfquery>
    <cfquery name="getNewID" datasource="#Arguments.dsn#">
    Select LAST_INSERT_ID() as classid
    </cfquery>
    <cfreturn getNewID.ClassID />
</cffunction> 
```

您还应该考虑在 cfquery 标记上使用 result 属性，因为您可以用它替换最后一个查询。[http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fae.html](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fae.html)

如果您无法使用结果方法，那么我将使用它来确保您不会在两个查询之间遇到竞争条件。

[e] 你会注意到我在参数中添加了 DSN，因为你不应该引用函数范围之外的变量！[e2] 您还应该在您的 cfqueries 中使用 cfqueryparam 标签，但我会让您更新那部分。

# php - 如何将 Facebook 权限 URL 集成到我的 PHP 代码中？

> ID：11019803
> 
> 赞同：1
> 
> 时间：2012-06-13T17:02:41.553
> 
> 标签：php, facebook-wall

我创建了一个应用程序，允许用户在登录后在他们的墙上发表评论（根据 Facebook 指南提示他们）。

我的应用程序位于我的网站上并使用 PHP - 并且需要 Facebook 登录/注销 - 我这样做了。

当我使用我的用户帐户时它工作正常 - 但是当一个朋友尝试使用该应用程序时，应用程序不允许他。所以我给了他以下网址：

```
https://www.facebook.com/dialog/oauth?
client_id=140372229420521
&redirect_uri=http://www.magimagi.com/login/uploadtopage2.php
&scope=manage_pages,offline_access,user_photos,read_stream,publish_stream,manage_pages,offline_access,share_item 
```

所以这意味着每次我希望有人使用我的应用程序时，我都必须给他们上述链接。

这是我的 PHP 代码。

```
// Get User ID
$user = $facebook->getUser();

if ($user) {
 try {
    $user_profile = $facebook->api('/me');

  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl(   array(
       'scope' => 'publish_stream'
      ));
} 
```

如何将上述 URL 集成到我的 PHP 代码中，以便当用户登录时，它会立即拥有正确的权限，而无需我提供链接？

我已经阅读了文档并启用了权限，但我仍然迷路了。

我还是新手，所以请原谅我的无知。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:13:28.133

只需将登录 URL 放在链接元素的 href 属性中，让用户单击它——当重定向发生时，您就拥有了您的权限。（或者不，如果用户决定不授予他们。有关如何处理的信息，请参阅文档。）

# php - 多维数组自动子数组初始化功能名称？

> ID：11019806
> 
> 赞同：2
> 
> 时间：2012-06-13T17:02:44.643
> 
> 标签：php, python, language-agnostic, programming-languages

在某些语言中，例如 php，您不需要手动初始化多维数组的每个维度。您只需指定键路径，如果需要，语言将自动初始化子数组。

例如，在php中我可以做

```
$foo = array();
$foo['sub1']['sub2']['sub3'] = 5; 
```

而不必手动初始化子数组的每一级

```
$foo = array();
$foo['sub1'] = array();
$foo['sub1']['sub2'] = array();
$foo['sub1']['sub2']['sub3'] = 5; 
```

~~我知道 python 也提供了这种便利，~~我已经看到了看起来等效的 python 代码，所以我认为这个功能有一个名称。

**此功能的名称是什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:15:27.673

我相信 Perl 中的相应功能称为[autovivification](http://en.wikipedia.org/wiki/Autovivification)。正如维基百科页面所指出的那样，Python 字典默认情况下没有此功能，但通过使用[collections.defaultdict](http://docs.python.org/library/collections.html#defaultdict-objects)很容易构建以这种方式运行的东西。有关一些想法，请参阅此最近[的博客文章](http://blogs.fluidinfo.com/terry/2012/05/26/autovivification-in-python-nested-defaultdicts-with-a-specific-final-type/)。

# regex - 如何使用正则表达式替换多个文本字符串中的字符

> ID：11019812
> 
> 赞同：0
> 
> 时间：2012-06-13T17:03:05.907
> 
> 标签：regex, replace, textwrangler

我的文字如下：

```
• heading 1\n» text_string: text_string\n» text_string: text_string\n• heading 2\n» text_string: text_string\n» text_string: text_string 
```

我想更改`\n» text_string:`为`\n» text_string\n -`，因此文本应在我的应用程序中显示为：

```
• heading 1
  » text_string
    - text_string
  » text_string
    - text_string
• heading 2
  » text_string
    - text_string
... 
```

如何使用 RegEx (Grep) 来查找`\n» text_string:`和替换它`\n» text_string\n -`？

（我正在使用 TextWrangler）。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:04:02.140

如果你想改变这个：

`• heading 1 » text_string: text_string » text_string: text_string • heading 2 » text_string: text_string » text_string: text_string`

对此：

`• heading 1 » text_string - text_string » text_string - text_string • heading 2 » text_string - text_string » text_string - text_string`

我宁愿你做这样的事情

```
text.replace(/:\stext_string(\n|$)/ig,"\n\t- text_string\n"); 
```

这是javascript中的正常正则表达式，我希望能以某种方式帮助你

# c# - c#如何终止和启动一个进程

> ID：11019834
> 
> 赞同：0
> 
> 时间：2012-06-13T17:04:45.937
> 
> 标签：c#, sql, sharepoint

在我的 c# 程序（使用 Visual Studio 2010）中，我正在将文件上传到 SharePoint 文档库，问题是我正在运行我们的内存，显然进程“sqlservr.exe * 32”就像超过 1 GB 的内存。要上传文件，我首先将文件的字节读入 byte[] 数组。然后将该数组作为文件上传到文档库。我需要一种在上传每个文件之前清除内存的方法。

该程序在循环中上传文件，该循环在目录中迭代。那么有没有办法清除 byte[] 数组的内存呢？

实际上有没有办法可以重新启动进程“sqlservr.exe * 32”来释放内存？

这是我用来上传的代码：

我在网站上看到的错误消息是（当问题发生时，我认为是内存不足，有时消息中的文件也不同）： URL 'Test Library/myfolder/file.txt' 无效. 它可能引用不存在的文件或文件夹，或者引用不在当前 Web 中的有效文件或文件夹。

```
using System;
using Microsoft.SharePoint;
using Microsoft.SharePoint.WebControls;
using System.IO;
using Microsoft.SharePoint;

namespace CustomApplicationPage.Layouts.CustomApplicationPage
{
    public partial class CustomApplicationPage : LayoutsPageBase
    {
        protected void Page_Load(object sender, EventArgs e)
        {

            // Check if user posted a file
            if (File1.PostedFile == null)
            {
                return;
            }

            try
            {
                // Get the directories in the path
                string[] array1 = Directory.GetDirectories("C:\\myfolder\\");

                // Declare variables
                string[] temp;
                byte[] contents;
                string dir_name;
                string file_name;
                int i, j;
                int chunk_size = 5;
                int chunk_index = 0;
                int start_id = chunk_size * chunk_index;  
                int end_id = 1 + (chunk_size * (chunk_index+1));

                // Free the memory
                GC.Collect();

                // For each directory in the main path
                for (i = 0; i < array1.Length; i++)
                {
                    // Get directory name
                    dir_name = Path.GetFileName(array1[i]);

                    // Skip this file
                    if (dir_name == "viDesktop_files" || i < start_id || i >= end_id)
                    {
                        continue;
                    }

                    // Get the site
                    SPSite site = new Microsoft.SharePoint.SPSite("http://mysite/");

                    // Turn security off
                    Microsoft.SharePoint.Administration.SPWebApplication webApp = site.WebApplication;
                    webApp.FormDigestSettings.Enabled = false;

                    // Get site root
                    SPWeb spWeb = site.RootWeb;

                    // Get the specified list/library from the site root
                    SPList docLib = spWeb.Lists["Test Library"];

                    // Get all files in the directory
                    temp = Directory.GetFiles(array1[i]);

                    // Create a folder in the list/library
                    SPListItem folder = docLib.Folders.Add(docLib.RootFolder.ServerRelativeUrl, SPFileSystemObjectType.Folder, dir_name);

                    // Activate the newly created folder
                    folder.Update();

                    // For each file in the directory
                    for (j = 0; j < temp.Length; j++)
                    {
                        // Get file name
                        file_name = Path.GetFileName(temp[j]);

                        // If the file is a .mht file
                        if (file_name.EndsWith(".mht"))
                        {
                            // Read the contents of the uploaded file into the variable 'contents'
                            contents = File.ReadAllBytes(temp[j]);

                            // Add the file with the specified filename in the folder
                            SPFile file = folder.Folder.Files.Add(file_name, contents);

                            // Activate the file
                            file.Update();
                        }
                    }

                    // Turn security on
                    webApp.FormDigestSettings.Enabled = true;

                    // Close the site
                    site.Close();
                }
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T19:13:07.483

尝试在站点、webApp、spWeb、docLib、文件夹、文件和其他任何一次性的东西上调用 .Dispose()。

其他应用程序消耗的内存很可能不会导致您的应用程序收到 OutOfMemoryException。Windows 在需要时使用虚拟内存，并将其他应用程序的内存放在页面文件中。在 32 位进程中，您的应用程序应该有 2G 的可用内存（即使您没有那么多可用的内存）。

从我所看到的 OutOfMemory 异常来看，它们通常是由于 clr 由于碎片化而无法为我的应用程序提供足够大的连续内存块来完成我正在尝试做的事情。

无论如何，你应该从处理那些一次性的东西开始。

而且，顺便说一句...您不需要调用 GC.Collect();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:07:04.773

释放结果并关闭连接...您可以重新启动该过程，但可能存在更大的问题...尝试使用 LINQ 和 DataContext

[http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx)

如果您认为您已正确设置所有内容，请尝试使用 SQL Profiler 并查看 DB 级别的情况...

[http://msdn.microsoft.com/en-us/library/ms181091.aspx](http://msdn.microsoft.com/en-us/library/ms181091.aspx)

# sql - 根据字段值插入一行

> ID：11019835
> 
> 赞同：3
> 
> 时间：2012-06-13T17:04:46.467
> 
> 标签：sql, sql-server-2008, tsql

我的数据看起来像这样

```
Supplier  Qty  
--------  ---  
ABC       3
BCD       1  
CDE       2  
DEF       1 
```

我希望结果是：

```
Supplier  Qty  
--------  ---  
ABC       3   }---> Add additional row based on the number of qty
ABC       3   }
ABC       3   }
BCD       1  
CDE       2   }---> Add additional row here too
CDE       2   }
DEF       1 
```

寻找执行预期结果的 sql SELECT 语句。
我正在使用 Sql Server 2008

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T17:19:48.707

```
DECLARE @d TABLE (Supplier VARCHAR(32), Quantity INT);

INSERT @d SELECT 'ABC',3
UNION ALL SELECT 'BCD',1  
UNION ALL SELECT 'CDE',2  
UNION ALL SELECT 'DEF',1;

WITH x AS 
(
  SELECT TOP (10) rn = ROW_NUMBER() --since OP stated max = 10
  OVER (ORDER BY [object_id]) 
  FROM sys.all_columns 
  ORDER BY [object_id]
)
SELECT d.Supplier, d.Quantity
FROM x
CROSS JOIN @d AS d
WHERE x.rn <= d.Quantity
ORDER BY d.Supplier; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T17:25:44.033

假设您要插入回同一个表中，使用 CTE 来确定要插入的行是否干净。如果 Quantity 大于最大递归级别（我认为默认为 100），这将**不起作用，因此可能不是合适的解决方案。**

```
;WITH SupplyToInsert (Supplier, Qty) AS (
    SELECT Supplier, Qty - 1
    FROM Supply
    WHERE Qty > 1

    UNION ALL

    SELECT S.Supplier, I.Qty - 1
    FROM Supply S
        INNER JOIN SupplyToInsert I ON I.Supplier = S.Supplier
    WHERE I.Qty > 1
)
INSERT INTO Supply (Supplier, Qty)
SELECT I.Supplier, S.Qty
FROM SupplyToInsert I
    INNER JOIN Supply S ON S.Supplier = I.Supplier 
```

如果您没有插入回同一个表中，请将 CTE 中的每个更改`Qty > 1`为`Qty > 0`，以便为每个供应商获得一个额外的行。

工作[SqlFiddle](http://sqlfiddle.com/#!3/9e561/10)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T17:11:41.150

绝不是最漂亮的东西；并假设 QTY 永远不会超过 10。有更好的方法可以做到这一点......但会涉及 PL\SQL 或 T-SQL 无法想到直接的 SQL 答案。

```
Insert into yourTablename
(
(Select supplier, Qty From YourTableName where Qty-1 > 0) 
UNION
(Select supplier, Qty From YourTableName where Qty-2 > 0) 
UNION
(Select supplier, Qty From YourTableName where Qty-3 > 0) 
UNION
(Select supplier, Qty From YourTableName where Qty-4 > 0) 
UNION
(Select supplier, Qty From YourTableName where Qty-5 > 0) 
UNION
(Select supplier, Qty From YourTableName where Qty-6 > 0) 
UNION
(Select supplier, Qty From YourTableName where Qty-7 > 0) 
UNION
(Select supplier, Qty From YourTableName where Qty-8 > 0) 
UNION
(Select supplier, Qty From YourTableName where Qty-9 > 0) 
UNION
(Select supplier, Qty From YourTableName where Qty-10 > 0) 
) 
```

此外，这是一次性交易；如果这不是第一次做对；您必须清理数据，然后重试。（同样不是我最喜欢的答案，但仅限于 SQL ......）

# file - 有没有地方可以找到文件类型的格式？

> ID：11019838
> 
> 赞同：1
> 
> 时间：2012-06-13T17:04:52.740
> 
> 标签：file, document, file-format, specifications, specs

我一直在互联网上寻找一个可以看到某些文件类型是如何制作的地方，以便我可以更好地理解它们并在我想要制作的一些应用程序中阅读它们。

例如，我找不到描述如何制作 .epub 文件的地方。

我想知道的是我应该如何处理这样的问题。找到具有文件格式规范的文档并构建一个可以读取它并实现其他一些功能的应用程序更好，还是有更简单的方法？人们通常如何创建可以做到这一点的应用程序？

我想知道，因为我找不到我正在搜索的上述文件，只有一些信息在这里和那里并没有真正告诉我太多。

也许我只是没有在搜索引擎中搜索正确的术语，但如果我什至找不到应该如何阅读 .epub 文件，我对如何开始一无所知。

我真正想要的是一个答案，它告诉我如何为大多数文件类型找到此类文档，但如果您不知道但知道在哪里可以找到 .epub 文件格式，请不要害怕给我答案规格，因为这是我目前最需要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:08:33.330

> 找到具有文件格式规范的文档并构建一个可以读取它并实现其他一些功能的应用程序更好，还是有更简单的方法？

是的...您需要找到该特定文件格式的规范。没有用于不同不相关格式的存储库。

简单的谷歌搜索通常会发现是否已经有公开可用的规范： [https ://encrypted.google.com/search?hl=en&q=epub%20file%20specification](https://encrypted.google.com/search?hl=en&q=epub%20file%20specification)

查看维基百科也很有帮助： [http ://en.wikipedia.org/wiki/EPUB](http://en.wikipedia.org/wiki/EPUB)

在维基百科文章的底部，您可以找到以下链接：

[EPUB 格式构建指南](http://www.hxa.name/articles/content/epub-guide_hxa7241_2007.html)

[EPUB 文件的格式概述](http://www.youtube.com/watch?v=vvGrFZdSDww)

第一个链接看起来像您感兴趣的内容。第二个链接是一个视频，我没有观看，但维基百科上的链接文本很有希望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:28:51.723

有这个很棒的网站 -www.wotsit.org- 但现在几乎所有链接都已失效，管理员没有回复电子邮件。所以我通常在 google rar 规范 rar 文件格式中尝试这个如果格式很流行，我会通过这种方式找到更好或更差的规范。偶尔维基百科可以在文章底部的链接部分有格式规范。当我什么都没找到，而且 Wotsit 上曾经有过一些东西时，我从 wotsit 复制文件名并在谷歌上搜索，有时我可以通过这种方式找到格式规范。

# git - 如何在 Github 中使用终端命令？

> ID：11019839
> 
> 赞同：40
> 
> 时间：2012-06-13T17:05:10.517
> 
> 标签：git, github

我已经分叉了一个私有存储库（一个 iPhone 项目），如下所示：

```
cd nameofdirectory
git init
git clone forkedURL 
```

现在我想将我所做的更改推送到我的分叉存储库，以便主管理员可以查看我编写的代码并将其与主存储库合并。

如何在 MacOS 上使用终端将我所做的更改推送到我的分叉存储库？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-06-13T17:09:15.717

您不能推入其他人的存储库。这是因为 push 永久地将代码放入他们的存储库中，这并不酷。

您应该做的是*要求他们*从您的存储库中提取。这是在 GitHub 中通过转到另一个存储库并发送“拉取请求”来完成的。

关于 GitHub 的帮助本身有一篇内容非常丰富的文章：[https ://help.github.com/articles/using-pull-requests](https://help.github.com/articles/using-pull-requests)

* * *

要与您自己的存储库交互，您有以下命令。我建议您开始更多地阅读 Git 以了解这些说明（大量在线资料）。

要将新文件添加到存储库或将更改的文件添加到暂存区域：

```
$ git add <files> 
```

提交它们：

```
$ git commit 
```

提交未暂存但已更改的文件：

```
$ git commit -a 
```

推送到存储库（例如`origin`）：

```
$ git push origin 
```

只推你的一个分支（比如`master`）：

```
$ git push origin master 
```

要获取另一个存储库的内容（例如`origin`）：

```
$ git fetch origin 
```

仅获取其中一个分支（例如`master`）：

```
$ git fetch origin master 
```

要将分支与当前分支合并（例如`other_branch`）：

```
$ git merge other_branch 
```

请注意，这`origin/master`是您在上一步中从 中获取的分支的名称`origin`。因此，从原点更新您的主分支是通过以下方式完成的：

```
$ git fetch origin master
$ git merge origin/master 
```

您可以在他们的手册页（在您的 linux 上或在线）中阅读所有这些命令，或遵循 GitHub 帮助：

*   [https://help.github.com/articles/create-a-repo](https://help.github.com/articles/create-a-repo)用于提交和推送
*   [https://help.github.com/articles/fork-a-repo](https://help.github.com/articles/fork-a-repo)用于获取和合并

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-13T17:08:09.430

```
git add myfile.h
git commit -m "your commit message"
git push -u origin master 
```

如果您不记得需要更新的所有文件，请使用

```
git status 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-23T11:50:15.167

要一次添加所有文件，请使用**`git add -A`**

要检查 git 整体状态，请使用**`git log`**

# lync - 用于 Lync 的 UCC API

> ID：11019842
> 
> 赞同：0
> 
> 时间：2012-06-13T17:05:31.790
> 
> 标签：lync, lync-2010, rundll32, uccapi

我需要允许我更改 Lync voip 中的呼叫转移的软件。不存在这样的软件（除了微软自己的客户端），所以我需要自己编写。我有 Visual Studio 2010，但不清楚需要安装哪些 SDK...安装。

我需要从哪里开始？

另外，我一直在研究 UccApi.dll。那里有一个单独的功能可以设置呼叫转移吗？是否有可能只用几个参数运行dll32，并回避将蹩脚的控制台应用程序拼凑在一起的需要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:45:04.053

[CodeLync 博客](http://www.codelync.com/an-overview-of-the-lync-apis/)上有一篇很棒的文章讨论了不同 SDK 之间的差异。

我有点不确定你到底想做什么。有选择地将特定呼叫从一个号码转移到另一个号码？从一个号码到另一个号码的所有呼叫？

如果它是基于您希望在客户端本地控制的某些内容的选择性转发（例如，客户端在 5 次响铃内未应答，或单击拒绝，或处于非活动状态等），那么您可以使用 Lync SDK 执行此操作。

如果它更复杂，您可能需要考虑使用 UCMA SDK 应用程序：您在其中运行将回答该号码的服务，然后决定将其传输到何处。这样您就不会依赖它在任何特定客户端上运行，它将在某处的服务器上运行。这是呼叫中心应用程序的好方法，您可能希望循环呼叫可用的操作员等。

希望这可以帮助。

*编辑以下评论：*

根据您的评论，听起来 UCMA 应用程序将是可行的方法。使用 UCMA 应用程序，您可以为您的应用程序提供特定的 SIP 地址并订阅对该 SIP 地址的任何传入呼叫。为了管理目的地不断变化的事实，我会在数据库中保存一些东西，让您可以查看目的地应该是什么，然后在来电时查找它，并执行到目的地的背靠背转移. （这也意味着您可以在其他过程中管理更改目标，只要它最有意义，也意味着您不会将目标地址硬编码到应用程序中）。

与大多数事情一样，有不同的方法可以做到这一点。例如，您可以（我认为）使用 SIP 消息过滤来转移进入的呼叫，但我认为这将是一个不太明显的解决方案。

# sql - 一个属性仅在另一个属性具有特定值时才适用的数据库设计模式

> ID：11019847
> 
> 赞同：1
> 
> 时间：2012-06-13T17:05:55.953
> 
> 标签：sql, design-patterns, database-design, naming

我经常看到这种设计模式，但没有给它起名字。我很想知道**设计师如何称呼这种模式**，以及他们如何通过合理的**DB 设计**来处理它。

举个简单的例子，假设**学生**有一个**年级**(1 -8)。如果学生的等级为 7 或 8，那么他们可能是**荣誉**学生。那么，如果您知道该位标志仅适用于特定年级的学生，那么您如何针对该学生跟踪该位标志呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T17:28:17.750

我称之为数据依赖。并非所有数据依赖关系都可以直接或方便地通过关系分解进行建模。使用检查约束可以很容易地处理这个问题：

```
CREATE TABLE Students (
  id SERIAL PRIMARY KEY, -- for example, something else in reality
  grade INTEGER NOT NULL,
  honors BOOLEAN,
  CONSTRAINT ensure_honors_grade 
    CHECK((honors IS NULL AND grade < 7) OR 
          (honors IS NOT NULL AND grade >= 7))
); 
```

另一种解决方案可能是使用两个表：

```
CREATE TABLE Students (
  id SERIAL PRIMARY KEY,
  grade INTEGER NOT NULL,
  CONSTRAINT id_grade_unique UNIQUE (id, grade) -- needed for FK constraint below
);

CREATE TABLE Honors (
  student_id INTEGER NOT NULL,
  grade INTEGER NOT NULL,
  honors BOOLEAN NOT NULL,
  CONSTRAINT student_fk FOREIGN KEY (student_id, grade) REFERENCES Students(id, grade),
  CONSTRAINT valid_grade CHECK(grade >= 7)
); 
```

这种替代设计更加明确了年级与是否有荣誉标志之间的关系，并为 7-8 年级学生的进一步区分留出了空间（尽管表名应改进）。如果您只有一个属性，即荣誉布尔值，那么这可能是矫枉过正。正如@BrankoDimitrijevic 所提到的，这不会`Honors`仅仅因为等级是 7 或 8 就强制存在一行，而且您还要为原本不需要的索引付费。所以有权衡；这当然不是*仅有*的两种可能的设计；Branko 还建议使用触发器。

对于 OO 设计，@Ryan 是正确的，但对于适当的关系数据库设计，通常不会通过尝试识别继承模式来解决问题。这就是面向对象的观点。关注访问模式以及代码如何获取数据总是很重要的，但是在关系数据库设计中，首先要争取数据库的规范化和灵活性，其次才是代码，因为总会有多个获取数据的代码库，并且无论访问代码有多么错误，您都希望确保数据始终有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:17:09.153

您需要考虑类模型及其使用方式。您是否将`Honors`其视为 a 的布尔标志`Student`？比如`if (grade > 6) Student.honor = true`？

通常，您可以将其视为继承映射的情况。将其视为`Student`父类，而您的子类是`HonorStudent`. 有多种方法可以在关系数据库中映射继承。

您可以将所有内容映射到单个表中，因为基类和子类的所有属性都会存在，但其中一些会设置为 NULL 或空。例如，如果 HonorStudent 具有属性 X，则在将 Student 映射到表时将属性 X 设置为 NULL。

另一种情况是每个具体类都有一个表。因此，您将有一个单独的表用于 Student 和 HonorStudent。

您还可以为 Student 和 HonorStudent 提供一个具有自己属性的表。子类将只有一个表，其中包含它们具有（或添加）的属性，如属性 OTHER 而不是继承的属性。继承的属性将映射到父表并使用唯一 ID 链接。

不确定这是否是您正在寻找的答案，但这就是我的看法。

# parsing - ANTLR 中可能带有 > 和空格的标识符？

> ID：11019851
> 
> 赞同：0
> 
> 时间：2012-06-13T17:06:32.287
> 
> 标签：parsing, antlr, antlr3, antlrworks

我尝试使用 ANTLR 编写具有以下细节的语法。

它可以解析如下标识符：

```
foo > bar > 67 
```

其中 foo > bar 是标识符，因为 if > 后跟一个字母，它包含标识符，否则它是大于运算符。

我应该解析类似的东西

```
((a = 1) AND (b = 2)) OR (c = 3) 
```

其中 ( ) 是必要的。

我对这个主题和 ANTLR 真的很陌生，希望有人能提供帮助。

我目前有这个语法

```
 grammar testgrammer;

start   :   statement EOF;

statement
    :   operation  (AND operation)*;

operation
    :   '(' ID OPERATOR INT ')';

AND :   'AND';

OPERATOR:   '=' | '>';

ID  
  :  ('a'..'z'| 'A'..'Z')+ (WS '>' WS ('a'..'z' | 'A'..'Z')+)?
  ;

WS  
  :  ' '+ {skip();}
  ;

INT :   '0'..'9'+
    ; 
```

但我不知道如何在 id 中的 > 和作为运算符的 > 之间切换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:45:22.053

首先，这是一件令人困惑的事情：既是`"foo > bar"`标识符又`"foo > 67"`是表达式。

由于您允许在此类标识符中使用空格，因此您的词法分析器将像输入一样绊倒，`"foo > 67"`因为`"foo > "`它会尝试使用一个字母但看到一个数字。并且词法分析器不会回溯，`"foo > "`因为没有可以从中创建单个标记（请注意，词法分析器永远不会放弃它消耗的字符！）。

为了处理这个问题，您必须确保词法分析器可以匹配`" > "`后跟一些字母。您可以使用句法谓词（`( ... )=>`部分）来做到这一点：

```
Id
 : IdPart ((Spaces? '>' Spaces? IdPart)=> Spaces? '>' Spaces? IdPart)*
 ;

SpaceChars
 : (Spaces | '\r' | '\n') {skip();}
 ;

fragment Digit  : '0'..'9';
fragment Letter : 'a'..'z' | 'A'..'Z';
fragment Spaces : (' ' | '\t')+;
fragment IdPart : Letter (Letter | Digit)*; 
```

请注意，您不能使用其中的规则`SpaceChars`，`Id`因为该规则会调用该`skip()`方法。

# java - JSON Post 到 Spring 控制器不起作用

> ID：11019852
> 
> 赞同：0
> 
> 时间：2012-06-13T17:06:41.427
> 
> 标签：java, ajax, json, spring, spring-mvc

JSON Post to Spring 控制器不工作....我进入控制器，但后来我遇到了一些疯狂的错误。

Javascript：

```
function doAjaxPost() {  

    alert("doAjaxPost Called");

     var queryString = $('#htmlform').serialize();

       $.ajax({
            contentType : "application/json",
            dataType : 'json',
            type : "POST",
            url : contexPath + "/service/employee",
            data : queryString, //json serialization (like array.serializeArray() etc)

            success : function(data) {
                alert("Thanks for submitting.  \n\n" + response.result);
               // response
            },
            error : function(request, status, error) {
                   alert('Error: ' + e); 
            }
        });
    }  
</script> 
```

java/弹簧/控制器：

```
@RequestMapping(headers ={"application/json;charset=UTF-8"}, method=RequestMethod.POST, value="/employee" )
    public ModelAndView updateEmployee(@RequestBody Employee employee ) {
        System.out.println("in put body:");
        System.out.println("HELLO WORD" + employee.toString());

        return new ModelAndView(XML_VIEW_NAME, "object", employee);
    } 
```

现在对于错误：

```
2012-06-13 13:00:01,809 [http-8080-2] DEBUG org.springframework.web.servlet.DispatcherServlet - DispatcherServlet with name 'rest' processing POST request for [/RESTful/service/employee]
2012-06-13 13:00:01,813 [http-8080-2] DEBUG org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapping [/employee] to HandlerExecutionChain with handler [dw.spring3.rest.controller.EmployeeController@c58f769] and 1 interceptor
2012-06-13 13:00:01,844 [http-8080-2] DEBUG org.springframework.web.bind.annotation.support.HandlerMethodInvoker - Reading [java.lang.String] as "application/json;charset=UTF-8" using [org.springframework.http.converter.StringHttpMessageConverter@221a5770]
2012-06-13 13:00:01,846 [http-8080-2] DEBUG org.springframework.web.bind.annotation.support.HandlerMethodInvoker - Invoking request handler method: public org.springframework.web.servlet.ModelAndView dw.spring3.rest.controller.EmployeeController.addEmployee(java.lang.String)
in post
2012-06-13 13:00:01,870 [http-8080-2] DEBUG org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerExceptionResolver - Resolving exception from handler [dw.spring3.rest.controller.EmployeeController@c58f769]: org.springframework.oxm.UnmarshallingFailureException: JAXB unmarshalling exception; nested exception is javax.xml.bind.UnmarshalException
 - with linked exception:
[org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Premature end of file.]
2012-06-13 13:00:01,873 [http-8080-2] DEBUG org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver - Resolving exception from handler [dw.spring3.rest.controller.EmployeeController@c58f769]: org.springframework.oxm.UnmarshallingFailureException: JAXB unmarshalling exception; nested exception is javax.xml.bind.UnmarshalException
 - with linked exception:
[org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Premature end of file.]
2012-06-13 13:00:01,873 [http-8080-2] DEBUG org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver - Resolving exception from handler [dw.spring3.rest.controller.EmployeeController@c58f769]: org.springframework.oxm.UnmarshallingFailureException: JAXB unmarshalling exception; nested exception is javax.xml.bind.UnmarshalException
 - with linked exception:
[org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Premature end of file.]
2012-06-13 13:00:01,874 [http-8080-2] DEBUG org.springframework.web.servlet.DispatcherServlet - Could not complete request
org.springframework.oxm.UnmarshallingFailureException: JAXB unmarshalling exception; nested exception is javax.xml.bind.UnmarshalException
 - with linked exception:
[org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Premature end of file.]
    at org.springframework.oxm.jaxb.Jaxb2Marshaller.convertJaxbException(Jaxb2Marshaller.java:761)
    at org.springframework.oxm.jaxb.Jaxb2Marshaller.unmarshal(Jaxb2Marshaller.java:682)
    at org.springframework.oxm.jaxb.Jaxb2Marshaller.unmarshal(Jaxb2Marshaller.java:665)
    at dw.spring3.rest.controller.EmployeeController.addEmployee(EmployeeController.java:61)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:679)
Caused by: javax.xml.bind.UnmarshalException
 - with linked exception:
[org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Premature end of file.]
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.createUnmarshalException(AbstractUnmarshallerImpl.java:335)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.createUnmarshalException(UnmarshallerImpl.java:481)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:199)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:168)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:157)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:125)
    at org.springframework.oxm.jaxb.Jaxb2Marshaller.unmarshal(Jaxb2Marshaller.java:678)
    ... 27 more
Caused by: org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Premature end of file.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:177)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:391)
    at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1391)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:1034)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:625)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:819)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:748)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1208)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:525)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:195)
    ... 31 more
Jun 13, 2012 1:00:01 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet rest threw exception
org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Premature end of file.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:177)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:391)
    at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1391)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:1034)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:625)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:819)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:748)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1208)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:525)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:195) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:35:15.313

**将查询字符串转换为json字符串**

```
var postData = {};
jQuery.map($('#htmlform').serializeArray(), function(n, i){
postData[n['name']] = n['value'];
}); 
```

**在ajax帖子中传递json字符串而不是queryString**

```
$.ajax({
            data : JSON.stringify(postData), //convert json object to string
            success : function(data) {                   
            },
            error : function(request, status, error) {
            }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T14:26:21.453

试试这个，它适用于 Java servlet doPost()。$(文档).ready(函数(){

> ```
>  $("button").click(function(){
>       var mydata = {"name":"abc","age":"25"};
>       $.ajax({
>           type: "POST",
>           url: "http://localhost:8080/...",
>           data: JSON.stringify(mydata),
>           contentType: "application/json; charset=utf-8",
>           dataType: "json",
>           success:function(data){
>             if(data.status === "success"){
>               alert("Success");
>             } else if (data.status === "error"){
>               alert("Fail");
>             }
>           },
>           error:function(thrownError){
>             console.log(thrownError);
>           }
>         }); 
>   }); 
> ```
> 
> });

# mysql - 使用 INNER JOIN 处理两列

> ID：11019853
> 
> 赞同：1
> 
> 时间：2012-06-13T17:06:43.613
> 
> 标签：mysql, sql, database

我正在使用以下查询从`wait_times`用户 ID 为 1 的表中选择等待时间，然后选择具有等待时间场地 ID 的场地信息。

```
SELECT w . * , v . *
FROM  `wait_times` AS  `w` 
INNER JOIN  `venues` AS  `v` ON  `v`.id =  `w`.venue_id
WHERE w.user_id =1
LIMIT 0 , 30 
```

但是，当我执行此查询时，由于我在两个表中都有命名列`user_id`，`id`因此我收到了每个列名的两个大量值。请您告诉我如何使这些值可区分，并将它们分别重命名为“table_name.columnname”以便易于识别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:10:42.723

一种解决方案是：

```
SELECT w.colum1 as name1, w.colum2 as name2, w.*, v.colum1 as name3, v.colum2 as name4, v.*
FROM  `wait_times` AS  `w` 
INNER JOIN  `venues` AS  `v` ON  `v`.id =  `w`.venue_id
WHERE w.user_id =1
LIMIT 0 , 30 
```

只需为具有相同名称的列分配（临时）不同名称。

# javascript - Chrome 中的 Mutation Obervers 未检测到属性和 css 更改

> ID：11019856
> 
> 赞同：1
> 
> 时间：2012-06-13T17:06:55.550
> 
> 标签：javascript, html, dom, google-chrome, mutation-observers

我在 Chrome 19 中，我创建了一个新的变异观察者对象：

```
var observer = new WebKitMutationObserver(function(mutations, observer) {
  console.log(mutations, observer);
}); 
```

然后我观察到：

```
observer.observe(document, {
  subtree: true,
  childList: true,
  characterData: true,
  attribute: true      
}); 
```

似乎只有在我插入或删除节点或更改节点的文本时才会触发此设置。如果我更改元素的属性或内联 css 样式，它不会被触发。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:14:06.090

根据[规范草案](http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#mutationobserver)，您要设置的属性是`attributes: true`，不是`attribute: true`。

# php - 将 PyroCMS 集成到现有 CodeIgniter 2.x webapp 的最佳方式是什么？

> ID：11019863
> 
> 赞同：0
> 
> 时间：2012-06-13T17:07:08.250
> 
> 标签：php, codeigniter, pyrocms

我想使用 PyroCMS 作为 webapp 前端页面（主页、隐私政策、关于、联系方式等）的基本 CMS。我的 webapp 已经开始使用 CodeIgniter 2.x。

任何人都知道将 PyroCMS “固定”到我现有的 CodeIgniter webapp 的最佳方式，这样我就可以使用 PyroCMS 在我的数据库中添加/编辑/管理页面，并使用我的 webapp 中的自定义代码来阅读/查看 webapp 上的这些页面前端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:31:28.623

最好的方法是在 PyroCMS 系统中创建你的 webapp 作为一个模块。

将应用程序目录的所有内容放在新模块中。

# spring - Spring java配置没有找到通过context:component-scan创建的bean

> ID：11019866
> 
> 赞同：3
> 
> 时间：2012-06-13T17:07:29.937
> 
> 标签：spring, jax-rs

到目前为止，我已经成功地混合了 xml 和 java 配置，但是有一个用例似乎不起作用。我让 spring 使用组件扫描配置我的 JAX-RS 资源，它们被正确解析：

```
<context:component-scan
    base-package="<my packages>">
    <context:include-filter type="annotation"
        expression="javax.ws.rs.Path" />
... 
```

但是，如果我尝试在我的 java 配置中调用这些类之一：

```
HttpInvokerServiceExporter exp = new HttpInvokerServiceExporter();
exp.setService(context.getBean(Users.class)); 
```

我收到此错误：没有定义类型 [com.gecod.allianz.arco.web.restresources.Users] 的唯一 bean：预期单个 bean 但找到 0：

一种解决方案可能是在 xml 或 java 配置中声明 JAX-RS bean，但这种方式 Resteasy 不会将它们识别为 JAX-RS 资源。

我想我有比赛条件，有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:43:19.247

看看这是否效果更好

```
<beans xmlns="http://www.springframework.org/schema/beans"       xmlns:mvc="http://www.springframework.org/schema/mvc"       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"       xmlns:context="http://www.springframework.org/schema/context"       xsi:schemaLocation="        http://www.springframework.org/schema/beans         http://www.springframework.org/schema/beans/spring-beans-3.1.xsd        http://www.springframework.org/schema/context         http://www.springframework.org/schema/context/spring-context-3.1.xsd        http://www.springframework.org/schema/mvc        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">            <context:annotation-config />    
<context:component-scan base-package="com.blah.blah" /> 
```

# javascript - 带有点击事件的 stopPropagation()

> ID：11019868
> 
> 赞同：10
> 
> 时间：2012-06-13T17:07:34.320
> 
> 标签：javascript, jquery, hammer.js, stoppropagation

我正在使用[hammer.js](http://eightmedia.github.com/hammer.js/)，看来我`event.stopPropagation()`不适用于点击事件。

如果我点击孩子，会触发关联的事件，但也会触发父母的事件，我不希望这样。

```
$('#parent').hammer().bind('tap', function(e) {
    $(this).css('background', 'red');
});​​​​​​​​

$('#child').hammer().bind('tap', function(e) {
    e.stopPropagation();
    $(this).css('background', 'blue');
}); 
```

这是一个例子：http: [//jsfiddle.net/Mt9gV/](http://jsfiddle.net/Mt9gV/)

​我也尝试过[jGestures](http://jgestures.codeplex.com/)，问题似乎是一样的。如何使用其中一个库实现此结果？（如果需要，也可以另外一个）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T16:41:51.500

正如另一条评论中提到的那样，正如您所做的那样，人们会期望调用`event.stopPropagation()`将是阻止事件冒泡到父级所需要的全部。

**详细信息：**但是，在 Hammer.js中，*情况并非如此*。Hammer 为您调用的每个元素创建一个新的手势状态机`$(el).hammer()`。因此，当浏览器在子级上触发触摸事件时，它首先由子级逻辑处理，然后再次由父级逻辑处理。因此，要阻止父级获取*点击*事件，您必须阻止父级的锤子状态机获取**原始触摸事件**。通常，调用`event.stopPropagation()`也会停止原始事件的传播。但是，hammer.js 的`tap`事件被触发，`touchend`但它`originalEvent`是缓存的`touchstart`事件。因此，停止对原始事件的传播没有影响，因为`touchstart`事件很久以前就通过 DOM 冒泡了。

**解决方案？**我相信这是*锤子中的一个错误*- 提交一个更正`originalEvent`点击事件中的拉取请求。正如其他人建议的那样，您可以检查事件的目标，但这始终是父元素 - 我认为这是另一个错误。所以改为检查`event.originalEvent.target`. 这是一个实现了这个平庸解决方案的[JS fiddle ：http:](http://jsfiddle.net/HHRHR/) [//jsfiddle.net/HHRHR/](http://jsfiddle.net/HHRHR/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T11:32:06.110

由于无法完成这项工作，我使用了一个变量来了解子事件是否已被触发。它与 jGestures 配合得很好（我没有尝试过使用hammer.js）

```
var childTriggered = false;

$('#child').bind('tapone', function(e) {
    $(this).css('background', 'red');
    childTriggered = true;
});

$('#parent').bind('tapone', function(e) {
    if(childTriggered) {
        childTriggered = false;
        return;                
    }
    $(this).css('background', 'blue');
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-01T16:12:20.560

我对触摸事件也有类似的问题。

我通过使用解决了它

```
return false; 
```

这与调用 e.preventDefault(); 相同；e.stopPropagation();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T17:09:37.550

如果你不能让它工作..只需在验证需要后在水龙头上调用另一个方法（这`arguments.callee`是我在这种情况下开始的地方），这将具有让其他用户也钩住按钮的额外好处.. .

`function myFn(a) { if(a) $(this).css('background', 'red'); else $(this).css('background', 'blue');}`

```
$('#parent').hammer().bind('tap', function(e) {
   //Check arguments.callee or other data in event and call myFn
});​​​​​​​​

$('#children').hammer().bind('tap', function(e) {
  //Same here
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T17:36:20.313

您可以尝试在父处理程序中检查`e.currentTarget`（或者是`e.target`？）以找出被点击的元素；如果它是子元素，则立即返回，否则继续该函数。

# r - 将 y 轴刻度标签从标准形式更改为完整数字

> ID：11019870
> 
> 赞同：3
> 
> 时间：2012-06-13T17:07:44.250
> 
> 标签：r

我做了一个散点图，y 轴范围从 0 到 800,000。如何使 y 轴刻度显示数字（“0”、“200,000”、“400,000”、“600,000”、“800,000”）而不是它们的标准形式（“0e+00”、“2e+05” 、“4e+05”、“6e+05”、“8e+05”）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T17:30:01.347

请参阅 中的**scipen**选项`?options`。这是一个例子：

```
set.seed(42)
dat <- data.frame(x = runif(100, min = 0, max = 1000000),
                  y = runif(100, min = 0, max = 1000000))

layout(matrix(1:2, ncol = 2))
plot(y ~ x, data = dat)
opt <- options(scipen = 10)
plot(y ~ x, data = dat)
options(opt)
layout(1) 
```

产生：

![scipen_plot](../Images/313a22195a4c47c2134482c2de2f9277.png)

其他选项包括`axes = FALSE`在`plot()`调用中抑制轴，然后使用`axis()`自定义提供的标签添加您自己的轴`format()`；详情见`?format`。如果您真的想要分隔千位的数字中的“，”，这就是要走的路。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T17:25:10.357

这是一个帮助您入门的示例：

```
x <- 1:10
y <- runif(10) * 1e6

yrange <- c(0, 1e6)
ticks <- pretty(yrange)
labels <- format(ticks, big.mark=",", scientific=FALSE)

plot(y~x, yaxt="n", ylim = yrange)
axis(2, at = ticks, labels = labels, las = 1, cex.axis=0.7) 
```

![在此处输入图像描述](../Images/5d7e93ebffde5078e8fec8ba3df1ed58.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T17:13:45.713

使用格式和科学=假：

```
a<-c(100000, 200000)
format(a, scientific=FALSE) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-22T20:09:45.900

您可以使用以下`dplyr`功能：

`scale_y_continuous(labels = scales::comma)`

# swing - gwt 仿真 java.util.EventObject 的动机

> ID：11019872
> 
> 赞同：0
> 
> 时间：2012-06-13T17:07:53.680
> 
> 标签：swing, gwt, emulation

GWT 仿真有什么用，`java.util.EventObject`因为它还提供`com.google.gwt.user.client.Event`了一种 DOM 事件的包装器？

我问这个是因为为了模拟一些摆动组件（JFrame 和 Buttons），而谷歌不提供这样的模拟。我打算查看`java.awt`源代码并模仿它作为 JavaScript 派生对象运行。并`java.awt.AWTEvent`由此而来。

尽管学习了所有 GWT API：DialogBox、PopupPanel 等等，但我希望这将帮助我通过使用更知名的 swing API 更快地开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:49:33.867

如果你想构建一个 web 应用程序，你应该使用 web apis。在我的 GWT 时代，我看到很多人使用 GWT 作为通配符，因为他们没有了解浏览器的工作原理，从而产生了非常糟糕的应用程序，而且速度往往很慢。

GWT 不是隐藏浏览器，而是在高度优化代码的同时消除一些怪癖。GWT api 就是它们的样子，而仅仅模拟一些事件是行不通的，这是有原因的。

我花了很多时间让 Swing API 用 GWT 在画布上绘图，但结果并不令人印象深刻......

# java - Spring AOP Load-Time Weaving 是否需要 JVM 参数？

> ID：11019873
> 
> 赞同：1
> 
> 时间：2012-06-13T17:08:03.210
> 
> 标签：java, spring, jvm, aop, aspectj

对于使用 Spring AOP 的独立 Java 应用程序，是否需要 JVM 参数，例如`-javaagent:pathto/aspectjweaver.jar`“打开”AOP 支持？您什么时候想要或需要这样做？

需要明确的是，“独立”是指 Maven 构建的、可执行的 .jar；这将在各种平台上调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:34:20.317

这取决于。如果您使用 Spring AOP 仅进行粗粒度拦截（意味着您只想拦截对 bean 的外部调用，但不拦截 bean 内部的调用），则根本不需要 JVM 参数。只需使用如下代码：

```
<bean id="myInterceptor" class="com.company.interceptors.MyInterceptor"></bean>

<aop:config>
    <aop:pointcut id="myPointcut"
        expression="execution(* com.company.services..MyService.*(..))" />

    <aop:advisor pointcut-ref="myPointcut"
        advice-ref="myInterceptor" />
</aop:config> 
```

如果这还不够，并且您需要加载时编织来建议 bean 内调用，那么您需要添加一个 JVM 参数，如 Spring 3.0 文档中所述：

> 通用 Java 应用程序
> 
> 您可以通过使用 Spring 提供的检测代理在任何 Java 应用程序（独立的以及基于应用程序服务器的）中启用 Spring 对 LTW 的支持。为此，请通过指定 -javaagent:path/to/spring-agent.jar 选项来启动 VM。请注意，这需要修改 VM 启动脚本，这可能会阻止您在应用程序服务器环境中使用它（取决于您的操作策略）。

见这里[http://static.springsource.org/spring/docs/3.0.0.RC2/reference/html/ch07s08.html#aop-aj-ltw-environments](http://static.springsource.org/spring/docs/3.0.0.RC2/reference/html/ch07s08.html#aop-aj-ltw-environments)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T23:00:44.510

考虑通过 maven 使用编译时编织：

```
<properties>
    <aspectj.version>1.6.12</aspectj.version>
</properties>

        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <version>1.4</version>
            <dependencies>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjtools</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
            </dependencies>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
                <complianceLevel>1.7</complianceLevel>
                <aspectLibraries>
                    <aspectLibrary>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-aspects</artifactId>
                    </aspectLibrary>
                </aspectLibraries>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>test-compile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

这样做涵盖了所有疯狂的 Spring AOP 案例，甚至是私有事务方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T18:20:26.370

在此处查看更多文档[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-aj-ltw](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-aj-ltw)。这取决于。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T17:12:34.023

通常，只在类路径中包含 weaver jar 就足够了。

# c# - C# 基继承

> ID：11019877
> 
> 赞同：5
> 
> 时间：2012-06-13T17:08:09.747
> 
> 标签：c#, class, inheritance

这个问题一直困扰着我，我现在已经写了 4 个包装器。我确定我做错了，需要弄清楚我的理解在哪里分支。

假设我正在使用 Rectangle 类来表示金属条。（这比动物效果更好）

所以说基类称为“Bar”。

```
private class Bar
{
   internal Rectangle Area;
} 
```

所以。现在我们制作一个矩形，比如 300 x 10 个单位。

```
private Bar CreateBar()
{
    Bar1 = new Bar1();
    Bar1.Area = new Rectangle(new Point(0,0), new Size(300,10));
    return Bar1;
} 
```

太棒了，所以我们有一个基本酒吧。

现在假设我们想让这个酒吧有一种材料——比如钢。所以。. .

```
private class SteelBar : Bar
{
    string Material;
} 
```

所以如果我这样做了。. .

```
private SteelBar CreateSteelBar()
{
    SteelBar SteelB = new SteelB();
    Bar B = CreateBar();
    SteelB = B;
    SteelB.Material = "Steel";
    return SteelB;
} 
```

如果我调用 CreateSteelBar，从我得到的信息中，它会创建一个调用 CreateBar 的钢筋。所以我最终得到了一个带有 300 x 10 矩形的钢筋，以及一个用于材料的空字符串。然后我将材料设置为钢。

当我在我的程序中尝试类似的东西时，它一直在告诉我不能从一个较低的班级隐式地创建一个较高的班级。考虑到我看到的所有动物示例的继承，我会认为这就是为什么存在继承的原因，但我希望有人可以澄清我。

另外，我确定我可以打电话`SteelBar = CreateBar();`，但我在这里做了很长的路。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-13T17:13:22.477

`CreateBar`您可以使用*构造函数*，而不是使用方法 ( ) ：

```
public Bar()
{
    this.Area = new Rectangle(new Point(0,0), new Size(300,10));
} 
```

然后，在 SteelBar 中，您将调用基类构造函数：

```
public SteelBar()
{
    this.Material = "Steel";
} 
```

基类构造函数将*首先*出现，因此您的区域已经设置好了。不过，您可以明确说明这一点，并将其显示在您的代码中：

```
public SteelBar()
    : base()
{
    this.Material = "Steel";
} 
```

但是，这通常仅在您想要具有带参数的特定构造函数时使用。

有关详细信息，请参阅C# 编程指南中的[构造函数。](http://msdn.microsoft.com/en-us/library/ace5hbzh.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T17:15:34.177

这是你的问题：

```
Bar B = CreateBar();
SteelB = B; 
```

`B`*是任何一种*酒吧。您正在尝试将其分配给`SteelBar`. 错了，它可能是任何类型的酒吧（铜、木头、Tiki，...）。你可以这样做：

```
SteelBar sb = new SteelBar();
Bar b = sb; 
```

因为 a`SteelBar`是某种酒吧，但反过来不是真的..

> 另外，我确定我可以调用 SteelBar = CreateBar()

你确定某事是假的。尝试一下; *返回任何类型*`CreateBar`的 bar 的实例，而不是.*`SteelBar`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T17:16:23.880

正如 pycruft 提到的，您不能将基本类型的对象分配给子类型变量。我不明白你为什么要添加一个`SteelBar`，因为你也有一个`Material`属性。这在我看来是多余的。

为了实现您想要做的事情，您必须创建一个`SteelBar`从一开始就构建 a 的新工厂方法。`Bar`无论如何，它可能会返回它。这将是[工厂模式](http://www.dofactory.com/Patterns/PatternFactory.aspx)的实现。

但是，有关您要实现的目标的更多信息可能会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T17:17:20.723

> 它一直在告诉我不能从下层阶级隐含地创建上层阶级

我为此使用的最佳示例是`Fruit`and `apple`。继承是一种“is-a”关系。一个`apple`is-a`Fruit`但 a`Fruit` **不是**一个`apple`，因为它可以是一个`orange`, `banana`...

回到您的示例， a`SteelBar`是 a`Bar`但 a`Bar`不是 a`SteelBar`因为它可以是 a `WoodenBar`，这解释了为什么您不能将超类强制转换为子类

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T17:13:13.890

你不能这样做：

```
SteelBar = B; 
```

您创建了一个 Bar 类型的新对象，并尝试将其分配给 SteelBar 类型的引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T17:14:45.237

我很确定您的问题是您正在尝试向上转换：

```
Bar B = CreateBar();
SteelBar = B; 
```

这是不对的，因为即使 SteelBar 必须是类型`Bar`（因为它继承自），也不能向后执行相同的操作。

相反是合法的：

```
SteelBar B = CreateBar();
Bar = (Bar)B; 
```

很简单，您正试图存储`SteelBar`in的引用`Bar`，而它可能是另一种条形类型，例如`WoodenBar`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T17:16:42.787

当然，这会更容易通过诸如接口之类的抽象来实现……例如 IMeasureable 和 IPhysical 而不是基类……

我将仅在 GUI 表示中使用 BaseClass 以便于显示它们，并且我将强制基类实现所需的接口。

您还可以选择使用密封的 DisplayObject 并采用 IMeasurable 或 IPhysical ...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-13T17:20:59.120

考虑这个例子：

```
public class Super {
}

public class Sub : Super {
} 
```

如果您创建对象 Super，则不能将其分配为 Sub，因为它不是“Sub”。OO 编程允许您根据较少派生的类来“处理”对象，但这个简单的事实仍然存在：

您创建了一个 Super 而不是 Sub。

从 Super 创建 Sub 的唯一方法是创建一个新的 Sub 并复制属性值。像 AutoMapper 这样的工具可以很好地快速完成这项工作，否则你最终会得到一堆平凡而脆弱的代码。*

# ios - iOS：如何将 UITableViewCellAccessory 按钮向左移动

> ID：11019878
> 
> 赞同：0
> 
> 时间：2012-06-13T17:08:10.840
> 
> 标签：ios, ipad, uitableview, accessorytype

我正在尝试开发一个 UITableView ，它具有 sectionIndexTitles 并且哪些单元格具有辅助按钮。

问题是索引标题的滚动条减小了单元格的宽度，因此附件按钮处于丑陋的位置......

是否可以将按钮稍微向左移动以使其位于单元格内？

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        cell.textLabel.text = @"text";
    }

    return cell;
} 
```

如您所见，我不操纵细胞或类似的东西。

在这里你可以看到结果：

[http://i.stack.imgur.com/3AB89.jpg](http://i.stack.imgur.com/3AB89.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:11:02.040

有一种方法可以移动默认的附件视图，但它非常 hacky。因此，当新的 sdk 到达时，它可能会停止工作。

使用风险自负（此代码段将任何附件视图向左移动 8 个像素，将其插入到所需的 uitableviewcell 子类的 -(void)layoutSubviews 方法中）：

```
if (self.accessoryView) {
    r = self.accessoryView.frame;
    r.origin.x -= 8;
    self.accessoryView.frame = r;
} else {
    UIView* defaultAccessoryView = nil;
    for (UIView* subview in self.subviews) {
        if (subview != self.textLabel && 
            subview != self.detailTextLabel && 
            subview != self.backgroundView && 
            subview != self.contentView &&
            subview != self.selectedBackgroundView &&
            subview != self.imageView) {
            defaultAccessoryView = subview;
            break;
        }
    }
    r = defaultAccessoryView.frame;
    r.origin.x -= 8;
    defaultAccessoryView.frame = r;
} 
```

# ajax - Internet Explorer 从 ajax 调用中插入选择选项

> ID：11019881
> 
> 赞同：1
> 
> 时间：2012-06-13T17:08:32.427
> 
> 标签：ajax, internet-explorer, jquery, jquery-selectors, html-select

这似乎适用于 Firefox 和 chrome，但不适用于 Internet Explorer。我需要这个才能在 Internet Explorer 中工作。

IE 附加的是开始标签，而不是内部文本和结束标签。提前致谢。

JS：

```
function go() {
   $.post("ajax-select.html", "", function(resp){
      $('#dropdown').append($('#newOptions option', resp));
   }
} 
```

HTML：

```
<body>
   <select id="dropdown">
   </select>
   <input type="submit" value="go" onclick="go();" />
</body> 
```

ajax-select.html：

```
<div>
   <div id="newOptions">
      <option value="opOne">one</option>
      <option value="opTwo">two</option>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:24:18.570

你应该试试

```
$('#dropdown').html($('#newOptions option', resp)); 
```

也看看[这个](https://stackoverflow.com/questions/740195/adding-options-to-a-select-using-jquery-javascript)答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:25:24.040

你的回答不正确。返回的实际 HTML 是：

```
<div>
  <div id="newOptions">
    <div value="opOne">one</div>
    <div value="opTwo">two</div>
  </div>
</div> 
```

纠正它，一切正常：

```
<div>
  <select id="newOptions">
    <option value="opOne">one</option>
    <option value="opTwo">two</option>
  </select>
</div> 
```

使用上述标记（选项正确嵌套在选择元素中），您可以继续使用以下内容：

```
$(function(){
    $("input[value='go']").on("click", function(){
        $.post("ajax-select.html", function(resp){
            $(resp).find("option").appendTo("#dropdown");
        });
    });
}); 
```

# sql - 更新查询中的 EXEC

> ID：11019886
> 
> 赞同：1
> 
> 时间：2012-06-13T17:08:44.540
> 
> 标签：sql, subquery, exec

我想从一个有两个字段的表中选择

标记标记查询（名称） SELECT Name From table_employee where empid=1

结果我想要一张像

标记 标记结果（名称） Tom

所以我想执行我从选择中检索的查询并将其结果存储在我的表中而不是查询中

```
Update  #TempTagQueries
SET     TagQuery    =   CAST(#Temp2.EmailTagQuery AS varchar(MAX))
FROM    #TempTagQueries AS #Temp1 
            INNER JOIN 
            (SELECT EmailTagQuery,EmailTagIdentifier FROM tblEmailTag) AS #Temp2
            ON #Temp1.TagValue  =   #Temp2.EmailTagIdentifier

SELECT * FROM #TempTagQueries 
```

如果可以这样做，或者如果不能，请帮助我，解决方案是什么。因为我避免使用光标来做到这一点。

```
Update  #TempTagQueries
SET     TagQuery    = EXEC( CAST(#Temp2.EmailTagQuery AS varchar(MAX)))
FROM    #TempTagQueries AS #Temp1 
            INNER JOIN 
            (SELECT EmailTagQuery,EmailTagIdentifier FROM tblEmailTag) AS #Temp2
            ON #Temp1.TagValue  =   #Temp2.EmailTagIdentifier

SELECT * FROM #TempTagQueries 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:31:08.367

在不确切知道您正在尝试做什么的情况下，很难提供具体的答案。简短的回答是，如果不使用循环，就无法执行存储在表中的批量动态 sql，以迭代地执行每个动态 sql 块。

但是最接近你的场景，我认为是有效的，可能是这样的。

```
CREATE TABLE input (
  operator    VARCHAR(1),
  value1      INT,
  value2      INT
)

INSERT INTO input SELECT '+', 2, 3
INSERT INTO input SELECT '*', 2, 3
GO

CREATE FUNCTION operation (@operator VARCHAR(1), value1 INT, value2 INT)
RETURNS TABLE
AS
RETURN
            SELECT @value1 * @value2 AS result WHERE @operator = '*'
  UNION ALL SELECT @value1 + @value2 AS result WHERE @operator = '+'
GO

SELECT
  input.operator,
  input.value1,
  input.value2,
  operation.result
FROM
  input
CROSS APPLY
  dbo.operation(input.operator, input.value1, input.value2) AS operation 
```

这样，函数的结果取决于存储在另一个表中的参数。但是您需要能够将实际逻辑预编码到您的函数中，并能够对其进行参数化以使其具有通用性。

如果你真的需要执行未知的动态sql，你需要一个循环并通过痛苦的行来执行每一行。

# ruby-on-rails - 在 Windows 上创建 Gemfile，部署到 Linux 时出现问题

> ID：11019887
> 
> 赞同：0
> 
> 时间：2012-06-13T17:08:46.130
> 
> 标签：ruby-on-rails, rubygems, bundler

我正在将许多应用程序转换为使用 Bundler，并且我看到它说最佳实践是将 Gemfile.lock 检查到版本控制中。但是我（和团队中的其他开发人员）在 Windows 上工作，而在中央开发/测试服务器和生产环境上的部署是 Linux。

根据我的发现，在 Windows 上捆绑任何大量使用 gem 并期望 Gemfile.lock 成功部署到 Linux 环境似乎是不可能的。

我们现在尝试的设置是将 Gemfile 提交到版本控制，然后在部署时执行“捆绑安装”（使用 bundler/capistrano）。虽然这很痛苦（[捆绑器试图安装已经在本地安装的 gem，安装](https://stackoverflow.com/questions/11019742/when-running-bundle-install-bundler-tries-to-install-gem-that-is-already-inst)时的权限问题），我只是想确保我们没有走错路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:44:56.397

Bundler 允许基于平台创建组。你试过用那个吗？使用这种方法，我们能够在 windows 和 linux 上维护一个重要的 Rails 应用程序。

例如：

```
platforms :ruby do
  linux compatible gems
end

platforms :mswin do
  windows compatible gems
end 
```

# gnuplot - 在 gnuplot 中绘制一些分段函数

> ID：11019893
> 
> 赞同：3
> 
> 时间：2012-06-13T17:09:13.143
> 
> 标签：gnuplot

您能否告诉我如何绘制如下所示的函数：

```
f(x)=(x-1)^2 for 0 < x < 1 
f(x)=(x-8)^2 for 1<=x<=7
f(x)=x for x>7 
```

在 gnuplot 中。（如果您能说出如何用英语调用这种函数，我会尝试将主题更改为更合适的主题）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:28:30.840

你可以这样做：

```
f(x)=x<=1 ? -(x-1)**2+1 :  x>7 ? (-48)*sin(240)+1+0.5*x : (-(x-1)**2+1)*sin(30*x)+1
plot f(x) 
```

# javascript - .val("value") 在 jQuery 1.5 中没有按预期工作

> ID：11019895
> 
> 赞同：4
> 
> 时间：2012-06-13T17:09:19.873
> 
> 标签：javascript, jquery, grails, jquery-1.5

我正在使用 jQuery 1.5.2 来操作表单上的 2 个下拉选择。我有一个特殊要求，如果选择了“其他”选项，则两个选择都必须是“其他”。

# 问题：

我的代码看起来像这样

```
$("#Select_One")
    .change(function() {
        if($(this).val() == "Other") {
            $("#Select_Two").val("Other");
        }
        else {
            if($("#Select_Two").val() == "Other") {
                $("#Select_Two").val("");
            }
        }
    });

$("#Select_Two")
    .change(function() {
        if($(this).val() == "Other") {
            $("#Select_One").val("Other");
        }
        else {
            if($("#Select_One").val() == "Other") {
                $("#Select_One").val("");
            }
        }
    }); 
```

问题是，不是强制执行两个字段都是“其他”的规则，而是在每个under上`$("#Select_Two").val("Other");`添加或覆盖属性。同样的事情发生在.`value="Other"``<option>``#Select_Two``#Select_One`

我的 HTML 来自 grails 模板

```
 <g:select id="Select_One"
              name="Units_One"
              class="Required DropDown"
              from="${Unit_One.values()}"
              optionKey="value_"
              optionValue="${{it.value_}}"
              noSelection="${['': message(code: 'units.no.selection')]}"
     />
     <g:select id="Select_Two"
               name="Units_Two"
               class="Required DropDown"
               from="${Unit_Two.values()}"
               optionKey="value_"
               optionValue="${{it.value_}}"
               noSelection="${['': message(code: 'units.no.selection')]}"
     /> 
```

在将 ether 字段设置为“Other”后，chrome 调试器向我显示的是这个......

```
<select name="Units_Two" id='Select_Two" class="Required DropDown">
  <option value="Other">Select Number</option>
  <option value="Other">Other</option>
  <option value="Other">1</option>
  etc... 
```

这些函数的 else 子句按预期工作。

* * *

# 问题：

如何强制在一个字段中选择“其他”会自动在相应字段中选择“其他”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:35:52.497

也许尝试：

```
$("#Select_One").change(function() {
    if ($(this).val() == "Other") {
        $("#Select_Two option[value='Other']").attr("selected",true);
    }
    else {
        if ($("#Select_Two").val() == "Other") {
            $("#Select_Two").val("");
        }
    }
});

$("#Select_Two").change(function() {
    if ($(this).val() == "Other") {
        $("#Select_One option[value='Other']").attr("selected",true);
    }
    else {
        if ($("#Select_One").val() == "Other") {
            $("#Select_One").val("");
        }
    }
});​ 
```

# iphone - 在表格视图中重用单元格导致问题

> ID：11019908
> 
> 赞同：0
> 
> 时间：2012-06-13T17:09:52.207
> 
> 标签：iphone, ios, xcode, uitableview

在 TableView 中设置单元格时遇到问题...我使用图像视图和两个标签、一个标题和一个详细信息设置了表格视图。第一部分看起来不错，但滚动后，它不断地将所有标签堆叠在一起。

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];

}

RSSEntry *entry = [_allEntries objectAtIndex:indexPath.row];
   NSDateFormatter * dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setTimeZone:[NSTimeZone localTimeZone]];
[dateFormatter setTimeStyle:NSDateFormatterShortStyle];
[dateFormatter setDateStyle:NSDateFormatterShortStyle];
NSString *articleDateString = [dateFormatter stringFromDate:entry.articleDate];
NSLog(@"%@", articleDateString);
//  cell.textLabel.text = entry.articleTitle; 
// cell.detailTextLabel.text = [NSString stringWithFormat:@"%@ - %@", articleDateString, entry.blogTitle];

UIFont *cellFont = [UIFont fontWithName:@"ArialRoundedMTBold" size:17];    
//cell.textLabel.font = cellFont;
UIFont *cellFont2 = [UIFont fontWithName:@"ArialRoundedMTBold" size:12];    
//cell.detailTextLabel.font = cellFont2;
UIImage *img = [UIImage imageNamed:@"anicon.png"];
UIImageView *alternate = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,70,70)];

alternate.image = img;
UILabel *alternatelabel = [[UILabel alloc] initWithFrame:CGRectMake(75,0,210,70)];
alternatelabel.backgroundColor = [UIColor clearColor];
UILabel *detailLabel = [[UILabel alloc] initWithFrame:CGRectMake(75, 20, 225, 70)];
detailLabel.backgroundColor = [UIColor clearColor];
detailLabel.text = [NSString stringWithFormat:@"%@ - %@", articleDateString, entry.blogTitle];
detailLabel.font = cellFont2;
alternatelabel.font = cellFont;

alternatelabel.text = entry.articleTitle;

[cell.contentView addSubview:alternate];
[cell.contentView addSubview:alternatelabel];
[cell.contentView addSubview:detailLabel];
[detailLabel release];
[alternatelabel release];
[alternate release];
NSLog(@"imageurl%@", img);

return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:23:31.553

我想建议您在此方法中分配并添加到单元格子组件中

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
UILabel *detailLabel = [[UILabel alloc] initWithFrame:CGRectMake(75, 20, 225, 70)];
detailLabel.tag = 88;
detailLabel.backgroundColor = [UIColor clearColor];

[cell.contentView addSubview:detailLabel];
} 
```

然后将这一行写在 if 循环之外。

```
UILabel *detailLabel = (UILabel *)[cell viewWithtag:88];
detailLabel.text = [NSString stringWithFormat:@"%@ - %@", articleDateString, entry.blogTitle]; 
```

不要忘记分配标签值。

然后你可以像下面这样访问

希望你能明白我想说的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:15:28.920

那是因为您不断在重复使用的单元格上添加标签，当一个单元格被重复使用时，它会恢复原样（使用您添加的上一个标签），并且您不断添加标签......

解决方案..

1- 子类 UITableViewCell 拥有你想要的标签，只需设置它们的文本和属性

2-从单元格中删除标签（如果有的话）并重新添加单元格，或者用标签标记它们，以便以后找到它们并设置它们的文本（我可能会选择选项 1）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T05:46:16.137

[http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7)

最适合您的问题

# vba - 将数据行复制到另一个没有统一行数据的工作表 Excel 2010

> ID：11019909
> 
> 赞同：-1
> 
> 时间：2012-06-13T17:10:01.880
> 
> 标签：vba, excel

几年前，我在宏和 VBA 方面有过一些经验，但是，我在编写宏以将数据行从主表复制到指定的工作表时遇到了麻烦。

我想对我公司数据库提供的抵押贷款数据进行排序。导入 Excel 时，我从 A 列到 AJ 列中获取数据。我想根据`Current Phase`Y 列中的标题对行进行排序。

（无状态（Y 列中未提供文本，“资格预审”和所有其他内容（“申请”、“提交处理”、“处理接受”、“提交”、“承保收到”、“暂停” 、“拒绝”、“撤回”、“有条件批准”、“清除关闭”、“已关闭”、“已入库”、“已发货”、“已资助”））。

我的问题在这里起作用，因为借款人的姓名在 B 列中，而他们的地址在 C 列中。大多数情况下，地址写在 2 行中，但有时在 2 行中没有提供地址（与 name 和所有其他数据，以及名称和所有其他数据下面的行）和其他时候，1 行中没有提供地址（与名称和所有其他数据相同）。

任何人都可以提供一些宏观帮助，根据 Y 列中的信息将提供借款人信息的 1 行或 2 行复制到所需的工作表中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:33:58.263

我建议你的是我们在工作中经常做的事情。

*   有一个主工作表，您将在其中输入所有可能的文本组合，并在其旁边的单元格中输入相应的工作表名称。
*   命名两个范围。
*   在数据选项卡中添加一个新列（在 AK 列中），其公式如下： =index(SHEET_NAMES, equiv($Y2, STATUSES)) 这将找到 Y2 中数据行的对应工作表名称（假设您有标题在第 1 行）

最后，只需从数据范围的开头循环直到数据为“”（空）并将数据放入 AK 中找到的选项卡名称中。

希望这可以帮助。

# facebook - Facebook Javascript SDK 如何确定是显示触摸还是 WAP 登录对话框？

> ID：11019910
> 
> 赞同：1
> 
> 时间：2012-06-13T17:10:05.047
> 
> 标签：facebook, facebook-javascript-sdk, facebook-login

使用弹出式 OAuth 对话框时，您可以决定是显示 WAP 对话框还是触摸对话框，但是当使用 Javascript 客户端时，当未指定显示类型时，Facebook 如何决定是否显示 WAP 对话框或触摸对话框？

由于似乎在 2012 年 7 月，WAP 对话框将被弃用，它是否也不再由 Javascript SDK 提供？

# iphone - 为 UINavigationBar 上的后退按钮设置自定义图像

> ID：11019914
> 
> 赞同：14
> 
> 时间：2012-06-13T17:10:17.767
> 
> 标签：iphone, objective-c, xcode, uinavigationcontroller, uibutton

我正在尝试为后退按钮设置自定义图像，当新视图被推入堆栈时，该图像会自动放置在导航栏上。

我尝试在父视图控制器的 viewDidLoad 中添加以下内容：

```
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:[UIImage imageNamed:@"BackButton.png"] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

我还尝试了以下方法：

```
UIBarButtonItem *btn = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"BackButton.png"] style:UIBarButtonItemStyleBordered target:nil action:nil];
    self.navigationItem.backBarButtonItem = btn; 
```

使用 UIAppearance 会产生非常奇怪的结果： ![BackButton 图像似乎位于原始标题下方](../Images/04e1153168b0774b78e439adcc9ee00d.png)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-13T18:27:47.713

试试这个代码

```
UIButton *backBtn = [UIButton buttonWithType:UIButtonTypeCustom];  
UIImage *backBtnImage = [UIImage imageNamed:@"BackBtn.png"]  ;  
[backBtn setBackgroundImage:backBtnImage forState:UIControlStateNormal];  
[backBtn addTarget:self action:@selector(goback) forControlEvents:UIControlEventTouchUpInside];  
backBtn.frame = CGRectMake(0, 0, 54, 30);  
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithCustomView:backBtn] ;  
self.navigationItem.leftBarButtonItem = backButton; 
```

然后像这样定义 goback 方法

```
- (void)goback
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-12-20T00:34:10.773

Since iOS 7.0 there is a new method in API `backIndicatorImage`. You can use it instead of `setBackButtonBackgroundImage` if you don't want the image to be stretched to fit the text (for example if you want a fixed size custom back arrow). Here's an example in swift:

```
let image = UIImage(named: "back_button")

UINavigationBar.appearance().backIndicatorImage = image
UINavigationBar.appearance().backIndicatorTransitionMaskImage = image 
```

You can hide the text from the button using this trick:

```
UIBarButtonItem.appearance().setBackButtonTitlePositionAdjustment(UIOffsetMake(0, -66), for: .default) 
```

for Swift 5

var backButtonImage = UIImage(named: "back_button")

backButtonImage = backButtonImage?.stretchableImage(withLeftCapWidth: 15, topCapHeight: 30) UIBarButtonItem.appearance().setBackButtonBackgroundImage(backButtonImage, for: .normal, barMetrics: .default)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-06-13T23:31:32.623

这是我正在使用的代码，可以在我自己的 iOS 5 应用程序中完美运行。此代码来自`application:didFinishLaunchingWithOptions:`应用程序委托：

```
UIImage * backButtonImage = [UIImage imageNamed: @"back-button-image"];
backButtonImage = [backButtonImage stretchableImageWithLeftCapWidth: 15.0 topCapHeight: 30.0];
[[UIBarButtonItem appearance] setBackButtonBackgroundImage: backButtonImage forState: UIControlStateNormal barMetrics: UIBarMetricsDefault]; 
```

您可能需要使用可拉伸的图像，其中面向左侧的“点”是*左帽*

* * *

*或在斯威夫特*

```
let backButtonImage = UIImage(named: "back-button-image")
backButtonImage = backButtonImage?.stretchableImageWithLeftCapWidth(15, topCapHeight: 30)
UIBarButtonItem.appearance().setBackButtonBackgroundImage(backButtonImage, forState: .Normal, barMetrics: .Default) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-06-11T18:09:28.577

iOS 8+ Swift version (can be converted to ObjC with not much effort). This method preserves all advantages and behaviour of navigation bar related to standard back button (animation on pushing/popping, interactive pop gesture, etc)

```
// Call the code ONE TIME somewhere on app launch to setup custom back button appearance
UINavigationBar.appearance().tintColor = UIColor.blackColor()
// If you need custom positioning for your back button, in this example button will be 1 px up compared to default one
// Also only vertical positioning works, for horizontal add offsets directly to the image
let backImageInsets = UIEdgeInsetsMake(0, 0, -1, 0)
// Get image, change of rendering (so it preserves offsets made in file), applying offsets
let backImage = UIImage(named: "YourButtonImageAssetFileName")?.imageWithRenderingMode(.AlwaysOriginal).imageWithAlignmentRectInsets(backImageInsets)
// Setting images
UINavigationBar.appearance().backIndicatorImage = backImage
UINavigationBar.appearance().backIndicatorTransitionMaskImage = backImage

// Call EACH TIME BEFORE pushing view controller if you don't need title near your back button arrow
self.navigationItem.backBarButtonItem = UIBarButtonItem(title: "", style: .Plain, target: nil, action: nil)
// Push controller
self.navigationController?.pushViewController(vc, animated: true) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-31T08:38:35.387

Try the code below, it works for me:

```
[[UINavigationBar appearance] setBackIndicatorImage:[UIImage imageNamed:@"back-button-image"]];
[[UINavigationBar appearance] setBackIndicatorTransitionMaskImage:[UIImage imageNamed:@"back-button-image"]]; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-03T04:34:37.737

此代码适用于**Swift 5**和**XCode 10**：

将此代码添加到 AppDelegate`func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool`以应用于所有视图控制器：

```
//Custom back button
    let barButtonItemAppearance = UIBarButtonItem.appearance()
    barButtonItemAppearance.setTitleTextAttributes([NSAttributedStringKey.foregroundColor: UIColor.clear], for: .normal)
    barButtonItemAppearance.setTitleTextAttributes([NSAttributedStringKey.foregroundColor: UIColor.clear], for: .highlighted)
    let backImg: UIImage = UIImage(named: "back")!
    barButtonItemAppearance.setBackButtonBackgroundImage(backImg, for: .normal, barMetrics: .default)

    let image = UIImage()

    UINavigationBar.appearance().backIndicatorImage = image
    UINavigationBar.appearance().backIndicatorTransitionMaskImage = image 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-06-11T12:41:23.037

将此方法写在公共类中，并从要在其中绘制的控制器中调用它。

```
(UIButton *)drawNavigationBarBackButton:(UIViewController*)viewController 
{

    UIImage *navBackImage = nil;

    UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
     navBackImage = [UIImage imageNamed:@"Back_Button"];

    [backButton setImage:navBackImage forState:UIControlStateNormal];
    UIBarButtonItem *leftButton = [[UIBarButtonItem alloc] initWithCustomView:backButton];
    viewController.navigationItem.leftBarButtonItem = leftButton;

    return backButton;
}

call from controller class and setting action

- (void)viewDidLoad {

[super viewDidLoad];

 UIButton *backButton = [CommonClass drawNavigationBarBackButton:self];
    [backButton addTarget:self action:@selector(onTapBackButton) forControlEvents:UIControlEventTouchUpInside];
}

- (void)onTapBackButton 
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-05-04T11:44:19.350

**这对我有用：**

```
let button1 = UIBarButtonItem(
    image: #imageLiteral(resourceName: "back_arrow"), 
    style: .plain, 
    target: self, 
    action: #selector(self.backBtnTapped(_:))
)
self.navigationItem.leftBarButtonItem  = button1 
```

# jquery - jQuery 和 WordPress（版本 3.3.2）

> ID：11019916
> 
> 赞同：1
> 
> 时间：2012-06-13T17:10:27.793
> 
> 标签：jquery, wordpress

我在自定义主题的 js 目录中添加了一个新的 JavaScript 文件，并在 header 块中的 header.php 中引用它，如下所示：

```
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/js/myScript.js"></script> 
```

js 文件的内容是测试一个 jQuery 警报：

```
(function($) {

  $(document).ready(function(){
    alert('ready');
  });

})(jQuery); 
```

我尝试了多种无冲突解决方案，但我的脚本仍然被忽略。我被难住了，还有人解决这个问题吗？在过去的几年中，我查看了一些不同的解决方案，现在它们似乎都是文库。

我什至在我的脚本之前在 header.php 中尝试过这个：

```
<?php wp_enqueue_script("jquery"); ?> 
```

任何帮助表示赞赏，因为我现在被阻止了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:20:58.893

尝试：

```
 jQuery(document).ready(function($){
    alert('ready');
  }); 
```

不使用`(function($) {})(jQuery);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:23:25.420

尝试：

```
$(function() {

      alert('ready');

}); 
```

# javascript - Rotator 与 MailChimp 集成冲突。

> ID：11019917
> 
> 赞同：1
> 
> 时间：2012-06-13T17:10:40.023
> 
> 标签：javascript, conflict, mailchimp, rotator

www.furnaceworldco.com 主页上的轮播与 mailchimp/newsletter 注册表相冲突。在内部页面上，我可以点击时事通讯注册上的提交，它可以工作；但是，如果从主页填写表格，则提交按钮不起作用。

我已启用“SC jquery”并收到阻止旋转器加载的错误。有什么建议么？

# mysql-workbench - Ubuntu 12.04 上的 MySQL Workbench 无法启动

> ID：11019919
> 
> 赞同：4
> 
> 时间：2012-06-13T17:10:43.540
> 
> 标签：mysql-workbench, ubuntu-12.04

MySQL Workbench 直到今天都运行良好。我安装了定期更新，现在它只是没有启动。启动时它只显示打开屏幕，没有任何反应。

我尝试从突触重新安装它，但没有运气。我一直在使用它，现在很痛苦。任何帮助将不胜感激。

从终端运行时：

```
mysql-workbench --log-level=debug3 --verbose 
```

它给出了一个长日志。请参阅： http: [//pastebin.com/Z2t8pdZF](http://pastebin.com/Z2t8pdZF)

我在日志中看到这些错误，但不知道它们的含义以及它是如何自动停止工作的：

> /home/atul/.mysql/workbench/wb_state.xml:1：解析器错误：文档为空
> 
> ^ /home/atul/.mysql/workbench/wb_state.xml:1：解析器错误：需要开始标记，未找到“<”
> 
> ^ /home/atul/.mysql/workbench/user_starters.xml:1：解析器错误：文档为空
> 
> ^ /home/atul/.mysql/workbench/user_starters.xml:1：解析器错误：需要开始标记，未找到“<”
> 
> ^ /home/atul/.mysql/workbench/starters_settings.xml:1：解析器错误：文档为空
> 
> ^ /home/atul/.mysql/workbench/starters_settings.xml:1：解析器错误：需要开始标记，未找到“<”

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T04:41:08.020

删除文件 wb_options.xml 然后试一试。

参考 [http://bugs.mysql.com/bug.php?id=64087](http://bugs.mysql.com/bug.php?id=64087)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-31T13:49:04.867

只需删除`wb_options.xml`里面的`/home/<your username>/.mysql/workbench/`文件夹。

这解决了问题，而且您数据库中的所有数据仍然存在。

这绝对是比重新安装 mysql-workbench 更好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T21:23:54.733

规范和上帝知道出了什么问题。但这里有一个修复：

下载：

对于 64 位系统： http: [//launchpadlibrarian.net/56565535/libzip1_0.9-3ubuntu0.1_amd64.deb](http://launchpadlibrarian.net/56565535/libzip1_0.9-3ubuntu0.1_amd64.deb)

对于 32 位系统： http: [//launchpadlibrarian.net/56565266/libzip1_0.9-3ubuntu0.1_i386.deb](http://launchpadlibrarian.net/56565266/libzip1_0.9-3ubuntu0.1_i386.deb)

下载后，双击安装。

现在下载最新版本的 My SQL 工作台，它适用于 11.10，但可以在 12.04 上运行。确保下载适合您的版本（32 位或 64 位）：[http ://www.mysql.com/downloads/workbench/#downloads](http://www.mysql.com/downloads/workbench/#downloads)

下载后，双击安装。

你完成了。

# css - 预定义属性

> ID：11019921
> 
> 赞同：0
> 
> 时间：2012-06-13T17:10:45.683
> 
> 标签：css

我有这个小提琴： http: [//jsfiddle.net/XjeCf/1/](http://jsfiddle.net/XjeCf/1/)像我想要的那样工作，而这个：http: [//jsfiddle.net/XjeCf/](http://jsfiddle.net/XjeCf/)没有。

我应该在标签中添加什么`triangle`使其像 div 一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:14:35.533

您必须添加`display:block;`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:14:48.187

您需要添加：

```
display: block; 
```

不过，这可能因浏览器而异，因为它们的默认样式表有所不同（我正在 Chrome 中进行测试）。您应该使用检查器/Firebug/等。查看浏览器应用了哪些样式。

最后，您应该强烈地重新考虑在 HTML 中使用自定义标签，因为它违背了制定规范的目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T17:15:25.807

你应该添加

```
display:block; 
```

到你的三角形 css

# android - 如何在android中将数据插入SQLite数据库？

> ID：11019924
> 
> 赞同：5
> 
> 时间：2012-06-13T17:11:02.220
> 
> 标签：android, sqlite

我已经看到了在 android 中使用 SQlite 的示例……但在那个特定示例中，每次运行应用程序时都会插入记录……但我只想永久插入一次！有什么可能？？？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T18:12:33.377

```
 //DB HANDLER CLASS
    public void saveRecords(String info, int otherinfo, int greatinfo){

    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(STRING_COLUMNA, info); // inserting a string
    values.put(STRING_COLUMNB, otherinfo); // inserting an int
    values.put(STRING_COLUMNC, greatinfo); // inserting an int

    // Inserting Row
    db.insert(TABLE_NAME, null, values);
    db.close(); // Closing database connection

} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T17:18:48.443

`onCreate`在SQLiteOpenHelper的方法中插入值。它仅在您的数据库创建时调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T17:20:24.470

SQLite 数据库是持久的，所以一旦你在手机或平板电脑上安装了应用程序并创建了数据库，记录应该保留在那里，直到你删除记录或整个数据库。

您应该从 Application 类中调用 SQLiteDatabaseHelper。因此，每次打开应用程序时，它都会按您给它的名称查找数据库。如果它找不到它创建的数据库 - 如果您有一条只想插入一次的记录，您应该在 onCreate 方法中创建记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T17:21:12.457

如果没有代码或关于您想要做什么的更多详细信息，很难提供太多帮助。您可以做的是将您的 sql 插入函数绑定到 OnClickListener 或其他一些操作侦听器，以便仅在您需要时添加条目，而不是在每次创建活动时添加。

# android - 我在 Google Play 中的应用的精选版块

> ID：11019926
> 
> 赞同：-2
> 
> 时间：2012-06-13T17:11:05.660
> 
> 标签：android, google-play

当我在手机上启动 Play 商店应用程序时，它会将我带到 Google Play，并显示不同的部分（精选、热门付费、热门免费等）。

我的要求是，当我去 Google Play 时，它应该在 Google Play 中显示我的公司应用程序部分（我的特色部分）。我可以做吗？

一种想法是我提供了一个指向 Google Play 的 URL，并传递了一些参数来获取我的特色部分。

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:14:30.370

> 我的要求是，当我去 Google Play 时，它应该在 Google Play 中显示我的公司应用程序部分（我的特色部分）。我可以做吗？

不，Google Play 不是您的应用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:20:27.890

您无法操纵特色应用部分中显示的应用（当然，创建高质量应用除外）

但是您可以通过形成这样的 URL 打开一个列出所有应用程序的页面：

```
https://play.google.com/store/apps/developer?id=[YourMarketEnabledGoogleAccountName] 
```

填写您的谷歌帐户名称。当在（大多数）设备上打开此 URL 时，它会提示用户打开与 Google Play 的链接，如果他们选择这样做，它将向他们显示您的应用程序列表。

# xml-serialization - 使用 i:nil=false 创建 xml 元素

> ID：11019927
> 
> 赞同：1
> 
> 时间：2012-06-13T17:11:06.747
> 
> 标签：xml-serialization

我正在尝试创建一个应该是这样的元素：“< Info i:nil="true" />

我的代码是这样的

来自 xmlReport 中的 xlist

```
 select new XElement("Binding",
                    new XElement("ID", xlist.ID),
                    new XElement("Name", xlist.Name),

                    new XElement("Info"),
                    new XElement("Specification",
                    new XElement("Number", xlist.Number),
                    new XElement("SerialNumber", xlist.SerialNumber),
                    new XElement("Date", xlist.ConsumedDate),
                    new XElement("Site", xlist.Site))) 
```

这行代码正在生成上面提到的 XML <Info/> 标签

而不是 <Info i:nil=true/>

我如何得到这个 "i:nil=true" ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:15:02.117

好吧，这似乎可以满足您的要求，但是您需要填写正确的名称空间：

```
using System;
using System.Xml.Linq;

class Program
{    
    public static void Main()
    {
        XNamespace ns = "http://somenamespace";
        XElement element = new XElement("Root",
            new XAttribute(XNamespace.Xmlns + "i", ns.ToString()),
            new XElement("info",
                new XAttribute(ns + "nil", true)));

        Console.WriteLine(element);
    }    
} 
```

第一个属性将前缀“i”与根元素及其后代的命名空间“http://somenamespace”相关联。第二个属性使用该命名空间，当元素被写出时，前缀用于表示命名空间。

# ruby-on-rails-3 - 从电子邮件中提取图像内容我得到“未定义的方法‘解码’”

> ID：11019931
> 
> 赞同：0
> 
> 时间：2012-06-13T17:11:26.620
> 
> 标签：ruby-on-rails-3

我正在使用[Cloudmailin](http://www.cloudmailin.com/)服务让用户从移动设备上传个人资料图片。Cloudmailin 将以 HTTP POST 的形式将电子邮件转发到我们的站点。他们有[四种方法](http://docs.cloudmailin.com/http_post_formats/)来格式化帖子。我正在使用[Multipart/form-data 哈希电子邮件消息格式](http://docs.cloudmailin.com/http_post_formats/multipart/)，因为我认为获取附件数据会更容易。在我的控制器中，我有以下内容：

```
require 'mail'
skip_before_filter :verify_authenticity_token

def create
  ...
      attachment = params[:attachments].first
      file = StringIO.new(attachment.decoded)
  ...
end 
```

错误信息：

```
NoMethodError (undefined method `decoded' for #<Array:0xb5060c24>) 
```

我想我可能会尝试使用 mms2r 但在尝试安装我得到的 gem：

```
"Error installing mms2r: ERROR: Failed to build gem native extension." 
```

与其解决 mms2r 问题，我宁愿在没有它的情况下解决它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:00:05.730

传递的附件是一个以 0 开头的散列。您需要使用类似的东西遍历每个附件

```
params[:attachments].each do |key,value|
  # do something with value
  logger.info value.inspect
end 
```

这应该可以让您访问临时文件。在多部分格式的情况下，没有 base64 编码。附件按原样发送，并可通过文件访问，因为机架将提取多部分文件。

# php - 在 php 中使用 mailto() 函数的 HTML 电子邮件

> ID：11019932
> 
> 赞同：-2
> 
> 时间：2012-06-13T17:11:29.397
> 
> 标签：php, email

> **可能重复：**
> [从 PHP 发送 HTML 电子邮件](https://stackoverflow.com/questions/3058897/sending-html-email-from-php)

`mailto()`我需要使用 php函数发送 html 邮件。我在保存邮件脚本的同一个文件夹中有mail.html（这是我需要发送的邮件的正文）。我想要邮件正文中的 html 内容的内容，而不是作为附件。我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:14:15.640

请务必在邮件中添加 HTML 标头：

```
<?php
$header = "Content-Type: text/html\n";   
mail($to, $subject, $text, $header);
?> 
```

# c# - 在 C# 中滚动到单行文本框的末尾

> ID：11019933
> 
> 赞同：4
> 
> 时间：2012-06-13T17:11:35.583
> 
> 标签：c#, .net, winforms

关于单行文本框（Multiline 属性设置为 false），当文本长度超过框的水平大小时，是否可以滚动到行尾？

我尝试了各种适用于多行框的解决方案，但到目前为止，它们都没有奏效。

过去有几个人提出了非常相似的问题，但它始终关注多行文本框。我在 SO 上遇到的问题/解决方案如下：

[滚动到 C# TextBox 的底部](https://stackoverflow.com/q/1228675/1415616)

[如何自动滚动到多行文本框的底部？](https://stackoverflow.com/q/898307/1415616)

现在我有以下代码（似乎不起作用）：

```
PathText.Text = "";
PathText.AppendText(BrowseDialog.SelectedPath);
PathText.SelectionStart = PathText.TextLength;
PathText.ScrollToCaret();
PathText.Refresh(); 
```

`PathText`是正在使用的文本框，并且`BrowseDialog`是一个 FileDialog。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:16:55.863

你可以这样做：

```
 PathText.Focus();
 PathText.Select(PathText.Text.Length, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:27:10.927

```
textBox1.Select(textBox1.Text.Length, 0);
// call focus 
textBox1.Focus(); 
```

或者

```
textBox1.SelectionStart = textBox1.Text.Length;
textBox1.ScrollToCaret();
textBox1.Focus(); 
```

# ruby-on-rails - 红宝石取决于...旧的宝石版本

> ID：11019934
> 
> 赞同：0
> 
> 时间：2012-06-13T17:11:39.903
> 
> 标签：ruby-on-rails, gem, spree

我在`spree`app( `v. 0.70.5`) 工作，但我需要安装一些依赖于`spree v. 0.70.0`. 这个应用程序已经在生产中工作了，我不知道我是否可以回滚大礼包版本（到`0.70.0`）。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:24:07.900

查看版本之间的更改日志，如果没有任何问题，请尝试使用 0.70.0

```
gem "spree", "0.70.0" 
```

并测试您的应用

或者，您可以 fork 依赖于旧版本 spree 的 gem 并尝试升级它

# security - Symfony2 的角色层次结构

> ID：11019937
> 
> 赞同：6
> 
> 时间：2012-06-13T17:11:46.910
> 
> 标签：security, symfony, hierarchy, roles, role

我的 role_hierarchy 有一个大问题，

```
security:
    role_hierarchy:
        ROLE_ADMIN:[ROLE_USER,ROLE_AUTHOR,ROLE_MODERATOR]
        ROLE_SUPER_ADMIN:[ROLE_ADMIN,ROLE_ALLOWED_TO_SWITCH] 
```

这样，如果我获得了 SUPER_ADMIN 角色，我将获得 ROLE_AUTHOR、ROLE_MODERATOR、ROLE_USER 和 ROLE_ADMIN。但我的问题是当我登录我的网站时，如果我检查分析器，我可以看到我只有 ROLE_SUPER_ADMIN，而不是其他角色，所以，你能帮我吗？

我的看法 ( `base.html.twig`)

```
<h3>Blog</h3>
<ul class="nav nav-pills nav-stacked">
    <li><a href="{{ path('dom_home') }}">Home Page</a></li>
    {% if is_granted('ROLE_AUTHOR') %}
        <li><a href="{{ path('dom_add') }}">Add a post</a></li>
    {% endif %}
    {% if is_granted('IS_AUTHENTICATED_FULLY') %}
        <li><a href="{{ path('fos_user_security_logout') }}">Logout</a></li>
    {% else %}
        <li><a href="{{ path('fos_user_security_login') }}">login</a></li>
        <li><a href="{{ path('fos_user_registration_register') }}">register</a></li>
    {% endif %}
</ul> 
```

我的`security.yml`（应用程序/配置）

```
security:
    encoders:
        Symfony\Component\Security\Core\User\User: plaintext
        FOS\UserBundle\Model\UserInterface: sha512

    role_hierarchy:
        ROLE_ADMIN:       [ROLE_USER,ROLE_AUTHOR,ROLE_MODERATOR]
        ROLE_SUPER_ADMIN: [ROLE_ADMIN,ROLE_ALLOWED_TO_SWITCH]

    providers:
        in_memory:
            users:
                user:  { password: userpass, roles: [ 'ROLE_USER' ] }
                admin: { password: adminpass, roles: [ 'ROLE_ADMIN' ] }
        fos_userbundle:
            id: fos_user.user_manager
    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false
        login:
            pattern:   ^/(login$|register|resetting)
            anonymous: true
        main:
            pattern: ^/
            form_login:
                provider:    fos_userbundle
                remember_me: true
                always_use_default_target_path: true
                default_target_path: /dom/
            remember_me:
                key:         %secret%
            anonymous:       false
            logout:          true 
```

编辑：

我的观点（base.html.twig）

```
<h3>Blog</h3>
<ul class="nav nav-pills nav-stacked">
    <li><a href="{{ path('dom_home') }}">Home Page</a></li>
    {% if is_granted('ROLE_AUTHOR') %}
        <li><a href="{{ path('dom_add') }}">Add a post</a></li>
    {% endif %}
    {% if is_granted('IS_AUTHENTICATED_FULLY') %}
        <li><a href="{{ path('fos_user_security_logout') }}">Logout</a></li>
    {% else %}
        <li><a href="{{ path('fos_user_security_login') }}">login</a></li>
        <li><a href="{{ path('fos_user_registration_register') }}">register</a></li>
    {% endif %}
</ul> 
```

我的 security.yml (app/config)

```
security:
    encoders:
        Symfony\Component\Security\Core\User\User: plaintext
        FOS\UserBundle\Model\UserInterface: sha512

    role_hierarchy:
        ROLE_ADMIN:       [ROLE_USER,ROLE_AUTHOR,ROLE_MODERATOR]
        ROLE_SUPER_ADMIN: [ROLE_ADMIN,ROLE_ALLOWED_TO_SWITCH]

    providers:
        in_memory:
            users:
                user:  { password: userpass, roles: [ 'ROLE_USER' ] }
                admin: { password: adminpass, roles: [ 'ROLE_ADMIN' ] }
        fos_userbundle:
            id: fos_user.user_manager
    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false
        login:
            pattern:   ^/(login$|register|resetting)
            anonymous: true
        main:
            pattern: ^/
            form_login:
                provider:    fos_userbundle
                remember_me: true
                always_use_default_target_path: true
                default_target_path: /dom/
            remember_me:
                key:         %secret%
            anonymous:       false
            logout:          true 
```

请回答 ：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T16:20:40.763

从您提供的代码片段中我看不出有什么问题，所以我制作了一个小示例应用程序，为您提供一步一步的说明，这可能会导致您找到问题的根源。

1.  克隆 symfony-standard (master) (并移除 Acme\DemoBundle)
2.  添加`"friendsofsymfony/user-bundle": "dev-master"`到 composer.json
3.  创建了新的捆绑 Mahok\SecurityBundle ( `php app/console generate:bundle`)
4.  创建了新实体`php app/console doctrine:generate:entity`
5.  根据 FOS\UserBundle 文档修改实体（步骤 3；重要提示：将表名更改为“用户”以外的名称，因为这是保留字，可能会造成麻烦！）
6.  根据 FOS\UserBundle 文档修改了`app/AppKernel.php`、`app/config/config.yml`和。供参考：这是我使用的 security.yml：`app/config/routing.yml``app/config/security.yml`

    ```
    jms_security_extra:
        secure_all_services: false
        expressions: true

    security:
        encoders:
            FOS\UserBundle\Model\UserInterface: sha512

    role_hierarchy:
        ROLE_AUTHOR:      [ROLE_USER]
        ROLE_MODERATOR:   [ROLE_AUTHOR]
        ROLE_ADMIN:       [ROLE_MODERATOR]
        ROLE_SUPER_ADMIN: [ROLE_ADMIN]

    providers:
        fos_userbundle:
            id: fos_user.user_manager

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false

        auth:
            pattern:   (^/login$|^/register|^/resetting)
            anonymous: true

        main:
            pattern:    ^/
            form_login:
                provider:      fos_userbundle
                csrf_provider: form.csrf_provider
            logout:     true
            anonymous:  true

    access_control:
        - { path: ^/admin, role: ROLE_ADMIN } 
    ```

7.  使用 `php app/console fos:user:create sa --super-admin 创建用户

8.  在 Mahok\SecurityBundle 中修改 DefaultController:default.html.twig，检查`{% is_granted('ROLE_MODERATOR') %}`：

    ```
    Hello {{ name }}!
    {% if is_granted('ROLE_MODERATOR') %}
    <ul>
        {% for role in app.user.roles %}
        <li>{{ role }}</li>
        {% endfor %}
    </ul>
    {% else %}
        oh noes!
    {% endif %} 
    ```

**编辑：**当转到 localhost/example/app_dev.php/hello/User 时（以“sa”身份登录后），我得到以下输出：

```
Hello User!
* ROLE_SUPER_ADMIN
* ROLE_USER 
```

# google-app-engine - 个人与总进口的表现

> ID：11019940
> 
> 赞同：0
> 
> 时间：2012-06-13T17:11:59.060
> 
> 标签：google-app-engine

我已经开始关注与实例启动延迟相关的导入。让我想...

我为我的所有 Model.db 类定义使用了一个单独的中央 kinds.py 模块。不同的处理程序/任务模块将从中导入他们使用的类。想知道做一个全球“进口种类”与一系列“从种类进口......”的权衡。如果不需要整个 kind.py，单独导入会更快吗？或者，python/GAE 用于处理单个导入的过程是否会更快？也许存在占全球总量 n% 的收支平衡点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:40:27.050

这两个选项在速度上没有区别。无论如何，Python 必须解析整个文件。

事实上，严格来说，甚至可能在另一个方向上存在差异：使用`from kinds import ...`，Python 必须创建和分配每个引用，这会增加（微小的）负载。

# php - 无法通过引用传递参数 2 - 缓存不起作用

> ID：11019941
> 
> 赞同：1
> 
> 时间：2012-06-13T17:12:06.780
> 
> 标签：php, joomla

我有一个问题，当我为我的 Joomla 站点打开缓存时，我只收到错误消息：致命错误：无法通过 E:\sites\SC\xampp\htdocs\libraries\joomla\document 中的引用传递参数 2 \html\renderer\module.php 在第 82 行

有问题的行是（从单行扩展以获得更好的可读性）：

```
$contents = $cache->get(
    array('JModuleHelper', 'renderModule'), 
    array( $module, $params ), 
    $module->id. $user->get('aid', 0)
); 
```

我不知道如何解决这个问题，任何帮助将不胜感激。感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:17:51.117

您不能在 get() 方法中绑定参数 - 您应该事先进行。
试试这个：

```
$param1 = array('JModuleHelper', 'renderModule');
$param2 = array( $module, $params );
$param3 = $module->id. $user->get('aid', 0);
$contents =  $cache->get($param1, $param2, $param3); 
```

# c# - AjaxToolkit ModalPopup，如何动态设置x和y坐标？

> ID：11019949
> 
> 赞同：1
> 
> 时间：2012-06-13T17:12:50.707
> 
> 标签：c#, asp.net, jquery-ui, asp.net-ajax, modalpopupextender

我在图像库项目中使用了模态弹出扩展器，当有人单击数据列表中的缩略图时，它显示图像的实际大小。

一切正常，除了 ModalPop-up 上的位置出现在屏幕上的随机位置，有时将图像从屏幕上推到右侧，如果我对 x 和 y 坐标进行硬编码，那么小图像会出现并且最右边不在同步。

如果我单击、重新调整大小或更改滚动位置，则它会重新定位到页面的中心，但不会。

请建议一种解决方法，以便在显示 ModalPop-up 后立即更改滚动条位置（使用客户端脚本），或者我可以用来设置它的 CSS 属性。

提前非常感谢。

# html - 在图像周围环绕文字

> ID：11019951
> 
> 赞同：0
> 
> 时间：2012-06-13T17:12:59.497
> 
> 标签：html, css, css-float

我正在尝试在下面的页面中让文本环绕图像。尽管图像向左浮动，但文本似乎并没有环绕。

[http://goo.gl/SskvJ](http://goo.gl/SskvJ)

我将不胜感激任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:21:43.113

你的`.region`班级有一个`float:left`应该删除的规则。然后您还需要删除`clear:both`h2 元素上的规则。然后，您需要向`float:left`页面上的图像添加规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T22:12:28.060

我想我找到了解决办法。它对我很好。

我所做的是创建一个名为**content**的 div ，并将其放置在一个***img***和另一个包含文本的 div 中。看看这里[http://jsfiddle.net/Apfyv/](http://jsfiddle.net/Apfyv/)

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:20:55.280

您在 a 中有图像和文本，`div`并且都向左浮动......这很好 - 但`div`元素没有指定宽度 - 所以它们占用 100%（块元素） - 如果你分配`div`它显示的 sa 宽度在图像的右侧

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T17:22:16.013

似乎文本没有环绕图像，因为文本和图形都在两个单独的 DIV 标签中，您应该合并它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T22:22:30.740

添加样式

```
.region > img {
    float: left;
} 
```

并添加`display: inline-block`到`#page_product #overview h2`

```
#page_product #overview h2 {
    margin: 0 0 1.5em;
    font-style: italic;
    font-weight: bold;
    font-size: 1.2em;
    line-height: 1.429;
    display: inline-block;
} 
```

# html - 贝宝定期付款表格

> ID：11019954
> 
> 赞同：9
> 
> 时间：2012-06-13T17:13:19.590
> 
> 标签：html, forms, wordpress, paypal

我有一个带有付款表格的网站，我想添加定期付款。我该怎么做？我`ID`需要在表单字段中使用什么？

我看到了一个这样的`WordPress` `plugin`用法：`a3` `t3``p3`

```
 <input type="hidden" name="a3" id="a3" value="" />
<p class="donate_recur"><label for="recur">Repeat Donation</label>
<select name="t3" id="t3">
                <option value="0"> Do not repeat </option> 
                 <option value="D"> Daily </option> 
                 <option value="W"> Weekly </option> 
                 <option value="M"> Monthly </option> 
                 <option value="Y"> Yearly </option> 
 </select> x 
<input name="p3" id="p3" value="'.$dplus['duration'].'" type="text" style="width:10px;" /> 
```

我不确定是什么`a3`，但`t3`交易会发生多长时间，以及会发生`p3`多少次。

我在网上看了一点，发现如何`PayPal`为某种具有定期付款的产品制作按钮。但我需要动态输入它。

谢谢你。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-13T17:24:22.617

```
a3 - amount to billed each recurrence
p3 - number of time periods between each recurrence
t3 - time period (D=days, W=weeks, M=months, Y=years)

<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick-subscriptions">
<input type="hidden" name="business" value="me@mybusiness.com">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="no_shipping" value="1">
<input type="image" src="http://www.paypal.com/en_US/i/btn/btn_subscribe_LG.gif" border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
<input type="hidden" name="a3" value="5.00">
<input type="hidden" name="p3" value="1"> 
<input type="hidden" name="t3" value="M">
<input type="hidden" name="src" value="1">
<input type="hidden" name="sra" value="1">
</form> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-05T12:31:52.817

必填字段是：

`a3`: 正常率。这是订阅价格

`p3`: 定期计费周期。这是计费周期的长度。该数字由常规计费周期单位（t3，下）修改

`t3`：定期计费周期单位。这是常规计费周期的单位（p3，以上） 可接受的值为：D（天）、W（周）、M（月）、Y（年）

`no_note`：此字段确保不会提示您的订阅者在订阅中包含注释，这是 PayPal 订阅不支持的功能。必须包含该字段，并且值必须设置为 1。

资料来源： 来自 PayPal 的[订阅和定期付款指南。](https://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/archive/PP_subscriptions.pdf)

重要的是要注意，如果没有**可选**字段`src`（也在上面的文档中描述），订阅会在第一笔交易后过期，因此它不会重复：

`src`: 定期付款。如果设置为“1”，除非您的客户在计费周期结束前取消订阅，否则将重复付款。如果省略，订阅付款将不会在计费周期结束时再次发生。

# python - 在 python 脚本中截取 vnc 会话的屏幕截图

> ID：11019963
> 
> 赞同：1
> 
> 时间：2012-06-13T17:13:56.170
> 
> 标签：python, screenshot, vnc

我需要能够在 OSX 下的 python 脚本中截取屏幕截图（如果将其放在标题和标签中不够清晰，则为 vnc 会话）。远程系统已经在运行我用于其他目的的 vnc 服务器，并且最终将涵盖所有常见的桌面操作系统，因此我更愿意继续使用 vnc 而不是其他一些解决方案。

*我的测试服务器上没有打开 vnc 窗口，因为它运行 headless*。我尝试过使用[vncdotool](https://github.com/sibson/vncdotool/)，但我不希望不得不掏空，并且尝试模仿控制流会导致问题，因为 Twisted 不允许您重新启动反应器，但是如果您让它运行它会阻塞主线程，并且尝试在单独的线程或进程中运行反应器似乎存在问题......

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:05:18.680

阅读您的评论后，您似乎真正想做的是为运行您的 Flash 游戏的远程 Web 浏览器截屏。

...而且您正在使用 selenium 来测试那些远程 Web 浏览器。

...你为什么不让 selenium 为你截屏？

[http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/TakesScreenshot.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/TakesScreenshot.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:44:39.287

基于 tangentStorm 的建议，使用 selenium 截取屏幕截图。尝试这样做。打开`src/Selenium2Library/keywords/_screenshot.py`并查看第 24-30 行。

```
 background leaking when the page layout is somehow broken.
     """
     path, link = self._get_screenshot_paths(filename)
     self._current_browser().save_screenshot(path)

     # Image is shown on its own row and thus prev row is closed on purpose
     self._html('</td></tr><tr><td colspan="3"><a href="%s">' 
```

删除该行`self._current_browser().save_screenshot(path)`并直接在其位置添加

```
if hasattr(self._current_browser(), 'get_screenshot_as_file'):
    self._current_browser().get_screenshot_as_file(path)
else:
    self._current_browser().save_screenshot(path) 
```

所以总的来说它应该是这样的：

```
 background leaking when the page layout is somehow broken.
    """
    path, link = self._get_screenshot_paths(filename)
if hasattr(self._current_browser(), 'get_screenshot_as_file'):
    self._current_browser().get_screenshot_as_file(path)
else:
    self._current_browser().save_screenshot(path)
    # Image is shown on its own row and thus prev row is closed on purpose
    self._html('</td></tr><tr><td colspan="3"><a href="%s">' 
```

然后尝试使用 selenium 截取屏幕截图。

参考：[修复](https://github.com/korda/robotframework-selenium2library/commit/0c52e076c335f6804899fee9ea7d1b2a7904773f)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T01:00:03.703

也许您可以说服机器人框架或 Selenium 向`CaptureScreen`Eggplant Drive 发送 Sensetalk 命令。

TestPlant 论坛中的[截图](http://www.testplant.com/phpBB2/viewtopic.php?t=2219)帖子提到了这个命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T11:20:28.483

根据您的代码，您可能可以使用`deferToThread`来运行调用`screencapture`并返回文件路径或`pil.Image`实例（或任何您需要的）。

使用[http://twistedmatrix.com/documents/current/core/howto/gendefer.html#auto5](http://twistedmatrix.com/documents/current/core/howto/gendefer.html#auto5)上的示例，它可能看起来像......

```
from subprocess import call
import tempfile
from twisted.internet import reactor, threads
import Image ## pip install pil

## Blocking code that takes the screenshot and saves to file
def take_screenshot():
    tmp_file_path = tempfile.mktemp(suffix='.png')
    # os.system('screencapture %s' % tmp_file_path)
    retcode = call(['screencapture', tmp_file_path])
    if retcode < 0:
        img = Image.open(tmp_file_path)
        return img
    else:
        return None

## Callback fired by the deferToThread
def do_something_with_screenshot(img):
    print img.filename, img.format, img.size, img.mode
    reactor.stop() ## just here for this example

def run():
    # get our Deferred which will be called with the largeFibonnaciNumber result
    d = threads.deferToThread(take_screenshot)
    # add our callback to print it out
    d.addCallback(do_something_with_screenshot)

if __name__ == '__main__':
    run()
    reactor.run() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T02:08:29.437

我不知道有任何库在 OSX 的 python 中执行此操作。

但是，至少还有其他三种方法可以获取屏幕截图：

1.  使用 jython 的[java.awt.Robot](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Robot.html)类。（除了扭曲可能不会在 jython 上运行。）
2.  将Apple 的[ScreenSnapshot](http://developer.apple.com/library/mac/#samplecode/ScreenSnapshot/Introduction/Intro.html)示例移植到[Cython](http://www.cython.org/)并将其编译为 python 模块。（当然，您可以在 C 中做同样的事情，但 Cython 使它更有趣。）
3.  如果您可以将您的服务器移动到 win32，或者只是通过并行在您的 mac 上运行 win32，那么您可以使用 python 图像库的[ImageGrab](http://www.pythonware.com/library/pil/handbook/imagegrab.htm)模块。

但是，我认为向操作系统发起攻击仍然是最简单的答案。与其试图让它在一个进程中运行，不如让两个进程运行：你的主要扭曲进程，以及其他一些使用线程或其他的服务器。

然后，当您想截屏时，只需来回传递消息。您可以使用简单的套接字连接来做到这一点（只需在您的扭曲服务器中编写另一个处理程序，并让屏幕截图服务器作为客户端连接）......

如果是我，我可能会使用像[RabbitMQ](http://www.rabbitmq.com/)这样的 AMQP 服务器来处理消息传递，但这对你正在做的事情来说可能是多余的。

# android - 将屏幕尺寸（像素）转换为纬度和经度

> ID：11019965
> 
> 赞同：1
> 
> 时间：2012-06-13T17:14:11.517
> 
> 标签：android, eclipse, web-services, google-maps

好的，所以我正在尝试编写一个代码，该代码根据当前可查看区域返回地图的所有 4 个角位置的值。例如，用户通过他的设备访问谷歌地图，他专注于特定区域并点击一个按钮并返回所有四个角的位置（纬度和经度）。

为此，我有中心坐标，现在我想要当前可视区域的跨度并获得左上角和右下角坐标。为此我使用，

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x; // returns 480
int height = size.y; // returns 800 
```

现在我想将它们转换为纬度和经度值，以便我可以使用简单的数学，例如：

```
topLeftLat= centerLat + lat/2;
topLeftLon= centerLon - lng/2;
bottomRightLat= centerLat - lat/2;
bottomRightLon = CenterLon + lng/2; 
```

这会给我角坐标。lat 和 lng 是在纬度和经度值中转换的屏幕分辨率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:25:59.533

这花了 5 分钟在 google 上搜索，所以我不知道我为什么要给你这个……学习研究是成为开发人员最重要的部分。

```
GeoPoint mapCenter = myMap.getMapCenter();

   float centerLatitude = (float)(mapCenter.getLatitudeE6())/1000000;
   float centerLongitude = (float)(mapCenter.getLongitudeE6())/1000000;

   float latitudeSpan = (float)(myMap.getLatitudeSpan())/1000000;
   float longitudeSpan = (float)(myMap.getLongitudeSpan()/1000000);

   GeoPoint mapTopLeft = myMap.getProjection().fromPixels(0, 0);
   float topLatitude = (float)(mapTopLeft.getLatitudeE6())/1000000;
   float leftLongitude = (float)(mapTopLeft.getLongitudeE6())/1000000;

   GeoPoint mapBottomRight
   = myMap.getProjection().fromPixels(myMap.getWidth(), myMap.getHeight());
   float bottomLatitude = (float)(mapBottomRight.getLatitudeE6())/1000000;
   float rightLongitude = (float)(mapBottomRight.getLongitudeE6())/1000000;

String info =
     "Center: " + centerLatitude + "/" + centerLongitude + "\n"
     + "Top Left: " + topLatitude + "/" + leftLongitude + "\n"
     + "Bottom Right: " + bottomLatitude + "/" + rightLongitude + "\n"
     + "latitudeSpan: " + latitudeSpan + "\n"
     + "longitudeSpan: " + longitudeSpan + "\n";

   Toast.makeText(AndroidMapActivity.this,
     info,
     Toast.LENGTH_LONG).show();
  }}; 
```

完整教程可在[Android-er：获取当前在 MapView 上显示的坐标（纬度和经度）](http://android-er.blogspot.co.uk/2011/07/get-the-coordinates-latitude-and.html)

# sql-server - 我们如何克服 sp_linkedserver 的双重身份验证？（已经通过DB认证设置）

> ID：11019969
> 
> 赞同：0
> 
> 时间：2012-06-13T17:14:17.107
> 
> 标签：sql-server, database, vb.net, ms-access, linked-server

因此，我们在 SQL Server 上设置了 sp_linkedserver 以连接到远程 Access 数据库。

假设这个数据库的路径是 W:/breakfast/pancakes/secretPancakes/pancakeDB.accdb

我们知道实际数据库的用户名和密码

密码：allY0urPancakeAreBelongToUs！

问题是，还有进入“secretPancakes”目录的身份验证。

这个认证是

用户名：超级厨师

密码：ilovesf00d

* * *

这是制作 sp_linkedserver 的代码...

```
/****** Object: LinkedServer [PancakeDB] Script Date: 06/13/2012 10:08:21 ******/
EXEC master.dbo.sp_addlinkedserver @server = N'PancakeDB', @srvproduct=N'Access 2007', @provider=N'Microsoft.ACE.OLEDB.12.0', @datasrc=N'W:/breakfast/pancakes/secretPancakes/pancakeDB.accdb
', @provstr=N';PWD=allY0urPancakeAreBelongToUs'
/* For security reasons the linked server remote logins password is changed with ######## */
EXEC master.dbo.sp_addlinkedsrvlogin @rmtsrvname=N'PancakeDB',@useself=N'False',@locallogin=NULL,@rmtuser=NULL,@rmtpassword=NULL 
```

rmtuser 和 rmtpassword 是否适用于数据库？问题是，如果我在我的实际计算机上打开受保护的目录（secretPancakes）并要求 Windows 记住我的凭据，它会在我的计算机上正常工作，但在其他人的计算机上就不行。

我正在尝试解决这个问题，所以我们不必做 objNetwork.MapNetworkDrive(DriveLetter, RemotePath, False, UserID, UserPWD) 的事情，这很痛苦。(objNetwork = Microsoft.VisualBasic.CreateObject("WScript.Network"))

## 所以我的问题是：如何传递链接服务器中文件夹访问的凭据？

更新：此屏幕截图可能会有所帮助...？ ![在此处输入图像描述](../Images/ffb1bf5fcbf2ffcb6b409964ac5b23eb.png)

另外，这是我将这些凭据更改为用于进入该文件夹的凭据的地方吗？ ![在此处输入图像描述](../Images/d592f1552bd9bec3e6c6e4282ee660fa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:42:55.863

SQL Server 服务帐户需要有权访问 Access 文件所在的文件夹，然后它应该可以工作。如您所说，Access DB的用户名和密码与某人是否具有文件系统的权限无关。

理想情况下，您不应在此处使用驱动器号，而只需使用 UNC 路径，这样可以避免驱动器映射问题。但是，允许 SQL Server 从文件中读取的唯一方法是确保它具有适当的共享和 NTFS 权限来执行此操作。

# sql-server - TEMPDB 中用户的 CREATE SYNONYM 权限反复丢失

> ID：11019971
> 
> 赞同：0
> 
> 时间：2012-06-13T17:14:17.927
> 
> 标签：sql-server

我遇到了一个反复出现的问题，即用户在 TEMPDB 中的 CREATE SYNONYM 权限正在丢失。这些权限似乎不是永久持久的，有什么原因吗？

我得到的错误：

```
> System.Data.SqlClient.SqlException (0x80131904): CREATE SYNONYM
> permission denied in database 'tempdb' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:23:21.673

我给你留下了评论，但你可以做的是以下

在主数据库中创建一个 proc，在该 proc 中授予 tempdb 的权限（如果您使用动态 sql，则可以在 proc 中使用 USE tempdb）

然后将 proc 标记为在启动时运行

```
exec sp_procoption N'MyProcName', 'startup', 'on' 
```

现在每次重新启动 sql server 时，此 proc 都会运行并授予权限

另请参阅此处[列出在 SQL Server 中启动时运行的所有存储过程](http://blogs.lessthandot.com/index.php/DataMgmt/DBAdmin/MSSQLServerAdmin/list-all-stored-procedures-that)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:42:50.887

每次重新启动服务器时，都会创建 tempdb 作为模型数据库的副本。我的猜测是，在您向用户授予权限和收到此错误消息之间会发生服务器重启。也就是说，您可以在模型中授予权限，并且当服务器重新启动时它将在 tempdb 中，或者您可以执行诸如创建启动存储过程以在 tempdb 中授予权限之类的操作。

# service - 推送到设备时如何处理苹果反馈服务？

> ID：11019974
> 
> 赞同：1
> 
> 时间：2012-06-13T17:14:28.670
> 
> 标签：service, apple-push-notifications, feedback

我正在使用 Apples（增强型）推送通知系统来发送 pns。在推送到所有设备（18k）之前，我运行了反馈服务并删除了无效的令牌。然后我开始推送到所有设备。我的表中可能有一些 device_tokens，它们可能已失效，但未在反馈服务中列出。反馈服务仅在尝试交付失败后才会列出它们。（来源：[Apples 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html)）所以我是否必须在每次推送后运行反馈服务​​，或者我应该尝试推送所有，运行反馈服务​​并从被列为无效的令牌重试（然后应该有只有一个无效令牌 - 表中的第一个无效令牌）。

任何帮助将非常感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:23:19.557

我认为反馈服务不会告诉您有关无效令牌的信息，而只会告诉您不再安装您的应用程序的适当设备。

# php - 添加href链接时的jquery mobile list view Css问题

> ID：11019975
> 
> 赞同：0
> 
> 时间：2012-06-13T17:14:28.747
> 
> 标签：php, jquery-mobile

对于 jquerymobile 列表视图，我尝试了 ui-grid-b 3 列。但是CSS问题... [jsfiddle.net/9ZBAS/1](http://jsfiddle.net/9ZBAS/1)我试过了，如果我使用href，我可以看到列重叠，如果不使用href，但没有href，我无法获得下一个图标按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:21:03.423

您可以使用以下样式剪辑溢出的文本：

```
div {
    white-space: normal;
    overflow: hidden;
} 
```

右箭头由 JQM 添加，作为其内部/自动`<a>`链接样式的一部分`<li>`。

如果您不使用`<a>`，则必须通过执行类似[http://jsfiddle.net/nirmaljpatel/9ZBAS/2/的操作手动添加箭头](http://jsfiddle.net/nirmaljpatel/9ZBAS/2/)

# perl - Perl 多态性是如何工作的？

> ID：11019979
> 
> 赞同：7
> 
> 时间：2012-06-13T17:14:42.440
> 
> 标签：perl

我无法解释多态性在 Perl 中的工作原理。我了解多态性的含义，但我试图弄清楚它在 perl 内部是如何工作的。有人可以向我指出一些解释它的文档。我所做的所有谷歌搜索都给了我关于 perl 中的多态性的例子，而不是 perl 如何使它工作的例子。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-13T17:47:57.517

调用[方法时](http://p3rl.org/obj#Method-Invocation)时，Perl 会查看该方法是否由类本身直接提供。

因为[类只是 Perl 包](http://p3rl.org/obj#A-Class-is-Simply-a-Package)，所以只需寻找子例程的存在即可。`&Class::method`。

如果没有找到这样的子例程，Perl 会检查`@ISA`同一包中的数组（即`@Class::ISA`）中包含该类的基类列表的数组，并对其中出现的每个包/类进行相同的检查。

这些类中的每一个也可能有一个`@ISA`数组，因此搜索是递归的。

最后，如果这个方法在任何地方都找不到，Perl 会在一个特殊的包`UNIVERSAL`中查找一个子例程`&UNIVERSAL::method`。

此时失败继续调用`AUTOLOAD`系统，但这确实超出了多态性的原则。

在任何地方都找不到合适的匹配方法会引发异常。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-13T17:57:20.380

[*来自面向对象的 Perl*](http://www.manning.com/conway/)的第 7 章，Damian Conway，Manning (2000) 被称为*多态性*。十页。

但是请注意，如果您来自 C++ 或 Java 或 C# 或类似的语言，那么关于 Perl 中的“多态性”的了解并不多。我什至会说多态性的概念使事情比在 Perl 中更复杂。

我认为 Perl 程序员应该努力理解的机制是方法查找的工作原理。答案是：深度优先递归扫描`@ISA`包数组。

一个例子，让我们做`$o->bla`。我们`$o`有幸进入了这个`A`包，它没有实现`bla`. 但它继承自 first`B`然后`C`( `@ISA = ('B', 'C')`)。因此，让我们先进行查找`B`。它也没有定义方法。如果它有父类，我们会在那里继续查找。但事实并非如此。所以我们现在研究一下`C`，幸运的是它确实有方法，否则那将是一个运行时错误，因为最后的包`UNIVERSAL`, 也没有定义`bla`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-13T18:22:22.530

对象方法调用基本上是以下内容的优化*版本：

```
my $class = ref($_[0]);
my @isa = mro::get_linear_isa($class);
for my $pkg (@isa) {
   if (exists(&{$pkg.'::'.$method_name})) {
       return &{$pkg.'::'.$method_name};
   }
} 
```

`ref`获取与对象关联的类的名称。该类存储在对象的变量中。

```
$ perl -MDevel::Peek -e'my $o = {}; Dump($o); bless($o, "SomeClass"); Dump($o);'
SV = IV(0x9e4ae0c) at 0x9e4ae10
  REFCNT = 1
  FLAGS = (PADMY,ROK)
  RV = 0x9e317d0
  SV = PVHV(0x9e36808) at 0x9e317d0
    REFCNT = 1
    FLAGS = (SHAREKEYS)
    ARRAY = 0x0
    KEYS = 0
    FILL = 0
    MAX = 7
    RITER = -1
    EITER = 0x0
SV = IV(0x9e4ae0c) at 0x9e4ae10
  REFCNT = 1
  FLAGS = (PADMY,ROK)
  RV = 0x9e317d0
  SV = PVHV(0x9e36808) at 0x9e317d0
    REFCNT = 1
    FLAGS = (OBJECT,SHAREKEYS)        <----
    STASH = 0x9e323d0   "SomeClass"   <----
    ARRAY = 0x0
    KEYS = 0
    FILL = 0
    MAX = 7
    RITER = -1
    EITER = 0x0 
```

`get_linear_isa`是基于`@ISA`in package `$class`，以及`@ISA`其中命名的包的 。

由于类名在对象中，并且由于 Perl 可以在运行时检查其符号表，因此不需要虚拟方法表来提供多态性。

* - 它缓存哪个包为类 $class 提供方法 $method_name。此外，它肯定不会预先计算整个线性 ISA，而是根据需要计算。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T17:20:21.577

这非常适合基于继承的多态性，并给出了 Perl 具体做什么的一些概念。我一直使用第 12.5 章。[Perl 编程](http://oreilly.com/catalog/9780596004927)中的*类继承*作为这些东西的参考。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T20:46:07.040

多态只是不同类型的对象响应同名方法调用的想法。弱类型语言，例如 Perl，是“隐式多态的”。

例如，一个`CGI`对象、一个`Apache2::Request`对象和一个`Plack::Request`对象都有一个`param`返回 HTTP 请求参数的方法。我可以编写一个接受对象作为参数的函数，然后`param`在该对象上调用该方法，并获取一个 HTTP 请求参数，而不知道它是什么类型的对象。

强类型语言不能以这种方式工作，因为它们的函数指定了参数的数据类型。`Dog`如果它期望`Cat`. 所以强类型语言必须创建特殊的机制来允许多态性。

# c++ - 自动 cout 冲洗

> ID：11019983
> 
> 赞同：7
> 
> 时间：2012-06-13T17:14:59.557
> 
> 标签：c++, process, flush, cout

再会，

我编写了一个 Java 程序，它使用 Process 对象和 Runtime.exec() 函数调用启动多个 C++ 编写的程序。C++ 程序使用 cout 和 cin 作为输入和输出。Java 程序从 C++ 程序的输入流和输出流中发送和读取信息。

然后，我有一个字符串缓冲区，它通过将 C++ 程序的输入和输出附加到字符串缓冲区来构建程序的典型交互。问题是所有输入调用都被附加，然后所有输出调用都被发布。例如，StringBuffer 的实例可能是这样的......

```
2
3
Please enter two numbers to add. Your result is 5 
```

当程序在标准控制台上看起来像这样时

```
Please enter two numbers to add. 2
3
Your result is 5 
```

问题是我得到了输入和输出的顺序，因为除非 C++ 程序调用 cout.flush() 函数，否则在给出输入之前不会写入输出。

有没有办法自动刷新缓冲区，这样 C++ 程序就不必担心调用 cout.flush() 了？类似于 C++ 程序是与命令控制台交互的独立程序，程序员并不总是需要 cout.flush()，命令控制台仍然在输入之前输出数据。

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-05T22:20:23.867

万一有人来寻找一种设置`cout`为始终冲洗的方法。在进行一些核心转储调查等时，这可能是完全公平的。

看看`std::unitbuf`。

```
std::cout << std::unitbuf; 
```

在程序开始时。

默认情况下，它会在每次插入时刷新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T17:20:50.797

我不能保证它会解决您的所有问题，但是当您使用时自动刷新流，`cout`您可以使用`endl`

例如：

`cout << "Please enter two numbers to add: " << endl;`

using`"\n"`不会刷新流，就像您正在做的那样：

`cout << "Please enter two numbers to add:\n";`

请记住，`endl`如果您要进行大量输出，则使用可能会（相对）慢

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/1924530/mixing-cout-and-printf-for-faster-output?rq=1)

# spring - 从事务服务方法调用 DAO 时出现“HibernateException: No Session found for current thread”

> ID：11019984
> 
> 赞同：0
> 
> 时间：2012-06-13T17:15:01.040
> 
> 标签：spring, hibernate, spring-mvc

我有一个服务 bean，它在实例化后从数据库中加载对象到对象缓存中。如果我将调用我的 DAO 对象方法的服务方法标记为 @Transactional，那么我会收到“HibernateException: No Session found for current thread”错误。但是，如果我将 DAO 类标记为 @Transactional，则不会出现此类错误，并且可以正常工作。

问题是我不能从服务对象中的同一个方法进行多个 DAO 调用并将其作为一个事务。对可能导致这种情况的原因有什么想法吗？

我正在使用 Spring 3.1 和 Hibernate 4。

DAO 示例：

```
@Repository
public class HibernateObjectDao implements ObjectDao {

    SessionFactory sessionFactory;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    public List<Object> getObjects() {
        return sessionFactory.getCurrentSession()
            .createQuery("from Object").list();
    }
} 
```

服务 Bean 示例：

```
@Service
public class MyServiceBean implements AbstractMyServiceBean
{

    @Resource
    private ObjectDao objectDao;

    private HashMap<String,Object> objectCache;

    public MyServiceBean() {
        this.objectCache = new HashMap<String,Object>();
    }

    @Autowired
    public void setObjectDao(ObjectDao objectDao) {
        this.objectDao = objectDao;
    }

    @Transactional
    public void initialize() {
        loadObjectCache();
    }

    public void loadObjectCache() {
        objectCache.put("stuff",this.objectDao.getObjects())
    }
} 
```

ApplicationContext.xml 摘录：

```
<bean id="objectDao" class="com.example.persistence.HibernateObjectDao">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<bean id="myServiceBean"
    class="com.example.service.MyServiceBean" 
    init-method="initialize">
    <property name="objectDao" ref="objectDao" />
</bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:31:15.400

使用注入的 bean 实例从 bean 外部调用方法时，方法是事务性的，这实际上是实际 bean 实例周围的事务代理。

Spring 直接在 bean 实例上调用 initialize 方法，而不是在事务代理上，因此这些方法不会在事务中调用。

将初始化方法放在另一个 bean 中，它将使用注入的 MyServiceBean 并调用其`initialize()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T21:05:19.963

问题是当 Spring 调用初始化时，bean 周围没有事务代理。这是故意的，因为其理念是 bean 在初始化之前还没有准备好使用。

一些解决方案：

*   在这种初始化数据处理的特殊情况下，通过[TransactionTemplate](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/transaction/support/TransactionTemplate.html)或 session.beginTransaction() 进行手动事务处理。如果您使用 JPA/Hibernate，请使用以下代码将 EntityManager 添加到 Transaction Synchronizer：

    ```
    EntityManager em = entityManagerFactory.createEntityManager();
    TransactionSynchronizationManager.bindResource(entityManagerFactory, new EntityManagerHolder(em)); 
    ```

*   为应用程序中的所有初始化类型事件创建另一个 bean，并让它调用其他 bean。到那时，所有其他 bean 都将准备就绪，Spring 将在它们周围放置一个事务代理。注意：不要从这个 bean 调用设置为 init-method 的方法，因为这样特定的 bean 将被初始化两次，这并不总是健康的 :) 为此目的创建另一个方法。

*   使用[ApplicationListener](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/ApplicationListener.html)。有了这个，您可以注册一个回调并处理[ContextRefreshedEvent](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/event/ContextRefreshedEvent.html)作为上下文初始化完成的标志。

# opencl - 如何在 C++ 应用程序中处理不受支持的硬件上的 OpenCL 代码

> ID：11019987
> 
> 赞同：-1
> 
> 时间：2012-06-13T17:15:04.987
> 
> 标签：opencl

我一直在对 OpenCL 进行一些研究，以及在项目中使用它的可能性。我的问题是，有没有办法在 C++ 应用程序中的 OpenCL SDK 不支持的 CPU 上运行 OpenCL 代码。我知道 Java 有 Aparapi，但是我想知道如何在没有 SDK 支持的硬件的情况下在 C++ 应用程序中运行 OpenCL 代码。我想在 OpenCL 内核中编写一些代码，以利用可用的 OpenCL 并行性，但是我不确定我是否无法在旧硬件（仍然是 X86，但不是最近的硬件）上运行它。谁能向我解释如何做到这一点，或者在旧系统上运行 OpenCL 代码是否完全有问题？

谢谢，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:43:26.793

我想说解决这个问题的最佳方法是通过 OpenCL API 调用（例如 clPlatformIDs）检查设备是否支持 OpenCL，然后一旦您认为它不是 OpenCL 设备，然后将所需的代码作为普通 C/C++ 函数运行，否则使用 openCL 运行它核心。但是为了可移植性，您需要在 .cl 文件中编写程序逻辑两次，一次作为普通的 c/c++ 方法/函数。

# c++ - 需要大尺寸静态数组

> ID：11019989
> 
> 赞同：1
> 
> 时间：2012-06-13T17:15:21.103
> 
> 标签：c++, visual-c++, multidimensional-array, stack

我想要一个程序中的大数组。

我的代码有一个包含 3 个浮点类型变量的结构，我想要一个这种结构的大尺寸 3 维数组。
我的代码给出了小型数组的输出，但是当我增加数组的大小时，我得到一个堆栈溢出异常/错误。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:22:52.043

代替

```
int main() {
   float array[N][N][N][N][N];
   ... 
```

写

```
float array[N][N][N][N][N];

int main() {
   ... 
```

或者，写：

```
int main() {
   static float array[N][N][N][N][N];
   ... 
```

顺便说一句：我在 VC10/Win32 中的默认设置允许堆栈分配高达`N=12`，这意味着 ~ 990KB。

问候

rbo

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:32:43.343

这里的解决方案是[`std::vector`](http://en.cppreference.com/w/cpp/container/array). 它在堆上分配内存，这比堆栈大得多，并且可以完全不费力地改变它的大小。

```
typedef std::vector<float> vec;
typedef std::vector<vec> vec2D;
typedef std::vector<vec2D> vec3D;
typedef std::vector<vec3D> vec4D;
typedef std::vector<vec4D> vec5D;

vec5D d (15, vec4D (15, vec3D (15, vec2D (15, vec (15)))));
//use as you would a normal array for the most part 
```

当然，拥有一个 5D 数组（如评论中提到的“需要”）并不是您特别想要的。我建议您创建一个`Matrix`具有底层一维向量的类别。

更好的是，重新考虑您的设计。很少有时候您确实需要像这样的高度多维数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T17:21:52.067

除了在堆上分配它之外，您还可以尝试使用[/F](http://msdn.microsoft.com/en-us/library/tdkhxaks%28v=vs.100%29.aspx)或[/STACK](http://msdn.microsoft.com/en-us/library/8cxs58a6)选项或在项目属性中保留更大的堆栈：

![在此处输入图像描述](../Images/1f23c5c35e603598ab326e9400611d85.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T17:20:20.563

我不知道您是否需要，但如果您愿意，您可以使用链接器选项更改默认堆栈大小，例如在 Visual Studio 中转到“属性 - 配置属性 - 链接器 - 系统 - 堆栈保留大小”。

# sql - 如何在某些 SQL 查询中在 CFML 中创建函数？

> ID：11019993
> 
> 赞同：0
> 
> 时间：2012-06-13T17:15:31.820
> 
> 标签：sql, coldfusion, cfquery, cfqueryparam

我想在 CFML 中创建一个带有 3 个参数（一个数字和两个日期）的函数。然后，该函数将对这些数据执行一些 cfquery 查询，例如 SELECT、UPDATE 和 INSERT...关于如何编写此函数的任何想法？我是 cfml 新手，所以很好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:27:00.910

您要求的内容非常基本，查看 cffunction 的文档应该足以让您入门：[http ://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f5c.html](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f5c.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:28:13.010

Adobe 文档有一节介绍如何编写 UDF（用户定义函数）。可能最好从那里开始：

[http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=UDFs_03.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=UDFs_03.html)

# fortran - Fortran在文件中随机写入数据

> ID：11019999
> 
> 赞同：-2
> 
> 时间：2012-06-13T17:15:58.390
> 
> 标签：fortran, fortran90, gfortran, fortran77

如何在 FORTRAN 中编写文本或 dat 文件，如整数的二维数组，并且每次输入一个值，如果在任何行中没有值，则只需在开头插入，但如果存在某些值，则插入到值的末尾。这种值的插入可以是随机的，即可以是第 100 行，然后是 80，然后是 101，然后是 2。每行中的条目数也不同。最后我还需要使用这个文件，但我认为这很容易，因为需要逐行信息。

***编辑（他可能提到的） ::***如何在 Fortran 中编写一个文本文件，就像一个二维整数数组，每次加一个值？如果有一个没有值的空行，则在行的开头插入一个，但如果该行中已经有一些值，则将新值附加到行的末尾。

*不知道他对这些随机值和行号有何看法。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:32:48.907

如果您想根据输入做出决定，请将该行读入字符串。然后检查字符串的内容并决定输入哪种情况。如果您有要读取的数字，请使用“内部读取”从字符串中读取它们。这个问题有一个代码示例：[Reading comment lines correct in an input file using Fortran 90](https://stackoverflow.com/questions/10259712/reading-comment-lines-correctly-in-an-input-file-using-fortran-90)