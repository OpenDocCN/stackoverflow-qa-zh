# StackOverflow 问答 11018000-11018999

# php - if 和 else 语句都在执行

> ID：11018001
> 
> 赞同：3
> 
> 时间：2012-06-13T15:12:39.080
> 
> 标签：php, if-statement

我有一个奇怪的问题：我的 if 和 else 语句都在执行。这是我的代码：

```
 if ($sel_user['name'] != $name) {
        $query = "UPDATE owner SET 
                ..."
        $result = mysql_query($query);
        if (mysql_affected_rows() ==1) {
            $query2 = "UPDATE queue_acl SET 
                ..."
            $result2 = mysql_query($query2);
            if (mysql_affected_rows() ==1) { 
                $_SESSION['updates_occurred'] = true;
            } else {
                $_SESSION['updates_occurred'] = false;
            }
        }
    }

    if ($sel_user['orgId'] != $orgId) {    
        $query = "UPDATE ownerOrganization SET
                ..."
        $result = mysql_query($query);
        if (mysql_affected_rows() ==1) {
            $query2 = "UPDATE queue_acl SET
                ..."
            $result2 = mysql_query($query2);
            if (mysql_affected_rows() ==1) {
                $_SESSION['updates_occurred'] = true;
            } else {
                $_SESSION['updates_occurred'] = false;
            }
        }
    }

    if ($sel_user['date_expires'] != $colVal[0] || 
            $sel_user['admin'] != $colVal[4]) {
        $query3 = "UPDATE queue_acl SET
                ..."
        $result3 = mysql_query($query3);
        if (mysql_affected_rows() ==1){
            $_SESSION['updates_occurred'] = true;
        } else {         
            $_SESSION['updates_occurred'] = false;
        }                
    } else {
        $_SESSION['updates_occurred'] = false;    
        $message = "<i>There were no edits to apply</i>";
    } 
```

当我运行它时，正在发送查询并且一切都在正常更新，但是“没有编辑”消息也正在打印

有谁知道为什么？

编辑：我*不想*使用 elseif 语句；这些事件并不相互排斥。也就是说，如果 $sel_user['name'] != $name AND $sel_user['orgId'] != $orgId，则要求发送*两个*查询

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T15:14:25.597

而不是做很多ifs，你应该做elseifs

IE

```
if () {

} elseif () {

} else {

} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-13T15:33:30.677

如果您不想将所有内容都包装在 if/else if 语句中，则可以在每个 if 检查结束时设置一个标志。

```
if($sel_user['name'] != $name) {
     // CODE HERE
     $flag = true;
}

if(!$flag){
     $message = "<i>There were no edits to apply</i>";
} 
```

就是这样，或者您可以运行 if check off $_SESSION['updates_occurred']

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-05T13:08:14.390

```
if(!printf("Hello")) {
    echo "Hello";
}
else {
    echo " World";
} 
```

# javascript - 在 Eclipse 插件中使用 JavaScript

> ID：11018009
> 
> 赞同：2
> 
> 时间：2012-06-13T15:13:01.927
> 
> 标签：javascript, eclipse, eclipse-plugin

是否可以在 Eclipse 插件的视图中使用**JavaScript ？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:55:19.797

默认情况下，eclipse 在 JVM 中的 java 上运行。但是 JVM 对动态脚本语言的支持越来越多。您始终可以使用[org.mozilla.javascript](http://download.eclipse.org/tools/orbit/downloads/drops/R20120526062928/)，以便您的视图可以在 javascript 中实现部分。我在 eclipse Orbit 构建中包含的链接是 OSGi 化的版本，因此它们可以在 eclipse 中轻松使用。

# android - 动态添加视图到RelativeLayout的底部

> ID：11018012
> 
> 赞同：6
> 
> 时间：2012-06-13T15:13:10.193
> 
> 标签：android, admob, android-relativelayout

我在 main.xml 中有 TitlePageIndicator 和 ViewPager，我想在 RelativeLayout 的底部添加 admob（直接进入 LinearLayout）。我怎样才能做到这一点？

当我启动它时，日志没有说明错误（因为没有放置admob的地方），但是admob是不可见的，我看不到它。（看起来 admob 在屏幕之外，因为我尝试将特定尺寸设置为 ViewPager 并且效果很好）我不想为 ViewPager 设置特定尺寸（因为屏幕尺寸不同）谢谢。

我的 main.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <com.viewpagerindicator.TitlePageIndicator
        android:id="@+id/indicator"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"/>   
    <android.support.v4.view.ViewPager
        android:id="@+id/viewpager"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/indicator"/>
    <LinearLayout 
        android:id="@+id/for_ads"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/viewpager"/>
</RelativeLayout> 
```

UPD。解决了我使用了这个[答案](https://stackoverflow.com/a/5988110/1233682)，它对我来说很完美

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-13T15:42:55.873

首先，如果你想引用它，你的 RelativeLayout 需要一个 ID：

```
RelativeLayout rLayout = (RelativeLayout)findViewById(R.id.yourRelativeId); 
```

然后为对象（在本例中为您的 admob adview）创建一些 LayoutParams，告诉它将自身与底部对齐（并且不与任何其他视图对齐，这样它就不会被推到屏幕外或被其他视图移动):

```
 RelativeLayout.LayoutParams rLParams = 
    new RelativeLayout.LayoutParams(
    LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
    rLParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, 1); 
```

接下来，使用 LayoutParams 将视图添加到 RelativeLayout：

```
rLayout.addView(yourAdView, rLParams); 
```

# iphone - UILabel 逐渐改变背景颜色

> ID：11018013
> 
> 赞同：-1
> 
> 时间：2012-06-13T15:13:10.757
> 
> 标签：iphone, ios, xcode, uilabel, background-color

> **可能重复：**
> [如何为 UILabel 的背景颜色设置动画？](https://stackoverflow.com/questions/3762561/how-to-animate-the-background-color-of-a-uilabel)

哈莉，我有一个背景颜色为白色的 UILabel，然后我有一个开关，当我打开一个动作时，背景颜色变为黑色。有没有一种模式可以逐渐改变这种颜色？我不想立即更改颜色，而是创建关闭效果。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T04:13:33.753

您可以使用 Core Animation 或 UIView 动画。

```
//viewDidLoad

    //Initial Color of White
    label.backgroundColor = [UIColor whiteColor];

    //Animate to black color over period of two seconds (changeable)
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:2];               //Change the "2" to the desired duration

    label.backgroundColor = [UIColor blackColor];

    [UIView commitAnimations]; 
```

此代码不一定必须在`viewDidLoad`. 你可以把它放在任何你想调用它的地方，但由于这是一个 UIView 动画而不是核心动画动画，它不能与任何其他 UIView 动画同时运行。

希望这可以帮助！

# wpf - WPF 中 UniformGrid 单元格的居中复选框

> ID：11018014
> 
> 赞同：0
> 
> 时间：2012-06-13T15:13:11.310
> 
> 标签：wpf, checkbox, centering, stretching

我想在*UniformGrid的单元格中居中和拉伸**复选框*。 我尝试通过多种方式做到这一点：

 *```
<UniformGrid>
        <CheckBox HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
                  HorizontalContentAlignment="Center" VerticalContentAlignment="Center" />
        <CheckBox HorizontalAlignment="Center" VerticalAlignment="Center" />
        <CheckBox HorizontalAlignment="Center" VerticalAlignment="Center" ClipToBounds="True" />
        <CheckBox HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ClipToBounds="True" /> 
```

*   所选单元格*(0, 0)*：

    [![统一网格](../Images/ebf0f12e37e960b25152a6c0828c92b4.png)](https://i.stack.imgur.com/6UU52.png)
*   选定单元格*(1, 0)*：

    [![统一网格](../Images/ef1fb84c699b31c0c2b93289242d7e04.png)](https://i.stack.imgur.com/6VPoQ.png)

但这并不让我满意，因为我想同时**拉伸**（就像在单元格*(0,0)*中一样）和**居中**（就像在*(1,0)*中一样）这些复选框在它们的单元格中。

我该怎么做？

* * *

**[编辑 1]**

我正在努力做到这一点，这样我就不必单击小检查，而是可以单击整个单元格。

**[编辑 2]**

实际上，我想从 C# 代码中添加这些复选框，所以如果用 XAML 制作的解决方案对于 C# 语言来说不是“可移植的”，那将不是很有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T15:41:54.700

如果我将这个简单的标记与默认的 Stretch 值一起使用：

```
<UniformGrid>
    <CheckBox Content="This is a checkbox" />
    <CheckBox Content="This is a checkbox" />
    <CheckBox Content="This is a checkbox" />
    <CheckBox Content="This is a checkbox" />
</UniformGrid> 
```

我可以单击 UniformGrid 每个单元格中的任意位置以选中和取消选中该单元格中的复选框。

从功能上讲，这是在做你想做的事。如果要更改复选框的外观，可以使用 ControlTemplate。

如果您不想更改 CheckBox 的大小，并且只想在视觉上将其居中，同时能够单击单元格进行检查，则可以使用如下模板：

```
<CheckBox>
    <CheckBox.Template>
        <ControlTemplate TargetType="{x:Type CheckBox}">
            <Grid Background="Transparent">
                <CheckBox IsChecked="{TemplateBinding Property=IsChecked}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Grid>
        </ControlTemplate>
    </CheckBox.Template>
</CheckBox> 
```

**编辑：**

若要在运行时将其作为资源应用，请将 XAML 写入适当范围的资源部分。如果您只需要在一个控件中使用它，或者如果您想全局访问它，则可以将它放在本地资源字典中，如下所示将它放在 App.xaml 中：

```
<Application.Resources>
    <ControlTemplate x:Key="StretchedCheckBox" TargetType="{x:Type CheckBox}">
        <Grid Background="Transparent">
            <CheckBox IsChecked="{TemplateBinding Property=IsChecked}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
        </Grid>
    </ControlTemplate>
</Application.Resources> 
```

注意它有一个键“StretchedCheckBox”。现在您可以使用它在代码中应用它：

```
ControlTemplate stretchedTemplate = FindResource("StretchedCheckBox") as ControlTemplate;

CheckBox chkBox = new CheckBox();
chkBox.Template = stretchedTemplate; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:44:17.837

我不认为你可以影响这样的大小`CheckBox`，因为大小是在控制模板中预先确定的

一种解决方案是使用 a`LayoutTransform`将 CheckBox 缩放为更大

```
<CheckBox>
    <CheckBox.LayoutTransform>
        <ScaleTransform ScaleX="5" ScaleY="5" />
    </CheckBox.LayoutTransform>
</CheckBox> 
```

应该注意的是，这会缩放 CheckBox 旁边的文本以及 CheckBox 本身，有时看起来不是很好，具体取决于您如何缩放它。

另一种替代解决方案是[从 MSDN 复制示例 CheckBox 模板](http://msdn.microsoft.com/en-us/library/ms752319.aspx)，并创建一个更大的`CheckBox`*

# iphone - 核心数据值到 UILabel 的字符串

> ID：11018020
> 
> 赞同：0
> 
> 时间：2012-06-13T15:13:32.310
> 
> 标签：iphone, objective-c, core-data, nsstring, nsnumber

我有一些与核心数据一起存储的值，我已经打开了应用程序的 sqlite 数据库以确保这些值被正确存储，但是当我尝试显示这些值时，它们都显得很时髦。我将来自核心数据实体的值存储在一个数组中，然后尝试调用这些值。基本上我是使用objective c开发的新手，我认为我需要一些格式化帮助。这是在输出中显示时髦数字的代码块：

```
NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeStyle:NSDateFormatterMediumStyle];
NSString *dateString = [dateFormatter stringFromDate:dJournal.dateTime];

cell.dateLabel.text = dateString;
cell.insulinTypeLabel.text = dJournal.insulinType; 
cell.glucoseLevelLabel.text = [NSString stringWithFormat:@"%e",dJournal.glucoseLevel ];
cell.carbTotalLabel.text = [NSString stringWithFormat:@"%d",dJournal.carbTotal ];
cell.insulinAmountLabel.text = [NSString stringWithFormat:@"%E",dJournal.insulinUnits ];

return cell; 
```

这里是核心数据生成的类文件：

```
@property (nonatomic, retain) NSDate * dateTime;
@property (nonatomic, retain) NSNumber * glucoseLevel; //Double
@property (nonatomic, retain) NSString * insulinType;  //string - no problem with
@property (nonatomic, retain) NSNumber * insulinUnits; //Double
@property (nonatomic, retain) NSNumber * carbTotal; //Integer64 
```

我也试过：

```
[[NSNumber numberWithInt:carbTotal] stringValue] 
```

没运气。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:15:49.927

你为什么使用`%e`等`%d`？如果要打印出 Objective-C 对象，则需要使用`%@`格式说明符，例如

```
cell.glucoseLevelLabel.text = [NSString stringWithFormat:@"%@", dJournal.glucoseLevel]; 
```

但是，如果您要显示数字，则实际上应该使用 的实例`NSNumberFormatter`来生成可识别区域设置的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:30:06.287

您使用了错误的说明符。尝试使用

```
 [NSString stringWithFormate:@"%@",your_string];
 [NSString stringWithFormate:@"%d",your_integer];
 [NSString stringWithFormate:@"%.02f",your_float]; 
```

`.02`表示您想要的小数点后的哪个位置

# django - 相关的查找字段外键在内联 Django 中不起作用

> ID：11018022
> 
> 赞同：2
> 
> 时间：2012-06-13T15:13:48.463
> 
> 标签：django, foreign-keys

我的 tabularinline 字段有问题。我有这样的模型

```
class Product(models.Model):
....

class Pemesanan(models.Model):
produks = models.ManyToManyField(Product, verbose_name=u"Kode Produk", through='Foo')

class Foo(models.Model):
product = models.ForeignKey(Product)
... 
```

Foo 类是 Pemesanan 类和 Product 类的中间类（多字段）。它有一个指向 Pemesanan 类的外键字段。Foo 类在 change_form 模板中显示为表格内联，如下所示[http://upload.ui.ac.id/?a=d&i=845380](http://upload.ui.ac.id/?a=d&i=845380)

但我的问题是字段产品没有显示为相关的查找字段，因为它显示为普通表单（不是内联）。这是我的管理员

```
class FooInline(admin.TabularInline):
model = Foo
extra = 0
allow_add = True

class PemesananAdmin(admin.ModelAdmin):
....
search_fields = ['produks']
raw_id_fields = ('produks',)
related_lookup_fields = {
'm2m': ['produks'],
}
inlines = [
FooInline,
]
exclude = ('produks',) 
```

我使用了自动完成功能，但在这里实现起来似乎很困难，因为教程不完整。那么有没有办法让我在我的 tabularinline 中获得相关的查找工作？非常感谢：D。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T15:32:50.490

所以，是的，我想我只是误解了你在问什么。您只是希望相关的查找弹出窗口在每个内联中选择一个产品，而不是一个选择框。你已经知道了`raw_id_fields`；问题是您需要在内联模型管理员上指定，而不是主要父模型管理员。

```
class FooInline(admin.TabularInline):
    model = Foo
    extra = 0
    allow_add = True
    raw_id_fields = ('product',) 
```

# python - 如何以编程方式停止执行 python 脚本，而不关闭 python 并维护变量？

> ID：11018025
> 
> 赞同：0
> 
> 时间：2012-06-13T15:14:02.323
> 
> 标签：python, variables, memory, exit

我有一个面向对象的程序，我想停止执行并维护执行期间内存中所有变量的 python 内存。

我想这样做，以便我可以试验我的变量并在 python shell 中使用它们进行编程。

sys.exit() 完成python执行，不仅是脚本，不是我想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T15:16:15.747

使用以下 Python 语句应该可以解决您的问题。它涉及使用调试器。

```
import pdb
pdb.set_trace() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:17:09.827

所以你想要的是调试你的程序，试试 pdb 这是 python 调试器

[http://docs.python.org/library/pdb.html](http://docs.python.org/library/pdb.html)

或者，如果您愿意，可以将 Eclipse 与 PyDevelop 结合使用，以获得更友好的用户界面：）

# tomcat - Tomcat Web Application 是否可以在服务器外部写入文件？

> ID：11018026
> 
> 赞同：0
> 
> 时间：2012-06-13T15:14:03.517
> 
> 标签：tomcat, web-applications, file-permissions

我有一个 tomcat Web 应用程序。是否可以在服务器外部创建文件夹/写入文件（.../web）...

例如将一些数据写入/home/desktop。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:33:34.893

对的，这是可能的。但请记住安全管理器并在您的目录上写入权限。

# sql-server - 在服务器之间复制

> ID：11018029
> 
> 赞同：0
> 
> 时间：2012-06-13T15:14:10.463
> 
> 标签：sql-server

我需要将数据从一台服务器上的表复制到另一台服务器上的同一张表。我试过这个：

```
sp_addlinkedserver 'server1' 

INSERT INTO [server2].[R2Op].dbo.[RefR2Ops]
SELECT * FROM server1.[R2Op].dbo.[RefR2Ops] 
```

但我在第二条语句中遇到错误：

> 用户“NT AUTHORITY\ANONYMOUS LOGON”登录失败。

你能告诉我如何解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:19:05.857

答案就在那里。您没有授予本地服务用于登录远程服务器的权限。您的命令在 NT AUTHORITY\ANONYMOUS LOGON 的权限下默认运行。

您需要指定用户凭据才能访问链接服务器

请参见[sp_addlinkedsrvlogin](http://msdn.microsoft.com/en-us/library/aa259581%28v=sql.80%29.aspx)

```
sp_addlinkedsrvlogin [ @rmtsrvname = ] 'rmtsrvname' 
    [ , [ @useself = ] 'useself' ] 
    [ , [ @locallogin = ] 'locallogin' ] 
    [ , [ @rmtuser = ] 'rmtuser' ] 
    [ , [ @rmtpassword = ] 'rmtpassword' ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:20:29.943

如果两台服务器都在同一个 ADS 域中，并且您的登录名在两台服务器上都存在，您可能必须添加：

```
 EXEC sp_addlinkedsrvlogin 'server1', 'true' 
```

否则检查将在哪个安全上下文中建立与链接服务器的连接。

# javascript - jQuery：服务器端代码和错误

> ID：11018034
> 
> 赞同：-1
> 
> 时间：2012-06-13T15:14:31.317
> 
> 标签：javascript, jquery, html

这是我在一个站点上找到的非常直接的 jQuery 代码：

```
//It simply loads more news
  function ReadMore(page){
       $("#news-list").html('Loading More News...');
       $("#news-list").append('<img src="/images/loading.gif">');   
        next=parseInt(page)+1;      
        html=$.get('/morenews.php','page='+page,function (data){                
            $("#News").append(data);
            $("#news-list").html("<a href='javascript:void(0);' onclick='ReadMore("+next+");'>More News</a>");
        });         
} 
```

我的问题是：

1.  它使用什么样的数据类型？“响应的预期数据类型。以下之一：null、'xml'、'script' 或 'json'。”

2.  `html=$.get('/newread.php','page='+page,function (data){}`jQuery 中有什么？我从未见过`$.get`，似乎只有一个参数`page`。

3.  服务器是否收到类似这样的信息：/morenews.php?page=3

4.  此代码无法处理错误。如果服务器太忙，比方说，20秒什么都不做，如何添加一些错误消息？

顺便说一句，jQuery 似乎是一种奇怪的语言，因为它不断地创建匿名函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:23:05.637

1.  `page`是一个整数（尽管它在作为 HTTP GET 请求的一部分发送到服务器时被强制转换为字符串）。`data`是一个 html 字符串。

2.  见[`jQuery.get( url , data , success() )`](http://api.jquery.com/jQuery.get/)。它是 $.ajax() 的简写。该`success()`函数是一个回调，一旦从服务器接收到响应就会执行。

3.  是：/morenews.php?page=3

4.  如果在给定时间内没有响应，您可以尝试添加超时功能以取消请求。

语言是[Javascript](https://developer.mozilla.org/en/JavaScript)（jQuery 只是一个库），当你习惯匿名函数时，它们真的很酷......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:20:29.293

jQuery 使用 get() 使用 HTTP get 请求从服务器加载数据。还有一个 .post() 方法来使用发布请求等。

有关 .get() 的更多信息可以在这里找到.....

[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

# r - 自动克里金空间数据

> ID：11018038
> 
> 赞同：3
> 
> 时间：2012-06-13T15:14:54.547
> 
> 标签：r, ggplot2, spatial-interpolation, automap

我正在尝试使用克里金函数在海洋横断面中创建化学参数的垂直图，但我很难开始。

我的数据如下所示：

```
horiz=rep(1:5, 5)
depth=runif(25)
value = horiz+runif(25)/5
df <- data.frame(horiz, depth, value) 
```

包中的`autoKrige`函数`automap`看起来应该为我完成这项工作，但它需要一个 class 对象`SpatialPointsDataFrame`。据我所知，`spTransform`包中的函数`rgdal`创建了`SpatialPointsDataFrame`对象，但是有两个问题：

*   [CRAN不提供](http://cran.r-project.org/web/packages/rgdal/index.html)此 OSX 二进制文件，而且我在 OXS 10.7 上运行的 RStudio 副本似乎无法安装它，并且

*   此功能似乎适用于经纬度数据和地球曲率的正确距离值。由于我正在处理垂直平面（以及短距离，数百米的规模），我不想更正我的距离。

[这里](https://stackoverflow.com/questions/10047870/plotting-interpolated-data-on-map)有一个关于 R 中克里金法的精彩讨论，但由于上面列出的问题，我不太明白如何将它应用于我的具体问题。

我想要一个矩阵或数据框来描述具有我的化学参数的插值的点网格，然后我可以绘制（理想情况下使用 ggplot2）。我怀疑我的问题的解决方案比我想象的要容易得多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T15:47:33.323

所以有几个问题你想回答：

1.  该`spTransform`函数不创建 SPDF，而是在投影之间进行转换。要创建 SPDF，您可以从简单`data.frame`开始。要转换`df`为 SPDF：

    ```
    coordinates(df) = c("horiz", "depth") 
    ```

2.  OS X 的二进制文件`rgdal`可以在[http://www.kyngchaos.com](http://www.kyngchaos.com/software/frameworks)找到。但我怀疑你是否需要 rgdal。

3.  `spTransform`可以对 latlong 数据进行操作，也可以对投影数据进行操作。但我认为您不需要 rgdal，或者`spTransform`，另请参见第 1 点。

4.  使用第 1 点创建 SPDF 后，您可以使用[您提到的帖子中的信息](https://stackoverflow.com/questions/10047870/plotting-interpolated-data-on-map)继续。

# c# - EditorForModel 不呈现 ICollection 属性

> ID：11018040
> 
> 赞同：0
> 
> 时间：2012-06-13T15:14:55.750
> 
> 标签：c#, asp.net-mvc-3, razor

我`EditorForModel`在一个具有类型属性的类上使用助手，`ICollection<int>`不幸的是我无法在我的页面中看到我的控件呈现。

这是示例：

模型视图对象

```
public class CopyFromVM
{

    [UIHint("MultiEntityList")]
    public ICollection<int> EntityIds { get; set; }
    ...
} 
```

在 EditorTemplate 文件夹中，我有文件 MultiEntityList.cshtml

```
@model ICollection<int>

<select name="@ViewData.ModelMetadata.PropertyName" id="@ViewData.ModelMetadata.PropertyName" multiple="multiple" >
 ...
</select> 
```

当表单被渲染时，我没有任何类型的错误。属性只是从渲染中忽略。所以我怀疑这`EditorForModel`是忽略复杂类型。查看网络它应该适用于所有类型。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:21:22.623

以下应该从您的主视图中选择自定义模板：

```
@model CopyFromVM
@Html.EditorFor(x => x.EntityIds) 
```

以下不会：

```
@model CopyFromVM
@Html.EditorForModel() 
```

原因是框架不会递归到复杂的对象属性中。`Object.cshtml`您可以按照 Brad Wilson 在[此博客文章](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-4-custom-object-templates.html)中的说明修改默认编辑器模板（查看他的文章末尾的*Shallow Dive 与 Deep Dive部分）。*

还要确保您的编辑器模板放置在正确的文件夹中：`~/Views/Shared/EditorTemplates/MultiEntityList.cshtml`而不是`EditorTemplate`您的问题中所述（注意缺少的`s`）。

* * *

附带说明一下，您在编辑器模板中生成选择列表的名称和 id 属性的方式是不正确的，因为您没有考虑嵌套级别。例如，想象一下它`CopyFromVM`被用作另一个父视图模型的属性。在这种情况下，选择的名称将是错误的，并且默认模型绑定器将无法重新水化该值：请改用以下内容：

```
@model ICollection<int>
<select name="@ViewData.TemplateInfo.GetFullHtmlFieldName("")" id="@ViewData.TemplateInfo.GetFullHtmlFieldId("")" multiple="multiple" >
    ...
</select> 
```

好吧，实际上，不，您已经有帮手为您完成这项工作`@Html.ListBox`。在 ASP.NET MVC 视图中硬编码 HTML 表单元素似乎是一个非常脆弱的过程，我建议您避免。

* * *

还有一点要注意：为了生成一个选择列表，您通常需要在视图模型上使用 2 个属性：一个保存所选值，一个保存所有值。如此强烈地键入您的编辑器模板`ICollection<int>`是恕我直言，这是一种错误的方法。

# x++ - 关于数据字典

> ID：11018044
> 
> 赞同：0
> 
> 时间：2012-06-13T15:15:06.170
> 
> 标签：x++, axapta, dynamics-ax-2012, data-dictionary

我正在使用 Dynamics ax 2012。

我正在寻找一种使用动态 ax 创建外键的方法。

我尝试创建新的 -> 关系 -> 新的 -> 外键 -> 基于主键

我成功地创建了这个关系，但是当我在 SQLSERVER2008 中查看数据库时，我认为（（关系））没有创建外键！

那么主键呢！除了“RecId”，我还能做些什么来创建我的个人密钥！

如果有一天我想将使用 SQLSERVER2008 创建的数据库导入到 Dynamics AX 是否可以？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:34:32.280

抱歉，表关系是为了 AX 环境的利益，它不会同步到数据库。基本上只有字段和索引是同步的。

可以从 SQL 数据库制作 AX 数据库吗？

这可能可以使用大量 X++ 编程从源数据库元表中进行 ODBC 读取来完成。我不知道有没有人试过，但我怀疑。

[由于AX 数据字典](http://msdn.microsoft.com/en-us/library/aa588039)包含比 SQL 数据库更多的信息，因此您很可能通过重新设计整个数据库来获得更好的结果。

您将如何转换 SQL 数据库以使用[有效时间状态表和日期有效数据](http://msdn.microsoft.com/en-us/library/gg861781)？

# jquery - jQuery 嵌套排序 - 在排序/删除期间显示问题

> ID：11018052
> 
> 赞同：1
> 
> 时间：2012-06-13T15:15:37.783
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有一组可排序的项目，其中包含 1 级子项目。我需要子项目可排序以及可放置到其他项目上，并且我需要父项目也可排序（但不能放置在彼此或子项目上。）我几乎可以正常工作。最初，我对父母使用 Sortables，对孩子使用 Draggable/Droppable，但这并没有让我对孩子进行排序。我现在使用可排序连接到自身的常见嵌套可排序设置。这对孩子们来说没问题，但是当我尝试对父母进行排序时，DOM 开始......好吧，看看下面的小提琴，自己看看:)

[http://jsfiddle.net/nVk8G/5/](http://jsfiddle.net/nVk8G/5/)

我试过设置一个容差元素，虽然我只是发现它存在，所以我认为我没有正确使用它。我看过 Manuele Sarfatti 的[nestedSortable](http://mjsarfatti.com/sandbox/nestedSortable/)插件，它很棒，但不幸的是不适用于我拥有的标记。我相当确信标记是问题所在，但正如您可能猜到的那样，我无法改变这一点。

我没有在上面的小提琴中包含的一件事是我在`receive`事件中的代码，它检查拖动的项目是否是父项并被拖放到父项上，在这种情况下，我调用`.sortable("cancel")`以停止该项目置于另一个父级之下。仅当调用列表之间的连接时才应该调用此事件。

任何和所有的建议表示赞赏！我已经阅读了这里几乎所有与 jQuery UI 嵌套排序相关的问题，但没有找到答案。如果条件恰到好处，嵌套可排序对象似乎是其中一种效果很好的东西，否则会引起巨大的麻烦。

最后一件事，我在[这里](https://github.com/jquery/jquery-ui/pull/555/files)应用了补丁来纠正嵌套排序的一些跳跃行为。显然，您在 jsfiddle 链接上看不到这一点。

# ftp - NSIS 将文件夹复制到网络驱动器和 ftp 站点

> ID：11018053
> 
> 赞同：0
> 
> 时间：2012-06-13T15:15:46.137
> 
> 标签：ftp, nsis, network-drive

嗨，我想将本地计算机上的文件夹中的所有文件复制到网络驱动器。我尝试使用 CopyFiles "....\Source*. *" "\abc\Destination" 但它不起作用.....我也尝试了 File /r "....\Source*.* " "\abc\Destination ”。请让我知道我哪里出错了。另外请让我知道如何在 ftp 站点上复制文件夹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:43:47.693

Copyfiles 在内部使用[SHFileOperation](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762164%28v=vs.85%29.aspx)并且只要您遵循该 api 的限制就应该可以工作，尤其是关于完整路径的部分：“**不能夸大你的路径应该始终是完整路径**”和“**标准 MS-DOS 通配符，例如“* ", 只允许在文件名位置。在字符串的其他地方使用通配符会导致不可预知的结果**"

# php - sef url 在我的 joomla 2.5 自定义菜单模块中不起作用

> ID：11018056
> 
> 赞同：0
> 
> 时间：2012-06-13T15:15:51.020
> 
> 标签：php, httprequest, joomla2.5

我开发了一个模块来将子菜单显示为独立模块，在启用 sef 之前一切正常，项目 ID 不会更改为正确的

```
<ul class="list2">

                    <?php foreach ($items as $row) :?>
                    <?php

                        //$router = JSite::getRouter();
                        if ($router->getMode() == JROUTER_MODE_SEF) {

                            $link = $router->build($row->link);
                            $router->setVar('Itemid',$row->id);
                            echo $_REQUEST['Itemid'];
                            //$link =$row->alias;
                        }else {
                            $link = $row->link.'&Itemid='.$row->id;
                        }

                    ?> 
```

我尝试使用 JSITE::route 甚至 router->build 并尝试重置 $_Request['Itemid'] 但没有任何效果

我做错了什么，请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:31:48.550

找到了解决方案，只需要在创建链接之前更改项目ID

```
$router->setVar('Itemid',$row->id);
$link = $router->build($row->link); 
```

希望这将有助于其他开发人员:)

# objective-c - Objective-C 在自定义方法中将 NSError 指针传递给 NSFileManager

> ID：11018059
> 
> 赞同：0
> 
> 时间：2012-06-13T15:15:56.457
> 
> 标签：objective-c, pointers, nsfilemanager, nserror

我有一个使用 ARC 并采用 NSError 指针的方法，我将它传递给如下`contentsOfDirectoryAtPath:error:`方法`NSFileManager`：

```
+ (NSArray *) getContentsOfCurrentDirectoryWithError: (NSError **)error
{
    // code here

    _contentsOfCurrentDirectory = [_fileManager contentsOfDirectoryAtPath: _documentDirectory error: error];

    // more code here
} 
```

我不确定这段代码是否正确，因为我不太习惯指针，因为被托管语言破坏了。但是，我最初的反应是这样做：

```
_contentsOfCurrentDirectory = [_fileManager contentsOfDirectoryAtPath: _documentDirectory error: &error]; 
```

不过，Xcode 对我大喊大叫，因为我这样做了。我对这可能如何工作的假设是该`contentsOfDirectoryAtPath:error:`方法正在请求一个指针，并且由于我在我的`getContentsOfCurrentDirectoryWithError:error:`方法中请求一个指针，所以我可以`error`不使用取消引用运算符而通过。

我只是想确保我这样做是正确的，以避免以后出现麻烦，所以我所拥有的有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:40:23.397

方法可以是这样的 .h 文件中的**NSError **errorMessage ：**

```
+ (NSArray *) getContentsOfCurrentDirectory
{ 
  NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,    NSUserDomainMask, YES);
  NSString *_documentsDirectory = [paths objectAtIndex:0]; 
  NSArray *_contentsOfCurrentDirectory = [[NSFileManager defaultManger]  contentsOfDirectoryAtPath: _documentDirectory error: errorMessage]; 
  return contentsOfCurrentDirectory ;
} 
```

每当发生错误时，**errorMessage**引用都会有错误消息 [错误描述]

# php - 用于在日历上阻止事件的 MySQL 数据库设计

> ID：11018062
> 
> 赞同：0
> 
> 时间：2012-06-13T15:16:14.133
> 
> 标签：php, mysql, calendar

我有一个关于 PHP 和 MySQL 的简单日历，它以简单的格式存储事件：

```
id int
name varchar    
start datetime 
end datetime 
```

我需要做的并且找不到可靠的方法是“阻止”某个时间段，以便在该时间窗口内不能有任何其他事件。

我试图找到的基本上是mysql查询来检查新选择的时间范围是否被占用：

如果我这样走：

```
SELECT * FROM events WHERE new_event_start => start AND  new_event_end =< end; 
```

找不到在之前开始`new_event_start`和之后结束的事件`new_event_end`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:28:41.327

这是一个逻辑问题，而不是语言或技术问题。

您需要测试几种情况：

> ```
> End of new event is between the beginning and end of blocked period
> OR
> Beginning of new event is between the beginning and end of blocked period
> OR
> Beginning of new event is before the beginning of the blocked period and the end is after the end of the blocked period 
> ```

这将捕获与阻塞时间段重叠的所有事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:25:23.347

尝试这个

```
select count(*) from events 
where (start between new_event_start and new_event_end) 
OR (end between new_event_start and new_event_end); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T15:21:46.090

在 WHERE 中使用 OR。

SELECT * FROM events WHERE (new_event_start => start AND new_event_end =< end) OR (new_event_start <= start AND new_event_end >= end) OR ...

# text-editor - 在 Sublime Text 2 中更改单个范围的字体大小

> ID：11018066
> 
> 赞同：3
> 
> 时间：2012-06-13T15:16:27.417
> 
> 标签：text-editor, font-size, sublimetext2

是否可以在`.tmTheme`Sublime Text 2 的文件中更改单个范围内的字体大小？我找不到任何关于我可用的密钥的文档。

我真正想做的是，`\section{name}`在 LaTeX 中以不同大小的字体命名该部分的名称，例如：

```
<dict>
  <key>scope</key>
  <string>entity.name.section.latex</string>
  <key>settings</key>
  <dict>
    <key>font_size</key>
    <string>20</string>
  </dict>
</dict> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-07T05:39:24.603

不幸的是，这在 Sublime Text 2 或 3 中似乎是不可能的。有关 Sublime Text 2 中[每个令牌字体大小](https://stackoverflow.com/questions/20414173/per-token-font-size-in-sublime-text-2)的详细信息，请参阅这篇文章。

我还尝试根据范围更改字体系列（例如 consolas 或 helvetica），这似乎同样不可能。我不知道为什么这个功能不可用，所以如果你给 Jon Skinner 发一封电子邮件，他会帮你解决的；）

# ruby-on-rails-3 - CSS3 Rails 和 Heroku

> ID：11018067
> 
> 赞同：0
> 
> 时间：2012-06-13T15:16:30.007
> 
> 标签：ruby-on-rails-3, css, twitter-bootstrap

我遇到了 CSS3 代码和 heroku 的问题。我目前在 heroku 上临时托管我的网站，这段代码似乎不起作用：

```
#my_footer
{
    margin-top:170px;
    background-color:rgba(17,142,36,0.3); /* added this because of the backgroud */
    border-radius: 3px 3px 3px 3px;
} 
```

特别是这行代码：`background-color:rgba(17,142,36,0.3);` 奇怪的是它可以在我的本地主机上运行，​​但不能在 heroku 上运行！我使用的是同一个浏览器！

顺便说一句，我的 config/environments/production.rb 中有这个

```
...
  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = true #changed to true!
... 
```

否则heroku会返回一个错误，如果它是'false'则不显示页面我正在使用twitter bootstrap btw！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:19:55.670

您可以尝试在本地编译然后尝试推送它，

来自heroku

```
RAILS_ENV=production bundle exec rake assets:precompile 
```

如果您使用 twitter bootstrap gem，我认为它应该分组在资产中

```
group :assets do
  gem 'twitter ...'
end 
```

# sql - 将 SQL 列中的分隔值拆分为多行

> ID：11018076
> 
> 赞同：27
> 
> 时间：2012-06-13T15:17:15.903
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我真的很想在这里得到一些建议，以提供一些我正在将 Exchange 2007 中的消息跟踪日志插入 SQL 的背景信息。由于我们每天有数以百万计的行，因此我使用批量插入语句将数据插入到 SQL 表中。

实际上，我实际上是批量插入临时表，然后从那里将数据合并到实时表中，这是为了测试解析问题，因为某些字段在值周围有引号等。

这很好用，除了收件人地址列是一个由 ; 分隔的分隔字段之外。字符，有时可能会非常长，因为可能有很多电子邮件收件人。

我想采用这一列，并将值拆分为多行，然后将这些行插入另一个表中。问题是我正在尝试的任何事情要么花费太长时间，要么没有按照我想要的方式工作。

以这个示例数据为例：

```
message-id                                              recipient-address
2D5E558D4B5A3D4F962DA5051EE364BE06CF37A3A5@Server.com   user1@domain1.com
E52F650C53A275488552FFD49F98E9A6BEA1262E@Server.com     user2@domain2.com
4fd70c47.4d600e0a.0a7b.ffff87e1@Server.com              user3@domain3.com;user4@domain4.com;user5@domain5.com 
```

我希望将其格式化为我的收件人表中的以下内容：

```
message-id                                              recipient-address
2D5E558D4B5A3D4F962DA5051EE364BE06CF37A3A5@Server.com   user1@domain1.com
E52F650C53A275488552FFD49F98E9A6BEA1262E@Server.com     user2@domain2.com
4fd70c47.4d600e0a.0a7b.ffff87e1@Server.com              user3@domain3.com
4fd70c47.4d600e0a.0a7b.ffff87e1@Server.com              user4@domain4.com
4fd70c47.4d600e0a.0a7b.ffff87e1@Server.com              user5@domain5.com 
```

有没有人对我如何去做这件事有任何想法？

我非常了解 PowerShell，所以我尝试过，但是即使在 28K 记录上的 foreach 循环也需要很长时间才能处理，我需要能够尽可能快速/高效地运行的东西。

谢谢！

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-13T15:31:36.217

## 如果您使用的是 SQL Server 2016+

您可以使用新`STRING_SPLIT`功能，我在[这里](https://sqlperformance.com/2016/03/sql-server-2016/string-split)写过博客，Brent Ozar 也写过[这里](https://www.brentozar.com/archive/2016/03/splitting-strings-sql-server-2016-rescue/)。

```
SELECT s.[message-id], f.value
  FROM dbo.SourceData AS s
  CROSS APPLY STRING_SPLIT(s.[recipient-address], ';') as f; 
```

## 如果您仍在使用 SQL Server 2016 之前的版本

创建拆分函数。这只是众多示例之一：

```
CREATE FUNCTION dbo.SplitStrings
(
    @List       NVARCHAR(MAX),
    @Delimiter  NVARCHAR(255)
)
RETURNS TABLE
AS
    RETURN (SELECT Number = ROW_NUMBER() OVER (ORDER BY Number),
        Item FROM (SELECT Number, Item = LTRIM(RTRIM(SUBSTRING(@List, Number, 
        CHARINDEX(@Delimiter, @List + @Delimiter, Number) - Number)))
    FROM (SELECT ROW_NUMBER() OVER (ORDER BY s1.[object_id])
        FROM sys.all_objects AS s1 CROSS APPLY sys.all_objects) AS n(Number)
    WHERE Number <= CONVERT(INT, LEN(@List))
        AND SUBSTRING(@Delimiter + @List, Number, 1) = @Delimiter
    ) AS y);
GO 
```

我在这里讨论了其他一些[，这里](https://sqlperformance.com/2012/08/t-sql-queries/splitting-strings-follow-up)，[以及比一开始在](https://sqlperformance.com/2012/07/t-sql-queries/split-strings)[这里](https://sqlperformance.com/2012/08/t-sql-queries/splitting-strings-now-with-less-t-sql)拆分更好的方法。

现在您可以简单地通过以下方式进行推断：

```
SELECT s.[message-id], f.Item
  FROM dbo.SourceData AS s
  CROSS APPLY dbo.SplitStrings(s.[recipient-address], ';') as f; 
```

另外我建议不要在列名中添加破折号。这意味着您必须始终将它们放入`[square brackets]`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-11-04T16:42:51.870

SQL Server 2016 包含一个新的表函数 string_split()，类似于之前的解决方案。

唯一的要求是将兼容性级别设置为 130 (SQL Server 2016)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-09T06:47:01.820

您可以使用[CROSS APPLY](https://www.mssqltips.com/sqlservertip/1958/sql-server-cross-apply-and-outer-apply/)（在 SQL Server 2005 及更高版本中可用）和[STRING_SPLIT](https://docs.microsoft.com/en-us/sql/t-sql/functions/string-split-transact-sql)函数（在 SQL Server 2016 及更高版本中可用）：

```
DECLARE @delimiter nvarchar(255) = ';';

-- create tables
CREATE TABLE MessageRecipients (MessageId int, Recipients nvarchar(max));
CREATE TABLE MessageRecipient (MessageId int, Recipient nvarchar(max));

-- insert data
INSERT INTO MessageRecipients VALUES (1, 'user1@domain.com; user2@domain.com; user3@domain.com');
INSERT INTO MessageRecipients VALUES (2, 'user@domain1.com; user@domain2.com');

-- insert into MessageRecipient
INSERT INTO MessageRecipient
SELECT MessageId, ltrim(rtrim(value))
FROM MessageRecipients 
CROSS APPLY STRING_SPLIT(Recipients, @delimiter)

-- output results
SELECT * FROM MessageRecipients;
SELECT * FROM MessageRecipient;

-- delete tables
DROP TABLE MessageRecipients;
DROP TABLE MessageRecipient; 
```

结果：

```
MessageId   Recipients
----------- ----------------------------------------------------
1           user1@domain.com; user2@domain.com; user3@domain.com
2           user@domain1.com; user@domain2.com 
```

和

```
MessageId   Recipient
----------- ----------------
1           user1@domain.com
1           user2@domain.com
1           user3@domain.com
2           user@domain1.com
2           user@domain2.com 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-07-10T19:40:28.083

for `table = "yelp_business"`，将由分隔的列`categories`值拆分`;`为行并显示为`category`列。

```
SELECT unnest(string_to_array(categories, ';')) AS category
   FROM yelp_business; 
```

# php - 动态检查和取消选中任务树

> ID：11018079
> 
> 赞同：0
> 
> 时间：2012-06-13T15:17:23.673
> 
> 标签：php, javascript, ajax, cakephp

我在制作任务树时遇到问题，我有动态复选框。基本上，如果选中了顶级（父任务），我希望它检查所有子任务（子框）。我有这个在我的一个任务树上工作，但由于某种原因不能让它为我的另一个工作。

```
<script>
$(function() {

    $.ajaxSetup( { cache: false } );
    $('.task-tree').tree({
        ui: {
            theme_name: 'checkbox'
        },
        plugins : {
            checkbox: { three_state: false }
        },
        callback: {
            onload: function( tree ) {
                tree.open_all();
                $('.task-tree li a').each( function() {
                    var taskID = GetIdNum( $(this).attr('id') );
                    if ( $('#Task' + taskID + 'Enabled').val() == 1 )
                    {
                        console.log( $(this).parent() );
                        jQuery.tree.plugins.checkbox.check( $(this).parent() );
                    }
                });
            },
            onchange: function( node, tree ) {
                var selectedID = GetIdNum( $(node).find('a').attr('id') );
                var required = $('#Task' + selectedID + 'Required').val();
                console.log( 'REQ --> ' + required );

                if ( required == 1 )
                {
                    return false;
                }
                else
                {                   
                    $('.task-tree li a').each( function() {
                        var taskID = GetIdNum( $(this).attr('id') );
                        console.log( taskID );
                        $('#Task' + taskID + 'Enabled').val(1);
                    });
                    console.log( '----------------------------------------------' );

                    var unchecked = jQuery.tree.plugins.checkbox.get_unchecked(tree).find('a.not-required');
                    $(unchecked).each( function(){
                        var taskID = GetIdNum( $(this).attr('id') );
                        console.log( taskID );
                        $('#Task' + taskID + 'Enabled').val(0);
                    });     
                    console.log( '*************************************************' );
                }
            }
        }
    });

}); 
```

如果您需要有关该问题的更多信息，请告诉我。

# colors - 如何通过输入距离从所选颜色计算色相、饱和度和亮度值

> ID：11018080
> 
> 赞同：2
> 
> 时间：2012-06-13T15:17:33.907
> 
> 标签：colors, formulas, hsl

给定一个起始十六进制代码，我想知道以升序和降序计算亮度线性值的数学。色相和饱和度也一样。

我很难准确地描述我想要的东西，幸运的是我发现这个页面使用了我需要的确切算法：

[http://www.workwithcolor.com/hsl-color-schemer-01.htm](http://www.workwithcolor.com/hsl-color-schemer-01.htm)

如果您检查该页面，您会发现最后 3 个重做按钮显示为：色相线性、饱和度线性、亮度线性。每个都为您提供与原始十六进制代码相对应的升序十六进制代码列表。

例如，对于亮度，他们给出了以下列表（来自颜色 FFCE2E）： FFCE2E FFDA61 FFE694 FFF2C7 FFFEFA

我需要公式，拜托。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-28T01:30:26.367

你可以从多个地方混合它。简而言之，您需要：

1.  您选择的颜色的 HSL 值。也许这是通过将 RGB 转换为 HSL（[如何获得 #xxxxxx 颜色的色调？](https://stackoverflow.com/questions/3732046/how-do-you-get-the-hue-of-a-xxxxxx-colour)）或在网站上您只需在调色板上选择它来获得的
2.  现在您有了 3 个分量（H、S 和 L），根据您选择的复选框，您开始按编辑框中给出的 % 值递减分量。
3.  在此递减过程中，您将获得一个值列表，现在您将执行从 HSL 值到 RGB 的反向转换（[HSL 到 RGB 颜色转换](https://stackoverflow.com/questions/2353211/hsl-to-rgb-color-conversion)）。

    ```
    // I gonna use rgbToHsl and hslToRgb from https://stackoverflow.com/questions/2353211/hsl-to-rgb-color-conversion
    var initialRGB = [ir, ig, ib];
    var initialHSL = rgbToHsl(initialRGB[0], initialRGB[1], initialRGB[2]);
    var howManyVariants = 4;
    var decrementPercent = 0.1;  // 10%
    // This example is for hue change
    var decrement = initialHSL[0] * decrementPercent;
    for (var i = 0; i < howManyVariants; i++) {
      // Linear decrementation
      var nextHue = initialHSL[0] - i * decrement;
      var nextColor = hslToRgb(nextHue, initialHSL[1], initialHSL[2]);
      // visualize somehow
    } 
    ```

类似地，如果您想要一组饱和度变化，那么您只需减少第二个参数/分量，如果您想要改变发光度，您可以改变第三个参数。

希望这很清楚。

# sql-server - T-SQL存储过程构造

> ID：11018081
> 
> 赞同：0
> 
> 时间：2012-06-13T15:17:37.620
> 
> 标签：sql-server, tsql, stored-procedures

我正在尝试开发一个 T-SQL 存储过程并在那里执行一些逻辑和计算，但由于某种原因出现语法错误。我将强调关键的地方，我不知道该怎么做。

```
CREATE PROC AddInvestment
@_Investor nvarchar(89),
@_Sum decimal(19,4),
@_Currency smallint,
@_Rate tinyint,
@_Date date,
@_Comment nvarchar(max)

AS

DECLARE @_MavroRate decimal(19,4)
DECLARE @_Mavro decimal(19,4)

SELECT mr.[40] INTO @_MavroRate <==== ERROR
FROM dbo.MavroRateBuy mr
WHERE mr.Date = @_Date

@_Mavro = _Sum / @_MavroRate <==== ERROR

INSERT INTO Investments(Investor, Sum, Currency, Rate, Date, Mavro, MavroRate, Comment)
VALUES (@_Investor, @_Sum, @_Currency, @_Rate, @_Date, @_Mavro, @_MavroRate, @_Comment) 
```

您能否通过 T-SQL 语句验证并指出我在这里做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:20:13.210

我想是这样的：

```
SELECT @_MavroRate = mr.[40]  
FROM dbo.MavroRateBuy mr
WHERE mr.Date = @_Date

SELECT @_Mavro = @_Sum / @_MavroRate 
```

@_Sum 在使用前需要有一个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:22:15.153

试试这个：

```
CREATE PROC AddInvestment
@_Investor nvarchar(89),
@_Sum decimal(19,4),
@_Currency smallint,
@_Rate tinyint,
@_Date date,
@_Comment nvarchar(max)

AS

DECLARE @_MavroRate decimal(19,4)
DECLARE @_Mavro decimal(19,4)

SELECT @_MavroRate = mr.[40]
FROM dbo.MavroRateBuy mr
WHERE mr.Date = @_Date

SET @_Mavro = @_Sum / @_MavroRate

INSERT INTO Investments(Investor, Sum, Currency, Rate, Date, Mavro, MavroRate, Comment)
VALUES (@_Investor, @_Sum, @_Currency, @_Rate, @_Date, @_Mavro, @_MavroRate, @_Comment) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T15:32:21.370

你`SET`前面少了一个`@_Mavro = _Sum / @_MavroRate`。它应该类似于下面的代码。

```
SET @_Mavro = _Sum / @_MavroRate 
```

此外，`INTO`用于将结果插入新表，而不是设置变量。下面的代码将是在 select 语句中设置变量的正确方法。

```
SELECT @_MavroRate = mr.[40]
FROM dbo.MavroRateBuy mr
WHERE mr.Date = @_Date 
```

# networking - DHCP 多 IP 地址请求

> ID：11018082
> 
> 赞同：2
> 
> 时间：2012-06-13T15:17:38.353
> 
> 标签：networking, udp, router, dhcp

我正在尝试使用 C++ 代码从我的一端模仿 DHCP 客户端。我的目标是从 DHCP 服务器获取一些免费/未使用的 IP，以将其分配给不同的设备 - 类似于 DHCP 中继，但在技术上并不相同。我`CLIENT`在嵌入式 linux 平台上运行，并通过我们的内部网络与 DHCP 服务器通信。

根据 DHCP 协议，有一个正式的程序 ( `DISCOVER`, `OFFER`, `REQUEST`, `ACK/NAK`, `RELEASE`) 与 DHCP 服务器通信。根据 RFC (2131)，当我执行 a 时，我在 YIAddr 字段中`DISCOVER`收到一个未使用的 IP 地址。我使用RFC 2132 中提到的选项 50`OFFER`在我的消息中进一步使用此 IP 地址。`REQUEST`

我的主路由器 make-Edgewater（也是 DHCP 服务器）在发送`DISCOVER`消息时，会在 YIAddr 字段中发回`OFFER`一条带有未使用 IP 地址的消息（我在后续`REQUEST`消息中使用了这个未使用的 IP），这是我的要求。我对其他几个路由器（NetGear、Dlink、Broadcom）做了同样的实验，发现该`OFFER`消息将我发送回`CLIENT`请求未使用 IP 的相同 IP 地址。我很想知道为什么会这样。据我了解，我正在按照 RFC2131/RFC2131/RFC4361 中提到的步骤来创建我的 DHCP 数据包格式。

是否有其他 DHCP 服务器/路由器期望提供未使用的 IP 的特定格式或特定选项？如 RFC4361 中所述，我在我的选项字段中使用了唯一的客户端标识符。

这是我正在创建 dhcp 数据包的部分的快照。

```
 request_packet.m_OperationCode  =   0x01;
request_packet.m_HwareType  =   0x01;
request_packet.m_HwareLen   =   0x06;
request_packet.m_Hops       =   0x01;
request_packet.m_XID        =   htonl(XID[m_numberOfIPs]);
request_packet.m_Secs       =   htons(0x10);
request_packet.m_flags      =   htons(0x8000);
request_packet.m_CIAddr     =   0x000000; //Client IP
request_packet.m_YIAddr     =   0x000000; //Your IP
request_packet.m_SIAddr     =   0x000000; //Server IP
request_packet.m_GIAddr         =   0x000000;
request_packet.m_CHAddr[0]  =   MACADDRESS[m_numberOfIPs][0];
request_packet.m_CHAddr[1]  =   MACADDRESS[m_numberOfIPs][1];//[1];
request_packet.m_CHAddr[2]  =   MACADDRESS[m_numberOfIPs][2];//[2];
request_packet.m_CHAddr[3]  =   MACADDRESS[m_numberOfIPs][3];//[3];
request_packet.m_CHAddr[4]  =   MACADDRESS[m_numberOfIPs][4];//[4];
request_packet.m_CHAddr[5]  =   MACADDRESS[m_numberOfIPs][5];//[5];
memset(request_packet.m_CHAddr+6, 0, 10);
memset(request_packet.m_SName, 0, 64);      
memset(request_packet.m_File, 0, 128);  
request_packet.m_pOptions[0]    =   99; //Start of magic cookie
request_packet.m_pOptions[1]    =   130;            
request_packet.m_pOptions[2]    =   83;
request_packet.m_pOptions[3]    =   99; //end of magic cookie 
```

# 选项字段

## 发现消息

CID 和 DUID 是随机的唯一数字，用于创建唯一的客户端标识符

```
 request_packet.m_pOptions[4]   =   53; //DHCP MESSAGE TYPE OPTION CODE
 request_packet.m_pOptions[5]   =   1;  //OPTION DATA LEN
 request_packet.m_pOptions[6]   =   1;  //DHCP DISCOVER

 request_packet.m_pOptions[7]   =   55; //Parameter Request List
 request_packet.m_pOptions[8]   =   7; //Length
 request_packet.m_pOptions[9]   =   1; //Subnet Mask
 request_packet.m_pOptions[10]  =   3; //Router
 request_packet.m_pOptions[11]  =   6; //Domain Name Server
 request_packet.m_pOptions[12]  =   12; // Host Name
 request_packet.m_pOptions[13]  =   15; //Domain Name
 request_packet.m_pOptions[14]  =   28; //Broadcast Address
 request_packet.m_pOptions[15]  =   42; //NTP servers

 request_packet.m_pOptions[16]  =   51; //IP Address Lease Time
 request_packet.m_pOptions[17]  =   4;  
 request_packet.m_pOptions[18]  =   0x00;
 request_packet.m_pOptions[19]  =   0x00;
 request_packet.m_pOptions[20]  =   0xFF;
 request_packet.m_pOptions[21]  =   0xFF;

 request_packet.m_pOptions[22]  =   61;//Client Identifier code
 request_packet.m_pOptions[23]  =   15;//Length
 request_packet.m_pOptions[24]  =   255;//IAID Type
 printf("The CID generated inside REQUEST is %x\n", CID[m_numberOfIPs]);
 request_packet.m_pOptions[25]  =   CID[m_numberOfIPs][0];
 request_packet.m_pOptions[26]  =   CID[m_numberOfIPs][1];
 request_packet.m_pOptions[27]  =   CID[m_numberOfIPs][2];
 request_packet.m_pOptions[28]  =   CID[m_numberOfIPs][3];
 request_packet.m_pOptions[29]  =   0x00;//DUID Type
 request_packet.m_pOptions[30]  =   0x03;//DUID Type
 request_packet.m_pOptions[31]  =   0x00;//HW Type code - Ethernet
 request_packet.m_pOptions[32]  =   0x01;//HW Type code - Ethernet
 request_packet.m_pOptions[33]  =   DUID[m_numberOfIPs][0];
 request_packet.m_pOptions[34]  =   DUID[m_numberOfIPs][1];
 request_packet.m_pOptions[35]  =   DUID[m_numberOfIPs][2];
 request_packet.m_pOptions[36]  =   DUID[m_numberOfIPs][3];
 request_packet.m_pOptions[37]  =   DUID[m_numberOfIPs][4];
 request_packet.m_pOptions[38]  =   DUID[m_numberOfIPs][5];

 request_packet.m_pOptions[39]  =   (0xff);  // End option 
```

## 请求消息

```
request_packet.m_pOptions[4]    =   53; //DHCP MESSAGE TYPE OPTION CODE
request_packet.m_pOptions[5]    =   1;  //OPTION DATA LEN
request_packet.m_pOptions[6]    =   3;  //DHCP REQUEST

request_packet.m_pOptions[7]    =   50; //DHCP REQUESTION OPTION
request_packet.m_pOptions[8]    =   4;  //OPTION DATA LEN
request_packet.m_pOptions[9]    =   (m_YourIP & 0xff000000)>>24;  //first byte
request_packet.m_pOptions[10]   =   (m_YourIP & 0xff0000)>>16;  //second byte
request_packet.m_pOptions[11]   =   (m_YourIP & 0xff00)>>8;  //third byte
request_packet.m_pOptions[12]   =   (m_YourIP & 0xff);  //fourth byte
/*- Added by JA. Refer 3.1.3 Section of RFC2131.txt - Server identifier option*/
 request_packet.m_pOptions[13]  =   54;
 request_packet.m_pOptions[14]   =  4;
 request_packet.m_pOptions[15]  =   (m_ServerIP & 0xff000000) >> 24; //first byte
 request_packet.m_pOptions[16]  =   (m_ServerIP & 0xff0000)>>16;  //second byte
 request_packet.m_pOptions[17]  =   (m_ServerIP & 0xff00)>>8;  //third byte
 request_packet.m_pOptions[18]  =   (m_ServerIP & 0xff);  //fourth byte

 request_packet.m_pOptions[19]  =   55; //Parameter Request List
 request_packet.m_pOptions[20]  =   7; //Length
 request_packet.m_pOptions[21]  =   1; //Subnet Mask
 request_packet.m_pOptions[22]  =   3; //Router
 request_packet.m_pOptions[23]  =   6; //Domain Name Server
 request_packet.m_pOptions[24]  =   12; // Host Name
 request_packet.m_pOptions[25]  =   15; //Domain Name
 request_packet.m_pOptions[26]  =   28; //Broadcast Address
 request_packet.m_pOptions[27]  =   42; //NTP servers

     request_packet.m_pOptions[28]  =   51; //IP Address Lease Time
     request_packet.m_pOptions[29]  =   4;  
     request_packet.m_pOptions[30]  =   0x00;
     request_packet.m_pOptions[31]  =   0x00;
     request_packet.m_pOptions[32]  =   0xFF;
     request_packet.m_pOptions[33]  =   0xFF;

     /*- Added by JA. Refer 6.1 Section of RFC4361.txt - Client identifier option*/
     request_packet.m_pOptions[34]  =   61;//Client Identifier code
     request_packet.m_pOptions[35]  =   15;//Length
     request_packet.m_pOptions[36]  =   255;//IAID Type
     printf("The CID generated inside REQUEST is %x\n", CID[m_numberOfIPs]);
     request_packet.m_pOptions[37]  =   CID[m_numberOfIPs][0];
     request_packet.m_pOptions[38]  =   CID[m_numberOfIPs][1];
     request_packet.m_pOptions[39]  =   CID[m_numberOfIPs][2];
     request_packet.m_pOptions[40]  =   CID[m_numberOfIPs][3];
     request_packet.m_pOptions[41]  =   0x00;//DUID Type
     request_packet.m_pOptions[42]  =   0x03;//DUID Type
     request_packet.m_pOptions[43]  =   0x00;//HW Type code - Ethernet
     request_packet.m_pOptions[44]  =   0x01;//HW Type code - Ethernet
     request_packet.m_pOptions[45]  =   DUID[m_numberOfIPs][0];
     request_packet.m_pOptions[46]  =   DUID[m_numberOfIPs][1];
     request_packet.m_pOptions[47]  =   DUID[m_numberOfIPs][2];
     request_packet.m_pOptions[48]  =   DUID[m_numberOfIPs][3];
     request_packet.m_pOptions[49]  =   DUID[m_numberOfIPs][4];
     request_packet.m_pOptions[50]  =   DUID[m_numberOfIPs][5];
     request_packet.m_pOptions[51]  =   (0xff);  // End option 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:51:43.177

使用路由器作为 DHCP 中继和服务器，它将为您分配在其上配置的基于唯一 IP 的 DHCP 子网，例如 10.1.2.0/24 是路由器上为 DHCP 请求定义的池，它将仅针对您的 MAC 分配第一个未分配的 IP，这分配是随机的，您不能在路由器上保留 mac。在 DORA 之后，它会触发该 MAC-IP 的租用计时器。

如果您使用 DHCP 服务器 Microsoft/Unix，它们具有为特定 mac 永久保留 IP 的扩展功能。

# java - Java PrintWriter 行为作为套接字

> ID：11018083
> 
> 赞同：-1
> 
> 时间：2012-06-13T15:17:40.040
> 
> 标签：java, sockets, client-server, printwriter, chunking

我制作了一个服务器，其中数据本身的发送是这样的：

```
PrintWriter writer = new PrintWriter(new OutputStreamWriter(clientSocket.getOutputStream(), "UTF-8"));
writer.write(json);
writer.close(); 
```

我怎么知道服务器是否确实发送了整个消息？

在我的客户端（用 C# 编写）中，当 json 字符串很长时，我会得到一定数量的字节，它小于 json 字符串的长度（由于某种原因，最大长度总是 183 个字节）。

客户端正在使用异步连接。我怎么知道服务器是否确实发送了整个消息？是否有可能我需要将一条长消息分成多个块并一个接一个地发送？我只是不确定问题出在服务器还是客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-06T18:30:38.717

我最后所做的是在消息中添加一个带有消息大小的标头，然后在 C# 端检查接收到的消息的大小是否是消息的大小，如果不是，请再次向套接字询问数据直到我收到完整的信息。

# c - dtrace - 从调用函数的不同位置传递到函数的变量的聚合

> ID：11018085
> 
> 赞同：0
> 
> 时间：2012-06-13T15:17:41.387
> 
> 标签：c, solaris, dtrace

抱歉标题过于复杂，但这是我的脚本的 dtrace 输出，我认为这将有助于解释我在说什么：

```
 16384                1
        38048                1
        38050                1
        38051                1
        38055                1

    -58632623                1
     -5180681                1
     -4576706                1
     -4498881                1
     -4472021                1
     -4464140                1
<...>
mymodule.so`FuncXXX
mymodule.so`FirstFunc+0x23c
8

mymodule.so`FuncXXX
mymodule.so`SecondFunc+0x4bc
9

mymodule.so`FuncXXX
mymodule.so`ThirdFunc+0x1e1
35

mymodule.so`FuncXXX
mymodule.so`FourthFunc+0x70
39 
```

dtrace 脚本是：

```
pid$1:mymodule:FuncXXX:entry{
    @a[arg1] = count();
    @b[arg2] = count();
    @c[ustack()] = count();
} 
```

FuncXXX 有签名：`void FuncXXX(void *arg, long int p, int q);`

现在，我想聚合变量`p`and `q`，但是按照调用 FuncXXX 的顺序，例如：

```
mymodule.so`FuncXXX'
mymodule.so`FirstFunc'+0x23c
8

            16384                1
            38048                1
            38050                1
            38051                1
            38055                1

        -58632623                1
         -5180681                1
         -4576706                1
         -4498881                1
         -4472021                1
         -4464140                1

mymodule.so`FuncXXX'
mymodule.so`SecondFunc'+0x4bc
9

            49599                1
            51533                1
            51535                1
            52149                1
            52152                1

          -148909                1
          -135530                1
          -121514                1
          -117860                1
               -97633                1
and so on 
```

有可能吗？或者我应该独立地追踪`FirstFunc`、、`SecondFunc`和？但问题是，在所有这些函数中，不能总是被调用。`ThirdFunc``FourthFunc``FuncXXX`

最好的问候和所有答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:26:32.350

聚合可以在多个维度进行索引，即您可以编写：

```
@a[ustack(2), arg1, arg2] = count(); 
```

如果您只对探测函数的*调用者*感兴趣，您还可以使用 DTrace 变量“ `caller`”（不幸的是，它为您提供了调用探测函数的*地址*`ustack()`- 而不是符号名称）或提供一些堆栈帧记录，`ustack(2)`只是给你probefunc（`FuncXXX`在你的情况下）和它被调用的地方。

因此，上述聚合告诉您“使用参数组合`FuncXXX`调用了多少次/ ”。`...``arg1``arg2`

# ruby - Ruby 1.9 Rails 3 使用变量启动守护进程

> ID：11018086
> 
> 赞同：3
> 
> 时间：2012-06-13T15:17:51.097
> 
> 标签：ruby, ruby-on-rails-3, daemon

我有一个要启动的守护程序，但我想在启动它时在守护程序中设置一些变量。这是我用来控制我的守护进程的脚本位于 RAILSAPP/script/daemon

```
#!/usr/bin/env ruby
require 'rubygems'
require 'daemons'

ENV["APP_ROOT"] ||= File.expand_path("#{File.dirname(__FILE__)}/..")
ENV["RAILS_ENV_PATH"] ||= "#{ENV["APP_ROOT"]}/config/environment.rb"

script = "#{ENV["APP_ROOT"]}/daemons/#{ARGV[1]}"

Daemons.run(script, dir_mode: :normal, dir: "#{ENV["APP_ROOT"]}/tmp/pids") 
```

当我启动这个守护进程时，我想将一个变量传递给它，就像对活动记录的引用一样，这样我就可以将守护进程的初始运行作为它的基础。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:22:37.103

如果要获取特定的 ActiveRecord 对象，可以只传递 id 或类名 + id 作为命令行上的附加参数。由于您已经使用 ARGV[1] 作为脚本名称，因此您可以将其作为 ARGV[2] 和 Product_123 之类的内容传递，然后通过拆分进行解析，并执行 Product.find(123) 以获取实际记录。

另一种方法是将对象信息放入 memcached 或 redis 之类的队列中，并让守护程序从队列中获取信息。这将使您的守护程序启动更简单，并允许您将多个记录排队以供守护程序处理。（无论如何，只处理一条记录可能会更好地写成脚本。）

我对您的脚本的另一个担忧是使用 ENV["APP_ROOT"]。这真的需要进入环境吗？如果你有第二个守护进程怎么办？看起来它作为一个局部变量会更好，如果你在守护进程中需要它，你总是可以相对于守护进程的文件所在的位置来获取它。

# sql - 根据列内容排除行

> ID：11018090
> 
> 赞同：0
> 
> 时间：2012-06-13T15:18:03.390
> 
> 标签：sql, sql-server-2008

我正在尝试编写一个查询，如果存在另一列中的值，它将根据特定列中的公共值排除行。本质上：

从客户那里选择电话、姓名、年龄等

我想做的是：例如，如果一位客户的信息是：111-222-3333，Rick，45，并且无论出于何种原因，45 都是特定值，如果它存在，我想排除与相应电话号码匹配的所有后续行，我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:22:57.633

听起来`WHERE NOT EXISTS`可能在这里工作，

```
SELECT Phone, Name, Age
FROM Customer C
WHERE NOT EXISTS (
    SELECT * FROM Customer M
    WHERE M.Age = 45 AND M.Phone = C.Phone
) 
```

# c# - 如何在 Visual Web Developer 2010 Express 中的选项卡之间切换

> ID：11018091
> 
> 赞同：4
> 
> 时间：2012-06-13T15:18:05.110
> 
> 标签：c#, visual-studio-2010

是否有键盘快捷键可以执行此操作？

ctrl m + ctrl g 切换控制器和视图，但是是否有在 ide 中打开的选项卡之间切换的快捷方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T15:19:26.387

不是ctrl+tab吗，和完整版一样

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T15:19:34.410

使用 Control + Tab，您可以在打开的选项卡中循环

# multithreading - 与 Resharper 并行运行时，Spring 托管数据库 NUnit 测试失败

> ID：11018094
> 
> 赞同：1
> 
> 时间：2012-06-13T15:18:15.457
> 
> 标签：multithreading, spring, nunit

目标：并行运行我们的数据库测试（使用不同的数据库）。

我们正在使用 Resharper 的 Nunit 选项将我们的单元测试集成到 Visual Studio 中。Resharper 允许您设置并行运行的程序集数量。串行运行时测试永远不会失败；但是，当我们将并行运行的程序集数量设置为 3 个或更多（可能是两个，尽管还没有一个失败）时，一些数据库测试总是失败。

我们的猜测是，数据提供者正在从测试中退出。我们使用 spring 作为 IOC，在我们的测试中它还处理事务管理。我们的旧测试需要种子数据，但我们的新测试需要一个空数据库并为测试创建任何必要的数据。我们认为，因为我们的测试夹具的引导程序正在设置 db 提供程序的连接字符串属性，所以当另一个测试并行运行时，它可以将提供程序从测试中更改出来。

无论哪种方式，并行运行数据库测试并且不会丢失我们使用 spring 获得的事务管理和测试清理会很好。

为每个测试运行的引导程序正在设置连接字符串（和数据库提供程序连接字符串）。

关于如何让这些测试（使用不同的连接字符串）并行运行的任何想法。

# javascript - 包装每个数字并将零添加到 X 位

> ID：11018095
> 
> 赞同：2
> 
> 时间：2012-06-13T15:18:17.133
> 
> 标签：javascript, jquery

是否有可能将每个字符包装在 Javascript 中并在其小于 X 位时添加零？

我得到/拥有的：

```
var votes = 2;
//or
var votes = 123;
//or
var votes = 4321; 
```

它应该是什么样子：

```
<span>0</span><span>0</span><span>0</span><span>2</span>
//or
<span>0</span><span>1</span><span>2</span><span>3</span>
//or
<span>4</span><span>3</span><span>2</span><span>1</span> 
```

所以结果应该是一个四位数的数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T15:24:27.047

这是一个棘手的版本：

```
var votes = 123;
("0000" + votes).slice(-4); /* 0123 */ 
```

* * *

因此，要将每个数字包装在 a 中，`<span>`您可以使用它来获取每个数字`$.map`并将其包装到自己的元素中，就像在这个示例小提琴中一样：http: [//jsfiddle.net/cZAWj/](http://jsfiddle.net/cZAWj/)

```
var votes = 973;

$.map(("0000" + votes).slice(-4), function(digit) {
    $('<span/>', { text : digit }).appendTo($('body'));
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T15:21:19.397

首先，让它看起来像一个字符串并填充它......

```
 function pad(number, length) {      
        var str = '' + number;
        while (str.length < length) {
            str = '0' + str;
        }       
        return str;
    } 
```

然后您可以对其进行迭代并在每个数字周围添加一个跨度。然后将标记写为父元素的 .html。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T15:21:41.083

一种方法是将数字转换为字符串并预先附加 0 直到我们达到所需的长度。

所以如果你想要`X`数字：

```
var strNb = "" + nb;
while (strNb.length < X){
  strNb = "0" + strNb
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T15:26:36.287

```
function formatNumber(d, x) {
    var l = String(d).length;
    return (l<x?(Array(x-l).join('0') + d):String(d)).replace(/\d/g,"<span>$&</span>");
} 
```

# php - php 定义密码，脚本中的用户名，安全性

> ID：11018100
> 
> 赞同：0
> 
> 时间：2012-06-13T15:18:35.870
> 
> 标签：php, security, passwords

```
<?php

   $Admin=Array
(
    "Username" => "Admin",
    "Password" => "Admin"
);

$User=Array
(
    "Username" => "User",
    "Password" => "User"
);

$AllUsers=Array
(
    $Admin,
    $User
);

?> 
```

所以我的第一个问题是：这有多安全（因为我的网站上只需要两个用户，我认为不需要使用数据库）？我问这个是因为我想知道一个人应该如何得到这个（除非它在我登录时可以访问我的计算机），因为 php 脚本是在浏览器获取它之前执行的。如果存在安全问题，我该如何解决？此外，我已经阅读过有关加密的内容，但我认为做这样的事情没有任何意义

```
<?php
   $Admin=Array
(
    "Username" => "Admin",
    "Password" => md5("something")
);

$User=Array
(
    "Username" => "User",
    "Password" => md5("somethingelse")
);

$AllUsers=Array
(
    $Admin,
    $User
);

?> 
```

因为如果该人有权访问 php 脚本，则该人也会获得密码。

我的最后一个问题是：有没有办法从网站下载源文件？（因为这会给下载这个 php 脚本的人提供密码）

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T15:30:07.037

有人可以访问和下载 PHP 文件。这并不容易，这可能是由于服务器配置不正确或其他安全故障点（例如文件下载 PHP 脚本写得不好）

一个不错的选择是将密码文件存储在服务器上您的脚本可以访问但您的 Web 服务器无法访问的位置。

即使您将数据存储在数据库中，也有人可以访问您的数据库服务器（通过错误的 PHP 代码或其他方式），然后对简单的 md5 哈希进行暴力攻击并找出密码。

为了简单的安全性，最好的办法是将密码文件放在 Web 服务器无法触及的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:21:00.180

通常，您可以下载源代码的唯一方法是服务器配置不当。但是，作为一项额外的安全措施，您可能需要考虑将用户名和密码放在 Web 根目录之外的单独文件夹中，该文件夹永远不会提供给用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T15:23:45.073

如果您的服务器配置正确，则无法下载 php 脚本。

此外，由于您的密码是纯文本，因此使用`md5()`

无论如何，我建议使用数据库，您可以在其中使用加密。

# javascript - 在 javascript 中使用 datauri 渲染图像

> ID：11018101
> 
> 赞同：3
> 
> 时间：2012-06-13T15:18:45.607
> 
> 标签：javascript, internet-explorer-8, data-uri

我正在尝试使用作为数据 uri 发送的 AJAX 加载图像。只要图像小于 32kb，一切正常。一些图像的大小约为 500 kb。我对此做了一些研究，发现 IE8 仅支持使用 datauri 加载 < 32kb 的图像。

是否有任何解决方法来加载 > 32kb 的图像，或者我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T15:22:04.653

[数据 URI 方案](http://en.wikipedia.org/wiki/Data_URI_scheme)

> Internet Explorer 8：出于安全原因，Microsoft 已限制对某些“不可导航”内容的支持，包括担心嵌入在数据 URI 中的 JavaScript 可能无法被基于 Web 的电子邮件客户端使用的脚本过滤器解释。**在版本 8 中，数据 URI 必须小于 32 KiB**。[3] 仅以下元素和/或属性支持数据 URI：[4]
> 
> *   对象（仅图像）
> *   图像
> *   输入类型=图像
> *   链接（数据 URI 必须是 base64 编码的）
> *   接受 URL 的 CSS 声明，例如 background-image、background、list-style-type、list-style 等。
> 
> Internet Explorer 9：Internet Explorer 9 没有 32KiB 的限制，允许在更广泛的元素中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:48:40.620

[是的，使用此处](http://jonraasch.com/blog/css-data-uris-in-all-browsers)和[此处](http://www.phpied.com/mhtml-when-you-need-data-uris-in-ie7-and-under/)描述的一些评论技巧将其作为 MHTML 提供。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T15:36:17.013

您可以将图像数据加载到画布元素中。
对于 IE8，您应该看看[如何在 IE 中使用 HTML5 画布元素？](https://stackoverflow.com/questions/1332501/how-can-i-use-the-html5-canvas-element-in-ie)

# splunk - 通用转发器无法与远程 Splunk Indexer 通信

> ID：11018110
> 
> 赞同：1
> 
> 时间：2012-06-13T15:19:33.117
> 
> 标签：splunk

我正在尝试使用通用转发器将我的 Activemq 日志推送到远程系统 Splunk Indexer，但它不起作用。在我的本地系统上，我看到如下日志：

> 2012 年 6 月 13 日 20:29:38.841 +0530 WARN DeploymentClient - 无法向部署服务器发送握手消息。错误状态为：not_connected 06-13-2012 20:29:40.741 +0530 WARN TcpOutputProc - 到 ip=ip.address:9997 的原始连接超时

本地系统操作系统 - Windows-7 远程系统操作系统 - Windows NT 2003

谁能帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:53:55.090

部署服务器通常运行在端口 8089 而不是 9997 上，这通常用于转发数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T03:20:25.453

默认情况下，Windows 防火墙禁用端口连接。

您可以尝试在高级防火墙设置中为 tcp 端口 9997（如果您使用此端口在 Splunk 服务器中接收数据）添加例外。

# php - Codeigniter 配置文件加载

> ID：11018112
> 
> 赞同：2
> 
> 时间：2012-06-13T15:19:35.000
> 
> 标签：php, codeigniter

我想在 Codeigniter 中使用包含常量的新文件，所以我创建了该文件`/config/labels.php`

当我尝试将它加载到我的控制器中时`$this->config->load('labels');`，它会抛出 `application/config/labels.php file does not appear to contain a valid configuration array.`

但是，当我将代码放在 constants.php 文件中时，一切正常。

```
labels.php 

<?php
define('CLI_CIVILITE','Civilité');
define('CLI_NOM','Nom');
define('CLI_PRENOM','Prenom'); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T15:22:31.953

配置文件应该包含一个数组`$config` 这就是它抛出错误的原因。

当配置类加载配置文件时，它会检查是否`$config`已设置。如果不是，它将引发错误。

据我所知，没有使用自定义常量加载您自己的文件的功能。到目前为止，您必须将这些常量添加到`application/config/constants.php`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-17T09:34:14.547

在常量文件中，定义如下变量：

```
$ORDER_STATUS = array(
    '0' => 'In Progress',
    '1' => 'On Hold',
    '2' => 'Awaiting Review',
    '3' => 'Completed',
    '4' => 'Refund Requested',
    '5' => 'Refunded'); 
```

然后，在控制器中：

```
function __construct()
{
    $this->config->load('$ORDER_STATUS');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T08:24:25.223

写在你的配置示例中并保存为banned_idcard.php

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
$config ['banned_idcard'] = array (
'23104013',
'2010201103',
'11106062',
); 
```

在你的控制器中

```
<?php
function __construct () {
$banned_idcards = $this->config->load('banned_idcard');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-09T03:47:31.367

在您的配置中`/config/labels.php`：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
$config = array(
    'CLI_CIVILITE' => 'Civilité',
    'CLI_NOM' => 'Nom',
    'CLI_PRENOM' => 'Prenom'
); 
```

在您的控制器中：

```
$this->config->load('labels');
var_dump((array)$this->config); //show all the configs including those in the labels.php 
```

# ios - 如何将 LC_LOAD_DYLIB 命令插入 Mach-O 二进制文件或将静态库加入现有二进制文件 (IOS)

> ID：11018113
> 
> 赞同：12
> 
> 时间：2012-06-13T15:19:37.183
> 
> 标签：ios, static-linking, dynamic-linking, mach-o

这是我第一次在 stackoverflow 上提问，我很绝望。

我的任务是加载 dylib 或将静态库加入到 IOS 设备的现有可执行文件中。

我将使用`static void __attribute__((constructor)) initialize(void)`开始调酒。这个可执行文件适用于内部企业应用商店，所以我不需要通过苹果应用商店（因为他们会拒绝它）。

这样做的原因是从客户那里获取现有的 IPA 及其签名密钥，并向他们的应用程序添加新功能，而无需开发人员干预。

有一家公司在做这件事，叫做 nukona。您可以在这里观看电影：[https ://www.youtube.com/watch?feature=player_embedded&v=z9rrOB6lOxY](https://www.youtube.com/watch?feature=player_embedded&v=z9rrOB6lOxY)

我可以告诉你，我尝试将 LSEnvironment 放入 plist 文件中，`DYLD_INSERT_LIBRARIES`但结果表明 LSEnvironment 在 IOS 应用程序的沙箱中似乎没有任何影响。

我还尝试了 install_name_tool 来更改其中一个依赖项并将其替换为我的 dylib（它也具有该依赖项）。它在没有信息的情况下崩溃。

显然，如果我将 dylib 添加到 XCode 中的测试应用程序并重新编译它可以完美运行，这是给定的。但是，这是我不能问的，例如，公司的管理员。重建可能会阻止客户使用此库。

这是我在堆栈溢出中找到的相关链接，但对于 osx，我需要它用于 IOS。 [如何将 LC_LOAD_DYLIB 命令插入 Mach-O 二进制文件 (OSX)](https://stackoverflow.com/questions/273142/how-to-insert-a-lc-load-dylib-command-into-a-mach-o-binary-osx)

我唯一能想到的就是以某种方式编辑二进制加载命令，但考虑到重定位表等，我不确定如何以及如何做到这一点......

欢迎任何替代方案。

感谢您的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-05T05:56:55.140

我开源了[`optool`](https://github.com/alexzielenski/optool)它确实做到了这一点（我没有在 iOS 上测试过，但它应该可以工作。如果你有问题，请打开一个问题）

# sql - 具有多个条件的 SQL 计数然后加入

> ID：11018114
> 
> 赞同：0
> 
> 时间：2012-06-13T15:19:39.757
> 
> 标签：sql

快一个，

我有一张桌子，结构如下

```
id  lid  taken
1   1    0
1   1    0
1   1    1
1   1    1
1   2    1 
```

很简单，对吧？

我需要从 1 的盖子中查询已获取/可用，它应该返回

```
taken  available
2      2 
```

**我知道我可以简单地做两个计数并加入它们，但是有没有比两个单独的查询更熟练的方法呢？**

我正在查看以下类型的格式，但我无法在 SQL 中执行它...

```
SELECT
   COUNT(case taken=1) AS taken, 
   COUNT(case taken=0) AS available FROM table
WHERE 
   lid=1 
```

太感谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T15:23:11.190

你可以这样做：

```
SELECT taken, COUNT(*) AS count
FROM table
WHERE lid = 1
GROUP BY taken 
```

这将返回两行：

```
taken  count
0      2
1      2 
```

每个计数对应`taken`于看到该特定值的次数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T15:24:11.547

您的查询是正确的，只需要稍微调整一下：

```
SELECT
   SUM(case taken WHEN 1 THEN 1 ELSE 0 END) AS taken, 
   SUM(case taken WHEN 1 THEN 0 ELSE 1 END) AS available FROM table
WHERE 
   lid=1 
```

或者你可以这样做：

```
SELECT
   SUM(taken) AS taken, 
   COUNT(id) - SUM(taken) AS available 
FROM table
WHERE 
   lid=1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T15:24:46.803

```
SELECT
   SUM(case WHEN taken=1 THEN 1 ELSE 0 END) AS taken, 
   SUM(case WHEN taken=0 THEN 1 ELSE 0 END) AS available 
FROM table
WHERE lid=1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T15:35:37.827

CTE的奇怪应用：

```
WITH lid AS (
        SELECT DISTINCT lid FROM taken
        )
, tak AS (
        SELECT lid,taken , COUNT(*) AS cnt
        FROM taken t0
        GROUP BY lid,taken
        )
SELECT l.lid
, COALESCE(a0.cnt, 0) AS available
, COALESCE(a1.cnt, 0) AS taken
FROM lid l
LEFT JOIN tak a0 ON a0.lid=l.lid AND a0.taken = 0
LEFT JOIN tak a1 ON a1.lid=l.lid AND a1.taken = 1
WHERE l.lid=1
        ; 
```

# command-line - 命令行字符串变量比较

> ID：11018115
> 
> 赞同：9
> 
> 时间：2012-06-13T15:19:45.403
> 
> 标签：command-line

我一直在尝试将我的计算机名与一些预设的字符串进行比较。通过在谷歌上阅读，即[http://commandwindows.com/batchfiles-branching.htm](http://commandwindows.com/batchfiles-branching.htm)，我尝试了以下和同一行的许多变体`/I`,`"%ComputerName"`等`A513242`

```
IF (%ComputerName% == "A513242") (
  EXIT) ELSE (
    ECHO "else taken") 
```

其中“A513242”是调用`ECHO %ComputerName%` 它的结果似乎总是采用“else take”分支。

`EXIT`关于为什么 ( ) 案例没有被采用/我犯了什么语法错误的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T15:23:47.787

试试这个：

```
if "%ComputerName%"=="A513242" (exit) else (echo "else taken") 
```

# python - 使用 pandas 0.8 重新采样的错误？

> ID：11018120
> 
> 赞同：2
> 
> 时间：2012-06-13T15:19:52.530
> 
> 标签：python, pandas, resampling

我目前正在努力使用 pandas 0.8.0b1 的重新采样功能。

例如，当我尝试将（使用“平均值”）10 分钟值聚合为每月值时，该函数似乎使用一个月的最后一天数据作为下个月的平均值......

这是一个包含 3 个月 10 分钟数据的简单时间序列的示例

*   2012 年 1 月：所有值 = 1
*   2012 年 2 月：所有值 = 2
*   2012 年 3 月：所有值 = 3

我使用 df.resample('M',how='mean') 获得的每月平均值是：

```
Out[454]: 

0
2012-01-31  1.000000
2012-02-29  1.965757
2012-03-31  2.967966
2012-04-30  3.000000 
```

但我想得到类似的东西：

```
0
2012-02-01  1.000000
2012-03-01  2.000000
2012-04-01  3.000000 
```

这是代码：

```
january = pd.date_range(pd.datetime(2012,1,1),pd.datetime(2012,1,31,23,50),freq='10min')
february = pd.date_range(pd.datetime(2012,2,1),pd.datetime(2012,2,29,23,50),freq='10min')
march = pd.date_range(pd.datetime(2012,3,1),pd.datetime(2012,3,31,23,50),freq='10min')
data_jan = np.zeros(size(january))+1
data_feb = np.zeros(size(february))+2
data_march = np.zeros(size(march))+3
df1 = pd.DataFrame(data_jan,index=january)
df2 = pd.DataFrame(data_feb,index=february)
df3 = pd.DataFrame(data_march,index=march)
df = pd.concat([df1,df2,df3])
df.resample('M',how='mean') 
```

如果现在，我删除最后一天：

```
january = pd.date_range(pd.datetime(2012,1,1),pd.datetime(2012,1,31,00,00),freq='10min')
february = pd.date_range(pd.datetime(2012,2,1),pd.datetime(2012,2,29,00,00),freq='10min')
march = pd.date_range(pd.datetime(2012,3,1),pd.datetime(2012,3,31,00,00),freq='10min') 
```

我得到（*几乎*）我想要的东西：

```
Out[474]: 
            0
2012-01-31  1
2012-02-29  2
2012-03-31  3 
```

你可以帮帮我吗 ？？？？是bug吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T17:05:15.500

这确实是一个错误，我有两个问题：

[https://github.com/pydata/pandas/issues/1458](https://github.com/pydata/pandas/issues/1458)

[https://github.com/pydata/pandas/issues/1471](https://github.com/pydata/pandas/issues/1471)

这应该在 pandas 0.8.0 发布之前修复。请注意，这可以正常工作：

```
In [15]: df.resample('M', kind='period')
Out[15]: 
          0
Jan-2012  1
Feb-2012  2
Mar-2012  3 
```

编辑：刚刚在 git master 中修复了这个问题（上述两个参考问题都已关闭）

# amazon-s3 - 使用托管服务器进行 S3 备份

> ID：11018122
> 
> 赞同：1
> 
> 时间：2012-06-13T15:19:56.590
> 
> 标签：amazon-s3, backup

我正在尝试构建一个备份脚本，将 tar 文件从我们的托管解决方案移动到我们的 S3 存储桶：mysitebackups。我遇到的问题是：我们无法在服务器上安装任何程序，我找到的所有解决方案都需要安装各种库和程序。到目前为止，理想的解决方案似乎是重复的，但这需要安装，以及要安装 boto。

是否有不需要本地化安装的解决方案，或者有没有办法让这些在本地安装而不使用 virtualenv（我无权访问）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:13:58.903

我们找到了答案。有一个似乎运行良好的 Perl 脚本。它使用 perl 的核心库，所以它应该适合你。

[http://timkay.com/aws/](http://timkay.com/aws/)谢谢蒂姆凯！

# c# - 在 C# Visual Studio 2010 中导入/导出访问数据库

> ID：11018125
> 
> 赞同：1
> 
> 时间：2012-06-13T15:20:24.157
> 
> 标签：c#, database, visual-studio-2010

我制作了一个程序来管理电影收藏，并将数据存储在访问数据库中。我意识到它可以手动完成，但我希望能够从程序中导出和导入数据库，这样用户就不必每次我推出新版本时都从头开始他们的数据库。

我该怎么做呢？

我对编程还是很陌生，所以如果我忘记提及任何事情，请询问！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:09:16.720

这是一个相当广泛的问题，所以我将广泛回答。您可以通过代码创建数据库，我将让您研究如何做。应该有很多关于如何做到这一点的文章。

您还可以通过您拥有的任何部署方式将数据库作为部署的一部分。您想要获取他们的数据库，在代码中加载结果并填写部署的数据库，然后删除他们的原始数据库。

您也可以只更改他们机器上的现有数据库以匹配您的新更改。如果它类似于附加列或另一个表，那将非常容易。

选择很多，你只需要选择一个。希望这些想法有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:17:48.393

您需要以您选择的格式（即 csv、xml、您自己的格式等）将每个表的记录导出到一个文件中，并带有导出版本号（因此您的程序的更高版本知道它们将读取什么格式） . 这是序列化你的数据，你可以找到很多关于如何保存数据的信息。

要导入，您需要读入每个导出的文件，并将其插入到新数据库中。这只是序列化数据的另一面，所以同样，有很多关于如何做到这一点的信息来源。

如果您要允许用户将数据重新导入现有数据库，您将需要决定如何处理重复条目，以及是否有用户可以使用的批处理过程，因此他们只需要选择如何处理重复条目一次（即，让用户选择一次以覆盖所有现有记录或让用户选择跳过所有现有记录）。

# c# - 同时读取和写入多个文件并对它们执行相同的任务

> ID：11018126
> 
> 赞同：2
> 
> 时间：2012-06-13T15:20:24.100
> 
> 标签：c#

我是编程初学者。我用 C# 编写了一个代码来打开一个文件（有 4 列数据）并将第四列提取到一个列表中。然后对数据做了一些基础工作，提取数据集的均值、最小值和最大值。然后，将结果写入平均值、最小值和最大值的专用文件。

现在我想重复相同的测试，但要针对多组文件——每个文件都有超过 100,000 行数据。我想让程序能够读取同一文件夹中的多组文件，然后对每个文件进行相同的计算，并将平均值、最小值和最大值的所有结果编译到单独的文件夹中，就像以前一样。

单个文件的代码如下；

```
 private void button1_Click_1(object sender, EventArgs e)
    {
        string text = "";
        DialogResult result = openFileDialog1.ShowDialog(); // Show the dialog.
        // create a list to insert the data into
        List<float> noise = new List<float>();
        int count = 0;
        float sum = 0;
        float mean = 0; 
        float max = 0;
        float min = 100;

        TextWriter tw = new StreamWriter("c:/Users/a3708906/Documents/Filereader - 13062012/Filereader/date.txt");
        if (result == DialogResult.OK) // Test result.
        {
            string file = openFileDialog1.FileName;
            FileInfo src = new FileInfo(file);
            TextReader reader = src.OpenText();
            text = reader.ReadLine();

            // while the text being read in from reader.Readline() is not null

            while (text != null)
            {
                text = reader.ReadLine();
                if (text != null)
                {
                    string[] words = text.Split(',');
                    noise.Add(Convert.ToSingle(words[3]));

                    // write text to a file
                    tw.WriteLine(text);
                    //foreach (string word in words)
                    //{
                    //    tw.WriteLine(word);
                    //}
                }

            }
        }

        tw.Close();

        TextWriter tw1 = new StreamWriter("c:/Users/a3708906/Documents/Filereader - 13062012/Filereader/noise.txt");
        foreach (float ns in noise)
        {
            tw1.WriteLine(Convert.ToString(ns));
            count++;
            sum += ns;
            mean = sum/count;

            float min1 = 0; 

            if (ns > max)
                max = ns;
            else if (ns < max)
                min1 = ns;

            if (min1 < min && min1 >0)
                min = min1;
            else
                min = min;

        }

        tw1.Close();

        TextWriter tw2 = new StreamWriter("c:/Users/a3708906/Documents/Filereader - 13062012/Filereader/summarymeans.txt");
        tw2.WriteLine("Mean Noise");
        tw2.WriteLine("==========");
        tw2.WriteLine("mote_noise 2: {0}", Convert.ToString(mean));
        tw2.Close();

        TextWriter tw3 = new StreamWriter("c:/Users/a3708906/Documents/Filereader - 13062012/Filereader/summarymaximums.txt");
        tw3.WriteLine("Maximum Noise");
        tw3.WriteLine("=============");    
        tw3.WriteLine("mote_noise 2: {0}", Convert.ToString(max));
        tw3.Close();

        TextWriter tw4 = new StreamWriter("c:/Users/a3708906/Documents/Filereader - 13062012/Filereader/summaryminimums.txt");
        tw4.WriteLine("Minimum Noise");
        tw4.WriteLine("=============");
        tw4.WriteLine("mote_noise 2: {0}", Convert.ToString(min));
        tw4.Close();
    } 
```

如果有人可以帮助翻译此代码以处理多个文件，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:31:01.763

将处理单个文件的逻辑包装到单个[Action](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)或返回 void 的函数中，然后枚举文件，将它们切换到 ParallelEnumerable 并调用[Parallel.ForAll](http://msdn.microsoft.com/EN-US/library/dd383744%28v=vs.100%29.aspx)

例如，如果您创建了一个名为 DoStuff(string filename) 的操作或函数，它将为单个文件执行该过程，那么您可以使用以下命令调用它：

```
Directory.EnumerateFiles(dialog.SelectedPath).AsParallel().ForAll(doStuff); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:36:15.423

如果您正确使用[Directory.GetFiles()](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx) ，您当前的代码将起作用。最简单的方法是使用三个输入；一个获取目录，第二个获取文件扩展名（如果需要），以及一个询问您是否要递归搜索文件夹的复选框。

然后代替

```
 string file = openFileDialog1.FileName; 
```

你会有类似的东西

```
 //ensure the default fileExtensionDropdown.SelectedValue is "*"
        string[] filePaths;
        if(chkRecursiveSearch.IsChecked == true)
           filePaths = Directory.GetFiles(dlgFolderBrowser.SelectedPath, @"*"+ddlFileExtension.SelectedValue, SearchOption.AllDirectories);
        else
           filePaths = Directory.GetFiles(dlgFolderBrowser.SelectedPath, @"*"+ddlFileExtension.SelectedValue); 
```

然后你可以使用：

```
 for(string path in filePaths){ // do things } 
```

以您现在的方式处理每个文件路径。

请注意，我放在这里的代码绝对不像它可能的那样惯用和整洁，但是既然你说你是初学者，我决定更清楚一点。如果要求，我会提出更惯用的方法，但如果我们这样做，我们可能也应该清理一下您的初始代码。

# asp.net-mvc-3 - 超链接的 MVC @Html.ActionLink ID

> ID：11018130
> 
> 赞同：0
> 
> 时间：2012-06-13T15:20:30.007
> 
> 标签：asp.net-mvc-3, actionlink

我需要能够`id`为超链接创建一个。我有以下内容：

```
@Html.ActionLink("Delete", "Delete", new { id = @item.ID}, new {id = "deletelink"}) 
```

我想知道，是否有更好的方法来做到这一点？请注意，`id`将是`deletelink`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:30:05.583

你到底在找什么？你不能用这个吗？这是创建操作链接的正确方法，但它看起来格式不正确。您没有使用正确的重载。您需要添加控制器名称。

```
@Html.ActionLink("Delete", "Delete", "ControllerName", new { id = @item.ID}, new {id = "deletelink"}) 
```

# c# - EF 4.3 抛出“从 dB 获取提供者信息时发生错误。由 EF 使用不正确的 con。字符串引起。检查内部 Excptin。”

> ID：11018133
> 
> 赞同：2
> 
> 时间：2012-06-13T15:20:31.893
> 
> 标签：c#, wcf, configuration, entity-framework-4.3

我首先使用 EF 4.3 代码。开发 EF Code first 应用程序并使 CRUD 操作在我的开发箱上做得非常好。在我将代码移动到 WCF 服务测试服务器后，真正的问题开始了。当我尝试插入一条记录时，我得到了

> “从数据库获取提供程序信息时出错。这可能是由于实体框架使用了不正确的连接字符串造成的。请检查内部异常以获取详细信息并确保连接字符串正确”

Web 服务器中的相同代码运行良好，并且由另一位开发人员完成（现在离开公司），在将其部署到 WCF 测试服务器之前，我应该在 IIS 或应用程序配置中进行任何其他配置设置吗？我的意思是我需要在 GAC 中安装一些东西或验证吗？

WCF 服务器：Windows Server 2008 R2

EF 版本：EF 4.3 代码优先。数据库在 WCF 测试服务器上部署之前存在

配置文件：

```
<connectionStrings>
<add name="MyApplicationDbContext" providerName="System.Data.SqlServerCe.4.0"    connectionString="Server=jmicsq10webdev\web_dev;Database=PlEcom;Integrated Security=SSPI;" />
</connectionStrings>

<configSections>   
<section name="entityFramework"   type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
</configSections> 
```

我也尝试了 ProverderName = "system.Data.SqlClient.dll"，但没有解决我的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:30:38.267

我得到了同样的错误，所以我去改变了

```
AttachDBFilename=|DataDirectory|\aspnet.mdf" 
providerName="System.Data.SqlServerCe.4.0"/> 
```

这条线到

```
AttachDBFilename=|DataDirectory|\aspnet-MvcHopitalPatient-20121116125855.mdf"
providerName="System.Data.SqlClient" /> 
```

到下面的代码片段

```
 <connectionStrings>
   <add name="PatientDBContext"
        connectionString="Data Source=|DataDirectory|Patients.sdf"
        providerName="System.Data.SqlServerCe.4.0"/>

    <add name="DefaultConnection" 
        connectionString="Data Source=(LocalDb)\v11.0;
        Initial Catalog=aspnet-MvcHopitalPatient-20121116125855;
        Integrated Security=SSPI;
        AttachDBFilename=|DataDirectory|\aspnet-MvcHopitalPatient-20121116125855.mdf"
        providerName="System.Data.SqlClient" />

 </connectionStrings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:23:11.890

尝试使用常规 SqlClient 而不是精简版？

```
<connectionStrings>
<add name="MyApplicationDbContext" providerName="System.Data.SqlClient"    connectionString="Server=jmicsq10webdev\web_dev;Database=PlEcom;Integrated Security=SSPI;" />
</connectionStrings> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T06:15:46.133

您需要从控制面板启动 SQL Server 服务。有时服务会停止。我有同样的问题。原因是 Sql 服务没有运行。启动服务解决了问题

# c# - Canvas 属性和保证金的区别

> ID：11018136
> 
> 赞同：5
> 
> 时间：2012-06-13T15:20:44.033
> 
> 标签：c#, .net, wpf

`SetValue`使用with（例如）`Canvas.LeftProperty`和`Margin`Property之间有什么区别？

为了更清楚：

```
<Canvas>
   <Rectangle x:Name="rect">                         
</Canvas> 
```

是

```
rect.SetValue(Canvas.LeftProperty, 10) 
```

相当于

```
rect.Margin = new Thickness(10, 0, 0, 0) 
```

或不？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T15:31:49.100

Margin 属性与每个元素一起使用，以确定对象周围的额外空间。它适用于几乎所有类型的布局（StackPanel、Grid、ContentControls 等）

Canvas.LeftProperty（以及 Top、Right 和 Bottom）仅适用于直接位于 Canvas 内的元素。Canvas 将使用这些值来确定对象应该在哪里。对于像 Path 这样的 Shape 元素，Canvas 在确定位置时也会查看 Shape 的位置数据。

从技术上讲，Canvas 附加属性应该与 Shape 的固有位置数据（如果有）以及 Margin 一起累积。您可以使用所有 3 来修改位置。但通常你会尽量保持简单。

例如，一个 Rectangle 应该使用它的 Width 和 Height 属性以及 Canvas.Left 和 Canvas.Top。路径要么仅依赖其点数据，要么使用 Canvas.Left 和 Canvas.Top 抵消它。你不应该对 Canvas 内的元素使用边距，因为你可以在不使用它的情况下进行更好的控制，但从技术上讲你可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:26:33.657

它看起来一样，但在第一种情况下，画布可以让你`rect`正确地移动`10`。在第二步`rect`正确的`10`点。

根据您的目的使用其中一种方式。

**编辑：**如果更深入地了解 WPF 代码。在第一种情况下，在 Canvas 的[ArrangeOverride](http://msdn.microsoft.com/en-us/library/system.windows.uielement.arrange.aspx)`rect`中移动，在第二种情况下，在Rectangle的[ArrangeOverride中移动。](http://msdn.microsoft.com/en-us/library/system.windows.uielement.arrange.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T15:33:20.567

对于直接在 a 中的元素`Canvas`，唯一的区别在于均值。最终的结果是完全一样的。

定位时`Rectangle`，布局引擎会将影响其位置的所有值相加。对于`X`坐标，这包括`Canvas.Left`和`Margin.Left`。

所以在一种情况下它正在添加`10 + 0`，而在另一种情况下它正在添加`0 + 10`。

所以选择你喜欢的那个。我个人更喜欢`Canvas.Left`这种情况，因为它似乎更符合上下文意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T15:32:19.693

```
Canvas.Left
Canvas.Right
Canvas.Top
Canvas.Bottom 
```

仅在画布容器内强制执行，它们不会改变它们所附加到的控件的宽度和高度。（left=10，right=10 不会拉伸到每边的边距为 10）

```
Margin.Left
Margin.Right
Margin.Top
Margin.Bottom 
```

由设置它的对象控制，例如，它将在网格上的画布之外工作，并将更改任何控件的宽度和高度以强制其值（如果宽度和高度为 NaN）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T15:32:51.243

您可以使用TemplateBinding 或常规 Binding 在对象的模板内使用[Margin](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.margin%28v=vs.100%29.aspx)属性，因为它是 DependencyProperty。这也调整了对象的宽度和高度。

Canvas 属性是附加到 FrameworkElement 的属性，允许定位可能没有 Margin 属性的元素。如果对象没有 Canvas 父级，它们将不起作用。

# objective-c - ARC、非 ARC 和继承

> ID：11018137
> 
> 赞同：5
> 
> 时间：2012-06-13T15:20:54.093
> 
> 标签：objective-c, ios, automatic-ref-counting

除了通过 3rd 方代码强制它进入项目时，我还没有使用 ARC 来处理它。我已经阅读了所有 ARC 文档，但还没有看到这个问题的答案：

如果我有一个在用 编译的模块中定义的类，`-fobjc-arc`我可以在不支持 ARC 的模块中从中派生一个新类吗？

在我看来，只要派生类不尝试触及根类中的任何 ivars，它就应该可以正常工作。在我看来，即使`[super dealloc]`在派生类中有一个可以调用的 dealloc 方法也可以。

而且，反过来呢？我可以从非 ARC 类派生启用 ARC 的类吗？也应该可以正常工作，对吧？

加分点：在混合 ARC 和非 ARC 代码时，我应该让自己意识到什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T15:36:43.490

没有我知道的问题。您必须意识到 ARC 类似于源代码预处理器，在编译期间为您添加内存管理调用。当您到达链接阶段时，您无法真正区分 ARC 代码和非 ARC 代码。（这可能是一种过度简化，但应该适用于您的目的。）如果您的派生类具有正确的内存管理并且超类具有正确的内存管理，则结果将正常工作。

关于我能想到的唯一区别是处理`weak`属性。但是我不太了解那些说是否有可能使用具有弱属性的 ARC 和 MRC 代码的某种组合来得出有缺陷的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:36:20.383

这是一条评论，但考虑到它，我想扩展它所说的内容。

您是否尝试过从普通子类继承 ARC 类？我的想法（也没有尝试过）是这行不通。首先，如果 ARC 类具有使用 ARC 关键字的公共属性或 ivars，就像`weak`我认为在从头文件编译时会出错。其次，我不知道它`dealloc`会如何工作。你需要打电话`[super dealloc]`还是不打电话？我不知道。

无论如何，如果您的超类是 ARC，为什么不在任何子类中使用 ARC？这样做根本没有任何优势。

> 我可以从非 ARC 类派生启用 ARC 的类吗？也应该可以正常工作，对吧？

我本来想说那也行不通，但我错了。几乎所有东西都必须继承`NSObject`手动引用计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T16:06:17.533

是的，您既可以从 ARC 父类实现非 ARC 祖先，也可以从非 ARC 父类实现 ARC 祖先。

实际上，ARC 是一种语法糖，或者您可以说，它只是在编译步骤分析您的源代码并在您的代码中插入适当的 [release] 和 [retain] 调用的预处理器。在运行时级别没有任何改变（除了`weak`属性）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-23T18:59:20.830

ARC 意味着编译器负责内存管理，非 ARC 意味着你负责它，但在这两种情况下内存管理的工作方式完全相同：

*   如果一个对象必须保持活动状态，它的保留计数器会增加（这就是这样`retain`做的）
*   如果不再需要一个对象，它的保留计数器会在对它的引用丢失之前减少（这就是这样`release`做的）
*   如果你完成了一个对象但它还不能死，例如你需要将它作为方法结果返回（并且你不想返回一个死对象），它必须被添加到一个自动释放池中，这将减少它在以后的时间保留计数（就是`autorelease`这样，就像说“`release`在未来某个时间调用该对象。”）
*   新创建的对象的保留计数为`1`.
*   如果保留计数达到零，则释放对象。

无论您是自己做所有这些，还是编译器为您做这一切，它都不起作用。编译后，这些方法会被调用，ARC 也是如此，但使用 ARC 时，编译器会为您决定何时调用哪个方法。还有一些额外的魔力，例如 ARC 在将对象作为方法结果返回时并不总是必须将对象添加到自动释放池中，这通常可以被优化掉，但你不必关心，因为这种魔力仅在调用者时应用并且被调用的方法都使用ARC；如果其中一个不是，则使用法线`autorelease`（它仍然像以前一样在 ARC 中工作）。

您唯一需要注意的是保留周期。无论您是否使用 ARC，引用计数都无法处理保留周期。这里没有区别。

陷阱？小心使用免费桥接。A`NSString *`和 a`CFStringRef`实际上是一回事，但 ARC 不知道 CF 世界，所以当 ARC 处理 时`NSString`，您必须处理`CFString`. 使用 ARC 时，需要告诉 ARC 如何桥接。

```
CFStringRef cfstr = ...;
NSString * nsstr = (__bridge_transfer NSString *)cfstr;
// NSString * nsstr = [(NSString *)cfstr autorelease]; 
```

上面的代码意味着“ARC，请取得该`CFString`对象的所有权，并在完成后立即释放它”。该代码的行为类似于下面评论中显示的代码；非常小心，`cfstr`应该至少保留一个计数，ARC 将至少释放一次，只是还没有。反过来：

```
NSString * nsstr = ...;
CFStringRef cfstr = (__bridge_retained CFStringRef)cftr;
// CFStringRef cfstr = (CFStringRef)[nsstr retain]; 
```

上面的代码意味着“ARC，请给我它的所有权，`NSString`一旦我完成它，我会负责发布它”。当然，你必须信守诺言！在某些时候你将不得不打电话，`CFRelease(cfstr)`否则你会泄漏内存。

最后，`(__bridge ...)`这只是一个类型转换，没有所有权转移。这种类型的转换是危险的，因为如果你试图保留转换结果，它会产生悬空指针。通常，当您将 ARC 对象提供给期望 CF 对象的函数时，通常会使用它，因为 ARC 肯定会在函数返回之前使对象保持活动状态，例如，这始终是安全的：

```
doSomethingWithString((__bridge CFStringRef)nsstr); 
```

即使 ARC 被允许`nsstr`在任何时候释放，因为该行下面的代码不再访问它，它肯定不会在此函数返回之前释放它，并且根据定义，函数参数仅保证在函数返回之前保持活动状态（以防万一该函数想要保持字符串处于活动状态，它必须保留它，然后 ARC 在释放它后不会释放它，因为保留计数不会变为零）。

大多数人似乎难以解决的问题是将 ARC 对象作为`void *`上下文传递，就像您有时必须使用旧 API 一样，但这实际上非常简单：

```
- (void)doIt {
   NSDictionary myCallbackContext = ...;
   [obj doSomethingWithCallbackSelector:@selector(iAmDone:) 
        context:(__bridge_retained void *)myCallbackContext
    ];
    // Bridge cast above makes sure that ARC won't kill
    // myCallbackContext prior to returning from this method.
    // Think of:
    // [obj doSomethingWithCallbackSelector:@selector(iAmDone:) 
    //    context:(void *)[myCallbackContext retain]
    // ];
}

// ...

- (void)iAmDone:(void *)context {
    NSDictionary * contextDict = (__bridge_transfer NSDictionary *)context;
    // Use contextDict as you you like, ARC will release it
    // prior to returning from this method. Think of:
    // NSDictionary * contextDict = [(NSDictionary *)context autorelease];
} 
```

而且我必须对你来说真正的大问题，乍一看并不那么明显。请考虑以下代码：

```
@implementation SomeObject {
    id _someIVAR;
}

- (void)someMethod {
    id someValue = ...;
    _someIVAR = someValue;
} 
```

此代码在 ARC 和非 ARC 中是不一样的。在 ARC 中，默认情况下所有变量都是强变量，因此在 ARC 中，这段代码的行为就像这段代码一样：

```
@interface SomeObject
    @property (retain,nonatomic) id someIVAR;
@end

@implementation SomeObject

- (void)someMethod {
    id someValue = ...;
    self.someIVAR = someValue;
} 
```

分配`someValue`将保留它，对象保持活动状态！在非 ARC 中，代码的行为如下：

```
@interface SomeObject
    @property (assign,nonatomic) id someIVAR;
@end

@implementation SomeObject

- (void)someMethod {
    id someValue = ...;
    self.someIVAR = someValue;
} 
```

请注意属性是不同的，因为非 ARC 中的 ivar 既不是`strong`or `weak`，它们什么也不是，它们只是指针（在被调用的 ARC 中，`__unsafe_unretained`这里的关键字是**unsafe**）。

因此，如果您的代码直接使用 ivars 并且不使用带有 setter/getter 的属性来访问它们，那么从非 ARC 切换到 ARC 可能会导致过去具有健全内存管理的代码中的保留周期。另一方面，从 ARC 迁移到非 ARC，这样的代码可能会导致悬空指针（指向以前的对象的指针，但由于对象已经死亡，这些指针指向无处并且使用它们会产生不可预知的结果），因为过去的对象以前还活着，现在可能意外死去。

# validation - MVC 4 中的自定义验证器

> ID：11018139
> 
> 赞同：0
> 
> 时间：2012-06-13T15:21:00.273
> 
> 标签：validation, asp.net-mvc-4

我最近将我的 MVC 3 项目升级到了 MVC 4。在所有的编辑之后，我遇到了验证器的问题，因为我的旧验证器继承并使用了 ModelClientValidationRule 类，这在 System.Web.WebPages v2 中显然不存在。但是由于项目中的其他一些东西，我不能引用 v1，坦率地说我什至不想。有没有人遇到过这个问题？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:50:35.200

该类`ModelClientValidationRule`确实存在于程序集中，并且它是从它先前所在`System.Web.WebPages, Version=2.0.0.0`的程序集转发的：`System.Web.Mvc, Version=3.0.0.0`

![在此处输入图像描述](../Images/6e88be3856c85f9cd210cc99fc6ac4d2.png)

我正在使用 ASP.NET MVC 4 RC。

# applescript - 当另一个应用程序使用 AppleScript 发出命令时，是否让一个应用程序执行操作？

> ID：11018142
> 
> 赞同：1
> 
> 时间：2012-06-13T15:21:22.420
> 
> 标签：applescript

我对 AppleScript 一无所知，但我想知道它是否可以让我的生活更轻松：有没有办法编写一个 AppleScript，告诉 Safari / Firefox / Chrome 当我将文档保存在另一个应用程序中时刷新当前选项卡，比如 TextWrangler？本质上，我想映射`Command+S`键盘快捷键以在两个单独的应用程序中同时做两件事。

如果这不可能，您能否编写一个应用程序的脚本，以便保存一个文件在同一应用程序的另一个窗口中执行命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:19:36.760

实现这一点有多种可能的方法，但最直接的可能是创建一个脚本来执行您需要的所有步骤（即保存文档并刷新窗口）并将其绑定到`Cmd+S`触发应用程序中的键盘组合。

要使这种方法起作用，您需要按顺序：

1.  **一种将组合键绑定到仅在特定应用程序中有效的脚本的方法**。[OS X 的 Automator 服务](http://www.macosxautomation.com/services/index.html)符合该要求：它们的范围可以限制为单个应用程序（在工作流操作顶部的“仅在”下拉列表中选择它），并且可以在键盘首选项窗格中为其分配快捷方式系统偏好设置。
2.  **一种将命令中继到它们所针对的应用程序的方法**。AppleScript 可以通过两种不同的方式为您提供帮助，具体取决于您的应用程序是否可编写脚本，即它们是否有脚本字典，您可以在 AppleScript 编辑器中检查：

    *   如果他们这样做，并且他们的术语包括一侧的编辑器的保存操作（大多数基于脚本的文档的应用程序都在表单中这样做`save <document>`），另一侧的浏览器的页面刷新（Chrome 有`reload <tab>`，Safari 也一样通过 JavaScript 绕道获得结果，即`do JavaScript "window.location.reload()" in <document>`——我不使用 Firefox），你已经设置好了。
    *   如果他们不这样做，*GUI 脚本*可能会有所帮助，即通过`tell application "System Events" to tell process <your process> to click item x of menu y`.

    然后可以将该脚本嵌入到 Automator 工作流程中（准确地说，是在“运行 AppleScript”操作中）。

如您所见，很大程度上取决于您使用的确切软件。如果您是 AppleScript 新手并且上述内容让您感到困惑，我建议您花一些时间在[Mac OS X 自动化的 AppleScript 页面上](http://www.macosxautomation.com/applescript/index.html)（您还可以在其中找到示例脚本，这些脚本会让您开始学习 GUI 脚本） .

最后一点：在撰写本文时，[沙盒应用程序不支持在“键盘首选项”窗格中分配给它们的键组合](https://discussions.apple.com/thread/3203931?start=0&tstart=0)（它们确实支持在那里设置的**全局**键组合——而不是那些专门针对它们的组合键）。例如，这意味着您当前无法覆盖 TextEdit 的`Cmd+S`快捷方式以保存在 Lion 中。只要您的编辑器没有被沙盒化（在活动监视器中很容易检查），您应该对此没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:46:57.110

一种解决方案是创建文件夹操作以在文件夹中保存新文件时刷新当前选项卡。

```
on adding folder items to theFolder after receiving theFiles

    tell application "Google Chrome"
        activate
        tell window 1 to tell active tab
            set URL to (get URL)
        end tell
    end tell

end adding folder items to 
```

# xml - OpenCv Haar 函数创建的 XML 里面有什么。

> ID：11018145
> 
> 赞同：0
> 
> 时间：2012-06-13T15:21:30.130
> 
> 标签：xml, opencv, image-processing

我正在使用 OpenCV haartraining 为对象创建分类器。[http://note.sonots.com/SciSoftware/haartraining.html](http://note.sonots.com/SciSoftware/haartraining.html)
分类器创建一个 XML 文件。我想知道 XML 文件中的所有这些值是什么意思。
我有一个启动的想法，并且是关于优化基于来自训练数据的多个 xml 检测对象的过程。谁能解释一下 XML 中的实际内容。假设我有来自 10 个不同日期的培训的 10 个 xml 文件，但主题相同（假设是同一辆车）文件之间有什么共同点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:44:54.577

你有几个选择：

*   打开一个OpenCV生成的XML，看看里面，看能不能看懂；
*   下载 OpenCV 源代码，看看代码中 XML 是如何创建的；
*   下载[OpenCV 参考手册 v2.1](http://www.comp.nus.edu.sg/~cs4243/doc/opencv.pdf)并查看第 470 页。

# .net - 如何动态自定义 .net .config 文件

> ID：11018146
> 
> 赞同：2
> 
> 时间：2012-06-13T15:21:37.180
> 
> 标签：.net, sql-server-2008, web-config, app-config, transformation

我是一个小型开发团队的一员，我们目前正在从共享相同开发数据库的模型转变为我们都有自己的个人开发数据库的模型。

因此，我们正试图弄清楚如何管理 Web 和应用程序 .config 文件以适应各个数据库。显然，我们希望避免每个人都需要手动更改连接字符串以指向他们自己的数据库然后记住在重新签入之前将其更改回来的情况！

我确信这是几乎所有开发团队都面临的一个非常普遍的问题。尽管如此，我找不到任何解决这个问题的方法。

我熟悉使用 xdt 语法的 web.config 转换，虽然这有助于修改文件，但它（据我所知）不提供注入外部参数值的方法。例如，我们需要转换来检测当前用户，并将 .config 中的数据库名称替换为包含其用户名的名称。

那么，如何在您的开发团队中解决这个问题呢？

谢谢。

编辑：

抱歉，我错过了一条相当重要的信息，导致这些答案无法被接受。作为一家公司，我们都在我们的开发环境中远程工作和远程桌面。我们实际上拥有一台（强大的）开发机器，所有开发人员 rdp 进入并同时使用。因此，使用别名或修改主机文件等将同样适用于所有用户，而不提供必要的个人定制。SQL 实例已经是一个本地实例，它只是机器上的一个本地实例，供所有开发人员使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:33:03.733

我可以建议两种方法来做到这一点。

1.  为您的数据库服务器名称使用相同的别名，以便连接字符串相同，您可以通过将以下行放入主机文件中来做到这一点：

    127.0.0.1 数据库服务器

2.  将您的连接字符串放入外部文件中，不要将其添加到源代码管理中。对于暂存和发布配置，您可以通过 Web 配置转换添加所需的连接字符串。

在第二种情况下，您的 web.config 将如下所示：

```
<connectionStrings configSource="connectionStrings.config"></connectionStrings> 
```

编辑：其中`connectionStrings.config`文件放置在同一文件夹中，但添加到源代码管理下的忽略列表中，这样每个开发人员都将拥有自己的该文件副本，并且他的更改不会影响其他开发人员。为了简化事情，您可以创建一个`connectionStrings.config.default`可用作模板的文件，这样当新开发人员加入项目时，他将`connectionStrings.config`基于此文件创建自己的副本，并使用默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:43:10.813

尽管我们使用 web.config 转换来定义使用的数据库（本地开发、测试、发布），但如果需要，每个开发人员都可以使用本地 SQL 服务器。我们通过设置 SQL 服务器别名来做到这一点，Web 配置连接字符串是相同的，并且开发人员在他们的机器上设置别名。

例如，我们都在 web.config 中设置了“tester1”，然后开发人员为其本地 SQL 服务器设置了别名，这是图像：

![在此处输入图像描述](../Images/dbb366120106f3e13fd61988b774b70c.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T15:29:43.020

这个问题的一个常见解决方案是在每个用户的开发机器上都有开发数据库，​​这样你就可以为每个人拥有相同的连接字符串，例如对于 SQL Server，它将类似于：

```
connectionString="data source=.\SQLExpress;..." 
```

执行此操作时，您希望每个开发人员都拥有最新的数据库，因此您应该真正查看 Visual Studio 2010 数据库项目，这非常容易（尽管仅限 SQL Server）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T15:30:33.063

我们使用的技术是标准化开发机器上的数据库名称、服务器名称（无命名实例）、用户名和密码。

因此，如果产品代号是 Aero，我们将使用

> 服务器=（本地）；数据库=aero；uid=aero；密码=密码

对于开发环境，安全性并不重要，但一致性很重要，而且这种技术可以避免检查和破坏其他人的 app/web.configs。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T15:27:24.763

一个选项可以是使用命名的连接字符串，并在 machine.config 而不是 web.config 中定义这些。

# asp.net-mvc - 在 Asp.net mvc3 中添加另一个路由不起作用

> ID：11018147
> 
> 赞同：0
> 
> 时间：2012-06-13T15:21:37.350
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我已经定义了这个路线图。

```
 routes.MapRoute("default", // route name
            "{controller}/{action}/{id}", // url with parameters
            new { controller = "home", action = "index", id = UrlParameter.Optional }, // parameter defaults
            new string[] { "mobilesurveys.mt.controllers" }
        ); 
```

这将完美地工作。现在我想添加另一个路线图

```
 routes.MapRoute("couponreedem", // route name
            "{controller}/{action}/{clientname}", // url with parameters
            new { controller = "Rc", action = "index", id = UrlParameter.Optional }, // parameter defaults
            new string[] { "mobilesurveys.mt.controllers" }
        ); 
```

我是这样定义的。这里 Rc 是我的控制器。我将网址作为 .com /Rc/Rc/sammy

控制器中的方法定义为

```
 public ActionResult Rc(string clientname)
    {

        viewModel =dataRc.ProductCategoryGet();
        return View(viewModel);
    } 
```

客户端名称将始终为空。如何在不干扰现有路线的情况下添加另一条路线。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:29:34.937

它实际上看起来相同。但是如果你想要一个新的，你可以尝试这样的事情，它应该高于默认的。

```
 routes.MapRoute("couponreedem", // route name
            "RC/{action}/{clientname}", // url with parameters
            new { controller = "Rc", action = "index", clientname = UrlParameter.Optional }, // parameter defaults
            new string[] { "mobilesurveys.mt.controllers" }
        ); 
```

这将使用 RC/... 修复路线。此外，您的操作应命名为 Index

```
 public ActionResult Index (string clientname)
    {

        viewModel =dataRc.ProductCategoryGet();
        return View(viewModel);
    } 
```

# c - 数组存储数据结构的 C 内存释放

> ID：11018148
> 
> 赞同：1
> 
> 时间：2012-06-13T15:21:38.383
> 
> 标签：c, memory, ansi, realloc

我正在编写一个基于 C 的库，在使用`free()`释放内存块时我有点困惑......基本上我有几个类似的结构是这样定义的：

```
typedef struct
{
    pthread_t thread_id;
    pthread_attr_t attr;
    void     *data;
    size_t stacksize = NULL;
} thread_info; 
```

我基本上用来`realloc()`为这个结构分配内存并有一个指向它的数组。

我的问题是，如果我使用：

```
free(my_array[thread_index]); 
```

`free()`调用是否会释放不仅由结构使用的内存，而且会释放其中所有数据类型使用的内存，即。*thread_id*、*attr*、*data*和*stacksize*也将被释放，或者我必须单独释放它们，然后从数组中释放结构。

对我来说，如果我`free()`在这样的结构上使用它是有道理的，其中包含的所有数据都将被释放，我不必显式地释放每个结构属性，但我只想确定是否是这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T15:24:42.907

您必须显式释放结构内的资源，然后才能释放结构本身。如果你只释放结构，里面的资源不会被释放，你会泄漏它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T15:24:53.860

对于动态分配的“结构”（即数组、结构等的层次结构），您需要从“自下而上”对每个指针调用 free。您可以将此操作视为执行树的深度优先遍历。

通常的限制适用于指向堆栈而不是堆内存的指针的变量。例如，用 , 等定义的变量与`type[n]`使用函数族`char[n] = 'abc'`从堆中分配。`*alloc`还要注意有多个指向同一地址的指针的情况，`free`在这些上调用两次是一个编程错误（尽管不一定是分段错误）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T15:45:07.380

您需要`free()`使用`malloc()`. 每次调用`malloc()`实际上都与调用`free()`.

基本上，您可以定义一个`constructor()`函数来分配结构和结构内的数据，以及`destructor()`释放它的函数。这可能类似于以下代码片段：

```
int32_t         constructor(thread_info **t)
{
  if (NULL == (*t = malloc(sizeof (thread_info)))) {
    return -1;
  }

  if (NULL == ((*t)->data = malloc(sizeof (__data__)))) {
    return -1;
  }

  return 0;
}

int32_t         destructor(thread_info *t)
{
  if (free(t->data)) {
    return -1;
  }

  if (free(t)) {
    return -1;
  }

  return 0;
} 
```

# sql-server - w3wp.exe 高网络数据库调用

> ID：11018153
> 
> 赞同：0
> 
> 时间：2012-06-13T15:21:50.550
> 
> 标签：sql-server, asp.net-mvc-3, sql-server-2008

我遇到了一个我以前从未见过的相当独特的问题。

客户有一个应用服务器和一个数据库服务器。应用程序服务器（win 2008）运行 ASP.NET MVC 3 应用程序。数据库服务器（也称为 Win 2008）运行 SQL Server 2008。

每当向数据库发出请求时，w3wp.exe 的 CPU 会上升到 50 - 80 %，网络流量会达到 2%（10 Gbps）。这需要一分钟左右的时间，然后显示请求的网页。

我检查了实际的 Linq 执行时间，只需要几毫秒即可获取数据。

我希望这里的一些专业人士可以对正在发生的事情有所了解。当然，它适用于我的机器。

**更新**

即使是从 SQL Server Management Studio（在应用程序服务器上）执行的检索 828 行的查询也需要整整 12 秒才能完成......所以我猜问题不是应用程序，而是数据库服务器或连接上的某个地方

**更新 2** 这是我发现的一些有趣的事情。

这是慢代码：

```
MyAppDataContext DataContext = MyAppDataContext.CreateNewContext();
IEnumerable<Requests> Entities = DataContext.Requests;

using (profiler.Step("get data")) {
    IEnumerable<Requests> dataset = from x in Entities
                                    where x.ControleStatus == 4
                                    orderby x.ID
                                    select x;
} 
```

但是当我将 IEnumerable 更改为 IQueryable 时，代码的执行速度提高了 10 倍：

```
MyAppDataContext DataContext = MyAppDataContext.CreateNewContext();
IQueryable<Requests> Entities = DataContext.Requests.AsQueryable();

using (profiler.Step("get data")) {
    IQueryable<Requests> dataset = from x in Entities
                                   where x.ControleStatus == 4
                                   orderby x.ID
                                   select x;
} 
```

所以我的问题是：是什么导致了 IEnumerable 和 IQueryable 之间的巨大差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:59:30.660

> Whenever a request to the database is made, CPU for w3wp.exe goes up to 50 - 80 % and network traffic reaches 2% (of 10 Gbps).

1.  Are you taking care of Memory leaks?
2.  Using statements are included in the Database Interaction classes?
3.  I use Red Gate ANTS Memory Profiler to check for the Memory Management Issues.
4.  You are looking for SQL Profiler that tells `Reads` and `Duration`.

# mysql - 无法弄清楚如何将此表转换为 JSON 对象

> ID：11018161
> 
> 赞同：0
> 
> 时间：2012-06-13T15:22:20.080
> 
> 标签：mysql, json

我有一个返回下表的 mySQL 查询：

```
group_id     groupName          word_id     word
---------    --------------     --------    ------
111          transportation     1           car
111          transportation     2           plane
111          transportation     3           train
222          fruit              4           apple
222          fruit              5           banana
222          fruit              6           pear 
```

我想通过一个函数（在 PHP 中）发送这些数据，该函数以这种 JSON 格式将它返回给我的 ajax 调用：

```
{
  "group": {
    "group_id": "222",
    "groupName": "fruit",
    "wordlist": [
      {
        "word": "apple",
        "word_id": "4"
      },
      {
        "word": "banana",
        "word_id": "5"
      },
      {
        "word": "pear",
        "word_id": "6"
      }
    ]
  }
} 
```

我不确定这个查询结果是否适合这种事情，但我似乎无法理解另一种方式。我知道至少不试一试并发布我的结果有点蹩脚，但我对数组还不是很好，所以这让我头晕目眩，我不知道从哪里开始。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:24:17.473

您需要编写一个自定义函数。但最终你会使用[`json_encode()`](http://php.net/json_encode).

关于自定义函数的几点说明：

*   创建`wordList`数组
*   您需要将生成的数据包装在`group`.

# android - 奇怪的 Lint 警告 - 在布局文件中发现意外的文本：“”

> ID：11018162
> 
> 赞同：14
> 
> 时间：2012-06-13T15:22:23.063
> 
> 标签：android, android-lint

我在 button_selector.xml 中定义了以下选择器

```
 <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
       <item android:state_pressed="true" 
           android:state_enabled="true"
           android:drawable="@drawable/button_settlement_background_pressed" />
       <item android:state_enabled="true"
           android:drawable="@drawable/button_settlement_background_normal" />
       <item android:state_enabled="false"
           android:drawable="@drawable/button_settlement_background_disabled" />
       </selector> 
```

当我运行 lint 时，我收到以下警告：在布局文件中找到意外的文本：“”。它说它发生在“drawable”的第 4 行。所有引用的可绘制对象都存在于 /res/drawable 中。

有谁知道这可能是什么原因造成的？我可以忽略警告，但如果可能的话，我宁愿修复它。

此外，当仅在 AndroidManifest.xml 中引用未使用的字符串和图标时，我会收到警告。有没有办法解决这些问题而不是忽略它们？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-10T17:15:07.363

使用`Project>Clean`.

在我的情况下解决了这个问题。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-13T15:31:35.170

也许在空白的某个地方有一个看不见的字符。我会尝试从头开始重新创建 xml（不使用复制和粘贴，如果发生这种情况，这只会复制问题）。我也会清理并重建项目。

至于未使用的资源警告，我认为没有办法控制它。图书馆项目的误报问题要严重得多。Android lint 是一个相当新的工具，并且（在我看来）仍然有很多粗糙的边缘。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-05T02:57:02.110

您还可以格式化 xml 文件`(CTRL + SHIFT + F)`。将显示多余的字符。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-19T18:20:11.967

通常，当您插入类似“android:id=”之类的内容而不使用换行符并使用 eclipse 的自动完成功能时，会发生这种情况，如下所示：

```
<LinearLayout
            android:id= >
                       ^ 
```

这里输入回车，代码看起来是这样的：

```
<LinearLayout
                android:id="@+id/ 
```

字符 '>' 已被删除，并且 '"' 变得不可见。

用于`ctrl+shift+f`格式化文件以查找隐藏字符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-15T08:42:21.917

我发现如果我关闭了我有隐藏字符的文件，然后重新打开同一个文件。该字符不再隐藏（通常在 /> 之后，例如 />" ）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-03T20:01:39.557

分析 -> 检查代码

它对我有用！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-09-06T05:56:45.467

在 XML 文件中，标签包含属性。考虑这一行：（最后一个“>”不应该在那里）......

`<selector xmlns:android="http://schemas.android.com/apk/res/android">`

确保第一行的标签不包含“>”。

将上面的代码替换为： `<selector xmlns:android="http://schemas.android.com/apk/res/android" ... </selector>`

现在其他元素在选择器标签下。我希望这有帮助。

# ms-access - 链接组合框

> ID：11018165
> 
> 赞同：1
> 
> 时间：2012-06-13T15:22:35.593
> 
> 标签：ms-access, vba, ms-access-2003

我有一对名为“Cover”的组合框。第一个组合框包含年份作为其数据，例如 2011、2012 年等。第二个组合框包含酒店的所有名称。我有另一个名为 Form_1 的表单，它具有相同的组合框对。

考虑下面的 scanrio：用户从第一个表单“COVER”中的组合框中选择两个值，然后单击 FORM_1 继续进行。当用户打开 Form_1 时，组合框应该已经具有从“COVER”中选择的值。

这是我在 VBA 中尝试过的，但返回错误“无法赋值”：

```
Private Sub Form_Open(Cancel As Integer)
Combo5.Value = Form_0_Cover.Combo0.Value
Combo7.Value = Form_0_Cover.Combo2.Value
End Sub 
```

当用户单击 Form_1 打开时，我希望 Form_1 自动存储用户从 COVER 中选择的值。所以用户不需要再次选择这些值。

感谢帮助。对不起，如果我让你感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:25:40.413

您不能使用 Open 事件为控件分配值，因为它们尚未创建。使用加载事件。然后：

```
Combo5 = Forms!Form_0_Cover.Combo0 
```

# android - 如何预览 xml drawable？

> ID：11018166
> 
> 赞同：42
> 
> 时间：2012-06-13T15:22:36.027
> 
> 标签：android, xml-drawable

我正在研究非常复杂的 xml drawable，我想知道是否有任何工具/插件可以让我预览我的 drawable？

我正在寻找类似于可用于布局的“图形布局”选项卡的内容。

例如，如果我有这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:left="0dp" android:right="0dp"> 
        <shape android:shape="rectangle">

            <gradient android:angle="-90" android:startColor="#2B2B2B"
                android:endColor="#000000" />

        </shape>
    </item>
    <item android:top="1sp" android:bottom="26sp" > 
        <shape android:shape="rectangle">
            <solid android:color="#10ffffff"/>
    </shape>

    </item>
</layer-list> 
```

如何预览形状和渐变？而且我可能在做梦，但是有没有任何图形工具可以构建可绘制对象？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2015-05-17T10:01:46.017

在 Android Studio 中执行此操作：查看 -> 工具窗口 -> 预览

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-05T22:55:21.650

Android Studio 从 0.3.2 版开始支持此功能：[http ://tools.android.com/recent/androidstudio032released](http://tools.android.com/recent/androidstudio032released)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-23T18:43:27.520

单击窗口右侧的预览。

[![在此处输入图像描述](../Images/5f26dc0bcf83a0301ae4fe9d56a74475.png)](https://i.stack.imgur.com/B1AlI.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-24T15:42:38.693

在 Eclipse 中使用根 LinearLayout 创建新布局。打开大纲视图。在属性表中找到 View.Background。按下按钮...现在您可以选择颜色和可绘制资源，并且有小预览。

![在 Eclipse 中预览](../Images/a36129d3a4d2bb7a6848df78d577360d.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-02-22T13:30:30.683

Android Studio 提供了一个不错的插件，名为

```
"Vector Drawable Thumbnails" 
```

这为您的项目中的所有矢量可绘制对象添加了一个很好的概述。只需看一下侧栏并打开视图。您将获得它们的缩略图表。

[![矢量可绘制缩略图](../Images/be98edbca56f143d5745c2d9d37bfbad.png)](https://i.stack.imgur.com/a9bfH.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-13T00:43:35.040

另一种可能：

只需创建一个新布局“测试”，转到图形布局，在内部（或任何视图）创建一个按钮，并将可绘制对象分配给按钮的背景。可绘制对象被渲染（其正常状态）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-03-15T13:38:57.563

安卓工作室 2X

1.  查看 -> 工具窗口 -> 预览
2.  或者点击右侧的**预览**

[![在此处输入图像描述](../Images/3e7b90406cfead84e02af3dda8c95209.png)](https://i.stack.imgur.com/tc6HY.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-17T10:51:57.403

预览资源的一种方法是使用 Android Studio 中的资源管理器。它作为一个单独的选项卡可见：

![打印屏幕](../Images/4bfdb75d5e13fbdf8fdf7ed5c767539c.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-02T11:44:47.363

如果您想预览选择器，您可以在预览面板上找到带有状态的选项卡 [![在此处输入图像描述](../Images/d2e8b5ed37fcde8cb2c63233b803c818.png)](https://i.stack.imgur.com/ERWza.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-06T16:27:35.993

之前的答案中提到的预览选项在 Android Studio 4.0 中不存在。而是在编辑器选项卡的右上角查找此分段控件。

[![Android Studio 4.0.1 显示代码/拆分/设计控制](../Images/f2bd4faceb14994deaf4d7a86c1380fe.png)](https://i.stack.imgur.com/1Y7iR.png)

# android - 是否可以在没有用户交互的情况下从手机图库中获取图片？

> ID：11018168
> 
> 赞同：-1
> 
> 时间：2012-06-13T15:22:39.003
> 
> 标签：android, imageview, gallery, image

我只想启动我的活动，检索手机图库中已经存在的一些图片（无需用户交互）并在我的活动中显示其中一张。那可能吗？

最好的问候， 马蒂亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:30:42.823

使用此代码获取画廊图像

```
Intent photoPickerIntent = new Intent(Intent.ACTION_GET_CONTENT);
photoPickerIntent.setType("image/*");
startActivityForResult(photoPickerIntent, 1);

protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK)
    {
        Uri chosenImageUri = data.getData();

        Bitmap mBitmap = null;
        mBitmap = Media.getBitmap(this.getContentResolver(), chosenImageUri);
        }
} 
```

# linux - 是否可以在子外壳中修改父级的变量？

> ID：11018172
> 
> 赞同：1
> 
> 时间：2012-06-13T15:23:00.440
> 
> 标签：linux, bash, shell

这是一个例子：

```
bash-4.2$ export i=0
bash-4.2$ while :; do let i=i+1; done &
[1] 29668
bash-4.2$ echo $i
0
bash-4.2$ kill %1
bash-4.2$ exit 
```

在这里，我开始的工作不断增加`$i`，但只是作为一个局部变量。我知道在 bash 中没有指针或引用之类的东西，所以我的问题是如何做到这一点？

如果有可能，那么这意味着可以同时在多个线程中访问和写入一个变量，这就是我想要实现的。有没有办法防止关键部分（在 shell/bash 中）出现内存读/写问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:51:05.947

Bash 4 支持[协同进程](http://tiswww.case.edu/php/chet/bash/bashref.html#SEC23)，这只是一种使用双向管道的幕后方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:28:20.960

Bash 没有线程，进程也不共享内存。子shell 仍然是不同的进程——它们从父进程继承状态，但没有与它们共享的数据。

父进程可以从子外壳或其他进程读取输出，然后更改自己的状态，但子进程无法直接这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T15:31:43.327

首先，这些不是线程，它们是进程。没有直接的方法可以让孩子更改父进程的变量（我知道的唯一方法是将 C 程序附加为调试器）。

最好使用管道（可能是命名管道）将数据传回给调用者。

# mpi - MPI_SENDRECV 是如何工作的？

> ID：11018175
> 
> 赞同：8
> 
> 时间：2012-06-13T15:23:15.963
> 
> 标签：mpi

我有一个关于 MPI_SENDRECV 的问题。这是一个例子：

```
 PROGRAM sendrecv
  IMPLICIT NONE
  INCLUDE "mpif.h"
  INTEGER a,b,myrank,nprocs,ierr
  integer istat(MPI_STATUS_SIZE)
  CALL MPI_INIT(ierr)
  CALL MPI_COMM_SIZE(MPI_COMM_WORLD, nprocs, ierr)
  CALL MPI_COMM_RANK(MPI_COMM_WORLD, myrank, ierr)
  if (myrank.eq.0) then
     a=1;b=3
  else
     a=2;b=4
  endif

  if (myrank == 0) then
     call MPI_SENDRECV(b,1,MPI_REAL,1,0,
 .                     a,1,MPI_REAL,1,0,
 .                     MPI_COMM_WORLD,istat,ierr)
  elseif (myrank == 1) then
     call MPI_SENDRECV(b,1,MPI_REAL,0,0,
 .                     a,1,MPI_REAL,0,0,
 .                     MPI_COMM_WORLD,istat,ierr)
  end if
  if (myrank.eq.0) then
     write(*,*) b,a
  else
     write(*,*) a,b
  endif
  CALL MPI_FINALIZE(ierr)
  END 
```

在此之后我们得到 3 4 和 3 4。我的问题是我们替换 MPI_SENDRECV（如果我们假设 MPI_SENDRECV 先发送然后接收）

```
if (myrank == 0) then
   call MPI_SEND(b,1,MPI_REAL,1,0,MPI_COMM_WORLD,ierr)
   call MPI_RECV(a,1,MPI_REAL,0,0,MPI_COMM_WORLD,istat,ierr)                  
elseif (myrank == 1) then
   call MPI_SEND(b,1,MPI_REAL,0,0,MPI_COMM_WORLD,ierr)
   call MPI_RECV(a,1,MPI_REAL,1,0,MPI_COMM_WORLD,istat,ierr)                      
end if 
```

那么这将是死锁所以这意味着 MPI_SENDRECV 它不是先发送然后接收，而是同时发送和接收，对吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-13T17:28:22.410

你是对`MPI_Sendrecv`的，发送后接收不一样。把它想象成一个`MPI_Isend`,`MPI_Irecv`和一对`MPI_Wait`s。所以实际上，发送和接收是并行进行的。

顺便说一句，这就是它通常在 MPI 库中实现的方式。

如果您想在第二个示例中修复死锁，则进程必须以不同的顺序发出发送和接收。因此，等级 0 将发出一个发送，然后是接收，而等级 1 - 一个接收，然后是一个发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-15T15:47:52.700

> 即使消息被路由到接收进程 B ，进程 B 仍然必须确认它想要接收 A 的数据。完成此操作后，数据已被传输。进程 A 确认数据已被传输并且可以重新开始工作。

所以你的第二个代码不能满足条件，看起来你没有接听别人的电话。它应该如下所示：

```
if (myrank == 0) then
   call MPI_SEND(b,1,MPI_REAL,1,0,MPI_COMM_WORLD,ierr)
   call MPI_RECV(a,1,MPI_REAL,1,0,MPI_COMM_WORLD,istat,ierr)
elseif (myrank == 1) then
   call MPI_SEND(b,1,MPI_REAL,0,0,MPI_COMM_WORLD,ierr)
   call MPI_RECV(a,1,MPI_REAL,0,0,MPI_COMM_WORLD,istat,ierr)
end if 
```

# knockout.js - 为什么在使用 knockoutjs 时没有设置我的选择列表选择选项？

> ID：11018176
> 
> 赞同：0
> 
> 时间：2012-06-13T15:23:24.823
> 
> 标签：knockout.js

我能够成功地为我的选择列表设置选项，但未设置所选选项。

谁能看到我做错了什么？

[http://jsfiddle.net/devlife/YmshY/2/](http://jsfiddle.net/devlife/YmshY/2/)

html:

```
<select data-bind="options: FundTypeOptions, optionsText: 'Text', optionsValue: 'Value', value: 
```

Javascript：

```
$root.SelectedFundType"></select>​

$(function(){

    var options = {
        "ImportType":0,

        "ImportTypeList":{
            "":"",
            "Funds":"Fund Level Investments",
            "Valuations":"Valuations"
        },

        "FundTypeOptions":[
            {"Value":"","Text":""},
            {"Value":"Initial","Text":"Initial"},
            {"Value":"FollowOn","Text":"Follow-on"}
        ],

        "SelectedImportType":"Funds",

        SelectedFundType: "FollowOn"
    };

    var viewModel = {

        FundTypeOptions: ko.observableArray(options.FundTypeOptions)

    };

    ko.applyBindings(viewModel);
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:31:38.617

您的 SelectedFundType 不是您的 viewModel 的属性。

```
var viewModel = {

    FundTypeOptions: ko.observableArray(options.FundTypeOptions),
    SelectedFundType: ko.observable("FollowOn")
}; 
```

[http://jsfiddle.net/h8mfK/1/](http://jsfiddle.net/h8mfK/1/)

希望这可以帮助。

# java - 从 Java 类中引用 Android 视图

> ID：11018179
> 
> 赞同：0
> 
> 时间：2012-06-13T15:23:34.887
> 
> 标签：java, android, xml, textview, findviewbyid

我有一个扩展 Activity 并解析 xml 文件的类。我想要的 xml 文件中的文本作为参数传递给 java 类。我遇到的问题是，在java类中我想从资源布局文件夹中引用android TextViews，这样我就可以将文本设置为我传入的字符串参数。我想我可以从Activity扩展java类或作为一个传入争论当前的活动......他们是唯一引用资源/布局中的文件吗？

```
public class xmlClass extends Activity{
    //parse the xml    
    MyDataFile mdf = new MyDataFile(arg1, arg2, arg3, arg4);     
}

public class MyDataFile{
    public MyDataFile(arg1, arg2, arg3, arg4)
    {

    }    
    ******* Here I want to set the Text in a TextView to arg1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:39:54.800

我看到两个选项：

首先是使 MyDataFile 成为您的 Activity 中的嵌套类，如下所示：

```
public class xmlClass extends Activity{

    //keep TextViews as member
    protected TextView mTextView

    public void onCreate(){
        ...
        setContentView(...)
        mTextView = (TextView)findViewById(R.id.your_text_id);

        //parse your XML
        MyDataFile mdf = new MyDataFile(arg1, arg2, arg3, arg4);
    }

    //make MyDataFile a nested class
    public class MyDataFile{

        public MyDataFile(String arg1,String arg2, ...){
            mTextView.setText(arg1);
        }
    } 
```

第二种解决方案是将 TextViews 作为此构造函数中的参数

```
 public MyDataFile(String arg1, TextView textForArg1, ...){
        textForArg1.setText(arg1);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:35:40.083

调用该方法后，您可以使用该`findViewById(R.id.myResId)`方法找到您的视图`setContentView(R.layout.myLayout);`。

如果要将文本设置为 a`TextView`可以`((TextView) findViewById(R.id.myResId)).setText(R.string.myText);`直接使用。

如果你想从一个不是它自己的类中访问你的视图，`Context`你可以在方法参数中传递一个上下文，然后调用`context.findViewById(...)`.

但这迟早容易导致上下文泄漏。解决您的问题的更好方法是为您的文本设置一个 getter，并从托管视图的`Activity`or中设置它。`Fragment`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T15:37:30.510

```
TextView yourTextView = (TextView)findViewById(R.id.yourTextViewId);
yourTextView.setText(yourText); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T15:38:21.773

在您的布局 xml 中，找到 textview 并设置：

```
android:id = "lorem" 
```

然后在你的活动课上：

```
TextView txt = (TextView) findViewById(R.id.lorem); 
```

并以某种方式将 txt 传递给您的数据类。（作为参数传递是有效的）。

然后：

```
txt.setText(arg1); 
```

# java - Tomcat 中的 HttpServletRequest.getRemoteAddr() 返回 IPv6 格式的 IP 地址

> ID：11018182
> 
> 赞同：3
> 
> 时间：2012-06-13T15:23:47.527
> 
> 标签：java, tomcat, ipv6, windows-7-x64, ipv4

Tomcat 中的 HttpServletRequest.getRemoteAddr() 返回 IPv6 格式的 IP 地址，但我想将其配置为返回 IPv4。

我通过'localhost'访问servlet。如果我通过“127.0.0.1”访问它，则返回 IPv4 格式的 IP 地址（请参阅[此答案](https://stackoverflow.com/questions/4020303/tomcat-log-format-disable-the-ipv6-format/4021201#4021201)）。

环境：

*   视窗 7 x64
*   Tomcat 6.0.35-windows-x64

我的 LAN 连接属性： **IPv6 is checked off**，但如果我选中它，它也不起作用。

![我的 LAN 连接属性](../Images/661ad185399d9dbf6b06f800d50559b0.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-13T15:34:48.430

尝试将此参数添加`-Djava.net.preferIPv4Stack=true`到您的 tomcat 启动命令行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:55:45.880

当您使用 localhost/xxx 时，您的浏览器首先必须找到名称“localhost”的映射地址。在系统主机文件中，您将找到：

> # 127.0.0.1 本地主机
> 
> # ::1 本地主机

默认情况下禁用这两个定义。

要更改浏览器的默认匹配规则，您必须启用定义。

例如：从第一个主机文件行中删除“#”，您的浏览器将直接知道“localhost”等于 127.0.0.1

干杯

# python - python：使用回车和逗号打印不起作用

> ID：11018188
> 
> 赞同：27
> 
> 时间：2012-06-13T15:24:03.780
> 
> 标签：python, newline, carriage-return

我需要在循环中打印一行（Python 3.x）。环顾四周，我将这一行放在我的代码中：

```
print('{0} imported\r'.format(tot),) 
```

但是，它在循环时仍会打印多行。我也试过

```
sys.stdout.write('{0} imported\r'.format(tot)) 
```

但这不会在控制台上打印**任何内容...**

有谁知道这是怎么回事？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-01-07T20:07:42.580

如果你想覆盖你的最后一行，你需要添加 \r （字符返回）和 end="" 这样你就不会转到下一行。

```
values = range(0, 100)
for i in values:
    print ("\rComplete: ", i, "%", end="")
print ("\rComplete: 100%") 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-06-13T15:27:15.413

在第一种情况下，某些系统会将`\r`其视为换行符。在第二种情况下，您没有`flush`排队。试试这个：

```
sys.stdout.write('{0} imported\r'.format(tot))
sys.stdout.flush() 
```

正如 Levon 提醒我的那样，并非所有系统都需要冲洗线路——但使用`\r`这种方式通常是个好主意。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-08-16T10:10:32.340

我更喜欢使用 Jan 的解决方案，但是这样：

```
values = range(0, 101)
for i in values:
  print ("Complete: ", i, "%", end="\r")
print () 
```

# windows-phone-7 - 导航而不丢失数据

> ID：11018196
> 
> 赞同：-3
> 
> 时间：2012-06-13T15:24:16.913
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone

A-->B

B+--->A+

无论如何导航到第二个 .XAML 文件并返回而不丢失第一个文件的数据，但携带来自第二个文件的数据，请参阅顶部的小表示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T23:53:45.673

保存状态，使用存储在 IsolatedStorage 中的[ApplicationSettings](http://dotnet.dzone.com/articles/using-application-settings)，如果您希望数据在被墓碑化后仍然存在，您将使用它。或者状态可以保持在[瞬态](http://windowsphonegeek.com/articles/WP7-Application-Lifecycle-and-Tombstoning)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:33:55.137

通过使用 Server.Urlcode(parameter) 参数值是您写入特殊符号（如 +、->、&）的值

例如：`Response.redirect("~/default2.aspx?data" +server.Urlcode(txtdata.text))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T21:01:26.567

我会这样做的方式是在 App.xaml.cs 中声明一些公共变量

```
public partial class App : Application
{
    public var item;

    ...    
} 
```

并在您的任何页面中将它们称为 ((App)(App.Current)).item，这样您就可以访问不同页面中的变量。

（一些开发人员可能会在看到全局变量时畏缩，但是嘿，它有效）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T22:24:16.043

我最后所做的只是将列表框保存在全局字符串变量中并用逗号分隔值，然后读取全局变量并将数据放回列表框。

将数据保存到字符串

```
//creating a string array
        string[] scores = new string[lsScore.Items.Count];
        //filling the string array with the data from the listbox
        lsScore.Items.CopyTo(scores, 0);
        //filling a string with the joined values seperated by comma
        string saveScores = string.Join(",", scores);
        //saving the data to the global variable
        saved.saveScores = saveScores; 
```

从字符串中读取数据

```
// creating a an array and split the values from the global variable based on the comma
                string[] scores2 = saved.saveScores.Split(',');
                //adding the data to the lsitbox 
                foreach (string str in scores2)
                    lsScore.Items.Add(str); 
```

# mysql - mysql中的复选框值

> ID：11018200
> 
> 赞同：0
> 
> 时间：2012-06-13T15:24:28.027
> 
> 标签：mysql, null, boolean

我们就如何在 MySQL 数据库中保存新引入的复选框值进行了一些讨论。复选框可以是“开”或“关”，但有时根本不显示。我的想法是简单地将状态保存到 BOOL NOT NULL 字段。然后我们有0或1。我的同事然后说要包括NULL，所以我们可以看到没有做出选择。

但是，我确实认为 BOOL 字段永远不应包含 NULL。你想要它，但它是真还是假，不是未知的。如果您真的想保存“未知”的额外状态，我会将字段设为 TINYINT，没有选中 = 0、选中 = 1 和未知 = 2。这也可以是一个 ENUM 字段。

您如何看待可能为 NULL 的 BOOL 字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:29:48.743

它不是一个 NULL 可能的 BOOL，它只是一个*状态*枚举，其中

```
0: not selected 
1: selected 
2: unknown/hidden 
```

枚举是实现您想要做的事情的好方法，因为如果您的应用程序行为包括复选框值的“隐藏/未知”状态，那么您的 mysql 需要反映这一点，否则您将开始在未来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:32:28.873

就个人而言，我认为将 NULL 用于 BOOL 字段没有任何问题。就我而言，它是一种与其他类型一样的类型，可以合理地分配一个未知状态。但是，如果 BOOL 不能为 NULL，因为它定义为“开”或“关”，那么我认为这个逻辑可以扩展到例如 Ints。然后， Int 不能为 NULL，因为它必须是数字。

根据这里的其他答案，我显然是少数。我可能应该重新考虑我的立场。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T15:29:33.563

`boolean`字段不能有超过 2 个值，布尔值本身表示“要么”条件，就像 On 或 Off、True 或 False。

# c# - .NET 4.5 中的 ClientWebSocket

> ID：11018201
> 
> 赞同：3
> 
> 时间：2012-06-13T15:24:27.937
> 
> 标签：c#, websocket, .net-4.5

从 .NET 4.0 -> 4.5 发生了很多变化，显然从 beta 库到 RC 库也发生了很多变化。

Build 中可用和发布的许多示例不再有效（它们利用 Metro 库，即 Microsoft.xy，而不是 System.Net.WebSockets）（请参阅[https://github.com/paulbatum/WebSocket-Samples](https://github.com/paulbatum/WebSocket-Samples)） .

我的问题是——有没有人使用过低级 ClientWebSocket [http://msdn.microsoft.com/en-us/library/hh881548(v=vs.110)](http://msdn.microsoft.com/en-us/library/hh881548(v=vs.110))如果是这样，是否有任何可用的示例特别有用？我有很多关于如何使用它们的问题（即执行时的异常/问题，例如当 .NET/bsdsockets 中的 Send/Recv 在另一端出现问题时返回 0）。

先感谢您！

# c# - 通过 c# 代码中的方法在 ASP.net 中设置的工具提示

> ID：11018204
> 
> 赞同：0
> 
> 时间：2012-06-13T15:24:41.703
> 
> 标签：c#, asp.net, telerik

试图在工具提示上获得与“文本”中相同的字符串，例如
Text="<%# methodname(parameter) %>"
ToolTip="<%# methodname(parameter) %>" - 但是这会出错

*   文本不是静态的 - 取决于方法中返回的字符串

    ```
    <HeaderTemplate>
    <asp:Label ID="Header" runat="server" Text="<%# methodname(parameter) %>"
    meta:resourcekey="HeaderResource1"></asp:Label>
    </HeaderTemplate> 
    ```

任何帮助将非常感激

```
protected string methodname(int integer)
{
    switch (integer)
    {
        case 1:
            return RadtxtLot1.Text.Trim();
        case 2:
            return RadtxtLot2.Text.Trim();
        case 3:
            return RadtxtLot3.Text.Trim();
        default:
            return "";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:55:08.023

您可以在后面的代码中执行某些操作，例如在 preRender 阶段将 Tooptip 设置为等于标签的文本。

或者另一种不太整洁的方法是将您的标签设为 ReadOnly TextBox 并在其上附加一个方法“OnTextChanged”，然后在其中设置工具提示......如果您不介意该字段看起来像一个文本框。

# c# - C# 启动 TrackBar 以建立索引

> ID：11018206
> 
> 赞同：-1
> 
> 时间：2012-06-13T15:24:44.360
> 
> 标签：c#, .net, trackbar

如何将跟踪栏的锚点设置为从特定索引开始？我的轨迹栏从 0 到 10，它在 Form1 中。在 Form1 的构造函数中，我想将锚设置到正确的位置，这由对象的属性决定：

```
public EditRectangle(FormRectangle p)
{
    InitializeComponent();
    this.p = p;
    textBox1.Text = p.GetMass().ToString();
    textBox2.Text = p.GetHeight().ToString();
    textBox3.Text = p.GetWidth().ToString();
    // SET TRACKBAR'S INDEX TO THE RIGHT PLACE BY p.GetElasticity()
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:43:08.820

trackbar.Value 获取或设置一个数值，表示滚动框在轨道栏上的当前位置。在您的情况下，介于 0 - 10 之间。也就是说，如果您正确使用了 trackbar.SetRange 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:30:34.373

[http://msdn.microsoft.com/en-us/library/system.windows.forms.trackbar.value.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.trackbar.value.aspx)

将 trackbar.Value 设置为您想要的索引。

```
public EditRectangle(FormRectangle p)
{
    InitializeComponent();
    this.p = p;
    textBox1.Text = p.GetMass().ToString();
    textBox2.Text = p.GetHeight().ToString();
    textBox3.Text = p.GetWidth().ToString();
    // SET TRACKBAR'S INDEX TO THE RIGHT PLACE BY p.GetElasticity()
    trackbar.Value = p.GetElasticity();
} 
```

# xmpp - 如何使用 TurnSocket (XEP-0065: SOCKS5 Bytestreams) 连接？XEP-0096：SI 文件传输？[套接字写入数据]？

> ID：11018208
> 
> 赞同：7
> 
> 时间：2012-06-13T15:24:44.690
> 
> 标签：xmpp, file-transfer, asyncsocket, socks, xmppframework

我正在尝试使用 XMPPFramework 和 OpenFire 在 iOS 上通过 XMPP 传输文件。我的代码基础来自以下[教程](http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup)。我有一个成功的 TurnSocket (XEP-0065: SOCKS5 Bytestreams) 连接，但我不知道如何使用它来发送数据。我有两个考虑因素，我都坚持：1.调用[socket writeData]和2.使用'XEP-0096：SI文件传输'。

**可能的解决方案 1 - 调用 [socket writeData]** 在我的 App 委托中，我有一个 didSucceed 方法。我可以像这样调用 [socket writeData] ...

```
- (void)turnSocket:(TURNSocket *)sender didSucceed:(GCDAsyncSocket *)socket {

    NSLog(@"TURN Connection succeeded!");

    [socket writeData:myData withTimeout:60.0f tag:0]; 
    [turnSockets removeObject:sender];
} 
```

*6 月 14 日更新*：这是正确的吗？如果是这样，其他用户如何读取数据？我试过实施

```
- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag 
```

但它永远不会被调用。我如何确保它被调用？

**可能的解决方案 2 - XEP-0096：SI 文件传输** 我需要使用 XEP-0096：SI 文件传输吗？如果是这样，我如何在需要形成的 XEP-0096 XML 中使用我的成功连接？[XEP-0096 文档](http://xmpp.org/extensions/xep-0096.html)暗示有一个“哈希”属性，但我不知道这是从哪里来的。

例如

```
<iq type='set' id='offer1' to='receiver@jabber.org/resource'>
  <si xmlns='http://jabber.org/protocol/si' 
      id='a0'
      mime-type='text/plain'
      profile='http://jabber.org/protocol/si/profile/file-transfer'>
    <file xmlns='http://jabber.org/protocol/si/profile/file-transfer'
          name='test.txt'
          size='1022'
          hash='552da749930852c69ae5d2141d3766b1'
          date='1969-07-21T02:56:15Z'>
      <desc>This is a test. If this were a real file...</desc>
    </file>
    <feature xmlns='http://jabber.org/protocol/feature-neg'>
      <x xmlns='jabber:x:data' type='form'>
        <field var='stream-method' type='list-single'>
          <option><value>http://jabber.org/protocol/bytestreams</value></option>
          <option><value>http://jabber.org/protocol/ibb</value></option>
        </field>
      </x>
    </feature>
  </si>
</iq> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-03T06:51:04.263

将 XEP-0096 用于 FileTransfer 而不是 XEP-0065 它仅适用于 IOS，要成功传输，您需要接收器的当前资源 ID，如 user@jabber.com/2526318749013466431，以便与代理 IP 和端口建立连接jabber 服务器

# ssas-2008 - SSAS DSV 更新

> ID：11018211
> 
> 赞同：0
> 
> 时间：2012-06-13T15:24:50.720
> 
> 标签：ssas-2008

我工作中的开发环境不足以处理我的多维数据集中的所有数据。它不断降低我的开发箱。我在自己的 IT 内部有未结票，所以我不问这个。

我在 DSV 中添加了过滤器以限制处理的数据量，但现在我只想更新多维数据集中的元数据，因此下次处理多维数据集时，它会使用新的 DSV 定义。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:02:26.890

找到答案了，在 DSV 的空白处右键单击并选择刷新。[在此处](http://www.msbiguide.com/2011/12/22/refresh-option-in-ssas-dsv/)查看我找到解决方案的博客。

# php - SQLSTATE[HY000] [2002] 无法通过套接字 '/var/run/mysqld/mysqld.sock' 连接到本地 MySQL 服务器 (2)

> ID：11018218
> 
> 赞同：1
> 
> 时间：2012-06-13T15:25:18.913
> 
> 标签：php, mysql, pdo, database-connection, fatal-error

将我的网站从我的计算机传输到 1and1 服务器后出现此错误。

我也收到以下错误，但我不确定它是否直接相关：

> 致命错误：在第 29 行的 /homepages/37/d153694643/htdocs/sites/mjbox/func/functions.php 中的非对象上调用成员函数 prepare()

我在单独的文件中测试了与我的 1 和 1 服务器的连接，并且没有错误。

这是我的大部分 index.php

```
//Check if the user is logged in
loggedin();

//Check if the submit button has been clicked first
if ( isset( $_POST['submit'] ) ){

    //Check if user exists on database
    match_login($_POST['username'],$_POST['password']);
}

// Retrieve all active posts order by lastest first
$resultarray = retrieve_active_posts();

echo '<div id="content-wrap">';
foreach($resultarray AS $value){
    $filename = substr($value['img_file_name'],9);
    $cat_id = $value['cat_id'];
    echo '<article class="post">';
    echo '<div class="post_title">' . $value['post_title'] . '</div>';
    echo '<div class="post_info">' . 
    'Category: ' . $cat_name = get_cat_name($cat_id) .'<br />'. 
    'Year: ' . $value['post_year'] .'<br />'. 
    $value['post_desc'] .'<br />'. 
    '</div>';
    echo '<div class="link-to-post"><a href="#">Click to view</a></div>';
    echo '<a href="#'.$value['post_id'].'" class="linktopost"><img class="post-thumb" src="img/thumb_/'.$filename.'" alt="MJbox Michael Jackson memorabilia thumbnail" data-postid="'.$value['post_id'].'"/></a>';
    echo '<a href="#'.$value['post_id'].'" class="linktopost"><img class="cover-img" src="img/post-bg-1.png" alt="test" data-postid="'.$value['post_id'].'"/></a>';
    echo '</article>';

}
echo '</div>'; 
```

和我的一些functions.php文件，包括第29行：

```
//Check if user is logged in
    function loggedin(){
        //Check if the loggedin status is set to true, meaning that user is logged in.
        if ( isset ( $_SESSION['loggedin'] ) && $_SESSION['loggedin'] == true  ) {
            return true;
        }else{

            return false;
        }

    }

    //Check users login details
    function match_login($username, $password){
        //If the button has been clicked get the variables
        //test the connection
            try{
                //connect to the database
                $dbh = new PDO("mysql:host=correct;dbname=correct","correct", "correct");
            //if there is an error catch it here
            } catch( PDOException $e ) {
                //display the error
                echo $e->getMessage();

            }
        //select any username and password that match 
        $stmt = $dbh->prepare("SELECT * FROM mjbox_users WHERE username=? AND password=?");
        $stmt->bindParam(1, $username);
        $stmt->bindParam(2, $password);

        //execute the select statement, put in if statement to provide error if false!?
        if( $stmt->execute() ){
            //count how many rows are found
            $numrows = $stmt->rowCount();
            //if there is a match continue
            if( $numrows > 0 ){
                $_SESSION['loggedin'] = true;
                $_SESSION['username'] = $username;
                header( 'Location: index.php' ) ;
                echo 'yes';
            }
        }
        $dbh = null;
    }

    //logout
    function logout(){
        $_SESSION = array();    
        session_destroy();
        header( 'Location: index.php' ) ;

    } 
```

这是第 29 行：

```
$stmt = $dbh->prepare("SELECT * FROM mjbox_users WHERE username=? AND password=?"); 
```

什么可能导致连接失败和致命错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:59:07.290

老实说，我会返回一个页面，不包含以下内容。

```
try {
    //connect to the database
    $dbh = new PDO("mysql:host=correct;dbname=correct", "correct", "correct");
    //if there is an error catch it here
} catch( PDOException $e ) {
    //display the error
    echo $e->getMessage();

}
$result = $dbh->query("show tables");
while ($row = $result->fetch(PDO::FETCH_NUM)) {
    print_r($row[0]);
} 
```

这似乎是连接字符串的问题，但这应该可以肯定地消除它。

# pthreads - 使用 pthreads 的正确线程池

> ID：11018222
> 
> 赞同：2
> 
> 时间：2012-06-13T15:25:27.780
> 
> 标签：pthreads, threadpool, mutex, condition-variable

我正在尝试使用 pthreads 编写适合我目的的自定义线程池，而且我是 pthreads 的新手。我在线阅读了这些（[POSIX 线程编程](https://computing.llnl.gov/tutorials/pthreads/)和[Linux 教程 Posix 线程](http://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html)）教程，它们非常有帮助，但我仍然对互斥锁和条件变量有一些（可能是愚蠢的）疑问：

1.  互斥锁的范围是什么？全局互斥锁是否会锁定所有全局变量，以便一次只有一个线程可以访问它们？如果我有两个全局互斥锁，它们会锁定同一组变量吗？在类或函数中声明的互斥锁怎么样，当我锁定/解锁它时会发生什么？
2.  如果我只是打算读取一个全局变量，根本不修改它，我还应该使用互斥锁吗？
3.  如果我是正确的，则使用条件变量来唤醒`pthread_cond_wait()`在某些条件下正在休眠（或使用阻塞）的其他线程。对休眠线程的唤醒呼叫由其他线程发出`pthread_cond_signal()`或`pthread_cond_broadcast()`由其他线程发出。控制流应该如何发生，以便一些全部或一个线程唤醒以完成工作并等待下一个工作可用？我对具有 4 个线程的场景特别感兴趣。
4.  有没有办法在创建线程之前设置线程与特定处理器核心的亲和性（以便它开始在所需的核心上执行并且在创建后不会发生核心移动）？

如果这些问题看起来很愚蠢，我很抱歉，但正如我所说，我对此并不陌生。任何帮助、评论、代码或指向良好资源的指针都值得赞赏。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:53:01.660

这是很多问题。几个答案。

(1a) 互斥锁的范围是您将其编程为的任何内容。从这个意义上说，它与任何其他类型的变量没有什么不同。

(1b) 全局互斥锁将保护您对其进行编程以保护的任何变量。我认为从您的其他问题来看，您可能在这里有一个根本的误解。互斥体没有什么神奇之处。您不能只声明一个并说“好的，保护这些变量”，您必须将互斥锁合并到您的代码中。因此，如果您有两个使用变量 X 的函数，一个对变量的任何更改执行互斥锁/解锁，而另一个函数完全忽略了互斥锁甚至存在，那么您实际上并没有保护任何东西。我能想到的最好的例子是建议文件锁——一个程序可以使用它们，但如果另一个程序没有，那么该文件就没有被锁定。

(1c) 通常，不要让多个互斥锁锁定相同的数据。这是对问题的邀请。再一次，互斥锁的使用取决于编程的合作。如果函数 A 使用互斥锁 C 保护数据 B，而函数 D 使用互斥锁 E 保护数据 B，则数据 B 根本不受保护。函数 A 可以保持对互斥体 C 的锁定，但由于函数 D 不注意它，它无论如何都会覆盖数据 B。

(1d) 适用基本范围规则。

(2) 不。如果变量不会以任何方式发生变化，使其在线程之间不一致，那么您不需要锁定它。

(3) 关于 SO 有许多详细的答案，对此进行了相当详细的说明。搜索了一下。

(4) 我不知道。

# xml - Highcharts 仅在 FireFox 浏览器中工作

> ID：11018226
> 
> 赞同：1
> 
> 时间：2012-06-13T15:25:36.710
> 
> 标签：xml, internet-explorer, firefox, highcharts

我正在开发 Highcharts 应用程序，其中图表将从 XML 数据中显示。我已经浏览了 Highcharts XML 示例。请参阅以下链接 - Highcharts 如何使用 - [http://www.highcharts.com/documentation/how-to-use](http://www.highcharts.com/documentation/how-to-use) Highcharts XML 示例 - [http://www.highcharts.com/studies/data-from-xml.htm](http://www.highcharts.com/studies/data-from-xml.htm)

此示例适用于所有浏览器，包括 IE。我所做的是 - 1）复制示例的源代码并保存到文件中。2) 进行了更改，以便代码使用我机器上存在的库文件（jquery 和 highcharts）。3) 读取我机器上的 XML 文件。

在这些更改之后，Firefox 中一切正常。它甚至显示我对 XML 数据所做的更改，这意味着它正在读取我的 XML 数据。但它在 IE 中不起作用。它没有显示 Javascript 错误，在屏幕上我可以看到图表名称“水果消费”但没有图表。即使在 Chrome 中也无法正常工作。我只看到白屏。你能帮我解决这个问题吗？我什至删除了在我的机器上使用 lib 文件的更改。所以代码将使用由 Highcharts 和 JQuery 托管的 lib 文件，并且将只读取存储在我机器上的 XML 数据。但即使在这种情况下它也不起作用。我添加了一个警报，以查看 XML 文件是否被正确读取并且是正确的。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:53:41.343

我知道，如果你有很多数据要推送到 Highchart，它可能根本不会呈现它。通常情况下，它只会显示图表标题和子标题。浏览器具有不同级别的 JavaScript 支持。因此，有些处理较大的 Highcharts，有些则不处理。

在 IE 和 Chrome 中，如果您查看源代码并且 Highchart 存在数据，那么上述问题可能是您的问题。要进行测试，请减少 XML 文件中的数据量并重试。继续这样做，直到它显示在浏览器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:39:42.600

问题解决了......我安装了XAMPP Web服务器并从服务器调用文件并且它工作......这可能与Google chrome安全功能有关，它不允许本地文件访问本地文件.. .some origin 设置为 null 问题......现在代码在 ie 和 chrome 中都可以工作......:)

# c - C - execvp() 第二个参数

> ID：11018229
> 
> 赞同：1
> 
> 时间：2012-06-13T15:25:47.537
> 
> 标签：c, unix, execvp

```
execvp(argv[1], &argv[1]) 
```

execvp() 的第二个参数究竟做了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T15:27:57.293

第二个参数应该是指向一个以`NULL`-terminated 字符串数组的指针，它成为被`argv`调用进程的。

这个数组的第一个元素成为`argv[0]`被调用者的，不一定和它的路径相同；例如，您可以通过完整路径调用进​​程，但将其基名作为`argv[0]`. 此外，某些程序的行为会根据它们的`argv[0]`. `argv[0]`著名的例子是 Unix shell以 a 开头时表现为“登录 shell” `-`，因此原始`login`程序可以这样做

```
char *argv[2] = {"-sh", NULL};
execvp("/bin/sh", argv); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:28:31.280

它作为`argv`向量传递给被调用程序。我[引用文档](http://linux.die.net/man/3/execvp)：

> execv()、execvp() 和 execvpe() 函数提供了一个指向以 null 结尾的字符串的指针数组，这些字符串表示新程序可用的参数列表。按照惯例，第一个参数应该指向与正在执行的文件关联的文件名。

# ios - IOS保留一个viewcontroller

> ID：11018232
> 
> 赞同：0
> 
> 时间：2012-06-13T15:25:58.260
> 
> 标签：ios, uiviewcontroller, uitabbarcontroller

如何从 uitabbarcontroller 全屏切换到 viewcontroller，保留 uitabbarcontroller 上的所有数据和视图/选项卡？

tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:28:29.600

您是否想隐藏 TabBar 或显示新视图，但是一旦您完成了新视图，TabBar 是否不受影响？

在后者的情况下，尝试类似：

```
ViewController *vc = [[ViewController alloc] initWith...];
[self presentModalViewController:vc]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:33:55.160

在 fullScreen 中的 TabBar 上添加 ViewController 然后：

```
ViewController *vc = [[ViewController alloc] initWithNibName:@"ViewController " bundle:nil];
[self presentViewController:vc animated:YES completion:NULL]; 
```

现在在任何情况下都解雇这样的模态控制器（按钮可能是）

```
[self removeFromParentViewController]; 
```

在此之后，您的标签栏将保持原样：

# .net - 无法从 Azure 云服务使用 Gmail smtp

> ID：11018233
> 
> 赞同：15
> 
> 时间：2012-06-13T15:26:00.563
> 
> 标签：.net, azure, smtp, gmail

我通过 Gmail 的 smtp 发送电子邮件的代码：

```
SmtpClient client = new SmtpClient("smtp.gmail.com", 587);
client.EnableSsl = true;
client.UseDefaultCredentials = false;
client.Credentials = new NetworkCredential("my_user_name", "my_password");

MailMessage message =
     new MailMessage(new MailAddress("from...@gmail.com"), new MailAddress("to...@gmail.com"));
message.Body = "body";
message.Subject = "subject";
client.Send(message); 
```

该代码适用于我的本地计算机，并且当我在 Azure 上作为“网站”发布时。

但是当我在**“云服务”**中发布时，我得到了这个例外：

```
 System.Net.Mail.SmtpException: The SMTP server requires a secure connection
 or the client was not authenticated. The server response was:
 5.5.1 Authentication Required. Learn more at 
```

Windows Azure“网站”与“云服务”有什么不同会产生这种效果吗？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T23:37:16.563

我遇到了这个确切的问题。但是，无论我使用的是`<system.net>`配置设置还是使用了正确的凭据、主机、端口等，我都遇到了这个问题。

问题在于 Google 拒绝了来自 Azure 的身份验证请求。我通过登录我在代码中用于 SMTP 客户端的 Gmail 帐户发现了这一点。登录 Gmail 帐户后，我注意到一个 red-bar-header-warning 说

> 有人从您的帐户不常见的位置登录。如果不是您，请立即更改您的密码。

除了警告之外，我还收到一封电子邮件，上面写着：

> 最近有人尝试使用应用程序登录您的 Google 帐户 xxxxx@gmail.com。我们阻止了登录尝试，以防这是试图访问您帐户的劫持者。请查看登录尝试的详细信息：
> 
> *   格林威治标准时间 2012 年 8 月 27 日星期一晚上 10:33:59
> *   IP地址：168.62.48.183
> *   地点：美国
> 
> 如果您无法识别此登录尝试，则其他人可能正在尝试访问您的帐户。您应该立即登录您的帐户并重置密码。了解如何在 [http://support.google.com/accounts?p=reset_pw](http://support.google.com/accounts?p=reset_pw)
> 
> 如果是您本人，并且您想授予此应用程序访问您帐户的权限，请完成 [http://support.google.com/mail?p=client_login中列出的故障排除步骤](http://support.google.com/mail?p=client_login)
> 
> 此致 Google 客户小组敬上

按照提供的链接中列出的步骤进行操作后，我的 Azure 网站能够成功登录到我的 Gmail 帐户并将 Gmail 用作 SMTP 客户端。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-13T17:17:14.457

在 Web.config 中使用以下 SMTP 设置：

```
<system.net>
    <mailSettings>
        <smtp deliveryMethod="Network">
            <network defaultCredentials="false" enableSsl="true" host="smtp.gmail.com" port="587" userName="xxxxxxx@gmail.com" password="xxxxxxxxxxx"/>
        </smtp>
    </mailSettings>
</system.net> 
```

我认为您传递了错误的凭据。在您的用户名中使用 @gmail.com 后缀并尝试将 bodyhtml 属性设置为 true ......

希望这对你有用..它对我来说总是正确的..

[在这个 SO 线程](https://stackoverflow.com/questions/7559431/c-sharp-cant-send-mail-in-windows-azure-via-gmail-smtp)中检查答案的评论。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-06-14T11:03:29.033

按照 Google 故障排除页面上的说明，转到以下链接并从我的本地计算机登录修复了从 Azure 网站为我发送电子邮件时的错误。

[http://www.google.com/accounts/DisplayUnlockCaptcha](http://www.google.com/accounts/DisplayUnlockCaptcha)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-13T16:56:59.750

似乎您的连接被 SMTP 服务器拒绝，因为它没有启用 SSL 或凭据不正确。您需要在 web.config 中设置 SSL 和网络凭据，如下所示：

```
<system.net>
 <mailSettings>
    <smtp deliveryMethod="Network">
        <network enableSsl="true" host="smtp.gmail.com" port="25" userName="xxxxxxx@gmail.com" password="xxxxxxxxxxx"/>
    </smtp>
 </mailSettings>
</system.net> 
```

此 SO 讨论中提供了更多信息： [C# - Can't send mail in WIndows Azure via Gmail SMTP](https://stackoverflow.com/questions/7559431/c-sharp-cant-send-mail-in-windows-azure-via-gmail-smtp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T17:24:22.227

如前所述，您的用户名应包含“ **@googlemail.com** ”。在我的代码（java）中，我使用**端口 465**通过谷歌邮件发送邮件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-06T19:51:12.233

**在 Gmail 帐户中创建“应用程序密码”**

转到您的[Gmail 帐户](https://myaccount.google.com/)

在**安全**部分

1.- 去**谷歌访问**

2.- 允许**两步验证**

3.- 创建一个新的**应用密码**

4.- 在您的 Web.config 或源代码中正常使用该密码

# c# - 如何使用 linq 和 c# 在查询中创建包含另一个对象类型列表的列表对象

> ID：11018234
> 
> 赞同：0
> 
> 时间：2012-06-13T15:26:03.653
> 
> 标签：c#, linq, linq-to-sql

我正在尝试使用 linq 返回包含另一个对象列表作为数据成员的对象列表。我已经尝试过显示的示例，但每次尝试都会出现不同的错误。其中之一如下：LINQ to Entities 无法识别方法 'System.Collections.Generic.List `1[SunGard.Tools.Notifications.LinkVariable] ToList[LinkVariable](System.Collections.Generic.IEnumerable`1[SunGard.Tools.Notifications.LinkVariable])' 方法，并且该方法无法转换为存储表达式。

我有一个对象（AlertMessageReturn），其中包含一些字符串数据成员以及另一个对象（列表）的列表。我有一个定义 LinkVarible 的类和一个包含值的表。我的查询如下所示：

```
AlertMessagesQuery = from alertMessage in this.context.AlertMessages
where alertMessage.UserId=UserId                                              
select new AlertMessageReturn()
{ PAM_ShortMessage = alertMessage.PAM_ShortMessage,
PAM_LongMessage = alertMessage.PAM_LongMessage,
PAM_LongMessageRemote = alertMessage.PAM_LongMessageRemote,
LinkVariables = (from linkVariable in this.context.AlertMessageLinks
from user in this.context.AlertMessageUsers
 where user.PAMU_PAM_ID == linkVariable.PAML_PAM_ID && user.PAMU_UserId == UserId
 select new LinkVariable()
  {
  Name = linkVariable.PAML_SessionVariableName,
  Value = linkVariable.PAML_SessionVariableValue
   })
}; 
```

该错误与为链接变量返回的类型有关。请帮忙。

我将代码更改如下：

```
LinkDataQuery = from linkData in this.context.AlertMessageLinks
   from user1 in this.context.AlertMessageUsers
    where user1.PAMU_PAM_ID == linkData.PAML_PAM_ID && user1.PAMU_UserId == UserId
     select new LinkData
       {
        Name = linkData.PAML_SessionVariableName,
          Value = linkData.PAML_SessionVariableValue
         };
var links = LinkDataQuery.ToList();

    AlertMessagesQuery = from alertMessage in this.context.AlertMessages
where alertMessage.UserId=UserId                                              
select new AlertMessageReturn()
 { PAM_ShortMessage = alertMessage.PAM_ShortMessage,
   PAM_LongMessage = alertMessage.PAM_LongMessage,
   PAM_LongMessageRemote = alertMessage.PAM_LongMessageRemote,
    LinkVariables = links
 };

var AlertMessages = AlertMessagesQuery.ToList();  // this is where the error point to
                        if (AlertMessages.Any())
                        {
                            return AlertMessages;
                        } 
```

我现在得到的错误是：System.NotSupportedException：无法创建类型为“SunGard.Tools.Notifications.LinkData”的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:38:55.563

每当您收到“无法转换为存储表达式”类型的消息时，这表明您正在使用您的 linq 执行某些操作，试图将其转换为其他语句（通常是 SQL）。例如，如果你说

```
....select new MyObject
    {
         Id = Guid.Parse( passedIdentity ),
         ....
    } 
```

虽然这是一个完全有效的 C# 语句，但您将收到 Guid.Parse 无法由 linq 处理的错误。如果可以将变量移动到查询内部使用的外部变量中，那么它将起作用。所以你会做...

```
string name = linkVariable.PAML_SessionVariableName;
string nValue = ....
....
select New LinkVariable
{
    Name=name,
    Value=nValue
}; 
```

另外...您不需要 Select New 语句上的右括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:30:40.203

LINQ to SQL 引擎无法将您的子查询`LinkVariables`转换为 SQL。更重要的是，SQL 不能返回这样的嵌套数据集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T18:59:01.047

虽然 LINQ to SQL 可以恢复对象层次结构，但它不能投影到不属于模型的类型中。不要投影到 AlertMessageReturn 类型中，而是尝试在代码的 IQueryable 部分中投影到匿名类型。完成数据库查询的结构化后，强制返回结果（使用 AsEnumerable），然后将其投影到您的 AlertMessageReturn 类型中。它的开销更大，但确实有效。或者，您可以使用 AutoMapper 之类的工具将匿名类型转换为结果类型。

```
 AlertMessagesQuery = 
      from alertMessage in this.context.AlertMessages 
      where alertMessage.UserId=UserId                                               
      select new 
      {
         alertMessage.PAM_ShortMessage, 
         alertMessage.PAM_LongMessage, 
         alertMessage.PAM_LongMessageRemote, 
         LinkVariables = from linkVariable in this.context.AlertMessageLinks 
                         from user in this.context.AlertMessageUsers 
                         where user.PAMU_PAM_ID == linkVariable.PAML_PAM_ID && user.PAMU_UserId == UserId 
                         select new  
                         { 
                             Name = linkVariable.PAML_SessionVariableName, 
                             Value = linkVariable.PAML_SessionVariableValue 
                         }) 
      }; 
    var alertMessageResults = 
      from message in AlertMessagesQuery.AsEnumerable()
      select new AlertMessageResult 
      {
        PAM_ShortMessage = mesage.PAM_ShortMessage,
        PAM_LongMessage = message.PAM_LongMessage,
        PAM_LongMessageRemote = message.PAM_LongMessageRemote,
        LinkVariables = (from variable in message.LinkVariables
                        select new LinkVariable { Name=variable.Name, Value = variable.Value})
                        .ToList()
      };
   return alertMessageResults.ToList(); 
```

# javascript - Javascript中的总计计算以处理货币格式（MinusSignNegative）

> ID：11018235
> 
> 赞同：0
> 
> 时间：2012-06-13T15:26:09.580
> 
> 标签：javascript, regex

我目前在下面有一个javascript 代码，它在处理货币格式（即500.00 美元）时将总计计算为只读文本字段。我遇到的问题是，当以货币格式 (MinusSignNegative) 即 ($500.00) 而不是 -$500.00 输入多个负数时，如何处理计算。我目前在总计中遇到 NaN 错误。

我相信这个正则表达式应该处理它，但我不知道如何实现。[http://www.regexlib.com/(X(1)A(bk8AHOFYowt7XHOC4WUCtfdM2LhlaovTNInhWLTrzAeoeq-c53XkkdwLD-WDe3OgQtJ7BLHSs0P-u-RrLbfVZaQIHkBH2exYGw0qtz6nqSamZNVqtnyufo9Y3nrEq5mq-mry63HY4Nnv0dfsQOZzKvuwcKAuwigyyQva-67laxr-ModxTQESW8fXx2XJL_0L0))/REDetails.aspx?regexp_id=625&AspxAutoDetectCookieSupport=1](http://www.regexlib.com/(X(1)A(bk8AHOFYowt7XHOC4WUCtfdM2LhlaovTNInhWLTrzAeoeq-c53XkkdwLD-WDe3OgQtJ7BLHSs0P-u-RrLbfVZaQIHkBH2exYGw0qtz6nqSamZNVqtnyufo9Y3nrEq5mq-mry63HY4Nnv0dfsQOZzKvuwcKAuwigyyQva-67laxr-ModxTQESW8fXx2XJL_0L0))/REDetails.aspx?regexp_id=625&AspxAutoDetectCookieSupport=1)

任何人都可以提供解决方案吗？

```
 <SCRIPT LANGUAGE="JavaScript">
    <!--
    function total(what,number) {
        var grandTotal = 0;
        for (var i=0;i<number;i++) {
           if (what.elements['price' + i].value.replace(/\$|\,/g,'') == '')
               what.elements['price' + i].value.replace(/\$|\,/g,'') == '0.00';
           grandTotal += (what.elements['price' + i].value.replace(/\$|\,/g,'') - 0);
        }
        what.grandTotal.value = (Math.round(grandTotal*100)/100);
        }
    //-->
    </SCRIPT>

    <FORM NAME="myName">
    Tax Due/Refund: <input TYPE="text" NAME="price0" VALUE="" SIZE="10" class='currency' onChange="total(this.form,3)"><BR>
    Interest: <input TYPE="text" NAME="price1" VALUE="" SIZE="10" class='currency' onChange="total(this.form,3)"><BR>
    Penalty: <input TYPE="text" NAME="price2" VALUE="" SIZE="10" class='currency' onChange="total(this.form,3)"><BR>
    Total Amount Assessed: <INPUT TYPE="TEXT" NAME="grandTotal" class='currency' SIZE="25" READONLY="readyonly" style="background:#eee none; color:#222; font-weight:bold">
    </FORM> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:53:17.057

如果您尝试将负号从数字移到美元符号的左侧，请在写入总值字段时执行此操作。

```
function total(what, number){
    var grandTotal= 0,  i= number, val, sign;
    while(i){
        val= what.elements['price' + i--].value.replace([$, ]+/g,'') ;
        grandTotal+= parseFloat(val) || 0;
    }
    sign= grandTotal<0? '-' :'';
    what.grandTotal.value=  sign+'$'+ Math.abs(Math.round(grandTotal*100)/100);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:41:15.547

您可以使用或不使用该正则表达式来做到这一点。

没有：

```
fieldValue = field.value; // "(500.00)"
// search for a "(" char
if (fieldValue.indexOf("(") >= 0) {
    // remove all chars, but numbers and dots
    fieldValue = fieldValue.replace(/[^0-9.]/ig, "");
    // 500.00
    numberFieldValue = Number(fieldValue) * -1;
} 
```

和：

```
fieldValue = field.value; // "(500.00)"
// test if the value matches that pattern for negative numbers
if (fieldValue.match(/PUT_THAT_REGEX_HERE/g)) {
    // remove all chars, but numbers and dots
    fieldValue = fieldValue.replace(/[^0-9.]/ig, "");
    // 500.00
    numberFieldValue = Number(fieldValue) * -1;
} 
```

它应该是这样的：

```
function total(what,number) {
    var grandTotal = 0;
    for (var i=0;i<number;i++) {

        fieldValue = what.elements['price' + i].value; // "(500.00)" 
        // search for a "(" char 
        if (fieldValue.indexOf("(") >= 0) { 
            // remove all chars, but numbers and dots 
            fieldValue = fieldValue.replace(/[^0-9.]/ig, ""); 
            // 500.00 
            numberFieldValue = Number(fieldValue) * -1; 
        } else if (fieldValue.replace(/\$|\,/g,'') == '') {
            numberFieldValue = 0;
        } else {
            numberFieldValue = number(fieldValue.replace(/\$|\,/g,''));
        }

        grandTotal += numberFieldValue ;
    }
    what.grandTotal.value = (Math.round(grandTotal*100)/100);
} 
```

# iphone - NSJSONSerialization 不更新数据

> ID：11018236
> 
> 赞同：0
> 
> 时间：2012-06-13T15:26:12.753
> 
> 标签：iphone, objective-c, ios, json, nsjsonserialization

我正在尝试使用 iOS5 的 NSJSONSerialization 解析 JSON。这段代码第一次正确地解析了我想要的数据，但是数据只是保持不变。URL 上的 JSON 已经改变，但代码一直给我它解析的第一个数据，现在是不正确的。无论我“构建和运行”多少次，它总是给我同样的东西。

当我将代码复制到新项目时，它再次工作，第一次，然后做同样的事情。

我不知道问题出在哪里，也许是缓存？

谢谢你的帮助！！！

```
- (void)fetchedData:(NSData *)responseData {
    NSError* error;
    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData
                                                     options:kNilOptions 
                                                       error:&error];
    NSArray* allDepartures = [json objectForKey:@"departures"];

    NSLog(@"departures: %@", allDepartures);
    NSDictionary* stops = [allDepartures objectAtIndex:0];
    NSNumber* time = [stops objectForKey:@"expected_mins"];
    NSString* name = [stops objectForKey:@"headsign"];

    nameLabel.text = [NSString stringWithFormat:@"%@",name];
    timeLabel.text = [NSString stringWithFormat:@"%i",[time intValue]];
}

- (IBAction)getInfo:(id)sender {
    dispatch_async(kBgQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL: myURL];
        [self performSelectorOnMainThread:@selector(fetchedData:) 
        withObject:data waitUntilDone:YES];
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:06:57.927

您如何设置“myURL”，仅在 viewDidLoad 中？一段时间后，如果操作系统调用 viewDidUnload 并且您再次运行应用程序，则会调用 viewDidLoad 并再次设置 myURL。如果是这种情况，您应该在每次调用 getInfo 时设置 myURL。

# c# - 打开没有新工作簿的 Excel 应用程序

> ID：11018237
> 
> 赞同：1
> 
> 时间：2012-06-13T15:26:19.367
> 
> 标签：c#, excel

我需要打开一个没有新书的 excel 应用程序。可能吗？这是我的代码：

```
public static Excel.Application InitializeTemplateExcelApp(string logFile)
{
            Excel.Application app = null;

            try
            {
                app = new Excel.Application();
                app.Visible = true;
                // reload all previously loaded addins

                foreach (Excel.AddIn ai in app.AddIns)
                {
                    if (ai.Installed != false)
                    {
                        ai.Installed = false;
                        ai.Installed = true;

                        app.Wait(30);
                    }
                }

                return app;
            }
            catch (Exception ex)
            {
                string errMessage = ex.Message.ToString();
                File.AppendAllText(logFile, errMessage);
                return null;
            }

        } 
```

问题是当我初始化 excel 应用程序时，会自动创建新的工作簿。之后我需要打开我自己的工作簿，它已经成为第二个打开的工作簿，我想避免这种情况。

谢谢你的帮助，

伊利亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:39:53.707

在将应用程序设置为可见之前尝试运行此命令

```
app.ActiveWorkbook.Close(false);
app.visible = true; 
```

这应该在向用户显示任何内容之前关闭活动工作簿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:47:16.363

我相信 Excel 会使用默认模板打开工作簿。只需在打开自己的工作簿之前关闭所有打开的工作簿。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T16:14:49.707

您的另一个选择是`excel.exe`从命令行参数开始。

[http://office.microsoft.com/en-us/excel-help/command-line-switches-for-excel-HA010158030.aspx#BM4](http://office.microsoft.com/en-us/excel-help/command-line-switches-for-excel-HA010158030.aspx#BM4)

# forms - 在 Microsoft Access 中，如何将主窗体上的文本框链接为查询参数？

> ID：11018239
> 
> 赞同：0
> 
> 时间：2012-06-13T15:26:29.737
> 
> 标签：forms, ms-access, vba, parameters

我已经对这个主题进行了大量研究，我找到的每个答案都涉及消除参数和使用 VBA 应用过滤器。但是，我的查询是许多子查询的结果，并且参数是从一开始就创建和使用的，所以我认为这不是一个可行的选择。[该线程](http://www.opengatesw.net/forum/smf/index.php?topic=656.0)与我的问题非常相似，不同之处在于提出问题的人可以在最后将过滤器应用于他们的日期。我最好寻找一种方法，将主窗体上的未绑定文本框值作为查询的参数，因为这似乎比尝试找到解决方法要简单得多，就像我一直在尝试的那样.

如果有帮助，请快速描述我的查询：我的第一个子查询由日期、姓名、费率和美元金额组成。用户被要求输入两个参数， a`[start date]`和 an `[end date]`。最终查询会生成每个不同的名称、匹配率以及该名称在两个日期之间的美元金额总和。使用的匹配率是该特定名称的比率，其中日期与`[end date]`. 如果 name 和 that 的组合`[end date]`不存在，则使用的速率为 0。中间子查询包括进行计算并找出使用的速率。

对于这个问题，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:37:55.667

将查询中的参数更改为对 frmMain 中组合框的引用，并添加一些代码以在组合框更改或用户单击“过滤器”按钮时重新查询子表单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T15:47:03.150

我认为您可能希望将 [开始日期] 和 [结束日期] 参数替换为：

```
= Forms!MyForm!MyStartDate 
```

和

```
= Forms!MyForm!MyEndDate 
```

其中 MyForm 是一个带有两个文本框的开放式表单。

如果您在某处有一个交叉表，您还需要添加一个参数行。

# javascript - 如何在 jquery Jstree 中打开所有节点？

> ID：11018242
> 
> 赞同：43
> 
> 时间：2012-06-13T15:26:35.730
> 
> 标签：javascript, jquery, jstree

我正在使用以下代码：

```
$("#treeview").jstree();
$("#treeview").jstree('open_all'); 
```

使用以下html：

```
<div id="treeview">
  <ul>
    <li>
      <a href="#">rubentebogt</a>
      <ul>
        <li>
          <a href="#" onclick="goTo('index.php?module=alarm&amp;pagina=dashboard&amp;id=6',false);">Beneden</a>
        </li>
        <li>
          <a href="#" onclick="goTo('index.php?module=alarm&amp;pagina=dashboard&amp;id=7',false);">Boven</a>
        </li>
      </ul>
    </li>
  </ul>
</div> 
```

我的问题是所有节点都保持关闭状态，我无法让它们打开`jstree('open_all');`.

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-13T16:02:06.973

[jsTree 文档](http://www.jstree.com/documentation)是“次优的” 。文档没有明确说明初始化是异步工作的。有[core.loaded()](http://www.jstree.com/documentation/core#loaded)：

> 一个虚拟函数，其目的只是触发加载的事件。此事件在树的根节点加载后触发一次，但在initial_open 中设置的任何节点打开之前。

`loaded.jstree`这表明在设置树后会触发一个事件。您可以挂钩该事件以打开所有节点：

```
var $treeview = $("#treeview");
$treeview
  .jstree(options)
  .on('loaded.jstree', function() {
    $treeview.jstree('open_all');
  }); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-05-19T06:21:39.613

我正在使用 jstree 和 Chrome 的第 3 版。load 事件对我不起作用，但 ready 事件对我起作用，即使在创建 jstree 实例之后：

```
$('#treeview').on('ready.jstree', function() {
    $("#treeview").jstree("open_all");          
}); 
```

[http://www.jstree.com/api/#/?q=.jstree%20Event&f=ready.jstree](http://www.jstree.com/api/#/?q=.jstree%20Event&f=ready.jstree)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-09-23T16:22:50.940

如果要在加载树时打开所有节点：

```
$("#treeview")
    // call `.jstree` with the options object
    .jstree({
        "plugins" : ["themes", "html_data","ui","crrm","sort"]
    }) 
    .bind("loaded.jstree", function (event, data) {
        // you get two params - event & data - check the core docs for a detailed description
        $(this).jstree("open_all");
    })      
}); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-03-28T07:33:33.213

以上所有答案都不适用于我的工作区。我再次搜索并找到此链接（[为什么 jsTree open_all() 不适合我？](https://stackoverflow.com/questions/3585527/why-doesnt-jstree-open-all-work-for-me?answertab=active#tab-top)）很有帮助，并发布我的答案：

jstree版本：3.0.0-bata10

```
$(document).ready(function() {
  $("#tree").bind("loaded.jstree", function(event, data) { 
    data.instance.open_all();
  });
  $("#tree").jstree();
}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-07T11:43:46.893

使用简单的代码

```
$(".jstree").jstree().on('loaded.jstree', function () {
     $(".jstree").jstree('open_all');
}) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-03T06:56:06.467

使用 html 数据时，“您可以在任何 <li> 元素上设置 jstree-open 类以使其最初扩展，以便其子项可见。” - [https://www.jstree.com/docs/html/](https://www.jstree.com/docs/html/)

```
<li class="jstree-open" id="node_1">My Open Node</li> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-30T08:17:11.593

我在这里尝试了所有答案，但它们不适用于 jsTree (v3.3.4)。有效的是`load_node.jstree`事件：

```
 .on( 'load_node.jstree', function () {
      jstree.jstree( "open_all" );
    } ) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-06T12:02:33.523

您还可以将动画应用于打开和关闭，如下所示：

```
$(document)
    .on("click", "#open-all-folders", function () {
        // param1 set to null to open/close all nodes
        // param2 is the duration in milliseconds
        $("#tree-ref").jstree().open_all(null, 200);
    })
    .on("click", "#close-all-folders", function () {
        $("#tree-ref").jstree().close_all(null, 200);
    }); 
```

（或类似地适用于`.on('ready.jstree', function() { // code here }`）；

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-10-25T08:46:54.133

```
.bind("loaded.jstree", function (event, data) {
        // you get two params - event & data - check the core docs for a detailed description
        $(this).jstree("open_all");
    }) 
```

# php - 托管在 HTTP 服务器上的文件将无法正确下载到 android

> ID：11018250
> 
> 赞同：0
> 
> 时间：2012-06-13T15:27:09.703
> 
> 标签：php, android, http, xhtml

为了方便起见，我正在尝试在 http 服务器上托管各种多媒体文件（我需要在网络浏览器和本地测试各种手机的多媒体兼容性）。但是，我发布的许多文件都无法正确下载和/或流式传输。

（注意：我`<a src="whatever.mp3">......</a>`用来在 XHTML 页面上包含文件链接）

例如，**Android 同时支持 AMR-NB 和 AMR-WB**。AMR-NB 文件 (.amr) 可以正确流式传输和下载，但**AMR-WB 文件 (.awb​​) 在单击时会以纯文本形式打开或另存为 .txt 文件**。有什么方法可以让手机正确识别这些文件类型（通过android，或者甚至更好，通过基于**网络的修复**）？

**我遇到问题的其他文件包括 .dm 文件**（DRM Forward Locked Media - 这些下载并在 Blackberry 上正常工作，但不适用于 Android，但是我使用的旧内容网站，.dm 文件在 Android 上工作 - 我可以' t找出与源代码的任何区别）

（注：如果有关系，服务器是我公司的私有内网）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:32:50.083

你用什么做服务器？

您可能必须为您使用的每种文件类型添加 MIME 类型声明才能使其正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:34:45.597

与其直接链接到文件，不如创建一个下载脚本，该脚本将获取文件，检查其大小，`mime_type`并将回显文件内容并`Content-Type`相应设置标题...

# mysql - 按任意行数对 SQL 查询进行分区

> ID：11018253
> 
> 赞同：3
> 
> 时间：2012-06-13T15:27:14.790
> 
> 标签：mysql, sql, group-by

我有一个定期测量的 SQL 表。我希望能够在 value 列上返回一些汇总方法（比如 SUM），一次用于任意数量的行。所以如果我有

```
id  |  reading
1      10
5      14
7      10
11     12
13     18
14     16 
```

我可以一次求和超过 2 行，得到 (24, 22, 34)，或者我可以一次求和 3 行并得到 (34, 46)，如果这有意义的话。请注意，ID 可能不连续——我只想按行数按排序顺序进行操作。

在现实世界中，标识符是一个时间戳，但我认为（可能在应用`unix_timestamp()`调用之后）任何适用于上述简单情况的东西都应该适用。如果重要的话，我正在尝试优雅地缩放为绘图查询返回的结果数量——也许有更聪明的方法来做到这一点？我希望解决方案是通用的，而不是对数据强加特定的存储机制/模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:45:40.070

您可以重新排序查询结果，然后将其分组

```
SET @seq = 0;

SELECT SUM(data), ts FROM (
    SELECT @seq := @seq + 1 AS seq, data, ts FROM table ORDER BY ts LIMIT 50
) AS tmp GROUP BY floor(tmp.seq / 3); 
```

# objective-c - iPhone iOS UILabel如何仅为UITableView详细文本标签自定义文本颜色？

> ID：11018254
> 
> 赞同：2
> 
> 时间：2012-06-13T15:27:14.983
> 
> 标签：objective-c, ios, colors, uilabel, appearance

我正在研究界面原型，并正在使用情节提要来做到这一点。原型的一部分涉及将 UITableView 单元格的详细 UILabel 设置为某种颜色。我想避免手动重新着色情节提要中的每个标签。

我发现我可以使用：

```
[[UILabel appearanceWhenContainedIn:[UITableViewCell class], nil] 
 setTextColor:[UIColor cyanColor]]; 
```

更改表格视图单元格中标签的外观。**有没有办法进一步细化此代码以仅适用于详细表格视图标签？**目前它同时改变了 UITableViewCell 的 textLabel 和 detailTextLabel。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T15:33:37.243

您可以通过在详细视图中对单元格进行子类化来解决这个问题，然后使用

```
[[UILabel appearanceWhenContainedIn:[YOUR_UITableViewCell class], nil] 
 setTextColor:[UIColor other_colr]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T16:02:09.343

如果您想继续使用外观代理，则必须创建一个自定义表格视图单元格和一个新标签。

1.  在情节提要编辑器中，您将 UITableCell 的样式属性设置为“自定义”。
2.  将两个标签拖到表格视图单元格并按照您的需要进行配置。
3.  创建一个继承自 UITableViewCell 的新类，并为每个标签创建 IBOutlets。
4.  在故事板编辑器中，您将表格视图单元格的类设置为您刚刚创建的表格视图单元格类。将插座连接到标签。实际上这已经足够了，因为您也可以在情节提要中配置单元格的外观。如果要通过代码配置标签，还必须执行以下步骤。
5.  创建一个继承自 UILabel 的新类并保持原样。
6.  返回故事板编辑器并选择 detailtextlabel 并将类更改为您刚刚创建的标签类。

如果您想了解有关如何创建自己的表格视图单元格的更多信息，请参阅[IOS 表格视图编程指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)

# python - Python 数据库连接“NoneType”对象不可调用

> ID：11018257
> 
> 赞同：1
> 
> 时间：2012-06-13T15:27:20.577
> 
> 标签：python, mysql-python

```
import MySQLdb
import sys

from libdesklets.controls import Control
from IDBConnection import IDBConnection

class DBConnection(Control, IDBConnection):
  host = 'xxxx'
  user = 'xxxx'
  passwd = 'xxxx'
  db = 'xxxx'

def __init__(self):   
  Control.__init__(self)
  pass

def __get_dbconnection(self):
  db = MySQLdb.connect(self.host, self.user, self.passwd, self.db)
  return db

def __insert(self):   
  db = self.__get_dbconnection()
  cursor = db.cursor()
  cursor.execute("INSERT INTO Usernotes (UID, NID, Inhalt) VALUES (3, 1, 'text');")
  cursor.close()
  db.close()

def __select(self):
  db = self.__get_dbconnection()
  cursor = db.cursor()
  cursor.execute("SELECT Inhalt FROM Usernotes WHERE UID = 1 AND NID = 1;")
  cursor.close()
  db.close()

def __update(self):
  db = self.__get_dbconnection()
  cursor = db.cursor()
  cursor.execute("UPDATE Usernotes SET Inhalt = 'inserttest' WHERE UID = 1 AND NID = 2;")
  cursor.close()
  db.close()

insert = property(__insert, doc="insert into database")
select = property(__select, doc="select from database")
update = property(__update, doc="update database")

def get_class(): return DBConnection 
```

上面的代码是一个用于 Linux gdesklets 的 mysql-Database 的控件（这就是 import Control 和 import IDBConnection 的来源）。因此，当我们从另一个文件 (dbc.insert() / dbc.select() / dbc.update()) 调用属性时，我们会收到错误“'NoneType' object is not callable”。如果我们添加返回类型，我们会得到“'ReturnType' 对象不可调用”。函数正在工作并且数据库操作已完成，但显示文件（调用函数的位置）在异常后崩溃。

希望有人可以在这里帮助我们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:35:22.867

您的查询返回一个空集，或者列的值为空。

没有特定的错误，很难说，但我认为你的选择是一个空集。

您的插入设置 UID = 3 和 NID = 1，您的更新希望更改 UID = 1 和 NID 2 的位置，但您的选择正在寻找 UID = 1 和 NID = 1。

我猜这就是轰炸的地方。

# android - 屏幕分辨率和小部件

> ID：11018261
> 
> 赞同：0
> 
> 时间：2012-06-13T15:27:41.677
> 
> 标签：android, android-layout, android-widget

我设置了一个网络视图：

```
 <WebView
        android:id="@+id/webView1"
        android:layout_width="match_parent"
        android:layout_height="500px"
        android:layout_below="@+id/button1"
        android:layout_centerHorizontal="true" /> 
```

但这是正确的吗？如果 Android 手机的分辨率发生变化，我也许应该以百分比为单位给出高度，而不是以像素为单位？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T15:32:11.317

我建议您使用 DP，因为它可以“适应”任何维度。这些链接可以帮助您： [Android 上的“px”、“dp”、“dip”和“sp”有什么区别？](https://stackoverflow.com/questions/2025282/difference-of-px-dp-dip-and-sp-in-android) 并[支持多种屏幕分辨率 Android Developers](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:32:21.887

使用 500dp

dp Density-independent Pixels - 一个基于屏幕物理密度的抽象单位。这些单位与 160 dpi 屏幕相关，因此 1 dp 是 160 dpi 屏幕上的一个像素。dp与像素的比例会随着屏幕密度而变化，但不一定成正比。注意：编译器同时接受“dip”和“dp”，尽管“dp”与“sp”更一致。

# java - 我的 Java GUI 与我的超酷专有 dll 交互。如何防止第 3 方与此 dll 交互？

> ID：11018263
> 
> 赞同：0
> 
> 时间：2012-06-13T15:27:48.820
> 
> 标签：java, c++, security, user-interface, linker

我正在用 C++ 编写我的过程。
现在我想写它的GUI。
我正在考虑使用 Java 来执行此操作并使用 JNI 链接它，但后来我想到了一个安全问题......
假设我的 GUI.exe 文件是用 Java 编写的，并且我也有我的 Engine.dll 文件编写在 C++ 中。
什么会阻止邪恶的人获取我的 DLL 并将其链接到他们的程序？
我确实在我的 C++ dll 中使用了许可证验证的东西，但它可以被这些邪恶的邪恶的人破坏。
我知道每个程序都可以被破解，但我不想只是给他们我的引擎以方便使用。

有没有办法保护这个链接？
还是我也应该使用 C++ 来编写 GUI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:58:03.853

最便携的解决方案可能涉及以任何看起来合适的方式加密进入和离开 DLL 的数据。那时不需要对 C++ 端进行混淆。这将需要将加密密钥嵌入到 C++ 二进制文件和您将 Java 编译到的任何内容中；例如，您可以采取额外的步骤，通过用一大块随机垃圾隐藏它并对其进行索引来使其不方便查找。

另一种选择是支付许可系统的费用，该系统将在调用或链接时由 ubercool.dll 进行检查。

最终，您正在尝试执行一些注定要失败的防御行动。如果您的 ubercool 功能真正有价值或有用，并且有人想以您不希望他们不喜欢的方式使用它，他们会想办法。谁能想到还有没有破解的商业软件？

最后，您可以在最终用户无法摆弄的系统上运行您的软件。具有锁定引导加载程序、TPM 模块等的移动设备是一种方法；另一种是将您的 ubercool 东西作为托管服务运行，如果人们拥有您当然可以控制的适当凭据，他们可以连接到该服务。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T15:33:55.543

考虑对将使用 dll 的 Java 或 C# 代码使用混淆器。这并不能解决所有问题，但是对程序进行逆向工程会更加困难。

此外，如果您的项目是用 C++ 编写的，您可以考虑将 C++\CLI 用于应用程序的 GUI 部分。

# python - py.test: 获取 KeyboardInterrupt 来调用拆解

> ID：11018265
> 
> 赞同：3
> 
> 时间：2012-06-13T15:27:59.337
> 
> 标签：python, pytest

我正在使用 py.test 编写一些测试，并在我的测试中使用 funcargs。这些 funcargs 在 conftest.py 中定义了自己的设置和拆卸，如下所示：

**conftest.py：**

```
def pytest_funcarg__resource_name(request):
  def setup():
    # do setup
  def teardown():
    # do teardown 
```

我的问题是，当有人使用 CTRL+C 来停止测试执行时，它会让所有内容都没有被删除。我知道有一个钩子 pytest_keyboard_interrupt 但我不知道从那里做什么。

对不起这个noobish问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T09:43:00.957

你没有提供一个完整的例子，所以也许我错过了一些东西。但这里有一个使用 request.cached_setup() 助手的例子来说明它是如何工作的：

```
def pytest_funcarg__res(request):
    def setup():
        print "res-setup"
    def teardown(val):
        print "res-teardown"
    return request.cached_setup(setup, teardown)

def test_hello(res):
    raise KeyboardInterrupt() 
```

如果你用“py.test”运行它，你会得到：

```
============================= test session starts ==============================
platform linux2 -- Python 2.7.3 -- pytest-2.2.5.dev4
plugins: xdist, bugzilla, pep8, cache
collected 1 items

tmp/test_keyboardinterrupt.py res-setup
res-teardown

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! KeyboardInterrupt !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
/home/hpk/p/pytest/tmp/test_keyboardinterrupt.py:10: KeyboardInterrupt 
```

这表明如果在测试执行期间发生 KeyboardInterrupt，则会调用 setup 和 teardown。

# jquery - 获取一个 href attr 并将其设置为另一个

> ID：11018268
> 
> 赞同：0
> 
> 时间：2012-06-13T15:28:20.110
> 
> 标签：jquery

```
<script type="text/javascript">
$(function() {

    $('.thelink a').select(function() {

        var a_href = $(this).attr("href");

    });
    $('.calltoActionMoreInformation a').attr('href', a_href);
});
</script>

  <div class="thelink" style="height: 250px; position: relative;">
  <a title="xxx" href="xxx">
    <img alt="tree" src="x" />

  </a>
  </div> 
```

试图将href从内部放入：

```
 <span class="calltoActionMoreInformation" style="position: absolute; bottom: 0px;">
   <a title="" href="--Link here--"></a>
  </span> 
```

如果我设置 var a_href = 'http://www.google.co.uk'; 它设置正确，所以问题在于获取.thelink div中唯一链接的href ..

如何将 .thelink a 中的 href 分配给 .calltoActionMoreInformation a **？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T15:30:17.620

```
$('.thelink a').click(function(e) {
   e.preventDefault();
   var a_href = $(this).attr("href"); // or this.href
   $('.calltoActionMoreInformation a').attr('href', a_href);
}); 
```

**[演示](http://jsfiddle.net/QStkd/197/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:44:51.953

1 - 变量“a href”不能从全局上下文访问，只能从 select 函数访问。

2 - 为什么在这种情况下使用“选择”功能“点击”更合适

更正：

```
$(function(){

    $('.thelink a').click(function(e) {
        $('.calltoActionMoreInformation > a').attr('href', $(this).attr('href'));
            e.preventDefault(); // or
        return false; // this is important is you dont want the browserfollow the link
    });

}); 
```

这样对吗 ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T17:07:20.030

```
$('.thelink a').click(function() {
   var a_href = $(this).attr("href");
   $('.calltoActionMoreInformation a').attr('href', a_href);
   return;
}); 
```

# ios - ios cocos2d box2d如何实现像愤怒的小鸟一样碰撞后身体对碎片的伤害

> ID：11018271
> 
> 赞同：0
> 
> 时间：2012-06-13T15:28:28.637
> 
> 标签：ios, cocos2d-iphone, box2d

我可以得到一些建议，如何实现像愤怒的小鸟一样碰撞后身体对碎片的伤害。我只能找到：

[使用 Box2D 创建真正的爆炸——添加纹理](http://www.emanueleferonato.com/2012/01/17/create-real-explosions-with-box2d-adding-textures/)

[使用 Box2D 切片、分割和切割对象 - 第 4 部分：使用真实图形](http://www.emanueleferonato.com/2011/08/05/slicing-splitting-and-cutting-objects-with-box2d-part-4-using-real-graphics/)

但都是flash，我需要ios cocos2d box2d

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:55:09.247

如果我理解你想重现这个视频中的物体破坏行为[http://www.youtube.com/watch?v=9niqSk9VCi8](http://www.youtube.com/watch?v=9niqSk9VCi8)

我仍然不确定您所说的对象是什么。我猜它是一个单一的不可变形元素（在视频中有 21 个木制品）。

这里发生的事情非常简单：当一个对象被破坏时，它就会消失。然后，产生了一种视觉效果：严格的“碎片”精灵随机放置在对象被破坏的位置周围。它们旋转并轻微移动。然后他们自己消失了。

不涉及物理，只是一个简单的视觉效果。

# svn - 使用 svn:externals 的 SubWCRev 1.7 的解决方法

> ID：11018288
> 
> 赞同：2
> 
> 时间：2012-06-13T15:29:08.617
> 
> 标签：svn, tortoisesvn

我的构建脚本使用[SubWCRev](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-subwcrev.html)嵌入一个 svn 修订号，我的存储库包含一个在两个项目之间共享头文件的[`svn:externals`定义。](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html)

我的 Jenkins 构建服务器不像开发人员那样通过 svn 服务器进行身份验证，因此使用不同的存储库 URL。

由于将构建服务器更新到 TortoiseSVN 1.7，构建脚本失败并出现以下错误：

> SubWCRev：E155032：节点“[shared.h]”来自意外存储库“http://[developer]”，预期为“http://[build server]”；如果此节点是外部文件，使用外部定义中的正确 URL 可以解决问题，请参阅[问题 #4087](http://subversion.tigris.org/issues/show_bug.cgi?id=4087)
> 
> SubWCRev：E200033：无法回滚保存点 - SQL 语句正在进行中，正在执行语句“ROLLBACK TO s390”
> 
> SubWCRev : E200034: SQLite 忙于事务回滚；重置所有繁忙的 SQLite 语句以允许回滚
> 
> 构建步骤“执行 Windows 批处理命令”将构建标记为失败

其中 E155032 引用了`svn:externals`定义。

我没有将`-e`开关传递给 SubWCRev，因此应该忽略外部因素。

我目前的选择是回滚到 TortoiseSVN 1.6 或更改构建服务器身份验证以使存储库 URL 匹配。

**有更好的解决方法吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:57:05.783

在外部定义中使用相对路径而不是绝对路径

# c++ - OpenCV：在 QImage 上使用 GaussianBlur 或 Sobel 导数

> ID：11018290
> 
> 赞同：2
> 
> 时间：2012-06-13T15:29:13.870
> 
> 标签：c++, qt, opencv

我希望你能帮助我。

我正在使用 QT 并尝试对图像的边缘进行简单的检测。但是当我启动时我的程序崩溃了

```
cv::GaussianBlur( src, src, cv::Size(3,3), 0, 0, cv::BORDER_DEFAULT ); 
```

或者

```
cv::Sobel( src_gray, grad_x, ddepth, 1, 0, 3, scale, delta, cv::BORDER_DEFAULT ); 
```

这是我的代码：

```
QImage      *image1;    
IplImage    *cv_image1;

image1 = new QImage("./image.png");  // Format is ARGB32
cv_image1 = QImage2IplImage(image1);
cv::Mat src(cv_image1);

cv::imshow(window_name, src); // Work Well
cv::Mat src_gray;
int scale = 1;
int delta = 0;
int ddepth = CV_16S;

cv::GaussianBlur(src, src, cv::Size(3,3), 0, 0, cv::BORDER_DEFAULT); //Crash Here
cv::imshow( window_name, src); 
```

我认为这是格式的问题。但在另一个使用 ARGB32 QIMAGES 的程序中，此代码运行良好。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:15:09.697

尝试使用此函数进行适当的 QImage 到 cv::Mat 转换，你应该没问题（我还包括从 cv::Mat 到 QImage 的转换）：

```
cv::Mat cvmat_from_qimage(const QImage& qimage)
{ 
    cv::Mat mat = cv::Mat(qimage.height(), qimage.width(), CV_8UC4, (uchar*)qimage.bits(), qimage.bytesPerLine()); 
    cv::Mat mat2 = cv::Mat(mat.rows, mat.cols, CV_8UC3 ); 
    int from_to[] = { 0,0,  1,1,  2,2 }; 
    cv::mixChannels( &mat, 1, &mat2, 1, from_to, 3 ); 
    return mat2; 
}

QImage qimage_from_cvmat(const cv::Mat& mat)
{ 
    cv::Mat rgb; 
    cvtColor(mat, rgb, CV_BGR2RGB); 
    return QImage((const unsigned char*)(rgb.data), rgb.cols, rgb.rows, QImage::Format_RGB888); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:40:12.870

我找到了解决方案。这很奇怪，但是当我这样做时：

```
cvtColor(src, src_gray, CV_RGB2GRAY );
cv::Sobel(src_gray, grad_x, ddepth, 1, 0, 3, scale, delta, cv::BORDER_CONSTANT); 
```

没有 cv::GaussianBlur 它运行良好。我只是将最后一个参数更改为 cv::BORDER_CONSTANT

# c# - 如何在c#中下载电子邮件附件

> ID：11018291
> 
> 赞同：0
> 
> 时间：2012-06-13T15:29:23.197
> 
> 标签：c#, email, attachment, download

有没有我可以在 c# 中使用的免费库来下载电子邮件附件？是的，这个问题之前已经发布过，但是以前的帖子已经过时了，其中引用的一些项目甚至不再维护了。我希望在过去的几年里出现了一些新的东西。

此外，我更喜欢可以与任何东西一起使用的东西，但特定于 Exchange Server 的解决方案也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:53:19.963

您可以使用[EA GetMail 组件。](http://www.emailarchitect.net/eagetmail/)这里我给出了一个使用 IMAP potocol 从电子邮件中获取附件的示例

```
MailClient oClient = new MailClient("TryIt");

//ServerProtocol.Pop3 to ServerProtocol.Imap4 in MailServer constructor

MailServer oServer  = new MailServer(sServer, 
sUserName, sPassword, bSSLConnection, 
ServerAuthType.AuthLogin, ServerProtocol.Imap4);

//by default, the pop3 port is 110, imap4 port is 143, 
//the pop3 ssl port is 995, imap4 ssl port is 993
//you can also change the port like this
//oServer.Port = 110;

 oClient.Connect(oServer);
 MailInfo [] infos = oClient.GetMailInfos();
 int count = infos.Length;
 if(count!=0)
 {
   MailInfo info = infos[i];
   Mail oMail = oClient.GetMail(info);
   Attachment [] atts = oMail.Attachments;          
 } 
```

# ruby-on-rails - 运行 Capybara（使用 Minitest）时未执行 Javascript

> ID：11018298
> 
> 赞同：2
> 
> 时间：2012-06-13T15:29:46.503
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capybara, minitest

运行我的测试时，javascript 没有被执行。我尝试从 :selenium 驱动程序切换到 :webkit 驱动程序，但仍然没有运气。

它在浏览器中运行良好。当测试运行并打开页面时，页面为空白

我还需要做些什么来让它在测试运行期间执行 javascript 吗？

business_integration_test.rb

```
require 'minitest_helper'
require 'ruby-debug'

describe "Business integration" do

  before :each do
    @business = Factory.build(:business)
    Capybara.javascript_driver = :webkit
  end

  it "Should show error if business name is blank" do
    visit admin_business_path
    fill_in 'Name', :with => ''
    click_button 'Save'
    page.save_and_open_page
    page.text.must_include("can't be blank")
  end
end 
```

企业控制器.rb

```
class Admin::BusinessesController < Admin::AdminController

  def update
    @business = resource
    respond_to do |format|
      if @business.update_attributes(params[:business])
        flash[:notice] = "Your business was updated successfully."
      else
        flash[:notice] = "Your business failed to update."
      end
      format.js { render :template => "admin/businesses/edit" }
    end
  end

end 
```

编辑.js.erb

```
$("#page-businesses #main").html("<%= escape_javascript(render :partial => 'edit_information') %>"); 
```

# c++ - 函数不是 std 的元素

> ID：11018300
> 
> 赞同：8
> 
> 时间：2012-06-13T15:29:55.397
> 
> 标签：c++

我在 gcc 下编译代码时遇到了一些非常奇怪的错误。它告诉我`std::function`不存在。

我可以使用以下代码重新创建错误：

```
#include <functional>
#include <stdio.h>

void test(){ printf ("test"); }

int main() {
    std::function<void()> f;
    f = test;
    f();
} 
```

如果我运行 gcc（来自 cygwin）：（我的错误消息是德语，所以我翻译了它。在英语 gcc 上听起来可能不同）

```
$ gcc test.cpp
test.cpp: in function "int main(): 
test.cpp:7:3: Error: "function" is not an element of "std"« 
test.cpp:7:25: Error: "f" was not defined in this scope 
```

使用 MSVC 编译成功。请告诉我我在代码中做错了什么。

约翰内斯

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-13T15:32:04.280

编译为：

```
g++ test.cpp -std=c++0x 
```

`-std=c++0x`需要，因为您使用的是 C++11 功能，否则`g++ test.cpp`就足够了。

确保您拥有最新版本的 GCC。您可以检查版本为：

```
g++ --version 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T15:32:04.927

您需要在`C++`模式和`C++11`模式下编译。因此，您需要`g++`将`-std`标志设置为`c++0x`.

> g++ test.cpp -std=c++0x

您也可以`-std=c++11`从 gcc 4.7 开始使用。

# zend-framework - zend htaccess 公共 php 文件

> ID：11018308
> 
> 赞同：1
> 
> 时间：2012-06-13T15:30:13.137
> 
> 标签：zend-framework, .htaccess

有什么方法可以通过键入 mydomain.com/prolink.php 来访问 zend /public 目录中的 prolink.php 文件，并在其他情况下转到应用程序（index.php）

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

我应该为此指定一条路线吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:01:44.510

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^prolink.php$ public/prolink.php

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

RewriteCond %{REQUEST_FILENAME} !-f 如果请求是针对服务器上已存在的文件，则不提供 index.php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T12:23:21.797

将 index.php 文件放入 public 文件夹并将 .htaccess 放入根文件夹，巫婆内容

```
RewriteEngine On

RewriteRule ^\.htaccess$ - [F]

RewriteCond %{REQUEST_URI} =""
RewriteRule ^.*$ /public/index.php [NC,L]

RewriteCond %{REQUEST_URI} !^/public/.*$
RewriteRule ^(.*)$ /public/$1

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ - [NC,L]

RewriteRule ^public/.*$ /public/index.php [NC,L]

Options -Indexes 
```

# java - 我们如何测量私有方法的执行时间呢？

> ID：11018311
> 
> 赞同：4
> 
> 时间：2012-06-13T15:30:21.270
> 
> 标签：java, performance, jakarta-ee, monitoring, audit

我们使用拦截器来测量 bean 的公共方法调用的执行时间。然而，当一个 bean 的方法调用其他私有方法时，它似乎忽略了审计拦截器。

我们如何测量私有方法的执行时间呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T15:51:58.060

# 使用 AOP

[您可以使用AspectJ等](http://www.eclipse.org/aspectj/)[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)库来实现基准测试。

例如，参见：

*   这个[关于使用 AspectJ 捕获私有或内部方法的 SO 问题](https://stackoverflow.com/questions/4402009/aspectj-and-catching-private-or-inner-methods)，
*   或这篇关于[使用 AspectJ 进行分析的](http://homepages.mcs.vuw.ac.nz/~djp/files/SPE05.pdf)文章。

# 使用探查器

*   您可以实现自己的代理扩展（例如，对于 JProfiler）。
*   或者你可以放弃你的拦截器并简单地从任何探查器进行检查以捕获快照并记录执行时间。

# 使用 JVMTI

*实际上，这就是一些分析器所做的。*

您可以求助于使用[JVMTI](http://docs.oracle.com/javase/6/docs/technotes/guides/jvmti/) API（老实说，不完全确定这是否可行）来[实现您自己的代码检查](http://java.sun.com/developer/technicalArticles/Programming/jvmti/)器并直接将自己挂接到 JVM。

* * *

### 偷偷摸摸和邪恶的内联问题

关于[jb 在他的回答中（有效）的担忧，](https://stackoverflow.com/a/11018753/453590)即私有方法可能在编译时或运行时内联，一些 JVM 可能不会这样做或允许禁用此功能。

*   Oracle 的 JRockit 有一个`-XnoOpt`选项可以禁用优化（包括这个特定的优化）。
*   Oracle/Sun 的 HotSpot 至少曾经有过`-XX:-Inline`（不确定它是否仍然存在或做任何事情）。

但是，这意味着当激活内联时，您无法准确测量生产中的内容。不过，对于检查您的代码可能很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:50:41.713

EJB 容器在调用接口方法时应用拦截器 - 您的私有方法对它是不可见的。那么使用分析工具呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T15:54:09.910

那么AFAIK私有方法可以在JVM lesiure（甚至在编译时）内联，因此它们不能被分析，因为它们可能不存在于字节码中。

我想你可以标记你的方法`protected`——这样它们即使在生产中也不会被内联，然后对其进行分析。

如果您想分析您的测试实例，您可以尝试使用 visualvm --- visualvm 是一个非常好的选择。VisualVM 是一个图形工具，用于分析 JVM 实例，它执行所有需要的检测。[http://visualvm.java.net/](http://visualvm.java.net/)。此外，它是大多数 jdk 发行版中的标准工具。

# jquery - jQuery 似乎不会自动解析 JSON

> ID：11018312
> 
> 赞同：5
> 
> 时间：2012-06-13T15:30:22.697
> 
> 标签：jquery, json, string, parsing

这是我的客户端 jQuery 代码：

```
$.ajaxSetup ({
   contentType: "application/json",
   datatype: 'json'
});

$.ajax({
   type: "POST",
   url: "http://localhost:1234/path",
   data: JSON.stringify(myData),
   success: function(aString){
      alert(aString);
   },
   error: function(errorData){
      alert(errorData);
   }
}); 
```

这是服务器发出的数据：

```
200
Content-Type: application/json

"aStringsData" 
```

在警报中显示“aStringData”的引号。但是，由于我希望从数据类型“json”中发生的自动 JSON.parse，我希望引号会被删除。我错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T15:33:21.940

参数实际上是`dataType`，而不是`datatype`（JavaScript 区分大小写）。

您可以尝试：

```
dataType: 'json' // not datatype 
```

在你的`ajaxSetup`;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:33:25.450

你的回应：

```
"aStringsData" 
```

我相信是无效的`JSON`，因为 JSON 应该以 a 开头`{`，对吧？

你可能是说

```
{
 "string": "data"
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T15:35:00.927

你可以尝试使用这样的东西：

```
eval(aString) 
```

# database - Opa : 向数据库中插入新元素

> ID：11018313
> 
> 赞同：1
> 
> 时间：2012-06-13T15:30:23.337
> 
> 标签：database, opa

我在 OPA 工作了几天，我真的开始喜欢它了。我正在参加计算机科学的第一年，第二年我们开设了一些数据库课程-我对数据库的了解很少来自 php，我将 MySQL 与 php 和 SQLlite 与 c++ 一起使用。但是这种类型的数据库与我所看到的有点不同。

我已按照 OPA [http://doc.opalang.org/manual/Hello--database](http://doc.opalang.org/manual/Hello--database)中有关数据库的指南进行操作，但我有一个问题：

在指南中，我们声明了一个新数据库：

```
type user_status = {regular} or {premium} or {admin}
type user_id = int
type user = { user_id id, string name, int age, user_status status }
database users {
   user /all[{id}]
   /all[_]/status = { regular }
} 
```

我们学习了如何读取这个数据库并使用 Maps 对这个数据库进行一些查询，但是如何添加一个新元素呢？我测试了一下：

```
/users/all[{id:0}]/name<-getusername; 
```

但据我所知，id 应该是自动递增的。

谢谢大家的帮助=D我真的很想进入OPA，我所做的那一点真的令人印象深刻！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:03:37.160

## mongoDB 和自动增量

出于可扩展性的原因，使用 mongoDB（默认的 Opa 数据库）没有自动增量（就像在 SQL 中一样）。但是如果你真的需要一个，你可以使用一个计数器来自己创建这个功能：

```
database users {
   user /all[{id}]
   int  /fresh_key
   /all[_]/status = { regular }
} 
```

并在每次使用时递增密钥：`/users/fresh_key++`

## 随机新鲜钥匙

您还可以生成随机 id，例如使用类似`Random.string(6)` 阅读此线程以了解有关此技术的更多信息：http: [//lists.owasp.org/pipermail/opa/2012-April/001052.html](http://lists.owasp.org/pipermail/opa/2012-April/001052.html)

## 用户定义的唯一键

但是如果你在和用户打交道，也许你已经有了一个唯一键：使用“登录”或“电子邮件”作为唯一键怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T22:20:11.907

您还可以使用`Date.in_milliseconds(Date.now_gmt())`更独特的 id，可能与用户 id 连接

# c++ - Windows 线程：并行合并排序

> ID：11018320
> 
> 赞同：0
> 
> 时间：2012-06-13T15:30:34.873
> 
> 标签：c++, windows, algorithm, parallel-processing, mergesort

我有一个非常简单的问题，我只是无法在网上找到答案。我做了一个合并排序功能（我肯定效率低下），但我在这里询问线程。我正在使用 Windows 的 CreateThread 函数来生成线程来对给定数组的间隔进行排序。完成所有线程后，我会将这些段合并在一起以获得最终结果。我还没有实现最终的合并，因为我得到了奇怪的错误，我确定这是线程中的一个愚蠢的错误。如果您可以查看 paraMSort，我将发布我的代码。我将发布整个 MergeSort.h 文件，以便您也可以查看辅助函数。有时代码会完美地编译和运行。有时控制台会突然关闭而没有错误/异常。不应该存在互斥锁问题，因为我在数组的不同段上进行操作（完全不同的内存位置）。有人看出什么不对了吗？非常感谢。

PS。是 Windows CreateThread 的内核级别吗？换句话说，如果我在双核计算机上创建 2 个线程，它们可以同时在不同的内核上运行吗？我想是的，因为在这台计算机上，我可以用 2 个线程在 1/2 的时间内完成相同的工作（使用另一个测试示例）。

聚苯乙烯。我还看到了一些使用 Boost.Thread 解决的并行性答案。我应该只使用 boost 线程而不是 windows 线程吗？我没有使用 Boost 的经验。

```
#include "Windows.h"
#include <iostream>
using namespace std;

void insert_sort(int* A, int sA, int eA, int* B, int sB, int eB)
{
   int value;
   int iterator;

   for(int i = sA + 1; i < eA; i++)
   {
       value = A[i]; // Grab the next value in the array
       iterator = i - 1; 
       // Move this value left up the list until its in the right spot
       while(iterator >= sA && value < A[iterator])
          A[iterator + 1] = A[iterator--];
       A[iterator + 1] = value; // Put value in its correct spot
   }
   for(int i = sA; i < eB; i++) 
   {
       B[i] = A[i]; // Put results in B
   }
}

void merge_func(int* a, int sa, int ea, int* b, int sb, int eb, int* c, int sc)
{
    int i = sa, j = sb, k = sc;

    while(i < ea && j < eb)
       c[k++] = a[i] < b[j] ? a[i++] : b[j++];
    while(i < ea)
      c[k++] = a[i++];
    while(j < eb)
      c[k++] = b[j++];
}

void msort_big(int* a, int* b, int s, int e, bool inA)
{
    if(e-s < 4)
    {
        insert_sort(a, s, e, b, s, e); 
        return; // We sorted (A,s,e) into (B,s,e). 
    }
    int m = (s + e)/2;
    msort_big(a, b, s, m, !inA);
    msort_big(a, b, m, e, !inA);

    // If we want to merge in A, do it. Otherwise, merge in B
    inA ? merge_func(b, s, m, b, m, e, a, s) :  merge_func(a, s, m, a, m, e, b, s);
}

void msort(int* toBeSorted, int s, int e)
// Sorts toBeSorted from [s, e+1), so just enter [s, e] and
//   the call to msort_big adds one. 
{
    int* b = new int[e - s + 1];
    msort_big(toBeSorted, b, s, e+1, true);
    delete [] b;
}

template <class T>
struct SortData_Send
{
   T* data;
   int start;
   int end;
};

DWORD WINAPI msort_para_callback(LPVOID lpParam)
{
   SortData_Send<int> dat = *(SortData_Send<int>*)lpParam;
   msort(dat.data, dat.start, dat.end);
   cout << "done! " << endl;
}

int ceiling_func(double num)
{
   int temp = (int)num;

   if(num > (double)temp)
   {
      return temp + 1;
   }
   else
   {
       return temp;
   }
}

void paraMSort(int* toBeSorted, int s, int e, int numThreads)
{
   HANDLE threads[numThreads];
   DWORD threadIDs[numThreads];
   SortData_Send<int>* sent[numThreads];

   for(int i = 0; i < numThreads; i++)
   {
      // So for each thread, make an interval and pass the pointer to the array of ints.
      //   So for numThreads = 3 and array size of 0 to 99 (100), we have 0-32, 33-65, 66-100\. 
      //   100 because sort function takes [start, end). 
      sent[i] = new SortData_Send<int>;
      sent[i]->data = toBeSorted;
      sent[i]->start = s + ceiling_func(double(i)*(double)e/double(numThreads));
      sent[i]->end = ceiling_func(double(i+1)*double(e)/double(numThreads)) + ((i == numThreads-1) ? 1 : -1);
      threads[i] = CreateThread(NULL, 0, msort_para_callback, sent[i], 0, &threadIDs[i]);
   }
   WaitForMultipleObjects(numThreads, threads, true, INFINITE);
   cout << "Done waiting!" <<endl;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:56:34.060

假设's'是你的起点，'e'是你线程的终点不应该你的代码是这样的

```
sent[i]->start = s + ceiling_func(double(i)*(double)(e-s)/double(numThreads));
sent[i]->end = (i == numThreads-1) ? e : (s - 1 + ceiling_func(double(i+1)*(double)(e-s)/double(numThreads))); 
```

这是为了以防您的函数**void paraMSort(int* toBeSorted, int s, int e, int numThreads)**被调用的 's' 值不等于 0？这可能会导致您读取错误的内存部分。

# java - 创建列表 来自迭代器的实例

> ID：11018325
> 
> 赞同：10
> 
> 时间：2012-06-13T15:30:57.870
> 
> 标签：java, collections, iterator

任何人都知道是否有从 Iterator 实例创建 List 的标准方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T15:36:14.887

我倾向于使用[Guava`Lists.newArrayList(Iterator)`](https://google.github.io/guava/releases/22.0/api/docs/com/google/common/collect/Lists.html#newArrayList-java.util.Iterator-)，因为我通常将 Guava 作为依赖项，并且它已经存在。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T15:33:43.287

使用`Iterator`获取每个元素并将其添加到`List`.

```
List<String> list = new LinkedList<String>();

while(iter.hasNext()) { // iter is of type Iterator<String>
    list.add(iter.next());
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-06T16:01:38.993

我有这个需求，作为 Apache Commons 的用户，这就是我所做的：

```
IteratorUtils.toList(iterator); 
```

Javadoc在这里：[https://commons.apache.org/proper/commons-collections/javadocs/api-3.2.2/org/apache/commons/collections/IteratorUtils.html#toList(java.util.Iterator)](https://commons.apache.org/proper/commons-collections/javadocs/api-3.2.2/org/apache/commons/collections/IteratorUtils.html#toList(java.util.Iterator))

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-04-09T14:35:58.717

在 Java 8 中，您可以使用这些方式（虽然足够详细）：

```
Iterator<String> iterator = ...;
List<String> list = StreamSupport.stream(Spliterators.spliteratorUnknownSize(iterator, Spliterator.ORDERED), false)
                                 .collect(Collectors.toList()); 
```

或者

```
Iterator<String> iterator = ...;
List<String> list = new ArrayList<>(); // or LinkedList() if more relevant (adding being faster for LinkedList)
iterator.forEachRemaining(list::add); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T15:35:40.893

尝试以下操作：

```
public T List<T> listFromIterator(Iterator<T> iterator) {

List<T> result = new LinkedList<T>();
  while(iterator.hasNext()) {
    result.add(iterator.next());
  }

} 
```

需要注意的一点是，如果迭代器不在结构的开头，则无法检索先前的元素。

如果您有迭代器来自的集合，则可以使用带有集合的构造函数来创建列表。例如：`LinkedList`构造函数：

```
LinkedList(Collection<? extends E> c) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T15:36:06.230

这是我从 List 转换为 Iterator 的方式，反之亦然。

```
ArrayList arrayList = new ArrayList(); 
// add elements to the array list 
arrayList.add("C"); 
arrayList.add("A"); 
arrayList.add("E"); 
arrayList.add("B"); 
arrayList.add("D"); 
arrayList.add("F"); 

// use iterator to display contents of arrayList
System.out.print("Original contents of arrayList: "); 
Iterator iterator = arrayList.iterator(); 
ArrayList arrayList2 = new ArrayList();

while(iterator.hasNext()) {

    Object element = iterator.next(); 
    arrayList2.add(element);
    System.out.print(element + " ");

} 
```

# knockout.js - 淘汰赛 simplegrid 中的复选框

> ID：11018327
> 
> 赞同：1
> 
> 时间：2012-06-13T15:31:03.023
> 
> 标签：knockout.js, knockout-2.0

我正在使用淘汰赛 simplegrid。绑定到它的 json 对象中的一个属性是布尔值。它当前在网格中显示为“真”或“假”。

我需要的是一个允许用户单击的复选框（这反过来会向服务器触发命令）。

这可能与 SimpleGrid 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:22:54.897

如果您需要使用复选框绑定到选中的属性

```
<input type="checkbox" data-bind="checked: yourproperty" name="yourproperty"> 
```

要将函数调用回服务器，您可能需要将 ajax 函数绑定到复选框的更改

例如

```
<input type="checkbox" data-bind="checked: yourproperty, event:{change: yourfunction}" name="yourproperty"> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:34:41.863

现在我有（仍在学习淘汰赛绑定的工作原理）：

```
 <tbody data-bind=\"foreach: itemsOnCurrentPage\">\
                       <tr data-bind=\"foreach: $parent.columns\">\
                            <!-- ko if: ($parent[rowText] == 'false' || $parent[rowText] == 'true') -->\
                              <td><input type=\"checkbox\" data-bind=\"checked: $parent[rowText] == 'false' ? false : true\"/></td>\
                            <!-- /ko -->\
                            <!-- ko ifnot: ($parent[rowText] == 'false' || $parent[rowText] == 'true') -->\
                              <td data-bind=\"text: typeof rowText == 'function' ? rowText($parent) : $parent[rowText] \"></td>\
                            <!-- /ko -->\
                        </tr>\
                    </tbody>\ 
```

# java - 运行应用时出现 AdMob 错误

> ID：11018329
> 
> 赞同：0
> 
> 时间：2012-06-13T15:31:03.167
> 
> 标签：java, include, admob, manifest, adview

这是一个java代码：

```
 package h.a.s.i;

  import com.google.ads.AdRequest;
  import com.google.ads.AdSize;
  import com.google.ads.AdView;
  //and next

  public class about extends Activity {
  private static final String MY_BANNER_UNIT_ID = "xxx";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.about);

    LinearLayout layout = (LinearLayout)findViewById(R.id.admob);

    AdView adView = new AdView(this, AdSize.BANNER, MY_BANNER_UNIT_ID);

    layout.addView(adView);

    AdRequest request = new AdRequest();

    adView.loadAd(request);             

    final Button back = (Button) findViewById(R.id.back);
     back.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            finish();
        }

     }); }

 } 
```

这个XML：

```
 <LinearLayout
    android:layout_width="250dp"
    android:layout_height="70dp"
    android:name="@+id/admob"
    android:layout_alignParentTop="true" >
   </LinearLayout> 
```

和清单：

```
 <?xml version="1.0" encoding="utf-8"?>
      <manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="h.a.s.i"
      android:versionCode="1"
      android:versionName="1.0" >
      <application
     android:icon="@drawable/ic_launcher"
     android:label="@string/app_name" >
     <activity
        android:name=".main"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar"
        android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
     </activity>
     <activity android:name=".cpu" 
            android:label="CPU"
            android:screenOrientation="portrait"/>
     <activity android:name=".options" 
            android:label="Options"
            android:screenOrientation="portrait"/>
      <activity android:name=".battery" 
            android:label="Baterry"
            android:screenOrientation="portrait"/>
     <activity android:name=".about" 
            android:label="About"
            android:screenOrientation="portrait"/>
      <activity android:name=".system" 
                android:label="Systém"
            android:screenOrientation="portrait"/>
     <activity android:name="h.a.s.i.memory" 
            android:label="Task Killer"
            android:screenOrientation="portrait"/>
     <activity android:name="com.google.ads.AdActivity"
          android:configChanges="orientation|keyboard|keyboardHidden"/>

    </application>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
    <uses-sdk android:minSdkVersion="7" />
    </manifest> 
```

我为官方指南包含的 AdMob 库。

和 Eclipse LogCat：

```
 06-13 15:06:49.491: E/dalvikvm(457): Could not find class 'com.google.ads.AdView',                    referenced from method h.a.s.i.about.onCreate 
```

然后看到 OnCreate() 的下降

在模拟器中打开关于页面（关于类）时，应用程序崩溃了。并且在 Eclipse 中不会在错误日志或其他任何地方出现任何错误。感谢您的每一次帮助。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T07:48:07.577

**要修复错误，请执行以下操作：**

1-从标准Ja​​va构建路径中删除库：右键单击项目名称>属性> Java构建路径>选项卡库>删除**除“Android XX”（在我的情况下为2.2）*和*“Android Dependencies”之外的所有内容</强>**

**2-将库文件夹重命名（如果不存在，则创建它）从“lib”到“<strong>libs** ”并在其中找到jar文件通过这样做，文件夹“libs”中的所有库都可以通过以下方式找到Android 插件并添加到项目的“Android Dependencies”项中

3-清理项目

此外，您可能需要在 AndroidManifest.xml 中声明 com.google.ads.AdActivity。

```
<activity android:name="com.google.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

*请享用 ：）*

# c# - 如果使用子外键计算主键，则查找时出现 InvalidOperationException

> ID：11018330
> 
> 赞同：0
> 
> 时间：2012-06-13T15:31:03.563
> 
> 标签：c#, .net, sql, entity-framework, orm

[*将 Code First DbContext 与 Entity Framework 5.0 RC 一起使用*]

### 具有从其导航属性派生的 Id 的实体

```
public class Domain
{
    private string _id;
    private SecondLevelDomain _secondLevelDomain;
    private TopLevelDomain _topLevelDomain;

    public string Id
    {
        get
        {
            // Trigger setter synthesis
            Id = null;
            return _id;
        }
        set
        {
            string parentId = String.Empty;
            if (Sld.Id != null)
                output += Sld.Id + " ";
            if (Tld.Id != null)
                output += Tld.Id;
            _id = parentId;
        }
    }

    public string SecondLevelDomainId
    {
        get;
        set;
    }

    [ForeignKey("SecondLevelDomainId")]
    public SecondLevelDomain Sld
    {
        get 
        { 
            return _secondLevelDomain 
            ?? (_secondLevelDomain = new SecondLevelDomain());
        }
        set 
        { 
            Debug.WriteLine("Foreign Setter Not Called Before Its Too Late");
            _secondLevelDomain = value;
        }
    }

    public string TopLevelDomainId
    {
        get;
        set;
    }

    [ForeignKey("TopLevelDomainId")]
    public TopLevelDomain Tld
    {
        get 
        { 
             return _topLevelDomain 
             ?? (_topLevelDomain = new TopLevelDomain()); 
        }
        set { _topLevelDomain = value; }
    }
} 
```

### 从数据库创建域时父 ID 评估为空

```
public CheckDomainInDatabase(string domainId) {
    var domainFromDatabase = Repositor.Domains.Find(domainId);
} 
```

*   `InvalidOperationException: The value of a property that is part of an object's key does not match the corresponding property value stored in the ObjectContext. This can occur if properties that are part of the key return inconsistent or incorrect values or if DetectChanges is not called after changes are made to a property that is part of the key.`

*我需要能够使用聚合标识符检索这些域，因为我需要修改它们的一些其他属性（未显示） - 但这个错误让我偏离了轨道......*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:55:59.883

您不能更改现有附加实体的键。一旦实体被插入，它的密钥就固定了——它永远不会改变。如果您需要更改附加实体的键，您必须创建该实体的克隆并将其作为新实体插入。

实体框架中实体的主要规则是它必须是唯一可识别的，并且这种识别不能改变。您的类不是实体框架的有效实体。

顺便提一句。您创建的内容与使用`Sld.Id`和`Tld.Id`作为实体的复合主键相同，这对于检查您的实体模型或数据库模式的每个人来说至少是清楚的。

# wpf - 从 ViewModel 中设置的属性中取消用户编辑？

> ID：11018331
> 
> 赞同：1
> 
> 时间：2012-06-13T15:31:03.930
> 
> 标签：wpf, mvvm

我敢肯定，这是一个新手问题，但我找不到答案...
我有一个绑定到 ViewModel 属性的控件（在本例中为组合框）：

```
<ComboBox 
      x:Name="methodTypeCmb"
      Grid.Row="0" Grid.Column="2" 
      ItemsSource="{Binding Path=AllNames, Mode=OneTime}"
      SelectedItem="{Binding Path=Name, ValidatesOnDataErrors=True, Mode=TwoWay}"
      Validation.ErrorTemplate="{x:Null}"
      /> 
```

在我的 ViewModel 中，当此属性更改时，我想要求用户确认更改。
如果用户单击“否”，我想取消更改。
但是，我一定做错了什么，因为当更改被取消时，我的视图不会恢复到以前的值。

ViewModel 的属性：

```
public string Name
{
    get { return m_model.Name; }
    set
    {
        if (MessageBox.Show("Are you absolutely sure?","Change ",MessageBoxButton.YesNo) == MessageBoxResult.Yes)
        {
            // change name
        }
        base.OnPropertyChanged("Name");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:04:10.590

因为您是在文本更改事件的范围内取消，所以 wpf 会忽略属性更改事件。您必须从调度程序调用它

```
 Dispatcher.CurrentDispatcher.BeginInvoke((ThreadStart)delegate
        {
            OnPropertyChanged("Name");
        }); 
```

您应该保留现有的“OnPropertyChanged("Name");" 在函数的底部，只需将上面的行添加到您要取消的块中

编辑：以下代码有效，我已经对其进行了测试

```
 public string Newtext
        {
            get
            {
                return this._newtext;
            }
            set
            {
                if (MessageBox.Show("Apply?", "", MessageBoxButton.YesNo) == MessageBoxResult.Yes)
                {
                    this._newtext = value;
                    this.OnPropertyChanged("Newtext"); //Ignored
                }
                else
                {
                    Dispatcher.CurrentDispatcher.Invoke((ThreadStart)delegate
                    {
                        OnPropertyChanged("Newtext");
                    });
                }
            }
        } 
```

# ruby-on-rails - 在用户登录失败后设计重定向

> ID：11018335
> 
> 赞同：0
> 
> 时间：2012-06-13T15:31:24.327
> 
> 标签：ruby-on-rails, session, login, devise, overriding

**我知道有一个关于它的 wiki 页面**，但由于我对 Rails 非常陌生，我在理解该页面时遇到了很多困难。

我必须为我的用户覆盖注册控制器。当用户登录失败时，我希望他被重定向到我的自定义登录页面。但是应用程序将他发送到 gem 内的登录页面。

我怎样才能做到这一点？**我应该把这门课放在哪里，我该如何改变它？** 我有多个模型，每个模型都有不同的登录页面。**如何设置每个模型的范围？**

```
class CustomFailure < Devise::FailureApp

  def redirect_url

    #return super unless [:worker, :employer, :user].include?(scope) #make it specific to a scope
    new_user_session_url(:subdomain => 'secure')
  end

 # You need to override respond to eliminate recall
 def respond
   if http_auth?
     http_auth
   else
     redirect
   end
 end 
```

结尾

设计是一个强大的宝石，但一些 wiki 页面不认为可以有很多新程序员

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:22:35.413

我直接在我的身份验证失败覆盖类中`/lib`。

这是一个简单的版本，展示了如何为用户处理不同的范围。

```
class MyAuthFailure < Devise::FailureApp

  # add different cases here for diff scopes.
  def redirect_url 
    if warden_options[:scope] == :user 
      root_path 
    elsif warden_options[:scope] == :admin 
      admin_root_path 
    end 
  end 

  # You need to override respond to eliminate recall
  def respond
    if http_auth?
      http_auth
    else
      redirect
    end
  end  
end 
```

你会把这门课放进去`/lib/my_auth_failure.rb`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T15:16:20.297

此解决方案效果很好，但如果您不执行本文建议的操作，您将遇到测试问题：

[https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-when-the-user-can-not-be-authenticated](https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-when-the-user-can-not-be-authenticated)

您的测试仍将使用默认重定向。

例如：

```
current_path.should == signin_path 
```

会失败，因为当前路径实际上会是`users/sign_in`什么。

# prolog - Prolog 从 atom 中删除字符空间以使用 term_to_atom

> ID：11018338
> 
> 赞同：1
> 
> 时间：2012-06-13T15:31:35.420
> 
> 标签：prolog, swi-prolog

在我的程序的某个时刻，我有一个由以前也是原子的原子形成的原子，我想删除其中的字符空间，以便以后可以毫无问题地使用：

`term_to_atom(Result, 'second2(second2),region(ºMediterranean Sea),months(no_value),third3(third3),recog(ºNew Type),distance(no_value)').`

并获得这个

`Result = (second2(second2), region(ºMediterraneanSea), months(no_value), third3(third3), recog(ºNewType), distance(no_value))`

或者原版也可以

`Result = (second2(second2), region(ºMediterranean Sea), months(no_value), third3(third3), recog(ºNew Type), distance(no_value))`

因为如果我不删除那些字符空间，那么`term_to_atom`就会抱怨它。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:09:20.137

您可以使用此过程：

```
strip_spaces(S, NoSpaces) :-
   atom_codes(S, Cs), delete(Cs, 0' , X), atom_codes(NoSpaces, X). 
```

但 delete/3 已被弃用。另一种可能是

```
strip_spaces(S, NoSpaces) :-
    atomic_list_concat(L, ' ', S),
    atomic_list_concat(L, NoSpaces). 
```

这些中的任何一个都会“吃掉”每个空间，但是根据您的问题描述，在您与 gusbro 交换的评论中，在我看来这不是正确的方法。更改文字似乎在 DB 界面可能会在以后遇到麻烦。

可以使用 DCG 将输入解析为列表，而不是连词：

```
:- [library(http/dcg_basics)].

parse_result(X, R) :-
    atom_codes(X, Cs),
    phrase(parse_list(R), Cs).
parse_list([T|Ts]) -->
    parse_term(T), (",", parse_list(Ts) ; {Ts=[]}).
parse_term(T) -->
    string(F), "(", string(Arg), ")",
    {atom_codes(Fa,F), atom_codes(Arga,Arg), T =.. [Fa,Arga]}. 
```

# android - 如何保存在 android ImageView 中显示的图像？

> ID：11018345
> 
> 赞同：2
> 
> 时间：2012-06-13T15:31:44.350
> 
> 标签：android

我的要求是，

1.  为可绘制文件夹加载图像，然后在图像周围添加圆角。
2.  在图像周围填充白色/绿色描边。

在这里我完成了它们，这里我的问题是，当我存储显示在图像视图中的图像时，它没有存储。

对于圆角，我使用了以下代码。

```
 private BitmapDrawable roundCornered(BitmapDrawable scaledBitmap, int i) {

        Bitmap bitmap = scaledBitmap.getBitmap();

        result = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(),
                Bitmap.Config.ARGB_8888);
        canvas = new Canvas(result);

        color = 0xff424242;
        paint = new Paint();
        rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
        rectF = new RectF(rect);
        roundPx = i;
        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);

               //Add Stroke code Snippet here

        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);
        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);
        BitmapDrawable finalresult = new BitmapDrawable(result);
        saveImage_Rotate_white(finalresult.getBitmap());
        return finalresult;
    } 
```

在我的**main.xml**中：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/finalLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/black"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:background="@drawable/roundcorner"
        android:src="@drawable/test" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="20dp"
        android:text="Click here to Rotate" />

</RelativeLayout> 
```

要将 ImageView 设为圆角边缘，

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <stroke
        android:width="6dp"
        android:color="#FFFFFF" />

    <padding
        android:bottom="3dp"
        android:left="3dp"
        android:right="3dp"
        android:top="3dp" />

    <corners android:radius="12dp" />

</shape> 
```

代码的最终结果如下所示

![在此处输入图像描述](../Images/7bafef44dd5d730454bc9c2d8a4ff54a.png)

在这里，我必须将此图像保存在我的 SdCard 中。我怎样才能做到这一点。`roundCornered()`我尝试在方法中使用下面的代码片段而不是 xml 。这也行不通。

```
 // for stroke

     final Rect rect1 = new Rect((rect.left - 10), (rect.top - 10),
     (rect.right + 10), (rect.bottom + 10));
     final RectF rectF1 = new RectF(rect1);

     Paint p = new Paint();
     p.setStrokeWidth(1.0f);
     p.setColor(Color.GREEN);
     p.setStyle(Style.STROKE);
     paint.setXfermode(new PorterDuffXfermode(Mode.SRC_OUT));
     canvas.drawRoundRect(rectF1, 12, 12, p); 
```

我的整个活动是，

```
public class BorderDraw extends Activity {
    ImageView rec_image;
    String rec_path;
    RelativeLayout mLayout;
    private Bitmap result;
    private int color;
    private Paint paint;
    private Rect rect;
    private RectF rectF;
    private Canvas canvas;
    private float roundPx;
    RelativeLayout innerLayout;
    static File rotated_File, bordered_file;
    Button b1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        b1 = (Button) findViewById(R.id.button1);
        b1.setVisibility(View.GONE);
        mLayout = (RelativeLayout) findViewById(R.id.finalLayout);
        rec_image = (ImageView) findViewById(R.id.imageView1);
        rec_path = getIntent().getExtras().getString("image_file");
        Log.v("Image Path", rec_path);
        // rec_image.setDrawingCacheEnabled(true);
        String fname = "RoundCorner.jpg";
        rotated_File = new File("/sdcard/" + fname);
        bordered_file = new File("/sdcard/cornered_image.png");
        BitmapDrawable scaledBitmap = resizeBitmap(rec_path, 200, 200,
                rec_image);

        BitmapDrawable cornered_bitmap = roundCornered(scaledBitmap, 12);

        // saveImage_Rotate_white(cornered_bitmap.getBitmap());
        rec_image.setImageDrawable(cornered_bitmap);

        System.out.println("ImageView Height" + rec_image.getHeight());
        System.out.println("ImageView Width" + rec_image.getWidth());

    }

    private BitmapDrawable roundCornered(BitmapDrawable scaledBitmap, int i) {

        Bitmap bitmap = scaledBitmap.getBitmap();

        result = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(),
                Bitmap.Config.ARGB_8888);
        canvas = new Canvas(result);

        color = 0xff424242;
        paint = new Paint();
        rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
        rectF = new RectF(rect);
        roundPx = i;
        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);

        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);

        BitmapDrawable finalresult = new BitmapDrawable(result);
        saveImage_Rotate_white(finalresult.getBitmap());
        return finalresult;
    }

    private void saveImage_Rotate_white(Bitmap bitmap) {
        rec_image.setImageBitmap(bitmap);
        final Bitmap myRoundedImage = rec_image.getDrawingCache();

        if (bordered_file.exists())
            bordered_file.delete();
        try {
            FileOutputStream out = new FileOutputStream(bordered_file);
            myRoundedImage.compress(Bitmap.CompressFormat.PNG, 90, out);
            out.flush();
            out.close();

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    private BitmapDrawable resizeBitmap(String rec_path2, int wantedWidth,
            int wantedHeight, ImageView view) {
        // TODO Auto-generated method stub
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inTempStorage = new byte[16 * 1024];

        Bitmap rec_bitmap = BitmapFactory.decodeFile(rec_path2, options);

        int width = rec_bitmap.getWidth();
        int height = rec_bitmap.getHeight();
        float xScale = ((float) wantedWidth) / width;
        float yScale = ((float) wantedHeight) / height;
        float scale = (xScale <= yScale) ? xScale : yScale;
        Matrix matrix = new Matrix();
        matrix.postScale(scale, scale);
        Bitmap scaledBitmap = Bitmap.createBitmap(rec_bitmap, 0, 0, width,
                height, matrix, true);
        BitmapDrawable finalImage = new BitmapDrawable(scaledBitmap);
        width = scaledBitmap.getWidth();
        height = scaledBitmap.getHeight();

        return finalImage;

    }

    static void saveImage_Rotate(Bitmap dest2) {

        if (rotated_File.exists())
            rotated_File.delete();
        try {
            FileOutputStream out = new FileOutputStream(rotated_File);
            dest2.compress(Bitmap.CompressFormat.PNG, 100, out);
            out.flush();
            out.close();

        } catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:18:16.233

您可以实现的一件事如下：在您的`Activity`,`Fragment`或任何您正在膨胀的地方为您`XML`启用缓存，`View`如下所示：

```
ImageView myImageView= (ImageView)findViewById(R.id.imageView1);
myImageView.setDrawingCacheEnabled(true); 
```

每当您想检索位图时，您只需像这样调用获取绘图缓存：

```
final Bitmap myRoundedImage = myImageView.getDrawingCache(); 
```

或者，您可以这样做：

```
final Bitmap myRoundedImage = Bitmap.createBitmap( 
    myImageView.getWidth(), myImageView.getHeight(), Bitmap.Config.ARGB_8888 ); 
final Canvas canvas = new Canvas( myRoundedImage ); 
myImageView.draw( canvas ); 
```

一旦你有了你的位图，你所要做的就是把它保存到 SD 卡上，比如：

```
try {
       FileOutputStream out = new FileOutputStream(filename);
       myRoundedImage.compress(Bitmap.CompressFormat.PNG, 90, out);
} catch (Exception e) {
       e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-04T15:50:37.027

```
Bitmap b = Bitmap.createBitmap(iv_cover.getWidth(), iv_cover.getHeight(),Bitmap.Config.ARGB_8888);
                    Canvas canvas = new Canvas(b);
                    iv_cover.draw(canvas);
                    OutputStream fOut = null;
                    try {
                        fOut = new FileOutputStream(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).getAbsolutePath()+ File.separator + "image.jpg");
                    } catch (FileNotFoundException e) {
                        e.printStackTrace();
                    }
                    b.compress(Bitmap.CompressFormat.JPEG, 80, fOut); 
```

# php - Facebook通过应用程序发布到其他人的墙上

> ID：11018346
> 
> 赞同：0
> 
> 时间：2012-06-13T15:31:48.553
> 
> 标签：php, facebook-graph-api, facebook-oauth, facebook-wall

我在我的网站上使用 PHP 创建了一个 Facebook 应用程序。要在我的网站上使用此应用程序，用户必须使用 Facebook 身份验证登录。

这个应用程序基本上允许用户在他的墙上发布默认评论。使用我的 facebook 个人资料帐户可以正常工作，但是当我让我的朋友使用我的网站时，他收到以下错误 - 'Uncaught OAuthException: (#200) The user has not authorized the application to perform this action throw in'

到目前为止，我发现的问题的唯一解决方案是输入以下 URL -

```
https://www.facebook.com/login.php?api_key=API_KEY&cancel_url=http://www.magimagi.com&next=http://magimagi.com/login/uploadtopage2.php&fbconnect=1&return_session=1&session_version=3&v=1.0&display=page&req_perms=user_about_me,user_birthday,publish_stream,offline_access 
```

我不想在我的应用程序上创建一个链接供用户单击它 - 相反，我希望它集成到我网站上已经存在的 PHP 代码中。

这是我拥有的示例 PHP 代码

```
/ Get User ID
$user = $facebook->getUser();

if ($user) {
try {
$user_profile = $facebook->api('/me');
} catch (FacebookApiException $e) {
error_log($e);
$user = null;
}
}
if ($user) {
$logoutUrl = $facebook->getLogoutUrl();
} else {
$loginUrl = $facebook->getLoginUrl(   array(
'scope' => 'publish_stream'
));
} 
```

这是 HTML

```
<form id="selectFriend" name="selectFriend" method="post">
<label for="Friend">Friend:</label>
<select id="friend" name="friend">
<?php 
foreach($user_friends['data'] as $f){
echo '<option value="'.$f['id'].'">'.$f['name'] .'</option>';
} 
?>
</select>
<label for="URL">URL:</label>
<input id="link" name="link">
<input id="message" name="message">
<input type="submit" name="submit" id="submit" value="Send!"> 
```

我阅读了几乎所有的文档等等......但不幸的是我没有管理。

我想知道为什么使用我的个人资料可以工作，而不能在其他人的个人资料上工作。

我还是一个初学者，所以请不要侮辱你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:37:16.183

据我所知，您的代码已经过时了-您在调用 Auth Dialog 时使用的参数（特别`req_perms`是）已于 2011 年 10 月弃用-重定向到 auth 对话框的当前（手动）方法是：

```
https://www.facebook.com/dialog/oauth?
    client_id=YOUR_APP_ID
   &redirect_uri=YOUR_REDIRECT_URI
   &scope=COMMA_SEPARATED_LIST_OF_PERMISSION_NAMES
   &state=SOME_ARBITRARY_BUT_UNIQUE_STRING 
```

PHP SDK 的 getLoginUrl() 方法会将用户发送到那里，当您的代码处理`code`返回的内容时，它将获得一个`access_token`可用于代表用户进行调用的

有关完整的服务器端流程，请参阅[https://developers.facebook.com/docs/authentication/server-side/](https://developers.facebook.com/docs/authentication/server-side/)

# visual-studio-2010 - 使用 VS2010 部署功能在 IIS 7 中启用 32 位应用程序

> ID：11018350
> 
> 赞同：2
> 
> 时间：2012-06-13T15:32:03.150
> 
> 标签：visual-studio-2010, iis-7, msdeploy, web-deployment

我想将 WCF 服务 (.net 4.0) 部署到 IIS 7 并为此使用 Visual Studio 2010 的内置部署功能。[在 msdn http://msdn.microsoft.com/en-us/library/dd465323.aspx](http://msdn.microsoft.com/en-us/library/dd465323.aspx)上有一篇很好的文章，但对我来说还有一件事不清楚。

我想在部署期间设置“启用 32 位应用程序”应用程序池设置，似乎在 Visual Studio 项目的打包/发布 Web 部分中有一个特殊选项可以执行此操作。那里有两个复选框，即：“包括在 IIS 中配置的所有 IIS 设置”和“包括此 Web 项目使用的应用程序池设置”。但是当我选择它们时，构建一个部署包并将其部署到不同计算机上的 IIS，然后在目标环境中未设置“启用 32 位应用程序”（WCF 服务本身已成功安装并正常工作）。

可能我遗漏了一些东西或误解了 VS2010 项目中 IIS 设置的意图。欢迎任何意见。

# c# - 当页面过期时，Asp.net c# 301 重定向

> ID：11018355
> 
> 赞同：3
> 
> 时间：2012-06-13T15:32:15.350
> 
> 标签：c#, asp.net, sql, webforms, web-config

我的数据库中有一个到期日期，我想在达到该页面的到期日期时重定向一个网页。

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:24:44.403

您可以使用页面缓存来做到这一点。我显然不熟悉您如何存储过期日期，但我假设您有 [exp_date: url]。

所以：

```
protected void Application_Start(object sender, EventArgs e)
{
Dictionary<Datetime, string> pages = Read_from_database();
Context.Cache.Insert("ExpireCache", pages, new CacheDependency(m_strPath),
    System.Web.Caching.Cache.NoAbsoluteExpiration, System.Web.Caching.Cache.NoSlidingExpiration,
    CacheItemPriority.Default);
} 
```

而在

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    if (HttpContext.Current.Request.Url.AbsolutePath == "page_expired.aspx")
    {
        return;
    }
    var cache = HttpContext.Current.Cache["ExpireCache"];
    if (cache.ContainsKey(HttpContext.Current.Request.RawUrl) &&
        cache[HttpContext.Current.Request.Url.AbsolutePath] < DateTime.Now)
    {
        HttpContext.Response.Current.Redirect("page_expired.aspx");
    }
} 
```

您还可以将 SqlDbDependency 添加到缓存中，以便在您修改数据库中的过期日期时更新它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:49:57.540

你可以`Trigger`在你的数据库上放一个。在特定时间或动作后触发，然后测试日期以确保它没有过期。

如果它是这样一个简单的代码块就可以完成这项工作。

```
 if (HttpContext.Current.Request.Url.ToString().ToLower().Contains(
          "http://mySite.com"))
          {
             HttpContext.Current.Response.Status =   "301 Moved Permanently";
             HttpContext.Current.Response.AddHeader("Location",
             Request.Url.ToString().ToLower().Replace(
                    "http://mySite.com",
                    "http://www.myNewSite.com"));
          } 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-18T10:13:39.443

您可以使用此代码永久重定向。@phadaphunk 解决方案将大写字母重定向为小写字母。

```
string authority = Request.Url.Authority;
    if (authority.IndexOf("www.") != 0)
    {
        Response.StatusCode = 301;
        Response.RedirectPermanent("http://www." + authority + Request.Url.AbsolutePath, true);

    } 
```

请注意，我认为 Response.RediectPermanent 方法仅适用于.Net 4.0，否则您应该使用 Redirect()

# java - Java/Linux 证书异常

> ID：11018356
> 
> 赞同：0
> 
> 时间：2012-06-13T15:32:15.380
> 
> 标签：java, linux

我在 Eclipse 中本地运行一个 osgi 应用程序。当我使用 Windows 进行操作时，它运行良好，这是一个服务器/客户端设置。

后来我安装了 Fedora 17 并尝试做同样的事情，服务器似乎工作正常，但是当我尝试使用客户端连接时，出现以下错误：

```
java.security.cert.certpathvalidatorexception no subject alternative dns name matching localhost found 
```

我试过用谷歌搜索这个问题，但我没有找到任何灵丹妙药。

有没有人有任何想法？

# android - 音量控制，如 Galaxy > 设置 > 声音

> ID：11018357
> 
> 赞同：0
> 
> 时间：2012-06-13T15:32:15.950
> 
> 标签：android, onclick, save, volume

我的测试应用程序有一个问题，我尝试在三星 Galaxy -> 设置 -> 声音-> 音量中创建一个视图，但不是所有音量控制器，两个按钮**OK**
**Cancel**，我只想要 Ringer音量和**保存**按钮。我是 android 新手，真的不知道为什么我下面的代码表现不好。

```
public class SaveActivity extends Activity {

    private AudioManager aManager;
    private SeekBar seekVolume;
    private Button save;
    public int main_progress;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        aManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
        Button save = (Button) findViewById(R.id.save);
        seekVolume = (SeekBar) findViewById(R.id.seekVolume);
}

    public void saveOnClickListener(View view){

            int keyCode = 0;
            KeyEvent keyEvent;
            seekVolume.setMax(aManager.getStreamMaxVolume(AudioManager.STREAM_RING));
            seekVolume.setKeyProgressIncrement(1);
            seekVolume.setProgress(aManager.getStreamVolume(AudioManager.STREAM_RING));

            seekVolume.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

                public void onStopTrackingTouch(SeekBar ringvolume) {

                }

                public void onStartTrackingTouch(SeekBar ringvolume) {

                }

                public void onProgressChanged(SeekBar ringvolume, int progress ,
                        boolean fromUser) {
                     main_progress=progress;
                     aManager.setStreamVolume(AudioManager.STREAM_VOICE_CALL, progress, AudioManager.FLAG_SHOW_UI + AudioManager.FLAG_PLAY_SOUND);
                }

            });

             aManager.setStreamVolume(AudioManager.STREAM_RING, main_progress, AudioManager.FLAG_SHOW_UI + AudioManager.FLAG_PLAY_SOUND);
            if(keyCode==KeyEvent.KEYCODE_VOLUME_DOWN || keyCode==KeyEvent.KEYCODE_VOLUME_UP){

            }else if (keyCode==KeyEvent.KEYCODE_VOLUME_DOWN || keyCode==KeyEvent.KEYCODE_VOLUME_UP){

}
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:26:10.557

在我看来，这是一个[自定义 AlertDialog](https://stackoverflow.com/questions/2795300/how-to-implement-a-custom-alertdialog-view)，其中包含一个充满 4 个[SeekBar的 LinearLayout](http://developer.android.com/reference/android/widget/SeekBar.html)

当您说您的代码“表现不佳”时，您到底是什么意思？您是否收到错误或只是意外行为，请详细说明它当前正在做什么。

# git - git push origin master上的致命错误？

> ID：11018358
> 
> 赞同：0
> 
> 时间：2012-06-13T15:32:19.723
> 
> 标签：git, github

我确实推送了原始大师，之后出现了错误：

> $ git push 起源大师
> 
> 致命： [https](https://github.com/myusername/my-first-project-test.git/info/refs) ://github.com/myusername/my-first-project-test.git/info/refs not found：你在服务器上运行了 git update-server-info 吗？

我做了：

> $ git 更新服务器信息

但这根本没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T16:20:00.250

这似乎是一个授权问题。

我建议您尝试使用 ssh 协议而不是 https：

```
git@github.com:<user>/<reponame>.git 
```

（[来源](https://github.com/KnpLabs/KnpMenuBundle/issues/87)）

另外，请确保在您的全球范围内`.gitconfig`您有

```
[http]
      sslVerify = true 
```

您可以通过发出来从命令行修复它

```
git config --global http.sslVerify true 
```

（[来源](https://stackoverflow.com/questions/3777075/https-github-access)）

# jquery - 在 Textarea 中搜索文本

> ID：11018363
> 
> 赞同：1
> 
> 时间：2012-06-13T15:32:22.457
> 
> 标签：jquery, textarea

我正在尝试编写一个脚本来搜索粘贴在文本区域中的一些文本并突出显示设置是正确还是不正确。

文本将是这样的：

```
Setting A: Yes
Setting B: No
Setting C: Yes 
```

如果“设置 A”应该是“否”，那么我需要那行突出显示红色的文本。如果它是“否”，则突出显示绿色线。其他行也一样。

我要去的地方：http: [//jsfiddle.net/Mobius1/Hw5cn/6/](http://jsfiddle.net/Mobius1/Hw5cn/6/)

**编辑：**取得了轻微的进展，但这似乎是一种非常冗长的方式：http: [//jsfiddle.net/Mobius1/Hw5cn/8/](http://jsfiddle.net/Mobius1/Hw5cn/8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:03:55.723

这会让你更接近吗？

```
var lines = $("#text").val().split("\n");

for (var i = 0; i < lines.length; i++) {

   $('#output')
       .append(
           $("<span>" + lines[i] + "</span><br />")
               .addClass(lines[i].indexOf('No') != -1 ? 'bad' : 'good')
       );
} 
```

[http://jsfiddle.net/imoda/Hw5cn/11/](http://jsfiddle.net/imoda/Hw5cn/11/)

# c# - 序列化包含数组和其他列表的列表

> ID：11018365
> 
> 赞同：0
> 
> 时间：2012-06-13T15:32:24.607
> 
> 标签：c#, arrays, class, list, serialization

我一直在尝试序列化包含数组和列表的列表。

我一直在尝试不同的事情，但无法让它发挥作用。

我收到此错误：

```
Type 'EngineTest.MapData+tileDataBackground' in Assembly 'EngineTest, Version=1.0.0.0,
   Culture=neutral, PublicKeyToken=null' is not marked as serializable. 
```

这是我试图在列表中序列化的 MapData.cs。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace EngineTest
{
[Serializable]
public class MapData
{
    public struct tileDataBackground
    {
        public int tileTextureX;
        public int tileTextureY;
    }

    public struct tileDataForeground
    {
        public int tileTextureX;
        public int tileTextureY;
    }

    public struct tileDataCollision
    {
        public bool tileCollision;
    }

    public tileDataBackground[,] tileBackground;
    public tileDataForeground[,] tileForeground;
    public tileDataCollision[,] tileCollision;

    public List<items> itemData = new List<items>();
    public List<functions> functionData = new List<functions>();
}
} 
```

这是我无法序列化它的代码（Program.mapData 是列表）：

```
 using (FileStream stream = File.Open("test.dat", FileMode.Create))
        {
            BinaryFormatter formatter = new BinaryFormatter();
            formatter.Serialize(stream, Program.mapData);
            stream.Close();
        } 
```

你能在这里指出我正确的方向吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:35:02.500

您必须将所有类和子类设为可序列化

```
[Serializable]
public class MapData
{
    [Serializable]
    public struct tileDataBackground
    {
        public int tileTextureX;
        public int tileTextureY;
    }
 ... 
```

*编辑*

* * *

正如下面的注释所述，您在所有可序列化类的字段中使用的类型必须它们本身是可序列化的。不用作类结构的一部分或在 nonSerializable 字段中使用的类型不需要是 Serializable。

# javascript - 在 googlemap 上创建多边形并使用 MVC 将结果保存到数据库

> ID：11018366
> 
> 赞同：0
> 
> 时间：2012-06-13T15:32:26.153
> 
> 标签：javascript, asp.net-mvc, google-maps

我想编写一个应用程序，让用户在 GoogleMap 上绘制一个多边形，然后让他将其保存到数据库中。

稍后当我们需要时，他应该能够从数据库中绘制地图上的多边形。

做到这一点的最佳方法是什么？

我的建议是将多边形数据保存在 js 数组中，并使用 JSON 将其发送到 mvc。这是一个好方法吗？

如何在 GoogleMap 上绘制多边形？

如何使用 JS 从客户端调用 MVC 上的控制器？

我需要一个特殊的控制器吗（接收 JSON 数据）

是否有任何示例代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:07:54.480

这是一个非常粗略的示例，说明如何允许用户绘制多边形。

```
 // declare map outside of initialize function so that drawPoints() can use it
  var map;

  // called when page is loaded
  function initialize() {

    // arbitrary point
    var myLatLng = new google.maps.LatLng(24.88484848484, -70.268858484);

    // options to init map with, again arbitrary
    var myOptions = {
      zoom: 5,
      center: myLatLng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    // get our map object
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    // array to store markers that user has drawn
    var markers = [];

    // add event listener to the map to get the click events and draw a marker
    google.maps.event.addListener(map, 'click', function(e) {

      var marker = new google.maps.Marker();

      marker.setPosition(e.latLng);
      marker.setMap(map);
      marker.setVisible(true);

      // push it to the markers array
      markers.push(marker);

      // add an event listener to each marker so that we can draw a polygon
      // once user clicks on on of the markers in the markers array, assuming
      // that they are ready to join up the polygon and have it drawn
      google.maps.event.addListener(marker, 'click', function(e) {
        drawPoints(markers);

        // empty the markers array so that the user can draw a new one, without
        // them all joining up. this is perphaps where you would want to push
        // the markers array to a database, storing the points as latitude/longitude
        // values so that they can be retrieved, put into an array, and drawn
        // as a polygon again. 
        markers = [];
      });

    });

  }

  function drawPoints(markers) {
    var poly = new google.maps.Polygon;

    var points = [];

    for (var i = 0; i < markers.length; i++) {
      points.push(markers[i].getPosition());
    }
    poly.setMap(map);
    poly.setPath(points);
    poly.setVisible(true);
  }​ 
```

[在这里](http://jsfiddle.net/fJX4x/1/)试试

[这](https://developers.google.com/maps/documentation/javascript/reference)也将非常有用。

**编辑**：我可能应该解释如何绘制多边形......

单击地图会创建一个标记。您可以根据需要创建任意数量。单击已放置的标记之一后，将在标记点之间绘制一个多边形。绘制多边形后，这些标记将不再计入绘制多边形的下一组。

# c# - 递归，返回后带有char数组的C#

> ID：11018371
> 
> 赞同：1
> 
> 时间：2012-06-13T15:32:42.407
> 
> 标签：c#, arrays, recursion, char, return

在下面的代码中，当我`Chars`在调试器中单步执行代码时检查变量时，char 数组的大小在最后一次迭代的返回行之前为 0，但在返回行之后为 1 并继续增长回原来的值尺寸。

为什么会这样？提前感谢您的帮助。

```
static void Main(string[] args)
{
    string str = "Hello";
    PrintReverse(str.ToArray()); // prints "olleH"
    Console.Read();
}

static void PrintReverse(char[] Chars)
{
    Console.Write(Chars[Chars.Length - 1]);
    Array.Resize(ref Chars, Chars.Length - 1);
    if (Chars.Length == 0) return;
    PrintReverse(Chars);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:42:15.293

尝试添加`ref`到参数声明，这现在应该按照您预期的方式工作。

不`ref`调用 to`Array.Resize`只能修改本地数组引用，而不能修改从 传入的引用`Main`。

```
 static void Main(string[] args)
    {
        string str = "Hello";
        var array = str.ToArray();
        PrintReverse(ref array);
        Console.Read();
        Debug.Assert(array.Length == 0);
    }
    static void PrintReverse(ref char[] Chars)
    {
        Console.Write(Chars[Chars.Length - 1]);
        Array.Resize(ref Chars, Chars.Length - 1);
        if (Chars.Length == 0) return;
        PrintReverse(ref Chars);
    } 
```

**编辑：**

我误认为 ref 导致了浅克隆，这就是证明：

```
 static void Main(string[] args)
    {
        var array = new[] { new object() };
        TestRef(ref array, array);
    }

    static void TestRef(ref object[] arrayByRef, object[] arrayByValue)
    {
        Debug.Assert(ReferenceEquals(arrayByRef, arrayByValue)); //no difference whether passed by ref or value, if there was a shallow clone happening, this would fail
        Array.Resize(ref arrayByRef, 2);
        Debug.Assert(!ReferenceEquals(arrayByRef, arrayByValue)); //only now do they differ
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T15:48:44.583

你这里有两个问题。

首先，“返回前/返回后”问题意味着您看到了两个不同的执行帧——也就是说，在调试器中，堆栈跟踪将显示一堆`PrintReverse`s 彼此重叠，因为每个都存在于自己的上下文中，并且它自己的状态，同时。它几乎（虽然不是真的）像这种方法的“实例”，你看到的是两个不同的。

其次，因为每个都有自己的状态，所以每个中的局部变量——包括关键的参数——也是重复的。它们最初指向同一个堆对象（您的初始 Char 数组），但它们都是不同的变量。

现在，看看这段代码：

```
char[] test1 = new char[] { '1', '2', '3' }, test2 = test1;
Array.Resize(ref test2, 2);
MessageBox.Show(new string(test1) + " - " + new string(test2)); // result: 123 - 12 
```

如果你运行它，你会看到虽然变量最初引用的是同一个对象，但 Array.Resize*会创建一个新对象并将*传入的变量的引用更改为指向新对象。第一个变量中的引用仍然指向旧的（不可变的）对象。

这就是您的情况，仅使用 Chars 参数。在每种方法中，您使用 Array.Resize() 重新分配 Chars 以指向其他位置，但原始变量仍然引用旧位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T15:37:40.053

想想执行链。您正在递归地调用缩小数组的方法，直到达到 0，然后返回调用者（相同的方法），因此当您遍历调用堆栈时，您会看到增长回原始大小。

因此没有发生额外的逻辑，因为递归调用是方法中的最后一次调用，但是您会看到调试器结束每个调用，而数组大小又比之前的调用大 1。

但是，如果您要通过引用传递数组，则数组大小将在到达调用堆栈时保持为大小 0，因为对 Array.Resize 的每次连续调用都会创建一个新数组并更新对新数组的所有引用数组，而不仅仅是该调用的本地引用。（如果您不通过引用传递，它只会更新引用的副本，并且不会更新之前调用中的那些）。

这是因为 Array.Resize 创建了一个新数组并更新了引用以指向新数组而不是旧数组，并且通过不通过引用传递，您将引用的副本发送到原始数组而不是实际引用到数组，因此对 Array.Resize 的调用不会更新旧引用。

```
static void PrintReverse(ref char[] Chars)
{
    Console.Write(Chars[Chars.Length - 1]);
    Array.Resize(ref Chars, Chars.Length - 1);
    if (Chars.Length == 0) return;
    PrintReverse(ref Chars);
} 
```

*感谢 Groo 纠正我，希望这次我做对了*

# vba - 按下按钮时VBA事件引发错误？

> ID：11018379
> 
> 赞同：4
> 
> 时间：2012-06-13T15:32:57.277
> 
> 标签：vba, excel

当我单击工作表上的按钮时，将调用以下事件。

我收到错误“类型不匹配”

如果事件是由于按下按钮引起的，我怀疑我需要另一个 if 语句来停止评估原始 IF？

```
Private Sub Worksheet_Change(ByVal Target As Range)

    If Target = Range("D4") Then   'Error is here

    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T15:58:12.270

这

```
If Target = Range("D4") Then 
```

相当于这个

```
If Target.Value = Range("D4").Value Then 
```

这显然不是你想要的。如果`Target.Value`碰巧与`Range("D4").Value`.

你想要的是这样的：

```
If Not Intersect(Target, Range("D4")) Is Nothing Then 
```

**编辑**我只是设法重现您的错误。如果`Target`范围的大小不同于`Range("D4")`即跨越多个单元格，则会发生这种情况。正如@Dick Kusleiska 所指出的，如果两者之一是错误值，也会发生这种情况。也许它也是由其他事情触发的，我不知道。总之，重点是，你的`If`条件不对！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T15:54:38.307

试试这个

```
Private Sub Worksheet_Change(ByVal Target As Range)
    On Error GoTo Whoa
    Application.EnableEvents = False

    If Not Intersect(Target, Range("D4")) Is Nothing Then

    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

**编辑**：

我还建议使用错误处理并将其设置`.EnableEvents`为 false 以避免和可能的无限循环:)

# vb.net - 通过 foreach 语句 VB.net 更改数组的值

> ID：11018388
> 
> 赞同：5
> 
> 时间：2012-06-13T15:33:30.457
> 
> 标签：vb.net, arrays, csv

我正在制作一个自动分离 csv 文件的程序。我们通过读取 csv，然后使用拆分命令将“行”分配给数组。之后，我们遍历数组中的每个“单元格”并在前面放一个 =，因为这会导致前导零不会丢失。这是代码。

```
 arLine = line.Split(replace)

        For Each cell As String In arLine
            cell = cell.Replace(",", "")
            cell = String.Format(cellFormat, cell)
        Next 
```

arLine 是数组，replace 是分隔符，在这种情况下，管道并不重要。

当它通过时， arLine 是正确的，但每个单元格中的值没有改变，有什么想法吗？对 VB.net 较新，需要指导

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T15:37:57.703

试试这个。

```
arLine = line.Split(replace)          
For x as Integer = 0 To arLine.Lenght - 1             
    arLine(x) = arLine(x).Replace(",", "")             
    arLine(x) = String.Format(cellFormat, arLine(x))         
Next 
```

您正在使用 For Each 循环并尝试修改迭代器返回的值，但这会为您的单元格 var 创建一个新字符串，因此您没有引用原始数组。相反，使用传统的 for - 循环，您可以直接更新 arLine 数组中的值

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T15:39:21.300

.NET 中的字符串是[不可变](http://en.wikipedia.org/wiki/Immutable_object)的。修改字符串时，实际上是创建了一个全新的字符串。

因此，单元格不再引用原始数组元素。相反，尝试`for`循环而不是`foreach`循环并将修改后的值分配回`arLine(i)`.

使用`for`循环而不是`foreach`让您有一个方便的集合索引。

# android - org.xmlpull.v1.XmlPullParserException ksoap2 android web 服务

> ID：11018390
> 
> 赞同：1
> 
> 时间：2012-06-13T15:33:33.633
> 
> 标签：android, web-services, ksoap2, wsdl2java, android-ksoap2

我将 ksoap2 用于 android web 服务，但出现以下错误：

```
org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG 
```

这是 wsdl 文件：“meteo.wsdl”

```
<?xml version="1.0" encoding="UTF-8" ?> 
- <wsdl:definitions xmlns:sch="http://www.tunisiana.com/samples/schemas/messages" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://www.tunisiana.com/samples/schemas/messages" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://www.tunisiana.com/samples/schemas/messages">
- <wsdl:types>
- <schema xmlns="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" targetNamespace="http://www.tunisiana.com/samples/schemas/messages" xmlns:tns="http://www.tunisiana.com/samples/schemas/messages">
- <element name="Horoscope">
- <complexType>
- <all>
  <element name="signe" type="string" /> 
  <element name="ordre" type="int" /> 
  <element name="amour" type="string" /> 
  <element name="sante" type="string" /> 
  <element name="travail" type="string" /> 
  <element name="date" type="string" /> 
  <element name="image" type="base64Binary" /> 
  </all>
  </complexType>
  </element>

<simpleType name="OrdreSigne">
- <restriction base="int">
  <minInclusive value="1" /> 
  <maxInclusive value="12" /> 
  </restriction>
  </simpleType>
- <element name="GetHoroscopeJourRequest">
- <complexType>
- <sequence>
  <element name="ordre_signe" type="tns:OrdreSigne" /> 
  </sequence>
  </complexType>
  </element>
- <element name="GetHoroscopeJourResponse">
- <complexType>
- <sequence>
  <element ref="tns:Horoscope" /> 
  </sequence>
  </complexType>
  </element>
</schema>
</wsdl:types>

<wsdl:message name="GetHoroscopeJourRequest">
  <wsdl:part element="tns:GetHoroscopeJourRequest" name="GetHoroscopeJourRequest" /> 
  </wsdl:message>

<wsdl:message name="GetHoroscopeJourResponse">
  <wsdl:part element="tns:GetHoroscopeJourResponse" name="GetHoroscopeJourResponse" /> 
  </wsdl:message>
<wsdl:operation name="GetHoroscopeJour">
  <wsdl:input message="tns:GetHoroscopeJourRequest" name="GetHoroscopeJourRequest" /> 
  <wsdl:output message="tns:GetHoroscopeJourResponse" name="GetHoroscopeJourResponse" /> 
  </wsdl:operation>
<wsdl:binding name="MeteoSoap11" type="tns:Meteo">
  <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http" /> 
 <wsdl:operation name="GetHoroscopeJour">
  <soap:operation soapAction="" /> 
- <wsdl:input name="GetHoroscopeJourRequest">
  <soap:body use="literal" /> 
  </wsdl:input>
- <wsdl:output name="GetHoroscopeJourResponse">
  <soap:body use="literal" /> 
  </wsdl:output>
  </wsdl:operation>
 </wsdl:binding>

<wsdl:service name="MeteoService">
- <wsdl:port binding="tns:MeteoSoap11" name="MeteoSoap11">
  <soap:address location="http://localhost:8080/Contenu20/services" /> 
  </wsdl:port>
  </wsdl:service>
 </wsdl:definitions> 
```

Horoscopefetcher.java

```
public class HoroscopeFetcher {

    private final String NAMESPACE = "http://www.tunisiana.com/samples/schemas/messages/";
    private final String METHOD_NAME = "GetHoroscopeJour";
    private final String SOAP_ACTION = ""; 
    private final String URL = "http://172.24.1.47:8080/Contenu20/meteo.wsdl";

    private final SoapSerializationEnvelope envelope;

    public HoroscopeFetcher(int ordre)
    {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);        

        request.addProperty("ordre_signe",ordre);

        envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
      //  envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
    }

    public Horoscope Fetch()
    {
       HttpTransportSE httpRequest = new HttpTransportSE(URL);

        HoroscopeHandler horoscopeParser = new HoroscopeHandler();
        try
        {
             //Envoi de la requête
            httpRequest.call(SOAP_ACTION, envelope);
            //Obtention de la reponse
             SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
            //parsing de l'objet SOAP
            Xml.parse(response.toString(), horoscopeParser);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

        return horoscopeParser.getHoroscopeJour();
    } 
```

}

有人可以帮我:(这个错误是什么意思，我该如何解决？

# java - 比较java中的抽象类和接口

> ID：11018397
> 
> 赞同：-6
> 
> 时间：2012-06-13T15:33:51.247
> 
> 标签：java

我正在研究抽象类和接口。

有人可以告诉我完全抽象类和接口之间是否有区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T15:34:30.230

[谷歌是你的朋友，所以使用它。](http://javapapers.com/core-java/abstract-and-interface-core-java-2/difference-between-a-java-interface-and-a-java-abstract-class/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T15:36:22.427

肯定是有区别的。我能想到的前几个是

*   不能继承多个抽象类，可以实现多个接口
*   您可以为接口编写装饰器，但不能为抽象类编写
*   您可以在抽象类中提供默认实现，但不能在接口中提供。这允许以向后兼容的方式扩展抽象类，这对于接口是不可能的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T15:37:24.240

抽象类可以包含方法实现，而接口不能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T15:41:17.333

[阅读 Java 文档！](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)

> 抽象类与接口
> 
> 与接口不同，抽象类可以包含非静态和最终的字段，它们可以包含已实现的方法。这种抽象类类似于接口，只是它们提供了部分实现，将其留给子类来完成实现。如果抽象类仅包含抽象方法声明，**则应将其声明为接口。**
> 
> 多个接口可以由类层次结构中任何位置的类实现，无论它们是否以任何方式相互关联。例如，想想 Comparable 或 Cloneable。
> 
> 相比之下，抽象类最常被子类化以共享实现部分。单个抽象类由具有许多共同点（抽象类的实现部分）但也有一些差异（抽象方法）的相似类子类化。

> 完全抽象的类和接口之间有区别吗？

如果所有方法都是抽象的，则行为*几乎*（不完全）相同，但是**是有区别的**。主要是因为一个类不能从多个（抽象或非抽象）类扩展，但可以实现许多接口。此外，这些字段在接口中也不能是私有的。

请注意，Oracle 文档建议将完全抽象类转换为接口。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T15:41:33.157

在界面中：

您只能在此接口中声明变量，方法但没有定义

抽象类：当一个类被声明为抽象类时，声明可能包含也可能不包含抽象方法。在抽象类中，我们也可以编写定义。与接口不同，抽象类可以包含非静态和最终的字段。

这种抽象类类似于接口，只是它们提供了部分实现，将其留给子类来完成实现。

# android - 缩放 VideoView 以填充宽度，保持纵横比

> ID：11018398
> 
> 赞同：5
> 
> 时间：2012-06-13T15:33:54.717
> 
> 标签：android, android-videoview

在我的活动中，我需要显示`VideoView`实例（全屏），并带有一个缩放内容的按钮 - 类似于 iOS 媒体播放器的。我的意思是，例如缩放 4:3 内容以填充屏幕宽度，保持纵横比（从而有效地修剪内容的顶部/底部）。

我刚刚做了一个快速的破解/实验——`VideoView`在一个`AbsoluteLayout`超大的内部，所以顶部/底部被修剪掉了。它有效，但真的感觉像一个黑客。

也许我是盲人，但是否没有 API 可以选择要在视图中显示的视频子矩形？

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2014-04-10T20:09:22.740

您可以使用以下代码使视频使用所有宽度：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center_horizontal">

    <VideoView
        android:id="@+id/myvideoid"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </VideoView>
</LinearLayout> 
```

在高度中使用匹配父项将使您的视频保持纵横比。如果您想要填满屏幕，请访问[http://blog.kasenlam.com/2012/02/android-how-to-stretch-video-to-fill.html](http://blog.kasenlam.com/2012/02/android-how-to-stretch-video-to-fill.html)

# asp.net - 在 asp.net 中动态更改查询字符串

> ID：11018404
> 
> 赞同：1
> 
> 时间：2012-06-13T15:34:10.573
> 
> 标签：asp.net, rest, encryption, query-string, ihttpmodule

我们的客户端要求加密 URL，因为它在查询字符串中传递值。我们使用了加密并且能够对 URL 进行加密；但是，现有代码`querystring["var"]`在很多地方使用并且由于加密的 URL 而失败。因此，在页面加载时，我们必须解密 URL。如果我使用 解密并更改查询字符串`response.redirect`，那么查询字符串将再次出现在 URL 中并且可能被滥用。

请帮忙。

**编辑** 我正在阅读有关 RESTfull Web 服务的信息。我还没有理解整个概念。我想知道我是否可以在我的应用程序中使用它来隐藏查询字符串。如果是这样，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:29:51.487

有一个更好的方法来解决这个问题。我与具有相同要求的客户打交道。这门课也通过安全扫描飙升。

```
Public Class QueryStringManager

    Public Shared Function BuildQueryString(ByVal url As String, ByVal queryStringValues As NameValueCollection) As String
        Dim builder As New StringBuilder()
        builder.Append(url & "?")
        Dim count = queryStringValues.Count
        If count > 0 Then

            For Each key In queryStringValues.AllKeys
                Dim value As String = queryStringValues(key)
                Dim param As String = BuildParameter(key, value)
                builder.Append(param)
            Next

        End If
        Return builder.ToString()
    End Function

    Public Shared Function DeconstructQueryString(ByVal Request As HttpRequest) As NameValueCollection
        Dim queryStringValues As New NameValueCollection

        For Each key In Request.QueryString.AllKeys
            Dim value As String = Request.QueryString(key)
            value = DeconstructParameter(value)
            queryStringValues.Add(key, value)
        Next

        Return queryStringValues
    End Function

    Private Shared Function BuildParameter(ByVal key As String, ByVal value As String) As String
        Dim builder As New StringBuilder()
        builder.Append(key.ToString() & "=")
        value = GetSafeHtmlFragment(value)
        Dim encrypt As Security = New Security()
        value = encrypt.Encrypt(value)
        builder.Append(value)
        builder.Append("&")
        Return builder.ToString()
    End Function

    Public Shared Function DeconstructParameter(ByVal value As Object) As String
        Dim decrypt As New Security()
        value = decrypt.Decrypt(value)
        value = GetSafeHtmlFragment(value)
    End Function

End Class 
```

**利用**

```
Dim nvc As NameValueCollection = New NameValueCollection()
nvc.Add("value", 1)
Dim builtUrl As String = QueryStringManager.BuildQueryString(url, nvc)
Response.Redirect(builtUrl, false); 
```

* * *

然后，当您到达该页面时，您只需编写：

```
Dim decryptedValues As NameValueCollection = QueryStringManager.DeconstructQueryString(Request) 
```

我使用的原因`NameValueCollection`是因为它与QueryString的类型相同。您可以在该类的基础上根据其属性及其值将对象添加到 QueryString 中。这使所有复杂而乏味的逻辑都被封装起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:00:52.077

一种轻松实现此目的的方法是像当前一样解密查询字符串，然后将其值设置为可以存储在会话中的某个对象。如果您想从查询字符串中排除此信息（隐藏），将其存储在会话变量中会很有用——您实际上是在幕后传递数据。

一旦存储在 session 中，您将更改您的代码，这样无论您在哪里使用`querystring["var"]`，您都将引用已存储在 session 中的对象。

***编辑***

但是请注意，这不必降级为单个值。这个对象可以有多个属性，每个属性代表一个查询字符串值：

```
MyQueryStringObject myQueryStringObject = new MyQueryStringObject(SomeUrl);
//MyQueryStringObject decrypts the query string and assigns the values to properties in its constructor
string abc = myQueryStringObject.abc;
string xyz = myQueryStringObject.xyz; 
```

现在，它使用属性来表示每个查询字符串值。你可能有很多。在这种情况下，您可以将值存储到某种`Dictionary`或 a中`NameValueCollection`。

有多种方法可以实现这一点，我认为这超出了主题，但是请注意，所有这一切的***关键***，本质是简单地解密服务器上的 url（在回发期间）并将未加密的数据保存到会话变量中如果您想从 URL 中隐藏它。

# mysql - MYSQL复制不同ID的行

> ID：11018407
> 
> 赞同：1
> 
> 时间：2012-06-13T15:34:18.727
> 
> 标签：mysql

我有两个以一对多关系连接的表。
Parent Table 是一个简单的用户表，带有 id 和 first_name 列

家长

```
id | first_name     
1  | Bob  
2  | Dick  
3  | Harry  
4  | Tom  
5  | Holly 
```

子表包含用户的保险选择。

孩子

```
id | insu_id      | user_id   | year  
1  | 188765       | 1         | 2008  
2  | 188765       | 1         | 2009  
3  | 188765       | 1         | 2010   
4  | 188765       | 1         | 2011  
5  | 188765       | 1         | 2012 
```

我想将 u `ser_id`1 的保险选择复制到所有其他用户，即子表中的 2、3、4、5，以便该表看起来像

```
id | insu_id      | user_id   | year  
1  | 188765       | 1         | 2008   
2  | 188765       | 1         | 2009      
3  | 188765       | 1         | 2010  
4  | 188765       | 1         | 2011  
5  | 188765       | 1         | 2012  
6  | 188765       | 2         | 2008  
7  | 188765       | 2         | 2009   
8  | 188765       | 2         | 2010  
9  | 188765       | 2         | 2011   
10 | 188765       | 2         | 2012  
11 | 188765       | 3         | 2008  
12 | 188765       | 3         | 2009   
13 | 188765       | 3         | 2010  
14 | 188765       | 3         | 2011  
15 | 188765       | 3         | 2012  
16 | 188765       | 4         | 2008  
17 | 188765       | 4         | 2009   
18 | 188765       | 4         | 2010  
19 | 188765       | 4         | 2011  
20 | 188765       | 4         | 2012  
21 | 188765       | 5         | 2008  
22 | 188765       | 5         | 2009   
23 | 188765       | 5         | 2010  
24 | 188765       | 5         | 2011  
25 | 188765       | 5         | 2012 
```

**我能做些什么**

```
INSERT INTO child(insurance_id, user_id, year) SELECT insurance_id, '2', year FROM child WHERE user_id = 1

INSERT INTO child(insurance_id, user_id, year) SELECT insurance_id, '3', year FROM child WHERE user_id = 1

INSERT INTO child(insurance_id, user_id, year) SELECT insurance_id, '4', year FROM child WHERE user_id = 1

INSERT INTO child(insurance_id, user_id, year) SELECT insurance_id, '5', year FROM child WHERE user_id = 1 
```

**我想要的是**

我不想运行 4 个不同`INSERT INTO() SELECT`的查询，因为用户数量可能会增加。我想要一个查询动态选择 user_id 而不是硬编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:56:52.130

我已经尝试过了，它似乎有效。我从第一个用户的子表中获取保险数据，并将其与父表中的所有其他用户连接以插入结果。如果它们与您的数据库不同，您可能必须修复列名。

```
INSERT INTO child(insurance_id, user_id, year)
SELECT a.insurance_id, b.id, a.year
FROM
child a, parent b
WHERE a.user_id = 1 AND b.id > 1
ORDER BY b.id, a.year 
```

这将始终为除 id = 1 的用户之外的所有用户插入保险数据。无论您有多少用户。希望有帮助:)

# javascript - 使用 Knockout 显示条件 html

> ID：11018408
> 
> 赞同：5
> 
> 时间：2012-06-13T15:34:23.173
> 
> 标签：javascript, html, knockout.js, coffeescript

我有一系列可观察到的活动，其中包含审计和评论。我从服务器获取数据并根据对象的时间戳对活动数组进行排序。

我希望能够根据类型有条件地显示 html，因此审核和评论看起来会有所不同。

```
<!-- ko foreach: activities -->
<div class="audit" data-bind="visible: {activity is typeof Audit}"> 
    @*Do some audit html*@
</div>
<div class="comment" data-bind="visible: {activity is typeof Comment}"> 
    @*Do some comment html*@
</div>
<!-- /ko --> 
```

我有以下 html，但我不知道条件如何，我只是在上面写了一些东西作为占位符，这样你就知道我想要实现的目标了。

我可能正在接近这一切都是错误的，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:42:27.953

如果您将可见绑定更改为 if 绑定，Nayjest 的解决方案应该可以工作 - 这样它就不会尝试渲染具有标题依赖项的部分。

然而，更好的解决方案可能是拥有两个模板并根据类型执行它们。您可以在 VM 上使用一个方法来获取 $data 并返回，例如，“auditTemplate”或“commentTemplate”，具体取决于 $data instanceof Audit 之类的结果。然后，您将嵌入两个模板作为具有这些 id 的脚本标签：

```
<script id="auditTemplate" type="text/html">
<div class="audit">
<!-- Do some audit stuff -->
</div>
</script>

<script id="commentTemplate" type="text/html">
<div class="comment">
<!-- Do some comment stuff -->
</div>
</script> 
```

然后在你的虚拟机中，你会有类似的东西：

```
this.getTemplate = function(data) {
return (data instanceof Audit) ? 'auditTemplate' : 'commentTemplate'
} 
```

在您页面的 html 中，您可以执行以下操作：

```
<!-- ko foreach: activities -->
<div databind="template: {name:$parent.getTemplate($data), data: $data}"></div>
<!-- /ko --> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T15:43:46.623

如果您有在视图模型的全局范围和属性“活动”中可见的审计类，请尝试以下操作：

```
<div data-bind="foreach: activities">
   <div data-bind="visible: $data instanceof Audit">
       <h1 data-bind="text: $data.title"></h1>
       <!-- Some other data here -->
   </div>
</div> 
```

# git - 如何使用 git-archive 导出特定提交？

> ID：11018411
> 
> 赞同：24
> 
> 时间：2012-06-13T15:34:31.347
> 
> 标签：git, repository, export

我之前问过一个类似的问题，但回答得不够充分，所以我想我会在这里再问一次，但提供更多信息。我需要获得不同版本和旧版本的 git 存储库，但我遇到了麻烦。我试过的是

```
git checkout master~X 

git archive --format zip --output /full/path/to/zipfile.zip master 

git checkout master 

git checkout master~Y 

git archive --format zip --output /full/path/toDifferent/zipfile.zip master 

git checkout master 
```

将两者解压缩后，它们最终完全相同。我不知道为什么或如何解决它。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-13T16:23:59.527

### 问题

在您的两个示例中，您都在导出*master*的提示。拿出你的旗帜和论据，你有：

```
git archive master 
```

换句话说，您通过将存储在**.git/refs/heads/master**中的任何内容指定为您的树状结构来明确地对自己执行此操作。

### 解决方案

如果要导出不同的提交，则需要根据[gitrevisions(7)提供树状结构。](https://git-scm.com/docs/gitrevisions)例如，要导出提交*29435bc*，您可以指定：

```
git archive --format zip --output /full/path/to/zipfile.zip 29435bc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-30T10:24:15.297

解析度

这是最新版本的 Git 的预期行为。远程 Git 存储库不允许客户端访问任意 SHA1。请求的对象应通过 ref（即文件名）访问。

[git-upload-archive-archiver-deed-with-error](https://confluence.atlassian.com/stashkb/git-upload-archive-archiver-died-with-error-448791164.html)

# c++ - OpenSSL 库压力容限

> ID：11018412
> 
> 赞同：1
> 
> 时间：2012-06-13T15:34:31.247
> 
> 标签：c++, multithreading, ssl, openssl

我的同事和我有一个很好的感觉，OpenSSL 或多或少需要从我们的应用程序中获得支持，但我想就它是否真的这么糟糕或者我们使用这个库是否存在可能给我们带来麻烦的问题提出一些意见。

设置：为每个用户维护持久 SSL 连接的多线程 C++ 应用程序。

在 500 个用户中，它运行良好。我正在尝试将限制增加到 1000 并且大约 960 在`SSL_read`. 此读取是此特定连接的第一个 I/O 操作。我不得不将文件限制`ulimit`从 1024 增加到 4096 才能达到这么高。所以我的问题是：

1）是否有可能需要将库配置为知道接受这么多连接？

2）这是一个线程问题，可以通过轻微使用互斥锁来解决吗？不过，我不能把整个 SSL_read 变成一个关键地带。

3）只是一个糟糕的错误库，需要被扔掉？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:51:20.833

根据您的评论，每个连接 1 个线程似乎不是线程的有效使用。

我会建议一个线程池并使用工作线程来处理接收到的数据包。接收到的数据包可以排入队列，工作线程将处理来自队列的数据包。openSsl 连接可以存储在所有线程通用的容器中。必须注意按顺序处理数据包。是的，将需要同步（互斥锁）。

# iphone - 在 html 中打开 Twitter 应用程序

> ID：11018416
> 
> 赞同：1
> 
> 时间：2012-06-13T15:34:49.733
> 
> 标签：iphone, html

无论如何可以从 iPhone 上的 html 链接打开 twitter 应用程序？当您单击 youtube 链接时，它会如何转到 youtube 应用程序。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:19:49.577

您可以将`twitter://`其用作 URL 并将其放入按钮的操作或类似的操作中：

```
-(IBAction)openTwitter{
   NSURL* url = [NSURL URLWithString:@"twitter://"];
   [[UIApplication sharedApplication] openURL:url];   
} 
```

如果您的意思是网站上的 html，您将使用`<a href="twitter://">tap me to go to twitter</a>`该链接。

[URL Schemes](http://wiki.akosma.com/IPhone_URL_Schemes)显示[在这里](http://wiki.akosma.com/IPhone_URL_Schemes)，您也可以获取一些关于它们的更方便的信息。

我可能会推荐@Arab_Geek 的解决方案，因为它不是那么麻烦，而且它会将控制权交还给用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:12:25.400

为什么不使用 iOS 5 ( [TWTweetComposeViewController](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html) ) 的 Twitter 集成？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T16:15:12.813

```
NSURL * twitterURL = [NSURL URLWithString:@"twitter://"];
if([[UIApplication sharedApplication] canOpenURL:twitterURL])
    [[UIApplication sharedApplication] openURL:twitterURL]; 
```

# iis-7 - System.Web.Routing 仅适用于 .aspx 文件扩展名

> ID：11018420
> 
> 赞同：0
> 
> 时间：2012-06-13T15:35:04.983
> 
> 标签：iis-7, routing, asp.net-mvc-4

我有一个应用程序，它在我所有的环境中都可以使用`System.Web.Routing`并且效果很好。唯一的问题是，我的暂存环境最后需要“.aspx”，否则我将得到 404。所有其他环境都不需要它。它们都在带有 v4.0 .NET 框架的托管管道模式的经典中运行。我一直在比较 IIS 设置，但找不到任何差异。我什至比较了`web.config`and `machine.config`，但也没有区别。有人知道它可能是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:38:32.843

确保你的 web.config 中有这个（通常你确实想要集成，除非你因为某种原因不能[跳过箍，所以它在 Classic 下工作](http://www.asp.net/mvc/tutorials/older-versions/deployment/using-asp-net-mvc-with-different-versions-of-iis-cs)）。

```
 <system.webServer>
    <!-- omitted for brevity -->
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

`runaAllManagedModulesForAllRequests`过去已经让我好几次了。

# javascript - 用jQuery中的新行替换结果集中的逗号

> ID：11018422
> 
> 赞同：8
> 
> 时间：2012-06-13T15:35:12.757
> 
> 标签：javascript, jquery

我过去不必做这样的事情，我想知道这是否真的可能。我允许添加多个代码编号，只要它们用逗号分隔即可。我想要做的是在用户单击“确定”按钮时，显示输入的数字将显示它们彼此重叠，旁边有一个“删除”按钮。这部分很简单……困难的部分是去掉逗号，取而代之的是新行。

有没有任何人也可以指出我的例子或样本？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-13T15:38:37.297

您将使用使用标志（“全局”）作为“搜索”部分[`String#replace`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)的[正则表达式](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)`g`，以及您选择的替换字符串（根据您的问题，我不确定您是否想要`<br>` - 例如，HTML 换行符— 或者`\n`确实是换行符 [但请记住，换行符在 HTML 中被视为空格]）。例如：

```
var numbers = "1,2,3,4,5,6";
numbers = numbers.replace(/,/g, '<br>'); // Or \n, depending on your needs 
```

或者，如果您想允许空格，您可以在正则表达式中的逗号两侧放置可选空格：

```
var numbers = "1,2,3,4,5,6";
numbers = numbers.replace(/ *, */g, '<br>'); // Or \n, depending on your needs 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-13T15:39:58.263

要替换*所有*出现的字符串，您需要使用带有`g`(global) 修饰符的正则表达式：

```
var numlist = "1,4,6,7,3,34,34,634,34";
var numlistNewLine = numlist.replace(/,/g, '\n'); 
```

或者，使用`.split()`和`.join()`

```
var newList = numList.split(',').join('\n'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T15:37:55.573

```
var numlist = "1,4,6,7,3,34,34,634,34";

var numlistNewLine = numlist.replace(',','\n'); 
```

不需要 jQuery。`String`有一个很好的`replace()`功能给你。

# ios - 内存泄漏 sqlite iOS 应用程序

> ID：11018427
> 
> 赞同：0
> 
> 时间：2012-06-13T15:35:29.850
> 
> 标签：ios, memory, sqlite, nsmutablearray, memory-leaks

我目前正在与一些内存泄漏作斗争，并且在解决我剩下的最后一个问题时遇到了一些严重的麻烦。泄漏工具显示了由于各种不同原因而全部来自同一方法的多个泄漏，主要归因于 NSCFString、NSMutableArray 和我创建的一个名为 GraphData 的类。我试图以几种不同的方式修复它但无济于事，因此希望可以对这个问题有所了解，希望这是我忽略的一些简单的事情。

这是一些代码：

```
// the offending, leaking method
-(NSMutableArray*)fillDataInArray:(NSInteger)keyphrase_id{

    NSLog(@"Keyphrase_id:%d", keyphrase_id);

    NSDate *startdate = [self getDateForApplicationInstalled];
    NSDate *enddate = [NSDate date];

    NSString *dateString1=[[NSString alloc] initWithString: [fmt stringFromDate:startdate]];
    NSString *dateString2=[[NSString alloc] initWithString: [fmt stringFromDate:enddate]];

    NSMutableArray *newDataNew = [[NSMutableArray alloc]init];
    self.newData = newDataNew;
    [newDataNew release];

    selStmt = nil;

    if (!selStmt)
    {
        const char *sql = "select distinct position, key_time from ranking where keyphrase_id = ? and key_time between ? and ? order by key_time";

        if (sqlite3_prepare_v2(database, sql, -1, &selStmt, NULL) != SQLITE_OK)
        {
            selStmt = nil;
        }

        NSInteger n = keyphrase_id;
        sqlite3_bind_int(selStmt, 1, n);

        sqlite3_bind_text(selStmt, 2, [dateString1 UTF8String] , -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(selStmt, 3, [dateString2 UTF8String] , -1, SQLITE_TRANSIENT);

        NSLog(@"SQL query is: [%s]", sql);
    }
    if (!selStmt)
    {
        NSAssert1(0, @"Can't build SQL to read keyphrases [%s]", sqlite3_errmsg(database));
    }

    int ret;

    while ((ret=sqlite3_step(selStmt))==SQLITE_ROW) 
    { 
        GraphData *item = [[GraphData alloc]init];

        item.key = sqlite3_column_int(selStmt, 0);
        item.value = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selStmt,1)];

        [newData addObject:item]; 

        [item release], item = nil;
    }

    sqlite3_reset(selStmt); // reset (unbind) statement

    [dateString2 release];
    [dateString1 release];

    return newData;
}

//GraphData.h
@interface GraphData : NSObject{
    NSInteger key;
    NSString *value;
}

@property (nonatomic, readwrite) NSInteger key;
@property (nonatomic, retain) NSString *value;

-(id)initWithPrimaryKey:(NSInteger) xid;
-(id)initWithName:(NSString *)n key:(NSInteger)i;

@end

//GraphData.m
#import "GraphData.h"

@implementation GraphData

@synthesize  key,value;

-(id)initWithPrimaryKey:(NSInteger) xid{

    self.key = xid;
    self.value = @"";

    return self;

}
-(id)initWithName:(NSString *)n key:(NSInteger)i{

    self.key = 0;
    self.value = n;

    return self;

}
-(void)dealloc{

    [value release], value = nil;
    [super dealloc];

}

@end 
```

谢谢你看我的帖子！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:19:30.537

**泄漏工具告诉您在哪里创建**了泄漏对象。由于 NSCFString、NSMutableArray 和 GraphData 对象是从这个方法中泄露出来的，让我们看看这是怎么发生的。

您仅在 NSMutableArray 中插入 GraphData 对象（包含字符串对象），它们似乎已正确释放。因此，要泄漏在此方法内创建的 GraphData 对象，包含元素的数组必须是泄漏。

请检查该方法的调用者。我假设其中之一是保留（而不是释放）方法的返回值。

此外，您的初始化程序必须更改为调用 super 的 init，但这与泄漏无关。一个例子：

```
-(id)initWithPrimaryKey:(NSInteger) xid
{
    self = [super init];
    if (self) {
        self.key = xid;
        self.value = @"";
    }
    return self;   
} 
```

# python - 是否有任何非 scipy 代码可以创建二维数据集的平滑插值？

> ID：11018433
> 
> 赞同：3
> 
> 时间：2012-06-13T15:35:35.153
> 
> 标签：python, charts, numpy, scipy, interpolation

**编辑：** *使用 Numpy 的解决方案会很好，我以前在安装它们时遇到了问题，但我现在在某些系统上安装了 numpy*

像[http://en.wikipedia.org/wiki/Cubic_Hermite_spline#Finite_difference](http://en.wikipedia.org/wiki/Cubic_Hermite_spline#Finite_difference)这样的东西会很棒。

我有一组 x,y 数据点，我正在寻找一种方法来绘制数据点之间的平滑路径。我需要访问实际点，所以贝塞尔曲线不会削减它。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:20:31.903

Scipy 多项式插值模块是相当独立的。如果*确实*需要避免依赖，可以将文件复制到自己的项目中：

[https://github.com/scipy/scipy/blob/master/scipy/interpolate/polyint.py](https://github.com/scipy/scipy/blob/master/scipy/interpolate/polyint.py)

这`splmake/spleval`对样条插值例程也是如此：

[https://github.com/scipy/scipy/blob/master/scipy/interpolate/interpolate.py](https://github.com/scipy/scipy/blob/master/scipy/interpolate/interpolate.py)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T16:37:09.527

对于 python 中的数值计算，numpy 是难以避免的。你应该尝试`scipy.interpolate`：

[http://docs.scipy.org/doc/scipy/reference/tutorial/interpolate.html#spline-interpolation-in-1-d-procedural-interpolate-splxxx](http://docs.scipy.org/doc/scipy/reference/tutorial/interpolate.html#spline-interpolation-in-1-d-procedural-interpolate-splxxx)

并寻找参数样条。从链接：

```
import numpy as np
import matplotlib.pyplot as plt
from scipy import interpolate
t = np.arange(0,1.1,.1)
x = np.sin(2*np.pi*t)
y = np.cos(2*np.pi*t)
tck,u = interpolate.splprep([x,y],s=0)
unew = np.arange(0,1.01,0.01)
out = interpolate.splev(unew,tck)
plt.figure()
plt.plot(x,y,'x',out[0],out[1],np.sin(2*np.pi*unew),np.cos(2*np.pi*unew),x,y,'b')
plt.legend(['Linear','Cubic Spline', 'True'])
plt.axis([-1.05,1.05,-1.05,1.05])
plt.title('Spline of parametrically-defined curve')
plt.show() 
```

![结果](../Images/c42ec0a7b06f80336569bc8c7b1e89a3.png)

# vbscript - 使用 vbscript 从组合框中选择一个项目

> ID：11018438
> 
> 赞同：1
> 
> 时间：2012-06-13T15:35:47.810
> 
> 标签：vbscript, combobox, qtp

我正在为我正在处理的应用程序在 vbscript 中编写一些测试，我需要在组合框中的多个选项中选择一个选项。有谁知道如何做到这一点？我目前“选择”该选项的方式是

```
Browser("main_browser").Page("main_page").WebEdit("teams").Set "Thunder" 
```

这将使该字段等于“Thunder”，但应用程序不会将其识别为我的组合框中的“Thunder”选项，可以说只是一个具有值“Thunder”的字符串。

顺便说一句，我正在使用快速测试专业版作为环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:11:24.983

您确定*组合框*是真正的组合框（`SELECT`HTML 标记）吗？

当 QTP 看到一个`select`标签时，它会将其标识为 a`WebList`而不是`WebEdit`您列出的 a。然后您可以执行`WebList.Select`which 进行本机选择（而不是`Set`）。可能是您没有读取的 HTML 组合框，而是有一个模拟组合框的编辑框，然后`.Set`只设置文本。

如果您无法将控件识别为 a `WebEdit`，则必须检查 HTML 以查看是什么事件导致字段的选择发生更改并使用`WebEdit.FireEvent`以模拟人类的交互。

# jfreechart - 以毫秒为单位的绘图时间 - JFreeChart（步骤图）

> ID：11018446
> 
> 赞同：0
> 
> 时间：2012-06-13T15:36:12.273
> 
> 标签：jfreechart

我正在尝试绘制具有以下属性的阶梯图： x 轴：时间（毫秒）[实际数据包含此作为双精度值] y 轴：存储为整数的另一个值。

我正在填充数据集，如下所示：

```
private XYSeries populateStepChartDataSet(HashMap<Double, Integer> dataGrid){
    XYSeries xySeries = new XYSeries("Step Plot", true, true);

    if(dataGrid != null){
        for (Double timeStamp : dataGrid.keySet()) {
            xySeries.add(timeStamp, dataGrid.get(timeStamp));
        }
    }

    return xySeries;
} 
```

我创建情节的部分如下：

```
 final XYSeriesCollection dataset = new XYSeriesCollection();
        dataset.addSeries(populateStepChartDataSet(dspDataGrid));

        final JFreeChart chart = ChartFactory.createXYStepChart(
            title,
            xAxisLabel, yAxisLabel,
            dataset,
            PlotOrientation.VERTICAL,
            true,   // legend
            true,   // tooltips
            false   // urls
        ); 
```

我期望的是该图在 x 轴上以毫秒为单位显示时间，但该值正在转换为一些奇怪的时间。这是情节的样子![在此处输入图像描述](../Images/9153fe805cf2adb4eadd7444134fb568.png)

有人可以帮我取回 x 轴的 ms 格式的时间戳吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:37:54.643

看起来 x 轴正在格式化为日期，解决此问题的一种方法是提供`NumberFormatOverride`

创建后添加此代码`chart`：

```
XYPlot plot = (XYPlot)chart.getPlot();
plot.setDomainAxis(0, new NumberAxis()); 
NumberAxis axis = (NumberAxis) plot.getDomainAxis();
axis.setNumberFormatOverride( new NumberFormat(){

    @Override
    public StringBuffer format(double number, StringBuffer toAppendTo, FieldPosition pos) {

    return new StringBuffer(String.format("%f", number));
    }

    @Override
    public StringBuffer format(long number, StringBuffer toAppendTo, FieldPosition pos) {
    return new StringBuffer(String.format("%9.0f", number));
    }

    @Override
    public Number parse(String source, ParsePosition parsePosition) {
    return null;
    }
    } );
    axis.setAutoRange(true);
    axis.setAutoRangeIncludesZero(false); 
```

然后你会得到这个图表：

![图表](../Images/a369930a29373d1ac48162c1643ddaad.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:51:11.183

仅供参考，每当您遍历 Map 时使用**entrySet()而不是遍历 keySet() 然后获取每个键的值。**

# ruby-on-rails - bzip2-ruby Windows 安装

> ID：11018454
> 
> 赞同：0
> 
> 时间：2012-06-13T15:36:39.787
> 
> 标签：ruby-on-rails, ruby, gem, bzip2

我试图在 Windows 7 x64 上安装 bzip2-ruby gem。现在我不知道这个 gem 是否可以在 64 位 Windows 上运行。我确实安装了安装到 C:\Program Files (x86)\GnuWin32 的 bzip2。

当我去安装时，运行以下命令：

```
gem install bzip2-ruby -- --with-bz2-dir="C:\Program Files (x86)\GnuWin32\" 
```

当它运行时，我得到以下输出：

```
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=C:/Ruby193/bin/ruby
        --with-bz2-dir
        --with-bz2-include
        --without-bz2-include=${bz2-dir}/include
        --with-bz2-lib
        --without-bz2-lib=${bz2-dir}/lib
        --with-bz2lib
        --without-bz2lib
ERROR:  Error installing bzip2-ruby:
        ERROR: Failed to build gem native extension.

        C:/Ruby193/bin/ruby.exe extconf.rb --with-bz2-dir=C:\Program Files (x86)\GnuWin32"
checking for bzlib.h... no
checking for BZ2_bzWriteOpen() in -lbz2... no
libbz2 not found, maybe try manually specifying --with-bz2-dir to find it?

Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/bzip2-ruby-0.2.7 for inspection.
Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/gems/bzip2-ruby-0.2.7/ext/gem_make.out 
```

我可以验证 libbz2.a、libbz2.def 和 libbz2.dll.a 文件是否存在于上述路径的 lib 文件夹中。

运行命令以指定 lib 文件夹时，我只是缺少一个额外的选项吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T00:49:12.993

为了让 GCC（RubyInstaller DevKit 中捆绑的编译器）正常工作，您需要使用**不带**空格的路径。

您提供的选项`extconf`有一个带空格的路径。请将 bzip2 中的`lib`,`include`​​ 和`bin`文件夹重新定位到没有空格的目录中，然后重试。

此外，您需要同时拥有头文件（在`include`目录中找到）和导入库（在`lib`目录中找到）才能进行扩展编译。

希望有帮助。

# c - Perl 脚本不保存 C 输出文件

> ID：11018466
> 
> 赞同：0
> 
> 时间：2012-06-13T15:37:37.407
> 
> 标签：c, perl

我一直在向现有项目添加一个插件，并且该插件与 perl 脚本捆绑在一起。我正在尝试将我的 C 程序添加到 perl 脚本中以制作输出文件，但输出是垃圾或丢失。

我的可执行文件被调用`Interpolate`，当它与 perl 脚本在同一个文件夹中时，它工作得很好

```
./Interpolate inv.tracking_log 
```

是命令的运行方式。它应该生成一个名为 的中间`tmp.log`文件和一个名为`out.txt`. 当我在目录中运行它时，它就很好，两个文件都应该是这样。

然后我在 perl 脚本中添加了一个系统调用（我几乎（如果）知道 perl）：

```
print("./Interpolate $inVideoFile");      //prints like the command (just a test)
my $interCall = system("./Interpolate $inVideoFile"); 
```

从 perl 脚本中运行它时，该`tmp.log`文件大多是垃圾，并且`out.txt`完全丢失了。我确实意识到 out 很可能会丢失，因为它依赖于`tmp.log`文件。是否有我在某处缺少的 perl 'gotchya'？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:49:03.153

```
system("./Interpolate $inVideoFile"); 
```

应该

```
system("./Interpolate", $inVideoFile); 
```

如果修复后仍有问题，`$inVideoFile`不包含应有的内容，或者 C 程序中存在错误。（调用的返回值是`system`多少？）

# asp.net-mvc-3 - 当我尝试发送私人消息时，LinqToTwitter 生成异常

> ID：11018468
> 
> 赞同：0
> 
> 时间：2012-06-13T15:37:46.587
> 
> 标签：asp.net-mvc-3, c#-4.0, linq-to-twitter

我尝试向已通过 my_app 身份验证的用户的关注者发送私人消息，代码如下：

```
 var authent = new MvcAuthorizer
        {
            Credentials = new SessionStateCredentials()
            {
                ConsumerKey = this.client.ConsumerKey,
                ConsumerSecret = this.client.ConsumerSecret,
                OAuthToken = identity.Token.Token
            }
        };

        var twitterCtx = new TwitterContext(authent);
        list_friend.ToList().ForEach(x => twitterCtx.NewDirectMessage(x.InvitedFriendID, messageWithPlaceHolders.Replace("[FRIEND_NAME]", x.Name))); 
```

list_friend 是经过身份验证的用户的关注者列表。

Pleaaaase 我需要你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:05:43.167

解决方案是使用 InMemoryCrendentials 而不是 SessionStateCredentials 并将令牌秘密添加到 crendential 中，然后我们应该将 DateTime.Now 添加到消息中，因为 twitter 不允许重复消息，这是解决方案中的代码，它运行良好：

```
 var authent = new MvcAuthorizer
        {
            Credentials = new InMemoryCredentials()
            {
                ConsumerKey = this.client.ConsumerKey,
                ConsumerSecret = this.client.ConsumerSecret,
                OAuthToken = identity.Token.Token,
                AccessToken = identity.Token.Secret
            }
        };
  var twitterCtx = new TwitterContext(authent);            
  list_friend.ToList().ForEach(x => twitterCtx.NewDirectMessage(x.SocialId, messageWithPlaceHolders.Replace("[FRIEND_NAME]", x.Name) +DateTime.Now.ToString())); 
```

谢谢

# python - 在 Django 单元测试中使用持久数据库

> ID：11018470
> 
> 赞同：4
> 
> 时间：2012-06-13T15:37:53.093
> 
> 标签：python, database, django, django-models, wordnet

我有一个大型只读 Wordnet PostgreSQL 数据库，我想从 Django 单元测试中使用它。具体来说，我有一个名为“wordnet”的应用程序，它包装了这个 Wordnet 数据库。不幸的是，默认的 Django unittest 框架为所有应用程序使用一个空的内存 SQLite 数据库。

如何在单元测试中仅将我的 PostgreSQL 数据库用于 wordnet 应用程序，而不用于其他应用程序？

我熟悉[Django 数据库路由器](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#topics-db-multi-db-routing)，我认为它们可能是一个解决方案。所以我在我的 routers.py 中创建了以下内容：

```
NEEDS_REAL_DB_APPS = (
    'wordnet',
    'auth',
    'contenttypes',
)
REAL_DB = 'default'

class UseRealDBRouter(object):

    def db_for_read(self, model, **hints):
        if model._meta.app_label in NEEDS_REAL_DB_APPS:
            return REAL_DB
        return None

    def db_for_write(self, model, **hints):
        if model._meta.app_label in NEEDS_REAL_DB_APPS:
            return REAL_DB
        return None

    def allow_relation(self, obj1, obj2, **hints):
        if obj1._meta.app_label in NEEDS_REAL_DB_APPS and obj2._meta.app_label in NEEDS_REAL_DB_APPS:
            return True
        return None

    def allow_syncdb(self, db, model):
        if db == REAL_DB:
            return model._meta.app_label in NEEDS_REAL_DB_APPS
        elif model._meta.app_label in NEEDS_REAL_DB_APPS:
            return False
        return None 
```

我的 tests.py 看起来像：

```
from django.test import TestCase
from wordnet import models as wn_models

class Tests(TestCase):

    def test_wordnet(self):
        q = wn_models.Word.objects.all()
        self.assertEqual(q.count(), 86547) 
```

但是，当我运行我的单元测试（例如`manage.py test myapp.Tests.test_wordnet`）时，检查仍然失败，所有单词的计数返回 0，表明它仍然没有使用“真实”数据库。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:54:38.990

您不应该使用真实数据库进行测试。

先转储你的生产数据库怎么样：看[这里](https://docs.djangoproject.com/en/dev/ref/django-admin/#django-admin-dumpdata)

然后将其加载到测试夹具中：检查[这个](https://docs.djangoproject.com/en/dev/topics/testing/tools/#fixture-loading)

# jquery - 悬停时的jQuery动画文本颜色

> ID：11018483
> 
> 赞同：2
> 
> 时间：2012-06-13T15:38:43.200
> 
> 标签：jquery, fonts, colors, hover, jquery-animate

使用下面的代码，尝试让字体颜色在悬停时进行动画处理，类似于我的边框底部颜色动画。更改边框底部颜色效果很好，但字体颜色似乎不会改变。一个完整的例子可以在这里看到： [http](http://www.buenolisto.com/alma) ://www.buenolisto.com/alma 。任何帮助是极大的赞赏。我也已经在调用 jQuery UI：[https ://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js](https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js)

```
jQuery("li.social").hover(function() {
jQuery(this).find("img").stop(true, true).animate({
    'marginTop': "-=20px"
}, 'fast');
}, function() {
jQuery(this).find("img").stop(true, true).animate({
    'marginTop': "+=20px"
}, 'fast');
})
jQuery("li.reservas").hover(function() {
jQuery(this).find("img").stop(true, true).fadeOut({
    'marginTop': "-=30px"
}, 'slow');
}, function() {
jQuery(this).find("img").stop(true, true).fadeIn({
    'marginTop': "+=30px"
}, 'slow');
})
jQuery("ul.menu li").hover(function() {
jQuery(this).find("a").stop(true, true).animate({
    'borderBottomColor': '#2E9ECE',
    'color': '2E9ECE'
}, 'slow');
}, function() {
jQuery(this).find("a").stop(true, true).animate({
    'borderBottomColor': '#FFDF85',
    'color': 'FFDF85'
}, 'slow');
})​ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T15:47:50.287

通过查看您的代码，我可以告诉您您已经忘记**了 #**接近 css 颜色，所以不要**`'color': '2E9ECE'`**使用 this **`'color': '#2E9ECE'`**。您可能还想改进您的风格，我已将您的最后一次悬停重写为如下内容：

```
$('ul.menu li a').hover(
    function() {
        // do this on hover
        $(this).animate({
            'borderBottomColor': '#2E9ECE',
            'color': '#2E9ECE'
        }, 'slow');
    }, 
    function() {
        // do this on hover out
        $(this).animate({
            'borderBottomColor': '#FFDF85',
            'color': '#FEFEFE'
        }, 'slow');
    }
); 
```

在我看来，它更具可读性和更短。看看 jQuery API [hover](http://api.jquery.com/hover/) and [animate](http://api.jquery.com/animate/)

**更新**：我已经验证，此代码有效（使用最新版本的 FireFox 和 Chrome 测试）：

```
<html>                                                                  
<head>                                                                  
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>  
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script> 
<script type="text/javascript">                                         
    $(function() {
        $("a").hover(
            function() {
                $(this).animate({ color: "#00ff00" }, 'slow');
            },function() {
                $(this).animate({ color: "#ff0000" }, 'slow');
        });
    });
</script>                                                               
</head>                                                                 
<body>                                                                  
    <a href="#">aaa</a><br />
    <a href="#">bbb</a><br />
</body>                                                                 
</html> 
```

# c# - C# Outlook AddIn：如何确定 AppointmentItem 属于哪个日历？

> ID：11018485
> 
> 赞同：1
> 
> 时间：2012-06-13T15:38:46.517
> 
> 标签：c#, outlook, add-in, appointment

我想确定 AppointmentItem 属于哪个日历。

场景如下：

交换管理员可以有权为会议室（通过简单地在会议室日历中创建约会）和自己（在他自己的日历中）创建约会。如何确定管理员当前查看的项目（检查员）是否来自会议室日历？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:51:44.743

If this is Outlook 2007-2010, compare MAPIFolder.Store of the MAPIFolder object returned by the AppointmentItem.Parent property.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-22T21:19:41.957

```
Outlook.Folder AppointmentFolder = appointmentItem.Parent as Outlook.Folder;
Messagebox.Show(appointmentItem.FullFolderPath); 
```

# javascript - 插入javascript全局变量 HTML 正文中的标记

> ID：11018487
> 
> 赞同：2
> 
> 时间：2012-06-13T15:39:00.037
> 
> 标签：javascript, html

我在 HTML 中有以下标签：

```
<div data-dojo-type="dojox.data.XmlStore" 
     data-dojo-props="url:'http://135.250.70.162:8081/eqmWS/services/eq/Equipment/All/6204/2', label:'text'" 
     data-dojo-id="bookStore3"></div> 
```

我在脚本部分的几个全局变量中有值 6204 和 2：

```
<html>
  <head>
     <script>
      ...
      var newNeId = gup('neId');
      var newNeGroupId = gup('neGroupId');
      ...
     </script>
  </head>
</html> 
```

是否可以在 HTML 正文的 div 标签中包含这些变量？如果是这样，怎么做？

为了更清楚地说明这一点，我需要在标签中包含如下所示的 URL：

```
url: 'http://135.250.70.162:8081/eqmWS/services/eq/Equipment/All/'+newNeGroupId+'/'+newNeId 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:53:13.367

我根据您的要求进行了更改：

```
<html>
    <head>
        <script type="text/javascript">
            // example data
            var newNeId = 10;
            var newNeGroupId = 500;
            window.onload = function(e){
                var myDiv = document.getElementById("myDiv");
                myDiv.setAttribute("data-dojo-props", "url:'http://135.250.70.162:8081/eqmWS/services/eq/Equipment/All/" + newNeId + "/" + newNeGroupId + "', label:'text'");
            }
        </script>
    </head>
    <body>
        <div id="myDiv" data-dojo-type="dojox.data.XmlStore" 
     data-dojo-props="url:'http://135.250.70.162:8081/eqmWS/services/eq/Equipment/All/6204/2', label:'text'" 
     data-dojo-id="bookStore3"></div>
    </body>
</html>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:45:30.193

您可以将它们添加到使用与Dojo`<div>`相同的数据列表模式 ( [MDN docu ) 中：](https://developer.mozilla.org/en/DOM/element.dataset)

```
<div id="savebox" data-newNeId="6204" data-newNeGroupId="2"></div> 
```

然后这些属性可由`element.dataset.itemName`.

```
var div = document.querySelector( '#savebox' );
// access
console.log( div.dataset.newNeId );
console.log( div.dataset.newNeGroupId ); 
```

正如@EricFortis 指出的那样，问题仍然存在，为什么要这样做。这只有在您从服务器端传递这些值时才有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T15:48:03.403

取一个父 div，然后设置其 id，然后您可以使用属性重写整个 div 标签`innerHTML`。

```
document.getElementById('id of parent div').innerHTml="<div data-dojo-type=/"dojox.data.XmlStore/" 
 data-dojo-props=/"url:'http://135.250.70.162:8081/eqmWS/services/eq/Equipment/All/6204/2', label:'text'/" 
 data-dojo-id=/"bookStore3/"></div>"; 
```

您现在可以附加您想要的值`innerhtml`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T16:03:53.543

这是简单的本机 js 代码

```
var body = document.getElementsByTagName('body')[0];
var myDiv = document.createElement('div');
myDiv.setAttribute('id', 'myDiv');
var text = 'newNeId: ' + newNeId + 
'<br/> newNeGroupId: ' + newNeGroupId';
body.appendChild(myDiv);
document.getElementById('myDiv').innerHTML = text; 
```

# python - 我可以使用多处理使这个并行化吗？

> ID：11018489
> 
> 赞同：1
> 
> 时间：2012-06-13T15:39:07.787
> 
> 标签：python

此代码来自：[http ://code.activestate.com/recipes/577090-file-encryption-using-stream-cipher/](http://code.activestate.com/recipes/577090-file-encryption-using-stream-cipher/)

```
import sys 
import random 

if len(sys.argv) != 4: 
    print "Usage: encdec_.py longintkey [path]filename1 [path]filename2" 
    sys.exit()   
random.seed(long(sys.argv[1])) # key 
f1 = open( sys.argv[2], "rb") 
bytearr = map (ord, f1.read () ) 
f2 = open( sys.argv[3], "wb" ) 
for i in range(len(bytearr)): 
    f2.write(chr(bytearr[i] ^ random.randint(0, 255))) 
f1.close() 
f2.close() 
```

这段代码可以并行使用`multiprocessing`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T15:47:22.873

通常，您会将文件分成多个部分并将每个部分发送到单独的进程以进行多处理，但这在这种情况下不起作用，因为您需要从同一个种子顺序生成随机数。

如果您愿意更改加密算法，则可以使用多种替代方法将其设置为能够处理多个块。但是“流密码”特别不容易适用于这种事情。

您可以先生成随机数，然后将这些生成的数字连同它们的位置一起提供给多个进程，但这更有可能减慢您的速度而不是加快您的速度。

所以我会说“不”，你不能让它多处理，至少不是以实际的方式。

（我假设这是一个实验或学习练习，您不会尝试将其用于严肃的加密。如果您尝试将其用于严肃的事情，有许多功能齐全的加密库函数可供选择。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:48:52.157

您不能并行化 IO 操作。所以你应该做的是读取输入文件，创建一个随机值列表，然后使用多处理创建字符串。然后你可以将它写入你的输出文件。为此，请创建如下函数：

```
def myprocessing(args):
    byte, randVal = args
    return chr(ord(byte) ^ randVal) 
```

字节来自 f1。randVal 来自随机值列表。然后，您可以将 pool.map 与 myprocessing 一起使用并写入结果。

# php - DW插入代码说明

> ID：11018491
> 
> 赞同：-1
> 
> 时间：2012-06-13T15:39:20.807
> 
> 标签：php, insert, dreamweaver

嗨，你们能帮我分解一下这个 Dreamweaver 插入代码向导，尤其是`if (!function_exists("GetSQLValueString")) { ....}`代码的一部分：

```
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "",$theNotDefinedValue = "") 
{

$theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
case "int":
  $theValue = ($theValue != "") ? intval($theValue) : "NULL";
  break;
case "double":
  $theValue = ($theValue != "") ? "'" . doubleval($theValue) . "'" : "NULL";
  break;
case "date":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;
case "defined":
  $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
  break;

 }
  return $theValue;
}
}

$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form")) {
  $insertSQL = sprintf("INSERT INTO feedback (name, email, phone, service, message) VALUES (%s, %s, %s, %s, %s)",
                       GetSQLValueString($_POST['name'], "text"),
                       GetSQLValueString($_POST['email'], "text"),
                       GetSQLValueString($_POST['phone'], "text"),
                       GetSQLValueString($_POST['service'], "text"),
                       GetSQLValueString($_POST['message'], "text"));

  mysql_select_db($database_kojexconsult, $kojexconsult);
  $Result1 = mysql_query($insertSQL, $kojexconsult) or die(mysql_error());

  $insertGoTo = "success.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";
    $insertGoTo .= $_SERVER['QUERY_STRING'];
  }
  header(sprintf("Location: %s", $insertGoTo));
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:22:36.047

我看看能不能给你分解一下。

初始 if 检查函数是否尚未定义 (http://php.net/manual/en/function.function-exists.php)。然后它遍历并定义函数 GetSQLValueString。

函数 GetSQLValueString 执行以下操作：

*   它使用 get_magic_quotes_gpc 执行三元 if 检查（获取 magic_quotes_gpc 的当前配置设置）。如果它通过，它会删除 $theValue，否则它只返回 $theValue。
*   在执行 mysql_real_escape_string 或 mysql_escape_string 之前，另一个三元 if 检查是否执行以查看“mysql_real_escape_string”是否存在。
*   它选择与 $theType 变量匹配的情况，并将 $theValue 设置为适当的值。
*   最后，它返回值，因此它可以用于代码中的任何用途。

其余代码是非常简单的数据库插入片段。

$editFormAction 由 php 运行的任何脚本设置，例如 insert.php。一个 if 检查以确认有一个查询字符串。如果有查询字符串，它会附加到 $editForm 操作的末尾。使用上面的 PHP_SELF，这可能是 insert.php?name=Tim&email=hello@world.com&phone=8675309。

下一部分是向数据库中插入信息的神奇之处。

if 检查是否设置了 MM_insert 并且它的值是 form 在继续数据库插入之前。它本质上是一个健全性检查。在那之后，它为变量 $insertSQL 提供来自格式化字符串的值以及从表单传递的信息。您将看到它使用前面的函数 GetSQLValueString 来确保数据已准备好进入数据库。一旦 $insertSQL 获得所有值，它就会选择数据库然后执行查询。

之后，为 $insertGoTo 设置了 success.php。if 检查 QUERY_STRING 是否已传递到此页面。如果有 QUERY_STRING，它会将其附加到 success.php (success.php?name=Tim&email=hello@world.com&phone=8675309)。在 if 检查之后，它通过调用 header 来重定向页面。

我希望这些信息可以帮助您了解脚本的细分。

----- 个人备注 -----

Dreamweaver 不是用于开发 PHP 代码的出色应用程序。如果您想要一个出色的 IDE 用于 PHP，我推荐 PHPStorm(http://www.jetbrains.com/phpstorm/)。我已经使用它两年多了，并且喜欢它。我将它与一个出色的文本编辑器 SublimeText2 (http://www.sublimetext.com/2) 结合使用。

# jquery - fck编辑器ajax数据加载不起作用

> ID：11018498
> 
> 赞同：1
> 
> 时间：2012-06-13T15:39:30.550
> 
> 标签：jquery, ajax, json, editor, fckeditor

fck 编辑器加载 ajax 数据不起作用为什么？问题是茶区。将数据发布到 $("#question").val(data.question); 但不显示 textarea 编辑器。

```
$.ajax({
     url: "get_q.php",
     data: ('.$formParams.'),
     type: "POST",
     datatype: "json",
     success: function (data) {
         if (data.ret_val == "ok") {
             $("#ad_edit_id").val(data.id);
             $("#question").val(data.question);

         }
         if (data.ret_val == "error") {
             alert("error");
         }
     }
 }); 
```

# java - Guava LoadingCache - 如何处理后备存储中不存在的键

> ID：11018503
> 
> 赞同：6
> 
> 时间：2012-06-13T15:39:54.340
> 
> 标签：java, caching, guava

我正在使用[CacheBuilder](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html)和[LoadingCache](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/LoadingCache.html)来实现数据库数据的内存缓存。

假设客户端在缓存中查询后备存储中不存在的项目。我希望客户知道没有找到指定键的数据。处理此问题的最佳方法是什么？

*   在缓存中存储表示“无数据”的特殊值。
*   在缓存中不存储任何内容并引发异常。
*   其他想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T07:44:31.680

我总是通过以下方式解决这个问题。

```
interface KeyValueService<K,V> {
    V get(K key);
}

class CachingKeyValueService<K,V> {
    Cache<K,Optional<V>> cache;
    V get(K key) {
        return cache.get(key).orNull();
    }

} 
```

理想情况下，您会将 KeyValueService 的接口更改为始终返回 Optional，但有时这是不可能的。

您可以使用加权来快速清除所有 Optional.ABSENT 引用。

# windows-8 - 如何在 Metro 风格应用程序中使用 SettingsPane 和 MVVM Light

> ID：11018505
> 
> 赞同：0
> 
> 时间：2012-06-13T15:39:56.293
> 
> 标签：windows-8, mvvm-light, microsoft-metro

我将 MVVM Light Framework 用于 Metro 风格的应用程序。

我想在 SettingsPane 中添加一个命令来显示关于页面。关于页面应显示在右侧（如预装的日历应用程序）。对于测试，我在 App.xaml.cs 的 OnLaunched 方法中添加了以下行：

```
SettingsPane.GetForCurrentView().CommandsRequested += App_CommandsRequested; 
```

和以下事件处理程序：

```
void App_CommandsRequested(SettingsPane sender, SettingsPaneCommandsRequestedEventArgs args)
{
    // Add an About command
    var about = new SettingsCommand("about", "About", (handler) =>
    {
        // show about page in flyout transition...
    });

    args.Request.ApplicationCommands.Add(about);
} 
```

这是唯一的方法吗？如何弹出关于页面？有小费吗...？

感谢帮助！迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:41:30.613

**回答第一个问题：**
据我所知，这是做类似事情的唯一方法。

**要回答第二个问题：**
要弹出关于页面，您可以这样做：

```
// Add an About command
var about = new SettingsCommand("about", "About", (handler) =>
{
    // show about page in flyout transition...
    var currentPane = new AboutPane(); // the aboutpane is a page
    var myPopup = new Popup();

    myPopup.IsLightDismissEnabled = true;
    myPopup.Width = _settingsWidth;
    myPopup.Height = Window.Current.Bounds.Height;

    myPopup.Width = 346;
    myPopup.Height = Window.Current.Bounds.Height;

    myPopup.Child = currentPane;
    myPopup.SetValue(Canvas.LeftProperty, Window.Current.Bounds.Width - 346);
    myPopup.SetValue(Canvas.TopProperty, 0);
    myPopup.IsOpen = true;
});

args.Request.ApplicationCommands.Add(about); 
```

我希望这能解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T00:27:50.947

Michael，尝试使用[github 上 Callisto 项目中的 SettingsFlyout 控件](https://github.com/timheuer/callisto)

您将需要类似的东西：

```
using Callisto.Controls;

//... other code here

//in your callback for handling the settings command:

// show about page in flyout transition...
var settingsFlyout = new SettingsFlyout();
settingsFlyout.Content = new AboutControl(); //this would be your own user control that contains the about page content

settingsFlyout.IsOpen = true; 
```

# django - 将 Django 站点移动到另一个服务器 - WSGIScriptAlias 导致问题

> ID：11018509
> 
> 赞同：0
> 
> 时间：2012-06-13T15:40:07.327
> 
> 标签：django, apache, mod-wsgi, django-wsgi

我正在将 django 站点移至新服务器。在旧服务器上，django 站点的访问方式类似于 mysite.com/ ，但现在，我们想通过 mysite.com/mysite 访问它，并让 mysite.com 处理其他事情。我对 apache 进行了以下更改，如下所示：

```
 WSGIDaemonProcess mysite processes=2 threads=15 display-name=%{GROUP}
    WSGIProcessGroup mysite
    WSGIScriptAlias /mysite /srv/www/django.wsgi
    #WSGIScriptAlias /mysite /srv/www/django.wsgi  #previous config         

    <Directory /srv/www/mysite/mysite >
            Order allow,deny
            Allow from all
    </Directory>

    Alias /site_media "/srv/www/mysite/site_media/"
    Alias /admin_media "/srv/www/mysite/admin_media/" 
```

这似乎工作得很好——将浏览器指向 mysite.com/unity/admin 允许我正确访问管理页面，并正确查看相应的应用程序。然而，任何使用自定义模板的东西似乎都是半生不熟的。例如，下面的模板中有一个条目，如下所示：

```
 {% ifcodable cl.model %}<li><a href="/report/{{ app_label }}/{{ cl.opts.verbose_name }}" class="link">Coding Report</a></li>{% endifcodable %} 
```

这会将页面重定向到

```
http://mysite.com/report/texas/texas 
```

相对于

```
http://mysite.com/mysite/report/texas/texas 
```

我不确定模板是否设置不正确，或者它是否与新别名有关。我的 urls.py 看起来像这样：

```
from django.conf.urls.defaults import *
from django.conf import settings
from django.contrib import admin
admin.autodiscover()
urlpatterns = patterns('',
    .....
    (r'^report/([a-zA-Z]+?)/([a-zA-Z]+?)/(overall|\d+)/{0,1}$', 'mysite.k.views.performance'),
    (r'^report/(.+?)/(.+?)/{0,1}$', 'mysite.k.views.report'),
    ..... 
```

我的 django.wsgi 文件如下所示：

```
import os,sys
sys.path.append('/srv/www/mysite')
sys.path.append('/srv/www/mysite/mysite')
sys.path.append(os.path.dirname(os.path.abspath(__file__)) + '/..')
os.environ['DJANGO_SETTINGS_MODULE'] = 'settings'
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

我不知道应该做些什么来纠正这个问题。我对 django 很陌生，所以如果有一个邪恶的简单解决方案，我深表歉意。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:46:59.537

问题是您的网址以`/report`href 属性开头。从一个`/`意味着它应该相对于您的域的根开始。我相信你需要改变的是 Django 站点框架的配置方式，看起来[这个问题](https://stackoverflow.com/questions/1466708/run-django-with-url-prefix-subdirectory-app-works-but-urls-broken)已经有了答案。

此外，您可能应该在模板中使用[url 标签](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#url)，而不是在锚标签中硬编码 url。

# wcf - 以编程方式设置 basicHttpBinding 的 maxBufferPoolSize

> ID：11018510
> 
> 赞同：0
> 
> 时间：2012-06-13T15:40:10.487
> 
> 标签：wcf, visual-studio-2010, silverlight, basichttpbinding

我正在尝试将 maxBufferPoolSize 与 MaxReceivedMessageSize 和 MaxBufferSize 一起设置。但是，当我尝试设置它时，我收到消息“'maxBufferPoolSize' 不是 'System.ServiceModel.BasicHttpBinding' 的成员。” 我正在使用 VS 2010。从 MS 文档中，MaxBufferpoolSize 是成员（[http://msdn.microsoft.com/en-us/library/system.servicemodel.basichttpbinding.maxbufferpoolsize](http://msdn.microsoft.com/en-us/library/system.servicemodel.basichttpbinding.maxbufferpoolsize)）。为什么我会收到这个错误？？？请帮忙。谢谢你。

```
 Dim basicHttpBinding As BasicHttpBinding = New BasicHttpBinding()
    Dim endpointAddress As EndpointAddress = New EndpointAddress("/test.svc")
    basicHttpBinding.MaxReceivedMessageSize = "2147483647"
    basicHttpBinding.MaxBufferSize = "2147483647"
    **basicHttpBinding.maxBufferPoolSize = "2147483647"**

    basicHttpBinding.OpenTimeout = New TimeSpan(0, 20, 0)
    basicHttpBinding.CloseTimeout = New TimeSpan(0, 10, 0)
    basicHttpBinding.ReceiveTimeout = New TimeSpan(0, 10, 0)
    basicHttpBinding.SendTimeout = New TimeSpan(0, 10, 0)

    Dim Svc As Svc= New ChannelFactory(Of Svc)(basicHttpBinding, endpointAddress).CreateChannel
    '... do the binding 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T23:46:13.180

根据评论，您使用的是 Silverlight，因此该框架中不存在该属性。Silverlight 中没有缓冲池，这就是它无法编译的原因。

# forms - Symfony2 Twig 表单小部件数组访问

> ID：11018515
> 
> 赞同：0
> 
> 时间：2012-06-13T15:40:36.703
> 
> 标签：forms, symfony, widget, twig

我在树枝模板中有一个带有多个选择（多对多关系）的表单小部件，我可以遍历复选框：

```
 {% for choice in form.downloads %}
            {{ form_widget(choice) }} {{ form_label(choice) }}<br />
  {% endfor %} 
```

我想直接访问这些选择（它们应该以不同的方式格式化结束）我尝试了几种语法，但不起作用

```
{{ form_widget(form.downloads.0) }} {{ form_label(form.downloads.0) }}<br />
{{ form_widget(form.downloads['0']) }} {{ form_label(form.downloads['0']) }}<br />
{{ form_widget(form.downloads[0]) }} {{ form_label(form.downloads[0]) }}<br /> 
```

我使用了错误的数组键还是数组访问通常是不可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:04:08.703

使用 Twig 时可以进行数组访问。我猜你在尝试访问第一个生成的复选框时遇到的错误

```
{{ form_widget(form.downloads.0) }} {{ form_label(form.downloads.0) }}<br /> 
```

是

```
Method "0" for object "Symfony\Component\Form\FormView" does not exist in ... 
```

因此，您只需使用复选框的子名称。你应该在你的 buildForm 中有类似的东西：

```
 $builder->add('childName', 'anyTypeYouWant', array()) 
```

但我猜你正在使用集合类型来生成你的复选框。在这种特定情况下

```
{{ form_widget(form.downloads.0) }} {{ form_label(form.downloads.0) }}<br /> 
```

应该可以正常工作！我已经用它来访问特定的集合字段而无需自定义键。

**您**还应该使用 twig 调试扩展来检查您的 form.downloads

```
{% debug form.downloads %} 
```

如果调试不起作用，您必须添加“app/config/config.yml”文件

```
services:
    debug.twig.extension:
        class: Twig_Extensions_Extension_Debug
        tags: [{ name: 'twig.extension' }] 
```

# html - 为什么没有位置的 img 就像“绝对”？

> ID：11018519
> 
> 赞同：0
> 
> 时间：2012-06-13T15:41:13.983
> 
> 标签：html, css

检查此[代码](http://jsfiddle.net/NUBXm/)：

### HTML：

```
<div style="position: absolute; visibility: visible; width: 172px;">
    <img class="inf-image" align="right" src="http://www.ilritaglio.it/wp-content/uploads/2012/02/wee.jpg">

    <div class="inf-content">
        Hello        
    </div>   
</div> 
```

### CSS：

```
.inf-image
{
    position: relative;
    cursor: pointer;
    margin: 3px 8px 0px 0px;  
    width:20px;   
}

.inf-content {
    background-color: #FF0000;
    padding: 10px;
    width: 150px;
    height:50px;
} 
```

看起来 div （这是相对的）在图像下方（看起来是绝对的）。为什么？它应该将 div 推过它的高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:43:29.503

浮动元素（如`<img align="right">`）仅偏移块元素的内容，但不偏移其背景，因此在`div`图像下方可以看到 的红色背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:50:56.040

这都是关于 CSS 堆叠上下文的。如果你给一个元素另一个元素，它将被移动到它自己的堆叠上下文中`position`。`static`从逻辑的角度来看，`.inf-image { position: relative; }`不再是父母的孩子`DIV`或兄弟姐妹`.inf-content`。你现在拥有的是一个里面`DIV`有另一个`DIV`（红色的）。图像本身在其自身上下文中“悬停”在文档根 ( ) 下方，`HTML`并且仅相对于源中位于它之前的那个元素定位。

上面显示了哪个元素可以通过 和 的组合来`position`确定`z-index`。

[https://developer.mozilla.org/en/Understanding_CSS_z-index](https://developer.mozilla.org/en/Understanding_CSS_z-index)

[http://reference.sitepoint.com/css/stacking](http://reference.sitepoint.com/css/stacking)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T15:51:11.113

根据您的 css 和 html，您的 div 是绝对定位的，而您的图像是相对定位的。这是你的问题。

```
<div style="position: relative; visibility: visible; width: 172px;">
    <img class="inf-image"src="http://www.ilritaglio.it/wp-content/uploads/2012/02/wee.jpg">

    <div class="inf-content">
        Hello        
    </div>   
</div>

.inf-image
{
    position: absolute;
    cursor: pointer;
    margin: 3px 8px 0px 0px;  
    width:20px;
    right:0;
}

.inf-content {
    background-color: #FF0000;
    padding: 10px;
    width: 150px;
    height:50px;
} 
```

# jquery - 敲除js单击和双击

> ID：11018525
> 
> 赞同：15
> 
> 时间：2012-06-13T15:41:36.530
> 
> 标签：jquery, knockout.js

我希望能够将单击事件和双击事件绑定到一段文本。我知道我可以使用

```
data-bind ="event: { dblclick: doSomething } 
```

双击，但我还需要能够在单击时执行不同的功能。有什么建议么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-13T18:25:21.203

```
<div data-bind="singleClick: clicked, event : { dblclick: double }">
    Click Me
</div> 
```

这将过滤掉也是双击的单击。

```
ko.bindingHandlers.singleClick= {
    init: function(element, valueAccessor) {
        var handler = valueAccessor(),
            delay = 200,
            clickTimeout = false;

        $(element).click(function() {
            if(clickTimeout !== false) {
                clearTimeout(clickTimeout);
                clickTimeout = false;
            } else {        
                clickTimeout = setTimeout(function() {
                    clickTimeout = false;
                    handler();
                }, delay);
            }
        });
    }
}; 
```

[这](http://jsfiddle.net/TFVh9/62/)是一个演示。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-05-29T03:31:34.767

上面的答案非常有帮助，但没有给出我认为 OP 所追求的确切解决方案：一个简单的 Knockout 绑定，允许独占单击和双击事件。我知道这篇文章是一年前的，但是我在今天想做同样的事情时发现了这篇文章，所以我发帖以防这个答案对其他人有用。

下面的示例似乎符合 OPs 要求，并且可以节省一些时间（免责声明：有限的跨浏览器测试）。JSFiddle：http: [//jsfiddle.net/UxRNy/](http://jsfiddle.net/UxRNy/)

此外，还有关于您是否应该首先使用它的问题（移动浏览器、减慢页面速度、可访问性等） - 但这是另一篇文章（例如[https://ux.stackexchange.com/questions/7400 /应该双击避免在网络应用程序中](https://ux.stackexchange.com/questions/7400/should-double-click-be-avoided-in-web-applications)）

示例视图用法：

```
<div data-bind="singleOrDoubleClick: { click: singleClick, dblclick: doubleClick }">
    Click or double click me...
</div> 
```

捆绑：

```
ko.bindingHandlers.singleOrDoubleClick= {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var singleHandler   = valueAccessor().click,
            doubleHandler   = valueAccessor().dblclick,
            delay           = valueAccessor().delay || 200,
            clicks          = 0;

        $(element).click(function(event) {
            clicks++;
            if (clicks === 1) {
                setTimeout(function() {
                    if( clicks === 1 ) {
                        // Call the single click handler - passing viewModel as this 'this' object
                        // you may want to pass 'this' explicitly
                        if (singleHandler !== undefined) { 
                            singleHandler.call(viewModel, bindingContext.$data, event); 
                        }
                    } else {
                        // Call the double click handler - passing viewModel as this 'this' object
                        // you may want to pass 'this' explicitly
                        if (doubleHandler !== undefined) { 
                            doubleHandler.call(viewModel, bindingContext.$data, event); 
                        }
                    }
                    clicks = 0;
                }, delay);
            }
        });
    }
}; 
```

以上是上面的例子和这里的例子的组合：[https](https://gist.github.com/ncr/399624) ://gist.github.com/ncr/399624 - 我刚刚合并了这两个解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-15T21:37:13.367

@madcapnmckay 提供了一个很好的答案，下面是使用相同想法提供双击的修改版本。并且通过使用最新版本的淘汰赛，虚拟机作为上下文传递给处理程序。这可以通过单击同时工作。

```
<div data-bind="doubleClick: clicked">
    Double click Me
</div> 
```

--

```
ko.bindingHandlers.doubleClick= {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var handler = valueAccessor(),
            delay = 200,
            clickTimeout = false;

        $(element).click(function() {
            if(clickTimeout !== false) {
                handler.call(viewModel);
                clickTimeout = false;
            } else {        
                clickTimeout = setTimeout(function() {
                    clickTimeout = false;
                }, delay);
            }
        });
    }
}; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-13T15:57:40.100

首先，我根本不建议`click`绑定。相反，您应该使用jQuery 中的`"click"`和处理程序：`"dblclick"`

```
$(someParentElement).on('click', 'your span selector', function (event) {
    var myViewModelFragment = ko.dataFor(this);
    // your code here
});

$(someParentElement).on('dblclick', 'your span selector', function (event) {
    var myViewModelFragment = ko.dataFor(this);
    // your code here
}); 
```

**编辑：**另请参阅[Niko](https://stackoverflow.com/a/11018833/3980)关于支持单击和双击的建议。基本上，[您应该手动计算点击次数](https://stackoverflow.com/a/7845282/3980)并相应地调用不同的函数。我假设 jQuery 会为你处理这个问题，但不幸的是，它没有。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-10T10:01:54.290

这是我对该问题的编程解决方案：

```
var ViewModel = function() {
  var self = this;
  this.onSingleClick = function() {
    self.lastTimeClicked = undefined;
    console.log('Single click');
  };

  this.onDoubleClick = function() {
    console.log('Double click');
  };

  this.timeoutID = undefined;

  this.lastTimeClicked = undefined;
  this.clickDelay = 500;
  this.clickedParagraph = function(viewModel, mouseEvent) {
    var currentTime = new Date().getTime();
    var timeBetweenClicks = currentTime - (viewModel.lastTimeClicked || currentTime);
    var timeToReceiveSecondClick = viewModel.clickDelay - timeBetweenClicks;

    if (timeBetweenClicks > 0 && timeBetweenClicks < viewModel.clickDelay) {
      window.clearTimeout(viewModel.timeoutID); // Interrupt "onSingleClick"
      viewModel.lastTimeClicked = undefined;
      viewModel.onDoubleClick();
    } else {
      viewModel.lastTimeClicked = currentTime;
      viewModel.timeoutID = window.setTimeout(viewModel.onSingleClick, timeToReceiveSecondClick);
    }
  };
};

ko.applyBindings(new ViewModel(), document.getElementById("myParagraph"));
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-debug.js"></script>
<p id="myParagraph" data-bind="click: clickedParagraph">Click me</p>
```

每个“双击”都是通过两次单击创建的。如果有“双击”，我们必须确保第一次单击的事件处理程序不会被执行（这就是我使用`window.setTimeout`&的原因`window.clearTimeout`）。在设置计时器时，我们还必须考虑到第一次单击元素可能已经是双击。

在我的代码中，我将其设置`clickDelay`为 500 毫秒。所以500ms内的两次点击被识别为“双击”。你也可以增加这个值来测试我的`clickedParagraph`函数的行为。

# jquery - 使用 jQuery / AJAX 解码 JSON

> ID：11018527
> 
> 赞同：7
> 
> 时间：2012-06-13T15:41:41.413
> 
> 标签：jquery, ajax, json, decode

我正在尝试使用 jQuery 解码 JSON。这是我得到的（例如一堂课，这里有一个学生）：

```
"{"Students":[{"Name":John,"Grade":17,}],"TotalClass":17,"TotalCount":1,}" 
```

这就是我所做的：

```
$j.ajax({
    type: 'POST',
    url: 'class.aspx/getClass',
    contentType: 'application/json; charset=utf-8',
    dataType: 'json',
    success: function (msg) {
        $j.each(msg, function (index, element) {
            alert(element.TotalClass);
        });
    },
}); 
```

它在警报中一直说未定义（但我收到了正确的 JSON）。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T15:50:48.523

```
{"Students":[{"Name":John,"Grade":17,}],"TotalClass":17,"TotalCount":1,} 
```

**不是有效的 JSON ！**

假设你有一个`JSON`这样的有效

```
{
    "Students": [
        {
            "Name": "John",
            "Grade": "17"
        }
    ],
    "TotalClass": " 17",
    "TotalCount": "1"
} 
```

您可以访问这样的值

```
alert("TotalClass : "+msg.TotalClass);
//loop thru students
$.each(msg.Students,function(index,item){
   alert(item.Name+ " - "+item.Grade)
}); 
```

工作样本：http: [//jsfiddle.net/ncbLF/5/](http://jsfiddle.net/ncbLF/5/)

使用[jsonlint](http://jsonlint.com/)验证 JSON

所以你的代码可以简化为

```
$.getJSON("class.aspx/getClass",function(msg){

    alert("TotalClass : "+msg.TotalClass);
    $.each(msg.Students,function(index,item){
        alert(item.Name+ " - "+item.Grade)
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T15:46:14.867

试着提醒

```
$j.each(msg, function (key, element) {
    alert(key); // output: Students, TotalClass..
    alert(element); //output: [{"Name":John,"Grade":17,}, 17..
}); 
```

### 笔记

正如您设置的`dataType: 'json'`那样，我认为您不需要任何额外的解析工作，并且鉴于 JSON 有错误，不知道它是您编写的还是最初从服务器发送的。

你不需要这条线

```
contentType: 'application/json; charset=utf-8', 
```

您有效的 json 应如下所示：

```
{
    "Students": [
        {
            "Name": "John",
            "Grade": "17"
        }
    ],
    "TotalClass": " 17",
    "TotalCount": "1"
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T15:47:02.167

`contentType`是发送*到*服务器的数据类型，而不是来自。删除它。

您在问题中包含的 JSON。那是服务器返回的*确切*JSON 吗？因为如果是，您不需要`$.each`. 你有一个对象，你应该只需要`$.each`循环一个对象数组。

所以，试试吧`alert(msg.TotalClass)`。

此外，该 JSON 无效。你有一个额外的`,`after`TotalCount`和 after `Grade`。另外，`John`应该用双引号。

# visual-c++ - MFC 工具栏中的弹出菜单

> ID：11018528
> 
> 赞同：0
> 
> 时间：2012-06-13T15:41:42.507
> 
> 标签：visual-c++, mfc

我在 MFC 中创建了工具栏，现在我正在尝试在其中一个按钮上添加弹出菜单。谁能给我一些提示。

事实上，我不知道如何显示曾经与工具栏按钮相连的向下箭头。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:24:34.823

看到这个[http://msdn.microsoft.com/en-us/library/1ke6s1fc(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/1ke6s1fc%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:07:41.703

为了创建弹出菜单，我已经覆盖了这个功能。

```
afx_msg int OnCreateControl(LPCREATECONTROLSTRUCT lpCreateControl); 
```

# javascript - 谷歌新闻时间轴

> ID：11018536
> 
> 赞同：0
> 
> 时间：2012-06-13T15:42:08.680
> 
> 标签：javascript, ajax, timeline

我想重新创建 Google 的新闻时间线。

[http://i.stack.imgur.com/zcIsw.png](http://i.stack.imgur.com/zcIsw.png)

你能推荐一些合适的 JavaScript/Ajax 库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:48:24.077

我喜欢[明喻时间线。](http://www.simile-widgets.org/timeline/)

如果您想在时间轴中有很多缩略图，请参阅[Compact Painter](http://www.simile-widgets.org/timeline/examples/compact-painter/compact-painter.html)版本。（不幸的是，演示中使用的许多图像都已移动，因此出现了空白缩略图。）

免责声明：我过去曾为此做出过贡献。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:05:25.240

也许您可以使用 CHAP 链接库中的时间线：

[http://almende.github.com/chap-links-library/timeline.html](http://almende.github.com/chap-links-library/timeline.html)

使用此时间线，您无法创建与显示的屏幕截图完全相同的视图，但您可以将项目放在“盒子”中。CHAP 链接时间线非常灵活且易于使用。您可以将自己的 HTML 格式的项目放在时间轴中，并根据需要完全调整 css。

# linq - LINQ：查询正文必须以 select 子句或 group 子句和其他错误结尾

> ID：11018538
> 
> 赞同：1
> 
> 时间：2012-06-13T15:42:20.723
> 
> 标签：linq, linq-to-sql

我有以下 SQL 语句：

```
CASE  
WHEN wt.pmtlr_oi IS NULL OR (SELECT COUNT(*) FROM mc.SCHEDENTRY WITH (NOLOCK) WHERE wt_oi = wt.wtskoi AND shedref_oi NOT IN (SELECT shdoi FROM mc.SCHDULE WITH (NOLOCK) WHERE aenm LIKE '%Breakin%')) = 0   AND wt.pmtlr_oi IS NULL     
THEN 'Break-In' 
ELSE 'Planned' 
END AS schedule 
```

我已经翻译成：

```
Schedule = wt.pmtlr_oi == null || (from sch in SCHEDENTRies where wt_oi == wt.wtskoi && shedref_oi !(from sc in SCHDULEs
    where sc.Aenm.Contains("Breakin") select sc.Shdoi)).Count() == 0 && wt.pmtlr_oi == null ? "Break-In" : "Planned"} 
```

下面是它在 select 语句中的样子：

```
select new {Schedule = wt.pmtlr_oi == null || (from sch in SCHEDENTRies where wt_oi == wt.wtskoi && shedref_oi !(from sc in SCHDULEs
    where sc.Aenm.Contains("Breakin") select sc.Shdoi)).Count() == 0 && wt.pmtlr_oi == null ? "Break-In" : "Planned"}); 
```

但是，当我尝试运行它时，会出现一些我不知道如何解决的问题。第一个是编译器似乎不喜欢此处的 NOT IN：

```
&& shedref_oi !(from sc in SCHDULEs 
```

我收到“查询正文必须以 select 子句或 group 子句结尾”错误。

编译器也不喜欢这样：

```
select sc.Shdoi)).Count() == 0 
```

在外括号中，我收到“语法错误”，“预期”错误，在期间我收到“预期声明”错误消息。

我将不胜感激解决此问题的一些帮助。

编辑：

好的，在评论之后，我将 LINQ 语句更正为如下所示：

```
select new {Schedule = wt.pmtlr_oi == null || (from sch in SCHEDENTRies where wt_oi == wt.wtskoi && !(from sc in SCHDULEs
    where sc.Aenm.Contains("Breakin") select sc.Shdoi).Contains(shedref_oi)).Count() == 0 && wt.pmtlr_oi == null ? "Break-In" : "Planned"}); 
```

并且编译器喜欢它。但是，它仍然不喜欢 .Count()。我收到“预期声明”错误。我在为 sql SELECT COUNT(*) 使用 .Count() 时不正确吗？

# php - 如何确定哪台服务器更适合使用 PHP 下载 CDN 服务器上的分布式文件？

> ID：11018539
> 
> 赞同：0
> 
> 时间：2012-06-13T15:42:20.710
> 
> 标签：php, time, download, cdn

想象一下，我在多个服务器 (CDN) 上上传了一个文件，现在，当我想下载其中一个时，我想选择一个关于其下载时间和邻近性的最佳文件。如果我想用 PHP 实现它，我该怎么做？我怎样才能做出最好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:48:39.780

在我看来，您正在创建自己的 CDN，我强烈建议您不要这样做。现有的 CDN 进行了高度微调，并且您可以获得更多服务器，而且价格合理。

如果你想知道它们是如何工作的，互联网上有很多关于这个主题的内容：

*   [提供内容时，如何从 CDN 中选择最佳端点？](http://blog.ashwinraghav.com/2012/02/20/how-are-the-optimal-end-points-chosen-from-a-cdn-when-content-is-served/)
*   [Amazons Cloudfront 页面](http://aws.amazon.com/cloudfront/)（向下滚动，有**很多**信息！）
*   [CDN DNS 是如何工作的？](https://stackoverflow.com/questions/2103753/how-does-cdn-dns-work)
*   [CDN 在技术方面是如何工作的？](https://webmasters.stackexchange.com/questions/25374/how-does-a-cdn-work-on-the-tech-side)

# svn - 从 svn 下载完整的分支

> ID：11018545
> 
> 赞同：2
> 
> 时间：2012-06-13T15:42:39.043
> 
> 标签：svn

我想下载（[gcc 的 cilk 分支](http://gcc.gnu.org/svn/gcc/branches/cilkplus-4_7-branch/)）用我的 gcc-4.7 构建它。有什么简单的方法可以使用svn下载它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T15:43:52.817

```
svn co http://gcc.gnu.org/svn/gcc/branches/cilkplus-4_7-branch/ 
```

# codeigniter - 谷歌在我的 codeigniter datepicker 上索引未来的日期

> ID：11018547
> 
> 赞同：0
> 
> 时间：2012-06-13T15:42:43.483
> 
> 标签：codeigniter, datepicker, google-index

如果我在 Google 上搜索“harbour holiday 2 strand”，那么它会返回我的客户网站 www.padstow-self-catering.co.uk

问题是谷歌已经决定索引和未来日期，这可以从右侧边栏的数据选择器中看到。几乎所有针对特定假日物业的搜索都存在此问题，并且每个搜索的未来日期都不同。

我不知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:54:18.607

“2016”来自已编入索引的 URL：

```
http://www.padstow-self-catering.co.uk/properties/map/46/2016/12 
```

大概某个地方有一个带有该 URL 的页面，Google 将其编入索引。

就我个人而言，我可能会改为使用日期选择器参数 URL 参数：

```
http://www.padstow-self-catering.co.uk/properties/map/46?year=2016&month=12 
```

...或将其完全从您的链接中删除。无论哪种方式，谷歌都没有“决定索引”未来某个日期的页面——它们只是页面。

（注意：我为谷歌工作，但与网络搜索无关。此答案不应被视为任何“内幕”帖子，也不代表谷歌的观点。）

# asp.net - 如何在 ASP.NET 中结合 web.sitemap 和 SiteMapProvider

> ID：11018551
> 
> 赞同：0
> 
> 时间：2012-06-13T15:42:56.757
> 
> 标签：asp.net, sitemap, sitemapprovider

所以，这就是我正在做的事情。我有一个 ASP.NET Web 应用程序，其中站点地图通过 web.sitemap 显示在 site.master 文件中。这是site.master：

```
<asp:SiteMapDataSource ID="SiteMapDataSource1" runat="server" />
<asp:TreeView
 ID="TreeView1"
 runat="server"
 ataSourceID="SiteMapDataSource1"
 ExpandDepth="1">
    </asp:TreeView> 
```

这是 web.sitemap：

```
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
    <siteMapNode url="~/Default.aspx" title="Home"  description="Home">        
      <siteMapNode url="" title="Projects"  description="">        
      </siteMapNode>
      <siteMapNode url="" title="Configurations"  description="Configurations">
        <siteMapNode url="" title="Experiments" description="Experiments">
        </siteMapNode>
        <siteMapNode url="" title="Cell Line" description =""></siteMapNode>
        <siteMapNode url ="" title ="Drugs">
        </siteMapNode>
        <siteMapNode url ="" title="Manage Configurations" />
          <siteMapNode url="~/ExperimentConfigurationView.aspx" title ="Configure Experiements"/>
          <siteMapNode url="~/DrugConfigurationView.aspx" title="Configure Drugs"/>
        </siteMapNode>
      </siteMapNode>
      <siteMapNode url="" title="Drug Recipes" description="">
      </siteMapNode>
    </siteMapNode>
</siteMap> 
```

现在，这就是我遇到问题的地方。我想做的是将此站点地图与动态创建的 SiteMapProvider 结合起来，并填充此地图的子树。例如，“项目”、“实验”、“细胞系”和“药物配方”节点各有一个从数据库填充的子树。任何人都有意见或建议从哪里开始寻找？

总之 - 我想将叶子 siteMapNodes 指向一个 SiteMapProvider。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:28:24.907

解决方案：

我在根目录中添加了一个文件 DrugListProvider.cs。它包含用于动态生成子树的代码。

我在 Web.sitemap 中放置了以下节点，我希望子树出现在其中：

`<siteMapNode provider="DrugListProvider"/>`

最后，我将它包含在 web.config 文件中：

```
<siteMap>
  <providers>
    <add name="DrugListProvider" type="PrivoWeb.DrugListProvider"/>
  </providers>
</siteMap> 
```

# python - 根据字符串 repr (Python) 获取对象的实例

> ID：11018552
> 
> 赞同：0
> 
> 时间：2012-06-13T15:42:57.790
> 
> 标签：python

> **可能重复：**
> [Python：按 id 获取对象](https://stackoverflow.com/questions/1396668/python-get-object-by-id)

通常，当您看到实例的字符串表示形式时，它看起来像`<module.space.Class @ 0x108181bc>`. 我很好奇是否可以获取此字符串并获取实例的句柄。

就像是

```
 obj_instance = get_instance_form_repr("<module.space.Class @ 0x1aa031b>") 
```

我不相信这是可能的，但如果是的话，那将是非常有用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:07:00.503

您至少可以以令人讨厌且不可靠的方式对垃圾收集器跟踪的子集执行此操作。

```
def lookup_object_by_repr(myrep)
    import gc
    for obj in gc.get_objects():
        if repr(obj) == myrep:
           return obj 
```

如果您编写一个简单的 C 扩展并检查内存地址，您可以做更多的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:47:27.203

当然没有办法从它的 repr 中获取一个对象，因为任何类都可以在它的 repr 中返回它想要的任何东西。但是在 repr 中有一个指针的特定情况下，您基本上是在询问如何从指针中获取对象。哪个（至少在 C Python 中）与询问如何从其 id 获取对象完全相同。

没有内置的方法可以做到这一点，即使它很简单。这是故意的，因为这几乎总是一个坏主意。

如果您认为通过 id 获取对象有实际目的，那么您可能错了。特别是因为您必须处理通常自动处理的对象生命周期问题（并且在您背后，即使您尝试也很难手动处理它们）。例如，如果一个对象消失了，该对象的弱引用将变为空，但 id 仍指向已释放的内存，或稍后创建的另一个对象，或一个对象的一半和另一个对象的一半。当然，你在 C Python 中所做的任何事情都不会在 PyPy 或 jython 或 IronPython 中工作......</p>

但是，如果您只是想了解 C Python 运行时的工作原理，那么这是一个合理的问题，并且有一个合理的答案。可能最好的方法是创建一个 C 扩展模块。如果你不知道如何创建扩展模块，你真的应该先学习，然后再回到这个问题。如果这样做，您要实现的功能非常简单：

```
static PyObject *objectFromId(PyObject *self, PyObject *args) {
  PyObject *obj;
  if (!PyArg_ParseTuple(args, "n", &obj)) return NULL;
  Py_INCREF(obj);
  return obj;
} 
```

如果您愿意，您可以在 Pyrex/Cython 而不是 C 中执行此操作。或者您可以直接在 _ctypes 模块上调用 PyObj_FromPtr。但是，如果您想了解事情在这个级别上是如何工作的，那么明确发生的事情并明确地将“处理 C 指针”代码放在 C 中会更有意义。

进一步考虑，如果您想构建一种最佳猜测 objectFromRepr 用于修补目的，您可以。基本上：

*   使用匹配常见尖括号形式的正则表达式；如果匹配，则使用地址调用 objectFromId。
*   调用评估。

您可能希望在其中放置一个中间步骤：对于许多类型，repr 采用构造函数调用的形式，如 Class(arg1, arg2)，在这种情况下，最好将该形式与另一个正则表达式匹配并调用直接构造函数，而不是使用 eval。如果不出意外，它可能更有启发性，这就是这个练习的重点，对吧？

显然，这在现实生活中的代码中是一个比 objectFromId 更糟糕的想法。使用 eval 几乎总是不好的，并且 eval(repr(x)) == x 实际上并不能保证为真，并且您实际上在 id 情况下获得了对同一对象的新引用，但新对象带有eval 情况下的值相同，并且…</p>

PS，在您了解了所有这些在 C Python 中的工作原理之后，可能值得在另一个解释器（如 jython 或 IronPython）中进行类似的练习（尤其是当您表示本机 Java/.NET/etc. 对象时）。

# java - 在 Java Web 应用程序中打印

> ID：11018555
> 
> 赞同：1
> 
> 时间：2012-06-13T15:43:09.647
> 
> 标签：java, jakarta-ee, printing, jasper-reports, printing-web-page

七年前，我使用 VB6 为医疗通道中心开发了一个独立的应用程序。在没有打印对话框的情况下，只需单击一下即可打印小尺寸（219mm 至 140mm）的芯片。他们需要时不时地将报告从另一台打印机打印到完整的 A4 页面上。

这可以通过在变量中设置打印和纸张属性在 VB6 中轻松实现。现在中心想把它转换成一个web应用程序，但事先他们想确保打印功能可以在这样的web应用程序中实现。他们特别希望不要每次都带打印机对话框。

是否可以在不带打印机对话框的情况下使用 Java EE 在 Web 应用程序中更改打印机和纸张属性？（至少在 Jasper 报告等的支持下）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T15:55:39.893

有可能的; 但是，您需要记住将打印*哪个应用程序。*

如果是 Web 浏览器正在打印网页，那么您就不走运了，因为 Web 浏览器已经编码，并且将完全按照它总是做的那样做。

如果是嵌入在网页中的应用程序，只要该应用程序可以连接到客户端机器的打印资源，就可以；但是，通常这样的任务意味着应用程序是受信任的，因为远程计算机（Web 服务器）现在正在使用本地资源（客户端磁盘和打印配置）。您可能需要预先配置机器以提升该应用程序的信任级别，或者您可能会收到一个弹出窗口，声明远程机器（Web 服务器）正在尝试使用本地资源。

如果它是一个多层应用程序，并且 Web 服务器接收到来自 Web 应用程序的打印请求，那么 Web 服务器将进行打印。Web 服务器信任自己；但是，它的环境可能完全不同。它可能有权也可能无法连接到附近的打印机，具体取决于网络架构和安全策略的其余部分。

# asp.net - 使用 .asp 和 .aspx 页面

> ID：11018561
> 
> 赞同：1
> 
> 时间：2012-06-13T15:43:30.410
> 
> 标签：asp.net, web-services, asp-classic, hosting

这可能是错误的地方，但这对我来说是新的。不久前，我在 VS.NET 中进行了一些 ASP.NET 编程，我总是在菜单中进行调试以运行和测试该站点，我总是注意到它已编译......现在我有人要求我在他们的 ASP 上工作。 NET 网站，我的问题是（这种类型的托管新手）我只是编辑文件然后通过 FTP 上传它们还是我必须要求主机进行编译或其他什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:02:37.617

我假设您已经在 Visual Studio 中开发了一个项目。

如果这是一个**网站**而不是一个 Web 应用程序：

1.  在解决方案资源管理器中右键单击项目（不是解决方案）。
2.  点击“发布网站”
3.  设置您希望将网站发布到的本地位置。
4.  获取本地副本并将其上传到托管服务提供商的 Web 根目录

如果这是一个**Web 应用程序**，请检查托管服务提供商是否具有用于“一键发布”的 .axd 服务扩展名。如果提供商没有此功能：

1.  在解决方案资源管理器中右键单击项目（不是解决方案）。
2.  点击“发布...”
3.  将发布方法更改为“文件系统”
4.  设置目标位置并单击发布
5.  获取本地副本并将其上传到托管服务提供商的 Web 根目录

使用 Web 应用程序，您还可以通过 FTP 上传，如果您手头有所有 FTP 信息，这应该很容易。

# xml - 通过整个节点集比较属性值

> ID：11018563
> 
> 赞同：2
> 
> 时间：2012-06-13T15:43:42.283
> 
> 标签：xml, xslt

我有xml数据。并使用 xslt 转换对其进行解析。我需要找出特定元素的所有子元素是否具有相同的嵌套元素值。看：

如果我们有相同的值：

```
<parent>
   <child>
      <compare>1</compare>
   </child>
   <child>
      <compare>1</compare>
   </child>
</parent> 
```

我们应该复制所有树并将标志设置为“1”：

```
<parent>
   ...
   </child>
   <flag>1</flag>
</parent> 
```

如果我们有不同的值：

```
<parent>
   <child>
      <compare>1</compare>
   </child>
   <child>
      <compare>2</compare>
   </child>
</parent> 
```

我们应该复制所有树并将标志设置为“”：

```
<parent>
   ...
   </child>
   <flag/>
</parent> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:59:29.177

如果有什么与第一个不同，如何比较？

```
<xsl:template match="/parent">
  <parent>
    <xsl:copy-of select="*"/>
    <flag>
      <xsl:if test="not(child[1]/compare != child/compare)">1</xsl:if>
    </flag>
  </parent>
</xsl:template> 
```

这确实意味着如果你只有一个，它的标志将为 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T21:03:33.923

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output indent="yes"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="parent">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
            <flag>
                <xsl:variable name="comp" select="child[1]/compare"/>
                <!-- add flag value only if child/compare are the same -->
                <xsl:value-of select="child[1]/compare[
                    count(current()/child)
                    = 
                    count(current()/child[ compare=$comp ]
                    )]"/>
            </flag>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T02:51:09.550

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
       <flag><xsl:value-of select=
       "substring('1', 2 - not(child[compare != current()/child/compare]))"/></flag>
     </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于以下 XML 文档时：**

```
<parent>
   <child>
      <compare>1</compare>
   </child>
   <child>
      <compare>1</compare>
   </child>
</parent> 
```

**产生想要的正确结果：**

```
<parent>
   <child>
      <compare>1</compare>
   </child>
   <child>
      <compare>1</compare>
   </child>
   <flag>1</flag>
</parent> 
```

**在此 XML 文档上应用相同的转换时：**

```
<parent>
   <child>
      <compare>1</compare>
   </child>
   <child>
      <compare>2</compare>
   </child>
</parent> 
```

**再次产生所需的正确结果：**

```
<parent>
   <child>
      <compare>1</compare>
   </child>
   <child>
      <compare>2</compare>
   </child>
   <flag/>
</parent> 
```

**请注意**：

1.  使用和覆盖身份规则。

2.  根本没有使用明确的条件指令（或变量）。

# visual-studio-2010 - 如何修改生成 reference.cs 的模板？

> ID：11018570
> 
> 赞同：1
> 
> 时间：2012-06-13T15:43:54.073
> 
> 标签：visual-studio-2010, t4

我一直在网上搜索这个，也许我只是使用了错误的关键字或什么？我可以使用一些帮助。

我的问题很简单——我们的解决方案中有一堆 reference.cs 文件，这些文件是 VS2010 在添加服务时自动生成的。这些文件默认不添加 XML 注释，所以当我们构建项目时，我会在构建列表中收到 800 条左右的消息。这并没有破坏任何东西，但它确实使构建时间（显着）更长，并且弄乱了输出屏幕。

我通过在每个reference.cs 文件的开头和结尾添加适当的#pragma 语句来“修复”这个问题，但是如果这些语句被重新生成，则必须手动重新添加它们。我想简化该过程，并将它们添加到 VS2010 最初使用的任何 T4 模板中。问题是，我不知道那在哪里，或者 VS2010 是否正在使用其他东西来构建这些文件？

这可以做到吗？有更好的解决方案吗？我不一定要关闭整个项目的 XML 注释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:58:09.680

Visual Studio 不使用 T4 模板来生成服务引用代理类 (Reference.cs)。相反，Visual Studio 最有可能使用 WsdlImporter 和 ServiceContractGenerator 类来生成此代码。

有一篇关于使用[自定义 wsdl 导出](http://msdn.microsoft.com/en-us/library/aa717040.aspx)器或[WCFExtras](https://stackoverflow.com/questions/639156/make-svcutil-pick-up-documentation-from-c-sharp-files)将 xml 注释添加到生成的代码的[帖子。](http://wcfextras.codeplex.com/)这两个都假设您可以访问您所引用的服务的代码。

# security - 保护数据保护密码

> ID：11018571
> 
> 赞同：0
> 
> 时间：2012-06-13T15:44:03.487
> 
> 标签：security, password-protection

目前，我正在构建一个处理敏感数据的系统。为此，我使用保存在脚本中（暂时）的密钥对所有信息进行加密。任何人都可以建议任何方法可以将密钥保护在某个秘密的地方，但系统可以使用（对于众多用户，而不仅仅是所有者和管理员）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:01:06.710

在 Diffie-Hellman 密钥交换方案中，每一方都可以生成一个公私密钥对。公钥可以在信息交换之前相互共享。私钥不共享，并与共享的公钥一起解密消息。这是公钥密码术。

# html - 在使用 doctypes 的 inline-block 怪癖之后中断

> ID：11018573
> 
> 赞同：1
> 
> 时间：2012-06-13T15:44:10.547
> 
> 标签：html, css, doctype

我更新了一个网站，并试图为它从当前的 doctype 迁移到 html 5 做准备。目前，如果我使用下面的 css：

```
br {
  line-height: 5px;
}

div {
  display: inline-block;
} 
```

和html：

```
<div>div 1</div>
<br>
<div>div 2</div> 
```

带有文档类型：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

它的渲染使得两个 div 之间没有间隙，break line-height 应用于与第一个 div 不在它自己的行上的同一行。

如果我使用相同的 css 和 html：

```
<!DOCTYPE html> 
```

中断呈现在它自己的行上，给出 5px 的中断，这对我来说对于这个特定元素来说似乎更合乎逻辑。是否有一个 css 解决方案可以在我转换时呈现两种 doctype 下的 5px 间隙？

我考虑过给 div 底部填充或边距，但我认为如果 div 是嵌套的，这会导致问题。

# java - 部署 Spring MVC 应用程序时出现异常？

> ID：11018574
> 
> 赞同：0
> 
> 时间：2012-06-13T15:44:12.137
> 
> 标签：java, spring, spring-mvc

我是 Spring MVC 的新手。我有以下项目结构。

![在此处输入图像描述](../Images/93fe8ecef9c2a20f74db2cbfb2510a6c.png)

以下是类：

联系人控制器.java：

```
@Controller
public class ContactController extends MultiActionController {

    @Autowired
    private ContactService contactService;

    public ModelAndView list(HttpServletRequest request,
            HttpServletResponse response) throws Exception {
        ModelMap modelMap = new ModelMap();
        modelMap.addAttribute("userList", contactService.listContact());
        modelMap.addAttribute("user", new Contact());
        return new ModelAndView("contact", modelMap);
    }

    public ModelAndView add(HttpServletRequest request,
            HttpServletResponse response, Contact user) throws Exception {
        contactService.addContact(user);
        return new ModelAndView("redirect:list.htm");
    }

} 
```

联系DAOImpl.java

```
@Repository
public class ContactDAOImpl implements ContactDAO {

    @Autowired
    private SessionFactory sessionFactory;

    public void addContact(Contact contact) {
        sessionFactory.getCurrentSession().save(contact);
    }

    @SuppressWarnings("unchecked")
    public List<Contact> listContact() {

        return sessionFactory.getCurrentSession().createQuery("from Contact")
                .list();
    }

    public void removeContact(Integer id) {
        Contact contact = (Contact) sessionFactory.getCurrentSession().load(
                Contact.class, id);
        if (null != contact) {
            sessionFactory.getCurrentSession().delete(contact);
        }

    }
} 
```

联系方式.java

```
@Entity
@Table(name="USERS")
public class Contact {

    @Id
    @Column(name="USER_ID")
    @GeneratedValue
    private Integer id;

    @Column(name="USER_NAME")
    private String userName;
//with setters and getters
} 
```

ContactServiceImpl.java

```
@Service
public class ContactServiceImpl implements ContactService {

    @Autowired
    private ContactDAO contactDAO;

    @Transactional
    public void addContact(Contact contact) {
        contactDAO.addContact(contact);
    }

    @Transactional
    public List<Contact> listContact() {

        return contactDAO.listContact();
    }

    @Transactional
    public void removeContact(Integer id) {
        contactDAO.removeContact(id);
    }
} 
```

休眠-cfg.xml：

```
<hibernate-configuration>
    <session-factory>
        <mapping class="net.viralpatel.contact.form.Contact" />
    </session-factory>

</hibernate-configuration> 
```

联系人.jsp：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
.even {
    background-color: silver;
}
</style>
<title>Registration Page</title>
</head>
<body>

<form:form action="add.htm" commandName="user">
    <table>
        <tr>
            <td>User Name :</td>
            <td><form:input path="userName" /></td>
        </tr>

    </table>
</form:form>
<c:if test="${fn:length(userList) > 0}">
    <table cellpadding="5">
        <tr class="even">
            <th>Name</th>

        </tr>
        <c:forEach items="${userList}" var="user" varStatus="status">
            <tr class="<c:if test="${status.count % 2 == 0}">even</c:if>">
                <td>${user.userName}</td>
            </tr>
        </c:forEach>
    </table>
</c:if>
</body>
</html> 
```

弹簧servlet.xml：

```
<?xml  version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

    <context:annotation-config />
    <context:component-scan base-package="net.viralpatel.contact" />

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" />

    <bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
        p:location="/WEB-INF/jdbc.properties" />

    <bean id="dataSource"
        class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"
        p:driverClassName="${jdbc.driverClassName}"
        p:url="${jdbc.databaseurl}" p:username="${jdbc.username}"
        p:password="${jdbc.password}" />

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${jdbc.dialect}</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean>

    <tx:annotation-driven />

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

</beans> 
```

web.xml 条目：

```
<servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>redirect.jsp</welcome-file>
    </welcome-file-list> 
```

重定向.jsp：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<% response.sendRedirect("user/list.htm"); %> 
```

pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>Spring3HibernateMaven</groupId>
  <artifactId>Spring3HibernateMaven</artifactId>
  <packaging>war</packaging>
  <version>0.0.1-SNAPSHOT</version>
  <description></description>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
      <plugin>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.0</version>
      </plugin>

    </plugins>
  </build>
  <dependencies>
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>servlet-api</artifactId>
      <version>2.5</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-beans</artifactId>
      <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-jdbc</artifactId>
      <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-web</artifactId>
      <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-webmvc</artifactId>
      <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-orm</artifactId>
      <version>${org.springframework.version}</version>
    </dependency>
    <!-- Hibernate framework -->
    <dependency>
        <groupId>hibernate</groupId>
        <artifactId>hibernate3</artifactId>
        <version>3.2.3.GA</version>
    </dependency>

    <!-- Hibernate annotation -->
    <dependency>
        <groupId>hibernate-annotations</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>3.3.0.GA</version>
    </dependency>

    <dependency>
        <groupId>hibernate-commons-annotations</groupId>
        <artifactId>hibernate-commons-annotations</artifactId>
        <version>3.0.0.GA</version>
    </dependency>

    <dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>ejb3-persistence</artifactId>
    <version>3.3.2.Beta1</version>
</dependency>

    <!-- Hibernate library dependecy start -->
    <dependency>
        <groupId>dom4j</groupId>
        <artifactId>dom4j</artifactId>
        <version>1.6.1</version>
    </dependency>

    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1.1</version>
    </dependency>

    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.2.1</version>
    </dependency>

    <dependency>
        <groupId>antlr</groupId>
        <artifactId>antlr</artifactId>
        <version>2.7.7</version>
    </dependency>
    <!-- Hibernate library dependecy end -->

    <!-- dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-log4j12</artifactId>
      <version>1.4.2</version>
    </dependency -->
    <dependency>
      <groupId>taglibs</groupId>
      <artifactId>standard</artifactId>
      <version>1.1.2</version>
    </dependency>
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>jstl</artifactId>
      <version>1.1.2</version>
    </dependency>
    <dependency>
            <groupId>oracle</groupId>
            <artifactId>ojdbc</artifactId>
            <version>1.4</version>
        </dependency>
    <dependency>
      <groupId>commons-dbcp</groupId>
      <artifactId>commons-dbcp</artifactId>
      <version>20030825.184428</version>
    </dependency>
    <dependency>
      <groupId>commons-pool</groupId>
      <artifactId>commons-pool</artifactId>
      <version>20030825.183949</version>
    </dependency>
  </dependencies>
  <properties>
    <org.springframework.version>3.0.2.RELEASE</org.springframework.version>
  </properties>
  <repositories>

        <repository>
      <id>central</id>
      <name>Central Repository</name>
      <url>http://repo.maven.apache.org/maven2</url>
      <layout>default</layout>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
    </repository>

    </repositories>

  <pluginRepositories>
    <pluginRepository>
      <id>central</id>
      <name>Central Repository</name>
      <url>http://repo.maven.apache.org/maven2</url>
      <layout>default</layout>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <releases>
        <updatePolicy>never</updatePolicy>
      </releases>
    </pluginRepository>
  </pluginRepositories>

</project> 
```

但是一旦它被打包并部署到 tomcat 中，我在 tomcat 控制台上就会遇到异常：

```
 SEVERE: Context initialization failed
    org.springframework.beans.factory.BeanCreationException: Error creating bean wit
    h name 'contactController': Injection of autowired dependencies failed; nested e
    xception is org.springframework.beans.factory.BeanCreationException: Could not a
    utowire field: private net.viralpatel.contact.service.ContactService net.viralpa
    tel.contact.controller.ContactController.contactService; nested exception is org
    .springframework.beans.factory.BeanCreationException: Error creating bean with n
    ame 'contactServiceImpl': Injection of autowired dependencies failed; nested exc
    eption is org.springframework.beans.factory.BeanCreationException: Could not aut
    owire field: private net.viralpatel.contact.dao.ContactDAO net.viralpatel.contac
    t.service.ContactServiceImpl.contactDAO; nested exception is org.springframework
    .beans.factory.BeanCreationException: Error creating bean with name 'contactDAOI
    mpl': Injection of autowired dependencies failed; nested exception is org.spring
    framework.beans.factory.BeanCreationException: Could not autowire field: private
     org.hibernate.SessionFactory net.viralpatel.contact.dao.ContactDAOImpl.sessionF
    actory; nested exception is java.lang.NoClassDefFoundError: Ljavax/transaction/T
    ransactionManager;..............................................................Caused by: org.springframework.beans.factory.BeanCreationException: Could not au
towire field: private org.hibernate.SessionFactory net.viralpatel.contact.dao.Co
ntactDAOImpl.sessionFactory; nested exception is java.lang.NoClassDefFoundError:
 Ljavax/transaction/TransactionManager;
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanP
ostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.j
ava:507)
        at org.springframework.beans.factory.annotation.InjectionMetadata.inject
(InjectionMetadata.java:84)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanP
ostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java
:283)
        ... 68 more
Caused by: java.lang.NoClassDefFoundError: Ljavax/transaction/TransactionManager
;
        at java.lang.Class.getDeclaredFields0(Native Method)
        at java.lang.Class.privateGetDeclaredFields(Class.java:2291)
        at java.lang.Class.getDeclaredFields(Class.java:1743)
        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProc
essor.findPersistenceMetadata(PersistenceAnnotationBeanPostProcessor.java:372)
        at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProc
essor.postProcessMergedBeanDefinition(PersistenceAnnotationBeanPostProcessor.jav
a:320)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBean
Factory.applyMergedBeanDefinitionPostProcessors(AbstractAutowireCapableBeanFacto
ry.java:798)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBean
Factory.doCreateBean(AbstractAutowireCapableBeanFactory.java:493)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBean
Factory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getOb
ject(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistr
y.getSingleton(DefaultSingletonBeanRegistry.java:222)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBe
an(AbstractBeanFactory.java:288)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean
(AbstractBeanFactory.java:190)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.
findAutowireCandidates(DefaultListableBeanFactory.java:827)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.
doResolveDependency(DefaultListableBeanFactory.java:769)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.
resolveDependency(DefaultListableBeanFactory.java:686)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanP
ostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.j
ava:478)
        ... 70 more
Caused by: java.lang.ClassNotFoundException: javax.transaction.TransactionManage 
```

我在这里错过了什么吗？请帮我。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T15:46:03.720

> `java.lang.NoClassDefFoundError: Ljavax/transaction/TransactionManager`;

只需将[Java Transaction API](http://www.oracle.com/technetwork/java/javaee/jta/index.html) ( `jta.jar`) 放入您的`WEB-INF/lib`目录即可。

# asp.net - HTTP 请求未经客户端身份验证方案“Ntlm”授权。从服务器收到的身份验证标头是“NTLM”

> ID：11018576
> 
> 赞同：3
> 
> 时间：2012-06-13T15:44:15.297
> 
> 标签：asp.net, wcf, iis-7, ntlm

这真让我抓狂。我正在尝试通过 ASP.NET Web 表单访问 WCF 服务，我正在为`channelfactory`up 设置绑定，如下所示：

```
BasicHttpBinding b = null;

if (Communication.SlServiceURL.StartsWith("https"))
    b = new BasicHttpBinding(BasicHttpSecurityMode.Transport);
else
{
    b = new BasicHttpBinding();
    b.Security.Mode = BasicHttpSecurityMode.TransportCredentialOnly;
}

b.MaxBufferSize = 2147483647;
b.MaxReceivedMessageSize = 2147483647;
b.Security.Transport = new HttpTransportSecurity { ClientCredentialType = HttpClientCredentialType.Ntlm, ProxyCredentialType = HttpProxyCredentialType.None };
b.Security.Message = new BasicHttpMessageSecurity { ClientCredentialType = BasicHttpMessageCredentialType.UserName }; 
```

然后我通过以下方式创建一个新的 Channel Wrapper：

```
public ClientChannelWrapper(Binding binding, EndpointAddress remoteAddress)
{
    m_Factory = new ChannelFactory<T>(binding, remoteAddress);
} 
```

我将绑定和[https://[myservice]/myservice.svc](https://[myservice]/myservice.svc) URL 作为`remoteAddress`.

问题是：当我使用 IIS 7 在我的生产服务器中调用服务时，站点上启用了 Windows 身份验证，并且只有“NTLM”作为身份验证的提供者，其他所有内容都被禁用（没有匿名、表单等）我得到了例外：

> 异常类型：MessageSecurityException
> 
> 异常消息：HTTP 请求未经客户端身份验证方案“Ntlm”授权。从服务器收到的身份验证标头是“NTLM”。

这很奇怪，我似乎找不到解决方法。我还有一个托管在另一个 ASP.NET 表单中的*Silverlight*应用程序，它与这个绑定工作得很好，这让我感到害怕，因为为什么在同一个 IIS 站点中托管的 ASP.NET 站点中不能正常工作。

也很奇怪：当使用 F5 从 Visual Studio 启动站点时，它在访问 IIS7 机器中的生产 WCF 服务时工作。一旦我部署该站点，我就会得到异常。

编辑：现在很清楚为什么*Silverlight*的行为与 ASP.NET 不同，因为*Silverlight*直接通过客户端计算机与服务进行通信。除了例外，仍然没有运气。

# jquery - JqG rid reloadGrid 保持折叠展开子网格

> ID：11018578
> 
> 赞同：5
> 
> 时间：2012-06-13T15:44:16.163
> 
> 标签：jquery, jqgrid

我有一个包含子网格的网格。两个网格都有一个复选框列。当我单击父复选框时，它会自动选中/取消选中所有子网格复选框。所有复选框都映射到数据库值，因此每次状态更改时，它都会更改数据库中的值，我重新加载网格以更新复选框状态。

问题是当我重新加载网格时，我松开了扩展的子网格，这很烦人，因为每次我点击一个复选框它都会重新加载网格......

有没有办法在重新加载网格时保持哪一行的状态？

这是我的部分代码：

```
$('#jqgSearchTaxPayer').jqGrid({
                        ....
                        subGrid: true,
                        subGridRowExpanded: function (sendSubGrid, lineId) {
                            var sendSubGridId;
                            sendSubGridId = sendSubGrid + "_t";
                            $("#" + sendSubGrid).html("<table id='" + sendSubGridId + "' class='scroll'></table>");

                            $("#" + sendSubGridId).jqGrid({
                                ....

                            { name: 'Keep', index: 'Keep', width: '9px', align: 'center',
                                editable: true, edittype: 'checkbox',
                                formatter: function (cellvalue, options, rowObject) {
                                    cellvalue = cellvalue + "";
                                    cellvalue = cellvalue.toLowerCase();
                                    var bchk = " checked=\"checked\"";
                                    if (cellvalue == "false") {
                                        bchk = "";
                                    }
                                    return "<input type='checkbox' onclick=\"SendLineChecked('" + options.rowId + "','" + sendSubGrid + "');\" " + bchk + " value='" + cellvalue + "' offval='no' />";
                                }, formatoptions: { disabled: false }
                            }],
                                .... 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T07:01:55.630

我找到了一个受这篇[文章](https://stackoverflow.com/questions/5706703/how-to-reload-jquery-grid-keeping-scroll-position-and-collapse-elements-open)启发的解决方案。

声明一个函数，它将获取当前展开的所有行并触发重新加载

```
var scrollPosition = 0;
var ids = [];

function RefreshGridData() {
    var num;
    ids = new Array();
    $("#jqgSearchTaxPayer tr:has(.sgexpanded)").each(function () {
        num = $(this).attr('id');
        ids.push(num);
    });
    $("#jqgSearchTaxPayer").trigger("reloadGrid");
} 
```

在主网格的GridComplete()函数中，解析行集合并展开

```
gridComplete: function () {
                             for (var j = 0; j < ids.length; j = j + 1) {
                                 $("#jqgSearchTaxPayer").jqGrid('expandSubGridRow', ids[j]);
                             }
                         }, 
```

# asp.net - 在 RadGrid 中过滤后的行数

> ID：11018581
> 
> 赞同：2
> 
> 时间：2012-06-13T15:44:48.447
> 
> 标签：asp.net, telerik, telerik-grid

当结果网格有几页时，如何在过滤后获取 RadGrid 的行数。

```
 radGrid.MasterTableView.Items.Count 
```

在这种情况下返回页面大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:06:04.187

如果启用分页，items.Count 将只显示页面大小。您可以做的一件事是将 paging 设置为 false，绑定网格，获取计数，将 paging 设置为 true，然后重新绑定网格。

```
RadGrid1.MasterTableView.AllowPaging = false;
RadGrid1.MasterTableView.Rebind();
int totalCount = RadGrid1.MasterTableView.Items.Count;
RadGrid1.MasterTableView.AllowPaging =true;
RadGrid1.MasterTableView.Rebind(); 
```

您可以做的另一件事是通过计算 ItemDataBound 网格事件中的 GridDataItem 项来获取计数。

有关这方面的更多信息，请参阅[Telerik 帮助页面](http://www.telerik.com/community/forums/aspnet-ajax/grid/total-record-count-after-filter.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:20:02.357

请尝试以下代码片段。

```
private int totalItemCount;
protected void RadGrid1_ItemEvent(object sender, GridItemEventArgs e)
{
    if (e.EventInfo is GridInitializePagerItem)
    {
        totalItemCount = (e.EventInfo as GridInitializePagerItem).PagingManager.DataSourceCount;
    }
} 
```

# java - 在 Java 正则表达式中 - 如何仅在附加到字符串时保留数字

> ID：11018585
> 
> 赞同：1
> 
> 时间：2012-06-13T15:44:57.433
> 
> 标签：java, regex

我正在尝试标记包含有用文本但也包含许多我不想要的数字的文本文件。但是，使用类似的东西`[^a-zA-Z0-9]`，我保留所有数字`(0-9)`。

仅当附加到字符或像“24hr”或“7-days”这样的催眠时，我才想保留数字。

因此，请输入：“每周 7 天提供 3 个 24 小时职位。请致电 555-1212”

返回以下令牌的列表： 每周 7 天都有 24 小时职位可供选择

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T15:47:16.823

```
\d+-?[A-Za-z]+|[A-Za-z]+-?\d+|[A-Za-z]+ 
```

在此处查看实际操作：[http ://regexr.com?318em](http://regexr.com?318em)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:53:27.693

方括号`[`，`]`代表一个叫做字符类的东西，基本上意味着匹配这个类中的任何东西。`[A-Za-z0-9]`将匹配字母和数字的任意组合。

如果要指定顺序，则需要从字符类中删除数字并在其后添加另一个字符类。

前任：

```
[0-9]+-?[a-zA-Z]+|[a-zA-Z]+-?[0-9]+|[a-zA-Z]+

[a-zA-Z]+ - matches 1 or more letters
-?        - optionally matches a dash
[0-9]+    - matches 1 or more digits 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T20:33:57.157

经过大量的试验和错误，它做到了（注意前导空格）：

```
 \d[^-a-z]+ | -\d+|[^a-zA-Z0-9-]|[0-9]+-[0-9]+|\W-+|[0-9]+-\W 
```

[http://regexr.com?318hp](http://regexr.com?318hp) 我希望这可以帮助其他需要它的人。我在 RapidMiner 中使用它来删除文本处理中不需要的标记。

# ruby-on-rails-3 - 带数组参数或参数数组的Rails3集成测试

> ID：11018587
> 
> 赞同：1
> 
> 时间：2012-06-13T15:44:59.830
> 
> 标签：ruby-on-rails-3

我正在尝试做一些 Rails 集成测试。

我有一个几乎就在表单助手的 Rails 指南中的案例。

我的 HTML 包含：

```
 <input name="to_org[][str2int]" value="1" type="checkbox">
    <input name="to_org[][str2int]" value="2" type="checkbox">
    <input name="to_org[][str2int]" value="3" type="checkbox"> 
```

该应用程序在 Rails 3.2.2 上运行良好。

现在我想写一个集成测试。我需要以与我的 JavaScript 相同的方式发布数据。我想指出选择了“to_org[]”值 1 和 2。假设 form_url 是一个正确设置的值。

```
 post( form_url, { "to_org[][str2int]" => ???WHAT_GOES_HERE??? } ) 
```

发布后，我期待参数保持：

```
 "to_org" => [ {"str2int" => "1"}, {"str2int" => "2"} ] 
```

我尝试了很多不同的东西，浏览了指南，谷歌搜索。

没有人试图发布多个复选框被选中的结果吗？我认为答案并不明显。

如何在集成测试中设置 post() 的参数以使其工作？

PS：正如人们可能猜到的那样，我有一个识别“str2int”的过滤器，并通过对应用程序进行适当的检查和错误恢复来进行转换。最终我的应用程序看到 :to_org = [ 1, 2 ]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:40:42.637

基本上，我对 Rails 代码进行了一些挖掘（很高兴看到它制作 API 文档。）

一个正确的答案是：

```
 post( form_url, { "to_org" => [ { "str2int" => "1" }, { "str2int" => "2" } ] } ) 
```

最有帮助的是发现 to_param() 函数，如下所示：

```
 { "to_org" => [ { "str2int" => "1" }, { "str2int" => "2" } ] }.to_param() 
```

这使我能够推断出我必须改变我用作名称的名称才能正确传递通过 post() 的值。

Rails 之神：有没有更好的方法来做到这一点？应该说的更多？

# apache-flex - adobe flex spark 组图形在 addEventListener 上消失

> ID：11018588
> 
> 赞同：0
> 
> 时间：2012-06-13T15:45:02.720
> 
> 标签：apache-flex, graphics, adobe, addeventlistener, flex-spark

创建一个简单的 Flex 4.6 应用程序时，creationComplete-handler 如下所示：

```
protected function creationCompleteHandler(event:FlexEvent):void {
    var groupVisible : Group = new Group();
    groupVisible.graphics.beginFill(0xff0000);
    groupVisible.graphics.drawCircle(100, 100, 50);
    groupVisible.graphics.endFill();
    addElement(groupVisible);

    var groupInvisible : Group = new Group();
    groupInvisible.graphics.beginFill(0x0000ff);
    groupInvisible.graphics.drawCircle(200, 100, 50);
    groupInvisible.graphics.endFill();
    addElement(groupInvisible);
    groupInvisible.addEventListener(MouseEvent.CLICK, function(event:MouseEvent):void {trace("click");});
} 
```

绘制了第一个 groupVisible.graphics 内容（100,100 处的红色圆圈）。 **第二个 groupInvisible.graphics 内容（200、100 处的蓝色圆圈）未绘制**。

它肯定取决于添加的 EventListener。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:11:49.410

如果您切换到 SpriteVisualElement 而不是 Group，则会显示这两个项目。从好的方面来说，鼠标点击事件实际上是从 Sprite/SpriteVisualElement 派发的，而它们不会从容器中派发。由于 Click 事件冒泡，它可以从组内的元素分派，并在组级别上进行侦听。但是，图形不会调度点击事件。

无论如何，这里有一些代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            import spark.core.SpriteVisualElement;

            protected function onMouseClick(event:MouseEvent):void{
                trace('click');
            }

            override protected function createChildren():void{
                super.createChildren();
                var groupVisible :SpriteVisualElement = new SpriteVisualElement();

//              var groupVisible : Group = new Group();
                groupVisible.graphics.beginFill(0xff0000);
                groupVisible.graphics.drawCircle(100, 100, 50);
                groupVisible.graphics.endFill();
                groupVisible.addEventListener(MouseEvent.CLICK, onMouseClick);
                addElement(groupVisible);

//              var groupInvisible : Group = new Group();
                var groupInvisible : SpriteVisualElement = new SpriteVisualElement();
                groupInvisible.graphics.beginFill(0x0000ff);
                groupInvisible.graphics.drawCircle(200, 100, 50);
                groupInvisible.graphics.endFill();
//              groupInvisible.addEventListener(MouseEvent.CLICK, onMouseClick);
                groupInvisible.addEventListener(MouseEvent.CLICK, function(event:MouseEvent):void {trace("click");});
                addElement(groupInvisible);

            }

        ]]>
    </fx:Script>

</s:WindowedApplication> 
```

# spring - 如果会话处于非活动状态，则显示 popin

> ID：11018591
> 
> 赞同：1
> 
> 时间：2012-06-13T15:45:11.560
> 
> 标签：spring, jsp, spring-mvc

在我的 webappalication 中，如果会话在 30 分钟内不活动，我会显示一个 popin。你知道如何用 SpringMVC 做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:21:26.460

我会这样做：

*   将您的容器配置为在 30 分钟后过期会话

*   当用户发出初始请求并创建新会话时，存储一个包含会话 ID 的 cookie。

*   在后续请求中，检查请求中的会话 ID 与存储在 cookie 中的会话 ID，如果它们不同，则用户的上一个会话已过期，您应该显示一个弹出窗口。

还有一件事要注意，确保将 cookie 的最大年龄设置为负数。这可确保在关闭浏览器时删除 cookie。如果您不这样做，下次用户打开浏览器并访问您的站点时，他们将看到弹出窗口。

# objective-c - const 值上的链接器错误

> ID：11018592
> 
> 赞同：0
> 
> 时间：2012-06-13T15:45:12.177
> 
> 标签：objective-c, ios, xcode

我正在尝试创建一些字符串常量，所以我有以下内容：

**常量.h**

```
extern NSString* const CONSTANT_ONE; 
```

**常数.m**

```
NSString *const CONSTANT_ONE = @"CONSTANT_ONE"; 
```

**其他文件.m**

```
#import "Constants.h"
... snip
NSString* something = CONSTANT_ONE; 
```

Constants.m 列在目标构建阶段的“编译源”位中，当我查看侧边栏的“目标成员资格”部分时，它是目标的成员。

当我尝试编译时，出现如下错误：

```
Undefined symbols for architecture i386:
  "_CONSTANT_ONE", referenced from:
      -[SomeOtherFile someMethod:] in SomeOtherFile.o 
```

我想我可能在这里误解了一些基本的东西 - 任何人都可以帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:21:50.490

我最初问题中的代码是正确的。我不知道为什么，只是简单地关闭并重新打开 Xcode 就解决了这个问题并且它构建得很好。只是 Xcode 让自己感到困惑。

# android - Android 相机预览帧率

> ID：11018593
> 
> 赞同：0
> 
> 时间：2012-06-13T15:45:26.850
> 
> 标签：android, camera, preview, frame-rate

我正在尝试存储和操作来自相机预览的数据流帧。执行此操作的代码非常简单（即使转换 YUV->RGB），但帧速率很糟糕。

如果我只打开预览并写出所有 YUV 数据（YUV 格式为 640x480 * 1.5），我的帧率低于 8FPS。如果我不做任何存储，帧率会上升到 100FPS（这意味着回调必须与硬件分离，但这没什么大不了的）。

在我继续解决这个问题之前，我只是在处理我的硬件限制吗？要求手机每秒存储30次461k是不是很不合理？我意识到它是 13 兆/秒，但我正在重用分配的空间。所以这不是内存问题，而是处理速度问题，老实说，我不知道这是否是一个不合理的要求。

有没有其他人试图操纵从 Android 相机流出的数据？

感谢您抽时间阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T19:51:10.603

我的第一个问题是，您是否使用 Previewcallbacks 来处理来自 Preview 的字节？

如果是，提高帧率的一种方法是使用带有缓冲区的预览回调。请参阅[http://developer.android.com/reference/android/hardware/Camera.html#setPreviewCallbackWithBuffer%28android.hardware.Camera.PreviewCallback%29](http://developer.android.com/reference/android/hardware/Camera.html#setPreviewCallbackWithBuffer%28android.hardware.Camera.PreviewCallback%29)以获取参考。

另一个不错的可能性是将您的处理放在一个单独的线程中。这是一个例子：

```
private ExecutorService processingExecutor;
// ...
this.processingExecutor = Executors.newSingleThreadExecutor();
public void onPreviewFrame(final byte[] data, final Camera camera) {

    processingExecutor.execute(new Runnable() {
        public void run() {
            processImage(data);
        }
    });
    // update your view here

    camera.addCallbackBuffer(data);
}

protected void processImage(byte[] data) {
    // do you processing here

} 
```

不要忘记视图只能从 UI 线程更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T23:44:45.253

从问题的描述来看，我很清楚这个问题纯粹是由于您的文件写入系统的**数据率非常高。**正如您正确指出的那样，存储 30`VGA (640x480)`张图像相当于***13.2 MBytes/sec***，大约是***106 Mbits/sec***。这是极高的数据速率，并且存储相同的数据需要非常高速的存储介质以及相关的软件更改。

如果您将未压缩的`YUV`帧存储到 SD 卡中，从 SD 卡的规格中，您会发现您需要一`UHS`类卡。请参阅此链接以获取更多详细信息：[http ://en.wikipedia.org/wiki/Secure_Digital#Speed_Class_Rating](http://en.wikipedia.org/wiki/Secure_Digital#Speed_Class_Rating)

如果要存储到内部闪存中，则必须找出最大值。您的存储设备的数据传输速率，以了解您的理论限制。

总而言之，如果您希望存储 30 VGA 帧/秒，那么

1.  正如 Alex Chap 已经指出的那样，文件写入必须在单独的线程中异步。

2.  应该仔细选择此线程的优先级，以确保它不会与系统中的其他活动线程竞争。有时文件系统写入可能需要一些时间，如果您的线程由于文件系统更新而被阻塞，那么如果没有仔细选择优先级，您可能会导致系统阻塞。

3.  必须仔细选择队列中的缓冲区数量。接收器，即`YUV`帧的文件写入将是链中较慢的部分。为了重用一组固定的缓冲区，您必须确定可以处理系统中抖动的缓冲区的数量，即即使文件写入速度很慢，您仍然可以继续继续捕获视频帧。这将对您的用例的内存需求产生巨大影响。

# python - autopy 可以在本地安装吗？

> ID：11018595
> 
> 赞同：1
> 
> 时间：2012-06-13T15:45:33.393
> 
> 标签：python, installation, autopy

我似乎在安装 autopy.h 时遇到了一些问题

```
https://github.com/msanders/autopy/#introduction 
```

我已经尝试通过 git 安装：

```
$ git clone git://github.com/msanders/autopy.git
$ cd autopy
$ python setup.py build 
```

但我收到以下错误：

```
>python setup.py build 
running build
running build_py
running build_ext
building 'color' extension
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DNDEBUG=1 -DMM_LITTLE_ENDIAN -DUSE_X11 -I/usr/include/python2.6 -c src/autopy-color-module.c -o build/temp.linux-i686-2.6/src/autopy-color-module.o -Wall -Wparentheses -Winline -Wbad-function-cast -Wdisabled-optimization -Wshadow
In file included from src/autopy-color-module.c:1:
src/autopy-color-module.h:5:20: error: Python.h: No such file or directory
In file included from src/autopy-color-module.c:1:
src/autopy-color-module.h:11: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘initcolor’
...
src/autopy-color-module.c:48: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
error: command 'gcc' failed with exit status 1 
```

所以

> src/autopy-color-module.h:5:20：错误：Python.h：没有这样的文件或目录

不见了。这是因为 ubuntu 讨厌我，还是因为软件无法从 git 编译？不幸的是，Easy_install 需要访问`/usr/local/lib/python2.6/dist-packages/`我没有的访问权限。我希望将库本地导入到我的代码中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T15:49:44.430

您没有 python 的开发标头。由于您使用的是 Ubuntu，因此只需安装 python-dev 软件包：

```
apt-get install python-dev 
```

# mysql - 如何使用触发器来更新一个表中的字段，基于另一个表中的记录插入数据？

> ID：11018598
> 
> 赞同：0
> 
> 时间：2012-06-13T15:45:40.987
> 
> 标签：mysql, triggers

我是使用触发器的新手，当一条记录插入另一个表时，我很难理解如何编写触发器来更新一个表中的字段。

详细地说，我有 2 个表：servTickets 和 servTicketNotes。

servTickets 有几个文本字段，用于客户、联系人、电话、电子邮件、问题描述、状态等……此表中的 PK 是一个名为 的 INT 字段`callID`。

servTicketNotes 只有 2 个字段 - 同样，PK 是一个 INT 字段“callID”，并且有一个称为 BLOB 字段`image`，用于存储服务报告的图像。

我正在努力做的是让触发器更新 servTickets 中的`status`字段，其值`Closed`是新记录插入到 servTicketNotes 时的值。

如果这是 INSERT AFTER 或 BEFORE 或 BOTH 场景，我很困惑，但基本上如果发送报告（从而在 servTicketNotes 中创建记录，我希望触发器在 servTickets 表中查找具有相同 callID 的记录，并且将状态的值更改为“已关闭”。

这似乎应该如此简单，但我似乎无法掌握如何开始......

提前感谢您的帮助/指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:53:26.550

它可能是一个 POST 触发器 - 这意味着：

在您提交了传入记录之后，您想要采取进一步的行动 - 即插入到另一个表中。

如果您在提交前执行此操作，那么您会担心 Notes 上会发生一些错误，并且最终可能会导致状态更新不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:48:30.583

您可以使用 AFTER INSERT 触发器来执行此操作。尝试这样的事情：

```
DELIMITER $$

DROP TRIGGER IF EXISTS tr_a_ins_servTicketNotes $$

CREATE TRIGGER pabeta.tr_a_ins_servTicketNotes AFTER INSERT ON servTicketNotes FOR EACH ROW BEGIN
  update servTickets
  set status = 'Closed'
  where callID = NEW.callID;

END $$

DELIMITER ; 
```

# c# - System.Runtime.Caching.MemoryCache 的通用实现

> ID：11018607
> 
> 赞同：13
> 
> 时间：2012-06-13T15:46:22.073
> 
> 标签：c#, generics, caching, optimization

MemoryCache 是否有任何通用的替代方案/实现？

我知道 MemoryCache 在底层使用 Hashtable，因此只需转换为使用 Dictionary<,>，它是 Hashtable 的通用版本。

这将提供类型安全并提供性能优势，因为没有装箱/拆箱。

编辑：我感兴趣的另一件事是拥有不同的密钥类型。默认值为 System.String。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-13T15:53:14.607

> MemoryCache 是否有任何通用的替代方案/实现？

不在基类库中。你必须自己动手，尽管我个人只会做一个包装器`MemoryCache`来提供你想要的 API。

> 这将提供类型安全并提供性能优势，因为没有装箱/拆箱

类型安全可以在包装类中相当容易地处理。只有当您存储值类型（而不是类）时，装箱/拆箱才会成为问题，即使那样，也可能是最小的，因为您不太可能经常从缓存中推送和拉取以使其成为真正的性能问题。

至于类型安全性和可用性，我实际上已经编写了自己的方法来将`MemoryCache`项目的调用包装在一个泛型*方法*中，从 API 的角度来看，这允许更好的使用。这很容易——通常只需要一个方法，比如：

```
public T GetItem<T>(string key) where T : class
{
    return memoryCache[key] as T;
} 
```

同样，您可以创建一个方法来以相同的方式设置值。

> 编辑：我感兴趣的另一件事是拥有不同的密钥类型。默认值为 System.String。

不直接支持这一点`MemoryCache`，因此需要大量工作才能生成自己的密钥。一种选择是制作一个类型安全的包装器，它还提供了`Func<T, string>`一个根据您的值生成字符串键的方法 - 这将允许您为任何类型生成缓存条目`T`。当然，您必须小心在字符串中包含您想要作为比较的一部分的所有数据，但是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-25T18:44:55.027

我写了我的，FWIW：

~~[https://github.com/ysharplanguage/GenericMemoryCache#readme](https://github.com/ysharplanguage/GenericMemoryCache#readme)~~（链接失效）

这里有一个原始代码的分支：

[https://github.com/caesay/GenericMemoryCache](https://github.com/caesay/GenericMemoryCache)

# android - 在某些设备上禁用时，EditText 不可读

> ID：11018608
> 
> 赞同：2
> 
> 时间：2012-06-13T15:46:23.110
> 
> 标签：android, user-interface, user-input

我有一个简单的 EditText 字段，它在登录页面上显示用户的电话号码。初次登录后，电话号码字段被禁用。

这在我几乎所有的设备上看起来都很棒（这张截图来自三星 Galaxy S）：
![在此处输入图像描述](../Images/f229016645e1cbc04dbd614170b9f990.png)

但是，在我的 LG Nitro 上，禁用的 EditText 字段中的文本是不可读的（如果我放大高分辨率屏幕截图，我几乎可以看到白色文本）：
![在此处输入图像描述](../Images/5ac2774af5df555b495625f697ada5bf.png)

我从 EditText 中删除了所有自定义样式规则，并且出现了同样的问题，所以我*认为*这只是手机系统默认颜色的错误选择。

**问题1：**谁能确认我的诊断是否正确？

我可以使文本可读的唯一方法是在代码中将文本设置为深灰色：

```
if (fieldDisabled)
{
  // Some devices use their own default style for a disabled text field,
  // which makes it impossible to read its text, e.g. the LG Nitro.
  //
  // The workaround is to override the text color here.
  mPhoneNumber.setTextColor(Color.DKGRAY);
} 
```

之后文本在所有设备（包括 LG Nitro）上都很容易阅读：
![在此处输入图像描述](../Images/e18aef3e6bac331fa17bd8ff4c7cbf39.png)

我将我的自定义样式设置为使用`@color/black`而不是现有颜色，但文本仍显示为白色。

**问题 2：**我可以使用更好的解决方法吗？

我的 LG Nitro 是运行 OS 2.3.5 的型号 LG-P930。

**我的 XML**

下面是我正在使用的 XML 的片段。

资源/布局/myscreen.xml：

```
<EditText
  ...
  android:textAppearance="@style/MyStyle">
</EditText> 
```

res/values/styles.xml：

```
<style name="MyStyle">
  <item name="android:textSize">14dp</item>
  <item name="android:textColor">@color/blue</item>
</style> 
```

资源/值/colors.xml：

```
<color name="white">#ffffffff</color>
<color name="blue">#ff0000ff</color>
<color name="black">#ff000000</color> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T23:44:18.310

我想出了如何更改 EditText 文本的颜色。

Using`android:textAppearance`似乎**不允许**您更改 EditText 中文本的颜色（它确实允许您更改文本大小）。

一种替代方法是使用`style`属性而不是`android:textAppearance`，因为这将应用文本颜色更改，例如

```
style="@style/MyStyle" 
```

但是，我认为最好的解决方案是使用[ColorStateList](http://developer.android.com/reference/android/content/res/ColorStateList.html)。下面是我的解决方案。

res/layout/myscreen.xml（还是需要textAppearance来控制文字大小）：

```
<EditText
  ...
  android:textColor="@color/edittext"
  android:textAppearance="@style/MyStyle">
</EditText> 
```

资源/颜色/edittext.xml：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_enabled="true" android:color="@color/black" />
  <item android:state_enabled="false" android:color="@color/grey" />
</selector> 
```

res/values/styles.xml （即让 MyStyle 只定义文本大小，而不是颜色）：

```
<style name="MyStyle">
  <item name="android:textSize">14dp</item>
</style> 
```

# ruby-on-rails - 当集合加载数据时，绑定到集合的主干重置事件未触发

> ID：11018609
> 
> 赞同：0
> 
> 时间：2012-06-13T15:46:24.710
> 
> 标签：ruby-on-rails, backbone.js, backbone.js-collections

我是 Backbone 的新手，从 Todos 示例开始。之后，我为 Contacts 而不是 Todos 创建了该示例的新版本，它使用 Ruby on Rails Web 应用程序，并且它使用关联的 REST API 而不是 localstorage 来实现持久性。进行修改后，我能够成功地让 Backbone 应用程序更新 Rails 应用程序，但我无法让 Backbone 视图呈现 Backbone 应用程序从 Rails REST API 接收的数据。我已经通过调试器中的代码，可以看到：

1.  调用函数来填充视图的事件被绑定到模型集合
2.  当我获取模型数据时，集合正在使用来自服务器的数据进行更新
3.  但是，绑定到集合的重置事件不会触发

谁能指出我可能导致重置事件不触发的原因？我的代码如下：

**收藏**：

```
var ContactsList = Backbone.Collection.extend({
  model: Contact,
  url: 'http://localhost:3000/contacts.json',
});

var Contacts = new ContactsList; 
```

**应用视图：**

```
var AppView = Backbone.View.extend({

  el: $("#contactapp"),
  events: {
    "keypress #new-contact":  "createOnEnter"
  },

  initialize: function() {

    this.input = this.$("#new-contact");

    Contacts.bind('add', this.addOne, this);
    Contacts.bind('reset', this.addAll, this);
    Contacts.bind('all', this.render, this);

    Contacts.fetch();
  },

  addOne: function(contact) {
    var view = new ContactView({model: contact});
    this.$("#contact-list").append(view.render().el);
  },

  addAll: function() {
    Contacts.each(this.addOne);
  },

  createOnEnter: function(e) {
    if (e.keyCode != 13) return;
    if (!this.input.val()) return;

    Contacts.create({first_name: this.input.val()});
    this.input.val('');
  },

});

var App = new AppView; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:08:38.737

您可能会`el: $("#contactsapp")`在视图中得到配置返回的空 jQuery 选择器。

[http://lostechies.com/derickbailey/2011/11/09/backbone-js-object-literals-views-events-jquery-and-el/](http://lostechies.com/derickbailey/2011/11/09/backbone-js-object-literals-views-events-jquery-and-el/)

不要使用 jQuery 选择器作为对象字面量值。使用 Backbone 的视图，您可以只提供选择器字符串：

`el: "#contactsapp"`

但这无论如何都是个坏主意。您应该让视图呈现它自己的 el，并使用其他代码用视图填充“#contactsapp”元素：

```
$(function(){
  view = new AppView();
  view.render();
  $("#contacts").html(view.el);
}); 
```

有关更多信息，请参阅上面的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:39:21.780

经过多次调试，我发现绑定`reset`事件没有被触发，因为我使用的是旧版本的主干.js。在我使用的版本中，`refresh`事件被触发而不是`reset`事件。一旦我升级到新版本的主干.js，`reset`事件就会触发

# python - 将两个按钮连接到同一个回调函数两个参数

> ID：11018610
> 
> 赞同：0
> 
> 时间：2012-06-13T15:46:26.490
> 
> 标签：python, qt, callback, pyqt, signals

我有两个按钮，用户可以单击它们并打开 FileDiagloag 来选择文件。我需要用户选择两个文件，但我想要一个函数来处理两个按钮调用。所以在我的**初始化**中我有：

```
QtCore.QObject.connect(self.ui.Button_SelectJoinFiles_1, QtCore.SIGNAL('clicked()'), self.SelectLogFileToJoin(1))
QtCore.QObject.connect(self.ui.Button_SelectJoinFiles_2, QtCore.SIGNAL('clicked()'), self.SelectLogFileToJoin(2)) 
```

该功能基本上类似于：

```
def SelectLogFileToJoin(self, ButtonNum):
        if(ButtonNum==1):
        ......
        if(ButtonNum==2)
        ..... 
```

但这不起作用，因为当我启动程序时，它首先给我一个文件选择对话框。

有人可以告诉我如何处理将参数传递给回调函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T15:50:17.860

这里的问题是您传递的是函数返回的值，而不是函数本身。为了做你想做的事，你需要[`functools.partial()`](http://docs.python.org/py3k/library/functools.html#functools.partial)用预先填充的参数创建一个新函数：

```
from functools import partial

...

QtCore.QObject.connect(..., partial(self.SelectLogFileToJoin, 1)) 
```

# php - 用 GIT 合并两个重新格式化的 PHP 文件

> ID：11018612
> 
> 赞同：1
> 
> 时间：2012-06-13T15:46:41.037
> 
> 标签：php, git, merge, git-merge, merge-conflict-resolution

我们在 GIT 中有两个带有一些 PHP 文件的分支。我们需要做的就是将一个合并到另一个。

不幸的是，有两个巨大的文件被我们的 IDE 自动重新格式化（空格、大括号、换行符等）。当我们尝试合并它们时，GIT 显示出大量的冲突，这些冲突是人类无法手动解决的。

我们已经尝试过这篇文章中描述的方法：http: [//blog.wuwon.id.au/2010/09/painless-merge-conflict-resolution-in.html](http://blog.wuwon.id.au/2010/09/painless-merge-conflict-resolution-in.html) 但我们甚至看不到实际的变化（基础>本地，远程>本地），因为我们甚至无法区分实际的语义变化和句法变化（大量代码，容易遗漏一些东西）。

我们现在正在处理一个旧代码，需要进行大量重构和重新格式化（代码标准 PSR 0-2），所以这种情况很常见。

请告知如何以最有效的方式处理此问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:54:12.057

文件本身在功能方面是否从一个分支到另一个分支有所不同？最简单的事情 - 显然 - 是放弃他们中的任何一个。我不明白你如何能自动解决这些冲突。此外，我建议您像这样格式化文件，将这些文件推送到主分支并从那里开始。重新格式化同一个文件两次听起来不太方便。

# sql - postgresql 中的布尔通配符

> ID：11018613
> 
> 赞同：1
> 
> 时间：2012-06-13T15:46:43.120
> 
> 标签：sql, postgresql, boolean, parameterized-query

我有一个参数化的 postgresql 查询，用户通过 PHP 前端与之交互。其中一个参数涉及一个布尔值，我想给用户“真”、“假”、“未知”（Null）或“无关紧要”（返回任何结果）选项。

重写实际查询不是一个选项（参数化查询存储在数据库表中，而不是 PHP 代码中），所以我需要一个布尔“任何”值。

换句话说，无论“boolean_column”的值如何，我可以在此查询中分配什么值“：parameter1”来获取任何行？

```
SELECT some_column, some_other_column
FROM some_table
WHERE boolean_column = :parameter1 
```

编辑：我需要澄清——*我*可以重写查询，但*程序*不能重写查询（即，我不能删除或重写 where 子句以响应运行时的用户输入）。

EDIT2：这是我的最终解决方案（感谢 couling！）

```
SELECT some_column, some_other_column
FROM some_table
WHERE (:parameter1::text = 'any' OR boolean_column = :parameter1::boolean) 
```

当然，程序必须将可能的值限制为“any”或可以转换为布尔值的字符串值（例如，“true”、“t”、“false”、“f”）。

EDIT3：以前的解决方案在带有 PDO 的 PHP 中工作，但由于某种原因不适用于 python 的 psycopg2 或直接在 postgresql 中。我尝试了一个带有 case 语句的变体，如下所示：

```
SELECT some_column, some_other_column
FROM some_table
WHERE (CASE WHEN :parameter1::text in ('true', 'false') THEN boolean_column = :parameter1::boolean ELSE TRUE END) 
```

但这也行不通。似乎无论如何，我都无法阻止 postgresql 尝试评估“:parameter1::boolean”，即使它落后于错误的 WHEN 条件。这才是真正的泡菜...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:05:11.497

那么你的查询必须改变。布尔值有两个值`true`，`false`并且 null 永远不等于任何值（即使 null 也不等于 null）。

你当然可以使用：

```
SELECT some_column, some_other_column
FROM some_table
WHERE (boolean_column = :parameter1 OR :parameter1 is null) 
```

# facebook - 使用带有事件 ID 的 graph.facebook.com 时无法从 Graph 获取事件照片

> ID：11018614
> 
> 赞同：1
> 
> 时间：2012-06-13T15:46:44.120
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我`https://graph.facebook.com/EVENT_ID/picture`用来获取活动照片。我也尝试通过“access_token=ACCESS_TOKEN”附加访问令牌，但没有运气。这是一个例子：

[https://graph.facebook.com/117496261723830/picture](https://graph.facebook.com/117496261723830/picture)

如您所见，尽管该事件对象[存在](https://graph.facebook.com/117496261723830)，但该图正在返回默认图像 ID 。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:22:39.977

用户报告他们能够使用 fql 来检索图像：参考[http://facebook.stackoverflow.com/a/10364845/912623](http://facebook.stackoverflow.com/a/10364845/912623)

# google-visualization - 谷歌图表json格式日期

> ID：11018618
> 
> 赞同：2
> 
> 时间：2012-06-13T15:47:02.760
> 
> 标签：google-visualization

```
{ "cols": [ {"label":"Dat","type":"date"},
            {"label":"TotalCustomers","type":"number"}], 
 "rows": [{"c":[{"v":" Date(2010,11,20)"}, {"v": 2}]},
          {"c":[{"v":" Date(2012,06,01)"}, {"v": 2}]},
          {"c":[{"v":" Date(2012,06,04)"}, {"v": 1}]},
          {"c":[{"v":" Date(2012,06,05)"}, {"v": 1}]},
          {"c":[{"v":" Date(2012,06,06)"}, {"v": 1}]},
          {"c":[{"v":" Date(2012,06,07)"}, {"v": 2}]},
          {"c":[{"v":" Date(2012,06,10)"}, {"v": 2}]},] 
```

我正在使用这种格式的 json 并通过 ajax 将其发送到数据表，但这似乎不起作用..我已经坚持了 2-3 天..如果有人可以提供帮助，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:02:57.617

我已经找到了 v 的值，例如

```
Date(2012, 6, 26) 
```

对我来说工作得很好。所以...

```
{"v":"Date(2012, 6, 26)","f":"2012-06-26"} 
```

也许图表失败是因为你在日期之前有多余的空间？

```
" Date( 
```

可能会帮助某人

# asp.net - ASP源代码图？有没有一种简单的方法来生成这个？

> ID：11018631
> 
> 赞同：2
> 
> 时间：2012-06-13T15:47:31.090
> 
> 标签：asp.net, asp-classic, code-generation

在我工作的公司，我们有许多基于 Classic ASP 和 ASP.NET 2.0 构建的 Web 系统。

我正在尝试整理脚本文件夹，因为它们都坐在同一个地方，我发现有些甚至没有使用。

那么，你们中的任何人都知道是否有一种简单的方法可以生成类似源代码映射的东西？所以我可以很容易地看到哪个脚本没有被任何其他脚本引用以使其更容易清理？

此外，如果我可以生成这张地图，那么开始记录它会很棒。由于之前的开发人员反对记录（信不信由你），这让我很头疼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:12:46.417

不知道是否存在这样的工具，但您可以编写一个脚本来遍历所有文件并在源文件的内容中搜索，如果它正在加载并且没有被注释掉（最后一个是最困难的）。

我自己使用的一种更简单的方法是在 Firefox 中加载 webapp 中使用的不同页面，并安装并激活 Firebug 插件（或具有相同功能或插件的等效浏览器）。在 Firebug 的 Net 选项卡上，您可以看到页面加载的所有文件，您可以将这些文件与文件夹结构和内容进行比较。

如果需要检查许多页面，您可以使用 Ctrl-All 、 Ctrl-C 和 Ctrl-V 将所有 url 复制到能够排序和删除重复项的编辑器中，这样您就有一个很好的正在使用的文件列表可以一键清理文件夹。

# jquery - 使用 JQuery 在 Head Tag 中添加元数据

> ID：11018638
> 
> 赞同：12
> 
> 时间：2012-06-13T15:47:56.510
> 
> 标签：jquery

我正在尝试在 Head 中插入一个新的元标记，我正在使用一个不允许在 Head 中进行编辑的内容管理系统，所以我正在尝试使用 jQuery 来做到这一点。不幸的是，我无法正常工作。

这是我添加到以下网页的代码：http: [//www.newcastlegateshead.com](http://www.newcastlegateshead.com)

```
<script type="text/javascript"> 
$("head").append("<meta name=viewport content=width=400, initial-scale=0.45, minimum-    scale=0.45/><link rel=apple-touch-icon href=/images/customIcon.png/><meta name=apple-mobile-web-app-capable content=no /><meta name=apple-mobile-web-app-status-bar-style content=black-translucent /><link rel=apple-touch-icon-precomposed href=/images/customIcon.png/> ");
</script> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-13T15:50:53.680

在里面试试你的代码

```
<script type="text/javascript"> 
     $(document).ready(function() {
         $("head").append("<meta name=viewport content=width=400, initial-scale=0.45, minimum-    scale=0.45/><link rel=apple-touch-icon href=/images/customIcon.png/><meta name=apple-mobile-web-app-capable content=no /><meta name=apple-mobile-web-app-status-bar-style content=black-translucent /><link rel=apple-touch-icon-precomposed href=/images/customIcon.png/> ");
    });
</script> 
```

的缩写形式`$(document).ready(function() {...})`是：

```
jQuery(function ($) {
    // Your code
}) 
```

这将确保您的代码将在[`onload`](https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onload).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-23T19:02:05.280

[@thecodeparadox](https://stackoverflow.com/users/690854/thecodeparadox)的[回答](https://stackoverflow.com/a/11018691/6045800)几乎对我有用。为了让它工作，我需要单引号**而不是**前后双引号`<meta>`：

```
<script type="text/javascript"> 
     $(document).ready(function() {
         $("head").append('<meta name="apple-mobile-web-app-capable" content="yes">');
     });
</script> 
```

# ipc - GMFBridge 如何在两个独立的进程中使用？

> ID：11018642
> 
> 赞同：0
> 
> 时间：2012-06-13T15:48:05.373
> 
> 标签：ipc, directshow

GMFBridge 如何在两个独立的进程中使用？

因此，通常我们在同一个应用程序中有两个图表可以很容易地将它们桥接在一起。

任何想法如何在两个应用程序中做到这一点 - 一个应用程序是“渲染器”，第二个是“源”？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:27:21.900

过滤器图不会为您进行任何进程间通信，它们都应该存在于进程中。由您来实现`IPC`同步图表所需的一切。

# javascript - 如何使用 JavaScript 将域 .net 更改为 .com

> ID：11018647
> 
> 赞同：0
> 
> 时间：2012-06-13T15:48:28.923
> 
> 标签：javascript, dom, javascript-events

我今天有一个小问题，当我输入网站“http://www.websitename.net”时碰巧看到

它自动转换为“http://www.websitename.com”，即.net 转换为.com，然后加载页面。

我很想知道它是如何做到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:49:48.287

这通常作为服务器端重定向完成。

您可以观察网络流量并亲自查看会发生什么。例如在 IE9 中，使用开发者工具 (F12)，单击网络选项卡，然后单击“开始捕获”按钮开始监控。其他浏览器也有类似的功能。

在响应标头中，您会看到类似

```
Key         Value
Response    HTTP/1.1 301 Moved Permanently
Location    http://mywebsitename.net 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:49:58.367

您的浏览器假定您可能犯了错误（当未找到主机时）并将尝试备用（公共）域。这是假设该站点不存在。

如果这种情况发生在确实存在的站点上（例如当您访问 wikipedia.com 时），则会返回重定向（HTTP 302 - 临时移动）。

# perl - 从 .DBF 查看复合索引 (.cdx)

> ID：11018648
> 
> 赞同：1
> 
> 时间：2012-06-13T15:48:32.297
> 
> 标签：perl, foxpro, xbase

我正在尝试通过 Perl 为 Unix 编写自定义 FoxPro XBase 数据库驱动程序。我目前能够对我的 .dbf 和 .cdx 索引执行 CRUD。我的商店使用的销售点软件有一个基于 FoxPro 的文件系统。这个想法背后的总体计划是在 POS 和我的 Magento 网上商店之间建立一个代理。允许实体店和电子商务解决方案之间的实时更新。

我的问题相当简单直接。转储我的 .cdx 文件内容的最佳方法是什么，以便我可以快速查看 .dbf 文件上的索引。我目前正在使用 XBases indexdump，但这是一个缓慢而乏味的过程。转储可以是平台独立的，并且如果需要可以是可购买的软件。我正在尝试从 MSDN 完成这张图片

![在此处输入图像描述](../Images/859e779d9f9a240cacf10f9410a44530.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:17:23.917

[这](http://msdn.microsoft.com/en-us/library/s8tb8f47%28v=VS.80%29.aspx)来自 MSDN 可能会有所帮助 - 虽然它并不是真正的记录或讨论的事情，因为有人正在做你正在做的事情，所以没有必要深入研究 CDX 结构。

# iphone - 操作无法完成。（可可错误 1560。）

> ID：11018649
> 
> 赞同：3
> 
> 时间：2012-06-13T15:48:32.440
> 
> 标签：iphone, objective-c, ios, core-data, ios5

我在我的应用程序中使用核心数据。

使用可转换属性存储 NSArray 时出现此错误。

简而言之，我想知道，我应该怎么做才能将 NSArray 存储到核心数据中。

以及如何检索它。

这是我的代码。

```
#import <CoreData/CoreData.h>

@class category;

@interface qrandom :  NSManagedObject  
{
}

@property (nonatomic, retain) NSArray* arr;
@property (nonatomic, retain) category * cid;

@end 
```

..................................................... .........................................................

```
#import "qrandom.h"

#import "category.h"

@implementation qrandom 

@dynamic arr;
@dynamic cid;

@end 
```

..................................................... .....................

类别.h 文件

```
#import <CoreData/CoreData.h>

@class qrandom;

@interface category :  NSManagedObject  
{
}
@property (nonatomic, retain) NSNumber * cid;
@property (nonatomic, retain) qrandom * randomrelation;

@end 
```

..................................................... .....................................

类别.m 文件

```
#import "category.h"
#import "qrandom.h"

@implementation category

@dynamic cid;
@dynamic randomrelation;

@end 
```

..................................................... .........................................

![在此处输入图像描述](../Images/c60c70c85121a3cd32da88f3f0392466.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T16:11:46.547

基本上直接将 an`NSArray`或 an存储`NSDictionary`为可转换属性在 CoreData 中不起作用，因为它将无法检索数组的值。

请参阅 Marcus 的回答，该回答建议仅使用关系：

[NSMutableArray 与核心数据一起存储 = WORKS，但在更改数组后不起作用](https://stackoverflow.com/questions/3426557/nsmutablearray-stored-with-core-data-works-but-after-changing-array-doesnt-w)

但！

您可以存档您的数组，以便它可以在您的托管对象中使用。在此处查看 jbrennan 的回复： [将 NSMutableArray 保存到核心数据](https://stackoverflow.com/questions/1104075/saving-an-nsmutablearray-to-core-data)

# java - 我可以将 JTable 中的数据用于 Jasper 报告吗

> ID：11018651
> 
> 赞同：7
> 
> 时间：2012-06-13T15:48:37.080
> 
> 标签：java, jasper-reports

我是使用 Jasper 的新手，我正在练习创建会计程序。Jasper 帮助我使用 SQL 查询生成漂亮的报告，但是有没有办法使用来自 jtable 的数据生成报告？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T16:22:24.400

是的，您可以使用 JRTableModelDataSource 从表模型构建[JRDataSource](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/data/JRTableModelDataSource.html)。

字段的名称是返回的列的名称`TableModel.getColumnNames()`。您也可以`COLUMN_<index>`用作字段名称。

# javascript - 可拖动框宽度故障

> ID：11018652
> 
> 赞同：0
> 
> 时间：2012-06-13T15:48:37.533
> 
> 标签：javascript, css

通常我更喜欢为琐碎的问题编写自己的解决方案，因为通常插件会添加许多不需要的功能并增加您的项目规模。大小使页面变慢，并且 100k 页面浏览量/天网站中的 30k 差异（与 jquery 可拖动相比）对账单产生了很大影响。我已经使用 jquery，我认为这就是我现在所需要的，所以请不要告诉我使用另一个插件或框架来拖动东西。

考虑到这一点，我编写了以下代码，以允许可以拖动一个框。代码工作得很好（任何关于代码本身的提示都会非常感激），但我遇到了一个小故障。

当我将框拖到浏览器右边缘限制时，会出现一个水平滚动条，窗口宽度因框而变大。理想的行为是看不到水平滚动条，但允许将框的一部分放在窗口区域之外，就像 windows 窗口一样。

有小费吗？

CSS：

```
.draggable {
    position: absolute;
    cursor: move;
    border: 1px solid black;
} 
```

Javascript：

```
$(document).ready(function() {
    var x = 0;
    var y = 0;
    $("#d").live("mousedown", function() {
        var element = $(this);
        $(document).mousemove(function(e) {
            var x_movement = 0;
            var y_movement = 0;
            if (x == e.pageX || x == 0) {
                x = e.pageX;
            } else {
                x_movement = e.pageX - x;
                x = e.pageX;
            }
            if (y == e.pageY || y == 0) {
                y = e.pageY;
            } else {
                y_movement = e.pageY - y;
                y = e.pageY;
            }
            var left = parseFloat(element.css("left")) + x_movement;
            element.css("left", left);
            var top = parseFloat(element.css("top")) + y_movement;
            element.css("top", top);
            return false;
        });
    });
    $(document).mouseup(function() {
        x = 0;
        y = 0;
        $(document).unbind("mousemove");
    });
});​ 
```

HTML：

```
<div id="d" style="width: 100px; left: 0px; height: 100px; top: 0px;" class="draggable">a</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:19:32.870

对于一个简单的解决方案，您可以将一些 CSS 添加到可拖动对象的容器中以防止滚动条。

```
body { overflow: hidden; } 
```

jsFiddle：http: [//jsfiddle.net/F894P/](http://jsfiddle.net/F894P/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:32:51.317

而不是这个：

```
$("#d").live("mousedown", function () {
 // your code here
}); // live 
```

试试这个 ：

```
$("body").on("mousedown","#d", function(){
 // your code here
 $("#parent_container").css({"overflow-x":"hidden"});
 // or $("body").css({"overflow-x":"hidden"});
}); // on 
```

`#parent_container`可拖动对象在哪里。

你应该使用 jQuery 1.7+

从 jQuery 1.7 开始，该`.live()`方法已被弃用。用于`.on()`附加事件处理程序。旧版本 jQuery 的用户应`.delegate()`优先使用`.live().`

# android - 使用 HTTP 请求传递参数

> ID：11018657
> 
> 赞同：0
> 
> 时间：2012-06-13T15:48:55.537
> 
> 标签：android, web-services, http, parameters

嗨，我是 android 编程新手，我想知道如何调用 Web 服务并将参数传递给 Web 服务以获取 XML 形式的返回结果。

我以前使用过 Ksoap lib 和 SOAP 请求，但那不能正常工作，所以现在我正在尝试 HTTP 方法。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:53:10.613

检查以下内容，您将在其中使用 HTTP 发布请求，您将获得 XML 格式的响应

[Android HttpPost：如何获得结果](https://stackoverflow.com/questions/2323617/android-httppost-how-to-get-the-result)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:58:26.727

您将需要阅读[Apache HttpClient](http://hc.apache.org/httpclient-3.x/)。除此之外，它还需要确保设备和服务器正在生成对方可以正确解析的消息。

服务器是现有服务吗？还是你也在设计？

# perforce - Perforce 和子模块

> ID：11018659
> 
> 赞同：2
> 
> 时间：2012-06-13T15:49:04.430
> 
> 标签：perforce, git-submodules

在工作中，我们使用 Perforce，我想知道是否可以通过版本控制使用它来做子模块。

例如，我有项目 B 和 C 使用的库 A。

我想这样做，以便当我修改 BI 时也可以在子文件夹中获得 A：

乙

---=> A(v1)

项目 C 也是如此，但它需要更新版本的库。

C

---=> A(v1.2)

我知道这种事情在 Git 上是可能的，但在 Perforce 上找不到任何东西。

谢谢，莱昂蒂

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T14:55:07.997

Perforce 真的用视图和路径来处理这类事情。这些使您可以组装正确的文件集以放入工作区（或分支或标签）。由于 Perforce 存储库可以包含您所有产品的所有组件或模块，因此您只需在工作数据集中选择您想要的组件或模块。您不需要子模块（或 SVN 外部）概念来从另一个存储库中提取数据。

您可以使用模板工作区来确保开发人员获得正确的文件集来处理。你可以更严谨一些，编写一些自定义工具（可能在 Perforce 代理中）来提供一些结构。

在 Perforce 流中可以找到与使用子模块最接近的等价物，其中路径定义了进入流的内容。流路径由子流继承。不过，这不是直接的等价物。

# ios - 如何在 Xcode 中使用多个 iOS 版本

> ID：11018664
> 
> 赞同：-2
> 
> 时间：2012-06-13T15:49:17.953
> 
> 标签：ios, iphone, xcode

我正在尝试测试运行 IOS 5.1.1 的 iPhone 4，并且在 xCode 的管理器中，当手机插入时，它说最新的可用软件版本是 5.0，我无法降级，所有帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:08:13.387

从 App Store 更新您的 Xcode。

# wcf - 基于 SOAP WCF 的实体框架通用 CRUD

> ID：11018665
> 
> 赞同：0
> 
> 时间：2012-06-13T15:49:18.820
> 
> 标签：wcf, entity-framework-4.1, repository-pattern

我正在编写一个建立在实体框架 ORM 之上的 WCF 服务。

该服务的两个客户端是一个 Web 应用程序（不是客户端）和一个 Windows 服务。

我过去曾使用 RepositoryPattern 来简化服务内的 CRUD 代码。是否可以通过 WCF 执行此操作？

我有大约十几个对象需要对其执行 CRUD，所以理想情况下，我想要一个 ServiceContract，如下所示：

```
IQueryable<T> GetAll();
IQueryable<T> FindBy(System.Linq.Expressions.Expression<Func<T, bool>> predicate);
virtual void Add(T entity);
virtual void Delete(T entity);
virtual void Edit(T entity);
virtual void Save(); 
```

在 WCF 中这种事情是可能的吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T20:00:06.200

使用 WCF 数据服务 - 它不使用 SOAP，而是使用 OData (REST)，但它提供了开箱即用的所需内容。使用标准 SOAP WCF 服务，您必须将表达式树的整个序列化写入 SOAP 请求，并将其重构为服务器上的 Linq 查询。

其他选项是 ASP.NET Web-API，它也支持`IQueryalbe`开箱即用的客户端。

# python - 蛋白质序列模式匹配python

> ID：11018666
> 
> 赞同：2
> 
> 时间：2012-06-13T15:49:31.720
> 
> 标签：python, algorithm, for-loop, pattern-matching, sequence

我正在研究蛋白质序列的匹配算法。我从一个对齐的蛋白质序列开始，我试图将一个未对齐的序列转换为正确对齐的序列。这是一个例子：

原始对齐序列：----AB--CD-----

错位序列：--A--BC---D-

预期的输出应如下所示：

原始对齐序列：----AB--CD-----

错位序列：----AB--CD-----（现在都一样了）

有人告诉我要非常具体地说明我的问题，但是我要匹配的序列长度超过 4000 个字符，粘贴到这里时看起来很荒谬。不过，我将发布两个代表我的问题的序列，这应该可以。

```
seq="---A-A--AA---A--"
newseq="AA---A--A-----A-----"
seq=list(seq) #changing maaster sequence from string to list
newseq=list(newseq) #changing new sequence from string to list
n=len(seq) #obtaining length of master sequence
newseq.extend('.') #adding a tag to end of new sequence to account for terminal gaps

print(seq, newseq,n) #verification of sequences in list form and length

for i in range(n)
    if seq[i]!=newseq[i]:
        if seq[i] != '-': #gap deletion
            del newseq[i]

        elif newseq[i] != '-':
            newseq.insert(i,'-') #gap insertion

        elif newseq[i] == '-':
            del newseq[i]

old=''.join(seq) #changing list to string
new=''.join(newseq) #changing list to string
new=new.strip('.') #removing tag

print(old) #verification of master-sequence fidelity
print(new) #verification of matching sequence 
```

我从这个特定的代码和序列集得到的输出是：

---AA--AA---A--

----AA--A----A-----A-----

我似乎无法让循环多次正确删除字母之间不需要的破折号，因为其余的循环迭代用于添加破折号/删除破折号对。
这是解决这里问题的良好开端。

如何成功编写此循环以获得所需的输出（两个相同的序列）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:30:32.710

序列比对问题是众所周知的，它的解决方案也有很好的描述。有关介绍性文本，请参阅[Wikipedia](http://en.wikipedia.org/wiki/Sequence_alignment)。我知道的最好的解决方案是动态编程，你可以在[这个网站](http://www.ibm.com/developerworks/java/library/j-seqalign/index.html)上看到一个用 Java 实现的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:31:48.463

我编辑了您的代码，现在它给出了正确的输出：

```
seq="----AB--C-D-----"
newseq="--A--BC---D-"
seq=list(seq) #changing maaster sequence from string to list
newseq=list(newseq) #changing new sequence from string to list
n=len(seq) #obtaining length of master sequence
newseq.extend('.') #adding a tag to end of new sequence to account for terminal gaps

print(seq, newseq,n) #verification of sequences in list form and length
for i in range(len(seq)):
    if seq[i]!=newseq[i]:
       if seq[i]=='-':
           newseq.insert(i,'-')

       elif newseq[i]=='-':
           newseq.insert(i,seq[i])
       else:
           newseq.insert(i,seq[i])

else:
    newseq=newseq[0:len(seq)]

old=''.join(seq) #changing list to string
new=''.join(newseq) #changing list to string
new=new.strip('.') #removing tag

print(old) #verification of master-sequence fidelity
print(new) #verification of matching sequence 
```

**输出：**

```
----AB--C-D-----
----AB--C-D----- 
```

和`AA---A--A-----A-----`：

```
---A-A--AA---A--
---A-A--AA---A-- 
```

# java - 阻塞队列和 InterruptedException

> ID：11018668
> 
> 赞同：1
> 
> 时间：2012-06-13T15:49:33.383
> 
> 标签：java, queue, java.util.concurrent

我有一个 A 类，其属性为 LinkedBlockingQueue。在 A 的一种方法中，我调用 LinkedBlockingQueue.put() 方法，因为我想在队列中插入一个项目。但是，如果队列已满，我的线程将等到空间可用或我的线程被中断。

问题是即使我的线程被中断，我也希望该项目在队列中。

有没有办法确保我的项目已插入队列？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T15:54:17.740

如果队列已满，您必须决定是否要等待。如果你设置它，你不能告诉它忽略最大长度。

如果队列太大，您可以做的是减慢生产者的速度。如果您愿意，这将允许您“忽略”最大值。例如中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T15:58:28.210

我看到的唯一方法是在循环中调用 queue.put() 。这种方式也许

```
boolean added = false;

while ( !added){
    try{
        queue.put(value);
        added = true;
    }catch(InterruptedException ie){
        // do something if required

        // make sure to set the interrupted flag on the thread, since it was cleared
        // when the exception was thrown
        Thread.currentThread().interrupt();
    }
}

if(Thread.currentThread.isInterrupted()){
    // you were previously interrupted before, so try to exit gracefully
    return;
} 
```

# google-translate - 谷歌翻译英语文本到语音

> ID：11018670
> 
> 赞同：9
> 
> 时间：2012-06-13T15:49:34.170
> 
> 标签：google-translate, text-to-speech

我正在使用（非官方）谷歌翻译 TTS api 来检索 mp3，以支持残疾学习者阅读网页。一切正常，但是我们有美国口音（我们在英国！）。然而，当我使用谷歌翻译时，它会获取带有英国口音的 mp3 - 我如何调用这种行为？

我使用了相同的 GET 请求 URL，所以我可以假设它不是：

```
http://translate.google.com/translate_tts?q=testing+1+2+3&tl=en 
```

（我玩过其他语言代码（en-gb）但没有运气 - 但是 fr 适用于法语。）

非常感谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-21T19:34:16.717

您可以在字符后的 tl 参数中指定区域变化`_`，例如

[http://translate.google.com/translate_tts?q=testing+1+2+3&tl=en_us](http://translate.google.com/translate_tts?q=testing+1+2+3&tl=en_us)

[http://translate.google.com/translate_tts?q=testing+1+2+3&tl=en_gb](http://translate.google.com/translate_tts?q=testing+1+2+3&tl=en_gb)

[http://translate.google.com/translate_tts?q=testing+1+2+3&tl=en_au](http://translate.google.com/translate_tts?q=testing+1+2+3&tl=en_au)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-14T12:37:22.710

通过使用 google 的“.co.uk”翻译网站的 GET 请求，可以生成英式英语。例如： translate.google.co.uk/translate_tts?q=Your+soundcard+works+perfectly&tl=en

# css - 内联字体/图像对齐 - 帖子内容的字体更改

> ID：11018682
> 
> 赞同：0
> 
> 时间：2012-06-13T15:50:15.513
> 
> 标签：css, fonts

首先，让我说我不是专业的编码员 - 我已经一点一点地完成了我网站上的每一个更改，我不确定我是否真的明白我是如何让一些东西工作的。

也就是说，我已经发布了在我看来两个简单的问题（对于那些真正知道他们在 Wordpress 论坛上做什么并且只收到我需要学习 CSS 的 smart@ss 评论的人。无论如何......

一个我已经更改了网站上的整体字体，但我似乎无法获得帖子的正文 - 仅此一项就可以更改为更好的阅读字体。我已将 League Gothic 设置为我的主要标题、侧边栏、主页字体，但我需要将帖子正文中的字体更改为更容易看的东西。我尝试的每一种组合都会改变所有字体或根本不起作用。有什么好的建议吗？

二 我在我的网站上的横幅下方有图像/文本。“导航栏”的每一侧都有两个小图标，我希望全部水平/垂直对齐，但每侧的两个图标仅显示在第一行文本上方一点 - 这会将文本的底行推到背景图像。

谁能告诉我我错过了什么？

该网站是thirdrailers.com

非常感谢你...

（另外，我还会添加其他内容 - 如果有人可以推荐编码器/设计师，我将非常感激。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:12:59.590

1）您想更改字体：`#post-content p`和`.recent-postwrap p, .main-postwrap p`. 这将分别更改内部页面和主页。您可以添加：`font-family: Arial`或您想使用的任何字体。

2）快速修复，虽然不是最好的。在图像上，添加左侧图像的样式：`float: left; margin: 15px -20px 0 20px;`- 相应地调整这些数字。在右图中，只需将其更改为`float: right; margin: 15px 20px 0 -20px;`.

希望这对你有用。

# security - 密码存储和安全密码传输

> ID：11018685
> 
> 赞同：1
> 
> 时间：2012-06-13T15:50:36.293
> 
> 标签：security, passwords, password-protection, password-encryption

我正在开发一个系统（基于 PHP，但对此并不重要），它将用户密码保存在数据库中。但是，在安全性方面，我需要考虑如何保护密码并确保密码传输机制的完整性。

我选择保护数据库中用盐散列的密码，但在将密码从浏览器传输到服务器（将用于非安全连接）方面，我不确定如何检查它。

所以我的问题是，有没有人知道任何安全机制可以允许客户端发送他们的密码，然后可以将其与数据库（与盐一起使用）进行比较，而密码在除客户端浏览器内存之外的任何地方都是纯文本的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:53:31.440

在整个行业中完成此操作的方式是通过 SSL 通道以明文形式发送密码。

也就是说，您必须确保登录页面 - 以及它加载的所有资源 - 通过 HTTPS 提供。这将保护传输中的密码。一旦密码到达另一边，您就可以散列并与数据库中的内容进行比较。

发送哈希或其他深奥的解决方案（以尊重您的“仅在浏览器内存中以明文形式显示的密码”）只会将秘密交换为另一个 - 攻击面保持不变。您可以在客户端混淆密码并添加基于时间的组件，但由于所有逻辑都必须在客户端上，因此它可以反转，所以您只是添加“晦涩难懂”（并且通过晦涩难懂的安全性是不值得的）。

# servicestack - ServiceStack 是否支持任何类型的持久连接？

> ID：11018687
> 
> 赞同：2
> 
> 时间：2012-06-13T15:50:38.010
> 
> 标签：servicestack

我正在做一个项目，我需要客户端能够打开与服务器的持久连接，服务器可以通过该连接将定期更新发送回客户端。ServiceStack 是否提供任何工具来帮助解决这种情况？

# ruby-on-rails - 对太阳黑子模型进行分组以对视图进行排序/计数

> ID：11018692
> 
> 赞同：0
> 
> 时间：2012-06-13T15:50:53.703
> 
> 标签：ruby-on-rails, sunspot-rails

```
 @search = Sunspot.search(Event, Person, Organization) do
    keywords params[:q]
    order_by(:score)
  end 
```

根据搜索结果，我想创建一个模型列表，其中包含每个模型的计数。

*   活动 (12)
*   人 (5)
*   组织 (3)

有没有办法在 Sunspot 中进行这种类型的分组？

```
<% @search.each_hit_with_result do |hit, result| -%>
    <%= result.class %> <!- Gives me Model, but repeated -->
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T23:12:14.653

可能有一种更聪明的方法，但一种可能的方法是获取这样的类数组

```
classes = @search.results.map(&:class) # this will give array of returned classes 
```

然后按照[此链接中的建议进行操作](https://stackoverflow.com/questions/1765368/how-to-count-duplicates-in-ruby-arrays)

```
h = Hash.new(0)
classes.each { | v | h.store(v, h[v]+1) }

# h = { 3=>3, 2=>1, 1=>1, 4=>1 } 
```

希望有帮助

# windows - 在 Windows 7 上启用区分大小写

> ID：11018695
> 
> 赞同：1
> 
> 时间：2012-06-13T15:50:58.703
> 
> 标签：windows, case-sensitive

Windows 7 没有区分大小写的文件系统，我遇到了严重的问题。

我是我团队中唯一在 Windows 上工作的开发人员（我们希望保持这种方式以进行跨操作系统检查），并且由于 Windows 不会在具有不同情况的文件上崩溃，我是偶尔产生错误的人。

当我尝试在我的意思是“asdf.php”的地方包含“aSdF.php”时，有什么方法可以让 Windows 发疯？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:56:22.577

从编程的角度来看，您可以通过`FILE_FLAG_POSIX_SEMANTICS`在调用[`CreateFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858.aspx).

不过，您只需要`CreateFile`直接调用即可——典型的标准库（例如，如果您`fopen`在 C 或`std::ifstream::open`C++ 中使用）不会传递该标志，因此文件名将被视为不区分大小写。

# objective-c - Mac App 中的 Applescript 显示“预期行尾，但发现 \U201c\”\U201d。

> ID：11018699
> 
> 赞同：8
> 
> 时间：2012-06-13T15:51:12.190
> 
> 标签：objective-c, applescript, copy-paste, sandbox

我正在尝试为我的最后一个活动应用程序执行复制/粘贴，这是我的代码：

```
NSString *appleScriptSource = [NSString stringWithFormat:@"\ntell application \"%@\" to activate\ntell application \"System Events\" to tell process \"%@\"\nkeystroke \"v\" using command down\nend tell", [lastApp localizedName], [lastApp localizedName]];

NSDictionary *error;
NSAppleScript *aScript = [[NSAppleScript alloc] initWithSource:appleScriptSource];
NSAppleEventDescriptor *aDescriptor = [aScript executeAndReturnError:&error]; 
```

问题是在某些计算机上它工作得很好，但在其他计算机上却失败了。executeAndReturnError 返回的错误的错误输出是：

```
2012-06-13 17:43:19.875 Mini Translator[1206:303] (null) (error: {
    NSAppleScriptErrorBriefMessage = "Expected end of line but found \U201c\"\U201d.";
    NSAppleScriptErrorMessage = "Expected end of line but found \U201c\"\U201d.";
    NSAppleScriptErrorNumber = "-2741";
    NSAppleScriptErrorRange = "NSRange: {95, 1}";
}) 
```

我似乎无法弄清楚这意味着什么或为什么会发生。

我们尝试将生成的 apple-script 代码复制到 Apple Script 编辑器中，在这里它工作得很好。

我的应用程序是沙盒的 - 我已经为我想要支持的应用程序添加了密钥“com.apple.security.temporary-exception.apple-events”的捆绑标识符。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T21:13:48.407

我猜 \u201c 和 \u201d 是红鲱鱼，只是代表苹果脚本产生的错误消息中双引号周围的智能引号，而您的问题在于您正在格式化为脚本的最后一个应用程序的本地化名称。我不知道为什么你可能会在一台机器上看到这个而不是另一台。

例如，如果名称是 'Some " App'，那么双引号最终会不匹配，因为它最终会注入双引号字符串的中间。您可能想尝试将名称中的任何双引号替换为 '\ "' 这将逃脱他们。

例如

```
NSString *esc = [[lastApp localizedName] stringByReplacingOccurrencesOfString:@"\"" withString:@"\\\""];
```

# typo3 - tt_news 在菜单

> ID：11018700
> 
> 赞同：0
> 
> 时间：2012-06-13T15:51:13.297
> 
> 标签：typo3, typoscript

需要创建一个特殊而复杂的菜单。它应该在 2 级所有子页面中显示其父页面（1 级）的最新消息（我使用 tt_news 并为每个页面 1 级创建新闻）。这是我的源代码，它由两部分组成，它在所有二级菜单中只显示第一个父页面（一级）的新闻。

1.  第一部分：

    ```
    lib.var1 < plugin.tt_news
    lib.var1 {

           code >
           code = LATEST

           templateFile= fileadmin/news_template.tmpl

           categoryMode = 0

        pid_list >
        pid_list.insertData = 1
        pid_list = {data:pid}
        catImageMode = 1
        catTextMode = 0

        latestLimit = 1

    } 
    ```

2.  第二部分：

    ```
    lib.field_menu= HMENU
    lib.field_menu {
        entryLevel = 0

        ### first level ###
        1 = TMENU
        1 {
            noBlur = 1
            expAll = 1
            wrap = |
            NO = 1
            NO {
                allWrap = |
                ATagTitle.field = title
                }
        }

        ### secondary Level ###
        2 = TMENU
        2 {
            noBlur = 1

                        stdWrap.wrap = <ul style=""><li> | </li></ul> 
                        stdWrap.innerWrap = <div><ul>|</ul></div>
                        stdWrap.innerWrap2.preCObject =< lib.var1

            NO = 1
            NO {
                linkWrap= <li class="">|</li>
                ATagTitle.field = title

                        }
           }
       }
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:41:06.957

尝试：

```
pid_list >
pid_list = TEXT
pid_list.insertData = 1
pid_list.data = field : pid 
```

相反，如果`{data:pid}`.

# .net - 关闭从 App.xaml 启动的模式窗口会触发 WindowClosing 事件

> ID：11018703
> 
> 赞同：0
> 
> 时间：2012-06-13T15:51:18.633
> 
> 标签：.net, wpf

我有一个 WPF 应用程序，作为启动的一部分，我需要显示一个模式窗口以从用户那里获取一些信息。我从 App.xaml.cs_ApplicationStartup 内部创建并显示窗口。在窗口的确定按钮中，我调用了 Close() 方法。检索到信息后，我想显示主应用程序窗口。但是，主应用程序窗口立即收到一个 WindowClosing 事件并终止。App.xaml 代码：

```
private void ApplicationStartup(object sender, StartupEventArgs e)
{
    if (Settings.Default.AskForLoginCredentials)
    {
        var loginWindow = new LoginCredentialsWindow();
        bool? retVal = loginWindow.ShowDialog();
        if (retVal.HasValue && retVal.Value)
        {
            string un = loginWindow.UserName;
            string pw = loginWindow.Password;
        }
        else
        {
            _logger.Info("Credential request prompt was refused. Exiting Application.");
            return;
        }
    }

    MainAppWindow window = new MainAppWindow();
    window.Show();
} 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:57:38.710

更改[Application.ShutdownMode](http://msdn.microsoft.com/en-us/library/system.windows.application.shutdownmode.aspx)属性

默认值为`OnLastWindowClose`，这意味着应用程序将在最后一个窗口关闭时关闭。其他两个选项是`OnMainWindowClose`和`OnExplicitShutdown`

我通常使用`OnExplicitShutdown`，这意味着需要调用[Shutdown()才能退出应用程序](http://msdn.microsoft.com/en-us/library/system.windows.application.shutdown.aspx)

# javascript - 如何运行嵌套的javascript函数？

> ID：11018710
> 
> 赞同：0
> 
> 时间：2012-06-13T15:51:40.627
> 
> 标签：javascript

我是 javascript 中面向对象编程的新手，我正在尝试了解我正在从事的项目中的一些功能。

我将如何调用/运行内部函数（列出的 'this.getFieldset = function() {'）来执行？

```
function Fieldset() {

    this.id = "";
    this.content = document.createElement("DIV");
    this.content.id = "content";
    this.title = "Title";

    this.getFieldset = function() {

        var div = document.createElement("DIV");
        div.id = this.id;
        var span = document.createElement("SPAN");
        var fieldset = document.createElement("DIV");
        fieldset.id = "fieldset";
        var header = document.createElement("DIV");
        header.id = "header";
        span.appendChild(document.createTextNode(this.title));
        header.appendChild(span);
        div.appendChild(header);
        div.appendChild(this.content);
        div.appendChild(fieldset);

        return div;
    }
}

var myFieldset = new Fieldset();
myFieldset.getFieldset(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T15:54:04.667

首先你应该创建一个 的实例`Fieldset`，然后你就可以调用它的函数（被称为方法）：

```
var myFieldset = new Fieldset();

myFieldset.getFieldset(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:54:14.870

```
 function Fieldset() {

    this.id = "";
    this.content = document.createElement("DIV");
    this.content.id = "content";
    this.title = "Title";

    this.getFieldset = function() {

        var div = document.createElement("DIV");
        div.id = this.id;
        var span = document.createElement("SPAN");
        //var fieldset = document.createElement("DIV");
        //fieldset.id = "fieldset";
        var header = document.createElement("DIV");
        header.id = "header";
        span.appendChild(document.createTextNode(this.title));
        header.appendChild(span);
        div.appendChild(header);
        div.appendChild(this.content);
        div.appendChild(fieldset);

        window.alert("test");

        return div;
    }

    //add call to run function
    this.getFieldset();

} 
```

# ocean - 如何知道项目何时完成打开

> ID：11018712
> 
> 赞同：2
> 
> 时间：2012-06-13T15:51:49.380
> 
> 标签：ocean, petrel

启动一个新项目后，我想知道 Petrel 什么时候完成了新项目的创建。当订阅 DataManager.WorkspaceOpened 事件时，该事件会在工作区打开时被调用，但这可能不是在主线程完成创建新项目时。

关于何时知道 Petrel 何时完成创建新项目的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:23:18.540

也许您可以尝试找到另一种方法来解决您的潜在问题，而不是监听项目事件？您是否可以进行惰性评估并等到用户真正需要您的代码来执行项目加载后将执行的操作？

有时你可能最终会在一个循环中追逐这类问题：我需要 A 发生在 B 之后，B 发生在 C 之后，C 发生在 A 之后。

无论如何......这是一个你可以在你的IModule中尝试的hack：

```
void WorkspaceOpened(object sender, EventArgs e)
{
    Application.Idle += new EventHandler(Application_Idle);
}

void Application_Idle(object sender, EventArgs e)
{
    // Deatach from this, since this event can be raised 100 times per second, 
    // and we only want it once per project.
    Application.Idle -= new EventHandler(Application_Idle);

    DoMyStuffHereAfterTheProjectHasFinishedOpening();
} 
```

# vim - Vim - 转到上一个位置

> ID：11018713
> 
> 赞同：85
> 
> 时间：2012-06-13T15:51:56.447
> 
> 标签：vim

假设我在 vim 中打开一个文件。我从第 1 行第 1 列开始并按住`j`直到我在第 14 行。按下`:``7``CR`使我进入第 7 行。我按下`y``y`“猛拉”。

如何返回到第 14 行？使用`CTRL`+`o`将我带回文件的顶部。``` ```给了我同样的结果。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-06-13T16:06:32.400

您可以键入`7G`跳转到第 7 行，然后键入`Ctrl-o`跳转回。
`:set showcmd`在右下角显示您输入的内容。

* * *

拉出第 7 行（无光标移动）：

```
:7y 
```

将第 7 行粘贴到第 14 行下方：

```
:7t14 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-06-13T16:04:35.053

`<C-o>`并`<C-i>`允许您上下跳转列表。它们与“跳转”命令一起使用，但不适用于`jjjjjjjjjjj`.

为了利用这个特性——并在这个过程中节省大量时间和按键——我建议你养成使用更好的方法来浏览你的代码的习惯：`/?^$fFtTbBeEwW{}`等等。

是的，使用标记。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-06-13T16:08:42.133

另一种方法：要跳回另一行，您可以使用`'``'`. 这类似于为某些跳跃动作设置的自动标记。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-06-13T15:54:02.407

为什么不使用example[设置标记](http://vim.wikia.com/wiki/Using_marks)`m``a`，然后使用````a`or返回它`'``a`？

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-06-13T15:54:47.570

标记您最初使用的行`m``a`，然后`'``a`返回那里。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-13T23:35:56.443

如果您想返回到之前的位置，首先您必须使用标记 (m) 命令标记该位置，后跟任何字母 az 或 AZ，例如`ma`将位置标记为“a”。

要返回该位置，您将输入 `a.

# ruby-on-rails - 尝试在 Heroku 上使用 RMagik 时出错

> ID：11018716
> 
> 赞同：1
> 
> 时间：2012-06-13T15:51:59.030
> 
> 标签：ruby-on-rails, ruby, heroku, rmagick

我对 ruby​​、rails、heroku 甚至 RMagick 的工作都比较陌生。我尝试了几种在堆栈溢出时发现的在 Heroku 上使用 RMagick 的解决方案，但没有任何结果。这是我遇到的一个有趣的路障。

我创建了一个工作函数来确定仅在文本超出给定长度时要修改的正确字体大小。一切都在我的本地机器上运行良好。但是，一旦在 heroku 上尝试，似乎 RMagick 要么未安装，要么未被识别。看起来 Heroku 控制台引用了 ruby​​ 1.9.1，这与它有什么关系吗？我正在继续研究这个问题，但如果有人对此事有任何想法，我会很感兴趣。

非常感谢

*****本地机器 Ruby 1.8.7 导轨控制台*******

 **```
1.8.7 :001 > def find_width(string, typeface, font_size)
1.8.7 :002?>   max_width = 1087
1.8.7 :003?>   type_size = font_size.to_i
1.8.7 :004?>   label = Magick::Draw.new
1.8.7 :005?>   label.font = typeface
1.8.7 :006?>   label.pointsize = type_size
1.8.7 :007?>   label.text_antialias(true)
1.8.7 :008?>   label.text(0,0,string)
1.8.7 :009?>   metrics = label.get_type_metrics(string)
1.8.7 :010?>   width = metrics.width
1.8.7 :011?>   if width > max_width
1.8.7 :012?>     adjusted_size = type_size * max_width / width
1.8.7 :013?>     return adjusted_size.to_i
1.8.7 :014?>     else
1.8.7 :015 >       return font_size
1.8.7 :016?>     end
1.8.7 :017?>   end
=> nil 
1.8.7 :018 > find_width("HI", "blackjar-webfont", "263pt")
=> "263pt" 
1.8.7 :019 > find_width("This is a test!", "blackjar-webfont", "263pt")
=> 185 
1.8.7 :020 > 
```

* * *

*****本地机器 Ruby 1.9.2 导轨控制台*******

 **```
Loading development environment (Rails 3.0.7)
1.9.2p290 :001 > def find_width(string, typeface, font_size)
1.9.2p290 :002?>   max_width = 1087
1.9.2p290 :003?>   type_size = font_size.to_i
1.9.2p290 :004?>   label = Magick::Draw.new
1.9.2p290 :005?>   label.font = typeface
1.9.2p290 :006?>   label.pointsize = type_size
1.9.2p290 :007?>   label.text_antialias(true)
1.9.2p290 :008?>   label.text(0,0,string)
1.9.2p290 :009?>   metrics = label.get_type_metrics(string)
1.9.2p290 :010?>   width = metrics.width
1.9.2p290 :011?>   if width > max_width
1.9.2p290 :012?>     adjusted_size = type_size * max_width / width
1.9.2p290 :013?>     return adjusted_size.to_i
1.9.2p290 :014?>     else
1.9.2p290 :015 >       return font_size
1.9.2p290 :016?>     end
1.9.2p290 :017?>   end
=> nil 
1.9.2p290 :018 > find_width("HI", "blackjar-webfont", "263pt")
=> "263pt" 
1.9.2p290 :019 > find_width("This is a test!", "blackjar-webfont", "263pt")
=> 185 
1.9.2p290 :020 > 
```

* * *

****** *** ** *** ** ***** *HEROKU 控制台****** ** *** ** *** ********

 **```
Loading production environment (Rails 3.0.7)
irb(main):001:0> def find_width(string, typeface, font_size)
irb(main):002:1> max_width = 1087
irb(main):003:1> type_size = font_size.to_i
irb(main):004:1> label = Magick::Draw.new
irb(main):005:1> label.font = typeface
irb(main):006:1> label.pointsize = type_size
irb(main):007:1> label.text_antialias(true)
irb(main):008:1> label.text(0,0,string)
irb(main):009:1> metrics = label.get_type_metrics(string)
irb(main):010:1> width = metrics.width
irb(main):011:1> if width > max_width
irb(main):012:2> adjusted_size = type_size * max_width / width
irb(main):013:2> return adjusted_size.to_i
irb(main):014:2> else
irb(main):015:2* return font_size
irb(main):016:2> end
irb(main):017:1> end
=> nil
irb(main):018:0> find_width("HI", "blackjar-webfont", "263pt")
NameError: uninitialized constant Magick from /app/vendor/bundle/ruby/1.9.1/gems/aws-s3-0.6.2/lib/aws/s3/extensions.rb:206:in `const_missing_from_s3_library'
from (irb):4:in `find_width'
from (irb):18
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.0.7/lib/rails/commands/console.rb:44:in `start'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.0.7/lib/rails/commands/console.rb:8:in `start'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.0.7/lib/rails/commands.rb:23:in `<top (required)>'from script/rails:6:in `require'from script/rails:6:in `<main>'
irb(main):019:0> 
```

* * *

功能码

```
def find_width(string, typeface, font_size)
    max_width = 1087
    type_size = font_size.to_i
    label = Magick::Draw.new
    label.font = typeface
    label.pointsize = type_size
    label.text_antialias(true)
    label.text(0,0,string)
    metrics = label.get_type_metrics(string)
    width = metrics.width
    if width > max_width
        adjusted_size = type_size * max_width / width
        return adjusted_size.to_i
    else
        return font_size
    end
end 
```******

# javascript - Javascript - 使函数在函数完成时告诉调用者

> ID：11018719
> 
> 赞同：0
> 
> 时间：2012-06-13T15:52:04.107
> 
> 标签：javascript, function

所以假设我正在调用这样的函数：

```
some_function('pages',{attr1: 1, attr2: 2},function(){
    alert('the function is ready!');
} 
```

现在如何设置“some_function()”函数以便返回给调用者它已准备好并使警报消失？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:53:36.277

你的意思是这样的吗？

```
function some_function(type, options, callback) {
  if (some_condition) {
    callback();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:54:13.363

假设签名`some_function`看起来像这样：

```
function some_function(name, data, callback) 
```

你只需要`callback`在你准备好时打电话。

```
function some_function(name, data, callback){
    // do whatever
    if(typeof callback === 'function'){
        callback(); // call when ready
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T16:02:00.207

我认为你的意思是回调。也许是这样的：

```
function some_function(param1, param2, callback) {

    // normal code here...

    if ( typeof callback === 'function' ) { // make sure it is a function or it will throw an error
        callback();
    }
} 
```

用法：

```
some_function("hi", "hello", function () {
    alert("Done!");
}); 
/* This will do whatever your function needs to do and then,
when it is finished, alert "Done!" */ 
```

* * *

**注意：**把 your 放在`return`子句之后`if`。

# qml - 在 Qt5 QML 应用程序中计算渲染时间

> ID：11018720
> 
> 赞同：1
> 
> 时间：2012-06-13T15:52:10.440
> 
> 标签：qml, qt5

我正在使用 QT5 alpha 为基于 linux 的平板电脑开发 QML 应用程序。该应用程序在拥有一定数量的 qml 小部件时会变慢。我需要知道渲染每一帧花费了多少时间。哪个组件执行 qml 场景图的渲染，我如何计算帧时间？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T18:53:10.193

您需要结帐`qtdeclarative`模块。渲染类在`src/quick/scenegraph/coreapi/`检查中`qsgdefaultrenderer.cpp`。但是它可能无济于事，因为场景图会立即渲染所有内容。每个 QML 项都被转换为更简单的节点。然后将这些节点组合成一个列表，然后呈现整个列表。您可能想要使用 QT Creator 附带的 QML profiler。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T22:57:11.740

你看过 Qt Creator 中的 QML profiler 吗？除了渲染时间，它还显示绑定评估、组件创建和信号处理的成本。

# c# - resource.GetObject 中使用的美元 ($) 字符

> ID：11018721
> 
> 赞同：3
> 
> 时间：2012-06-13T15:52:13.093
> 
> 标签：c#, .net, winforms, string, icons

我刚刚在一个旧的 Windows 窗体应用程序（由设计师创建）中发现了这一行：

`this.Icon = ((System.Drawing.Icon)(resources.GetObject("$this.Icon")));`

它似乎正在使用[ResourceManager.GetObject()](http://msdn.microsoft.com/en-us/library/963f81yd.aspx)来获取图标。我的问题是关于`$`前缀的重要性`this`。文档中没有提到美元符号。

美元是否有特殊含义（可能是反射？）或仅与执行有关`GetObject()`？

另外图标实际存储在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:39:54.950

这是 .NET 中使用的一个非常标准的技巧，编译器在需要为自动生成的类或字段生成名称时也会使用它。使用 like 字符`$`可确保程序中的标识符永远不会发生名称冲突。

当你只用 C# 编程时，这种可能性不大，*这*是一个关键字。但肯定是其他语言。例如，您可以创建一个 VB.NET Winforms 项目，在表单上放置一个按钮并将其命名为“this”。本地化表单时，按钮的 Text 属性源显示为：

```
 <data name="this.Text" xml:space="preserve">
    <value>Button1</value>
  </data> 
```

如果它没有将 $ 放在它前面，那将是与表单的 Text 属性资源的名称冲突。除非您使用一种允许在标识符名称中使用 $ 的语言进行编程。标准的 VS 语言都没有。

另一个细节是，您将无法从 C# 代码中引用该按钮。也有一个逃生口，你可以在你的代码中使用@this。@ 前缀确保编译器不会将其识别为关键字，而只是一个普通标识符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:59:19.627

The WinForms designer actually dumps quite a bit of hidden items like this into the resource file (.resx) assocaited with each form in order to support, mostly, internationalization (though other designer meta-data is there as well). While text and icons may be obvious, even layout information can be there. I suppose those German words are pretty long so when internationalizaing the form you may actually need to change label widths.

The $ I would assume is a way to make sure the designer-added resources don't conflict with user resources.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T15:59:27.880

It turns out that the icon is stored within the corresponding `.resx` file and was actually defined with the dollar prefix `$this.Icon`. This would imply that the dollar doesn't have a special meaning at all.

# c++ - C++ Winsock 确定 HTTP 或 HTTPS

> ID：11018722
> 
> 赞同：2
> 
> 时间：2012-06-13T15:52:16.273
> 
> 标签：c++, https, winsock

我刚刚开始研究 Winsocks，我有一个简单的问题要问你：我如何确定与服务器的连接是否必须通过 HTTP 或 HTTPS 连接进行？假设我想连接到 randomsite.random，我怎么知道我需要什么样的连接？我知道对于 HTTP，我必须连接到端口 80，而对于 HTTPS，需要 443，但是我如何确定何时需要 HTTPS 连接？

感谢您的关注！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T15:54:16.227

与 Web 浏览器决定的方式相同：基于您尝试加载的 URL。在 Web 浏览器中，URL 以`http`或开头`https`，用于确定是否应使用 SSL 连接。如果 URL 中没有指定端口号，这也用于确定端口。

许多网站同时提供安全和非安全版本。有些仅提供安全版本，但仍运行非安全服务器，该服务器会重定向到安全版本的 URL。如果您实现以下重定向，则无需担心要使用哪个版本：它会自动发生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T15:54:54.387

这通常是您要连接的站点的功能。

如果站点需要 HTTPS 连接，那么如果您通过 HTTP 连接，您将获得带有 HTTPS URL 的重定向响应代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T15:56:37.663

首先，并不总是80端口和443端口。其次，如果使用错误的通信协议，将无法建立成功的通信。正如另一个答案中所说，如果您尝试通过 HTTP 连接到 HTTPS 服务器，它将为您提供一个带有 HTTPS URL 的重定向响应代码。

大多数情况下，您事先就有了这些信息！

# javascript - 来自 JSON 的 Dojo 折线图，具有多个系列和公共 x 轴

> ID：11018723
> 
> 赞同：3
> 
> 时间：2012-06-13T15:52:20.590
> 
> 标签：javascript, dojo, dojox.charting

我相信我想要完成的任务应该是一项相当普遍的任务，但我很难让它发挥作用。我只是希望从包含（对于每条记录）一个 ISO8601 时间戳以及多个数据点的数据集中创建一个多系列图。数据为 JSON 格式，我使用的是 dojox.charting.chart “Lines”类型。

我已经知道 Dojo 图表不能直接处理基于时间的轴数据，更不用说 ISO8601。所以我已经处理了将 x 轴转换为 ms-since-T0 服务器端的问题。

这是我的 JSON 的一个提炼示例摘录：

```
[{"Offset_ms":0,"CP":250.58368,"TP":181.88211},
{"Offset_ms":360000,"CP":233.18443,"TP":119.94824},
{"Offset_ms":540000,"CP":227.15465,"TP":117.99422},
{"Offset_ms":720000,"CP":222.87495,"TP":117.55895},
{"Offset_ms":896000,"CP":218.19876,"TP":117.64221},
{"Offset_ms":900000,"CP":219.77487,"TP":117.93475}] 
```

和提炼的 JavaScript（假设上面的 JSON 在变量 'sequenceData' 中）：

```
var chart = new dojox.charting.Chart("sequenceDataGraph");

chart.addPlot("default", {
    type: "Lines",
    tension: "X"
});
chart.addAxis("x", { labelFunc: labelTimeAxis });
chart.addAxis("y", { vertical: true });

var sequenceDataStore = new dojo.store.Observable(new dojo.store.Memory({
    data: {
        label: "Sequence",
        items: sequenceData
    }
}));

addSequenceDataSeries(chart, sequenceDataStore, "TP");
addSequenceDataSeries(chart, sequenceDataStore, "CP");

chart.render();

function addSequenceDataSeries(chart, sequenceDataStore, sColumnName) {
    chart.addSeries(sColumnName, new dojox.charting.StoreSeries(sequenceDataStore, { query: {} },
                    sColumnName));
} 
```

似乎正在发生的事情是，Dojo Chart 根本不使用 x 轴数据，而是根据数据点的数量以固定间隔绘制每个点。也就是说，每个数据点似乎都被分配了一个序数，例如如果 Offset_ms 只是 1、2、3... 由于我的数据点*并不*总是固定间隔，因此结果图是扭曲的。

如何指示 Dojo Chart 将 JSON 数据中的“Offset_ms”字段用于 x 轴组件？

我浏览了教程、API 文档并执行了大量 Google 和 SO 搜索，但均无济于事。我什至浏览了 Dojo 源的部分内容，尤其是 StoreSeries.js.uncompressed.js，但我没有找到任何答案。这当然是可能的，希望微不足道！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:29:37.467

不幸的是，官方的 dojo 文档严重缺乏，我只是通过浏览 dojo 源才弄清楚如何做类似的事情。具体来说，StoreSeries 测试的第 135 行，[http://archive.dojotoolkit.org/nightly/dojotoolkit/dojox/charting/tests/test_StoreSeries.html](http://archive.dojotoolkit.org/nightly/dojotoolkit/dojox/charting/tests/test_StoreSeries.html)

StoreSeries 构造函数的第三个参数接受一个对象，该对象将 X 和 Y 轴映射到数据存储中的特定字段。

从此更改代码中的以下行：

```
chart.addSeries(sColumnName, new dojox.charting.StoreSeries(sequenceDataStore, { query: {} },
                sColumnName)); 
```

对此：

```
chart.addSeries(sColumnName, new dojox.charting.StoreSeries(sequenceDataStore, { query: {} }, 
                { x: "Offset_ms", y: sColumnName })); 
```

`sColumnName`变成`{ x: "Offset_ms", y: sColumnName }`

# html - 不要管理定位（并排）

> ID：11018725
> 
> 赞同：0
> 
> 时间：2012-06-13T15:52:51.393
> 
> 标签：html, css

我有以下小提琴：http: [//jsfiddle.net/BFSH4/](http://jsfiddle.net/BFSH4/)

如您所见，有两个问题：

1.  h1 和 h2 没有垂直对齐。
2.  导航和内容不是水平对齐的。

对于 1\. 我已经尝试过边距和填充。没有成功...

第二个也不是那么容易浮动和使用 inline-block 的常用方法不起作用......

我究竟做错了什么？

我终于设法浮动标题。问题是 hgroup 不是块元素。但是，即使它仍然有效，我认为最好使用真实的图像作为企业名称和口号。

现在只有水平对齐的问题失败了。

我不知道为什么：http: [//jsfiddle.net/BFSH4/2/](http://jsfiddle.net/BFSH4/2/)

我可以为所欲为，他们不可能不并肩！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:07:33.150

**您的第一个问题的解决方案**（[在此处找到](https://stackoverflow.com/questions/10939288/how-can-i-vertically-center-text-in-a-dynamically-high-div/10939940#10940314)）：

**HTML**

```
<div class="header">
    <span></span><img src="images/prototype.png" /><hgroup><h1>Prototype</h1><h2>SideBySide</h2></hgroup>
</div> 
```

**CSS**

```
.header {
    height: 160px;
    border: 1px solid #8a2be2;
    /* text-align: center; */
}

.header span {
    height: 100%;
    vertical-align: middle;
    display: inline-block;
}

.header img {
    display: inline-block;
    height: 160px;
    float: left; /* added, so the image will appear left to the text correctly */
}

.header hgroup {
    margin: 0;        
    vertical-align: middle;
    display: inline-block;
} 
```

此解决方案取决于[`display: inline-block`](http://caniuse.com/#search=inline-block)

**第二个问题的解决方案**：

```
.nav {
    width: 229px;
    display: block;
    margin: 0 auto;
} 
```

现场演示：http: [//jsfiddle.net/BFSH4/4/](http://jsfiddle.net/BFSH4/4/)

# java - 是否可以无限期保持套接字打开

> ID：11018726
> 
> 赞同：1
> 
> 时间：2012-06-13T15:52:52.203
> 
> 标签：java, c, sockets, network-programming

我是网络编程的新手。我很感兴趣是否可以通过 Java 服务器和 C 客户端之间的套接字建立网络连接并保持连接无限打开？我想保持连接打开以在客户端之间交换 XML 数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:00:42.433

理论上可以无限期地保持服务器套接字打开；但是，客户端套接字不能这样做。主要原因是客户端套接字依赖于服务器端套接字处理数据，而服务器套接字可能会关闭连接。

虽然可以无限期地保持连接打开，但实际方面通常会确保此类套接字不会永远保持打开状态。网络中断、中间路由器配置错误、带宽耗尽、计算能力不足等，所有这些都共同确保点对点连接充其量只是暂时的。

请注意，服务器端套接字是接收连接请求的套接字（产生具有自己的返回套接字的连接），因此即使没有连接也可以打开它。如果您将套接字视为与另一台计算机的开放连接，您将需要重新定位您的思维，以使服务器套接字有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T17:20:35.703

这更像是一个请求而不是一个答案，但作为一个用户，我发现套接字一直掉线。你不能让它们无限期地打开。当套接字意外关闭时，请 (A) 让用户知道连接已被丢弃，并且 (B) 让重新建立*相同的连接变得**非常*容易。好吧，这涉及到游戏，但我有一些客户不承认服务器已经消失，而服务器不承认我与连接断开的那个人是同一个人。

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T15:55:33.670

没有什么是无限的（在计算中），但只要两个应用程序都在运行，您就可以保持套接字连接打开。*

# asp.net - 按钮禁用但未启用

> ID：11018730
> 
> 赞同：0
> 
> 时间：2012-06-13T15:53:12.413
> 
> 标签：asp.net

当我单击 btn 控件时，使用 javascript 禁用 btn，然后 btn 单击事件调用。在 btn 点击事件中，我编写了代码，它给了我 excel/pdf 格式的报告，我使用方法 ExportToHttpResponse(ExportFormatType.Excel, Response, true, "Report Name") 这给了我异常，所以在这个方法之后或者当我写的时候最终阻塞btn.enable=真；或使用 javascript 然后不执行。异常是无法评估表达式，因为代码已优化或本机框架位于调用堆栈顶部

即我必须在生成报告时启用 btn。当这个方法被执行时 ExportToHttpResponse() 我得到了报告所以在这个方法之后我必须启用 btn 控制

```
protected void Page_Load(object sender, EventArgs e)
{
    btnExcel.Attributes.Add("onclick", " this.disabled = true; " + ClientScript.GetPostBackEventReference(btnExcel, null) + ";");
}

protected void btnExcel_Click(object sender, EventArgs e)
{
   view_report();
    try
    {
       Rpt.ExportToHttpResponse(ExportFormatType.Excel, Response, true, " Reportname");
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message);
        ex = null;
    }
    finally
    {                  
       btnExcel.Enabled = true;
        ScriptManager.RegisterClientScriptBlock(Page, this.GetType(), "CallJSFunction", "myEnablefunction()", true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:59:41.407

如果直接写入响应，所有的 asp.net 结构都被破坏了，所以你不能改变控件的属性，因为你已经干扰了 asp.net 的“自然”呈现。如果在导出过程中出现错误，则页面已损坏。

# javascript - Gmail：从扩展中获取邮件正文

> ID：11018733
> 
> 赞同：1
> 
> 时间：2012-06-13T15:53:16.213
> 
> 标签：javascript, google-chrome-extension, gmail

我正在为 Gmail 编写 Chrome 扩展程序。我想用定制的列表视图替换默认列表视图。

我想获取所有显示消息的所有消息正文。如何从 Chrome 扩展程序中执行此操作？

Gmail 有[未读邮件的 ATOM 提要](https://developers.google.com/google-apps/gmail/gmail_inbox_feed)。它没有所有消息的提要。

Gmail 有一个 gmonkey 对象。[1.0 版本已记录在案](http://code.google.com/p/gmail-greasemonkey/wiki/GmailGreasemonkey10API)。还有未记录的 2.0 版本。他们都不允许我获取消息正文。

iPad 版 Gmail 将所有邮件存储在 WebSQL 存储中。不幸的是，桌面版 Gmail 没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:33:43.733

如果你没有得到任何其他答案，你总是可以通过[Content Scripts](http://code.google.com/chrome/extensions/content_scripts.html)，基本上是通过注入 jQuery、抓取消息正文、重新调整 DOM 结构等来做这件事。

# javascript - 双击只提交一次

> ID：11018735
> 
> 赞同：3
> 
> 时间：2012-06-13T15:53:23.420
> 
> 标签：javascript, jquery, double-click

> **可能重复：**
> [检测到双击事件时需要取消单击/鼠标事件](https://stackoverflow.com/questions/1067464/need-to-cancel-click-mouseup-events-when-double-click-event-detected)
> [防止双击提交按钮](https://stackoverflow.com/questions/5944254/preventing-double-click-of-submit-button)

我有以下功能

```
$("#btnSubmit").click(function(){
                $("#btnSubmit").attr("disabled", "disabled");
          ....make ajax request
              $("#btnSubmit").removeAttr("disabled");

} 
```

问题是我想处理第一次双击双击。或单击。因为当用户双击时，它会运行该函数两次。如果我使用 .one() 它将只处理单击。但我也想处理双击但只处理一次。什么解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:54:29.170

利用

`dblclick()`

代替`click()`

阅读更多关于**[`.dblclick()`](http://api.jquery.com/dblclick/)**

您的代码应如下所示

```
$("#btnSubmit").dblclick(function(){
   $("#btnSubmit").attr("disabled", "disabled");
   $("#btnSubmit").removeAttr("disabled");
}); 
```

您可以使用标志

```
var alreadyClicked = false;
$("#btnSubmit").click(function(){
   if(alreadyClicked) {
      alreadyClicked = false;
      return false;
   } else {
     alreadyClicked = true;
     $("#btnSubmit").attr("disabled", "disabled");
     $("#btnSubmit").removeAttr("disabled");
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:55:41.860

设置一个哨兵变量以防止在 ajax 请求完成之前执行进一步的点击：

```
var clicked = false;
$("#btnSubmit").click(function(){
    if (clicked) {
        return;
    } else {
        clicked = true;
    }
    $.ajax({
      success: function() {
          clicked = false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T15:56:21.577

我的解决方案将在按下按钮时停止双击我检查变量。

发生的情况是 click 变量用作检查函数当前是否正在运行。

```
var click = false;
$("#btnSubmit").click(function(){

  if (click == false) {
    click = true;

    $("#btnSubmit").attr("disabled", "disabled");

    //make ajax request

    $("#btnSubmit").removeAttr("disabled");

    click = false;
  }
} 
```

# python - Python Matplotlib 绘制保存在文件中 Defaultdict 行中的每小时数据

> ID：11018743
> 
> 赞同：1
> 
> 时间：2012-06-13T15:53:37.040
> 
> 标签：python, matplotlib, defaultdict

我有一个包含几千行数据的文件，如下所示：

```
defaultdict(<type 'int'>, {'2012021310': 76422, '2012021311': 94188, '2012021323': 139363, '2012021312': 111817, '2012021307': 71316, '2012021306': 82418, '2012021305': 65217, '2012021313': 127002, '2012021314': 141099, '2012021315': 147830, '2012021316': 136330, '2012021317': 122252, '2012021318': 118619, '2012021319': 115763, '2012021322': 137658, '2012021321': 130022, '2012021320': 121393, '2012021309': 69406, '2012021308': 66833}) 
defaultdict(<type 'int'>, {'2012021408': 139745, '2012021409': 143658, '2012021414': 288286, '2012021418': 31216, '2012021416': 268214, '2012021400': 207878, '2012021401': 269296, '2012021402': 270258, '2012021403': 275882, '2012021404': 232521, '2012021405': 195062, '2012021406': 166669, '2012021407': 142855, '2012021417': 245582, '2012021411': 194360, '2012021413': 262078, '2012021410': 158954, '2012021415': 296457, '2012021412': 237083}) 
defaultdict(<type 'int'>, {'2012021523': 676350, '2012021522': 670147, '2012021521': 650984, '2012021520': 617401, '2012021501': 170448, '2012021503': 246600, '2012021502': 250013, '2012021505': 363866, '2012021504': 300809, '2012021507': 333080, '2012021506': 370454, '2012021509': 343671, '2012021508': 330452, '2012021512': 549736, '2012021513': 622690, '2012021510': 387871, '2012021511': 456171, '2012021516': 647559, '2012021517': 600969, '2012021514': 692257, '2012021515': 706377, '2012021518': 579669, '2012021519': 587969}) 
defaultdict(<type 'int'>, {'2012021608': 333986, '2012021609': 344126, '2012021602': 651692, '2012021603': 676458, '2012021600': 664484, '2012021601': 686408, '2012021620': 932692, '2012021621': 1065501, '2012021604': 589033, '2012021605': 465191, '2012021623': 1316907, '2012021606': 389669, '2012021607': 342613, '2012021619': 828190, '2012021618': 617836, '2012021622': 1111334, '2012021611': 467532, '2012021610': 387220, '2012021613': 634585, '2012021612': 560227, '2012021615': 718498, '2012021614': 704008, '2012021617': 606396, '2012021616': 665030}) 
```

键是日期/小时，例如“2012021310”是“02-13-2012 10am”，这些值只是发生的事件的计数。

我对使用 matplotlib 绘图有很好的理解，但是我不确定如何处理数据。是否有一种简单的方法可以读取这些行中的每一行并在类似于我使用 csv2rec 读取两列的方式中解决它们？或者，还有更好的方法？

编辑：

这将 defaultdict(, 替换为 "data ="

```
import fileinput

filein = 'list.txt'

for line in fileinput.input([filein]):
        line = line.replace("defaultdict(<type 'int'>,", "data =")
        line = line.replace(")", " ")
        print line 
```

这导致：

```
data = {'2012021310': 76422, '2012021311': 94188, '2012021323': 139363, '2012021312': 111817, '2012021307': 71316, '2012021306': 82418, '2012021305': 65217, '2012021313': 127002, '2012021314': 141099, '2012021315': 147830, '2012021316': 136330, '2012021317': 122252, '2012021318': 118619, '2012021319': 115763, '2012021322': 137658, '2012021321': 130022, '2012021320': 121393, '2012021309': 69406, '2012021308': 66833}  

data = {'2012021408': 139745, '2012021409': 143658, '2012021414': 288286, '2012021418': 31216, '2012021416': 268214, '2012021400': 207878, '2012021401': 269296, '2012021402': 270258, '2012021403': 275882, '2012021404': 232521, '2012021405': 195062, '2012021406': 166669, '2012021407': 142855, '2012021417': 245582, '2012021411': 194360, '2012021413': 262078, '2012021410': 158954, '2012021415': 296457, '2012021412': 237083}  

data = {'2012021523': 676350, '2012021522': 670147, '2012021521': 650984, '2012021520': 617401, '2012021501': 170448, '2012021503': 246600, '2012021502': 250013, '2012021505': 363866, '2012021504': 300809, '2012021507': 333080, '2012021506': 370454, '2012021509': 343671, '2012021508': 330452, '2012021512': 549736, '2012021513': 622690, '2012021510': 387871, '2012021511': 456171, '2012021516': 647559, '2012021517': 600969, '2012021514': 692257, '2012021515': 706377, '2012021518': 579669, '2012021519': 587969}  

data = {'2012021608': 333986, '2012021609': 344126, '2012021602': 651692, '2012021603': 676458, '2012021600': 664484, '2012021601': 686408, '2012021620': 932692, '2012021621': 1065501, '2012021604': 589033, '2012021605': 465191, '2012021623': 1316907, '2012021606': 389669, '2012021607': 342613, '2012021619': 828190, '2012021618': 617836, '2012021622': 1111334, '2012021611': 467532, '2012021610': 387220, '2012021613': 634585, '2012021612': 560227, '2012021615': 718498, '2012021614': 704008, '2012021617': 606396, '2012021616': 665030} 
```

我仍然不确定从这里去哪里

编辑：

我已经与每个人的建议混合得更近了：

```
import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt
import matplotlib.dates as mdates
from pylab import *
from matplotlib.mlab import csv2rec

    filein = 'list.txt'
    output_name = "image.png"
    dicts = []
    line = ""

    for line in fileinput.input([filein]):
            line = line.replace("defaultdict(<type 'int'>,", "data = ")
            line = line.replace(")", "")
            line = line.strip()
            exec(line)
            objects = data.items()
            print objects 
```

返回：

```
[('2012021307', 71316), ('2012021306', 82418), ('2012021305', 65217), ('2012021309', 69406), ('2012021310', 76422), ('2012021311', 94188), ('2012021312', 111817), ('2012021313', 127002), ('2012021314', 141099), ('2012021315', 147830), ('2012021316', 136330), ('2012021317', 122252), ('2012021318', 118619), ('2012021319', 115763), ('2012021308', 66833), ('2012021321', 130022), ('2012021320', 121393), ('2012021323', 139363), ('2012021322', 137658)]
[('2012021408', 139745), ('2012021409', 143658), ('2012021403', 275882), ('2012021418', 31216), ('2012021400', 207878), ('2012021416', 268214), ('2012021402', 270258), ('2012021414', 288286), ('2012021404', 232521), ('2012021405', 195062), ('2012021406', 166669), ('2012021407', 142855), ('2012021417', 245582), ('2012021411', 194360), ('2012021401', 269296), ('2012021413', 262078), ('2012021410', 158954), ('2012021415', 296457), ('2012021412', 237083)]
[('2012021523', 676350), ('2012021522', 670147), ('2012021521', 650984), ('2012021520', 617401), ('2012021501', 170448), ('2012021503', 246600), ('2012021502', 250013), ('2012021505', 363866), ('2012021504', 300809), ('2012021507', 333080), ('2012021506', 370454), ('2012021509', 343671), ('2012021508', 330452), ('2012021512', 549736), ('2012021513', 622690), ('2012021510', 387871), ('2012021511', 456171), ('2012021516', 647559), ('2012021517', 600969), ('2012021514', 692257), ('2012021515', 706377), ('2012021518', 579669), ('2012021519', 587969)]
[('2012021605', 465191), ('2012021608', 333986), ('2012021609', 344126), ('2012021602', 651692), ('2012021603', 676458), ('2012021600', 664484), ('2012021601', 686408), ('2012021606', 389669), ('2012021607', 342613), ('2012021622', 1111334), ('2012021623', 1316907), ('2012021620', 932692), ('2012021621', 1065501), ('2012021619', 828190), ('2012021618', 617836), ('2012021604', 589033), ('2012021611', 467532), ('2012021610', 387220), ('2012021613', 634585), ('2012021612', 560227), ('2012021615', 718498), ('2012021614', 704008), ('2012021617', 606396), ('2012021616', 665030)]
[('2012021605', 465191), ('2012021608', 333986), ('2012021609', 344126), ('2012021602', 651692), ('2012021603', 676458), ('2012021600', 664484), ('2012021601', 686408), ('2012021606', 389669), ('2012021607', 342613), ('2012021622', 1111334), ('2012021623', 1316907), ('2012021620', 932692), ('2012021621', 1065501), ('2012021619', 828190), ('2012021618', 617836), ('2012021604', 589033), ('2012021611', 467532), ('2012021610', 387220), ('2012021613', 634585), ('2012021612', 560227), ('2012021615', 718498), ('2012021614', 704008), ('2012021617', 606396), ('2012021616', 665030)] 
```

所以我肯定更接近：

编辑：

而且我还有：

```
import fileinput
import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt
import matplotlib.dates as mdates
from pylab import *
from matplotlib.mlab import csv2rec 

filein = 'list.txt'
output_name = "image.png"
dicts = []
times = []
values = []

line = ""
for line in fileinput.input([filein]):
        line = line.replace("defaultdict(<type 'int'>,", "data = ")
        line = line.replace(")", "")
        line = line.strip()
        exec(line)
        for k in sorted(data.iterkeys()):
                times.append(k)
                values.append(data[k])

fig = plt.figure()

ax = fig.add_subplot(111)
ax.plot(times, values)
hours = mdates.HourLocator()
fmt = mdates.DateFormatter('%Y - %M:%D:%H')
ax.xaxis.set_major_locator(hours)
ax.xaxis.set_major_formatter(fmt)

fig.autofmt_xdate(bottom=0.2, rotation=90, ha='left')

ax.grid()
plt.savefig(output_name) 
```

这让我至少可以生成一个情节。现在的问题是 x 访问无法从输入的数据中正确生成标签。我相信这是由于有点非常规的时间戳。最后有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:34:29.077

尝试：

```
dicts = []
with open(filename,'r') as f:
    for l in f:
        exec("dicts.append(" + l[l.index('{'):l.index('}')+1] + ")") 
```

应该读入所有的`dicts`并将它们存储在列表中`dicts`。然后，您可以构造一个键值对列表：

```
tsvals = []
for d in dicts:
    tsvals.append(d.items()) 
```

如果你想让它们排序，你当然可以在构建完成后对它们进行排序。一旦我拥有这样的键和值对，我可能会保存它们。一个 csv 文件可能就足够了。

不过，该`exec`命令只能用于受信任的数据。这是非常不安全的，但是如果您是生成数据的人，或者如果您相信生成数据的人只会给您提供好的数据，那么我认为这是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:10:17.460

如果可能的话，我会找到一种方法将该输出变成更有用的东西。如果没有，你可以替换它

```
defaultdict(<type 'int'>, 
```

和

```
data = 
```

while 循环遍历行，使用 string.replace()，然后使用 exec() 函数执行该行中的文字代码。

# python - 如何删除python包

> ID：11018744
> 
> 赞同：-1
> 
> 时间：2012-06-13T15:53:38.553
> 
> 标签：python, package

> **可能重复：**
> [如何删除使用 Python 的 easy_install 安装的软件包？](https://stackoverflow.com/questions/1231688/how-do-i-remove-packages-installed-with-pythons-easy-install)

我问的是同样的[问题](https://stackoverflow.com/questions/1231688/how-do-i-remove-packages-installed-with-pythons-easy-install)。那没有帮助。如何删除已安装的 python 模块，如 tidylib、beautifulsoup 等...？

我试过这个：

```
pip uninstall tidylib 
```

我收到此错误：

```
pip: error: No command by the name pip uninstall 
```

我试过`pip install -U pip`了，它升级了pip，但同样的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:58:59.643

您不仅应该使用 pip（您需要安装它），还应该使用 virtualenv（您也需要安装它）来创建可以具有不同包配置的隔离环境。

唯一应该在您的全局环境中使用的工具是那些工具，如果有必要，还有那些拒绝以任何其他方式安装的软件包。

# excel - 在结束前插入 2 行 5 行

> ID：11018745
> 
> 赞同：0
> 
> 时间：2012-06-13T15:53:49.503
> 
> 标签：excel, vba

我试图有一个宏，在命令上，在 A 列中找到最后使用的单元格，然后在最后一个单元格之前的 5 行之前插入 2 行。

我在 stackoverflow 上找到了以下代码，用于查找最后使用的单元格，但无法使用它来添加 2 行。

```
Dim LastRow As Long
' Find the last row in column "C" (pass in whatever column you want, obviously)
LastRow = Range("A" & ActiveSheet.Rows.Count).End(xlUp).Row
rw = LastRow - 5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:03:49.780

只需添加这一行

```
ActiveSheet.Rows(Trim(rw) + ":" + Trim(rw + 1)).Insert 
```

# amazon-ec2 - 使用自定义 ISO 创建新的 EC2 实例

> ID：11018747
> 
> 赞同：25
> 
> 时间：2012-06-13T15:53:52.173
> 
> 标签：amazon-ec2, asterisk, iso, ec2-ami, pbx

我正在使用 Switchvox，一个 Asterisk PBX，我想将它托管在 EC2 上。

Digium Switchvox 提供了一个 ISO，其中包含托管 pbx 服务器所需的一切：操作系统、软件等。它基本上是服务器的映像。

**如何使用他们提供的自定义 ISO 实例化新的 EC2 实例？**

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-24T16:50:51.827

从此 ISO 中，您可以创建[VMware](http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1002)或[VirtualBox](http://www.virtualbox.org/manual/ch01.html#idp12780688)映像。在那里，您可以将此图像转换为[EC2 AMI](https://forums.aws.amazon.com/message.jspa?messageID=192226)图像并从那里开始。

只要确保您使用的是相同的拱门（32 v. 64）和正确的内核。

话虽如此，您可能会进行更多操作，然后只需启动社区提供的现有 vanilla AMI。可能有一个与您的操作系统要求非常匹配。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-02-10T14:38:47.727

概述：

*   [检查](https://docs.aws.amazon.com/vm-import/latest/userguide/vmie_prereqs.html)先决条件
*   将 ISO 安装到 VMware vSphere 上，然后导出为 VMDK
*   将您的 VMDK 上传到同一 AWS 账户上的 S3 存储桶
*   [安装](http://docs.aws.amazon.com/cli/latest/userguide/installing.html)和配置 AWS 命令​​行界面 (CLI)
*   [设置](https://docs.aws.amazon.com/vm-import/latest/userguide/vmie_prereqs.html#vmimport-role)VM 导入服务角色
*   使用 CLI将 VM 从 S3 导入 Amazon 机器实例 (AMI [)](https://docs.aws.amazon.com/vm-import/latest/userguide/vmimport-image-import.html#import-vm-image)

这是一个漫长的过程，因此值得阅读先决条件。请特别注意支持的操作系统/Linux 发行版和版本。

他们明确指出“请注意，您只能将通过 VMware 中的 OVF 导出过程创建的 VMDK 文件导入 Amazon EC2。”

例如，您可以使用 VirtualBox 获取 VMDK，但如果您尝试导入它，则在检查状态时可能会看到以下错误：

```
aws ec2 describe-import-image-tasks --import-task-ids import-ami-someid 
```

*"StatusMessage": "ClientError: 磁盘验证失败 [不支持的 VMDK 文件格式]"*

但是，有一些关于以开放虚拟化格式 (OVF) 导出虚拟机的 Oracle[文档](https://docs.oracle.com/en/virtualization/virtualbox/6.0/user/ovf.html)。

如果一切顺利，您可以照常[启动新导入的 AMI。](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/launching-instance.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-22T07:27:25.413

您可以使用自定义 ISO 创建 VMware 虚拟机，并将其从 VMware 主机移动到 EC2。阅读更多：[VM 导入/导出](http://aws.amazon.com/ec2/vmimport/)

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-01-08T22:36:18.720

只有 Windows Server 2008 变体可以从 VMDK 转换为 AMI。

# wordpress - 如何在 wordpress.com 博客中启用多语言支持

> ID：11018749
> 
> 赞同：-2
> 
> 时间：2012-06-13T15:54:00.370
> 
> 标签：wordpress

我想在我的 wordpress.com 博客中启用多语言支持？是否有任何插件或选项？我只希望用户能够自动翻译我的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:49:52.693

我建议您使用[Transposh WordPress 翻译插件](http://wordpress.org/extend/plugins/transposh-translation-filter-for-wordpress/)。它为您提供了将博客自动翻译成其他语言的可能性，但如果您需要，还可以选择自己翻译博客的某些部分。

我在一个项目中使用它，我很确定它会满足您的需求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T20:26:30.427

我认为 wordpress.com 目前没有这样的选择

# regex - 不要在正则表达式中包含条件本身

> ID：11018761
> 
> 赞同：1
> 
> 时间：2012-06-13T15:54:28.537
> 
> 标签：regex

这是正则表达式：

```
/\.([^\.]*)/g 
```

但是对于字符串`name.ns1.ns2`它会捕获`.ns1`和 . `ns2`值（这确实很有意义）。是否只能得到`ns1`和`ns2`结果？也许使用断言，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:11:27.437

你有捕获组，使用它的值，但是你用你的语言来做。

JavaScript 示例：

```
var list = "name.ns1.ns2".match(/\.([^.]+)/g);
// list now contains 'ns1' and 'ns2' 
```

如果你可以使用lookbehinds（最现代的正则表达式风格，但不是JS），你可以使用这个表达式：

```
(?<=\.)[^.]+ 
```

在 Perl 中你也可以`\K`这样使用：

```
\.\K[^.]+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:33:54.327

我不是 100% 确定你想要做什么，但让我们看看一些选项。

你的正则表达式：`/\.([^\.]*)/g`

（次要注意：您不需要在`.`字符类 `[`..内部前面的反斜杠`]`，因为 a`.`已经在那里失去了它的特殊含义。）

首先：与正则表达式匹配原则上是一个布尔测试：“这个字符串是否匹配这个正则表达式”。您可能能够获得的关于字符串的哪一部分与正则表达式的哪一部分相匹配的任何附加信息等，完全取决于在您使用的任何环境中围绕正则表达式的特定实现。所以，你的问题本质上是依赖于实现的。

但是，在最常见的情况下，匹配尝试确实提供了额外的数据。您几乎总是得到与整个正则表达式匹配的子字符串（在 Perl 5 中，它显示在`$&`变量中）。在 Perl5 兼容的正则表达式中，如果你用不带引号的括号括住正则表达式的一部分，你将额外获得与每组匹配的子字符串（在 Perl 5 中，它们被放置在`$1`,`$2`等中）。

因此，正如所写，您的正则表达式通常会为您提供两个单独的结果：整个匹配的“.ns1”、“.ns2”等，以及子组匹配的“ns1”、“ns2”等. 您不必更改表达式即可获得后者的值；只需更改您访问比赛结果的方式。

但是，如果您愿意，并且您的正则表达式引擎支持它们，您可以使用某些功能来确保整个正则表达式只匹配您想要的部分。一种这样的机制是lookbehind。正向后视只会在匹配后向表达式的内容之后匹配：

```
/(?<\.)([^.]*)/ 
```

这将匹配任何非周期序列，但前提是它们在一个周期之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T16:05:11.073

您可以使用字符串拆分之类的东西，它允许您将字符串分成围绕特定字符串（例如句点）的片段吗？

目前尚不清楚您使用的是哪种语言，但几乎每一种现代语言都提供了一种拆分字符串的方法。例如，这个伪代码：

```
string myString = "bill.the.pony";
string[] brokenString = myString.split("."); 
```

# c# - 格式化 XML 标签

> ID：11018763
> 
> 赞同：0
> 
> 时间：2012-06-13T15:54:31.907
> 
> 标签：c#, asp.net, xml

使用此 XML 文件 -

```
<Instructions>
  <Admin>
  <Instruction>
    Steps must be completed in order.&lt;/br&gt;
    1\. Set dates&lt;/br&gt;
    2\. Import.&lt;/br&gt;
    3\. Generate.&lt;/br&gt;
  </Instruction>
  <Style>
    <padding-left value="50px"/>
    <padding-right value="0px"/>
  </Style>
  </Admin>
</Instructions> 
```

而这段代码 -

```
 public void LoadInstructions(String instructionKey) {
        XmlNode instLabel = mPropsDoc.SelectSingleNode("ApplicationProperties/Instructions/Admin/Instruction");
        XmlNode instStyle = mPropsDoc.SelectSingleNode("ApplicationProperties/Instructions/Admin/Style");
        Label ctlInst = new Label();
        ctlInst.Text = instLabel.InnerText;

        foreach (XmlElement styles in instStyle.ChildNodes) {
            ctlInst.Style.Add(styles.Name, styles.Attributes["value"].Value);
        }

        PageContent.Controls.AddAt(0, ctlInst);
    } 
```

其中 PageContent 是我页面上的 ContentPlaceHolder。

该样式仅应用于第一个元素，并且控件呈现为跨度控件。

为什么它不被呈现为标签，为什么样式只应用于第一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:23:25.280

如果要保留格式，则需要将其放入 CDATA 元素中

```
<Instruction>
<![CDATA[Steps must be completed in order</br>
               1\. Set dates</br>
               2\. Import</br>     
               3\. Generate</br>]]>
</Instruction> 
```

话虽如此，我会标记这个很多，然后在需要时构建演示文稿，它将继续是一个 PIA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:32:36.350

据我记得，System.Web.UI.Label 元素（我假设您正在使用）总是呈现为 <span>。要创建 <label> - 您需要 System.Web.UI.HtmlGenericControl("label")。

# sql - # 从日期获取月份和日期#

> ID：11018765
> 
> 赞同：-1
> 
> 时间：2012-06-13T15:54:34.887
> 
> 标签：sql, tsql, sql-server-2008-r2

我有一个表，其中有一列，`ci_birthday`. 该列声明为`nvarchar(50)`，格式为`mm-dd-yyyy`。表中的数据是这样的：

```
CI_BIRTHDAY
-----------

07/14/1956
NULL
NULL
11/01/1969
08/15/1955
07/08/1965
NULL
NULL
09/20/1936
NULL
NULL
NULL
NULL
0/0/0
NULL
NULL
NULL
NULL
NULL
0/0/0
NULL
NULL
1/29/1940
NULL
0/0/0
NULL
NULL
NULL
NULL
08/11/1949 
```

我希望该列的输出只有月份和日期，例如

```
09/20
0/0 
1/29
08/11
0/0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:41:01.360

只是为了展示如何在检查是否安全之后将这些非常混乱的数据转换为日期：

```
SET DATEFORMAT mdy;

WITH    Dates
          AS ( SELECT   '07/14/1956' AS DateStr
               UNION
               SELECT   '11/01/1969'
               UNION
               SELECT   '08/15/1955'
               UNION
               SELECT   '07/08/1965'
               UNION
               SELECT   '09/20/1936'
               UNION
               SELECT   '0/0/0'
               UNION
               SELECT   NULL
               UNION
               SELECT   '1/29/1940'
             )
    SELECT  CASE WHEN ISDATE(DateStr) = 1 THEN CONVERT(VARCHAR(5), CONVERT(DATE, DateStr, 101), 101)
                 ELSE '00/00'
            END AS [DD/MM]
    FROM    Dates 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:58:14.950

我接受我的解决方案是解决此问题的一种非常糟糕的方法，但如果日期不是以日期格式存储（在本例中为字符串），那么您可以执行以下操作：

```
DECLARE @Date varchar(15) = '11/01/1969'
SELECT SUBSTRING(@Date, 1,LEN(@Date) - PATINDEX('%/%',REVERSE(@Date))) 
```

# php - PHP 检查日期变体

> ID：11018768
> 
> 赞同：3
> 
> 时间：2012-06-13T15:54:38.803
> 
> 标签：php, validation, date

我找到了一个 php 函数[checkdate()](http://php.net/manual/en/function.checkdate.php)，但奇怪的是它似乎只接受`int $month , int $day , int $year`. 但是我将日期作为字符串（示例`"2012-06-13"`）传递，所以我想出了这个解决方法，因为**我只允许以这种格式输入日期**。不幸的是，我觉得这既不安全又不是解决问题的好方法：

```
function CheckAdditional($value)
{
    $data = explode("-", $value);

    return checkdate($data[1], $data[2], $data[0]);
} 
```

问题：有没有更好的方法来检查日期是否有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:56:59.877

你可以试试：

```
function checkDateFormat($date){  
//match the format of the date  
if (preg_match ("/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/", $date, $parts))  {    
    //check weather the date is valid of not        

    if(checkdate($parts[2],$parts[3],$parts[1]))          
       return true;        
    else         
       return false;  
    }  
else    
return false;} 
```

学分：[http ://roshanbh.com.np/2008/05/date-format-validation-php.html](http://roshanbh.com.np/2008/05/date-format-validation-php.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:59:09.043

为了安全起见，您可以这样做

```
date("Y-m-d", strtotime($yourdatestr)); 
```

这样，即使格式可能是错误的，它在大多数情况下都会纠正它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T07:16:20.860

```
<?php

function CheckAdditional($value)
{
    return date('Y-m-d', strtotime($value)) == $value;
}

?> 
```

经过我和试图帮助我回答的人的多次测试后，我想出了这个非常适合我的解决方案，并且在我看来既简单又非常可靠，因为到目前为止没有人能够证明它是错误的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-10T10:57:49.523

```
$jahr = (int) $_POST['jahr'];
$monat =  (int) $_POST['monat'];
$tag = (int) $_POST['tag'];
$datum = "$tag. $monat. $jahr";

if (checkdate($monat, $tag, $jahr) == FALSE) {
    $allesok = false;
    $fehlermeldung .= "<p class='fehler'>Ungültiges Datum $datum!</p>";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T15:58:38.613

如果您将用户输入限制为仅在一种格式下有效（本地化呢？），那么您可以自己解析输入，使用正则表达式函数或将输入拆分为“-”并检查它是否变成三位数的数组……</p>

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-16T14:46:21.460

```
function DDC($dates){ // Date Day Control
    $dy = substr($dates,0,4);
    $dm = substr($dates,5,2);
    $dd = substr($dates,8,2);
    for($i=0; $i<3; $i++){
        if(!checkdate($dm,$dd,$dy)){
            $dd--;
        }else{$i=3;}
    }
    return $dy.'.'.$dm.'.'.$dd;
}
echo DDC('2013.02.31');
//2013.02.28 
```

# sql - 替换数据库中所有 HTML 注释实例

> ID：11018773
> 
> 赞同：1
> 
> 时间：2012-06-13T15:55:01.097
> 
> 标签：sql, database, wordpress

我最近在 WordPress 中导入了好几篇文章（数千篇），发现其中不少文章开头的图片都被注释掉了 `<!--<img src="" />-->`。

不幸的是，无论出于何种原因，WordPress 都会将此评论添加到所有内容中，因此内容存在但未显示。所以我想解决这个问题的简单方法是运行查找和替换 SQL 语句，查找所有实例并替换为空。

我一直无法弄清楚如何让它工作。我不是 SQL 专家，所以我想我可以在 find 语句中使用通配符，但显然不能，或者至少我无法弄清楚。

所以我想做的是找到所有出现的注释掉的图像并将它们替换为空，基本上只是删除它们。图像并不完全相同。有的只有 src，有的也有 height 和 width，有的有 alt 属性等等。而且它们的顺序也不一样。所以我希望类似的东西`UPDATE wp_posts set post_content = replace(post_content, '<!--<img %>-->', '')`会起作用，但事实并非如此。

因此，如果有人对如何做到这一点有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:28:28.443

你有没有看过[这个问题](https://stackoverflow.com/questions/986826/how-to-do-a-regular-expression-replace-in-mysql)。我认为您的问题是使用没有 a 的 '%'`LIKE`不起作用。该问题建议使用用户定义的函数

# ssl - 是否可以线程池 IMAP 连接？

> ID：11018776
> 
> 赞同：0
> 
> 时间：2012-06-13T15:55:18.117
> 
> 标签：ssl, imap, threadpool

据我了解，IMAP 要求每个用户都有一个连接。我正在编写一个 IMAP 客户端（目前只是 gmail），它一次支持许多（100s，1000s 可能 10000s+）用户。显然，减少打开连接的数量会很棒。我想知道是否可以在我这边使用线程池通过 IMAP 连接到 gmail，或者 IMAP 协议是否不支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:34:34.697

IMAP 通常使用基于 TCP/IP 的 SSL。每个 IMAP 客户端连接都需要维护一个 TCP/IP 连接，这意味着将有许多同时打开的连接。

这些多个同时连接可以很容易地在非线程（单线程）实现中维护，而不会影响 TCP 连接的状态。每个 IMAP TCP/IP 连接都必须有某种流概念，并使用 TCP/IP 五元组（或 socketFd）将所有流存储在容器中（例如 c++ STL 映射）作为钥匙。对于收到的每个数据包，查找流并相应地处理数据包。这种方法不会影响 TCP 或 IMAP 连接。

考虑到这将在单线程环境中工作，添加线程池只会增加应用程序的吞吐量，因为您可以同时处理多个流的数据包（假设它是多核 CPU）您只需要使确保 2 个线程不会同时处理同一流的数据包，这可能会导致数据包被无序处理。一种方法可能是每个线程有一组流，可能使用 IP 池或类似的东西。

# android - 如何通过 Web API 管理 Android 与外部设备的通信？

> ID：11018784
> 
> 赞同：1
> 
> 时间：2012-06-13T15:55:41.393
> 
> 标签：android, multithreading, networking, xml-parsing, android-asynctask

我正在构建一个程序，该程序与运行自己的内部 Web 服务器的设备交互。我通过 Web API 与设备通信。

基本上会发生一个 GUI 呈现给用户，用户可以在其中对设备进行某些修改。这些更改将传达给设备，并通过 XML 返回结果。设备需要或多或少地不断地与后台程序对话（比如每 15 秒左右）以向用户更新某些值。

我设想的结构是这样的：

UI - 主要 - 网络 - XML 解析器。

我正在寻找有关如何管理这些的建议。我理解 UI 线程应该是独立的，以便为用户提供流畅的体验。我也明白网络至少应该是一个异步任务。我不太确定如何处理他们的互动，并确保事情顺利有效地进行。

我的想法是 Main 将处理传递数据，告诉网络器发送特定的消息或更改，将返回的 XML 传递给解析器，然后将解析的值传递给 UI 进行处理。

我很好奇除此之外的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:01:40.643

看看创建一个[使用](http://developer.android.com/guide/topics/fundamentals/services.html)您的`Activity`. 在不知道您的计划细节的情况下，a`Service`看起来像是执行所有繁重工作的最佳解决方案。

更新：

您可以在服务中运行对 Web API 的调用，并在需要时通过接口更新 UI。您必须指示服务在自己的线程上运行，因此线程安全是一个问题，但从长远来看，比使用`AsyncTask`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:07:51.420

Have a thought about using Google C2DM.

In your case,

Pros -> Less battery use, coordinated network traffic, Don't have to run a continues service and doesn't have the potential of being killed when the device runs out of resources.

Cons -> You have to post the results manually back to your internal server, and server should know which request the device is replying to. Communication is disconnected and may not be real-time. Requires a google account on the device and Google market.

# c# - 如何将 .net 图表宽度更改为 %100

> ID：11018786
> 
> 赞同：3
> 
> 时间：2012-06-13T15:55:45.127
> 
> 标签：c#, asp.net, charts, width, resolution

如何将 asp:chart 的宽度设置为页面宽度的 100%？图表宽度属性不喜欢百分比。

另一种解决方案是检查当前分辨率，如何从.net 中获取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:17:29.563

您可以尝试使用[Request.Browser.ScreenPixelsWidth](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpcapabilitiesbase.screenpixelswidth.aspx)属性。

# ruby-on-rails - 在运行时使用 Rails 3 Sprocket

> ID：11018791
> 
> 赞同：1
> 
> 时间：2012-06-13T15:55:56.260
> 
> 标签：ruby-on-rails, runtime, sprockets

我有一个 Rails 3 应用程序需要显示来自另一个应用程序的图像。这些图像会随着时间而变化，所以我有一个每小时运行一次的任务来检查变化。出于性能原因，我想用我自己的应用程序提供的那些图像（所以 1 个图像和 1 个 css 文件）创建一个精灵。

理想情况下，我希望 Sprockets 以与处理我的应用程序中的任何其他图像和样式表相同的方式处理这些文件，因此我不必推出自己的缩小、gzip、缓存等解决方案。

有没有办法在运行时挂接 Sprockets，这样我就不必停止服务器、预编译并再次启动服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:27:13.420

我无法找到任何方法来连接链轮。

对于那些好奇的人，我通过以下方式解决了这个问题（但省略了缩小/gzip 部分，因为微小的性能提升并不能证明复杂性是合理的）：

1.  像往常一样创建精灵文件。
2.  确定图像的 md5 哈希值。
3.  使用 md5 哈希值作为文件名的一部分将新文件复制到公用文件夹。
4.  将新文件发送到集群中的所有服务器。
5.  更新所有服务器上的配置变量以了解要服务的文件（例如 MyApp::Application.config.tool_icon_md5_key）。
6.  从集群中的所有服务器中删除旧文件。

聚类实际上是最困难的部分。关键是避免一台服务器请求新文件但处理该请求的服务器实际上还没有该文件的情况。

# javascript - Dynamics CRM 2011 中的链接选项集

> ID：11018792
> 
> 赞同：0
> 
> 时间：2012-06-13T15:56:04.987
> 
> 标签：javascript, dynamics-crm, dynamics-crm-2011

我正在尝试在某些合同表单中创建链接的选项集，以允许在第一个选项集中针对每个主要类型的主要类型和多个子类型。如果没有一些编码，这似乎没有功能。

摘要 例如：

主类型表：{A, B, C, ...}

子类型表：{A1, A2, A3, ...} , {B1, B2, B3, ...}

我想创建一个选项集，一旦选择了主要类型，它就会动态更改，但不知道从哪里开始编写代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:10:06.000

您将需要编写一些代码，是的。我为第 4 版写了[这篇博客文章](http://thecrmgrid.wordpress.com/2007/11/13/a-slightly-different-approach-to-dynamic-picklists/)，但它可能会给你一些关于 2011 版的建议。

从根本上说，您将编写一个 JScript Web 资源，其中： - 如果记录在该字段中没有值，则包含一个处理程序（函数）隐藏或删除“子类型”选项列表中的值。这应该针对表单的`onLoad`事件处理程序进行注册 - 包含一个处理程序（函数），可以针对`onChange`您的“主要类型”选项列表的事件处理程序进行注册，该选项将查看新选择的值并根据需要过滤/填充您的“子类型”选项列表

如果您不熟悉为 CRM 2011 编写客户端 JScript 代码，那么您应该查看[SDK 的相应部分](http://msdn.microsoft.com/en-us/library/gg328255.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:42:58.217

将 OnChange 事件添加到 MainType 下拉列表，然后执行 Odata Rest 调用以填充子类型中的值。

你需要帮助哪一部分？

# c# - 实体框架代码优先：如何将平面表映射到具有嵌套对象的类

> ID：11018794
> 
> 赞同：12
> 
> 时间：2012-06-13T15:56:13.317
> 
> 标签：c#, entity-framework, .net-4.0, entity-framework-4.3

我有来自单个表的数据必须在 2 个对象中的场景。

```
[Table]
-Field1
-Field2
-Field3
-Field4 
```

这个类看起来像这样：

```
[Class1]
-Field1
-Field2
-Class2 object here

[Class2]
-Field3
-Field4 
```

我在 Class1 中设置了属性 [NotMapped] 而不是 Class2 的属性，其中包含字段 3 和 4。我还在数据库上下文中添加了配置：

```
public class ConfigurationClass1 : EntityTypeConfiguration<Class1> {
    public ConfigurationClass1 () {
        Property(o => o.Class2.Field3).HasColumnName("Field3");
        Property(o => o.Class2.Field4).HasColumnName("Field4");
    }
} 
```

问题是，当我尝试将实体框架与 Class1 一起使用时，我得到了：

> 属性“Class2”不是“Class2”类型的声明属性。使用 Ignore 方法或 NotMappedAttribute 数据注释验证该属性是否已从模型中显式排除。确保它是有效的原始属性。

如何将 Entity Framework Code First 与具有嵌套对象的实体一起使用，其中包含平面表中的所有信息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T16:02:56.103

[只有在 EF CF 可以将 Class2 识别为Complex 类型](http://weblogs.asp.net/manavi/archive/2011/03/28/associations-in-ef-4-1-code-first-part-2-complex-types.aspx)的情况下，您才能这样做。

简要地：

1.  Class2 不应包含对其他 EF 实体的任何引用。仅适用于其他复杂类型或标准类型
2.  Class2 不能是通用的。在这种情况下，作为一种解决方法，您可以创建一个非泛型嵌套类并在 Class1 中使用它。

# erlang - 分布式Erlang：了解远程主机和启动功能

> ID：11018795
> 
> 赞同：0
> 
> 时间：2012-06-13T15:56:19.753
> 
> 标签：erlang, distributed-computing

我正在尝试实现一个非常简单的示例来初步了解**Distributed Erlang**。所以，我在同一台机器上启动两个节点：

```
erl -sname dilbert
erl -sname dogbert 
```

任务是使用简单的 on node`dogbert`进行`dilbert`输出。我认为使用'shell 会很容易：`Hello, World!``fun () -> io:format("Hello, World!") end``dilbert``dogbert`

```
(dogbert@centraldogma.fubar)1> spawn(dilbert, fun () -> io:format("HELLO!") end).
<0.39.0>

=ERROR REPORT==== 13-Jun-2012::17:49:04 ===
** Can not start erlang:apply,[#Fun<erl_eval.20.82930912>,[]] on dilbert ** 
```

在同一个 shell 中，使用`nodes().`输出`[]`。好吧，`dogbert`显然不知道`dilbert`，但为什么会这样呢？或者，我如何让分布式 erlang 中的节点相互了解？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:30:37.320

有两个问题：

1.  您必须为两个节点设置一个通用 cookie，以便它们可以交互。

    erl -sname dilbert -setcookie pointyhairedboss
    erl -sname dogbert -setcookie pointyhairedboss

2.  您必须指定要连接的节点的主机名。spawn('dogbert@yourhostname', fun () -> io:format("HELLO!") end)。

# python - 使用 Selenium 在 Firefox 上单击 Javascript 链接

> ID：11018796
> 
> 赞同：1
> 
> 时间：2012-06-13T15:56:19.893
> 
> 标签：python, firefox, selenium

我试图从汽车博客[Jalopnik](http://jalopnik.com/5912009/prius-driver-beat-up-after-taking-out-two-bikers)上获得一些评论。它最初没有随网页一起提供，而是使用一些 Javascript 检索评论。您只会获得精选评论。我需要所有评论，所以我会点击“全部”（在“精选”和“开始新讨论”之间）并获取它们。

为了自动化这个，我尝试学习 Selenium。我从 Pypi 修改[了他们的脚本](http://pypi.python.org/pypi/selenium)，猜测点击链接的代码是`link.click()`和`link = broswer.find_element_byxpath(...)`. 看起来并没有按下“全部”按钮（显示所有评论）。

最终我想下载那个版本的 HTML 来解析。

```
from selenium import webdriver
from selenium.common.exceptions import NoSuchElementException
import time

browser = webdriver.Firefox() # Get local session of firefox
browser.get("http://jalopnik.com/5912009/prius-driver-beat-up-after-taking-out-two-bikers/") # Load page
time.sleep(0.2)

link = browser.find_element_by_xpath("//a[@class='tc cn_showall']")
link.click()
browser.save_screenshot('screenie.png')
browser.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:43:56.290

使用带有 Firebug 插件的 Firefox，我浏览到`http://jalopnik.com/5912009/prius-driver-beat-up-after-taking-out-two-bikers`.

然后我打开 Firebug 控制台并单击 ALL；它主动显示了一个 AJAX 调用`http://jalopnik.com/index.php?op=threadlist&post_id=5912009&mode=all&page=0&repliesmode=hide&nouser=true&selected_thread=null`

在新窗口中打开该网址可以让我获得您正在寻找的评论提要。

更一般地，如果您将适当的文章 ID 替换为该 url，您应该能够在没有 Selenium 的情况下自动化该过程。

# php - 网站因 Doctrine2 而变慢

> ID：11018799
> 
> 赞同：0
> 
> 时间：2012-06-13T15:56:31.880
> 
> 标签：php, mysql, doctrine, doctrine-orm

我想问你，亲爱的 stackoverflow.com 用户，关于 Doctrine 优化的问题。我有一个包含以下代码的文件：

```
define('PATH_LIB', '../framework/lib/');

$models = array('UserPermission.php');

require_once 'UserPermission.php';
require_once PATH_LIB."Doctrine/bootstrap.php";
$db = $entityManager;
$results = $db->find('UserPermission', 282); 
```

并且可以通过这个超链接获得：http: [//test.gieromaniak.pl/doctrine.php](http://test.gieromaniak.pl/doctrine.php)

它只涉及一个模型（UserPermission.php）：

```
<?php
/** @Entity @Table(name="users_permissions") */
class UserPermission {
    /** @Id @GeneratedValue @Column(type="integer") */
    protected $id;
} 
```

问题是，使用 Doctrine 加载此文件时要慢得多。当文件为空时，下载时间约为 200ms。但是当我有上述内容时，它大约是 350 毫秒。

我如何检查，错在 Doctrine 一方？是道义的错吗？如果不是这样，什么可能会减慢此文件的执行速度？

其他例子： [http](http://test.gieromaniak.pl/dssdssdd) ://test.gieromaniak.pl/dssdssdd 使用 Doctrine 连接和一次查询 db 下载速度约为 500ms 只有 Doctrine 连接下载速度约为 350ms 没有 Doctrine 连接下载速度约为 200ms

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T02:38:30.383

查看 Redis（高级键值存储），这将解决原则 2 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:22:02.863

您是否尝试过分析该网站？我将从运行 xdebug 之类的东西开始，并使用 wincachegrind 之类的东西来解析结果。这将让您知道哪些功能正在减慢网站速度，并让您知道最应该关注优化的地方。

# php - 从 MySQL 数据库中提取三个即将发生的事件

> ID：11018801
> 
> 赞同：0
> 
> 时间：2012-06-13T15:56:46.820
> 
> 标签：php, mysql

我有一个用于填充 PHP 日历的事件数据库。我还想要一个页面，在页面加载时按日期顺序列出三个即将发生的事件。这些记录有一个单独的字段，用于表示日、月和年。我遇到的问题是获取在当前日期之后产生的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:08:49.837

您将不得不从您的三个字段中构建一个日期以针对当前日期进行测试，或者将当前日期拆分为年、月、日并针对表中的数据测试所有三个。

不得不说，像这样分开约会并不是一个明智的决定。

在我们可以正确地帮助查询明智之前需要表结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:05:59.360

表结构会很好，但我会猜测您需要的查询。以此为起点。

```
SELECT * FROM events WHERE CONCAT(year,'-',month,'-',date) > DATE_FORMAT(NOW(),'%Y-%m-%d')
ORDER BY year DESC, month DESC, date DESC LIMIT 3; 
```

# css - 该功能仅适用于 Chrome，不适用于 Firefox。如何在 Firefox 中替换？

> ID：11018807
> 
> 赞同：0
> 
> 时间：2012-06-13T15:57:08.300
> 
> 标签：css, wordpress, google-chrome, webkit, hover

我在我的网站上添加了一个悬浮板，它可以翻转以显示更多文本。它仅适用于 Chrome。在 Firefox 中，它使整个框在悬停时变为灰色。我如何让它在 Chrome 中工作而在 Firefox 中什么也不做？

我拿它的地方是：

[http://cssdeck.com/item/122/hoverboard-3d](http://cssdeck.com/item/122/hoverboard-3d)

我的网站是：

（已移除）- 将鼠标悬停在“按可用性排序产品”以查看我所指的内容。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:01:14.820

复制并粘贴所有这些属性`-moz-`

```
-webkit-font-smoothing: antialiased;
-webkit-transform-origin: top;
-webkit-transition: all .2s ease-in-out;
-webkit-border-bottom-left-radius: 5px;
-webkit-border-bottom-right-radius: 5px; 
```

`-webkit-`适用于 chrome/safari 和`-moz-`Firefox

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:07:55.947

使用 Firefox 特定的前缀并用常规类覆盖 :hover 类。像这样：

```
@-moz-document url-prefix() {
#hover-flip:hover p  {
     background: #fff;
     color: #009EE0;
     margin: -40px 0 0 0;
     position: relative; 
}
#hover-flip:hover {
     border-top: 1px solid #DDD;
     bottom: 0;
     color: #df3e7b;
     font-size: 14px;
     line-height: 40px;
     position: absolute;
     width: 100%; 
} 
```

}

请记住将其放在 CSS 的底部，以便通过级联覆盖之前的规则。[这里](http://jsfiddle.net/Rorok_89/hV8G9/1/)的工作示例。

# javascript - 在javascript中for循环的每次迭代中声明一个新的唯一变量的好方法是什么？

> ID：11018808
> 
> 赞同：1
> 
> 时间：2012-06-13T15:57:12.907
> 
> 标签：javascript, google-maps

我有以下for循环：

```
for (loc in locations){
    var newLoc = locations[loc].split(", ")
    var uniquevar = new google.maps.Marker({
    position: new google.maps.LatLng(newLoc[0], newLoc[1]),
        map: map,
        title: loc
    });
    google.maps.event.addListener(loc, 'click', function() {
        console.log(loc);
    });
}; 
```

当您单击它们时，我不认为会生成一堆地图标记和控制台。记录它们的名称（位置）。但他们都以控制台结束。记录位置日志中的最后一项。

我认为这是因为它们都被命名为相同的东西

为什么会这样，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:03:04.070

如上所述，您需要关闭：

```
for (loc in locations){
  (function(loc){  
    var newLoc = locations[loc].split(", ")
    var uniquevar = new google.maps.Marker({
      position: new google.maps.LatLng(newLoc[0], newLoc[1]),
      map: map,
     title: loc
    });

    google.maps.event.addListener(loc, 'click', function() {
      console.log(loc);
    });
  })(loc);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:00:10.657

您需要创建一个[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)。通过创建闭包，您可以在执行时有效地“烘焙”内部函数的状态，这与触发“click”处理程序的时间不同。

**编辑**：删除了糟糕的代码 - 使用上面 Nayjest 更清洁的解决方案！

# google-ads-api - 用户通过 Google Adwords OAuth 进行身份验证时如何接收用户信息

> ID：11018809
> 
> 赞同：0
> 
> 时间：2012-06-13T15:57:19.567
> 
> 标签：google-ads-api

我正在使用 google adwords API（ASP.NET 客户端库 v14.5.0）构建一个 Web 应用程序。我正在使用内置的 OAuth 库对用户进行身份验证。一切正常，但现在我想从登录的用户那里获取用户信息，例如电子邮件地址和姓名。

有人知道这是如何工作的吗？

谢谢！

帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:59:09.200

AdWords API 不提供此信息，您可以尝试获取用户个人资料信息。有关详细信息，请参阅[https://developers.google.com/accounts/docs/OAuth2Login#userinfocall](https://developers.google.com/accounts/docs/OAuth2Login#userinfocall)。

# c++ - 模板化转换函数到函数指针

> ID：11018810
> 
> 赞同：8
> 
> 时间：2012-06-13T15:57:20.737
> 
> 标签：c++, templates, c++11, type-conversion, functor

是的，另一个由 C++ 术语的随机序列组成的问题标题！

通常我们通过实现来创建一个类 Callable `operator()`。但是您也可以通过实现用户定义的到函数指针或引用类型的转换来做到这一点。转换函数可以返回一个指向函数的指针，而不是使用完美转发，然后使用原始参数列表调用该函数。

```
struct call_printf {
    typedef int printf_t( char const *, ... );
    operator printf_t & () { return std::printf; }
}; 
```

[http://ideone.com/kqrJz](http://ideone.com/kqrJz)

据我所知，`typedef`以上是语法必要性。转换函数的名称由*type-specifier-seq*组成，它不允许像`int (*)()`. 那将需要一个*abstract-declarator*。大概原因是这样的类型名称变得复杂，并且用作对象名称的复杂结构很难解析。

转换函数也可以被模板化，但必须推导出模板参数，因为没有明确指定它们的地方。（这会破坏隐式转换的全部意义。）

* * *

**问题 #1：**在 C++03 中，没有办法指定函数转换运算符模板吗？似乎没有办法以可接受的函数指针类型解析模板参数（即，在推断的上下文中命名它们）。

这是来自 C++11 的等效参考，§13.3.1.1.2/2 [over.call.object]。它与 C++03 基本相同：

> 另外，对于每一个在 T 中声明的非显式转换函数的形式
> 
> ```
> operator conversion-type-id () cv-qualifier attribute-specifier-seqopt; 
> ```
> 
> 其中*cv-qualifier*与 cv 具有相同的 cv-qualification 或比 cv 更大的 cv-qualification，*其中*conversion **- *type-id*表示类型“指向 (P1,...,Pn) 返回 R 的函数的指针”，**或类型“对 (P1,...,Pn) 返回 R 的函数的指针的引用”，或类型“对 (P1,...,Pn) 返回 R 的函数的引用”，代理调用函数唯一名称调用函数并具有形式
> 
> ```
> R call-function ( conversion-type-id F, P1 a1, ... ,Pn an) { return F (a1,... ,an); } 
> ```
> 
> 也被认为是候选函数。类似地，代理调用函数被添加到 T 的基类中声明的每个非显式转换函数的候选函数集，前提是该函数没有被另一个中间声明隐藏在 T 中。

* * *

**问题 #2：**在 C++11 中，可以使用默认模板参数指定这样的转换吗？这对 SFINAE 很有用。这里与上面示例的唯一区别是*conversion-type-id*仅表示实例化后的函数引用，因为它是依赖类型（尽管具有不变性）。这会使 GCC 跳闸并跳过成员模板。

```
enum { call_alternate = true; }

struct call_switch {
    template< bool en = call_alternate >
    operator typename std::enable_if< en, decltype( fn_1 ) & >::type ()
        { return fn_1; }

    template< bool en = ! call_alternate >
    operator typename std::enable_if< en, decltype( fn_2 ) & >::type ()
        { return fn_2; }
}; 
```

我们也有别名模板。`process`给定第 14.5.7/2 节中的示例，其中冲突声明似乎在实例化之前发生了别名替换。在 GCC 4.7 中，此代码至少实例化了声明，但随后会产生一个奇怪的“候选人需要 2 个参数，提供 2 个”错误。

```
template< typename t >
using fn_t = void (&)( t );

struct talk {
    template< typename t >
    operator fn_t< t >() { return fn; }
};

int main() {
    talk()( 3 );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T20:56:59.110

> 问题 #1：在 C++03 中，没有办法指定函数转换运算符模板吗？似乎没有办法以可接受的函数指针类型解析模板参数（即，在推断的上下文中命名它们）。

对，那是正确的。

> 问题 #2：在 C++11 中，可以使用默认模板参数指定这样的转换吗？

可以，也可以使用别名模板，但不能使用这样的转换函数模板来创建代理调用函数。否则，您可以使用它在隐式转换中将您的类对象转换为函数指针。

> 我们也有别名模板。给定第 14.5.7/2 节中的示例，其中进程的声明冲突，似乎别名替换发生在实例化之前。在 GCC 4.7 中，此代码至少实例化了声明，但随后会产生一个奇怪的“候选人需要 2 个参数，提供 2 个”错误。

是的，这是[https://groups.google.com/forum/?fromgroups#!topic/comp.std.c++/lXLFBcF_m3c](https://groups.google.com/forum/?fromgroups#!topic/comp.std.c++/lXLFBcF_m3c)（并导致 DR395 关闭），但即使这样的转换函数模板可以在以下情况下工作`void(&p)() = yourClassObject`，它不适用于代理调用函数，因为转换函数需要提供一个固定的非依赖类型，在调用代理函数时将类对象转换为该类型，但转换函数模板不提供这种类型通常（奇怪的事情，比如`template<typename = int> operator Identity<void(*)()>();`放在一边……）。

我认为 GCC 可能会错误地生成`call-function(void (&)( t ), t)`仍然存在依赖类型的候选者并尝试调用该候选者，从而违反了它的一些不变量（这可以解释奇怪的错误消息 - 可能在`} else { ... }`某个地方意外命中）。

# php - 如何使用 codeigniter 跟踪 iTunes 播客数据

> ID：11018811
> 
> 赞同：0
> 
> 时间：2012-06-13T15:57:24.420
> 
> 标签：php, codeigniter, rss, itunes, podcast

我正在尝试跟踪播客数据。他们告诉我我必须使用 .mp3 扩展名，否则将无法加载。所以我不能只喜欢track.php，它必须是track.mp3，它重定向到一个php文件。我想知道我是否可以简单地使用 Codeigniters url：

[http://domain.org/index.php/feed/listen/music.mp3](http://domain.org/index.php/feed/listen/music.mp3)

然后在提要类中，我将拥有监听功能，它将music.mp3 作为参数发送。那行得通吗？还是会因为 index.php 而中断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:01:37.333

许多基于网络的跟踪器（如 RawVoice/BluBrry）通过重定向工作。例如[http://trackerurl.com/accountnumber/?r=http://media.podcasturl.com/myshow.mp3](http://trackerurl.com/accountnumber/?r=http://media.podcasturl.com/myshow.mp3)

# c# - 在 .NET 4.5 中使用 HttpClient 进行编码

> ID：11018813
> 
> 赞同：9
> 
> 时间：2012-06-13T15:57:31.907
> 
> 标签：fogbugz, c#, .net, unicode, encoding, dotnet-httpclient

我正在使用[fogbugz](/questions/tagged/fogbugz "显示标记为“fogbugz”的问题") XML API 消耗一些数据。此 API 始终以 UTF-8 格式提供数据。

使用`WebClient`该类发出请求时，我可以设置编码。例如：

```
var result = new WebClient(); 
result.Encoding = Encoding.UTF8; 
```

但是`HttpClient`课堂呢？

```
HttpClient client = new HttpClient(); 
```

我应该使用：

```
client.GetByteArrayAsync(url); 
```

...然后将字节从编码（UTF-8）转换为字符串？

或者有没有办法直接将内容作为 UTF-8 字符串获取？

```
using (var client = Connector.GetHttpClient())
{
    var byteData = await client.GetByteArrayAsync(url);
    data = Encoding.UTF8.GetString(byteData);
} 
```

最后，这是 XML 响应的摘录：

```
<?xml version="1.0" encoding="UTF-8"?>
<response> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T16:01:14.983

您应该可以使用[`GetStringAsync`](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.getstringasync%28v=vs.110%29)- 我希望编码由 HTTP 响应中的标头确定。如果服务器没有指定编码，那么您应该可能要求修复它。

或者，如果您要获取 XML 数据，只需将其作为字节数组获取并直接解析该二进制文件 - XML 声明应该指定非 UTF-8/UTF-16 数据的编码，所以我认为实际上这种方式出错的空间更小。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T16:06:42.463

如果我理解正确，您不需要字符串，您需要 XML。

所以，假设你的数据不是太大，读取一个字节数组

```
byte[] bytes = await client.GetByteArrayAsync(url); 
```

然后从该数组创建一个内存流，然后从该流中读取 XML，例如：

```
XElement element = XElement.Load(new MemoryStream(bytes), LoadOptions.None); 
```

如果您使用的是另一个 XML API，则可以使用

```
XmlReader reader = XmlReader.Create(new MemoryStream(bytes)); 
```

# objective-c - 连接：didReceiveResponse：来自 NSURLConnectionDelegate 从未触发

> ID：11018818
> 
> 赞同：0
> 
> 时间：2012-06-13T15:57:42.780
> 
> 标签：objective-c, multithreading, nsoperation, nsoperationqueue, uiprogressview

我试图让 UIProgressView、NSURLConnection、NSOperation 和 NSOperationQueue 一起工作。这是代码： http: [//pastie.org/4080576](http://pastie.org/4080576)

**问题：** `connection:DidReceiveData:`从未调用：执行立即到`-start()`，通过`-main()`，然后到`-connection:DidReceiveResponse:`，回到`-main()`（有时），最后到`-connectionDidFinishDownloading:destinationURL:`。

当我试图从这个链接下载图片时：http: [//upload.wikimedia.org/wikipedia/commons/4/41/Kharkov_picture_1787.jpg](http://upload.wikimedia.org/wikipedia/commons/4/41/Kharkov_picture_1787.jpg)
我得到这个输出：

> 2012-06-13 19:43:06.189 下载FilesInOpQueue[5070:f803] 收到响应：2012-06-13 19:43:06.190 下载FilesInOpQueue[5070:f803] 文件大小为：3075638 建议文件名为：Kharkov_picture_1787.jpg 2012-图片_1787.jpg 2012- 13 19:43:12.476 下载FilesInOpQueue[5070:f803] 下载完成。收到 0 个字节

另外，我不知道`connection:didReceiveResponse:`属于哪里：NSURLConnectionDelegate 或 NSURLConnectionDataDelegate。

PS如果有一些风格问题，我很高兴听到它们。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:16:25.597

我强烈怀疑您的“忙碌” while 循环正在消耗底层运行循环的执行，并阻止 NSURLConnection 在数据到达时对其进行处理。

查看您的 paste.org 代码，这是您的主要罪魁祸首：

```
while (![self isFinished]) {
    ...
    while ([self fileSize] == 0) {}
    while ([self receivedDataLength] == 0) {}
    ...
} 
```

像这样的繁忙循环几乎不应该在 iOS 中使用。iOS 编程很大程度上是事件驱动的，尤其是 NSURLConnection。相反，更新您`UIProgressView`的响应`connection:DidReceiveData:`等。

老实说，编写自己的 NSURLConnection 处理程序有点麻烦。我强烈建议您考虑使用可以处理一些困难的开源库。这里有两个不错的检查：

1.  [https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)
2.  [https://github.com/pokeb/asi-http-request](https://github.com/pokeb/asi-http-request)

# excel - 如何使用范围在excel中添加多个工作表中的数字

> ID：11018820
> 
> 赞同：0
> 
> 时间：2012-06-13T15:57:48.663
> 
> 标签：excel, excel-formula

我有多个工作表都使用相同的模板我有一个摘要页面并且有一个适用于单个工作表的公式

=SUMPRODUCT(--(sheet1!F4:sheet1!F500>=A1),--(sheet1!F4:sheet1!F500

该公式检查工作表 1 上的相关范围，并返回 A1 和 A2 中指定的日期范围内的框中的值

问题是我想对多张纸执行此操作并使用 3D 参考。

我努力了

=SUMPRODUCT(--(sheet1:sheet3!F4:sheet1:sheet3!F500>=A1),--(sheet1:sheet3!F4:sheet1:sheet3!F500

为了安全起见，还加上了一些额外的括号

=SUMPRODUCT(--((sheet1:sheet3!F4):(sheet1:sheet3!F500>=A1)),--((sheet1:sheet3!F4):(sheet1:sheet3!F500)

这些都不起作用，我得到了#NAME？错误

任何想法，将不胜感激

提前
谢谢加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:42:18.303

您的公式看起来像是被截断了，您只是想计算 A1 和 A2 之间的日期吗？您不能在 SUMPRODUCT 中使用 3D 参考。在 Excel 2007 中，您可以使用此公式

`=SUMPRODUCT(COUNTIFS(INDIRECT("'"&G1:G3&"'!F4:F500"),">="&A1,INDIRECT("'"&G1:G3&"'!F4:F500"),"<="&A2))`

您在 G1:G3 中列出了所有工作表名称

# java - 如何执行类似于 JButton 执行的动作的编程动作？

> ID：11018822
> 
> 赞同：0
> 
> 时间：2012-06-13T15:57:55.570
> 
> 标签：java, swing, jbutton, abstraction

我有一个扩展 AbstractAction 的 actionSave 类。我用它来保存按钮。我想在其他地方运行与按钮相同的瞬间。我得出结论如下使用它，但我不知道该传递什么作为论点？

```
model.getActionSave().actionPerformed("what should i add here for action event"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:11:20.620

将该方法的代码提取`actionPerformed()`到另一个不带参数的方法中，并改为调用此方法：

```
public void actionPerformed(ActionEvent e) {
    save();
}

public void save() {
    ...
}

...

model.getActionSave().save(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:21:18.300

只需创建自己的`ActionEvent`，它有一个公共构造函数。例如

```
model.getActionSave().actionPerformed( 
 new ActionEvent( this, ActionEvent.ACTION_PERFORMED, "Save" )
); 
```

如果您正在测试您的 UI，您还可以选择通过 API 执行单击按钮：

```
button.doClick(); 
```

但总的来说我更喜欢第一种方法，并避免与 UI 耦合

# ios - iOS 4.x 中钥匙串项的修改日期

> ID：11018823
> 
> 赞同：0
> 
> 时间：2012-06-13T15:57:57.443
> 
> 标签：ios, keychain

在我的应用程序中，我将一组凭据存储在钥匙串中以供离线访问。当有人在设备离线时登录时，我检索钥匙串项，检查 kSecAttrModificationDate，并将其与应用程序已经拥有的值进行比较，以确定凭据是否已过期。

在 iOS 5.x 中这一切都很好。但在 iOS 4.x 中，钥匙串项目数据字典中不存在 kSecAttrModificationDate。我检查了文档，它说这从 iOS 2.0 开始可用。如果我跳过修改日期检查，则会从钥匙串中正确检索该项目。

有人知道这方面的任何 4.x 与 5.x 的差异吗？我搜索了苹果开发论坛和谷歌，找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:44:01.903

找到了答案。`kSecAttrModificationDate`iOS 5+ 默认存在，但 iOS 4.x 不存在。它必须手动添加。

# r - 是否可以使用 R 对提取的区域进行统计？

> ID：11018824
> 
> 赞同：0
> 
> 时间：2012-06-13T15:57:58.653
> 
> 标签：r

我有一个大小为 (360 720) 的全球二进制文件。我编写了下面给出的代码来读取并从该文件中提取一个区域。当我对我得到的整个文件使用摘要时。

```
summary(a, na.rm=FALSE)
Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
0.00    1.00    3.00    4.15    7.00   20.00  200083 . 
```

但是当对我提取的区域（b）使用摘要时，我得到了很多 V1，V2。这是不对的，我应该得到一条线（至于一条），V1，V2 不多。

这是代码：

```
X <- c(200:300)
Y <- c(150:190)
conne <- file("C:\\initial-WTD.bin", "rb")
a=readBin(conne, numeric(), size=4,  n=360*720, signed=TRUE)
a[a == -9999] <- NA
y <- matrix(data=a,ncol=360,nrow=720)
image(t(t(y[X,Y])),ylim=c(1,0))
b = y[X,Y]
summary(b,na.rm=FALSE)

   V1            V2            V3            V4            V5           V6            V7       
 Min.   : NA   Min.   : NA   Min.   : NA   Min.   : NA   Min.   : 8   Min.   : NA   Min.   :   
 1st Qu.: NA   1st Qu.: NA   1st Qu.: NA   1st Qu.: NA   1st Qu.:11   1st Qu.: NA   1st Qu.:  
 Median : NA   Median : NA   Median : NA   Median : NA   Median :14   Median : NA   Median  
 Mean   :NaN   Mean   :NaN   Mean   :NaN   Mean   :NaN   Mean   :14   Mean   :NaN   Mean     
 3rd Qu.: NA   3rd Qu.: NA   3rd Qu.: NA   3rd Qu.: NA   3rd Qu.:17   3rd Qu.: NA   3rd  
  Max.   : NA   Max.   : NA   Max.   : NA   Max.   : NA   Max.   :20   Max.   : NA   Max.     
 NA's   :101   NA's   :101   NA's   :101   NA's   :101   NA's   :99   NA's   :101   NA's   : 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:15:34.900

问题不在于您对矩阵的索引，而在于访问它之前的某个地方：

```
a <- matrix(1:100, 10, 10)
summary( a[1:3,1:3] )
       V1            V2             V3      
 Min.   :1.0   Min.   :11.0   Min.   :21.0  
 1st Qu.:1.5   1st Qu.:11.5   1st Qu.:21.5  
 Median :2.0   Median :12.0   Median :22.0  
 Mean   :2.0   Mean   :12.0   Mean   :22.0  
 3rd Qu.:2.5   3rd Qu.:12.5   3rd Qu.:22.5  
 Max.   :3.0   Max.   :13.0   Max.   :23.0 
```

您设法达到了一些非 NA 值（显然只有 2 个），但是为什么要使用如此稀疏的数据来执行此操作？我将其扩展到 100 列（共 1000 列），但仍然得到了预期的结果。

# r - R2PPT 使 R 崩溃；R2PPT 有替代品吗？

> ID：11018825
> 
> 赞同：5
> 
> 时间：2012-06-13T15:58:00.957
> 
> 标签：r

我正在尝试将 JPEG 图像自动插入到 Powerpoint 中。我已经为此做了一个宏，除了使用 R 对我的目的来说会更好。

包 R2PPT 应该这样做，我明白。但是，我不能使用它。例如，当我尝试使用 时`PPT.Open`，我知道我可以通过调用`method = "rcom"`or以两种不同的方式进行操作`method = "RDCOMClient"`。使用后者，R 总是会崩溃，向 Windows 发送错误报告。使用前者，它告诉我需要 install `statconnDCOM`，然后给出错误：

`Error in PPT.Open(x) : attempt to apply non-function`.

我不能`statconnDCOM`自由安装，因为我不会将这项工作称为非商业性的。因此，如果没有办法解决这个问题，是否至少有一些 R2PPT 的免费替代品，以便我可以使用简单的 R 代码节省几个小时的手动工作？如果有办法让我使用 R2PPT，那将是理想的。

谢谢！

编辑：我使用的是 R 版本 2.15 并下载了最新版本的 R2PPT。简报是 2007 年的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T13:27:25.330

你有这台机器的管理权限吗？包 RDCOMClient 存在问题。它需要权限才能在驱动器 C: 的根目录中写入文件 rdcom.err。如果您没有写入 c: 的权限，则有一个相当麻烦的解决方法：

1.  关闭 R
2.  如果“c:\temp”文件夹不存在，则创建它。
3.  找到您的硬盘驱动器文件 rdcomclient.dll。它通常放置在 \R\library\RDCOMClient\libs\i386\ 和 \R\library\RDCOMClient\libs\x64\ 中（您需要修补与您的 Windows 版本相对应的文件 - 32 位或 64 位）。建议在修补之前制作此文件的备份副本。
4.  在文本编辑器中打开 rdcomclient.dll（Notepad++，例如 -http://notepad-plus-plus.org/）
5.  在文件字符串 c:\rdcom.err 中查找 - 它只出现一次。
6.  进入覆盖模式（通常按“Ins”键）。新路径与原始路径具有相同数量的字符非常重要。键入 C:\temp\e.rr 而不是 c:\rdcom.err
7.  保存文件。

现在一切都应该正常了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:40:37.170

可以说不是答案，但是您是否看过使用 Sweave/knitr 使用 Beamer 之类的东西在 LaTeX 中呈现您的演示文稿？[（如此处](http://users.stat.umn.edu/~sandy/courses/8801/handouts/03.Beamer/beamer.pdf)第 17 张幻灯片所述。）

将 JPG 放入 PowerPoint 对任何人都没有帮助，但肯定会使将 R 输出（数字或图形）放入演示文稿中变得更加容易！

编辑：如果你想使用 knitr （我推荐），[这里是](http://yihui.name/knitr/demo/beamer/)另一个参考。

# javascript - 左边框宽度的 getComputedStyle 或 currentStyle

> ID：11018828
> 
> 赞同：2
> 
> 时间：2012-06-13T15:58:03.973
> 
> 标签：javascript, css

我的 HTML：`<div id="bar" ></div>`

我的 CSS ：

```
#bar
{
    border-left-width:150px;
} 
```

我的 JS：

```
function getStyle(el,styleProp)
{
    if(el.currentStyle)var y=el.currentStyle[styleProp];
    else if(window.getComputedStyle)var y=document.defaultView.getComputedStyle(el,null).getPropertyValue(styleProp);
    return y;
}

alert(getStyle(document.getElementById("bar"),"border-left-width"));//Outputs 0px 
```

小提琴：http: [//jsfiddle.net/4ABhZ/1](http://jsfiddle.net/4ABhZ/1)

我怎样才能得到`border-left-width`财产？（以我为例，它不起作用（在Firefox上））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:11:22.880

检查你的`border-left-style`财产。它设置为`none`（默认值）。将它设置为类似的东西`solid`，你很高兴：http: [//jsfiddle.net/Paulpro/4ABhZ/4/](http://jsfiddle.net/Paulpro/4ABhZ/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:09:07.043

要支持较旧的浏览器，您需要将 hyphenated-css 更改为 camelCase。

您也可以在其他浏览器中使用 camelCase，并直接读取 getComputedStyle 对象的属性。

```
function getStyle(el, css){
    if(window.getComputedStyle) return getComputedStyle(el, '')[css];
    if(el.currentStyle) return el.currentStyle[css];    
} 
```

**alert(getStyle(document.getElementById('bar'),'borderTopWidth'));**

注意 - css 定义需要一个**样式**和一个边框的宽度才能计算出宽度（并且在计算其尺寸时不能将其设置为 display:none ......）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T16:05:39.423

使用 jQuery

[http://api.jquery.com/category/css/](http://api.jquery.com/category/css/)
[http://api.jquery.com/css/](http://api.jquery.com/css/)

这有效：http: [//jsfiddle.net/L2ZwD/1](http://jsfiddle.net/L2ZwD/1)

# security - Salesforce 远程访问权限

> ID：11018830
> 
> 赞同：0
> 
> 时间：2012-06-13T15:58:07.740
> 
> 标签：security, salesforce, user-permissions

当您通过远程访问以编程方式访问 Salesforce 时，代码具有哪些帐户权限？

远程访问的`Consumer Key`是由特定用户创建的，那么远程访问工具是否具有与该用户相同的权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:46:15.753

用户仍然必须通过远程访问进行身份验证，生成的访问令牌具有经过身份验证的用户的权限。

# qt - 在 Signal 和 Slot 之间传递参数时的 PyQt Unbound 方法

> ID：11018831
> 
> 赞同：0
> 
> 时间：2012-06-13T15:58:09.923
> 
> 标签：qt, pyqt, pyqt4

我正在做一个项目，我需要从网络位置下载和解析 XML 文件。我一直在尝试使用 QtNetwork 模块来实现这一点，但我遇到了一个看似简单的问题，我花了很多时间试图解决这个问题。我的代码如下：

```
class NetworkAccessor(QObject):
    done = False
    def importXml(self):
        self.manager = QNetworkAccessManager()
        self.manager.finished.connect(self.fileReady(QNetworkReply))
        self.manager.get(QNetworkRequest(QUrl("http://192.168.5.243/details.xml")))

    def fileReady(self, response):
        self.f = QTemporaryFile()
        print type(response)
        self.f.write(response.readAll())
        self.done = True
        print "Done" 
```

当我实例化 NetworkAccessor 类并调用 importXml 时，我收到以下错误：

`Traceback (most recent call last):
File "C:/SVN-Local/Thermal/PyQtTestTemplate.py", line 40, in updateUi
f = networkAccessor.importXml()
File "C:/SVN-Local/Thermal/PyQtTestTemplate.py", line 14, in importXml
self.connect(self.manager,SIGNAL("finished(QNetworkReply*)"),self.fileReady(QNetworkReply))
File "C:/SVN-Local/Thermal/PyQtTestTemplate.py", line 20, in fileReady
self.f.write(response.readAll())
TypeError: QIODevice.readAll(): first argument of unbound method must have type 'QIODevice'`

似乎表明传递给 fileReady 方法的参数没有被实例化。此外，`print type(response)`上面的语句表明`response`是 类型`PyQt4.QtNetwork.QNetworkReply`。

我尝试了各种将信号连接到插槽的方法，包括“老式”方法：`self.connect(self.manager,SIGNAL("finished(QNetworkReply*)"),self.fileReady("QNetworkReply"))`以及使用短路参数传递但没有成功。

有人可以告诉我将 QNetworkReply 对象的实例化实例从信号传递到插槽的正确方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:17:11.910

只需将其传递给插槽，QNetworkReply 对象就会被信号传递：

```
self.manager.finished.connect(self.fileReady) 
```

# java - 在 JTextField 中查找光标文本位置

> ID：11018837
> 
> 赞同：8
> 
> 时间：2012-06-13T15:58:21.523
> 
> 标签：java, swing, caret, jspinner

有没有一种方法可以返回 JTextField 中字符的位置。我的意思是如果我有一个包含一些值的 JTextField。例如，该字段包含值 ABCDEFJ。用户决定将光标放在字符“C”之后以输入新值。有没有办法获得他进入新角色的位置。在此示例中，这将返回 3。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-13T16:04:00.657

`JTextField.getCaretPosition()`

`JTextField.setCaretPosition(int pos)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T16:06:58.827

尝试使用`CaretListener`接口：

```
public class A extends JFrame implements CaretListener
{
  //Assume you have a text field.
  public A()
  {
    JTextField field = new JTextField("bla bla");
    field.addCaretListener(this);
    .....
  }

  public void caretUpdate(CaretEvent e)
  {          
    int index = e.getDot();
    .....
  }
} 
```

`getDot()`类的方法`CaretEvent`返回您想要的结果，您可以将其分配给全局变量以供以后使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T16:03:08.413

这是你的答案：

[http://docs.oracle.com/javase/6/docs/api/javax/swing/text/JTextComponent.html#getCaretPosition%28%29](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/JTextComponent.html#getCaretPosition%28%29)

使用 ActionListener 等待操作。当用户键入内容时，找到插入符号的位置。

# php - PHP 邮件代码将邮件发送到垃圾邮件/隔离区

> ID：11018838
> 
> 赞同：-2
> 
> 时间：2012-06-13T15:58:22.140
> 
> 标签：php

标题说明了自己。这是一个供内部员工相互买卖的网站。它仅基于 Microsoft Outlook 电子邮件地址。所有电子邮件都应该在卖家发布商品时从卖家的电子邮件中发送。除了当我`<php phpinfo(); ?>`在操作 php 页面上输入时，它告诉我 sendmail_from 属性是从服务器上的虚假电子邮件发送的。这似乎是 php 脚本发送的自动电子邮件。这可能是电子邮件被发送到垃圾邮件的原因，因为电子邮件无效。此外，我在网上阅读了有关具有完整和有效标题的信息，但大多数标题似乎是可选的，我无法找到任何解释最佳标题的地方。我的邮寄代码：

```
//send approval email to the approver
    $from = isset($_POST['from'])? $_POST['from']:1;
    $message = isset($_POST['message'])? $_POST['message']:1;
    $message = $message . '<a href="http://dev-corkboard/newapproval.php?id='
        .$result[0][0].'"> Click here to approve website post.</a>';
// In case any of our lines are larger than 70 characters, we should use
// wordwrap()
    $message = wordwrap($message, 70);
    $to      = 'clehane@eatonvance.com';
    $replyto = isset($_POST['replyto'])? $_POST['replyto']:1;
    $subject = isset($_POST['subject'])? $_POST['subject']:1;
    $headers = "MIME-Version: 1.0" . "\r\n" . 'From: "'.$from.'"' . "\r\n" .
       'Reply-To: "'.$replyto.'"' . "\r\n" .
       'Content-Type:text/html;charset=iso-8859-1' . "\r\n" .
       'X-Mailer: PHP/' . phpversion();
    if (mail($to, $subject, $message, $headers)) {
        //test message for email
    }               
    header ("location: newindex.php");  ` 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:39:19.023

和砰！解决了，需要这样放置电子邮件地址：

```
$from = 'MyName <myemail@mycompany.com>'; 
```

我还包括了这些标题：

```
"X-Priority: 0\r\n".
"X-MSMail-Priority: Normal\r\n".
"X-Mailer: mycompany.com 
```

# .net - .NET COM Dll 通过引用传递 byte[]

> ID：11018844
> 
> 赞同：1
> 
> 时间：2012-06-13T15:58:43.433
> 
> 标签：.net, silverlight, dll, com, byref

我有一个在 .NET 中创建的 COM dll。我正在通过 silverlight 访问它。我遇到的问题是我将一个 byte[] 传递给 COM dll，但它似乎无法正常工作。我尝试将其标记为 [In][Out]，但没有成功。

```
void LoadData(byte[] data) 
```

这就是我的功能的样子。它可以在 COM 端正常加载数据，但不会将其返回到 silverlight。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:30:25.687

在使用 COM 互操作时尝试通过引用传递数组：

```
void LoadData(ref byte[] data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:45:14.643

[在此处](http://msdn.microsoft.com/en-us/library/z6cfh6e6.aspx)研究数组的默认封送处理可能很有用。

如果这对您没有帮助，请为您的 COM dll 生成一个类型库（例如，使用 tlbexp）。当您看到您正在调用的函数的 IDL 定义时，您可能会明白为什么您的 byte[] 参数不起作用。如果仍然不清楚，请在此处发布该 IDL，它至少会给我们提供更多线索。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-14T17:15:09.623

```
byte[] data = new byte[30]
LoadData(Convert.toBase64String(data.Tostring()));

void LoadData(byte[] data)
{

} 
```

# java - 设置 JTextArea 的固定宽度，而高度应自动调整为其内容

> ID：11018845
> 
> 赞同：6
> 
> 时间：2012-06-13T15:58:47.410
> 
> 标签：java, swing, jtextarea

当我运行示例代码时，JTextArea 的宽度是固定的（100 像素），而当我在其中键入一些文本时，它的高度会动态调整。

例如，我从这个开始：

```
--------------------
| some text        |
-------------------- 
```

当我输入更多文本时，JTextArea 的高度会扩展，因此它适合内容，同时保留宽度：

```
--------------------
| some text, some  |
| other longer text|
| etc...           |
-------------------- 
```

如何将 JTextArea 的宽度加倍？当我通过改变`preferredSize`高度来做到这一点时，它不再是动态的了。

```
public class TestTextArea extends JFrame {

    public static void main(String[] args) {
        new TestTextArea().setVisible(true);
    }

    public TestTextArea() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(0,0,800,600);
        setContentPane(createPane());
    }

    protected Container createPane() {
        JTextArea textArea = createTextArea();

        // ------------------------------------------
        // UNCOMMENT TO DOUBLE THE WIDTH OF JTextArea

//        Dimension oldPrefSize = textArea.getPreferredSize();
//        Dimension newPrefSize = new Dimension(oldPrefSize.width * 2, oldPrefSize.height);
//        textArea.setPreferredSize(newPrefSize);

        JPanel pane = new JPanel(new FlowLayout());
        pane.add(textArea);
        return pane;
    }

    protected JTextArea createTextArea() {
        JTextArea textArea = new JTextArea();
        textArea.setWrapStyleWord(true);
        textArea.setLineWrap(true);
        return textArea;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T16:28:27.827

使用[`JTextArea#setColumns`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextArea.html#setColumns%28int%29)方法调整宽度

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-27T12:06:37.587

将换行设置为 true => textArea.setLineWrap(true); 这将使最大线宽= textarea

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-03T14:07:10.480

更改这行代码 textArea.setPreferredSize(newPrefSize); 到 textArea.setSize(newPrefSize); 高度将动态调整。

# android - listview android中的离散滚动

> ID：11018847
> 
> 赞同：2
> 
> 时间：2012-06-13T15:58:48.380
> 
> 标签：android, listview, scroll

我需要在 android 上制作某种老虎机，所以我有三个带图片的无限循环列表视图。问题是每次用户滚动后如何保持项目在行中？我尝试在滚动停止一点后实现 onScrollStateChanged 和滚动项目，但它没有效果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-17T17:26:22.303

```
 AbsListView.OnScrollListener onScrollListener = new AbsListView.OnScrollListener(){
        @Override
        public void onScrollStateChanged(AbsListView absListView, int i) {
           if(i == 0)
           {
                  ListView.setSelection(ListView.getFirstVisiblePosition());
           }
        }

        @Override
        public void onScroll(AbsListView absListView, int i, int i1, int i2) 
        {

        }
    };

    yourList.setOnScrollListener(onScrollListener); 
```

希望有帮助

# objective-c - 像数字时钟一样显示时间

> ID：11018854
> 
> 赞同：2
> 
> 时间：2012-06-13T15:59:07.387
> 
> 标签：objective-c, xcode, ipad, nsdate, nsdateformatter

我可以使用代码在我的 iPad 应用程序上显示当前时间，

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];  
[dateFormatter setTimeStyle: NSDateFormatterShortStyle];

NSString *currentTime = [dateFormatter stringFromDate: [NSDate date]];
timeLabel.text = currentTime; 
```

但这仅在加载应用程序时给出时间。我怎样才能有时间继续跑步？就像一个数字时钟。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T16:05:40.310

用这个：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];  
[dateFormatter setTimeStyle: NSDateFormatterShortStyle];

[NSTimer scheduledTimerWithTimeInterval:1.0
target:self
selector:@selector(targetMethod:)
userInfo:nil
repeats:YES] 
```

选择器方法是这样的：

```
-(void)targetMethod:(id)sender
{
  NSString *currentTime = [dateFormatter stringFromDate: [NSDate date]];
  timeLabel.text = currentTime;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T16:02:11.080

实现一个 NSTimer

[如何使用 NSTimer？](https://stackoverflow.com/questions/1449035/how-do-i-use-nstimer)

```
[NSTimer scheduledTimerWithTimeInterval:1.0     
                                 target:self
                               selector:@selector(targetMethod:)     
                               userInfo:nil     
                                repeats:YES]; 
```

然后执行 targetMethod 来检查和更新你的时间！！！

如果是我，我可能会得到初始时间，并且只使用 1 秒计时器更新我的内部时间。

您可以通过实现更快的计时器（可以说快 4 到 8 倍）来获得更高的时序分辨率，这样您可能不会经常不同步，但如果您这样做了，那么您将能够重新同步到[NSData 日期] 返回的时间。换句话说，您的后台任务运行得越快，您就越容易与返回的真实时间重新同步。这也意味着您只会在目标方法中每隔几次检查一次同步。

猜猜我说的是要记住奈奎斯特。奈奎斯特的理论（本质上）指出，您的采样**速度至少**应该是您最终尝试使用从采样中获得的数据集重现的分辨率的两倍。在这种情况下，如果您尝试向用户显示每秒一次的更新，那么您确实应该以不低于 1/2 秒的速度进行采样，以尝试捕捉从一秒状态到下一个状态的转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-06T05:25:47.760

**注意**：- 在 .h 文件中声明

```
@property(nonatomic , weak) NSTimer *timer;
@property (weak, nonatomic) IBOutlet UIImageView *imgViewClock; //Image of Wall Clock
@property (weak, nonatomic) IBOutlet UIImageView *hourHandImgView; //Image of Hour hand
@property (weak, nonatomic) IBOutlet UIImageView *minuteHandImgView; //Image of Minute hand
@property (weak, nonatomic) IBOutlet UIImageView *secondHandImgView; //Image of Second hand 
```

**注意**：- 在 .m 文件中声明

```
- (void)viewDidLoad {
[super viewDidLoad];
//Clock
self.timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(tick) userInfo:nil repeats:YES];
[self tick];
} 
```

//这里的assign(tick)方法

```
-(void)tick {

NSCalendar *calendar = [[NSCalendar alloc]initWithCalendarIdentifier:NSCalendarIdentifierGregorian];
NSUInteger units = NSCalendarUnitHour | NSCalendarUnitMinute | NSCalendarUnitSecond;
NSDateComponents *Components = [calendar components:units fromDate:[NSDate date]];
CGFloat hours = (Components.hour / 12.0) * M_PI * 2.0;
CGFloat mins = (Components.minute / 60.0) * M_PI * 2.0;
CGFloat seconds = (Components.second / 60.0) * M_PI * 2.0;

self.hourHandImgView.transform = CGAffineTransformMakeRotation(hours);
self.minuteHandImgView.transform = CGAffineTransformMakeRotation(mins);
self.secondHandImgView.transform = CGAffineTransformMakeRotation(seconds);

} 
```

# android - 安卓应用授权只是一段时间

> ID：11018855
> 
> 赞同：2
> 
> 时间：2012-06-13T15:59:08.053
> 
> 标签：android

我们开发了一个 android 应用程序，我们希望用户可以购买该应用程序，但只能购买一段时间，例如一年。期限到期后，他们应该再次购买该应用程序以获得新的期限。

我们已经查看了有关“应用程序许可”的 Google 信息，但我们已经有一段时间没有看到许可了。当用户在“Google Play”购买应用程序时，他会永远购买，所以这不是我们的解决方案。

是否有任何“google api”来管理这种情况？关于我们如何开发这个场景的任何想法？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:02:01.047

最近引入了*应用内订阅*项目的概念。在这种情况下，用户将免费获得应用程序，然后付费订阅以在给定时间段内访问某些内容。

参考：[订阅](http://developer.android.com/guide/market/billing/billing_subscriptions.html)

# c# - Json Deserialize Issue with EF and RIA Services

> ID：11018867
> 
> 赞同：1
> 
> 时间：2012-06-13T15:59:40.127
> 
> 标签：c#, entity-framework, ria, json.net

I have an odd problem. I use WCF RIA with Entity Framework. I've implemented a generic search functionality, which relies on sending back the resulting entities as `byte[]` (enter Json.Net) and I'm able to get around all sorts of limitations of strong typedness of RIA. But when I'm deserializing back in the client, my object is not properly assembled. Now what do I mean by that?

The json, technically a string, converted to `byte[]` by me and back on the client, contains the related entity information I need. So let's suppose the entity is called Account and it has a related Person object. The json string , even the deserialized jobject, has this Person object and it's details. However, when I deserialize like `JsonConvert.DeserializeObject<Account>(jdata, settings)` - Person is null with no errors.

The settings I'm trying are here:

```
settings = new JsonSerializerSettings()
{
    //CheckAdditionalContent = true,
    PreserveReferencesHandling = PreserveReferencesHandling.All,
    //ReferenceLoopHandling = ReferenceLoopHandling.Serialize
    NullValueHandling = NullValueHandling.Ignore,
    DefaultValueHandling = DefaultValueHandling.Ignore,
    ObjectCreationHandling = ObjectCreationHandling.Replace,
    TypeNameHandling = TypeNameHandling.Auto 
}; 
```

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:40:20.033

好的，想通了 - 所以在反序列化之前，我将下面的解析器附加到我的设置中，比如`settings.ContractResolver = new DynamicContractResolver();`

```
 public class DynamicContractResolver : DefaultContractResolver
    {
        protected override JsonProperty CreateProperty(System.Reflection.MemberInfo member, MemberSerialization memberSerialization)
        {
            var r = base.CreateProperty(member, memberSerialization);
            r.Ignored = false;
            return r;
        }
    } 
```

现在 Json 中的所有内容都完全反序列化到对象中。我不知道为什么这不是默认行为。

# python - 如何创建以文本文件中找到的特定文件类型结尾的字符串的所有出现的列表？

> ID：11018871
> 
> 赞同：-1
> 
> 时间：2012-06-13T16:00:17.160
> 
> 标签：python, arrays, parsing, text, find

我正在尝试从文本文件中提取所有指向图像文件的链接。所有图像文件都以 .jpg 或 .gif 结尾，并用引号括起来。我想找到第一个出现的 .jpg 或 .gif，然后复制位于 .jpg（或 .gif）之前的第一个引号和 .jpg（或 .gif）之后的第一个引号之间的所有字符。然后我想将此链接添加到数组或另一个文本文件中，并对原始文本文件中的每个 .jpg 或 .gif 实例重复该过程。

以下是文本文件的示例：

```
d/scriript type="texft/javascript">
    $(document).fready(function () {
        $('#post-contfainer-1720130 .post-assets .thumb A').lightBox({
            txtImafge:      'Image',
            txtOf:          'of',
            overflayOpacity:    0       });
<div class="thumb"><a href""="#">="**https://imaginepilgrimages.com/asset/image/resize/2/32/32/1/c331065jt99875146b0a1fg9140.jpg**"riript type="texft/javascript">
    $(document).freadriript type="texft/javascript">
    $(document).fread
d/scriript type="texft/javascript">
    $(document).fready(function () {
        $('#post-contfainer-1720130 .post-assets .thumb A').lightBox({
            txtImafge:      'Image',
            txtOf:          'of',
            overflayOpacity:    0       });
<div class="thumb"><a href""="#">="**https://imaginepilgrimages.com/asset/image/resize/2/32/32/75146b0a1fg9140.gif**"riript type="texft/javascript">
    $(document).freadriript type="texft/javascript">
    $(document).fread
d/scriript type="texft/javascript">
    $(document).fready(function () {
        $('#post-contfainer-1720130 .post-assets .thumb A').lightBox({
            txtImafge:      'Image',
            txtOf:          'of',
            overflayOpacity:    0       });
<div class="thumb"><a href""="#">="https://imaginepilgrimages.com/asset/image/resize/2/32/32/1/c331065jt99fgfgage55h6u7rrth6875146b0a1fg9140.jpg"riript type="texft/javascript">
    $(document).freadriript type="texft/javascript">
    $(document).fread 
```

我刚刚开始使用 python，我已经坚持了一段时间。有人可以帮我吗？在此先感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:12:12.890

像下面这样的东西应该可以工作：

```
re.findall('"([^"]*\.(?:gif|jpg)[^"]*)"', text) 
```

不要期望它特别灵活或健壮；为此，您可能需要一个实际的解析器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T16:12:44.223

这将为您提供图像文件名，但它不会尝试修剪前导/尾随 '**'

```
import re
images=[]
with open('test.dat') as f:
   for line in f:
      images.extend(re.findall(r'"([^"]*\.(?:jpg|gif)[^"]*)"',line)) 
```

正则表达式查找引号，然后抓取不是引号的任何内容，专门检查以确保字符串中存在“.jpg”或“.gif”。

# magento - Magento 通讯未通过 cron 作业发送

> ID：11018876
> 
> 赞同：2
> 
> 时间：2012-06-13T16:00:54.783
> 
> 标签：magento, cron, crontab

我正在尝试在 Magento 中设置时事通讯。我已经在 webmin 中设置了 cron.php，它似乎可以工作，但它没有发送时事通讯。如果我检查 cron_schedule 表，我可以在那里看到 cron 条目，但它们前面有“待定”状态。但是，如果我执行 www.mydomain.com/cron.php，它会完美运行并发送新闻通讯，并在 cron_schedule 中创建一个具有“成功”状态的条目。我不确定问题出在哪里。

**编辑**

好吧，几分钟后，cron_schedule 中 newsletter_send_all 条目的状态更改为“成功”，但没有发送任何新闻稿，在 magento admin 中，“新闻稿队列”状态仍为“正在发送”。什么可能导致这种情况？

**编辑 2**

我在这该死的事情上浪费了两天时间，但仍然没有运气。底线是，如果我在浏览器中运行[http://www.mydomain.com/cron.php](http://www.mydomain.com/cron.php)，它会发送时事通讯电子邮件。但是当我为此设置 crontab 时，它只是坐在那里看着我的脸，不发送任何新闻通讯。我努力了：

1）。php -f /var/www/vhosts/mydomain.com/subdomains/staging/httpdocs/cron.php

2）。/usr/bin/php -f /var/www/vhosts/mydomain.com/subdomains/staging/httpdocs/cron.php

3）。wget "http://www.mydomain.com/cron.php"

4）。/usr/bin/wget "http://www.mydomain.com/cron.php"

似乎没有任何工作。尝试了 chmod 777 cron.php、chown apache:apache cron.php、chown root:root cron.php 和 chown myuser:myuser cron.php ......都失败了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-12T08:46:05.780

尝试手动发送。在这个页面中试试这个 ![在此处输入图像描述](../Images/0ab6e5539b59a0e880bbd8eeff99cad2.png) 'app\design\adminhtml\default\default\template\newsletter\queue\list.phtml' getChildHtml('grid') ?> 这个函数调用列表体

```
which come from

'app\code\core\Mage\Adminhtml\Block\Newsletter\Queue\Grid\Renderer\Action.php'

add following code in that page but don't make any change in core file, override that file
in your local directory as

'app\code\local\Mage\Adminhtml\Block\Newsletter\Queue\Grid\Renderer \Action.php'

just copy and paste that file in this directory.

Now add the following code in line number 77 before this code $this->getColumn()->setActions($actions);

$actions[] = array(
'url'=> $this->getUrl('*/newsletter_queue/sending'),
'caption'=>Mage::helper('newsletter')->__('Send'),
'popup' =>true
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:29:52.147

Magento Newsletters Not Sending + 解决方案 如果您想弄清楚为什么 Magento 没有发送时事通讯电子邮件，那么这篇文章就是您所需要的。

Magento 有一个名为 cron.php 的脚本，它处理 Magento 商店必须执行的所有定时作业。在此列表中是发送时事通讯的任务。您必须设置您的服务器 crontab 以定期（例如 5 分钟）运行此 cron.php 脚本。

完成此操作后，您应该会发现您的时事通讯将按预期发送。

有关一些说明，请参阅此页面

但是——这是我对 linux 服务器的简单说明。

1.  打开与您的服务器的 SSH 会话。（如果你不能这样做，你将不得不让你的主人为你做这件事）。

2.  浏览到您的 magento 商店的文档根目录，其中包含 cron.php 的文件夹

3.  输入命令

1 pwd 此命令为您提供当前的完整路径。写在某处

1.  输入命令

哪个php

此命令为您提供 PHP 二进制文件的路径。写在某处

1.  输入命令

crontab -e

这将打开您的 crontab 编辑器，这是用于在 Linux 上安排任务的系统

1.  在 crontab 编辑器上按 [i] 键进入插入模式（基本上是 vi）

2.  在新行上粘贴以下内容，但将路径替换为您之前获得的路径

*/5 * * * * /path/to/php -f /path/to/cron.php

1.  点击 [esc] 然后输入命令

:wq

这会保存 crontab 或 cntrl + x 和 Y

1.  创建一个时事通讯并安排它在 2 分钟内发送。

它应该发送。

参考 http://www.edmondscommerce.co.uk/magento/magento-newsletters-not-sending-solution/

# ios - 为什么在我滚动显示来自 plist 的数据的 tableview 后我的应用程序崩溃？

> ID：11018880
> 
> 赞同：0
> 
> 时间：2012-06-13T16:01:11.537
> 
> 标签：ios, xcode, plist, automatic-ref-counting, tableview

我像这样将数据加载到tableview：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return [tableData count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [[[tableData objectAtIndex: section] objectForKey: @"Rows"] count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    return [[tableData objectAtIndex: section] objectForKey: @"Title"];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [[[tableData objectAtIndex: indexPath.section] objectForKey: @"Rows"] objectAtIndex: indexPath.row];

    return cell;
} 
```

我的 viewDidLoad

```
- (void)viewDidLoad {
    [super viewDidLoad];

    self.tableData = [NSArray arrayWithContentsOfFile: [[NSBundle mainBundle] pathForResource: @"data" ofType: @"plist"]];
} 
```

我使用ARC模式

**编辑**

我的清单：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>Title</key>
        <string>Section1</string>
        <key>Rows</key>
        <array>
            <string>Section1 Item1</string>
            <string>Section1 Item2</string>
        </array>
    </dict>
    <dict>
        <key>Title</key>
        <string>Section2</string>
        <key>Rows</key>
        <array>
            <string>Section2 Item1</string>
            <string>Section2 Item2</string>
        </array>
    </dict>
</array>
</plist> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:29:27.367

首先在你的`didLoad`：

```
NSString *dataStr = [NSDictionary dictionaryWithContentsOfFile: [[NSBundle mainBundle]
                                               pathForResource: @"data" ofType: @"plist"]]; 
```

将其添加到 NSDictionary：

```
NSDictionary *dataDict = [[NSDictionary alloc] initWithContentsOfFile:dataStr]; 
```

将字典添加到 NSArray：

```
NSArray *dataArray = [dataDict allKeys] 
```

最后在：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

通过执行以下操作填充您的表：

```
 NSString *data = [dataArray objectAtIndex:[indexPath row]];
 [[cell textLabel] setText:data]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:15:33.533

做这个tableData是NSDictionary：

```
 - (void)viewDidLoad {
  [super viewDidLoad];

  self.tableData = [NSDictionary dictionaryWithContentsOfFile: [[NSBundle mainBundle] pathForResource: @"data" ofType: @"plist"]]; 
```

}

使用 tableData 在 tableView 中提供值并相应地更改 tableViewDelegate 和数据源

# android - 无法让用户在我的 Android 版 EditView 中输入文本

> ID：11018899
> 
> 赞同：1
> 
> 时间：2012-06-13T16:02:12.597
> 
> 标签：android, input, android-widget

我在eclipse中为我的android做一些基本的编程

我正在尝试做一些简单的事情，例如让用户在 中输入名称`EditText`，但是当我按下文本框时，软键盘不会出现并且无法输入。

我不知道我是否忘记了代码中的任何内容或其他任何内容，这就是我到目前为止所拥有的：

```
public class Menu extends Activity implements OnClickListener {
    private EditText enterName;
    private Button accept;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.menu);

        enterName = (EditText)findViewById(R.id.name);
        accept = (Button)findViewById(R.id.acceptName);

        @Override
        public void onClick(View v) {
        // TODO Auto-generated method stub
        } 
```

和布局 .XML 文件

```
...
<EditText
    android:id="@+id/name"
    android:hint="Enter Name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:inputType="text">

    <requestFocus />
</EditText>
... 
```

所以目前我想要的只是让用户能够在框中写文本。

编辑：---->新问题---->

好的，所以最后一个问题涉及我在帖子中没有提到的东西。

在我的活动中，我使用命令更改布局：

```
setContentView(R.id.(XML-file)); 
```

当我将 EditView 放在第二个 XML 中（不是在创建时显示的那个）时，它不会工作 =/。对不起，如果我之前忽略了这个，但这有什么意义吗？

# jquery - 动态添加和删除行

> ID：11018901
> 
> 赞同：5
> 
> 时间：2012-06-13T16:02:36.243
> 
> 标签：jquery

这是我的 js 代码：

```
<script>
function add(){
  $('#myTable tr:last').after('<tr><td>4<span onclick="del()">del row</span></td></tr>');
}
function del(){
  $(this).parent('tr').remove();
}
</script> 
```

和html：

```
<table id="myTable" border="1">
    <tr><td>1</td></tr>
    <tr><td>2</td></tr>
    <tr><td>3</td></tr>
</table>

<span onclick="add()">add row</span> 
```

我的添加按钮很好用，但我的删除按钮不起作用。当 del row 点击什么也没发生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T16:05:14.437

### 您的代码几乎没有变化

```
function add(){
  $('#myTable tr:last').after('<tr><td>4<span onclick="del(this)">del row</span></td></tr>');
}

function del(el) {
    $(el).closest('tr').remove()
} 
```

**[工作样本](http://jsfiddle.net/QStkd/203/)**

* * *

### 另一种更简单的方法，不需要对代码进行彻底的更改

我认为更容易的是，如果您将一个类添加到`del row span`并删除`onclick`，如下所示：

```
function add(){
  $('#myTable tr:last').after('<tr><td>4<span class="delRow">del row</span></td></tr>');
} 
```

并设置委托事件处理程序，如下所示：

```
$('#myTable').on('click', 'span.delRow', del); 
```

并编写您的`del()`函数，如下所示：

```
function del() {
  $(this).closest('tr').remove();
} 
```

**[工作样本](http://jsfiddle.net/QStkd/200/)**

* * *

### 还有一个重要的注意事项

不要忘记将整个代码放入

```
$(document).ready(function() {..}) 
```

简而言之

```
$(function() {..}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:06:11.697

几件事。

**1.** `this`使用内联脚本时是窗口。
**2.**你需要替换`parent`为`closest`。
**3.**更好的使用`delegate event`

```
function del(){
     $(this).closest('tr').remove(); // closest!!
}    

$('#myTable').on('click', 'span', del); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T16:12:50.323

将您的 del 函数更改为：

```
function del(row){
  $(row).closest('tr').remove();
}​ 
```

并将您的添加功能添加到：

```
$('#myTable tr:last').after('<tr><td>4<span onclick="del(this)">del row</span></td></tr>'); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/tEQJd/1/)**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T16:25:58.740

`this`不会是跨度，所以它不会找到父母。我根本不会为这些创建全局函数，也不会使用脚本属性。我会将其重写为：

```
<table id="myTable" border="1">
    <tr><td>1</td></tr>
    <tr><td>2</td></tr>
    <tr><td>3</td></tr>
</table>

<span id="add">add row</span>

<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script>
$("#add").on('click', function () {
   $('#myTable tr:last').after(
      $("<tr>")
         .append($("<td>", {text: '4'})
            .append($("<span>", {text: 'del row'})
               .on('click', function () {
                  $(this).closest('tr').remove();
               })
            )
         )
   );
});
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T16:05:39.950

你应该使用：

```
$(this).parent('#myTable tr').remove(); 
```

# java - 使用 AWS SDK for java 运行程序时出现 NoClassDefFoundError

> ID：11018904
> 
> 赞同：13
> 
> 时间：2012-06-13T16:02:42.863
> 
> 标签：java, amazon-web-services, noclassdeffounderror

我正在尝试运行 AWS SDK for java 附带的 DynamoDB 示例。我使用 eclipse 来做，并将`aws-java-sdk-1.3.2.jar`文件添加到项目的构建路径中。编译当然很好，但我得到一个名为`NoClassDefFoundError`. 我知道这意味着该类在编译时就在那里，但在运行时找不到。我尝试将 jar 文件添加到环境变量 - 没有帮助。我也查了一下，在其他项目上使用其他外部jar文件也没有问题。windows 和 linux 都有同样的问题。

帮助任何人？

谢谢，本。

堆栈跟踪：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
    at com.amazonaws.services.dynamodb.AmazonDynamoDBClient.<clinit>(AmazonDynamoDBClient.java:62)
    at AmazonDynamoDBSample.init(AmazonDynamoDBSample.java:62)
    at AmazonDynamoDBSample.main(AmazonDynamoDBSample.java:67) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-06T13:30:09.663

在**aws-java-sdk-1.3.2**文件夹中，您会发现另一个名为“ ***third-party*** ”的文件夹。Amazon SDK 使用的所有第三方文件都在该文件夹中，包括 Apache Common Logging。您必须将所需的文件与 AWS 开发工具包 jar 文件一起添加到您的类路径中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T16:21:27.650

看起来您的 AWS JAR 需要一些额外的 JAR 来实现已使用但非 AWS 的项目（例如您的案例日志记录）。

如果您下载了一个包含“lib”目录的可分发文件，那么您很可能只将 Eclipse 配置为使用 AWS JAR 而不是所有必需的 JAR，包括 AWS 和可能在“lib”目录中的所有 JAR。

# asp.net - 网站迁移到新服务器，一些 Ajax 不再工作

> ID：11018909
> 
> 赞同：0
> 
> 时间：2012-06-13T16:03:01.357
> 
> 标签：asp.net, internet-explorer-8, ajaxcontroltoolkit

我刚刚将一个网站从 iis6 / WinServer 2k3 迁移到 IIS7 / WinServer 2k8。

该网站是.net 2.0。

在旧服务器上，它在所有浏览器中都能正常工作（从这台 PC 测试）。

自从我迁移到新服务器后，它的一部分在 ie8 中不再工作。但它的其他部分有效。此外，该站点在 Firefox 中可以正常工作，但以前在 ie 8 中可以正常工作。

所以不用说我很困惑。有没有人对可能导致这种情况的原因有任何想法，或者有任何想法帮助我找出导致它的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:49:07.143

毕竟是服务器上的问题。将应用程序池切换到经典而不是管道，问题就消失了。

引用为什么集成管道适用于除我的 gridview 之外的所有 ajax 是一个谜，但我可以忍受它以经典模式运行，直到我们重新开发整个站点。

# playframework-2.0 - 是否建议启动 Playframework 1.x 应用程序？

> ID：11018915
> 
> 赞同：0
> 
> 时间：2012-06-13T16:03:34.757
> 
> 标签：playframework-2.0, playframework-1.x

`Playframework 2.0`我们在那里，但我认为大多数电流`app servers`将无法支持（[因为它需要`Servlet 3.1`](https://play.lighthouseapp.com/projects/82401/tickets/8-war-packaging)）。

我需要**启动一个新的 Play 应用程序**，但不知道是否`Play1.0`仍会维护，以便我可以使用它创建新应用程序...

想法请....替代方案...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:24:11.320

使用 Play 1.X 启动新应用程序非常好，尽管我建议您使用当前版本（此时为 1.2.4）而不是 1.0。

Play 1.X 仍然非常活跃。例如，两周前（5 月 29 日）发布了最新的候选版本 vor 版本 1.2.5。 以下是Play 开发者 Peter Hilton 关于 Play 1.X 未来的[一些评论。](https://play.lighthouseapp.com/projects/57987/tickets/1494-add-faqs-about-future-play-1x-plans)

另外，您可能对[这篇](http://blog.awfbeat.com/post/22314115684/impressions-of-play-framework-1-2-4-vs-2-0)比较 Play 1.X 和 2.0 优缺点的文章感兴趣。

所以，总而言之：别担心。使用 Play 1.2.4 开始您的新项目。一切都会好起来的。:)

# java - 在 IntelliJ IDEA 11 中运行 Apache Felix 4.0.2

> ID：11018923
> 
> 赞同：6
> 
> 时间：2012-06-13T16:03:58.627
> 
> 标签：java, intellij-idea, osgi, apache-felix

根据这篇[文章](https://stackoverflow.com/questions/4585933/platform-is-not-supported-supported-when-trying-to-run-osgi-debug-target)，IDEA 使用[Osmorc](http://www.osmorc.org/)来运行 OSGi 框架。反过来，它使用[Pax Runner](http://team.ops4j.org/wiki/display/paxrunner/Pax+Runner)来启动不同的框架实现。

IDEA 11 中的工具链最多只能运行 3.0.2 的 Apache Felix，但我必须运行 4.0.2 版本。是否可以？IDEA 是否存在其他 OSGi 框架启动器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T11:09:07.000

您可以从插件+项目设置中配置 Osmorc 使用的 OSGI 框架。我使用 IntelliJ IDEA 11.1.2 和 Osmorc 1.4.2。

这是我将 OSGI 容器（在 IDE Settings-->OSGi）配置为 Apache Felix 4.0.1 的一些本地安装的屏幕截图。

![OSGi 框架定义](../Images/122b80266cfa8b6e6477fa9737213c66.png)

您还可以定义您的自定义框架/容器，然后在 Project Settings-->OSGI 中选择要使用的所需 OSGI 框架，如下所示：

![OSGi 框架选择](../Images/b26a55e6b407039e351fbc5dc39dd385.png)

为了创建运行配置，您首先需要创建一些 OSGi 方面。希望您还使用 maven 和 maven-bundle-plugin，这将大大减少您需要做的配置量（因为 OSmorc 会自动与您的 pom.xml 同步），但即使您不这样做，您也可以手动编辑创建捆绑包的信息。

因此，您接下来需要做的是创建一些 OSGi 方面。转到项目“Structure-->Facets”并为您希望创建的每个包添加一个新的 OSGi 方面。如果您打开了自动检测，那么这些方面可能已经存在。如果没有，则手动添加它们，然后根据您的需要配置它们，如下例所示。

![Intellij IDEA OSGi Facet 配置](../Images/06ae5dbdf4ed39ef778f63c706224389.png)

最后编辑您的“运行配置”并添加一个新的 OSGi 运行配置。选择您希望使用的框架和您希望启动的包以及其他参数，如下例所示：

![Intellij IDEA OSGi 运行配置](../Images/93b7628457fa51b6e7c65885d202b43c.png)

# php - 我可以将变量值添加到 php 中传递的函数参数吗？

> ID：11018929
> 
> 赞同：2
> 
> 时间：2012-06-13T16:04:14.493
> 
> 标签：php

我有以下变量：

```
$argument = 'blue widget'; 
```

我传入以下函数：

```
widgets($argument); 
```

widgets 函数中有两个变量：

```
$price = '5';
$demand ='low'; 
```

我的问题是如何执行以下操作：

```
 $argument = 'blue widget'.$price.' a bunch of other text';
 widgets($argument);
 //now have function output argument with the $price variable inserted where I wanted. 
```

*   我不想将 $price 传递给函数
*   价格在函数内部可用

有什么合理的方法可以做到这一点，还是我需要重新考虑我的设计？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T16:07:58.327

在我的脑海中，有两种方法可以做到这一点：

1.  传入两个参数

    ```
    widget($initText, $finalText) {
        echo $initText . $price . $finalText;
    } 
    ```

2.  使用占位符

    ```
    $placeholder = "blue widget {price} a bunch of other text";   
    widget($placeholder);

    function widget($placeholder) {
         echo str_replace('{price}',$price,$placeholder);
    }
    // within the function, use str_replace 
    ```

这是一个例子：[http ://codepad.org/Tme2Blu8](http://codepad.org/Tme2Blu8)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T16:09:03.273

使用某种占位符，然后在您的函数中替换它：

```
widgets('blue widget ##price## a bunch of other text');

function widgets($argument) {
    $price = '5';
    $demand = 'low';

    $argument = str_replace('##price##', $price, $argument);
} 
```

在这里查看它的实际操作：http: [//viper-7.com/zlXXkN](http://viper-7.com/zlXXkN)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T16:10:23.670

为您的变量创建一个占位符，如下所示：

```
$argument = 'blue widget :price a bunch of other text'; 
```

在您的`widget()`函数中，使用字典数组并`str_replace()`获取结果字符串：

```
function widgets($argument) {
  $dict = array(
    ':price'  => '20',
    ':demand' => 'low',
  );
  $argument = str_replace(array_keys($dict), array_values($dict), $argument);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T16:20:18.563

我会鼓励`preg_replace_callback`。通过使用这种方法，我们可以轻松地使用捕获的值作为查找来确定它们的替换应该是什么。如果我们遇到无效的密钥，可能是拼写错误的原因，我们也可以对此做出回应。

```
// This will be called for every match ( $m represents the match )
function replacer ( $m ) {
    // Construct our array of replacements
    $data = array( "price" => 5, "demand" => "low" );
    // Return the proper value, or indicate key was invalid
    return isset( $data[ $m[1] ] ) ? $data[ $m[1] ] : "{invalid key}" ;
}

// Our main widget function which takes a string with placeholders
function widget ( $arguments ) {
    // Performs a lookup on anything between { and }
    echo preg_replace_callback( "/{(.+?)}/", 'replacer', $arguments );
}

// The price is 5 and {invalid key} demand is low.
widget( "The price is {price} and {nothing} demand is {demand}." ); 
```

演示：[http ://codepad.org/9HvmQA6T](http://codepad.org/9HvmQA6T)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T16:06:53.057

是的你可以。在你的函数中使用全局。

```
$global_var = 'a';
foo($global_var);

function foo($var){
    global $global_var;

    $global_var = 'some modifications'.$var;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-13T16:08:53.990

考虑更改参数，然后从您的小部件函数中返回它，而不是简单地在函数中更改它。阅读您的代码的人会更清楚地看到 $argument 正在被修改，而无需阅读该函数。

```
$argument = widget($argument);

function widget($argument) {
    // get $price;
    return $argument . $price;
} 
```

# c# - 站点丢失 POST 值并出现意外 302 的问题

> ID：11018931
> 
> 赞同：0
> 
> 时间：2012-06-13T16:04:23.907
> 
> 标签：c#, asp.net, opayo

我一直在尝试解决将 Sagepay 服务器集成到 ac#.net 站点的问题。起初我认为 Sagepay 模拟器没有发回 POST。

从那以后，我发现（在记录期间）模拟器正在将值发布回站点，但随后又丢失了它们。我认为这可能是 global.asax 中的一个问题。

我已经尝试注释掉 global.asax 中的所有内容，并且模拟器中的值仍然丢失。

我一直在使用*log4net*来跟踪阶段，这是来自模拟器的调用之一，以及我的 log4net 如何将其放入数据库：

> Application_BeginRequest
> Application_BeginRequest Request.UrlReferrer :
> Application_BeginRequest Request.ServerVariables.Count : 49
> Application_BeginRequest: Form count = 16
> Application_AuthenticateRequest
> Application_EndRequest
> Application_PreSendRequestHeaders
> Application_PreSendRequestContent
> Application_End Appliction
> Started
> Application_BeginRequest
> Application_BeginRequest Request.UrlReferrer :
> Application_BeginRequest Request.ServerVariables.Count Begin
> = 48 Application_Begin Request.Form
> 形式：
> Application_AuthenticateRequest
> Application_AuthorizeRequest
> Application_ResolveRequestCache

这一切都在几秒钟内发生。在加载页面时，它丢失了帖子数据。

这是我们在 sagepay 模拟器上得到的回报：

```
Raw Reponse from your Notification URL
Your Notification URL returned the following information in the response part of the POST. It has been formatted to wrap every 100 characters to make it more readable.

    <form method="post" action="/(A(ubPhPgmAzQEkAAAANzA1MTdhOTctZTJiZi00NzU3LWEyZjItODcxMzI2NW<BR>I3ZjA20))/PaymentGateway/SagePayServerReturn2.aspx" id="ctl00"><input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUJMzIwOTI4NzM3ZGR7QWh08mOnnMUf7wtZMkwEWKknSW6n2TMurN5RJnAIbw==" /> 
```

我们重新使用 .asp 来检查模拟器是否返回了 POST 并且它可以与 .asp 一起使用。我们真的很困惑为什么它不应该在 .aspx 中工作。任何帮助将不胜感激。

安德鲁

我已经设法从圣人页面更新并获得至少一个有效的响应。

```
Status=INVALID
StatusDetail=Unable to find the transaction in our database.
RedirectURL=/PaymentGateway/SagePayOrderFailed.aspx?reasonCode=001 
```

但它仍然会丢失一些发布数据，因为它会触发 Application_BeginRequest 两次。（我不知道这是否有帮助）

找出 Application_BeginRequest 触发两次的原因。当 sage pay 将数据发送到页面时，它会被重定向到同一页面。

所以它在那里丢失了数据，但是我已经删除了我们所有的重定向规则，它仍在这样做。我们的解决方案中没有 Response.Redriect() 。所以我不知道下一步该去哪里寻找问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:03:51.743

我们发现了与 web 配置中的 anonymousIdentification 有关的问题。

在其中设置了 cookieless 值，这使得它成为 302 到剥离帖子值的同一页面。在我们检查服务器日志之前，没有看到它正在重新定向。

这是代码：
`<anonymousIdentification enabled="true" cookieName=".ASPXANONYMOUS" cookieTimeout="100000" cookieless="UseDeviceProfile" cookiePath="/" cookieRequireSSL="false" cookieSlidingExpiration="true" cookieProtection="None" />`

因此，我们所做的只是去掉了无 cookie 的价值，而 Sagepay 现在实现了梦想。

# matlab - 如何从图像的按钮按下事件处理程序访问图像？

> ID：11018932
> 
> 赞同：0
> 
> 时间：2012-06-13T16:04:30.783
> 
> 标签：matlab, event-handling, scope

我在初始化中有以下代码

```
im = imread('Image02.tif');
figure(); imagesc(im); colormap(gray);
[hImage hfig ha] = imhandles(gcf);
set(hImage,'ButtonDownFcn',@clickInImage); 
```

clickInImage 函数看起来像这样

```
function clickInImage(s,e)
    pt=get(gca,'Currentpoint');
    x=pt(1,1);
    y=pt(1,2);
    ... 
```

我的问题：如何`im`在`clickInImage`函数中访问图像？我不能使用全局变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:39:24.337

您可以使用以下方法检索回调中的图像：

```
img = get(s, 'CData'); 
```

否则，将回调作为主 GUI 函数内的**嵌套函数**，这样您就可以访问其所有父工作区：

```
function myGUI()
    img = imread('coins.png');
    figure
    hImg = imagesc(img); colormap(gray)
    set(hImg,'ButtonDownFcn',@clickInImage);

    function clickInImage(src,evt)
        %# here you can access `img` directly ...
        img;
    end
end 
```

# php - 多维数组 - 搜索相同的值

> ID：11018934
> 
> 赞同：-1
> 
> 时间：2012-06-13T16:04:41.043
> 
> 标签：php, arrays, loops, foreach

我有一个多维数组，我正在使用 foreach 循环进行循环。

然后我需要检查这些数组中的任何一个是否具有“parent_page”键以及任何其他数组的相同值，例如：

```
$arrMulti = array(array(
    'page_id' => 1,
    'page_parent' => 28,
    'page_title' => 'Testing'
), array(
    'page_id' => 2,
    'page_parent' => 30,
    'page_title' => 'A seperate page'
), array(
    'page_id' => 3,
    'page_parent' => 28,
    'page_title' => 'Testing Sub Page'
)); 
```

所以 $arrMulti[0]['page_parent'] 将与 $arrMulti[2]['page_parent'] 匹配，所以我需要使用它们创建一个新数组，如下所示：

```
$arrParentIDs = array( 'parent_id' => array(
    1,
    3
)); 
```

抱歉解释不佳，但您对如何做到这一点有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:12:34.817

```
$parentIds = array();
foreach($arrMulti as $temp):

    if(isset($temp['page_parent'] && !in_array($temp['page_parent'], $parentIds)){
        $parentIds[] = $temp['page_parent'];
    }

endforeach;

var_dump($parentIds);//to show the contents 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:10:44.583

试试这样的..

```
foreach($arrMulti as $array) {
    foreach($array as $key=>$val) {
        //your statement/condition
    }
} 
```

# kml - 在 Google 地球 API 上设置 UTM（通用横轴墨卡托）坐标属性

> ID：11018936
> 
> 赞同：1
> 
> 时间：2012-06-13T16:04:53.057
> 
> 标签：kml, google-earth-plugin, utm

当我设置一个新的地标时，我想用 UTM 坐标创建一个 kml。这是我的代码，但我不知道我必须在哪里设置这个属性

```
//part of the code
counter++;
placemark= makePlacemark(hitTestResult.getLatitude(), hitTestResult.getLongitude(),
          hitTestResult.getAltitude(), ge.ALTITUDE_ABSOLUTE, 'T');
//set placemark name
placemark.setName("PLM" + counter);
//set the placemark on the map
ge.getFeatures().appendChild(placemark);

var output = placemark.getKml();
alert(output);

function makePlacemark(lat, lng, alt, altMode, iconStr) {
        var icon = ge.createIcon('');
        icon.setHref('http://maps.google.com/mapfiles/kml/paddle/' + iconStr + '.png');

        var style = ge.createStyle('');
        style.getIconStyle().setIcon(icon);
        style.getIconStyle().getHotSpot().set(0.5, ge.UNITS_FRACTION, 0,ge.UNITS_FRACTION);

        var pt = ge.createPoint('');
        pt.set(lat, lng, alt, altMode, false, false);
        var pm = ge.createPlacemark('PLM' + counter);
        pm.setGeometry(pt);
        pm.setStyleSelector(style);

        return pm;
} 
```

* * *

> 您需要将坐标从 UTM 投影转换（重新投影）为 epsg:4326

这是否意味着 Google 地球应用程序使用额外的转换来显示 UTM 中的坐标？使用它工具->选项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:26:19.497

KML 规范在 WGS84 基准上指定纬度和经度。不支持任意投影。

您需要将坐标从 UTM 投影转换（重新投影）为[epsg:4326](http://spatialreference.org/ref/epsg/4326/)，然后适当地输入纬度和经度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T03:39:52.143

如前文所述，您需要将 UTM 坐标转换为长纬度

这个客户端的一个好工具是： [http ://trac.osgeo.org/proj4js](http://trac.osgeo.org/proj4js)

见例子：
[http ://trac.osgeo.org/proj4js/wiki/UserGuide](http://trac.osgeo.org/proj4js/wiki/UserGuide)

如前一篇文章中所述：目标坐标 epsg:4326 ，该示例将它们作为源

proj4 的来源将是您的 utms。

使用 proj4js 和北区 10 号 UTM， [http](http://spatialreference.org/ref/epsg/32610/) ://spatialreference.org/ref/epsg/32610/ ：

```
var dest= new Proj4js.Proj(‘EPSG:4236’);     
var Source= new Proj4js.Proj(‘EPSG:32610’);     

// transforming utm ngcoordinates
var p = new Proj4js.Point(489399,5456814);   

Proj4js.transform(source, dest, p);     

var lng= p.x ;
var lat= p.y; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:16:52.203

我发现的最好的服务器端坐标转换在这里：

[http://www.jstott.me.uk/phpcoord/](http://www.jstott.me.uk/phpcoord/)

多年来，我一直将它与我的 Google 地图和 GE 插件代码一起使用。

有人知道等效的javascript吗？

# android - android上的phonegap无法连接到公司网络

> ID：11018937
> 
> 赞同：0
> 
> 时间：2012-06-13T16:04:55.707
> 
> 标签：android, cordova, proxy, corporate

问题：我可以看到 URL 在 Android 浏览器中打开，但 phonegap 应用程序总是说发生网络错误。

我在多个位置看到过对这个问题的引用，尝试了我遇到的每个解决方案，但仍然没有找到解决方案。我正在尝试使用以下代码将 Intranet 提供的网页加载到 android 上的 phonegap 应用程序中：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.init();
    //WebView.enablePlatformNotifications(); // Enable proxy
    //setContentView(R.layout.main);
    //super.loadUrl("file:///android_asset/www/index.html");
    this.setIntegerProperty("loadUrlTimeoutValue", 60000);
    super.loadUrl("http://10.32.147.28:9080/MYWeb/IndexView.do");
} 
```

我尝试在上面评论和取消评论许多可能的组合。这是配置：`cordova_1.8.0.ja`r 在应用程序内。`cordova1.8.0.js`由上面的页面提供服务，不存储在本地。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:27:54.220

您是否设置了适当的应用程序白名单？您需要将您的服务器 IP 列入白名单。

[http://docs.phonegap.com](http://docs.phonegap.com) - 左侧，域白名单指南。

# c# - 将空值插入到 sql server 中的 int 列

> ID：11018939
> 
> 赞同：1
> 
> 时间：2012-06-13T16:05:03.850
> 
> 标签：c#, sql-server

我有一个将记录插入到 sql server 表的子程序。编码：

```
 public void Insert_Met(int Counts, char Gender)
    {
        Dictionary<string, object> parameters = new Dictionary<string, object>();
        parameters.Add("@Counts", Counts);
        parameters.Add("@Gender", Gender);
        // run a stored procedure ExecuteNonQuery
    } 
```

我其他行代码，

```
 int counts = Convert.ToInt32(numberUpdowncontrol1.Text);
       // from a control, maybe empty then it is null.
      Insert_Met(counts,'M'); 
```

我的问题是有时 Counts 可以为空，那么如何更改我的代码？

谢谢，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T16:07:08.327

您可以使用`int? counts`代替`int counts`，并检查您的方法中的值：

```
public void InsertMet(int? counts, char gender)
{
    Dictionary<string, object> parameters = new Dictionary<string, object>();
    parameters.Add("@Counts", counts.HasValue ? counts.Value : (object)DBNull.Value);
    parameters.Add("@Gender", gender);
    // run a stored procedure ExecuteNonQuery
} 
```

* * *

> 它是一个windows形式的numericupdown控件。我觉得很难将文本分配给 int 变量。如何改变它？

为了为上述设置适当的计数值，您可以执行以下操作：

```
int value = (int)numberUpdowncontrol1.Value;
int? counts = !string.IsNullOrEmpty(numberUpdowncontrol1.Text) ? value : (int?)null;

InsertMet(counts, 'M'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:33:53.277

以下语句将始终产生非空值

```
int counts = Convert.ToInt32(null); // Result is 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-24T15:21:53.367

```
int count = !(count == 0)? count ? (object)DBNull.Value 
```

- 如果计数不为零，则将计数值保存到数据库 - 如果为零，则保存

# jquery - JQuery slideToggle() vs CSS 动画

> ID：11018944
> 
> 赞同：3
> 
> 时间：2012-06-13T16:05:17.783
> 
> 标签：jquery, html, css

请不要将此标记为重复，我不是在问什么更好用。[前几天我做了一个滑出式导航栏](http://jsfiddle.net/w67Pj/)，我使用 jQuery`slideToggle()`来让动画工作。我尝试使用 CSS 过渡，但失败得很惨。问题是，是否有可能在没有 jQuery（或任何 JS，就此而言）的情况下通过转换（确切地说是对 JSfiddle 的影响）获得这种效果？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:14:27.223

当然可以，但是使用这种方法，您将不得不在`top`最初的位置上玩弄（它是否定的）

**重要部件**

```
#nav li ul {
    position: absolute;
    margin-left: -1px;
    list-style: none;
    padding: 0;
    top: -245px;
    -webkit-transition:all 1s ease;
    -moz-transition:all 1s ease;
}

#nav li:hover ul {
    visibility: visible;
    display:block;
    top: 45px;
    z-index:-999; /* This is to make the menu be behind the nav bar*/
}

#nav li ul:hover {
    display: block;
} 
```

[演示](http://jsfiddle.net/w67Pj/4/)

另请查看[此](http://jsfiddle.net/R8zca/4/)幻灯片效果的简化版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T16:11:55.213

是的，这是可能的（这里有一个例子：http: [//jsfiddle.net/DvVLw/3/](http://jsfiddle.net/DvVLw/3/)）例如，如果您的项目高度最初设置为`0`并且您为每个子菜单指定在动画结束时要达到的确切高度，因为 CSS3 动画（还）不能与`auto`关键字一起工作（所以动画 from `0`to`auto`是不可能的）。

当然，当您的菜单是动态的并且您以前不知道它将包含多少项目时，高度当然很难判断

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-12T11:11:47.273

而是使用`height` `0`以及`auto`为什么不使用 CSS `transform:translateY()`with `transition: transform`?

使用该解决方案有什么缺点吗？

# php - JQuery 自动完成：如何处理修改？

> ID：11018946
> 
> 赞同：2
> 
> 时间：2012-06-13T16:05:23.917
> 
> 标签：php, jquery, jquery-ui, jquery-ui-autocomplete

我有自动完成工作，但我如何处理修改？

当用户修改原始选择时会发生什么？I've got an auto-complete that, when a listing is chosen, other fields are filled in. If the user chooses a listing, then tries to modify it to something that is new (does not match anything in our DB), the其他字段需要清除。

另一种提问方式：我如何处理“新”列表？

我的代码如下

```
$(function() {
    $( "#oName" ).autocomplete({
        source: "include/organizerList.php",
        minLength: 3,
        select: function( event, ui ) {
            $("input#oID").val(ui.item.oID);
            $("input#oCID").val(ui.item.oCID);
            $("div#organCity").text(ui.item.oCity);
            $("div#organCountry").text(ui.item.oCountry);
        }
    });
}); 
```

组织者列表.php

```
// important to set header with charset
header('Content-Type: text/html; charset=utf-8');

$term = htmlspecialchars(strtolower($_GET["term"]));

$return = array();
    $query = mssql_query("SELECT CID, oID, oName, oCity, oCountry FROM TradeShowDB_Organizers WHERE oName LIKE '%$term%'");
    while ($row = mssql_fetch_array($query)) {
    array_push($return,array( 'oCID'=>$row['CID'], 'oID'=>$row['oID'], 'label'=>$row['oName'] . ', ' . $row['oCity'], 'value'=>$row['oName'], 'oCity'=>$row['oCity'], 'oCountry'=>$row['oCountry'] ));
}

// encode it to json format
echo(json_encode($return)); 
```

我的html：

```
<input type="text" tabindex='20' id="oName" name="oName" size="60" maxlength="200" value="<?php echo $oName; ?>">
<div id='organCity'></div>
<div id='organCountry'></div>
<input type="hidden" id="oID" name="oID" value="<?php echo $oID; ?>">
<input type="hidden" id="oCID" name="oCID" value="<?php echo $oCID; ?>"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:22:19.310

您可以使用自动完成`select`事件[http://jqueryui.com/demos/autocomplete/#event-select](http://jqueryui.com/demos/autocomplete/#event-select)

用户选择选项后禁用输入

```
$("#oName").autocomplete({
    source: "include/organizerList.php",
    minLength: 3,
    select: function (event, ui) {
        this.value = ui.item.value;
        $('#autocomplete').autocomplete("disable");
        $('#autocomplete').trigger('keypress'); //needed to fix bug with enter on chrome and IE
        $(this).attr('disabled','disabled');
        return false;
    },
    autoFocus: true
}); 
```

**[http://jsfiddle.net/HKxua/6/](http://jsfiddle.net/HKxua/6/)**

然后在您的服务器端脚本中，您可以检查输入以查看发布的值是否存在于数据库中。

# javascript - 在 Javascript 中以编程方式设置构造函数参数

> ID：11018951
> 
> 赞同：1
> 
> 时间：2012-06-13T16:05:41.473
> 
> 标签：javascript

我正在尝试与 javascript api 交互（请记住，我以前从未这样做过）。我正在尝试使用的示例如下：

```
SearchSpring.Catalog.init({
    leaveInitialResults : true,
    facets : '.leftNav',
    results : '#results',
    result_layout: 'list',
    results_per_page : 12,
    layout: 'top',
    loadCSS: false,
    filters: {
        color: ['Blue']
    },
    backgroundFilters: {
        category: ['Shirt', 'Shoes'],
        department: ['Mens']
    },
    maxFacets: 5,
    maxFacetOptions: 10,
    sortText: 'Sort By ',
    sortType: 'dropdown',
    filterText: 'Refine Search Results',
    previousText: 'Previous',
    scrollType: 'scroll',
    scrollTo: 'body',
    backgroundSortField: 'price',
    backgroundSortDir: 'desc',
    compareText: 'Compare Items',
    summaryText: 'Current Filters',
    showSummary: true,
    subSearchText: 'Subsearch:',
    showSubSearch: true,
    forwardSingle: false,
    afterResultsChange: function() { $('.pagination').hide(); },
    filterData: function(data) { console.debug(data); }
}); 
```

在示例中，我想为此添加一个带有值的“backgroundFilter”：

```
var cat="MyNewCategory";
cat.value="ANewValue; 
```

我如何将这个类别和值添加到上面列出的 backgroundFilters: 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:43:05.180

这是使用框架时非常常见的框架初始化模式。

您的示例代码将 JavaScript 对象`{}`作为参数传递给`()`名为 init 的函数。

取出所有定义，模式如下所示：

```
SomeFramework.frameworkFunction({}); 
```

在上面的代码中，`{}`是一个用于初始化的空对象。在实践中，您可以通过两种方式使用该对象。

关于您的第一个代码片段，您可以将代码添加到该“对象文字”中。

背景过滤器：{类别：['衬衫'，'鞋子']，部门：['男装']，猫：['我的价值']}，

注意添加的逗号，这是一个重要的触发点。这可能符合您的需求，也可能不符合您的需求，具体取决于几个因素。

关于您的第二个代码片段，您可以在运行时*将*成员应用于 JavaScript 对象。我的意思是，您的 var cat 可以添加到正在传入的匿名对象文字中。很难说，但是一个简单的概念。方法如下：

```
//Say this is initialized in some separate way. //There is a bug here I'll describe later.
var cat="MyNewCategory";
cat.value="ANewValue";

//Extract and name the initialization object. It is verbatim at this point.
var initObject = {
    leaveInitialResults : true,
    facets : '.leftNav',
    results : '#results',
    result_layout: 'list',
    results_per_page : 12,
    layout: 'top',
    loadCSS: false,
    filters: {
        color: ['Blue']
    },
    backgroundFilters: {
        category: ['Shirt', 'Shoes'],
        department: ['Mens']
    },
    maxFacets: 5,
    maxFacetOptions: 10,
    sortText: 'Sort By ',
    sortType: 'dropdown',
    filterText: 'Refine Search Results',
    previousText: 'Previous',
    scrollType: 'scroll',
    scrollTo: 'body',
    backgroundSortField: 'price',
    backgroundSortDir: 'desc',
    compareText: 'Compare Items',
    summaryText: 'Current Filters',
    showSummary: true,
    subSearchText: 'Subsearch:',
    showSubSearch: true,
    forwardSingle: false,
    afterResultsChange: function() { $('.pagination').hide(); },
    filterData: function(data) { console.debug(data); }
};

//Now we can add variables (and functions) dynamically at runtime.
initObject.cat = cat;

//And pass them into the framework initialization in a separated way.
SearchSpring.Catalog.init(initObject); 
```

现在是错误。我不知道解决方案，因为我不知道它打算做什么，但我可以指出可能不正确的地方。

var cat="MyNewCategory"; cat.value="ANewValue;

这段代码是： 1 创建一个名为cat 的String 对象。2 将值更改为新字符串。我不认为这是你真正想要的。

要添加一个新的 backgroundFilter，以上面的分离方式，它将是：

```
initObject.backgroundFilters.cat = ['A', 'B'];

//Line above would give you this type of definition within the initObject (at runtime):
        backgroundFilters: {
            category: ['Shirt', 'Shoes'],
            department: ['Mens'],
            cat: ['A','B']

        }, 
```

为此，它将取决于框架对 backgroundFilters 的期望。

希望有帮助。祝一切顺利！纳什

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:13:01.973

我不太明白 - 您是否希望将 backgroundFilters 类别作为结构化对象而不是纯字符串？如果您可以控制整个 API，则可以执行类似的操作

```
...
backgroundFilters: {
    category: [
        new SearchSpring.Catalog.Category("Shirt"),
        new SearchSpring.Catalog.Category("Shoes"),
        new SearchSpring.Catalog.Category("MyNewCategory", "ANewValue")
    ],
    department: 'Mens'
}
... 
```

# python - 如何从 django 中的低级缓存 API 中删除特定键

> ID：11018952
> 
> 赞同：2
> 
> 时间：2012-06-13T16:05:45.370
> 
> 标签：python, django

在我的 django 应用程序中，我使用的是低级缓存 api

```
from django.core.cache import cache 
```

有一种情况，我需要删除一个特定的键，而不是清除整个缓存。这里的问题是我不知道键名 -`but only that the keyname starts with a particular username string`

说`damon_my222cachekey`是缓存中存在的键。我只知道它以字符串开头`damon_` 。有什么方法可以告诉缓存以`delete a key`该特定字符串开头吗？

如果有像 cache.keys() 这样的方法，我可以使用正则表达式从返回的列表中获取键名

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:03:58.767

唯一的方法是创建二级缓存。在这种方法中，您实际上并没有删除键，而是使它们无法访问（缓存会在一段时间内自动删除它们）。

```
def get_user_version(username):
    version = cache.get("%s_version" % username)
    if version is None:
        version = random.randint(1, 1000000000)
        cache.set("%s_version" % username, version)
    return version

def get_user_cache(username, key):
    version = get_user_version(username)
    return cache.get("%s_%d_%s" % (username, version, key))

def set_user_cache(username, key, value):
    version = get_user_version(username)
    cache.set("%s_%d_%s" % (username, version, key), value)

def invalidate_user_cache(username):
    version = cache.incr("%s_version" % username) 
```

好处是您可以轻松地使用户缓存无效。缺点是您向缓存发出两个请求而不是一个。

# c# - 在单元测试输出目录中添加内容文件

> ID：11018957
> 
> 赞同：8
> 
> 时间：2012-06-13T16:06:15.760
> 
> 标签：c#, visual-studio, unit-testing

我是 Visual Studio 中单元测试的新手，我想加载一个物理 xml 文件。该文件作为内容在单元测试项目中，并被复制到输出目录中。

因此，当我编译项目时，xml 文件位于输出目录中。但是当我执行测试时，会创建一个包含所有依赖 DLL 的新目录，但不会复制 xml 文件。

执行测试需要 Xml 的内容。我执行此代码以检索执行文件夹中 Xml 文件的路径：

```
private static string GetXmlFullName()
{
    // GetApplicationPath use the current DLL to find the physical path
    // of the current application
    string executeDirectory = AssemblyHelper.GetApplicationPath();
    return Path.Combine(executeDirectory, "content.xml");
} 
```

例外是：

```
System.IO.DirectoryNotFoundException: 'd:\***\solutiondirectory\testresults\*** 2012-06-13 17_59_53\out\content.xml'. 
```

如何将此文件添加到执行文件夹中？

提前致谢。（对不起我的英语......）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T16:10:59.707

您需要在测试类上放置一个[DeploymentItemAttribute 。](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.deploymentitemattribute%28v=vs.80%29.aspx)

例如，包含 Data 文件夹中的所有文件

```
[TestClass()]
[DeploymentItem("Data")]
public class MyTestClass
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-06T17:26:02.260

正如 Matthew Lock 所提到的，我**唯一**需要做的就是在解决方案项目中的 Local.testsettings 中的 Deployment 下添加文件。

[![测试设置](../Images/34a28e0ef07fd0b60dbbd5d66e28da44.png)](https://i.stack.imgur.com/8xbVS.png)

# android - 阻止应用程序

> ID：11018961
> 
> 赞同：1
> 
> 时间：2012-06-13T16:06:37.693
> 
> 标签：android

我需要制作一个应用程序来阻止手机上的其他应用程序。我尝试了[应用程序锁定](https://stackoverflow.com/questions/7248080/android-lock-apps)此代码，但得到了不同的错误，例如没有 setp() 或 getp() 函数以及许多其他任何人都可以告诉我在服务中逐步实现此代码的步骤吗？.help 将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:31:17.447

您唯一的选择（对于非根/库存系统设备）是创建主屏幕替换并让用户选择始终将您的应用程序用于主屏幕。

您可以通过简单地不向用户提供启动任何您想要的应用程序之外的方式来限制可以使用的应用程序。

[Kytephone](https://play.google.com/store/search?q=kytephone&c=apps)是一个实现了此功能的应用程序。

但是，如果不创建主屏幕，这在库存设备上是不可能的。一个应用程序无法关闭/阻止另一个应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:32:12.987

大多数此类应用程序都使用基于[签名的](http://guardhome.org/how-antivirus-works-signature-based-detection-heuristic-scanning-and-behavior-blocker/)方法。为您要阻止的应用程序创建一个 MD5 校验和，当检测到该校验和时，您可以中止安装活动。这不会是您的全部解决方案，但可能是其中的一部分。

# iphone - 网站的 iOS 结帐

> ID：11018965
> 
> 赞同：0
> 
> 时间：2012-06-13T16:06:45.863
> 
> 标签：iphone, ios, ios5, checkout, uiweb

我正在构建一个在线销售门票的网站的 iPhone 应用程序版本。我正在尝试在不使用 UIWebView 的情况下在 iOS 上重新实现结帐流程，传递一些变量（票数、日期等），并且只执行最终的 HTTP 请求来处理付款。

问题是我不知道进行最终购买的请求的结构。我应该怎么做才能对此进行逆向工程？

更重要的是，有没有更好的方法来修改 iPhone 屏幕的网络结帐流程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:44:01.183

访问这个售票网站的网站，在实际付款之前一直到最后一个屏幕。然后，查看 HTML 中的所有输入，并使用该数据发送请求。如果 jQuery 在他们的网页上，那真的很容易。打开开发人员工具，转到可以输入命令的控制台，只需输入`$('input, textarea')`，它就会显示所有命令的列表。

例如，如果页面有这样的表单。

```
<form method="post" action="makepayment.php">
    <input name="numTickets" />
    <input name="date" />
</form> 
```

然后，您需要将 numTickets 和日期发布到 makepayment.php 页面。

这是您需要在 HTTP 请求中发送的数据。您可以在此处阅读一个不错的库：http: [//allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)。它可以让你做这样的事情：

```
NSURL *url = [NSURL URLWithString:@"https://ticketsellers.com/makepayment.php"];
ASIFormDataRequest *request = [[[ASIFormDataRequest alloc] initWithURL:url] autorelease];
[request setPostValue:@"2" forKey:@"numTickets"];
[request setPostValue:@"12/31/2012" forKey:@"date"];
[request startSynchronous]; 
```

# mysql - Mysql加入/联合问题

> ID：11018966
> 
> 赞同：1
> 
> 时间：2012-06-13T16:06:47.257
> 
> 标签：mysql, join, union

我正在尝试创建一个从 2 个表中提取数据的报告：a & b。该报告按 a.clock 分组。报告的大部分数据来自 - 那部分工作正常。a.clock 与 b.userID 链接。

我正在努力的部分是数据来自 b 的列之一。我需要为主报告中的每个 a.clock 分组汇总以下内容（此查询独立工作）

```
 SELECT (
   SUM(
     TIME_TO_SEC(
       TIMEDIFF(
         CONCAT(b.endDate, ' ', b.outTime),
         CONCAT(b.startDate, ' ', b.inTime)
       )
     ) / 3600
   )
 ) AS 'Misc Hours' FROM b 
```

换句话说，我需要为每个 a.clock 计算杂项小时数（以 b 为单位）。我想也许加入 b 表是必要的，但这似乎不起作用。有什么建议么？

这是表定义（对不起，冗长）

```
CREATE TABLE `a` (
  `laborID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `type` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '0=sched; 1=accepted; 2=complete; 3=authorize',
  `laborType` varchar(15) NOT NULL DEFAULT '0' COMMENT 'Lookup',
  `hours` varchar(15) NOT NULL DEFAULT '',
  `wage` varchar(15) NOT NULL DEFAULT '',
  `id` int(10) unsigned NOT NULL DEFAULT '0',
  `laborDate` date NOT NULL,
  `ot` varchar(15) NOT NULL,
  `clock` varchar(15) NOT NULL,
  `setup` varchar(15) NOT NULL DEFAULT '',
  `ot2` varchar(15) NOT NULL,
  `wageOT1` varchar(15) NOT NULL,
  `wageOT2` varchar(15) NOT NULL,
  `inTime` varchar(15) NOT NULL,
  `outTime` varchar(15) NOT NULL,
  `startDateString` varchar(125) NOT NULL,
  `endDateString` varchar(125) NOT NULL,
  `authRequestDate` datetime NOT NULL,
  `authRequestUser` int(10) unsigned NOT NULL,
  `authRequestReason` text NOT NULL,
  `authDate` datetime NOT NULL,
  `authUser` int(10) unsigned NOT NULL,
  `authRequired` varchar(45) NOT NULL,
  `km` varchar(45) NOT NULL,
  `travelTime` varchar(45) NOT NULL,
  `actualInTime` varchar(45) NOT NULL,
  `actualOutTime` varchar(45) NOT NULL,
  `actualKm` varchar(45) NOT NULL,
  `actualTravelTime` varchar(45) NOT NULL,
  `intNotes` text,
  `extNotes` text,
  `billableReason` text,
  `billableHours` varchar(45) DEFAULT NULL,
  `actualHours` varchar(45) DEFAULT NULL,
  `overtime` varchar(45) DEFAULT NULL,
  `followUpReason` text NOT NULL,
  `responseType` varchar(45) DEFAULT NULL,
  `followUpType` int(10) unsigned DEFAULT NULL,
  `billableDrop` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`laborID`),
  KEY `id` (`id`),
  KEY `type` (`type`),
  KEY `laborDate` (`laborDate`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 ROW_FORMAT=DYNAMIC;

CREATE TABLE `b` (
  `timecodeID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `userID` int(10) unsigned NOT NULL,
  `inTime` varchar(45) NOT NULL,
  `outTime` varchar(45) NOT NULL,
  `startDateString` varchar(145) NOT NULL,
  `endDateString` varchar(145) NOT NULL,
  `startDate` varchar(45) NOT NULL,
  `endDate` varchar(45) NOT NULL,
  `type` varchar(45) NOT NULL,
  `comments` text NOT NULL,
  `multiDay` tinyint(3) unsigned NOT NULL,
  PRIMARY KEY (`timecodeID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:14:46.900

```
SELECT timecodes.userID,
       (SUM(
           TIME_TO_SEC(
                      TIMEDIFF(
                              CONCAT(timecodes.endDate,' ',timecodes.outTime),
                              CONCAT(timecodes.startDate,' ',timecodes.inTime)
                              )
                      )/3600
           )
       )
      AS 'Misc Hours'
FROM timecodes WHERE timecodes.userID=labor.clock GROUP BY labor.clock 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:36:06.807

好吧，如果您在每个表中都有多行，那么您将获得更大的总和，因为劳动中的每一行将与时间码中的每一行连接。因此，想法是按时钟和用户 ID 嵌套查询组，以根据分组分别获得一行

```
SELECT A.Clock, A.hours, B.'Misc Hours'
  FROM
     (
        SELECT labor.clock,
               SUM(hours) Hours
          FROM labor
         GROUP BY labor.clock
     ) A
 INNER JOIN 
     (
        SELECT  timecodes.userID,
                (SUM(
                     TIME_TO_SEC(
                          TIMEDIFF(
                               CONCAT(timecodes.endDate,' ',timecodes.outTime),
                               CONCAT(timecodes.startDate,' ',timecodes.inTime)
                          )
                      )/3600
                  )
                 ) AS 'Misc Hours'
         FROM timecodes
        GROUP BY timecodes.userID

) AS B ON A.Clock = B.UserId 
```

# utf-8 - 如何确定文件编码？

> ID：11018967
> 
> 赞同：44
> 
> 时间：2012-06-13T16:06:48.647
> 
> 标签：utf-8, character-encoding, file-encodings

我有一个用 VIM 创建的 PHP 文件，但我不确定它的编码是什么。

当我使用终端并使用命令检查编码时`file -bi foo`（我的操作系统是 Ubuntu 11.04），它给了我下一个结果：

`text/html; charset=us-ascii`

但是，当我用 gedit 打开文件时，它说它的编码是 UTF-8。

哪一个是正确的？我希望文件以 UTF-8 编码。

我的猜测是文件中没有 BOM，并且该命令`file -bi`读取文件并没有找到任何 UTF-8 字符，因此它假定它是 ascii，但实际上它是用 UTF-8 编码的。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2015-01-19T02:52:41.350

```
$ file --mime my.txt 
my.txt: text/plain; charset=iso-8859-1 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-06-13T18:49:19.937

好吧，首先，请注意 ASCII 是 UTF-8 的子集，因此如果您的文件仅包含 ASCII 字符，那么说它是用 ASCII 编码是正确的*，*说它是用 UTF-8 编码是正确的。

话虽如此，`file`通常只检查文件开头的一小段以确定其类型，因此如果存在非 ASCII 字符但它们超出文件的初始段，则可能将其声明为 us-ascii。另一方面，gedit 可能会说文件是 UTF-8，即使它是 ASCII，因为 UTF-8 是 gedit 的首选字符编码，并且如果您在期间添加任何非 ASCII 字符，它打算使用 UTF-8 保存文件您的编辑会话。同样，如果这就是 gedit 所说的，那也不会错。

现在回答你的问题：

1.  运行此命令：

    ```
    tr -d \\000-\\177 < your-file | wc -c 
    ```

    如果输出显示“0”，则该文件仅包含 ASCII 字符。它是 ASCII 格式的（它也是有效的 UTF-8） 故事结束。

2.  运行此命令

    ```
    iconv -f utf-8 -t ucs-4 < your-file >/dev/null 
    ```

    如果您收到错误，则该文件不包含有效的 UTF-8（或至少，它的某些部分已损坏）。

    如果您没有收到错误，则该文件极有可能是 UTF-8。这是因为 UTF-8 的特性使得很难将任何其他常用字符编码中的典型文本误认为是有效的 UTF-8。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2016-03-11T11:19:50.437

（在 Linux 上）

```
$ chardet <filename> 
```

它还提供输出的置信度 [0-1]。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-18T15:19:15.170

基于@Celada 答案和@Arthur Zennig，我创建了这个简单的脚本：

```
#/bin/bash

if [ "$#" -lt 1 ]
then
  echo "Usage: utf8-check filename"
  exit 1
fi

chardet $1
countchars="$(tr -d \\000-\\177 < $1 | wc -c)"
if [ $countchars -eq 0 ]
then
 echo "Ascii";
 exit 0
fi

{
  iconv -f utf-8 -t ucs-4 < $1 >/dev/null
  echo "UTF-8"
} || {
  echo "not UTF-8 or corrupted"
} 
```

# griffon - 如何将图像显示为 griffon 应用程序的背景？

> ID：11018975
> 
> 赞同：0
> 
> 时间：2012-06-13T16:07:21.837
> 
> 标签：griffon

我正在尝试使用 CSSBuilder 插件，但它似乎不支持 CSS 背景图像属性。

我一直在谷歌搜索，似乎您可以通过子类化面板将背景图像添加到摆动面板。但我对 Swing 还很陌生，我不知道该怎么做。我想知道是否有更简单的方法可以使用 griffon 完成此操作。

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:07:30.980

这是一种可能的解决方案：

1.  安装javatips插件，即griffon install-plugin javatips
2.  使用 backgroundPanel() 节点

这是一个准系统示例

```
package sample
import javax.imageio.ImageIO

application(title: 'Sample',
    preferredSize: [320, 330],
     pack: true) {
     backgroundPanel(image: ImageIO.read(app.getResourceAsURL('griffon-icon-256x256.png')))
} 
```

# asp.net-mvc - MVC 剃须刀 @Item.ID

> ID：11018977
> 
> 赞同：2
> 
> 时间：2012-06-13T16:07:41.703
> 
> 标签：asp.net-mvc, razor

我有以下代码，其中包含来自 razor 的 @item.ID：

```
 <a href="#" id="deleteitem(@item.ID)">Delete</a> 
```

当我查看源代码时，它显示为 deleteitem(766)。请注意，我不希望它与 ( ) 一起出现。我喜欢它显示为 deleteitem766

如果我执行以下操作

```
 <a href="#" id="deleteitem@item.ID">Delete</a> 
```

它无法识别@item.ID 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T16:10:10.667

```
<a href="#" id="deleteitem@(item.ID)">Delete</a> 
```

# java - Camel：如何在 URI 中包含一个与号作为数据（不作为分隔符）？

> ID：11018987
> 
> 赞同：8
> 
> 时间：2012-06-13T16:07:58.593
> 
> 标签：java, apache-camel

（骆驼2.9.2）

非常简单的用例，但我似乎找不到答案。我的代码归结为：

```
String user = "user";
String password = "foo&bar";

String uri = "smtp://hostname:25?username=" + user +
    "&password=" + password + 
    "&to=somthing@something.com"; // etc. You get the idea

from("seda:queue:myqueue").to(uri); 
```

Camel 抛出 ResolveEndpointFailedException 并带有“未知参数=[{bar=null}]”。

如果我尝试“foo%26bar”，我会得到相同的结果。

如果我尝试“foo&bar”，骆驼会以“未知参数=[{amp;bar=null}]”响应。

我尝试使用 URISupport 创建 URI。它将 & 转义为 %26，然后我再次得到“Unknown parameters=[{bar=null}]”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-07T13:42:30.180

从 Camel 2.11 开始，您可以使用原始语法

例如：

`.to("ftp:joe@myftpserver.com?password=RAW(se+re?t&23)&binary=true"`

> 在上面的例子中，我们将密码值声明为 raw，而实际的密码将是键入的，例如 se+re?t&23

[https://cwiki.apache.org/confluence/display/CAMEL/How+do+I+configure+endpoints](https://cwiki.apache.org/confluence/display/CAMEL/How+do+I+configure+endpoints)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T04:11:46.993

You can specify the password as part of the authority of the uri, eg in the front. Also the & should be escaped to %26, but there was a bug in Camel that didnt parse the escaped value to well. Try 2.10 when its out.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-21T14:37:39.523

`RAW()`语法有效，但它是 Camel 专有的语法。在我们的用例中，它会在处理 URI 之后产生负担。

我们使用了替代解决方案：将组件配置为使用原始 URI ( `Component.useRawUri() == true`)。然后，组件参数只需编码一次 ( `foo%26bar`) 并通过 Camel 而不做任何更改。我认为这个解决方案更好，因为百分号编码是表达敏感字符的标准方式。

# c# - 我可以在不重绘每条曲线的情况下更改 Zedgraph 轴的格式吗？

> ID：11018993
> 
> 赞同：1
> 
> 时间：2012-06-13T16:08:35.877
> 
> 标签：c#, zedgraph

基本上，我的应用程序有一个 zedgraph 图，已经加载了一条曲线。

本质上（即在曲线点存储为 xy 对的数据库中），每个点的 x 值是一个双精度值，它表示从变量 DateTime 初始时间到该特定点经过的时间（以秒为单位），这可能是什么比如“2005 年 12 月 15 日下午 12:45:02”。

我让我的用户可以选择将 x 轴显示为“相对时间”（从初始时间开始经过的时间，这只是原始值）或“实际时间”（每个点的完整日期/时间）。目前，每次用户切换时间视图时，我都必须遍历曲线的 PointPairList 上的每个 PointPair，并将 x 值转换为原始值和 Zedgraphs XDate 格式。

还有其他方法可以更有效地做到这一点吗？我正在考虑只更改 zgc.GraphPane.XAxis.Scale.Format 以使其解释这种翻译，但找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:59:17.057

> 我在考虑只改变 zgc.GraphPane.XAxis.Scale.Format

你能改变下`zgc.GraphPane.XAxis.Scale.TextLabels`（这是一个字符串数组）的轴标签吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T07:58:50.167

你不只是像这样更新轴吗？

```
zedgraph.AxisChange(); 

this.Refresh(); 
```

# javascript - node-mysql 时序

> ID：11018998
> 
> 赞同：3
> 
> 时间：2012-06-13T16:08:52.110
> 
> 标签：javascript, mysql, node.js, timing, node-mysql

我有一个这样的递归查询（注意：这只是一个例子）：

```
var user = function(data)
{
  this.minions = [];
  this.loadMinions = function()
  {
    _user = this;
    database.query('select * from users where owner='+data.id,function(err,result,fields)
    {
      for(var m in result)
      {
        _user.minions[result[m].id] = new user(result[m]); 
        _user.minions[result[m].id].loadMinions();
      }
    }  
    console.log("loaded all minions");
  }
}
 currentUser = new user(ID);
 for (var m in currentUser.minions)
 {
   console.log("minion found!");
 } 
```

这不起作用，因为时间都是错误的，代码不等待查询。

我试过这样做：

```
var MyQuery = function(QueryString){
    var Data;
    var Done = false;
    database.query(QueryString, function(err, result, fields) { 
        Data = result;
        Done = true;
    });
    while(Done != true){};
    return Data;
}

var user = function(data)
{
  this.minions = [];
  this.loadMinions = function()
  {
    _user = this;
    result= MyQuery('select * from users where owner='+data.id);
    for(var m in result)
    {
      _user.minions[result[m].id] = new user(result[m]); 
      _user.minions[result[m].id].loadMinions();
    }
    console.log("loaded all minions");
  }
}
currentUser = new user(ID);
for (var m in currentUser.minions)
{
  console.log("minion found!");
} 
```

但他只是暂时冻结了，我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T16:26:36.300

每个 Node.js 进程都是单线程的，所以行

```
while(Done != true){}; 
```

接管线程，并且设置`Done`为 true 的回调永远不会运行，因为thead 在无限循环中被阻塞。

您需要重构您的程序，以便将依赖于查询结果的代码包含在回调本身中。例如，`MyQuery`使用回调参数：

```
MyQuery = function(QueryString, callback){ 
```

然后在回调结束时`database.query`调用回调 - 甚至将其作为*回调*`database.query`提供。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T16:53:24.873

解决问题的第一个障碍是理解 Node.js 中的 I/O 是异步的。一旦你知道这如何适用于你的问题，递归部分就会容易得多（尤其是如果你使用像 Async 或 Step 这样的流控制库）。

这是一个示例，可以执行您尝试执行的某些操作（减去递归）。就个人而言，我会避免递归加载可能未知数量/深度的记录；而是按需加载它们，如下例所示：

```
var User = function(data) {
    this.data = data
    this.minions;
};

User.prototype.getMinions = function(primaryCallback) {
    var that = this; // scope handle
    if(this.minions) { // bypass the db query if results cached
        return primaryCallback(null, this.minions);
    }

    // Callback invoked by database.query when it has the records
    var aCallback = function(error, results, fields) {
        if(error) {
            return primaryCallback(error);
        }

        // This is where you would put your recursive minion initialization
        // The problem you are going to have is callback counting, using a library
        // like async or step would make this party much much easier

        that.minions = results; // bypass the db query after this
        primaryCallback(null, results);
    }

    database.query('SELECT * FROM users WHERE owner = ' + data.id, aCallback);
};

var user = new User(someData);    
user.getMinions(function(error, minions) {
    if(error) {
        throw error;
    }

    // Inside the function invoked by primaryCallback(...)
    minions.forEach(function(minion) {
        console.log('found this minion:', minion);
    });
}); 
```

在这个例子中最需要注意的是回调。这`database.query(...)`是异步的，您不想占用事件循环等待它完成。这是通过向`aCallback`查询提供回调来解决的，该回调在结果准备好时执行。一旦该回调触发并且在您对记录执行任何您想要执行的处理之后，您就可以触发`primaryCallback`最终结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T16:28:04.653

不幸的是，冻结是正确的行为，因为 Node 是单线程的。

您需要一个调度程序包来解决这个问题。就个人而言，我一直在使用 Fibers-promise 来解决这类问题。您可能想查看这个或其他承诺库或异步