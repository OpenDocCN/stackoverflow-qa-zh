# StackOverflow 问答 10760000-10760999

# java - 重构大型 JSON 多次调用

> ID：10760005
> 
> 赞同：1
> 
> 时间：2012-05-25T19:01:15.910
> 
> 标签：java, jquery, json, spring

我正在编写 java/spring webapp，其中每个用户都可以拥有自己的单词列表。每次当用户添加/删除一个单词时，都会有一个 ajax 调用，它会发送一个带有这个单词的 JSON 来添加/删除，当服务器端完成时，会将 JSON 对象中的当前单词列表返回给 jQuery。

一切正常。对于小型 JSON 单词列表，添加和删除非常快，但是当单词列表变大时，ajax 调用会变慢。并且添加/删除呼叫将非常频繁。

JSON单词列表示例[波兰语]：

```
 [{"word":"abrys","wordId":646},{"word":"acpan","wordId":647},
 {"word":"akrania","wordId":457},{"word":"akwawita","wordId":648},
 {"word":"amalgamat","wordId":399},{"word":"amurski","wordId":465},
 {"word":"amurskie","wordId":1030},{"word":"ananke","wordId":649},
 {"word":"androlog","wordId":650}] 
```

jQuery [或多或少]：

```
$("#add_word_submit").live("click", function(e) {
    e.preventDefault();
    var word = $('#add_word').serializeObject();
    $.postJSON("word.html", word, function(words) {
        showDividedAccountWords(words);     
    });
});

$(".delete_button").live("click", function(e) {
    e.preventDefault();
    if(confirm(Main.confirmWordDelete)) {
        var wordId = $(this).attr("id").substring("delete_".length);
        wordName["word"] = $(this).children("img").attr("alt");
        $.ajax({
            type: "DELETE",
            url: "word/" + wordId + ".html",
            success: function(words) {
                showDividedAccountWords(words);
            }
        }); 
    }
}); 
```

Java/弹簧：

```
@RequestMapping(value="/word", method = RequestMethod.POST)
public @ResponseBody List<Word> addNewWord(@RequestBody Word word, Principal principal) {
    wordService.addNewWord(word, principal.getName());
    return getCurrentWords(principal.getName());
}

@RequestMapping(value="/word/{wordId}", method = RequestMethod.DELETE)
public @ResponseBody List<Word> deleteWord(@PathVariable Long wordId, Principal principal) {
    wordService.deleteWord(wordId, principal.getName());
    return getCurrentWords(principal.getName());
}

public List<Word> getCurrentWords(String username) {
    List<Word> accountWords = new ArrayList<Word>();
    accountWords.addAll(wordService.listUserWords(username));
    return accountWords;
} 
```

你能给我一些重构它的提示吗？也许每次用户添加/删除单词时我都不应该返回当前单词列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T00:06:49.967

要将单词对象增量添加到列表中，请将新单词传递给服务器并让它只返回一个 (word:wordid) 对象。然后，您可以将其添加到现有列表并按如下方式对其进行排序：

```
var words=[{"word":"abrys","wordId":646},{"word":"acpan","wordId":647},
 {"word":"akrania","wordId":457},{"word":"akwawita","wordId":648},
 {"word":"amalgamat","wordId":399},{"word":"amurski","wordId":465},
 {"word":"amurskie","wordId":1030},{"word":"ananke","wordId":649},
 { "word": "androlog", "wordId": 650}];

var result = { "word": "aklina", "wordid": "702" }; // returned by server from AJAX call
words.push(result); 

words.sort(
  function(a, b) {
    return a.word.localeCompare(b.word);
  }
 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:22:14.157

我会让 java/spring 处理信息，但只返回一个小字符串来查看数据传输是否存在延迟。如果java/spring处理数据没有本质区别，那么要么是在transfer，要么是jquery处理。您可以通过让 jQuery 在传输完成时向控制台发送警报来测试这一点。如果速度很快，那么它必须是 jQuery 处理较长的数据数据。

# windows - 从 Windows 获取 Rssi 值

> ID：10760006
> 
> 赞同：5
> 
> 时间：2012-05-25T19:01:26.993
> 
> 标签：windows, rssi

我想测量调制解调器的 rssi 值。是否有任何 api 来获取 Windows 的 rssi 值？我曾经在 android 中使用 Wifi.Manager 来做到这一点。但我找不到任何适用于 Windows 的 api

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:44:12.380

使用本机代码是最好的。您需要将 WlanQueryInterface() 与 wlan_intf_opcode_rssi 操作码一起使用，这将返回 RSSI 值作为 LONG 数据类型。从那里您可以将其转换为 dbm。

```
DWORD WINAPI WlanQueryInterface(
 __in        HANDLE hClientHandle,
 __in        const GUID *pInterfaceGuid,
 __in        WLAN_INTF_OPCODE OpCode,
 __reserved  PVOID pReserved,
 __out       PDWORD pdwDataSize,
 __out       PVOID *ppData,
 __out_opt   PWLAN_OPCODE_VALUE_TYPE pWlanOpcodeValueType
); 
```

在这里使用操作码 wlan_intf_opcode_rssi 您将获得 RSSI 值：

```
WLAN_INTF_OPCODE  >> wlan_intf_opcode_rssi >> LONG 
```

这是有关如何开始的 C++ 示例：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms706765(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706765(v=vs.85).aspx)

如果你想要 C# 试试这个： [How to get SSID and RSSI for Win7 using C#](https://stackoverflow.com/questions/2331570/how-to-get-ssid-and-rssi-for-win7-using-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-03T15:48:08.540

由于此问题出现在主页上以供审查 - 现有答案已过时。现在有一个[Managed Wifi API](https://archive.codeplex.com/?p=managedwifi)可用作[Windows Native Wifi API](https://docs.microsoft.com/en-us/windows/desktop/NativeWiFi/about-the-native-wifi-api)的包装器。

信号强度百分比和 RSSI 可以通过以下方式获得： Wlan.WlanAvailableNetwork[] networks = wlanIface.GetAvailableNetworkList(0);

```
Wlan.WlanBssEntry[] redes = wlanIface.GetNetworkBssList(); //Get the atribute that you need

foreach (Wlan.WlanBssEntry network in redes)
{
    Console.Write("Network SSID {0} RSSI {1}\n ", GetStringForSSID(network.dot11Ssid),
 network.rssi);
 } 
```

# android - 按钮超出布局时被挤压

> ID：10760011
> 
> 赞同：2
> 
> 时间：2012-05-25T19:01:38.330
> 
> 标签：android, android-layout, android-button

在我的代码中，我动态地创建按钮。当我创建多个按钮时，出现以下问题：

![在此处输入图像描述](../Images/b00f918fd45d83970b7f230ffc951ccd.png)

当按钮被放下时我如何得到它？

我的代码：

```
 private void showGlossary(String ContentTab) {
    LinearLayout layout;
    LinearLayout.LayoutParams p;
        layout = (LinearLayout) findViewById(R.id.GlossaryTab1);

        p = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.WRAP_CONTENT, 
                LinearLayout.LayoutParams.FILL_PARENT
        );

        Glossary = (TextView) findViewById(R.id.glossary);

    Glossary.setText("Glossário:");
    while (ContentTab.indexOf("<gloss") != -1) {
        ContentTab = ContentTab.substring(ContentTab.indexOf("<gloss"));
        uri = ContentTab.substring(ContentTab.indexOf("<gloss") + 1, ContentTab.indexOf(">"));
        Button myButton = new Button(this);
        myButton.setText(Html.fromHtml(ContentTab.substring(ContentTab.indexOf(">") + 1, ContentTab.indexOf("</gloss>"))));
        myButton.setLayoutParams(p);
        myButton.setContentDescription(uri);
        layout.addView(myButton);
        myButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view)
            {
                Toast.makeText(ShowPhytoterapicActivity.this, Html.fromHtml(getGlossaryItem(view.getContentDescription().toString())), Toast.LENGTH_LONG).show();
            }
            });
        if(ContentTab.indexOf("</gloss>") != -1)
        ContentTab = ContentTab.substring(ContentTab.indexOf("</gloss>") + 9);
    }
} 
```

我的 XML：

```
 <LinearLayout 
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:id="@+id/GlossaryTab1"
            android:orientation="horizontal"
            >
            </LinearLayout> 
```

谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:37:17.377

您可以将所有按钮的权重设置为 1，但这会导致您的所有按钮变为“压扁”。

你认为a `HorizontalScrollField`会起作用吗？我认为这可能是最好的解决方案。

只需将您的按钮包装`LinearLayout`在 a 中`HorizontalScrollField`并将您的按钮添加到`LinearLayout`您现在的状态即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T21:15:02.893

在一行中安装 3 个按钮似乎有点乱。您可以尝试不同的布局样式，也许是三角形设置，或者将您的 UI 设计更改为更紧凑的内容并更改按钮的显示方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:53:38.547

我也做了`LinearLayout Vertical`一个，谢谢大家的回答。:)

# facebook-graph-api - music.listen 返回一个空数组

> ID：10760014
> 
> 赞同：2
> 
> 时间：2012-05-25T19:01:44.337
> 
> 标签：facebook-graph-api, spotify

我正在开发一个 Spotify 应用内应用程序。

我想知道我的朋友在听什么。我目前正在使用**music.listen** open graph api，但它为大多数用户返回一个空数据。

我注册了一个新的 Facebook 帐户，然后使用新帐户登录了 Spotify。我点击了一首歌然后退出。

然后我切换回原来的帐户，然后我得到新的 facebook 帐户的数据（这是我原来帐户的朋友）

所以我的猜测是 music.listen 仅适用于新用户（或最近注册的用户）？

这是真的？

更新：

这对我有用

1.  我在第二台电脑上注册了一个新的 Facebook 帐户
2.  安装 Spotify 应用程序，然后使用新的 facebook 帐户登录。
3.  Spotify 提示了一条消息，我点击了继续
4.  我点了一首歌曲并将其分享到 Facebook。

5.  在我的主计算机上，我使用不同的 facebook（新 facebook 帐户的朋友）登录了 Spotify，然后访问了我的应用程序。我的应用程序获取了我的新 Facebook 帐户收听的歌曲列表。

在使用我的新 Facebook 时，我没有看到权限框。

所以我的问题是......为什么一个新的 facebook 可以工作，而不是现有的帐户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T19:11:17.707

你确定有正确的权限吗？您需要`user_actions.music`或`friends_actions.music`权限才能读取用户的音乐活动列表

有关更多信息，请参阅[https://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)和 [https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)

见[https://developers.facebook.com/docs/authentication/permissions/#open_graph_perms](https://developers.facebook.com/docs/authentication/permissions/#open_graph_perms)专门用于音乐

然后可以在 /USER_ID/music.listens 访问它

您是否还确定您正在检查的用户实际使用其中一个社交音乐应用程序，并且您可以看到他们在该应用程序中的活动？

# python - 在python中打印列表输出的最佳方法

> ID：10760019
> 
> 赞同：4
> 
> 时间：2012-05-25T19:02:12.650
> 
> 标签：python, list

我有一个`list`和一个`list of list`这样的

```
>>> list2 = [["1","2","3","4"],["5","6","7","8"],["9","10","11","12"]]
>>> list1 = ["a","b","c"] 
```

我压缩了以上两个列表，以便我可以按索引匹配它们的值索引。

```
>>> mylist = zip(list1,list2)
>>> mylist
[('a', ['1', '2', '3', '4']), ('b', ['5', '6', '7', '8']), ('c', ['9', '10', '11', '12'])] 
```

现在我尝试使用打印上面的`mylist`输出

```
>>> for item in mylist:
...     print item[0]
...     print "---".join(item[1])
... 
```

它导致了这个输出，这是我的`desired output`.

```
a
1---2---3---4
b
5---6---7---8
c
9---10---11---12 
```

现在，我的问题是有更多的`cleaner and better`方法来实现我想要的输出，或者这是`best(short and more readable)`可能的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T19:05:09.560

好吧，您可以避免一些临时变量并使用更好的循环：

```
for label, vals in zip(list1, list2):
    print label
    print '---'.join(vals) 
```

不过，我认为您不会从根本上得到任何“更好”的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T19:07:27.827

下面的`for`循环会将打印和连接操作合并到一行中。

```
 for item in zip(list1,list2):
     print '{0}\n{1}'.format(item[0],'---'.join(item[1])) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T19:11:15.893

它可能不像完整的循环解决方案那样可读，但以下内容仍然可读且更短：

```
>>> zipped = zip(list1, list2) 
>>> print '\n'.join(label + '\n' + '---'.join(vals) for label, vals in zipped)
a
1---2---3---4
b
5---6---7---8
c
9---10---11---12 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T19:19:16.103

这是实现结果的另一种方法。它更短，但我不确定它是否更具可读性：

```
print '\n'.join([x1 + '\n' + '---'.join(x2) for x1,x2 in zip(list1,list2)]) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-25T19:50:45.393

您可能认为干净但我不认为是您的程序的其余部分现在需要数据的结构以及如何打印它。恕我直言，应该包含在数据类中，因此您可以做到`print mylist`并获得所需的结果。

如果您将其与 mgilson 的建议结合使用字典（我什至建议使用 OrderedDict），我会这样做：

```
from collections import OrderedDict

class MyList(list):
    def __init__(self, *args):
        list.__init__(self, list(args))

    def __str__(self):
        return '---'.join(self)

class MyDict(OrderedDict):
    def __str__(self):
        ret_val = []
        for k, v in self.iteritems():
            ret_val.extend((k, str(v)))
        return '\n'.join(ret_val)

mydata = MyDict([
    ('a', MyList("1","2","3","4")),
    ('b', MyList("5","6","7","8")),
    ('c', MyList("9","10","11","12")),
])

print mydata 
```

不需要程序的其余部分需要知道打印此数据的详细信息。

# jquery - 所见即所得 + html5 图像复制粘贴？

> ID：10760020
> 
> 赞同：0
> 
> 时间：2012-05-25T19:02:14.780
> 
> 标签：jquery, html, wysiwyg

哪个开源所见即所得编辑器允许通过将图像从剪贴板（如 gmail）复制粘贴到文本区域来将图像上传到服务器的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:36:36.160

您可以[将此插件](http://cksource.com/forums/viewtopic.php?f=18&t=23646)与[CKEditor](http://ckeditor.com)一起使用。

# git - 了解 Gitosis 用户 repo 访问

> ID：10760021
> 
> 赞同：2
> 
> 时间：2012-05-25T19:02:34.523
> 
> 标签：git, ubuntu, ssh, gitosis

我已经设置`git`并`gitosis`在我的 Ubuntu v-server 上。在服务器上创建新存储库，签出`gitosis-admin.git`并推送更改的 conf 和新密钥（`otheruser.pub`例如）工作正常。该`authorized_keys`文件也得到更新。但现在我卡住了。

如果我尝试将现有的（语言环境机器）存储库推送到`myserver.com`具有不同用户的裸存储库，则“ `git`”它不起作用。

示例（SSH）：

```
git@myserver.com:/my/path/to/xyzrepo.git 
```

有效，但是

```
otheruser@myserver.com:/my/path/to/xyzrepo.git 
```

不...

我假设 gitosis 在机器上创建临时用户或类似的东西。那是对的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:14:54.817

与`gitosis`您始终使用相同的用户 ID ( `git`@...)。您由您使用的 ssh 密钥标识。您会注意到[GitHub](http://github.com/)和[Gitorious](http://gitorious.com/)等商业 Git 托管服务的工作方式相同。

我想强调一下 djs 的评论：您应该无法`git`使用密码登录用户帐户。Gitosis 依赖于 ssh`authorized_keys`文件来正确运行，这仅在有人使用 ssh 密钥进行身份验证时使用。

# php - 提交后在下拉列表中显示所选值

> ID：10760024
> 
> 赞同：1
> 
> 时间：2012-05-25T19:02:48.187
> 
> 标签：php, mysql, validation, submit

嗨，伙计们，我在表单中添加了下拉字段，但是在我提交表单后，如果有任何错误，下拉菜单会自行重置，如何在验证后保持价值，非常感谢您的帮助和想法这是我的代码

```
<td><select id="country" name="country"  style="width:150px;">
         <option value="-1">Select</option>
     <?php
$query = "SELECT country_id, name FROM countries ";
$result = mysql_query($query);
while($row = mysql_fetch_array($result))
{
  echo "<option value=\"".$row['country_id']."\" >".$row['name']."</option>\n  ";
}
?>
</select></td>
<td><?php echo $form->error("country"); ?></td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:06:08.003

通常，您将使用与`selected`当前选定值相关联的属性设置默认选项。所以在这种情况下，选项等于 的值`$_POST['country']`：

```
while ($row = mysql_fetch_array($result))
{
    if ($row['country_id'] == $_POST['country'])
        $selected = "selected=\"selected\"";
    else
        $selected = "";
    echo "<option value=\"".$row['country_id']."\" $selected>".$row['name']."</option>\n ";
} 
```

这将在适当的选项上呈现如下：

```
<option value="123" selected="selected">456</option> 
```

# svn - 减少 .lock 文件 svn co 创建的数量？

> ID：10760026
> 
> 赞同：0
> 
> 时间：2012-05-25T19:03:15.493
> 
> 标签：svn, ext3

我正在对包含大约 9K 目录的目录进行 Subversion 更新。存储它的文件系统有刚刚超过 4K 的空闲 inode。我看到运行 svn 更新的问题，因为系统用完了 svnclient 创建的 .lock 文件的 inode：

```
user@host [cwd]$ svn update
svn: Can't open file 'baddir/.svn/lock': No space left on device
user@host [cwd]$ ls -1 | wc -l
8934
user@host [cwd]$ df -h .
Filesystem            Size  Used Avail Use% Mounted on
/dev/mapper/vg00-lvol5
                      2.9G  958M  1.8G  35% /opt
user@host [cwd]$ df -hi .
Filesystem            Inodes   IUsed   IFree IUse% Mounted on
/dev/mapper/vg00-lvol5
                        186K    182K    4.3K   98% /opt
user@host [cwd]$ ls -1 | grep -n . | grep baddir
2714:baddir 
```

是的，已经消毒了。:) 似乎正在发生的是 svn 创建了一堆 .lock 文件。我认为问题在于取消链接的速度不够快，因为如果我使用 strace ( `strace -o /tmp/deleteme svn update`) 减慢操作速度，则更新会在其他目录上失败。如果没有减慢的 strace，它每次都发生在完全相同的目录上。

现在调整这个文件系统的大小会很不方便（它必须是 ext3 和这个大小，暂时），由于 ext3s 不足，我无法添加 inode。有没有办法让 svn 创建更少的 .lock 文件，或者使用操作系统提供的*不需要*创建额外文件的实际文件锁定功能？我知道flock 在NFS3 等上不起作用——但我不检查NFS。或者，是否有一些 ext3 可调参数可以用来加速断开链接？

有什么聪明的解决方法吗？它可以运行“svn update ./*”，但这需要*永远*。比如，几十分钟。我猜想创建 9K SSL 连接比创建一个慢。:)

# android - 我的服务器如何使用他们的 Google 帐户对 Android 用户进行身份验证？

> ID：10760029
> 
> 赞同：1
> 
> 时间：2012-05-25T19:03:22.813
> 
> 标签：android, authentication, android-c2dm, google-cloud-messaging

我正在构建一个 Android 应用程序作为客户端/服务器架构的一部分，我的服务器将为 Android 客户端提供服务。该服务器不会与任何 Google 服务器通信，但需要通过用户的 gmail 帐户对用户进行身份验证。也就是说，服务器需要确保来自电话的 http(s) 请求确实来自具有该特定 gmail 帐户的人。

我正在研究 Android 的 C2DM 框架，我当然可以使用它来来回传递与服务相关的数据，但是如何在 Android 手机和第三方（非 Google）服务器之间使用 Google 帐户身份验证？

Oath2.0 会为此工作，还是 Oath2.0 仅用于手机和 Google 服务之间的直接身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:26:46.693

您没有提到您将在服务器中使用哪种语言代码。

使用 C2DM 的更简单方法是在 Google App Engine 内部，它提供了对 Android 与 C2DM 集成的原生支持。

如果不是这种情况（例如：您在自己的服务器中使用 php），我会看看[AccountManager](http://developer.android.com/reference/android/accounts/AccountManager.html)，它可以为您提供身份验证令牌（应用用户必须允许它）。

向您的 C2DM 服务器注册新设备时，您还需要设备与令牌进行通信，这样您就可以通过服务器和 Google 服务器之间的连接了解用户是否真的是该 gmail 帐户的所有者。

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T12:49:10.777

我想你现在一定已经得到了你的问题的答案。但我仍然会回答这个问题，以帮助其他有兴趣实现类似目标的用户。

因此，要使用 google 帐户访问令牌对您的应用用户进行身份验证和授权，您必须按照以下步骤操作。

1.  在 Google Cloud Console 中创建一个包含两个组件的项目（通过单击左侧窗格上的“APIs $ Auth >Credentials”选项创建组件）。第一个组件将是您的 Web 组件（例如 Web 服务），第二个组件是您的 android 应用程序。
2.  尝试通过传递当前上下文、电子邮件 id（使用帐户管理器查询）和范围为（“audience:server:client_id:”）来执行 GoogleAuthUtil.getToken() 方法，通过在 android 应用程序中查询帐户管理器来获取访问令牌。
3.  在 Google Cloud Console 上创建的项目下可用的 Web 组件的“客户端 ID”参数在哪里。
4.  该方法将返回编码为 JSON Web 令牌或 JWT 的 ID 令牌。
5.  此 ID 令牌是应用程序在服务器上对用户进行身份验证所需的一切。
6.  ID 令牌由以下参数组成

问题：总是accounts.google.com

aud：项目的web组件的客户端ID

azp：项目的Android应用组件的客户端ID

电子邮件：标识请求令牌的用户的电子邮件，以及其他一些字段。

1.  通过 https（强制）将此令牌传递给您的 Web 组件（例如 Web 服务），其中 Web 组件和 Android 组件客户端 ID 已经存储。

2.  在服务器上解码接收到的 JWT ID 令牌后，检查令牌的“aud”参数和存储的 Web 组件客户端 ID 是否相等，从而对用户进行身份验证。

3.  可以通过读取 JWT ID 令牌的 email 参数来获取用户身份，该参数指定在执行 GoogleAuthUtil.getToken() 方法时提供的用于访问 android 应用程序中的 Id 令牌的电子邮件 ID。

注意：android 上的 ID 令牌只能通过执行 GoogleAuthUtil.getToken() 来获取，前提是它是由在 Google Cloud Console 上的项目下创建 android 组件时指定的相同证书所指定的相同应用程序。

更多信息可以在“ [https://developers.google.com/accounts/docs/CrossClientAuth](https://developers.google.com/accounts/docs/CrossClientAuth) ”上找到

# uiview - UIView 添加子视图间隙

> ID：10760033
> 
> 赞同：0
> 
> 时间：2012-05-25T19:03:32.343
> 
> 标签：uiview, uiimageview, gaps-in-visuals

我知道这可能是一个愚蠢的问题。但我正在 xcode 3、ios 5 中设计一个单视图应用程序。以编程方式添加子视图和图像视图以占据整个屏幕。但它在屏幕上我的视图底部显示了一个小间隙。不知道为什么。这是代码。有什么建议吗？

```
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
homeView =[[UIView alloc] initWithFrame:self.view.frame];
UIImageView *backImage= [[UIImageView alloc] initWithFrame:self.view.frame];
backImage.image=[UIImage imageNamed:@"bg.png"];
[homeView addSubview:backImage];
[self.view addSubview:homeView]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:30:15.950

差距是由于我使用的图像中的一些透明像素造成的。代码没有任何问题。已解决。谢谢

# asp.net-mvc - MVC 模型绑定到集合不以 0 索引开头的集合

> ID：10760035
> 
> 赞同：14
> 
> 时间：2012-05-25T19:03:38.720
> 
> 标签：asp.net-mvc, asp.net-mvc-3, validation, model-binding

我正在尝试对集合中项目的属性执行远程验证。验证适用于集合的第一项。验证方法的 http 请求如下所示：

```
/Validation/IsImeiAvailable?ImeiGadgets[0].ImeiNumber=123456789012345 
```

但是，在 url 如下所示的第二个项目中，验证不起作用

```
/Validation/IsImeiAvailable?ImeiGadgets[1].ImeiNumber=123456789012345 
```

现在我很确定这样做的原因是绑定不会在不以零索引开头的集合上工作。

我的验证方法具有如下签名：

```
public JsonResult IsImeiAvailable([Bind(Prefix = "ImeiGadgets")] Models.ViewModels.ImeiGadget[] imeiGadget) 
```

因为我在集合中传递一个项目，所以我必须像这样绑定，但我真正传递的只是一个值。

除了将它绑定为普通的旧查询字符串之外，我是否可以处理这个问题。

谢谢

编辑：这是获取 Imei 变量的快速修复，但我宁愿使用模型绑定：

```
string imeiNumber = Request.Url.AbsoluteUri.Substring(Request.Url.AbsoluteUri.IndexOf("=")+1); 
```

编辑：这是我的 ImeiGadget 课程：

```
public class ImeiGadget
{
    public int Id { get; set; }

    [Remote("IsImeiAvailable", "Validation")]
    [Required(ErrorMessage = "Please provide the IMEI Number for your Phone")]
    [RegularExpression(@"(\D*\d){15,17}", ErrorMessage = "An IMEI number must contain between 15 & 17 digits")]
    public string ImeiNumber { get; set; }
    public string Make { get; set; }
    public string Model { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T14:53:01.273

您可以编写自定义模型绑定器：

```
public class ImeiNumberModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var modelName = bindingContext.ModelName;
        var request = controllerContext.HttpContext.Request;
        var paramName = request
            .Params
            .Keys
            .Cast<string>()
            .FirstOrDefault(
                x => x.EndsWith(modelName, StringComparison.OrdinalIgnoreCase)
            );

        if (!string.IsNullOrEmpty(paramName))
        {
            return bindingContext
                .ValueProvider
                .GetValue(request[paramName])
                .AttemptedValue;
        }

        return null;
    }
} 
```

然后将其应用于控制器操作：

```
public ActionResult IsImeiAvailable(
    [ModelBinder(typeof(ImeiNumberModelBinder))] string imeiNumber
)
{
    return Json(!string.IsNullOrEmpty(imeiNumber), JsonRequestBehavior.AllowGet);
} 
```

现在该`ImeiGadgets[xxx]`部分将从查询字符串中被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:33:09.547

如果您将单个值发送到服务器进行验证，那么您的 Action Method 应该只接受一个标量（单值）参数，而不是一个集合。然后您的 URL 将如下所示（假设 {controller}/{action}/{id} 的默认路由表：

```
/Validation/IsImeiAvailable?ImeiNumber=123456789012345 
```

相应的操作方法签名可能如下所示：

```
/* note that the param name has to matchthe prop name being validated */
public ActionResult IsImeiAvailable(int ImeiNumber) 
```

编辑：然后您可以使用它来查找该特定 ID 是否可用。

如果要更改参数的名称，可以修改路由表，但这是另一个主题。

长话短说，如果您想验证 的*集合*，`ImeiGadget`您将获取或发布该完整集合。对于单个值，发送或期望整个集合没有多大意义。

更新：根据新信息，我会查看远程验证属性的放置位置。*听起来*它可能被放置在类似的东西上`IEnumerable<IMEiGadgets>`，像这样：

```
[Remote("IsImeiAvailable", "Validation", "'ImeiNumber' is invalid"]
public IEnumerable<ImeiGadget> ImeiGadgets { get; set;} 
```

是否可以移动该属性并将其修改为在`ImeiGadget`类上，而不是像这样？

```
[Remote("IsImeiAvailable", "Validation", "'ImeiNumber is invalid"]
public int ImeiNumber { get; set;} 
```

从理论上讲，如果您还进行了我上面回答中建议的更改，则无需更改 HTML 模板或脚本上的任何内容即可使其正常工作。理论上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T14:11:59.910

如果您发布整个集合，但有一个非顺序索引，您可以考虑绑定到字典而不是 [http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

如果您只发布单个项目或使用 GET 链接，那么您应该修改为

```
/Validation/IsImeiAvailable?ImeiNumber=123456789012345 
```

和

```
public JsonResult IsImeiAvailable(string imeiNumber) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T06:15:41.640

除非您在**许多地方**都需要此绑定功能并且您可以控制`IsImeiAvailable`验证方法，否则*我认为*创建*自定义模型绑定器*是一种**开销**。

你为什么不尝试这样一个简单的解决方案，

```
// need little optimization?
public JsonResult IsImeiAvailable(string imeiNumber)
{
  var qParam = Request.QueryString.Keys
     .Cast<string>().FirstOrDefault(a => a.EndsWith("ImeiNumber"));

  return Json(!string.IsNullOrEmpty(imeiNumber ?? Request.QueryString[qParam]), JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-27T08:11:14.250

*您可以添加一个带有.Index*后缀的额外隐藏字段以允许任意索引。

**看法：**

```
<form method="post" action="/Home/Create">
    <input type="hidden" name="products.Index" value="cold" />
    <input type="text" name="products[cold].Name" value="Beer" />
    <input type="text" name="products[cold].Price" value="7.32" />

    <input type="hidden" name="products.Index" value="123" />
    <input type="text" name="products[123].Name" value="Chips" />
    <input type="text" name="products[123].Price" value="2.23" />

    <input type="hidden" name="products.Index" value="caliente" />
    <input type="text" name="products[caliente].Name" value="Salsa" />
    <input type="text" name="products[caliente].Price" value="1.23" />

    <input type="submit" />
</form> 
```

**模型：**

```
public class Product{
    public string Name{get; set;}
    public decimal Price{get; set;}
} 
```

**控制器：**

```
public ActionResult Create(Product[] Products)
{
    //do something..
} 
```

有关更多信息，请参阅：[您已被黑客攻击：模型绑定到列表](https://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx/)

# ios - 使用推文创建 NSDictionary 时“将无法识别的选择器发送到实例”

> ID：10760037
> 
> 赞同：3
> 
> 时间：2012-05-25T19:03:56.940
> 
> 标签：ios, twitter, unrecognized-selector

我正在 Twitter 上搜索带有此代码的推文：

```
- (void)fetchTweets
{

NSURL *url = [NSURL URLWithString:@"http://search.twitter.com/search.json"];
NSDictionary *params = [NSDictionary dictionaryWithObject:@"#winning" forKey:@"q"];

TWRequest *request = [[TWRequest alloc] initWithURL:url 
                                         parameters:params 
                                      requestMethod:TWRequestMethodGET];

[request performRequestWithHandler:
 ^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {

     if (responseData) {
         NSError *jsonError;
         tweets = 
         [NSJSONSerialization JSONObjectWithData:responseData 
                                         options:kNilOptions
                                           error:&jsonError];

         if (tweets) {
            // NSLog(@"%@", tweets);
         } 

         else { 
             NSLog(@"%@", jsonError);
         }

     }

     [[self delegate] receivedTweets];

 }];

[self performSelector:@selector(fetchTweets) withObject:nil afterDelay:30]; 
```

tweets 变量是一个 NSArray，我正在尝试使用以下代码将其放入 NSDictionary：

```
NSDictionary *tweet = [[TwitterHandler sharedInstance].tweets objectAtIndex:indexPath.row]; 
```

我肯定会得到推文的 JSON 文本，但是当我尝试将它们添加到字典中以便最终将它们放入表中时，我收到“无法识别的选择器发送到实例”错误。

我不知道为什么我会得到这个，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:11:59.480

在这段代码中：

```
 if (responseData) {
         NSError *jsonError;
         tweets = 
         [NSJSONSerialization JSONObjectWithData:responseData 
                                         options:kNilOptions
                                           error:&jsonError];

         if (tweets) {
            // NSLog(@"%@", tweets);
         } 

         else { 
             NSLog(@"%@", jsonError);
         } 
```

与您`tweets`使用此代码获得的相同：

```
[[TwitterHandler sharedInstance].tweets 
```

如果是这样，在我看来，您将其分配给 au autoreleased 对象，因此它最终将被释放，并且您最终将获得指向已释放对象的指针。

分配时最好保留它或使用保留属性。

就像是

```
tweets = 
         [[NSJSONSerialization JSONObjectWithData:responseData 
                                         options:kNilOptions
                                           error:&jsonError] retain]; 
```

或者，假设这`tweets`是一个保留 orpperty：

```
self.tweets = 
         [NSJSONSerialization JSONObjectWithData:responseData 
                                         options:kNilOptions
                                           error:&jsonError]; 
```

不要忘记在不再需要它时释放它（至少在`dealloc`您的班级中）

**编辑**

好的，事情就是这样，它与内存管理无关（最初的猜测是错误的！）：我尝试了你的 URL，它返回：

```
{"error":"You must enter a query."} 
```

这是一个JSON字典。然后 JSON Parser 将其识别为字典并返回一个字典。您可以将它存储在 NSArray* 中，但实例化的对象仍然是字典，并且只会响应 NSDictionary 方法。正如您在打印时评论显示的那样，它会打印字典。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:06:23.367

我曾经有过这个，它是应用程序释放视图控制器，检查你的视图控制器是否被释放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T16:18:32.863

```
[NSJSONSerialization JSONObjectWithData:responseData 
                                options:kNilOptions
                                  error:&jsonError]; 
```

这将返回推文的 NSDictionary 对象。通过查找 key 中的内容，可以过滤掉来自该 URL 的 Twitter 搜索结果`results`。

又名：

```
NSDictionary *jsonTweet = [NSJSONSerialization JSONObjectWithData:responseData 
                                                          options:kNilOptions
                                                          error:&jsonError];

NSArray *tweet = [jsonTweet objectForKey:@"results"]; 
```

然后可以迭代推文，因为它们在 NSArray 中。

# java - 404 错误：“请求的资源 /Controller 不可用”

> ID：10760047
> 
> 赞同：0
> 
> 时间：2012-05-25T19:04:55.990
> 
> 标签：java, spring, tomcat, spring-mvc, http-status-code-404

我已经在 Apache Tomcat 上设置了 Spring MVC 3.0 和 Hibernate，并让应用程序在没有任何错误的情况下启动。

但是，我可以将请求从我的（欢迎文件）路由`redirect.jsp`到家庭控制器（`/Home`）。

* * *

这是应该发生的：

1.  欢迎文件`redirect.jsp`使用发送请求`<%response.sendRedirect(/Home)%>`

2.  我的家庭控制器 ( `/home`) 返回`index`位于`WEB-INF/views`

* * *

> 这是我的：我通过注释`web.xml`映射了家庭控制器（ ），但是仍然没有找到它。`/Home``web.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>app</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>app</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>Home</servlet-name>
        <servlet-class>com.app.controller.spring.HomeController</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Home</servlet-name>
        <url-pattern>/Home</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>redirect.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

* * *

这是我`application-context.xml`的片段：

```
<!--bean id="propertyConfigurer"
      class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
      p:location="/WEB-INF/jdbc.properties" />-->

<!-- Activates various annotations to be detected in bean classes --> 
<context:annotation-config />
<!-- Scans the classpath for annotated components that will be auto-registered as Spring beans.   For example @Controller and @Service. Make sure to set the correct base-package--> 
<context:component-scan base-package="com.yourmarketnet.mvc" />    
<!-- Configures the annotation-driven Spring MVC Controller programming model.  Note that, with Spring 3.0, this tag works in Servlet MVC only!  --> 
<mvc:annotation-driven />      
<!-- mapping of static resources-->
<mvc:resources mapping="/resources/**" location="/resources/" />
<import resource="hibernate-context.xml" / 
```

>

* * *

这是我的`app-servlet`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/>

    <!--
    Most controllers will use the ControllerClassNameHandlerMapping above, but
    for the index controller we are using ParameterizableViewController, so we must
    define an explicit mapping for it.
    -->
    <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="mappings">
            <props>
                <prop key="index.htm">indexController</prop>
            </props>
        </property>
    </bean>

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"     
        p:prefix="/WEB-INF/views/" p:suffix=".jsp" p:viewClass="org.springframework.web.servlet.view.JstlView" />
    <!--
    The index controller.
    -->
    <bean name="indexController"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          p:viewName="index" />

</beans> 
```

但是我遇到了`404`错误，

> 请求的资源 ( `/Home`) 不可用。

* * *

我实际上想做的是删除`redirect.jsp`，让应用程序转到`\Home`控制器上`launch/startup`，然后`\Home`控制器返回索引视图或任何其他视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:24:49.173

我注意到的第一件事是，在您的 web.xml 中，您调用了您的配置 location `applicationContext.xml`，但您后来将其描述为`application-context.xml`. 确保它实际上被命名为`applicationContext.xml`. 此外，您可以从 web.xml 中删除“Home”servlet；这将由 Spring 通过您的 dispatcherServlet 处理。最后，在您的 中`SimpleUrlHandlerMapping`，您将映射定义为`index.html`，但您还需要定义`Home`是否希望`Home`由 处理请求`indexController`。希望有帮助。

# objective-c - iSpeech API 弹出窗口

> ID：10760048
> 
> 赞同：1
> 
> 时间：2012-05-25T19:05:00.230
> 
> 标签：objective-c, ios, popupwindow, ispeech

我不知道如何使用 iSpeech API。我使用 TTS 并且 API 实际上会说话，但我想知道如何摆脱在进行语音合成时出现的弹出框，因为在此过程中我需要其他 UI 工作。我在网上读到您需要使用 REST API，但移动设备不支持。我需要一种隐藏对话框的方法。你能帮忙的话，我会很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:14:18.647

干得好。需要您自担风险使用它。

```
-(void) removeISpeechPopups
{
    NSArray *windows = [[UIApplication sharedApplication] windows];

    for (UIWindow *window in windows)
    {
        if ([NSStringFromClass([window class]) isEqualToString:@"ISPopupBackgroundView"])
        {
            // NOTE: Morally, I wouldn't do this. Simply for development, 
            // this is fine, but don't put this in a real application, 
            // as it takes away from iSpeech's revenue at the end of the day.
            [window setHidden:YES];
        }
    }
} 
```

# android - 如何在 Eclipse 中自动增加 Android 项目的构建号（首选便携式解决方案）

> ID：10760052
> 
> 赞同：5
> 
> 时间：2012-05-25T19:05:22.510
> 
> 标签：android, eclipse

让 IDE 自动增加内部版本号是一个长期讨论的问题 - 我总是很惊讶，（对我而言）看起来如此基本的东西却有如此多的工作。

这个主题得分最高的问题和答案（相当多）在这里： [https](https://stackoverflow.com/a/8156809/150016) ://stackoverflow.com/a/8156809/150016 我的问题是解决方案取决于.net，我宁愿避免使用 . Eclipse 解决方案的网络依赖。我还想避免对 VCS 的任何依赖。

因此，我正在寻找一种可移植且“Eclipse-ish”的解决方案。我认为最好的候选人是 Ant 解决方案（我将发布）或类似于上面链接答案中的 dotNet 应用程序的 Java 应用程序。

（我没有添加我对该问题的答案，因为它有一个已被接受的答案并且已经是一个很长的帖子。如果版主愿意，我将删除这个问题并将我的答案添加到上面的问题中。）

我希望有一些相对简单的东西，但我认为这个问题的任何解决方案都不是很简单。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T19:32:06.937

在项目的属性对话框中，在 Builders 下，您可以配置脚本以在构建 apk 之前运行。

在属性对话框中，从左侧的列表中选择 Builders。单击新建以添加新脚本。在弹出的对话框中，选择程序。在随后的对话框中，在 Name 字段中调用您喜欢的 Builder Program。将脚本的路径放在位置字段中。在工作目录字段中给它一个工作目录。请注意，您可以在这些字段中指定变量（例如，我们`${build_project:/libs/update_version.sh}`用来引用项目 lib 目录中的脚本）。

您会希望它在任何其他构建器之前运行，因此使用向上按钮将其移动到列表顶部。

在 Dialog 的 Build Options 选项卡上（位于顶部的 Name 字段下方），您可以选择希望该程序何时运行的选项。

我假设这里有 Linux、Unix 或 MacOS 之类的东西。在这些系统中，您可以使用 grep 或其变体来获取当前版本代码，将其递增，然后使用 awk 或类似方法来相应地修改文件。或者，您可以编写一个 Ruby、Python、Perl 等脚本来替换 AndroidManifest.xml 文件中的 versionCode。我想在 Windows 上有等效的工具，但我对那个环境不是很熟悉。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-25T20:09:03.930

您是否尝试过“Maven-ise”您的 android 项目构建？

如果你使用["maven-android-plugin"](http://code.google.com/p/maven-android-plugin/)，你可以使用 pom.xml 的 "version" 标签来跟踪你的项目构建。

在 pom.xml 中，您可以使用[“versions-maven-plugin”增加构建版本](http://code.google.com/p/autoincrement-versions-maven-plugin/)

要将增加的内部版本号反映到您的 AndroidManifest.xml 中，您可以在 pom 文件中使用[同步版本技术。](http://code.google.com/p/maven-android-plugin/wiki/SynchronisingVersionWithGmaven)

这样，您可以通过在每次构建应用程序时运行“versions-maven-plugin”来自动增加 android 项目构建号。与 Ant 解决方案一样，该解决方案也是可移植的。

我希望这也可以解决您提到的问题（以及我所理解的）。如果缺少某些内容，请纠正我。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T19:40:05.803

这是一个使用 Ant 的解决方案。我必须承认，设置 Ant 有点麻烦，但它似乎是 Eclipse 的一个广泛使用且功能强大的附件，所以我相信它在其他方面对我来说会很有价值。

Ant 是在不使用 Eclipse 的情况下构建 Android SDK 应用程序的首选解决方案（如此[处所述](http://developer.android.com/guide/developing/building/index.html)），但它不是 ADT 的一部分，因此如果您刚刚使用 Eclipse，您可能不会拥有它。

所以，第一步是[从这里](http://ant.apache.org/bindownload.cgi)下载并安装 Ant 。

接下来将 Ant 添加到您的路径中，并确保您的路径也指向 JDK（而不是 JRE）。在 Windows 上，我发现我还必须创建 JAVA_HOME 并将其指向 JDK 的根目录。

我们只需要 Ant 进行自动增量步骤 - 目的不是替换 Eclipse 并将其用于整个构建 - 但朝这个方向执行一些步骤以确保 Ant 正常工作很有用。因此，转到项目的根目录并键入

```
> android update project --path . 
```

这将为您的项目创建一个 build.xml。一旦我做到了，我就能做到

```
> ant release 
```

Ant 构建了我的项目。如果你想继续朝着这个方向前进，我发现[这篇文章](http://www.android10.org/index.php/articlesother/270-ant-tool-to-automate-building-android-applications)很有用。

接下来，我编辑了我的项目的新 build.xml 并添加了以下任务（它可以去任何地方，只是不在另一个任务/目标的中间）

```
 <target name="update.buildnum">
      <buildnumber/>
      <!-- this task creates (and increments) Ant property 'build.number' which I use below -->
      <echo>Current build number:${build.number}</echo>         
      <echoxml file="res/values/buildnum.xml">
                <resources>
                    <string name="buildnum">${build.number}</string>
                </resources>                    
      </echoxml>
 </target> 
```

上面使用的任务会自动增加项目根目录中名为“build.number”的文件（它将创建）中的内部版本号。上述任务的其余部分将当前内部版本号放入资源字符串中，以便您的应用程序可以使用以下代码检索它：

```
String build = context.getString( com.your.app.R.string. buildnum );
int appBuild = ( int ) Integer.parseInt( build ); 
```

有些人更喜欢将内部版本号写入 AndroidManifest.xml 中的应用程序代码的解决方案。 [这是](https://stackoverflow.com/a/7788525/150016)一个包含执行此任务的任务的答案，但它需要一个 3rd 方 Ant 任务（xmltask），而且我有点犹豫是否让第 3 方任务在每个构建中修改我的清单（现​​在非常庞大） . 如果您决定使用该任务，那么获取内部版本号的相应 Android 代码将是：

```
String packageName = ctx.getPackageName();
PackageInfo pInfo = ctx.getPackageManager().getPackageInfo( packageName, 0);
int appVer = pInfo.versionCode; 
```

最后，您需要在每次构建时让 Eclipse 运行这个 Ant 任务。

转到项目的属性，找到 Builders，然后单击按钮添加一个新的 Builder。这里有很多选项，但您只需要指定几个。

*   通过设置**Name:**字段为构建器命名。
*   选择**构建文件：** . 我使用“浏览工作区”选项来选择它，然后用“${workspace_loc:/appname/build.xml}”填充该字段
*   从目标选项卡上的列表中选择目标。在我的情况下，我必须删除“帮助”任务（上面生成的 build.mxl 中的默认任务），然后添加“build.number”任务。我建议你只为**Manual Build:**设定一个目标。

我将新的 Builder 移动为第一个构建步骤。

此解决方案的一个问题是，每次让 Eclipse 部署（运行）应用程序时，它都被视为新的手动构建，即使项目没有更改。因此，如果您将应用程序部署到多个设备，每个设备将具有不同的内部版本和自己的内部版本号。可以稍微改善这个问题的一件事是，谷歌表示未来的 ADT 将允许在一个操作中进行多次部署。

这（上图）在 Win7 32 位上使用 Ant 1.8.4、Eclipse Indigo SR2 (3.7.2)、ADT 20 preview 2 和 SDK Tools 20 进行了测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-23T08:37:47.337

我的解决方案基于使用 Ant（没有 XMLTask）

```
<property name="version.file" value="version.properties"/>
<property name="manifest.file" value="AndroidManifest.xml"/>
<!--build.slot: 0.1.2.3.4.5-->
<property name="build.slot" value="2"/>

<target name="all">
    <antcall target="increment.build"/>
    <antcall target="update.manifest"/>
</target>

<target name="increment.build">
    <propertyfile file="${version.file}">
        <entry key="build.no" type="int" default="0" operation="+" value="1" />
    </propertyfile>
</target>

<scriptdef name="setBuildNo" language="javascript">
    <attribute name="verName" />
    <attribute name="buildNo" />
    <attribute name="buildSlot" />
    <attribute name="property" />
    <![CDATA[
        var verNums = attributes.get("vername").split(".");
        var buildNo = attributes.get("buildno");
        var buildSlot = attributes.get("buildslot");
        if (!(buildSlot > 1 && buildSlot < 10))
            buildSlot = 2;
        var newVer = "";
        for (var i = 0; i < Math.min(verNums.length, buildSlot); i++)
            newVer += (verNums[i].trim() || "0") + ".";
        for (var i = verNums.length; i < buildSlot; i++)
            newVer += "0" + ".";
        project.setProperty(attributes.get("property"), newVer + buildNo);
    ]]>
</scriptdef>

<target name="debug">
    <setBuildNo verName="1" buildNo="999" property="a"/>
    <setBuildNo verName="2." buildNo="999" property="b"/>
    <setBuildNo verName="3.3" buildNo="999" property="c"/>
    <setBuildNo verName="4.4." buildNo="999" property="d"/>
    <setBuildNo verName="5.5.5" buildNo="999" property="e"/>
    <setBuildNo verName="6.6.6." buildNo="999" property="f"/>
    <setBuildNo verName="7.7.7.7" buildNo="999" property="g"/>

    <echo>1 =&gt; ${a}</echo>
    <echo>2\. =&gt; ${b}</echo>
    <echo>3.3 =&gt; ${c}</echo>
    <echo>4.4\. =&gt; ${d}</echo>
    <echo>5.5.5 =&gt; ${e}</echo>
    <echo>6.6.6\. =&gt; ${f}</echo>
    <echo>7.7.7.7 =&gt; ${g}</echo>

</target>

<target name="update.manifest">

    <fail message="File not found: &quot;${manifest.file}&quot;" status="1">
        <condition>
            <not>
                <available file="${manifest.file}" />
            </not>
        </condition>
    </fail>

    <!-- Reads build version -->
    <loadproperties srcfile="${version.file}">
        <filterchain>
            <linecontains>
                <contains value="build.no="/>
            </linecontains>
        </filterchain>
    </loadproperties>

    <!-- Reads versionName from AndroidManifest -->
    <xmlproperty file="${manifest.file}" collapseAttributes="true"/>
    <fail unless="manifest.android:versionName" message="Attribute &quot;android:versionName&quot; undefined into &quot;${manifest.file}&quot;" status="1"/>
    <property name="version.name" value="${manifest.android:versionName}"/>

    <!-- Create a new version -->
    <setBuildNo verName="${version.name}" buildNo="${build.no}" buildSlot="${build.slot}" property="new.version.name"/>

    <!-- Replaces using regexp -->
    <replaceregexp
        file="${manifest.file}"
        match="android:versionName.*=.*&quot;.*${version.name}.*&quot;"
        replace="android:versionName=&quot;${new.version.name}&quot;"/>

    <!-- Replaces for check and generates a exception (if not found version) -->
    <replace
        file="${manifest.file}"
        token="android:versionName=&quot;${new.version.name}&quot;"
        value="android:versionName=&quot;${new.version.name}&quot;"
        failOnNoReplacements="true"/>

    <!--<echo>${version.file}</echo>
    <echo>${manifest.file}</echo>-->
    <echo>Auto Increment Build: ${version.name} =&gt; ${new.version.name}</echo>

</target> 
```

## 使用

```
蚂蚁 [-Dmanifest.file=<文件>] [-Dversion.file=<文件>] [-Dbuild.slot=<编号>]
    -Dmanifest.file - AndroidManifest.xml 的路径和文件名。默认值：AndroidManifest.xml 在带有 build.xml 的文件夹中
    -Dversion.file - 存储版本号的路径和文件名。默认值：带有 build.xml 的 version.properties 文件夹
    -Dbuild.slot - 版本数组中内部版本号的位置。默认值：2，即XXbuild。

```

## Eclipse中的自动增量构建

```
项目 | 属性 | 建筑商 | 新 | 蚂蚁构建
    主要的
        构建文件
            <路径>/build.xml
        论据
            -Dmanifest.file=${workspace_loc://AndroidManifest.xml} -Dversion.file=${workspace_loc://version.properties}
    刷新
        [x] 完成后刷新资源
        (*) 指定资源
            [指定资源]
                <项目>
                    [x] AndroidManifest.xml
    构建选项
        [x] 指定相关资源的工作集
            [指定资源]
                <项目>
                    [x] 资源
                    [x] 源代码
                    [x] AndroidManifest.xml

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-17T21:56:30.467

我的解决方案使用了在其他答案、XMLTask 和 Groovy 中找到的一些代码来自动增加内部版本号。我还包括了一个规则来执行 git 提交和标记，以将内部版本号链接到版本控制中的特定点 - 对于错误跟踪很有用。

```
 <taskdef name="xmltask" classname="com.oopsconsultancy.xmltask.ant.XmlTask"/>

  <path id="groovy.classpath">
    <fileset dir="/Users/deepwinter1/.gvm/groovy/current/lib/">
      <include name="*.jar"/>
    </fileset>
  </path>

  <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy">
    <classpath refid="groovy.classpath"/>
  </taskdef>

  <target name="update.build.number">
    <xmltask source="AndroidManifest.xml">
      <copy path="manifest/@android:versionCode" property="buildNum"/>
    </xmltask>
    <groovy>
      buildNum = Integer.valueOf(properties["buildNum"])
      properties["buildNum"] = buildNum + 1
    </groovy>
    <xmltask source="AndroidManifest.xml" dest="AndroidManifest.xml">
      <replace path="manifest/@android:versionCode"
        withText="${buildNum}"/>
    </xmltask>
    <antcall target="commit.and.tag.build">
      <param name="buildNum" value="${buildNum}"/>
    </antcall>
  </target>

  <target name="commit.and.tag.build">
    <exec executable="git">
      <arg value="commit"/>
      <arg value="-a"/>
      <arg value="-m"/>
      <arg value="Build Number ${buildNum}"/>
    </exec>
    <exec executable="git">
      <arg value="tag"/>
      <arg value="b${buildNum}"/>
    </exec>
  </target> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-11T12:35:31.577

您可以在此处找到“位”更好的解决方法答案... [https://stackoverflow.com/a/8156809/304270](https://stackoverflow.com/a/8156809/304270)

微型 c# 工具，它将在每次新构建之前执行并增加清单文件中的适当值。

# php - PHP 如果选择此选项，请执行此操作

> ID：10760059
> 
> 赞同：0
> 
> 时间：2012-05-25T19:05:56.147
> 
> 标签：php, mysql

我有一个非常简单的 IF 语句，一周前对我有用，但现在神秘地不适用于我。选择时我有一个字段，会创建一个额外的查询。

问题是，文档完全跳过了我的 if 语句，就像它甚至不存在一样

这是整个代码

```
<body id="bdy" onload="javascript:fg_hideform('fg_formContainer','fg_backgroundpopup');">
        <div class="container_22" id="container">
            <div id="rootDiv">
                <div style="background-color: rgb(255, 255, 255);"
                id="wrapper">
                    <div class="main">
                        <div id="mainMiddle" class="main-middle">
                            <div id="content" class="wide-content"
                            style="position: relative; width: 990px; background-color: rgb(255, 255, 255);

                            display: inline; margin-left:

                            15px;">
                                <span id="cntntMiddle_bannerTop"></span><!-- =search-bar | start -->
                                <div id="cntntMiddle_SearchBoxContainer"
                                style="margin-top: 20px; padding-left: 20px;">
                                    <form action="search.php" class="search-bar" method="GET">
                                        <h3>Search</h3>
                                        <fieldset>
                                            <div class="ctrlHolder inline">
                                                <input type="checkbox" name="r" id="r" value="y">
                                                Return Flight?
                                            </div>
                                            <div class="ctrlHolder

                                            inline">
                                                <input type="hidden" class="fnc-direction" id="curusd" name="Currency" value="USD"  /> </div>    <div id="trip-1" class="fnc-trip first">      <h6 ><span id="flight1">Departing Flight</span>  </h6>  <div

class="ctrlHolder"> <label for="from-1">  <span class="left">From</span> <span class="right">(City or Airport)</span> </label>  <?php
    $autocomplete1 = array();
    mysql_connect('localhost', '', ''); 
    mysql_select_db('');
    $sql = "SELECT distinct rout_from FROM search_v ORDER BY rout_from ASC";
    $r = mysql_query($sql);
    while ($row = mysql_fetch_array($r))
{
      $autocomplete1[] = $row['rout_from'];
    }
?><input id="newsearch1" name="departure_label">

</div>  <div class="ctrlHolder"><label for="from-1">  <span class="left">To</span> <span class="right">(City or Airport)</span> </label>  <?php
    $autocomplete = array();
    mysql_connect('localhost', '', ''); 
    mysql_select_db('');
    $sql = "SELECT distinct rout_to FROM search_v ORDER BY rout_to ASC";
    $r = mysql_query($sql);
    while ($row = mysql_fetch_array($r))
{
      $autocomplete[] = $row['rout_to'];
    }
?><input id="newsearch" name="arrival_label"> </div>  <div class="ctrlHolder"> <label for="leave-1">Depart</label>  

<input type="text" id="f" name="txtDate1"/> </div> <div class="ctrlHolder"> <label for="leave-2">Arrive</label>  

<input type="text" id="t" name="txtDate2"/></div>  </div>  </fieldset> <fieldset class="travelers">

<legend>Travelers
                                            </legend>
                                            <div class="ctrlHolder inline-select clearfix">
                                                <div class="field">
                                                    <label for="adults">
                                                        <br />
                                                        Passengers</label>
                                                    <select

                                                    name="ddlPAxADT" id="ddlPaxADT">
                                                        <option selected="selected"

                                                        value="1">1</option><option value="2">2</option><option

                                                        value="3">3</option><option value="4">4</option><option value="5">5</option>
                                                    </select>
                                                </div>
                                                <br>
                                            </div>
                                        </fieldset>
                                        <div class="submit-wrap

                                        clearfix">
                                            <button class="btn-reset" type="reset">
                                                Reset
                                            </button>
                                            <input

                                            name="submit" class="btn-search" type="submit" />
                                        </div>
                                    </form>
                                </div>
                                <div id="cntntMiddle_search-results" class="search-results">
                                    <span id="cntntMiddle_lblResults"> <h2>Search Results</h2> <h3>Showing <span id="cntntMiddle_ctl01_lblFlightFilter">all
                                            results</span></h3> 
        <?php
mysql_connect('localhost', '', ''); 
mysql_select_db(''); 

                                        $search = $_GET['search'];
                                        $sfrom = $_GET['departure_label'];
                                        $sto = $_GET['arrival_label'];
                                        $sfromda = $_GET['txtDate1'];
                                        $stoda = $_GET['txtDate2'];
                                        $padt = $_GET['ddlPaxADT'];
                                        $currency = $_GET['Currency'];
                                        $ret = $_GET['r'];
                                        if ($ret!='y') {
                                        $sql1 = mysql_query("SELECT * FROM search_v WHERE rout_to='$sfrom' AND rout_from='$sto' AND date_avialable='$stoda'") or die(mysql_error());
                                        $runrows1 = mysql_fetch_array($sql1);
                                        $flightid1 = $runrows1['flight_id'];
                                        $aseats1 = $runrows1['seats_avialable'];
                                        $todate1 = strftime("%b %d, %Y %l:%M %p" ,strtotime($runrows1['to_date']));
                                        $date1 = strftime("%b %d, %Y %l:%M %p" ,strtotime($runrows1['date_avialable']));
                                        $from1 = $runrows1['rout_from'];
                                        $to1 = $runrows1['rout_to'];
                                        $acost1 = $runrows1['adult_cost'];
                                        $ccost1 = $runrows1['child_cost'];
                                        $cur1 = $runrows1['currency'];
                                        $oth1 = $runrows1['other_cost'];
                                        $totalcost1= $acost1+$oth1;
                                        $pr1 = $flightid1+5;

                                        }
                                        //echo outconstruct
                                        $sql = mysql_query("SELECT * FROM search_v WHERE currency='$currency' AND

                                        rout_to='$sto' AND rout_from='$sfrom' AND DATE_FORMAT(date_avialable,'%Y-%m-%d')

                                        between'".$sfromda."' and '".$stoda."' LIMIT 10") or die(mysql_error()) ;
                                        while ( $runrows = mysql_fetch_array($sql))
                                        {

                                        //get data
                                        $flightid = $runrows['flight_id'];
                                        $aseats = $runrows['seats_avialable'];
                                        $todate = strftime("%b %d, %Y %l:%M %p" ,strtotime($runrows['to_date']));
                                        $date = strftime("%b %d, %Y %l:%M %p" ,strtotime($runrows['date_avialable']));
                                        $from = $runrows['rout_from'];
                                        $to = $runrows['rout_to'];
                                        $acost = $runrows['adult_cost'];
                                        $ccost = $runrows['child_cost'];
                                        $cur = $runrows['currency'];
                                        $oth = $runrows['other_cost'];
                                        $totalcost= $acost+$oth;
                                        $pr = $flightid+5;
                                        echo "";
                                        ?>
<?PHP
include('popup/contactform-code.php');
?>
                                        <ul class="result-list clearfix">
                                            <li class="item clearfix">
                                                <span
                                                id="cntntMiddle_ctl01_rptmain_lblFromt_0">
                                                    <table cellpadding="0" cellspacing="0">
                                                        <thead>
                                                            <tr>
                                                                <th class="price">Price<?php echo $ret; ?></th>
                                                                <th>From</th>
                                                                <th>To</th>
                                                                <th>Depart</th>
                                                            </tr>
                                                        </thead>
                                                        <tfoot>
                                                            <tr>

                                                                <td colspan="6">
                                                                <div class="select-wrap">
                                                                    <p class="seats">
                                                                        <strong><?php echo $aseats; ?></strong><span>seats
                                                                            left</span><em>at this price</em>
                                                                    </p>                                                                <a href='javascript:fg_popup_form("fg_formContainer","fg_form_InnerContainer","fg_backgroundpopup");'
><img border='0' src='images/select_flight.png' width='121' height='34' /></a>
                                                                </div></td>
                                                            </tr>
                                                        </tfoot>
                                                        <tbody>
                                                            <tr>
                                                                <td class="price" rowspan="2"><a
                                                                style="font-weight: bold; cursor: pointer; text-decoration: none;"
                                                                herf="#" onclick='return ray.ajax("#");'><span
                                                                style="font-size: 24px; font-weight: bold;"><?php echo $totalcost; ?></span><span
                                                                style="font-size: 11px; margin-top: 2px; display: block; color: rgb(255, 255,

                                                                255); text-align: center; font-

                                                                weight: normal;">per
                                                                    person</span><span
                                                                style="font-size: 12px; margin-top: 2px; display: block; color: rgb(255, 255,

                                                                255); text-align: center; font-

                                                                weight: normal;">(with fees)</span></a></td>
                                                                <td><?php echo $from; ?></td>
                                                                <td><?php echo $to ?></td>
                                                                <td style="padding-right: 2px;"><?php echo $date; ?></td>
                                                            </tr>
                                                            <tr>
                                                                <td><?php echo $to1; ?></td>
                                                                <td><?php echo $from1 ?></td>
                                                                <td style="padding-right: 2px;"><?php echo $date1; ?></td>
                                                            </tr>
                                                        </tbody>
                                                    </table> </span><a
                                                id="cntntMiddle_ctl01_rptmain_lblResultDetails1_0" title="1"
                                                href="javascript:__doPostBack('ctl00$cntntMiddle$ctl01$rptmain

                                                $ctl00$lblResultDetails1','')"
                                                style="color: Black;"></a><a class="close"
                                                href="#">Close</a>
                                                <div class="info clearfix">
                                                    <div class="info clearfix">
                                                        <h4>Departing Flight</h4>
                                                        <ul class="clearfix">
                                                            <li>
                                                                <h5><?php echo $from; ?> to <?php echo $to; ?> <?php echo $date; ?></h5>
                                                                <ul>
                                                                    <li>
                                                                        &nbsp;
                                                                    </li>
                                                                    <li>
                                                                        <strong>Flight #</strong> - <?php echo $flightid; ?>
                                                                    </li>
                                                                    <li>
                                                                        <strong>Departure Time – </strong>
                                                                        <?php echo $date; ?>
                                                                    </li>
                                                                </ul>
                                                            </li>
                                                        </ul>
                                                        <ul>
                                                            <li style="padding-top: 5px;">
                                                                <span
                                                                style="color: rgb(212, 22, 13); font-weight: bold; font-size: 11px; text-

                                                                decoration: none;"> Fare Breakdown</span>
                                                            </li>
                                                        </ul>
                                                        <table class="more">
                                                            <tbody>
                                                                <tr>
                                                                    <th>Passenger</th>
                                                                    <th>Fare</th>
                                                                    <th> Taxes and Fees</th>
                                                                    <th>Qty</th>
                                                                    <th>Total Cost</th>
                                                                </tr>
                                                            </tbody>
                                                            <tbody>
                                                                <tr>
                                                                    <td>Adult</td>
                                                                    <td
                                                                    style="color: rgb(100, 100, 100); font-size: 11px; font-weight: bold;"><?php

                                                                    echo $acost; ?></td>
                                                                    <td><?php echo $oth; ?></td>
                                                                    <td id="paxAdtTd">1</td>
                                                                    <td><?php echo $acost; ?></td>
                                                                </tr>
                                                                <tr>
                                                                    <td>&nbsp;</td>
                                                                    <td>&nbsp;</td>
                                                                    <td>Cost of Sale(<?php echo $cur; ?>)</td>
                                                                    <td>&nbsp;</td>
                                                                    <td
                                                                    style="color: rgb(100, 100, 100); font-size: 14px; font-weight: bold;"><?php

                                                                    echo $totalcost; ?></td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                        <br />
                                                        <span style="font-weight: bold; padding-top: 10px;"> *Additional airline fees for baggage may apply</span>
                                                        <div class="select-wrap">
                                                            <p class="seats">
                                                                <strong><?php echo $aseats; ?></strong><span>seats
                                                                    left</span><em>at this price</em>
                                                            </p>
                                                            <button class="btn-select" type="button" id="start">
                                                                Select
                                                                Flight
                                                            </button>
                                                        </div>
                                            </li>
                                        </ul> </ul>
                                        </ul>
                                         <?php ;}?>
                                </div>
                            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:44:21.260

尝试类似：

```
<?php
    $ret = $_GET['r'];
    if($ret != "y") {
        echo "Yay!";
    } else {
        echo ":(";
    }
?>
<html>
    <head>

    </head>

    <body>
        <form method="get" action="search.php">
             <input type="checkbox" value="y" name="r" />Submit Query<br />
             <input type="submit" value="Submit" name="submit" />
        </form>

    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:33:26.310

我认为这是因为尾随换行符。所以，在你真正做之前`if($ret != 'y')`只是修剪它`$ret = trim($ret)`。试试看。

```
$ret = $_GET['r'];
$ret = trim($ret);
if ($ret!='y') 
 {
   // rest of your code
 } 
```

# javascript - Javascript 中来自网站的推文输入字段

> ID：10760060
> 
> 赞同：0
> 
> 时间：2012-05-25T19:05:57.833
> 
> 标签：javascript, twitter, twitter-oauth

我的网页上有一个输入字段，我想允许用户发推文。我知道我可以使用 Oauth 来做到这一点，但是因为我使用的是 JavaScript，所以它是不安全的，因为我的 id 和 secret 是可见的。有一个更好的方法吗？

我现在这样做的方式是这样的：

```
var accessor = {
  token: "...",
  tokenSecret: "...",
  consumerSecret: "..."
  consumerKey : "...",
};

  //create message with input field text
  var message = {
  action: url,
  method: "GET",
  parameters: {...}
};

OAuth.completeRequest(message, accessor);        
OAuth.SignatureMethod.sign(message, accessor);
url = url + '?' + OAuth.formEncode(message.parameters); 
```

但这会让我的秘密可见。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:49:23.360

在 OAuth 模型中，存在三方：服务器或“资源管理器”、应用程序或“客户端”以及用户或“资源所有者”。

在您的情况下，“客户端”是 Web 应用程序，即您正在构建的东西。资源管理器是twitter，用户是资源所有者。也许值得重复：拥有和管理的*资源*是推文流。

OAuth 允许客户端代表资源所有者向资源管理器提交请求。转换为您的场景，这意味着您的应用程序（网络应用程序）可以代表用户提交推文。

Web 应用程序模型及其分布式计算模型，一些代码在服务器上运行（PHP、Ruby、ASPNET 或其他任何东西）和一些在客户端上运行的代码（Javascript）有点混淆了这个问题。

正如您所指出的，您可以通过在 JS 代码中嵌入密钥和秘密来“执行”oauth。您正确地指出，这会暴露您不想暴露的东西。

显而易见的替代方法是将这些内容嵌入到服务器端代码中。这要求与 twitter 的连接发生在服务器和 twitter 之间，而不是浏览器和 twitter 之间。当用户想要发推文时，从浏览器使用 ajax 调用到*您服务器*上的一段代码，让我们调用它`mytweet.php`。这是您编写的脚本，然后它会执行 OAuth 并代表用户向 twitter.com 发送状态更新。

你跟着？

# c# - 是否存在使用 C# 的动态调度的 VB“变体”实现？

> ID：10760071
> 
> 赞同：3
> 
> 时间：2012-05-25T19:06:46.677
> 
> 标签：c#, .net, dynamic, variant

我意识到它违背了 C# 的强类型特性，但我发现在使用该语言中的动态对象时，JavaScript 或 PowerShell 中常见的一些更有用的功能根本不实用。

例如，以下 C# 代码将在运行时失败，原因很明显。

```
dynamic x = 1.0;
int y = x; 
```

但这使得 C# 的动态特性在处理松散类型的数据时非常有限，例如由 JSON 有效负载或 CSV 生成的数据，其中表示的细微变化可能导致运行时的行为非常不同。

我正在寻找的是与 VBA / VBScript 时代`Variant`类型非常相似的东西。我想有可能从中派生出这样的类型`DynamicObject`，它将包装原始值，如`Int32`,`String`等，并在运行时执行适当的强制转换。[我](https://gist.github.com/2789805)在动态上下文中对“null”值做了类似的事情。

但是这样的东西已经建立了吗？我环顾 GitHub 或 Codeplex 无济于事，但搜索起来有点困难。在我开始我想象的将是一个相当复杂的课程之前，我想确保我没有浪费我的时间。

### 关于这一切的实用性

我应该注意，我很长一段时间都反对 C# 中动态调度的概念，因为它不是一种动态语言。老实说，我希望它根本不被添加到语言中，或者至少仅限于 COM 互操作场景。

但是话虽如此，我总是对如何“破解”语言功能以使它们做他们从未打算做的事情感到好奇。有时会从中产生一些有用的东西。例如，已经有很多人使用`IDisposable`接口和`using`语句来做与释放资源无关的事情的例子。

我怀疑我会在生产应用程序或任何需要交给其他开发人员的东西中使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T19:16:30.413

Visual Basic 语言隐藏了很多胶水，这不是 C# 的方式。Variant 类型有大量的转换函数，它们由 vb 运行时自动调用。.NET 也有自动转换功能，你只需要明确地使用它们：

```
dynamic x = 1.0;
int y = Convert.Int32(x); 
```

C# 有理由编写这样的代码，因为它不是一种隐藏成本的语言。

# android - 如何在 webview 或 videoview 中播放此视频？

> ID：10760076
> 
> 赞同：0
> 
> 时间：2012-05-25T19:07:22.823
> 
> 标签：android, android-webview, android-videoview, windows-media-player, asf

我的意思是我想在 webview 或 videoview 中播放这个网址：http://212.175.206.240:80/saat_kulesi?MSWMExt=.asf。但我不玩这个网址。我试试这个：

```
 VideoView videoView = (VideoView)findViewById(R.id.videoView1);
        MediaController mediaController = new MediaController(this);
        mediaController.setAnchorView(videoView);
        videoView.setMediaController(mediaController);

        videoView.setVideoPath("http://212.175.206.240:80/saat_kulesi?MSWMExt=.asf");

        videoView.start(); 
```

我也试试这个：

```
 WebView wv2 = (WebView)findViewById(R.id.webView1);
        wv2.getSettings().setJavaScriptEnabled(true);
        wv2.loadUrl("http://212.175.206.240:80/saat_kulesi?MSWMExt=.asf");

 But two of my method but dont work. How can succeed it ? 
```

# python - python的vim设置

> ID：10760082
> 
> 赞同：9
> 
> 时间：2012-05-25T19:07:47.140
> 
> 标签：python, vim

我有以下设置文件：

```
# ~/.vimrc
set tabstop=4
set shiftwidth=4
set smarttab
set expandtab
set softtabstop=4
set autoindent 
```

我如何使这些设置仅适用于**python**？另外，我将如何添加 python 着色（例如 textmate 为每种语言所做的）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T19:10:21.217

我的配置中有这些行：

```
filetype plugin indent on
syntax on
au BufNewFile,BufRead *.py set tabstop=4 softtabstop=4 shiftwidth=4 expandtab smarttab autoindent 
```

这可能是您正在寻找的颜色： [改进的 Python 语法、黑板配色方案](http://concisionandconcinnity.blogspot.com/2009/07/vim-part-i-improved-python-syntax.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-25T19:11:07.917

将它们放入`vimfiles/ftplugin/python.vim`（但更改`set`为`setlocal`）并添加`filetype plugin on`到`.vimrc`. 对于语法高亮，添加`syntax on`到`.vimrc`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T20:51:27.600

除了上述之外，试试[vim-janus](https://github.com/alanleftofthedot/Vim-Janus)，它为 vim 添加了其他好东西。

# jquery - Django HttpResponse 剥离 JSON 的双重转义符打破了 jQuery

> ID：10760083
> 
> 赞同：0
> 
> 时间：2012-05-25T19:07:49.420
> 
> 标签：jquery, django, json

JSON 和 Django 有一个有趣的问题。我想我已经把它缩小到这个问题。问题是我有一个像这样的 JSON 对象：

```
{"embed": "<iframe width='640' height='360' src='http://www.youtube.com/embed/Sw5Gk1L4LQE?wmode=opaque' frameborder='0' allowfullscreen></iframe>"} 
```

在 PDB 中，如果我将其打印为 simplejson.dumps，我会得到这个（注意双引号）：

```
{"embed": "<iframe width=\\"640\\" height=\\"360\\" src=\\"http://www.youtube.com/embed/Sw5Gk1L4LQE?wmode=opaque\\" frameborder=\\"0\\" allowfullscreen></iframe>"} 
```

实际的 HttpResponse 对象已经从每组这样的双重转义中删除了一个斜杠。

```
return HttpResponse(simplejson.dumps(result), 'application/json'

{"embed": "<iframe width=\"640\" height=\"360\" src=\"http://www.youtube.com/embed/Sw5Gk1L4LQE?wmode=opaque\" frameborder=\"0\" allowfullscreen></iframe>"} 
```

在客户端上，我使用的是 jQuery 的 parseJSON，但我遇到了具有单个转义字符（第 3 个）的问题，因为它没有将它们视为转义。但它是实际有效的 JSON，当我直接在控制台中尝试 parseJSON 时，第二个有效，但它实际上不是有效的 JSON（根据 JSONLint.com）。

关于如何将这个 JSON 对象从 Django 获取到客户端并保持嵌入代码完整的任何想法？我希望这对我来说是一个小的oversite。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:08:00.093

好吧，一个小时后，我终于意识到我在这方面犯了几个小错误，导致大多数事情都崩溃了。我在本地加载页面，而不是通过 Django 提供它（只是为了测试我正在做的 jQuery Mobile 的东西）。

在该本地文件中，我复制/粘贴了 Django 中 JSON 视图的输出。

我尝试对该视图使用 JSONP 调用，并且由于 jQuery JSONCallback 它引发了错误。

最后，测试这个的正确方法是通过 Django 提供 HTML，这样我就不必使用 JSONP，当我这样做时，parseJSON 接受了具有单转义双引号 \" 的 JSON，因为它应该不会从复制和粘贴中接受，因为这不是响应对象。

希望我的错误将来能帮助其他人。

# android - 关于通过服务更改位置的 Android-Alert 对话框

> ID：10760087
> 
> 赞同：0
> 
> 时间：2012-05-25T19:08:14.130
> 
> 标签：android, service, broadcastreceiver

我想通过服务弹出有关位置更改的警报对话框。在这里，我附上了我的清单、服务和广播接收器代码。

在控制台中，它表明 .apk 已安装。

但我没有得到任何祝酒词或警报对话框。

如果我错了，请纠正我。

谢谢。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.ser"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="3" />

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <receiver android:name="com.ser.Myreceiver"
        android:permission="android.permission.RECEIVE_BOOT_COMPLETED">  
<intent-filter>  
    <action android:name="android.intent.action.BOOT_COMPLETED" /> 
    <category android:name="android.intent.category.HOME" />  

</intent-filter>  
</receiver>

<service  android:enabled="true" 
    android:name="com.ser.RunService">
<intent-filter>  
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
    </service>    

</application>

</manifest>` 
```

* * *

```
package com.ser;

import android.app.AlertDialog;
import android.app.Service;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.os.Bundle;
import android.os.IBinder;
import android.widget.Toast;

 public class RunService extends Service implements LocationListener{

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    // TODO Auto-generated method stub

    System.out.println("**inside onCreate");
    super.onCreate();
    Toast.makeText(this, "Service Created", Toast.LENGTH_LONG).show();
    //Intent call = new Intent(Intent.ACTION_CALL,Uri.parse("tel:+5555")); 
    //startActivity(call);
}
@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("ALERT")
       .setTitle("Location")
       .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {

           }
       });
}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

 } 
```

//接收者

```
package com.ser;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
//import android.widget.Toast;
//import android.util.Log;

public class Myreceiver extends BroadcastReceiver{

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    System.out.println("MYRECEIVER");
        //Toast.makeText(Myreceiver.this, "MyReciver",    Toast.LENGTH_SHORT).show();
         Intent serviceLauncher = new Intent(context, RunService.class);
         context.startService(serviceLauncher);
         //Log.v("TEST", "Service loaded at start");

}

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T09:25:39.083

创建一个活动并在此活动中注册接收器并从此活动启动服务并在活动类中使用警报对话框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:39:36.280

我已经修改了您的代码，并且在我的测试移动设备（索尼 xperia）上运行良好

* * *

## 清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.ser"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
   <application android:icon="@drawable/icon" android:label="@string/app_name" android:debuggable="true">        
    <service android:enabled="true" android:name=".MyService">  
        <intent-filter>  
            <action android:name="com.ser.MyService">  
            </action>  
        </intent-filter>
    </service>  

    <receiver android:enabled="true" android:name=".MyReceiver">  
        <intent-filter>  
            <action android:name="android.intent.action.BOOT_COMPLETED">  
        </action></intent-filter>  
    </receiver> 

    </application> 
```

## MyReceiver.java

```
package com.ser;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.widget.Toast;

public class MyReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {     
        Toast.makeText(context, "MyReceiver Started..",Toast.LENGTH_SHORT).show();
        Log.v("Debug", "MyReceiver Started..");
        Intent myIntent=new Intent(context,MyService.class);        
        context.startService(myIntent);
    }
} 
```

* * *

## 我的服务.java

```
package com.ser;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class MyService extends Service {

    private LocationManager locManager;
    private LocationListener locListener = new myLocationListener();

    private boolean gps_enabled = false;
    private boolean network_enabled = false;

    @Override
    public IBinder onBind(Intent intent) {return null;}

    @Override
    public int onStartCommand(Intent intent, int flags, int startId){
        Toast.makeText(getBaseContext(), "Service Started..", Toast.LENGTH_SHORT).show();
        Log.v("Debug", "Service Started..");        

        locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE); 
        try{
            gps_enabled = locManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
        }
        catch(Exception ex){}
        try{
            network_enabled = locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);           
        }
        catch(Exception ex){}

        if (gps_enabled) {
            locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);
            Log.v("Debug", "gps_enabled..");
        }
        if (network_enabled) {
            locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locListener);
            Log.v("Debug", "network_enabled..");
        }   

        // We want this service to continue running until it is explicitly
        // stopped, so return sticky.
        return START_STICKY;
    }

    private class myLocationListener implements LocationListener{

        @Override
        public void onLocationChanged(Location location) {

            if(location!=null){
            Toast.makeText(getBaseContext(),"on location changed called..",Toast.LENGTH_SHORT).show();
            Log.v("Debug", "on location changed method called..");
            }
        }

        @Override
        public void onProviderDisabled(String provider) {}

        @Override
        public void onProviderEnabled(String provider) {}

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {}          

    }
}//service closed 
```

* * *

对接收器、服务和 GPS 类仍有任何疑问，请告诉我！！

甚至您可以检查[从广播接收器启动服务](http://rdcworld-android.blogspot.in/2012/03/start-service-from-broadcast-receiver.html)和[获取当前位置](http://rdcworld-android.blogspot.in/2012/01/get-current-location-coordinates-city.html)链接以获取详细信息。希望能帮助到你！！

# css - 将文本垂直对齐到框的底部？

> ID：10760088
> 
> 赞同：8
> 
> 时间：2012-05-25T19:08:19.760
> 
> 标签：css, vertical-alignment, uitextposition

我制作了盒子并设置了行高，文本自动垂直居中。有没有办法或任何技巧将文本设置在框的底部？

```
div {
    width: 100px;
    height: 100px;
    background: #eee;
    color: #333;
    text-align: center;
    line-height: 100px;
    vertical-align: text-bottom;
 }

<div>FoxRox</div> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-25T19:13:15.243

**2020 更新**

您可以使用 CSS 网格、flexbox 或原始方法`line-height`：

```
body { display: flex } /* just to prettify */

div {
  margin: .5em;
  width: 6.25em; height: 6.25em;
  background: #eee;
  color: #333;
  text-align: center
}

.grid {
  display: grid;
  align-content: end;
}

.flex {
  display: flex;
  align-items: flex-end;
  justify-content: center
}

.lh { line-height: 11.5 /* 6.25*2 - 1.5 */ }
```

```
<div class='grid'>Hello</div>

<div class='flex'>Hello</div>

<div class='lh'>Hello</div>
```

* * *

`height`在您的情况下，将文本的`div`和设置`line-height`为相同的值`100px`是一种将文本垂直居中的方法`div`。那就是问题所在。

解决办法是改成`line-height`两倍高度减去文字大小，去掉 useless `vertical-align`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-25T19:15:28.993

用 将文本括在`p`标签中`display:inline-block`。设置`vertical-align`为`p`元素。

```
<div>
    <p>FoxRox</p>
</div>​

div {
    width: 100px;
    height: 100px;
    background: #eee;
    color: #333;
    text-align: center;
 }
p {
    display: inline-block;
    vertical-align: -80px;
}
​ 
```

**[演示](http://jsfiddle.net/Dfx92/6/)**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-25T19:17:18.537

您可以将显示设置为表格单元格，例如试试这个 CSS。

```
width: 100px; 
height: 100px; 
display: table-cell; 
vertical-align: bottom; 
```

演示：http: [//jsfiddle.net/Kawwr/](http://jsfiddle.net/Kawwr/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T19:17:08.647

您可以查看我对[https://stackoverflow.com/a/6116514/682480](https://stackoverflow.com/a/6116514/682480)的回答。

这是上述答案的***[演示](http://jsfiddle.net/DotNetScott/7BBqC/)***。

* * *

诀窍是`display: table-cell`在外部容器上使用。这样你就可以在 div 上使用`vertical-align: bottom`and了。`display: inline-block;`

# nginx - 在 nginx 中，如何使请求 http://domain/test 到根字典中的索引文件而不是创建一个测试文件夹

> ID：10760092
> 
> 赞同：0
> 
> 时间：2012-05-25T19:08:33.897
> 
> 标签：nginx

我问这个问题是因为我可能误解了 Ngnix 中的位置指令

```
location /test {
root /home/myfolder/html/
index index.html
} 
```

我一直认为 /test 是不需要是根文件夹中的真实文件夹的 URI

在这种情况下，浏览器给我一个 404，在我在根文件夹中添加测试文件夹后，它就可以工作了。

如果没有许多与 uri hiracy 对应的真实文件夹，我该如何以正确的方式进行操作？

# objective-c - 如何判断 Safari 何时完成加载网页

> ID：10760094
> 
> 赞同：0
> 
> 时间：2012-05-25T19:08:38.000
> 
> 标签：objective-c, ios, macos

我试图弄清楚是否可以跟踪 Safari 何时完成加载页面请求。我调用 Safari 以使用以下代码打开：

```
// Open Safari
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.example.com/" description]]]; 
```

但是，由于我的应用程序进入后台，它可能会被[挂起（并且无法执行代码）](https://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)。这甚至可以在 Xcode 4 中完成吗？

**编辑**

我这样做的原因是因为[UIWebView 和 Safari 不在同一级别运行](https://stackoverflow.com/questions/3496505/differences-between-uiwebview-and-mobile-safari)，我想在某些网站上做一些与性能相关的测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:07:11.773

所以，如果你想看看我是如何为越狱的 iOS 做的（而不是非常无聊的“不可能”）：我基本上挂钩了 safari 以访问页面完成加载时调用的特定方法。使用 MobileSubstrate（注入动态库时过滤 com.apple.mobilesafari）：

```
#import <substrate.h>
#import <UIKit/UIKit.h>

/* Some globals */
static IMP _orig_1, _orig_2;
static id tabController;

id _mod_1(id __self, SEL __cmd, CGRect frame, id tabDocument);
void _mod_2(id __self, SEL __cmd, id doc, BOOL error);

/* The library constructor */
__attribute__((constructor))
static void init()
{
    Class tabClass;

    tabClass = objc_getClass("TabController");

    MSHookMessageEx(tabClass, @selector(initWithFrame:tabDocument:),    
        (IMP)_mod_1, &_orig_1);
    MSHookMessageEx(tabClass, @selector(tabDocument:didFinishLoadingWithError:),
        (IMP)_mod_2, &_orig_2);
}

/* This hook merely captures the TabController of Safari. */
id _mod_1(id __self, SEL __cmd, CGRect frame, id tabDocument)
{
    __self = _orig_1(__self, __cmd, frame, tabDocument);
    tabController = __self;
    return __self;
}

/* This is called when the page loading is done */
void _mod_2(id __self, SEL __cmd, id doc, BOOL error)
{
    /* Make sure you always call the original method */
    _orig_2(__self, __cmd, doc, error);

    /* then do what you want */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:16:03.537

这一般是不可能的。

您可以做的一件事是从要加载的页面，重定向到您的应用程序的 URL 方案，这将启动您的应用程序。有关此问题的更多信息，请查看`-[UIApplicationDelegate application:openURL:sourceApplication:annotation:]`方法。

我不认为您的应用程序可以通过这样的 URL 方案拒绝激活，因此这意味着您的应用程序将变为活动状态。也许可以使用上述方法的返回值（这是一个布尔值），您必须对其进行测试。

此方法还假定您可以访问您正在打开的页面，以便您可以添加重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T19:11:15.243

不，这是不可能的。但是，如果您在自己的应用程序中打开 UIWebView 中的链接，则可以执行此操作。

# ruby - 如何检查旧版本 gem 的依赖关系？

> ID：10760096
> 
> 赞同：0
> 
> 时间：2012-05-25T19:08:50.777
> 
> 标签：ruby, rubygems, dependencies, gem

如何检查旧版本 gem 的依赖关系？“gem 依赖”命令似乎只适用于最新版本，尽管“gem 帮助依赖”页面中有 -v 选项（版本）。

以下是所有可用版本的列表：

```
gem list -all -r activesupport

*** REMOTE GEMS ***

activesupport (3.2.3, 3.2.2, 3.2.1, 3.2.0, 3.1.4, 3.1.3, 3.1.2, 3.1.1, 3.1.0, 3.0.12, 3.0.11, 3.0.10, 3.0.9, 3.0.8, 3.0.7, 3.0.6, 3.0.5, 3.0.4, 3.0.3, 3.0.2, 3.0.1, 3.0.0, 2.3.14, 2.3.12, 2.3.11, 2.3.10, 2.3.9, 2.3.8, 2.3.7, 2.3.6, 2.3.5, 2.3.4, 2.3.3, 2.3.2, 2.2.3, 2.2.2, 2.1.2, 2.1.1, 2.1.0, 2.0.5, 2.0.4, 2.0.2, 2.0.1, 2.0.0, 1.4.4, 1.4.3, 1.4.2, 1.4.1, 1.4.0, 1.3.1, 1.3.0, 1.2.5, 1.2.4, 1.2.3, 1.2.2, 1.2.1, 1.1.1, 1.1.0, 1.0.4, 1.0.3, 1.0.2, 1.0.1, 1.0.0)
activesupport-cascadestore (0.0.2, 0.0.1) 
```

但是，我似乎无法获得旧版本 gem 的依赖项。

```
gem dependency activesupport -r -v 3.2.3
Gem activesupport-3.2.3
  i18n (~> 0.6, runtime)
  multi_json (~> 1.0, runtime)

gem dependency activesupport -r -v 1.4.2
No gems found matching activesupport (= 1.4.2)

gem dependency activesupport -r -v 1.4.1
No gems found matching activesupport (= 1.4.1) 
```

..这是大约 2009 年遇到同样问题的帖子： [http ://www.ruby-forum.com/topic/194703](http://www.ruby-forum.com/topic/194703)

相关：http: [//xkcd.com/979/](http://xkcd.com/979/)

有没有人有另一种方法来检查旧版本的 gem 的依赖关系？

编辑：仍在寻找一种方法来查找旧版本 gem 的*所有依赖项。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T22:22:07.623

嗯，它不如通过命令行使用 RubyGems 方便，但是您可以在浏览 gem 时在[RubyGems.org上找到该信息。](http://rubygems.org/)

例如，ActiveSupport [3.2.0.rc1](http://rubygems.org/gems/activesupport/versions/3.2.0.rc1)引入了对 i18n 的依赖，而[3.1.0.beta1](http://rubygems.org/gems/activesupport/versions/3.1.0.beta1)引入了对 multi_json 的依赖。

# java - 麻烦设计递归结果有限

> ID：10760100
> 
> 赞同：7
> 
> 时间：2012-05-25T19:09:10.977
> 
> 标签：java, algorithm, recursion

在这个问题中，我试图简单地获取项目列表和范围，并找到允许使用*所有*项目的组合。

这是一个示例：假设您有 4 件物品（苹果、梨、桃子和橙子），并且想要至少 20% 的篮子包含每个物品，最多 60%。例如，您可以拥有每个项目的 25%、25%、25%、25% 或 30%、30%、20%、20% 等，但 0%、0%、50%、50% 没有工作，因为指定的 min% 是 20%。

该程序运行良好，但它使用的项目少于整个列表（而不是每个解决方案中的 4 个项目，某些解决方案包含 2 或 3 个项目，这不是我想要的）。如果我发送一个包含 4 个项目的列表，我想要使用所有 4 个项目的组合，仅此而已。我不希望这样，因为我计划使用大型列表，并且我希望项目的大小过去只是全部，并且不小于 min%。这是使用上述信息的示例（4 项，20-60% 范围）：

```
good:
 apples = 22
 pears  = 24
 peach  = 25
 orange = 29
 total: 100%

bad:
 apples = 0
 pears  = 0
 peach  = 40
 orange = 60
 total: 100%
 // Although total is correct, the example fails because
 // the minimum of 20% per item was not obeyed. 
```

我真的很困惑为什么会发生这种情况，但如果我不得不打赌，我认为这是我的递归方式是在将列表中的项目数减去一个然后再将其发回。它在方法中`recursion_part`：

```
private static void recursion_part(int k, int sum, int[] coeff) {
    //k is number of items in the list(in this example its 4(0-3), sum is the remaining total percent to break down, coeff is the template to store values
    //this recursively takes the sum and tries to find lower values of it until it equals zero using the bounds given
    for (int c = low_bound[k]; c <= high_bound[k]; c++) {  
        coeff[k] = c;
        int[] newcoeff = Arrays.copyOf(coeff, coeff.length);
        if (c - sum == 0) {
        results.add(newcoeff);
        printresults(newcoeff);
        break;
    } else if (k > 0) {
        recursion_part(k - 1, sum - c, newcoeff);
    }
}
} 
```

我想处理更大的列表，如果它计算出很多我不关心的结果，我认为这将是一个问题。如何重新设计它以仅处理列表中的所有项目并保持在范围限制内？

我想放置一个方法来检查列表中有多少个零，然后如果它低于列表的大小则中断，但我得到空白结果的事实意味着它的处理项目少于我的列表，我我认为最好设计程序，以免浪费资源。

这是整个代码（它按描述工作，但如上所述给出零结果）：

```
import java.util.ArrayList;
import java.util.Arrays;

public class recursion_percent_returner {
    static final int target_percent = 100;
    static final String[] names = new String[] {"apples", "pears", "peach", "orange" };
    static int[] low_bound = new int[names.length];
    static int[] high_bound = new int[names.length];
    static ArrayList results =  new ArrayList(); //queue to store results
    static int[] default_coeff = new int[names.length];

    public static void main(String[] args) {
        System.out.println("starting..");
        System.out.println("list size " + names.length);
        Arrays.fill(low_bound, 20); //fills the min list with default value
        Arrays.fill(high_bound, 60); //fills the max list with default value
        recursion_part(names.length-1,target_percent,default_coeff);
        System.out.println("total size of results are " + results.size());
    }

    private static void recursion_part(int k, int sum, int[] coeff) {
        //k is number of items in the list(in this example its 4(0-3), sum is the remaining total percent to break down, coeff is the template to store values
        //this recursively takes the sum and tries to find lower values of it until it equals zero using the bounds given
        for (int c = low_bound[k]; c <= high_bound[k]; c++) {  
            coeff[k] = c;
            int[] newcoeff = Arrays.copyOf(coeff, coeff.length);
            if (c - sum == 0) {
                results.add(newcoeff);
                printresults(newcoeff);
                break;
            } else if (k > 0) {
                recursion_part(k - 1, sum - c, newcoeff);
            }
        }
    }

    private static void printresults(int[] newcoeff) {      
        for (int x = 0; x<newcoeff.length; x++) {
            System.out.println(names[x] + " = " + newcoeff[x]);
        }
        System.out.println("*********");

    }
} 
```

我愿意接受更好的方法来实现我正在寻找的结果。

ps 这不是作业，我不是学生；我只是倾向于发现听起来很奇怪的代理问题。

## 编辑

我包括了整个代码，但[这里也是输出](http://pastebin.com/Fh6nPwrk)。这是 2653 解决方案的一个片段，它产生的比我需要的要多。如果你简单地看一下，你会发现大多数都是正确的，但是当你变低时，你会发现并不是所有的值都被使用了；我只想要使用所有值的解决方案；不应有 0 值条目。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T20:40:42.990

```
import java.util.*;

public class Distributor {

    private ArrayList<int[]> result =  new ArrayList <int[]> ();

    public Distributor (final String [] names, int [] low, int [] high) 
    {
        final int rest = 10;
        int minimum = 0;
        for (int l : low)
            minimum += l; 
        int [] sizes = new int [names.length];
        distribute (0, low, high, rest - minimum, sizes);
        System.out.println ("total size of results are " + result.size ());
        for (int [] ia : result)
            show (ia, low); 
    }

    public static void main (String [] args) {
        final String [] names = new String [] {"a", "b", "c"};
        int [] low = new int [] {2, 2, 1};
        int [] high = new int [] {3, 4, 6};
        new Distributor (names, low, high);
    }

    /*
        distribute the rest of values over the elements in sizes, beginning with index i.           
    */
    void distribute (int i, int [] low, int [] high, final int rest, int [] sizes) {
        // System.out.println (i + " " + rest + " " + sizes);
        if (i == sizes.length - 1) {
            if (rest < high [i]) {
                sizes[i] = rest; 
                result.add (Arrays.copyOf (sizes, sizes.length));
            }
        }
        else 
            for (int c = 0; 
                c <= java.lang.Math.min (high [i] - low [i], rest); 
                ++c) {  
                sizes [i] = c;
                    distribute (i + 1, low, high, rest - c, sizes);                 
            }
    }

    private static void show (int [] arr, int [] low) {      
        for (int x = 0; x < arr.length; x++) {
            System.out.print (" " + (arr [x] + low[x]));
        }
        System.out.println ();
    }
} 
```

如果长变量名称比短变量名称更清晰，则它们会更好。但它们本身并不更有价值。

更重要的是：坚持命名约定，即 Java 中的 CamelCase，not_funky_underlines。

好的 - 为什么低和高应该是静态的？我没有为“名称”和“结果”制定这个方向。保留作为移除静态修饰符的练习。

好的 - 我的印象是，总和需要始终为 100，而不是更少，也不是高于 100。因此，如果 4x20% 是最小值，那么最大值是 60% 是不可能的。但我知道这些值是可变的，在另一种设置中，您可能有 4x10% 的最小值，然后，最大值为 60% 是有意义的。我没有为此目的测试代码。

但是我从其余部分中减去最小值 (4*20%) 以进行分配，因此您必须添加这些值以获得最终结果。

递归分布函数以终止条件开始：到达最后一个元素。现在剩下的——可能是多少——必须放在最后一个元素上。

否则，您将获取该元素的所有可能值，然后分配其余值。

### 更新：

我更改了代码以处理上限，并在一方面简化了示例，因为它现在只使用 3 个元素并且最多 10 个而不是 100 个。输出显示实际值（最小值 + 变量部分）和该算法仅添加不违反上限约束的解决方案。

样本输出：

```
 2 2 6
 2 3 5
 2 4 4
 3 2 5
 3 3 4
 3 4 3
total size of results are 6 
```

# php - 在 html 页面中运行 PHP 脚本

> ID：10760102
> 
> 赞同：2
> 
> 时间：2012-05-24T20:51:52.510
> 
> 标签：php, html

我已经在网站上没有注意到这个问题，而且我很难处理它。

我只是想在 html 页面的顶部运行一个 php 脚本来检查 cookie 的存在，本质上是一个受密码保护的网站。如果浏览者有 cookie，则允许他们继续，否则他们将被重定向到登录页面。我对网络开发很陌生，但我被引导理解....

```
<html>
I am in html!
<?php
//Code goes here
echo "I am in php!";
?>
I am back in html!
</html> 
```

会工作......但我只得到html部分的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T21:08:47.993

PHP是在服务器端处理的，而不是在客户端处理的……另一方面，HTML是在客户端处理的。

您应该做的不是在 html 页面中运行 php，而是在 php 页面中运行 html。

这样做的原因是，如果您将内容和安全机制都发送给客户端，那么有人很容易绕过安全性 -[例如看这里](http://jackdonnell.com/articles/javapass.html)并简单地查看源代码。

如果您想要正确的 PHP，您将拥有以下内容：

```
if(isset($_COOKIE['MyCookie'])){; 
// Escape PHP and put html here...

//go back to php.
} 
```

您将需要一个可以处理 PHP 的服务器，但是，我应该说有更好的方法来保护页面，例如 .htaccess 和类似的，我敦促您关闭它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:46:26.140

通常 .html 页面不会运行 php 代码。但是我们可以通过在 .html 文件所在的同一文件夹中创建一个 .htaccess 文件来运行 PHP 代码。在 .htaccess 文件中添加此代码

AddHandler 应用程序/x-httpd-php5 .html .htm

此代码可能因您使用的 php 版本和服务器而异

# excel - 如何添加映射到相似字符串的数值

> ID：10760107
> 
> 赞同：0
> 
> 时间：2012-05-25T19:09:29.340
> 
> 标签：excel, vba

我将一个 SQL 查询转储到 Excel 中，并正在寻找一种自动化的方法。

这就是我所拥有的。

```
site                             12
site/subsite                     22
another site                     77
another site/subsite             16 
```

我的问题是：在 Excel 中有没有办法为网站及其相关子网站添加总计？我有大约 4000 行，所以希望节省体力劳动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:27:20.403

使用该`SUMIF()`功能。

这是一个可以帮助您入门的示例：

将您的数据放在 A 列和 B 列中（A 中的站点，B 中的值）。

在单元格 D1 中添加与站点名称之一完全匹配的列标题。

在单元格 D2 中添加此公式：

```
=SUMIF($A6:$B17, D1, $B6:$B17) 
```

修改开始行和结束行以覆盖整个数据集。（在我设置的示例中，数据位于第 6 到第 17 行。）

您可以列出所有站点和子站点，并让公式参考数据范围来计算每个站点的总数。

# iphone - 如何告诉表格绘制高度ForFooterInSection

> ID：10760109
> 
> 赞同：0
> 
> 时间：2012-05-25T19:09:44.707
> 
> 标签：iphone, uitableview

我的表格视图有 8 个部分，我将最后一个部分（第 7 部分）的页脚高度设置为 80，以便表格视图对用户友好。

```
- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section {
    switch (section) {
        case 7:
            return 80;
    }
    return 10;
} 
```

我的单元格有一个文本字段，我进行了编程，以便当键盘弹出时，我仍然可以滚动表格并查看每个部分。当键盘被关闭时，我注意到最后一部分的页脚高度已经缩小了一点。

我的问题：关闭键盘后如何强制我的表格重新绘制部分页脚的高度

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-25T19:17:17.087

你可以调用 UITableView 的方法 reloadData

# java - 序列化循环对象树 – StackOverflowError – 需要自定义序列化代码

> ID：10760112
> 
> 赞同：2
> 
> 时间：2012-05-25T19:09:59.963
> 
> 标签：java, android, serialization, deserialization, cyclic

我正在制作一个 android 应用程序，其中有一个**双向循环对象树，我需要对其进行序列化**以填充 Sqlite 数据库中的 blob 字段。但是默认的序列化实现会向我抛出 StackOverflowError （底部的堆栈跟踪）。但是我没有编写自定义 java 序列化代码来避免这种情况的经验。

我这个线程（[StackOverflowError when serializing an object in Java](https://stackoverflow.com/questions/438875/stackoverflowerror-when-serializing-an-object-in-java)）他谈到了这个问题，但在我的情况下如何实现它我真的不知道：

> 可以为这样的列表类定义 writeObject() 方法，当第一个链接被序列化时，只需遍历列表并迭代地序列化每个链接；这将阻止使用默认的递归机制。

这是我的对象模型（查看 1/M，而不是其他标志）： ![在此处输入图像描述](../Images/002d76370607d5abb346a509045cb340.png)

这是我用来将对象模型序列化为字节数组的方法（本来不那么重要）：

```
public byte[] serialize(Object object) {
        byte[] buf = null;
        try {
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            ObjectOutput out = new ObjectOutputStream(bos);
            out.writeObject(object);
            out.close();
            buf = bos.toByteArray();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return buf;
    } 
```

自定义序列化函数：

```
private void writeObject(java.io.ObjectOutputStream out) throws IOException {
    //please help me with this code
}
private void readObject(java.io.ObjectInputStream in) throws IOException, ClassNotFoundException {
    //please help me with this code
} 
```

**希望有人帮我解决这个问题。任何线索表示赞赏。**

异常堆栈跟踪：

```
05-25 20:28:16.231: E/AndroidRuntime(14451): FATAL EXCEPTION: main
05-25 20:28:16.231: E/AndroidRuntime(14451): java.lang.StackOverflowError
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.util.IdentityHashMap.findIndex(IdentityHashMap.java:419)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.util.IdentityHashMap.get(IdentityHashMap.java:371)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.dumpCycle(ObjectOutputStream.java:471)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1739)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:1143)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:413)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1241)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1575)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:1143)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:413)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1241)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1575)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.util.ArrayList.writeObject(ArrayList.java:651)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.lang.reflect.Method.invokeNative(Native Method)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.lang.reflect.Method.invoke(Method.java:507)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1219)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1575)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:1143)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:413)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1241)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1575)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:1143)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:413)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1241)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1575)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.util.ArrayList.writeObject(ArrayList.java:651)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.lang.reflect.Method.invokeNative(Native Method)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.lang.reflect.Method.invoke(Method.java:507)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1219)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1575)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:1143)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:413)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1241)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1575)
05-25 20:28:16.231: E/AndroidRuntime(14451):    at java.io.ObjectOutputStream.writeObject 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:41:17.087

Java 序列化可以正确处理循环图，但是长列表是个问题。

如果我理解正确，您的问题与您链接的文章中的问题有点不同，因为那篇文章讨论了没有正确 writeObject 的链接列表 .. 而目前您正在使用 ArrayLists，它已经将对象存储为平面数组，并且也有一个合适的 writeObject。

但是，如果我做对了，发生的事情或多或少是这样的：

你开始序列化对象A，在序列化过程中它遇到一个长列表，获取第一个元素并序列化对象B，对象B也有一个长列表，它获取第一个元素，再次说它是A，因为它已经被序列化了跳过A，因此它不会陷入无限循环，而是转到B列表中的第二个对象，即C，C也有一个很长的列表，前两个元素又是A和B，所以它们被跳过，第三个是 D，它也有一个列表....等等。

由于这些步骤中的每一步都是堆栈空间中的几行，因此它会被填满，即使它们都是具有正确 writeObject 方法的 ArrayList。

如果与您拥有的运行时相比，这些列表扩展到相对“大”的数字，则可能会出现这种情况。这就是我在评论中问的原因。也许可以找到一个解决方案，避免序列化某些列表（使它们成为瞬态），并在“部分”反序列化后重建它们。

# machine-learning - 查询输入向量的SVM映射？和 SVM 优化方程

> ID：10760114
> 
> 赞同：1
> 
> 时间：2012-05-25T19:10:01.683
> 
> 标签：machine-learning, information-retrieval, svm

我已经阅读了很多论文，并且非常了解支持向量机的基本概念。你给它一个训练输入向量，它具有一组特征，并基于“优化函数”如何评估这个输入向量让我们称之为 x，（假设我们正在谈论文本分类），与输入向量相关联的文本x 被分类为两个预定义的类别之一，这仅适用于二进制分类。

所以我的**第一个问题**是通过上面描述的这个过程，所有的论文都首先说这个训练输入向量 x 被映射到更高的（可能是无限的）维空间。那么这个映射实现了什么或者为什么需要这个呢？假设输入向量 x 有 5 个特征，那么谁来决定 x 将映射到哪个“更高维度”？

**第二个问题**是关于以下优化方程：

min 1/2 wi(转置)*wi + C Σi = 1..n ξi

所以我知道 w 与图中支持向量的超平面的边距有关，我知道 C 是某种惩罚，但我不知道它是什么惩罚。在这种情况下，ξi 代表什么。

非常感谢对第二个问题的简单解释，因为我没有通过阅读技术论文来理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T22:29:42.163

当他们谈论映射到高维空间时，他们的意思是内核完成的事情与将点映射到高维空间然后在那里取点积相同。SVM 基本上是一个线性分类器，但如果你使用内核，它们在不同于原始数据空间的空间中是线性的。

具体来说，我们来谈谈内核

K(x, y) = (xy + 1)^2 = (xy)^2 + 2xy + 1,

其中 x 和 y 都是实数（一维）。注意

(x^2, sqrt(2) x, 1) • (y^2, sqrt(2) y, 1) = x^2 y^2 + 2 xy + 1

具有相同的价值。所以 K(x, y) = phi(x) • phi(y)，其中 phi(a) = (a^2, sqrt(2), 1)，并用这个核（非齐次多项式核度 2) 与您首先将 1d 点映射到该 3d 空间然后执行线性内核相同。

流行的高斯 RBF 核函数相当于将您的点映射到无限维希尔伯特空间。

当你选择一个内核时，你是决定它映射到什么特征空间的人。但是，当您这样做时，您不一定需要考虑显式映射，重要的是要注意数据实际上从未显式地转换到那个高维空间 - 那么无限维点将难以表示。:)

* * *

ξ_i 是“松弛变量”。没有它们，SVM 将永远无法解释[非线性可分](http://en.wikipedia.org/wiki/Linearly_separable)的训练集——大多数现实世界的数据集都不是。从某种意义上说，ξ 是将边缘错误一侧的数据点推到正确一侧所需的数量。C 是一个参数，它决定了增加 ξ 的成本（这就是它在那里相乘的原因）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T22:31:46.987

1）高维空间通过内核机制发生。然而，在评估测试样本时，不需要显式计算更高维空间。（很明显，必须如此，因为我们无法在计算机上表示无限维。）例如，径向基函数内核意味着无限维空间，但我们不需要明确映射到这个无限维空间。我们只需要计算 K(x_sv,x_test)，其中 x_sv 是支持向量之一，x_test 是测试样本。

具体的高维空间由训练过程和参数选择，它们选择一组支持向量及其相应的权重。

2)`C`是与无法完美分类训练集的成本相关的权重。优化方程表示在非完美分类和低边际这两种不良情况之间进行权衡。ξi 变量代表了我们无法对训练集的实例 i 进行分类的程度，即实例 i 的训练误差。

请参阅 Chris Burges 在 SVM 上的教程，了解您将在任何地方 (IMO) 获得的最直观的解释。

# gcc - 如何找到哪个版本的 gcc 对应哪个版本的 binutils？

> ID：10760120
> 
> 赞同：0
> 
> 时间：2012-05-25T19:10:27.530
> 
> 标签：gcc, version, binutils

就像问题听起来一样。

如果对于任何给定的版本对都没有通用的方法来回答这个问题，那么至少有人可以回答 gcc 3.4.6 和 ld 2.15.92.0.2 是否相互对应的具体问题吗？

谢谢。

我正在看问题：-

[帮助链接器失败：.gnu.linkonce.t](https://stackoverflow.com/questions/1239730/help-with-linker-failer-gnu-linkonce-t)

[请解释此链接错误：在 .rodata 部分中引用](https://stackoverflow.com/questions/5333871/please-explain-this-linking-error-referenced-in-section-rodata)

我得到的错误与这些问题的提问者完全相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T19:18:49.930

它们是具有不同发布时间表的独立项目，因此您的问题没有单一的答案。它们之间的接口是诸如 ELF、.a 库和 .o 目标文件格式之类的东西，它们都被很好地指定了，所以除了花哨的新特性之外，真的没有理由将它们串联开发。

你有一个具体的问题要回答吗？比如“我应该使用哪个 binutils 版本？” 或“Fedora 15 附带了哪些 gcc/binutils 版本？”

# facebook - 加载 Facebook Like（或类似）脚本一次

> ID：10760123
> 
> 赞同：0
> 
> 时间：2012-05-25T19:10:52.820
> 
> 标签：facebook, twitter, facebook-like

有什么方法可以让这些插件的按钮在一个页面中出现两次，但只加载一次它们的脚本？

插件，例如：Facebook Like、Tweet this、G+ this。

示例：在标题下方的博客文章中：Tweet this, G+ and Facebook Like。在这篇文章的左侧有一个带有相同按钮的固定栏：Facebook、Tweet 和 Google。

对于每个按钮渲染，脚本会加载两次。

只是好奇到目前为止是否存在/完成了任何方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:12:34.443

如果脚本完全相同，那么是的，它们将被加载两次，但其中一个将从浏览器缓存中加载。这里没什么好担心的。

甚至在访问您的网站之前，用户很可能已经在他们的浏览器缓存中拥有这些脚本。今天，我们到处都能看到点赞、+1、推文和各种各样的**内容**。我会说假设普通用户将这些常用脚本缓存在本地是非常安全的。

# dns - AppHarbor 将我的域指向 www.hostname.com 但不是 hostname.com

> ID：10760128
> 
> 赞同：0
> 
> 时间：2012-05-25T19:11:24.597
> 
> 标签：dns, hosting, appharbor

我有兴趣让我的网站同时显示这两个网址 - www.example.com 和 example.com。DNS 正常工作并将 www.example.com 重定向到 184.72.232.XXX 并显示网站但不显示 example.com。我尝试了 2 个主机名设置：

1.  www.example.com，规范=真
2.  *.example.com（无法设置规范）

两种主机名配置具有相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:34:51.083

您还需要添加“example.com”（并保留“*.example.com”）。通配符仅匹配子域。如果您希望 www 版本成为规范主机名，您还需要添加它。

# html - 选择器之前的 CSS 默认宽度

> ID：10760130
> 
> 赞同：0
> 
> 时间：2012-05-25T19:11:41.993
> 
> 标签：html, css

有没有办法为一组 div 设置默认宽度，然后更改每个宽度，而不管 CSS 中的顺序如何？示例 JSFiddle 位于[http://jsfiddle.net/RfHSA/](http://jsfiddle.net/RfHSA/)。

我试图将每个 div 设置为`width:20%`，但是当鼠标悬停在其中一个内部 div 时，悬停的特定 div 应该设置为`width:72%`，其他设置为`width:7%`（包括在 HTML 结构中出现在它之前的那些） . 仅使用 CSS 是否可行，还是需要 Javascipt/jQuery？

编辑：我想要实现的示例在这里：[http ://www.kriesi.at/themes/newscast/](http://www.kriesi.at/themes/newscast/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:30:44.977

我想推荐一个简单的解决方案来满足您的需求：http: [//jsfiddle.net/linmic/qcnmu/1/](http://jsfiddle.net/linmic/qcnmu/1/)

我们只需将 display: table 应用于“listwrapper”并将 display: table-cell 应用于“outerbox”，然后一切正常。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:19:14.543

你在那里 99%：http: [//jsfiddle.net/RfHSA/2/](http://jsfiddle.net/RfHSA/2/)

```
.featuredwrapper {
    width:100%;
    height:350px;
    margin:auto;
    background-color:rgba(0,0,0,0.5);
    padding-top:12px;
    position:relative;
}

.listwrapper {
    width:95%;
    max-width:1100px;
    height:325px;
    margin:auto;
    position:relative;
}

.listwrapper:hover .outerbox {
    width:7%;
}
.outerbox {
    width:20%;
    height:100%;
    display:inline-block;
    background-color:#e8e8e8;
    margin-left:-4px;
    box-shadow:-5px 0px 5px rgba(51,51,51,0.85);
    -webkit-transition: width .3s ease-out;    
}

.listwrapper:hover .outerbox:hover {
    width:72%;
}

.outerbox:first-child{
    margin-left:0px;
}

.hoveractive {
    position:absolute;
    width:95%;
    height:325px;
    z-index:1000;
    padding-top:12px;
} 
```

我最低限度地修复了它们都错误地关闭，我认为与百分比宽度相关的十进制宽度相关的剩余问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T19:44:18.530

[http://jsfiddle.net/RfHSA/15/](http://jsfiddle.net/RfHSA/15/)

这是您的脚本的工作版本。您肯定需要在这里进行一些 javascript 操作才能使其正常工作。我尝试尽可能少地使用，从结果中可以看出，它有点不稳定，但希望它能让你走上正确的轨道。

编辑：哦，好吧，我试过了，但是其他人的解决方案更好=P

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T20:02:33.340

**更新以防止过早崩溃**

调整你的 CSS 给出了这个解决方案（[见 fiddle](http://jsfiddle.net/RfHSA/27/)）。它需要`padding-top`从 the 移动`.listwrapper`到 the`.featuredwrapper`以防止从顶部入口过早崩溃：

**调整 CSS**

```
.outerbox {
    width:20%;
    height:100%;
    display:inline-block;
    background-color:#e8e8e8;
    margin-left:-4px;
    box-shadow:-5px 0px 5px rgba(51,51,51,0.85);
    -webkit-transition: width .3s ease-out;    
}

/*prevents premature collapse on right side entry*/
.outerbox:last-of-type:after { 
    content: '';
    width: 2px;
    height: 100%;
    position: absolute;
    top: 0;
    right: -2px;
}

.listwrapper:hover .outerbox {
    width: 7%;
}

.listwrapper .outerbox:hover {
    width:72%;
} 
```

# scala - 使用 specs2 和 FakeApplication() 测试数据库失败的进化插入

> ID：10760131
> 
> 赞同：6
> 
> 时间：2012-05-25T19:11:42.333
> 
> 标签：scala, testing, playframework, playframework-2.0, specs2

这是为了玩！框架 2.0。

我正在尝试编写一个简单的测试用例，以确保我的用户模型正常运行并将数据保存在我的数据库中。如果可能的话，我想在内存中运行它，这样每次新的运行我都可以重新开始。

我遇到的问题是我的进化运行（创建了表，插入了数据，但我无法查询它是否存在）。首先，我的代码。

```
CREATE TABLE user_data (
id SERIAL PRIMARY KEY,
user_name varchar(256) UNIQUE NOT NULL,
email varchar(256) NOT NULL,
password varchar(256) NOT NULL,
edits int NOT NULL,
reports int NOT NULL,
active BOOLEAN NOT NULL);

INSERT INTO user_data(user_name, email, password, edits, reports, active) VALUES ('user1', 'user1@email.com', '12345678', 0, 0, true); 
```

在 application.conf

```
db.default.driver=org.postgresql.Driver
db.default.url="postgres://user:password@localhost:5432/ME" 
```

在 build.scala

```
val appDependencies = Seq(
  // Add your project dependencies here,
    "postgresql" % "postgresql" % "9.1-901-1.jdbc4"
) 
```

测试代码

```
class User_dataSpec extends Specification {

  "The Database" should {
    "persist data properly" in {
  running(FakeApplication(additionalConfiguration = inMemoryDatabase())) {

      //User_data.findAll().length must beEqualTo(1)
      //Create users
      User_data.create("user1", "password1", "email@test1.com") must beEqualTo(1)
      User_data.create("user2", "password2", "email@test2.com") must beEqualTo(2)
      User_data.create("user1", "password3", "email@test3.com") must beEqualTo(0)

      //Count users
      User_data.findAll().length must beEqualTo(2)

      //Verify users exist
      User_data.exists("user1") must beTrue
      User_data.exists("user2") must beTrue

      //Verify user doesn't exist
      User_data.exists("user3") must beFalse

      //Find users by ID
      User_data.findUser(1).get.user_name must beEqualTo("user1")
      User_data.findUser(2).get.user_name must beEqualTo("user2")

      //Fail to find users by ID
      User_data.findUser(3) must beNone

      //Find users by user_name
      User_data.findUser("user1").get.user_name must beEqualTo("user1")
      User_data.findUser("user2").get.user_name must beEqualTo("user2")

      //Fail to find users by user_name
      User_data.findUser("user3") must beNone

      //Authenticate users
      User_data.authenticate("user1", "password1") must beTrue
      User_data.authenticate("user2", "password2") must beTrue

      //Fail to authenticate users
      User_data.authenticate("user1", "password2") must beFalse
      User_data.authenticate("user3", "passwordX") must beFalse

      //Confirm the user was inserted properly
      val user = User_data.findUser("user1")
      user.get.user_name must beEqualTo("user1")
      user.get.email must beEqualTo("email@test1.com")
      user.get.password must beEqualTo("password1")
      user.get.edits must beEqualTo(0)
      user.get.reports must beEqualTo(0)
      user.get.active must beTrue
      }
    }
  }
} 
```

此代码将按书面形式通过，但不应如此。如果我取消注释运行块中的第一个测试用例以测试我的 findAll() 函数的长度应该为 1，它将立即失败。但是，如果我将其更改为在我的机器上使用持久化的 PostgreSQL 数据库，它仍然会立即失败，但是当我查看 PostgreSQL 数据库时，我的 user_data 表中有单个进化应用插入，并且 play_evolutions 表有条目对于我的进化，并标记为状态 =“已应用”，最后一个问题 =“”。

任何帮助将不胜感激，谢谢。

（PS，我是第一次发帖，但会尽我所能尽快接受那些愿意提供帮助的人的答案）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:27:13.677

*** 更新 ***

正如 Jakob 所说，进化失败的原因可能是因为为 MySQL 编写的 SQL 与 H2DB 不兼容。您可以通过按照原始答案使用单独的 MySQL 进行测试来解决此问题，或者将 H2DB 置于 MySQL 兼容模式，这可能会解决问题（请参阅[Fixtures in Play! 2 for Scala](https://stackoverflow.com/questions/12421976/fixtures-in-play-2-for-scala/12445815#12445815)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:48:04.463

我认为这是游戏框架 2.0 中的错误

[https://play.lighthouseapp.com/projects/82401/tickets/295-20test-testhelpers-method-evolutionfor-do-wrong-if-fakeapplication-with-inmemroydatabase](https://play.lighthouseapp.com/projects/82401/tickets/295-20test-testhelpers-method-evolutionfor-do-wrong-if-fakeapplication-with-inmemroydatabase)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:02:33.690

Evolutions 和 H2 的问题在于 H2 不兼容你可以用 postgres 或 MySQL 做的所有事情。因此，进化将在产品中运行良好，但在测试中失败。我在一个项目中遇到了这个问题，最终通过简单地不使用进化来解决它，而是使用 liquibase 作为数据库的东西。

或者需要确保您编写的 sql 可以在 H2 上运行。在这种情况下，进化将正常工作。我不记得 H2 到底有什么问题（我认为是关于索引的问题）

# javascript - 如果两个不同部分的子类匹配，我如何调用 jQuery 函数？

> ID：10760136
> 
> 赞同：2
> 
> 时间：2012-05-25T19:12:04.707
> 
> 标签：javascript, jquery, variables, css-selectors

所以我一直在尝试编写 jquery 来使一个元素在另一个元素悬停时变为活动状态。这将用于在悬停位置时突出显示地图上的区域。

我让它为一个目的地工作，使用：

```
function engageMaps(){ 
  var destination = $(".destination .cancun"); 
  var pin = $(".image_map .cancun"); 
  $(destination).hover( 
    function () { 
      $(pin).addClass("active"); 
    }, 
    function () { 
      $(pin).removeClass("active"); 
    } 
  );
}; 
```

但我需要它适用于基于元素类的所有目的地。如果类匹配，那么它们应该是活动的。

我尝试做这样的事情（不起作用。可能写错了）

```
function engageMaps(){ 
  var destination = (($(".destination").children()).attr('class')); 
  var pin = (($(".image_map").children()).attr('class'));
  if($(destination) === $(pin)){
    $(destination).hover( 
      function () { 
        $(pin).addClass("active"); 
      }, 
      function () { 
        $(pin).removeClass("active"); 
      } 
    );
  };
}; 
```

这是html：

```
<div class="image_map">
  <a class="cancun" id="cancunPin" href="#">Cancun</a>
  <a class="cozumel" id="cozumel" href="#">Cozumel</a>
</div>
<div class="destinations">
  <ul>
    <li class="destination"><a class="cancun" href="#">Cancun</a></li> 
    <li class="destination"><a class="Cozumel" href="#">Cozumel</a></li>
  </ul>
</div> 
```

如果有人可以帮助我，那就太棒了。我希望我解释得足够好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:22:00.367

这可能会做你想要的。也许。

[http://jsfiddle.net/sUgyW/](http://jsfiddle.net/sUgyW/)

```
$('.destinations a').hover(
    function () {
        $('.image_map a.' + $(this).attr('class')).addClass('active');
    },
    function () {
        $('.image_map a').removeClass('active');
    }
); 
```

我还稍微调整了您的 HTML：更改`class="Cozumel"`为`class="cozumel"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:23:20.253

那是当**且仅当**项目具有一个类（例如“cancun”，而不是“map cancun comething else”）：

```
function engageMaps(){ 
  var destination = $(".destination a"); 
  $(destination).hover( 
    function () { 
      var pin = $(".image_map ."+$(this).attr("class")); 
      $(pin).addClass("active"); 
    }, 
    function () { 
      var pin = $(".image_map ."+$(this).attr("class")); 
      $(pin).removeClass("active"); 
    } 
  );
}; 
```

否则，您可以构建所有位置（技术上的类）的列表，并遍历这些位置：

```
function engageMaps(cls){ 
  var destination = $(".destination ."+cls); 
  var pin = $(".image_map ."+cls); 
  $(destination).hover( 
    function () { 
      var pin = $(".image_map ."+cls); 
      $(pin).addClass("active"); 
    }, 
    function () { 
      $(pin).removeClass("active"); 
    } 
  );
};
var classes = ["cancun", "cozumel"];
for (var i=0; i<classes.length; i++) {
    engageMaps(classes[i]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T19:23:34.140

像这样的东西会起作用。但前提是目标类与 image_map 类匹配（由于某种原因，它们目前不匹配）

```
$('.destinations a').hover(function(){
    $('.image_map .'+$(this).attr('class')).addClass('active');
},function(){
    $('.image_map .'+$(this).attr('class')).removeClass('active');
}); 
```

* * *

我可能会这样改变它：

```
<div class="image_map">
  <a id="cancun" href="#">Cancun</a>
  <a id="cozumel" href="#">Cozumel</a>
</div>

<div class="destinations">
  <ul>
    <li><a data-location="cancun" href="#">Cancun</a></li> 
    <li><a data-location="cozumel" href="#">Cozumel</a></li>
  </ul>
</div> 
```

然后使用

```
$('.destinations a').hover(function(){
    $('.image_map #'+$(this).data('location')).addClass('active');
},function(){
    $('.image_map #'+$(this).data('location')).removeClass('active');
}); 
```

这样，如果您向目的地添加其他类，它仍然有效

# c# - 在编译时不知道目标类型的情况下设置属性

> ID：10760139
> 
> 赞同：3
> 
> 时间：2012-05-25T19:12:23.443
> 
> 标签：c#, c#-4.0

我想在编译时不知道对象类型的情况下设置对象的属性值；我希望它快（即不是每次都使用反射）；我知道属性名称和类型。

最快的方法（afaik）是使用代表；所以这就是我到目前为止所拥有的：

```
class User // this is an example.. Assume I don't know which type this is.
 {
    public string Name {get;set;}   
 }

public static Action<object, object> CreatePropertySetter(Type targetType, string propertyName)
{
    ParameterExpression targetObjParamExpr = Expression.Parameter(targetType);
    ParameterExpression valueParamExpr = Expression.Parameter(targetType.GetProperty(propertyName).PropertyType);

    MemberExpression propertyExpr = Expression.Property(targetObjParamExpr, propertyName);

    BinaryExpression assignExpr = Expression.Assign(targetObjParamExpr, valueParamExpr);

    Action<object, object> result = Expression.Lambda<Action<object, object>>(assignExpr, targetObjParamExpr, valueParamExpr).Compile();
    return result;
} 
```

然后我会打这个电话：

```
User user = new User();
var userNameSetter = CreatePropertySetter(user.GetType(), "Name");
userNameSetter(user, "Bob"); 
```

但是，它不喜欢我传递 User 类型对象而不是 Object 的事实，并且由于“ *'User' 类型的 ParameterExpression 不能用于'System.Object'类型的委托参数”*而失败。

我是表达式树的新手，所以在这里有点迷路。为什么它不能将 User 转换为 object ？我需要在某个地方进行演员表吗？

“动作”看起来也不太好；只返回一个带参数的委托（用户用户，字符串属性值）会更好。同样，不知道如何做到这一点。实际上，我已经用 Delegate.CreateDelegate 尝试过，但它使用 .Invoke() 方法调用，这很慢（这是唯一的方法吗？）；与 Expression.Lambda 相同（非泛型）。

有什么想法吗 ？

此外，是否有关于表达式树的好的（比 msdn 更好的）文档？msdn 版本确实缺乏细节。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T19:21:54.293

如果要使用表达式，则：`Convert`...

```
static void Main()
{
    var setter = CreatePropertySetter(typeof (User), "Name");
    var obj = new User();
    setter(obj, "Fred");
}
public static Action<object, object> CreatePropertySetter(Type targetType, string propertyName)
{
    var target = Expression.Parameter(typeof (object), "obj");
    var value = Expression.Parameter(typeof (object), "value");
    var property = targetType.GetProperty(propertyName);
    var body = Expression.Assign(
        Expression.Property(Expression.Convert(target, property.DeclaringType), property),
        Expression.Convert(value, property.PropertyType));

    var lambda = Expression.Lambda<Action<object, object>>(body, target, value);
    return lambda.Compile();
} 
```

然而！您可能想查看[FastMember](http://code.google.com/p/fast-member/)（也可在 NuGet 上获得），它非常方便地为您包装**了所有这些（并使用原始 IL 来进行愚蠢的疯狂操作）。**

如果要使用类型化委托，则需要提前知道类型。如果你**知道**类型，你可以添加一些通用的：

```
static void Main()
{
    var setter = CreatePropertySetter<User,string>("Name");
    var obj = new User();
    setter(obj, "Fred");
}
public static Action<TType, TValue> CreatePropertySetter<TType, TValue>(string propertyName)
{
    var target = Expression.Parameter(typeof (TType), "obj");
    var value = Expression.Parameter(typeof (TValue), "value");
    var property = typeof(TType).GetProperty(propertyName);
    var body = Expression.Assign(
        Expression.Property(target, property),
        value);

    var lambda = Expression.Lambda<Action<TType, TValue>>(body, target, value);
    return lambda.Compile();
} 
```

# ruby - 在 ruby 中优雅地实现“map (+1) list”

> ID：10760142
> 
> 赞同：6
> 
> 时间：2012-05-25T19:12:40.600
> 
> 标签：ruby

标题中的短代码在 Haskell 中，它执行以下操作

```
list.map {|x| x + 1} 
```

在红宝石中。

虽然我知道这种方式，但我想知道的是，有没有更优雅的方式可以像在 Haskell 中那样在 ruby​​ 中实现相同的东西。

我真的很喜欢`to_proc`ruby​​ 中的快捷方式，比如这种形式：

```
[1,2,3,4].map(&:to_s)
[1,2,3,4].inject(&:+) 
```

但这仅接受 Proc 和方法之间完全匹配的参数编号。

我正在尝试寻找一种方法，允许将一个或多个参数额外传递到 Proc 中，而不像第一个演示那样使用无用的临时块/变量。

我想这样做：

```
[1,2,3,4].map(&:+(1)) 
```

ruby 有类似的方式来做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T19:24:04.480

如果您只想添加一个，那么您可以使用以下[`succ`方法](https://ruby-doc.org/core/Integer.html#method-i-succ)：

```
>> [1,2,3,4].map(&:succ)
=> [2, 3, 4, 5] 
```

如果要添加两个，可以使用 lambda：

```
>> add_2 = ->(i) { i + 2 }
>> [1,2,3,4].map(&add_2)
=> [3, 4, 5, 6] 
```

对于任意值，您可以使用构建 lambdas 的 lambda：

```
>> add_n = ->(n) { ->(i) { i + n } }
>> [1,2,3,4].map(&add_n[3])
=> [4, 5, 6, 7] 
```

您还可以使用 lambda 生成方法：

```
>> def add_n(n) ->(i) { i + n } end
>> [1,2,3,4].map(&add_n(3))
=> [4, 5, 6, 7] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T19:30:55.550

使用[ampex](http://cirw.in/blog/ampex) gem，它允许您使用方法`X`来构建任何 proc 一对一变量。这是其规范中的一个示例：

```
["a", "b", "c"].map(&X * 2).should == ["aa", "bb", "cc"] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T19:27:23.013

你不能直接用 default 来做`map`。但是，实现支持这种功能的版本非常容易。例如，[Ruby Facets](http://rubyworks.github.com/facets/)就包含了这样一个方法：

```
require 'facets/enumerable'

[1, 2, 3, 4].map_send(:+, 10)
=> [11, 12, 13, 14] 
```

实现如下所示：

```
def map_send(meth, *args, &block)
  map { |e| e.send(meth, *args, &block) }
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T23:02:57.573

In *this particular* case, you can use the following:

```
[1, 2, 3, 4].map(&1.method(:+)) 
```

However, this only works because `+` is not associative. It wouldn't work for `-`, for example.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T19:32:46.470

Ruby 没有内置支持此功能，但您可以创建自己的扩展或使用小型 gem ' [ampex](http://cirw.in/blog/ampex) '。它定义了具有扩展“to_proc”功能的全局变量 X。

它使您有可能做到这一点：

```
[1,2,3].map(&X.+(1)) 
```

甚至是：

```
"alpha\nbeta\ngamma\n".lines.map(&X.strip.upcase) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T19:21:06.090

如果只想加 1，可以使用`next`or `succ`：

```
[1,2,3,4].map(&:next)
[1,2,3,4].map(&:succ) 
```

# c# - C# 4.0 变体可以帮助我调用带有向上转换的基类构造函数吗？

> ID：10760143
> 
> 赞同：6
> 
> 时间：2012-05-25T19:12:43.630
> 
> 标签：c#, generic-variance

我正在阅读一些关于通用方差的内容，但我还没有完全理解它，但我想知道它是否使以下内容成为可能？

```
class A<T> { }

class B { }

class C : B { }

class My1  {
    public My1(A<B> lessDerivedTemplateParameter)
    {
    }
}

class My2 : My1 {
    public My2(A<C> moreDerivedTemplateParameter)
        : base(moreDerivedTemplateParameter) // <-- compile error here, cannot convert
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T19:17:53.720

不，因为虽然`C`继承自`B`，`A<C>`但不继承自`A<B>`。

要理解为什么会这样，想象一下如果`A<T>`是`List<T>`：

```
class B { }

class C : B { }

class D : B { }

class My1  {
    public My1(List<B> lessDerivedTemplateParameter)
    {
       // This is totally legal
       lessDerivedTemplateParameter.Add(new D());
    }
}

class My2 : My1 {
    public My2(List<C> moreDerivedTemplateParameter)
        // if this were allowed, then My1 could add a D to a list of Bs
        : base(moreDerivedTemplateParameter)
    {
    }
} 
```

另一方面，这是合法的：

```
interface IA<out T> { 
    public T GetSome();
}

class B { }

class C : B { }

class D : B { }

class My1  {
    public My1(IA<B> lessDerivedTemplateParameter)
    {
       // This is totally legal
       var someB = lessDerivedTemplateParameter.GetSome();
    }
}

class My2 : My1 {
    public My2(IA<C> moreDerivedTemplateParameter)
        // This is allowed, because an A<C> only *produces* C's (which are also B's)
        // so the base class (which consumes B's, and doesnt care if they are C's) 
        // can use an IA<C>
        : base(moreDerivedTemplateParameter)
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T19:26:49.960

您可以将 A 声明为具有逆变类型参数的接口，它将编译：

```
internal interface A<out T>
    {
    }

    internal class B
    {
    }

    internal class C : B
    {
    }

    internal class My1
    {
    public My1(A<B> lessDerivedTemplateParameter)
    {
    }
}

internal class My2 : My1
{
    public My2(A<C> moreDerivedTemplateParameter)
        : base(moreDerivedTemplateParameter) 
    {
    }

} 
```

# sql-server - 同步框架在无效数据上失败

> ID：10760144
> 
> 赞同：0
> 
> 时间：2012-05-25T19:12:44.537
> 
> 标签：sql-server, microsoft-sync-framework

运行 SQL '12 和同步框架。有时我会看到由于 FK 冲突而导致的同步失败，因为同步框架正在尝试将一行插入到远程数据库中，并且 FK 的值为空。挂钩到 SqlSyncProvider ApplyChangeFailed 事件并检查 Conflict.RemoteChange 数据表确认它正在尝试插入仅填充 PK 且所有其他列为空的行。我的问题是，本地同步框架触发器如何在不可能执行此插入时拾取该插入（由于多个列被设置为 NOT NULL）？

# internet-explorer - IE 10 预览版是否支持像 rotateX 这样的 CSS 3d 变换

> ID：10760145
> 
> 赞同：0
> 
> 时间：2012-05-25T19:13:08.373
> 
> 标签：internet-explorer, css

我发现 IE 9 没有这种支持，而 chrome、safari 确实有。有人能告诉我 IE 10 预览版中是否包含对 rotateX 和 translateZ 等功能的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:52:00.870

是的当然。目前，它们有些错误且有些不完整，但它们会在它发布时工作。

自己测试很容易，如果你现在想要 IE10，你可以在虚拟机中运行 Win 8 消费者预览版，尽管 Windows 7 版本迟早会推出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:19:31.287

也许你应该看看这个页面：http: [//blogs.msdn.com/b/ie/archive/2012/02/02/css3-3d-transforms-in-ie10.aspx](http://blogs.msdn.com/b/ie/archive/2012/02/02/css3-3d-transforms-in-ie10.aspx)

一个简单的谷歌查询的第一个结果......

# joomla - 重置密码链接 Joomla - 在“维护模式”/离线模式下

> ID：10760148
> 
> 赞同：1
> 
> 时间：2012-05-25T19:13:29.417
> 
> 标签：joomla

用户如何在“离线”模式下重置密码。我们将站点作为 Intranet 运行。

Joomla 2.5.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:20:30.570

嗯..这很长，但也许你可以解决。

1.  授予您的用户级别的离线访问权限（您可以在全局配置 -> 权限中执行此操作）
2.  创建一个指向用户配置文件的菜单条目并设置对您的用户可见
3.  将每个菜单/模块等设置为对“普通”用户不可见（前一个除外）

我以前从未尝试过，但它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-27T12:49:03.207

我只是想分享我的 Joomla 3.9 解决方案：在模板的文件“offline.php”中（如果模板没有offline.php，则在/templates/system 中）您可以将此代码放在显示登录表单的位置之前：

```
if( JRequest::getVar('option') == 'com_users') {
    ?><jdoc:include type="message"/><?php 
    $registrationController = new UsersController();
    $registrationController->display();
} else {
    // Login Form
} 
```

因此，如果使用“index.php?option=com_users&task=request.reset”或类似方法加载页面，它会显示重置密码的对话框，但默认显示“离线”登录表单。

# doctrine-orm - 如何在 Doctrine2 的 NamingStrategy 接口中使用表前缀？

> ID：10760150
> 
> 赞同：1
> 
> 时间：2012-05-25T19:13:42.393
> 
> 标签：doctrine-orm

我想复制我们现有的表结构，我们为所有列使用表前缀：

```
table name: 
  TBLO_TABLE_ONE
table columns:
  TBLO_COLUMN_ONE
  TBLO_COLUMN_TWO
  etc... 
```

但是，NamingStrategy 的 Doctrine Interface 似乎无法适应。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:30:13.640

我已经向 Doctrine2 github 存储库提交了一个拉取请求，添加了这个功能。

[https://github.com/doctrine/doctrine2/pull/357](https://github.com/doctrine/doctrine2/pull/357)

# facebook - “网站见解”列表中没有新应用程序

> ID：10760151
> 
> 赞同：1
> 
> 时间：2012-05-25T19:13:43.690
> 
> 标签：facebook, web, facebook-insights

上周我创建了一个新应用程序，目的是为我们的网站使用 Facebook 洞察力，但列表中没有它可以与之建立联系。我需要做任何事情来使应用程序可选择吗？

对于任何认为这个问题不是技术性问题并且不应该出现在这里的人，我是从 Facebook 的错误中被引导到这里的，因为它不是错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:25:54.567

我也遇到过同样的问题，但经过一番试验后，我发现它不会影响您声明域并将其与应用程序关联的能力。

下拉列表的作用是生成如下所示的代码片段。我猜这在您能够将其链接到 page_id 时很有用（您不能再这样做了）。只要您放置了正确的元标记（如下所示，替换`%%app_id%%`为[Facebook 应用中心](https://developers.facebook.com/apps)`app_id`给出的），您就可以随意忽略下拉菜单中显示的帐户。

```
<meta property='fb:app_id' content='%%app_id%%'/> 
```

关联帐户后，您可以返回[Facebook 应用中心](https://developers.facebook.com/apps)并设置帐户权限。

> **提示**：虽然您只能授予其他经过验证的开发人员*经理*访问该应用程序的权限，但您可以将任何朋友或电子邮件地址添加到他们需要的访问权限级别 的*洞察力。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:19:26.510

不确定这里是否是这种情况。但我**确实知道**，要查看有关页面的见解是有门槛的。

[如](https://developers.facebook.com/docs/insights/)常见问题解答中所述 -

> 查看 Insights for Pages 是否有最低用户数？是的。出于用户隐私的原因，见解仅提供给拥有超过 30 位喜欢该主页的用户的主页。

也许领域洞察力也有限制。在洞察力开始能够提供反馈之前，您应该允许一些时间和一些流量通过......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-30T04:27:24.277

我遇到了同样的错误，我尝试在此处调试我的站点[FB 调试器](https://developers.facebook.com/tools/debug) ，这是官方调试器，您可以输入 URL、访问令牌或 Open Graph 操作 ID。

这个对我有用。

# c# - 使用 Moq 对方法进行单元测试

> ID：10760153
> 
> 赞同：18
> 
> 时间：2012-05-25T19:13:50.493
> 
> 标签：c#, unit-testing, moq

我正在尝试学习如何使用 C# 和 Moq 进行单元测试，并且我已经建立了一个小测试环境。鉴于此代码：

```
public interface IUser
{

    int CalculateAge();
    DateTime DateOfBirth { get; set; }
    string Name { get; set; }
}

public class User : IUser
{
    public DateTime DateOfBirth { get; set; }
    string Name { get; set; }

    public int CalculateAge()
    {
        return DateTime.Now.Year - DateOfBirth.Year;
    }
} 
```

我想测试方法`CalculateAge()`。为此，我认为我应该尝试`DateOfBirth`通过在我的测试方法中执行此操作来为属性提供默认值：

```
var userMock = new Mock<IUser>();
userMock.SetupProperty(u => u.DateOfBirth, new DateTime(1990, 3, 25)); //Is this supposed to give a default value for the property DateOfBirth ?
Assert.AreEqual(22, userMock.Object.CalculateAge()); 
```

但是当它涉及到断言时，值`CalculateAge()`等于0，虽然`DateOfBirth`等于`new DateTime(1990, 3, 25)`。

我知道这可能看起来像一个愚蠢的例子，但无论如何......我想我可以使用模拟来为我的对象中尚未开发的方法/属性赋予值，因此方法的测试不会依赖于另一个组件我的班级，甚至为我的对象设置默认上下文（因此这里的用户名......）我是否以错误的方式处理这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-25T19:21:38.147

是的，你接近它错了，但别担心，我会解释为什么。第一个提示是

> 你可以完全删除你的`User`班级，一切都会一样。

当你在做：

```
var userMock = new Mock<IUser>(); 
```

您只是创建了该接口的假\模拟对象，与您的初始类无关`User`，因此它没有任何`CalculateAge`方法的实现，除了只是愚蠢地返回 0 的假的方法。这就是为什么你得到 0你的断言声明。

所以，你说：

> 以为我可以使用模拟来为对象中尚未开发的方法/属性赋予值，因此方法的测试不会依赖于我的类的另一个组件

您可以，假设您将拥有一些 IUser 消费者，可以这样说：

```
class ConsumerOfIUser
{
   public int Consume(IUser user)
   {
      return user.CalculateAge() + 10;
   }
} 
```

在这种情况下，模拟 IUser 将完全有意义，因为您想测试`ConsumerOfIUser`IUser.CalculateAge() 返回 10 时的行为。您将执行以下操作：

```
var userMock = new Mock<IUser>();
userMock.Setup(u => u.CalculateAge()).Returns(10);

var consumer = new ConsumerOfIUser();
var result = consumer.Consume(userMock);

Assert.AreEqual(result, 20); //should be true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T19:22:22.077

这取决于您要测试的内容。在这种情况下，您已经模拟了 User 对象，因此在将其替换为模拟对象时，测试此类内部的任何内容都没有意义。如果你想测试 User 对象，那么你不应该模拟它。

模拟用于替换您不想测试的依赖对象。例如，如果您有一个 Name 对象而不是字符串（例如，包含名字、姓氏、头衔等），但您不想测试 Name 对象，只测试 User 对象，您将创建一个模拟构造用户对象时要使用的名称对象。

# regex - Perl 和 Mechanize：我的简单正则表达式无法获得多个匹配项

> ID：10760154
> 
> 赞同：-2
> 
> 时间：2012-05-25T19:13:53.783
> 
> 标签：regex, perl, mechanize

我正在使用 WWW::Mechanize 查询 Twitter API 并将（XML）结果存储到`@content`

现在我想在该内容中搜索用户 ID（我想要的数据*总是*存储在`<id>...</id>`标签之间）。以下正则表达式在下载的文件上完美运行：

```
for ( @content ) {
  if (m/<id>(\d+)<\/id>/) { 
    print "$1\n";
   }
} 
```

但它不适`@content`用于我使用 Mechanize 创建的数组，因为它只会给我一个匹配项。

我尝试使用我[在 StackOverflow 其他地方](https://stackoverflow.com/questions/9190107/how-to-scrape-using-lwp-and-a-regex-the-date-argument-to-a-javascript-function)找到的方法之间的外观，但这似乎是一个红鲱鱼：

```
m/(?<=<id>)(\d{1,})(?=<\/id>)/g 
```

我遗漏了一些东西，但是（多年来总是在 StackOverflow 或其他地方找到答案）我很难过。显然我什至不知道如何提出正确的问题。我错过了什么？这与 Mechanize 存储数组的方式有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T21:31:17.047

```
use 5.010;
use strictures;
use WWW::Mechanize qw();
use XML::LibXML qw();

my $mech = WWW::Mechanize->new;
$mech->get('http://api.twitter.com/1/followers/ids/twitter.xml');
my $dom = XML::LibXML->load_xml(string => $mech->content);

# or skip the middle-man:
# my $dom = XML::LibXML->load_xml(location => 'http://api.twitter.com/1/followers/ids/twitter.xml');

say $_->textContent for $dom->findnodes('//id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:30:57.127

对于 XML，您需要使用 XML 解析器。什么，如果你的 XML 是这样的？

```
<id param="test">
4
</id> 
```

你需要转储你的@content 才能看到一切正确。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-25T20:11:34.220

试试这个：

```
use strict;
use warnings;
use WWW::Mechanize;
use Data::Dumper;

my $mech = WWW::Mechanize->new();

my $url = "http://api.twitter.com/1/followers/ids/twitter.xml";

$mech->get( $url );

# $mech->content is string

#print Dumper ($mech->content);

my @data = split /\n/ , $mech->content;

foreach (@data)
{
# $VAR4987 = '<id>340750222</id>';
    if (/<id>(\d+)<\/id>/)
    {
        print $1; print "\n";
    }
} 
```

# java - 使用 Eclipse 插件在 cloudfoundry 上部署 .rar

> ID：10760155
> 
> 赞同：0
> 
> 时间：2012-05-25T19:13:59.060
> 
> 标签：java, database, servlets, cloud-foundry

我目前正在使用 cloudfoundry eclipse 插件来部署我的 JSP/Servlet Web 应用程序。我的应用程序现在正在使用 Db (Sqlite)。但是我在将 sqlitejdbc.rar 部署到 cloudfoundry 时遇到问题（我更新应用程序的方法是在 VMware Cloud-foundry 服务器下右键单击我的应用程序并选择更新。但这似乎不起作用，我得到一个异常说它找不到rar文件。在我的本地系统中，我只需将sqlitejdb.rar粘贴到Tomcat的lib目录中，当我在本地运行webapp时它就可以工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T22:30:38.840

如果您将 sqlitejdbc.rar 文件放入您的 lib 目录（在您的 WEB-INF 目录中），该文件应该作为您的应用程序的一部分部署到 cloudfoundry 中并且可以访问。

您还可以尝试使用 vmc push 来部署您的应用程序，以查看您从 vmc​​ 收到的错误。我还建议查看 cloudfoundry.com 上的日志文件

# javascript - JavaScript 中共享功能（例如记录器）的 OOP 模式

> ID：10760157
> 
> 赞同：0
> 
> 时间：2012-05-25T19:14:17.140
> 
> 标签：javascript, oop, design-patterns

我需要有关如何将常用功能编程到我的 JavaScript 应用程序中的建议。例如，有这些类：Main、Logger、App 和 Template。

Main 创建一个 App 和 Logger 的实例，然后 App 创建一个 Template 的实例。Main 将自身的引用传递给 App 的 init，App 将 Main 的引用传递给 Template 的 init。现在，无论对错，Template 都直接引用了 Main 中的 Logger 实例。这是最简单的，但它似乎不是正确的 OOP，因为对记录器的任何更改都需要对调用引用的每个类进行重复编程。

或者，Template 可以只接收对 App 的引用，该引用有一个方法来调用它对 Main 的引用，它有一个方法来调用它的 Logger 实例。这似乎更安全，可以让每个人都远离，但这也意味着 Main 将充满方法来访问 Logger 和它管理的其他类。

*这里没有详细说明：我正在使用 John Resig 的 Simple JavaScript Inheritance 和 RequireJS。*

示例 1：

```
var Main = {
  init: function() {
    this.logger = new Logger();
    this.app = new App(this);
  }
}

var Logger = {
  debug: function(message) { 
    console.log(message) 
  }
}

var App = {
  init: function(main) {
    this.template = new Template(main);
  }
}

var Template = {
  init: function(main) {
    main.logger.debug("Hello");
  }
} 
```

示例 2：

```
var Main = {
  init: function() {
    this.logger = new Logger();
    this.app = new App(this);
  }
  ,debug: function(message) {
    this.logger.debug(message);
  }
}

var Logger = {
  debug: function(message) { 
    console.log(message);
  }
}

var App = {
  init: function(main) {
    this.main = main;
    this.template = new Template(this);
  }
  ,debug: function(message) {
    this.main.debug(message);
  }
}

var Template = {
  init: function(app) {
    app.debug("Hello");
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:26:06.193

我发现在使用 JavaScript 的 OOP 项目中使用[依赖注入](https://en.wikipedia.org/wiki/Dependency_injection)模式和[事件总线](https://en.wikipedia.org/wiki/Event_monitoring)模式非常有用。[如果您使用MVC](https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)或[MVP](https://en.wikipedia.org/wiki/Model-view-presenter)解耦逻辑，它对单元测试也有很大帮助。

# .net - 用户“NT AUTHORITY\ANONYMOUS LOGON”登录失败

> ID：10760162
> 
> 赞同：2
> 
> 时间：2012-05-25T19:14:41.647
> 
> 标签：.net, sql, sql-server, reporting-services

我正在 SSRS 2008 中部署报告。

我在应该部署它的同一台服务器上创建了报告。

当我尝试部署我的解决方案时收到此错误消息：

```
Login failed for user 'NT AUTHORITY\ANONYMOUS LOGON'. 
```

为什么它使用这个用户？是用这个登录数据库吗？

非常感谢您的指导和时间。请让我知道您需要哪些信息才能为我指明正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:38:47.593

*   SSRS 服务器使用数据源连接到数据库。
*   在 SSRS 服务器中设置数据源时，在凭据下：设置用户和密码。
*   将报表部署到 SSRS 服务器时。在服务器中，您需要为每个报告分配正确的数据源

如果这是 SSRS 网站的登录问题，请检查设置。[关联](http://msdn.microsoft.com/en-us/library/bb839480%28v=sql.90%29.aspx)

# python - 干净地退出python脚本

> ID：10760173
> 
> 赞同：3
> 
> 时间：2012-05-25T19:16:09.570
> 
> 标签：python, exit-code

我正在尝试退出 python 脚本而不会出现烦人的错误消息：

```
Traceback (most recent call last):
  File "<pyshell#27>", line 3, in <module>
    sys.exit()
SystemExit 
```

我已经尝试了很多东西，但没有一个奏效。这是一个例子：

```
while True:
    print "hi", #this just tests to see if I have exited.
    try:
        sys.exit()
    except SystemExit:
        print "Exited" 
```

注意：解决方案不必接近此代码，这只是我尝试过的一个例子

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T19:21:33.550

当我在 Python 控制台（在 Windows 或 Linux 下）运行它时，我在使用`sys.exit(-1)`. 但是，iPython 会给我

```
An exception has occurred, use %tb to see the full traceback.

SystemExit: -1 
```

我怀疑您看到错误消息是因为您在某种 IDE 中工作，是这样吗？

# jquery - jquery倒计时，ajax调用，删除元素错误

> ID：10760176
> 
> 赞同：0
> 
> 时间：2012-05-25T19:16:25.390
> 
> 标签：jquery, setinterval, countdown, clearinterval

好吧，我在这个网站上工作，我在一页上有一堆不同`elements`的倒计时，当他们打到 0 时，我想让他们做一个`ajax-call`，删除计时器启动器，然后删除这个`li element`计时器. 现在正如我所说，这个倒计时功能是多重的，那​​么我该`elements`怎么做呢？`clear Interval``element`

有很多标记，所以你们可以更深入地了解我想要做什么，因此我只是摆弄 -> [http://jsfiddle.net/vKtSB/3/](http://jsfiddle.net/vKtSB/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:42:53.100

你 var sid，是一个数组......它不仅仅是一个 ID。

从这里开始：http: [//jsfiddle.net/vKtSB/5/](http://jsfiddle.net/vKtSB/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:33:21.117

好吧，您使用此语法来启动间隔-

```
MasterObjectINvals['snake'][sid] = setInterval(function(){...}); 
```

那么为什么你不能简单地使用相同的语法来删除它呢？

```
var $sid = $("#selectedElement").attr('id');
clearInterval(MasterObjectINvals['snake'][$sid]); 
```

# sql-server-2008 - 结合来自 2 个 SQL 用户的权限

> ID：10760180
> 
> 赞同：0
> 
> 时间：2012-05-25T19:17:06.407
> 
> 标签：sql-server-2008, asp-classic

是否可以合并 2 个 SQL 登录名，以便我可以在同一台服务器上访问 2 个具有不同登录名的数据库？

我正在使用 ASP Classic (ADODB) 和 SQL Server 2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:44:02.430

如果要使用两组不同的凭据，则需要使用两个连接对象（或不断关闭并重新打开一个）。

例如：

```
<%
    dim dbA, dbB

    Set dbA = server.createobject("adodb.connection")
    Set dbB = server.createobject("adodb.connection")
    Set rs  = server.createobject("adodb.recordset")

    dbA.open "ConnectionStringForYourFirstDatabase"
    dbB.open "ConnectionStringForYourSecondDatabase"

    '#### Execute something to database 1 using connection string 1
    set rs = dbA.execute("")

    '#### Execute something to database 2 using connection string 2
    set rs = dbB.execute("")

    '#### Tidy Up
    set dbA = nothing
    set dbB = nothing
%> 
```

# resharper - Resharper 在项目之外找不到主文件

> ID：10760182
> 
> 赞同：1
> 
> 时间：2012-05-25T19:17:12.953
> 
> 标签：resharper

在我的 .aspx 文件中，我有 Page 指令，例如：

```
<% Page Language="C#" MasterPageFile="~/Main.master" > 
```

这些页面位于多个项目中。该`Main.master`页面位于我网站的根目录，但它在项目之外。

似乎 Resharper 认为波浪号 (~) 指的是项目的根目录，而不是网站的根目录。结果，当我将鼠标悬停在“~/Main.master”上时，我看到一个找不到路径的错误。此外，所有属性值在 ReSharper ( )中都`ContentPlaceHolderID`显示为错误。`cannot resolve symbol`

我可以告诉 ReSharper 真正的根在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T09:18:37.447

为什么不在每个项目中包含该母版页？至少，作为链接文件。

# c# - 在 C# 中获取数组的总和但收到 int32 错误

> ID：10760186
> 
> 赞同：-1
> 
> 时间：2012-05-25T19:17:35.420
> 
> 标签：c#, arrays, sum

一般来说，我知道`int32`错误意味着没有为控制台程序转换字符串值。我已经看到很多代码试图找到这个问题的答案，包括以下 stackoverflow 问题（见得多，但这些是最有用的：

*   [如何在 C# 中对整数数组求和](https://stackoverflow.com/questions/2419343/how-to-sum-up-an-array-of-integers-in-c-sharp)
*   [错误 CS1501：我没有正确重载 Sum() 方法](https://stackoverflow.com/questions/4009426/error-cs1501-im-not-overloading-a-sum-method-correctly)
*   [CS0019 运算符不能应用于“bool”和“int”类型的操作数](https://stackoverflow.com/questions/4007493/cs0019-operator-cannot-be-applied-to-operands-of-type-bool-and-int)

话虽如此，这也是一项家庭作业，标题为 UsingSum.cs，如其中几个链接所示。我和这些的不同之处在于我试图让用户输入他们想要的任何整数，然后将它们相加。整个作业写在链接2中......

问题：尽管我做出了改变，但我总是得到 0 或`System.Int32[]`而不是总和。

我不能使用 Linq。

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace UsingSum
{
class Program
{
    static void Main(string[] args)
    {
        int i;
        int usrInput;
        bool running = true;

        //Enter Question Asking Loop w/ running=true
        while (running)
        {
            Console.Write("Enter a number or enter 999 to exit: ");

            int[] array1 = new int[0];
            for (i = 0; i < array1.Length; i++)
            {
                usrInput = Convert.ToInt32(Console.ReadLine());
                array1[i] = Convert.ToInt32(usrInput);
            }

                for (i = 0; i < array1.Length; i++)
                {
                    Console.WriteLine(array1[i]);
                }

            /*If the user enters 999, calls Sum() and asks user to press any key to exit.
             changes 'running' from true to false to exit the question loop*/

            int exit = Convert.ToInt32 (Console.ReadLine());
            if (exit == 999)                    
            {
                running = false;                                       
                Sum(array1);
            }                        
        }
        //Loop complete

        Console.WriteLine("Press any key to exit.");
        Console.ReadLine();
    }

    public static void Sum(int[] numbers)
    {
        int [] sum1 = new int [0];
        int sum2 = 0;

        //Program accepts user responses with or w/o this loop...Int.32 error present both ways
        //for (int a = 0; a < numbers.Length; ++a)
            //sum1[a] = a;

        //additional loop tried w/o the loop above/below; 
            //when used in the WriteLine w/ sum2 it displays 0, when used with sum1 or numbers Int.32 error
       //Array.ForEach(sum1, delegate(int i) { sum2 += i; });

        foreach (int i in numbers)
            sum2 =+ i;

        Console.WriteLine("The sum of the values in your array is: " + sum1);
        /*tried changing 'numbers' to sum1, sum2, sum1.Convert.ToString(),sum2.Convert.ToString()
         numbers.Convert.ToString(), also tried converting sum2 to a string.*/
    }
}
} 
```

**这是我的最终解决方案！**

```
 static void Main(string[] args)
    {
        AskUserForNumbers();
        Console.WriteLine("Press any key to exit");
        Console.ReadLine(); 
    }
public static List<Int32> AskUserForNumbers()
        {
            bool running = true;
            List<int> numbers = new List<int>();
            while (running)
            {
                Console.Write("Enter a number or enter 999 to exit: ");
                int inputValue;
                var inputString = Console.ReadLine();

                //Check for "999" which indicates we should display the numbers entered, the total and then exit our loop.
                if (inputString == "999")
                {                        
                    Console.WriteLine("The sum of the values in your array is: " + numbers.Sum());
                    running = false;
                }
                else if (Int32.TryParse(inputString, out inputValue) && inputValue > 0)
                {
                    numbers.Add(inputValue);
                }
                else
                {
                    Console.WriteLine("Please enter a whole number greater than 0");
                }
            }
            return numbers;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:27:27.397

几个问题：

首先，您总是将数组声明为`int[] array1 = new int[0];`. 这意味着您用于实际获取用户输入的代码永远不会命中。也许您应该尝试使用不同的集合类型（`List<int>`也许）。

其次，您在解析整数时从不执行任何错误检查。这是不好的做法。`int.TryParse(string input, out result)`在将其添加到数组之前，您应该使用它来验证它是一个有效数字。

第三，您正在循环输入数组的长度，这意味着您将循环遍历数组的长度，并将继续这样做，直到您拥有的最后一个输入是退出号（999）。

第四，您为退出代码获得的输入被丢弃（未添加到数组中进行求和）。

请记住，编程是非常程序化的。从 a 点到 b 点应该有清晰的（合乎逻辑的）步骤。事实上，假设你是一个程序，你要一个朋友给你一些数字来为他总结。给他任何你认为可能有用的信息（比如退出条件）。绘制步骤图，然后尝试将其转换为代码。

编辑：要点是数组（具有固定大小）不是这里工作的工具。你实际上并没有用任何数据填充数组，所以这就是总和永远不会发生的原因。罪魁祸首在这里：

```
int[] array1 = new int[0]; // Instantiate a zero-length array? Can't hold any values
// Will never hit inside the loop here, because i < array1.Length (which is zero) will always be false.
for (i = 0; i < array1.Length; i++) 
```

您需要首先增加数组的大小（并重用索引或调整数组的大小）或使用非固定集合（例如 List）。最后，当您传递`array1`给 Sum 方法时，`array1`它是空的，因为您将其声明为零元素数组。这就是为什么你总是得到零打印。就像我之前说的，想象你是程序，并且实际上逐行运行所有这些步骤。

例如，您从循环开始。你准备了一个微型笔记本，记下你朋友告诉你的所有数字*，里面没有任何页面*。对于笔记本中的每一页（并意识到没有），你问你的朋友要一个数字。在你浏览完每一页之后，你现在再次浏览每一页以阅读他给你的所有值（记住他不能给你任何数字，因为笔记本是空的）。然后你再问他一个数字，如果是 999，你告诉他你已经完成了，然后给他你写下的所有数字的总和。如果他没有给你 999 作为号码，你就重复这个循环。

你明白为什么它现在不起作用了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:21:08.273

```
 public static void Sum(int[] numbers)
  {
    int sum2 = 0;

    foreach (int i in numbers)
        sum2 =+ i;

    Console.WriteLine("The sum of the values in your array is: " + sum2);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T19:22:27.927

```
foreach (int i in numbers)
    sum2 =+ i; 
```

应该成为

```
foreach (int i in numbers)
    sum2 += i; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T19:35:21.247

您的问题在于您的第一个 for 循环。您永远不会将项目添加到您的数组中，因为您的

```
 for (i = 0; i < array1.Length; i++) 
```

由于您只在进入循环时添加到 array1 数组，因此它永远不会增加。由于 i = 0 并且 array1.Length 为 0 开始，所以 i 永远不会小于长度。

这是我建议你做的。

```
private static void Main(string[] args) {
        var running = true;
        var numbers = new List<int>();

        //Enter Question Asking Loop w/ running=true
        while (running) {
            Console.Write("Enter a number or enter 999 to exit: ");
            int inputValue;
            var inputString = Console.ReadLine();

            //Check for "999" which indicates we should display the numbers entered, the total and then exit our loop.
            if (inputString == "999") {
                //Display the numbers entered
                foreach (var number in numbers) {
                    Console.WriteLine(number);
                }

                Console.WriteLine("The sum of the values in your array is: " + numbers.Sum());
                running = false;

            }
            else if (Int32.TryParse(inputString, out inputValue) && inputValue > 0) {
                //We have valid input, append it to our collection
                numbers.Add(inputValue);                    
            }
            else {
                //The user entered invalid data. Let them know.
                Console.WriteLine("Please enter a whole number greater than 0");
            }                
        }

        //Loop complete

        Console.WriteLine("Press any key to exit.");
        Console.ReadLine();
    } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-25T19:40:34.037

你这里有几个小错误。

在您的`Sum`方法中，您不再使用数组`sum1`，而是将值相加`sum2`，但您正在打印`sum1`。您的 sum 方法应该是（如[Wiktor](https://stackoverflow.com/a/10760222/1159478)所述）：

```
public static void Sum(int[] numbers)
{
  int sum2 = 0;

  foreach (int i in numbers)
      sum2 += i;

  Console.WriteLine("The sum of the values in your array is: " + sum2);
} 
```

另请注意，您使用`sum2 =+ i`而不是`sum2 =+ i`. 这就是说“设置`sum2`为等于”的正值，`i`而不是“添加`i`到`sum2`.

接下来，您在如何收集用户输入方面存在一些问题。首先，数组没有可变大小。它们的大小在创建时是固定的，并且您创建的用于保存要从用户汇总的值的数组被初始化为大小为 0。 ( `int[] array1 = new int[0];`) 如果您想从中获取固定数量的值用户您可以在数组大小中放置 0 以外的内容，但根据上下文，您似乎希望用户能够添加值，直到他们输入`999`您结束的位置。由于您事先不知道大小，因此您需要使用 a`List<int>`而不是数组，因为您只需向其中添加项目，它就会神奇地增长以支持新项目。

我还建议创建一种新方法来从用户那里获取所有值，而不是将其嵌入到您的`Main`方法中。

```
public static List<int> AskUserForNumbers()
{
  List<int> numbers = new List<int>();

  while(...)//todo determine end condition
  {
    string userInput = Console.ReadLine();
    if(...)//todo determine if user is done
    {

    }
    else
    {
      int nextNumber = ...;//todo parse user input
      numbers.Add(nextNumber);
    }
  }
  return numbers;
} 
```

我不确定当用户输入 999 时是否要求您停止询问数字，或者这就是您所做的。如果您有选择，我建议您使用不同的内容，例如空行、0、“退出”、“退出”等。999 是有人可能想要求和的数字。

正如[SPFiredrake](https://stackoverflow.com/a/10760299/1159478)所提到的，最好用于`int.TryParse()`解析用户输入，这样如果他们输入一个不是 int 的数字，它就不会崩溃，并且您可以告诉用户这不好，他们需要再试一次。

# sublimetext - 如何在崇高的文本中更改控制台的颜色？

> ID：10760188
> 
> 赞同：13
> 
> 时间：2012-05-25T19:17:47.933
> 
> 标签：sublimetext, sublimetext2

我在 Sublime Text 2 中有一个深色主题（IR Black），但控制台是黑底白字。

有没有办法改变控制台颜色？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-26T22:04:13.853

在这里找到了答案：

[http://www.sublimetext.com/forum/viewtopic.php?f=2&t=4583&p=20807#p20807](http://www.sublimetext.com/forum/viewtopic.php?f=2&t=4583&p=20807#p20807)

\Packages\Theme - 默认\Widget.sublime-settings

```
{
    // "color_scheme": "Packages/Theme - Default/Widgets.stTheme",
    "color_scheme": "Packages/Color Scheme - Default/Blackboard.tmTheme"
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-26T19:08:24.163

我不熟悉你的主题，但是漂亮的 Soda 主题有一个深色版本，所有面板（包括控制台）都是深色的：

[https://github.com/buymeasoda/soda-theme](https://github.com/buymeasoda/soda-theme)

[![苏打水深色主题](../Images/ac981ff9f3b2c585894514b6c0b95133.png)](https://i.stack.imgur.com/gISrB.png)
[（来源：[github.com](http://buymeasoda.github.com/soda-theme/images/screenshots/soda-dark-theme.png?v=7)）]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-04T18:03:29.143

试试这个包，就像一个魅力：

[https://github.com/ehamiter/ST2-Color-Console](https://github.com/ehamiter/ST2-Color-Console)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-24T08:37:09.230

或使用

```
{
    "color_scheme": "Packages/Color Scheme - Default/Monokai.tmTheme"
} 
```

在控制台设置中匹配 Sublime 的 Monokai 默认值：

/sublime/Data/Packages/Theme - 默认\Widget.sublime-settings

# java - 我应该将用户上传的文件保存在我的服务器上的什么位置？

> ID：10760191
> 
> 赞同：0
> 
> 时间：2012-05-25T19:17:54.873
> 
> 标签：java, html, tomcat

在我的网站上；用户可以上传他们的图片。我正在使用带有 apache、hibernate、jpa 的 tomcat。

我更愿意将这些图像保存在某个位置，比如`/var/ImagesUploaded`我的 ubuntu 盒子上。使用 Java，我可以在目录中引用这些文件，`/var/ImagesUploaded`但`java.io`我将如何在 HTML 页面上向用户显示这些图像？在 HTML 文件中，我们需要类似的标签，`<img src=''>`并且这个 src 是相对于 webapp 的。那么，我是否必须将用户上传的图像仅保留在我的 webapp 中！还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:20:54.423

`/var/imagesUploaded`将您的网络服务器配置为来自（例如， as ）的服务器文件`/imguploads`，或者使用脚本读取图像并将其输出给用户，并带有正确的标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:38:14.427

如何读取应用程序上的图像，然后将它们作为 base64 编码流提供给用户？这样，您就不必将您的图片目录暴露给网络，并且可以有效地防止它被机器人抓取。

1.  使用 java.io将文件作为`InputStream`应用程序内部读取
2.  [使用Apache Commons Codec](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html)将其转换为 Base64 。`encodeBase64URLSafeString(IOUtils.toByteArray(yourImageAsInputStream);`
3.  在您的响应 HTML 中，将图像嵌入为`<img src="data:image/jpeg;base64,encodedString">`

[这篇](https://stackoverflow.com/questions/2429934/is-it-possible-to-put-binary-image-data-into-html-markup-and-then-get-the-image)关于 SO 的帖子也可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T19:45:28.313

你有几个选择：

1.  如果您使用的是 Tomcat 7，则可以在 <Context> 元素中使用“别名”功能 (http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Standard_Implementation)

2.  您可以尝试将 DefaultServlet 映射到某些特殊路径，例如“/uploads/*”，但请注意，某些版本的 Tomcat 有一个 DefaultServlet，当它未映射到“/”时，它基本上无法正常工作

3.  您可以编写自己的 servlet 来自己提供这些位，尽管您最终会复制 DefaultServlet 的许多功能，并且可能在健壮性类别中达不到要求（例如，实现 Range 查询等）

请注意，如果您编写自己的 servlet，您可以选择执行基于用户的检查以检查对某些资源的授权访问。也许您不希望您的整个上传目录都可以被 Google 访问。

# c# - WPF中的滚动事件

> ID：10760195
> 
> 赞同：0
> 
> 时间：2012-05-25T19:18:19.287
> 
> 标签：c#, wpf

我有一个问题，当我滚动鼠标调整音量时如何处理滚动事件`MediaElement`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:46:51.453

我认为您正在寻找[UIElement.MouseWheel](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mousewheel.aspx)事件。

我会提供更多，但我不知道您的应用程序是如何构建的。如果您使用的是 MVVM 等。

# python - 当请求来自远程时，调试 django 的“好”方法是什么？

> ID：10760200
> 
> 赞同：2
> 
> 时间：2012-05-25T19:18:58.960
> 
> 标签：python, django, debugging

当有人远程访问 Django 服务器时（例如，不是使用浏览器，而是使用机器人或其他自动化工具），我跟踪服务器正在做什么并尝试调试任何问题的“好”方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T17:37:31.460

# 你应该做什么

调试不应该在生产服务器上进行，所以你应该使用开发服务器，在那里你基本上可以使用`manage.py runserver`+ `import pdb; pdb.set_trace()`。

## 为什么你做不到

假设您的开发服务器在 heroku 这样的平台上运行，您可能无法控制脚本的启动方式。从那里，使用远程调试是可能的，你可以这样做：

# 你能做什么

**如果**您希望能够远程介入代码执行和调试（这对于生产设置**完全**[`rpdb`](http://pypi.python.org/pypi/rpdb/)不合适），您可以使用. 我坚持认为，除非您知道自己在做什么（并且前提是您*不是*在生产服务器上执行此操作！），否则您*不应该这样做。*

 *基本上，`rpdb`当您调用`rpdb.set_trace()`,时，`pdb`它的作用是启动并将其`stdin`和`stdout`重定向到端口 4444（但您当然可以更改它）。然后，您将 telnet（或 netcat，就此而言）到该端口并从那里进行调试。

## 结束语

真的，你不应该这样做。*

# tsql - 选择记录，但如果为空，则显示一条消息

> ID：10760203
> 
> 赞同：1
> 
> 时间：2012-05-25T19:19:09.040
> 
> 标签：tsql

我知道这很容易，只是语法不正确。如果没有结果，则显示一条消息：

```
select COALESCE(select SomeField from SomeTable where [@SomeTableVariable].SomeID = @SomeID, 'none to delete') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:22:24.730

如果该查询仅返回一行，则：

```
select COALESCE( 
  (select SomeField from SomeTable where [@SomeTableVariable].SomeID = @SomeID),
  'none to delete'
) 
```

应该这样做。

# entity-framework - 获取DataContext中的实体列表

> ID：10760206
> 
> 赞同：1
> 
> 时间：2012-05-25T19:19:16.310
> 
> 标签：entity-framework, entity-framework-4, ef4-code-only

获取在给定 EF 4.1 DbContext 中加载的实体列表的最佳方法是什么？我在尝试定位`DbEntityEntry.Entity`为给定上下文加载的对象集合时没有成功。似乎应该可以使用类似于`DbContext.ChangeTracker.Entries()`操作方式的模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T15:14:04.257

这将为您提供上下文中的所有实体：

```
dbContext.ChangeTracker.Entries().Select(e => e.Entity) 
```

但是你会得到它们的一般类型`Object`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T11:10:41.637

这是我使用的例程测试，因此我可以检查所有条目的值和状态。

```
public static void ContextDumpTest(DbContext context) {

       Debug.WriteLine("====Begin Context Dump========");
       var dbsetList = context.ChangeTracker.Entries();
        foreach (var dbEntityEntry in dbsetList) {

            Debug.WriteLine(dbEntityEntry.Entity.GetType().Name + " => " + dbEntityEntry.State );
            switch (dbEntityEntry.State) {
                 case EntityState.Detached:
                 case EntityState.Unchanged:
                 case EntityState.Added:
                 case EntityState.Modified:
                    WriteCurrentValues(dbEntityEntry);
                     break;
                case EntityState.Deleted:
                     WriteSomeValues(dbEntityEntry);
                     break;
                default:
                    throw new ArgumentOutOfRangeException();
            }
             Debug.WriteLine("==========End of Entity======");
        }
        Debug.WriteLine("==========End of Context======");
    }

    private static void WriteCurrentValues(DbEntityEntry dbEntityEntry) {
        foreach (var cv in dbEntityEntry.CurrentValues.PropertyNames) {
            Debug.WriteLine(cv + "=" + dbEntityEntry.CurrentValues[cv]);
        }
    }
    private static void WriteSomeValues(DbEntityEntry dbEntityEntry)
    {
        foreach (var cv in dbEntityEntry.OriginalValues.PropertyNames)
        {
            Debug.WriteLine(cv + "=" + dbEntityEntry.OriginalValues[cv]);
        }
    } 
```

# java - Deadbolt 2：完全使用数据库设置控制限制

> ID：10760220
> 
> 赞同：3
> 
> 时间：2012-05-25T19:21:04.000
> 
> 标签：java, playframework, authorization, playframework-2.0, deadbolt

你好

我想要或者需要通过数据库设置来控制某些操作和控制器的限制，这是完成这项工作的最佳方式吗？

我的目标是什么：我需要创建解决方案，其中将有很多用户组（存储在数据库中）并且它们将是完全动态的（从管理面板创建和删除）。权限应该继承给子组，所以如果用户有角色`EditorsChief`，他也可以执行所有允许的操作`Editor`。我不能只注释动作/控制器，`@Restrict({"EditorsChief", "Editor"})`因为它们不存在（应该使用管理面板动态创建）。

我的第一个想法是使用`@Dynamic`控制器并将限制与单独的处理程序进行*分组*，这当然需要对其中的一些进行*硬编码*。这还不错 - 稍加注意就可以设置非常好的模式，（即通过使用约定命名处理程序：`handlerControllerAction`，`handlerControllerOtherAction`...

你怎么认为 ？我会朝着好的方向前进吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:07:57.563

执行此 IMO 的最佳方法是使用 Dynamic 注释，并为每个注释指定一个不同的名称来描述该方法的功能。由于您的代码中有有限数量的带注释的方法，因此您可以将这些名称存储在数据库中（可能会缓存它们，如上所述，以提高性能）。

然后，在管理面板中，您可以将这些名称与组、角色或其他内容相关联，并据此执行控制。在我的脑海中，这将是数据库中的一对多关系。

如果我需要更完整地解释这一点，请告诉我。

史蒂夫（Deadbolt 的作者）

# macos - OSX 上 MongoDB 的正常默认设置？

> ID：10760223
> 
> 赞同：12
> 
> 时间：2012-05-25T19:21:10.067
> 
> 标签：macos, mongodb, configuration

我安装了 MongoDB 并进行了如下设置：

数据库路径：`/data/db`

系统范围的配置文件：`/usr/local/mongodb/mongod.conf`

启动ctl plist：`/Library/LaunchDaemons/org.mongodb.mongod.plist`

日志：`/var/log/mongodb/output.log`

二进制：`/usr/local/bin/mongod`

**所有这些路径都有默认值吗？**

我正在寻找与 MongoDB**和**OS X 一致的默认值。答案的参考资料会很可爱。:-)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-25T20:32:25.057

这些值中唯一一个 MongoDB 具有默认值的是数据路径，即`/data/db`. MongoDB 本身不附带配置文件，默认情况下也不记录到文件，安装二进制文件的位置完全取决于您。

对于我自己的安装，我使用以下内容：

*   配置：`/usr/local/mongo/mongod.conf`
*   数据库路径：`/usr/local/mongo/data`
*   日志记录：（`/private/var/etc/mongodb.log`这会自动显示在控制台应用程序中）
*   启动ctl：`/Library/LaunchDaemons/org.mongodb.mongod.plist`

我唯一要注意的一点是，可能值得提高 NumberOfFiles 的硬限制和软限制，因为 MongoDB 使用此限制来确定它将接受的最大连接数。在某些版本中，OS X 默认此数字为 256，这意味着您最多可以拥有大约 205 个连接，即使对于开发环境来说也可能太低了。我的launchctl plist中有以下内容：

```
<key>HardResourceLimits</key>
<dict>
  <key>NumberOfFiles</key>
  <integer>1024</integer>
</dict>
<key>SoftResourceLimits</key>
<dict>
  <key>NumberOfFiles</key>
  <integer>1024</integer>
</dict> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-09T21:42:09.690

在 Mac 上，我建议您使用[homebrew](http://mxcl.github.io/homebrew/)安装 mongo，它将所有程序安装到`/usr/local`. 您将拥有默认路径：

*   配置：`/usr/local/etc/mongod.conf`
*   数据目录：`/usr/local/var/mongodb`
*   日志：`/usr/local/var/log/mongodb/mongo.log`
*   plist 文件：`/usr/local/opt/mongodb/homebrew.mxcl.mongodb.plist`

安装：`brew install mongodb`

要重新启动 mongo，您可以：

```
launchctl stop homebrew.mxcl.mongodb
launchctl start homebrew.mxcl.mongodb 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T02:09:38.393

如果您已经安装了 mongodb，就像我一样，但是有一个旧版本，只需运行

```
brew upgrade mongodb 
```

这应该将您的 mongodb 更新到最新的可用包。

# c# - 处理 DataGridView Combobox 事件和 linq 查询不起作用

> ID：10760226
> 
> 赞同：0
> 
> 时间：2012-05-25T19:21:24.327
> 
> 标签：c#, linq

我有这个 linq 查询，但不知道为什么它不起作用。itemDetails 是我的数据表。我是初学者。

我想要的是在 datagridview 组合框字段中选择项目时获取项目的 itemID。

1) 一个问题是我在下面写的 linq 查询。

```
 from r in itemDetails
    where r.ItemName = dataGridView1.Rows[e.RowIndex].Cells[0].Value.ToString()
    select r.ItemID; 
```

它给出了以下错误

> 找不到源类型“System.Data.DataTable”的查询模式的实现。'哪里' 没有找到。

2) 另一个问题是我如何处理 datagridview 组合框 selectedIndexchanged 事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:33:05.610

您遇到的问题是 DataTable 不是 IEnumerable 类，这意味着您将无法在其上使用 Linq 方法。这就是编译器所抱怨的；您编写的 Linq 查询被编译为一系列方法调用，编译器希望找到一个 Where() 方法，它可以在 DataTable 上调用该方法来执行 where 子句的过滤，但没有找到。

但是，它的 Rows 属性是 IEnumerable（但不是通用的，因此您需要使用 OfType() 方法来创建 DataRows 的 IEnumerable）：

```
from r in itemDetails.Rows.OfType<DataRow>()
where r.ItemName == dataGridView1.Rows[e.RowIndex].Cells[0].Value.ToString()
select r.ItemID; 
```

现在，除此之外，DataRow 没有属性 ItemName 和 ItemID。您不会以这种方式从 DataRow 获取值。编译器（还）没有在您的代码中抱怨这一点，因为它甚至不知道类型`r`是什么，因此它无法确定该类型的对象是否具有这些成员。一旦你指定 r 是一个 DataRow，编译器就会发现额外的错误。

要解决这个问题，您需要使用 DataRow 上可用的索引器。您可以按索引（从左到右从零开始，基于水合数据表的查询的选择列表）或按列名（再次基于列的名称或您给它们的别名）引用列在选择列表中）：

```
from r in itemDetails.Rows.OfType<DataRow>()
where r["ItemName"].ToString() == dataGridView1.Rows[e.RowIndex].Cells[0].Value.ToString()
select (int)r["ItemID"]; 
```

索引器生成的项目是 Object 类型的；您需要将它们强制转换或转换为正确的类型（例如，我假设 ItemName 是一个字符串，而 ItemId 是一个 32 位整数）。

至于您的第二个问题，DataGridViews 不会公开其包含的控件的大部分事件。相反，这些控件被挂钩，并导致 DGV 触发您可以处理的自己的事件。查看 CellValueChanged 事件和/或 CellDirtyStatusChanged 事件。当用户更改单元格的值然后该单元格失去焦点时，将引发第一个。在实际发生提交之前，一旦对单元格的值进行第一次更改，就会引发 CellDirtyStatusChanged。

# php - 为什么if语句不起作用？

> ID：10760231
> 
> 赞同：0
> 
> 时间：2012-05-25T19:21:41.470
> 
> 标签：php, if-statement

我有这个 php 代码：

```
$flag = 0;
$f = fopen("1.txt", "r");
while (!feof($f))
{
    $a = fgets($f);
    $b = explode(",", $a);
    if ($_POST['username'] == $b[0]&& $_POST['password'] == $b[1])
    {
        $flag = 1;
        echo ("Correct");
        break;
    }
}
 if ($flag == 0)
     echo ("Incorrect");
fclose($f); 
```

`1.txt`文件是这样的：

```
1,1
2,2
3,3
4,4
5,5 
```

我将数据发送到**只有**此代码的 php 页面，但我总是得到`Incorrect`. 我不知道为什么如果不起作用！（我检查了`$_POST['username']`，`$_POST['password']`但一切都是正确的！）有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:26:33.000

您可能需要这样做，`trim($b[1])`因为它可能会将新行读入字符串中，因此`$b[1]`永远不会相等。

**编辑：**

实际上，您应该只替换`$a = fgets($f);`为`$a = trim(fgets($f));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:26:34.637

简单回声`b[0]`, `b[1]`, `$_POST['username']`, 和`$_POST['password']`

我有一种感觉，这些值之一不会是你所期望的，这将帮助你解决你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T19:28:53.573

有用：

```
$flag = 0;
$f = fopen("1.txt", "r");
while (!feof($f))
{
    $a = fgets($f);
    $a = trim($a);
    $b = explode(",", $a);
    var_dump($b);
    if ($_POST['username'] == $b[0] && $_POST['password'] == $b[1])
    {
        $flag = 1;
        echo ("Correct");
        break;
    }
}
if ($flag == 0)
    echo ("Incorrect");
fclose($f); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T19:46:34.687

继承人我会怎么做，使用[file()](http://php.net/manual/en/function.file.php)

```
<?php 
//Get file
$file = file('1.txt');

//Split the array line in two with delimiter ,
function split_it(&$value){
        $value = explode(',',$value);
}
array_walk($file,'split_it');

//Check values passed against the array, and return true or false
function check_it($file,$a,$b){
    foreach($file as $row){
        if(trim($row[0])==trim($a) && trim($row[1])==trim($b)){
            return true;
        }
    }
    return false;
}

//The business part
$a = (isset($_POST['a'])?$_POST['a']:null);
$b = (isset($_POST['b'])?$_POST['b']:null);

if(check_it($file,$a,$b)==true){
    echo 'Correct';
}else{
    echo 'In-correct';
}
?> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-25T19:25:11.003

将 $b[0] 与 && 分开以使 if 语句起作用。

```
 if ($_POST['username'] == $b[0] && $_POST['password'] == $b[1])
    {
        $flag = 1;
        echo ("Correct");
        break;
    } 
```

# javascript - 手风琴 + 附加内容 Jquery

> ID：10760234
> 
> 赞同：0
> 
> 时间：2012-05-25T19:21:54.903
> 
> 标签：javascript, jquery, html, append, accordion

所以我有一个用 Jquery 创建的手风琴菜单：

```
 <script>
$(document).ready(function() {
/*Accordian Script for the Request New Appraisal Panel*/
$('.accordian_item').hide();
$('.accordian_item').first().slideDown();

$('.accordian_trigger').click(function(event) {
    event.preventDefault();
    $(this).parent().find('.accordian_item').slideToggle();
});
});
</script> 
```

现在，我希望能够将额外的手风琴项动态附加到手风琴盒中，我已经这样做了：

```
<script>

$('#add_contact_btn').click(function(event) {
    event.preventDefault();

    var large = '<div class="accordian_container"><a href="#" class="accordian_trigger"><h4>Co-Borrower Information</h4></a><hr/><div class="accordian_item"><label> First Name</label><br/><input type="text"/><br/><label>Middle Name</label><br/><input type="text"/><br/><label>Last Name</label><br/><input type="text" /><br/><label>Home Number</label><br/><input type="text"/><br><label>Work Number</label><br/><input type="text"/><br><label>Cell Number</label><br/><input type="text"/><br></div></div>';

    $('#accordion_container_box').append(large);

});
</script> 
```

这很完美，除了当您单击折叠按钮时动态生成的项目不会折叠。现有的手风琴项目仍然有效。由于某种原因，Jquery 似乎不会触发动态创建的链接。有什么想法可以纠正这个吗？

顺便说一句，这是基本的 HTML 结构：

```
<div id="accordion_container_box">

            <div class="accordian_container">
                <a href="#" class="accordian_trigger"><h4>Borrower's Information</h4></a>
                <hr/>
                <div class="accordian_item">
                <label> First Name</label><br/>
                <input type="text"/><br/>
                <label>Middle Name</label><br/>
                <input type="text"/><br/>
                <label>Last Name</label><br/>
                <input type="text" /><br/>
                <label>Home Number</label><br/>
                <input type="text"/><br>
                <label>Work Number</label><br/>
                <input type="text"/><br>
                <label>Cell Number</label><br/>
                <input type="text"/><br>
                </div>
            </div>

            <div class="accordian_container">       
                <a href="#" class="accordian_trigger"><h4>Co-Borrower's Information</h4></a>
                <hr/>
                <div class="accordian_item">
                <label> First Name</label><br/>
                <input type="text"/><br/>
                <label>Middle Name</label><br/>
                <input type="text"/><br/>
                <label>Last Name</label><br/>
                <input type="text" /><br/>
                <label>Home Number</label><br/>
                <input type="text"/><br>
                <label>Work Number</label><br/>
                <input type="text"/><br>
                <label>Cell Number</label><br/>
                <input type="text"/><br>
                </div>
            </div>

        </div>

            <a href="#" id="add_contact_btn">+ Additional Contact</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:25:16.943

您必须在动态创建的内容上使用 .live('click'... 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:28:41.200

By default binding events to elements will only affect nodes that exist at the time that the bind runs. By using event delegation you can make use of the built in way that events bubble. jQuery < 1.7 did this with the [`delegate`](http://api.jquery.com/delegate/) and [`live`](http://api.jquery.com/live/) methods, jQuery 1.7 added the [`on`](http://api.jquery.com/on/) method to consolidate all the event handlers in a single API.

For example you could use the following to handle all clicks on nodes with a class of `accordian_trigger` regardless of when they were created.

```
​$(document).on('click', '.accordian_trigger', function() {
    //whatever you need to do
});​​​​​​​​​​​ 
```

What this will do is attach an `onclick` event handler to the `document` itself. When any click occurs in the DOM it will bubble up from the node that the event occurred on to its parent and its parent until it reaches the `document`. jQuery will then check whether the event occurred on a node that matches the selector passed in as the second parameter of `on`, in this case it will check whether the node has a class of `accordian_trigger`. If it does it will run the `function` passed in as the third parameter.

For efficiency's sake you'll likely want to replace `document` with a parent node that you know will contain all `accordian_trigger` nodes. Otherwise **all** clicks bubble all the way up to the `document` and check whether the node that was clicked on has the `accordian_trigger` class, which is potentially expensive, especially if you have a large DOM.

# java - 在 Play Framework 2.0.1 的 scala 模板中访问子实体的属性时遇到问题

> ID：10760239
> 
> 赞同：0
> 
> 时间：2012-05-25T19:22:16.167
> 
> 标签：java, jpa, playframework, playframework-2.0, mariadb

我正在 Play Framework 2.0.1 中探索 JPA 和 Ebean，以研究在本地关系数据库中生成的内容。在我的测试中，我使用的是 MySQL 的一个分支 MariaDB。

到目前为止，我已经能够使用模型中的 JPA 注释在数据库中成功生成表。我想确保我学会了如何设置一个与另一个实体具有 OneToOne 关系的实体，以及与另一个实体的 OneToMany 关系。

OneToOne：`Employee`有`Address`

OneToMany：`Employee`有`Pet`（S）

我设置了一个小型应用程序，它允许我快速填充表格、显示一些信息以及从表格中删除行。下面是那些想要查看我的设置的人的代码：

# 路线

```
GET     /                   controllers.Application.index()
GET     /add                controllers.Application.addEmployee()
GET     /delete/:id         controllers.Application.deleteEmployee(id: Long)
GET     /employee/:id       controllers.Application.showEmployee(id: Long) 
```

# 控制器

## 应用程序.java

```
public class Application extends Controller {

    public static Result index() {
        return ok(index.render("entry point"));
    }

    public static Result addEmployee() {
        // Create an employee.
        Employee employee = new Employee();     
        employee.firstName = "John";
        employee.lastName = "Doe";
        employee.salary = new BigDecimal(123456);

        // Create an address for the employee.
        Address address = new Address();
        address.city = "West Chester";
        address.country = "United States of America";
        address.postalCode = "19380";
        address.province = null;
        address.street = "45 Jingleheimer Drive";

        // Create pets for the employee.
        Pet pet = new Pet();
        pet.petString = "dog";
        Pet pet2 = new Pet();
        pet2.petString = "cat";

        employee.address = address;
        employee.pets.add(pet);
        employee.pets.add(pet2);
        employee.save();

        return ok(index.render("added an employee"));
    }

    public static Result showEmployee(Long id) {
        Employee e = Employee.get(id);
        //String s = e.address.street;
        return ok(employee.render(e));
    }

    public static Result deleteEmployee(Long id) {
        Employee.delete(id);
        return ok(index.render("deleted employee " + id));
    }
} 
```

# 楷模

## 雇员.java

```
@Entity
public class Employee extends Model {
    @Id
    public Long employee_id;

    public String firstName;

    public String lastName;

    public BigDecimal salary;

    @OneToOne(cascade=CascadeType.ALL)
    @JoinColumn(name="owner_id")
    public Address address;

    @OneToMany(cascade=CascadeType.ALL)
    @JoinColumn(name="owner_id", referencedColumnName="employee_id")
    public List<Pet> pets;

    public static Employee get(Long id) {
        return find.byId(id);
    }

    public static void delete(Long id) {
        find.byId(id).delete();
    }

    public static Finder<Long, Employee> find = new Finder<Long,Employee>(Long.class, Employee.class);
} 
```

## 地址.java

```
@Entity
public class Address extends Model {
    @Id
    public Long address_id;

    public String street;

    public String city;

    public String province;

    public String country;

    public String postalCode;
} 
```

## 宠物.java

```
@Entity
public class Pet extends Model {
    @Id
    public Long pet_id;
    public String petString;    
} 
```

# 意见

## 员工.scala.html

```
@(employee: models.Employee)

@import helper._

@main("employee view") {

    <p>@employee.firstName</p>
    <p>@employee.lastName</p>
    <p>@employee.salary</p>
    <p>@employee.address.country</p>

    <p>@employee.pets(1).petString</p>

    @for(pet <- employee.pets) {
        <p>@pet.petString</p>
    }
} 
```

如果我使用 localhost:9000/employee/1 之类的 URL 呈现上面的视图，我会在浏览器中显示以下内容：

```
John

Doe

123456

cat

dog

cat 
```

请注意，地址所在的国家/地区未显示。我还尝试在控制器中访问它并将其打印到打印 NULL 的命令窗口。

但是，我发现如果我在`Address`类中添加 getter，我可以在 scala 模板中检索它：

添加

```
public String getCity() {
    return city;
}

... 
```

到 Address.java 结果

```
John

Doe

123456

United States of America

cat

dog

cat 
```

所以我可以设置一个地址并将其分配给一个员工（它显示在我的数据库中）。此外，正确删除员工会级联并删除数据库中的地址。同样，这适用于 Pet 类，即`OneToMany`. 那么为什么我需要添加 getter 来访问我的`Address`属性，而不是 for`Pet`呢？我的一对一关系是否未在 Java 注释中正确设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:18:14.430

EBean 不**支持**通过直接属性访问进行延迟加载。在 Java-Controller-Code 中，该语句`employee.address.country`被增强为类似`employee.getAddress().getCountry()`. 唉，这**不是**在 Scala 代码中完成的，尤其是在模板中。

`employee.pets(1).petString`另一方面，被转换为`employee.pets.get(1).petString`，这足以让 EBean 延迟加载，因为涉及到 EBean LazyList。

请不要坚持使用 getter/setter！表演！人们认为你应该在控制器中知道你需要什么数据并在查询时获取它：

```
public static Employee get(Long id) {
  return find.fetch("address").where().idEq(id).findUnique();
} 
```

# css - Safari 图像大小自动高度 CSS

> ID：10760243
> 
> 赞同：22
> 
> 时间：2012-05-25T19:22:23.173
> 
> 标签：css

我正在最新版本的 Safari for Windows 7 中测试这个问题。

问题是此代码适用于所有其他浏览器，但 safari：

```
 <style type="text/css">
    .userImg { height: 100%; width: 100%; }
    .imgContainer { height: auto; width: 150px; }
 </style>

 <div class="imgContainer">
    <img id="img" class="userImg" src="TemplateFiles/Hydrangeas.jpg" alt="" />
 </div> 
```

有谁知道在 Safari 中仅使用 CSS 按比例调整图像大小的技巧？

谢谢！

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2020-04-13T21:15:26.547

对于那些**需要使用自动高度**并且**图像的父级设置为 display: flex**的人，这个技巧会有所帮助。

```
image { align-self: flex-start; } 
```

如果你**的 image 的父级设置了 flex-direction: column**，你需要这样做。

```
image { justify-self: flex-start; } 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-25T19:24:56.773

只需在图像上设置宽度。浏览器会自动按比例缩放图像。

```
.userImg { width: 100%; }
.imgContainer { height: auto; width: 150px; }​ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-20T06:58:49.627

```
.userImg { width: 100%; height: auto; }
.imgContainer { width: 150px; }​ 
```

2019 年。检查也许是父元素

```
.imgContainer { display: flex; align-items: stretch} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-07-07T09:45:46.520

对于那些需要使用**height auto**的人，你也可以试试这个：

```
.userImg{
    object-fit: contain;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-12-31T19:59:33.303

试试这个： 父母有 display:flex 孩子有 align-self:center

```
@import url('https://fonts.googleapis.com/css?family=Slabo+27px');
body {
  font-family: "Slabo 27px", serif;
}
h2 {
  text-align: center;
}
[data-flex] {
  display: flex;
  width: 80%;
  max-width: 800px;
  font-size: 1.2rem;
  margin: 0 auto;
  line-height: 1.5;
}
[data-flex] > img {
  margin-right: 2rem;
  width: 30%;
}
[data-center] {
  align-items: center;
}
[data-flex] div, [data-flex] p {
  flex: 1;
}
[data-flex] div {
  margin-right: 2rem;
}
[data-flex] div img {
  width: 100%;
}
```

```
<base href="https://s3-us-west-2.amazonaws.com/s.cdpn.io/4273/">
<h2>By default, images that are flex-children will be their <em>natural</em> height, regardless of their width:</h2>
<div data-flex>
  <img src="sophie.jpg" alt>
</div>
<h2>This can be avoided by <em>not</em> specifying a width for the image, but that makes it non-responsive:</h2>
<div data-flex>
  <img src="sophie.jpg" alt style="width: auto">
</div>
<h2>Solution 1: apply <code>align-self: center</code> to the image</h2>
<div data-flex>
  <img src="sophie.jpg" alt style="align-self: center">
</div>

<h2>Solution 2: apply <code>align-items: center</code> to the flex container</h2>
<div data-flex data-center>
  <img src="sophie.jpg" alt>
</div>

<h2>Solution 3: Place the image inside another container, and make <em>that</em> the flex-child</h2>

<div data-flex data-center>
  <div>
  <img src="sophie.jpg" alt>
  </div>
</div>
```

# authentication - 为什么在将使用 REST 的移动 HTML5 应用程序中使用 OAuth？

> ID：10760249
> 
> 赞同：1
> 
> 时间：2012-05-25T19:23:05.887
> 
> 标签：authentication, mobile, oauth

我正在探索银行移动 HTML5 应用程序的可能性。它将通过 RESTful API 与主服务器联系。我经常听到人们在他们的移动应用程序中使用 OAuth 来访问 API。例如 SpringSource 的[html5expense](https://github.com/SpringSource/html5expense)演示应用。

所以我不完全明白为什么要打扰？用户不能以标准方式登录，接收带有会话 id 的 cookie（或者在 Play 框架的情况下，会话数据），当应用程序向 REST 发出请求时，它将用于识别用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T03:21:51.437

Oauth 通常比大多数 BASIC AUTH 或“以标准方式登录”方法安全得多（并且 OAuth 正变得越来越标准）。

当您通过大多数“标准”方式登录时，用户将他的用户名和密码输入应用程序，然后用户名/密码通常要么存储在本地，要么传输到应用程序，然后可能被中继到“主服务器” " 例如提供 API。因此，用户将不得不将他非常秘密的登录信息（例如，用于银行业务？）输入到他不知道或不信任的客户端、应用程序或系统中......

使用 OAuth，用户被定向到该 API 所有者的登录页面 .. 例如，他的银行，他登录到他知道的安全登录页面，并被要求同意应用程序“xyz”想要访问他的数据.... 请求访问的应用程序随后会获得一个令牌，它可以使用该令牌访问 API，而无需知道用户名和密码。这样，用户名/密码只能在用户信任的位置输入一次。

此外，用户可以稍后登录并承认页面..（银行应用程序？或管理前端），并删除对 API 的给定访问权限，从而停止应用程序访问他的信息，而无需更改他的密码。

除了实际安全的效果之外，使用 OAuth 之类的东西对于银行应用程序也是有意义的，因为如果应用现代安全技术，它将给人们更多的信心。这也让人感觉更安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T21:57:05.190

如果您不打算将您的 API 发布给第三方开发者；真的没有理由打扰 OAuth。

OAuth 存在的最大原因是启用与您的 API 的集成，而您的用户不必将他们的用户名和密码提供给第三方。其他原因是它可以为第三方对资源的访问设置时间框架，或确定访问范围。

# .net - LINQ - 从表中删除不不同的行

> ID：10760250
> 
> 赞同：0
> 
> 时间：2012-05-25T19:23:07.167
> 
> 标签：.net, linq

尝试从 dt 中选择不同的行，并将结果放回相同的 dt。我认为这可以在一个声明中完成。这是我正在尝试的：

```
 dt = (DataTable)((from row in dt.AsEnumerable() select row.Field<string>("VNDR_ID")).Distinct().ToList()); 
```

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:37:27.267

LINQ 语句

```
(from row in dt.AsEnumerable() select row.Field<string>("VNDR_ID")).Distinct() 
```

返回`IEnumerable<string>`not `DataTable`，因此强制转换将失败。

您是否有理由需要将结果放入另一个中`DataTable`？我只是使用`IEnumerable`查询返回的值，或者如果您希望立即评估查询，则将其转换为`List<string>`with `ToList()`（以便您可以更改 的内容`dt`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:40:00.293

您不能将其转换为 DataTable。Linq 最终会`IEnumerable<string>`根据您的选择输出一个。为了将其加载到 DataTable 中，您必须：

1.  创建数据表
2.  [使用DataColumnCollection.Add 方法](http://msdn.microsoft.com/en-us/library/730zyedy)创建列（字符串，类型）
3.  循环遍历数据
4.  [使用DataRowCollection.Add 方法 (Object[])](http://msdn.microsoft.com/en-us/library/07wwak56)为每个项目添加一个新行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T17:00:07.387

```
 dtSuplr = (from suplr in dtSuplr.AsEnumerable()
                   select suplr).Distinct().CopyToDataTable(); 
```

# c# - 带有美元符号的正数正则表达式

> ID：10760257
> 
> 赞同：0
> 
> 时间：2012-05-25T19:23:43.217
> 
> 标签：c#, regex

有人可以发布一些关于正则表达式模式的提示，用于带有小数和美元符号的正数。

有效的：

```
1.50
25
25.50
$1.50
$25
$25.50 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T19:28:47.293

这个应该这样做：

```
\$?[0-9]+(\.[0-9]+)? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:40:53.177

```
(\$\s*)?([1-9]\d+|\d+)(\.\d+)? 
```

这个也不包括 $05.00

```
(\$\s*)?(([1-9]\d+|\d+)(\.\d+)?|\.\d+) 
```

这个允许$ .3

**更新**：过滤 0 和 $0

```
(\$\s*)?(([1-9]\d*)(\.\d+)?|0?\.\d*[1-9]\d*) 
```

# android-ndk - Android：无法加载库

> ID：10760263
> 
> 赞同：1
> 
> 时间：2012-05-25T19:24:08.880
> 
> 标签：android-ndk

我面临着一个我不知道的情况。我试图测试我在 C++ 中实现的一种方法，并使用 swig 来生成包装器。编译后，当我尝试运行应用程序时，出现错误`java.lang.UnsatisfiedLinkError`。

它进一步指出

```
cannot load library:reloc_library[1311]:33
cannot locate '_Z13recognizeFacePKcS0_'
... 
```

并突然抛出异常。

我尝试使用 adb shell 调试并在正确的位置*（data/data/com/mesh/faceAuth/lib/libfaceAuth.so）*找到库，但它给出了相同的错误。我还从[这个](http://en.wikibooks.org/wiki/OpenGL_Programming/Installation/Android)站点读到，它与我不知道的错误 STL 实现有关。我将非常感谢您坦诚的建议。

问候，穆罕默德。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T04:07:39.567

最好猜测您提供的信息，您尝试加载的库需要在它之前加载一些依赖项。

例如：

```
System.loadLibrary("bullet");
System.loadLibrary("irrlicht");
System.loadLibrary("gamescript"); 
```

`gamescript`库需要在它之前加载其他 2 个库。否则，它会给我你提到的同样的错误。`.mk`如果您可以在此处发布用于构建库的文件的某些部分，我可以进一步研究这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T07:03:15.903

您的错误与 STL 无关。

您可能在代码中引用了一个全局函数`::recognizeFace(char const*, char const*)`。也许，您定义了另一个函数，例如`recognizeFace(char*, char*)`.

# iphone - 尽管设置了 contentsScale，为什么 CAShapeLayer 太大了？

> ID：10760264
> 
> 赞同：2
> 
> 时间：2012-05-25T19:24:09.037
> 
> 标签：iphone, ios, core-animation

我有一个 CAShapeLayer，用于在条形图中绘制小点。问题是它们在视网膜显示器上都太大了。我已经设置了 contentsScale 并检查了它是否正在设置。我仍然认为有它或没有它没有区别！

```
CAShapeLayer *lineShapeLayer = [CAShapeLayer layer];
lineShapeLayer.contentsScale = [[UIScreen mainScreen] scale]; 
CGMutablePathRef path = CGPathCreateMutable();
lineShapeLayer.backgroundColor = [UIColor clearColor].CGColor;
lineShapeLayer.bounds = CGRectMake(0, 0, self.backgroundLayer.bounds.size.width, 1.5);

lineShapeLayer.anchorPoint = CGPointMake(0, 0);
lineShapeLayer.position = CGPointMake(0, rint((self.verticalPartitionHeight)*i));
lineShapeLayer.lineDashPattern = [NSArray arrayWithObjects:[NSNumber numberWithFloat:1], [NSNumber numberWithInt:2], nil];
lineShapeLayer.strokeColor = [UIColor blackColor].CGColor;
lineShapeLayer.lineWidth = 1;
NSLog(@"contentsScale: %f", lineShapeLayer.contentsScale);

CGPathMoveToPoint(path, nil, 0, .5);       
CGPathAddLineToPoint(path, nil, lineShapeLayer.frame.size.width, .5);
[lineShapeLayer setPath:path];

[self.backgroundLayer addSublayer:lineShapeLayer]; 
```

如果我用 PNG 制作它，这是视图： ![显示 1px 点的 PNG](../Images/0c21fcdbd5c1dac38708ab94bdcf2f53.png)

这是带有 CAShapeLayer 代码的视图（设置为线宽 0.5 甚至。）： ![CAShapeLayer 显示 4px 点 :(](../Images/7ac4a014442ce10fce2255fed2785042.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T22:40:39.840

您的代码没有任何问题，**除非它在其他地方**。我在一个循环中运行上面的代码（我假设`i`是索引）`self.verticalPartitionHeight = 30.0`。

下面的两个图像是正常分辨率和视网膜分辨率的结果。我已经放大了正常图像以使它们具有相同的大小。如您所见，这些点在两种分辨率上的大小相同（以点为单位，而不是像素）。

![正常分辨率，放大两倍](../Images/3a890bc71ced46ac7e32cd10d480d4f7.png)

![视网膜分辨率](../Images/6d068716c5bedcd66cbfc8694d8ff0d9.png)

### 编辑：

您提到股票应用程序在横向中执行此操作，但如果您放大它的屏幕截图，您实际上会看到它实际上使用点（因为每个点都是 2x2 像素）。您可以在下面的屏幕截图中看到这一点（来自视网膜屏幕截图），其中我放大了很多点并选择了一个点的一个像素。

这*是*预期的行为。

![Stocks.app 点](../Images/21cb4047f420f35f0d51dce172a43d5a.png)

### 编辑2：

再放大看你的点。它们实际上与Apples Stocks 应用程序中的点的**大小完全相同。**您可以在下图中看到它，我选择*了一个*像素。

![在此处输入图像描述](../Images/d8539d1825d24ee8ed09db09c8f789b1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T02:25:30.170

@David Ronnqvist 是对的！contentsScale 工作正常。我只需要使线宽更小，然后将整个东西放在 .25（即 0.5/2）上！

```
 CAShapeLayer *lineShapeLayer = [CAShapeLayer layer];
    lineShapeLayer.contentsScale=[[UIScreen mainScreen] scale]; 
    CGMutablePathRef path = CGPathCreateMutable();
    lineShapeLayer.backgroundColor=[UIColor clearColor].CGColor;
    lineShapeLayer.bounds=CGRectMake(0, 0, self.backgroundLayer.bounds.size.width, 0.5);

    lineShapeLayer.anchorPoint=P(0,0);
    lineShapeLayer.position=P(0,rint((self.verticalPartitionHeight)*i));
    lineShapeLayer.lineDashPattern=[NSArray arrayWithObjects:[NSNumber numberWithFloat:0.5], [NSNumber numberWithInt:1], nil];
    lineShapeLayer.strokeColor=[UIColor grayColor].CGColor;
    lineShapeLayer.lineWidth=0.5;
    lineShapeLayer.shadowColor=[UIColor whiteColor].CGColor;
    lineShapeLayer.shadowOffset=CGSizeMake(0, 0.5);
    lineShapeLayer.shadowOpacity=1.0;
    lineShapeLayer.shadowRadius=0;

    NSLog(@"lineShapeLayer.frame: %@", NSStringFromCGRect(lineShapeLayer.frame));
    CGPathMoveToPoint(path, nil, 0, 0.25);       
    CGPathAddLineToPoint(path, nil, lineShapeLayer.frame.size.width, 0.25);
    [lineShapeLayer setPath:path]; 
```

当然，我不会硬编码为比例，而是可以被比例整除。

![看起来很完美](../Images/0c1efc23bd6cf885e16a550c0cefc75a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T05:59:25.183

最好的扩展方式`CAShapeLayer`如下：

```
CAShapeLayer *pathLayer = [CAShapeLayer layer];   
[pathLayer setTransform:CATransform3DMakeScale(0.1, 0.1, 0.1)]; 
```

# coldfusion - SHA-512 在 ColdFusion 中散列一个字节数组

> ID：10760272
> 
> 赞同：1
> 
> 时间：2012-05-25T19:24:45.773
> 
> 标签：coldfusion, bytearray, sha512

我正在使用 ColdFusion 9

参考 Ben Nadel 在[他的博客](http://www.bennadel.com/blog/2357-Hashing-Byte-Arrays-Binary-Data-With-ColdFusion-Before-ColdFusion-10.htm)上的好作品，我试过了

```
ucase(digestUtils.sha512(imageBinary)) 
```

对于 SHA-512 哈希，我感到害怕：

> 找不到 sha512 方法。要么没有具有指定方法名称和参数类型的方法，要么 sha512 方法被 ColdFusion 无法可靠破译的参数类型重载。ColdFusion 找到 0 个与提供的参数匹配的方法。如果这是一个 Java 对象并且您验证了该方法存在，请使用 javacast 函数来减少歧义。

现在我知道 sha512 确实作为一种方法存在，因为我在[这里](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/digest/DigestUtils.html)看到了它，但是当我执行

```
cfdump var="#digestUtils#" 
```

我只得到：

```
md5(byte[])     byte[]
md5(java.lang.String)   byte[]
md5Hex(byte[])  java.lang.String
md5Hex(java.lang.String)    java.lang.String
sha(java.lang.String)   byte[]
sha(byte[])     byte[]
shaHex(java.lang.String)    java.lang.String
shaHex(byte[])  java.lang.String 
```

其他方法发生了什么？我想我得试试别的了。

请提供 ColdFusion 解决方案。ColdFusion/Java 解决方案也可以。我正在尝试编写一个 SSO 应用程序，其中第 3 方人员向我提供 URL 参数。我已成功解码第一个参数以获取我的 XML Post。我现在需要获取作为哈希有效负载的第二个参数并通过算法以确保我的第一个参数没有被篡改。

========= 编辑从这里开始：好的，我尝试再次编写代码无济于事。

该算法听起来很简单。但试图实施它正在杀死我。

```
1\. compute the hash string value of the XMLPost string above:
 a. convert the base64 salt string to a UTF-8 byte array.
 b. convert the base64 XML payload string to a UTF-8 byte array.
 c. create a new byte array consisting of the XML payload bytes from step b, appended with the salt bytes from step a.
 d. perform a SHA512 hash on the concatenated byte array from step c, which results in a hashed byte array.
 e. create a new byte array consisting of the hashed bytes from step d, appended with the salt bytes from step a.
 f. convert the result of step e to a base64-encoded string and should be the value of query string parameter "h" payload hash. 
```

xmlPost 是由我的第三方人员创建的：此 XML 有效负载字符串被转换为 UTF-8 字节数组，然后被转换为 base-64 字符串。生成的 base-64 字符串是下面我的 xmlPost 的值。

所以我这样做：

```
<code>
<cfset xmlPost = urlDecode("PD94bWwgdmVyc2lvbj0iMS4wIj8%2bPEVzdG9yZVNzb0N1c3RvbWVyIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhtbG5zOnhzZD0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEiPjxDdXN0b21lcklkPjExMjk0MDwvQ3VzdG9tZXJJZD48RGVhbGVyQ29kZT5OODg4ODg8L0RlYWxlckNvZGU%2bPFBvaW50QmFsYW5jZT4yODA8L1BvaW50QmFsYW5jZT48Rmlyc3ROYW1lPkZhaXRoPC9GaXJzdE5hbWU%2bPExhc3ROYW1lPkh1dHVsYTwvTGFzdE5hbWU%2bPC9Fc3RvcmVTc29DdXN0b21lcj4%3d") />
<cfset salt = "3dfjh674!MujErf98344@090" />
<cfset payload_hash = urlDecode("EtLDRJfcRESFKpY4OGZZnRSN2THqT%2bEelzOuXVU06jotd2kE4yKnlYay7BqyAdcUSATRgSMaHxZa6uBqKKd9rjNkZmpoNjc0IU11akVyZjk4MzQ0QDA5MA%3d%3d") />

<cfset strXML = ToString( ToBinary( xmlpost ) ) /> <!--- to get actual XML --->

<!--- base64 encoding returns a byte array --->
<cfset saltByteArray = toBase64( salt, "utf-8" )  /> 
<cfset xmlpostByteArray = toBase64( xmlPost, "utf-8" ) />
<!--- append salt to xmlpost --->
<cfset xmlpostsaltByteArray = xmlpostByteArray & saltByteArray />

<!--- now let us perform a sha512 hash on this concatenated byte array --->
<cfscript>
// Create an instance of our DigestUtils class
digestUtils = createObject("java","org.apache.commons.codec.digest.DigestUtils");
// I hash a byte array using the given algorithm and return a
// 32-character Hexadecimal string. Home-made hash function for CF9 and earlier
function hashBytes( bytes, algorithm = "SHA-512" ){
    // Get our instance of the digest algorithm that we'll use
    // to hash the byte array.
    var messageDigest = createObject( "java", "java.security.MessageDigest" ).getInstance( javaCast( "string", algorithm ) );

    // Get the digest for the given byte array. This returns the
    // digest (i.e., hash) in byte-array format.
    var digest = messageDigest.digest( bytes );

    // Now that we have our digested byte array (i.e., our hash as another byte
    // array), we have to convert that into a HEX string. So, we'll need a HEX buffer.
    var hexBuffer = [];

    // Each integer in the byte digest needs to be converted into
    // a HEX character (with possible leading zero).
    for (byte =1 ;byte LTE ArrayLen(digest);byte = byte + 1) {
    //for ( var byte in digest){
        // Get the hex value for this byte. When converting the
        // byte, only use the right-most 8 bits (last 8 bits of the integer)
        // otherwise the sign of the byte can create oddities

        var tail = bitAnd( 255, byte );

        // Get the hex-encoding of the byte.
        var hex = ucase( formatBaseN( tail, 16 ) );

        // In order to make sure that all of the HEX characters
        // are two-digits, we have to prepend a zero for any
        // value that was originally LTE to 16 (the largest value
        // that won't result in two HEX characters).
        arrayAppend( hexBuffer, (tail <= 16 ? ("0" & hex) : hex) );
    }

    // Return the flattened character buffer.
    return( arrayToList( hexBuffer, "" ) );
}

// Get the hash of the byte array using our hashBytes() function
hashByteArray = hashBytes( xmlpostsaltByteArray );  
</cfscript>

<!--- The hashByteArray is in HEX format now. Convert to binary --->
<!--- You must binary decode the hashed string before converting it to binary --->
<cfset hashByteArray = toBase64( BinaryDecode( hashByteArray, 'HEX' ) ) />

<!--- The final step is to append this new hashbytearray with the salt byte array --->

<cfset hashByteArray = hashByteArray & saltByteArray />

<!--- now convert this value to a base64 encoded string --->

<cfset hashByteArray2 = toBase64( hashByteArray )/> 
```

这是我的 strXML 变量得到的结果：

```
Actual xml structure converted from base 64 to string:
<?xml version="1.0"?><EstoreSsoCustomer xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><CustomerId>112940</CustomerId><DealerCode>N88888</DealerCode><PointBalance>280</PointBalance><FirstName>Faith</FirstName><LastName>Hutula</LastName></EstoreSsoCustomer> 
```

最终值 hasByteArray2 甚至与 payload_hash 一点也不相似

这是我第一次这样做，我对散列、字节数组和字符转换的理解在几十年前就飞出了窗外。

我究竟做错了什么？

谢谢信仰斯隆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T20:15:01.400

[DigestUtils.sha512](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/digest/DigestUtils.html#sha512%28byte%5B%5D%29)是在 1.4 版中添加的。ColdFusion 9 使用旧版本 1.3。这就是找不到该方法的原因。

使用基于 的其他功能`MessageDigest`。只要确保传入正确的算法，即：

```
 imageHash = hashBytes( imageBinary, "SHA-512" ); 
```

* * *

**更新：**根据更新的代码，一些说明可能有点误导。我相信他们只是意味着将`xml`和`salt`字符串从给定的编码（base64和utf-8）解码为*字节数组*，而不是字符串：

```
 // note: salt value has invalid characters for base64
    // assuming it is a plain utf-8 string
    saltArray = charsetDecode(salt, "utf-8");
    xmlByteArray = binaryDecode(xmlPost, "base64"); 
```

然后合并两个二进制数组（见自定义函数）

```
 mergedBytes = mergeArrays( xmlByteArray, saltArray ); 
```

计算新字节数组的哈希：

```
 messageDigest = createObject( "java", "java.security.MessageDigest" );
    messageDigest = messageDigest.getInstance( javaCast( "string", "SHA-512") );
    hashedByteArray = messageDigest.digest( javacast("byte[]", mergedBytes) ); 
```

再次合并数组：

```
 mergedBytes = mergeArrays( hashedByteArray, saltArray); 
```

最后将二进制转换为base64并进行比较：

```
 calculatedPayload = binaryEncode( javacast("byte[]", mergedBytes), "base64");

    // check results
    arePayloadsEqual = compare(calculatedPayload, payload_hash) eq 0;
    WriteDump("arePayloadsEqual="& arePayloadsEqual);
    WriteDump("calculatedPayload="& calculatedPayload);
    WriteDump("payload_hash="& payload_hash); 
```

*注意*：`BinaryDecode/CharsetDecode`返回 java 数组。与 CF 数组不同，它们是不可变的（即不能更改）。所以[方便的 addAll(..) 技巧](http://www.aliaspooryorik.com/blog/index.cfm/e/posts.details/post/merging-two-arrays-267)在这里不起作用。

```
 // merge immutable arrays the long way
    function mergeArrays( array1, array2 ){
        var i = 0;
        var newArray = [];
        for (i = 1; i <= arrayLen(arguments.array1); i++) {
            arrayAppend(newArray, arguments.array1[i]);
        }
        for (i = 1; i <= arrayLen(arguments.array2); i++) {
            arrayAppend(newArray, arguments.array2[i]);
        }
        return newArray;
    } 
```

# jquery-mobile - 在 PhoneGap 中从 JQuery Mobile 应用程序访问 Web 服务

> ID：10760275
> 
> 赞同：1
> 
> 时间：2012-05-25T19:24:55.620
> 
> 标签：jquery-mobile, cordova

我有一个 JQuery 移动应用程序。此应用程序需要访问远程 Web 服务。当我从本地文件系统运行应用程序时，应用程序加载正常。但是，当我单击一个按钮时，我会尝试与 Web 服务进行交互。当我尝试访问 Web 服务时，我在控制台中看到一条错误消息：

```
XMLHttpRequest cannot load https://www.mydomain.com/myService/myAction. Origin null is not allowed by Access-Control-Allow-Origin 
```

我尝试使用以下代码访问该服务：

```
var vm = getParameters();
$.ajax({
  url: https://www.mydomain.com/myService/myAction,
  type: "POST",
  data: JSON.stringify(vm),
  contentType: "application/json",
  success: action_Succeeded,
  error: action_Failed
}); 
```

我究竟做错了什么？我尝试了这篇文章中的所有内容，但没有任何运气：[XmlHttpRequest error: Origin null is not allowed by Access-Control-Allow-Origin](https://stackoverflow.com/questions/3595515/xmlhttprequest-error-origin-null-is-not-allowed-by-access-control-allow-origin)。

当我通过 Visual Studio 运行我的应用程序时，它可以工作。我的预感是它当时在 Web 服务器的上下文中运行。但是，我想通过 PhoneGap 部署它。因此，在 Web 服务器的上下文中运行是不可能的。这就是为什么我认为如果我通过本地文件系统运行它并且一切正常，我应该会很好。我究竟做错了什么？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:54:56.123

检查您的 config.xml 文件（如果您使用的是 Phonegap Build 服务 - 否则检查 iOS 的 .plist 文件，Android 的 AndroidManifest.xml ..），并添加以下行：

```
<access origin="*" /> 
```

如果这可行，那么您可以尝试设置更具限制性的访问规则，例如：

```
<access origin="https://mydomain.com" subdomains="true" /> 
```

在您的服务器端，您需要返回此 http 标头：

```
Access-Control-Allow-Origin: * 
```

# ruby - 我可以扩展一个 Ruby 类以动态地表现得像 OpenStruct 吗？

> ID：10760284
> 
> 赞同：8
> 
> 时间：2012-05-25T19:25:51.123
> 
> 标签：ruby, module, metaprogramming, mixins, openstruct

我有一个包含模块的 Ruby 类。我希望包含类的行为类似于 OpenStruct。我如何在不显式继承 OpenStruct 的情况下实现这一点？

```
class Book
  include MyModule
end

module MyModule
  def self.included(klass)
    # Make including class behave like OpenStruct
  end
end 
```

代替

```
class Book < OpenStruct
  include MyModule
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T21:04:06.587

您可以将您的类未处理的所有方法委托给 OpenStruct：

```
require 'ostruct'

class Test_OS

  def initialize
    @source = OpenStruct.new
  end

  def method_missing(method, *args, &block)
    @source.send(method, *args, &block)
  end

  def own_method
    puts "Hi."
  end

end

t = Test_OS.new
t.foo = 1
p t.foo #=> 1
t.own_method #=> Hi. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:50:49.697

由于`OpenStruct`不是模块，并且您不能使模块从类继承，因此您需要编写自己的模块`method_missing`来实现 OpenStruct 功能。值得庆幸的是，这是很少的工作。整个 OpenStruct 类只有大约 80 行代码，其中大部分您甚至可能并不完全需要。

您是否有充分的理由想要依赖 OpenStruct 本身？

# swig - 由于预处理器指令导致的 SWIG 错误

> ID：10760287
> 
> 赞同：13
> 
> 时间：2012-05-25T19:26:17.443
> 
> 标签：swig, c-preprocessor

我们有一个供应商为我们提供了一个 C++ 库和头文件，我正在尝试使用 SWIG 对其进行包装。看起来他们对预处理器指令太聪明了一半：

```
// top.h
#define DECLARE_WITH_COMMA(a) a, 
```

进而

```
// foo.h
#include "top.h"

#define MY_TYPES(d) \
  d(One)   \
  d(Two)   \
  d(Three) \
  NumElems

enum MyTypes {
  MY_TYPES(DECLARE_WITH_COMMA)
}; 
```

这是一种冗长的说法，当我尝试在“foo.h”上运行 SWIG（版本 2.0.4）时，我得到：

```
foo.h:12: Error: Syntax error in input(1). 
```

所以我的问题是我的选择是什么，因为我可能不想更改供应商提供的标头？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-26T01:18:48.253

默认情况下，SWIG 不会递归到嵌套标题中，因此您的`.i`文件应类似于：

```
%module mymod

%{
#include "foo.h"
%}

%include "top.h"
%include "foo.h" 
```

还有一个 SWIG 开关：

```
-includeall     - Follow all #include statements 
```

但是，如果您的系统标头可能比您预期的要多。

# ruby-on-rails - Rails 通过 ID 获取多个

> ID：10760288
> 
> 赞同：11
> 
> 时间：2012-05-25T19:26:17.973
> 
> 标签：ruby-on-rails

在 Rails 中，我有一个`Product`模型。有时我需要同时获取多个`products`（但列表是完全动态的，因此无法在 Rails 端完成）。

所以，假设对于这个电话，我需要在一个电话中获得产品 1、3、9、24。这可能吗？如果是这样，我是否需要为此自定义路由以及在控制器中放入什么？

即做这样的事情吗？`/products/1,3,9,24`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-25T19:36:21.787

我认为您根本不需要更改路线。你应该只需要在你的控制器/模型中解析它们。

```
def show
  @products = Product.find params[:id].split(',')
end 
```

如果您随后向 发送请求`http://localhost/products/1,3,9,24`，@products 应返回 4 条记录。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-25T20:31:27.323

我会认为这是一个在有限范围内建立索引的请求，有点像搜索，所以我会这样做：

```
class ProductsController < ApplicationController
  def index
    @products = params[:product_ids] ? Product.find(params[:product_ids]) : Product.all
  end
end 
```

然后用 url 数组链接到这个：

```
<%= link_to 'Products', products_path(:product_ids => [1, 2, 3]) %> 
```

这将创建看起来有点像的标准非索引 url 数组

```
product_ids[]=1&product_ids[]=2 ... 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T19:32:34.583

```
Product.where(:id => params[:ids].split(',')) 
```

# jquery - Android 移动浏览器将 href attr 更改为 #

> ID：10760292
> 
> 赞同：1
> 
> 时间：2012-05-25T19:26:42.360
> 
> 标签：jquery, android, jquery-mobile

使用 Android 浏览器时，href attr 显示为“#”时遇到问题。在我尝试过的桌面浏览器（Chrome/Firefox）中，它会正确提示为“http://test/dir/action/”，但在我尝试过的 Android 2.3 和 4.0 设备上它只显示为“#”。

见jsfiddle：

[http://jsfiddle.net/7gfm3/](http://jsfiddle.net/7gfm3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T00:56:52.170

看来这已在 JQuery Mobile 的当前测试版本中得到修复。看：

[https://github.com/jquery/jquery-mobile/issues/4372](https://github.com/jquery/jquery-mobile/issues/4372)

# linux - WebSockets 菜鸟与 Railo 一起工作

> ID：10760294
> 
> 赞同：0
> 
> 时间：2012-05-25T19:26:49.067
> 
> 标签：linux, apache, node.js, websocket, railo

诚然，我在所有服务器、Linux 和 websockets 方面都是一个完全的菜鸟。我终于设法建立了一个运行 Apache、Tomcat 和 Railo 的 VM，我可以连接到它并提供 CFM 页面，同时学习 UNIX 命令行导航、服务器理论等……

这是我的问题——只有一个 Railo websocket 扩展，而且它是超级 rinky-dink（我不得不修改 CFC 才能启动服务）但我无法建立 websocket 连接（我不断得到“意外谷歌浏览器中的代码 200")。文档很少，根本没有帮助。

基本上，我正在尝试为将使用 websockets 的未来项目做一些原型设计。我喜欢 Railo 的速度、安全性和出色的数据库繁重操作能力。我对 Node 很感兴趣，但不知道如何从 Javascript 中获得与 CFML 相同的安全性和 DB 功能。

所以我有几个问题：WebSocket 服务器的最佳选择是什么？我应该尝试使用 Apache 和/或 Tomcat 吗？人们一直在说，让 Node.js 之类的东西运行 websockets 部分而让其他东西在它背后做繁重的工作是完全不值得的——这是为什么呢？我非常乐意用任何语言编写 WS 处理程序，只要我能在正确的方向上获得推动、一些优秀的教程（我似乎在这个部门找不到太多），或者关于如何使用的良好反馈，来自从头开始，设置我的 Linux 机器来处理 websockets——最好是如何处理 websockets 和像 Railo 这样的健壮语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T13:29:26.297

Railo 扩展对我来说很好用。提交一些测试代码以便我们调试它怎么样？当然，websockets 项目还很年轻并且正在全面部署中。因此，请随时 fork 并提交补丁或建议。你有很多选择：

*   [Railo 谷歌组](https://groups.google.com/forum/?fromgroups#!forum/railo) [https://groups.google.com/forum/?fromgroups#!forum/railo](https://groups.google.com/forum/?fromgroups#!forum/railo)

*   [Github 扩展存储库](https://github.com/andreacfm/WebSocket-Gateway-Extension)

*   提交但在[Railo Jira](https://issues.jboss.org/browse/RAILO) bugtracker

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T21:06:33.107

“意外代码 200”是由 Railo 的 Web 套接字服务器发送过时的响应引起的。他们更改了网络套接字规范，Chrome 使用了更新的规范。

```
The problem seems to be caused by chrome & co implementing the new spec, "draft-ietf-hybi-thewebsocketprotocol-17". It requires the server to respond with "HTTP/1.1 101 Switching Protocols" rather than 200 OK. 
```

这里的解决方案是自己更新 Railo Web 套接字扩展或使用其他解决方案：

这是一个用 PHP 编写的 web socket 聊天服务器的完整演示。

[http://www.flynsarmy.com/2012/02/php-websocket-chat-application-2-0/](http://www.flynsarmy.com/2012/02/php-websocket-chat-application-2-0/)

我自己用它来实现一个实时的 HTML 聊天，它由我躺在身边的 Arch Linux 机器提供服务。配置包括简单地设置 Apache 和 PHP，然后将 index.html 和 server.php 中的 IP 地址更改为服务器机器的外部 IP 地址。

这个 flynsarmy 演示包括最新版本的 PHPWebSocket，它是一个完全用 PHP 编写并包含在单个文件中的开源 Web 套接字服务器。演示挂钩到三个回调：连接、收到消息和断开连接。

对我来说，需要注意的重要一点是，Web 套接字协议仅支持文本，而不支持二进制，因此在为我自己的聊天应用程序扩展它时，我必须实现自己的命令来帮助控制服务器。在我的例子中，命令如下所示：

```
!kickusers: username, another_username, a_third_username 
```

我的服务器代码会检查所有消息的第一个字符是否有“！” 如果存在，会将其视为命令。然后我将字符串切分以获得命令“kickusers”和要踢的用户列表。然后我调用适当的 kick 函数并将用户名数组传递给它。

因为我的场景是一个聊天客户端，这意味着用户可以在聊天中直接输入这个命令，服务器会接受并响应它。

所有这些部署在我的服务器上的方式是这样的：

*   当用户在浏览器中访问我服务器上的那个位置时，我让 Apache 为 index.html 页面提供服务。Apache 在这里的唯一目的是将 index.html 提供给请求它的客户端。
*   index.html 页面包含用于显示聊天的 html 和用于向服务器发送和从服务器接收聊天的 javascript。基本上，index.html 只是一个用 HTML 和 Javascript 编写的聊天客户端，它在浏览器中运行。
*   我通过服务器上的 ssh 运行 server.php 以启动 WEB SOCKET 服务器（与 Apache 完全分离），它就坐在那里并处理聊天内容，例如向其他连接的客户端回显文本等。

尽管有关安装 Apache 和 PHP 的 Arch wiki 以您安装 Apache 和 PHP 包的方式特定于 Arch，但有关配置 Apache 和 PHP 的部分适用于所有人。如果您愿意，我会为您保存 google 查询并在此处给您链接：[https ://wiki.archlinux.org/index.php/LAMP](https://wiki.archlinux.org/index.php/LAMP)

至于原型，我提供 Flynsarmy 聊天演示链接的原因是因为他的评论很有帮助，他写了一篇关于它的博客，这是一个非常简单但完整的示例，说明了如何在 php 中使用 web sockets 做一些事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T19:33:33.723

node.js 的主要问题是它是单线程的：您将无法使用它执行后台任务，并且本地 IO 会阻塞您的服务器。

我使用的解决方案是[Go](http://golang.org)。它非常快，具有非常好的并发特性，并且集成了 websocket 和 json 库（示例： http: [//gary.beagledreams.com/page/go-websocket-chat.html](http://gary.beagledreams.com/page/go-websocket-chat.html)）。一个高效的 Web 应用程序服务器是用几十行 Go 语言构建的。你会发现互联网上的文档仍然比 java 甚至 node.js 少得多。

java中有一些websockets的实现，但是由于我正在将java中的所有内容切换到Go，所以我没有测试它们。我知道我在 java 中使用 Google gson 进行 json 编码，它非常好。

# grails - Groovy 1.8.6 使用了不正确的元分类方法

> ID：10760300
> 
> 赞同：2
> 
> 时间：2012-05-25T19:27:39.300
> 
> 标签：grails, groovy, metaprogramming

我在使用 Grails 2.0.1 进行重构时偶然发现了这一点，但我将这个问题的基础知识提取到了一个直接的 groovy 1.8.6 测试中，但它仍然失败了。我遇到它是因为我的方法过去不带参数，我将其更改为带 1 个参数。当我更改实施生产代码时，我的测试都没有失败。这很奇怪，因为我在测试中使用的 metaClassing 设置为不接受任何参数，但是当我传入参数时它仍然响应我的生产代码。因此，在下面的示例中，我想知道为什么要调用第二个 metaClassing 而不是第一个。它不接受任何参数，如您所见，我正在传递一个参数。如果您切换 metaClassing 的顺序，那么它可以正常工作，但顺序不应该 在这种情况下无关紧要，因为方法签名不同。任何有关为什么会发生这种情况的见解将不胜感激。

```
import groovy.util.GroovyTestCase

class FirstTest extends GroovyTestCase {

    void testStuff() {
        def object = new Object()
        object.metaClass.someMethodName = {Object obj ->
            "ONE"
        }
        object.metaClass.someMethodName = {
            "TWO"
        }

        def result = object.someMethodName(new Object())

        assert "ONE" == result //result is equal to "TWO" in this case
    }

} 
```

**编辑**

似乎我上面的代码可能比有用的更令人困惑，所以这里是实际的代码。

原始生产代码：

```
def create() {
    render(view: "create", model: [domains: Domain.myCustomListMethod().sort{it.cn}])
} 
```

原始测试代码：

```
@Test
void createShouldIncludeAListOfAllDomainsInModel() {
    def directory = GldapoDirectory.newInstance(
            "", [
                    url: "http://url.com",
                    userDn: "someUserName",
                    password: "superSecretPassword"
            ])
    controller.session.userDirectory = directory
    Domain.metaClass.'static'.myCustomListMethod = {
        [[cn:"1"], [cn:"2"]]
    }

    controller.create()

    assert [[cn:"1"], [cn:"2"]] == controller.modelAndView.model.domains
} 
```

然后我更新了生产代码以传入，`session.userDirectory`即使它没有设置为接收任何参数，我的测试仍然未经修改地通过：

```
def create() {
    render(view: "create", model: [domains: Domain.list(session.userDirectory).sort{it.cn}])
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:55:28.913

默认情况下，闭包采用一个参数（对象类），即使没有声明（可通过默认变量访问`it`）

所以你的第二个关闭覆盖了第一个

# c# - 将超类传递给 C# 函数（带有 Java 序曲）

> ID：10760305
> 
> 赞同：2
> 
> 时间：2012-05-25T19:28:08.583
> 
> 标签：c#, java, oop, inheritance, polymorphism

自从我对 Java OOP 做任何事情以来已经有一段时间了，所以我有点生疏，想要澄清一下。

在 Java 中，如果我没记错的话，可以声明一个超类并实例化一个子类；例如，`Superclass myObject = new Subclass()`。

然后可以将 myObject 传递给接受超类参数的函数，并使用引用访问任何超类属性/方法。

这就是事情变得模糊的地方 - 如果您想访问特定于子类的方法/变量，您可以直接使用 myObject （它被声明为超类）执行此操作，还是需要先将其转换为子类类型？

如果我们现在将其转至 C#，是否适用相同的逻辑？我在尝试复制这种行为时遇到了一些奇怪的问题。我正在查看的具体用例是：

```
//These are just declarations for ease-of-reading
Superclass bar = new Subclass();
public static void doSomething(Superclass foo) {...}

//Logic
doSomething(bar);
bar.superOnly() //Should this work?
bar.subOnly() //Should this work?
bar.subOverrided() //Will this call the superclass or subclass version? 
```

我也在教程中查找这些内容，但大多数示例似乎都是简单的“Subclass myObject = new Subclass()”实例，输出微不足道。到目前为止，我发现的任何内容都没有涵盖函数参数的模糊世界。

如果有人可以帮助我，或者将我指向涵盖 C# 中的函数参数和 OO 的特定资源，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:30:25.133

获得所需功能的两种方法。

1) 将对象转换为子类
2) 从一开始就将对象实例化为子类。

对于第一，如果我`Collection`不知道 an`ArrayList`是做什么的，那么就不可能调用`ArrayList`.

```
Collection collection = new ArrayList(); 
```

第二个例子：

```
ArrayList list = new ArrayList(); 
```

以上使我可以访问公共的所有内容（从父类/接口共享）以及在`ArrayList`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T19:32:34.307

> 这就是事情变得模糊的地方 - 如果您想访问特定于子类的方法/变量，您可以直接使用 myObject （它被声明为超类）执行此操作，还是需要先将其转换为子类类型？

是的，这就是多态性的用途。在派生类中重写的基类的虚拟方法将始终被调用，即使您通过基类型的引用调用该方法也是如此。

> 如果我们现在将其转至 C#，是否适用相同的逻辑？

是的，原理是一样的

至于你的例子：

```
bar.superOnly() //Should this work? 
```

是的

```
bar.subOnly() //Should this work? 
```

不，因为编译器不知道这个方法

```
bar.subOverrided() // Will this call the superclass or subclass version? => the subclass 
```

是的，由于多态性

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T19:34:18.830

如果要调用**仅在子类上声明**的方法，则必须将变量强制转换为子类或从子类类型的变量开始。

如果要调用在子类上被**覆盖**的方法，可以通过超类变量调用，会调用子类的版本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T19:37:31.467

在 C# 和 Java 中，规则非常一致。

您**声明**一个具有特定类型的变量，该类型指示您可以使用的接口。声明的类型是变量之前的类型名称。只有定义为声明类型的一部分的方法才能使用（无需强制转换）。

相反，**定义**可以是声明类型或声明类型的任何子类或实现。该定义不会改变通过该变量提供给您的接口，它定义了该变量的实现。对象变量的定义是分配给它的值（右侧），通常使用`new`.

变量的声明类型只能通过转换为其他类型来更改，这可能会也可能不会成功（编译器不一定知道您的转换是否有效）。

# unix - 如何在新窗口中在vim中打开一个新文件

> ID：10760310
> 
> 赞同：80
> 
> 时间：2012-05-25T19:28:24.120
> 
> 标签：unix, vim

有没有办法在新的 shell 窗口或选项卡中打开 vim？我习惯于`$ mate file`在新窗口中打开文件。

我更喜欢有一个“中央外壳”，我可以根据需要在其他窗口或选项卡中发出命令和编辑文件。人们通常如何在本地打开vim文件？

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2012-05-26T00:15:06.657

从 vim 内部，使用以下之一

**在当前窗口下方打开一个新窗口**：

```
:new filename.ext 
```

**在当前窗口旁边打开一个新窗口**：

```
:vert new filename.ext 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-17T14:37:04.427

您可以在 vim 中执行此操作并使用它自己的窗口或选项卡。

一种方法是利用内置的文件资源管理器；通过,`:Explore`或*选项卡式*界面（我觉得最舒服）激活它。`:Texplore`

 *`:Texplore`(and `:Sexplore`) 也将防止您在进入资源管理器后意外退出当前缓冲区（编辑器）`:q`。

要在使用选项卡页时在打开的选项卡之间切换，请使用`gt`或`gT`（分别为下一个选项卡和上一个选项卡）。

另请参阅vim wiki 上的[*使用标签页。*](http://vim.wikia.com/wiki/Using_tab_pages)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-10-05T13:22:18.870

我使用这个微妙的别名：

```
alias vim='gnome-terminal -- vim' 
```

-x 现在已弃用。我们需要使用 -- 代替

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-30T17:08:08.097

如果您不介意使用 gVim，您可以启动单个实例，这样当使用它打开新文件时，它会自动在当前运行实例的新选项卡中打开。

为此，您可以编写：`gVim --remote-tab-silent file`

你总是可以给这个命令起一个别名，这样你就不必输入太多的单词了。例如，我使用 linux 和 bash，在我的`~/.bashrc`文件中我有：

`alias g='gvim --remote-tab-silent'`

所以`$ mate file`我不这样做：`$ g file`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-02T12:32:52.207

我正在使用以下内容，尽管它是硬编码的`gnome-terminal`。它还将 vim 的 CWD 和缓冲区更改为与当前缓冲区及其目录相同。

```
:silent execute '!gnome-terminal -- zsh -i -c "cd ' shellescape(expand("%:h")) '; vim' shellescape(expand("%:p")) '; zsh -i"' <cr> 
```

* * *

## 回答 #6

> 赞同：-37
> 
> 时间：2012-05-25T19:46:29.213

查看 gVim。您可以在其自己的窗口中启动它。

gVim 使得以图形方式管理多个打开的缓冲区变得非常容易。

你也可以像往常一样`:e`打开一个新文件，`CTRL`+`^`在缓冲区之间切换，等等......

另一个很酷的功能可以让您打开一个弹出窗口，其中列出了您处理过的所有缓冲区。

这允许您通过单击在打开的缓冲区之间切换。

为此，请单击顶部的*缓冲区*菜单，然后单击带有剪刀的虚线。

![在此处输入图像描述](../Images/d14bd92e248610d5b95c734cb2f01807.png)

否则，您可以从终端会话中打开一个新选项卡并从那里启动 vi。

您通常可以使用 `CTRL`+`T` **或** `CTRL`+ `ALT`+从终端打开一个新选项卡`T`

一旦 vi 启动，就可以轻松打开新文件并在它们之间切换。*

# c# - 与 TFS 的奇怪合并结果

> ID：10760313
> 
> 赞同：1
> 
> 时间：2012-05-25T19:28:28.073
> 
> 标签：c#, visual-studio, tfs

我在 TFS 的主分支上创建了一个分支。

主分支上有一些更新（新文件），所以我想将它们合并到分支中。

**合并后，主分支中的新文件没有被合并。**

为什么会这样？

这些是主分支中的新文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:12:43.253

您可能无权做自己想做的事。

当您合并*现有*文件时，您可以在“Pending Changes”窗口中看到该操作是“merge, edit”。
当您合并*新*文件时，您会看到“合并，分支”。

为了实现后者，您的用户还必须具有“经理分支”权限集。为了检查这一点，右键单击源代码管理资源管理器中的分支，选择“属性”，然后选择“权限”。

（另一个可能有用的提示：如果您的*新*文件是二进制文件（DLL、PNG），还包括“锁定”操作 - 因此在这种情况下还必须设置“锁定”权限。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:35:38.577

听起来很熟悉。我记得我们有一个看起来像这样的问题。尝试办理登机手续。这对我们有帮助。

# forms - 使用带有消化函子和 Snap 的单子验证

> ID：10760319
> 
> 赞同：3
> 
> 时间：2012-05-25T19:29:06.600
> 
> 标签：forms, haskell, haskell-snap-framework

我现在尝试了很长时间来围绕如何在消化函子表单字段中使用验证，这需要访问另一个 monad。简而言之，我有这样的[消化](http://hackage.haskell.org/packages/archive/digestive-functors/0.4.0.0/doc/html/Text-Digestive.html)形式

```
studentRegistrationForm :: Monad m => Form Text m StudentRegistrationData
studentRegistrationForm = StudentRegistrationData
    <$> "school"    .: choice schools Nothing
    <*> "studentId" .: check studentIdErrMsg (not . T.null) (text Nothing)
    <*> "firstName" .: check firstNameErrMsg (not . T.null) (text Nothing)
    <*> "lastName"  .: check lastNameErrMsg  (not . T.null) (text Nothing)
    <*> "email"     .: check emailErrMsg (E.isValid . T.unpack) (text Nothing) 
```

（studentId 基本上就是用户名）

并想使用[Snap.Snaplet.Auth](http://hackage.haskell.org/packages/archive/snap/0.7/doc/html/Snap-Snaplet-Auth.html)`usernameExists`的功能来检查输入的用户名是否唯一。

为了完整起见，这里是对应的数据类型：

```
data StudentRegistrationData = StudentRegistrationData
  { school    :: School  -- ^ school the student is enroled
  , studentId :: Text    -- ^ matriculation number of the student
  , firstName :: Text    -- ^ first name of the student
  , lastName  :: Text    -- ^ last name of the student
  , email     :: Text    -- ^ email for sending password
  } deriving (Show) 
```

我在处理程序中创建我的表单，例如：

```
studentRegistrationHandler :: AppHandler ()
studentRegistrationHandler = do
    (view, registrationData) <- runForm "form" SRF.studentRegistrationForm
    maybe (showForm "registration" view) createUser registrationData

showForm :: String -> View Text -> AppHandler ()
showForm name view =
    heistLocal (bindDigestiveSplices view) $ render template
  where
    template = BS.pack $ "student-" ++ name ++ "-form" 
```

所以我现在的问题是了解如何访问表单内的 Auth snaplet 的状态。是已经通过还是我必须自己通过？[Text.Digestive.Form](http://hackage.haskell.org/packages/archive/digestive-functors/0.4.0.0/doc/html/Text-Digestive-Form.html)中的函数会`checkM`分别帮助我吗？`validateM`

我发现了几个如何使用消化函子和 snap auth 和 session 的例子，比如：

*   [快照示例](http://jaspervdj.be/posts/2012-04-03-digestive-functors-for-snap-users.html)
*   [消化函子教程](https://github.com/jaspervdj/digestive-functors/blob/master/examples/tutorial.lhs)
*   [postgres 示例](https://github.com/mightybyte/snaplet-postgresql-simple/blob/master/example/Site.hs)
*   [开始使用 Snap-Auth](http://blog.dbpatterson.com/post/20132704797)

但是没有一个显示 Snap.Snaplet.Auth 和消化仿函数直接一起工作，而且在 monad 转换器和提升方面我仍然是一个菜鸟……也许这对我来说太容易看到了。:(

我可以在 github 上上传一个独立的示例，如果它有助于说明它，它会显示我的问题。非常欢迎任何提示、指示和建议！:)

汉内斯

补充：我创建了一个演示基本身份验证功能的示例应用程序，你可以看看这里：[消化功能器-快照-验证-示例](https://github.com/J-Hannes/digestive-functors-snap-auth-example)享受！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:51:29.983

我还没有尝试过这个，看看是否所有类型都检查，但这是一般的想法。您想使用 checkM 或 validateM 进行单子验证是正确的。checkM 的类型签名提供了丰富的信息：

```
checkM :: Monad m => v -> (a -> m Bool) -> Form v m a -> Form v m a 
```

这告诉我们验证函数需要具有类型 (a -> m Bool)**并且**`m`必须与表单中的相同`m`。这意味着您需要将表单的类型更改为以下内容：

```
studentRegistrationForm :: Form Text AppHandler StudentRegistrationData 
```

现在让我们编写验证器。由于我们计划在验证器中使用 usernameExists 函数，我们需要查看该类型签名：

```
usernameExists :: Text -> Handler b (AuthManager b) Bool 
```

这实际上看起来很像`(a -> m Bool)`我们需要的类型签名。事实上，它是完全匹配的，因为`Handler b (AuthManager b)`它是一个 monad。但即使它完全匹配`(a -> m Bool)`模式并不意味着我们已经完成了。当你运行你的表单时，你在 AppHandler monad 中，它可能只是一个类型别名，`Handler App App`其中 App 是你的应用程序的顶级 snaplet 状态类型。所以我们需要做的就是转换`Handler b (AuthManager b)`成`Handler b b`与`Handler App App`. snaplet API 中的[with](http://hackage.haskell.org/packages/archive/snap/0.7/doc/html/Snap-Snaplet.html#v%3awith)函数正是我们所需要的。这使得我们的验证功能非常简单：

```
validUser :: Text -> Handler App App Bool
validUser = liftM not . with auth . usernameExists 
```

有了这个，你可以`checkM usernameErrMsg validUser`像在上面的代码中使用 check 一样使用。

# java - 在 Hibernate 中使用 load 而不是 get 时遇到 LazyInitializationException

> ID：10760320
> 
> 赞同：2
> 
> 时间：2012-05-25T19:29:19.130
> 
> 标签：java, spring, hibernate, jsp

我正在使用 JPA、Hibernate 和 Spring MVC。在控制器类中，所有方法都非常有效。当我在网络浏览器中测试它们时，该`public String getModuleFormation(long id)`方法返回一个对象，它给了我以下错误：

```
org.hibernate.LazyInitializationException: could not initialize proxy - no Session 
```

作为根本原因，但昨天我尝试了它，它在 localhost:45045/GestionModules/detail/xx URL 中没有问题。

什么可能导致这个问题？

我的detail.jsp：

```
<c:if test="${!empty detailModule}">

${detailModule.idModule}
${detailModule.libModule}
</c:if> 
```

POJO 类 + JPA：

```
@Entity
@Table(name="ModuleFormation")
public class ModuleFormation {

private long idModule;
private String libModule;

public ModuleFormation() {
    // TODO Auto-generated constructor stub
}

public ModuleFormation(String libModule) {
    this.libModule = libModule;
}

@Id
@GeneratedValue(strategy = GenerationType.AUTO, generator = "seqModule")
@SequenceGenerator(name="seqModule", sequenceName = "seqModuleFormation")
@Column(name="idModule")
public long getIdModule() {
    return this.idModule;
}

public void setIdModule(long idModule) {
    this.idModule = idModule;
}

@Column(name="libModule", nullable=false, length = 100)
public String getLibModule() {
    return this.libModule;
}

public void setLibModule(String libModule) {
    this.libModule = libModule;
}

} 
```

DAO 类：

```
@Repository
public class ModuleFormationDAOImpl implements ModuleFormationDAO {

@Autowired
private SessionFactory sessionFactory;

public void ajouterModuleFormation(ModuleFormation module) {
    sessionFactory.getCurrentSession().save(module);
}

public void supprimerModuleFormation(long idModule) {
    ModuleFormation module = (ModuleFormation) sessionFactory.getCurrentSession().load(ModuleFormation.class, idModule);
    if(module != null)
        sessionFactory.getCurrentSession().delete(module);
}

public List<ModuleFormation> listModuleFormation() {

    return sessionFactory.getCurrentSession().createQuery("from ModuleFormation")
            .list();

}

public ModuleFormation getModuleFormation(long idModule) {
     return (ModuleFormation) sessionFactory.getCurrentSession().load(ModuleFormation.class, idModule);
}

public void majModuleFormation(ModuleFormation module) {
    sessionFactory.getCurrentSession().merge(module);
}

} 
```

服务等级：

```
@Service
public class ModuleFormationServiceImpl implements ModuleFormationService {

@Autowired
private ModuleFormationDAO moduleDao;

@Transactional
public void ajouterModuleFormation(ModuleFormation module) {
    moduleDao.ajouterModuleFormation(module);
}

@Transactional
public void supprimerModuleFormation(long idModule) {
    moduleDao.supprimerModuleFormation(idModule);
}

@Transactional
public List<ModuleFormation> listModuleFormation() {
    return moduleDao.listModuleFormation();
}

@Transactional
public ModuleFormation getModuleFormation(long idModule) {
    return moduleDao.getModuleFormation(idModule);
}

@Transactional
public void majModuleFormation(ModuleFormation module) {
    moduleDao.majModuleFormation(module);
}
} 
```

控制器类：

```
@Controller
public class ModuleFormationController {

@Autowired
private ModuleFormationService moduleService;

@RequestMapping("/module")
public String listModulesFormations(Map<String, Object> map) {

    map.put("module", new ModuleFormation());
    map.put("moduleList", moduleService.listModuleFormation());

    return "module";
}

@RequestMapping(value = "/ajouter", method = RequestMethod.POST )
public String ajouterModuleFormation(@ModelAttribute("module")
ModuleFormation module,BindingResult result) {

    moduleService.ajouterModuleFormation(module);

    return "redirect:/module";
}

@RequestMapping(value = "/supprimer/{idModule}")
public String supprimerModuleFormation(@PathVariable("idModule")
long idModule) {
    moduleService.supprimerModuleFormation(idModule);

    return "redirect:/module";
}

@RequestMapping(value= "/detail/{idModule}")
public String getModuleFormation(@PathVariable("idModule")
long idModule,Map<String, Object> map) {
    map.put("detailModule", moduleService.getModuleFormation(idModule));
    return "/detail";
}

@RequestMapping(value= "/detail/modifier", method = RequestMethod.POST )
public String majModuleFormation(@ModelAttribute("detailModule")
ModuleFormation module, BindingResult result) {
    moduleService.majModuleFormation(module);
    return "detail/{idModule}";
}

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T19:40:31.947

Hibernate 方法的 Javadoc`Session#load(Class, Serializable)`说：

> 返回具有给定标识符的给定实体类的持久实例，假设该实例存在。当访问非标识符方法时，此方法可能会返回按需初始化的代理实例。

当您在 JSP 中访问对象的属性时，加载该对象的会话已关闭。

用于`Session#get(Class, Serializable)`确保您不加载代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:47:07.640

而不是`sessionFactory.getCurrentSession().load(ModuleFormation.class, idModule)`，你试过`sessionFactory.getCurrentSession().get(ModuleFormation.class, idModule)`吗？

# eclipse-plugin - 用于 Rational 的 Velocity 插件 (RSA 7.5.5)

> ID：10760321
> 
> 赞同：0
> 
> 时间：2012-05-25T19:29:22.873
> 
> 标签：eclipse-plugin, editor, velocity, rational-rsa

我是 Velocity 的新手，并在从 jars [http://veloedit.sourceforge.net](http://veloedit.sourceforge.net)中提取它们后添加了它的插件文件夹（org.apache.velocity_1.7.0、org.vaulttec.velocity.ui_1.0.3） ，并将它们放入该路径中我的 Eclipse (RSA) 的插件文件夹（“C:\IBM\SDPShared\plugins”）。但是使用默认编辑器而不是插件打开的 .VM 文件，并且在那里找不到自动完成功能。

注意：我也看不到 Window -> show view -> other 下的速度视图。因此，请建议如何获得此问题的解决方案或使用其他编辑器。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:19:30.930

我使用[http://code.google.com/p/veloeclipse/](http://code.google.com/p/veloeclipse/)仍然适用于当前的 Eclipse 3.7.2。如果您通过转到“帮助 - 安装新软件 - 添加”并输入更新站点[http://veloeclipse.googlecode.com/svn/trunk/update/来安装它是最简单的](http://veloeclipse.googlecode.com/svn/trunk/update/)

# c# - 在后台留意 CD

> ID：10760323
> 
> 赞同：2
> 
> 时间：2012-05-25T19:29:29.457
> 
> 标签：c#, .net

我发现[此代码](http://en.csharp-online.net/Detect_CD-ROM_Insertion)用于监视要使用 C# 插入/弹出的 CD。我很好奇这是否可以有效地调整为后台进程/计时器功能而不会显着降低性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:34:25.740

我建议您使用提供的触发器，而不是使用后台进程或计时器`ManagementEventWatcher`。

您可以在此处找到示例实现：http: [//www.codeproject.com/Tips/295008/How-to-Detect-Insertion-of-a-CD-ROM](http://www.codeproject.com/Tips/295008/How-to-Detect-Insertion-of-a-CD-ROM)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:34:10.210

您是否正在考虑对 CD 托盘活动执行操作的 Windows 服务。我相信这可以很容易和有效地完成。

# vim - 如何在 Vim 中合并两个多行文本块？

> ID：10760326
> 
> 赞同：327
> 
> 时间：2012-05-25T19:30:08.177
> 
> 标签：vim

我想在 Vim 中合并两行代码块，即，将行 *k*到 *l*并将它们附加到行*m*到 *n*。如果您更喜欢伪代码解释：`[line[k+i] + line[m+i] for i in range(min(l-k, n-m)+1)]`.

例如，

```
abc
def
...

123
45
... 
```

应该成为

```
abc123
def45 
```

有没有一种很好的方法可以做到这一点，而无需逐行手动复制和粘贴？

* * *

## 回答 #1

> 赞同：885
> 
> 时间：2012-05-25T19:44:06.780

您当然可以通过一次复制/粘贴（使用块模式选择）来完成所有这些，但我猜这不是您想要的。

如果您只想使用[Ex](http://en.wikipedia.org/wiki/Ex_%28text_editor%29)命令执行此操作

```
:5,8del | let l=split(@") | 1,4s/$/\=remove(l,0)/ 
```

会变身

```
work it 
make it 
do it 
makes us 
harder
better
faster
stronger
~ 
```

进入

```
work it harder
make it better
do it faster
makes us stronger
~ 
```

* * *

**更新：**有这么多赞成的答案值得更彻底的解释。

在 Vim 中，你可以使用竖线 ( `|`) 来链接多个 Ex 命令，所以上面的等价于

```
:5,8del
:let l=split(@")
:1,4s/$/\=remove(l,0)/ 
```

许多 Ex 命令接受一系列行作为前缀参数 - 在上述情况下，`5,8`before the`del`和`1,4`before the`s///`指定命令操作的行。

`del`删除给定的行。它可以接受一个寄存器参数，但是当没有给出一个参数时，它会将行转储到未命名的寄存器中`@"`，就像在正常模式下删除一样。 `let l=split(@")`然后使用默认分隔符将删除的行拆分为一个列表：空格。要在已删除行中有空格的输入上正常工作，例如：

```
more than 
hour 
our 
never 
ever
after
work is
over
~ 
```

我们需要指定一个不同的分隔符，以防止“工作是”被分成两个列表元素：`let l=split(@","\n")`.

最后，在替换中`s/$/\=remove(l,0)/`，我们将每一行的末尾 ( `$`) 替换为表达式的值`remove(l,0)`。 `remove(l,0)`改变 list `l`，删除并返回它的第一个元素。这让我们可以按照阅读的顺序替换已删除的行。我们可以使用相反的顺序替换已删除的行`remove(l,-1)`。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-05-26T07:09:30.270

`:global`结合, `:move`, 和命令可以得到一个优雅简洁的 Ex 命令来解决这个问题`:join`。假设第一个行块从缓冲区的第一行开始，并且光标位于第二个块的第一行之前的行，命令如下。

```
:1,g/^/''+m.|-j! 
```

有关此技术的详细说明，请参阅[我](https://stackoverflow.com/a/9661121/254635)对类似问题的回答“<a href="https://stackoverflow.com/q/9658612/254635">如何实现“paste -d ''”开箱即用的行为在 Vim 中？”。

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2012-05-25T19:41:02.217

要加入线块，您必须执行以下步骤：

1.  转到第三行：`jj`
2.  进入视觉块模式：`CTRL-v`
3.  将光标锚定到行尾（对于不同长度的行很重要）：`$`
4.  走到最后：`CTRL-END`
5.  切块：`x`
6.  转到第一行的末尾：`kk$`
7.  在此处粘贴块：`p`

该运动不是最好的（我不是专家），但它可以像您想要的那样工作。希望会有一个更短的版本。

这是先决条件，因此此技术效果很好：

*   起始块的所有行（在问题的示例中`abc`和`def`）具有相同的长度**XOR**
*   起始块的第一行是最长的，你不需要关心中间的额外空格）**XOR**
*   起始块的第一行不是最长的，并且您在末尾添加空格。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-05-26T00:54:59.103

这是我的做法（光标在第一行）：

```
qama:5<CR>y$'a$p:5<CR>dd'ajq3@a 
```

你需要知道两件事：

*   第二组的第一行开始的行号（在我的情况下为 5），以及
*   每组中的行数（在我的示例中为 3）。

这是发生了什么：

*   `qa`将直到下`q`一个的所有内容记录到`a`.
*   `ma`在当前行上创建一个标记。
*   `:5<CR>`进入下一组。
*   `y$`猛拉其余的行。
*   `'a`返回标记，设置较早。
*   `$p`粘贴在行尾。
*   `:5<CR>`返回到第二组的第一行。
*   `dd`删除它。
*   `'a`返回标记。
*   `jq`下降一行，并停止录制。
*   `3@a`重复每一行的动作（在我的例子中是 3 个）

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-05-26T04:18:02.667

如其他地方所述，块选择是要走的路。但您也可以使用以下任何变体：

`:!tail -n -6 % | paste -d '\0' % - | head -n 5`

此方法依赖于 UNIX 命令行。创建该`paste`实用程序是为了处理这种行合并。

```
PASTE(1)                  BSD General Commands Manual                 PASTE(1)

NAME
     paste -- merge corresponding or subsequent lines of files

SYNOPSIS
     paste [-s] [-d list] file ...

DESCRIPTION
     The paste utility concatenates the corresponding lines of the given input files, replacing all but the last file's newline characters with a single tab character,
     and writes the resulting lines to standard output.  If end-of-file is reached on an input file while other input files still contain data, the file is treated as if
     it were an endless source of empty lines. 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-20T06:11:41.963

样本数据与 rampion 的相同。

```
:1,4s/$/\=getline(line('.')+4)/ | 5,8d 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-06-07T09:01:53.543

我不认为让它太复杂。我只需在
( `:set virtualedit=all`)
选择块 123 及以下所有内容上设置 virtualedit。
把它放在第一列之后：

```
abc    123
def    45
...    ... 
```

并删除到 1 个空格之间的多个空格：

```
:%s/\s\{2,}/ /g 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-14T15:39:10.483

我会使用复杂的重复:)

鉴于这种：

```
aaa
bbb
ccc

AAA
BBB
CCC 
```

将光标放在第一行，按以下命令：

```
qa}jdd''pkJxjq 
```

然后根据需要多次按`@a`（您可以随后使用）。`@@`

你最终应该得到：

```
aaaAAA
bbbBBB
cccCCC 
```

（加上换行符。）

解释：

*   `qa`开始录制复杂的重复`a`

*   `}`跳到下一个空行

*   `jdd`删除下一行

*   `''`回到最后一次跳跃前的位置

*   `p`将删除的行粘贴到当前行下

*   `kJ`将当前行附加到上一行的末尾

*   `x`删除`J`合并行之间添加的空格；如果你想要空间，你可以省略它

*   `j`转到下一行

*   `q`结束复杂的重复录音

之后，您将`@a`用于运行存储在 中的复杂重复`a`，然后您可以使用`@@`重新运行上次运行的复杂重复。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-02-15T16:20:38.470

可以有很多方法来实现这一点。我将使用以下两种方法中的任何一种来合并两个文本块。

假设第一个块在第 1 行，第二个块从第 10 行开始，光标的初始位置在第 1 行。

（\n 表示按回车键。）

```
1\. abc
   def
   ghi        

10\. 123
    456
    789 
```

使用以下命令使用宏：复制、粘贴和加入。

> qaqqa:+9y\npkJjq2@a10G3dd

使用命令使用宏在第 n 行号处移动一行并加入。

> qcqqc:10m .\nkJjq2@c

# matlab - MATLAB 解析特定于操作系统的路径

> ID：10760327
> 
> 赞同：3
> 
> 时间：2012-05-25T19:30:08.783
> 
> 标签：matlab, matlab-deployment

我正在运行一个 MATLAB 项目，该项目由多个用户共享，一些用户运行 Windows，一些用户运行 Linux。

在某些脚本中，我需要访问外部目录中的文件，并且我不想将其添加到 MATLAB 路径中。

为了同时适应 Linux 和 Windows，我需要能够确定我正在运行的操作系统的类型，并相应地设置目录分隔符（'\' 用于 Windows，'/' 用于 Linux）。

我试过了

```
os = getenv('OS') 
```

（我在一些官方指南中看到），但它返回一个空字符串。

我可以检查“pwd”的第一个字符，但这很难看，我希望应该有更简单的东西。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T20:39:34.790

要使用正确的目录分隔符，您无需编写代码来处理不同的操作系统。`filesep`为您提供正确的目录分隔符。

```
My1stDir = 'Year2012';
My2ndDir = 'Feb';
My3rdDir = 'Day03';

MyDir = [ 'mydata', filesep, My1stDir, filesep, My2ndDir, filesep, My3rdDir ]; 
```

在 Linux 中，您将获得：

```
MyDir =
     mydata/Year2012/Feb/Day03 
```

在 Windows 中，您将获得：

```
MyDir =
     mydata\Year2012\Feb\Day03 
```

# nlp - 如何实现知识图谱

> ID：10760330
> 
> 赞同：5
> 
> 时间：2012-05-25T19:30:47.507
> 
> 标签：nlp, semantic-web, question-answering

我期待着实现像谷歌直接答案这样使用知识图的东西，我可以阅读任何有用的资源吗？我在哪里可以找到相关数据？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:18:11.067

从您问题的语义网方面来看，我想您的一个有趣的起点是 DBpedia（[示例查询）数据集，可能与](http://wiki.dbpedia.org/OnlineAccess#h28-5)[Wikipedia 概念数据集的字符串](http://googleresearch.blogspot.de/2012/05/from-words-to-concepts-and-back.html)结合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T22:53:26.887

我为这个免费课程感到兴奋： [概率图形模型 - Daphne Koller，教授](https://www.coursera.org/course/pgm)。同时，我会查找她并观看她的 youtube 视频。

# objective-c - 使用 RKParams 向 API 发布帖子，并使用 RestKit 使用 RKObjectMapping 映射响应

> ID：10760333
> 
> 赞同：0
> 
> 时间：2012-05-25T19:30:51.390
> 
> 标签：objective-c, api, restkit, block

现在我正在对我的代码进行大规模的重构，我想统一我使用 Restkit 的方式。我对我的 API 服务器和 REST 调用进行 RPC 调用的方法是分开的。

使用 objectMapping 进行的 REST 调用和使用 RKClient 进行的 RPC 调用。除此之外，我使用块而不是代表，这很好，但我对它的工作原理有些怀疑。

这是我之前的代码，它可以很好地发布对象并使用委托手动进行映射，之后是使用不发送参数的块的新代码。

```
//This was the old way...
- (void) upload: (KFMedia *) pic {

    RKParams* imageParams = [RKParams params];
    NSData* imageData = UIImageJPEGRepresentation(pic.image, 0.7f);
    [imageParams setData:imageData MIMEType:@"image/jpg" forParam:@"FileUpload"];

    [[RKClient sharedClient] post:@"/api/upload/" params:imageParams delegate:self]; 

}

//This is the new way I'm trying...
- (void) upload: (KFMedia *) pic onLoad:(RKObjectLoaderDidLoadObjectBlock) loadBlock onError:(RKRequestDidFailLoadWithErrorBlock)failBlock{

    RKParams* imageParams = [RKParams params];
    NSData* imageData = UIImageJPEGRepresentation(pic.image, 0.7f);
    [imageParams setData:imageData MIMEType:@"image/jpg" forParam:@"FileUpload"];

    [[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/api/upload/" usingBlock:^(RKObjectLoader *loader) {

        //Trying to set params here, but it seems that I'm not sending anything :(
        loader.params = imageParams;
        loader.objectMapping = [[RKObjectManager sharedManager].mappingProvider objectMappingForClass:[KFMedia class]];
        loader.delegate = self;
        loader.onDidLoadObject = loadBlock;
        loader.onDidFailWithError = failBlock;
        loader.onDidFailLoadWithError = failBlock;
        loader.onDidLoadResponse = ^(RKResponse *response) {
            [self fireErrorBlock:failBlock onErrorInResponse:response];
        };

    }];

} 
```

我发送的请求的正文为空，这意味着参数未正确发送或设置。关于如何让它发挥作用的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:49:43.407

我刚刚解决了这个问题。要使用 loadObjectsAtResourcePath 发送额外的参数，您必须强制使用

```
loader.method = RKRequestMethodPOST; 
```

代码如下：

```
- (void) upload: (KFMedia *) pic onLoad:(RKObjectLoaderDidLoadObjectBlock) loadBlock onError:(RKRequestDidFailLoadWithErrorBlock)failBlock{

    RKParams* imageParams = [RKParams params];
    NSData* imageData = UIImageJPEGRepresentation(pic.image, 0.7f);
    [imageParams setData:imageData MIMEType:@"image/jpg" forParam:@"FileUpload"];

    [[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/api/upload/" usingBlock:^(RKObjectLoader *loader) {

        loader.method = RKRequestMethodPOST; //This line solved the problem
        loader.params = imageParams;
        loader.objectMapping = [[RKObjectManager sharedManager].mappingProvider objectMappingForClass:[KFMedia class]];
        loader.delegate = self;
        loader.onDidLoadObject = loadBlock;
        loader.onDidFailWithError = failBlock;
        loader.onDidFailLoadWithError = failBlock;
        loader.onDidLoadResponse = ^(RKResponse *response) {
            [self fireErrorBlock:failBlock onErrorInResponse:response];
        };

    }];

} 
```

# php - 根据条件更新表（While Loop）

> ID：10760334
> 
> 赞同：0
> 
> 时间：2012-05-25T19:30:52.030
> 
> 标签：php, mysql, mysql-error-1064

所以我试图根据一个参数更新我的表：

dateEntered 字段必须为空。

我想随机选择 50 行，并将空白的 ownerID 字段更新为“Tester”

这是我所拥有的：

```
<?php
include("includes/constants.php");
include("includes/opendb.php");

$query = "SELECT * FROM contacts WHERE dateEntered='' ORDER BY RAND() LIMIT 50";
$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_assoc($result)){
        $firstid = $row['id'];

        $query2 = mysql_query("UPDATE contacts 
                        SET ownerID = 'Tester' 
                   WHERE id = '$firstid'");

        $result2 = mysql_query($query2) or die(mysql_error());

        }

?> 
```

它将更新一条记录，然后退出并给我：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '1' at line 1 
```

选择记录的第一部分工作正常，它的 query2 不会更新所有 50 条记录，只有一条。也许我写错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:37:42.160

mysql_query 只需要一次

```
 $query2 = mysql_query("UPDATE contacts 
                    SET ownerID = 'Tester' 
               WHERE id = '$firstid'");

    $result2 = mysql_query($query2) or die(mysql_error()); 
```

至

```
 $result2 = mysql_query("UPDATE contacts 
                    SET ownerID = 'Tester' 
               WHERE id = '$firstid'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T20:05:41.603

这些答案是正确的，所以我只会添加一些额外的信息和建议。当您第一次查询 mysql 时，$query1 被设置为结果资源，这对于

```
 $query1 = mysql_query("UPDATE contacts SET ownerID = 'Tester' WHERE id = '$firstid'"); 
```

返回结果 1（布尔值 TRUE），这就是您的第二个查询失败的原因，因为“1”不是有效的 mysql 查询字符串。正如 Greg P 所说，您可以通过消除辅助 mysql 查询来修复当前脚本。

但是，您可以通过使用它来完全改进脚本并减少 sql 调用。

```
 <?php

    include("includes/constants.php");
    include("includes/opendb.php");

    $query = "UPDATE contacts SET owenerID='Tester' WHERE dateEntered='' ORDER BY RAND() LIMIT 50";
    $result = mysql_query($query) or die(mysql_error()); 
```

# mysql - 在插入语句上查询外键（MySQL）

> ID：10760336
> 
> 赞同：0
> 
> 时间：2012-05-25T19:30:56.943
> 
> 标签：mysql

如果我想同时找到一个主键并将其用作插入语句中的外键，那么我可以使用下面的查询（在[这个问题](https://stackoverflow.com/questions/3117734/mysql-insert-if-foreign-key-exists)上找到它）

```
INSERT INTO test (id, value) 
SELECT foobar.id, 20
FROM foobar WHERE name = 'joe'; 
```

但是如果我想插入多个外键怎么办？声明会如何？

```
INSERT INTO test (id1, id2, id3, value) 
SELECT foobar1.id, foobar2.id, foobar3.id, 20
FROM foobar1 WHERE name = 'joe'
FROM foobar2 WHERE name = 'joe'
FROM foobar3 WHERE name = 'joe'; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:38:43.493

这行得通吗？：

```
INSERT INTO test ( id1, id2, id3, value ) 
SELECT 
foobar1.id, foobar2.id, foobar3.id, 20
FROM 
foobar1, foobar2, foobar3
WHERE 
foobar1.name = 'joe'
AND 
foobar2.name = 'joe'
AND 
foobar2.name = 'joe'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:37:58.267

我想这就是你想要的：

```
INSERT INTO test (id1, id2, id3, value) 
SELECT foobar1.id, foobar2.id, foobar3.id, 20
FROM foobar1,foobar2, foobar3
WHERE foobar1.name = 'joe'
AND foobar2.name = 'joe'
AND foobar3.name = 'joe'; 
```

# java - 以编程方式将文件上传到 JSF Web 应用程序

> ID：10760342
> 
> 赞同：0
> 
> 时间：2012-05-25T19:31:38.670
> 
> 标签：java, tomcat, post, jsf-2, multipartform-data

我在 Tomcat 7.0.25 上有一个 JSF 2.0/primefaces Web 应用程序。该应用程序有一个简单的文件上传表单，如 primefaces[展示](http://www.primefaces.org/showcase/ui/fileUploadSimple.jsf)。

```
<h:form enctype="multipart/form-data">
    <p:messages showDetail="true" />
    <p:fileUpload value="#{fileUploadController.file}" mode="simple" />
    <p:commandButton value="Submit" ajax="false" actionListener="#{fileUploadController.upload}" />
</h:form> 
```

```
public void upload() throws IOException {
    FacesMessage msg = new FacesMessage("Succesful", this.file.getFileName() + " is uploaded.");
    FacesContext.getCurrentInstance().addMessage(null, msg);
    // do stuff with xml
} 
```

我正在尝试使用 stdalone java 客户端发出 multipart/form-data POST 请求以上传表单。Sinc 现在我已经尝试过[这个](https://stackoverflow.com/questions/7752157/http-client-post-xml-file-in-java)和[这个](https://stackoverflow.com/questions/1378920/how-can-i-make-a-multipart-form-data-post-request-using-java)但没有成功。

在这两种情况下，我都会收到`HTTP/1.1 200 OK`响应并获得表单页面，就好像没有发送 POST 一样。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:42:18.047

当以编程方式向 JSF Web 应用程序提交表单时，您需要确保考虑到以下 3 件事：

*   维护 HTTP 会话（当然，如果 JSF webapp 已打开服务器端状态保存）。
*   `javax.faces.ViewState`发送隐藏输入字段的名称-值对。
*   发送实际上要按下的提交按钮的名称-值对。

至于维护 HTTP 会话，使用 时，在第一次创建*之前*`URLConnection`添加以下行。*`URLConnection`*

 *```
CookieHandler.setDefault(new CookieManager(null, CookiePolicy.ACCEPT_ALL)); 
```

或者在使用 HttpClient 时，使用以下命令：

```
HttpContext httpContext = new BasicHttpContext();
httpContext.setAttribute(ClientContext.COOKIE_STORE, new BasicCookieStore());
// ...
HttpResponse getResponse = httpClient.execute(someHttpMethod, httpContext); 
```

`javax.faces.ViewState`为了保持 JSF 视图状态处于活动状态，必须发送隐藏输入字段的名称=值对。为了让 JSF 调用操作，必须发送提交按钮的名称=值对。如果它没有自动生成的客户端 ID，这是最简单的，所以给它和它的父窗体一个固定的 ID。

### 也可以看看：

*   [使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)
*   [如何以编程方式将文件上传到网站？](https://stackoverflow.com/questions/8623870/how-can-i-programmatically-upload-a-file-to-a-website)*

# php - 单击 drupal 主页上的链接时没有任何反应

> ID：10760344
> 
> 赞同：2
> 
> 时间：2012-05-25T19:31:51.193
> 
> 标签：php, apache, drupal-7

我新安装了drupal 7.14，安装顺利。但是在 Drupal 主页上安装后，当我单击任何链接时，它会转到“索引”页面并显示站点内容列表。例如，当我单击主页上的仪表板时，URL 显示：`https://localhost/testdrupal/?q=admin%2Fdashboard&`但它显示了包含站点内容的“索引”页面。为什么会这样？我怎样才能解决这个问题？请帮我。谢谢...！

我的网络服务器是 Apache 2.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T19:44:06.330

找到了答案。这是因为默认的 Apache 配置不允许覆盖 .htacces 文件。所以你必须在 httpd.conf 中编辑 AllowOveride。

# scala - 找不到 sbt 启动器 0.11.2

> ID：10760345
> 
> 赞同：4
> 
> 时间：2012-05-25T19:31:56.473
> 
> 标签：scala, playframework, sbt, playframework-2.0

我有一个`Play 2.0`使用`sbt 0.11.2`. 但是，当我设置一个新`Play`服务器时，它获取了最新版本的`sbt 0.11.3`. 现在当我`sbt compile`在新服务器上运行时，它会抱怨

```
Detected sbt version 0.11.2
Cannot find sbt launcher 0.11.2
Please download: 
/sbt-launch.jartypesafe.artifactoryonline.com/typesafe/ivy-releases/org.scala-tools.sbt/sbt-launch/0.11.2
/sbt-launch.jarc2-user/.sbt/.lib/0.11.2 
```

我尝试下载`sbt-launch 0.11.2`并放入相同的文件夹，`sbt`但仍然得到相同的错误。`play compile`顺便说一句，与`sbt compile`因为有效之间有区别`play compile`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T21:18:48.187

`play compile`是的，我认为和之间存在差异`sbt compile`，如果您的`sbt`脚本使用不同的 SBT 版本，在您的情况下是版本 0.11.2 而不是 Play 的 0.11.3。

也许您应该开始使用 SBT 0.11.3 代替？

我刚刚升级到使用 SBT 0.11.3 的 Play 2.1-SNAPSHOT（Git rev. f7de038a48，5 月 25 日星期五），我必须在以下位置进行更改`project/build.properties`：

从：更改`sbt.version=0.11.2`
为：`sbt.version=0.11.3`

我将我的 SBT bash 脚本链接到 Play 中包含的脚本，即 0.11.3 而不是 0.11.2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T01:37:49.323

如果您从源代码编译 Play20，在运行`./build`命令后`./Play20/framework`，您将进入 Play shell。

运行命令`about`，您可以检查正在运行的 sbt 版本。

```
> about
[info] This is sbt 0.12.0
[info] The current project is {file:/home/jw/code/Play20/framework/}Root
[info] The current project is built against Scala 2.9.2
[info] Available Plugins: com.typesafe.tools.mima.plugin.MimaPlugin,        com.typesafe.sbtscalariform.ScalariformPlugin
[info] sbt, sbt plugins, and build definitions are using Scala 2.9.2 
```

然后在您的项目目录中，将 更改`./project/build.properties`为正确的版本。

# iphone - DrawRect 永远不会被调用

> ID：10760347
> 
> 赞同：0
> 
> 时间：2012-05-25T19:32:13.037
> 
> 标签：iphone, objective-c, xcode, drawrect

我把这段代码放在我的应用程序中：

```
-(void)setup {
    [self setNeedsDisplay];
    NSLog(@"Test 1");

}

-(void)drawRect:(CGRect)rect {
    NSLog(@"Test 2");
} 
```

我在 NSLog 上得到了一堆测试 1（因为这是一个 UITableViewCell），但在任何时候都没有测试 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:58:14.493

我在这里下载了示例项目 TableViewSuite（CustomTableViewCell 项目）： [https](https://developer.apple.com/library/ios/#samplecode/TableViewSuite/Introduction/Intro.html) ://developer.apple.com/library/ios/#samplecode/TableViewSuite/Introduction/Intro.html 我能够将您的日志语句添加到 TimeZoneCell 类中并且是能够得到输出。看看这个可能有助于回答你的问题？

```
#import "TimeZoneCell.h"
#import "TimeZoneWrapper.h"
#import "TimeZoneView.h"
#import "CustomTableViewCellAppDelegate.h"

@implementation TimeZoneCell

@synthesize timeZoneView;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {

    if (self = [super initWithStyle:UITableViewCellStyleDefault reuseIdentifier:reuseIdentifier]) {

        // Create a time zone view and add it as a subview of self's contentView.
        CGRect tzvFrame = CGRectMake(0.0, 0.0, self.contentView.bounds.size.width, self.contentView.bounds.size.height);
        timeZoneView = [[TimeZoneView alloc] initWithFrame:tzvFrame];
        timeZoneView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
        [self.contentView addSubview:timeZoneView];
    }
    return self;
}
-(void)drawRect:(CGRect)rect {
    NSLog(@"Test 2");
}

- (void)setTimeZoneWrapper:(TimeZoneWrapper *)newTimeZoneWrapper {
    // Pass the time zone wrapper to the view
    timeZoneView.timeZoneWrapper = newTimeZoneWrapper;
}

- (void)redisplay {
    [timeZoneView setNeedsDisplay];
}

- (void)dealloc {
    [timeZoneView release];
    [super dealloc];
}

@end 
```

# php - 使用 php + gearman + node.js

> ID：10760359
> 
> 赞同：5
> 
> 时间：2012-05-25T19:33:09.197
> 
> 标签：php, node.js, gearman

我正在考虑使用 php 构建一个站点，但是如果在 node.js 中制作，它的几个方面的性能会好得多。同时，网站的大部分内容需要保留在 PHP 中。这是因为许多功能已经在 PHP 中开发，重新开发、测试等工作量太大，坦率地说，网站的这些部分在 PHP 中运行得非常好。

我正在考虑重建 node.js 中最受益于在 node.js 中运行的部分，然后让 PHP 使用 Gearman 将请求传递给 node.js。通过这种方式，我通过启动更多工作人员进行横向扩展，并让 Gearman 处理负载分配。

我们的网站流量很大，我担心 gearman 是否能处理这种负载。我不想让这个问题保持高效，所以让我们主要关注以下可解决的问题：

*   假设我们有内存，gearman 能否处理我们所有的预期负载（一次可能有大约 3000 多个排队的作业，每秒处理数千个）？
*   如果我只是使用 CURL 将请求传递给 node.js，这会运行得更好吗？如果是这样，node.js 是否提供任何方法来将负载分配到给定脚本的多个实例上？
*   可以以没有单点故障的方式配置 gearman 吗？
*   你们在开发和扩展方面可以看到哪些问题？

我正在解决这些广泛的问题，因此查看这篇文章的任何人都可以在一个地方收集关于相互强烈影响的事项的广泛信息。

当然，我会测试所有这些，但我想在可能进行类似的事情之前收集尽可能多的信息。

编辑：我使用 gearman 的一个重要原因不是因为它的非阻塞结构，而是因为它的绝对速度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T20:01:04.793

我只能回答你关于 Gearman 的问题：

> 假设我们有内存，gearman 能否处理我们所有的预期负载（一次可能有大约 3000 多个排队的作业，每秒处理数千个）？

**短**：是的

**龙**：万事皆有极限。如果您的工作负载非常大，您可能会遇到问题。Gearman 将其队列存储在内存中。因此，如果您的有效负载超过了 Gearman 可用的内存量，您将遇到问题。

> 可以以没有单点故障的方式配置 gearman 吗？

Gearman 有一个插件/扩展/组件可用于将 MySQL 用作持久性存储。这样，如果 Gearman 或机器本身出现故障，您可以将其立即恢复到停止的位置。如果其他工作人员宕机，多个工作服务器可以帮助保持工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T20:04:01.280

Node 有一个[集群模块](http://nodejs.org/docs/latest/api/cluster.html)，可以对 n 个进程进行基本的负载平衡。你可能会发现它很有用。

nodejs-land 中的一个常见架构是让您的节点与 http 通信，然后使用某种负载平衡方式，例如[http 代理](https://github.com/nodejitsu/node-http-proxy)或[服务注册表](https://github.com/substack/seaport)。我敢肯定它在其他地方或多或少是一样的。我对 gearman 的了解还不够，无法说它是否“足够好”，但如果这是一般的想法，那么我想它会很好。至少，其他人会有兴趣听听我敢肯定！

编辑：记住，数字运算会阻塞节点的事件循环！如果您考虑一下，这有点明显，但绝对要记住一些事情。

# c - 无法使用我的目标值检查第一个节点的值，以避免在我的 place_first 函数中重复

> ID：10760361
> 
> 赞同：0
> 
> 时间：2012-05-25T19:33:22.637
> 
> 标签：c, linked-list, insertion

一如既往，这个问题来自一本书的练习。我不是在研究数据结构，这本书也不是关于这个的。但是，有一章是“动态数据结构”。我已经读完了这一章。

但是，我有插入问题。在我看来，我的功能正常工作，除了它会产生重复的节点。

我为此做了预防措施，但它不起作用。无论如何，请原谅我因为我愚蠢的错误。好的，这是我的名称列表的结构类型。

```
typedef struct name_node_s {
char name[11];
struct name_node_s *restp;
}name_node_t;

typedef struct {
    name_node_t *headp;
    int size;
}name_list_t; 
```

place_first 功能：

```
name_node_t *
place_first(name_list_t *old_listp, char name[11])
{
    name_list_t *new_listp, *cur_listp;
    name_node_t *new_nodep, *temp_nodep;
    temp_nodep = (name_node_t *)malloc(sizeof (name_node_t));
    new_listp = (name_list_t *)malloc(sizeof (name_list_t));
    cur_listp = (name_list_t *)malloc(sizeof (name_list_t));
    new_nodep = (name_node_t *)malloc(sizeof (name_node_t));
    cur_listp->headp = old_listp->headp;
    temp_nodep = old_listp->headp;
    new_listp = old_listp;
    if ( old_listp->headp->name != name ){ // My first precaution for duplication
        while(cur_listp->headp->restp != NULL && cur_listp->headp->name != name) // My second precaution for duplication
        {
            if (old_listp->headp == NULL){
                strcpy(new_listp->headp->name, name);
                new_listp->headp->restp = NULL;
            }
            else if (old_listp->headp->name != name) { // Third one.
                strcpy(new_nodep->name, name);
                new_nodep->restp = NULL;
                new_listp->headp = new_nodep;
                new_listp->headp->restp = temp_nodep;
                ++(old_listp->size);
            }
        cur_listp->headp = cur_listp->headp->restp;
        }
    }
    else{
        new_listp->headp = old_listp->headp;
    }
    return(new_listp->headp);
} 
```

我这样称呼那个函数；

```
listp->headp = place_first(listp, "Mustafa");
listp->headp = place_first(listp, "Mustafa"); 
```

我的输出是这样的：__Mustafa __Mustafa __Ataturk __Ali __Eisenhower __Kennedy 感谢您的提前...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:42:41.913

这里

```
if ( old_listp->headp->name != name ){ 
```

你正在比较指针，而不是内容，你想要

```
if (strcmp(old_listp->headp->name,name)){ 
```

这同样适用于其他检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:24:00.380

Thanks @dfan and @Daniel Fisher.

Now, I understood my silly problem.

I have made some changes to my function.

So what did I...

I've added this statement for checking first node;

```
if ( strcmp(old_listp->headp->name, name) != 0 ){ 
```

And added a for loop for checking other nodes:

```
for( cur_listp->headp = old_listp->headp;
                cur_listp->headp != NULL && strcmp(cur_listp->headp->name, name)!= 0;
                cur_listp->headp = cur_listp->headp->restp) { } 
```

If it returns null my other statements will execude otherwise the old nodes will return.

```
if ( cur_listp->headp == NULL){
... 
```

Full function ( maybe somebody will need it):

```
name_node_t *
place_first(name_list_t *old_listp, char name[11])
{
    name_list_t *new_listp, *cur_listp;
    name_node_t *new_nodep, *temp_nodep;
    temp_nodep = (name_node_t *)malloc(sizeof (name_node_t));
    new_listp = (name_list_t *)malloc(sizeof (name_list_t));
    cur_listp = (name_list_t *)malloc(sizeof (name_list_t));
    new_nodep = (name_node_t *)malloc(sizeof (name_node_t));
    cur_listp->headp = old_listp->headp;
    temp_nodep = old_listp->headp;
    new_listp = old_listp;
    if ( strcmp(old_listp->headp->name, name) != 0 ){
        for( cur_listp->headp = old_listp->headp;
                cur_listp->headp != NULL && strcmp(cur_listp->headp->name, name)!= 0;
                cur_listp->headp = cur_listp->headp->restp) { }
        if ( cur_listp->headp == NULL){
            if (old_listp->headp == NULL){
                strcpy(new_listp->headp->name, name);
                new_listp->headp->restp = NULL;
            }
            else {
                strcpy(new_nodep->name, name);
                new_nodep->restp = NULL;
                new_listp->headp = new_nodep;
                new_listp->headp->restp = temp_nodep;
                ++(old_listp->size);
            }
        }
        else
            new_listp->headp = old_listp->headp;
    }
    else{
        new_listp->headp = old_listp->headp;
    }
    return(new_listp->headp);
} 
```

# python - IPython Notebook 中的“斑马表”？

> ID：10760364
> 
> 赞同：10
> 
> 时间：2012-05-25T19:33:39.767
> 
> 标签：python, pandas, ipython, ipython-notebook, jupyter

我正在使用出色的 Notebook 进行交互式分析和 Pandas 在 IPython 中构建一些交互式工作流。

我展示的一些表格只要稍微格式化一下就会更容易阅读。我真的很喜欢“斑马表”之类的东西，每隔一行都有阴影。我[在这里读到](http://dev.opera.com/articles/view/zebra-striping-tables-with-css3/)了如何通过 css 实现这种格式。是否有一种非常直接的方法可以将 css 应用于*IPython Notebook*，然后使用样式表呈现表格？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-25T21:01:21.067

`<script>`您可以在标记内的 markdown 单元格中或通过 IPython 的`IPython.core.display.Javascript`类运行任意 javascript（使用 jQuery） 。有了这些，您可以随心所欲地操纵（或破坏）文档，包括添加样式表。

例如，以下将条带适当分类的表：

```
<script type="text/javascript">
    $('head').append(
        "<style type='text/css'>tr.odd{background-color: #def}</style>"
    );
</script> 
```

如果您只是将其粘贴在一个降价单元格中，那么它将应用于页面上的所有内容。

或者，您可以`<script>`在代码单元中从 Python 运行相同的代码（减去标记）：

```
from IPython.core.display import Javascript, display
display(Javascript("""
    $('head').append(
        "<style type='text/css'>tr.odd{background-color: #def}</style>"
    );
""")) 
```

但是这样做只会影响您的表被适当分类，这取决于编写 HTML 的代码（例如在 Pandas 中）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-27T06:32:31.840

我刚刚发布了一个名为 ipy_table 的项目，它提供了一种简单的机制来在 IPython 笔记本中创建格式丰富的数据表（颜色、边框、对齐方式、浮点格式、斑马阴影等）。该项目位于[https://github.com/epmoyer/ipy_table](https://github.com/epmoyer/ipy_table)，您可以从[https://github.com/epmoyer/ipy_table/blob/master/ipy_table-Reference.pdf](https://github.com/epmoyer/ipy_table/blob/master/ipy_table-Reference.pdf)了解它的功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-06T04:52:56.923

如果您对使用 slickgrid 构建网格/表格感兴趣，但在 python 中，那么您可能对 qgrid 感兴趣。这适用于使用 pandas 的 ipython 笔记本。

[https://github.com/quantopian/qgrid](https://github.com/quantopian/qgrid)

另一种选择是像这样使用handsontable：

[http://nbviewer.ipython.org/gist/bollwyvl/6ad208084744c60dda65](http://nbviewer.ipython.org/gist/bollwyvl/6ad208084744c60dda65)

另一个仅使用 pandas 的第三个选项在这里：

[Pandas Dataframes to_html：突出显示表格行](https://stackoverflow.com/questions/18096748/pandas-dataframes-to-html-highlighting-table-rows)

第四种选择是像这样使用 jinja2 之类的模板引擎：

[Pandas Dataframe 在网页上显示](https://stackoverflow.com/questions/22180993/pandas-dataframe-display-on-a-webpage)

[http://nbviewer.ipython.org/github/pydata/pandas/blob/8c4f9571c08d5122f1d9e40c43dadab8b6f10bf5/pandas_HTML_styling.ipynb](http://nbviewer.ipython.org/github/pydata/pandas/blob/8c4f9571c08d5122f1d9e40c43dadab8b6f10bf5/pandas_HTML_styling.ipynb)

最后，pandas 中存在一个基于模板渲染的未解决问题：

[https://github.com/pydata/pandas/issues/3190](https://github.com/pydata/pandas/issues/3190)

来自 Google 的 PS Python 大师提出了这个最小的解决方案（避免任何第三方依赖）：

[https://stackoverflow.com/a/1475453/2230844](https://stackoverflow.com/a/1475453/2230844)

或阅读他的书：

Python in a Nutshell，第 2 版，第 23 章结构化文本：HTML

# ruby-on-rails - 如何在 ruby on rails 中通知管理员用户的生日是今天

> ID：10760365
> 
> 赞同：1
> 
> 时间：2012-05-25T19:33:40.890
> 
> 标签：ruby-on-rails

我有一个模型用户，一个用户可以是 ruby​​ on rails 3 中的管理员

用户表包括

```
 t.boolean :admin,              :default => false
  t.string :email,              :null => false, :default => ""
  t.string :department
  t.string :username
  t.datetime :birthdate 
  t.string :encrypted_password, :null => false, :default => "" 
```

我的问题是如何显示或通知管理员今天是用户的生日，如果答案中包含模型、控制器和视图，我会很高兴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:58:46.977

好的，您已经有了模型，即用户。我只想添加一个方法来告诉我们用户的生日是否是今天：

```
class User
  def birthday_today?
    birthday == Date.today?
  end
end 
```

然后在控制器中，假设您想在索引页面上显示它。我假设您有自己的身份验证解决方案，所以假设调用 current_user 将使用现在登录的用户

```
class WelcomeController < ApplicationController
  def index
    @display_honourees = current_user.admin?
    @honourees = User.all.find_all {|u| u.birthday_today? }
  end
end 
```

在那里，我们拥有我们需要的所有数据。现在让我们显示它们：

```
<html>
  ...
  <% if @display_honourees %>
    <ul>
      <% @honourees.each do |honouree| %>
        <li>It's <%= honouree.username %>'s birthday today! Make a party!</li>
      <% end %>
    </ul>
  <% end %>
  ...
</html> 
```

这能满足您的需要吗？

# c - 硬件启发循环。废话？

> ID：10760366
> 
> 赞同：5
> 
> 时间：2012-05-25T19:33:41.730
> 
> 标签：c, performance, loops, embedded, verilog

前几天我在 Verilog 中学到了一个很酷的技巧。当你需要重复做某事时。您可以使用移位寄存器来计算增量的数量。只需将 1 从 LSB 移到 MSB，当它到达 MSB 时，您就完成了。

在 C 中它会是这样的：

```
for(j=0b1; !(j & (1<<16)); j=j<<1)
{
/*do a thing 16 times*/
} 
```

我知道由于位宽，它的用途有限，但它不涉及任何添加，因此速度很快。所以我的问题是：**这有什么用吗？在 C 或任何其他高级语言中使用是否值得？**

也许在资源有限的嵌入式系统中。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T19:35:51.770

这是非常**不**值得的。它使代码变得不那么清晰和难以阅读，并且性能差异可以忽略不计。

您的编译器可以比您更好地执行这些类型的优化。出于性能原因，甚至可能会展开像这样的短循环。但是，如果您像这样编写循环，编译器可能无法轻松解决这个问题，因此您甚至可能会减慢程序的速度。

这确实是一个微优化的案例，几乎可以肯定它永远不会对您的程序运行时产生显着影响。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-26T06:41:29.300

在我看来，大多数评论/回答的人并不真正理解提问者在说什么。Verilog 语言用于硬件设计，硬件设计与软件设计非常不同，没有 CPU 周期或类似的东西。但是，简短的答案仍然是：不。长答案：

当然，移位比加法要简单得多。对于移位，从 FF（触发器）到 FF 的逻辑要少得多。此外，进位必须从 LSB 位传播到 MSB 位，这意味着 log2(N) 级逻辑（N 是计数器将达到的最高值）。另一方面，移位寄存器将使用 N 个 FF，而加法器将仅使用 log2(N) 个 FF。所以有一个性能/面积折衷，这也很大程度上取决于 N。关于加法器的一些“独立”信息： [http](http://en.wikipedia.org/wiki/Adder_%28electronics%29) ://en.wikipedia.org/wiki/Adder_%28electronics%29 找不到类似的移位文章，但是一旦你了解了加法器，移位器应该是显而易见的。

当您在 RTL 中设计状态机时，这可能很重要。但是您提供的代码实际上与上述无关。verilog 中的这个“for”循环意味着所有的“工作”都将在一个循环中完成。所以实际上会有N个逻辑。这个循环与实现无关。它甚至可能只会混淆verilog编译器吐出一些奇怪的东西并影响模拟（CPU周期确实很重要，上面的答案是有效的）。有更多工具经验的人可以对此发表评论。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T06:50:56.920

（根据 Stefan 的回答，我假设您是在询问受 Verilog 版本启发的 C 版本，而不是在 Verilog 中执行此操作。）

在许多架构上，这实际上更糟，因为位移需要额外的指令，而循环变量的加法是完全免费的。

完全地？

是的。因为在许多架构上，有单个指令会递减计数器并在计数器非零时进行分支——这些指令与任何其他比较和分支指令所花费的时间一样多。然而，如果您正在轮班，则需要一个额外的指令周期。如果您的平台没有“比较相等和分支”指令，那就更糟了——而且不是所有的都有；有些让你在两条指令中减去并比较为零。

即使在没有递减比较分支指令的 RISC 平台上，倒计时循环也可能更快，因为您可以简单地减去（一条指令）并使用分支如果非零指令 - 而在您的循环中，您需要移位（一条指令）和一个按位与（一条指令）在分支如果为零之前。这是假设你甚至有一个零分支。

此外，对于一个简单的`for (i = 0; i < N; i++)`循环，编译器将其转换为“倒数到 0”循环是微不足道的，如果这样更快的话——你甚至不需要自己做那点聪明的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T22:15:38.400

增量是加法的一种非常特殊的情况。在大多数处理器中，当然在大多数 RISC 处理器中，移位和增量在执行时间上是相同的。事实上，在大多数架构中，添加也不再需要。

当您保持循环代码惯用时，优化器很可能会简单地展开循环并在任何情况下更快地渲染它。如果您使循环机制“不寻常”，优化器可能无法对其进行优化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T19:39:06.753

快点？您确定吗？至少在 MIPS 架构上，位移与加法的时间完全一样。如果最常见的面向消费者的处理器架构也不是这样，我会感到惊讶。

此外，正如 Oleksi 所指出的，这很难阅读。可能不值得不存在的速度增益。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-25T19:38:47.860

在真正的 CPU 中，加法是你能做的最快的事情之一。位移并*没有*更快。而且你会让编译器更难有效地优化。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-28T11:47:03.607

> 它不涉及任何添加，因此速度很快

哪个 CPU 架构的转变比加法快？此外，是什么让您认为该特定架构的编译器不会自动从加法到移位进行优化，如果结果证明移位更快？

> 这个有什么用吗？

出于优化目的，没有任何用途。

是的，出于其他目的，这样的代码通常用于屏蔽字节的各个位。我相信两种最常见的方法是：

```
uint8_t mask; 

for(mask = 0x01; mask != 0x00; mask<<=1)
{
  do_something (data & mask);
} 
```

或者

```
for(i=0; i<8; i++)
{
  do_something (data & (1<<i));
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-26T02:36:57.037

一般来说，如果您希望始终循环特定次数 > 0 并最小化循环开销，那么我认为这将是“最好的”：

```
unsigned i = 16;

do {
// do something here
} while (--i);

You might get the same result with:

unsigned i = 0x8000;

do {
// do something here
} while (i>>=1); 
```

那时，您将不得不查看程序集。

# sql - 使用 MS Access COUNT DISTINCT 函数

> ID：10760367
> 
> 赞同：0
> 
> 时间：2012-05-25T19:33:56.160
> 
> 标签：sql, ms-access

以下查询返回 AcquisitionDate 在 RequestDate 的 60 天内的请求计数，以及其他各种列。

如何修改代码以计算RequestDate 后 60 天内**唯一AcquisitionDates 的数量？**我尝试使用 COUNT DISTINCT 但无法弄清楚在这种情况下应该如何使用它。

```
SELECT SceneTable.PATH, SceneTable.ROW, SceneTable.ROW, SceneTable.UlLat,
       SceneTable.UlLon, SceneTable.UrLat, SceneTable.UrLon, SceneTable.LlLat, 
       SceneTable.LlLon, SceneTable.LrLat, SceneTable.LrLon, 
      Sum(Iif((DateDiff("d",[AcquisitionDate],[RequestDate])<60),1,0)) AS Expr1, 
       Count(RequestTable.RequestID) AS CountOfRequestID
FROM ((SceneTable INNER JOIN 
       SceneAcquisitionTable 
           ON SceneTable.SceneID = SceneAcquisitionTable.SceneID) INNER JOIN
       UserSceneAcquisitionTable 
           ON SceneAcquisitionTable.SceneAcquisitionID = 
              UserSceneAcquisitionTable.SceneAcquisitionID) INNER JOIN 
       RequestTable 
           ON UserSceneAcquisitionTable.UserSceneAcquisitionID = 
              RequestTable.UserSceneAcquisitionID
GROUP BY SceneTable.PATH, SceneTable.ROW, SceneTable.UlLat, SceneTable.UlLon, 
         SceneTable.UrLat, SceneTable.UrLon, SceneTable.LlLat, SceneTable.LlLon, 
         SceneTable.LrLat, SceneTable.LrLon 
```

以下是示例表以及预期结果： ![以下是示例表以及预期结果：](../Images/68b635c75923e716fdb84602dc65056f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:17:28.200

请参阅[此解决方案](https://stackoverflow.com/a/1418762/78522)，了解在 Access 中实现 COUNT DISTINCT 的通用方法

# html - 如何隐藏内容而不显示在屏幕上但仅显示在源代码中？

> ID：10760368
> 
> 赞同：1
> 
> 时间：2012-05-25T19:33:56.567
> 
> 标签：html, css, show-hide

我正在运行一个 Wordpress 网站，并且在网站上放置一个标签对于 SEO 来说是一种很好的做法。

但它占用了大量空间，我认为实际上没有多少人会使用标签找到任何东西。我想它只对像谷歌这样的搜索引擎优化目的有好处，以索引它们或类似的东西。

问题是我如何隐藏该内容并阻止它显示在屏幕上而不是源代码上并且不占用空间，这意味着我可以使用该空间来显示其他内容但源代码中仍然存在标签.

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:36:00.507

只需`display: none`在您要隐藏的内容上使用，不会保留空间，将隐藏您的信息，您仍然可以在源代码中看到它:)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T19:46:55.580

作为 的替代方法`display: none`，我建议使用 HTML 元标记，它总能让我的页面在搜索引擎中获得良好的索引。元描述标签和元关键字标签特别有用。顺便说一句，所有元标记在页面上都是不可见的，但会显示在源代码中。

以下是针对 Wordpress 用户的 HTML 简介：http: [//om4.com.au/client/html-for-bloggers/](http://om4.com.au/client/html-for-bloggers/)

以下是您应该使用的基本元标记：

```
<meta name="description" content="Free Web tutorials" />
<meta name="keywords" content="HTML,CSS,XML,JavaScript" />
<meta name="author" content="Hege Refsnes" />
<meta http-equiv="content-type" content="text/html;charset=UTF-8" /> 
```

您只需将这些添加到您希望搜索引擎优化的页面，然后更改内容以匹配您的网站。

以下是有关元标记的更多信息：

[http://www.w3schools.com/tags/tag_meta.asp](http://www.w3schools.com/tags/tag_meta.asp)

编辑：

如今，您不能只隐藏纯粹用于 SEO 的内容，因为 Google 会降低您网站的搜索排名。相反，只需确保您的网站上有良好的内容并大量使用图像`alt`属性等内容。

**这是来自 Google 的关于 SEO 隐藏文本或链接的片段**：https : [//support.google.com/webmasters/answer/66353](https://support.google.com/webmasters/answer/66353)

> 在您的内容中隐藏文本或链接以操纵 Google 的搜索排名可能被视为具有欺骗性，并且违反了 Google 的网站管理员指南。**文本（例如过多的关键字）可以通过多种方式隐藏，包括**：
> 
> *   在白色背景上使用白色文本 定位图像后面的文本
> *   使用 CSS 将文本放置在屏幕外 将字体大小设置为 0
> *   通过仅链接一个小字符来隐藏链接 - 例如，段落中间的连字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T19:43:18.717

我所做的是，我呈现最适合 SEO 的页面，直到我感觉到用户交互（鼠标移动、鼠标按下等），然后花哨的东西、文本图形和缓慢的图形开始加载。我认为大多数搜索引擎会忽略 display:none 的任何内容。

# ruby-on-rails - 在任何存储库中都找不到有效的 gem 'rails' (>= 0)

> ID：10760379
> 
> 赞同：3
> 
> 时间：2012-05-25T19:34:30.250
> 
> 标签：ruby-on-rails, ruby, macos, gem, installation

我在一个新的 Mac 上，刚刚使用 rvm 安装了 ruby​​ 1.9.3。现在我正在尝试安装 rails 并在这篇文章的标题上出现错误。我将在命令行下面发布我拥有的所有信息，看看是否有人可以在这里帮助我！

```
Leonardos-MacBook-Air:~ leo$ gem install rails
WARNING:  Error fetching data: SocketError: getaddrinfo: nodename nor servname provided, or not known (http://rubygems.org/latest_specs.4.8.gz)
ERROR:  Could not find a valid gem 'rails' (>= 0) in any repository
ERROR:  Possible alternatives: rails
Leonardos-MacBook-Air:~ leo$ ping rubygems.org
PING rubygems.org (204.232.149.25): 56 data bytes
64 bytes from 204.232.149.25: icmp_seq=0 ttl=47 time=104.399 ms
64 bytes from 204.232.149.25: icmp_seq=1 ttl=47 time=105.760 ms
^C
--- rubygems.org ping statistics ---
2 packets transmitted, 2 packets received, 0.0% packet loss
round-trip min/avg/max/stddev = 104.399/105.079/105.760/0.681 ms
Leonardos-MacBook-Air:~ leo$ gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.23
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [x86_64-darwin11.4.0]
  - INSTALLATION DIRECTORY: /Users/leo/.rvm/gems/ruby-1.9.3-p194
  - RUBY EXECUTABLE: /Users/leo/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
  - EXECUTABLE DIRECTORY: /Users/leo/.rvm/gems/ruby-1.9.3-p194/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-darwin-11
  - GEM PATHS:
     - /Users/leo/.rvm/gems/ruby-1.9.3-p194
     - /Users/leo/.rvm/gems/ruby-1.9.3-p194@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/
Leonardos-MacBook-Air:~ leo$ ruby --version
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0]
Leonardos-MacBook-Air:~ leo$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T19:44:29.387

这里的线索是`WARNING: Error fetching data: SocketError: getaddrinfo: nodename nor servname provided, or not known (http://rubygems.org/latest_specs.4.8.gz)`

这表明 Rubygems.org 目前存在问题。几乎可以肯定你没有任何问题。过一会再试，应该没问题。我刚刚在 Mac 上试了一下，效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-23T10:52:07.847

我已经使用 gem install 的代理命令选项解决了这个问题。它具有以下格式：

```
$ gem install --http-proxy http://201.187.107.19:8080 rails 
```

注意，IP 地址和端口号是指代理。您应该搜索代理列表并使用其中的一个代理。

这是带有代理的网站：[http ://www.cybersyndrome.net/pla5.html](http://www.cybersyndrome.net/pla5.html)

此外，我必须尝试 7 或 8 个不同的代理才能成功。不要放弃。

请注意，您也可能会看到以下错误：

```
ERROR:  While executing gem ... (Gem::DependencyError)
    Unable to resolve dependencies: rails requires activesupport (= 3.2.8), actionpack (= 3.2.8), activerecord (= 3.2.8), activeresource (= 3.2.8), actionmailer (= 3.2.8), railties (= 3.2.8), bundler (~> 1.0) 
```

不要放弃并继续使用列表中的下一个代理。祝你好运。

# php - 访问二维数组 PHP

> ID：10760389
> 
> 赞同：0
> 
> 时间：2012-05-25T19:35:11.600
> 
> 标签：php, arrays, multidimensional-array

我不确定在 PHP 中访问二维数组时遇到的错误。基本上我的 var_dump() 给了我以下信息：

```
 array(1) {
   ['x']=>
     string(1) "3"
 }
 array(1) {
   ['y']=>
     string(3) "3"
 }

 array(1) {
   ['x']=>
     string(1) "5"
 }
 array(1) {
   ['y']=>
     string(3) "5"
 } 
```

var_dump 是正确的，并显示了我想要达到的结果。

我正在做的事情如下：1）在 $points 数组中准备 x 和 y 坐标 2）检查某些数字是否在给定的坐标内：

```
 function check_collisions {
    $points = array();
    for($y = 0; $y < count($this->Ks); $y++)
    {
        $points[]['x'] = $this->Ks[$y][0]; // first is 3, second is 5 - see var_dump above
        $points[]['y'] = $this->Ks[$y][1]; // first is 3, second is 5 - see var_dump above
    }

    for($p = 0; $p < count($points); $p++)
    {
        for($r = 0; $r < count($this->Ns); $r++)
        {
            if($points[$p]['x'] >= $this->Ns[$r][0] && $points[$p]['x'] <= $this->Ns[$r][2])
            {

                if($points[$p]['y'] >= $this->Ns[$r][1] && $points[$p]['y'] <= $this->Ns[$r][3])
                {

                    $collisions++;
                }
            }
        }
    }
    return $collisions;
    } 
```

我的 PHP 现在告诉我 x 和 y 是两个 if 条件中的未定义索引。有什么不对的吗？其他索引运行良好，例如访问 $this->Ns 等。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:40:23.380

将循环更改`for`为如下所示：

```
for($y = 0; $y < count($this->Ks); $y++)
{
    $points[] = array('x' => $this->Ks[$y][0], 'y' => $this->Ks[$y][1]);
} 
```

当您分配给`$points[]`没有索引时，它每次都会附加到数组中。您将两个数组附加到`$points`每个循环而不是带有坐标的单个数组。

# c# - PropertyGrid 中的色域慢得离谱

> ID：10760396
> 
> 赞同：0
> 
> 时间：2012-05-25T19:35:49.297
> 
> 标签：c#, performance, propertygrid, double-buffering, colordialog

我有一个`PropertyGrid`显示对象，其中一个字段是`System.Drawing.Color`. 这使得 PG 上的字段自动显示一种颜色，如果你点击编辑它，你会得到一个漂亮的下拉菜单，显示自定义颜色、系统颜色等。问题是，这个下拉菜单大约需要 10-30 秒绘制 - 自定义颜色之一特别糟糕。我已经尝试在 PG 上设置双缓冲来隐藏缓慢，但这只是让它在显示前绘制时暂停，没有提高速度。当其他一切都运行得很好时，有什么理由为什么这个特定的功能会这么慢？

我正在与另一个与之通信的程序一起运行该程序，并且该程序使用 3D 渲染引擎，这无疑是一种处理器密集型的，但大多数时候它并没有那么糟糕。现在唯一慢得让人难以忍受的是颜色下拉菜单。无法想象是什么原因造成的。

# php - 解码 WHOID json 代码

> ID：10760400
> 
> 赞同：-2
> 
> 时间：2012-05-25T19:36:16.083
> 
> 标签：php, json

我有 json 格式的 whoid 数据

首先，对不起，很长的片段，我想要县名和 whoid 的列表

**例如：英国 - 23424975** 但有些人无法做到这一点。

```
<?php
$json = '[
{
"name": "United Kingdom",
"woeid": 23424975,
"placeType": {
"name": "Country",
"code": 12
},
"country": "United Kingdom",
"url": "http://where.yahooapis.com/v1/place/23424975",
"countryCode": "GB",
"parentid": 1
},
{
"name": "Miami",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2450022,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2450022",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Sendai",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 1118129,
"country": "Japan",
"url": "http://where.yahooapis.com/v1/place/1118129",
"countryCode": "JP",
"parentid": 23424856
},
{
"name": "Nigeria",
"woeid": 23424908,
"placeType": {
"name": "Country",
"code": 12
},
"country": "Nigeria",
"url": "http://where.yahooapis.com/v1/place/23424908",
"countryCode": "NG",
"parentid": 1
},
{
"name": "New Orleans",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2458833,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2458833",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Bangalore",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2295420,
"country": "India",
"url": "http://where.yahooapis.com/v1/place/2295420",
"countryCode": "IN",
"parentid": 23424848
},
{
"name": "Osaka",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 15015370,
"country": "Japan",
"url": "http://where.yahooapis.com/v1/place/15015370",
"countryCode": "JP",
"parentid": 23424856
},
{
"name": "Berlin",
"woeid": 638242,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Germany",
"url": "http://where.yahooapis.com/v1/place/638242",
"countryCode": "DE",
"parentid": 23424829
},
{
"name": "South Africa",
"placeType": {
"name": "Country",
"code": 12
},
"woeid": 23424942,
"country": "South Africa",
"url": "http://where.yahooapis.com/v1/place/23424942",
"countryCode": "ZA",
"parentid": 1
},
{
"name": "Salt Lake City",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2487610,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2487610",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Netherlands",
"placeType": {
"name": "Country",
"code": 12
},
"woeid": 23424909,
"country": "Netherlands",
"url": "http://where.yahooapis.com/v1/place/23424909",
"countryCode": "NL",
"parentid": 1
},
{
"name": "Canada",
"placeType": {
"name": "Country",
"code": 12
},
"woeid": 23424775,
"country": "Canada",
"url": "http://where.yahooapis.com/v1/place/23424775",
"countryCode": "CA",
"parentid": 1
},
{
"name": "Jakarta",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 1047378,
"country": "Indonesia",
"url": "http://where.yahooapis.com/v1/place/1047378",
"countryCode": "ID",
"parentid": 23424846
},
{
"name": "Columbus",
"woeid": 2383660,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2383660",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Worldwide",
"placeType": {
"name": "Supername",
"code": 19
},
"woeid": 1,
"country": "",
"url": "http://where.yahooapis.com/v1/place/1",
"countryCode": null,
"parentid": 0
},
{
"name": "Providence",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2477058,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2477058",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "United States",
"placeType": {
"name": "Country",
"code": 12
},
"woeid": 23424977,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/23424977",
"countryCode": "US",
"parentid": 1
},
{
"name": "Kyoto",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 15015372,
"country": "Japan",
"url": "http://where.yahooapis.com/v1/place/15015372",
"countryCode": "JP",
"parentid": 23424856
},
{
"name": "Chicago",
"woeid": 2379574,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2379574",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Caracas",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 395269,
"country": "Venezuela",
"url": "http://where.yahooapis.com/v1/place/395269",
"countryCode": "VE",
"parentid": 23424982
},
{
"name": "Kuala Lumpur",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 1154781,
"country": "Malaysia",
"url": "http://where.yahooapis.com/v1/place/1154781",
"countryCode": "MY",
"parentid": 23424901
},
{
"name": "Houston",
"woeid": 2424766,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2424766",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Maracaibo",
"woeid": 395270,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Venezuela",
"url": "http://where.yahooapis.com/v1/place/395270",
"countryCode": "VE",
"parentid": 23424982
},
{
"name": "Washington",
"woeid": 2514815,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2514815",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Portland",
"woeid": 2475687,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2475687",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Sacramento",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2486340,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2486340",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Bandung",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 1047180,
"country": "Indonesia",
"url": "http://where.yahooapis.com/v1/place/1047180",
"countryCode": "ID",
"parentid": 23424846
},
{
"name": "Jackson",
"woeid": 2428184,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2428184",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Memphis",
"woeid": 2449323,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2449323",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Chennai",
"woeid": 2295424,
"placeType": {
"name": "Town",
"code": 7
},
"country": "India",
"url": "http://where.yahooapis.com/v1/place/2295424",
"countryCode": "IN",
"parentid": 23424848
},
{
"name": "Indonesia",
"woeid": 23424846,
"placeType": {
"name": "Country",
"code": 12
},
"country": "Indonesia",
"url": "http://where.yahooapis.com/v1/place/23424846",
"countryCode": "ID",
"parentid": 1
},
{
"name": "Delhi",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 20070458,
"country": "India",
"url": "http://where.yahooapis.com/v1/place/20070458",
"countryCode": "IN",
"parentid": 23424848
},
{
"name": "Ankara",
"woeid": 2343732,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Turkey",
"url": "http://where.yahooapis.com/v1/place/2343732",
"countryCode": "TR",
"parentid": 23424969
},
{
"name": "Paris",
"woeid": 615702,
"placeType": {
"name": "Town",
"code": 7
},
"country": "France",
"url": "http://where.yahooapis.com/v1/place/615702",
"countryCode": "FR",
"parentid": 23424819
},
{
"name": "Valencia",
"woeid": 395272,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Venezuela",
"url": "http://where.yahooapis.com/v1/place/395272",
"countryCode": "VE",
"parentid": 23424982
},
{
"name": "Tampa",
"woeid": 2503863,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2503863",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Argentina",
"placeType": {
"name": "Country",
"code": 12
},
"woeid": 23424747,
"country": "Argentina",
"url": "http://where.yahooapis.com/v1/place/23424747",
"countryCode": "AR",
"parentid": 1
},
{
"name": "Tokyo",
"woeid": 1118370,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Japan",
"url": "http://where.yahooapis.com/v1/place/1118370",
"countryCode": "JP",
"parentid": 23424856
},
{
"name": "Singapore",
"placeType": {
"name": "Country",
"code": 12
},
"woeid": 23424948,
"country": "Singapore",
"url": "http://where.yahooapis.com/v1/place/23424948",
"countryCode": "SG",
"parentid": 1
},
{
"name": "Venezuela",
"placeType": {
"name": "Country",
"code": 12
},
"woeid": 23424982,
"country": "Venezuela",
"url": "http://where.yahooapis.com/v1/place/23424982",
"countryCode": "VE",
"parentid": 1
},
{
"name": "Moscow",
"woeid": 2122265,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Russia",
"url": "http://where.yahooapis.com/v1/place/2122265",
"countryCode": "RU",
"parentid": 23424936
},
{
"name": "India",
"placeType": {
"name": "Country",
"code": 12
},
"woeid": 23424848,
"country": "India",
"url": "http://where.yahooapis.com/v1/place/23424848",
"countryCode": "IN",
"parentid": 1
},
{
"name": "Australia",
"placeType": {
"name": "Country",
"code": 12
},
"woeid": 23424748,
"country": "Australia",
"url": "http://where.yahooapis.com/v1/place/23424748",
"countryCode": "AU",
"parentid": 1
},
{
"name": "Austin",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2357536,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2357536",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Buenos Aires",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 468739,
"country": "Argentina",
"url": "http://where.yahooapis.com/v1/place/468739",
"countryCode": "AR",
"parentid": 23424747
},
{
"name": "New Zealand",
"woeid": 23424916,
"placeType": {
"name": "Country",
"code": 12
},
"country": "New Zealand",
"url": "http://where.yahooapis.com/v1/place/23424916",
"countryCode": "NZ",
"parentid": 1
},
{
"name": "Chile",
"placeType": {
"name": "Country",
"code": 12
},
"woeid": 23424782,
"country": "Chile",
"url": "http://where.yahooapis.com/v1/place/23424782",
"countryCode": "CL",
"parentid": 1
},
{
"name": "Fukuoka",
"woeid": 1117099,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Japan",
"url": "http://where.yahooapis.com/v1/place/1117099",
"countryCode": "JP",
"parentid": 23424856
},
{
"name": "Spain",
"woeid": 23424950,
"placeType": {
"name": "Country",
"code": 12
},
"country": "Spain",
"url": "http://where.yahooapis.com/v1/place/23424950",
"countryCode": "ES",
"parentid": 1
},
{
"name": "Santo Domingo",
"woeid": 76456,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Dominican Republic",
"url": "http://where.yahooapis.com/v1/place/76456",
"countryCode": "DO",
"parentid": 23424800
},
{
"name": "St. Louis",
"woeid": 2486982,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2486982",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Barcelona",
"woeid": 753692,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Spain",
"url": "http://where.yahooapis.com/v1/place/753692",
"countryCode": "ES",
"parentid": 23424950
},
{
"name": "Manila",
"woeid": 1199477,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Philippines",
"url": "http://where.yahooapis.com/v1/place/1199477",
"countryCode": "PH",
"parentid": 23424934
},
{
"name": "Peru",
"placeType": {
"name": "Country",
"code": 12
},
"woeid": 23424919,
"country": "Peru",
"url": "http://where.yahooapis.com/v1/place/23424919",
"countryCode": "PE",
"parentid": 1
},
{
"name": "Raleigh",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2478307,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2478307",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Dallas-Ft. Worth",
"woeid": 2388929,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2388929",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Sydney",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 1105779,
"country": "Australia",
"url": "http://where.yahooapis.com/v1/place/1105779",
"countryCode": "AU",
"parentid": 23424748
},
{
"name": "France",
"placeType": {
"name": "Country",
"code": 12
},
"woeid": 23424819,
"country": "France",
"url": "http://where.yahooapis.com/v1/place/23424819",
"countryCode": "FR",
"parentid": 1
},
{
"name": "Manchester",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 28218,
"country": "United Kingdom",
"url": "http://where.yahooapis.com/v1/place/28218",
"countryCode": "GB",
"parentid": 23424975
},
{
"name": "San Diego",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2487889,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2487889",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Italy",
"placeType": {
"name": "Country",
"code": 12
},
"woeid": 23424853,
"country": "Italy",
"url": "http://where.yahooapis.com/v1/place/23424853",
"countryCode": "IT",
"parentid": 1
},
{
"name": "San Francisco",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2487956,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2487956",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Minneapolis",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2452078,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2452078",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Sweden",
"placeType": {
"name": "Country",
"code": 12
},
"woeid": 23424954,
"country": "Sweden",
"url": "http://where.yahooapis.com/v1/place/23424954",
"countryCode": "SE",
"parentid": 1
},
{
"name": "Sapporo",
"woeid": 1118108,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Japan",
"url": "http://where.yahooapis.com/v1/place/1118108",
"countryCode": "JP",
"parentid": 23424856
},
{
"name": "Nashville",
"woeid": 2457170,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2457170",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Colombia",
"woeid": 23424787,
"placeType": {
"name": "Country",
"code": 12
},
"country": "Colombia",
"url": "http://where.yahooapis.com/v1/place/23424787",
"countryCode": "CO",
"parentid": 1
},
{
"name": "New Haven",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2458410,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2458410",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Monterrey",
"woeid": 134047,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Mexico",
"url": "http://where.yahooapis.com/v1/place/134047",
"countryCode": "MX",
"parentid": 23424900
},
{
"name": "Quezon City",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 1199682,
"country": "Philippines",
"url": "http://where.yahooapis.com/v1/place/1199682",
"countryCode": "PH",
"parentid": 23424934
},
{
"name": "Pakistan",
"placeType": {
"name": "Country",
"code": 12
},
"woeid": 23424922,
"country": "Pakistan",
"url": "http://where.yahooapis.com/v1/place/23424922",
"countryCode": "PK",
"parentid": 1
},
{
"name": "Amsterdam",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 727232,
"country": "Netherlands",
"url": "http://where.yahooapis.com/v1/place/727232",
"countryCode": "NL",
"parentid": 23424909
},
{
"name": "New York",
"woeid": 2459115,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2459115",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Novosibirsk",
"woeid": 2122541,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Russia",
"url": "http://where.yahooapis.com/v1/place/2122541",
"countryCode": "RU",
"parentid": 23424936
},
{
"name": "Las Vegas",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2436704,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2436704",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Klang",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 1154726,
"country": "Malaysia",
"url": "http://where.yahooapis.com/v1/place/1154726",
"countryCode": "MY",
"parentid": 23424901
},
{
"name": "Japan",
"placeType": {
"name": "Country",
"code": 12
},
"woeid": 23424856,
"country": "Japan",
"url": "http://where.yahooapis.com/v1/place/23424856",
"countryCode": "JP",
"parentid": 1
},
{
"name": "Norfolk",
"woeid": 2460389,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2460389",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Ahmedabad",
"woeid": 2295402,
"placeType": {
"name": "Town",
"code": 7
},
"country": "India",
"url": "http://where.yahooapis.com/v1/place/2295402",
"countryCode": "IN",
"parentid": 23424848
},
{
"name": "Denver",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2391279,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2391279",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Cincinnati",
"woeid": 2380358,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2380358",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Harrisburg",
"woeid": 2418046,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2418046",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Stockholm",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 906057,
"country": "Sweden",
"url": "http://where.yahooapis.com/v1/place/906057",
"countryCode": "SE",
"parentid": 23424954
},
{
"name": "Bogotá",
"woeid": 368148,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Colombia",
"url": "http://where.yahooapis.com/v1/place/368148",
"countryCode": "CO",
"parentid": 23424787
},
{
"name": "Baton Rouge",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2359991,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2359991",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Montreal",
"woeid": 3534,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Canada",
"url": "http://where.yahooapis.com/v1/place/3534",
"countryCode": "CA",
"parentid": 23424775
},
{
"name": "Brasília",
"woeid": 455819,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Brazil",
"url": "http://where.yahooapis.com/v1/place/455819",
"countryCode": "BR",
"parentid": 23424768
},
{
"name": "Baltimore",
"woeid": 2358820,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2358820",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Richmond",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2480894,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2480894",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Barquisimeto",
"woeid": 468382,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Venezuela",
"url": "http://where.yahooapis.com/v1/place/468382",
"countryCode": "VE",
"parentid": 23424982
},
{
"name": "Santiago",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 349859,
"country": "Chile",
"url": "http://where.yahooapis.com/v1/place/349859",
"countryCode": "CL",
"parentid": 23424782
},
{
"name": "Bekasi",
"woeid": 1030077,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Indonesia",
"url": "http://where.yahooapis.com/v1/place/1030077",
"countryCode": "ID",
"parentid": 23424846
},
{
"name": "San Antonio",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2487796,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2487796",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Pittsburgh",
"woeid": 2473224,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2473224",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Orlando",
"woeid": 2466256,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2466256",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Glasgow",
"woeid": 21125,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United Kingdom",
"url": "http://where.yahooapis.com/v1/place/21125",
"countryCode": "GB",
"parentid": 23424975
},
{
"name": "Detroit",
"woeid": 2391585,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2391585",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Dublin",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 560743,
"country": "Ireland",
"url": "http://where.yahooapis.com/v1/place/560743",
"countryCode": "IE",
"parentid": 23424803
},
{
"name": "Surabaya",
"woeid": 1044316,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Indonesia",
"url": "http://where.yahooapis.com/v1/place/1044316",
"countryCode": "ID",
"parentid": 23424846
},
{
"name": "Istanbul",
"woeid": 2344116,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Turkey",
"url": "http://where.yahooapis.com/v1/place/2344116",
"countryCode": "TR",
"parentid": 23424969
},
{
"name": "Germany",
"placeType": {
"name": "Country",
"code": 12
},
"woeid": 23424829,
"country": "Germany",
"url": "http://where.yahooapis.com/v1/place/23424829",
"countryCode": "DE",
"parentid": 1
},
{
"name": "Takamatsu",
"woeid": 1118285,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Japan",
"url": "http://where.yahooapis.com/v1/place/1118285",
"countryCode": "JP",
"parentid": 23424856
},
{
"name": "Izmir",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2344117,
"country": "Turkey",
"url": "http://where.yahooapis.com/v1/place/2344117",
"countryCode": "TR",
"parentid": 23424969
},
{
"name": "Nagoya",
"woeid": 1117817,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Japan",
"url": "http://where.yahooapis.com/v1/place/1117817",
"countryCode": "JP",
"parentid": 23424856
},
{
"name": "Philadelphia",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2471217,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2471217",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Hamburg",
"woeid": 656958,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Germany",
"url": "http://where.yahooapis.com/v1/place/656958",
"countryCode": "DE",
"parentid": 23424829
},
{
"name": "Tallahassee",
"placeType": {
"name": "Town",
"code": 7
},
"woeid": 2503713,
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2503713",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Greensboro",
"woeid": 2414469,
"placeType": {
"name": "Town",
"code": 7
},
"country": "United States",
"url": "http://where.yahooapis.com/v1/place/2414469",
"countryCode": "US",
"parentid": 23424977
},
{
"name": "Munich",
"woeid": 676757,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Germany",
"url": "http://where.yahooapis.com/v1/place/676757",
"countryCode": "DE",
"parentid": 23424829
},
{
"name": "Rio de Janeiro",
"woeid": 455825,
"placeType": {
"name": "Town",
"code": 7
},
"country": "Brazil",
"url": "http://where.yahooapis.com/v1/place/455825",
"countryCode": "BR",
"parentid": 23424768
},
{

  "name": "Indianapolis",
    "woeid": 2427032,
    "placeType": {
    "name": "Town",
    "code": 7
    }]';
echo $json;
$decode = json_decode($json, true); //getting the file content as array

 echo "<pre>";
 print_r($decode);
 echo "</pre>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:41:48.380

问题就在输入字符串的最后一行——JSON 只是格式错误。

```
[
  ...
  { // open brace 1
   "name": "Indianapolis",
   "woeid": 2427032,
   "placeType": { // open brace 2
     "name": "Town",
     "code": 7
   } // close brace 2
  } // close brace 1
]'; 
```

最后一个对象省略了右括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:42:19.067

```
$obj = json_decode($json, true);
foreach($obj as $item)
{
if ($item["name"] == "United Kingdom")
{
// do something with $item["woeid"]
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T19:54:50.077

您可以使用此检索列表

```
$decode = json_decode($json, true); //getting the file content as array
$mynewarray = (array) $decode ;

foreach($mynewarray as $data)
 $data['name']; 
```

# objective-c - 这怎么不是内存泄漏

> ID：10760402
> 
> 赞同：2
> 
> 时间：2012-05-25T19:36:20.307
> 
> 标签：objective-c, ios, memory-management

我试图弄清楚以下方法如何**不会**导致内存泄漏。A`UIPopoverController`已分配，但是，如果我包含`autorelease`or`release`调用，应用程序将崩溃，并显示 message `'-[UIPopoverController dealloc] reached while popover is still visible.'`。

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control {
    [mapView deselectAnnotation:view.annotation animated:TRUE];

    if ( UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad ) {
        UIViewController *con = [[UIViewController alloc] init];
        UIPopoverController *poc = [[UIPopoverController alloc] initWithContentViewController:con];

        [con release];

        poc.popoverContentSize = CGSizeMake( 320, 320 );
        [poc presentPopoverFromRect:view.bounds inView:view permittedArrowDirections:UIPopoverArrowDirectionAny animated:TRUE];
    }
    else {
        ;   // TODO (miked): display stuff another way
    }
} 
```

这似乎违背了基本的内存管理实践。

ps 我没有启用 ARC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:43:30.400

这仍然是内存泄漏！

您必须在类中保留对 popover 控制器的引用和/或实现委托方法 popoverControllerDidDismissPopover:（您可以在那里释放它）。
当您调用它的“present ...”方法时，popover 控制器不会保留自己，如果它被释放并且仍然可见，则会引发异常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:42:39.283

实现 UIPopoverControllerDelegate 的

```
- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController method and do the following.

- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController {

    if(popoverController == yourPopoverController)

    {

            [popoverController release];

    }

} 
```

# c# - XAP 打包失败找不到资源路径

> ID：10760410
> 
> 赞同：3
> 
> 时间：2012-05-25T19:36:44.583
> 
> 标签：c#, silverlight, windows-phone-7

我遇到了一个问题。我在[这里](http://i2.lulzimg.com/139c5ed7cf.jpg)上传了一张图片供参考，并试图将你需要的一切都放进去。

基本上，我已经将一些图像移到了更结构化的方式中，但 Silverlight/Visual Studio 没有。我将路径设置为相对路径，但由于某种原因它正在 C:/ 中查找。

我用谷歌搜索了它，但没有解决我的问题，他们都只是提到更新 WPAppManifest.xml 中的引用 - 你可以看到我已经完成了。

如果有人能对情况有所了解，将不胜感激，谢谢。

编辑：也使用`"/Resources/Images/ApplicationIcon.png"`并且`"(\)Resources\Images\ApplicationIcon.png"`不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:09:41.787

几周前我遇到了同样的问题，原因完全相同：我想重组和清理使用过的资源，结果以同样的方式被搞砸了，而且信息相同。

uri's，假设它们是相对的，并且从项目文件夹中“计算”出来，应该看起来像

```
"Resources\Images\<etc>\<etc>" 
```

我无法确定解决方案是什么，但这是我“解决”我的问题的方法：

*   确保图标和背景图像资源都设置为构建操作“内容”。

*   通过程序集属性页的 Application Page 选择两者
    。

老实说，我不知道为什么这会奏效（至少对我而言），而且我从来没有开始确定实际问题。在我的情况下，我的两个资源都已设置为内容，但在 WMAppManifest 中手动输入 uri 根本不起作用。我***必须***通过属性页来完成。

希望它也适合你。如果您偶然发现更明确的答案，请分享:)

# sql - sql相交条件

> ID：10760411
> 
> 赞同：6
> 
> 时间：2012-05-25T19:36:57.097
> 
> 标签：sql, conditional, intersect

我想知道我们是否可以做一个相交条件。有一些查询，但结果是错误的（总是空的）。我写了它应该产生的结果。

```
DECLARE @CAN_USE_TABLE1 BIT
DECLARE @CAN_USE_TABLE2 BIT
DECLARE @CAN_USE_TABLE3 BIT
DECLARE @CAN_USE_TABLE4 BIT

DECLARE @TABLE1 AS TABLE ( ABC INT ) -- values will be 1,2,3
DECLARE @TABLE2 AS TABLE ( ABC INT ) -- values will be 1,2
DECLARE @TABLE3 AS TABLE ( ABC INT ) --EMPTY TABLE
DECLARE @TABLE4 AS TABLE ( ABC INT ) --EMPTY TABLE
INSERT INTO @TABLE1 VALUES (1)
INSERT INTO @TABLE1 VALUES (2)
INSERT INTO @TABLE1 VALUES (3)
INSERT INTO @TABLE2 VALUES (1)
INSERT INTO @TABLE2 VALUES (2)

SET @CAN_USE_TABLE1 = 1
SET @CAN_USE_TABLE2 = 1
SET @CAN_USE_TABLE3 = 1
SET @CAN_USE_TABLE4 = 0

SELECT ABC FROM @TABLE1 WHERE @CAN_USE_TABLE1 = 1
INTERSECT
SELECT ABC FROM @TABLE2 WHERE @CAN_USE_TABLE2 = 1
INTERSECT 
SELECT ABC FROM @TABLE3 WHERE @CAN_USE_TABLE3 = 1
INTERSECT
SELECT ABC FROM @TABLE4 WHERE @CAN_USE_TABLE4 = 1

--RESULT SHOULD BE :
--  NO RESULT
--
--  BECAUSE, AT THIS STAGE, TABLE1 AND TABLE2 AND TABLE3 SHOULD BE INTERSECTED. AND BECAUSE TABLE3 IS EMPTY, THE RESULT IS EMPTY.

SET @CAN_USE_TABLE1 = 1
SET @CAN_USE_TABLE2 = 1
SET @CAN_USE_TABLE3 = 0
SET @CAN_USE_TABLE4 = 0

SELECT ABC FROM @TABLE1 WHERE @CAN_USE_TABLE1 = 1
INTERSECT
SELECT ABC FROM @TABLE2 WHERE @CAN_USE_TABLE2 = 1
INTERSECT 
SELECT ABC FROM @TABLE3 WHERE @CAN_USE_TABLE3 = 1
INTERSECT
SELECT ABC FROM @TABLE4 WHERE @CAN_USE_TABLE4 = 1

--RESULT SHOULD BE :
--  1
--  2
--
--  BECAUSE, AT THIS STAGE, TABLE1 AND TABLE2 SHOULD BE INTERSECTED

SET @CAN_USE_TABLE1 = 0
SET @CAN_USE_TABLE2 = 1
SET @CAN_USE_TABLE3 = 0
SET @CAN_USE_TABLE4 = 0

SELECT ABC FROM @TABLE1 WHERE @CAN_USE_TABLE1 = 1
INTERSECT
SELECT ABC FROM @TABLE2 WHERE @CAN_USE_TABLE2 = 1
INTERSECT 
SELECT ABC FROM @TABLE3 WHERE @CAN_USE_TABLE3 = 1
INTERSECT
SELECT ABC FROM @TABLE4 WHERE @CAN_USE_TABLE4 = 1

--RESULT SHOULD BE :
--  1
--  2
--
--  BECAUSE, AT THIS STAGE, ONLY TABLE 2 SHOULD BE USED 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:34:00.697

带有任何其他集合的空集合`INTERSECT`将始终为空。这就像乘以 0。你总是得到 0。

Conditional `INTERSECT`ing 将需要动态查询或临时表，如下所示：

**初始化**

```
DECLARE @CAN_USE_TABLE1 BIT
DECLARE @CAN_USE_TABLE2 BIT
DECLARE @CAN_USE_TABLE3 BIT
DECLARE @CAN_USE_TABLE4 BIT

DECLARE @TABLE1 AS TABLE ( ABC INT )
DECLARE @TABLE2 AS TABLE ( ABC INT )
DECLARE @TABLE3 AS TABLE ( ABC INT )
DECLARE @TABLE4 AS TABLE ( ABC INT )
DECLARE @RESULT AS TABLE ( ABC INT ) --Adding this result table
INSERT INTO @TABLE1 VALUES (1)
INSERT INTO @TABLE1 VALUES (2)
INSERT INTO @TABLE1 VALUES (3)
INSERT INTO @TABLE2 VALUES (1)
INSERT INTO @TABLE2 VALUES (2)

SET @CAN_USE_TABLE1 = 1
SET @CAN_USE_TABLE2 = 1
SET @CAN_USE_TABLE3 = 0
SET @CAN_USE_TABLE4 = 0 
```

**加工**

```
INSERT INTO @RESULT
SELECT ABC FROM @TABLE1 WHERE @CAN_USE_TABLE1=1 UNION
SELECT ABC FROM @TABLE2 WHERE @CAN_USE_TABLE2=1 UNION
SELECT ABC FROM @TABLE3 WHERE @CAN_USE_TABLE3=1 UNION
SELECT ABC FROM @TABLE4 WHERE @CAN_USE_TABLE4=1

DELETE r FROM @RESULT r
WHERE NOT EXISTS(SELECT 1 FROM @TABLE1 WHERE ABC=r.ABC)
AND @CAN_USE_TABLE1=1;

DELETE r FROM @RESULT r
WHERE NOT EXISTS(SELECT 1 FROM @TABLE2 WHERE ABC=r.ABC)
AND @CAN_USE_TABLE2=1;

DELETE r FROM @RESULT r
WHERE NOT EXISTS(SELECT 1 FROM @TABLE3 WHERE ABC=r.ABC)
AND @CAN_USE_TABLE3=1;

DELETE r FROM @RESULT r
WHERE NOT EXISTS(SELECT 1 FROM @TABLE4 WHERE ABC=r.ABC)
AND @CAN_USE_TABLE4=1;

SELECT * FROM @RESULT; 
```

**结果**

```
1
2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:19:59.853

```
declare @sql nvarchar(4000),
    @params nvarchar(4000)

 if @can_use_table1 = 1
    select @sql= 'select abc from @table1'

 if @can_use_table2 = 1
 begin
    if  @can_use_table1 = 1
       select @sql = @sql + ' intersect '
    select @sql = @sql + 'select abc from @table2'
 end

 if @can_use_table3 = 1
 begin
   if  @can_use_table1 = 1 or @can_use_table2 = 1
      select @sql= @sql + ' intersect '        
   select @sql= @sql + 'select abc from @table3'
 end

 if @can_use_table4 = 1
 begin
   if  @can_use_table1 = 1 or @can_use_table2 = 1 or @can_use_table3 = 1
      select @sql= @sql + ' intersect ' 
   select @sql= @sql + 'select abc from @table4'    
 end

select @params ='@can_use_table1 bit, @can_use_table2 bit,
         @can_use_table3 bit, @can_use_table4 bit,
 @table1 table, @table2 table, @table3  table, @table4 table' 

exec sp_executesql @sql,@params, 
       @can_use_table1,@can_use_table2, @can_use_table3, @can_use_table4,
       @table1, @table2, @table3, @table4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T02:09:40.000

您可以在单个查询中执行此操作：

```
select ABC
from (SELECT ABC, @CAN_USE_TABLE1 as CanUse1, 0 as CanUse2, 0 as CanUse3, 0 as CanUse4
      FROM @TABLE1 
      union all
      SELECT ABC, 0, @CAN_USE_TABLE2, 0, 0 FROM @TABLE2
      union all
      SELECT ABC, 0, 0,  @CAN_USE_TABLE3, 0 FROM @TABLE3
      union all
      SELECT ABC, 0, 0, 0, @CAN_USE_TABLE4 FROM @TABLE4
     ) t
group by ABC
having max(Canuse1) = @CAN_USE_TABLE1 AND
       max(CanUse2) = @CAN_USE_TABLE2 AND
       max(CanUse3) = @CAN_USE_TABLE3 And
       max(CanUse4) = @CAN_USE_TABLE4 
```

# java - 在首选项屏幕底部添加一个按钮

> ID：10760420
> 
> 赞同：3
> 
> 时间：2012-05-25T19:37:33.440
> 
> 标签：java, android, xml, android-activity, android-preferences

尽管@stealthcopter 的评论内容（检查@Andrew 的回答）在这个问题[How to add a button to PreferenceScreen](https://stackoverflow.com/questions/2697233/how-to-add-a-button-to-preferencescreen)中，我无法在我的活动底部看到一个按钮。

应用程序 .apk 将崩溃并出现以下错误：`Unfortunately your_app has stopped working!`

这是崩溃的堆栈跟踪：

```
05-25 21:26:39.431: I/dalvikvm(1405): threadid=3: reacting to signal 3
05-25 21:26:39.462: I/dalvikvm(1405): Wrote stack traces to '/data/anr/traces.txt'
05-25 21:26:44.851: I/Process(1405): Sending signal. PID: 1405 SIG: 9
05-25 21:40:51.442: I/dalvikvm(1936): threadid=3: reacting to signal 3
05-25 21:40:51.601: I/dalvikvm(1936): Wrote stack traces to '/data/anr/traces.txt'
05-25 21:40:51.951: I/dalvikvm(1936): threadid=3: reacting to signal 3
05-25 21:40:52.001: I/dalvikvm(1936): Wrote stack traces to '/data/anr/traces.txt'
05-25 21:40:52.472: I/dalvikvm(1936): threadid=3: reacting to signal 3
05-25 21:40:52.561: I/dalvikvm(1936): Wrote stack traces to '/data/anr/traces.txt'
05-25 21:40:52.631: D/dalvikvm(1936): GC_CONCURRENT freed 172K, 4% free 9313K/9607K, paused 7ms+7ms
05-25 21:40:52.691: D/gralloc_goldfish(1936): Emulator without GPU emulation detected.
05-25 21:40:54.372: D/AndroidRuntime(1936): Shutting down VM
05-25 21:40:54.372: W/dalvikvm(1936): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
05-25 21:40:54.422: E/AndroidRuntime(1936): FATAL EXCEPTION: main
05-25 21:40:54.422: E/AndroidRuntime(1936): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.DVA_HLUI/com.DVA_HLUI.DVA_HLUIPrefsActivity}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1797)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:682)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.widget.TabHost.setCurrentTab(TabHost.java:346)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:150)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:540)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.view.View.performClick(View.java:3511)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.view.View$PerformClick.run(View.java:14105)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.os.Handler.handleCallback(Handler.java:605)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.os.Looper.loop(Looper.java:137)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at java.lang.reflect.Method.invokeNative(Native Method)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at java.lang.reflect.Method.invoke(Method.java:511)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at dalvik.system.NativeStart.main(Native Method)
05-25 21:40:54.422: E/AndroidRuntime(1936): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.app.ListActivity.onContentChanged(ListActivity.java:243)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.preference.PreferenceActivity.onContentChanged(PreferenceActivity.java:944)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:254)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.app.Activity.setContentView(Activity.java:1835)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at com.DVA_HLUI.DVA_HLUIPrefsActivity.onCreate(DVA_HLUIPrefsActivity.java:15)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.app.Activity.performCreate(Activity.java:4465)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-25 21:40:54.422: E/AndroidRuntime(1936):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-25 21:40:54.422: E/AndroidRuntime(1936):     ... 18 more 
```

这是崩溃的活动java类：

```
public class DVA_HLUIPrefsActivity extends PreferenceActivity 
{
   @Override
   public void onCreate(Bundle savedInstanceState) 
   { 
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.prefs);
        setContentView(R.layout.preferences);
   }
} 
```

这是它的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" android:layout_weight="1">
    </ListView>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">

        <Button
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Quit!" android:layout_weight="0.5"android:layout_gravity="center_vertical"
         />

        <Button
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Help" android:layout_weight="0.5" android:layout_gravity="center_vertical"
         />

    </LinearLayout>

</LinearLayout> 
```

最后这是首选项 xml 资源：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <Preference android:key="about" android:title="@string/titleAbout" android:summary="@string/summaryAbout" />

</PreferenceScreen> 
```

你能解释一下导致应用程序崩溃的冲突是什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T19:56:40.753

您必须包含一个带有 ID 的 ListView，`@android:id/list`就像它在您链接到的问题中所说的那样（参见[答案](https://stackoverflow.com/a/3026922/831918)）。

从您的 android 布局文件 (R.Layout.Preferences) 中删除您的`<ListView>`并将其放在它的位置。

```
<ListView android:id="@android:id/list" 
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" /> 
```

那应该可以解决您遇到的问题。

从您发布的 LogCat 中： `Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'`

* * *

编辑：只是对 ListView 上的 id 属性的一些说明。来自[Android XML 布局](http://developer.android.com/guide/topics/ui/declaring-layout.html#id)。

XML 标记内的 ID 语法为：

android:id="@+id/my_button"

字符串开头的 at 符号 (@) 表示 XML 解析器应该解析和扩展 ID 字符串的其余部分，并将其标识为 ID 资源。加号 (+) 表示这是一个新资源名称，必须创建并添加到我们的资源中（在 R.java 文件中）。Android 框架提供了许多其他 ID 资源。引用 Android 资源 ID 时，不需要加号，但必须添加 android 包命名空间，如下所示：

android:id="@android:id/empty"

**有了 android 包命名空间，我们现在引用 android.R 资源类的 ID，而不是本地资源类。**

# ldap - Liferay SSO CAS LDAP

> ID：10760422
> 
> 赞同：1
> 
> 时间：2012-05-25T19:37:40.327
> 
> 标签：ldap, liferay, single-sign-on, cas, liferay-6

晚上好，我必须用 Liferay 做一个 Intranet，最重要的是将一个已经准备好的 Web 应用程序（或 2 个）与我将要制作的门户网站集成。这些 Web 应用程序是用 php 制作的，因此为了不进行每次身份验证，希望用户对门户进行身份验证并单击这些 Web 应用程序之一的链接，它不必再次对其应用程序进行身份验证。出于这个原因，我使用了 SSO CAS 并将其与 Liferay 集成，我仍然使用与 CAS 服务器相关的 LDAP 目录来识别用户。我的问题是其他网络应用程序的程序如何，用户是否必须与其他两个应用程序 php 具有相同的登录名和密码才能使用 parttail（Liferay）？或者我可以让每个应用程序与他们的用户一起使用而无需更改（因为在每个应用程序中，用户的登录名和密码与其他应用程序不同），

请提供一些澄清和帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T20:04:03.277

其他 webapps 需要实现一个所谓的 CAS 客户端。php[在这里](https://wiki.jasig.org/display/CASC/phpCAS)：

php 应用程序通常会将未经身份验证的用户重定向到 CAS，并在他们登录 webapp 后检索 saml 令牌。在该令牌中找到唯一标识用户的声明。然后，应用程序通常会将提供的声明与他们自己的用户存储相匹配，或者应用虚拟用户的概念。

但这取决于 webapps 的实现者。

# css - CSS不同的浏览器意味着不同的输出

> ID：10760426
> 
> 赞同：0
> 
> 时间：2012-05-25T19:37:49.380
> 
> 标签：css, browser

我的 CSS 有问题。

当我在 IE 和 Firefox 上打开我的页面时，它会显示为这样（就像它应该的那样） [http://tinypic.com/r/14ni5gk/6](http://tinypic.com/r/14ni5gk/6)

但是当我在 Safari 上打开我的页面时，它会显示如下： [http ://tinypic.com/r/2mzdxed/6](http://tinypic.com/r/2mzdxed/6)

（注意最后两个盒子没有浮动在彼此旁边）

我有以下CSS代码：

```
@charset "utf-8";

body{
    font-family:Verdana, Geneva, sans-serif;
    font-size: 12px;
}

#container{
    width: 600px;
    background: #fff;
}

#header{
    height: 151px;
    background-image:url('../img/tomaat.png');
    background-repeat: no-repeat;
    background-position:center; 
}

#recent fieldset{
    width : 600px;
}

#stats fieldset{
    width : 600px;
}

#login fieldset{
    width : 200px;
    float: left;
    height: 150px;
}

#nieuw fieldset{
    width : 290px;
    float:left; 
    height: 100px;
}

#verwijder fieldset{
    width: 289px;
    height:100px;
}

label {
    width: 50px;
    float: left;
}

#login label{
    width: 200px;
    float: left;
}

input {
    width: 200px;
}

#nieuw button{
    position:relative;
    top: 5px;
}

#verwijder button{
    position:relative;
    top: 27px;
}

#login button{
    width: 200px;
    position: relative;
    top:5px;
}

#a {
    position : relative;
    top: 43px;
}
#buttonz {
    text-align: center;
}

legend{
    font-weight: bold;
} 
```

以及以下 index.php 页面：

```
<?php
    include_once("db.php"); 
    session_start();
    if (!isset($_SESSION['uid'])){ 
        header("location:main_login.php");
        exit();
    }
    if (!isset($_SESSION['upass'])){ 
        header("location:main_login.php");
        exit();
    }
    $sql="SELECT * FROM users WHERE Naam='".$_SESSION['uid']."' AND Wachtwoord='".$_SESSION['upass']."'";
    $result=mysql_query($sql);
    $count=mysql_num_rows($result);
    if($count < 1){
        header("location:main_login.php");
        exit();
    }

?>

<?php
    $date = date("y-m-d");
    $vandaag = mysql_query("SELECT Type, Naam, Reden, Door FROM turfjes WHERE turfjes.Datum = '" . $date . "'");
    $names = mysql_query("SELECT Naam From users");
    $names2 = mysql_query("SELECT Naam From users");
    $names3 = mysql_query("SELECT Naam From users");
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Tomaten turfjes pagina | 258</title>
        <link rel="stylesheet" type="text/css" href="css/style.css" media="all" /> 
        <script type="text/javascript" src="js/jquery.js"></script>
        <script>
            jQuery.noConflict();
        </script>
        <script src="js/prototype.js" type="text/javascript"> </script>
        <script src="js/scriptaculous.js" type="text/javascript"></script>
        <script src="js/script.js" type="text/javascript"> </script>
    </head>

    <body>
        <div id="container">
            <div id="header">
            </div>
            <div id="info">
                <div id="recent">               
                    <fieldset>
                        <legend>Vandaag</legend>
                        <table border="0">
                            <tr>
                            <td>Type</td>
                            <td>Naam</td>
                            <td>Reden</td>
                            <td>Door</td>
                            <?php
                                while($a = mysql_fetch_array($vandaag)){
                            ?>      <tr>
                                    <td><?php echo($a['Type']);?></td>
                                    <td><?php echo($a['Naam']);?></td>
                                    <td><?php echo($a['Reden']);?></td>
                                    <td><?php echo($a['Door']);?></td>
                                    </tr>
                            <?php
                                } 
                            ?>
                        </table>
                    </fieldset>
                </div>
                <div id="stats">                
                    <fieldset>
                        <legend>Turfjesteller</legend>
                        <table border="0">
                            <tr>
                            <td>Naam</td>
                            <td>Aantal</td>
                            <td>Gedaan</td>
                            <td>Resterend</td>
                            </tr>
                            <?php
                                while($r = mysql_fetch_array($names)){
                                echo("<tr id=".$r['Naam'].">");
                            ?>
                                    <td><?php echo($r['Naam']);?></td>
                            <?php 
                                        $sql="SELECT * FROM turfjes WHERE Naam='".$r['Naam']."' AND Type='Adtje'";
                                        $result=mysql_query($sql);
                                        $count=mysql_num_rows($result); //count = adtjes
                                        $sql2="SELECT * FROM turfjes WHERE Naam='".$r['Naam']."' AND Type='Turfje'";
                                        $result2=mysql_query($sql2);
                                        $count2=mysql_num_rows($result2); //count2 = turfje     
                            ?>
                                    <td><?php echo($count2);?></td>
                                    <td><?php echo($count);?></td>
                                    <td><?php echo($count2-$count);?></td>
                                    </tr>
                            <?php 
                                }
                            ?>
                        </table>
                    </fieldset>
                </div>
            </div>
            <div id="actie">
                <div id="nieuw">
                    <fieldset>
                    <legend>Nieuwe turfjes</legend>
                        <label>Naam</label>
                        <select id = "naamnieuw">
                            <option value="" selected></option> 
                            <?php
                                while($r = mysql_fetch_array($names2)){
                                    echo("<option value='".$r['Naam']."'>".$r['Naam']."</option>");
                                }
                            ?>
                        </select>
                        <br>
                        <label>Reden</label> <input type="text" name="redennieuw" id="redennieuw"/>  <br>
                        <label>Door</label> <input type="text" name="door" id="door" disabled="disabled" value =<?php echo($_SESSION['uid']) ?>> <br>
                        <div id = "buttonz"><button type="button" id="submitnieuw">Turfje uitdelen</button></div>
                    </fieldset>
                </div>
                <div id="verwijder">
                    <fieldset>
                    <legend>Verwijderen turfjes</legend>
                        <label>Naam</label>                     
                        <select id = "naamverwijder">
                            <option value="" selected></option> 
                            <?php
                                while($r = mysql_fetch_array($names3)){
                                    echo("<option value='".$r['Naam']."'>".$r['Naam']."</option>");
                                }
                            ?>
                        </select>
                        <br>
                        <label>Door</label> <input type="text" name="door" id="door2" disabled="disabled" value =<?php echo($_SESSION['uid']) ?>> <br>
                        <div id = "buttonz"><button type="button" id="submitdelete">Turfje verwijderen</button></div>
                    </fieldset>
                </div>
                <form name="logout" method="post" action="logout.php">
                <div id = "buttonz"><input type="submit" name="logout" value="Log uit"></div>
                </form>
            </div>
        </div>
    </body>
</html> 
```

这些框都在 div 操作中，称为 nieuw 和 verwijder。Nieuw 是第一个，verwijder 是第二个。

谁能告诉我为什么会发生这种情况，甚至可以告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:54:42.827

浏览器对某些元素的填充、边距和字体大小等默认设置略有不同（例如，UL 上的填充或 H1 的大小）

CSS 重置会清除这些，以便您可以使用自己的值。

周围有很多。我喜欢[Yahoo CSS Reset 2](http://developer.yahoo.com/yui/reset/)，对于 HTML5 有[HTML5 Boilerplate](http://html5boilerplate.com/)。

# javascript - Jquery模板插件拒绝替换我的标记？

> ID：10760427
> 
> 赞同：0
> 
> 时间：2012-05-25T19:37:52.013
> 
> 标签：javascript, jquery

我想用我的数据库中的值替换我的 jquery 模板中的一些标记，然后我拿起一个 json 编码的数组，但我的模板仍然是空的？这是我的jQuery代码：

```
 $j.get(url, function(json) {
       var singleview = $j('#tx-charbeitsbeispiele-pi1 #singleview');

       singleview.append($j("#singleviewTemplate").tmpl(json).css({
         "display": "block"
        }));
     } 
```

我的 json_encoded 数据：

```
 "{"header":"Lorem Ipsum Header","bodytext":"Lorem ipsum dolor sit amet, 
    consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et  
    dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo 
    dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est 
    Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing 
    elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam 
    erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea   
    rebum.Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor 
    sit amet."}" 
```

我的jQuery模板：

```
 <script id="singleviewTemplate" type="text/html">
     <div class="singleview">
         <h3>${header}</h3>
         <p>${bodytext}</p>
     </div>
   </script> 
```

我的样式表：

```
#singleview 
{
    position: relative;      
    float: left;          
    width: 1200px;        
    height: 800px;                
    background-color: #ffffff;    
    margin-left: 15px;        
    margin-top: 0px;         
    margin-bottom: 0px;       
    margin-right: 0px;        
    padding: 0px;        
    display:none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:05:35.133

我将 Jquery 函数更改为 getJSON，因为 ajax 请求的数据类型不是 json 而是只有文本：

```
 $j.getJSON(url, function(json) {
   var singleview = $j('#tx-charbeitsbeispiele-pi1 #singleview');

   singleview.append($j("#singleviewTemplate").tmpl(json).css({
     "display": "block"
    }));
 } 
```

# android - Android：如何使用带有特殊字符的文件发送电子邮件意图？

> ID：10760428
> 
> 赞同：1
> 
> 时间：2012-05-25T19:37:55.317
> 
> 标签：android

我可以使用以下代码将文本文件附加到电子邮件中：

```
String fileName = "test.txt";
path = "file://" + Environment.getExternalStorageDirectory() + "/" + fileName;

Intent sendIntent = new Intent(Intent.ACTION_SEND);
sendIntent.setType("text/plain");
sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(path));
startActivity(Intent.createChooser(sendIntent, "Email")); 
```

但是，通过 gmail 发送的电子邮件不包含附件，如果`fileName="test#.txt"`.

我尝试使用 URLEncoder 对路径进行编码，如下所示，但这不适用于“text.txt”或“text#.txt”。

我可能在这里遗漏了一些简单的东西，但是我应该如何使用特殊字符对文件路径进行编码以发送意图？

```
String fileName = "test.txt";
// String fileName = "test#.txt";

String path = "file://" + Environment.getExternalStorageDirectory() + "/" + fileName;
String encPath = URLEncoder.encode(path);

Intent sendIntent = new Intent(Intent.ACTION_SEND);
sendIntent.setType("text/plain");
sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(encPath));
startActivity(Intent.createChooser(sendIntent, "Email")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:43:46.827

那是因为您没有正确编码 URL。您对完整的 URL 进行了编码，而不是仅对文件名进行编码，结果如下：

```
file://te#st.txt
file%3A%2F%2Fte%23st.txt 
```

试试这个：

```
String path = "file://" + Environment.getExternalStorageDirectory() + "/";
path += URLEncoder.encode( fileName ); 
```

# php - 缩放效果到另一个视图

> ID：10760441
> 
> 赞同：1
> 
> 时间：2012-05-25T19:39:22.727
> 
> 标签：php, animation, web, effect, zooming

我可以通过使用 PHP 制作缩放效果，放大我单击的部分并在视觉上向该部分添加新视图吗？我想要的是有一张背景图片和一些可点击的区域，当用户点击一个特定的可点击部分时，该部分将放大到一定程度，然后以放大视图显示该部分，并在其上添加另一个视图。

我想要的是类似于[http://www.naranglardor.com](http://www.naranglardor.com)的东西（点击血迹（不，我不是撒旦崇拜，那本书是关于某事的小说））。

这可以用PHP吗？

感谢提示或任何接近此的方向。

最好的祝福，

加布里埃尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:48:28.000

**不，你不能**用 PHP 来实现。

[PHP](http://pt.php.net/manual/en/intro-whatis.php)是一种服务器端脚本语言，这意味着代码在服务器上执行。

要实现这种效果，您需要一种客户端语言，例如通过[jQuery](http://jquery.com/)更好地利用的 JavaScript 。

**要为您指明某种方向，您可以查看以下链接：**

[Codrops Tutorials](http://tympanus.net/codrops/category/tutorials/) - 非常适合基于 jQuery 的动画和效果。

[Learning jQuery](http://www.learningjquery.com/) - 使用 jQuery 的技巧和窍门。

# spring - 使用 PropertyPlaceholderConfigurer 将使用 Apache Commons Config 的库与 Spring 项目集成时遇到问题

> ID：10760444
> 
> 赞同：1
> 
> 时间：2012-05-25T19:39:27.353
> 
> 标签：spring, properties, apache-commons-config

我有一个发送 JMS 通知的自定义库。这个想法是您可以通过在项目中设置一些属性来使用该库。

自定义库正在使用 Apache Commons 配置。（我提到这一点的原因是我怀疑它可能在我的问题中起作用）。我正在尝试在我当前的 Spring 项目中使用它，该项目不使用 Commons Config，但使用 PropertyPlaceholderConfigurer。我已经将需要的属性写在 .properties 文件中。

我已将该库作为依赖项添加到我的 pom.xml 文件中。我试着像这样将它添加到我的**web.xml中**

```
<context-param>
<param-name>contextConfigLocation</param-name>
    <param-value>
    ...
    classpath:mylibrary-context.xml
    </param-value>
</context-param> 
```

在我的 Spring 项目中创建 bean 时，我尝试引用库中定义的 bean 之一，以便可以使用它。创建需要我的属性文件中的属性的库 bean 之一时出错。

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'libraryBean' defined in class path resource [mylibrary-context.xml]: Initialization of bean failed; nested exception is org.springframework.beans.TypeMismatchException: Failed to convert property value of type 'java.lang.String' to required type 'boolean' for property 'useCompression'; nested exception is java.lang.IllegalArgumentException: Invalid boolean value [${foo.bar.use.compression}] 
```

我知道项目中的其他一些属性文件的布尔属性设置方式完全相同，没有问题。这是我在**applicationContext.xml**中加载属性文件的方式（在检查日志后，似乎加载正确）

```
<bean id="propertyPlaceholderConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
<property name="locations">
  <list>
    ...
    <!-- loaded in order-->
    <value>classpath:foo/bar/some-props.properties</value>
    <value>classpath:foo/bar/some-monitoring.properties</value>
    <value>file:/${user.home}/foo/bar/some-monitoring.properties</value>
    <value>file:/etc/foo/bar/some-monitoring.properties</value>
  </list>
</property>
<property name="ignoreResourceNotFound" value="true"/>
<property name="ignoreUnresolvablePlaceholders" value="true"/> 
```

最后是我的 some-monitoring.properties 文件：

```
foo.bar.use.compression=true
foo.bar.name=foobar
foo.bar.broker.url=someurl 
```

所以我只是想知道布尔属性发生了什么，为什么？如果 PropertyPlaceholderConfigurer 没有加载布尔属性是一个普遍问题，那么奇怪的是我对其他属性文件没有问题。是否因为使用 Commons Configuration 的库而存在一些冲突？我对 Spring 如何加载这些属性的了解非常浅，所以这似乎是一个更好地处理幕后情况的机会。

如果有人可以阐明正在发生的事情以及如何修复/解决它，我们将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:50:52.113

在 spring-dev 列表中引用 Jurgen 的话：

> PropertyPlaceholderConfigurer 是 BeanFactoryPostProcessor 接口的实现：该接口及其兄弟 BeanPostProcessor 只适用于定义它们的 BeanFactory，即适用于定义它们的应用程序上下文。
> 
> 如果将多个配置文件组合到单个 contextConfigLocation 中，则在任何文件中定义的 PropertyPlaceholderConfigurer 将应用于所有文件，因为它们被加载到单个应用程序上下文中。

据我了解，您尝试将所有应用程序上下文组合到 contextConfigLocation 中。根据报价，它应该可以正常工作。我认为您还有其他问题。在我看来，布尔属性和字符串属性都没有加载。也许似乎加载了字符串属性，但我认为它们的值设置为`${foo.bar.name}`and `${foo.bar.broker.url}`。由于它们是字符串，它们可以保存这些值。当 Spring 尝试设置`${foo.bar.use.compression}`为布尔值时，您会遇到类型转换问题，这只会揭示更广泛的问题。

可能，如果你设置：

```
<property name="ignoreResourceNotFound" value="false"/>
<property name="ignoreUnresolvablePlaceholders" value="false"/> 
```

您将看到`PropertyPlaceHolderConfigurer`无法解析您的属性文件。

`classpath*:`当您引用来自其他 JAR 的资源时，也请尝试使用符号。

# android - Android - 如何在网格视图中放置标签

> ID：10760446
> 
> 赞同：1
> 
> 时间：2012-05-25T19:39:33.020
> 
> 标签：android, gridview

如何在网格视图中放置标签？

示例：http: [//developer.android.com/design/building-blocks/grid-lists.html#with-labels](http://developer.android.com/design/building-blocks/grid-lists.html#with-labels)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:56:40.697

对于适配器的 getView() 方法，返回一个带有 imageView 的 framelayout 和底部的 textview（在 imageView 的顶部），类似于[此处](http://developer.android.com/resources/articles/layout-tricks-merge.html)第一块代码中所写的内容。如果您愿意，您可以使用充气器为所有缩略图使用 XML 文件，这样您就可以在可视化编辑器上预览它。

此外，有关 gridView 等视图的更多信息，请观看：

[http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

我知道这是关于 listView 的，但想法是一样的。

# php - javascript onclick功能不起作用

> ID：10760448
> 
> 赞同：0
> 
> 时间：2012-05-25T19:39:43.800
> 
> 标签：php, javascript

所以我从另一个可以工作并在同一页面上使用的函数改编了这段代码。我不知道这是否会对它做任何事情，所以我想我会提到这一点，而且两者都有 id="replace" ，我不知道它是否会干扰。

无论如何，调用该函数的代码是这样的：

```
 if (mysql_num_rows($LIKE) != 0)

{

  echo "
        <td id=\"replace\" style=\"text-align:left\">".$like." Likes -- <a style=\"color:#234904\" onmouseover=\"this.style.color='#6666CC'\" onmouseout=\"this.style.color='#234904'\" id=\"" . $POST->id . "\" onclick=\"likePost(this.id)\" name=\"like\">Like This Post</td>
        ";
} 
```

javascript函数定义如下：

```
var xmlHttp;

function likePost(x)
{ 
xmlHttp=GetXmlHttpObject();
if (xmlHttp==null)
 {
 alert ("Browser does not support HTTP Request");
 return;
 }

var pid = document.getElementById(x).id;
var url="forum-like.php";
url+="?pid="+pid;
url+="&sid="+Math.random();
xmlHttp.onreadystatechange=stateChanged;
xmlHttp.open("GET",url,true);
xmlHttp.send(null);
} 
```

当我单击应该调用该函数的内容时，什么也没有发生。如果我使用在 js 函数中调用的 php 页面执行脚本，那效果很好……我不知道我是否遗漏了什么或有什么问题……我也知道 $POST->id 部分确实调用了正确的ID ...希望这是足够的信息，否则请告诉我，我会进行更多编辑：D 感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:45:59.527

```
var pid = document.getElementById(x).id 
```

你已经通过了，`id`所以只需使用

```
var pid = id; 
```

如果您仍然遇到问题，请使用 firebug 或浏览器的开发人员工具来获取实际的 javascript 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:45:34.737

看起来您正在将 this.id 传递给函数，但随后尝试使用该 (x) 来再次查找 id，就好像那是一个 DOM 对象一样。

如果您保留 php 代码原样，您可以将您的 javascript 方法更改为：

```
url+="?pid="+x; 
```

你可以摆脱：（因为你已经传递了 id 并且不需要检索它）

```
var pid = document.getElementById(x).id; 
```

希望对你有用！

# c++ - 禁用 QSql(Relational)TableModel 的预取/缓存行为

> ID：10760455
> 
> 赞同：3
> 
> 时间：2012-05-25T19:40:23.617
> 
> 标签：c++, qt, qsqltablemodel

由于某些（嗯，性能）原因，Qt 的“模型”类仅从数据库中获取 256 行，因此如果您想将该行附加到记录集的末尾，显然，您必须按照以下方式进行操作

```
while (model->canFetchMore()) {
  model->fetchMore();
} 
```

这确实有效，当您`model->insertRow(model->rowCount())`之后执行此操作时，该行确实会附加在记录集的最后一行之后。

还有与此行为相关的各种其他问题，例如当您从模型中插入或删除行时，呈现它的视图将被重绘，仅显示 256 行，您必须手动确保再次获取丢失的行。

有没有办法完全绕过这种行为？我的模型不太可能显示多于 1000 行，但是让它检索这 1000 行似乎是一件非常痛苦的事情。我知道，如果您必须处理更大的记录集，这是一个很好的性能优化，但对我来说，这是一种负担，而不是一种恩惠。

该模型需要是可写的，所以我不能简单地使用 QSqlQueryModel 代替 QSqlRelationalTableModel。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T01:46:24.843

从`QSqlTableModel`文档中：

> bool QSqlTableModel::insertRecord ( int row, const QSqlRecord & record )
> 
> 在行之后插入记录。***如果 row 为负数，则记录将附加到末尾。*** 在内部调用 insertRows() 和 setRecord()。
> 
> 如果可以插入行，则返回 true，否则返回 false。
> 
> 另请参见 insertRows() 和 removeRows()。

我还没有尝试过，但我认为没有必要获取完整的数据集以在最后插入记录。

# c++ - 将重载运算符 << 与运算符 * 一起使用时出错

> ID：10760462
> 
> 赞同：1
> 
> 时间：2012-05-25T19:41:12.350
> 
> 标签：c++, operator-overloading

我最近尝试过运算符重载，并查看了有关运算符重载的这个 stackoverflow 页面 (http://stackoverflow.com/questions/4421706/operator-overloading)。

我已经重载了 * 运算符并且可以运行诸如

```
Vector2 a(2, 3);
Vector2 b(5, 8);
Vector2 c = a*b; 
```

但得到编译时错误`error: invalid operands to binary expression ('basic_ostream<char, std::char_traits<char> >' and 'Vector2')`

运行代码时，例如

```
std::cout << a*b; 
```

这是 Vector2.cpp

```
#include "Vector2.h"

Vector2::Vector2(const float x, const float y) {
    this->x = x;
    this->y = y;
}

Vector2 &Vector2::operator*=(const Vector2 &rhs) {
    this->x *= rhs.x;
    this->y *= rhs.y;
    return *this;
}

std::ostream &operator<< (std::ostream &out, Vector2 &vector) {
    return out << "(" << vector.x << ", " << vector.y << ")";
} 
```

这是 Vector2.h

```
#include <iostream>

class Vector2 {
    public:
        float x;
        float y;

        Vector2(const float x, const float y);
        Vector2 &operator*=(const Vector2 &rhs);
};

inline Vector2 operator*(Vector2 lhs, const Vector2 &rhs) {
    lhs *= rhs;
    return lhs;
}

std::ostream &operator<<(std::ostream &out, Vector2 &vector); 
```

我不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T19:46:35.457

问题是

```
a*b 
```

返回一个临时的，所以你需要：

```
std::ostream &operator<<(std::ostream &out, const Vector2 &vector);
//                                            |
//                                      notice const 
```

作为临时不能绑定到非常量引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:46:51.617

以下应该有效：

```
Vector2 c = a*b;
std::cout << c; 
```

# php - 如何排序这个数组php

> ID：10760464
> 
> 赞同：-1
> 
> 时间：2012-05-25T19:41:37.577
> 
> 标签：php, arrays

我有以下数组，我想在价格值之后订购主题。我一直在检查 php 手册中的 array_multisort() 函数，但还不清楚我如何才能获得结果。

我的阵列看起来

```
array=>(0=>array(id=>'1', name=>'example1', price='200'))
array=>(1=>array(id=>'2', name=>'example1', price='120'))
array=>(2=>array(id=>'3', name=>'example1', price='160')) 
```

在价格值之后，订单应该是

```
array=>(1=>array(id=>'2', name=>'example1', price='120'))
array=>(2=>array(id=>'3', name=>'example1', price='160'))
array=>(0=>array(id=>'1', name=>'example1', price='200')) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:43:30.670

使用[usort()](http://php.net/manual/en/function.usort.php)：

```
function cmp ($a, $b) {
    if ($a ['price'] == $b ['price']) {
        return 0;
    }
    return ($a ['price'] < $b ['price']) ? -1 : 1;
}

usort ($array, "cmp"); 
```

MonkeyMonkeys 的替代方案：

```
function cmp ($a, $b) {
    return ($a ['price'] - $b ['price']);
}

usort ($array, "cmp"); 
```

# java - 如何在android中设置标签？

> ID：10760471
> 
> 赞同：1
> 
> 时间：2012-05-25T19:41:50.370
> 
> 标签：java, android, textview, findviewbyid

我正在尝试`textView`在android中为a设置标签，但我似乎无法弄清楚如何设置标签，我尝试使用以下代码，它没有任何错误但后来我无法弄清楚如何使用`findViewByTag`稍后对 textView 做一些事情，任何帮助将不胜感激！

```
playerCounter.setTag("playercounter"+counter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:09:24.410

我不知道任何内置的 findViewByTag() 函数，您是否将它与 findViewById() 混淆了？

> 与 ID 不同，标签不用于标识视图。标签本质上是可以与视图关联的额外信息。它们最常用于方便地将与视图相关的数据存储在视图本身中，而不是将它们放在单独的结构中。

来自[开发者文档](http://developer.android.com/reference/android/view/View.html#Tags)

# android - Android选项菜单设置文本

> ID：10760474
> 
> 赞同：0
> 
> 时间：2012-05-25T19:42:04.807
> 
> 标签：android, settext, optionmenu

我在 Android 中有一个选项菜单。现在它有5个选项。当我按下一个按钮时，会出现一个祝酒词，我按下另一个按钮，它就会开始一项活动。这一切都很好。现在我想添加另一个选项。当我在模拟器上选择该选项时，我希望它更改文本，更改 imageview 的图像资源，并将某些文本视图的可见性设置为 View.GONE 在另一个 xml 中，然后启动布局为该 xml 文件的活动。我执行以下操作：

```
 ...Previous menu options
    case R.id.sample:
    TextView tv1 = (TextView) findViewById(R.id.tv1);
    tv1.setText("This is the new text");
    tv1.setVisibility(View.GONE);
    ImageView iv = (ImageView) findViewById(R.id.iv1);
    iv.setImageResource(R.drawable.image);
    return true;
    following menu options... 
```

当我在模拟器上运行它并单击选项菜单中的此选项时，它会显示：“应用程序示例（进程 com.android.example）已意外停止。请重试。” 我已经做了一个干净的项目，但它也无济于事。日志猫说：

```
05-25 19:25:19.357: E/AndroidRuntime(283): FATAL EXCEPTION: main
05-25 19:25:19.357: E/AndroidRuntime(283): java.lang.NullPointerException
05-25 19:25:19.357: E/AndroidRuntime(283):  at com.android.example.SampleOption.onOptionsItemSelected(Sample.java:349)
05-25 19:25:19.357: E/AndroidRuntime(283):  at android.app.Activity.onMenuItemSelected(Activity.java:2195)
05-25 19:25:19.357: E/AndroidRuntime(283):  at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:730)
05-25 19:25:19.357: E/AndroidRuntime(283):  at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:143)
05-25 19:25:19.357: E/AndroidRuntime(283):  at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855)
05-25 19:25:19.357: E/AndroidRuntime(283):  at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:532)
05-25 19:25:19.357: E/AndroidRuntime(283):  at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:122)
05-25 19:25:19.357: E/AndroidRuntime(283):  at android.view.View$PerformClick.run(View.java:8816)
05-25 19:25:19.357: E/AndroidRuntime(283):  at android.os.Handler.handleCallback(Handler.java:587)
05-25 19:25:19.357: E/AndroidRuntime(283):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-25 19:25:19.357: E/AndroidRuntime(283):  at android.os.Looper.loop(Looper.java:123)
05-25 19:25:19.357: E/AndroidRuntime(283):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-25 19:25:19.357: E/AndroidRuntime(283):  at java.lang.reflect.Method.invokeNative(Native Method)
05-25 19:25:19.357: E/AndroidRuntime(283):  at java.lang.reflect.Method.invoke(Method.java:521)
05-25 19:25:19.357: E/AndroidRuntime(283):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-25 19:25:19.357: E/AndroidRuntime(283):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-25 19:25:19.357: E/AndroidRuntime(283):  at dalvik.system.NativeStart.main(Native Method)
05-25 19:25:23.127: I/Process(283): Sending signal. PID: 283 SIG: 9 
```

有人知道我做错了什么吗？

转发谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:14:32.250

> ...并将某些文本视图的可见性设置为 View.GONE 在另一个 xml 中，然后启动其布局为该 xml 文件的活动。

你不能这样做。在其他布局中搜索`TextView` *tv1*`Activity`（只需使用`findViewById`将`TextView`在**当前** `Activity`布局中搜索）布局将找不到`TextView`，这将导致*tv1*为`null`。当您尝试在其上设置文本时，它会抛出`NullPointerException`.

如果我了解您要做什么，请在您用来启动新的方法中传递一个`boolean`值，并在该方法中检查该值的值，然后更改所需的可见性。`Intent``Activity``Activity``onCreate``boolean``Intent``Views`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:51:11.880

改变

```
TextView tv = (TextView) findViewById(R.id.tv1); 
```

至

```
TextView tv1 = (TextView) findViewById(R.id.tv1); 
```

* * *

## 编辑：

如果这不能解决问题，请考虑以下情况：

1.  如果您的代码是*正确*的，请尝试删除该类`R.java`并让 Eclipse 重新生成它。

2.  如果您的代码*不正确*，那么您可能需要仔细检查所有 id（即`R.id.tv1`、`R.id.tv2`等）是否在适当的 XML 文件中定义。如果找不到 id，这将导致`NullPointerException`.

# c - Qsort 结构数组比较函数

> ID：10760475
> 
> 赞同：0
> 
> 时间：2012-05-25T19:42:12.087
> 
> 标签：c, struct, qsort

好的，我通过在网上四处查看来完成这项工作，但是有人可以解释一下编号为 1 和 2 的行的确切作用以及为什么需要它们

```
int structCompare(const void *a, const void *b)
{
     struct trade *tempA = (struct trade *)a;//(1)
     struct trade *tempB = (struct trade *)b;//(2)
     return strcmp(tempA->name, tempB->name);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:44:08.887

这些行将通用`void`指针转换为`struct trade`指针。当`void *`涉及到时，显式转换在 C 中是多余的，应该被消除：

```
 struct trade *tempA = a;
 struct trade *tempB = b;
 return strcmp(tempA->name, tempB->name); 
```

你可以写：

```
return strcmp(((struct trade *)a)->name, ((struct trade *)b)->name); 
```

不过我更喜欢第一个。

# linux - 如何将 Linux 内核缓冲区映射到用户空间？

> ID：10760479
> 
> 赞同：19
> 
> 时间：2012-05-25T19:42:31.447
> 
> 标签：linux, linux-kernel, linux-device-driver

假设缓冲区是使用基于页面的方案分配的。实现 mmap 的一种方法是使用 remap_pfn_range 但 LDD3 表示这不适用于传统内存。看来我们可以通过使用 SetPageReserved 标记保留的页面来解决此问题，以便将其锁定在内存中。但是不是所有的内核内存都已经不可交换，即已经保留了吗？为什么需要明确设置保留位？

这与从 HIGH_MEM 分配的页面有关吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-26T23:39:57.043

在 mmap 方法中从内核映射一组页面的最简单方法是使用故障处理程序来映射页面。基本上你最终会得到类似的东西：

```
static int my_mmap(struct file *filp, struct vm_area_struct *vma)
{
    vma->vm_ops = &my_vm_ops;
    return 0;
}

static const struct file_operations my_fops = {
    .owner  = THIS_MODULE,
    .open   = nonseekable_open,
    .mmap   = my_mmap,
    .llseek = no_llseek,
}; 
```

（其他文件操作是您的模块需要的）。此外，`my_mmap`您还需要进行任何范围检查等来验证 mmap 参数。

然后`vm_ops`看起来像：

```
static int my_fault(struct vm_area_struct *vma, struct vm_fault *vmf)
{
    vmf->page = my_page_at_index(vmf->pgoff);
    get_page(vmf->page);

    return 0;
} 

static const struct vm_operations_struct my_vm_ops = {
    .fault      = my_fault
} 
```

您只需要找出传递给故障函数的给定 vma / vmf 将哪个页面映射到用户空间。这取决于你的模块是如何工作的。例如，如果你做了

```
my_buf = vmalloc_user(MY_BUF_SIZE); 
```

那么您使用的页面将类似于

```
vmalloc_to_page(my_buf + (vmf->pgoff << PAGE_SHIFT)); 
```

但是您可以轻松地创建一个数组并为每个条目分配一个页面，使用 kmalloc 等等。

[刚刚注意到这`my_fault`是一个有点有趣的函数名称]

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-08-12T01:39:12.320

**最小可运行示例和用户态测试**

内核模块：

```
#include <linux/fs.h>
#include <linux/init.h>
#include <linux/kernel.h> /* min */
#include <linux/mm.h>
#include <linux/module.h>
#include <linux/proc_fs.h>
#include <linux/uaccess.h> /* copy_from_user, copy_to_user */
#include <linux/slab.h>

static const char *filename = "lkmc_mmap";

enum { BUFFER_SIZE = 4 };

struct mmap_info {
    char *data;
};

/* After unmap. */
static void vm_close(struct vm_area_struct *vma)
{
    pr_info("vm_close\n");
}

/* First page access. */
static vm_fault_t vm_fault(struct vm_fault *vmf)
{
    struct page *page;
    struct mmap_info *info;

    pr_info("vm_fault\n");
    info = (struct mmap_info *)vmf->vma->vm_private_data;
    if (info->data) {
        page = virt_to_page(info->data);
        get_page(page);
        vmf->page = page;
    }
    return 0;
}

/* After mmap. TODO vs mmap, when can this happen at a different time than mmap? */
static void vm_open(struct vm_area_struct *vma)
{
    pr_info("vm_open\n");
}

static struct vm_operations_struct vm_ops =
{
    .close = vm_close,
    .fault = vm_fault,
    .open = vm_open,
};

static int mmap(struct file *filp, struct vm_area_struct *vma)
{
    pr_info("mmap\n");
    vma->vm_ops = &vm_ops;
    vma->vm_flags |= VM_DONTEXPAND | VM_DONTDUMP;
    vma->vm_private_data = filp->private_data;
    vm_open(vma);
    return 0;
}

static int open(struct inode *inode, struct file *filp)
{
    struct mmap_info *info;

    pr_info("open\n");
    info = kmalloc(sizeof(struct mmap_info), GFP_KERNEL);
    pr_info("virt_to_phys = 0x%llx\n", (unsigned long long)virt_to_phys((void *)info));
    info->data = (char *)get_zeroed_page(GFP_KERNEL);
    memcpy(info->data, "asdf", BUFFER_SIZE);
    filp->private_data = info;
    return 0;
}

static ssize_t read(struct file *filp, char __user *buf, size_t len, loff_t *off)
{
    struct mmap_info *info;
    ssize_t ret;

    pr_info("read\n");
    if ((size_t)BUFFER_SIZE <= *off) {
        ret = 0;
    } else {
        info = filp->private_data;
        ret = min(len, (size_t)BUFFER_SIZE - (size_t)*off);
        if (copy_to_user(buf, info->data + *off, ret)) {
            ret = -EFAULT;
        } else {
            *off += ret;
        }
    }
    return ret;
}

static ssize_t write(struct file *filp, const char __user *buf, size_t len, loff_t *off)
{
    struct mmap_info *info;

    pr_info("write\n");
    info = filp->private_data;
    if (copy_from_user(info->data, buf, min(len, (size_t)BUFFER_SIZE))) {
        return -EFAULT;
    } else {
        return len;
    }
}

static int release(struct inode *inode, struct file *filp)
{
    struct mmap_info *info;

    pr_info("release\n");
    info = filp->private_data;
    free_page((unsigned long)info->data);
    kfree(info);
    filp->private_data = NULL;
    return 0;
}

static const struct file_operations fops = {
    .mmap = mmap,
    .open = open,
    .release = release,
    .read = read,
    .write = write,
};

static int myinit(void)
{
    proc_create(filename, 0, NULL, &fops);
    return 0;
}

static void myexit(void)
{
    remove_proc_entry(filename, NULL);
}

module_init(myinit)
module_exit(myexit)
MODULE_LICENSE("GPL"); 
```

[GitHub 上游](https://github.com/cirosantilli/linux-kernel-module-cheat/blob/2ea5e17d23553334c23934d83965de8a47df3780/kernel_modules/mmap.c).

用户态测试：

```
#define _XOPEN_SOURCE 700
#include <assert.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h> /* uintmax_t */
#include <string.h>
#include <sys/mman.h>
#include <unistd.h> /* sysconf */

/* Format documented at:
 * https://github.com/torvalds/linux/blob/v4.9/Documentation/vm/pagemap.txt
 */
typedef struct {
    uint64_t pfn : 54;
    unsigned int soft_dirty : 1;
    unsigned int file_page : 1;
    unsigned int swapped : 1;
    unsigned int present : 1;
} PagemapEntry;

/* Parse the pagemap entry for the given virtual address.
 *
 * @param[out] entry      the parsed entry
 * @param[in]  pagemap_fd file descriptor to an open /proc/pid/pagemap file
 * @param[in]  vaddr      virtual address to get entry for
 * @return                0 for success, 1 for failure
 */
int pagemap_get_entry(PagemapEntry *entry, int pagemap_fd, uintptr_t vaddr)
{
    size_t nread;
    ssize_t ret;
    uint64_t data;

    nread = 0;
    while (nread < sizeof(data)) {
        ret = pread(pagemap_fd, ((uint8_t*)&data) + nread, sizeof(data),
                (vaddr / sysconf(_SC_PAGE_SIZE)) * sizeof(data) + nread);
        nread += ret;
        if (ret <= 0) {
            return 1;
        }
    }
    entry->pfn = data & (((uint64_t)1 << 54) - 1);
    entry->soft_dirty = (data >> 54) & 1;
    entry->file_page = (data >> 61) & 1;
    entry->swapped = (data >> 62) & 1;
    entry->present = (data >> 63) & 1;
    return 0;
}

/* Convert the given virtual address to physical using /proc/PID/pagemap.
 *
 * @param[out] paddr physical address
 * @param[in]  pid   process to convert for
 * @param[in] vaddr  virtual address to get entry for
 * @return           0 for success, 1 for failure
 */
int virt_to_phys_user(uintptr_t *paddr, pid_t pid, uintptr_t vaddr)
{
    char pagemap_file[BUFSIZ];
    int pagemap_fd;

    snprintf(pagemap_file, sizeof(pagemap_file), "/proc/%ju/pagemap", (uintmax_t)pid);
    pagemap_fd = open(pagemap_file, O_RDONLY);
    if (pagemap_fd < 0) {
        return 1;
    }
    PagemapEntry entry;
    if (pagemap_get_entry(&entry, pagemap_fd, vaddr)) {
        return 1;
    }
    close(pagemap_fd);
    *paddr = (entry.pfn * sysconf(_SC_PAGE_SIZE)) + (vaddr % sysconf(_SC_PAGE_SIZE));
    return 0;
}

enum { BUFFER_SIZE = 4 };

int main(int argc, char **argv)
{
    int fd;
    long page_size;
    char *address1, *address2;
    char buf[BUFFER_SIZE];
    uintptr_t paddr;

    if (argc < 2) {
        printf("Usage: %s <mmap_file>\n", argv[0]);
        return EXIT_FAILURE;
    }
    page_size = sysconf(_SC_PAGE_SIZE);
    printf("open pathname = %s\n", argv[1]);
    fd = open(argv[1], O_RDWR | O_SYNC);
    if (fd < 0) {
        perror("open");
        assert(0);
    }
    printf("fd = %d\n", fd);

    /* mmap twice for double fun. */
    puts("mmap 1");
    address1 = mmap(NULL, page_size, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);
    if (address1 == MAP_FAILED) {
        perror("mmap");
        assert(0);
    }
    puts("mmap 2");
    address2 = mmap(NULL, page_size, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);
    if (address2 == MAP_FAILED) {
        perror("mmap");
        return EXIT_FAILURE;
    }
    assert(address1 != address2);

    /* Read and modify memory. */
    puts("access 1");
    assert(!strcmp(address1, "asdf"));
    /* vm_fault */
    puts("access 2");
    assert(!strcmp(address2, "asdf"));
    /* vm_fault */
    strcpy(address1, "qwer");
    /* Also modified. So both virtual addresses point to the same physical address. */
    assert(!strcmp(address2, "qwer"));

    /* Check that the physical addresses are the same.
     * They are, but TODO why virt_to_phys on kernel gives a different value? */
    assert(!virt_to_phys_user(&paddr, getpid(), (uintptr_t)address1));
    printf("paddr1 = 0x%jx\n", (uintmax_t)paddr);
    assert(!virt_to_phys_user(&paddr, getpid(), (uintptr_t)address2));
    printf("paddr2 = 0x%jx\n", (uintmax_t)paddr);

    /* Check that modifications made from userland are also visible from the kernel. */
    read(fd, buf, BUFFER_SIZE);
    assert(!memcmp(buf, "qwer", BUFFER_SIZE));

    /* Modify the data from the kernel, and check that the change is visible from userland. */
    write(fd, "zxcv", 4);
    assert(!strcmp(address1, "zxcv"));
    assert(!strcmp(address2, "zxcv"));

    /* Cleanup. */
    puts("munmap 1");
    if (munmap(address1, page_size)) {
        perror("munmap");
        assert(0);
    }
    puts("munmap 2");
    if (munmap(address2, page_size)) {
        perror("munmap");
        assert(0);
    }
    puts("close");
    close(fd);
    return EXIT_SUCCESS;
} 
```

[GitHub 上游](https://github.com/cirosantilli/linux-kernel-module-cheat/blob/8a4fc8e9aedae01ece6cb997099e2f3e8bb992ec/userland/kernel_modules/mmap.c).

在内核 5.4.3 上测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T23:29:28.560

尽管这些页面是通过内核驱动程序保留的，但它是通过用户空间访问的。结果，PTE（页表条目）不知道 pfn 是属于用户空间还是内核空间（即使它们是通过内核驱动程序分配的）。

这就是它们标有 的原因`SetPageReserved`。

# objective-c - AVMutableComposition 在第三个剪辑后重播时出现黑屏

> ID：10760484
> 
> 赞同：1
> 
> 时间：2012-05-25T19:42:56.607
> 
> 标签：objective-c, ios, avfoundation, avmutablecomposition

在我的应用程序中，我试图动态合并视频剪辑。我有两个属性保存上一个记录，然后将下一个记录附加到末尾。这基本上是作为一个暂停功能，然后用户可以即时播放。

我让应用程序将第一个剪辑写入 docs 目录中的“video.mp4”。这被设置为先前的记录。然后我将下一个剪辑写入“video2.mp4”，将其设置为下一个录制，并使用 AVMutableComposition 将它们合并在一起：

```
AVMutableComposition *mashVideosTogether = [AVMutableComposition composition];
NSError *error;

if([mashVideosTogether insertTimeRange:
                 CMTimeRangeMake(kCMTimeZero, [self.previousRecording duration])
                 ofAsset:self.previousRecording 
                 atTime:kCMTimeZero 
                 error:&error]) NSLog(@"Successfully added one");
else NSLog(@"error: %@", error.description);

if([mashVideosTogether insertTimeRange:
                 CMTimeRangeMake(kCMTimeZero, [self.nextRecording duration])
                 ofAsset:self.nextRecording 
                 atTime:CMTimeAdd(kCMTimeZero, [self.previousRecording duration])
                 error:&error]) NSLog(@"Success on 2");
else NSLog(@"error: %@", error.description); 
```

这会附加第一个和第二个视频。然后我将视频导出到“combined.mp4”，当这成功完成后，我删除“video.mp4”处的文件，并将组合视频导出到“video.mp4”（所以此时组合视频存在在两个地方）。这在我的播放器中播放良好。如果用户再次点击录制，则将“video.mp4”处新组合的视频设置为上一次录制，将新录制的剪辑设置为下一次录制，重复整个过程。它们被附加并再次导出以重复该过程。

但是，一旦我添加了第三个（或更多）剪辑，创建的合成中的第一个剪辑就会在播放中变黑。它们的持续时间仍然保持不变，但没有视频或声音。基本上，每当我从旧作品创作新作品时，第一个作品都是空白的，然后唯一保留的就是它们的持续时间和新的录音。当组合物被制成另一个组合物时，这些数据是否会丢失？我需要手动将它们添加为曲目吗？任何帮助表示赞赏！

**解决了**

我阅读了 Apple 的 AVEditDemo，似乎我最初的假设是正确的——当我单独使用 AVMutableComposition 将视频附加在一起时（也就是不创建单独的轨道文件并合并它们），这些轨道的数据在添加到另一个时丢失了作品。

所以我只是为每个剪辑的音频和视频创建了单独的轨道来合并它们，现在我有一个工作设置，我可以动态地拍摄视频，停止，然后再次开始拍摄，它们将在运行中连接起来。

```
if(self.previousRecording && self.nextRecording) {
    NSArray *assetArray = [NSArray arrayWithObjects:
                           self.previousRecording, self.nextRecording, nil];
    NSURL *fileURL = [self getURLWithPathComponent:@"combined.mp4"];

    AVMutableComposition *mashVideosTogether = [AVMutableComposition composition];
    NSError *error;

    CMTime nextClipStartTime = kCMTimeZero;

    AVMutableCompositionTrack *compositionVideoTrack = 
    [mashVideosTogether addMutableTrackWithMediaType:AVMediaTypeVideo
    preferredTrackID:kCMPersistentTrackID_Invalid];

    AVMutableCompositionTrack *compositionAudioTrack = 
    [mashVideosTogether addMutableTrackWithMediaType:AVMediaTypeAudio 
    preferredTrackID:kCMPersistentTrackID_Invalid];

    for(int i=0; i<[assetArray count]; i++) {
        AVURLAsset *asset = [assetArray objectAtIndex:i];

        CMTimeRange timeRangeInAsset = CMTimeRangeMake(kCMTimeZero, [asset duration]);

        AVAssetTrack *clipVideoTrack = 
        [[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

        [compositionVideoTrack insertTimeRange:timeRangeInAsset 
        ofTrack:clipVideoTrack atTime:nextClipStartTime error:nil];

        AVAssetTrack *clipAudioTrack = 
        [[asset tracksWithMediaType:AVMediaTypeAudio]objectAtIndex:0];

        [compositionAudioTrack insertTimeRange:timeRangeInAsset 
        ofTrack:clipAudioTrack atTime:nextClipStartTime error:nil];

        nextClipStartTime = CMTimeAdd(nextClipStartTime, timeRangeInAsset.duration);
    }

    //do exports down here and then reset previous recording, etc.
} 
```

# android - VirtualBox 上的 Android x86：Android 已连接但未在线

> ID：10760490
> 
> 赞同：2
> 
> 时间：2012-05-25T19:43:47.657
> 
> 标签：android, adb, virtual-machine, virtualbox, android-x86

我正在尝试使用 Oracle VirtualBox 配置运行 Android x86 的机器，以便它与 Eclipse 一起使用。我在使我的虚拟机“联机”时遇到了一些麻烦。我通过在 Android Terminal Emulator 中键入以下内容将手机连接到 adb：

```
ifconfig eth0 192.168.40.1 netmask 255.255.255.0
route add default gw 192.168.40.1 dev eth0 
```

之后，我切换到 cmd 并输入 adb connect localhost

但是当我尝试在虚拟 Android 上使用 Eclipse 运行我的测试代码时，它不会出现在 Android 设备选择器菜单中。此外，当我输入`adb devices`cmd 时，这是响应：

```
List of devices attached
localhost:5555   offline 
```

让我担心的另一件事是，每次关闭虚拟机后，我必须在重新启动时再次在终端中键入`ifconfig`和命令，才能连接到设备。`route add`

我该怎么做才能使设备联机？

**编辑：** 如果重要，VM 配置为通过 NAT 网络进行通信。这是我的端口转发规则的样子：协议：TCP

主机IP：*

主机端口：5555

访客IP：*

访客端口：5555

**EDIT2** 相关问题：[错误：设备离线](https://stackoverflow.com/questions/10680417/error-device-offline)

**EDIT3：**潜在解决方案：[Android 设备选择器 - 我的设备似乎离线](https://stackoverflow.com/questions/5584976/android-device-chooser-my-device-seems-offline)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T17:52:14.647

这比所有这些都容易，在 Android VM Terminal Emulator 类型中启用 adb over tcpip：

```
adb tcpip 5555 
```

然后从 Eclipse 机器上的命令行通过 adb 进行连接：

```
adb connect 192.168.40.1:5555 
```

VM 现在应该可以通过 adb devices 以及 Eclipse 中的设备视图使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T08:08:17.353

当我开始开发一些Android应用程序时，我必须处理同样的问题，所以寻找一些东西，就`VirtualBox guide`我读过 NAT 不需要在主机网络和来宾系统上进行任何配置，因此，它是 VirtualBox 中的默认网络模式。启用了 NAT 的虚拟机就像一台通过路由器连接到 Internet 的真实计算机。在这种情况下，“路由器”是 VirtualBox 网络引擎，它透明地将 trac 从虚拟机映射到虚拟机。在 VirtualBox 中，此路由器放置在每个虚拟机和主机之间。这种分离最大限度地提高了安全性，因为默认情况下虚拟机无法相互通信。NAT 模式的缺点是，就像路由器后面的专用网络一样，虚拟机是不可见的，并且无法从外部 Internet 访问。客户操作系统发出的网络帧被 VirtualBox 的 NAT 引擎接收，它提取 TCP/IP 数据并使用主机操作系统重新发送。对于主机上的应用程序，或与主机位于同一网络上的另一台计算机，看起来数据是由主机上的 VirtualBox 应用程序使用属于主机的 IP 地址发送的。VirtualBox 侦听对发送的包的回复，并将它们重新打包并重新发送到其专用网络上的客户机。
虚拟机在专用网络上从集成到 VirtualBox 的 DHCP 服务器接收其网络地址和配置。因此分配给虚拟机的 IP 地址通常位于与主机完全不同的网络上。由于虚拟机连接到 Virtual-Box 内部的专用网络并且对主机不可见，因此主机或同一网络上的其他计算机无法访问来宾上的网络服务。但是，就像物理路由器一样，VirtualBox 可以通过端口转发向来宾以外的世界提供选定的服务。这意味着 VirtualBox 会侦听主机上的某些端口，并将到达那里的所有数据包重新发送给客户机，在相同或不同的端口上。所以，执行`cmd`，转到安装 VirtualBox 的文件夹和 VBManage.exe 所在的文件夹，然后键入以下内容以应用 TPC 端口转发：

```
VBoxManage modifyvm "NameOfYourAndroidVM" --natpf1 adb,tcp,*,5555,*,5555 
```

现在您可以通过 adb 连接到您的虚拟机：

```
adb connect localhost 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-02T16:54:24.430

只需将 vm 配置为使用 pridge 网络模式并在网络上启用 dhcp 服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-13T06:41:36.963

我认为大多数人已经尝试过这个，但在我的情况下，只需连接到 VirtualBox 的内置 wifi 接入点“VirtWifi”（它可以让虚拟机访问互联网）就可以解决这个问题。除了 5555 端口转发规则外，我所有的虚拟机网络更改都是默认的。我正在虚拟化 Android v9.0 (Pie)。

# java - 我的 JPA DAO 有什么问题？它将持续存在，但合并时出错

> ID：10760495
> 
> 赞同：2
> 
> 时间：2012-05-25T19:44:08.280
> 
> 标签：java, jakarta-ee, jpa, openjpa

我在 WebSphere 7 上使用 JPA 和 EJB。

我有以下课程：

```
@Entity
@Table(name="WIDGET")
public class Widget implements Serializable {
  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  private Long id;
  private String name;
  private String details;
/* getters and setters */
} 
```

我有一个像这样的DAO：

```
@Stateless
public class WidgetDAO implements WidgetDAOLocal {
  @PersistenceUnit
  private EntityManagerFactory emf;
  private EntityManager em;

  public EntityManager getEntityManager() {
    if (emf == null) {
      throw new Exception();
    }
    return emf.createEntityManager;
  }

  public Widget getWidget(Long id) {
    Widget widget = null;
    EntityManager em = getEntityManager();
    try {
      widget = (Widget)em.find(Widget.class, widgetId);
    } finally {
      em.close();
    }
    return widget;
  }

  public Widget createWidget(Widget widget) {
    EntityManager em = getEntityManager();
    try {
      em.persist(widget);
      em.flush();
    } finally {
      em.close();
    }
    return widget;
  }

  public Widget updateWidget(Widget widget) {
    EntityManager em = getEntityManager();
    try {
      widget = getEntityManager().merge(widget);
      em.flush();
    } finally {
      em.close();
    }
    return widget;
  }

} 
```

创建工作正常，我的小部件出现在数据库中。

但是当我尝试进行合并时，我得到一个错误。进行合并的代码和我得到的错误如下：

```
public WidgetService {

  @EJB
  private WidgetDAO widgetDAO;

  public WidgetDAO getWidgetDAO() {
    return this.widgetDAO;
  }

  public Widget getWidget(Long id) {
     return this.getWidgetDAO().getWidget(id);
  }

  public void updateDetails(Long widgetId, String details) {
    Widget w = this.getWidget(widgetId);
    w.setDetails(details);
    this.widgetDAO.updateWidget(w);
  }

} 
```

错误是：

```
Exception caught from before_completion synchronization operation: 
<openjpa-1.2.1-SNAPSHOT-r422266:686069 nonfatal user error> org.apache.openjpa.persistence.InvalidStateException:
The generated value processing detected an existing value assigned to this field: com.mydomain.domain.Widget.id.  
This existing value was either provided via an initializer or by calling the setter method.  
You either need to remove the @GeneratedValue annotation or modify the code to the initializer processing. 
```

非常感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T23:45:38.350

合并获取您实体的副本，将其分离并保留新实体，我认为它会尝试从旧实体设置 ID 并导致您生成的值发生冲突。如果您只想更新您的对象，您应该在事务中执行此操作并提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:10:30.423

感谢大家的帮助，我想通了，这是问题的原因和对我有用的解决方案。

在我的 DAO 中，我正在这样做：

```
@Stateless 
public class WidgetDAO implements WidgetDAOLocal {
   @PersistenceUnit
   private EntityManagerFactory emf;
   private EntityManager em;

  public EntityManager getEntityManager() {
     if (emf == null) {
       throw new Exception();
     }
     return emf.createEntityManager;
   } 
```

因为 EntityManagerFactory 是通过 @PersistenceUnit 注释注入的，所以实体是“应用程序管理的”，导致与 WebSphere 发生某种冲突。

我将代码更改为：

```
@Stateless 
public class WidgetDAO implements WidgetDAOLocal {
  @PersistenceContext 
  private EntityManager em;

  public EntityManager getEntityManager() {
    return em;
  } 

  public Widget updateWidget(Widget widget) throws Exception {
    return getEntityManager().merge(widget);
  } 
```

@PersistenceContext 注释使实体成为“容器管理”，现在一切正常。

感谢您在这里提供的所有帮助和建议。归根结底，我在重新关注此处文档的“管理实体”部分后制定了解决方案：

[http://docs.oracle.com/javaee/5/tutorial/doc/](http://docs.oracle.com/javaee/5/tutorial/doc/)

# javascript - 将 JS 函数转换为使用 jquery

> ID：10760497
> 
> 赞同：0
> 
> 时间：2012-05-25T19:44:10.200
> 
> 标签：javascript, jquery

我开始使用 Jquery，我有以下 JS 函数我想用 jquery 做任何人来帮忙？

```
<script type="text/javascript" language="javascript">
function redirect() {

  //var dest = "?phone=" + phone;
  var prefill = "&prefill=3";
  var info=document.choice.infos.value;
  var dest = "&info="+info;
  var url=document.choice.centres.value;
  var urlfinal=url+dest+prefill;
  document.location.href=urlfinal
}
</script>

<form name="choice">    
<select name="centres">
  <option value="http://toto.com/?var=1">var1</option>
  <option value="http://toto.com/?var=2">var2</option>
</select>
<br />
<INPUT TYPE="text" NAME="infos">
<input type="button" value="Go!" onClick="redirect();">

</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:56:39.037

您的按钮标记

```
<input type="button" value="Go!" id="submit"> 
```

和jQuery代码：

```
$(document).ready(function() {
    $('#submit').click(function() {
        //var dest = "?phone=" + phone;

        var finalUrl = $("select#centers").val();
        var querystring = '&prefill=3' + '&info=' 
                               + $("select#info").val() + dest;
        finalUrl = finalUrl + querystring ;
        window.location.replace(finalUrl);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:28:41.393

在 Javascript 控制台打开的情况下使用 Google Chrome 或 Firefox，并养成使用 console.log 在关键点检查代码的习惯。顺便说一句，您不需要表单元素：

```
...
<script type="text/javascript">
$(function () {

    $('#btnRedirect').click(function () {
        var centres = $('#centres');
        var centre = $('option:selected', centres);
        //console.log(centre.val());

        var infos = $('#infos');
        //console.log(infos.val());

        var dest = "&info=" + infos.val();
        var prefill = "&prefill=3";
        var urlfinal = centre.val() + dest + prefill;
        //console.log(urlfinal);

        document.location = urlfinal;
    });
});
</script>

...

<body>
<select id="centres">
  <option value="http://toto.com/?var=1">var1</option>
  <option value="http://toto.com/?var=2">var2</option>
</select>
<br />
<input type="text" id="infos"/>
<input id="btnRedirect" type="button" value="Go!"/>
</body> 
```

# objective-c - 用 compare:options:range: 比较不同长度的字符串会产生错误的结果

> ID：10760504
> 
> 赞同：3
> 
> 时间：2012-05-25T19:44:36.987
> 
> 标签：objective-c, cocoa-touch, nsstring, string-comparison

为什么这个比较结果`NO`？

```
BOOL areTheSame = NSOrderedSame == [@"th" compare:@"They" options:NSCaseInsensitiveSearch range:NSMakeRange(0, 2)]; 
```

当我对其进行测试时`@"th"`，`@"Th"`它是`YES`.

我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T20:17:03.223

这是违反直觉的，但该`range`论点仅适用于*接收者*。另一个字符串的长度（ 的参数`compare:`）不受范围限制。您的调用减少`@"th"`到产生的范围 {0,2} `@"th"`（即，这没有效果），然后将其与`@"They"`.

你会看到：

```
NSComparisonResult comp = [@"They" compare:@"th" 
                                   options:NSCaseInsensitiveSearch 
                                     range:NSMakeRange(0, 2)];
BOOL areTheSame = comp == NSOrderedSame; 
```

产生您期望的结果，因为它将接收器 ( `@"They"`) 向下 ( 到`@"Th"`) 然后进行比较。

# certificate - In Windows 8, will third-party INF driver files require a signature?

> ID：10760513
> 
> 赞同：22
> 
> 时间：2012-05-25T19:46:27.747
> 
> 标签：certificate, windows-8, drivers, driver-signing

I work for a company that sells USB devices and provides drivers for them.

In Windows 7, you could install and use unsigned INF driver files for USB devices as long as they didn't add any code to the kernel. Our company uses generic drivers provided by Microsoft (`usbser.sys` and `winusb.sys`), so we never needed to sign our driver packages.

Based on a report from one of our customers and from another Stack Overflow question *[What changed in the driver signature requirements for Windows 8?](https://stackoverflow.com/questions/9640400)* and [the Arduino forum](http://arduino.cc/forum/index.php/topic,94651.0.html), it sounds like the Windows 8 Consumer Preview has stricter signing requirements that require all third-party INF files to get signed. The error message people are getting when trying to install drivers that worked on Windows 7 is:

> The third-party INF does not contain digital signature information.

**What is the official word from Microsoft that confirms that the signatures will still be required in the final version of Windows 8?** A sentence or two from MSDN.com would be sufficient, but I can't find anything.

I am considering buying a signing certificate, but before I pay $200 I want to be sure I will actually need it in the long term. It's possible that the new signing requirement is just in the consumer preview and not in the real version?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-11-13T01:58:38.540

To answer my own question: Yes, the final version of Windows 8 does require all INF files to be signed, but you do not need to submit your drivers to the WHQL. I wrote about this requirement and much more in my article [Practical Windows Code and Driver Signing](http://www.davidegrayson.com/signing/).

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-10T05:22:00.147

Not only does it require signing of INF files, it also requires them to be signed by the [WHQL](http://en.wikipedia.org/wiki/WHQL_Testing) certificate, not the same one that you use to embedded-sign .sys files and the like. Using my Code Signing certificate on the INF file didn't work at all. (Same problems as if left unsigned.)

EDIT:

This is what Microsoft wants you to think. They said that certain classes of drivers HAVE to be WHQL signed, otherwise they won't work, and that [Authenticode](http://en.wikipedia.org/wiki/Code_signing#Implementations) signing works only for those who don't have a WHQL process.

It turns out you CAN Authenticode sign driver packages, except you have to take care and sign them like you would kernel code now, which means getting the correct cross certificate for your [CA](https://en.wikipedia.org/wiki/Certificate_authority) (from *[Cross-Certificates for Kernel Mode Code Signing](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487315.aspx)*, there are tons of them now, including StartCom, which I have (class 2, US$60 for two years, but they can't be timestamped). Supply this cross certificate (not the same as your CA's self-signed certificate, or their intermediary certificate. It's only available on that MSDN page) to [SignTool](http://msdn.microsoft.com/en-us/library/windows/desktop/aa387764%28v=vs.85%29.aspx) via the `/ac` switch.

Then use SignTool verify with the `/kp` switch to see if you cross signed them properly. SignTool verification with without any switches REQUIRES that the .cat files are WHQL signed, while the `/pa` switch, which seemed to be OK before, is now too lax, and only applies to non-driver signing (like EXE files, [ClickOnce](http://en.wikipedia.org/wiki/ClickOnce), etc.).

If you don't want to acquire your own kernel-level signing certificate (which is easier now than before, frankly, before it was limited to VeriSign's super expensive, and GlobalSign US$200-a-year ones, I guess Microsoft saw that not many people wrote kernel-level exploits for x64 systems), you can make a ***self-signed root CA***, have your driver installer ***install*** it into the LocalMachine's "Trusted Root Certification Authority" store (see `certmgr.exe`), and then install the .cat file which was signed by that. Of course, since this isn't a kernel-level code certificate, you MUST use only .sys files which already have an embedded kernel-level code certificate from someone else (which means, you can only modify .inf files in driver packages). Apparently, there's some loophole that allows self-signed certificates to sign .cat files (if you made your own CA, then signed a certificate with it, then signed your .cat files with that, it ***won't work*** like this).

For a suite that does this for every driver INF package it makes, see libwdi, and how their self-signed certificates on cat files allow installation on Windows 8.

EDIT2:

Removed CERTUM "open source" developer certificate mention, as it's not cross-certified by Microsoft (The one you get isn't the Certum TRUSTED NETWORK one, that Microsoft cross-certified).

# google-apps-script - 使用 docslist.getFolder

> ID：10760515
> 
> 赞同：0
> 
> 时间：2012-05-25T19:46:33.393
> 
> 标签：google-apps-script

我有一个工作应用程序，可以将文档保存到他们集合中用户指定的文件夹中。这很好用，除非他们想保存到他们的根文件夹中。

根据文档，

```
function testGetRoot() {
  var root = DocsList.getRootFolder();
  var folderName = DocsList.getFolderById(rootid);
  Logger.log("Folder name: " + folderName.getName());
} 
```

folderName 将“Root”显示为我收藏的根目录的 getName。

因此，看到我将“根”添加到由我的集合中其他文件夹的名称填充的 ListBox 中。那当然，太容易了..

```
**var collectionFolder =  DocsList.getFolder(selectedCollection)**; 
```

我收到“找不到文件夹根目录”错误消息。

所以我可以获得根的名称，但似乎无法让它被 getFolder 方法接受。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T20:32:43.433

你没有错过任何东西。[您应该在问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)中报告此问题，因为这是有道理的。但作为替代方案，即使这可行，我也可能会使用它，它始终引用文件夹 ID。例如

```
listbox.addItem(folder.getName(), folder.getId());

//then, later on in your handler...
//you'll receive the selected folder id directly, instead of its name.
//allowing you to use the more reliable getFolderById
var selectedFolder = DocsList.getFolderById(e.paramater.listbox);
//which works also for the root folder 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T21:34:32.920

我在 addtoFolder 的逻辑中硬编码了“Root”，这样如果用户选择 Root，就不会调用 addToFolder 方法。除非另有说明，否则默认行为是将文档保存到 Root 集合中。

# javascript - 为什么扩展 Ember.Object 时省略了 var 语句？

> ID：10760517
> 
> 赞同：1
> 
> 时间：2012-05-25T19:46:35.327
> 
> 标签：javascript, ember.js

从[Ember.js 文档](http://emberjs.com/documentation/#toc_the-ember-object-model)：

```
Person = Ember.Object.extend({
   // [..]
}); 
```

这是 的第一个定义`Person`，那么为什么`var`省略了该语句？

* * *

`var`在其他一些地方也缺少，例如[Ember.Application.Create](http://docs.emberjs.com/symbols/Ember.Application.html)或[Ember.StateManager.Create](http://docs.emberjs.com/symbols/Ember.Application.html#doc=Ember.StateManager&src=false)。

* * *

伙计们，我知道`var`省略时会发生什么。但似乎没有充分的理由这样做，这样只会让人们感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T20:22:32.957

它是全局声明的，因此 Ember 和 Handlebars 可以解析绑定。

例如，在视图的情况下，它是必要的，因此可以通过`view`帮助程序在 Handlebars 模板中实例化：

**车把**：

```
<script type="text/x-handlebars" >
    {{#view MyView}}
         my view's template
    {{/view}}
</script> 
```

**JavaScript**：​</p>

```
MyView = Ember.View.extend({}); 
```

* * *

以下示例在使用语句声明控制器时不起作用`var`，请参阅[http://jsfiddle.net/pangratz666/uzsd6/](http://jsfiddle.net/pangratz666/uzsd6/)：

**车把**：

```
<script type="text/x-handlebars" >
    {{controller.name}} - {{secondController.name}}
</script>​ 
```

**JavaScript**：

```
var controller = Ember.Object.create({
    name: 'my name'
});

var secondController = Ember.Object.create({
    nameBinding: 'controller.name'
});​ 
```

* * *

如果控制器是在全局可用对象上声明的，`App`在这种情况下是命名空间，则可以解析绑定，请参阅[http://jsfiddle.net/pangratz666/kUmje/](http://jsfiddle.net/pangratz666/kUmje/)：

**车把**：

```
<script type="text/x-handlebars" >
    {{App.controller.name}} - {{App.secondController.name}}
</script>​ 
```

**JavaScript**：

```
App = Ember.Application.create({});

App.controller = Ember.Object.create({
    name: 'my name'
});

App.secondController = Ember.Object.create({
    nameBinding: 'App.controller.name'
});​ 
```

* * *

您应该查看*Emberist*关于[命名约定](http://www.emberist.com/2012/04/09/naming-conventions.html)的博客`Ember.js`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:49:27.063

`var`如果要在本地范围内声明变量，则仅使用关键字。声明一个变量 without`var`将导致该变量在全局范围内可用。这通常是通过类来完成的，因为在大多数情况下，您希望从任何地方访问它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T19:49:40.477

这个声明，如果不是`var Person`总是在全局范围内创建变量（在浏览器的情况下是窗口），所以我想这只是草率，或者可能有某种原因 Person 应该是全局的并且可以从任何地方访问。我同意@Femaref，这是一个伪“类”，因此它旨在构造实例，`var person = new Person()`因此它应该可以从其他地方访问。

无论如何，污染全局命名空间总是一个坏习惯。person 类应该驻留在一些“命名空间散列”中。

# c# - 自动编译两个版本的C#程序

> ID：10760522
> 
> 赞同：5
> 
> 时间：2012-05-25T19:46:45.410
> 
> 标签：c#, compilation

我必须为两家不同的公司制作相同的程序（不同的徽标，不同的名称）。我希望在发布时自动完成此操作。

我正在考虑使用资源文件或附属程序集，但我不确定如何继续。

你认为哪种方式最好？

谢谢。

编辑：

*   区别只有一张图像和一个字符串。
*   我想一键生成所有内容。
*   未来我们可能会获得更多的客户。
*   我还必须补充一点，我使用 SmartAssembly 将所有依赖项合并到一个 exe 文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T19:51:39.837

您可以创建一个包含 99% 代码的类库，然后有两个项目，每个项目都引用公共库，其中 1% 因每个公司而异。然后整个解决方案的构建将为每个公司生成一个可执行文件。如果每家公司想要的差异刚好足以让您需要 [稍微] 不同的代码，请使用此选项。

或者，您可以根据数据而不是代码制作不同的部分。在这种情况下，这可能意味着从文件中获取徽标，而不是将其嵌入到可执行文件中，并拥有一个带有公司名称的配置 xml 文件。这将允许您对两家公司都只有一个可执行文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T19:51:37.517

单独程序集中的资源字符串将是最简单的分发。

但老实说，我希望它是一个自定义功能。您最不想要的就是维护每个人的徽标更改，原因是：法律原因、文案案例、异想天开的艺术许可等。

这是...的缩写。让他们提供格式化的图像，并让他们在安装期间分配公司名称并将其存储在注册表或某种类型的元文件（XML、清单等）中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T20:06:20.390

我能想到的最好的批处理脚本。

让您的项目引用文件（图像（徽标）、文本（公司名称）等）。即 C:\MyProject\Resources。这样当项目构建时，它会将它们编译到应用程序/安装程序等中。

这样，您可以编写一个脚本（.bat 文件）来复制每个公司所需的资源。

第 1 步 - 删除 Resources 文件夹中的所有文件

第 2 步 - 使用 MSBuild.exe 构建您的项目

第 3 步 - 将所需文件从 bin/release 文件夹复制到一个目录（即 C:\Release\CompanyA）

第 4 步 - 更改脚本中的变量以加载下一家公司的详细信息。并从步骤 1 开始重复，因此它会复制所需的资源文件并重新构建。

# iphone - iphone字符串仅用另一个字符串替换第一次出现

> ID：10760523
> 
> 赞同：0
> 
> 时间：2012-05-25T19:46:46.607
> 
> 标签：iphone, string, replace

我在 iphone 中有一个字符串，如下所示：

```
 my.whatever.string.with.unknown.length=something whatever something = something .... = whatever 
```

我只想用其他东西替换第一个“=”。

如果我使用：

```
 [myString stringByReplacingOccurrencesOfString:@"=" withString:@"somethingHere" ]; 
```

它将替换所有出现的 "=" 。关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:53:32.020

您可以使用 range 参数指定要搜索的字符串的深度。假设你能找到第一个在哪里`=`，你可以用它来做。方法定义如下所示：

```
replaceOccurrencesOfString:withString:options:range: 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-05-25T19:54:19.927

你可以像这样替换字符串..

```
 NSString *mystring=FIRST;
 NSString *trimmedString = [mystring stringByReplacingOccurrencesOfString:@" " withString:@""]; 
```

# haskell - 快速检查 CoffeeScript

> ID：10760537
> 
> 赞同：0
> 
> 时间：2012-05-25T19:47:47.107
> 
> 标签：haskell, coffeescript, quickcheck

它存在吗？我找不到它，它也没有在维基百科上列出。（这意味着它不存在:)）

我知道 node.js 有它。不确定在咖啡脚本中编写我的节点应用程序并应用快速检查是否可行。

[http://en.wikipedia.org/wiki/Quick_check](http://en.wikipedia.org/wiki/Quick_check)

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:56:20.303

我不知道任何*专门*为 CoffeeScript 编写的 QuickCheck 库，但谷歌搜索[会找到 qc.js](https://bitbucket.org/darrint/qc.js/src)。这是该存储库中 demo.js 的片段：

```
declare("reverse", [arbWholeNumList, arbWholeNumList],
        function(c, x, y) {
            var z = x.concat(y);
            x.reverse();
            y.reverse();
            z.reverse();
            c.assert(z.toString() == y.concat(x).toString());
        }); 
```

现在我不是 CoffeeScript 专家，但我通过[http://js2coffee.org](http://js2coffee.org)运行了这个。如果您可以设法导入 qc.js，那么从 CoffeeScript 中使用它会如下所示：

```
declare "reverse", [ arbWholeNumList, arbWholeNumList ], (c, x, y) ->
  z = x.concat(y)
  x.reverse()
  y.reverse()
  z.reverse()
  c.assert z.toString() is y.concat(x).toString() 
```

# msbuild - MSBuild 在自动化测试项目上失败

> ID：10760540
> 
> 赞同：3
> 
> 时间：2012-05-25T19:48:04.143
> 
> 标签：msbuild, vs-unit-testing-framework

我刚刚在我的 C# 解决方案中添加了一个自动化测试项目，并将其检入到我的构建服务器中。

当构建脚本使用 MSBuild (.NET Framework 3.5) 运行时，它给了我几个错误（如下所示）：

```
**cs(2,17): error CS0234: The type or namespace name 'VisualStudio' does not exist in the namespace 'Microsoft' (are you missing an assembly reference?)

**.cs(21,17): error CS0246: The type or namespace name 'TestContext' could not be found (are you missing a using directive or an assembly reference?)

**.cs(73,10): error CS0246: The type or namespace name 'TestMethod' could not be found (are you missing a using directive or an assembly reference?)

**.cs(73,10): error CS0246: The type or namespace name 'TestMethodAttribute' could not be found (are you missing a using directive or an assembly reference?)

**.cs(14,6): error CS0246: The type or namespace name 'TestClass' could not be found (are you missing a using directive or an assembly reference?)

**.cs(14,6): error CS0246: The type or namespace name 'TestClassAttribute' could not be found (are you missing a using directive or an assembly reference?) 
```

当我在我的计算机上运行 .NET 3.5 msbuild 时，它会正确构建。

构建服务器上没有 .NET 4.0，升级它不是一种选择。谁能建议可能导致差异的原因以及我可以做些什么来成功构建测试项目？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:53:37.727

如上所述，最简单的做法是在构建服务器上安装适当版本的 Visual Studio 以获取所有 MSTest 依赖项。这是通常所做的。

如果由于某种原因你不能这样做，下面的页面显示了如何在没有安装 VS2008 的情况下让你的依赖项可用：

[http://www.shunra.com/shunrablog/index.php/2009/04/23/running-mstest-without-visual-studio/](http://www.shunra.com/shunrablog/index.php/2009/04/23/running-mstest-without-visual-studio/)

# android-ndk - 类初始化在 newInstance 调用中失败

> ID：10760545
> 
> 赞同：0
> 
> 时间：2012-05-25T19:49:14.847
> 
> 标签：android-ndk

我一直面临着我不知道的情况。我试图测试我在 C++ 中实现的一种方法。我收到一个错误，调用 newInstance 时 Class init 失败。它进一步指出无法加载库：reloc_library[1311]:33 无法找到' *Z13trainFacePKcS0* '......突然它崩溃并抛出异常。它给出了同样的错误。我将不胜感激。问候，阿多尼斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T04:11:04.573

您已经在类中加载了这样的库，该库在类初始化期间加载。

```
static {
    System.loadLibrary("gamescript");
} 
```

从您发布的错误来看，似乎无法找到该库，这意味着它要么不存在于 apk 文件中，要么不在 libs 文件夹中。

# actionscript-3 - Flash AS3 按住按钮

> ID：10760546
> 
> 赞同：0
> 
> 时间：2012-05-25T19:49:17.967
> 
> 标签：actionscript-3, flash, button, actionscript, adobe

我不是 Flash 专家，但我在**AS2**中找到了一种制作“按住”按钮的方法。现在我正在使用 AS3，我希望将此代码转换为**AS3**。有人可以帮忙吗？

```
stop();

function startTimer(mc, conversionTime) {
    mc.onEnterFrame = function() {
        if ((getTimer() / 1000) - conversionTime > 1) {
            delete this.onEnterFrame;
            gotoAndStop(3);
        }
    };
}
button1.onPress = function() {
    var conversionTime:Number = getTimer() / 1000;
    startTimer(this, conversionTime);
    this.onRelease = function() {
        if (this.onEnterFrame != null) {
            gotoAndStop(2);
        }
        delete this.onEnterFrame;
    };
}; 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T20:44:33.693

在 AS3 中，它看起来像这样：

```
mc.addEventListener(MouseEvent.MOUSE_DOWN, _mouseDown);
var myTimer:Timer = new Timer(5000,1);
myTimer.addEventListener(TimerEvent.TIMER_COMPLETE, _buttonPressedEnoughLong);

private function _mouseDown(e:MouseEvent):void 
{
    stage.addEventListener(MouseEvent.MOUSE_UP, _mouseUp);
    myTimer.start();
}

private function _mouseUp(e:MouseEvent):void 
{
    stage.removeEventListener(MouseEvent.MOUSE_UP, _mouseUp);
    myTimer.reset();
}

private function _buttonPressedEnoughLong(e:TimerEvent) : void {
    e.currentTarget.reset();
    // Do stuff
} 
```

您需要按住按钮 5 秒钟，然后事件才会触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:49:43.020

将 ...更改`mc.onEnterFrame = function()`为：

```
mc.addEventListener(Event.ENTER_FRAME, onEvent);

function onEvent(e:Event)
{
  if ((getTimer() / 1000) - conversionTime > 1)
  {
       this.removeEventListener(Event.ENTER_FRAME, onEvent);
       gotoAndStop(3);
  }
} 
```

将 ...更改`button1.onPress = function()`为：

```
button1.addEventListener(MouseEvent.MOUSE_DOWN, onBtnDown);

function onBtnDown(e:MouseEvent)
{
  var conversionTime:Number = getTimer() / 1000;
  startTimer(this, conversionTime);
  function onBtnUp(e:MouseEvent)
  {
    if (this.hasEventListener(Event.ENTER_FRAME))
    {
        gotoAndStop(2);
        this.removeEventListener(Event.ENTER_FRAME, onEvent);
    }
  }
} 
```

# iphone - iPhone iOS 可以用 2 个激光笔和一部 iPhone 创建测距仪吗？

> ID：10760552
> 
> 赞同：1
> 
> 时间：2012-05-25T19:50:09.950
> 
> 标签：iphone, ios, computer-vision, tracking, trigonometry

我正在研究一个可以四处移动的 iPhone 机器人。挑战之一是估计到物体的距离——我不希望机器人撞到东西。我看到一些非常昂贵（约 1000 美元）的激光测距仪，并想用 iPhone 模拟一个。

我有一个或两个摄像头馈送和两个激光指示器。激光指示器安装在相距约 6 英寸的角度。激光相对于相机的角度是已知的。相机之间的角度是已知的。

激光指向相机前方，在相机馈源上形成 2 个点。是否可以通过查看相机图像中点之间的距离来估计到点的距离？

激光形成梯形

```
 /wall    \
   /          \
  /laser mount \ 
```

随着激光支架越来越靠近墙壁，这些点应该彼此远离。

**我说的可行吗？有没有人做过类似的事情？**

我需要一两个摄像头来进行这样的计算吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:04:57.570

如果您只是不想撞到东西，而不是准确了解与它们之间的距离，那么您可以对其进行“破坏”并仅检测两点何时合二为一-这将是已知的距离从对象。

为了计算，可能更便宜的是有四个激光器，两对，每对以不同的角度，一对在另一对之上。那么点的相对差异之间的比较可能会让你计算出一个相当准确的距离。不过，那个数学溢出了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T20:05:22.047

理论上，是的，这样的事情可以工作。谷歌“光条纹”或“结构化光深度测量”对于在更大范围内使用这种想法的一些很好的讨论。

在实践中，您的测量结果可能很粗糙。有许多因素需要考虑：相机内在参数（焦距等）和外在参数将影响点在图像帧中的显示方式。

只有两个采样*点*（注意结构光方法使用*线条*等），环境将存在距离测量困难。可以很好地处理直接垂直于地板（和行进方向）的表面。可能可以检测到坡度和偏角墙壁，但您会发现许多情况会给出模棱两可或不正确的距离测量值。

# ruby-on-rails - 在特定时间范围内按票数对帖子进行排序

> ID：10760553
> 
> 赞同：1
> 
> 时间：2012-05-25T19:50:24.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sorting, date, vote

我目前在我的应用程序中实现了一个投票系统，并且在我看来，我正在使用以下代码按票数对帖子进行排序：

```
 <%= render @posts.sort_by { |post| post.votes.count }.reverse %> 
```

我想按每个帖子的投票数排序，也不希望帖子超过 5 天。如何同时按票数和日期对帖子进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:03:29.767

这是错误的。您应该在数据库端进行所有排序操作。对于此示例，请考虑使用 Arel 创建复杂查询或考虑创建计数器缓存列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T20:04:19.373

您可以为您的帖子模型添加一个范围，例如：

```
scope :five_days_ago, lambda { where("created_at >= :date", :date => 5.days.ago) } 
```

然后只需将您的渲染方法调整为以下内容：

```
<%= render @posts.five_days_ago.sort_by { |post| post.votes.count }.reverse %> 
```

这假设您要保留正在使用的结构。显然，正如其他人所建议的那样，在数据库中完成所有操作是最好的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T20:17:55.213

卢卡索斯是对的。出于至少两个原因，最好将排序委托给数据库：

1.  表现
2.  您可以将更多查询方法链接到它（例如，分页所必需的）。

计数器缓存可能是最好的主意，但对于复杂的查询，让我试一试。在您的 Post 模型中：

```
class << self
  def votes_descending
    select('posts.*, count(votes.id) as vote_count').joins('LEFT OUTER JOIN votes on votes.post_id = posts.id').group_by('posts.id').order('votes_count desc')
  end

  def since(date)
    where('created_at >= ?', date)
  end

end 
```

所以...

```
@posts = Post.votes_descending.since(5.days.ago) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T20:18:02.840

事实上，让数据库进行排序会更好。我会做类似的事情

```
class Post < ActiveRecord::Base
  default_scope :order => 'created_at DESC'
end 
```

那么您将始终对您的帖子进行排序，如果我没记错的话，最后一个应该是您得到的第一个，这样就可以代替您的“反向”呼叫。然后，您可以使用上面发布的范围仅获取 5 天前的帖子。还要检查数据库中 created_at 列上是否有索引。你可以这样做

```
SHOW INDEX FROM posts 
```

db 会比 ruby​​ 快得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T07:15:52.463

我想出了另一种方法，虽然我很感激你的帮助，它可能不是最干净的方法，但我做到了

```
 def most
     range = "created_at #{(7.days.ago.utc...Time.now.utc).to_s(:db)}"
     @posts = Post.all(:conditions => range)
     @title = "All Posts"
     @vote = Vote.new(params[:vote])

     respond_to do |format|
       format.html
       format.json { render :json => @users }
     end
   end 
```

对于我的控制器

创建了 /most :to => 'posts#most' 的路线

并使用我认为的原始代码进行查看。

我知道这不是最好的方法，但我对编码还是很陌生，所以这是我能弄清楚的最好方法。

# android - 如何在安卓中使用 vitamio 播放器？

> ID：10760562
> 
> 赞同：1
> 
> 时间：2012-05-25T19:51:10.930
> 
> 标签：android, vitamio

我想用 vitamio 播放器在 url 中播放一些视频，但我该怎么做。我在手机中安装了 vitamio 播放器。（它说它是默认播放器，但它不播放或打开）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:17:15.073

您是在编写应用程序以使用 Vitamio 作为编解码器包，还是只是想播放视频？如果您想在应用程序中使用 Vitamio 作为视频播放器，您需要从他们的网站下载 Vitamio SDK。玩弄这个演示项目，你就会明白它是如何工作的。

# javascript - 如何使用jQuery找到离当前位置最近的元素

> ID：10760567
> 
> 赞同：14
> 
> 时间：2012-05-25T19:51:23.253
> 
> 标签：javascript, jquery

我有一个包含如下几个部分的文档：

```
<div class='section' id='sec1'>
    lalala
    lalala
    lalala
</div>

<div class='section' id='sec2'>
    lalala
    lalala
    lalala
</div>

<div class='section' id='sec3'>
    lalala
    lalala
    lalala
</div>

<div class='section' id='sec4'>
    lalala
    lalala
    lalala
</div> 
```

我如何抓取最接近`<div.section>`当前滚动位置的位置（大概，这将等同于读者当前正在查看的部分）？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-25T20:01:31.563

您可以使用`$(window).scrollTop()`and`$(el).postion().top`来计算滚动后元素与屏幕顶部的距离。

然后，您可以根据需要使用此信息来操作元素。

这是一个有效的 jsfiddle 示例：http: [//jsfiddle.net/gizmovation/x8FDU/](http://jsfiddle.net/gizmovation/x8FDU/)

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-05-25T19:55:11.200

每当您悬停一个元素时，该`mousemove`事件都会告诉您悬停在哪个元素上。

```
$(document).bind('mousemove', function(e) {
    e.target
    /*
        the target in click/hover events
        is the element that the event was
        triggered on.
    */
}); 
```

一个缺点可能是事实`e.target`会给你最高的元素`z-index`- 最顶层中的那个 - 所以如果你在你的文本上方有一个覆盖，它会给你覆盖而不是文本`div`。

# wpf - WPF IScrollInfo 固定标签的位置

> ID：10760573
> 
> 赞同：1
> 
> 时间：2012-05-25T19:51:58.293
> 
> 标签：wpf, custom-controls

我正在为自定义控件实现 ISrollInfo 接口。简单地说，我在 Canvas 下的自定义控件中有一个标签。当我的自定义控件滚动时，我希望标签“保持原位”。也就是说，无论滚动偏移如何，标签都需要始终可见。

现在，作为测试，我添加了这个示例代码

```
 protected override Size MeasureOverride(Size constraint)
    {
        return new Size(1000, 50);
    }

    protected override Size ArrangeOverride(Size arrangeBounds)
    {
        double x = 50;
        double y = 50;

        label1.Arrange(new Rect(new Point(x, y), new Size(1000, 50)));
        return arrangeBounds;
    } 
```

当我测试控件时（我的控件放在 ScrollViewer 中），标签被隐藏（在我使用滚动条之前和之后）。如果我删除了 ArrangeOverride 的覆盖，标签会在我使用滚动条时出现并滚动。

关于我缺少什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:06:09.600

找到它，我的 ArrangeOverride 在 UserControl 上，我专门只安排标签，画布没有安排（即未设置位置和大小）。现在，由于标签在画布中，因此您看不到它。

# jquery - 如何让这个 jquery ajax 表单接受单个值作为通用对话框工作

> ID：10760576
> 
> 赞同：0
> 
> 时间：2012-05-25T19:52:11.927
> 
> 标签：jquery, asp.net-mvc, jquery-ui-dialog

我有几个链接，单击时会打开一个对话框。

我仍然需要将单独的参数传递给对话框，因为根据其单独的内容，我需要另一个标题、高度、重量、contentUrl 用于加载函数、回调函数来执行更新用户界面的单独函数。

我如何必须重写以下代码才能达到我的目标？

```
 <script type="text/javascript">

        $(document).ready(function () {

            // Does not cache the ajax requests to the controller e.g. IE7/9 is doing that...
            $.ajaxSetup({ cache: false });

            // the div holds the html content
            var $dialog = $('<div></div>')
            .dialog({
                autoOpen: false,
                title: 'generic title',
                height: generic height,
                width: generic width,
                modal: true,
                resizable: false,
                hide: "fade",
                show: "fade",
                close: function (event, ui) {
                    // Clears all input values of the form
                    $("form")[0].reset(); 
                },
                open: function (event, ui) {
                    $(this).load('@Url.Action("Delete")');
                },
                buttons: {
                    "Ok": function () {
                        var form = $('form', this);
                        $.ajax({
                            url: $(form).attr('action'),
                            type: 'POST',
                            data: form.serialize(),
                            cache: false,
                            success: function (result) {

                                if (result.success) {
                                    $dialog.dialog("close");
                                    // Update UI with individual function/callback passed as parameter
                                }
                                else {
                                    // Reload the dialog with the form to show model/validation errors 
                                    $dialog.html(result);
                                }
                            }
                        });
                    },
                    "Close": function () {
                        $(this).dialog("close");
                    }
                }
            });     

            $('#DeleteTemplate').click(function (e) {
                var contentUrl = $(this).attr('href');           

                $dialog.dialog('open');
                return false; 
            });

            $('#CreateTemplate').click(function (e) {
                var contentUrl = $(this).attr('href');             

                $dialog.dialog('open');
                return false; 
            });
        });

        function updateDataGrid() {
            // Pass this function to the dialog as individual function to be executed after the ajax call and result.success 
        }

        function updateTreeView() {
            // Pass this function to the dialog as individual function to be executed after the ajax call and result.success 
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:21:11.010

Try wrapping your $dialog var in a function.

```
function getDialog(title, height, width) {
  return $('<div></div>').dialog({
    // paste all your other dialog code here while inserting the vars that you passed in
  });
} 
```

Then just call this function to build your dialog before you show it in your other click handlers:

```
var $dialog = getDialog('my title', 480, 600);
$dialog.dialog('open'); 
```

Hope that helps!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T22:01:57.353

我花了一些精力来重构我以前的代码：

我将 autoOpen 设置为 true，因此我不需要返回对话框。

可以传递回调，但不需要传递，而是传递 null。

我将此作为解决方案提供，因为我认为它非常好/可扩展。

```
 @Html.ActionLink("Create Template", "Create", "Template", new { id = "CreateTemplate", data_dialog_width = 250, data_dialog_height = 250 })
   @Html.ActionLink("Delete Template", "Delete", "Template", new { id = "DeleteTemplate", data_dialog_width = 250, data_dialog_height = 300 }) 

<script type="text/javascript">

    // Does not cache the ajax requests to the controller e.g. IE7/8/9 is doing that...
    $.ajaxSetup({ cache: false });

    $(document).ready(function () {
        $('#CreateTemplate').click(function (event) { loadDialog(this, event, null); });
        $('#DeleteTemplate').click(function (event) { loadDialog(this, event, updateTreeView); });
    });

    function loadDialog(link, event, updateCallback) {
        event.preventDefault();

        var $title = link.innerHTML;
        var $contenturl = $(link).attr('href');       
        var $dialog = $('<div></div>');
        var $height = $(link).attr('data-dialog-height');
        var $width = $(link).attr('data-dialog-width');        

        $dialog.load($contenturl).dialog({ title:$title, autoOpen:true, modal:true, show:'fade', hide:'fade', width:$width, height:$height });

        // Setup dialog
        $dialog.dialog("option", "buttons", {
            "Submit": function () { 
                    ajaxRequest( $(this), $('form', this),updateCallback );
                },
                "Cancel": function () {
                    $(this).dialog("close");                  
                }           
        });
    }
    // Execute an ajax form request sending data
    function ajaxRequest(dlg, form,updateCallback) {
        $.ajax({ url: $(form).attr('action'), type: 'POST', data: form.serialize(),
            success: function (response) {
                if (response.success) {
                    dlg.dialog("close");
                    // Update UI with individual function/callback passed as parameter
                    if (updateCallback != null)
                      updateCallback();

                }
                else {
                    // Reload the dialog with the form to show model/validation errors 
                    dlg.html(response);
                }
            } // no comma after last parameter                  
        });
    }

    function updateDataGrid() {
        alert('updateDataGrid');
    }

    function updateTreeView() {
        alert('updateTreeView');
    }
</script> 
```

# c++ - 使用opencv提取Kinect的深度图像

> ID：10760577
> 
> 赞同：0
> 
> 时间：2012-05-25T19:52:25.297
> 
> 标签：c++, opencv, kinect

有谁知道使用 OpenCV 和 C++ 提取 Kinect 灰度深度图像的最简单方法是什么？这个领域的任何源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T17:02:14.507

如果您使用 OpenNI SDK，您可以简单地指向缓冲区：

```
//on setup:
xn::DepthGenerator depthGenerator;
xn::DepthMetaData depthMD;
cv::Mat depthWrapper;

//on update loop,
//after context.WaitAnyUpdateAll();
depthGenerator.GetMetaData(depthMD);
depthWrapper = cv::Mat(depthMD.YRes(), depthMD.XRes(), CV_16UC1, (void*) depthMD.Data()); 
```

请注意，它`depthWrapper`是 const 所以你需要克隆它才能操作它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:59:14.967

该[文档](http://docs.opencv.org/doc/user_guide/ug_highgui.html)包含您需要的一切。没有比这更详细的了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T09:20:41.540

你需要做两件事（除了阅读上下文、深度生成器和 Kinect 的初始化）：

*   创建 CV_16U 类型的 Mat。context.WaitOneUpdateAll(depth_map); 湾。Mdepth_original = Mat(h_depth, w_depth, CV_16U, (void*) depth_map.GetData()) c. 复制 Mat，因为它会在下次读取时被破坏： Mdepth_original.copyTo(depth);
*   将深度映射为灰色或彩色。颜色似乎是个好主意（256^3 级），但人眼对亮度变化更敏感。即使有 256 个关卡，您也可以使用 [直方图均衡][1] 技术相当好地映射 10,000 个 Kinect 关卡。最简单的方法是降低精度，只做 I(x, y) = 255.0*z(x, y)/z_range

以下是在 openNI2 中如何实现直方图均衡： [https ://github.com/OpenNI/OpenNI2/blob/master/Samples/Common/OniSampleUtilities.h](https://github.com/OpenNI/OpenNI2/blob/master/Samples/Common/OniSampleUtilities.h)

# sass - 更改 .css 文件的输出目录

> ID：10760578
> 
> 赞同：18
> 
> 时间：2012-05-25T19:52:26.310
> 
> 标签：sass

Ruby 新手（我通常使用 python/django），sass 新手。我只是想配置输出 css 目录选项。

此处相关问题：[更改 compass webby 中生成的 css 文件的输出目录，](https://stackoverflow.com/questions/1597368/changing-the-output-directory-of-the-resulting-css-file-in-compass-webby) 此处：[可能更改不同文件的 sass 罗盘输出文件夹](https://stackoverflow.com/questions/5454444/possible-to-change-the-sass-compass-output-folder-for-different-files)

两者的答案都是更改 config.rb。config.rb 在哪里找到？还有另一种设置选项的方法吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-08-25T06:27:58.067

您可以简单地使用：

```
sass --watch input-dir:output-dir 
```

IE：

```
sass --watch scss:css 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-27T19:03:54.920

`config.rb`特定于 Compass 项目，位于项目的根目录中。如果您使用的是 Compass，您可以`css_dir`根据自己的喜好指定`/`Compass 项目的根目录。

```
css_dir = "/assets/css" 
```

如果你只使用 Sass，你可以在编译时指定输出路径。

```
sass input.scss ../path/to/output.css 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T21:55:58.890

在文本编辑器中打开 config.rb 并将“css_dir”从“stylesheets”更改为“/”（见下文）

```
 http_path = "/"
   css_dir = "/"
   sass_dir = "sass"
   images_dir = "images"
   javascripts_dir = "javascripts" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-17T15:26:51.647

您还可以使用 koala 应用程序（[http://koala-app.com/](http://koala-app.com/)）更改 css 输出目录。我认为这是最简单的方法。1.安装考拉app 2.在考拉界面和referh中运行并添加两个目录。

[![在此处输入图像描述](../Images/22b0ab6d062bf5f15d119a151759561b.png)](https://i.stack.imgur.com/Ugu1m.jpg)

# xml - 使用 XSLT 获取 XML 中指定标记旁边的标记

> ID：10760579
> 
> 赞同：1
> 
> 时间：2012-05-25T19:52:32.330
> 
> 标签：xml, xslt

使用 XSLT，我如何获取与 ? 关联的所有成员名称`tag` `A`？

```
 <letter>
      <tag>0-9</tag> 

      <member>
        <name>011</name>
        <type>Member</type>
      </member>

      <member>
        <name>2314</name>
        <type>Member</type>
      </member> 

    </letter>

    <letter>
       <tag>A</tag>

      <member>
        <name>Asia</name>
        <type>President</type>
      </member>

      <member>
        <name>Artie</name>
        <type>Vice 1</type>
      </member>
    </letter> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:05:33.963

使用 xpath 谓词：

```
//letter[tag='A']/member 
```

# objective-c - 用负值更新 NSRect 大小

> ID：10760583
> 
> 赞同：0
> 
> 时间：2012-05-25T19:52:56.440
> 
> 标签：objective-c, cocoa, nsrect

关于 NSRect 的问题...在 Hillegass 书中，我们正在创建一个 NSRect，我们在其中绘制一个椭圆（NSBezierPath *）。根据我们在视图中鼠标向下并随后拖动的位置，NSRect 的 size.width 和/或 size.height 可能是负数（即，如果我们从右上角开始，拖动左下角 - 两者都是负数）。实际绘制时，系统是否使用我们的负宽度和/或高度来仅定位我们拖动位置的 NSPoint？从而更新 NSRect？如果我们需要 NSRect 的大小，我们应该只使用绝对值吗？

在本章中，作者使用了 MIN() 和 MAX() 宏来创建一个 NSRect。但是，在挑战解决方案中，他们提供了这三种方法来响应鼠标事件：

```
- (void)mouseDown:(NSEvent *)theEvent
{
    NSPoint pointInView = [self convertPoint:[theEvent locationInWindow] fromView:nil];
    // Why do we offset by 0.5? Because lines drawn exactly on the .0 will end up spread over two pixels.
    workingOval = NSMakeRect(pointInView.x + 0.5, pointInView.y + 0.5, 0, 0);
    [self setNeedsDisplay:YES];
}

- (void)mouseDragged:(NSEvent *)theEvent
{
    NSPoint pointInView = [self convertPoint:[theEvent locationInWindow] fromView:nil];
    workingOval.size.width = pointInView.x - (workingOval.origin.x - 0.5);
    workingOval.size.height = pointInView.y - (workingOval.origin.y - 0.5);
    [self setNeedsDisplay:YES];
}

- (void)mouseUp:(NSEvent *)theEvent
{
    [[self document] addOvalWithRect:workingOval];
    workingOval = NSZeroRect; // zero rect indicates we are not presently drawing
    [self setNeedsDisplay:YES];
} 
```

无论潜在的负值如何，此代码都会生成一个成功的矩形。我知道负值仅反映了相对于原点（我们“鼠标按下”的点）的左移。在正确计算我们拖到的 NSPoint 的幕后发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:56:23.120

一个 NSRect 只是定义为一个 NSPoint 和一个 NSSize。NSSize 只是定义为一对 CGFloats，但文档说：

> 通常，宽度和高度的值是非负的。创建 NSSize 结构的函数不会阻止您为这些属性设置负值。但是，如果 width 或 height 的值为负数，则某些方法的行为可能是未定义的。

在上面显示的代码中，幕后绝对没有任何花哨的事情发生。您正在创建一个大小或宽度为负的矩形（workingOval），但实际上并没有在任何地方使用它。

根据您在其他地方使用 workingOval 所做的事情，幕后发生的事情会有所不同。但这将是三个非常简单的事情之一。一些方法将类似 (origin=(30, 40), size=(-10, -20)) 的矩形视为与 (origin=(20, 20), size=(10, 20)) 相同；其他人将其视为无效的矩形；有些人假设他们不测试，只会给你垃圾结果。例如，NSMinX 将返回 30，而不是 10。

# imagemagick - 使用 ImageMagick 将图层添加到 PSD 文件

> ID：10760590
> 
> 赞同：1
> 
> 时间：2012-05-25T19:53:31.037
> 
> 标签：imagemagick, psd

我有很多 JPEG 文件，我想使用 ImageMagick 将它们作为图层添加到 PSD 文件中

我找到了几个相反的脚本，从 PSD 文件中提取图层。我不想要那个。

我只想拍摄几张 JPEG 图片并将它们作为图层添加到 PSD（photoshop）文件中，并将这些图层命名为 JPEG 文件名。我找到了一种使用 ImageMagick 创建合成图像的方法，但我看到的所有示例都创建了 PNG 或 GIF 文件。我需要创建一个 PSD 分层文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:25:00.180

A couple of notes first:

1/ The first layer in a psd file is all the layers merged and you would need to create that first.

2/ For some reason the first layer using the code below drops the first layer e.g image1.png so create a blank layer to use as the first layer.

3/ The layers in my test were renamed to L000001 etc.

The answer to the first part of your question is:

```
convert image1.png image2.png image3.png 
```

But I do not know how to keep the image names as the layer names

# android - printf, logcat and \n

> ID：10760594
> 
> 赞同：3
> 
> 时间：2012-05-25T19:53:45.997
> 
> 标签：android, ios, c, printf, logcat

I have C code that uses prints with something clever like

```
printf("hello ");
// do something
printf(" world!\n"); 
```

which outputs

> hello world!

I want to reuse that code with Android and iOS, but Log.d() and NSLog() effectively add a newline at the end of every string I pass them, so that the output of this code:

```
NSLog(@"hello ");
// do something
NSLog(@"world!\n"); 
```

comes out (more or less) as:

> hello
> 
> world!

I'm willing to replace printf with some macro to make Log.d and NSLog emulate printf's handling of '\n'; any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T21:30:07.807

One solution that might work is to define a global log function that doesn't flush its buffer until it finds a newline.

Here's a (very) simple version in java for android:

```
import java.lang.StringBuilder;

class CustomLogger {
  private static final StringBuilder buffer = new StringBuilder();

  public static void log(String message) {
    buffer.append(message);

    if(message.indexOf('\n') != -1) {
      Log.d('SomeTag', buffer);
      buffer.setLength(0);
    }
  }
}

...
CustomLogger.log("Hello, ");
// Stuff
CustomLogger.log("world!\n"); // Now the message gets logged 
```

It's completely untested but you get the idea.
This particular script has some performance issues. It might be better to check if just the last character is a newline for example.

* * *

I just realized that you wanted this in C. It shouldn't be too hard to port though a standard lib wouldn't hurt (to get stuff like a string buffer).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:53:59.090

For progeny, [this](https://github.com/ys1382/filagree/blob/master/util.c) is what I did: store logged strings in a buffer, and print the part before the newline whenever there is a newline in the buffer.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T01:31:41.397

Yes, the NDK logcat is dumb about it. There are ways to redirect stderr/stdout to logcat, but there are drawbacks (either need to "adb shell setprop" which is only for rooted devices, or a dup() like technique but creating a thread just for that purpose is not a good idea on embedded devices IMHO though you can look further below for this technique).

So I did my own function/macros for that purpose. Here are snippets. In a debug.c, do this:

```
#include "debug.h"
#include <stdio.h>
#include <stdarg.h>

static const char LOG_TAG[] = "jni";

void android_log(android_LogPriority type, const char *fmt, ...)
{
    static char buf[1024];
    static char *bp = buf;

    va_list vl;
    va_start(vl, fmt);
    int available = sizeof(buf) - (bp - buf);
    int nout = vsnprintf(bp, available, fmt, vl);
    if (nout >= available) {
        __android_log_write(type, LOG_TAG, buf);
        __android_log_write(ANDROID_LOG_WARN, LOG_TAG, "previous log line has been truncated!");
        bp = buf;
    } else {
        char *lastCR = strrchr(bp, '\n');
        bp += nout;
        if (lastCR) {
            *lastCR = '\0';
            __android_log_write(type, LOG_TAG, buf);

            char *rest = lastCR+1;
            int len = bp - rest; // strlen(rest)
            memmove(buf, rest, len+1); // no strcpy (may overlap)
            bp = buf + len;
        }
    }

    va_end(vl);
} 
```

Then in debug.h do this:

```
#include <android/log.h>

void android_log(android_LogPriority type, const char *fmt, ...);
#define LOGI(...) android_log(ANDROID_LOG_INFO, __VA_ARGS__)
#define LOGW(...) android_log(ANDROID_LOG_WARN, __VA_ARGS__)
... 
```

Now you just need to include debug.hpp and call LOGI() with a printf-like semantic buffered until a '\n' is encountered (or buffer is full).

This is not perfect though, as if the string generated from a call is longer than the buffer, it will be truncated and output. But frankly, 1024 chars should be enough in most cases (even less than this). Anyway, if this happens it will output a warning so you know about it.

Also note the vsnprintf() is not standard C (but it works in Android NDK). We could use vsprintf() instead (which is standard), but it is unsafe on its own.

======================================================================

Now for the dup() technique, you can look [here](https://stackoverflow.com/questions/9192749/capturing-stdout-stderr-with-ndk/11019905#11019905) ([James Moore](https://stackoverflow.com/users/73046/james-moore) answer).

Then you can get rid of the function above and define your macro as:

```
#define LOG(...) fprintf(stderr, ...) 
```

and you're done.

Advantages:

1.  C/C++ libraries often use stderr for their logs. Using dup is the only way to have their output in logcat without modifying their code (some big ones use hundreds of direct calls to fprintf(stderr, ...))
2.  stderr is standard C used since decades. All standard C library functions related to streams can be used with it. Same for C++, you can even use cerr with << operator. It works since under the hood, it still stderr.
3.  Very long lines not truncated (instead, their are split). A good reason to use a shorter buffer (256 in the example).

Disadvantages:

1.  A thread on its own (though it's an IO only thread, impact is close to nothing)
2.  No log priority value (INFO, WARN, ERROR, etc...) can be choosen during the call. It uses a default one (INFO), so DMMS will always show stderr lines in the same color.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-25T20:04:04.057

You could always just build the string one segment at a time:

```
String message = "Hello";
// Do Something
message += " World!";
Log.v("Example", message); 
```

# silverlight - Silverlight 作为下层 WinRT 平台

> ID：10760596
> 
> 赞同：1
> 
> 时间：2012-05-25T19:53:51.613
> 
> 标签：silverlight, components, themes, windows-8, windows-runtime

两个相互关联的问题：

1.  对于具有适用于每个主要设备平台（iOS、Android、Windows Phone 7 和 WinRT）的应用程序的应用程序套件，Silverlight 是否适合 WinRT 应用程序的“下级”（Mac/7/Vista/XP）版本？

2.  如果是这样（或者为了这样），哪些 Silverlight 组件模拟[Metro 控件](http://msdn.microsoft.com/en-us/library/windows/apps/hh465424.aspx#ui_controls)及其主题，以最大限度地减少使 Silverlight 应用程序与 WinRT 应用程序一致的工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:51:42.080

我不这么认为。Silverlight 没有为您提供与 Metro 风格应用程序真正匹配所需的那种触控支持。您可以使用[NESL](http://archive.msdn.microsoft.com/nesl/Release/ProjectReleases.aspx?ReleaseId=5519)之类的东西或滚动您自己的手势库，但它永远无法真正匹配您从 Metro 风格应用程序中获得的体验类型，当然此时不再是跨平台的。我最接近的方法是在浏览器应用程序中构建一个 Silverlight 全屏，我们在其中推出了我们自己的手势库，但仍然不能令人满意。

Metro 是一种全新的独特设计语言，如果没有从头开始构建的操作系统来支持体验，你会发现它的体验很糟糕，更糟糕的是，你将全程与技术作斗争。

回复评论：绝对可以。例如，请参阅[http://www.flickr.com/windows7](http://www.flickr.com/windows7)。

# php - 使用 RegEx 将带有 html 标记的 URI 列表包装起来

> ID：10760597
> 
> 赞同：0
> 
> 时间：2012-05-25T19:53:53.937
> 
> 标签：php, regex, sed, awk

我有一个这样的 URI 列表：

```
./journal.html
./john-voigt.html
./flower_power28182.html 
```

现在我想对文件进行正则表达式（选择一个：sed/awk/php），结果如下所示：

```
<a href="http://domain.com/journal.html">http://domain.com/journal.html</a><br>
<a href="http://domain.com/john-voigt.html">http://domain.com/john-voigt.html</a><br>
<a href="http://domain.com/flower_power28182.html">http://domain.com/flower_power28182.html</a><br> 
```

可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:55:53.890

```
s/^\.(.*)$/<a href="http:\/\/domain.com$1">http:\/\/domain.com$1<\/a><br>/ 
```

对于赛...

```
sed s_^\.\(.*\)$_<a\ href="http://domain.com\1">http://domain.com\1</a><br>_ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:56:10.363

你为什么不这样做：

```
$Array = array( './journal.html',
                './john-voigt.html',
                './flower_power28182.html');

foreach($Array as $Key => $Link){
    $Link = str_replace('./', '', $Link);
    $Array[$Key] = '<a href="http://domain.com/'.$Link.'">http://domain.com/'.$Link.'</a>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T20:57:11.073

AWK：

```
awk 'BEGIN {url = "http://domain.com"} {sub(/\./, url); print "<a href=\"" $0 "\">" $0 "</a><br>"}' 
```

# jquery - 如果修改了“errorPlacement”，则 JQuery 验证不会为下一个错误更新错误元素。

> ID：10760599
> 
> 赞同：0
> 
> 时间：2012-05-25T19:53:56.527
> 
> 标签：jquery, jquery-validate

工作正常：

```
errorPlacement:
                function(error, element) {
                    error.appendTo( element.parent());                         
                }, 
```

失败：

```
errorPlacement:
                function(error, element) {
                    error.appendTo( element.parent()); 
                    $(element).prop("title", error.text());
                }, 
```

对于第二个片段，我只看到第一个错误。例如，我输入了“必填”和“数字” - 提交表单 -显示**必填错误**- 填写*字母*-显示**必填错误**。

配音errorPlacement我可以看到`error`DOM总是一样的。

提前感谢您的帮助！

PS：**目标**：我想将错误显示为工具提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:38:34.180

这个插件可以帮助你：http: [//jquery.dop-trois.org/walidate/](http://jquery.dop-trois.org/walidate/)

可以定义很多回调函数。例如：如果 sth 无效或有效..

所以你可以开发自己的工具提示；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T09:56:02.687

做

`element.attr("title", error.text());`

代替

`$(element).prop("title", error.text());`

元素已经是 jquery validate 插件中的 jquery 元素：http: [//jqueryvalidation.org/validate](http://jqueryvalidation.org/validate)

# meteor - 你如何进行流星测试？

> ID：10760601
> 
> 赞同：14
> 
> 时间：2012-05-25T19:54:01.847
> 
> 标签：meteor

我对 livedata 进行了一些更改，并希望运行 livedata_test。如何使用 tinytest 运行 livedata_test？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T00:51:11.190

在进行了一些挖掘之后，我发现您可以从克隆的流星源的包目录中运行流星。

来源：[SFJS #23：函数式编程和 Meteor.js](http://youtu.be/HAcN3JyQoyY?t=1h36m56s)（总的来说，这实际上是一个很棒的视频）。

1.  切换到`... /meteor/packages/`
2.  跑`meteor`
3.  在浏览器中导航到`http://0.0.0.0:3000/`。

可以通过导航到特定的包目录并按照上面的步骤 2 和 3 运行单个包的测试。

快速： ![流星测试套件](../Images/3c0afb699db7e8dbe8c8e5b49f33a75c.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T15:33:23.417

确保从工作 git 目录运行 dev“meteor”脚本可能毫无价值。简单地运行流星将默认为您路径中的系统流星（如果您安装了流星），并且不会对您所做的测试/核心代码进行任何更改。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-22T17:06:57.233

运行`meteor test-packages`，然后将浏览器指向`http://localhost:3000`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-26T06:33:08.197

从要测试的包目录中运行meteor，并在浏览器中查看结果。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-06-27T20:21:50.043

Velocity 被选为流星 1.0 的官方测试框架。该公告已在上[一次流星开发商店（2014 年 6 月）上发布](http://youtu.be/kwFv1mXrLWE?t=40m50s)。

使用速度开发的软件包：

*   [速度](https://atmospherejs.com/package/velocity)（测试运行者）
*   [茉莉花单元](https://atmospherejs.com/package/jasmine-unit)（茉莉花语法）
*   [mocha-web-velocity](https://atmospherejs.com/package/mocha-web-velocity)（用于测试集合）
*   [velocity-html-reporter](https://atmospherejs.com/package/velocity-html-reporter)（在浏览器中查看测试）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-17T22:42:02.750

```
git clone git://github.com/meteor/meteor.git
cd meteor
./meteor test-packages <package> 
```

然后导航到[http://localhost:3000/](http://localhost:3000/)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-04-30T22:10:30.127

您必须将驱动程序包传递给它。这就是我运行它们的方式：

`meteor test --driver-package practicalmeteor:mocha`

然后查看应用程序，您应该会看到带有测试结果的 UI。

# java - 在线存储java对象

> ID：10760602
> 
> 赞同：3
> 
> 时间：2012-05-25T19:54:03.530
> 
> 标签：java, io

这是我关于堆栈溢出的第一个问题，希望你能帮助我。我已经在网上进行了一些搜索，但我一直在寻找有关使用 BufferedReader 读取文本文件或从 Internet 上的文件中读取字节的教程或答案。理想情况下，我希望在我的服务器上有一个名为“http://ascistudent.com/scores.data”的文件，该文件存储我制作的游戏玩家制作的所有分数对象。

该游戏是一个简单的“方块掉落”游戏，您尝试让 3 个相同的方块接触来增加分数。当时间用完时，从文件中加载乐谱，它们的乐谱被添加到乐谱对象列表的正确位置。之后，分数将再次保存到同一文件中。

目前我得到一个异常，突出显示行上的**java.io.EOFException ：**

```
URL url   = new URL("http://ascistudent.com/scores.data");
InputStream is = url.openStream();
Score s;
ObjectInputStream load;
//if(is.available()==0)return;
load = new ObjectInputStream(is); //----------java.io.EOFException
while ((s = (Score)load.readObject()) != null){
    scores.add(s);
}
load.close(); 
```

我怀疑这是由于文件为空。但是当我捕捉到这个异常并告诉它使用以下代码写入文件（更改分数列表之后）时，似乎没有写入任何内容（异常继续发生。）

```
URL url  = new URL("http://ascistudent.com/scores.data");
URLConnection ucon = url.openConnection();
ucon.setDoInput(true);
ucon.setDoOutput(true);
os = ucon.getOutputStream();
ObjectOutputStream save = new ObjectOutputStream(os);
for(Score s:scores){
    save.writeObject(s);    
}
save.close(); 
```

我究竟做错了什么？谁能指出我正确的方向？

非常感谢，卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:00:41.623

除非该连接是可写的，否则您不能在本机上写入 URLConnection。

我的意思是，除非对方接受您要发送的内容，否则您不能直接写入 URL。这在 HTTP 中是通过 POST 请求完成的，该请求将来自客户端的数据附加到请求本身。

在服务器端，您必须接受此发布请求，获取数据并将其添加到 scores.data。您不能直接写入文件，您需要在网络服务器中处理请求，例如：

```
http://host/scores.data 
```

提供数据，同时

```
http://host/uploadscores 
```

应该是接受 POST 请求、处理它并远程修改 score.data 的不同 URL

# javascript - 为什么我的链接不会触发 jQuery.click 事件？

> ID：10760604
> 
> 赞同：1
> 
> 时间：2012-05-25T19:54:10.893
> 
> 标签：javascript, jquery, ajax

所以，我今天涉足一些 jQuery，我遇到了一个问题。我有一个页面，其中包含以下格式的多个链接：

```
<a class="a_link" id="a_id<#>" href="#">Click me</a> 
```

`<#>`在运行页面的 PHP 的 for 循环中生成的数字在哪里。在页面的顶部，我有一个脚本标签链接到 jQuery 1.7.2 的 Google CDN 最小化，以及一个 id 为“form_map”的 div。显示所有链接后，我有以下脚本：

```
<script type="text/css">
    $(document).ready(function(){
        $('.a_link').click(function(){
            var c_id = $(this).attr('id');
            var task = 'read';
            var ajax_url = 'engine.php';
            alert('link pressed for id: '+c_id);
            $.get({
                url: ajax_url, 
                data: { 'task':task, 'c_id':c_id }, 
                success: function(res){ $('#form_map').val(res); } 
            });
        });
    });
</script> 
```

忽略所有不稳定的 Ajax 调用（它们似乎也无法正常工作），当我单击一个链接时，什么也没有发生。它甚至不运行脚本。我通过设置断点并添加警报对此进行了测试。似乎没有什么能触发这一点。

关于我做错了什么有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T19:56:58.553

采用：

```
<script type="text/javascript"> 
```

代替：

```
<script type="text/css"> 
```

也使用：

```
$('#form_map').html(res); 
```

代替

```
$('#form_map').val(res); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T19:58:29.973

您可能需要修复开始标签

```
<script type="text/css"> 
```

到

```
<script type="text/javascript"> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T19:56:03.763

您需要在传递给 .click() 的函数末尾返回 false。

```
$('.a_link').click(function() {
  // Your AJAX stuff here.
  return false;
}); 
```

返回 false 会阻止链接继续正常工作。

# c++ - 如何使用带有智能指针的模拟对象

> ID：10760608
> 
> 赞同：1
> 
> 时间：2012-05-25T19:54:29.943
> 
> 标签：c++, mocking, shared-ptr

我想使用模拟对象来测试使用 shared_ptr 指针的类。

它喜欢 ，

```
struct MyInterface {
    // public functions
};

class MyClass {
public:
    MyClass (shared_ptr<MyInterface> handle) : m_handle(handle) {}
    ~MyClass() {}
   // ...
private :
   shared_ptr<MyInterface> m_handle;
} 
```

当我测试 MyClass 时，我将一个模拟对象传递给它。

```
struct NullDeleter {template<typename T> void operator()(T*) {} };

TMockObject<MyInterface> * mock = new TMockObject<MyInterface>();
shared_ptr<MyInterface> handle((MyInterface*)(*mock), NullDeleter());

MyClass myClass(handle);
delete mock; 
```

问题是我在创建共享指针时必须使用 NullDeleter，否则，mock 将作为 MyInterface 被删除，这会导致错误。

有没有更好的设计呢？

谢谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:05:33.303

将`virtual`析构函数添加到`MyInterface`，然后当您删除 (abstract)`MyInterface`时，也会调用所有子类析构函数。

```
struct MyInterface {
    virtual ~MyInterface() { }
    // public functions
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T21:21:42.803

如果我能理解你想要做什么并且我不犯错误，我更喜欢在 myClass 类中使用方法来检查参数的正确值。这意味着，您应该在将参数传递给类构造函数之后，提供另一种方法来检查该值。

# python - Python 强制 dict 条目为 utf-8

> ID：10760609
> 
> 赞同：3
> 
> 时间：2012-05-25T19:54:31.870
> 
> 标签：python, unicode, utf-8, dictionary

我花了一个下午的大部分时间试图将字典对象修补为 utf-8 编码来代替 unicode。我正在尝试找到扩展字典对象并确保它的条目、键和值都是 utf-8 的最快和最佳性能的方法。

这是我想出的，它可以完成工作，但我想知道可以进行哪些改进。

```
class UTF8Dict(dict):
    def __init__(self, *args, **kwargs):
        d = dict(*args, **kwargs)
        d = _decode_dict(d)
        super(UTF8Dict,self).__init__(d)
    def __setitem__(self,key,value):
        if isinstance(key,unicode):
            key = key.encode('utf-8')
        if isinstance(value,unicode):
            value = value.encode('utf-8')
        return super(UTF8Dict,self).__setitem__(key,value)

def _decode_list(data):
    rv = []
    for item in data:
        if isinstance(item, unicode):
            item = item.encode('utf-8')
        elif isinstance(item, list):
            item = _decode_list(item)
        elif isinstance(item, dict):
            item = _decode_dict(item)
        rv.append(item)
    return rv

def _decode_dict(data):
    rv = {}
    for key, value in data.iteritems():
        if isinstance(key, unicode):
            key = key.encode('utf-8')
        if isinstance(value, unicode):
            value = value.encode('utf-8')
        elif isinstance(value, list):
            value = _decode_list(value)
        elif isinstance(value, dict):
            value = _decode_dict(value)
        rv[key] = value
    return rv 
```

改善以下任何一项的建议将非常有帮助：

*   表现
*   覆盖更多边缘情况
*   错误处理

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T20:21:19.243

I agree with the comments that say that this may be misguided. That said, here are some holes in your current scheme:

1.  `d.setdefault` can be used to add unicode objects to your dict:

    ```
    >>> d = UTF8Dict()
    >>> d.setdefault(u'x', u'y') 
    ```

2.  `d.update` can be used to add unicode objects to your dict:

    ```
    >>> d = UTF8Dict()
    >>> d.update({u'x': u'y'}) 
    ```

3.  the list values contained in a dict could be modified to include unicode objects, using any standard list operations. E.g.:

    ```
    >>> d = UTF8Dict(x=[])
    >>> d['x'].append(u'x') 
    ```

*Why* do you want to ensure that your data structure contains only utf-8 strings?

# node.js - 在生产中使用 MemoryStore

> ID：10760620
> 
> 赞同：120
> 
> 时间：2012-05-25T19:55:31.330
> 
> 标签：node.js

今天我第一次在“生产”模式下运行我的 Node.js 应用程序并收到以下警告：

```
Warning: connection.session() MemoryStore is not
designed for a production environment, as it will leak
memory, and obviously only work within a single process. 
```

我只需要运行一个进程，但我应该使用什么来代替？我希望我的会话驻留在 RAM 中以便快速访问。我还希望能够通过简单地关闭 Node 应用程序来丢弃所有会话。

仅仅为了这个简单的任务安装 Redis、MongoDB 或其他数据库似乎有点过头了。我也不明白为什么 Node 中不应该真正使用 MemoryStore？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-05-25T21:22:54.770

好的，在与 Connect 开发人员交谈后，我得到了更多信息。这里有两件事被认为是内存泄漏：

1.  JSON 解析的问题，在最近的版本中已经修复
2.  如果用户从不访问过期会话，则没有清理它们的事实（即唯一的清理是访问时）

解决方案似乎相当简单，至少这是我打算做的：使用 setInterval 定期清理过期的会话。MemoryStore 提供 all() 来获取列表，我们可以使用 get() 来强制读取，从而使它们过期。伪代码：

```
function sessionCleanup() {
    sessionStore.all(function(err, sessions) {
        for (var i = 0; i < sessions.length; i++) {
            sessionStore.get(sessions[i], function() {} );
        }
    });
} 
```

现在只需通过 setInterval() 定期调用 sessionCleanup，您就可以对过期会话进行自动垃圾收集。没有更多的内存泄漏。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2016-05-04T08:49:25.020

因此，对此的公认答案是 [edit: was] 几乎是一种 hack，而其他人只是建议使用我认为过于矫枉过正的数据库。

[我遇到了同样的问题，只是用cookie-session](https://github.com/expressjs/cookie-session)替换了 express- session 。

为此，只需安装`cookie-session`：

```
npm install cookie-session 
```

然后在您的 中`app.js`，找到`express-session`正在使用的位置并替换为`cookie-session`.

```
app.use(require('cookie-session')({
    // Cookie config, take a look at the docs...
})); 
```

你可能需要改变一些其他的东西，对我来说这是一个简单的交换-鲍勃-你的叔叔-没有伤害-完成。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-05-25T20:36:19.323

MemoryStore 仅用于（快速）开发模式，因为如果您的应用程序重新启动（进程死亡），您将丢失所有会话数据（驻留在该进程的内存中）。

如果您不想使用数据库，请改用加密的 cookie 存储。

[http://www.senchalabs.org/connect/cookieSession.html](http://www.senchalabs.org/connect/cookieSession.html)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-09-22T11:31:44.667

该模块旨在处理内存泄漏问题。 [https://www.npmjs.com/package/session-memory-store](https://www.npmjs.com/package/session-memory-store)

接受的答案可能没问题。但是，由于这个问题在搜索结果列表中显示很高，我想我会包括这个，以防它帮助其他人。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-05-25T20:06:13.183

我认为网络上的共识是正确的方法是确实为此使用数据库，但如果你确定你不想这样做，那么禁止警告 - 警告不是法律。

但是，由于您和我都同意内存泄漏是一个真正的问题，因此很难证明说 redis 是矫枉过正，因为它会解决您的问题。

> 我也不明白为什么在 Node 中不应该真正使用 MemoryStore

这是一个很好的观点 - 但我会说节点本身只是最近才*准备好生产*。有些人根本不同意它的概念。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-09-05T05:45:37.570

另一种方法是使用 Redis 或 Mongo 作为存储。使用 Mongo，您可以使用[express-session-mongo](https://github.com/davglass/express-session-mongo)模块。

建议使用索引选项删除过时的会话：

```
var MongoStore = require('express-session-mongo');
app.use(express.session({ store: new MongoStore() }));

db.sessions.ensureIndex( { "lastAccess": 1 }, { expireAfterSeconds: 3600 } ) 
```

由于数据库本身会删除陈旧的会话，因此 Express 会话不需要自己处理清理工作。

**编辑**：您似乎需要拥有自己的“lastAccess”字段。当您访问它时，您会自己更新该字段。检查 MongoDB 文档[过期数据](http://docs.mongodb.org/manual/tutorial/expire-data/) [http://docs.mongodb.org/manual/tutorial/expire-data/](http://docs.mongodb.org/manual/tutorial/expire-data/)

**编辑2**：

现在变成`db.sessions.createIndex( { "createdAt": 1 }, { expireAfterSeconds: 3600 } )`

用于检查此字段的 Mongo 后台线程每 60 秒运行一次。所以删除文件的时间并不准确。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-07-25T07:50:18.767

对于那些在使用 Redis 时遇到问题的人，请尝试以下方法 - 希望这会有所帮助。

我将 Redis 用于 DEV 和 PROD，并针对 Express v4。在 Windows 上，我使用的是轻量级的 MSOpenTech Redis v3.0 工具集，否则，我只使用 Heroku Redis 插件。让它通过 Node 工作并不太难 - 到目前为止......

```
var session = require('express-session');

. . .

var RedisStore = require('connect-redis')(session);

var redisClient = require('redis').createClient(process.env.REDIS_URL);

var redisOptions = { 
        client: redisClient, 
        no_ready_check: true,
        ttl: 600,
        logErrors: true
};

var redisSessionStore = new RedisStore(redisOptions);

app.use(session({
    store: redisSessionStore,
    secret: 'Some.Long.Series.of.Crazy.Words.and.Jumbled.letter.etc',
    resave: true,       
    saveUninitialized: true 
})); 
```

祝你好运！

附言。我只是重新阅读了原始查询并注意到了这一点 - 抱歉！

> 仅仅为了这个简单的任务安装 Redis、MongoDB 或其他数据库似乎有点过头了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-01T20:45:12.953

如果您使用 OSX，请使用

```
brew install memcached 
```

如果是Linux

```
apt install memcached 
```

解决会话消息，因为 de app 可以连接到 127.0.0.1:11211 memcache 服务。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-06T04:40:47.010

采用

```
import createMemoryStore from "memorystore";
...
// Memory store
const MemoryStore = createMemoryStore(session);
app.use(session({
    ...
    store: new MemoryStore({
        checkPeriod: 86400000 // prune expired entries every 24h
    }),
    ...
})) 
```

解决我的问题

# c# - 是否可以在 wpf 弹出窗口中放置彩色背景？

> ID：10760623
> 
> 赞同：5
> 
> 时间：2012-05-25T19:55:44.030
> 
> 标签：c#, wpf, xaml, background, popup

有没有办法在 XAML 中的 WPF 弹出窗口中放置背景颜色。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T20:03:36.913

WPF`Popup`没有默认的视觉外观。*它只是需要弹出*的内容的占位符。

只需`Popup`包含一个具有属性的项目并将其设置为所需的颜色，如[Popup 类](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup.aspx)文档`Background`中的此示例所示。

```
<Popup Name="myPopup">
    <TextBlock Name="myPopupText" 
               Background="LightBlue" 
               Foreground="Blue">
        Popup Text
  </TextBlock>
</Popup> 
```

# mercurial - Mercurial：如何使 Repository1 跟踪 Repository0 但仅推送选择性的某些标记的修订/变更集

> ID：10760625
> 
> 赞同：0
> 
> 时间：2012-05-25T19:55:55.903
> 
> 标签：mercurial

使用 Mercurial。在私人克隆中工作，进行更改，推动掌握。等等，没关系。

（顺便说一句，我熟悉许多版本控制系统，从经典的 SCCS、RCS、CVS、SVN 到 DVCS，如 BitKeeper、Git、Mercurial，对 Monotone、Darcs、Bzr 非常熟悉。不太熟悉Perforce，......我只是为那些可能能够解释系统之间的等价物和相似性的人提到这一点。）

不幸的是，该项目的其他成员认为我签到太频繁了。我使用“尽早且经常检查”的方法，有时检查的频率超过每半小时一次。他们不想在日志中看到这么多签入消息。

不是问题：现在，我已经养成了在分支上进行大部分更改的习惯（尽管 hg 缺少追溯分支），当我将任务分支合并回主干时总结所有更改。hg log -b default 允许他们过滤掉我的任务分支，并且在合并消息有意义时可以正常工作。这不是我的问题。

不是问题：同样，我知道如何使用历史编辑等来删除我的细粒度变更集，以便唯一被推送的变更集是粗粒度的。（虽然，顺便说一句，我经常发现最简单的做法是移动 .hg 目录。）历史编辑很烦人，但我可以做到。

我的问题：我的问题是： *我*想跟踪我的细粒度变更集和日志消息，即使我没有将它们推送到项目主存储库。问：我该怎么做？

即我如何保持两个存储库相互跟踪，但不将我所有的更改推送到主库？最好不要推送标签更改。（顺便说一句，我更喜欢说“标记修订集”。变更集听起来太像补丁了。）

我现在这样做的方式是拥有 a) 项目主仓库 b) 我的个人主仓库，以及所有细粒度的更改 c) 一个或多个工作区

在哪里

a）克隆项目主仓库以获取工作区（使用 hg clone，是的，我知道）

b）在工作区克隆中使用细粒度签入工作（我知道这一点）

c) 从工作区克隆推送到我的个人主人

d) 并且，当需要推送到主服务器时，编辑历史记录并推送它。

两个烦恼：

1）从工作区克隆合并或推送到我的个人主库时发生冲突 - 更准确地说，是从主存储库与编辑过的历史合并以删除细粒度签入到我的个人主库时的冲突，并保留了细粒度签入。

2）我想把推送给项目主的东西记录在我的个人主里。

--

一个非常简单的例子。

一个任务分支，带有细粒度的签入。

```
o  changeset:   1022:
|  branch:      default
|  parent:      1017
|  parent:      1021
|  summary:     Merged task branch onto main, default, branch, with changes to FOO and BAR
|
o    changeset:   1021
|\   branch:      task-branch
| |  parent:      1020
| |  summary:     Merged default branch to task-branch, with changes to FOO and BAR
| |
| o  changeset:   1020
| |  branch:      task-branch
| |  parent:      1018:
| |  summary:     yet another fine grain checkin on a branch changing BAR for a second time
| |
o |  changeset:   1019
| |  branch:      task-branch
| |  parent:      1018:
| |  summary:     yet another fine grain checkin on a branch changing FOO
| |
o |  changeset:   1018
| |  branch:      task-branch
| |  parent:      1017
| |  summary:     yet another fine grain checkin on a branch changing BAR a first time
| |
|/
o  changeset:   1017
|  branch:      default
|  summary:     some other changeset on the default branch, i.e. trunk
| 
```

已编辑的历史记录，被推送到项目主控

```
o  changeset:   1018: ...changed checksumm because checksum seems to include history
|  branch:      default
|  parent:      1017
|  summary:     Merged task-branch onto main, default, branch, with changes to FOO and BAR. 
|               Removed task-branch-history from what got pushed to project repo, 
|               although may still be in personal repo
|
o  changeset:   1017
|  branch:      default
|  summary:     some other changeset on the default branch, i.e. trunk
| 
```

问题是，当我尝试合并更新的项目主控时，可能看起来像

```
o  changeset:   1019
|  branch:      default
|  parent:      1018
|  summary:     again, some other changeset on the default branch, i.e. trunk
|
o  changeset:   1018: ...changed checksumm because checksum seems to include history
|  branch:      default
|  parent:      1017
|  summary:     Merged task-branch onto main, default, branch, with changes to FOO and BAR. 
|               Removed task-branch-history from what got pushed to project repo, ]
|               although may still be in personal repo
|
o  changeset:   1017
|  branch:      default
|  summary:     some other changeset on the default branch, i.e. trunk
| 
```

即使项目主文件的变更集 1018 和个人主文件中的 1022 在文件内容方面完全相同，我也会遇到冲突。

我尝试不更改被推送的合并更改中的注释。没有帮助，至少不可靠。

我想知道变更集中是否包含完整的历史记录。

我还想知道是否有一些合并工具可以识别相同的文件，即使不同的历史和日志消息也是如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T01:40:52.720

一般来说，任何涉及编辑历史的工作流程都不会很好地工作。这不是预期的工作模式，也没有努力让它正常工作。

对您来说更好的选择可能是：

1.  版本化的Mercurial Queues ( `hg qinit --create-repo`) 允许您在单个补丁上进行多次提交迭代。你可以在你的私人补丁仓库中获得完整的历史记录，而他们只会得到`qfinish`完整的 ed。
2.  与其合并回您的任务分支并编辑历史记录，不如将更改重新应用为单个提交并推送。在您的示例中`hg diff -r 1017 -r 1021 | hg import`，它将创建一个新的提交 (1022)，它是所有更改的总和 1018::1021，包括在内。 *它*应该干净地合并并且可以推送，而无需将您的任何变更集推`task-branch`送给他们。你甚至可以`hg commit --close-branch`在任务分支上
3.  告诉你的同事 STFU。;) 高变更集粒度是一种很好的做法，它们应该适应。

此外，请考虑为您的任务分支使用书签而不是命名分支。同样，新的[阶段](http://www.selenic.com/mercurial/hg.1.html#phase)功能可以在您的任务分支中标记变更集（无论是书签分支还是旧式命名分支），`secret`这样它们就不会被意外推送。

# c# - 抛出本地化的 ValidationException

> ID：10760626
> 
> 赞同：0
> 
> 时间：2012-05-25T19:56:02.667
> 
> 标签：c#, validation

我正在创建一个自定义属性验证，它应该在抛出 ValidationException 时使用指定资源文件中的错误字符串。我是否正确假设如果我抛出异常并且没有在参数中指定错误字符串，它应该使用我在构造函数中指定的 ErrorMessageResourceName 和 ErrorMessageResourceType ？

```
using System;
using System.ComponentModel.DataAnnotations;
using System.Text.RegularExpressions;

namespace OurProduct.Util
{
    [AttributeUsage(AttributeTargets.Field | AttributeTargets.Property, AllowMultiple = false, Inherited = true)]
    public class UniquenessAttribute : ValidationAttribute
    {
        public UniquenessAttribute()
        {
            ErrorMessageResourceName = "EmailUniqueError";
            ErrorMessageResourceType = typeof (Resources.OurThing);
        }

        protected override ValidationResult IsValid(object value)
        {
            throw new ValidationException();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:11:10.480

以下应该可以工作，提供`OurThing`指向生成的强类型资源类的点，用于查找本地化字符串等，并且`"EmailUniqueError"`是此类的静态属性之一：

```
 public class UniquenessAttribute : ValidationAttribute
    {
        public UniquenessAttribute()
        {
            ErrorMessageResourceName = "EmailUniqueError";
            ErrorMessageResourceType = typeof (Resources.OurThing);
        }

        protected override ValidationResult IsValid(object value, ValidationContext validationContext)
        {
            if (failure) // to implement
                return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));
            ...
        }
    } 
```

还要确保在进行测试时验证所有属性（例如，如果使用[TryValidateObject](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validator.tryvalidateobject.aspx) ，请确保最后一个参数设置为 true）。

# php - 通过 PHP 从 MySQL 获取 100K 行时的奇怪行为

> ID：10760632
> 
> 赞同：1
> 
> 时间：2012-05-25T19:56:37.533
> 
> 标签：php, mysql, large-data-volumes

在这里寻找一些想法......我有一个 MySQL 表，其中包含 100K 行测试数据。

我正在使用 PHP 脚本从该表中获取行，在这个测试案例中，该脚本正在获取所有 100,000 行（对大型数据集进行一些分析和优化）。

我连接到数据库，并执行一个无缓冲的查询：

```
$result = mysql_unbuffered_query("SELECT * FROM TestTable", $connection) or die('Errant query:  ' . $query); 
```

然后我用以下方法迭代结果：

```
if ($result) {
    while($tweet = mysql_fetch_assoc($result)) {
        $ctr++;

        if ($ctr > $kMAX_RECORDS) {
            $masterCount += $ctr;
            processResults($results);
            $results = array();
            $ctr = 1;
        }

        $results[] = array('tweet' => $tweet);
    }

    echo "<p/>FINISHED GATHERING RESULTS";
}

function processResults($resultSet) {
    echo "<br/>PROCESSED " . count($resultSet) . " RECORDS";
} 
```

$kMAX_RECORDS = 40000 现在，所以我希望看到如下输出：

> 已处理 40000 条记录
> 已处理 40000 条记录
> 已处理 20000 条记录
> 
> 已完成收集结果

但是，我一直看到：

> 已处理 39999 条记录
> 已处理 40000 条记录
> 
> 已完成收集结果

如果我在 $ctr++ 之后立即添加 $ctr 的输出，我会得到完整的 100K 记录，所以在我看来，这似乎是某种时间问题或使用 MYSQL_FETCH_ASSOC 从后端获取数据的问题。

在相关的说明中，while 循环中的代码在那里，因为在像这样分解 $results 数组之前，while 循环只会在大约 45000 条记录（每次都在同一个地方）时结束。这是由于我错过了某个地方的设置吗？

感谢您的任何意见......只需要一些关于在哪里寻找答案的想法。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:59:09.173

您正在构建一个结果数组，并计算该新数组的成员。所以是的，在获取第一行之后，您会得到“1 个结果”，然后是“2 个结果”，等等……

如果您想获得预期的总行数，您需要使用[`mysql_num_rows()`](http://php.net/mysql_num_rows)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:13:41.310

当您开始查看结果时，您的结果`$ctr`没有任何价值，并且第一次递增会将其评估为 0。但是当您到达时，`$kMAX_RECORDS`您将其重置为 1 而不是 0。但是我不知道为什么您在第一次调用时看到少 1 行`processResults()`. 我觉得应该再来一张。

至于缺少最后 20000 行，请注意您`processResults()`仅在`$ctr`超过后才运行`$kMAX_RECORDS`

# clearcase - 撤消交货 n 透明箱？

> ID：10760636
> 
> 赞同：3
> 
> 时间：2012-05-25T19:56:42.377
> 
> 标签：clearcase, clearcase-ucm

有没有办法在完成后撤消 Clearcase 交付？我看到一个帖子很接近，但它仍在发送中。

我想撤消已完成的交付（如果可能）；它是从子流传递到父流的，我不希望它在那里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T20:20:08.557

交付完成后，在交付期间创建的所有版本都记录在以 . 开头的特殊 UCM 活动中`deliver.xxx`。

您可以尝试使用[cSet.pl perl 脚本](https://www.ibm.com/developerworks/rational/library/05/0927_bellagio/)来撤消交付活动。
它将创建新版本，这将取消交付刚刚创建的版本。

```
 ccperl cset.pl -undo deliver.xxxx 
```

# ios - 如果缺少“添加新设备”按钮，我如何注册 iPad 设备（供测试人员使用）？

> ID：10760644
> 
> 赞同：1
> 
> 时间：2012-05-25T19:57:30.393
> 
> 标签：ios, ipad, udid

“管理设备”页面（[https://developer.apple.com/ios/manage/devices/index.action](https://developer.apple.com/ios/manage/devices/index.action)）没有“添加新设备”按钮。你知道为什么，我能做什么吗？

谢谢。

PS：这个（未回答的）问题涉及同样的问题：[Add Devices to Provisioning Profile?](https://stackoverflow.com/questions/10561214/add-devices-to-provisionning-profile)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:09:26.413

您登录的用户不是管理员用户，并且该用户无权添加设备，或者您已用尽添加 100 台设备的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:06:37.363

你在使用 Safari 吗？我遇到过其他网络浏览器有时看起来可以正常工作的问题，但实际上并没有。显然，我假设您没有用完最多 100 台设备，并且您拥有所有必需的证书。

# java - 使用 Spring bean 在 JSF 1.2 中模拟 jsf 2.0 视图范围

> ID：10760654
> 
> 赞同：3
> 
> 时间：2012-05-25T19:59:13.123
> 
> 标签：java, spring, jsf, javabeans

我正在使用 JSF 1.2 在 WAS 7 之上将 portlet 部署到 WebSphere Portal Server 6.1 的项目上工作。由于各种合同/政治原因，我们坚持使用 JSF 1.2。

然而。我们在整个应用程序中使用 Spring bean 来获取 AoP 日志记录。

我们不能使用 JSF 2.0 有点烦人。特别是，视图范围非常适合我们的应用程序。这将是一个使用率很高的站点，并且将所有页面 bean 保留在会话范围内是浪费的，我相信稍后会引起我们非功能测试团队的注意。

我突然想到，我可以通过使用 Spring 的自定义范围和自定义 JSF 组件来模拟 View Scope，该组件仅维护由 Spring 范围设置的活动 bean 的映射并将此组件附加到我们的页面上。与可以在此映射中找到 bean 的自定义变量解析器一起，我们应该能够模拟视图范围

（我们的旅程只有四页，但每一页都有几个回传到同一页）

这种方法听起来如何？我想确保在向我的项目同事介绍此内容并开始撕开我们已经编写的 bean 代码之前，我不会以某种方式自取其辱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T20:07:05.617

不确定 Spring，但对于 JSF 1.2 托管 bean，[Tomahawk](http://myfaces.apache.org/tomahawk/) [`<t:saveState>`](http://myfaces.apache.org/tomahawk-project/tomahawk12/tagdoc/t_saveState.html)是让 JSF 1.2 请求范围 bean 的行为（几乎）与 JSF 2.0 视图范围 bean 完全相同的方式。差不多，因为在 JSF 2.x 中，视图的销毁和状态保存的效率更高一些。但效果最终是一样的。

您需要做的就是在视图中的其他位置通过该标记引用 bean：

```
<t:saveState value="#{bean}" /> 
```

# asp.net-mvc-3 - 部署实体框架代码优先数据库

> ID：10760657
> 
> 赞同：1
> 
> 时间：2012-05-25T19:59:27.023
> 
> 标签：asp.net-mvc-3, sql-server-2008, entity-framework-4.1, ef-code-first

我有一个使用 Entity Framework (4.3.1) Code First 数据库的 ASP.NET MVC 3 应用程序。现在我想创建一个全面的 zip 文件，其中包含数据库、Visual Studio 2010 生成的应用程序包和一个脚本，用于将所有内容部署到带有 IIS7 的 Windows 2008 服务器和带有准备好的（但为空的）数据库的 SQL Server 2008。

我预计应用程序包的部署不会有任何问题，但我不确定在部署数据库时使用什么方法。目标环境已经有一个分配给我的空数据库，但我被告知删除和创建数据库很好。

根据我的阅读，我可以将 .mdf 和 .ldf 文件直接复制到服务器，然后将连接字符串设置为指向该特定文件，但这种方法会忽略已经创建的数据库（或至少命名）为我。另一种方法是使用现有的 .mdf 通过脚本在服务器上创建数据库。我唯一的问题是我想保留分配给我的数据库名称。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T20:29:14.517

我通常使用 SQL Management Studio 在本地连接到我的开发数据库，​​然后右键单击该数据库，选择 Tasks -> Generate Scripts。然后我选择整个数据库或我想保留的表，单击下一步，然后单击高级按钮并确保我正在编写“模式和数据”脚本，然后生成一个我可以运行的 sql 脚本生产数据库，因此保留了开发数据库中的表结构和数据。显然，如果您不想保留数据，那么只需编写 Schema 脚本即可。然后，将应用程序的连接字符串指向新的生产环境数据库，就可以开始了。

# c++ - 函数参数中的 C++ 类类型

> ID：10760658
> 
> 赞同：1
> 
> 时间：2012-05-25T19:59:31.843
> 
> 标签：c++

假设我有两个类设置，如下所示。基本上我想将 main() 中定义的 class1 对象传递给第二个类中的方法。当我尝试编译它时，它说 class1 尚未声明。谁能解释为什么这不起作用以及我该如何解决？

```
//class1.h:

class class1
{
public:
    class1();
    void method1();
private:
    int myNumber;
};

//class1.cpp has the implementation for method1();

//class2.h:

class class2
{
public:
    class2();
    void method2(class1 myclass);
};

//class2.cpp:

#include "class1.h"
#include "class2.h"

int main( void )
{
    class1 myclass;
    class2 anotherClass;

    anotherClass.method2(myclass);

    return 0;
}

void class2::method2(class1 myclass)
{
    return;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T20:02:41.000

您在类定义中缺少`class`关键字。

而不是`class1{...}`你需要`class class1{...}`等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T20:05:15.213

在`class2.h`中，编译器不“知道”如何`class1`定义。有两种可能的解决方案：

*   添加`#include "class1.h"`一个`class2.h`
*   只需在标题顶部声明即可添加所谓的in*前向声明。*然后，您需要将您的更改为期望*引用*或*指向*. 如果你然后添加，一切都会工作。`class1``class2.h``class class1;``method2`**`class1``#include "class1.h"``class2.cpp`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T20:34:04.670

唯一干净的解决方案是`class class1`在`class class2`.

请注意，前向声明（al la Gnosophilon 的回答）在这里没有帮助，因为它只*声明*了类，但没有*定义*它。这意味着您可以使用指向该类的指针或引用，但不能使用更多，特别是您不能`class1 myclass`在尝试时按值传递。**

# html - 菜单无法正常工作

> ID：10760661
> 
> 赞同：0
> 
> 时间：2012-05-25T19:59:47.207
> 
> 标签：html, css

好吧，我有几个问题...

有空可以看看[http://www.crystalcoach.com/new](http://www.crystalcoach.com/new)

我在使用悬停菜单时遇到了一些问题。好的，我知道这可能是一个超级过时的代码......但它有效，哈哈。

我遇到的困难（参见图片示例）是当您将鼠标悬停在菜单上时，定位是错误的。如果您转到上面的 URL 并将鼠标悬停在菜单上，您就会明白我的意思。

此外，我可以在代码中的哪个位置更改它以使菜单更宽？如果您将鼠标悬停在“Fleet”上，您会看到菜单本身不够宽，无法包含其中的所有车辆。我不得不缩写一些，但悬停部分没有完全工作。

非常感谢你的帮助。

这是图片：http: [//i1166.photobucket.com/albums/q617/stevezee87/menusample.jpg](http://i1166.photobucket.com/albums/q617/stevezee87/menusample.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:32:08.930

好吧，它老了，也很乱，但这是你需要改变的：

**1)**

存在`div`子菜单选项。那`div`包含一个`width`of `150px`，松开那个声明，子菜单会根据它的内容增长！

提到`div`的是`<a></a>`在菜单文本之后：

![在此处输入图像描述](../Images/d9ff8d9bdb33d08d9345ea131e641a4f.png)

* * *

**2)**

通过我的测试`span.qmritem`需要有一个`top`值`10px`，以保持与非悬停菜单选项一致。

* * *

**3)**

第**1)**`div`点提到的，必须在现有值上获得相同的增加：**`10px``top`**

 **![在此处输入图像描述](../Images/4672918e9cda95d30c14182a2aa07292.png)

* * *

**链接到两个完整尺寸的图像：**

[问题 01 的屏幕截图](http://dl.dropbox.com/u/76169930/stackoverflow/question/10760661/a_crystal_coach_css_problem_01.jpg)

[问题 02/03 的屏幕截图](http://dl.dropbox.com/u/76169930/stackoverflow/question/10760661/a_crystal_coach_css_problem_02.jpg)**

# c# - C# 类列表或数组

> ID：10760666
> 
> 赞同：0
> 
> 时间：2012-05-25T20:00:06.447
> 
> 标签：c#, class, loops

我想在一个循环中创建多个对象/实例。这该怎么做？

```
class lh 
    {
        public string name;

        public lh(string name)
        {
            this.name = name; ;
        }

    }

while((line = ps.ReadLine()) !=null)
{
      lh a = new lh(line);
} 
```

显然我不能一遍又一遍地使用相同的名称（a）创建一个新对象

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T20:03:24.777

```
List<lh> objects = new List<lh>();

while(your_condition)
{
    objects.Add(new lh(line));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T20:03:59.610

列表或数组怎么样？

```
List<lh> lines = new List<lh>();

while((line = ps.ReadLine()) !=null)
{
    lines.Add(new lh(line));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T20:04:10.203

您可以将您的实例添加到列表中：

```
List<lh> lhs = new List<lh>();
while ((line = ps.ReadLine()) != null)
    lhs.Add(new lh(line)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T20:04:07.693

```
var list = new List<lh>();
while((line = ps.ReadLine()) !=null)
{
    list.Add(new lh(line));
} 
```

# java - java.lang.NoClassDefFoundError: com/google/gson/Gson

> ID：10760667
> 
> 赞同：1
> 
> 时间：2012-05-25T20:00:25.133
> 
> 标签：java, eclipse, spring, maven, junit

我注意到一个奇怪的问题。我可以使用 Junit 运行我的测试用例，但是当我使用 maven 运行时，其中一个测试用例失败了。它抱怨没有找到 Gson 类 def。

我能够在 Maven 依赖项中看到 Gson jar。

所以我怀疑类路径不包括 Gson。所以我用 -X 运行了 maven 并注意到了一些线索。

```
[DEBUG] Could not find metadata com.example.libraries:Symbology:1.0.0-SNAPSHOT/maven-metadata.xml in local (C:\Users\ra\.m2\repository)
[DEBUG] Skipped remote update check for com.example.libraries:Symbology:1.0.0-SNAPSHOT/maven-metadata.xml, locally cached metadata up-to-date.
[DEBUG] Could not find metadata com.example.libraries:Symbology:1.0.0-SNAPSHOT/maven-metadata.xml in local (C:\Users\ra\.m2\repository)
[DEBUG] Skipped remote update check for com.example.libraries:Symbology:1.0.0-SNAPSHOT/maven-metadata.xml, locally cached metadata up-to-date.
[WARNING] The POM for com.example.libraries:Symbology:jar:1.0.0-SNAPSHOT is invalid, transitive dependencies (if any) will not be available: 2 problems were encountered while building the effective model for com.example.libraries:Symbology:1.0.0-SNAPSHOT
[ERROR] 'dependencies.dependency.artifactId' for ::jar is missing. @ 
[ERROR] 'dependencies.dependency.groupId' for ::jar is missing. @ 
```

我有一个依赖于 Symbology 项目的项目，而这又使用了 Gson。但是现在从这个日志中我看到传递依赖没有被包括在内。所以没有找到 Gson 类。

这是符号学pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.example.libraries</groupId>
<artifactId>Symbology</artifactId>
<version>1.0.0-SNAPSHOT</version>
<packaging>jar</packaging>

<name>Symbology</name>
<url>http://maven.apache.org</url>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>com.google.code.gson</groupId>
        <artifactId>gson</artifactId>
        <version>2.1</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency>
</dependencies> 
```

这是我的项目的 Pom，它调用了 symbology ：

```
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.example.libraries</groupId>
<artifactId>FGF</artifactId>
<version>1.0.0-SNAPSHOT</version>
<packaging>jar</packaging>
<distributionManagement>
    <snapshotRepository>
        <id>example.com</id>
        <name>example.com-snapshots</name>
        <url>http://example/artifactory/libs-snapshots-local</url>
    </snapshotRepository>
</distributionManagement>

<name>FGF</name>
<url>http://maven.apache.org</url>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency>
    <dependency>
        <groupId>com.example.libraries</groupId>
        <artifactId>Category</artifactId>
        <version>1.0.0-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>com.example.libraries</groupId>
        <artifactId>Time</artifactId>
        <version>1.0.0-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>com.example.libraries</groupId>
        <artifactId>Display</artifactId>
        <version>1.0.0-SNAPSHOT</version>
    </dependency>
    **<dependency>
        <groupId>com.example.libraries</groupId>
        <artifactId>Symbology</artifactId>
        <version>1.0.0-SNAPSHOT</version>
    </dependency>**
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.2.0.BUILD-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.directory.studio</groupId>
        <artifactId>org.apache.commons.lang</artifactId>
        <version>2.6</version>
    </dependency>       

</dependencies> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:41:20.170

花了很多时间后终于解决了问题。

问题是当我将符号系统推送到存储库时，它没有将 pom 推送到存储库。因此，当我使用符号系统作为依赖项时，我的项目无法知道传递依赖项是什么。

所以我将我的 pom 和 jar 一起推送到存储库中，现在它能够获取所有依赖项。

HURRAYYYYYYYYYYYYYYYYY!!!!!!!!!!!!!!!!!!

# objective-c - userLocation 总是 0.0000, 0,0000

> ID：10760669
> 
> 赞同：0
> 
> 时间：2012-05-25T20:00:26.680
> 
> 标签：objective-c, xcode

我试图在 MKMapKit 中返回用户位置，但在 LOG 中，它总是返回 0.0000、0.0000。当项目运行时，它会在地图上显示 userLocation.. 但在日志显示 0、0..

有人知道怎么做吗？看看我的代码：

```
- (void)viewDidLoad 
```

{ [超级 viewDidLoad];

```
//esconder navBar
[[self navigationController] setNavigationBarHidden:YES animated:NO];

mapView.showsUserLocation = YES;

double lat = -21.21258;
double lng = -47.816802;

CLLocationCoordinate2D Coordinate;

NSLog(@"%f , %f", mapView.userLocation.coordinate.longitude, mapView.userLocation.coordinate.latitude);

Coordinate.latitude = lat;
Coordinate.longitude = lng;

MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init];
annotationPoint.coordinate = Coordinate;
annotationPoint.title = @"Ribeirão Shopping";
annotationPoint.subtitle = @"Ribeirão Preto - SP";
[self.mapView addAnnotation:annotationPoint]; 

MKCoordinateRegion newRegion;
newRegion.center.latitude = lat;
newRegion.center.longitude = lng;
[self.mapView setRegion:newRegion animated:YES];

mapView.mapType = MKMapTypeStandard; 
```

}

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:05:32.543

为 mapview 查找用户位置确实需要一些时间，所以在使用`mapView.userlocaiton`git 之前给它一些时间~3 秒，然后尝试记录用户位置。我相信你会得到它。

# c++ - 如何使用 C++ 和 fstream 将 .txt 文件转换为二进制文件 (.dat)？

> ID：10760670
> 
> 赞同：0
> 
> 时间：2012-05-25T20:00:32.573
> 
> 标签：c++, text, binaryfiles, fstream

我正在尝试编写一个简单的程序来测试使用键盘的用户效率（现在只有每分钟的字数和准确性），但我在文件操作部分遇到了困难。我想要一个存储在 .txt 文件中的单词列表（以便于编辑），如下所示：

```
 cheese
    computer
    photograph
    download
    etc... 
```

我希望能够将 .txt 文件作为一个整体转换为二进制文件，每个单词都进入 .dat 文件中的一个条目，但我很难弄清楚 fstream 如何从 .t​​xt 读取数据文件。使用 fstream 从列表中读取单词以便将它们添加到二进制文件中的条目中的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:18:44.187

就像黄昏说的那样，扩展没有任何意义。文件以 ASCII 格式或二进制格式存储。

如果文件是 ASCII 文件，则每个字节都存储为其 ASCII 等效文件。二进制文件只是原始数据，无需任何转换即可存储。就您的问题而言，您可以执行以下操作：

1.  像往常一样读取输入文件（ASCII）
2.  使用 fwrite 将其写回另一个文件

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-25T21:06:52.747

从 fstream 读取实际上非常简单。«getline» 读取每一行，直到 «fstream.is_good» 返回 «false»。还可以查看[cplusplus.com 上的教程](http://www.cplusplus.com/doc/tutorial/files/)。这应该这样做：

```
#include <fstream>
#include <iostream>
#include <string>

using namespace std;

int main() {
  fstream myfile;
  string line;
  myfile.open("sample.txt");
  if  ( myfile.is_open() ) {
    while ( myfile.good() ) {
      getline( myfile, line);
      // conversion and output function goes here
      // this example just prints it to stdout
      cout << line << endl;
    }
    myfile.close();
  } else {
    cerr << "could not open file" << endl;
  }
  return 0; 
} 
```

# model-view-controller - Backbone.js 模型，正确添加 setInterval

> ID：10760671
> 
> 赞同：0
> 
> 时间：2012-05-25T20:00:35.667
> 
> 标签：model-view-controller, backbone.js

我正在为学习目的创建一个简单的 Backbone 应用程序。我只是在创建时间和日期显示。显示必须至少每分钟更新一次。我对模型使用“时间”，对视图使用“TimeView”。我的第一个问题是某种哲学问题，它包含 setInterval、模型还是视图？我认为模型应该自我更新，但我无法让代码工作。看起来它正在更新模型，但是 model.update() 到 view.render() 函数的绑定不起作用。

在下面的代码中，我将 setInterval 切换到 View 并注释掉了我的其他尝试。即使这可行，（也许视图*应该*控制模型的更新）但是 this.model.bind( 'update', this.render ) 不起作用，我必须单独启动渲染，这感觉不对。

```
var Time = Backbone.Model.extend({
initialize: function(){
    _.bindAll( this, 'update', 'startLoop', 'stopLoop' );
    //this.startLoop();
    this.update();
},
startLoop: function(){
    this.update();
    this.interval = window.setInterval(_.bind(this.update, this), 10000);

},
stopLoop: function(){
    this.interval = window.clearInterval( this.interval );
},
update: function(){
    var days = [ 'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday' ];
    var months = [ 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December' ];
    var date = new Date();
    var tHour = date.getHours();
        if( tHour < 12 ){ if( tHour == 0 ) tHour = 12 } else { tHour = tHour-12 };
        tHour = tHour.toString();
    var tMin = date.getMinutes();
        tMin = ( tMin < 10 ) ? '0' + tMin.toString() : tMin.toString(); 
    this.set({
        hour : tHour,
        ampm : ( date.getHours() < 12 ) ? "am" : "pm",
        minute : tMin,
        day : days[ date.getDay() ],
        month : months[ date.getMonth() ],
        date : date.getDate(),
        year : date.getFullYear()
    });
}
});
var TimeView = Backbone.View.extend({
el: '#time-date-display',
interval: 0,
template: $( '#tpl-time-date' ).html(),
initialize: function(){
    _.bindAll( this, 'render' );
    this.model = new Time();
    this.render();
    //this.model.bind( 'update', this.render );
    this.interval = window.setInterval( _.bind( function(){ this.model.update(); this.render();}, this), 10000 );
},
render: function(){
            //alert( 'TimeView.render()' );
    $( this.el ).html(
        _.template( this.template, this.model.toJSON())
    );
}
});

$( 'body' ).append( _.template( $( '#tpl-time-weather-display' ).html()));
var tv=new TimeView(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:41:45.000

您正在绑定到`update`模型上的事件，但该事件永远不会被触发。调用`update`模型与`update`生成的事件不同。相反，绑定到模型的`change`事件，然后视图将被更新。

关于哲学问题，我也会选择随时间更新的模型，但是这个例子太做作了，几乎是任意的。

# c# - C# 所需的 HASP HL 工作演示

> ID：10760673
> 
> 赞同：5
> 
> 时间：2012-05-25T20:00:42.997
> 
> 标签：c#, .net, exception, usb, hasp

好的。好吧，我知道这个问题很有可能在前 10 分钟内被关闭，但无论如何我都会问它，因为我已经花了将近一天半的时间试图找到解决方案。不过，我无法弄清楚这一点。尽管有演示，但在 Internet 上甚至在 HASP（safenet）网站上也没有太多关于此的信息。

我有一个 HASP HL USB 加密狗。我尝试转换他们的演示并测试运行它，但对于我的生活，我什至无法让它登录。它不断引发**Aladdin.HASP.HaspStatus.HaspDotNetDllBroken**异常。

但是，如果我运行他们演示的 C 版本，它就可以完美运行。

这是我的代码的 Csharp 版本：

```
Aladdin.HASP;
HASP myHasp = new HASP();
var thestatus = myHasp.Login(vender_code);
myHasp.Logout; 
```

我想登录到 USB HASP 并获取它的 HaspID 和它的内存中的设置。

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T22:31:49.723

可能是您没有 HASP 运行时的所有依赖项。我正在打包应用程序：

```
hasp_windows_NNNNN.dll (NNNNN = your number)
hasp_net_windows.dll
MSVCR71.DLL (added manually)
msvc runtime 80 
```

HASP 需要一个运行时库，它不会告诉您是哪一个，除非您将它放在 DEPENDS.EXE 实用程序中（您的 Visual Studio 安装中可能有您）。

登录（并读取一些字节）：

```
 byte[] key = new byte[16];
            HaspFeature feature = HaspFeature.FromFeature(4);
            string vendorCode = "your vendor string, get it from your tools";
            Hasp hasp = new Hasp(feature);
            HaspStatus status = hasp.Login(vendorCode);
            if (HaspStatus.StatusOk != status)
            {
                //  no license to run
                return false;
            }
            else
            {
                //  read some memory here
                HaspFile mem = hasp.GetFile(HaspFileId.ReadOnly);
                mem.Read(key, 0, 16);
                status = hasp.Logout();
                if (HaspStatus.StatusOk != status)
                {
                    //handle error
                }
            } 
```

希望能帮助到你。我的 HASPed 软件就像一个魅力。顺便说一句，在没有设置组合的情况下，无法在 .NET 应用程序周围放置信封。

# python - 对于...问题（Python）

> ID：10760676
> 
> 赞同：0
> 
> 时间：2012-05-25T20:00:54.933
> 
> 标签：python, loops, interpretation

我正在尝试一些不同的方法来运行一些 for...in 循环。考虑一个列表列表：

```
list_of_lists = []
list = [1, 2, 3, 4, 5]
for i in range(len(list)):
    list_of_lists.append(list) # each entry in l_o_l will now be list 
```

现在假设我想让 l_o_l 的第一个“列”包含在一个单独的列表中，`a`. 我有几种方法可以解决这个问题。例如：

```
a = [list[0] for list in list_of_lists] # this works (a = [1, 1, 1, 1, 1]) 
```

或者

```
a=[]
for list in list_of_lists:
    a.append(hit[0]) #this also works 
```

但是，对于第二个示例，我认为“完整”扩展等效于

```
a=[]
a.append(list[0] for list in list_of_lists) #but this, obviously, produces a generator error 
```

实际上，有效的“翻译”是

```
a=[]
a.append([list[0] for list in list_of_lists]) #this works 
```

那么，我的问题是关于解释和标点符号。Python如何“知道”附加/确实在“list [0] for list in list_of_lists”扩展中附加列表括号（因此在任何重写中都需要它）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T20:08:06.203

这里的问题是列表推导和生成器表达式不仅仅是循环，它们还不止于此。

[正如您所展示的，列表](https://www.youtube.com/watch?v=t85uBptTDYY)推导式旨在成为一种从可迭代对象构建列表的简单方法。

您的后两个示例都不起作用-在这两种情况下，您都将错误的东西附加到列表中-在第一种情况下，生成器，第二种情况在现有列表中附加了一个列表。这些都不是你想要的。

你试图同时以两种不同的方式做某事，但它不起作用。只需使用列表理解 - 它以最有效和可读的方式完成您想做的事情。

您的主要问题是您似乎采用了列表推导和生成器表达式，却不了解它们是什么以及它们要做什么。我建议您在使用它们之前尝试进一步了解它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T20:10:29.890

> 那么，我的问题是关于解释和标点符号。Python如何“知道”附加/确实在“hit [0] for list in list_of_lists”扩展周围附加列表括号（因此在任何重写中都需要它）？

不知道那应该是什么意思。我想你可能没有意识到除了列表推导之外`[i*2 for i in range(0,3)]`还有生成器表达式`(i*2 for i in range(0,3))`。

生成器表达式是一种用于创建执行映射的生成器的语法，就像列表推导式（但作为生成器）。任何列表推导都可以重写。之所以有一个赤裸裸的内部是因为生成器表达式作为调用的参数出现的地方，允许去掉括号。这就是您在.`[`*`c`*`]``list(`*`c`*`)`*`c`*`list()``a.append(hit[0] for list in list_of_lists)`

# c# - 将全屏应用程序从一个屏幕更改为另一个屏幕

> ID：10760688
> 
> 赞同：0
> 
> 时间：2012-05-25T20:02:08.193
> 
> 标签：c#, wpf, windows, visual-studio-2010, fullscreen

我在 csharp 中编写了一个应用程序，它使用用户计算机中的整个屏幕。

我想检查用户是否有多个显示器并能够将应用程序从一个显示器更改为另一个显示器。

如何检查当前的显示器数量并以编程方式将窗口从一个显示器更改为另一个显示器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:06:48.677

使用屏幕类 - [http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T07:34:18.713

`System.Windows.Forms.Screens.AllScreens`提供包含`Bounds`属性的屏幕数组。您必须添加对`Windows.Forms`项目的引用，然后检测数组的计数。要将窗口设置为第二个屏幕，只需将窗口的左侧值设置为第一个屏幕的宽度即可。此外，请确保更新宽度和高度以匹配新屏幕。

确实，多屏幕设置对开发人员来说非常棒，但编程却很麻烦……

# json - 如何加载本地 json 文件？

> ID：10760689
> 
> 赞同：2
> 
> 时间：2012-05-25T20:02:15.477
> 
> 标签：json, security, firefox, local-storage

**有没有办法使用 about:config 配置 firefox 以允许本地文件访问（用于演示目的）？**

特别是使用FF12，我需要能够对json数据进行本地文件访问。它在服务器上运行良好，但我想让这个演示更便携。

```
 $.ajax({
            url: "../_assets/levelschema.json",
            complete: function (data) {
                Levels = data.levels;
                //...
            },
            success: function (data) {                    
                // wont get called b/c files don't have 200 HTTP status
            },
            async: false
        }); 
```

我尝试将其设置为 not async=false，但出现“拒绝访问受限 URI”错误。这是一项安全功能。我真的需要演示离线工作，没有互联网访问，我希望使用它的人不必安装网络服务器。我也不想将我的所有数据都嵌入到 HTML 标记中，因为该数据可能会发生变化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T02:16:07.997

您可以在 中翻转`security.fileuri.strict_origin_policy`首选项`about:config`。但这会带来一些安全漏洞；将您的 JSON 移动到 HTML 所在目录的子目录中是一个更好的主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T20:08:29.563

如果 JSON 文件在您的本地计算机上，请像这样访问它：

`<script type="text/javascript" src="myFile.json"></script>`

您必须将该行添加到您的离线项目并在它上线时将其删除，但这是在没有任何服务器端帮助的情况下完成此操作的最佳方式。您还必须删除演示的 AJAX 代码，因为它无法在您的本地计算机上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T20:29:11.953

好的，只要您的数据文件位于原始 HTML 文件的路径下，使用 AJAX 的 JSON 请求就可以正常工作。所以我试图升级到 _assets/ 目录。解决方案是将 _assets 移动到 HTML 当前目录以供访问。

在这种情况下，您可以将 AJAX 与 async=false 一起使用。

# objective-c - 用OpenGL识别调用draw()方法的对象

> ID：10760690
> 
> 赞同：1
> 
> 时间：2012-05-25T20:02:16.880
> 
> 标签：objective-c, opengl-es, opengl-es-2.0

有没有办法确定哪个对象正在调用 draw 方法。

创建：

```
joint.model = [[Box alloc] init]; 
```

调用代码：

```
 [joint.model draw]; 
```

draw 方法（在 Box 类中）：

```
-(void)draw
{   
        glBindVertexArrayOES(_boxVAO);
        glDrawArrays(GL_TRIANGLES, 0, 7055*3);
} 
```

如何`joint`在我的 draw 方法中接收对象？

如果需要更多的课程信息，我可以附上，但我没有假设，因为没有更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:14:38.150

该`model`对象需要有一个返回的指针才能`joint`在`-draw`方法中使用它。因此，您需要修改`Box`类以使其具有指向任何类型的指针`joint`，或者如果`Box`由您正在使用的框架定义，则需要对其进行子类化。所以你可以这样做：

```
@class Box {
   Model* model; // Or whatever type model is.
} 
```

或者，如果这不是一个选项，您可以这样做：

```
@class BetterBox : Box {
    Model* model; // Or whatever type model is.
} 
```

并确保它`model.joint`是这样创建的：

```
model.joint = [[BetterBox alloc] init]; // or [[Box alloc] init] if you modified the Box class
[model.joint setModel:model]; 
```

然后在你的 draw 方法中，你可以`model`像这样简单地访问：

```
- (void)draw
{
    [model someMethod];
    //... etc. ...
} 
```

# seo - 如何在谷歌中显示页面的额外信息？

> ID：10760691
> 
> 赞同：-1
> 
> 时间：2012-05-25T20:02:17.133
> 
> 标签：seo

我注意到谷歌有时会显示*缩略图、总评论、总页数、所需时间、价格、总匹配数，甚至评级（带有星形图像）等*。

我怎样才能让谷歌显示这样**特定的短信息**和**小缩略图**？

![谷歌结果截图](../Images/01d1c00073a18c1356a029e3ba41089f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T21:34:46.540

您可能正在寻找类似于 Facebook 的 OpenGraph的[Google 的 Microdata 。](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=176035)

# php - PDO - UPDATE 查询的语法无效

> ID：10760693
> 
> 赞同：2
> 
> 时间：2012-05-25T20:02:24.633
> 
> 标签：php, sql, pdo

`SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '= time + '1' WHERE username = 'admin-test'' at line 1`当我尝试执行以下查询时出现错误：

```
try
{
    $sth = $dbh->prepare("UPDATE alltimehighscores time = time + :time
        WHERE username = :username");
    $arr = array(
        ':username' => $username,
        ':time' => $time
        );
    $sth->execute($arr);
}
catch (PDOException $e)
{
    echo $e->getMessage();
    exit();
} 
```

`$time`和`$username`值是从 较早分配的`$_GET`。`$dbh`上面也分配了，它工作正常，因为上面还有另一个查询可以正常执行。

查看错误消息，我可以看到它`time`没有被更改为当前数据库值，因此我假设在使用 PDO 时必须有不同的方法来执行此操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T20:04:08.780

你错过了一个 SET

```
UPDATE alltimehighscores SET time = time + :time WHERE username = :username 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T20:04:26.613

`SET`不见了：

```
UPDATE alltimehighscores SET `time` = `time` + :time
WHERE username = :username 
```

# c# - GroupPrincipal.FindByIdentity 错误

> ID：10760694
> 
> 赞同：3
> 
> 时间：2012-05-25T20:02:27.987
> 
> 标签：c#, .net-3.5, active-directory, account-management

我有一个 .NET 3.5 方法，给定一个用户和一个 Active Directory 组列表，返回用户所属的组子集。该代码适用于数十个安装，但在一个特定的客户站点失败。代码如下所示：

```
List<GroupAttrs> ret = new List<GroupAttrs>();

foreach (SymDomainInfo domain in domains)
{
   using (PrincipalContext ctx = new PrincipalContext(ContextType.Domain, domain.Name, adUser, adPwd))
   {
      foreach (GroupAttrs aGroup in grpAttrs)
      {
         if (aGroup.Available)
                continue;

             GroupPrincipal pGroup;

             try
             {
                 pGroup = GroupPrincipal.FindByIdentity(ctx, IdentityType.Sid, aGroup.Authid);
             }
             catch (Exception e3)
             {
                 Console.WriteLine("{3} finding group {0}/{4} in domain {1}: {2}", aGroup.Name, domain.Name, e3.Message, e3.GetType().Name, aGroup.Authid);

                 if (e3.InnerException != null)
                    Console.WriteLine("\tInner {0}: {1}", e3.InnerException.GetType().Name, e3.InnerException.Message);

                 continue;
             }

             if (pGroup != null)
             {
                Console.WriteLine("Found Group " + pGroup.DistinguishedName);
                FindUserInGroup(grpMap, identity.User, ret, pGroup);
             }
          }
   }
} 
```

A`GroupAttrs`是我们自己的数据库类，其中包含 Active Directory 组的名称和 SID（在字段中`AuthID`）。该集合`SymDomainInfos`包含 AD 中所有受信任域的名称和路径。和是有权搜索 AD 的域用户的凭据`adUser`。`adPassword`

循环的每次迭代都会给出相同的错误：

> System.ArgumentException：值无效。参数名称： System.DirectoryServices.AccountManagement.ADStoreCtx.FindPrincipalByIdentRefHelper(Type principalType, String urnScheme, String urnValue, DateTime referenceDate, Boolean useSidHistory)
> at System.DirectoryServices 的 sddlForm。 AccountManagement.ADStoreCtx.FindPrincipalByIdentRef（类型 principalType，字符串 urnScheme，字符串 urnValue，DateTime referenceDate） 在 System.DirectoryServices.AccountManagement.Principal.FindByIdentityWithTypeHelper（PrincipalContext 上下文，类型 principalType，Nullable`1 identityType，字符串 identityValue，DateTime refDate）
> 
> 在 System.DirectoryServices.AccountManagement.Principal.FindByIdentityWithType(PrincipalContext context, Type principalType, IdentityType identityType, String identityValue)
> 在 System.DirectoryServices.AccountManagement.GroupPrincipal.FindByIdentity(PrincipalContext context, IdentityType identityType, String identityValue)
> 在 ADGroupsTest.Program.Main(字符串 [] 参数）

我们还有另一位客户，这对我们不起作用。错误不同，该客户已删除或禁用 Active Directory 中的一些默认属性。当他们恢复这些属性时，代码开始工作。所以我的猜测是，这个客户已经以某种方式配置了他们的 AD，这样`GroupPrincipal.FindByIdentity`在从域上下文调用时将无法工作。

所以我的问题是：有人知道什么类型的 AD（错误）配置会导致这个特定的错误吗？失败了，谁能告诉我`FindByIdentity`在这种情况下必须实施哪些 AD 属性才能工作？

# ant - 运行 ant 脚本时构建失败

> ID：10760696
> 
> 赞同：1
> 
> 时间：2012-05-25T20:02:32.153
> 
> 标签：ant

当我尝试运行 ant 脚本（./ant clean 或 ./ant setup）时，我的构建失败：java.lang.ClassNotFoundException: org.apache.oro.text.perl.Perl5Util

[在Apache Commons Validator 的帮助下，](https://stackoverflow.com/questions/5706914/noclassdeffounderror-problems-with-help-of-apache-commons-validator)我在 NoClassDefFoundError 问题中发现了类似的东西，但这是我第一次使用 ant，我对行话迷路了。如果我有同样的问题，你能否详细说明一下，它是什么（用外行的话）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:20:11.867

缺少一个 jar 文件。也许你可以在[这里得到](http://jakarta.apache.org/oro/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:25:07.750

我在我的 user.properties 中将 ant 版本从 1.8.3 更改为 1.7.1 并且它有效。事实证明，我们存储库中的 1.8.x 没有 p4 集成文件。为什么它首先存在于存储库中是一个不同的问题。

# c# - Azure - Blob 存储

> ID：10760708
> 
> 赞同：0
> 
> 时间：2012-05-25T20:03:19.720
> 
> 标签：c#, .net, storage, blob, azure-blob-storage

我有以下场景.... 我正在尝试从具有凭据的站点下载文件并将其存储在 Azure Blob 存储中。

为此，我创建了一个应用程序。使用凭据我可以访问该文件并下载该文件。

为此，我使用了 WebClient。

```
NetworkCredential credentials = new NetworkCredential(userName, password);
CredentialCache cCache = new CredentialCache();
cCache.Add(new Uri(fileURL), "Basic", credentials);

WebClient wClient = new WebClient();
wClient.Credentials = cCache;
wClient.DownloadFile(fileUrl, fileName); 
```

使用上面的代码，我能够将文件下载到云上的机器上。但我想将它存储在 Blob Storage 容器中。

我该怎么做呢。？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:14:19.677

WebClient.DownloadFile 将文件下载到第二个参数中指定的路径。在您的情况下，我建议您使用 DownloadData 方法，该方法返回一个字节数组。然后您可以使用 CloudBlob.UploadByteArray 将字节数组上传到 blob：http: [//msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storageclient.cloudblob.uploadbytearray](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storageclient.cloudblob.uploadbytearray)。

最好的祝福，

明旭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:18:57.280

MSDN 搜索“c#.net 上传文件到 Azure 存储”

[天蓝色上传](http://msdn.microsoft.com/en-us/library/windowsazure/gg651129.aspx)

你能让你的文件进入流吗？

[BlobUploadStream](http://msdn.microsoft.com/en-us/library/windowsazure/ee772826)

[WebClientToStream](http://msdn.microsoft.com/en-US/library/system.net.webclient%28v=VS.80%29.aspx)

# html - 通过css确定屏幕高度的正确方法是什么？

> ID：10760711
> 
> 赞同：0
> 
> 时间：2012-05-25T20:03:30.173
> 
> 标签：html, css

我想要一个布局，其中有四个彩色 div。说红色蓝色绿色黄色，它们都等于页面滚动的高度。就像我在屏幕上向下翻页时它应该显示蓝色然后绿色然后黄色加载它应该显示红色。

[http://jsfiddle.net/Bv6JU/1/](http://jsfiddle.net/Bv6JU/1/)这是小提琴让我们改进它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:33:39.953

在 jquery 中（在纯 javascript 中也可能很简单，但我是 jquery-oholic）......

```
<div class="screensize" style="background-color:red"></div>
<div class="screensize" style="background-color:blue"></div>
<div class="screensize" style="background-color:green"></div>
<div class="screensize" style="background-color:yellow"></div>
<script type="text/javascript">
$(function() {
  $(".screensize").css("height",$(window).height() + "px");
})
</script> 
```

编辑：哦，就像我说的那样，如果您想在人们调整窗口大小时保持大小一致，您将捕获调整大小事件并再次调整 div 大小。所以你会将此行添加到函数中......

```
$(window).resize(function() {
  $(".screensize").css("height",$(window).height() + "px");
}) 
```

# javascript - 如何在 EaselJS 中获取影片剪辑的当前位置（帧）？

> ID：10760712
> 
> 赞同：3
> 
> 时间：2012-05-25T20:03:31.640
> 
> 标签：javascript, flash, html, canvas, easeljs

我有一个淡入然后淡出的电影剪辑。我想在这个影片剪辑中找到中途标记并暂停它。但是在 EaselJS 中，我找不到任何方法来获取影片剪辑的当前帧位置。这可能吗？

我想做类似以下的事情：

```
 canvas = document.getElementById("introCanvas");
        exportRoot = new lib.MyMovieClip();
        exportRoot.onTick = function () {

            //get the mc's length in frames
            //get the current frame position
            //if current frame postion == mc's lenght / 2
                   //then pause movie clip

        }; 
```

谁能为我如何完成上述工作提供一些建议或想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T11:43:27.707

通读文档后，似乎`TweenJS Timeline`自动分配了a来管理动画中的变化，看起来不像我们在flash中看到的任何实际帧。

如果您查看[TweenJS Timeline 的文档，则](http://www.createjs.com/Docs/TweenJS/Timeline.html)可以使用该`duration`属性，如文档所述：

> 只读属性，以毫秒为单位指定此时间线的总持续时间（如果 useTicks 为 true，则为刻度）。此值通常会在您修改时间线时自动更新。有关详细信息，请参阅 updateDuration。

因此，如果您获得持续时间并除以 2，或乘以 0.5 ;) 那么您可以找出动画的中点。尝试在你的 onTick 方法中使用它，看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T15:56:05.610

我总是这样做...

```
(movieclip.timeline.position)%movieclip.timeline.duration 
```

或者其他方式...

```
var tl = movieclip.timeline;
var d = timeline.duration;

(tl.position)%d 
```

您必须获取影片剪辑的时间轴的位置和持续时间，并添加一个 %。这将获得影片剪辑的当前帧。

# java - ElasticSearch Java / Groovy API：我如何发送 JSON 请求

> ID：10760724
> 
> 赞同：1
> 
> 时间：2012-05-25T20:04:16.413
> 
> 标签：java, rest, groovy, elasticsearch

是否可以不使用自定义 API 而只是发送 JSON 请求并接收 JSON 响应（使用 REST api）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T02:03:05.993

所以说“是否可以不使用自定义 API”，你的意思是你不想使用像[HttpBuilder](http://groovy.codehaus.org/modules/http-builder/)这样的东西，你只想使用原始的 groovy？

如果你只做 GET，你可以只使用[URL 类](http://groovy.codehaus.org/groovy-jdk/java/net/URL.html)和它的`text`方法，并手动解析 JSON，但这非常有限。

如果你需要做 POST/PUT/DELETE/HEAD/etc，你最好使用 HttpBuilder 之类的东西。如果这不是一个选项，那么您只需要实现 HttpBuilder 或 HttpClient 执行的子集。

# ruby-on-rails - RSpec 生成请求规范而不是控制器规范

> ID：10760727
> 
> 赞同：8
> 
> 时间：2012-05-25T20:04:25.757
> 
> 标签：ruby-on-rails, ruby, rspec

我正在使用 rspec-rails，但我想更改何时`rails g controller Blahs`被调用，我希望创建 spec/requests/，而不是 spec/controllers/。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-25T21:54:25.360

```
rails g integration_test foo 
```

你很高兴去！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-16T17:08:31.693

似乎没有通常的方法可以实现这一点，但是我找到了猴子修补解决方案：

```
# config/initializers/generators.rb
Rails.application.configure do
  config.generators do |g|
    # your setup here, like g.javascripts = false
  end

  def self.load_generators(*)
    super
    require 'rails/generators/rails/controller/controller_generator'
    Rails::Generators::ControllerGenerator.class_eval do
      remove_hook_for :test_framework
      hook_for :test_framework, as: :request
    end
  end
end 
```

这里有一些解释：测试框架的钩子是在 ControllerGenerator 中设置的，所以我们需要加载类来覆盖这个值。除了运行生成器之外，我不想在任何情况下加载这个类。`config.generators`块也适用于控制台和服务器，因此不合适。还有`self.generators`块，但它在之前运行`config.generators`并且不会配置生成器。所以我找到`Engine#load_generators`了适合我的方法。

使用 rails 5.0.1 测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-23T06:44:29.477

有一个 RSpec 生成器来生成请求规范：

```
rails g rspec:request Foo 
```

请注意，为了启用 RSpec 生成器，您需要将以下代码放入您的`application.rb`:

```
class Application < Rails::Application
  ...
  config.generators do |g|
    g.test_framework :rspec
  end
end 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-25T20:09:14.613

我认为您实际上无法配置它，但您始终可以分叉 rspec-rails 并根据自己的喜好对其进行调整[https://github.com/rspec/rspec-rails/blob/master/lib/generators/rspec/controller/控制器生成器.rb](https://github.com/rspec/rspec-rails/blob/master/lib/generators/rspec/controller/controller_generator.rb)

祝你好运！

# c# - Windows 服务状态永远保持在启动状态，即使它实际上已经启动

> ID：10760729
> 
> 赞同：1
> 
> 时间：2012-05-25T20:04:32.777
> 
> 标签：c#, windows-services

我按照[此处](https://stackoverflow.com/questions/593454/easiest-language-for-creating-a-windows-service/593803#593803)标记答案中的说明创建了服务。该服务已正确安装。当我在一段时间后启动该服务时，它会抛出一条消息“Windows 无法在本地计算机上启动 xxx 服务。

错误 1053：服务未及时响应启动或控制请求。"

单击确定后，其状态将永远保持在“正在启动”。当我检查应用程序和系统日志时，没有错误。

当我检查 SQL 跟踪时，该服务实际上正在正确运行并且正在执行它应该做的事情。那么为什么它的状态停留在“Starting”呢？

更新：这是 OnStart 方法中的代码

```
 protected override void OnStart(string[] args)
        {

            Loader loader = new Loader();
            loader.StartProcess();
        } 
```

更新 2：

根据 WiktorZychla 的评论，我这样做了，它奏效了 :)

```
protected override void OnStart(string[] args)
        {

            Loader loader = new Loader();

            ThreadStart threadDelegate = new ThreadStart(loader.StartProcess);
            Thread newThread = new Thread(threadDelegate);
            newThread.Start();

        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T21:13:34.713

根据 WiktorZychla 的评论，这就是我所做的

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.Linq;
using System.ServiceProcess;
using System.Text;
using IndexLoader;
using System.Threading;

namespace myNameSpace
{
    public partial class LoaderService : ServiceBase
    {
        Thread newThread;
        public LoaderService()
        {
            InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {

            Loader loader = new Loader();

            ThreadStart threadDelegate = new ThreadStart(loader.StartProcess);
            newThread = new Thread(threadDelegate);
            newThread.Start();

        }

        protected override void OnStop()
        {
            if ((newThread != null) && (newThread.IsAlive))
            {

                Thread.Sleep(5000);
                newThread.Abort();

            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-26T17:29:56.853

确切地了解您的`OnStart()`方法中的内容将是有益的。该`OnStart()`方法是来自操作系统的回调，用于启动您的服务，但它**必须**在 30 秒左右内返回（我记得在某处读过）。否则，操作系统会给出您所看到的消息。简而言之，将`OnStart()`方法限制为初始化事物，并将您的服务要执行的实际工作推迟到某种线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T20:08:42.700

在`Main()`函数的 Program.cs 文件中，确保您具有：

`ServiceBase.Run(new ServiceClassHere());`

在创建一个保存的 Windows 窗体应用程序时，我曾多次感到内疚

`Application.Run(new Class());`在我的`Main()`功能中

# azure - Azure 存储指标数据

> ID：10760731
> 
> 赞同：2
> 
> 时间：2012-05-25T20:04:40.780
> 
> 标签：azure, azure-storage

我正在尝试在我的角色中实现 azure 存储指标代码，但我正在检查是否有简单的方法来获取有关我的文件使用情况的 azure 存储指标数据。我的代码很稳定，我不想再次更改代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:28:22.843

实际上，如果您已经运行了 Windows Azure 角色，那么您无需对代码进行任何更改，您仍然可以获得 Windows Azure Blob 存储指标数据。

我上次写了一篇关于它的博客，作为[收集 Windows Azure 存储 REST API 级别的指标数据，无需一行编程，只需使用工具](http://blogs.msdn.com/b/avkashchauhan/archive/2011/10/11/collecting-windows-azure-storage-rest-api-level-metrics-data-without-a-single-line-of-programming-just-by-using-tools.aspx)

请在上面尝试，看看这是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T21:08:44.057

默认情况下禁用存储分析，因此到目前为止，尚未记录任何针对您的存储的操作以*供*分析。

您可以随时选择为日志记录（每个对象的详细访问信息）和指标（每小时汇总）启用分析。此外，您可以选择要跟踪的特定存储服务（blob、表、队列）以及要跟踪的操作（读取、写入、删除）。启用分析后，您可以从任何应用程序访问生成的分析数据（只要您拥有存储帐户名称 + 密钥）。

Persistent Systems 刚刚发布了[一篇](http://blog.persistentsys.com/index.php/2012/05/18/metering-resource-usage-for-multiple-tenants-using-storage-analytics/#)关于为 Java 应用程序启用存储分析的博客文章。相同的原则可以应用于 .net 应用程序（并且 sdk 非常相似）。

此外，Full Scale 180 发布了一个封装存储分析的[示例应用程序](http://azurestorexray.codeplex.com/)（基于 REST API，因为它是在 SDK v1.6 出现之前编写的）。

# c++ - 构造函数没有设置成员变量

> ID：10760735
> 
> 赞同：7
> 
> 时间：2012-05-25T20:04:58.300
> 
> 标签：c++, class, constructor

我的代码：

```
#include <iostream>
using namespace std;

class Foo
{
public:
    int bar;

    Foo()
    {
        bar = 1;
        cout << "Foo() called" << endl;
    }

    Foo(int b)
    {
        bar = 0;
        Foo();
        bar += b;
        cout << "Foo(int) called" << endl;
    }
};

int main()
{
    Foo foo(5);
    cout << "foo.bar is " << foo.bar << endl;
} 
```

输出：

```
Foo() called
Foo(int) called
foo.bar is 5 
```

为什么不是`foo.bar`6？`Foo()`被调用但未设置`bar`为 1。为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-25T20:08:33.603

在下面的构造函数中，带有的行`Foo()`不委托给前一个构造函数。相反，它创建了一个新的临时对象，类型为`Foo`，与 无关`*this`。

```
Foo(int b)
{
    bar = 0;
    Foo(); // NOTE: new temporary instead of delegation
    bar += b;
    cout << "Foo(int) called" << endl;
} 
```

构造函数委托的工作方式如下：

```
Foo(int b)
    : Foo()
{
    bar += b;
    cout << "Foo(int) called" << endl;
} 
```

但是，这仅适用于 C++11。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T20:09:52.540

你不能像普通函数一样使用构造函数。在您的代码中调用 Foo() 在堆栈中创建一个新对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T20:07:20.857

因为您在构造函数中有这一行：

```
bar = 0; 
```

您试图`Foo()`在第二个构造函数中调用另一个构造函数，但它只是创建一个临时`Foo`实例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T20:10:55.390

您不应该从另一个构造函数调用构造函数

看

[我可以从 C++ 中的另一个构造函数（做构造函数链接）调用构造函数吗？](https://stackoverflow.com/questions/308276/c-call-constructor-from-constructor)

除非你正在运行 C++11

# java - Java 和 C 集成 - 运行应用程序

> ID：10760736
> 
> 赞同：1
> 
> 时间：2012-05-25T20:05:06.320
> 
> 标签：java, c

我需要你的帮助。我有一个名为“generator.out”的 C 可执行文件，它是一个接收 int argc 和 char * argv[] 的 main() 函数。这个主函数的参数是一个文件（我们称之为 sample.da）和一个目标文件（我们称之为 out.bn）。我需要创建一个可以读取这些名称（sample.da 和 out.bn）并运行我的函数的 java 接口。我到目前为止的代码是：

```
package swingapps;

import javax.swing.*;
import java.awt.Dimension;
import java.awt.event.*;
import java.io.File;
import java.io.IOException;
import java.lang.*;

public class Swingapps {
private JButton button = new JButton("Generate Bayesian Network");
private JTextField path=new JTextField(40);
private JTextField name=new JTextField(40);
public Swingapps(JPanel jp) {
    jp.add(button);
    jp.add(path);
    jp.add(name);
    button.addActionListener(new Handler());
    path.addActionListener(new Read());
    name.addActionListener(new Call());
}
String text;
private class Read implements ActionListener {
    public void actionPerformed(ActionEvent evt) {
    text = path.getText();
    path.selectAll();
}
}

String namet;
private class Call implements ActionListener {
    public void actionPerformed(ActionEvent evt) {
    namet = name.getText();
    path.selectAll();
}
}
File filep=new File("text"+File.separator+"text");
File filen=new File("namet"+File.separator+"namet");

private class Handler implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        try {
        Process p= Runtime.getRuntime().exec("/home/user/workspace/proj2/./generator.out");
        }
        catch(IOException ioex)
        {
            ioex.printStackTrace();
        }
    }
}

public static void main(String[] args) {
    JFrame frame = new JFrame("Contador               ");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JPanel p = new JPanel();
    frame.setContentPane(p);
    p.setLayout(new BoxLayout(p,BoxLayout.Y_AXIS));
    Swingapps app = new Swingapps(p);
    frame.pack();
    frame.setVisible(true);
    }

} 
```

请注意，我是java新手，所以我不太了解这一点。我只需要一个简单的界面来运行这个程序！

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:25:07.320

看一下[ProcessBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)类，这是一个适合您情况的示例：

```
String command = "generator.out";
String arg1    = "sample.da";
String arg2    = "out.bn";
java.io.File workinDir = new java.io.File("/tmp");
ProcessBuilder pb = new ProcessBuilder(command, arg1, arg2);
pb.directory(workinDir);
Process p = pb.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:24:55.483

Just add the arguments as you would do it on the commandline:

```
Runtime.getRuntime().exec(
    "/home/user/workspace/proj2/./generator.out sample.da out.bn"); 
```

Sometimes it works better using the method taking the different parts as an array:

```
Runtime.getRuntime().exec(
    new String[] {"/home/user/workspace/proj2/./generator.out",
        "sample.da", "out.bn"}): 
```

# windows-7 - Windows 7 日文操作系统

> ID：10760741
> 
> 赞同：2
> 
> 时间：2012-05-25T20:05:33.850
> 
> 标签：windows-7, operating-system, windows-7-x64

我使用的是 Windows 7 64 位英文版，但在另一个系统中我也需要日文版。

有什么叫日文操作系统的吗？

拥有日语操作系统或在英语操作系统上安装日语语言包以便以英语显示消息有什么区别。

英文和日文操作系统之间有性能差异吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:25:31.297

您只需将其区域和语言设置更改为日语，包括其格式和显示语言。但首先你必须下载日文输入法。

# c# - Quartz.NET 配置 - 不与 db 交互

> ID：10760745
> 
> 赞同：3
> 
> 时间：2012-05-25T20:05:45.460
> 
> 标签：c#, .net, configuration, quartz.net

我是 Quartz.net 和编写 Windows 服务的完全菜鸟，所以如果这个问题有点不知情，我深表歉意。

无论如何，我设置了一个 Windows 服务来使用quartz.net 来运行另一个进行文件清理的Windows 服务。它安装和运行得很好（至少根据 installutil 和 net start 命令），但它从不向数据库添加任何内容。

我创建了数据库表和所有内容，数据库本身看起来很好。然后，我创建了一个 app.config，其中包含（我认为）我需要用来将这个东西连接到数据库的所有配置设置。但由于某种原因，数据库永远不会被触及。没有创建触发器（我显然是在代码中创建的），没有排队的作业，什么都没有。

它是一个 oracle 数据库，所有权限都设置为允许读/写和一切。

以下是 app.config 的源代码：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="quartz" type="System.Configuration.NameValueSectionHandler, System, Version=1.0.5000.0,Culture=neutral, PublicKeyToken=b77a5c561934e089" />
</configSections>

<quartz>

<add key="quartz.scheduler.instanceName" value="TestQuartzServer" />
<add key="quartz.scheduler.instanceId" value="instance_one" />
<add key="quartz.threadPool.threadCount" value="10" />
<add key="quartz.threadPool.threadPriority" value="Normal" />
<add key="quartz.jobStore.misfireThreshold" value="60000" />
<add key="quartz.jobStore.type" value="Quartz.Impl.AdoJobStore.JobStoreTX, Quartz" />
<add key="quartz.jobStore.useProperties" value="false" />
<add key="quartz.jobStore.dataSource" value="default" />
<add key="quartz.jobStore.tablePrefix" value="QRTZ_" />
<add key="quartz.jobStore.clustered" value="true" />
<add key="quartz.jobStore.lockHandler.type" value="Quartz.Impl.AdoJobStore.SimpleSemaphore, Quartz" />
<add key="quartz.dataSource.default.connectionStringName" value="ConnectionString" />
<add key="quartz.dataSource.default.provider" value="OracleClient-20" />
<add key="quartz.jobStore.driverDelegateType" value="Quartz.Impl.AdoJobStore.StdAdoDelegate, Quartz" />
</quartz>
 <connectionStrings>
    <add name="ConnectionString" connectionString= "Server=localhost;Database=Quartz;Uid=Quartz;Pwd=Quartz" />
</connectionStrings>
</configuration> 
```

这是应用程序源：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.Linq;
using System.ServiceProcess;
using System.Text;
using Quartz;
using Quartz.Impl;
using Quartz.Impl.Triggers;
using System.Collections;

namespace PurgeScheduler1
{

    public partial class Service1 : ServiceBase
    {
        public static IScheduler _scheduler;
        public Service1()
        {
            InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {
            try {
            ISchedulerFactory schedulerFactory = new StdSchedulerFactory();
            _scheduler = schedulerFactory.GetScheduler();
            _scheduler.Start();
            AddJob();
            }
            catch(Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
        }

        protected override void OnStop()
        {
        }

        public static void AddJob()
        {
            IJob myJob = new MyJob();
            JobDetailImpl jobDetail = new JobDetailImpl("Purge", "Group1", myJob.GetType());
            CronTriggerImpl trigger = new CronTriggerImpl("Trigger1", "Group1", "When to run it goes here");
            SimpleTriggerImpl trigger1 = new SimpleTriggerImpl("Trigger2", 10, TimeSpan.FromMinutes(2));
            _scheduler.ScheduleJob(jobDetail, trigger1);
            DateTimeOffset? nextFireTime = trigger.GetNextFireTimeUtc();
            Console.WriteLine("Next Fire Time:" + nextFireTime.Value);
        }
    }
    internal class MyJob : IJob
    {
        public void Execute(IJobExecutionContext context)
        {
            Console.WriteLine("In myJob class");
            Process.Start("correct path, but hiding it for proprietary reasons");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T00:42:16.777

> quartz.dataSource.default.connectionStringName

上面应该是：quartz.dataSource.default.connectionString

请尝试将“quartz.jobStore.clustered”设置为 false。缩小潜在问题的范围。

您应该**不再**需要 installutil 了。quartz 已经为您提供了一个使用 topshelf 的开箱即用的服务器实现。Topshelf 取代了您必须创建一个继承自 ServiceBase 的 windowservice 项目。您可以使用以下命令安装默认服务：Quartz.Server.exe /install，但建议使用 Visual Studio 调试器 - 因为它是一个控制台应用程序，供您调试问题。

[https://github.com/quartznet/quartznet](https://github.com/quartznet/quartznet) 见：Quartz.Server.2010.sln

只需要指定配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:57:26.467

您必须在 app.config 的 configSections 中添加处理程序：

```
<configSections>
     <section name="quartz" type="System.Configuration.NameValueSectionHandler, System, Version=1.0.5000.0,Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
</configSections> 
```

你可以配置一个记录器来做一些调试。我使用 NLog。你可以在[这里](https://stackoverflow.com/questions/6569936/how-do-i-switch-from-log4net-to-nlog-in-quartz-net)找到一个实现。

# cocoa - 从可可编辑系统首选项

> ID：10760748
> 
> 赞同：2
> 
> 时间：2012-05-25T20:06:05.040
> 
> 标签：cocoa, proxy, sandbox, system-preferences

有没有办法使用可可以编程方式编辑系统首选项？是否需要一些框架？我需要这样做来更改全局代理设置。另外，我的应用程序是沙盒的。有没有关于如何做到这一点的示例代码？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T11:17:22.257

您正在寻找系统配置框架，但这并不容易。我认为沙盒应用程序不可能，因为它需要 root 权限。（就像您必须以管理员身份验证才能修改系统偏好设置的网络窗格中的设置。）请参阅[系统配置编程指南](https://developer.apple.com/library/mac/#documentation/networking/Conceptual/SystemConfigFrameworks/SC_Intro/SC_Intro.html)。除其他外，他们说：

> 需要创建或复制集合，或者激活或停用服务的应用程序具有更复杂的任务。他们必须使用低级配置 API。此外，要开发这些应用程序，您必须了解并使用系统配置模式来解释和构建描述新集合和服务的字典。
> 
> 同样重要的是要认识到要修改网络首选项（换句话说，要更改持久存储），您的应用程序必须获得 root 权限。这不是一项微不足道的任务。有关更多信息，您可以阅读授权服务编程指南并查看 [http://developer.apple.com/samplecode/Security/idxAuthorization-date.html](http://developer.apple.com/samplecode/Security/idxAuthorization-date.html)上提供的代码示例 AuthSample 和 MoreAuthSample 。
> 
> 目前，低级配置 API 非常基础，使用起来有些困难。事实上，要执行常见操作，例如创建新集合，您必须将系统配置 API 与 I/O Kit 访问相结合。在 Mac OS X 的未来版本中，系统配置框架可能会提供更高级别的 API 来执行此类网络配置任务。

它继续推荐[MoreSCF 示例代码](https://developer.apple.com/legacy/mac/library/#samplecode/MoreSCF/Introduction/Intro.html)，但它已被归入遗留文档部分。

# spring-mvc - 如何在 JasperReports 的 XLS 视图中显示列标题

> ID：10760752
> 
> 赞同：1
> 
> 时间：2012-05-25T20:06:26.443
> 
> 标签：spring-mvc, jasper-reports

我已经在*Spring MVC上成功配置了**JasperReports*。问题是当我导出为 XLS 时，它不显示列标题。我希望标题显示。我需要添加哪些参数来实现这一点。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:03:33.860

问题解决了 我错误地放了一条横线。我现在已经删除了 HR，一切都很好。*

# scala - 让私有/受保护成员可见的 Scala 魔法？

> ID：10760755
> 
> 赞同：1
> 
> 时间：2012-05-25T20:06:56.237
> 
> 标签：scala, visibility

我正在使用一个 API，其中给出了这样的特征：

```
package pkg

trait Trait { 
  private[pkg] def f = ...
  private[pkg] val content = ...
} 
```

我想使用 Jar 文件中的 API 访问代码中的变量`content`和函数`f`（因此我无法修改原始代码以删除`private`定义）。

作为第一个解决方案，我能够想出的是在同一个包中创建一个新的*桥接*类，它可以帮助我访问私有/受保护的成员函数，如下所示：

```
package pkg

trait PkgBridge {
  def f = Trait.f
  def getContent(t : Trait) = t.content;
} 
```

这样我就可以从我的代码中调用包私有成员。

我想知道这种情况是否有任何复杂的方法或通用模式（比如一些带有隐含的魔法或其他东西？）。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T20:15:44.863

你正在做的工作，可能是做它的好方法，并且是气馁的。

如果某些东西是包私有的，那么它*可能是*一个实现细节，它的接口没有被指定得足够好，以至于冒着暴露任何人的风险*或*允许它完全私有。所以要小心！可能有充分的理由不这样做。

除了反射之外，在 Scala 中获取包私有内容的唯一方法是位于该包中，因此您的方法是合适的。

请注意，此替代方法也可能有用：

```
package pkg {
  trait TraitBridge extends Trait {
    def fBridge = f
    def contentBridge = content
  }
} 
```

然后你可以

```
class MyClass extends TraitBridge { ... } 
```

专门选择您想要访问的扩展程序（以备用名称）。

# google-chrome - Acrobat JavaScript this.submit(url, false) 在 Chrome PDF 查看器上不起作用

> ID：10760756
> 
> 赞同：1
> 
> 时间：2012-05-25T20:06:59.707
> 
> 标签：google-chrome, adobe-javascript

我有一个 PDF 文档，使用表单上的一个按钮，我使用 this.submitForm(url, false); 与 Adob​​e Reader 插件配合使用但不能与 Chrome PDF 查看器配合使用，Chrome PDF 查看器是否使用不同的方法提交表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:43:01.310

Chrome 有自己的 PDF 查看器，称为 Chrome PDF 查看器，而 AcroJS （大部分）不能在 Chrome PDF 查看器上工作。需要检测插件，如果浏览器是 Chrome 自己的，则强制用户使用 Acrobat Reader。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T13:15:50.113

提交表单是 Chrome PDF 查看器尚未实现的功能。请参阅[http://code.google.com/p/chromium/issues/detail?id=65446](http://code.google.com/p/chromium/issues/detail?id=65446)了解详细信息和（缺失的）进度，并为它加星以推动开发人员的兴趣。

# lambda - 消除 Scheme 中的 lambda？

> ID：10760759
> 
> 赞同：3
> 
> 时间：2012-05-25T20:07:14.307
> 
> 标签：lambda, functional-programming, scheme, lambda-calculus

我需要为我的学校作业消除这个 Scheme lambda 结构。

任何想法如何做到这一点？

```
(define (foo x)
(letrec
  ((h 
    (lambda (y z)
      (cond
        ((null? y) 'undefined)
        ((null? (cdr y)) (car z))
        (else (h (cddr y) (cdr z)))
        ))))
  (h x x))
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T20:13:28.890

好吧，您可以将 中的`lambda`表达式替换`letrec`为内部定义：

```
(define (foo x)
  (define (h y z)
    (cond
      ((null? y) 'undefined)
      ((null? (cdr y)) (car z))
      (else (h (cddr y) (cdr z)))))
  (h x x)) 
```

`h`...或者您可以将 ,之外的过程提取`foo`为辅助过程。无论哪种方式，结果都是一样的。

# wpf - 如何访问用户控件的属性

> ID：10760760
> 
> 赞同：1
> 
> 时间：2012-05-25T20:07:16.050
> 
> 标签：wpf, caliburn.micro

我有一个使用 Caliburn.Micro 的应用程序。我的视图包含一个用户控件，其中包含一个选项卡控件。我希望能够从外部 ViewModel 访问该选项卡控件以选择特定选项卡。是否可以？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:12:59.597

标准的 MVVM 方法是将 TabControls *SelectedItem*属性绑定到 viewModel 上的属性。

```
<TabControl ItemsSource="{Binding PropertyToYourViews}"
            SelectedItem="{Binding PropertyToYourSelectedView}">

 </TabControl> 
```

如果您这样做，您的 ViewModel 就不必知道 TabControl 的存在。

下一步取决于您的实施。您的外部 ViewModel 可以简单地保留对子 viewModels *SelectedView*属性的引用并直接访问它，但是，如果您想保持 ViewModels 解耦，那么您将需要实现某种通知系统。我不确定 Caliburn.Micro 的具体细节，但大多数 MVVM 框架为此提供了某种解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T20:13:13.953

实现将取决于您如何设置它，但您可以将视图模型中的变量绑定到 TabControl 的 SelectedItem

# c# - 需要数字的正则表达式，后跟字母，没有空格、破折号、斜杠等

> ID：10760763
> 
> 赞同：0
> 
> 时间：2012-05-25T20:07:37.267
> 
> 标签：c#, regex

我只是不太擅长正则表达式，而且我无法找到接近我需要的东西的例子。在此先感谢您的帮助。这是一个搜索输入框，如果用户已经知道它是数字或数字+字母序列，它将直接将用户带到他们正在寻找的内容

它必须以数字开头，数字可以是 1 到多位数字，数字后面的字母可以是 0、1 或 2 位数字。

通过示例：1 12 123456 123a 1234ab 123456789ab

失败示例：a ab a1 ab12 1abc 123abc 1-a 1_a

你明白了。对于传递的字符串，我还需要将数字与字母分开。

再次感谢。

语言是c#。我需要测试传入的字符串，然后如果它通过正则表达式，则将其拆分为数字和字母部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T20:10:22.600

尝试

```
[0-9]+[a-z]{0,2} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T20:26:05.650

试试这个

```
var regex=new Regex("^(?<numbers>[0-9]+)(?<letters>[a-z]{0,2})$",RegexOptions.IgnoreCase);
var match=regex.Match(testString); 
```

属性`match.Success`告诉你是否成功并且可以获取值

```
var numbers=match.groups["numbers"].Value;

var letters=match.groups["letters"].Value; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T20:09:43.603

这应该有效：

```
/([0-9]+)([a-z]{0,2})/ 
```

根据您使用此正则表达式的语言，获取完整模式匹配和后续子模式匹配的方法可能会有所不同。

编辑：

修改了第二个子模式以不匹配任何字母，或最多匹配 2 个字母。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T20:17:09.963

`/([0-9]+)([a-zA-Z]{0,2})/`首都...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T20:30:08.620

给出的所有答案仍然与失败列表中的 1-a 匹配，所以这是我的补充：

```
\b([0-9]+)([a-z]{0,2})(?!-)\b 
```

测试：1 12 123456 123a 1234ab 123456789ab a ab a1 ab12 1abc 123abc 1-a 1_a

匹配：1 12 123456 123a 1234ab 123456789ab

# python - 打包 Python 鸡蛋时如何排除 .gitignore 中的文件？

> ID：10760764
> 
> 赞同：5
> 
> 时间：2012-05-25T20:07:52.650
> 
> 标签：python, django, egg

我正在打包我的第一个 Django 应用程序，我想从 egg 中删除我的 settings_local.py 文件。理想情况下，我正在寻找一种方法，将 .gitignore 文件中的所有内容也排除在鸡蛋之外。

我在我的 MANIFEST.in 文件中尝试了以下变体（每个鸡蛋创建尝试一个）：

```
prune project_name settings_local.py
prune project_name/settings_local.py
exclude project_name settings_local.py
exclude project_name/settings_local.py 
```

我还尝试在我的 startup.py 文件中添加以下行（在朋友的推荐下）：

```
exclude_package_data= {'': 'settings_local.py'}, 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T20:10:09.140

不要使用 MANIFEST.in 而是使用[`setuptools-git`](http://pypi.python.org/pypi/setuptools-git)；使用该软件包，您的 git 存储库中包含的所有文件也将成为 egg 的一部分，其中列出的任何文件`.gitignore`都不会。

我已经在我的 python 的站点包中全局安装了该包，但它应该足以在您`setup.py`的`setup_requires`结构中列出它：

```
setup(...
    setup_requires=['setuptools-git'],
    ...
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T20:10:25.000

您可以使用`git archive`git 存储库的内容生成一个 zip 文件（就像在新的工作目录中一样）。然后，您可以根据需要使用这些文件来打包鸡蛋。

参见： [git 存档](http://www.kernel.org/pub/software/scm/git/docs/v1.7.3/git-archive.html)

# c++ - 在保持纵横比的同时在中心绘制图像

> ID：10760767
> 
> 赞同：0
> 
> 时间：2012-05-25T20:08:10.900
> 
> 标签：c++, gdi+

第 1 部分：在我的一个项目中，我想使用 GDI+ 在自定义控件的中心显示图像，同时保持图像的纵横比。这是我的代码

```
Gdiplus::Image image(imagePathWStr); // imagePathWStr is the Image Path

int originalWidth = image.GetWidth();
int originalHeight = image.GetHeight();

// This code calculates the aspect ratio in which I have to draw the image
int16 cntrlwidth = controlPosition.right - controlPosition.left;  // controlPosition is the custom Control Rect
int16 cntrlheigth = controlPosition.bottom - controlPosition.top;
float percentWidth = (float)cntrlwidth / (float)originalWidth;
float percentHeight = (float)cntrlheigth / (float)originalHeight;

float percent = percentHeight < percentWidth ? percentHeight : percentWidth;

int newImageWidth = (int)(originalWidth * percent);
int newImageHeight = (int)(originalHeight * percent);

Gdiplus::RectF imageContainer;
imageContainer.X = controlPosition.left;
imageContainer.Y = controlPosition.top;
imageContainer.Width = controlPosition.right;
imageContainer.Height = controlPosition.bottom;

Gdiplus::Graphics gdiGraphics(hDC);
Gdiplus::Unit scrUnit = Gdiplus::UnitPixel;
gdiGraphics.DrawImage(&image, imageContainer, 0, 0, originalWidth, originalHeight, scrUnit); 
```

但是，当控件垂直调整大小时，图像会向右移动并且并不总是保持在中心位置，此外，当控件水平调整大小时，它也会移动到底部。我不知道为什么。我在 Windows 上使用 C++。

第 2 部分：现在我在此之上还绘制了一个 Rectangle

```
Gdiplus::RectF cropRect;
cropRect.X = 100;
cropRect.Y = 100;
cropRect.Width = 300;
cropRect.Height = 300;

Gdiplus::Pen* myPen = new Gdiplus::Pen(Gdiplus::Color::White);
myPen->SetWidth(3);
gdiGraphics.DrawRectangle(myPen, cropRect); 
```

现在，当我调整控件的大小时，图像的大小得到了正确的调整，但这个矩形不是，我相应地乘以宽度和高度

```
Gdiplus::RectF cropRectangle;
cropRectangle.X = cropRect.GetLeft();
cropRectangle.Y = cropRec.GetTop();
cropRectangle.Width = (cropRec.Width)* percent;
cropRectangle.Height = (cropRec.Height ) * percent; 
```

在 Adrians 回答之后，我的第 1 部分已得到解决，现在我被困在问题的第 2 部分中

谢谢

-潘卡伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:14:11.260

当控件的大小发生变化时，您将在窗口中发布一条 WM_SIZE 消息。您必须根据新尺寸刷新纵横比。

# c++ - 我可以将 std::array 转换为切片吗？或者还有什么我可以代替的吗？

> ID：10760773
> 
> 赞同：5
> 
> 时间：2012-05-25T20:08:40.733
> 
> 标签：c++, arrays, stl, c++11

这是未定义的行为吗？

```
std::array<int, 5> x = {3, 5, 1, 2, 3};
std::array<int, 3>& y = *reinterpret_cast<std::array<int, 3>*>(&x[1]);
for(int i = 0; i != 3; i++) {
    std::cout << y[i] << "\n";
} 
```

也许是的，但我真的觉得应该有一种**安全**的方式来切片`std::array`s。

**编辑：**遵循 Radek 的建议：

```
template<unsigned N, unsigned start, unsigned end, typename T>
std::array<T, end - start>& array_slice(std::array<T, N>& x)
{
    static_assert(start <= end, "start <= end");
    static_assert(end <= N-1, "end <= N");
    return *reinterpret_cast<std::array<T, end - start>*>(&x[start]);
} 
```

**编辑：**好的，我决定我对`std::array`s 不满意，会转向别的东西，有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T20:12:29.663

是的，这是未定义的行为。您正在采用一种类型并将`reinterpret_cast`其转换为另一种类型。确实，使用`reinterpret_cast`应该是“这里有龙！”的大红旗！

至于切片数组，这不会发生。A`std::array`包含值；其中的一部分将包含对该数组的一部分的*引用。*因此，它不会是`std::array`. 您可以*复制*数组切片，但不能使用`std::array`. 您需要使用`std::vector`，因为它允许调用构造函数，以及从一系列值进行构造。请记住：`std::array`它只是 C 样式数组的一个更好的包装器。

委员会正在研究一个模板`array_ref<T>`类，这正是它所说的：对类型数组的某些段的引用`T`。这可以是一个常规的 C 风格的数组， a `std::vector`， a `std::array`，或者只是一些用 分配的内存`new T[]`。已经有[一些类的库实现](https://code.google.com/p/cxx1y-array-string-ref/)，但还没有标准化。

* * *

> 遵循 Radek 的建议：

在函数中隐藏未定义的行为*不会使其成为已定义的行为*。你可以试着假装它不是未定义的，但它仍然是。在你使用它的那一刻`reinterpret_cast`，你心甘情愿地放弃生活在 C++ 领域。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-06T15:53:28.790

新的展示位置怎么样？

```
#include <array>
#include <iostream>
#include <iterator>

template<typename T, std::size_t N>
struct array_slice : public std::array<T,N> {
    ~array_slice() = delete; 
};

int main() {
    std::array<double,4> x_mu{0.,3.14,-1.,1.};
    std:: cout << &x_mu << std::endl;

    {
        auto slicer = [] (std::array<double,4>& ref) {
            array_slice<double,3>* p = new (&ref) array_slice<double,3>;
            return p;
        };    

        std::array<double,3>& x_  = *slicer(x_mu);
        std::copy(x_.begin(),x_.end(),
              std::ostream_iterator<float>(std::cout," "));
        std:: cout << std::endl;
        std:: cout << &x_ << std::endl;
    }

    std::copy(x_mu.begin(),x_mu.end(),
              std::ostream_iterator<float>(std::cout," "));
} 
```

# objective-c - 当 textview 处于焦点时，SDK 安全的方法来隐藏 iPad 键盘

> ID：10760774
> 
> 赞同：4
> 
> 时间：2012-05-25T20:08:40.983
> 
> 标签：objective-c, ios, ipad, uiview

我有一些 iPad 应用程序，用户将在其中使用触摸屏或蓝牙键盘进行导航。我有一些隐藏的 textView 处于焦点（第一响应者），在这里我检测到从键盘输入的内容。

但是，当我断开键盘时，我遇到了一个问题，出现了虚拟键盘。

**我可以检查蓝牙键盘是否已连接，并在 viewDidLoad 或其他内容中设置或退出第一响应者吗？**

**或者**

我有通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillAppear:) name:UIKeyboardWillShowNotification object:nil]; 
```

**触发keyboardWillAppear时，我可以以某种方式隐藏键盘吗？** 我试过 [textView resignFirstResponder]，但没有成功：|

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T00:58:24.030

您可以将 inputView 设置为透明视图：

```
UIView *emptyView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 0, 0)];
emptyView.backgroundColor = [UIColor clearColor];
textView.inputView = emptyView; 
```

从理论上讲，这会将屏幕键盘设置为空视图，因此它不可见。如果它不接受没有框架的视图，则尝试将宽度和高度设置为 1。它不会影响外部键盘；它只是不会出现在设备上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T20:32:38.300

您可以为此使用 performSelector:。

```
- (void)hideKeyboard:(UITextView *)textView {
    [textView resignFirstResponder];
}

- (void)keyboardWillAppear:(NSNotification *)notification { 
    UITextView *textView = (UITextView *)[self.view viewWithTag:TEXTVIEW_TAG];

    [self performSelector:@selector(hideKeyboard:) withObject:textView];
}

- (void)viewDidLoad {
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillAppear:) name:UIKeyboardWillShowNotification object:nil];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T22:33:00.590

您必须安排 textView 的第一响应者辞职到调度队列，因为成为第一响应者的过程可能还没有完成。使用 XCode 的调度模板的简单解决方案：

```
int64_t delayInSeconds = 0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    [self.textView resignFirstResponder];
}); 
```

# reporting-services - .NET 报表查看器中的奇怪边框

> ID：10760777
> 
> 赞同：1
> 
> 时间：2012-05-25T20:09:00.483
> 
> 标签：reporting-services, report, border, viewer, .net

我是 SSRS 报告的新手。我的报告查看器有问题。我有一张桌子。表格行中的一列是数字，另一列是子报表。只有第一行正确显示子报表边框。其他行（第 2 行、第 3 行等）的子报表中的边框很奇怪。显示了一些边界，而没有显示一些边界。子报表上的边框没问题，这很好，但它们在主报表上显示不正确。

我怎么解决这个问题？这与列的宽度和高度有关吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:12:25.373

尝试为子报告设置边框。如果这不起作用，请尝试为表格中的单元格设置边框并检查。

PS：如果您可以共享快照会很有帮助。甚至我之前也遇到过一些这样的问题！

# android - 检索和解析 JSON

> ID：10760778
> 
> 赞同：0
> 
> 时间：2012-05-25T20:09:02.213
> 
> 标签：android, json, web-services

从 Web 服务检索 JSON 并解析它的最简单方法是什么？不使用任何额外的插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T09:40:49.257

这是检索 JSON 数据并对其进行解析的最佳方式，我已经在我的项目中使用过它，并且效果很好。查看本[教程](http://www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php)（也提供源代码）。如果你使用 JSON，你肯定需要谷歌 gson 库来将 Java 对象转换为它们的 JSON 表示。你可以从[这里](http://grepcode.com/snapshot/repo1.maven.org/maven2/com.google.code.gson/gson/1.7.1)下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:38:22.793

下面的代码应该为您提供一个起点，只需在活动/服务类中使用它。它从 URL（Web 服务）获取数据，并将其转换为您可以使用的 JSON 对象。

```
StringBuilder stringBuilder =  new  StringBuilder();
HttpClient client =  new  DefaultHttpClient();
HttpGet httpGet = new  HttpGet(***Put your web service URL here ***)
try
{
    HttpResponse response = client.execute(httpGet);
    StatusLine statusLine = response.getStatusLine();
    int  statusCode = statusLine.getStatusCode();
    if (statusCode == 200)
    {
        HttpEntity entity = response.getEntity();
        InputStream content = entity.getContent();
        BufferedReader reader = new  BufferedReader(
        new  InputStreamReader(content));
        String line;
        while ((line = reader.readLine()) != null)
        {
           stringBuilder.append(line);
        }
     }
} 
catch (ClientProtocolException e)
{
    e.printStackTrace();
}
catch (IOException e)
{
     e.printStackTrace();
}

//Turn string JSON into object you can process
JSONArray jsonArray = new JSONArray(stringBuilder.toString());
for  (int  i = 0; i < jsonArray.length(); i++)
{
     //Get Each element
     JSONObject jsonObject = jsonArray.getJSONObject(i); 
     //Do stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T20:12:05.323

如果您想要标准程序，那么您需要使用`JSONObject`并`JSONArray`解析响应。但是，当您的响应字符串包含复杂的结构时，它会变得模糊和繁琐。为了处理如此复杂的响应，最好关闭对[Gson](http://code.google.com/p/google-gson/)、[Jackson](http://jackson.codehaus.org/)或任何其他库的解析。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T20:14:05.893

你应该看看这里：[http ://code.google.com/p/android-query/wiki/AsyncAPI](http://code.google.com/p/android-query/wiki/AsyncAPI)

一切都解释了，你需要的代码示例。

# c++ - Qt - 如何在两个 QVBoxLayouts 之间更改 QPushButton

> ID：10760782
> 
> 赞同：1
> 
> 时间：2012-05-25T20:09:26.173
> 
> 标签：c++, qt, layout, qt-creator

所以我有一个名为“vboxmain”的主要布局。该程序有两种状态：二十一点和扑克。对于两者，我都有一个按钮。在这个 vboxmain 中，我有一个上部，它涵盖了大部分程序，并且对于两个游戏都是相同的，但我还有一个底部，它应该显示两个游戏的不同部分。例如，扑克游戏应该包含五个 QCheckBox 和一个按钮。至于二十一点游戏，我只需要两个按钮。我将这两个底部布局都创建为 QVBoxLayouts。所以现在我有：

```
BlackjackiValikud = new QVBoxLayout; //for blackjack
Pokkerivalikud = new QVBoxLayout;  //for poker 
```

我尝试创建两个这样的按钮操作：

```
void mainwindow::BlackJack_clicked(){
    vboxmain->removeItem(Pokkerivalikud);
    vboxmain->addItem(BlackjackiValikud);
}

void mainwindow::Poker_clicked(){
    vboxmain->removeItem(BlackjackiValikud);
    vboxmain->addItem(Pokkerivalikud);
} 
```

按钮连接如下：

```
connect(BlackjackButton, SIGNAL(clicked()), this, SLOT(BlackJack_clicked()));
connect(PokerButton, SIGNAL(clicked()), this, SLOT(Poker_clicked())); 
```

但目前它不起作用，我想不出办法做到这一点，所以我正在寻求帮助。这可能也不是最好的方法，但我不知道其他方法。所以我可以使用一些帮助来了解如何使用任何解决方案来完成这项工作 - 这样我就可以使用这两个按钮根据需要更改我的 vboxmain 的底部。

我对解决方案持开放态度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T20:25:10.507

你说它不起作用是什么意思？

您必须确保在添加布局时启用布局（通过`QLayout::setEnabled ( bool enable)`）或小部件可见（通过`QWidget::show()`）。通常，您必须使添加到已经可见的小部件中的可见项目...

另一种方法是使用[QStackedLayout](http://qt-project.org/doc/qt-4.8/qstackedlayout.html#details)来显示。您有一个`poker`用于扑克视图的小部件和一个`blackjack` 用于黑杰克视图的小部件。按下按钮时，您可以使用

```
void QStackedLayout::setCurrentIndex ( int index )
void QStackedLayout::setCurrentWidget ( QWidget * widget ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:21:44.690

You may want to keep the layouts and change what's presented in the bottom layout. To do so, create classes for each game(say blakjackWidget and pokerWidget) derived from QWidget. and show only one of them in the bottom layout.

# php - 没有自动递增 ID 列时，如何获取上一条和下一条记录？

> ID：10760784
> 
> 赞同：1
> 
> 时间：2012-05-25T20:09:34.727
> 
> 标签：php, mysql

想象一下，我有一张名为**fruits**的桌子，如下所示。

```
 |   id    |    fruit     |   colour    |
  |--------------------------------------|
1 |  ptiru  |    Grape     |  Green/Red  |
2 |  wlk3b  |    Banana    |   Yellow    |
3 |  i9nuc  |  Strawberry  |     Red     | 
```

让我们关注 ID 列。您可以看到它不是一个自动递增的整数，每次都会增加 +1。但相反，它是 5 个数字/字母的随机组合。

如果我选择了第二条记录（香蕉），那么我将如何选择上一条记录（葡萄）和下一条记录（草莓）？

等不及回答了；）谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:15:49.557

`($i = 0)`在循环之前将变量设置为 0 ，该变量将在循环内递增`($i++)`。增加值后，用于`mysql_data_seek($result,$i)`获取下一条记录或`mysql_data_seek($result,($i - 2))`上一条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:39:51.407

`SELECT @rownum := @rownum AS position, f.* from fruits f, (select @rownum:=0 r ) r`

此查询将为您提供如下结果集：

```
+----------+-------+------------+
| position | id    | fruit      |
+----------+-------+------------+
|        1 | ptiru | Grape      |
|        2 | wlk3b | Banana     |
|        3 | i9nuc | Strawberry |
+----------+-------+------------+ 
```

然后，您可以将它们加载到代码中的数组中，并根据需要使用索引查找下一个/上一个水果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T15:54:24.193

经过一些阅读，您将无法做到这一点，因为顺序不必相同。

当您使用索引或 PK 创建表时，您的行将有一个顺序，并且您没有指定是否有顺序，也没有指定在哪一行，因此您可能没有顺序。

当您创建一个没有索引的表并开始插入时，最后一个插入将显示为最后一个，但是如果您进行一些修改，行会改变位置，请查看此[链接](https://stackoverflow.com/questions/1949641/mysql-row-order-for-select-from-table-name/1949663#1949663)

因此，如果您想知道“香蕉”之前是什么，请添加一个索引，它将按顺序排序，或者如果您想按随机排序并在最好的方法是使用存储过程或函数之前获取值，游标和变量。

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T20:11:47.237

在这里冒险，因为我从未见过这样的事情，但我会说“id”列不是真正的 id ......它可能是唯一的键，但不是真正的 ID。我会添加一个自动增量列，然后从那里开始......

# redis - 按数据库分割 Redis

> ID：10760786
> 
> 赞同：4
> 
> 时间：2012-05-25T20:09:43.730
> 
> 标签：redis, key, time-complexity

默认情况下，Redis 配置了 16 个数据库，编号为 0-15。这只是名称间距的一种形式，还是按数据库隔离对性能有影响？

例如，如果我使用默认数据库 (0)，并且我有 1000 万个键，则最佳实践建议使用**keys**命令通过通配符模式查找键效率低下。但是，如果我存储我的主要密钥，可能是 8 个段密钥中的前 4 个段，从而在单独的数据库（例如数据库 3）中生成更小的密钥子集，该怎么办。Redis 会将这些视为一组较小的键，还是所有数据库中的所有键都显示为一个巨大的键索引？

更明确地说，就时间复杂度而言，如果我的数据库如下所示：

*   数据库 0：10,000,000 个密钥
*   数据库 3：10,000 个密钥

**对数据库 3 的键**调用的时间复杂度是***O(10m)***还是***O(10k)***？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T04:40:13.383

Redis 对每个数据库都有一个单独的字典。从您的示例中，对数据库 3 的键调用将是 O(10K)

也就是说，使用`keys`是违反最佳实践的。此外，为同一个应用程序使用多个数据库也违反了最佳实践。如果要遍历键，则应以特定于应用程序的方式对它们进行索引。SortedSet 是构建索引的好方法。

参考 ：

1.  该结构`redisServer`有一个数组`redisDB`。[请参阅 redis.h 中的 redisServer](https://github.com/antirez/redis/blob/unstable/src/redis.h#L560)
2.  每个`redisDB`都有自己的字典对象。[请参阅 redis.h 中的 redisDB](https://github.com/antirez/redis/blob/unstable/src/redis.h#L290)
3.  `keys`命令对当前数据库的字典进行操作

# html - Firefox 中的文本描边和阴影 CSS3

> ID：10760789
> 
> 赞同：10
> 
> 时间：2012-05-25T20:09:57.987
> 
> 标签：html, firefox, css

我想知道是否有一种方法可以为文本添加描边和阴影，我可以让它在 Chrome 和 Safari 中工作，因为 webkit 支持文本描边和文本阴影。我可以在 Firefox 中显示中风，但这是使用文本阴影并使用偏移量。那么有人知道解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-25T20:24:07.290

该`text-stroke`属性不是标准 CSS 规范的一部分，因此最好避免使用它——Chrome 有权随时将其移除。

没错，您可以`text-stroke`使用多个逗号分隔`text-shadow`的 s 创建类似效果 - 事实上，您也可以使用相同的技术来添加“实际”阴影：

```
h1 {
  font-size: 6em;
  font-weight: bold;
  text-shadow: 1px  1px 0   #F00,
              -1px -1px 0   #F00,
               1px -1px 0   #F00,
              -1px  1px 0   #F00,
               3px  3px 5px #333;
}
```

```
<h1 style="margin:0">Hello World</h1>
```

不过要小心，因为`text-shadow`IE9 及更低版本也不支持。我建议仅将它用于非必要的样式：确保当阴影/人造轮廓不存在时文本仍然具有可读性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-18T15:37:27.680

Firefox 48 现在支持文本笔划（*带有*`-webkit`前缀），以及其他一些特定于 webkit 的属性（如）`-webkit-text-fill-color`。请注意规范实际上并不存在，并且将来可能会发生变化。

这是一个现在可以在 Firefox 中运行的示例：

```
.outline {
  -webkit-text-stroke: 1px red;
}

span:first-of-type { 
  display: block;
  font-size: 24pt;
  font-weight: bold;
}
```

```
<span class="outline">This text has a stroke.</span>
<span class="outline">(Even in Firefox)</span>
```

请参阅 Mozilla 网站：

[https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-text-stroke](https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-text-stroke)

# java - Java7 Update4 中的 SecurityManager 和 XSLT 扩展损坏了吗？

> ID：10760798
> 
> 赞同：4
> 
> 时间：2012-05-25T20:10:37.597
> 
> 标签：java, security, xslt, java-7, xslt-extension

Java 应用程序 FreeMind 使用 XSLT 从旧文件进行更新。XSLT 使用静态 java 函数来简化字符串操作。这在 Java 7 update 2 之前都可以正常工作，并在 windows 下的 java7 update 4 中给出以下异常：

```
STDERR: ERROR:  'The first argument to the non-static Java function 'replaceSpacesToNonbreakableSpaces' is not a valid object reference.'
STDERR: FATAL ERROR:  'Could not compile stylesheet'May 26, 2012 10:50:06 PM freemind.main.Resources logException
SEVERE: An exception occured: 
javax.xml.transform.TransformerConfigurationException: Could not compile stylesheet
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(Unknown Source)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTransformer(Unknown Source)
    at freemind.main.Tools$1TransformerRunnable.run(Tools.java:1023)
    at java.lang.Thread.run(Unknown Source) 
```

把它归结为一个最小的例子，它出现了，自定义 SecurityManager 是罪魁祸首。如果设置，代码将失败。如果注释掉，代码就可以工作。有谁知道，在更新 2 和更新 4 之间 java7 的安全系统发生了什么变化，或者还有什么可能导致这种情况？

这是一个更简单的示例：

```
package freemind.main;

import java.io.StringReader;
import java.io.StringWriter;

import javax.xml.transform.Result;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.stream.StreamResult;
import javax.xml.transform.stream.StreamSource;

public final class FreeMindSecurityTest  {

    public static void main(String[] args) throws Exception {
        // if commented out, this program works as expected.
        System.setSecurityManager(new SecurityManager());
        String input = "<map version=\"0.9.0\">"
                + "</map>";
        String xslt = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>"
                + "     <xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" xmlns:FreeMindSecurityTest=\"xalan://freemind.main.FreeMindSecurityTest\" exclude-result-prefixes=\"FreeMindSecurityTest\">"
                + "         <xsl:template               match=\"/ | node() | @* | comment() | processing-instruction()\">"
                + "             <xsl:value-of select=\"FreeMindSecurityTest:replaceSpacesToNonbreakableSpaces('test')\"/>"
                + "         </xsl:template>" + "        </xsl:stylesheet>";
        StringWriter writer = new StringWriter();
        final Result result = new StreamResult(writer);

        final StreamSource sr = new StreamSource(new StringReader(input));
        // create an instance of TransformerFactory
        TransformerFactory transFact = TransformerFactory.newInstance();
        Transformer trans = transFact.newTransformer(new StreamSource(
                new StringReader(xslt)));

        trans.transform(sr, result);

        System.out.println("Transformed: " + writer.getBuffer());
        writer.close();
    }

    public static String replaceSpacesToNonbreakableSpaces(String input) {
        return input;
    }

} 
```

简而言之，java 认为该方法不是静态的（但它是静态的）并且错过了对象引用。

TIA，来自 FreeMind 的 Chris

编辑：添加了最短的示例（只需设置普通安全管理器的副本即可）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:28:38.860

[JAXP 1.4.6（在 Java 7 Update 4 中）](http://jaxp.java.net/1.4/1.4.6/ReleaseNotes.html)中可能存在错误。Java 7u4 的一个变化是升级到了 JAXP 1.4.6，请参阅[Java Release Notes](http://www.oracle.com/technetwork/java/javase/7u4-relnotes-1575007.html)。

一种解决方法/解决方案（可能不是最佳选择）是通过[Java endorsed folder](http://rakeshdiscovery.blogspot.de/2008/12/xalan-java-xsltc.html)使用 Xalan 2.7.1 而无需额外的补丁。（将 xalan 2.7.1 jar 复制到`jre/libs/endorsed`中）或使用 Xalan 作为第三方库。

它在带有 J7U4 和 Xalan 2.7.1 的 Linux64 上为我工作

```
Transformed: <?xml version="1.0" encoding="UTF-8"?>test 
```

# silverlight - Silverlight 4：退出浏览器，打开新窗口？

> ID：10760803
> 
> 赞同：1
> 
> 时间：2012-05-25T20:11:16.317
> 
> 标签：silverlight, navigation, popup, window

我疯狂地用谷歌搜索，但我找不到任何关于从 OOB silverlight 4 应用程序打开新 OOB 窗口的有效方法。

我找到了手动启动要弹出的 Web 浏览器窗口的方法，但没有找到另一个非模态的 OOB silverlight 子窗口。

显然此功能在 Silverlight 5 中，但截至目前，从 4 升级到 5 不是一个可行的选择。

有没有人想出任何解决方法或技巧来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:24:52.087

我能够调整/修改其中一些代码以提出解决方案：

[http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2010/09/16/silverlight-out-of-browser-and-multiple-windows.aspx](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2010/09/16/silverlight-out-of-browser-and-multiple-windows.aspx)

# java - 在完成 AsyncTask 后如何处理关闭 DialogFragment（兼容性库）

> ID：10760809
> 
> 赞同：13
> 
> 时间：2012-05-25T20:11:57.673
> 
> 标签：java, android, android-fragments

有很多关于如何在 AsyncTask 期间处理配置更改的帖子，但是我没有找到一个关于 AsyncTask 完成并尝试关闭 DialogFragment（兼容性库）时处于后台的应用程序（onPause()）的明确解决方案。

这是问题所在，如果我有一个正在运行的 AsyncTask 应该在 onPostExecute() 中关闭 DialogFragment，如果应用程序在后台尝试关闭 DialogFragment 时，我会收到 IllegalStateException。

```
private static class SomeTask extends AsyncTask<Void, Void, Boolean> {

    public SomeTask(SomeActivity tActivity)
    {
        mActivity = tActivity;
    }

    private SomeActivity mActivity;

    /** Set the view during/after config change */
    public void setView(Activity tActivity) {
        mActivity tActivity;
    }

    @Override
    protected Boolean doInBackground(Void... tParams) {
        try {
          //simulate some time consuming process
          TimeUnit.SECONDS.sleep(3);
        } catch (InterruptedException ignore) {}
        return true;
    }

    @Override
    protected void onPostExecute(Boolean tRouteFound) {
        mActivity.dismissSomeDialog();  
    }

} 
```

活动如下所示：

```
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;

public class SomeActivity extends FragmentActivity {

    public void someMethod() {
        ...
        displaySomeDialog();
        new SomeTask(this).execute();
        ...
    }

    public void displaySomeDialog() {
        DialogFragment someDialog = new SomeDialogFragment();
        someDialog.show(getFragmentManager(), "dialog");
    }

    public void dismissSomeDialog() {
        SomeDialogFragment someDialog = (SomeDialogFragment) getFragmentManager().findFragmentByTag("dialog");
        someDialog.dismiss();
    }

    ....

} 
```

工作正常，除非应用程序在 SomeTask 仍在运行时切换到后台。在这种情况下，当 SomeTask 尝试关闭SomeDialog() 时，我会收到 IllegalStateException。

```
05-25 16:36:02.237: E/AndroidRuntime(965): java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState 
```

我看到的所有帖子似乎都指向了一些笨拙的方向，并提供了精心设计的解决方法。是不是有一些android的方式来处理这个？如果它是 Dialog 而不是 DialogFragment，那么 Activity 的 dismissDialog() 将正确处理它。如果它是一个真正的 DialogFragment 而不是来自 ACP 的一个，那么 dismissAllowingStateLoss() 将处理它。DialogFragment 的 ACP 版本不是有这样的东西吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-08-21T15:15:51.507

片段被保存为每个活动状态的一部分，因此在`onSaveInstanceState()`技术上调用之后执行事务是没有意义的。

在这种情况下，您绝对不想使用`commitAllowingStateLoss()`来避免异常。以这种情况为例：

1.  Activity 执行一个`AsyncTask`. 显示`AsyncTask`并开始`DialogFragment`在`onPreExecute()`后台线程上执行其任务。
2.  用户单击“主页”，然后`Activity`停止并强制进入后台。系统认为该设备的内存非常低，因此它决定它也应该销毁该设备`Activity`。
3.  `AsyncTask`完成并被`onPostExecute()`调用。在里面`onPostExecute()`你解雇了`DialogFragment`using`commitAllowingStateLoss()`以避免异常。
4.  用户导航回`Activity`. 将根据的保存状态`FragmentManager`恢复其片段的状态。`Activity`已保存的状态在调用后不知道任何内容，因此即使已完成，也不会记住`onSaveInstanceState()`关闭的请求，并且将恢复。`DialogFragment``DialogFragment``AsyncTask`

由于偶尔会发生此类奇怪的错误，因此`commitAllowingStateLoss()`避免此异常通常不是一个好主意。因为`AsyncTask`回调方法（响应后台线程完成其工作而调用）与`Activity`生命周期方法（由系统服务器进程调用以响应系统范围的外部事件，例如设备掉落睡着了，或者内存不足），处理这些情况需要你做一些额外的工作。当然，这些错误极为罕见，保护您的应用免受这些错误的影响通常不会是 Play 商店中 1 星评级和 5 星评级之间的区别......但仍然需要注意这一点。

希望这至少有一些意义。另外，请注意`Dialog`s 也作为`Activity`s 状态的一部分存在，因此尽管使用普通 old`Dialog`可能会避免异常，但您基本上会遇到相同的问题（即，当' 状态稍后恢复`Dialog`时，将不会记住取消s ） `Activity`.

坦率地说，最好的解决方案是避免在`AsyncTask`. 一个更加用户友好的解决方案是在`ActionBar`（例如 G+ 和 Gmail 应用程序）中显示一个不确定的进度微调器。响应异步回调而导致用户界面发生重大变化对用户体验不利，因为它是意料之外的，并且会突然将用户从他们正在做的事情中拉出来。

有关更多信息，请参阅[**此主题的博客文章**](http://www.androiddesignpatterns.com/2013/08/fragment-transaction-commit-state-loss.html)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-26T23:46:01.990

要解决非法状态异常问题并从本质上实现dismissAllowingStateLoss()，可以使用以下方法完成。

```
getFragmentManager().beginTransaction().remove(someDialog).commitAllowingStateLoss(); 
```

这应该可以在没有 hacky 代码的情况下解决问题。如果您有线程通过处理程序与使用 dialog.show() 的 UI 线程进行通信，则同样可以应用于 show；这也可能导致非法状态异常

```
getFragmentManager().beginTransaction().add(someDialog).commitAllowingStateLoss(); 
```

* * *

鉴于海报的问题，@joneswah 是正确的。如果您使用的是支持库，请替换

```
getFragmentManager() 
```

和

```
getSupportFragmentManager() 
```

* * *

对于未来的 Google 员工：@Alex Lockwood 对此解决方案提出了良好且有效的担忧。该解决方案确实解决了错误并且在大多数情况下都可以工作，但从用户体验的角度来看，暗示原始问题中的方法存在问题。

Activity 应该假设异步任务可能没有完成并且它不会执行 onPostExecute()。无论 UI 操作（即微调器，理想情况下不是对话框）启动以通知用户异步操作，都应提供在超时或跟踪状态并检查 onRestore/onResume 类型生命周期事件时自动停止以确保UI 已正确更新。服务也可能值得研究。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T17:30:04.927

如果 onPostExecute() 要更新 UI，您应该在 onPause() 中取消 AsyncTask。当您的活动已暂停时，您不应尝试更新 UI。

例如。在您的 onPause() 中：

```
if (task != null) task.cancel(true); 
```

如果您希望任务中的更改持续到下一次，则将数据/更改存储在 doInBackground() 中，然后在您的活动/片段/对话框恢复时更新 UI。

如果您不希望任务中的更改持续存在，则在 onPostExecute() 之前不要存储更改

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T20:49:08.180

当 Android 因为用户点击返回或主页按钮而停止您的应用程序时，您的对话框会为您关闭。通常诀窍是保留 onStop()/onStart() 之间的对话。因此，除非您需要做的不仅仅是关闭对话框，否则我会说不要担心。

编辑：在托管对话框的活动中，如果对话框仍然在 onStop() 中打开，您可能仍希望关闭对话框。这有助于防止内存泄漏。但这不需要从 AsyncTask 触发。

就像我上面说的，问题是当你再次点击 onStart() 并且你的 AsyncTask 还没有完成时会发生什么。您需要找到一种方法来确定并在需要时重新打开该对话框。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T19:56:00.923

经过多次重新设计后，我最终确定了一种似乎可行的方法。但是，在 Android 开发的讨论中，我无法在其他地方找到我的设计的某些方面的文档。所以我会对任何反馈感兴趣。

总之，我必须做的是：

*   onSaveInstanceState() - 如果 SomeTask 正在运行，我使用一个简单的锁来阻止 SomeTask 在暂停期间退出 doInBackground()。
*   onResume() - 我必须放入一个 switch 语句来处理不同的恢复情况。如果启动应用程序我什么都不做，因为什么都没有暂停，如果在隐藏或配置更改后重新启动，我会释放锁定，以便保留的 SomeTask 实例可以从它停止的地方恢复，等等。
*   onDestroy() - 如果 SomeTask 正在运行，我会取消它。

我将把这个解决方案的代码片段放在我原来的帖子中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-09T15:57:37.763

`getActivity().finish();`在`DialogFragment`为我工作。

# google-maps - 关闭谷歌地图上的道路覆盖

> ID：10760813
> 
> 赞同：6
> 
> 时间：2012-05-25T20:12:23.677
> 
> 标签：google-maps

我想关闭谷歌地图上的道路/高速公路标记。我查看了[https://developers.google.com/maps/documentation/javascript/reference#MapTypeStyleFeatureType](https://developers.google.com/maps/documentation/javascript/reference#MapTypeStyleFeatureType)并在[http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/上使用了向导索引.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)。但是，我选择的任何选项都没有关闭道路/高速公路标记。理想情况下，我想添加自己的路径（例如航空公司航班），但道路标记会将它们扔掉。

使用向导，我得到了这个： [http://maps.googleapis.com/maps/api/staticmap?center=42.629586,-83.822497&zoom=9&format=png&sensor=false&size=640x480&maptype=roadmap&style=feature:administrative.country|visibility：开启&style=hue:0x0099ff&style=element:labels|hue:0xff0000](http://maps.googleapis.com/maps/api/staticmap?center=42.629586,-83.822497&zoom=9&format=png&sensor=false&size=640x480&maptype=roadmap&style=feature:administrative.country|visibility:on&style=hue:0x0099ff&style=element:labels|hue:0xff0000)。我喜欢这个，但我想关闭所有的道路标记。任何人都知道如何转向这样做。

谢谢，比尔N

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T21:00:59.110

您可以使用样式生成器移除道路或道路标签。如果您使用的是 V3 javascript api。样式 JSON 看起来像

```
[ { featureType: "road", stylers: [ { visibility: "off" } ] },{ } ] 
```

这是一个没有道路的静态链接。

[http://maps.googleapis.com/maps/api/staticmap?center=45.95115,-113.884277&zoom=7&format=png&sensor=false&size=640x480&maptype=roadmap&style=feature:road|visibility:off](http://maps.googleapis.com/maps/api/staticmap?center=45.95115,-113.884277&zoom=7&format=png&sensor=false&size=640x480&maptype=roadmap&style=feature:road|visibility:off)

# meteor - 我可以订阅 Meteor Session 以获取响应式模板渲染更新吗？

> ID：10760819
> 
> 赞同：1
> 
> 时间：2012-05-25T20:13:00.270
> 
> 标签：meteor

有没有办法订阅 Meteor Session 对象，以便在 Session 对象上设置数据时自动呈现反应式模板视图？特别是键/名称和值数据？

我有一个与迭代时渲染 Meteor Session 对象数据相关的类似问题。这个问题是故意不同的。我想以另一种方式得到答案，并且可能以更好的方式来做同样的事情。

我不想调用 Session.get('name'); 这个用例是因为我不知道 Session 对象中的名称。

所以，我希望能够在车把上放一些东西，让我能够

伪代码...

```
{{#each Session}}
 {{this.key}} {{this.value}}
{{/each}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T03:29:03.130

不确定是否订阅会话，但对于问题的第二部分，您可以使用：

```
Template.hello.session = function () {
  map = []
  for (prop in Session.keys) {
    map.push({key: prop, value: Session.get(prop)})
  }
  return map
} 
```

然后在您的模板中：

```
{{#each session}}
  {{key}} {{value}}
{{/each}} 
```

不确定是否有更优雅的方式，但它有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T06:18:47.023

我不这么认为。

看看[https://github.com/meteor/meteor/blob/master/packages/session/session.js](https://github.com/meteor/meteor/blob/master/packages/session/session.js)。它实际上相当简单。失效发生在第 45-47 行。您会看到调用`Session.set`会使任何人专门听该键（通过`Session.get`）或新值或旧值（通过`Session.equals`）无效。那里没有关于使整个会话无效的内容。

另一方面，考虑到它的简单程度，编写自己的数据结构来做你想做的事情并不难。我不确定您的用例是什么，但将它与会话分开可能很有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T18:21:23.537

是的，您可以订阅 Session 值。

看看自动订阅的文档：

[http://docs.meteor.com/#meteor_autosubscribe](http://docs.meteor.com/#meteor_autosubscribe)

```
// Subscribe to the chat messages in the current room. Automatically
// update the subscription whenever the current room changes.
Meteor.autosubscribe(function () {
Meteor.subscribe("chat", {room: Session.get("current-room");});
}); 
```

此代码块显示了一种使用方法。基本上，只要“当前房间”的值发生变化，Meteor 就会更新视图。

编辑

我误解了最初的问题，并决定我需要在某种程度上赎回自己。我刚刚做了一些测试，据我所知，您目前只能订阅 collection.find() 和 session.get() 调用。所以你不能订阅整个 session 对象，甚至不能订阅 keys 对象。

但是，您可以将 Session 值设置为一个对象，这可能不是最优雅的解决方案，但这对我有用，可以通过一些骇客来跟踪密钥对象，以防止出现循环对象错误。

```
var mySession = {
  set: function(key, val){
    var keys = Session.keys,
        map = {};
   Session.set(key, val);

    for (var prop in keys) {
      if(!(prop === "keys")){
        map[prop] = keys[prop];
      }
    }
    Session.set('keys', map);
  }
}; 
```

这为您提供了一些看起来很像原始功能的东西，并且可以帮助您在添加或更改会话值时跟踪和更新模板。

这是我的模板助手（借用以前的答案）：

```
Template.hello.keys = function() {
  map = [];
  keys = Session.get('keys');
  for (var prop in keys) {
    map.push({key:prop, value:keys[prop]});
  }
  return map
}; 
```

这是实际的模板：

```
<template name="hello">
  <div class="hello">
    {{#each keys}}
      {{key}} {{value}} <br />
    {{/each}}
  </div>
</template> 
```

这样你就可以调用 mySession.set("thing", "another thing") 并且它会在屏幕上更新。我是 Javascript 的新手，所以如果我在这里遗漏了一些明显的东西，请告诉我，或者让我知道是否有更优雅的方式来做这件事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-07T17:08:20.447

虽然以这种方式访问​​会话对象是可行的..**你不是在喝凉水。**

换句话说，Meteor 在发布/订阅方面表现出色。（对我来说）在浏览器崩溃之前，您必须将多少数据放入 Session 对象中并不清楚；我宁愿不知道。

您只需将所有与会话相关的代码放在 Deps.autorun() 函数中即可插入订阅，如前面的答案中所述。任何时候会话更改都会修改订阅；您可以附加一个就绪回调，或使用 subscription.ready() 检查来启动特定操作，但理想情况下，您应该以可以使用渲染/销毁函数的方式构建模板，注意使用 {{isolate}}/ {{constant}} 尽可能。

你得到的是一种做简单事情的困难方法。并且未来可能不会坚持流星的变化；我们总是可以保证发布/订阅将按预期运行......鉴于 Session 是一个如此简单的对象......怎么说有人设计了更好的东西......它被合并到流星中；并且您会留下一些基于自定义对象的奇怪工作流程，这些对象可能不会破坏会话；但可能会影响界面的其他部分。

# mysql - 实体框架、MySQL、SaveChanges - SQL 语法错误

> ID：10760824
> 
> 赞同：2
> 
> 时间：2012-05-25T20:13:32.307
> 
> 标签：mysql, entity-framework, entity-framework-4

这是我得到的错误：

```
Server Error in '/' Application.

You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'group) VALUES ('test_user','testpass',13,77,0,0,0,1);SE' at line 9

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: MySql.Data.MySqlClient.MySqlException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'group) VALUES ('test_user', 'testpass', 13, 77, 0, 0, 0, 1); SE' at line 9 
```

我环顾四周，有人解释说这可能是mysql缓冲区的问题`SELECT is stripped which may indicate some string buffer problems in the MySql drive`

我正在使用 MySQL 连接器版本 6.5.4.0

任何帮助表示感谢

根据要求，这是我用来插入的代码：

```
public bool CreateMember(string username, string password, int age, int residence)
{
    Context.Members.AddObject(new MemberEntity { Username = username, Password = password, Age = age, Residence = residence, Banned = false, Locked = false, Online = false, Group = 1 });
    return Context.SaveChanges() > 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T21:14:28.017

我自己解决了这个问题，问题是 machine.config 上的一个过时的 MySQL 连接器，我已经在我的 Web.config 中添加了以下代码，它已经解决了这个问题：

```
<system.data>
    <DbProviderFactories>
      <remove invariant="MySql.Data.MySqlClient" />
      <add name="MySQL Data Provider"
           invariant="MySql.Data.MySqlClient"
           description=".Net Framework Data Provider for MySQL"
           type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />       
    </DbProviderFactories>
</system.data> 
```

# mysql - MYSQL SELECT 语句中最常见的数字

> ID：10760830
> 
> 赞同：5
> 
> 时间：2012-05-25T20:14:19.217
> 
> 标签：mysql, select, mode

我试图让一个 MYSql 语句吐出一个字段中最常见的数字。我相信我应该使用`COUNT(QUANTITY)`，但我很困惑 to`GROUP BY`和`ORDER BY`，我似乎无法获得正确的 MODE （最常见的数字）。

****编辑****

这是一个示例表：

```
QUANTITY | ORDER_NUMBER
   1         51541
   4         12351
   5         11361
   5         12356
   6         12565
   8         51424
   10        51445
   25        51485 
```

MYSql 语句应该吐出数字**5**，因为它出现的频率最高

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T20:16:25.240

```
SELECT QUANTITY,COUNT(*)
FROM ...
GROUP BY 1
ORDER BY 2 DESC
LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T20:16:00.150

```
SELECT ORDER_NUMBER AS ORDER, COUNT(QUANTITY) as numorders
FROM table 
GROUP BY ORDER_NUMBER
ORDER BY numorders 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T20:16:55.160

获得前 10`order_number`名

```
select order_number, count(order_number) as quantity
from your_table
group by order_number
order by quantity desc
limit 10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T20:25:44.313

```
SELECT QUANTITY, COUNT(QUANTITY) AS TOTAL_Q
 FROM MYTABLE
 GROUP BY QUANTITY
 ORDER BY TOTAL_Q DESC 
```

这将为您提供从最多到最少的数量......

# c# - 显示分组中每个元素的 3 个结果

> ID：10760833
> 
> 赞同：3
> 
> 时间：2012-05-25T20:14:45.223
> 
> 标签：c#, sql-server, linq

我正在开发一个处理抄表的系统。

我想产生一个输出，其中系统显示属于客户的所有仪表以及每个仪表的最后三个读数。

到目前为止，我必须遵循代码：

```
 var lastMeterReading = from meeters in metermodel.Meeters
                              join reading in metermodel.Readings on meeters.MeterNumber equals reading.MeterNumber
                              where (maalers.CustNo == 6085574)
                              orderby reading.Date descending
                              group meeters by new { meeters.MeterNumber, reading.Consumption, reading.Date } into result
                              select new
                              {
                                  Consumption = result.Key.Consumption, No = result.Key.MeterNumber, Date = result.Key.Date
                              }; 
```

现在，它显示了属于客户的所有仪表。如果我放一个 .take(3)，它只显示前 3 个结果。

谢谢！丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:23:54.423

试试这个：

```
var lastMeterReading = from meeters in metermodel.Meeters
                       join reading in metermodel.Readings on meeters.MeterNumber equals reading.MeterNumber
                       where (maalers.CustNo == 6085574)
                       orderby reading.Date descending
                       group meeters by new { meeters.MeterNumber, reading.Consumption, reading.Date } into result
                       from m in result.Take(3)
                       select new
                       {
                           Consumption = m.Consumption, No = m.MeterNumber, Date = m.Date
                       }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T21:25:23.770

我认为您需要将 .Take(3) 放在正确的位置。在您的情况下，您可能做了 result.Take(3) 但这意味着取前三组（及其所有元素）。

下面是试图说明我的意思，但是，我想你需要在最后一部分修复它，因为我没有数据来测试它，因此我不确定我是什么此时可以访问尝试访问。但我希望你明白我的意思。

```
var lastMeterReading = (from meeters in metermodel.Meeters
                       join reading in metermodel.Readings on meeters.MeterNumber equals reading.MeterNumber
                       where (maalers.CustNo == 6085574)
                       orderby reading.Date descending
                       group meeters by new { meeters.MeterNumber, reading.Consumption, reading.Date } into result
                       from m in result
                       select new {Key = m.Key, Info = result.OrderByDescending(r => r.Date).Take(3)})
                       .Select(r => new 
{ Consumption = r.Consumption, No = r.MeterNumber, Date = r.Date }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T02:00:51.527

您只想按*MeterNumber 分组*。按照您现在进行分组的方式，您将为每个唯一的*MeterNumber-Consumption-Date*组合获得一个新组。

您还可以使用 LINQ 的 GroupJoin 运算符简化查询。在查询语法中，您使用“join..on..into”模式：

```
from meter in meterModel.Meters
  where (meter.CustNo == 6085574)
  join reading in meterModel.Readings
  on meter.MeterNumber equals reading.MeterNumber
  into meterGroup
  select meterGroup.OrderByDescending(r => r.Date).Take(3); 
```

或使用点符号：

```
meterModel.Meters
    .Where(x => x.CustNo == 6085574)
    .GroupJoin(
        meterModel.Readings, 
        meter => meter.MeterNumber, 
        reading => reading.MeterNumber, 
        (meter,readings) => readings.OrderByDescending(r => r.Date).Take(3))
    ; 
```

# windows-xp - 渲染良好的 webfont 解决方案

> ID：10760834
> 
> 赞同：1
> 
> 时间：2012-05-25T20:14:49.520
> 
> 标签：windows-xp, font-face, sifr, cufon, webfonts

*挑战：*

**提供可在所有主要浏览器、设备和操作系统上可接受的动态 Web 字体**

*故事：*

因此，我过去曾使用过 cufon 或 sifr，但后来放弃了两者，转而使用 @font-face。在生产环境中使用@font-face 一段时间后，我有了一个可怕的发现。无论浏览器如何，许多字体（大多数？）在 Windows XP 中看起来都像废话。即使在 google chrome 中，XP 也会使字体呈现出令人无法接受的锯齿状和丑陋。

我知道为什么会这样。在阅读了许多关于 ye olde stack overflow 的优秀帖子后，我明白问题不在于字体提示，而是 XP 将 clear-type 设置为默认值。因此，无论应用程序如何，默认情况下所有字体在 XP 中都是锯齿状的。

所以...如果@font-face 在任何地方都可以很好地工作，但在 XP 中清除类型关闭，并且仍然优于 cufon 我们应该做什么？

*可能的解决方案：*

*   @font-face 作为默认值，带有用户代理嗅探的 Windows XP 的 Cufon。（目前正在使用，非常不喜欢它）
*   @font-face 单独使用强制清除类型的未知方法
*   单独的Cufon :(
*   另一个范例

*失败的解决方案：*

*   Adobe Typekit（在他们自己的网站上的 XP 中出现锯齿状！，即使它们显示的是平滑的 jpeg 样本）
*   Google Webfonts（与 XP 相同的问题）
*   @font-face 单独（与 XP 相同的问题）

到目前为止，Cufon 可以在任何地方使用，但很糟糕，并且如果您正在为任何内容制作动画，或者希望在事后更新文本，则会带来额外的挑战。

您有完全跨浏览器和跨操作系统的解决方案吗？处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T09:50:32.917

我很确定看起来很难看的网络字体缺少一些提示*（编辑：不，即使仍然需要提示才能使字体在 Windows 上看起来不错，这里真正的问题是 XP 中禁用的 ClearType。但是，无论如何这个答案都有解决方案）*。

与其他操作系统上的字体渲染器不同，Windows 引擎依赖于字体附带的提示信息。如果提示缺失、损坏或损坏，字体会看起来很丑 - 就这么简单。[幸运的是，有一种方法可以使用ttfautohint](http://www.freetype.org/ttfautohint/)向 ttf-font 添加一些自动生成的提示。添加提示后，您可以从增强的 TTF 生成所需的不同 Web 字体格式（eof、woff 等）。此外**，如果 font-smoothing 被禁用，你应该尝试使用 SVG 字体**，因为它们总是使用抗锯齿渲染。

我写了[一篇关于如何在 Pixels|Bytes 上创建网络字体](http://pixelsvsbytes.com/2013/11/how-to-create-perfect-web-fonts-in-3-steps/)的文章，其中解释了如何向字体添加提示以及如何在必要时使用[我的 Font Smoothie 脚本](https://gist.github.com/letorbi/5177771)启用 SVG 字体。希望这可以帮助 ：）

*PS：我知道链接到我自己的博客在这里不会受到赞赏，但我认为我的帖子描述了一个很好的解决问题的方法，所以我还是发布了它。如果您希望我删除链接，请发表评论，我会这样做。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T18:55:22.623

[http://www.useragentman.com/blog/2009/11/29/how-to-detect-font-smoothing-using-javascript/](http://www.useragentman.com/blog/2009/11/29/how-to-detect-font-smoothing-using-javascript/)

这是我迄今为止发现的作品。该解决方案检测锯齿状字体，因此我们可以这样做：`@font-face`作为标准，Cufon 作为后备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T02:29:35.547

就我而言，我发现答案实际上*并不*集中在在 WinXP 中启用 Clear Type。无论是启用还是禁用 Clear Type，我发现我的一些 @font-face 英文字体（尤其是 BLACK、SANS-SERIF）在 IE7 和 IE8 中看起来很糟糕。有时不仅仅是锯齿状或抗锯齿效果不佳。我看到的一个大问题是字体本身的形状（一些字体，不是全部）似乎挤成一些很不吸引人的东西。**我按照Torben**的建议找到了一个可以接受的解决方案。我只需要字体提示，而且该解决方案与启用清除类型无关。要启动并运行字体提示应用程序，请阅读此处的说明：

[https://gist.github.com/davelab6/3783491](https://gist.github.com/davelab6/3783491)

（我在这里使用了“ttfautohint-0.95.tar.gz”文件）：http: [//sourceforge.net/projects/freetype/files/ttfautohint/0.95/](http://sourceforge.net/projects/freetype/files/ttfautohint/0.95/)

*您还应该查看文档，并且还需要安装 MacPorts（否则您会在构建过程中在终端中收到错误），但由于我的代表分数阻止我发布两个以上的 URL，您必须使用 Google那。*

更好的提示并不意味着您的@font-face 字体现在在 WinXP 中的 IE 上看起来像在 Macintosh 浏览器上一样完美流畅和出色。但我发现字体提示可以防止 IE7 和 IE8 中某些字体的形状出现令人讨厌的扭曲。对我来说，这是一个可以接受的解决方案。

I can only add that it's rather troublesome to build the **ttfautohintGUI** on OSX. You have to installed hundreds of MB of software, downloading from multiple locations too, just to build the GUI app. But once done, the app allows you easily to hint your @Font-Face fonts and resolve many WinXP display issues. Just be sure to tick "Windows Compatibility" in the GUI (it's unticked by default). I also unticked the "Add ttfautohintinfo" and "Pre-hinting" options, leaving everything else as their defaults. Click "Browse..." to add your Input File (the font you want to hint), and then copy and paste that path in the Output File, changing the filename to whatever you want it to be. You won't enable the "Run" button unless there is something in both the Input File and Output File fields.

最良好的祝愿。

# javascript - instaEarth 是如何在他们的首页上创建地图的？

> ID：10760836
> 
> 赞同：0
> 
> 时间：2012-05-25T20:15:05.563
> 
> 标签：javascript, google-maps

我以前用谷歌地图工作过，但我从来没有见过任何关于能够将照片或任何东西嵌入标记的东西...... [http://instaearth.me](http://instaearth.me)是怎么做的......

有没有人对此功能有任何参考？我想将其中一些功能用于项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:56:40.123

您可以使用 InfoBox 插入整个 div，所以这里有一个快速演示。请原谅幼稚的图像边框。

[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/)

[http://jsbin.com/ivuwaq/edit#preview](http://jsbin.com/ivuwaq/edit#preview)

点击地图添加猫图标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:48:15.333

您可以使用自定义叠加层将图像和 html 添加到使用 API 的谷歌地图上定义的纬度/经度点。[在Google Map API Docs](https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays)上有一个相当好的参考资料。您还可以根据标记单击事件显示或隐藏叠加层，这可能是 instaearth.me 的做法。

# c# - 创建自定义 DataGrid 的 ItemsSource

> ID：10760838
> 
> 赞同：2
> 
> 时间：2012-05-25T20:15:20.713
> 
> 标签：c#, wpf, data-binding, datagrid

我正在使用 DataGrids，但我正在努力绑定我的数据，因为列数取决于必须显示的信息。

所以，我试图做的是创建一个包含我在某个时候需要的所有列和行的对象，并将这个对象绑定到`ItemsSource`属性。因为我在 WindowsForms 中使用过 DataGridViews，所以我想到了这样的事情：

```
DataTable myTable = new DataTable();

DataColumn col01 = new DataColumn("col 01");
myTable.Columns.Add(col01);
DataColumn col02 = new DataColumn("col 02");
myTable.Columns.Add(col02);

DataRow row = myTable.NewRow();
row[0] = "data01";
row[1] = "data02";
myTable.Rows.Add(row);

row = myTable.NewRow();
row[0] = "data01";
row[1] = "data02";
myTable.Rows.Add(row); 
```

但是我无法在 WPF 中找到一种方法来做同样的事情，因为例如我需要一些列作为 DataGridComboBoxColumns。

实际上我在这个网站上读过很多关于它的帖子，但没有一个对我有帮助。我真的迷路了。

有人可以帮我吗？我只需要能够创建一个可能包含 DataGridTextColumns 或 `DataGridComboBoxColumns 等的表，以便将此最终对象绑定到 DataGrid 的 ItemsSource 属性。

希望可以有人帮帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T20:59:41.703

好的，让我尝试举一个与您的需求相似的示例

假设我们使用这个类：

```
public class MyObject
{
   public int MyID;
   public string MyString;
   public ICommand MyCommand;
} 
```

我们愿意显示`DataGrid`ID 列表，并将 a 作为第二列`Button`，并将属性`MyString`作为内容，单击该属性会启动`ICommand` `MyCommand`在新窗口中打开的任何您想要的内容。

这是您在视图方面应该拥有的：

```
 <DataGrid ItemsSource="{Binding MyList}" AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridTextColumn Header="ID" Binding="{Binding MyID}" />
            <DataGridTemplateColumn Header="Buttons">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button Content="{Binding MyString}" Command="{Binding MyCommand}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

这将显示`DataGrid`获取`IEnumerable<MyObject>`名为“MyList”中的所有内容，并显示之前定义的两列。

现在，如果您需要定义命令。首先，我建议您阅读[此 MVVM 的介绍性链接](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030)并参加`RelayCommand`课程（这就是我们将用于解决您的问题的内容）

因此，在`ViewModel`定义 的 中`MyList`，您应该如何定义一些有用的对象：

```
public ObservableCollection<MyObject> MyList { get; set; }

// blah blah blah

public void InitializeMyList()
{
  MyList = new ObservableCollection<MyObject>();
  for (int i = 0; i < 5; i++)
  {
    MyList.Add(InitializeMyObject(i));
  }
}

public MyObject InitializeMyObject(int i)
{
  MyObject theObject = new MyObject();
  theObject.MyID = i;
  theObject.MyString = "The object " + i;
  theObject.MyCommand = new RelayCommand(param =< this.ShowWindow(i));
  return theObject
}

private void ShowWindow(int i)
{
  // Just as an exammple, here I just show a MessageBox
  MessageBox.Show("You clicked on object " + i + "!!!");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T20:21:11.917

绑定到自定义对象的 ObservableCollection 的简单示例。向自定义对象添加更多属性以匹配您希望行的外观。

```
 using System.Collections.ObjectModel;

 public MyClass
 {
      public ObservableCollection<MyObject> myList { get; set; }

      public MyClass()
      {
           this.DataContext = this;
           myList = new ObservableCollection<MyObject>();
           myList.Add(new MyObject() { MyProperty = "foo", MyBool = false };
           myList.Add(new MyObject() { MyProperty = "bar", MyBool = true };
      }
 }

 public MyObject
 {
      public string MyProperty { get; set; }
      // I believe will result in checkbox in the grid
      public bool MyBool { get; set; }
      //...as many properties as you want
 } 
```

与 xml

```
 <DataGrid ItemsSource= "{Binding myList}" /> 
```

可能是一些小的语法错误，我完全在 SO 窗口中编写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T14:26:23.653

我是 WPF 的新手，并使用大马士革的示例来学习将列表绑定到数据网格。但是当我使用他的答案时，我发现我的数据网格会填充正确的行数，但不会填充 MyObject 类的任何属性。我做了更多的搜索，然后偶然发现了我必须做的事情。

我必须封装 MyObject 类属性才能显示它们。让他们公开是不够的。

前：

```
public class MyObject
{
   public int MyID;
   public string MyString;
   public ICommand MyCommand;
} 
```

后：

```
public class MyObject
{
    private int _myID;

    public int MyID
    {
        get { return _myID; }
        set { _myID = value; }
    }
    private string _myString;

    public string MyString
    {
        get { return _myString; }
        set { _myString = value; }
    }
    private ICommand _myCommand;

    public ICommand MyCommand
    {
        get { return _myCommand; }
        set { _myCommand = value; }
    }
} 
```

感谢大马士革提供了一个很好的例子，感谢但丁提出了一个很好的问题。我不知道这是否是由于自您的帖子以来版本发生了变化，但希望这将有助于像我这样的 WPF 新手。

# google-maps - Web 地图服务中的连续区域

> ID：10760845
> 
> 赞同：1
> 
> 时间：2012-05-25T20:16:02.377
> 
> 标签：google-maps, bing-maps, yahoo-maps

谷歌地图无法计算[穿越赤道 - 哥伦比亚边界的路线](http://maps.google.com/maps?saddr=Tulcan,+Carchi,+Ecuador&daddr=Ipiales+-+Narino,+Colombia&hl=en&sll=2.98379,-75.61733&sspn=7.663269,13.392334&geocode=FZNiDAAdrRte-ylN69XnumgpjjGNODOfsXMuLQ%3B&oq=Ipiales,Colombia&mra=ls&t=m&z=10)，而维基百科用户的[这项](http://en.wikipedia.org/wiki/File%3aGoogle_Maps_zusammenh%C3%A4ngende_Regionen_%281%29.png)分析显示了它认为相邻的区域。可以在 Yahoo! 中计算路线 从[蓬塔阿雷纳斯到马拉开波](http://maps.yahoo.com/#q=Punta+Arenas+%28Magallanes%29%2C+Chile&conf=1&start=1&lat=-53.22247975316637&lon=-71.103515625&zoom=3&mvt=m&trf=0&unit=km&q1=Punta+Arenas+%28Magallanes%29%2C+Chile&q2=Maracaibo%2C+Venezuela)的地图，但不是到阿拉斯加的地图。

为什么这项服务有这样的限制？对其他网络路由服务的连续区域是否有类似的分析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T09:16:50.570

[我所知道的与 Bing 地图最接近的类似“分析”是http://msdn.microsoft.com/en-us/library/dd435699.aspx](http://msdn.microsoft.com/en-us/library/dd435699.aspx)中给出的表格，它显示了为每个国家/地区提供的路由功能（基本/完整）。

Interestingly, even though both Ecuador and Colombia are listed as having only "Basic" routing functionality, Bing Maps does correctly find the route between Tulcan and Ipiales shown in your first example: [http://www.bing.com/maps/#Y3A9MC44MjE2NDA5OTgxMjgxNn4tNzcuNjg2OTIzOTgwNzEyODkmbHZsPTEzJnN0eT1yJnJ0cD1wb3MuMC44MjE1MjBfLTc3LjczMjE3MF9UdWxjJUMzJUExbiUyQyUyMEVjdWFkb3JfX19lX35wb3MuMC44MjE3NjJfLTc3LjY0MTY3OF9JcGlhbGVzJTJDJTIwQ29sb21iaWFfX19lXyZtb2RlPUQmcnRvcD0wfjB +MH4=](http://www.bing.com/maps/#Y3A9MC44MjE2NDA5OTgxMjgxNn4tNzcuNjg2OTIzOTgwNzEyODkmbHZsPTEzJnN0eT1yJnJ0cD1wb3MuMC44MjE1MjBfLTc3LjczMjE3MF9UdWxjJUMzJUExbiUyQyUyMEVjdWFkb3JfX19lX35wb3MuMC44MjE3NjJfLTc3LjY0MTY3OF9JcGlhbGVzJTJDJTIwQ29sb21iaWFfX19lXyZtb2RlPUQmcnRvcD0wfjB+MH4=)

我想路由功能必须划分为离散国家的原因是因为所需的数据是从国家机构（例如政府数据集）收集并在每个国家/地区进行管理/更新 - 但这显然为跨境路由带来了一个有趣的问题，如您的示例中所示。

老实说，我以前从未真正考虑过这个问题，所以我要感谢你提出这个问题！

* * *

**更新**：请注意，根据链接自[https://developers.google.com/maps/faq#whatcountries](https://developers.google.com/maps/faq#whatcountries)的电子表格，谷歌地图也不支持厄瓜多尔或哥伦比亚*境内*的路线——更不用说穿越它们的路线了！

# javascript - 整个表格 onChange

> ID：10760847
> 
> 赞同：63
> 
> 时间：2012-05-25T20:16:10.330
> 
> 标签：javascript

如何对所有元素使用`onChange`或类似的事件？`form`我不想`onChange`分别用于每个字段。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2018-08-14T17:10:53.657

您可以在元素上使用`change`事件：`form`

```
var form = document.querySelector('form');
form.addEventListener('change', function() {
    alert('Hi!');
}); 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-05-25T20:24:25.343

如果您使用 jQuery，您可以`change`在表单元素上使用事件，因为在 jQuery 中事件会冒泡。

```
$('#formId').change(function(){...}); 
```

如果您使用的是纯 JavaScript，则更改事件不会冒泡（至少不会跨浏览器）。因此，您必须将事件处理程序分别附加到每个输入元素：

```
var inputs = document.getElementsByTagName("input"); 
for (i=0; i<inputs.length; i++){
   inputs[i].onchange = changeHandler;
} 
```

（当然，您必须对所有选择和文本区域做类似的事情）

# excel - Excel 2007 VBA - 如何删除电子表格中的所有行，不包括一列中的行

> ID：10760849
> 
> 赞同：0
> 
> 时间：2012-05-25T20:16:15.377
> 
> 标签：excel, vba

如何使用 excel VBA 删除/清除除一列之外的所有行？

附加信息：我有一列的公式使用我从访问数据库导入的其他列的值计算某件事。

如果我不想删除一列中的公式但想删除其他所有内容，有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:31:41.953

用于`SpecialCells`仅返回某些类型的单元格

要删除所有常量，请使用：

```
ActiveSheet.UsedRange.SpecialCells(xlCellTypeConstants).ClearContents 
```

# android - 如何在不使用应用商店的情况下使用类似于 iOS 设备的清单文件部署 android 应用？

> ID：10760852
> 
> 赞同：0
> 
> 时间：2012-05-25T20:16:42.890
> 
> 标签：android, mobile, deployment, android-manifest

我想以与 iOS 设备存在的无线、无线传输方法类似的方式部署 Android 应用程序。也就是说，设置一个网页，用户从他的设备上单击一个链接，该链接包含清单 (xml) 文件，其中包含有关如何下载应用程序的信息。这在 iOS 设备上运行良好，我认为 Android 可能有类似的东西。

我该怎么做？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:59:38.863

*   由于您似乎暗示 iOS 案例中不涉及应用程序市场/商店，因此您似乎在谈论离线缓存的“网络应用程序”而不是本机 iOS 应用程序。

    android 等价物是：在存在离线 Web 应用程序功能的设备上，只需访问您用于 iOS 的相同网页（引用具有适当 mime 类型的 html5 清单等）。也许您最终会得到特定于平台的改进，但基本思想是可移植的。

*   或者，也许您只是意味着不需要使用台式机/笔记本电脑来打开获取应用程序。在 Android 上，从第一天开始就是这种情况 - 主要市场客户端在设备上，通过无线安装。您可以使用 market:// url 将 android 设备发送到市场。从在设备以外的其他设备上运行的 Web 浏览器触发安装的能力是 android 上更新的并且仍然是次要的功能。

*   最后，android 确实提供了侧加载本机应用程序的能力，这是除了越狱或拥有开发人员帐户之外没有 iOS 等效的功能。大多数回复似乎都集中在这一点上，但尚不清楚这是否是您实际要求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:46:18.033

请在上面发表评论。具有正确的 MIME 设置，链接到 apk，并确保在设备上检查未知来源以允许非市场应用程序。

# regex - 正则表达式负前瞻正好3个大写字母围绕一个字符

> ID：10760854
> 
> 赞同：0
> 
> 时间：2012-05-25T20:16:42.943
> 
> 标签：regex, lookahead, negative-lookahead

我试图写一个正则表达式找到 两边**正好有 3 个大写字母的所有字符**

以下正则表达式查找字符左侧正好有 3 个大写字母，右侧有 3 个**（或更多）**的所有字符：

```
'(?<![A-Z])[A-Z]{3}(.)(?=[A-Z]{3})' 
```

当尝试使用正则表达式将右侧限制为不超过 3 个大写字母时：

```
'(?<![A-Z])[A-Z]{3}(.)(?=[A-Z]{3})(?![A-Z])' 
```

我没有得到任何结果，将 (?![AZ]) 添加到第一个正则表达式时似乎失败了。

有人可以向我解释这个问题并提出解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T21:20:24.067

您需要将负前瞻*放在*正前：

```
(?<![A-Z])[A-Z]{3}.(?=[A-Z]{3}(?![A-Z])) 
```

你也可以通过后视来做到这一点：

```
(?<=(?<![A-Z])[A-Z]{3}).(?=[A-Z]{3}(?![A-Z])) 
```

它不违反“固定长度后视”规则，因为环视本身不消耗任何字符。

* * *

**编辑**（关于固定长度的lookbehind）：在所有支持lookbehind 的风格中，Python 是最不灵活的。在大多数风格（例如 Perl、PHP、Ruby 1.9+）中，您可以使用：

```
(?<=^[A-Z]{3}|[^A-Z][A-Z]{3}). 
```

...匹配前面正好是三个大写 ASCII 字母的字符。第一个选择 - `^[A-Z]{3}`- 开始向后看*三个*位置，而第二个 - `[^A-Z][A-Z]{3}`- 正好向后看*四个*位置。在 Java 中，您可以将其简化为：

```
(?<=(^|[^A-Z])[A-Z]{3}). 
```

...因为它在编译时做了一些额外的工作来确定最大后视长度将是四个位置。而在 .NET 和 JGSoft 中，任何事情都会发生；如果它在任何地方都是合法的，那么它在后面是合法的。

但在 Python 中，lookbehind 子表达式必须匹配单个固定数量的字符。如果您多次反对该限制，您可能不会期望这样的事情会起作用：

```
(?<=(?<![A-Z])[A-Z]{3}). 
```

至少我没有。它比Java版本更简洁；它如何在 Python 中工作？但它确实有效，在 Python 和所有其他支持lookbehind 的风格中。

不，任何形式的前瞻都没有类似的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T07:11:05.027

由于前瞻模式与后瞻模式相同，您还可以使用 continue 锚`\G`：

```
/(?:[A-Z]{3}|\G[A-Z]*)(.)[A-Z]{3}/ 
```

如果三个大写字母在单个字符之前或最后一个匹配项停止（可选地后跟其他大写字母），则返回匹配项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T20:25:44.923

取出积极的前瞻对我有用。

```
(?<![A-Z])[A-Z]{3}(.)([A-Z]{3})(?![A-Z]) 
```

'ABCdDEF' 'ABCfDEF' 'HHHhhhHHHH' 'jjJJjjJJJ' JJJjJJJ 匹配 ABCdDEF ABCfDEF JJJjJJJ

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T20:26:16.873

我不确定正则表达式引擎*应该*如何处理多个前瞻断言，但您使用的那个可能对此有自己的看法。

您也可以使用单个断言，如下所示：

```
 '(?<![A-Z])[A-Z]{3}(.)(?=[A-Z]{3}[^A-Z])' 
```

与后视相同：

```
 '(?<=[^A-Z][A-Z]{3})(.)(?=[A-Z]{3}[^A-Z])' 
```

这将在匹配行首和行尾的模式时出现问题。我想不出一个合适的解决方案，但可能会有一个肮脏的技巧：例如，在整行的开头和结尾添加一个空格（或其他东西），然后执行匹配。

```
$ echo 'ABCdDEF ABCfDEF HHHhhhHHHH AAAaAAAbAAA jjJJJJjJJJ JJJjJJJ' | sed 's/.*/ & /' | grep -oP '(?<=[^A-Z][A-Z]{3})(\S)(?=[A-Z]{3}[^A-Z])'
d
f
a
b
j 
```

请注意，我改为`(.)`在`(\S)`中间，如果您希望空间匹配，请将其更改回来。

PS 你在解决[Python 挑战](http://www.pythonchallenge.com/)吗？:)

# jquery - jQuery sortable - 禁用单个项目

> ID：10760861
> 
> 赞同：2
> 
> 时间：2012-05-25T20:17:18.083
> 
> 标签：jquery, jquery-ui-sortable

我有一些带有可拖动元素的列表。当用户将任何元素移动到新位置时，会调用 $.ajax，以便服务器可以记录元素的位置变化。虽然我可以禁用整个列表的排序，但我真的只想禁用移动元素的排序，直到 $.ajax 收到成功消息。

```
update: function(event, ui) {
  ui.item.sortable('disable');
  $.ajax({options}, success: function() {
    ui.item.sortable('enable');
  });
} 
```

到目前为止，我已经做了很多研究，只能禁用整个列表。对我做错了什么有任何建议，或者这是不可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T20:45:13.577

Sortable 的取消设置允许您使用选择器取消可排序的调用。我添加了以下行 -

`cancel:'.updating'`

...然后我在 $.ajax 调用周围添加和删除类。

我不知道我昨天是怎么错过的。:D/

# iphone - 无法将我的应用发布到 appStore：权利、bundleID、plist...？

> ID：10760866
> 
> 赞同：1
> 
> 时间：2012-05-25T20:17:35.410
> 
> 标签：iphone, xcode, app-store, app-store-connect, itunes-app

ApplicationLoader 出现许多错误。但看起来我在 XCode4.2.1 中做错了，并且可能使用证书或配置文件。我上次提交应用程序是使用 Xcode3.2.6。不知道在这里用 Xcode4.2.1 做什么？谢谢

## ![在此处输入图像描述](../Images/9ab32e15dbff61979bad77d15ff24804.png)

在处理了一些事情之后，我已经到了这一点：

- 引用不确定

-代码签名，我认为证书/下载/上传到苹果视线的过程可以解决这个问题。

![在此处输入图像描述](../Images/f49e194967d9f9c58e15845743fc299b.png)

* * *

现在归结为：

![在此处输入图像描述](../Images/5e70efd45ccdd855ec6123cf0558a526.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T00:54:47.827

剩下的问题很容易解决。

**首先是图标：**

确保您已将图标命名为

*   图标.png
*   图标@2x.png

然后在*appname* -Info.plist 上应该有一个名为

“图标文件（iOS 5）”

带有子键

“主要图标”

带有子键

“图标文件”

和 2 个子项

“项目 0”和“项目 1”

项目 0 的值应该是 icon.png，项目 1 应该是 icon@2x.png

**对于您的第二个问题：**

您必须指定要使用的代码签名配置文件。

为此，请在项目检查器上选择您的应用，然后在 Targets 下再次选择您的应用。

然后在构建设置下，选择全部并合并。

在这里只需向下滚动到“代码签名”

代码签名身份必须具有与已在 iTunes 连接上注册的相同配置文件的 RELEASE 值（您获得的有权发布等的证书）

只需单击该值，您应该会看到许多配置文件。如果供应配置文件已正确安装（可以签署发布的配置文件），它也应该出现在那里，只需选择它。

对项目配置重复该过程（在项目 -> AppName 下）。

**编辑：**

如果您定义了权利：

> 如果您在 Target > Build Settings 中定义自定义代码签名权利文件，您可以尝试完全删除该配置并重新构建/重新提交。通常情况下，代码签名权利的定义是不必要的。如果您的应用程序使用自定义钥匙串访问共享或 iCloud，您只需指定自定义代码签名权利文件。否则，请从 Xcode 项目的 Target > Build Settings 上的所有构建配置中删除 Code Signing Entitlements 配置，重新构建并重新尝试提交/验证。

关于代码签名问题：

尝试遵循这个苹果指南，它非常详细地解释了一切

[https://developer.apple.com/legacy/library/technotes/tn2250/_index.html](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html)

尤其是**如何解决错误：应用程序未通过代码验证？**部分。

# c++ - 非常简单的程序通过 VS2010 c++ 内存泄漏检查器，但在销毁所有对象后仍然在程序结束时使用更多内存？

> ID：10760867
> 
> 赞同：1
> 
> 时间：2012-05-25T20:17:46.797
> 
> 标签：c++, arrays, memory, stl, memory-leaks

我一直在从事的一个大型项目中遇到内存泄漏问题，但根据 VS2010 内存检查器，该项目没有泄漏（我已经广泛检查了所有内容）。

我决定编写一个简单的测试程序，看看泄漏是否会在较小的范围内发生。

```
struct TestStruct
{
    std::string x[100];
};
class TestClass
{
public:
std::vector<TestStruct*> testA;
//TestStruct** testA;
TestStruct xxx[100];
TestClass()
{
    testA.resize(100, NULL);
    //testA = new TestStruct*[100];
    for(unsigned int a = 0; a < 100; ++a)
    {
        testA[a] = new TestStruct;
    }
}
~TestClass()
{
    for(unsigned int a = 0; a < 100; ++a)
    {
        delete testA[a];
    }
    //delete [] testA;
    testA.clear();
}
};
int _tmain(int argc, _TCHAR* argv[])
{
    _CrtSetDbgFlag ( _CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF );
    char inp;

    std::cin >> inp;
    {
        TestClass ttt[2];
        TestClass* bbbb = new TestClass[2];
        std::cin >> inp;
        delete [] bbbb;
    }
    std::cin >> inp;

    std::cin >> inp;
    return 0;
} 
```

使用此代码，程序从大约 1 兆内存开始，上升到超过 8 兆，最后下降到 1.5 兆。额外的 0.5 meg 去哪儿了？我在粒子系统上遇到了类似的问题，但规模为数百兆字节。

我终其一生都无法弄清楚出了什么问题。

顺便说一句，使用数组（我已注释掉）大大减少了浪费的内存，但并没有完全减少它。我希望最后一个 cin 的内存使用量与第一个 cin 相同。

我正在使用任务管理器来监控内存使用情况。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T16:34:36.277

*“我终其一生都无法弄清楚出了什么问题。”*

大概什么都没有。

*“[程序]在销毁所有对象后仍然在程序结束时使用更多内存。”*

您不应该真正关心程序结束时的内存使用情况。任何现代操作系统都关心在进程结束时“释放”与进程相关的所有内存。（从技术上讲，就是简单地释放进程的地址空间。）

在程序结束时释放内存实际上会减慢程序的终止速度，因为它不必要地需要访问甚至可能位于交换空间上的内存页面。

额外的 0.5MB 可能保留在您的分配器中（malloc/free、new/delete、std::allocator）。这些分配器的工作方式通常是在必要时向操作系统请求内存，并在方便时将内存归还给操作系统。碎片化可能是分配器在某个时刻必须持有比严格要求更多的内存的原因之一。保留一些内存通常也更快，因为从操作系统请求内存很慢。

*“我正在使用任务管理器来监控内存使用情况。”*

测量内存使用情况实际上比观察单个数字更复杂，它需要很好地理解虚拟内存以及进程和操作系统之间的内存管理。不幸的是，我不能推荐任何适用于 Windows 的好工具。

总的来说，我认为您的简单程序没有问题。

# cakephp - CakePHP：最大关联数？

> ID：10760868
> 
> 赞同：0
> 
> 时间：2012-05-25T20:17:52.943
> 
> 标签：cakephp, associations

使用 hasMany、HABTM 或做 hasMany 的事情，是否有一种干净的方法来确保某种类型的关联有上限？说，一个帖子只能有3个标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T21:12:22.023

一种方法是 beforeSave 回调来计算关联的行数，如果其 >= 3 返回 false。counterCache 可以帮助提高性能。

# php - 如果一个字段结果很好或等于另一个字段，我可以更改背景吗？

> ID：10760870
> 
> 赞同：2
> 
> 时间：2012-05-25T20:17:57.850
> 
> 标签：php, jquery, html-table, background-color, tablesorter

我在 html 表中显示 mySQL。

我想将 $qty 的 TD 背景颜色更改为 red `IF $qty >= $max or $qty =< $min`。

有没有一种简单的方法可以用 jQuery 或 PHP 做到这一点？

我为示例简化了表格和 PHP：

```
<table id="tablesorter-demo">
<tr><td>'.$min.'</td><td>'.$max.'</td><td>'.$qty.'</td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:21:37.823

```
<?php
   $class = (($qty >= $max) || ($qty <= min)) ? ' class="red"' : '';
?>

<tr><td>....</td><td<?php echo $class ?>><?php echo $qty ?></td></tr> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:30:34.840

我知道你有你的答案，但最好只编写一个自定义表格排序器小部件来突出显示坏数量的表格单元格。这是一个[演示](http://jsfiddle.net/Mottie/eY8uH/4/)和代码：

```
$.tablesorter.addWidget({
    id : "qty",
    format: function(table){
        var i, $td, cur,
            c = table.config,
            cols = c.widgetQty,
            $tr = $(table).children('tbody').children('tr'),
            rows = $tr.length;
        for (i = 0; i < rows; i++){
            $td = $tr.eq(i).find('td');
            cur = parseInt( $td.eq(cols[2]).text(), 10); // current
            if (cur <= parseInt( $td.eq(cols[0]).text(), 10) || // min
                cur >= parseInt( $td.eq(cols[1]).text(), 10) ){ // max
                $td.eq(cols[2]).addClass('badqty');
            }
        }
    }
});

$('table').tablesorter({
    widgets : [ 'zebra', 'qty' ],
    widgetQty : [ 0, 1, 2 ] // min, max, current qty column indexes 
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T20:26:57.523

```
var min = $('table tr td:eq(0)').text();
var max = $('table tr td:eq(1)').text();
var qty = $('table tr td:eq(2)').text();

if (qty >= max || qty <= min ) {
   $('table tr td:eq(2)').css('background-color', 'red');
} 
```

[http://jsfiddle.net/7vUFS/3/](http://jsfiddle.net/7vUFS/3/)

# javascript - 如何从外部暂停和停止递归 javascript 函数

> ID：10760871
> 
> 赞同：2
> 
> 时间：2012-05-25T20:18:01.337
> 
> 标签：javascript, jquery

我有一个函数，它以 2 秒的暂停调用自身，直到 ajax 调用返回 0。现在它可以持续很长时间，因此我希望暂停它或通过外部事件（如按钮单击）停止它。

```
function create_abcd()
{
    var dataString = 'action=create_abcd&type=' + $('#abcd_type').val() + '&count=100';
    $.ajax({
        type: "POST",
        url: "backend.php",
        data: dataString,
        success: function(msg){
            if(msg != "0")
            {
                $("#abcd_output").append('<p>' + msg + '</p>')
                    setTimeout(create_abcd, 2000);
            }
            else
                return false;
        }
    });
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T20:23:10.490

就像是：

```
var needStop = false;

function create_abcd()
{
    var dataString = 'action=create_abcd&type=' + $('#abcd_type').val() + '&count=100';
    $.ajax({
        type: "POST",
        url: "backend.php",
        data: dataString,
        success: function(msg){
            if(needStop) {
                needStop = false;
                return;
            }
            if(msg != "0")
            {
                $("#abcd_output").append('<p>' + msg + '</p>')
                    setTimeout(create_abcd, 2000);
            }
            else
                return false;
        }
    });
}

$('#button').click(function() {
    needStop = true;
}); 
```

=)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T20:24:14.017

我认为你试图以错误的方式解决你的问题。当服务器上的某个长时间运行的进程完成时，您显然希望生成通知，因此您每 2 秒轮询一次。这会导致很多不必要的请求。

而是使用推送机制。

考虑使用 COMET，因为您是 PHP：

[http://www.zeitoun.net/articles/comet_and_php/start](http://www.zeitoun.net/articles/comet_and_php/start)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T20:21:38.260

创建一个全局变量（甚至是页面上的隐藏输入）。

在页面上创建一个“停止”按钮。

当您单击“停止”按钮时，您只需将该输入或变量设置为特殊值。

在继续之前，您`create_abcd`只需检查该变量或输入的顶部。如果设置了特殊值，请在再次设置超时之前退出。

# asp.net-mvc-3 - 剃刀语法@ 胡说八道 ...它产生什么？

> ID：10760874
> 
> 赞同：-2
> 
> 时间：2012-05-25T20:18:34.177
> 
> 标签：asp.net-mvc-3, razor

我正在研究 MVC 的 Telerik 工具。他们有一个 Func 类型的方法，他们用这种语法传递内容......

```
Telerik.Factory().Content(@<text> content here </text>); 
```

当然，它比这更复杂，但我只是在提取困扰我的部分。

Razor 在@ 之后究竟在生产什么？

我一直在尝试使用 Google，但找不到任何有用的信息。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:59:52.183

我猜你觉得难以理解的是**Templated Razor Delegates**！

一个例子是...

```
@items.List(@<li>@item</li>) 
```

@haacked 有一篇更好的帖子解释了这一点。

[http://haacked.com/archive/2011/02/27/templated-razor-delegates.aspx](http://haacked.com/archive/2011/02/27/templated-razor-delegates.aspx)

# iphone - 由于未捕获的异常“NSUnknownKeyException”而终止应用程序 - 错误

> ID：10760877
> 
> 赞同：1
> 
> 时间：2012-05-25T20:18:39.167
> 
> 标签：iphone, objective-c, ios, xcode, macos

我正在关注 Big Nerd Ranch iOS 编程指南（第 3 版），并遵循了它所说的创建这个项目的所有内容。我收到一个错误，但我不知道如何解决，因为我是 iOS 新手。当我从 Xcode 的模板中使用基于单视图的应用程序时，我的程序最初遇到了问题，给了我这个错误：

> 2012-05-25 16:02:12.926 Whereami[1083:707] 应用程序窗口预计在应用程序启动结束时有一个根视图控制器

在扫描了一些论坛后，我发现我需要在 Xcode 中设置我的 MainInterface：

之前 - [https://i.imgur.com/YCnRM.png](https://i.imgur.com/YCnRM.png)

之后 - [https://i.imgur.com/5QnJ3.png](https://i.imgur.com/5QnJ3.png)

通过将 xib 文件名添加到设置中的 MainInterface 文本框来修复上述错误后，我收到此错误：

```
 2012-05-25 16:04:09.068 Whereami[1102:707] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<UIApplication 0x11f620> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key activityIndicator.
*** First throw call stack:
(0x3507b88f 0x364a2259 0x3507b5c5 0x30eb6323 0x30eb5e23 0x30e8ff09 0x34fda7d3 0x34fdb461 0x323111af 0x3231294d 0x32248509 0x320d1893 0x320cb8d7 0x32099c6b 0x3209970f 0x320990e3 0x362ce22b 0x3504f523 0x3504f4c5 0x3504e313 0x34fd14a5 0x34fd136d 0x320caa13 0x320c7e7d 0x7ebd7 0x7eb7c)
terminate called throwing an exception 
```

这是我的源文件：

AppDelegate.m - [https://i.imgur.com/7FdCZ.png](https://i.imgur.com/7FdCZ.png)

[WhereamiViewController.h](https://i.imgur.com/B65vf.png) [WhereamiViewController.m](https://i.imgur.com/nCKbl.png)

查看 - [https://i.imgur.com/IZeoa.png](https://i.imgur.com/IZeoa.png)

运行 - [https://i.imgur.com/dyYKd.png](https://i.imgur.com/dyYKd.png)

我很困惑，需要弄清楚这一点，这样我才能继续前进并最终完成这本书。我需要能够在下周之前完成我的第一个工作应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:24:17.463

**问题文本似乎你在问这个......** 你可以设置它的一种方法是这样的：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    LoginViewController* loginView = [[[LoginViewController alloc]initWithNibName:nil bundle:nil]autorelease];
    mainNavController = [[UINavigationController alloc]initWithRootViewController:loginView];

    //here is the magic line
    [_window addSubview:mainNavController.view];

    [self.window makeKeyAndVisible];
    return YES;
} 
```

或者你可以在没有 mainNavController 的情况下做到这一点：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
        // Override point for customization after application launch.
    LoginViewController* loginView = [[[LoginViewController alloc]initWithNibName:nil bundle:nil]autorelease];

    [_window addSubview:loginView.view];
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

**标题似乎是您在问这个...** 现在，当您尝试访问不存在或拼写错误的选择器或类成员时，通常会出现 NSUnknownKeyException 错误（通常是后者！）。您可以将类想象成字典，调用成员或函数就像通过键查询字典对象。前任。

```
`@selector(misspelledFunctionName:)` 
```

或者

```
[object functionThatIsMisspelledOrNotDefinedInObject]; 
```

我不确定问的是哪个问题，所以我试图回答这两个问题。希望这会有所帮助:)

**编辑：这两个最终都是答案，或者是它的一部分。UIApplication 没有分配正确的视图，因此 xib 正在发送不存在的键并导致它崩溃。我从 plist 中删除了根视图分配（结果没有崩溃，但出现空白屏幕），然后像上面一样分配了视图（视图显示完美！）。**

# objective-c - 表视图插入错误

> ID：10760880
> 
> 赞同：0
> 
> 时间：2012-05-25T20:18:58.680
> 
> 标签：objective-c, uitableview, ios5

大家好，当我尝试添加到空表视图时出现此错误：将第 0 行插入第 0 部分，但更新后第 0 部分中只有 0 行。有什么想法吗？

```
 dispatch_queue_t fetchQ = dispatch_queue_create("Blog Fetcher", NULL);
  dispatch_async(fetchQ, ^{
                      //pull this call out to Blog+twitter later saving should only take 
                      //place in the model!

                        [document.managedObjectContext performBlock:^
                        {
                            NSArray* resultsArray = [self.tweets objectForKey:@"results"]; 

                            for (NSDictionary* internalDict in resultsArray)
                            {

                            User *user = [NSEntityDescription 
                                                  insertNewObjectForEntityForName:@"User"inManagedObjectContext:self.context];
                                user.username =[internalDict objectForKey:@"from_user_name"];
                                [self.context save:nil];

                                self.list = [self.list arrayByAddingObject:user];
                                NSLog(@" indexpath set here %i",self.list.count-1);
                                NSIndexPath *newIndexpath =[NSIndexPath indexPathForRow:self.list.count-1  inSection:0];
                                [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexpath] withRowAnimation:UITableViewRowAnimationAutomatic];
                            }
                        }];

              });
            dispatch_release(fetchQ);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T23:15:59.720

我的第一个想法是您应该将更新发送到主线程。我不确定您的实现细节，但您可能还需要转到`[self.context save:nil]`主线程。

```
NSArray* resultsArray = [self.tweets objectForKey:@"results"];
NSMutableArray *users = [NSMutableArray arrayWithCapacity:resultsArray.count];
NSMutableArray *indexPaths =  [NSMutableArray arrayWithCapacity:resultsArray.count];
NSInteger row = self.list.count;

for (NSDictionary* internalDict in resultsArray)
{
    User *user = [NSEntityDescription insertNewObjectForEntityForName:@"User"inManagedObjectContext:self.context];
    user.username =[internalDict objectForKey:@"from_user_name"];
    [self.context save:nil];

    [users addObject:user];

    NSLog(@" indexpath set here %i", row);
    NSIndexPath *newIndexpath =[NSIndexPath indexPathForRow:row inSection:0];
    row++;

    [indexPaths addObject:newIndexpath];
}

dispatch_async(dispatch_get_main_queue(), ^{
    self.list = [self.list arrayByAddingObjectsFromArray:users];
    [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexpath] withRowAnimation:UITableViewRowAnimationAutomatic];
}; 
```

# prolog - Prolog 确定性 - 分组事实

> ID：10760881
> 
> 赞同：2
> 
> 时间：2012-05-25T20:19:05.673
> 
> 标签：prolog, deterministic

我有一个事实...

```
fav_fruit(male, young, apple).
fav_fruit(female, young, bannana).
fav_fruit(male, old, bannana).
fav_fruit(female, old, apple).
fav_fruit(female, young, apple). 
```

我需要找出是否有任何一组（性别，年龄）有更多最喜欢的水果（上述事实的答案是（女性，年轻。）

我一直想弄清楚的是如何在序言中使用`aggregate`or`findall`函数来返回某种类型的列表，例如....

```
female, young = 2 (apple, bannana)
male, young = 1 (apple)
male, old = 1 (bannana)
female, old = 1 (apple) 
```

...这样我就可以检查每个成员的总数并测试它是否大于 1。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:34:54.307

怎么样

```
fav_fruit_class(Gender-Age, List):-
  findall(Gender-Age, fav_fruit(Gender, Age, _), LGenderAge),
  sort(LGenderAge, SGenderAge),
  member(Gender-Age, SGenderAge),
  findall(Fruit, fav_fruit(Gender, Age, Fruit), List). 
```

第一个 findall+sort 得到一个类列表（性别/年龄）。第二个 findall 获取每个班级最喜欢的水果列表。

# ios - 在 UIWebView 中禁用外部 url 链接

> ID：10760882
> 
> 赞同：0
> 
> 时间：2012-05-25T20:19:46.817
> 
> 标签：ios, uiwebview

我使用一些开放资源来处理我在 WebView 中的外部链接，所以现在每次我单击 url 时，一个新视图都会显示带有“完成”“后退”“前进”“在 safari 中打开链接”之类的页面。但与此同时，我的应用程序的早期 webview 仍在加载并显示 url 网站。我怎么能阻止它？当用户为新页面单击“完成”时，他们肯定想回到之前的页面。这是我使用的开放资源类：[https ://github.com/samvermette/SVWebViewController](https://github.com/samvermette/SVWebViewController)

谢谢。希望我说清楚。我是新来的，也是ios开发的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:38:08.377

不完全清楚你在问什么，但每次在 UIWebView 中单击链接时，都会调用 UIWebView 委托 shouldStartLoadWithRequest 方法。

如果您不想加载链接，您只需从此方法返回 NO。

UIWebView 类中还有一些属性可以让您在页面历史记录中返回或前进。

如果这不能回答您的问题，您可以尝试改写它。

# ios - 查找 CGPath 与 CGRect 相交的区域

> ID：10760885
> 
> 赞同：1
> 
> 时间：2012-05-25T20:20:05.750
> 
> 标签：ios, quartz-graphics, quartz-2d, bounding-box, cgpath

我正在开发一个 iOS 应用程序，我需要能够看到屏幕范围内有多少 CGPath 以确保有足够的空间让用户仍然可以触摸。问题是，当形状在拐角处时，当路径在拐角处时，我通常会使用的所有方法（以及我能想到的所有尝试）都会失败。

这是一张照片：![在此处输入图像描述](../Images/38c132d184c776c041628fcc738a3f4e.png)

我如何计算屏幕上有多少该形状？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T00:02:27.330

显而易见的答案是通过像素绘制凭经验进行操作，或者通过多边形裁剪进行分析。

因此，要凭经验进行操作，您将创建`CGBitmapContext`视口的大小，将其清除为已知颜色，例如 (0, 0, 0)，然后以另一种已知颜色在多边形上绘制，例如 (1, 1, 1) 然后只需遍历位图上下文中的所有像素，然后将您可以找到的总数相加。这可能相当昂贵，但如果有帮助，您可以使用较低分辨率的上下文来获得更近似的结果。

要进行分析，您将运行多边形裁剪算法，例如[此处描述](http://www.cc.gatech.edu/grads/h/Hao-wei.Hsieh/Haowei.Hsieh/mm.html#sec3)的算法，以从原始多边形派生一个新多边形，这只是它实际在屏幕上的那部分。然后，您将使用任何常规公式获得该区域。

裁剪凸多边形实际上比凹多边形容易得多，因此如果您的多边形具有固定形状，那么您可以考虑使用三角测量算法，例如[耳朵裁剪](http://www.google.com/url?sa=t&rct=j&q=ear%20clipping&source=web&cd=1&ved=0CGgQFjAA&url=http://www.geometrictools.com/Documentation/TriangulationByEarClipping.pdf&ei=NgbIT5fuJKyr2AW44f3SDQ&usg=AFQjCNFeUbvVtF2iUgo9a3DtYRDgl2kB9w)或[分解为单调边缘](http://www.google.com/url?sa=t&rct=j&q=monotone%20triangulation&source=web&cd=5&ved=0CGAQFjAE&url=http://www.cs.ucf.edu/courses/cot5520/Triangul_monotone.ppt&ei=XQbIT5j2C8fU2QXFl9SyDQ&usg=AFQjCNHpdXEIgvzPg2ZSsR6UDlIRYNqeCg)，然后执行裁剪和面积计算在那些而不是原来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:28:11.250

您可以使用这种方法得到一个近似值：

*   设 reg 为屏幕与形状边界框的交点
*   在reg中选择N个随机点并检查它们是否包含在形状中
*   形状的面积可以通过（reg 的面积）*（形状中包含的点数）/N 来估计

您可以根据 reg 的大小选择参数 N 以获得良好且快速的近似值

# mysql - Grails - 零索引的 MySQL 查询结果导致 GORM 运行时异常

> ID：10760890
> 
> 赞同：0
> 
> 时间：2012-05-25T20:20:24.627
> 
> 标签：mysql, grails, grails-orm

我正在使用来自开源应用程序 (OSTicket) 的现有数据库。有两个表（OstStaff 和 OstTicket，其中工作人员有很多门票）。但是，最大的问题是当票证尚未分配给 OstStaff 时，OSTicket 将默认值零分配给 OstTicket.staff_id。

当您搜索票证并且 GORM 认为有一个索引等于 0 的人员时，就会出现问题。我什至无法检查 null，只是不断收到此错误：

```
No row with the given identifier exists: [com.facilities.model.OstFacStaff#0]. 
Stacktrace follows:
Message: No row with the given identifier exists: [com.facilities.model.OstFacStaff#0] 
```

有什么建议可以解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:29:47.563

通过获取 id 而不是记录，然后删除零索引来解决这个问题。

```
def ticketCriteria = OstFacTicket.createCriteria()
def staffIdsWithTickets = ticketCriteria.list {
    projections {
        distinct("staff.id")  // **INSTEAD of returning staff, get the id**
    }
    between("created", start, end)
}

def zeroIndex = staffIdsWithTickets.indexOf(0)
if (zeroIndex >= 0) {
    staffIdsWithTickets.remove(zeroIndex)
} 
```

# java - Java错误stacktrace积累

> ID：10760891
> 
> 赞同：1
> 
> 时间：2012-05-25T20:20:31.690
> 
> 标签：java, exception

我开发 smpp 客户端，当我一次又一次收到 InvalidResponseException 时，我的堆栈跟踪增加：

```
org.jsmpp.extra.NegativeResponseException: Negative response 0000000f found
    at org.jsmpp.session.AbstractSession.validateResponse(AbstractSession.java:162)
    at org.jsmpp.session.AbstractSession.executeSendCommand(AbstractSession.java:203)
    at org.jsmpp.session.SMPPSession.sendBind(SMPPSession.java:143)
    at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:86)
    at com.sms.client.gw.Gateway.newSession(Gateway.java:107)
    at com.sms.client.gw.Gateway.getSession(Gateway.java:81)
    at com.sms.client.gw.Gateway.access$300(Gateway.java:33)
    at com.sms.client.gw.Gateway$SessionStateListenerImpl.onStateChange(Gateway.java:196)
    at org.jsmpp.session.AbstractSessionContext.fireStateChanged(AbstractSessionContext.java:69)
    at org.jsmpp.session.SMPPSessionContext.changeState(SMPPSessionContext.java:44)
    at org.jsmpp.session.AbstractSessionContext.close(AbstractSessionContext.java:58)
    at org.jsmpp.session.SMPPSessionContext.close(SMPPSessionContext.java:10)
    at org.jsmpp.session.AbstractSession.close(AbstractSession.java:141) 
```

然后增加了堆栈跟踪：

```
org.jsmpp.extra.NegativeResponseException: Negative response 0000000f found
    at org.jsmpp.session.AbstractSession.validateResponse(AbstractSession.java:162)
    at org.jsmpp.session.AbstractSession.executeSendCommand(AbstractSession.java:203)
    at org.jsmpp.session.SMPPSession.sendBind(SMPPSession.java:143)
    at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:86)
    at com.sms.client.gw.Gateway.newSession(Gateway.java:107)
    at com.sms.client.gw.Gateway.getSession(Gateway.java:81)
    at com.sms.client.gw.Gateway.access$300(Gateway.java:33)
    at com.sms.client.gw.Gateway$SessionStateListenerImpl.onStateChange(Gateway.java:196)
    at org.jsmpp.session.AbstractSessionContext.fireStateChanged(AbstractSessionContext.java:69)
    at org.jsmpp.session.SMPPSessionContext.changeState(SMPPSessionContext.java:44)
    at org.jsmpp.session.AbstractSessionContext.close(AbstractSessionContext.java:58)
    at org.jsmpp.session.SMPPSessionContext.close(SMPPSessionContext.java:10)
    at org.jsmpp.session.AbstractSession.close(AbstractSession.java:141)
    at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:100)
    at com.sms.client.gw.Gateway.newSession(Gateway.java:107)
    at com.sms.client.gw.Gateway.getSession(Gateway.java:81)
    at com.sms.client.gw.Gateway.access$300(Gateway.java:33)
    at com.sms.client.gw.Gateway$SessionStateListenerImpl.onStateChange(Gateway.java:196)
    at org.jsmpp.session.AbstractSessionContext.fireStateChanged(AbstractSessionContext.java:69)
    at org.jsmpp.session.SMPPSessionContext.changeState(SMPPSessionContext.java:44)
    at org.jsmpp.session.AbstractSessionContext.close(AbstractSessionContext.java:58)
    at org.jsmpp.session.SMPPSessionContext.close(SMPPSessionContext.java:10)
    at org.jsmpp.session.AbstractSession.close(AbstractSession.java:141)
    at org.jsmpp.session.SMPPSession$EnquireLinkSender.run(SMPPSession.java:394) 
```

而且越来越大。怎么可能？为什么堆栈跟踪会累积？在响应之间，我将 SMPPSessionContext 变量设置为 null，并将 SMPPSession 设置为 null

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T21:02:08.270

据我所见，有一个`close session`事件监听器试图打开一个新会话。同时，该`connectAndBind`方法在检测到失败时会尝试关闭会话，从而触发另一个递归循环。所以停止这样做，停止尝试在`close`事件回调中打开会话（那是你的类`Gateway$SessionStateListenerImpl`）。

# c++ - C++ * vs [] 作为函数参数

> ID：10760893
> 
> 赞同：6
> 
> 时间：2012-05-25T20:20:45.710
> 
> 标签：c++, arrays, pointers, parameters, struct

有什么区别：

```
void foo(item* list)
{
    cout << list[xxx].string;
} 
```

和

```
void this(item list[])
{
    cout << list[xxx].string;
} 
```

假设项目是：

```
struct item
{
    char* string;
} 
```

指针指向字符数组的第一个

并且`list`只是一系列项目......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T20:22:17.160

对于编译器来说，没有区别。

不过读起来不一样。`[]`建议您要将数组传递给函数，而`*`也可能只是一个简单的指针。

请注意，数组在作为参数传递时会衰减为指针（以防您还不知道）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T20:21:59.947

它们是相同的——完全是同义词。第二个是`item list[]`，不是`item[]list`。

`[]`然而，当参数像数组一样`*`使用和像指针一样使用时，习惯上使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T20:35:35.150

供参考：

```
void foo(int (&a)[5]) // only arrays of 5 int's are allowed
{
}

int main()
{
  int arr[5];
  foo(arr);   // OK

  int arr6[6];
  foo(arr6); // compile error
} 
```

但是`foo(int* arr)`,`foo(int arr[])`和`foo(int arr[100])`都是等价的

# iphone - 如何避免 iOS 上的盗版（通常在移动应用程序中）

> ID：10760894
> 
> 赞同：0
> 
> 时间：2012-05-25T20:20:46.077
> 
> 标签：iphone, ios, piracy

我正在考虑一个我想在 Apple App Store 上以 0.99 美元的价格出售的应用程序。没那么多，但我想限制盗版（或者最好避免盗版）。

您在该领域的方法或最佳实践是什么？

*   免费增值（有些功能免费，有些不是）模式？
*   某些客户端/服务器通信的加密？
*   某种电话检测（IMEI，什么？）
*   反盗版代码库（如果存在）

我认为盗版是移动开发人员的一个大问题，不是吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-25T20:55:54.477

我认为这是一个值得商榷的问题。在阅读和搜索该主题后，我得出以下分析：

1.  防止应用程序盗版不可能 100%（请记住，即使 PC 和 Mac 上的大型程序也像操作系统本身、Adobe Suite、大型游戏一样被盗版......）。

2.  无论如何，获得盗版应用程序的人**都不是您的客户：**

    一个。习惯盗版的人根本就没有兴趣付费。

    湾。如果应用程序不能被盗版，盗版人仍然不会为它买单，并会决定没有它生活！

3.  使用盗版应用程序是一种广告方式：当他们使用您的应用程序时，他们的朋友会看到它，如果它是一个好应用程序，这些朋友会想得到它。

4.  并非所有海盗朋友都是海盗，因此您仍然会间接从这些海盗那里获得客户。

5.  **更**重要的是，如果你的应用**真的**很不错，那么在短时间内，即使是盗版者也会购买它。为什么？？仅仅因为您将定期发布更新和错误修复，而窃取您的应用程序需要时间，并且不会赶上发布更新的速度。所以盗版总是会有版本延迟；因此，盗版版本要么缺少您的应用程序的一些新功能，要么仍然包含新版本中不再存在的烦人错误。因此，因为您的应用程序**非常**好，盗版者会放弃并购买它:)

基于这些分析，我决定接受盗版的事实并接受它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T20:28:29.897

对于 iOS，除非您的设备越狱，否则获取应用程序的唯一方法是通过 AppStore。我认为这极大地限制了盗版。对于 Android 设备，由于平台的开放性，它可能会更高一些。

我认为低价和强大的功能是打击盗版的最佳选择。大多数人不介意花一两块钱买一个像样的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T20:39:57.233

你能做的并不多。老实说，从长远来看，应用程序中的盗版通常只会增加其受欢迎程度并增加销售额。如果人们真的想在不付费的情况下获得您的应用程序，他们会找到一种方法来做到这一点，并且如果您设法“阻止”它，它仍然不会为您提供更多销售。数以百万计的其他应用程序的默默无闻是一个更大的问题，而不是从那些如果被阻止盗版就愿意付费的人那里获得少量销售。除非你有一个像愤怒的小鸟这样广为人知的应用程序，而且很可能会被很多愿意付费的人下载，否则根据我的经验，预防措施是不值得的。不过祝你好运。

-Adad64

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T20:27:11.923

当然盗版是一个大问题，但没有太多可以“避免”它。[这](http://landonf.bikemonkey.org/code/iphone/iPhone_Preventing_Piracy.20090213.html)是一篇讨论此主题的博客文章，也是 iOS 反盗版的一步。

# c# - Ajax toolkit file upload is not called

> ID：10760895
> 
> 赞同：3
> 
> 时间：2012-05-25T20:20:59.107
> 
> 标签：c#, ajax, ajaxcontroltoolkit

I have two ajaxtoolkit file ulopads on the same page like

```
 <ajaxToolkit:AjaxFileUpload
        id="AjaxFileUpload1"
        AllowedFileTypes="jpg,jpeg,gif,png"
        OnUploadComplete="ajaxUpload2_OnUploadComplete"
        runat="server"  />
         <ajaxToolkit:AjaxFileUpload
        id="ajaxUpload1"
        AllowedFileTypes="jpg,jpeg,gif,png"
        OnUploadComplete="ajaxUpload1_OnUploadComplete"
        runat="server"  /> 
```

and code behind

```
protected void ajaxUpload2_OnUploadComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
    {

        string filePath = "~/Images/" + e.FileName;
        filePath = filePath.Split('\\').Last();
        Session["img2"] = filePath.ToString();
        AjaxFileUpload1.SaveAs(MapPath(filePath));

    }

    protected void ajaxUpload1_OnUploadComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
    {

        string filePath = "~/Images/" + e.FileName;
        filePath = filePath.Split('\\').Last();
        Session["img1"] = filePath.ToString();
        ajaxUpload1.SaveAs(MapPath(filePath));

    } 
```

The question is whenever I use upload AjaxFileUpload1 it works on and calls void ajaxUpload2_OnUploadComplete method but if I use ajaxUpload1 the method ajaxUpload2_OnUploadComplete is called again but the method ajaxUpload1 is not called

Why??

Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T08:37:25.937

昨天我们遇到了同样的问题，我们发现在同一页面上**不能有**多个**AjaxFileUpload 实例。**

如果查看源代码，您会发现该**控件使用**常量**GUID**来标识其事件。由于**GUID 是一个常量，****因此 AjaxFileUpload**的所有实例都使用**相同的 GUID。**..

**结果 ：**

> 一审吞下所有事件...

这是实际的 GUID：

```
private const string ContextKey = "{DA8BEDC8-B952-4d5d-8CC2-59FE922E2923}";

(...)

if (this.Page.Request.QueryString["contextkey"] == ContextKey && this.Page.Request.Files.Count > 0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:18:20.527

我们对 2012 年 9 月的工具包进行了如下定制 - 希望这是一个临时解决方法，并在未来的版本中修复：

老的

```
private const string ContextKey = "{DA8BEDC8-B952-4d5d-8CC2-59FE922E2923}"; 
```

新的

```
private string ContextKey = ""; 
```

老的

```
public AjaxFileUpload()
            : base(true, HtmlTextWriterTag.Div)
        {
        } 
```

新的

```
public AjaxFileUpload()
            : base(true, HtmlTextWriterTag.Div)
        {
            if (HttpContext.Current.Items["lastAjaxFileUploadContextKey"] == null)
            {
                HttpContext.Current.Items["lastAjaxFileUploadContextKey"] = 1;
            }
            else
            {
                HttpContext.Current.Items["lastAjaxFileUploadContextKey"] = (int)HttpContext.Current.Items["lastAjaxFileUploadContextKey"] + 1;
            }

            ContextKey = HttpContext.Current.Items["lastAjaxFileUploadContextKey"].ToString();
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T15:05:48.613

实际上有一种方法可以在单个页面上使用多个 AjaxFileUpload 控件，每个控件触发自己的事件。解决方法很简单；它涉及为 AjaxFileUpload 控件覆盖 Microsoft 的客户端函数之一，以在控件上注入实际导致上传完成事件的信息，然后将所有 AjaxFileUpload 控件的单个事件处理程序用作“交换机”，随后将触发创建事件服务器端的控件的正确事件处理程序。

这是如何做到的：

在页面的 head 元素之后的某处添加此脚本块。如果您使用母版页，请将其放在 HTML 内容的占位符中：

```
<script type="text/javascript">
    Sys.Extended.UI.AjaxFileUpload.Control.prototype.doneAndUploadNextFile = function (c) {
        var a = new XMLHttpRequest, b = this;
        a.open("POST", "?contextKey=" + this._contextKey + "&done=1&guid=" + c._id + "&uplCtrlID=" + b.get_id(), true);
        a.onreadystatechange = function () {
            if (a.readyState == 4) if (a.status == 200) {
                b.raiseUploadComplete(Sys.Serialization.JavaScriptSerializer.deserialize(a.responseText));
                b._processor.startUpload()
            }
            else {
                b.setFileStatus(c, "error", Sys.Extended.UI.Resources.AjaxFileUpload_error);
                b.raiseUploadError(a);
                throw "error raising upload complete event and start new upload";
            }
        };
        a.send(null);
    }
</script> 
```

此代码与用于调用您的页面并触发 UploadComplete 事件的函数相同，只是修改为添加了一个额外的参数 - uplCtrlID - 它将包含真正导致事件的控件的 ID。

如下设置您的服务器端代码：

```
//set the OnUploadComplete property on all of your AjaxFileUpload controls to this method
protected void anyUploader_UploadComplete(object sender, AjaxFileUploadEventArgs e)
    {
        //call the correct upload complete handler if possible
        if (Request.QueryString["uplCtrlID"] != null)
        {
            //uplCtrlID (the query string param we injected with the overriden JS function)
            //contains the ID of the uploader.
            //We'll use that to fire the appropriate event handler...
            if (Request.QueryString["uplCtrlID"] == FileUploaderA.ClientID)
                FileUploaderA_UploadComplete(FileUploaderA, e);
            else if (Request.QueryString["uplCtrlID"] == FileUploaderB.ClientID)
                FileUploaderB_UploadComplete(FileUploaderB, e);
            //etc (or use a switch block - whatever suits you)
        }
    }
    protected void FileUploaderA_UploadComplete(AjaxFileUpload sender, AjaxFileUploadEventArgs e)
    {
        //logic here
    }
    protected void FileUploaderB_UploadComplete(AjaxFileUpload sender, AjaxFileUploadEventArgs e)
    {
        //logic here
    } 
```

你都准备好了。同一页面上有多个 AjaxFileUpload 控件，没有问题。

# git - Is it rude to commit design documents to github?

> ID：10760896
> 
> 赞同：4
> 
> 时间：2012-05-25T20:21:04.890
> 
> 标签：git, github, binaryfiles

As a designer I use git on my local machine to track projects that, in addition to source code, often contain iterations of icons, pdf manuals, slideware, interaction design documents, and even a short how-to video or two that'll be bundled with the software.

I don't know whether git is the right tool for [version control of design artifacts](https://stackoverflow.com/questions/2494082/is-a-vcs-appropriate-for-usage-by-a-designer) or whether I should bite the bullet and move my stuff over to Subversion, Perforce, PlasticSCM, or something designed to handle binary blobs. But the files aren't large and the extra gig it uses on my personal machine to keep them versioned in git is cheaper than the overhead of switching to a different version control system just for my design artifacts. (Though I am trying to figure out if git submodule, git annex, or git bup might help.)

However, my question is whether it would be rude to put one of these projects on github. I'd like to share it with some collaborators and it would be most convenient (for me anyway) to just push the entire repository as is. AFIK github doesn't come out and say that projects should consist of text files, but it does seem to be an implicit assumption. I'm concerned that pushing a project that contains slideware and videos would be a rude misuse of a community resource, but I'm not sure what would constitute a "rude size" (50MB? 500MB? 5GB?) because they don't define [disk space limits](https://github.com/plans). This particular project repo is less than half a gig so perhaps I'm making much ado about nothing.

[Edit: I completely missed the *other*, more helpful github disk quota help page: [https://help.github.com/articles/what-is-my-disk-quota](https://help.github.com/articles/what-is-my-disk-quota) ]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:26:53.350

不，这并不粗鲁。很多人在 Github 上托管二进制文件，甚至还有[特殊的图像查看模式](https://github.com/blog/817-behold-image-view-modes)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:26:22.367

嗯，把它扔在那里。它们对空间使用有软限制。如果有人标记它，它将被删除。没有损失。如果您正在分享有用的东西，那么您将做的最糟糕的事情就是吸引更多潜在的付费访问者。

# java - Is Android blocking UDP packets from outsite?

> ID：10760900
> 
> 赞同：0
> 
> 时间：2012-05-25T20:21:22.590
> 
> 标签：java, android, udp

I have just created a simple application, that sends a message to the server, and server replies back. Everything is good in local network, but when I am trying to do the same outsite my network, it is working in following way:

1.  Client sends packet
2.  Server receives packet
3.  Server sends packet
4.  Client doesn't receives packet.

To send anwser packet I am using InetAddress delivered with DatagramPacket.

What can cause this problem?

# objective-c - 使用NSTimer，调用两个同名，不同参数的函数，都使用scheduledTimerWithTimeInterval

> ID：10760901
> 
> 赞同：0
> 
> 时间：2012-05-25T20:21:28.937
> 
> 标签：objective-c, ios, cocoa, avaudioplayer

我正在尝试使用 AVAudioPlayer 作为助手编写自己的淡入和淡出。

我的问题是：我有两个同名的方法定义，但一个接受一个 int，另一个不接受参数。有没有办法让我告诉 NSTimer 打电话给哪个？无法真正理解文档：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)

```
-(void) stopWithFadeOut 
{
if (_player.volume > 0.1) {
    [self adjustVolume:-.1];
    [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(stopWithFadeOut) userInfo:NULL repeats:NO];
}
else {
    [self stop];
}
} 
```

和

```
-(void) stopWithFadeOut:(NSString *)speed 
{
int incr = [speed intValue];
if (_player.volume > 0.1) {
    [self adjustVolume:-incr];
    [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(stopWithFadeOut) userInfo:NULL repeats:NO];
}
else {
    [self stop];
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T20:25:34.547

它们实际上有*不同的*名称。冒号很重要，因此第二种方法的名称（以及因此的参数`@selector()`）是`stopWithFadeOut:`.*

那么，要创建计时器，您需要：

```
[NSTimer scheduledTimerWithTimeInterval:0.1 
                                 target:self 
                               selector:@selector(stopWithFadeOut:) 
                               userInfo:NULL                   //^ Note! Colon!
                                repeats:NO]; 
```

但是，这种方法是不正确的，因为 an`NSTimer`将*自身*传递给了它的 action 方法；你不可能*传入*任意对象。这就是`userInfo:`参数的用途。您可以将一些对象*附加*到计时器，并使用该方法在操作方法中检索它`userInfo`，如下所示：

```
- (void)stopWithFadeOut: (NSTimer *)tim 
{
    NSString * speed = [tim userInfo];
    int incr = [speed intValue];
    if (_player.volume > 0.1) {
        [self adjustVolume:-incr];
        [NSTimer scheduledTimerWithTimeInterval:0.1 
                                         target:self 
                                       selector:@selector(stopWithFadeOut:) 
                                       userInfo:speed
                                        repeats:NO];
    } 
```

（另请注意，这意味着您的第一个方法并不是真正正确的`NSTimer`操作方法，因为它没有`NSTimer`参数。）

* * *

*编译器不会让你在一个类中声明或定义两个同名的方法，并且参数类型不计入选择器的一部分，所以试图在一个类中创建`-(void)dumblethwaite:(int)circumstance;`和定义`-(void)dumblethwaite:(NSString *)jinxopotamus;`是行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T21:25:45.383

所以这就是我想出的。谢谢乔希。

```
-(void) pauseWithFadeOut
{
NSNumber *incr = [[NSNumber alloc] initWithFloat:0.1];
while (_player.volume > 0.1) {
    [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(fadeOut) userInfo:incr repeats:NO];
}
}
-(void)fadeOut: (NSTimer*) deleg
{   
int incr = (int) [deleg userInfo];
if (_player.volume > 0.1) {
    [self adjustVolume:-incr];
}

} 
-(void) pauseWithFadeOut:(NSString *)speed
{
NSNumber *incr = [[NSNumber alloc] initWithFloat:[speed floatValue]];
while (_player.volume > 0.1) {
    [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(fadeOut) userInfo:incr repeats:NO];
}

[self pause];

}
-(void) stopWithFadeOut
{
NSNumber *incr = [[NSNumber alloc] initWithFloat:0.1];
while (_player.volume > 0.1) {
    [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(fadeOut) userInfo:incr repeats:NO];
}
}
-(void) stopWithFadeOut:(NSString *)speed
{
NSNumber *incr = [[NSNumber alloc] initWithFloat:[speed floatValue]];
while (_player.volume > 0.1) {
    [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(fadeOut) userInfo:incr repeats:NO];
}

[self stop];

} 
```

# java - How to initialise,load properties and dispose my own connection pool using spring?

> ID：10760902
> 
> 赞同：0
> 
> 时间：2012-05-25T20:21:28.997
> 
> 标签：java, spring, initialization, pool

I have own connection pool:

```
public final class ConnectionPool {

private static final Logger log = Logger.getLogger(ConnectionPool.class);

private static final int DEFAULT_POOL_SIZE = 10;

//single instance
private static ConnectionPool instance;
//queue of free connections
private BlockingQueue<Connection> connectionQueue;

public ConnectionPool(String driver, String url, String user,
        String password, int poolSize)
        throws ClassNotFoundException, DAOException{
    try{
        Class.forName(driver);
        connectionQueue = new ArrayBlockingQueue<Connection>(poolSize);
        for(int i = 0; i < poolSize ;i++){
            Connection connection = DriverManager.getConnection(url, user, password);
            connectionQueue.offer(connection);
        }
    }
    catch (SQLException e) {
        log.error(e);
        throw new DAOException(e.getMessage());
    }
}

public static void init() throws DAOException{
    try {
    if(instance == null){

        String driver  =  ConfigurationManager.
        getInstance().getProperty(ConfigurationManager.DATABASE_DRIVER_NAME);
        String url = ConfigurationManager.
        getInstance().getProperty(ConfigurationManager.DATABASE_URL);
        String user = ConfigurationManager.
        getInstance().getProperty(ConfigurationManager.DATABASE_USER);
        String password = ConfigurationManager.
        getInstance().getProperty(ConfigurationManager.DATABASE_PASSWORD);
        String poolSizeStr = ConfigurationManager.
        getInstance().getProperty(ConfigurationManager.DATABASE_POOLSIZE);
        int poolSize = (poolSizeStr != null) ?
                Integer.parseInt(poolSizeStr) : DEFAULT_POOL_SIZE;

        log.info("Trying to create pool of connections...");

        instance = new ConnectionPool(driver,url,user,password,poolSize);

        log.info("Connection pool initialized");
    }
    }catch (ClassNotFoundException e) {
        log.error(e);
    } catch (SQLException e) {
        log.error(e);
        throw new DAOException(e.getMessage());
    }
}

public static void dispose() throws DAOException {
    try {
        if(instance != null){
            instance.clearConnectionQueue();
            instance = null;
            log.info("Connection queue is disposed");
        }
    } catch (DAOException e) {
        log.info(e.getMessage());
        throw new DAOException(e.getMessage());
    }
}

public static ConnectionPool getInstance(){
    return instance;
}

public Connection takeConnection() {
    Connection connection = null;
    try{
        connection = connectionQueue.take();
    }catch (InterruptedException e) {
        log.info("Free connection waiting interrupted.Returned null connection");
        log.error(e);
    }
    return connection;
}

public static void releaseConnection(Connection connection) throws DAOException {
    try {

        if(!connection.isClosed()){
            if(!getInstance().connectionQueue.offer(connection)){
                log.info("Connections is not added.");
            }
        }
        else{
            log.info("Trying to release closed connection.");
        }
    } catch (SQLException e) {
        log.info("SQLException at connection isClosed(). Connection is not               added");
        throw new DAOException(e.getMessage());
    }
}

private void clearConnectionQueue() throws DAOException{
    try {
        Connection connection;
        while((connection = connectionQueue.poll()) != null){

            if(!connection.getAutoCommit()){
                connection.commit();
                connection.close();
            }
    }
    } catch (SQLException e) {
        log.info(e.getMessage());
        throw new DAOException(e.getMessage());
    }
}

} 
```

And I now I'm initialise and destroy it with listener and load properties using my own class `ConfigurationManager`,connected with `ResourceBundle`:

```
public final class ConfigurationManager {

private static ConfigurationManager instance;
private ResourceBundle resourceBundle;
//getting info from config.properties
private static final String BUNDLE_NAME = "config";
public static final String DATABASE_DRIVER_NAME =
    "DATABASE_DRIVER_NAME";
public static final String DATABASE_URL =
    "DATABASE_URL";
public static final String DATABASE_USER =
    "DATABASE_USER";
public static final String DATABASE_PASSWORD =
    "DATABASE_PASSWORD";
public static final String ERROR_PAGE_PATH =
    "ERROR_PAGE_PATH";

public static final String BEAN_PATH =
    "BEAN_PATH";
public static final String DATABASE_POOLSIZE =
    "DATABASE_POOLSIZE";

public synchronized static ConfigurationManager getInstance() {
    if (instance == null) {
        instance = new ConfigurationManager();
        instance.resourceBundle =
            ResourceBundle.getBundle(BUNDLE_NAME);
    }
    return instance;
}
public String getProperty(String key) {
    return (String)resourceBundle.getObject(key);
}
 } 
```

But I want to do it(init,destroy,properties), using Spring. So how could I do it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:27:00.317

使用 Spring 的 init 和 destroy 方法，当然：

[http://www.mkyong.com/spring/spring-init-method-and-destroy-method-example/](http://www.mkyong.com/spring/spring-init-method-and-destroy-method-example/)

就个人而言，我认为这是不明智的。您不太可能改进您已经可用的池（例如 C3P0）。你可能做得更糟。但这是你的选择。

# android - Don't run function on onRestoreInstanceState

> ID：10760904
> 
> 赞同：1
> 
> 时间：2012-05-25T20:21:34.867
> 
> 标签：android, restore, oncreate

I am working on an app that when you go to a screen you select your location from a dialog which is created within `onCreate`. Once the location is selected it writes it into a predined `TextView`. A problem that I am having is when the screen orientation changes it recreates the dialog and I'm trying to have it not fire the dialog function.

Here is the basics of what I have within the class file.

```
 @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.emergpolice);

    form_location = (TextView) findViewById(R.id.input_location);

    if(form_location == null || form_location.getText().equals("")){
        setLocation();
    }
}

@Override
protected void onSaveInstanceState(Bundle outState){
    super.onSaveInstanceState(outState);
    outState.putString("LOCATION", (String)form_location.getText());
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState){
    super.onRestoreInstanceState(savedInstanceState);
    form_location.setText(savedInstanceState.getString("LOCATION"));
}

public void setLocation(){
    db = new DatabaseHandler(this);
    db.open();
    final CharSequence[] locOpt = {getString(R.string.dialog_items_current_location),getString(R.string.dialog_items_home),getString(R.string.dialog_items_enter_manually)};
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle(getString(R.string.header_choose_location));
    builder.setSingleChoiceItems(locOpt, -1, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item){
            if(locOpt[item].equals(getString(R.string.dialog_items_home))){
                Cursor cur = db.userInfo(); 
                String address = cur.getString(cur.getColumnIndex("address"));
                String city = cur.getString(7);
                String county = cur.getString(8);
                String state = cur.getString(9);
                String zip = cur.getString(10);
                db.close();
                form_location.setText(address + ", " + city + ", " + county + ", " + state + ", " + zip);
            }
            if(locOpt[item].equals(getString(R.string.dialog_items_current_location))){
                Toast.makeText(getApplicationContext(), locOpt[item], Toast.LENGTH_SHORT).show();
            }
            dialog.cancel();
        }
    });
    AlertDialog alert = builder.create();
    alert.show();
} 
```

And the `TextView` in my layout is

```
 <TextView
            android:id="@+id/input_location"
            android:layout_width="wrap_content"
            android:layout_below="@+id/text_location"
            android:layout_height="wrap_content"
            android:text="" /> 
```

As far as firing `setLocation()` is have tried several scenarios to check the string length, whether null or not. When the screen changes it shows the original chosen location, but still fires the dialog.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:34:58.997

您总是调用该方法`setLocation`，因为每次都会调用该方法（因为重新创建了该`onCreate`方法（并且很可能您没有在布局文件中设置文本））。`Activity``form_location.getText().equals("")``true``TextView`

为避免这种情况，请使用`savedInstanceState`以下`onCreate`方法：

```
if (savedInstanceState == null){
   // if savedInstanceState is null the activity is created for the first time
   setLocation();
} else {
   // if not null then the activity is recreated so restore the TextView text
   form_location.setText(savedInstanceState.getString("LOCATION"));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T20:34:11.483

您可以在活动标签的清单文件中设置 configchange 的属性。如果你设置。每次方向更改都不会破坏您的活动的标志方向。所以 onceate 只会被调用一次。

# c++ - C++：列出字符串的排列

> ID：10760908
> 
> 赞同：3
> 
> 时间：2012-05-25T20:21:51.287
> 
> 标签：c++, performance, algorithm, permutation

我想问我所有的程序员同事关于**效率**的问题。我目前正在解决工作面试中可能会问到的问题，并且遇到了著名的**字符串**排列。我在下面编写的代码可能是编程历史上最常见的东西，但是，我不知道它的状态，因为我没有检查任何解决方案。

长话短说我在下面编写的程序是否是一个合适的解决方案？或者它可以变得更有效率。问是因为如果有一天我遇到了，我想确定我已经实施了解决这个问题的最佳方法之一。

```
#include <iostream>
using namespace std;

int fac(int num)
{
    int result=1;
    for(int i=1;i<=num;i++)
        result*=i;
    return result;
}

int main(int argc, const char * argv[])
{
    string str="abcd";
    int limit=fac(str.size());
    int mod=str.size();
    for(int i=0;i<limit;i++){
        swap(str[i%mod],str[(i+1)%mod]);
        cout<<str<<endl;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:26:51.270

不处理字符串中的重复字母，例如`"aaabbb"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T20:57:22.657

你可以使用递归：

```
#include <iostream>
#include <tchar.h>
#include <string>

using namespace std;

void swap(char &first, char &second) {
    char tmp = first;
    first = second;
    second = tmp;
}

void enumPermutations(string &p, int m)
{
    if (m == p.size() - 1)
        cout << p << endl;
    else
        for (int j = m; j < p.size(); j++) {
            swap(p[j], p[m]);
            enumPermutations(p, m+1);
            swap(p[j], p[m]);
        }
}

int _tmain(int argc, _TCHAR* argv[])
{
    string str = "abcd";
    enumPermutations(str, 0);
    getchar();
    return 0;
} 
```

（在 Visual Studio 中编译和测试）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T20:55:12.173

我已经通过使用`std::map`. 不要认为它是**低效的；**

```
#include <iostream>
#include <map>
#include <vector>
using namespace std;

int fac(int num)
{
    int result=1;
    for(int i=1;i<=num;i++)
        result*=i;
    return result;
}
int main(int argc, const char * argv[])
{
    string str="aabb";
    int limit=fac(str.size());
    int mod=str.size();
    std::map<string,bool>T;
    vector<string>permutations;
    for(int i=0;i<limit;i++){
        if(T[str]==0){
            permutations.push_back(str);
            T[str]=1;
        }
        swap(str[i%mod],str[(i+1)%mod]);
    }
    for(int i=0;i<permutations.size();i++)
        cout<<permutations[i]<<endl;
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T21:31:10.290

您的问题的答案是**否定**的。在您知道它有效之前，您不应该担心任何提议的解决方案的效率。而这个不起作用。

以下证明了这一事实。

```
ben-tillys-macbook-pro:ton btilly$ cat foo.cc
#include <iostream>
using namespace std;

int fac(int num)
{
    int result=1;
    for(int i=1;i<=num;i++)
        result*=i;
    return result;
}

int main(int argc, const char * argv[])
{
    string str="abcd";
    int limit=fac(str.size());
    int mod=str.size();
    for(int i=0;i<limit;i++){
        swap(str[i%mod],str[(i+1)%mod]);
        cout<<str<<endl;
    }
    return 0;
}
ben-tillys-macbook-pro:ton btilly$ g++ foo.cc
ben-tillys-macbook-pro:ton btilly$ ./a.out | wc
      24      24     120
ben-tillys-macbook-pro:ton btilly$ ./a.out | sort -u | wc
      12      12      60
ben-tillys-macbook-pro:ton btilly$ ./a.out | grep bdc
ben-tillys-macbook-pro:ton btilly$ 
```

# xml - Deserialize a custom XML

> ID：10760909
> 
> 赞同：1
> 
> 时间：2012-05-25T20:21:51.177
> 
> 标签：xml, c#-4.0, xml-parsing, linq-to-xml, .net-framework-version

I need to deserialize an XML which appers like

`

```
<?xml version="1.0" encoding="UTF-8" ?>
<air-search-result xmlns="http://www.cleartrip.com/air/">
    <onward-solutions>
        <solution>
            <pricing-summary>
                <base-fare>2000.00</base-fare>
                <taxes>2887.40</taxes>
                <total-fare>4887.40</total-fare>
            </pricing-summary>
            <flights>
                <flight>
                    <segments>
                        <segment>
                            <index>1</index>
                            <departure-airport>BOM</departure-airport>
                            <arrival-airport>CCU</arrival-airport>
                            <departure-date-time>2008-11-01T09:20:00</departure-date-time>
                            <arrival-date-time>2008-11-01T12:00:00</arrival-date-time>
                            <airline>6E</airline>
                            <flight-number>321</flight-number>
                            <operating-airline>6E</operating-airline>
                            <stops>0</stops>
                            <equipment>320</equipment>
                            <duration>9600</duration>
                        </segment>
                    </segments>
                </flight>
            </flights>
            <pax-pricing-info-list>
                <pax-pricing-info>
                    <pax-type>ADT</pax-type>
                    <pricing-info-list>
                        <pricing-info>
                            <index>1</index>
                            <fare-basis-code>H0BOMCCU</fare-basis-code>
                            <fare-key>SomeGUIDKEY</fare-key>
                            <pricing-elements>
                                <pricing-element>
                                    <category>TAX</category>
                                    <code>CLEARTRIP-SVC</code>
                                    <amount>12.40</amount>
                                </pricing-element>
                                <pricing-element>
                                    <category>BF</category>
                                    <amount>2000.00</amount>
                                </pricing-element>
                                <pricing-element>
                                    <category>TAX</category>
                                    <code>PSF</code>
                                    <amount>225.00</amount>
                                </pricing-element>
                                <pricing-element>
                                    <category>TAX</category>
                                    <code>YQ</code>
                                    <amount>2350.00</amount>
                                </pricing-element>
                                <pricing-element>
                                    <category>TAX</category>
                                    <code>YR</code>
                                    <amount>150.00</amount>
                                </pricing-element>
                                <pricing-element>
                                    <category>TAX</category>
                                    <code>TF</code>
                                    <amount>100.00</amount>
                                </pricing-element>
                                <pricing-element>
                                    <category>TAX</category>
                                    <code>AIRLINE-MSC</code>
                                    <amount>50.00</amount>
                                </pricing-element>
                                <pricing-element>
                                    <category>MKP</category>
                                    <amount>0.00</amount>
                                </pricing-element>
                                <pricing-element>
                                    <category>DIS</category>
                                    <amount>0.00</amount>
                                </pricing-element>
                            </pricing-elements>
                        </pricing-info>
                    </pricing-info-list>
                    <booking-info-list>
                        <booking-info>
                            <index>1</index>
                            <segment-index>1</segment-index>
                            <pricing-info-index>1</pricing-info-index>
                            <booking-class>R</booking-class>
                            <cabin-type>E</cabin-type>
                            <ticket-type>E</ticket-type>
                        </booking-info>
                    </booking-info-list>
                </pax-pricing-info>
            </pax-pricing-info-list>
        </solution>
    </onward-solutions>
    <return-solutions>
        <solution>
            <pricing-summary>
                <base-fare>1500.00</base-fare>
                <taxes>2884.30</taxes>
                <total-fare>4384.30</total-fare>
            </pricing-summary>
            <flights>
                <flight>
                    <segments>
                        <segment>
                            <index>1</index>
                            <departure-airport>CCU</departure-airport>
                            <arrival-airport>BOM</arrival-airport>
                            <departure-date-time>2008-11-10T05:50:00</departure-date-time>
                            <arrival-date-time>2008-11-10T08:30:00</arrival-date-time>
                            <airline>6E</airline>
                            <flight-number>320</flight-number>
                            <operating-airline>6E</operating-airline>
                            <stops>0</stops>
                            <equipment>320</equipment>
                            <duration>9600</duration>
                        </segment>
                    </segments>
                </flight>
            </flights>
            <pax-pricing-info-list>
                <pax-pricing-info>
                    <pax-type>ADT</pax-type>
                    <pricing-info-list>
                        <pricing-info>
                            <index>1</index>
                            <fare-basis-code>K0BOMCCU</fare-basis-code>
                            <fare-key>SomeGUIDKEY</fare-key>
                            <pricing-elements>
                                <pricing-element>
                                    <category>TAX</category>
                                    <code>CLEARTRIP-SVC</code>
                                    <amount>9.30</amount>
                                </pricing-element>
                                <pricing-element>
                                    <category>BF</category>
                                    <amount>1500.00</amount>
                                </pricing-element>
                                <pricing-element>
                                    <category>TAX</category>
                                    <code>PSF</code>
                                    <amount>225.00</amount>
                                </pricing-element>
                                <pricing-element>
                                    <category>TAX</category>
                                    <code>YQ</code>
                                    <amount>2350.00</amount>
                                </pricing-element>
                                <pricing-element>
                                    <category>TAX</category>
                                    <code>YR</code>
                                    <amount>150.00</amount>
                                </pricing-element>
                                <pricing-element>
                                    <category>TAX</category>
                                    <code>TF</code>
                                    <amount>100.00</amount>
                                </pricing-element>
                                <pricing-element>
                                    <category>TAX</category>
                                    <code>AIRLINE-MSC</code>
                                    <amount>50.00</amount>
                                </pricing-element>
                                <pricing-element>
                                    <category>MKP</category>
                                    <amount>0.00</amount>
                                </pricing-element>
                                <pricing-element>
                                    <category>DIS</category>
                                    <amount>0.00</amount>
                                </pricing-element>
                            </pricing-elements>
                        </pricing-info>
                    </pricing-info-list>
                    <booking-info-list>
                        <booking-info>
                            <index>1</index>
                            <segment-index>1</segment-index>
                            <pricing-info-index>1</pricing-info-index>
                            <booking-class>R</booking-class>
                            <cabin-type>E</cabin-type>
                            <ticket-type>E</ticket-type>
                        </booking-info>
                    </booking-info-list>
                </pax-pricing-info>
            </pax-pricing-info-list>
        </solution>
    </return-solutions>
</air-search-result> 
```

`

I have a Service that would make a call to an external service and the external service would return an object like this. I need to mock the service for an instance to see that I have everything in Place. But unfortunately I have got no classes containing the above information and hence I cannot deserialize it. Can Somebody help?

# eclipse - Missing required library classes_managed

> ID：10760913
> 
> 赞同：3
> 
> 时间：2012-05-25T20:22:24.890
> 
> 标签：eclipse, playframework-2.0

Im using play 2.0 and trying to modularize the project into a subproject. In $project_home, created folder structure ${project_home}/data/app/models/MyModel.java

The Build.scala looks

```
val dataDependencies = Seq(
)

val dataProject = PlayProject(appName + "-data", appVersion, dataDependencies, path = file("data"), mainLang = JAVA)

val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
  // Add your own project settings here      
).dependsOn(dataProject).aggregate(dataProject) 
```

I run a play eclpsify command.

In eclipse, I've imported two projects, the main project and the data project.

The data project shows the following error

Project '-data' is missing required library: '/path/to/myprojects/data/target/scala-2.9.1/classes_managed'

What am I doing wrong here? Any help would be appreciated

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T17:56:23.750

这对我有用（在 Windows 上）。

1.  编辑**.classpath**，应该有一个类似这样的条目： `<classpathentry path="D:\your_play_project_folder\target\scala-2.10\classes_managed" kind="lib"></classpathentry>`

2.  删除“目标”之前的路径部分以获得此： `<classpathentry path="target\scala-2.10\classes_managed" kind="lib"></classpathentry>`

3.  刷新 Eclipse。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T16:04:38.280

我在使用 play 2.0.2 构建项目时遇到了类似的问题我手动创建了文件夹并在 eclipse 中`target/scala-2.9.1/classes_managed`运行项目`clean all`

我希望它有帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T05:47:41.553

我认为你有3种可能性：

1.  手动创建 data/target/scala-2.9.1/classes_managed。

2.  从类路径中删除路径（如果没有必要）

3.  切换到 2.1 快照

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T23:00:07.707

对我有帮助：

1.  从 .classpath 文件中手动删除 target/scala-2.9.1/classes_managed
2.  通过 eclipse 添加了 target/scala-2.9.1/classes_managed: project/properties/Java Build Path --> tab Libraries --> Add Class Folder...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-24T17:26:14.417

尝试“play clean”然后“play eclipse”，从项目基础文件夹中的命令提示符重新生成 eclipse 项目文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-26T08:05:41.063

尝试这个：

```
1) sbt> clean/compile in parent, followed by child project
2) add target/src-managed/main as source folder in eclipse, both projects
3) in child
java build path > projects > (add parent)
project references > (add parent) 
```

顺便说一句，dataProject 做什么？我的基础项目提供了一个 DAO 层和其他与 Play 无关的细节；因此，我只是将它定义为一个根 sbt 项目，并通过`dependsOn(root)`

无论如何，希望这能解决问题......

# jquery - Absolutely Positioned DIV with a High Z-Index Is Blocking Click Events Below it

> ID：10760917
> 
> 赞同：5
> 
> 时间：2012-05-25T20:22:35.233
> 
> 标签：jquery, css, events, click, z-index

Here is what I am trying to do:

Create a global "gesture container" that is absolutely positioned, width and height 100%, and a z-index that is higher than all other elements in the document.

Here is my problem: When I create this container, my absolutely positioned element is blocking the click events that are bound to everything that is below it.

```
$(document).ready(function() {
    $(document).on('click touchstart', '.block', function() {
        var $this = $(this);

        if(!$this.hasClass("disabled")){
            $this.addClass("disabled")
            $this.openPopUp();
        }
        return false;           
    });
}); 
```

Notice I am using the new .on() call from jQuery 1.7.2 which I have set up to function the same way as .live().

Why is my element not accepting my click? Looks like my gesture area is blocking it, but is there a way around that?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T20:32:43.100

解决方案一。CSS。设置`pointer-events: none;`，但这仅适用于 Firefox、Chrome 和 Safari。

解决方案二。JavaScript。[http://www.vinylfox.com/forwarding-mouse-events-through-layers/](http://www.vinylfox.com/forwarding-mouse-events-through-layers/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T20:30:58.540

我不认为你可以覆盖它。基本上这就是事件的工作方式，这就是为什么您可以在屏幕中央显示一个对话框并单击它而不在该对话框下方的元素上触发相同的事件。

您可以在更高的元素上制作类似的元素，但这看起来像点击劫持，并且某些浏览器插件可能会将您的网站标记为潜在风险

这是关于这个主题的类似讨论：[HTML“overlay”，它允许点击落入它后面的元素](https://stackoverflow.com/questions/1401658/html-overlay-which-allows-clicks-to-fall-through-to-elements-behind-it)

# javascript - jQuery table input in rails app

> ID：10760919
> 
> 赞同：0
> 
> 时间：2012-05-25T20:23:15.170
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

In my app i have a form with 4 fields that records information about a friend. (see screenshot)

At the bottom i have a button that dynamically duplicates the form should the user want to enter another record.

They way i have it setup is sort of messy and will be extremely long should the user want to add lots of records.

Is there a cleaner way to do this? Maybe some sort of jquery table?

![enter image description here](../Images/98c771fb1320702a559d2ba7e60af961.png)

View code:

```
<div id="single_module">
<div class="pitch">
<h2>Step 3: Friends Birthdays</h2>
</div>
<form id="myForm">
<div id="input1" style="margin-bottom:4px;" class="clonedInput">
<%= simple_form_for @user, url: wizard_path do |f| %>

  <div class="inputs">
  <ul class="testss1">
  <%= f.simple_fields_for :friends do |friend_f| %>
    <li>
    <%= friend_f.input :name %>
    </li>
    <li>
    <%= friend_f.input :dob, :as => :date_picker, :label => 'Birthday', :input_html => { :class => 'special' } %>
    <li>
    <%= friend_f.input :gender, :collection => ['male','female'] %></li>
    </li><li>
    <%= friend_f.association :interests, :as => :select, :label => false %></li>

    <%end%>

    </div>
    <div>
    <input type="button" id="btnAdd" value="add another name" />
    <input type="button" id="btnDel" value="remove name" />
    </div>
    </form>
    <div class="actions">
    <%= f.button :submit, 'Next Step', :class => 'btn btn-primary',  %>
    <br></br>
    </div>
    <%end%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:32:14.253

你每次保存的时候完成，再添加一个朋友点击吗？为什么不在临时隐藏字段中保存数据，然后清除表单中的所有数据并让用户添加另一条记录？

# javascript - dynamic javascript/php form with radios creating a second field

> ID：10760923
> 
> 赞同：1
> 
> 时间：2012-05-25T20:23:48.213
> 
> 标签：javascript, forms, textbox, radio-button, dynamic-forms

I'm having a little 'teething' problem here is my code so far

```
<form name="job_app">
    Source?<br/>
        <input type="radio" name="source" value="GAZ" id="GAZ" /> Stonoway Gazette <br/>
        <input type="radio" name="source" value="JCP" id="JCP" /> Job Center <br/>
        <input type="radio" name="source" value="WOM" id="WOM" /> Word of Mouth <br/><br/>

    <script language="text/JavaScript">
        if (document.job_app.source.GAZ.checked){
            document.write='Issue <br/><input type="text" name="issue" /><br/><br/>';
        }
        else if (document.job_app.source.JCP.checked){
            document.write='Ref <br/><input type="text" name="ref" /><br/><br/>';
        }
        //word of mouth has no additional input so there is no if statement for it
    </script>
</form> 
```

what i want this to do is create (or unhide) the issue or ref text box depending on which radio button is selected without creating multiple text boxes.

sorry for any inconvenience if this is a rookie mistake, i have never worked with java before nor a language like it.

This is the working code as of 07:15 26/05/2012 as thanks to Amy McCrobie. It has undergone some edits since Amy's version (see below) i have moved all scripts above the form to make adding the next few fields easier, added a statement for word of mouth, omitted `<head>` as that is part of index.php and meta.php while this is for form.php, added a spacer and made the function name more specific.

index.php

```
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
    <head>
        <?php
            include './meta.php';
        ?>
    </head>
    <?php
        /*if(isset($_POST['submit'])){
            include './submit.php';
        }
        else{*/
            include './form.php';
        //}
    ?>
</html> 
```

meta.php

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
<meta http-Equiv="Cache-Control" Content="no-cache" />
<meta http-Equiv="Pragma" Content="no-cache" />
<meta http-Equiv="Expires" Content="0" />
<title>job_app</title>
<link rel="StyleSheet" type="text/css" href="./style.css"/> 
```

form.php

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $("#issueEl").hide();
    $("#refEl").hide();
});
    function showHide_source(){
        if (document.getElementById('GAZ').checked)
        {
            document.getElementById('issueEl').style.display = 'block';
            document.getElementById('refEl').style.display = 'none';
            document.getElementById('src_spEl').style.display = 'none';
        } 
        if (document.getElementById('JCP').checked)
        {
            document.getElementById('issueEl').style.display = 'none';
            document.getElementById('refEl').style.display = 'block';
            document.getElementById('src_spEl').style.display = 'none';
        }
    if (document.getElementById('WOM').checked)
        {
            document.getElementById('issueEl').style.display = 'none';
            document.getElementById('refEl').style.display = 'none';
            document.getElementById('src_spEl').style.display = 'block';
        }
    }
</script>
<form name="job_app" action="" method="post"> 
    Source?<br/> 
        <input type="radio" name="source" value="GAZ" id="GAZ" onChange="showHide_source()" /> Stonoway Gazette <br/> 
        <input type="radio" name="source" value="JCP" id="JCP" onChange="showHide_source()" /> Job Center <br/> 
        <input type="radio" name="source" value="WOM" id="WOM" onChange="showHide_source()" /> Word of Mouth <br/><br/> 
    <div class="hideable" id="issueEl">Issue <br/><input type="text" name="issue" /><br/><br/></div>
    <div class="hideable" id="refEl">Ref <br/><input type="text" name="ref" /><br/><br/></div>
    <div class="hideable" id="src_spEl"></div>
    rest of form        
    <input...
     .../>
</form> 
```

style.css

```
div.hideable{
    height: 62px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:28:56.133

尝试这个：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-Equiv="Cache-Control" Content="no-cache">
    <meta http-Equiv="Pragma" Content="no-cache">
    <meta http-Equiv="Expires" Content="0">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $("#issueEl").hide();
            $("#refEl").hide();
        });
    </script>
    <title>Test</title>
</head>
<body>
<form name="job_app" action="" method="post"> 
    Source?<br/> 
        <input type="radio" name="source" value="GAZ" id="GAZ" onChange="showHide()" /> Stonoway Gazette <br/> 
        <input type="radio" name="source" value="JCP" id="JCP" onChange="showHide()" /> Job Center <br/> 
        <input type="radio" name="source" value="WOM" id="WOM" onChange="showHide()" /> Word of Mouth <br/><br/> 
        <div id="issueEl">Issue <br/><input type="text" name="issue" /><br/><br/></div>
        <div id="refEl">Issue <br/><input type="text" name="ref" /><br/><br/></div>
</form>
<script type="text/javascript">
function showHide(){
    if (document.getElementById('GAZ').checked)
    {
        document.getElementById('issueEl').style.display = 'block';
        document.getElementById('refEl').style.display = 'none';
    } 
    if (document.getElementById('JCP').checked)
    {
        document.getElementById('issueEl').style.display = 'none';
        document.getElementById('refEl').style.display = 'block';
    }
}
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:35:43.620

我建议使用 jQuery，它并不难学，事实上我发现它比基本的 javascript 容易得多，而且我会走两个隐藏的文本框的路线，然后通过 jQuery 显示它们

就目前而言，我认为如果用户选中一个单选按钮，然后会出现另外两个文本框

并添加了 jQuery（就像在页面顶部包含 sript 一样简单，您的代码将更像这样......

```
<form name="job_app"> 
    Source?<br/> 
        <input id="GAZ" type="radio" name="source" value="GAZ" id="GAZ" /> Stonoway Gazette <br/> 
        <input id="JCP" type="radio" name="source" value="JCP" id="JCP" /> Job Center <br/> 
        <input id="WOM" type="radio" name="source" value="WOM" id="WOM" /> Word of Mouth <br/><br/> 
        Issue <br/><input id="issue" type="text" name="issue" /><br/><br/>
        Issue <br/><input id="ref" type="text" name="ref" /><br/><br/>

    <script language="text/JavaScript">

        $("#issue").css("display","none"); 
        $("#ref").css("display","none"); 

        if ($("#GAZ").checked){ 
            $("#issue").css("display","inline"); 
            $("#ref").css("display","none"); 

        } 
         if ($("#JCP").checked){ 
            $("#issue").css("display","none"); 
            $("#ref").css("display","inline"); 

        } 
        //word of mouth has no additional input so there is no if statement for it 
    </script> 
</form> 
```

# button - 带有 Directevents 到 ExtJS 的 Ext.net 按钮

> ID：10760926
> 
> 赞同：0
> 
> 时间：2012-05-25T20:23:59.437
> 
> 标签：button, extjs

我在 Ext.Net 中有这个按钮：

```
<ext:Button ID="BtnEliminar" runat="server" Text="<%$ Resources:BaseLocalizedText, General_BotonEliminar%>"
    Icon="Delete" ToolTip="<%$ Resources:BaseLocalizedText, General_TooltipBotonEliminar%>" Disabled="true">
    <Listeners>
        <BeforeRender Handler="aceleradorTeclado(this, 'click', LocalizedScript.General_AceleradorTeclado_Eliminar, LocalizedScript.General_AceleradorTeclado_Eliminar_Tooltip);" />
        <Render Handler="asignarPermiso(this, 'Eliminar', true);" />
        <Click Handler="GridHandler.eliminar();" />
    </Listeners>
    <DirectEvents>
        <Click Url="~/Terminales/Eliminar/" CleanRequest="true" Complete="GridHandler.refresh()">
            <Confirmation ConfirmRequest="true" Title="<%$ Resources:BaseLocalizedText, General_TituloMensaje%>"
                Message="<%$ Resources:BaseLocalizedText, General_ConfirmacionBorrado%>" />
            <ExtraParams>
                <ext:Parameter Name="Serial" Value="GridHandler.valorColumna('Serial')" Mode="Raw"/>                            
            </ExtraParams>
        </Click>
    </DirectEvents>
</ext:Button> 
```

我找到了如何在 ExtJS 中创建它，但没有找到如何添加 de DirectEvents：

```
if (validarPermiso('Eliminar')) {
    topbar.addButton({
        id: 'btnEliminar',
        xtype: 'button',
        text: LocalizedScript.General_BotonEliminar,
        iconCls: 'icon-delete',
        tooltip: LocalizedScript.General_TooltipBotonEliminar,
        handler: function () {
            GridHandler.eliminar();
        }
    });

    // Combinaciones de teclado
    aceleradorTeclado(btnEliminar, 'handler', LocalizedScript.General_AceleradorTeclado_Eliminar, LocalizedScript.General_AceleradorTeclado_Eliminar_Tooltip);
} 
```

如何将直接事件添加到按钮？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T05:56:43.727

解决这个问题的最简单方法可能是配置您的`Button`in 标记（或代码隐藏），然后查看页面。用于呈现 ExtJS 的 JavaScript 配置脚本`Button`可通过查看页面的 html 源代码（查看 > 源代码）获得。

然后，您可以使用该 extjs 配置脚本并根据需要进行修改。

另一种选择，我会推荐这个而不是使用 a`DirectEvent`是调用 a `[DirectMethod]`。您可以`[DirectMethod]`直接从任何客户端事件处理程序调用，并且设置起来更容易。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T22:15:40.480

我找到了一种解决方法，使用 [DirectMethod]。也许可以帮助别人。

```
// Boton Eliminar
if (validarPermiso('Eliminar')) {
     topbar.addButton({
     id: 'btnEliminar',
     xtype: 'button',
     text: LocalizedScript.General_BotonEliminar,
     iconCls: 'icon-delete',
     tooltip: LocalizedScript.General_TooltipBotonEliminar,
     handler: function () {
          Ext.Msg.confirm(LocalizedScript.General_TituloMensaje, LocalizedScript.General_ConfirmacionBorrado, function (btn) {
               if (btn == "yes") {

                    // Si existen un registro seleccionado para eliminar
                    if (GridHandler.eliminar()) {
                         // Realiza el llamado al Controller para eliminar
                         Ext.net.DirectMethod.request({
                              url: GetNewPath(GridHandler.getPathEliminar()),
                              cleanRequest: true,
                              params: GridHandler.getPrimaryKey(GridHandler.getRecord()),
                              success: function (result) {
                                   //Ext.Msg.alert('Mensaje', result);
                              },                            
                              eventMask: {
                                   showMask: true,
                                   msg: LocalizedScript.General_Mask_Eliminar
                         }
                    });
               }
          }
          else {
               return false;
          }
     });
 },
}); 
```

# python - Python property does not set

> ID：10760937
> 
> 赞同：6
> 
> 时间：2012-05-25T20:25:06.407
> 
> 标签：python, properties

Here is the code:

```
def Property(func):
     return property(**func())

class A:
     def __init__(self, name):
          self._name = name

     @Property
     def name():
          doc = 'A''s name'

          def fget(self):
               return self._name

          def fset(self, val):
               self._name = val

          fdel = None

          print locals()
          return locals()

a = A('John')
print a.name
print a._name
a.name = 'Bob'
print a.name
print a._name 
```

Above produces the following output:

```
{'doc': 'As name', 'fset': <function fset at 0x10b68e578>, 'fdel': None, 'fget': <function fget at 0x10b68ec08>}
John
John
Bob
John 
```

The code is taken [from here](http://adam.gomaa.us/blog/2008/aug/11/the-python-property-builtin/).

Question: what's wrong? It should be something simple but I can't find it.

**Note:** I need property for complex getting/setting, not simply hiding the attribute.

Thanks in advance.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T20:39:16.220

状态的[文档`property()`](http://docs.python.org/library/functions.html#property)：

> 返回新样式类（从对象派生的类）的属性属性。

您的类不是新式类（您没有从对象继承）。将类声明更改为：

```
class A(object):
    ... 
```

它应该按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T21:43:31.480

（上面发布）使用这种格式： [http ://docs.python.org/library/functions.html#property](http://docs.python.org/library/functions.html#property)

```
class C(object):
    def __init__(self):
        self._name = "nameless"

    @property
    def name(self):
        """I'm the 'name' property."""
        return self._name

    @name.setter
    def name(self, value):
        self._name = value

    @name.deleter
    def name(self):
        del self._name 
```

# android - Android-重新调整图像大小以匹配屏幕的高度

> ID：10760940
> 
> 赞同：1
> 
> 时间：2012-05-25T20:25:23.220
> 
> 标签：android, image, resize, background-image, android-relativelayout

在我的应用程序中，对于相对布局的背景，我有一个非常大的网状壁纸（比任何手机/桌面屏幕都大）。所以，我想知道不是让 android 调整它的大小并让它看起来很糟糕，我可以自己调整它的大小。我想要做的是调整图像的大小（垂直和水平，以保持它看起来不错），直到图像和屏幕的高度匹配。

谢谢，感谢所有帮助-Lijap

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:29:40.753

解决这个问题的方法是谷歌付出了很大的努力。

本质上，您应该为每个目标尺寸/布局创建不同的尺寸。

[这在支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)的 Google 开发指南文档中有广泛的解释（比我能给出的要好得多）

从该页面：

> **屏幕尺寸**
> 
> 实际物理尺寸，以屏幕的对角线测量。为简单起见，Android 将所有实际屏幕尺寸分为四种通用尺寸：小、普通、大和特大。
> 
> **屏幕密度**
> 
> 屏幕物理区域内的像素数量；通常称为 dpi（每英寸点数）。
> 
> 例如，与“正常”或“高”密度屏幕相比，“低”密度屏幕在给定物理区域内的像素较少。为简单起见，Android 将所有实际屏幕密度分为四种广义密度：低、中、高和超高。
> 
> **方向**
> 
> 从用户的角度来看屏幕的方向。这是横向或纵向，这意味着屏幕的纵横比分别是宽的或高的。请注意，不仅不同的设备在默认情况下以不同的方向运行，而且当用户旋转设备时，方向可能会在运行时发生变化。
> 
> **解析度**
> 
> 屏幕上的物理像素总数。添加对多屏幕的支持时，应用程序不能直接使用分辨率；应用程序应该只关心屏幕尺寸和密度，由通用尺寸和密度组指定。
> 
> **与密度无关的像素 (dp)**
> 
> 定义 UI 布局时应使用的虚拟像素单位，以与密度无关的方式表示布局尺寸或位置。与密度无关的像素相当于 160 dpi 屏幕上的一个物理像素，这是系统为“中等”密度屏幕假定的基线密度。在运行时，系统会根据使用中屏幕的实际密度，根据需要透明地处理 dp 单位的任何缩放。dp 单位到屏幕像素的转换很简单：px = dp * (dpi / 160)。例如，在 240 dpi 的屏幕上，1 dp 等于 1.5 个物理像素。在定义应用程序的 UI 时，您应该始终使用 dp 单位，以确保您的 UI 在不同密度的屏幕上正确显示。

这样，您的用户将看到与其设备尺寸相匹配的位图。

如果您需要帮助理解该文档，或者这不能正确回答您的问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:53:23.203

如果图像太大（特别是如果它比任何分辨率都大），您可能会收到 OOM（内存不足）错误。

在这种情况下，你必须提高内存效率，谷歌已经发布了一些关于这个问题的教程。

见：http: [//developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T20:47:45.987

Pheonixblade9 的回答是正确的，但是如果您决定自己重新调整大小，那么您可以实现[ImageView 类的 onSizeChanged() 方法](http://developer.android.com/reference/android/view/View.html#onSizeChanged%28int,%20int,%20int,%20int%29)。但是请注意，`onSizeChanged()`方法来自超类视图。

# qt - 气缸未显示在屏幕上

> ID：10760941
> 
> 赞同：1
> 
> 时间：2012-05-25T20:25:24.593
> 
> 标签：qt, opengl, drawing, paint, glu

好吧，我想做的是使用 GLUquadricObj 和 gluCylinder 绘制一个圆柱体，无论圆柱体没有显示在 OpenGL 小部件上，代码都能很好地编译。

```
void GLWindow::paintGL()
{
    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(1,0,0);
    glBegin(GL_POLYGON);
    GLUquadricObj *obj = gluNewQuadric();

    gluCylinder(obj, 1.0, 1, 3, 30, 30);

    glEnd();
} 
```

是什么阻止了气缸显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T23:26:49.593

[你可以在`glBegin()`block](http://www.opengl.org/sdk/docs/man/xhtml/glBegin.xml)内做的事情是有限的。该列表*不*包括[另一个`glBegin()`](http://cgit.freedesktop.org/mesa/mesa/tree/src/glu/sgi/libutil/quad.c#n264).

此外，尝试使用非默认视锥。我会推荐[`gluPerspective()`](http://www.opengl.org/sdk/docs/man/xhtml/gluPerspective.xml)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T04:46:33.273

我已经修复它，是 resizeGL() 的问题。做 glMatrixMode(GL_MODELVIEW); + glMatrixMode(GL_PROJECTION); 造成了这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T20:33:06.790

您确定在 initializeGL() 函数中正确初始化了 opengl 和场景吗？

# ios - UIPageViewController 最后一页弹跳效果？

> ID：10760942
> 
> 赞同：6
> 
> 时间：2012-05-25T20:25:27.730
> 
> 标签：ios, uipageviewcontroller

我正在使用a`UIPageViewController`来翻阅多页内容，目前当用户翻到最后一页时我什么都不做，`UIPageViewController`因为没有更多页面可以切换，我如何实现滚动到的反弹效果的结尾`UIScrollView`，以便它给用户一些反馈它是序列的结尾吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:30:53.493

尝试这个！

1.  在“第一”页之前添加一个空页（并可选择将其设置为隐藏）
2.  完成 UIPageViewController 设置后，手动转到第二页，即“第一”页。
3.  在 pageViewController:viewControllerBeforeViewController: 委托方法中，检查视图是否为空页面。如果是这样，
    1.  再次手动转到第二页，可能需要一些延迟。或者
    2.  以某种方式，禁用 UIPageViewController 中的 UIPanGestureRecognizer

这可能不是完美的解决方案，但希望可以接受。我稍后也会做类似的事情，所以我可能会解释更多，然后自己尝试一下。祝你好运！

***//编辑***

啊..如果你想最后有反弹效果（我建议你两者都做）..

1.  跳过这个。
2.  在所有其他页面之后添加一个额外的（或两个，如果您有奇数页和双面视图）空页面（并可选择将其/它们设置为隐藏）
3.  在 pageViewController:viewControllerAfterViewController: 委托方法中，检查视图是否是（最后一个）空页面。如果是这样，
    1.  手动转到上一页，可能会延迟一些。或者
    2.  以某种方式，禁用 UIPageViewController 中的 UIPanGestureRecognizer

在（3）中，如果您没有禁用 UITapGestureRecognizer，您将必须确定是否是点击手势，然后选择（3.1），否则走（3.2）路线！

# python - 需要帮助了解模块导入错误

> ID：10760945
> 
> 赞同：3
> 
> 时间：2012-05-25T20:25:39.770
> 
> 标签：python, web2py, python-module

我正在尝试使用 sendgrid Python API 作为 web2py 中的一个模块。从命令行成功测试后，我将它放到了我的模块文件夹中，但是当我尝试将 sendgrid 导入我的控制器文件时，我得到：

```
File "applications/test/modules/sendgrid/__init__.py", line 4, in
<module>
    del sendgrid, message NameError: name 'sendgrid' is not defined 
```

查看`__init__.py`文件，我注意到他们在模块级别上执行 * 导入，我以前见过这[会导致问题](https://stackoverflow.com/q/3571514/165673)，但我不确定问题是什么。

`sendgrid/__init__.py`：

```
from sendgrid import *
from message import *

del sendgrid, message

__version__ = "0.1.0"
version_info = (0, 1, 0) 
```

**sendgrid api：** [https ://github.com/sendgrid/sendgrid-python](https://github.com/sendgrid/sendgrid-python)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T20:44:37.137

一般来说，第 3 方模块的最佳实践是通过`pip`或`easy_install`（最好在[virtualenv](http://www.virtualenv.org/en/latest/index.html)中）安装它们，如果它们在[PyPI](http://pypi.python.org/pypi/sendgrid-python)上可用，而不是将它们复制到您的`PYTHONPATH`.

尝试从模块文件夹中删除 sendgrid 包并执行`pip install sendgrid-python`或`easy_install sendgrid-python`如果`pip`不可用。

# python - Python线程死锁

> ID：10760948
> 
> 赞同：2
> 
> 时间：2012-05-25T20:25:49.227
> 
> 标签：python, multithreading, deadlock

我有两个线程（生产者和消费者），我与`Queue`. 问题是，当我强行中止生产者时，消费者有时会锁定。

我在文档中读到取消带有队列的线程可能会损坏队列并导致死锁。我没有明确地获得任何锁，但阅读 Queue.py 的源代码`put`并`get`正在这样做。

请问，有没有人知道当我中止线程时，它可能在`get`/的中间`put`，即使用锁然后不释放它？我能做些什么呢？我有时需要提前终止生产者。使用进程而不是线程会有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T21:59:20.990

很可能您的死锁是由于未完成的线程造成的。如果你有 linux，你可以使用[pyrasite](http://pypi.python.org/pypi/pyrasite)的注入器来打印回溯（你会知道你的程序挂在哪里）

如果您在信号处理程序中使用任何锁 - 那么这可能是您的死锁（这有点复杂，请询问您是否需要解释）

创建进程而不是线程肯定会改变情况，但请记住，任何数据交换和同步都非常复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T22:40:52.140

也许这会有所帮助：

```
import threading

class MyQueue:
    def __init__(self):
        self.tasks = []
        self.tlock = threading.Semaphore(0)
        self.dlock = threading.Lock()
        self.aborted = False

    def put(self, arg):
        try:
            self.dlock.acquire()
            self.tasks.append(arg)
        finally:
            self.dlock.release()
            self.tlock.release()

    def get(self):
        if self.aborted:
            return None
        self.tlock.acquire()
        if self.aborted:
            self.tlock.release()
            return None
        try:
            self.dlock.acquire()
            if self.tasks:
                return self.tasks.pop()
            else: # executed abort
                return None
        finally:
            self.dlock.release()

    def abort(self):
        self.aborted = True
        self.tlock.release()

# TESTING

mq = MyQueue()
import sys

def tlog(line):
    sys.stdout.write("[ %s ] %s\n" % (threading.currentThread().name, line))
    sys.stdout.flush()

def reader():
    arg = 1
    while arg is not None:
        tlog("start reading")
        arg = mq.get()
        tlog("read: %s" % arg)
    tlog("END")

import time, random
def writer():
    try:
        pos = 1
        while not mq.aborted:
            x = random.random() * 5
            tlog("writer sleep (%s)" % x)
            pending = x
            while pending > 0:
                tosleep = min(0.5, pending)
                if mq.aborted:
                    return
                time.sleep(tosleep)
                pending -= tosleep

            tlog("write: %s" % x)
            mq.put("POS %s  val=%s" % (pos, x))
            pos += 1
    finally:
        tlog("writer END")

def testStart():
    try:
        for i in xrange(9):
            th = threading.Thread(None, reader, "reader %s" % i, (), {}, None)
            th.start()
        for i in xrange(3):
            th = threading.Thread(None, writer, "writer %s" % i, (), {}, None)
            th.start()
        time.sleep(30) # seconds for testing
    finally:
        print "main thread: abort()"
        mq.abort()

if __name__ == "__main__":
    testStart() 
```

# spotify - Spotify 流 (libspotify) 的采样率是多少？

> ID：10760949
> 
> 赞同：3
> 
> 时间：2012-05-25T20:25:57.340
> 
> 标签：spotify

Spotify 流的采样率是多少？

libspotify 示例播放轨道中的回调函数“music_delivery”直接从 libspotify 获取音频格式。音频是否已经解码为原始波形数据？默认采样率是 44.1kHz/16bit 吗？libspotify 是否将原始音频采样率转换为 44.1KHz/16bit？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T10:19:02.070

您在回调中获得的音频`music_delivery`确实是原始 PCM 数据。`sp_audioformat`该回调中给出的结构中描述了采样率和位深度。

音频格式可能会根据正在播放的曲目而改变，因此请确保您的音频管道可以处理这种情况。

# python - Eventlet/通用异步 I/O 任务粒度

> ID：10760959
> 
> 赞同：10
> 
> 时间：2012-05-25T20:26:38.023
> 
> 标签：python, eventlet, granularity

我正在开发一个 Web 后端/API 提供程序，它从 3rd 方 Web API 获取实时数据，将其放入 MySQL 数据库并通过 HTTP/JSON API 使其可用。

我正在为 API 提供烧瓶并使用 SQLAlchemy Core 处理数据库。

对于实时数据抓取部分，我有通过发送请求、将返回的 xml 解析为 Python dict 并返回它来包装 3rd 方 API 的函数。我们将调用这些 API 包装器。

然后我在其他方法中调用这些函数，这些方法获取相应的数据，根据需要进行任何处理（如时区转换等）并将其放入数据库中。我们将调用这些处理器。

我一直在阅读有关异步 I/O 和 eventlet 的具体内容，印象非常深刻。

我将把它合并到我的数据抓取代码中，但我首先有一些问题：

1.  猴子修补所有东西对我来说安全吗？考虑到我有烧瓶、SQLAlchemy 和一堆其他库，猴子修补有什么缺点（假设没有后期绑定）？

2.  我应该将任务划分为什么粒度？我正在考虑创建一个定期生成处理器的池。然后，一旦处理器到达它调用 API 包装器的部分，API 包装器将启动一个 GreenPile 以使用 eventlet.green.urllib2 获取实际的 HTTP 数据。这是一个好方法吗？

3.  超时 - 我想确保没有绿线挂起。将每个 greenthread 的 eventlet.Timeout 设置为 10-15 秒是一个好方法吗？

仅供参考，我有大约 10 组不同的实时数据，并且每 5-10 秒产生一个处理器。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:46:14.993

我认为将 Flask/SQLAlchemy 与异步风格（或事件驱动）编程模型混合使用并不明智。

但是，既然您声明您使用 RDBMS (MySQL) 作为中间存储，为什么不创建异步工作器，将第三方 Web 服务的结果存储在 RDMBS 中，并保持前端 (Flask/SQLAlchemy) 同步?

在这种情况下，您不需要猴子补丁 Flask 或 SQLAlchemy。

关于粒度，您可能希望使用[mapreduce](http://en.wikipedia.org/wiki/MapReduce)范例来执行 Web API 调用和处理。这种模式可以让您了解如何在逻辑上分离连续的步骤，以及如何控制所涉及的过程。

就个人而言，我不会使用异步框架来执行此操作。使用多处理、[Celery](http://celeryproject.org/)或真正的 mapreduce 类型的系统（如[Hadoop](http://hadoop.apache.org/) ）可能会更好。

只是一个提示：从小处着手，保持简单和模块化，如果您需要更好的性能，稍后再进行优化。这也可能在很大程度上受到您希望信息的实时性的影响。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T10:05:26.677

修补由纯 python 编写并使用标准库的模块是安全的。

*   很少有纯 mysql 适配器：
    *   [https://launchpad.net/myconnpy](https://launchpad.net/myconnpy) ,
    *   [https://github.com/petehunt/PyMySQL](https://github.com/petehunt/PyMySQL)
*   PyMysql 有一个 sqlalchemy 测试套件，您可以为您的案例运行测试。
*   有一个名为 pymysql_sa 的模块为 sqlalchemy 提供方言
*   Flask 由纯 python 编写，100% 符合 WSGI 1.0。使用*eventlet.wsgi*来提供服务。

尽可能使用绿色模块通过单次获取来划分任务。将jobs放入一个队列，同样由eventlet提供，每个taskworker从队列中取出一个job，取出完成后将结果存入db，或者发送到event.Event对象触发等待的job任务完成。或者，这两个进程。

更新：

eventlet官方文档强烈推荐使用主模块第一行的patch，多次调用monkey_patch是安全的。阅读更多页面[http://eventlet.net/doc/patching.html](http://eventlet.net/doc/patching.html)

有一些绿色模块可以与 eventlet 一起工作，它们都在 eventlet.green 中。[bitbucket](https://bitbucket.org/which_linden/eventlet/src/e2a73a7f7e45/eventlet/green)上的列表。确保在您的代码中使用绿色模块，或者在导入使用标准库的第三个模块之前对其进行修补。

但是monkey_patch 只接受少数模块，需要手动导入绿色模块。

```
def monkey_patch(**on):
    """全局修补某些系统模块，使其对绿色线程友好。

    关键字参数提供了对修补哪些模块的一些控制。
    如果没有提供关键字参数，则修补所有可能的模块。
    如果关键字设置为 True，则仅修补指定的模块。例如，
    ``monkey_patch(socket=True, select=True)`` 只修补选择和
    插座模块。大多数参数修补同名的单个模块
    （操作系统，时间，选择）。例外是套接字，它也修补了 ssl
    模块（如果存在）；和线程，它修补线程、线程和队列。

    多次调用 monkey_patch 是安全的。
    """    
    Accepted_args = set(('os', 'select', 'socket',
                         '线程'，'时间'，'psycopg'，'MySQLdb'））
    default_on = on.pop("全部",无)
```

# java - GUI Java Netbeans 多个类

> ID：10760967
> 
> 赞同：3
> 
> 时间：2012-05-25T20:27:34.767
> 
> 标签：java, swing, sockets, user-interface, netbeans

这是非常基本的，但我什至不知道如何搜索任何我需要的东西。我创建了一个系统，它有几个类和两个通过套接字相互通信的项目。

现在我的目标是使用 Netbeans 的设计器为系统创建一个 GUI，但是在将 GUI 与其他类进行通信时，我有点陷入困境。

1.  GUI应该是我的主要课程吗？
2.  如果没有，我如何向我的 GUI 类发送消息。
3.  当我尝试`JTextField.setText("PleaseHelp");`在 GUI 的 run 方法中执行以下操作时，我收到一条错误消息：无法从静态上下文引用非静态变量 JTextField。

我知道我不是在要求特定的东西，但我不知道如何搜索我需要的东西。我得到的只是关于如何制作简单的计算器 GUI 的教程，因为只有一个类，`JFrame`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T20:43:54.813

1.  如果 GUI 是一个单独的类会更好，因为模块化的应用程序更易于维护。
2.  与所有面向对象的代码一样，您需要对 GUI 类的实例的引用。
3.  `JTextField`是一个类，`setText`不是静态的。您需要引用`JTextField`要更改的内容。

基本上，它应该看起来像这样：

```
GUI gui = new GUI(/*Parameters*/);
gui.getTextField().setText("PleaseHelp"); 
```

`getTextField`GUI 类的方法在哪里（将此添加到 Netbeans GUI 设计器创建的类中）：

```
public JTextField getTextField(){
  return /*TODO:  Enter text field name here*/;
} 
```

# python - 为omniidl将python从2.7更改为2.6

> ID：10760968
> 
> 赞同：0
> 
> 时间：2012-05-25T20:27:42.020
> 
> 标签：python, python-2.7, omniorb

我已经下载了用msvc10预编译的omniORB4.1.6。我有 python 2.7，一切似乎都很好。我想知道如何告诉我的omniidl 使用我的python 2.6 安装而不是2.7。谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:34:20.190

你不能也不应该。它是专门为 2.7 编译的。这就是下载文件名中出现“2.7”的原因。

如果您想使用不同的 python，请下载源包并自己构建。

# hibernate - scala hibernate/jpa - 忽略自动生成的位图 $init$0 映射

> ID：10760970
> 
> 赞同：6
> 
> 时间：2012-05-25T20:27:53.687
> 
> 标签：hibernate, scala, jpa

尝试在 scala 中使用 hibernate/jpa。遇到有趣的问题。

这是我的实体定义。

```
@Entity
class Product(n: String, d: Double) extends EntityBase {

  def this() = this("", 0)
  def this(n: String) = this(n, 0)

  var name: String = n
  var price: Double = d

  @ManyToOne
  @JoinColumn(name="orderId")
  var order: Order = _

  override def toString = "Product: " + id + " " + name
} 
```

当我运行休眠查询时，出现以下异常：

```
[SQLGrammarException: ERROR: column this_.bitmap$init$0 does not exist Position: 29] 
```

显然 jpa 默认为 scala 自动生成的字段 bitmap$init$0 创建映射。我不知道是什么导致 scala 生成它。但不管有没有办法告诉 jpa 忽略它？或者以某种方式将其从休眠映射中删除？或者也许是别的东西..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T02:48:33.107

我不知道自动生成的字段来自哪里，但是您可以尝试简化您的课程以减少字段：

```
@Entity
class Product(var name: String = "", var price: Double = 0) extends EntityBase {

  @ManyToOne
  @JoinColumn(name="orderId")
  var order: Order = _

  override def toString = "Product: " + id + " " + name
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T00:34:46.027

发现了一些关于这个问题的有趣的事情。

我的应用程序中有这个`Model`类：

```
@Entity
@Table(name="users")
class User extends Model{
  @Id
  @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="users_id_seq")
  @Column(name="id", updatable=false, nullable=false)
  val id:Long = 0L

  @BeanProperty var name:String = _
  @BeanProperty var email:String = _ 
```

}

此类被编译为名为 的 java 类`User`，其定义如下：

```
@Entity
@Table(name="users")
@ScalaSignature(bytes=long array of bytes)
public class User extends Model
   implements ScalaObject, EntityBean
{

   @Id
   @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="users_id_seq")
   @Column(name="id", updatable=false, nullable=false)
   private final long id;
   private String name;
   private String email;
   private volatile int bitmap$init$0;
   private static String _EBEAN_MARKER = "models.User";

   ...

   public long id()
  {
    if ((_ebean_get_bitmap$init$0() & 0x1) != 0)
    {
        _ebean_get_id(); return _ebean_get_id(); 
   } 
   throw new 
         UninitializedFieldError("Uninitialized field: User.scala: 17".toString());
    }

   public String name()
   {
   if ((_ebean_get_bitmap$init$0() & 0x2) != 0)
   {
     _ebean_get_name(); return _ebean_get_name();
   } throw new 
           UninitializedFieldError("Uninitialized field: User.scala: 19".toString()); 
   } 

   public void name_$eq(String paramString) { 
     _ebean_set_name(paramString); 
      _ebean_set_bitmap$init$0(_ebean_get_bitmap$init$0() | 0x2);
   }

  .... 
```

`bitmap$init$0`实际上来自类增强，我认为负责的是我目前正在使用的库`Ebean`。但是在阅读了您的帖子后，我去调查 JPA 本身是否正在对该对象进行某种字节码增强。为了检查这一点，我创建了一个复制项目，但使用的是 Java。生成的`User`类代码恰好没有`bitmap$init$0`字段，如下：

```
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="users")
public class User
{

  @Id
  @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="users_id_seq")
  @Column(name="id", updatable=false, nullable=false)
  private Long id;
  private String name;
  private String email;

 public void setId(Long id)
 {
    this.id = id;
 }

 public Long getId() {
   return this.id;
 }

public String getName() {
   return this.name;
 }
 public void setName(String name) {
   this.name = name;
 }
 public String getEmail() {
    return this.email;
 }
 public void setEmail(String email) {
    this.email = email;
  }
} 
```

所有这些麻烦都让我写了这篇[文章](https://groups.google.com/forum/#!msg/bescala/kxMC1kQRD_U/eWbP7QG4yIoJ)，我当然同意。似乎将 JPA 集成到 Scala Ebean/Hibernate 是一种真正的痛苦。我仍然不明白这个`bitmap$ini$0`字段是否由 Ebean 或其他东西注入到类字节码中。

似乎您可以尝试通过将注释 ( `@Transitent`) 与生成的 Java 字节码相关联来绕过这种行为，方法是先为 java 编译代码，然后再为 Scala 编译代码，类似于[此处描述的](https://stackoverflow.com/questions/11493543/compiling-java-annotations-with-sbt)内容。但我真的不认为这是真的值得！

# python - 使用python在csv中搜索十六进制数据

> ID：10760971
> 
> 赞同：4
> 
> 时间：2012-05-25T20:27:53.720
> 
> 标签：python, csv

我有一个 csv 文件，它有 3 列。我正在尝试在第二列中搜索特定值（十六进制值）并读取该行中的下一个条目（第 3 列）。格式类似于以下：

```
Text1,  0x04d0a053, value1
Text2,  0x04d01053, value2
Text3,  0x04d03053, value3
Text4,  0x04d05053, value4
Text5,  0x04d00053, value5
Text6,  0x04d02053, value6
Text7,  0x04d04053, value7
Text8,  0x04413053, value8 
```

搜索和读取最后一个值（0x04413053）并打印“value8”没有问题。但是，当我尝试搜索前 7 个条目中的任何一个时，不会回读任何内容（输出中的 []）。我的代码在下面，有人知道错误可能是什么吗？

```
fileInput = 'mycsv.csv'
column0 = 0
column1 = 1
column2 = 2

#reads correctly
hexvalue = hex(0x04413053)
with open(fileInput, 'r') as file:
  reader = csv.reader(file)
  entry = [line[column2] for line in reader if line[column1] == hexvalue]
  print entry

#does not read correctly
hexvalue = hex(0x04d0a053)
with open(fileInput, 'r') as file:
  reader = csv.reader(file)
  entry = [line[column2] for line in reader if line[column1] == hexvalue]
  print entry 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T20:31:23.017

十六进制（0x **0** 4413053）是“0x4413053”

你可能应该做相反的事情，即

```
int(line[clolumn1], 16) == 0x04413053 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T20:36:09.477

在这两种情况下，您都不应该通读 for 语句中的所有值。做就是了：

```
for line in reader:
    if line[column1] == hexvalue:
        entry = line[column2]
        break # efficient!
print entry 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T20:58:47.457

除了[MK 的最佳答案](https://stackoverflow.com/a/10761002/418413)中指出的类型问题外，我注意到您提出的 csv 示例有一些空白问题会破坏您的代码。这是我的解决方案：

```
fileInput = 'mycsv.csv'

# Sniff csv format to easily avoid whitespace issue.
with open(fileInput, 'r') as afile: # 'file' is a python keyword. Best to avoid overriding it.
    snift = csv.Sniffer().sniff(afile.readline())

# get the answers in a single pass at the file.
# If that doesn't work for you, fine, but try to avoid opening the file twice.
hexvalues = set([0x04413053, 0x04d0a053])
with open(fileInput, 'r') as afile:
  reader = csv.reader(afile, dialect=snift)
  entries = [line[2] for line in reader if int(line[1], 16) in hexvalues]

print '\n'.join(entries) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T21:00:07.677

问题在于 if 条件。您不是在比较相同的值。

```
 hex_string = "0x04413053"
  with open(fileInput, 'r') as file:
    reader = csv.reader(file)
    entry = [line[column2] for line in reader if int(line[column1], 16) == int(hex_string, 16)]
    print entry 
```

上面的代码显示您应该比较相同的类型。这可以重写为：（
仅供参考：`int(line[column1], 16)`将字符串转换为十六进制）

```
 hexvalue = 0x04413053
  with open(fileInput, 'r') as file:
    reader = csv.reader(file)
    entry = [line[column2] for line in reader if int(line[column1], 16) == hexvalue]
    print entry 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T21:26:13.970

在玩弄了所有示例之后，我得到了以下工作代码：

Anthon 是正确的，因为我只需要对列表中的值进行一次排序，就我而言，不会有重复的模式。我确实必须修改 Anthon 以添加来自 MK 的输入以找到我正在搜索的十六进制值。

谢谢您的帮助。

```
hexvalue = 0x04d03053
with open(fileInput, 'r') as file:
    reader = csv.reader(file)    
    for line in reader:
        if int(line[column1], 16) == hexvalue:
            entry = line[column2]
            break # efficient!
    print entry 
```

# javascript - 具有多个按钮的 Elfinder 文件管理器更新文本输入

> ID：10760977
> 
> 赞同：0
> 
> 时间：2012-05-25T20:28:24.917
> 
> 标签：javascript, jquery, ajax, onclick

每个按钮都在更新元素：

```
<input type="text" id="field" name="image" value="<?php echo @$DuzenleSonuc[0]['image']; ?>" /> 
```

我想完全像这样更新元素：

```
 onclick open -> update field
  onclick open1 -> update field1
  onclick open2 -> update field2
  onclick open3 -> update field3
  onclick open4 -> update field4 
```

现在的情况就像下面一样。我哪里错了？

```
 onclick open -> updates field
  onclick open1 -> updates field
  onclick open2 -> updates field
  onclick open3 -> updates field
  onclick open4 -> updates field 
```

我的代码如下：

```
<script type="text/javascript" charset="utf-8">
    $().ready(function() {
        var opt = {// Must change variable name
            url : 'elfinder/connectors/php/connector.php',
            lang : 'tr',
            editorCallback : function(url) {document.getElementById('field').value=url;},// Must change the form field id
            closeOnEditorCallback : true,
            docked : false,
            dialog : { title : 'Dosya Yöneticisi', height: 500 },
        }

        $('#open').click(function() {// Must change the button's id
            $('#finder_browse').elfinder(opt)// Must update the form field id
            $('#finder_browse').elfinder($(this).attr('id')); // Must update the form field id
        })

        $('#open1').click(function() {// Must change the button's id
            $('#finder_browse1').elfinder(opt)// Must update the form field id
            $('#finder_browse1').elfinder($(this).attr('id')); // Must update the form field id
        })
        $('#open2').click(function() {// Must change the button's id
            $('#finder_browse2').elfinder(opt)// Must update the form field id
            $('#finder_browse2').elfinder($(this).attr('id')); // Must update the form field id
        })
        $('#open3').click(function() {// Must change the button's id
            $('#finder_browse3').elfinder(opt)// Must update the form field id
            $('#finder_browse3').elfinder($(this).attr('id')); // Must update the form field id
        })
        $('#open4').click(function() {// Must change the button's id
            $('#finder_browse4').elfinder(opt)// Must update the form field id
            $('#finder_browse4').elfinder($(this).attr('id')); // Must update the form field id
        })
    });
    $(document).ready(function(){
        $('.taslak').click(function(){
            $('#k').val("Taslak");
        });
    })
</script>
<!-- elFinder -->
<div class="textbox left">
    <h2>Ürün Resimleri</h2>

    <div class="textbox_content">
        <p class="fileupload">
            <label>Ürün Ana Resmi:</label>
        <div id="finder_browse"></div>
        <input type="text" id="field" name="image" value="<?php echo @$DuzenleSonuc[0]['image']; ?>" />
        <input type="button" id="open" class="file" value="Resim Seç" />
        </p>
        <hr />
        <p class="fileupload">
            <label>Ürün Resmi:</label>
        <div id="finder_browse1"></div>
        <input type="text" id="field1" name="image1" value="<?php echo @$DuzenleSonuc[0]['image1']; ?>" />
        <input type="button" id="open1" class="file" value="Resim Seç" />
        </p>
        <p class="fileupload">
            <label>Ürün Resmi:</label>
        <div id="finder_browse2"></div>
        <input type="text" id="field2" name="image2" value="<?php echo @$DuzenleSonuc[0]['image2']; ?>" />
        <input type="button" id="open2" class="file" value="Resim Seç" />
        </p>
        <p class="fileupload">
            <label>Ürün Resmi:</label>
        <div id="finder_browse3"></div>
        <input type="text" id="field3" name="image3" value="<?php echo @$DuzenleSonuc[0]['image3']; ?>" />
        <input type="button" id="open3" class="file" value="Resim Seç" />
        </p>
        <p class="fileupload">
            <label>Ürün Resmi:</label>
        <div id="finder_browse4"></div>
        <input type="text" id="field4" name="image4" value="<?php echo @$DuzenleSonuc[0]['image4']; ?>" />
        <input type="button" id="open4" class="file" value="Resim Seç" />
        </p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:39:36.567

将相同的类添加到所有按钮并仅添加一个单击事件，例如：

```
$('.btnClass').click(function(){
var btnID = $(this).attr('id'); // Btn id clicked
// Process ckick event
}); 
```

或者如果所有按钮都打开了起始ID，您可以进行点击事件，例如

```
$('input[id^=open]').click(function(){    var btnID = $(this).attr('id'); // Btn id clicked}); 
```

在您获得 btnID 后添加您的评论，您可以找到使用哪个 finder-browse 的东西，例如：

```
var $browser;
switch(btID)
{
case 'open':
$browser = $('#finder_browse');
break;case 'open1':
$browser = $('#finder_browse1');
break; 
```

ETC.. }

# c# - 无法将 Access-Control-Allow-Origin 添加到我的 WCF 库项目

> ID：10760982
> 
> 赞同：7
> 
> 时间：2012-05-25T20:29:07.180
> 
> 标签：c#, jquery, ajax, wcf

我试图理解为什么这个调用的 ajax 不起作用

```
 $.ajax({
        type: 'GET',
        url: "http://localhost:8732/Design_Time_Addresses/InMotionGIT_NT.Address.Service/AddressService/json/capitalize",
        data: { streetAddress : JSON.stringify(streetAddress) , consumer :  JSON.stringify(consumer)} ,
        datatype: "jsonp",
        success: function (data) {
            $('body').append('<div>'+data.IDblah+' '+ data.prueba+'</div>');
            alert(data.IDblah);
        } 
```

接收数据的服务正确接收并且响应正确。为什么我做错了？

我尝试将此属性添加到调用的 ajax 但没有成功`crossDomain : true`

```
[OperationContract()]
[WebInvoke(Method="GET", RequestFormat=WebMessageFormat.Json, ResponseFormat=WebMessageFormat.Json)]
public string Capitalize(StreetAddress streetAddress,ConsumerInformation consumer) 
```

我得到的错误很常见

```
 XMLHttpRequest cannot load Origin http://localhost:50816 is not allowed by Access-Control-Allow-Origin. 
```

**更新**

我试图通过在我的文件中添加配置来将标题添加到响应中，`App.config`但没有成功

```
<system.webServer>
<httpProtocol>
  <customHeaders>
    <add name="Access-Control-Allow-Origin" value="*" />
  </customHeaders>
</httpProtocol>
</system.webServer> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-22T12:29:49.913

把它放在配置文件的服务端

```
<system.webServer>
<httpProtocol>
  <customHeaders>
    <add name="Access-Control-Allow-Origin" value="*" />
  </customHeaders>
</httpProtocol>
</system.webServer> 
```

这个对我有用！谢谢！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T20:33:15.560

此链接将有所帮助：[http ://enable-cors.org/](http://enable-cors.org/)

您需要在发送回客户端的响应中添加以下标头：

//允许所有域

`Access-Control-Allow-Origin: *`

或者

//允许特定域

`Access-Control-Allow-Origin: http://example.com:8080 http://foo.example.com`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-21T22:43:57.810

解决方案是创建一个文件 Global.asax

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "http://localhost");
    if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
    {
        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "POST, PUT, DELETE");

        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept");
        HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "1728000");
        HttpContext.Current.Response.End();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-11T08:27:54.450

直接在 Visual Studio、Chrome 和 Firefox 中使用 WCF 服务时，我遇到了同样的问题。我用以下方法修复了它：

使用以下函数编辑 Global.asax 文件：

```
 private void EnableCrossDomainAjaxCall()
            {
                HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");

                if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
                {
                    HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST");
                    HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Authorization, Accept");
                    HttpContext.Current.Response.End();
                }
            } 
```

然后从

```
 protected void Application_BeginRequest(object sender, EventArgs e)
    {
       EnableCrossDomainAjaxCall();
    } 
```

您可以从以下网址获取更多信息：

[http://blog.blums.eu/2013/09/05/restfull-wcf-service-with-cors-and-jquery-and-basic-access-authentication](http://blog.blums.eu/2013/09/05/restfull-wcf-service-with-cors-and-jquery-and-basic-access-authentication)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-22T14:10:49.870

可以在[此处](https://stackoverflow.com/questions/23493495/how-to-include-wcf-custom-headers-in-console-service-host/25620635)找到另一种处理此问题的方法，该方法更适合自托管服务。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-30T09:32:43.980

对于 WCF 服务，您必须开发新行为并将其包含在端点配置中：

1.  创建消息检查器

    ```
     public class CustomHeaderMessageInspector : IDispatchMessageInspector
        {
            Dictionary<string, string> requiredHeaders;
            public CustomHeaderMessageInspector (Dictionary<string, string> headers)
            {
                requiredHeaders = headers ?? new Dictionary<string, string>();
            }

            public object AfterReceiveRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel, System.ServiceModel.InstanceContext instanceContext)
            {
                return null;
            }

            public void BeforeSendReply(ref System.ServiceModel.Channels.Message reply, object correlationState)
            {
                var httpHeader = reply.Properties["httpResponse"] as HttpResponseMessageProperty;
                foreach (var item in requiredHeaders)
                {
                    httpHeader.Headers.Add(item.Key, item.Value);
                }           
            }
        } 
    ```

2.  创建端点行为并使用消息检查器添加标头

    ```
     public class EnableCrossOriginResourceSharingBehavior : BehaviorExtensionElement, IEndpointBehavior
        {
            public void AddBindingParameters(ServiceEndpoint endpoint, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
            {

            }

            public void ApplyClientBehavior(ServiceEndpoint endpoint, System.ServiceModel.Dispatcher.ClientRuntime clientRuntime)
            {

            }

            public void ApplyDispatchBehavior(ServiceEndpoint endpoint, System.ServiceModel.Dispatcher.EndpointDispatcher endpointDispatcher)
            {
                var requiredHeaders = new Dictionary<string, string>();

                requiredHeaders.Add("Access-Control-Allow-Origin", "*");
                requiredHeaders.Add("Access-Control-Request-Method", "POST,GET,PUT,DELETE,OPTIONS");
                requiredHeaders.Add("Access-Control-Allow-Headers", "X-Requested-With,Content-Type");

                endpointDispatcher.DispatchRuntime.MessageInspectors.Add(new CustomHeaderMessageInspector(requiredHeaders));
            }

            public void Validate(ServiceEndpoint endpoint)
            {

            }

            public override Type BehaviorType
            {
                get { return typeof(EnableCrossOriginResourceSharingBehavior); }
            }

            protected override object CreateBehavior()
            {
                return new EnableCrossOriginResourceSharingBehavior();
            }
        } 
    ```

3.  在 web.config 中注册新行为

    ```
    <extensions>
     <behaviorExtensions>        
                <add name="crossOriginResourceSharingBehavior" type="Services.Behaviours.EnableCrossOriginResourceSharingBehavior, Services, Version=1.0.0.0, Culture=neutral" />        
      </behaviorExtensions>      
    </extensions> 
    ```

4.  向端点行为配置添加新行为

    ```
    <endpointBehaviors>      
     <behavior name="jsonBehavior">
      <webHttp />
       <crossOriginResourceSharingBehavior />
     </behavior>
    </endpointBehaviors> 
    ```

5.  配置端点

    ```
    <endpoint address="api" binding="webHttpBinding" behaviorConfiguration="jsonBehavior" contract="Service.IServiceContract" /> 
    ```

# xml - XSL如何检查网址中的逗号？

> ID：10760983
> 
> 赞同：-1
> 
> 时间：2012-05-25T20:29:11.880
> 
> 标签：xml, string, url, xslt, contains

```
<xsl:choose>
 <xsl:when test="./link/@href ">
  <td class="link"> <a href="{@href}"> 
    <xsl:copy-of select="./link/@href"/>Link</a> </td>
 </xsl:when>
 <xsl:otherwise>
  <td class="nolink"> <a href="{@href}"> 
   <xsl:copy-of select="./link/@href"/>Link</a> </td>
 </xsl:otherwise>
</xsl:choose> 
```

鉴于以下代码，我想添加另一个测试以查看我的 href-url 链接中是否包含一个或多个逗号。如果这是真的，我想为 td 分配一个不同的类。也许检查没有逗号会更好。我想过“包含”，但我不知道如何为此设置结构。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:06:51.247

你正在寻找这样的东西

```
<xsl:if test=".[contains(@href,',')]">
  <xsl:attribute name="class">myclass</xsl:attribute>
</xsl:if> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T14:21:15.637

使用 xpath 函数**contains**将是可行的方法，但解决此问题的一种方法是使用模板来匹配您想要的情况，而不是使用**xsl:choose 。**因此，您将从寻找任何**链接**元素开始

```
<xsl:apply-templates select="link"/> 
```

然后你会有一个模板来匹配@href 属性包含一个命令的**链接元素**

```
<xsl:template match="link[contains(@href, ',')]"> 
```

您还需要一个更通用的模板来匹配所有其他**链接**元素。只有在其他更具体的模板没有找到匹配项时才会匹配

```
<xsl:template match="link"> 
```

例如，考虑以下 XML

```
<root>
   <doc>
      <link href="http://www.example.com" />
   </doc>
   <doc>
      <link href="http://www.example1.com,http://www.example2.com" />
   </doc>
</root> 
```

当您应用以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="html" indent="yes"/>

   <xsl:template match="root">
      <table>
         <tr>
            <xsl:apply-templates select="doc"/>
         </tr>
      </table>
   </xsl:template>

   <xsl:template match="doc">
      <xsl:apply-templates select="link"/>
      <xsl:if test="not(link[@href])">
         <td>No link</td>
      </xsl:if>
   </xsl:template>

   <xsl:template match="link[contains(@href, ',')]">
      <td class="link2">
         <xsl:call-template name="link">
            <xsl:with-param name="href" select="substring-before(@href, ',')"/>
         </xsl:call-template>
         <xsl:call-template name="link">
            <xsl:with-param name="href" select="substring-after(@href, ',')"/>
         </xsl:call-template>
      </td>
   </xsl:template>

   <xsl:template match="link">
      <td class="link">
         <xsl:call-template name="link"/>
      </td>
   </xsl:template>

   <xsl:template name="link">
      <xsl:param name="href" select="@href"/>
      <a href="{$href}">
         <xsl:copy-of select="$href"/> Link</a>
   </xsl:template>
</xsl:stylesheet> 
```

然后输出如下

```
<table>
   <tr>
      <td class="link">
         <a href="http://www.example.com"> Link</a>
      </td>
      <td class="link2">
         <a href="http://www.example1.com">http://www.example1.com Link</a>
         <a href="http://www.example2.com">http://www.example2.com Link</a>
      </td>
   </tr>
</table> 
```

请注意，这也使用命名模板来避免重复代码。

编辑：如果您有多个元素，以及具有@href 属性的**链接**，则有多种方法可以做到这一点。如果你的名字数量有限，你可以做这样的事情

```
<xsl:apply-templates select="link|website|localpath" /> 
```

然后你可以像这样匹配它们......

```
<xsl:template match="link[contains(@href, ',')]|website[contains(@href, ',')]|localpath[contains(@href, ',')]">

<xsl:template match="link|website|website" /> 
```

最好是看任何元素，像这样

```
<xsl:apply-templates select="*" /> 
```

然后匹配任何带有 href 属性的元素，以及那些没有

```
<xsl:template match="doc/*[contains(@href, ',')]">

<xsl:template match="doc/*"> 
```

# haskell - Haskell 中的矩阵运算

> ID：10760986
> 
> 赞同：2
> 
> 时间：2012-05-25T20:29:17.447
> 
> 标签：haskell, matrix, functional-programming

我在展开矩阵时遇到问题。这是程序的输出应该是这样的。我有点卡住了。

```
unfoldMatrix :: [ [a] ] -> [a]
Main> unfoldMatrix [[1, 2, 3],
                [4, 5, 6],
                [7, 8, 9],
                [10, 11, 12]]
[1,4,7,10,11,12,9,6,3,2,5,8] 
```

我的代码有效，但它的输出是这种格式

[[1,4,7],[8,9],[6,3],[2],[5],[]]

任何想法如何更改代码以按需要工作？

```
transpose2:: [[a]]->[[a]]
transpose2 ([]:_) = []
transpose2 x = (map head x) : transpose2 (map tail x)

unfoldMatrix:: [[a]]->[[a]]
unfoldMatrix ([]:_) = []
unfoldMatrix x =(map head x):unfoldMatrix(tail2(x))

rotate90 :: [ [ a ] ] -> [ [ a ] ]
rotate90 = (map reverse).transpose2

tail2:: [[a]]->[[a]]
tail2 = (tail).rotate90 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:56:23.323

您不需要`transpose2`，如果所有子列表都一样长，则与`transpose`from相同`Data.List`。所以你的展开只是

```
Prelude Data.List> let unfold xxs@((_:_):_) = map head xxs ++ unfold (map reverse . transpose $ map tail xxs); unfold _ = []
Prelude Data.List> unfold [[1,2,3],[4,5,6],[7,8,9]]
[1,4,7,8,9,6,3,2,5]
Prelude Data.List> unfold [[1,2,3],[4,5,6],[7,8,9],[10,11,12]]
[1,4,7,10,11,12,9,6,3,2,5,8] 
```

# javascript - Javascript 动画性能

> ID：10760988
> 
> 赞同：0
> 
> 时间：2012-05-25T20:29:54.487
> 
> 标签：javascript, jquery

我的js在这里遇到了一些问题。

它可以正常运行，但在某些情况下性能太慢。

我轻轻地滚动到底部，但是当我再次尝试向上滚动时，它滚动得很慢。

我能做些什么来提高性能？

谢谢！

```
$(function(){

var windowHeight = $(window).height();
var windowWidth = $(window).width();
var sectionsNumbers = $("#content section").length-1;
var sectionCount = 0;

// Scroll sets

var windowScrollX = ((sectionsNumbers+1)*windowWidth)-windowWidth;
var windowScrollY = ((sectionsNumbers+1)*windowHeight)-windowHeight;

$("#content").css("width", windowScrollX+windowWidth);
$("#content").css("height", windowScrollY+windowHeight);

$(".illusion1").css("width", windowScrollX+windowWidth);
$(".illusion1").css("height", windowScrollY+windowHeight);

// Set mask w and h

$("#mask").css("width", windowWidth);
$("#mask").css("height", windowHeight);
$(".scrollRule").css("height", (sectionsNumbers+1)*windowHeight);

$("#content section").each(function() {

    // Defines its width and height

    $(this).css("width", windowWidth);
    $(this).css("height", windowHeight);

    // Defines its position
    $(this).css("left", sectionCount*windowWidth);
    $(this).css("top", sectionCount*windowHeight);

    sectionCount++;
});

// When window scrolls

$(window).scroll(function(){ 

    var curScrollTop = $(window).scrollTop();
    var angleVar = windowScrollX/windowScrollY;

    $("#content").stop().animate({left: "-"+curScrollTop*angleVar, top: "-"+curScrollTop}, {duration: 250, easing: 'easeOutQuart'});

    $(".illusion1").stop().animate({left: "-"+curScrollTop*angleVar*0.5, top: "-"+curScrollTop*0.5}, {duration: 250, easing: 'easeOutQuart'});

    //{duration: 1500, easing: 'easeOutQuart'}
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T04:28:51.697

您没有在动画中缓存选择器（并且重复使用 $(this) 或 $('#mask') 也很浪费），所以每次用户滚动时，它/searching the entire dom/ for #content, #错觉1\. 此外，滚动动画有些多余，因为滚动本身就是一种“动画”。固定定位是理想的，但您可以通过在每个滚动上设置 CSS 样式来实现相同的效果。只是不要在每个滚动事件上使用动画。此外，您没有为 left 和 top 提供 'px'，这样做可以防止通过在前面加上“-”+ 来“转换”为字符串。尝试像这样重写 $(window).scroll 函数：

```
var $window = $(window),
    $content = $("#content"),
    $illusion = $(".illusion1");
$window.scroll(function(){ 
    var curScrollTop = $window.scrollTop();
    var angleVar = windowScrollX/windowScrollY;
    $content.css({ left: (-curScrollTop*angleVar)+'px', top: (-curScrollTop)+'px' });
    $illusion.css({ left: (-curScrollTop*angleVar*0.5)+'px', top: (-curScrollTop*0.5)+'px' });
}); 
```

如果您对动画效果很感兴趣，请考虑使用 debounce/throttle 方法。而不是在每个单独的滚动事件上制作动画，而是使用：“timeout = setTimeout(function(){ ... }, 25)”，它将在允许超时到期时执行动画，并且在滚动时只需 clearTimeout(timeout) 和再次设置超时。动画不会是实时的，因为除非用户停止滚动 25 毫秒，否则它永远不会执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T20:40:46.533

不确定这是否会有所帮助，但是当我必须在滚动时相对于浏览器窗口移动元素时，我会使用某种形式的固定定位。我发现这在 Chrome 和其他浏览器中提供了比尝试设置或动画绝对或相对定位元素的偏移更好的性能。也许如果您可以制作一个[jsfiddle](http://jsfiddle.net/)来说明您想要达到的效果，我可以提供一些进一步的建议。

编辑：如果您可以提供一些 HTML 来代替 jsfiddle，那也会很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T16:07:08.653

我想说将整个捆绑包更改为 TweenLite，它的动画运行比 jQuery 更流畅。

[http://www.greensock.com/v12/](http://www.greensock.com/v12/)

您可以比较下面的差异。

[http://www.greensock.com/js/speed.html](http://www.greensock.com/js/speed.html)

# java - 为什么我在 Java/Android 中得到一个空 SQLite 字段的“0.0”？

> ID：10760996
> 
> 赞同：1
> 
> 时间：2012-05-25T20:31:01.350
> 
> 标签：java, android, sqlite, double

编码：

```
double indSRate[] = new double[c.getCount()];
indSRate[e++] = c.getDouble(c.getColumnIndex("s_rate"));

if (String.valueOf(indSRate[s]) == null) {
    Log.d("Special Rate", String.valueOf(indSRate[s++]));
} 
```

用户在编辑文本字段中将 s_rate 列中的字段留空。我是否以某种方式将其变成了双倍？

在循环内部，如果字段为空，我想做某些事情，如果不是，我想做其他事情。但它似乎是 0 或更大？我无法测试它是“0”或不同的东西。我必须在 isEmpty 之间进行测试吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T20:33:59.500

像 double 和 int 这样的原始数据类型不能为 null 或“空”...当您将它们转换为字符串时，默认值分别为“0.0”和“0”。

**添加**

您可以检查 double 的值是否为`0.0`：

```
if(indSRate[s] == 0.0) { // default value
    Log.d("Special Rate", String.valueOf(indSRate[s++]));
} 
```

或者：

```
int rateIndex = c.getColumnIndex("s_rate");
while(c.moveToNext()) {
    if(c.isNull(rateIndex))
        Log.d("Special Rate", "Null");
    indSRate[e++] = c.getDouble(rateIndex);
} 
```

有很多解决方案...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T20:45:48.293

如果一个值的内部表示是`NULL`并且您的查询请求 a `FLOAT`，您将获得 0.0 作为返回值（请参阅[此文档](http://www.sqlite.org/c3ref/column_blob.html)）。

如果您不希望光标中该列的 NULL 值，请在查询中指定。如果您不希望数据库中有 NULL 值，请在创建表时使用列约束指定它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T21:09:43.553

如果列的值为 NULL，则 ResultSet.getDouble 返回 0.0。如果要在使用原始双精度时区分 0.0 和 NULL，则必须显式检查 ResultSet.wasNull()。或者，您可以获取 ResultSet.getObject() 并转换为 Double。在这种情况下，您将获得一个空引用，您显然可以对照“空”进行检查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T20:45:56.353

Double 用 0.0 表示，因此空时显示 0.0。试试这个：

```
String s = null;

double indSRate[] = new double[c.getCount()];

indSRate[e++] = c.getDouble(c.getColumnIndex("s_rate"));

if (String.valueOf(indSRate[s]) == null) {
    Log.d("Special Rate", s));
} 
```

# c++ - 限制继承

> ID：10760997
> 
> 赞同：0
> 
> 时间：2012-05-25T20:31:03.903
> 
> 标签：c++

> 类 BaseA{}; , 类 DerivedB{}; 类派生C{}；

DerivedB 可以从 BaseA 派生：想要允许：class DerivedB: public BaseA

但是，如果有人试图做 DerivedC ： public BaseA ==> 想要限制这一点。

可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T20:33:47.040

您可以将所有`BaseA`的构造函数设为私有并添加`DerivedB`为 a `friend`of `BaseA`。

```
class BaseA
{
    friend class DerivedB;
private:
    BaseA();
};
class DerivedB : BaseA
{
};
class DerivedC : BaseA  //error - I get it when I try to create an object in MSVS
                        //but in principle it works
{
}; 
```

# asp.net - 实体数据模型和数据库中的加密列

> ID：10760999
> 
> 赞同：1
> 
> 时间：2012-05-25T20:31:08.303
> 
> 标签：asp.net, entity-framework

我们在 SQl Server DB 上有几个表，我们想要加密一些包含敏感客户数据的列。我们正在使用 EDM 来访问、更新、插入……数据库数据。我们将使用数据库上的对称密钥为少数表加密一些已经存在的列。我需要在 ED 中进行哪些更新以容纳加密列？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:19:58.490

Well in this case you should always encrypt data before putting it into the database and decrypt when pulling . EF has nothing builtin to support you with any kind of encryption/decryption builtin.

Thats how you should do it. I hope that helps you out.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:45:01.303

除了您的搜索查询和订购者完全被拍摄之外，它确实有效，这也是我对加密感兴趣的主要原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T19:46:38.030

可能这对其他人有一些帮助......我们最终没有在数据库级别使用对称加密，我们加密了应用程序中的列并将加密的数据保存为字符串，并在检索数据时解密了列。它运行良好。