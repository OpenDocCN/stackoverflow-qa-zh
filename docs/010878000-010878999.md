# StackOverflow 问答 10878000-10878999

# android - 有人用谷歌地图作为追踪设备吗

> ID：10878005
> 
> 赞同：0
> 
> 时间：2012-06-04T07:52:09.267
> 
> 标签：android

当谷歌地图启动时，它会使用设备 ID 或其 imie 编号给出设备的位置。. 有什么方法可以让我们以编程方式设置此设备信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:00:41.520

这可能会有所帮助：

[http://developer.android.com/reference/android/Manifest.permission.html#ACCESS_MOCK_LOCATION](http://developer.android.com/reference/android/Manifest.permission.html#ACCESS_MOCK_LOCATION)

# php - 如何从重定向到另一个 url 的 FORM 操作中获取响应

> ID：10878010
> 
> 赞同：0
> 
> 时间：2012-06-04T07:52:46.567
> 
> 标签：php, forms, action

我陷入了一个问题。

请看下面的例子

```
<form action="http://url-1.com/action">

------
------
</form> 
```

现在，当表单操作解析变量时，它会重定向到另一个 URL，例如[http://urls-2.com/confirm.php](http://urls-2.com/confirm.php)。查看表单操作已发送到 url-1.com/action

由于它重定向到不同的 url，我无法捕获表单操作的响应。任何人都可以提供适当的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:08:21.863

尝试将这样的内容作为您的“confirm.php”页面：

```
<html>
 <body>
  <?php
   $title = $_POST['title'];  // 'title' is the field name in your form
   $name = $_POST['name'];    // 'name' is the field name in your form

   echo "Hello ". $title . " " . $name . "!<br />";
  ?>
 </body>
</html> 
```

# vb.net - 在 VB.net 中使用 VB6 事件，例如 AfterColUpdate（DataGridView 事件）

> ID：10878011
> 
> 赞同：0
> 
> 时间：2012-06-04T07:52:46.837
> 
> 标签：vb.net, vb6, datagridview, vb6-migration

我正在做 VB6 到 VB.NET 的转换。我在 VB.NET 中使用以下 DataGridView 事件时遇到问题：

1.  `AfterColUpdate`
2.  `AfterDelete`
3.  `BeforeDelete`

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T08:20:11.967

.net 中的 datagridview 不支持这些事件。

使用`CellValueChanged`代替`AfterColUpdate`, `UserDeletedRow`for `AfterDelete`, `UserDeletingRow` for `BeforeDelete`。

# java - 使用 ReferenceQueue 和 WeakReference

> ID：10878012
> 
> 赞同：10
> 
> 时间：2012-06-04T07:52:48.273
> 
> 标签：java

当其他线程不再引用可关闭对象时，我想正确关闭它。

我写了一些小测试，但是在对象入队后，get 方法返回 null，即 poll 方法返回没有引用的正确对象。

```
 public static void main(String[] args)
  {
   ReferenceQueue<Closeable> reaped = new ReferenceQueue<Closeable>();
   Closeable s = <SOME CLOSEABLE IMPL>;
   WeakReference<Closeable> ws = new WeakReference<Closeable>(s, reaped);
   s = null;

   System.gc();
   Closeable ro = (Closeable)reaped.poll().get();
   ro.close();
  } 
```

提前致谢。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T09:28:01.633

首先，如果只是关于关闭，请使用`PhantomReference`. 接下来，从引用队列中，`poll()`不保证您会取回引用。并且您将永远无法取回实际对象（所指对象）。

如果您想确保您`Closeable`的 s 已关闭，您必须自己跟踪它们，让我们在`Map<Reference<?>, Closeable>`. 然后，当`poll()`您参考队列时，您最终将获得`ref`然后您必须使用它`Closeable`从地图中获取。

```
 class MyThing {
      Closeable c;
   }

   Map<Reference<MyThing>, Closeable> m = new HashMap();
   ReferenceQueue<MyThing> reaped = new ReferenceQueue<MyThing>();

   MyThing mt = new MyThing();
   mt.c = new MyClosable();

   Reference<MyThing> pref = new PhantomReference<MyThing>(mt, reaped);
   m.put(pref, mt.c);

   mt = null;

   System.gc();
   Reference<MyThing> rf = reaped.poll();
   while (rf != null) {
     m.get(rf).close(); 
     rf = reaped.poll();
   } 
```

***注意***如果您没有真正的理由这样做，或者如果您不明白自己真正在做什么，请不要这样做。

你可以关闭你的文件`finally`，顺便说一句，如果它是关于文件、套接字等的，它们是为你关闭的（他们已经实现了`finalize()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-08T17:05:42.917

这里我想提几点

1.  该`get()`方法不打算用于终结任务`get()`方法的目的是访问所指对象，因为我们使用`WeakReference`对象来引用一个没有直接引用的对象（即不是强可达的）。任何时候都可以对所指对象进行垃圾回收。该`get()`方法预计在没有被垃圾回收之前返回所指对象，并在被垃圾回收时返回 null。这是有道理的，因为引用对象在垃圾回收后不可用。该`get()`方法不适用于完成诸如关闭`Closable`对象之类的终结任务。

2.  完成最终任务的方法并不简单。完成最终任务的方法是在对象进入后期垃圾回收`WeakReference`队列后检索它。`ReferenceQueue`并称之为 clear() 方法。您不能让引用对象来完成最终确定。因为此时认为所指对象已被垃圾回收。方法是拥有一个将扩展 WeakReference 的 Reference 对象的自定义实现。您可以覆盖 `clear()`放置任何清理逻辑的方法。您仍然不能在实现中对引用对象有任何引用，因为它会阻止引用对象被垃圾收集。如果您必须清理一些状态，例如引用对象有一些可关闭的对象或连接等，则需要将它们保存为实现下的实例变量，并且可以在 clear 方法中完成它们。当`clear()`方法被调用时，终结逻辑将被执行。因此，参考对象将有助于最终确定。

3.  上述方法在这里仍然没有用，因为即使对象的自定义实现`WeakReference`也不能保持对引用对象本身的引用，因为它会阻止引用对象被垃圾收集。您正面临这样的困难，因为使用`WeakReference`for`Closeble`并期望将其作为事后活动关闭不是正确的用例。因为关闭 a`Closeble`没有资格成为事后活动。事后活动是在一个对象被垃圾收集之后所做的事情，即它根本没有它的状态。关闭一个`Closeble`对象是一个预先确定的活动，即预期在 finally 块中完成，或者在创建它的线程中完成。在`Closeble`. `ReferenceQueue`旨在用于死后活动，而不是用于死前活动。

# magento - 视图文件中的模型加载错误

> ID：10878014
> 
> 赞同：0
> 
> 时间：2012-06-04T07:53:10.093
> 
> 标签：magento

我在我的 magento 网站中加载了手机号码的自定义模块。当我尝试在单独的视图页面中加载时，它显示错误。

在这里，我在下面的 customer/widget/mobile.phtml 文件中为手机号码创建了新的视图文件

`<?php echo $this->getLayout()->createBlock('customer/widget_mobile')->setObject($this->getFormData())->toHtml() ?>`

致命错误：在第 195 行的 /var/rooja/app/design/frontend/default/rooja/template/customer/form/register.phtml 中的非对象上调用成员函数 setObject()。

1.  谁能解释这个错误的原因？
2.  如何调试此错误？

谢谢普拉卡什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:22:01.573

这意味着您的`->createBlock('customer/widget_mobile')`调用不会像您期望的那样创建和返回块对象。因此，当您链接 setObject 调用时，它没有对象可以`setObject`反对。

首先检查该块是否`customer/widget_module`确实存在。还要检查您的异常日志，因为（大约第 434 行）中的 createBlock 方法`app/code/core/Mage/Core/Model/Layout.php`如果无法创建块，则应该抛出异常。

# visual-studio-2010 - 如何在 Visual Studio 2010 中定义每次运行的预构建/预编译步骤？

> ID：10878015
> 
> 赞同：0
> 
> 时间：2012-06-04T07:53:11.937
> 
> 标签：visual-studio-2010, visual-c++, mfc

任务是在 mfc 程序中显示当前的颠覆修订号。我的想法是在每次编译/构建/运行时使用定义创建一个 rev.h 文件。我从 svnversion 获得 rev。

到目前为止，一切都很好。有用。问题是我找不到每次都有效的事件/步骤。

起初，我在项目设置中使用 Pre-Build Event 进行了尝试。它第一次工作，但下一次重建项目时会导致臭名昭著的 SBR 错误。我再次重建并发生 BSCMAKE 错误。下次又是 SBR 错误，以此类推。

我尝试的下一件事是那些自定义构建步骤（在此之前执行：CICompile/Build/Run ...）。它再次运行第一次，但如果没有更改，VS 将跳过此步骤。由于 rev.h 没有版本控制，因此提交会更改 rev 但不会更改项目的文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:08:05.637

所以，我在另一个线程中找到了一个解决方案： [如何摆脱“BSCMAKE 错误 BK1500：内部错误”编译错误](https://stackoverflow.com/questions/10228627/how-to-get-rid-off-bscmake-error-bk1500-internal-error-compile-errors)

这解决了 bscmake 错误，它对我有用。

# javascript - 过早触发 OnComplete 动画

> ID：10878019
> 
> 赞同：0
> 
> 时间：2012-06-04T07:53:36.693
> 
> 标签：javascript, jquery

我正在实现一个进度条（用于计时后台任务，我已经知道它将花费的确切时间） - 但我在 oncomplete 事件提前触发时遇到了麻烦。

```
$("#go").on("click", function(event){

    event.preventDefault();

    $('#report-loader .bar').animate({ 
        width: 500 
    },
    {   
        easing: 'linear',
        duration: 500,
        complete: function() {
            alert('complete');        
        }          
    });
}); 
```

​ ​</p>

这是一个 JSFiddle，它显示了我的意思的一个例子：http: [//jsfiddle.net/ezE8b/1/](http://jsfiddle.net/ezE8b/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T07:57:58.757

替换：
`$('#report-loader .bar').animate({ width: 500 },`

对

`$('#report-loader .bar').animate({ width: "100%" },`

我来说很好。

# javascript - Javascript 类在函数中调用函数

> ID：10878020
> 
> 赞同：0
> 
> 时间：2012-06-04T07:53:42.690
> 
> 标签：javascript, prototypejs

```
function ObjectProvider() {
    this.url = "ajax/inbounds.php"
    this.inBounds = function () {
        this.removeMarkers();
        var url_string = this.url;
        $.getJSON(url_string, function (data) {
            for (i = 0; i != data.length; ++i) {
                this.createObject(data[i]);
            }
        });
    };
    this.createObject = function (_data) {};
    this.removeMarkers = function () {};
}; 
```

所以这条线

```
this.createObject( data[i] ); 
```

有一些问题，但是

```
this.removeMarkers(); 
```

工作正常。

这两个函数都在 ObjectProvider 对象中定义。尝试添加一个名为 test() 的函数，只是不喜欢在 JSON 回调函数中调用任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T07:57:56.527

这是一个典型的范围界定问题；`this`里面你的回调`$.getJSON()`函数已经不一样了`this`。

`this`要解决问题，您必须在调用之前保留参考`$.getJSON()`，例如

```
var self = this;
$.getJSON(url_string, function(data) {
    // self.createObject( data[i] );
}); 
```

或者，使用以下方法绑定成功回调函数[`$.proxy`](https://api.jquery.com/jQuery.proxy/)：

```
$.getJSON(url_string, $.proxy(function(data) {
    this.createObject(data[i]);
}, this)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T07:57:28.830

`this`ajax 回调中的 位于不同的上下文中。

***解决方案：***将其缓存在局部变量中。

```
this.inBounds = function(){
    var self = this;
    self.removeMarkers();
    var url_string = this.url;
    $.getJSON(url_string, function(data) {
        for( i=0; i != data.length; ++i ){
            self.createObject( data[i] );
        }
    });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T07:58:20.700

问题是，您将一个函数传递给 getJSON，该函数将被调用，“this”指向全局对象或 jQuery 定义的某个自定义对象。如果您希望回调中的“this”指向您的对象，请使用 bind 方法（在某些较旧的浏览器中不可用，但您可以轻松找到模拟此方法的[项目）。](https://github.com/kriskowal/es5-shim)

```
$.getJSON(url_string, function(data) {
    for( i=0; i != data.length; ++i ){
        this.createObject( data[i] );
    }
}.bind(this)); 
```

或定义一个辅助变量，该变量将指向此回调外部的“this”并在内部使用该变量。

```
var self = this;

$.getJSON(url_string, function(data) {
    for( i=0; i != data.length; ++i ){
        self.createObject( data[i] );
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T08:57:41.960

我不喜欢`getJSON`这个原因，与`ajax`.

基本上，当`success`函数执行时，`this`不再指向您的`ObjectProvider`实例。为了解决这个问题，您可以改用[ajax](http://api.jquery.com/jQuery.ajax/)，它提供了一个有用的`context`属性：

```
function ObjectProvider(){
  this.url = "ajax/inbounds.php"
  this.inBounds = function(){
    this.removeMarkers();

    var url_string = this.url;
    $.ajax({
      url: this.url,
      dataType: "json",
      context: this,
      success: function(data) {
        for( i=0; i != data.length; ++i ){
            this.createObject( data[i] );
        }
    });
  };

  this.createObject = function(_data){};
  this.removeMarkers = function(){};
}; 
```

否则你可以使用[bind](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)：

```
$.getJSON(url_string, function(data) {
    for( i=0; i != data.length; ++i ){
        this.createObject( data[i] );
    }
}.bind(this)); 
```

为了创建一个“绑定”到特定上下文对象的新函数，但仅限于支持 ES5 或具有 shim 的浏览器（如上面的链接所述）。

还有提到的版本，用于存储实例的闭包，但我个人更喜欢避免在不是绝对必要的情况下。如今，对于这种行为，它被认为是一种古老的做法。

谈论闭包：你不需要在构造函数中声明函数。这样，它们一直是动态添加的，如果它们没有访问某些内部变量，那就没有理由了，这只是浪费资源。需要明确的是，在您的情况下，如果您有：

```
var a = new ObjectProvider();
var b = new ObjectProvider();

console.log(a.createObject === b.createObject) // false 
```

更好的方法可能是：

```
function ObjectProvider() {
}

ObjectProvider.prototype = {
    constructor: ObjectProvider,

    url: "ajax/inbounds.php",

    inBounds: function () { /* ... */ },
    createObject: function () { /* ... */ },
    removeMarkers: function () { /* ... */ }         
}

var a = new ObjectProvider();
var b = new ObjectProvider();

console.log(a.createObject === b.createObject) // true 
```

但是此时，如果您没有任何动态属性（例如，URL 始终相同，不作为参数传递给构造函数）也许您也不需要拥有不同的实例，并且您可以刚刚开始：

```
var ObjectProvider = {
    url: "ajax/inbounds.php",

    inBounds: function () { /* ... */ },
    createObject: function () { /* ... */ },
    removeMarkers: function () { /* ... */ }         
}; 
```

并将其用作“单例”：

```
ObjectProvider.createObject() 
```

# google-maps - 谷歌地图客户端地理编码成本

> ID：10878024
> 
> 赞同：0
> 
> 时间：2012-06-04T07:53:59.910
> 
> 标签：google-maps, google-maps-api-3

我们都知道，谷歌对每个 IP 实施了 25000 次展示的限制。在这篇文章中 [https://developers.google.com/maps/articles/geocodestrat](https://developers.google.com/maps/articles/geocodestrat) 他们说，如果地理编码完全基于客户端，即只使用 Javascript 在客户端加载任何内容，则此限制将扩展到每个用户会话 25000 次展示。因此，除非您从服务器端进行地理编码，否则您仍然应该能够免费使用地图，对吧？例如，考虑一个应用程序，其中您有几个坐标，您需要将这些坐标显示为谷歌地图中的标记。这种应用程序不需要服务器的帮助，可以完全在客户端完成。因此，除非用户每天的展示次数超过 25000 次，否则您是安全的。这是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:22:24.707

是的。AFAIK 25k 限制来自每个用户加载 JS-Api。它与反向地理编码或大量航点和方向请求无关。旅行推销员问题就是一个很好的例子。对于少数城市 20，您需要请求大量方向 20！。

# java - 如何使用字符串 fromTZ 日期从时区“fromTZ”转换为“toTZ”？

> ID：10878027
> 
> 赞同：0
> 
> 时间：2012-06-04T07:54:11.887
> 
> 标签：java, date

如何将日期字符串转换为长字符串？我希望方法签名将`public static long convert2(String dateStr,TimeZone fromTz, TimeZone toTz)`在`dateStr`格式中的位置`dd/MM/yyyy`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:12:51.117

```
public static long convert2(String dateStr,TimeZone fromTz, TimeZone toTz)
// Format in which you are getting the date
DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy");  
// Set the formater to the timezone in which you are getting the date
formatter.setTimeZone(fromTz);  

// Converting the string date to date
Date date = formatter.parse(dateStr);

// Prints the date in the from time zone timezone. Not required as per the quest. Just for info  
System.out.println(formatter.format(date));  

// Set the formatter to use a different timezone  
formatter.setTimeZone(toTz);  

// Prints the date in the to time zone timezone. Not required as per the quest. Just for info  
System.out.println(formatter.format(date)); 

// converting the new Timzone date to long as that is what is required
long longDate = date.getTime();

// return the long date.
return longDate; 
```

# css - css 位置 jquery ui 组合框

> ID：10878031
> 
> 赞同：0
> 
> 时间：2012-06-04T07:54:49.290
> 
> 标签：css, jquery-ui, combobox, position

我想定位 jQuery UI 组合框。我有不止一个，但并非所有这些都必须处于相同的相对位置。

这是我的代码：

html:

```
<div>
   <select id="comboSubsidiary" class="comboTravel" >
      <option>loading</option>
   </select>
</div>

<div>
   <select id="comboCountry" class="comboWork">
      <option>loading</option>
   </select>
</div> 
```

CSS：

```
div.comboTravel{position: relative; left: 410px; top: -23px; display: inline-block; } 
```

上面的CSS不起作用。

以下CSS有效：

```
.ui-combobox{position: relative; left: 110px; top: -23px; display: inline-block; }
        .ui-button {
            position: absolute;
            top: 0;
            bottom: 0;
            margin-left: -1px;
            padding: 0;
            /* adjust styles for IE 6/7 */
            *height: 1.7em;
            *top: 0.1em;
        }
        .ui-autocomplete-input {
            margin: 0;
            padding: 0.3em;
        } 
```

但是有了这个 css，所有的组合框都以相同的方式定位。我希望一些组合框使用 css 类，但我不知道如何访问它们（例如 css-class comboTravel 或 comboWork）

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:16:01.910

我可以看到 div.comboTravel 类的顶部为 -23px，可能是这使组合框不出现在屏幕上。我尝试删除它并为 comboWork 创建另一个类，它对我有用。这是 jsFiddle 之类的 [http://jsfiddle.net/nAC8N/2/]

希望这可以帮助。

# soapui - SoapUI在soap请求中从文件中插入xml

> ID：10878032
> 
> 赞同：3
> 
> 时间：2012-06-04T07:54:50.310
> 
> 标签：soapui

有谁知道是否可以在soap请求中从本地文件插入xml？怎么做？

我在编辑器窗口中输入的内容

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Header/>
   <soapenv:Body>
      <sendXml>
         <arg0>file:MyXml.xml</arg2>
      </sendXml>
   </soapenv:Body>
</soapenv:Envelope> 
```

我在实际的肥皂信息中所期望的：-

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Header/>
   <soapenv:Body>
      <sendXml>
         <arg0>&lt;MyXml&gt;Info&lt;/MyXml&gt;</arg2>
      </sendXml>
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:22:41.010

您可以使用上下文。

在 XML 中放置一个看起来像这样的符号：

```
${myFileStuff} 
```

在这个 put 之前执行的 Groovy Step 中：

```
 BufferedReader br = null;

    try {

        String sCurrentLine = "";
        String myFileStuff= "";

        br = new BufferedReader(new FileReader("C:\\testing.txt"));

        while ((sCurrentLine = br.readLine()) != null) {
            myFileStuff += sCurrentLine;
        }

    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (br != null)br.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
    context.setProperty("myFileStuff", myFileStuff) 
```

我稍微修改了这里的代码示例以读取文件。有很多方法可以去：

[http://www.mkyong.com/java/how-to-read-file-from-java-bufferedreader-example/](http://www.mkyong.com/java/how-to-read-file-from-java-bufferedreader-example/)

您可以在那里获取导入语句。

# sql - 处理 ClientInsertServerInsert 同步冲突时的 SQL 命令“超时”异常

> ID：10878033
> 
> 赞同：1
> 
> 时间：2012-06-04T07:55:09.203
> 
> 标签：sql, vb.net, synchronization, sql-server-ce

我正在使用 VS 2010 同步 2 个数据库（SQL Express 和 SQL Compact Edition）。程序首次运行时它工作正常。但是，当代码执行多次时，会出现 SQL 命令“超时”异常。错误信息是：

超时已过。在操作完成之前超时时间已过或服务器没有响应。

以下是我处理[ClientInsertServerInsert](http://msdn.microsoft.com/en-us/library/microsoft.synchronization.data.conflicttype.aspx)冲突的代码。（编辑：根据这篇 MSDN 文章，这与客户端和服务器都插入具有相同主键值的行有关。这会导致主键冲突。）

```
 Dim conflictTableName As String = e.TableMetadata.TableName.ToString
    Dim serverConflictDT, clientConflictDT As DataTable
    Dim clientConflictID As Int16
    Dim new_ID As Int16
    Dim SqlCon As New SqlConnection
    clientConflictDT = e.Conflict.ClientChange
    serverConflictDT = e.Conflict.ServerChange

    If e.Conflict.ConflictType = ConflictType.ClientInsertServerInsert Then
        SqlCon = New SqlConnection(STR_SQL_CON)

        Using SqlCon
            If SqlCon.State = ConnectionState.Closed Then SqlCon.Open()
            MsgBox(SqlCon.PacketSize.ToString & vbNewLine & conflictTableName.ToString)
            Dim sqlStr = "SELECT CASE WHEN MAX(ID) IS NULL THEN 0 ELSE MAX(ID)+1 END               FROM " & conflictTableName

            Dim sqlcmd As New SqlCommand(sqlStr, SqlCon)
            sqlcmd.CommandTimeout = 2

            new_ID = sqlcmd.ExecuteScalar  '<- This is the line where the Exception occurred

            clientConflictID = clientConflictDT.Rows(0)(0)

            MsgBox(new_ID.ToString & conflictTableName.ToString)

            Try
                Using SqlCeCon As New SqlCeConnection(STR_SQLCE_CON)
                    If SqlCeCon.State = ConnectionState.Closed Then SqlCeCon.Open()

                    Dim sqlCeCmd As New SqlCeCommand
                    Dim sqlCeStr = Nothing

                    sqlCeStr = "SELECT CASE WHEN MAX(ID) IS NULL THEN 0 ELSE MAX(ID)+1 END FROM " & conflictTableName
                    sqlCeCmd = New SqlCeCommand(sqlCeStr, SqlCeCon)
                    If new_ID < sqlCeCmd.ExecuteScalar Then
                        new_ID = sqlCeCmd.ExecuteScalar
                    End If

                    sqlCeStr = "UPDATE " & conflictTableName & " SET id=" & new_ID & " WHERE id=" & clientConflictID
                    sqlCeCmd.CommandText = sqlCeStr
                    sqlCeCmd.ExecuteNonQuery()
                End Using
            Catch ex As Exception

            Finally

            End Try

        End Using

    End If 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T02:55:28.737

我想这是由数据库锁引起的。在我修改 SQL SELECT 语句之后

```
"SELECT CASE WHEN MAX(ID) IS NULL THEN 0 ELSE MAX(ID)+1 END FROM " & conflictTableName 
```

至

```
"SELECT CASE WHEN MAX(ID) IS NULL THEN 0 ELSE MAX(ID)+1 END FROM " & conflictTableName & " WITH (NOLOCK)" 
```

然后问题解决了。

无论如何，感谢所有评论:-)

# objective-c - 如何追踪 Xcode 程序崩溃的位置

> ID：10878035
> 
> 赞同：6
> 
> 时间：2012-06-04T07:55:19.320
> 
> 标签：objective-c, ios, xcode

我在调试器中遇到错误。在 Thread 我的应用程序在线崩溃：

```
0x37265f78:  ldr    r3, [r4, #8] 
```

和：

```
Thread 1: EXC_BAD_ACCESS (code=1, address=0x50000008) 
```

如何找出应用程序实际崩溃的位置？有类似“调用堆栈”的东西吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-04T08:12:52.490

您必须将`Exception Breakpoint` Go 设置为 Breakpoints 导航器，单击底部的 + 按钮，然后添加一个 Exception Breakpoint。现在您将知道发生任何异常的确切行（例如崩溃行）。祝你好运！！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T08:43:00.957

[http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1](http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1)

跟踪错误的最佳教程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T08:06:52.933

在调试器下运行您的应用程序，然后当您的应用程序崩溃时，您将可以访问调用堆栈。

此外，如果您显示控制台窗口，您将在崩溃时获得更多文本信息（包括调用堆栈）。

如果您使用的是 Xcode 4，请查看随附的图片。![在此处输入图像描述](../Images/7f4fcd5398f0d6118c9bd46051566cba.png)

# hadoop - WARN snappy.LoadSnappy：未加载 Snappy 本机库

> ID：10878038
> 
> 赞同：9
> 
> 时间：2012-06-04T07:55:37.003
> 
> 标签：hadoop, mapreduce

无论我做什么，我都无法摆脱这个错误。我知道 snappy 是一个快速的，因此比其他选项更可取的压缩/解压缩库。我想使用这个库进行处理。据我所知，Google 在内部将其用于他们的 BigTables、MapReduce（基本上用于他们所有的杀手级应用程序）。我自己研究过。人们建议不要使用它，或者 java-snappy 作为选项，但我想坚持使用 hadoop snappy。我的设置中有相应的库。（我的意思是在lib下）

有人可以解决这个错误吗？我看到不管这个错误，工作都成功完成了。

```
****hdfs://localhost:54310/user/hduser/gutenberg
12/06/01 18:18:54 INFO input.FileInputFormat: Total input paths to process : 3
12/06/01 18:18:54 INFO util.NativeCodeLoader: Loaded the native-hadoop library
12/06/01 18:18:54 WARN snappy.LoadSnappy: Snappy native library not loaded
12/06/01 18:18:54 INFO mapred.JobClient: Running job: job_201206011229_0008
12/06/01 18:18:55 INFO mapred.JobClient:  map 0% reduce 0%
12/06/01 18:19:08 INFO mapred.JobClient:  map 66% reduce 0%
12/06/01 18:19:14 INFO mapred.JobClient:  map 100% reduce 0%
12/06/01 18:19:17 INFO mapred.JobClient:  map 100% reduce 22%
12/06/01 18:19:23 INFO mapred.JobClient:  map 100% reduce 100%
12/06/01 18:19:28 INFO mapred.JobClient: Job complete: job_201206011229_0008
12/06/01 18:19:28 INFO mapred.JobClient: Counters: 29
12/06/01 18:19:28 INFO mapred.JobClient:   Job Counters 
12/06/01 18:19:28 INFO mapred.JobClient:     Launched reduce tasks=1
12/06/01 18:19:28 INFO mapred.JobClient:     SLOTS_MILLIS_MAPS=22810
12/06/01 18:19:28 INFO mapred.JobClient:     Total time spent by all reduces waiting after reserving slots (ms)=0
12/06/01 18:19:28 INFO mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0
12/06/01 18:19:28 INFO mapred.JobClient:     Launched map tasks=3
12/06/01 18:19:28 INFO mapred.JobClient:     Data-local map tasks=3
12/06/01 18:19:28 INFO mapred.JobClient:     SLOTS_MILLIS_REDUCES=14345
12/06/01 18:19:28 INFO mapred.JobClient:   File Output Format Counters 
12/06/01 18:19:28 INFO mapred.JobClient:     Bytes Written=880838
12/06/01 18:19:28 INFO mapred.JobClient:   FileSystemCounters
12/06/01 18:19:28 INFO mapred.JobClient:     FILE_BYTES_READ=2214849
12/06/01 18:19:28 INFO mapred.JobClient:     HDFS_BYTES_READ=3671878
12/06/01 18:19:28 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=3775339
12/06/01 18:19:28 INFO mapred.JobClient:     HDFS_BYTES_WRITTEN=880838
12/06/01 18:19:28 INFO mapred.JobClient:   File Input Format Counters 
12/06/01 18:19:28 INFO mapred.JobClient:     Bytes Read=3671517
12/06/01 18:19:28 INFO mapred.JobClient:   Map-Reduce Framework
12/06/01 18:19:28 INFO mapred.JobClient:     Map output materialized bytes=1474341
12/06/01 18:19:28 INFO mapred.JobClient:     Map input records=77932
12/06/01 18:19:28 INFO mapred.JobClient:     Reduce shuffle bytes=1207328
12/06/01 18:19:28 INFO mapred.JobClient:     Spilled Records=255962
12/06/01 18:19:28 INFO mapred.JobClient:     Map output bytes=6076095
12/06/01 18:19:28 INFO mapred.JobClient:     CPU time spent (ms)=12100
12/06/01 18:19:28 INFO mapred.JobClient:     Total committed heap usage (bytes)=516882432
12/06/01 18:19:28 INFO mapred.JobClient:     Combine input records=629172
12/06/01 18:19:28 INFO mapred.JobClient:     SPLIT_RAW_BYTES=361
12/06/01 18:19:28 INFO mapred.JobClient:     Reduce input records=102322
12/06/01 18:19:28 INFO mapred.JobClient:     Reduce input groups=82335
12/06/01 18:19:28 INFO mapred.JobClient:     Combine output records=102322
12/06/01 18:19:28 INFO mapred.JobClient:     Physical memory (bytes) snapshot=605229056
12/06/01 18:19:28 INFO mapred.JobClient:     Reduce output records=82335
12/06/01 18:19:28 INFO mapred.JobClient:     Virtual memory (bytes) snapshot=2276663296
12/06/01 18:19:28 INFO mapred.JobClient:     Map output records=629172 
```

PS：目前，我正在使用一个小型数据集，其中快速压缩和解压缩并不重要。但是一旦我有了一个工作流程，我就会用大型数据集加载它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:18:54.443

如果 snappy 的共享库 (.so) 不在`LD_LIBARAY_PATH`/上，您将看到此错误消息`java.library.path`。如果您将库安装在正确的位置，那么您应该不会看到上述错误消息。

`libhadoop.so`如果您确实将.so安装在与 hadoop 本机库（这看起来像是客户端的消息）。

您能否分享您的作业配置的一些详细信息（您在哪里配置输出格式以及相关的压缩选项）。

# java - 为这个 rand 生成器建议一些更优化的解决方案

> ID：10878039
> 
> 赞同：2
> 
> 时间：2012-06-04T07:55:43.947
> 
> 标签：java, algorithm, random

我有一个生成随机数的函数“generateRan”。此功能无法更改。

```
int generateRan() {
    Random num = new Random();
    return (1 + num.nextInt(100));
} 
```

我必须编写以下代码：

1.  随机打印数字 1-20。
2.  随机打印数字 1-200。

每个号码只能打印一次。

该功能可以使用任意次数。但它有点重，所以我想让代码更加优化。

这是我编码的内容：

```
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

public class Test {

    public static void main(String[] args) {
        List<String> list = new ArrayList();
        Test t = new Test();
        iniList(list, 20);

        for (Integer i = ((t.generateRan()) % 20); list.size() > 0; i = 1+((t
                .generateRan()) % 20)) {
            if (list.contains(i.toString())) {
                list.remove(i.toString());
                System.out.println(i);
            }
        }

        System.out.println("********");

        iniList(list, 200);

        for (Integer i = ((t.generateRan()%2)*100 + t.generateRan()) ; list.size() > 0; i = ((t.generateRan()%2)*100 + t.generateRan())) {
            if (list.contains(i.toString())) {
                list.remove(i.toString());
                System.out.println(i);
            }
        }

    }

    private static void iniList(List list, int i) {
        for (Integer k = 1; k <= i; k++) {
            list.add(k.toString());
        }
    }

    int generateRan() {
        Random num = new Random();
        return (1 + num.nextInt(100));
    }

} 
```

**目前 1-200 的代码不正确。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T08:01:55.940

> 每个数字只能打印一次

然后你需要做的就是创建`List<Integer>`整个范围的 a ，然后调用[`Collections.shuffle`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List%29).

```
private static void displayNumbers(int minInclusive, int maxInclusive) {
    List<Integer> list = new ArrayList<Integer>();
    for (int i = minInclusive; i <= maxInclusive; i++) {
        list.add(i);
    }
    Collections.shuffle(list);
    for (int value : list) {
        System.out.println(value);
    }
} 
```

就我个人而言，我*通常会*使用`minInclusive, maxExclusive`or的参数`minInclusive, count`，但对于您的情况，这种方式看起来可能更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T08:16:16.510

假设您必须使用您的 generateRan() 函数，否则按照指示使用 Collections.shuffle。

```
public static void main(String[] args) {
    List<Integer> list = new ArrayList();
    initList(list, 200);

    while (list.size() > 0) {
        int index = generateRan() % list.size();
        System.out.println(list.remove(index));
    }
}

public static void initList(List<Integer> s, int size) {
    for (int i = 1; i <= size; i ++)
        s.add(i);
}

public static int generateRan() {
    Random num = new Random();
    return (1 + num.nextInt(100));
} 
```

您将要打印的所有 int 添加到列表中，然后仅使用 random 选择要打印的其中一个。您的函数被调用 n 次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T08:07:36.920

我建议使用 Set 而不是 List，因为它可以更快地搜索重复项

```
Set<Integer> set = new HashSet<Integer>();
for(int i = 0; i < 20;) {
    Integer r = generateRan();
    if(set.add(r)) {
        System.out.println(r);
        ++i;
    }
} 
```

# android - ActionBarSherlock - 它如何在布局中的每个 xml 文件上创建标题？

> ID：10878040
> 
> 赞同：0
> 
> 时间：2012-06-04T07:55:46.677
> 
> 标签：android, actionbarsherlock

最近我在 Eclipse 中成功实现了 ActionBarSherlock Demos 示例。但是有一点我无法理解，这个库如何通过仅使用 LinearLayout 在 tab_navigation.xml 中自动创建带有一个图标和文本“ActionBarSharelock Demos”的标题

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="20dip">
</LinearLayout> 
```

这个库对我来说是新的，我很想知道，这个库是如何创建它的？

我在目标 api 15 上创建了一个新的 android 项目并将 ActionBarSherlock 库附加到它。然后我发现当我将它与 android 的演示示例项目进行比较时，我的新 android 项目中缺少一些文件。这些文件在下面列出。

```
1.pom.xml
2.bin/classes.dex
3.bin/jarlist.cache
4.bin/resources.ap_ 
```

此外，我在 Eclipse 上的活动文件中出现了一个新错误“R 无法解析为变量”。

如果您对我的问题有所了解，请分享您的观点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:23:20.183

使用最简单的示例：

```
public class Simple extends SherlockActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        setTheme(SampleList.THEME); //Used for theme switching in samples
        super.onCreate(savedInstanceState);
        setContentView(R.layout.text);
        ((TextView)findViewById(R.id.text)).setText(R.string.simple_content);
    }
} 
```

您所要做的就是让您的活动继承Sherlock 活动之一（例如，SherlockActivity、SherlockFragmentActivity）。

您可以使用 SherlockActivity 的方法对操作栏进行编程`getSupportActionBar()`，例如设置标题：`getSupportActionBar().setTitle( R.string.my_title );`

# .net - 变换矩形以创建深度效果

> ID：10878041
> 
> 赞同：1
> 
> 时间：2012-06-04T07:55:49.187
> 
> 标签：.net, wpf, xaml, blend

我想创建一个变换动画来改变 WPF 中矩形的形状。右上角和左上角必须拉在一起，如下图示例所示。

![在此处输入图像描述](../Images/bd4d2b72f3b9b523b05c8c88d04e2a82.png)

我应该使用什么变换属性来实现这种效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:34:35.043

您可以尝试使用 3D 动画来实现这一点，如果左右角缩小到相同的大小...您可以参考下面的更多详细信息..

[http://wpftution.blogspot.in/2012/05/3d-image-animation-in-wpf-using-blend-4.html](http://wpftution.blogspot.in/2012/05/3d-image-animation-in-wpf-using-blend-4.html)

有3D动画的资源..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:27:45.807

在表达式混合中：在旋转属性集中`X = -45`, `Y = 0`, `Z = 0`.

旋转属性可以在变换 --> 投影 --> 旋转下找到。

供您参考，您可以查看文章[使用 3D 工具在 Blend 中制作动画](http://www.silverlightbuzz.com/2009/10/14/using-the-3d-tools-to-animate-in-blend/)

# smtp - 使用 smtp.gmail.com 设置 couchbase 电子邮件警报

> ID：10878052
> 
> 赞同：2
> 
> 时间：2012-06-04T07:56:47.913
> 
> 标签：smtp, gmail, alert, couchbase, membase

有人成功为 gmail 帐户设置了来自 Couchbase 管理员的电子邮件警报吗？

我在 EC2 上安装了 membase 集群。我尝试使用端口 465 或 587 或 25 均未成功。

UI 中显示的日志信息量不是很大。有人甚至可以指出在哪里可以找到此警报设置失败的详细日志吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T09:42:50.953

我在使用 gmail 帐户在 Couchbase 中获取电子邮件通知时也遇到了问题。实际上它是一个 Google Apps 帐户，免费版。

经过大量的头疼后，问题原来与两步身份验证有关。我试图让它使用的帐户启用了两步身份验证。

我用一个没有启用它的帐户尝试过它，它第一次工作。

我使用的设置是：

*   主机：smtp.gmail.com
*   港口：587
*   用户名：*完整的 GApps 电子邮件地址*
*   密码：*GApps 账号密码*
*   使用 TLS：选中
*   发件人电子邮件：与用户名相同
*   收件人：任何电子邮件地址

干杯，李

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:37:45.023

警报系统已在 Couchbase 2.0 中进行了扩展，为可能发现此问题的任何人留下了此处的文档链接：

[http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-admin-web-console-settings-alerts.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-admin-web-console-settings-alerts.html)

# php - 如果有这种可能性，在 php.ini 中的哪里或在哪里更改这些推导的 javascriptom 的编码

> ID：10878056
> 
> 赞同：1
> 
> 时间：2012-06-04T07:57:18.437
> 
> 标签：php, jquery, ajax

如果有这种可能性，在 php.ini 中的哪里或在哪里更改这些推导的 javascriptom 的编码

简单的问题在于所有站点都是在 utf-8 中推导出来的，并且通过 jquery (ajax) 接收的数据来到 cp-1251

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T08:09:19.667

您可以在 php.ini 中启用 UTF8

> > default_charset = "utf-8"

或者也可以在 PHP 页面中调用带有 UTF8 标头的标头：

> > header('content-type: text/html; charset: utf-8');

# java - 如何在 iReport 中修改分页？

> ID：10878059
> 
> 赞同：0
> 
> 时间：2012-06-04T07:57:51.940
> 
> 标签：java, jasper-reports, ireport

我想创建一个报告，该报告将根据输出报告的格式显示分页。如果我创建 PDF 报告，那么我需要分页，否则我想隐藏分页。有什么选择可以让我这样做吗？

谢谢！！

# delphi - FireMonkey 性能问题

> ID：10878064
> 
> 赞同：9
> 
> 时间：2012-06-04T07:58:13.320
> 
> 标签：delphi, firemonkey

我正在使用带有更新 4 修补程序 1 的 Delphi XE2

我的默认 FMX 应用程序状态非常缓慢，并且一旦出现冻结一段时间。例如：当我单击一个按钮时，整个应用程序会冻结几秒钟（但仅适用于该事件的第一次执行）。所以我认为这可能是 GPU 问题，并将我的默认**Dpr**文件编辑为；

```
uses
  FMX.Forms,  fmx.Types,..

{$R *.res}

begin
  Application.Initialize;

  GlobalUseHWEffects := False   ;
  GlobalUseDirect2D := False  ;
  GlobalUseDirect2DSoftware := False    ;
  GlobalUseGDIPlusClearType := True    ;
  GlobalDisableFocusEffect := True   ;

  Application.CreateForm(...);
  Application.Run;
end. 
```

现在它可以正常工作，没有任何问题，但是 CPU 使用率和以前一样（移动鼠标时为 25%）

然后我将我的代码修改为

```
 GlobalUseHWEffects := true  ;
  GlobalUseDirect2D := False  ;
  GlobalUseDirect2DSoftware := False    ;
  GlobalUseGDIPlusClearType := True    ;
  GlobalDisableFocusEffect := True   ; 
```

现在一切都很顺利，启动时间只有一点延迟，CPU 使用率非常低（0 - 2%）。（这就是我需要 Firemonkey 的原因）

现在所有控件都按预期工作，除了菜单栏，上述设置不适用于菜单栏，它正在使用默认行为（整个应用程序冻结几秒钟）。

我能做些什么来克服这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:06:08.330

**真正的问题在于一些 firemonkey Effects 和 Firemonkeys 默认设置**

默认`GlobalUseDirect2D = true`虽然 `GlobalUseHWEffects := true` 是性能问题的真正原因，启用两者都是在我的机器上同时使用 CPU 和 GPU。所以将其中之一设为 false。我建议您这样做`GlobalUseDirect2D = false`并`GlobalUseHWEffects := true`减少 CPU 的使用。

*`And now you will be also able to get improved fonts (best ever firemonkey can generate)`*

**并非所有客户都将拥有高端图形 GPU**

我使用的是英特尔移动图形芯片，所以我认为我的芯片不会具备支持所有 firemonkey 效果的所有功能。后面的***代码和注释***可以在 FMX.Types 中看到

```
// On low-end hardware or mobile bitmap effects are slowly
  GlobalDisableFocusEffect: Boolean = False; 
```

但我不明白为什么他们默认设置为**假**。（所以启用和禁用取决于客户端 GPU 功能）

通过**GlobalDisableFocusEffect**，您将无法再使用 Effects（例如：**outergloweffect**）....但是，这句话仍然不再正确....

通过**GlobalDisableFocusEffect**并非所有效果都被禁用，

例如

1.  Windows 样式中按钮样式中的 Tinnerglow 效果是冻结的原因
2.  深色样式中 headeritemstyle 中的 Tinnerglow 效果是冻结的原因。

可能有很多例子......

因此，在我的场景中，我被迫从样式中删除所有效果..，Blend，Dark 样式效果更好，因为它们使用的 TEffects (?) 更少，但现在我拥有更好的 GUI 和更好的性能（我觉得 Blend 和深色样式看起来比原生 UI 更酷）

# ant - 检测到哈德逊严重碰撞

> ID：10878067
> 
> 赞同：0
> 
> 时间：2012-06-04T07:58:24.207
> 
> 标签：ant, hudson, command, prompt

我在 hudson 所在的服务器上工作，我通过命令提示符运行它，当我使用旧凭据（用于登录服务器而不是用于 hudson）时，我没有退出 hudson，并且管理员关闭了服务器，当我的管理员将凭据更改为使用我的新帐户凭据登录服务器（以前使用其他帐户凭据登录），我使用新凭据登录并使用命令提示符重新启动 hudson 服务器，但在命令控制台中，hudson 将错误显示为“严重：检测到碰撞” timestamp='122324..', expected='111...'" 但是它正在运行项目，构建它，但它的状态没有显示在命令控制台中，这是 hudson 将其视为两个用户吗？什么是错误，以及如何解决？请帮帮我，请原谅我的错误解释。

感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:13:07.790

听起来您在同一个盒子上运行两个 Hudson 实例（可能是不同的用户）。

它更像是服务器管理问题（Windows 或 Unix）而不是 Hudson 问题。

# unit-testing - Java EE 测试策略

> ID：10878068
> 
> 赞同：3
> 
> 时间：2012-06-04T07:58:25.177
> 
> 标签：unit-testing, authentication, jakarta-ee, testing

Java EE 对我来说是一个新世界，我的经验是在嵌入式系统上，但我开始了一份新工作，我想知道是否有基于 Java EE 的 Web 应用程序可以遵循的测试过程。该领域通常采用哪种测试策略？

*   基本单元测试
*   功能测试
*   集成测试
*   系统测试、压力测试、负载测试……

.... Web 开发的每个测试阶段的范围是什么？由于涉及服务器代码和客户端代码，我不知道哪个是该领域的最佳方法。此外，还涉及几台机器：数据库、业务层、表示层、负载平衡器、CAS 身份验证、Active Directory...

每个阶段的最佳测试环境是哪个？使用生产CAS认证时，...

链接、书籍、简单的解释或其他类型的地址非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:43:06.297

在我看来，最好的测试框架是用于单元测试的 Junit。 [http://www.junit.org/](http://www.junit.org/) - 用于模拟对象，您将需要很多，例如在 j2ee 环境中模拟数据库、模拟服务和其他对象，以便能够单独测试。使用[http://www .jmock.org/](http://www.jmock.org/) , [http://code.google.com/p/mockito/](http://code.google.com/p/mockito/) , [http://www.easymock.org/](http://www.easymock.org/) - 用于验收和功能测试有 selenium [http://seleniumhq.org/](http://seleniumhq.org/)这个框架使您能够自动化您的测试。我建议您阅读有关一般测试和特别是 j2ee 环境测试的书籍。

```
http://www.manning.com/rainsberger/ 
http://www.amazon.com/Test-Driven-Development-By-Example/dp/0321146530
http://manning.com/massol/ 
http://manning.com/koskela/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T16:16:56.520

首先，无论你打算做什么测试，都要注意你的构建过程（一个好的起点是 maven 作为构建工具）

Junit（或 testng）几乎适用于所有事情（由于其简单性）

单元测试：对于模拟，我更喜欢 Mockito 而不是 jmock 或 easymock。

验收测试：关于 UI 测试，selenium 非常适合 Web 应用程序（如果您打算进行大量 UI 测试，请查看 PageObject 模式）。对于其他接口测试（如 webservice），soapui 是一个不错的起点。

集成测试：你会遇到中间件问题，主要是通过容器在java中解决。现在变得有趣了 :) 如果您在“真正的”JEE 中运行，那么这取决于它是否在 JEE6 之前或不是从 JEE6 开始，您有一个嵌入式容器（这确实简化了测试）。否则，请使用依赖注入框架（Spring，Guice，...）。

集成或验收测试的其他提示：

*   您可能需要模拟一些接口（看看 MOCO 来模拟基于 HTTP 的外部服务）。
*   还可以考虑一些嵌入式 servlet 容器（Jetty）来简化 web 测试。
*   配置和配置也可能是一个问题。例如：对于数据库，您可以使用“flyway”或“liquibase”自动执行此操作
*   数据库测试有两种方法：在每次测试后重置数据（参见 DBUnit）或在事务测试中（参见 Spring 测试示例）

# c - 如何读取可变参数函数参数？

> ID：10878069
> 
> 赞同：1
> 
> 时间：2012-06-04T07:58:44.100
> 
> 标签：c, pointers, variadic-functions

这是我的代码：

```
#include <stdio.h>

void add(int num, ...);

int main(void)
{
  int a=100, b=200, c=300;

  add(1, a);
  add(2, a, b);
  add(3, a, b, c);
  return 0;
}

void add(int num, ...)
{
  int *p=NULL;
  p=&num+1;
  printf("%x \n", p);
  if(num==1)
    {
      printf("%d \n", p[0]);
      printf("num is: %d \n", num);
    }
  else if (num==2)
    {
      printf("%d \n", p[0]+p[1]);
      printf("num is: %d \n", num);
    }
  else
    {
      printf("%d \n", p[0]+p[1]+p[2]);
      printf("num is: %d \n", num);
    }
} 
```

据我了解，`p`最初指向`a`，即 10。因此，它应该分别打印 10、30、60。尽管如此，它打印

```
6786db50 
1736891264 
num is: 1 
6786db50 
1736924031 
num is: 2 
6786db50 
1867401241 
num is: 3 
```

是`p`指向错误的地址吗？如何正确读取传递为的参数`...`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T08:00:18.883

这不是您使用可变参数函数调用的方式，您需要使用`va_*`函数调用来提取参数。

请参阅[http://unixhelp.ed.ac.uk/CGI/man-cgi?stdarg+3](http://unixhelp.ed.ac.uk/CGI/man-cgi?stdarg+3)或[http://en.wikipedia.org/wiki/Variadic_function#Variadic_functions_in_C.2C_Objective-C.2C_C.2B.2B.2C_and_D](http://en.wikipedia.org/wiki/Variadic_function#Variadic_functions_in_C.2C_Objective-C.2C_C.2B.2B.2C_and_D)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T08:06:52.100

您的特定示例***可能有效，也可能无效***（在我的系统上按您预期的方式工作）。您`p=&num+1;`可以访问下一个元素。在堆栈上升的假设下，这很好，而您的架构可能并非如此。在许多系统上，达到一定限制的变量是在寄存器上传递而不是在堆栈上传递！所以你的假设完全错误。另请注意，变量可以从左到右或以其他方式推入堆栈。它没有被标准指定。

因此***，您不应根据假设工作***，而应使用专为此特定用途设计的[函数。](http://pubs.opengroup.org/onlinepubs/7908799/xsh/stdarg.h.html)

# blackberry - 黑莓无需 BES 即可访问管理 API

> ID：10878073
> 
> 赞同：3
> 
> 时间：2012-06-04T07:59:29.443
> 
> 标签：blackberry

我必须禁用大容量存储。我可以在不使用 BES 的情况下使用管理 API 执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:43:26.197

不可以。管理 api 用于 BES，因此如果您想控制设备，则需要 bes 服务器，否则您必须构建自定义应用程序。

# asp.net - 如何避免在自动重新加载的asp.net中将我的复选框链接为默认值？

> ID：10878076
> 
> 赞同：0
> 
> 时间：2012-06-04T07:59:46.810
> 
> 标签：asp.net

我的asp.net 网站有问题。

我在这个网站上有一个复选框，默认选中。然后我有一个每分钟重新加载页面的javascript代码。

现在的问题：当我取消选中复选框并且页面重新加载时，它会再次被选中。但我想避免这种情况，我希望复选框具有与重新加载之前相同的选中/未选中属性。

这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:04:57.983

当复选框的状态发生变化时，您需要通知您的服务器（再次使用 javascript）。

此信息将被保存（即，如果您使用 Web 表单、数据库、会话，则在视图状态中）并将在处理后续请求时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:12:19.923

当页面从 javascript 重新加载时，您可以在查询字符串中发送复选框的当前状态（选中/取消选中）。

在 C# 页面加载中：

```
if(!string.IsNullOrWhiteSpace(Request.QueryString("states")))
{
  SetCheckBoxes(Request.QueryString("states"));
} 
```

# apache - 为什么谷歌分析和drupal中的node_counter有很大差异

> ID：10878082
> 
> 赞同：0
> 
> 时间：2012-06-04T08:00:17.137
> 
> 标签：apache, drupal, nginx, google-analytics

我有 Drupal 6.25。我在 node_counter 和谷歌分析之间有一些非常相关的东西。但最近我开始有了很大的不同。例如 node_counter 显示我对一篇文章有​​ 1247 次浏览，而 GA 显示 30 次浏览。我尝试刷新页面，node_counter 中的计数器增加了 1。我网站上唯一的新变化是我将我的网络服务器从 apache 切换到了 nginx。知道什么可能导致 Drupal 统计数据和 Google 分析之间出现如此大的差异吗？
谢谢你的帮助

# c# - C# 代码的行为

> ID：10878089
> 
> 赞同：-1
> 
> 时间：2012-06-04T08:00:51.660
> 
> 标签：c#, post-increment

> **可能重复：**
> [在 C# 中解释后增量](https://stackoverflow.com/questions/9863736/explaining-post-increment-in-c-sharp)

考虑以下 C# 代码：-

```
int i = 2;
i = i++;
Console.WriteLine(i); 
```

我得到的输出为`2`. 为什么没有效果`i = i++`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:02:35.003

根据您放置`+`-operators 的位置，分配的值在之前或之后递增：

```
i = ++i; 
```

这种方式`i`是在分配之前进行计数的。

```
i = i++; 
```

这种方式`i`在分配后进行计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:02:49.367

因为`=`运算符优先。

MSDN：[运算符优先级和关联性。](http://msdn.microsoft.com/en-us/library/aa691323%28v=vs.71%29.aspx)

试试这个：

```
int i = 2;
i = ++i; // or write just ++i;
Console.WriteLine(i); 
```

# c++ - C ++中的年持续时间算法

> ID：10878090
> 
> 赞同：5
> 
> 时间：2012-06-04T08:00:58.073
> 
> 标签：c++, algorithm, duration

我正在制作一个需要`time_t`一年持续时间（in ）的程序。

在其他方面，`time_t`DD/MM/YYYY + 持续时间 = `time_t`DD/MM/YYYY+1

所以它可能并不总是 365 天（29/02/2012 将变为 28/02/2013）

这是我带来的算法：

```
if YEAR is leap than
    if we are before the 29th feb' than return 365+1 days
    else if we are the 29th feb' than return 365-1 days
    else return 365 days
else if YEAR+1 is leap than
    if we are before or the 28th feb' than return 365 days
    else return 365+1 days
else return 365 days 
```

在这里，一天是 60 * 60 * 24 秒

这个算法似乎有效。但我想知道是否有另一种方法可以在没有所有这些条件且只有 2 个可能的返回值的情况下执行此操作，或者只是一些“技巧”来优化事情。

我试图`tm_year`从`struct tm`这样的增加：

```
// t is the input time_t
struct tm Tm (*localtime(&t));
if (Tm.tm_mon == 2 && Tm.tm_mday == 29) --Tm.tm_mday;
++Tm.tm_year;
return mktime(&Tm) - t; 
```

但结果不是我想要的，我得到了 -1 小时，或者 -25 ......

我想这是因为一年不完全是 365 * 24 * 60 * 60。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T08:34:21.990

我会为此使用[Boost](http://www.boost.org/)，因为它已经实现了您正在寻找的内容：

```
#include <iostream>
#include <boost/date_time/gregorian/gregorian_types.hpp>
namespace date = boost::gregorian;

int main() {
   date::date_period dp(date::date(2012, 6, 4), date::date(2013, 6, 4));
   long days = dp.length().days();
   std::cout << "Days between dates: " << days << std::endl; 
```

}

如果您想要更精确，那么您也可以使用`posix_time`Boost ：

```
namespace ptime = boost::posix_time;

...

ptime::ptime t1(date::date(2012, 6, 4), ptime::hours(0));
ptime::ptime t2(date::date(2013, 6, 4), ptime::hours(0));

ptime::time_duration td = t2 - t1;
std::cout << "Milliseconds: " << td.total_milliseconds() << std::endl; 
```

通常`time_t`以秒为单位。因此，您只需要调用来`td.total_seconds()`获取您正在寻找的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T08:54:29.753

```
if YEAR is leap than
    if we are before the 29th feb' than return 365+1 days
    else if we are the 29th feb' than return 365-1 days
    else return 365 days
else if YEAR+1 is leap than
    if we are before or the 28th feb' than return 365 days
    else return 365+1 days
else return 365 days 
```

简化为：

```
if (YEAR is leap)
    if (< 29th Feb) return 365+1
    if (= 29th Feb) return 365-1
else if (YEAR+1 is leap)
    if (> 29th Feb) return 365+1

return 365 
```

但是你为什么要这样做呢？拥有可读的代码比“技巧”优化要好得多。

正如@betabandido 所建议的那样，类似的东西`date(year+1, mon, day) - date(year, mon, day)`会更简单，更具可读性并且能够处理闰年、闰秒和[九月缺少 11 天](http://www.genealogytoday.com/columns/everyday/030902.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T08:36:46.237

一个太阳年的长度不是一个固定的数字。[公历](http://en.wikipedia.org/wiki/Leap_year#Gregorian_calendar)发明了一种补偿闰年的方法，这种方法并不完全精确。那就是“如果一年可以被4整除，则为闰年，除非它可以被100整除，但如果它可以被400整除，则再次为闰年。

我们在伊朗有一个[更精确的日历](http://en.wikipedia.org/wiki/Jalali_calendar#In_Iran)，其中岁月改变了第二个地球围绕太阳转了一圈。在同一个链接中，您可以看到平均太阳年为 365.2422 天，春分之间的平均间隔为 365.2424 天。

在[此链接](http://en.wikipedia.org/wiki/Tropical_year#Length_of_tropical_year)中，以秒为单位提供了有关太阳年（热带年）长度的更多详细信息。

# java - Eclipse - 记录并将移动和重命名重构应用到另一个工作区

> ID：10878091
> 
> 赞同：4
> 
> 时间：2012-06-04T08:01:05.373
> 
> 标签：java, eclipse, refactoring, automated-refactoring

我目前正在一个大型 Java 项目中工作，其中有很多由不同团队开发的子模块。其中一些团队正在构建“框架”，其他团队正在构建基于框架的“应用程序”。

当框架人员移动或重命名一个类时，应用程序人员在使用重构的框架类的任何地方都会遇到编译错误。**Eclipse** ( **Galileo Release** )中有没有办法记录更改并更新另一个工作区中的引用？

到目前为止，我尝试的是在重命名重构期间创建重构脚本，但是当我尝试将该脚本应用到另一个工作区时，它会失败并显示`The refactoring 'Rename Type' (org.eclipse.jdt.ui.rename.type) cannot be performed, since its input 'xxx.TestClass" does not exists`. 好吧，它不存在（不再）好吧，但我想要的是`xxx.TestClass`我项目中的所有引用都更改为`xxx.MyRenamedTestClass`. Eclipse 中有没有办法使用内置功能或现有插件来做到这一点，还是我必须自己编写一个？

谢谢你的帮助！

编辑：到目前为止，我发现“迁移 JAR”-Plugin 提供了我正在寻找的功能，尽管我们使用 Maven 而不是 Eclipse 构建我们的 JAR。我现在正在浏览源代码以找出我可以重用的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:11:51.017

回答我自己的问题以在这里结束。

最简单的方法是使用重构，它使用调用`Migrate JAR File...`中的重构脚本。您可以通过在 Eclipse 中使用自动获取包含此内容的 JAR 。我们使用 Maven 构建，因此只需将其放入 JAR 中的适当位置即可。`META-INF``REFACTORINGS.XML``Export JAR``Refactoring->Create Script...`

Migrate JAR 执行的 JDT 内部代码为临时源文件夹中的源类创建 Stub，因此它实际上首先执行重构，然后更新引用。用户永远不会看到这些临时文件。

# android - android facebook授权：未调用onActivityResult

> ID：10878095
> 
> 赞同：2
> 
> 时间：2012-06-04T08:01:26.263
> 
> 标签：android, facebook, authorize

我建立了一个与 facebook 连接的 android 应用程序，它有一个按钮。当我单击按钮时，该应用程序将调用 facebook.authorize 来请求许可。从请求权限屏幕返回后，它应该调用 onActivityResult 方法。但就我而言，它从不调用此方法。我发现了一些类似的问题，但所有解决方案都不能解决我的问题。这是用户单击按钮时的代码：

```
facebook.authorize(this, new String[] { "read_friendlists" }, 
                new DialogListener() {
                    public void onComplete(Bundle values) {
                        Log.v("complete", "complete");
                        hideNeedLoginView();
                    }

                    public void onCancel() {
                        Log.v("cancel", "cancel");
                        hideNeedLoginView();
                    }

                    public void onFacebookError(FacebookError e) {
                        // TODO Auto-generated method stub
                        Log.v("error", "error");
                    }

                    public void onError(DialogError e) {
                        // TODO Auto-generated method stub
                        Log.v("error", "error");
                    }
                }); 
```

和 onActivityResult 方法：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    facebook.authorizeCallback(requestCode, resultCode, data);
} 
```

由于未调用 onActivityResult，因此也未调用所有 onComplete 或 onCancel 方法。Intent.FLAG_ACTIVITY_NO_HISTORY 没有定义，所以这不是问题（这是在 facebook 页面上提到的）。如果我将 activityCode 设置为 Facebook.FORCE_DIALOG_AUTH，那么当我单击按钮时，应用程序没有响应。我在设备上安装了 facebook 应用程序。授权后怎么调用onActivityResult方法？请有人帮我解决这个问题，因为我在任何地方都找不到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:14:55.247

希望以下代码对您有所帮助。

```
private static final String[] PERMISSIONS = new String[]
    { "publish_stream", "read_stream", "offline_access" };

mFacebook = new Facebook(APP_ID); 
mFacebook.authorize(this, PERMISSIONS,new LoginDialogListener());

private final class LoginDialogListener implements
            com.facebook.android.Facebook.DialogListener
    {

        /**
         * Called when the dialog has completed successfully
         */
        public void onComplete(Bundle values)
        {
            // Process onComplete
            Log.d("FB Sample App", "LoginDialogListener.onComplete()");
            // Dispatch on its own thread
            mHandler.post(new Runnable()
            {
                public void run()
                {
                    mText.setText("Facebook login successful. Press Menu...");
                }
            });
        }

        public void onFacebookError(FacebookError error)
        {
            // Process error
            Log.d("FB Sample App", "LoginDialogListener.onFacebookError()");
        }

        public void onError(DialogError error)
        {
            // Process error message
            Log.d("FB Sample App", "LoginDialogListener.onError()");
        }

        public void onCancel()
        {
            // Process cancel message
            Log.d("FB Sample App", "LoginDialogListener.onCancel()");
        }
    } 
```

# iphone - 设置 self.navigationItem.rightBarButtonItem 背景图片导致崩溃

> ID：10878096
> 
> 赞同：0
> 
> 时间：2012-06-04T08:01:28.030
> 
> 标签：iphone

我使用下面的代码来设置 self.navigationItem.rightBarButtonItem 的背景图片

```
[self.navigationItem.rightBarButtonItem 
                     setBackgroundImage: [UIImage imageNamed:@"top_button.png"]
                     forState:UIControlStateNormal 
                     barMetrics:UIBarMetricsDefault]; 
```

会导致崩溃，

我使用 Xcode 4.3，部署目标 4.0，iPhone os 4.3.3

它在模拟器 5.1 上运行良好，但在设备上崩溃了

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:07:17.147

该方法仅适用于运行 iOS 5.0 的设备。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBarButtonItem_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBarButtonItem_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:08:07.973

您尝试使用的方法仅适用于 iOS >= 5.0。

在模拟器中，您使用的是 >= 5.0 的 iOS 5.1.1，因此它可以工作。

在没有此支持的目标设备上 os = 4.0/4.3.3。

要么您需要在目标设备 iOS >= 5.0 上进行测试，要么您需要放弃对 iOS 设备 < iOS 5.0 使用此方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T08:08:26.733

在 iOS 5.0 及更高版本中可用。

# security - Drupal 安全

> ID：10878098
> 
> 赞同：0
> 
> 时间：2012-06-04T08:01:42.490
> 
> 标签：security, drupal-6

Drupal 使用各种技术来确保网站安全。但是有什么错误，在编程时会使drupal变弱，这样我就可以在编写自定义模块或制作.tpl文件时避免它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:39:07.170

我不确定是否有所有错误的列表，但这里列出了正确的操作列表，其中包括一些错误：

*   Drupal 站点的[安全配置](http://drupal.org/security/secure-configuration)
*   [编写安全代码](http://drupal.org/writing-secure-code)，这对理解也很有价值，因此您可以审核您安装的模块。
*   [破解 Drupal](http://crackingdrupal.com/)唯一一本关于 Drupal 安全性的书，有实体版或 Kindle 版（披露：我是作者；））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:28:36.377

你可能会犯很多错误，但我最喜欢的错误之一是：

```
$global user;
if ($user->uid = 1)
{
    //do some magic
} 
```

代替

```
$global user;
if ($user->uid == 1)
{
    //do some magic
} 
```

# java - 解析错误的 XML

> ID：10878101
> 
> 赞同：1
> 
> 时间：2012-06-04T08:01:46.860
> 
> 标签：java, xml, xml-parsing, inputstream

我有个问题。我正在调用一个返回 XML 的链接。我必须解析这个 xml，但 xml 格式不正确。xml如下所示：

```
<string>
    <?xml version="1.0" encoding="utf-16" ?>
    <tag1>TAG1</tag1>
    <tag2>TAG2</tag2>
    <tag3>TAG3</tag3>
    <tag4>TAG4</tag4>
</string> 
```

我别无选择，只能以任何方式解析这个错误的 xml。
我正在获取 InputStream，这个 InputStream 可以即时更改吗？

上述问题的任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:04:07.867

如果您需要解析某种语言的文本，第一步是定义您打算解析的语言。到目前为止，您只为我们提供了该语言文本的一个示例。我们无法知道您可能想要解析的其他“错误 XML”：例如，您是否想要解析

```
<?xlm vresion="1,0 decoding="utf-9">a<b>c 
```

也许？

一旦你定义了你希望你的程序接受的语言，你就可以开始为它编写一个解析器。如果该语言与 XML 相当接近，那么一个合理的策略可能是让您的解析器将文本转换为 XML，然后解析 XML。

如果您的语言和 XML 之间的唯一区别是您希望允许 XML 声明出现在任何地方，并且如果您不太关心“边缘情况”，例如保留任意注释和 CDATA 部分的内容，那么一个合理的策略是预处理文件替换所有出现的`<?xml`by `<?xxml`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:06:35.417

如您所知，java 流框架使用包装器（装饰器）模式。Streams 可以包装其他流并添加一些特定的功能。你也可以遵循这个模式。看看`BufferedInputStream`。您可以实现类似的东西，甚至可能继承`BufferedInputStream`。您的流将删除`<?xml version="1.0" encoding="utf-16" ?>`“”中无效位置的模式`XML`。因此，生成的流将是可以被常规 XML 解析器解析的正确 XML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T08:28:15.430

当您收到`xml`解析之前的内容时，只需查找以以下开头的行：

```
<?xml ... 
```

并删除此行。
在此之后，您可以将普通`xml`解析器与新的`xml`.

您可以在一些（如果需要）的帮助下将 apache 的库与 Java 一起使用，以在将文件输入到解析器之前从文件*中*删除`IOUtils`不需要*的*行。`String#replaceAll``regex``xml`

# python - django 中的 urls.py 正则表达式评估顺序是什么？

> ID：10878103
> 
> 赞同：8
> 
> 时间：2012-06-04T08:01:59.323
> 
> 标签：python, regex, django-urls

我对 urls.py 中的正则表达式有一些问题（我是 django 的初学者以及一般的正则表达式）

这是我原来的 urls.py

```
url(r'^name/(?P<name>\w+)/$', 'course.views.name'),
url(r'^', 'course.views.index'), 
```

我试图用这个来访问它：

```
http://127.0.0.1:8000/name/blah/ 
```

我的观点如下：

```
def index(request):
    return HttpResponse("Hello, sam. You're at the course index.")

def name(request, name):
    return HttpResponse("Hello, %s. You're at the course index." % name) 
```

我得到的结果是，无论我给出什么输入，我都会定期获得“索引”函数，而不是“名称”函数。我认为问题出在第一个正则表达式上。

但是后来，我将第二个更改为：

```
url(r'^$', 'course.views.index'), 
```

这正是我认为的工作方式！

我知道“$”表示行尾，但**不应该首先评估第一个正则表达式吗？这些表达式匹配的顺序是什么？**

**向每个网址添加“$”并不是什么大不了的事，但我想了解我为什么将它放在那里。**

我正在使用 Django1.4 和 Python 2.7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T08:17:33.833

阅读 Django[文档](https://docs.djangoproject.com/en/dev/topics/http/urls/)

> Django 如何处理请求
> 
> 当用户从 Django 支持的站点请求页面时，系统遵循以下算法来确定要执行的 Python 代码：
> 
> 1.  Django 确定要使用的根 URLconf 模块。通常，这是 ROOT_URLCONF 设置的值，但如果传入的 HttpRequest 对象具有名为 urlconf 的属性（由中间件请求处理设置），则将使用其值代替 ROOT_URLCONF 设置。
> 2.  Django 加载该 Python 模块并查找变量 urlpatterns。这应该是一个 Python 列表，采用函数 django.conf.urls.patterns() 返回的格式。
> 3.  Django 按顺序遍历每个 URL 模式，并在与请求的 URL 匹配的第一个模式处停止。
> 4.  一旦其中一个正则表达式匹配，Django 就会导入并调用给定的视图，这是一个简单的 Python 函数。视图被传递一个 HttpRequest 作为它的第一个参数，并且在正则表达式中捕获的任何值作为剩余参数。
> 5.  如果没有匹配的正则表达式，或者在此过程中的任何时候引发异常，Django 调用适当的错误处理视图。请参阅下面的错误处理。

它说`3\. Django runs through each URL pattern, in order, and stops at the first one that matches the requested URL.`所以我认为这是一个错误。

您应该添加`$`每个 url 模式，除非[`Including other URLconfs`](https://docs.djangoproject.com/en/dev/topics/http/urls/#including-other-urlconfs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T08:21:35.073

你是对的，[django doc](https://docs.djangoproject.com/en/dev/topics/http/urls/)告诉你：

> Django 如何处理请求
> 
> 当用户从 Django 支持的站点请求页面时，系统遵循以下算法来确定要执行的 Python 代码：
> 
> 1.  Django 确定要使用的根 URLconf 模块。通常，这是 ROOT_URLCONF 设置的值，但如果传入的 HttpRequest 对象具有名为 urlconf 的属性（由中间件请求处理设置），则将使用其值代替 ROOT_URLCONF 设置。
> 2.  Django 加载该 Python 模块并查找变量 urlpatterns。这应该是一个 Python 列表，采用函数 django.conf.urls.patterns() 返回的格式。
> 3.  Django 按顺序遍历每个 URL 模式，并在与请求的 URL 匹配的第一个模式处停止。
> 4.  一旦其中一个正则表达式匹配，Django 就会导入并调用给定的视图，这是一个简单的 Python 函数。视图被传递一个 HttpRequest 作为它的第一个参数，并且在正则表达式中捕获的任何值作为剩余参数。
> 5.  如果没有匹配的正则表达式，或者在此过程中的任何时候引发异常，Django 调用适当的错误处理视图。请参阅下面的错误处理。

这也是[另一个 SO 帖子](https://stackoverflow.com/questions/4315048/django-url-pattern)建议解决另一个 URL 评估问题的方法。

# php - SVN：树冲突-“本地删除，更新时传入编辑”何时发生？

> ID：10878109
> 
> 赞同：0
> 
> 时间：2012-06-04T08:03:02.290
> 
> 标签：php, svn, tortoisesvn, directory, conflict

**我做了什么 ：**

1.  执行`svn up`
2.  将文件夹从 重命名`foo`为`bar`
3.  再次执行`svn up`并得到了冲突：`local delete, incoming edit upon update`

**但为什么 ？**

*   我做了`svn log -v`，发现没有提交帖子`step 1`
*   所以，在那种情况下，svn 应该明白我正在重命名`foo`为`bar`
*   如果没有其他人对 进行更改，为什么要引发冲突`foo`？

请解释svn如何看待这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:07:54.770

原因：SVN 不知道你重命名了目录。与此同时，有人编辑了目录中的文件，SVN 正试图找到它以进行更新。要正确重命名目录：在本地将其重命名为旧名称，然后运行`svn rename`命令（执行`svn rename --help`以获取更多信息）。您不必立即承诺。

请注意，从**BASE**`svn log`版本开始打印日志- 即您的工作副本的最后更新版本，因此您需要真正查看是否有人更改了它。**`svn log foo@HEAD`**

 *** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-04T08:18:42.853

要重命名目录，您必须使用 svn rename 命令。如果你想恢复你的目录：删除它（右键单击 -> 删除）并执行 svn up**

# blackberry - 如何在黑莓中创建小部件？

> ID：10878112
> 
> 赞同：0
> 
> 时间：2012-06-04T08:03:16.110
> 
> 标签：blackberry, widget, field

这是我的自定义布局，与 android 相同`linear layout`

```
public class Custom_TopField extends VerticalFieldManager {
    private static final int FIELD_HEIGHT = 70;

    private String _text;

    Custom_TopField(int color, String text) {
        super(Manager.NO_VERTICAL_SCROLL);
        _text = text;

        Background background = BackgroundFactory.createSolidBackground(color);
        setBackground(background);
    }

    protected void sublayout(int width, int height) {
        width = Math.min(width, getPreferredWidth());
        height = Math.min(height, getPreferredHeight());
        setExtent(width, height);
    }

    public int getPreferredHeight() {
        return FIELD_HEIGHT;
    }

    public int getPreferredWidth() {
        return Display.getWidth();
    }

    public void paint(Graphics graphics) {
        int rectHeight = getPreferredHeight();
        int rectWidth = getPreferredWidth();

        Font font = Font.getDefault().derive(Font.BOLD, 65);
        graphics.drawRect(0, 0, rectWidth, rectHeight);
        graphics.drawText(_text, rectWidth / 2, 10);
        graphics.setFont(font);
        graphics.setColor(Color.WHITE);
        super.paint(graphics);
    }
} 
```

输出=背景红色和字体=黑色

我想要的是背景红色，字体白色，字体大小 40。

我也想知道如何以编程方式创建小部件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:38:17.507

要将字体设置为白色并将大小设置为 40，请按如下方式更改绘制：

```
public void paint(Graphics graphics) {
    int rectHeight = getPreferredHeight();
    int rectWidth = getPreferredWidth();

    Font font = Font.getDefault().derive(Font.BOLD, 40);
    graphics.setColor(Color.WHITE);
    graphics.setFont(font);
    graphics.drawRect(0, 0, rectWidth, rectHeight);
    graphics.drawText(_text, rectWidth / 2, 10);
    super.paint(graphics);
} 
```

# jquery - jquery在输入焦点上向父级添加类

> ID：10878113
> 
> 赞同：14
> 
> 时间：2012-06-04T08:03:26.917
> 
> 标签：jquery, html, css

我有一个联系表格。我想在 input:focus 上向输入框的父 div 添加类。这是[小提琴](http://jsfiddle.net/nEHzn/)。我希望不仅输入框而且 div 背景颜色应该在输入焦点上变为紫色。

**标记：**

```
<div class="round">
    <div class="round_label">name</div>
    <input type="text" class="round_text">
</div> 
```

**Javascript：**

```
jQuery(document).ready(function($) {
    $(".round_text:focus").parent().css('background', '#8b66ac');
    $('.round_text:focus').parent().css('background-color', 'red');
}); 
```

**CSS：**

```
.round {
    background: none repeat scroll 0 0 #F3F3F3;
    border-radius: 30px 30px 30px 30px;
    border-top: 1px solid #B2B2B2;
    height: 50px;
    padding-left: 20px;
    width: 440px;
}
.round_text:focus {
    background: none repeat scroll 0 0 #8b66ac;
}
.round_label {
    border-right: 1px solid #D1D1D1;
    color: #B6B6B6;
    float: left;
    font-size: 16px;
    height: 40px;
    padding-top: 10px;
    width: 156px;
}
.round_text {
    background: none repeat scroll 0 0 #F3F3F3;
    border: medium none;
    color: #424242;
    float: left;
    height: 50px;
    width: 240px;
} 
```

* * *

另外，你能帮我吗，好像我需要添加两个属性，例如：

```
$(".round_text").focus(function(){
       $(this).parent().css('background', '#8b66ac','color','#fff');

  }).blur(function(){
       $(this).parent().css('background', /*color*/);
  }) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-04T09:27:03.483

您可以改为添加类并给出样式

```
jQuery(document).ready(function($) {

 $(".text").focus(function(){
   $(this).parent().removeClass("round");
   $(this).parent().addClass("bluebg");

  }).blur(function(){
       $(this).parent().removeClass("bluebg");
   $(this).parent().addClass("round");
  })

});    

.bluebg {
background: none repeat scroll 0 0 #8b66ac;
color:#623886;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-04T08:08:42.950

使用焦点事件

```
 $(".round_text").focus(function(){
       $(this).parent().css('background', '#8b66ac');

  }).blur(function(){
       $(this).parent().css('background', /*color*/);
  }) 
```

编辑：使用 toggleClass() 的替代解决方案

CSS

```
.round_text:focus, .round.is_focused {
     background: none repeat scroll 0 0 #8b66ac;
} 
```

JS

```
$(".round_text").on('focus blur', function(){
     $(this).parent().toggleClass('is_focused');
}) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-04T08:07:12.747

试试这个

```
 $("input").on("focus",function(){
    $(this).parent().addClass("any_class").css("background","purple");
    }); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-04T08:09:45.817

如果我的问题是正确的，

您正在选择`focused`元素，但您需要`div`在`focus`事件中更改父级的 css。

做这个，

```
jQuery(document).ready(function($) {

    $(".round_text").focus(function(){
        $(this).parent().css('background', '#8b66ac');
    })
}); 
```

[小提琴](http://jsfiddle.net/6BcAM/1/)

# asp.net - 在 Infragistics GridView 中显示子节点

> ID：10878115
> 
> 赞同：0
> 
> 时间：2012-06-04T08:03:36.060
> 
> 标签：asp.net, .net, infragistics

我已经实现了一个雇用的 ultrawebgrid。它按预期工作。它将像，顶行有一个“+”图标，当用户单击“+”时，它将显示子行。所有这些工作都很好。

当网格呈现它隐藏子节点时，它只会在用户单击“+”时打开。我希望网格默认显示所有子节点。我怎样才能得到那个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:48:36.617

要以编程方式扩展 UltraWebGrid 中的所有节点，您可以使用此行

```
Me.UltraWebGrid1.ExpandAll() 
```

# jquery - 使用 jquery 调用 webservice 并重定向到下一页而无需等待

> ID：10878117
> 
> 赞同：0
> 
> 时间：2012-06-04T08:03:40.883
> 
> 标签：jquery, asp.net, web-services

我有一个非常耗时的功能要执行。我想调用函数并重定向到下一页而不等待函数调用的结果，我现在通过调用 web 服务表单 jquery 来做到这一点，如下所示：

```
function InitiateService(option) {   
 $.ajax({
    url: "WebserviceTrigger.aspx?option=" + option,
    type: "POST",
    dataType: "html",
    cache: false,
    success: function(html) {             
    window.location = "BroadCast.aspx";
    }
}); 
```

但这样它会等待结果，然后重定向到下一页。我想在调用服务后立即重定向到下一页。我怎样才能做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:06:04.173

在这种情况下，一旦触发 Ajax，将重定向移到您的成功之外，控件将执行您的重定向位置，它不会等待 ajax 请求完成。

```
function InitiateService(option) {   
     $.ajax({
        url: "WebserviceTrigger.aspx?option=" + option,
        type: "POST",
        dataType: "html",
        cache: false,
        success: function(html) {             

        }
    });

    window.location = "BroadCast.aspx"; // move it outside success 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:32:42.477

您可以使用`async`ajax 请求选项来使您的代码同步。默认情况下它将是`true`. 你可以做到`false`。`'async':false`

```
function InitiateService(option) {   
     $.ajax({
        url: "WebserviceTrigger.aspx?option=" + option,
        type: "POST",
        async: false,
        dataType: "html",
        cache: false,
        success: function(html) {             

        }
    }); 
```

# java - 在jar中创建文件

> ID：10878125
> 
> 赞同：0
> 
> 时间：2012-06-04T08:04:21.580
> 
> 标签：java, jar, pdf-generation

在我的程序中的某个时刻，我正在使用 iText 创建一个 pdf 文件。此文件已创建，因此人们可以看到它也添加到我的数据库中。它在 Eclipse 中工作得很好，但是当我制作一个可运行的 jar 时它不起作用。该文件未创建且未添加到数据库中。我不知道为什么它不能在罐子里工作。

```
 PdfWriter writer = PdfWriter.getInstance(document,
                new FileOutputStream(documentName.getName() + ".pdf")); 
```

///////

```
 File file = new File(document.getName() + ".pdf"); 
```

有什么建议吗？谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:07:25.393

尝试使用[FatJar](http://fjep.sourceforge.net/)创建 .jar这会将您正在使用的库添加到创建的 .jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:10:16.797

您正在使用相对文件路径名 (?)。因此，如果从 Eclipse 或 Jar 运行，您的文件可能会保存在不同的位置（文件夹）。

您的文件总是保存在 System.getProperty("user.dir") 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T08:16:53.747

试着这样做：

```
PdfWriter writer = PdfWriter.getInstance(document,
                new FileOutputStream("C:\\some_file.pdf")); 
```

并检查文件是否作为some_file存在于c驱动器上。我相信会的。另外，我不知道文档是什么类型的对象，但它可能包含返回绝对路径的方法。

编辑：
如果您在一个程序中再次使用该文件，我会这样做：

```
File file = new File(document.getName() + ".pdf");
PdfWriter writer = PdfWriter.getInstance(document,
                new FileOutputStream(file)); 
```

甚至

```
String path = "some/safe/path/maybe/provided/by/user"; // in settings or sth
File file = new File(path+document.getName() + ".pdf");
PdfWriter writer = PdfWriter.getInstance(document,
                new FileOutputStream(file)); 
```

# prolog - 如何在prolog中实现if-then-else

> ID：10878127
> 
> 赞同：1
> 
> 时间：2012-06-04T08:04:24.997
> 
> 标签：prolog

我已经尝试了很多东西，但我找不到如何在 prolog 中实现以下愿望。

```
if list is empty
        call foo function
else
        do nothing 
```

我做了什么：

```
list = [] -> foo(...) 
             ;
             fail. 
```

但是，它不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T08:08:27.537

`fail`并不意味着“什么都不做”，而是“失败（和回溯）”。

您需要`true`改用：

```
( List == [] -> foo(...) ; true ), 
```

此外，`List`应该是一个变量，所以使用大写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:45:35.647

Another, perhaps more idiomatic, way to write this would be

```
% foo_if_empty(?List)  call foo if list is empty
foo_if_empty([]) :- !,foo(...).
foo_if_empty(_). 
```

What my code does is to unify with the first clause if list is empty.

If so, we do a cut. If foo fails, we don't want mypred to succeed. So we don't want to do the second clause. The cut eliminates that possiblity.

Now, if we don't unify with the first clause we'll certainly unify with the second. And it does nothing.

This is a much more idiomatic way of doing if/then/else in Prolog than using ->. -> is usually just used for situations where introducing another pred would obscure rather than enlighten the code, similar to the ?: operator in curly brace languages.

# c - argc 和 argv 在 Windows 中没用吗？

> ID：10878128
> 
> 赞同：2
> 
> 时间：2012-06-04T08:04:30.643
> 
> 标签：c, windows

在 linux 中，终端中的 argc 和 argv 计算参数。但在 Windows 中，我找不到放置第二个参数的地方。实际上，每次我运行程序时，它都会创建那个丑陋的黑色窗口，我什至没有机会给出任何论据。那么这两个变量在windows平台上是不是没用呢？或者还有其他使用方式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T08:06:40.487

如果你从命令提示符开始，你可以在那里给出参数。

> 开始菜单 -> 运行 -> “cmd” -> “MyProgram.exe arg1 arg2”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T08:07:22.613

该`int main(int argc, char**argv)`接口由*C*标准定义，因此如果 Windows 声称具有符合*ISO C99*的语言实现，它应该接受它们，至少在命令行上是这样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T08:07:06.327

如果您像在 linux 中一样从命令行启动程序，您仍然可以传递参数。此外，如果您创建 .exe 的快捷方式，您可以在其中放置参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T08:22:07.557

如果正确用作 main() 的参数，argc 和 argv 将非常有用。您正在做的错误（根据我的假设）可能是您双击可执行文件而不是在控制台中运行 exe，因此您没有机会输入第二个参数。

如果您有说明正确使用可执行文件的文档，则应遵循该文件，如果您有源代码，则检查 main 接受哪​​些参数，并在可执行文件名称后的命令提示符中提供它们。

`myexe.exe arg1 arg2`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-22T14:01:20.070

您也可以在 Windows 中使用它们。由于它需要命令行界面，您可以使用 cmd。只需编译您的程序并在 cmd 上运行您的程序，如下所示：“filename”“argument1”“argumrnt2”... 例如：[看这里](https://i.stack.imgur.com/DV1Cz.png)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-06-08T15:14:21.013

您可以在 Windows 中使用 argc argv[] 也可以将程序保存在 c 编译器的 bin 文件夹中，可能是 turbo c++ 或代码块或其他

我使用代码块然后打开你的 cmd 移动到 bin 文件夹使用 cd 命令然后使用命令 gcc *.c 编译你的程序它会给你一个名为 a.exe 的文件，就像在 linux 中它给出 a.out for run 你可以使用命令只是一个“argument1”“argument2”......或a.exe“argument1”“argument2”......

我更喜欢第一个显然每个人都喜欢简短的命令

第二个选项是通过下面给出的过程设置 c 的环境变量 1.复制编译的 bin 文件夹的地址 2.打开“这台电脑”的属性左侧按高级系统设置 3.按环境变量 4.在用户变量下按新 5.将变量名称作为路径 p 大写值粘贴从 bin 复制的地址按 ok ok ok 现在您可以将程序保存在任何地方并使用 cmd 编译和运行

__________****请享用****_________________

# c# - DataGridView KeyDown 出现两次

> ID：10878136
> 
> 赞同：0
> 
> 时间：2012-06-04T08:05:00.353
> 
> 标签：c#, winforms, datagridview, keydown

请问，这段代码有什么问题：

```
InitializeComponent();
this.KeyDown += new KeyEventHandler(dgvC_KeyDown);

private void dgvC_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyValue == 188)
    {
        System.Media.SystemSounds.Beep.Play();
        e.SuppressKeyPress = true;
    }
    if (e.KeyValue == (int)Keys.Delete)
    {
        MessageBox.Show("323");
    }
} 
```

MessageBox 出现两次！

如果按下逗号，我想执行一些代码，如果在 DataGridView (dgvC) 上按下 DelKey，我想执行另一个代码。

MessageBox 仅用于测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:01:44.777

您误解了 e.SupporessKeyPress 的目的。在您的 dataGridView_KeyDown 事件中，您使用；

```
e.SuppressKeyPress = true; 
```

仅防止在您的方法退出后将事件传递给**DataGridView 。**

在您的代码中，您还将此事件处理程序分配给**Form_KeyDown**事件，因此为 2 个*不同的控件*捕获该事件，并且 SuppressKeyPress 不会阻止它们都接收此事件。

您需要从代码中删除这一行，它将处理程序（我相信是错误的）分配给 Form_KeyDown 事件；

```
this.KeyDown += new KeyEventHandler(dgvC_KeyDown); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T08:55:54.130

看起来您已经订阅了两次 KeyDown 事件。

删除 .Designer.cs 文件中的行，e.SuppressKeyPress 仍然可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T08:58:01.753

尝试在 ifs 中插入。

```
e.Handler = true; 
```

这样事件就不会重复了。

# tabs - 如何在 CMD 中创建 %tab%

> ID：10878138
> 
> 赞同：6
> 
> 时间：2012-06-04T08:05:07.680
> 
> 标签：tabs, batch-file, cmd

我需要可靠的方法来为 Windows 和 XP 创建 %tab% （包含一个制表符）。

```
SET TAB=" " 
```

应该适用于 Windows 7（未测试），但不适用于 Win XP（已测试）。

这个

```
for /F "skip=4 delims=pR tokens=1,2" %%a in ( 'reg query hkcu\environment /v temp' ) do set TAB=%%b 
```

仅适用于 Win XP。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T10:13:35.357

您应该使用支持 TAB 字符而不将它们更改为空格的编辑器。
你应该重新排序引号，因为`set TAB=" "`你有一个包含三个字符的变量。
TAB 还包含引号。

```
set "TAB=   " 
```

目前似乎没有可靠的方法来使用程序在所有语言平台上的所有 Windows 版本中创建 TAB 字符。

但您也可以使用嵌入式 Jscript 片段。

```
@if (@X)==(@Y) @goto :Dummy @end/* Batch part

@echo off
SETLOCAL ENABLEEXTENSIONS
for /f "delims=" %%x in ('cscript //E:JScript //nologo "%~f0"') do set TAB=%%x
echo Tab character is "%tab%"
goto :EOF

***** Now JScript begins *****/
WScript.Echo(String.fromCharCode(9)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-06T15:44:25.667

使用 robocopy 也可以生成 TAB。默认情况下，Robocopy 在 windows xp 中不可用。

```
for /f "delims= " %%T in ('robocopy /L . . /njh /njs') do set "TAB=%%T" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-21T18:54:07.113

此方法在 Win2k、WinXP、Vista、Win7、Win8、Win10 上普遍适用

它利用了Microsoft 编译器工具集生成的**PE可执行映像的****MZ**标头从近 25 年前的 NT3.1 时代到今天的 Windows 10 时代保持不变的事实。

 **MZ 标头的偏移量 0x46 处的字节值是 0x09，它是**TAB**字符所以从 Windows 中选择任何可执行文件并从中获取 TAB 就足够了。

最方便和合乎逻辑的选择是使用命令处理器本身的可执行文件。

```
@echo off
setlocal EnableExtensions

set "TAB="
for /F "delims=" %%Z in (
    '^(type "%COMSPEC%"^|^(^(for /L %%P in ^(1^,1^,70^) do @pause^>nul^)^&set /p "TAB="^&call echo^,%%TAB%%^)^)2^>nul'
) do set "TAB=%%Z"
set "TAB=%TAB:~0,1%"

echo,
echo TAB---^>[%TAB%]^<---TAB  SPACE---^>[ ]^<---SPACE  EMPTY---^>[]^<---EMPTY
echo,
pause 
```

**更新 2018 年 4 月 23 日**

这是一种替代且更易于理解的语法，它避免使用管道并且比上面的要快得多

```
((for /L %%P in (1,1,70) do pause>nul)&set /p "TAB=")<"%COMSPEC%"
set "TAB=%TAB:~0,1%" 
```

**/更新**

要回显 TAB，请使用以下表格：

```
echo,%TAB% 
```

要将 TAB 字符写入文件：

```
:: Creates a new file with TAB character
echo,%TAB%>"NewFile.txt"

:: Appends the TAB character to end of the existing file
echo,%TAB%>>"ExistingFile.txt" 
```

请注意，**echo**将始终在末尾附加一个新行 (CRLF)。如果您只想要不带换行符的 TAB 字符，请使用提示技术，但请记住，与 echo 相比，此方法**非常慢，因此****不要过度使用**

```
setlocal
set "prompt=%TAB%"
"%COMSPEC%" /d /k<nul>"TAB_Without_NewLine.txt"
endlocal 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-04T09:49:43.520

将制表符合并到批处理文件中。特别是，把它放在第一行，前面`@ECHO OFF`，然后用命令读取第一行`SET /P`。当然，它会读取整行，因此`SET`需要另外一个命令来从行中删除制表符。这是一个例子：

```
 @ECHO OFF
<%0 SET /p tab=
SET tab=%tab:~0,1%
ECHO Every%tab%word%tab%is%tab%tabulated 
```

请注意，`@ECHO OFF`这里前面的空格应该是单个制表符，就像我之前所说的那样。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-01-06T15:13:43.380

obscure`forfiles`命令可用于（或滥用？）生成制表符（或您喜欢的任何其他字符，NUL 除外），如本[DosTips 主题](https://www.dostips.com/forum/viewtopic.php?t=3857)中所述。

简而言之：

```
@echo off & setLocal enableExtensions disableDelayedExpansion

for /f "delims= " %%T in ('
    forFiles /p "." /m "%~nx0" /c "cmd /c echo(0x09"
') do set "tab=%%T"
echo(words%tab%separated%tab%by%tab%tabs

endLocal & goto :EOF 
```

但是，`forfiles`仅适用于**Windows Vista**及更高版本。但是振作起来，我的**XP**小兔子们！感谢奇妙的[Wayback Machine ，您可以下载](https://archive.org/web/)[forfiles.zip](http://web.archive.org/web/20150810144817/http://www.sharedcache.com/cms/download/forfiles.zip) (22.1kb)的化石副本。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-01-05T22:31:53.280

下面的`:makeTab`子例程创建一个制表符并将其存储在传递给它的变量的名称中。Requires ，在某些版本的**Windows XP**`certutil`上未安装。

 **```
@echo off & setLocal enableExtensions disableDelayedExpansion

call :makeTab tab
echo(words%tab%separated%tab%by%tab%tabs

endLocal & goto :EOF

:makeTab result=
:: returns tab char in var name given as param
:: requires certUtil
setLocal
set "tabFile=%tmp%\tab.tmp"

if not exist "%tabFile%" (
    >"%tabFile%" echo(09
    certUtil -decodeHex -f "%tabFile%" "%tabFile%" >nul
) %= if =%

for /f "useBack delims=" %%T in ("%tabFile%") do (
    endLocal & set "%1=%%T"
) %= for /f =%
exit /b 0 %= makeTab =% 
```

PS：想想看，上面的子程序可以很容易地扩展来生成你想要的任何字符（除了 NUL）。注意 ASCII 128 和 ASCII 255 之间的字符的代码页问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-01-15T23:12:26.310

我把最好的留到最后！;)

尽管我不愿与[jeb](https://stackoverflow.com/users/463115/jeb)这样的权威相矛盾，但他的[回答](https://stackoverflow.com/a/10879650)已经超过 5 年了，并且已经开发出一种技术来仅使用本机[批处理](/questions/tagged/batch "显示标记为“批次”的问题")命令来创建制表符字符，该技术适用于从**XP**开始的所有**Windows版本。**

 **下面的`:makeTab`子例程基于在[DosTips上的马拉松](https://www.dostips.com/)[创建所有 ASCII 字符](https://www.dostips.com/forum/viewtopic.php?f=3&t=5326)主题中开发的代码。它用于创建制表符（ASCII 9）并将其存储为变量，并将名称作为参数传递给它：`makecab`

```
@echo off & setLocal enableExtensions disableDelayedExpansion

call :makeTab tab
echo(words%tab%separated%tab%by%tab%tabs

endLocal & goto :EOF

:makeTab result=
:: returns tab char in var name given as param
:: based on http://consolesoft.com/batch/binary/genchr.cmd
setLocal
set "tabFile=%tmp%\tab.tmp"

if not exist "%tabFile%" (goto makeTabFile) else goto readTabFile

:makeTabFile
type nul >"%tabFile%"
makeCab /d compress=off /d reservePerDataBlockSize=0 ^
/d reservePerFolderSize=9 "%tabFile%" "%tabFile%" >nul
for /f "skip=28 delims=" %%F in ('find /v "" "%tabFile%"') do (
    >"%tabFile%" echo(%%F
    goto readTabFile
) %= for /f =%

:readTabFile
for /f "useBack delims= " %%T in ("%tabFile%") do (
    endLocal & set "%1=%%T"
) %= for /f =%
exit /b 0 %= makeTab =% 
```

只要您知道所需字符的 ASCII 代码，就可以轻松地修改子例程以创建您喜欢的任何字符（NUL 除外）。注意 ASCII 128 和 255 之间的代码页问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-10-14T06:54:37.977

没有必要“使用支持 TAB 字符而不将它们更改为空格的编辑器”。
从命令行：

*方法1* -`forfiles`

```
echo la >t
forfiles /m "t" /c "cmd /c set /p=j0x09"<nul> tab
Copy /y tab+Nul t
type t | ((for /l %N in (1 1 3) do pause)>nul&findstr "^") > t
copy /y t /A tab /B 
```

*方法二*

如果你喜欢`certutil`：

```
set /p=09<nul> t
certutil -decodehex t tab 
```

*方法3*： -`fsutil`

```
echo la >t
forfiles /m "t" /c "cmd /c set /p=j0x09"<nul> tab
((for /l %N in (1 1 3) do pause)>nul&findstr "^") <tab> t
fsutil file seteof t 1 >nul 
```

在 Win 10 cmd 上测试

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-01-10T17:24:19.360

[DosTips](https://www.dostips.com/)用户 aGerman于 2011 年首次报告输出[中存在制表符，而](https://www.dostips.com/forum/viewtopic.php?p=6853#p6853)[jeb](https://stackoverflow.com/users/463115/jeb)去年 5 月改进[了提取它的技术，如下所示：](https://www.dostips.com/forum/viewtopic.php?p=52509#p52509)`shutdown /?`

```
@echo off & setLocal enableExtensions disableDelayedExpansion

for /f "delims=abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 " %%T in ('
    shutDown /?
') do set "tab=%%T"
set "tab=%tab:~0,1%"
echo(words%tab%separated%tab%by%tab%tabs

endLocal & goto :EOF 
```

**警告：**不保证适用于所有版本的**Windows**或所有语言环境。我在我的英文版**Windows 7 HP** 32 位上成功测试了上述内容，但是 ymmv。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-03-17T21:01:44.413

我的解决方案很简单：

```
set TAB=    "
set "TAB=%TAB:"=%

echo one!TAB!two!TAB!three 
```

> 一二三

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-06-06T04:39:45.020

感谢您的回答。

最后我使用了这个简单的方法：

```
FOR /f "delims=" %%x IN (delimiter.ini) DO set TAB=%%x 
```******

# objective-c - 是否可以使用 CGContext 绘制图形并将它们保存到 NSMutableArray 中？

> ID：10878141
> 
> 赞同：0
> 
> 时间：2012-06-04T08:05:34.313
> 
> 标签：objective-c, ios, nsmutablearray, cgcontext, cgcontextdrawimage

起初我绘制图形：

```
 -(void)drawRect: (CGRect)rect{  

        //Circle
    circle = UIGraphicsGetCurrentContext();  
    CGContextSetFillColorWithColor(circle, [UIColor darkGrayColor].CGColor);
    CGContextFillRect(circle,CGRectMake(10,10, 50, 50));

        //rectangle
    rectangle = UIGraphicsGetCurrentContext();  
    CGContextSetFillColorWithColor(rectangle, [UIColor darkGrayColor].CGColor);
    CGContextFillRect(rectangle, CGRectMake(10, 10, 50, 50));

        //square 
    square = UIGraphicsGetCurrentContext();  
    CGContextSetFillColorWithColor(square, [UIColor darkGrayColor].CGColor);
    CGContextFillRect(square, CGRectMake(100, 100, 25, 25));

        //triangle  
    triangle = UIGraphicsGetCurrentContext(); 
    CGContextSetFillColorWithColor(triangle, [UIColor darkGrayColor].CGColor);
    CGPoint points[6] = { CGPointMake(100, 200), CGPointMake(150, 250),
                              CGPointMake(150, 250), CGPointMake(50, 250),
                              CGPointMake(50, 250), CGPointMake(100, 200) };
    CGContextStrokeLineSegments(triangle, points, 6);

    } 
```

现在我想将图形放入一个数组中：

```
-(void)viewDidLoad {

grafics = [[NSMutableArray alloc]initWithObjects: circle,rectangle,square,triangle];
[self.navigationItem.title = @"Shape"];
[super viewDidLoad];
} 
```

问题是，我必须进行强制转换，从而使对象适合该数组。另一个问题是 UITableViewController 不会将数组加载到行中。tableview 没有问题，但处理 CGContext 失败。我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T09:03:43.713

`drawRect:`是一种`UIView`用于绘制视图本身的方法，而不是预先创建图形对象。

由于您似乎想要创建形状来存储它们并稍后绘制，因此创建形状`UIImage`并使用`UIImageView`. `UIImage`可以直接存储在`NSArray`.

要创建图像，请执行以下操作（在主队列中；不在 drawRect 中：）：

1）创建位图上下文

```
UIGraphicsBeginImageContextWithOptions(size, opaque, scale); 
```

2）获取上下文

```
CGContextRef context = UIGraphicsGetCurrentContext(); 
```

3）画你需要的任何东西

4) 将上下文导出为图像

```
UIImage *image = UIGraphicsGetImageFromCurrentImageContext(); 
```

5）破坏上下文

```
UIGraphicsEndImageContext(); 
```

6）存储对图像的引用

```
[yourArray addObject:image]; 
```

对您要创建的每个形状重复此操作。

有关详细信息，请参阅上述功能的[文档。](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html)为了更好地理解`drawRect:`在程序中任意位置绘图和使用上下文之间的区别，我建议你阅读[Quartz2D 编程指南](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html)，尤其是图形上下文部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T08:23:26.340

首先，`UIGraphicsGetCurrentContext`返回`CGContextRef`，它不是对象，不能直接存储在集合中（*编辑：*这不是真的，请参阅评论）。从技术上讲，您可以将上下文包装在 an 中`NSValue`或将其转换为`UIImage`：

```
CGImageRef imageRef = CGBitmapContextCreateImage(context);
UIImage *img = [UIImage imageWithCGImage:imageRef]; 
```

结果`UIImage`是一个对象，可以很好地存储在集合中。*但是*代码示例在大局中没有意义。该`-drawRect:`方法旨在绘制您的组件，而不是创建一些稍后使用的图形。并且`-viewDidLoad`是一种`UIViewController`方法，而不是一种方法`UIView`。您能否编辑问题并描述您要做什么？

# .net - 我可以使用 .Net4 RegAsm.exe 执行 .Net2 dll 的 RegAsm 吗？

> ID：10878146
> 
> 赞同：2
> 
> 时间：2012-06-04T08:06:14.230
> 
> 标签：.net, .net-4.0, registry, regasm

我可以使用 .Net4 RegAsm.exe 对 .NET 2 dll 执行 RegAsm 吗？
我的机器上只安装了 .NET 4，我需要对 .NET 2 文件执行 RegAsm。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T08:26:21.377

是的你可以。写入注册表的 RuntimeVersion 值将根据 CLR 标头设置（也就是说，即使您使用 4.0 RegAsm 注册 2.0 DLL，它也会“知道”它是 2.0 DLL 并相应地注册它）。

# javascript - Javascript 提供文件以供下载

> ID：10878149
> 
> 赞同：1
> 
> 时间：2012-06-04T08:06:31.223
> 
> 标签：javascript, base64, download

> **可能重复：**
> [在内存中创建一个文件供用户下载，而不是通过服务器](https://stackoverflow.com/questions/3665115/create-a-file-in-memory-for-user-to-download-not-through-server)

首先，这是客户端 JavaScript。而且我知道 JavaScript 不是为此而设计的。

在一段特定的代码中，我有一个文件名，以及以 base64 编码的数据。此信息已经在客户端，可通过 JavaScript 访问。有谁知道一种方法来解码它并使用下载对话框将其作为文件提供给用户？我知道 Apache commons 中有一个用于解码 base64 的函数，但我不知道它是否与您可能拥有的任何想法兼容。

谢谢您的帮助。

PS：我不能使用 HTML 5。代码必须在 IE8 及更高版本中工作。

# jdbc - 使用 SQuirreL "Reply.fill() 连接到 IBM DB2。消息：数据不足。ERRORCODE=-4499，SQLSTATE=08001"

> ID：10878162
> 
> 赞同：4
> 
> 时间：2012-06-04T08:07:21.953
> 
> 标签：jdbc, db2, squirrel-sql

我现在已经尝试了 2 天来使用 SQuirreL 连接到外部 DB2 数据库。我总是得到错误：

```
[jcc][t4][2030][11211][3.58.82] A communication error occurred during operations
on the connection's underlying socket, socket input stream, or socket output
stream. Error location: Reply.fill().  Message: Insufficient data.
ERRORCODE=-4499, SQLSTATE=08001 
```

我正在使用 IBM DB2 通用 JDBC 驱动程序 v9.7 FP5。我也试过v9.5。

一件事是 DB2 使用 Putty 建立隧道。服务器运行带有 IBM DB2 v7.1 的 linux。我正在使用 Win7x64。

我在网上浏览了许多涵盖此错误的论坛主题，但没有一个对我真正有用。（即[iReport 到 DB2 连接 ERRORCODE=-4499, SQLSTATE=08001](https://stackoverflow.com/questions/10750167/ireport-to-db2-connection-errorcode-4499-sqlstate-08001)）

首先，我认为这可能与未正确隧道化的端口有关。但是我从 Putty 会话 conf 中删除了端口并发生了不同的错误。

堆栈跟踪以及问题：

```
com.ibm.db2.jcc.am.io: [jcc][t4][2030][11211][3.58.82] A communication error
occurred during operations on the connection's underlying socket, socket input
stream, or socket output stream.  Error location: Reply.fill().  Message:
Insufficient data. ERRORCODE=-4499, SQLSTATE=08001
    at com.ibm.db2.jcc.am.ed.a(ed.java:319)
    at com.ibm.db2.jcc.t4.a.a(a.java:416)
    at com.ibm.db2.jcc.t4.a.a(a.java:411)
    at com.ibm.db2.jcc.t4.cb.b(cb.java:227)
    at com.ibm.db2.jcc.t4.cb.c(cb.java:249)
    at com.ibm.db2.jcc.t4.cb.c(cb.java:360)
    at com.ibm.db2.jcc.t4.cb.v(cb.java:1145)
    at com.ibm.db2.jcc.t4.db.a(db.java:42)
    at com.ibm.db2.jcc.t4.b.m(b.java:1238)
    at com.ibm.db2.jcc.t4.b.b(b.java:1112)
    at com.ibm.db2.jcc.t4.b.c(b.java:700)
    at com.ibm.db2.jcc.t4.b.b(b.java:686)
    at com.ibm.db2.jcc.t4.b.a(b.java:367)
    at com.ibm.db2.jcc.t4.b.<init>(b.java:307)
    at com.ibm.db2.jcc.DB2SimpleDataSource.getConnection(DB2SimpleDataSource.java:214)
    at com.ibm.db2.jcc.DB2Driver.connect(DB2Driver.java:456) 
```

我最好的猜测是并且仍然是 JDBC 通用驱动程序不向后兼容 DB2 v7.1。

它可以在具有 32 位 XP 的其他开发机器（同事）上运行。我试图让它在不同的 32 位 XP 上运行，但结果相同。

谁能至少描述一下这种异常的根源？

## 编辑

[http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14779629](http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14779629) 这不可能是防火墙或隧道错误。使用 telnet 成功打开隧道以纠正端口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:47:53.350

您需要找到并使用 DB2 7.2 或 DB2 7.1 客户端代码（又名 DB2 Client Application Enabler）。在 DB2 8.1 之前，IBM 使用一种不同的、依赖于平台的协议（称为 DB2RA）在客户端和服务器之间进行通信。DB2 8.1 切换到标准 DRDA 协议。在特定配置中，DB2 8.x 客户端可以与 DB2 7.x 服务器通信。

或者，如果您使用的是 Java 应用程序，您可以尝试定位/使用 Type 3 JDBC 驱动程序 (COM.ibm.db2.jdbc.net.DB2Driver)。该驱动程序是无客户端的（它具有 3 层架构，因为它需要在数据库服务器上运行所谓的“JDBC Applet 服务器”。您可以通过查找名为`db2jd`.通常这个进程将显示为，例如，`db2jd 6789`其中 6789 是小程序服务器正在侦听的端口号。如果您没有看到这个进程，您可以通过执行`db2jstrt`命令来启动它（作为 DB2 实例所有者）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-24T01:02:25.757

另一种可能性：您可能需要重新启动计算机。就我而言，这对我有用。在安装 DB2 10.5 的特殊版本后出现此错误。

*   如需更多诊断信息，您可以使用以下方法获取 IBM JDBC 驱动程序版本：`java com.ibm.db2.jcc.DB2Jcc -version`
*   最后这个[链接可能有助于提供更好的诊断](https://www.toadworld.com/platforms/ibmdb2/b/weblog/archive/2013/06/13/how-to-find-a-db2-java-driver-version)。

# c# - 异步 Web 服务调用中的 ArgumentException

> ID：10878165
> 
> 赞同：1
> 
> 时间：2012-06-04T08:07:26.110
> 
> 标签：c#, multithreading, wcf, exception, iis

我遇到了一个问题，我以前没有遇到过。我通过 BeginXXX/EndXX 模式异步调用一个方法，并为某些计时功能提供了一个额外的包装器，如下所示：

```
BeginGetStuffTimed(arguments)
{
    var timingstuff = TimingStuff;
    var callback = new AsyncResult(CallbackMethod);
    service.BeginGetStuff(CallbackMethod, timingstuff);
}

CallbackMethodTimed(IAsyncResult result)
{
     SaveTiming(result.AsyncState...);
     service.EndGetStuff;
} 
```

现在每隔一段时间就会抛出一个异常：

> 异步结束调用了错误的通道。参数名称：结果

因为它并不总是发生这种困惑我。我在想 IIS 无法跟上请求并变得 fubar，所以我在调用代码中添加了一个暂停，这似乎确实有效。停顿时间越长，异常发生的频率越低。

当然这不是真正的解决方案，所以我正在寻找对此事的一些见解。

编辑：经过进一步检查，这似乎与 IIS 无关，IIS 最多可以同时处理 5000 个（每个 CPU）线程。我没有接近这个极限。

# asp.net - 使用和不使用会话变量加载相同的页面

> ID：10878166
> 
> 赞同：0
> 
> 时间：2012-06-04T08:07:33.457
> 
> 标签：asp.net

我有一个 aspx 页面。此页面用于创建和编辑。在编辑时，我设置了一个会话变量并加载了相同的页面。在创建时，用户必须单击菜单选项并将其重定向到“CreatePage.aspx”。在编辑时，它会在单击网格中的列时被重定向。这次 response.redirect 发生在 Session["Id"] 设置为某个值的同一页面上。现在我的问题是如何以及何时将会话设置为空？这应该适用于使用同一页面创建和编辑。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:41:39.490

方法很简单： `Session["Id"] = null`。

关于何时：用户可以**取消**编辑/创建吗？如果是这样，那会发生什么？当用户单击菜单选项或网格列并且操作完成时（通过**OK**或**Cancel**），应更改会话变量。

无论如何，可以使用 GridView 控件轻松更改网格中的数据。[你可以在这里看到一个例子](http://msdn.microsoft.com/en-us/library/ms972948.aspx)。所以你可能想在这里“重新发明轮子”......

# matlab - 绘制3D线，matlab

> ID：10878167
> 
> 赞同：3
> 
> 时间：2012-06-04T08:07:35.470
> 
> 标签：matlab, plot, line, least-squares, data-fitting

我的问题很标准，但找不到解决方案。

我有 points=[x,y,z] 并想绘制最佳拟合线。

我正在使用下面给出的函数（和 Thanx Smith）

```
% LS3DLINE.M   Least-squares line in 3 dimensions.
%
% Version 1.0    
% Last amended   I M Smith 27 May 2002\. 
% Created        I M Smith 08 Mar 2002
% ---------------------------------------------------------------------
% Input    
% X        Array [x y z] where x = vector of x-coordinates, 
%          y = vector of y-coordinates and z = vector of 
%          z-coordinates. 
%          Dimension: m x 3\. 
% 
% Output   
% x0       Centroid of the data = point on the best-fit line.
%          Dimension: 3 x 1\. 
% 
% a        Direction cosines of the best-fit line. 
%          Dimension: 3 x 1.
% 
% <Optional... 
% d        Residuals. 
%          Dimension: m x 1\. 
% 
% normd    Norm of residual errors. 
%          Dimension: 1 x 1\. 
% ...>
%
% [x0, a <, d, normd >] = ls3dline(X) 
```

我有一个。所以方程可能是

```
points*a+dist=0 
```

dist 是最小值。与原点的距离。

现在我的问题是如何在 3D 中绘制最佳过滤线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:15:35.773

它有助于实际阅读使用奇异值分解的函数的内容。

```
% calculate centroid
  x0 = mean(X)';

% form matrix A of translated points
  A = [(X(:, 1) - x0(1)) (X(:, 2) - x0(2)) (X(:, 3) - x0(3))];

% calculate the SVD of A
  [U, S, V] = svd(A, 0);

% find the largest singular value in S and extract from V the
% corresponding right singular vector
  [s, i] = max(diag(S));
  a = V(:, i); 
```

最佳正交拟合线是

**P = x0 + a.*t**

随着参数 t 的变化。这是最大变化的方向，这意味着正交方向的变化最小。点到这条线的正交距离的平方和被最小化。

这与线性回归不同，线性回归使回归线的 y 变化最小化。该回归假设所有误差都在 y 坐标中，而正交拟合假设 x 和 y 坐标中的误差具有相等的预期大小。

[来源：罗杰斯塔福德，http://www.mathworks.com/matlabcentral/newsreader/view_thread/294030]

然后你只需要创建一些 t 并绘制它：

```
for t=0:100,
P(t,:) = x0 + a.*t;
end
scatter3(P(:,1),P(:,2),P(:,3)); 
```

您可能想改用 plot3() ，在这种情况下您只需要一对点。由于一条线根据定义是无限的，因此由您决定它应该在哪里开始和结束（取决于应用程序）。

# java - 多个连接包同时到达的 Netty CorruptedFrameException

> ID：10878170
> 
> 赞同：2
> 
> 时间：2012-06-04T08:07:52.513
> 
> 标签：java, exception, frame, netty, decoder

我使用 Netty 的程序遇到了一个非常奇怪的问题。

我正在监听一个端口并解析消息（使用 FrameDecoder 实现）。如果我收到一个连接，一切正常，但是当我在同一个端口上收到两个连接（每个都来自不同的服务器）时，我遇到了一种罕见但严重的情况，我得到了损坏的FrameException

当我的程序接收到具有完全相同时间戳的 TCP 数据包（以非常高的速率发送信息时）时会出现问题，如下所示

1.  来自服务器 1 的 TCP 数据包
2.  来自服务器 2 的 TCP 数据包
3.  来自服务器 1 的 TCP 数据包（这是项目符号 1 中开始的消息的延续）
4.  来自服务器 2 的 TCP 数据包（这是项目符号 2 中开始的消息的延续）

我的程序尝试将 1 和 2 解析为消息，而不是知道实际消息是 1 & 3 和 2 & 4 我在某处读到，也许我需要为每个通道连接实例化一个新的 FrameDecoder，但我不知道究竟该怎么做。我在启动时将解码器添加到管道中，但我无法弄清楚如何将新解码器添加到特定通道

我遇到的例外是：

```
org.jboss.netty.handler.codec.frame.CorruptedFrameException: Adjusted frame length (0) is less than lengthFieldEndOffset: 2
    at org.jboss.netty.handler.codec.frame.LengthFieldBasedFrameDecoder.decode(LengthFieldBasedFrameDecoder.java:340) ~[netty-3.1.5.GA.jar:]
    at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:282) ~[netty-3.1.5.GA.jar:]
    at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:214) ~[netty-3.1.5.GA.jar:]
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:345) ~[netty-3.1.5.GA.jar:]
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:332) ~[netty-3.1.5.GA.jar:]
    at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:323) ~[netty-3.1.5.GA.jar:]
    at org.jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys(NioWorker.java:275) ~[netty-3.1.5.GA.jar:]
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:196) ~[netty-3.1.5.GA.jar:]
    at org.jboss.netty.util.internal.IoWorkerRunnable.run(IoWorkerRunnable.java:46) ~[netty-3.1.5.GA.jar:]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:651) [na:1.5.0]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:676) [na:1.5.0]
    at java.lang.Thread.run(Thread.java:595) [na:1.5.0] 
```

和

```
org.jboss.netty.handler.codec.frame.TooLongFrameException: Adjusted frame length exceeds 4096: 8224
        at org.jboss.netty.handler.codec.frame.LengthFieldBasedFrameDecoder.decode(LengthFieldBasedFrameDecoder.java:296) ~[netty-3.1.5.GA.jar:]
        at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:282) ~[netty-3.1.5.GA.jar:]
        at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:216) ~[netty-3.1.5.GA.jar:]
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:345) ~[netty-3.1.5.GA.jar:]
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:332) ~[netty-3.1.5.GA.jar:]
        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:323) ~[netty-3.1.5.GA.jar:]
        at org.jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys(NioWorker.java:275) ~[netty-3.1.5.GA.jar:]
        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:196) ~[netty-3.1.5.GA.jar:]
        at org.jboss.netty.util.internal.IoWorkerRunnable.run(IoWorkerRunnable.java:46) ~[netty-3.1.5.GA.jar:]
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:651) [na:1.5.0]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:676) [na:1.5.0]
        at java.lang.Thread.run(Thread.java:595) [na:1.5.0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:58:55.937

您需要将一个**新**的帧解码器对象添加到您的**新**（第二个？）通道。重复异常是因为您使用的是同一频道。

1.  服务器引导程序采用管道工厂，它将使用适当的编码器和解码器配置所有新通道。
2.  每当远程客户端连接到您的服务器时，它都会创建自己的通道对象。
3.  在您使用的 Channel PipelineFactory 实现中。确保每次调用 pipeline() 方法时都会创建**新的帧解码器实例。**
4.  @Shareable 注释仅用于文档目的。即使您使用它，它也不会影响任何事情，因为它不是代码/逻辑。只是一个标记而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:33:14.980

您需要在通道之间“不共享” FrameDecoder。FrameDecoder 未使用 @Sharable 注释，因此您无法共享它。这就是你的问题的原因在这里..

# iphone - Xcode 无法识别图像大小的变化

> ID：10878173
> 
> 赞同：0
> 
> 时间：2012-06-04T08:08:11.770
> 
> 标签：iphone, objective-c, ios, image, retina-display

在我的程序中，我有一个已缩小到完全适合屏幕的尺寸的图像。经过进一步调查，我意识到这些尺寸必须加倍才能在 iPhone Retina 中提供最高质量。我通过使用原始图像（大得多）将这些尺寸翻了一番，因此质量没有损失。但是，当我在 iPhone 模拟器（视网膜显示器）中运行我的程序时，图像的质量并没有发生任何变化。是否有任何明显的原因导致 Xcode 似乎无法识别图像已更新？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:12:25.740

当您有两个版本的图像（普通和@2x）时，使用XIB 或UIImage#imageWithName: 中的“普通”名称（不带@2x），系统会自动为当前屏幕选择最佳版本。还要检查您的 UIImageView 大小是否对应于图像的正常（不是 2 倍）分辨率。有几种内容模式（如 Aspect Fit、Aspect Fill、Center 等）可以在 UIImageView 中调整图像的大小或位置。

# android - id 无法解析或不是字段

> ID：10878178
> 
> 赞同：1
> 
> 时间：2012-06-04T08:08:44.073
> 
> 标签：android

我为一个活动编写了简单的 android 代码，并通过布局文件夹中名为 second.xml 的 xml 文件提供了它的视图。我也在 mainfiest 文件中提到了这个活动。但我面临的错误是“第二个无法解决或它不是字段”在 setContentView 方法中。请给出解决方案

```
import android.R;
import android.app.Activity;
import android.os.Bundle;
import android.widget.ImageView;

public class Second extends Activity
{
    ImageView imageView;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second);

        // Intent i=getIntent();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:15:30.600

你只需要从*Project->Clean*清理你的项目并删除*import android.R;* *从 Second 在清理它之前。确保在src/layout/second.xml*下有 second.xml 文件。

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.ImageView;

public class Second extends Activity
{
    ImageView imageView;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second);

    //      Intent i=getIntent();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:20:40.467

请删除此导入的行

```
import android.R; 
```

然后像这样清洁：

转到**项目>>清理**项目。我想你可能会解决你的问题；转到更多详细信息： [R 无法解决](http://google-androidlovers.blogspot.com/search/label/R%20cannot%20be%20resolved%20to%20a%20variable)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:25:25.183

删除`import android.R;`并清理您的项目。仅当您尝试使用 Android 提供的数据时，才应导入 android.R。例如，要显示单行列表视图，您可以使用 Android 提供的布局和文本视图，如下所示：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
    android.R.layout.simple_list_item_1, android.R.id.text1, values); 
```

# facebook - Facebook Open Graph 测试用户配置文件对象错误代码：1611016

> ID：10878190
> 
> 赞同：1
> 
> 时间：2012-06-04T08:09:51.573
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, facebook-test-users

我正在提交一个带有使用 Open Graph 的具有一些属性的对象的操作。其中一个属性是另一个测试用户的配置文件。相同的代码适用于实际用户，但当涉及到测试用户时，Open Graph 将返回：

```
... the given value 'http:\/\/www.facebook.com\/profile.php?id=100003943905026' 
for property 'profile1' could not be parsed as type 'profile'.","code":1611016 
```

我假设应用程序或打开的图表或 Facebook 看不到测试用户的个人资料。

测试用户的个人资料是： [http ://www.facebook.com/profile.php?id=100003943905026](http://www.facebook.com/profile.php?id=100003943905026)

当然，您看不到它，但测试用户和他的朋友可以看到个人资料。

关于如何使用开放图发送测试用户的个人资料有什么建议吗？

我认为应该有一个关键或特殊的 URL，但到目前为止我找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:16:40.717

Facebook 中存在一个[错误](https://developers.facebook.com/bugs/228470197239393?browse=search_4f23cd4008c9f0156444558)，导致测试用户无法在沙盒模式下发布 Open Graph 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:22:52.827

此处打开了一个错误：[https](https://developers.facebook.com/bugs/100992683376664) ://developers.facebook.com/bugs/100992683376664 毫不犹豫地提及您可以重现

# design-patterns - 我应该使用什么顺序的图表

> ID：10878191
> 
> 赞同：0
> 
> 时间：2012-06-04T08:09:52.243
> 
> 标签：design-patterns, uml, rup

嗨，我这个学期学习了软件工程。我们的老师说，当我们要在第一步分析应用程序时，我们必须设计用例图，然后设计类图，最后设计序列图，但在袋子书有不同的设计方法，它说拳头全部设计用例，然后是序列，然后是类图。请你告诉我它们之间的关系是什么。我知道我们可以按顺序找到类方法。但我的主要问题是，当我想分析我的项目时，我有点混淆了序列，因为某些类不存在，但是我们如何才能使类的对象不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:15:07.777

这是更理论的，我可以告诉你：

它有一个顺序，但我们的思维是并行工作的，所以，

1）用例：用例图确定了一个合适的用例，它显示了满足您的要求/需要的步骤。正确的步骤

2）序列图：为了满足您的要求，应该有数据/动作/信息的流动和结果的依赖性（一个的输出是另一个的输入）

3) 类图：当你开始序列时，你需要对象，类，它们实际上与数据交互并传递消息（方法）。

所以，主要是序列图和类图有时会一起出现，当你考虑序列时，你开始形成类，当你形成类（状态和行为）时，你形成它的序列来实现用例。

希望这可以帮助

# javascript - 当主窗口滚动位于底部时，将 div 滚动条设置为活动状态

> ID：10878192
> 
> 赞同：0
> 
> 时间：2012-06-04T08:09:54.763
> 
> 标签：javascript, jquery

在一个页面中，我有带有垂直滚动条的 div。主页具有正常的浏览器滚动条。当主窗口滚动条位于底部且用户继续向下滚动时，div 垂直滚动条应继续滚动。

是否有一些 jquery 事件来捕捉滚动或其他一些简单的方法来完成这个？

# css - 当一个 div 嵌套在标签中而另一个 div 在这些标签之外时，将两个 div 彼此相邻对齐

> ID：10878199
> 
> 赞同：0
> 
> 时间：2012-06-04T08:11:07.267
> 
> 标签：css, html, alignment

由于图片超过 1000 字，这是我的问题（注意：我无法发布图片，因为我没有足够的 SO 声誉，所以我会发布一个链接）：

[http://s7.directupload.net/images/120604/skhgwuqb.png](http://s7.directupload.net/images/120604/skhgwuqb.png)

这是用例：黑色的周围 div 是页面预览。黑色 div 内的蓝色 div 是此页面的部分。外面的蓝色 div 是“编辑”按钮。他们应该与他们的通讯员有相同的垂直位置。

因为黑色 div 及其内容是页面预览，所以我无法在 div 内移动编辑按钮（无需将页面模板更改为具有“编辑”按钮，这在设计上当然是不好的）。

我怎样才能对齐它们？如果需要 Javascript 来实现这一点，那没关系，尽管我强烈支持 CSS 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:25:31.260

如果您无法触摸周围 div 中的任何内容，我不知道只有 CSS 方法可以实现您想要的。这是一个jQuery解决方案：

[http://jsfiddle.net/BuS2p/](http://jsfiddle.net/BuS2p/)

```
<!doctype html><html><head>
<script src="/path/to/jquery.js"></script>
<style>
#surrounding_div {
 width: 400px;
 height: 400px;
 position: relative;
 background: blue;
}

#elm1 {
 width: 150px;
 height: 150px;
 background: red;
 position: absolute;
 left: 20px; top: 20px;
}

#elm2 {
 float: left;
 width: 350px;
 height: 100px;
 background: green;
 float: left;
 margin-top: 150px;    
}
</style>
</head><body>
<div id="surrounding_div">
  <div id="elm1">Testing</div>
  <div id="elm2">Testing</div>
</div>
<script>
jQuery(function() {
    $('#surrounding_div div').each(function() {
        theDiv = $(this);
        divOffset = theDiv.offset();
        $('<button>Edit</button>').appendTo('body').css({
          'left' : $('#surrounding_div').width() + 20,
          'top' : divOffset.top,
          'position' : 'absolute',
          'z-index' : 9000
        });
    });
});
</script></body></html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:34:43.460

纯css解决方案

```
<div style="border:solid;width:200px;height:400px;">
<div style="position:relative;width:500px;height:100px;"><div style="position:absolute;"><div style="width:190px;float:left;border:solid #3300FF;height:100px;"></div><div style="margin-left:10px;border:solid #3300FF;height:10px;width:100px;float:left;"></div></div>
</div>
<div style="position:relative;width:500px; height:100px;"><div style="position:absolute;"><div style="width:190px;float:left;border:solid #3300FF;height:100px;"></div><div style="margin-left:10px;border:solid #3300FF;height:10px;width:100px;float:left;"></div></div>
</div></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T08:40:36.303

使用这个简单的 HTML 和 css

```
<div id="surrounding_div">
    <div id="elm1">Testing <button>Edit</button></div>
    <div id="elm2">Testing
        <button>Edit</button>
    </div></div>

#surrounding_div {
 width: 400px;
 height: 400px;
 background: blue;
}

#elm1 ,#elm2{position:relative;}

#elm1 button ,#elm2 button{position:absolute; top:-4px; right:-250px}
#elm2 button{right:-50px}

#elm1 {
 width: 150px;
 height: 150px;
 background: red;
}

#elm2 {
float: left;
width: 350px;
height: 100px;
background: green;  
} 
```

# c++ - WinXP中如何控制应用程序的音量

> ID：10878200
> 
> 赞同：1
> 
> 时间：2012-06-04T08:11:10.357
> 
> 标签：c++, winapi, visual-c++, win32gui, win32-process

我想以编程方式控制 WinXP 中特定应用程序的音量。我开始知道一个 API `waveOutSetVolume()`，但它控制 Win Vista 及更高版本中的应用程序音量，对于 XP，它只会影响整个系统音量。

请告知我们如何在XP中实现这一点？

此外，如何取消选中/选中系统音量静音复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:21:09.223

正如您所说，Vista OS 提供了应用程序级别的音频级别，因此 XP 无法控制它。

更多信息在这里：http: [//msdn.microsoft.com/en-us/library/bb945061.aspx](http://msdn.microsoft.com/en-us/library/bb945061.aspx)

您的第二个问题与静音有关，您只需调用 waveOutSetVolume：

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd743874%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743874%28v=vs.85%29.aspx)

# c# - Google Apps .NET 客户端

> ID：10878204
> 
> 赞同：1
> 
> 时间：2012-06-04T08:11:32.340
> 
> 标签：c#, google-api

我在谷歌上搜索了一个 Google Apps API .NET 客户端，发现[下面](https://developers.google.com/gdata/client-cs)这个似乎相当老了。

谷歌数据页面（这是提及客户端使用的 API）声明如下：

> 大多数较新的 Google API 不是 Google Data API。Google 数据 API 文档仅适用于 Google 数据 API 目录中列出的旧 API。有关特定新 API 的信息，请参阅该 API 的文档。有关使用较新 API 授权请求的信息，请参阅 Google 帐户身份验证和授权。

这是否意味着 Google 数据 API 将被淘汰？

我应该改用另一个 API/客户端吗？

[https://developers.google.com/google-apps/contacts/v3/](https://developers.google.com/google-apps/contacts/v3/)（最新 API）没有列出任何 .NET 客户端实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:20:23.003

Contacts API v3 仍然是一个 Google 数据 API，因此它受到用于 Google 数据 API 的 .NET 库的支持：

[http://code.google.com/p/google-gdata/](http://code.google.com/p/google-gdata/)

[https://developers.google.com/google-apps/contacts/v3/](https://developers.google.com/google-apps/contacts/v3/)上的文档包含 .NET 中的示例，可帮助您入门。

澄清一下，Contacts API v3 和 Google 数据 API 通常并没有过时，但是它们的新版本（或新 API）很可能是基于 JSON 的，并使用新的客户端库。

# jboss - jboss 7 as-即使在 jboss 启动后也无法看到 jboss 示例站点或管理界面

> ID：10878206
> 
> 赞同：0
> 
> 时间：2012-06-04T08:11:58.393
> 
> 标签：jboss, jboss7.x

我是使用 jboss 7 的新手，因为我最近在我的服务器上设置了它，并且也能够启动它。

但是在启动它之后，当我访问

```
 http://IP_ADDRESS:8080 
```

或者

```
 http://IP_ADDRESS:9990 
```

谷歌浏览器给出页面不可用的错误。

如何启用此类访问？另外，我正在使用 jboss 提供的 /etc/init.d 的启动-关闭脚本，我是否必须修改其中的启动和关闭命令，才能启用对服务器界面的远程 Web 访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:50:31.580

你试过`http://localhost:8080`吗？如果您使用的是 PC 的 IP 地址，则可能是防火墙阻止了对它的访问。

# java - 将 java 转换为 ruby

> ID：10878207
> 
> 赞同：-4
> 
> 时间：2012-06-04T08:11:59.303
> 
> 标签：java, ruby

我有java示例代码

```
public int[] recognize(int[] x)
{
    int[] y = new int[neurons.length];

    for (int j = 0; j < neurons.length; j++) {
        y[j] = neurons[j].transfer(x);
    }

    return y;
} 
```

我需要把它转换成红宝石

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T08:37:12.413

在 Ruby 中，高阶函数优于显式循环。

```
def recognize(x)
  neurons.collect {|n| n.transfer(x)}
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T08:43:54.680

```
def recognize x #returns all transfer results 
  y=neurons.collect{|n|n.transfer x}
  y
end 
```

# c# - 实心圆的中点圆算法

> ID：10878209
> 
> 赞同：15
> 
> 时间：2012-06-04T08:12:11.197
> 
> 标签：c#, algorithm, graphics, geometry

[中点圆算法](http://en.wikipedia.org/wiki/Midpoint_circle_algorithm)可用于光栅化圆的边界。但是，我希望填充圆圈，而不是多次绘制像素（这非常重要）。

这个答案提供了产生一个实心圆的算法的修改，但是一些像素被访问了几次： [绘制实心圆的快速算法？](https://stackoverflow.com/questions/1201200/fast-algorithm-for-drawing-filled-circles)

**问：**如何在不多次绘制像素的情况下栅格化一个圆？请注意，RAM 非常有限！

**更新：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace CircleTest
{
    class Program
    {
        static void Main(string[] args)
        {
            byte[,] buffer = new byte[50, 50];
            circle(buffer, 25, 25, 20);

            for (int y = 0; y < 50; ++y)
            {
                for (int x = 0; x < 50; ++x)
                    Console.Write(buffer[y, x].ToString());

                Console.WriteLine();
            }
        }

        // 'cx' and 'cy' denote the offset of the circle center from the origin.
        static void circle(byte[,] buffer, int cx, int cy, int radius)
        {
            int error = -radius;
            int x = radius;
            int y = 0;

            // The following while loop may altered to 'while (x > y)' for a
            // performance benefit, as long as a call to 'plot4points' follows
            // the body of the loop. This allows for the elimination of the
            // '(x != y)' test in 'plot8points', providing a further benefit.
            //
            // For the sake of clarity, this is not shown here.
            while (x >= y)
            {
                plot8points(buffer, cx, cy, x, y);

                error += y;
                ++y;
                error += y;

                // The following test may be implemented in assembly language in
                // most machines by testing the carry flag after adding 'y' to
                // the value of 'error' in the previous step, since 'error'
                // nominally has a negative value.
                if (error >= 0)
                {
                    error -= x;
                    --x;
                    error -= x;
                }
            }
        }

        static void plot8points(byte[,] buffer, int cx, int cy, int x, int y)
        {
            plot4points(buffer, cx, cy, x, y);
            if (x != y) plot4points(buffer, cx, cy, y, x);
        }

        // The '(x != 0 && y != 0)' test in the last line of this function
        // may be omitted for a performance benefit if the radius of the
        // circle is known to be non-zero.
        static void plot4points(byte[,] buffer, int cx, int cy, int x, int y)
        {
#if false // Outlined circle are indeed plotted correctly!
            setPixel(buffer, cx + x, cy + y);
            if (x != 0) setPixel(buffer, cx - x, cy + y);
            if (y != 0) setPixel(buffer, cx + x, cy - y);
            if (x != 0 && y != 0) setPixel(buffer, cx - x, cy - y);
#else // But the filled version plots some pixels multiple times...
            horizontalLine(buffer, cx - x, cy + y, cx + x);
            //if (x != 0) setPixel(buffer, cx - x, cy + y);
            //if (y != 0) setPixel(buffer, cx + x, cy - y);
            //if (x != 0 && y != 0) setPixel(buffer, cx - x, cy - y);
#endif
        }

        static void setPixel(byte[,] buffer, int x, int y)
        {
            buffer[y, x]++;
        }

        static void horizontalLine(byte[,] buffer, int x0, int y0, int x1)
        {
            for (int x = x0; x <= x1; ++x)
                setPixel(buffer, x, y0);
        }
    }
} 
```

以下是相关结果：

```
00000111111111111111111111111111111111111111110000
00000111111111111111111111111111111111111111110000
00000111111111111111111111111111111111111111110000
00000111111111111111111111111111111111111111110000
00000111111111111111111111111111111111111111110000
00000011111111111111111111111111111111111111100000
00000011111111111111111111111111111111111111100000
00000011111111111111111111111111111111111111100000
00000001111111111111111111111111111111111111000000
00000001111111111111111111111111111111111111000000
00000000111111111111111111111111111111111110000000
00000000111111111111111111111111111111111110000000
00000000011111111111111111111111111111111100000000
00000000001111111111111111111111111111111000000000
00000000000111111111111111111111111111110000000000
00000000000011111111111111111111111111100000000000
00000000000001111111111111111111111111000000000000
00000000000000122222222222222222222210000000000000
00000000000000001222222222222222221000000000000000
00000000000000000012333333333332100000000000000000
00000000000000000000012345432100000000000000000000
00000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000 
```

底部像素被绘制了太多次。我在这里想念什么？

**更新 #2：此解决方案有效：**

```
static void circle(byte[,] buffer, int cx, int cy, int radius)
{
    int error = -radius;
    int x = radius;
    int y = 0;

    while (x >= y)
    {
        int lastY = y;

        error += y;
        ++y;
        error += y;

        plot4points(buffer, cx, cy, x, lastY);

        if (error >= 0)
        {
            if (x != lastY)
                plot4points(buffer, cx, cy, lastY, x);

            error -= x;
            --x;
            error -= x;
        }
    }
}

static void plot4points(byte[,] buffer, int cx, int cy, int x, int y)
{
    horizontalLine(buffer, cx - x, cy + y, cx + x);
    if (y != 0)
        horizontalLine(buffer, cx - x, cy - y, cx + x);
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-04T08:45:43.020

另一个问题的答案非常好。但是，由于它会造成混乱，因此我将对其进行一些解释。

您在 Wikipedia 中看到的算法基本上找到1/8`x`的`y`圆（角度 0 到`pi/4`），然后绘制 8 个点作为其镜像。例如：

```
 (o-y,o+x) x         x (o+y,o+x)

(o-x,o+y) x                  x (o+x,o+y) <-- compute x,y

                   o

(o-x,o-y) x                  x (o+x,o-y)

    (o-y,o-x) x         x (o+y,o-x) 
```

另一个解决方案的建议是，如果您仔细观察这张图片，这非常有意义，它不是绘制 8 个点，而是绘制 4 条水平线：

```
 (o-y,o+x) x---------x (o+y,o+x)

(o-x,o+y) x-----------------x (o+x,o+y) <-- compute x,y

                   o

(o-x,o-y) x-----------------x (o+x,o-y)

    (o-y,o-x) x---------x (o+y,o-x) 
```

现在，如果您计算`(x,y)`角度`[0, pi/4]`并为每个计算点绘制这 4 条线，您将绘制许多水平线填充一个圆圈，而没有任何线与另一条重叠。

### 更新

你在圆的底部得到重叠线的原因是`(x,y)`坐标是四舍五入的，所以在这些位置，它们本身水平`(x,y)` *移动。*

如果你看一下[这张维基百科](http://en.wikipedia.org/wiki/File:Bresenham_circle.svg)图片：

![在此处输入图像描述](../Images/3332a1c08dafabfa9e37bf77a3570f81.png)

您会注意到在圆圈的顶部，一些像素水平对齐。绘制源自这些点的水平线重叠。

如果你不想要这个，解决方案很简单。你必须保留`x`你绘制的前一个（因为顶部和底部是原始的镜像`(x,y)`，你应该保留前一个代表这些线的 y 的 x ）并且仅在该值发生变化时才绘制水平线。如果不是，则表示您在同一条线上。

鉴于您将首先遇到最里面的点，只有当新点不同时，您才应该为前一个点画线`x`（当然，总是画最后一条线）。或者，您可以从角度 PI/4 开始绘制到 0 而不是 0 到 PI/4，并且您将首先遇到外部点，因此每次看到新的`x`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-12T21:02:06.937

我想出了一个算法来绘制已经填充的圆圈。
它遍历将绘制圆的像素，仅此而已。
从这里开始，关于绘制像素函数的速度。

[这是一个 *.gif，它演示了算法的作用！](http://i.imgur.com/iLnUgR1.gif)

至于算法这里的代码：

```
 //The center of the circle and its radius.
    int x = 100;
    int y = 100;
    int r = 50;
    //This here is sin(45) but i just hard-coded it.
    float sinus = 0.70710678118;
    //This is the distance on the axis from sin(90) to sin(45). 
    int range = r/(2*sinus);
    for(int i = r ; i >= range ; --i)
    {
        int j = sqrt(r*r - i*i);
        for(int k = -j ; k <= j ; k++)
        {
            //We draw all the 4 sides at the same time.
            PutPixel(x-k,y+i);
            PutPixel(x-k,y-i);
            PutPixel(x+i,y+k);
            PutPixel(x-i,y-k);
        }
    }
    //To fill the circle we draw the circumscribed square.
    range = r*sinus;
    for(int i = x - range + 1 ; i < x + range ; i++)
    {
        for(int j = y - range + 1 ; j < y + range ; j++)
        {
            PutPixel(i,j);
        }
    } 
```

希望这会有所帮助……一些新用户……抱歉发布死灵。
~什米吉

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-02T09:47:44.007

我需要这样做，这是我想出的代码。此处的可视图像显示了绘制的像素，其中数字是遍历像素的顺序，绿色数字表示使用对称性的列的完成反射绘制的像素，如代码中所示。

![在此处输入图像描述](../Images/1f03b47ff8fc828a7647e025ed367ceb.png)

```
void drawFilledMidpointCircleSinglePixelVisit( int centerX, int centerY, int radius )
{
    int x = radius;
    int y = 0;
    int radiusError = 1 - x;

    while (x >= y)  // iterate to the circle diagonal
    {

        // use symmetry to draw the two horizontal lines at this Y with a special case to draw
        // only one line at the centerY where y == 0
        int startX = -x + centerX;
        int endX = x + centerX;
        drawHorizontalLine( startX, endX, y + centerY );
        if (y != 0)
        {
            drawHorizontalLine( startX, endX, -y + centerY );
        }

        // move Y one line
        y++;

        // calculate or maintain new x
        if (radiusError<0)
        {
            radiusError += 2 * y + 1;
        }
        else 
        {
            // we're about to move x over one, this means we completed a column of X values, use
            // symmetry to draw those complete columns as horizontal lines at the top and bottom of the circle
            // beyond the diagonal of the main loop
            if (x >= y)
            {
                startX = -y + 1 + centerX;
                endX = y - 1 + centerX;
                drawHorizontalLine( startX, endX,  x + centerY );
                drawHorizontalLine( startX, endX, -x + centerY );
            }
            x--;
            radiusError += 2 * (y - x + 1);
        }

    }

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-26T15:30:17.403

我想评论您的更新#2：这个解决方案有效：（但我想我首先需要更多的声誉......）解决方案中有一个小错误，巧合的是在绘制小圆圈时。如果你将半径设置为 1，你会得到

```
00000
00000
01110
00100
00000 
```

要解决这个问题，您需要做的就是将 plot4points 中的条件检查从

```
if (x != 0 && y != 0) 
```

至

```
if (y != 0) 
```

我已经在大大小小的圆圈上进行了测试，以确保每个像素仍然只分配一次。似乎工作得很好。我认为 x != 0 是不需要的。也节省了一点性能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-16T10:42:04.627

更新#2

```
 if (error >= 0)
 {
    if (x != lastY) 
       plot4points(buffer, cx, cy, lastY, x); 
```

至

```
 if (error >= 0)
 {     
    plot4points(buffer, cx, cy, lastY, x); 
```

Circle 和 FillCircle 版本：

```
Const
  Vypln13:Boolean=False;  // Fill Object

//Draw a circle at (cx,cy)
Procedure Circle(cx: integer; cy: integer; radius: integer );
Var
   error,x,y: integer;
Begin  
   error := -radius;
   x := radius;
   y := 0;

   while (x >= y) do
   Begin

     Draw4Pixel(cx,cy, x, y);
     if ( Not Vypln13 And ( x <> y) ) Then Draw4Pixel(cx,cy, y, x);

     error := error + y;
     y := y + 1;
     error := error + y;

     if (error >= 0) Then
     Begin

       if ( Vypln13) then Draw4Pixel(cx, cy, y - 1, x);

       error := error - x;
       x := x - 1;
       error := error - x;
     End;
   End;
End;

Procedure Draw4Pixel(cx,cy,dx,dy: integer);
Begin
  if ( (dx = 0) And (dy = 0) ) then
  begin
    PutPixel (cx , cy , Color13);
    exit;
  End;

  IF Vypln13 Then
  Begin
    HorizontLine (cx - dx,  cx + dx, cy + dy, Color13);
    if ( dy = 0 ) then exit;
    HorizontLine (cx - dx,  cx + dx, cy - dy, Color13);
    exit;
  end;

  PutPixel (cx + dx, cy + dy, Color13);
  if ( dx <> 0 ) then
  begin
    PutPixel (cx - dx, cy + dy, Color13);
    if ( dy = 0 ) then exit;
    PutPixel (cx + dx, cy - dy, Color13);
  End;
  PutPixel (cx - dx, cy - dy, Color13);

End; 
```

# c++ - gdb 自动进入内联函数

> ID：10878212
> 
> 赞同：1
> 
> 时间：2012-06-04T08:12:28.193
> 
> 标签：c++, debugging, gdb, solaris, inline

我正在使用**gdb 6.6 在 solaris 上**调试正在运行的程序，并注意到有时 gdb 会进入（内联）函数，即使我发出了*下一个*命令。我的开发主机最近重新安装了一个稍新的 solaris 10 版本，我确信在重新安装主机之前不存在自动步进。代码使用与 makefile 相同的选项进行编译，并且所有源代码自主机重新安装以来均未更改。

是否有任何设置/新的默认选项会影响我可以检查的 gdb 的调试行为？有谁知道为什么我的 gdb 现在自动执行？它真的很痛苦......

[编辑]澄清：我不是指`inline`关键字，而是在头文件中实现的方法/函数。例子：

```
header.hpp:
class MyClass
{
   public:
      void someFunc() { ... does something }
}

source.cc:
{
   MyClass instance;

   instance.someFunc();     // doing NEXT in gdb will actually STEP into header.hpp
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T08:19:23.537

您的新版本 Solaris 可能包含新版本的 C 或 C++ 编译器。新的编译器可能比以前更积极地优化。检查您的优化标志。如果您使用的是 GCC，您可以禁用内联`-fno-inline`（请注意，在头文件中的类中实现的方法默认是内联的，可以使用禁用`-fno-default-inline`）。如果您使用的是本地 Solaris 编译器，则需要查看其文档。

[这里](https://stackoverflow.com/questions/3732653/gdb-step-over-functionnext-doesnt-seem-to-work)报告了一个类似的问题。在评论中，发布者提到更改调试符号以使用 STABS 解决了该问题。

您在对我的回答的评论中提到 STABS 有效，但不可接受。此外，您提到您无法通过一个简单的示例重现该问题。如果您每次都必须重新编译整个项目以执行测试，则很难解决此问题。尝试将问题隔离到项目中的几个源文件中。看看他们有什么共同点（他们是否包含一个共同的头文件，他们是否使用 a `pragma`，编译选项是否与其他源文件略有不同等），并尝试创建一个具有相同问题的小示例。这将使您更容易确定问题的根本原因并确定如何解决它。没有这些数据，我们只是盲人领路。

# sql - 如何声明 DATALINK 类型？Postgresql 中的外国数据包装器

> ID：10878214
> 
> 赞同：0
> 
> 时间：2012-06-04T08:12:38.783
> 
> 标签：sql, postgresql-9.1, sqldatatypes

我正在尝试对数据库中的字段使用 DATALINK 类型。有人可以逐步写下如何做到这一点吗？

我已经宣布：

```
CREATE TABLE casting_test
(
  id serial NOT NULL,
  url datalink
)
WITH (
  OIDS=FALSE
); 
```

并得到不存在这样的数据类型的错误。SQL 状态：42704。

首先要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:27:27.513

PostgreSQL[不支持 DATALINK](http://www.postgresql.org/docs/9.2/static/unsupported-features-sql-standard.html)。

# objective-c - 如何将 NSDictionary 解析为数组数组？

> ID：10878215
> 
> 赞同：4
> 
> 时间：2012-06-04T08:12:42.747
> 
> 标签：objective-c, nsmutablearray, nsarray, nsdictionary

[这](http://pastebin.com/jC0chECY)是我的数据模式，我想创建一个节数组，在这种情况下，每个节将包含该节中的一个行数组。我看了以下问题：

*   [使用 NSMutableArray 的二维数组](https://stackoverflow.com/questions/724772/2d-arrays-in-objective-c)
*   [Objective-C 多维数组](https://stackoverflow.com/questions/7459931/objective-c-multi-dimensional-array)

和其他一些帖子，但没有得到任何结果。谁能指导我如何创建一组部分，每个部分都应包含自己的行..提前致谢

**编辑** 我已经解析了我的数据，pastebin 链接上的日志结果是一个 NSDictionary，这是我获取和解析它的方式：

```
 NSString*key1=[ result objectForKey:@"key" ];                
         NSString *s1=[@"http://" stringByAppendingString:server.text];
         NSString *s2=[s1 stringByAppendingString:@"/ipad/button.php"];
         NSURL *url2=[NSURL URLWithString:[s2 stringByAppendingString:[@"?key=" stringByAppendingString:key1]]];

        NSData *data2=[NSData dataWithContentsOfURL:url2];
         result2=[NSJSONSerialization JSONObjectWithData:data2 options:NSJSONReadingMutableContainers error:nil]; 
```

pastebin 中的结果是这样的：`NSLog(@"Result: %@", result2);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:44:50.477

您的数据采用 JSON 格式，因此只需使用`NSJSONSerialization`该类为您创建数组数组。

```
NSString *yourData;
NSData *data = [yourData dataUsingEncoding:NSUTF8StringEncoding];
NSArray *arrayOfArrays = [NSJSONSerialization JSONObjectWithData:data 
    options:NSJSONReadingAllowFragments error:nil]; 
```

要在表格视图中使用您的部分数组，只需使用常用的表格视图`datasource`方法：

```
// numberOfSectionsInTableView
return [array count];

// numberOfRowsInSection
return [[array objectAtIndex:section] count];

// cellForRowAtIndexPath
cell.textLabel.text = [[[array objectAtIndex:indexPath.section] 
   objectAtIndex:indexPath.row]
      objectForKey:"name"]; 
```

# java - Java 分页器

> ID：10878216
> 
> 赞同：4
> 
> 时间：2012-06-04T08:12:44.267
> 
> 标签：java, pagination, playframework-2.0

我正在用 play 2 和 java 编写小型网络应用程序。我有实体列表，现在我要将它们分成页面。我从 Twitter Bootstrap 获取分页组件，使我的数据库查询返回实体页面，以及.. 我应该使用哪种方式来构建页面导航器？

我的意思如下：例如，我总共有 20 页，要显示 12 页。我有 5 个位置来显示每页按钮。是否有一些库或片段可以生成如下内容：1 .. 11 12 13 .. 20。我知道这并不难，我已经在我以前的项目中实现了它......但是有一个 jar 可以解决这个问题我会很酷。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T14:15:36.273

我可以分享我所拥有的，我也在使用引导程序

```
package models.helper;

import java.util.ArrayList;
import java.util.List;

public class Pager<T> {

    public List<T> entities;

    public int page;

    public int pages;

    public String urlTemplate;

    public int resultsPerPage;

    public List<Integer> getPageList(){
        List<Integer> pageList = new ArrayList<Integer>(pages);
        for(int i = 1; i<=pages;i++){
            pageList.add(i);
        }
        return pageList;
    }

    public int getPrevious(){
        return page -1;
    }

    public int getNext(){
        return page +1;
    }

    public boolean isCurrent(Integer page){
        return this.page == page - 1;
    }

    public boolean isLast(){
        return page == pages -1;
    }

    public boolean isFirst(){
        return page == 0;
    }

    public String getUrl(Integer page){
        return urlTemplate
                .replace("-1", Integer.toString(resultsPerPage))
                .replace("-2", Integer.toString(page-1));
    }

    public String getNextUrl(){
        if(isLast()){
            return "#";
        }
        return urlTemplate
                .replace("-1", Integer.toString(resultsPerPage))
                .replace("-2", Integer.toString(getNext()));
    }

    public String getPreviousUrl(){
        if(isFirst()){
            return "#";
        }
        return urlTemplate
                .replace("-1", Integer.toString(resultsPerPage))
                .replace("-2", Integer.toString(getPrevious()));
    }
} 
```

我的服务返回这些对象之一，在我的模板中我有一个寻呼机标签

```
@(pager:models.helper.Pager[_])
<div class="pagination">
  <ul>
    <li class="prev@if(pager.isFirst){ disabled}">
        <a href="@pager.getPreviousUrl">&larr; Previous</a>
    </li>
    @for(page <- pager.getPageList){
    <li @if(pager.isCurrent(page)){class="active"}>
        <a href="@pager.getUrl(page)">@page</a>
    </li>
    }
    <li class="next@if(pager.isLast){ disabled}">
      <a href="@pager.getNextUrl">Next &rarr;</a>
    </li>
  </ul>
</div> 
```

模板网址将像这样构建（scala）第一个参数是“resultsPerPage”，第二个参数是实际的“页面”

```
pager.urlTemplate = routes.Application.myAction(-1, -2).url 
```

-1 和 -2 参数有点难看，但直到现在我还没有找到更好的解决方案

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T10:45:03.320

据我所知，模板中不支持分页，但幸运的是`Ebean`支持它，所以你只需要在模板中做一些工作。

检查[计算机数据库示例应用程序](https://github.com/playframework/Play20/tree/master/samples/java/computer-database)，那里实现了计算机列表的分页（它也使用 Twitter Bootstrap，所以你只需要复制和粘贴代码）

当然，您也可以在下载到计算机的 Play 版本中找到示例应用程序。

# java - 有一个共同的 SpringApplicationContextProvider 供所有 bean spring-managed 使用，否则

> ID：10878224
> 
> 赞同：3
> 
> 时间：2012-06-04T08:13:32.627
> 
> 标签：java, spring

我有一个 ApplicationContextProvider 类，它可以用来从不受 Spring 管理的 bean 访问 Spring ApplicationContext。像[这里提到的东西](http://sujitpal.blogspot.in/2007/03/accessing-spring-beans-from-legacy-code.html)

但是对于 Spring 托管的 bean，我可以让它们成为 ApplicationContextAware，这样它们就可以访问 ApplicationContext。

我的问题是，使用常见的 ApplicationContextProvider 从 spring 管理的 bean 获取 spring 应用程序上下文是一个好主意，还是应该继续使用 ApplicationContextAware？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:10:07.023

使用对应用程序上下文进行静态引用的单例是自找麻烦。在任何情况下使用这样的实用程序类几乎都不是一个好主意。在处理遗留 Web 应用程序时，请[`WebApplicationContextUtils`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/context/support/WebApplicationContextUtils.html)改用。

在从 EJB 2.1 迁移到 Spring 的过程中，我曾经在一个项目中重新发明了这个解决方案——但是在迁移之后，我们摆脱了它并且可以再次休眠。

回到您的问题 - 将此类实用程序用于 Spring*托管*bean 完全没有意义。老实说，我也很少需要`ApplicationContextAware`接口。Spring 应该注入依赖项，你不应该一直向 Spring 询问它们！

当您需要引用的实用程序类（托管和非托管 bean）时，您能否向我们展示一些用例？看起来您拒绝接受 Spring 为您提供的支持。

# c# - 如何在 SQL Server 2008 中通过单个查询更新两个表

> ID：10878227
> 
> 赞同：1
> 
> 时间：2012-06-04T08:14:20.797
> 
> 标签：c#, asp.net, sql-server-2008

> **可能重复：**
> [如何在 SQL Server 2005 的一个语句中更新两个表？](https://stackoverflow.com/questions/2044467/how-to-update-two-tables-in-one-statement-in-sql-server-2005)

我有两张表，需要更新一张表并对另一张表生效。

这两个表通过关系链接

```
t1.col1 PK , t2.col1 FK   

t1                t2
_____________  _____________
|col1|  col2|  |col1 |col2 |            
|----|------|  |-----|-----|                             
|1   |  a   |  | 1   | d   |            
|2   |  b   |  | 2   | e   |            
|3   |  c   |  | 3   | f   |            
|____|______|  |_____|_____| 
```

如何在 SQL Server 2008 的一个查询中更新这两个表？

我想做这样的事情

```
 Update College 
 Inner Join Class ON College.CollegeId = Class.CollegeId 
 set College.CollegeId = '33333333-3333-3333-3333-333333333333',
     Class.CollegeId = '33333333-3333-3333-3333-333333333333' 
 where 
     College.CollegeId = '071887ea-3c93-40ce-a112-3b849d352064' 
```

但我收到一个错误：

> 关键字“Inner”附近的语法不正确

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:28:48.610

您可以这样实现：
您可以使用事务二确保两个 UPDATE 语句被正确处理。

```
BEGIN TRANSACTION

UPDATE Table1
  SET Table1.col1= 'XXXX' 
FROM Table1 T1, Table2 T2
WHERE T1.id = T2.id
and T1.id = '010008'

UPDATE Table2
SET Table2.col1 = 'XXXX'
FROM Table1 T1, Table2 T2
WHERE T1.id = T2.id
and T1.id = '010008' 
```

犯罪

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T09:55:05.200

无论您是在一个连接上的一个查询中使用一条语句更新 2 个表，还是在一个连接上的一个查询中使用两条语句更新 2 个表，这实际上是一回事。

您可以设置参数以传递给脚本，然后您只需发送一次值并运行一次脚本，这又将只使用一个连接。

```
declare @OldCollegeID
declare @NewCollegeID

Update Class set CollegeID = @NewCollegeID
where CollegeID = @OldCollegeID

Update College set CollegeID = @NewCollegeID
where CollegeID = @OldCollegeID 
```

但是，我猜您要同时执行此操作的原因是因为由于关系，您不能在不更新课程的情况下先更新大学？由于外键 Class.CollegeID，尝试更新 College.CollegeID 将导致错误。反之亦然。除非您要更新到的 Class.CollegeID 存在于 College.CollegeID 中，否则 Class.CollegeID 将不可更新。在这种情况下，我将提出以下建议：

```
Create Procedure UpdateCollegeID
(
   declare @OldCollegeID varchar(100),
   declare @NewCollegeID varchar(100)
)

as

declare @CollegeName varchar(100)
declare @ClassName varchar(100)

set @CollegeName = (select CollegeName from College where CollegeID = @OldCollegeID)
set @ClassName = (select ClassName from Class where CollegeID = @OldCollegeID)

Insert into College (CollegeID, CollegeName)
Values(@NewCollegeID, @NewCollegeName)

Insert into Class (ClassID, CollegeID)
Values(@ClassID, @NewCollegeID, @ClassName)

Delete from Class where CollegeID = @OldCollegeID
Delete from College where CollegeID = @OldCollegeID 
```

This will update all your old college records with the new id and you wont have to worry. You might have to do something differently in your front end application to cater for this depending on what it is. Keeping it a stored procedure will allow you to exec it and everything will update to the parameters passed.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-04T08:22:58.487

您可以执行以下操作

```
 UPDATE T1 INNER JOIN T2 ON T1.COL1 = T2.COL1 SET T1.COL2 = 'X', T2.COL2= 'Y'
 WHERE T1.COL1 = 2 
```

快乐编码！！！

# cocoa - 是否可以将 PNG 图像从桌面拖放到正在运行的 Cocoa 应用程序中？

> ID：10878230
> 
> 赞同：0
> 
> 时间：2012-06-04T08:14:51.673
> 
> 标签：cocoa, drag-and-drop, xcode4.3, nsimageview

我想构建一个 Cocoa 应用程序，我可以在其中从文件夹或桌面获取 PNG，然后将其拖放到已经运行的 Cocoa 应用程序窗口中，该应用程序将获取该 png 并简单地将其显示在帆布。那可能吗？如果是这样，我可以从哪里开始寻找任何线索？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:50:55.040

如果有人关心，为了进行拖放，您可以使用 NSDraggingDestination。

# c# - System.InvalidOperationException：指定的包含路径无效

> ID：10878232
> 
> 赞同：1
> 
> 时间：2012-06-04T08:14:54.657
> 
> 标签：c#, asp.net-mvc, model-view-controller

我正在尝试在索引页面上获取项目列表 - 但我不断收到错误。我尝试了不同的代码，下面是我尝试过的最新代码 - 但它仍然无法正常工作。它给了我这个错误：

System.InvalidOperationException：指定的包含路径无效。EntityType 'StoreWeb.Models.Project' 未声明名为 'Collections' 的导航属性

我认为这是因为我不知道如何从 Project 表中获取 collectionID。对于 Project 表，它有 collectionID 作为外键。（一个项目必须有 1 个集合。一个集合可能有项目。）

有人可以帮帮我吗？这是我所拥有的：

**楷模**

* * *

Collection.cs [修改]

* * *

```
[Table("Collection")]
public class Collection
{
    [Key]
    public string collectionID { get; set; }
    public string collectionName { get; set; }

    public List<Project> Projects { get; set; }
} 
```

* * *

Project.cs [修改]

* * *

```
[Table("Project")]
public class Project
{
    [Key]
    public string projectID { get; set; }
    public string projectName { get; set; }
    public string projectCity { get; set; }
    public string collectionID { get; set; } // This is what was needed!

    public virtual Collection Collection { get; set; }
} 
```

对于 Project 类，它的 collectionID 作为外键。（一个项目必须有 1 个集合。一个集合可能有项目。）

* * *

产品实体.cs

* * *

```
public class ProductEntities : DbContext
{
    public DbSet<Collection> Collections { get; set; }
    public DbSet<Project>    Projects  { get; set; }
} 
```

**控制器**

* * *

项目控制器 [修改]

* * *

```
using System.Data.Entity;

public class ProjectController : Controller
{
    ProductEntities productDB = new ProductEntities();

    //
    // GET: /Project/

    public ActionResult Index()
    {
        var projectModel = productDB.Projects.Include(m => m.Collection);
        return View(projectModel);
    } 
```

**意见**

* * *

视图/项目/Index.chtml

* * *

```
@model IEnumerable<StoreWeb.Models.Project>

@{
     ViewBag.Title = "Index";
}
<h1>PROJECTS</h1>

     @foreach (var project in Model)
     {
         <br /><a href="@Url.Action("Details", new { id = project.projectID })">@project.projectName</a> 
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T08:32:29.940

只是一个错字

```
public ActionResult Index(string project)
    {
        var projectModel = productDB.Projects.Include("Collection");
        return View(projectModel);
    } 
```

而不是“收藏”

**每日提示）**

在您的使用中，添加

```
using System.Data.Entity; 
```

然后你可以制作

```
var projectModel = productDB.Projects.Include(m => m.Collection); 
```

您将避免“字符串”拼写错误。

**编辑**

对于您的课程，如果您使用的是 code First（您是）

删除“ForeignKeys”（例如项目中的collection_id），然后执行

```
//remove the "Bind Exclude"
public class Collection
{
    public int Id { get; set; }//make it int, it will be taken as the primary key
    public string collectionName { get; set; }

    public virtual IList<Project> Projects { get; set; }//make it virtual, lazy loading inside
} 
```

在您的项目类中

```
//remove any "collection_Id" property
public class Project
{
    public int Id { get; set; }//make it it, rename it, it will be taken as PK
    public string projectName { get; set; }
    public string projectCity { get; set; }

    public virtual Collection Collection { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-27T00:19:07.600

**注意：对于 EF CORE 3+ 或 5+：**

我知道这已得到解答，但在逆向工程或搭建数据库时，我使用 EF Core 遇到了类似的问题：

当我在索引中涉及多个属性时，这个问题在我的 DbContext 中的索引上出现了包含属性。

**在我的 OnModelCreating 方法中从 DB 进行逆向工程或脚手架之后，我得到了这个：**

```
entity.HasIndex(e => e.BusinessName, "NonClusteredIndex-20190824-150740")
                 .IncludeProperties(new[] { "Contentid", "Stateid", "Cityid", "businessurl", "UserID" }); 
```

**然后我把它改成了这个**

```
entity.HasIndex(e => e.BusinessName, "NonClusteredIndex-20190824-150740")
                 .IncludeProperties(bmaster => new { bmaster.Contentid, bmaster.Stateid, bmaster.Cityid, bmaster.Businessurl, bmaster.UserId }); 
```

这为我解决了。在这种情况下，EF Core 无法使用字符串参数，我希望这将在新版本的 EF Core 中得到修复。

# iphone - 加载视图时导航栏跳跃

> ID：10878239
> 
> 赞同：2
> 
> 时间：2012-06-04T08:15:55.683
> 
> 标签：iphone, ios, uinavigationcontroller, core-animation, uinavigationbar

我已经实现了一个容器视图控制器（ios5），现在我尝试实现自定义动画/转换来切换视图控制器。

但是在实现任何涉及 UINavigationController 的动画时，我遇到了一个问题，结果不符合预期。例如，如果我在显示带有导航栏的控制器时执行从左侧翻转的动画，导航栏的位置会保持在原始位置下方 44pxs 并且在执行动画后导航栏将平滑地移动到原始位置，这确实是丑陋的...

我执行的每个动画都会发生这种情况，所以我想它必须只与导航控制器相关。

这是我用于翻转过渡的代码

```
[self transitionFromViewController:fromViewController
                toViewController:toViewController
                        duration:1.0
                         options:UIViewAnimationOptionTransitionNone
                      animations:^{
                        [UIView beginAnimations:@"animation2" context:nil];
                        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
                        [UIView setAnimationDuration: 0.7];
                        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:containerView cache:NO]; 
                        [UIView commitAnimations];
                      }
                      completion:^(BOOL finished) {
                        [toViewController didMoveToParentViewController:self];
                        [fromViewController removeFromParentViewController];
                      }]; 
```

我还尝试了以下

```
[self transitionFromViewController:fromViewController
                toViewController:toViewController
                        duration:1.0
                         options:UIViewAnimationOptionTransitionFlipFromLeft
                      animations:^{
                      }
                      completion:^(BOOL finished) {
                        [toViewController didMoveToParentViewController:self];
                        [fromViewController removeFromParentViewController];
                      }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:46:21.760

我有类似的问题`NavigationController`and `Container controller`。实际上它是窗口底部的工具栏。我的解决方案是先隐藏工具栏，然后在主转换完成后显示带有动画的工具栏。它看起来像是整个动画的一部分。

这是我隐藏和显示工具栏的方式：

```
[toNavController setToolbarHidden:YES];
[self transitionFromViewController:fromViewController
                toViewController:toNavController
                        duration:1.0
                         options:UIViewAnimationOptionTransitionFlipFromLeft
                      animations:^{
                      }
                      completion:^(BOOL finished) {
                        [toNavController didMoveToParentViewController:self];
                        [fromViewController removeFromParentViewController];

                        [toNavController setToolbarHidden:NO animated:YES];
                      }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:45:37.270

根据 iphone 或 ipad 的导航栏框架及其方向设置为 iphone 中的纵向

```
 [self.navigationController.navigationBar setFrame:CGRectMake(0, 20, 320, 44)]; //for iphone  simarly for ipad and its orientation 
```

您需要将导航栏框架从状态栏更改为其实际位置，即加 20

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T14:02:58.030

在 viewDidLoad 中将 frame.origin.y 设置为 1。您仍然有跳跃但有 1 个像素。

# unix - 更改二进制而不更改源代码

> ID：10878240
> 
> 赞同：0
> 
> 时间：2012-06-04T08:16:00.183
> 
> 标签：unix, binary, timestamp, elf

我有以下要求：查找我的二进制文件是否已更改。

我的源代码没有改变。当我重新编译二进制文件（不更改源代码）时，我注意到二进制文件已更改。不是大小，而是内容。

稍微调试一下，我发现二进制文件中有一个叫做“链接时间”的东西。这是链接二进制文件时的实际时间戳。现在由于每次编译都会给出不同的时间戳，因此我的二进制内容总是不同的。但实际上应该是一样的。

有人可以建议我一种方法来确定二进制文件是否由于源代码的更改而实际发生了更改，而不是其他任何东西。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T03:09:19.167

与 Windows（每个 .obj 文件在其文件头中都有一个编译时间戳）不同，UNIX 对象文件，特别是`ELF`文件*不*编码任何类型的时间戳。

但是，如果你的源码使用`__TIME__`和`__DATE__`宏，那么编译产生的目标文件显然会发生变化。`-g`此外，如果您正在构建二进制文件，则可以将包括编译时间戳在内的各种信息记录为调试信息的一部分。

最后，您使用的链接器可能确实记录了链接时间戳（作为供应商扩展）。

您的首要任务应该是*了解*从一个构建到另一个构建的差异来自何处。

如果来自`__DATE__`和`__TIME__`，请从源中消除它们。

如果来自调试信息，请在通过`strip -g`.

如果来自供应商链接器扩展，请查看是否有禁用此类时间戳的标志。如果没有，您将不得不编写一个仅比较您感兴趣的部分的工具。例如，您可以使用`readelf -x.text a.out`等来仅比较`.text`部分（您还需要比较`.data`、`.rodata`，并且可能还有很多其他）。

# php - 以cvs格式导出 sql数据

> ID：10878241
> 
> 赞同：0
> 
> 时间：2012-06-04T08:16:13.140
> 
> 标签：php

我有一个表名 tblstuden。它包含 ids studentname、rollnumberm 和 classname。我想以 CSV 格式下载这些数据。这怎么可能？

我可以通过 CSV 文件将数据上传到表格中。上传代码如下。它对我有用。但现在我想以 CSV 格式下载数据。

```
<?php

if(isset($_POST['submit']))
{
    $row = 1;
$file1 = $_FILES['file']['tmp_name'];
$file = fopen($file1, "r");
while (($data = fgetcsv($file, 8000, ",")) !== FALSE) {
    $num = count($data);
    $row++;
    for ($c=0; $c < $num; $c++) {
       $data[$c];}
    echo $data[0];

    $name = $data[0];
    }

fclose($file); 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:38:14.190

您可以使用此代码下载 csv 文件。

```
$getRecord = mysql_query("SELECT id, studentname, rollnumber, classname FROM tblstuden");

while ($row = mysql_fetch_array($getRecord )) {
$csvFile .= $row['id'].",". $row['studentname'].",". $row['rollnumber'].",".$row['classname']."\r\n";
}

header("Content-type: application/octet-stream");
header("Content-disposition:attachment; filename="."testCSV.csv");

echo $csvFile; 
```

# php - 如何检查我的服务器是否分配了任何 cron 作业

> ID：10878242
> 
> 赞同：4
> 
> 时间：2012-06-04T08:16:13.687
> 
> 标签：php, cron, cpanel, cron-task

是否可以使用 putty 或 winscp 或其他一些检查方式检查分配给我的服务器的 cron 作业列表。因为我可以在我的 cpanel 旁边找到 cron 作业选项卡

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T08:17:46.223

您可以检查当前用户

```
crontab -l 
```

有关可用的命令列表[crontab 用法](http://www.computerhope.com/unix/ucrontab.htm)

对于所有用户来说，看看：

```
/var/cron/tabs
#OR
/var/spool/cron/crontabs 
```

# html - SSE 和 Servlet 3.0

> ID：10878243
> 
> 赞同：19
> 
> 时间：2012-06-04T08:16:16.150
> 
> 标签：html, servlets, server-sent-events

我在页面加载时注册了一个典型的 SSE：

**客户：**

```
sseTest: function(){

var source = new EventSource('mySSE');
source.onopen = function(event){
console.log("eventsource opened!");
};

source.onmessage = function(event){
var data = event.data;
console.log(data);
document.getElementById('sse').innerHTML+=event.data + "<br />";
};
} 
```

我的 Javascript-Debugger 说，“事件源打开了！” 成功了。

**我的服务器代码是 Servlet 3.0：**

```
import java.io.IOException;
import java.io.PrintWriter;
import java.util.Random;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet(urlPatterns={"/mySSE"}, name = "hello-sse", asyncSupported=true)
public class MyServletSSE extends HttpServlet {

@Override
public void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

resp.setContentType("text/event-stream");
resp.setCharacterEncoding("UTF-8");

Random random = new Random();
PrintWriter out = resp.getWriter();

//AsyncContext aCtx = req.startAsync(req, resp);
//ServletRequest sReq = aCtx.getRequest();

String next = "data: " + String.valueOf(random.nextInt(100) + 1) + "\n\n";
//out.print("retry: 600000\n"); //set the timeout to 10 mins in milliseconds
out.write(next);
out.flush();
// do not close the stream as EventSource is listening
//out.close();
//super.doGet(req, resp);
}
} 
```

代码有效！客户端代码每 3 秒触发一次 doGet() 方法并检索新数据。

**问题：** 但是，我想知道**如何**通过使用新的 Servlet 3.0 期货（例如 Async-Support 或 asyncContext.addListener(asyncListener) 或其他我不知道的东西）来使这段代码更好。由于我从不关闭流，我想**知道我的服务器将如何扩展**？

从理论上讲，最好的方法是在有新数据时通过服务器端代码显式触发 doGet() 方法，因此客户端不需要触发客户端“onmessage()”方法，因此服务器端“doGet()”-每 3 秒获取一次新数据的方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-25T17:55:15.520

这是一个很好的问题，这是一个完整的工作示例（Servlet 3.0 / Java EE 6）

一些注意事项：

1.  它通过它处理“浏览器选项卡/窗口关闭”`out.checkError()`也调用`flush()`
2.  我写的很快，所以我确定它可以改进，只是一个POC，不要在测试前在生产中使用

**Servlet：（**为简洁起见省略了导入，将很快更新完整的要点）

```
@WebServlet(urlPatterns = {"/mySSE"}, asyncSupported = true)
public class MyServletSSE extends HttpServlet {

  private final Queue<AsyncContext> ongoingRequests = new ConcurrentLinkedQueue<>();
  private ScheduledExecutorService service;

  @Override
  public void init(ServletConfig config) throws ServletException {
    final Runnable notifier = new Runnable() {
      @Override
      public void run() {
        final Iterator<AsyncContext> iterator = ongoingRequests.iterator();
        //not using for : in to allow removing items while iterating
        while (iterator.hasNext()) {
          AsyncContext ac = iterator.next();
          Random random = new Random();
          final ServletResponse res = ac.getResponse();
          PrintWriter out;
          try {
            out = res.getWriter();
            String next = "data: " + String.valueOf(random.nextInt(100) + 1) + "num of clients = " + ongoingRequests.size() + "\n\n";
            out.write(next);
            if (out.checkError()) { //checkError calls flush, and flush() does not throw IOException
              iterator.remove();
            }
          } catch (IOException ignored) {
            iterator.remove();
          }
        }
      }
    };
    service = Executors.newScheduledThreadPool(10);
    service.scheduleAtFixedRate(notifier, 1, 1, TimeUnit.SECONDS);
  }

  @Override
  public void doGet(HttpServletRequest req, HttpServletResponse res) {
    res.setContentType("text/event-stream");
    res.setCharacterEncoding("UTF-8");

    final AsyncContext ac = req.startAsync();
    ac.setTimeout(60 * 1000);
    ac.addListener(new AsyncListener() {
      @Override public void onComplete(AsyncEvent event) throws IOException {ongoingRequests.remove(ac);}
      @Override public void onTimeout(AsyncEvent event) throws IOException {ongoingRequests.remove(ac);}
      @Override public void onError(AsyncEvent event) throws IOException {ongoingRequests.remove(ac);}
      @Override public void onStartAsync(AsyncEvent event) throws IOException {}
    });
    ongoingRequests.add(ac);
  }
} 
```

**JSP：**

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
        <script>
            function test() {
                var source = new EventSource('mySSE');
                source.onopen = function(event) {
                    console.log("eventsource opened!");
                };

                source.onmessage = function(event) {
                    var data = event.data;
                    console.log(data);
                    document.getElementById('sse').innerHTML += event.data + "<br />";
                };
            }
            window.addEventListener("load", test);
        </script>
    </head>
    <body>
        <h1>Hello SSE!</h1>
        <div id="sse"></div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T14:05:02.470

有用的例子。

人们可能会为 startAsync() 得到“IllegalStateException：不支持”，在这种情况下不要忘记：

```
@WebServlet(urlPatterns = "/Sse", asyncSupported=true) 
```

或使用

```
request.setAttribute("org.apache.catalina.ASYNC_SUPPORTED", true); 
```

从[这个](https://stackoverflow.com/questions/7749350/illegalstateexception-not-supported-on-asynccontext-startasyncreq-res)帖子

# java - 对 .class 字段的反思

> ID：10878245
> 
> 赞同：1
> 
> 时间：2012-06-04T08:16:17.957
> 
> 标签：java, reflection

阅读类加载， http: [//onjava.com/pub/a/onjava/2005/01/26/classloading.html](http://onjava.com/pub/a/onjava/2005/01/26/classloading.html)，遇到-“......每当我们编译任何Java文件时，编译器都会嵌入一个公共的、静态的、最终的字段，名为 class，类型为 java.lang.Class，在发出的字节码中。由于该字段是公共的，我们可以使用点分表示法访问它，如下所示：

java.lang.Class 类 = Myclass.class; …………”

我尝试使用反射访问该字段（Myclass.class），这很疯狂，我同意但仍然:) 我得到 java.lang.NoSuchFieldException: class

```
Myclass myObject = new Myclass; 
System.out.println(myObject.getclass().getField("class")); 
```

那么是运行时而不是添加静态 .class 字段的编译器吗？即使那样，为什么不能使用反射访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:22:15.270

这本身不是字段访问，而是 Java 语言语法的一种[表达](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.2)方式，看起来就像是字段访问。我想编译器可以将这样的合成字段放入类文件中，尽管我不知道有一个这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:22:28.863

一般来说，Java 语言规范说这种形式的表达式必须返回相应的类对象，但它没有定义必须如何完成。Eclipse JDT 编译器实际上并没有把它变成一个字段。它创建了一个名为“$class”的方法，每当您访问 myClass.class 之类的内容时都会调用该方法。

# security - 如何防止客户端重新发送嗅探命令？

> ID：10878247
> 
> 赞同：1
> 
> 时间：2012-06-04T08:16:47.910
> 
> 标签：security, networking, theory, wifi

这是场景：我有一个客户端-服务器-应用程序，其中客户端将加密数据发送到服务器，服务器根据客户端数据执行例程。如何防止有人嗅探发送的数据并将其重新发送到服务器，以便服务器执行命令并可能让未经授权的人访问敏感数据甚至授予登录权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:23:51.970

要求客户端在发送任何命令之前从服务器获取一个[随机数](http://en.wikipedia.org/wiki/Cryptographic_nonce)- 一个只使用一次的数字。在将 nonce 发送给客户端后，来自该客户端的任何命令如果不包括您最后提供的 nonce，显然是伪造的。即使有人嗅到了 nonce，他们也无法使用它，因为他们不知道创建自己的消息所需的加密密钥，同样的人将无法重用旧请求，因为它们不会匹配任何当前活跃的随机数。

编辑：显然，您可以使用各种智能方法在客户端上生成随机数以避免额外的往返，但这会比较棘手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:22:58.990

您可以在您的请求中包含一个[nonce](http://en.wikipedia.org/wiki/Cryptographic_nonce)，并拒绝任何重用已经看到的 nonce 的请求。

# oracle - 将 10 g 升级到 11g 清单

> ID：10878257
> 
> 赞同：0
> 
> 时间：2012-06-04T08:17:50.500
> 
> 标签：oracle, oracle11g, oracle10g, upgrade

10g平台上有大量的存储过程。（几乎 500 个 SP）每个 SP 可能有循环、获取等。

我想问你是否有一个很酷的方法来控制所有当前运行在 10g 上的 SP，并保证它在 11g 上运行。

我有一个 10 g 的开发服务器 1，另一个开发服务器是 11 g。我可以用它们来证明上面的提议。

例如，我知道在 10 g 上，如果您使用循环，并且在循环期间更新语句不会影响循环数据，但会影响 11g。我可能需要考虑更多的情况。如果您有什么高明的想法请告诉我，否则我会手动逐个检查它们，这需要很多时间，有时人为控制可能会很弱。

重要说明：据说如果你从一个或多个表中选择一些数据，并且如果你在循环中使用它，那么在de loop期间，如果你在循环case之间更新和提交，它会影响游标中的选定数据。（ @11g）但这并没有发生@10g 版本。如果您听到类似的话，请纠正我。

示例案例；

```
CREATE TABLE vty_musteri(
  musterino    NUMBER  NOT NULL,
  subeadi      VARCHAR2(61),
  kayitzamani  VARCHAR2(20)
);

INSERT INTO vty_musteri (musterino, subeadi, kayitzamani )
  VALUES (12345, 'AMSTERDAM', '05/30/2012 15:11:13');
COMMIT;

CREATE UNIQUE INDEX vty_musteri_idx ON vty_musteri (musterino);

SELECT * FROM vty_musteri;

CREATE OR REPLACE PROCEDURE krd_upd_silseomusteri_sp(RC1 in out  SYS_REFCURSOR) AS
  v_musterino NUMBER := 12345;

BEGIN

 OPEN RC1 FOR
    SELECT  m.musterino, m.subeadi, m.kayitzamani
      FROM vty_musteri m
     WHERE m.musterino = v_musterino;

   update vty_musteri
     set subeadi     = 'PORTO',
         kayitzamani = (SELECT TO_CHAR(SYSDATE, 'MM/DD/YYYY HH24:MI:SS')
                          FROM dual)
   where musterino = v_musterino;

  COMMIT; 
```

**毕竟在 PLSQL 上运行这个测试：**

```
 DECLARE
       --test
       vRecTip   SYS_REFCURSOR;
       TYPE vRecTipK IS RECORD(
          musterino   NUMBER,
          subeadi     VARCHAR2(61),
          kayitzamani VARCHAR2(20)

          );
       v_SeoTip vRecTipK;
    BEGIN

       krd_upd_silseomusteri_sp(rc1 => vRecTip);

       IF vRecTip%ISOPEN THEN
          LOOP
             FETCH vRecTip
                INTO v_SeoTip;
             EXIT WHEN vRecTip%NOTFOUND;

             dbms_output.put_line('The Value : ' || v_SeoTip.musterino || ' - ' || v_SeoTip.subeadi || ' - ' || v_SeoTip.kayitzamani);

          END LOOP;
       END IF;
       COMMIT;
    END;   
END; 
```

如果你在 10g 上运行它，你会看到 AMSTERDAM，但在 11G 上，它是 PORTO。

要解决这个问题; 我在 sp 中添加了如下提示：

```
 SELECT /*+ full(m)*/ m.musterino, m.subeadi, m.kayitzamani 
```

是不是很奇怪？获得阿姆斯特丹的任何替代建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:05:14.620

我们在迁移过程中偶然发现的一件事是不应该在 10.x 上工作的查询（但无论如何都可以）在 11.x 上不再工作

如果您的查询中有不明确的列引用，就会发生这种情况。

像这样的东西：

```
SELECT name,
       f.some_col,
       b.other_col
FROM foo f, 
  JOIN bar b ON f.id = b.fid 
```

如果两个表中都存在该列`name`，则 10.x 将运行该语句 - 这是一个错误。

此错误 (BugID: 6760937) 已修复，并使该语句（正确地）在 11.x 中失败

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:36:54.917

基本的 PLSQL 结构应该完全相同。这里列出了一些陷阱：

[http://www.help2ora.com/index.php/2011/08/04/be-careful-when-migrating-difference-between-oracle-10g-and-11g/](http://www.help2ora.com/index.php/2011/08/04/be-careful-when-migrating-difference-between-oracle-10g-and-11g/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:09:16.080

> 要解决这个问题; 我在 sp 中添加了如下提示：

SELECT / *+ full(m)* / m.musterino, m.subeadi, m.kayitzamani

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-02T04:43:22.117

最近我已经迁移到 Oracle 11g。面临一些前所未有的问题。我为此写了一篇博文。看看[http://learncodewrite.blogspot.in/2017/04/migrating-to-oracle-11g-from-oracle-10g.html?m=1](http://learncodewrite.blogspot.in/2017/04/migrating-to-oracle-11g-from-oracle-10g.html?m=1)。

# jquery - 如何通过jquery解析json并从服务器端返回json

> ID：10878258
> 
> 赞同：0
> 
> 时间：2012-06-04T08:18:03.297
> 
> 标签：jquery, asp.net

我只是通过 jquery 调用我的服务器端方法，而我的服务器端方法看起来像

```
[WebMethod]
public static Dictionary<string,string> GetPayPalData()
{
    Dictionary<string, string> rmPayPal = new Dictionary<string, string>();

    int counter = 0;
    Invoice _selectedInvoice = SelectedInvoice;
    rmPayPal.Add("first_name", "Tridip");
    rmPayPal.Add("last_name", "BBA");

    foreach (InvoiceItem x in _selectedInvoice.InvoiceItems)
    {
        counter++;
        rmPayPal.Add("item_name_" + counter.ToString(), x.ProductName);
        rmPayPal.Add("amount_" + counter.ToString(), x.UnitPrice.ToString("#.00"));
        rmPayPal.Add("quantity_" + counter.ToString(), x.Quantity.ToString());
        rmPayPal.Add("shipping_" + counter.ToString(), (x.ShippingCost * x.Quantity).ToString("#.00"));
        rmPayPal.Add("handling_" + counter.ToString(), (x.HandlingCost * x.Quantity).ToString("#.00"));
    }

     rmPayPal.Add("country", "GB");
     rmPayPal.Add("currency_code", "GBP");
     return rmPayPal;

} 
```

## 我的示例 json 看起来像

```
{"d":
{"first_name":"Tridip",
"last_name":"BBA",
"address1":"Unit 1 Stirling Park",
"address_override":"1",
"city":"Rochester",
"state":"KENT",
"zip":"ME1 3QR",
"cmd":"_cart",
"upload":"1",

"item_name_1":
"Product #1",
"amount_1":"13.00",
"quantity_1":"4",
"shipping_1":"12.00",
"handling_1":"2.00",

"item_name_2":
"Product #3",
"amount_2":"11.00",
"quantity_2":"1",
"shipping_2":"3.00",
"handling_2":".50",

"country":"GB",
"currency_code":"GBP"
}
 } 
```

我的服务器端函数被 jquery 完美调用，json 格式的数据很好地返回到客户端。我关心的是如何通过 jquery 解析上面的 json。

因为名字、姓氏和少数字段在 json 字符串中只会出现一次，但 Item_Name、amount_、quantity_、shipping_ 等字段在 json 字符串中可能有很多。所以我必须在循环中阅读那些我无法这样做的准备字段。所以请帮助我解析 jquery 的小代码片段，通过它我可以读取那些将在 json 中出现一次的字段，并且我需要读取那些将在 json 字符串中出现尽可能多的字段。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:23:30.770

```
 // JavaScript
  function test(data){
     var result = jQuery.parseJSON(data);                                                
     // you can access them like 
     result.first_name ;
     result.last_name ;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:24:12.607

您可以使用 jQuery parseJSON [http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)方法将 json 字符串解析为对象。

如果有的话，您可以使用 jQuery .each [http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)循环遍历对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:20:09.977

如果您收到 var result = jQuery.parseJSON(data); 错误 很可能是数据格式不正确。首先尝试看看你是否可以解析类似的东西：

```
var JSONstring= "[{\"Type\":2,\"Number\":\"000 000 000\",\"TypeName\":\"mobile\",\"Extension\":\"\",\"ID\":\"a2fc8a78-71a8-4550-9a9f-1c1ad4cab1d9\",\"IsNew\":false,\"IsEdited\":false}]";
var JSONobj = jQuery.parseJSON(JSONstring);
/*the you can iterate through json object's member with a for loop*/
var counter = 0;
for (counter = 0; counter < JSONobj.length; counter++)
   if (number == JSONobj[counter].Number)
      DoSomething(JSONobj[counter].Number); 
```

如果要向字符串添加另一个对象数组，则正确的格式为：

```
var JSONstring = [{"Name1":value1,"Name2":value2,...,"Namei":valuei},{},...,{}] 
```

# iphone - 为我的 iPhone 应用程序在 Objective-C 中解析 json

> ID：10878259
> 
> 赞同：0
> 
> 时间：2012-06-04T08:18:05.370
> 
> 标签：iphone, objective-c, json

我在解析我的 iPhone 应用程序的 json 数据时遇到问题，我是 Objective-C 的新手。我需要解析 json 并获取值以继续。请帮忙。这是我的 JSON 数据：

```
[{"projId":"5","projName":"AdtvWorld","projImg":"AdtvWorld.png","newFeedCount":"0"},{"projId":"1","projName":"Colabus","projImg":"Colabus.png","newFeedCount":"0"},{"projId":"38","projName":"Colabus Android","projImg":"ColabusIcon.jpg","newFeedCount":"0"},{"projId":"25","projName":"Colabus Internal Development","projImg":"icon.png","newFeedCount":"0"},{"projId":"26","projName":"Email Reply Test","projImg":"","newFeedCount":"0"},{"projId":"7","projName":"PLUS","projImg":"7plusSW.png","newFeedCount":"0"},{"projId":"8","projName":"Stridus Gmail Project","projImg":"scr4.png","newFeedCount":"0"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:49:45.490

[JSONKit](https://github.com/johnezang/JSONKit)

或者

NSJSONSerialization(iOS 5.0 或更高版本)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T08:26:16.963

在 iOS 5 或更高版本上，您可以使用`NSJSONSerialization`. 如果您将 JSON 数据保存在字符串中，则可以执行以下操作：

```
NSError *e = nil;
NSData *data = [stringData dataUsingEncoding:NSUTF8StringEncoding];
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData: data options: NSJSONReadingMutableContainers error: &e]; 
```

**编辑**要获得特定值：

```
NSDictionary *firstObject = [jsonArray objectAtIndex:0];
NSString *projectName = [firstObject objectForKey:@"projName"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T08:21:17.400

我建议使用[JSONKit](https://github.com/johnezang/JSONKit)库进行解析。

这是有关如何使用它的[教程。](http://www.14oranges.com/2011/08/how-to-use-jsonkit-for-ios-and-the-rotten-tomatoes-api/)你基本上会得到一个字典并使用`objectForKey`你的键来检索值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T08:39:25.937

使用 SBJson

```
SBJsonParser *parser = [[SBJsonParser alloc] init];

NSMutableDictionary *dicRes = [parser objectWithString:stringFromServer error:nil]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T08:40:02.087

无需使用第三方类。Objective-c 已经包含处理 JSON。

该类`NSJSONSerialization`需要一个`NSData`对象或从 URL 读取。以下内容已使用您的 JSON 字符串进行了测试：

```
NSString *json; // contains your example with escaped quotes
NSData *jsonData = [json dataUsingEncoding:NSUTF8StringEncoding];
NSError *error;
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:jsonData 
    options:NSJSONReadingAllowFragments error:&error] 
```

有关更多选项，`NSJSONSerialization`请参阅[文档](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-04T08:35:56.797

我已经成功使用[SBJson](http://stig.github.com/json-framework/)读取和写入 json。

查看[此处的文档](http://stig.github.com/json-framework/api/3.1/annotated.html)并了解如何使用它。

本质上，对于解析，您只需将字符串提供给 SBJsonParser，它就会返回一个带有 objectForKey 函数的字典。例如，您的代码可能类似于：

```
NSDictionary* parsed = [[[SBJsonParser alloc] init] objectWithString: json];
NSString* projId = [parsed objectForKey:@"projId"]; 
```

# jquery - 使用 jquery 自动播放和停止 html5 音频

> ID：10878261
> 
> 赞同：9
> 
> 时间：2012-06-04T08:18:09.057
> 
> 标签：jquery, css, html, audio, playback

我有一个小问题。

我在覆盖上有一个类似 facebook 的框窗口。当用户单击喜欢时，此框会隐藏 - 显然。我想在此窗口可见时使用音频元素，并在此窗口隐藏时停止音频。所以这是我的 html 和 jquery。请帮我。

```
<audio id="audio_player" loop="loop">
    <source src="fileadmin/templates/main/crowd.mp3" type='audio/mpeg; codecs="mp3"'>
    <source src="fileadmin/templates/main/crowd.ogg" type='audio/ogg; codecs="vorbis"'>
</audio>

$(document).ready(function(){
function audio_player (){
    if (
        $('fb_like_box').css('display','block')){
            $('audio').each(function() {
                var song = $(this);
                    song.play();
                });
    }
    else if (
        $('fb_like_box').css('display','none')) {
            $('audio').each(function() {
                var song = $(this);
                    song.pause();
                });
    }
    else {}
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:43:24.173

您的代码在语法上是错误的。

首先，以下语法用于赋值。

```
$('#fb_like_box').css('display','block') 
```

它将属性分配`block`给元素`$('#fb_like_box');`

如果你想检查它，你可以使用这样的东西：

```
if($('#fb_like_box').css('display') == 'block') {
    // then do something
} 
```

做你正在尝试的一个好方法是：

```
if ($('#fb_like_box').is(':visible')) {

    $('audio').each(function() {
        $(this).play();
    });

} else {

    $('audio').each(function() {
        $(this).pause();
    });

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T21:15:31.507

尝试一些非常基本的东西

```
$(document).ready(function(){
  $('audio')[0].play();
} 
```

如果这运行，至少你知道你在正确的轨道上。一旦你知道你可以玩它，添加条件，然后测试它们是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T08:32:37.387

使用[:visible](http://api.jquery.com/visible-selector/)选择器并根据什么添加`.`或。不是有效的选择器。假设是身份证`#``fb_like_box``fb_like_box`

```
if ($('#fb_like_box').is(':visible')){
      // like box visible, play audio
            $('audio').each(function() {
                var song = $(this);
                    song.play();
                });
    }
    else {
      // like box hidden pause audio  
            $('audio').each(function() {
                var song = $(this);
                    song.pause();
                });
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T08:39:13.430

我认为主要问题是您应该在隐藏 facebook 字段的那一刻运行该函数，因此，您需要将该函数添加到足够的侦听器中。我认为在这种情况下它会是' `DOMAttrModified`'：

一些伪代码（未经测试的代码）：

```
$('facebookelementtohide').addEventListener('DOMAttrModified', function(e){
   audio_player ();
}, false); 
```

# ios - 如何在 iOS 上将日期格式从字符串更改为 dd/mm/yy？

> ID：10878262
> 
> 赞同：2
> 
> 时间：2012-06-04T08:18:19.897
> 
> 标签：ios, string, date, format

所以我正在解析一个 xml 文件并在屏幕上显示我解析的日期。日期如下：2012 年 5 月 31 日星期四 20:43:54 GMT。如何将日期转换为这种格式：dd/mm/yy？我不需要时间。

* * *

好吧，它崩溃了。我试过了 ：

```
NSString *date = [[stories objectAtIndex: storyIndex] objectForKey: @"date"];

//changing dates format
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat: @"yyyy-MM-dd HH:mm:ss Z"];
NSDate *myDate = [dateFormatter dateFromString:date];

NSString *dateText = [[NSString alloc] initWithString:[dateFormatter stringFromDate:myDate]]; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T08:39:34.303

这个想法是用来`NSDateFormatter`从您的输入时间字符串中获取日期，然后使用新的日期格式化程序从日期中获取您想要的任何新时间字符串。

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init]; 
[dateFormatter setDateFormat:@"EEE, d MMM YYYY HH:mm:ss Z"];

NSDate *date = [dateFormatter dateFromString:theDateString];
[dateFormatter release];

NSDateFormatter *dateFormatter2 = [[NSDateFormatter alloc] init];
[dateFormatter2 setDateFormat:@"dd/mm/yyyy"];
NSString *newDateString = [dateFormatter2 stringFromDate:date];
[dateFormatter2 release]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T08:21:07.427

您可以使用`NSDateFormatter`

例如：

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat: @"yyyy-MM-dd HH:mm:ss Z"];

    NSDate *myDate = [dateFormatter dateFromString:yourString]; 
```

有关日期格式模式，请参阅[http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns](http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T07:56:06.890

或者，对于第二部分，您可以使用 NSDateComponents。后：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init]; 
[dateFormatter setDateFormat:@"EEE, d MMM YYYY HH:mm:ss Z"];

NSDate *date = [dateFormatter dateFromString:theDateString];
[dateFormatter release];

//Get NSComponents from date object..

[NSString stringWithFormat:@"%@/%@/%@",dateComponent.date,dateComponent.month,dateComponent.year]; 
```

# activesync - ActiveSync 同步消息不支持所有属性

> ID：10878266
> 
> 赞同：0
> 
> 时间：2012-06-04T08:18:41.683
> 
> 标签：activesync

我正在实现一个 ActiveSync Java 客户端。我已经可以与服务器通信并执行协议序列以同步电子邮件，如[文档](http://msdn.microsoft.com/en-us/library/ee238029%28v=EXCHG.80%29.aspx)中所定义。

但是，当我尝试发送`Sync`命令时，似乎只能使用规范中可用命令的子集。当我在 Sync XML 消息中使用某些属性标签时，我会收到状态 4（“协议错误”）代码，即使根据规范这些应该是有效的。

当我只使用该`GetChanges`属性时，我确实得到了正确的响应，但是我希望能够指定要返回的项目数量等。

我已包含要发送的 XML 片段：注释掉的行是已尝试但导致状态 4 的行。

```
<?xml version="1.0" ?>
<Sync xmlns="AirSync:">
    <Collections>
        <Collection>
            <Class>Email</Class>
            <SyncKey>{23423972324}</SyncKey>
            <CollectionId>{23423sdfsdfsdfsf972324}</CollectionId>
            <GetChanges/>
            <!--<GetChanges>0</GetChanges>-->
            <!--<WindowSize>512</WindowSize>-->
            <!--<Options>-->
                <!--<Class>Email</Class>-->
                <!--<FilterType>3</FilterType>-->
                <!--<MaxItems>10</MaxItems>-->
            <!--</Options>-->
            <!--<Commands>-->
            <!--    <Fetch>-->
            <!--        <ServerId>1:323</ServerId>-->
            <!--    </Fetch>-->
            <!--</Commands>-->
        </Collection>
    </Collections>
    <!--<WindowSize>512</WindowSize>-->
</Sync> 
```

是否有任何理由不支持这些属性？还是我在消息中遗漏了什么？

服务器的`GetOptions`命令返回以下内容（截断）：

```
Server: Microsoft-IIS/6.0,
    X-Powered-By: ASP.NET,
    Pragma: no-cache,
    Public: OPTIONS, POST, Allow: OPTIONS, POST,
    MS-Server-ActiveSync: 6.5.7653.19,
    MS-ASProtocolVersions: 1.0,2.0,2.1,2.5,
    MS-ASProtocolCommands:Sync,SendMail,SmartForward,SmartReply,GetAttachment,GetHierarchy,CreateCollection,DeleteCollection,MoveCollection,FolderSync,FolderCreate,FolderDelete,FolderUpdate,MoveItems,GetItemEstimate,MeetingResponse,ResolveRecipients,ValidateCert,Provision,Search,Notify,Ping 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:11:52.697

事实证明，我使用的 WBXML 编码/解码器工作不正常。我通过比较两个不同 WBXML 编码器生成的字节码发现了这一点，并看到了差异。我使用的编码器没有正确处理空元素。我修复了它，现在服务器按预期运行。

# c# - List的递归读取 I have this structure of List, to be specific it is a "CategoryItem" Object. Here's my declaration of "CategoryItem" Object. public class CategoryItem { public string Name 问问题 问问题 2012-06-04T08:18:52.110 7468 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have this structure of List, to be specific it is a "CategoryItem" Object. Here's my declaration of "CategoryItem" Object. public class CategoryItem { public string Name { get; set; } public int CategoryID {get; set;} public int ParentID {get; set; } public List <categoryitem>SubCategory {get; set;} } Here's my sample data structure: [0] CategoryID: 249 Name: "WelcomeNC" ParentID: 0 SubCategory: length=4 [0] CategoryID: 250 Name: "CNC" ParentID: 249 SubCategory: length=0 [1] CategoryID: 251 Name: "Production" ParentID: 249 SubCategory: length=0 [2] CategoryID: 252 Name: "Administrative" ParentID: 249 SubCategory: length=1 [0] CategoryID: 261 Name: "NPower" ParentID: 252 SubCategory: length=0 [3] CategoryID: 253 Name: "Help" ParentID: 249 SubCategory: length=1 [0] CategoryID: 254 Name: "7" ParentID: 253 SubCategory: length=1 [0] CategoryID: 255 Name: "CHLK" ParentID: 254 SubCategory: length=0 [1] CategoryID: 111 Name: "First" ParentID: 0 SubCategory: length=0 My problem is, how do I step in each and every 'CategoryItem' object of my declared: List <categoryitem>categoryItems = new List<categoryitem>(); So that I can display it in an unordered list in html like this WelcomeNC CNC Production Administrative NPower Help 7 CHLK First Is there a way to do this? Read up on recursion. There are quite a few samples out there. The ones on Wikipedia are simple but the principle is the same: solve the problem on one "level", then call the same method recursively on each sublevel. c#.netlisttreehtml-lists 4 5 回答 5 This answer is useful 1 Maybe take a look at the TreeView control? http://msdn.microsoft.com/en-us/library/7a9swst5(v=vs.80).aspx The ASP.NET TreeView control is designed to present users with data in a hierarchical structure. Users can open individual nodes that can in turn contain child nodes. The TreeView control is suitable for displaying XML data, but can be used for any data that can be represented in a hierarchy. I think it will be what you want. Otherwise, it's a matter of iterating through each item in your list and recursively processing each sub-item which may or may not have more sub-items. It's tricky, but only at first. 于 2012-06-04T08:29:51.493 回答 This answer is useful 1 You need to create a recursive Method that "renders" a category item. This methods needs to be aware of the level or current depth in order render to correct indenting: private void RenderCategory(HtmlTextWriter writer, CategoryItem item, int level) { writer.Write("*   {1}", level * 5, HttpUtility.HtmlEncode(item.Name)); int nextLevel = ++level; foreach (CategoryItem child in item.SubCategories) { RenderCategory(writer, child, nextLevel); } } 于 2012-06-04T08:32:03.693 回答 This answer is useful 1 A simple not optimal but simple solution will be to just iterate the list and for each of the items you count how many times you call its parent id before it its 0\. So then you know how many levels of identation your*   must have. 于 2012-06-04T08:32:33.973 回答 This answer is useful 1 If your CategoryItem doesn't contain a list of its children (like in the first version of the question), I would first of all build a Dictionary that foreach CategoryID gives you all the subcategory items, then recursively print all your items using this dictionary and starting with the items with parent "0". Assuming that Print is the instruction that print the data associated with your item, and that it takes as the only parameter the level of indentation, the code will look like this: public static void PrintItems(List <categoryitem>items) { Dictionary<string, list<categoryitem="">> dictOfChildren = new Dictionary<string, list<categoryitem="">>(); // loop through all the items grouping them according to their ParentID foreach (CategoryItem anItem in items) { List <categoryitem>children; if (!dictOfChildren.TryGetValue(anItem.ParentID, out children)) { children = new List<categoryitem>(); dictOfChildren[anItem.ParentID] = children; } children.Add(anItem); } // recursively print all the items starting from the ones with ParentID = 0 // the dictionary is passed to the method in order to be able to find the children of each item PrintItems(dictOfChildren["0"], dictOfChildren, 0); } private static void PrintItems(List <categoryitem>list, Dictionary<string, list<categoryitem="">> dictOfChildren, int levelOfIndentation) { foreach (CategoryItem anItem in list) { // first print the current item anItem.Print(levelOfIndentation); // then recursively print all its children List <categoryitem>children; if (dictOfChildren.TryGetValue(anItem.CategoryID, out children) && children.Count > 0) PrintItems(children, dictOfChildren, levelOfIndentation + 1); } } It's not really object oriented, but this should give you a hint about the direction to follow. EDIT: I saw that you edited the question and that now you have added the SubCategory property. This makes things much simpler and you can simply do: public static void PrintItems(List <categoryitem>items) { // call a recursive method passing 0 as level of indentation PrintItems(items, 0); } public static void PrintItems(List <categoryitem>items, int levelOfIndentation) { foreach (CategoryItem anItem in items) { // print the currentItem anItem.Print(levelOfIndentation); // increment the level of indentation and callk the same method for the children PrintItems(anItem.SubCategory, levelOfIndentation + 1); } } 于 2012-06-04T08:50:09.297 回答 This answer is useful 0 阅读递归。那里有很多样本。维基百科上的很简单，但原理是一样的：在一个“级别”上解决问题，然后在每个子级别上递归调用相同的方法。 于 2012-06-04T08:25:07.773 回答 Related 1 java - CDI - CODI - ViewAccessScoped on 产生 = 错误 2 asp.net-mvc - 尝试将 FxCop 与反复升级的 MVC 一起使用 1 .net - Windows 7 64 上的 .net process.start() 32 位应用程序 1 c# - 虚拟方法逻辑不起作用 C# .NET 4.0 1 youtube-api - 服务不可用 503 错误，来自 Google App Engine 应用的请求 1 facebook-graph-api - 我可以通过小书签生成的 div 提示用户登录 facebook 吗？ 2 c - 生成范围内的随机数 [lu] 2 javascript - 如何让 jQuery DataTables 在多个 DOM 表之间切换？ 3 asp.net - JSON MVC 更改内容类型 1 ios - 屏幕更改后的默认 UIAccessibilityElement Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

    > ID：10878268
    > 
    > 赞同：1
    > 
    > 时间：
    > 
    > 标签：c#, .net, list, tree, html-lists

    I have this structure of `List<Object>`, to be specific it is a "CategoryItem" Object. Here's my declaration of "CategoryItem" Object.

    ```
    public class CategoryItem
    {
        public string Name { get; set; }
        public int CategoryID {get; set;}
        public int ParentID {get; set; }
        public List<CategoryItem> SubCategory {get; set;}
    } 
    ```

    Here's my sample data structure:

    ```
    [0] CategoryID: 249
    Name: "WelcomeNC"
    ParentID: 0
    SubCategory: length=4
        [0] CategoryID: 250
            Name: "CNC"
            ParentID: 249
            SubCategory: length=0
        [1] CategoryID: 251
            Name: "Production"
            ParentID: 249
            SubCategory: length=0
        [2] CategoryID: 252
            Name: "Administrative"
            ParentID: 249
            SubCategory: length=1
                [0] CategoryID: 261
                    Name: "NPower"
                    ParentID: 252
                    SubCategory: length=0
        [3] CategoryID: 253
            Name: "Help"
            ParentID: 249
            SubCategory: length=1
                [0] CategoryID: 254
                    Name: "7"
                    ParentID: 253
                    SubCategory: length=1
                        [0] CategoryID: 255
                            Name: "CHLK"
                            ParentID: 254
                            SubCategory: length=0
    [1] CategoryID: 111
    Name: "First"
    ParentID: 0
    SubCategory: length=0 
    ```

    My problem is, how do I step in each and every 'CategoryItem' object of my declared:

    ```
    List<CategoryItem> categoryItems = new List<CategoryItem>(); 
    ```

    So that I can display it in an unordered list in html like this

    *   WelcomeNC
        *   CNC
        *   Production
        *   Administrative
            *   NPower
        *   Help
            *   7
                *   CHLK
    *   First

    Is there a way to do this?

    * * *

    ## 回答 #1

    > 赞同：1
    > 
    > 时间：2012-06-04T08:29:51.493

    Maybe take a look at the TreeView control? [http://msdn.microsoft.com/en-us/library/7a9swst5(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/7a9swst5(v=vs.80).aspx)

    > The ASP.NET TreeView control is designed to present users with data in a hierarchical structure. Users can open individual nodes that can in turn contain child nodes. The TreeView control is suitable for displaying XML data, but can be used for any data that can be represented in a hierarchy.

    I think it will be what you want.

    Otherwise, it's a matter of iterating through each item in your list and recursively processing each sub-item which may or may not have more sub-items. It's tricky, but only at first.

    * * *

    ## 回答 #2

    > 赞同：1
    > 
    > 时间：2012-06-04T08:32:03.693

    You need to create a recursive Method that "renders" a category item. This methods needs to be aware of the level or current depth in order render to correct indenting:

    ```
    private void RenderCategory(HtmlTextWriter writer, CategoryItem item, int level)
    {
      writer.Write("<li style='padding-left: {0}px'>{1}</li>", 
        level * 5,
        HttpUtility.HtmlEncode(item.Name));

      int nextLevel = ++level;
      foreach (CategoryItem child in item.SubCategories)
      { 
        RenderCategory(writer, child, nextLevel);
      }
    } 
    ```

    * * *

    ## 回答 #3

    > 赞同：1
    > 
    > 时间：2012-06-04T08:32:33.973

    A simple not optimal but simple solution will be to just iterate the list and for each of the items you count how many times you call its parent id before it its 0\. So then you know how many levels of identation your `<li>` must have.

    * * *

    ## 回答 #4

    > 赞同：1
    > 
    > 时间：2012-06-04T08:50:09.297

    If your CategoryItem doesn't contain a list of its children (like in the first version of the question), I would first of all build a Dictionary that foreach CategoryID gives you all the subcategory items, then recursively print all your items using this dictionary and starting with the items with parent "0". Assuming that Print is the instruction that print the data associated with your item, and that it takes as the only parameter the level of indentation, the code will look like this:

    ```
     public static void PrintItems(List<CategoryItem> items)
        {
            Dictionary<string, List<CategoryItem>> dictOfChildren = new Dictionary<string, List<CategoryItem>>();
            // loop through all the items grouping them according to their ParentID
            foreach (CategoryItem anItem in items)
            {
                List<CategoryItem> children;
                if (!dictOfChildren.TryGetValue(anItem.ParentID, out children))
                {
                    children = new List<CategoryItem>();
                    dictOfChildren[anItem.ParentID] = children;
                }
                children.Add(anItem);
            }
            // recursively print all the items starting from the ones with ParentID = 0
            // the dictionary is passed to the method in order to be able to find the children of each item
            PrintItems(dictOfChildren["0"], dictOfChildren, 0);
        }

        private static void PrintItems(List<CategoryItem> list, Dictionary<string, List<CategoryItem>> dictOfChildren, int levelOfIndentation)
        {
            foreach (CategoryItem anItem in list)
            {
                // first print the current item
                anItem.Print(levelOfIndentation);
                // then recursively print all its children
                List<CategoryItem> children;
                if (dictOfChildren.TryGetValue(anItem.CategoryID, out children) &&
                    children.Count > 0)
                    PrintItems(children, dictOfChildren, levelOfIndentation + 1);
            }
        } 
    ```

    It's not really object oriented, but this should give you a hint about the direction to follow.

    **EDIT:**

    I saw that you edited the question and that now you have added the SubCategory property. This makes things much simpler and you can simply do:

    ```
    public static void PrintItems(List<CategoryItem> items)
    {
        // call a recursive method passing 0 as level of indentation
        PrintItems(items, 0);
    }

    public static void PrintItems(List<CategoryItem> items, int levelOfIndentation)
    {
        foreach (CategoryItem anItem in items)
        {
            // print the currentItem
            anItem.Print(levelOfIndentation);
            // increment the level of indentation and callk the same method for the children
            PrintItems(anItem.SubCategory, levelOfIndentation + 1);
        }
    } 
    ```

    * * *

    ## 回答 #5

    > 赞同：0
    > 
    > 时间：2012-06-04T08:25:07.773

    阅读[递归](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)。那里有很多样本。维基百科上的很简单，但原理是一样的：在一个“级别”上解决问题，然后在每个子级别上*递归调用相同的方法。*</categoryitem></categoryitem></categoryitem></string,></categoryitem></categoryitem></categoryitem></string,></string,></categoryitem></categoryitem></categoryitem></categoryitem>

# sql - 不能在此选择中使用 order by？

> ID：10878269
> 
> 赞同：6
> 
> 时间：2012-06-04T08:19:01.787
> 
> 标签：sql, ms-access, select

我有这个查询..

```
SELECT ClassId, Sum(TeachersCount) as NumCount
FROM ClassSubject 
GROUP BY ClassId 
ORDER BY NumCount 
```

但是当我运行它时，访问会弹出一个框，询问我 NumCount 的值？但这不是一个参数，这是..这是可以教该课程的教师的总和，这是要计算的。那么为什么 access 要求我提供它的 ( `NumCount's`) 值呢？

我想要的是计算班级中教师的人数并通过增加教师人数的值来排序，我认为这就是我的查询所做的，但为什么它要求我提供价值`NumCount`？还有一件事，如果我删除这个`ORDER BY`子句，它运行良好，而不问我`NumCount`?的值。所以有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T08:22:15.130

你需要：

```
SELECT ClassId, Sum(TeachersCount) as NumCount 
FROM ClassSubject 
GROUP BY ClassId 
ORDER BY Sum(TeachersCount) 
```

您也可以按序号排序，在本例中为 2：

```
ORDER BY 2 
```

# macos - cURL 错误：SSL 对等证书或 SSH 远程密钥不正确

> ID：10878271
> 
> 赞同：3
> 
> 时间：2012-06-04T08:19:20.523
> 
> 标签：macos, apache, curl, symfony, certificate

使用`Symfony2`我的`osx-lion`我得到以下错误：

```
cURL error: SSL peer certificate or SSH remote key was not OK 
```

这个错误对我来说很奇怪，因为如果我尝试使用`libphp5.so`which 指向 `/usr/bin/php`它的工作原理。

如果我尝试更改`libphp5.so`以使用`/opt/local/bin/php`我会收到以下错误

```
cURL error: SSL peer certificate or SSH remote key was not OK 
```

我该如何解决这个问题`/opt/local/bin/php`？

谢谢

有关更多详细信息，我确实附上了日志消息的图片。

![在此处输入图像描述](../Images/b09f67e505ea7f6a35b47296c9fe8777.png)

# android - 使用 intentService 还是有更好的方法？

> ID：10878278
> 
> 赞同：0
> 
> 时间：2012-06-04T08:19:53.880
> 
> 标签：android, broadcastreceiver, intentservice

我正在创建一个应用程序，它将执行以下操作：

如果邮件带有 messageword。它需要开始通过 GPS 功能定位手机。之后，它必须向用户显示结果。

我已经使用广播接收器来获取消息了。之后是开始一个活动。如果不更新用户界面。

我这里有两个问题：

1）如果屏幕旋转，所有变量都设置为零......可以通过将变量保存在`onPause()`并读取这些值来解决这个问题`onResume()`

2）如果用户使用后退按钮......线程被取消。

实际上我希望用户不能取消 GPS 动作。

为此使用 Intentservice 是个好主意吗？

-消息进来

-`BroadcastReceiver`获取消息并启动intentService

-如果处理完成......我可以用结果启动一个活动（处理完成后服务会自动关闭？！

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:54:22.530

您当然可以并且应该`IntentService`在后台使用长时间运行的操作。但是，如果用户退出您的活动，他们很可能这样做是有原因的，并且弹出一个他们可能不再关心的结果的活动，可能不是一个好的策略。您可以改为缓存结果，并在用户下次打开您的活动时显示它。

# jquery - jQuery 动画性能 IE

> ID：10878281
> 
> 赞同：0
> 
> 时间：2012-06-04T08:20:13.247
> 
> 标签：jquery, animation, scroll, jquery-animate

我用 jQuery animate 为轮播制作了一个简单的动画。我总是有 5 个容器，其中 3 个是可见的。制作动画时会添加一个新的并删除最后一个。Firefox 和 Chrome 完全符合我的预期。在 Internet Explorer 中，容器位置被“scrollLeft”刷新的那一刻，内容“闪烁”，我不知道这是什么原因。

这是标记：

```
<div id="wrapper">
    <div id="conti">
        <div id="_ID">
            <div class="section">0</div>
            <div class="section">1</div>
            <div class="section active">2</div>
            <div class="section">3</div>
            <div class="section">4</div>
        </div>
    </div>
<button id="prev">prev</button>
<button id="next">next</button> 
```

这是脚本（用于单击下一步的情况）

```
 var conti = $('#conti');
//set startposition of scrollbar (center) --> width of section
var teaserwidth = 60;
conti.scrollLeft(teaserwidth); 
var animating = false;
$('#next').click(function() {
    if(animating) return;
    animating = true;
    conti.animate({
        scrollLeft: 2*teaserwidth
    },     {
            complete: function() {
                conti.find('.section:last').after('<div style="background:red;" class="section">NF</div>');
              conti.scrollLeft(teaserwidth);
              conti.find('.section:first').remove();
              animating = false;
            }
        }
    );
}); 
```

我将新添加的内容涂成红色，以便更好地查看 IE 中的闪烁效果。您还可以在[JSFIDDLE上进行测试](http://jsfiddle.net/hoffs/kwdPK/80/)

你会改变/建议在 IE 中也有流畅的动画吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:31:15.343

每当我制作一个滑块时，我总是通过在 IE 中为左边距设置动画，在其他浏览器中为左边距设置动画，在较新的浏览器中使用 CSS 转换。

这似乎工作正常。

# ios - NSXMLParserErrorDomain 错误 23

> ID：10878282
> 
> 赞同：2
> 
> 时间：2012-06-04T08:20:16.440
> 
> 标签：ios, xml-parsing

有人对“NSXMLParserErrorDomain 错误 23”的可能原因有任何其他详细信息吗？我能找到的唯一信息是：头文件中的 NSXMLParserEntityReferenceMissingSemiError。看来这与“实体引用缺少分号”这一可能的事实有关——我看不出它在我的正确格式的 XML 示例中是如何应用的。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T14:25:57.203

原来，a`"&"`已经潜入我的 XML。我替换为`"&amp;"`一切正常。

# ubuntu - 虚拟主机 XAMPP [Linux Ubuntu] 不工作

> ID：10878284
> 
> 赞同：21
> 
> 时间：2012-06-04T08:20:33.623
> 
> 标签：ubuntu, xampp, vhosts

我尝试`magento.developers.com`使用 XAMPP 在 Ubuntu 12.04 中创建虚拟主机。
首先，我编辑`/opt/lampp/etc/extra/httpd-vhosts.conf`并添加了以下几行：

```
<VirtualHost *:80>
    ServerAdmin webmaster@magento.developers.com
    DocumentRoot "/opt/lampp/htdocs/magento"
    ServerName magento.developers.com
    ErrorLog "logs/magento.developers.com-error_log"
    CustomLog "logs/magento.developers.com-access_log" common
</VirtualHost> 
```

我已经使用该命令重新启动了 XAMPP `sudo /opt/lampp/lampp restart`，然后我编辑
了 hosts 文件并添加了：

```
127.0.0.1   magento.developers.com 
```

然后我尝试`magento.developers.com`使用浏览器访问它并没有访问

```
/opt/lampp/htdocs/magento 
```

我必须做些什么才能使其工作并访问`magento`文件夹而不是`htdocs`（根）？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-04T08:20:33.890

在 httpd.conf 中禁用了默认的虚拟主机 conf，为了**在 Ubuntu 下**
允许 XAMPP 中的虚拟主机，您必须取消注释行：**`480``httpd.conf`** 

 ****MAINSTEP**：取消注释行`480`如下：

```
479\. # Virtual hosts
480\. Include etc/extra/httpd-vhosts.conf 
```

该`httpd.conf`文件位于 下`/opt/lampp/etc`，修改它只需按照以下步骤：

1\. 运行`sudo gedit /opt/lampp/etc/httpd.conf`
2\. 应用**MAINSTEP**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-03T11:08:08.537

第 1 步：编辑 apache 配置

`sudo nano /opt/lampp/etc/httpd.conf`

并在该行下方找到并取消注释（删除＃）并保存

`Include etc/extra/httpd-vhosts.conf`

第 2 步：编辑虚拟主机配置以添加虚拟主机

`sudo nano /opt/lampp/etc/extra/httpd-vhosts.conf`

并使用您的 DocumentRoot (/opt/lampp/htdocs/example) 和 ServerName (URL)(example.local) 添加以下代码

`<VirtualHost *:80> ServerAdmin your@email.com DocumentRoot "/opt/lampp/htdocs/example" ServerName "example.local" ErrorLog "logs/example.local-error_log" CustomLog "logs/example.local-access_log" common </VirtualHost>`

第 3 步：编辑主机文件以添加您的 URL（example.local）

`sudo nano /etc/hosts`

并将此行与您的 URL (example.local) 添加到底部并保存

`127.0.1.1 example.local`

第四步：重启服务器

`sudo /opt/lampp/lampp restart`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-11T07:22:09.510

**创建虚拟主机：-**

```
sudo vi /opt/lampp/etc/httpd.conf 
```

并取消注释以下行

```
Include etc/extra/httpd-vhosts.conf 
```

现在在命令下面创建 n 个主机：

`sudo nano /opt/lampp/etc/extra/httpd-vhosts.conf`（输入主机条目）。

```
sudo nano /etc/hosts                 (do host file entry) 
```

然后重新启动xampp

```
sudo /opt/lampp/lampp restart 
```**

# php - 计算多个字符php

> ID：10878287
> 
> 赞同：0
> 
> 时间：2012-06-04T08:21:01.330
> 
> 标签：php, mysql, count

我正在尝试使用`strlen`或类似的东西来计算字符串中的多组字符。这是数据库字符串

```
xa1xb2xcxd3xe4xcxa5xb6xcxd7xe8xcxa9xb10xcxd11xe12xcxa13xb14xc 
```

我从数据库中获取字符串，我想计算

字符串包含的“xa”“xb”“xd”和“xe”。

我想我可以先数 xa 然后 xb 然后 xd 然后 xe`strlen`然后加上数字，但没有更简单的方法吗？

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:23:58.057

您愿意接受`preg_match_all`解决方案吗？

```
echo preg_match_all('/x(a|b|d|e)/', $message, $matches) 
```

从[文档](http://php.net/preg_match_all)：

> 返回**完整模式匹配的数量**（可能为零），如果发生错误，则返回 FALSE。

虽然这会返回 的*总数*，`xa,xb,xd and xe`而不是单个的

如果您需要获得单独的，则需要再迈出一步`array_count_values`：

```
$sums = array_count_values($matches[0]);
print_r($sums); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T08:26:52.523

试试这个。

```
$string ="xa1xb2xcxd3xe4xcxa5xb6xcxd7xe8xcxa9xb10xcxd11xe12xcxa13xb14xc";

echo substr_count($string, 'xa')."<br>";
echo substr_count($string, 'xb')."<br>";
echo substr_count($string, 'xc')."<br>";
echo substr_count($string, 'xd')."<br>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T08:23:03.340

[http://php.net/manual/en/function.substr-count.php](http://php.net/manual/en/function.substr-count.php)

```
$text = "xa1xb2xcxd3xe4xcxa5xb6xcxd7xe8xcxa9xb10xcxd11xe12xcxa13xb14xc";
echo substr_count($text, 'xa');
echo substr_count($text, 'xb');
echo substr_count($text, 'xd'); 
```

# c - C 中的 _attribute_ 或类似的东西是什么？

> ID：10878299
> 
> 赞同：2
> 
> 时间：2012-06-04T08:22:06.013
> 
> 标签：c, attributes

我经常在错误消息中看到类似*属性的东西。*这是什么？有没有类似这个*属性*的东西？谁能给我一个详细的解释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T08:23:59.870

它是一个[GCC 扩展](http://www.unixwiz.net/techtips/gnu-c-attributes.html)，它允许开发人员将特性附加到函数声明中，以允许编译器执行更多的错误检查。

详细说明也可以[在这里](http://gcc.gnu.org/onlinedocs/gcc-4.0.4/gcc/Function-Attributes.html#Function-Attributes)和[这里](http://gcc.gnu.org/onlinedocs/gcc-4.0.4/gcc/Attribute-Syntax.html#Attribute-Syntax)找到。可以在[此处](http://gcc.gnu.org/onlinedocs/gcc-4.0.4/gcc/C-Extensions.html#C-Extensions)找到一组 C 的 GCC 扩展。

# html - 在部分上显示 gif 图像以占用空间

> ID：10878301
> 
> 赞同：2
> 
> 时间：2012-06-04T08:22:08.883
> 
> 标签：html, css, uploader

我是 CSS 的新手。我遇到的问题真的很简单。

```
<section>
    <fieldset>
        <div>
            This div block contains the label field and the files.
        </div>
    </fieldset>
</section> 
```

这是我的 HTML 代码的一部分。在 div 块内，我有一个字段和一些脚本，可以帮助我上传多个文件。我想要做的是在部分或 div 本身上显示类似灰色 div 块的东西，它占用空间并在文件上传时显示 gif 图像。

**问题：**我不知道如何使用 css。我只在寻找一些可以添加到我的代码中并做我想做的事情的 css 类。我知道如何修复 jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:25:41.260

只需插入您想要放置的任何位置。

```
<div class="loading">
  <img src="loading.gif">
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:29:40.077

像这样使用html

```
<div class="load">
      <img src="../path">
    </div> 
```

而CSS是

```
.load{background-color: Gray; filter: alpha(opacity=80); opacity: 0.8; z-index: 10000; text-align:center; position:absolute;} 
```

它会帮助你吗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T08:39:14.317

**已编辑：**[带有 gif 的演示](http://jsfiddle.net/2w5xR/7/embedded/result/)，在这里，当您单击按钮时会出现弹出窗口，当您单击灰色背景时，弹出窗口会消失。将您的 gif 包含在 div 弹出窗口中，并根据您的需要对其进行样式设置，这将显示居中加载 gif，最初对两个 div 使用 display:none ，然后使用一些 jquery 尝试使它们可见，我希望它对您有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T08:52:24.693

如果我理解正确，您想要一个模式弹出窗口之类的东西，**但**只是在该部分（而不是整个页面）上方，显示进度图像并防止进一步点击上传字段？如果是这样，那么只需使用这个：

```
<section>    
    <div id="modal" style="display: none"><img src="..."></div>
    <fieldset>
        <div>
            This div block contains the label field and the files.
        </div>
    </fieldset>
</section> 
```

你用以下方式展示它：

```
document.getElementById('modal').setAttribute('style', 'height: 100%; width: 100%; z-index: 1000; background-color: Gray; opacity: 0.5'); 
```

并再次隐藏它：

```
document.getElementById('modal').setAttribute('style', 'display: none'); 
```

# windows - 批量使用密码的最佳做法是什么？

> ID：10878305
> 
> 赞同：3
> 
> 时间：2012-06-04T08:22:31.553
> 
> 标签：windows, automation, cmd, gnupg, passphrase

我在 Windows 2003 服务器上，我需要编写一个批处理文件来使用 GnuPG 自动解密。解密命令需要密码才能使用私钥。

以下是一些不完全让我满意的可行选项：

1.  `echo thisIsMyPassphrase|gpg.exe --passphrase-fd 0 --output %1 --decrypt %2` 这种硬编码的密码看起来不像是一种安全的方法！此外，更改也不方便（直接嵌入在 .cmd 文件中）。

2.  将密码存储在不同的文件中，并确保只有运行解密过程的 Windows 用户才能访问它（使用 NTFS 安全设置）。
    `gpg.exe --passphrase-file X:\passphrase.txt --output %1 --decrypt %2`
    我不太喜欢这里..是我们在某个地方有一个裸文件，其中只包含这些高度敏感的信息。奇怪的维护？容易找到 ？..

3.  我不觉得将密码存储在环境变量中听起来不错（看起来很暴露）..
    `echo %MY_PASSPHRASE%|gpg.exe --passphrase-fd 0 --output %1 --decrypt %2`

那么，您对实现这一目标的最佳（或“最不坏”）解决方案有何看法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:26:21.257

我认为您的第二个（密码文件）选项对于大多数用例来说似乎是一种相当合理的方法。并且使用 Windows 2003 加密文件系统*可以*减轻对物理服务器被盗的*某种*程度的担忧。您当然可以跳过箍来进一步混淆密码，但这就是 - 混淆。您真正的安全性在于 NTFS 文件系统安全性。

提到它几乎是可笑的，但是“适当的”安全实施是解决方案成本和数据价值之间的平衡行为，如果数据足够敏感并且您愿意在问题上投入一些现金，那么硬件安全模块（nCipher想到），这*可能*有助于解决这类问题。

如果您有兴趣，这里有一个类似 SO 讨论的链接：[Storing passwords for batch jobs](https://stackoverflow.com/q/1211333/573083)

# c# - DataGridView 显示 Int 而不是 Double 值

> ID：10878307
> 
> 赞同：0
> 
> 时间：2012-06-04T08:22:36.030
> 
> 标签：c#, visual-studio-2010, datagridview, sql-server-ce

我正在使用 SqlServerCe 数据库和数据集。将数据传输到数据库没有问题。数据库中有两个双值列正确显示值。当我用这些值从数据库中填充 DataGridview 时，双值显示为 Int。如有必要，这是代码的一部分。

```
if (rdb_FillData.Checked)
        {
            dbDataSet.AppDataDataTable dTable = new App1.dbDataSet.AppDataDataTable();
            AppDataTableAdapter.Fill(dTable);
            AppDataBindingSource.DataSource = dTable;
            AppDataDataGridView.Refresh();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:28:59.270

检查 dTable 中的值，如果它们为真，则可能是您手动创建了列并且列类型错误。如果 dTable 值错误，则可能是您的 AppDataDataTable 列类型错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:52:57.937

在 Datatable 中填充数据后，您无法更改 DataType。但是，您可以克隆数据表，更改列类型并将数据从以前的数据表加载到克隆的表中，如下所示。

将列的数据类型更改为小数的示例代码

```
DataTable dtCloned = dt.Clone();
dtCloned.Columns[0].DataType = typeof(Decimal);
foreach (DataRow row in dt.Rows) 
{
    dtCloned.ImportRow(row);
} 
```

# ios - 将 NSInteger 添加到 NSMutableArray

> ID：10878308
> 
> 赞同：1
> 
> 时间：2012-06-04T08:22:37.940
> 
> 标签：ios, cocoa-touch, nsmutablearray

我将我的数组加载到`NSDocumentDirectory`：

```
self.images = [NSMutableArray new];  
for(int i = 0; i <= 100; i++) 
{ 
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];

    NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"oneSlotImages%d.png", i]]; 
    NSLog(@"savedImagePath=%@",savedImagePath);
    if([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]){ 
        [images addObject:[UIImage imageWithContentsOfFile:savedImagePath]]; 

        NSLog(@"file exists");
    } 
    NSLog(@"file does not exist");
} 

NSLog(@"Count : %d", [images count]); 
```

这是我实现数组的地方：

```
- (UIView *)carousel:(iCarousel *)_carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{

    view = [[UIImageView alloc] initWithImage:[images objectAtIndex:index]];
    return view;

} 
```

我在`NSInteger`上面的数组中添加了`viewDidLoad`：

```
for (int x=0; x<+100;x++) {
        // add as NSString
        [images addObject:[NSString stringWithFormat:@"%d", x]];
        // add as NSNumber
        //[images addObject:[NSNumber numberWithInt:x]];
} 
```

我无法添加`NSInteger`. 如何添加`NSInteger`到`NSMutableArray`?

我有一个崩溃：

> 012-06-04 16:25:19.064 Yens_PhotoSlot[7543:1a303] -[__NSCFNumber size]: unrecognized selector sent to instance 0x9a49b20 2012-06-04 16:25:19.067 Yens_PhotoSlot[7543:1a303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFNumber size]: unrecognized selector sent to instance 0x9a49b20' *** First throw call stack: (0x1ab6052 0x1e92d0a 0x1ab7ced 0x1a1cf00 0x1a1cce2 0x7dbc86 0x2bc4b 0xaadc 0xaefc 0xb6f7 0xf04f 0xa348 0xbddf 0x27cc7 0x7bafbf 0x7bb2d4 0x7bb5d7 0x7bb785 0x9d827c 0x797c92 0x7979a2 0x799a98 0x724499 0x724584 0x139ee00 0x199f4f0 0x19ed833 0x19ecdb4 0x19ecccb 0x32e1879 0x32e193e 0x6f3a9b 0x2efd 0x2e65 0x1) terminate called throwing an exception

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-04T08:24:42.483

Use [NSNumber](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsnumber_Class/Reference/Reference.html):

```
[yourMutableArray addObject:[NSNumber numberWithInt:yourIntValue]]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T08:25:27.257

Add `NSNumber`:

```
[images addObject:[NSNumber numberWithInt:someInt]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T08:37:06.127

**NSInteger** isn't an object -- it's simply typecast to int on 32-bit or long on 64-bit. Since **NSMutableArray** can only store objects, you need to wrap the integer into an object before you can store it.

# python - 如何在 web2py 中访问临时上传的文件？

> ID：10878309
> 
> 赞同：1
> 
> 时间：2012-06-04T08:22:39.293
> 
> 标签：python, file-upload, cgi, web2py, file-storage

我正在使用 sqlform 上传视频文件，并希望在上传时对视频文件进行编码。但是我注意到上传文件在完全上传之前并没有保存到上传目录。是否有临时文件，如何访问它？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:29:50.553

我不确定您如何在文件上传时处理文件（即处理服务器接收到的字节），但如果您可以等到文件完全上传，您可以访问上传的文件作为 Python cgi.FieldStorage 对象：

```
def upload():
    if request.vars.myfile:
        video = encode_video(request.vars.myfile.file)
        [do something with video]
    form = SQLFORM.factory(Field('myfile', 'upload',
        uploadfolder='/path/to/upload')).process()
    return dict(form=form) 
```

上传后，request.vars.myfile 将是一个 cgi.FieldStorage 对象，打开的文件对象将在 request.vars.myfile.file 中。请注意，如果编码需要一段时间，您可能希望将其传递给任务队列，而不是在控制器中处理它。

# c++ - 如何从“const int i”中获取 i 的真实地址

> ID：10878312
> 
> 赞同：-2
> 
> 时间：2012-06-04T08:22:51.583
> 
> 标签：c++, constants

```
int main()
{
  const int i = 10;
  int *p = (int*) &i;
  *p = 20; 
  printf("%d\n",i);   // 10
  printf("%d\n",*p);  // 20
} 
```

我能得到我的真实地址吗？如果我想改变 i 的值，我该怎么做？原谅我可怜的英语！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T08:24:40.173

> 我能得到我的真实地址吗？

是的：

```
const int* p = &i;
...
printf("%p\n", p); 
```

> 如果我想改变 i 的值，我该怎么做？

你最好不要，这是*未定义的行为*。毕竟，`const`意思是“不能改变”不是吗？如果您出于某种原因确实想更改它，则不应将其声明为`const`, 句点。

在某些平台上，const 数据被放入不同的只读内存段，尝试写入这些位置会导致段错误。此外，许多编译器用它们的文字值替换对 const 变量的引用，并且 - 就像你的情况一样 - 尝试获取这些变量的地址可能会创建一个带有原始值副本的临时变量。所以你只能改变临时值，不能改变原来的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T08:25:29.387

你得到的“真实”地址与你所做的完全一样`&i`。

作为`i`一个`const`合格的对象，一旦它被初始化，你*就不能改变它的值。*

将该表达式的结果转换为指向可修改对象的指针是一个坏主意，`int`因为它允许您编写`*p = 20;`导致*未定义行为*的内容，因为它试图修改`const`对象的该值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T08:25:01.243

利用

```
printf("%p\n",p); 
```

`%p`旨在格式化指针值。

`i`的值不能更改，可能会导致各种错误（或什么都不做。）

# email - Web 应用注册的电子邮件验证

> ID：10878317
> 
> 赞同：1
> 
> 时间：2012-06-04T08:23:24.517
> 
> 标签：email, user-interface, registration, user-experience, verification

我正在开发一个 SAAS 网络应用程序/网站，并试图找出使用户注册/注册尽可能容易的最佳方法。

到目前为止，我们已经把它缩小到只有几个字段供用户填写，一旦他们点击“注册”，我认为显示一个带有“创建您的帐户”的加载动画并向右淡出看起来会很好进入界面。

我注意到许多成功的 Web 应用程序当前允许注册并将用户直接发送到应用程序，而无需电子邮件注册即可访问。

我真的需要澄清一下——电子邮件验证是否只是为了避免公司被指控向用户发送垃圾邮件？（即当他们发送常规电子邮件时）

有没有办法解决？显然，要正确使用该应用程序，他们需要接收常规电子邮件。您对此有何看法？

感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-15T15:47:16.563

我不确定此案是否已解决，但当您尝试注册时，我们在 mailcheck.co 采取了完全相同的解决方案，将无法访问无效电子邮件。

# php - 不同视图上的不同布局 cakephp 2.0

> ID：10878321
> 
> 赞同：1
> 
> 时间：2012-06-04T08:23:31.190
> 
> 标签：php, cakephp

我的控制器上有这个：

```
class EmployeeAccountsController extends AppController
{
var $layout = 'login';

public function login()
{

}
public function main_board()
{

}

} 
```

我想要做的是在我调用 login() 的视图和 main_board 的视图时分配不同的布局。

login() 必须有 layout:login.ctp main_board() 必须有 layout:main_board()

单个控制器是否有可能具有不同的布局？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T08:28:18.600

是的，然后将 beforeFilter 回调到您的控制器中，例如：

```
class EmployeeAccountsController extends AppController {

  protected $layout = 'login';

  public function beforeFilter() {
      parent::beforeFilter(); //call parent before filter

      $this->layout = $this->layout;
  }
} 
```

在这种情况下，EmployeeAccounts 控制器将具有所有视图的登录布局。

编辑：只定义布局，特别是为了行动

```
public function action() {   
 $this->layout = 'layout1';
}

public function action2() {   
 $this->layout = 'layout2';
} 
```

# java - 可迭代

> ID：10878322
> 
> 赞同：3
> 
> 时间：2012-06-04T08:23:35.730
> 
> 标签：java

我是 Java 新手。有人能告诉我这条线是什么意思吗？

```
class_A
...
Iterable< ? extends iface_classB> getThings(); 
```

iface_classB 在这里可以是 classB 的接口/抽象。

当我写如下内容时出现错误：

```
class_A myA = new classA()

Iterable< impl_of_iface_classB > anIterator = myA.getThings() 
```

我想知道模板内的问号。我的猜测是它应该是任何派生的东西，`iface_classB`但似乎我错了。

非常感谢您的任何回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T08:32:37.803

您所做的假设与实际情况相反：

```
Iterable<? extends iface_classB> getThings(); 
```

意味着`getThings()`返回**至少**具有`iface_classB`. 因此，您不能将结果分配`getThings()`给 any `Iterable< impl_of_iface_classB >`，因为您只能确定对象公开了 a 的功能`iface_classB`。

例如，如果返回的对象`getThings()`实际上是一个`Iterable<impl2_of_iface_classB>`，在哪里`impl2_of_iface_classB`扩展`iface_classB`？可迭代对象不具备`impl_of_iface_classB`对象的功能。

在实践中，如果`B1`和`B2`派生自`B`，则完全允许有

```
A<? extends B> x; 
A<B1> y;
A<B2> z;

x = y;
x = z; 
```

因此`getThings()`不能依赖泛型参数所代表的含义：它只能作为“普通”使用`iface_classB`。

更重要的是，您希望能够分配给`Iterable<iface_classB>`，但您不能（除非您执行未经检查的强制转换，否则不会）。这是因为通配符本质上意味着“一组可行的通用参数”。想象一下，您将通配符替换为您使用的具体泛型参数：如果参数不匹配，由于类型不兼容，您会得到通常的编译时错误。编译器必须考虑所有情况，不允许您这样做。所以，

```
A<? extends B> x;
A<B> y = x; 
```

虽然实际上是安全的，但不允许这样做，因为`x`可能会分配一个不同于 的参数`B`，从而为分配的两侧产生不同的类型。相反，

```
A<B> x;
A<? extends B> y = x; 
```

是允许的，因为 的类型`y`代表一**组备选方案**，并且该组包括`A<B>`. 一旦`y`像上面这样分配，集合的具体估值就被实际选择了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T08:26:22.363

这是泛型的一部分，它与通配符有关 检查此链接[http://docs.oracle.com/javase/tutorial/java/generics/wildcards.html](http://docs.oracle.com/javase/tutorial/java/generics/wildcards.html)

# ios - 如何在用户输入的字符串后面添加一个 URL，以便使用 ShareKit 在社交网络上发布？

> ID：10878325
> 
> 赞同：1
> 
> 时间：2012-06-04T08:23:52.607
> 
> 标签：ios, url, sharekit

我想我可能需要编辑每个服务的发送操作的代码。不过不知道具体情况，谢谢。

# git - 如何创建一个接受推送到工作树的远程 git 存储库？

> ID：10878328
> 
> 赞同：1
> 
> 时间：2012-06-04T08:24:00.933
> 
> 标签：git, repository, push, staging

我试图拥有一个共享的远程存储库，团队成员可以在其中推送他们的更改并在暂存环境中查看它们。

我看过一些选择，但我仍然卡住了。裸存储库没有工作树，并且我尝试了将 receive.denyCurrentBranch 设置为 false 的普通存储库（这让我可以推送到远程），但是在您登录服务器并执行 git reset 之前，工作树仍然不会更新。

理想情况下，我希望能够只推送到存储库（一个命令）并实时查看更新的更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:29:07.237

您将需要在远程存储库上设置一个`post-receive`挂钩以将更改拉到工作树中。使用裸存储库，您可以`git-archive`HEAD 并将存档解压缩到目录，而不是更新工作树。

参考：[Git 钩子](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)；[git存档](http://git-scm.com/docs/git-archive)

# clojure - clojure 中何时使用生成的符号？

> ID：10878329
> 
> 赞同：3
> 
> 时间：2012-06-04T08:24:01.630
> 
> 标签：clojure, symbols, generated

什么时候适合在 clojure 中使用生成的符号（varname#）？具体例子有哪些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T08:33:45.173

它们主要用于宏中，以便在宏中定义的符号不会与调用宏时在同一词法范围内定义的符号冲突。使用自动生成的符号可以避免这种冲突（这个概念是 AKA 卫生宏）。

# eclipse - Eclipse 作为 git mergetool？

> ID：10878334
> 
> 赞同：2
> 
> 时间：2012-06-04T08:24:23.087
> 
> 标签：eclipse, git, configuration, mergetool

假设我正在使用带有命令行 git 的 Eclipse。

如果我有一个 Eclipse 实例正在运行，是否可以以`mergetool`某种方式使用其内部比较视图？由于所需的退出代码，我不确定它是否可能。

（*我想避免安装 Egit 插件，我对此有一些负面的经验。*）

感谢您的任何提示！

**更新**好吧，似乎没有办法在命令行中执行此操作。无论如何，我相信我会给 EGit 插件另一个机会，因为 Eclipse 中的合并功能。如果有人找到替代解决方案，请不要犹豫在此处发布！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:37:51.463

您不能以这种方式使用 Eclipse。

# cakephp - url中的自动前缀

> ID：10878335
> 
> 赞同：1
> 
> 时间：2012-06-04T08:24:27.933
> 
> 标签：cakephp, cakephp-2.0

我在我的应用程序中使用语言前缀：

```
Router::connect('/:language/:controller/:action/*',
                       array(),
                       array('language' => '[a-z]{3}')); 
```

当我使用时，`$this->Html->link('title',$url_array)`我必须手动设置语言前缀。我想要的是当当前url中存在前缀时，当我使用`->link(...)`它时应该自动将此前缀添加到url中。只有当我明确设置此前缀时，它才会有所不同。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:04:24.473

如果您想在应用程序范围内管理您的区域设置（不是每个用户），您应该检查 AppController 的 beforeFilter() 中 URL 中的当前区域设置。您的 :language 前缀`Router`将确保您为不同的本地化内容提供唯一的 URL。

`$this->Html->link()`如果以正确的方式管理 Config.language 配置设置，它将按您的预期运行。

所以在你`AppController::beforeFilter()`做一个 if() 语句来检测正在请求哪个语言环境，并取决于它：

```
Configure::write('Config.language', 'fre'); 
```

或者

```
Configure::write('Config.language', 'eng'); 
```

这样做将确保 I18n 和[TranslateBehavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/translate.html)访问相同的语言值。

如果您想管理每个用户的应用程序区域设置，您可以将当前区域设置存储在 Session 中：

```
class AppController extends Controller {
    public function beforeFilter() {
        Configure::write('Config.language', $this->Session->read('Config.language'));
    }
} 
```

当然，您还应该使用[翻译函数 __()](http://book.cakephp.org/2.0/en/core-libraries/global-constants-and-functions.html#__)。查看 Cake Book 的[国际化和本地化](http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html)部分。哦，是的，那篇文章的“细则”中还提到了一些非常重要的东西：

> 本地化应用程序的另一个方面是使用翻译功能未涵盖的，即日期/货币格式。不要忘记 CakePHP 是 PHP :)，因此要设置这些内容的格式，您需要使用 setlocale。如果您将计算机上不存在的语言环境传递给 setlocale，它将无效。`locale -a`您可以通过在终端中运行命令来查找可用语言环境的列表。

# android - 从 android 上的图像序列创建视频

> ID：10878336
> 
> 赞同：5
> 
> 时间：2012-06-04T08:24:37.337
> 
> 标签：android, ffmpeg, javacv

我想通过以下代码从图像序列（在 android 上）创建视频：

```
 opencv_core.IplImage image = cvLoadImage("/sdcard/mytest/testimage.jpg");
    FFmpegFrameRecorder recorder = new FFmpegFrameRecorder("/sdcard/mytest/test.3gp",256,256);
    try {
        recorder.setCodecID( CODEC_ID_H263);
        recorder.setFormat("3gp");
        recorder.setPixelFormat(  PIX_FMT_YUV420P);
        recorder.start();
        for (int i=0;i<10;i++)
          {
            recorder.record(image);
          }
        recorder.stop();
       }
    catch (Exception e){
        e.printStackTrace();
      } 
```

但我得到的不是我的图像，而是绿屏。我必须在我的代码中更改什么？

以及如何将音频添加到我的视频中？

# c++ - 中间变量的数据类型

> ID：10878338
> 
> 赞同：0
> 
> 时间：2012-06-04T08:24:40.453
> 
> 标签：c++

我正在编写一个程序（在 cpp 中）来检查给定数字的素数

我被打动的一点是，我需要在程序之间检查我对输入的一些算术运算获得的值是否是整数

即假设输入是'a'

我想知道如何检查“b”是否为整数（仅供参考，b=(a+1)/6）

我对此的尝试：

```
int main()
{
    using std::cin;
    using std::cout;
    int b,c;
    int a;
    cout<<"enter the number";
    cin>>a;
    b=(a+1)/6;
    c=(a-1)/6;
    if (b is an integer)
        cout << "The given number is  prime";
    else if (c is an integer)
        cin << "The given number is  prime!";
    else
        cout<<"The number is not prime";                  
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T08:28:16.813

您应该使用`if (((a+1)%6) == 0)`（请参阅[模数运算符](http://www.cprogramming.com/tutorial/modulus.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:30:29.560

因为`a`and`1`都有类型`int`，所以`a+1`and也有`(a+1)`。也`6`有 type `int`，无论 的值是多少，`(a+1)/6`都会有 type 。`int``a`

我想你真正想知道的是是否`6`均分`(a+1)`。为此，您可以使用模数运算符。当且仅当`6`均分。`(a+1)``(a+1)%6 == 0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T08:30:59.663

使用其他答案中建议的模数运算符`%`可能是最好的解决方案，但要更字面地回答您的问题，您可以判断整数除法的结果是否完全像这样：

```
b=(a+1)/6;
c=(a-1)/6;
if (b * 6 == a + 1) // if b is an integer
    cout << "The given number is  prime";
else if (c * 6 == a - 1) // if c is an integer
    cin << "The given number is  prime!";
else
    cout<<"The number is not prime"; 
```

# .net - 使用自定义 AuthorizeAttribute 装饰控制器时出现重定向错误

> ID：10878345
> 
> 赞同：1
> 
> 时间：2012-06-04T08:25:24.030
> 
> 标签：.net, asp.net-mvc, authentication, authorization

我正在使用 VS 2011 开发一个 asp.net MVC 4 应用程序。我有一个带有自定义 AuthorizeAttribute 的自定义角色提供程序来确定用户的角色，如果他们不是特定角色的成员，他们将重定向到拒绝访问页面. 到目前为止，当我使用自定义属性装饰任何控制器操作时，我所做的工作，但是当我将属性添加到控制器时，它会在 IE 和 FF 中出现不同的错误。我的自定义属性：

```
public class AccessDeniedAuthorizeAttribute : AuthorizeAttribute
{
    public string RedirectActionName { get; set; }
    public string RedirectControllerName { get; set; }
    private IAccountRepository _accountRepository;

    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var user = httpContext.User;
        this._accountRepository = new AccountRepository();
        var accessAllowed = false;    
        var allowedRoles = this.Roles.Split(',');

        if (!user.Identity.IsAuthenticated)
        {
            return false;
        }

        // Get roles for current user
        var roles = this._accountRepository.GetRoles(user.Identity.Name);

        foreach (var allowedRole in allowedRoles)
        {
            if (roles.Contains(allowedRole))
            {
                accessAllowed = true;
            }
        }

        if (!accessAllowed)
        {
            return false;
        }

        return base.AuthorizeCore(httpContext);
    }

    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        base.OnAuthorization(filterContext);

        if (filterContext.HttpContext.User.Identity.IsAuthenticated && filterContext.Result is HttpUnauthorizedResult)
        {   
            var values = new RouteValueDictionary(new
            {
                action = this.RedirectActionName == "" ? "AccessDenied" : this.RedirectActionName,
                controller = this.RedirectControllerName == "" ? "Home" : this.RedirectControllerName
            });

            filterContext.Result = new RedirectToRouteResult(values);
        }
    }
} 
```

我还在 RegisterGlobalFilters 中添加了一个全局属性（我尝试删除它但仍然遇到相同的问题）：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
    filters.Add(new System.Web.Mvc.AuthorizeAttribute());
} 
```

当我用属性装饰一个动作时，它可以正常工作：

```
[AccessDeniedAuthorize(RedirectActionName = "AccessDenied", RedirectControllerName = "Home", Roles = "propdat")]
public ActionResult Index()
{
    this.ViewBag.Message = "Welcome.";

    return this.View();
} 
```

但是当我将它添加到控制器时，它会完全中断：

```
[AccessDeniedAuthorize(RedirectActionName = "AccessDenied", RedirectControllerName = "Home", Roles = "propdat")]
public class HomeController : Controller
{
    public ActionResult Index()
    {
        this.ViewBag.Message = "Welcome.";

        return this.View();
    }

    public ActionResult AccessDenied()
    {
        this.ViewBag.Message = "You are not authorised to view this page. Please contact your administrator.";

        return this.View();            
    }
} 
```

这些角色是通过一个看起来不错的存储库从我的数据库返回的。在 IE 中，我得到标准的“Internet Explorer 无法显示网页”错误，而在 Firefox 中出现了一个非常奇怪的错误：

> **页面未正确重定向**
> Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。
> 
> *   此问题有时可能是由禁用或拒绝接受 cookie 引起的。

在 IE 中，url 保留在 Home url：

```
http://localhost:1989 
```

但 FF 在 url 更改为我在属性中指定的视图时执行重定向：

```
http://localhost:1989/Home/AccessDenied 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:21:42.700

**再看看你的代码，伙计：）**

你正在`HomeController`用你的装饰，`AccessDeniedAuthorizeAttribute`但你`HomeController`包含你`AccessDenied`无法拒绝的行为。

所以问题是，每当`AccessDeniedAuthorizeAttribute`尝试将当前用户重定向到`AccessDenied`Action`accessAllowed`时，这将是错误的，这会将您加载到循环循环中。

**解决方案是：**

要么把你的`AccessDenied`动作放在另一个“HelperController”中，不要用你的属性装饰这个 HelperController。

或者只是将此属性添加到除了操作`HomeController`之外的所有操作`AccessDenied`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-21T11:19:15.730

我认为你需要做的是：

1.  删除全局过滤器 - 这将锁定每个 MVC 控制器（不是 WebAPI）上的每个操作 - 强制如果用户未经过身份验证或未授权，则框架将返回重定向到“登录 url”设置（在 authentication > forms 元素中找到 - 假设您使用的是 Forms 身份验证） - 请注意，全局过滤器不会在您的自定义属性中使用重定向 url。

2.  将您的自定义属性放在主控制器上，然后将 [AllowAnnoymous] 属性添加到 AccessDenied 操作，最重要的是，将此代码添加到您的自定义属性（这是确保它跳过具有 [AllowAnnoymous] 属性的操作所必需的）：

    ```
     bool skipAuthorization = 
        filterContext.ActionDescriptor.IsDefined(typeof(AllowAnonymousAttribute), inherit: true) 
        || 
        filterContext.ActionDescriptor.ControllerDescriptor.IsDefined(typeof(AllowAnonymousAttribute), inherit: true);

        if (skipAuthorization)
        {
            return;
        } 
    ```

顺便说一句，Firefox 告诉你的是你得到了一个无限的重定向循环......因为初始请求未经授权，框架重定向到登录 url，但是该请求被授权检查捕获并且本身被重定向......所以依此类推，直到浏览器放弃并停止循环。

# android - Android：onTouchListener 无法正常工作

> ID：10878352
> 
> 赞同：1
> 
> 时间：2012-06-04T08:25:42.500
> 
> 标签：android, android-layout, ontouchlistener

我目前正在开发一个`RelativeLayout`有 4 个 child的应用程序`FrameLayouts`，每个 FrameLayout 里面都有一组 ImageViews ，里面的 View 有它自己的行为。我正在尝试在实现我在[本教程](http://www.androidbrains.com/index.php/2011/01/09/android-drag-and-drop/)`FrameLayouts`中找到的时实现拖放。但不幸的是，拖放无法正常工作，也没有发生任何事情。`onTouchListener`

关于如何正确实现拖放的任何想法？我错过了什么？

* * *

这是单个子项的 xml 代码`FrameLayouts`：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="80dp"
    android:layout_height="108dp" >

    <ImageView
        android:id="@+id/secondImage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/back" />

    <ImageView
        android:id="@+id/firstImage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/c2" />

</FrameLayout> 
```

* * *

这是 xml 代码`main.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/pinecropped"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@+id/cardNumber1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="50dp"
        android:layout_marginTop="60dp" >

        <include layout="@layout/card" />
    </FrameLayout>

    <FrameLayout
        android:id="@+id/cardNumber2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/cardNumber1"
        android:layout_marginLeft="50dp"
        android:layout_marginTop="100dp" >

        <include layout="@layout/card" />
    </FrameLayout>

    <FrameLayout
        android:id="@+id/cardNumber3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="50dp"
        android:layout_marginTop="60dp" >

        <include layout="@layout/card" />
    </FrameLayout>

    <FrameLayout
        android:id="@+id/cardNumber4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/cardNumber3"
        android:layout_marginRight="50dp"
        android:layout_marginTop="100dp" >

        <include layout="@layout/card" />
    </FrameLayout>

</RelativeLayout> 
```

* * *

这是单个孩子的 Java 代码：

```
public class Card implements OnClickListener {
    private int _resId;

    private Context _context;
    private ImageView firstImage, secondImage;
    private boolean isFirst;

    public Card(Context context, FrameLayout parent) {
        _context = context;
        firstImage = (ImageView) parent.findViewById(R.id.firstImage);
        secondImage = (ImageView) parent.findViewById(R.id.secondImage);

    }

    public void setupCards(int resId, boolean hasBackSide) {
        _resId = resId;
        Bitmap temp = BitmapFactory.decodeResource(_context.getResources(),
                _resId);
        firstImage.setImageBitmap(temp);
        if (hasBackSide) {
            temp = BitmapFactory.decodeResource(_context.getResources(),
                    R.drawable.back);
        }
        secondImage.setImageBitmap(temp);
        isFirst = true;
        secondImage.setVisibility(View.GONE);

    }

    // MORE IMPLEMENTATION
} 
```

* * *

这是我的主要活动 Java 代码：

```
public class FaceUpActivity extends Activity {
    FrameLayout firstCard, secondCard, thirdCard, forthCard;
    Card cardNumber1, cardNumber2, cardNumber3, cardNumber4;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        initUI();
    }

    private void initUI() {
        firstCard = (FrameLayout) findViewById(R.id.cardNumber1);
        secondCard = (FrameLayout) findViewById(R.id.cardNumber2);
        thirdCard = (FrameLayout) findViewById(R.id.cardNumber3);
        forthCard = (FrameLayout) findViewById(R.id.cardNumber4);

        cardNumber1 = new Card(this, firstCard);
        cardNumber2 = new Card(this, secondCard);
        cardNumber3 = new Card(this, thirdCard);
        cardNumber4 = new Card(this, forthCard);

        cardNumber1.setupCards(R.drawable.c2, true);
        cardNumber2.setupCards(R.drawable.d0, true);
        cardNumber3.setupCards(R.drawable.h5, true);
        cardNumber4.setupCards(R.drawable.sj, true);

        firstCard.setOnTouchListener(dragMe);
        secondCard.setOnTouchListener(dragMe);
        thirdCard.setOnTouchListener(dragMe);
        forthCard.setOnTouchListener(dragMe);

    }

    OnTouchListener dragMe = new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            FrameLayout.LayoutParams params = (LayoutParams) v
                    .getLayoutParams();
            int maxWidth = getWindowManager().getDefaultDisplay().getWidth();
            int maxHeight = getWindowManager().getDefaultDisplay().getHeight();
            int topMargin, leftMargin;

            int cond = v.getId();
            if (cond == R.id.cardNumber1 || cond == R.id.cardNumber2
                    || cond == R.id.cardNumber3 || cond == R.id.cardNumber4) {
                switch (event.getAction()) {
                case MotionEvent.ACTION_UP:

                    topMargin = (int) event.getRawY() - (v.getHeight());
                    leftMargin = (int) event.getRawX() - (v.getWidth()) / 2;

                    if (topMargin < 0) {
                        params.topMargin = 0;
                    } else if (topMargin > maxHeight) {
                        params.topMargin = maxHeight - v.getHeight();
                    } else {
                        params.topMargin = topMargin;
                    }

                    if (leftMargin < 0) {
                        params.leftMargin = 0;
                    } else if (leftMargin > maxWidth) {
                        params.leftMargin = maxWidth - (v.getWidth() / 2);
                    } else {
                        params.leftMargin = leftMargin;
                    }

                    v.setLayoutParams(params);

                    break;

                case MotionEvent.ACTION_MOVE:

                    topMargin = (int) event.getRawY() - (v.getHeight());
                    leftMargin = (int) event.getRawX() - (v.getWidth()) / 2;

                    if (topMargin < 0) {
                        params.topMargin = 0;
                    } else if (topMargin > maxHeight) {
                        params.topMargin = maxHeight - v.getHeight();
                    } else {
                        params.topMargin = topMargin;
                    }

                    if (leftMargin < 0) {
                        params.leftMargin = 0;
                    } else if (leftMargin > maxWidth) {
                        params.leftMargin = maxWidth - (v.getWidth() / 2);
                    } else {
                        params.leftMargin = leftMargin;
                    }

                    v.setLayoutParams(params);

                    break;
                }
            }
            return true;
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:58:39.850

我认为有几个潜在的问题：

1.  你确定你得到了正确的 ID`onTouch()`吗？（由于触摸监听器仅用于您的卡片视图，因此您可以删除`if`对 ID 的检查）
2.  ~~你正在使用`FrameLayout`- 所以使用 x 和 y 位置而不是边距~~编辑：我的错，你正在使用`RelativeLayout`，所以边距是正确的。不过，我会用 a`FrameLayout`代替
3.  API说如果你消费了事件你需要返回，`true`否则（当你没有移动卡片时你会返回，而当你移动时什么都没有）`onTouch()``false``true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:29:25.593

为什么您的 D&D 不起作用：

D&D 不起作用，因为您的 Card（使用内部 FrameLayout）正在实现“吃掉”d&d 事件的 onClick 事件。

解决方法有两种：

you can have 2 different areas, one for the click event (the biggest part of the card), one for the d&d event (the bottom-left edge of the card). You can see a live example in the Android Music player that implements this solution.

Otherwise you can handle the two events at the same time:

*   click == down+up in the same time (under 100ms) in the same x/y location
*   dd == down+up in different times ( > 50/100ms)

# php - PHP-EXCEL 库进程内存/延迟

> ID：10878362
> 
> 赞同：0
> 
> 时间：2012-06-04T08:27:20.907
> 
> 标签：php, excel, memory-management

我可以知道，是否存在任何解决方案并与延迟和从 codeplex 分配 php-excel 库的内存有关？问题是，当我们想使用 codeplex 的 php-excel 库将数据导出到 excel 文件时，会花费太多时间并充分分配内存。

对于以下用例：

*   RAM大小为：4G
*   数据内容 约 3500 条记录

当我们点击导出数据到excel文件时，出现如下信息：

> 致命错误：允许的内存大小 10773741824 字节用尽（试图分配 59 字节...）

我已将分配内存增加到 3G，但资源已被使用到最大……为什么会出现这种情况？这很正常吗？并发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:43:26.037

我们可以将数据直接导出到保存的文件中以节省内存和进程，使用文本文件效率太高，但是对于csv，excel文件，应该考虑格式和使用的库的能力来解决这个问题。

# java - onmessage Google App Engine (Java) 频道 API

> ID：10878364
> 
> 赞同：1
> 
> 时间：2012-06-04T08:27:29.013
> 
> 标签：java, google-app-engine, channel-api

我正在尝试使用 Google App Engine 的 Channel API。

JavaScript / JQuery：

```
$(document).ready(function(){
    alert('ready');

    $.post('/token', function(data) {
        alert('token:' + data['token']);
        openChannel( data['token'] );
    });

    $.post('/chat', function(data) {
        alert('chat:' + data['users'].length);
    });

});

onMessage = function(message) {
    alert(message);
}

onSocketError = function(error){
    alert("Error is <br/>"+error.description+" <br /> and HTML code"+error.code);
};

onSocketOpen = function() {
    // socket opened
};

onSocketClose = function() {
    alert("Socket Connection closed");
};

openChannel = function(token) {
    alert('open channel');
    var channel = new goog.appengine.Channel( token );
    var socket = channel.open();
    socket.onopen = onSocketOpen;
    socket.onmessage = onMessage;
    socket.onerror = onSocketError;
    socket.onclose = onSocketClose;
}; 
```

问题是 alert(message) 没有触发。我的代码中有什么好运的？

`"\\{\\{ token \\}\\}"`我对服务器端和`channel = new goog.appengine.Channel('{{ token }}')`javascript中的一些示例感到困惑。

它包含在什么中`{{ }}`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:31:16.743

请注意，token 是标识您的页面的 TOKEN KEY。首先在页面中初始化令牌，例如：

```
 ChannelService channelService = ChannelServiceFactory.getChannelService();
 String token = channelService.createChannel("sample"); 
```

现在

```
var token ="<%=token %>";// This will creaete unique identifier(some id created by google api + ur key)

channel = new goog.appengine.Channel('<%=token%>');    
    socket = channel.open();    

    socket.onopen = function () {
        var connected = true;  
        sendMessage('<b>'+userName+'</b> Logged in.');
    }; 
```

..创建这样的功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T08:41:10.147

在javascript中

```
 function onMessage(msg) 
           {
  var msg1=msg.data;
  $('textarea').val($('textarea').val()+msg1);

    } 
```

在后端

```
 ChannelService channelService = ChannelServiceFactory.getChannelService();
 channelService.sendMessage(new ChannelMessage(clientid,message)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T15:14:09.950

除了使用正确的令牌外，您的 onMessage 函数不会触发，因为当您从服务器向客户端发送消息时会发生这种情况：

```
channelService.sendMessage(new ChannelMessage(channelKey, "Hello World")); 
```

您可以设置一个 XMLHttpRequest 以便从客户端与服务器端进行通信，其中可以运行之前的 java 代码，例如：

```
sendMessage = function(path, param) {   
    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'path + '&' + param', true);
    xhr.send();
}; 
```

# jakarta-ee - 正确的消息检索，JavaBean vs JSTL

> ID：10878366
> 
> 赞同：0
> 
> 时间：2012-06-04T08:27:31.773
> 
> 标签：jakarta-ee, jstl, forum

我正在编写一种简单的论坛网络应用程序，并且正在考虑如何实现消息检索机制。目前，我在 JSTL sql 标记和应用程序范围 java bean 之间进行选择，后者包含所有消息并在必要时更新集合。我应该考虑哪些方面，为什么？有没有其他推荐的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:34:45.033

以下是[Oracle 官方教程](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSTL7.html)中关于 SQL 标记库的说明：

> 用于访问表 14-8 中列出的数据库的 JSTL SQL 标记是为快速原型设计和简单应用程序而设计的。对于生产应用程序，数据库操作通常封装在 JavaBeans 组件中。

JSP 是视图组件。它们的预期用途是生成 HTML 标记。在正确设计的应用程序中，对数据库的访问应该在控制器中完成（通过服务和 DAO），而不是在视图中。

避免像瘟疫一样使用 JSTL SQL 标记库。它会让你的应用程序变得一团糟。

# android - 如何在添加到 Android AOSP 的自定义外部项目中保留文件权限？

> ID：10878369
> 
> 赞同：3
> 
> 时间：2012-06-04T08:27:44.417
> 
> 标签：android, android-source

我已经下载（使用 repo）Android 4.0 OS 源代码（从这里 - [http://source.android.com/](http://source.android.com/)）。我正在尝试将一个新的外部项目（在 external/ 例如 external/libhelloworld 中）添加到构建系统中，以便将其构建到系统映像中。在那个项目中，我想部署一个 shell 脚本并让它保持它的权限，即 rwxr-xr-x 但是当我构建它并加载模拟器时，我看到文件权限已更改为 rw-r--r-- . 我正在将脚本部署到 /etc。我的 Android.mk 文件看起来像这样

LOCAL_PATH := $(调用我的目录)

包括 $(CLEAR_VARS) LOCAL_MODULE := libhelloworld LOCAL_MODULE_TAGS := 可选 LOCAL_MODULE_SRC := helloworld.c 包括 $(BUILD_SHARED_LIBRARY)

包括 $(CLEAR_VARS) LOCAL_MODULE := myscript.sh LOCAL_MODULE_TAGS := 可选 LOCAL_MODULE_SRC := $(LOCAL_MODULE) LOCAL_MODULE_CLASS := EXECUTABLES LOCAL_MODULE_PATH := $(TARGET_OUT)/etc/helloscripts 包括 $(BUILD_PREBUILT)

我看到脚本权限在被复制到中间区域时被保留，但是在构建过程之后的某个时间点更改了权限。知道为什么脚本权限在添加到系统映像时没有被保留吗？我的 Android.mk 中是否缺少某些内容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T09:47:37.907

您可以在此文件中更改系统映像文件系统修改：

```
system/core/include/private/android_filesystem_config.h 
```

尝试在那里更改权限。如果您有问题，请在此处发布。

# ruby-on-rails - Ruby on Rails 项目加密软件或方法？

> ID：10878370
> 
> 赞同：2
> 
> 时间：2012-06-04T08:27:47.733
> 
> 标签：ruby-on-rails, ruby, encryption

我正在评估从 PHP 迁移到 Ruby（Ruby on Rails）。我最关心的一个问题是项目加密。

目前在 PHP 中，我使用 Source Guardian 在将项目提供给客户之前对其进行加密。

然而，对于 Ruby，我发现的唯一选择是 ruby​​encoder.com（与 PHP 源 Guardian 相同的公司）。有没有人试过这个软件并有第一手经验？

有没有其他软件？

Ruby 中是否有任何本地方式来加密项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:49:32.017

您应该知道这并不能真正保护您的代码。在某些时候，代码必须由 Ruby 的 VM 执行（假设您使用的是 1.9.x）。除非经过修改，否则 VM 本身只能理解未加密形式的指令。

这意味着在执行加密代码之前，必须将其转换回其原始形式。非常渴望阅读您的源代码的人可以通过调试 Ruby 进程并等待解密发生来做到这一点。

即使只是从中获得的字节码指令，也可以从字节码解释中重构出可读性很强的源代码，[这里](http://www.mendeley.com/research/krakatoa-decompilation-in-java-does-bytecode-reveal-source/)是 Java 的一个示例，但 Ruby 也可以实现类似的事情。

代码混淆可能更符合您的要求，但对于 Ruby 代码来说，它也是一个非常危险的选择：它可能会破坏复杂的元编程特性。

我从来都不是 DRM 措施的朋友，所以我可能在这里很固执……但你真的、真的相信你需要这些功能吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:21:48.680

如果您可以使用 Rubinius 执行代码，则有一种简单的处理方法（JRuby 也可能存在类似的解决方案，因为它在 JVM 上运行）：使用 Rubinius，您可以将源代码编译为字节码并仅发送二进制代码发送给客户端。该代码可以在目标系统上执行，而不会泄露任何源代码。有关详细说明和注意事项，请参阅 rubinius 主页上的此博客文章：[http ://rubini.us/2011/03/17/running-ruby-with-no-ruby/](http://rubini.us/2011/03/17/running-ruby-with-no-ruby/)

# java - 如何为返回大数据的方法制作测试用例

> ID：10878371
> 
> 赞同：1
> 
> 时间：2012-06-04T08:28:02.487
> 
> 标签：java, unit-testing, junit

该应用程序生成 CSV、自定义/选项卡分隔符等报告并制作这些报告的测试用例，我使用的是 JUnit-4。

但是有些方法将大量数据作为格式化的输出字符串返回，必须将其转储到文件中。现在，我面临为断言生成预期结果的问题。

1.  那怎么模拟呢，是不是还要再写代码呢，真是大费周折。
2.  在 JUnit 中编码（重新编码为原始代码）是否是一种好习惯，我当然对此表示怀疑。如果代码更改，它将是紧密耦合的，并且测试用例将来会失败。
3.  如何为返回巨大列表的方法制作测试用例，我可以将其限制为数百个，但无法模拟预期结果列表以与之进行比较。
4.  另外，我使用 JUnit 在应用层而不是视图层测试基于 Web 的应用程序的功能。是否可以，或者我应该转移到其他框架，如 HttpUnit。

* * *

**编辑：**我正在测试一种方法，该方法将输入作为从数据库中获取的 ArrayList，然后将输出准备为格式正确的字符串以供报告。所以基本上，它从数据中生成 CSV。

此外，有人可以指出一些必须遵循的单元测试最佳实践。我浏览了各种在线资源，但无法联系到太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:04:57.540

您要进行单元测试的方法是将数据作为参数并将其转换为 CSV 的方法。因此，它应该只测试这种转换是否有效，并且您应该为它提供最少的必要数据，以验证它在所有情况下确实有效。

该方法应该独立于从数据库中获取数据的方法，并且您不应该从数据库中获取大量数据来对该方法进行单元测试。只需在内存中准备数据，并将其作为参数提供给您的测试中的数据转换方法：

```
List<Foo> data = new ArrayList<Foo>();
data.add(createFooA());
data.add(createFooB());
String csv = myTestedObject.transformToCsv(data);
assertEquals("...", csv); 
```

# cocoa - 如何修改并返回 NSImage？

> ID：10878372
> 
> 赞同：1
> 
> 时间：2012-06-04T08:28:08.240
> 
> 标签：cocoa, nsimage

这可能是一个新手问题，但我无法理解如何操作 NSImage 实例。

我正在尝试创建一个方法，该方法将采用 NSImage（一个图标），在其上绘制另一个 NSImage（一个复选标记），然后返回修改后的 NSImage 实例。

我已经查看了 Cocoa 绘图指南中的“绘制到图像”部分，但我仍然不知道如何返回修改后的 NSImage。

寻找类似的东西：

```
(NSImage*) drawCheckbox:(NSImage*)originalImage {
    NSImage* checkbox = [NSImage imageNamed:@"checkbox"];

    // create and return new NSImage with checkbox drawn over originalImage
} 
```

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:32:21.260

首先，制作原始图像的副本。然后，按照您提到的文档中的说明绘制新图像。`return`最后，使用语句返回更改后的图像。

# php - 使用 wkhtmltopdf 和 php 旋转 pdf

> ID：10878376
> 
> 赞同：0
> 
> 时间：2012-06-04T08:28:24.930
> 
> 标签：php, rotation, wkhtmltopdf

如何创建旋转 90 度的 A3 格式的 PDF 文档？我将 wkhtmltopdf 与 php 一起使用。我试图为宽度和高度设置变量，但它不起作用，而且我找不到任何用于旋转文档的函数。有没有人使用过 wkhtmltopdf 并旋转了 pdf 文档？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:33:05.537

你的意思是方向景观？`$ wkhtmltopdf -O landscape`

如果您正在谈论旋转页面本身，请参阅这个问题 [如何使用 php 旋转 pdf 文档？](https://stackoverflow.com/questions/403372/how-rotate-a-pdf-document-using-php)

# c# - C++/CLI Wrapper 中的死锁

> ID：10878377
> 
> 赞同：1
> 
> 时间：2012-06-04T08:28:46.113
> 
> 标签：c#, wpf, c++-cli

我有一个 c++/cli 包装类，它从相机中抓取帧并将它们作为事件发送。

WPF 测试应用程序启动相机，并更新图像。当我单击`Stop`时，它通常以死锁结束，在`m->streamThread->Join()`. 我怀疑问题与 WPF 中的帧处理事件有关，而不是与包装器代码有关。

```
namespace WpfTestApp
{
    public partial class Window1 : Window
    {

    private void OnFrameArrived(object sender, EventArgs e)
    {
        Action a = delegate 
        {
            // this uses Imaging.CreateBitmapSourceFromMemorySection
            // to copy the frame data to the image memory

            m_colorImage.UpdateImage(e.Image);
        };

        Dispatcher.Invoke(a);
    }

    private void startBtn_Click(object sender, RoutedEventArgs e)
    {
        m_camera.FrameArrived += m_frameHandler;
        m_camera.Start();
    }

    private void Stop()
    {
        m_camera.FrameArrived -= m_frameHandler;
        m_camera.Stop();
    }
    }
}

// Camera.h
public ref class Camera
{
public:
    delegate void FrameArrivedHandler(Object^ sender, DGEventArgs^ e);        
    event FrameArrivedHandler^ FrameArrived;

    void Start();
    void Stop();

 private:
    void StreamThreadWorker();
    Thread^ m_streamThread;
    bool m_isStreaming;
 }

 // Camera.cpp
void Camera::Start() 
{
    if (m_isStreaming)
        return;

    m_isStreaming = true;

    m_streamThread = gcnew Thread(gcnew ThreadStart(this, &Camera::StreamThreadWorker));
    m_streamThread->Start();
}

void Camera::Stop()
{
    if (!m_isStreaming)
        return;

    m_isStreaming = false;

    m_streamThread->Join(); // stuck here
}

void Camera::StreamThreadWorker()
{
    EventArgs^ eventArgs = gcnew EventArgs();

    while (m_isStreaming)
    {
        eventArgs->Image = Camera->GetImage();

        FrameArrived(this, eventArgs);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:01:39.157

可能发生的情况是：您单击停止，这将在 WPF ui 调度程序线程中处理。所以`Join`调用在 ui 调度程序线程中。然而，同样的线程也负责绘制帧（调用的 UpdateImage 调用）。结果，`StreamThreadWorker`正在等待`FrameArrived`完成，但由于线程正在等待完成而`Stop`无法完成。这是你的僵局。

所以为了`StreamThreadWorker`完成，它不能被`Stop`. 实现此目的的一种简单方法是从另一个线程中停止线程：

```
void Camera::Stop()
{
  ...

  gcnew Thread( gcnew ThreadStart( this, &Camera::DoStopThread ) )->Start();
}

void Camera::DoStopThread()
{
  if( !m_streamThread.Join( 3000 ) )
    HandleThreadDidNotStopInTimeError(); //notify listeners there's a serious problem
  m_streamThread.Abort();
  m_streamThread = null;
  RaiseThreadStoppedEvent(); //notify listeners that the thread stopped
} 
```

# asp.net-mvc - 如何在带有剃刀的视图页面中使用带有 MVC 的枚举以编程方式填充选择器

> ID：10878383
> 
> 赞同：0
> 
> 时间：2012-06-04T08:29:07.890
> 
> 标签：asp.net-mvc, razor, enums

我想使用枚举器填充选择器。我想用razor/VB或C#在View页面做这个操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:03:09.793

如果您有一个类似下面的枚举，那么您可能更喜欢将名称拆分为大写字母。

```
public enum Gender
{
    NotSpecified = 0,
    Male,
    Female
} 
```

这是拆分并返回 SelectList 以在 UI 中显示枚举但将所选值作为模型中的枚举返回的代码。

拆分逻辑来自 SO [post](https://stackoverflow.com/questions/155303/net-how-can-you-split-a-caps-delimited-string-into-an-array)之一。感谢海报。

```
public class EnumHelper
{
    public static SelectList GetSelectList<T>()
    {
        Type enumType = typeof(T);
        if (!enumType.IsEnum)
            throw new ArgumentException("The specified type is not enum");

        List<SelectListItem> items = new List<SelectListItem>();

        var values = Enum.GetValues(enumType);

        foreach (var value in values)
        {
            items.Add(new SelectListItem()
            {
                Value = value.ToString(),

                // Split at capital letters
                Text = Regex.Replace(Enum.GetName(enumType, value), "([a-z](?=[A-Z])|[A-Z](?=[A-Z][a-z]))", "$1 ")
            });
        }

        return new SelectList(items, "Value", "Text");
    } 
```

剃刀中的示例用法如下

```
<div class="editor-label">
    @Html.LabelFor(model => model.Gender)
</div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.Gender, EnumHelper.GetSelectList<Gender>())
    @Html.ValidationMessageFor(model => model.Gender)
</div> 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:42:49.210

对于简单的枚举名称，以下代码应该可以工作。

在剃刀/C#

```
<tr>
    <th>
        <div class="editor-label">
            @Html.LabelFor(model => model.Gender)
        </div>
    </th>
    <td>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.Gender, new SelectList(Enum.GetValues(typeof(Gender))))
            @Html.ValidationMessageFor(model => model.Gender)
        </div>
    </td>
</tr> 
```

我的枚举很简单，像这样

```
public enum Gender
{
    Male,
    Female
} 
```

# tomcat - 如何将 Valve 添加到 Apache Tomcat

> ID：10878385
> 
> 赞同：5
> 
> 时间：2012-06-04T08:29:32.330
> 
> 标签：tomcat, tomcat-valve

我通过扩展 org.apache.catalina.valves.ValveBase 类并实现 inovoke() 方法为 Apache Tomcat 编写了 Valve。现在我想将它添加到我的 Tomcat 中执行？请告诉我步骤。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T12:32:16.593

用你的 Valve 类创建一个 jar。

将其放入 $TOMCAT_HOME/lib 文件夹。

修改 server.xml 以在 Engine 或 Host 标签下添加阀门，如下所示，具体取决于您希望它运行的级别。

```
 <Engine name="Catalina" defaultHost="localhost">
 <Valve className="org.whatever.MyCustomValve" /> 
```

# c++ - 在 C++ 中定义警告

> ID：10878386
> 
> 赞同：3
> 
> 时间：2012-06-04T08:29:39.537
> 
> 标签：c++, visual-studio-2010

我想以这两种方式声明调试标志是打开还是关闭：

```
#define inDebugMode true 
```

或者

```
const bool inDebugMode = true; 
```

Visual Studio 2010 中的编译器总是给出警告：

```
warning C4127: conditional expression is constant 
```

这是为什么？我怎样才能正确声明它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T08:33:10.507

没有看到代码，我怀疑你有以下构造：

```
if (inDebugMode)
{
} 
```

这将永远是`true`，因此警告。

推荐使用预处理器而不是`if`：

```
#define inDebugMode 1

#if inDebugMode
#endif 
```

这将消除警告并防止在不需要时编译调试代码。请注意，您还可以通过编译器开关指定宏的值[`/D`](http://msdn.microsoft.com/en-us/library/hhzbb5c8.aspx)：

```
cl.exe /DinDebugMode=1 ... 
```

但是如果您选择命令行选项，您需要确保重建所有源，而不仅仅是更改的源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T08:36:46.717

这个警告不是为了定义，而是为了使用它。
假设您在代码中编写如下内容：

```
if (inDebugMode)
{
    //your code
} 
```

当编译器遇到它时（在定义的情况下预编译之后），这总是正确的，并且它认为不需要“if”。这样它只是一个警告而不是错误。
为了避免它，你可以这样做：

```
#define inDebugMode 1
//some code
#if inDebugMode
    //your code you only want to run in debug
#endif 
```

这样，如果您不调试“#if”部分中的所有代码，预编译器将省略，编译器不会有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T08:45:38.450

如果您不喜欢预处理器指令并且想使用 const bool，那么您可以直接禁用“警告 C4127”（项目属性/C/C++/高级/禁用特定警告/输入“4127”）。

# .net - 如何在没有程序的情况下在 vb.net 控制台上进行按键操作必须等待

> ID：10878390
> 
> 赞同：0
> 
> 时间：2012-06-04T08:29:46.840
> 
> 标签：.net, vb.net, console

我在最后构建了一个带有循环的控制台应用程序，

```
While(key <> "q")
   'some code
   'code to modify the variable [key]
   Console.Write("A")
End While 
```

在循环中，当用户按下键盘上的“q”时，程序将退出循环，我尝试使用 Console.Read 或 Console.ReadKey 不起作用，因为它等待用户按下键盘，但我需要循环继续运行，尽管用户没有按下键盘

所以在程序中控制台会像：AAAAAAAAAAAAAAA等。直到用户按下键盘上的“q”，

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:04:06.140

您想使用 Console.KeyAvailable 属性来检查 ReadKey 是否会阻塞。像这样：

```
Sub Main()
    Do
        '' Do something
        ''...
        Console.Write("A")
        If Console.KeyAvailable Then
            If Console.ReadKey(True).KeyChar = "q"c then Exit do
        End If
    Loop
End Sub 
```

# iphone - Json xcode 获取数据

> ID：10878393
> 
> 赞同：0
> 
> 时间：2012-06-04T08:30:00.623
> 
> 标签：iphone, json, youtube, youtube-api, xcode4.3

我有一个 json [http://gdata.youtube.com/feeds/api/users/ruflixnet/playlists?v=2&alt=jsonc](http://gdata.youtube.com/feeds/api/users/ruflixnet/playlists?v=2&alt=jsonc) ，我想获取 id、title 和 size，但现在不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:36:07.953

我推荐[JSONKit](https://github.com/johnezang/JSONKit)（查看基准）

> 一个非常高性能的 Objective-C JSON 库

解析

![在此处输入图像描述](../Images/d6eec1b0b4c8d4c328a6b82945536cbf.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T08:32:55.190

例如，使用 SBJSON 库，我一直在使用它们，它们非常好。

你在这里有一个教程：

[http://blog.zachwaugh.com/post/309924609/how-to-use-json-in-cocoaobjective-c](http://blog.zachwaugh.com/post/309924609/how-to-use-json-in-cocoaobjective-c)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T11:39:34.293

下载 JSON 库并将其包含在您的项目中，而不是为您的数据创建以下类 Make NSObject 类

对象数据.h

```
 @interface ObjectData : NSObject {

NSString *id; 
NSString *title;
NSString *size;

  }
@property(nonatomic,retain) NSString *id;
@property(nonatomic,retain) NSString *title; 
@property(nonatomic,retain) NSString *size;
@end 
```

对象数据.M

```
 #import ObjectData.h

  @implementation ObjectData

  @synthesize id; 
  @synthesize title;
  @synthesize size;
  @end 
```

制作另一个 DataController 类

```
 #import <Foundation/Foundation.h>

  @interface DataController : NSObject {

  }

  + (id)staticVersion;
 - (NSMutableArray *) startParsing:(NSString *)theURLString;
  end

 #import "DataController.h"
 @implementation DataController
 DataController *theInstance;

  +(id)staticVersion
                            {
if(!theInstance){
    theInstance = [[DataController alloc] init];
}
return theInstance;
   }

   - (NSMutableArray *) startParsing:(NSString *)theURLString {

NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@",theURLString]];
NSString *fileContent= [NSString stringWithContentsOfURL:url];
SBJSON *parser = [[SBJSON alloc] init];  
NSDictionary *data = (NSDictionary *) [parser objectWithString:fileContent error:nil];  
NSArray *items = (NSArray *) data ;  
return items;
    }

   @end 
```

并在视图中加载了

```
 NSArray *tempArray =[[DataController staticVersion] startParsing:serverName];

   for (int i = 0; i<[tempArray count]; i++) {
id *item = [tempArray objectAtIndex:i];
NSDictionary *dict = (NSDictionary *) item;

ObjectData *theObject =[[ObjectData alloc] init];
[theObject setid:[dict objectForKey:@"id"]];
[theObject settitle:[dict objectForKey:@"title"]];  
[theObject setsize:[dict objectForKey:@"size"]];

[resultArray addObject:theObject];
[theObject release];
theObject=nil; 
```

最后制作preferenc.h文件并给出你的json数据路径

```
 #import <Foundation/Foundation.h>

  #define serverName @"http://gdata.youtube.com/feeds/api/users/ruflixnet/playlists?v=2&alt=jsonc" 
```

希望这能正常工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T08:40:58.290

使用 SBJson

```
SBJsonParser *parser = [[SBJsonParser alloc] init];

NSMutableDictionary *dicRes = [parser objectWithString:stringFromServer error:nil]; 
```

# django - Django 一对多字段............？

> ID：10878394
> 
> 赞同：0
> 
> 时间：2012-06-04T08:30:09.083
> 
> 标签：django, django-models, django-forms

嘿朋友，我是 django 模型的新手。我的问题是，我有五个表属性，例如 .

```
Rulno (integer)
From (IpAddressfield )
To(IpAddressfield )
Priority (integer)
Cisp(CharField) 
```

对于单个 Ruleno，它们可以是多个 Priority 和 Cisp。所以我正在编写类似的模型。

```
class Ruleinfo(models.Model):
    rule = models.IntegerField(null=False)
    From = models.IPAddressField(null=True)
    to = models.IPAddressField(null=True)
    priority = models.ForeignKey('Priority',related_name = 'priority1')
    Cisp =models.ForeignKey('Priority',related_name = 'cisp1')
    def __unicode__(self):
        return u'%s' %(self.rule)

class Priority(models.Model):  
    priority =  models.IntegerField(null = True)
    Ruleno = models.ForeignKey('Ruleinfo')
    CISP = models.IntegerField(null = True)
    def __unicode__(self):
        return u'%s ' % (self.priority) 
```

我想知道，上面的模型能满足我的要求吗？.

或者让我知道是否有其他选择。？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T08:35:41.960

正确的方法是`ForeignKey`在关系的另一端使用 a 。

# bash - 复制 shell 脚本并保留权限

> ID：10878399
> 
> 赞同：0
> 
> 时间：2012-06-04T08:30:46.710
> 
> 标签：bash, permissions, distribute

我有一个小的 shell 脚本，当我双击它时它会启动一个程序。（我已设置允许执行脚本的权限）。

我希望能够将该脚本复制到另一台计算机，以便新用户可以双击它而无需了解有关 chmod 或权限的任何信息。但是我在复制文件时不知道如何保留执行权限。

我通常可以通过谷歌找到答案，但这让我失败了——我想我没有正确表达我的问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:59:48.273

使用`rsync`或`tar`。

```
rsync -p file user@host:destdir 
```

加上您可能需要的其他选项。

或者

```
tar cvzf file.tar file 
```

然后复制（或电子邮件等）`file.tar`到另一台机器并提取文件：

```
tar xpvzf file.tar 
```

# visual-studio-2010 - Visual Studio 安装程序的永久属性的注册表路径是什么？

> ID：10878402
> 
> 赞同：0
> 
> 时间：2012-06-04T08:31:14.010
> 
> 标签：visual-studio-2010, registry, windows-installer

我测试了 Visual Studio 安装程序的永久属性，但现在我无法再将其关闭。尽管我已将 Permanent 设置回 false，但安装程序不会再删除特定文件。我读过这是设计使然，但确定应该有一个我可以更改的注册表路径？或者我应该运行注册表清理程序以使我的机器恢复到原始状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:09:46.377

请参阅[此](http://social.msdn.microsoft.com/Forums/en/winformssetup/thread/90e66536-7f7e-4d12-ad1e-514ad7ea4159)MSDN 论坛主题以了解您的问题和一些建议的解决方案。

# mysql - mysql更新语句路径链接调整

> ID：10878406
> 
> 赞同：-1
> 
> 时间：2012-06-04T08:31:26.367
> 
> 标签：mysql

我得到了表微笑需要更新微笑路径（大规模更新）即时使用这个

```
 UPDATE `smilie` SET `smiliepath` = 'http://newpathhere.com/smilies/smile.gif' WHERE `smilieid` =1; 
```

我有问题，需要对所有路径进行大规模更新，我相信我可以使用 wheresmileid > 1 不太确定旧路径中的第二个问题，它看起来像[http://oldpath.com/icons/smile.gif](http://oldpath.com/icons/smile.gif) 所以我需要替换只有“ [http://oldpath.com/icons](http://oldpath.com/icons) ”并保留结束文件的任何线索！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:53:56.240

您可以使用 mysql REPLACE 函数来执行此操作：

```
UPDATE `smilie` SET `smiliepath` = REPLACE(smiliepath,' http://oldpath.com/icons/','http://newpathhere.com/smilies/') WHERE `smilieid` >1; 
```

# php - PHP，OOP，创建对象

> ID：10878407
> 
> 赞同：0
> 
> 时间：2012-06-04T08:31:30.897
> 
> 标签：php, oop

我正在学习PHP，OOP，我学到了很多东西，但是有一些小事逗我，

我创建了一个图像来说明对象创建：[链接](http://img822.imageshack.us/img822/4706/objectcreation.png)

如果有人可以回答几个问题，请...

*   如果我对图像做错了什么，如果有人能纠正我，我会很高兴。
*   当我尝试**回**显一个对象时，我收到一个错误，指出该对象（我知道该对象是内存引用）不能转换为字符串，如果它不是内存位置名称的字符串（例如：'F70' ）我可以举个例子来说明内存位置的样子。
*   关于包含引用的变量，我知道这是与所有其余全局变量一起放置的常规变量，我的意思是，如果我创建新对象和新变量，则第一个对象（变量）包含引用，但它是一个常规的全局变量，其他变量也是如此：

第一步：我定义对象变量...

第二步：创建的对象及其内存位置进入我们想要的变量中......

第三步：使用我们的引用创建新的全局变量。

当我调用对象（变量）时，这意味着什么：

第一步：我们将转到创建变量的内存位置...

第二步：变量值（引用）将我们指向对象所在的内存位置......

第三步：我们可以访问该对象的方法和属性。

如果有人能帮助我理解这些事情，我会很高兴，谢谢大家，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T08:54:00.493

PHP 不返回内存引用，而是返回您的类的实例。通常，您不知道对象是在内存中的哪个位置创建和存储的。如果您仍然需要在 PHP 中使用内存位置和引用，那么 Stack Overflow 上已经有一个很好的答案：[How check memory location of variable in php?](https://stackoverflow.com/questions/5153528/how-check-memory-location-of-variable-in-php) . 关于 PHP 中 OOP 的使用，您应该查看 php.net 上的[类和对象](http://www.php.net/manual/en/language.oop5.php)手册。

关于回显对象：如果要回显对象，则需要定义一个`__toString()` [魔术方法](http://www.php.net/manual/en/language.oop5.magic.php#object.tostring)，该方法指定对象应如何表示为字符串。在你的情况下，这将是

```
<?php
class x {
    public function num() {
         return 5;
    }
    public function __toString() {
         return $this->num();
    }

}
$ob = new x();
echo $ob; // outputs 5 
```

在 PHP 中，`$ob`不是对内存位置的引用，而是类的实例。所以你也可以`echo $ob->num();`在不定义`__toString()`方法的情况下调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T08:57:57.273

我不是 PHP 程序员，但也许我可以帮助你至少一点，以减少你的困惑。

同样，我不确定 php（因为它是解释型语言）实际上是如何处理对象创建的，但它应该非常接近 C++ 的处理方式。归根结底，在同一个硬件上运行。

因此，您知道您的类是编译器（解释器）的“模板”。但是您需要了解对象实际上是什么。对象实际上就像一张信息表。它包含你的类的变量。它不包含方法。

因此，当您使用`new`运算符创建对象时，此“表”会在内存中创建并填充值。这个表有它的基地址。那被分配给对象变量。

这里重要的是，对象不包含实际方法。这些是在内存的其他地方创建的。当您调用某个对象方法时，您实际上调用了“常规”函数，并且编译器将对象的（该表的）地址作为其参数之一传递给它。

这是非常简化的。但我认为它应该可以帮助您了解计算机在后台实际执行的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T08:42:26.463

1.  要获得对象的字符串表示，您必须实现函数[`__toString()`](http://www.php.net/manual/en/language.oop5.magic.php#object.tostring)

2.  关于内部机制——它比你想象的要复杂得多。由于 PHP 是一种动态语言 - 它必须为每个类、每个类对象保留大量信息。不仅字符串变量需要内存，还需要函数映射、内存管理结构、类型结构、默认值。如果您想更深入，[请阅读此内容](https://wiki.php.net/internals/engine/objects)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T08:43:12.927

所有 PHP 变量都存储为“zval”。

有关 zval 的更多信息：http: [//docstore.mik.ua/orelly/webprog/php/ch14_06.htm](http://docstore.mik.ua/orelly/webprog/php/ch14_06.htm)

转储 zval 内部信息的函数：http: [//php.net/manual/en/function.debug-zval-dump.php](http://php.net/manual/en/function.debug-zval-dump.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T08:44:35.807

当您尝试回显您的对象时，您必须在您的类中覆盖 __toString() 魔术函数。我真的建议你阅读这篇文章[http://net.tutsplus.com/tutorials/php/object-oriented-php-for-beginners/](http://net.tutsplus.com/tutorials/php/object-oriented-php-for-beginners/)。它几乎回答了你的问题。

# wordpress - 最新版本的插件和常见问题解答

> ID：10878408
> 
> 赞同：0
> 
> 时间：2012-06-04T08:31:34.373
> 
> 标签：wordpress, plugins

我正在为 wordpress 开发一个新插件。我会把它放在自己的网站上，它是用wordpress开发的，所以其他人可以下载和使用它。

我想提供修订工具，例如更新版本的插件以及现场可用的旧版本和常见问题解答等。是否有任何插件可以控制这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:22:11.310

WordPress 只是真正开发用于管理帖子的修订，而不是软件（据我所知），但[GitHub](https://github.com/)非常酷，你绝对应该研究一下。你可以用它来帮助你发展，也可以让其他人帮忙。它使您的工作公开可用，而您无需购买任何托管或担心为其设置站点。

git 有一点学习曲线，但是一旦你掌握了它的窍门，你会庆幸你开始使用它。

澄清一下，git 是一个版本控制系统。GitHub 是一个你可以保存 git 存储库的地方，它让你的生活变得超级轻松。

**这里有一些研究链接给你...**

[https://github.com/](https://github.com/)

[http://git-scm.com/](http://git-scm.com/)

* * *

如果您愿意，您仍然可以创建该 Wordpress 网站，但将您的提交或标签（不太确定后者）与提要相关联，因此每当 GitHub 上出现新标签时，它会自动被您的网站拾取.

无论如何，只是一些值得深思的食物：）......

祝你好运！

# android - 新的外出通话动作

> ID：10878409
> 
> 赞同：5
> 
> 时间：2012-06-04T08:31:39.663
> 
> 标签：android

在我的应用程序中，我应用了新的拨出电话接收器。它工作正常。每当有新的拨出电话时，我都会收到。

但是现在，在我的设备中有两个拨号应用程序。第一个是默认拨号器，第二个是我自己的拨号器（使用 Call_Privilage）。

我的问题是：当我当时在我的接收器中收到新拨号广播时，我怎么知道是从哪个拨号应用程序拨打的。从默认拨号器还是我自己的拨号器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T05:33:31.887

我还没有实现这个并测试过，但我认为这对你有用。

*在您自己的拨号器活动*中，每当您拨打电话的意图时，您应该再传递`putExtra`一个`callIntent`

例如：`callIntent.putExtra("fromMyDialer",1);`

现在在您的 Receiver 文件中，您将使用下面这样的一种方法，您只需要检查我们上面传递的额外内容。

```
@Override
public void onReceive(final Context context, final Intent intent) {
    if(intent.getIntExtra("fromMyDialer",0)==1)
      // from my own dialer activity
    else
        // from default dialor of phone

} 
```

# java - JSF 1.2 和 Rich Faces 中的 Ajax 和 Request Scoped bean

> ID：10878417
> 
> 赞同：0
> 
> 时间：2012-06-04T08:32:33.143
> 
> 标签：java, ajax, jsf, jakarta-ee, richfaces

我正在使用 JSF 1.2 和 RichFaces 3.3，我有一个名为 NewsItemDetails 的页面，其结构如下

```
<h:form>
  <h:panelBar>
    <h:panelBarItem>
      <myTag:searchModule />
    </h:panelBarItem>
  </h:panelBar>
</h:form> 
```

并且该页面的支持 bean 属于请求范围，这里是 faces-config.xml 的片段：

```
<managed-bean>
  <managed-bean-name>newsItemDetails</managed-bean-name>
  <managed-bean-class>class.location...</managed-bean-class>
  <managed-bean-scope>request</managed-bean-scope>
  <managed-property>
     <property-name>id</property-name>
     <value>#{param['id']}</value>
  </managed-property>
</managed-bean> 
```

为了完整，这里是 searchModule 标记的片段：

```
<ui:composition>
   <rich:tabPanel>
     <rich:tab label="Images">
       <h:panelGrid columns="2">
         <h:inputText value="#{newsItemDetails.searchLabel}" />
         <a4j:commandButton value="Search" actionListener="#{newsItemDetails.onSearch}" reRender="mediaItemsSearchResults, imagesDataTable" />
       </h:panelGrid>

       <a4j:outputPanel id="mediaItemsSearchResults" ajaxRendered="true">
         <rich:dataTable id="imagesDataTable" value="#{newsItemDetails.searchResults}" var="image">
           <h:column>
             <h:outputText value="#{image.title}"/>
           </h:column>
         </rich:dataTable>
       </a4j:outputPanel>

     </rich:tab>
   </rich:tabPanel>
</ui:composition> 
```

现在的问题是，每当我点击搜索按钮时，都不会调用动作监听器，但我可以看到通过 Firebug 发送到服务器的请求。如果我在 rich:panelBarItem 之外调用相同的 searchModule 标记，这就是奇怪的事情，我点击了调用动作侦听器的搜索按钮，但是 dataTable 没有重新渲染，它只在我第一次点击时被调用按钮。

因此，如果有人知道为什么会发生这种情况，我将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:36:19.147

我已经找到了答案，显然支持 bean 的范围必须设置为会话范围而不是请求。完成后，一切都很好。所以 faces-config.xml 中的条目是：

```
<managed-bean>
  <managed-bean-name>newsItemDetails</managed-bean-name>
  <managed-bean-class>class.location...</managed-bean-class>
  <managed-bean-scope>session</managed-bean-scope>
</managed-bean> 
```

正如您所看到的，我必须删除该条目，而是从支持 bean 中的请求对象中获取它。

谢谢大家。

# java - Java抓取字符集问题

> ID：10878424
> 
> 赞同：0
> 
> 时间：2012-06-04T08:33:02.507
> 
> 标签：java, eclipse, ubuntu, character-encoding, wikipedia

我正在用**Java**抓取 Wikipedia 页面，以便提取信息框中包含的信息。

一切正常，除了字符编码。维基百科页面使用“UTF-8”编码。

**Ubuntu** eclipse 控制台也使用“ UTF-8”作为默认编码。但是，Eclipse 控制台在显示抓取的信息时会显示一些奇怪的符号。（例如：`Smith Â· Ricardo`代替`Smith · Ricardo`）

这是我用来读取数据的函数（它遍历一个节点的所有后代并在最后加入它们的文本信息）：

```
private String getTextContent(Node node) {
    String text = "";
    List<Node> children = null;     

    if (isTextNode(node)) {
        return node.getNodeValue();
    }
    else if (!node.hasChildNodes()) {
        return "";
    }
    else {
        children = toList(node.getChildNodes());
        for (Node childNode : children) {
            text += getTextContent(childNode);
        }
    }
    return text;
} 
```

我忘了提到我正在使用**JTidy**库进行抓取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:02:21.123

控制台可能正确解释 UTF-8，但如果您在通过网络读取数据时编码错误，那么您将遇到问题。

指定 UTF-8 作为 JTidy 使用的编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:39:18.363

转到 Eclipse 项目右键单击 > 运行配置 > 通用选项卡并检查 UTF-8 那边。

# iis - URL 重写部署到生产服务器

> ID：10878429
> 
> 赞同：0
> 
> 时间：2012-06-04T08:33:26.977
> 
> 标签：iis, deployment, synchronization, production, url-rewrite-module

我已经在本地计算机iis上完成了url动态重写模块，一切正常，但我现在必须将它部署到生产服务器，这会导致错误。你知道如何避免它们吗？如果您以前做过类似的事情...在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:38:21.137

我在测试 vm 环境中进行我的工作，然后在下班时间对生产站点进行编辑，以避免在保存规则时重新启动 IIS。

如果您想将它们整体上移，我曾想过对 machine.config 文件进行编辑，但在与我们的 IT 小组讨论后发现这不是一个可行的解决方案。编辑 Web 服务器上的规则，然后在添加后对其进行测试是我到目前为止所遵循的课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:37:25.253

您可以在虚拟机中创建生产服务器的副本，并尝试在那里部署您的重写规则。 [VirtualBox](https://www.virtualbox.org/)是一个创建 VM 的简单引擎。

# javascript - 视频 JS 就绪事件和 IE8

> ID：10878430
> 
> 赞同：4
> 
> 时间：2012-06-04T08:33:27.920
> 
> 标签：javascript, html, internet-explorer-8, html5-video, dom-events

我目前正在使用 Video JS 来提供视频文件，并且视频源会根据访问者单击的项目而变化。当我的页面加载时，我运行以下代码将 videoplayer 对象绑定到一个变量。

```
var videoPlayer = _V_("my_video_1"); 
```

这在除 IE7 和 IE8 之外的所有浏览器中都能完美运行。我一直在调试我的代码，它似乎被卡在了从不触发的 ready 事件上。虽然它不会在控制台中留下任何错误。但是 ready 函数中的任何警报或操作都会被忽略，而实际上正是在那个时候源被修改了。这是我用来更改源的代码：

```
videoPlayer.ready(function(){
    var myPlayer = this;
    myPlayer.src([
        { type: "video/mp4", src: videoFile + ".mp4" },
        { type: "video/ogg", src: videoFile + ".ogv" }
    ]);
    myPlayer.play();
    myPlayer.volume(0.2);
    $('div#videoViewer').show();
}); 
```

我一直在其他两个页面上使用相同的代码，并且没有任何问题让它工作。现在我和一位同事已经调试了好几个小时，但离解决方案还差得远。

这里有没有人有任何想法可能导致准备好的事件被忽略？我一直在尝试禁用所有其他脚本以找到问题的根源，但它一直没有工作。

我非常感谢任何可以帮助我解决此问题的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T21:48:38.710

我有同样的问题。在我的例子中，ready 事件不会在 IE8 中触发，因为我有一个设置为`display:none`. 如果包装器可见，就绪事件将按预期触发。这个问题在 IE9 中没有出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-04T12:49:49.160

我有同样的问题，我的解决方案是直接将 DOM 元素而不是 id 传递给 videojs 函数。

```
//having this
<video id="VIDEO" ....>

//this fails
videojs('VIDEO').ready(...)

// this works!!
videojs(document.getElementById('VIDEO')).ready(...) 
```

希望它有所帮助：D

# jquery - iScroll 的自动完成问题

> ID：10878433
> 
> 赞同：0
> 
> 时间：2012-06-04T08:33:36.303
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-mobile

我在我的 jQUeryMobile 应用程序上使用 jQuery Autocomplete。它工作完美。现在我正在尝试使用 iScroll.js 滚动查找项目列表。这就是我正在做的，

[http://jsfiddle.net/uXbKY/39/](http://jsfiddle.net/uXbKY/39/)

问题是，iscroll 仅适用于建议框的第一项，因为我无法滚动整个列表。如果我的代码中缺少任何内容，请帮助我。请帮助我使用斯科尔。

我发现了另一种方法，我们可以将基于自定义触摸的滚动条用于自动完成框 [http://jsfiddle.net/uXbKY/2/](http://jsfiddle.net/uXbKY/2/) 但有一个问题，自定义滚动条仅在第一次搜索时出现，并且从建议框中消失当列表刷新时，如果我们可以解决这个问题，请建议我，因为这两个选项都适合我在 ipad 和 android 中使用我的自动完成功能。

或者如果有人认为有比使用 iScroll 和 jScrollPane 更好的方法来做到这一点，那么欢迎您，我愿意接受建议。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:08:30.473

我注意到的一件事是：iScroll 必须应用于滚动区域的**包装**。

您似乎直接在具有 id 滚动的 UL 上执行此操作

我的猜测是你必须在 UL 周围放置一个包装器并给它 id 包装器

我做了一个演示[jsFiddle](http://jsfiddle.net/Fluffy/rB8t3/)：

如果您键入 1 个字母，这将让您滚动浏览找到的包含该字母的所有单词。

# android - INSTALL_FAILED_INSUFFICIENT_STORAGE

> ID：10878436
> 
> 赞同：1
> 
> 时间：2012-06-04T08:34:14.120
> 
> 标签：android, emulation

我收到以下错误

```
[2012-06-04 13:23:35 - Newton_Laws] Installation error: INSTALL_FAILED_INSUFFICIENT_STORAGE
[2012-06-04 13:23:35 - Newton_Laws] Please check logcat output for more details.
[2012-06-04 13:23:35 - Newton_Laws] Launch canceled! 
```

所以我正在更改模拟器的分区大小，但它给我带来了错误......请检查命令提示符的屏幕截图......![在此处输入图像描述](../Images/b08391ed145043efc07342d433027b82.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:38:55.377

正确的命令应该是`emulator -avd myAvdName -partition-size 500`（`-avd`而不是`avd`）。请注意，分区大小以兆字节为单位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T08:39:29.403

您将错误的参数传递给**模拟器**命令（应该是 - *avd*而不仅仅是*avd*。请查看官方文档：http:
[//developer.android.com/guide/developing/tools/emulator.html](http://developer.android.com/guide/developing/tools/emulator.html)

另请查看以下帖子以获取如何运行模拟器的详细说明：
[https ://stackoverflow.com/a/4974695/200272](https://stackoverflow.com/a/4974695/200272)

亲切的问候，
博

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T08:39:55.573

我只在 Linux 上使用过它，而不是 Windows，但我认为它仍然应该是：

```
emulator -avd "A" -partition-size 500 
```

（您忘记了 avd 之前的连字符。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T09:06:33.570

如果您安装了更多的应用程序，那么如果电话更多，那么您将收到此错误。卸载一些应用程序，然后你可以安装其他应用程序。同样的规则适用于模拟器和设备

# c# - EF急切加载和延迟加载的区别？

> ID：10878439
> 
> 赞同：1
> 
> 时间：2012-06-04T08:34:25.173
> 
> 标签：c#, .net, entity-framework-4

我是 EF 的新手，已经阅读了一些文章。阅读后，我对延迟加载和急切加载之间的区别感到困惑？

*   可以编译这两种类型的查询吗？
*   两种类型的查询都可以返回`IQuerable`和`IEnumerable`？
*   两种类型的查询都可以有 Linq to Entities 查询语法（select、from、where）和 lambda 表达式吗？

请指导和帮助我。

非常感谢您的时间和指导

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T08:38:01.120

**关于延迟**加载和**急切**加载的区别：

假设您有一个`Customer`具有属性的对象`List<Invoice> Invoices`（位于不同的表中并由实体框架自动连接）。

当`lazy`您的客户对象被实例化时，加载发票不会立即被提取，但只有当您需要它/明确地访问它时。

加载后，`eager`您的发票将立即被提取并构造/填充到对象上（如果您构建大量客户列表但并不真正需要所有发票都可以在对象上随时可用，则会引入一些不必要的性能开销）。

您会[在此处](http://msdn.microsoft.com/en-us/library/bb896272.aspx)找到一些文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T08:48:16.863

> 可以编译这两种类型的查询吗？

只有急切加载可以是手动预编译查询的一部分。延迟加载查询由 EF 自动创建，如果它实际预编译它，则它是 EF 内部行为。

> 两种类型的查询都可以返回 IQuerable 和 IEnumerable 吗？

在急切加载中，您可以控制查询是否返回`IQueryable`或`IEnumerable`. 延迟加载查询超出您的控制范围，您无法修改它。如果要`IQueryable`用于延迟加载的导航属性，则必须使用称为显式加载的第三个选项，您可以在其中获取`IQueryable`给定导航属性的查询，并且可以对其进行修改。

> 两种类型的查询都可以有 Linq 到实体查询语法（选择、从、哪里）和 lambda 表达式吗？

不，这些查询都没有选择、来自、在哪里。延迟加载超出了您的控制范围，并且急切加载不允许过滤 - 在这两种情况下，您总是会加载所有相关对象。

显式查询示例（您可以使用查询的唯一加载类型）：

```
var query = ((EntityCollection<MyEntity>)parent.Children).CreateSourceQuery()
                                                         .Where(...); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T08:38:44.730

延迟加载只是在实际需要的时候加载相关的对象，而急切加载则相反。策略的选择可能会对性能产生很大影响，例如，当您实际上不需要时加载大数据集。

# web-applications - 如何在上下文 xml 文件中设置上下文参数？

> ID：10878449
> 
> 赞同：1
> 
> 时间：2012-06-04T08:35:14.793
> 
> 标签：web-applications, jetty

我有一个依赖于上下文或初始化参数的 Web 应用程序，我在 Jetty 中运行它。

我发现了如何在 WEB-INF/web.xml 文件中设置这些：

```
<context-param>
    <param-name>myParamName</param-name>
    <param-value>42</param-value>
</context-param> 
```

一旦我将我的 web 应用程序打包到一个 .war 文件中，我就无法再更改这些，所以我必须以某种方式在 servlet 上下文 xml 文件中设置参数。

我从 eclipse.jetty Wiki 中发现的是：

```
<Set name="initParameter">
    <Arg>myParamName</Arg>
    <Arg>42</Arg>
</Set> 
```

`java.lang.NoSuchMethodException`但是当我尝试这个时，Jetty 会抛出一个。在 Jetty 中设置上下文参数的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T09:23:17.120

您可以尝试这样做：

```
<Call name="setInitParameter">
    <Arg>myParamName</Arg>
    <Arg>42</Arg>
</Call> 
```

# ruby-on-rails - Rails 路由在失败时继续

> ID：10878450
> 
> 赞同：0
> 
> 时间：2012-06-04T08:35:17.513
> 
> 标签：ruby-on-rails, routing

我正在尝试查看当路由不匹配以继续沿 routes.rb 而不使用约束时，rails 路由中是否有办法从控制器“返回”。

我的目标是使这些路线不受限制地工作：

```
match ":postname" => "post#show"
match ":pagename" => "page#show" 
```

为了争论，帖子和页面有不同的控制器。是否有可能：

*   如果 post 控制器没有要检索的帖子，优雅地失败，然后继续路由到页面控制器？

我问这个是因为使用 :constraints => Post.new 将使用数据库查询进行检查。这会运行 2 个 DB 查询来获取数据：一次是查看是否存在有效路由，第二次是我们去检索控制器中的数据。

谢谢，贾斯汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:09:21.077

我最终使用[Rails Caching](http://guides.rubyonrails.org/caching_with_rails.html)作为一个“全局”变量，在控制器中将它读回，所以我不会双重访问数据库。

# c - 如何在普通 C 中继承结构

> ID：10878452
> 
> 赞同：3
> 
> 时间：2012-06-04T08:35:33.067
> 
> 标签：c, inheritance, data-structures

我在一个普通的 C （嵌入式项目，很少的内存）中工作，我有一个结构

```
typedef struct 
{
   int x;
   int y;
   int z;
   float angle;
   float angle1;
   float angle2;
} Kind1; 
```

有些情况下我需要所有字段，有些情况下我只需要 x、y 和角度。

在 C++ 中，我将创建一个具有这 3 个字段的基类，从它继承另一个具有额外 3 个字段的类，并根据需要实例化一个或另一个。如何在纯 C 中模拟这种行为？

我知道我可以做出类似的东西

```
typedef struct 
{
   int x;
   int y;
   float angle;
} Kind1;

typedef struct
{ 
   Kind1 basedata;
   int z;
   float angle2;
   float angle3;
}  Kind2; 
```

但随后我无法将指针传递给 Kind2 ，其中请求了指向 Kind1 的指针。

我知道可以对指针进行类型转换和偏移，我只是想知道是否有更好、更安全的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T08:40:18.540

> 我知道可以对指针进行类型转换和偏移

不必要：

```
void foo(Kind1*);
struct Kind2
{ 
   Kind1 basedata;
   int z;
   float angle2;
   float angle3;
}

//...
Kind2 k;
foo(&(k.basedata)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-16T18:45:48.787

下面的示例假定这些定义。

```
struct base { char c; } *a_base;
struct sub  { struct base b; int i; } *a_sub; 
```

* * *

您的“示例”实际上是（最简单的）正确解决方案。

> 但随后我无法将指针传递给 Kind2 ，其中请求了指向 Kind1 的指针。

是的你可以。以下来自 C11 标准，但以前的修订版具有相同的保证[需要引用]。

> # n1570 6.7.1.1.15
> 
> ...指向结构对象的指针，经过适当转换，指向其初始成员（或者如果该成员是位域，则指向它所在的单元），反之亦然。结构对象中可能有未命名的填充，但不是在其开头。

因此`(struct base*)a_sub == &a_sub->b`和`((struct base*)a_sub)->c == a_sub->b.c`

因此，只要您的“超结构”是“子结构”的第一个成员，您就可以**在通过引用访问时**将一个视为另一个。基本上不要这样做。

```
void copy(struct base *from, struct base *to)
{
    *to = *from; // Oops, you just lost half your object.
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T08:38:40.633

你可以像在 C++ 中那样做：

```
struct Kind1
{
   int x;
   int y;
   float angle;
}

struct Kind2
{ 
   int z;
   float angle2;
   float angle3;
}

struct Kind
{
    Kind1 k1;
    Kind2 k2;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-04T08:42:49.463

在纯 C 语言中是不可能的，该语言没有这样的特性。但是，您可以使用预处理器宏来简化类型转换和偏移。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T09:42:53.240

One way that I can think of which will save not more than 2*sizeof(float) bytes.

```
struct Kind2
{ 
   int z;
   float angle2;
   float angle3;
}

struct Kind1
{
   int x;
   int y;
   float angle;
   struct Kind2 *k2;
} 
```

here the whole saving will be based on how much memory the pointer eats.

Init the pointer only if it is needed.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-04T09:23:48.500

在内存有限的情况下，通过声明两个不同的结构来保持理智：

```
struct Kind1
{
   int x;
   int y;
   float angle;
}

struct Kind2
{ 
   int x;
   int y;
   int z;
   float angle;
   float angle2;
   float angle3;
} 
```

我曾经不得不编写使用联合和预处理器`#define`的代码，以使代码*看起来*更具可读性。然而，这很快就会导致疯狂。如果这两个结构实际上是作为子类处理的，那么重新排列字段是最不邪恶的：

```
struct Kind1
{
   int x;
   int y;
   float angle;
}

struct Kind2
{ 
   int x;
   int y;
   float angle;
   // extended data:
   int z;
   float angle2;
   float angle3;
} 
```

只要它们与铸造一起小心使用。但是，如果出现任何问题，确实应该进行调试版本名称检查以证明一切都正确完成。

```
struct Kind1
{
   char variant[6];  // initialized to "kind1" 
   int x;
   int y;
   float angle;
}

struct Kind2
{ 
   char variant[6];  // initialized to "kind2" 
   int x;
   int y;
   float angle;
   // extended data:
   int z;
   float angle2;
   float angle3;
}

function_expecting_kind2 (struct kind2 *p)
{
     if (strcmp (p->variant, "kind2"))
           error ("function expecting kind2 got '%s' instead", p->variant);
     ...
} 
```

# c++ - 如何为模板类调用非默认构造函数？

> ID：10878456
> 
> 赞同：0
> 
> 时间：2012-06-04T08:35:57.703
> 
> 标签：c++, templates, constructor

我有以下代码结构（`Resource`并且`Parameter`是空类）：

求解器.cpp

```
#include "Solver.h"
#include "ValueFunction.h"

using namespace std;

template<typename T>
Solver<T>::Solver(vector<vector<Resource> >& resources, const Parameter& params) : 
    states(resources.size()) {
    for (int i=0; i<resources.size(); i++) {
        states[i] = State<T>(resources[i], params);
    }
}

// Explicit class declaration
template class Solver<ValueFunction>; 
```

求解器.h

```
#ifndef SOLVER_H_
#define SOLVER_H_

#include <vector>
#include "Resource.h"
#include "Parameter.h"
#include "State.h"

template<typename T>
class Solver {
    public:
        Solver(
            std::vector<std::vector<Resource> >& resources,
            const Parameter& params
        );
    private:
        std::vector<State<T> > states;
};

#endif /* SOLVER_H_ */ 
```

状态.cpp

```
#include "State.h"
#include "ValueFunction.h"

using namespace std;

template<typename T>
State<T>::State(vector<Resource>& _resources, const Parameter& params) : 
resources(_resources), valfuncs(_resources.size(), T(params)) {
}

template class State<ValueFunction>; 
```

状态.h

```
#ifndef STATE_H_
#define STATE_H_

#include <vector>
#include "Parameter.h"
#include "Resource.h"

template<typename T>
class State {
public:
    State() {};
    State(std::vector<Resource>& _resources, const Parameter& params);
    ~State() {};
private:
    std::vector<Resource> resources;
    std::vector<T> valfuncs;
};

#endif /* STATE_H_ */ 
```

值函数.cpp

```
#include "ValueFunction.h"

ValueFunction::ValueFunction(const Parameter& _params) : params(_params) {
} 
```

值函数.h

```
#ifndef VALUEFUNCTION_H_
#define VALUEFUNCTION_H_

#include "Parameter.h"

class ValueFunction {
public:
    ValueFunction(const Parameter& _params);
private:
    const Parameter& params;
};

#endif /* VALUEFUNCTION_H_ */ 
```

通过以下调用：

```
#include "Solver.h"
#include "State.h"
#include "ValueFunction.h"
#include "Parameter.h"

using namespace std;

int main(int argc, char *argv[]) {
Parameter params;
    vector<vector<Resource> > resources(4);
    Solver<ValueFunction> sol(resources, params);
    return 0;
} 
```

我收到以下错误：

```
Solver.cpp:18:16:   instantiated from here
ValueFunction.h:6:21: error: non-static reference member ‘const Parameter& ValueFunction::params’, can't use default assignment operator 
```

如何`ValueFunction`正确调用非默认构造函数，或者是否有其他方法可以`std::vector`使用非默认构造函数初始化（传递常量引用）？

**更新**

该错误在这篇[文章](https://stackoverflow.com/questions/634662/non-static-const-member-cant-use-default-assignment-operator)中进行了解释。但是我的问题的解决方法并不完全清楚。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T08:54:20.143

您正在使用调用向量成员的默认构造函数的构造函数的形式`states`进行初始化。`Solver`您可以将第二个参数传递给`states`type的向量构造函数`State<T>`，向量将使用复制构造函数以该参数作为源来初始化向量元素。您在构造函数中的循环`Solver`仍然可以在状态向量中提供您实际需要的值。

编译器生成的默认构造函数无法初始化引用。这是因为初始化对象是默认构造函数的工作，但是引用需要引用一些东西。正如您在声明没有初始化程序的引用变量时遇到错误一样，默认构造函数也会遇到同样的问题。

```
int &r;      // this is an error
int i;
int &rr = i; // this is proper 
```

使用向量构造函数的复制构造函数版本可以帮助您避免该问题，因为复制构造函数使用它正在复制的对象的值来初始化引用。在这种初始化向量的形式中，每个元素都`states`被设置为与第一个元素相同的值。

```
...
    : states(resources.size(), State<T>(resources[0], params))
... 
```

也许更好的方法是使用向量本身的默认构造函数，并使用`reserve`并向`push_back`向量添加元素。这更好，因为它完全避免创建任何`State<T>`对象，直到它实际添加到向量中。

```
...
    : states()
...
    states.reserve(resources.size());
    for (int i...) {
        states.push_back(State<T>(resources[i], params));
    }
... 
```

第三种方法可以让您的原始代码按照其编写的方式工作，即定义您自己的默认构造函数，用于`ValueFunction`将`params`成员初始化为某些东西（也许是可怕的全局）。

```
class ValueFunction {
public:
    ValueFunction (); // define our own default constructor
    ...
};

const Parameter global_default_parameter;

ValueFunction::ValueFunction () : params(default_parameter) {} 
```

# android - android中Textview上的String和Int数组未显示数据

> ID：10878460
> 
> 赞同：0
> 
> 时间：2012-06-04T08:36:14.050
> 
> 标签：android, arrays, sqlite

我正在将数据库中的两列数据提取`String Array`到`Int Array`. 我尝试在文本视图上显示数据。但它没有显示并给出一些错误。数据进入数组但未显示。

我的代码如下

```
 try
        {
            mydatabase=this.openOrCreateDatabase("testdata", MODE_PRIVATE, null);

            Cursor c=mydatabase.rawQuery("SELECT DISTINCT name,MAX(user_score) AS max_score  FROM "+TableName+" WHERE user_score IS NOT NULL GROUP BY name  ORDER BY max_score DESC LIMIT 3" , null);
            int column1=c.getColumnIndex("name");
            int column2=c.getColumnIndex("max_score");
            c.moveToFirst();
            if(c!=null)
            {   int i=0;
                do
                //for(int i=0;c.moveToNext();i++)
                {
                    String Name=c.getString(column1);
                    int Score=c.getInt(column2);
                    Data[i]=Name;
                    Data1[i]=Score;
                    /*Data[1]=Name;
                    Data1[1]=Score;*/

                    System.out.println("i:"+i+"Data[i]:"+Data[i]+"Data1[i]:"+Data1[i]);

                    System.out.println("name"+Name+" score"+Score);
                    i++;
                }while(c.moveToNext());
                TextView tv=(TextView)findViewById(R.id.tv);
                TextView points=(TextView)findViewById(R.id.points);
                TextView tv1=(TextView)findViewById(R.id.tv1);
                TextView points1=(TextView)findViewById(R.id.points1);
                tv.setText(Data[0]);
                points.setText(Data1[0]);
                tv1.setText(Data[1]);
                points1.setText(Data1[1]);
                setContentView(main);
} 
```

我的 Logcat 是：

```
 06-04 13:40:35.761: E/ERROR(1347): android.content.res.Resources$NotFoundException: String resource ID #0x9a
06-04 13:40:35.761: E/ERROR(1347):  at android.content.res.Resources.getText(Resources.java:201)
06-04 13:40:35.761: E/ERROR(1347):  at android.widget.TextView.setText(TextView.java:2817)
06-04 13:40:35.761: E/ERROR(1347):  at com.k_trivia_cricket.com.high_score.onCreate(high_score.java:76)
06-04 13:40:35.761: E/ERROR(1347):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-04 13:40:35.761: E/ERROR(1347):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
06-04 13:40:35.761: E/ERROR(1347):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-04 13:40:35.761: E/ERROR(1347):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-04 13:40:35.761: E/ERROR(1347):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-04 13:40:35.761: E/ERROR(1347):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-04 13:40:35.761: E/ERROR(1347):  at android.os.Looper.loop(Looper.java:123)
06-04 13:40:35.761: E/ERROR(1347):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-04 13:40:35.761: E/ERROR(1347):  at java.lang.reflect.Method.invokeNative(Native Method)
06-04 13:40:35.761: E/ERROR(1347):  at java.lang.reflect.Method.invoke(Method.java:521)
06-04 13:40:35.761: E/ERROR(1347):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-04 13:40:35.761: E/ERROR(1347):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-04 13:40:35.761: E/ERROR(1347):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:47:49.110

原因：

您正在传递 int，因为此函数被称为[http://developer.android.com/reference/android/widget/TextView.html#setText(int)](http://developer.android.com/reference/android/widget/TextView.html#setText%28int%29)

你需要传递字符串所以显示... [http://developer.android.com/reference/android/widget/TextView.html#setText(java.lang.CharSequence)](http://developer.android.com/reference/android/widget/TextView.html#setText%28java.lang.CharSequence%29)

回答 ：

**正如我在评论 points.setText(Data1[0]+""); 作为字符串而不是 res id 传递...**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T08:45:06.317

根据您的错误日志，

未找到 TextView 资源“android.content.res.Resources$NotFoundException”。要解决它，请检查休闲，1-：您是否在 xml 文件中提到了该 textview 的 id。2-：对于一个以上的资源，可能有相同的 ID。

我希望它对你有充分的帮助。

# java - java jdbc连接-结果集输出问题

> ID：10878462
> 
> 赞同：0
> 
> 时间：2012-06-04T08:36:23.380
> 
> 标签：java, sql, jdbc, resultset

我目前正在尝试实现一个 jdbc 连接，当我“搜索”与“%input%”输入匹配的任何内容时，该连接会返回表中的所有数据。

例如`ResultSet rs4 = stm4.executeQuery("select imageTime from image_data where imageName like '%" + value3 + "%' or imageTime like '%" + value3 + "%' or imageLocation like '" + value3 + "'" );`

我正在尝试将结果集中的所有行作为搜索结果返回。但是，如果我在没有更多行可以访问时命令了Resultset.next，则会导致以下结果集全部为空，....

如果有任何 id 喜欢输出整个结果集的方法，谢谢。

编辑编辑问题：更直接；我需要一种方法来从结果集的每个包含列中的每一行中获取每条数据。所以我可以输出它。这是我在下面的尝试。

rs4 = 如下声明的结果集。

这是我的代码；

```
if(name_time_location == 1)
        {                
            String value3=searchInput.getText();//Sets the search Input as value3

            // selecting the cominbation from table, that match input options                               
            try{
                con = DriverManager.getConnection("jdbc:mysql:blah blah");

                // Query the database for the correct username and passord                    
                Statement stm3 = con.createStatement();  
                Statement stm4 = con.createStatement();
                Statement stm5 = con.createStatement();

                //queries database for password from input username 
                ResultSet rs3 = stm3.executeQuery("select imageName from image_data    where imageName like '%" + value3 + "%' or imageTime like '%" + value3 + "%' or imageLocation like '" + value3 + "'" );
                //ResultSetMetaData rsmd = rs3.getMetaData();
                //stm3.setFetchSize(5);
                //rs3.last();
                //int numberOfRows = rs3.getRow();

                //String[] resultList; 
                //resultList = new String[numberOfRows];
                // Fetch each row from the result set
                rs3.beforeFirst();
                while(rs3.next())
                {
                    imageSearchResult1 = rs3.getString(1); 
                    rs3.next();
                    imageSearchResult11 = rs4.getString(1);
                    rs3.next();
                    imageSearchResult12 = rs4.getString(1);
                    rs3.next();
                    imageSearchResult13 = rs4.getString(1);
                    rs3.next();
                    imageSearchResult14 = rs4.getString(1); 
                }rs3.close();

            }catch (Exception e)
            {
                    //System.out.println("Exception: " + e + "");
            }

            System.out.println("Search Results: \nName: " + imageSearchResult1 + "         Time stamp: " + imageSearchResult2 + "   Location: " + imageSearchResult3 + "\n" +
                    "Name: " + imageSearchResult11 + "   Time stamp: " + imageSearchResult21 + "   Location: " + imageSearchResult31 + "\n" + 
                    "Name: " + imageSearchResult12 + "   Time stamp: " + imageSearchResult22 + "   Location: " + imageSearchResult32 + "\n" +
                    "Name: " + imageSearchResult13 + "   Time stamp: " + imageSearchResult23 + "   Location: " + imageSearchResult33 + "\n" +
                    "Name: " + imageSearchResult14 + "   Time stamp: " + imageSearchResult24 + "   Location: " + imageSearchResult34 + "\n" ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:53:25.637

我认为您可以通过修改查询来实现相同的目的，而不是创建 3 个查询，而是在同一查询中获取 3 个值：

```
select imageName,imageLocation,imageTime from ..... 
```

然后使用此查询生成 ResultSet 并将三个值作为`rs.getType(1),rs.getType(2),rs.getType(3)`.

在同一个`while(rs.next())`循环中，您可以打印您想要打印的数据。

# sql-server-2008 - 在特定时间从行中获取值

> ID：10878469
> 
> 赞同：1
> 
> 时间：2012-06-04T08:37:26.937
> 
> 标签：sql-server-2008

我的数据库中有一行：

```
starttime:4/6/2012 2:00pm, Endtime:31/12/9999, name:"swetha", status:"open"..... 
```

当我更新这一行时，我将开始时间更改为当前时间（`getdate()`）并且没有任何问题。我每天凌晨 1 点运行 Windows 服务来修改行中的值。

我想知道我的行在 2012 年 4 月 6 日晚上 11:59 我的服务运行时的状态。

无需在 2012 年 4 月 6 日晚上 11:59 进行更新，最后一次更新可能在一天中的任何时间，但我的要求是在 2012 年 4 月 6 日晚上 11:59 获取状态值。

我想在 SQL Server 2008 中进行查询。有人可以帮我找到解决方案吗？

# python - tkinter：画布中的 imagetk 图像

> ID：10878471
> 
> 赞同：1
> 
> 时间：2012-06-04T08:37:31.150
> 
> 标签：python, tkinter

我在这里遗漏了一些简单的东西......我正在尝试在画布中插入图像，

```
photoconn = Image.open(giffname)
photoconn = photoconn.resize((w0*self.resize/100,h*self.resize/100), Image.ANTIALIAS)
photoImg = ImageTk.PhotoImage(photoconn)
pc.append(photoImg)
self.cv.create_image(10, 10, anchor=NW, image=photoImg) 
```

我得到了可怕的**_tkinter.TclError: image "pyimage39" doesn't exist**

然而，我将图像记住在全局 pc 数组中，调试器显示变量看起来没问题， photoconn 是 a `<PIL.GifImagePlugin.GifImageFile 0x260fab8; len=28>`， photoImg 是 a `<PIL.ImageTk.PhotoImage 0x260fb48; len=12>`。

......我错过了什么？

# ios - iOS profiler 类似于 android Traceview

> ID：10878474
> 
> 赞同：0
> 
> 时间：2012-06-04T08:37:56.367
> 
> 标签：ios, profiling, instruments, xcode-instruments

我真的很喜欢为 iOS 开发而不是为 Android 开发。
但是，android SDK 有一个很棒的分析工具，称为[Traceview](http://developer.android.com/guide/developing/debugging/debugging-tracing.html)： ![跟踪视图屏幕](../Images/baa9211660b1e0cc68a7fa73eb2c26fe.png)

它不仅可以帮助找到瓶颈，还可以显示每个线程中特定时刻正在运行的方法。这对于分析和调试非常有帮助。例如，如果我的应用程序在某个时刻崩溃了，我可以很容易地看到每个线程崩溃之前发生了什么。

是否有任何适用于 iOS 的工具可以做类似的事情？我在 Instruments 中尝试了 TimeProfiler 和 Sampler，但找不到如何执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:09:11.140

检测崩溃堆栈跟踪：

1.  如果您的设备上有调试版本并且崩溃，这是可能的。将设备连接到 Xcode 并从 Xcode 启动应用程序。一旦它崩溃，Xcode 将向您显示堆栈跟踪。
2.  在任何情况下，iOS 都会编写一份崩溃报告，其中包含所有线程的详细堆栈跟踪。将设备连接到 Xcode 并启动 Organizer 后，它将自动导入所有崩溃报告并对其进行符号化。请注意，您需要在您的 Mac 上存档导致设备崩溃的确切版本和 dSYM。当您使用存档功能时，这会自动完成。如果这是一个调试版本，并且您确实在 Xcode 中为设备而不是模拟器创建了另一个调试版本（无论是否连接了任何设备），那么这些文件将不再可用。符号化将内存帧转换为类、方法和行号。要获取行号，dSYM 是强制性的！
3.  您还可以使用 3rd 方崩溃报告器来检测崩溃，将它们发送到服务器，将它们组合在一起并进行符号化（如果 dSYM 已上传并且服务器能够执行此操作）。这适用于调试、测试版和应用商店构建。此处显示了一些示例：将[自定义数据包含到 iOS 故障转储中](https://stackoverflow.com/questions/8488894/including-custom-data-into-ios-crash-dumps/8511100#8511100)

分析 - 工具 Instruments 提供了许多功能来分析您的应用程序，例如：

*   内存使用情况
*   泄漏
*   CPU使用率
*   僵尸
*   还有很多

您可以在 iOS 开发者文档中找到有关 Instruments 的更多详细信息：[https ://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html#//apple_ref/doc/uid /TP40004652](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004652)

# javascript - 如果它不透明，则为 PNG 文件区域着色

> ID：10878477
> 
> 赞同：3
> 
> 时间：2012-06-04T08:38:11.630
> 
> 标签：javascript, html, canvas

您是否知道任何好的解决方案（也可以基于画布），使开发人员能够在非透明区域（如蒙版）中更改 png 图像的颜色（用十六进制颜色填充）？我需要可以改变颜色（或背景图像）的透明区域，这就是为什么它必须保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:10:49.257

要做你想做的事，你需要使用`getImageData`并`putImageData`查看[mdn 以获得关于像素操作的解释](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Pixel_manipulation_with_canvas)。

这是一些示例代码

```
var canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d"),
    image = document.getElementById("testImage");

canvas.height = canvas.width = 135;
ctx.drawImage(image,0,0);

var imgd = ctx.getImageData(0, 0, 135, 135),
    pix = imgd.data,
    newColor = {r:0,g:100,b:200};

for (var i = 0, n = pix.length; i <n; i += 4) {
    var r = pix[i],
            g = pix[i+1],
            b = pix[i+2];

        if(r == 216 && g == 6 && b == 6){ 
            // Change the red to whatever.
            pix[i] = newColor.r;
            pix[i+1] = newColor.g;
            pix[i+2] = newColor.b;
        }
}

ctx.putImageData(imgd, 0, 0);​ 
```

**[示例演示](http://jsfiddle.net/loktar/BtbSM/)**

使用上面的代码，您可以使用

`if(r == 255 && g == 0 && b == 255)`

然后只需更改`newColor`为替换颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T08:45:00.560

您可以使用`<canvas>`原始像素访问进行像素操作

*   读取像素

*   检查它是否满足条件（不透明，alpha = 0）

*   用纯色替换像素

[https://developer.mozilla.org/En/HTML/Canvas/Pixel_manipulation_with_canvas](https://developer.mozilla.org/En/HTML/Canvas/Pixel_manipulation_with_canvas)的像素操作资源`<canvas>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T15:23:51.730

您可以使用所需颜色填充图像/区域，然后在其上绘制 png。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-19T16:17:57.047

画布 API 具有诸如“仅在原始图像中不透明的像素上绘制”之类的合成方法。这比处理图像数据更快，也避免了原始权限问题。

# **[代码笔](http://codepen.io/adg29/pen/RPRdwP)示例**

您想要的复合操作是`source-in`. 画布仅在红色矩形和透明 PNG 重叠的地方涂成红色。其他一切都变得透明。

HTML：

```
<canvas id="canvas" width="800" height="400"></canvas>

<a href="javascript:paintNontransparent()">paint non-transparent regions red</a><br> 
```

Javascript：

```
var color = '#FF0000';

var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');

var textureURL = 'http://i.imgur.com/LWHZV8v.png';
var textureIMG = new Image();
textureIMG.src = textureURL;

textureIMG.onload = function(){
  canvas.width = textureIMG.width;
  canvas.height = textureIMG.height;        
  ctx.drawImage(textureIMG,0,0);
};

window.paintNontransparent = function() {
  ctx.globalCompositeOperation = "source-in";
  ctx.fillStyle = color;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
} 
```

[MDN 参考](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Compositing)

# php - PHP使用已知属性获取元素

> ID：10878480
> 
> 赞同：0
> 
> 时间：2012-06-04T08:38:39.730
> 
> 标签：php, loops

所以可以说我有：

```
<?php
    $template = '<img src="{image}" editable="all image_all" />';
    $template .= '<div>';
    $template .= '<img src="{image}" editable="yes" />';
    $template .= '</div>';
?> 
```

现在我想让脚本遍历包含 {image} src 的所有元素并检查它们是否有

```
editable="all" 
```

属性。

如果是这样：获取第二个可编辑属性，例如

```
image_all 
```

并将其包含在 src 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:53:33.843

可以使用评论中建议的库[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)来简化此任务：

就这么简单：

```
$images = array(); //an array for your images with {image} in src
$html = "...";
foreach($html->find('img') as $element)
    if($element->src == '{image}') {
        //add to the collection
        $images[] = $element;
    }
    //Also you can compare for the editable attribute same way as above.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:19:10.837

如果您想获得第二个可编辑属性并将其保存在 $src 之类的数组中，请检查以下代码：

```
$content=new DOMDocument();
$content->loadHTML($template);
$elements=simplexml_import_dom($content); 
$images=$elements->xpath('//img');
foreach ($images as $img) {
    if(preg_match('/all /i', $img['editable']))
        $src[]=substr($img['editable'],4) ;
}
print_r($src); 
```

将输出：

```
Array ( [0] => image_all ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:19:29.140

试试这个，

```
 include('simple_html_dom.php');
  $html = str_get_html('<div><img src="{image}" editable="all image_all" /><img src="{image}" editable="yes" /></div>');
  $second_args= array();
  foreach($html->find('img[src="{image}"]') as $element){ 
    $editables = explode(' ',$element->editable); 
    if($editables[0] === "all"){ 
        $second_args[] = $editables[1];
    }
  }
  print_r($second_args); 
```

# asp.net - 如何检查 SMTP 邮箱是否可用

> ID：10878484
> 
> 赞同：2
> 
> 时间：2012-06-04T08:38:46.790
> 
> 标签：asp.net, email, c#-4.0, sendmail

我想检查给定的用户名和密码是否可以使用 SMTP 邮箱。我正在使用该`SmtpClient.Send`方法发送电子邮件，但在发送之前，我想检查提供的凭据是否正确，并检查 SMTP 服务器是否有效。

我怎样才能从 C# 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:06:26.597

我不认为 API 提供了相当于“有效”类型的查询。但是，当您查看[文档](http://msdn.microsoft.com/en-us/library/swas0fwc.aspx)时，它指出`SmtpException`如果发送失败，则会抛出 an ；失败的两个原因包括你在寻找什么

*   无效服务器（即您无法使用 SMTP 协议连接）
*   身份验证失败（即无效的用户名和密码）

因此，处理该异常并检查它是否确实是由于身份验证失败或服务器连接失败应该为您提供所需的内容。

# sencha-touch - 在 Sencha Touch App 中更新博主内容

> ID：10878485
> 
> 赞同：0
> 
> 时间：2012-06-04T08:38:48.603
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有一个煎茶应用程序。我想调用博客文章列表。

现在我可以看到帖子列表了。但是，如果我在 Blogspot 上更改某些内容（通过网络发布合适的帖子），我将无法在我的 sencha 应用程序上看到更改。如何解决这个问题才能稳定工作？？？？

# git - `Everything up-to-date`的Git post-receive钩子

> ID：10878495
> 
> 赞同：4
> 
> 时间：2012-06-04T08:39:31.307
> 
> 标签：git

当有`git push`来自客户端时，我们在服务器上使用 post-receive 挂钩进行一些处理。

仅当有新内容要推送时才有效，但`Everything up-to-date`不会执行 post-receive 钩子。

我们确实想在真的没有更新的时候做点什么，有可能吗？

# c# - 更改绑定属性时 ListView 分组不更新

> ID：10878500
> 
> 赞同：8
> 
> 时间：2012-06-04T08:39:39.793
> 
> 标签：c#, wpf, listview, data-binding, grouping

我正在使用依赖属性 GroupDescription 根据我的列表视图项目源的属性对 WPF 列表视图中的项目进行分组。

我的问题是分组仅在 GroupDescription 值更改时更新，而不是在列表视图源中项目的绑定属性更改后更新。

在下面的示例中，GroupDescription 设置为 city，这导致组描述为“City: Hamburg”。但是，当项目城市属性更改时，列表视图中的分组不会更新，这意味着组“城市：汉堡”中将有一个城市为“柏林”的项目。

分组仅在 GroupDescription 更新后更新。我尝试使用 PersonPropertyChanged 方法找到解决方法，该方法将 GroupDescription 更改为 PersonId 并立即返回到 City。但是，如果滚动位置位于列表视图的中间或末尾，则此解决方法会导致列表视图始终跳回顶部。当使用具有数百个属性变化的条目的列表视图时，这可能真的很烦人。

有没有一种方法可以在项目属性更改后“更新”分组而不让列表视图跳回顶部？

预先感谢您的任何帮助！托马斯

**分组列表视图.cs**

```
using System.Windows.Controls;
using System.Windows;
using System.Windows.Data;

namespace WpfApplication
{
    /// <summary>
    /// Enhanced list view based on WPF ListView with dependency properties for GroupDescriptions
    /// </summary>
    public class GroupingListView : ListView
    {
        /// <summary>
        /// Dependency property for group descriptions
        /// </summary>
        public string GroupDescription
        {
            get { return (string)GetValue(GroupDescriptionProperty); }
            set { SetValue(GroupDescriptionProperty, value); }
        }

        /// <summary>
        /// Using a DependencyProperty as the backing store for GroupDescription.  This enables animation, styling, binding, etc...
        /// </summary>
        public static readonly DependencyProperty GroupDescriptionProperty =
            DependencyProperty.Register("GroupDescription",
                                        typeof(string),
                                        typeof(GroupingListView),
                                        new UIPropertyMetadata(string.Empty, GroupDescriptionChanged));

        private static void GroupDescriptionChanged(DependencyObject source, DependencyPropertyChangedEventArgs args)
        {
            var control = source as GroupingListView;
            // Stop if source is not of type DetailedListView
            if (control == null) return;

            // Stop if myView is not available, myView can not group, groupdescription missing\
            // or the argument is empty
            var myView = (CollectionView)CollectionViewSource.GetDefaultView(control.ItemsSource);
            if (myView == null || !myView.CanGroup || (string) args.NewValue == string.Empty ||
                myView.GroupDescriptions == null)
            {
                return;
            }
            myView.GroupDescriptions.Clear();
            // If a group description already
            if(myView.GroupDescriptions.Count > 0)
            {
                var prop = myView.GroupDescriptions[0] as PropertyGroupDescription;
                if(prop != null)
                {
                    if(!prop.PropertyName.Equals((string)args.NewValue))
                    {
                        myView.GroupDescriptions.Clear();
                    }
                }
            }

            // Stop if at this point a group description still exists. This means the newValue is
            // equal to the old value and nothing needs to be changed
            if (myView.GroupDescriptions.Count != 0) return;

            // If this code is reached newValue is different than the current groupDescription value
            // therefore the newValue has to be added as PropertyGroupDescription
            var groupDescription = new PropertyGroupDescription((string)args.NewValue);
            // Clear and add the description only if it's not already existing
            myView.GroupDescriptions.Add(groupDescription);
        }
    }
} 
```

**主窗口.xaml**

```
<Window x:Class="WpfApplication.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:WpfApplication="clr-namespace:WpfApplication"
        Title="MainWindow" Height="300" Width="300">
    <StackPanel>
        <Button Content="Change" Click="btnChangeCity" Height="22"/><Button Content="Change back" Click="btnChangeCityBack" Height="22"/>
        <WpfApplication:GroupingListView ItemsSource="{Binding Persons}" Height="200"
                                         GroupDescription="{Binding GroupDescription}" x:Name="GroupingListView">
            <ListView.GroupStyle>
                <GroupStyle>
                    <GroupStyle.HeaderTemplate>
                        <DataTemplate>
                            <Grid HorizontalAlignment="Stretch">
                                <Border HorizontalAlignment="Stretch" BorderBrush="Transparent" BorderThickness="1" CornerRadius="3">
                                    <Border HorizontalAlignment="Stretch" BorderBrush="LightGray" BorderThickness="0,0,0,1" CornerRadius="0">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Foreground="LightGray" Text="{Binding GroupDescription, ElementName=GroupingListView}"/>
                                            <TextBlock Foreground="LightGray" Text=" : "/>
                                            <TextBlock Foreground="LightGray" Text="{Binding Name}"  HorizontalAlignment="Stretch"/>
                                        </StackPanel>
                                    </Border>
                                </Border>
                            </Grid>
                        </DataTemplate>
                    </GroupStyle.HeaderTemplate>
                </GroupStyle>
            </ListView.GroupStyle>
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="PersonId" Width="100">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock TextTrimming="CharacterEllipsis" Text="{Binding PersonId, Mode=Default}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="City" Width="100">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock TextTrimming="CharacterEllipsis" Text="{Binding City, Mode=Default}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </WpfApplication:GroupingListView>
    </StackPanel>
</Window> 
```

**主窗口.xaml.cs**

```
using System.Collections.ObjectModel;
using System.Collections.Specialized;
using System.ComponentModel;

namespace WpfApplication
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : INotifyPropertyChanged
    {
        public class Person : INotifyPropertyChanged
        {

            public Person(string personId, string city)
            {
                PersonId = personId;
                City = city;
            }

            private string _personId;
            private string _city;

            public event PropertyChangedEventHandler PropertyChanged;
            protected void OnPropertyChanged(string name)
            {
                PropertyChangedEventHandler pc = PropertyChanged;
                if (pc != null)
                    pc(this, new PropertyChangedEventArgs(name));
            }

            public string PersonId
            {
                get { return _personId; }
                set { _personId = value; OnPropertyChanged("PersonId"); }
            }

            public string City
            {
                get { return _city; }
                set { _city = value; OnPropertyChanged("City"); }
            }

        }

        public ObservableCollection<Person> Persons { get; set; }

        public string GroupDescription
        {
            get { return _groupDescription; }
            set { _groupDescription = value; OnPropertyChanged("GroupDescription"); }
        }

        private string _groupDescription;

        public MainWindow()
        {
            InitializeComponent();
            DataContext = this;
            GroupDescription = "City";
            Persons = new ObservableCollection<Person>();
            Persons.CollectionChanged += PersonsCollectionChanged;
            Persons.Add(new Person("1", "Hamburg"));
            Persons.Add(new Person("2", "Hamburg"));
            Persons.Add(new Person("3", "Hamburg"));
            Persons.Add(new Person("4", "Hamburg"));
            Persons.Add(new Person("5", "Hamburg"));
            Persons.Add(new Person("6", "Hamburg"));
            Persons.Add(new Person("7", "Hamburg"));
            Persons.Add(new Person("8", "Hamburg"));
            Persons.Add(new Person("9", "Berlin"));
            Persons.Add(new Person("10", "Hamburg"));
            Persons.Add(new Person("11", "Hamburg"));
            Persons.Add(new Person("12", "Munich"));
            Persons.Add(new Person("13", "Munich"));
            OnPropertyChanged("Persons");
        }

        public void PersonsCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.Action == NotifyCollectionChangedAction.Remove)
            {
                foreach(Person item in e.OldItems)
                {
                    //Removed items
                    item.PropertyChanged -= PersonPropertyChanged;
                }
            }
            else if (e.Action == NotifyCollectionChangedAction.Add)
            {
                foreach(Person item in e.NewItems)
                {
                    //Added items
                    item.PropertyChanged += PersonPropertyChanged;
                }     
            }       
        }   

    public void PersonPropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        //GroupDescription = "PersonId";
        //GroupDescription = "City";
    }

        public event PropertyChangedEventHandler PropertyChanged;
        protected void OnPropertyChanged(string name)
        {
            PropertyChangedEventHandler pc = PropertyChanged;
            if (pc != null)
                pc(this, new PropertyChangedEventArgs(name));
        }

        private void btnChangeCity(object sender, System.Windows.RoutedEventArgs e)
        {
            Persons[0].City = "Berlin";
        }

        private void btnChangeCityBack(object sender, System.Windows.RoutedEventArgs e)
        {
            Persons[0].City = "Hamburg";
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-08-28T14:21:11.077

我意识到这已经很晚了，但是如果您使用的是 .NET4.5 或更高版本，您可以使用实时分组功能，我认为这正是您想要的。

例如，不是`ListView` `ItemsSource`直接绑定到`Persons`，而是绑定到`CollectionViewSource`本身绑定到的 a `Persons`：

```
<Window.Resources>
    <CollectionViewSource x:Key="PersonsViewSource" Source="{Binding Persons}" IsLiveGroupingRequested="True"> 
         <CollectionViewSource.GroupDescriptions>
              <PropertyGroupDescription PropertyName="GroupName" />
         </CollectionViewSource.GroupDescriptions>            
    </CollectionViewSource>
</Window.Resources> 
```

如上所示，您只需添加属性`IsLiveGroupingRequested="True"`，然后添加要重新组合的属性名称。

当`GroupName`属性更改时（通过您使用`INotifyPropertyChanged`），相关项目将自己移动到 中的正确组中`ListView`，而不会更改任何其他内容。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-04T12:37:13.657

我自己找到了一个可行的解决方案。

在我调用的 PersonPropertyChanged 方法中

```
ICollectionView view = CollectionViewSource.GetDefaultView(GroupingListView.ItemsSource);
view.Refresh(); 
```

我不确定这是否是完美的解决方案，但它对我的问题有效。

# c++ - 在一个变量中存储多个值

> ID：10878501
> 
> 赞同：0
> 
> 时间：2012-06-04T08:39:46.957
> 
> 标签：c++

我对我的问题的标题不太准确，因为我不知道这个东西的真正名称。

我不断看到 Win32 API 如何在变量中存储超过 1 个值。

例如，`WPARAM`和`LPARAM`。这是一个`long`“分为”两个的数字：高字和低字。当它取 32 位值，将其除以 2 并将其设置为两个 16 位值时，还有更多示例。

我怎样才能以这种方式自己设置变量？（创建一个变量，并将位划分为我需要的数量，并设置每个部分）

*PS我主要是出于教育目的而询问，所以即使您不建议我自己这样做，我仍然会很感激答案。* 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:42:20.730

你可以这样做：

```
WPARAM param = (WPARAM)(hiByte << 8 | lowByte); 
```

这设置了变量的 16 位`param`。

而相反的操作是这样的：

```
//BYTE  is defined in WinDef.h
BYTE lowByte = (BYTE)(param && 0xFF);
BYTE hiByte =  (BYTE)((param >> 8) && 0xFF); 
```

或者您可以使用宏`LOBYTE`并`HIBYTE`定义`WinDef.h`为：

```
BYTE lowByte = LOBYTE(param);
BYTE hiByte =  HIBYTE(param); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T08:44:46.203

有（至少）两种方法可以实现这一点：

*   使用位移/掩码运算符`<<`, `>>`,`&`和`|`，类似这样的东西（只是一个例子，未经测试）：

    ```
    int loWord = ...;
    int hiWord = ...;
    LPARAM param = (hiWord << 16) | loWord;
    ...
    loWord = param & 0xFFFF;
    hiWord = param >> 16; 
    ```

*   使用一种`union`类型（尽管后一种会受到内存对齐和字节序问题的影响，因此它可能不是一个可移植的解决方案）；[在这里看一个例子](http://www.anyexample.com/programming/cplusplus/example_of_using_union_in_cplusplus.xml)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T08:46:21.610

它通常称为位掩码，定义它们的一种方法如下：

```
struct Param
{
   unsigned wparam   : 16;     //16 bits
   unsigned lparam   : 16;     //16 bits
}; 
```

通常不建议以这种方式定义它们，因为它们不可移植。这里的其他答案显示了一种更便携的方法。

# spring - 使用 Hibernate 4 和 Spring 3.1 将 jtaTransactionManager 配置为 LocalSessionFactoryBean

> ID：10878506
> 
> 赞同：1
> 
> 时间：2012-06-04T08:39:57.267
> 
> 标签：spring, hibernate, jta

如何配置 LoanSessionFactoryBean 以使用带有 Hibernate 4 的 JTA 事务管理器？

使用 Hibernate 3.x 以下配置有效，但在 Hibernate 4 中[LocalSessionFactoryBean](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/orm/hibernate4/LocalSessionFactoryBean.html)不再具有`jtaTransactionManager`属性

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean" 
    p:configLocation="classpath:hibernate.cfg.xml"
    p:jtaTransactionManager-ref="jtaTransactionManager" /> 
```

我正在使用 Spring 3.1.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T20:09:29.993

实际上 Spring 3.1.1 没有 jtaTransactionManager 属性。也许他们忘了添加它。

他们在 Spring 3.1.4 中添加了它。所以我认为你应该升级到那个版本。

# gwt - 无法下载适用于 IE 的 GWT 插件

> ID：10878508
> 
> 赞同：1
> 
> 时间：2012-06-04T08:40:04.697
> 
> 标签：gwt, plugins, installation

我无法为 Internet Explorer 安装 GWT Developer 插件。

得到黄色补丁后说：

```
Development Mode requires the Google Web Toolkit Developer Plugin 
```

我点击`Download plugin`。它没有重定向到下载站点，而是显示：

```
Internet Explorer cannot display the webpage 
```

可能的原因是什么？

实际上页面没有重定向到：

“https://dl-ssl.google.com/tag/s/appguid%3D%7B9a5e649a-ec63-4c7d-99bf-75adb345e7e5%7D%26lang%3Den%26appname%3DGWT%2520Developer%2520Plugin%2520for%2520IE%2520 %2528x86%2529%26needsadmin%3Dfalse/gwt/plugins/ie/GwtDevPluginSetup.exe"

有没有其他方法可以安装该插件？

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:17:56.607

我遇到了同样的问题，我认为IE8没有开发模式。当我尝试在 IE 中运行它时它不起作用。所以我建议你使用 Chrome，它是支持 GWT 开发模式的最佳浏览器。为什么你仍然需要IE？阅读这篇关于 IE 的文章[http://googlewebtoolkit.blogspot.com/2010/12/support-for-gwt-dev-mode-in-ie-9.html](http://googlewebtoolkit.blogspot.com/2010/12/support-for-gwt-dev-mode-in-ie-9.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T11:57:20.203

即使我在为 IE 安装插件时也遇到了同样的问题，我所做的只是复制并粘贴地址栏中[缺少的插件 url](http://www.gwtproject.org/missing-plugin/)，然后点击 enter 按钮。并安装它，所以终于它工作了。问题是，在单击下载链接后，浏览器无法重定向到插件更新站点。

希望这可以解决您的问题。

# php - 解析包含分号的 SQL（在 PHP 中）

> ID：10878514
> 
> 赞同：1
> 
> 时间：2012-06-04T08:40:53.737
> 
> 标签：php, mysql, parsing

我编写了一个从 MySQL 转储中加载数据的 SQL 解析器。问题是某些 SQL 语句本身包含分号，因此我的解析器将其视为 EOL，因为我使用

```
$sqlRows = explode(';', $sqlFile); 
```

解析转储文件。

关于如何管理这个的任何建议？我被困住了：S

**编辑：**

抱歉，我忘了说问题是当 PHP 从转储文件向 DB 写入数据时，它在读取包含分号的句子时返回错误。

我知道它不是一个完整的解析器，它只是逐行读取。我是新手。我只需要将相同的数据库（通过转储文件）“克隆”到许多，更改少量数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:46:03.247

试试这个

```
$sqlRows=explode(";\n",$sqlFile); 
```

所以你只会得到 ; 位于行尾。但是，只有当您的文件格式化为每个语句都以 ; 结尾时，它才会起作用。并且每个新语句都从新行开始。

# c# - Linq加入，分组和求和

> ID：10878516
> 
> 赞同：0
> 
> 时间：2012-06-04T08:40:59.637
> 
> 标签：c#, linq, linq-to-objects

我有这个：我有三个列表，其中包含数据订单订单行和地址。

我想加入这些名单。

```
Contents = from o in Orders
           join a in addresses on o.DeliveryAddressId equals a.AddressId
           //join ol in ordersLines on o.OrderId equals ol.OrderId 
           let ol = ShopOrderLines.Where(x=>x.OrderId == o.OrderId)
           select new Order
           {
            OrderId = o.OrderId,
            CreatedDate = o.CreatedDate,
            Status = o.Status,
            CustomerComment = o.CustomerComment,
            AdminComment = o.AdminComment,
            PaymentType = (PaymentType) o.PaymentStatus,
            PaymentStatus = (PaymentStatus) o.PaymentType,
            Firstname = a.Firstname,
            Lastname = a.Lastname,
            Sum = ol.Any() ? ol.Sum(x=>x.Quantity * x.Price) : 0
            }; 
```

这很好用，但我还想为每个订单添加 orderLines 的总和。

像这样的东西。sum = (ol.Vat * ol.Quantity) + (ol.Quantity + ol.Price)

我想我必须对结果进行分组然后计算`？

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:38:10.487

我更改了我的代码并添加了 let ol = ShopOrderLines.Where(x=>x.OrderId == o.OrderId) 这给了我一个 List om orderlines 可以使用。

# tabcontrol - TabControl 的背景颜色？

> ID：10878520
> 
> 赞同：1
> 
> 时间：2012-06-04T08:41:31.813
> 
> 标签：tabcontrol, geckofx

我正在使用在 Geckofx 上运行的浏览器，但是我找不到更改 TabControl 的颜色的方法我不想更改标签页，我想更改容器。

这就是我的意思：

这就是我想要做的：

![在此处输入图像描述](../Images/12f641139fd59d56b79c2804c9247f9d.png)

这就是我所在的位置：

![在此处输入图像描述](../Images/e9c99f8c9156af0498b535ec1e2a23b6.png)

我已经将它用于标签

```
 private void tabControl_DrawItem(object sender, System.Windows.Forms.DrawItemEventArgs e)
    {
        {
            TabPage CurrentTab = tabControl.TabPages[e.Index];
            Rectangle ItemRect = tabControl.GetTabRect(e.Index);
            SolidBrush FillBrush = new SolidBrush(Color.Red);
            SolidBrush FBG = new SolidBrush(Color.Black);
            SolidBrush TextBrush = new SolidBrush(Color.Green);
            StringFormat sf = new StringFormat();
            sf.Alignment = StringAlignment.Center;
            sf.LineAlignment = StringAlignment.Center;
            if (System.Convert.ToBoolean(e.State & DrawItemState.Selected))
            {
                FillBrush.Color = Color.Black;
                TextBrush.Color = Color.Green;
                ItemRect.Inflate(0, 0);
            }

            if (tabControl.Alignment == TabAlignment.Left || tabControl.Alignment == TabAlignment.Right)
            {
                float RotateAngle = 90;
                if (tabControl.Alignment == TabAlignment.Left)
                    RotateAngle = 270;
                PointF cp = new PointF(ItemRect.Left + (ItemRect.Width / 3), ItemRect.Top + (ItemRect.Height / 5));
                e.Graphics.TranslateTransform(cp.X, cp.Y);
                e.Graphics.RotateTransform(RotateAngle);
                ItemRect = new Rectangle(-(ItemRect.Height / 3), -(ItemRect.Width / 3), ItemRect.Height, ItemRect.Width);
            }
            e.Graphics.FillRectangle(FillBrush, ItemRect);
            e.Graphics.DrawString(CurrentTab.Text, e.Font, TextBrush, (RectangleF)ItemRect, sf);
            e.Graphics.ResetTransform();
            FillBrush.Dispose();
            TextBrush.Dispose();
        }
    } 
```

我只是不知道如何更改 TabControl 的颜色

我在网上到处都看过，这些例子要么是 0 有意义，要么是不起作用。

从我看过的例子中我知道这是可能的

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:51:13.787

TabControl 具有来自 Control 的属性 BackColor。也许如果没有任何效果，请尝试将 DefaultBackColor 设置为 TabControl 所需的颜色？看看这个：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control.defaultbackcolor.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.defaultbackcolor.aspx)

# ruby-on-rails - 使用 Tire & Bonsai.io 在 Heroku 上部署 ElasticSearch

> ID：10878526
> 
> 赞同：1
> 
> 时间：2012-06-04T08:42:15.973
> 
> 标签：ruby-on-rails, deployment, heroku, search-engine, elasticsearch

我正在尝试设置新的[Bonsai ElasticSearch](https://addons.heroku.com/bonsai) heroku 插件，但直到现在我可以在本地开发机器上运行搜索，一旦部署在 Heroku 上，相同的搜索就会静默失败，或者更好的是，Rails 记录器不会当我收到**500 Internal Server Error**时记录任何内容。这是查询失败期间的相关 Heroku 日志（未发现明显错误）：[https ://gist.github.com/2867221](https://gist.github.com/2867221)

我正在寻找有关如何解决此问题的一些建议。例如，我`Tire.configure { logger 'elasticsearch.log', :level => 'debug' }`在 Bonsai 初始化程序 config/initializers/bonsai.rb 上设置如下：

```
Tire.configure { logger 'elasticsearch.log', :level => 'debug' }
if ENV['BONSAI_INDEX_URL']
  Tire.configure do
    url "http://index.bonsai.io"
  end
  BONSAI_INDEX_NAME = ENV['BONSAI_INDEX_URL'][/[^\/]+$/]
else
  app_name = Rails.application.class.parent_name.underscore.dasherize
  app_env = Rails.env
  BONSAI_INDEX_NAME = "#{app_name}-#{app_env}"
end 
```

但它登录一个文件，这对本地有好处，但部署后无法访问。

Bonsai ElasticSearch 是一个全新的测试插件，所以我想知道你们中是否有人已经成功地在 Heroku 上部署了它，并且可以给我反馈和一些建议。

更新

设置 logger logger $stdout, :level => 'debug' 到 Tire.configure 最后 heroku 可以在搜索失败时记录一些东西：

```
2012-06-04T21:36:26+00:00 heroku[router]: GET gitwatcher.com/categories?utf8=%E2%9C%93&query=Asynchronous+Web+Frameworks dyno=web.1 queue=0 wait=0ms service=32ms status=500 bytes=728
2012-06-04T21:36:26+00:00 heroku[nginx]: 93.34.212.216 - - [04/Jun/2012:21:36:26 +0000] "GET /categories?utf8=%E2%9C%93&query=Asynchronous+Web+Frameworks HTTP/1.1" 500 728 "http://gitwatcher.com/categories" "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0" gitwatcher.com
2012-06-04T21:36:26+00:00 app[web.1]: # 2012-06-04 21:36:26:387 [_search] (["123456789"])
2012-06-04T21:36:26+00:00 app[web.1]: #
2012-06-04T21:36:26+00:00 app[web.1]: curl -X GET "http://index.bonsai.io/123456789/category/_search?load=true&pretty=true" -d '{"query":{"query_string":{"query":"Asynchronous Web Frameworks"}}}'
2012-06-04T21:36:26+00:00 app[web.1]:
2012-06-04T21:36:26+00:00 app[web.1]: # 2012-06-04 21:36:26:387 [200] (1 msec)
2012-06-04T21:36:26+00:00 app[web.1]: 
```

...请查看更多关于[https://github.com/karmi/tire/issues/365的问题](https://github.com/karmi/tire/issues/365)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:04:23.600

仅出于跟踪目的，我将在此处报告（cat&past）我在[GitHub 轮胎问题](https://github.com/karmi/tire/issues/365)上发布的解决方案：

```
DEFINETLY WORKS BY:
  1)  dropping out `to_indexed_json` from Category MongoID model ( at the opposit of README indication )
  2)  removing and re-adding Bonsai.io Heroku add-on
  3)  reindexing ElasticSearch by running `heroku run:detached rake environment tire:import CLASS='Category'` 
```

...事实上，如果你只是运行 rake environment 轮胎：import CLASS='Category' FORCE=true 它在 Heroku/Bonsai.io 上不起作用，因为 Bonsai 授权操作：

```
 2012-06-11T20:39:30+00:00 app[run.1]: curl -X DELETE http://index.bonsai.io/my-fake-index-11223344
  2012-06-11T20:39:30+00:00 app[run.1]: # 2012-06-11 20:39:30:749 [401]
  2012-06-11T20:39:30+00:00 app[run.1]: #
  2012-06-11T20:39:30+00:00 app[run.1]: # "{\"error\": \"Not authorized: Some endpoints are admin-only, ask support@onemorecloud.com.\"}\n" 
```

如果您想重置/重新索引最终的脏数据，唯一的方法是删除 Bonsai 插件并重新创建：

```
 heroku addons:remove bonsai:test
  heroku addons:add bonsai:test 
```

也就是说，我确实有一个脏数据，由：

```
 BSON::InvalidObjectId (illegal ObjectId format: LAm-hNglS5mbrMzDlVVHCQ):
  app/controllers/categories_controller.rb:25:in `index' 
```

如果您需要完整的 gem 堆栈来与其他案例进行比较，这里是：[https ://gist.github.com/2912881](https://gist.github.com/2912881)

# sql - 删除除每个用户最新的所有行，具有特定的列值

> ID：10878534
> 
> 赞同：1
> 
> 时间：2012-06-04T08:42:47.237
> 
> 标签：sql, sqlite, group-by, sql-delete

我有一个`events`包含用户事件的表，例如：

```
PK | user | event_type | timestamp
--------------------------------
1  | ab   | DTV        | 1
2  | ab   | DTV        | 2
3  | ab   | CPVR       | 3
4  | cd   | DTV        | 1
5  | cd   | DTV        | 2
6  | cd   | DTV        | 3 
```

我想要做的是每个事件只保留一个事件`user`，即具有最新`timestamp` 和的事件`event_type = 'DTV'`。

对上面的示例应用删除后，表格应如下所示：

```
PK | user | event_type | timestamp
--------------------------------
2  | ab   | DTV        | 2
6  | cd   | DTV        | 3 
```

你们中的任何人都可以想出完成这项任务的方法吗？

更新：我正在使用 Sqlite。这是我到目前为止所拥有的：

```
delete from events
where id not in (
  select id from (
    select id, user, max(timestamp)
    from events
    where event_type = 'DTV'
    group by user)
); 
```

我很确定这可以改进。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T08:48:05.263

我认为你应该能够做这样的事情：

```
delete from events
where (user, timestamp) not in (
    select user, max(timestamp)
    from events
    where event_type = 'DTV'
    group by user
) 
```

您可能会执行一些更复杂的技巧，例如表或分区替换，具体取决于您正在使用的数据库

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T08:50:29.437

如果使用 sql server roo5/2008，则使用以下 sql：

```
;WITH ce 
     AS (SELECT *, 
                Row_number() 
                  OVER ( 
                    partition BY [user], event_type 
                    ORDER BY timestamp DESC) AS rownumber 
         FROM   emp) 
DELETE FROM ce 
WHERE  rownumber <> 1 
        OR event_type <> 'DTV' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T12:00:03.817

在我看来，您的解决方案不够可靠，因为您的子查询正在提取一个既不聚合也不添加到`GROUP BY`. 我的意思是，我不是一个有经验的 SQLite 用户，你的解决方案[在我测试时](http://sqlfiddle.com/#!5/cb6ce/6)确实有效。如果有任何确认在这种情况`id`下列总是与`MAX(timestamp)`值可靠相关，很好，你的方法似乎相当不错。

但是，如果您和我一样不确定您的解决方案，您可以尝试以下方法：

```
DELETE FROM events
WHERE NOT EXISTS (
  SELECT *
  FROM (
    SELECT MAX(timestamp) AS ts
    FROM events e
    WHERE event_type = 'DTV'
      AND user = events.user
  ) s
  WHERE ts = events.timestamp
); 
```

的内部实例`events`被分配了一个不同的别名，以便`events`可以使用别名来明确引用表的外部实例（`DELETE`命令实际应用于的那个）。但是，此解决方案确实假定`timestamp`per 是唯一的`user`。

可以[在 SQL Fiddle 上](http://sqlfiddle.com/#!5/cb6ce/2)运行和使用一个工作示例。

# javascript - 在 iframe 中使用 jquery-mobile 调用 html 页面

> ID：10878545
> 
> 赞同：1
> 
> 时间：2012-06-04T08:43:31.453
> 
> 标签：javascript, jquery, html, jquery-mobile, browser-cache

我在 iframe 中调用 html5 页面。为了防止缓存，我这样调用页面：

...不是无关的代码...

```
<iframe  id="contentframe1" name="contentframe1" frameborder="0" scrolling="No"   src="" height="432" width="100%"> </iframe> 
```

...不是无关的代码

调用html5+jquery-mobile页面的Javascript代码...

```
$("#contentframe1").attr('src',urlVista);
var d= new Date();      

var urlVista="usuarios/"+parent.parent.Nb_Global_usuario+"/aplicaciones/"+parent.parent.Nb_Global_aplicacion+"/appfiles/vistas/"+LinkTab[aux]+".html?"+d.toString(); 
```

你怎么能看到我用非缓存模式调用这个页面。问题：

在 html5+jQuery-Mobile 页面中，我有一个多页。

PageA 调用 PageB..正确！！

但是，当 PageB 执行后退按钮操作时，会出现下一个错误：

```
Uncaught Error: Syntax error, unrecognized expression: 0200%20(Hora%20de%20verano%20romance]') 
```

解决方案是删除未缓存模式...但我需要在没有缓存的情况下加载页面。

任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:23:51.103

您应该将字符 "(" , ")" , " " 替换为空, d=d.toString().replace('(','').replace(')','').replace(' ' ,'');

# ios - iOS 应用程序 - 复杂数据分离的复杂 UI

> ID：10878546
> 
> 赞同：0
> 
> 时间：2012-06-04T08:43:35.883
> 
> 标签：ios, core-data, uikit, plist, core-text

我正计划为医疗指南开发一个数据密集型应用程序，这些指南需要经常更新，因此作为开发人员需要自己更新它们。一种选择是将数据放在 plist 中，但我发现这种方法非常乏味。我正在考虑使用 HTML 块并在我的应用程序中引用文件，这样它们会更容易编辑。

我很想知道下面的界面是如何生成的，或者我可以使用哪些选项来生成类似的界面，HTML 是这里的最佳选择，还是带有 Core Data + Core Text 或 SQLite + Core Text 的原生 UI 元素？请记住，我想要一种简单的方法来更新数据，并且数据必须在离线时对应用程序可用？

![签名应用](../Images/229d7a429644b1c62e176aeb5796f966.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:12:49.493

> 请记住，我想要一种简单的方法来更新数据，并且数据必须对应用程序可用

我会选择 plists。我认为它们非常适合保存您的数据并可供任何人编辑（非 IT 相关人员，使用 HTML，他们必须小心标签）。HTML 文件虽然可以，但不要认为它和 plist 一样好，因为在最后一个文件中，如果结构正确，您会立即理解层次结构，而在 HTML 上只是一堆文件。至于视图，我确实认为`UITableView`带有一些自定义`UITableViewCells`功能可以解决问题（老实说，我觉得界面有点难看）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:17:22.313

我会使用 SQLLite 数据库，您可以经常从您的服务器更新它。

我还创建了一个医疗应用程序，并且经常需要更新数据，所以我在 SQLLite 上进行了设计。

我在程序启动时检查数据库的新版本是否可用，如果可用，我正在应用程序上下载它以替换旧版本。

请记住，您需要在您的应用程序中记录它正在运行的数据库版本，并且每当您更新它时，您还需要更新应用程序上的数据库版本密钥。

我还建议创建 SQLLite DB 的可编辑版本，以防您希望允许用户将数据存储到其中，方法是将数据库从应用程序包复制到用户文档目录。

# macos - 无法通过 mac os 上的函数 chrome.tabs.captureVisibleTab 捕获 youtube.com 的选项卡

> ID：10878549
> 
> 赞同：1
> 
> 时间：2012-06-04T08:43:51.053
> 
> 标签：macos, google-chrome-extension

我正在尝试按功能捕获选项卡

```
chrome.tabs.captureVisibleTab(..) 
```

在我的 Mac OS X 版本 10.6.8 和 Chrome 版本 19.0.1084.53 上的 chrome 扩展上，它适用于谷歌和其他网站，但不会捕获 Youtube.com 的标签或任何包含嵌入 Flash 播放器的标签。

从 youtube.com 捕获的标签显示为黑色，并且看不到任何内容。

下面是我的代码 -

background.html 包含

```
 ..
   chrome.browserAction.onClicked.addListener(function (tab) {
    images = [];
    chrome.windows.getCurrent(function (win) {
        chrome.tabs.captureVisibleTab(win.id, { "format": "png" }, function (imgUrl) {

            chrome.tabs.create({ url: imgUrl });

        });
    });
});
.. 
```

manifest.json 包含

```
{
  "name": "Moon",
  "version": "1.0",
  "manifest_version": 1,
  "background_page": "background.html",
  "description": "Moon",
  "browser_action": {
    "default_icon": "icon.png"
  },
  "permissions": [
     "tabs"
     ,"<all_urls>"
  ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T04:01:26.030

这是一个[Chrome 错误](http://code.google.com/p/chromium/issues/detail?id=51474)，没有已知的解决方法。

# asp.net - 在配置文件中设置两个 smtp 服务器

> ID：10878556
> 
> 赞同：0
> 
> 时间：2012-06-04T08:44:12.100
> 
> 标签：asp.net, web-config

我正在尝试在 web.config 文件中设置两个 smtp 服务器，但出现错误

```
 Unrecognized configuration section system.net/mailSettings/smtp_1. 
```

如何正确地做到这一点？

```
<configuration>
  <configSections>
    <sectionGroup name="mailSettings">
      <section name="smtp_1" type="System.Net.Configuration.SmtpSection"/>
      <section name="smtp_2" type="System.Net.Configuration.SmtpSection"/>
    </sectionGroup>
  </configSections>

<system.net>
    <mailSettings>
      <smtp_1 from="no-reply1@web2pdfconvert.com" deliveryMethod="specifiedPickupDirectory">
        <specifiedPickupDirectory  pickupDirectoryLocation="C:\Users\Administrator\Projects\temp\wp" />
        <network host="smtp...." enableSsl="true" userName="..." password="..." port="587"  />
      </smtp_1>
      <smtp_2 from="no-reply2@web2pdfconvert.com" deliveryMethod="specifiedPickupDirectory">
        <specifiedPickupDirectory  pickupDirectoryLocation="C:\Users\Administrator\Projects\temp\wp" />
        <network host="smtp...." port="25" />
      </smtp_2>      
    </mailSettings>
  </system.net>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:04:50.023

MailSettings 不适用于此目的：此部分是配置中可以存储 SMTP 参数的位置，因此在创建`new SmtpClient`.

如果您愿意，您可以创建自己的部分但不更改原始部分，如下所示：

```
<configuration>
 <configSections>
   <sectionGroup name="myMailSettings">
    <section name="smtp_1" type="System.Net.Configuration.SmtpSection"/>
    <section name="smtp_2" type="System.Net.Configuration.SmtpSection"/>
   </sectionGroup>
 </configSections>
 <myMailSettings>
  <smtp_1 from="no-reply1@web2pdfconvert.com" deliveryMethod="specifiedPickupDirectory">
    <specifiedPickupDirectory  pickupDirectoryLocation="C:\Users\Administrator\Projects\temp\wp" />
    <network host="smtp...." enableSsl="true" userName="..." password="..." port="587"  />
  </smtp_1>
  <smtp_2 from="no-reply2@web2pdfconvert.com" deliveryMethod="specifiedPickupDirectory">
    <specifiedPickupDirectory  pickupDirectoryLocation="C:\Users\Administrator\Projects\temp\wp" />
    <network host="smtp...." port="25" />
  </smtp_2>
</myMailSettings>
.... 
```

最后别忘了写一些代码来使用这些数据！

# jquery - 查明复选框是否被选中

> ID：10878558
> 
> 赞同：2
> 
> 时间：2012-06-04T08:44:21.433
> 
> 标签：jquery, forms, input, radio-button

我想用 jQuery 验证表单中的单选按钮，但它不起作用。即使我选中一个单选按钮，下面的代码（变量“checked”）也会返回 false。

我究竟做错了什么？

```
 $('.radio').each(function(){
            var checked = $(this).is(':checked');
            if($(this).is(':checked') === false){
                e.preventDefault();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:47:05.677

试试这个

```
 $('.radio').each(function(){
            var checked = $(this).attr("checked") == "checked";
            if(checked){
                e.preventDefault();
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:47:29.500

采用

```
 $('.radio').click(function(){               
                if($(this).is(':checked') == false){
                    e.preventDefault();
                }
    }); 
```

使用`$(this).is(:checked)` or`$(this).attr('checked')`获取复选框的状态

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T08:49:02.387

```
 $('.radio').each(function(e){
            var checked = this.checked;  // using this.checked is better
            if(!checked){  // not checked
                e.preventDefault();
            }
        }); 
```

或者如果你想`:is(':checked')`那么

```
 $('.radio').each(function(e){
            var checked = $(this).is(':checked');
            if(!checked){  // not checked
                e.preventDefault();
            }
        }); 
```

# java - 下载大文件时的套接字异常

> ID：10878559
> 
> 赞同：1
> 
> 时间：2012-06-04T08:44:22.483
> 
> 标签：java, android, socketexception

我的应用需要下载大文件。一段时间后我得到

```
java.net.SocketException: Connection timed out 
```

我相信这是因为设备将进入睡眠状态或 wifi。

那么我应该如何处理呢？我希望该用户无论需要多长时间都可以下载一个大文件。

文件下载使用：

```
HttpURLConnection con =  (HttpURLConnection) new URL(uriToFile).openConnection();
con.connect();

FileOutputStream fileOutput = new FileOutputStream(file);
InputStream inputStream = con.getInputStream();

byte[] buffer = new byte[1024];
int bufferLength = 0;

while ((bufferLength = inputStream.read(buffer)) > 0) {

    fileOutput.write(buffer, 0, bufferLength);

}

fileOutput.close(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:48:39.283

除了重试连接之外，您无法处理它。您可以降低大约 75 秒的默认连接超时，但不能提高它。

# macos - 在 Mac OS X 上通过命令行使用 wxWidgets 和 OpenGL

> ID：10878561
> 
> 赞同：1
> 
> 时间：2012-06-04T08:44:35.273
> 
> 标签：macos, opengl, command-line, makefile, wxwidgets

我正在尝试在装有 Mac OS X 10.7 (Lion) 的 MacBook 上编译我在带有 wxWidgets 和 OpenGL 的 Linux Ubuntu 10.4 下使用 C++ 语言编写的项目。我使用以下配置安装了 wxWidgets：

```
$ arch_flags="-arch i386"
$ ../configure CFLAGS="$arch_flags" CXXFLAGS="$arch_flags" CPPFLAGS="$arch_flags" LDFLAGS="$arch_flags" OBJCFLAGS="$arch_flags" OBJCXXFLAGS="$arch_flags" --enable-unicode --enable-debug --disable-shared --with-macosx-sdk=/Developer/SDKs/MacOSX10.6.sdk --with-macosx-version-min=10.6 --with-opengl 
```

编译，我得到了很多警告。编译在链接阶段失败：

```
 [...]

    g++gcc-4.6.x `wx-config --cxxflags` -g -std=c++0x   -c -o GUI.o GUI.cc
    In file included from /opt/local/include/wx-2.8/wx/mac/glcanvas.h:4:0,
             from /opt/local/include/wx-2.8/wx/glcanvas.h:60,
             from Fenetre.h:5,
             from GUI.cc:2:
    /opt/local/include/wx-2.8/wx/mac/carbon/glcanvas.h:49:37: warning: ‘AGLDrawable’ is deprecated (declared at /System/Library/Frameworks/AGL.framework/Headers/agl.h:47) [-Wdeprecated-declarations]
    /opt/local/include/wx-2.8/wx/mac/carbon/glcanvas.h:53:21: warning: ‘AGLDrawable’ is deprecated (declared at /System/Library/Frameworks/AGL.framework/Headers/agl.h:47) [-Wdeprecated-declarations]

     [...]

     g++gcc-4.6.x   exerciceP13.o GUI.o Fenetre.o Vue_OpenGL.o Balle.o ChampForces.o Dessinable.o Exception.o Ressort.o Integrateur.o IntegrateurEuler.o ObjetMobile.o Obstacle.o Pendule.o PendulePlan.o PlanInfini.o Vecteur.o Systeme.o Balle3D.o PendulePlan3D.o Brique3D.o Brique.o PlanInfini3D.o Ressort3D.o Couleur.o IntegrateurNewmark.o Vent.o Ventilateur3D.o Trampoline3D.o IntRungKut.o ChampVitesse.o TapisRoulant3D.o PenduleSpherique.o Cylindre.o Cylindre3D.o  `wx-config --libs gl,core,base` -o exerciceP13
     g++gcc-4.6.x: error: i386: No such file or directory
     g++gcc-4.6.x: error: unrecognized option ‘-arch’
     make: *** [exerciceP13] Error 1 
```

这里我的 Makefile 和我的包含在图形类标题中：

```
CC  = g++gcc-4.6.x
CXX = g++gcc-4.6.x

CXXFLAGS= `wx-config --cxxflags` -g -std=c++0x
LDLIBS   = `wx-config --libs gl,core,base`

all: exerciceP13

exerciceP13: exerciceP13.o GUI.o Fenetre.o Vue_OpenGL.o Balle.o ChampForces.o Dessinable.o Exception.o Ressort.o Integrateur.o IntegrateurEuler.o ObjetMobile.o Obstacle.o Pendule.o PendulePlan.o PlanInfini.o Vecteur.o Systeme.o Balle3D.o PendulePlan3D.o Brique3D.o Brique.o PlanInfini3D.o Ressort3D.o Couleur.o IntegrateurNewmark.o Vent.o Ventilateur3D.o Trampoline3D.o IntRungKut.o ChampVitesse.o TapisRoulant3D.o PenduleSpherique.o Cylindre.o Cylindre3D.o

exerciceP13.o: exerciceP13.cc GUI.h

GUI.o: GUI.h GUI.cc Fenetre.h

Fenetre.o: Fenetre.h Fenetre.cc Vue_OpenGL.h

Vue_OpenGL.o: Vue_OpenGL.h Vue_OpenGL.cc Systeme.h Balle3D.h PendulePlan3D.h PlanInfini.h Brique3D.h PlanInfini3D.h Ressort3D.h IntegrateurEuler.h IntegrateurNewmark.h Ventilateur3D.h Trampoline3D.h Vent.h IntRungKut.h ChampVitesse.h TapisRoulant3D.h Cylindre3D.h

Balle.o: Balle.h Balle.cc ObjetMobile.h Vecteur.h

Brique.o: Brique.h Brique.cc Obstacle.h Vecteur.h ObjetMobile.h

ChampForces.o: ChampForces.h ChampForces.cc Vecteur.h Balle.h Dessinable.h

Dessinable.o: Dessinable.h Dessinable.cc

Exception.o: Exception.h Exception.cc

Integrateur.o: Integrateur.h Integrateur.cc ObjetMobile.h

IntegrateurEuler.o: IntegrateurEuler.h IntegrateurEuler.cc Integrateur.h ObjetMobile.h

ObjetMobile.o: ObjetMobile.h ObjetMobile.cc Vecteur.h Dessinable.h

Obstacle.o: Obstacle.h Obstacle.cc Vecteur.h ObjetMobile.h Dessinable.h

Pendule.o: Pendule.h Pendule.cc ObjetMobile.h Vecteur.h

PendulePlan.o: PendulePlan.h PendulePlan.cc Pendule.h Vecteur.h Balle.h

PlanInfini.o: PlanInfini.h PlanInfini.cc Vecteur.h Obstacle.h

Vecteur.o: Vecteur.h Vecteur.cc Exception.h

Systeme.o: Systeme.h Systeme.cc ObjetMobile.h Obstacle.h ChampForces.h Integrateur.h Dessinable.h

Balle3D.o: Balle3D.h Balle3D.cc Balle.h Couleur.h

PendulePlan3D.o: PendulePlan3D.h PendulePlan3D.cc PendulePlan.h Couleur.h

Brique3D.o: Brique3D.h Brique3D.cc Brique.h Couleur.h

PlanInfini3D.o: PlanInfini.h PlanInfini.cc PlanInfini.h Couleur.h

Ressort.o: Ressort.cc Ressort.h Vecteur.h ObjetMobile.h

Ressort3D.o: Ressort3D.cc Ressort3D.h Ressort.h Couleur.h

Couleur.o: Couleur.h Couleur.cc

IntegrateurNewmark.o: IntegrateurNewmark.h IntegrateurNewmark.cc Integrateur.h

Vent.o: Vent.cc Vent.h Vecteur.h Brique.h ObjetMobile.h ChampForces.h Ventilateur3D.h

Ventilateur3D.o: Ventilateur3D.h Ventilateur3D.cc Vecteur.h Vent.h Systeme.h Brique3D.h Dessinable.h

Trampoline3D.o: Trampoline3D.h Trampoline3D.cc Brique3D.h ObjetMobile.h Systeme.h Dessinable.h

ChampVitesse.o: ChampVitesse.h ChampVitesse.cc Vecteur.h ChampForces.h ObjetMobile.h Brique.h TapisRoulant3D.h

TapisRoulant3D.o: TapisRoulant3D.h TapisRoulant3D.cc  Vecteur.h Brique3D.h Systeme.h ChampVitesse.h Dessinable.h

IntRungKut.o: IntRungKut.h IntRungKut.cc Integrateur.h ObjetMobile.h Vecteur.h

PenduleSpherique.o: PenduleSpherique.h PenduleSpherique.cc Pendule.h Vecteur.h

Cylindre.o: Cylindre.h Cylindre.cc Vecteur.h Obstacle.h ObjetMobile.h

Cylindre3D.o: Cylindre3D.h Cylindre3D.cc Vecteur.h Couleur.h Cylindre.h

clean:
   rm -f *.o 
```

包括：

```
#include "wx/wxprec.h"
#ifndef WX_PRECOMP
#include "wx/wx.h"
#endif
#include "wx/glcanvas.h" // Pour combiner wxWidgets et OpenGL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:52:44.480

我终于使用 Macports 安装了 GCC 4.7 +universal 和 wxWidgets。它工作得很好。

# sencha-touch - 防止请求方法：煎茶触摸中的选项

> ID：10878564
> 
> 赞同：1
> 
> 时间：2012-06-04T08:44:48.737
> 
> 标签：sencha-touch

我正在向我的服务器（GET 或 POST）发送一个 ajax 请求，并且请求成功完成，但问题是在我的主要请求 sencha 发送一个名为 OPTIONS 的请求方法之前，这不是我的意图，因此它失败了。我怎么能禁用这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:13:35.153

问题解决了！在 phonegap 中这不会是一个问题，因为浏览器是请求的发送者，实际上不是 sencha ！如果您想在 chrome 浏览器中禁用它，只需使用以下选项运行它：

> ```
> `chromium-browser --args --disable-web-security` 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T16:09:13.197

如果您使用 Ext.Ajax.request，只需添加参数：

```
useDefaultXhrHeader : false 
```

如果您使用 Ext.data.proxy.Ajax，请编辑 /sdk/src/data/Connection.js，将 useDefaultXhrHeader 设置为 false。

如果没有，GET 和 POST 方法请求将包含 X-Requested-With 标头。我认为这个标头是发送 OPTIONS 方法请求的原因。

# facebook - 当网址更改时，我如何保留我的 Facebook 赞？

> ID：10878571
> 
> 赞同：1
> 
> 时间：2012-06-04T08:45:28.203
> 
> 标签：facebook, facebook-graph-api, seo, facebook-like

我需要从我的网站更改许多网址。我已经从旧网址永久重定向到新网址，以免丢失谷歌 seo。但是有些页面有很多我不想失去的 Facebook 喜欢。我如何告诉 facebook 这个 urls 已经改变了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:03:39.730

在每个 html 页面上，将`og:url`元标记设置为原始/旧位置的 url。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-27T07:47:38.003

设置从旧网址到新网址的 301 重定向。

# android - 在 android 中停止 Toast 并开始另一个

> ID：10878575
> 
> 赞同：8
> 
> 时间：2012-06-04T08:45:39.530
> 
> 标签：android, toast

我在我的应用程序中使用 Toast。当我按下按钮时，它显示 Toast。我的问题是，我第二次按下按钮时，第二次吐司正在“等待”第一次结束，并且仅显示出来。我希望当前的吐司立即显示而不是等待。这是我的简单代码：

```
toast = Toast.makeText(getApplicationContext(), "Press Back to retorn to the main page", Toast.LENGTH_SHORT);
toast.show(); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T08:51:37.927

您始终可以[取消 Toast 对象](http://developer.android.com/reference/android/widget/Toast.html#cancel%28%29)。

```
final Toast tst = Toast.makeText(ctx, "This is a toast.", Toast.LENGTH_SHORT);
tst.show();

Handler handler = new Handler();
    handler.postDelayed(new Runnable() {
       @Override
       public void run() {
           tst.cancel(); 
           tst.setText("Same toast with another message.");
           tst.show();
       }
}, 1000); 
```

因此，您可以使用第一个 Toast 对象，而不是创建另一个 Toast 对象，取消它，设置新文本并再次显示它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T08:56:59.213

在[https://stackoverflow.com/a/4485531/517561](https://stackoverflow.com/a/4485531/517561)中，作者没有取消祝酒词，他们只是更改了文本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-02T16:58:29.127

取消您原来的`Toast`，设置一条新消息并再次显示该`Toast`消息。

```
Toast mytoast;
mytoast = Toast.makeText(this, "Hi Ho Jorgesys! ", Toast.LENGTH_LONG);
mytoast.show();
....
....
....
if(CancelToast){
  mytoast.cancel();  //cancelling old Toast!
  mytoast = Toast.makeText(this, "Same toast with another message.", Toast.LENGTH_LONG); //Setting a new message.
  mytoast.show(); //Show the new message!.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T08:52:02.103

您可以使用 toast.cancel() 显示下一个吐司。

# javascript - 使用 Coffeescript 和 CodeKit 在不同的文件中设置 Backbone 应用程序

> ID：10878581
> 
> 赞同：0
> 
> 时间：2012-06-04T08:45:57.753
> 
> 标签：javascript, backbone.js, coffeescript

我通过 CodeKit 工具将 Backbone.js 与 Coffeescript 一起使用。

到目前为止，我一直将所有内容都包含在一个文件中。但我想开始将它们分开。在进入 AMD 和 require.js 之前，我想尝试一些简单的东西。

例如，我想遵循中的建议

[Backbone.js：将视图、集合、模型分离到不同的 js 文件中，它们无法相互识别](https://stackoverflow.com/questions/10646451/backbone-jsseparate-the-view-collection-model-to-different-js-file-they-could)

而且由于我使用的 CodeKit 可以选择“附加”（或导入）其他人引用的 JS 文件，所以我认为这可以很好地将所有内容放入一个文件中。

所以这就是我想要实现的目标。

*   在单独的文件“View.coffee”中查看文件
*   单独文件“App.coffee”中的路由文件

并通过将视图文件“导入”到 App.coffee 中，通过 CodeKit 将所有内容编译到 App.js 中。

在我看来，我有以下

```
$ ->

  class View extends Backbone.View

    el:"#view"

    initialize: =>
      console.log app 
```

在我的控制器中，我有

```
$ ->

  class App extends Backbone.Router

    view : new View

    routes:
      "" : "home"

    search: =>
      console.log "hi"

  app = new App
  Backbone.history.start() 
```

现在在我的 CodeKit 中，我将“View.coffee”导入“App.coffee”，以便将它们编译成一个文件。

![](../Images/c66c260d83dc6c9d334f036d24a33f5a.png)

当我运行它时，我得到“视图”未定义。

现在，我在这里尝试了各种组合。例如，我尝试将“window.View”和“window.App”分配到全局名称空间，但这并不成功。我可以让 App 可以读取 View，但我无法让 View 读取 App。

设置它的最佳方法是什么？还是我做对了？还附加了最终的 JS 输出。

```
// Generated by CoffeeScript 1.3.1
(function() {
  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor; child.__super__ = parent.prototype; return child; };

  $(function() {
    var App, app;
    App = (function(_super) {

      __extends(App, _super);

      function App() {
        this.search = __bind(this.search, this);
        return App.__super__.constructor.apply(this, arguments);
      }

      App.prototype.view = new View;

      App.prototype.routes = {
        "": "home"
      };

      App.prototype.search = function() {
        return console.log("hi");
      };

      return App;

    })(Backbone.Router);
    app = new App;
    return Backbone.history.start();
  });

  /* -------------------------------------------- 
       Begin View.coffee 
  --------------------------------------------
  */

  $(function() {
    var View;
    return View = (function(_super) {

      __extends(View, _super);

      function View() {
        this.initialize = __bind(this.initialize, this);
        return View.__super__.constructor.apply(this, arguments);
      }

      View.prototype.el = "#view";

      View.prototype.initialize = function() {
        return console.log(app);
      };

      return View;

    })(Backbone.View);
  });

}).call(this); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T15:16:46.030

当你这样做时：

```
$ ->
  class View extends Backbone.View
    #... 
```

You're wrapping your `View` definition inside a function (actually two functions: the `$()` call and the usual CoffeeScript wrapper function) so the `View` variable is not accessible to anything outside that function. Even if CodeKit is avoiding the outer CoffeeScript wrapper function, you still have the `$()` function that you're adding. The result is that your classes can't see each other.

The easiest solution is to declare an application level globally accessible namespace:

```
window.app = { } 
```

and then declare your classes inside that namespace:

```
$ ->
  class app.View extends Backbone.View
    #... 
```

Then you can refer to that view as `app.View` where ever you need it. Similar things will apply to your routers, models, and support classes.

# c - C 和 D 中相同的_exact_代码给出不同的结果——为什么？

> ID：10878586
> 
> 赞同：3
> 
> 时间：2012-06-04T08:46:23.737
> 
> 标签：c, windows, winapi, visual-c++, d

当我运行这个 C 代码时：

```
// Get rid of the CRT and stuff; we don't need it
#pragma comment(linker, "/Entry:mainCRTStartup")
#pragma comment(linker, "/NoDefaultLib:msvcrt.lib")
#pragma comment(linker, "/NoDefaultLib:kernel32.lib")
#pragma comment(linker, "/NoDefaultLib:ntdll.lib")
#pragma comment(linker, "/Subsystem:Console")

#pragma comment(lib, "user32.lib")

#include <windows.h>

int mainCRTStartup()
{
    MSG msg;
    HWND hWndParent;
    WNDCLASS wndClass =
    {
        0, &DefWindowProc, 0, 0, NULL, NULL, LoadCursor(NULL, IDC_ARROW),
        GetSysColorBrush(COLOR_3DFACE), NULL, TEXT("MyClass")
    };
    RegisterClass(&wndClass);
    hWndParent = CreateWindow(
        wndClass.lpszClassName, NULL, WS_VISIBLE | WS_OVERLAPPEDWINDOW,
        0, 0, 33, 100, NULL, NULL, NULL, NULL);
    CreateWindow(TEXT("Button"), wndClass.lpszClassName,
        WS_VISIBLE | WS_CHILD | BS_GROUPBOX,
        5, 5, 100, 50, hWndParent, NULL, NULL, NULL);
    while (GetMessage(&msg, hWndParent, 0, 0) > 0)
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    return 0;
} 
```

我得到：

![](../Images/95ee7f7a8778a7f617a0c33a12368e2a.png)

但是当我运行**等效**的D 代码时：

```
// Again, get rid of the runtime
pragma(startaddress, mainCRTStartup);
pragma(lib, "dmd_win32.lib");

import win32.windows;

int mainCRTStartup()
{
    MSG msg;
    HWND hWndParent;
    WNDCLASS wndClass =
    {
        0, &DefWindowProc, 0, 0, NULL, NULL, LoadCursor(NULL, IDC_ARROW),
        GetSysColorBrush(COLOR_3DFACE), NULL, "MyClass"
    };
    RegisterClass(&wndClass);
    hWndParent = CreateWindow(
        wndClass.lpszClassName, NULL, WS_VISIBLE | WS_OVERLAPPEDWINDOW,
        0, 0, 33, 100, NULL, NULL, NULL, NULL);
    CreateWindow("Button", wndClass.lpszClassName,
        WS_VISIBLE | WS_CHILD | BS_GROUPBOX,
        5, 5, 100, 50, hWndParent, NULL, NULL, NULL);
    while (GetMessage(&msg, hWndParent, 0, 0) > 0)
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    return 0;
} 
```

我得到：

![](../Images/b905b2f1d3efcb26f8d08c286fa6a42a.png)

我很*困惑*......什么*可能*导致这个白色背景？！

### 编辑：

我不确定它实际上是一个库错误......我刚刚删除了依赖项（并且我没有看到代码有任何问题），但问题仍然存在：

```
version = Unicode;
extern(Windows):
alias void* HWND, HMENU, HINSTANCE, HCURSOR, HBRUSH, HICON;
alias ushort ATOM, WORD;
alias uint UINT, DWORD;
alias int[2] POINT;
alias int BOOL;
alias int LONG;
alias size_t WPARAM, LPARAM, LRESULT;
alias char* LPSTR;
alias const(char)* LPCSTR;
alias wchar* LPWSTR;
alias const(wchar)* LPCWSTR;
version(Unicode)
{
    alias LPCWSTR LPCTSTR;
    alias LPWSTR LPTSTR;
    alias GetMessageW GetMessage;
    alias CreateWindowExW CreateWindowEx;
    alias DispatchMessageW DispatchMessage;
    alias DefWindowProcW DefWindowProc;
    alias LoadCursorW LoadCursor;
    alias RegisterClassW RegisterClass;
    alias WNDCLASSW WNDCLASS;
}
else
{
    alias LPCSTR LPCTSTR;
    alias LPSTR LPTSTR;
    alias GetMessageA GetMessage;
    alias CreateWindowExA CreateWindowEx;
    alias DispatchMessageA DispatchMessage;
    alias DefWindowProcA DefWindowProc;
    alias LoadCursorA LoadCursor;
    alias RegisterClassA RegisterClass;
    alias WNDCLASSA WNDCLASS;
}
LPCTSTR MAKEINTATOM(ATOM atom) { return cast(LPCTSTR)atom; }
ATOM RegisterClassA(WNDCLASSA*);
ATOM RegisterClassW(WNDCLASSW*);
HCURSOR LoadCursorA(HINSTANCE, LPCSTR);
HCURSOR LoadCursorW(HINSTANCE, LPCWSTR);
LRESULT DefWindowProcA(HWND, UINT, WPARAM, LPARAM);
LRESULT DefWindowProcW(HWND, UINT, WPARAM, LPARAM);
BOOL GetMessageA(const(MSG)*, HWND, UINT, UINT);
BOOL GetMessageW(const(MSG)*, HWND, UINT, UINT);
LONG DispatchMessageA(const(MSG)*);
LONG DispatchMessageW(const(MSG)*);
BOOL TranslateMessage(const(MSG)*);
HWND CreateWindowExA(int, LPCSTR, LPCSTR, DWORD, int, int, int, int, HWND, HMENU, HINSTANCE, void*);
HWND CreateWindowExW(int, LPCWSTR, LPCWSTR, DWORD, int, int, int, int, HWND, HMENU, HINSTANCE, void*);
HBRUSH GetSysColorBrush(int);
alias LRESULT function(HWND, UINT, WPARAM, LPARAM) WNDPROC;
enum
{
    NULL = null,
    COLOR_3DFACE = 15,
    BS_GROUPBOX = 7,
}
const LPCTSTR IDC_ARROW = cast(LPCTSTR)32512;
struct MSG
{
    HWND hwnd;
    UINT message;
    WPARAM wParam;
    LPARAM lParam;
    DWORD  time;
    POINT  pt;
}
struct WNDCLASSA
{
    UINT      style;
    WNDPROC   lpfnWndProc;
    int       cbClsExtra;
    int       cbWndExtra;
    HINSTANCE hInstance;
    HICON     hIcon;
    HCURSOR   hCursor;
    HBRUSH    hbrBackground;
    LPCSTR   lpszMenuName;
    LPCSTR   lpszClassName;
}
struct WNDCLASSW
{
    UINT      style;
    WNDPROC   lpfnWndProc;
    int       cbClsExtra;
    int       cbWndExtra;
    HINSTANCE hInstance;
    HICON     hIcon;
    HCURSOR   hCursor;
    HBRUSH    hbrBackground;
    LPCWSTR   lpszMenuName;
    LPCWSTR   lpszClassName;
}
enum
{
    WS_OVERLAPPED       = 0,
    WS_TILED            = WS_OVERLAPPED,
    WS_MAXIMIZEBOX      = 0x00010000,
    WS_MINIMIZEBOX      = 0x00020000,
    WS_TABSTOP          = 0x00010000,
    WS_GROUP            = 0x00020000,
    WS_THICKFRAME       = 0x00040000,
    WS_SIZEBOX          = WS_THICKFRAME,
    WS_SYSMENU          = 0x00080000,
    WS_HSCROLL          = 0x00100000,
    WS_VSCROLL          = 0x00200000,
    WS_DLGFRAME         = 0x00400000,
    WS_BORDER           = 0x00800000,
    WS_CAPTION          = 0x00c00000,
    WS_OVERLAPPEDWINDOW = WS_OVERLAPPED|WS_CAPTION|WS_SYSMENU|WS_THICKFRAME|WS_MINIMIZEBOX|WS_MAXIMIZEBOX,
    WS_TILEDWINDOW      = WS_OVERLAPPEDWINDOW,
    WS_MAXIMIZE         = 0x01000000,
    WS_CLIPCHILDREN     = 0x02000000,
    WS_CLIPSIBLINGS     = 0x04000000,
    WS_DISABLED         = 0x08000000,
    WS_VISIBLE          = 0x10000000,
    WS_MINIMIZE         = 0x20000000,
    WS_ICONIC           = WS_MINIMIZE,
    WS_CHILD            = 0x40000000,
    WS_CHILDWINDOW      = 0x40000000,
    WS_POPUP            = 0x80000000,
    WS_POPUPWINDOW      = WS_POPUP|WS_BORDER|WS_SYSMENU,
}

pragma(startaddress, mainCRTStartup);

int mainCRTStartup()
{
    MSG msg;
    HWND hWndParent;
    WNDCLASS wndClass =
    {
        0, &DefWindowProc, 0, 0, NULL, NULL, LoadCursor(NULL, IDC_ARROW),
        GetSysColorBrush(COLOR_3DFACE), NULL, "MyClass"
    };
    ATOM atom = RegisterClass(&wndClass);
    hWndParent = CreateWindowEx(
        0, wndClass.lpszClassName, NULL, WS_VISIBLE | WS_OVERLAPPEDWINDOW,
        0, 0, 33, 100, NULL, NULL, NULL, NULL);
    CreateWindowEx(0, "Button", wndClass.lpszClassName,
        WS_VISIBLE | WS_CHILD | BS_GROUPBOX,
        5, 5, 100, 50, hWndParent, NULL, NULL, NULL);
    while (GetMessage(&msg, hWndParent, 0, 0) > 0)
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    return 0;
} 
```

要么我做错了，要么是编译器错误……但即使是编译器错误，我仍然不知道这样的事情是*如何*发生的，因为它需要调用非常特定的 API！想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T17:52:20.557

这是子系统版本问题（链接器责任）。添加`-L/SUBSYSTEM:CONSOLE:4.0`到*dmd*命令行以修复**MyClass**背景颜色。Walter 喜欢旧系统，因此默认*的 OPTLINK*子系统版本是 3.10。看起来*微软的* `link`9.0 使用 5.0 作为默认子系统版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T11:33:28.600

Linux的家伙在这里，所以我会尽力而为：

它看起来像图书馆本身的问题。我猜你是从这里得到的吗？

[https://github.com/AndrejMitrovic/DWinProgramming](https://github.com/AndrejMitrovic/DWinProgramming)

在这种情况下，解决方案是联系编写您正在使用的 dmd win32 库的人。如果您从源代码编译它们，那么肯定有办法联系该人。看来您发现了一个错误！

PS：如果您从源代码编译库，还有另一种可能性。您可能有一个不同的编译参数或标志，并导致差异。此外，这可能是与库依赖项的兼容性问题。在这种情况下，答案仍然是联系库的开发人员。他可能会要求您提供一些编译输出。

# caching - 强制将内容更新到云端，而不使用无效

> ID：10878588
> 
> 赞同：3
> 
> 时间：2012-06-04T08:46:35.833
> 
> 标签：caching, amazon-web-services, cdn, amazon-cloudfront

我正在使用云前端作为 CDN。有没有办法强制更新内容？我的原始服务器上有一个文件，我已使用新版本（同名，新日期时间戳）进行了更新。但是当我在云端检查它时，它仍然是旧文件。

我已经看到[这个线程](https://stackoverflow.com/questions/1268158/force-cloudfront-distribution-file-update)建议一种方法无效，但我不想这样做，因为我认为这是一个开销，并且一次最多可以运行 3 个无效请求。我读到 cloudfront 正在[使用查询参数支持动态内容](http://aws.typepad.com/aws/2012/05/amazon-cloudfront-support-for-dynamic-content.html)，我可以利用它以某种方式强制 cloudfront 从分发服务器中提取最新内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T23:28:47.617

第一个是您提到的显式调用 invalidate()。它们确实有 3 个无效请求限制，但每个请求最多可以包含 1000 个对象，这在大多数情况下已经足够了。根据文档，这通常需要 10 - 15 分钟，但我对此的经验相当不稳定（在某些情况下可能需要长达 30 分钟）。

动态参数的另一种方法绝对是可行的，这是一种首选方法。您需要在链接末尾附加一个时间戳参数。就像是：

`http://www.example.com/img/logo.png?timestamp=123456789`

更新 logo.png 后，将时间戳更改为新的：

`http://www.example.com/img/logo.png?timestamp=223456789`

CloudFront 将能够区分这两者并选择正确的一个。

所以是的，我相信你的分析是正确的。

# javascript - 如何保持 HTML 页面处于活动状态

> ID：10878590
> 
> 赞同：2
> 
> 时间：2012-06-04T08:46:44.703
> 
> 标签：javascript, html, flash

我们有以下问题：

我们正在为视频通话开发基于浏览器的 Flash 应用程序。该应用程序的问题在于，当您与某人交谈时，您的 PC/Mac 的显示开始淡出，几分钟后屏幕保护程序出现（如果存在）。

如何保持页面处于活动状态，使 PC/Mac 不会进入屏幕保护模式？

这应该只使用*JavaScript*来完成，因为应用程序的 flash 部分是基于*JavaScript*的 API，我们**无法**直接访问*flash*。

有任何想法吗？

**编辑：**我可以在那个页面上放一个小而隐形的Flash APP，让机器不睡觉吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-11T11:14:45.023

您可以使用 NoSleep.js [https://github.com/richtr/NoSleep.js](https://github.com/richtr/NoSleep.js)

在所有 Android 和 iOS 网络浏览器中防止显示器休眠并启用唤醒锁定。

# c# - 使用 C# 驱动程序将新字段插入 MongoDB 中的现有集合（许多文档）

> ID：10878595
> 
> 赞同：5
> 
> 时间：2012-06-04T08:47:16.950
> 
> 标签：c#, mongodb

如何使用 C# `Update`API 将新字段插入 MongoDB 集合？

我正在尝试做的事情：我有一个`HomePhoneId`字段需要插入到我的`People`集合中的每个文档中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T10:08:31.723

以下代码应该可以工作：

```
collection.Update(Query.Null, Update.Set("HomePhoneId", "some value"), UpdateFlags.Multi) 
```

顺便说一句，您可以[在这里查看驱动程序文档。](https://mongodb.github.io/mongo-csharp-driver/2.0/getting_started/quick_tour/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-01T14:51:30.753

以下代码应该可以工作：

```
 var filterDefinition = Builders<Models.Doctor>.Filter.Where(w => w.Name!=null);
        var updateDefinition = Builders<Models.Doctor>.Update
            .Set(d => d.IsApproved, value);
        _doctorRepository.Collection.UpdateMany(filterDefinition, updateDefinition); 
```

# c# - System.IO.FileNotFoundException：部署应用程序时无法加载文件或程序集“X”或其依赖项之一

> ID：10878602
> 
> 赞同：44
> 
> 时间：2012-06-04T08:47:41.887
> 
> 标签：c#, .net, deployment, .net-assembly, managed-c++

我在部署应用程序时遇到了一个奇怪的问题，该应用程序引用了一个用托管 c++ 编写的程序集。

我创建了一个程序集 X，对其进行编译并在一个名为 Starter 的 exe 文件中引用它。

Starter.exe 在本地机器上正常启动。但是，当我将启动调试文件夹的所有内容复制到虚拟机并尝试在那里启动它时，它会崩溃并出现以下异常：

```
Unhandled Exception: System.IO.FileNotFoundException: Could not load file or 
assembly 'X' or one of its dependencies. The specified module could not be found. 
```

这对我来说没有任何意义，因为 X 与 Starter.exe 位于同一文件夹中。

什么可能导致这个问题？

*更新*

我检查了目标机器上 Reflector 的依赖关系，它能够找到所有这些文件。

我还将所有项目的配置更改为 x86/win32。

*更新*

以下是来自 Fusion Log 的日志（位置：C:\FusionLog\Default\Starter.exe\X，Version=1.0.4538.22813，Culture=neutral，PublicKeyToken=null.HTM）：

```
*** Assembly Binder Log Entry  (6/4/2012 @ 1:56:13 PM) ***

The operation was successful.
Bind result: hr = 0x0\. The operation completed successfully.

Assembly manager loaded from:  C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\clr.dll
Running under executable  C:\Documents and Settings\Administrator\Desktop\tmp\k;k\Starter.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = MENKAUR-7683827\Administrator
LOG: DisplayName = X, Version=1.0.4538.22813, Culture=neutral, PublicKeyToken=null
 (Fully-specified)
LOG: Appbase = file:///C:/Documents and Settings/Administrator/Desktop/tmp/k;k/
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = Starter.exe
Calling assembly : Starter, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Documents and Settings\Administrator\Desktop\tmp\k;k\Starter.exe.Config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Documents and Settings/Administrator/Desktop/tmp/k;k/X.DLL.
LOG: Assembly download was successful. Attempting setup of file: C:\Documents and Settings\Administrator\Desktop\tmp\k;k\X.dll
LOG: Entering run-from-source setup phase.
LOG: Assembly Name is: X, Version=1.0.4538.22813, Culture=neutral, PublicKeyToken=null
LOG: Binding succeeds. Returns assembly from C:\Documents and Settings\Administrator\Desktop\tmp\k;k\X.dll.
LOG: Assembly is loaded in default load context. 
```

唯一的错误在 C:\FusionLog\NativeImage\Starter.exe\ 目录中：

```
*** Assembly Binder Log Entry  (6/4/2012 @ 1:56:13 PM) ***

The operation failed.
Bind result: hr = 0x80070002\. The system cannot find the file specified.

Assembly manager loaded from:  C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\clr.dll
Running under executable  C:\Documents and Settings\Administrator\Desktop\tmp\k;k\Starter.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = MENKAUR-7683827\Administrator
LOG: DisplayName = BookmarkWiz.Kernel, Version=1.0.4538.22813, Culture=neutral, PublicKeyToken=null
 (Fully-specified)
LOG: Appbase = file:///C:/Documents and Settings/Administrator/Desktop/tmp/k;k/
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = Starter.exe
Calling assembly : Starter, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: Start binding of native image X, Version=1.0.4538.22813, Culture=neutral, PublicKeyToken=null.
WRN: No matching native image found.
LOG: IL assembly loaded from C:\Documents and Settings\Administrator\Desktop\tmp\k;k\X.dll. 
```

我无法对程序集进行签名，因为它引用了其他几个未签名的程序集

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-04T08:50:43.023

> ...无法加载文件或程序集“X”或其**依赖项之一** ...

很可能它无法加载另一个依赖项。

您可以尝试使用依赖遍历器检查依赖关系。

即：[https ://www.dependencywalker.com/](https://www.dependencywalker.com/)

还要检查您的构建配置（x86 / 64）

编辑：当我从“不受信任的”网络共享复制 zip 中的 dll 时，我也遇到过这个问题。该文件已被 Windows 锁定，并引发了 FileNotFoundException。

请参阅此处：[检测到的来自 Internet 并被 CASPOL “阻止”的 DLL](https://stackoverflow.com/questions/7326371/detected-dlls-that-are-from-the-internet-and-blocked-by-caspol)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-13T11:50:00.913

我通过重命名 DLL 解决了这个问题。DLL 在上传到其共享位置时已手动重命名（版本号附加到文件名）。从下载的文件中删除版本号解决了该问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-06-15T13:23:36.290

我遇到过同样的问题。对我来说，它有助于删除项目文件夹中的 .vs 目录。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-31T19:16:56.957

当我尝试安装 Windows 服务时，我也遇到了同样的问题，在我的情况下，我设法通过删除服务 .exe 的文件夹路径中的空格来解决这个问题，下面是在命令提示符下为我工作的命令

`cd C:\Windows\Microsoft.NET\Framework\v4.0.30319`

按 ENTER 更改工作目录

`InstallUtil.exe C:\MyService\Release\ReminderService.exe`

按 ENTER

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-07T13:31:36.257

对我来说，我从 Windows 资源管理器中启动了该应用程序（通过双击它）。然后它立即崩溃了。

然后我打开`Event Viewer`窗口并查看`Application`，它显示了错误的完整堆栈跟踪。堆栈跟踪显示与位图或图像的关系。后来发现是因为找不到应用图标

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2020-12-13T21:48:06.317

伙计们，我阅读了关于这个主题的每个论坛我仍然有问题（试图从 git 进行项目）

经过 4 小时和大量的咒骂后，我自己解决了这个问题，只是通过更改项目属性中的目标框架设置（右键单击项目-> 属性）-> 应用程序并将目标框架从 .net core 3.0 更改为 .net 5.0 我希望它会帮助任何人

快乐编码 gl hf 书呆子

# perl - 使用 WWW::Selenium 验证会话

> ID：10878604
> 
> 赞同：0
> 
> 时间：2012-06-04T08:47:49.547
> 
> 标签：perl, session, selenium, automation

我正在使用自动化网站`WWW::Selenium`，但我遇到了问题。代码是这样编写的，必须输入登录凭据然后提交。

但有时，用户会话已经登录，导致脚本损坏。

我可以通过哪些方式检查用户会话是否已经处于活动状态（已登录）？我知道 cookie 是保存会话的一种方式。

但我尝试清除 cookie，但用户下次仍然登录。

请给我一些输入来验证会话。

**编辑**

我试过这个：

```
if( $sel->is_element_present('id=link-logout') ) 
```

但它总是返回错误。希望这是正确的方法，我必须检查布尔值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:09:22.783

即使用户已经登录，该站点是否有提供登录表单的 url？

如果没有，它是否有您可以检测和关注的注销按钮或链接？

Selenium 无法为您找到一些神奇的解决方案；你需要弄清楚当你手动操作浏览器时什么会起作用，然后让 Selenium 去做。

# c++ - 为什么不允许在类中专门化成员函数模板？

> ID：10878611
> 
> 赞同：0
> 
> 时间：2012-06-04T08:48:23.370
> 
> 标签：c++, templates

当我尝试在类定义/声明中专门化公共成员函数模板时：

```
#include <iostream>

class surfaceMesh 
{
    public:
        // Uncomment for Version 0 and 1
        class AREA_AVERAGE {};
        class ANGLE_AVERAGE {};  

        template<class Average>
        void vertexNormals() {}

        // Uncomment: Version 0
        //template<>
        //void vertexNormals<AREA_AVERAGE> ()
        //{
            //std::cout << "AREA_AVERAGE" << std::endl;
        //}

        //template<>
        //void vertexNormals<ANGLE_AVERAGE> ()
        //{
            //std::cout << "ANGLE_AVERAGE" << std::endl;
        //}

};

// Uncommend for version 1 
template<>
void surfaceMesh::vertexNormals<surfaceMesh::AREA_AVERAGE> ()
{
    std::cout << "AREA_AVERAGE" << std::endl;
};

template<>
void surfaceMesh::vertexNormals<surfaceMesh::ANGLE_AVERAGE> ()
{
    std::cout << "ANGLE_AVERAGE" << std::endl;
};

int main()
{
    surfaceMesh m;

    m.vertexNormals<surfaceMesh::AREA_AVERAGE>();
    m.vertexNormals<surfaceMesh::ANGLE_AVERAGE>();

    return 0;
} 
```

对于版本 0，错误是：

```
main.cpp:19: error: template-id ‘vertexNormals<mesh::AREA_AVERAGE>’ in declaration of primary template
main.cpp:24: error: explicit specialization in non-namespace scope ‘class mesh’
main.cpp:25: error: template-id ‘vertexNormals<mesh::ANGLE_AVERAGE>’ in declaration of primary template
main.cpp:25: error: ‘void mesh::vertexNormals()’ cannot be overloaded
main.cpp:19: error: with ‘void mesh::vertexNormals()’ 
```

版本 1 编译并运行。当然，通常我将类声明和定义分开，但我真的很想知道为什么会发生这种情况。

另外，这是专门化接口的好方法吗？另一种选择是重载函数vertexNormals以获取AREA_AVERAGE或ANGLE_AVERAGE的对象，但这只是一种告诉我将使用哪种函数的类型，它不应该被实例化，所以使用模板'感觉'就像一个正确的选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T08:57:16.320

> 为什么不允许在类中专门化成员函数模板？

因为这是 C++ 标准制定的规则。

至于你想要什么，更好的方法是使用函数重载而不是函数特化：

```
class surfaceMesh 
{
    public:
        // Uncomment for Version 0 and 1
        class AREA_AVERAGE {};
        class ANGLE_AVERAGE {};  

        template<class Average>
        void vertexNormals() 
        {
           //invoke the function overload
           vertexNormals(static_cast<Average*>(0));
        }
private:
        //make the overloads private, so client will not call them!
        void vertexNormals(AREA_AVERAGE *)
        {
           std::cout << "AREA_AVERAGE" << std::endl;
        }
        void vertexNormals(ANGLE_AVERAGE*)
        {
           std::cout << "ANGLE_AVERAGE " << std::endl;
        }
}; 
```

表达式的*类型*`static_cast<Average*>(0)`有助于编译器选择正确的重载。

# c - 将两个 8 位 uint 转换为一个 12 位 uint

> ID：10878612
> 
> 赞同：0
> 
> 时间：2012-06-04T08:48:28.283
> 
> 标签：c, bit-manipulation, bit

我正在从微控制器读取两个寄存器。一个有 4 位 MSB（前 4 位有一些其他的东西）和另一个 8 位 LSB。我想将其转换为一个 12 位 uint（准确地说是 16 位）。到目前为止，我是这样的：

```
UINT16 x;
UINT8 RegValue = 0;
UINT8 RegValue1 = 0;

ReadRegister(Register01, &RegValue1);
ReadRegister(Register02, &RegValue2);

x = RegValue1 & 0x000F;
x  = x << 8;
x = x | RegValue2 & 0x00FF; 
```

有没有更好的方法来做到这一点？

/ ***更准确地说，ReadRegister 是与另一个 ADC 的 I2C 通信。Register01 和 Register02 是不同的地址。RegValue1 是 8 位，但只需要 4 个 LSB 并连接到 RegValue（RegValue1 的 4-LSB 和 RegValue 的所有 8 位）。*/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:06:49.843

如果你知道你的机器的字节序，你可以`x`像这样直接读取字节：

```
ReadRegister(Register01, (UINT8*)&x + 1);
ReadRegister(Register02, (UINT8*)&x);
x &= 0xfff; 
```

请注意，这不是可移植的，性能增益（如果有的话）可能很小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:04:16.483

由于`RegValue & 0x00FF`RegValue 已经是 8 位，因此不需要掩码。

将其分解为三个语句可能有助于清晰，但这个表达式可能很简单，可以在一个语句中实现：

```
x = ((RegValue1 & 0x0Fu) << 8u) | RegValue ; 
```

使用无符号文字 (0x0Fu) 几乎没有区别，但强调我们正在处理无符号 8 位数据。它实际上是一个`unsigned int`只有两位数字的偶数，但这可能再次向读者强调我们只处理 8 位，并且纯粹是风格而不是语义。在 C 中没有 8 位文字常量类型（尽管在 C++`'\x0f'`中有 type `char`）。您可以强制执行更好的类型协议，如下所示：

```
#define LS4BITMASK ((UINT8)0x0fu)

x = ((RegValue1 & LS4BITMASK) << 8u) | RegValue ; 
```

宏只是避免表达式中的重复和混乱。

就性能或实际生成的代码而言，以上任何一项都不一定比您的原始代码“更好”，并且很大程度上取决于偏好或本地编码标准或实践。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T10:12:03.687

如果寄存器彼此相邻，则它们很可能在目标字节序方面也处于正确的顺序。在这种情况下，它们可以作为单个 16 位寄存器读取并相应地屏蔽，假设这`Register01`是较低的地址值：

```
ReadRegister16(Register01, &x ) ;
x &= 0x0fffu ; 
```

当然我在这里发明了这个`ReadRegister16()`函数，但是如果寄存器是内存映射的，并且`Register01`只是一个地址，那么这可能只是：

```
UINT16 x = *Register01 ;
x &= 0x0fffu ; 
```

# linux - sendmsg 失败，错误代码 9

> ID：10878614
> 
> 赞同：2
> 
> 时间：2012-06-04T08:48:44.740
> 
> 标签：linux, ldap

在 Linux 中运行 ldapsearch 实用程序时，“sendmsg”函数失败并显示错误代码 9。错误代码 9 代表什么？手册页没有提供有关错误代码的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T18:08:55.727

您可以在此页面中找到所有错误代码。[http://www.virtsync.com/c-error-codes-include-errno](http://www.virtsync.com/c-error-codes-include-errno)。目前我正在采取相同的结果。“send”方法有效，但 sendmsg 返回 -1 且 errno 为 9，这意味着文件编号错误。我仍然不知道问题是什么。

```
#define EBADF        9  /* Bad file number */ 
```

# algorithm - 涉及国际象棋的图算法：k 步中的可能路径

> ID：10878617
> 
> 赞同：5
> 
> 时间：2012-06-04T08:49:11.817
> 
> 标签：algorithm, graph-algorithm, chess

我正在尝试解决涉及国际象棋的算法问题。

假设我在 A8 中有一个国王，并且想将其移动到 H1（仅允许移动）。我怎样才能找出有多少种可能性（路径）正在做出任何给定的 k 移动？（例如，如果我想用 15 步将国王从 A8 移动到 H1，有多少条路径/可能性？）

一个简单的解决方案是将其视为图形问题，并使用任何标准寻路算法将每一步计为成本 1。因此，假设我想在 10 步内将我的国王从 A8 移动到 H1。我会简单地搜索总和为 10 的所有路径。

我的问题是，是否还有其他更聪明、更有效的方法来做到这一点？我还想知道，是否可以找到更“数学”和更直接的方法来找到这个数字，而不是那么“算法”和“类似蛮力”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T09:28:48.450

您可以使用邻接矩阵。如果将这样的矩阵与自身相乘，则得到从点到点的路径数量。例子：

图表：完整的 K3 图表：A<->B<->C<->A

矩阵：

```
[0 ; 1 ; 1]
[1 ; 0 ; 1]
[1 ; 1 ; 0] 
```

长度为 2 的路径：M * M

```
[2 ; 1 ; 1]
[1 ; 2 ; 1]
[1 ; 1 ; 2] 
```

长度 3 将是 M * M * M

```
[2 ; 3 ; 3]
[3 ; 2 ; 3]
[3 ; 3 ; 2] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T13:03:11.977

这是一个直接的 O(N^3) 动态规划问题。

只需按如下方式分配 3D 数组：

令 Z[x][y][k] 为从船上位置 (x,y) 到达目的地的 k 步移动次数。

基本情况是：

```
foreach x in 0 to 7,
   foreach y in 0 to 7,
       Z[x][y][0] = 0 // forall x,y: 0 ways to reach H1 from
                      // anywhere else with 0 steps

Z[7][7][0] = 1 // 1 way to reach H1 from H1 with 0 steps 
```

递归情况是：

```
foreach k in 1 to K,
   foreach x in 0 to 7,
      foreach y in 0 to 7,
          Z[x][y][k+1] = Z[x-1][y][k]
              + Z[x+1][y][k]
              + Z[x][y-1][k]
              + Z[x][y+1][k]
              + ...; // only include positions in
                     // the summation that are on the board
                     // and that a king can make 
```

那么你的答案是：

```
return Z[0][0][K]; // number of ways to reach H1(7,7) from A8(0,0) with K moves 
```

（在 O(n^2) 中有一种更快的方法来做到这一点，方法是将移动分解为两组水平和垂直移动，然后将它们组合并乘以交错的数量。）

请参阅此相关问题和答案：[No of ways to walk M steps in a grid](https://stackoverflow.com/questions/10812706/no-of-ways-to-walk-m-steps-in-a-grid)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T08:52:22.370

```
.......E <-end
........
........
........
........
........
........
S....... <-start 
```

不幸的是，您不能使用“任何标准路径查找算法”，因为您的路径可能不是最短路径。您必须专门使用考虑所有路径（例如深度优先或广度优先）的简单搜索。

但是，由于您不关心*如何*获得一个图块，您可以使用一种称为*动态编程*的技术。*对于每个位置 (i,j)，在n*次移动中到达那里的方式的数量（我们称之为*方式[i,j] (n)*）是：

*方式[i,j] (n) = 方式[i-1,j] (n-1) + 方式[i+1,j] (n-1) + 方式[i,j-1] (n-1) + 方式[i,j+1] (n-1) + 方式[i+1,j+1] (n-1) + 方式[i-1,j+1] (n-1) + 方式[i+1,j-1] (n-1) + 方式[i -1,j-1] (n-1)*

也就是说，国王可以在 1 步内从任何相邻的方格移动：

*方式[i,j] (n) = 和[邻居 (i,j)] (方式[邻居](n-1))*

因此你会这样做，例如在 python 中：

```
SIZE = 8

cache = {}
def ways(pos, n):
    r,c = pos  # row,column
    if not (0<=r<SIZE and 0<=c<SIZE):
        # off edge of board: no ways to get here
        return 0
    elif n==0:
        # starting position: only one way to get here
        return 1 if (r,c)==(0,0) else 0
    else:
        args = (pos,n)
        if not args in cache:
            cache[args] = ways((r-1,c), n-1) + ways((r+1,c), n-1) + ways((r,c-1), n-1) + ways((r,c+1), n-1) + ways((r-1,c-1), n-1) + ways((r+1,c-1), n-1) + ways((r+1,c-1), n-1) + ways((r+1,c+1), n-1)
        return cache[args] 
```

演示：

```
>>> ways((7,7), 15)
1074445298 
```

上述技术称为记忆化，比动态编程更容易编写，因为你不需要真正考虑你做事的顺序。您可以看到缓存随着我们执行一系列越来越大的查询而增长：

```
>>> cache
{}
>>> ways((1,0), 1)
1
>>> cache
{((1, 0), 1): 1}
>>> ways((1,1), 2)
2
>>> cache
{((0, 1), 1): 1, ((1, 2), 1): 0, ((1, 0), 1): 1, ((0, 0), 1): 0, ((2, 0), 1): 0, ((2, 1), 1): 0, ((1, 1), 2): 2, ((2, 2), 1): 0}
>>> ways((2,1), 3)
5
>>> cache
{((1, 2), 1): 0, ((2, 3), 1): 0, ((2, 0), 2): 1, ((1, 1), 1): 1, ((3, 1), 1): 0, ((4, 0), 1): 0, ((1, 0), 1): 1, ((3, 0), 1): 0, ((0, 0), 1): 0, ((2, 0), 1): 0, ((2, 1), 1): 0, ((4, 1), 1): 0, ((2, 2), 2): 1, ((3, 3), 1): 0, ((0, 1), 1): 1, ((3, 0), 2): 0, ((3, 2), 2): 0, ((3, 2), 1): 0, ((1, 0), 2): 1, ((4, 2), 1): 0, ((4, 3), 1): 0, ((3, 1), 2): 0, ((1, 1), 2): 2, ((2, 2), 1): 0, ((2, 1), 3): 5} 
```

（在python中，也可以使用a `@cached`or`@memoized`装饰器来避免必须在最后一个`else:`块中编写整个代码。其他语言有其他方式可以自动执行memoization。）

以上是自上而下的方法。它有时会产生非常大的堆栈（您的堆栈会随着 增长`n`）。如果你想超级高效以避免不必要的工作，你可以做一个自下而上的方法，你模拟国王可能的所有位置，1步，2步，3步，......：

```
SIZE = 8
def ways(n):
    grid = [[0 for row in range(8)] for col in range(8)]
    grid[0][0] = 1

    def inGrid(r,c):            
        return all(0<=coord<SIZE for coord in (r,c))
    def adjacentSum(pos, grid):
        r,c = pos
        total = 0
        for neighbor in [(1,0),(1,1),(0,1),(-1,1),(-1,0),(-1,-1),(0,-1),(1,-1)]:
            delta_r,delta_c = neighbor
            (r2,c2) = (r+delta_r,c+delta_c)
            if inGrid(r2,c2):
                total += grid[r2][c2]
        return total

    for _ in range(n):
        grid = [[adjacentSum((r,c), grid) for r in range(8)] for c in range(8)]
        # careful: grid must be replaced atomically, not element-by-element

    from pprint import pprint
    pprint(grid)
    return grid 
```

演示：

```
>>> ways(0)
[[1, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0]]

>>> ways(1)
[[0, 1, 0, 0, 0, 0, 0, 0],
 [1, 1, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0]]

>>> ways(2)
[[3, 2, 2, 0, 0, 0, 0, 0],
 [2, 2, 2, 0, 0, 0, 0, 0],
 [2, 2, 1, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0, 0, 0, 0]]

>>> ways(3)
[[6,  11, 6, 4, 0, 0, 0, 0],
 [11, 16, 9, 5, 0, 0, 0, 0],
 [6,  9,  6, 3, 0, 0, 0, 0],
 [4,  5,  3, 1, 0, 0, 0, 0],
 [0,  0,  0, 0, 0, 0, 0, 0],
 [0,  0,  0, 0, 0, 0, 0, 0],
 [0,  0,  0, 0, 0, 0, 0, 0],
 [0,  0,  0, 0, 0, 0, 0, 0]]

>>> ways(4)
[[38, 48, 45, 20, 9,  0, 0, 0],
 [48, 64, 60, 28, 12, 0, 0, 0],
 [45, 60, 51, 24, 9,  0, 0, 0],
 [20, 28, 24, 12, 4,  0, 0, 0],
 [9,  12, 9,  4,  1,  0, 0, 0],
 [0,  0,  0,  0,  0,  0, 0, 0],
 [0,  0,  0,  0,  0,  0, 0, 0],
 [0,  0,  0,  0,  0,  0, 0, 0]] 
```

# c - 为什么返回值在c中环绕256

> ID：10878618
> 
> 赞同：1
> 
> 时间：2012-06-04T08:49:23.640
> 
> 标签：c, unix, return-value

> **可能重复：**
> [Linux/bash 中程序返回值的有效范围是多少？](https://stackoverflow.com/questions/8082953/what-is-the-valid-range-for-program-return-value-in-linux-bash)

这是一个简单的c程序：

```
#include <stdio.h>
int main(){
    int a=0, b=100;
    while(a<=b){
        printf("%d\n",a);
        a+=10;
    }
   return a;
} 
```

检查 linux 上的返回值会得到 110，这是预期的，因为程序中评估的最后一个表达式是将 110 分配给 a；但是当我用大于 256 的值替换 b=100 时，说 b=260; 返回值为 14 而不是预期的 270。当 main 应该返回范围远大于 256 的整数时，为什么返回值会环绕 256？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T08:54:36.470

不幸的是，在基于 Unix 的系统中就是这种情况。`main`即使您将返回类型指定为 ，也无法返回 >255 的值`int`。[在这里](http://en.wikipedia.org/wiki/Exit_status#Unix)阅读。

Windows 在它使用 32 位有符号整数作为退出代码的意义上更宽容

此外，您不能假设返回值始终是最后一个评估的表达式的值。如果没有显式`return`声明，则如何推断返回值取决于架构。例如，[在 ARM 系统上](http://msdn.microsoft.com/en-us/library/ms881426.aspx)，它的值在`R0`（或`R0+R1`有时）寄存器中，而在`x86`系统上，它的值是`EAX`寄存器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T08:52:22.217

不仅您没有指定返回类型，而且还缺少 return 语句。您不返回任何内容，因此程序返回的内容完全是随机的，无论函数退出时相关寄存器/内存位置发生了什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T09:03:17.987

从 POSIX 页面：

> status 的值可以是 0、EXIT_SUCCESS、EXIT_FAILURE、[CX] 或任何其他值，尽管只有最低有效 8 位（即 status & 0377）可供等待的父进程使用。

[http://pubs.opengroup.org/onlinepubs/000095399/functions/exit.html](http://pubs.opengroup.org/onlinepubs/000095399/functions/exit.html)

# c++ - 隐式字段初始化规则

> ID：10878619
> 
> 赞同：3
> 
> 时间：2012-06-04T08:49:29.420
> 
> 标签：c++, class, constructor, initialization, stack

我最近修复了我的一个应用程序中的一个错误：问题是驻留在堆栈上的一个对象有一个未初始化的字段。

该对象具有这种类型的类声明：

```
struct A{
    int somefield, someotherfield;
    A(): someotherfield(0) {}
} 
```

并且在声明局部变量时（如`A var;`在函数中），`somefield`未初始化，因此读取它会返回一个随机值。

我确信没有出现在构造函数初始化列表中的类的字段将始终由合成的平凡构造函数初始化（在 int 的情况下，为零值）。显然我错了。

那么隐式字段初始化的一般规则是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T08:53:52.540

*   类和结构由构造函数初始化
*   基本类型 int double char short ... 未初始化且包含随机数
*   指针未初始化并指向随机位置
*   类或结构的数组导致每个元素由其构造函数初始化
*   基本类型或指针的数组是随机的。

# java - iOS RSA 公钥发送到服务器

> ID：10878622
> 
> 赞同：4
> 
> 时间：2012-06-04T08:49:36.627
> 
> 标签：java, ios, objective-c, rsa, public-key

我已经使用 SecKeyGeneratePair 方法生成了 RSA 密钥对，并且使用这些密钥我可以在 iOS 应用程序中进行加密/解密、数字签名和验证。

现在的挑战是我需要将公钥（SecKeyRef）以base64string格式发送到Java服务器，在java中我必须使用iOS字符串（base64）重建公钥。

我已将 SecKeyRef 转换为 NSData 到 base64string（总是得到相同的字符串），同时将其传输到服务器。使用 base64string 我无法在 Java 中重建公钥。我在下面提到了用于生成 RSA 公钥和私钥的代码。

```
static const UInt8 publicKeyIdentifier[] =  "com.apple.sample.publickey\0";
static const UInt8 privateKeyIdentifier[]= "com.apple.sample.privatekey\0";

- (void)generateKeyPairPlease{

OSStatus status = noErr;
publicKeyBits=nil;
NSMutableDictionary *privateKeyAttr = [[NSMutableDictionary alloc] init];
NSMutableDictionary *publicKeyAttr = [[NSMutableDictionary alloc] init];
NSMutableDictionary *keyPairAttr = [[NSMutableDictionary alloc] init];

publicTag = [NSData dataWithBytes:publicKeyIdentifier length:strlen((const char *)publicKeyIdentifier)];

privateTag = [NSData dataWithBytes:privateKeyIdentifier length:strlen((const char *)privateKeyIdentifier)];
publicKey = NULL;
privateKey = NULL;

[keyPairAttr setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];

[keyPairAttr setObject:[NSNumber numberWithInt:1024] forKey:(__bridge id)kSecAttrKeySizeInBits];

[privateKeyAttr setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecAttrIsPermanent];

[privateKeyAttr setObject:privateTag forKey:(__bridge id)kSecAttrApplicationTag];

[publicKeyAttr setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecAttrIsPermanent];

[publicKeyAttr setObject:publicTag forKey:(__bridge id)kSecAttrApplicationTag];

[keyPairAttr setObject:privateKeyAttr forKey:(__bridge id)kSecPrivateKeyAttrs];

[keyPairAttr setObject:publicKeyAttr forKey:(__bridge id)kSecPublicKeyAttrs];

status = SecKeyGeneratePair((__bridge CFDictionaryRef)keyPairAttr,&publicKey, &privateKey);

}

- (NSData *)getPublicKeyBits {
OSStatus sanityCheck = noErr;

CFDataRef keyBits;

NSMutableDictionary * queryPublicKey = [[NSMutableDictionary alloc] init];

// Set the public key query dictionary.
[queryPublicKey setObject:(__bridge id)kSecClassKey forKey:(__bridge id)kSecClass];
[queryPublicKey setObject:publicTag forKey:(__bridge id)kSecAttrApplicationTag];
[queryPublicKey setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
[queryPublicKey setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecReturnData];

// Get the key bits.
sanityCheck = SecItemCopyMatching((__bridge CFDictionaryRef)queryPublicKey, (CFTypeRef *)&keyBits);
publicKeyBits =(__bridge_transfer NSData*)keyBits; 

if (sanityCheck != noErr)
{
publicKeyBits = nil;
}

NSLog(@"Bits are %@",publicKeyBits);

return publicKeyBits;//every time I am getting same data here
} 
```

# visual-studio-2010 - 如何在 Visual Studio 2010 中编辑 Microsoft Office 2010 解决方案的清单文件？

> ID：10878630
> 
> 赞同：4
> 
> 时间：2012-06-04T08:50:33.667
> 
> 标签：visual-studio-2010, vsto, ms-office, manifest, administrator

我想强制插件以管理员身份运行，所以我需要编辑清单以添加

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

# editor - 使用 Primefaces Editor 打开现有数据

> ID：10878631
> 
> 赞同：1
> 
> 时间：2012-06-04T08:50:33.907
> 
> 标签：editor, primefaces

我有一些样本数据。我想`data(Text)`用`Primefaces Editor`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:00:45.447

您只需要将它“连接”到您的 bean

```
<p:editor id="editor" value="#{myBean.myValue}" width="600"/> 
```

看展柜

[PrimeFaces - ShowCase - 编辑器](http://www.primefaces.org/showcase/ui/editor.jsf)

# github - GitHub 如何托管源代码？

> ID：10878632
> 
> 赞同：2
> 
> 时间：2012-06-04T08:50:41.947
> 
> 标签：github, distributed, p2p, cloud-hosting

我正在研究项目托管网站的工作原理；特别是我想知道他们在哪里托管他们的项目，我非常想知道 GitHub 在哪里托管我们的项目。

*   他们有中央服务器吗？

*   他们使用分布式系统吗？

*   任何基于云的 P2P 类系统？

任何推荐的链接，以了解 GitHub 如何托管项目。我发现“Git 是分布式系统”是什么意思呢？这个怎么运作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T09:55:45.653

**[扎克霍尔曼](https://github.com/holman)**是一个 GitHubber。

**[他在ScaleConf](http://scaleconf.org/)**上发表了演讲，并就 GitHub 以有效方式托管项目所面临的技术挑战分享了一些见解。他的演讲还涵盖了组织规模。

这个演讲的幻灯片可以在他的**[网站](http://zachholman.com/talk/scaling-github)**上找到。

**[不幸的是，这些视频尚不](http://twitter.com/scaleconf/status/176999225761087488)**可用。

他的音调也很棒：）

> 发布一个月后，GitHub 托管了一千个存储库。三年后，我们接待了超过 300 万人。与此同时，我们的用户从一千人增加到超过一百万。
> 
> 这种类型的缩放提出了一些有趣的技术挑战。我将深入探讨我们的开发工作流程以及我们如何处理扩展、部署、代码审查和测试等概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T08:55:13.730

如果你没有通过 Git 的维基百科页面，那么你必须在[这里](http://en.wikipedia.org/wiki/Git_%28software%29)做。

此外，Git 的[帮助页面](https://help.github.com/)有常见问题解答，可以回答您的大部分疑问。

# c# - 如何查看.net网站版本？

> ID：10878633
> 
> 赞同：1
> 
> 时间：2012-06-04T08:50:42.220
> 
> 标签：c#, asp.net, web-config

我的电脑中有一个网站源代码我想检查它是在哪个框架中开发的，有人指导我吗？（即2.0、3.5、4.0）

据我说，它似乎是在 3.5 中开发的，但我不确定请确认我已附上它的 web.config 文件。

```
<?xml version="1.0"?><configuration>
  <configSections>
    <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
          <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
          <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
          <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
          <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        </sectionGroup>
      </sectionGroup>
    </sectionGroup>
      <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
          <section name="Responsive_PTS.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
      </sectionGroup>
  </configSections>
  <appSettings/>
  <connectionStrings>
    <add name="ResponsivePTSDB" connectionString="Provider=Microsoft.Jet.OLEDB.4.0;Data Source='|DataDirectory|database.mdb';Jet OLEDB:Database Password=pts;"/>
  </connectionStrings>
  <system.web>
    <!-- 
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.
        -->
    <compilation debug="true">
      <assemblies>
        <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>

                <add assembly="System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
                <add assembly="System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/></assemblies>
    </compilation>
    <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
        -->
    <authentication mode="Windows"/>
    <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.

        <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
            <error statusCode="403" redirect="NoAccess.htm" />
            <error statusCode="404" redirect="FileNotFound.htm" />
        </customErrors>
        -->
    <pages maxPageStateFieldLength ="40">
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </controls>
    </pages>
    <httpHandlers>
      <remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
    </httpHandlers>
    <httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpModules>
  </system.web>
  <system.codedom>
    <compilers>
      <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <providerOption name="CompilerVersion" value="v3.5"/>
        <providerOption name="WarnAsError" value="false"/>
      </compiler>
    </compilers>
  </system.codedom>
  <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
    -->
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules>
      <remove name="ScriptModule"/>
      <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </modules>
    <handlers>
      <remove name="WebServiceHandlerFactory-Integrated"/>
      <remove name="ScriptHandlerFactory"/>
      <remove name="ScriptHandlerFactoryAppServices"/>
      <remove name="ScriptResource"/>
      <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
                         <applicationSettings>
                             <Responsive_PTS.Properties.Settings>
                                 <setting name="Responsive_PTS_GlobalTransport_GlobalPayments"
                                     serializeAs="String">
                                     <value>https://certapia.globalpay.com/GlobalPay/transact.asmx</value>
                                 </setting>
                             </Responsive_PTS.Properties.Settings>
                         </applicationSettings>
</configuration> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:07:18.860

看来它是> = 3.5 ...
您还可以通过从调试工具栏中更改平台并检查网站编译和运行的所有版本来检查它兼容的版本

编辑：-
我的意思是
1\. 右键单击​​ VS 中的网站项目
2\. 转到属性
3\. 更改目标框架
4\. 再次编译项目
5\. 它编译的最低版本是你的答案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T09:43:11.353

我不是 ASP.NET 专家，但乍一看，我同意你的看法。

从这些行：

```
<add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/> 
```

以及从这些方面：

```
<compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <providerOption name="CompilerVersion" value="v3.5"/>
        <providerOption name="WarnAsError" value="false"/>
      </compiler> 
```

看来使用的 .NET Framework 版本是 3.5 或更高版本。

您也可以使用 IIS 检查它。在应用程序池中设置框架版本并运行您的站点。IIS 应该抛出一些关于框架版本与您的站点不兼容的错误。

[这里](http://www.hanselman.com/blog/HowToSetAnIISApplicationOrAppPoolToUseASPNET35RatherThan20.aspx)有一篇关于 IIS 和 ASP.NET 的文章。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-06T16:04:32.817

[您可以在Visual Studio Express](http://www.visualstudio.com/en-us/products/visual-studio-express-vs.aspx)中打开或创建项目，选择项目并按“ALT+ENTER”查看属性页，在“构建”部分下，您将显示此应用程序构建到的目标框架。

Visual Studio 安装繁重，因此请考虑使用[SharpDevelop](http://www.icsharpcode.net/opensource/sd/)之类的轻量级编辑器，但我已经很长时间没有使用它了，因此请注意建议的后面部分。

# facebook - 为什么我无法获得像我的页面一样的 facebook？

> ID：10878636
> 
> 赞同：0
> 
> 时间：2012-06-04T08:50:59.780
> 
> 标签：facebook, facebook-graph-api, facebook-apps

我想做的是用户必须先喜欢我的页面然后才能访问我的页面`facebook apps`，但我不知道为什么我无法检测到它并且我`var_dump`的页面被喜欢，结果为**NULL**

这是我的代码

```
$request = $_REQUEST["signed_request"];
list($encoded_sig, $load) = explode('.', $request, 2);
$fbData = json_decode(base64_decode(strtr($load, '-_', '+/')), true);

var_dump($fbData["page"]["liked"]);// output is NULL

if (!empty($fbData["page"]["liked"]))
{ 
  echo "This content is for Fans only!";
} else {
  echo "Please click on the Like button to view this tab!";
} 
```

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:53:32.007

您需要获得许可`user_likes`才能检查他们是否喜欢您的**Facebook 应用程序**，但 $fbData["page"]["liked"] 指的是您的**Facebook 应用程序页面**，它是单独的。

要编辑您的应用页面，请转到应用设置 > 高级 > 在底部附近，您将看到**应用页面**

要使用权限 user_likes 进行检查，请参阅此[SO Answer On Detecting if a User Likes a Facebook App](https://stackoverflow.com/questions/6866684/detecting-if-user-like-facebook-app)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:02:51.950

你确定有**作为**signed_request 参数吗？

只有在页面最初加载到 Facebook iframe 后，它才会传输到您的应用程序——一旦您开始在应用程序内部导航，它就不会再存在了。

恕我直言，最好的办法是解析signed_request（如果不为空），并将结果安全地放入您自己的会话中。

顺便说一句，自己解析它相当耗时——我建议使用 PHP SDK 并使用 Facebook::getSignedRequest()——如果有一个 signd_request 参数，该方法会以解码形式为您提供所有数据。

所以这就是我通常做的事情：

```
if($signed_request_data = $Facebook->getSignedRequest()) {
  $_SESSION['signed_request_data'] = $signed_request_data;
} 
```

您可以在每个页面上调用该代码——只有当方法实际返回数据时，您的会话才会更新。

# image - javafx 2.1 如何在使用 ColorAdjust 修改后保存图像

> ID：10878637
> 
> 赞同：3
> 
> 时间：2012-06-04T08:51:13.483
> 
> 标签：image, javafx

我只是做了一个类，让我可以使用 ColorAjust 类修改饱和度亮度、对比度和色调等图像。

但我不知道如何在进行这些修改后保存该图像。

这是代码：

```
final Stage imageProcessStage = new Stage();
        imageProcessStage.initModality(Modality.APPLICATION_MODAL);
        imageImageProcess = new Image(ImagePathImageProcess);
        imageViewImageProcess = ImageViewBuilder.create().image(imageImageProcess).build();
        ColorAdjust colorAdjust = ColorAdjustBuilder.create().build();
        imageViewImageProcess.setEffect(colorAdjust);
        // 
        Label saturationLabel = LabelBuilder.create().text("Saturation").build();
        GridPane.setConstraints(saturationLabel, 0, 0);
        Slider saturationSlider = SliderBuilder.create().value(50).build();
        colorAdjust.saturationProperty().bind(saturationSlider.valueProperty().divide(50).subtract(1));
        GridPane.setConstraints(saturationSlider, 1, 0);
        GridPane.setHgrow(saturationSlider, Priority.ALWAYS);
        Label saturationValueLabel = LabelBuilder.create().minWidth(75).maxWidth(75).build();
        saturationValueLabel.textProperty().bind(colorAdjust.saturationProperty().multiply(100).asString("%.2f%%"));
        GridPane.setConstraints(saturationValueLabel, 2, 0);
        // 
        Label hueLabel = LabelBuilder.create().text("Hue").build();
        GridPane.setConstraints(hueLabel, 0, 1);
        Slider hueSlider = SliderBuilder.create().value(50).build();
        colorAdjust.hueProperty().bind(hueSlider.valueProperty().divide(50).subtract(1));
        GridPane.setConstraints(hueSlider, 1, 1);
        GridPane.setHgrow(hueSlider, Priority.ALWAYS);
        Label hueValueLabel = LabelBuilder.create().minWidth(75).maxWidth(75).build();
        hueValueLabel.textProperty().bind(colorAdjust.hueProperty().multiply(100).asString("%.2f%%"));
        GridPane.setConstraints(hueValueLabel, 2, 1);
        // 
        Label brightnessLabel = LabelBuilder.create().text("Brightness").build();
        GridPane.setConstraints(brightnessLabel, 0, 2);
        Slider brightnessSlider = SliderBuilder.create().value(50).build();
        colorAdjust.brightnessProperty().bind(brightnessSlider.valueProperty().divide(50).subtract(1));
        GridPane.setConstraints(brightnessSlider, 1, 2);
        GridPane.setHgrow(brightnessSlider, Priority.ALWAYS);
        Label brightnessValueLabel = LabelBuilder.create().minWidth(75).maxWidth(75).build();
        brightnessValueLabel.textProperty().bind(colorAdjust.brightnessProperty().multiply(100).asString("%.2f%%"));
        GridPane.setConstraints(brightnessValueLabel, 2, 2);
        // 
        Label contrastLabel = LabelBuilder.create().text("Contrast").build();
        GridPane.setConstraints(contrastLabel, 0, 3);
        Slider contrastSlider = SliderBuilder.create().value(50).build();
        colorAdjust.contrastProperty().bind(contrastSlider.valueProperty().divide(50).subtract(1));
        GridPane.setConstraints(contrastSlider, 1, 3);
        GridPane.setHgrow(contrastSlider, Priority.ALWAYS);
        Label contrastValueLabel = LabelBuilder.create().minWidth(75).maxWidth(75).build();
        contrastValueLabel.textProperty().bind(colorAdjust.contrastProperty().multiply(100).asString("%.2f%%"));
        GridPane.setConstraints(contrastValueLabel, 2, 3);

        //Validate Button
        Button btnValider = new Button("Valider");
        btnValider.setOnAction(new EventHandler<ActionEvent>() {

            public void handle(ActionEvent event) {   

              // SAVE IMAGE HERE

            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:14:33.810

升级到[JavaFX 2.2](http://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html)并在您的按钮事件处理程序中使用以下代码。

```
ImageIO.write(
  SwingFXUtils.fromFXImage(
   imageViewImageProcess.snapshot(null, null), null
  ),
  "png",
  new File("valider.png")
); 
```

请注意，2.2 目前处于开发者预览版而非 GA 产品中，因此您可能会遇到一些问题和错误，直到新的 2.2 方法经过彻底的 QAed。

这是一个完整的可执行示例：[https ://gist.github.com/2870355](https://gist.github.com/2870355)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-19T16:49:35.060

通用且更简单的代码版本：

```
private void saveImage(
    Image i, 
    String extension, 
    String pathname) 
throws IOException {

ImageIO.write(
    SwingFXUtils.fromFXImage(
        image, 
        null), 
    extension, 
    new File(
        pathname));
} 
```

# javascript - 我应该如何检查 jasmine 或 javascript 中的排序语句

> ID：10878641
> 
> 赞同：4
> 
> 时间：2012-06-04T08:51:20.753
> 
> 标签：javascript, backbone.js, underscore.js, jasmine

我正在为 Backbone.Collection 编写规范。
我想使用 jasmine 在单元测试 javascript 中检查以下语句：

```
should the models be ordered by starting with the most recent. 
```

模型中要检查的关键值是`id`（整数）。

例如，如果集合如下所示，则对其进行排序：

```
[
{id: 5, ….}, // the most recent
{id: 2, ...},
{id: 1, ...}
] 
```

我的问题是：
1）有没有茉莉花方法来做这种检查？
2）如果没有，用javascript制作它的最佳方法是什么？也许使用一些像下划线这样的库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:14:56.857

你可以做一个 for 循环，不确定是否有内置的检查你想要什么：

```
 var max = arr[0].id;
    var sorted = true;

    for(var i = 1; i < arr.length; i++) {
       if(max > arr[i].id) {
           sorted = false; break;
       }
    }

    alert(sorted); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:55:59.017

大概，您已经在您的收藏中设置了 a `comparator`，这将使您的收藏保持有序。

在您的测试中，乱序创建 3 个项目，假设：

```
collection = new MyCollection();
collection.add({id: 1, bar: 'foo1'});
collection.add({id: 5, bar: 'foo5'});
collection.add({id: 3, bar: 'foo3'}); 
```

然后确保比较器工作，变得很简单：

```
expect(_.pluck(collection.models, 'id')).toEqual([5, 3, 1]); 
```

# ios - UITableView 子类未执行过去的初始化

> ID：10878642
> 
> 赞同：0
> 
> 时间：2012-06-04T08:51:30.637
> 
> 标签：ios, uitableview, init

我正在构建一个应用程序，它使用以编程方式生成`UITableView`的弹出和填充`UITextField`. 当用户触摸`UITextField`一个有效值的 TableView 时应该会弹出。有`UITableView`部分和一个搜索栏。我从另一个我编写的非常相似的应用程序中获取代码，它运行良好。

当`UITextField`触摸到时，在`UITableView`（`CatagoryTableViewController.m`）中开始执行，但只调用了init方法，然后控制权返回到调用类（`ViewController.m`）。我已经覆盖了 UITextField 的键弹出窗口。

有一个 XIB 用于**`ViewController`**但不用于**`CatagoryTableViewController`**. UITextField Touch Down 映射到**`catagoryFieldPressed`**方法。

顺便说一句，SFCLog 定义为：

```
define SFCLog(FORMAT, ...) fprintf(stderr,"%s [line %d] %s\n",__PRETTY_FUNCTION__, __LINE__,[[NSString stringWithFormat:FORMAT, ##__VA_ARGS__]  UTF8String]) 
```

我已将 SFCLog 日志（NSLog 的一种变体）放在 中的每个方法的开头`CatagoryTableViewController`，并且只调用了 init。关于我所缺少的任何想法？

**来自`ViewController.h`**（调用类头）

```
@interface ViewController : UIViewController <UITextFieldDelegate>
{
    Word *currentWord;
    NSMutableArray *words;
    int wordsIndex;
    int viewState;
    int correctCounter;
    int incorrectCounter;
} 
```

**来自`ViewController.m`**（调用类）

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    SFCLog(@"");
    return NO;  // Hide both keyboard and blinking cursor.
}

- (IBAction)catagoryFieldPressed:(id)sender
{
    SFCLog(@"Catagory button");
    CatagoryTableViewController *childView = [[CatagoryTableViewController alloc] init];
    childView.parentView = self;
    [self.navigationController pushViewController:childView animated:YES];
    SFCLog(@"Returned from Catagory button");
} 
```

**`CatagoryTableViewController.h`**

```
@class ViewController;

@interface CatagoryTableViewController : UITableViewController <UISearchBarDelegate> 
{
    NSMutableDictionary *catagoryDictionary;
    NSArray *filteredArray;
    UISearchBar *searchBar;
    UISearchDisplayController *searchController;
    NSMutableArray *sectionArray;
}

@property (nonatomic, weak) ViewController *parentView; 
```

**`CatagoryTableViewController.m`**比这更多的代码，但这些方法应该触发。

```
@implementation CatagoryTableViewController
@synthesize parentView;

- (id) init
{
    SFCLog(@"");
    if ((self = [super init]))
    {
        SFCLog(@"in here");        
    }
    SFCLog(@"");
    return self;
}

- (void)viewDidLoad
{
    SFCLog(@"");
    [super viewDidLoad];
}

-(void)loadView
{
    SFCLog(@"load view");
    [super loadView];
    self.navigationItem.hidesBackButton = TRUE;

    // Load the catagory dictionary from the database
    WordService *wordService = [[WordService alloc] init];
    NSMutableArray *rawCatagories = [wordService getCatagories];
    catagoryDictionary = [NSMutableDictionary dictionary];
    for (WordCatagory *wordCatagory in rawCatagories) {
        [catagoryDictionary setObject:wordCatagory forKey:wordCatagory.wordCatagory];
    }

    // Section Array
    sectionArray = [NSMutableArray array];
    for (int i = 0; i < 26; i++)
        [sectionArray addObject:[self itemsInSection:i]];
    SFCLog(@"sectionArray: %@",sectionArray);

    // Create a search bar
    searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 320.0f, 44.0f)];
    searchBar.autocorrectionType = UITextAutocorrectionTypeNo;
    searchBar.autocapitalizationType = UITextAutocapitalizationTypeNone;
    searchBar.keyboardType = UIKeyboardTypeAlphabet;
    self.tableView.tableHeaderView = searchBar;

    // Create the search display controller
    searchController = [[UISearchDisplayController alloc] initWithSearchBar:searchBar contentsController:self];
    searchController.searchResultsDataSource = self;
    searchController.searchResultsDelegate = self;   
} 
```

**调试控制台输出**

```
 [ViewController catagoryFieldPressed:] [line 223] Catagory button
 [CatagoryTableViewController init] [line 18] 
 [CatagoryTableViewController init] [line 21] in here
 [CatagoryTableViewController init] [line 23] 
 [ViewController catagoryFieldPressed:] [line 227] Returned from Catagory button
 [ViewController textFieldShouldBeginEditing:] [line 33] 
```

**根据 Phillip Mills 的帖子添加 NSLog 后编辑调试控制台输出。**

```
-[ViewController catagoryFieldPressed:] [line 223] Catagory button
-[CatagoryTableViewController init] [line 18] 
-[CatagoryTableViewController init] [line 21] in here
-[CatagoryTableViewController init] [line 23] 
-[CatagoryTableViewController loadView] [line 171] load view
2012-06-04 18:52:57.930 Fluent[1835:f803] Opened database
2012-06-04 18:52:57.930 Fluent[1835:f803] Path: /Users/sean/Library/Application Support/iPhone Simulator/5.1/Applications/8B93174F-8836-4533-BCFF-F98AC2F34F26/Documents/fluent_tr.sqlite
-[WordService getCatagories] [line 114] 
-[CatagoryTableViewController itemsInSection:] [line 46] 
(edited repeating NSLogs to shorten)
-[CatagoryTableViewController firstLetter:] [line 39] 
-[CatagoryTableViewController numberOfSectionsInTableView:] [line 99] 
-[CatagoryTableViewController tableView:titleForHeaderInSection:] [line 86] 
-[CatagoryTableViewController firstLetter:] [line 39] 
-[CatagoryTableViewController tableView:numberOfRowsInSection:] [line 108] 
2012-06-04 18:52:57.937 Fluent[1835:f803] Rows per section count: 1
-[CatagoryTableViewController viewDidLoad] [line 31] 
2012-06-04 18:52:57.938 Fluent[1835:f803] Controller: <CatagoryTableViewController: 0x884c880>, View: <UITableView: 0xbb90a00; frame = (0 20; 320 460); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0x884ce20>; contentOffset: {0, 0}>
-[ViewController catagoryFieldPressed:] [line 228] Returned from Catagory button
-[ViewController textFieldShouldBeginEditing:] [line 33] 
```

**在 AppDelegate.m 之前**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UIViewController *viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    UIViewController *numberTestViewController = [[ViewController alloc] initWithNibName:@"NumberTestViewController" bundle:nil];

    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:viewController];
    nav.tabBarItem.title = @"Words";
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController,numberTestViewController, nil];
    self.tabBarController.delegate = self;
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

**在 AppDelegate.m 之后**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    ViewController *viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    NumberTestViewController *numberTestViewController = [[NumberTestViewController alloc] initWithNibName:@"NumberTestViewController" bundle:nil];

    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:viewController];
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:nav,numberTestViewController, nil];
    self.tabBarController.delegate = self;
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:02:43.677

在 Phillip Mills 的帮助下发现了问题。调用 UITableView 的视图控制器未正确添加到导航堆栈。它已被实例化，然后通过添加到 navigationController`UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:viewController];`但导航控制器本身未正确添加到 tabBarController。

请参阅上面的 AppDelegate.m 的前后版本。

感谢您的帮助菲利普。

# gridview - Yii CGridView Pager 生成链接错误？

> ID：10878653
> 
> 赞同：1
> 
> 时间：2012-06-04T08:52:40.653
> 
> 标签：gridview, yii, pager

我有一个简单的搜索表单 (site/search.php) 将搜索字符串发送到控制器并显示搜索结果（如果有）。我正在使用 CGridView 来显示数据。 *更新*这是我的视图（site/search.php）文件：

```
 <form name="quickSearchForm" action="<?php echo Yii::app()->createUrl("site/search"); ?>" method="POST">
          <div data-role="fieldcontain">
              <input type="search" name="searchText" id="searchText" value="<?php echo $searchText; ?>"/>
              <input type="submit" name="submitBtn" id="submitBtn" value="search"/>
                    <a href="#">Advanced</a>
           </div>
     </form>

<?php 
   if (!empty(itemList)) {
        $this->widget('zii.widgets.grid.CGridView', array(
            'id'=>'task-grid',
            'dataProvider'=>$itemList,
            'pager'=>array(
                'header'         => '',
                'firstPageLabel' => '&lt;&lt;',
                'prevPageLabel'  => '&lt;',
                'nextPageLabel'  => '&gt;',
                'lastPageLabel'  => '&gt;&gt;',
            ),
            'template'=>'{pager}{items}{pager}',
            'columns'=>array(
                array(
                    'name'  => 'name',
                    'value' => '$data->name',
                ),
                array(
                    'name'  => 'date',
                    'value' => 'date("d/m/Y",strtotime($data->date) )',   
                ),
             ),
        ),);
     } //end if
?> 
```

在控制器中，我使用 $searchText 通过 CActiveDataProvider 获取数据，然后渲染回 search.php。

```
 <?php       
        $this->render($view = "search", array(
            'searchText'    => $searchText,
            'itemList'       => $itemListBySearch,
            'taskResult'    => $tasks,

        )); 
```

*结束更新*

我的问题是 $itemList 有很多项目，GridView 会分页。但是，我点击按钮页面[2]，浏览器直接到`r=site/search&page=2`并且itemList丢失了！

我可以使用 ajax 而不是直接到`r=site/search&page=2`???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T11:41:12.003

Yii pager 的默认实现保留了请求中的所有**GET**值，但是您的搜索表单使用**POST**，因此搜索词不包含在分页链接中。尝试将表单方法更改为 GET，您将获得所需的行为：

```
<?php echo CHtml::beginForm(array('site/search'), 'get'); ?> 
```

**PS**：恕我直言，搜索表单应始终使用**GET**方法发送搜索选项，因为它提供了复制包含所有搜索词的 URL 的能力，然后将其发送给其他人（例如开发人员）或保存以进一步复制相同要求。

# ruby-on-rails - 迁移到 Rails 3.2.5 后出现问题 - resource.save 不工作，数据不保存

> ID：10878655
> 
> 赞同：1
> 
> 时间：2012-06-04T08:52:55.590
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2

我们最近从 rails 3.2.3 迁移到 Rails 3.2.5，我们正在使用 Devise 2.0.4。在我们的应用程序中，我们已经覆盖了设计控制器，只是为了将omniauth 与设计一起使用。

当我们在 Sign_UP 上使用 3.2.3 版本时，一旦我们迁移到 3.2.5 **resource.save**停止工作，它不会显示任何失败或成功消息，只是重定向到登录页面

之后我尝试了**resource.save！**这样我就可以得到确切的错误，它引发了以下错误消息，但这不是真的，因为在表中没有这样的记录，甚至当前的内容也没有保存

```
Completed 500 Internal Server Error in 1626644ms
ActiveRecord::RecordInvalid (Validation failed: User name has already been taken): 
```

我也尝试过使用 Devise 2.1 并得到相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:45:12.917

我找到了问题区域。但这并不奇怪在我们当前工作的 Rails 3.2.3 应用程序中，我们的模型中有这个验证，这在 Rails 3.2.5 中失败了

```
validates :user_name, :uniqueness => true 
```

原因是 - 表中的 User_name 作为“nil”已经可用，当我们下次尝试将“user_name”作为 NIL 插入时，它正在检查 NIL 的唯一性，但它失败了。

为了解决这个问题，我添加了 :allow_nil 选项，但我的问题仍然是为什么 rails 3.2.3 没有失败

```
validates :user_name, :uniqueness => true, :allow_nil => true 
```

# c - 如何在 gstreamer 中为 udpsrc 元素创建上限？

> ID：10878656
> 
> 赞同：2
> 
> 时间：2012-06-04T08:52:56.260
> 
> 标签：c, ubuntu, gstreamer

我想使用 udpsrc 元素运行音频管道。我将设置 udpsrc 的上限（功能），例如 gst-launch-0.10 -vvv udpsrc multicast-iface=eth0 uri=udp://239.255.255.6:25012 caps= **"application/x-rtp, media=(字符串）音频，有效载荷=（int）96，时钟速率=（int）16000，编码名称=（字符串）MPEG4-GENERIC，流类型=（字符串）5，profile-level-id=（字符串）15，模式=(string)AAC-hbr,config=(string)1408,sizelength=(string)13, indexlength=(string)3,indexdeltalength=(string)3"** 在我使用的程序中设置这个上限

```
g_object_set(G_OBJECT(Source),"caps",gst_caps_new_simple ("application/x-rtp",
                    "media", G_TYPE_STRING, "audio",
                    "payload",G_TYPE_INT,96,
                    "clock-rate", G_TYPE_INT, 16000,
                    "encoding-name", G_TYPE_STRING,"MPEG4-GENERIC",
                    "streamtype",G_TYPE_STRING,"5",
                    "profile-level-id", G_TYPE_STRING,"15",
                    "mode",G_TYPE_STRING,"AAC-hbr",
                    "config",G_TYPE_STRING,"1408",
                    "sizelength",G_TYPE_STRING,"13",
                    "indexlength",G_TYPE_STRING,"3"
                    "indexdeltalength",G_TYPE_STRING,"3",
                    NULL),NULL); 
```

但它显示了一个分段错误，所以请尽快告诉我该怎么办？......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:09:11.957

代码看起来不错（尽管您泄漏了上限）。要修复泄漏，请执行以下操作：

```
GstCaps *caps = gst_caps_new_simple( ....);
g_object_set(source, "caps", caps, NULL);
gst_caps_unref(caps); 
```

要弄清楚为什么它会在 gdb 下运行应用程序时出现段错误：

```
G_DEBUG="fatal_warnings" gdb --args ./my-app <args> 
```

在 gdb 内部“运行”，当它崩溃时输入“bt”以显示回溯。

# javascript - 无法在 TextArea 中添加内容

> ID：10878659
> 
> 赞同：-2
> 
> 时间：2012-06-04T08:53:16.377
> 
> 标签：javascript, jquery, html

我的 HTML 页面中有 TextArea。它以编程方式启用和禁用。当它被禁用时，我将以编程方式向它添加一些内容。稍后当它未被禁用时，我正在手动编辑文本框的内容。

但是在那之后，如果我尝试在它被禁用时以编程方式向它添加一些东西，我就无法向它添加这些内容。

有没有人遇到过这样的问题。请让我知道您是否有解决方案。

我在用

```
$("#textNote").attr("disabled","disabled"); ==> disable textArea
 $("#textNote").removeAttr("disabled","disabled"); ==> to enable it again
 $("#textNote").append(data); ==> to add data through Javscript. 
```

但似乎如果启用了 textarea，我会对其进行编辑。然后通过 JS 我可以尝试向其中添加一些数据。它无法添加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:08:05.810

不知道这似乎可以解决什么问题：

[http://jsfiddle.net/bZpnm/](http://jsfiddle.net/bZpnm/)

正如评论所说，添加代码会有所帮助

# node.js - 使用 Express.js 从 MongoDB 显示日期

> ID：10878676
> 
> 赞同：3
> 
> 时间：2012-06-04T08:54:40.097
> 
> 标签：node.js, mongodb, express, mongoose, ejs

我使用 mongoose.js 将一些数据集保存到 MongoDB。但是我在使用 express.js 和 ejs 的 html 网站上显示它们时遇到了问题。

这是我的场景：

**模型**

```
var mongoose = require('mongoose');

var Schema = mongoose.Schema;
var ObjectId = Schema.ObjectId;

var ItemSchema = new Schema({
    _id: ObjectId,
    creationTime: Date,
    modificationTime: Date,
    title: String
});
var Item = mongoose.model('item', ItemSchema);
module.exports.Item = Item; 
```

**路线：**

```
app.get('/item/:id', function(req, res) {

    Item.findById(req.params.id, function(err, doc){

        console.log(doc); //This check displays everything correctly on console

        res.render('item.html.ejs', {
            item : doc
        });
    });
}); 
```

**看法：**

```
<h1><%= item.title %>:</h1>
<p>Creation: <%= item.creationDate %></p>
<p>Modification: <%= item.modificationDate %></p> 
```

此设置的结果是标题正确显示，而两个日期均为`undefined`.

我认为这与 MongoDB 的 ISODate 格式有关。但我找不到如何将其转换为在 html 视图中显示的解决方案。

我感谢您的帮助。干杯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T09:43:14.170

我的项目中有以下使用 moment.js 的助手。

```
date: function(date){
  moment(date).format('YYYY-MM-DD hh:mm:ss');
},
fromNow: function(date){
  moment(date).fromNow()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:20:36.773

如果您只是复制并粘贴代码，则解决方案非常简单。

在您的模型中，您在模板中定义了创建`Time`和修改`Time`，您尝试访问 item.creation`Date`和 item.modification `Date`。

更改之后，您应该能够看到其他未定义的内容，但您可能仍需要将其转换为正确的日期格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T09:02:54.137

我使用上面的示例添加了一个 ejs 过滤器，但我必须对其进行一些更改才能使其正常工作：

在 mongoose 模式上创建 'created_at' 属性并在 save() 上自动创建它：

```
var ItemSchema = new Schema({
    name    : { type: String, required: true, trim: true }
  , created_at    : { type: Date }
});

ItemSchema.pre('save', function(next){
  if ( !this.created_at ) {
    this.created_at = new Date;
  }
  next();
}); 
```

安装时刻（并写入 package.json）

```
npm install moment --save 
```

在 app.js 或您为 ejs 定义过滤器的任何其他位置添加过滤器：

```
var moment = require('moment');

ejs.filters.fromNow = function(date){
  return moment(date).fromNow()
} 
```

在 page.ejs 中使用过滤器

```
<span class="created_at"><%=: item.created_at | fromNow %></span> 
```

# silverlight - Silverlight 4，XAML：如何扩展 到几个网格列？

> ID：10878677
> 
> 赞同：0
> 
> 时间：2012-06-04T08:54:40.870
> 
> 标签：silverlight, xaml, silverlight-4.0, silverlight-toolkit, busyindicator

所以我有以下 XAML 代码：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="214" />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="42" />
    </Grid.RowDefinitions>

    <toolkit:BusyIndicator IsBusy="False" Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="0" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
        <StackPanel Grid.Column="0" Grid.Row="0">
            <!-- ... -->
        </StackPanel>
        <Canvas Grid.Column="1" Grid.Row="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
            <!-- ... -->
        </Canvas>
    </toolkit:BusyIndicator>
    <TextBlock Grid.Row="1" Grid.ColumnSpan="2" />
</Grid> 
```

这个想法是让 BusyIndi​​cator 覆盖第一行中的两个单元格并保持第二行不变。但是 Visual Studio 中的 XAML 编辑器强调`<Canvas>`并说：“属性‘内容’被设置了不止一次。”

如何克服这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T09:39:12.890

您收到有关“内容”设置不止一次的错误，因为 a`BusyIndicator`是 a`ContentControl`并且最多只能有一个孩子。

您可以做的是将 BusyIndi​​cator 作为和的兄弟放在网格`StackPanel`中`Canvas`。要确保它在忙碌时显示在顶行的其他控件之上，请使用属性`Canvas.ZIndex`。这需要比堆栈面板和画布中的任何控件具有更高的 Z-index。（如果您没有在堆栈面板和画布中使用 Z 索引，可以使用`1`，如下例所示。）

```
<Grid>
    <!-- ... -->
    <toolkit:BusyIndicator IsBusy="False" Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="0" Canvas.ZIndex="1" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"/ >
    <StackPanel Grid.Column="0" Grid.Row="0">
        <!-- ... -->
    </StackPanel>
    <Canvas Grid.Column="1" Grid.Row="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <!-- ... -->
    </Canvas>
    <TextBlock Grid.Row="1" Grid.ColumnSpan="2" />
</Grid> 
```

# iphone - 在 viewDidLoad 以外的方法中添加子视图

> ID：10878681
> 
> 赞同：0
> 
> 时间：2012-06-04T08:54:54.363
> 
> 标签：iphone, objective-c, ios

我正在以其他方法添加子视图，`viewDidLoad()`并且不显示子视图。我的代码在下面：

```
 -(void) displayBanner
{ 

    SharedApp *instance=[SharedApp sharedInstance];
    [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(targetMethod:) userInfo:nil repeats:YES];

 numTimerTicks = 0;

   roundedButtonType = [[UIButton buttonWithType:UIButtonTypeRoundedRect]retain]; //Creates a UIButton
   roundedButtonType.frame = CGRectMake(0.0f, 360.0f, 320.0f, 60.0f); //sets the coordinates and dimensions of UIButton
   roundedButtonType.backgroundColor = [UIColor clearColor]; //sets the background color
   roundedButtonType.tag = numTimerTicks;
  //  [instance configView];
   NSLog(@"the home array is %@",instance.homeImageArray);
   [roundedButtonType setBackgroundImage:[instance.homeImageArray objectAtIndex:numTimerTicks] forState:UIControlStateNormal];
   [roundedButtonType addTarget:self action:@selector(showDetails:)forControlEvents:UIControlEventTouchUpInside]; //sets the Background image
   [roundedButtonType setTitleColor:[UIColor blackColor] forState:UIControlStateNormal]; 

  HomePageViewController *homepage = [[HomePageViewController alloc]initWithNibName:@"HomePageViewController" bundle:nil];
  [homepage.view addSubview:roundedButtonType];

   //Oops forgot to add this one... my bad.. :D :D
   [self.view addSubview:homepage.view];// Image displayed but goes into endless loop

} 
```

谁能让我知道我是否做得对以及我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:59:06.390

而不是这个：

```
[homepage.view addSubview:roundedButtonType]; 
```

做这个：

```
[self.view addSubview:roundedButtonType]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:02:29.100

这段代码非常好：

```
HomePageViewController *homepage = [[HomePageViewController alloc] initWithNibName:@"HomePageViewController" bundle:nil];
[homepage.view addSubview:roundedButtonType]; 
```

You 按钮被添加到`HomePageViewController`.

但是`HomePageViewController`没有添加到任何地方，因此它不可见。你必须展示它。例如，在您当前的 ViewController 或Window 上使用`pushViewController`/ 。`presentModalViewController``setRootViewController`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:05:35.437

您提供的数据不正确。可能是这两个原因我已经给出了一些提示，让我知道这不是你想要的。

首先 UI 调用的变化必须从主线程发生。做一件事。运行中的方法`[self performSelectorOnMainThread:@selector() withObject:nil waitUntilDone:]`

第二 homepage.view 不可见。您可以提供 self.view（如果您从视图控制器调用此方法）。

# android - 如何为 SimpleAdapter 设置监听器

> ID：10878682
> 
> 赞同：0
> 
> 时间：2012-06-04T08:54:56.983
> 
> 标签：android

我使用以下代码创建了一个列表/表格排序。

```
ListView list = (ListView) findViewById(R.id.list1);
    btn = (Button) findViewById(R.id.btTaken);
    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
    HashMap<String, String> map = new HashMap<String, String>();
    String Date;
    //list.setOnItemSelectedListener((OnItemSelectedListener) this);
 //   list.setOnItemClickListener(ListItemClick);
    //  cb.setVisibility();
    Date=AttendanceDao.Dates()[0];
    for(i=0;i<AttendanceDao.Dates().length;i++)
    {

    map = new HashMap<String, String>();
    map.put("Date", AttendanceDao.Dates()[i]);
    //map.put("StudentName",Data.Sname()[i]);

    mylist.add(map);
    }

    // ...
    SimpleAdapter mSchedule = new SimpleAdapter(this, mylist, R.layout.att_date_list,
            AttendanceDao.Datemap(), new int[] {R.id.Sid});

    list.setAdapter(mSchedule); 
```

这部分代码

```
 protected void onListItemClick(ListView l, View v, int position, long id) {//this guy is not working!
            // TODO Auto-generated method stub
            Intent openActivity = new Intent("net.vrixx.activities.ATTENDANCELISTACTIVITY");
                startActivity(openActivity);

        } 
```

应该听在我的列表中单击的项目。但它不起作用 任何人都可以找出原因吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:58:12.787

```
 list.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    }); 
```

# javascript - 我在使用 Javascript 或 Jquery 创建具有字符串计数的动态字段时遇到问题

> ID：10878683
> 
> 赞同：2
> 
> 时间：2012-06-04T08:54:57.313
> 
> 标签：javascript, jquery, dynamic, logic, appendchild

我在使用 JavaScript 或 jQuery创建具有**字符串计数的动态字段时遇到问题。**

**简报**

我想在 sting count 的帮助下创建动态字段，例如，当我`player textfield`像这样写一些文本时，`p1,p2,p3`它们会创建三个`file fields`，`dynamicDiv`或者当我同时删除`player textfield`这样`p1,p2`的一些文本时，它们只会创建两个`file fields`。

整个场景取决于`keyup event`

代码：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
function commasperatedCount(){
    var cs_count = $('#player').val();
    var fields = cs_count.split(/,/);
    var fieldsCount = fields.length;

    for(var i=1;i<=fieldsCount;i++){
        var element = document.createElement("input");
        element.setAttribute("type", 'file');
        element.setAttribute("value", '');
        element.setAttribute("name", 'file_'+i);

        var foo = document.getElementById("dynamicDiv");
        foo.appendChild(element);
    }
}
</script>

<form>
<label>CountPlayerData</label>
<input type="text" name="player" id="player" onkeyup="return commasperatedCount();" autocomplete="off" />
<div id="dynamicDiv"></div>

<input type="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:57:38.147

```
var seed = false,
    c = 0,
    deleted = false;
$('#player').on('keyup', function(e) {
    var val = this.value;
    if ($.trim(this.value)) {
        if (e.which == 188) {
            seed = false;
        }
        if (e.which == 8 || e.which == 46) {
            var commaCount = val.split(/,/g).length - 1;
            if (commaCount < c - 1) {
                deleted = true;
            }

        }
        commasperatedCount();
    } else {
        c = 0;
        deleted = false;
        seed = false;
        $('#dynamicDiv').empty();
    }
});

function commasperatedCount() {
    if (deleted) {
        $('#dynamicDiv input:last').remove();
        deleted = false;
        c--;
        return false;
    }
    if (!seed) {
        c++;
        var fields = '<input value="" type="file" name="file_' + c + '">';
        $('#dynamicDiv').append(fields);
        seed = true;
    }
}​ 
```

**[演示](http://jsfiddle.net/E8Vfs/20/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:58:28.253

```
<script>
    function create(playerList) {
        try {
            var player = playerList.split(/,/);
        } catch(err) {
            //
            return false;
        }
        var str    = "";

        for(var i=0; i<player.length; i++) {
            str += '<input type="file" id="player-' + i + '" name="players[]" />'; 
            //you wont need id unless you are thinking of javascript validations here
        }

        if(playerList=="") {str="";} // just in case text field is empty ...

        document.getElementById("dynamicDiv").innerHTML = str;
    }
</script>

<input id="playerList" onKeyUp="create(this.value);" /><!-- change event can also be used here -->

<form>
    <div id="dynamicDiv"></div>
</form> 
```

# java - 如何从 Gmail 中获取联系人

> ID：10878692
> 
> 赞同：1
> 
> 时间：2012-06-04T08:56:05.470
> 
> 标签：java, google-contacts-api

我已经看过[Google Contacts API](https://developers.google.com/google-apps/contacts/v3/)，但我没有得到任何想要从登录用户那里获取电子邮件联系人的东西。

我找到了一个[简单的 php 示例，](http://www.9lessons.info/2011/06/import-gmail-contacts-google-oauth.html)它非常简单，但我无法将其转换为 java。我正在尝试使用[Google 联系人 API](https://developers.google.com/google-apps/contacts/v3/)问题是导入语句显示错误。

如何导入这些。

```
 import com.google.gdata.client.*;
 import com.google.gdata.client.contacts.*;
 import com.google.gdata.data.*;
 import com.google.gdata.data.contacts.*;
 import com.google.gdata.data.extensions.*;
 import com.google.gdata.util.*;
 import java.io.IOException; 
```

我没有为这些导入获取 jar 文件。如果有除谷歌以外的任何示例，请提供链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:16:07.740

我找到了以下 Maven 条目：

```
<dependency>
  <groupId>com.google.gdata</groupId>
  <artifactId>gdata-contacts-3.0</artifactId>
  <version>1.41.5</version>
</dependency> 
```

支持以下导入，这使我可以访问 gmail 联系人

```
import com.google.gdata.client.Service.GDataRequest;
import com.google.gdata.client.contacts.ContactsService;
import com.google.gdata.data.Link;
import com.google.gdata.data.TextConstruct;
import com.google.gdata.data.contacts.Birthday;
import com.google.gdata.data.contacts.ContactEntry;
import com.google.gdata.data.contacts.ContactFeed;
import com.google.gdata.data.extensions.Email;
import com.google.gdata.data.extensions.FamilyName;
import com.google.gdata.data.extensions.FormattedAddress;
import com.google.gdata.data.extensions.GivenName;
import com.google.gdata.data.extensions.Name;
import com.google.gdata.data.extensions.OrgName;
import com.google.gdata.data.extensions.Organization;
import com.google.gdata.data.extensions.PhoneNumber;
import com.google.gdata.data.extensions.StructuredPostalAddress;
import com.google.gdata.util.AuthenticationException;
import com.google.gdata.util.ContentType;
import com.google.gdata.util.PreconditionFailedException;
import com.google.gdata.util.ServiceException; 
```

# testing - JUnit - 推迟断言失败

> ID：10878693
> 
> 赞同：0
> 
> 时间：2012-06-04T08:56:07.623
> 
> 标签：testing, junit, automated-tests

我正在使用 JUnit 自动化功能测试。我遇到了一个问题：如果我遵循“每个测试方法一个（重要）断言”的规则，那么每个测试用例都会有一堆 6 行测试方法（17 是迄今为止最大的数字）。如果我将它们全部放入一个测试方法中，我必须注释掉失败的断言或让一半的测试永远不会启动。

我不喜欢第一种方式，因为它启动浏览器的次数太多，而且浏览器启动+登录/注销似乎比测试运行本身更“昂贵”和耗时。

第二种方法也好不到哪里去，因为它在任何管理它的情况下都会引入大量的手动工作。

所以，我的问题是： 1\. 这种情况的最佳实践是什么？2\. 有什么方法可以将测试失败推迟到测试结束吗？我的意思是，不太重要的断言，它不会停止测试运​​行，但最终会导致它失败。

UPD：是的，我正在使用 Selenium。而且我为每个测试类都有一个父类来统一他们的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:13:40.557

1.  您可以使用@BeforeClass 和@AfterClass 为每个测试类启动和关闭浏览器一次，或者您可以创建一个启动浏览器的规则并将其与@ClassRule 一起使用。
2.  [ErrorCollector](http://kentbeck.github.com/junit/javadoc/latest/org/junit/rules/ErrorCollector.html)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:20:48.840

```
@BeforeClass
public static void beforeClass(){

    launchBrowser();

}

@Before
public void before() {

    login();

}

@AfterClass
public static void beforeClass(){

    killBrowser();

} 
```

这可能是您问题的答案

# java - 如何使用 iText java 读取 PDF 中的表格？

> ID：10878695
> 
> 赞同：-1
> 
> 时间：2012-06-04T08:56:35.807
> 
> 标签：java, pdf, itext

我对使用 java 处理 pdf 没有太多想法。我想使用 iText java 库读取 PDF 文件中的表格。如何进行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T09:05:02.157

> 您可以从内容流中提取文本，但对于普通 PDF，结果将是纯文本（没有任何结构）。如果页面上有表格，则该表格将不会被识别。您将获得内容和一些空白，但这不是表格结构！只有当您有一个带标签的 PDF 时，您才能获得一个 XML 文件。如果 PDF 包含被识别为表格标签的标签，这将反映在 PDF 中。

这就是我在[这里发现的](http://support.itextpdf.com/node/27)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T12:11:46.727

要从 PDF 文件中读取表格内容，您只需使用任何 API（我使用`PdfTextExtracter.getTextFromPage()`过 iText）将 PDF 转换为文本文件，然后通过 Java 程序读取该 txt 文件。读完之后，主要任务就完成了。您必须过滤您需要的数据，您可以通过不断使用`String`类的拆分方法来过滤，直到找到您想要的记录。

下面是我从 PDF 文件中提取部分记录并将其写入 .CSV 文件的代码。您可以在此处查看 PDF 文件：[http ://www.cea.nic.in/reports/monthly/generation_rep/actual/jan13/opm_02.pdf](http://www.cea.nic.in/reports/monthly/generation_rep/actual/jan13/opm_02.pdf)

```
public static void genrateCsvMonth_Region(String pdfpath, String csvpath) {
        try {
            String line = null;
            // Appending Header in CSV file...
            BufferedWriter writer1 = new BufferedWriter(new FileWriter(csvpath,
                    true));
            writer1.close();
            // Checking whether file is empty or not..
            BufferedReader br = new BufferedReader(new FileReader(csvpath));
                         if ((line = br.readLine()) == null) {
                BufferedWriter writer = new BufferedWriter(new FileWriter(
                        csvpath, true));
                writer.append("REGION,");
                writer.append("YEAR,");
                writer.append("MONTH,");
                writer.append("THERMAL,");
                writer.append("NUCLEAR,");
                writer.append("HYDRO,");
                writer.append("TOTAL\n");
                writer.close();
            }
            // Reading the pdf file..
            PdfReader reader = new PdfReader(pdfpath);
            BufferedWriter writer = new BufferedWriter(new FileWriter(csvpath,
                    true));

            // Extracting records from page into String..
            String page = PdfTextExtractor.getTextFromPage(reader, 1);
            // Extracting month and Year from String..
            String period1[] = page.split("PEROID");
            String period2[] = period1[0].split(":");
            String month[] = period2[1].split("-");
            String period3[] = month[1].split("ENERGY");
            String year[] = period3[0].split("VIS");

            // Extracting Northen region
            String northen[] = page.split("NORTHEN REGION");
            String nthermal1[] = northen[0].split("THERMAL");
            String nthermal2[] = nthermal1[1].split(" ");

            String nnuclear1[] = northen[0].split("NUCLEAR");
            String nnuclear2[] = nnuclear1[1].split(" ");

            String nhydro1[] = northen[0].split("HYDRO");
            String nhydro2[] = nhydro1[1].split(" ");

            String ntotal1[] = northen[0].split("TOTAL");
            String ntotal2[] = ntotal1[1].split(" ");

            // Appending filtered data into CSV file..
            writer.append("NORTHEN" + ",");
            writer.append(year[0] + ",");
            writer.append(month[0] + ",");
            writer.append(nthermal2[4] + ",");
            writer.append(nnuclear2[4] + ",");
            writer.append(nhydro2[4] + ",");
            writer.append(ntotal2[4] + "\n");

            // Extracting Western region
            String western[] = page.split("WESTERN");

            String wthermal1[] = western[1].split("THERMAL");
            String wthermal2[] = wthermal1[1].split(" ");

            String wnuclear1[] = western[1].split("NUCLEAR");
            String wnuclear2[] = wnuclear1[1].split(" ");

            String whydro1[] = western[1].split("HYDRO");
            String whydro2[] = whydro1[1].split(" ");

            String wtotal1[] = western[1].split("TOTAL");
            String wtotal2[] = wtotal1[1].split(" ");

            // Appending filtered data into CSV file..
            writer.append("WESTERN" + ",");
            writer.append(year[0] + ",");
            writer.append(month[0] + ",");
            writer.append(wthermal2[4] + ",");
            writer.append(wnuclear2[4] + ",");
            writer.append(whydro2[4] + ",");
            writer.append(wtotal2[4] + "\n");

            // Extracting Southern Region
            String southern[] = page.split("SOUTHERN");

            String sthermal1[] = southern[1].split("THERMAL");
            String sthermal2[] = sthermal1[1].split(" ");

            String snuclear1[] = southern[1].split("NUCLEAR");
            String snuclear2[] = snuclear1[1].split(" ");

            String shydro1[] = southern[1].split("HYDRO");
            String shydro2[] = shydro1[1].split(" ");

            String stotal1[] = southern[1].split("TOTAL");
            String stotal2[] = stotal1[1].split(" ");

            // Appending filtered data into CSV file..
            writer.append("SOUTHERN" + ",");
            writer.append(year[0] + ",");
            writer.append(month[0] + ",");
            writer.append(sthermal2[4] + ",");
            writer.append(snuclear2[4] + ",");
            writer.append(shydro2[4] + ",");
            writer.append(stotal2[4] + "\n");

            // Extracting eastern region
            String eastern[] = page.split("EASTERN");

            String ethermal1[] = eastern[1].split("THERMAL");
            String ethermal2[] = ethermal1[1].split(" ");

            String ehydro1[] = eastern[1].split("HYDRO");
            String ehydro2[] = ehydro1[1].split(" ");

            String etotal1[] = eastern[1].split("TOTAL");
            String etotal2[] = etotal1[1].split(" ");
            // Appending filtered data into CSV file..
            writer.append("EASTERN" + ",");
            writer.append(year[0] + ",");
            writer.append(month[0] + ",");
            writer.append(ethermal2[4] + ",");
            writer.append(" " + ",");
            writer.append(ehydro2[4] + ",");
            writer.append(etotal2[4] + "\n");

            // Extracting northernEastern region
            String neestern[] = page.split("NORTH");

            String nethermal1[] = neestern[2].split("THERMAL");
            String nethermal2[] = nethermal1[1].split(" ");

            String nehydro1[] = neestern[2].split("HYDRO");
            String nehydro2[] = nehydro1[1].split(" ");

            String netotal1[] = neestern[2].split("TOTAL");
            String netotal2[] = netotal1[1].split(" ");

            writer.append("NORTH EASTERN" + ",");
            writer.append(year[0] + ",");
            writer.append(month[0] + ",");
            writer.append(nethermal2[4] + ",");
            writer.append(" " + ",");
            writer.append(nehydro2[4] + ",");
            writer.append(netotal2[4] + "\n");
            writer.close();

        } catch (IOException ioe) {
            ioe.printStackTrace();
        }

    } 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-04T09:01:00.570

我的解决方案

```
package com.geek.tutorial.itext.table;
import java.io.FileOutputStream;
import com.lowagie.text.pdf.PdfPTable;
import com.lowagie.text.pdf.PdfPCell;
import com.lowagie.text.pdf.PdfWriter;
import com.lowagie.text.Document;
import com.lowagie.text.Paragraph;

public class SimplePDFTable
{
    public SimplePDFTable() throws Exception
    {
        Document document = new Document();
        PdfWriter.getInstance(document, 
            new FileOutputStream("SimplePDFTable.pdf"));
        document.open();
        PdfPTable table = new PdfPTable(2); // Code 1
        // Code 2
        table.addCell("1");
        table.addCell("2");
        // Code 3
        table.addCell("3");
        table.addCell("4");
        // Code 4
        table.addCell("5");
        table.addCell("6");
        // Code 5
        document.add(table);        
        document.close();
    }

    public static void main(String[] args)
    {    
        try
        {
            SimplePDFTable pdfTable = new SimplePDFTable();
        }
        catch(Exception e)
        {
            System.out.println(e);
        }
    }
} 
```

# asp.net - 从 aspnet_memberships 获取实际密码

> ID：10878699
> 
> 赞同：2
> 
> 时间：2012-06-04T08:57:08.973
> 
> 标签：asp.net, sql, entity-framework, c#-4.0

如何从 aspnet_Users 获取实际密码（已加密）

不使用会员资格我需要正常的选择语句并将密码转换为真实密码我尝试了以下代码作为示例

```
static void Main(string[] args)
        {
            using (PMAEntities context = new PMAEntities())
            {

                var Query = from U in context.aspnet_Users
                            join M in context.aspnet_Membership on U.UserId equals M.UserId
                            where U.UserName == "admin"
                            select new
                            {
                                password = (string)M.Password,
                                salt = (string)M.PasswordSalt

                            };
                if (Query != null)
                {
                    // Convert the input password to bit array
                    System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
                     byte[] inputpassword=  encoding.GetBytes("123456");
                     byte[] salt = encoding.GetBytes(Query.FirstOrDefault().salt);
                    byte[]commingpass = encoding.GetBytes(Query.FirstOrDefault().password);
                    // Combine the two arrays 
                    byte[] c = new byte[inputpassword.Length + salt.Length];
                     System.Buffer.BlockCopy(inputpassword, 0, c, 0, inputpassword.Length);
                     System.Buffer.BlockCopy(salt, 0, c, inputpassword.Length, salt.Length); 

                    //Comparer 

                    if(c.SequenceEqual(commingpass))
                    {
                        Console.WriteLine("Hiiiiiiiiiii");

                    }
                    Console.ReadLine();

                }

            }
        } 
```

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:22:12.743

不要解密密码，正如 Aristos 所说，这是一个坏主意，因为您正在损害用户的安全性。如果您只想让用户登录，这里有一个替代解决方案： [http ://www.csharpfriends.com/Articles/getArticle.aspx?articleID=344](http://www.csharpfriends.com/Articles/getArticle.aspx?articleID=344)

# ruby - 如何在 ruby Sinatra 中使用 strftime 本地化日期名称

> ID：10878700
> 
> 赞同：1
> 
> 时间：2012-06-04T08:57:13.327
> 
> 标签：ruby, localization, sinatra, strftime

例如，在 ruby​​（sinatra 应用程序）中本地化 strftime 以在法语中使用日期名称的最佳方法是什么？

我有 ：

```
"2012-06-04".strftime("%a") # => "Mon" 
```

我想 ：

```
"2012-06-04".strftime("%a") # => "Lun" 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T11:28:10.047

使用[R18n 国际化](http://r18n.rubyforge.org/)gem。在你的情况下`sinatra-r18n`宝石。它支持多种语言环境。

取自[sinatra 示例页面](http://r18n.rubyforge.org/sinatra.html)：

```
set :default_locale, 'fr' 
```

这将使默认语言环境为法语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:04:34.683

以下是您的问题的三个解决方案：

**1）**您可以覆盖方法 strftime 并执行类似的操作（在正确的类中）

```
class XXX #put the right name 
  DAY ={
    "Mon" => "Lun",
    "Tue" => "Mar",
    ...
    }

  alias :old_strftime :strftime #Keep a reference to the old method

  def strftime(arg)
    DAY[old_strftime(arg)] 
  end

end 
```

或者：

**2) [推荐]**只需在您的代码中使用上面使用的 DAY 哈希并继续

```
DAY["2012-06-04".strftime("%a")] 
```

**3）**子类化前面提到的类（用“French”作为前缀并插入上面的代码）。

# c# - 尝试在后面的代码中添加 jQuery 时，输入字符串的格式不正确

> ID：10878711
> 
> 赞同：0
> 
> 时间：2012-06-04T08:58:02.850
> 
> 标签：c#, asp.net

我试试这个，它在我调用的行中给出了标题中提到的错误`String.Format`。

```
public static void JqueryDialogue(string divId)
{
    String script = String.Format(
        "$(document).ready(function(){ $('#{0}').dialog('open'); });", 
        divId);

    // Gets the executing web page
    Page page = HttpContext.Current.CurrentHandler as Page;
    string codeId = "openDialoge" + divId.ToString();

    // Checks if the handler is a Page and that the script isn't already on Page
    if (page != null && !page.ClientScript.IsClientScriptBlockRegistered(codeId))
    {
        page.ClientScript.RegisterStartupScript(
            typeof(JavascriptHelper), 
            codeId, 
            script,
            true);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T09:00:44.813

如果你使用`String.Format`你需要转义你想要输出的字符`{`和字符，因为它们是 Javascript 代码。`}`为此，您分别使用`{{`和`}}`。

[您可以在此处](http://msdn.microsoft.com/en-us/netframework/aa569608.aspx)阅读有关字符串格式的更多信息，其中还解释了转义花括号导致的奇怪行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:02:10.460

我认为您将需要转义`{`after 函数声明，例如

```
String script = String.Format("$(document).ready(function()
{{ $('#{0}').dialog('open'); }});", divId); 
```

# vxml - 在 2 个扩展之间使用 vxml 传输

> ID：10878712
> 
> 赞同：1
> 
> 时间：2012-06-04T08:58:05.720
> 
> 标签：vxml, voicexml

我想将呼叫从 A 转移到分机 B。B 分机也在运行 vxml。

如何将参数从 A 传输到 B。

我看到可以选择将 ani 参数附加到目的地。如何在 B 扩展 vxml 上调用它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:09:16.553

我不知道在 VoiceXML 传输期间直接传递参数的任何方法。但是您可以开发一种类型的 CTI 中间件，您可以在其中将参数存储在数据库中并键入唯一编号。然后，您可以在转接呼叫时使用该号码作为 ANI，假设您使用的平台允许您欺骗 ANI。然后，当 vxml 应用程序 B 应答呼叫时，它将首先检索 ANI，然后在 ANI 上的数据库中查找以检索参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:01:49.823

如果您使用 VXML

您是否尝试使用**传输**标签的**aai**属性？

 **```
 `<transfer
     aai = "string"
     aaiexpr = "ECMAScript_Expression"
   bridgeexpr = "ECMAScript_Expression"
    cond = "string"
    connecttimeout = "integer"
    connecttimeoutexpr = "ECMAScript_Expression"
    dest = "string"
    destexpr = "ECMAScript_Expression"
    expr = "ECMAScript_Expression"
    maxtime = "integer"
    maxtimeexpr = "ECMAScript_Expression"
    name = "string"
    transferaudio = "URI"
    transferaudioexpr = "ECMAScript_Expression"
    type = "string"
    />` 
```

此处发送的字符串可以作为 VoiceXML 上下文中的会话参数检索 就像这个**session.connection.aai**

希望这可以帮助**

# c# - EntityDataSource 查询内连接

> ID：10878713
> 
> 赞同：2
> 
> 时间：2012-06-04T08:58:08.277
> 
> 标签：c#, entity-framework, entitydatasource

我有一个带有 3 个表的数据库：

```
User{UserId,UserName}
Role{RoleId,RoleName}
User_Role{UserId,RoleId} 
```

这个查询：

```
int userIdPassByUrl = 0;
MyDbContext ctx = new MyDbContext();
var query = (from role in ctx.Role
        join userRole in ctx.User_Role on role.RoleId equals userRole.RoleId
        where userRole.UserId == userIdPassByUrl
        select new { role.RoleId, role.RoleName }).Distinct(); 
```

我需要在带有 EntityDataSource 的 Gridview 中显示上述查询的结果，可以是代码，也可以在设计模式下设置它。

这是我的 EntitydataSource：

```
<asp:EntityDataSource ID="EdsRolesByUser" runat="server" 
        ConnectionString="name=myDbEntities"
        DefaultContainerName="myDbEntities" EnableFlattening="False"
        EntitySetName="Roles" EntityTypeFilter="Role"
        Select="it.[RoleId], it.[RoleName]">
    </asp:EntityDataSource> 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:17:29.677

终于明白了。必须修改 EntityDataSource 删除 EntitySetName 和 EntityTypeFilter 属性，并像这样添加 CommandText：

```
CommandText="SELECT DISTINCT userRole.RoleId, role.RoleName FROM Role AS role
INNER JOIN User_Role as userRole
ON role.RoleId = userRole.RoleId
WHERE userRole.UserId = @UserIdPassbyUrl" 
```

这个链接帮助我： http: [//msdn.microsoft.com/en-us/library/aa697427 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/aa697427(v=vs.80).aspx)

# google-drive-api - 我可以用 Java1.4 开发 Google Drive 应用吗？

> ID：10878715
> 
> 赞同：1
> 
> 时间：2012-06-04T08:58:23.857
> 
> 标签：google-drive-api

我正在开发一个在 java 1.4 环境下运行的应用程序。而且我知道 Google Drive sdk 是在 Java1.5 或 1.6 中发布的。你能告诉我解决上述问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:44:58.013

Java 1.5 or higher is required by the Google API Java Client, as stated [here](http://code.google.com/p/google-api-java-client/).

# c++ - qt 类中的线程

> ID：10878720
> 
> 赞同：0
> 
> 时间：2012-06-04T08:58:53.533
> 
> 标签：c++, multithreading, qt

我在一个定义了一些数据的 qt 应用程序中有这个类：

```
class TableView:public QWidget 
{
  Q_OBJECT

  public:TableView (QWidget * parent = 0);

  std::vector < float >  arr; 
```

和一些类函数等等。现在我想在另一个线程（可能从这个类内部）中添加一个套接字服务器，当它从套接字接收某些东西时，它能够访问这个类的数据，计算新数据并返回。

对于我使用的测试：

```
 //defines
  DWORD WINAPI SocketHandler(void* lp);
  DWORD WINAPI starttremeshserver(void* lp);

  CreateThread(0,0,&starttremeshserver, (void*)csock , 0,0); 
```

这行得通。现在我需要一些简单且独立于平台的东西。因为我在 qt 工作，所以可能与 qthread 有关。

所以问题是，我可以在一个可以访问类数据的类中创建一个新的线程函数吗？泰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T13:52:09.417

Qt 提供了你需要的一切。您的需求如下：

1.  对类的数据成员的线程安全（序列化）访问`TableView`。

2.  网络原语。

3.  灵活地将网络访问移至单独的线程。

您可能正在从网络接收数据，并希望更新`arr`成员。你会这样做：

1.  创建一个`QObject`派生类，比如`Processor`，它有一个设置网络连接的插槽（可能是一个`QTcpServer`）。建立连接后，用于`QTcpSocket`交换数据。确保您的所有数据处理都在类的插槽中完成。当您在向量中有要更新的新值时，只需`emit`一些信号，例如`hasFloat(int,float)`.

2.  在. `setFloat(int,float)`_`TableView`

3.  `setFloat`将信号从实例连接`Processor`到您的`TableView`.

此时，一切都在 GUI 线程中运行，但代码是非阻塞的，因为您从不等待网络数据；`QTcpServer`您响应和发出的信号`QTcpSocket`。如果你愿意，你可以这样。

`Processor`如果您的基准测试显示您的主线程受 CPU 限制，则让该类在单独的线程中运行，那么这很简单：

```
int main(int argc, char** argv) {
   bool separateThread = true;
   QApplication app(argc, argv);
   TableView view;
   Processor proc;
   connect(&proc, SIGNAL(hasFloat(int,float)), &view, SLOT(setFloat(int,float)));
   QThread thread;
   if (separateThread) {
      thread.start();
      proc.moveToThread(&thread);
   }
   view.show();
   const bool rc = app.exec();
   if (thread.isRunning()) {
      thread.exit(); // tells the event loop in the thread to bail out
      thread.wait(); // waits for the above to finish
   }
   return rc;
} 
```

有一种误解认为跨线程传播事物会神奇地使它们变得更好。线程是特定问题的解决方案：正在完成的计算的 CPU 限制性和阻塞 API。如果您的处理是微不足道的，那么您不太可能受 CPU 限制。Qt 提供非阻塞、异步网络。因此，通常完全不需要旋转第二根线。

您必须先显示实数才能显示。否则，您正在购买*线程的货物崇拜*：哦，它是网络，它必须进入一个单独的线程。不，不一定。先测量。了解你在做什么。

上述代码中线程安全的原因如下：当你将`Processor`实例移动到不同的线程时，Qt 会使用 type.slot 重新连接所有的信号槽连接`Qt::QueuedConnection`。因此，当`Processor`发出时`hasFloat`，它会在内部导致一个事件在所在线程的事件队列中排队`TableView`- 在这种情况下是 GUI 线程。当事件循环旋转时（这里是应用程序的事件循环）——它将接收事件并执行对`TableView::setFloat`. 这确保了对`arr`数据成员的访问是序列化的，并且不可能有来自多个线程的并发访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:10:21.073

Qt 有线程支持，可以在[这里](http://qt-project.org/doc/qt-5.0/threads.html)找到。

除了线程和访问数据之外，您还需要同步线程安全代码。这在 linux 中称为 pthread mutex，在 Qt 中称为 QMutex，如此处[所述](http://qt-project.org/doc/qt-5.0/threads-synchronizing.html)。

[您可以在此处](http://doc.qt.nokia.com/4.7-snapshot/network-programming.html)找到 Qt 网络原语。

使用这些线程和网络原语的 Qt 实现将是可移植的，因此应该在 Windows 上为您工作。

关于从访问该类数据的类创建线程函数的问题，答案是肯定的。与其创建线程函数，不如创建一个线程对象，即QThread。创建线程对象时，您需要传递对所述类的实例的引用，这将允许线程访问类实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T09:11:20.013

我个人会寻找更高级的套接字支持，也许是基于 boost 的东西，无论如何你可以`<thread>`在 C++11 中使用线程。

要回答您的具体问题：

```
class Foo
{
private:
    void spinthread()
    {
        thread t([this] { 
            this->bar = 12;
        });
    } 

private:
   int bar;
} 
```

如果您使用的是 Win32 线程 API，则 thread proc 有一个参数，您可以使用该参数在 CreateThread 调用期间将您的实例传递给该参数。

# java - 如何使用 itext 打开受密码保护的 pdf

> ID：10878721
> 
> 赞同：2
> 
> 时间：2012-06-04T08:58:54.980
> 
> 标签：java, pdf, itext

我正在使用 iText 库来阅读 PDF 文件。它适用于所有 pdf 文件，除了受密码保护的文件。我通过使用`PdfReader`类的重载构造函数来使用某种方式

```
PdfReader reader = new PdfReader("locked pdf file","password".getBytes()); 
```

但它显示显示错误，如：

> 线程“主”java.lang.NoClassDefFoundError 中的异常：org/bouncycastle/asn1/ASN1OctetString

还有其他可以阅读受密码保护的pdf文件吗？或者我应该将充气城堡包含在我的项目库中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-01-18T12:58:37.557

```
try {
   PdfReader pdfReader = new PdfReader(String.valueOf(file));
   pdfReader.isEncrypted();
} catch(IOException) {
   e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T09:12:53.740

从 iText 2.0.0 开始，您需要 BouncyCastle 罐子。您需要[从其网站](http://www.bouncycastle.org/)下载它。可以从这里找到更多信息：

[java.lang.NoClassDefFoundError](http://itext-general.2136553.n4.nabble.com/java-lang-NoClassDefFoundError-org-bouncycastle-asn1-ASN1OctetString-td2151526.html)

# javascript - 使用 QTip2 Jquery 库的自定义分层菜单过早触发 MouseEnter/MouseLeave

> ID：10878726
> 
> 赞同：1
> 
> 时间：2012-06-04T08:59:23.707
> 
> 标签：javascript, jquery, jquery-plugins, mouseevent

一个多月以来，我一直在努力寻找我对 QTip2 演示菜单的改编中的错误。除了剩下的 2 个问题外，我的实现运行良好。两者都在下面用小提琴详细说明。我真的希望有人能帮助我完成这个项目。

2个问题：http: [//jsfiddle.net/UGQ95/10/](http://jsfiddle.net/UGQ95/10/)

只要用户不使用菜单，“第 1 层”菜单就会正确打开并正确保留。这意味着每当用户完成悬停任何菜单项时，它都会返回以指示用户当前项。菜单的行为当前是正确的，保持打开的“Tier 1”和“Tier 2”，而“Tier 3”（如果有）在悬停时突出显示，但在悬停之前保持隐藏。

**问题 1。**您会注意到顶层“Tier 1”在“Tier 1”项目之间移动时试图在 mouseleave 时立即强制自己进入“alwaysactive”项目。我相信这是由 #navigation 上的 mouseleave 触发器过早触发引起的。这个 JS 在最后 10 行中找到。

**问题 2。**在提供的小提琴中，您会注意到我已将“Tier 1 - Maintenance”、“Tier 2 - Bus Stops”和“Tier 3 - Create Bus Stop”设置为活动页面。将其他“Tier 2”项目悬停在“Bus Stops”旁边时，我无法让“Tier 2”活动项目失去突出显示，直到它需要返回显示为活动状态。

非常感谢你们中的任何人能提供帮助！我真的希望我能够清楚地说明我的问题。

干杯德文

# c# - 解密时 Base-64 字符数组的长度无效

> ID：10878727
> 
> 赞同：4
> 
> 时间：2012-06-04T08:59:38.963
> 
> 标签：c#, asp.net, exception, base64, encryption

在某些情况下，我通过 (decryption) 得到以下异常，我无法准确识别原因：

> Base-64 字符数组的长度无效

我的代码：

```
public static string encodeSTROnUrl(string thisEncode)
{
  if (null == thisEncode)
      return string.Empty;

  return HttpUtility.UrlEncode(Encrypt(thisEncode));
}

// string thisDecode = "3Dn%2bsJJPXprU4%3d"; //this is the value which cause the exception.
public static string decodeSTROnUrl(string thisDecode)
{
   return Decrypt(HttpUtility.UrlDecode(thisDecode));
}

QueryStringEncryption.Cryptography.decodeSTROnUrl(Request.QueryString["val"].ToString()); 
```

引发异常的确切行是：

```
 Byte[] byteArray = Convert.FromBase64String(text); 
```

我以为我通过在加密和解密操作之前和之后进行编码和解码来解决这个问题。但是有些值仍然抛出这个异常。

* * *

注意：我注意到一些奇怪的行为：作为查询字符串发送到我的邮件的 id 是：`n%2bsJJPXprU4%3d`并且它没有例外地工作..

以及有问题的用户发送的 url 包含`3Dn%2bsJJPXprU4%3d`

这是浏览器的问题吗？？！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T09:52:58.303

当它被解析到请求中时，已经完成了对查询字符串值的解码。尝试不使用“HttpUtility.UrlDecode”

```
public static string decodeSTROnUrl(string thisDecode)
    {
        return Decrypt(thisDecode);
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T09:03:16.820

64 位编码在字符串中存在空格问题。加密后尝试添加以下内容

```
sEncryptedString = sEncryptedString.Replace(' ', '+'); 
```

# iphone - 如何实现 JSON 解析代码以获取对 NSArray 的响应？

> ID：10878728
> 
> 赞同：0
> 
> 时间：2012-06-04T08:59:50.813
> 
> 标签：iphone, ios, json, nsarray

获取数组响应以下的 iphone 代码如何？这里我需要存储内容“Id 值”、“LastUpdated 值”和“Title”这三个值需要存储在 3 个不同的数组中怎么可能？

这是回应：

```
[
    {
        "Contents": [
            {
                "Id": 381,
                "LastUpdated": "/Date(1338347251003+0000)/",
                "Title": "Forrester Study - Total Economic Impact of Lync",
                "Url": "http://infra2apps.blob.core.windows.net/eventapp/Forrester Study - Total Economic Impact of Lync_booth1.pdf"
            }
        ],
        "Id": 1,
        "ImageUrl": "http://infra2apps.blob.core.windows.net/eventapp/Lync.png",
        "Name": "Unified Communications & Collaborations",
        "Sessions": [
            {
                "Description": "Microsoft Lync delivers Unified Communications to help people connect in new ways, anytime, anywhere.  Learn how HP and Microsoft are helping customers transform their business infrastructure and gain greater productivity by making every communication an interaction that is more collaborative and engaging.",
                "EndDate": "/Date(1338922800000+0000)/",
                "FriendlyName": "TB3257",
                "Id": 1,
                "Location": "TBD",
                "Speakers": [
                    {
                        "Company": "Microsoft",
                        "Email": "ashimas@microsoft.com",
                        "Name": "Ashima Singhal",
                        "Title": "Group Marketing Manager, Lync"
                    },
                    {
                        "Company": "HP",
                        "Email": "dragana.beara@hp.com",
                        "Name": "Dragana Beara",
                        "Title": "HP"
                    }
                ],
                "StartDate": "/Date(1338920100000+0000)/",
                "Title": "Connecting People in New Ways with Microsoft Lync"
            }
        ]
    },
    {
        "Contents": [
            {
                "Id": 385,
                "LastUpdated": "/Date(1338347251143+0000)/",
                "Title": "Windows 8 Consumer Preview - Product Guide - Business",
                "Url": "http://infra2apps.blob.core.windows.net/eventapp/Windows 8 Consumer Preview - Product Guide - Business_booth2.pdf"
            },
            {
                "Id": 383,
                "LastUpdated": "/Date(1338347251080+0000)/",
                "Title": "Mitigating Risk - Why Sticking with Windows XP is a Bad Idea",
                "Url": "http://infra2apps.blob.core.windows.net/eventapp/Mitigating Risk - Why Sticking with Windows XP is a Bad Idea - IDC - May 2012_booth2.pdf"
            }
        ],
        "Id": 2,
        "ImageUrl": "http://infra2apps.blob.core.windows.net/eventapp/Windows-brand.png",
        "Name": "Windows the right choice for business",
        "Sessions": [
            {
                "Description": "Microsoft and HP are partnering together to migrate customers to Windows 7 while working closely together to build new Windows 8 products that will easily integrate into a Windows 7 environment.   This session provides insight on how these new offerings will provide enterprise grade solutions with no compromise business devices that increase productivity, security, and manageability and the path to get there.",
                "EndDate": "/Date(1338935400000+0000)/",
                "FriendlyName": "TB3256",
                "Id": 3,
                "Location": "TBD",
                "Speakers": [
                    {
                        "Company": "Microsoft",
                        "Email": "snagy@microsoft.com",
                        "Name": "Sara Nagy",
                        "Title": "Senior Account Manager - OEM"
                    }
                ],
                "StartDate": "/Date(1338932700000+0000)/",
                "Title": "Preparing for Windows 8"
            }
        ]
    },
    {
        "Contents": [
            {
                "Id": 382,
                "LastUpdated": "/Date(1338347251043+0000)/",
                "Title": "HP EDW Appliance Solution Brief",
                "Url": "http://infra2apps.blob.core.windows.net/eventapp/HP EDW Appliance Solution Brief_booth3.pdf"
            },
            {
                "Id": 380,
                "LastUpdated": "/Date(1338347250970+0000)/",
                "Title": "HP DBCA Datasheet",
                "Url": "http://infra2apps.blob.core.windows.net/eventapp/11475_DBCA-Datasheet_booth3.pdf"
            }
        ],
        "Id": 3,
        "ImageUrl": "http://infra2apps.blob.core.windows.net/eventapp/SQL.png",
        "Name": "Enterprise Information Platform",
        "Sessions": [
            {
                "Description": "The Database Consolidation appliance integrates software and harware into a turnkey solution that creates tremendous opportunities to virtualize demanding applications requiring enterprise-class resiliency. This session will dive into this NEW Private Cloud Appliance, leveraging virtualization and tuned and balanced infrastructure to deliver Private Cloud capabilities. We’ll go into detail including how to inventory and gather performance characteristics to provide detailed appliance-specific sizing and placement guidance using the MAP toolkit, how the appliance architecture enables high IO performance, isolation. and resiliency, and into details around core operational capabilities such as P-to-V and self-service workflow-enabled provisioning of new instances. Also, we will cover advanced capabilities such as chargeback, sustained engineering (upgrades and patching), load balancing with Live Demos that will show off the core capabilities of the appliance.",
                "EndDate": "/Date(1339017300000+0000)/",
                "FriendlyName": "TB3323",
                "Id": 5,
                "Location": "TBD",
                "Speakers": [
                    {
                        "Company": "Microsoft",
                        "Email": "markmort@microsoft.com",
                        "Name": "Mark Mortimore",
                        "Title": "Senior Program Manager, SQL Server Appliances"
                    }
                ],
                "StartDate": "/Date(1339014600000+0000)/",
                "Title": "Cloud on your terms - Database Consolidation Appliance"
            },
            {
                "Description": "Leveraging virtual and scalable infrastructure - 100s of servers can be efficiently, reliably, and manageably consolidated. This session will dive into the NEW DBC Appliance, leveraging virtualization and tuned and balanced infrastructure.  Using demos, we will show all phases of consolidation including how to assess environments using the MAP toolkit, details around core operational capabilities such as P-to-V and self-service workflow-enabled provisioning of new fully configured servers.  Also, we will cover advanced capabilities such as chargeback, s load balancing…  ",
                "EndDate": "/Date(1339006800000+0000)/",
                "FriendlyName": "DT3324",
                "Id": 6,
                "Location": "TBD",
                "Speakers": [
                    {
                        "Company": "Microsoft",
                        "Email": "markmort@microsoft.com",
                        "Name": "Mark Mortimore",
                        "Title": "Senior Program Manager, SQL Server Appliances"
                    }
                ],
                "StartDate": "/Date(1339005600000+0000)/",
                "Title": "Database Consolidation & Private Cloud Appliance"
            }
        ]
    },
    {
        "Contents": [],
        "Id": 4,
        "ImageUrl": "http://infra2apps.blob.core.windows.net/eventapp/WinStorageSvr.png",
        "Name": "Windows Storage Server",
        "Sessions": []
    },
    {
        "Contents": [],
        "Id": 5,
        "ImageUrl": "http://infra2apps.blob.core.windows.net/eventapp/SQL.png",
        "Name": "Platform Modernization/Migration",
        "Sessions": [
            {
                "Description": "Microsoft and HP engineering have collaborated on delivering mission critical systems which outperform historic tier 1 platforms.   Although many companies rely on the combination of HP and Microsoft for Mission Critical workloads, there has been a lingering doubt that the combined platform can scale to the needs of large enterprises currently relying on IBM Mainframes.  This session will describe a signficant study just completed that puts to rest the myths that mainframes are the only platform that scales, can support high-IO and delivery mission critical capabilities.  Finally an apples to apples comparison that you can use as you modernize your IT enviornment.",
                "EndDate": "/Date(1339093200000+0000)/",
                "FriendlyName": "DT3471",
                "Id": 8,
                "Location": "TBD",
                "Speakers": [
                    {
                        "Company": "Microsoft",
                        "Email": "scorosen@microsoft.com",
                        "Name": "Scott Rosenbloom",
                        "Title": "SSP Platform Modernization"
                    }
                ],
                "StartDate": "/Date(1339092000000+0000)/",
                "Title": "Mainframe Alternative: Windows Server, SQL Server and HP DL 980"
            }
        ]
    }
] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T09:14:31.270

您的回复不是有效的 JSON。您无法使用标准 JSON 解析器对其进行解析。（您可以使用[http://jsonlint.com/](http://jsonlint.com/)进行验证。）

//edit：因此，在您进行编辑后，您确实拥有有效的 JSON 数据。要解析它，您可以使用您找到的任何 JSON 解析框架（一种流行的框架，例如[json-framework](https://github.com/stig/json-framework)）。

但是如果你只为 iOS5 构建，你可以使用系统库[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:20:57.907

使用 SBJsonParser 解析 JSON，您可以使用此[链接](http://chris.photobooks.com/json/default.htm)来可视化您的 JSON，以便您知道将在哪里使用哪个数据结构，其余的就像 @imsult 所说的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T09:55:57.167

抱歉，由于时间问题没有解释下面的代码

```
-(void) dataRecieved: (NSDictionary *) receivedDict
{
 NSArray *contentsArray = [receivedDict objectForKey:@"Contents"];
 NSArray *sessionsArray = [receivedDict objectForKey:@"Sessions"];

 for (NSDictionary *contentsDict in contentsArray )
    {
        Contents *objContents = [[Contents alloc]init];
        objContents.id = [contentsDict objectForKey:@"ID"];
        objContents.lastUpdate = [contentsDict objectForKey:@"LastUpdate"];
        objContents.title = [contentsDict objectForKey:@"Title"];

        [contentObjectsArray addObject: objContents]; 
    }

    for (NSDictionary *sessionsDict in sessionsArray )
    {
        Sessions *objSessions = [[Sessions alloc]init];
        objSessions.id = [contentsDict objectForKey:@"ID"];
        objSessions.endDate = [contentsDict objectForKey:@"EndDate"];

        NSArray *speakersArray = [receivedDict objectForKey:@"Speakers"];

        for (NSDictionary *spearkersDict in speakersArray )
        {
            Speakers *objSpeakers = [[Speakers alloc]init];
            objSpeakers.title = [spearkersDict objectForKey:@"Title"];
            [objSessions.speakerssObjectsArray addObject: objSpeakers];
        }

        [sessionsObjectsArray addObject:objSessions]; 
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T09:18:59.290

如果您以 iOS 5 或更高版本为目标，则 JSON 支持是原生的，因此您无需添加任何外部库或实现解析器。您只需使用 NSJSONSerialization。

[请参阅文档](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

示例代码：

```
NSError* error = nil;

NSArray* parsed = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error];

if(!error) {
    //Process here
} 
```

如果您的目标 iOS 版本低于 iOS 5，则原生不支持 JSON 解析，您必须自己实现解析器，或使用适合您需求的外部库。库示例： [SBJSON](http://stig.github.com/json-framework/)

# xcode - xCode 4.3.2 中 iOS 模拟器 4.3 的问题

> ID：10878729
> 
> 赞同：1
> 
> 时间：2012-06-04T09:00:25.080
> 
> 标签：xcode, ios-simulator

我刚刚将我的 xCode 升级到 4.3.2。在此之后，我在运行按钮附近的下拉菜单中找不到 iOS 模拟器 4.3 - 只有 5.1。在以前版本的 xCode iOS 上有模拟器 4.3。

为了安装模拟器 4.3，我尝试从 xCode 首选项下载它，但我遇到了以下警告：

```
The certificate for this server is invalid. You might be connecting to a sever that is pretending to be "daw2.apple.com" which could put your confidential information at risk. 
```

似乎我的证书有问题，但我不知道是哪一个？

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:41:06.513

转到 Xcode->Preferences->Downloads->iOS 4.3 Simulator 并安装它。

# java - 如何在使用创建 jar 文件时在项目中包含库和其他非类文件夹 build.xml 中的任务

> ID：10878730
> 
> 赞同：0
> 
> 时间：2012-06-04T09:00:30.117
> 
> 标签：java, ant, build

在我的项目中，我可以在 src 文件夹下包含包，但我需要包含其他文件夹（不包含 .java 或 .class 文件）和库。

`<jar>`使用build.xml 中的任务创建 jar 文件时，如何在项目中包含库和其他非类文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:01:10.803

这是我如何执行此操作的快照：

```
<jar destfile="adasim-${version}-deps.jar" manifest="resources/MANIFEST.MF">
                        <fileset dir="${class.dir}"/>
                        <fileset dir=".">
                                <include name="resources/xml/adasim.xsd"/>
                                <include name="resources/VERSION"/>
                        </fileset>
                        <archives>
                                <zips>
                                        <fileset dir="${lib.dir}" includes="**/*.jar" excludes="**/junit*.jar"/>
                                </zips>
                        </archives>
 </jar> 
```

用于`<fileset>`选择要复制到 JAR 中的文件，`<zips>`并与 JAR 结合使用以包含 JAR 中的内容。

大量文档可以在[ant 手册](https://ant.apache.org/manual/Tasks/jar.html)中找到。

# node.js - 使用 node.js 的 utf8 console.log 输出

> ID：10878731
> 
> 赞同：3
> 
> 时间：2012-06-04T09:00:30.470
> 
> 标签：node.js, utf-8, cmd

我有一个 mysql 数据库的 utf8 信息。我想使用 console.log 将其输出到控制台。

但它显示“框”字符而不是 utf8 数据。

我在哪里丢失数据？我应该怎么做才能解决这个问题？从数据库读取数据时有问题吗？（使用 felixge-node-mysql-v0.9.5-1）或在输出到控制台期间？（使用console.log）或者它的控制台本身（windows命令窗口设置为字体“Lucida Console”）

谢谢。

更新：我现在认为这是 Windows 命令窗口字体的问题。当我使用 powershell 窗口运行相同的节点脚本时，我确实看到了不同的字符，这些字符看起来不像我期望的那样。不管是谁，当我尝试将其粘贴到此浏览器窗口时，它们会突然更改为正确的字体和字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:26:08.540

虽然我仍然喜欢更好的解决方案，但我现在发现的是以下适合我的解决方案：

我将使用 Windows PowerShell ISE。
在里面我运行了以下命令：
`chcp 65001`

从 WPSISE 的最低窗格运行 node.exe my.js 会在中间窗格中产生我想要的确切打印输出。

另一点要提的是，如果我尝试打开一个 cmd.exe 窗口并在其中运行`chcp 65001`，然后执行我的脚本，我会得到 `node.js:284 throw new Error('process.stdout cannot be closed');`

# sql - 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围

> ID：10878740
> 
> 赞同：3
> 
> 时间：2012-06-04T09:01:10.943
> 
> 标签：sql, sql-server

将 varchar 数据类型转换为 datetime 数据类型导致值超出范围

```
select a.DLNO,
       a.NAME,
       b.TOPSTRING,
       Convert(datetime,a.DOB,103) as DOB, 
       Convert(datetime,a.DOI,103) as DOI,
       Convert(datetime,b.datepushed,103) as datepushed 
from    
       PLInfo_Demo a,DLInfo_Demo b 
where 
       a.dlno=b.DLNO 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T09:06:14.477

类型`103`要求您具有欧洲日期/月份顺序的日期时间：`'dd/mm/yyyy'`

如果您先存储月份，则可能会导致此错误（例如 for `'01/13/2012'`）

如果是这种情况，请使用类型`101`( `'mm/dd/yyyy'`)

最好将日期时间存储为`DATETIME`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:32:08.797

```
sp_helptext sp_displayClinicRecordsbyclinicid

alter procedure sp_displayClinicRecordsbyclinicid

(

@id bigint,

@category char(1)

)

as

select id,ClinicName,

CONVERT(varchar(10), cast(Visitdate as datetime),101) Visitdate ,

CONVERT(varchar(19), cast(visitTime as datetime) ,101)  visitTime ,

patient_first,patient_last,patient_address,patient_city,patient_state, CONVERT(varchar(10), cast(patient_dob as datetime),101) patient_dob,

precriber,prescriptionnum,CONVERT(varchar(10),cast(pharmacyfilldate as datetime) ,101)  pharmacyfilldate,CONVERT(varchar(10),cast(prescriptionenddate as datetime) ,101) prescriptionenddate,drugname,drugformat,npi,dea,

licence,clinicid,Category,PatientFullname,Prescriber_first,Prescriber_last,Qty,Days

 from tblClinicRecords where clinicid=@id and Category=@category 
```

# c# - 如何使用主/详细信息保存课程

> ID：10878741
> 
> 赞同：2
> 
> 时间：2012-06-04T09:01:20.093
> 
> 标签：c#, master-detail

这是我的课堂记录，可以是老师和学生的主/详细/详细记录

```
class Record
{

    public string RecorNo { get; set; }

    private List<Teacher> _Student = new List<Teacher>();

    public List<Teacher> Teacher
    {

        get { return _Teacher; }
        set { _Teacher=value; }

    }
    }

class Teacher
{
    private string _TeacherName;

    public Teacher(string teachername)
    {
        _TeacherName = teachername;
    }

    public string TeacherName
    {
        get { return _TeacherName; }
        set { _TeacherName = value; }
    }

    private List<Students> _students = new List<Students>();

    public List<Students> Students
    {
        get { return _students;}
        set { _students = value;}

    }

}

class Details
{

    private string _studentname;

    public Details(string studentsname)
    {

        _studentsname = studentsname;

    } 
```

我在 2 个 datagridview 中绑定了教师/学生，如下所示：

```
TeacherBindingSource.DataSource = record.Teacher;
StudentBindingSourcce.DataSource = TeacherBindingSource;
StudentBindingSourcce.DataMember = "Student";

dataGridView1.DataSource =TeacherBindingSource;
dataGridView2.DataSource =  StudentBindingSourcce; 
```

现在我失去了如何保存这条记录。
如何将其保存到数据库中？我想拥有一个。

```
 record.Save(); method that will save the whole object. 
```

我可以遍历列表并一一插入，但记录可能已经存在于数据库中，所以我必须知道添加、更新或删除了哪条记录？

此外，如何制作一种填充教师/学生列表的方法，例如：

```
 records.LoadTeachers();
           records.Teacher("Smith").LoadStudents(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:25:07.477

你可能想看看微软的实体框架或（我最喜欢的）NHibernate 之类的 ORM（对象关系映射）库。它们存在的唯一原因是使将对象持久化到关系数据库更容易。他们可以创建新行，可以跟踪对象更新和对象之间的关系。您可以自己创建持久化对象所需的逻辑，但已建立的 ORM 库已经成熟、被广泛使用，并且可能比单个开发人员在合理时间内想出的任何东西都要好得多。

# ios - 如何在 iOS 上显示 pdf

> ID：10878744
> 
> 赞同：29
> 
> 时间：2012-06-04T09:01:40.970
> 
> 标签：ios, pdf, uiwebview

我想知道是否有任何方法可以离线构建，`xcode iOS`以便我们可以显示本地文件中的 pdf 文件。

我现在使用的方法是通过`UIWebView`显示包含 PDF URL (online) 的自定义 HTML，但如果可能的话，我想制作一个离线版本。

但是从在线研究来看，在我看来，显示 PDF 的唯一方法是通过 UIWebView，如果确实如此，是否可以从本地资源中提取文件（例如，将文件添加到我的 xcode 资源文件夹）而不是使用PDF 网址。

题外话：哪个是更好的选择？要拉本地文件还是使用在线 URL 获取 PDF 文件？

由于`UIWebView`需要连接，拉取在线 URL 似乎是一个更好的选择，因为它将是最新的和更新的。

非常感谢您的反馈。

编辑：快速提问，如果我使用该`UIDocumentInteractionController`方法或[QuickLook 框架](https://developer.apple.com/library/archive/samplecode/ZoomingPDFViewer/Listings/ZoomingPDFViewerCocoa_ZoomingPDFViewer_TiledPDFScrollView_m.html)使其脱机，这意味着我必须在每次添加新的 PDF 文章时发布更新补丁（如果我错了，请纠正我）

考虑到这一点，我当场对自己的问题提出了反驳（对不起，如果你们中的任何人觉得你们在我身上浪费时间>.<，我是一个喜欢质疑可能性和人们可以采取不同的方法来解决问题）如果从不断更新中节省时间并提供实时基础解决方案，那就是使用 UIWebView （我知道这与我的这个 SO 线程的目的相矛盾），因为这个proj 基于在线网站（从那里获取我的内容和来源），如果我要为文章部分加载他们的网站，我敢说通过添加 NSString 变量，我可以添加 NSRange viewDidLoad 函数与 UIWebView 一起使用，这样 URL 将永远不会离开新闻部分和 PDF URL。例如

我在计算器上的点的 NSRange 函数之前做过一次，所以我认为现在是将它用于这个框架应用程序的好时机。

PS - 这个应用程序是一个组织基础项目，我是一名实习生，为他们提供基础骨架框架。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-04T09:20:53.537

很多选项，这里有3个：

1) 加载和显示本地 pdf 文件的最简单方法是使用这样的 UIWebview：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"document" ofType:@"pdf"];
NSURL *targetURL = [NSURL fileURLWithPath:path];
NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
[webView loadRequest:request]; 
```

2) 您也可以使用`UIDocumentInteractionController`/`QLPreviewController`来原生显示 PDF 文件。

3) 另一种方法是构建自定义 PDF 查看器，如苹果[ZoomingPDFViewer 示例代码](https://developer.apple.com/library/archive/samplecode/ZoomingPDFViewer/Introduction/Intro.html)。（使用 UIPageViewController + CATiledLayer + UIScrollView）

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-06-04T09:14:11.983

您可以使用 UIWebView 直接从包中获取 PDF，无需调用在线 Web 服务。

本地文件：

```
NSString *html = [NSString stringWithContentsOfFile:path1 encoding:NSUTF8StringEncoding error:nil];
[self.webView loadHTMLString:html baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle]bundlePath]]]; 
```

远程文件：

```
- (void) loadRemotePdf
    {
       CGRect rect = [[UIScreen mainScreen] bounds];
       CGSize screenSize = rect.size;

       UIWebView *myWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0,0,screenSize.width,screenSize.height)];
        webView.autoresizesSubviews = YES;
            webView.autoresizingMask=(UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth);

       NSURL *myUrl = [NSURL URLWithString:@"http://www.mysite.com/test.pdf"];
       NSURLRequest *myRequest = [NSURLRequest requestWithURL:myUrl];

       [webView loadRequest:myRequest];

       [window addSubview: myWebView];
       [myWebView release];

} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-04T09:23:34.553

我建议您在处理 PDF 文件时使用[QuickLook 框架。](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/UsingtheQuickLookFramework.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-02-28T06:26:47.977

IOs 引入了一个新的工具包。它具有许多与显示 PDF 相关的专用功能。您可以在其中使用 PdfView 类从本地文件或通过 URL 显示 PDF。

[PDFKit](https://developer.apple.com/documentation/pdfkit) > [PDFView](https://developer.apple.com/documentation/pdfkit/pdfview#topics)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-04-23T10:24:49.093

**斯威夫特 4.x**

swift中的UIWebview方法：

```
//let url = URL.init(string: "https://www.adobe.com/content/dam/acom/en/devnet/acrobat/pdfs/pdf_open_parameters.pdf")! // for file in web
let url = Bundle.main.url(forResource: "filename", withExtension: ".pdf")! // for file in bundle
let webView = UIWebView.init(frame: view.frame)
webView.autoresizingMask = [.flexibleHeight, .flexibleWidth]
webView.loadRequest(URLRequest.init(url: url))
view.addSubview(webView) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-03-02T05:37:02.437

Apple 的 PDFKit 框架提供了大量代码来帮助我们处理 PDF，其中最有用的是 PDFView——它将 PDF 呈现到屏幕上并让用户与之交互。

要试用它，首先导入 PDFKit 框架：

```
import PDFKit 
```

接下来，将此代码添加到您的 viewDidLoad() 方法以创建 PDFView 并使其填充所有可用空间：

```
let pdfView = PDFView()

pdfView.translatesAutoresizingMaskIntoConstraints = false
view.addSubview(pdfView)

pdfView.leadingAnchor.constraint(equalTo: view.safeAreaLayoutGuide.leadingAnchor).isActive = true
pdfView.trailingAnchor.constraint(equalTo: view.safeAreaLayoutGuide.trailingAnchor).isActive = true
pdfView.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor).isActive = true
pdfView.bottomAnchor.constraint(equalTo: view.safeAreaLayoutGuide.bottomAnchor).isActive = true 
```

最后，创建一个 URL 指向您在捆绑包中某处（或您的文档目录中的一个）中的 PDF，然后从中创建一个 PDFDocument 对象并将其传递给 PDF 视图：

```
guard let path = Bundle.main.url(forResource: "example", withExtension: "pdf") else { return }

if let document = PDFDocument(url: path) {
    pdfView.document = document
} 
```

完毕！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-09-19T23:40:17.177

我找到了这个网站，这是一种非常简单的方法，可以使用 iPhone 上加载的任何可用的支持 pdf 的应用程序打开 pdf。（我更喜欢 iBooks）

[呈现和打开 pdf 文件的简单方法](http://ioscreator.com/open-pdf-documents-in-ios/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-03-03T14:13:31.397

就我而言，我有一个 tableView，它基于选定的行或详细信息指示符（在我的应用程序的不同部分有两个不同的 ViewController）。我有一个 PDFView 的 @IBOutlet 并使用此代码打开所需的 PDF，该 PDF 保存在应用程序中：

```
@IBOutlet weak var myPDFView: PDFView!

var mySelection = String()

override func viewDidLoad() {
    super.viewDidLoad()

    if let path = Bundle.main.path(forResource: mySelection, ofType: "pdf") {
        let url = URL(fileURLWithPath: path)

        if let myDocument = PDFDocument(url: url) {
            myPDFView.document = myDocument
            myPDFView.autoScales = true
            myPDFView.displayMode = .singlePageContinuous
            myPDFView.displayDirection = .vertical
            myPDFView.autoresizingMask = [.flexibleWidth, .flexibleHeight]
        }
    }
} 
```

这一切都很好。正确的 PDF 可以轻松加载并像我想要的那样填满屏幕。但是，PDF 总是向上滚动一点，导致顶部隐藏在导航栏下。请注意，在下面的屏幕截图中，文档的顶部不可见，但底部在底部标签栏的上方。我认为这与从页面底部开始的 PDF 坐标有关，但无法弄清楚如何让它加载文档的最顶部，因此顶部的背景是可见的。

![模拟器屏幕截图链接](../Images/b2a8623094e02d5a6070e765f369afac.png)

也许这与 autoScales 有关？

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-07-30T08:19:58.703

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Yourpdf" ofType:@"pdf"];
NSURL *targetURL = [NSURL fileURLWithPath:path];
NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
UIWebView *webView=[[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 300, 400)];
[[webView scrollView] setContentOffset:CGPointMake(0,500) animated:YES];
[webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"window.scrollTo(0.0, 50.0)"]];
[webView loadRequest:request];
[self.view addSubview:webView]; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-03-06T18:48:30.563

您还可以使用 UIDocumentInteractionController ！

`let docController = UIDocumentInteractionController(url: URL(fileURLWithPath: path)) documentInteractionController.presentPreview(animated: true)`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-03-20T06:57:08.070

已经很晚了，但是 UIWebview 在加载 pdf 文件时有一些限制，它不会正确加载可编辑的 pdf。所以加载任何类型的pdf文件使用以下代码

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"pdfFileName" ofType:@"pdf"]];
PDFView *view = [[PDFView alloc] initWithFrame:self.view.frame];
view.document = [[PDFDocument alloc] initWithURL:url];
[self.view addSubview:view]; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-23T12:43:37.087

我们是 iOS 程序员，没有 JS/Web 程序员，所以请继续使用 swift 和 Apple API。更快、更清洁的方法是使用 Quicklook。

我引用 calimarkus。

反正代码很简单：

```
//  Copyright © 2019 ing.conti. All rights reserved.
//

import UIKit
import QuickLook

class ViewController: UIViewController, QLPreviewControllerDataSource {

    var previewController:QLPreviewController?

    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view, typically from a nib.

        self.previewController = QLPreviewController()
        previewController!.dataSource = self
        present(previewController!, animated: true)

    }

    //QL delegate:

    func numberOfPreviewItems(in controller: QLPreviewController) -> Int {
        return 1
    }

    func previewController(_ controller: QLPreviewController, previewItemAt index: Int) -> QLPreviewItem {

        guard let url = Bundle.main.url(forResource: "SAMPLE", withExtension: "pdf") else {
            fatalError("Could not load pdf")
        }

        return url as QLPreviewItem 
    }
} 
```

# objective-c - 如何检测 OSX 上正在运行的应用程序

> ID：10878746
> 
> 赞同：2
> 
> 时间：2012-06-04T09:01:47.810
> 
> 标签：objective-c, xcode, macos, cocoa, background-process

我想将我的应用程序作为菜单栏应用程序，我已经做到了。而且我还想跟踪正在运行的应用程序。

NSRunningApplication 方法返回所有正在运行的应用程序。但我想检测现在唯一激活的应用程序。（用鼠标单击或命令+选项卡...）我怎样才能找到它？

我在下面编写了代码：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
     [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(performTimerBasedUpdate) userInfo:nil repeats:YES];
}

- (void)performTimerBasedUpdate {
     nowRunning = [NSRunningApplication currentApplication];
     nowRunningName = [nowRunning localizedName];
} 
```

但是，它返回我创建的应用程序名称（self）。

*   已回答

我终于找到答案了：谢谢i-blis。我可以使用过滤器获得激活的应用程序。我不知道 isActive 属性！

```
runningApplications_ = [[NSWorkspace sharedWorkspace] runningApplications];
nowRunning = [[runningApplications_ filteredArrayUsingPredicate:isActive] objectAtIndex:0];
bundleIdentifier_ = [nowRunning bundleIdentifier];
localizedName = [nowRunning localizedName]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T12:11:35.673

您可以轻松找到应用程序是否处于活动状态`isActive`。然后随意查看`localizedName`或`bundleIdentifier`。我对 Objective-C 不是很流利，但是使用 Macruby 语法，您可以通过以下方式获得它：

```
NSWorkspace.sharedWorkspace.runningApplications
    .select { |e| e.isActive == true }
    .map { |e| e.localizedName } 
```

您可能需要过滤掉自己的应用程序：我没有测试菜单栏应用程序在这方面的处理方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T09:29:44.270

```
NSWorkspace *workSpace = [NSWorkspace sharedWorkspace];

NSString *appPathIs = [workSpace fullPathForApplication:appName];

NSString *identifier = 
   [[NSBundle bundleWithPath:appPathIs] bundleIdentifier];

NSArray *selectedApps = 
   [NSRunningApplication runningApplicationsWithBundleIdentifier:identifier]; 
```

# jwebunit - 使用jwebunit时如何从输入标签中读取值

> ID：10878747
> 
> 赞同：0
> 
> 时间：2012-06-04T09:01:55.730
> 
> 标签：jwebunit

我需要从 html 页面的一系列输入标签中读取值。任何人都可以在这方面帮助我吗？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:04:41.203

在使用 JWebUnit 时，可以通过以下方式获取网页中输入标签的值..：

> getElementAttributeByXPath("table//tr[2]//td[2]/input[1]","value")

它给出了输入标签的 value 属性的值。

# spring - Spring mvc添加多行

> ID：10878748
> 
> 赞同：4
> 
> 时间：2012-06-04T09:02:07.433
> 
> 标签：spring, model-view-controller, jsp, rows

我需要你的帮助，因为标题说我在从 jsp 表单中插入多行时遇到问题。该代码来自该站点的答案。

控制器

```
@ModelAttribute("programform")
public ProgramForm populatePojos() {
    // Don't forget to initialize the pojos list or else it won't work
    ProgramForm programform = new ProgramForm();
    List<Programs> programs = new ArrayList<Programs>();
    for(int i=0; i<2; i++) {
        programs.add(new Programs());

    }
    programform.setPrograms(programs);
    return programform;
}

@RequestMapping(value = "/createprog")
public ModelAndView tiles2(@ModelAttribute("programform") ProgramForm  programform,
        BindingResult result) {
    //Map<String, Object> model = new HashMap<String, Object>();
    //model.put("articles",  articleService.listArticles());

    return new ModelAndView("createprogram");
}

@RequestMapping(value = "/saveprogram", method = RequestMethod.POST)
public ModelAndView saveProgram(@ModelAttribute("programform") ProgramForm  programform,
        BindingResult result) {
    for(Programs programs : programform.getPrograms()) {
           System.out.println(programs.getProgram_id());
           articleService.addProgram(programs);
        } 
```

jsp

```
 <c:url var="saveProgramUrl" value="/articles/saveprogram.html" />
<form:form modelAttribute="programform" method="POST" action="${saveProgramUrl}">
<table>
<tr>
            <th>ProgramId</th>
            <th>Date</th>
            <th>Type</th>
            <th>Start</th>
            <th>End</th>
            <th>Location</th>
            <th>User</th>
            <th>Program Name</th>
</tr>
    <tr> 
                <th><form:input path="programs[0].program_id" /></th>
                 <th> <form:input path="programs[0].date" id="datepick" class="date-pick"/>
        <script type="text/javascript">
            datepickr('datepick', { dateFormat: 'Y-m-d' });
        </script></th>
                <th><form:input path="programs[0].type" /></th>
                <th><form:input path="programs[0].start" /></th>
                <th><form:input path="programs[0].end" /></th>
                <th><form:input path="programs[0].location" /></th>
                <th><form:input path="programs[0].user_id" /></th>
                <th><form:input path="programs[0].program_name" /></th>
    </tr>
 <tr> 
                <th><form:input path="programs[1].program_id" /></th>
                 <th> <form:input path="programs[1].date" id="datepick" class="date-pick"/>
        <script type="text/javascript">
            datepickr('datepick', { dateFormat: 'Y-m-d' });
        </script></th>
                <th><form:input path="programs[1].type" /></th>
                <th><form:input path="programs[1].start" /></th>
                <th><form:input path="programs[1].end" /></th>
                <th><form:input path="programs[1].location" /></th>
                <th><form:input path="programs[1].user_id" /></th>
                <th><form:input path="programs[1].program_name" /></th>
    </tr>
</table>
<br/>
<input type="submit" value="Insert User" />
</form:form> 
```

程序

```
 package net.roseindia.model;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name = "program")
public class Programs {

    @Id
    @Column(name = "Program_Id")
    private int program_id;
    @Column(name = "Date")
    private String date;
    @Column(name = "Duty_Type")
    private String type;
    @Column(name = "Duty_Start_Time")
    private String start;
    @Column(name = "Duty_End_Time")
    private String end;
    @Column(name = "Location")
    private String location;
    @Column(name = "User_Id")
    private int user_id;
    @Column(name = "Program_Name")
    private String program_name;

    public int getProgram_id() {
        return program_id;
    }

    public void setProgram_id(int program_id) {
        this.program_id = program_id;
    }

    public String getDate() {
        return date;
    }

    public void setDate(String date) {
        this.date = date;
    }

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }

    public String getStart() {
        return start;
    }

    public void setStart(String start) {
        this.start = start;
    }

    public String getEnd() {
        return end;
    }

    public void setEnd(String end) {
        this.end = end;
    }

    public String getLocation() {
        return location;
    }

    public void setLocation(String location) {
        this.location = location;
    }

    public int getUser_id() {
        return user_id;
    }

    public void setUser_id(int user_id) {
        this.user_id = user_id;
    }

    public String getProgram_name() {
        return program_name;
    }

    public void setProgram_name(String program_name) {
        this.program_name = program_name;
    }

    public Programs() { 

    }

} 
```

节目表

```
package net.roseindia.model;

import java.util.List;

public class ProgramForm {

    private List<Programs> programs;

    public List<Programs> getPrograms() {
        return programs;
    }

    public void setPrograms(List<Programs> programs) {
        this.programs = programs;
    }

} 
```

当我按下按钮将其保存到数据库中没有插入任何内容的程序时，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:20:05.560

要添加多行，您需要延迟初始化列表。请`@ModelAttribute("programform")`按照以下方式更改您的代码，然后重试。

```
@ModelAttribute("programform") 
public ProgramForm populatePojos() { 
    // Don't forget to initialize the pojos list or else it won't work 
    ProgramForm programform = new ProgramForm(); 
    List<Programs> programs = LazyList.decorate(new ArrayList<Programs>(), FactoryUtils.instantiateFactory(Programs.class));

    for(int i=0; i<2; i++) { 
        programs.add(new Programs()); 

    } 
    programform.setPrograms(programs); 
    return programform; 
} 
```

通过如上所述初始化列表，您还可以使用 javascript 添加更多字段运行时间，并且可以将这些值绑定到您的列表中。

执行此更改后，如果它不起作用，那么您需要在您的 jsp 页面中进行更改。不要使用 use simple 标记，但不要忘记在 name 属性中指定与您在此处的 path 属性中指定的值相同的值。

希望这对您有所帮助。干杯。

# javascript - Box2dweb - 碰撞接触点

> ID：10878750
> 
> 赞同：8
> 
> 时间：2012-06-04T09:02:09.173
> 
> 标签：javascript, html, canvas, box2d

我使用box2dweb。我正在尝试开发游戏。在某些时候，我需要找出“圆圈”和“盒子”之间的接触点。我所知道的是它可以使用 b2ContactListener 来完成。我们可以通过使用 Post-Solve Event 实现 b2ContactListener 来接收联系人数据。请帮忙！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-08T23:40:31.467

您走在正确的轨道上，您可以使用 b2ContactListener 挂钩各种事件：

```
var b2Listener = Box2D.Dynamics.b2ContactListener;

//Add listeners for contact
var listener = new b2Listener;

listener.BeginContact = function(contact) {
    //console.log(contact.GetFixtureA().GetBody().GetUserData());
}

listener.EndContact = function(contact) {
    // console.log(contact.GetFixtureA().GetBody().GetUserData());
}

listener.PostSolve = function(contact, impulse) {
    if (contact.GetFixtureA().GetBody().GetUserData() == 'ball' || contact.GetFixtureB().GetBody().GetUserData() == 'ball') {
        var impulse = impulse.normalImpulses[0];
        if (impulse < 0.2) return; //threshold ignore small impacts
        world.ball.impulse = impulse > 0.6 ? 0.5 : impulse;
        console.log(world.ball.impulse);
    }
}

listener.PreSolve = function(contact, oldManifold) {
    // PreSolve
}

this.world.SetContactListener(listener); 
```

只需删除 postSolve 代码，并根据您需要做的事情挂钩到适当的事件。

Seth ladd 在他的博客上有一些关于碰撞/反应的很棒的文章。这是我捡起这些东西的地方，所以他的功劳归于他。

我希望这有帮助。

谢谢，加里

# android - 10.1 Android 平板电脑真正可用的分辨率是多少？

> ID：10878752
> 
> 赞同：1
> 
> 时间：2012-06-04T09:02:12.637
> 
> 标签：android, resolution

我正在创建一个仅用于演示目的的线框 android 应用程序。我的目标设备是 1280 x 800 10.1 英寸平板电脑。我需要知道设备的确切分辨率减去底部的导航栏。起初我制作了 1280 x 800 的图形，但由于导航栏的原因，它们不适合屏幕，有人知道 10.1 1280 x 800 平板电脑的实际可用分辨率吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T10:01:13.033

我制作了一个在 1280x800 像素上运行的 ICS 模拟器的屏幕截图。系统栏的高度为 48 像素，因此为您的应用程序保留了 752 像素。

![1280x800 平板电脑](../Images/70773aca7c92db68f861d34dfa37de95.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:21:33.553

好的，这很有趣，根据[这个](http://www.displaymate.com/Tablet_ShootOut_2.htm)活动分辨率将是 1280x752（Android 3.1）但这[谈到](https://stackoverflow.com/questions/9093194/supporting-all-android-tablets-resolutions)了我支持的东西，为任何分辨率设计。

我希望这有助于更好。祝你好运。

# mysql - Mysql集群与django

> ID：10878753
> 
> 赞同：3
> 
> 时间：2012-06-04T09:02:16.697
> 
> 标签：mysql, django

我想将 Mysql Cluster 7.2 与 django 一起使用。对于高可用性，一个应该能够指定到 django 中：Mysql 集群中的 2 个 SQL 服务器具有故障转移行为：如果一个连接失败，django 必须使用第二个。

如何配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:14:21.440

故障转移功能本身并不在 Django 中。

我也在为我参与的项目的未来改进寻找这个。我发现以下模块是解决这个问题的最佳机会之一：

[https://github.com/brianjaystanley/django-failover](https://github.com/brianjaystanley/django-failover)

在简历中：监视器检查数据库可用性以及数据库是否关闭或运行缓慢更改数据库连接设置。该模块看起来很棒，因为它也处理缓存和芹菜。

无论如何，这取决于您在幕后的架构。

# java - SimpleDateFormat 转换

> ID：10878757
> 
> 赞同：0
> 
> 时间：2012-06-04T09:02:29.890
> 
> 标签：java

```
SimpleDateFormat format = new SimpleDateFormat("GD_yyyyMMdd_HHmmss");
    System.out.println(format.format(new Date())); 
```

我想要一个结果，`'GD_20120604_164534'`但结果是`AD156_20120604_165315`

如何设置参数可以返回我愿意的结果。谢谢提前！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T09:06:08.053

`G`是一个时代指示符，`D`代表`SimpleDateFormat`参考文献中指定的日期，并且：

> 可以使用单引号 (') 引用文本以避免解释。"''" 表示单引号。

改成：

```
SimpleDateFormat format = new SimpleDateFormat("'GD_'yyyyMMdd_HHmmss"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:05:51.457

```
SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd_HHmmss");
System.out.println("GD_" + format.format(new Date())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:05:42.550

这是因为`G`和`D`是变量，例如`yyyy`：

```
G   Era designator  Text    AD
D   Day in year     Number  189 
```

你应该转义这两个字母（我认为用单引号）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T09:05:46.823

根据[JavaDocs](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)，`G`表示时代并`D`表示一年中的某一天。

解决这个问题并做你想做的事情的一种方法是做这样的事情：

`String newDate = "GD_" + format.format(new Date());`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T09:06:44.670

```
SimpleDateFormat format = new SimpleDateFormat("'GD'_yyyyMMdd_HHmmss");
System.out.println(format.format(new Date())); 
```

使用 ' 转义你的字符

# javascript - chrome中的占位符文本后备事件问题

> ID：10878758
> 
> 赞同：0
> 
> 时间：2012-06-04T09:02:34.433
> 
> 标签：javascript, html, google-chrome, placeholder

我有一个占位符文本为“名字”的文本字段，因此当用户单击该字段时，文本消失，它允许他输入文本

HTML

```
 <input class="fname" type="text" placeholder="First Name"/> 
```

JS

```
function placeHolderFallBack() {
if("placeholder" in document.createElement("input")) {  
    return;     //In chrome it comes here
}else { 
    // works fine in IE8,FF 
    } 
```

所以基本上上面的代码在chrome中不起作用，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T09:29:26.837

在 chrome 和 safari 中，占位符属性适用于 keyup。当您开始输入时，它会消失。

如果确实需要，请尝试这种方法

演示 - [http://jsfiddle.net/NL2Dr/2/](http://jsfiddle.net/NL2Dr/2/)

```
var ttext;

$('input').focus(function(){
    ttext = $(this).attr('placeholder');            
    $(this).removeAttr('placeholder');
});
$('input').blur(function(){
    $(this).attr('placeholder', ttext);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:03:22.390

感谢 Dipaks，但当您在选择其中一个输入时停用然后重新激活 Chrome 时，它​​不起作用。另外我认为它需要在性能方面进行一些改进。这是修改后的版本：

```
$('input:text, textarea').each(function(){
    var $this = $(this);
    $this.data('placeholder', $this.attr('placeholder'))
         .focus(function(){$this.removeAttr('placeholder');})
         .blur(function(){$this.attr('placeholder', $this.data('placeholder'));});
}); 
```

# php - 强制灯箱在父页面 php JavaScript 中打开

> ID：10878759
> 
> 赞同：0
> 
> 时间：2012-06-04T09:02:49.023
> 
> 标签：php, javascript

又一个新手求助。

我有一个 Main_index.php 页面。此页面中加载了多个 div，每个 div 都有一个“更多”信息按钮。每个 div 都是一个模板样式，并用 mysql 数据完成。

```
<div class="more"><a href="advert_details.php?advert_id=<?php print $advert_id?>"id="more<?php print $advert_id?>"><?php echo MORE ?></a></div> 
```

每个“更多”按钮都会在灯箱内打开一个新页面“advert_details.php”。这又是一种模板样式，并从 mysql 加载详细信息。灯箱代码位于 Main_index.php 中。

```
<script language="JavaScript" type="text/javascript">
$(document).ready(function()
        {
        $('a').filter(function() {
        return this.id.match(/more[0-9]/);
    }).fancybox({
        'overlayColor' : '#000',
        'overlayOpacity' : 0.1,
        'width' : 640,
        'height' : 940,
        'type' : 'iframe'
    });
});
</script> 
```

如果搜索引擎找到“advert_details.php”页面之一，当您单击搜索结果时，灯箱会在空白页面中打开。

有什么我可以添加的，强制“advert_details.php”页面在“main_index.php”页面中打开，使用灯箱 JavaScript 并显示主站点页面？

我希望我已经很好地解释了这一点，如果没有，请询​​问更多详细信息。

谢谢

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:09:06.253

您可以设置一个 URL 参数，该参数将被检查以包含`advert_details.php`在主页中。

就像是

```
if(isset($_GET['showDetails'])) {
   include "advert_details.php";
} 
```

# android - 自定义安卓屏幕尺寸

> ID：10878761
> 
> 赞同：0
> 
> 时间：2012-06-04T09:03:00.710
> 
> 标签：android, screen

我想知道是否可以在Android设备上自定义屏幕尺寸？像使用屏幕的一半而另一半是空白的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:29:12.803

对于此类问题，您可以使用百分比。有2种常用方法：

在 java 中：您可以从您使用的液晶面板获取显示高度，然后乘以您的百分比数。这样，您必须在活动中格式化按钮。

在布局 xml 中：您应该在 xml 文件中而不是在 java 代码中设计布局（我的意见）。使用布局权重，如以下帖子：[将 ui 元素的位置大小设置为屏幕大小的百分比](https://stackoverflow.com/questions/7506230/set-position-size-of-ui-element-as-percentage-of-screen-size)

# javascript - Cygwin 如何用于 python 编程？

> ID：10878764
> 
> 赞同：1
> 
> 时间：2012-06-04T09:03:18.760
> 
> 标签：javascript, python, django, cygwin

我目前面临关于cygwin的困境。我只是演示它来看看它。我想知道将python构建到cygwin安装中，在windows中安装python并将其符号链接到cygwin，或者使用cygwin对python进行编程是否有效。几年前，我出于编程需求切换到了 Ubuntu。请注意：我使用 python web 框架为 web 编程。Django 有一个内置的开发服务器以及 sqlite3，非常适合项目的开发阶段。我能否使用 cygwin 中的 Django 测试服务器和 sqlite3 之类的东西（它们都是 python，所以我不明白为什么不这样做）。

我有一台 Windows 机器是必不可少的原因：音乐制作（驱动程序问题、软件）、前端开发和图形设计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:10:43.063

我在 Windows 上使用 cygwin 有很好的经验。

我必须解决的主要问题`runserver`是由于我研究的 vfork 资源不可用错误导致 cygwin 不稳定/缓慢，这不是一个需要解决的小问题。首先，Runserver 非常慢，所以这对我来说是一个重大的交易破坏者（尝试从 osx 转到 windows）。

这是我为使我的工作流在 cygwin 和 windows pythons 上顺利进行的操作。 [http://yuji.wordpress.com/2011/07/18/django-runserver-development-server-is-slow-on-cygwin/](http://yuji.wordpress.com/2011/07/18/django-runserver-development-server-is-slow-on-cygwin/)

我用的是哪条蟒蛇？我不记得了...

您提到了编辑器...我使用了一个名为 sublime text 2 的跨平台编辑器。对于 windows 和 osx 也是如此。极好的。

Adobe 的实时取景端口？你不是说织梦者吧？因为那个现场编辑是最糟糕的。你想要真正的浏览器来呈现你的代码……和真人使用的一样。

此外，如果你在 django 中开发，你需要一个请求/响应周期——不能真正上线。

# android - 解析 RSS 提要的字符片段

> ID：10878771
> 
> 赞同：0
> 
> 时间：2012-06-04T09:03:44.933
> 
> 标签：android, parsing, rss, character

我解析了一些 RSS 提要（尝试了不同的提要......）并且每次都会随机删除一些字符。我究竟做错了什么？为什么它在某些情况下有效而在其他情况下却无效？还有另一种方法吗？XML 将（在大多数情况下）包括 UTF-8 字符（如 ä、ö、ü 等），因此该解决方案也应该适用于这些字符。

如果您需要更多信息（更多代码、更详细信息等），请告诉我！

这是我的代码：

```
public class RSSHandler extends DefaultHandler {

final int state_unknown = 0;
final int state_title = 1;
final int state_description = 2;
final int state_link = 3;
final int state_pubdate = 4;
int currentState = state_unknown;
StringBuilder strCharacters;

RSSFeed feed;
RSSItem item;

boolean inEntity = false;
String entityName = "";

boolean itemFound = false;

public RSSHandler() {
    strCharacters = new StringBuilder();
}

public RSSFeed getFeed() {
    return feed;
}

@Override
public void startDocument() throws SAXException {
    feed = new RSSFeed();
    item = new RSSItem();
}

@Override
public void endDocument() throws SAXException {
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    strCharacters = new StringBuilder();
    if (localName.equalsIgnoreCase("item")) {
        itemFound = true;
        item = new RSSItem();
        currentState = state_unknown;
    } else if (localName.equalsIgnoreCase("title")) {
        currentState = state_title;
    } else if (localName.equalsIgnoreCase("description")) {
        currentState = state_description;
    } else if (localName.equalsIgnoreCase("link")) {
        currentState = state_link;
    } else if (localName.equalsIgnoreCase("pubdate")) {
        currentState = state_pubdate;
    } else {
        currentState = state_unknown;
    }

}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    if (itemFound == true) {
        switch (currentState) {
            case state_title:
                item.setTitle(strCharacters.toString());
                break;
            case state_description:
                break;
            case state_link:
                item.setLink(strCharacters.toString());
                break;
            case state_pubdate:
                String dateStr = strCharacters.toString();
                SimpleDateFormat curFormater = new SimpleDateFormat(
                        "EEE, dd MMM yyyy HH:mm:ss Z", Locale.ENGLISH);
                Date dateObj = null;
                try {
                    dateObj = curFormater.parse(dateStr);
                    SimpleDateFormat postFormater = new SimpleDateFormat(
                            "dd.MM.yyyy HH:mm");
                    String newDateStr = postFormater.format(dateObj);
                    item.setPubdate(newDateStr);
                } catch (ParseException e) {
                    e.printStackTrace();
                }
                break;
            default:
                break;
        }
    } else {
        switch (currentState) {
            case state_title:
                feed.setTitle(strCharacters.toString());
                break;
            case state_description:
                break;
            case state_link:
                feed.setLink(strCharacters.toString());
                break;
            case state_pubdate:
                feed.setPubdate(strCharacters.toString());
                break;
            default:
                break;
        }
    }

    currentState = state_unknown;

    if (localName.equalsIgnoreCase("item")) {
        feed.addItem(item);
    }
}

public void startEntity(String name) throws SAXException {
    inEntity = true;
    entityName = name;
}

@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {

    strCharacters = new StringBuilder();
    if (inEntity) {
        inEntity = false;
        strCharacters.append("&" + entityName + ";");
    } else {
        for (int i = start; i < start + length; i++) {
            strCharacters.append(ch[i]);
        }
    }

    // strCharacters.append(ch, start, length);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:53:34.550

您正在为`StringBuilder`每次`characters()`通话创建一个新的。这是不正确的。每个元素有很多次调用`characters()`——您需要连接所有这些结果，而不仅仅是收集最后一个。

# c# - 如何用对象数组填充数组

> ID：10878772
> 
> 赞同：-1
> 
> 时间：2012-06-04T09:03:49.163
> 
> 标签：c#, arrays

```
for (int i = 0; i < People.Length; i++) {
    People[i] = new Person(first[i], last[i], birth[i]);
} 
```

现在 first 和 last 包含 20 个字符串，birth 是一个`DateTime`对象，它再次用 20 个生日填充数组 people。我只需要知道如何正确初始化我的数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:11:07.750

你必须使用锯齿状阵列

前任：

您可以像以下示例一样初始化锯齿状数组：

```
int[][] numbers = new int[2][] { new int[] {2,3,4}, new int[] {5,6,7,8,9} }; 
```

您也可以省略第一个数组的大小，如下所示：

```
int[][] numbers = new int[][] { new int[] {2,3,4}, new int[] {5,6,7,8,9} }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:13:10.237

您使用所需的大小初始化数组：

```
Person[] people = new Person[20]; 
```

自动使用的长度，例如`first`：

```
Person[] people = new Person[first.Length]; 
```

# c# - 如何在 JSTree“重命名”中更改节点的新名称

> ID：10878773
> 
> 赞同：0
> 
> 时间：2012-06-04T09:03:50.533
> 
> 标签：c#, javascript, jstree

我正在尝试使用以下代码重命名节点，我需要将节点的 ID 和新名称传递给 server.aspx

如何获取节点的新名称

我如何将这两个值传递给 server.aspx 页面

谢谢

```
 .bind("rename.jstree", function (e, data) {
            data.rslt.obj.each(function () {
                $.ajax({
                    async: false,
                    type: 'POST',
                    url: "./ajax/server.aspx",
                    data: 
                    {
                        "operation": "rename_node",
                        "id": this.id 
                    },
                    success: function (r) {
                        if (r == "-1") {
                            $.jstree.rollback(data.rlbk);
                        }
                        else {
                            $(data.rslt.oc).attr("id", "node_" + r.id);
                            if (data.rslt.cy && $(data.rslt.oc).children("UL").length) {
                                data.inst.refresh(data.inst._get_parent(data.rslt.oc));
                            }
                        }
                    }       
                });
            });
        }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:04:05.800

```
 .bind("rename.jstree", function (e, data) {
        data.rslt.obj.each(function () {
            $.ajax({
                async: false,
                type: 'GET',
                url: "./ajax/server.aspx",
                data: 
                {
                    "operation": "rename",
                    "id": this.id,
                    "new_name" : data.rslt.new_name 
                },
                success: function (r) {
                    if (r == "-1") {
                        $.jstree.rollback(data.rlbk);
                    }
                    else {
                        $(data.rslt.oc).attr("id", "node_" + r.id);
                        if (data.rslt.cy && $(data.rslt.oc).children("UL").length) {
                            data.inst.refresh(data.inst._get_parent(data.rslt.oc));
                        }
                    }
                }       
            });
        });

    }) 
```

# objective-c - 强制释放自动释放对象

> ID：10878776
> 
> 赞同：2
> 
> 时间：2012-06-04T09:04:18.790
> 
> 标签：objective-c, memory-leaks

我可以通过调用没有自动释放池的释放来强制自动释放对象：

```
NSString *myString = [[[NSString alloc] init] autorelease];
[myString release]; 
```

通常是这样的：

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
NSString *myString = [[[NSString alloc] init] autorelease];
[pool release]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T09:07:26.260

第一个示例会崩溃，因为字符串会过度释放。如果您想控制自动释放对象的生命周期，正确的方法是您的第二个示例所做的 - 创建一个本地自动释放池，您可以在需要时将其耗尽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:07:38.227

您的代码将崩溃，因为全局自动释放池稍后会尝试释放该对象。导致 malloc double free 错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T09:08:25.947

你可以这样做：

```
NSString *myString = [[[NSString alloc] init] autorelease]; 
```

或这个：

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
NSString *myString = [[[NSString alloc] init] autorelease];
[pool release]; 
```

但不是这个：

```
NSString *myString = [[[NSString alloc] init] autorelease];
[myString release]; 
```

# python - Python / CherryPy 中的“自我”是什么？

> ID：10878791
> 
> 赞同：-2
> 
> 时间：2012-06-04T09:05:59.220
> 
> 标签：python, cherrypy

> **可能重复：**
> [python'self'解释](https://stackoverflow.com/questions/2709821/python-self-explained)

对于这个例子：

```
class HelloWorld:

    def index(self):
        return "Hello world!" 
```

`self`总是传递给函数。什么是`self`，为什么需要一直传递给函数/方法？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T09:08:43.773

请检查这个[自我的目的是什么？](https://stackoverflow.com/questions/2709821/python-self-explained)

它提供了一个很好的讨论点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:11:18.623

顺便说一句：self 实际上只是一个随机选择的词，每个人都会使用，但你也可以使用 this、foo、myself 或任何你想要的东西，它只是类的每个非静态方法的第一个参数。这意味着 self 这个词不是一种语言结构，而只是一个名称：

```
class priyank_patel:
    def __init__(priyank):
       priyank.bla = 2 
```

# android - 如何构建以下 JSON 格式以在 android 中将其作为请求发布？

> ID：10878797
> 
> 赞同：-1
> 
> 时间：2012-06-04T09:06:22.043
> 
> 标签：android, json, post

需要如下所示以 JSON 格式发布数据并且数组的**大小**不是 **恒定的。**这取决于用户。

```
 {
  "info": [
    {
      "Name": "foo1",
      "Number": 123
    },
    {
      "Name": "foo2",
      "Number": 124
    },
    {
      "Name": "foo2",
      "Number": 125
    }
  ]
} 
```

我尝试通过以下方式创建

```
JSONObject parent = new JSONObject();
JSONArray jArray = new JSONArray();
JSONObject childObj = new JSONObject();

childObj.put("Name", etName.getText()).toString();
childObj.put("Number", etNumber.getText()).toString();

jArray.put(childObj);

parent.put("info",jArray); 
```

但我无法得到它，我也像[示例 6.1](http://code.google.com/p/json-simple/wiki/EncodingExamples)那样尝试过这种方式，但是没有像 add for JSONArray 这样的方法。那么如何发布我的数据。请帮我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:15:33.410

我不确定你的问题到底是什么，但我通常会做这样的事情来创建你正在寻找的 JSON 字符串（下面的示例使用来自[http://www.json 的 org.json 参考实现。 org/java/index.html](http://www.json.org/java/index.html) ):

```
JSONObject parent = new JSONObject();
JSONArray infoArray = new JSONArray();

for(int i = 0; i < SOMEARRAY.length; i++)
{
    JSONObject childObj = new JSONObject();
    childObj.put("Name", etName.getText());
    childObj.put("Number", etNumber.getText());
    infoArray.put(childObj);
}

parent.put("info", infoArray);

String encodedJsonString = parent.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:17:43.520

我不明白你为什么`toString()`在把东西放进去之后打电话`childObj`。无论如何，这段代码应该可以工作：

```
JSONObject parent = new JSONObject();
JSONArray jArray = new JSONArray();
JSONObject childObj = new JSONObject();

try
{
    //create first child
    childObj
        .put("Name", "foo1")
        .put("Number", 123);

    //insert it into the array
    jArray.put(childObj);
    //... repeat for all remaining elements

    //attach the array to the parent
    parent.put("info",jArray);
}
catch (JSONException e)
{
    e.printStackTrace();
} 
```

然后，要将您的 JSON 作为 POST 的字符串，只需调用`parent.toString();`

# asp.net-mvc - 禁用远程验证

> ID：10878798
> 
> 赞同：1
> 
> 时间：2012-06-04T09:06:24.930
> 
> 标签：asp.net-mvc, validation

我有一个使用远程验证的模型。该模型还充当子类的父类。如何在特定字段的视图中禁用远程验证？型号代码

```
public user
{
  [Remote("Validateemail","User",etc)]
  public string Email {get; set;}
}

public edituser:user
{
  public int userid {get; set;}

  public edituser(int userid,string email)
  {
    userid=userid;
    Email=email;
  }
} 
```

我的目标是删除视图中 edituser 类中的删除验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:09:27.843

我假设您只需要在editView中显示电子邮件字段及其中的所有数据，因为默认情况下，用户无法编辑他/她的电子邮件..
所以您只需将视图中的代码从更改 `Html.EditorFor()`为`Html.DisplayFor()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:55:42.753

这是视图模型的完美案例。创建一个不同的视图模型进行编辑（因为在大多数情况下，物质效果视图不应直接链接到域模型）或者您可以使用 IValidatableObject 或 fluentvalidation ，或者您可以使用 DataAnnotationsModelValidatorProvider 手动附加属性条件，如果它适用于你的情况。

# ruby - 在 Ruby On Rails 的类变量中缓存文件

> ID：10878804
> 
> 赞同：3
> 
> 时间：2012-06-04T09:07:10.047
> 
> 标签：ruby, ruby-on-rails-3

在我的 Rails 应用程序中，我需要在每个页面加载时查询一个二进制文件数据库。查询是只读的。文件大小为 1.4 MB。我有两个问题：

`File`1）将对象缓存在类变量中是否有意义？

```
def some_controller_action    
    @@file ||= File.open(filename, 'rb')
    # binary search in @@file
end 
```

2）缓存的对象会在同一个rails进程中的不同请求之间共享吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T10:07:09.803

如果您在课堂上使用常量，也就是

```
FILE = File.read(filename, 'rb').read 
```

因此它会在应用程序加载时进行评估。分叉将在之后发生，因此它将在共享内存中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T09:39:43.243

这确实有道理。但是，这样做的限制是，如果您为应用程序生成多个进程，则每个进程都必须缓存 1.4 MB。所以第二个问题的答案是肯定的，但它不会在多个进程之间共享。

# c++ - 将 std::vector 与类元素一起使用时的内存泄漏

> ID：10878811
> 
> 赞同：1
> 
> 时间：2012-06-04T09:07:38.047
> 
> 标签：c++, memory-leaks, stdvector

我有以下问题：

当我将 std::vector 与内置函数一起使用时，我没有获得内存，但如果我使用类，我会遇到内存泄漏。为了显示：

```
//No leak
std::vector<double>* vecPtr1=new std::vector<double>();
//add some elements
delete vecPtr1;

//Leaks some memory but not all
std::vector<SomeClass>* vecPtr2=new std::vector<SomeClass>();
//add some elements with vecPtr2->push_back(SomeClass());
delete vecPtr2; 
```

据我了解，delete 应该调用 std::vector 的析构函数，而后者又应该调用 SomeClass 的析构函数-> 没有泄漏。我对此进行了一些思考和测试，如果我在如下范围内使用 std::vector 也会发生相同的行为：

```
{
  std::vector<SomeClass> vector;
  //add elements as before
}
//memory is still used here 
```

我在 Ubuntu 11.10 下使用 gcc 4.6.1。我的库中有什么问题还是我对 std::vector 如何破坏元素有误解？

为了澄清，我用 SomeClass 替换为 std::pair 的完整代码（是的，我知道有些部分被黑了，但这只是一个例子）：

```
#include <iostream>
#include <vector>
#include <utility>

int main()
{
    std::string inString;
    std::cout<<"Started"<<std::endl;
    //wait
    std::cin>>inString;
    {
        //assign vector
        std::vector<std::pair<std::string,unsigned int> > vec=std::vector<std::pair<std::string,unsigned int> >();
        //push elements
        for(unsigned int i=0;i<1e7;++i)
        {
            vec.push_back(std::pair<std::string,unsigned int>("something",i));
        }
        std::cout<<"Created vector with capacity: "<<vec.capacity()<<std::endl;
        //wait
        std::cin>>inString;
    }
    //vec should go out of scope but not all memory gets freed
    std::cout<<"Deleted vector"<<std::endl;
    //wait
    std::cin>>inString;
    std::cout<<"Shutting down"<<std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T09:10:14.437

首先，您不应该动态创建向量对象。这简直是​​个坏主意。即使用自动向量：

```
std::vector<SomeClass> classes; //automatic object 
```

无论如何，就您而言，我想问题出在 class`SomeClass`上。

我猜这个类管理内存并且没有正确实现以下至少一项：

*   复制构造函数
*   复制分配
*   析构函数

如果您使用的是 C++11，那么还有两个成员：

*   移动构造函数
*   移动分配

我建议你阅读这些：

*   [什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)
*   [C++11 的三规则变成五规则？](https://stackoverflow.com/questions/4782757/rule-of-three-becomes-rule-of-five-with-c11)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T09:11:26.517

`SomeClass`只要实现了正确的析构函数，那里就不应该有任何泄漏。

您是否实现了复制构造函数和赋值运算符？析构函数是否清除了它拥有的所有内存？

另外，你怎么知道你正在泄漏内存。您是在使用 Valgrind 或 Purify 之类的工具，还是只查看内存位置？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:14:49.533

问题是“SomeClass”。

它很可能会分配不会在销毁时释放的内存。如果您发布“SomeClass”，它会有所帮助

# c - 用于在非均匀大小的超球体中进行最近邻搜索的快速空间数据结构

> ID：10878814
> 
> 赞同：9
> 
> 时间：2012-06-04T09:07:50.707
> 
> 标签：c, data-structures, spatial, multidimensional-array

给定一个 k 维连续（欧几里得）空间，其中充满了相当不可预测的移动/增长/收缩超球体，我需要反复找到其表面最接近给定坐标的超球体。如果某些超球体与我的坐标的距离相同，则最大的超球体获胜。（保证超球体的总数随着时间的推移保持不变。）

我的第一个想法是使用**KDTree**，但它不会考虑超球体的非均匀体积。所以我进一步观察，发现**BVH**（Bounding Volume Hierarchies）和**BIH**（Bounding Interval Hierarchies）似乎可以解决问题。至少在 2-/3 维空间中。然而，虽然在 BVHs 上找到了相当多的信息和可视化，但我在 BIHs 上几乎找不到任何东西。

我的基本要求是**考虑体积的****k 维**空间数据结构，并且**构建速度超快**（离线）或动态**几乎没有任何不平衡**。

 ******鉴于我上面的要求，你会使用哪种数据结构？还有什么我没有提到的吗？

* * *

编辑1：忘了提：hypershperes 被允许（实际上是高度期望的）重叠！

编辑2：看起来我描述的度量标准不是“距离”（特别是“负距离”）更匹配[一个点的力量](https://en.wikipedia.org/wiki/Power_of_a_point)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:38:10.437

我希望 QuadTree/Octree/泛化为 2^K-tree，因为您的 K 维数可以解决问题；这些递归地划分空间，并且假设您可以在 K-subcube（或 K-矩形砖，如果分裂不均匀）不包含超球体，或包含一个或多个超球体以致分区不分离任何超球体时停止，或者只包含一个超球面的中心（可能更容易）。

在此类树中插入和删除实体很快，因此超球面改变大小只会导致一对删除/插入操作。（我怀疑如果球体变小，球体大小会通过局部附加递归分区发生变化，或者如果球体增长，则局部 K 块合并会改变球体大小）。

我没有和他们合作过，但你也可以考虑[二进制空间分区](http://en.wikipedia.org/wiki/Binary_space_partitioning)。这些让您可以使用二叉树而不是 k 树来划分空间。我知道 KDTrees 是这种情况的一个特例。

但无论如何，我认为 2^K 树和/或 BSP/KDTrees 的插入/删除算法很好理解且速度很快。所以超球体大小的变化会导致删除/插入操作，但这些操作很快。所以我不明白你对 KD-trees 的反对意见。

我认为所有这些的表现都是渐近相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:33:02.223

我会为 SQLite 使用 R*Tree 扩展。一个表通常有 1 维或 2 维数据。SQL 查询可以组合多个表来进行更高维度的搜索。

负距离的公式有点奇怪。距离在几何中是正的，所以可能没有太多有用的理论可以使用。

仅使用正距离的不同公式可能会有所帮助。阅读有关双曲空间的信息。这可能有助于为描述距离的其他方式提供想法。******

# prolog - 如果另一个谓词失败，则调用一个谓词

> ID：10878817
> 
> 赞同：0
> 
> 时间：2012-06-04T09:08:00.840
> 
> 标签：prolog

如果对另一个谓词的所有调用都失败了，我该如何调用一个谓词？

我有：

```
foo(A, B, C, D) :-
    (bar1(Y,Z); bar2(L, K, M)),
    foo(A, B, C, D). 
```

我想要的是 ：

*   在任何时候，如果`bar1/2`已经成功，`bar2/3`将永远不会被执行。
*   如果所有`bar1/2`调用都失败，那么`bar2/3`最终将被执行。

样本回溯树

```
 root                                           root                 
                                                            |
           /   \                                            |
          /     \          all bar1 failed                  |
         /       \                                          |
        / | \     \        ===>>>======>>>>                 |
       /  |  \     \                                        |
      F   F  F     F                                        E
time  0   1  2     3                                        4 

Abbreviation:
       Bar1 failed : F
       Bar2 executed : E 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:22:26.073

You're looking for what's known as "soft cut",

```
A *-> B ; C. 
```

This is equivalent to `(A,B) ; (\+A,C)`: if `A` succeeds at least once, the above is equivalent to `A,B`. If not, it's equivalent to just `C`. The goal `A` is not retried.

Simple `if` construct allows the test predicate to succeed only once:

```
A -> B ; C. 
```

is equivalent ^((almost - see you manual for details)) to `(once(A),B) ; (\+A,C)`, except that the goal `A` isn't retried.

Thus your case shall be

```
foo(A, B, C, D) :-
    (bar1(Y,Z) *-> true ; bar2(L, K, M)),
    foo(A, B, C, D). 
```

***addition:*** Some Prolog implementations might not have this construct `*->` available (e.g. gprolog). In that case I see two possibilities. Either

```
(A , B) ; (\+A , C) 
```

although it would retry `A`, or (writing `goal(X)` for A)

```
bagof(g(X), goal(X), L) -> ( member(g(X), L), B ) ; C 
```

Of course the order of side-effects will be changed by this. The name `L` of the variable should be chosen such that it does not appear free in `B`.

# spring - JasperReports：将报告导出为 csv 格式

> ID：10878827
> 
> 赞同：1
> 
> 时间：2012-06-04T09:08:34.647
> 
> 标签：spring, jasper-reports

我正在使用*JasperReports 4.5.0*，*Spring 3.0.5 RELEASE*。我正在以*pdf*、*html*、*csv*格式导出我的 JR 报告。使用*pdf*，*html*报告生成良好。

但是当我在 csv 中导出我的报告时，它只在一列中显示所有字段和值。我的代码流程与[此链接](http://chathurangat.blogspot.in/2012/02/jasperreport-with-spring-mvc-fully.html)完全相同。

下面是我现在得到的例子。

```
|                     A                  |    B   | C    | D    |
|S.No,IPAddress,TotalDuration,TotalBdrCount  |        |      |      |
|1,null,266082,null                      |        |      |      |
 2,null,null,null                        |        |       |     |
 3,null,null,null                        |        |       |     |
 4,null,null,null                        |        |       |     | 
```

其中***S.No,IPAddress,TotalDuration,TotalBdrCount***是列标题，**1,null,266082,null**是各个列的值。

但我的要求是

```
|  A   |     B    |       C      |       D      |
| S.No | IPAddress | TotalDuration | TotalBdrCount | 
```

我想你理解我的问题。为此我需要设置任何参数吗？我没有得到。任何人都可以帮助我解决这个问题。

# wordpress - Media Element Wordpress 插件与 JetPack 冲突

> ID：10878834
> 
> 赞同：0
> 
> 时间：2012-06-04T09:09:04.280
> 
> 标签：wordpress, conflict, mediaelement.js

我的 Jetpack (v1.3.4) 和 MediaElements.js (v2.7.0 - 也使用 v2.9.1 测试) 插件有问题。MediaElements 是我选择的音频和视频播放器（一个很棒的插件），但似乎与 Jetpack 插件不兼容。

我安装了 MediaElements 和 Jetpack 插件，但都已停用。我激活了 MediaElements 并且音频播放器工作正常（参见页面[http://music.woolston.com.au/new-work-in-progress/](http://music.woolston.com.au/new-work-in-progress/)）。即使在我激活 Jetpack 之后，MediaElements 仍然可以工作。一旦我将 Jetpack 连接到我的站点（完成“连接到 Workpress.com”登录过程），MediaElements 插件就会停止工作。

我将不胜感激您可以提供的任何帮助。我也记录了 Jetpack 支持的错误（[http://en.forums.wordpress.com/topic/conflict-with-other-plugin?replies=1#return](http://en.forums.wordpress.com/topic/conflict-with-other-plugin?replies=1#return)）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T01:15:15.717

来自：[http ://wordpress.org/extend/plugins/media-element-html5-video-and-audio-player/](http://wordpress.org/extend/plugins/media-element-html5-video-and-audio-player/)

简码选项替代品

如果您有与 MediaElement.js 冲突的插件，您也可以使用短代码

[mejsvideo src="http://mysite.com/mymedia.mp4" width="640" height="360"] [mejsaudio src="http://mysite.com/mymedia.mp3"]

...为我解决了 JetPack 的问题。

# spring - Spring MVC 和动态模块部署

> ID：10878836
> 
> 赞同：1
> 
> 时间：2012-06-04T09:09:19.053
> 
> 标签：spring, model-view-controller, jakarta-ee, osgi, spring-dm

我完成了一个新的 MVC Web 应用程序，我的老板让我为新客户创建一个新版本。相同的 Web 应用程序，但不同的 CSS 和两个新模块（对于模块，我的意思是用户用来与 DB 交互的新页面）。这没什么大不了的，而且很容易做到，只需在我的 Eclipse 中复制项目并修改它。两天的工作和项目完成。干得好，都很开心，但我不开心。

我在想wordpress，它真的是可定制的，只需创建一个新的模板和插件并激活它。我想做一些类似的事情来减少新版本的部署和代码维护。我的问题是，我怎样才能用 Spring 做类似的事情？或者更好的是，是否可以创建一个新模块并将其部署到 Web 应用程序？Spring 动态是 MVC Spring 应用程序的正确选择吗？

谢谢，
安德里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:27:49.407

我不认为你的方法是正确的。您需要与您的经理讨论这种情况是否会再次发生。因为对我来说它看起来可能。

让我们想象一个场景：您有许多应用程序副本，它们之间有一些小的增强或更改。一个月后，一位客户报告了一个非常讨厌的错误，必须在您的每个应用程序实例中进行修复。想象你的痛苦。

为什么不考虑多租户？

*   实施白标，以便根据客户，您的应用程序可以获得不同的外观；
*   扩展后端，让客户永远看不到彼此的数据
*   实施可配置的功能，这样一位客户就不会看到您的老板出售给另一位客户的扩展功能。当他确实出售它们时 - 这将是在数据库/配置中切换一些标志的问题。

不想支持多租户或产品物理部署在不同的（客户）服务器上？没关系！如果您发现错误，您只需修复一次，然后将 jar 文件重新部署到所有受影响的系统。

当然，以上不是两天的工作，但这种方法可能会节省更多。

至于您的问题，Spring 允许您通过可变样式和布局自定义其外观。我建议您使用 Spring Roo 创建一个示例 Web 应用程序，看看它是如何完成的。但是，如果我是你，我仍然希望至少在项目之间拥有一个共享的代码库。

# c++ - 矩阵变换和纹理映射坐标混淆（初学者）

> ID：10878839
> 
> 赞同：-2
> 
> 时间：2012-06-04T09:09:41.347
> 
> 标签：c++, opengl, vector, matrix, transformation

我正在做一些关于矩阵变换和纹理映射的问题，我遇到了两个我不知道如何得到答案的问题。答案以红色突出显示。（这些可以在 C++ 中实现，但在我这样做之前我只是想先熟悉一下转换）

对于矩阵变换，它不应该`-1`（矩阵的右上角）用于平移而不是`0` ![在此处输入图像描述](../Images/5b7ca7da14416562d2bc5da84946e7d0.png)

**编辑：仍然需要第二个问题的答案** 我的第二个问题是我不确定他们是如何得到的`y coordinate for point D`

![在此处输入图像描述](../Images/ebe4aa1cbb778416d2a4cd9eb5618391.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T09:21:13.483

回答第一个问题：

生成的图像沿 x 轴压缩成一半，并沿 Y 轴拉长到两倍长度。

缩放矩阵就是答案。缩放矩阵是一个有元素的对角矩阵`{X-scaling, Y-scaling, 1}`。

现在，

```
| 0.5 0 0 |
|  0  2 0 |
|  0  0 1 | 
```

是一个典型的缩放矩阵。它将 x 轴缩放 0.5（也就是说，它将 x 轴拉伸（压缩）成一半）。这在 Matrix(1,1) 中很明显。

跨 Y 方向的缩放在 Matrix(2,2) 中给出。那边的`2`意思是，Y轴被拉长了2倍。

**注意**：在这个问题中**不**涉及翻译。请注意，简单的缩放使它看起来像平移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:28:41.227

找到了第二个问题的答案。

B 点上方的角必须具有 y 坐标 1，否则您将看不到底面。因此，对于点 D，您需要 y 坐标 2。如果您从 B 到角点到 D 的线，那么 textre 图像将重复两次。

# android - Android Early Resume 有意义吗？

> ID：10878843
> 
> 赞同：0
> 
> 时间：2012-06-04T09:10:08.693
> 
> 标签：android, linux-kernel, linux-device-driver, android-source

我一直在通过 Linux 电源管理，我找到了“早期恢复”的 android 实现，这怎么能工作？我发现当 Android Stack 完成与 Suspend 相关的作业和系统挂起设备时，提前挂起是有意义的。系统未恢复时，提前恢复如何工作？

# haskell - 我的程序图灵完备吗？

> ID：10878846
> 
> 赞同：13
> 
> 时间：2012-06-04T09:10:14.623
> 
> 标签：haskell, turing-complete

我花了一两个星期编写一个简单的逻辑求解器。构建它之后，我发现自己想知道它所解决的语言是否是图灵完备的。所以我编写了一小组方程，它们接受 SKI 组合子演算中的任何有效表达式，并生成一个包含该表达式的正常形式的结果集。由于 SKI*是*图灵完备的，证明我的语言可以执行 SKI 将证明其图灵完备。

但是，有一个小故障。求解器不会按正常顺序减少表达式。实际上它所做的是尝试*所有可能的减少顺序*。这意味着解决方案集通常是*巨大的*。如果一个范式存在，它会在*某个地方*，但很难说*在哪里*。

这给我带来了两个问题：

*   我的语言图灵完备吗？还是我需要找到更好的证据？

*   解决方案的数量是输入的可计算函数吗？

（起初我假设解决方案集的大小是输入大小的指数或阶乘。但仔细观察，这是不正确的。你可以编写已经是正常形式的巨大表达式，以及不会终止的微小表达式.我有一种感觉，确定解决方案集的大小可能等同于解决停止问题，但我不完全确定......）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T18:26:32.297

A）正如augustss所说，您的系统显然已经完成了。

B）你是对的，确定解决方案的大小与停止问题相同。如果一个序列没有终止，那么你会得到一个无限的解决方案集。因此，要确定集合是否无限，您需要确定归约序列是否终止。但这*正是*停机问题！

C）我记得，一个系统，给定一组图灵机指令，只说明他们需要多少步骤才能终止（我想，你的解决方案集的基数）或者如果指令无法终止他们自己未能终止*本身就是*图灵完备的。所以这应该有助于这里的直觉。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T10:45:17.567

在回答我自己的问题时......我发现通过调整源代码，我可以做到如果输入的 SKI 表达式具有范式，那么范式将始终是解决方案#1。因此，如果您只是忽略任何进一步的解决方案，程序会将任何 SKI 表达式简化为正常形式。

我相信这构成了一个“更好的证明”。;-)

# xamarin.ios - 在运行时更改 UIBarButton 标识符

> ID：10878849
> 
> 赞同：2
> 
> 时间：2012-06-04T09:10:28.477
> 
> 标签：xamarin.ios

当我的滑块的值发生变化时，我想更改我的 UIBarButton 的标识符。我是这样尝试的：

```
var button = new UIBarButtonItem(UIBarButtonSystemItem.Save);
this.Pad_btnClose = null;
this.Pad_btnClose = button; 
```

但它不起作用。我也试过这样：

```
this.Pad_btnClose = new UIBarButtonItem(UIBarButtonSystemItem.Save); 
```

也不行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T11:43:21.737

设置该变量（或插座，你不说哪个）不会从屏幕上删除 UIBarButtonItem。

为此，您必须为 UIToolbar 创建一个插座，然后调用：

```
yourToolbar.Items = new UIBarButtonItem[] { yourNewButtonItem }; 
```

或者如果你想让它动画：

```
yourToolbar.SetItems(new UIBarButtonItem[] { yourNewButtonItem }, true); 
```

这将覆盖屏幕工具栏中的按钮项目列表。

# ruby - 我正在使用 ruby gem "roo" 读取 xlsx 文件，如何将一列的内容作为数组返回？

> ID：10878851
> 
> 赞同：1
> 
> 时间：2012-06-04T09:10:30.730
> 
> 标签：ruby, arrays, xlsx

```
require 'gchart'
require 'rubygems'
require 'roo'

oo = Excelx.new("datav.xlsx")
oo.default_sheet = oo.sheets.first
2.upto(47) do |line|
  data_a = [oo.cell(line,'B')]
  data_b = [oo.cell(line,'E')]

  chart_a = Gchart.new( :type => 'line',
                        :title => "A",
                        :theme => :keynote,
                        :width => 600,
                        :height => 500,
                        :data => data_a, 
                        :line_colors => 'e0440e',
                        :axis_with_labels => ['x', 'y'], 
                        :axis_range => [[0,50,20], [0,3000,500]],
                        :filename => "tmp/chart_a.png")

  chart_b = Gchart.new( :type => 'line',
                        :title => "B",
                        :theme => :keynote,
                        :width => 600,
                        :height => 500,
                        :data => data_b, 
                        :line_colors => 'e62ae5',
                        :axis_with_labels => ['x', 'y'], 
                        :axis_range => [[0,50,20], [0,3000,500]],
                        :filename => "tmp/chart_b.png")

  # Record file in filesystem
  chart_a.file
  chart_b.file

end 
```

这将使 B 列和 E 列的每个单元格的内容成为参数 :data 单独。如何将其作为数组返回？如果 roo 不能返回数组，那么还有其他 gem 这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:00:51.417

有一种`column`方法可以将给定列的值作为数组返回。调用`oo.column(2)`应该返回 B 列的值。`oo.column('B')`也可能有效。没有测试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:44:57.280

我需要将行作为哈希返回以与我用于 FasterCSV 的逻辑兼容。这将为您提供第一行的哈希作为键和当前行作为值。

```
def row_from_excel(s, line)
  row = {}
  s.first_column.upto(s.last_column) do |col|
    cell_name = s.cell(1, col)
    logger.debug "************* #{col} => #{cell_name} => #{s.cell(line, col)}"
    row[cell_name] = s.cell(line, col)      
  end

  row    
end

s = Excelx.new(path_to_file) # or Excel.new(path_to_file)
2.upto(s.last_row) do |line|
  row = row_from_excel(s, line)
end 
```

# jquery - 将复制标签的链接

> ID：10878853
> 
> 赞同：0
> 
> 时间：2012-06-04T09:11:07.127
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:25:57.093

您需要 flash 才能将某些内容复制到剪贴板，因为 js 为此受到限制（出于安全原因）。如您所见，bit.ly 使用相同的技术。

IE 是唯一能够使用 javascript 粘贴到剪贴板的浏览器。

jQuery-Plugin，使用 flash-fallback： http: [//www.steamdev.com/zclip/](http://www.steamdev.com/zclip/)

# mysql - 使用连接设置用户定义的变量

> ID：10878855
> 
> 赞同：1
> 
> 时间：2012-06-04T09:11:10.260
> 
> 标签：mysql, user-defined

我有一个如下查询：

结果给出@sold_count:=SUM(I.quantity) = 10，但@sold_count = 0，

所以计算都是0。

这里应该有什么问题？

```
SET @sold_count :=0;
SELECT 
@sold_count:=SUM(I.quantity),
@sold_count,I.from_widget,COUNT(from_widget) as order_count,
(@sold_count * buy_price) as ciro,
(@sold_count * list_price) as liste_ciro,
(@sold_count * widget_price) as vitrin_ciro,
P.*
FROM 
 tbl_products P
LEFT JOIN tbl_order_items I on I.product_id = P.id
WHERE
 P.publish_date BETWEEN DATE_SUB( CURDATE( ) ,INTERVAL 3 MONTH ) AND DATE_SUB( CURDATE(    ) ,INTERVAL 0 MONTH )
GROUP BY I.from_widget,I.product_id
ORDER BY publish_date DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:21:05.303

不要使用变量。只是：

```
SELECT 
    SUM(I.quantity),
    I.from_widget, 
    COUNT(from_widget)             AS order_count,
    SUM(I.quantity) * buy_price    AS ciro,
    SUM(I.quantity) * list_price   AS liste_ciro,
    SUM(I.quantity) * widget_price AS vitrin_ciro,
    P.*
FROM 
    tbl_products P
  LEFT JOIN tbl_order_items I 
      ON I.product_id = P.id
WHERE
 P.publish_date BETWEEN DATE_SUB( CURDATE( ) , INTERVAL 3 MONTH ) 
                    AND DATE_SUB( CURDATE( ) , INTERVAL 0 MONTH )
GROUP BY I.from_widget,
         I.product_id
ORDER BY publish_date DESC ; 
```

如果您不喜欢`SUM(quantity)`多次使用，也可以将查询设为嵌套查询：

```
SELECT 
    sum_quantity * buy_price    AS ciro,
    sum_quantity * list_price   AS liste_ciro,
    sum_quantity * widget_price AS vitrin_ciro,
    tmp.*
FROM
  ( SELECT 
        SUM(I.quantity)                AS sum_quantity,
        I.from_widget, 
        COUNT(from_widget)             AS order_count,
        buy_price,
        list_price,
        widget_price,
        P.*
    FROM 
        tbl_products P
      LEFT JOIN tbl_order_items I 
          ON I.product_id = P.id
    WHERE
     P.publish_date BETWEEN DATE_SUB( CURDATE( ) , INTERVAL 3 MONTH ) 
                        AND DATE_SUB( CURDATE( ) , INTERVAL 0 MONTH )
    GROUP BY I.from_widget,
             I.product_id
  ) AS tmp
ORDER BY publish_date DESC ; 
```

# c# - 下载文件时检查网络连接（c#）

> ID：10878856
> 
> 赞同：0
> 
> 时间：2012-06-04T09:11:12.110
> 
> 标签：c#, networking, download, webclient

我想**在**使用 WebClient 时检查我的互联网连接以下载文件。(WebClient.DownloadFile())。我想检查在下载过程中连接是否仍然可用。我怎么做 ？（在 C# 中）非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:52:15.867

你不能。除了尝试使用连接外，TCP 没有其他方法可以检查连接的状态。设置读取超时，并相应响应产生的 SocketTimeoutException；并通过关闭连接并可能重试来响应任何其他 IOException，具体取决于您的具体要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:43:45.317

您通常无法检测到 Internet 是否可用。但试探性地，您可以启动第二个线程，尝试以每 15 秒左右的 5 秒读取超时来获取 google.com。这样，您的连接检查可能会比您的主要下载有不同的、更难的超时。

# youtube - 白色图像作为 Youtube 视频预览

> ID：10878857
> 
> 赞同：1
> 
> 时间：2012-06-04T09:11:13.450
> 
> 标签：youtube, render, preview

我在网站中嵌入 Youtube 视频，但有时（这不是确定性错误，有时一切正常，有时不是）而不是 youtube 预览图像，只呈现一个白色方块。如果我检查该元素，我可以看到实际上有一个带有正确 SRC 属性的标签 IMG，如果我浏览这个 URL，我会得到正确的图像。

我在网站上得到白色方块有什么原因吗？

谢谢，斯特凡诺

# php - 如何在块中嵌入节点添加表单？

> ID：10878861
> 
> 赞同：1
> 
> 时间：2012-06-04T09:11:20.760
> 
> 标签：php, drupal, drupal-7, drupal-theming

如何在块中嵌入节点添加表单？

我尝试了以下方法，但它不起作用。“free_listing2_node_form”是我想嵌入这个块的节点添加表单的form_id。

如果下面的方法是正确的，我怀疑这个陈述有问题

```
$block['content'] = drupal_get_form('free_listing2_node_form'); 
```

非常感谢任何帮助/方向！

```
<?php

function freelisting2_block_info() {
  $blocks['neil_recent'] = array(
    'info' => t('neil_Recent content'),
  );

  return $blocks;
}

function freelisting2_block_view($delta = '') {
  $block = array();

  switch ($delta) {
    case 'neil_recent':
      if (user_access('access content')) {
        $block['subject'] = t('Recent content');
        $block['content'] = drupal_get_form('free_listing2_node_form');
      }
      break;
  }
  return $block;
}

?> 
```

（我正在使用 Drupal 7）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:21:26.030

尝试使用这个：

```
$block['content'] = render(drupal_get_form('free_listing2_node_form')); 
```

我没有测试它。

# java - 如何将图像序列转换为快速电影？

> ID：10878863
> 
> 赞同：1
> 
> 时间：2012-06-04T09:11:30.550
> 
> 标签：java, image, video, quicktime, mov

我一直在寻找这个。我需要构建一个独立的实用程序，它应该：

*   将图像序列转换为 .mov 格式
*   从用户那里获取输入并将其显示在 mov 中。

我打算用 Java 来做这件事，因为这是一种跨平台语言。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:15:18.487

看到[`JpegImagesToMovie.java`](http://www.koders.com/java/fid8AE9208DC5FB846910DFD3F935D64E7C9A5BB784.aspx)它需要 JMF 的 x-plat 版本（或更重要的是`jmf.jar`）。

对于更现代的替代方案，请查看[JFFMPEG](http://jffmpeg.sourceforge.net/) （具有更多格式和编码的 JMF）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T09:24:50.473

我之前使用[XUGGLER](http://www.xuggle.com/xuggler/)从图像帧制作视频。[借助此处](http://wiki.xuggle.com/Tutorials)提供的综合教程，使用 XUGGLER 很容易。您还可以将音频添加到从图像帧生成的视频中。

Xuggler 支持大量视频编解码器和视频容器格式，因此您可以选择创建不同格式的视频，不用管 .mov。希望这可以帮助。如果需要，我可以为这个实用程序发布我自己的代码。

# c# - 如何检索0作为C#中的第一个数字

> ID：10878865
> 
> 赞同：0
> 
> 时间：2012-06-04T09:12:08.310
> 
> 标签：c#, visual-studio, sql-server-2008

场景：
我有一个记录为 001234 的数据库，我将其调用`cmd.executescaler();`为一个`int`变量。问题是当我`001234`从它只提供的变量中检索保存的数据 () 数据时`1234`。`00`很重要，这是首先出现在 db中`001234`的问题，其中 sql 省略了第一个零，然后我将数据类型更改为 nvarchar ，它可以正常工作，我如何才能准确地检索表单上的数据`001234`。

注意：我不能将数据转换为字符串，因为我还必须对它们进行一些计算。

使用 Sql Server Visual Studio 2010 C#

希望它是清楚的而不是模糊的。如果您需要更多信息，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T09:16:12.580

数字数据类型没有也不能有前导零。因此，拥有前导零的唯一方法是将值存储为字符串。

但是，这只是格式化显示给用户的*输出的问题。*您可以将数据库值读入`int`变量，进行计算，并在显示值时执行以下操作：

```
string displayValue = String.Format("{0:D6}", intValue); 
```

并显示 的值`displayValue`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:20:56.317

如果您想**在代码方面工作**：

```
string displayValue = String.Format("{0:D6}", intValue); 
```

如果你想**在数据库端工作，**你需要一个允许编写这种查询的**Pad 函数：**

```
SELECT dbo.PadString ('8', '0', 5)
->Result: 00008

SELECT dbo.PadString ('abc', '*', 12)
->Result: *********abc

SELECT dbo.PadString ('abc', '0', 7)
->Result: 0000abc 
```

在 T-SQL 中创建函数

```
CREATE FUNCTION [dbo].[PadString] 
  (@Seq varchar(16),
   @PadWith char(1),
   @PadLength int
  ) 
RETURNS varchar(16) AS

BEGIN 
  declare @curSeq varchar(16)

  SELECT @curSeq = ISNULL(REPLICATE(@PadWith, @PadLength - len(ISNULL(@Seq ,0))), '') + @Seq

  RETURN @curSeq
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T10:03:58.613

您可以在检索号码后在 c# 中使用 string.PadLeft()，因为您有固定长度的号码

来自 msdn 的示例，

```
string str = "forty-two";
char pad = '.';

Console.WriteLine(str.PadLeft(15, pad));    // Displays "......forty-two".
Console.WriteLine(str.PadLeft(2, pad));     // Displays "forty-two". 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T09:22:09.527

SQL 这样做的原因是因为 001234 = 1234 任何数字格式，无论它是什么类型。作为“脏”解决方案，您可以将其转换为 int，它将为您提供 1234，执行您的计算，然后将您的答案转换回添加前导零的字符串。

```
int myValue = Int32.Parse("001234");
int myAnswer = myValue * 2;

string myAnswerString = "00" + myAnswer.ToString(); 
```

最好的方法是按照@Thorsten Dittmar 的建议格式化您的字符串。如果可能的话，不要将数据库中的数值存储为 varchar，但是我知道这有时是一个要求，但我看不出对这些值进行计算的意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T09:25:15.013

如果那些前导零有一些意义并且不能被遗漏，则可以进行转换：

```
 int number = 0;
            string strNumber = (string)cmd.ExecuteScalar();
            if(int.TryParse(strNumber, out number))
            {
                // process number

                // if you want some output to be formatted with leading 
                // zeros you can use PadLeft method
                int totalNumberOfDigits = 6;
                string strResult = number.ToString().PadLeft(totalNumberOfDigits, '0');
            } 
```

# android - 如何将图库中的图像上传到我的应用程序中

> ID：10878866
> 
> 赞同：1
> 
> 时间：2012-06-04T09:12:18.543
> 
> 标签：android, image

我已使用此代码，以便可以将图片从图库上传到我的应用程序中。但问题是当我的应用程序尝试打开图库时，我会强制关闭错误。

请帮助我，因为我不知道如何解决这个错误

```
private static final int SELECT_PICTURE = 1;
    private String selectedImagePath; 
    private ImageView img;  
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);    
        setContentView(R.layout.main);  
        img = (ImageView)findViewById(R.id.imageView1);     
        ((Button) findViewById(R.id.button1)).setOnClickListener(new OnClickListener(){
            public void onClick(View arg0) {
                Intent intent = new Intent();
                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);
                startActivityForResult(Intent.createChooser(intent,"SelectPicture"), SELECT_PICTURE);}});
          }    
    public void onActivityResult(int requestCode, int resultCode, Intent data) { 

        if (resultCode == RESULT_OK) {if (requestCode == SELECT_PICTURE)

        {
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri); 
            System.out.println("Image Path : " + selectedImagePath);
            img.setImageURI(selectedImageUri);  
            }     
        }  }
                    public String getPath(Uri uri) {  
        String[] projection = { MediaStore.Images.Media.DATA }; 
        Cursor cursor = managedQuery(uri, projection, null, null, null); 
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);   
        cursor.moveToFirst();       
        return cursor.getString(column_index);}} 
```

这里是我的 LogCat

```
06-04 14:41:06.236: D/AndroidRuntime(9655): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
06-04 14:41:06.236: D/AndroidRuntime(9655): CheckJNI is ON
06-04 14:41:07.906: D/AndroidRuntime(9655): Calling main entry com.android.commands.pm.Pm
06-04 14:41:08.396: D/dalvikvm(282): GC_EXPLICIT freed 5K, 5% free 6243K/6531K, paused 13ms+5ms
06-04 14:41:08.418: W/ActivityManager(80): No content provider found for: 
06-04 14:41:08.497: W/ActivityManager(80): No content provider found for: 
06-04 14:41:08.546: D/PackageParser(80): Scanning package: /data/app/vmdl881881834.tmp
06-04 14:41:08.776: I/PackageManager(80): Removing non-system package:imag.imo.isithombe
06-04 14:41:08.776: I/ActivityManager(80): Force stopping package imag.imo.isithombe uid=10045
06-04 14:41:08.776: I/Process(80): Sending signal. PID: 6434 SIG: 9
06-04 14:41:08.776: I/ActivityManager(80):   Force finishing activity ActivityRecord{409fd970 imag.imo.isithombe/.ImagggggggActivity}
06-04 14:41:08.901: I/WindowManager(80): WIN DEATH: Window{40faeaa8 imag.imo.isithombe/imag.imo.isithombe.ImagggggggActivity paused=true}
06-04 14:41:09.798: D/PackageManager(80): Scanning package imag.imo.isithombe
06-04 14:41:09.798: I/PackageManager(80): Package imag.imo.isithombe codePath changed from /data/app/imag.imo.isithombe-2.apk to /data/app/imag.imo.isithombe-1.apk; Retaining data and using new
06-04 14:41:09.819: I/PackageManager(80): Unpacking native libraries for /data/app/imag.imo.isithombe-1.apk
06-04 14:41:09.915: D/installd(35): DexInv: --- BEGIN '/data/app/imag.imo.isithombe-1.apk' ---
06-04 14:41:10.755: D/dalvikvm(9664): DexOpt: load 100ms, verify+opt 327ms
06-04 14:41:10.776: D/installd(35): DexInv: --- END '/data/app/imag.imo.isithombe-1.apk' (success) ---
06-04 14:41:10.785: W/PackageManager(80): Code path for pkg : imag.imo.isithombe changing from /data/app/imag.imo.isithombe-2.apk to /data/app/imag.imo.isithombe-1.apk
06-04 14:41:10.785: W/PackageManager(80): Resource path for pkg : imag.imo.isithombe changing from /data/app/imag.imo.isithombe-2.apk to /data/app/imag.imo.isithombe-1.apk
06-04 14:41:10.785: D/PackageManager(80):   Activities: imag.imo.isithombe.ImagggggggActivity
06-04 14:41:10.799: I/ActivityManager(80): Force stopping package imag.imo.isithombe uid=10045
06-04 14:41:11.455: I/installd(35): move /data/dalvik-cache/data@app@imag.imo.isithombe-1.apk@classes.dex -> /data/dalvik-cache/data@app@imag.imo.isithombe-1.apk@classes.dex
06-04 14:41:11.475: D/PackageManager(80): New package installed in /data/app/imag.imo.isithombe-1.apk
06-04 14:41:11.885: I/ActivityManager(80): Force stopping package imag.imo.isithombe uid=10045
06-04 14:41:12.635: D/dalvikvm(80): GC_EXPLICIT freed 1040K, 18% free 14554K/17735K, paused 9ms+42ms
06-04 14:41:12.985: W/ActivityManager(80): Unable to launch app com.android.providers.contacts/10000 for broadcast Intent { act=android.intent.action.PACKAGE_REMOVED dat=package:imag.imo.isithombe flg=0x10000010 (has extras) }: process is bad
06-04 14:41:12.985: W/ActivityManager(80): finishReceiver called but none active
06-04 14:41:13.006: W/ActivityManager(80): Unable to launch app com.android.contacts/10000 for broadcast Intent { act=android.intent.action.PACKAGE_REMOVED dat=package:imag.imo.isithombe flg=0x10000010 (has extras) }: process is bad
06-04 14:41:13.006: W/ActivityManager(80): finishReceiver called but none active
06-04 14:41:13.055: D/PackageManager(80): generateServicesMap(android.accounts.AccountAuthenticator): 2 services unchanged
06-04 14:41:13.147: D/PackageManager(80): generateServicesMap(android.content.SyncAdapter): 4 services unchanged
06-04 14:41:13.225: D/PackageManager(80): generateServicesMap(android.accounts.AccountAuthenticator): 2 services unchanged
06-04 14:41:13.245: D/PackageManager(80): generateServicesMap(android.content.SyncAdapter): 4 services unchanged
06-04 14:41:13.275: W/ActivityManager(80): Unable to launch app com.android.providers.contacts/10000 for broadcast Intent { act=android.intent.action.PACKAGE_ADDED dat=package:imag.imo.isithombe flg=0x10000010 (has extras) }: process is bad
06-04 14:41:13.275: W/ActivityManager(80): finishReceiver called but none active
06-04 14:41:13.625: W/ActivityManager(80): Unable to launch app com.android.contacts/10000 for broadcast Intent { act=android.intent.action.PACKAGE_ADDED dat=package:imag.imo.isithombe flg=0x10000010 (has extras) }: process is bad
06-04 14:41:13.657: W/ActivityManager(80): finishReceiver called but none active
06-04 14:41:13.665: W/ActivityManager(80): Unable to launch app com.android.providers.contacts/10000 for broadcast Intent { act=android.intent.action.PACKAGE_REPLACED dat=package:imag.imo.isithombe flg=0x10000010 (has extras) }: process is bad
06-04 14:41:13.665: W/ActivityManager(80): finishReceiver called but none active
06-04 14:41:13.665: W/ActivityManager(80): Unable to launch app com.android.contacts/10000 for broadcast Intent { act=android.intent.action.PACKAGE_REPLACED dat=package:imag.imo.isithombe flg=0x10000010 (has extras) }: process is bad
06-04 14:41:13.680: W/ActivityManager(80): finishReceiver called but none active
06-04 14:41:13.725: W/RecognitionManagerService(80): no available voice recognition services found
06-04 14:41:14.046: D/dalvikvm(141): GC_EXPLICIT freed 2038K, 24% free 18162K/23687K, paused 7ms+19ms
06-04 14:41:14.275: I/Launcher(141): setLoadOnResume
06-04 14:41:15.685: D/dalvikvm(141): GC_CONCURRENT freed 1880K, 23% free 18301K/23687K, paused 12ms+23ms
06-04 14:41:17.347: D/dalvikvm(80): GC_EXPLICIT freed 286K, 19% free 14521K/17735K, paused 9ms+289ms
06-04 14:41:17.506: I/installd(35): unlink /data/dalvik-cache/data@app@imag.imo.isithombe-2.apk@classes.dex
06-04 14:41:17.530: D/AndroidRuntime(9655): Shutting down VM
06-04 14:41:17.575: I/AndroidRuntime(9655): NOTE: attach of thread 'Binder Thread #3' failed
06-04 14:41:17.597: D/dalvikvm(9655): GC_CONCURRENT freed 100K, 84% free 337K/2048K, paused 2ms+2ms
06-04 14:41:17.597: D/jdwp(9655): Got wake-up signal, bailing out of select
06-04 14:41:17.597: D/dalvikvm(9655): Debugger has detached; object registry had 1 entries
06-04 14:41:19.105: D/AndroidRuntime(9669): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
06-04 14:41:19.105: D/AndroidRuntime(9669): CheckJNI is ON
06-04 14:41:20.986: D/AndroidRuntime(9669): Calling main entry com.android.commands.am.Am
06-04 14:41:21.116: I/ActivityManager(80): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=imag.imo.isithombe/.ImagggggggActivity } from pid 9669
06-04 14:41:21.198: W/WindowManager(80): Failure taking screenshot for (230x143) to layer 21035
06-04 14:41:21.376: D/AndroidRuntime(9669): Shutting down VM
06-04 14:41:21.439: I/AndroidRuntime(9669): NOTE: attach of thread 'Binder Thread #3' failed
06-04 14:41:21.476: I/ActivityManager(80): Start proc imag.imo.isithombe for activity imag.imo.isithombe/.ImagggggggActivity: pid=9679 uid=10045 gids={}
06-04 14:41:21.496: D/dalvikvm(9669): GC_CONCURRENT freed 98K, 83% free 358K/2048K, paused 1ms+1ms
06-04 14:41:21.540: D/jdwp(9669): Got wake-up signal, bailing out of select
06-04 14:41:21.540: D/dalvikvm(9669): Debugger has detached; object registry had 1 entries
06-04 14:41:24.316: V/TLINE(9679): new: android.text.TextLine@406538d0
06-04 14:41:25.286: V/TLINE(9679): new: android.text.TextLine@406584d8
06-04 14:41:25.357: I/ActivityManager(80): Displayed imag.imo.isithombe/.ImagggggggActivity: +4s16ms
06-04 14:41:27.316: D/dalvikvm(324): GC_EXPLICIT freed 19K, 6% free 6324K/6663K, paused 6ms+825ms
06-04 14:41:27.326: W/IInputConnectionWrapper(4295): showStatusIcon on inactive InputConnection
06-04 14:41:28.440: I/ActivityManager(80): Starting: Intent { act=android.intent.action.CHOOSER cmp=android/com.android.internal.app.ChooserActivity (has extras) } from pid 9679
06-04 14:41:28.445: W/WindowManager(80): Failure taking screenshot for (230x143) to layer 21040
06-04 14:41:28.795: I/ActivityManager(80): Starting: Intent { act=android.intent.action.GET_CONTENT typ=image/* flg=0x3000000 cmp=com.android.gallery/com.android.camera.ImageGallery } from pid 9679
06-04 14:41:28.946: I/ActivityManager(80): Start proc com.android.gallery for activity com.android.gallery/com.android.camera.ImageGallery: pid=9687 uid=10016 gids={1015, 1024, 1006, 2001, 3003}
06-04 14:41:30.685: D/AndroidRuntime(9687): Shutting down VM
06-04 14:41:30.685: W/dalvikvm(9687): threadid=1: thread exiting with uncaught exception (group=0x40014760)
06-04 14:41:30.746: E/AndroidRuntime(9687): FATAL EXCEPTION: main
06-04 14:41:30.746: E/AndroidRuntime(9687): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.gallery/com.android.camera.ImageGallery}: android.util.AndroidRuntimeException: You cannot combine custom titles with other title features
06-04 14:41:30.746: E/AndroidRuntime(9687):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1748)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1764)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at android.app.ActivityThread.access$1500(ActivityThread.java:122)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1002)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at android.os.Looper.loop(Looper.java:132)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at android.app.ActivityThread.main(ActivityThread.java:4025)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at java.lang.reflect.Method.invokeNative(Native Method)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at java.lang.reflect.Method.invoke(Method.java:491)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at dalvik.system.NativeStart.main(Native Method)
06-04 14:41:30.746: E/AndroidRuntime(9687): Caused by: android.util.AndroidRuntimeException: You cannot combine custom titles with other title features
06-04 14:41:30.746: E/AndroidRuntime(9687):     at com.android.internal.policy.impl.PhoneWindow.requestFeature(PhoneWindow.java:204)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at com.android.internal.policy.impl.PhoneWindow.generateLayout(PhoneWindow.java:2339)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:2546)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:219)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at android.app.Activity.setContentView(Activity.java:1780)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at com.android.camera.ImageGallery.onCreate(ImageGallery.java:113)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
06-04 14:41:30.746: E/AndroidRuntime(9687):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1712)
06-04 14:41:30.746: E/AndroidRuntime(9687):     ... 11 more
06-04 14:41:30.775: W/ActivityManager(80):   Force finishing activity com.android.gallery/com.android.camera.ImageGallery
06-04 14:41:30.845: W/WindowManager(80): Failure taking screenshot for (230x143) to layer 21045
06-04 14:41:31.355: W/ActivityManager(80): Activity pause timeout for ActivityRecord{409d6360 com.android.gallery/com.android.camera.ImageGallery}
06-04 14:41:34.515: I/Process(9687): Sending signal. PID: 9687 SIG: 9
06-04 14:41:34.565: I/ActivityManager(80): Process com.android.gallery (pid 9687) has died.
06-04 14:41:35.175: W/InputManagerService(80): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@41028698
06-04 14:41:38.836: D/dalvikvm(402): GC_EXPLICIT freed 11K, 5% free 6237K/6531K, paused 9ms+4ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:21:47.687

> 原因：android.util.AndroidRuntimeException：您不能将自定义标题与其他标题功能结合使用

我怀疑你可能用过

```
<item name="android:windowNoTitle">true</item> 
```

如果是这样删除它。

# ruby - 如何简化这个 ActiveRecord 急切加载查询？

> ID：10878869
> 
> 赞同：1
> 
> 时间：2012-06-04T09:12:30.563
> 
> 标签：ruby, activerecord, eager-loading

在我的一个项目中，我使用的是 Ruby ActiveRecord（不是 Rails 应用程序），我使用以下结构：

```
class Customer < ::ActiveRecord::Base
  has_and_belongs_to_many :categories
end

class Categories < ::ActiveRecord::Base
  has_and_belongs_to_many :customers
end 
```

在应用程序的一部分中，我加载所有客户来处理它们，并尝试预先加载它们的相关类别（在*ActiveRecord::IdentityMap.use*块中）：

```
Customer.includes(:categories).all 
```

这完成了我需要做的事情，但是当我查看生成的即时加载查询时，它看起来像：

```
SELECT "categories".*, "t0"."customer_id" AS ar_association_key_name_customer_id
FROM "categories" INNER JOIN "customers_categories" "t0"
ON "categories"."id" = "t0"."category_id" WHERE
((("t0"."customer_id" = 1) OR ("t0"."customer_id" = 2) OR ("t0"."customer_id" = 3) OR ... )) 
```

我正在加载所有客户，无需在连接表上过滤它们。只有几个类别，但许多客户和生成的查询有数千个不需要的 OR 语句。

有没有办法简化查询（以 ActiveRecord 方式）不包括 customer_id = X 形式的 WHERE 条件？

# javascript - window.status 不工作

> ID：10878876
> 
> 赞同：0
> 
> 时间：2012-06-04T09:13:15.033
> 
> 标签：javascript

我编写了一个 javascript，用于在 ajax 调用请求的情况下更改浏览器的状态。这在本地工作，但后来当它部署到其他网站时，它不会反映在其中。

使用的脚本是

```
window.status='Processing..'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T09:15:23.753

出于安全考虑，在大多数浏览器上，默认情况下可能会禁用[window.status修改 - 考虑一下：](https://developer.mozilla.org/en/DOM/window.status)

```
<a href="http://imac001hacker.net" onmouseover='window.status="http://whitehouse.gov"' onmouseout='window.status=""'>Visit the White House home page!</a> 
```

# node.js - 使用 Jenkins 在 NodeJS 上运行单元测试

> ID：10878877
> 
> 赞同：3
> 
> 时间：2012-06-04T09:13:19.113
> 
> 标签：node.js, jenkins

我如何设置 Jenkins 来启动我的 Node.JS 测试服务器，运行单元测试（可能是 JSTestDriver/Jasmine），然后运行 ​​Node.JS？

我可以使用 Execute Shell 启动 Node.JS，但它会“挂起”构建（预计因为 Node 作为守护程序运行）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T12:05:22.667

我写了一篇文章，解释了我是如何设法使用 Mocha 和 ant 运行单元测试的。

基本思想是：

*   设置你的环境变量，以便 jenkins 可以控制它们
*   使用 mocha 的 xunit 报告器生成结果报告
*   使用 Jenkins 的 Publish JUnit 测试结果报告选项来阅读结果报告。

[您可以在此处阅读全文](http://johnhamelink.com/testing-nodejs-with-jenkins.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:25:52.727

JSTestDriver 以符合 xUnit 的 xml 格式输出结果。然后 Hudson 'xUnit' 插件可以解释它。

我们计划将 jsTestDriver 集成到 Jenkins 中。在一系列支持的浏览器中测试我们的 JavaScript 代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-12-19T00:32:05.193

有一个执行 nodejs 的插件，可以选择 nodejs 版本

[https://wiki.jenkins-ci.org/display/JENKINS/NodeJS+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/NodeJS+Plugin)

# css - DIV 框不会对齐

> ID：10878878
> 
> 赞同：0
> 
> 时间：2012-06-04T09:13:23.300
> 
> 标签：css, html, css-float

我一直在阅读文档、教程和示例。但无论我做什么，我似乎都无法让这 4 个盒子正确对齐。

```
div#frontpage{width:100%; }
div#1{width:25%; float:left; position:relative;}
div#2{width:25%; float:left; position:relative;}
div#3{width:25%; float:right; position:relative;}
div#4{width:25%; float:right; position:relative;}
.clear{clear:both;}

<div id="frontpage">
<div id="1">
</div>
<div id"2">
</div>
<div id="3">
</div>
<div id="4">
</div>
<div class="clear">
</div>
</div> 
```

这是我到目前为止提出的，也是我想要达到的最接近的结果。让它们全部水平对齐一行。我使用 % 而不是 px 的原因是因为我的 wordpress 主题是响应式的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:18:41.613

只是稍微调整了一下，它工作正常。CSS

```
div#frontpage{width:100%; }
div.box{width:25%; float:left; position:relative;}
.clear{clear:both;}​ 
```

HTML

```
<div id="frontpage">
<div class="box">
    a
</div>
<div class="box">
    s
</div>
<div class="box">
    d
</div>
<div class="box">
    f
</div>
<div class="clear">
</div>
</div>​​​​​​​​​​​​​ 
```

正如 Phil 所提到的，ID 不应该是数字。另外，您`<div id"2">`应该是`<div id="2">`（缺少'='符号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:22:57.393

请参阅此工作示例[http://jsfiddle.net/QFMXx/](http://jsfiddle.net/QFMXx/)
更改代码中的 ID。ID 不应该以数字开头

```
<div id="frontpage">
   <div id="d1">sfdfs
   </div>
   <div id="d2">dfsdf
   </div>
   <div id="d3">dsfsdf
   </div>
   <div id="d4">dfsfsd
   </div>
   <div class="clear">sdfsd
   </div>
</div> 
```

和CSS：

```
div#frontpage{width:100%; }
div#d1{width:25%; float:left; position:relative;}
div#d2{width:25%; float:left; position:relative;}
div#d3{width:25%; float:right; position:relative;}
div#d4{width:25%; float:right; position:relative;}
.clear{clear:both;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:25:45.410

我稍微修改了你的代码并得到了结果。你能试试这个吗？

```
<style>div#frontpage{width:100%; height:50%;border:1px solid red }
div.s1{width:25%; height:50%;float:left; position:relative;border:1px solid blue;clear:both}
.clear{clear:both;}
</style>
<div id="frontpage">
<div class="s1">
</div>
<div class="s1">
</div>
<div class="s1">
</div>
<div class="s1">
</div>
<div class="clear">
</div>
</div>  
</div> 
```

Hope this helps.

--Felix

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T09:58:48.550

Id must not start with a number. and maybe you can use the following style

```
 <style>
div#frontpage{width:100%;background-color:#ccc; }
div#a1{width:25%; float:left; position:relative;background-color:red;margin-right:75%;}
div#a2{width:25%; float:left; position:relative;background-color:#ffccea;margin:0 50% 0 -75%}
div#a3{width:25%; float:right; position:relative;background-color:blue;margin:0 25% 0 -50%}
div#a4{width:25%; float:right; position:relative;background-color:yellow;margin:0 0 0 -25%}
.clear{clear:both;}
</style> 
```

I used a margin to the right to push away all the elements and a negetive margin to the left to pull up my desired elements.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T06:09:17.240

```
div#frontpage{width:100%;  position:relative;}
div#a{width:25%; float:left; }
div#b{width:25%; float:left; }
div#c{width:25%; float:right;}
div#d{width:25%; float:right;}
.clear{clear:both;}

<div id="frontpage">
<div id="a"></div>
<div id"b"></div>
<div id="c"></div>
<div id="d"></div>
<div class="clear"></div>
</div> 
```

I am not sure,

# windows-phone-7 - wp7中扩展器视图内的列表框

> ID：10878879
> 
> 赞同：0
> 
> 时间：2012-06-04T09:13:30.350
> 
> 标签：windows-phone-7, silverlight-4.0, silverlight-toolkit, expander

我们可以在 wp7.x 的扩展视图中有一个列表框吗？我有一个应该自动添加列表框项目的场景。喜欢。

我有一个示例 cs 代码来提供 itemsource 并将数据与列表框绑定。

Cs 代码：

```
lstsample.Add(new sample() { fname = "3i", lname = "infotech" });
lstsample.Add(new sample() { fname = "Tata", lname = "Consultancy" });
lstsample.Add(new sample() { fname = "Robert", lname = "Bosche" });
lst.ItemsSource=lstsample; 
```

可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:57:58.553

当然，您可以在 ExpanderView 中使用 ListBox 作为 ItemTemplate 来编写它。但为什么？为了什么？

# c# - 半开插座

> ID：10878882
> 
> 赞同：0
> 
> 时间：2012-06-04T09:13:44.893
> 
> 标签：c#, sockets

在 node.js 中，可以有一个半开的套接字。这意味着套接字可以在不关闭整个套接字的情况下变为只读或只写。一个例子：

```
var net = require("net");
net.createServer({allowHalfOpen:true},function(c){
    c.on("data",function(d){
        console.log(d+"");
    });
    c.on("end",function(){
        console.log("ended");
        c.end("thx");
    });
}).listen(888);

var c = net.connect(888,function(){
    c.end("hi");
    c.on("data",function(d){
        console.log(d+"");
    });
    c.on("end",function(){
        console.log("ended");
    });
}); 
```

输出：

```
hi
ended
thx
ended 
```

C# 中有没有办法只关闭一个方向的套接字？另外，有没有办法知道套接字是否可读但不可写，反之亦然？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:45:24.120

是的。TCP 中有一个“关闭输出”操作，C# 中有一个 API。再看看。

# jquery - 使用 iScroll 的 Jquery 自动完成功能

> ID：10878883
> 
> 赞同：0
> 
> 时间：2012-06-04T09:13:49.753
> 
> 标签：jquery, css, jquery-ui, jquery-mobile

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:29:47.597

我建议中止 iScroll 方法并为此使用纯 CSS：

```
.ui-autocomplete {
    max-height: 100px;
    overflow-y: auto;
    /* prevent horizontal scrollbar */
    overflow-x: hidden;
    /* add padding to account for vertical scrollbar */
    padding-right: 20px;
}
/* IE 6 doesn't support max-height
 * we use height instead, but this forces the menu to always be this tall
 */
* html .ui-autocomplete {
    height: 100px;
} 
```

稍后，如果您坚持，您可以在为此目的创建的[许多](http://www.aplweb.co.uk/blog/js/scrollbars-v2/) [库](http://livepipe.net/control/scrollbar) [的帮助](http://baijs.nl/tinyscrollbar/) [下分配自定义滚动条。](http://www.areaaperta.com/nicescroll/demo/)

***注意：** CSS 片段是从官方的[jQuery UI AutoComplete 参考](http://jqueryui.com/demos/autocomplete/#option-source)移植过来的。*

# azure - MVC4 中的约定文件名

> ID：10878884
> 
> 赞同：0
> 
> 时间：2012-06-04T09:13:56.443
> 
> 标签：azure, asp.net-mvc-4, azure-storage

我正在阅读本[指南](http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/#create-table)，了解如何使用 Azure 表进行数据存储。但是在本指南中并没有真正告诉您应该将文件保存在哪个文件夹中。所以我想知道是否有一些最新的指南告诉你，或者是否有人可以显示或解释代码进入哪个文件夹？

例如，我应该将此代码存储到模型文件夹中吗？

```
public class CustomerEntity : TableServiceEntity
{
    public CustomerEntity(string lastName, string firstName)
    {
        this.PartitionKey = lastName;
        this.RowKey = firstName;
    }

    public CustomerEntity() { }

    public string Email { get; set; }

    public string PhoneNumber { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:01:56.517

该指南说明如何使用 Azure 表存储。相同的代码可用于 MVC 应用程序、Web 窗体应用程序、WPF 应用程序等。因此，正如 Leon 所指出的，实际解决方案中的最佳实践是创建一个类库项目作为数据访问层。然后它可以被多个项目重用。

但如果你只需要在单个 MVC 应用程序中访问表存储，只需将代码放在 MVC 项目中就可以了。通常你把它放在 Models 文件夹下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:17:11.617

我通常为所有东西创建不同的项目。由于您的示例包含一个实体，我将把它放在一个名为“实体”的项目中，我可以在整个应用程序中使用它。同样，我创建了一个包含视图模型的“ViewModels”项目，一个包含 MVC 应用程序的“WebUI”项目等。

您可以将所有代码放在一个项目中（哪个文件夹并不重要），但如果将代码放在不同的程序集中，共享和重用代码会更容易。

# vb.net - 重构案例语句和动态运算符

> ID：10878887
> 
> 赞同：0
> 
> 时间：2012-06-04T09:14:10.307
> 
> 标签：vb.net, refactoring

我有一个 case 语句，它通过获取诸如“eq,ne,gt,...”之类的参数来比较数据。实际上这个方法会通过获取过滤器参数和过滤器值来过滤数据。如何重构下面的代码？谢谢。

```
 For iRow As Integer = 1 To ......
                                       .......
                                      columnData = rowData(HeaderIndex)

                                       Case "eq"
                                            If Not (columnData = filterData) Then
                                                arrayDel(iRow) = True
                                                droppedRows += 1
                                            End If

                                        Case "ne"
                                            If Not (columnData <> filterData) Then
                                                arrayDel(iRow) = True
                                                droppedRows += 1
                                            End If

                                        Case "gt"
                                            If Not (columnData > filterData) Then
                                                arrayDel(iRow) = True
                                                droppedRows += 1
                                            End If

                                        Case "ge"
                                            If Not (columnData >= filterData) Then
                                                arrayDel(iRow) = True
                                                droppedRows += 1
                                            End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:31:07.167

一种方法可能是使用一个函数来获取您的字符串和列并过滤数据并简单地返回相关的布尔值。

```
Case "eq"
    return (columnData = filterData)
Case "ne"
    return (columnData <> filterData)
Case "gt"
    return (columnData > filterData)
Case "ge"
    return (columnData >= filterData) 
```

这更容易查看并且省去了重复的行（现在在调用我们的新函数后只在一个地方调用）。

# javascript - 使用 java 脚本中的局部函数更改全局变量值

> ID：10878890
> 
> 赞同：-3
> 
> 时间：2012-06-04T09:14:14.127
> 
> 标签：javascript, html

我写了一个非常简单的java脚本代码。我想使用局部函数更改全局变量的值。我希望当我调用该`value1()`函数时，输出应该是“2”。我该怎么做

```
var xhr=1;
alert(xhr);

function vari(){
    xhr=2;
    alert(xhr);
}

function value1(){ 
    //here the value should be 2
    alert(xhr);       
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:19:17.120

您的代码工作正常！你必须调用`vari()`，但你知道的，对吧？如果你不调用改变值的函数，你不能期望变量会改变！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:19:39.657

仅当`xhr`您已经*调用*.`value1()``2` *`vari()`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:24:10.807

从给定的场景中，我认为您在调用`value1()`之前调用函数`vari()`。这就是为什么你得到 1 作为输出。

试试下面的代码

```
 var xhr=1;
      alert(xhr);
      function vari(){
            xhr=2;
                alert(xhr);
      }

      function value1(){ 
          //here the value should be 2
               alert(xhr);       

      }
      window.onload = vari();
      window.onload = value1(); 
```*

# android - 将手机设置为永不振动

> ID：10878891
> 
> 赞同：1
> 
> 时间：2012-06-04T09:14:19.267
> 
> 标签：android, vibration

我编写了这段代码来禁用声音设置中的振动。但它不适用于三星 Galaxy s (GT-I9003)。

代码片段：

```
public class A_TestActivity extends Activity {
    /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    AudioManager am = (AudioManager)this.getSystemService(Context.AUDIO_SERVICE);                          
    am.setVibrateSetting
    (AudioManager.VIBRATE_TYPE_RINGER,AudioManager.VIBRATE_SETTING_OFF);
    am.setRingerMode(AudioManager.RINGER_MODE_SILENT);
  }
} 
```

还要放权限：

```
<uses-permission android:name="android.permission.VIBRATE"/>
<uses-permission android:name="android.permission.WRITE_SETTINGS" />
<uses-permission android:name="android.permission.MODIFY_PHONE_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

如有错误请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:52:22.557

也许你需要捕捉某种接收短信或其他东西。使用 BroadcastReceiver 和 While Activity is onCreate。如果您的设备收到短信。该代码将起作用。对不起，我还没有测试。

# jquery - 唯一标识 html id

> ID：10878897
> 
> 赞同：0
> 
> 时间：2012-06-04T09:14:54.673
> 
> 标签：jquery, html

```
<div id=Apple1>
    <div id=Round></div>
</div>
<div id=Apple2>
    <div id=Round></div>
</div>
<div id=Apple3>
    <div id=Round></div>
</div>
<div id=Apple4>
    <div id=Round></div>
</div>
<div id=Apple5>
    <div id=Round></div>
</div>

$("#Apple1 #Round")
$("#Apple2 #Round")
$("#Apple3 #Round") 
```

基本上我有多个 div 不同的包装器 div id 和相同的内部 div id。

我可以以这种方式使用 jquery 来唯一标识 div 标签吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T09:17:07.777

`id``id`根据定义应该已经是唯一的，我会说在 HTML 页面中拥有多个相同的内容是无效的。

如果需要，您可以使用类：

```
<div id="Apple1">
   <div class="Round">
</div>
... 
```

然后

```
$('#Apple1 .Round');
//etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:16:58.457

是的，你可以，但是在任何标准下，拥有多个相同`id`的元素都不是有效的 HTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T09:17:15.967

id 必须是唯一的，改为使用“Round”类，然后在唯一 id div 内定位标识轮次。

```
$('#Apple1 .Round') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T09:18:14.703

您不能在页面中重复 ID，它们必须是唯一的。将您的重复 ID 切换到班级

```
<div id=Apple1>
     <div class=Round></div>
 </div> 
```

然后你做你最初尝试的事情

```
 $('#Apple1 .Round').doSomething() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T09:18:26.357

ID 必须是唯一的。您必须使用 class 而不是您的 id “round”。

```
<div id="Apple1">
    <div class="Round"></div>
</div>
<div id="Apple2">
    <div class="Round"></div>
</div>
<div id="Apple3">
    <div class="Round"></div>
</div>
<div id="Apple4">
    <div class="Round"></div>
</div>
<div id="Apple5">
    <div class="Round"></div>
</div> 
```

比你可以这样查询jquery：

```
$("#Apple1 .Round")
$("#Apple2 .Round")
$("#Apple3 .Round") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-04T09:19:11.520

```
<div id=Apple1>
    <div></div>
</div>
<div id=Apple2>
    <div></div>
</div>
<div id=Apple3>
    <div></div>
</div>
<div id=Apple4>
    <div></div>
</div>
<div id=Apple5>
    <div></div>
</div>

$("#Apple1").children()
$("#Apple2").children()
$("#Apple3").children() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-04T09:19:19.437

是的，伙计。

你可以使用这个。但 ID 必须是唯一的。所以最好让它上课

# javascript - Javascript没有在Heroku上运行，开发很好，其他很好

> ID：10878904
> 
> 赞同：0
> 
> 时间：2012-06-04T09:15:24.820
> 
> 标签：javascript, ruby-on-rails, heroku

我有一个 Rails 3.1 应用程序，其中包含几个在 Heroku 上运行良好的 Javascript。我想自动检测时区并开始使用这个 Jon Nylanders 很棒的脚本来做到这一点。它在这里可用：[https ://bitbucket.org/pellepim/jstimezonedetect/src](https://bitbucket.org/pellepim/jstimezonedetect/src)

现在的问题是，这个 Javascript 在我的本地机器上运行得很好，但在 Heroku 上却不行。Safari 中的控制台显示该函数未定义。我这样称呼它：

```
<script type="text/javascript">
  var tz = jstz.determine();
</script> 
```

这个 Javascript 和我使用的其他 Javascript 之间的主要区别是这个有一个名称空间。也许这与它有关？

我已经运行了 rake 并且我已经验证了 application.js 包含该脚本。我已经尝试了可下载的缩小版本以及它自己的 .js 文件中的完整源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:50:22.247

事实证明，另一个 Javascript 中有一个错误，我暂时忽略了一个错误（因为我没有使用该代码）。然而，当编译成 application.js 时，这个错误也会以某种方式干扰所有其他 javascripts 的执行。

# javascript - 当网络服务由于互联网连接问题而没有响应时，我该如何获取

> ID：10878910
> 
> 赞同：0
> 
> 时间：2012-06-04T09:15:42.240
> 
> 标签：javascript, connection, webservice-client

如标题所示，我有一个页面通过 JavaScript 调用大量 Web 服务以在客户端获取多个信息。

我在每个 web 服务调用中插入了一个 counter++，并在 webservice 响应方法或 webserviceFail 方法中插入了一个计数器。我对其进行了很多测试，一切正常。

我向用户显示一条消息，等待所有信息来自服务器，当计数器为 0 时，他可以提交表单。在测试环境中一切正常，睾丸全部通过。在特定的客户端（没有良好的互联网连接）中，即使他等待很长时间 msg 仍然存在，也意味着某些 web 服务没有响应或没有返回到 webserviceFail 方法。

这可能吗？webservice是否有超时，超时后是否返回webserviceFail方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:13:53.853

我发现如果我可以这么说的话，有一种情况是 Web 服务没有响应。当你调用一个 web 服务时，一定要用 try catch 包围它，当调用 web 服务并且某些参数是 NaN 并且 web 服务期望一个 int 时，它会在客户端被抛出和异常，因为 NaN 不能被序列化。通过这种方式，服务器什么也没有收到，所以我不会在客户端的失败函数中返回。

# java - 将数组传递给 SELECT * FROM table WHERE country IN (?...)

> ID：10878911
> 
> 赞同：2
> 
> 时间：2012-06-04T09:15:42.980
> 
> 标签：java, jdbc

有没有办法为“WHERE country IN (...)”查询传递字符串数组？

像这样的东西：

```
String[] countries = {"France", "Switzerland"};
PreparedStatement pstmt = con.prepareStatement("SELECT * FROM table WHERE country IN (?...)");
pstmt.setStringArray(1, countries);
pstmt.executeQuery(); 
```

一个丑陋的解决方法是根据数组的大小创建查询

```
String[] countries = {"France", "Switzerland"};
if (countries.size() == 0) { return null; }
String query = "SELECT * FROM table WHERE country IN (?";
for (int i = 1; i < countries.size; i++) { query += ", ?"; }
PreparedStatement pstmt = con.prepareStatement(query);
for (int i = 0; i < countries.size; i++) { pstmt.setString(1+i, countries[i]); }
pstmt.executeQuery(); 
```

但这看起来真的很难看。

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T09:17:59.760

不，这是不可能的。像 Hibernate 这样的 ORM 或像 Spring JDBC 这样的包装 API 允许这样做。但是对于普通的 JDBC，你必须自己做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:37:28.850

我认为解决方法是在运行时制定整个查询字符串并使用 Statement 对象而不是 PreparedStatement。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T11:04:01.850

没办法尝试这个。看[这里](http://www.javaranch.com/journal/200510/Journal200510.jsp#a2)到其他方式。但是有一个例外，如果你使用oracle数据库那么你可以试试[这个](http://blogs.itemis.de/kloss/2009/03/05/arrays-preparedstatements-jdbc-and-oracle/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T13:17:26.490

如果您的数据库引擎支持 IN（子查询），您可以创建视图或内存表来执行此操作。

# c++ - 用于 2D/3D 游戏开发的 Qt 库

> ID：10878913
> 
> 赞同：7
> 
> 时间：2012-06-04T09:15:44.893
> 
> 标签：c++, qt

作为一种爱好，我一直致力于改造一个旧的电子游戏，我想尽可能避免重新发明轮子。该游戏大量基于 GUI，但 GUI 需要在外观方面进行自定义，并且还需要为一些游戏屏幕使用 3D OpenGL 渲染。

为了给你一个想法，这里是最初原型的截图：

![在此处输入图像描述](../Images/4416b40613881660927c5e1a52623093.png)

使用了很多动画，也使用了 3D，但 GUI 小部件的行为与标准桌面应用程序中的行为非常相似。

到目前为止，我一直在使用我自己的 GUI 库（它不健壮或不完整，而且我遇到了一些问题）。

鉴于 Qt 的声誉和令人印象深刻的功能，以及 Qt 网站上的一些漂亮屏幕截图，我一直在考虑迁移到 Qt。但我以前从未使用过 Qt，所以我真的不知道它有什么能力，或者学习它需要投入什么样的时间。（注意我用过 FLTK）。

我的问题是：*在这种情况下使用 Qt 是否可能/实用？*

**更新**：在 Qt 中模拟了一些游戏屏幕后，我决定不使用它。虽然它支持我需要的许多开箱即用的功能（特别是通过样式表），但我需要支持自定义的基于位图的预渲染字体（我无法转换/替换它们）。而且我不能继承 QFont，或者重新实现它而不破坏它在未来的 Qt 版本中。也就是说，Qt 给我留下了深刻的印象（无论是在易用性方面，还是在良好的文档方面）。我将为我自己的引擎借用它的一些功能。感谢所有提供意见的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:16:40.483

根据截图很难知道你的游戏需要做什么；但是，我将在这里呼应其他海报的观点，并提供一些途径供您查看。

第一，您可能想要考虑 QtQuick 而不是 GraphicsView 框架，但这真的取决于您需要做什么。我只是想把它扔在那里作为替代品，这样你就不会错过它。本[教程](http://quitcoding.com/download/Qt_Quick_Game_Programming_1_0.pdf)使用 QtQuick 组合了一个非常漂亮的连接四种风格的游戏。这可能比你想要的更简单，但话又说回来，也许不是，这取决于你需要做什么。

其次，在为所有按钮编写自定义绘制事件之前，我会考虑使用[Qt 样式表](http://qt-project.org/doc/qt-5.0/stylesheet.html)并以类似 CSS 的语法设置小部件的样式。这将允许您以非常灵活的方式非常快速地更改 GUI 的外观和感觉。根据你的截图，我*认为*你可以从样式表中得到你想要的东西，这比继承和滚动你自己的设置要快得多。但是再一次，根据一张截图很难知道。[这](http://tech-artists.org/forum/showthread.php?2359-Release-Qt-dark-orange-stylesheet)是一个仅使用 Qt 样式表实现的暗橙色 GUI 示例。样式表的`border-radius`属性将为您提供圆形按钮（ [ref](http://qt-project.org/doc/qt-5.0/stylesheet-reference.html)）。`QPushButton`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T12:03:11.960

上面已经给出了简单的答案，但要提出更多想法：是的，有可能，您可能不需要过多地与 Qt 作斗争。在大多数情况下，对于像这样的高度定制的小部件的推荐建议是子类并自己实现绘制事件。

然后，您可以使用大量基本绘图图元来获取元素的基本形状并从那里扩展。实际上这里有几个问题，其中包含有关如何执行此操作的非常好的资源。

# c# - 是否可以模拟 ftp 服务器？

> ID：10878917
> 
> 赞同：0
> 
> 时间：2012-06-04T09:16:02.740
> 
> 标签：c#, ftp, handler, httphandler, sftp

我们有可以与 ftp 服务器同步数据的设备。

每个设备都应包含自己的一组数据（视频文件）。我们不想为每个设备复制这些数据。

我正在考虑伪造 ftp 文件列表响应并使用类似于 httphandler 的东西将每个文件请求重新路由到另一个位置。这样，我们只需将视频文件托管在一个位置，并且每台设备仍然能够获得自己的“设置”。

对于这种情况，sftp 是“应该有”的。

我尝试按照“ftp 处理程序”搜索任何内容，但没有得出任何有用的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:21:13.830

SUSE 曾经有一个产品（虽然不是用 C# 编写，并且仅适用于 Linux）可以完全满足您的需求，现在已被废弃[Proxy Suite](ftp://ftp.suse.com/pub/projects/proxy-suite/)。我可以确认它有效，但我从未对它的性能感到满意。看看吧，如果你想自己开发这样的装置，它至少会给你一些想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:46:17.653

> 是否可以模拟 ftp 服务器？

不它不是。

> 我正在考虑伪造 ftp 文件列表响应并使用类似于 httphandler 的东西将每个文件请求重新路由到另一个位置。

去做吧。

问题是这不是“伪造”，您的服务器是实现 FTP 协议的 FTP 服务器。“假”在逻辑上是不可能的——要么你实现了协议，那么你就是一个 FTP 服务器，或者你没有，那么你就不是。

> 我尝试按照“ftp 处理程序”搜索任何内容，但没有得出任何有用的结果。

谷歌搜索“rfc ftp”并从那里获取。那是 RFC 959，可能还有十几个其他的。[http://de.wikipedia.org/wiki/File_Transfer_Protocol](http://de.wikipedia.org/wiki/File_Transfer_Protocol)列出了 5 个相关的 RFC - 959、1579、2228、2428 和 2640。

或者，寻找可编程代理可能会奏效——尽管这并不常见，但人们现在似乎更多地使用 HTTP 进行文件传输，或者具有其他功能的系统固有协议。

# pthreads - pthread编译错误

> ID：10878923
> 
> 赞同：1
> 
> 时间：2012-06-04T09:16:40.037
> 
> 标签：pthreads

我正在尝试使用 pthread 创建一个线程。到目前为止，我有这个：

样本.h：

```
void* ReceiveLoop(void*);
pthread_t mythread; 
```

示例.cpp：

```
void* ReceiveLoop(void*) {
  cout<<"whatever";
}

void sample::read() {
  pthread_create(&mythread, NULL, ReceiveLoop, NULL);
} 
```

我认为阅读一些关于此的帖子是可以的。我也试过

```
pthread_create(&mythread, NULL, &ReceiveLoop, NULL); 
```

但我明白了：

```
.cpp:532: error: no matches converting function 'ReceiveLoop' to type 'void* (*)(void*)'
.cpp:234: error:                 void* sample::ReceiveLoop(void*) 
```

任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:41:28.737

我记得旧版本的 gcc/g++ 之间关于此类错误的一些特质。您没有指出您正在使用的编译器。

继续为传递给 ReceiveLoop 的 void* 参数命名：

```
 void ReceiveLoop(void* threadarg);

 void* ReceiveLoop(void* threadarg){ cout<<"whatever"; } 
```

出于某种原因，我似乎记得这是我可以在某个随机编译器上编译一段特定代码的唯一方法，即使传入的参数实际上并没有被使用。

此外，如果 ReceiveLoop 是类的成员函数，则需要将其声明为静态。

```
class sample
{
 public:

    void ReceiveLoopImpl()
    {
        cout<<"whatever";
    }

    static void* ReceiveLoop(void* threadargs)
    {
        return ((sample*)threadargs)->RecieveLoopImpl();
    }

    void read()
    {
         pthread_create(&mythread, NULL, sample::ReceiveLoop, this);
    }

}; 
```

# html - 我可以在在线时使用缓存清单吗？

> ID：10878924
> 
> 赞同：1
> 
> 时间：2012-06-04T09:16:41.583
> 
> 标签：html, cache-manifest

我需要将我的 js 文件存储在浏览器上以减少加载时间。
我知道我可以使用本地存储，但它不是在浏览器上存储文件的正确方式，它是用来存储数据而不是文件的。
我们可以使用缓存清单，但是我可以在在线时访问它吗？
还可以指定是否有更好的方法在浏览器上存储 js/css 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:54:15.880

您的 JavaScript 文件会按照正常的缓存原则和程序自动存储在浏览器缓存中，参见[http://www.mnot.net/cache_docs/](http://www.mnot.net/cache_docs/)

您可以使用[http://www.ircache.net/cgi-bin/cacheability.py](http://www.ircache.net/cgi-bin/cacheability.py)之类的可缓存性测试器来检查资源的可缓存性，包括 .js 文件。

HTML5 草稿中所谓的缓存清单旨在用于很少更改并且可以离线使用的*应用程序。*对于普通页面，它只会让事情变得更加复杂和冒险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:10:17.677

在 HTML5 中有使用清单文件进行缓存的特殊功能.. 请访问以下链接.. [http://html5doctor.com/go-offline-with-application-cache/](http://html5doctor.com/go-offline-with-application-cache/) 这将对您有所帮助..

# etl - 改造配置

> ID：10878928
> 
> 赞同：1
> 
> 时间：2012-06-04T09:16:56.793
> 
> 标签：etl, pentaho, kettle, data-integration

配置我的转换的最合适和最佳实践驱动的方式是什么？

换句话说，假设我有一个基于kettle 的大型ETL 解决方案，它通过连接到不同的数据源来完成工作，我想将这些数据源存储在一个集中的位置，并让每个转换在每次需要连接到某个地方时都查找它。

在 SSIS 中有包配置，我使用 pentaho 的替代方案是什么？

Ps：我不想安装任何 3rd 方框架。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T10:49:56.493

这可以通过多种方式完成。

1.  参数化数据库连接，并通过kettle.properties 配置属性。您仍然可以从共享区域或其他地方访问该kettle.properties。

2.  如上所述，但通过从数据库读取凭据来配置连接。必须手工制作，但可以使用一些警告。

3.  如果您使用存储库，那么无论如何数据库连接都会集中存储。因此，如果您有一个 dev 和一个 prd repo，当您提升时，不要提升 db 连接本身。虽然比听起来更棘手。

至于所有这些，新的 4.4(?) 版本应该有适当的生命周期管理，以使处理所有这些东西变得容易得多！

# ruby-on-rails - 模型保存时得到 ActiveRecord::AssociationTypeMismatch

> ID：10878930
> 
> 赞同：10
> 
> 时间：2012-06-04T09:17:02.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rest, activerecord

我在使用我的 REST API 保存模型时遇到问题。我有一个包含许多任务和一个客户关联的卡片模型：

```
class Card < ActiveRecord::Base
  belongs_to :customer

  has_many :card_tasks
  has_many :tasks, :through => :card_tasks

  accepts_nested_attributes_for :tasks
  accepts_nested_attributes_for :card_tasks
  accepts_nested_attributes_for :customer

end

class CardTask < ActiveRecord::Base
  belongs_to :task
  belongs_to :card

  accepts_nested_attributes_for :task
  accepts_nested_attributes_for :card
end

class Task < ActiveRecord::Base
    has_many :cards, :through => :card_tasks
    has_many :card_tasks
end 
```

当我发送这样的json时：

```
{
    "card" = > {
        "miscellaneous" = > "Obervations diverses", 
        "heater" = > "0", 
        "water_quality" = > "", 
        "customer" = > {
          "id" = > "2", "house_name" = > "house_name2", "city" = > "city_2", "lastname" = > "lastname2", "sci" = > "sci2", "postal_code" = > "potal_code_2", "address_line_1" = > "address_line_2", "updated_at" = > "2012-03-05 18:20:57 +0000", "created_at" = > "2012-03-05 18:20:54 +0000", "firstname" = > "firstname2", "address_line_2" = > "address_line_3", "water_used" = > "0"
         },
         "tasks" = > [
          {
            "title" = > "Nettoyage ligne eau", "id" = > "6", "updated_at" = > "2012-02-17 08:40:47 +0000", "created_at" = > "2012-02-17 08:40:47 +0000"
          }, 
          {
            "title" = > "Surveillance", "id" = > "4", "updated_at" = > "2012-02-17 08:40:47 +0000", "created_at" = > "2012-02-17 08:40:47 +0000"
          }
         ]
    }
} 
```

我的创建动作：

```
 def create
      card = Card.new(params[:card])
      if (card.save)
        respond_with({ :card => card} , :location => nil, status: :created) and return
      end
      respond_with({ :errors => card.errors }, :location => nil, status: :unprocessable_entity)  and return
  end 
```

这样做时，我得到了一个：

```
ActiveRecord::AssociationTypeMismatch (Task(#70249431354580) expected, got ActiveSupport::HashWithIndifferentAccess(#70249421573300)):
  app/controllers/cards_controller.rb:14:in `new'
  app/controllers/cards_controller.rb:14:in `create' 
```

我做错什么了？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-04T09:59:01.377

Rails 预计问题出在 JSON 结构中`tasks_attributes`，而不是`tasks`. 检查[此问题](https://stackoverflow.com/questions/8715682/backbone-and-rails-associations-avoiding-json-hashwithindifferentaccess-errors)以获取详细信息。

# c++ - 查找立体图像中匹配像素的距离

> ID：10878931
> 
> 赞同：2
> 
> 时间：2012-06-04T09:17:02.740
> 
> 标签：c++, opencv

给定两个图像（左和右），我想单击左图像上的一个像素，然后单击右图像上的相应像素。如何计算点击像素到相机的距离？

这不是实时的。完成此操作后，我将添加滤色器而不是单击，但首先我必须实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:41:44.490

没有直接的方法可以做到这一点，因为它在很大程度上取决于立体声设置的几何形状。

从理论上讲，您可以将两个像素都转换为光线，并计算交点。由于舍入误差，光线不太可能相交，因此您需要找到最接近两条光线的点。当您将像素坐标转换为光线方程时，相机几何就会出现。

# neo4j - 在内存中链接或隐藏属性到节点

> ID：10878932
> 
> 赞同：0
> 
> 时间：2012-06-04T09:17:05.390
> 
> 标签：neo4j, in-memory

在 Neo4j 或使用它的相关语言（Cypher、Gremlin 等）中是否可能存在到节点的内存链接或隐藏属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T21:04:55.997

最接近内存中的关系是开始事务、创建关系、执行查询然后回滚事务。但是，这会在您正在创建的关系的开始和结束节点上施加写锁定。

# android - 从 android 使用 Web 服务的最佳方法是什么？

> ID：10878936
> 
> 赞同：-3
> 
> 时间：2012-06-04T09:17:14.773
> 
> 标签：android, eclipse, web-services

谁能告诉我从 android 使用 Web 服务的最佳、简便和灵活的方法是什么？我正在使用日食。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:28:48.817

由于您只关心使用 Web 服务，我假设您已经知道如何从 Web 服务器发送数据。您使用 JSON 或 XML 还是任何其他类型的数据格式？

我自己更喜欢 JSON，尤其是对于 Android。您的问题仍然缺少一些重要信息。

我个人将 apache-mime4j 和 httpmime-4.0.1 库用于 Web 服务。

使用这些库，我使用以下代码

```
public void get(String url) {
    HttpResponse httpResponse = null;
    InputStream _inStream = null;
    HttpClient _client = null;
    try {

        _client = new DefaultHttpClient(_clientConnectionManager, _httpParams);
        HttpGet get = new HttpGet(url);

        httpResponse = _client.execute(get, _httpContext);
        this.setResponseCode(httpResponse.getStatusLine().getStatusCode());

        HttpEntity entity = httpResponse.getEntity();
        if(entity != null) {
            _inStream = entity.getContent();
            this.setStringResponse(IOUtility.convertStreamToString(_inStream));
            _inStream.close();
            Log.i(TAG, getStringResponse());
        }
    } catch(ClientProtocolException e) {
        e.printStackTrace();
    } catch(IOException e) {
        e.printStackTrace();
    } finally {
        try {
            _inStream.close();
        } catch (Exception ignore) {}
    }
} 
```

我通过 _client.execute([method], [extra optional params]) 发出请求，请求的结果被放入 HttpResponse 对象中。

您可以从此对象获取状态代码和包含结果的实体。我从实体中获取内容。在我的情况下，内容将是实际的 JSON 字符串。您将其作为 InputStream 检索，将流转换为字符串并使用它做任何您想做的事情。

例如

```
JSONArray result = new JSONArray(_webService.getStringResponse()); //getStringResponse is a custom getter/setter to retrieve the string converted from an inputstream in my WebService class. 
```

取决于您如何构建 JSON。我的与数组等中的对象嵌套得很深。但处理这个是基本的循环。

```
JSONObject objectInResult = result.getJSONObject(count);//count would be decided by a while or for loop for example. 
```

在这种情况下，您可以从当前 JSON 对象中提取数据，例如：

```
objectInResult.getString("name"); //assume the json object has a key-value pair that has name as a key. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:59:51.480

解析“JSON”我推荐以下库更快更好。

[Jackson Java JSON 处理器](http://jackson.codehaus.org/)

# c# - 如何在 ASP.net 网站项目中从 Windows 窗体应用程序引用类？

> ID：10878942
> 
> 赞同：0
> 
> 时间：2012-06-04T09:17:46.583
> 
> 标签：c#, asp.net, visual-studio

基本上，我需要使用项目 A 中的类和方法，项目 B 是一个 Windows 窗体应用程序，项目 B 是一个 ASP.net 网站项目（在 Visual Studio 2010 中使用 C#）。我不能简单地添加引用，因为这需要将表单应用程序转换为类库。我也不想将我需要的类和方法从项目 A 合并到项目 B 中。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T10:17:52.170

将您的寡妇形成类及其方法放在类库中（制作新项目）。并在您的网络项目中作为参考

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:19:54.563

Basically what you need is a class library where you can put the classes which are used in both web app and windows app. See [here](http://msdn.microsoft.com/en-us/library/f3cye135%28v=vs.80%29.aspx) on how to create a class library. **Remember - the class library should not contain any web or windows specific code**. Please read [this](http://msdn.microsoft.com/en-us/library/ms229042%28v=vs.90%29.aspx) up for the best practices.

# linux - Mono 采用 mscorlib.dll 2.0 而不是 4.0

> ID：10878948
> 
> 赞同：3
> 
> 时间：2012-06-04T09:18:08.550
> 
> 标签：linux, mono, monodevelop, mscorlib, dmcs

我在使用 MONO 应用程序时遇到问题，我正在尝试编译项目（使用 MonoDevelop）以加载运行 mscorlib.dll 4.0 而不是 2.0 版的库。（我需要 4.0 版中的 System.Type.op_Equality 方法，但 2.0 版中没有）。

我通过建立链接暂时解决了：

```
# cd /usr/lib/mono/2.0
# mv mscorlib.dll mscorlib.dll.bak
# ln ../4.0/mscorlib.dll mscorlib.dll 
```

但这当然不是一个有效的解决方案。

有谁知道如何单声道加载 mscorlib 4.0 而不是 2.0？

谢谢和对不起我的英语

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:24:09.233

最后我找到了解决这个问题的方法：

[https://bugs.launchpad.net/ubuntu/+source/gtk-sharp2/+bug/884035/comments/14](https://bugs.launchpad.net/ubuntu/+source/gtk-sharp2/+bug/884035/comments/14)

只需修改“app.config”文件并为此更改内容：

```
<?xml version="1.0"?>
<configuration>
<startup><supportedRuntime version="v4.0"/></startup></configuration> 
```

重新编译项目，现在可以正常工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:31:59.987

右键单击项目 -> 打开构建/常规页面并确保目标框架为`Mono / .NET 4.0`：

![在此处输入图像描述](../Images/ff6c8e050a95ff4c32921fd438fbb80c.png)

# php - MySQL 在执行插入查询时存储错误的值

> ID：10878951
> 
> 赞同：3
> 
> 时间：2012-06-04T09:18:22.770
> 
> 标签：php, phpmyadmin

每当我在插入查询下方将数据插入 mysql 数据库时，查询就会成功运行，但是当我检查数据库中的数据时，它会显示一些其他值，而不是我通过查询插入的原始值。我使用 PHP 和 MySQL 来执行插入查询。如果有人有任何解决方案，请帮我解决这个问题。

我的代码是：

```
<?php

$conn = mysql_connect('localhost','root','asterisk') or die("Cannot Connect with Databse") ; //connect with database
mysql_selectdb('adore3', $conn) or die("Cannot Select the Database  ") ;//select database

$query_insert="INSERT INTO cc_transfer VALUES ('', '528', '258', '1', '2012-5-5 4:4:4','5555555558888888','99999994444444',0);"; 
$r = mysql_query($query_insert);
if($r)
{
echo "Inserted";

}
?> 
```

但是当我检查数据时，我没有找到值`5555555558888888`，并且`99999994444444`两个字段中都有一些垃圾值`2147483647`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T12:17:04.573

您尝试存储的值大于我假设您为 db.xml 中的字段设置的整数数据类型。2147483647 是可以存储的最大整数值。更改字段的数据类型（长值）。

# javascript - 表达式引擎中的 Jquery 图片库问题

> ID：10878954
> 
> 赞同：0
> 
> 时间：2012-06-04T09:18:31.443
> 
> 标签：javascript, jquery, html, css, expressionengine

我集成到表达式引擎 (EE) 中的 javascript 插件有一点问题。我不确定它是 CSS/HTML 问题还是在 EE 中被覆盖的东西。我使用插件 jqzoom，我已经设法在我的静态站点上很好地集成但是在我的 EE 站点上[单击此处](http://www.iamnatesmithen.com/ExpressionEngine2/index.php/inventory/view/VPREP-BRAVO-COMPATIBLE-ROBOTIC-TIPS)，次要图像未显示（无）并且与主要图像重叠。这个插件的初始设置意味着不能像下面那样工作[点击这里](http://iamnatesmithen.com/fluotics/productsFinal.html)- 你点击缩略图图像更改等等......有人知道是什么导致了这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:46:28.623

在您的[第一个链接](http://www.iamnatesmithen.com/ExpressionEngine2/index.php/inventory/view/VPREP-BRAVO-COMPATIBLE-ROBOTIC-TIPS)中，我看到两个图像已经在一个带有 clearfix 类的 div 中。但在第二个中只有一个。我认为您以某种方式弄乱了第一个中的图像。尝试查看您在[第一个链接中提到的网站中输入图像源的代码](http://www.iamnatesmithen.com/ExpressionEngine2/index.php/inventory/view/VPREP-BRAVO-COMPATIBLE-ROBOTIC-TIPS)

# algorithm - 分区编号。N进M个分区

> ID：10878958
> 
> 赞同：0
> 
> 时间：2012-06-04T09:18:43.090
> 
> 标签：algorithm, math, permutation, partitioning

我正在尝试一个我必须分区的问题。尽可能多的将 N 分成 M 个分区。

例子：

N=1 M=3 , 将 1 分成 3 部分

0 0 1
0 1 0
1 0 0

N=3 M=2 ，将 3 分成 2 部分

2 1
1 2
3 0
0 3

N=4 M=4 ，将 4 分成 4 部分

0 0 0 4
0 0 4 0
0 4 0 0
4 0 0 0
0 0 1 3
0 1 0 3
0 1 3 0
。
.
.

等等。

我确实编写了一个回溯算法。它逐步产生所有可能的组合物，但它会因一些更大的输入而窒息。因为许多组合物是相同的，只是部件的顺序不同。我想减少它。任何人都可以帮助提供更有效的方法。

我的方法：

```
void backt(int* part,int pos,int n) //break N into M parts
{
    if(pos==M-1)
    {
        part[pos]=n;
        ppart(part);   //print part array
        return;
    }

    if(n==0)
    {
        part[pos]=0;
        backt(part,pos+1,0);
        return;
    }

    for(int i=0;i<=n;i++)
    {
        part[pos]=i;

        backt(part,pos+1,n-i);
    }
} 
```

在我的算法中。n 是 N，它为 N 的每个可能的分区填充数组 part[]。

我想知道的是，一旦生成了一个组合，我想计算该组合将以不同的顺序出现多少次。例如：对于 N=1 ，M=3 ::: 组合只有一个：<0,0,1 > ，但它出现了 3 次。这就是我想知道的每一种可能的独特组合。

再举一个例子：N=4 M=4

组合 <0 0 0 4> 被重复 4 次。同样，对于每一个独特的组合，我都想知道它会出现多少次。

看起来我也通过在这里解释得到它。思考。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:19:10.323

您可以将 int 转换为分区，如下所示：

```
vector<int> part(int i, int n, int m)
{
    int r = n; // r is num items remaining to be allocated

    vector<int> result(m, 0); // m entries inited to 0

    for (int j = 0; j < m-1; j++)
    {
        if (r == 0) // if none left stop
            break;

        int k = i % r; // mod out next bucket
        i /= r; // divide out bucket
        result[j] = k; // assign bucket
        r -= k; // remove assigned items from remaining
    }

    result[m-1] = r; // put remainder in last bucket

    return result;
} 
```

因此，您可以按如下方式使用它：

```
for (int i = 0; true; i++)
{
    vector<int> p = part(i, 3, 4);

    if (i != 0 && p.back() == 3) // last part
       break;

    ... // use p

}; 
```

从这里也应该清楚如何制作零件的增量版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T10:53:49.230

一种更简单的数学方法：

这个问题等价于在表达式 f(x) = (1+x+x^2+x^3+....+x^N)^M 中求 x^N 的系数

f(x) = ((x^(N-1) - 1)/(x-1))^M 将其微分 M 次(d^Nf(x)/dx^N) 并且系数将为 ( 1/n!)*(d^Nf(x)/dx^N) 在 x = 0；

可以使用任何数值微分技术进行微分。所以算法的复杂度是 O(N*complexity_of_differentiation)..

# jsf - PrimeFaces CommandButton：动态启用/禁用图标

> ID：10878966
> 
> 赞同：7
> 
> 时间：2012-06-04T09:19:18.167
> 
> 标签：jsf, primefaces

PrimeFaces 的 CommandButton 允许指定一个图标：

```
<p:commandButton value="Press me" icon="redBall" ... /> 
```

但是，我需要根据 JSF 托管 bean 属性启用/禁用图标。

我试过

```
<p:commandButton value="Press me" icon="#{bean.iconClass}" ... /> 
```

这适用于选择不同的图标，但不允许完全禁用图标（即获得相同的渲染，就像没有`icon=`属性一样）。我可以在 中返回一个空字符串`getIconClass()`，但 PrimeFaces 仍会`<span>`为按钮内的图标呈现额外的内容，并且 CSS 样式会导致此跨度使用默认图标可见。

有没有办法告诉 PrimeFaces“我根本不需要图标”（除了`icon=`完全去掉属性）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T13:19:49.470

我可以在不复制按钮的情况下想到 2 种方法。

1.  `<f:attribute>`提供由 有条件地添加的图标`<c:if>`。

    ```
    <p:commandButton ...>
        <c:if test="#{not empty bean.icon}"><f:attribute name="icon" value="#{bean.icon}" /></c:if>
    </p:commandButton> 
    ```

    * * *

2.  设置一个完全隐藏图标并有条件地提供它的样式类。

    ```
    .hideicon .ui-icon { display: none; }
    .hideicon .ui-button-text { padding-left: 1em; } 
    ```

    和

    ```
    <p:commandButton ... icon="#{bean.icon}" styleClass="#{empty bean.icon ? 'hideicon' : ''}" /> 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T09:46:19.017

一个蹩脚的解决方法是有 2 个命令按钮。一个有图标定义，一个没有。然后渲染正确的。

# shell - 如何编写 shell 脚本来显示以下输出？

> ID：10878970
> 
> 赞同：0
> 
> 时间：2012-06-04T09:19:53.453
> 
> 标签：shell

newtext.csv 如下所示：

```
Record 1
---------
line 1 line 2 Sample Number: 123456789 (line no. 3) | | | | | Time In: 2012-05-29T10:21:06Z (line no. 21) | | | Time Out: 2012-05-29T13:07:46Z (line no. 30) 

Record 2
----------
line 1 line 2 Sample Number: 363214563 (line no. 3) | | | | | Time In: 2012-05-29T10:21:06Z (line no. 21) | | | Time Out: 2012-05-29T13:07:46Z (line no. 30) 

Record 3
---------
line 1 line 2 Sample Number: 987654321 (line no. 3) | | | | | Time In: 2012-05-29T10:21:06Z (line no. 21) | | | Time Out: 2012-05-29T13:07:46Z (line no. 30) 
```

假设 newtext.csv 中有这样 100 条记录所以，现在我需要输入的 i/p 字符串的参数，如下所示

```
Input
Enter the search String :
123456789

Output

Sample Number is, Sample Number: 123456789 
Connected Time is,Time In: 2012-05-29T10:21:06Z 
Disconnected Time is, Time Out: 2012-05-29T13:07:46Z 
```

这正是我需要的。您能帮我编写上述格式的 shell 脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:06:11.213

好的，输入和期望的输出有点奇怪，但仍然不难得到你想要的，试试下面的：

```
var=123456789
awk -v "var=$var" --exec /dev/stdin newtext.csv <<'EOF'
  ($7 == var) {
    printf("Sample Number is, Sample Number: %s\n", $7);
    printf("Connected Time is, Time In: %s\n", $18);
    printf("Disconnected Time is, Time Out: %s\n", $27);
  }
EOF 
```

# git - 为什么“git svn fetch”命令似乎卡住了，什么也不做？

> ID：10878976
> 
> 赞同：36
> 
> 时间：2012-06-04T09:20:12.210
> 
> 标签：git, git-svn

**编辑：解决方法。** 现在我们明白了这个问题，这里是解决方案：做

```
git svn fetch -r REVISION:HEAD 
```

其中 REVISION 是分支创建的 svn 提交的编号。

* * *

一段时间以来，我一直很高兴使用 git svn 来处理我的项目的主干，但现在我还需要跟踪分支。

我试图初始化一个新的存储库来做到这一点

```
git init
git svn init https://svnserver/svn/repository 
```

然后我编辑本地配置文件以反映我的 svn 存储库的结构：

```
[svn-remote "svn"]
    url = https://svnserver/svn/repository
    fetch = path/to/trunk:refs/remotes/trunk
    branches = path/to/branches/*:refs/remotes/branches/* 
```

然后我跑

```
git svn fetch 
```

而这个命令什么也不做：

*   它不会终止
*   它不会在控制台输出中写入任何内容
*   它不使用任何 CPU，也不创建文件

10分钟后我放弃了

我检查了 svn 存储库是否正常工作，因为`git svn fetch`在我只跟踪主干的 git 存储库上完美运行。

这是一个错误还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-04T12:32:11.033

在获取第一个相关提交后，它变得冗长。

`.git\svn\.metadata`但在它获取该提交之前，您可以通过检查文件来确保命令正常工作。这些线路将在运行时不断更新`branches-maxRev = 123`和`tags-maxRev = 123`增加它们的数量。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-04-01T23:18:01.863

尝试添加`--log-window-size=5000`参数。

如果 repo 有大量提交，git-svn`100`默认会一次通过它们。提高它可以极大地提高它的速度。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-02-27T17:00:20.293

如果使用 Windows 版 Git，请确保从 2.20.1 升级到上一个 (2.20.0)、下一个 (2.21.0) 或任何其他版本。提到的版本有一个[错误使“git svn fetch”挂起](https://github.com/git-for-windows/git/issues/1993)，后来被修复。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-11T09:37:50.550

对于那些对上述解决方案不满意的人：

**问题：** svn+ssh://svn.xxxxxxx.com/svnroot/strategy/products/mysoftware 挂起：

> 在 [MyLocalRepositoryPath] 中初始化空的 Git 存储库

**解决方案：**插入

> 用户名@

在svn url前面

> svn+ssh://username@svn.xxxxxxx.com/svnroot/strategy/products/mysoftware

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-22T15:11:27.967

我已将 fetch 属性更改为 :refs/remotes/git-svn 它对我有用

# c# - 当用户在文本框中按下回车键时如何不关闭表单

> ID：10878977
> 
> 赞同：4
> 
> 时间：2012-06-04T09:20:12.943
> 
> 标签：c#, winforms, textbox, devexpress

在 WinForms 表单中有一个[`TextBox`](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.textbox)控件（准确地说是[DevExpress`TextEdit`](https://docs.devexpress.com/WindowsForms/DevExpress.XtraEditors.TextEdit)），如果焦点在文本框内，我*不*希望在用户按下回车键时关闭表单。

我想

```
filterTextBox.KeyDown += 
    (sender, e) => 
        e.Handled = e.KeyCode == Keys.Return || e.KeyCode == Keys.Enter; 
```

就足够了，但它似乎被忽略并且表单仍然关闭。

**我的问题是：**

如何故意忽略单行文本框控件内的输入以使表单保持打开状态？

**解决方案**

[Botz3000 的解决方案](https://stackoverflow.com/a/10879046/107625)对我有用：

```
filterTextBox.PreviewKeyDown += 
    (sender, e) => 
        e.IsInputKey = e.KeyCode == Keys.Return || e.KeyCode == Keys.Enter;
filterTextBox.KeyDown += 
    (sender, e) => 
        e.Handled = e.KeyCode == Keys.Return || e.KeyCode == Keys.Enter; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T09:25:24.643

***更新***：也尝试处理该[`PreviewKeyDown`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.previewkeydown.aspx)事件。MSDN 文档在备注部分很好地解释了它。通过设置[`IsInputKey`](http://msdn.microsoft.com/en-us/library/system.windows.forms.previewkeydowneventargs.isinputkey.aspx)为 true，您可以覆盖默认行为，以便您的 TextBox 可以处理密钥。您需要在 中执行此操作`PreviewKeyDown`，然后像在 中那样处理密钥`KeyDown`。

编辑：不工作：以前建议的[`EnterMoveNextControl`](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsBaseEdit_EnterMoveNextControltopic)财产

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-07T08:10:23.290

根据你们的解决方案，定期`RichTextBox`处理`PreviewKeyDown`就足够了。

```
private void rtbNote_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
{
    e.IsInputKey = e.KeyCode == Keys.Return || e.KeyCode == Keys.Enter;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T09:26:13.147

如果不亲自尝试，我想我只需在`KeyDown`文本框中设置一个布尔值，然后在表单关闭中，检查该布尔值并取消表单关闭（如果已设置）（然后重置布尔值）。

# entity-framework - 在 EntityFramework CodeFirst 模型中链接两个表

> ID：10878979
> 
> 赞同：2
> 
> 时间：2012-06-04T09:20:34.257
> 
> 标签：entity-framework, code-first, entity-relationship

我正在尝试通过转换我拥有的 Web 表单应用程序来学习 asp.net MVC。这是一个房间预订应用程序，其中有一个与 tblRental 具有一对多关系的客户表 (tblCustomerBooking) - 因此一个客户可以预订多个房间。相互匹配的字段是 tblCustomerBooking.customer_id -> tblRental.customer_ref

我正在尝试首先使用代码 - 并构建一个模型类 - 但我无法弄清楚如何链接这两个表，因此当我查询 dbContext 时，它将返回一个客户，其中包含一个或多个租金相同的型号。

我的表定义是：

```
CREATE TABLE [dbo].[tblCustomerBooking](
    [customer_id] [bigint] IDENTITY(1,1) NOT NULL,
    [room_id] [bigint] NULL,
    [customer_name] [varchar](110) NULL,
    [customer_email] [varchar](50) NULL
     CONSTRAINT [PK_tblCustomerBooking] PRIMARY KEY CLUSTERED 
(
    [customer_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, 
ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

CREATE TABLE [dbo].[tblRental](
    [rental_id] [bigint] IDENTITY(1,1) NOT NULL,
    [room_id] [bigint] NOT NULL,
    [check_in] [datetime] NOT NULL,
    [check_out] [datetime] NOT NULL,
    [customer_ref] [bigint] NULL,
    [room_cost] [decimal](18, 2) NULL
 CONSTRAINT [PK_tblRental_1] PRIMARY KEY CLUSTERED 
([rental_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,
ALLOW_ROW_LOCKS      =     ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] 
```

**我为此构建模型的尝试是：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;
using System.Data.Entity.ModelConfiguration.Conventions; 
using System.Data.Entity;

namespace MvcApplication23.Models
{
    public class tblRental 
        {
        [Key()]
        public int rental_id { get; set; }
        public int room_id { get; set; } 
            public DateTime check_in { get; set; } 
            public DateTime check_out { get; set; }
            public long customer_ref { get; set; } 
            [ForeignKey("customer_ref")] 
            public tblCustomerBooking Customer {get;set;} 
            public decimal room_cost { get; set; } 
        } 

    public class tblCustomerBooking 
    {
        [Key()]
        public long customer_id { get; set; } 
        public string customer_name { get; set; } 
        public string customer_email { get; set; } 
        public ICollection<tblRental> Rentals {get;set;} 
    }

    public class RentalContext : DbContext
    {
        public DbSet<tblCustomerBooking> customers { get; set; }
        public DbSet<tblRental> rentals { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        } 
    }
} 
```

控制器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net.Http;
using System.Web.Http;
using MvcApplication23.Models;

namespace MvcApplication23.api.Controllers
{
    public class RentalController : ApiController
    {
        private RentalContext db = new RentalContext();

        // GET /api/rental/5
        public IQueryable<tblCustomerBooking> Get(int id)
        {
            return db.customers.Include("rentals").FirstOrDefault(c=>c.customer_id==id);
        } 
```

** 我已经用数据库中已经存在的实际表名更新了上面的信息 **

如何链接模型中的两个表？然后给定一个 customer_id，我将如何查询 DbContext 以返回一个客户，以及 tblRental 表中的任何相关条目？

非常感谢您的任何指点，

标记

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T09:29:23.100

要链接两个实体，请提供导航属性：

```
public class Rental
{
    [Key]
    public int rental_id { get; set; }
    public int room_id { get; set; }
    public DateTime check_in { get; set; }
    public DateTime check_out { get; set; }
    public int customer_ref { get; set; }

    [ForeignKey("customer_ref")]
    public virtual Customer Customer {get;set;}

    public decimal room_cost { get; set; }
 }

public class Customer
{
    [Key]
    public int customer_id { get; set; }
    public string customer_name { get; set; }
    public string customer_email { get; set; }

    public virtual ICollection<Rental> Rentals {get;set;}
} 
```

并查询您的客户：

```
return this.DataContext.customers.Include("Rentals").FirstOrDefaul(c=>c.customer_id==customerId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T08:23:41.893

```
using System.ComponentModel.DataAnnotations.Schema;

public class Rental
{
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public virtual int id { get; set; }
    public virtual int room_id { get; set; }
    public virtual DateTime check_in { get; set; }
    public virtual DateTime check_out { get; set; }
    public virtual int customer_id { get; set; }
    public virtual decimal room_cost { get; set; }

    #region Navigation Properties
    [ForeignKey("customer_id")]
    public virtual Customer Customer {  get;  set;  }
    #endregion
}

public class Customer
{
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int id { get; set; }
    public string name { get; set; }
    public string email { get; set; }

    public virtual ICollection<Rental> Rentals {get;set;}
} 
```

# android - 如何从 1000 个对象中一次获取 20 个对象并在列表视图中显示

> ID：10878981
> 
> 赞同：0
> 
> 时间：2012-06-04T09:20:44.503
> 
> 标签：android, android-widget

在我的应用程序中，我从 Web 服务以 XML 格式获取数据，并对其进行解析并在列表视图中显示数据。问题是如果 Web 服务包含 5000 个对象，那么显示数据需要很长时间。

是否可以在列表视图中显示一些数据并在列表末尾同时获取数据。

请给我一些示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:33:34.860

通过使用 AsyncTask，您可以轻松地做到这一点，因为每个正在获取的对象都可以使用 publishProgress() 方法显示在列表视图中，同时还可以向用户更新已加载数据的百分比。

更新：

顺便说一下，根据您的情况，以下由 commonsware [https://stackoverflow.com/users/115145/commonsware](https://stackoverflow.com/users/115145/commonsware)开发的工具最适合您...

[https://github.com/commonsguy/cwac-endless](https://github.com/commonsguy/cwac-endless)

cwac-endless：提供 EndlessAdapter，它是现有 ListAdapter 的包装器，可添加“无限列表”功能。当用户滚动到列表底部时，如果要检索此列表的更多数据，您的代码将在后台线程中调用以获取新行，然后无缝附加到列表底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:34:50.997

如果您在 ListAdapter 的 getView 方法中使用 convertView ，那么列表中有多少项目并不重要，因为视图正在被重用。

如果您的 Listadapter 采用 som 排序数组，您可以将项目连续添加到数组中并调用

```
mListAdapter.notifyDataSetChanged(); 
```

每次将新数据添加到列表中时。

# java - tomcat中有100个线程TIMED_WAITING，导致它在线程总数超过200时停止

> ID：10878983
> 
> 赞同：16
> 
> 时间：2012-06-04T09:20:51.880
> 
> 标签：java, multithreading, tomcat, threadpool, thread-dump

最近我们的一个生产 tomcat 服务器变得无响应，因为 tomcat 的繁忙线程飙升至 200。当我们在重新启动之前进行线程转储时，我们有 100 个处于 TIMED_WAITING 状态的线程，例如这 3 个线程：

```
""http-bio-7007"-exec-241" daemon prio=10 tid=0x00002aaab107b000 nid=0x59df waiting on condition [0x0000000051239000]
java.lang.Thread.State: TIMED_WAITING (parking)
   at sun.misc.Unsafe.park(Native Method)
   - parking to wait for  <0x0000000580d877d0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
   at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)
   at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2025)
   at java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:424)
   at org.apache.tomcat.util.threads.TaskQueue.poll(TaskQueue.java:86)
   at org.apache.tomcat.util.threads.TaskQueue.poll(TaskQueue.java:32)
   at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:945)
   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
   at java.lang.Thread.run(Thread.java:662)

""http-bio-7007"-exec-237" daemon prio=10 tid=0x00002aaab186e000 nid=0x596d waiting on condition [0x000000004d1f9000]
java.lang.Thread.State: TIMED_WAITING (parking)
   at sun.misc.Unsafe.park(Native Method)
   - parking to wait for  <0x0000000580d877d0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
   at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)
   at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2025)
   at java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:424)
   at org.apache.tomcat.util.threads.TaskQueue.poll(TaskQueue.java:86)
   at org.apache.tomcat.util.threads.TaskQueue.poll(TaskQueue.java:32)
   at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:945)
   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
   at java.lang.Thread.run(Thread.java:662)

""http-bio-7007"-exec-236" daemon prio=10 tid=0x00002aaab1118000 nid=0x596c waiting on condition [0x000000004e50c000]
java.lang.Thread.State: TIMED_WAITING (parking)
   at sun.misc.Unsafe.park(Native Method)
   - parking to wait for  <0x0000000580d877d0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
   at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)
   at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2025)
   at java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:424)
   at org.apache.tomcat.util.threads.TaskQueue.poll(TaskQueue.java:86)
   at org.apache.tomcat.util.threads.TaskQueue.poll(TaskQueue.java:32)
   at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:945)
   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
   at java.lang.Thread.run(Thread.java:662) 
```

我们有 4 个应用程序的线程池（例如 pool-4-thread-20 等）也有 20 个线程，所以我不确定这 100 个线程在哪个阻塞队列上等待？我们正在使用带有休眠功能的 c3P0 连接池，这似乎不是造成这种情况的原因。

知道 java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject 是什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T05:53:22.043

当我们修复泄漏由 c3p0 管理的数据库连接的代码时，这个问题得到了修复。在我们的代码中，我们没有在 finally 块中关闭实体管理器之前专门在 catch 块中调用 rollback() 的流程很少，所以在出现异常的情况下，连接不会回到池中并且如果异常频率很高（超过大小在超时间隔内池）然后所有其他进程线程将堆积以获得连接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T06:54:58.280

> 知道 java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject 是什么吗？

ConditionObject 用于队列内部，用于同步不同线程对队列的访问。

它是标准的堆栈跟踪，当您的执行器池的线程空闲并等待新任务时。

# php - php undefine 变量问题

> ID：10878986
> 
> 赞同：0
> 
> 时间：2012-06-04T09:20:59.750
> 
> 标签：php, mysql

我有一个 html 表单，它将数据插入 mysql 数据库，然后使用以下 php 代码获取这些数据（来自**供应商_jv**表）

```
<?php
include("include/address2.php");
include("include/menu.php");
$uname_ad = $_SESSION['uname_ad'];  
$id = $_GET['id'];
$sql = mysql_query("SELECT * FROM supplier_jv WHERE jv_id = '$id'");        
$num = mysql_num_rows($sql);

if($num == 0)
{
    echo "<p><font color=red>Accounts is emtpy</font></p>";
}
else
{
    $re_name = mysql_fetch_array($sql);
    echo "<center><h2>";
    echo "<strong>Accounts of </strong>";
    echo $re_name['jv_name'];
    echo "</h2></center>";

    echo "<center>";
    echo "<table>";
    echo "<table border='0' cellpadding='5' cellspacing='5' width='1000'>";
    echo "<tr/>";                   
    echo "<td><strong>Date</strong></td>";
    echo "<td><strong>Particular</strong></td>";
    echo "<td><strong>Folio(C)</strong></td>";
    echo "<td><strong>Folio(J)</strong></td>";
    echo "<td><strong>Debit</strong></td>";
    echo "<td><strong>Credit</strong></td>";
    echo "<td><strong>Balance</strong></td>";                   
    echo "</tr>";
    while($re= mysql_fetch_array($sql))
    {
        $day = $re['day'];
        $month $re['month'];
        $year = $re['year'];                    
        $parti = $re['particulars'];                    
        $folio = $re['folio'];
        $folio2 = $re['folio2'];
        $debit = $re['debit'];
        $credit = $re['credit'];
        $balance = $re['balance'];
        $b = $debit - $credit;

        $total_debit = mysql_query("SELECT SUM(debit) FROM supplier_jv");
        $re_t = mysql_fetch_array($total_debit);
        $t_d =  $re_t['SUM(debit)'];                

        $total_credit = mysql_query("SELECT SUM(credit) FROM supplier_jv");
        $re_t2 = mysql_fetch_array($total_credit);
        $t_c =  $re_t2['SUM(credit)'];                  

        $b = $t_d - $t_c;               
        echo "<tr>";        
        echo "<td>$day/$month/$year</td>";
        echo "<td>$parti</td>";
        echo "<td>$folio</td>";
        echo "<td>$folio2</td>";
        echo "<td>";
        echo number_format($debit);
        echo "</td>";                       
        echo "<td>";
        echo number_format($credit);
        echo "</td>";                       
        echo "<td></td>";                       
        echo "</tr>";
    }
    echo "<tr bgcolor='#f3f3f3'>";      
    echo "<td></td>";
    echo "<td></td>";
    echo "<td></td>";
    echo "<td></td>";
    echo "<td></td>";                       
    echo "<td><strong>Total Balance-</strong></td>;       
    echo "<td><strong>";                    
    echo number_format($b);
    echo "</strong></td>";                      
    echo "</tr>";
    echo "</table>";
    echo "</center>";                       
}           
?> 
```

好吧，插入数据后，它会显示：

```
Notice: Undefined variable: b in E:\xampp\htdocs\Accounts\admin\content
\supplier_account.php on line 108 
```

但是如果我第二次插入数据就可以了！！
任何想法或解决方案。
谢谢
shibir。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:24:29.450

您需要使用`isset`它来查看它是否已设置，而不是 null 并避免`Notice: Undefined variable`错误：

```
if (isset($b)) 
{
  // your code here
} 
```

你在哪里：

```
$b = $t_d - $t_c; 
```

确保有一些价值出现`$t_d`并且`$t_c`

# java - 我应该总是从数据库中检索完整的对象吗？

> ID：10878994
> 
> 赞同：1
> 
> 时间：2012-06-04T09:21:23.690
> 
> 标签：java, oop, database-design, architecture, orm

这是一个非常简单的问题，适用于使用 java 编程 Web 界面。说，我没有使用 ORM（即使我正在使用），假设我的应用程序中有这个 Car (id,name, color, type, blah, blah) 实体，我有一个 CAR 表在数据库中表示该实体。所以，假设我只需要更新一堆汽车上的一部分字段，我知道典型的流程是：

1.  DAO 类 (CarDAO) - getCarsForUpdate()
2.  遍历所有 Car 对象，仅更新颜色以显示绿色或其他内容。
3.  另一个对 updateCars(Cars cars) 的 DAO 调用。

现在，对于一个简单的选择和更新查询来说，这不是在拐弯抹角吗？在上面的第一步中，我将从数据库中检索整个对象数据：“ **select id,name,color,type,blah,blah.. where ..from CAR** ”而不是“ **select id,color from CAR where 。 ……** ”。那么为什么我在发布 DAO 调用时要检索那些额外的字段，我永远不会使用“颜色”以外的任何东西？这同样适用于最后一步 3。或者，假设我只查询 id 和颜色（选择 id、color）并创建一个仅填充 id 和颜色的汽车对象 - 这完全可以，不是吗？Car 对象还是贫血？

这一切（面向对象）看起来是不是有点假？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T09:28:28.200

一方面，如果 RDBMS 可以处理您的查询，我希望它可以处理。原因是您不希望 JVM 完成所有工作，尤其是在运行企业应用程序时（并且您有许多需要相同资源的并发连接）。

如果您特别想更新数据库中的对象（例如将汽车颜色设置为绿色），我建议使用类似 SQL

```
UPDATE CAR SET COLOR = 'GREEN'; 
```

*（注意我没有使用**WHERE**子句）*。这会更新**所有** `CAR`表，我不需要提取所有`Car`对象、调用`setColor("Green")`并进行更新。

事后看来，我想说的是应用工程知识。您的 DAO 应该简单地进行快速选择、更新等，并让所有 SQL“工作”由 RDBMS 处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T09:30:26.017

根据我的经验，我可以说的是：只要您不进行连接操作，即仅从同一个表中查询列，您获取的列数几乎不会对性能产生任何影响。真正影响性能的是获得的行数和 where 子句。获取 2 或 20 列的变化非常小，您不会看到任何差异。更新也是一样

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T20:49:47.053

我认为在某些情况下，请求对象字段的子集很有用*。*如果您有大量的列，或者如果有一些大的`BLOB`列在水合时会影响性能，这可能会带来性能上的提升。尽管数据库通常会在匹配时读取整行信息，但通常会将`BLOB`其他大型字段存储在不同的位置，并具有非平凡的 IO 需求。

如果您正在遍历一个大表并进行某种处理，这也可能是有意义的。尽管在单行上节省的成本可能微不足道，但在一张大表中可能是可以衡量的。

此外，如果您只使用索引中的字段，我相信该行本身永远不会被读取，它将使用索引本身的字段。但是，不确定在您的示例中是否`color`会被索引。

综上所述，如果您只是在没有其他大型数据库字段的情况下仅保留相对简单的对象，`BLOB`那么这可能会变成过早的优化，因为查询处理、行 IO、JDBC 开销和对象创建很可能会花费更多时间与水合行中字段的子集相比。将数据库对象转换为最终的 Java 类通常只是每个查询负载的一小部分。