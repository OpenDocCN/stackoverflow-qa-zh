# StackOverflow 问答 11276000-11276999

# c++ - 如何在 string::find 中使用通配符？

> ID：11276000
> 
> 赞同：1
> 
> 时间：2012-06-30T17:10:07.347
> 
> 标签：c++, wildcard

我希望能够在其中使用通配符`string::find`，然后获取该通配符位置中的内容。

例如：

```
if (string::npos !=input.find("How is * doing?")
{
     cout<<"(the wildcard) is doing fine."<<endl;
} 
```

因此，如果我问“妈妈过得怎么样？”，输出将是“妈妈过得很好”。

我将为此使用哪些库，或者我将如何手动编写代码？如果我应该使用 AIML，AIML 可以执行 .bat 文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T17:22:51.317

C++ 2011 提供了一个[正则表达式库](http://en.wikipedia.org/wiki/C%2B%2B11#Regular_expressions)。如果您还不能使用 C++ 2011，您可以使用[Boost.Regex](http://www.boost.org/doc/libs/1_50_0/libs/regex/doc/html/index.html)库或任何 C 库，如[PCRE](http://www.pcre.org/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T17:30:12.333

关于您关于如何手动操作的问题，我将用这个简单的代码给您一个想法，它解决了您在问题中给出的示例。

```
#include<iostream>
#include<string>
using namespace std;
int main()
{
    string expr="How is * doing?";
    string input="How is Mom doing?";
    int wildcard_pos=expr.find("*");
    if(wildcard_pos!=string::npos)
    {
        int foo=input.find(expr.substr(0,wildcard_pos)),bar=input.find(expr.substr(wildcard_pos+1));
        if(foo!=string::npos && bar!=string::npos)
        cout<<input.substr(wildcard_pos,bar-wildcard_pos)<<" is doing fine\n";
    }
} 
```

您可以轻松修改此想法以满足您的需求。否则，请按照给出的答案`src`

# c++ - 在 Windows 上环回接口上的 tcp/ip 延迟方面可以预期什么？

> ID：11276002
> 
> 赞同：3
> 
> 时间：2012-06-30T17:10:28.873
> 
> 标签：c++, windows, network-programming, boost-asio, loopback

我正在通过环回接口测量 Windows 上 TCP/IP 连接的延迟，并且从发送消息到收到响应的时间大约为 4 毫秒。

对于 RPC 目的，在 TCP/IP 之上有一个[TCF层。](http://wiki.eclipse.org/DSDP/TM/TCF_FAQ "TCF")除了 TCF 帧之外，发送和接收的消息仅包含一个字符作为有效负载。

处理命令的“服务器”是在 C++ 中使用 boost asio 实现的。“客户端”发送命令是一个使用 Python TCF 参考实现的 Python 脚本。

我尝试将套接字选项设置为 TCP_NODELAY 以禁用 Nagle 算法，并尝试了套接字的各种缓冲区大小，但往返时间保持在 4 毫秒左右。我原以为它会低很多。

C++ 端的分析表明它花费了大约 50% 的执行时间等待命令，因此下一步将尝试用 C++ 实现替换 python 脚本，但很高兴知道人们可以期待什么环回接口上的往返时间。

这个 SO，问题：
[启用 TCP_NODELAY 的 Linux Loopback performance](https://stackoverflow.com/questions/5832308/linux-loopback-performance-with-tcp-nodelay-enabled) 是相关的，但并没有完全回答我的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T13:51:05.073

您可以使用 建立延迟的下限`ping localhost`。它报告的数字是发送一个数据包，接收一个数据包。

如果您的 TCP 消息是在现有连接上发送的，那么您可能会得到几乎那个延迟。

如果您测量的时间包括 TCP 连接设置，您可能会得到 10 倍的延迟。

# android - 打开活动后无缝显示对话框

> ID：11276010
> 
> 赞同：0
> 
> 时间：2012-06-30T17:11:18.230
> 
> 标签：android, android-activity, dialog, themes

我想在我的应用程序打开时显示一个对话框（一种启动屏幕）。因此，我在 onCreate() 中放置了一个创建和显示对话框。对话框确实打开了，但首先显示的是空活动（白色背景）。

必须有可能防止显示那个空屏幕吗？许多应用程序都有这样的行为。我希望将对话框作为实际的第一个屏幕显示给用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:17:32.043

如果我们有代码可以根据一般解决方案查看需要时间的任务会更好

[安卓闪屏](https://stackoverflow.com/questions/1979524/android-splashscreen)

[在 Android 上加载数据时显示旋转轮对话框](https://stackoverflow.com/questions/6159702/android-show-spinning-wheel-dialog-while-loading-data)

[http://blog.iangclifton.com/2011/01/01/android-splash-screens-done-right/](http://blog.iangclifton.com/2011/01/01/android-splash-screens-done-right/)

# javascript - Javascript Url 操作和后退导航

> ID：11276012
> 
> 赞同：1
> 
> 时间：2012-06-30T17:11:34.037
> 
> 标签：javascript, browser-history, pushstate

我正在使用以下内容更新网址：

```
window.history.pushState(null, "Page title", "/?param=" + myParamValue); 
```

这很好用，但是当用户点击后退按钮时，url 会更新，但页面不会重新加载。

我有一个更新内容的 ajax 例程，但如果可能的话，我不想重新实现后退/前进导航，我只想在用户点击后退/前进浏览器按钮的情况下重新加载页面。

**问**：有没有办法强制页面在用户的浏览器后退/前进操作中重新加载给定的 url？

**额外问题**：另外，如果浏览器不支持`window.history.pushState`旧浏览器怎么办？我应该将该代码包含在 try/catch 块中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T17:21:06.380

```
if(typeof window.history.pushState === 'function')
    //handle your url rewriting
else
    //support for older browsers 
```

至于您关于后退按钮支持的问题，评论中提供的链接为该功能提供了非常好的实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:20:54.350

你应该看看这个 jQuery 插件，它可能对你有用：

[http://www.asual.com/jquery/address/](http://www.asual.com/jquery/address/)

我发现它阅读了这个线程：

[https://stackoverflow.com/questions/116446/what-is-the-best-back-button-jquery-plugin](https://stackoverflow.com/questions/116446/what-is-the-best-back-button-jquery-plugin)

我希望它有所帮助。

关于旧的浏览器问题，我认为您不必为此烦恼，因为您使用的是 ajax，这也需要现代浏览器。主要问题是：谁会访问您的网站？如果主要是40岁以上的人，也许你应该打扰......

只是我的观点 ;）

**编辑：小心 IE9，它没有在其中处理。谢谢 nbrooks 的信息**

# python - 请求一个简单的用于自动生成迁移的 alembic 工作示例

> ID：11276017
> 
> 赞同：14
> 
> 时间：2012-06-30T17:12:49.827
> 
> 标签：python, orm, sqlalchemy, data-migration, alembic

我从我的 ubuntu 安装了 alembic 0.3.4、sqlalchemy、SQLite 版本 3.7.4，并将 SQLAlchemy 0.6.4 升级到 SQLAlchemy 0.7 或更高版本。我按照[此处链接的说明](https://web.archive.org/web/20160616142640/https://alembic.readthedocs.io/en/latest/tutorial.html)进行操作：

现在我正在测试：自动生成迁移我已经创建了一个包：模式，并在模式下创建了一个包标记：*init* .py，其中定义了一行：

```
__all__ = ["teacher"] 
```

我还在模式目录中创建了一个模块文件：dbmodel.py，内容如下

```
Base = declarative_base()
class teacher(Base):
      __tablename__ = 'teacher' 
      id = Column(Integer, primary_key=True)
      name = Column(String)
      department = Column(String) 
```

顺便说一句，我创建了一个 sqlite 数据库，它运行良好，可以在自动生成迁移之前进行一些测试。我配置了 env.py 文件。增加了两行：

```
from schemas.dbmodel import Base
target_metadata = Base.metadata 
```

然后我运行：

```
alembic revision --autogenerate -m "Added teacher table" 
```

但仍然出现错误：

```
Traceback (most recent call last):
File "/usr/local/bin/alembic", line 9, in <module>
    load_entry_point('alembic==0.3.4', 'console_scripts', 'alembic')()
  File "/usr/local/lib/python2.7/dist-packages/alembic-0.3.4-py2.7.egg/alembic/config.py", line 229, in main
    **dict((k, getattr(options, k)) for k in kwarg)
  File "/usr/local/lib/python2.7/dist-packages/alembic-0.3.4-py2.7.egg/alembic/command.py", line 93, in revision
    script.run_env()
  File "/usr/local/lib/python2.7/dist-packages/alembic-0.3.4-py2.7.egg/alembic/script.py", line 188, in run_env
    util.load_python_file(self.dir, 'env.py')
  File "/usr/local/lib/python2.7/dist-packages/alembic-0.3.4-py2.7.egg/alembic/util.py", line 185, in load_python_file
    module = imp.load_source(module_id, path, open(path, 'rb'))
  File "alembic/env.py", line 20, in <module>
    from schemas.dbmodel import Base
ImportError: No module named schemas.dbmodel 
```

我不知道为什么使用 alembic 测试一个简单的示例对我来说如此困难。我只想将我的应用程序数据模型导入物理数据库模型。有这么复杂吗？谢谢。请知道alembic的人一步一步地给我们一个简单的例子。我想更多的人会从中受益。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-01T08:20:54.063

我还发现 Alembic 找不到我的模型模块。作为一种解决方法，我发现通过`env.py`在导入模型之前将以下内容添加到 my 中，我可以强制它工作：

```
import os, sys
sys.path.append(os.getcwd()) 
```

这可能不是最好的解决方案，但它让 Alembic 自动生成我的迁移。

# c# - 查看服务器是否正在运行，asp.net

> ID：11276018
> 
> 赞同：0
> 
> 时间：2012-06-30T17:12:55.350
> 
> 标签：c#, asp.net, web

我有一个服务器和一个运行 100% 的网站。

问题是，我希望我的网站显示在服务器的默认页面“状态”上。我正在考虑使用以下代码 ping 服务器：

```
Uri url = new Uri("http://www.abhigrgrgrgrgsheksur.com");
string pingurl = string.Format("{0}", url.Host);
string host = pingurl;
bool result = false;
Ping p = new Ping();
try
{
    PingReply reply = p.Send(host, 3000);
    if (reply.Status == IPStatus.Success)
        return true;
}
catch { }
return result; 
```

代码来自我在网上找到的网站，而不是我的。

问题是，如果您将该代码放在网站的默认页面上，当人们执行“反向”操作时，它总是会 ping 服务器，我的问题是，它可以删除服务器吗？还是让它停止工作？或者类似的东西？服务器不是网站。这是一个正在运行的进程（MineCraft 服务器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:31:15.270

如果我理解正确，您在每次刷新页面时都会担心它会 ping 并且会进行多次 ping 调用

[因此，在http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ping.aspx](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ping.aspx)的 Ping 类的备注段落中所做的声明可能会帮助您解决问题

您不能使用 Ping 类的同一实例同时生成多个 ICMP Echo 请求。*在 SendAsync 调用正在进行时调用 Send 或在所有先前调用完成之前多次调用 SendAsync 会导致 InvalidOperationException。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T17:16:34.323

它将向服务器发送多个 ping 请求。那不应该使服务器崩溃。尽管您可能需要与您的网络管理员确认多个 PING 请求是否来自同一 IP（您的 Web 服务器的 IP）是否不会被某些防火墙丢弃。

# dependency-injection - 为什么要注入依赖项？

> ID：11276022
> 
> 赞同：0
> 
> 时间：2012-06-30T17:13:24.650
> 
> 标签：dependency-injection, inversion-of-control, ioc-container

假设我使用的是 IoC 容器，为什么我的类型必须**注入**它们的依赖项？为什么不能每种类型都假设容器存在并只检索它自己需要的依赖项？后一种方法有什么缺点？

我知道属性注入，但我不希望将其作为答案，即使它确实节省了在更复杂类型中使用长参数列表构造函数。这并没有节省您最终需要键入/维护的代码。哦，我更喜欢只读/最终的依赖项（个人喜好）。

下面是一个典型的 C# 构造函数注入示例：

```
public class Calculator
{
    private readonly IAdder _adder;
    private readonly ISubtractor _subtractor;
    private readonly IMultiplier _multiplier;
    private readonly IDivider _divider;

    public Calculator(IAdder adder, ISubtractor subtractor,
                      IMultiplier multiplier, IDivider divider)
    {
        _adder = adder;
        _subtractor = subtractor;
        _multiplier = multiplier;
        _divider = divider;
    }
} 
```

这就是我宁愿做的事情：

```
public class Calculator
{
    private readonly IAdder _adder;
    private readonly ISubtractor _subtractor;
    private readonly IMultiplier _multiplier;
    private readonly IDivider _divider;

    public Calculator()
    {
        _adder = Container.Get<IAdder>();
        _subtractor = Container.Get<ISubtractor>();
        _multiplier = Container.Get<IMultiplier>();
        _divider = Container.Get<IDivider>();
    }
} 
```

随着答案的出现，我想保留一份利弊清单：

优点

*   干净的构造函数作为类型不需要“污染”它们的构造函数的依赖关系。这不是一个大问题，因为 Calculator 在其构造函数中除了依赖项之外没有任何东西，但想象一下它确实存在。例如`public Calculator(Mode mode, bool UseDigitGrouping)`。
*   当依赖项的依赖项发生更改时，客户端代码不会中断。
*   需要维护的代码更少。

缺点：

*   将来更难更改 IoC 容器。
*   目前尚不清楚类型的依赖项是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:17:06.850

> 假设我使用的是 IoC 容器，为什么我的类型必须注入所有依赖项？为什么不能每种类型都假设容器存在并只检索它自己需要的依赖项？这样做有什么缺点？

我能想到的几个原因，你提到了一个：

*   如果有的话，你的类有什么依赖已经不再明显了
*   该类将假定对容器具有隐藏的依赖关系，至少是最坏的一种（假设它作为全局存在或可静态访问）

您对在依赖项的依赖项更改有效时调整代码的难易程度的担忧；这对 IoC 来说是一个非常有力的论据（让容器自动为你做这件事；只要可以满足所有依赖关系，什么都不会破坏）。

# php - 在 Bcrypt 之前使用 512 哈希？

> ID：11276026
> 
> 赞同：1
> 
> 时间：2012-06-30T17:14:07.567
> 
> 标签：php, bcrypt, sha512

我想在我的系统中使用 Bcrypt 进行密码加密。但是所有的例子都是这样的：

```
$password = $_POST['password'];
$salt = substr(str_replace('+', '.', base64_encode(sha1(microtime(true), true))), 0, 22);
$hash = crypt($password, '$2a$12$'.$salt); 
```

这对我来说看起来很安全，但我想知道，在每个示例中，没有人在使用 Bcrypt 之前对密码进行哈希处理。

由于独特的盐，Rainbow 表应该无法一次破解所有密码。但是，如果黑客获取一条记录并使用该特定记录的盐创建一个彩虹表，他应该能够破解一个弱密码。

因此，如果有人使用弱密码（比如说“foo”），在使用 Bcrypt 之前先使用 SHA-512 对其进行哈希处理会更安全。我对吗？或者这只是看起来更安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T20:00:23.853

实际上答案必须是**no**，它不会使散列在密码学意义上显着更强。您可能知道，bcrypt（虽然要使用的函数名为`crypt`）本身就是一个散列函数，而不是一个加密函数。

在 bcrypt 中，您传递了一个成本因子，它定义了将完成多少次迭代（通常是数百次）。这**会减慢**哈希的计算速度，这使得蛮力攻击变得不切实际。之前使用 SHA-512，只会多增加一次迭代。

您所说的**盐**是正确的，但是当然如果您必须为每个密码构建一个彩虹表，您将简单地暴力破解直到找到匹配项，无需构建整个彩虹表。

如果攻击者可以控制**数据库和代码**，那么额外的 SHA-512 将毫无帮助（仅多一次迭代）。如果他只有**没有代码的数据库**（SQL-Injection），那么他将识别 bcrypt 哈希。他现在可以使用 bcrypt 进行暴力破解，但由于 SHA-512，没有任何弱密码。这就像 SHA-512 哈希将是破解密码，所以字典是没有用的。这是默默无闻的安全性，但只要代码未知，它就会有效。在使用带有唯一盐的 bcrypt 之前，您可以通过添加一个固定的硬编码盐（密钥）更容易获得相同的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:50:31.590

`crypt()`是一种单向字符串散列，而不是一种加密机制。要使用 SHA-512 哈希，您必须使用该`hash()`函数。Bcrypt 需要 PHP 扩展。对于存储密码，为什么要使它们可逆，而不仅仅是散列它们？这不太安全——如果有人得到了你的密钥和数据库，他们就有了所有的密码，但是一个 SHA512 哈希表是毫无用处的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T19:28:32.557

首先散列无济于事。错误密码是攻击者认为更有可能出现的密码，并在他尝试使用的密码列表中较早放置。

Bcrypt 结合了盐来消除预先计算的查找表（彩虹表就是一个例子）。为什么攻击者要为单个记录构建彩虹表？不，当攻击一个加盐密码时，攻击者只需通过他最可能的密码的有序列表，重复哈希算法来查看它是否匹配。

他可以通过该列表工作多长时间取决于哈希算法执行多长时间。Bcrypt 用“成本”因素来控制它——在你的例子中是 12（这没关系，但可能是我使用的最低限度）。额外的 SHA-512 轮并没有增加任何东西。您已经在执行 4096 次昂贵的 bcrypt 迭代。添加 1 个廉价的 SHA-512 迭代可以忽略不计。

如果您选择列表中的第一个密码，它将在几分之一秒内被破解。如果你选择了第 10 亿个密码，攻击者在几十年内都不会破解它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T19:18:42.157

bcrypt 已经使用了 salt，它在内部做的事情比 SHA512 强很多。在 bcrypt 之上添加 SHA512 迭代（和/或额外的一层盐）不会给你带来明显更强的结果。如果这两个函数以错误的方式交互，以这种方式组合它们实际上可能会给你一个更弱的哈希函数。

# objective-c - 从哪里开始使用用于 Retina 显示器的 OpenGL 画家

> ID：11276027
> 
> 赞同：2
> 
> 时间：2012-06-30T17:14:07.987
> 
> 标签：objective-c, ipad, opengl-es, retina-display

我知道由于此处提到的错误，我无法将 GLPainter 示例从苹果改编为视网膜：[在 Retina iPad 上显示全屏 CAEAGLLayer 时出现问题](https://stackoverflow.com/questions/9757052/problems-displaying-full-screen-caeagllayer-on-retina-ipad)

任何人都知道使用画笔创建 Open-GL 基本画家的良好起点，这将适用于 Retina？

或者 - 创建一个没有`CAEAGLLayer`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T07:25:32.700

我认为起点仍然可以`GLPaint`，只是您需要设置为`NO`hte 值`kEAGLDrawablePropertyRetainedBacking`并更改您在 GL 视图中绘制的方式。

`GLPaint`只会将您通过触摸屏幕绘制的笔画渲染到 gl 缓冲区，依赖于`kEAGLDrawablePropertyRetainedBacking`保留完整的缓冲区内容。另一种方法可能是在每一步重绘缓冲区的全部内容。这将需要跟踪所有绘制的笔画并“重播”它们。

`kEAGLDrawablePropertyRetainedBacking`我怀疑在任何严肃的绘画应用程序中，由于性能和管理您自己的代表绘画的数据结构的需要（用于存储、发送绘画等），您都不会依赖保留缓冲区内容，因此会实现您自己的解决方案。

# drupal - Drupal：如何更改或在哪里可以找到脚本中评论视图的用户名行？

> ID：11276031
> 
> 赞同：0
> 
> 时间：2012-06-30T17:14:55.453
> 
> 标签：drupal, drupal-comments

在 Drupal 显示评论框中，我想将显示用户名更改为名字和姓氏。我已经设置了数据库，并且我知道我可以`$user->name`在单独的数据库表中找到名字和姓氏。

但我的问题是，在脚本中我应该在哪里更改它？我查看了评论模块，但我不确定用于查看评论的脚本。

请您告诉我在脚本的评论视图框中的哪个位置可以找到显示的用户名。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:25:22.477

您的意思是要在显示评论时显示评论作者的名字+姓氏而不是用户名？如果是这种情况，那么您可以轻松地在您的 comment.tpl.php 文件中执行此操作，而不是编辑评论模块。

# emacs - 如何在 Emacs 中自定义目录列表？

> ID：11276035
> 
> 赞同：1
> 
> 时间：2012-06-30T17:15:24.743
> 
> 标签：emacs, lisp

我有一个可自定义的变量，其中包含目录列表。我希望能够在 Emacs 自定义模式下使用一些 INS 和 DEL 按钮对其进行自定义，如果可能的话，甚至可以使用文件选择器进行自定义。所以到目前为止我所拥有的是：

```
(defcustom my-system-include-paths '( "./include/" "/opt/local/include" "/usr/include" )
  "This is a list of include paths."
  :group 'mygroup
  ) 
```

我想我必须使用该`:type`参数，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T19:58:58.647

Emacs 是自记录的，使用它。

`M-:``(info "(elisp) Composite Types")``RET`

（[在线](https://www.gnu.org/software/emacs/manual/html_node/elisp/Composite-Types.html#Composite-Types)）

例如，您可以像这样定义目录列表：

```
(defcustom custom-directories nil
  "Custom variable"
  :type '(repeat directory)) 
```

# c++ - c++ boost::bind vs clojure偏函数

> ID：11276036
> 
> 赞同：1
> 
> 时间：2012-06-30T17:15:24.930
> 
> 标签：c++, clojure, functional-programming

c++ boost 绑定库和clojure 的部分函数非常相似。例如：

```
int x = 8;
bind(std::less<int>(), _1, 9)(x);   // x < 9 
```

这类似于 clojure 的偏函数：

```
((partial > 9) 8) 
```

不同之处在于`partial`只允许绑定前 n 个参数，而`boost::bind`允许使用占位符指示哪些参数是绑定的，哪些是未绑定的。所以`boost::bind`实际上更通用和有用：

```
bind(f, _2, _1)(x, y);                 // f(y, x)

bind(g, _1, 9, _1)(x);                 // g(x, 9, x) 
```

我想知道`boost::bind`在 clojure（或 clojure-contrib）中是否有类似的东西？为什么 partial 没有按原样写得更通用（和有用）`boost::bind`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T18:48:01.153

这是 Clojure 的一个相当常见的问题，更经常地用线程宏 -> 和 ->> 来表达，为什么它们也不允许任意占位符。

在我看来，给出的理由也适用于这里：惯用的 Clojure 函数通常会分解成使它们的第一个或最后一个参数分开提供的函数，而不是混合提供的函数。

换句话说，开发人员通常会尝试编写函数，以便它们适合 ->、->> 和/或部分函数。

鉴于匿名函数的读取器宏，在需要时创建占位符版本相当容易，用于不太惯用的情况：

```
#(f %2 %1) ;; bind(f, _2, _1)
#(g % 9 %) ;; bind(g, _1, 9, _1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T19:45:28.393

就像肖恩说的，`partial`解决了一个更具体的问题，一般来说，lambdas 是惯用的解决方案。也就是说，如果你很绝望，你总是可以自己动手`bind`：

```
(defmacro bind
  [bound-function & args]
  (let [; helper function to parse actual argument symbols
        get-symbols (fn [s] (map second s)),
        ; help function to get the placeholder arguments
        get-placeholders (fn [s] (filter first s))
        ; collection of arguments and whether they're placeholders
        bound-args (map (fn [arg]
                        (if (= arg '_)
                          ; for placeholders, generate a new symbol
                          [true (gensym)]
                          ; otherwise, use the provided argument as-is
                          [false arg]))
                      args)]
    `(fn [~@(get-symbols (get-placeholders bound-args))]
       (~bound-function ~@(get-symbols bound-args))))) 
```

它的用途如下：

```
((bind > 9 _) 8) ; true
((bind > _ _) 9 8 ) ; true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T09:27:55.017

[Swiss Arrows](https://github.com/rplevy/swiss-arrows)库允许各种其他参数线程/绑定方案。但是，其中有很多选项可以优化函数的参数以最好地使用 -> 和 ->> 宏是首选解决方案，如果不可能，请使用匿名函数作为最简单的通用解决方案。

# python - 解决元类冲突

> ID：11276037
> 
> 赞同：63
> 
> 时间：2012-06-30T17:15:39.670
> 
> 标签：python, python-3.x, multiple-inheritance, metaclass

我需要根据某些条件创建一个使用不同基类的类。在一些课程中，我得到了臭名昭著的：

```
TypeError: metaclass conflict: the metaclass of a derived class must be a (non-strict) subclass of the metaclasses of all its bases 
```

一个例子是`sqlite3`，这里有一个简短的例子，你甚至可以在解释器中使用：

```
>>> import sqlite3
>>> x = type('x', (sqlite3,), {})
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: metaclass conflict: the metaclass of a derived class must be a (non-strict) subclass of the metaclasses of all its bases 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-01T16:22:08.933

而不是使用jdi提到的配方，您可以直接使用：

```
class M_C(M_A, M_B):
    pass

class C(A, B):
    __metaclass__ = M_C 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-30T17:31:53.307

您使用`sqlite3`的示例无效，因为它是模块而不是类。我也遇到过这个问题。

这是您的问题：基类具有与子类不同类型的元类。这就是为什么你得到一个`TypeError`.

我[使用 noconflict.py 使用了这个 activestate 片段](http://code.activestate.com/recipes/204197-solving-the-metaclass-conflict/)的变体。该代码段需要重新编写，因为它与 python 3.x 不兼容。无论如何，它应该给你一个大致的想法。

**问题片段**

```
class M_A(type):
    pass
class M_B(type):
    pass
class A(object):
    __metaclass__=M_A
class B(object):
    __metaclass__=M_B
class C(A,B):
    pass

#Traceback (most recent call last):
#  File "<stdin>", line 1, in ?
#TypeError: metaclass conflict: the metaclass of a derived class must be a (non-strict) subclass #of the metaclasses of all its bases 
```

**解决方案片段**

```
from noconflict import classmaker
class C(A,B):
    __metaclass__=classmaker()

print C
#<class 'C'> 
```

代码配方为您正确解析元类。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-05-01T15:10:24.010

当您尝试从函数而不是类继承时，也会发生这种情况。

例如。

```
def function():
    pass

class MyClass(function):
    pass 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-10-12T12:34:05.263

要使用@michael 描述的模式，但同时兼容 Python 2 和 3（使用`six`库）：

```
from six import with_metaclass

class M_C(M_A, M_B):
    pass

class C(with_metaclass(M_C, A, B)):
    # implement your class here 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-12-21T15:46:05.293

据我从之前的答案中了解到，我们通常需要手动执行的唯一操作是：

```
class M_A(type): pass
class M_B(type): pass
class A(metaclass=M_A): pass
class B(metaclass=M_B): pass

class M_C(M_A, M_B): pass
class C:(A, B, metaclass=M_C): pass 
```

但是我们现在可以通过以下方式自动化最后两行：

```
def metaclass_resolver(*classes):
    metaclass = tuple(set(type(cls) for cls in classes))
    metaclass = metaclass[0] if len(metaclass)==1 \
                else type("_".join(mcls.__name__ for mcls in metaclass), metaclass, {})   # class M_C
    return metaclass("_".join(cls.__name__ for cls in classes), classes, {})              # class C

class C(metaclass_resolver(A, B)): pass 
```

由于我们不使用任何特定于版本的元类语法，因此它`metaclass_resolver`适用于 Python 2 和 Python 3。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-04-21T18:24:45.113

我喜欢这样做：

```
class mBase1(type):
    ...

class mBase2(type):
    ...

class Base1(metaclass=mBase1):
    ...

class Base2(metaclass=mBase2):
    ...

class mChild(type(Base1), type(Base2)):
    pass

class Child(Base1, Base2, metaclass=mChild):
    ... 
```

这样，如果基础的元类发生了某些变化，您就不必担心它。`type()`会照顾它。

# verilog - 在 always 块中使用 if-else 和 for 循环

> ID：11276038
> 
> 赞同：1
> 
> 时间：2012-06-30T17:15:44.837
> 
> 标签：verilog

我想在一个块内使用`if-else`和`for`循环。`always`我不希望那些`if-else`被一次又一次地执行，所以我不想总是与`posedge clk`or连接`negedge clk`。

我希望它们只被执行一次。我不仅想模拟，而且还想在 Spartan Board 上进行合成。

```
always @ (**what I should add here**)
    begin
    if(condition)

    else

    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T08:50:32.360

对于模拟执行某些事情，一旦你可以使用`initial`，但这不是一个可综合的：

```
reg x;

initial begin
  if(condition) begin
    x = 1'b0 ;
  end
  else begin
    x = 1'b1 ;
  end
end 
```

回答一般问题`always @(**what I should add here**)`大多数现代verilog模拟器将允许使用`*`哪个将在任何选择逻辑条件的任何右侧参数发生变化时触发块（总是开始结束）。

```
always @* begin
  if(condition)
    x =  y ;
  else
    x = ~y ;
end 
```

较旧的模拟器将要求您在列表中列出您需要触发的变量。`always @(condition, y)`

如果仅选择了 1 个变量，则在接线类型上分配可能会更好，但这不能仅限于“执行一次”，而是从您的问题中选择合适的选择。虽然不确定是否适合 FPGA

```
wire [3:0] x ; //4 bit wire
//(condition) ? value if true : value if false ;
assign x = (condition) ? 4'b1010 : 4'b0100 ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T02:45:14.313

```
module oneShot(in, out, enable, reset);
    input in;
    input enable;
    input reset;
    output reg out;

    reg once_only;
    always @ (posedge enable) begin
          if (reset) begin
                once_only <= 0;
          end              
          else if (once_only == 0) begin
                out <= calc_out; // or whatever processing you want
                once_only <= 1;
          end
    end

    always @(*) begin
          // calculate ouput here always
          calc_out = 1 +  7 +100+ in;
    end
endmodule 
```

你不能让那些 if 语句只计算一次。它是硬件，它总是会计算。但是你可以在计算一次后保持输出稳定。您仍在尝试编写软件功能并将其放入硬件中，而不是描述可以解决您问题的硬件。我看不出你会以这种方式得到一个像样的设计。当然，您将能够制作一些小部件并合成它们（最终），但是完整的设计？

# java - 自动登录网站

> ID：11276041
> 
> 赞同：0
> 
> 时间：2012-06-30T17:16:16.600
> 
> 标签：java, sockets, web

我想制作一个应用程序，通过填写表单登录网站，执行基本操作，如按钮单击等，最后注销。有哪些可用的包/外部罐子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:39:46.987

一般来说，你需要打开一个 HTTP 连接，
获取表单（使用 GET 方法），
并填写详细信息，而 POST 可能会执行登录数据的 POST。
请记住，大多数站点都提供了一些安全性，例如 SSL 或其他机制，您将不得不在您的应用程序中处理这个问题（就像浏览器知道如何处理这个问题一样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T00:42:07.680

您需要查看 java.net.URL、java.net.HttpURLConnection 和 java.net.Authenticator。

# android - 如何将 SearchWidget 添加到 ActionBar？

> ID：11276043
> 
> 赞同：26
> 
> 时间：2012-06-30T17:16:31.523
> 
> 标签：android, nullpointerexception, android-actionbar, searchview

我正在尝试将 Search-ActionView 添加到我的应用程序中（如此处所述[http://developer.android.com/guide/topics/search/search-dialog.html#UsingSearchWidget](http://developer.android.com/guide/topics/search/search-dialog.html#UsingSearchWidget)）。不幸的是，我不断收到 NullPointerException，我很难检测出实际出了什么问题。

我创建了一个可搜索的配置和一个可搜索的活动，如 android 页面所示。我的菜单 .xml 文件如下所示：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    ...
    <item
        android:id="@+id/menu_item_search"
        android:actionViewClass="android.widget.SearchView"
        android:icon="@drawable/icon_search"
        android:showAsAction="always"
        android:title="@string/action_bar_button_search">
    </item>

</menu> 
```

这是抛出异常的方法：

```
public boolean onCreateOptionsMenu( Menu menu )
{
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate( R.menu.action_bar, menu );

    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = (SearchView) menu.findItem(R.id.menu_item_search).getActionView();

    // NullPointerException thrown here; searchView is null.
    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
    searchView.setIconifiedByDefault(false);

    return super.onCreateOptionsMenu( menu );
} 
```

完整的堆栈跟踪：

```
FATAL EXCEPTION: main
java.lang.NullPointerException
at com.example.activities.Test.onCreateOptionsMenu(Test.java:41)
at android.app.Activity.onCreatePanelMenu(Activity.java:2444)
at com.android.internal.policy.impl.PhoneWindow.preparePanel(PhoneWindow.java:408)
at com.android.internal.policy.impl.PhoneWindow.invalidatePanelMenu(PhoneWindow.java:759)
at com.android.internal.policy.impl.PhoneWindow$1.run(PhoneWindow.java:2997)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4507)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-29T21:36:30.580

由于这个问题经常被查找，我一次又一次地偶然发现了同样的问题，这里有一个小跟进，跟踪创建 SearchWidget 的所有必要步骤。

不过，关于 SearchWidget 有一个棘手的部分：**如果您在 searchable.xml 中使用硬编码字符串而不是资源，则应用程序将崩溃并显示令人困惑的错误消息。**这花了我太多的时间……

1.  创建一个 Activity 来处理搜索结果

    ```
    public class Search extends Activity {} 
    ```

2.  将文件“searchable.xml”添加到您的 res/xml 目录（**使用资源作为提示和标签！**）

    ```
    <searchable xmlns:android="http://schemas.android.com/apk/res/android"
        android:hint="@string/search_hint"
        android:includeInGlobalSearch="false"
        android:label="@string/search_label"
        android:searchSettingsDescription="@string/search_global_description" /> 
    ```

3.  在 res/menu 目录中创建正确的菜单项“main.xml”

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <menu xmlns:android="http://schemas.android.com/apk/res/android" >

        <item
           android:id="@+id/options_menu_main_search"
           android:actionViewClass="android.widget.SearchView"
           android:icon="@drawable/icon_magnifier"
           android:showAsAction="always"
           android:title="Search"/>

    </menu> 
    ```

4.  更新您的 Manifest.xml：添加搜索活动并指定哪些活动可以接收搜索意图。添加`<meta-data android:name="android.app.default_searchable" android:value=".app.Search" />`到`activity`节点使其可搜索。将其添加到`application`节点使所有活动都可搜索。

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android">
        <application>
            <meta-data
                android:name="android.app.default_searchable"
                android:value=".app.Search" />

            <activity android:name=".activities.Search" >
                <intent-filter>
                <action android:name="android.intent.action.SEARCH" />
            </intent-filter>

            <meta-data
                android:name="android.app.searchable"
                android:resource="@xml/searchable" />
        </activity>
    </application> 
    ```

5.  在应提供 SearchWidget 的每个活动中将 SearchManager 添加到 ActionView

    ```
    public class Activity extends android.app.Activity
    {
        @Override
        public boolean onCreateOptionsMenu( Menu menu )
        {
            getMenuInflater().inflate( R.menu.main, menu );

            // Add SearchWidget.
            SearchManager searchManager = (SearchManager) getSystemService( Context.SEARCH_SERVICE );
            SearchView searchView = (SearchView) menu.findItem( R.id.options_menu_main_search ).getActionView();

            searchView.setSearchableInfo( searchManager.getSearchableInfo( getComponentName() ) );

            return super.onCreateOptionsMenu( menu );
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-03-13T16:39:55.683

如果您使用面向**Android 2.x**并使用**android.support.v7.widget.SearchView** 检查您的 menu.xml 是否如下所示（注意**yourapp**命名空间）

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:yourapp="http://schemas.android.com/apk/res-auto">
    <item
        android:id="@+id/search"
        android:title="@string/search"
        android:icon="@drawable/ic_search"
        yourapp:showAsAction="always"
        yourapp:actionViewClass="android.support.v7.widget.SearchView" />
</menu> 
```

在您膨胀菜单的活动中，使用：

```
android.support.v7.widget.SearchView searchView = (android.support.v7.widget.SearchView) 
MenuItemCompat.getActionView(menu.findItem(R.id.search)); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-06-30T17:47:46.767

[在链接](http://www.edumobile.org/android/android-development/action-bar-search-view/)中使用这种方式

```
public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.action_bar, menu);
        MenuItem searchItem = menu.findItem(R.id.menu_item_search);
        SearchView searchView = (SearchView) searchItem.getActionView();

        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        if(null!=searchManager ) {   
         searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
        }
        searchView.setIconifiedByDefault(false);

        return true;
    } 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-07-21T06:12:16.017

[SearchView getActionView 返回 null](https://stackoverflow.com/questions/18407171/searchview-getactionview-returning-null)

如链接中所示，打开您的菜单 xml 文件并更改

```
android:actionViewClass="android.widget.SearchView" 
```

进入

```
app:actionViewClass="android.widget.SearchView" 
```

这对我有用

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-02T17:23:47.690

我也遇到了同样的问题。就我而言，更改`android:actionViewClass`以`app:actionViewClass`解决问题（使用`xmlns:app="http://schemas.android.com/apk/res-auto"`标签`<menu>`）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-03T09:45:39.797

首先，在布局文件夹中创建一个包含 SearchWidget 的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<SearchView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/edit_query"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:inputType="textFilter"
    >

</SearchView> 
```

然后，在您的活动中，检索操作栏

```
android.support.v7.app.ActionBar actionBar = getSupportActionBar(); 
```

然后添加对您的搜索视图的引用

```
 actionBar.setCustomView(R.layout.custom_action_bar);
    search = (EditText) actionBar.getCustomView().findViewById(
            R.id.edit_query); 
```

然后，设置操作栏的显示选项

```
actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM | ActionBar.DISPLAY_HOME_AS_UP); 
```

就是这样。

Btw, you could also use my [search widget](https://github.com/riyagayasen/Easy_Search_Widget_Android) which takes a list of strings as an array list and displays them, according to the query entered. Once the user selects a particular result, the selected result is returned which can retrieved on the onActivityResult of the parent activity.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-27T16:05:15.427

此问题是由缺少意图过滤器触发的：

```
<intent-filter>
    <action android:name="android.intent.action.SEARCH" />
</intent-filter> 
```

# javascript - 关于 jquery 调整大小插件的建议

> ID：11276050
> 
> 赞同：1
> 
> 时间：2012-06-30T17:17:27.487
> 
> 标签：javascript, jquery

我正在使用 jquery 滑动标签。选项卡容器将调整到非活动内容的高度，但唯一的问题是 autoHeight jquery 函数不会调整到活动扩展内容。我试过[这个](http://benalman.com/projects/jquery-resize-plugin/)插件，但没有运气。其他插件有什么建议吗？这是我的[JSFIDDLE](http://jsfiddle.net/HZj7k/14/)。

谢谢你。

我的调整大小的方法不起作用：

```
<script>

    $(document).ready(function() {

        $('div#st_horizontal').slideTabs({
            // Options              
            contentAnim: 'slideH',
            autoHeight: true,
            contentAnimTime: 600,
            contentEasing: 'easeInOutExpo',
            tabsAnimTime: 300
        });

        var height = 50 // Set to the height you want
        $('.st_view').css('height', height+'px')

    });​

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:47:47.303

试试这个：使用 jquery 调整大小插件：[这里](http://benalman.com/projects/jquery-resize-plugin/)

```
$('.st_tab_view').resize(function() {
        var $this = $(this);
        $this.closest('.st_view').css('height', $this.height());
    }); 
```

# css - css 功能区将自身附加到错误的 div

> ID：11276051
> 
> 赞同：0
> 
> 时间：2012-06-30T17:17:28.473
> 
> 标签：css, html, ribbon

开门见山。CSS 功能区应该附加到右侧边栏 div，但由于我不知道的原因，它一直附加到左侧。我已经尝试了几乎所有东西，但无法弄清楚。这对于对 CSS 有更高理解的人来说一定很容易..so..

这是代码： http: [//jsfiddle.net/pcpEK/](http://jsfiddle.net/pcpEK/) 完整预览：http: [//jsfiddle.net/pcpEK/embedded/result/](http://jsfiddle.net/pcpEK/embedded/result/)

任何帮助是极大的赞赏 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:26:51.870

添加`position: relative`和`padding-top`-

```
#sidebar {
        float:right;
        width:220px;
        padding:90px 0 0 0;
        position: relative;
    } 
```

既然你给了 position: absolute`#ribbon`它的父元素需要有相对位置，因为绝对元素的顶部和左侧位置从它的父元素开始，它有`position: relative`.

如果父元素没有相对位置，则绝对定位元素从主体中获取其位置

**演示：http:** [//jsfiddle.net/pcpEK/2/](http://jsfiddle.net/pcpEK/2/)

# c++ - C++ 中涉及 new 和 delete[] 函数的奇怪错误

> ID：11276058
> 
> 赞同：2
> 
> 时间：2012-06-30T17:18:00.467
> 
> 标签：c++, merge, segmentation-fault, malloc, mergesort

我正在编写 Coursera*算法的第一个编程作业：设计和分析*课程 ( [https://www.coursera.org/course/algo](https://www.coursera.org/course/algo) )。它涉及使用合并排序来计算反转（[http://en.wikipedia.org/wiki/Inversion_(discrete_mathematics](http://en.wikipedia.org/wiki/Inversion_(discrete_mathematics) )）。我认为这将是一个相对简单的事情，因为我之前（在学校）遇到过合并排序。

```
#include <iostream>
#include <fstream>

using namespace std;

int *half(int *array, int n, int start, int end)
{
    /*
     * Creates a new array which contains elements from ''array'' starting with ''start''
     * and ending with ''end - 1''.
     */

     int *new_array = new int[end-start];

     for(int i = start; i < end; i++)
     {
        new_array[i-start] = array[i];
     }

     return new_array;
}

int merge(int *array1, int n1, int *array2, int n2, int *new_array)
{
    /*
     *  Merges arrays 1 and 2 (with lengths n1 and n2) into a new_array, counting
     *  ''split inversions'' by the way.
     */
    int i = 0, j = 0, count = 0;

    for(int k = 0; k < n1 + n2; k++)
    {

         if(i >= n1)
        {
            new_array[k] = array2[j];
            j++;
            continue;
        }

         if(j >= n2)
        {

            new_array[k] = array1[i];
            i++;
            continue;
        }

        if( array1[i] <= array2[j] )
        {
            new_array[k] = array1[i];
            i++;
        }
        else
        {
            new_array[k] = array2[j];
            j++;
            count++;
        }
    }

    return count;
}

int mergesort(int *array, int n)
{

    if(n == 1) return 0; //base case

    int x, y, z;
    int odd;

    if(n%2 == 0) odd = 0;
    else odd = 1;

    int *half1 = new int [n/2];
    int *half2 = new int [n/2 + odd];

    half1 = half(array, n, 0, n/2);
    half2 = half(array, n, n/2, n);

    x = mergesort(half1, n/2);
    y = mergesort(half2, n/2 + odd);  //if n is odd, we add one
    z = merge(half1, n/2, half2, n/2 + odd, array); //we write a sorted array back in our starting array

    delete [] half1;
    delete [] half2;

    return x + y + z;
}

int main()
{
    int n;
    int *array = new int[n];

    cin >> n;

    for(int i = 0; i < n; i++)
    {
        int x;
        cin >> x;
        array[i] = x;
    }

    for(int i = 0; i < n; i++)
        cout << array[i] << " ";

    cout << endl;
    cout << "Number of inversions: " << mergesort(array, n) << endl;

    for(int i = 0; i < n; i++)
    cout << array[i] << " ";

    cout << endl;
    delete[] array;

    return 0;
} 
```

那么，这里有什么奇怪的地方？第一件事：对我来说，它适用于某些数组，但对于其他数组会崩溃（稍后会举例）。第二件事：我将代码发送给我的朋友，他说对他来说一切正常，即使是对我来说严重崩溃的示例。

所以，例子：

For array [1 2 3 4 5 6 7] g++ produces this:

```
malloc.c:2451: sYSMALLOc: Assertion `(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' failed.
Aborted (core dumped) 
```

When I ''backtrack'' it using gdb:

```
#0  0x00007ffff7753445 in __GI_raise (sig=<optimized out>) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
#1  0x00007ffff7756bab in __GI_abort () at abort.c:91
#2  0x00007ffff779abed in __malloc_assert (assertion=<optimized out>, file=<optimized out>, line=<optimized out>, function=<optimized out>) at malloc.c:300
#3  0x00007ffff779e0f4 in sYSMALLOc (av=0x7ffff7ad3720, nb=32) at malloc.c:2448
#4  _int_malloc (av=0x7ffff7ad3720, bytes=12) at malloc.c:3892
#5  0x00007ffff779fa45 in __GI___libc_malloc (bytes=12) at malloc.c:2924
#6  0x00007ffff7b8fded in operator new(unsigned long) () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#7  0x00007ffff7b8ff09 in operator new[](unsigned long) () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#8  0x0000000000400b12 in mergesort (array=0x603010, n=7) at jedan.cpp:81
#9  0x0000000000400cfe in main () at jedan.cpp:120 
```

It does something similar (but not **the same**!) for the array [1 2 3 4 5 6 7 8 9 10], again connected to the new and delete[] functions. I can post it here later if somebody thinks that would be helpful, but I don't want to bloat this post too much. And it works for most of the arrays I tried (I had no problems with arrays of size <= 6, and for a pretty big number of bigger arrays).

I'm using Ubuntu 12.04, installed yesterday... pretty clean and fresh. Help?

P.S. If you find variable names a little weird, sorry... I translated them from my native language so the code could be more readable.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T17:29:52.363

```
int n;
int *array = new int[n]; // Undefined behavior 
```

`n` is used uninitialized here, so you'll get a "random" length allocation.

If you're unlucky and `n` holds a "large" garbage value, your code could appear to work. If it holds a small value, you're likely to corrupt your heap when you fill your initial array - this will produce the type of error you're seeing.

Move the `cin >> n;` line before the `array` allocation.

Side note: I think the two allocations you're doing in `mergesort` are leaked (you're only `delete`ing the memory allocated in `half`, you don't actually need to allocate in `mergesort` itself if I read your code correctly).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:30:51.930

You don't check for

```
n==0 
```

in the mergesort() routine.

Then the new[] fails.

BTW, the same stuff in the half() routine:

```
int *new_array = new int[end-start]; 
```

You don't check for the

```
end == start 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T17:31:55.813

You are not specifying the quantity for the array:

```
int main()
{
    int n;
    int *array = new int[n];

    cin >> n; 
```

When the program starts, you have not specified a value for `n`. So the size that is allocated is unknown.

I suggest moving the `cin >> n;` before the array allocation.

# java - 在 Javadoc 中包含私有方法但没有私有成员变量

> ID：11276059
> 
> 赞同：2
> 
> 时间：2012-06-30T17:18:03.263
> 
> 标签：java, javadoc

是否可以在没有所有私有成员变量的情况下在 Javadoc 中包含类的私有方法？我目前正在使用 -private 选项，但私有成员变量在 HTML 中列出，尽管我没有为它们编写任何 Javadoc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:51:55.823

您可以使用自定义 doclet 并将您的私有字段标记为从生成中排除。

参考站点：[javadoc FAQ#exclude](http://java.sun.com/j2se/javadoc/faq/index.html#exclude)

在这里找到提示：[stackoverflow question](https://stackoverflow.com/questions/1120455/how-do-i-exclude-a-specific-method-constructor-from-the-results-of-the-javadoc-a)

# recommendation-engine - 推荐系统的好资源？

> ID：11276060
> 
> 赞同：2
> 
> 时间：2012-06-30T17:18:03.510
> 
> 标签：recommendation-engine

我参加了[Andrew Ng 的机器学习课程](https://www.coursera.org/course/ml)，因此我觉得我对机器学习技术有了相当扎实的基本了解。我知道[netflix 奖](http://en.wikipedia.org/wiki/Netflix_Prize)，并将阅读有关获奖者的信息。

亚马逊的系统上有什么好的文献吗？他们的方法似乎非常有效。他们对自己的方法保密吗？

有没有人收集过关于推荐系统的重要文章库？还是用于各种系统的重要方法的摘要/wiki？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:05:49.707

有关亚马逊推荐系统的信息，请参阅[http://www.tribler.org/trac/raw-attachment/wiki/SimilarityFunction/Amazon-Recommendations.pdf](http://www.tribler.org/trac/raw-attachment/wiki/SimilarityFunction/Amazon-Recommendations.pdf)。有很多关于推荐系统的资源。

我想你应该从以下3个开始

基于用户的协同过滤 基于项目的协同过滤 矩阵分解协同过滤

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T20:14:40.803

我写了一本关于 Netflix Prize 和推荐系统的[专着](http://arek-paterek.com/book)（虽然它不是免费的）。它包含对预测建模的简要介绍

# javascript - 冲突的 jQuery 脚本（NoConflict 修复了一个但破坏了另一个）

> ID：11276061
> 
> 赞同：0
> 
> 时间：2012-06-30T17:18:23.740
> 
> 标签：javascript, slider, conflict, jquery

我有一个滚动网站，其中包含两个旋转图像的 jQuery“滑块”（ [http://bxslider.com/ ）。](http://bxslider.com/)该网站运行良好。

客户端现在想要第三个 jQuery 功能（jQuery Roundabout - v2.1.1 [http://fredhq.com/projects/roundabout](http://fredhq.com/projects/roundabout)）。添加后，这会破坏两个初始滑块，但页面滚动和添加的环形交叉路口脚本有效。

在彻底寻找解决方案后，我在新添加的回旋处添加了 noConflict。这修复了两个初始滚动条，新添加的回旋处仍然可以正常工作，但这会破坏网站上的滚动脚本。

我不是 Java 和 jQuery 的专家，但我通常会随着时间的推移找到修复。这让我很困惑，但我敢肯定这是我所缺少的一些简单的东西。以下是索引文件中的脚本，按顺序列出了不相关的 HTML：

```
<head>

<script src="js/queryLoader.js"></script>
<script defer src="js/plugins.js"></script>
<script defer src="js/commons.js"></script>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>

</head>
<body onLoad="init()" id="body"> 

<script type="text/javascript" src="http://www.firebrand-digital.com/test/wp-content/uploads/2012/02/jquery.bxSlider.min_.js"></script>

<!-- Sliders script -->
<script type="text/javascript">

jQuery(document).ready(function()
{ 
    $('#scroller1').bxSlider(
        {
            auto: true,
            speed: 2000,
            pause: 6000,
            prevImage: 'http://www.firebrand-digital.com/test/wp-content/themes/twentyeleven/images/previous_arrow2.png',
            nextImage: 'http://www.firebrand-digital.com/test/wp-content/themes/twentyeleven/images/next_arrow2.png'
        }
    );
    $('#slider1').bxSlider(
        {
            auto: true,
            speed: 1500,
            pause: 5000,
        }
    );

});
</script>
<!-- End sliders script -->

....html....

<!-- Roundabout 2 script -->
  <script src="http://fredhq.com/lib/js/libraries/jquery.js"></script> 
<script src="http://fredhq.com/lib/js/projects/roundabout/jquery.roundabout2.js">     </script>   

 <script>
 jQuery.noConflict();

jQuery(document).ready(function() {
    jQuery('ul.caro').roundabout();
});
</script>
<!-- Roundabout 2 script -->

....html....
</body> 
```

js/commons.js 包含滚动站点所需的所有脚本。因为当从环形交叉路口脚本中删除 noConflict 时这有效，所以我认为问题在于滑块脚本和环形交叉路口脚本之间。这里 www(dot)irishofcourse.co.cc/firebrand/index-banners.html 是带有 noConflict 的测试站点的 URL。注意：链接不会滚动页面，但其他一切都有效（案例研究是滚动的一部分）。

删除`<script src="http://fredhq.com/lib/js/libraries/jquery.js"></script>`换行符会破坏网站上的所有 jQuery。我不确定这有什么意义，但我想我应该提一下。

任何帮助是极大的赞赏。本。

=======更新========

我认为该行是站点上曾经存在的元素的残留代码。我已经删除了它以及我认为是来自 commons.js 的残留代码。滚动在没有回旋处的情况下仍然有效，但是当我把它放回去时它们仍然会发生冲突。

仍然存在冲突的缺失功能 - 当您单击左侧的链接时，页面不会向下滚动到相应的部分。尽我所知，

`$('#navigation .logo .bars > ul > li > img').on("click",function(){ $.scrollTo('#'+$(this).attr('class').split(' ')[0],500, {axis:'xy'}); }); $('#navigation .logo .bars > ul > li > span').on("click",function(){ $.scrollTo('#'+$(this).attr('class').split(' ')[0],500, {axis:'xy'}); });`

这些是控制页面滚动的行。我认为这里是必须做出改变的地方。这是 commons.js 中唯一不作用于页面的脚本/函数。

再次感谢您的持续帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T17:37:20.447

问题：

1.  您包含 jQuery 三次和不同的版本。
2.  commons.js 需要 jCarousel 插件，该插件将包含在 plugins.js 之后。

建议：

*   删除线`<script src="ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>`和`<script src="http://fredhq.com/lib/js/libraries/jquery.js"></script>`。
*   移动. `<script defer src="js/plugins.js"></script>`_`<script defer src="js/commons.js"></script>`

=== 更新 ===

抱歉，找不到 jCarousel，因为 noConflict 方法放弃了 jQuery 对 $ 变量的控制。你可以在 common.js ( )`$`的第三行添加一个吗？`$(document).ready(function($) {`

=== 更新 ===

好的，我的最后一个建议是愚蠢的；您可以再次删除`$`。下一次尝试:-)请用and
替换行`$("#done-slider").jcarousel({`和。`$("#do-page-slider").jcarousel({``jQuery("#done-slider").jcarousel({``jQuery("#do-page-slider").jcarousel({`

=== 更新 ===

那是成功的，但现在我们有一个新的错误。请同时替换该行中的`$`with 。`jQuery``$('#elements').jScrollPane({`

=== 更新 ===

也替换它在行中`$('#elements').data('jsp').scrollToX(2000);`。

=== 更新 ===

同样，您必须在以`$`开头`jQuery`的两行中替换为`$.scrollTo(`。

# mysql - Wordpress 网站：随机字符编码错误

> ID：11276062
> 
> 赞同：0
> 
> 时间：2012-06-30T17:18:33.193
> 
> 标签：mysql, wordpress, encoding, character, utf8mb4

我有一个 Wordpress 网站，它随机显示如下错误：

```
WordPress database error: [Incorrect string value: '\xF0\x9F\x92\x97\xF0\x9F...' for    column 'option_value' at row 1] UPDATE `wp_options` SET `option_value` = 'a:95:{ 
```

这是一个占位符网站；使用 PhpMyAdmin 将数据从现有的 live 导出到 .sql 文件中。我怀疑存在某种字符编码问题？我已经通过任何“默认值”以及 UTF8 导出。在导入的数据库中，我分别尝试将字符编码和排序规则作为 UTF8（目前是）以及“Latin1 ISO8899 西欧”和“utf_general_ci”作为编码和排序规则，但没有运气。

我注意到，当我在一段时间后访问该站点时会发生错误。

我能做些什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:56:00.943

我最近写[**了一篇关于如何从 MySQL 切换`utf8`到`utf8mb4`**](http://mathiasbynens.be/notes/mysql-utf8mb4#utf8-to-utf8mb4). 如果您按照那里的步骤操作，一切都应该正常工作。以下是流程中每个单独步骤的直接链接：

*   [第 1 步：创建备份](http://mathiasbynens.be/notes/mysql-utf8mb4#backup)
*   [步骤 2：升级 MySQL 服务器](http://mathiasbynens.be/notes/mysql-utf8mb4#upgrade)
*   [步骤 3：修改数据库、表和列](http://mathiasbynens.be/notes/mysql-utf8mb4#databases-tables-columns)
*   [第 4 步：检查列和索引键的最大长度](http://mathiasbynens.be/notes/mysql-utf8mb4#column-index-length)
*   [步骤 5：修改连接、客户端和服务器字符集](http://mathiasbynens.be/notes/mysql-utf8mb4#character-sets)
*   [第 6 步：修复和优化所有表](http://mathiasbynens.be/notes/mysql-utf8mb4#repair-optimize)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:37:29.227

问题可能是编码不匹配。utf8 最多可以存储 3 个字节的字符，utf8mb4 最多可以存储 4 个字节的字符。我猜您的 .sql 文件中的数据包含 utf8 不支持的稀有符号。尝试重新导入 .sql 文件，但将编码设置为 utf8mb4。前段时间我在 Joomla 中遇到了同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T17:03:00.330

```
我今天遇到了同样的问题。
经过多次尝试，我终于找到了原因并修复了它。
对于使用默认 MySQL 字符集和排序规则（latin1、latin1_swedish_ci）存储数据的应用程序，因此您需要在创建数据库或表时将字符集和排序规则指定为 utf8/utf8_general_ci。
例如：
        $sql = "创建表" 。$table_name 。" (
        id mediumint(9) NOT NULL AUTO_INCREMENT,
        书名 varchar(128) NOT NULL,
        作者 varchar(64) NOT NULL,
        主键（id），
        KEY（书名）
        )字符集 utf8 整理 utf8_general_ci;";

参考：
《mysql建表问题？解决了！！！！！！！！！！！”
http://forums.mysql.com/read.php?121,193883,193883
《10.1.5\. 为应用程序配置字符集和排序规则》
http://dev.mysql.com/doc/refman/5.0/en/charset-applications.html

希望这可以帮助你。

```

# php - 在函数之间保持变量不变

> ID：11276067
> 
> 赞同：1
> 
> 时间：2012-06-30T17:18:55.523
> 
> 标签：php, mysql, variables

我有一个功能

```
function createRandomString($length) {
    $string = md5(time());
    $highest_startpoint = 32-$length;
    # use hexdec to get a "number only" format
    $randomString = hexdec(substr($string,rand(0,$highest_startpoint),$length));
    return $randomString;
}
$randomID = createRandomString(7); 
```

我希望能够使用在其他函数中创建的随机字符串

例如：

```
function new() {
echo '<input name="id" type="text" value="'.$randomID.'" disabled="disabled">';
} 
```

但是，随机 ID 不会出现在新函数中（也就是空白）。

我需要将随机 ID 定义为变量一次，以便数字在整个脚本中保持不变，因为如果我在每个函数中定义它，您将使用此方法获得不同的数字。

有没有办法使用顶部的脚本定义变量 randomID 并在所有调用它的函数中保持不变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:31:01.087

好吧，虽然我不建议这样做，但对于您在`new`函数中尝试执行的操作，最简单的解决方法是：

```
function new()
{
    global $randomID;
    echo '<input....'.$randomID.'/>';
} 
```

但是还有更多更好的方法可以达到相同的结果：

使用类：

```
class randomOutput
{
    protected static $_randomID;
    public function __construct()
    {
        self::$_randomID;//can be initialized here, using the same code you have in your createRandomId function
    }

   public function output()
   {
       echo '<input...'.self::$_randomID.'/>';
   }
} 
```

使用参数，如 Zulkhaery Basrul 的回答所示。您可以通过在函数定义中给出默认值来使参数可选`null`。
但是，由于该答案现在已被删除：

```
function new($id)
{
    echo '<input...'.$id.'/>';
}

//with default val:
function new($id = null)
{
    $id = ($id === null ? createRandomId(7) : $id);
    echo '<input...'.$id.'/>';
}

$randId = createRandomId(7);
new($randId);
//some time later
new($randId); 
```

声明常量：

```
function createRandomString($length)
{
    if (defined(RANDOM_STRING_CONST))
    {
        return RANDOM_STRING_CONST;
    }
    //make your randomID, then:
    define('RANDOM_STRING_CONST',$randomID);
    return RANDOM_STRING_CONST;
} 
```

类也有常量。您可以在抽象类中定义它们，因此所有子类都可以访问相同的 randomId。作为额外的奖励（*和*潜在的缺陷）类常量，在父级定义的类常量可以被子类否决。所以要小心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:30:29.167

一种方法是使用全局变量。见[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

然而，使用全局变量被认为是糟糕的编程习惯。最好将代码正确地组织到类中，然后使用类和实例变量。

我建议您阅读一本关于 PHP 或有关面向对象编程原理的好书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T17:23:14.617

```
<?php
function createRandomString($length) {
    $string = md5(time());
    $highest_startpoint = 32-$length;
    # use hexdec to get a "number only" format
    $randomString = hexdec(substr($string,rand(0,$highest_startpoint),$length));
    return $randomString;
}
$randomID = createRandomString(7);

function newfunction($arg) {
echo '<input name="id" type="text" value="'.$arg.'" disabled="disabled">';
}

newfunction($randomID);
?> 
```

# regex - xpressive 中的哪个通配符表示整个文本结尾？

> ID：11276072
> 
> 赞同：2
> 
> 时间：2012-06-30T17:19:47.690
> 
> 标签：regex, boost-xpressive

使用 ANSI C PCRE，我可以通过以下方式提取部分及其内容：

```
(?ms)^\\[(.+?)\\](.*?)(?=\\n\\[|.\\z) 
```

从`[sec1] a = b [sec2] c = d` 我得到`[sec1] a = b`和`[sec2] c = d`

但我怎么能在 xpressive 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T23:32:41.250

如果您使用的是“动态”方言，则可以使用与 PCRE 完全相同的语法。例如（未经测试）：

```
using namespace boost::xpressive;
sregex rx = sregex::compile("(?ms)^\\[(.+?)\\](.*?)(?=\\n\\[|.\\z"); 
```

如果您使用 xpressive 的“静态”方言，通配符模式是`_`(in namespace `boost::xpressive`。它匹配任何字符。如果您想匹配除换行符以外的任何字符，您可以使用`~_n`. 最后，如果您想匹配任何字符除了逻辑换行符（ `\r`、`\n`、和 Unicode 变体）之外的单个字符`\r\n`，您可以使用`~_ln`.

（编辑：修正错字）

# c# - c#中的日期时间格式问题

> ID：11276074
> 
> 赞同：0
> 
> 时间：2012-06-30T17:20:51.153
> 
> 标签：c#, asp.net, mysql, sql, c#-4.0

我正在使用 c# 在 asp.net 中工作，在编写 sql 简单插入查询时收到此错误 1292 无效日期格式，但它与实体框架工作正常，为什么它在 sql 插入查询中给出错误？对于使用 mysql 的数据库，列格式是日期时间格式。

SQL 代码

```
INSERT INTO `log`(`LogID`,`Time`,`Details`,`UserName`,`LogType`)
VALUES('0','6/30/2012 3:47:22 PM','testaaaa Deleted','admin','1'); 
```

对于实体框架

```
log.AddLog();
//Where log is table object name. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T18:53:12.730

当您直接使用 SQL 时，您希望使用`STR_TO_DATE`MySQL 来正确解释您的非标准日期/时间字符串。

```
STR_TO_DATE('6/30/2012 3:47:22 PM', '%m/%e/%Y %h:%i:%s %p') 
```

应该为您解决问题。因此，您的插入语句变为：

```
INSERT INTO `log`
  (`LogID`,
   `Time`,
   `Details`,`UserName`,`LogType`)
VALUES
  ('0',
   STR_TO_DATE('6/30/2012 3:47:22 PM', '%m/%e/%Y %h:%i:%s %p'),
  'testaaaa Deleted','admin','1') 
```

MySQL 实体框架代码知道如何将 Dotnet 日期转换为 MySQL 代码的适当格式。这就是它正常工作的原因。

%m %h 的小东西在这里显示：http: [//dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T17:34:01.627

很确定你必须以这种格式输入：YYYY-MM-DD HH:mm:SS

所以试试

```
INSERT INTO `log`(`LogID`,`Time`,`Details`,`UserName`,`LogType`)
VALUES('0','2012-06-30 15:47:22','testaaaa Deleted','admin','1'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-30T18:53:00.153

我认为......请检查表名......它不应该用单引号引起来......只有值应该用单引号......

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-30T17:37:34.193

日期时间字段接受不同的格式。我很确定您不能以您正在使用的格式使用 PM。您只能使用 4 PM、3 PM 等。尝试移除 PM 部分，看看是否适合您。

# javascript - AJAX 并不总是有效

> ID：11276079
> 
> 赞同：1
> 
> 时间：2012-06-30T17:22:09.577
> 
> 标签：javascript, ajax

嗨，我是新来的，我喜欢这个网站

我正在学习 javascript，到目前为止我已经完成了很多教程，但我无法让 ajax 工作。

我在 W3school 看到了这个

```
 var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","ajax_info.txt",true);
xmlhttp.send(); 
```

现在我将一行改为

`xmlhttp.open("GET","ajax_info.php?day="+document.getElementById("day").value,true);`

它应该基于一天而不是所有天来读取信息。

有时页面是空的，什么也没有发生，有时它可以工作并且一切都在那里。

要重现，您可以连续按 F5 3 次，它至少会失败一次。

请帮我保存我还有的最后一点头发！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:26:44.113

问题是由于脚本加载太快导致“day”元素还没有出现。

要解决此问题，您可以简单地添加一个事件处理程序来等待文档加载。

你可以这样做：`document.addEventListener("load", functionName, false);`然后创建一个函数来保存你粘贴在这里的代码。

该函数将在适当的时间调用并且它应该可以工作。

除此之外，我建议使用 jQuery 或 MooTools 之类的库，因为它使您的代码更容易在许多浏览器上运行。在您的代码中，您正在检查用户必须使用哪个浏览器来创建请求。

使用 jquery，您可以使用一行代码完成所有代码，如下所示：

```
$(document).ready(function(){   // Wait for the document to load
    $.get("http://www.website.com?day="+$("#day").val());   // $.get will create an ajax, $("#day") is equivalent to getting an element by Id
}); 
```

[您可以在http://www.jquery.com](http://www.jquery.com)了解更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:53:33.273

@Karmen，没有看到你的完整代码，所以不确定它可能失败的真正原因。[对于我在http://wp89.com/test/ajax/](http://wp89.com/test/ajax/)的测试页面， 我按 F5 刷新 10 次以上，但没有失败。

请记住，您每次都需要等待页面完全加载，因为连接可能很慢。

# objective-c - Xcode 4.3.3 Mapview，注释未显示

> ID：11276082
> 
> 赞同：0
> 
> 时间：2012-06-30T17:22:27.423
> 
> 标签：objective-c, annotations, mkmapview, mkannotationview

我的注释（homeMark）没有显示在 mapView 中。我在 IB 中做了我的 viewController 委托

由于某种原因在委托方法中 if ([annotation isKindOfClass:[HomeMark class]]) {

失败......注释不是“Homemark”类的一部分......

我究竟做错了什么 ？

代码...

```
- (IBAction)clubHouse:(id)sender{
    MKCoordinateRegion region = { {0.0, 0.0 } , {0.0,0.0} };
    region.center.latitude = 55.305858;
    region.center.longitude = 12.386036;

    CLLocationCoordinate2D coord = {
        .latitude = region.center.latitude, 
        .longitude = region.span.longitudeDelta};

    HomeMark *homeMark = [[HomeMark alloc] 
                          initWithCoordinate:coord 
                          andMarkTitle:@"Klubhus" 
                          andMarkSubTitle:@"Stevns Cykel Motion"];

    [mapMyView addAnnotation:homeMark];

    [mapMyView setMapType:MKMapTypeStandard];
    [mapMyView setZoomEnabled:YES];
    [mapMyView setScrollEnabled:YES];
    region.span.longitudeDelta = 0.007f;
    region.span.latitudeDelta = 0.007f;
    [mapMyView setRegion:region animated:YES];
    //[mapMyView setDelegate:sender];    
    mapMyView.showsUserLocation = YES;

} 
```

和 ViewForAnnotation。

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

    static NSString *identifier = @"MyLocation";
    if ([annotation isKindOfClass:[HomeMark class]]) {

        MKPinAnnotationView *annotationView = (MKPinAnnotationView *) [mapView dequeueReusableAnnotationViewWithIdentifier:identifier];
        if (annotationView == nil) {
            annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
        }
        else {
            annotationView.annotation = annotation;
        }

        annotationView.enabled = YES;
        annotationView.canShowCallout = YES;

        return annotationView;
    }

    return nil; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:01:34.967

看起来您指定的坐标不正确，因此注释不在您期望的位置。

而不是这个：

```
CLLocationCoordinate2D coord = {
    .latitude = region.center.latitude, 
    .longitude = region.span.longitudeDelta};  // <-- span doesn't make sense 
```

试试这个：

```
CLLocationCoordinate2D coord = {
    .latitude = region.center.latitude, 
    .longitude = region.center.longitude};  // <-- not span 
```

# android - 将 textview 放置在单击的 imageview 的顶部

> ID：11276083
> 
> 赞同：0
> 
> 时间：2012-06-30T17:22:47.233
> 
> 标签：android, layout, textview, imageview, add

有没有办法以编程方式添加并在用户点击的`TextView`旁边显示它？`ImageView`

我尝试了这样的事情，但没有结果，`TextView`被添加到我的布局底部：

```
TextView score = new TextView(getBaseContext());
score.setText("Image clicked");
Rect rectf = new Rect();
im.getLocalVisibleRect(rectf);
AbsoluteLayout.LayoutParams params = new AbsoluteLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT, 300, 270);
score.setLayoutParams(params);
layout.addView(score); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:28:03.480

首先，永远不要使用**AbsoluteLayout**，永远不要！通常不推荐使用 AbsoluteLayout，也不应该使用它。我建议你使用`RelativeLayout`，然后你只需要添加规则。

尝试使用以下代码片段：

```
relativeLayout = new RelativeLayout(this);
par = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT);
par.addRule(RelativeLayout.RIGHT_OF, imageView.getId());
relativeLayout.addView(score, par); 
```

# iphone - 在 iPhone 模拟器上读取本地文件崩溃，但不是在真实设备上

> ID：11276085
> 
> 赞同：5
> 
> 时间：2012-06-30T17:23:00.483
> 
> 标签：iphone, file, ios-simulator

我正在开发一个 iphone 应用程序，`UTF8Encoded`它从服务器下载文件，将其存储在应用程序的缓存文件夹中，然后简单地将其内容复制到`NSString* var`. 它适用于设备但不适用于模拟器，这里的代码：

```
NSLog(@"File loaded into path: %@\n", localPath);
NSError* error;
NSString* tmpString = [NSString stringWithContentsOfFile:localPath encoding:NSUTF8StringEncoding error:&error];
NSLog(@"Error: %@", error);
//Prints the length in the console to check if the file has been correctly copied in the string
NSLog(@"tmpString length:%u", [tmpString length]); 
```

在模拟器上，这部分代码打印：

```
File loaded into path: /Users/username/Library/Application Support/iPhone Simulator/5.1/Applications/4FCF8FC6-4F1B-4FE5-92F6-A99EC8888E47/Library/Caches/utf8encodedFile.txt 
```

但是当它调用“ `stringWithContentsOfFile:`”方法时它崩溃了，没有显示任何错误

在真实设备上一切正常，它打印：

```
File loaded into path: /var/mobile/Applications/1EE8AEEB-D036-4ADE-AE12-836BA1F16BCB/Library/Caches/utf8encodedFile.txt
2012-06-30 19:19:24.743 appName[685:707] 
Error: (null)
2012-06-30 19:19:24.745 appName[685:707] tmpString length:1423 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T11:40:40.847

您是否尝试过将文件的内容加载到一个中`NSData`，然后`NSString`用它创建一个？

```
NSData dataWithContentsOfFile: 
```

和`NSString`

```
- (id)initWithData:(NSData *)data encoding:(NSStringEncoding)encoding; 
```

# iphone - CATiledLayer 的背景图像

> ID：11276086
> 
> 赞同：3
> 
> 时间：2012-06-30T17:23:12.243
> 
> 标签：iphone, ios, catiledlayer

您可能知道，`CATiledLayer`用于通过以适合视图大小的比例显示平铺图像来显示大图像。

我的`CATiledLayer`工作类似于可以在 iOS 文档下找到的示例，我计算了`drawRect:(CGRect)`rect 在哪一行和哪一列试图绘制其内容。

当视图第一次出现时，它开始在空白视图上逐块绘制，该视图/图层后面没有任何内容。我首先尝试放置低分辨率图像以填充图层，然后开始绘制平铺视图。

就像您在浏览 PDF 页面时一样，每个页面最初都以非常差的图像表示，但足以看到内容布局，当您停在某个页面时，该页面会变得更加清晰。

我知道我可以在 catiledlayer 之上添加子图层，但我无法在 catiledlayer 后面放置任何图层，因为这是一个 masterlayer。我也相信在同一层上加载背景图像很重要，这样可以适当地缩放。

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:07:03.487

我终于弄清楚了这一点，并感谢关键评论。

你必须做的：

1.  使用函数 drawLayer:inContext: 中的所有动态加载逻辑创建 CATiledLayer 的子类 - 此函数类似于 drawRect: 在 View 中
2.  初始化新的子类 CATiledLayer
3.  用低分辨率图像初始化新的 CALayer
4.  创建新的 UIView *myView = [UIView ...] 或 UIImageView （取决于您的需要）
5.  将 myView.layer 中的两个图层作为 subLayer

* * *

```
UIView *imageView = [[UIView alloc] initWithFrame:viewFrame];

DCTiledLayer *tiledLayer = [[DCTiledLayer alloc] initWithData:myData];

CALayer *lowResLayer = [CALayer layer];
lowResLayer.position = CGPointMake(CGRectGetMidX(viewFrame), CGRectGetMidY(viewFrame));
lowResLayer.bounds = viewFrame;
lowResLayer.contents = (id)[lowResImage CGImage];

[imageView.layer addSublayer:lowResLayer];
[imageView.layer addSublayer:tiledLayer]; 
```

它就像一个魅力。:)

# java - 是否可以保存从 http 读取的 zip 文件并将其直接保存到 Databse 而无需在 java 中物理创建它

> ID：11276093
> 
> 赞同：2
> 
> 时间：2012-06-30T17:24:22.867
> 
> 标签：java, database, hibernate, url, zip

我正在从 url 读取 zip 文件，现在我想将它直接保存到数据库，而不是使用 java 和 hibernate 物理存储它。

我正在阅读 zip 文件，

```
 URLConnection  uCon = null;
    URL Url;
    byte[] buf;     
    ZipOutputStream outStream = new ZipOutputStream(new FileOutputStream("mytest.zip"));
    Url= new URL(http://xyz.com/pages/info.doc);
    uCon = Url.openConnection();
    is = uCon.getInputStream();
    buf = new byte[size];
    is = uCon.getInputStream();
    outStream.putNextEntry(new ZipEntry("info.doc"));
    while ((ByteRead = is.read(buf)) != -1) 
              {     
    outStream.write(buf, 0, ByteRead);
    ByteWritten += ByteRead;
    }
    is.close();
    outStream.close(); 
```

我不想在创建“mytest.zip”后物理保存它我想直接将它保存在数据库中？可能吗 ？怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:34:42.687

是的，这是可能的。写入 a`ByteArrayOutputStream`而不是写入 a `FileOutputStream`。使用 的`getBytes()`方法`ByteArrayOutputStream`在内存中获取字节数组，其中包含 zip 文件的字节。

创建一个准备好的语句，就像将任何类型的数据插入到数据库表中一样，并使用它的`setBinaryStream()`or`setBlob()`方法用字节数组的内容填充其中一个列。您只需要将`ByteArrayInputStream`（以字节数组作为参数构造）传递给这些方法之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T19:13:29.023

使用管道来保持低内存需求 - setBlob(colunm, InputStream) - 并使用 IOUtils.copy 进行快速复制。

```
 PipedOutputStream pipeOut = new PipedOutputStream();
    PipedInputStream pipeIn = new PipedInputStream(pipeOut);

    setBlob(pipeIn);

    ZipOutputStream zipOut = new ZipOutputStream(pipeOut, Charset.forName("UTF-8"));
    zipOut.putNextEntry(new ZipEntry("info.doc"));
    IOUtils.copy(sourceIn, zipOut); // org.apache.commons.io.IOUtils;
    zipOut.closeEntry();
    zipOut.close(); 
```

*这仍然没有`try`s，第二个线程会很好。*

# python - 使用 Python 映像库 (PIL) 时出现 Django MemoryError

> ID：11276095
> 
> 赞同：0
> 
> 时间：2012-06-30T17:24:26.690
> 
> 标签：python, django, python-imaging-library

添加具有 ImageField 的表单后，我的网站上出现 MemoryError。该代码在我的开发服务器（OS X 10.7.4）上运行良好，但在我的暂存环境（CentOS）中失败。

对于看起来类似的问题，我有点不愿意使用此处提出的解决方案：[Python ctypes MemoryError in fcgi process from PIL library](https://stackoverflow.com/questions/5914673/python-ctypes-memoryerror-in-fcgi-process-from-pil-library)。它改变了 python 本身——这似乎不利于长期维护。

我对如何调试这个有点一无所知...请帮助我治愈我的无知...

这是回溯：

```
Environment:

Request Method: POST
Request URL: http://myschoolzoneapp.eatechinc.com/debug/

Django Version: 1.4
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'accounts',
 'announcements',
 'api',
 'devices',
 'events',
 'menus',
 'organizations',
 'djangorestframework',
 'registration',
 'guardian',
 'south',
 'profiles')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'ischoolhub_project.middleware.ProcessMiddleware')

Traceback:
File "/tmp/egg-cache/Django-1.4-py2.7.egg/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/eatech/django/projects/ischoolhub-staging/ischoolhub_project/views.py" in debug
  22\.         if form.is_valid():
File "/tmp/egg-cache/Django-1.4-py2.7.egg/django/forms/forms.py" in is_valid
  124\.         return self.is_bound and not bool(self.errors)
File "/tmp/egg-cache/Django-1.4-py2.7.egg/django/forms/forms.py" in _get_errors
  115\.             self.full_clean()
File "/tmp/egg-cache/Django-1.4-py2.7.egg/django/forms/forms.py" in full_clean
  270\.         self._clean_fields()
File "/tmp/egg-cache/Django-1.4-py2.7.egg/django/forms/forms.py" in _clean_fields
  285\.                     value = field.clean(value, initial)
File "/tmp/egg-cache/Django-1.4-py2.7.egg/django/forms/fields.py" in clean
  535\.         return super(FileField, self).clean(data)
File "/tmp/egg-cache/Django-1.4-py2.7.egg/django/forms/fields.py" in clean
  153\.         value = self.to_python(value)
File "/tmp/egg-cache/Django-1.4-py2.7.egg/django/forms/fields.py" in to_python
  560\.             import Image
File "/tmp/egg-cache/PIL-1.1.7-py2.7-linux-i686.egg/Image.py" in <module>
  45\.     __import__("FixTk")
File "/usr/local/lib/python2.7/lib-tk/FixTk.py" in <module>
  15\.     import ctypes
File "/usr/local/lib/python2.7/ctypes/__init__.py" in <module>
  555\. _reset_cache()
File "/usr/local/lib/python2.7/ctypes/__init__.py" in _reset_cache
  279\.     CFUNCTYPE(c_int)(lambda: None)

Exception Type: MemoryError at /debug/
Exception Value: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:24:27.360

通过让 mod_wsgi 在用户 ID 下运行，使用[https://bugzilla.redhat.com/show_bug.cgi?id=717404](https://bugzilla.redhat.com/show_bug.cgi?id=717404)解决了这个问题。

# django - Django Tastypie，多对多保存错误

> ID：11276099
> 
> 赞同：2
> 
> 时间：2012-06-30T17:24:48.280
> 
> 标签：django, api, many-to-many, tastypie, django-orm

我通过tastepie api保存项目时遇到问题。（POST 方法）

这是我的 api.py 代码。

```
from tastypie.resources import ModelResource, ALL, ALL_WITH_RELATIONS
from tastypie.authorization import DjangoAuthorization
from tastypie.authentication import BasicAuthentication
from tastypie import fields
from apps.clients.models import Client
from django.contrib.auth.models import User

class ClientAPI(ModelResource):
    users = fields.ToManyField('apps.clients.api.ClientUserAPI', 'users',related_name='entry',full=True)

    class Meta:
        queryset = Client.objects.all()
        resource_name="clients"
        authentication = BasicAuthentication()
        authorization = DjangoAuthorization()
        filtering={
            "users":ALL
        }

    def hydrate_m2m(self,bundle):
        if bundle.data.get("users"):
            for user_id in bundle.data["users"]:
                new_user = User.objects.get(id=user_id)
                bundle.obj.users.add(new_user)

class ClientUserAPI(ModelResource):
    class Meta:
        queryset = User.objects.all()
        resource_name = 'users'
        fields = ['username', 'first_name', 'last_name', 'last_login']
        authentication = BasicAuthentication()
        authorization = DjangoAuthorization() 
```

当我发布数据时，保存成功，但给我错误。

```
{"error_message": "'NoneType' object has no attribute 'obj'", "traceback": "Traceback (most recent call last):\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 192, in wrapper\n response = callback(request, *args, **kwargs)\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 397, in dispatch_list\n return self.dispatch('list', request, **kwargs)\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 427, in dispatch\n response = method(request, **kwargs)\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 1165, in post_list\n updated_bundle = self.obj_create(bundle, request=request, **self.remove_api_resource_names(kwargs))\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 1784, in obj_create\n self.save_m2m(m2m_bundle)\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 1942, in save_m2m\n related_mngr = getattr(bundle.obj, field_object.attribute)\n\nAttributeError: 'NoneType' object has no attribute 'obj'\n"} 
```

当我将“return bundle”行添加到 hydrate_m2m 时，m2m 保存不成功（空白），仍然给我这样的错误。

```
{"error_message": "'str' object has no attribute 'obj'", "traceback": "Traceback (most recent call last):\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 192, in wrapper\n response = callback(request, *args, **kwargs)\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 397, in dispatch_list\n return self.dispatch('list', request, **kwargs)\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 427, in dispatch\n response = method(request, **kwargs)\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 1165, in post_list\n updated_bundle = self.obj_create(bundle, request=request, **self.remove_api_resource_names(kwargs))\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 1784, in obj_create\n self.save_m2m(m2m_bundle)\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 1951, in save_m2m\n related_bundle.obj.save()\n\nAttributeError: 'str' object has no attribute 'obj'\n"} 
```

当我从代码中删除 hydrate_m2m 时，返回错误是：

```
{"error_message": "The URL provided '1' was not a link to a valid resource.", "traceback": "Traceback (most recent call last):\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 192, in wrapper\n response = callback(request, *args, **kwargs)\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 397, in dispatch_list\n return self.dispatch('list', request, **kwargs)\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 427, in dispatch\n response = method(request, **kwargs)\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 1165, in post_list\n updated_bundle = self.obj_create(bundle, request=request, **self.remove_api_resource_names(kwargs))\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 1783, in obj_create\n m2m_bundle = self.hydrate_m2m(bundle)\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 743, in hydrate_m2m\n bundle.data[field_name] = field_object.hydrate_m2m(bundle)\n\n File \"/Library/Python/2.7/site-packages/tastypie/fields.py\", line 742, in hydrate_m2m\n m2m_hydrated.append(self.build_related_resource(value, **kwargs))\n\n File \"/Library/Python/2.7/site-packages/tastypie/fields.py\", line 588, in build_related_resource\n return self.resource_from_uri(self.fk_resource, value, **kwargs)\n\n File \"/Library/Python/2.7/site-packages/tastypie/fields.py\", line 522, in resource_from_uri\n obj = fk_resource.get_via_uri(uri, request=request)\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 636, in get_via_uri\n raise NotFound(\"The URL provided '%s' was not a link to a valid resource.\" % uri)\n\nNotFound: The URL provided '1' was not a link to a valid resource.\n"} 
```

我认为提供“1”的 URL 是用户 ID。

请告诉我。我做错了什么？

顺便说一句，我不太懂英语，对此感到抱歉。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T22:29:49.817

我很确定，您将用户资源发布为逗号分隔的 id。这不是tastepie 默认处理相关资源的方式。您应该发布一个指向相关资源的 url 列表，在您的情况下 - 类似“/api/v1/users/1”。

或者，您可以将 hydrate_m2m 更改为 hydrate_users。通用 hydra_m2m 遍历资源中的每个字段，并尝试将其从 url-string 转换为相关资源的实例（这就是您收到有关“提供的 URL”的错误的原因）。hydra_users 的代码可能如下所示：

```
def hydrate_users(self, bundle):
    try:
        user_ids = map(int, bundle.data.get('users', []))
    except ValueError:
        raise BadRequest("User ids must be ints") # from tastypie.exceptions
    bundle.data['users'] = User.objects.filter(id__in=user_ids)
    return bundle 
```

希望这可以帮助

**编辑：**删除 lambda 以支持`int`Carson 的建议

# django - 如何在 twitter-bootstrap 模式窗口中插入 django 表单？

> ID：11276100
> 
> 赞同：36
> 
> 时间：2012-06-30T17:24:51.230
> 
> 标签：django, forms, twitter-bootstrap, modal-dialog

有人在四月份问过完全相同的[问题，但没有任何答案。](https://stackoverflow.com/questions/9979622/how-do-i-insert-a-django-form-in-twitter-bootstrap-modal-window)但由于他提供的信息太少；这个问题被放弃了。

我也有同样的问题。在`main_page.html`我有这一行：

```
<a href="/contact/edit/{{ item.id }}" title="Edit">edit</a> 
```

单击此处后，编辑模板将出现在 twitter 引导模式中。

**网址.py**

```
(r'^contact/edit/(?P<contact_id>\d+)/$', contact_view), 
```

**视图.py**

```
def contact_view(request, contact_id=None):
    profile = request.user.get_profile()
    if contact_id is None:
        contact = Contact(company=profile.company)
        template_title = _(u'Add Contact')
    else:
        contact = get_object_or_404(profile.company.contact_set.all(), pk=contact_id)
        template_title = _(u'Edit Contact')
    if request.POST:
        if request.POST.get('cancel', None):
            return HttpResponseRedirect('/')
        form = ContactsForm(profile.company, request.POST, instance=contact)
        if form.is_valid():
            contact = form.save()
            return HttpResponseRedirect('/')
    else:
        form = ContactsForm(instance=contact, company=profile.company)
    variables = RequestContext(request, {'form':form, 'template_title': template_title})
    return render_to_response("contact.html", variables) 
```

这通常是**contact.html**的样子：

```
 <form class="well" method="post" action=".">
            {% csrf_token %}
            {{form.as_p}}
            <input class="btn btn-primary" type="submit" value="Save" />
            <input name="cancel" class="btn" type="submit" value="Cancel"/>
        </form> 
```

我可以把它放在一个`<div class="modal-body">`. 但是，我如何从视图中打开模态？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-30T17:48:00.060

除非您需要在模式之外使用联系表格，否则这应该适合您。如果您确实需要在其他地方使用它，请维护两个版本（一个是模态的，一个不是）。此外，一个提示 - 给[django-crispy-forms](https://github.com/maraujop/django-crispy-forms/)一个外观 - 它可以帮助您使用 twitter-bootstrap 类呈现表单。

联系人.html：

```
<div class="modal hide" id="contactModal">
<form class="well" method="post" action="/contact/edit/{{ item.id }}">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">×</button>
    <h3>Editing Contact</h3>
  </div>
  <div class="modal-body">
       {% csrf_token %}
       {{form.as_p}}
  </div>
  <div class="modal-footer">
       <input class="btn btn-primary" type="submit" value="Save" />
       <input name="cancel" class="btn" type="submit" value="Cancel"/>
  </div>
</form>
</div> 
```

main_page.html

```
<html>
...

<a data-toggle="modal" href="#contactModal">Edit Contact</a>

{% include "contact.html" %}

...
</html> 
```

**编辑：**

好的，既然我知道您可能有多个表单，那么将每个表单隐藏在 html 中呈现可能是个坏主意。您可能想要使用 ajax-y 版本，并按需加载每个表单。**我在这里假设在表单提交时，整个页面将重新加载。如果要异步提交表单，其他地方有答案**。

我们将从重新定义`contact.html`片段开始。它应该在模态中呈现，并包含与模态良好配合所需的所有标记。您最初拥有的`contact`视图很好 - 除了如果表单*无效*，您最终将呈现`contact.html`并且没有其他内容。

```
<form class="well contact-form" method="post" action="/contact/edit/{{ item.id }}">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">×</button>
    <h3>Editing Contact</h3>
  </div>
  <div class="modal-body">
       {% csrf_token %}
       {{form.as_p}} <!-- {{form|crispy}} if you use django-crispy-forms -->
  </div>
  <div class="modal-footer">
       <input class="btn btn-primary" type="submit" value="Save" />
       <input name="cancel" class="btn" type="submit" value="Cancel"/>
  </div>
</form> 
```

现在，您的`main_page.html`：

```
<html>
.. snip ..

<a class="contact" href="#" data-form="/contact/edit/{{ item.id }}" title="Edit">edit</a>
<a class="contact" href="#" data-form="/contact/edit/{{ item.id }}" title="Edit">edit</a>
<a class="contact" href="#" data-form="/contact/edit/{{ item.id }}" title="Edit">edit</a>

<div class="modal hide" id="contactModal">
</div>

<script>
    $(".contact").click(function(ev) { // for each edit contact url
        ev.preventDefault(); // prevent navigation
        var url = $(this).data("form"); // get the contact form url
        $("#contactModal").load(url, function() { // load the url into the modal
            $(this).modal('show'); // display the modal on url load
        });
        return false; // prevent the click propagation
    });

    $('.contact-form').live('submit', function() {
        $.ajax({ 
            type: $(this).attr('method'), 
            url: this.action, 
            data: $(this).serialize(),
            context: this,
            success: function(data, status) {
                $('#contactModal').html(data);
            }
        });
        return false;
    });
</script>

.. snip ..
</html> 
```

这一切都未经测试，但它应该为您提供一个开始/迭代的好地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T10:51:46.437

当我遇到这个帖子时，我遇到了同样的问题。我尝试了这个解决方案，但它并没有真正为我工作（但它给了我方向）。我想出了一个对我有用的解决方案，但是感觉很笨拙，我想收到一些关于如何做得更好的建议。

问题是一样的： Show a form inside twitter boostrap modal and django form (edit/add model for me using django generic form views)

所以我做了什么：

## main.html

```
<script type="text/javascript">
    function genericLoadDialog(form_selector, dialog_selector, matchString){
        $.ajax({
            url: $(form_selector).attr('action'),
            type: 'POST',
            data:  $(form_selector).serialize(),
            success: function(data, textStatus, jqXHR){
                if(data.match(matchString)){
                // We got errors in form
                    $(dialog_selector).html(data).modal('show');
                            return false;
                }
                        $(dialog_selector).modal('hide');
            },
        })
    }
</script>

<body>
<div class="modal hide" id="{{ editor_dialog_id }}"></div>
<a data-toggle="modal" href="#{{ editor_dialog_id }}" onclick="$('#{{ editor_dialog_id }}').load('/create/form');">Title</a>
<body> 
```

## 编辑器.html

```
<form id="{{ editor_form_id }}" action="{{ submit_url }}" method="POST">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h3>Modal header</h3>
    </div>
    <div class="modal-body" id="editor-dialog-body">
        {% if not form.is_valid %}
            <div class='hide'>invalid_form</div>
        {% endif %}
        {% csrf_token %}
        {{ form.as_p }}
    </div>
    <div class="modal-footer">
       <a href="#" class="btn" data-dismiss="modal">Cancel</a>
       <a href="#" data-toggle="modal" class="btn btn-primary" onclick="genericLoadDialog('#{{ editor_form_id }}', '#{{ editor_dialog_id }}', null, 'invalid_form');">Save</a>
    </div>
</form> 
```

所以流程是这样的：

*   单击标签将表单从创建表单 url 加载到模态 div
*   单击触发 genericLoadDialog 函数的模式（提交）中的保存按钮。此加载使用从表单收集的数据向创建表单 url 发出 POST 请求
*   如果表单无效，它会重新加载模态 html 并显示错误字段，否则关闭模态并且 django 应该保存/重定向（我在 django 表单视图中使用 get_success_url 方法，但由于某种原因对我不起作用。它确实保存了对象）

我对在 genericLoadDialog 中检查表单是否有效的方式感到不舒服，如果有人有更好的主意会很好。

# c# - 无法使用 C# 连接到 mysql 数据库

> ID：11276102
> 
> 赞同：1
> 
> 时间：2012-06-30T17:25:28.087
> 
> 标签：c#, mysql

我正在尝试连接到我的 mysql 数据库，但对我来说似乎没有任何效果。
我快疯了，我已经连续搜索了大约 3 个小时的互联网，但没有找到任何对我有用的东西。请问，谁能帮帮我？

这是我到目前为止的代码：

```
public bool tryLogin(string username, string password)
        {
            MySqlConnection con =
                new MySqlConnection("Server=159.253.0.3;Database=dbname;Uid=username;Pwd=password;"); // Removed the login info.
            MySqlCommand cmd =
                new MySqlCommand("SELECT * FROM login WHERE user_name = '" + username + "' AND user_pass = '" + password +
                                 "';");
            cmd.Connection = con;
            con.Open();
            MySqlDataReader reader = cmd.ExecuteReader();
            if (reader.Read())
            {
                if (reader.IsDBNull(0))
                {
                    cmd.Connection.Close();
                    reader.Dispose();
                    cmd.Dispose();
                    return false;
                }
                else
                {
                    cmd.Connection.Close();
                    reader.Dispose();
                    cmd.Dispose();
                    return true;
                }
            }
            else
            {
                return false;
            }
        } 
```

这是我不断收到的错误：

> 用户 'joeysft57_app'@'53569B33.cm-6-7c.dynamic.ziggo.nl' 的访问被拒绝（使用密码：是）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:37:14.850

看起来像权限问题（权利）..您可以通过将其与本地数据库连接来确认它..如果它与您的本地数据库一起使用，那么肯定是权限问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T17:37:35.143

我认为您的用户`joeysft57_app`无权从指定的计算机访问数据库。
您需要连接到数据库的管理员界面并授予所需的权限

```
GRANT USAGE ON *.* TO myAppUser@%  IDENTIFIED BY 'yourpass';
GRANT ALL PRIVILEGES ON serverdb.* to myAppUser@% 
```

或请数据库管理员为您执行此操作。

编辑：改变了一些东西，首先使用通配符`%`让用户从任何 PC 进行连接，然后定义了一个通用用户，该用户将在您的连接字符串中使用，因此您的用户使用相同的用户/密码连接所有用户。从安全的角度来看，这当然不是很好。但这是你的选择。

如果数据库位于运行应用程序的同一台机器上，那么您也可以使用该快捷方式`localhost`来代替。`%`（更安全）

# .net - 我可以强制 TabControl 的 TabPages 在它们被选中之前调整大小吗？

> ID：11276107
> 
> 赞同：2
> 
> 时间：2012-06-30T17:25:54.410
> 
> 标签：.net, winforms

我刚刚发现 TabPages 在被选中之前不会使用 TabControl 调整*大小*。这对我来说是一个大问题，因为我有一个固定在所有四个边缘上的面板，并且通过设置它的`Parent`属性在填充停靠到可调整大小的表单的 TabControl 上的几个页面中的两个页面之间共享。因此，如果我选择一个*从不*包含面板的选项卡，调整表单大小，然后选择一个*将*包含它但目前不包含的选项卡，则面板不会调整大小。

我发现填充对接面板而不是锚定它可以正常工作，但如果可能的话，我宁愿避免这种情况，因为共享面板不会延伸到页面的边缘并且它的大小可能会有所不同，所以我必须弄乱每个页面的填充大小，而不是简单地改变面板的大小。

我已经在 VB 和 C# 中对此进行了测试，它们的行为方式都相同。我认为为[这个已知错误](http://support.microsoft.com/kb/953934)提供的解决方案可能会奏效，但不幸的是它没有。

还有什么我可以做的，比如强制页面调整大小，来解决这个问题吗？

**编辑**- 在 VS 2010 中重现此内容的步骤：

*   将 TabControl 添加到可调整大小的表单，填充停靠并添加第三个选项卡。

*   将面板添加到第三个选项卡，在两侧留出足够的空间，将其锚定到所有四个边缘并将其背景颜色设置为与 tabPage 不同的颜色，以便您可以在运行时看到它。

*   将这行代码添加到`SelectedIndexChanged`事件中：

*VB*

```
If TabControl1.SelectedIndex > 0 Then Panel1.Parent = TabControl1.SelectedTab 
```

*C＃*

```
if (tabControl1.SelectedIndex > 0) panel1.Parent = tabControl1.SelectedTab; 
```

*   在选择第一个选项卡时运行/调试表单并调整其大小。

*   选择第二个选项卡——你会看到面板没有调整大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-06-03T12:45:46.657

我遇到了类似的问题，请参阅[C# Winforms Tabpage Size and ClientSize wrong](https://stackoverflow.com/q/56242122/2505186)：
我创建了一个`UserControl`包含`TabControl`. s上的内容`TabPage`是根据 的宽度排列的`TabPage`，但是查询到的 TabPage 的`Size`,只要 TabPage 至少没有显示一次就错了`ClientSize`。`DisplayRectangle.Size`正如您在问题中所写的那样，您已经发现了同样的问题。

**我尝试了什么，都没有成功：**

*   强制创建每个句柄`TabPage`
*   以编程方式选择每个`TabPage`
*   `visible = true`在每个设置`TabPage`
*   呼吁`PerformLayout`每个`TabPage`
*   其他一些我不再记得的东西

我什至试图找出 .net 在内部做了什么以及如何解决它以强制更新每个 TabPage，但我放弃了，因为它太复杂且耗时。

**最终奏效的方法：**
我的进一步分析是在我的函数中添加调试打印`UpdateLayout`（由 UC 的`Layout`事件调用），打印 TabControl 和每个 TabPage 的`Size`、`ClientSize`和`DisplayRectangle.Size`。突然间，我的 UC 表现得如愿以偿。
这些值的查询显然会触发一些更新 TabPages 的 .net 函数。进一步的测试表明，**在 UC 的事件中****查询就足够`TabControl.DisplayRectangle.Size``Layout`**了，因此您只需在代码中添加 1 行：

```
var oSize = i_oTabControl.DisplayRectangle.Size; 
```

并避免它可能被编译器优化掉：

```
[MethodImpl (MethodImplOptions.NoOptimization | MethodImplOptions.NoInlining)]
public static void TabControlForceUpdateOfTabpageSize (this TabControl i_oTabControl)
{
  if (i_oTabControl == null)
    return;
  var oSize = i_oTabControl.DisplayRectangle.Size;
} 
```

**我不得不承认它在你的情况下可能不起作用，因为我也看到它在另一个测试项目中失败了。我还在寻找原因。**

*注意：测试和开发是在 VS 2015 Update 3 中使用 .Net 4.6 完成的。解决方案已确认在调试和发布版本中工作。*

* * *

***编辑：***
我花了更多时间来测试我的解决方案。我还再次调试了.net源代码，最后发现那里大致发生了什么。

我的解决方案之所以奏效，是因为多种不同的原因：

1.  被`TabControl`放置在一个`UserControl`.
2.  使用`UserControl`的尺寸与设计时的尺寸不同。这会引发`Layout`UC 事件。
3.  大小变化发生在 中`InitializeComponent()`，这意味着 UC 还没有父级。
4.  分别`TabPage`我没有使用它自己的大小，而是 的大小`SelectedTab`，因为我已经发现不可见标签页的大小没有正确更新，并且所有 TabPages 具有相同的大小（`AutoScroll = false`）。
5.  标签页上的控件以编程方式放置，而不是通过锚定，使用所选标​​签页的大小（参见 4.）

工作原理如下：

*   目标是强制布局 the`TabControl`和 it's `TabPage`s。
*   仅当它实际上可见时才会这样做，请参阅 ScrollableControl.OnVisibleChanged()`。
*   只有 TabPage 或 TabControl 是可见的，如果它本身设置为可见并且所有父级都可见，请参阅`Control.GetVisibleCore()`。如果将控件添加到表单中，则表单在显示时变为可见，因此当表单的 ctor 运行时，控件是不可见的。但是如果控件还没有添加到窗体中，窗体的不可见性就变得无关紧要，因为它不是控件的父级。

现在你会说：“但是我的表单*是*可见的，所以它应该可以工作。”
嗯，是。在我的情况下，UserControl 被放置在另一个 TabControl 的未选中 TabPage 上，这意味着 UC 的父级不可见。但是当 UC 的大小发生变化时（参见 2\. 和 3.），UC 没有父级，并且 UC`Layout`事件中的解决方法可能会强制更新`TabControl`和 selected `TabPage`。如果解决方法甚至出现在the和 all的`Layout`事件中，那么所有标签页都有正确的大小值（至少在一些循环之后）。 `TabControl``TabPage`

解决方法也可以通过一个小技巧（经过测试）为您工作：
从其父级中删除 TabControl，循环浏览所有标签页，然后稍后将其添加回父级。

```
var oParent = tabctrlU.Parent;
oParent.Controls.Remove (tabctrlU);
var tabStart = tabctrlU.SelectedTab;
foreach (TabPage tab in tabctrlU.TabPages)
  tabctrlU.SelectedTab = tab;
tabctrlU.SelectedTab = tabStart;
oParent.Controls.Add (tabctrlU); 
```

这启用了强制更新。
但是：它不适用于将来在不可见选项卡上调整大小。现在，每次调整大小都会触发`Layout`事件，因此您可以在那里添加一些代码。实际上我不会每次都删除并重新添加选项卡控件，这将是愚蠢的。所以我不得不承认这个解决方案不太适用于你的情况。但是您（和其他人）现在有了一些如何处理它的想法。

正如您自己已经找到了解决方案：如果您不想将 移动`Panel1`到第一个 TabPage，您可以记住`Panel1`ctor 及其父 TabPage 的大小和位置，并`Panel1`根据（新）以编程方式调整大小选定的 TabPage 移动到该页面后的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:23:12.253

作为一种解决方法，Hans Passant 建议我将面板放在第一个 TabPage（隐藏）上，然后在事件处理程序中设置其 Visible 属性。正如我解释的那样，这*不太*行得通——因为它不仅仅是启动时的“一次性”问题；*每当*在选择非面板显示选项卡时调整表单大小时都会发生这种情况，然后选择当前不包含面板的面板显示选项卡 - 但它确实为我指明了正确的方向。也就是根据选中的选项卡来设置面板的Visible属性，不管面板是否显示在上面，***总是把面板移动到选中的选项卡上——EG：***

```
Private Sub TabControl1_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles TabControl1.SelectedIndexChanged
    Panel1.Visible = (TabControl1.SelectedTab Is TabPage2) OrElse (TabControl1.SelectedTab Is TabPage3)
    Panel1.Parent = TabControl1.SelectedTab
End Sub 
```

# ruby-on-rails - 查询 created_at 小时

> ID：11276108
> 
> 赞同：1
> 
> 时间：2012-06-30T17:25:54.383
> 
> 标签：ruby-on-rails

如何查询在特定时间创建的记录？我需要在数据库中为每条记录添加一个小时列吗？Ruby 将为 created_at.hour 返回一个不错的值，但我不能在如下查询中使用它：

```
results = Record.where("created_at.hour = ?", the_hour) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:48:47.920

尝试：

```
results = Record.where("hour(created_at) = ?", the_hour) 
```

您需要使用 MySQL`hour`函数从时间戳中提取小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:04:51.227

仅供其他人日后参考。

如果您碰巧使用 SQLite，其中`hour`无法使用从时间戳中提取小时的功能，请使用此解决方案。

```
def find_record_by_created_at_hour(certain_hour)
  Record.all.select {|record| record.created_at.hour == certain_hour }
end 
```

# android - Android.如何杀死应用程序？

> ID：11276109
> 
> 赞同：-2
> 
> 时间：2012-06-30T17:26:04.030
> 
> 标签：android

我试过了

```
public void onClick(View v) {
                        // TODO Auto-generated method stub
                        finish();
                        System.exit(0);
                    } 
```

在一个按钮 onClick 侦听器中，但它只会杀死当前的活动。我希望能够从应用程序中退出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:32:17.293

看看这个：

[退出应用程序不受欢迎吗？](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon)

Android 并不真正*希望*您退出应用程序，但您可以这样做：

> 简短的回答是，如果你想退出你的应用程序，你必须跟踪堆栈中的所有活动，并在用户想要退出时完​​成所有活动（不，没有办法迭代Activity 堆栈，因此您必须自己管理所有这些）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T17:28:38.933

Android 系统会处理这个问题。如果不引起 DVM 中的状态问题，您将无法做到这一点。您必须找到另一种方法来通过完全终止应用程序来完成您想要实现的任何目标。

# mysql - MATCH AGAINST mysql 查询未按预期工作

> ID：11276111
> 
> 赞同：0
> 
> 时间：2012-06-30T17:26:23.057
> 
> 标签：mysql

我正在尝试优化我网站上的搜索引擎。当前填充结果的 mySQL 查询工作正常，但实际上并不是那么好。例如，这些查询永远不会被选为搜索结果：“A&M”、“ESY”、“DVS”，尽管它们是数据库的一部分并存储在“名称”列中。但是，可以按预期找到诸如“存在”或“好莱坞设计”之类的搜索查询。

我想知道是否有办法修复下面的查询，以便更准确地填充结果，b/c 现在它遗漏了很多结果并且没有按预期工作。我很感激这方面的任何帮助。

这是我用来填充搜索结果的当前查询：

$results = mysql_query("SELECT keywords,name FROM files WHERE MATCH (keywords,name) AGAINST ('$searchfor')") or die(mysql_error());

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:40:11.860

我认为您的问题与mysql默认的字长限制有关。eg`A&M`不是一个词，而是两个（`&`被忽略）。通常，此限制 ( `ft_min_word_len`) 设置为 3。

在这个 mysql 手册中，您可以看到如何调整配置。设置`ft_min_word_len`为一： [http ://dev.mysql.com/doc/refman/5.5/en/fulltext-fine-tuning.html](http://dev.mysql.com/doc/refman/5.5/en/fulltext-fine-tuning.html)

重要的旁注：

*   你必须重新索引你的全文索引，否则你的搜索不会改变。
*   如果您使用庞大的数据集，请注意此更改可能会显着降低全文查询的速度。

# android - 是否可以使用 build.xml 将未压缩的特定文件添加到 Android APK？

> ID：11276112
> 
> 赞同：3
> 
> 时间：2012-06-30T17:26:32.187
> 
> 标签：android

有谁知道是否可以在使用 build.xml 的 ANT 构建过程中将未压缩的特定文件添加到 Android APK 文件中？我所有的文件都位于*assets*文件夹中并使用相同的扩展名。我确实意识到我可以对我不想添加压缩和指定的文件使用不同的扩展名，例如：

```
<nocompress extension="NoCompress" /> 
```

但这目前不是我的选择。

我尝试在*build.xml*的*package-resource*部分的 appt *package*步骤之后添加我自己的*aapt add*步骤：

 ***```
<exec executable="${aapt}" taskName="add">
<arg value="add" />
<arg value="-v" />
<arg value="${out.absolute.dir}/TestAndroid.ap_" />
<arg value="${asset.absolute.dir}/notcompressed.and" />
</exec> 
```

哪个确实将文件添加到了APK，但它被压缩了。:)

这是可能的还是唯一的方法是不同的扩展？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:33:47.780

看看[这里](http://ponystyle.com/blog/2010/03/26/dealing-with-asset-compression-in-android-apps/)

> 控制这种行为的唯一方法（在撰写本文时我发现）是在命令行上使用 -0（零）标志来适应。这个标志，在没有任何附带参数的情况下传递，将告诉 aapt 禁用所有类型资产的压缩。通常你不会想使用这个确切的选项，因为对于大多数资产来说，压缩是一个可取的事情。但是，有时您会拥有不想对其应用压缩的特定类型的资产（例如数据库）。在这种情况下，您有两个选择。
> 
> 首先，您可以在上面的列表中为您的资产文件提供扩展名。虽然这不一定有意义，但如果您不想在命令行上处理 aapt，这可能是一个简单的解决方法。另一个选项是将特定扩展名传递给 -0 标志，例如 -0 db，以禁用具有该扩展名的资产的压缩。如果需要解压缩多个类型，则可以多次传递 -0 标志，并且每次都使用单独的扩展名。
> 
> 目前，在 Eclipse 中使用 ADT 时无法将这些额外的标志传递给 aapt，因此如果您不想牺牲 GUI 工具的易用性，您将不得不使用第一个选项，并重命名你的文件的扩展名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-08T19:58:32.790

如果使用 gradle 构建，那么您似乎可以像这样提供 aapt 标志：

```
android {
    aaptOptions {
        noCompress 'foo', 'bar'
        ignoreAssetsPattern "!.svn:!.git:!.ds_store:!*.scc:.*:<dir>_*:!CVS:!thumbs.db:!picasa.ini:!*~"
    }
} 
```

[http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-aapt-options](http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-aapt-options)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T21:35:52.633

只是为这个提供关闭。

我认为不可能将单个文件标记为未压缩添加到 APK。

能够将单个文件标记为未压缩到*aapt*可能很有用。与添加*nocompress 文件*标签一样，例如：

```
<nocompress file="FileNoCompress.abc" /> 
```

:)***

# php - 从数据库中选择最后十个帖子？

> ID：11276114
> 
> 赞同：0
> 
> 时间：2012-06-30T17:26:49.700
> 
> 标签：php, mysql

所以我试图只从数据库中选择最后十个帖子。我有这个代码来选择一切：

```
$sql=mysql_query("SELECT * FROM posts ORDER BY PostID DESC");
while ($row = mysql_fetch_array($sql, MYSQL_BOTH)) {
    ....
} 
```

但是当我尝试使用此代码选择最后 10 个时：

```
$sql=mysql_query("SELECT TOP 10 * FROM posts ORDER BY PostID DESC");
while ($row = mysql_fetch_array($sql, MYSQL_BOTH)) {
    ....
} 
```

......它不起作用。

我收到此错误：mysql_fetch_array(): 提供的参数不是有效的 MySQL 结果资源

这是怎么回事？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T17:27:36.540

尝试这个：

```
$sql=mysql_query("SELECT * FROM posts ORDER BY PostID DESC LIMIT 0, 10"); 
```

# android - 安装应用程序时如何启动广播接收器？

> ID：11276118
> 
> 赞同：0
> 
> 时间：2012-06-30T17:27:09.233
> 
> 标签：android

我希望能够在从 Play 商店安装应用程序时立即激活广播接收器。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:44:13.603

> 我希望能够在从 Play 商店安装应用程序时立即激活广播接收器。做这个的最好方式是什么？

任何版本的 Android 都不支持此功能。而且，在 Android 3.1+ 上，您的任何`BroadcastReceiver`s 都不会运行，直到某些东西明确运行您的组件之一，例如用户从主屏幕的启动器启动您的活动。

# java - 字符和字符串之间的比较不像我期望的那样工作。我究竟做错了什么？

> ID：11276121
> 
> 赞同：0
> 
> 时间：2012-06-30T17:27:28.027
> 
> 标签：java, string, comparison, character, string-comparison

我正在尝试比较一个字符串和一个字符（在将其转换为字符串之后）。代码没有像我期望的那样工作。

```
package main;
import java.lang.Character;

public class Main {
    public static void main(String[] args) {
        char myChar = 'a';
        String myString = "a";
        if(myString == Character.toString(myChar)) {
            System.out.println("This SHOULD work! But it doesn't.");
        } else {
            System.out.println("This SHOULDN'T work! But it does.");
        }
    }
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T17:29:23.397

利用：

```
if(myString.equals(Character.toString(myChar))) 
```

代替：

```
if(myString == Character.toString(myChar)) 
```

* * *

`==`测试两个引用是否指向内存中的同一个对象，while`equals`方法检查两个引用是否指向同一个对象**或者**它们是否具有相同的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:33:05.850

为了比较字符串的相等性，我们使用 equals() 方法。java中有两种比较方式。一个是“==”运算符和另一个“equals()”方法。"==" 比较字符串对象的引用值，而 equals() 方法存在于 java.lang.Object 类中。此方法比较字符串对象的内容。.

因此，在您的情况下，如果“==”，最好使用 .equals() 代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T17:32:34.390

不要使用 == 运算符来比较字符串。虽然嵌入到源代码的字符串文字可以与此运算符进行比较，但此方法不适用于字符串对象，您可以动态获取。

这是因为 == 比较的是对象的引用，而不是对象的值。

使用`String.equals()`方法来比较字符串对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T19:50:01.103

字符串比较的一般规则：

*   `==`比较引用（如果您来自 C，则为某种指针）
*   `equals`比较内容。

在您的情况下，您将两个不同的引用与两个不同的对象进行比较，这就是为什么它会返回`false`您期望的位置`true`。对于字符串比较，始终使用`String.equals()`方法

# mongodb - 修复数据库命令

> ID：11276122
> 
> 赞同：0
> 
> 时间：2012-06-30T17:27:28.027
> 
> 标签：mongodb

如何`repairDatabase()`在数据库上运行？是像`Database1.repairDatabase()`在`mongod`还是只是`db.repairDatabase()`。我对这个命令的基本性质以及如何在特定数据库上调用它感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T18:22:59.810

```
use my_db
db.repairDatabase(); 
```

应该这样做。

如此处所述：http: [//docs.mongodb.org/manual/reference/commands/#repairDatabase](http://docs.mongodb.org/manual/reference/commands/#repairDatabase)

# asp.net-mvc - 身份不是使用 WIF 的 IClaimsIdentity（在 ASP.NET MVC 4 / Azure 上）

> ID：11276129
> 
> 赞同：4
> 
> 时间：2012-06-30T17:27:56.203
> 
> 标签：asp.net-mvc, azure, wif

我有 VS2012RC 的 WIF 工具，我正在尝试让我的 ASP.NET MVC 4 项目使用它们。我已经为 Microsoft.IdentityModel.dll 安装了[NuGet 包](https://nuget.org/packages/Microsoft.IdentityModel/3.5.0)。

MVC 项目是 Azure 项目的一部分，但我现在选择启动 MVC 项目。

目前，我选择了“本地开发测试 STS”（使用默认设置）。当我执行以下代码时（在我的 HomeController 索引视图中）：

```
<p>Authenticated: @User.Identity.IsAuthenticated</p>
<p>Name: @User.Identity.Name</p>
@{
    var identity = User.Identity as Microsoft.IdentityModel.Claims.IClaimsIdentity;
    if (identity == null)
    {
        <p>Error: no identity claims to process!</p>
    }
    else
    {
        <table>
            <tr>
                <th>Type</th><th>Value</th><th>Issuer</th><th>Original Issuer</th>
            </tr>
            @foreach (var claim in identity.Claims)
            {
                <tr>
                    <td>@claim.ClaimType</td><td>@claim.Value</td><td>@claim.Issuer</td><td>@claim.OriginalIssuer</td>
                </tr>
            }
        </table>
    }
} 
```

然后我得到这样的输出：

```
<p>Authenticated: True</p>
<p>Name: Terry</p>
<p>Error: no identity claims to process!</p> 
```

为什么没有收到索赔？

以下是 web.config 的相关部分：

```
<configSections>
  <section name="system.identityModel" type="System.IdentityModel.Configuration.SystemIdentityModelSection, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
  <section name="system.identityModel.services" type="System.IdentityModel.Services.Configuration.SystemIdentityModelServicesSection, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
</configSections>
<appSettings>
  <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  <add key="webpages:Version" value="2.0.0.0" />
  <add key="webpages:Enabled" value="false" />
  <add key="PreserveLoginUrl" value="true" />
  <add key="ida:FederationMetadataLocation" value="http://localhost:13340/wsFederationSTS/FederationMetadata/2007-06/FederationMetadata.xml" />
  <add key="ida:ProviderSelection" value="localSTS" />
</appSettings>
<location path="FederationMetadata">
  <system.web>
    <authorization>
      <allow users="*" />
    </authorization>
  </system.web>
</location>
<system.web>
  <authorization>
    <deny users="?" />
  </authorization>
  <authentication mode="None" />
  <profile defaultProvider="DefaultProfileProvider">
    <providers>
      <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
    </providers>
  </profile>
  <membership defaultProvider="DefaultMembershipProvider">
    <providers>
      <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
    </providers>
  </membership>
  <roleManager defaultProvider="DefaultRoleProvider">
    <providers>
      <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
    </providers>
  </roleManager>
  <sessionState mode="InProc" customProvider="DefaultSessionProvider">
    <providers>
      <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
    </providers>
  </sessionState>
</system.web>
<system.webServer>
  <validation validateIntegratedModeConfiguration="false" />
  <modules runAllManagedModulesForAllRequests="true">
    <add name="WSFederationAuthenticationModule" type="System.IdentityModel.Services.WSFederationAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="managedHandler" />
    <add name="SessionAuthenticationModule" type="System.IdentityModel.Services.SessionAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="managedHandler" />
  </modules>
</system.webServer>
<system.identityModel>
  <identityConfiguration>
    <audienceUris>
      <add value="http://localhost:50332/" />
    </audienceUris>
    <issuerNameRegistry type="System.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <trustedIssuers>
        <add thumbprint="9B74CB2F320F7AAFC156E1252270B1DC01EF40D0" name="LocalSTS" />
        <add thumbprint="C00C014CA49559426B6D70162C2D89689E9397FF" name="https://nitoprograms-0.accesscontrol.windows.net/" />
      </trustedIssuers>
    </issuerNameRegistry>
    <certificateValidation certificateValidationMode="None" />
  </identityConfiguration>
</system.identityModel>
<system.identityModel.services>
  <federationConfiguration>
    <cookieHandler requireSsl="false" />
    <wsFederation passiveRedirectEnabled="true" issuer="http://localhost:13340/wsFederationSTS/Issue" realm="http://localhost:50332/" reply="http://localhost:50332/" requireHttps="false" />
  </federationConfiguration>
</system.identityModel.services> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T20:50:21.270

在本地运行时（在 Windows 8 Release Preview 机器上），以下代码*确实*有效：

```
<p>Authenticated: @User.Identity.IsAuthenticated</p>
<p>Name: @User.Identity.Name</p>
@{
    dynamic identity = User.Identity;
    <table>
        <tr>
            <th>Type</th><th>Value</th><th>Issuer</th><th>Original Issuer</th>
        </tr>
        @foreach (var claim in identity.Claims)
        {
            <tr>
                <td>@claim.Type</td><td>@claim.Value</td><td>@claim.Issuer</td><td>@claim.OriginalIssuer</td>
            </tr>
        }
    </table>
} 
```

这让我相信 VS2012RC 的 WIF 工具仅支持 .NET 4.5 作为目标。

在本地运行时，实际运行时是 .NET 4.5，它具有与 WIF 相关的核心标识更改（比较[.NET 4.0](http://msdn.microsoft.com/en-us/library/ee748503)的[此图与 .NET 4.5](http://msdn.microsoft.com/en-us/library/hh873304%28v=vs.110%29)的此图）。因此，通过使用`dynamic`（并更改`ClaimType`为`Type`），我可以在本地访问 .NET 4.5 WIF 运行时（即使项目以 .NET 4.0 为目标）。

我尝试部署到云端，但应用程序抱怨找不到`System.IdentityModel.Services.dll`（因为 Azure 目前只使用 .NET 4.0）。对我来说没什么大不了的，因为我不打算在 .NET 4.5 发布之前进行部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T22:00:33.453

我认为您在“经典”模式下缺少 ASP.NET 配置中的 WIF 模块（不确定您是如何运行应用程序的）。尝试添加这些：

```
 <system.web>
    <httpModules>
          <add name="WSFederationAuthenticationModule" type="Microsoft.IdentityModel.Web.WSFederationAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
          <add name="SessionAuthenticationModule" type="Microsoft.IdentityModel.Web.SessionAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    </httpModules>...
 </system.web> 
```

有关经典和集成模式下的 HTTP 模块的更多详细信息，请参见此处：http: [//msdn.microsoft.com/en-us/library/ms227673.aspx](http://msdn.microsoft.com/en-us/library/ms227673.aspx)

# intellij-idea - Intellij 有没有办法只快速预览用户实时模板？

> ID：11276132
> 
> 赞同：0
> 
> 时间：2012-06-30T17:28:09.780
> 
> 标签：intellij-idea

我有一堆我创建的实时模板。有时我不记得我使用的缩写，我想快速预览所有“用户定义”的实时模板。有没有办法做到这一点？类似于下面显示的内容，但没有输入前几个字符。

![在此处输入图像描述](../Images/b44e780023cbf4305d03d1799f59065f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:22:41.970

现在您可以转到设置并查看它们。[http://youtrack.jetbrains.com/issue/IDEA-84705](http://youtrack.jetbrains.com/issue/IDEA-84705)可以让它们更容易区分。如果您有任何其他想法，您可以自己将它们提交给跟踪器。

# java - YuiCompressorTask：“找不到基本名称 org.mozilla.javascript.resources.Messages 的包，语言环境 en_US”

> ID：11276135
> 
> 赞同：14
> 
> 时间：2012-06-30T17:28:38.857
> 
> 标签：java, yui, rhino

我已经在我的项目中使用 YuiCompressorTask（最新版本）很长时间了，没有任何问题。在 OSX 上升级到 Oracle 的 Java 1.7 包后，它会因以下异常而中断（这是针对 javascript 文件；它适用于 css 文件）：

```
[yuiCompress] java.lang.reflect.InvocationTargetException
[yuiCompress]   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[yuiCompress]   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
[yuiCompress]   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[yuiCompress]   at java.lang.reflect.Method.invoke(Method.java:601)
[yuiCompress]   at com.yahoo.platform.yui.compressor.Bootstrap.main(Bootstrap.java:21)
[yuiCompress]   at ww.ant.YuiCompressorTask.execute(YuiCompressorTask.java:40)
[yuiCompress]   at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[yuiCompress]   at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
[yuiCompress]   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[yuiCompress]   at java.lang.reflect.Method.invoke(Method.java:601)
[yuiCompress]   at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[yuiCompress]   at org.apache.tools.ant.Task.perform(Task.java:348)
[yuiCompress]   at org.apache.tools.ant.Target.execute(Target.java:390)
[yuiCompress]   at org.apache.tools.ant.Target.performTasks(Target.java:411)
[yuiCompress]   at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
[yuiCompress]   at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
[yuiCompress]   at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
[yuiCompress]   at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
[yuiCompress]   at org.apache.tools.ant.Main.runBuild(Main.java:809)
[yuiCompress]   at org.apache.tools.ant.Main.startAnt(Main.java:217)
[yuiCompress]   at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
[yuiCompress]   at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
[yuiCompress] Caused by: java.util.MissingResourceException: Can't find bundle for base name org.mozilla.javascript.resources.Messages, locale en_US
[yuiCompress]   at java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1499)
[yuiCompress]   at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1322)
[yuiCompress]   at java.util.ResourceBundle.getBundle(ResourceBundle.java:796)
[yuiCompress]   at org.mozilla.javascript.ScriptRuntime.getMessage(ScriptRuntime.java:3316)
[yuiCompress]   at org.mozilla.javascript.ScriptRuntime.getMessage0(ScriptRuntime.java:3273)
[yuiCompress]   at org.mozilla.javascript.Parser.addError(Parser.java:121)
[yuiCompress]   at org.mozilla.javascript.TokenStream.getToken(TokenStream.java:773)
[yuiCompress]   at org.mozilla.javascript.Parser.peekToken(Parser.java:161)
[yuiCompress]   at org.mozilla.javascript.Parser.parse(Parser.java:361)
[yuiCompress]   at org.mozilla.javascript.Parser.parse(Parser.java:337)
[yuiCompress]   at com.yahoo.platform.yui.compressor.JavaScriptCompressor.parse(JavaScriptCompressor.java:312)
[yuiCompress]   at com.yahoo.platform.yui.compressor.JavaScriptCompressor.<init>(JavaScriptCompressor.java:533)
[yuiCompress]   at com.yahoo.platform.yui.compressor.YUICompressor.main(YUICompressor.java:131)
[yuiCompress]   ... 22 more 
```

我可以切换回 Apple 的 Java 1.6，它运行良好。我的问题是，有没有办法解决这个问题？我真的不能再继续1.6了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T11:56:36.480

一个有点老的问题，但我今天遇到了同样的错误。

在我的情况下，问题是我的 JavaScript 中的语法错误，我在剪切和粘贴操作后忘记了一个 }。

我使用这个在线工具（[http://refresh-sf.com/](http://refresh-sf.com/)）来压缩js文件，它返回了一些奇怪的错误，但比java异常堆栈更有用......

希望这有助于...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T16:45:27.287

我决定改用 Google Closure Compiler，放弃我多年来使用的最后一个 YUI 组件。我在构建日志中收到大量警告，但它确实有效。*叹*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-12T11:32:19.273

真的很老的问题，但是如果有人仍在使用 yui-compress 我有同样的错误，结果 yui-compress 不喜欢在函数调用中的参数后尾随逗号。例如：

```
foo(a, b, c); 
```

可以，但是

```
foo(a, b, c,); 
```

不是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-29T18:05:54.360

老问题，但我不得不对我的其他发现发表评论。

它不支持用 let 定义变量。

今天有一个新发现，它不允许使用具有默认值的参数定义函数

就我而言，我不得不改变

函数转换日期（输入格式，类型=1）

至

函数转换日期（输入格式，类型）{

如果（类型（类型）===“未定义”）
类型=1；

作为查找失败原因的提示，最好的方法是克隆您正在使用的 javascript，然后开始一个新的空白，然后添加块，直到找到哪个产生错误。

# sql - 得到错误 SQLCODE=-10, SQLSTATE=42603, SQLERRMC='),

> ID：11276138
> 
> 赞同：0
> 
> 时间：2012-06-30T17:29:06.140
> 
> 标签：sql, database, db2

在 java 脚本中执行以下查询

```
String sql = "insert into personal values('"+models.getResourceId()+"','"+models.getFname()+"','"+models.getMname()+"','"+models.getLname()+"','"+models.getGender()+"','"+models.getDob()+"','"+models.getFthname()+"','"+models.getEmail()+"','"+models.getMobile_no()+"')"; 
```

我不知道要纠正什么。

**查询在 DB2 中**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:34:57.597

您应该使用参数绑定。把它放在一起后给我们整个sql。您可能 `'`在其他变量之一中使用了 a 并且没有逃脱该变量。

您确定您使用 javascript 来访问数据库吗？我不知道这样的驱动程序/可能性。对我来说，javascript 知道像`String`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:14:30.097

根据文档，“该语句包含一个未正确终止的字符串常量”请关注[http://lasanthals.blogspot.com/2012/09/db2-error-codes.html](http://lasanthals.blogspot.com/2012/09/db2-error-codes.html)了解更多详情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-28T12:55:01.957

输入值包含可能包含单引号，例如：'RPG's'

# java - 在图库中的图像之间插入一个按钮 - Android

> ID：11276143
> 
> 赞同：1
> 
> 时间：2012-06-30T17:30:03.393
> 
> 标签：java, android, image, android-gallery

我需要在图像间距、按钮之间插入画廊。有可能这样做吗？如果是这样，我想知道如何实现它，如果不是，我想知道另一种解决方案（除了使用画廊）。

**谢谢！**

# ajax - 尝试通过 Drupal 中的 ajax 接收 json 数据时的 Parseerror 响应

> ID：11276157
> 
> 赞同：0
> 
> 时间：2012-06-30T17:32:06.073
> 
> 标签：ajax, jquery, drupal-6, parse-error

我正在尝试通过 Drupal 中的 ajax 接收节点表单。

通常我应该创建一个啊触发按钮，它可以很好地显示和显示 json 数据。我这样做是为了测试，它与下面的 php 代码配合得非常好。

但我需要的是用javascript动态创建自定义ahah触发链接。而这些自定义链接的作用就像啊啊按钮，并调用带来节点表单的回调函数。

在服务器端，发送 json 数据的回调函数是这样的：

```
function get_lesson_form($nid) {
    global $user;  

    $node = array('uid' => $user->uid, 'name' => $user->name, 'type' => 'lesson');
    $form_id = 'lesson_node_form';

    // Initialize settings:
    $file = drupal_get_path('module', 'node') . '/node.pages.inc';
    include_once './' . $file;

    $rendered_form = drupal_get_form($form_id,$node);
    $javascript = drupal_add_js(NULL, NULL);

    drupal_json(array(
        'status'   => TRUE,
        'data'     => $rendered_form,
        'settings' => call_user_func_array('array_merge_recursive',$javascript['setting']),
        )
    );
} 
```

我看了一点 Drupal 的 ahah.js 是如何处理检索和显示 json 内容的，我在下面创建了一个 ajax 调用，它只需要 tha json 数据并附加它。

```
$.ajax({
    url : '/fcrp_form/nid',
    success : function(response) {
        console.log(response);

        var form = Drupal.parseJson(response);
        var target_wrapper = $('#event-edit-container');
        var new_content = $('<div></div>').html(form);

        target_wrapper.empty().append(new_content);
        Drupal.attachBehaviors($('#event-edit-container'));
    },
    error : function(response, error) {           
        console.log(response);
        console.log('Error: '+ error);
    },
    type: 'POST',
    dataType: 'json',
}); 
```

问题是我总是收到一条*parseerror*消息，并且响应对象就像一团糟。我无法成功带入 json 数据，也不知道这个错误是如何发生的。

注意：当 $data 有 html 代码时会发生这种情况。如果它有纯文本，它不会返回任何错误。

此外，当我使用普通的 ahah 按钮（Drupal 方式）进行测试时，使用了 jquery 版本 1.3.2，但在我的情况下，我使用的是 1.7.2 版本。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T08:28:49.887

鉴于您正在调用 drupal_json，而不是 drupal_json_output，您是否正在尝试在 Drupal 6 中执行此操作？

您会发现 Drupal 7 中的 AJAX/AHAH 框架使它变得容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T21:27:58.643

抱歉回复晚了。是的，我使用了 Drupal 6。

最后，问题原来是 jQuery 的不同版本。所以我使用`jQuery.noConflict()`了，一切似乎都很好。

# actionscript-3 - Flash 是否有任何 AAC 编码器？也许炼金术？

> ID：11276161
> 
> 赞同：0
> 
> 时间：2012-06-30T17:32:25.747
> 
> 标签：actionscript-3, flash

我想在客户端使用 AAC 编解码器对 Flash 录制的音频进行编码。（音频少于 10 秒）

有谁知道任何可以做到这一点的 AS3 或 Alchemy 库？

什么可能是解决方法？Java小程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T11:35:13.780

可能从 Java 移植：http: [//sourceforge.net/projects/jaadec/files/0.8.4/](http://sourceforge.net/projects/jaadec/files/0.8.4/)将是最简单的选择，因为语言相似。如果您考虑将 Java 小程序与 Flash 一起使用，那么我预计编组费用会太高，无法使来回发送声音样本成为可行的想法。

还值得注意的是，虽然该格式有许多免费/开源实现，但它是一项专利技术。我不确定使用的法律条款，但也可以检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:24:20.417

不，没有，我使用了 FAAC/FAAD2，对 Alchemy 进行了细微的改动。

# iphone - 优秀的 UITableView 设计图库

> ID：11276164
> 
> 赞同：26
> 
> 时间：2012-06-30T17:32:45.207
> 
> 标签：iphone, ios, uitableview

UITableView 有很多自定义选项和很多网站来解释每个选项。有没有一个网站可以展示看起来不错的完整圆形设计并展示如何做到这一点？我对用于说明如何完成定制的教程不感兴趣，我正在寻找一个展示我可以复制或开始的优秀设计的画廊。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-30T17:35:18.287

对于这类事情，我总是推荐 Cocoa Controls

[http://www.cocoacontrols.com/search?q=UITableView](http://www.cocoacontrols.com/search?q=UITableView)

# sql-server - 如何安装 SQL Server Management Studio 2012 (SSMS) Express？

> ID：11276167
> 
> 赞同：92
> 
> 时间：2012-06-30T17:33:22.230
> 
> 标签：sql-server, database, installation, ssms

我刚刚安装了**SQL Server 2012 Express**，我可以从**`VS2012RC`**.

数据库正在工作:) 我使用**`Win7 SP1 64bit`**.

我从我选择**[的页面下载程序](http://www.microsoft.com/en-us/download/details.aspx?id=29062)**`ENU\x64\SQLManagementStudio_x64_ENU.exe`

我想安装**Management Studio 2012**，但解压安装程序停止后。我只看到一些控制台应用程序。

1.  可能是什么原因？
2.  我在哪里可以找到任何日志文件？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-07-01T00:56:25.163

您需要安装[ENU\x64\SQLEXPRWT_x64_ENU.exe](http://www.microsoft.com/en-us/download/details.aspx?id=29062)，它是 Express with Tools（RTM 版本。SP1 版本可在[此处](http://www.microsoft.com/en-us/sqlserver/editions/2012-editions/express.aspx)找到）。

正如页面所述

> Express with Tools (with LocalDB) 包括数据库引擎和 SQL Server Management Studio Express) 此软件包包含将 SQL Server 安装和配置为数据库服务器所需的一切。根据上述需求选择 LocalDB 或 Express。

所以安装它并使用它附带的管理工作室。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-03-04T15:09:26.583

当我安装：ENU\x64\SQLManagementStudio_x64_ENU.exe

我必须选择以下选项来获取管理工具：

1.  “新的 SQL Server 独立安装或向现有安装添加功能。”
2.  “向现有 SQL Server 2012 实例添加功能”
3.  接受许可。
4.  选中“管理工具 - 基本”复选框。
5.  安装时请等待很长时间。

完成后，我的开始菜单中有一个“SQL Server Management Studio”选项。

在“开始”菜单中搜索“管理”会更快。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-08-29T22:36:55.323

您可以从以下位置下载 32 位或 64 位版本的“Express With Tools”或“SQL Server Management Studio Express”（仅限 SSMSE 工具）：

[https://web.archive.org/web/20170507040411/https://www.microsoft.com/betaexperience/pd/SQLEXPNOCTAV2/enus/default.aspx](https://web.archive.org/web/20170507040411/https://www.microsoft.com/betaexperience/pd/SQLEXPNOCTAV2/enus/default.aspx)

此链接适用于 2012 年 11 月 9 日发布的 SQL Server 2012 Express Service Pack 1 (11.0.3000.00) 原始 RTM 版本是 2012 年 3 月或 5 月的 11.0.2100.60。

![在此处输入图像描述](../Images/b882838da1c4ecc15e0f2a422b4e8e47.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-15T18:35:07.277

晚上好，

之前获得 SQLManagementStudio_x64_ENU.exe 运行的线索并没有像我所说的那样工作。经过一段时间的搜索，尝试，一次又一次的重试，我终于弄明白了。在我的 Windows 7 系统上执行 SQLManagementStudio_x64_ENU.exe 时，我一直遇到兼容性问题。诀窍是在与 Windows XP SP2 的兼容模式下运行 SQLManagementStudio_x64_ENU.exe。编辑安装程序属性并启用与 XP（服务包 2）的兼容模式，然后您将能够访问 Mr Doug（3 月 4 日 15:09 回答）分辨率。

干杯。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-01-18T01:26:17.077

安装 MSSQL 2012 MS SQL INSTALLATION 的最简单方法

在这里，我展示了安装 ms sql 2012 的最简单方法。

我的意见是使用 windows 8.1 而不是 windows 7 安装会更容易。

这只是我个人的看法。

我们也可以安装在 Windows 7 中。

应遵循的步骤：

使用以下 URL 下载任一链接

[http://www.microsoft.com/en-us/download/details.aspx?id=43351](http://www.microsoft.com/en-us/download/details.aspx?id=43351)

SQLEXPRWT_x86_ENU.exe 或 SQLEXPRWT_x64_ENU.exe

[http://www.microsoft.com/en-us/download/details.aspx?id=42299](http://www.microsoft.com/en-us/download/details.aspx?id=42299)

SQLEXPRWT_x86_ENU.exe 或 SQLEXPRWT_x64_ENU.exe

右键单击.exe文件并运行它

我们应该在安装时保持一切默认。

在安装过程中，将有 2 个选项：

1）如果您是新用户，则单击新的 sql-server 独立应用程序。

2）如果您已经有 MS SQL 应用程序，那么您可以使用其他选项进行升级。

然后接受许可条款并单击下一步。

现在您将转到产品更新，然后按下一步，然后按设置支持规则。

在此功能选择之后。根据我的说法，我们可以选中除 localdb 之外的所有框。

接下来，它将带您到实例配置，您应该在其中选择命名实例作为

“SQLEXPRESS”。

然后转到服务器配置并按下一步。

现在数据库引擎配置：

认证方式：我们可以点击任何一种是windows认证方式或混合方式。

Windows 身份验证模式（Windows 的默认设置）。

混合认证模式：则应创建用户名和密码。

然后继续错误报告，我们可以通过单击下一步来进一步安装过程。

最后，我们可以通过显示添加的产品来查看 Complete 窗口。

我们可以关闭并运行 MSSQL 服务器。

我希望它有用。

问候

拉姆亚

# c# - C#，.As 参考什么 （） 方法？

> ID：11276175
> 
> 赞同：0
> 
> 时间：2012-06-30T17:34:29.680
> 
> 标签：c#, linq

在[这篇 RavenDB 帖子](http://ayende.com/blog/152833/orders-search-in-ravendb)中，Ayende 使用`.As`调用将数据“推送”到索引模型中。在我的代码中尝试同样的事情，但它似乎不是标准的 LINQ 扩展方法？

我必须使用什么使用或参考来访问 .As() ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:48:51.090

看源码，是在`Raven.Client.Linq`命名空间的 LinqExtensions.cs 中定义的。

# android - 即使在应用程序启动后，Android SMS 接收器也无法在 ICS 中工作

> ID：11276179
> 
> 赞同：1
> 
> 时间：2012-06-30T17:34:45.440
> 
> 标签：android, broadcastreceiver, android-4.0-ice-cream-sandwich

起初这可能看起来像一个重复的问题，但是我知道 Android 3.1 中的[更改](http://developer.android.com/about/versions/android-3.1.html#launchcontrols)要求应用程序开始接收广播和这个相关的[问题](https://stackoverflow.com/questions/8319987/sms-received-not-working-on-ice-cream-sandwich?rq=1)。也许这是我没有看到的男生错误。但这适用于 Android 2.3，并且**其他接收器正在工作**（即 android.net.wifi.SCAN_RESULTS）。在 Android 4.0.4 上，Galaxy Nexus。

我正在尝试在 ICS 上使用的功能：安装 > 启动 > 如果没有用户详细信息通过短信应用发送文本 > SmsReceiver 检查传入的回复并填充登录详细信息（保存用户复制和粘贴）

我错过了什么？

显现

```
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:hardwareAccelerated="true"
    >

    <receiver
        android:name="com.myapp.android.receivers.SmsParserReceiver"
        android:enabled="true" android:exported="true"
        >
        <intent-filter android:priority="3000">
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver> 
```

接收者：

```
package com.myapp.android.receivers;
public class SmsParserReceiver extends BroadcastReceiver
{

    public SmsParserReceiver()
    {
        QLog.i("SmsParserReceiver created");
    }

    @Override
    public void onReceive(Context context, Intent intent)
    {
        QLog.i("Smsintent recieved: " + intent.getAction());
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T08:39:07.267

在测试了几个设备后，模拟器得出了与@commonsware 和@Tom 相同的结论，另一个应用程序（在原始测试用例 GoSMS 中）正在拦截广播并中止它。

# android - ImageSwitcher 在前 2 个图像切换后没有动画

> ID：11276181
> 
> 赞同：1
> 
> 时间：2012-06-30T17:34:52.397
> 
> 标签：android, animation, imageswitcher

我正在使用 Android 鲜为人知的[ImageSwitcher](http://developer.android.com/reference/android/widget/ImageSwitcher.html "图像切换器")为 ImageView 中的图像更改设置动画。目前，有 2 个图像（默认和“ok”图像）在某些事件（所有事件都发生在主线程上）上打开 - 第一个图像淡出，而第二个图像淡入。这就是 ImageSwitcher 应该如何工作.

前 2 个动画（从默认到“ok”然后回到默认）淡出就好了。然后，突然之间，图像不再从一个褪色到另一个，但视图立即切换到第二个图像，并且动画与第二个图像的两个叠加版本混淆（这些图像是半透明的黑色，我可以看到第二张图像如何从几乎全黑变回正常）。

切换是这样实现的：

```
// Initialization in onCreate():
mRefreshImageSwitcher = (ImageSwitcher) findViewById(R.id.main_refresh);
mRefreshImageSwitcher.setFactory(new RefreshButtonViewFactory());
mRefreshImageSwitcher.setImageResource(R.drawable.refresh);

// ...

    mRefreshImageSwitcher.setInAnimation(getFadeAnimation(true, 300));
    mRefreshImageSwitcher.setOutAnimation(getFadeAnimation(false, 300)); 
    mRefreshImageSwitcher.setImageResource(R.drawable.refresh_ok);

// ...

private Animation getFadeAnimation(boolean in, long durationMillis) {
    Animation a = AnimationUtils.loadAnimation(this, in ? android.R.anim.fade_in : android.R.anim.fade_out);
    a.setDuration(durationMillis);
    return a;
} 
```

或者，我尝试始终使用相同的动画对象，但这并没有改变任何东西。

是否有可能多次设置相同的图像以某种方式弄乱 ImageSwitcher？还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:42:10.753

您不是在写如何更改事件中的图像，但一件事是确保您使用的`mRefreshImageSwitcher.setImageResource()`不是`mRefreshImageSwitcher.setBackgroundResource()`设置背景不会播放动画

# javascript - jQuery中的纺车

> ID：11276184
> 
> 赞同：2
> 
> 时间：2012-06-30T17:35:04.240
> 
> 标签：javascript, jquery, settimeout

我正在使用以下代码来显示一个纺车：

```
$("#loading")
.hide()
.ajaxStart(function(){

    $(this).show();
    setTimeout("3000");
})
.ajaxStop(function(){

    $(this).hide("slow");
})
; 
```

和：

```
<div id="loading">
            <img src="loading.gif" alt="Loading" />
</div> 
```

问题：“setTimeout() 不起作用。如何在网页中心显示图像？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:41:29.977

`setTimeout`需要 2 个参数，第一个是`callback`函数，第二个是`timeout`毫秒，例如。

```
setTimeout(funcname,1000); 
```

或者

```
setTimeout(function(){
    //do stuff
},1000); 
```

在网页中心显示您的图像，您可以使用例如。这种技术

```
#loading {
    position:absolute;
    top:50%;
    left:50%;
    width:100px;
    margin-left:-50px; //negative half of width
    height:80px;
    margin-top:-40px; //negative half of height
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:40:02.077

```
#loading {
   display: none;
   position: fixed;
   top: 48%;
   left: 48%
} 
```

JS

```
$('#loading').ajaxStart(function(){
   var that = $(this)
    setTimeout(function() {
       that.show();
    }, "3000");
}).ajaxStop(function(){
    $(this).hide("slow");
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T17:47:34.870

我不明白你为什么要使用计时器，你可以简单地在 ajax 请求开始时将其打开，然后在成功或错误时将其关闭，例如：

```
$('#loading').show();

$.post(url, request)

    .success(function(data) {
        $('#loading').hide();
        // Do what you want with data
    })

    .error(function(data) {
        $('#loading').hide();
        // Show error message
    }); 
```

要将加载图像放在页面中间，请确保它的容器在 100% 高度的父级内，如果它是嵌套的，请确保其父级都不是`position:relative`.

```
#loading {
    position:relative;
    width:100%;
    height:100%;
}

#loading img {
    margin-top: -12px; // Half images height;
    margin-left: -12px; // Half images width;
    position:absolute;
    top:50%;
    left:50%;
}

OR

#loading {
    width:100%;
    height:100%;
}

#loading img {
    width:24px // Images width
    height:auto; // If Image size changes don't mess with proportions
    margin:0 auto;
    margin-top:48%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T17:39:54.357

您以错误的方式使用 SetTimeout 函数

```
设置超时（函数（）{

// 做某事

 }, 3000);

```

# android - Phonegap Android：如何在 ChildBrowser 退出回调上关闭基础应用程序

> ID：11276188
> 
> 赞同：1
> 
> 时间：2012-06-30T17:35:53.630
> 
> 标签：android, iphone, cordova, childbrowser

我创建了一个 Phonegap Android 应用程序，它显示一个欢迎页面，然后打开一个 ChildBrowser 窗口。当用户单击 ChildBrowser 的“退出”按钮时，我希望我的应用程序关闭。我将`onClose`事件绑定到一个函数，但它在加载后立即调用该函数，因此我无法看到 ChildBrowser 窗口。它在此之前退出。下面是我的代码：

```
<script>
var cb = new ChildBrowser();
cb.onClose = onCloseBrowser();
document.addEventListener("deviceready", onDeviceReady, false);
  function onDeviceReady() {
    try {
      cb.showWebPage('http://www.google.com/',{ showLocationBar: true });
    }catch (err){
      console.log(err);
    }
  }
  function onCloseBrowser() {
    //alert("I am here");
    navigator.app.exitApp();
  }
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T22:11:24.760

You need to omit the () when you set your cb.onClose handler. If you don't the method will be executed immediately. So do:

```
cb.onClose = onCloseBrowser; 
```

# matlab - 样条导数

> ID：11276190
> 
> 赞同：2
> 
> 时间：2012-06-30T17:36:07.250
> 
> 标签：matlab, curve-fitting, splines

我正在使用样条工具箱制作双三次样条，如下所示：

```
ft = 'cubicinterp';
opts = fitoptions( ft );

[xInput, yInput, zOutput] = prepareSurfaceData( xMesh, yMesh, Z );
[fitresult, gof] = fit( [xInput, yInput], zOutput, ft, opts ); 
```

我知道我可以使用[http://www.mathworks.com/help/toolbox/curvefit/differentiate.html](http://www.mathworks.com/help/toolbox/curvefit/differentiate.html)来区分 x 或 y 方向，但我想要区分的值是结（即 Z）。

这存在吗，还是我必须自己写？

# objective-c - 将光标移动到位置 Objective-C

> ID：11276191
> 
> 赞同：2
> 
> 时间：2012-06-30T17:36:07.907
> 
> 标签：objective-c, cursor, uitextview

我有一个`UITextView`，我想要两个按钮。当用户点击后退按钮时，我希望光标向后移动 1 个字符。当他们点击向前按钮时，光标应向前移动 1 个字符。我怎么能这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T18:37:41.553

我为你写了它，参考下面链接的答案。你可以把我写的代码放到一个基础项目中试试看。

**解决思路：**

您可以通过指定要选择的文本范围以编程方式选择文本块（请参阅参考资料）。你问什么是范围？它基本上是一个起始位置和一个长度。由于您只关心光标位置，您可以忽略长度（即保持为零）并将“选择”的起始位置调整 +1 或 -1。

**参考：**

[我可以在 UITextField 中选择特定的文本块吗？](https://stackoverflow.com/questions/3277538/can-i-select-a-specific-block-of-text-in-a-uitextfield)

**代码说明：**

在下面的代码中，有两个按钮（前进和后退）和每个按钮的目标方法，用于更改 UITextView 中的光标位置。请注意，这`tv`是您的 UITextView 的类变量/属性（并且需要这样声明）。

**编码：**

```
- (void)viewDidLoad {
    [super viewDidLoad];
    UIButton *forward = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    forward.frame = CGRectMake(20, 20, 100, 50);
    [forward setTitle:@"Forward" forState:UIControlStateNormal];
    [forward addTarget:self action:@selector(moveForward:) forControlEvents:UIControlEventTouchUpInside];

    UIButton *back = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    back.frame = CGRectMake(130, 20, 100, 50);
    [back setTitle:@"Back" forState:UIControlStateNormal];    
    [back addTarget:self action:@selector(moveBack:) forControlEvents:UIControlEventTouchUpInside];

    tv = [[UITextView alloc] initWithFrame:CGRectMake(20, 120, 280, 100)];
    [self.view addSubview:forward];
    [self.view addSubview:back];
    [self.view addSubview:tv];    
}

-(void)moveForward:(id)sender {
    UITextRange *selectedRange = [tv selectedTextRange];
    // Calculate the new position, - for left and + for right

    if (tv.selectedRange.location < tv.text.length) {
        UITextPosition *newPosition = [tv positionFromPosition:selectedRange.start offset:1];

        UITextRange *newRange = [tv textRangeFromPosition:newPosition toPosition:newPosition];

        // Set new range
        [tv setSelectedTextRange:newRange];
    }
}

-(void)moveBack:(id)sender {
    UITextRange *selectedRange = [tv selectedTextRange];
    // Calculate the new position, - for left and + for right

    if (tv.selectedRange.location > 0) {
        UITextPosition *newPosition = [tv positionFromPosition:selectedRange.start offset:-1];

        UITextRange *newRange = [tv textRangeFromPosition:newPosition toPosition:newPosition];

        // Set new range
        [tv setSelectedTextRange:newRange];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:01:32.377

通过确定`theSelectedRange`范围`[theTextView selectedRange];`。通过减去或添加偏移量来
更新 的`location`属性。 如果未进行任何选择（插入点），则该属性为零。 使用 定位光标。 确保新范围没有超出内容的范围。`theSelectedRange`
`length`
`theTextView.selectedRange = theSelectedRange;`
`theTextView`

# css - 让 div 彼此相邻排列

> ID：11276193
> 
> 赞同：0
> 
> 时间：2012-06-30T17:36:14.483
> 
> 标签：css, html

我将如何修改 css 以使“欢迎”和“已经是会员？登录” div 彼此相邻而不是彼此下方？

提前谢谢了。

[http://jsfiddle.net/methuselah/uXFt6/1/](http://jsfiddle.net/methuselah/uXFt6/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:38:49.993

您只需要`float`为您的`<div>`. 所以试试这样：

```
<div style="float: right;">Already a member? Sign in</div> 
```

**注意：**这是工作[示例](http://jsfiddle.net/uXFt6/9/)。
**注意2：**如果您想`<div>`在左侧登录，只需`float: left`为您的设置属性`<span>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:40:00.770

向左飘浮; 很可能会有用。请参阅编辑过的小提琴：

[http://jsfiddle.net/uXFt6/7/](http://jsfiddle.net/uXFt6/7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T17:44:25.753

或者另一种方法是`float:left`在 Welcome's Span 上添加 css 属性

```
 <span style="font-size : x-large;float:left">Welcome</span> 
```

见这里：http: [//jsfiddle.net/uXFt6/14/](http://jsfiddle.net/uXFt6/14/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T17:47:08.170

这个 jsFiddle 可以解决问题。请参阅所做更改的评论。

[http://jsfiddle.net/uXFt6/15/](http://jsfiddle.net/uXFt6/15/)

# html - 背景窥视网站的边界

> ID：11276197
> 
> 赞同：2
> 
> 时间：2012-06-30T17:36:46.453
> 
> 标签：html, css

我试图弄清楚如何在屏幕最大化时摆脱出现在网站左侧和底部周围的红色背景。我认为这是因为我试图在名为“Find Us”的第四页/最后一页上叠加图像，并且这些图像的组合宽度超过了 1400 像素，这是我在页面上设置的最小宽度。

一个解决方案可能是增加最小宽度，但当很多计算机没有以如此高分辨率运行时，我认为这不是一个好的设计选择。理想情况下，我想将最小宽度降低到 1100 像素。当我尝试这样做时，页面底部的红色背景开始增加更多，因为它试图将图像挤入更紧凑的区域。

我想知道如何在将最小宽度减小到 1100 像素的同时摆脱沿着网站左侧和底部边框向外窥视的红色背景。

网站链接：[http ://www.sfu.ca/~jca41/stuph/it/website03/template.html](http://www.sfu.ca/~jca41/stuph/it/website03/template.html)

CSS：

```
.page {
    color: black; 
    width: 100%;
    height: 1100px;
    position: relative; }

#findUs .pageContent {
    width: 1400px;
    margin: 0 auto 0 auto; }

#findUs #man #contactInfo {
    margin: 195px 0 0 345px;
    width: 200px; }

#findUs #frame {
    width: 464px;
    height: 541px;
    float: left;
    position: relative;
    top: 130px;
    left: 190px;
    z-index: 90; }

#findUs #tassel {
    background: url(../img/findUs/tassel.png) no-repeat;
    width: 165px;
    height: 411px;
    float: left;
    position: relative;
    top: -330px;
    left: 20px;
    z-index: 110; }

#findUs #feedbackForm {
    position: relative;
    top: -1100px;
    left: -470px;
    width: 300px;
    float: left;
    z-index: 120; }

#findUs #cover {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 1100px;
    float: left;
    z-index: 105;
    background: url(../img/findUs/body.png) repeat; } 
```

HTML：

```
<section id="findUs" class="page"> <!-- Last page -->
    <nav></nav>     
    <div class="pageContent">       
        <div id="man"><div id="contactInfo"><p class="infoHeading">Business Hours</p></div></div>       
        <div id="frame"><div id="googleMapCanvas"></div></div>
        <div id="tassel"></div>    
        <div id="feedbackForm"></div>           
    </div>      
    <div id="cover" class="hidden"></div>       
</section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:55:39.877

你需要身体背景红色吗？如果不：

```
身体 {
背景：透明；
最小宽度：1400px；
}

```

# android - spinner setSelection：方向改变后无法设置位置

> ID：11276198
> 
> 赞同：0
> 
> 时间：2012-06-30T17:36:55.067
> 
> 标签：android, orientation, spinner, android-spinner

改变方向后，我可以使用以下方法恢复微调器位置：

```
mySpinner.setSelection(restorePosition, true); 
```

如果我不使用第二个参数，则微调器默认为索引 0；此解决方法适用于 OS 2.x 及更高版本，但仍对 4.0 没有影响（微调器恢复到零位置）。

有人可以提出解决方案吗？提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T03:51:52.887

已解决：问题在于在 4.x 中如何堆叠/执行侦听器。在 mySpinner.setSelection 调用之后，我将 restorePosition 变量重置为 0。将 restorePosition 变量重置移动到“mySpinner”侦听器解决了这个问题。我想另一种方法是实现一个wait()。也许这对其他人有用。

# c# - 如何在 C# 中使控制台全屏显示

> ID：11276200
> 
> 赞同：1
> 
> 时间：2012-06-30T17:37:03.173
> 
> 标签：c#, console-application, fullscreen

> **可能重复：**
> [C# 全屏控制台？](https://stackoverflow.com/questions/4423085/c-sharp-full-screen-console)

我正在尝试使我的一个应用程序控制台全屏，无边框，无任务栏等。如何使用整个屏幕？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:43:09.513

您不能在 Windows 7 或 Vista 中执行此操作，因为它们不支持。在 Windows XP 上，您可以使用 [SetConsoleDisplayMode 函数](http://msdn.microsoft.com/en-us/library/ms686028%28VS.85%29.aspx)，但您必须使用 PInvoke，如果在 Windows 7 或 Vista 下运行，它会给您一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T17:45:27.030

打开命令提示符后，您可以右键单击标题栏，选择`properties`并更改`Layout`. 我不认为你可以让它特定于应用程序。

# django - Django 异常——Djangoblog

> ID：11276204
> 
> 赞同：0
> 
> 时间：2012-06-30T17:37:26.710
> 
> 标签：django

我正在尝试配置 djangoblog 以进行异常处理，但得到以下消息，

错误：配置不当：中间件模块“djangodblog”未定义“DBLogMiddleware”类

设置.py

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'djangodblog.DBLogMiddleware', 
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'djangodblog',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T21:39:10.553

仅在谷歌搜索后快速回答：不应该`djangodblog.middleware.DBLogMiddleware`吗`djangodblog.DBLogMiddleware`？

[http://nullege.com/codes/search/djangodblog.middleware.DBLogMiddleware](http://nullege.com/codes/search/djangodblog.middleware.DBLogMiddleware)

# php - 使用 JSON 从 Jquery 访问 WCF

> ID：11276210
> 
> 赞同：0
> 
> 时间：2012-06-30T17:38:10.800
> 
> 标签：php, jquery, html, json, wcf

您好我正在尝试访问一个 WCF 服务，该服务使用 JQuery 返回一个 JSON 数组，但它不工作。但是当我使用互联网上的 php 服务时，它可以工作。请告诉我哪里出错了？

我的 C# 类

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    [WebInvoke(Method = "GET",RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped)]
    Employee[] getData();
}

[DataContract]
public class Employee
{ 
    [DataMember]
    public string id { get; set; }

    [DataMember]
    public string name { get; set; }
} 
```

当我在浏览器中加载它时得到的响应

```
[{"id":"1","name":"test"},{"id":"2","name":"test"}] 
```

php web 服务的 URL [http://shell.loopj.com/tokeninput/tvshows.php](http://shell.loopj.com/tokeninput/tvshows.php)

我的html代码

```
<script type="text/javascript">
        $(document).ready(function(){

    $.ajax({
      url: "http://localhost:51220/Service1.svc/getdata",
      success: function(result){
        alert(result);
      },
      dataType: "jsonp"
    });
    });
</script> 
```

当我使用它时，我得到错误 0，但是当我使用 php 服务时，我得到了数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:36:33.987

试试下面的代码。

```
$.ajax({
                type: "GET",
                url: "http://localhost:51220/Service1.svc/getdata",
                processData: false,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (result) {
                    alert(result);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(textStatus + ' / ' + errorThrown);
                }
            }) 
```

# c++ - 为什么等于 c++ 代码转换为不同的 asm 代码？

> ID：11276211
> 
> 赞同：-3
> 
> 时间：2012-06-30T17:38:26.360
> 
> 标签：c++, performance, visual-c++, optimization, assembly

Visual c++，调试模式。

```
if(k>=0)

011D14CE  cmp         dword ptr [k],0  
011D14D2  jl          bez+28h (11D14D8h)  

return true;

011D14D4  mov         al,1  
011D14D6  jmp         bez+33h (11D14E3h)  

return false;
011D14D8  xor         al,al  
011D14DA  jmp         bez+33h (11D14E3h) 
```

和相等的代码：

```
return (k>=0)?(true):(false);
011D14DC  cmp         dword ptr [k],0  
011D14E0  setge       al 
```

什么更快？当我在函数调用中使用第二个构造时更快的是什么？

```
if(i>0)
    Foo(true);
else
    Foo(false); 
```

或者：

```
Foo((i>0)?(true):(false)) 
```

?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-30T17:45:19.560

在调试模式下编译时，该代码不相等。在第一个版本中，您可以在`return true`分支上设置断点。这不能用`setge al`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:54:15.553

您正在查看的代码的输出是使用调试开关设置构建的。

编译器为每一行源代码创建代码，以便或多或少地进行调试和源代码跟踪。

一个实例有 4 行代码。一个实例有一行代码。编译器相应地输出代码。

但是，您不会使用调试代码进入生产环境。您将使用优化构建代码。

如果您使用优化编译这两个实例，我将看到完全相同的代码。

# html5-canvas - HTML 5 Canvas 样式泄漏

> ID：11276212
> 
> 赞同：0
> 
> 时间：2012-06-30T17:38:29.090
> 
> 标签：html5-canvas, stroke

下面的 URL 中有一个小示例，它画了两条线。我希望顶线是绿色，底部是蓝色。但它们都是蓝色的。为什么？

[http://jsfiddle.net/rj8Ab/](http://jsfiddle.net/rj8Ab/)

**编辑** 也添加下面的脚本：

```
var canvas = document.getElementById('canvas');
canvas.width = 500;
canvas.height = 500;

var ctx = canvas.getContext('2d');

ctx.globalAlpha = 1;
ctx.globalCompositeOperation = "source-over";

var x1=10, y1=10, width=100, height=100;

ctx.lineWidth = "5";

//draw green line
ctx.strokeStyle = "#00FF00";
ctx.moveTo(x1 + 1, y1 + 1);
ctx.lineTo(x1 + width - 2, y1 + 1);
ctx.stroke();

//draw blue line
ctx.strokeStyle = "#0000FF";
ctx.moveTo(x1 + 1, y1 + 10);
ctx.lineTo(x1 + width - 2, y1 + 10);
ctx.stroke(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:42:36.100

如果您愿意，您必须开始一条新路径 -`.stroke`不会自动执行此操作：http: [//jsfiddle.net/rj8Ab/2/](http://jsfiddle.net/rj8Ab/2/)。

```
//draw blue line
ctx.beginPath(); 
```

目前路径是用第二行*扩展*的，所以新路径由两行组成。您首先抚摸顶线绿色，然后延伸路径并抚摸路径蓝色（现在由两条线组成）。显然绿线已被“覆盖”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:12:18.613

第一个条被绘制为绿色，但随后变为蓝色。

如[www.williammalone.com所见](http://www.williammalone.com/articles/create-html5-canvas-javascript-drawing-app/)

```
//draw green line
ctx.beginPath();
ctx.moveTo(x1 + 1, y1 + 1);
ctx.lineTo(x1 + width - 2, y1 + 1);
ctx.closePath();
ctx.strokeStyle = "#00FF00";
ctx.stroke();
//draw blue line
ctx.beginPath();
ctx.moveTo(x1 + 1, y1 + 10);
ctx.lineTo(x1 + width - 2, y1 + 10);
ctx.closePath();
ctx.strokeStyle = "#0000FF";
ctx.stroke(); 
```

# iphone - 如何从选定的 UITableViewCell 中获取自定义 NSManagedObject 子类

> ID：11276215
> 
> 赞同：0
> 
> 时间：2012-06-30T17:38:49.210
> 
> 标签：iphone, objective-c, ios, uitableview, delegation

我的应用程序中有一个 UITableView，它显示了我作为核心数据存储的一部分创建的一些 Location 对象。UITableViewCell 实际上只显示 Location 的名称（Location 对象的属性之一）。当用户选择一个位置时，我想使用委托将位置对象传递给前一个视图控制器，而不仅仅是单元格中的文本。

我试图想出最好的方法来做到这一点，并且可以创建一个新的 Location 对象来传回，但不知道如何获得文本显示在 UITableViewCell 中的实际对象。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:44:25.273

看看[NSFetchedResultsController](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)。它旨在完全按照您的意愿行事：在表格视图中显示 Core Data 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:58:18.260

如果您使用数组填充了您`TableView`的数组（例如来自 a `FetchRequest`），则使用

```
MyManagedObjectSubclass *selectedManagedObject = [myDataSourceArray objectAtIndex:indexPath.row]; 
```

在您的`didSelectRowAtIndexPath`委托方法中将为您提供所需的东西。

# c++ - g++：在临时对象的情况下，编译无法推断出引用数组

> ID：11276217
> 
> 赞同：1
> 
> 时间：2012-06-30T17:38:59.203
> 
> 标签：c++, templates, template-argument-deduction

我在以下代码中面临编译错误。我期望即使是临时对象也可以绑定到 const 引用。所以我想知道它应该是有效的代码。但是，g++ 给了我这个错误，而 clang 不会给我这样的错误。有没有人让我知道发生这种情况的确切原因？

```
#include <iostream>

struct TestClass
{
    TestClass() : str()
    {   
        strncpy(str, "hello", sizeof(str));
    }   

    char str[6];

    char (&getStr())[6]
    {   
        return str;
    }   
};

template <typename T>
void printFunc(const T& str)
{
    std::cout << str << std::endl;
}

int main()
{
    TestClass obj;
    printFunc(obj.str);
//  printFunc(TestClass().str);  // <- This line gives compilation error.
    printFunc(TestClass().getStr());
    return 0;
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T17:48:24.080

我会假设您的 GCC 版本会忽略`TestClass().str`作为*右值*数组的事实（在 C 和 C++ 语言中都是非常奇特的东西）。*当初始化器是右值*时，参考初始化的细节中的某些内容实施不正确。显然，该错误已在以后的版本中得到修复。

同时`obj.str`和`TestClass().getStr()`都是*左值*数组。它们由直接引用绑定的直接规则处理，因此不会出现问题。

*要解决评论：*

如果您将函数模板修改为

```
template <typename T> printFunc(const T str) 
```

情况将发生巨大变化。现在它不再是一个引用绑定问题。现在数组到指针的转换规则接管了。

在您的原始版本中，类型`T`被推断为`char [6]`，而在这个新版本中，类型被推断为`char *`。当参数传递给函数时，您的数组类型完全丢失：它是一个被传递的指针。这完全消除了引用绑定的原始问题，并使代码无论数组的左值还是右值都可以编译。

例如，您可以尝试`sizeof str`在函数内部打印并观察两个版本之间的差异。原始的将以字节（`6`）为单位打印您的数组大小，而新的将打印指针大小（`4`对于 ideone 的平台）。

# lwuit - 隐藏在 CodeName 一 Android 版本中的命令

> ID：11276218
> 
> 赞同：1
> 
> 时间：2012-06-30T17:39:16.387
> 
> 标签：lwuit, codenameone

我正在尝试将我的 LWUIT 应用程序移植到[CodeName one](http://www.codenameone.com)。

我的 LWUIT 表单有 2 个命令。这些可以在 LWUIT 中的表格底部看到。

在代号一个人的 android 构建中，这些命令在屏幕底部不可见。

为什么会发生这种情况，我该如何解决？

黑莓屏幕/Android/I Pad ...看不到任何命令

![在此处输入图像描述](../Images/85aaada163862617c498ce8c37f04fe9.png)

这是您常用的电话，可以看到命令

可能是什么问题？

![在此处输入图像描述](../Images/ffdb8592327e85ffa5f32762aac196b6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:00:32.403

黑莓和安卓都有一个菜单按钮，命令就在里面。

在 iPhone/iPad 中，命令将出现在表单中，但不会出现在必须作为按钮嵌入的对话框中。我建议您使用接受命令的对话框的静态显示方法，这将跨设备无缝工作。

# algorithm - 渐近界和运行时间之间的关系？

> ID：11276221
> 
> 赞同：1
> 
> 时间：2012-06-30T17:39:59.527
> 
> 标签：algorithm, complexity-theory, big-o, asymptotic-complexity

让我们以二分搜索为例，最好的情况下运行时间将在第一次比较中获得

> key_to_find == (imin + imax) / 2;

最佳案例运行时间将由 O(1) 表示。我完全理解这一点，但让我感到困惑的是为什么使用 O(1) 以及为什么我不能使用 Θ(1) 或任何其他表示法。

IE 。如何确定我应该使用哪种表示法来表示运行时间（最佳、平均或最坏情况）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T19:14:11.807

O-notation 和 Θ-notation 与最佳情况、平均或最坏情况没有直接关系。它们用于函数的渐近界。你可以写： 47n lg n = O(n lg n), 3n^2 + 4n = O(n^2)

O a Θ 表示法之间存在差异。O 表示“最多（使用某个常数因子）”，Θ 表示“等于（使用某个常数因子）”，例如：47n ln n = O(n^2)，但它不是 Θ(n^2)。

如果你想表达最好的情况、平均的情况或最坏的情况，你通常会明确地写出来：“最好的情况是O(1)(或Θ(1))，平均的情况是O(lg n)，最坏的情况是O( n)。”

有时您也“运行时间为 O(x)”，那么您的意思是，运行时间最多与 x 成正比。如果你说“运行时间是 Θ(x)”，那么你的意思是，运行时间总是与 x 成正比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:45:34.023

你可以使用任何你想要的符号。Big Theta 是最精确的，因此您应该随时使用它。作为旁注，在复杂性分析的上下文中，O(1) 等价于 Θ(1)（其中操作的数量是整数，即不能将 O(1/n) 作为复杂度）。

# wcf - jquery ajax 远程调用 IEnumerable

> ID：11276225
> 
> 赞同：0
> 
> 时间：2012-06-30T17:40:32.260
> 
> 标签：wcf, ienumerable

我已经浏览了网络并找到了许多关于如何检索从远程 .Net 服务 WCF 或 ASMX 返回的单个数据对象的示例），但是我将如何执行 jQuery ajax 调用来返回一个 Person 对象列表，让我们说 IEnumerable ?

整个想法是将这些数据带回并将其设置为网格的数据源。

这是一个 WebForms 项目。

任何简短的考虑代码片段或链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:30:30.010

假设您有一个返回 Person 对象列表的 List GetPersons() 方法，该方法将在您的服务响应 (SOAP/JSON) 中转换为数组。或者另一个拥有更清晰数组的选项是 List GetPersons()。

这是与 jquery WCF JSON 数组相关的链接：[JSON from .NEt WCF to JavaScript array of arrays](https://stackoverflow.com/questions/5238677/json-from-net-wcf-to-javascript-array-of-arrays)

# winforms - 如何判断递归方法何时完成

> ID：11276228
> 
> 赞同：1
> 
> 时间：2012-06-30T17:41:05.607
> 
> 标签：winforms, file, recursion, directory

在尝试完成重复文件软件时，我注意到 Directory.GetDirectories() 方法存在问题。当由于某种原因无法访问该文件夹时（大部分时间是由于该文件夹是系统文件夹），循环将停止，因为会引发异常。

经过一些研究试图找出手动进行递归的最佳方法后，我发现[Marc Gravell 的示例](https://stackoverflow.com/questions/172544/ignore-folders-files-when-directory-getfiles-is-denied-access)非常适合我的需求。

我对上述方法的问题是我无法弄清楚如何知道递归方法何时完成处理任何文件/文件夹。因此，我们将不胜感激有关此事的任何见解。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:59:49.233

操作完成后放一个消息框：

```
static void Main()
{
  string path = ""; // TODO
  ApplyAllFiles(path, ProcessFile, FolderProcessed);
  MessageBox.Show("Operation complete.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T17:53:21.627

你能澄清你想要做什么吗？

在 Marc 提供的示例代码中，您必须提供将为每个发现的文件调用的操作，因此该操作的调用表示对该文件的处理。

如果您正在寻找一种方法来确定文件夹中的所有文件和子文件夹何时都已被处理，则需要修改代码以添加第二个操作。像这样的东西：

```
using System;
using System.IO;
static class Program
{
    static void Main()
    {
        string path = ""; // TODO
        ApplyAllFiles(path, ProcessFile, FolderProcessed);
    }
    static void ProcessFile(string path) {/* ... */}
    static void FolderProcessed(string path) {/* ... */}

    static void ApplyAllFiles(string folder, Action<string> fileAction, Action<string> folderProcessed)
    {
        foreach (string file in Directory.GetFiles(folder))
        {
            fileAction(file);
        }
        foreach (string subDir in Directory.GetDirectories(folder))
        {
            try
            {
                ApplyAllFiles(subDir, fileAction);
            }
            catch
            {
                // swallow, log, whatever
            }
        }

        //**** New action invoked here:
        folderProcessed(folder);
    }
} 
```

# c# - 返回同一控制器的不同视图时，URL 保持不变

> ID：11276229
> 
> 赞同：0
> 
> 时间：2012-06-30T17:41:06.493
> 
> 标签：c#, asp.net-mvc, model-view-controller, controller

我试图从我的控制器返回不同的视图。但是，尽管显示了正确的视图，但 URL 保持不变。

这是我的`/Company/Create`看法。

```
@using (Html.BeginForm("Create", "Company", FormMethod.Post)) 
{ 
 // Form here
} 
```

所以基本上，表单和模型被提交到`/Company/Create`行动。如果提交的模型是有效的，那么我处理数据并重定向到 /Company/Index 视图

```
return View("Index"); 
```

正如我所说，显示了正确的视图，但是 URL（地址栏）仍然是`http://.../Company/Create`

我试过`RedirectToAction("Index");`它也不起作用。而且我认为它不是一个好的 MVC 实践。我有一个单一的布局和公司视图呈现`RenderBody()`

有任何想法吗 ？

谢谢。

编辑 ：

这是我的行动方法，

```
[HttpPost]
public ActionResult Create(CompanyCreate model)
{
    /* Fill model with countries again */
    model.FillCountries();

    if (ModelState.IsValid)
    {
        /* Save it to database */
        unitOfWork.CompanyRepository.InsertCompany(model.Company);
        unitOfWork.Save();
        RedirectToAction("Index");
        return View();
    }

    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T18:02:30.507

如果要更改 url，则需要重定向到另一个操作。

但是[RedirectToAction](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction.aspx)不会立即重定向，而是返回一个`RedirectToRouteResult`对象，它是一个`ActionResult`对象。

所以你只需`RedirectToAction`要从你的行动中返回结果：

```
[HttpPost]
public ActionResult Create(CompanyCreate model)
{
    /* Fill model with countries again */
    model.FillCountries();

    if (ModelState.IsValid)
    {
        /* Save it to database */
        unitOfWork.CompanyRepository.InsertCompany(model.Company);
        unitOfWork.Save();
        return RedirectToAction("Index");
    }

    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

# postgresql - Grails 字节数组和 PostgreSQL

> ID：11276232
> 
> 赞同：1
> 
> 时间：2012-06-30T17:41:19.223
> 
> 标签：postgresql, grails, bytearray, grails-domain-class

我正在尝试在我的 User 域类上实现[Simple Avatar Uploader](http://grails.org/Simple+Avatar+Uploader)，但我似乎遇到了与 grails 实现`byte[]`和 PostgreSQL 相冲突的问题。我已经完全按照插件页面的建议实现了它，但是在编译时我得到了错误：

```
Error: Error executing SQL ALTER TABLE user ADD avatar bytea(16384): ERROR: type modifier is not allowed for type "bytea" 
```

我发现一些帮助表明[PostgreSQL 不接受大小修饰符](https://stackoverflow.com/questions/4976368/heroku-migration-type-modifier-is-not-allowed-for-type-bytea)，但删除`maxSize: 16384`约束只会导致完全相同的错误，但大小不同：

```
Error: Error executing SQL ALTER TABLE user ADD avatar bytea(255): ERROR: type modifier is not allowed for type "bytea" 
```

因此，如果没有提供，grails 似乎会自动将大小设置为 255 `maxSize`。有没有办法覆盖这个？或者可能是更适合字节数组的数据类型？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:37:13.597

不确定它是否直接负责，但我们正在使用[Grails 数据库迁移](http://grails.org/plugin/database-migration/)，我们通过编辑最新的迁移脚本更改行解决了这个问题

```
column(name: "avatar", type: "bytea(255)") 
```

至

```
column(name: "avatar", type: "bytea") 
```

# c++ - 如何用c ++移动鼠标

> ID：11276233
> 
> 赞同：4
> 
> 时间：2012-06-30T17:41:28.040
> 
> 标签：c++, winapi, mouse, move

我想用 C++ 脚本移动鼠标光标。我在 Parallels 内的 Windows 7 中使用 Visual C++ 2010 Express，并创建了一个控制台应用程序。

我知道 SetCursorPos 方法，但它只是不起作用（它什么都不做）。

我设法用 SendInput 模拟点击，但它实际上并没有移动鼠标。

这是我的代码：

```
#include <Windows.h>
#include <Tlhelp32.h>
#include <stdio.h>
#include <string>
#include <iostream>
#include <fstream>
#include <sstream>
#include <time.h>

void mouseLeftClick(const int x, const int y);

// window
HWND hWindow;

int main()
{
    // find window
    hWindow = FindWindow(NULL, "Calculadora");

    if (NULL == hWindow) {
        OutputDebugStringA("Couldn't find application.");
    }else{

        if (!SetForegroundWindow(hWindow)) {
            OutputDebugStringA("Couldn't set application to foreground.");
        }else{
            // click on 1
            mouseLeftClick(20 265));
            Sleep(500);
            // click on 2
            mouseLeftClick(60, 265);
            Sleep(500);
        }
    }
    return 0;
}

void mouseLeftClick(const int x, const int y)
{ 
    // get the window position
    RECT rect;
    GetWindowRect(hWindow, &rect);

    // calculate scale factor
    const double XSCALEFACTOR = 65535 / (GetSystemMetrics(SM_CXSCREEN) - 1);
    const double YSCALEFACTOR = 65535 / (GetSystemMetrics(SM_CYSCREEN) - 1);

    // get current position
    POINT cursorPos;
    GetCursorPos(&cursorPos);
    double cx = cursorPos.x * XSCALEFACTOR;
    double cy = cursorPos.y * YSCALEFACTOR;

    // calculate target position relative to application
    double nx = (x + rect.left) * XSCALEFACTOR;
    double ny = (y + rect.top) * YSCALEFACTOR;

    INPUT Input={0};
    Input.type = INPUT_MOUSE;

    Input.mi.dx = (LONG)nx;
    Input.mi.dy = (LONG)ny;

    // set move cursor directly and left click
    Input.mi.dwFlags = MOUSEEVENTF_MOVE | MOUSEEVENTF_ABSOLUTE | MOUSEEVENTF_LEFTDOWN | MOUSEEVENTF_LEFTUP;

    SendInput(1,&Input,sizeof(INPUT));
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T21:44:39.987

这发生在 Parallels 中，因为 SmartMouse 已打开或自动。为了让 Parallels VM 中的程序控制鼠标，`SetCursorPos`您需要先隐藏光标。您可以`ShowCursor(0);`在进行任何鼠标移动之前执行此操作，例如`SetCursorPos`. 现在您将能够在 SmartMouse 设置为 Auto 或 Off 时控制鼠标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T15:44:22.087

我发现了问题。事实证明，Parallels 有一个名为 Smart Mouse 的功能，可以让您在 OSX 和 Windows 之间自由移动。一旦我停用它，鼠标就会按预期移动。

# ubuntu - 带有 web 界面的 virtualbox（无头 ubuntu 服务器）

> ID：11276234
> 
> 赞同：-1
> 
> 时间：2012-06-30T17:41:29.293
> 
> 标签：ubuntu, virtualbox, headless

我已经在我的 Windows 计算机上广泛测试了“virtualbox”。我被说服了！现在我想部署一个使用不同windows的Linux计算机系统。我想象一个无头机器。有没有这方面的经验？

我的“备用”电脑：

AMD 2.4ghz、2gb 内存、500gb 硬盘

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:36:34.213

如果您的系统支持硬件可视化，我会推荐 proxmox 而不是 virtualbox。Proxmox 是一个完整的 OS/vs/web 界面，都在一个可安装的 ISO 映像中。

快速检查机器是否已经在运行 Linux 将是：

```
egrep -c '(vmx|svm)' /proc/cpuinfo 
```

如果你得到 0，那么它要么没有，要么在 bios 中关闭，如果你得到 1 或更高，那么你很好。但是KVM（内核虚拟机）会给你比virtualbox更好的性能。KVM 还允许您将客户系统实际连接到物理硬盘驱动器而不是虚拟硬盘驱动器（主要的性能提升）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T20:29:28.707

您可能已经意识到这一点，但如果您想对客人做任何重要的事情，您可能很快就会耗尽内存。

我将 ubuntu 12.04 用于 virtualbox 服务器，命令行工具需要一段时间才能习惯，但它们做得很好。您可能还会发现 Ubuntu Cloud 很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T17:41:29.590

经过大量研究，我选择了以下解决方案：

主机系统：

*   [ubuntu 12.04 服务器](http://www.ubuntu.com/download/server)

*   [虚拟盒子](http://wiki.ubuntuusers.de/VirtualBox/Installation)

*   [phpvirtualbox](http://code.google.com/p/phpvirtualbox/downloads/detail?name=phpvirtualbox-4.1-7.zip)

# android - 并发http调用和socket连接的最佳实践

> ID：11276239
> 
> 赞同：0
> 
> 时间：2012-06-30T17:42:24.497
> 
> 标签：android

我有一个应用程序，其中有一个专用线程通过 nio 套接字与游戏服务器连接，以与服务器交换实时数据。同时，可能有几个并发线程在运行，每个线程都进行 http 调用（使用 apache HttpClient）从另一台服务器检索小图像。

现在的问题是，当调用图像检索 http 调用时，套接字连接明显延迟。我尝试添加以下代码来增加套接字线程的优先级

`android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_MORE_FAVORABLE);`

但它没有帮助。我仍然看到套接字通信的滞后。

你对这个问题有什么建议吗？

谢谢！

# c# - 如何将纯文本数据转换为托管格式？

> ID：11276241
> 
> 赞同：0
> 
> 时间：2012-06-30T17:42:28.693
> 
> 标签：c#, xml, list, sorting

使用 C#，目标是创建一个工作应用程序，该应用程序将接受一个文本文件作为输入，读取它，并将该文本文件中的数据部分分成不同的组，其中包含索引 # 和部分的名称可在本节的第一部分找到。

这可能更多是关于如何在纯文本文件中获取数据，将其分成数据“组”的部分的问题？并以某种托管格式输出文件。

文本输入文件有 13 个字段，然后是状态的附加字段，共 14 个字段。

文本输入文件将有大约 1500 - 2000 组数据段，因此将有多达 2000 个索引条目，条目名称是第一个字段，即“包名称”。一段数据会是这样的：

```
Package:  horse
Version:  1.2.3
Depends:  libgcc
Provides:
Status:  user installed
Other:   other info
Other2:  other info 2

Package:  cow
Version:  2.3.4
Depends:  libhay
Provides: milk
Status:   user installed
Other:    white with black spots
Other2:   has a red cow bell around her neck

Package:  tractor
Version:  0.9.22
Depends:  diesel
Provides: 
```

ETC...

如何读取数据并将其放入适当的表或条目或数据集中？

ps 感谢之前的编辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T08:00:30.777

一个简单的解决方案就是一次读取一行文件，在“：”处拆分并将每个文件存储在一个`Dictionary<string, string>`本身存储在 a 中`Package`并将其添加到 a`List<Package>`中。每当您获得关键字“Package”时，创建一个新`Package`实例并将其添加到列表中。下面的代码可以解决问题，但不是非常防御性编码。

```
 static void Main(string[] args)
    {
      string line;
      List<Package> packages = new List<Package>();
      Package package = null;
      StreamReader file = new System.IO.StreamReader("TextFile1.txt");
      while ((line = file.ReadLine()) != null)
      {
        string[] pair = line.Split(new string[] { ": " }, StringSplitOptions.None);
        if (pair.Length != 2)
          continue;
        if (pair[0] == "Package")
        {
          package = new Package();
          packages.Add(package);
        }
        package.Values.Add(pair[0].Trim(), pair[1].Trim());
      }
      file.Close();
      Console.WriteLine(packages.Count);
      foreach (Package p in packages)
      {
        Console.WriteLine(p);
        foreach (KeyValuePair<string, string> pair in p.Values)
          Console.WriteLine("{0}={1}", pair.Key, pair.Value);
      }
      Console.ReadLine();
    }
  }

  class Package
  {
    public Dictionary<string, string> Values;
    public Package()
    {
      Values = new Dictionary<string, string>();
    }
  } 
```

# android - android DatePicker DialogFragment 的自定义主题显示令人不快的边框

> ID：11276247
> 
> 赞同：4
> 
> 时间：2012-06-30T17:43:18.583
> 
> 标签：android, datepicker, android-datepicker, datepickerdialog

我正在尝试使用 DialogFragment 来托管 Google 在此处推荐的日期选择器：http: [//developer.android.com/guide/topics/ui/controls/pickers.html](http://developer.android.com/guide/topics/ui/controls/pickers.html)

使用上面页面中的示例代码可以正常工作，但我希望能够为日期选择器对话框设置特定主题。

如果我从他们的示例中修改对话框片段中的 OnCreateDialog 方法，以便它返回一个具有特定主题的日期选择器，如下所示

```
...
// Create a new instance of DatePickerDialog and return it
DatePickerDialog dlg = new DatePickerDialog(getActivity(),
   Android.R.style.Theme_DeviceDefault_Light_Dialog, this, year, month, day); 
return dlg;
... 
```

（即仅使用 DatePickerDialog 的其他构造函数，您可以在其中提供主题）当显示日期选择器时，我的日期选择器周围出现了一个难看的不透明边框：

（截图在这里：http: [//i.stack.imgur.com/WO1YD.png](http://i.stack.imgur.com/WO1YD.png)）

我能做些什么来摆脱边界？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-22T09:37:03.923

这可能有点老了，但至少我会在这里回答，以防其他人发现这个问题。[我相信您可以在这里](https://stackoverflow.com/a/27102439/773361)
找到答案，在另一个堆栈溢出问题中（可能是重复的，但不知道如何将其标记为一个）。

那里的答案是这样设置窗口背景：
`dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));`

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-16T22:26:31.830

我知道已经是一年前了，但也许其他人需要解决这个问题。昨天我遇到了同样的问题，我用一个小解决方法解决了它。我制作了自己的 DatePickerDialog，而不是 android 提供的。

这是代码：

dialog_date_picker.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="match_parent"
          android:layout_height="match_parent">

<DatePicker
        android:id="@+id/dlgDatePicker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:spinnersShown="true"
        android:calendarViewShown="false"/>

<View
        android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:background="@android:color/darker_gray"/>

<Button
        android:id="@+id/dlgDatePickerBtnDone"
        style="?android:attr/buttonBarButtonStyle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/dlg_date_picker_button"
        />

</LinearLayout> 
```

DialogDatePicker.java

```
public class DialogDatePicker extends DialogFragment {

private DatePicker dp;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.dialog_date_picker, container);
    dp = (DatePicker) view.findViewById(R.id.dlgDatePicker);
    view.findViewById(R.id.dlgDatePickerBtnDone).setOnClickListener(setDate);
    getDialog().setTitle(R.string.dlg_date_picker_title);
    return view;
}

private View.OnClickListener setDate = new View.OnClickListener() {
    @Override
    public void onClick(View view) {
        int dayOfMonth = dp.getDayOfMonth();
        int monthOfYear = dp.getMonth()+1; //0 = jan, 1 = feb, ...
        int year = dp.getYear();

        String date = String.format(Locale.GERMANY,"%s.%s.%s", dayOfMonth, monthOfYear, year);
        ((TextView) getActivity().findViewById(R.id.route_setting_date))
                .setText(date);

        dismiss();
    }
};

} 
```

最后是新主题的电话

```
DialogDatePicker ddp = new DialogDatePicker();
ddp.setStyle(DialogFragment.STYLE_NORMAL, android.R.style.Theme_Holo_Dialog);
ddp.show(getFragmentManager(),"DialogDatePicker"); 
```

# node.js - Mongoose 中的排序无法正常工作

> ID：11276248
> 
> 赞同：0
> 
> 时间：2012-06-30T17:43:25.540
> 
> 标签：node.js, mongodb, mongoose

排序不适用于猫鼬，但我不明白这怎么可能，因为我搜索了这么多！每次我尝试它都不起作用。这是我的代码

```
Pics.find({}).limit(8).populate('creator').sort("created_at", 1).execFind(function(err, docs){
    console.log(docs);
}); 
```

我得到：

```
TypeError: Invalid sort() argument. Must be a string or object.
at Query.sort (/Users/n/Proj/feetshot/node_modules/mongoose/lib/query.js:755:11)
at /Users/n/Proj/feetshot/app.js:112:45
at callbacks (/Users/n/Proj/feetshot/node_modules/express/lib/router/index.js:272:11)
at param (/Users/n/Proj/feetshot/node_modules/express/lib/router/index.js:246:11)
at pass (/Users/n/Proj/feetshot/node_modules/express/lib/router/index.js:253:5)
at Router._dispatch (/Users/n/Proj/feetshot/node_modules/express/lib/router/index.js:280:4)
at Object.handle (/Users/n/Proj/feetshot/node_modules/express/lib/router/index.js:45:10)
at Context.next (/Users/n/Proj/feetshot/node_modules/express/node_modules/connect/lib/http.js:204:15)
at Context.<anonymous> (/Users/n/Proj/feetshot/node_modules/passport/lib/passport/context/http/actions.js:64:8)
at SessionStrategy.pass (native) 
```

我怎样才能使排序工作？

这是我的架构：

```
var PicSchema = new Schema({
creator: { type: Schema.ObjectId, ref: 'Users' }
, body: String
, created_at: { type: Date, default: Date.now }
, link: { type: String, index: { unique: true } }
, twitter_id: { type: String, index: { unique: true } }
, tags: [String]
  , likes: [{ type: Schema.ObjectId, ref: 'Users' }]
   }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T19:33:11.360

根据您的错误消息，您必须使用 Mongoose 3.x，但是您使用的是 2.x`sort`方法参数样式。切换到 2.7.0 Mongoose 版本或将您的排序用法更改为`sort('created_at')`. 从 3.x 来源：

```
/**
* sort
*
* Sets the sort order. Accepts a single parameter, either an object or string.
* If an object is passed values allowed are 'asc', 'desc', 'ascending', 'descending', 1, -1.
* If a string is passed it must be a space delimited list of path names. The sort order of each path is ascending unless the path name is prefixed with `-` which will be treated as descending.
*
* Examples:
*
* // these are equivalent
* query.sort({ field: 'asc', test: -1 });
* query.sort('field -test');
*
* @param {Object|String}
* @api public
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-26T05:35:21.543

尝试

1.  使用字符串更正排序方法调用
2.  在填充之前进行排序。

所以：

```
Pics.find({}).sort("created_at").limit(8).populate('creator').execFind(function(err, docs){
    console.log(docs);
}); 
```

# windows - 如何杀死 node.js 上的打开进程？

> ID：11276249
> 
> 赞同：23
> 
> 时间：2012-06-30T17:43:33.757
> 
> 标签：windows, node.js, windows-xp, kill-process

我正在尝试在 sublime 上为 Node.js 设置一个构建系统，所以我可以按 F7 在打开的文件上调用“节点”。问题是该进程将永远打开，因此，我第二次使用 F7 时，我得到了一个附加使用。

有没有办法可以从 node.js 中杀死打开的“node.exe”进程？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-30T18:03:43.310

使用以下命令集来识别在给定端口上运行的进程并从命令行终止它

```
 sudo fuser -v 5000/tcp // gives you the process running on port 5000 
```

它将输出类似于下图的详细信息

```
 USER        PID ACCESS COMMAND
   5000/tcp:            almypal     20834 F.... node 
```

然后使用

```
 sudo fuser -vk 5000/tcp 
```

终止进程。再次检查使用

```
 sudo fuser -v 5000/tcp 
```

以确保进程已终止。

在 Windows 上，您可以使用以下步骤

```
 C:\> tasklist // will show the list of running process'

  Image Name        PID Session Name    Session#    Mem Usage
  System            4   console                 0   236 K
  ...
  node.exe         3592 console                0    8440 k 
```

请注意与您的节点进程对应的 PID，在本例中为 3592。接下来运行 taskkill 以终止该进程。

```
 C:\> taskkill /F /PID 3592 
```

或 /IM 开关

```
 C:\> taskkill /F /IM node.exe 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T18:19:57.850

从 Node.js 内部：

```
var die = function(quitMsg)
{
    console.error(quitMsg)
    process.exit(1);
} 

die('Process quit'); 
```

有某些[方法可](http://nodejs.org/api/process.html#process_process_exit_code)用于退出，这些方法仅适用于 POSIX（即非 Windows），它们将通过进程 ID 退出进程。

另外，请注意，您可能可以使用此方法发送 kill() 信号，但这并不是说它不适用于 Windows：

```
process.kill(pid, [signal]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-03T09:51:58.300

如果你想杀死所有进程：

```
sudo killall -9 node 
```

如果你想杀死选定端口上的进程：

```
sudo kill sudo lsof -t -i:3100 
```

那是港口`3100`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-08T07:16:50.797

如果你说的 sublime 是 sublimeText 插件，我有同样的问题，然后从 python 代码向 TCP 服务器发送消息“关闭”，然后

**应用程序.js**

```
 TCPserver
        .on('connection', function(socket)
        {
            socket.pipe(require('through')
                (function(data)
                { //----------------------------
                    if (data.toString() === 'shutdown')
                    {
                        process.exit();
                    }
                    //--------------------------
                }));
            socket.end();
        }) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-23T13:30:58.313

与@Alex W 所说的类似，只要您有进程 ID 或 PID，就可以使用以下节点函数向进程发送终止信号：

`process.kill(pid, [signal])`

就我而言，我在生成 PID 时随时可以使用 PID `child_process().spawn.pid`。我已经对其进行了测试，它确实可以在 Win 7 x64 上运行。

# android - 大 Android 应用程序名称的问题

> ID：11276251
> 
> 赞同：0
> 
> 时间：2012-06-30T17:43:37.673
> 
> 标签：android

我想在 Play Store 上发布我的应用程序，但我的应用程序名称很大，并且不适合图标下方的应用程序名称区域。

实际应用名称：XYZ - ss:ssw:sw 手机中只需要：XYZ

我希望我的实际应用名称显示在 Play 商店和设置中，但在其他任何地方（在手机上）只显示 XYZ。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:50:18.627

1) 当您尝试在市场上添加您的应用程序时.. 它会询问应用程序信息，其中也包括“应用程序名称”，您可以在此处添加完整的应用程序名称，即在 MARKET/PLAY_STORE 上的应用程序名称。

2) 在 res/values/String.xml 文件中更改以下字符串，

```
 <string name="app_name">app name to be displayed in phone</string> 
```

在 terns 中，在应用程序菜单中的手机中设置您的应用程序名称，或者您可以在应用程序图标下方说出文字。希望它能解决你的问题..

# java - HashMap 上的搜索方法

> ID：11276255
> 
> 赞同：0
> 
> 时间：2012-06-30T17:43:57.890
> 
> 标签：java, hashmap

我需要打印用户输入的员工的详细信息。到目前为止，我能得到的只是名字。任何人都可以帮我解决这个问题吗？

**员工商店**

```
public void add(Employee employee)
{       
    map.put(employee.getEmployeeName(), employee);
}

public Employee searchByName(String name) 
{
    System.out.println(name);
    return map.get(name);    
} 
```

* * *

**用法**

```
EmployeeStore Store = new EmployeeStore();
Store.add(new Employee ("James O' Carroll", 18,"hotmail.com"));
Store.add(new Employee ("Andy Carroll", 1171,"yahoo.com"));
Store.add(new Employee ("Luis Suarez", 7,"gmail.com"));
Store.searchByName("James O' Carroll"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:53:58.093

您正在打印密钥，而不是存储在密钥中的值。

```
public Employee searchByName(String name) 
{
    Employee employee = map.get(name);    
    System.out.println(employee.toString());
    return employee;
} 
```

假设 Employer 类定义了一个 toString() 方法。

# php - 如何使用 PHP 和 SNMP 扫描 LAN 中的活动主机？

> ID：11276257
> 
> 赞同：0
> 
> 时间：2012-06-30T17:44:12.817
> 
> 标签：php, ip, snmp, router

我想要一个列出局域网中所有活动主机的快速脚本，但我有点迷茫。从其他帖子中，我认为这可以通过使用 SNMP 轮询 DHCP 服务器（在我的情况下是 Lancom 路由器）来最有效地完成。

但是，我不熟悉 PHP 中的 SNMP 命令。snmpwalk() 是正确的功能吗？我可以让 snmpwalk() 或任何其他 php 函数返回一个包含所有活动主机列表的数组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T21:11:43.927

**寻找直播主持人**

确保获得所有活动主机的*最佳*`ping`方法是使用诸如[`nmap`](http://nmap.org/). 由于默认情况下 Windows 主机不响应 ping，因此它还包括一个简短的 TCP 端口扫描。linux CLI 的语法是`nmap -sP 192.0.2.0/24`（用您的子网代替 192.0.2.0/24）。

**SNMP 查询**

我认为 SNMP 不能真正解决您的问题，但我会提供我能提供的帮助...当您使用[PHP SNMP Extension](http://php.net/manual/en/book.snmp.php)时，您首先需要知道具有正确信息的表的 OID。[LANCOM-1711-MIB](http://www.oidview.com/mibs/2356/LANCOM-1711-MIB.html)是一种可能性，但很难确定；如果您不知道要轮询哪个 SNMP OID，您应该联系 LANCOM 支持。

让我们假设`staDhcpLanIpadd`(OID: 1.3.6.1.4.1.2356.500.2.1712.1.32.21.1.2) 是您需要的 OID。此时，您将`snmpwalk`使用 SNMPv2c 的路由器和您在其上配置的 SNMP 社区。大概，这个 OID 为您提供了已发布的 DHCP 地址列表；但是，这并不意味着它们在您轮询路由器时处于活动状态（可能有人拔掉了电缆，或将它们关闭）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T15:42:50.287

所以我写了一个脚本来探测 Lancom 路由器并拉出 DHCP/BOOTP 表。它可能适用于所有需要监控此类路由器的人，因此我分享它。它还输出了一个漂亮的 HTML 表格；该函数`BetterTable()`可用于任何二维数组。

您需要设置 IP、userid 和 pwd（前三个变量）才能在路由器上使用脚本。

```
 <?php

    $router_ip = '';
    $username = '';
    $password = '';
    $port = 23;
    $timeout = 10;

    $connection = fsockopen($router_ip, $port, $errno, $errstr, $timeout);

    if(!$connection){
     echo "Connection failed\n";
     exit();
    } else {

     fputs($connection, "$username\r\n");
     fputs($connection, "$password\r\n");
     fputs($connection, "cd setup/dhcp/dhcp-table \r\n");
     fputs($connection, "dir \r\n");
     fputs($connection, " ");

     $j = 0;
     while ($j < 16) {
      fgets($connection);
      $j++;
     }
     stream_set_timeout($connection, 2);
     $timeoutCount = 0;
     $content ='';
     $DhcpArray = '';
     (int) $index =0;

    $DhcpFile = "C:\IP-Symcon\webfront\user\images\LancomDhcp.txt";
    $fh = fopen($DhcpFile, 'w') or die("can't open file");

    //$DhcpArray[0] = array ('IP-Address', 'MAC-Address', 'Timeout', 'Hostname', 'Type', 'LAN-Ifc', 'Ethernet-Port', 'VLAN-ID', 'Network-Name');

     while (!feof($connection)){

      $content = fgets($connection);
      $content = str_replace("\r", '', $content);
      $content = str_replace("\n", "", $content);
      $lineArray = explode(' ', $content); 
      if (isValidIp($lineArray [0]))
          { 
          $DhcpArray[$index]['IP-Address'] = substr ($content, 0,17);
          $DhcpArray[$index]['MAC-Address'] = substr ($content, 17,32-18);
          $DhcpArray[$index]['Timeout'] = substr ($content, 31,41-32);
          $DhcpArray[$index]['Hostname'] = substr ($content, 40,108-41);
          $DhcpArray[$index]['Type'] = substr ($content, 107,125-108);
          $DhcpArray[$index]['LAN-Ifc'] = substr ($content, 124,137-125);
          $DhcpArray[$index]['Ethernet-Port'] = substr ($content, 136,152-137);
          $DhcpArray[$index]['VLAN-ID'] = substr ($content, 151,161-152);
          $DhcpArray[$index]['Network-Name'] = substr ($content, 160);
          fwrite($fh, $content);
          $index +=1;
          }

      # If the router say "press space for more", send space char:
      if (preg_match('/MORE/', $content) ){ // IF current line contain --More-- expression,
       fputs ($connection, " "); // sending space char for next part of output.
      } # The "more" controlling part complated.

      $info = stream_get_meta_data($connection);
      if ($info['timed_out']) { // If timeout of connection info has got a value, the router not returning a output.
       $timeoutCount++; // We want to count, how many times repeating.
      }
      if ($timeoutCount >2){ // If repeating more than 2 times,
       break;   // the connection terminating..
      }
     }
     $content = substr($content,410);

     BetterTable($DhcpArray);

    fclose($fh);

    }
    echo "End.\r\n";

    //--------------------------------------------------------------------

    function isValidIp($ip)
    {/* PCRE Pattern written by Junaid Atari */
        return !preg_match ( '/^([1-9]\d|1\d{0,2}|2[0-5]{2})\.('.
                             '(0|1?\d{0,2}|2[0-5]{2})\.){2}(0|1?'.
                             '\d{0,2}|2[0-5]{2})(\:\d{2,4})?$/',
                             (string) $ip )
                ? false
                : true;
    }

    //--------------------------------------------------------------

    function BetterTable($twoDimArray)
    {
    $i = 0;
    echo "<table>
            <table class='BetterTable' border='1'>";

    echo "<tr>";
    echo '<td>Line #
    </td>';
    foreach ($twoDimArray[0] as  $fieldName => $fieldValue)
        {
            echo '<td>'.$fieldName. '</td>';
        }echo '</tr>';
    $i = 0;

    foreach ($twoDimArray as $rowName => $rowValue) 
    {
            if ($i%2 == 0) 
                Echo "<tr bgcolor=\"#d0d0d0\" >";
            else 
                Echo "<tr bgcolor=\"#eeeeee\">";
        $fields = count($twoDimArray[$i]);
        $y = 0;
        echo '<td>'.$i. '</td>';
        foreach ($rowValue as  $fieldName => $fieldValue)
        {
            echo '<td>'.$fieldValue. '</td>';
            $y = $y + 1;
        }
        echo '</tr>';
        $i = $i + 1;
    }

    echo '</table>';
    }

    ?> 
```

# multithreading - 在并发编程的上下文中，“数据竞争”和“竞争条件”实际上是一回事吗

> ID：11276259
> 
> 赞同：110
> 
> 时间：2012-06-30T17:44:25.103
> 
> 标签：multithreading, concurrency, language-agnostic, data-race

我经常发现这些术语在并发编程的上下文中使用。它们是相同的还是不同的？

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2013-08-05T01:06:20.337

不，它们不是一回事。它们不是彼此的子集。它们既不是彼此的必要条件，也不是充分条件。

数据竞赛的定义非常明确，因此它的发现可以自动化。当来自不同线程的 2 条指令访问同一内存位置时，就会发生数据竞争，这些访问中至少有一个是写入，并且在这些访问之间没有强制*任何*特定顺序的同步。

竞争条件是语义错误。这是发生在时间或事件顺序中的缺陷，会导致错误的程序行为。许多竞争条件可能是由数据竞争引起的，但这不是必需的。

考虑以下简单示例，其中 x 是共享变量：

```
Thread 1    Thread 2

 lock(l)     lock(l)
 x=1         x=2
 unlock(l)   unlock(l) 
```

在此示例中，线程 1 和 2 对 x 的写入受到锁的保护，因此它们总是以某种顺序发生，该顺序由运行时获取锁的顺序强制执行。也就是说，写入的原子性不能被破坏；在任何执行中，两个写入之间的关系总是有一个发生之前。我们只是无法知道哪个写入发生在另一个之前。

写入之间没有固定的顺序，因为锁无法提供这一点。如果程序的正确性受到损害，例如当线程 2 对 x 的写入之后是线程 1 中对 x 的写入时，我们说存在竞争条件，尽管从技术上讲不存在数据竞争。

检测竞争条件比检测数据竞争有用得多；然而这也很难实现。

构建反向示例也很简单。[这篇](http://blog.regehr.org/archives/490)博文也很好地解释了差异，并以一个简单的银行交易示例为例。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-30T19:58:40.483

根据 Wikipedia 的说法，“竞态条件”一词自第一个电子逻辑门出现以来就一直在使用。在 Java 的上下文中，竞争条件可以与任何资源有关，例如文件、网络连接、线程池中的线程等。

[术语“数据竞争”最好保留其由JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)定义的特定含义。

最有趣的情况是与数据竞争非常相似的竞争条件，但仍然不是，就像在这个简单的例子中一样：

```
class Race {
  static volatile int i;
  static int uniqueInt() { return i++; }
} 
```

由于`i`是易失性的，因此没有数据竞争；但是，从程序正确性的角度来看，由于两个操作的非原子性存在竞争条件： read `i`， write `i+1`。多个线程可能会从`uniqueInt`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-09-30T04:11:35.107

**TL;DR：数据竞争和竞争条件之间的区别取决于问题表述的性质，以及在何处划定未定义行为与明确定义但不确定的行为之间的界限。当前的区别是传统的，最能反映处理器架构和编程语言之间的接口。**

**1\. 语义**

数据竞争具体是指对同一内存位置的非同步冲突“内存访问”（或动作或操作）。如果内存访问没有冲突，而仍然存在由操作顺序引起的不确定行为，那就是竞争条件。

注意这里的“内存访问”有特定的含义。它们指的是“纯”内存加载或存储操作，没有应用任何额外的语义。例如，来自一个线程的内存存储不（必然）知道将数据写入内存需要多长时间，并最终传播到另一个线程。再举一个例子，在另一个位置由同一线程存储到另一个位置之前，内存存储到一个位置并不（必然）保证写入内存的第一个数据在第二个之前。结果，这些纯内存访问的顺序不能（必然）被**“推理”**，除非另有明确定义，否则任何事情都可能发生。

当“内存访问”在通过同步的顺序方面得到很好的定义时，附加语义可以确保即使内存访问的时间不确定，它们的顺序也可以通过同步来**“推理” 。**请注意，尽管可以推断内存访问之间的顺序，但它们不一定是确定的，因此存在竞争条件。

**2\. 为什么不一样？**

但是，如果在竞争条件下订单仍然是不确定的，为什么还要将其与数据竞争区分开来呢？原因在于实践而非理论。这是因为编程语言和处理器架构之间的接口确实存在区别。

由于乱序流水线、推测、多级缓存、cpu-ram 互连，尤其是多核等特性，现代架构中的内存加载/存储指令通常实现为“纯”内存访问. 有很多因素导致不确定的时间和顺序。对每条内存指令强制排序会导致巨大的损失，尤其是在支持多核的处理器设计中。因此，为排序语义提供了额外的指令，如各种障碍（或栅栏）。

数据竞争是处理器指令执行的情况，没有额外的栅栏来帮助推理冲突内存访问的顺序。结果不仅不确定，而且可能非常奇怪，例如，不同线程对同一单词位置的两次写入可能导致每次写入一半单词，或者可能仅对其本地缓存的值进行操作。-- 从程序员的角度来看，这些是未定义的行为。但从处理器架构师的角度来看，它们（通常）是很好定义的。

程序员必须有一种方法来**推理**他们的代码执行。数据竞赛是他们无法理解的事情，因此应该始终避免（通常）。这就是为什么足够低级别的语言规范通常将数据竞争定义为未定义的行为，与竞争条件的明确定义的内存行为不同。

**3\. 语言记忆模型**

不同的处理器可能有不同的内存访问行为，即处理器内存模型。程序员研究每个现代处理器的内存模型然后开发可以从中受益的程序是很尴尬的。如果该语言可以定义一个内存模型，以便该语言的程序总是按照内存模型定义的预期行为，那将是可取的。这就是为什么 Java 和 C++ 定义了它们的内存模型。编译器/运行时开发人员有责任确保语言内存模型在不同的处理器体系结构中得到执行。

也就是说，如果一种语言不想暴露处理器的低级行为（并且愿意牺牲现代架构的某些性能优势），他们可以选择定义一个完全隐藏“纯”细节的内存模型内存访问，但对其所有内存操作应用排序语义。然后编译器/运行时开发人员可以选择在所有处理器架构中将每个内存变量视为易失性。对于这些语言（支持跨线程共享内存），没有数据竞争，但可能仍然是竞争条件，即使使用完全顺序一致性的语言。

另一方面，处理器内存模型可以更严格（或不那么宽松，或更高级别），例如，像早期处理器那样实现顺序一致性。然后所有内存操作都是有序的，处理器中运行的任何语言都不存在数据竞争。

**4。结论**

回到最初的问题，恕我直言，可以将数据竞争定义为竞争条件的一种特殊情况，并且一个级别的竞争条件可能会成为更高级别的数据竞争。这取决于问题表述的性质，以及在何处划定未定义行为和明确定义但不确定的行为之间的界限。只是当前的约定定义了语言处理器接口的边界，并不一定意味着总是并且必须如此；但是当前的约定可能最好地反映了处理器架构师和编程语言之间最先进的接口（和智慧）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-30T18:09:23.600

不，它们是不同的，它们都不是其中一个的**子集**，反之亦然。

> 术语竞争条件经常与相关术语数据竞争相混淆，数据竞争是在不使用同步来协调对共享非最终字段的所有访问时出现的。每当一个线程写入一个可能下一次被另一个线程读取的变量，或者如果两个线程都不使用同步时读取一个可能最后被另一个线程写入的变量，你就会冒数据竞争的风险；具有数据竞争的代码在 Java 内存模型下没有有用的定义语义。不是所有的竞争条件都是数据竞争，也不是所有的数据竞争都是竞争条件，但它们都可能导致并发程序以不可预知的方式失败。

摘自**Joshua Bloch & Co. 的优秀书籍 - Java Concurrency in Practice。**

# java - 如何为地图编辑器绘制大网格？

> ID：11276263
> 
> 赞同：0
> 
> 时间：2012-06-30T17:44:28.793
> 
> 标签：java, user-interface, paint, bufferedimage, heap-memory

我正在为基于 2d 瓷砖的 RPG 游戏制作地图编辑器，但遇到了障碍。问题实际上是如何为非常大的地图（例如 300x300 瓦片）有效地绘制网格线。

最初，我每次移动鼠标或单击时都会调用重新绘制整个网格面板（因为它允许您拖动并突出显示您悬停的图块）。这对于大型地图来说太可怕了，而且速度非常慢。

所以我的解决方案是在创建新的空地图时为指定大小的网格创建一个缓冲图像，并在每次调用paint时重绘该图像。这工作得很好，除了 200x200ish 以上的任何东西，java 在创建缓冲图像时会耗尽堆空间。我真的不能有一个预加载的图像，因为用户应该能够将新地图指定为任意大小。另外，我喜欢在瓷砖上绘制网格，否则瓷砖会遮住线条，看起来更乱。这意味着每次添加瓷砖时都必须再次绘制网格，对吗？

我的问题是，有没有另一种方法来绘制一个非常大的网格，每次移动鼠标时都会重新绘制？Tiled 程序可以轻松创建 1000x1000 或更大的地图，它是如何完成的？谢谢

**编辑：** 我的意思是实际的网格线，而不是像瓷砖这样的网格内容。现在，当绘制网格时，它会遍历 2D 数组并在图块的每个长度处绘制一条线。

**编辑：** 我通过仅绘制屏幕的可见部分来使其工作。事实证明，在 JScrollPane 中找到视图窗格的坐标并不难。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:02:32.687

好的，所以这与我目前正在做的事情相似。我目前正在用 Ogre3D 编写一些带有 3D 前端的模拟软件。我有一个基于图块的地图，可以很容易地达到 3000 x 3000，有时它们可​​能更大。

现在我不确定你将如何绘制网格，如果你只是在做 2D/3D，但对我来说主要的问题是如何将不同的纹理应用到每个图块。如果这不相关，那么希望这对未来的大声笑有所帮助。对我来说，问题是因为速度的原因，为每个图块创建一个单独的对象是不行的。如果甚至有 1024 x 1024，您会看到超过 100 万个图块，每个图块都有属性。这在我只有 10 x 10 的地图的第一次测试中效果很好，但在更大的地图上它只是停止了。

我目前正在做的是重写它，新方法如下。（如果有帮助，您可以根据自己的工作进行调整）。网格现在只有 1 个对象，在我的情况下它是一个网格，因为我在 3d 中工作。每个顶点都有几个值，一个是列，一个是行。我有一个与我的地图大小相同的单独纹理，因此对于具有 100 列和 100 行的地图，我创建了一个 100 x 100 的纹理（这是动态创建的）。

然后我将这个纹理和顶点传递给我的 cg 着色器（这是你可能不得不考虑一种等效的做事方式的地方，但我认为它应该是可行的）。通过在这个纹理中与我想要纹理的网格槽相关的像素处查找颜色，我可以找到一个颜色值，这些颜色值与我的纹理图集相关，该图集包含我的地图的所有可能纹理。然后，您所要做的就是将纹理图集的特定部分用于网格/网格的特定部分。

我希望这有某种意义，如果不是，那么我很乐意解释一下。我认为即使我使用 CG 着色器，你也应该能够为 java 中的非 CG 内容提供一个等价物。这样做的好处是您最终会得到一个查找纹理、一个内存中的对象和一个保存顶点的缓冲区，这对于查找非常快速。

希望这可以帮助。

# asp.net-mvc-3 - 自动刷新 div mvc3 ASP.Net

> ID：11276273
> 
> 赞同：0
> 
> 时间：2012-06-30T17:45:49.160
> 
> 标签：asp.net-mvc-3

在 Home Created Index as on View 和 PartialView as ViewData

但是 Div 没有得到刷新。

```
<script type="text/javascript">

   $(document).ready(function () {

       var refreshid = setInterval(function () {
           alert("test");
           $("#dynamictabs").load("/Home/Index/")
       }, 9000);
       $.ajaxSetup({ cache: false });
   });

</script>
<div class="dynamictabs">
   @Html.Partial("ViewData", @Model);
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:49:59.767

尝试以下操作：

```
<script type="text/javascript">
    $(document).ready(function () {
        window.setInterval(function () {
            var url = '@Url.Action("SomePartial", "Home")';
            $('#dynamictabs').load(url)
        }, 9000);
        $.ajaxSetup({ cache: false });
    });
</script>
<div class="dynamictabs">
    @Html.Partial("SomePartial")
</div> 
```

然后你将有一个控制器：

```
public class HomeController: Controller
{
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult SomePartial()
    {
        return PartialView();
    }
} 
```

然后你会有一个`SomePartial.cshtml`：

```
@DateTime.Now 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T17:50:41.440

你能解释一下你在这里想要做什么吗？根据您的代码，我看到您已将时间间隔设置为 9 秒。您正在尝试将内容从 home/index 加载到#dynamictabs 中。此元素是否在同一页面上？

# iphone - 使用 Pin 添加 UIMapView 缩略图

> ID：11276275
> 
> 赞同：1
> 
> 时间：2012-06-30T17:46:02.367
> 
> 标签：iphone, objective-c, mkmapview

我一直在尝试实现一个 UIMapView 图标，就像这张图片中的那样。有人知道这个应用程序是如何创建缩略图的吗？

**编辑**

尝试使用以下代码实现这一点：

```
CLLocationCoordinate2D restaurantLocation = CLLocationCoordinate2DMake(Latitude, Longitude);
MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(restaurantLocation, 1000, 1000);

_mapView.region = region;
_mapView.hidden = NO;

_annotation = [[MKPointAnnotation alloc] init];
_annotation.coordinate = restaurantLocation;
//annotation.title = _restaurantInformation 

[_mapView addAnnotation:_annotation];

UIGraphicsBeginImageContext(_mapView.frame.size);
[_mapView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *mapImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

CGSize newSize;
newSize.width = 50; // any width u want
newSize.height= 80; // any height u want
UIGraphicsBeginImageContext(newSize);
[mapImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height)]; 
_mapThumbnail.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

![在此处输入图像描述](../Images/3739d87d19275986e97515367911b339.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T06:22:07.937

**此代码用于显示特定位置的缩略图及其对我有用**

```
NSString *staticMapUrl = [NSString stringWithFormat:@"http://maps.google.com/maps/api/staticmap?markers=color:red|%f,%f&%@&sensor=true",lat, log,@"zoom=10&size=114x116"];
NSURL *mapUrl = [NSURL URLWithString:[staticMapUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:mapUrl]];
[imgViewClue setImage:image]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:15:29.503

Mapview 中带有位置的注释应位于中心。现在

```
UIGraphicsBeginImageContext(mapView.frame.size);
[mapView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *mapImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

用于创建 mapImage 的缩略图调整大小

```
CGSize newSize;
newSize.width = 50; // any width you want
newSize.height= 80; // any height you want
UIGraphicsBeginImageContext(newSize);
[mapImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height)]; 
UIImage* thumbnail = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

另一种方式是

你可以试试[谷歌静态地图 API](https://developers.google.com/maps/documentation/staticmaps/#quick_example)

这是示例代码

```
NSString *urlString = @"http://maps.googleapis.com/maps/api/staticmap?center=Berkeley,CA&zoom=14&size=200x200&sensor=false";
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:urlString]];
UIImage *thumbnail= [UIImage imageWithData:data];
[yourImageView setImage:thumbnail]; 
```

通过这个你可以得到基于你的坐标的静态图像。

# node.js - 尝试解析多行字符串时，js-yaml 冻结

> ID：11276277
> 
> 赞同：1
> 
> 时间：2012-06-30T17:46:56.693
> 
> 标签：node.js, coffeescript, yaml

尝试在我的 node.js 应用程序中使用[js-yaml时遇到问题。](https://github.com/visionmedia/js-yaml)

我的代码（在coffeescript中，但我相信它对于普通的javascript用户来说是可读的）看起来像这样：

```
loadConfig: (path, callback = false) =>
  fs.readFile path, 'utf8', (err, data) =>
    console.log data
    throw err if err
    @config = yaml.eval data #freezes here as mentioned below
    console.log @config 
```

当尝试解析这样的 yaml 配置文件时：

```
foo: bar 
```

一切都按预期进行。但是当我把它改成这样的时候：

```
foo:
  bar: baz 
```

甚至：

```
# bla bla
foo: bar 
```

我的功能冻结没有任何错误。`console.log`没有达到第二个。在冻结一段时间后，该应用程序会自行终止。

我尝试更改行尾格式无济于事。有谁知道问题的原因或如何调试/排除故障？

# eclipse - 如何在 RDF 或 OWL 本体之上构建 GUI

> ID：11276281
> 
> 赞同：1
> 
> 时间：2012-06-30T17:47:19.133
> 
> 标签：eclipse, gwt, rdf, jena, owl

我使用 Eclipse 和 OWL API 或 Jena 来加载我的本体。我想将本体中的实例映射到 GUI 中的可点击图像或图标，以便可视化本体以供人类使用。我可以使用 GWT Designer 创建接口，但有人可以建议我如何将接口的某些部分链接到本体中的实例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T16:06:14.717

最后我使用了 jOWL 库：[jOWL](http://jowl.ontologyonline.org/)

# ruby-on-rails-3 - Rails 3 中的日期和日期范围

> ID：11276282
> 
> 赞同：1
> 
> 时间：2012-06-30T17:47:27.997
> 
> 标签：ruby-on-rails-3, datetime, select

我有一个带有处方模型的 Rails 3 应用程序。该模型有多个字段，其中两个用于计算和显示处方的持续时间。

目前，用户在文本字段中输入一个值，例如“3 个月”，然后手动将日期时间输入更改为从现在起三个月。这似乎是为用户自动化的完美形式。

目前的字段是这样的：

**治疗时间**

```
<%= f.text_field :duration, :class => "input-text" %> 
```

**到期日期**

```
<%= f.datetime_select :expiry, :order => [:day, :month, :year], :class => "input-text" %> 
```

所以，我的问题。如何为持续时间字段创建两个下拉列表，例如：

```
[1] [Day] 
```

用户可以从第一个列表中选择数字，然后在第二个列表中选择日、周或月。

他们使用持续时间选择框选择的值将保存为文本字符串，例如“1 个月”，1 个月内的 Time.now 值将保存为到期列中的日期时间值。

这样的事情可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T01:51:45.463

我将提供一个示例，说明您如何使用[长期 gem](https://github.com/mojombo/chronic)，因为它似乎是为此目的量身定制的：

```
require 'chronic'
duration = "3 months" # => "3 months" 
Time.now # => 2012-07-09 18:43:50 -0700 
Chronic.parse(duration + " from now") # => 2012-10-09 18:43:55 -0700 
```

如果我正确理解了您的用例，那么您可以完全摆脱日期时间选择。询问用户文本持续时间并将其分配给文本属性。然后使用chronic 从文本参数中确定时间值并将其分配给datetime 属性。为了获得额外的积分，在提交表单之前异步获取解析的时间值并将其显示在页面上，以便他们可以看到他们提交的内容是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:04:20.123

You can just do something easy like:

```
Time.now + 10.days 
```

Source: [How to add 10 days to current time in Rails](https://stackoverflow.com/questions/4654457/how-to-add-10-days-to-current-time-in-rails)

And how to do drop-downs?

[Drop down box in Rails](https://stackoverflow.com/questions/995923/drop-down-box-in-rails)

Assuming the prescription is valid at the time of object creation, you can store the start date in the database as the current time Time.now (may want to convert to a datetime) and then based on the drop-down, add the amount of time until it expires like off the top of my head:

```
eval "Time.now + #{params[:prescription][:amount].#{params[:prescription][:time_type]}" 
```

Hope that made sense. I would look up a better way to add the time though that maybe doesn't use eval. Heres the time reference: [http://api.rubyonrails.org/classes/Time.html](http://api.rubyonrails.org/classes/Time.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T04:35:08.803

首先，将您的持续时间字段更改为具有 1-30 或任何您想要的数字的选择菜单。

然后在处理您的表单的控制器操作中：

```
@prescription = Prescription.new(params[:prescrption])
@prescription.duration = "#{pluralize(params[:prescription][:duration], params[:prescription][:expiry])}"
if params[:prescription][:expiry] == "Day"
    @prescription.expiry = Time.now + params[:prescription][:duration].days
elsif params[:prescription][:expiry] == "Week"
    # Put week logic here
elsif params[:prescription][:expiry] == "Month"
    # Put month logic here
end

# Put the rest of the @prescription.save stuff here. 
```

这有点冗长，但我认为这就是在 Ruby 中设置时间的方式......

# ruby-on-rails-3 - 关于如何使用 Rspec 和 Cucumber 进行 TDD/BDD 的真实示例

> ID：11276290
> 
> 赞同：0
> 
> 时间：2012-06-30T17:48:33.743
> 
> 标签：ruby-on-rails-3, tdd, cucumber, bdd, rspec2

我发现在 Rails 中开始使用 TDD 并不像人们想象的那么容易。我搜索了一些示例，但没有人真正解释如何使用 Rspec AND cucumber 进行 TDD/BDD。他们通常使用旧版本的 rspec，或者更喜欢另一种（因此您会发现黄瓜测试和 rspec 测试是分开的）。顺便说一句，说要做什么，但真正的过程通常根本没有解释（我读过很多关于让它们与 Capybara 一起工作，但只有一次关于如何与它们一起进行 bdd）。

我想知道如何一起使用它们，如何避免测试重复（禁用视图规范和其他应该用黄瓜完成的测试），也许是对什么不测试的解释（例如，我发现测试没用在大多数情况下 HTML 输出，测试您是否正在登录以匹配您所看到的内容（例如 Flash 消息）会很有用）。

您能否提供一个分步列表，说明如何同时使用这两个工具进行 BDD？一个新的教程（使用最新版本）或者截屏视频会很好。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T18:37:48.497

我强烈向您推荐[Rspec 书](http://pragprog.com/book/achbd/the-rspec-book)，这正是您正在寻找的：

它解释了如何将 Rspec 和 Cucumber 与一个简单的 2 个循环过程一起使用：外部大循环是您使用 cucumber 执行的测试 - 代码 - 重构过程，每个步骤都由您执行的测试 - 代码 - 重构过程的多次迭代组成与 Rspec。

那本书同时解释了如何以及何时使用这两种工具。

如果您想要更广泛地了解 TDD-BDD，我还建议您[阅读 GOOS 书](http://www.growing-object-oriented-software.com/)，它与语言/工具无关，并且更面向过程。

# c - 为什么编译器不能（或不能）将可预测的加法循环优化为乘法？

> ID：11276291
> 
> 赞同：133
> 
> 时间：2012-06-30T17:48:47.927
> 
> 标签：c, performance, compiler-optimization

[这是在阅读Mysticial](https://stackoverflow.com/users/922184/mysticial)对这个问题的精彩回答时想到的一个问题：[为什么处理排序数组比处理未排序数组更快](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array)？

所涉及类型的上下文：

```
const unsigned arraySize = 32768;
int data[arraySize];
long long sum = 0; 
```

在他的回答中，他解释说英特尔编译器 (ICC) 对此进行了优化：

```
for (int i = 0; i < 100000; ++i)
    for (int c = 0; c < arraySize; ++c)
        if (data[c] >= 128)
            sum += data[c]; 
```

...变成与此等价的东西：

```
for (int c = 0; c < arraySize; ++c)
    if (data[c] >= 128)
        for (int i = 0; i < 100000; ++i)
            sum += data[c]; 
```

优化器认识到这些是等效的，因此[正在交换循环](http://en.wikipedia.org/wiki/Loop_interchange)，将分支移到内部循环之外。非常聪明！

但它为什么不这样做呢？

```
for (int c = 0; c < arraySize; ++c)
    if (data[c] >= 128)
        sum += 100000 * data[c]; 
```

希望神秘主义者（或其他任何人）可以给出同样出色的答案。我之前从未了解过其他问题中讨论的优化，所以我非常感谢。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-06-30T19:31:49.357

编译器一般不能转换

```
for (int c = 0; c < arraySize; ++c)
    if (data[c] >= 128)
        for (int i = 0; i < 100000; ++i)
            sum += data[c]; 
```

进入

```
for (int c = 0; c < arraySize; ++c)
    if (data[c] >= 128)
        sum += 100000 * data[c]; 
```

因为后者可能导致有符号整数溢出，而前者不会。即使保证有符号二进制补码整数溢出的回绕行为，它也会改变结果（如果`data[c]`是 30000，则乘积将变为具有回绕`-1294967296`的典型 32 位s，而 100000 次加上 30000会，如果不溢出，增加3000000000）。请注意，对于具有不同数字的无符号量也是如此，溢出通常会引入一个不能出现在最终结果中的约简模数。`int``sum``sum``100000 * data[c]``2^32`

它可以把它变成

```
for (int c = 0; c < arraySize; ++c)
    if (data[c] >= 128)
        sum += 100000LL * data[c];  // resp. 100000ull 
```

但是，如果像往常一样，`long long`足够大于`int`.

为什么它不这样做，我不知道，我猜这是[Mysticial 所说](https://stackoverflow.com/questions/11276291/why-cant-or-doesnt-the-compiler-optimize-a-predictable-addition-loop-into-a/11276462#comment14828681_11276291)的，“显然，它不会在循环交换后运行循环折叠通道”。

请注意，循环交换本身通常无效（对于有符号整数），因为

```
for (int c = 0; c < arraySize; ++c)
    if (condition(data[c]))
        for (int i = 0; i < 100000; ++i)
            sum += data[c]; 
```

可能导致溢出

```
for (int i = 0; i < 100000; ++i)
    for (int c = 0; c < arraySize; ++c)
        if (condition(data[c]))
            sum += data[c]; 
```

不会。这里是洁净的，因为条件确保所有`data[c]`添加的都具有相同的符号，所以如果一个溢出，两者都会。

不过，我不太确定编译器是否考虑到了这一点（@Mysticial，您能否尝试使用类似`data[c] & 0x80`or 这样的条件，这对于正值和负值来说都是正确的？）。我让编译器进行了无效的优化（例如，几年前，我有一个 ICC（11.0，iirc）使用有符号的 32 位整数到双精度转换，`1.0/n`其中`n`是一个`unsigned int`。大约是 gcc 的两倍输出。但是错了，很多值都大于`2^31`，哎呀。）。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-06-30T18:11:23.763

此答案不适用于链接的特定案例，但确实适用于问题标题，并且可能对未来的读者感兴趣：

**由于精度有限，重复的浮点加法不等于乘法**。考虑：

```
float const step = 1e-15;
float const init = 1;
long int const count = 1000000000;

float result1 = init;
for( int i = 0; i < count; ++i ) result1 += step;

float result2 = init;
result2 += step * count;

cout << (result1 - result2); 
```

[演示](https://ideone.com/7RhfP)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-30T18:00:17.793

编译器包含进行优化的各种通道。通常在每次传递中，要么对语句进行优化，要么进行循环优化。目前还没有基于循环头对循环体进行优化的模型。这很难检测并且不太常见。

所做的优化是循环不变的代码运动。这可以使用一组技术来完成。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-30T18:09:44.437

好吧，假设我们谈论的是整数运算，我猜一些编译器可能会进行这种优化。

同时，一些编译器可能拒绝这样做，因为用乘法代替重复的加法可能会改变代码的溢出行为。对于无符号整数类型，它不应该有所作为，因为它们的溢出行为完全由语言指定。但是对于已签名的，它可能（虽然可能不在 2 的补码平台上）。确实，有符号溢出实际上会导致 C 中的未定义行为，这意味着完全忽略溢出语义应该是完全可以的，但并非所有编译器都足够勇敢地这样做。它经常引起“C 只​​是高级汇编语言”人群的大量批评。（还记得 GCC 引入基于严格别名语义的优化时发生了什么吗？）

从历史上看，GCC 已经表明自己是一个编译器，它具有采取如此激烈的步骤所需要的一切，但其他编译器可能更愿意坚持感知的“用户意图”行为，即使它没有被语言定义。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-12-31T16:12:08.293

现在可以了——[至少，clang 可以](https://godbolt.org/z/ECbJ5P)：

```
long long add_100k_signed(int *data, int arraySize)
{
    long long sum = 0;

    for (int c = 0; c < arraySize; ++c)
        if (data[c] >= 128)
            for (int i = 0; i < 100000; ++i)
                sum += data[c];
    return sum;
} 
```

使用 -O1 编译为

```
add_100k_signed:                        # @add_100k_signed
        test    esi, esi
        jle     .LBB0_1
        mov     r9d, esi
        xor     r8d, r8d
        xor     esi, esi
        xor     eax, eax
.LBB0_4:                                # =>This Inner Loop Header: Depth=1
        movsxd  rdx, dword ptr [rdi + 4*rsi]
        imul    rcx, rdx, 100000
        cmp     rdx, 127
        cmovle  rcx, r8
        add     rax, rcx
        add     rsi, 1
        cmp     r9, rsi
        jne     .LBB0_4
        ret
.LBB0_1:
        xor     eax, eax
        ret 
```

* * *

整数溢出与它无关；如果存在导致未定义行为的整数溢出，则在任何一种情况下都可能发生。这是使用[代替](https://godbolt.org/z/4iLj5T)[的相同类型的函数`int``long`](https://godbolt.org/z/4iLj5T)：

```
int add_100k_signed(int *data, int arraySize)
{
    int sum = 0;

    for (int c = 0; c < arraySize; ++c)
        if (data[c] >= 128)
            for (int i = 0; i < 100000; ++i)
                sum += data[c];
    return sum;
} 
```

使用 -O1 编译为

```
add_100k_signed:                        # @add_100k_signed
        test    esi, esi
        jle     .LBB0_1
        mov     r9d, esi
        xor     r8d, r8d
        xor     esi, esi
        xor     eax, eax
.LBB0_4:                                # =>This Inner Loop Header: Depth=1
        mov     edx, dword ptr [rdi + 4*rsi]
        imul    ecx, edx, 100000
        cmp     edx, 127
        cmovle  ecx, r8d
        add     eax, ecx
        add     rsi, 1
        cmp     r9, rsi
        jne     .LBB0_4
        ret
.LBB0_1:
        xor     eax, eax
        ret 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-30T18:20:54.753

这种优化存在概念上的障碍。[编译器作者在强度降低](https://en.wikipedia.org/wiki/Strength_reduction)上花费了大量精力——例如，用加法和移位代替乘法。他们习惯于认为乘法是不好的。所以一个人应该走另一条路的情况是令人惊讶和违反直觉的。所以没有人想去实现它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-09-29T02:07:47.087

开发和维护编译器的人花在工作上的时间和精力有限，因此他们通常希望专注于用户最关心的事情：将编写良好的代码转化为快速代码。他们不想花时间试图找到将愚蠢的代码变成快速代码的方法——这就是代码审查的目的。在高级语言中，可能存在表达重要思想的“愚蠢”代码，因此值得开发人员花时间加快速度——例如，砍伐森林的捷径和流融合允许 Haskell 程序围绕某些类型的惰性构建生成的数据结构被编译成不分配内存的紧密循环。但这种激励根本不适用于将循环加法转换为乘法。如果你想让它快一点，

# asp.net - 如何使用 python+mechanize 在 asp.net 网站上按下按钮

> ID：11276294
> 
> 赞同：1
> 
> 时间：2012-06-30T17:49:03.243
> 
> 标签：asp.net, python, mechanize

有一个网站我需要抓取。我可以填写必要的数据。问题是我不明白如何按下按钮来获取结果页面。

该按钮具有以下代码：

```
<input type="button" value="Search!" onclick="SearchSmth();" id="btSearch"> 
```

因此，因为类型不是“提交”，所以尝试使用 Browser.submit() 失败。我尝试使用这样的东西：

```
resp = b.click(type="button", id="btSearch") 
```

但它也失败了：

```
ClientForm.ControlNotFoundError: no control matching type 'button', kind 'clickable', id 'btSearch' 
```

我应该怎么做才能按下这个按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T02:33:18.787

你用过[zope.testbrowser](http://pypi.python.org/pypi?%3aaction=display&name=zope.testbrowser)吗？这是 python 机械化模块的包装器。您可以使用`browser.getControl(name='text-value')`zope.testbrowser 的 getControl 方法。[您可以在此处](http://pypi.python.org/pypi?%3aaction=display&name=zope.testbrowser)查看更多示例

# android - 我应该如何通过短信发送我的 GPS 坐标？

> ID：11276295
> 
> 赞同：2
> 
> 时间：2012-06-30T17:49:49.533
> 
> 标签：android, android-intent, gps, sms, bundle

我在使用 SmsManager 通过 SMS 发送坐标时遇到问题。

我对类之间的传输变量有问题，所以我使用了 Intent 和 Bundle，但它只显示 **NULL**。这个方法有错吗？ *我应该使用数据库吗？* 请帮忙 ？

**ZoltrixGPSActivity 类**

```
package com.zoltrix.gps;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class ZoltrixGPSActivity extends Activity {

    TextView textLat;
    TextView textLong;
    TextView textAlt;
    TextView textPro;
    TextView textAcc;
    TextView textSpeed;
    public String onLocat;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button btn1 = (Button) findViewById(R.id.buttonExit);
        btn1.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // exit
                finish();
                System.exit(0);
            }
        });

        textLat = (TextView) findViewById(R.id.textLat);
        textLong = (TextView) findViewById(R.id.textLong);
        textAlt = (TextView) findViewById(R.id.textAlt);
        textPro = (TextView) findViewById(R.id.textPro);
        textAcc = (TextView) findViewById(R.id.textAcc);
        textSpeed = (TextView) findViewById(R.id.textSpeed);

        LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        LocationListener ll = new mylocationlistener();
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);
    }

    class mylocationlistener implements LocationListener {

        public void onLocationChanged(Location location) {
            if (location != null) {
                double pLong = location.getLongitude();
                double pLat = location.getLatitude();
                double pAlt = location.getAltitude();
                String PPro = location.getProvider();
                float PAcc = location.getAccuracy();
                float PSpeed = location.getSpeed();

                textLat.setText(Double.toString(pLat));
                textLong.setText(Double.toString(pLong));
                textAlt.setText(Double.toString(pAlt));
                textPro.setText(PPro);
                textAcc.setText(Float.toString(PAcc));
                textSpeed.setText(Double.toString(PSpeed));

                Intent i = new Intent(ZoltrixGPSActivity.this,
                        SendSMSActivity.class);
                i.putExtra("wysokosc", pLat);
                i.putExtra("speed", PSpeed);
                startActivity(i);

            }

        }

        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

    }

} 
```

**发送短信活动类**

```
package com.zoltrix.gps;

import android.app.Activity;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.view.View;
import android.widget.Button;

public class SendSMSActivity extends Activity {
    Button btnSendSMS;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        btnSendSMS = (Button) findViewById(R.id.btnSendSMS);
        btnSendSMS.setOnClickListener(new View.OnClickListener()

        {

            public void onClick(View v) {

                Bundle extras = getIntent().getExtras();

                String ALT = extras.getString("wysokosc");
                String SPE = extras.getString("speed");

                sendSMS("510100100", "wys" + " " + ALT + "   " + "spee" + " - "
                        + SPE);
            }

        });
    }

    // ---sends an SMS message to another device---
    private void sendSMS(String phoneNumber, String message) {
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, null, null);
    }

} 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.zoltrix.gps"
    android:versionCode="1"
    android:versionName="1.2" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="8" />

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.SEND_SMS" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="com.zoltrix.gps.SendSMSActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.zoltrix.gps.ZoltrixGPSActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:52:47.517

你把 double & float 并从意图中作为字符串尝试使两者相同

尝试这种方式一次..

```
i.putExtra("wysokosc", pLat+"");
i.putExtra("speed", PSpeed+""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:58:29.450

尝试：

```
i.putExtra("wysokosc",Double.toString(pLat));
i.putExtra("speed", Float.toString(PSpeed)); 
```

代替

```
i.putExtra("wysokosc", pLat);
i.putExtra("speed", PSpeed); 
```

并在 manifast.xml 中声明 ZoltrixGPSActivity ：

```
<activity
            android:name=".ZoltrixGPSActivity" /> 
```

代替

```
<activity
            android:name="com.zoltrix.gps.ZoltrixGPSActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

并在manifast中添加这些权限

```
<uses-permission android:name="android.permission.INTERNET" /> 
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

# namespaces - gevent-socketio 和命名空间

> ID：11276298
> 
> 赞同：0
> 
> 时间：2012-06-30T17:50:01.997
> 
> 标签：namespaces, gevent

有没有人尝试将 gevent-socketio 与默认值（即 socket.io）以外的命名空间一起使用？我真的想使用不同的命名空间，但我无法让示例（聊天）程序工作。任何有关如何配置名称空间的提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:11:46.593

在他们介绍命名空间之前，我使用了 gevent-socketio。在线上发送的消息如下所示：

```
{'namespace': { 'data': 'value', .... }} 
```

自己编写一些东西很容易，在客户端和服务器端检查命名空间的第一个值是什么并调用适当的处理程序。所以现在我只使用普通的 gevent-websocket 库。ws4py 也可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-06T16:01:55.710

您正在谈论的“命名空间”（socket.io）现在称为“资源”：[https ://github.com/abourget/gevent-socketio/blob/839d92c4d736f00a1ca886d4d98f027981e47476/socketio/server.py#L58](https://github.com/abourget/gevent-socketio/blob/839d92c4d736f00a1ca886d4d98f027981e47476/socketio/server.py#L58)

# jqgrid - jqgrid - 预定义格式化程序操作 - 更改编辑选定行按钮的默认操作

> ID：11276300
> 
> 赞同：1
> 
> 时间：2012-06-30T17:50:23.113
> 
> 标签：jqgrid

我们可以更改“编辑选定行”按钮的默认操作吗？

这是我的网格代码

```
jQuery("#detFlex62_1").jqGrid({
    url: root + mod + '/detaillistview', 
    datatype: "clientSide", 
    colNames:[' ', '<?=lang("users_company_code")?>', '<?=lang("users_company_name")?>', ' ', ' '], 
    colModel:[ 
        {name:'myac', width:50, fixed:true, sortable:false, resize:false, formatter:'actions', formatoptions:{keys:true,delOptions: {reloadAfterSubmit:false},editOptions: {reloadAfterSubmit:false}}},
        {name:'company_code',index:'company_code', width:100}, 
        {name:'company_name',index:'company_name', width:100}, 
        {name:'company_id',index:'company_id', width:100,hidden:true}, 
        {name:'company_access_id',index:'company_access_id', width:100,hidden:true} 
        ], 
    width: $('.body').width()-40, 
    height: 120, 
    pager: '#pagerFlex62_1', 
    sortname: 'user_id', 
    sortorder: "desc", 
    editurl: root + mod + '/detailpost',
    caption:"<?=lang("users_title")?>", 
    onSelectRow: function(id){ 
        activedf = "#detFlex62_1";
    }
}); 

jQuery("#detFlex62_1").jqGrid('navGrid','#pagerFlex62_1',{edit:false,del:false,search:false, addfunc: df_add_1}); 
```

我知道我应该在代码的 editOptions 部分中添加一些内容。现在我只放了 reloadAfterSubmit:false。执行我们自己的自定义功能的选项是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:16:17.433

如果您在导航栏中按下“编辑”按钮时只需要调用自定义函数，您的导航网格应如下所示：

```
jQuery("#detFlex62_1").jqGrid('navGrid', "#mainGridNavi", { edit: true, add: false, del: false, editfunc: function() { alert('test'); }}) 
```

问候。

# python - 你会用什么来用 python 创建一个交互式几何程序？

> ID：11276302
> 
> 赞同：2
> 
> 时间：2012-06-30T17:50:28.000
> 
> 标签：python, geometry, vector-graphics, interactive

您会推荐哪些库/模块来创建交互式几何程序？
我发现的包括：[Pyglet](http://pyglet.org/)、[Pygame](http://www.pygame.org/news.html)、[Pycairo](http://cairographics.org/pycairo/)、[Sympy](http://docs.sympy.org/0.7.1/modules/geometry.html)

我将通过一个示例来说明基本要求：

*   通过单击画布上的两个位置创建两个 Point 对象。
*   根据这两个点创建两个相交的圆形对象。
*   检测两个圆并计算它们的交点。

我想使用支持抗锯齿的画布。
我还希望能够生成（导出）具有透明背景的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T17:54:42.293

如果您对 OpenGL 有一点经验，我会认真推荐 pyglet。非常可定制。如果您不这样做，请获取它，因为在 Python 中，实际上并不存在具有“画布风格”界面的游戏/渲染库，除了 pygame. 但是pygame...

远离 pygame。远离。pygame 有可怕的设计、文档、用它编写的代码和性能。

我没有与其他两个人（或任何其他人，事实上）的经验。遗憾的是，Python 中这个域的选择并不多（这也是我开始这样一个项目的原因，但它仍然太不稳定和 WIP）。最值得注意的是，不存在对抗锯齿、基元和交集计算等内容的内置支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T07:10:20.283

我使用 tkinter 创建了一个交互式几何板库。

[http://bitbucket.org/zambu/pygraph](http://bitbucket.org/zambu/pygraph)

# javascript - Rails：为 JavaScript 中的每个大括号抛出语法错误

> ID：11276304
> 
> 赞同：1
> 
> 时间：2012-06-30T17:50:59.530
> 
> 标签：javascript, ruby-on-rails

我有一个正常运行的 JavaScript 程序，如果我将代码直接粘贴到 Rails 视图中，它可以正常工作。当我将它放在 assets/javascript 中并使用 javascript_include_tag 调用它时，每次出现大括号时都会出现语法错误。例如：

```
var rect = {}; 
```

引发错误，同时：

```
var rect = new Object(); 
```

才不是。同样，创建这样的对象会引发错误：

```
function tag(x, y, width, height){
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
    this.book = books[0];
} 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:36:12.857

我只能猜测，但也许您忘记重命名为您生成的 javascript 文件？

从 Rails 3.1 开始，它默认创建带有`.coffee`扩展名的文件，因此它希望[Coffeescript](http://coffeescript.org/)被写入其中。

只需尝试将它们重命名为`.js`而不是`.js.coffee`它应该可以工作

# java - ImageIcon 参考麻烦

> ID：11276306
> 
> 赞同：4
> 
> 时间：2012-06-30T17:51:43.530
> 
> 标签：java, swing, pass-by-reference, pass-by-value, imageicon

我想按值传递 ImageIcon 实例，因为我们知道默认情况下它是按值传递引用。有没有办法解决这个问题？

```
ImageIcon img1 = new ImageIcon();
ImageIcon img2 = new ImageIcon();

img1 = img2;   // both share the same reference....... 
```

我尝试使用 ImageIcon`getImage()`和`setImage()`.

但实际上我的程序包括将图像写入文件并且图像的质量似乎发生了变化。

简而言之，有没有一种方法可以使用函数

```
img1 = func(img2); // both do not share the same refernce. But the value is copied 
```

至少我怎样才能在使用`getImage()`or时保持准确的图像质量`setImage()`？

根据要求提供一些附加信息。

我正在使用的是 jpg 图像，并且我已将函数完全包含为 image = img1.getimage();
img2.setImage(图像);

我维护了一个单独的 java 类，它包含默认的 ImageIcon 包含 jpg 图像，我正在使用一些类方法从中检索图像

```
ImageIcon defaulticon = new ImageIcon("d:\\default.jpg");
public void getdefaultimage(ImageIcon img)
{
    img.setImage(defaulticon.getImage());
}

// The class which I maintained specifically for this purpose is a pure java class. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T18:07:23.937

如果您想复制 ImageIcon，您可以尝试：`img2 = new ImageIcon(img1.getImage());`我会确保我读入并写出 .png（无损）图像，而不是 .jpg（有损）图像。

但这应该与图像质量无关，我怀疑会解决你的问题。我担心您的问题出在未显示的代码的其他地方，您可能会通过调整图像大小或通过有损方法（例如使用 .jpg 文件）或通过减少每个像素的字节数来存储和检索图像来降低图像质量。 .

否则，如果您仍然遇到问题，请考虑告诉我们更多有关问题的信息，因为我再次担心问题更多在于图像质量的损失，而不是共享参考资料。

# jquery - Uploadify formData：为什么jquery不会通过post发送参数？

> ID：11276307
> 
> 赞同：3
> 
> 时间：2012-06-30T17:51:50.747
> 
> 标签：jquery, uploadify

有我的代码：

```
$('#file_upload').uploadify({
        'swf'      : 'uploadify.swf',
        'uploader' : 'uploadify.php',
        'onSelect' : function(file) {
            $('#start').removeClass('hidden');
        },
        'method'   : 'post',
        'formData' : {
            'to': $('input#to').val(),
            'from': $('input#from').val(),
            'subject': $('input#subject').val()
        },
        'onQueueComplete' : function(queueData) {
            window.location.replace("index.php?success=uploaded");
        },
        'onUploadSuccess' : function(file, data, response) {
            alert('The file ' + file.name + ' was successfully uploaded with a response of ' + response + ':' + data);
        }
        // Your options here
    }); 
```

如您所见，我通过 POST 方法发送三个参数 TO、FROM、SUBJECT。

有服务器脚本

```
if (!empty($_FILES)) {
$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
$targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

// Validate the file type
$fileTypes = array('jpg','jpeg','gif','png'); // File extensions
$fileParts = pathinfo($_FILES['Filedata']['name']);

if (move_uploaded_file($tempFile, $targetFile)) {

    echo $_REQUEST['subject'];
} else {
    echo "Something wrong";
}
} 
```

并回显 $_REQUEST['subject']; 什么都不返回 我的错误在哪里？

例如，如果我将 'subject': $('input#subject').val() 更改为 'subject': 'test subject' 就可以了。但我需要从输入中发送一个值。我该怎么做？

多谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T23:25:49.140

您在第一次实例化 Uploadify 时设置 formData，而不是在提交上传时设置。如果您这样做，您将在页面加载时将 formData 设置为这些字段的值。

相反，使用 onUploadStart 选项在文件上传之前设置 formData...

```
$('#file_upload').uploadify({
    'swf'      : 'uploadify.swf',
    'uploader' : 'uploadify.php',
    'onSelect' : function(file) {
        $('#start').removeClass('hidden');
    },
    'method'   : 'post',
    'onQueueComplete' : function(queueData) {
        window.location.replace("index.php?success=uploaded");
    },
    'onUploadStart' : function(file) {
        $('#file_upload').uploadify('settings','formData',{
            'to': $('input#to').val(),
            'from': $('input#from').val(),
            'subject': $('input#subject').val()
        });
    }
    'onUploadSuccess' : function(file, data, response) {
        alert('The file ' + file.name + ' was successfully uploaded with a response of ' + response + ':' + data);
    }
    // Your options here
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-11T15:30:10.113

Uploadify 有点棘手。我们感兴趣的事件是“onUploadStart”。这实际上应该命名为“onBeforeUploadStart”，因为它确实在发送 POST 数据之前被触发。因此，它是更新 formData 的理想场所（这是 Uploadify 发送的唯一数据 - 它真的不关心您在其他地方有什么输入）。

所以，我喜欢在没有任何选项的情况下初始化 Uploadify。在发送（==“onUploadStart”）之前，我更新了表单数据。

我的代码向 POST 数据添加了一个键控元素并为其赋值。

```
var ts = '<?php $t = time(); echo $t; ?>';
var hs = '<?php echo md5($t . $fileupload_securityhash); ?>';

$("#fileUploadInput").uploadify({
  'formData'      : {},
  'onUploadStart' : function(file) {
     uploadify_update_formdata();       
  }
});

function uploadify_update_formdata(){
    $("#fileUploadInput").uploadify('settings','formData', {
        'token'          : hs,
        'ts'             : ts, 
        'gallery[title]' : $('input[name="gallery[title]"]').val()
    });
} 
```

在服务器端：所有 Uploadify-Form-Data 都在 $_POST 中发送。

重要提示：uploadify 表单数据不会在发送时查找变量值。意思是，如果你有类似的东西：

```
'formData' : { 'myInputVal' : $(input[name=myInput]).val() } 
```

这*不会在发送时更新*。所有变量都设置在 Uploadify 的 INIT 上，然后永远不会更改，除非您设置了 $.uploadify.settings。

我还喜欢为输入设置一个事件监听器，以确保：

```
$('form input').on('change', function(){
  uploadify_update_formdata()
}); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T17:59:30.030

如果您的输入被称为“#to”，那么在 jquery 选择器中只需使用“#to”而不是“input#to”。那应该这样做。:)

# wpf - 在 WPF 应用程序中引导温莎城堡 IoC

> ID：11276308
> 
> 赞同：1
> 
> 时间：2012-06-30T17:51:58.610
> 
> 标签：wpf, inversion-of-control, castle-windsor, ioc-container

我习惯于将 Windsor Castle IoC 与 MVC Web 应用程序一起使用，因此我对注册组件和引导应用程序有点熟悉。

我现在正在尝试创建我的第一个 WPF 应用程序，但我有点迷失了......

在一个典型的 MVC 项目中，我会在 Global.asax 文件的 Application_Start 中注册我的所有组件。
此外，在 Global.asax 我会做这样的事情：

```
_container = new WindsorContainer();
var myControllerFactory = new MyControllerFactory(_container.Kernel);
ControllerBuilder.Current.SetControllerFactory(myControllerFactory); 
```

其中`MyControllerFactory`继承自`DefaultControllerFactory`I 将解析给我的控制器，因此所有正在使用的控制器将自动解析它们的依赖关系。

我怎么能在 WPF 应用程序中做到这一点？
我创建了一个名为的类`ContainerBootstrapper`来注册我的组件，现在我想知道如何在我的组件中使用它，`MainWindow`所以每次调用组件时，它的依赖关系都会自动解决......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T22:00:04.993

与 MVC 不同，WPF 不提供开箱即用的解耦 UI 开发框架。有几个（例如实现 MVVM 模式的[Caliburn.Micro](http://caliburnmicro.codeplex.com/)）位于 WPF 之上，并为各种 IoC 容器以及您可能会发现在 WPF 开发中有用的其他功能提供集成。

或者，您将需要直接管理容器。即在 App.xaml.cs 或 MainWindow.xaml.cs 中实例化和初始化容器，并确保通过容器的 Resolve() 函数构造新对象。如果它是一个重要的应用程序，您可能希望将其集成到应用程序的导航例程中。

# symfony - Symfony2 查询生成器

> ID：11276312
> 
> 赞同：0
> 
> 时间：2012-06-30T17:52:16.410
> 
> 标签：symfony, query-builder

我正在尝试从patentgroup_id 为空的表中获取记录。我试过这个

```
$repository = $this->getDoctrine()->getRepository('MunichInnovationGroupPatentBundle:SvPatents');
$qb1 = $repository->createQueryBuilder('sv')
    ->select('sv')
    ->where('sv.patentgroup = :patentgroup')
    ->setParameter('patentgroup', null)
    ->getQuery();
    $nogroup_patents = $qb1->getArrayResult();
   var_dump($nogroup_patents); 
```

表中有一条记录，其专利组 ID 为空，但我得到的是空数组。

有任何想法吗？我做错了什么

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:03:17.617

与您在 SQL 中执行此操作的方式相同

```
->where('sv.patentgroup IS NULL') 
```

# php - PHP：将关联数组元素移动到数组的开头

> ID：11276313
> 
> 赞同：101
> 
> 时间：2012-06-30T17:52:22.793
> 
> 标签：php

将关联数组的任何元素移动到数组开头的最佳方法是什么？

例如，假设我有以下数组：

```
$myArray = array(
    'two'   => 'Blah Blah Blah 2',
    'three' => 'Blah Blah Blah 3',
    'one'   => 'Blah Blah Blah 1',
    'four'  => 'Blah Blah Blah 4',
    'five'  => 'Blah Blah Blah 5',
); 
```

我想要做的是将“一个”元素移动到开头并以以下数组结尾：

```
$myArray = array(
    'one'   => 'Blah Blah Blah 1',
    'two'   => 'Blah Blah Blah 2',
    'three' => 'Blah Blah Blah 3',
    'four'  => 'Blah Blah Blah 4',
    'five'  => 'Blah Blah Blah 5',
); 
```

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-06-30T17:55:49.950

您可以使用数组联合运算符 ( `+`) 将原始数组连接到使用已知键 ( `one`) 的新关联数组。

```
$myArray = array('one' => $myArray['one']) + $myArray;
// or      ['one' => $myArray['one']] + $myArray; 
```

**数组键是唯一的，因此它不可能存在于两个位置。**

请参阅[有关数组运算符的文档：](https://www.php.net/manual/en/language.operators.array.php)

> + 运算符返回附加到左侧数组的右侧数组；对于两个数组中都存在的键，将使用左侧数组中的元素，而忽略右侧数组中的匹配元素。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-24T10:36:44.103

如果您有数字数组键并想要重新索引数组键，最好将其放入`array_merge`如下：

```
$myArray = array_merge(array($key => $value) + $myArray ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-19T07:55:23.340

有点晚了，但如果有人需要，我创建了这个小片段。

```
function arr_push_pos($key, $value, $pos, $arr) 
{
    $new_arr = array();
    $i = 1;

    foreach ($arr as $arr_key => $arr_value) 
    {
        if($i == $pos) 
            $new_arr[$key] = $value;

        $new_arr[$arr_key] = $arr_value;

        ++$i;
    }

    return $new_arr;
} 
```

只需调整它以满足您的需要，或使用它并取消设置要移动的索引。也适用于关联数组。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-21T18:06:15.047

这是另一个简单的单线，可以使用`array_splice()`：

```
$myArray = array_splice($myArray,array_search('one',array_keys($myArray)),1) + $myArray; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-05T20:33:50.900

如果你有 2 个数组，第一个有元素移动到第二个元素数组的顶部，你可以使用

```
$result = \array_replace($ArrayToMoveToTop, $myArray); 
```

这是一个代码示例：

```
//source array    
$myArray = [
    'two' => 'Blah Blah Blah 2',
    'three' => 'Blah Blah Blah 3',
    'one' => 'Blah Blah Blah 1',
    'four' => 'Blah Blah Blah 4',
    'five' => 'Blah Blah Blah 5',
];
// set necessary order
$orderArray = [
    'one' => '',
    'two' => '',
];
//apply it
$result = \array_replace($orderArray, $myArray);
\print_r($result); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-30T17:58:59.410

在 PHP 手册的注释中有一个用于[array_unshift](http://php.net/array_unshift)的函数，它可以用来在数组的开头添加一个带有键的元素：

```
function array_unshift_assoc(&$arr, $key, $val)
{
    $arr = array_reverse($arr, true);
    $arr[$key] = $val;
    return array_reverse($arr, true);
} 
```

使用上述函数取消设置元素并重新插入：

```
$tmp = $myArray['one'];
unset($myArray['one']);
$myArray = array_unshift_assoc($myArray, 'one', $tmp); 
```

更通用的方法可能是使用[uksort](http://php.net/uksort)按键对数组进行排序并提供您自己的排序功能。

# c# - 异步编程 APM 与 EAP

> ID：11276314
> 
> 赞同：22
> 
> 时间：2012-06-30T17:52:25.210
> 
> 标签：c#, .net, asynchronous

**异步编程模型**和**基于事件的**异步模式之间实际上有什么区别？

使用哪种方法以及何时使用？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-14T23:51:16.130

*异步编程模型*( **APM** ) 是您看到的模型和`BeginMethod(...)`配对`EndMethod(...)`模型。

例如这里是一个`Socket`使用**APM**的实现：

```
 var socket = new Socket(AddressFamily.InterNetwork, 
                        SocketType.Stream, ProtocolType.Tcp);

 // ...

 socket.BeginReceive(recvBuffer, 0, recvBuffer.Length, 
                     SocketFlags.None, ReceiveCallback, null);

 void ReceiveCallback(IAsyncResult result)
 {
   var bytesReceived = socket.EndReceive(result);

   if (bytesReceived > 0) { // Handle received data here. }

   if (socket.Connected)
   {
     // Keep receiving more data...
     socket.BeginReceive(recvBuffer, 0, recvBuffer.Length, 
                         SocketFlags.None, ReceiveCallback, null);
   }
 } 
```

基于*事件的异步模式*( **EAP** ) 是您看到的与配对的`MethodAsync(...)`模型`CancelAsync(...)`。通常有`Completed`活动。`BackgroundWorker`是这种模式的一个很好的例子。

从*C# 4.5*开始，两者都已被使用*任务并行库*( **TPL** )的`async/await`模式所取代。您将看到它们在方法名称后标有标记，并且通常返回一个可**等待**的或. 如果您能够以 .NET 4.5 为目标，则绝对应该在 APM 或 EAP 设计上使用此模式。***`Async` **`Task``Task<TResult>`*****

 *****例如，异步压缩（可能很大）文件：

```
public static async Task CompressFileAsync(string inputFile, string outputFile)
{
  using (var inputStream = File.Open(inputFile, FileMode.Open, FileAccess.Read))
  using (var outputStream = File.Create(outputFile))
  using (var deflateStream = new DeflateStream(outputStream, CompressionMode.Compress))
  {
    await inputStream.CopyToAsync(deflateStream);

    deflateStream.Close();
    outputStream.Close();
    inputStream.Close();
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T23:57:51.627

从客户端代码 POV：

EAP：您为名称以“Completed”结尾的事件设置事件处理程序，然后调用名称以“Async”结尾的方法。您有时可以调用名称中带有“取消”的方法，这可能会取消它。

APM：您调用名称以“Begin”开头的方法，然后轮询其结果或接收回调，然后调用以“End”开头的方法。

据我所知，APM 是在大多数 BCL IO 类和 WCF 中实现的，主要是较低级别的不可取消操作（如取消你只是忽略结果）。EAP 可以在更高级别的类中找到，即下载文件，其中有多个步骤和某种有意义的取消行为。

因此，如果您需要选择实施哪个（并且您故意将自己限制在这两个范围内），我想这取决于您正在做的事情是否可以取消。

从客户端代码 POV 中，您并不总是可以选择。如果可以的话，最好使用 C# 4.5 任务，它们可以通过包装器与任何较旧的异步机制一起使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-10T08:55:47.153

[MSDN 文章“决定何时实现基于事件的异步模式”](http://msdn.microsoft.com/en-us/library/ms228966.aspx)给出了全面的答案。

本文的主要思想（以及对您问题的简短回答）听起来像“默认情况下生成基于事件的模式，并可选择生成 IAsyncResult 模式”*****

# javascript - nodejs中模块内的全局对象是什么？

> ID：11276315
> 
> 赞同：3
> 
> 时间：2012-06-30T17:52:29.327
> 
> 标签：javascript, node.js, scope

我知道在节点中，每个模块都有一个局部范围，并且在一个模块中定义的变量不会逃逸到全局，除非显式导出。

我想知道的是，当我在一个模块文件中声明一个变量如下时，这个变量定义的全局对象是什么？

```
var obj = {};
// In browser, this is defined on window.obj
// How about in the node? 
```

有[一个语句](https://stackoverflow.com/a/4141647/966437)是`global`用作本地全局范围的对象，但是以下测试代码失败：

```
a = 1
console.log global.a
// undefined 
```

那么模块的全局变量是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T00:57:32.553

There is in fact a global object in node; it's simply called `global`. You can assign properties to it and access those properties just like any other object, and you can do it across modules. However, directly accessing it (`global.foo=bar` in one module, `baz=global.foo` in another) is the *only* way to access it. Unqualified variable names *never* automatically resolve to its properties the way that, say, an unqualified variable name in a browser environment would resolve to `window.somethingOrOther`. In node, every module is conceptually wrapped inside an immediate function call, so unqualified names represent local variables and have module-level scope.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T17:53:48.703

*再次编辑*我正准备得出结论，在 Node 模块中，您*无法*获得对全局对象的引用。你真的不需要；这就是模块机制的重点，我想。您导入所需的内容并导出您选择的内容。

我猜，Node 中是否存在全局对象*是*一个有趣的问题。我知道在 Rhino 中，肯定有；从 Java 容器提供给 Rhino 的代码没有隐式包装函数。通过 Java ScriptEngine 机制（可能来自“裸”Rhino 中的 Mozilla API），有一些方法可以将符号推送到全局上下文中，以使它们作为全局对象属性对 JavaScript 可见。

*哇，这变得复杂*了，Node.js 世界中的事情似乎正在发生变化。我上面写的对于 Node 0.6.2 来说是正确的，但在 0.9.0-pre 构建中，我确实有一个名为“全局”的对象，它的行为或多或少类似于浏览器中的全局对象。

* * *

### 下面的内容适用于浏览器和 Rhino 以及其他类似的上下文

您可以`this`在全局上下文中使用。如果你需要一个名字，你可以给它一个。

```
var global = this;

var obj = "Hi!";

global.obj = "Bye"; // sets "obj" 
```

一个（有点）常见的习惯用法是将代码包装在一个函数中，以保护全局命名空间。

```
(function( global ) {
  // everything
})( this ); 
```

**警告：**我不是 Node 人，所以在那种文化中可能会有一些新兴的成语。

*编辑*——我突然想到，如果 Node 确实将代码从它在一个函数中评估的文件中包装起来，并且它*没有*从全局上下文中传递`this`给它，那么就没有办法“找到”它，我不认为。如果你使用“use strict”（你应该），那没关系，因为无论如何你都不能真正搞乱全局上下文。

# scala - 使用 Reader Monad 进行依赖注入

> ID：11276319
> 
> 赞同：24
> 
> 时间：2012-06-30T17:52:54.107
> 
> 标签：scala, dependency-injection, functional-programming, monads

我最近看到了关于使用 Monads 进行 DI的讲座[Dead-Simple Dependency Injection](http://www.youtube.com/watch?v=ZasXwtTRkio)和[Dependency Injection without the Gymnastics ，印象深刻。](http://vimeo.com/44502327)我试图将它应用于一个简单的问题，但一旦它变得不平凡就失败了。我真的很想看到一个运行版本的依赖注入

*   依赖于多个必须注入的值的类
*   一个依赖于某个类的类，该类依赖于要注入的东西

如下例所示

```
trait FlyBehaviour { def fly() }
trait QuackBehaviour { def quack() }
trait Animal { def makeSound() }

// needs two behaviours injected
class Duck(val flyBehaviour: FlyBehaviour, val quackBehaviour: QuackBehaviour) extends Animal 
{
   def quack() = quackBehaviour.quack()
   def fly() = flyBehaviour.fly()
   def makeSound() = quack()
}

// needs an Animal injected (e.g. a Duck)
class Zoo(val animal: Animal)

// Spring for example would be able to provide a Zoo instance
// assuming a Zoo in configured to get a Duck injected and
// a Duck is configured to get impl. of FlyBehaviour and QuackBehaviour injected
val zoo: Zoo = InjectionFramework.get("Zoo")
zoo.animal.makeSound() 
```

使用阅读器 Monad 查看示例实现将非常有帮助，因为我只是觉得我错过了朝着正确方向的推动。

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-01T04:04:04.927

“reader monad”是 just `Function1`，所以你需要做的就是接受一个包含你需要的所有东西的参数。例如：

```
trait Config {
   def fly: FlyBehaviour
   def quack: QuackBehaviour
}

type Env[A] = Config => A 
```

现在如果你想`Duck`基于这个环境构建一个：

```
val a: Env[Animal] = c => new Duck(c.fly, c.quack) 
```

然后在此基础上构建一个`Zoo`很容易：

```
val z: Env[Zoo] = a andThen (new Zoo(_)) 
```

使用[Scalaz](http://scalaz.org)（或自己做一些工作），您可以利用一些语法技巧来“询问”配置`c`：

```
val z: Env[Zoo] = for {
  c <- ask
} yield new Zoo(Duck(c.fly, c.quack)) 
```

# javascript - IE（仅）在幻灯片中悬停时获得保证金顶部？（包括 CSS 和项目链接）

> ID：11276321
> 
> 赞同：0
> 
> 时间：2012-06-30T17:53:34.450
> 
> 标签：javascript, html, css, internet-explorer, slideshow

IE 幻灯片在悬停时会向下颠簸。

development.legendarylion.com

任何想法为什么幻灯片在悬停时获得最高边距？

项目位于：http: [//development.legendarylion.com](http://development.legendarylion.com)

CSS

```
 div#slideshow {
    width: 947px; height: 554px;
    overflow: scroll; /* Allows the slides to be viewed using scrollbar if Javascript isn't available */
    position: relative; z-index: 5;
}

ul#slides{margin: 0; padding: 0; border: 0;list-style-type:none;}
ul#nav {margin:0; padding:0;}
div#slideshow ul#nav {
    display: none;
    list-style: none;
    position: relative; top: 250px; z-index: 15;
}
    div#slideshow ul#nav li#prev {
        float: left; margin: 0 0 0 20px;
    }
div#slideshow ul#nav li#next {
    float: right; margin: 0 20px 0 0;
}
div#slideshow ul#nav li a {
    display: block; width: 20px; height: 37px; text-indent: -9999px;
}
    div#slideshow ul#nav li#prev a {
        background: url(../img/prev-b.png);
    }
    div#slideshow ul#nav li#next a {
        background: url(../img/next-b.png);
    }

div#slideshow ul#slides {
    list-style: none;
}
    div#slideshow ul#slides li {
        margin: 0 0 20px 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T20:05:57.003

似乎只在ie8及以下。您是否尝试过覆盖似乎已添加的 css 规则？举个例子

```
#slides li:hover
{
    margin-top:0px !important;
    top:0px !important;
    padding-top:0px !important;
} 
```

# python - 如何使用谷歌应用引擎处理异常

> ID：11276322
> 
> 赞同：3
> 
> 时间：2012-06-30T17:53:35.393
> 
> 标签：python, google-app-engine, exception-handling

我已经使用 GAE 一年多了，对我来说最难处理的事情之一是我原本写得很好的代码可能偶尔会因为 GAE 打嗝而引发异常。

对于未处理的异常，我已经有了一个不错的程序。我的自定义请求处理程序提供了一个不错的错误页面，管理员会收到一封电子邮件。然而，这是一种糟糕的用户体验。

我想做的是*处理*异常，以便我可以立即采取适当的措施并防止出现一些通用错误页面。

我的问题是：

1.  我应该捕获哪些异常？
2.  我应该在哪里抓到它们？

我意识到对此的完整答案是不切实际的，但我正在为最常见的情况寻找一些最佳实践。

对于我应该捕获的异常，我有时会看到不在[官方列表中](https://developers.google.com/appengine/docs/python/datastore/exceptions)的异常。例如，我收到了 UnknownError。

对于在哪里捕获异常，我想知道是否应该在每个 get/post 方法中捕获它们。像这样的东西：

```
def get(self):
    try:
        # normal get processing
    except SomeException:
        # redirect to the same page to try again and fix any data if necessary 
```

我很惊讶没有更多关于此的信息，因为这是任何 GAE 应用程序的一个重要方面。[这里](https://developers.google.com/appengine/articles/handling_datastore_errors)和[这里](http://blog.notdot.net/2010/03/Handling-downtime-The-capabilities-API-and-testing)有一些很好的文章，但这些并不能回答我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T23:53:12.287

> 我应该捕获哪些异常？

这取决于您要捕获的错误级别。根据我在官方列表和链接文章中捕获错误的经验，您将获得非常高水平的错误捕获。如果您需要超越这一点，那么放入泛型 except 比尝试预测未知错误更容易。

> 我应该在哪里抓到它们？

GAE 错误最有可能发生的地方是与数据库交互时，因此如果您没有设置一些 try-except 块，那么您在处理 GAE 问题错误处理方面的努力会得到很好的回报。

除了链接文章的建议之外，您还可以考虑将失败的操作放入任务队列。每个任务将在失败前自动重试 5 次，如果您不需要操作的即时反馈，这可以让您在一定程度上避免数据存储切换或其他服务中断。

# c# - 为什么从 LINQ Where() 方法返回的 IEnumerable 不完全被 Count() 使用？

> ID：11276328
> 
> 赞同：1
> 
> 时间：2012-06-30T17:54:27.693
> 
> 标签：c#, linq, linq-to-objects

我知道`Count()`LINQ 提供的方法有一个优化，它会检查源序列是否实现`ICollection<T>`，如果实现则调用`Count`属性，而不是遍历整个集合。使用此优化时，底层`IEnumerable<T>`不会被消耗，因此它可以被后续的其他调用消耗`Count()`。

值得注意的是，接受谓词的 Count 重载不会执行此类优化，因为它必须检查每个元素的值。

现在考虑以下完整程序：

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace count_where_issue
{
    class Program
    {
        static void Main(string[] args)
        {
            IEnumerable<int> items = new List<int> {1, 2, 3, 4, 5, 6};
            IEnumerable<int> evens = items.Where(y => y % 2 == 0);
            int count = evens.Count();
            int first = evens.First();
            Console.WriteLine("count = {0}", count);
            Console.WriteLine("first = {0}", first);
        }
    }
} 
```

打印，

```
count = 3
first = 2 
```

我的期望是 Count 需要消耗由`evens`返回的整个序列，`Where()`并且随后的调用`evens.First()`会失败，`InvalidOperationException`因为该序列不包含任何元素。

为什么这个程序会以它的方式工作？我通常不会尝试使用`IEnumerable<T>`对 `Count() 的调用。依赖这种行为是不明智的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:02:25.000

我不知道这是否是您的意思，但是`evens.Count()`两者`evens.First()`都列举了`items.Where(...)`.

您可以在以下输出中看到这一点：

```
class Program
{
    static void Main(string[] args)
    {
        IEnumerable<int> items = new List<int> { 1, 2, 3, 4, 5, 6 };
        IEnumerable<int> evens = items.Where(y => isEven(y));

        int count = evens.Count();
        Console.WriteLine("count = {0}", count);

        int first = evens.First();
        Console.WriteLine("first = {0}", first);

    }

    private static bool isEven(int y)
    {
        Console.Write(y + ": ");

        bool result = y % 2 == 0;

        Console.WriteLine(result);    
        return result;
    }
} 
```

这是：

```
1: False
2: True
3: False
4: True
5: False
6: True
count = 3
1: False
2: True
first = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:00:24.907

是什么让您觉得 Count() 会以任何方式影响原始 IEnumerable？

文档没有提到任何类似的东西......

[http://msdn.microsoft.com/en-us/library/bb338038.aspx](http://msdn.microsoft.com/en-us/library/bb338038.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T18:02:00.267

这是`IEnumerator<T>`您将无法使用的。但是， Count 和 First 各自创建一个单独的枚举器（通过调用`GetEnumerator`on `IEnumerable<T>`）。

# google-app-engine - 什么会导致 prod 和 dev 之间的这种差异？

> ID：11276329
> 
> 赞同：0
> 
> 时间：2012-06-30T17:54:35.370
> 
> 标签：google-app-engine, python-2.7, jinja2, app-engine-ndb

相同的代码，在生产中在开发中不起作用是的。

楷模：

```
class Comput(ndb.Model):
    @staticmethod
    def membership(user):
        q = ndb.gql("SELECT * FROM Members WHERE member = :1", user)
        result = q.fetch()
        return [m.comput.get() for m in result]
        #return [m.comput.get() for m in q] #same issue (dev yes, prod no)

class Members(ndb.Model):
    comput = ndb.KeyProperty(kind=Comput)
    member = ndb.UserProperty() 
```

处理程序：

```
comput_list = Comput.membership(users.get_current_user()) 
```

模板：

```
{% for comput in comput_list %}
    <tr onclick="location.href='/comput?id={$ comput.key.id() $}'"> 
```

追溯（仅在生产中）：

```
UndefinedError: 'None' has no attribute 'key' 
```

即使`comput_list`有实体也会出现。

更新：没有为成员自动生成索引，我尝试手动添加但没有任何变化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T12:58:29.140

看起来您的一个对象的属性`Members`为 None 。`comput`我会使用生产数据查看器（或添加日志语句）来查找它是哪个成员。

# joomla - Joomla（在Jooma1.5中为联系人添加新的联系人参数）

> ID：11276330
> 
> 赞同：0
> 
> 时间：2012-06-30T17:54:37.067
> 
> 标签：joomla, parameters, joomla1.5, contact

我是 Joomla 的新手，这是我在 JOOMLA 上工作的第一个项目 嗯，我有由 Youjoomla 命名的新闻行模板（你们中的大多数人可能听说过）

这是我的问题好吧，我的客户突然改变了要求，要求他在每个联系人中都需要一些额外的参数

类似于注册号公司名称等等......

Well Can Anybudy Teach me how to add new parameters to contact in Joomla 1.5 这有点急

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:21:31.310

如果您使用的是默认的 Joomla 联系系统，那么添加自定义参数是相当困难的。最好使用诸如[aiContactSafe 之](http://extensions.joomla.org/extensions/contacts-and-feedback/contact-forms/7901)类的 Contact 组件。[你也可以在这里](http://extensions.joomla.org/extensions/contacts-and-feedback/contact-forms)找到更多。希望这对您的第一个 Joomla 项目有所帮助并祝您好运

# android - 停止铃声

> ID：11276334
> 
> 赞同：0
> 
> 时间：2012-06-30T17:55:05.877
> 
> 标签：android, blacklist

我正在尝试停止铃声。当电话响起时，它会发出提示音。我试图根据某些因素来阻止这种声音，例如，黑名单上的来电者。

```
public class ReceiverClass extends BroadcastReceiver
{   
    @Override public void onReceive(Context context, Intent intent)
    {      
       if ("android.intent.action.PHONE_STATE".equals(intent.getAction()))
       {  String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);      
          if (TelephonyManager.EXTRA_STATE_RINGING.equals(state))
          {  String Caller = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER);
             if(IsCallerInBlackList(Caller) == true)
                ----Stop the ringing here????---------
          }        
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:02:33.833

使用[RingtoneManager](http://developer.android.com/reference/android/media/RingtoneManager.html)停止铃声

```
RingtoneManager ringtoneManager;
ringtoneManager= new RingtoneManager(context);
ringtoneManager.stopPreviousRingtone(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:11:02.687

我会建议

1）当你想关闭铃声时，让手机进入静音模式。通过以下陈述。

```
 AudioManager aM = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
 aM.setRingerMode(AudioManager.RINGER_MODE_SILENT); 
```

然后可以在电话停止响铃时再次将铃声模式设置为上一个

# c# - 在多行文本框中选择文本，在 C# 中单击按钮将其移动到另一个多行文本框

> ID：11276339
> 
> 赞同：0
> 
> 时间：2012-06-30T17:56:01.727
> 
> 标签：c#

我有一个我还没有遇到的问题，希望你们中的一些人可以帮助我。我正在尝试在多行文本框中选择一行，第一行、第二行或最后一行，然后在 C# 中单击按钮将其移动到另一个多行文本框。我不确定如何一次只选择一行，然后将其添加到另一个多行文本框中。如果有人有一些见解，那就太好了！谢谢！

布伦特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:52:52.590

尝试这样的事情：

```
private void button1_Click(object sender, EventArgs e)
{
    if (textBox1.Lines.Length > 0)
    {
        textBox2.Text += textBox1.Lines[textBox1.GetLineFromCharIndex(textBox1.SelectionStart)];
    }
} 
```

它正在做的是使用[GetLineFromCharIndex](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.getlinefromcharindex.aspx)和 SelectionStart 插入符号位置作为字符索引来将 Line 从[TextBox.Lines](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.lines.aspx)数组中拉出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:18:32.307

好吧，假设您将“行”定义为由其他类似字符串用换行符分隔的完整字符串，而不仅仅是在具有自动换行属性的文本字段中的单个水平面上可见的字符串为真.....

```
public void Button1_Click(object sender, ClickEventArgs e)
{
     //get the values of both boxes
     string value1 = TextBox1.Text.Trim();
     string value2 = TextBox2.Text.Trim();

     //split the value from the source box on its new line characters
     string[] parts = value1.split(Environment.NewLine);
     string last_line = parts[parts.length -1];

     //add the last row from the source box to the destination box
     value2 += (Environment.NewLine + last_line);

     //set the last_line in the source to an empty string
     parts[parts.Length -1] = String.Empty;

     //put the new values back in their text boxes
     TextBox1.Text = String.Join(Environment.NewLine, parts).Trim();
     TextBox2.Text = value2;
} 
```

如果您正在处理可见的线条和文字包装，那是一个完整的“其他球类游戏”，答案取决于您是在谈论 ASP 还是 Win App。此外，这是临时写的，因此您可能需要调整一两个字符才能编译。没有保证，大声笑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T18:18:45.240

像这样的东西会起作用：

```
public void Button1_Click(object sender, ClickEventArgs e)
{    
   string text = TextBox1.Text;

    // spliting text on the basis on newline.
    string[] myArray = text.Split(new char[] { '\n' });

    foreach (string s in myArray)
    {
       //Line by line copy
       TextBox2.Text += s;
    }
} 
```

# php - 我的插入语句有什么问题？

> ID：11276341
> 
> 赞同：0
> 
> 时间：2012-06-30T17:56:10.563
> 
> 标签：php, mysql

出于某种原因，我只能从表中选择数据，但不能插入。

即功能`nee()`工作正常，但`wee()`没有......它今天早些时候工作......有人知道原因吗？

```
Class wtf{
    private $db;
    public function __construct(){
        $this->db = new Store_Connection();
        $this->db = $this->db->dbStore();
    }

    public function nee(){
        $st = $this->db->prepare("select paid from sales where id=14");
        $st->execute();
        $product = $st->fetch(PDO::FETCH_OBJ);
        print_r($product);
    }

    public function wee(){
        $st = $this->db->prepare("insert into sales(paid) values (sdf)");
        $st->execute();

    }

}

$work = new wtf();
$work->wee(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T17:58:22.067

试试这样

```
$st = $this->db->prepare("insert into sales(paid) values ('sdf')"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:57:19.837

什么是sdf？它是文本/字符串，然后在它周围使用 '

# html - 最小化窗口时出现水平滚动条错误

> ID：11276342
> 
> 赞同：0
> 
> 时间：2012-06-30T17:56:14.597
> 
> 标签：html, css

我在编写一些 CSS 时遇到了一些困难。

每当我最小化窗口时，就会出现一个水平滚动条，这个滚动条的问题是即使我最大化窗口它也不会消失。

我可能做错了什么？

提前致谢

**CSS**

```
body {
    background-color: #C5C5C5;
    margin-left: 0px;
    margin-top: 0px;
}

html {
    overflow-y: scroll;
}

.header_bg {
    background-color: #F1F1EE;
    padding: 10px 10px 10px 10px;
    border-top: 2px solid #738ebe;
    width: 100%;
}

.header_main {
    width: 960px; // would it be better to change this to width: 80%
    margin:0 auto;
    overflow: hidden;
}

.header_main img {
    float: left;
}

.header_main div {
    float: right;
} 
```

**HTML**

```
<div class="header_bg">
    <div class="header_main">
        <img src="resources/img/login_logo.png" width="163" height="66" />
        <div>Already a member? Sign in</div>
    </div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:12:21.390

这：

```
.header_bg {
    background-color: #F1F1EE;
    padding: 10px 10px 10px 10px;
    border-top: 2px solid #738ebe;
    width: 100%;
} 
```

正在添加到它的容器的计算宽度，即 ，`body`它`header_bg`正在拉伸以适应`100%`，因此填充将`body`s 尺寸移动到视口之外，从而触发`scroll-x`。

删除它，您的滚动条就会消失：

```
padding: 10px 0; 
```

编辑：http: [//jsfiddle.net/userdude/782fc/2/](http://jsfiddle.net/userdude/782fc/2/)

完整：http: [//jsfiddle.net/userdude/782fc/2/embedded/result](http://jsfiddle.net/userdude/782fc/2/embedded/result)

或者，或者，将其`width`放在`body`with上`margin: 0 auto;`，使其自动居中：

```
body {
    background-color: #C5C5C5;
    width: 1024px;
    margin: 0 auto;
}

...

.header_bg {
    background-color: #F1F1EE;
    padding: 10px;
    border-top: 2px solid #738ebe;
    width: 100%;
}

.header_main {
    width: 100%;
    margin:0 auto;
    overflow: hidden;
} 
```

编辑：http: [//jsfiddle.net/userdude/782fc/4/](http://jsfiddle.net/userdude/782fc/4/)

完整：http: [//jsfiddle.net/userdude/782fc/4/embedded/result/](http://jsfiddle.net/userdude/782fc/4/embedded/result/)

# java - ZipInputStream(InputStream, Charset) 错误解码 ZipEntry 文件名

> ID：11276343
> 
> 赞同：6
> 
> 时间：2012-06-30T17:56:26.760
> 
> 标签：java, character-encoding, zipinputstream

Java 7 应该解决使用 UTF-8 以外的字符集解压缩 zip 档案的老问题。这可以通过构造函数来实现`ZipInputStream(InputStream, Charset)`。到目前为止，一切都很好。当显式设置 ISO-8859-1 字符集时，我可以解压缩包含带有变音符号的文件名的 zip 存档。

**但**问题是：当使用 迭代流`ZipInputStream.getNextEntry()`时，条目的名称中有错误的特殊字符。在我的情况下，变音符号“ü”被替换为“？” 性格，这显然是错误的。有人知道如何解决这个问题吗？显然`ZipEntry`忽略了`Charset`它的底层`ZipInputStream`。它看起来像另一个与 zip 相关的 JDK 错误，但我也可能做错了什么。

```
...
zipStream = new ZipInputStream(
    new BufferedInputStream(new FileInputStream(archiveFile), BUFFER_SIZE),
    Charset.forName("ISO-8859-1")
);
while ((zipEntry = zipStream.getNextEntry()) != null) {
    // wrong name here, something like "M?nchen" instead of "München"
    System.out.println(zipEntry.getName());
    ...
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T18:11:03.527

我玩了两个小时左右，但在我最终在这里发布问题后仅仅五分钟，我就得到了答案：我的 zip 文件不是用 ISO-8859-1 编码的，而是用 Cp437 编码的。所以构造函数调用应该是：

```
zipStream = new ZipInputStream(
    new BufferedInputStream(new FileInputStream(archiveFile), BUFFER_SIZE),
    Charset.forName("Cp437")
); 
```

现在它就像一个魅力。

# php - 共享主机的实时通知（PHP、MySQL、Yii）

> ID：11276345
> 
> 赞同：0
> 
> 时间：2012-06-30T17:56:49.883
> 
> 标签：php, yii, websocket, real-time, comet

我目前正在开发一个需要推送通知样式系统的网站，例如 Facebook 通知。我希望在发生诸如“X 将您添加为朋友”之类的事件时通知用户...

我一直在研究我的选择，但是它们似乎非常有限，因为该网站将托管在共享托管平台上，因此我的访问权限有限等。

1）查看长轮询彗星风格 - 因为我无法在服务器上运行 Python，所以我唯一的选择是服务器脚本的 PHP，但是由于线程消耗，这可能不是一个非常可扩展的选项。

2) WebSockets - 这些看起来很棒，但由于浏览器支持有限，它似乎还不太合理。

那么 - 有没有人在共享托管平台上实现了这一点？我宁愿不必使用像 Pusher 这样的服务。

非常感谢！！:)

PS - 我正在使用 Yii 框架 - 任何考虑到这一点的解决方案都会更好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-20T12:29:05.853

使用[Ratchet](http://socketo.me/)，它是 PHP 的 WebSocket。

> Ratchet 是一个松散耦合的 PHP 库，为开发人员提供了通过 WebSockets 在客户端和服务器之间创建实时、双向应用程序的工具。这不是你祖父的互联网。

这是一个[helloworld](http://socketo.me/docs/hello-world)示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:41:11.653

对 chrome、firefox、opera 和 ie10 使用 html5 SSE（服务器发送的 dom 事件）

对于旧版本的 IE，使用 iframe 加载作为后备。

所有这些技术都应该适用于任何类型的共享主机，因为它们不需要任何类型的服务器端设置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-30T17:59:28.810

[https://stackoverflow.com/a/1086448/1063333](https://stackoverflow.com/a/1086448/1063333)：

> 执行此类通知的一种常用方法是在给定的时间间隔（可能每隔几秒）轮询服务器上的脚本（使用 ajax），以检查是否发生了某些事情

# jquery - 如何将数据从多个按钮传递到 1 个 jquery

> ID：11276346
> 
> 赞同：0
> 
> 时间：2012-06-30T17:57:04.363
> 
> 标签：jquery

首先，我有多个由 php 生成的动态按钮。例子：

```
<button id='btn' type='submit' name='btn' value='recordnumber5' title='deletefromtableA'>delete</button>
<button id='btn' type='submit' name='btn' value='recordnumber50' title='deletefromtableA'>delete</button>
<button id='btn' type='submit' name='btn' value='recordnumber15' title='deletefromtableA'>delete</button>
<button id='btn' type='submit' name='btn' value='recordnumber35' title='deletefromtableA'>delete</button> 
```

现在我需要在调用 jquery 时向 jquery 传递/获取值

```
$("#btn").click(function(){
   var tit=("$btn").attr("title");
   var val=("$btn").attr("value");
   alert(tit +":"+ val);
}); 
```

我的问题是，它只对第一个按钮起作用，其他按钮不起作用。我知道我的代码有问题，但我应该如何编写，以便我可以有多个动态按钮，但调用/使用 1 个 jquery 脚本，它可以从该按钮接收数据。

顺便说一句，我在谷歌和这里搜索过，但我找不到和参考，可能我不知道什么是正确的搜索关键字。

Ps：如果可能的话，我希望将 jquery 放入函数并保存到 js.file 无论如何，感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T17:59:39.373

`id`值在文档中必须是唯一的。因此，jQuery 只返回带有 that 的第一个元素`id`。`id`将属性更改为`class`属性，并修改您的选择器：

```
$(".btn").click(function(){
   var tit = this.title;
   var val = this.value;
   alert(tit +":"+ val);
}); 
```

还要注意回调函数的变化。你所拥有的不会起作用（你错过了`$`实际调用 jQuery 的方法），如果你修复了这个错误，选择器就没有意义了。您可以使用`this`来引用已单击的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:06:09.163

您需要使用类而不是 id。id 元素在整个 DOM 中是唯一的。

```
<button class='btn' type='submit' name='btn' value='recordnumber5' title='deletefromtableA'>delete</button>
<button class='btn' type='submit' name='btn' value='recordnumber50' title='deletefromtableA'>delete</button>
<button class='btn' type='submit' name='btn' value='recordnumber15' title='deletefromtableA'>delete</button>
<button class='btn' type='submit' name='btn' value='recordnumber35' title='deletefromtableA'>delete</button> 
```

和适当的javascript

```
$(".btn").click(function(){
    var tit=this.title;
    var val=this.value;
    alert(tit +":"+ val);
}); 
```

# mstest - MSTest 中 MbUnit.Framework.RowAttribute 的等价物是什么？

> ID：11276350
> 
> 赞同：1
> 
> 时间：2012-06-30T17:57:24.300
> 
> 标签：mstest

哪个相当于`MbUnit.Framework.RowAttribute`MSTest 中的？

我想为 MSTest`TestMethod`提供不同的数据。这`MBUit`很简单：

```
[Row("foo", "bar", "foo bar")]
[Row("fat", "cat", "fat cat")]
[Row("wise", "geek", "wise geek")]
[Test]
public void TestMyConcat(string first, string second, string expected)
{
   string actual = MyConcat(first, second);
   Assert.AreEqual(expected, actual);
} 
```

这是如何在 MSTest 中完成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:48:48.533

AFAIK 在 MSTest 中没有提供直接的等价物。

最接近的是[数据驱动测试](http://msdn.microsoft.com/en-us/library/ms182527.aspx)，它从外部文件中提取数据。

# php - MySQL Combine Query and ignore duplicates

> ID：11276355
> 
> 赞同：1
> 
> 时间：2012-06-30T17:58:00.937
> 
> 标签：php, mysql, sql, database, database-design

I have two tables **images2** and **image_data**

![enter image description here](../Images/b84c009a41dd9fb063b04bc96a51cc4f.png) ![enter image description here](../Images/54cddaf71d70e7e77f4d0eb0c9071c95.png)

So the goal is to have 1 table for ALL the image uploads (images2) and then the image_data is to assign that image with different options.

So for example, here is some sample data:

![enter image description here](../Images/bbb4f515e87921ecb9af8c73f6a24332.png)

So image_id 10 has more than one row, because this image is associated with both TN and CQ. And they could also be associated with more than one language and slide, so I would add on to the second row and change slide_id or language_id .. if wanted to add more, than I would add a new row for it.

The goal is to have a list of all the images, and then when you click on it it pops up and you can edit the options and change it straight from there.

![enter image description here](../Images/967885f9e2dec347d45260acb9553cc3.png)

I need help writing a query. The one I have right now:

```
SELECT images2.id, images2.filename, image_data.slide_id, image_data.language_id,
image_data.type FROM images2 
LEFT JOIN image_data ON images2.id = image_data.image_id 
```

A couple things wrong with that query.. It is showing the duplicates, because image_id 10 has two rows.

![enter image description here](../Images/08ee712417cfd49df97f308683cde5be.png)

But I need that second row of image #10 because I need to see that it is also associated with CQ so I can check the checkbox when it pops up.

So I need to create a query to show ALL the unique images no duplicates, with all of the options it has.

I'm not sure the best way to do this.. do I need to re-do the way my database tables are? Any help is appreciated.

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:06:28.050

What you could do is use `GROUP_CONCAT()` to turn values in multiple rows into a single concatenated string. The following retrieves the ids of `slides` and `languages` as well as their names to better facilitate your form.

```
SELECT
    a.id,
    a.filename,
    GROUP_CONCAT(CONCAT(b.slide_id, '::', c.slide_name)) AS slides,
    GROUP_CONCAT(CONCAT(b.language_id, '::', d.language_name)) AS languages,
    GROUP_CONCAT(b.type) AS types,
FROM 
    images a
LEFT JOIN
    image_data b ON a.id = b.image_id
LEFT JOIN 
    slides c ON b.slide_id = c.id
LEFT JOIN
    languages d ON c.language_id = d.id
GROUP BY
    a.id 
```

Your result set for image `10` will look something like:

```
id    |    image_filename    |    slides    |    languages    |    types
-------------------------------------------------------------------------
10    |    p170sfhe...       |    5::slide5 |    1::language1 |    TN,CQ 
```

In php, just `explode()` the strings based on the delimiters.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:04:58.613

you could use GROUP_CONCAT to get a csv of the fields:

```
SELECT
  images2.id,
  images2.filename,
  GROUP_CONCAT(DISTINCT image_data.slide_id) AS slides,
  GROUP_CONCAT(DISTINCT image_data.language_id) AS langs,
  GROUP_CONCAT(DISTINCT image_data.type) AS types
FROM images2 
LEFT JOIN image_data ON (images2.id = image_data.image_id)
GROUP BY images2.id 
```

# excel - 在excel中将一列中的数据分成更多列

> ID：11276359
> 
> 赞同：1
> 
> 时间：2012-06-30T17:58:31.247
> 
> 标签：excel, excel-formula

我想在 Microsoft Excel 2007 中执行此操作

这是一列。我在一列中有 20098 个数据，如下所示。

> 1
> 2
> 3
> 4
> 5
> 6
> 7
> 8
> 131
> 1
> 31
> 31
> 31
> 31
> 41

我想像这样重新排列这些数据我该怎么做

> 1 4 7 1 31
> 2 5 8 31 31
> 3 6 131 31 41

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T03:58:45.740

如果您的数据在 A 列中，则在单元格 B1 中放置
`=OFFSET($A1,3*(COLUMN()-COLUMN($B$1)),)`
并向下和向右复制以根据需要拆分您的数据

![在此处输入图像描述](../Images/a3dde1d52859c86f8c1a19c1e861ad8c.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T12:55:48.697

在结果范围的所有 3 行和 6700 列中使用此公式：

```
=INDEX($A:$A;(COLUMN()-first_column)*3 + ROW()-first_row+1) 
```

想要获得第一个值的单元格`first_column`的位置`=column(..)`和`first_row`位置`=row(..)`

例如，如果您使用 B1:IWS3 范围列出结果，则公式为：

```
=INDEX($A:$A;(COLUMN()-2)*3 + ROW()) 
```

# java - 在 Spring MVC Hibernate 应用程序中使用属性文件时抛出错误？

> ID：11276363
> 
> 赞同：3
> 
> 时间：2012-06-30T17:58:43.267
> 
> 标签：java, hibernate, spring-mvc

在 Spring MVC Hibernate 应用程序中，当我尝试使用位于 src/java/resources 下的属性文件时，它会抛出以下错误：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private java.lang.String com.mcb.controller.UserController.strDefaultPage; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder 'mcbPage.name' 
```

我正在使用下面的代码来访问我的控制器类中的属性值：

```
@Value("${mcbPage.name}") 
private String strDefaultPage; 
```

我在我的 ApplicationContext.xml 文件中为这个属性文件添加了 bean：

```
<bean id="mcbProperties"
    class="org.springframework.beans.factory.config.PropertiesFactoryBean">
    <property name="ignoreResourceNotFound" value="true" />
    <property name="locations">
        <list>
            <value>classpath*:mcb.properties</value>
            <value>file:src/main/resources/mcb.properties</value>
        </list>
    </property>
</bean>

<bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE" />
    <property name="ignoreUnresolvablePlaceholders" value="true" />
    <property name="properties" ref="mcbProperties" />
</bean> 
```

我的属性文件 ( `mcb.properties`) 位于 src/main/resources 下。`@Autowired`工作正常。但是当尝试使用属性文件时，它会在启动服务器时引发错误。
有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T18:15:54.867

**更新** 使用

```
<util:properties id="mcbPage" location="classpath:mcb.properties"/> 
```

然后在你的 Bean

```
private @Value("#{mcbPage['name']}") String strDefaultPage; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:26:05.183

您还可以使用 @PropertySource("classpath:mysql.properties")

或者

```
1) Add this to your spring config XML .

  <bean id="messageSource" class="org.springframework.context.support.
              ResourceBundleMessageSource">
        <property name="basename" value="messages"/>
    </bean>

2) create a property file name calles "messages.properties" and place that in
WEB-INF/Classes folder.

3) Include the following JSTL in jsp.
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

4)Use the properties as follows in JSP.

<fmt:message key="yourPropertyName"/>

5) Make sure you place "messages" in Web-inf/classes 
```

# git - 使用git本地跟踪一个项目后，如何添加到GitHub？

> ID：11276364
> 
> 赞同：37
> 
> 时间：2012-06-30T17:58:45.317
> 
> 标签：git, github

使用git本地跟踪一个项目后，如何添加到GitHub？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-30T18:03:37.120

在您在线创建存储库后，GitHub 会为您提供说明。

`cd`到带有本地存储库的目录

`git remote add origin whatever-address-my-repository is.git`设置遥控器

然后提交，并推送到主分支。

`git push -u origin master`

[https://help.github.com/articles/create-a-repo](https://help.github.com/articles/create-a-repo)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-18T05:03:03.660

1.`README.md`在您的本地仓库中创建一个（对于 GitHub - `*optional`）

2.`git remote add origin <your_URL_for_github_repo.git>`

（您可以`origin`通过输入来验证您是否拥有`git remote -v`。您可以看到`<URL>.git`）`origin`。

3.通过提交提交`git commit -a -m "<a message>"`

（重要！只有提交的文件才会被推送到 Github）

`git push -u origin master`4.现在通过（如果你推送主分支）推送到GitHub 。

每次推送时都需要密码（如果您使用 克隆`https:`）。为了摆脱它；

在终端中，输入以下内容：

```
git config --global credential.helper cache
# Set git to use the credential memory cache 
```

要更改默认密码缓存超时，请输入以下内容：

```
git config --global credential.helper 'cache --timeout=3600'
# Set the cache to timeout after 1 hour (setting is in seconds) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-10T04:04:00.533

在这里，您将找到有关如何创建存储库以及如何将其推送到 Github 的步骤：http: [//programertools.blogspot.com/2014/04/how-to-use-github.html](http://programertools.blogspot.com/2014/04/how-to-use-github.html)

# php - 在不重写键的情况下对数组进行排序

> ID：11276366
> 
> 赞同：1
> 
> 时间：2012-06-30T17:59:04.407
> 
> 标签：php, arrays, sorting

我有一个看起来像这样的数组：

```
$arr = ( [0]=>Int(2)
         [1]=>Array( ....)
         [2]=>Array( ....)
         [3]=>Array( ....)) 
```

我已经使用 usort 对其进行排序：

```
usort($arr,function($a, $b) {
if($a['prop'] == $b['prop']) return 0;
    return ($a['prop'] < $b['prop']) ? 1 : -1;
}); 
```

我的问题是键 [0] 用 Array 元素重写。不要误会我的意思……它应该是。如何在不重写键 [0] 的情况下对 $arr 数组进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:05:48.290

只需使用 uasort()

[http://php.net/manual/en/function.uasort.php](http://php.net/manual/en/function.uasort.php)

# css - 使用 CSS 强制纵横比在 Safari 上不起作用

> ID：11276367
> 
> 赞同：10
> 
> 时间：2012-06-30T17:59:05.593
> 
> 标签：css, image, safari, aspect-ratio

以下代码在 Firefox 和 Chrome 中运行良好，但在**Safari**中不适用（在 Mac 和 iPad 上测试）：http: [//jsfiddle.net/eFd87/](http://jsfiddle.net/eFd87/)。

```
<div id="wrapper">
    <div id="content">
        <img src="http://farm3.staticflickr.com/2783/4106818782_cc6610db2c.jpg">        
    </div>
</div>

#wrapper {
    position: relative;
    padding-bottom: 33.33%; /* Set ratio here */
    height: 0;
}
#content {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: green;
    text-align: center;
}
#content img {
    max-height: 100%;
}​ 
```

目标是让包装器 div 保持固定的纵横比（**在我的 Web 应用程序中，它是一个轮播**），并且其中的图像调整大小以适合 div（和中心）。

在 Safari 上，图像不会显示，因为`height: 0`（这将为 img 提供 0 的高度）。使用`height: 100%`图像显示但不适合 div（它溢出）。

你看到这个问题的任何解决方案吗？我已经做了好几个小时了...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-11-22T15:32:00.503

如果您不担心旧浏览器，您可以使用 object-fit 属性

> CSS object-fit 属性用于指定如何调整`<img>`or的`<video>`大小以适应其容器。

或者，如果您需要支持旧浏览器，这里讨论了一个巧妙的 Netflix 技巧：

[响应式图像](https://www.freecodecamp.org/news/time-saving-css-techniques-to-create-responsive-images-ebb1e84f90d5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T11:02:24.937

宽度 100% 和高度自动在 Safari 上为我工作。最初，我对 w 和 h 都使用 100%，这在 FF 上运行良好，但在 Safari 上失败。

```
.stretch {
  width: 100%;
  height: auto;
} 
```

HTML：

```
<div>
    <img src="images/someimg.jpg" class="stretch" alt="" />
</div> 
```

哦，我使用了 Bootstrap，它将它添加到所有元素中。

```
*, *:before, *:after {
  -moz-box-sizing: border-box;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-11T07:33:23.117

正如 WWDC20 期间[Web 开发人员的新功能](https://developer.apple.com/videos/play/wwdc2020/10663)所宣布的那样，从 Safari 13.1 开始，WebKit 现在根据图像元素的宽度和高度值计算图像纵横比。这意味着您遇到的问题已在最新版本的浏览器上得到修复。

在下一个视频中，您可以看到在我的机器上运行的测试，其中 Chrome 和 Safari 的行为相同：[https ://recordit.co/GULXcMpfPW](https://recordit.co/GULXcMpfPW)

也可以看看：

*   [WebKit 更改日志](https://webkit.org/blog/9992/release-notes-for-safari-technology-preview-99/)，包括修复
*   实施修复的[WebKit 变更集](https://trac.webkit.org/changeset/254669/webkit/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T08:11:08.650

这对您的问题来说并不是一个很好的答案，但它仍然是一个答案。

我非常怀疑是否有可能使用仅 CSS 的方法来做到这一点，因为据我所知（我很高兴对此进行更正）没有办法基于另一个 CSS 属性执行计算。因此`width: height * 1.3;`，例如是不可能的。您也不能使用 % ，因为这是父级的百分比，而不是其自身的百分比。

您当前查看的涉及底部填充的方式也不会可靠地工作，它会在您的屏幕上工作，但是如果其他人的屏幕具有不同的纵横比，或者他们有很多工具栏来改变浏览器窗口的纵横比，那么纵横比将是错误的。% 是父级的，除非你能保证你不能真正使用的大小。

据我所知，你唯一的选择是 JavaScript。最明显的也是我的建议是 jQuery 或其他一些框架来计算和明确设置基于宽度的高度。不要忘记收听浏览器窗口的大小调整。

# compact-framework - 具有透明背景的绘图控件

> ID：11276369
> 
> 赞同：7
> 
> 时间：2012-06-30T17:59:27.950
> 
> 标签：compact-framework, .net-cf-3.5

我一直在尝试显示具有透明边框的图像作为控件的背景。

不幸的是，透明区域在父窗体中创建了一个洞，如下所示：

![](../Images/32c790c20b891bf37bc022f1398c182e.png)

在上图中，表单有一个红色背景，我希望在透明区域的控件后面看到它。

我使用的代码如下：

```
 protected override void OnPaint(System.Windows.Forms.PaintEventArgs e)
    {
        if (this.Image != null)
        {
            Graphics g = Graphics.FromImage(this.Image);

            ImageAttributes attr = new ImageAttributes();

            //set the transparency based on the top left pixel
            attr.SetColorKey((this.Image as Bitmap).GetPixel(0, 0), (this.Image as Bitmap).GetPixel(0, 0));

            //draw the image using the image attributes.
            Rectangle dstRect = new Rectangle(0, 0, this.Image.Width, this.Image.Height);

            e.Graphics.DrawImage(this.Image, dstRect, 0, 0, this.Image.Width, this.Image.Height,
                GraphicsUnit.Pixel, attr);
        }
        else
        {
            base.OnPaint(e);
        }
    }

    protected override void OnPaintBackground(System.Windows.Forms.PaintEventArgs e)
    {
        //base.OnPaintBackground(e);
    } 
```

这个类是从 PictureBox 继承的，因为我需要一个实现 OnMouseMove 和 OnMouseUp 事件的控件。

我一天中的大部分时间都在研究，但没有成功测试出不同的想法，但不幸的是，大多数人只在完整的框架上工作，而不是在 .Net CF 上工作。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T19:07:47.077

啊，CF透明的乐趣。我可以继续讨论它（并且[在我的博客](http://blog.opennetcf.com/ctacke/CategoryView,category,ProjectResistance.aspx)和我多年前所做的[Project Resistance 代码中有）。](http://resistance.codeplex.com/)

要点是这样的。子控件必须绘制它的区域，但首先它必须回调它的父级（在您的情况下为 Form）并告诉它在除子剪辑区域之外的任何地方重绘它的背景图像，然后在上面绘制自己. 如果这听起来有点令人困惑，那是因为它是。

例如，如果您查看[Project Resistance](http://resistance.codeplex.com/)，一个视图（它只是一个控件）会绘制一个电阻器和带。它位于具有图像背景的表单中，并且该背景需要“显示”电阻器的透明区域：

![在此处输入图像描述](../Images/7003ef36661d4915c7e230ab3cb37b15.png)

所以在电阻器的绘图代码中它这样做：

```
protected override void OnPaint(PaintEventArgs e)
{
    base.OnPaint(e);

    try
    {
        RECT rect = new RECT(this.Bounds);

        // draw the blank
        Infrastructure.GraphicTools.DrawTransparentBitmap(e.Graphics, m_blankImage, Bounds, 
              new Rectangle(0, 0, m_blankImage.Width, m_blankImage.Height));

        if (m_bandsImage != null)
        {
            // draw the bands
            Infrastructure.GraphicTools.DrawTransparentBitmap(e.Graphics, m_bandsImage, Bounds, 
                 new Rectangle(0, 0, m_bandsImage.Width, m_bandsImage.Height));
        }
    }
    finally
    {
    }

    if (!Controller.TouchMode)
    {
        // TODO: draw in the selection arrow
        // Controller.SelectedBand
    }
} 
```

这很简单。关键是它调用了它的基础 OnPaint，它执行以下操作：

```
protected override void OnPaint(System.Windows.Forms.PaintEventArgs e)
{
    // this assumes we're in a workspace, on MainForm (the whole Parent.Parent thing)
    IBackgroundPaintProvider bgPaintProvider = Parent.Parent as IBackgroundPaintProvider;
    if (bgPaintProvider != null)
    {
        Rectangle rcPaint = e.ClipRectangle;
        // use the parent, since it's the workspace position in the Form we want, 
        // not our position in the workspace
        rcPaint.Offset(Parent.Left, Parent.Top);
        bgPaintProvider.PaintBackground(e.Graphics, e.ClipRectangle, rcPaint);
    }
} 
```

您可以看到它正在调用`PaintBackground`包含表单（在这种情况下它是 Parent.Parent，因为 Control 实际上位于一个称为 Workspace 的容器中 - 在您的情况下您不需要走两次）。这会在您当前视为“洞”的区域中绘制背景图像

```
public void PaintBackground(Graphics g, Rectangle targetRect, Rectangle sourceRect)
{
    g.DrawImage(m_bmBuffer, targetRect, sourceRect, GraphicsUnit.Pixel);
} 
```

# css - Sublime Text 2 从整个项目文件夹中删除所有 Class 项目

> ID：11276373
> 
> 赞同：2
> 
> 时间：2012-06-30T17:59:45.440
> 
> 标签：css, regex, sublimetext2

我们接管了一个以前设计的网站。我们将从头开始重写所有的 CSS。当前的网站项目有几个 'class="stuff foo"' 和大量其他类。

Sublime Text 2 中有没有办法删除所有类元素中的所有项目？

**例子：**

```
<div id="BasicLogin" class="login 50per wide homepage"> 
```

**清洁到：**

```
<div id="BasicLogin" class=""> OR
<div id="BasicLogin"> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-01T08:52:45.387

在 Sublime Text 中创建一个项目并添加您需要使用的所有文件夹。

使用“Find > Find in files”在所有打开的文件和文件夹中查找/搜索（它们是之前添加到项目中的文件夹，并显示在侧边栏中）

标记“正则表达式”选项（图标 .*）。使用搜索模式：

`\s+class="[^"]*"`

和一个空的替换字符串。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-30T18:19:00.080

您可以使用正则表达式

例子

```
find: (\<div\ id\ \=\"BasicLogin\"\ class\=\")([a-z\ A-Z0-9]+)([\"\>]+)
replace: $1$3 
```

# .net - 使用 UDF 的 Linq to SQL - 分页异常

> ID：11276376
> 
> 赞同：0
> 
> 时间：2012-06-30T17:59:54.813
> 
> 标签：.net, linq, linq-to-sql

再会。我在我的**MS SQL 2008R2**基础和一些映射类“ApplicationGroupsResult”中得到了一些表结果 UDF

```
ALTER FUNCTION [dbo].[netsqlazman_ApplicationGroups] ()
RETURNS TABLE
AS RETURN
SELECT     dbo.[netsqlazman_ApplicationGroupsTable].*
FROM         dbo.[netsqlazman_ApplicationGroupsTable] INNER JOIN
                      dbo.[netsqlazman_Applications]() Applications ON dbo.[netsqlazman_ApplicationGroupsTable].ApplicationId = Applications.ApplicationId

[Function(Name="dbo.netsqlazman_ApplicationGroups", IsComposable=true)]
public IQueryable<ApplicationGroupsResult> ApplicationGroups()
{
return base.CreateMethodCallQuery<ApplicationGroupsResult>(this, (MethodInfo) MethodBase.GetCurrentMethod(), new object[0]);
} 
```

现在我想记录一些记录：

```
 var query = context.ApplicationGroups();

            totalRecordsCount = query.Count();

            query = string.IsNullOrWhiteSpace(sortBy)
                        ? query.OrderBy(x => x.ApplicationGroupId)
                        : query.OrderBy(sortBy);

            return query
                .Skip(pageNumber*queryRecordsCount)
                .Take(queryRecordsCount)
                .ToArray(); 
```

我遇到了异常：“此提供程序仅支持跳过返回实体或包含所有标识列的投影的有序查询，其中查询是单表（非连接）查询，或者是 Distinct、Except、Intersect 或 Union （不是 Concat）操作。”

带有 UDF 的 LinqToSQL 是否支持分页？如果确实如此，那么我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:45:23.773

I found the problem - DataContext in library that I used had

```
[Provider(typeof(Sql2000Provider))] 
```

So that query would not work without "Distinct" because in sql 2000 there is no Row_number operator and the only way to generate paging query is to use the trick with distinct. How LINQ query should be in that case.

```
return query
            .Distinct()
            .Skip(pageNumber*queryRecordsCount)
            .Take(queryRecordsCount)
            .ToArray(); 
```

I just created my own DataContext and the problem solved:

```
[Provider(typeof(Sql2008Provider))]
public sealed class AzManDataContext : NetSqlAzManStorageDataContext
{
    public AzManDataContext(IDbConnection connection) : base(connection)
    { }
} 
```

P.S.

> Here's the problem: "where the query is a single-table (non-join) query".

Table result function in MSSQL handled like a single query so it's correct to use them in paging queries.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T13:39:12.397

这是问题所在：“查询是**单表（非连接）**查询”。

UDF 中的查询`Inner Join`对另一个表执行。为了`Skip`工作，必须有一个相当“稳定”的结果集，以确保它可以准确地选择它的块，而不是每次都拉一些随机数据。

顺便说一句，这个 UDF 是否只是为了示例目的？它看起来可以很容易地在 LINQ 中以强类型的方式表达，所以我想知道你为什么希望它使用 UDF？

# jquery - JPlayer + MVC3 + IE9

> ID：11276381
> 
> 赞同：0
> 
> 时间：2012-06-30T18:00:36.017
> 
> 标签：jquery, asp.net-mvc-3, internet-explorer, mediaelement.js, jplayer

我无法让 JPlayer 在 IE9 中工作。示例在其中工作（IE9 要求首先允许激活活动 x 控件）。但是当我尝试在 MVC3 应用程序中重现示例时，它不会播放视频。我知道这是一个已经被问过很多次的问题，但即使使用 JPlayer 的“解决方案”属性，我似乎也无法解决问题（在 mvc3 应用程序的上下文中）。我想我错过了一些东西，但我不知道它是什么。我也从 mediaelement.js 得到相同的结果。

有人知道这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:01:37.690

通过在 IIS 中配置 mime 类型，我可以使其仅在已发布版本中工作。我添加了 mp4 格式的 mime 类型。

# twitter - 如何在给定位置获取给定日期的 Twitter 热门话题？

> ID：11276386
> 
> 赞同：1
> 
> 时间：2012-06-30T18:01:17.403
> 
> 标签：twitter

这是一个关于 Twitter API 的问题，它没有提供关于这个问题的任何信息。

可以获取某个位置的**当前**热门话题，例如：美国：

[https://api.twitter.com/1/trends/23424977.json](https://api.twitter.com/1/trends/23424977.json)

其中 23424977 是美国的位置代码。

也可以获取给定日期的每小时趋势主题，但在全球范围内：

[https://api.twitter.com/1/trends/daily.json?date=2012-06-10/](https://api.twitter.com/1/trends/daily.json?date=2012-06-10/)

但是，我还没有找到如何在给定位置获取给定日期的热门话题，也就是说，如何将这两个单独的调用组合在一起。

有人对此有解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T06:43:56.247

您无法直接从 twitter API 获取此信息。您必须定期查询您感兴趣的位置以了解当前趋势。如果您有兴趣覆盖全球，那么您将需要一些 oAuth 无人机来超过每小时 150/350 的请求限制。

然后您很快就会拥有自己的热门话题档案。

# opencv - 识别球的 HoughCircles 参数

> ID：11276390
> 
> 赞同：6
> 
> 时间：2012-06-30T18:01:33.333
> 
> 标签：opencv, hough-transform

通过将图像转换为灰度然后对其进行模糊处理后，我尝试使用以下参数应用霍夫圆变换：

*   CV_HOUGH_GRADIENT
*   dp = 1
*   min_dist = 1
*   参数_1 = 70
*   参数_2 = 100
*   min_radius = 0
*   最大半径 = 0

这是我尝试过的众多图片之一：http: [//i.stack.imgur.com/JGRiM.jpg](https://i.stack.imgur.com/JGRiM.jpg)

但是即使使用宽松的参数，该算法也无法识别球。

（当我尝试使用在 GIMP 中创建的圆圈图像时，它工作正常）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T19:47:18.043

我同意克日赫的观点。我让它毫不费力地工作：

```
cv::Mat img,img2;
std::vector<cv::Vec3f> circles;
img = cv::imread("JGRiM.jpg",1);
cv::bilateralFilter(img, img2, 15, 1000, 1000);
cv::cvtColor(img2, img2,CV_BGR2GRAY);
cv::HoughCircles(img2, circles, CV_HOUGH_GRADIENT, 1,300,50, 10);
cv::circle(img2,cv::Point(circles[0][0],circles[0][1]),circles[0][2],cv::Scalar(126),2);
cv::imshow("test",img2);

cv::waitKey(0);
cv::imwrite("test.jpg",img2);
return 0; 
```

![在此处输入图像描述](../Images/0ed9291bcae2f3a39deac19780b818ba.png)

祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T19:37:50.730

首先检查图像的 Canny 输出。从这个 Canny 输出中，可以检测到具有非常小的 param_2 的球以及图像上的许多假圆。（例如，我使用了 param_2 = 10，并使用指定的球心来消除错误的圆圈）

尝试帮助霍夫圆变换。任务是将球从其他元素中分割出来。在您的图像问题中，您可以尝试使用颜色来分割球。

# .net - 如何签署我的 VB.NET 应用程序？

> ID：11276394
> 
> 赞同：8
> 
> 时间：2012-06-30T18:01:49.043
> 
> 标签：.net, vb.net, inno-setup, signtool

当用户安装我的应用程序时，我想避免出现这种可怕的消息：

![截图未知发布者](../Images/83bc6321bfec11f2066875cbe23934ef.png)

我知道我必须购买认证或类似的东西。你能告诉我我应该在哪里买它，之后我该怎么做？我想自动签署我的 exe 应用程序。此外，我使用 InnoSetup，我想在创建新包（EXE 文件）时自动添加签名

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T18:13:48.740

如果您想成为“知名出版商”，您需要来自威瑞信等权威机构的证书。这并不便宜（威瑞信每年收费约 400 美元）。

[https://www.symantec.com/verisign/code-signing/microsoft-authenticode/buy](https://www.symantec.com/verisign/code-signing/microsoft-authenticode/buy)

也可以看看 ：

[http://msdn.microsoft.com/en-us/library/ms247066](http://msdn.microsoft.com/en-us/library/ms247066)

[https://stackoverflow.com/a/1191152/327083](https://stackoverflow.com/a/1191152/327083)

基本上你可以做两件事 - 强名称签名和 Authenticode 签名。

单独的强名称签名不会识别程序集的发布者，但它确实将程序集与受信任的密钥相关联，并且可以检测已被篡改的程序集。您必须将自己的密钥/证书分发给您的用户并让他们安装它们。没有第三方系统来处理这个问题。

Authenticode（即：Verisign 等）需要花钱进行第三方认证，但可以很好地收缩整个过程，并将您识别为已知的发布者。

尽管如此，即使使用 Verisign 证书（至少是第一次），用户仍然会看到带有默认 UAC 设置的对话框 - 它只会识别它来自谁（已知的发布者、名称等）。但是，他们会从您的发布者那里获得“始终信任”的选项（您不会作为“未知发布者”获得）。

# java - Jetty 还有 WebAppContext 吗？

> ID：11276396
> 
> 赞同：1
> 
> 时间：2012-06-30T18:02:14.130
> 
> 标签：java, spring-mvc, jetty

我正在尝试使用嵌入式实例运行我的 spring MVC。我发现了这个问题：[Jetty Embedded Spring application](https://stackoverflow.com/questions/8233886/jetty-embedded-spring-application)

我正在使用码头版本：7.6.2.v20120308，javax servlet：2.5

我正在使用 IntelliJ，并且 WebAppContext 类似乎无法解析为任何包/命名空间。此类是否存在或已被替换？

```
import org.eclipse.jetty.server.Server;
public static void main(String[] args) throws Exception {

        Server server = new Server(8080);

        WebAppContext ????????
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T17:12:03.200

只是为了确保您的 pom.xml 是否包含此依赖项？

```
<dependency>
    <groupId>org.eclipse.jetty</groupId>
    <artifactId>jetty-webapp</artifactId>
    <version>7.6.2.v20120308</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-20T16:31:17.933

除了添加对*jetty-webapp*的依赖外，将其连接到服务器也发生了变化：

从：`server.addHandler(webAppContext);`

至：`server.setHandler(webAppContext);`

# stored-procedures - 嵌套存储过程

> ID：11276419
> 
> 赞同：1
> 
> 时间：2012-06-30T18:05:07.567
> 
> 标签：stored-procedures, nested

我的目标是：我有三个表dev1，PICK1，rul1，我需要我的信息在它们之间进行交互，一个例子是：根据select rul1 table的结果，从dev1 table中取出某些行并将它们插入PICK1，

然后必须更新表 dev1 的行以避免在下一次从 rul1 中选择时再次被选中

这是表的结构：

```
dev1 {
[delivery]
[inlist]
[scot]}

rul1{
[group],
[field],
[logical_condition]
[value]}

PICK1 {
[id_delivery]
[group_num]
[lock]} 
```

这些是我在 rul1 中的一些价值观

```
[group]  [field]    [logical_condition]  [value]
  1         scot        =                   1
  1         inlist      =                   0
  2         scot        =                   2
  2         inlist      =                   0
  3         scot        =                   3 
```

然后当我运行这个存储过程时：

```
BEGIN

DECLARE @ max int, @ count int<br />
SET @ count = 1<br />
SELECT @ max = max ([group]) from rul1 group by [group]

while (@ count <= @ max)<br />
BEGIN<br />
select field + '' + logical_condition + '' + value as [rule] from rul1 where [group]=  @count<br />
SET @ count = (@ count + 1)<br />
END

END 
```

我得到每个组（1、2、3）的这个结果：

```
scot = 1
inlist = 0

scot = 2
inlist = 0

scot = 3 
```

现在我想将这些结果放入一个字符串中，作为“where”子句的一部分，以便从 dev1 中选择正确的行并将它们插入 PICK1

然后在dev1上更新，我想这一定是每次我运行过程的时候，但我不知道如何嵌套存储过程或

如果这可以通过其他方法完成。

欢迎任何帮助

非常感谢您

# java - 无法使用 ProcessBuilder 从 java 执行 exe 文件

> ID：11276421
> 
> 赞同：3
> 
> 时间：2012-06-30T18:05:44.317
> 
> 标签：java, process, processbuilder

我正在制作一个从 Java 代码本身运行 C、C++ 和 Java 的项目。它对 Java 工作得非常好，在编译和执行 C 和 C++ 文件时会遇到问题。

我使用此[代码](https://stackoverflow.com/a/11269906/1461963)正确编译，并且可以在指定路径中生成可执行文件。但是现在当我运行可执行二进制文件时，`ProcessBuilder`我收到一条错误消息，提示“找不到文件”。请查看代码并告诉我出了什么问题以及在哪里？

```
public void processCode(String path,String lang)throws IOException
    {
        String cmd="",s=null,out=null,file="";
        totalTime=0;
        ProcessBuilder process=new ProcessBuilder();
        process.directory(new File(path));
        if(lang.equals("c")||lang.equals("cpp"))
        {
            cmd=threadNum+".exe";
            process.command(cmd);
        }
        else if(lang.equals("java"))
        {
            cmd="java";
            file="Main"+threadNum;
            process.command(new String[]{cmd,file});
        }
        process.redirectInput(new File(PATH+"Input\\" + prob + ".txt"));
        process.redirectOutput(new File(PATH+"Output.txt"));
        Process p=process.start();
        long start=System.currentTimeMillis();
        while (true)
        {
            try{
                    if(p.exitValue()==0)
                    {
                        totalTime=(int)(System.currentTimeMillis()-start);
                        break;
                    }
                }
                catch (Exception e)
                {

                }
                if(System.currentTimeMillis()-start>2000)
                {
                    res=1;
                    p.destroy();
                    break;
                }
        }
        if(res!=1)
        {
            compareFile();
        }
    } 
```

[从这里](https://stackoverflow.com/a/11269906/1461963)调用该方法 并且生成的错误是：

```
Exception in thread "main" java.io.IOException: Cannot run program "19.exe" (in directory "C:\wamp\www\usercodes\lokesh"): CreateProcess error=2, The system cannot find the file specified
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1029)
    at Contest.processCode(Main.java:202)
    at Contest.compileCode(Main.java:180)
    at Contest.makeFile(Main.java:157)
    at Contest.main(Main.java:53)
    at Main.main(Main.java:15)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified
    at java.lang.ProcessImpl.create(Native Method)
    at java.lang.ProcessImpl.<init>(ProcessImpl.java:188)
    at java.lang.ProcessImpl.start(ProcessImpl.java:132)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1021)
    ... 10 more 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-30T20:31:41.473

设置`directory`ProcessBuilder 对系统在尝试启动进程时查找可执行文件的位置没有任何影响。它只是将新创建的进程的当前工作目录设置为这个目录，它应该能够成功启动一个进程。您的程序`19.exe`很可能存在于 中`C:\wamp\www\usercodes\lokesh`，但除非此文件夹位于 PATH 中，否则系统将无法启动您的进程。

尝试使用可执行文件的完整路径而不是仅使用`19.exe`.

不得不说，错误信息有些误导。它说它找不到您的可执行文件，然后它说“在目录中......”，这意味着它正在寻找它。

# java - 拥有线程的对象是什么意思？

> ID：11276423
> 
> 赞同：0
> 
> 时间：2012-06-30T18:06:01.943
> 
> 标签：java, multithreading, synchronization, synchronized

我正在阅读Brian Goetz 的[这篇文章](http://www.ibm.com/developerworks/java/library/j-jtp0618/index.html#code4)。在**不要从构造函数内启动线程**部分下，他说“清单 4 中问题的一个特殊情况是从构造函数内启动一个线程，因为通常当一个对象拥有一个线程时，该线程是一个内部类，或者我们将 this 引用传递给它的构造函数（或者类本身扩展了 Thread 类）。如果一个对象要拥有一个线程，最好该对象提供一个 start() 方法，就像 Thread 一样，并启动线程来自 start() 方法而不是来自构造函数。” 他所说的“通常当一个对象拥有一个线程”是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T18:15:55.557

它可以是其中一个，也可以是两者。线程由对象（`java.lang.Thread`类的实例）表示，该对象与其他对象的关系完全取决于您。

如果线程中运行的代码创建了一些仅由线程使用的对象，您可以将这些对象视为线程拥有的。如果您有其他对象负责创建、启动和控制线程，您可以认为该对象拥有该线程。但是这些东西都不是 Java 要求或强制执行的。这是您在设计软件时的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T20:41:33.410

Goetz 的意图非常简单，并不特定于`Thread`. 它只是意味着一个对象`Thread`通过组合关系拥有该实例——它拥有对它的私有引用，并且不允许任何外部对象访问它。

您还可以注意到，这种所有权并不是真正可执行的，因为在该线程上执行的任何代码也可以通过该方法访问`Thread`实例。`currentThread`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T18:29:55.610

我不认为 Goetz 意味着过于从字面上理解拥有线程的对象。他只是意味着线程是在其他对象的构造函数中启动的，因此它可能在它有机会完成构造之前访问该对象的状态。没有正式的、有意义的所有权关系，这都是上下文相关的。例如，您可能会说拥有对线程的引用的人是所有者，因为他们可以取消它，但是引用可以传递，首先创建线程的对象没有什么特别之处。

如果您阅读 Goetz 的《*Java Concurrency in Practice* 》一书，它涵盖了[线程限制](https://stackoverflow.com/q/6261910/217324)等设计技术，其中线程交互的事物范围受到限制。您还可以创建对象，以便只有一个线程可以看到它们，例如在使用 ThreadLocal 时。因此，您可以设计抽象来创建所有权关系，但这取决于您。

# java - onProgressUpdate 不更新android中的值

> ID：11276425
> 
> 赞同：0
> 
> 时间：2012-06-30T18:06:11.383
> 
> 标签：java, android, android-asynctask

我有一个在文件下载时执行的异步任务，进度更新对于进度条来说工作得很好，但是如果我使用该值 [0] 用于 textview 来显示进度，它就不起作用（应用程序崩溃），我无法明白为什么。。

```
@Override
protected void onProgressUpdate(Integer... values) {
    super.onProgressUpdate(values);
    Log.v("Progress ", Integer.toString(values[0]));
    pbar.setProgress(values[0]);
    // tmin and tmax are texview, on uncommenting app crashes.
    //tmin.setText((values[0].toString()));
    //tmax.setText((Integer.toString(lengthOfFile)));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T19:56:31.430

导致崩溃的异常是什么？请查看 eclipse 上的 logcat 视图。

如果是空指针异常，请不要忘记在创建和调用 asyncTask 之前设置 textViews 的值（取决于您所做的，但可能您需要使用 findViewById）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-07T03:22:40.700

此[链接](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)在应用此代码后为您提供连击代码和很好的解释，如果不起作用，那么您必须在服务器端为该文件定义长度。

# jquery - 按键时为绑定（'keyup change'）触发两次jQuery代码

> ID：11276429
> 
> 赞同：9
> 
> 时间：2012-06-30T18:06:26.770
> 
> 标签：jquery, events

我有一个数字输入，应该在每次更改时触发 jQuery。为此，我做了一个`$('#id').bind('keyup change', ...);`，它会在任何按键或鼠标控制器更改时触发。

这适用于鼠标点击（触发器`change`）和输入数字（触发器`keyup`）。但是对于光标键，它会同时触发`change`和`keyup`。我怎样才能让它在所有情况下只触发一次？

这是一个显示问题的示例：http: [//jsfiddle.net/jSjkE/](http://jsfiddle.net/jSjkE/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-30T18:17:45.017

你对`onchange`事件有错误的概念。

它不会**在**元素的值更改时触发，而是仅在满足 2 个条件时触发：

*   元素模糊（失去焦点）；
*   该元素具有与获得焦点时不同的值。

注意：以上是针对类型的输入`text`。对于类型`checkbox`/`radio`它会在其`checked`属性更改时立即触发，对于`select`元素则在其选定选项更改时立即触发。

当您按下 Chrome 的向上/向下箭头时，该`onchange`事件（可能是错误的）会触发。`input type="number"`您不应该**依赖**它，因为许多其他主要浏览器甚至还没有实现数字输入，并且可能不会遵循这种行为。

相反，当您使用 HTML5 时，您应该依赖`oninput`HTML5 事件，该事件会在元素的值更新时触发。

```
$(function() {
    var count = 0;
    $('#num').on('input', function(e) {
        console.log('update ' + (++count) + ' Value: ' + this.value);    
    });
});​ 
```

**[小提琴](http://jsfiddle.net/ult_combo/jSjkE/17/)**

**编辑：**

对于较旧的（和非 HTML5）浏览器，您可以使用该`keyup`事件作为后备：

```
$('#num').on('input keyup', function(e) { 
```

对非 HTML5 浏览器执行此操作的最有弹性的方法是`setInterval`不断检查元素的值是否已更改，因为`keyup`如果您选择一些文本并将其拖到文本框中，则不会触发 - 您可以尝试`.on('input keyup mouseup'`，但它不会t 如果用户使用浏览器的编辑 > 粘贴菜单触发。

**编辑2：**

如果您不想使用`setInterval`，可以在`.on`/中放置一个巨大的事件映射，`.bind`并通过将当前值存储在[`.data()`](http://api.jquery.com/data/)元素中来检查值是否已更改：

```
var count = 0;
$('#num').on('input keyup change', function(e) {
    if (this.value == $(this).data('curr_val'))
        return false;
    $(this).data('curr_val', this.value);

    console.log('update ' + (++count) + ' Value: ' + this.value);
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/jSjkE/20/)

我已将`onchange`事件添加到事件映射中，因此即使`oninput`and`onkeyup`失败（非 html5 浏览器使用浏览器的菜单粘贴数据），`onchange`当元素失去焦点时事件仍会触发。

这是带有注释`setInterval`并[`.data()`](http://api.jquery.com/data/)避免使用全局变量的最终编辑，因此您可以选择要使用的后备选项：

```
$(function() {
    var $num = $('#num');
    $num.data('curr_val', $num.val()); //sets initial value

    var count = 0;
    setInterval(function(){
        if ($num.data('curr_val') == $num.val()) //if it still has same value
            return false; //returns false
        $num.data('curr_val', $num.val()); //if val is !=, updates it and
        //do your stuff
        console.log('update ' + (++count) + ' Value: ' + $num.val());
    }, 100); //100 = interval in miliseconds
}); 
```

**[小提琴](http://jsfiddle.net/ult_combo/jSjkE/25/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-15T22:20:32.827

```
$('input').unbind('keyup').bind('keyup',function(e){ ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-25T07:58:07.590

Keyup 始终适用于输入、搜索字段，并且您可以防止更改事件如下：并保持更改事件对其他控件有效，即选择。

```
// Prevent trigger change as keyup event already triggered so no twice call
if ((e.target.type == 'input' || e.target.type == 'search') && e.type == 'change') {
    return;
} 
```

# java - 处理非常大的数字

> ID：11276431
> 
> 赞同：1
> 
> 时间：2012-06-30T18:06:40.890
> 
> 标签：java, primitive, type-conversion

请看下面的代码

```
import java.util.ArrayList;
import java.util.List;

public class Big
{
    static  int primeNumber = 2;

    public static void main(String[]args)
    {
        int numberDevident = 147;
        int left=0;
        int result=0;

        List numbers = new ArrayList();

        while(true)
        {
            result = numberDevident/primeNumber;

            left = numberDevident%primeNumber;

            if(left!=0)
            {
                primeNumber++;
            }
            else
            {
                numbers.add(primeNumber);
                numberDevident = result;

                System.out.println(primeNumber);
            }
        }
    }

} 
```

这段代码求给定数的质因数（代码中的变量“numberDevident”）。但是，有一种情况，即给定数是 600851475143

它无法匹配 int、long 或 double。我怎样才能用这么大的数字来解决这个问题？请帮忙

在这里我对 BigInteger 做同样的事情

```
import java.math.BigInteger;
import java.util.ArrayList;
import java.util.List;

public class Problem3
{
    static  BigInteger primeNumber = new BigInteger("2");
    static BigInteger zero = new BigInteger("0");
    static BigInteger add = new BigInteger("1");

    public static void main(String[]args)
    {
        BigInteger numberDevident = new BigInteger("147");
        BigInteger left= new BigInteger("0");;
        BigInteger result=new BigInteger("0");;

        List numbers = new ArrayList();

        while(true)
        {
            result = numberDevident.divide(primeNumber);

            left = numberDevident.remainder(primeNumber);

            if(left!=zero)
            {
                primeNumber.add(add);
            }
            else
            {
                numbers.add(primeNumber);
                numberDevident = result;

                System.out.println(primeNumber.toString());
            }
        }
    }

} 
```

仍然不行，它没有显示任何东西。请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T18:07:36.760

你可能想看看[`BigInteger`](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)。

# objective-c - 我在哪里可以找到开源 iOS 5 模板？

> ID：11276432
> 
> 赞同：1
> 
> 时间：2012-06-30T18:06:50.203
> 
> 标签：objective-c, ios5, springboard

更具体地说，我正在寻找一个“跳板”模板。我见过几个 GitHub 项目，它们允许在更短的时间内创建类似的控件，但没有一个用于跳板（旧 Facebook 类型的应用程序）。感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:08:46.213

您可以在此处找到您要查找的内容：[Cocoa Controls](http://cocoacontrols.com/search?utf8=%E2%9C%93&q=springboard)

在那里，您会发现一些模板可以根据您的目的在适当的许可证下进行选择。

# javascript - css3图像淡入淡出

> ID：11276435
> 
> 赞同：4
> 
> 时间：2012-06-30T18:07:30.413
> 
> 标签：javascript, jquery, html, css

我试图让图像在加载后使用 css3 淡入。问题是我的方法目前被链接的方式它会在瞬间淡入淡出两次。而不是只是空白和淡入。

我的解决方案是尝试将动画代码拆分为一个单独的类，在我最初将不透明度设置为零之后应用该类（我在 JS 中执行此操作，因此没有启用 js 的人仍然可以看到图像）。

它仍然无法正常工作

我假设它是因为在这段代码中将不透明度设置为零并立即添加一个动画过渡类，它以某种方式捕获不透明度 .css() 方法，而它仍然在变化（不知道这怎么可能，......它不应该在之前完成不透明度继续添加课程？）

```
// nice thumbnail loading
$('.thumb').css('opacity','0').addClass('thumb-animated').on('load', function(){
    $(this).css('opacity','1');
});   

.resources .thumb-animated {
    -webkit-transition: opacity .2s;
       -moz-transition: opacity .2s;
        -ms-transition: opacity .2s;
         -o-transition: opacity .2s;
            transition: opacity .2s;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:28:28.550

好...

为什么在 jQuery 中将不透明度设置为 1？如果你想使用 CSS3 而不是简单的 fadeIn(200) 为什么不将“opacity: 1”添加到 css 类 thumb-animated？

**编辑：**

请注意，如果图像已经在缓存中，则不会触发加载。
此外，`!important`必须添加以重写通过 javascript 修改的规则。

你去： http: [//jsfiddle.net/enTCe/5/](http://jsfiddle.net/enTCe/5/) 这似乎在 JSfiddle 之外完美地工作，在 JSfiddle 上看起来它正在等待所有图像被加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:34:58.120

只使用css动画怎么样？不需要 JS 代码。

```
 @-webkit-keyframes opacityChange {
            0%   { opacity: 0; }
            100% { opacity: 1; }
        }
        @-moz-keyframes opacityChange {
            0%   { opacity: 0; }
            100% { opacity: 1; }
        }
        @-ms-keyframes opacityChange {
            0%   { opacity: 0; }
            100% { opacity: 1; }
        }
        .thumb {
            width: 200px;
            height: 200px;
            opacity: 1;
            -webkit-animation: opacityChange 5s;
            -moz-animation:    opacityChange 5s;
            -ms-animation:     opacityChange 5s;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T18:24:21.513

您可以等待将类添加到已加载的图像中

```
$('.thumb').css('opacity','0').on('load', function(){
    $(this).addClass('thumb-animated').css('opacity','1');
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-30T18:21:29.657

尝试这样的事情：

```
$('#thumb').hide();

myImg = $('<img>').attr('src', 'thumb.png').load(function(){
    $('#thumb').html(myImg).fadeIn(200);
}); 
```

# mysql - MySQL如何根据现有值更新行

> ID：11276437
> 
> 赞同：0
> 
> 时间：2012-06-30T18:07:46.527
> 
> 标签：mysql, sql

我正在规范化现有数据库。我目前在表 1 中有两列，域和容器，具有有限的不同组合（目前这两者的约 30 种组合来自约 1000 条记录）。我已经构建了一个包含所有组合的新 Table2，并在安装新记录时自动生成主键 (container_id)。我在 Table1 中添加了一个 container_id 列，并希望根据 Table1.container 列填写值。

此时，表 2 中的所有容器名称都是不同的，但将来可能会发生变化，因此需要一个唯一编号作为 PK。

IE

```
UPDATE Table1   
SET container_id = (SELECT Table2.container_id
    FROM Table2
    WHERE Table2.container = Table1.container)
WHERE EXISTS
  ( SELECT Table2.container_id
    FROM Table2
    WHERE Table2.container = Table1.container) 
```

这个查询返回`error 1242: subquery returns more than one row.` 我是在吠叫完全错误的树吗？表 2 应该有零个重复值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:21:53.903

我应该使用连接来更新 table1

```
UPDATE Table1 
LEFT JOIN Table2 USING (container) 
SET Table1.contanier_id = Table2.contanier_id
WHERE Table1.contanier_id IS NULL AND Table2.contanier_id IS NOT NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:31:55.967

Table2.container 不是唯一的，因此可以重复。因此，两个子查询都返回不止一行。

# c# - 绑定 Xaml 位图图像

> ID：11276438
> 
> 赞同：3
> 
> 时间：2012-06-30T18:07:59.163
> 
> 标签：c#, xaml, bitmap, bind

我有位图图像变量，我想将它绑定到我的 xaml 窗口。

```
System.Reflection.Assembly thisExe;
        thisExe = System.Reflection.Assembly.GetExecutingAssembly();
        string[] resources = thisExe.GetManifestResourceNames();
        var stream = Assembly.GetExecutingAssembly().GetManifestResourceStream("SplashDemo.Resources.Untitled-100000.png");
        Bitmap image = new Bitmap(stream); 
```

这是我的 xaml 代码

```
<Image Source="{Binding Source}" HorizontalAlignment="Left"  Height="210" Margin="35,10,0,0" VerticalAlignment="Top" Width="335">
    </Image> 
```

你能帮我通过 C# 代码将此位图变量绑定到此 xaml 图像吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T18:40:16.513

如果你真的想从 C# 代码而不是从 XAML 内部设置它，你应该使用[MSDN 参考中进一步描述的](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.source.aspx)这个简单的解决方案：

```
string path = "Resources/Untitled-100000.png";
BitmapImage bitmap = new BitmapImage(new Uri(path, UriKind.Relative));
image.Source = bitmap; 
```

但首先，你需要给你`Image`的名字，以便你可以从 c# 中引用它：

```
<Image x:Name="image" ... /> 
```

无需引用 Windows 窗体类。如果您坚持将图像嵌入到您的程序集中，则需要以下更冗长的代码来加载图像：

```
string path = "SplashDemo.Resources.Untitled-100000.png";
using (Stream fileStream = GetType().Assembly.GetManifestResourceStream(path))
{
    PngBitmapDecoder bitmapDecoder = new PngBitmapDecoder(fileStream,
        BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.Default);
    ImageSource imageSource = bitmapDecoder.Frames[0];
    image.Source = imageSource;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T18:30:43.607

这是一些示例代码：

```
// Winforms Image we want to get the WPF Image from...
System.Drawing.Image imgWinForms = System.Drawing.Image.FromFile("test.png");

// ImageSource ...
BitmapImage bi = new BitmapImage();
bi.BeginInit();
MemoryStream ms = new MemoryStream();

// Save to a memory stream...
imgWinForms.Save(ms, ImageFormat.Bmp);

// Rewind the stream...    
ms.Seek(0, SeekOrigin.Begin);

// Tell the WPF image to use this stream...
bi.StreamSource = ms;
bi.EndInit(); 
```

[点击这里查看参考](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/833ca60f-6a11-4836-bb2b-ef779dfe3ff0/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T18:37:54.260

如果您使用的是 WPF，请右键单击项目中的图像并将其设置`Build Action`为`Resource`. 假设您的图像被调用`MyImage.jpg`并且位于项目的`Resources`文件夹中，您应该能够直接在您的项目中引用它，`xaml`而无需使用任何 C# 代码。像这样：

```
<Image Source="/Resources/MyImage.jpg" 
    HorizontalAlignment="Left"
    Height="210" 
    Margin="35,10,0,0"
    VerticalAlignment="Top"
    Width="335">
</Image> 
```

# java - 使用 Java BigInteger 从 g^(xr) 和 x 计算 g^r

> ID：11276440
> 
> 赞同：3
> 
> 时间：2012-06-30T18:08:10.030
> 
> 标签：java, math, cryptography, biginteger

我正在尝试使用 Java 的 BigInteger 对象来实现类似 ElGamal 的加密算法。

*   q 是 2p+1 形式的安全素数
*   g 是组的生成器 ![Zq](../Images/6252e19376fa396866b68fc55303296f.png)

我想计算![g^r 从 g^(xr) 和 x](../Images/c77ac0dc3405e34703c4cdc8af81e2c9.png)，但我遇到了麻烦。使用`modInverse`i 可以计算![1/x](../Images/5eb32873caca6805c697f15242a20d00.png)，但如果我使用这个值，`modPow`我只会得到错误的结果。

我在网上找到的唯一示例是[作者](https://encrypted.google.com/url?sa=t&rct=j&q=el%20gamal%20modinverse%20biginteger%20c1%20java&source=web&cd=1&ved=0CEwQFjAA&url=http%3A%2F%2Fwww.cs.ucf.edu%2F~dmarino%2Fucf%2Fcis3362%2Fprogs%2FElGamal.java&ei=Uj7vT4DZM4fSsgbf-7iODw&usg=AFQjCNHZHyXteJgdcCIJTFZIAlzDDQiJQQ)用来`modInverse`计算的示例![1/x](../Images/5a47b85f89c38c012f49832b2afd8911.png)：

```
 BigInteger temp = c1.modPow(a,p);
        temp = temp.modInverse(p);

        // Print this out.
        System.out.println("Here is c1^ -a = "+temp); 
```

我尝试了一些变体（包括将 modPow 与 -1 一起使用），但无法使其正常工作。我认为数学应该是正确的，但任何帮助表示赞赏。

这是我的代码：

```
final static BigInteger q = new BigInteger("179769313486231590772930519078902473361797697894230657273430081157732675805500963132708477322407536021120113879871393357658789768814416622492847430639474124377767893424865485276302219601246094119453082952085005768838150682342462881473913110540827237163350510684586298239947245938479716304835356329624225795083");
final static BigInteger p = new BigInteger("89884656743115795386465259539451236680898848947115328636715040578866337902750481566354238661203768010560056939935696678829394884407208311246423715319737062188883946712432742638151109800623047059726541476042502884419075341171231440736956555270413618581675255342293149119973622969239858152417678164812112897541");
final static BigInteger g = new BigInteger("117265744532406309959187881490003058805548219220442880294934902019840205433866971629230940840348591638390822573295684678850519428432938503385192533090834775615734759306193531798190548626342600942782601381215002354918333367595380233608085319759193895027739039963819751637948789055533978566423454988608037601806");

/**
 * @param args
 */
public static void main(String[] args) {
    BigInteger x = new BigInteger("1143167411333064507035595976576260123572705969224418468247407610494944119131645169381885774886951623439260024159767473519706771572117243833759909829897948112642480886709322424314787175230081859236165044801596619590783556439791012887937120324676147585272259948372265307207312838134079528284932292492131276823586631161241002772401238870376093826305673839039010423270418706970005486897400");
    BigInteger r = new BigInteger("28622599320501138892999789676320846139720948572640603818980549097364886339367");

    // g^(xr) = g^(x*r)
    BigInteger g_xr = g.modPow(x.multiply(r), q);

    // 1/x
    BigInteger x_inverse = x.modInverse(q);
    System.out.println(x.multiply(x_inverse).mod(q)); // -> 1 --> correct

    // g^r = g^(xr) ^ (1/x)
    BigInteger g_r = g_xr.modPow(x_inverse, q); // FIXME: wrong result

    System.out.println(g_r); //result
    System.out.println(g.modPow(r, q)); // expected result
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:18:50.257

我不熟悉 BigInteger，但我相信`g^x * g^r = g^(x+r)`. 看起来您的代码基于`g^x * g^r = g^(x*r)`. 这有帮助吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T18:36:08.433

乘法群![\mathbb Z^*_q](../Images/6252e19376fa396866b68fc55303296f.png)是 q−1 阶的——也就是说，g ^(q−1) = 1 mod q。因此，您需要找到的不是 x 模 q 的倒数，而是模 q−1。

（另外，user1008646 是正确的 g ^(xr) = (g ^x ) ^r ≠ g ^x g ^r = g ^(x+r)。）

* * *

编辑：总结下面的讨论，描述 OP 正在实施的算法的[论文](http://eprint.iacr.org/2009/189.pdf)有一个错字：![\mathbb Z^*_q](../Images/6252e19376fa396866b68fc55303296f.png)他需要在它的 order-p 子组中工作，而不是在 中工作。（此外，本文使用 p 和 q 的方式与 OP 在此处使用它们的方式相反。）

# java - 带有可编辑分隔符的 Java GUI 动态文本

> ID：11276448
> 
> 赞同：2
> 
> 时间：2012-06-30T18:09:19.483
> 
> 标签：java, user-interface, text, delimiter

首先，我不知道如何准确地提出我的问题，所以我真的不知道要搜索什么。如果你知道我的意思并且它有一个名字，甚至在某个地方有一个答案，请随时告诉我。

我想分割文本（成句子或类似句子的结构）并向用户显示这些段，每个段后都有分隔符（ *extends JComponent ）。*由于分段并不总是合适的，因此用户应该可以删除分隔符并插入新的分隔符，但文本本身不应该是真正可编辑的。

问题是，我应该如何（通过什么类或结构）显示文本和分隔符，以便结构而不是文本本身是可编辑的？

有什么建议么？

我正在尝试做的事情： ![在此处输入图像描述](../Images/36a75cfa30adaf0231d74854384907c3.png)

# linq - 如何将我的删除 SQL 查询更改为 LINQ

> ID：11276452
> 
> 赞同：0
> 
> 时间：2012-06-30T18:10:22.173
> 
> 标签：linq

我在 LINQ 领域有点新。我有一个这样的删除查询：

```
DELETE FROM Table1 WHERE FK IN (SELECT ID FROM Table2 WHERE UserId = @UId) 
```

如何将其更改为 LINQ 查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:19:55.587

这应该给你一个想法

```
var itemQuery = from cartItems in db.SalesOrderDetails
              where cartItems.SalesOrderID == 75144
              select cartItems.ProductID;

var myProducts = from p in db.Products
                where itemQuery.Contains(p.ProductID)
                select p;

foreach (var detail in myProducts )
{
    db.myProducts.DeleteOnSubmit(detail);
}

try
{
    db.SubmitChanges();
}
catch (Exception e)
{
    Console.WriteLine(e);
    // Provide for exceptions.
} 
```

# android - 无法从 sqlite 数据库中检索数据

> ID：11276458
> 
> 赞同：0
> 
> 时间：2012-06-30T18:11:05.603
> 
> 标签：android, sqlite

在这个应用程序中，我希望当我单击按钮时，我的数据库中的数据会显示在列表视图上，并且通过使用 OnItemClick() 它应该显示另一个活动但不幸的是，当我单击按钮时，我的应用程序正在停止 Plzz 告诉我我在哪里出错了这是我的活动课`

```
public class DictionaryActivity extends Activity {
protected EditText searchText;
protected DatabaseHelper d;
protected Cursor cursor;
protected ListAdapter adapter;
   protected ListView wordList;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    d = new DatabaseHelper(this);

    d.addWord(new Contact("Apple", "Fruit"));
    d.addWord(new Contact("Ape", "Animal"));
    d.addWord(new Contact("Boy", "Male"));
    d.addWord(new Contact("Bat", "Playing Object"));

    searchText = (EditText) findViewById(R.id.word);
    wordList = (ListView) findViewById(R.id.list);

    final Button button = (Button) findViewById(R.id.search);
    button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            searchword(v);
        }
    });

}

public void searchword(View view) {

    // || is the concatenation operation in SQLite
    cursor = d.getData(searchText);
    adapter = new SimpleCursorAdapter(this, R.layout.word_list, cursor,
            new String[] { "word" }, new int[] { R.id.word });
    wordList.setAdapter(adapter);

    wordList.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(getApplicationContext(),
                    WordDetails.class);
            Cursor cursor = (Cursor) adapter.getItem(position);
            intent.putExtra("Word_ID",
                    cursor.getInt(cursor.getColumnIndex("id")));
            startActivity(intent);
        }

    });
}}` 
```

这是 DataBaseHelper 类

```
public class DatabaseHelper extends SQLiteOpenHelper {
protected SQLiteDatabase db;
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "Word_Meanings";

// Contacts table name
private static final String TABLE_NAME = "Meanings";

// Contacts Table Columns names
private static final String KEY_ID = "id";
private static final String KEY_WORD = "word";
private static final String KEY_MEAN = "mean";

private Contact contact;

public DatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_NAME + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_WORD + " TEXT,"
            + KEY_MEAN + " TEXT" + ")";
    db.execSQL(CREATE_CONTACTS_TABLE);
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);

    // Create tables again
    onCreate(db);
}

// Adding new contact
void addWord(Contact contact) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_WORD, contact.getword()); // Contact Name
    values.put(KEY_MEAN, contact.getmean()); // Contact Phone

    // Inserting Row
    db.insert(TABLE_NAME, null, values);
    db.close(); // Closing database connection
}

// Updating single contact
public int updateWord(Contact contact) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_WORD, contact.getword());
    values.put(KEY_MEAN, contact.getmean());

    // updating row
    return db.update(TABLE_NAME, values, KEY_ID + " = ?",
            new String[] { String.valueOf(contact.getID()) });
}

// Deleting single contact
public void deleteWord(Contact contact) {
    this.contact = contact;
    SQLiteDatabase db = this.getWritableDatabase();
    db.delete(TABLE_NAME, KEY_ID + " = ?",
            new String[] { String.valueOf(contact.getID()) });
    db.close();
}

// Getting contacts Count
public int getCount() {
    String countQuery = "SELECT  * FROM " + TABLE_NAME;
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(countQuery, null);
    cursor.close();

    // return count
    return cursor.getCount();
}

public Cursor getData(EditText s) {
    // TODO Auto-generated method stub

    String sql = "SELECT id, word FROM Meanings WHERE word LIKE ?";

    String sqlArgs[] = new String[] { s.getText().toString() + "%" };

    Cursor c = db.rawQuery(sql, sqlArgs);

    return c;

}} 
```

这是logcat：

```
E/AndroidRuntime(543): FATAL EXCEPTION: main E/AndroidRuntime(543): java.lang.NullPointerException 
E/AndroidRuntime(543): at com.Dictionary.DatabaseHelper.getData(DatabaseHelper.java:107) 
E/AndroidRuntime(543): at com.Dictionary.DictionaryActivity.searchword(DictionaryActivity.java:56) 
E/AndroidRuntime(543): at com.Dictionary.DictionaryActivity$1.onClick(DictionaryActivity.java:47) 
E/AndroidRuntime(543): at android.view.View.performClick(View.java:3511) 
E/AndroidRuntime(543): at android.view.View$PerformClick.run(View.java:14105) 
E/AndroidRuntime(543): at android.os.Handler.handleCallback(Handler.java:605) 
E/AndroidRuntime(543): at android.os.Handler.dispatchMessage(Handler.java:92) 
E/AndroidRuntime(543): at android.os.Looper.loop(Looper.java:137) 
E/AndroidRuntime(543): at android.app.ActivityThread.main(ActivityThread.java:4424) 
E/AndroidRuntime(543): at java.lang.reflect.Method.invokeNative(Native Method) 
E/AndroidRuntime(543): at java.lang.reflect.Method.invoke(Method.java:511) 
E/AndroidRuntime(543): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 
E/AndroidRuntime(543): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) E/AndroidRuntime(543): at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:24:30.757

使用 a`Cursor`填充`Adapter`时，`Cursor`必须包含名为的列`_id`（注意前面的`_`字符）。

将您的数据库更改`CREATE`为使用`_id`而不是`id`或将`SELECT`别名更改`id`为`_id`. 例如...

```
String sql = "SELECT id as _id, word FROM Meanings WHERE word LIKE ?"; 
```

注意：如果您需要做类似的事情，`SELECT * ...`您将无法`id`明显地为列起别名。在这种情况下，通常最好创建带有`_id`列的数据库表。

编辑：顺便说一句，`getCount()`在`cursor.close()`尝试使用`return cursor.getCount()`. 当您关闭 a`Cursor`时，它的资源将被释放，并且`Cursor`无效的含义`cursor.getCount()`将不起作用。

编辑：另外，如前所述，`SQLiteDatabase db = getReadableDatabase()`在调用`db.rawQuery(...)`您的`getData(...)`方法之前使用。

# python - 使用 Mechanize 使用 Python 发送 POST 参数

> ID：11276461
> 
> 赞同：1
> 
> 时间：2012-06-30T18:11:19.037
> 
> 标签：python, post, upload, mechanize, ambiguity

我想用 Python 填写这张表格：

```
 <form method="post" enctype="multipart/form-data" id="uploadimage">
  <input type="file" name="image" id="image" />
  <input type="submit" name="button" id="button" value="Upload File" class="inputbuttons" />
  <input name="newimage" type="hidden" id="image" value="1" />
  <input name="path" type="hidden" id="imagepath" value="/var/www/httpdocs/images/" />
</form> 
```

如您所见，有两个参数名称完全相同，所以当我使用 Mechanize 执行此操作时，会如下所示：

```
 import mechanize
    br = mechanize.Browser()
    br.open('www.site.tld/upload.php')
    br.select_form(nr=0)

    br.form['image'] = '/home/user/Desktop/image.jpg'
    br.submit() 
```

我收到错误：

```
mechanize._form.AmbiguityError: more than one control matching name 'image' 
```

我在 Internet 上找到的每个解决方案（包括这个站点）都不起作用。有不同的方法吗？遗憾的是，重命名 HTML 表单中的输入不是一种选择。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T22:09:01.830

You should use `find_control` instead; you can add a `nr` keyword to select a specific control if there is ambiguity. In your case, the `name` and `type` keywords should do.

Also note that a file control doesn't take a `value`; use `add_file` instead and pass in an open file object:

```
br.form.find_control(name='image', type='file').add_file(
    open('/home/user/Desktop/image.jpg', 'rb'), 'image/jpg', 'image.jpg') 
```

See the [documentation on forms in mechanize](http://wwwsearch.sourceforge.net/mechanize/forms.html).

# android - 单击按钮时如何将文本视图从一件事切换到另一件事 - Android

> ID：11276466
> 
> 赞同：1
> 
> 时间：2012-06-30T18:12:00.080
> 
> 标签：android, button, android-widget, textview

以下是我的主要活动文件。我被底部区域困住了（注释掉了）。我想这样做，以便当我点击 button 时`b1`，文本会从默认值更改。所以说它默认说“你好”，当你按下按钮时，我想将文本切换为“你好吗” `b1`。我尝试了很多东西，但总是出错。有人能帮我吗？

```
package com.wdmc85.donottouch;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class DoNotTouchActivity extends Activity 
implements OnClickListener {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button b1 = (Button) this.findViewById(R.id.b1);
    b1.setOnClickListener(this);

}

@Override
public void onClick(View v) 
{
    switch(v.getId())
    {
    case R.id.b1:
        //WHAT DO I PUT IN HERE?? I WANT IT SO WHEN YOU HIT BUTTON B1, THE 
        //TEXT CHANGES FROM WHAT IT IS FOR DEFAULT. SO SAY IT SAYS "HELLO"
        //AS DEFAULT, HOW DO I MAKE IT SO WHEN YOU PRESS BUTTON B1 THE TEXT
        //CHANGES FROM "HELLO" TO "HOW ARE YOU?" I HAVE TRIED ALL SORTS OF
        //THINGS BUT NOTHING HAS WORKED
    break;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:26:29.217

您应该使用以下方法来更改文本视图的文本。

```
 textView.setText("your text"); 
```

参考链接是>> [textview>>setText()](http://developer.android.com/reference/android/widget/TextView.html#setText%28java.lang.CharSequence%29)

可以对按钮和其他视图使用相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:34:54.250

如果要更改按钮本身的文本

```
 switch(v.getId())
        {
        case R.id.b1:
           Button b1 = (Button) v;
           b1.setText("HOW ARE YOU?");

        break;
        } 
```

如果要更改任何其他 Textview 的文本

```
 switch(v.getId())
        {
        case R.id.b1:
           TextView tv = (TextView ) this.findViewById(R.id.<tvid>);
           tv .setText("HOW ARE YOU?");

        break;
        } 
```

# iphone - UPDATE 查询仅适用于模拟器

> ID：11276467
> 
> 赞同：1
> 
> 时间：2012-06-30T18:12:17.380
> 
> 标签：iphone, database, xcode, sqlite

我正在使用 firefox sqlite manager 来帮助我构建一个 iphone 应用程序。我在其中包含了一个 UPDATE 查询，它在 iPhone 模拟器中完美运行。但是，当我从真机（iphone）运行时它会失败。没有错误，它只是不更新​​数据库。

我在考虑两个可能的原因：1）它更新的数据库不是模拟器中的那个 2）我读取的数据库不是更新的那个

有没有人有类似的经历？

代码如下：

```
 NSFileManager *fileMgr = [NSFileManager defaultManager];
        NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"Exercises.sqlite"];

        BOOL success = [fileMgr fileExistsAtPath:dbPath];
        if(!success)
        {
            NSLog(@"Cannot locate database file '%@'.", dbPath);
        }
        if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
        {
            NSLog(@"An error has occured.");
        }

        NSString *ranID = [@"UPDATE Status SET money = " stringByAppendingFormat:@"%d", money + 100];

        const char *sql2 = [ranID UTF8String];
        sqlite3_stmt *sqlStatement2;
        if(sqlite3_prepare(db, sql2, -1, &sqlStatement2, NULL) != SQLITE_OK)
        {
            NSLog(@"Problem with prepare statement 2");
        }
        if (sqlite3_step(sqlStatement2)==SQLITE_ROW) 
            NSLog(@"succeed"); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:16:13.447

发生的事情是您尝试在捆绑包中的数据库中写入，您没有对捆绑包中文件的写入权限，如果您想更新数据库，则需要将其复制到 Documents 目录

复制数据库文件

```
NSString *documentsPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Exercises.sqlite"];

[[NSFileManager defaultManager] copyItemAtPath:dbPath toPath:documentsPath error:NULL]; 
```

然后总是使用新的文件路径 ( `documentsPath`) 来访问数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:16:39.337

应用程序包中的文件在设备上是只读的。

您应该首先将其复制到应用程序沙箱中的某个位置，例如在您的库/应用程序支持目录中。（您可以使用 - [NSFileManager URLsForDirectory:inDomains:] 和 NSApplicationSupportDirectory 来查找此路径；请务必在尝试写入之前创建目录。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T18:17:15.280

这听起来像是您没有提交我们的更改。[在此处](https://stackoverflow.com/questions/1053362/how-to-commit-changes-in-sqlite)和[此处](https://stackoverflow.com/questions/3523741/commit-objects-to-database)查看类似的帖子

# sql-server - TSQL - 动态 SQL 中的动态列名？

> ID：11276469
> 
> 赞同：1
> 
> 时间：2012-06-30T18:12:19.660
> 
> 标签：sql-server, tsql, dynamic-sql

我有一个具有以下结构的“表 A”：

```
Act_Code  ACT_TYPE_1  ACT_TYPE_2   ACT_TYPE_3  ACT_TYPE_4
--------  --------   -----------   ----------  -----------
ACT1       A            NULL        NULL         NULL
ACT2       NULL         B           NULL         NULL
ACT3       NULL         NULL        C            NULL
ACT4       NULL         NULL        NULL         D
ACT1       A            NULL        NULL         NULL 
```

如您所见，ACT_TYPE 数据将始终存储在字段名称中，该字段名称指的是“Act_Code”字段的最后一位：例如。当 Act_Code = "ACT1" 时，Act_Type 存储在字段 "ACT_TYPE_1" 当 Act_Code = "ACT2" 时，Act_Type 存储在字段 "ACT_TYPE_2" 中，依此类推...

现在，我想从上面的“表 A”中读取数据并插入到具有以下结构的“表 B”中：

```
ACT    ACT_TYPE
----   --------
1        A
2        B
3        C
4        D 
```

**问题：** * *1\. 如何在选择查询中添加“动态列名”？**

例如，

```
INSERT INTO Table_B (ACT, ACT_TYPE)
SELECT RIGHT(Act_Code,1), ## FROM Table_A 
```

**如何按照上面的符号“##”处理动态列名？**

我试过了：

```
SET @sql = 'INSERT INTO Table_B (ACT,ACT_TYPE) '
SET @sql = @sql + 'SELECT RIGHT(Act_Code,1), '
SET @sql = @sql + '''ACT_TYPE_'' + RIGHT(Act_Code,1) FROM Table_A'
EXEC (@sql) 
```

但它不起作用！

请帮忙，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:25:14.860

```
declare @Foo as Table ( Voot varchar(10), Plevny1 varchar(10), Plevny2 varchar(10) )
insert into @Foo ( Voot, Plevny1, Plevny2 ) values ( 'Thing1', 'a', 'A' ), ( 'Thing2', 'b', 'B' )
select SubString( Voot, 6, 1 ) as Vootette,
  case SubString( Voot, 6, 1 )
    when '1' then Plevny1
    when '2' then Plevny2
    else NULL end as Plevny
  from @Foo 
```

根据您的具体要求，您可能需要从控制列的值中解析多位整数，可能想要处理默认输出值，可能想要检查行中的“其他”值是否为 NULL，...。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:20:15.167

看起来你可以在没有动态 SQL 的情况下做到这一点：

```
insert  Table_B
        (Act, Act_Type)
select  case Act_Code
        when 'ACT1' then 1
        when 'ACT2' then 2
        when 'ACT3' then 3
        when 'ACT4' then 4
        end
,       coalesce(ACT_TYPE_1, ACT_TYPE_2, ACT_TYPE_3, ACT_TYPE_4) 
```

# xcode - 与 UIStoryboard 一起使用的可重用视图或 xib

> ID：11276471
> 
> 赞同：1
> 
> 时间：2012-06-30T18:12:59.793
> 
> 标签：xcode, ios5, uistoryboard

我发现使用情节提要非常方便，尤其是拥有（并展示）应用程序的概览。

但是，我也发现复制相同的代码和视图而无法保留至少一个最常见的 xib 的可重用库非常烦人。对于`UITableView`其单元格尤其如此。

你们中的一些人是否有任何想法或最佳实践可以分享来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:26:03.283

根据其他几篇文章 - 搜索故事板和 xib - 人们目前正在一起使用 xib 和故事板，其中 xib 可用于处理可重用的视图。当你创建一个新文件 -> iOS -> 视图或窗口时，xcode 会为你创建一个 xib。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:27:02.087

我昨天才看这个，现在似乎还不可能。我决定使用好的旧笔尖，以防我希望能够重用视图。当您的主 UI 在情节提要中定义时，您仍然可以使用它们

`UIView *view = [[NSBundle mainbundle] loadNibNamed:@"Nibfile" owner:self options:nil];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T03:09:31.410

我尝试了大约两个星期，最终发现您必须定义是否将使用情节提要或 xib 文件。他们不会一起工作。

我认为这也很可悲，但直到此刻，对此无能为力。情节提要不会调用您的 xib 文件，并且 segues 也不起作用。

# php - 我可以从附加到登录的 mysql 数据库中提取 URL 吗？

> ID：11276472
> 
> 赞同：-1
> 
> 时间：2012-06-30T18:13:18.443
> 
> 标签：php, sql, database, redirect, login

我想知道我是否可以在附加到登录名的数据库中使用 URL，当用户登录脚本时，该 URL 会读取重定向到那个的 URL？或者关于简单的独特登录重定向的任何其他想法？

我的数据库由列 ID/用户名/密码/url 组成 - 显然我已经对连接的东西进行了排序，尽管您不需要查看它们；）

我的代码是

```
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$myusername=$_POST['myusername']; 
$mypassword=$_POST['mypassword']; 

$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

$count=mysql_num_rows($result);
$count=mysql_num_rows($result);

if($count==1){

session_register("myusername");
session_register("mypassword"); 
header('Location: '.$row['url']);
}
else {
echo "Wrong Username or Password";
}

ob_end_flush();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:16:37.633

是的你可以。在登录时，只需从数据库表中读取 URL 并使用[header('Location: ...');重定向](http://php.net/header)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:16:26.320

使用数据库中的登录字段添加一个指定 url 的字段。现在，当该人登录时检索 URL，然后使用以下代码重定向到检索到的 url

```
header('Location: http://www.example.com/'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T18:18:18.737

你不会在你的数据库中创建这样的东西。

您可以在数据库中放置一个 url 字段，以便在他们登录时使用。

在您的 PHP 脚本中，一旦您通过从数据库中获取结果行验证用户实际存在并且他/她的密码正确（当然，更复杂的登录会做更多），您可以使用以下内容：

```
header('Location: '.$row['url']); 
```

根据用户的登录状态将该用户重定向到另一个页面。尽管作为提示，请确保使用某种 $_SESSION 变量记录它们，该变量在您重定向它们之前设置并在其他页面上检查其值。

## 编辑

不推荐使用 session_register：http: [//php.net/manual/en/function.session-register.php](http://php.net/manual/en/function.session-register.php)

```
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$myusername=$_POST['myusername']; 
$mypassword=$_POST['mypassword']; 

$sql="SELECT * FROM $tbl_name WHERE username=".mysql_real_escape_string($myusername)." and password=".mysql_real_escape_string($mypassword);
$result=mysql_query($sql);

$count=mysql_num_rows($result);

if($count==1){

    $_SESSION['myusername'] = $myusername;
    $_SESSION['mypassword'] = $mypassword;

    while($row = mysql_fetch_assoc($result)){
        header('Location: '.$row['url']);
        exit(); // As a user above mentions this is actually quite important
    }

}else{
    echo "Wrong Username or Password";
} 
```

取出那个结束 PHP 标记，你真的不想要它。我认为这应该可行，您可能会遇到 SQL 错误，在这种情况下，您可能会发现是引号引起了痛苦，应该用它来封装字段值，`'`但我总是忘记 mysql_real_escape_string 是如何转义的，所以我现在就这样吧。

# python - 附加到具有字典理解的列表字典

> ID：11276473
> 
> 赞同：14
> 
> 时间：2012-06-30T18:13:47.023
> 
> 标签：python, dictionary

假设我有一个很大的单词列表。例如：

```
>>> with open('/usr/share/dict/words') as f:
...     words=[word for word in f.read().split('\n') if word] 
```

如果我想通过这个单词列表的第一个字母建立索引，这很容易：

```
d={}
for word in words:
   if word[0].lower() in 'aeiou':
       d.setdefault(word[0].lower(),[]).append(word)
       # You could use defaultdict here too... 
```

结果是这样的：

```
{'a':[list of 'a' words], 'e':[list of 'e' words], 'i': etc...} 
```

有没有办法用 Python 2.7、3+ dict 理解来做到这一点？换句话说，字典理解语法是否可以在构建字典时附加由键表示的列表？

IE：

```
 index={k[0].lower():XXX for k in words if k[0].lower() in 'aeiou'} 
```

`index`其中 XXX为正在创建的键执行附加操作或列表创建。

**编辑**

采纳建议和对标：

```
def f1():   
    d={}
    for word in words:
        c=word[0].lower()
        if c in 'aeiou':
           d.setdefault(c,[]).append(word)

def f2():
   d={}
   {d.setdefault(word[0].lower(),[]).append(word) for word in words 
        if word[0].lower() in 'aeiou'} 

def f3():
    d=defaultdict(list)                       
    {d[word[0].lower()].append(word) for word in words 
            if word[0].lower() in 'aeiou'}         

def f4():
    d=functools.reduce(lambda d, w: d.setdefault(w[0], []).append(w[1]) or d,
       ((w[0].lower(), w) for w in words
        if w[0].lower() in 'aeiou'), {}) 

def f5():   
    d=defaultdict(list)
    for word in words:
        c=word[0].lower() 
        if c in 'aeiou':
            d[c].append(word) 
```

产生这个基准：

```
 rate/sec    f4     f2     f1     f3     f5
f4       11    -- -21.8% -31.1% -31.2% -41.2%
f2       14 27.8%     -- -11.9% -12.1% -24.8%
f1       16 45.1%  13.5%     --  -0.2% -14.7%
f3       16 45.4%  13.8%   0.2%     -- -14.5%
f5       18 70.0%  33.0%  17.2%  16.9%     -- 
```

使用默认 dict 的直接循环最快，然后是 set comprehension 和 loop with `setdefault`。

感谢您的想法！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-30T18:18:52.127

否 - dict 理解被设计为在每次迭代中生成不重叠的键；他们不支持聚合。对于这个特定的用例，循环是有效完成任务的正确方法（在线性时间内）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-30T18:23:35.443

使用 dict 理解是不可能的（至少很容易或直接）。

使用集合或列表理解是可能的，但可能会滥用语法：

```
# your code:    
d={}
for word in words:
   if word[0].lower() in 'aeiou':
       d.setdefault(word[0].lower(),[]).append(word)        

# a side effect set comprehension:  
index={}   
r={index.setdefault(word[0].lower(),[]).append(word) for word in words 
        if word[0].lower() in 'aeiou'}     

print r
print [(k, len(d[k])) for k in sorted(d.keys())]  
print [(k, len(index[k])) for k in sorted(index.keys())] 
```

印刷：

```
set([None])
[('a', 17094), ('e', 8734), ('i', 8797), ('o', 7847), ('u', 16385)]
[('a', 17094), ('e', 8734), ('i', 8797), ('o', 7847), ('u', 16385)] 
```

集合`setdefault()`推导在遍历`words`列表后生成一个包含方法结果的集合。`set([None])`在这种情况下的总和。它还会产生您想要的生成列表字典的副作用。

它不像直接循环结构那样可读（恕我直言），应该避免（恕我直言）。它不会更短，也可能不会更快。这是关于 Python 的更有趣的琐事而不是有用的——恕我直言……也许是为了赢得赌注？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-30T18:21:28.740

我会使用`filter`：

```
>>> words = ['abcd', 'abdef', 'eft', 'egg', 'uck', 'ice']
>>> index = {k.lower() : list(filter(lambda x:x[0].lower() == k.lower(),words)) for k in 'aeiou'}
>>> index
{'a': ['abcd', 'abdef'], 'i': ['ice'], 'e': ['eft', 'egg'], 'u': ['uck'], 'o': []} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-30T19:08:35.920

这不完全是 dict 理解，但是：

```
reduce(lambda d, w: d.setdefault(w[0], []).append(w[1]) or d,
       ((w[0].lower(), w) for w in words
        if w[0].lower() in 'aeiou'), {}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-07T20:51:39.503

不回答听写理解的问题，但它可能会帮助搜索这个问题的人。在一个简化的示例中，当将运行中不断增长的列表填充到新字典中时，请考虑在列表推导中调用一个函数，诚然，这只不过是一个循环。

```
def fill_lists_per_dict_keys(k, v):
    d[k] = (
        v
        if k not in d 
        else d[k] + v
    )

# global d
d = {}
out = [fill_lists_per_dict_keys(i[0], [i[1]]) for i in d2.items()] 
```

`out`只是为了抑制每个循环的输出`None`。

如果您想在运行时甚至在列表理解中使用新字典，或者如果您遇到字典被每个循环覆盖的另一个原因，请`global d`在脚本开头检查以使其成为全局（注释掉，因为没有必要这里）。

# orchardcms - 从 Blogengine.net 迁移到 Orchard

> ID：11276477
> 
> 赞同：2
> 
> 时间：2012-06-30T18:15:09.613
> 
> 标签：orchardcms, blogengine.net

我有一个在 BE.net 2.6 上运行的现有博客/新闻站点，我想将其迁移到 Orchard。现在我正在本地测试迁移。我将 BE.net 帖子导出为 Blog ML 并导入 Orchard。两点摩擦 - 一）Orchard 没有提取 BE 中的标签，而是将类别（其中只有 3 个）作为标签；二）我在 BE 中的摘录在导入后没有出现在 Orchard 中。我的摘录通常有简短的文字和图片，我希望能够在列出所有帖子的页面中显示这些摘录。但我不希望图像出现在详细信息页面中。我发现博客 ML 的分支应该允许正确地引入标签，除非使用该版本时仪表板中的博客 ML 选项不存在。

[您可以在这里http://nomorecocktails.com](http://nomorecocktails.com)看到现场站点（运行 BE 2.6）。我希望帖子列表以与果园中的摘录和图像相同的方式出现。如果您也可以帮助弄清楚如何获取标签。我宁愿不必返回并编辑果园中的帖子来添加标签。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T22:04:27.393

我是 BlogML 模块的作者。我收到了一些关于 BlogEngine.net 出口没有正确进入果园的报告，特别是标签...

整个人都报告了最初的问题，为我做了一些调查，发现标签实际上没有出现在导出文件中，即 BlogEngine 导出不导出标签。

你能帮我验证一下吗？如果不是这种情况，请回复，我将与您联系以获取您的 BlogML 文件并在本地测试导入。

摘录不会出现在 Orchard 中，因为 BlogML 模块被构建为仅与 Orchard 博客模块的默认实现接口。这个决定需要改变。我认为例外应该进入系统，并将其内置到将取代 BlogML 模块的模块中。(https://orchardimportexport.codeplex.com/)

缺口

# objective-c - 从 cocos2d 中的点数组绘制线的最有效方法

> ID：11276478
> 
> 赞同：1
> 
> 时间：2012-06-30T18:15:17.207
> 
> 标签：objective-c, ios, cocos2d-iphone, opengl-es-2.0

给定一个`NSMutableArray`动态s，从to 、to等`CGPoint`画线最快和最有效的方法是什么？我应该用 C 或 C++ 重写我的函数以获得更好的性能吗？目前，当数组中有超过 20 个点时，我的帧率会受到很大影响。我正在使用 cocos2d v2.0.0-rc2，我目前有：`array[0]``array[1]``array[1]``array[2]`

```
-(void)draw
{
    for (int i = 0; i < [points count]; i+=2)
    {
        CGPoint startFromArray = [[points objectAtIndex:i] CGPointValue];
        CGPoint endFromArray = [[points objectAtIndex:i+1] CGPointValue];

        ccDrawLine(startFromArray, endFromArray);
    }

    [super draw];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:25:10.867

这里不需要使用迭代。Cocos2d 有一个名为`ccDrawPoly()`. 你可以像这样使用它：

```
CGPoint *verts = malloc(sizeof(CGPoint) * [points count]);

for (int i = 0; i < [points count]; i++) {
    verts[i] = [[points objectAtIndex:i] CGPointValue];
}

ccDrawPoly(verts, [points count], NO);

free(verts); 
```

显然，如果将 CGPoints 存储在 C 数组中而不是从 NSValues 中对它们进行装箱和拆箱，您将获得更好的性能，但如果您真的需要可变性，那将无济于事。

至于 的第三个参数`ccDrawPoly()`，设置为`YES`将连接数组的起点和终点，形成一个封闭的多边形，而使用`NO`只会形成一堆开放的线。

# ruby-on-rails - Rails 自定义验证消息

> ID：11276484
> 
> 赞同：0
> 
> 时间：2012-06-30T18:16:16.300
> 
> 标签：ruby-on-rails, ruby

我正在尝试使用西里尔字母设置表单验证，但我得到了

```
We're sorry, but something went wrong. 
```

这是我使用的代码

```
 validates_presence_of :user, :message => "кирилица" 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:27:57.737

你忘了告诉 ruby​​ 你的源文件是 utf-8

Ruby 1.9 假定您的源文件是 US-ASCII 编码的，除非您提供

```
# encoding: utf-8 
```

在源文件的开头添加注释

PS：我建议您使用 i18n 来存储您的验证消息。[您可以在此处](http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models)找到有关该机制的信息，它将允许您更改默认消息或模型的特定消息。

# java - 布局的表面视图绘制元素（android）

> ID：11276492
> 
> 赞同：-1
> 
> 时间：2012-06-30T18:17:05.690
> 
> 标签：java, android, camera, surfaceview

我有一个表面视图，我希望在我的表面视图上“绘制”线性布局的内容。

我的表面视图是相机的预览，我希望在拍照时将布局的内容绘制在图片上。

这是怎么做的？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T19:07:00.500

表面布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:gravity="bottom"
          android:layout_width="match_parent"
          android:layout_height="match_parent">

<ImageView
        android:id="@+id/takepicture"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/trans_tshirt"
        android:contentDescription="tshirt" /> 
```

主要的.xml

```
<LinearLayout android:layout_height="match_parent" android:layout_width="match_parent" android:orientation="vertical" xmlns:android="http://schemas.android.com/apk/res/android">
        <SurfaceView android:layout_height="match_parent" android:layout_width="match_parent" android:id="@+id/camerapreview"/>
</LinearLayout>

java code:

package com.views;

import android.app.Activity;
import android.content.ContentValues;
import android.content.pm.ActivityInfo;
import android.graphics.PixelFormat;
import android.hardware.Camera;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.LayoutInflater;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.widget.ImageView;
import android.widget.Toast;
import com.fashion.alex.R;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.OutputStream;

public class HomeActivity extends Activity implements SurfaceHolder.Callback
{

    private Camera camera;
    private SurfaceView surfaceView;
    private SurfaceHolder surfaceHolder;
    private boolean previewing = false;
    private LayoutInflater controlInflater = null;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        getWindow().setFormat(PixelFormat.UNKNOWN);
        surfaceView = (SurfaceView)findViewById(R.id.camerapreview);
        surfaceHolder = surfaceView.getHolder();
        surfaceHolder.addCallback(this);
        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        controlInflater = LayoutInflater.from(getBaseContext());
        View viewControl = controlInflater.inflate(R.layout.tshirt_layout, null);
        LayoutParams layoutParamsControl = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
        this.addContentView(viewControl, layoutParamsControl);
        final ImageView ivButton = (ImageView)findViewById(R.id.takepicture);
        ivButton.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                camera.takePicture(myShutterCallback,
                        myPictureCallback_RAW, myPictureCallback_JPG);
            }}
        );
    }

    Camera.ShutterCallback myShutterCallback = new Camera.ShutterCallback(){
        @Override
        public void onShutter() {

        }
    };

    Camera.PictureCallback myPictureCallback_RAW = new Camera.PictureCallback(){
        @Override
        public void onPictureTaken(byte[] arg0, Camera arg1) {
        }
    };
    Camera.PictureCallback myPictureCallback_JPG = new Camera.PictureCallback(){
        @Override
        public void onPictureTaken(byte[] arg0, Camera arg1) {
            Uri uriTarget = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, new ContentValues());
            OutputStream imageFileOS;
            try {
                imageFileOS = getContentResolver().openOutputStream(uriTarget);
                imageFileOS.write(arg0);
                imageFileOS.flush();
                imageFileOS.close();
                Toast.makeText(HomeActivity.this,
                        "Image saved: " + uriTarget.toString(),
                        Toast.LENGTH_LONG).show();
            } catch (FileNotFoundException e) {
                e.printStackTrace();

            } catch (IOException e) {
                e.printStackTrace();
            }
            camera.startPreview();
        }
    };

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        if(previewing){
            camera.stopPreview();
            previewing = false;
        }
        if (camera != null){
            try {
                camera.setPreviewDisplay(surfaceHolder);
                camera.startPreview();
                previewing = true;
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        camera = Camera.open();
        try {
            camera.setPreviewDisplay(holder);
        } catch (IOException exception) {
            camera.release();
            camera = null;
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        camera.stopPreview();
        camera.release();
        camera = null;
        previewing = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:37:34.907

创建一个 Layout/.xml 文件..如下所示

1）LinearLayout A 2）LinearLayout A 必须有子视图，可以是按钮/文本，无论你想要什么。

3）Linear Layout A也必须有surfaceview B

在您的活动中使用此surfaceView B 来显示相机预览。这样你基本上可以在屏幕上有表面视图和其他视图。

# javascript - 计算字符串的实际长度，就像我们使用插入符号一样

> ID：11276497
> 
> 赞同：1
> 
> 时间：2012-06-30T18:17:42.490
> 
> 标签：javascript, string-length

我想要的是计算插入符号从字符串的开头到结尾移动的时间。

**说明：**在这个小提琴中
查看这个字符串：http: [//jsfiddle.net/RFuQ3/](http://jsfiddle.net/RFuQ3/) 如果你把插入符号放在第一个引号之前，然后按右箭头`""`
`►</kbd> you will push 3 times to arrive after the second quote (instead of 2 times for an empty string).`

第一种方法，也是最容易计算字符串长度的方法是`<string>.length`.
但在这里，它返回 2。

第二种方式，从[JavaScript 获取字符串的真实长度（没有实体）](https://stackoverflow.com/questions/4788242/javascript-get-real-length-of-a-string-without-entities)也给出 2。

我怎样才能得到1？

* * *

^(1-我想到了一种将字符串放入文本输入的方法，然后`while`用 a 循环`try{setCaret}catch(){}`
2-只是为了好玩)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T19:11:56.097

您的问题“

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:48:45.483

Javascript 并不真正支持 unicode。你可以试试

```
yourstring.replace(/[\uD800-\uDFFF]{2}/g, "0").length 
```

物有所值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T18:26:52.387

```
function realLength(str) {
    var i = 1;
    while (str.substring(i,i+1) != "") i++;
    return (i-1);
} 
```

没有尝试代码，但我认为它应该可以工作。

# python - argparse 可以将位置参数与命名参数相关联吗？

> ID：11276501
> 
> 赞同：5
> 
> 时间：2012-06-30T18:17:58.223
> 
> 标签：python, argparse

我想将位置参数与它们发生时存在的“参数状态”相关联。例如，以下命令行：

```
script.py -m 1 foo -r 2 bar -r 7 baz -m 6 quux 
```

应产生以下关联：

```
foo:  m=1, r=0 (default value for r)
bar:  m=1, r=2
baz:  m=1, r=7
quux: m=6, r=7 
```

这可以用`argparse`模块完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T03:56:16.047

这可能对您没有用，但是如果您可以`sys.argv`分成几部分，这个问题似乎是最简单的——本质上，您需要能够弄清楚哪些部分应该是“位置”参数（它们实际上不是位置因为正如你所说，它们可以出现在任何地方）以及哪些部分应该是某种论点。在下面的示例中，我已将其设置为与您的示例一起使用，但您可以轻松地拆分`sys.argv`文件 - 或某种文件。该`condition`函数由您编写。其余的将（希望）是不言自明的。

```
import argparse
import sys
import copy
import os

def split_list(lst,condition):
    current=[]
    out=[current]
    for arg in lst:
        current.append(arg)
        if(condition(arg)):
            current=[]
            out.append(current)

    return out

parser=argparse.ArgumentParser()
parser.add_argument('-m',action='store')
parser.add_argument('-r',default='0',action='store')
#pieces=split_list(sys.argv[1:],os.path.isfile)
pieces=split_list(sys.argv[1:],lambda x: x in ('foo','bar','baz','quux'))
options={} #use collections.OrderedDict if order matters -- or some more suitable data structure.
default=argparse.Namespace()
for args in pieces:
    if(not args):
        continue
    ns=copy.deepcopy(default)
    default=parser.parse_args(args[:-1],namespace=ns)
    options[args[-1]]=default

print (options) 
```

# objective-c - 将 NSString 转换为 Integer 时保持前导零

> ID：11276509
> 
> 赞同：2
> 
> 时间：2012-06-30T18:18:33.573
> 
> 标签：objective-c, ios, nsstring

将字符串转换为整数时，有没有办法保留前导零。例如，假设字符串是“01”，有没有办法可以将它存储为整数值 01？

```
- (int) getNextHand{

    int temp = [[numbersArray objectAtIndex:cardsDelt] intValue]; 
    NSLog(@"Card %i: %i", cardsDelt, temp);
    cardsDelt++;
    return temp;
} 
```

我的 numbersArray 包含 4 个前导零数字，它们是：“00”“01”“02”“03”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T20:40:21.987

如果要使用前导零记录，请使用 %02d

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T18:19:18.030

没有整数是数字，`01`将自动转换为`1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T18:19:54.950

`01`和`1`是相同整数值的两种表示。如果前导数字包含信息，那么您有一个字符串，而不是整数。

# sql - SQL Server 2008 排序规则冲突

> ID：11276515
> 
> 赞同：0
> 
> 时间：2012-06-30T18:18:54.417
> 
> 标签：sql, sql-server-2008, collation

这是我在存储过程中遇到的奇怪错误，

> 无法解决等于操作中“Latin1_General_CI_AI”和“SQL_Latin1_General_CP1_CI_AS”之间的排序规则冲突。Severity 16 State 9 on debugging 我看到问题出在两个表之间的连接中，其中一个表被一个临时表填充。奇怪的是，我在测试环境中没有收到错误，但是在实时生产服务器上出现了这个错误

在花了一些时间找到一个可行的解决方案后，我回答了我自己的问题，现在正在编辑这个问题，以便其他用户可以更好地理解这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T06:11:08.237

```
i am getting the change to answer my own question
well the problem was related to collation type of databases,
in my proc i was useing temp tables by "create table #temptable" , 
now by some searching i found that #temptable is having the collation type of temp database which is different from my database, 
after changing the script to "select * into #temptable" ,I got that now #temptable is having same the collation as of my database, so that's how issue get resolved.
not sure this is the only reason behind the problem but it resolve my issue. 
```

# android - “App Engine 连接的 Android 项目”不可用

> ID：11276518
> 
> 赞同：8
> 
> 时间：2012-06-30T18:19:04.800
> 
> 标签：android, eclipse, google-app-engine, eclipse-plugin

根据Google 的[本](https://developers.google.com/eclipse/docs/appeng_android_create_project)指南，在安装/配置 Eclipse 的 ADT 插件、Android SDK 和 Eclipse 的 Google 插件后，“App Engine Connected Android Project”应该可用。我在 Eclipse 3.7.2 (Indigo) 和 Eclipse 4.2 (Juno) 中都安装了最新版本的所有内容。但是，我无法在两个 Eclipse 版本中的任何一个中创建这样的项目。以下是我在 Juno 中的安装细节：

![安装细节](../Images/595d5df81a0abebdf492fd88d37df1a7.png)

这是我的 Android SDK 详细信息的一部分：

![SDK详情](../Images/1089ac9b06ed52a9b6727a6e9d6a64ea.png)

我的操作系统是 Mac OS X 10.7.4

我知道在将 SDK 工具更新到最新版本之前，我可以在 2012 年 6 月 23 日看到菜单点。

有没有人遇到过类似的问题，或者有人知道我的配置错误吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T16:16:21.860

[我刚刚在这里](https://groups.google.com/forum/#!msg/google-plugin-eclipse/_op9guM5pf4/BArAH-d3TgEJ)找到了 Google 员工的一份（我会说是半官方的）声明。它说，“App Engine Connected Android Project”已在 GPE v3.0.0 中删除。可以降级到包含此菜单项的最新版本 (2.6.1)，可在[此处](http://commondatastorage.googleapis.com/eclipse_toolreleases/products/gpe/release/2.6.1/core/3.7/com.google.gdt.eclipse.suite.3.7.update.site_2.6.1.zip)下载。

整个迁移的原因是，“C2DM [现在] 已弃用，[我们] 应该改用 GCM”。此外

> [用于使用 GCM] 的官方文档正在编写中。[同时，请在http://endpoints-trusted-tester.appspot.com](http://endpoints-trusted-tester.appspot.com)注册端点受信任的测试人员计划 。

他们还“计划在具有 GCM 集成的下一个 GPE 版本中再次添加 [菜单项]”，并且他们“计划在 7 月底发布下一个版本”。

此外，我从 Google 员工 Sparky R. 那里得到了类似的答案：

> 我相信有一个已知问题，即用于制作连接 GAE 的 Android 应用程序的模板现在无法正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T20:12:16.377

我不知道它是否会有所帮助，但我已经设法将 Android SDK 工具恢复到 rev 19 并将 Android SDK Platform-tools 恢复到 rev 11，并从头开始安装 Google 插件，因为我没有旧版本其中。似乎我仍然没有菜单中的选项，所以我认为这是关于谷歌插件的。

此外，自 2012 年 6 月 26 日起，Android 云到设备消息传递框架 - C2DM 已弃用 ( [https://developers.google.com/android/c2dm/](https://developers.google.com/android/c2dm/) )。可能是关于这种弃用，但在不久的将来应该会更清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T00:20:00.503

我在这上面浪费了很多时间。我在 Eclipse 3.7 中有这个选项，但现在我已经升级到 4.2 Juno 和所有其他最新的东西，我再也看不到“App Engine Connected Android Project”选项了。我已经多次尝试安装，试图确保我得到正确的订单。我在尝试从 Eclipse 中更新时遇到了重大问题，不得不求助于各种离线选项。不开心。当我连安装都不会的时候，我应该如何教授这项技术！

蒂姆

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T09:57:54.357

这里有一个例子，他创建了以下项目之一：

[http://bradabrams.com/2011/05/google-io-session-overview-android-app-engine-a-developers-dream-combination/](http://bradabrams.com/2011/05/google-io-session-overview-android-app-engine-a-developers-dream-combination/)

您可以查看代码：

[http://code.google.com/p/cloud-tasks-io/source/checkout](http://code.google.com/p/cloud-tasks-io/source/checkout)

所以我现在正试图去掉我不需要的东西并回到一个基本上新的“Appengine Connected Android Project”我不知道这会有多成功，因为我不知道我需要什么或不！

烦人的是，如果这与 C2DM 相关，我什至不想使用 C2DM。我只想从 android 调用我的应用程序引擎应用程序，而不是向 android 发送消息。也许我走错了路？

**编辑**

我使用以下两个示例使我的项目正常工作（没有向 Android 发送消息，只有 Android 调用方法并获得结果）：

如何调用您的应用程序：[Android REST 客户端、示例？](https://stackoverflow.com/questions/8267928/android-rest-client-sample)

如何访问启用安全功能的应用程序：http: [//krasserm.blogspot.co.uk/2010/01/accessing-security-enabled-google-app.html](http://krasserm.blogspot.co.uk/2010/01/accessing-security-enabled-google-app.html)

这可以解决如何进行 http 连接：http: [//developer.android.com/reference/java/net/HttpURLConnection.html](http://developer.android.com/reference/java/net/HttpURLConnection.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T19:04:12.160

我在 Windows 7 上，我也看到了这一点。这一直对我有用，然后我将 Android SDK 工具更新为 rev 20，并将 Android SDK Platform-tools 更新为 rev 12（两者同时在 Android SDK Manager 中更新），之后我注意到这不起作用。我在 Eclipse 3.7 上，但我升级到 4.2 看看是否有帮助（我没有）。然后我下载了 Android 4.1 SDK 的东西，但这也没有帮助。

除了“App Engine Connected Android Project”不是ava

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T15:07:06.947

我现在可以使用此功能

更新您的 Android 和 App Engine SDK，一切顺利！

# javascript - 如果持久模型（服务器数据库）被外部应用程序更改，AngularJS 可以自动更新视图吗？

> ID：11276520
> 
> 赞同：81
> 
> 时间：2012-06-30T18:19:21.510
> 
> 标签：javascript, angularjs, websocket, socket.io

我刚刚开始熟悉 AngularJS，但我想构建一个 Web 应用程序，当服务器端数据库发生变化时，它的视图会为用户实时自动更新（不刷新）。

AngularJS 可以（大部分）自动为我处理这个问题吗？如果是这样，工作的基本机制是什么？

例如，您是否以某种方式设置 AngularJS 以定期轮询数据库以获取“模型”更改？或者使用某种类似 Comet 的机制来通知 AngularJS 客户端代码模型已更改？

在我的应用程序中，挑战在于其他（非 Web）服务器端软件有时会更新数据库。但是这个问题同样适用于纯 Web 应用程序，您可能有多个客户端通过 AngularJS Web 客户端更改数据库，并且当其中一个客户端更改数据库（模型）时，它们每个都需要更新。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-06-30T21:18:32.357

你有几个选择...

1.  您可以使用`$timeout`and每隔 X 毫秒轮询一次`$http`，或者如果您使用的数据连接到 REST 服务，您可以使用`$resource`而不是`$http`.

2.  您可以创建一个使用某些 Websocket 实现并用于`scope.$apply`处理由套接字推送的更改的服务。这是一个使用 node.js websocket 库 socket.io 的示例：

    ```
    myApp.factory('Socket', function($rootScope) {
        var socket = io.connect('http://localhost:3000');

        //Override socket.on to $apply the changes to angular
        return {
            on: function(eventName, fn) {
                socket.on(eventName, function(data) {
                    $rootScope.$apply(function() {
                        fn(data);
                    });
                });
            },
            emit: socket.emit
        };
    })

    function MyCtrl($scope, Socket) {
        Socket.on('content:changed', function(data) {
            $scope.data = data;
        });
        $scope.submitContent = function() {
            socket.emit('content:changed', $scope.data);
        };
    } 
    ```

3.  你可以获得真正的高科技并创建一个 websocket 实现，它将 Angular 模型与服务器同步。当客户端更改某些内容时，该更改会自动发送到服务器。或者，如果服务器发生变化，它会被发送到客户端。
    这是旧版本 Angular 中的一个示例，再次使用[socket.io：https://github.com/mhevery/angular-node-socketio](https://github.com/mhevery/angular-node-socketio)

**编辑**：对于#3，我一直在使用[Firebase](http://firebase.com)来执行此操作。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-04T15:24:28.347

这是一个使用码头代替节点的实现。angularjs 部分基于 angular-seed 应用程序。我不确定角度代码是否是惯用的......但我已经测试过它是否有效。HTH-托德。

### TimerWebSocketServlet 见

[https://gist.github.com/3047812](https://gist.github.com/3047812)

### 控制器.js

```
// -------------------------------------------------------------
// TimerCtrl
// -------------------------------------------------------------
function TimerCtrl($scope, CurrentTime) {
    $scope.CurrentTime = CurrentTime;
    $scope.CurrentTime.setOnMessageCB(
        function (m) {
            console.log("message invoked in CurrentTimeCB: " + m);
            console.log(m);
            $scope.$apply(function(){
                $scope.currentTime = m.data;
            })
        });
}
TimerCtrl.$inject = ['$scope', 'CurrentTime']; 
```

### 服务.js

```
angular.module('TimerService', [], function ($provide) {
    $provide.factory('CurrentTime', function () {
        var onOpenCB, onCloseCB, onMessageCB;
        var location = "ws://localhost:8888/api/timer"
        var ws = new WebSocket(location);
        ws.onopen = function () {
            if(onOpenCB !== undefined)
            {
                onOpenCB();
            }
        };
        ws.onclose = function () {
            if(onCloseCB !== undefined)
            {
                onCloseCB();
            }
        };
        ws.onmessage = function (m) {
            console.log(m);
            onMessageCB(m);
        };

        return{
            setOnOpenCB: function(cb){
               onOpenCB = cb;
            },
            setOnCloseCB: function(cb){
                onCloseCB = cb;
            },
            setOnMessageCB: function(cb){
                onMessageCB = cb;
            }
        };
    })}); 
```

### web.xml

```
<servlet>
    <servlet-name>TimerServlet</servlet-name>
    <servlet-class>TimerWebSocketServlet</servlet-class>
    <load-on-startup>0</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>TimerServlet</servlet-name>
    <url-pattern>/api/timer/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-17T21:15:27.913

您正在寻找的是[Firebase](https://www.firebase.com/)和[Deployd](http://deployd.com/)。Firebase 还附带了一个适配器，使用起来轻而易举：[http ://angularfire.com/](http://angularfire.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T16:14:02.350

根据“Discover Meteor”一书，Angular 监视/范围类似于 Meteor 的反应性计算……但 Angular 是仅限客户端的，并且比 Meteor 提供的控制粒度更小。

我的印象是，使用 Angular 可能更适合为现有应用程序添加响应性，而当您将 Meteor 用于整个应用程序时，它会飙升。但是我还没有真正的 Angular 经验（尽管我已经构建了一些小型 Meteor 应用程序）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-18T15:12:43.260

因此，Andy Joslin 在他的回答中提到了我的最佳解决方案，即第三个选项，即通过 websockets 或您正在处理的任何其他异步库双向维护状态（这将是 Chrome 消息 API for Chrome Extensions 和例如应用程序），toddg 给出了一个如何实现的示例。然而，在他的示例中，他在 AngularJS 中实现了一个反模式：服务正在调用控制器。相反，模型应该放在服务内部，然后从控制器中引用。

服务套接字回调将修改服务模型，并且因为它是从控制器引用的，所以它会更新视图。如果您正在处理可以重新分配的原始数据类型或变量，请小心，这些将需要在控制器上进行监视才能使其工作。

# c - 在 C 中确定文件类型

> ID：11276521
> 
> 赞同：3
> 
> 时间：2012-06-30T18:19:28.700
> 
> 标签：c, file, file-type

我正在 Linux 机器上使用 C 语言编写一个程序，该程序显示作为程序参数呈现的文件的文件类型。程序需要确定文件是否为以下任何一种：目录、设备、（常规）文件、链接、套接字或 fifo。我不确定如何确定文件类型。

到目前为止，这是我的代码（不多）：

```
int
main(int argc, char **argv)
{
    if( argc == 1 )     /* default: current directory */
        puts("Directory");
    else
        while( --argc > 0 )
            determine_ftype(*++argv);

    return  0;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-30T18:20:56.260

使用 POSIX`stat`函数并读取函数返回`st_mode`的结构的字段。`struct stat`

`stat`功能：

[http://pubs.opengroup.org/onlinepubs/7908799/xsh/stat.html](http://pubs.opengroup.org/onlinepubs/7908799/xsh/stat.html)

结构`struct stat`类型：

[http://pubs.opengroup.org/onlinepubs/7908799/xsh/sysstat.h.html](http://pubs.opengroup.org/onlinepubs/7908799/xsh/sysstat.h.html)

对于 glibc，您还可以阅读手册的`14.9.3 Testing the Type of a File`部分`glibc`：

[http://www.gnu.org/software/libc/manual/html_node/Testing-File-Type.html](http://www.gnu.org/software/libc/manual/html_node/Testing-File-Type.html)

# c# - 使用 WPF 进行 2D 绘图时应该使用哪个控件？

> ID：11276522
> 
> 赞同：0
> 
> 时间：2012-06-30T18:19:36.103
> 
> 标签：c#, .net, wpf, graphics, drawing

我想以编程方式在 WPF 应用程序中绘制一些简单的 2D 形状。我应该使用哪个控件？我听说`Canvas`可以做到这一点，但它主要设计为其他控件的容器，而不是“绘图”画布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:27:35.527

这些其他控件可能是矩形、线条等形状，因此 Canvas 可能是一个好的开始。但是，如果您想直接通过函数进行渲染，则基本上可以使用任何（用户）控件作为基类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T13:51:07.143

显然，画布是用于绘画的。你有什么顾虑？如果是 Speed，你应该看看 Windows XNA。
也许 Direct X、Open GL 或任何提供访问它们的库可能会有一些用处。详细说明您对答案的需求。

# c# - 是否可以使用 C# 在 excel 工作簿中编写功能

> ID：11276526
> 
> 赞同：1
> 
> 时间：2012-06-30T18:20:10.307
> 
> 标签：c#, excel, vba

我有一个需要从 HTTP 服务器查询数据的 excel 工作簿。不能直接从远程数据库查询。

据我所知，我可以使用 VB 宏来联系 HTTP 服务器并更新工作簿中的单元格。是否可以在 C# 中执行此操作？我不想增加部署额外应用程序的负担。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T18:23:27.960

您可以使用 VSTO 为 Excel 创建文档或应用程序级别的插件。看这里[http://msdn.microsoft.com/en-us/office/hh128771.aspx](http://msdn.microsoft.com/en-us/office/hh128771.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T19:09:11.140

按照此处的前几个[重现步骤](https://stackoverflow.com/questions/10526118/bug-cant-choose-dates-on-a-datepicker-that-fall-outside-a-floating-vsto-add-in)创建适用于 Office 的 Visual Studio 工具 - Excel 加载项。

*跳过关于压光机控制的最后一步。*

> 在 Excel 插件项目 > 添加功能区栏和按钮，您可以调用方法以通过 http 收集数据并刷新工作簿。VSTO 中的所有内容与您在 VBA 中执行的方式几乎完全相同，但使用的是 C# 语法。

[使用 VSTO 扩展您的 VBA 代码](http://msdn.microsoft.com/en-us/magazine/cc163373.aspx)

在部署时，您应该使用安装项目，它将创建一个 MSI。如果您有 App.Config 文件，请在部署时注意您需要设置安装项目以添加注册表项：[https ://stackoverflow.com/a/10525693/495455](https://stackoverflow.com/a/10525693/495455)

我强烈推荐此博客，以获取有关通过 .Net 代码更好地管理 VSTO 内存的提示：http: [//jake.ginnivan.net/](http://jake.ginnivan.net/)

# c# - C# 中静态只读变量和集合的奇怪行为

> ID：11276528
> 
> 赞同：3
> 
> 时间：2012-06-30T18:20:15.370
> 
> 标签：c#, oop, static, readonly

我在命名空间 Global 中创建了以下类

```
namespace Global
{
    public static class Status
    {
        public static readonly char Active;
        public static readonly char Suspended;
        public static readonly char Terminiated;
        public static readonly char Deleted;

        private static readonly Dictionary<char, string> statusCollection;
        public static Dictionary<char, string> StatusCollection 
        { 
            get 
            { 
                return statusCollection; 
            }
        }

        static Status()
        {
            statusCollection = new Dictionary<char, string>();
            statusCollection.Add('A', "Active");
            statusCollection.Add('S', "Suspended");
            statusCollection.Add('T', "Terminated");
            statusCollection.Add('D', "Deleted");

            Active = 'A';
            Suspended = 'S';
            Terminiated = 'T';
            Deleted = 'D';
        }
    }

    public class a
    {
        public void add()
        {
            //How to make this collection readonly
            Status.StatusCollection.Add('N', "asd"); 

            Status.Active = 'M'; //Throws a compile time exception, changes not allowed
        }
    }
} 
```

**奇怪的行为**当我尝试`Status.Active`在即时窗口中更新时，我期望该值不会改变，但允许更改。这是否意味着我们可以`readonly`通过反射或运行时更改变量的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T18:21:57.660

`readonly`是的，您可以在运行时通过反射更改属性的值。这是一个非常简单的 POC：

```
public class Program
{
    private static readonly string Foo = "Bar";

    static void Main()
    {
        typeof(Program)
            .GetField("Foo", BindingFlags.Static | BindingFlags.NonPublic)
            .SetValue(null, "new value");
        Console.WriteLine(Foo);
    }
} 
```

当您运行此控制台应用程序时，它将打印：

```
new value 
```

# c++ - 程序无法通过“cin”

> ID：11276530
> 
> 赞同：-1
> 
> 时间：2012-06-30T18:20:22.983
> 
> 标签：c++, cin

我正在编写一个程序，它将猜测从一个大文本文件中提取的单词。第一步是接受用户输入来确定字符串的长度。

编辑：添加完整代码，进行了一些更改

```
#include <iostream>
#include <string>
#include <fstream>
using namespace std;

int i(0),n(0),counter(0),limit(0);
char words[60000][30];

int initarray() {

 int length(0);
 string line;
 char temp;

 ifstream wordlist ("text.txt");

 if (wordlist.is_open())
 {
     while (wordlist.good())
     {
         getline (wordlist,line);
         length=line.length();

         for (n=0;n!=length;n++)
         {
             temp=line.at(n);
             words[i][n]=temp;
         }
         i++;
         counter++;
     }
 }
 else
 {
    cout<<"file not opened";
 }
 wordlist.close();
 return 0;
}

int selectlength()
{
 int length;
 bool shorter(false),longer(false);

 cout <<"length of word"<<endl;
 cin >> length

 limit=counter;
 counter=0;

 for (i=0;i<limit;i++){

    for (n=0;n!=length;n++){
        if (words[i][n]=='\0')
        {
            shorter=true;
            break;
        }
    }

    if (words[i][length+1] != '\0')
    {
        longer=true;
    }

    if (longer==true || shorter==true)
    {
        i--;
     }
 }
    return 0;
}

int printresults(){
 for (i=0;i!=counter;i++){
     for (n=0;n<=20;n++){
         cout << words[i][n];
     }
     cout <<endl;
 }
 return 0;
}

int main() {
 initarray();
 selectlength();
     printresults();
 return 0;

} 
```

但是每当编译好的程序进入“cin”部分以读取用户输入的长度时，我的问题就会发生。当我输入任何数字并按回车键时，什么也没有发生。该程序仍在运行，只是不断地无限期地接受输入。有什么帮助吗？它可能与我在 prigram 早期使用 ifstream 有什么关系，尽管在不同的函数中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T20:05:49.850

你有一个无限循环`selectlength()`。外部`for`循环不会终止，因为您在`i`循环内部递减（循环计数器）（不是一个好主意，也许会找到更好的方法）。

我认为您不会在输入文件的最后一行终止。`longer`并且`shorter`都将是真实的，并且`limit`永远不会达到。在循环中对此进行测试：

```
if (words[i][0] == '\0')
    break; 
```

这至少会停止无限循环并允许您重新审视您的逻辑（目前尚不清楚将用于什么`longer`和`shorter`将用于什么。

一些一般性评论：

1.  将跟踪语句放在问题区域内可以帮助您识别问题。
2.  `char words[x][y]`如果您使用C++ 而不是`std::vector<std::string> words;`
3.  语句中的布尔值`if`像这样更容易阅读：`if (longer || shorter)`比你如何拥有它更容易。
4.  你总是返回 0 - 而不是 make the function `void`。

您还在`counter`内部将全局设置为 0，`selectlength()`但稍后您仍然需要它，`printresults()`因此您不会得到任何输出。

# javascript - 以悬停工具提示样式的子导航为中心不起作用

> ID：11276532
> 
> 赞同：0
> 
> 时间：2012-06-30T18:20:31.190
> 
> 标签：javascript, html, css, hoverintent

正如你在这里看到的；[http://bit.ly/sifpz9](http://bit.ly/sifpz9)，当悬停在主导航中的“最新消息”或“附件”上时，工具提示样式的子导航下拉菜单完美居中。但是，当您将鼠标悬停在“衣服”上时，它不会居中。

我已经尝试重新定位，但是它只是不适用于导航“服装”而不会破坏其他两个。

有更好的解决方案或修复方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:54:37.870

这很容易使用以下 CSS 实现。

```
#top-menu ul ul {
    margin-left: -87.5px;
    left: 50%;
    } 
```

我们使用 87.5px 的负边距，因为你的 ul 宽度是 175px，因此给了我们 ul 宽度的一半，然后我们将它向左移动 50%，使其位于你 li 的锚标记的中间。

我希望这是有道理的。任何问题发表评论，我会尽快回复您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:55:12.697

实际上，子菜单以“What's new”和“Accessories”为中心只是一个巧合，但它们实际上*看起来*是居中的。问题是您做错了，为内部子菜单定义了`left`固定的样式位置。`-31px`

但是由于这些子菜单的宽度是固定的，你可以使用一个老技巧来依赖它：

```
#top-menu ul ul {
    left: 50%;
    margin-left: -88px;
} 
```

这会将子菜单移动到`<li>`元素的中心，然后返回到其大小的一半（或多或少）的左侧。

# javascript - 理论上是否可以使用 chromium 的 installable-webapp API 构建纯 JS bittorrent？

> ID：11276533
> 
> 赞同：1
> 
> 时间：2012-06-30T18:20:32.077
> 
> 标签：javascript, chromium, bittorrent, google-nativeclient, crx

我想我听说他们现在甚至允许有限/沙盒文件系统访问，那么有什么障碍吗？bittorrent 协议是否需要原始访问来启动不一定是 HTTP 的 TCP 连接？在 chromium JS 执行环境中是否有任何机制或设施？我记得有一个 bitfox XPI 客户端或其他东西，但我现在找不到它，我不确定它是否使用了 java 小程序或类似的东西。

NaCL 怎么样，这会改变一切吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T18:27:06.603

> bittorrent 协议是否需要原始访问来启动不一定是 HTTP 的 TCP 连接

是的。当然，客户端可以实现一种处理 HTTP 连接请求的方法，但这并没有什么好处，因为它是一个 P2P 协议，因此也需要侦听套接字才能正常运行。除此之外，它还需要一个 UDP 套接字来支持 DHT。

我无法评论 NaCl，因为我不知道它提供了哪些 API。如果它具有完整的套接字支持和某种存储文件的方式，那么这对 BT 来说就足够了。

# python - 应用引擎python部署后会自动上传本地数据存储服务吗？

> ID：11276534
> 
> 赞同：0
> 
> 时间：2012-06-30T18:20:35.060
> 
> 标签：python, django, google-app-engine

使用 python 应用程序引擎，我在本地数据存储中有一些数据。部署后本地数据存储是否会上传到应用引擎服务器？如果没有，我怎样才能以最简单的方式将它们上传到服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:22:35.260

不，它不会自动上传。

有关如何最好地将批量数据上传到您的应用程序的详细信息，请参阅 AppEngine 文档上的[上传和下载数据页面。](https://developers.google.com/appengine/docs/python/tools/uploadingdata)

# mysql - 从用户表中添加朋友/联系人以在发生更改时显示更改

> ID：11276544
> 
> 赞同：0
> 
> 时间：2012-06-30T18:21:30.150
> 
> 标签：mysql, sql, database, schema

我的系统使用一个用户表，其中包含多个元素，包括他们的在线状态。现在我想添加一个功能，以便每个用户都可以将联系人（即数据库中的现有用户）添加到他们的朋友或联系人列表中，以显示他们的姓名和在线状态。但是，我需要在线状态的任何更改以在联系人列表中更新，因此创建新表无济于事。

我一直在研究这方面的观点，但对数据库没有太多经验，我想知道这是否是正确的方法，以及如何做的更多细节。

以下是我正在考虑的步骤：

1.  当用户注册时，创建一个视图即view_name = username_view。
2.  要添加联系人，请从主用户表中选择数据并添加到用户视图
3.  要删除联系人，请从视图中删除选定的数据。

我不确定这是否可以通过视图实现，所以如果不能，请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:29:06.813

ER 数据库 = 实体和关系数据库通过有一个包含实体“用户”的表和一个用于将用户连接到另一个用户的关系“朋友”的表来处理它。

对此的查询可以是：

```
SELECT users.* 
FROM friends 
LEFT JOIN users ON (users.user_id = friends.friend_id) 
WHERE friends.user_id = :user 
```

**示例：**

用户表，用于实体用户

```
CREATE TABLE user (user_id SERIAL, name TINYTEXT NOT NULL); 
```

示例用户

```
user_id | name
      1 | Anna
      2 | Bertil
      3 | Carl
      4 | David
      5 | Erik 
```

一个朋友表，用于两个用户之间的关系，（不是每个用户一个，只有一个）

```
CREATE TABLE friends (
  user_id BIGINT UNSIGNED NOT NULL,
  friend_id BIGINT UNSIGNED NOT NULL,
  PRIMARY KEY (user_id, friend_id)
); 
```

如果 Anna 将 Beril 和 Carl 添加为好友，Carl 添加 David 和 Erik 作为好友，则表格的内容将是：

```
user_id | friend_id
      1 |         2
      1 |         3
      3 |         4
      3 |         5 
```

如果我们想列出 Annas 朋友的名字，并且我们都知道 Annas user_id = 1，那么我们可以使用这个查询（就像上面的那个）

```
SELECT users.name 
FROM friends 
LEFT JOIN users ON (users.user_id = friends.friend_id) 
WHERE friends.user_id = 1 
```

# objective-c - 在其他 ViewController 中初始化 ViewController 时设置委托

> ID：11276546
> 
> 赞同：0
> 
> 时间：2012-06-30T18:21:33.130
> 
> 标签：objective-c

在我的 UITableViewController 子类的*tableView:cellForRowAtIndexPath:*实现中，我正在使用以下代码片段：

```
AlarmPicker *alarmPicker = [[AlarmPicker alloc] init];
alarmPicker.scrollViewDelegate = alarmPicker;
[cell.contentView addSubview:alarmPicker.view]; 
```

*AlarmPicker*实现了各种*UIScrollViewDelegate*方法。

在*AlarmPicker.h*我声明*scrollViewDelegate*如下：

```
@property (assign) id<UIScrollViewDelegate> scrollViewDelegate; 
```

然后在*AlarmPicker*的实现部分中使用它：

```
UIScrollView *returnScrollView = [[UIScrollView alloc] init];
...
returnScrollView.delegate = self.scrollViewDelegate; 
```

不幸的是，在此*AlarmPicker实例中，* *scrollViewDelegate*始终为 null，因此根本不会调用已实现的委托方法。

 *一种解决方法是将*UIScrollViewDelegate*方法实现放入执行 alloc 和 init 的类中：

```
...
alarmPicker.scrollViewDelegate = self;
... 
```

但这将是一个非常糟糕的解决方案。

为了告诉*AlarmPicker*实例它应该将自己用作其委托，我必须做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:28:05.490

是否有某些原因不能只`returnScrollView.delegate = self`在 AlarmPicker 类中编写？

我看不出你的 scrollViewDelegate 成员为什么会在此处为 nil 的任何原因，除非该行`returnScrollView.delegate = self.scrollViewDelegate;`发生在你的 init 方法中，在这种情况下，你可以将它移到稍后的方法或在 AlarmPicker 的 init 方法中传递所需的委托。*

# php - 在 OSX Lion 上启用后启用 PHP 不起作用

> ID：11276571
> 
> 赞同：10
> 
> 时间：2012-06-30T18:26:00.940
> 
> 标签：php, apache, osx-lion

我遵循了几个教程。Web 共享已打开，我取消注释 apache2/httpd.conf 中的 php 模块，但是当我尝试打开 phpinfo 文件时，它仍然尝试将其作为文件打开。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-30T18:44:12.500

编辑您的 /etc/apache2/httpd.conf 并确保该行：

```
LoadModule php5_module libexec/apache2/libphp5.so 
```

...存在。我认为它在标准 OS X 配置中默认被注释掉，但据我记得，你只需要取消注释它，然后重新启动 Apache：

```
sudo apachectl restart 
```

你应该很高兴。

或者

利用`MAMP`

[http://www.mamp.info/en/index.html](http://www.mamp.info/en/index.html)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-30T18:50:58.347

确保您的 Apache 配置包含以下行：

```
AddType application/x-httpd-php .php 
```

# mysql - 根据 MySQL 中的两个表确定空闲时隙

> ID：11276573
> 
> 赞同：0
> 
> 时间：2012-06-30T18:26:10.570
> 
> 标签：mysql, date, calendar, timeslots

所以我有两张桌子。

表 1 名为“约会”，包含以下字段：`ID`(int)、`TimeboxID`(int)、`Date`(date)

表 2 名为“timebox”，包含以下字段：`ID`(int)、`Weekday`(int)、`StartTime`(varchar)

表 1 保留所有约会 ( `Date`+`TimeboxID`组合)，而表 2 定义了一周中的每一天都有哪些时间段。

这是我的问题：如何在 1 个查询中找出哪些日期有可用的空闲时间段（以及有多少）？

附言。字段`StartTime`仅用于显示，这里没有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:38:22.127

我应该使用类似的东西：

```
SELECT workdays.date, COUNT(DISTINCT timebox.ID) AS FreeTimeBoxes
FROM workdays
LEFT JOIN timebox ON (WEEKDAY(workdays.date) = timebox.Weekday)
LEFT JOIN appointment ON (workdays.date = appointment.date AND timebox.ID = appointment.TimeboxID)
WHERE appointment.ID IS NULL
GROUP BY workdays.date 
```

不知道你是否用自动化的东西替换了表工作日

# c++ - 多进程同步的输出流锁定？

> ID：11276575
> 
> 赞同：1
> 
> 时间：2012-06-30T18:26:12.707
> 
> 标签：c++, stl, process, stream, locking

有多个进程，都写在同一个输出流上（例如 with `std::cout`），有没有办法锁定流，以便当一个进程开始编写自己的消息时，它可以一直执行到最后（例如 with `std::endl`）？

我需要一种便携的方式来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:29:10.947

你运气不好。您将不得不使用您的taget OS 提供的任何东西。这意味着使用全局/系统范围的互斥锁或`lockf()`类似功能。您可以使用一些 3rd 方库来满足可移植性要求，例如[Boost.Interprocess](http://www.boost.org/doc/libs/1_50_0/doc/html/interprocess/synchronization_mechanisms.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T12:41:30.513

目前尚不清楚它是否适合您的情况参数，但您可能会将所有数据汇集到一个单独的工作进程，该进程在将数据转储到标准输出之前聚合数据（具有自己的内部锁定）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T21:12:05.487

如果您使用的是类似 UNIX 的操作系统，那么您可以使用`stringstream`适配器模仿您想要的行为。这可能不是实现它的最佳方法，但其想法是在遇到`write`时触发单个调用。`std::endl`

```
// Assume fd is in blocking mode
class fdostream : public std::ostringstream {
    typedef std::ostream & (*manip_t) (std::ostream &);
    struct fdbuf : public std::stringbuf {
        int fd_;
        fdbuf (int fd) : fd_(fd) {}
        int sync () {
            int r = ::write(fd_, str().data(), str().size());
            str(std::string());
            return (r > 0) ? 0 : -1;
        } 
    } buf_;
    std::ostream & os () { return *this; }
public:
    fdostream (int fd) : buf_(fd) { os().rdbuf(&buf_); }
};

fdostream my_cout(1);
my_cout << "Hello," << " world!" << std::endl; 
```

这应该达到同步写入的效果，代价是缓冲输入到 a 中`stringstream`，然后`string`在每次刷新后清除内部。

为了获得更大的可移植性，您可以修改代码以使用`fwrite`，并使用 指定无缓冲写入`setvbuf`。但是，原子性`fwrite`将取决于库函数的 C 实现。

# netbeans - 将最新的 EclipseLink 版本添加到 Netbeans 项目？

> ID：11276576
> 
> 赞同：2
> 
> 时间：2012-06-30T18:26:22.253
> 
> 标签：netbeans, eclipselink

我正在使用 EclipseLink 作为使用 Netbeans 的持久性提供程序使用 JPA 开发 JSF 应用程序。[EclipseLink 的默认版本是 Netbeans 7.1 的 2.0，但我非常需要为 2.4 http://wiki.eclipse.org/EclipseLink/DesignDocs](http://wiki.eclipse.org/EclipseLink/DesignDocs/368365)引入的 eclipselink.ddl-generation 新增 create-or-extend-tables [/368365](http://wiki.eclipse.org/EclipseLink/DesignDocs/368365)。所以我想将 EclipseLink 2.4 添加到我现有的 netbeans 项目中，但失败了。我关注[了如何在 NB 7 中使用 EclipseLink 2.3 作为持久性提供程序？](https://stackoverflow.com/questions/7017359/how-do-you-use-eclipselink-2-3-as-persistence-provider-in-nb-7)，但没有成功。

[我从http://www.eclipse.org/eclipselink/downloads/index.php](http://www.eclipse.org/eclipselink/downloads/index.php)下载了 EclipseLink 2.4.0 Installer Zip (28 MB) 。解压后，几个文件夹中有几个 jar 文件，但我只将 eclipselink.jar 文件（没有版本号，在 jlib 文件夹中找到）添加到 Netbeans 项目库中。

我也尝试在 persistence.xml 下添加一个新库，但仍然失败。

我手动添加了代码

```
<property name="eclipselink.ddl-generation" value="create-or-extend-tables" /> 
```

到 persistence.xml 文件，但表已删除，但未创建。

**如何将最新的 EclipseLink 版本添加到 Netbeans 项目？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T04:51:20.627

这就是我幸运的方式

1.  下载[eclipselink 2.4](http://www.eclipse.org/eclipselink/downloads/)
2.  在 Netbeans 7 中，从 Project > Properties 中删除以前的 eclipselink jars：Libraries
3.  添加新的***eclipselink.jar***作为“编译”库和***eclipse-jpa-modelgen***作为“处理器”。

您将在 eclipselink/jlib 和 eclipselink/jlib/jpa 中找到这些库

-- 持久性.xml

value="创建或扩展表"

# android - 将字符串转换为 uri 到位图以在 ImageView 中显示

> ID：11276579
> 
> 赞同：1
> 
> 时间：2012-06-30T18:26:57.357
> 
> 标签：android, memory, bitmap, uri, preference

我一直在寻找解决问题的方法，但似乎无法弄清楚。我敢肯定这可能是 1 或 2 条简单的线条，希望有人能引导我朝着正确的方向前进。

在我的应用程序中，用户可以单击一个按钮来打开图库。一旦他们选择了一个图像，它就会在我的应用程序的 ImageView 中显示该图像。那部分工作得很好。最初，我只是让它从画廊返回一个 uri，然后我会直接用这个来显示它：

```
imageView1.setImageURI(myUri); 
```

好吧，如果用户连续多次重新加载该页面，显然我现在会遇到可怕的“内存不足”错误，因此我必须清理我的代码以缩小图像。我通过实现一个位图类来实现这一点，该类将图像转换为位图并为我缩小它。现在，我的 ImageView 显示代码如下所示：

```
imageView1.setImageBitmap(bitmap1); 
```

那部分也工作正常。这是问题：

我将 uri 路径转换为字符串，然后将其保存在 SharedPreference 中。这样当用户退出应用程序并稍后返回时，他们设置的图像会自动显示。我像这样转换uri：

```
...
selectedImageUri = data.getData();
String selectedImagePath;
selectedImagePath = getPath(selectedImageUri);
... 
```

检索 SharedPreference String 的旧方法，将其转换为 uri，然后显示它工作正常。（当然除了内存不足错误）它看起来像这样：

```
Uri myUri = Uri.parse(selectedImagePath);
imageView1 = setImageURI(myUri); 
```

“selectedImagePath”显然是我从 SharedPreference 中检索到的字符串。同样，这工作正常，但如果重新加载太多次会抛出错误。

现在不工作的部分是当我尝试实现新的位图转换时，我可以缩放位图而不会出现内存错误。这是代码：

```
Uri myUri = Uri.parse(selectedImagePath)
Bitmap bitmap = getThumbnail(myUri);
imageView1.setImageBitmap(bitmap); 
```

这不显示任何内容。选择的原始图像可以很好地显示图像，但是当我返回此屏幕并尝试从 SharedPreference 解析字符串然后将其转换为位图时，什么都没有显示。“getThumbnail”方法的代码直接取自这篇文章--->

[如何从 Uri 获取位图？](https://stackoverflow.com/questions/3879992/get-bitmap-from-an-uri-android)

这是第三个答案。

有人有想法么？很抱歉这篇超长的帖子，但我宁愿过度解释我的问题，也不愿提供足够的信息。抱歉，如果在其他地方回答了这个问题。我一直在寻找其他几个小时的问题，但没有找到任何可以解决我问题的东西。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T21:51:52.073

我想通了，所以这就是我为其他遇到这个独特问题的人所做的。从图库中选择图像并返回意图后，我通过以下代码从该意图中获取数据：

```
selectedImageUri = data.getData(); 
```

然后我通过这个得到了路径：

```
selectedImagePath = getPath(selectedImageUri); 
```

这调用了这个“getPath”方法：

```
public String getPath(Uri uri)  
{ 
    Cursor cursor = getContentResolver().query(uri, null, null, null, null);
    cursor.moveToFirst();
    int idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA);
    return cursor.getString(idx);
} 
```

然后我将“selectedImagePath”保存为 SharedPreference 字符串。

后来，为了检索该字符串并将其转换回显示图像，我首先检索了 SharedPreference 字符串并将其转换回“selectedImagePath”。然后，我像这样在 ImageView 中设置它：

```
targetImage = (ImageView)findViewById(R.id.imageView1);
targgetImage.setImageBitmap(decodeSampledBitmapFromResource(selectedImagePath, 200, 200)); 
```

它调用了以下方法：

```
public static int calculateInSampleSize(
        BitmapFactory.Options options, int reqWidth, int reqHeight) {
// Raw height and width of image
final int height = options.outHeight;
final int width = options.outWidth;
int inSampleSize = 2;

if (height > reqHeight || width > reqWidth) {
    if (width > height) {
        inSampleSize = Math.round((float)height / (float)reqHeight);
    } else {
        inSampleSize = Math.round((float)width / (float)reqWidth);
    }
}
return inSampleSize; 
```

}

```
public static Bitmap decodeSampledBitmapFromResource(String resId,
        int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(resId, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeFile(resId, options);
} 
```

完成一项相当简单的任务需要大量代码，但它确实有效，所以我很高兴并继续前进。希望这将帮助其他需要完成同样事情的人。

# asp.net-mvc - 是否有从域模型自动生成视图模型的工具？

> ID：11276587
> 
> 赞同：0
> 
> 时间：2012-06-30T18:28:08.203
> 
> 标签：asp.net-mvc

我目前正在使用 ADO.NET DbContext Generator 从实体模型生成域对象。是否有任何工具可以为每个域对象生成视图模型？向视图模型属性添加数据注释，如 [Required]、[DisplayName] 和 [DataType] 也很不错。

我将添加到这些生成的视图模型中以构建更复杂的视图模型，但至少最繁琐的工作是自动化的。

ASP.NET MVC 4 RC

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:29:15.160

不，没有这样的工具。由您来定义视图模型。一个工具不可能知道你的视图是什么样子以及它们包含什么信息。请记住，视图模型可以是多个域模型的投影。工具可以从现有的数据库模式生成模型，但视图模型没有这样的东西。他们的设计留给了开发人员的聪明才智，恕我直言，这更好。

# ios - How to change the position of the button through coding xcode

> ID：11276590
> 
> 赞同：0
> 
> 时间：2012-06-30T18:28:46.827
> 
> 标签：ios, xcode, uibutton

I am trying to align a button that I created through code, but I can't seem to change its position, my code:

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        self.backgroundColor = [UIColor whiteColor];
        self.lineWidth = DEFAULT_WIDTH;
        self.lineColor = DEFAULT_COLOR;
        UIButton* btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        btn.frame = CGRectMake(20,100, 50, 50);
        //[btn setFrame:CGRectMake(3,20, 50, 50)];
        btn.center = self.center;

        [btn setTitle:@"Clear" forState:UIControlStateNormal];
        [btn addTarget: self 
                   action: @selector(clearButtonPressed:) 
         forControlEvents: UIControlEventTouchDown];
        [self addSubview:btn];
    }
    return self;
} 
```

If I remove the "btn.center =self.center" and try to set the X and Y position as

```
 "btn.frame =CGRectMake(3,20,50,50)" 
```

it doesn't even display the button. Please any help will be appreciated , thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:49:03.293

Have you tried using [btn setCenter:center]; where center is a CGPoint?

# c# - 在 void 函数中返回 void 和不返回之间有什么区别吗

> ID：11276599
> 
> 赞同：0
> 
> 时间：2012-06-30T18:29:24.613
> 
> 标签：c#, void, return-type

情况如下：我在我的程序中调用了一个void函数，它提供了一个带有OK和Cancel的消息框，但是这个函数被封装了。我需要知道用户点击了什么。

那么无论如何我是否劫持了这个功能来了解用户的选择？

或者我觉得程序员写这个函数的时候，用户点击Cancel的时候一定是返回一个void，而用户点击OK的时候什么都没有返回。我是否可以区分这两个动作 - 返回 void 并且不返回任何内容？

我知道这似乎是不可能的，但这就是为什么我来stackoverflow问你们。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:38:56.747

返回 void 的函数只有一个 return - nothing - 因此返回 nothing 或返回没有区别`void`。

如果您无法更改现有功能并且它所做的只是显示一个 MessageBox，如果我是您，我会废弃它并重新开始。

你想要的是这样的：

```
public DialogResult GetDialogResult(string message, string caption)
{
    return MessageBox.Show(message, caption, MessageBoxButtons.OKCancel);
} 
```

用你想要的消息和标题调用它，你会得到一个返回`DialogResult.OK`或者`DialogResult.Cancel`

如果它不仅仅显示 MessageBox，您唯一的选择是检查该函数在单击 OK 时所做的任何更改，例如：

*   如果只有在按下 OK 时才将记录添加到数据库中，请检查该记录
*   如果对象的状态发生变化，请检查该变化：

    ```
    OtherObject.SetValueIfOK(2);
    if (OtherObject.GetValue() == 2)
    {
        // OK was clicked
    }
    else
    {
        // Cancel was clicked
    } 
    ```

其他任何事情，我认为您可能不走运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:32:01.057

“返回 void”（你会写`return;`）与不返回任何内容完全相同。

您想返回类似`DialogResult`. .NET 框架使用`DialogResult.OK`并`DialogResult.Cancel`经常用于您想做的事情。

# javascript - Google Charts Table API 按列分页

> ID：11276604
> 
> 赞同：1
> 
> 时间：2012-06-30T18:29:58.363
> 
> 标签：javascript, html, google-visualization

我需要显示一个包含许多行和列的表格。Google Table 的分页选项是按行。

但是由于一个表可能有大量的列，Google Table 是否可以按列和按行进行分页？

# java - Eclipse 无法识别 listFiles(Filter paramFileFilter)

> ID：11276605
> 
> 赞同：1
> 
> 时间：2012-06-30T18:30:08.370
> 
> 标签：java, eclipse

我怎样才能解决这个问题？Eclipse 无法识别此功能：

```
listFiles(Filter paramFileFilter) 
```

请参阅以下屏幕截图：

![在此处输入图像描述](../Images/363f8594d09383c1349859c8cd3d151f.png)

* * *

![在此处输入图像描述](../Images/b111e4cd11f335133b0c7845fa8fb0e5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T20:11:50.470

检查类型`FileFilter`；很可能不是`java.io.FileFilter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T08:26:16.707

在这种情况下，请始终检查相关方法和参数的导入语句。很有可能您导入了一些 xyFileFilter，但想要 abFileFilter。您可以通过将鼠标悬停在标识符和方法调用上最轻松地进行检查，您将在其中看到完全限定的名称。

此错误主要发生在在 Eclipse 中创建这些导入时使用错误的快速修复，因此请确保通过查看工具提示末尾大括号中的包名称来选择正确的“导入 XYZ”快速修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-24T18:21:48.983

许多年后，但我自己也遇到了同样的问题。我的问题是我创建了一个与 JFileChooser 一起使用的文件过滤器，然后我尝试将相同的过滤器与 File.listFiles 一起使用。问题是有两个不同的类都称为“FileFilter”，或者更确切地说，一个类和一个接口。

JFileChooser 使用 javax.swing.filechooser.FileFilter。File.listFiles 使用 java.io.FileFilter。

但幸运的是，两者都需要一个带有签名 public boolean accept(File f) 的函数。所以解决方案很简单。我将文件过滤器从“扩展 javax.swing.filechooser.FileFilter”更改为“扩展 javax.swing.filechooser.FileFilter 实现 java.io.FileFilter”。然后它适用于两种情况。

# javascript - SQL - 检查重复值

> ID：11276606
> 
> 赞同：1
> 
> 时间：2012-06-30T18:30:10.050
> 
> 标签：javascript, sql, appcelerator

（本项目全部用JS编写）

所以，我有一个名为 的表，有`paid_offers`两列名为`offer_id`，`entity_id` 我想要做的是计算`offer_id`与单个`entity_id`.

**编辑：**示例：entity_id A 有 35 个可用优惠（因此，有 35 行具有唯一的 offer_id，但所有相同的 entity_id）

因此，获取计数没有问题`arrayList.length`，但我只需要一种获取实际数组的方法。谢谢您的帮助！

编辑：根据要求，更多信息！我将使用输出作为数组。

因此，这个项目是使用 Titanium 编写的（来自 appcelerator）。除了查询之外，我不需要任何东西。所以，对于那些不知道的人来说，这就是这里引号内的内容。

`var offersList = db.execute("SELECT entity_id FROM paid_offers");`

现在，目标不仅仅是获取 ID 列表，而是获取`offer_id`与每个唯一值关联的值列表`entity_id`。我认为它看起来接近：

`var offersList = db.execute("SELECT offer_id FROM paid_offers WHERE entity_id = entity_id`

除非那行不通，但这是我在浏览此内容时的思路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T19:45:50.943

如果您要计算每个实体的报价，它是

```
SELECT entity_id, COUNT(offer_id) As Count
FROM   paid_offers
GROUP BY entity_id 
```

这只会找到至少有一个报价的实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:55:14.850

我*想*你追求的是这个...

```
SELECT offer_id, COUNT(*) As Count
FROM   paid_offers
GROUP BY offer_id 
```

这会给出类似的东西。

```
offer_id   Count
1          1
2          4
3          2
... 
```

请注意，它将排除表中不存在的任何 offer_id，因此永远不会计数为 0

关于使用 Array.length() 进行计数的另一个注意事项 - 它向 JS 返回一个（可能很大的）记录集，然后对其进行计数。这使用了大量资源而没有太多好处 - 最好`COUNT`在 SQL 中执行（如上所示）并获得结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T19:01:01.513

这对于纯 SQL 来说并不简单或不可能，因为结果中的每一列总是只能是一个值，但您需要一个列表。试试这种方法：

```
select entity_id, offer_id
from paid_offers 
```

在 JavaScript 中，读取结果并为每个结果创建一个数组，`entity_id`并将`offer_id`s 附加到该数组。处理完所有查询结果后，您将拥有所需的结构。伪代码：

```
data = {}
for (entity_id, offer_id in rows) {
    var a = data[entity_id]
    if (a === undefined) {
        a = []
        data[entity_id] = a
    }

    a.push(offer_id)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T18:42:44.280

那么如何在数组列表中获取另一列。然后有一个通过每个 offer_id 的循环出口。然后在里面遍历每个 Entity_id 。如果出现多个实体 ID，请不要从您的最终数组列表中删除该 offer_id。

或者为什么不直接使用 SQL 调用呢？

# c# - linq初学者，没有声明的foreach语句？

> ID：11276607
> 
> 赞同：-11
> 
> 时间：2012-06-30T18:30:23.527
> 
> 标签：c#, linq

我只是在阅读一些 LINQ 的傻瓜内容，我有一个问题。这是代码：

```
private void btnTest_Click(object sender, EventArgs e)
{
    // Create an array as a data source.
    String[] QueryString = { “One”, “Two”, “Three”, “Four”, “Five” };

    // Define the query.
    var ThisQuery = from StringValue in QueryString 
                    where StringValue.Length > 3
                    select StringValue + “\r\n”;

    // Display the result.
    foreach (var ThisValue in ThisQuery)
        txtResult.Text = txtResult.Text + ThisValue;
} 
```

txtResult 是什么，它可以在没有声明的情况下工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T18:41:11.850

打开 Visual Studio > 新项目 > Windows 应用程序

将文本框控件拖到表单设计图面上。

按 F4，在属性窗口中将文本框的 Name 属性设置为`txtResult`

将按钮控件拖到表单设计图面上。

Peess F4，在属性窗口中将按钮的Name属性设置为`btnTest`

双击按钮，它将带您进入代码中的按钮单击事件。

粘贴上面的代码并按F11开始调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:34:53.707

txtResult 是一个文本框控件。在示例中的其他地方必须有另一个引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T18:33:06.053

如果 txtresult 不在表格或您的班级中，它将给您错误。将它添加到表单/类或定义一个字符串变量来保存结果。

```
 foreach (var ThisValue in ThisQuery)
     txtResult.Text = txtResult.Text + ThisValue; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T18:43:47.777

txtresult 是这段代码中使用的 TextBox 控件的 Name 属性的值。您需要在应用程序中添加一个 TextBox 并为其分配 Name 属性值 'txtresult' 才能使此代码正常工作。

# .net - 将任务数组与 continuation 链接起来

> ID：11276610
> 
> 赞同：1
> 
> 时间：2012-06-30T18:30:31.157
> 
> 标签：.net, c#-4.0, task-parallel-library, continuations

我有一个有点复杂的任务结构（至少对我来说）。结构是：

（其中 T = 任务）

T1，T2，T3...Tn。有一个数组（文件列表），T 代表为每个文件创建的任务。每个 T 始终有两个必须完成或失败的子任务：Tn.1、Tn.2 - 下载和安装。对于每次下载（Tn.1），总是有两个子任务要尝试，从两个路径（Tn.1.1，Tn.1.2）下载。

执行将是：

一、下载文件：Tn1.1。如果 Tn.1.1 失败，则 Tn.1.2 执行。如果任一下载任务返回 OK - 执行 Tn.2。如果 Tn.2 执行或失败 - 转到下一个 Tn。

我想第一件事就是用锯齿状数组编写所有这些结构：

```
 private void CreateTasks()
    {     
        //main array
        Task<int>[][][] mainTask = new Task<int>[_queuedApps.Count][][];
        for (int i = 0; i < mainTask.Length; i++)
        {
            Task<int>[][] arr = GenerateOperationTasks();
            mainTask[i] = arr;
        }
    }

    private Task<int>[][] GenerateOperationTasks()
    {
        //two download tasks 
        Task<int>[] downloadTasks = new Task<int>[2];
        downloadTasks[0] = new Task<int>(() => { return 0; });
        downloadTasks[1] = new Task<int>(() => { return 0; });

        //one installation task 
        Task<int>[] installTask = new Task<int>[1] { new Task<int>(() => { return 0; }) };

        //operations Task is jagged - keeps tasks above
        Task<int>[][] operationTasks = new Task<int>[2][];
        operationTasks[0] = downloadTasks;
        operationTasks[1] = installTask;

        return operationTasks;
    } 
```

所以现在我得到了我的 mainTask 任务数组，其中包含如上所述的有序任务。然而，在阅读有关 ContinuationTasks 的文档后，我意识到这对我没有帮助，因为我必须调用例如 Task.ContinueWith(Task2)。我很难在我的 mainTask 数组上这样做。我不能写 mainTask[0].ContinueWith(mainTask[1]) 因为我不知道数组的大小。

如果我能以某种方式引用数组中的下一个任务（但不知道它的索引），但无法弄清楚如何。有任何想法吗？非常感谢您的帮助。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T20:55:17.367

在要安装的排队应用列表中使用并行库怎么样？

正如 svick 在上面的评论中所说，尝试下载然后安装的过程是非常同步的，因此您不需要为此执行任务，而只需要一些顺序代码。

但是对于下载所有应用程序并同时并行安装，您可能需要使用您的数据和下载+安装方法填写应用程序列表，然后只需使用并行库即可并行执行所有应用程序。这是一个例子，我从你的帖子中猜到了很多东西，但应该让你知道我在说什么。

如果您还希望将整个事情放在一个单独的任务中并在所有应用程序并行下载时做其他事情，您可以将并行代码包含在一个任务中并在代码中的其他位置执行它，继续处理其他事情然后最后等待完成任务。

这可能是您要下载的每个应用程序的一个类：

```
/// <summary>
/// Class for each of your apps to be downloaded and installed. You can also
/// derive this in other types of apps that require a different download or install
/// approach.
/// </summary>
class AppToDownload
{
    /// <summary>
    /// The addresses to download this app
    /// </summary>
    public List<string> DownloadAddresses { get; set; }

    /// <summary>
    /// Flag that tells if this task was successfully installed. Set to false
    /// as default.
    /// </summary>
    public bool Installed { get; set; }

    /// <summary>
    /// Constructor
    /// </summary>
    /// <param name="downloadAddresses">Addresses to download this app from, they
    /// should be in order of preference</param>
    public AppToDownload(List<string> downloadAddresses)
    {
        this.DownloadAddresses = downloadAddresses;
        this.Installed = false;
    }

    /// <summary>
    /// Public method to be called to Install this app. It will download, and if
    /// successful, will install
    /// </summary>
    /// <returns></returns>
    public bool InstallApp()
    {
        this.Installed = (this.TryDownload() && this.TryInstall());
        return this.Installed;
    }

    /// <summary>
    /// Internal method to download this App. You can override this in a derived
    /// class if you need to.
    /// </summary>
    /// <returns></returns>
    protected virtual bool TryDownload()
    {
        bool res = false;

        // (...) Your code to download, return true if successful

        return res;
    }

    /// <summary>
    /// Internal method to install this App. You can override this in a derived
    /// class if you need to.
    /// </summary>
    /// <returns></returns>
    protected virtual bool TryInstall()
    {
        bool res = false;

        // (...) Your code to install, return true if successful

        return res;
    }
} 
```

然后这里是并行下载和安装所有应用程序的代码。您还可以使用类 ParallelOptions 的实例来个性化 Parallel 循环的工作方式。

```
List<AppToDownload> queuedApps = new List<AppToDownload>();

// (...) Fill the list of apps

// Try Install all Apps in parallel
Parallel.ForEach(queuedApps, (app) => app.InstallApp()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T21:13:34.473

如果你想在后台线程上按顺序运行一些操作，你不需要很多`Task`s，你只需要一个：

```
Task.Factory.StartNew(DownloadAndInstallFiles) 
```

在里面`Task`，你可以使用正常的顺序控制流结构，比如`foreach`和`if`s 来做你想做的事。就像是：

```
void DownloadAndInstallFiles()
{
    foreach (var file in files)
    {
       var downloaded = Download(file, primarySource);
       if (downloaded == null)
           downloaded = Download(file, secondarySource);

       if (downloaded != null)
           Install(downloaded);
    }
} 
```

# java - Android中的位图大小以编程方式与。亚行规模

> ID：11276613
> 
> 赞同：0
> 
> 时间：2012-06-30T18:30:47.583
> 
> 标签：java, android, image

我搜索过这个，发现对于小于12的api，通常使用的是bitmap.getrowbytes * bitmap.getheight;

但是，对于图像，我获得以下内容：

```
mBitmap.getRowBytes() = 320
mBitmap.getHeight() = 100
mBitmap.getWidth() = 80. 
```

因此根据上述公式，我得到 32,000。

但是，当我检查从 adb 读取位图图像的文件时，使用

```
ls -l 
```

我知道大小是90Kb。

我正在阅读如下图像：

```
 Uri chosenImageUri = data.getData();
        if (chosenImageUri != null) {
            try {
       InputStream photoStream = getContentResolver().openInputStream(chosenImageUri);
          BitmapFactory.Options opts = new BitmapFactory.Options(); 
              opts.inSampleSize = 4;
              Bitmap mBitmap = BitmapFactory.decodeStream(photoStream,null, opts);
          photoStream.close();

} 
} 
```

为什么结果不一样？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:37:24.337

好的，我刚刚明白发生了什么。我会发布这个以防它帮助任何人。

原因是我正在使用 bitmapfactoryoptons 和 insamplesize =4。

发生的事情是

例如， inSampleSize == 4 返回的图像是原始宽度/高度的 1/4，像素数的 1/16。任何值 <= 1 都被视为与 1 相同。

[正如这里](http://android-coding.blogspot.com/2012/05/reduce-bitmap-by-setting-insamplesize.html)提到的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:37:20.867

图像在 RAM 上占用的内存量与磁盘上的不同。在RAM中，可以通过公式检查图像的内存消耗是`pixels*3`RGB`pixels*4`还是ARGB。可以通过 找到像素数`width*height`。您的图像必须具有 Alpha 通道，如`80*100*4 = 32,000`. 请注意，这是以字节为单位的，要以 kB 或 MB 为单位，您需要分别将其除以 1024 和 1024*1024。

# php - Zend: setBelongsTo 没有工作权限

> ID：11276616
> 
> 赞同：2
> 
> 时间：2012-06-30T18:31:39.480
> 
> 标签：php, zend-framework, zend-form, zend-form-element

'正在尝试在表单中使用 setBelongsTo，但 Zend 不验证值并且不 setDefaults 该字段。在谷歌上搜索过，什么也没找到。任何想法？

**形式：**

```
$this->setName('form_tecnicos')
         ->setAttrib('onSubmit',"return validarForm()");

    $elementos['nome'] = new Zend_Form_Element_Text('nome');
    $elementos['nome']->setLabel('Nome')
        ->setRequired(true)
        ->setAttrib('maxlength','150');

        $elementos['telefone0'] = new Zend_Form_Element_Text('0');
        $elementos['telefone0']->setLabel('Telefones')
           ->setRequired(true)
           ->setAttribs(array('mascara'=>'tel','maxlength'=>14))
           ->setBelongsTo('telefones');

        $elementos['telefone1'] = new Zend_Form_Element_Text('1');
        $elementos['telefone1']->setLabel('Telefones')
           ->setRequired(true)
           ->setAttribs(array('mascara'=>'tel','maxlength'=>14))
           ->setBelongsTo('telefones');

$elementos['submit'] = new Zend_Form_Element_Submit('Entrar');
        $elementos['submit']->setLabel('Entrar');

    $this->addElements($elementos);

    $filters = array('StringTrim');
    $this->setElementFilters($filters);

    $this->setElementDecorators(array(
            'viewHelper',
            'Errors',
            array(array('data'=>'HtmlTag'), array('tag' => 'dd')),
            array('Label',array('tag'=>'dt')),
            array(array('row'=>'HtmlTag'),array('tag'=>'div','class'=>'grid_2'))
    ));

    $remover_label = array('submit');

    foreach($remover_label as $elementos)
        $this->$elementos->removeDecorator('label'); 
```

**控制器**

```
$form = new Application_Form_Tecnicos();
   $this->view->form = $form;

   if($this->getRequest()->isPost()):
        $dados = $this->getRequest()->getPost();

        if($form->isValid($dados)):
            //
        else:                   
            $form->setDefaults($dados);
        endif;
   endif; 
```

**打印_r($dados)**

```
Array ( [nome] => [telefones] => Array ( [0] => (11) 1111-111 ) [Entrar] => Entrar ) 
```

**我坚持下去**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T22:22:59.853

您有两个问题实际上与`setBelongsTo`. 如果您只想要简短的答案，请将表单代码的相关部分更改为有效的：

```
$elementos['nome'] = new Zend_Form_Element_Text('nome');
$elementos['nome']->setLabel('Nome')
    ->setRequired(true)
    ->setAttrib('maxlength','150');

$elementos['telefone0'] = new Zend_Form_Element_Text('telefone0');
$elementos['telefone0']->setLabel('Telefones')
    ->setRequired(true)
    ->setAttribs(array('mascara'=>'tel','maxlength'=>14))
    ->setBelongsTo('telefones');

$elementos['telefone1'] = new Zend_Form_Element_Text('telefone1');
$elementos['telefone1']->setLabel('Telefones')
    ->setRequired(true)
    ->setAttribs(array('mascara'=>'tel','maxlength'=>14))
    ->setBelongsTo('telefones'); 
```

这是更长的解释：

有两种方法可以将表单元素添加到 Zend Form 对象。您可以实例化相关的表单元素对象并将其添加到表单中：

```
$form->addElement(new Zend_Form_Element_Text('name')); 
```

或者您可以使用相关参数调用 addElement 并让它为您创建对象：

```
$form->addElement('text', 'name'); 
```

如果您使用第一种方法，它会从对象中获取元素名称。如果使用第二个，则将名称作为第二个参数传入。该名称是 Zend_Form 在内部用来存储元素的名称，也是它知道哪些提交的数据与哪个元素相关的方式。

当您一次添加所有元素时`addElements()`，它将使用数组键（如果非数字）作为名称。所以你的第一个问题是：

```
$elementos['telefone0'] = new Zend_Form_Element_Text('0'); 
```

将 name 存储为`telefone0`，但实际的表单元素使用 name `0`。因此，当提交表单时，它总是验证失败，因为 Zend_Form 期望数据位于`$_POST['telefone0']`.

你的第二个问题要简单得多。表单元素名称需要用作 PHP 变量，因此您不能使用数字名称（例如电话字段的 0 和 1）。

在上面的工作代码中，所需要的只是更改两个电话元素的名称以匹配 in 的键`$elemntos`，从而解决了这两个问题。

# android - Android滚动选择菜单

> ID：11276617
> 
> 赞同：0
> 
> 时间：2012-06-30T18:31:46.490
> 
> 标签：android, scrollview

我在 graphicsriver 的 UI 设计中看到了这一点（[原始链接](http://graphicriver.net/item/tabletphone-user-interface-professional-set/96335?ref=cazoobi)）

![在此处输入图像描述](../Images/968cea427bd325224669ef2cd482b915.png)

我想知道这是否可以在android中制作，有没有人遇到过这样的事情？它会是一个背景与选择同步移动的滚动视图吗？

让我知道你们认为这是怎么做到的？

# android - 设备在播放什么吗？

> ID：11276620
> 
> 赞同：2
> 
> 时间：2012-06-30T18:32:32.723
> 
> 标签：android, android-audiomanager

有没有办法知道电话是否在播放任何东西？例如铃声。

我的手机无法正常工作，有时我接到一个没有铃声的电话。我的意思是，我可以看到来电屏幕，但没有听到任何声音（当然不是静音）。它有时会发生。

所以我编写了一些东西来检测来电（接收器）并播放默认铃声。当我的手机出现故障时它工作得很好，因为我通过再次播放来强制它。

当我的手机工作时，问题就来了！因为在这种情况下，您可以同时听到两者（电话和我的）并且听起来很糟糕！

所以我需要做这两件事中的一件事：

- 要么检测到手机运行良好（它正在响铃），所以我不必玩任何东西。- 或停止任何当前的铃声（如果有）并始终自己播放。

有什么帮助吗？

PS：我尝试了 isMusicActive() 并且它不适用于振铃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:56:54.700

[这个页面](http://developer.android.com/training/managing-audio/audio-focus.html)很好地描述了如何管理音频焦点。您可以实施`onAudioFocusedChangedListener`以不断更新正在播放的内容。

`isMusicActive()`正如@raghav 指出的那样，即使是这种方法也可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:49:10.147

您可以尝试在[AudioManager中使用](http://developer.android.com/reference/android/media/AudioManager.html)[isMusicActive()](http://developer.android.com/reference/android/media/AudioManager.html#isMusicActive%28%29)方法。我很确定它会在整个系统范围内工作，但如果你尝试过但没有成功，请在此处发帖。

# javascript - 将值从 python 脚本“传递”到 javascript（本地）

> ID：11276621
> 
> 赞同：1
> 
> 时间：2012-06-30T18:32:42.880
> 
> 标签：javascript, python, xml

我正在尝试创建/改进显微镜载物台跟踪系统。到目前为止，我已经编写了一个 python 代码（基于一个旧的 matlab 代码），它从网络摄像头获取输入并使用它来计算相机的位置（以及舞台）。我现在需要研究如何将数据（x 和 y 位置）“传递”到 xml 文件（充当用户界面），其中可以保存某些位置等。

目前python脚本不断更新一个文本文件，然后由xml文件不断读取，但我想知道是否有更好的解决方案。有人建议我创建一个简单的本地“网络服务器”来托管数据，但我只能找到有关如何托管文件的信息，这似乎违背了目的......

有没有更简单的方法来做到这一点？我已经使用了相当多的 python（主要用于 numpy 和 scipy 包），但对 web 服务器或 xml 几乎没有经验......

谢谢

编辑：我认为这是相关部分？

```
function getStagePos(xId,yId){
    stagePosStr=getFromServer("file:///c:/stagePos.txt");
    if(stagePosStr.substr(0,1)!="!"){
        data=stagePosStr.split(",");
        document.getElementById(xId).value=data[1];
        document.getElementById(yId).value=data[2];
        process();
    }else{
        warningNode.innerHTML="Stage Position too inaccurate";
        window.setTimeout('warningNode.innerHTML=""',1000);
    } 
```

edit2：抱歉不清楚，这是 xml 文件（用 javascript 编写？）的“功能”，（我认为）正在从 stagepos.txt 文件的两个字段中读取。目前，这个 txt 文件正在由我使用 python 重写（和改进）的 matlab 脚本更新。我想问的是，是否有一种方法可以更新打开 xml 文件时出现的两个字段（用于将它们保存为某些值以在舞台上“标记”位置），而无需先将它们保存到文本文件？

编辑3：回复：将标签从python更改为javascript：我发布的代码来自xml文件（没有意识到它是javascript ..），但我的问题与一个python脚本有关，它生成两个不断更新（以30fps）的字段以及如何将它们“输出”到此文件

# perl - 无法连接 WWW::Mechanize::Firefox

> ID：11276624
> 
> 赞同：-1
> 
> 时间：2012-06-30T18:33:47.757
> 
> 标签：perl, www-mechanize

> **可能重复：**
> [无法创建 WWW:Mechanize::Firefox 的实例](https://stackoverflow.com/questions/7417904/cant-create-an-instance-of-wwwmechanizefirefox)

我有以下代码，取自[WWW::Mechanize::Firefox](https://metacpan.org/module/WWW::Mechanize::Firefox)的文档。

```
#!/usr/bin/perl

use WWW::Mechanize::Firefox;
my $mech = WWW::Mechanize::Firefox->new();
$mech->get('http://google.com');

$mech->eval_in_page('alert("Hello Firefox")');
my $png = $mech->content_as_png(); 
```

我收到此错误消息：

```
Failed to connect to , problem connecting to "localhost", port 4242: No connection could be made because the target machine actively refused it. at C:/strawberry/perl/site/lib/MozRepl/Client.pm line 144 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T09:50:47.673

注意：如果您想要嵌入网页中的图片，则应建立图片的 URL 并直接下载。该`content_as_png`方法将返回 Firefox 窗口的屏幕截图。

绝对确定它`MozRepl`已在您的机器上的 Firefox 上启动并运行。通过转到`Tools/MozRepl`Firefox 来检查这一点，并确保第一个选项是 now `Stop`。

一旦你知道`MozReply`正在运行，打开一个命令窗口并输入

```
telnet 127.0.0.1 4242 
```

当 MozRepl 应该回复类似

```
Welcome to MozRepl. 
```

和几行建议。（如果您在 Windows 系统上运行，则可以通过按 Windows 键并输入来打开命令提示符窗口`cmd`。）

然后你终于可以确定你的连接是通过输入

```
repl.whereAmI() 
```

（注意大小写）。并`MozRepl`会回应

```
[object ChromeWindow] - Document title: "perl - WWW::Mechanize::Firefox doesn't want to work properly - Stack Overflow - Mozilla Firefox" 
```

或类似的。

如果这些步骤中的任何一个都不起作用，那么请带着您的发现返回这里。

# vb.net - 删除菜单项结果索引错误（“找不到源”）

> ID：11276626
> 
> 赞同：0
> 
> 时间：2012-06-30T18:34:09.370
> 
> 标签：vb.net, menu

在 VB.Net 2010 中，每当我删除 Windows 窗体（Mainmenu1 对象）上的菜单项时，都会在运行时引发异常，提示缺少索引值——本质上是“找不到源”错误。我是否需要在设计时进入表单底部的 Mainmenu1 对象并执行某些操作？（顺便说一句，我也试过删除菜单项的源代码，然后是菜单项，仍然抛出异常）。

基本上，正在发生的事情不允许我简单地删除一个菜单项，然后再成功运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:51:51.583

我有这个问题。简单的解决方法是通过单击撤消来恢复菜单。然后运行代码以确保它仍然有效。完成此操作后，关闭视觉工作室。然后打开 VS 并加载你的项目。从菜单中删除项目并运行项目。一切都应该没问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:51:01.693

**我认为您需要指定是在运行时**还是在**设计时**尝试删除菜单或菜单项。

您说，在运行时抛出一个异常，表明缺少索引值。我认为这可能取决于您如何删除菜单项。你没有提到你是如何删除菜单项的。通常，当您在设计时从菜单中选择一个菜单项并按 Delete 键时，它就会消失。而且，该程序仍然可以正常工作。

而且，另一种可能性是您的表单窗口设计器和后台设计器代码未正确同步。您可能知道，每个 .NET 表单对象都有其后台设计器代码，该代码用作表单上所有内容的架构。当您在表单上添加按钮时，Visual Studio 在设计器代码文件中添加一行代码（通常如果您的表单名称是**form1**，设计器代码文件是**form1.designer.vb**或**cs**或其他）。当您更改按钮的背景颜色时，设计器代码文件添加一行代码来设置按钮的背景颜色。

因此，您会看到，在您的情况下，当您删除菜单项时，您的设计器代码文件可能没有成功删除与该菜单项相关的代码。因此，它在运行时引发异常。
可能是因为您安装了 Visual Studio。

所以，我的建议是，您应该尝试通过使用 F6 或 F11 运行项目来逐行调试项目（抱歉，我不记得确切的键，但您可以在“调试”菜单中找到它）。

我希望我对你的问题有很好的理解！

# c# - 评论没有得到更新 + asp .net mvc + 存储库模式

> ID：11276633
> 
> 赞同：0
> 
> 时间：2012-06-30T18:34:58.543
> 
> 标签：c#, asp.net-mvc-3, repository-pattern

我正在尝试使用 asp .net mvc 构建博客应用程序。该博客运行良好，但我并不厌倦介绍存储库模式。我从下面的代码开始 - 即我可以添加博客、评论和编辑/删除它们。但是，我稍微更改了代码，一切都失败了。我不明白出了什么问题。

我从这段代码开始，它有效：

博客存储库：

```
public interface IBlogRepository
{
    IQueryable<Blog> FindAllBlogs();
    Blog GetBlog(int id);
    void Add(Blog blog);
    void Update(Blog blog);
    void Delete(Blog blog);

    void Add(Comment comment);
    //void Remove(Comment comment);
} 
```

博客存储库：

```
public class BlogRepository : IBlogRepository
    {
     ....
     public void Add(Blog blog)
        {
            db.Blogs.Add(blog);
            db.SaveChanges();
        }
     ....
} 
```

博客控制器：

```
 IBlogRepository blogrepository;

    public BlogController()
    {
        blogrepository = new BlogRepository();
    }

     .....
    public ActionResult Create(Blog blog)
    {
        if (ModelState.IsValid)
        {
            blog.Content = Regex.Replace(blog.Content, " {2,}", x => x.Value.Replace(" ", "&nbsp;"));
            blog.Content = blog.Content.Replace("\n", "<br/>");
            blogrepository.Add(blog);
            return RedirectToAction("Index");  
        }

        return View(blog);
    }
    .....
   } 
```

更改和不起作用的代码是：

博客存储库：

```
public interface IBlogRepository
{
    IQueryable<Blog> FindAllBlogs();
    Blog GetBlog(int id);
    T Update<T>(T entity) where T : class;
    T Add<T>(T entity) where T : class;
    T Delete<T>(T entity) where T : class;
} 
```

博客存储库：

```
public class BlogRepository : BlogDb, IBlogRepository {
...
        T INPLHBlogRepository.Add<T>(T entity)
        {
            return Set<T>().Add(entity);
        }
...
} 
```

我打破了什么？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T22:12:42.153

So you have switched to an explicit interface implementation of the add method. It looks like you have a typo.

With explicit implementation.

```
public class BlogRepository : BlogDb, IBlogRepository {
...
        T IBlogRepository.Add<T>(T entity)
        {
            return Set<T>().Add(entity);
        }
...
} 
```

And without

```
public class BlogRepository : BlogDb, IBlogRepository {
...
        public T Add<T>(T entity)
        {
            return Set<T>().Add(entity);
        }
...
} 
```

# java - 用于检索不同类型列表的单个托管 Bean

> ID：11276636
> 
> 赞同：2
> 
> 时间：2012-06-30T18:35:46.320
> 
> 标签：java, jsf, managed-bean

如果我使用单个 ManagedBean 来检索多种列表，是否有任何问题。A `List`of `Integer`(s), `String`(s) 列表或 (s) 列表，`Object`取决于上下文。我不需要同时/同一个请求检索各种列表，所以我将每个检索到的列表放到 managedbean 实例的同一个字段中。

我的bean代码如下： -

```
@ManagedBean(name="listRetriever")
@RequestScoped
public class ListRetriever {

    private int requestedId;
    private Iterable list;

    public void retrieveIntegersList(){
         ...
         ...
         list = ..;  
    }

    public void retrieveStringsList(){
         ...
         ...
         list = ..;  
    } 
```

虽然这很完美，并且在 EL 中我能够获取与列表中相应对象相关的属性和方法，但我只是想知道这是否有任何问题？

# php - 我开始下载，未知大小

> ID：11276637
> 
> 赞同：2
> 
> 时间：2012-06-30T18:35:52.790
> 
> 标签：php, file, download

我使用 PHP 和以下代码开始下载：

```
<?
$_REQUEST['file'] = urldecode($_GET['file']);

header("Content-type: application/x-file-to-save");
header("Content-Disposition: attachment; filename=".$_REQUEST['file']);
readfile($_REQUEST['file']);
?> 
```

它可以工作，但下载的大小未知且没有 ETA ......

我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T18:36:36.323

```
header("Content-length: ". filesize($_REQUEST['file'])); 
```

# javascript - jquery - 使用 .closest()

> ID：11276638
> 
> 赞同：0
> 
> 时间：2012-06-30T18:36:06.013
> 
> 标签：javascript, jquery

我坚持使用 jQuery，我需要使用最接近的方法来获取所需元素的 .text() 。

这是HTML：

```
<div class="endorse-set">
<div class="endorse">
<span class="keyword" id="keyword-1">web developer</span>
<textarea class="comment" id="comment-1"></textarea>
<input type="button" class="endorse-button" id="endorse-button-1" value="Endorse">
</div>​​​​​​​​​​​​​​​​​​​​​​
<div class="endorse">
<span class="keyword" id="keyword-2">web designer</span>
<textarea class="comment" id="comment-2"></textarea>
<input type="button" class="endorse-button" id="endorse-button-2" value="Endorse">
</div>​​​​​​​​​​​​​​​​​​​​​​
<div class="endorse">
<span class="keyword" id="keyword-3">Entrepreneur</span>
<textarea class="comment" id="comment-3"></textarea>
<input type="button" class="endorse-button" id="endorse-button-3" value="Endorse">
</div>​​​​​​​​​​​​​​​​​​​​​​
</div> 
```

当用户点击时，我需要获取`.text()`ie**网页设计师或网页开发人员或企业家**以及价值`.comment``.endorse-button`

我试过这样但失败了：

```
$(".endorse-button").click(function(){        
        var keyword = $(this).closest('span.keyword').text();
        var comment = $(this).closest('textarea.comment').val();
        alert(keyword);
        alert(comment);
}); 
```

我什么也得不到。你可以帮帮我吗？

PS我是jQuery的新手！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T18:37:28.527

该`closest`方法查看*祖先*元素（例如，父元素`div.endorse`和该元素的父元素等）。有问题的元素是*兄弟姐妹*，因此您可以使用以下[`siblings`](http://api.jquery.com/siblings/)方法：

```
$(".endorse-button").click(function(){        
    var keyword = $(this).siblings('span.keyword').text();
    var comment = $(this).siblings('textarea.comment').val();
    alert(keyword);
    alert(comment);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:42:35.760

这就是我`.closest()`在这种情况下的使用方式：

```
$('.endorse-button').click(function(){
    var endorse = $(this).closest('.endorse'),
        keyword = endorse.find('span.keyword').text(),
        comment = endorse.find('textarea.comment').val();
    alert(keyword);
    alert(comment);
}); 
```

# ruby-on-rails - Rails：列的数据太长

> ID：11276641
> 
> 赞同：2
> 
> 时间：2012-06-30T18:36:18.167
> 
> 标签：ruby-on-rails, ruby, activerecord

我在字符串字段（VARCHAR（255））中输入了 5kb 文本并收到此错误：

```
Mysql2::Error: Data too long for column 'title' at row 1: INSERT INTO `posts`.... 
```

解决此问题的最佳方法是什么？
我应该在模型的 before_save 中将此文本剪切为 255 吗？
或者在控制器中修复 params[:that_field] ？
还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-30T18:42:47.587

解决方案取决于您想要实现的目标。这一切都与用户体验有关。

如果您希望用户能够为此字段输入超过 255 个字符的数据，则将该字段从 更改`:string`为`:text`。

如果您不希望数据长度超过 255，那么您有两种选择。如果您希望能够向用户提供验证消息，请向您的模型添加[验证。](http://ar.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#M000084)`Post`

```
class Model < ...
  validates_length_of :title, :maximum => 255
end 
```

第三个选项，如果您不介意消息，请使用回调（例如 a `:before_save`）在将值写入数据库之前对其进行修剪。如果您希望字符串在设置后立即被截断，您也可以覆盖属性的默认设置器。

# android - ImageView 变量即使在定义后也返回 null；安卓

> ID：11276649
> 
> 赞同：0
> 
> 时间：2012-06-30T18:37:05.390
> 
> 标签：android

在我的程序中，我试图使用 ImageView 显示来自文件的图像。我已声明 ImageView 与 ImageView XML 文件相关，并将值设置为使用 BitmapFactory 的文件中的图像。毕竟，我仍然收到 NullPointerException，因为 ImageView 变量显然仍然为空。如果您有任何想法或建议，请告诉我，谢谢！

这是我正在谈论的代码：

```
public void imageViewMethod(String file){
    Logger log = Logger.getLogger("com.example.myclass");

    try {

    File fileName = new File(root, file);
    if(fileName.exists()){
    String dirFileName = fileName.toString();
    Toast.makeText(getApplicationContext(), dirFileName, Toast.LENGTH_LONG).show();
    ImageView iv = (ImageView)findViewById(R.id.image);

    iv.setImageBitmap(BitmapFactory.decodeFile(dirFileName));
    super.setContentView(iv);
    }
    }catch(Exception e){
        Toast.makeText(getApplicationContext(), "Hit Exception", Toast.LENGTH_LONG).show();
        log.log(Level.SEVERE, "uncaught exception", e);
    }
} 
```

以及对应的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/image"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 

android:layout_margin="5dp">
</ImageView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:41:52.997

您是否正确设置了`contentView()`? 看来你用`super.setContentView(iv);`错地方了。`setContentView(R.layout.imageviewLayout.xml)`在`onCreate()`活动类中使用。

检查活动类中是否有以下代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.imageviewLayout.xml); 
```

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:42:18.883

看起来你没有在 oncreate 中设置 ContentView 你必须在获取 ImageView 之前设置 ContentView

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.correspondingXML); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T18:42:56.930

在设置 contentview 之前，您无法获取 imageview。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T18:48:42.490

如果您想在 Activity 运行时更改布局，请尝试使用 LayoutInflater：

```
LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View view = inflater.inflate(R.layout.image_layout, null);
setContentView(view); 
```

现在`findViewById(R.id.image)`可以工作了。

# python - 在ios中运行一个简单的python脚本

> ID：11276656
> 
> 赞同：2
> 
> 时间：2012-06-30T18:37:37.917
> 
> 标签：python, xcode, methods

我想在 ios 上运行一个 python 脚本。我不想只用 Python 编写整个应用程序的一小部分。

我试图理解 PyObjC，但这并不容易。

请给我一个例子好吗？我想将以下方法的结果保存在`NSString`变量中。

```
def doSomething():
   someInfos = "test"
   return someInfos 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T20:37:24.157

下面是调用定义在`myModule`. 等效的python将是：

```
import myModule
pValue = myModule.doSomething()
print pValue 
```

在 Objective-c 中：

```
#include <Python.h>

- (void)example {

    PyObject *pName, *pModule, *pDict, *pFunc, *pArgs, *pValue;
    NSString *nsString;

    // Initialize the Python Interpreter
    Py_Initialize();

    // Build the name object
    pName = PyString_FromString("myModule");

    // Load the module object
    pModule = PyImport_Import(pName);

    // pDict is a borrowed reference 
    pDict = PyModule_GetDict(pModule);

    // pFunc is also a borrowed reference 
    pFunc = PyDict_GetItemString(pDict, "doSomething");

    if (PyCallable_Check(pFunc)) {
        pValue = PyObject_CallObject(pFunc, NULL);
        if (pValue != NULL) {
            if (PyObject_IsInstance(pValue, (PyObject *)&PyUnicode_Type)) {
                    nsString = [NSString stringWithCharacters:((PyUnicodeObject *)pValue)->str length:((PyUnicodeObject *) pValue)->length];
            } else if (PyObject_IsInstance(pValue, (PyObject *)&PyBytes_Type)) {
                    nsString = [NSString stringWithUTF8String:((PyBytesObject *)pValue)->ob_sval];
            } else {
                    /* Handle a return value that is neither a PyUnicode_Type nor a PyBytes_Type */
            }
            Py_XDECREF(pValue);
        } else {
            PyErr_Print();
        }
    } else {
        PyErr_Print();
    }

    // Clean up
    Py_XDECREF(pModule);
    Py_XDECREF(pName);

    // Finish the Python Interpreter
    Py_Finalize();

    NSLog(@"%@", nsString);
} 
```

有关更多文档，请查看：[扩展和嵌入 Python 解释器](http://docs.python.org/extending/)

# jquery - 在 div MouseOver 上的多个 div 中选择 img

> ID：11276659
> 
> 赞同：0
> 
> 时间：2012-06-30T18:37:51.987
> 
> 标签：jquery

我有许多`<div>`彼此分开的标签。他们都有这样的布局：

```
<div class="swatchimgouter">
    <div class="swatchimginner">
        <img src="myimage.jpg" alt="Green"/>
    </div>
</div>

<div class="swatchimgouter">
    <div class="swatchimginner">
        <img src="myimage.jpg" alt="Black"/>
    </div>
</div>

<div class="swatchimgouter">
    <div class="swatchimginner">
        <img src="myimage.jpg" alt="Red"/>
    </div>
</div>

<div class="swatchimgouter">
    <div class="swatchimginner">
        <img src="myimage.jpg" alt="White"/>
    </div>
</div> 
```

我想获取div 悬停时的`"alt"`属性。悬停时此事件触发良好：`<img>``swatchimgouter`

```
$("#variations div.swatchimgouter").mouseover(function () {

} 
```

我尝试了许多选择器的组合，但没有一个可以让我访问`<img>`属性。由于这些`div`标签中有许多带有 swatchimgouter 类，而我想要的是触发上述鼠标悬停事件的标签，我是否使用`this`某种方式来获取 img？就像是：

```
var previewColor = $('div.swatchimginner img', this).attr('alt'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:42:31.297

试试这个，

**[现场演示](http://jsfiddle.net/rajaadil/KKz2k/3/)**

```
$("#variations div.swatchimgouter").mouseover(function () {

    var previewColor = $('img', this).attr('alt');    

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T19:12:10.043

我不确定您尝试了什么，但您的示例或多或少对我有用：

```
$("#variations div.swatchimgouter").mouseover(function () {
    var previewColor = $('img', this).attr('alt');
    alert(previewColor);
}); 
```

演示：http: [//jsfiddle.net/JtQfh/](http://jsfiddle.net/JtQfh/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T18:43:24.127

```
var myAlt = $('img').attr("alt"); 
```

或者，如果您有很多图像：

```
var myAlt = $('div.swatchimginner img').attr("alt"); 
```

最快的方法是为您的 img 元素提供一个 id，然后通过它进行选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T19:43:37.600

```
$(document).ready(function () {
        $('#h').mouseover(function() { 
        var s = $('#in img').attr('alt');
        alert(s);
    });
    }); 
```

# javascript - 使用 JavaScript 比较运算符与当前时间

> ID：11276661
> 
> 赞同：0
> 
> 时间：2012-06-30T18:37:54.063
> 
> 标签：javascript, html

例如，我正在制作一个 HTML 表格，该表格应该根据使用 JavaScript 的时间隐藏某些部分；

> 6:30
> 6:45
> 7:05
> 
> 当前时间等于或大于 6:30 时，第一个单元格应隐藏。

我开始的方式是；

> var now = new Date(); // 创建日期对象
> var h = now.getHours(); // 获取当前小时
> var m = now.getMinutes(); //获取当前分钟

然后再后来；

> if (h>=6 && m>=30) {
> $('table#truetable tr:first').hide();
> }

这不起作用（我认为问题出在最后一部分），因为它不会隐藏这个（第一个）单元格，比如说 7:25，因为分钟数不大于 30，这意味着这种方式不会在许多其他情况下不起作用。

我可以解决这个问题吗？我需要用另一种方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:42:03.843

按分钟比较：

```
if( h*60+m/*h:m*/ >= 6*60+30/*6:30*/ ){
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:47:54.633

最简单的方法是分别在 6 点钟的时候处理这​​种情况：

```
if (h > 6 || (h == 6 && m >= 30)) {
  // Modify DOM
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T18:50:33.060

我编写了一个函数来将`hh:mm`or`hh:mm:ss`格式的时间转换为秒。你可以在下面找到它：

```
function hourConvert(str) {
    //this separates the string into an array with two parts, 
    //the first part is the hours, the second the minutes
    //possibly the third part is the seconds
    str = str.split(":"); 

    //multiply the hours and minutes respectively with 3600 and 60
    seconds = str[0] * 3600 + str[1] * 60;

    //if the there were seconds present, also add them in
    if (str.length == 3) seconds = seconds + str[2];

    return seconds;
} 
```

现在可以很容易地相互比较时间：

```
if (hourConvert(str) > hourConvert("6:30")) //Do Stuff 
```

在行动中看到它：http: [//jsfiddle.net/TsEdv/1/](http://jsfiddle.net/TsEdv/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T18:53:36.927

```
var t = new Date()
undefined
t.getHours()
20
t.getHours()>=6
true
h = t.getMinutes()
51
t>=30
true 
```

这确实有效。您的问题是您正在检查时间和分钟，这意味着如果分钟小于 30，它将返回 false。

您的 if 转换为：

```
any hour bigger than six whose minutes are also bigger than 30 
```

你的 if 条件应该是：

```
if(h>=6 && m>=30 || h>=7) 
```

或只有数字

```
if(h*60+m>= 390) 
```

# python - appengine 创建一个新用户

> ID：11276663
> 
> 赞同：-1
> 
> 时间：2012-06-30T18:37:59.990
> 
> 标签：python, google-app-engine

我有这个基本的用户模型：

```
class Song(db.Model):
    title = db.StringProperty()
    lyrics = db.TextProperty()
    singer = db.StringProperty()

class UserProfile(db.Model):
    user = db.UserProperty()
    song = db.ReferenceProperty(Song) 
```

google appengine api 为我提供了当前用户：

```
user = users.get_current_user() 
```

登录/注销 url 可以使用：

```
users.create_login_url("/")) 
```

我如何确定用户是否已注册到我的应用程序，如果他已注册则获取与他对应的数据，如果他未注册则创建一个新的用户对象。这将为他提供创建/编辑歌曲的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T21:02:00.130

```
user = users.get_current_user()
if user:
  # user is logged in, see if a profile exists ...
  profile = UserProfile.gql('WHERE user = :1', user).get()
  if not profile:
    # no profile exists - create it
    profile = UserProfile(user=user)
    profile.put()
  # do something with profile
else:
  # rediect to login
  self.redirect(users.create_login_url("/"))) 
```

# math - 程序员理解数学学术著作

> ID：11276664
> 
> 赞同：2
> 
> 时间：2012-06-30T18:38:13.500
> 
> 标签：math

我想知道我应该按什么顺序学习不同的数学领域，这样我就可以对所有理论有一个全面的了解，以防我需要一些东西来解决计算机编程问题。

所以我创建了这个思维导图

![在此处输入图像描述](../Images/97ae0e08e842f380c4d0e40b32b9d690.png)

我不打算知道所有关于如何做某件事的小细节（例如“gauss-jordan reduction”），我宁愿看一个例子，然后用像sage-maths或mathematica这样的数学软件来做。

例如，我想知道如何得到一个泰勒级数，给定分析函数（我已经知道了，我只是在说明我期望的那种知识深度）。

所以我所有人，**我希望能够阅读有关数学的学术文章，**这些文章适用于计算机科学/编程，并从这些文章中真正理解一些东西，**这样我就可以利用这些知识来解决实际的编程问题**。

悬而未决的问题是：

1.  (a) 你建议按照什么顺序来学习这些领域，在哪些方面我应该更加坚持？

    (b) 你在思维导图中看到任何缺失的地方吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T19:20:24.077

几年前，我在数据结构和算法课上被推荐[了这本书。](http://www.cs.princeton.edu/courses/archive/spr10/cos433/mathcs.pdf)它涵盖了很多相关领域（概率、图表、计数、关系等），而且是免费的！:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T19:58:47.020

如果你想认真一点，你应该在大学攻读计算机科学研究生水平的课程。没有替代品。

你*必须*了解基本的集合论、大 O、基本的数据结构、基本的实分析。我建议看看 Cormen 等人。“算法简介”和/或 Manber 的“算法简介：一种创造性的方法”。对于数论，请查看[Victor Shoup 的书](http://www.shoup.net/ntb/)- 包含太多内容，但在任何级别都可以阅读。

我建议在您知道自己需要它们之前，不要理会这些主题，例如：复分析、泛函分析、射影/反演几何、控制理论、数学物理学。

与其让你的图表越来越大，不如让它尽可能小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T18:45:53.983

有一本好书，我认为它可以帮助您从计算机科学研究论文和论文中获得更多收益。它被称为“*具体数学：计算机科学的基础*”，可在亚马逊上找到：

[http://www.amazon.com/Concrete-Mathematics-Foundation-Computer-Science/dp/0201558025/ref=sr_1_1?s=books&ie=UTF8&qid=1341081763&sr=1-1&keywords=math+computer+science](https://rads.stackoverflow.com/amzn/click/com/0201558025)

我认为这会有所帮助，因为它们都是相关的，并且它的整合将有助于加快学习过程。

即使您没有任何钱，也只需谷歌它并查看索引以了解您可能想学习的领域。

还有[一本更有趣的书](https://rads.stackoverflow.com/amzn/click/com/3642096816)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T18:53:24.623

这几乎是不可能回答的，因为许多编程任务根本不需要数学知识（除了计数和基本逻辑）。如果您对某个领域有特定兴趣（例如数值线性代数或统计学），请从那里开始。我仍然建议的是很好地掌握有限精度算术的工作原理。也许阅读有关数值分析的介绍性文本，因为这将很好地理解什么是数值稳定性。一本关于算法分析（关于速度和效率）的好书不会有任何害处，如果您打算进行任何类型的数学编程，那么获得线性代数的全面知识是一个非常好的主意。应用数学中的几乎所有内容都归结为最终求解线性方程组（或迭代求解）。

老实说，没有正确的答案。

# java - Mac OS 打不开 TopCoder Arena 打开

> ID：11276668
> 
> 赞同：13
> 
> 时间：2012-06-30T18:38:45.313
> 
> 标签：java, macos, exception

我正在使用最新版本的 Java 运行 Mac OX 10.7.4。我想访问 TopCoder 的 Competition Arena，所以我下载了 .jnlp 并尝试打开它。但是，我不断收到一条错误消息，指出该应用程序未签名。我附上了错误的屏幕截图及其详细信息。有谁知道如何解决这一问题？

![在此处输入图像描述](../Images/2f43b98278e852afcbc663c5021c37f2.png) ![在此处输入图像描述](../Images/d55afd09d3ce5cb906e1b190d203be70.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-02T03:05:25.983

我在那里运行`javaws -viewer`并删除了所有 TC 实例。之后运行 jnlp 就可以了。

`jthread`TopCoder[在这里](http://apps.topcoder.com/forums/?module=Thread&threadID=752539&start=0&mc=3#1563630)建议了该修复程序

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-29T03:39:06.680

通过终端：

```
javaws ContestAppletProd.jnlp 
```

但是，您的安全设置可能会警告您：

> 无法下载此应用程序，因为 Java 已通过 Web 禁用。您可以使用 Java 控制面板在此系统上启用 Java。

因此，您可能必须通过终端：

```
sudo javaws ContestAppletProd.jnlp 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-11T12:25:06.980

脚步：

*   在终端：`javaws -viewer`
*   Java 控制面板 -> 安全 -> 编辑站点列表 -> 添加：`http://www.topcoder.com`和`https://www.topcoder.com`-> 保存。
*   再次启动 Topcoder Arena 小程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-06T22:21:01.050

我尝试了上面列出的修复（通过运行 javaws -viewer 删除实例）。它对我不起作用。起作用的是找到下载的 ContestAppletProd.jnlp 文件并使用以下命令从终端运行它“javaws ContestAppletProd.jnlp”。您想在包含文件 ContestAppletProd.jnlp 的文件夹中运行它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-08T14:50:58.790

我今天遇到了你的问题。上面的答案是对的，但你需要确保你有root
权限。所以，解决方案是

```
sudo javaws ContestAppletProd.jnlp 
```

那真的很管用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-01T19:52:33.420

打开`Java Control Panel`并转到`security`选项卡。首先，将这些站点添加到例外站点列表：

```
http://www.topcoder.com, http://topcoder.com, http://arena.topcoder.com
https://www.topcoder.com, https://topcoder.com, https://arena.topcoder.com 
```

`javaws -viewer`然后通过终端运行命令并删除现有的 TopCoder 实例。运行`sudo javaws ContestAppletProd.jnlp`应该没有任何问题。就我而言，我双击了 ContestAppletProd.jnlp 文件，没有遇到任何问题。

# ios - 使用什么变量名

> ID：11276669
> 
> 赞同：0
> 
> 时间：2012-06-30T18:38:45.330
> 
> 标签：ios, iboutlet

在我的头文件中，我有：

```
IBOutlet UITextField * _userNameOrEmail; 
IBOutlet UITextField * _password; 

@property (retain) IBOutlet UITextField * userNameOrEmail;
@property (retain) IBOutlet UITextField * password; 
```

在我的实现中，我有：

```
@synthesize userNameOrEmail=_userNameOrEmail, password=_password; 
```

当我进入我的 nib 文件时，我可以拖动 UITextField，它为我提供了 _userNameOrEmail 和 userNameOrEmail 的选项

我应该使用哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T18:43:49.787

有了这条线

```
@synthesize userNameOrEmail=_userNameOrEmail 
```

您正在使用支持 iVar _userNameOrEmail 声明属性 userNameOrEmail。你不需要**像**这样做另一个声明：

```
IBOutlet UITextField * _userNameOrEmail; 
IBOutlet UITextField * _password; 
```

您现在可以通过 访问支持 iVar`_userNameOrEmail =`或属性`self.userNameOrEmail =`。我建议您使用该属性，因为如果需要，您可以通过其他类访问该变量，它会为您管理内存，您可以使用点符号....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:42:00.337

当前建议的 Objective-C 2.0 实践是为 ivar 使用与属性相同的名称。您可以选择在`@property`声明中分配不同的 ivar，但默认情况下，属性的合成访问器将访问与属性同名的 ivar，这表明这是他们希望您遵循的模式。

2012-02-16 修订后， Apple 在“ [Coding Guidelines for Cocoa](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingIvarsAndTypes.html#//apple_ref/doc/uid/20001284-BAJGIIJE) ”中明确说明了以 _ 为前缀的实例变量的命名约定，并说明了原因。

> 确保实例变量的名称简洁地描述了存储的属性。通常，您不应直接访问实例变量，而应使用访问器方法（您确实在 init 和 dealloc 方法中直接访问实例变量）。为了帮助表明这一点，请在实例变量名称前加上下划线 (_)，例如 -

# ruby-on-rails - 要设计的 Json 身份验证

> ID：11276672
> 
> 赞同：3
> 
> 时间：2012-06-30T18:38:51.797
> 
> 标签：ruby-on-rails, rest, devise

我正在尝试在我当前的 rails 应用程序上设置基于 json 的身份验证。该应用程序的身份验证当前由设计处理。

我已经阅读了几个关于 stackoverflow 的问题，但我似乎没有让它工作。

**路线.rb：**

```
devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks", :sessions => 'users/sessions' } 
```

**会话控制器：**

```
class Users:: SessionsController < Devise::SessionsController
  def create
    resource = warden.authenticate!(:scope => resource_name, :recall => :failure)
    return sign_in_and_redirect(resource_name, resource)
  end

  def sign_in_and_redirect(resource_or_scope, resource=nil)
    scope = Devise::Mapping.find_scope!(resource_or_scope)
    resource ||= resource_or_scope
    sign_in(scope, resource) unless warden.user(scope) == resource
    return render :json => {:success => true, :redirect => stored_location_for(scope) || after_sign_in_path_for(resource)}
  end

  def failure
    return render:json => {:success => false, :errors => ["Login failed."]}
  end
end 
```

不知道我哪里出错了。我正在打的电话是：

**JSON：**

```
Content-Type: application/json
Accept: application/json
data: {user: {password: mypass, email: some_email@gmail.com}} 
```

**错误：**

```
MultiJson::DecodeError (756: unexpected token at '{user: {password: mypass, email:    some_email@gmail.com}}'):
2012-06-30T18:10:10+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/json-1.6.5/lib/json/common.rb:148:in `parse' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:45:34.250

如果您将该 JSON 粘贴到[http://jsonlint.com](http://jsonlint.com)中，您会得到相同的错误。相反，您应该将值用引号括起来：

```
{
    "user": {
        "password": "mypass",
        "email": "some_email@gmail.com"
    }
} 
```

# python - 格式化时间 Django 模板

> ID：11276678
> 
> 赞同：4
> 
> 时间：2012-06-30T18:40:15.090
> 
> 标签：python, django, timezone, timestamp

我正在从 JSON 中提取一个时间戳，我想将其转换为 EST 并以人类可读的形式格式化。

当我从 JSON 中提取它时，我得到以下文本：“2012-06-30T10:36:06-07:00”

如何将其转换为东海岸时间（+3 小时）并以正确的格式（“6-30-2012 1:36pm”）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T20:07:24.037

您可以使用完全执行此操作的[pyiso8601](http://code.google.com/p/pyiso8601/)包。它接受`tzinfo`您可以使用[pytz](http://pytz.sourceforge.net/)库来获取预定义的时区。[他们有很多例如]

# css - 正确的css div定位？

> ID：11276683
> 
> 赞同：0
> 
> 时间：2012-06-30T18:41:00.880
> 
> 标签：css, css-position

我试过了，但在定位一个高于谷歌地图布局的界面时完全失败了。我试图做的是：

![在此处输入图像描述](../Images/28e25fdd98b800c293d6b504cd4cfafc.png)

[但我最终得到了这个](http://jsfiddle.net/PJTDy/)

我的格式是这样的：

```
<div id="GoogleMap"> // the containing google maps layer
    <!-- map will go here <div id="GoogleMapCanvas"></div> --> //eventual map
    <div class="map-topmenu"></div>   //my interface
    <div class="map-leftmenu"></div>  //my interface
    <div class="map-rightmenu"></div> //my interface
    <div class="map-bottommenu"></div>//my interface
</div> 
```

我成功地使顶部菜单水平居中，距离屏幕顶部 10px。

我无法将左右菜单垂直居中，并且我开始注意到将左侧菜单居中所需的代码变得很奇怪。至于底部菜单，我完全失败了——不管我尝试了多少不同的方法。

谁能看看我的代码，让我知道我在哪里搞砸了？非常感谢！

```
body {
    border: 0 none;
    margin: 0;
    padding: 0;
    height:100%;
}
#GoogleMap {
    position:absolute;
    background-color: grey;
    background-position: 50% 50%;
    background-repeat: repeat;
    height: 100%;
    overflow: hidden;
    width: 100%;
}
.map-topmenu {
    height: 52px;
    width: 353px;
    background-image: url(http://i.imgur.com/KlyKR.png);
    margin-top: 10px;
    margin-right: auto;
    margin-bottom: 0px;
    margin-left: auto;
}
.map-leftmenu {
    height: 263px;
    width: 77px;
    margin-left: 10px;
    top:50%;
    position: absolute;
    margin-top: -150px;
    background-image: url(http://i.imgur.com/Q3d1r.png);
}

.map-rightmenu {
    background-image: url(http://i.imgur.com/si6dl.png);
    height: 147px;
    width: 280px;
    margin-right: 10px;
    float: right;
    top:50%;
}
.map-bottommenu {
    background-image: url(http://i.imgur.com/iDmuP.png);
    height: 52px;
    width: 312px;
    margin-right: auto;
    margin-bottom: 10px;
    bottom: 0;
    margin-left: auto;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:50:06.723

使用带负边距的绝对定位：

[http://jsfiddle.net/PJTDy/3/](http://jsfiddle.net/PJTDy/3/)

```
#GoogleMap {
    position:absolute;
    background-color: grey;
    height: 100%;
    overflow: hidden;
    width: 100%;
}

.map-topmenu, .map-leftmenu, .map-rightmenu, .map-bottommenu {
    z-index:1;
    position:absolute;
    background:blue;
} 
.map-topmenu {
    top:0;
    left:50%;
    margin-left:-176px;
    height: 52px;
    width: 353px;
}
.map-leftmenu {
    height: 263px;
    width: 77px;
    left:0px;
    margin-top:-131px;
    top:50%;
}
.map-rightmenu {
    height: 147px;
    width: 280px;
    right:0;
    top:50%;
    margin-top:-73px;
}
.map-bottommenu {
    height: 52px;
    width: 312px;
    bottom: 0;  
    left:50%;
    margin-left:-156px;   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:52:31.263

绝对定位主容器 div (id="GoogleMap") 的任何原因？您的底部菜单没有设置位置属性，否则您可以将其定位为与底部相同的顶部：0。

# iphone - 在 mainviewcontroller 中加载多个视图控制器

> ID：11276685
> 
> 赞同：0
> 
> 时间：2012-06-30T18:41:32.893
> 
> 标签：iphone

有一个主视图控制器，它作为 uiimageview 和 uitoolbar，当按下 uitoolbar 上的按钮时，它会根据 nstimer 一个接一个地加载多个视图控制器。我想让这个 mainviewcontroller 作为容器一个接一个地加载多个视图控制器，基于 nstimer 和 uitoolbar 总是显示在下面。不想在每个视图控制器中添加工具栏作为子视图。我怎样才能做到这一点。

```
- (void)viewDidLoad{
// Displays UIImageView
UIImageView *myImage = [[UIImageView alloc]
                         initWithImage:[UIImage imageNamed:@"ka1_046.png"]];
myImage.frame = CGRectMake(0, 0, 320, 460);
[self.view addSubview:myImage]; 
// create the UIToolbar at the bottom of the view controller
toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 425, 320, 40)];
toolbar.barStyle = UIBarStyleBlackOpaque;
[self.view addSubview:toolbar];

//Add Play Button
self.playButton = [UIButton buttonWithType:UIButtonTypeCustom];
[self.playButton addTarget:self action:@selector(playpauseAction:) forControlEvents:UIControlEventTouchUpInside];
self.playButton.frame = CGRectMake(0, 0, 30, 30);
[self.playButton setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateNormal];
[self.playButton setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateSelected];
 UIBarButtonItem *play = [[UIBarButtonItem alloc] initWithCustomView:self.playButton];

-(void)playpauseAction:(id)sender {
if([audioPlayer isPlaying])
{
    [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
    [audioPlayer pause];
    [self pauseTimer];
    [self pauseLayer:self.view.layer];

}else{
    [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
    [audioPlayer play];
    [self resumeTimer];
    [self resumeLayer:self.view.layer];
   if(isFirstTime == YES)
    {
        self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                            target:self
                                            selector:@selector(displayviewsAction:)
                                             userInfo:nil
                                             repeats:NO];
        isFirstTime  = NO;
    }} }

  - (void)displayviewsAction:(id)sender{  
     First *first = [[First alloc] init];
     first.view.frame = CGRectMake(0, 0, 320, 480);
     CATransition *transitionAnimation = [CATransition animation];   
     [transitionAnimation setDuration:1];
     [transitionAnimation setType:kCATransitionFade];
     [transitionAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];
     [self.view.layer addAnimation:transitionAnimation forKey:kCATransitionFade];
     [self.view addSubview:first.view];
     [self.view addSubview:toolbar];
     [first release];   
     self.timer = [NSTimer scheduledTimerWithTimeInterval:23 target:self selector:@selector(Second) userInfo:nil repeats:NO];     
     } 
```

以同样的方式，基于 nstimer 一个接一个地加载其他多个视图控制器。那么我怎样才能让这个mainviewcontroller作为容器来加载这些多个视图控制器一个接一个地基于nstimer并且总是在下面有uitoolbar。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T20:03:37.637

如果您想留在主视图控制器中，那么根据定义，您不能推送任何其他视图控制器。你可以做的，只是将所有这些其他的东西创建为 UIView，然后将它们作为子视图添加到你的主 VC 中。这意味着您的所有代码都将在同一个 .m 文件中，但这不应该是一个问题。

# .htaccess - .htaccess 导致 500 Internal Server Error on Not Found

> ID：11276699
> 
> 赞同：1
> 
> 时间：2012-06-30T18:43:00.390
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我正在使用 .htaccess 将 .php 添加到请求的文件中，因此请求“/example”转到“/example.php”

但是，当“/example.php”不存在时，我得到的是内部服务器错误而不是 404。我怎样才能让它与 404 而不是 500 一起工作？

```
RewriteEngine On
RewriteBase /
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^(.+)$ $1.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:46:09.063

您可以尝试更换：

```
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f 
```

和：

```
RewriteCond %{REQUEST_FILENAME}.php -f 
```

因此，只有存在以 php 结尾的文件时才会应用该规则。

# php - php返回最后一行截断（sbstr）

> ID：11276702
> 
> 赞同：1
> 
> 时间：2012-06-30T18:43:21.967
> 
> 标签：php, truncate

我有一个快速的问题。我有代码返回论坛的单独标题的最后一篇文章。我想限制显示的字符数并放置（... ...）。

我的 while 循环中的嵌套 if 语句遇到了困难：

```
 $query  = "SELECT comment FROM Assembly WHERE title = 'Checkered' ORDER BY date DESC LIMIT 1";
$result = mysql_query($query);

while($row = mysql_fetch_assoc($message))
{

 if(strlen($message) > 10)
  {
   echo substr($message, 0, 10)."&#133;";
  }
 else
  {
    echo    "Last Post:<br>";
    echo    strip_tags("{$row['comment']}");

  }
} 
```

提前致谢 ：）

**编辑是 css 文本溢出：省略号；效果很好！！多谢你们

***编辑工作代码以防万一

```
 $query  = "SELECT comment FROM Assembly WHERE title = 'Checkered' ORDER BY date DESC LIMIT 1";
$result = mysql_query($query);

while($row = mysql_fetch_assoc($result))
{

 $comment = strip_tags($row['comment']);
 if(strlen($comment) > 30)
  {
   echo substr($comment, 0, 30)."...";
  }
 else
  {
    echo    "Last Post:<br>";
    echo    $comment;

  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:59:49.623

您的代码存在的问题是您有一些命名错误的变量。您分配`mysql_query()`to返回的结果资源`$result`，然后尝试从名为的变量`$message`中获取一行（您没有显示分配），然后切换到将`$message`其视为字符串，而不是在`$row`.

无论如何，如果您只想从数据库中获取字符串并应用省略号，并且不需要全文，我会让 MySQL 为我完成这项工作：

```
SELECT IF(CHAR_LENGTH(`comment`) > 10, CONCAT(SUBSTRING(`comment`, 1, 10), '...'), `comment`) AS `comment`
FROM `Assembly`
WHERE `title` = 'Checkered'
ORDER BY `date` DESC
LIMIT 1 
```

在 PHP 中：

```
$query  = "
  SELECT IF(CHAR_LENGTH(`comment`) > 10, CONCAT(SUBSTRING(`comment`, 1, 10), '...'), `comment`) AS `comment`
  FROM `Assembly`
  WHERE `title` = 'Checkered'
  ORDER BY `date` DESC
  LIMIT 1
";
$result = mysql_query($query);

while ($row = mysql_fetch_assoc($result)) {
  echo    "Last Post:<br>";
  echo    htmlspecialchars($row['comment']);
} 
```

**编辑**

在@Jared 对显示部分 HTML 标记的损坏字符串的可能性发表评论之后，以下是避免这种情况的方法：

```
$query  = "
  SELECT `comment`
  FROM `Assembly`
  WHERE `title` = 'Checkered'
  ORDER BY `date` DESC
  LIMIT 1
";
$result = mysql_query($query);
// Loop is pointless because of the LIMIT 1
$row = mysql_fetch_assoc($result);

$maxlen = 10; // Max length before trim
$comment = strip_tags($row['comment']);
if (strlen($comment) > $maxlen) {
  $comment = substr($comment, 0, $maxlen).'...';
}
$comment = htmlspecialchars($comment);

echo "Last Post:<br>";
echo $comment; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:55:07.487

你放弃了这个问题，但我会冒险去猜测问题。试试这个：

```
while($row = mysql_fetch_assoc($message))
{

 $comment = strip_tags($row['comment']);
 if(strlen($coment) > 10)
  {
   echo substr($comment, 0, 10)."...";
  }
 else
  {
    echo    "Last Post:<br>";
    echo    $comment;

  }
} 
```

# java - 用户定义的值类在 Java 中是什么样的？

> ID：11276706
> 
> 赞同：8
> 
> 时间：2012-06-30T18:43:46.537
> 
> 标签：java, scala, interop, scala-java-interop, newtype

通过与 Haskell 的比较，我想我了解 Scala 2.10 的新“价值类”功能`newtype`：

```
trait BoundedValue[+This] extends Any { this: This =>

  def upperBound: This

  def lowerBound: This

}

class Probability @throws(classOf[IllegalArgumentException]) (v: Double) extends AnyVal with BoundedValue[Probability] {

  val value: Double = if ((v >= 0.0) && (v <= 1.0)) v else throw new IllegalArgumentException((v.toString) + "is not within the range [0.0, 1.0]")

  override val upperBound: Probability = new Probability(0.0)

  override val lowerBound: Probability = new Probability(1.0)

  // Implement probability arithmetic here;
  // will be represented by Double at runtime.

} 
```

我的问题是，值类如何出现在使用声明它的 Scala 包的 Java 代码中？值类是作为 Java 端的引用类出现的，还是被完全删除（因此作为它包装的类型出现）？换句话说，当 Java 涉及到源代码级别时，值类的类型安全性如何？

* * *

**编辑**

根据 SIP-15 文档（在 Daniel 的回答中链接），上面的代码不会编译，因为值类不允许有任何初始化逻辑，因为要么`v`必须是明确的 val，要么`Probability`必须有一个`unbox`方法和一个相应的`box`它的伴生对象上的方法，并且因为值类必须只有一个字段。正确的代码是：

```
trait BoundedValue[This <: BoundedValue[This]] extends Any { this: This =>

  def upperBound: This

  def lowerBound: This

}

class Probability private[Probability] (value: Double) extends AnyVal with BoundedValue[Probability] {

  @inline override def upperBound: Probability = new Probability(0.0)

  @inline override def lowerBound: Probability = new Probability(1.0)

  @inline def unbox: Double = value

  // Implement probability arithmetic here;
  // will be represented by Double at runtime (mostly).

}

object Probability {

  @throws(classOf[IllegalArgumentException])
  def box(v: Double): Probability = if ((v >= 0.0) && (v <= 1.0)) new Probability(v) else throw new IllegalArgumentException((v.toString) + "is not within the range [0.0, 1.0]")

} 
```

然而，问题本身仍然有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T03:50:01.633

值类编译为普通类，很可能作为引用出现。

它们的神奇之处在于，*当值类没有逃脱作用域*时，它的所有痕迹都会从代码中删除，从而有效地内联所有代码。而且，当然，提供额外的类型安全性。

另见[SIP-15](http://docs.scala-lang.org/sips/pending/value-classes.html)，它解释了机制。

# amazon-s3 - AWS：S3 存储桶的仅附加模式

> ID：11276709
> 
> 赞同：8
> 
> 时间：2012-06-30T18:43:51.860
> 
> 标签：amazon-s3, amazon-web-services

## 语境

我想让一台机器在整点上传一个文件 dump.rdb 到 s3/blahblahblah/YEAR-MONTH-DAY-HOUR.rdb。

因此，我需要这台机器能够将新文件上传到 S3。

但是，我不希望这台机器能够 (1) 删除现有文件或 (2) 覆盖现有文件。

从某种意义上说，它只能“追加”——它只能添加新对象。

## 问题：

有没有办法像这样配置 S3 设置？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-03T08:19:10.173

我还不能发表评论，所以这是对@Viccari 答案的改进......

答案具有误导性，因为它仅针对您的要求中的#1，而不是#2。事实上，尽管您可以启用版本控制，但使用任何一种方法似乎都**无法**防止覆盖现有文件。请参阅此处：[用于只读和一次写入访问的 Amazon S3 ACL](https://stackoverflow.com/questions/10592541/amazon-s3-acl-for-read-only-and-write-once-access/10592928)。

因为您在文件名中添加了时间戳，所以您或多或少地解决了这个问题。（在文件名中对每个文件的“版本”进行编码的其他方案也是如此：时间戳、UUID、哈希。）但是，请注意，您并没有真正受到保护。您的代码中的错误或同一小时内的两次上传会导致文件被覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T03:15:12.970

是的，有可能。
有两种方法可以向存储桶及其内容添加权限：**存储桶策略**和**存储桶 ACL**。您可以通过使用存储桶策略来实现您想要的。另一方面，存储桶 ACL 不允许您在不授予“删除”权限的情况下授予“创建”权限。

**1-Bucket Policies：**
您可以创建存储桶策略（请参阅[此处](http://docs.amazonwebservices.com/AmazonS3/latest/dev/AccessPolicyLanguage_UseCases_s3_a.html)的一些常见示例），例如，允许特定 IP 地址具有特定权限。
例如，您可以允许：`s3:PutObject`和不允许`s3:DeleteObject`。
可以在[此处](http://docs.amazonwebservices.com/AmazonS3/latest/dev/UsingResOpsConditions.html)找到有关存储桶策略中 S3 操作的更多信息。

**2-Bucket ACL：**
使用Bucket ACL，您只能授予完整的“写入”权限，即如果给定用户能够添加文件，他也能够删除文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-22T15:07:56.910

这是不可能的！S3 是一个键/值存储，因此本质上不支持仅附加。S3 的 PUT/cp 命令总是可以覆盖文件。通过在您的存储桶上启用版本控制，您仍然可以安全地防止上传文件的帐户受到威胁。

# c++ - 如何将 Visual-Studio 2010 切换到 c++11

> ID：11276716
> 
> 赞同：5
> 
> 时间：2012-06-30T18:44:59.040
> 
> 标签：c++, visual-studio-2010, c++11

我是 C++ 编程新手，我想尝试 C++11 的新功能。

那么我要问的是如何切换visual-studio 2010才能编译c ++ 11源代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T19:00:54.593

没有开关；VC10（和 VC12）将始终编译符合它们支持的 C++11 部分的代码。这当然不是*全部*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T18:55:21.783

可以参考这张表：[VC10中的C++0x核心语言特性：表](http://blogs.msdn.com/b/vcblog/archive/2010/04/06/c-0x-core-language-features-in-vc10-the-table.aspx)。只需在您的代码中使用它们。

# sql - 选择所有“小于”7 天的记录

> ID：11276717
> 
> 赞同：5
> 
> 时间：2012-06-30T18:45:04.140
> 
> 标签：sql, select, date-range

我想从中选择少于 7 天的所有`[Orders]`记录`[Submissiondate]`。

我完全被难住了。这是我正在执行的查询：

```
SELECT * FROM [Orders] WHERE ([SubmissionDate] < @SubmissionDate) 
```

不工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T22:29:38.587

如果你的意思是你想要带有`SubmissionDate`between`@SubmissionDate`和的行`@SubmissionDate - 7 days`，那么这就是我在 Transact-SQL 中实现它的方式：

```
WHERE [SubmissionDate] BETWEEN DATEADD(DAY, -7, @SubmissionDate)
                           AND @SubmissionDate 
```

请注意，这`BETWEEN`意味着`>=`和`<=`。如果您需要严格的不等式，请将其设置为：

```
WHERE [SubmissionDate] > DATEADD(DAY, -7, @SubmissionDate)
  AND [SubmissionDate] < @SubmissionDate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T11:39:44.543

假设 sql 参数`@SubmissionDate`是现在的日期（和时间）。您可以使用以下查询来返回`[Orders]` **过去 7 天内提交的内容**：

```
SELECT * FROM [Orders] WHERE ([SubmissionDate] >= DATEADD(DD, -7, DATEADD(dd, 0, DATEDIFF(dd, 0, @SubmissionDate)))) 
```

此解决方案的两个重要说明：

1.  时间“部分”正在从@SubmissionDate 中删除。
2.  由于没有“Date To”限制，do**包括**提交的`[Orders]`“today”（直到执行查询的时间）。

以下代码仅用于获取日期时间的日期“部分”（从其他[SO 线程](https://stackoverflow.com/questions/113045/how-to-return-the-date-part-only-from-a-sql-server-datetime-datatype)中提取）。

```
DATEADD(dd, 0, DATEDIFF(dd, 0, @SubmissionDate)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-21T08:25:50.933

尝试这个

> SELECT * FROM [Orders] WHERE [submission_date] < NOW() - 间隔 7 天；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T19:02:51.600

你也可以试试这个[DATEDIFF](http://www.w3schools.com/sql/func_datediff.asp)

```
SELECT * FROM [Orders] WHERE  datediff(d,SubmissionDate,GETDATE()) > 7 
```

其中 GetDate() 是今天的日期，并且`d`是天数的差异

```
select datediff(d,'2012/06/23',GETDATE()) 
```

应该给你 7 因为它是 7 天前

# c - 使用 BigInteger 进行 SPOJ 动态规划 - SETNJA

> ID：11276720
> 
> 赞同：1
> 
> 时间：2012-06-30T18:45:46.793
> 
> 标签：c, dynamic, recursion

我试图解决以下 spoj 问题[http://www.spoj.pl/problems/SETNJA/](http://www.spoj.pl/problems/SETNJA/)

我使用递归实现了它，但限制非常高，不适合 unsigned long long。在论坛上，每个人都在说使用动态编程来实现它。任何人都可以解释如何使用 DP 来做到这一点。这是我使用递归所做的努力。它是正确的，但答案不适合 unsigned long long。任何提示将不胜感激

```
#include<stdio.h>

typedef unsigned long long ULLD;
ULLD ans=0ull;
char str[10001];
int length;
void recurse(int i, ULLD temp)
{
    if(str[i]=='\0')
    {
        ans=ans+temp;
        return;
    }
    if(str[i]=='L') recurse(i+1,2*temp);
    else if(str[i]=='R') recurse(i+1,2*temp+1);
    else if(str[i]=='P') recurse(i+1,temp);
    else if(str[i]=='*')
    {
        recurse(i+1, 2*temp);
        recurse(i+1 , 2*temp +1);
        recurse(i+1, temp);
    }
}

int main()
{   
    scanf("%s",str);
    length=strlen(str);

    recurse(0,1);

    printf("%llu",ans);
    return 0;
} 
```

# android - 如何在android上的JPEG图像上画一个红色圆圈

> ID：11276727
> 
> 赞同：0
> 
> 时间：2012-06-30T18:46:35.807
> 
> 标签：android

我正在尝试在加载到我的应用程序中的 JPEG 图像上绘制圆圈。当用户触摸某个位置时，应在该位置绘制圆圈。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T18:49:55.217

看到这个[链接](https://stackoverflow.com/questions/8919746/draw-circle-where-user-touches-screen)

```
 image.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View arg0, MotionEvent arg1) {
            System.out.println("Touch recieved at "+arg1.getX() + " " + arg1.getY());
            touchX = (arg1.getX());
            touchY = (arg1.getY());

            System.out.println("Touch recieved at "+touchX + " " + touchY);
            image.setImageBitmap(createImage());

            return true;
        }
    });

public Bitmap createImage(){
        Bitmap image = bmp.copy(Bitmap.Config.RGB_565, true);
        Canvas canvas = new Canvas(image);
        Paint paint = new Paint();
        paint.setStyle(Paint.Style.STROKE);
        paint.setColor(Color.GREEN);

         touchX=touchX- image.getWidth() / 2;
         touchY=touchY- image.getHeight() / 2;

        canvas.drawCircle(touchX, touchY, radius, paint);
        System.out.println("Drew a circle at "+touchX+" " + touchY+" with a radius of "+radius+".");
        return image;
    } 
```

# ios - 更改状态栏色调颜色

> ID：11276729
> 
> 赞同：1
> 
> 时间：2012-06-30T18:47:34.227
> 
> 标签：ios, xcode, cocoa-touch

有没有办法设置状态栏的色调？我将导航栏色调设置为棕色，当它在屏幕上时，它也会将状态栏更改为棕色，但是在我隐藏导航栏的视图中，状态栏会返回其原始颜色。如何更改状态栏色调颜色以在应用程序中持续存在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T18:51:12.823

在 iOS 5 中没有办法。你可以改变你的栏样式。

但是如果你看看新的 WWDC 2012 Sessions，你可能会发现一些有趣的东西）

课程编号 216 - iOS 上的高级外观定制

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T18:54:08.703

也许将通知栏保留在那里但将其掩盖？如果通知栏的颜色会影响状态栏的颜色，那么它会让我相信它只需要在窗口中（甚至埋在另一个视图下）就可以改变它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T18:53:26.957

在 iOS 5 或更早版本的 ios 中没有办法。

现在 ios 6 具有更改状态栏色调颜色的功能，否则它将根据导航栏图案图像进行设置

但是你可以使用[自定义状态栏](https://github.com/myell0w/MTStatusBarOverlay)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T00:52:59.397

我在没有导航栏的屏幕中所做的是将导航栏放在顶部但在可见界面的*后面。*导航栏对用户不可见，但对系统可见并导致状态栏采用其颜色。

编辑：对不起，我现在看到其他人已经提出了这个建议。所以我只是确认它确实有效。

# html - 如何在 css3 中使用动画事件

> ID：11276736
> 
> 赞同：0
> 
> 时间：2012-06-30T18:48:59.207
> 
> 标签：html, animation, css

所以我正在尝试学习新的 css3 功能以摆脱 javascript，但我对动画事件“功能”有一些问题。在 w3.org 上，它给出了这样的定义：

```
interface AnimationEvent : Event {
    readonly attribute DOMString          animationName;
    readonly attribute float              elapsedTime;
    void               initAnimationEvent(in DOMString typeArg, 
                                          in boolean canBubbleArg, 
                                          in boolean cancelableArg, 
                                          in DOMString animationNameArg,
                                          in float elapsedTimeArg);
  }; 
```

那么我应该如何在 Firefox 或 chrome 中使用它呢？如果有人知道，请给出一个基本示例，说明我应该在哪里写动画名称，比如在animationName：之后，或者在typerArg之后：我应该把animationstart; 我真的不知道。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T20:25:58.650

[W3 规范](http://www.w3.org/TR/css3-animations/#dom-interfaces)中的接口必须按如下方式实现：

```
e.addEventListener("animationend", listener, false);  
// listener is a function which receives an object implementing the
//  AnimationEvent interface. 
```

这是 DOM 事件。它是 JavaScript。**该接口描述了一个 DOM 事件，而不是 CSS 特性。**

## 使用 CSS 动画

要了解如何使用 CSS3 动画，请阅读[MDN 上的优秀指南](https://developer.mozilla.org/en/CSS/CSS_animations)。
访问[MDN：CSS/Animation](https://developer.mozilla.org/en/CSS/animation)`animation`以获得一个简洁的页面，该页面链接到每个属性的相关文档部分。

演示：我之前创建了一个游泳鱼的简单动画。请参阅[此答案](https://stackoverflow.com/a/10108322/938089?move-multiple-backgrounds-infinitely-using-css) ^(（[演示](http://jsfiddle.net/dghsV/)）)。因为它是一个“实验性功能”，所以您必须向CSS 属性添加*特定于供应商的前缀。*所以，`-webkit-animation-name`而不是`animation-name`.

# ios - 访问情节提要内的视图

> ID：11276738
> 
> 赞同：0
> 
> 时间：2012-06-30T18:49:09.130
> 
> 标签：ios, uiview, uiviewcontroller, storyboard

一个人如何在代码中访问他们从对象浏览器拖到故事板中的另一个视图中的视图？

例如，我创建了一个分配给 ViewController 类的 UIView。然后我将地图视图拖到该视图中。现在我需要开始在代码中操作该地图视图。我如何访问它？我已经尝试过 self.view.subview 之类的东西，但还没有从那里得到任何结果。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T18:53:26.363

您应该使用 outlets，首先选择您的故事板文件，然后转到

```
View->Assistant Editor->Show Assistant Editor 
```

![在此处输入图像描述](../Images/0ac46494f27d5ad2334ac104ad7f8cf4.png)

接下来选择地图视图，按下`control`键盘并拖动到将显示您的 .h 文件的 xcode 右侧部分，将出现以下内容

![在此处输入图像描述](../Images/49a602556ce29038bef81e2ed5e88d68.png)

在其中写入mapView并按Enter，这将创建一个供您使用的出口现在您可以使用mapView访问您的MKMapView

# .htaccess - htaccess 从 www 到非 www

> ID：11276746
> 
> 赞同：0
> 
> 时间：2012-06-30T18:50:44.383
> 
> 标签：.htaccess, web

我有问题。

我有一个 Python(Django) 网站，我想从 url 中删除“www”，所以我有这个 htaccess：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^www.mydomain.com/$ [NC]
RewriteRule ^(/)?(.*) http://mydomain.com/$1 [R=301,L] 
```

它可以工作，但问题是如果我输入像“www.domain.com/admin”或“www.domain.com/something”这样的网址，它会重定向到“domain.com”而不是“domain.com/admin”或“domain.com/something”。

你知道我的 htaccess 有什么问题吗？

非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:53:53.750

更改`^(/)?(.*)`为`^/?(.*)`。您正在捕获它`/`并将其附加到您的 url，而不是您实际想要附加的部分`$1`。

# html - 自动登录网站仅在会话建立时有效

> ID：11276747
> 
> 赞同：0
> 
> 时间：2012-06-30T18:50:45.350
> 
> 标签：html, ajax, session, iframe, https

我正在制作一个自动登录到在线网站的离线网页。该网站使用 ssl ( **https** ) 并使用表单 (发布变量) 登录

我遇到的问题如下：当我首先打开在线登录页面时，该站点只接受我的离线表单。这是因为网站使用打开第一页时进行的（服务器端）**会话。**（会话的目的是检测超时）

当我第一次打开在线网站然后运行我的离线页面时，一切正常。

所以我需要让我的离线网页在自动发布表单之前打开在线网站。

我用**iframe**尝试了这个，但这在 Internet Explorer 中不起作用，因为它是一个 https 网站。（它在 Chrome、firefox、...中工作）

我想知道**Ajax**是否可以在发布我的表单之前发送 https 页面请求。但我猜不是因为它是https。

有没有人知道像浏览器一样发送 https 页面请求的方法，但没有显示它的输出？之后我可以自动提交我的表格。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:47:42.670

Internet Explorer 将来自其他域的 iframe 视为第三方内容，并为它们使用一组单独的安全策略。[安全区域设置](http://windows.microsoft.com/en-US/windows7/Change-Internet-Explorer-9-Security-settings)在`file:///`“本地机器”/“离线”网页和“互联网”/“在线”网页之间也有效。[Cookie 通常会被第三方内容阻止](http://en.wikipedia.org/wiki/HTTP_cookie#Privacy_and_third-party_cookies)（取决于您的设置），这意味着不会保存 Cookie 中设置的唯一会话密钥。如果没有此密钥，您尝试登录的站点将“忘记”您的会话/登录。

[跨域 AJAX 请求也会受到安全区域和跨域策略的影响](https://stackoverflow.com/questions/3362474/jquery-ajax-fails-in-ie-on-cross-domain-calls)，但[IE 版本之间的设置可能会有所不同](http://msdn.microsoft.com/en-us/library/ms537505%28VS.85%29.aspx#xdomain)。

如果您控制目标网页，则可以使用[P3P 策略绕过限制。](http://en.wikipedia.org/wiki/P3P)[Cookie 被阻止/未保存在 Internet Explorer 中的 IFRAME 中](https://stackoverflow.com/questions/389456/cookie-blocked-not-saved-in-iframe-in-internet-explorer)显示了如何。但是，如果您确实拥有该网页，最好启用或[实现您自己的“记住我”功能](https://stackoverflow.com/search?q=remember+me+cookie)。

在您的情况下，根据您是否是唯一使用离线自动登录网页的人，在 Internet Explorer 中允许第三方 cookie 可能会有所帮助。请参阅*选项 > 隐私 > 允许所有 cookie*（或类似的）。不过，这将允许其他人（主要是广告公司）在整个互联网上跟踪您。

如果您的自动登录页面的目的是*测试*，而不是实际使用浏览器作为人类，也许您可[​​以自动登录和测试](https://stackoverflow.com/questions/11127510/how-can-i-simulate-a-visit-to-a-url/11127553#11127553)？

# nginx - 如何将两个不同的 gdb 命令“info symbol”和“ptype”组合成一个？

> ID：11276749
> 
> 赞同：0
> 
> 时间：2012-06-30T18:50:58.940
> 
> 标签：nginx, gdb, symbols

换句话说，有没有一个命令可以在一个地址找到符号，同时使用 ptype 显示这个符号的详细信息？或者如果没有，我怎么写一个用户定义的命令来满足这个需求？</p>

例如，现在我可以先使用“info symbol”命令在地址中获取数据结构的名称（ngx_errlog_module_ctx），而不是像这样使用ptype显示数据结构的详细信息：</p>

```
(gdb) info symbol 0x80b4568
ngx_errlog_module_ctx in section .data of /usr/local/nginx/sbin/nginx

(gdb) ptype ngx_errlog_module_ctx
type = struct {
    ngx_str_t name;
    void *(*create_conf)(ngx_cycle_t *);
    char *(*init_conf)(ngx_cycle_t *, void *);
} 
```

但是现在，我如何编写一个可以像这样使用的用户定义命令（ptype_with_address）：

```
ptype_with_address 0x80b4568

ngx_errlog_module_ctx in section .data of /usr/local/nginx/sbin/nginx
type = struct {
ngx_str_t name;
    void *(*create_conf)(ngx_cycle_t *);
    char *(*init_conf)(ngx_cycle_t *, void *);
} 
```

我想这样做是因为我正在研究 nginx 的代码，我想编写一个用户定义的命令来显示所有 ngx_modules 的详细信息，包括每个模块的 ctx 成员变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T05:24:39.523

> 我可以写一个用户定义的命令来满足这个需求吗

如果你有一个相当新的 GDB 版本，你应该能够使用内置的 Python 解释器来实现你的目标。

不幸的是，您似乎无法`gdb.Symbol`从其地址中获取 ，您[需要符号名称](http://sourceware.org/gdb/onlinedocs/gdb/Symbols-In-Python.html#Symbols-In-Python)。换句话说，它看起来不像`info symbol`当前在 GDB 中暴露给 Python 解释器。

[我建议在bugzilla](http://sourceware.org/bugzilla/enter_bug.cgi?product=gdb)中提交功能请求以扩展`gdb.lookup_global_symbol`以接受地址。

谷歌搜索“gdb python 信息符号”揭示了这个[线程](http://old.nabble.com/%27info-symbol%27-equivalent-in-python--td33526400.html)，其中 Tom Tromey（gdb 开发人员）还要求提交一个 bugzilla 问题，并提出了一个解决方法。

# windows-phone-7 - 如何在地图轮廓上填充国家/地区

> ID：11276755
> 
> 赞同：1
> 
> 时间：2012-06-30T18:51:23.793
> 
> 标签：windows-phone-7, bing-maps, windows-phone, here-api

是否可以在 Bing 或诺基亚地图中显示一个空白的世界地图，其中每个国家仅由其边界勾勒出来，然后用纯色填充一些国家？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-13T07:54:14.043

最近的[一篇博客文章](http://developer.here.com/news/article?articleId=95955)宣布`developer.here.com`：

> [Geocoder API](http://developer.here.com/rest-apis/documentation/geocoder)现在支持使用地理编码结果检索管理边界形状（多面坐标）。此功能适用于所有国家和地区 - 符合国家/地区的覆盖深度。

[GitHub 上](http://heremaps.github.io/examples/explorer.html#wkt-parser__region-shape-on-click)的HERE 社区示例提供了一个基于 Web 的示例来说明这一点。它是用 JavaScript 编写的，但应该会给你这个想法。

1.  使用参数向 REST Geocoder服务发出*http*请求`additionaldata=IncludeShapeLevel,[level],`
2.  使用正则表达式解析[众所周知的文本格式 (WKT)。](https://en.wikipedia.org/wiki/Well-known_text)
3.  获取坐标并转换为`Polygon`

现在根据您的情况，在手机上您可能更愿意提供仅**离线**支持 - 因为您知道地图可直接从设备获得，因此如果您确定需要哪些区域，则预加载形状是有意义的基于 KML 或 GeoJSON 文件。如果您事先不知道，您的应用程序无论如何都依赖于 http（或者潜在的位置集是任​​意大的），您也可以只使用*http*对您需要的区域使用 REST 地理编码。

顺便说一句，**在线**解决方案的一个优势 - 因为 Bing 和诺基亚地图都使用与 HERE 相同的数据集，所以您可以确定您下载的任何形状都将完全匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T19:06:36.803

您可以在 Bing 地图上渲染任意多边形，但没有内置功能可以渲染省、州、县等区域。为了突出显示区域，您需要提供多边形的所有点并将其覆盖地图上的一个区域。这是一篇很棒的文章，讨论了使用 Bing Maps AJAX 控件版本 7 绘制“高级”多边形形状。

[Bing 地图上的“高级形状”（即甜甜圈多边形）](http://alastaira.wordpress.com/2012/05/07/advanced-shapes-i-e-donut-polygons-on-bing-maps/)

关于 Bing 地图 API 的可能重复问题

[Bing 地图 - 悬停时使用多边形突出显示国家/地区](https://stackoverflow.com/questions/5883555/bing-map-highlight-country-with-a-polygon-on-hover)

# javascript - 在 IE 中使用 javascript getter & setter 时出错

> ID：11276757
> 
> 赞同：3
> 
> 时间：2012-06-30T18:51:49.347
> 
> 标签：javascript, oop, internet-explorer, getter-setter

当我发现这段代码时，我正在阅读[John Resig](http://ejohn.org/blog/javascript-getters-and-setters/)关于 JavaScript Getters 和 Setters 的文章：

```
function Field(val){
    this._value = val;
}
Field.prototype = {
    get value(){
        return this._value;
    },
    set value(val){
        this._value = val;
    }
}; 
```

我已经测试过了，它可以在所有主流浏览器上完美运行，除了该死的 IE，它给了我`SCRIPT1003: ':' expected`错误。琢磨了一会儿，我意识到这个错误的发生是因为 IE 无法识别 JavaScript Getters 和 Setters，所以我认为这`get value`是`set value`一个语法错误。

有没有办法让这段代码跨浏览器？

提前致谢

**编辑**：

我还尝试检查浏览器是否支持 getters&setters：

```
if(window.__lookupSetter){
    Field.prototype = {
        get value(){
            return this._value;
        },
        set value(val){
            this._value = val;
        }
    };
}else{
    Field.prototype = {
        value: function(val){
            if(val)
                return this._value = val;
            return this._value;
        }
    };
} 
```

但是在执行代码之前，IE 会检查语法错误，并在`get`and`set`行中错误地发现这些错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T19:04:42.453

您可以在不使用新语法的情况下定义属性[`Object.defineProperty`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty)：

```
function Field(val){
    this.value = val;
}
Object.defineProperty(Field.prototype, 'value', {
    get: function(){
        return this._value;
    },
    set: function(val){
        this._value = val;
    }
}); 
```

这样，代码不会在旧浏览器中出现语法错误。

* * *

WRT 到您的编辑，您的后备代码：

```
Field.prototype = {
    value: this._value
}; 
```

不管用。`this`将指向全局对象 - `window`。

* * *

真正跨浏览器使用 getter 和 setter 的唯一方法是根本不使用它们：

```
Field.prototype = {
    getValue: function() {
        return this._value;
    },
    setValue: function(val) {
        this._value = val;
    }
}; 
```

# python - 使用谷歌应用引擎创建唯一页面时出现 404 错误

> ID：11276759
> 
> 赞同：0
> 
> 时间：2012-06-30T18:52:09.237
> 
> 标签：python, google-app-engine, url-mapping

我在这里问了一个类似的问题：[根据用户 ID 创建永久唯一链接，](https://stackoverflow.com/questions/11256738/create-permenant-unique-links-based-on-a-user-id)但无法完全得到答案。我试图为我网站上的每个用户提供一个独特的个人资料页面。我基本上已经设置好了，但我不断收到 404 错误。现在我不确定这是否是我的处理程序的问题，或者只是我这样做的整个方式。

这是我的应用程序代码：

```
app = webapp2.WSGIApplication([('/', MainPage),
                               (r'/profile/(.+)', ProfilePage)]) 
```

这是我的 ProfilePage 处理程序类：

```
class ProfilePage(webapp2.RequestHandler):
    def get(self, profile_id):
        profileowner = User.get_by_id(profile_id)

        if profileowner:
            #Get all posts for that user and render....
            #theid is their federated_id 
            theid = profileowner.theid
            personalposts = db.GqlQuery("select * from Post where theid =:1 order by created desc limit 30", theid)

            #I collect this so that I can have their username in the top of the page
            global visits
            logout = users.create_logout_url(self.request.uri)
            currentuser = users.get_current_user()
            self.render('profile.html', user = currentuser, visits = visits, logout=logout, personalposts=personalposts)
        else:
            self.redirect("/") 
```

对于我在数据存储查看器中找到的用于使用的 ID 1201，我一直在通过输入 www.url.com/profile/1201 对其进行测试，这就是我收到 404 错误的时候。

更新：它现在将我重定向到带有 Amber 建议更改的主页。

现在当我改变这一行时：

```
profileowner = User.get_by_id(profile_id) 
```

对此：

```
profileowner = User.get_by_id(17001) 
```

它通过正确，所以我猜该行没有正确地从 URL 获取 profile_id

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:59:43.590

```
r'/profile/<profile_id>' 
```

不是有效的正则表达式。你可能想要这样的东西：

```
r'/profile/(.+)' 
```

# java - 在 JSP 中验证表单

> ID：11276760
> 
> 赞同：0
> 
> 时间：2012-06-30T18:52:09.510
> 
> 标签：java, spring, hibernate, jsp, hibernate-validator

我在 JSP 中使用 Spring 和 Hibernate 验证一个简单的表单（使用），并在[此处](http://www.dzone.com/tutorials/java/spring/spring-simple-form-controller-1.html)解释`SimpleFormController`的帮助下。只包含一个字段的表格如下。[`HibernateValidator`](http://sourceforge.net/projects/hibernate/files/hibernate-validator/4.0.2.GA/hibernate-validator-4.0.2.GA-dist.zip/download?use_mirror=nchc)

```
<%@page contentType="text/html" pageEncoding="UTF-8" %>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form" %>

<form:form method="post" id="userForm" name="userForm" action="Temp.htm" commandName="validationForm">          

    <table>
        <tr>
            <td>User Name:<font color="red"><form:errors path="userName" /></font></td>
        </tr>

        <tr>
            <td><form:input path="userName" /></td>
        </tr>               

        <tr>
            <td><input type="submit" value="Submit" /></td>
        </tr>
        </table>

</form:form> 
```

以下是定义验证标准的命令类。

```
package validators;

import javax.validation.constraints.Size;
import org.hibernate.validator.constraints.NotEmpty;

final public class ValidationForm 
{
    @NotEmpty(message="Must not be left blank.")
    @Size(min = 1, max = 2)
    private String userName;

    public void setUserName(String userName)
    {
            this.userName = userName;
    }

    public String getUserName()
    {
            return userName;
    }        
} 
```

以下是`dispatchar-servlet.xml`可以进行不同配置的文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:aop="http://www.springframework.org/schema/aop"              
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
   http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

<bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping" />
<bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter" />

<bean id="tempService" class="usebeans.TempServiceImpl" />
<bean id="tempController" class="controller.Temp" p:tempService-ref="tempService" p:formView="Temp" p:successView="Temp"/>

<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="/WEB-INF/messages" />
</bean>

<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
        <props>
            <prop key="index.htm">indexController</prop>
            <prop key="Temp.htm">tempController</prop>                
        </props>
    </property>
</bean>

<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver"
      p:prefix="/WEB-INF/jsp/"
      p:suffix=".jsp" />

<bean name="indexController"
      class="org.springframework.web.servlet.mvc.ParameterizableViewController"
      p:viewName="index" /> 
```

where`TempService`是只包含一个方法的接口`add(ValidationForm validationForm){...}`，而`TempServiceImpl`是实现该`TempService`接口的类。

控制器类`Temp`如下。

```
package controller;

import java.util.HashMap;
import java.util.Map;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.validation.Valid;
import org.springframework.validation.BindException;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.SimpleFormController;
import usebeans.TempService;
import validators.ValidationForm;

@SuppressWarnings("deprecation")
final public class Temp extends SimpleFormController
{
    private TempService tempService=null;
    public Temp()
    {            
        setCommandClass(ValidationForm.class);
        setCommandName("validationForm");
    }

    //This method may not be necessary.
    public void setTempService(TempService tempService) 
    {
        this.tempService = tempService;
    }

    @Override
    protected ModelAndView onSubmit(HttpServletRequest request, HttpServletResponse response, @ModelAttribute("validationForm") @Valid Object command, BindException errors) throws Exception
    {
        ValidationForm validationForm=(ValidationForm) command;
        tempService.add(validationForm);   //May not be necessary.        

        if(errors.hasErrors())  //Never evaluates to true even though the text box on the form is left blank.
        {                
            System.out.println("User Name : "+validationForm.getUserName());
            //Or do something.
        }    
        else
        {
            //Do some stuff such as database operations like insert, update or delete. 
        }         

        ModelAndView mv=new ModelAndView("Temp", "validationForm", validationForm);
        return mv;
    }

    @Override
    protected ModelAndView showForm(HttpServletRequest request, HttpServletResponse response, BindException errors) throws Exception
    {            
        ModelAndView mv=new ModelAndView("Temp", "validationForm", new ValidationForm());
        return mv;
    }
} 
```

现在，这里发生的情况是，当通过单击表单上的唯一提交按钮提交表单时，将调用`onSubmit()`控制器类`Temp`中的方法，在其中我强加一个`if`条件`if(errors.hasErrors()){}`。

因此，如果表单上唯一的 TextField 为空，则正在呈现的表单包含验证错误，并且`if`应将条件评估为 true，并应显示指定的错误消息（如`ValidationForm`类中指定的那样`@NotEmpty(message="Must not be left blank.")`）但这永远不会发生 [*对象的`ValidationForm`可以通过方法的`Object command`参数获得`onSubmit()`*。无论文本框是否包含值，条件都不会计算为真。

我在这里想念什么？我觉得我遵循了错误的使用方式`HibernateValidator`。任何提示或指南都会对我有所帮助。

[应用程序运行没有错误，但要验证的表单未验证]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:02:28.773

`CommandController`将 @Valid 放在方法参数上不适用于从及其子级扩展的老式控制器（例如， `SimpleFormController`）。它是 的一个功能`AnnotationMethodHandlerAdapter`，因此您需要使用带注释的控制器才能使其工作。

（您必须禁止对该类的弃用警告是有原因的！:)）

读者文摘版：

而不是定义自己的 urlMapping 和调度程序中的所有内容`<mvc:annotation-driven/>`

然后，您无需从 SimpleFormController 扩展，只需创建一个常规类并使用 @Controller 注释它，并使用 @RequestMapping 注释您的方法。

```
@Controller
@RequestMapping("/Temp.htm")
public class Temp {

@RequestMapping(method=RequestMethod.GET)
public ModelAndView getForm() {
  ModelAndView mv=new ModelAndView("Temp", "validationForm", new ValidationForm());
  return mv;
}

@RequestMapping(method=RequestMethod.POST)
public ModelAndView postForm(@Valid ValidationForm validationForm, BindingResult errors) {
        tempService.add(validationForm);   //May not be necessary.        

        if(errors.hasErrors())  //Never evaluates to true even though the text box on the form is left blank.
        {                
            System.out.println("User Name : "+validationForm.getUserName());
            //Or do something.
        }    
        else
        {
            //Do some stuff such as database operations like insert, update or delete. 
        }         

        ModelAndView mv=new ModelAndView("Temp", "validationForm", validationForm);
        return mv;
} 
```

互联网上有大量教程，其内容比我在这里复制的要多得多。查看 Spring PetClinic 示例应用程序的当前版本以获取详细示例。

# c++ - 带有指向具有自定义类型的静态数组的指针的 std::vector

> ID：11276768
> 
> 赞同：1
> 
> 时间：2012-06-30T18:53:19.553
> 
> 标签：c++, stdvector

我有这样的事情：

```
typedef int customType[10]; 
```

我想要这样的功能

```
std::vector<customType*>& myFunc(); 
```

但也有一些问题。

1）我需要为`customType`向量中的每个指针分配内存（是吗？）并做

```
std::vector<customType*> A;
//some code to get length
for (i = 0; i < length; i++)
{
  A[i]  = new customType;
} 
```

由于错误而错误：

```
IntelliSense: a value of type "int *" cannot be assigned to an entity of type "customType*" 
```

2）通常，存储此类数据是一种好方法吗？也许我应该制作一个一维数组，所有内容都存储在一行中，并使用类似的东西

`A[i*innerLength+j]`

访问元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T19:24:08.893

您的代码将不起作用，因为`A[i]`它是 type`int (*)[10]`并且`new`表达式是 type `int*`，要么更改`A`为`std::vector<int*>`或将您的数组包装在类或结构中：

```
struct customType {
    int data[10];
}; 
```

然后您可以使用`std::vector<customType>`（最好）或`std::vector<customType*>`.

`std::vector<int[10]>`不会工作，因为 C 和 C++ 中的数组是不可分配的，这是`std::vector`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T19:29:51.357

我通常会建议使用类似下面的内容并自己进行数组索引。

```
std::vector<int> vals(row_size*col_size, 0); 
```

在非常大的尺寸下，最好将其分解。在一个块中分配很多连续的内存。“真的很大”是相当主观的，你可能会得到比大多数人预期的大得多的尺寸。让探查器告诉您何时出现问题。

如果您可以访问 C++11，那么这将是另一种选择。

```
TEST(array)
{
    typedef std::array<int,10> Foo;
    typedef std::vector<Foo> Foos;
    Foos foos(10, Foo());
} 
```

# ruby-on-rails - 有没有办法在rails中实现“各有一个”的关系？

> ID：11276781
> 
> 赞同：0
> 
> 时间：2012-06-30T18:54:56.240
> 
> 标签：ruby-on-rails, ruby, activerecord

假设我有三个包含用户、角色和事件的模型。每个用户可以有许多角色（例如吉他手、贝斯手等），并且每个角色可以有一个或多个用户（例如 Ted 可以充当吉他手或贝斯手）来完成它。

我正在为一个教堂乐队创建一个轮播应用程序，这意味着每个活动在乐队中都有一个角色，并且每个活动都有一个用户来填补每个角色。我想知道有什么方法可以在模型中强制执行这种关系，或者我是否必须在应用程序的其他地方执行此操作。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T19:41:30.883

事件应该有很多用户通过 EventParticipation 和 EventParticipation 应该

```
belongs_to :user
belongs_to :event 
```

对 user_id 进行一些[唯一性验证](http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#method-i-validates_uniqueness_of)，添加一个 role_id 并根据需要进行范围唯一性验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T00:59:33.263

我会在模型中使用[自定义验证方法来做到这一点。](http://guides.rubyonrails.org/active_record_validations_callbacks.html#custom-methods)这是一些未经测试的代码，但类似于

```
class ChurchEvent < ActiveRecord::Base
  validate :has_one_role_each

  def has_one_role_each
    errors.add(:base, "only one of each role allowed") if duplicate_roles?
  end

  private

  def duplicate_roles?
    # assuming band_roles is array of roles for this event
    band_roles.uniq.count != band_roles.count
  end
end 
```

和用户类似的东西。

# c - 这个简单的指针程序输出的解释是什么

> ID：11276784
> 
> 赞同：0
> 
> 时间：2012-06-30T18:55:10.473
> 
> 标签：c, pointers

我试图了解用于存储变量和指针、指针-指针和指针-指针-指针的地址的大小。结果有点令人困惑。

这是代码：

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>

int main(void)
{
    char    *** ppptr_string = NULL;
    int     *** ppptr_int    = NULL;
    double  *** ppptr_dbl    = NULL;

    char c=0; int i=0; double  d=0;

    printf("\n %d   %d   %d   %d   %d\n", sizeof(&ppptr_string),   
    sizeof(ppptr_string),  sizeof(*ppptr_string), sizeof(**ppptr_string), 
    sizeof(***ppptr_string));
    printf("\n %d   %d   %d   %d   %d\n", sizeof(&ppptr_int),   sizeof(ppptr_int),    
    sizeof(*ppptr_int),   sizeof(**ppptr_int),   sizeof(***ppptr_int));
    printf("\n %d   %d   %d   %d   %d\n", sizeof(&ppptr_dbl),   sizeof(ppptr_dbl),    
    sizeof(*ppptr_dbl),   sizeof(**ppptr_dbl),   sizeof(***ppptr_dbl));

    printf("\n  sizeof(char) = %d,   sizeof(int) = %d,   sizeof(double) = %d", 
    sizeof(c), sizeof(i), sizeof(d));
    printf("\n sizeof(&char) = %d,  sizeof(&int) = %d,  sizeof(&double) = %d", 
    sizeof(&c), sizeof(&i), sizeof(&d));

getch();
return 0;
} 
```

现在混乱。我可以看到这台机器上的变量地址总是 2 个字节长。无论变量的类型如何，无论它是否是指针变量。但是为什么我在这里得到这么多条目的大小为 4 呢？无论类型如何，指针的大小始终为 4。存储变量的 >address< 的大小为 2。指向的内容的大小取决于类型。

为什么我在 sizeof 的输出中得到 4s？

我的 Borland C++ 5.02 输出 ![在此处输入图像描述](../Images/87ddc92d27c7d45de5855d85f1b581a6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T19:01:31.357

如果你有一个类型`T`和一个指针上的指针`T*** ptr`，那么`ptr`, `*ptr`,`**ptr`本身就是指针。您可能正在使用 32 位系统（或编译 32 位应用程序），所以`sizeof(ptr) == sizeof(*ptr) == sizeof(**ptr)`：

```
--- 程序输出 ---

 4 4 4 4 1

 4 4 4 4 4

 4 4 4 4 8

  sizeof(char) = 1, sizeof(int) = 4, sizeof(double) = 8
 sizeof(&char) = 4, sizeof(&int) = 4, sizeof(&double) = 4

```

`&ptr`是一个地址/一个指针`T***`，所以它的大小也是 4。仅当您将指针取消引用到其最大级别 ( `***ptr`) 时，您才会拥有实际类型而不是另一个指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T21:47:06.177

我认为正在发生的事情是您正在接近（16 位）局部变量指针，但声明为类型 * 的指针是一个远（32 位）指针。

这是在 16 位 Intel 处理器（或“实模式”下的 32 位处理器）上工作的一个怪癖，例如在 DOS 中，您只能访问 1 MB 内存（实际上是 640 kB）。远指针的高 16 位是一个段（内存中的 64k 页），低 16 位是偏移量。

[http://en.wikipedia.org/wiki/Real_mode](http://en.wikipedia.org/wiki/Real_mode)

[http://wiki.answers.com/Q/What_are_near_far_and_huge_pointers_in_C](http://wiki.answers.com/Q/What_are_near_far_and_huge_pointers_in_C)

无法重现这一点的回答者很可能在 32 位（或更多）处理器上使用 32 位（或更多）操作系统。

# ios - 如何使用格式化占位符本地化字符串？

> ID：11276787
> 
> 赞同：0
> 
> 时间：2012-06-30T18:55:21.027
> 
> 标签：ios, xcode, localization, stringwithformat

我需要翻译 controller.body 中的文本

我的代码：

```
controller.body = [NSString stringWithFormat:@"\n\n"
                                                    "Label 1: %@ \n"
                                                    "Label 2: %@ \n"
                                                    "Label 3: %@ \n"
                                                    "Label 4: %@", label1.text, label2.text, label3.text, label4.text]; 
```

我有文件 Localizable.strings，如何使用格式化占位符本地化字符串？我的意思是文本“标签 1”、“标签 2”等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:57:37.437

您将需要使用`NSLocalizedString`

你的`localizable.string`会看起来像

```
"Label 1: %@ \n" = "your label";
"Label 2: %@ \n" = "your label";
//And so on... 
```

还有你的代码

```
controller.body = [NSString stringWithFormat:@"\n\n",
                                             NSLocalizedString(@"Label 1: %@ \n", nil),
                                             NSLocalizedString(@"Label 2: %@ \n", nil),
                                             etc....]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T19:05:07.233

用于本地化字符串的东西

```
controller.body = [NSString stringWithFormat:NSLocalizedString(@"Label 1: %@ ," , @"Label 2: %@ ,", @"Label 3: %@ ," , @"Label 4: %@ ,"), label1.text,label2.text,label3.text,label4.text] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T13:57:27.330

图案：

```
NSString* stringFormat = NSLocalizedString (@"LabelStringFormat", ...);
NSString* labelText = [NSString stringWithFormat:stringFormat, label1.text, ...]; 
```

并在您的 localized.strings

```
"LabelStringFormat" = "Label 1: %@, ..."; 
```

您甚至可以使用正确的字符串格式重新订购商品而无需代码。

# android - 将 web 应用程序移植到 phonegap 的路径问题

> ID：11276802
> 
> 赞同：6
> 
> 时间：2012-06-30T18:57:04.257
> 
> 标签：android, gwt, cordova

我有一个我认为是现有网络应用程序的相当标准的设置，并且想就如何最好地调整它以通过 PhoneGap 创建本机版本的建议，以一种我们可以继续开发网络应用程序和更新的方式phonegap 从中生成版本，返工最少。

我是PhoneGap 新手。我四处搜索并尝试了 StackOverflow 等的各种建议，但没有运气，至少对于我的设置而言。

该应用程序是在 GWT 中开发的，包括：

# 所有应用程序的共享文件夹中的静态资源

/static/ 带有图像、字体、css。css 定义了一些字体系列，在 /fonts 中引用字体文件

我们使用绝对路径从 html 文件和 JavaScript 代码中引用这些静态资源。

# 多个子文件夹中的静态资源（由 GWT 模块仅供参考）

例如 /LoginGadget，它将有 GWT 生成的 html、Javascript 以及有时带有 css 和 css-images 的子文件夹。

# GWT-RPC

这些基本上是 GWT 负责序列化等的 servlet，并且可以通过 XHR 从我们的客户端代码访问。

# PhoneGap 构建

我已经开始考虑使用 PhoneGap 创建一个打包的应用程序，并遇到了一些我需要建议的问题（Android 示例）。

我已经创建了 /assets/www 并在其中放置了一个 index.html 文件并开始运行。我复制了我们的 /static/ 文件夹和 /LoginGadget 文件夹的版本在那个“根”下查看，并使用

```
super.loadUrl("file:///android_asset/www/index.html"); 
```

哪个有效。

在我们所有 GWT 生成的 html 和 Javascript 文件中，我们使用绝对路径（例如“/static/....”）和相对路径（例如，来自 LoginGadget Javascript，它可能引用“css/some.css”）来引用静态资源）。

相对路径有效，因为它们位于引用它们的 html/js 所在的文件夹“下”。

# 问题 1

然而，对绝对路径的引用失败，尽管 PhoneGap 开头说：

```
DroidGap: url=file:///android_asset/www/index.html baseUrl=file:///android_asset/www/ 
```

我希望将 index.html 中对“/static/images/file.png”的引用附加到“baseUrl”以提供 file:///android_asset/www/static/images/file.png 并因此工作，因为那是文件所在的位置。

我不得不修改 index.html 以使用“static/image/file.png”让它工作。但是我必须使用不同的配置重新编译我们所有的 GWT 应用程序以修改对资源的所有引用，并且如果修改为只是“静态/”，则子文件夹中其他文件的引用返回“/static/”将不起作用”。

如何获得对“映射”到 /assets/www 或类似文件的绝对路径引用？（见下文，我已经研究过使用“base”标签......）

# 问题 2

GWT RPC 向提供 html/js 的服务器发出 XHR 请求。这很好用，因为该应用程序没有硬编码主机服务器名称，实际上部署在许多不同的应用程序引擎应用程序 ID/域上进行测试等。

这里的 html/js 文件是从 file:/// “提供”的，因此我需要以某种方式指定服务器。

我尝试使用文档中的“base”标记进行指定，但是我在 html/js 中对未指定“file://”的资源的任何引用似乎都是对“base”中指定的服务器进行的。 ....因此我不再加载我的本地资源，我基本上有一个从我的服务器提供的网络应用程序。

# 想

我想做的是能够从我的 wab-app 的战争（/static 和我所有的 /GWT-Module 文件夹）中获取（相当大的）编译和测试的应用程序，并将它们复制到 /assets/www在我的 PhoneGap 应用程序上，然后添加一些样板或启动代码并按原样运行。

听起来像是一个很大的要求，但我想如果我能正确指定两件事：

*   文件路径用作未指定 http/https 协议（或其他协议......我已经看到在 DroidGap.java 中处理）的资源请求的绝对路径的“根”

*   用于任何 XHR 请求的服务器（协议、主机名、端口）

然后一切都会洗出来！

我认为这将是一个失败的“标准”设置，并且已经涵盖。也许是这样，我只是错过了一些东西。

评论？建议？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T15:59:58.313

你知道mgwt吗？[http://www.m-gwt.com](http://www.m-gwt.com)

它是由 GWT 指导委员会成员之一构建的 GWT 移动框架，并且它还具有 GWT 应用程序的 phonegap 集成。

项目中有很多文档和一个非常友好的用户组。

让我更详细地解决您的问题：

**问题1：**

如果您使用绝对路径，您将得到与 phonegap 不一致的行为，因为浏览器在本地构建这些 url，并且对 / 的引用表示手机上的根条目。大多数时候使用绝对 URL 是一个坏主意，我建议您在应用程序中更改它（就像您已经做过的那样）。

**问题2：**

要将 GWT RPC 与 phonegap 一起使用，请阅读我为解决这些问题而撰写的这篇博文：[http ://blog.daniel-kurka.de/2012/04/gwt-rpc-with-phonegap-revisited.html](http://blog.daniel-kurka.de/2012/04/gwt-rpc-with-phonegap-revisited.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T09:15:57.910

我们通过两个单独的操作解决了这些问题：

1) 我编写了一个 ant 目标，作为我们构建的一部分，它采用 web 应用程序，并替换它找到的所有内部 url 引用中的路径，使它们适合它们在应用程序中工作所需的内容。对我来说，这仍然是 phonegap 中的一个主要错误。也许它已在较新的版本中修复？

2) 我们对 RPC 服务类进行了子类化，并对其进行了修改，使其具有一个静态成员，即服务端点。在我们的 phonegap 应用程序启动时，我们修改端点以指向所需的服务器并 presto.... 我们所有的 GWT RPC 都指向正确的位置。

# php - Yii 重定向错误

> ID：11276803
> 
> 赞同：1
> 
> 时间：2012-06-30T18:57:08.790
> 
> 标签：php, yii

我有重定向系统将旧网址重定向到新网址。

我在站点控制器中编写了我的代码 actionError（*好还是不好？*）.. 它在本地工作（widnows）但它不能在现场工作（linux）...... chrome 中的错误消息是：哎呀！此链接似乎已损坏。

**我的代码： http:** [//pastebin.com/nSJH5dwX](http://pastebin.com/nSJH5dwX)

我认为问题在于加载 geoiploc.php，这是一个太大的文件......你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:01:28.933

我很确定如果它在 Windows 上运行良好但在 linux 上运行良好是由于文件名中的字母大小写，请确保它与**geoiploc.php 文件**`include("geoiploc.php");`具有相同的字母大小写。如果文件具有不同的字母大小写，Linux 将找不到该文件，例如：**geoIpLoc.php**或**Geoiploc.php**

# iphone - UITableView 每八个单元格重命名一次

> ID：11276804
> 
> 赞同：0
> 
> 时间：2012-06-30T18:57:18.097
> 
> 标签：iphone, ios, uitableview

我的 MainViewController 中有一个 UITableView。当用户点击一个单元格时，

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

selectedRow = indexPath;

....

[self performSegueWithIdentifier:@"OtherViewControllerSegue" sender:self];
} 
```

然后它们被带到另一个 UIViewController（我们称之为 OtherViewController）。在 OtherViewController 中，设置了所选单元格的名称。当 OtherViewController 被关闭时，它会使用新名称更新 MainViewController 中的单元格：

```
[[[mainvc.myTableView cellForRowAtIndexPath:mainvc.selectedRow] textLabel] setText:namecell.textField.text];
    [self.navigationController popViewControllerAnimated:YES]; 
```

这一切都很好，直到我有更多的单元格超出了屏幕的容量。如果单元格的数量超出了屏幕的容量（iPhone 为 8 个，iPad 为 16 个），那么这也会分别为每第八个或第十六个单元格设置名称。关于我做错了什么的任何想法？

**更新：**

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
UITableViewCell *cell = [pointsTableView dequeueReusableCellWithIdentifier:@"myTableCell"];
return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T19:05:49.863

您正在尝试将数据（新名称）存储在视图（单元格的标签）中。可能发生的情况是，当您在数据源的`cellForRowAtIndexPath`方法中重复使用单元格时，其中一些已经为它们设置了此文本并且它仍然存在。

更好的想法是在您用作单元格信息的任何数组中进行更改，然后重新加载表格视图以使更改可见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T19:11:08.323

这是由于单元重用，并且您将**模型**与**视图**混合在一起（在 MVC 上下文中）。

表格单元格是一个短暂的东西，一旦它离开屏幕，它就会在需要另一个单元格时被重用（而不是创建新的单元格）。这就是该`dequeueReusableCellWithIdentifier:`方法的作用。

这意味着您不能在其中存储数据并期望它在以后仍然有效。在此示例中，您尝试将名称*存储*在表格单元格中。**在任何视图**对象上设置属性（如标签文本）的原因纯粹是为了显示，而不是为了存储。因此，要解决这个问题，您应该在**模型**中维护一个对象列表（例如，这可以在单独的类中或在`mainvc`对象的数组中）。然后，`cellForRowAtIndexPath:`您应该每次都设置标签文本 - 即使不应该有标签，您也需要将其设置为 nil 或空字符串，因为单元格被重复使用，它可能包含上次使用时的内容。

**更新：**`cellForRowAtIndexPath:`您应该使用控制器中的方法或属性在模型中设置文本，然后告诉表格视图重新加载该单元格， 而不是调用您自己并设置其文本。代码可能如下所示：

```
// This code is in where you want to set the text from
[mainvc setText:someText forIndexPath:indexPath]; 
```

..并在您的主视图控制器中：

```
- (void)setText(NSString*)newText forIndexPath:(NSIndexPath*)indexPath
{
    // Store the text in your model here...
    ...

    // If the view is loaded, the table view should reload the cell.
    if(self.isViewLoaded)
    {
        [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }
} 
```

然后表格视图将调用`cellForRowAtIndexPath:`正确设置文本的位置。起初这可能看起来有点令人费解，但是当您习惯使用模型-视图-控制器设计模式时，您会发现像这样保持每个 MVC 组件的工作分开意味着您的代码更整洁、更易于理解、更少的错误，更容易更新/扩展等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T19:04:04.723

我想，你不应该`cellForRowAtIndexPath`自己打电话。可以调用它来创建单元格，而不是更改它。例如，您可以通过委托将所需的字符串传递给第一个视图来更新表。在事件中（用户设置名称），您可以更新所有表格并将所需的名称设置为单元格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T19:04:56.973

很难确切地说出问题所在，但一种可能的解决方案可能是：

确保在 cellForRowAtIndexPath 中初始化单元格，如下所示：

```
// Create the Cell
    static NSString *recordCell = @"pickerTableCell";
    cell = [tableView dequeueReusableCellWithIdentifier:recordCell];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:recordCell];
    } 
```

我知道这主要是一种记忆解决方案，但也可能在这里出现。

此外，请查看您的代码并检查您如何确定哪个单元格被重命名。您可能会不小心在多个单元格上调用重命名而没有意识到

# java - 如何处理任何格式的 Java 日期？

> ID：11276808
> 
> 赞同：2
> 
> 时间：2012-06-30T18:58:19.730
> 
> 标签：java, javascript, sql

我想保存用户希望的任何日期类型格式：日期应该以用户输入的格式保存到数据库中（例如 mm/dd/yy、dd/mm/yy 或 yy/dd/mm）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T19:19:27.440

也许试试这种方式。

将用户首选的日期格式存储在他的个人资料中，并以某种默认格式存储所有日期。当您想向用户显示日期时，请根据他的喜好设置格式，例如

```
String userFormat="yy/MM/dd";
SimpleDateFormat sdf = new SimpleDateFormat(userFormat);

Date someDate = new Date();
String formatedDate = sdf.format(someDate);
System.out.println(formatedDate); 
```

但这只是其中一种选择。

# objective-c - 重复一次后停止动画

> ID：11276809
> 
> 赞同：4
> 
> 时间：2012-06-30T18:58:20.660
> 
> 标签：objective-c, xcode, animation, uiimageview

我创建了一组 2 张图像，然后进行动画处理，一切正常。但现在我希望动画在重复一次后停止，我的意思是动画将从第一个图像开始，移动到第二个图像并停止（第二个图像将保留在我的 imageview 上）。我该怎么做？这是我的代码：

```
 UIImage *mistakeOne = [UIImage imageNamed:@"Xmark.png"];
    UIImage *mistakeOneB = [UIImage imageNamed:@"XmarkWhite.png"];
    NSMutableArray *animation = [[NSMutableArray alloc] initWithObjects:mistakeOne, mistakeOneB , nil];
    [mistakeNumberOne setAnimationImages:animation];
    mistakeNumberOne.animationDuration = 5.0;
    [mistakeNumberOne startAnimating] 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T19:00:24.833

假设 errorNumberOne 是`UIImageView`

```
[mistakeNumberOne animationRepeatCount:1]; 
```

如果要在动画之后保留图像，请在动画之前的 UIImageview 中设置所需的图像：

```
mistakeNumberOne.image = myDesiredImage; 
```

动画结束后，它会显示图像。

把它们放在一起：

```
 UIImage *mistakeOne = [UIImage imageNamed:@"Xmark.png"];
 UIImage *mistakeOneB = [UIImage imageNamed:@"XmarkWhite.png"];
 NSMutableArray *animation = [[NSMutableArray alloc] initWithObjects:mistakeOne, mistakeOneB , nil];
 [mistakeNumberOne setAnimationImages:animation];
 mistakeNumberOne.animationDuration = 5.0;
 [mistakeNumberOne animationRepeatCount:1];
 mistakeNumberOne.image = mistakeOneB;
 [mistakeNumberOne startAnimating]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T19:34:49.700

Pfitz 的回答非常适合制作动画。但是，对于这种特殊情况，您只有两个图像并且您只需要在它们之间“交换”它们可能更简单地在延迟后更改图像。

```
-(void)swapImage {

      [mistakeNumberOne setImage:mistakeOneB];
} 
```

然后延迟swapImage：

```
[self performSelector:@selector(swapImage) withObject:nil afterDelay:5.0]; 
```

希望这可以帮助

# javascript - 我需要帮助制作一个嵌入了 Flash 游戏的灯箱

> ID：11276810
> 
> 赞同：0
> 
> 时间：2012-06-30T18:58:31.340
> 
> 标签：javascript, html, flash

我正在制作一个游戏网站，我对计算机语言知之甚少，我需要创建一个灯箱，当图像单击链接到此框时会出现。盒子不需要太花哨或任何东西，我所需要的只是让它有一个固定大小的嵌入式 Flash 游戏而无需滚动。我看过 jquery 和 mootools 但我发现它们令人困惑并且不知道如何在其中嵌入基于 Flash 的游戏，因此任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T19:20:53.617

[PrettyPhoto](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/#prettyPhoto) jQuery 使 Lightbox 媒体（如 Flash）变得容易。

从[他们的例子](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/#prettyPhoto)：

```
<a title="Flash 10 demo" href="http://www.adobe.com/products/flashplayer/include/marquee/design.swf?width=792&amp;height=294" rel="prettyPhoto[mixed]">
    <img src="/wp-content/themes/NMFE/images/thumbnails/flash-logo.jpg" alt="Flash 10 demo" width="50"/>
</a> 
```

`rel=prettyPhoto[groupName]`在您的锚点中放置一个指向 SWF 的链接。

在锚点内，您可以放置​​图像缩略图。

```
<a href="flash.swf" rel="prettyPhoto[group]">
    <img src="thumbnail.png" />
</a> 
```

[下载源](http://www.no-margin-for-errors.com/demos/prettyPhoto-jquery-lightbox-clone/prettyPhoto_compressed_3.1.4.zip)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T19:30:42.447

我认为可能看起来不错的一个简单解决方案是拥有一个从一开始就隐藏的容器。当您单击图像时，此容器变为可见。这样您就不必将 Flash 嵌入到 jquery/javascript 中，而是嵌入到 html 中。

使用 jquery，它看起来像这样。

```
$(document).ready(function(){

    $('#yourimage').click(function(){
         $('#containerwithgame').show();
    });

}); 
```

这样您就不会使用烦人的弹出式灯箱，但这是个人意见。

# amazon-ec2 - Jetty 没有在 ec2 上接收到来自外部的 http 请求

> ID：11276812
> 
> 赞同：0
> 
> 时间：2012-06-30T18:59:27.340
> 
> 标签：amazon-ec2, jetty

我已经在 ec2 实例上配置了 jetty hightide 8.1 服务器。我的 jetty.xml 文件如下

```
<Configure id="Server" class="org.eclipse.jetty.server.Server">

    <!-- =========================================================== -->
    <!-- Server Thread Pool                                          -->
    <!-- =========================================================== -->
    <Set name="ThreadPool">
      <!-- Default queued blocking threadpool -->
      <New class="org.eclipse.jetty.util.thread.QueuedThreadPool">
        <Set name="minThreads">10</Set>
        <Set name="maxThreads">200</Set>
        <Set name="detailedDump">false</Set>
      </New>
    </Set>

    <!-- =========================================================== -->
    <!-- Set connectors                                              -->
    <!-- =========================================================== -->

    <Call name="addConnector">
      <Arg>
          <New class="org.eclipse.jetty.server.nio.SelectChannelConnector">
            <Set name="host"><Property name="jetty.host" default="0.0.0.0"/></Set>
            <Set name="port"><Property name="jetty.port" default="80"/></Set>
            <Set name="maxIdleTime">300000</Set>
            <Set name="Acceptors">2</Set>
            <Set name="statsOn">false</Set>
            <Set name="confidentialPort">8443</Set>
            <Set name="lowResourcesConnections">20000</Set>
            <Set name="lowResourcesMaxIdleTime">5000</Set>
          </New>
      </Arg>
    </Call>

    <!-- =========================================================== -->
    <!-- Set handler Collection Structure                            -->
    <!-- =========================================================== -->
    <Set name="handler">
      <New id="Handlers" class="org.eclipse.jetty.server.handler.HandlerCollection">
        <Set name="handlers">
         <Array type="org.eclipse.jetty.server.Handler">
           <Item>
             <New id="Contexts" class="org.eclipse.jetty.server.handler.ContextHandlerCollection"/>
           </Item>
           <Item>
             <New id="DefaultHandler" class="org.eclipse.jetty.server.handler.DefaultHandler"/>
           </Item>
                   <Item>
                         <New id="RequestLog" class="org.eclipse.jetty.server.handler.RequestLogHandler"/>
                   </Item>
         </Array>
        </Set>
      </New>
    </Set>

        <Call name="addBean">
      <Arg>
        <New id="DeploymentManager" class="org.eclipse.jetty.deploy.DeploymentManager">
          <Set name="contexts">
            <Ref id="Contexts" />
          </Set>
          <Call name="setContextAttribute">
            <Arg>org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern</Arg>
            <Arg>.*/servlet-api-[^/]*\.jar$</Arg>
          </Call>

          <!-- Add a customize step to the deployment lifecycle -->
          <!-- uncomment and replace DebugBinding with your extended AppLifeCycle.Binding class
          <Call name="insertLifeCycleNode">
            <Arg>deployed</Arg>
            <Arg>starting</Arg>
            <Arg>customise</Arg>
          </Call>
          <Call name="addLifeCycleBinding">
            <Arg>
              <New class="org.eclipse.jetty.deploy.bindings.DebugBinding">
                <Arg>customise</Arg>
              </New>
            </Arg>
          </Call>
          -->

        </New>
      </Arg>
    </Call>

        <Ref id="DeploymentManager">
          <Call name="addAppProvider">
                <Arg>
                  <New class="org.eclipse.jetty.deploy.providers.ContextProvider">
                        <Set name="monitoredDirName"><Property name="jetty.home" default="." />/contexts</Set>
                        <Set name="scanInterval">1</Set>
                  </New>
                </Arg>
          </Call>
        </Ref>

        <Ref id="RequestLog">
          <Set name="requestLog">
                <New id="RequestLogImpl" class="org.eclipse.jetty.server.NCSARequestLog">
                  <Arg><SystemProperty name="jetty.logs" default="./logs"/>/yyyy_mm_dd.tutorial.log</Arg>
                  <Set name="retainDays">90</Set>
                  <Set name="append">true</Set>
                  <Set name="extended">false</Set>
                  <Set name="LogTimeZone">GMT</Set>
                </New>
          </Set>
        </Ref>
    <!-- =========================================================== -->
    <!-- extra options                                               -->
    <!-- =========================================================== -->
    <Set name="stopAtShutdown">true</Set>
    <Set name="sendServerVersion">true</Set>
    <Set name="sendDateHeader">true</Set>
    <Set name="gracefulShutdown">1000</Set>
    <Set name="dumpAfterStart">false</Set>
    <Set name="dumpBeforeStop">false</Set>

</Configure> 
```

在 /contexts 文件夹中，我创建了一个文件 mydomain.xml，如下所示

```
<Configure class="org.eclipse.jetty.webapp.WebAppContext">

  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <!-- Required minimal context configuration :                        -->
  <!--  + contextPath                                                  -->
  <!--  + war OR resourceBase                                          -->
  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <Set name="contextPath">/</Set>
  <Set name="resourceBase"><SystemProperty name="jetty.home" default="."/>/webapps/sampleapp/</Set>

  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <!-- Optional context configuration                                  -->
  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <Set name="extractWAR">true</Set>
  <Set name="copyWebDir">false</Set>

  <!-- virtual hosts -->
  <Set name="virtualHosts">
    <Array type="String">
      <Item>www.mydomain.com</Item>
      <Item>localhost</Item>
      <Item>127.0.0.1</Item>
    </Array>
  </Set>
  <!-- Virtual Hosts-->

  <!-- disable cookies
  <Get name="sessionHandler">
     <Get name="sessionManager">
        <Set name="usingCookies" type="boolean">false</Set>
     </Get>
  </Get>
  -->

  <!-- Non standard error page mapping -->
  <!--
  <Get name="errorHandler">
    <Call name="addErrorPage">
      <Arg type="int">500</Arg>
      <Arg type="int">599</Arg>
      <Arg type="String">/dump/errorCodeRangeMapping</Arg>
    </Call>
  </Get>
  -->

  <!-- Add context specific logger
  <Set name="handler">
    <New id="RequestLog" class="org.eclipse.jetty.server.handler.RequestLogHandler">
      <Set name="requestLog">
        <New id="RequestLogImpl" class="org.eclipse.jetty.server.NCSARequestLog">
          <Set name="filename"><Property name="jetty.logs" default="./logs"/>/test-yyyy_mm_dd.request.log</Set>
          <Set name="filenameDateFormat">yyyy_MM_dd</Set>
          <Set name="append">true</Set>
          <Set name="LogTimeZone">GMT</Set>
        </New>
      </Set>
    </New>
  </Set>
  -->

</Configure> 
```

当我从 ec2 实例执行 wget 时，我得到了正确的 index.html 页面。但是，如果我从外部执行此操作或从浏览器访问 www.mydomain.com，我将收到请求超时。我已将码头设置为侦听 http 端口 80，但没有来自外部的请求来到码头。我已经使用 aws 控制台中提供的公共 dns 在我的域注册商中创建了 CNAME 记录。IP 和 dns 已正确解析，但码头没有收到任何请求。我无法理解我的配置中的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T19:17:04.207

对不起，所有配置都是正确的。实际上 tcp 端口 80 没有从 aws 控制台打开。我只是浪费了 2 个小时才意识到这一点。

# jquery - 创建html，追加然后加载

> ID：11276814
> 
> 赞同：0
> 
> 时间：2012-06-30T18:59:44.103
> 
> 标签：jquery, load, append

我想动态创建一个元素，然后将其附加到 DOM 中，然后在其中加载一些内容。我第二次单击按钮时它可以工作，但第一次它不会加载请求。我错过了什么？

```
$('.unfold').click(function(){

    var areaName = 'event-preview';
    var objectDetailsArea = $('#'+areaName); 

    if (objectDetailsArea.length == 0)  { 

        var detailsArea = $("<section/>")
        .attr("id", areaName) 
        .addClass("column-third left");
        $('.content').append(detailsArea)
        loadArea(objectDetailsArea,'THEURL.html');          

    } else {
        loadArea(objectDetailsArea,'THEURL.html');
    }

    function loadArea(divName,pageURL) {
        divName.load(pageURL).hide().fadeIn();      
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:03:56.440

因为当您第一次单击时，您将内容加载到不存在的元素`objectDetailsArea`。

```
$('.unfold').click(function() {
    var areaName = 'event-preview';
    var objectDetailsArea = $('#' + areaName);

    if (objectDetailsArea.length == 0) {
        var detailsArea = $("<section/>").attr("id", areaName)
            .addClass("column-third left");

        $('.content').append(detailsArea)
        loadArea(detailsArea, 'THEURL.html');  // <-- use "detailsArea"
                                               // instead of "objectDetailsArea"
    } else {
        loadArea(objectDetailsArea, 'THEURL.html');
    }

    function loadArea(divName, pageURL) {
        divName.load(pageURL).hide().fadeIn();
    }
});​ 
```

# android - 最终无法执行 HTTP POST 请求

> ID：11276818
> 
> 赞同：0
> 
> 时间：2012-06-30T18:59:50.110
> 
> 标签：android, http, post

我在我的第一个 Android 应用程序上工作，但在尝试发出 HTTP POST 请求和接收响应时遇到了一些很大的问题。这些是几个事实：

1.  我在 AndroidManifest.xml 中有 INTERNET 权限： `<uses-permission android:name="android.permission.INTERNET" />`
2.  我尝试了很多解决方案。使用 URLConnection 或 HttpURLConnection 的解决方案不起作用，因为它们返回空字符串。HttpClient 和 HttpPost 的解决方案在 execute() 上失败 - 我在谷歌上搜索了一个小时，但没有找到解决方法。
3.  有互联网连接**。**但我不知道如何解决我的问题并最终*发送 HTTP POST 请求。*

**upd：**例如，这段代码使我的程序崩溃：

```
public static APIResponse getResponse(String action, Map<String, String> params) throws IOException {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://google.com");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("id", "12345"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
    return null;
} 
```

**upd 2：**它适用于我的手机，但不适用于模拟器！如何修复模拟器上的这种行为？

**更新 3：已**修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:49:36.690

查看[HTTP Post 的示例](http://www.vogella.com/articles/ApacheHttpClient/article.html#example_post)

您还应该使用[fiddler2](http://fiddler2.org)来帮助调试您的 HTTP 消息。

另请注意，您没有正确捕获所有异常......您可以在末尾添加通用 catch 语句以防止您的应用程序崩溃并帮助您找出问题所在。可能是超时或类似情况。

# javascript - 让 JavaScript Math.sqrt() 打印更多数字

> ID：11276819
> 
> 赞同：2
> 
> 时间：2012-06-30T18:59:54.973
> 
> 标签：javascript, math.sqrt

如果我在我的 HTML 页面上书写`document.write(Math.sqrt(2))`，我会得到`1.4142135623730951`.

有什么方法可以让方法输出多于 16 位小数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T19:06:57.077

不，那里没有。Javascript 中的数学运算是使用 64 位浮点值执行的，16 位的精度正好在它们可以准确表示的极限附近。

要获得更多位数的结果，您需要使用任意精度的数学库。不过，对于支持平方根的 Javascript，我不知道其中的任何一种——我能够找到的一种副手（Big.js）只支持加法、减法和比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T19:09:08.120

您可以使用[`toPrecision`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toPrecision). 但是，ECMA 只要求最高 21 位有效数字的精度：

```
console.log(Math.sqrt(2).toPrecision(21)) 
```

但请记住，计算机上实际值的精度有一些限制（请参阅[黄昏的回答](https://stackoverflow.com/a/11276874/1139697)）。

也可以看看：

*   [`toFixed`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toFixed)
*   [`toExponential`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toExponential)

# mysql - 如何在VB2010中使用MySQL命令

> ID：11276827
> 
> 赞同：0
> 
> 时间：2012-06-30T19:01:18.500
> 
> 标签：mysql, vb.net

我有一个按钮，我希望在其中执行这个**MySQL 命令**：**“update ix.masterlist set DIVISION = replace(DIVISION,'01','HRD')”**

我该怎么做呢？

这就是我的代码中的内容，但它没有做任何事情。

```
 Try
        Dim cmd As MySqlCommand = New MySqlCommand
        Dim strsql As String
        strsql = "update ix.masterlist set DIVISION = replace(DIVISION,'01','HRD')"
        cmd.CommandText = strsql
        dataAdap.SelectCommand = cmd
        cmd.ExecuteNonQuery()
    Catch ex As Exception
        MsgBox("Repclaced the Records")
    End Try 
```

# codeigniter - $this->load->model() 在 CodeIgniter 中不起作用

> ID：11276828
> 
> 赞同：4
> 
> 时间：2012-06-30T19:01:28.643
> 
> 标签：codeigniter, model

我正在使用 CodeIgniter 2.1.2，这就是我现在的情况。我有一个名为 math.php 的模型`C:\wamp\www\cr8v\application\models`。我正在尝试将其加载到我的控制器中，`C:\wamp\www\cr8v\application\controllers\site.php`但出现此错误：

> 找不到您指定的模型：math_model

以下是 的内容`math.php`：

```
 <?php
    class Math_model extends CI_Model(){
        public function add(){
            return 1+1;
        }
    }
 ?> 
```

这是我的内容`site.php`：

```
<?php
    class Site extends CI_Controller{
        public function index(){
            $this->addstuff();
        }

        public function addstuff(){
            $this->load->model("math_model");
            echo $this->math->add();
        }
    }  
?> 
```

我在 YouTube 的教程中遵循了这一点。然而，它并没有给我我想要的输出。我试过用谷歌搜索它并阅读其他相关问题，但是这些信息还不够。

我刚刚读过[这篇文章。](http://stackoverflow.com/q/8074368)

现在我有以下错误：

```
( ! ) Parse error: syntax error, unexpected '(', expecting '{' in C:\wamp\www\cr8v\application\models\math_model.php on line 2
Call Stack
#   Time    Memory  Function    Location
1   0.0036  148768  {main}( )   ..\index.php:0
2   0.0062  185072  require_once( 'C:\wamp\www\cr8v\system\core\CodeIgniter.php' )  ..\index.php:202
3   0.0561  784312  call_user_func_array ( )    ..\CodeIgniter.php:359
4   0.0561  784360  Site->index( )  ..\CodeIgniter.php:359
5   0.0561  784376  Site->addstuff( )   ..\site.php:4
6   0.0561  784504  CI_Loader->model( ) ..\site.php:8 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-30T19:07:59.720

所有地方的名称都必须相同：

这里：

```
class Math_model extends CI_Model {
   // your model
} 
```

这里：

```
$this->load->model("math_model"); 
```

使用时：

```
$this->math_model->add(); 
```

并且：在您的文件系统中。所以重命名`math.php`为`math_model.php`它会起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T19:08:41.553

文件名应该是 math_model.php，你应该这样称呼它：

```
echo $this->math_model->add(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-27T12:19:16.027

文件名和型号名应该相同试试这个

```
class Math_model extends CI_Model {
   // your code
} 
```

并且文件名应该是 Math_model.php

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T19:19:46.767

这个问题已经得到了真正的回答，问题是这样的：

```
 <?php
    class Math_model extends CI_Model(){
        //so on
        } 
 ?> 
```

..它是声明类后的开闭括号..它应该是：

```
 <?php
    class Math_model extends CI_Model{
        //so on
        } 
 ?> 
```

非常感谢那些回复的人

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-19T06:23:05.367

好吧，应该始终注意，函数名称不应与控制器或模型名称重复，如下所示；

```
<?php
  class Abc extends CI_Controller{

public function abc(){} // this confused CI in loading   

} 
```

这可能对刚接触 CI 的开发人员有所帮助，

# python - 交换不适用于 Python 中的对象属性？

> ID：11276831
> 
> 赞同：1
> 
> 时间：2012-06-30T19:01:41.590
> 
> 标签：python

我写的堆排序代码如下：

有趣的是

```
self.first, self.last = self.last, self.first 
```

不交换列表头部和尾部的两个值`self.list`。

为什么？

```
#heapsort
import pdb
class heap(object):
    def __init__(self, list):
        super(heap, self).__init__()
        self.list = list
        self.heapify()
        if self.list:
            self.first = self.list[0]
            self.last = self.list[len(self.list)-1]
    def length(self):
        return len(self.list)
    def heap_node(self,i):
        large_i = i
        if 2*i+1<self.length() and self.list[2*i+1]>self.list[i]:
            large_i = 2*i+1
        if 2*i+2<self.length() and self.list[2*i+2]>self.list[large_i]:
            large_i = 2*i+2
        if large_i!=i:
            self.list[large_i], self.list[i] = self.list[i], self.list[large_i]
            self.heap_node(large_i)
    def heapify(self):
            for i in range(self.length()/2,0,-1):
                j=i-1
                self.heap_node(j)
    def sort(self):
        # pdb.set_trace()
        if not self.list:
            return []
        else:
            # self.list[0], self.list[len(self.list)-1] = self.list[len(self.list)-1], self.list[0]
            self.first, self.last = self.last, self.first 
            return heap(self.list[0:(self.length()-1)]).sort() + [self.list[len(self.list)-1]]

h=heap([1,3,2,5,4])
print h.list
print h.sort() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T19:07:03.067

`self.first`和`self.last`只是 和 中包含的数据的`self.list[0]`副本`self.list[-1]`。您需要直接分配给这些值：

```
self.data[0], self.data[-1] = self.data[-1], self.data[0] 
```

使用负数组索引会导致 Python 从末尾查看列表。另外，我建议使用诸如`data`代替的名称`list`来减少隐藏内置名称的机会`list`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T19:06:02.073

它应该是 `self.list[0], self.list[-1] = self.list[-1], self.list[0]`

`self.first`并且`self.last`只是包含 的第一个和最后一个值的变量`self.list`，更改它们不会改变`self.list`

# font-face - 在 Shopify 商店中使用 Font Awesome 库

> ID：11276833
> 
> 赞同：5
> 
> 时间：2012-06-30T19:01:48.913
> 
> 标签：font-face, shopify, font-awesome

我正在尝试使用 Font Awesome：

[http://fortawesome.github.com/Font-Awesome/](http://fortawesome.github.com/Font-Awesome/)

我在几个 Rails 项目中使用这些字体图标没有问题，但由于某种原因，当我尝试在 Shopify 商店中使用它们时，它们不会被渲染。

我正在使用另一个@font-face，没有任何困难，但由于某种原因，这个@font-face 没有呈现。

在资产/我有：

```
fontawesome-webfont.eot
fontawesome-webfont.svg
fontawesome-webfont.ttf
fontawesome-webfont.woff 
```

我用@font-face 加载它们，就像我用另一个可以正常工作的字体一样。在我的 stylesheet.css 中，它位于 assets/

```
@font-face {
  font-family: "FontAwesome";
  src: url('fontawesome-webfont.eot');
  src: url('fontawesome-webfont.eot?#iefix') format('eot'), 
    url('fontawesome-webfont.woff') format('woff'), 
    url('fontawesome-webfont.ttf') format('truetype'), 
    url('fontawesome-webfont.svg#FontAwesome') format('svg');
      font-weight: normal;
      font-style: normal;
  } 
```

但是当我尝试使用图标时，它们似乎无法加载。知道为什么这不适用于 Shopify 吗？我觉得我错过了一些小东西，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-02-17T09:19:19.407

最简单的解决方案是将其附加到 theme.liquid 的标题

```
<!-- Font-Awesome ================================================== -->
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"> 
```

无需额外上传。无需安装。没有麻烦。完毕。

谢谢 MaxCDN :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T19:39:17.000

您将需要在 CSS 中使用流动资产 URL 帮助程序。有关资产 URL 帮助程序的更多文档可以在这里找到[https://shopify.dev/docs/themes/liquid/reference/filters/url-filters#asset_url](https://shopify.dev/docs/themes/liquid/reference/filters/url-filters#asset_url)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-08T20:56:51.823

这里的帖子有点过时了。我仍然需要进行一些故障排除。

我采用了 CDN 方法，并`<link />`在我的脑海中包含了一个标签`/layout/theme.liquid`：

```
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" integrity="sha256-h20CPZ0QyXlBuAw7A+KluUYx/3pK+c7lYEpqLTlxjYQ=" crossorigin="anonymous" /> 
```

我从这个网站获得了 CDN 链接：[https ://cdnjs.com/libraries/font-awesome](https://cdnjs.com/libraries/font-awesome)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-24T23:01:57.400

您必须在代码中删除`#iefix`和。这是正确的代码：`#FontAwesome``@font-face`

```
@font-face {
font-family: "FontAwesome";
src: url('fontawesome-webfont.eot');
src: url('fontawesome-webfont.eot?') format('eot'), url('fontawesome-webfont.woff') format('woff'), url('fontawesome-webfont.ttf') format('truetype'), url('fontawesome-webfont.svg') format('svg');
font-weight: normal;
font-style: normal;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-03T09:45:17.580

```
theme.liquid

  Before the head tag </head> 
```

```
 font-awesome.css
    @font-face {
      font-family: 'FontAwesome';
      src: url('fontawesome-webfont.eot');
      /* src: url('/fontawesome-webfont.eot?#iefix&v=4.7.0') format('embedded-opentype'), url('../fonts/fontawesome-webfont.woff2?v=4.7.0') format('woff2'), url('../fonts/fontawesome-webfont.woff?v=4.7.0') format('woff'), url('../fonts/fontawesome-webfont.ttf?v=4.7.0') format('truetype'), url('../fonts/fontawesome-webfont.svg?v=4.7.0#fontawesomeregular') format('svg');
      */ font-weight: normal;
      font-style: normal;
```

```
 {{ 'font-awesome'| stylesheet_tag }} 
        <script src="https://use.fontawesome.com/46b6d6c6a9.js"></script>
    <script src="{{ 'fontawesome.min.js' | asset_url }}"></script>

        </head>

     any where into body section  use the font icon 

    <div class="mb-2 col-2"> <span class="fa fa-reddit social"></span> </div>
                            <div class="mb-2 col-2"> <span class="fa fa-facebook social"></span> </div> 
```

# javascript - 摆脱 javascript 回调所需的嵌套

> ID：11276837
> 
> 赞同：0
> 
> 时间：2012-06-30T19:02:26.517
> 
> 标签：javascript

我有一些javascript函数通过网络执行异步请求并通过回调“返回”数据。这是我使用它时的样子：

```
RemoteQuery(server,query,function(ret) {
  // do something with ret
}) 
```

问题是，如果我连续有几个查询，代码就会变得非常嵌套并且难以管理。由于我依赖于作用域变量，因此我也无法将这些函数中的每一个都拆分为单独的顶级函数。这是一个玩具示例：

```
RemoteQuery(server,query1,function(ret) {
      var x = ret[5]
      RemoteQuery(server,query2,function(ret) {
          var y = ret[3]
          if (x + y > 10) {
              RemoteQuery(server,query2,function(ret) {
                  // do more stuff
              })
          }      
      })
}) 
```

显然，如果我有超过 2 或 3 个查询，它就会开始变得丑陋，而且我可能还有更多！

理想情况下，我想在没有所有嵌套的情况下表示上述内容，例如

```
ret = RemoteQuery(server,query1)
var x = ret[5]
ret = RemoteQuery(server,query2)
var y = ret[3]
if (x + y > 10) {
    ret =RemoteQuery(server,query2)
    // do more stuff
} 
```

但是我唯一想到的可能是解析javascript，识别具有回调的函数，以正确的形式重新编写它们，然后进行eval，但这似乎非常复杂，并且会使调试变得非常困难。

有没有更好的机制来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:19:11.017

这样做的“正确”方法是为它们编写函数声明并避免依赖作用域变量（因此将它们传递给每个函数）。就像是：

```
var myFunc1 = function(x, ret1) { 
  RemoteQuery(server, query, function(ret2) { 
    var y = ret[3];
    myFunc2(x, y, ret2);
  });
};

var myFunc2 = function(x, y, ret) { /* do more stuff */ };

RemoteQuery(server, query, function(ret1) {
  var x = ret[5];
  myFunc1(x, ret1);
}); 
```

由于您必须异步调用这些 RemoteQuery(ies)，因此无法真正执行您在问题中建议的解决方案。使用该`Deferred`对象可能会解决问题，但我认为您仍然必须重组您的函数（因为您的目标是避免嵌套）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T19:13:34.887

如果您愿意同时使用[JQuery](http://api.jquery.com/category/deferred-object/)和[Dojo](http://dojotoolkit.org/reference-guide/1.7/dojo/Deferred.html)框架（我相信其他人也有它！）包含一个延迟对象，这将是一个不错的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T19:24:44.723

一系列链式函数怎么样？

```
function R1 (server, query, callback)
{
    RemoteQuery(server, query, function(ret) {
        // process ret
        if (x + y > 10)
          callback();
    }
}

function R2 (server, query, callback)
{    
    RemoteQuery(server, query, function(ret) {
        // process ret
        callback();
    }
}

function R3 (server, query, callback)
{
    RemoteQuery(server, query, function(ret) {
        // process ret
        callback();
    }
}

var functions = [R1, R2, R3]

function callAll(a, server, query)
{
    var callNext = function(callback, i)
    {
        if (i < a.length)
            a[i](server, query, function() { callback(callback, i + 1); });
    }
    callNext(callNext, 0);
}

callAll(functions, 'server', 'query'); 
```

# iphone - SplitView 控制器无法从 Master 传递到 Detail

> ID：11276842
> 
> 赞同：0
> 
> 时间：2012-06-30T19:02:45.303
> 
> 标签：iphone, xcode, ipad, uisplitviewcontroller, master-detail

我正在尝试将我的 iPad 应用程序从使用标签栏控制器作为其根视图转换为使用拆分视图控制器。我在 AppDelegate.h 中的代码是：

```
@class RootViewiPad;
@class WebViewController2;
@interface AppDelegate : NSObject <UIApplicationDelegate, UISplitViewControllerDelegate> {
UIWindow *window;

UISplitViewController *splitViewController;

}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UISplitViewController *splitViewController;
@end 
```

.m 是：

```
#import "AppDelegate.h"
#import "WebViewController2.h"
@implementation AppDelegate

@synthesize window;
@synthesize splitViewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    self.window.rootViewController = self.splitViewController;
    [self.window makeKeyAndVisible];

return YES;
} 
```

我使用 IB 来设置所有这些，并在 MainWindow 中添加了一个 SplitViewController，并将 SplitViewController 的 AppDelegate Connection 连接到我添加的 SplitViewController。在 SplitViewController 的导航控制器下，我将根视图设置为 RootViewiPad（解析博客并显示文章的 TableView），然后将其他视图控制器类和 NIB 设置为 WebViewController2，这是我希望文章显示一次的地方他们被点击。当我运行应用程序时，它会编译，我可以看到我在 IB 中构建的 WebViewController2，当我旋转时，左侧是我创建的 TableView。但是，我不知道如何让它在 WebViewController2 中加载 URL。我尝试过的一切要么什么都不做，要么只是将它推到控制器的主控端。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    WebViewController2 *detailViewController = 
    self.webViewController2;

    detailViewController.webView.scalesPageToFit = NO;
    RSSEntry *entry = [_allEntries objectAtIndex:indexPath.row];

    [detailViewController.webView loadHTMLString:entry.articleImage baseURL:[NSURL URLWithString:nil]];  

}

} 
```

有什么建议么？

# android - 如何以列表视图和表格格式从数据库中获取多个表格内容

> ID：11276843
> 
> 赞同：0
> 
> 时间：2012-06-30T19:02:48.477
> 
> 标签：android, android-widget

我的数据库中有两张表，一张包含用户名和密码等内容，另一张包含他们的交易。当用户登录我的应用程序时，我应该能够以表格格式显示他的所有交易。

我想知道如何以表格格式使用列表视图，并一次显示所有交易。

```
table Users(id  integer primary key,username text,password text,fullname text,age integer);
table userdetails(cid references useres(Id),withdraw int,deposit int,balance int); 
```

当用户登录时，我想在列表视图中显示他的所有交易并在他注销时清除列表，我该怎么办？

# macos - 用于自动打开目录 (mac os x) 和创建 m3u 播放列表的脚本

> ID：11276846
> 
> 赞同：2
> 
> 时间：2012-06-30T19:03:03.843
> 
> 标签：macos, bash, itunes

想象一下，您有一些包含`mp3`文件和子目录的目录，也包含`mp3`文件，例如：

```
/music/band1/
/music/band2/
/music/band2/dir1/
/music/band2/dir2/
/music/band3/dir1/
/music/band3/dir2/
/music/band4/
... 
```

我想`.m3u`在每个包含文件的目录中创建一个`mp3`文件 - 例如：

```
/music/band1/band1.m3u
/music/band2/band2.m3u
/music/band2/dir1/dir1.m3u
/music/band2/dir2/dir2.m3u
/music/band3/dir1/dir1.m3u
/music/band3/dir2/dir2.m3u
/music/band4/band4.m3u 
```

文件的名称`.m3u`将是在其中`.m3u`创建的目录名称。（这只是一个示例目录结构。）

我希望很清楚:)

到目前为止，我有这个`m3u`从文件生成文件`*.mp3`，但只在实际目录中，并按目录命名。

```
#!/bin/bash\
ls | grep -i mp3 > filelist.txt
mv filelist.txt filelist.m3u
FOLDERNAME=${PWD##*/}
echo $FOLDERNAME
mv filelist.m3u $FOLDERNAME.m3u 
```

应该添加什么让它递归地查看 的每个子目录`/music`，如果有另一个子子目录，也看那里？那么，`m3u`在各个子目录下执行制作脚本呢？

谢谢您的帮助！:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T21:32:17.457

这应该为您处理所有事情（不需要脚本）。

```
find . -name '*.mp3' -execdir bash -c 'file="{}"; printf "%s\n" "${file##*/}" >> "${PWD##*/}.m3u"' \; 
```

# javascript - 如何在javascript中创建一个在30秒后触发事件的计时器？

> ID：11276847
> 
> 赞同：0
> 
> 时间：2012-06-30T19:03:14.723
> 
> 标签：javascript

我正在开发一个模块，其中需要显示一个只显示秒的计时器。计时器必须从 30 开始并不断递减到 0；然后触发一些动作并再次从 30 开始。我怎样才能在 javascript 中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T19:05:34.320

你去吧:)

```
var timer = 30;
function decrementAfter1Second(){
    setTimeout(function(){
       timer--;
       if(timer==0){
          doWhateverYouWantAfter30Seconds();
          timer = 30;
       }
       decrementAfter1Second();
    }, 1000);
}
decrementAfter1Second(); 
```

现在下次你想在 javascript 中做某事时，不要懒惰，先阅读一些有关该语言的内容；）因为现在我假设你要么不知道如何编程，要么不知道如何使用谷歌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T19:05:02.627

您可以使用 setTimeout 和 clearTimeout。每 1 秒触发一次超时，然后在 seconds == 0 时调用 clearTimeout。

[您可以在此处](http://www.w3schools.com/js/js_timing.asp)找到这两个函数的示例。

# node.js - 将节点升级到 v0.8 并开始收到 sys/util 错误

> ID：11276848
> 
> 赞同：3
> 
> 时间：2012-06-30T19:03:25.467
> 
> 标签：node.js

我从节点 v0.6.12 升级到 0.80 并开始收到以下错误 - 我已从导入中删除 sys 模块，但仍然收到错误。任何有用的提示都会有所帮助。我也没有起诉手写笔。

```
path.exists is now called `fs.exists`.

sys.js:1

throw new Error(

Error: The "sys" module is now called "util".
at sys.js:1:69
at NativeModule.compile (node.js:602:5)
at Function.NativeModule.require (node.js:570:18)
at Function.Module._load (module.js:297:25)
at Module.require (module.js:362:17)
at require (module.js:378:17)
at Object.<anonymous> (/node/node_modules/stylus/lib/token.js:12:15)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T19:06:48.037

升级到节点 v0.8.1。它会解决你的问题

# redirect - JQuerymobile 延迟在 pageshow 上重定向

> ID：11276850
> 
> 赞同：1
> 
> 时间：2012-06-30T19:03:55.380
> 
> 标签：redirect, jquery-mobile, delay

我正在开发一个有多个页面的 JQuerymobile 网站。如果显示其中一个页面（id="shown"），我希望在延迟 6 秒后重定向到另一个页面（id=#redirected"）。

在我的代码中，注释行适用于此，但问题是如果用户同时更改到另一个 sup 页面，它甚至会重定向到 #redirected 页面。所以我需要的是这里的“如果没有显示其他页面”的东西。

我也尝试过使用 JQuery“changePage”（这对处理转换等很有帮助），但我不知道如何在这里实现延迟。

请看我的代码：

```
 $("#shown").bind("pageshow", function(e) {
    //window.setTimeout('window.location="#redirected"; ',6000);
    $.mobile.changePage("#fertig", { reverse: "false"}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T04:56:02.317

我为你做了一个工作 jsfiddle：http: [//jsfiddle.net/zUZMx/](http://jsfiddle.net/zUZMx/)

使用 jQuery 移动多页模板，其中包含 id 为“一”、“二”和“三”的三个页面。当导航到二时，它会启动 6 秒的超时，之后它会检查活动页面是否为“二”，如果是，则继续使用移动 changePage 将用户重定向到三（因此您可以充分利用转换）。

使用的Javascript：

```
$(document).delegate("#two", "pageshow", function(event) {
setTimeout(function() {
   if($.mobile.activePage.attr("id") == "two") {
        $.mobile.changePage("#three", {
            transition: "slide"
        });
    }
}, 6000);});​ 
```

如果我正确理解您的情况，“二”将更改为“显示”，“三”将更改为“重定向”。

# mysql - RoR：不能在 postgres 中更改_column，在 MySQL 中很好（用于开发的 MySQL，Heroku 上的 Postgres）

> ID：11276855
> 
> 赞同：1
> 
> 时间：2012-06-30T19:04:37.773
> 
> 标签：mysql, ruby-on-rails, ruby, postgresql, activerecord

我有一个名为“奖品”的专栏：

```
create_table :contests do |t|
  t.text :prize 
```

我最近意识到这将始终是一个整数，我想设置一个默认值：

```
def change
  change_column :contests, :prize, :integer, :default => 200 
```

这在我使用 MySQL DB 的本地机器上运行良好。但是，当我推送到我的生产站点（托管在 Heroku 上，它为我提供了 Postgres DB）时，我收到以下错误：

```
PGError: ERROR:  column "prize" cannot be cast to type "pg_catalog.int4"
: ALTER TABLE "contests" ALTER COLUMN "prize" TYPE integer 
```

在这篇文章中：[http](http://www.postgresonline.com/periodical.php?i_id=3) ://www.postgresonline.com/periodical.php?i_id=3他们讨论了使用 USING 来解决这个问题。但我不知道我该怎么做，以及这是否适合我正在尝试做的事情。

任何解决这个问题的见解都将非常感激。

谢谢！林戈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T19:21:01.643

首先，您应该在两种环境中使用相同的数据库来防止这种意外。

要在迁移中运行原始 sql，请参阅此示例[http://guides.rubyonrails.org/migrations.html#using-the-up-down-methods](http://guides.rubyonrails.org/migrations.html#using-the-up-down-methods)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T19:24:01.703

我认为您必须手动完成：

```
def up
    connection.execute(%q{
        alter table contests
        alter column prize type integer using cast(prize as integer),
        alter column price set default 200
    })
end 
```

如果您想在 MySQL 和 PostgreSQL 中运行相同的迁移，那么：

```
def up
    case ActiveRecord::Base.connection
    when ActiveRecord::ConnectionAdapters::PostgreSQLAdapter
        connection.execute(%q{
            alter table contests
            alter column prize type integer using cast(prize as integer),
            alter column price set default 200
        })
    when ActiveRecord::ConnectionAdapters::MySQLAdapter
        # MySQL version...
    end
end 
```

一旦你解决了这个问题，你的下一个任务就是将你的开发环境切换到 PostgreSQL，这样你就可以开始修复所有其他的小问题（例如 GROUP BY 问题、区分大小写的 LIKE、列截断行为……）你会遇到的。

# visual-studio - 我的 Visual Studio 程序是“版权所有 © Hewlett-Packard Company”

> ID：11276859
> 
> 赞同：8
> 
> 时间：2012-06-30T19:05:02.423
> 
> 标签：visual-studio

我有一个在 Visual Studio 中制作的 C# 程序。当我在资源管理器中右键单击我的程序可执行文件并单击`Properties>Details`它时，它会显示“版权所有 © Hewlett-Packard Company”。为了排除故障，我创建了一个空的控制台应用程序，它具有相同的版权信息。

有谁知道如何解决这一问题？我已经尝试了一些关于 regedit 的教程，但它们没有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T14:56:17.473

查看项目属性中的“[装配信息”对话框](http://msdn.microsoft.com/en-us/library/1h52t681(v=vs.100).aspx)。

在解决方案资源管理器中，您可以右键单击您的项目并选择属性。装配信息按钮位于应用程序选项卡中。

![装配信息对话框](../Images/38c1844d82db39751d3ba6325ad54892.png)

这个我没试过，但是要更改默认值，使用regedit来修改 `HKLM\Software\Microsoft\Windows NT\CurrentVersion\RegisteredOrganization`

`HKLM\Software\Wow6432Node\Microsoft\Windows NT\CurrentVersion\RegisteredOrganization`（x64系统） ![注册机构](../Images/f444e62fc645e743650f1a594f6e7f90.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-01-28T07:54:56.597

@Louis 的答案是正确的。我只是发布这个来添加一些背景信息，并发泄我对惠普制造这种愚蠢情况的挫败感。

如果您购买了预装了 Windows 的惠普 PC（这是典型的，除非您在擦除硬盘并安装预配置磁盘映像的公司的 IT 部门），那么惠普愚蠢地安装了 Windows以他们的名字作为所有者和拥有组织。

这里有一些链接。我很惊讶没有更多沮丧的客户抱怨这一点。

[https://www.besttechie.com/forums/topic/11774-change-the-name-of-the-registered-owner-on-an-oem-machine/](https://www.besttechie.com/forums/topic/11774-change-the-name-of-the-registered-owner-on-an-oem-machine/)

[https://www.groovypost.com/howto/howto/change-the-registered-owner-and-company-name-in-windows/](https://www.groovypost.com/howto/howto/change-the-registered-owner-and-company-name-in-windows/) - 查看评论

[https://social.msdn.microsoft.com/Forums/sqlserver/en-US/12fdb09b-472b-4634-991c-670e5f775365/upon-new-project-hewlettpackard-is-always-placed-in-the-assembly-公司名称字段？论坛=visualstudiogeneral](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/12fdb09b-472b-4634-991c-670e5f775365/upon-new-project-hewlettpackard-is-always-placed-in-the-assembly-company-name-field?forum=visualstudiogeneral)

[https://support.hp.com/in-en/document/bph05548](https://support.hp.com/in-en/document/bph05548) - 已过时，不包括 x64 注册表项

所以解决方案是这样做，**只要你给新的惠普机器加电**（否则这个所有者信息会“污染”你安装的所有程序）：

1.  修复 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion 中的 RegisteredOrganization 和 RegisteredOwner 注册表信息

2.  如果它是 x64 机器（现在所有机器都是），还要修复 HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\Windows NT\CurrentVersion 中的 RegisteredOrganization 和 RegisteredOwner 注册表信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T14:50:16.553

我想您正在寻找[AssemblyInfo.Copyright](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.applicationservices.assemblyinfo.copyright.aspx)属性。为了修改它，只需找到 assembly.info 类并适当地修改它。

如果您找不到它，您还可以使用@Louis 建议的[装配信息对话框，它会为您修改文件。](http://msdn.microsoft.com/en-us/library/1h52t681%28v=vs.100%29.aspx)

# java - 无法让 ActiveMQ 出列

> ID：11276862
> 
> 赞同：3
> 
> 时间：2012-06-30T19:05:08.043
> 
> 标签：java, jms, activemq

对此可能有一个愚蠢的简单答案，但我正在尝试使用 ActiveMQ 在生产者和消费者之间传递消息。我将有许多生产者和许多消费者，但我希望每条消息在消费者之间只传递一次。这似乎意味着我不能使用主题，因为它们会将消息传递给所有正在收听的消费者，而我希望只有一个消费者接收每条消息。

我的问题是我能够接收消息，但消息没有出队。所以如果我重新启动我的消费者进程，所有的消息都会被重新处理。 [这个答案](https://stackoverflow.com/questions/1839444/activemq-how-to-dequeue-older-messages)似乎是相关的，但似乎并不适用，因为我无法创建持久的队列消费者，只能创建持久的主题消费者（除非我在 API 文档中遗漏了一些东西）。

我的代码如下。

```
TopicConnectionFactory factory = new ActiveMQConnectionFactory(props.getProperty("mq.url"));
Connection conn  = factory.createConnection();
Session session = conn.createSession(true, Session.CLIENT_ACKNOWLEDGE);
Queue queue = session.createQueue(props.getProperty("mq.source_queue"));
conn.start();
MessageConsumer consumer = session.createConsumer(queue); 
```

然后稍后

```
Message msg = consumer.receive();
msg.acknowledge();
if (!(msg instanceof TextMessage)) continue;
String msgStr = ((TextMessage)msg).getText(); 
```

这是我当前的代码。我尝试过使用 Session.AUTO_ACKNOWLEDGE 而没有使用 msg.acknowledge()。此代码的任何工作排列似乎都可以检索消息，但是当我重新启动消费者时，所有消息都会再次收到，即使它们是在重新启动之前收到的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T20:17:24.860

您将会话创建为事务会话，因此如果您想通知代理所有消息现在都已使用并且不需要重新传递，则需要调用 session.commit。如果您没有将 createSession 的第一个参数设置为 true，则尊重 Ack 模式，否则将忽略它，这是 JMS API 的一个奇怪之处。如果你这样做：

```
ConnectionFactory factory = new ActiveMQConnectionFactory(props.getProperty("mq.url"));
Connection conn  = factory.createConnection();
Session session = conn.createSession(false, Session.CLIENT_ACKNOWLEDGE);
Queue queue = session.createQueue(props.getProperty("mq.source_queue"));
conn.start();
MessageConsumer consumer = session.createConsumer(queue); 
```

那么这将起作用：

```
Message msg = consumer.receive();
msg.acknowledge(); 
```

否则你需要这样做：

```
Message msg = consumer.receive();
session.commit(); 
```

但是请记住，对于单个消息事务来说，客户端确认没有事务是一个更好的选择。

# android - 服务未启动

> ID：11276863
> 
> 赞同：1
> 
> 时间：2012-06-30T19:05:09.980
> 
> 标签：android

对你们来说可能是一个简单的问题，但这是我第一次尝试创建一个应该在我的应用程序关闭时在后台运行的服务。我的问题是：单击“启动服务”按钮时服务没有启动。我没有看到任何吐司，logcat 中也没有任何内容（也没有错误）。提前致谢！

**服务等级**

```
public class MyService extends Service {
private static final String TAG = "MyService";

@Override
public IBinder onBind(Intent intent) {
    return null;
}

@Override
public void onCreate() {
    Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
    Log.d(TAG, "onCreate");

}

@Override
public void onDestroy() {
    Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();
    Log.d(TAG, "onDestroy");

}

@Override
public void onStart(Intent intent, int startid) {
    Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
    Log.d(TAG, "onStart");

}
} 
```

**我的主要活动**

```
public void startServiceClick(View v){

    Log.d("foo", "onClick: starting srvice");
    startService(new Intent(this, MyService.class));
}

public void stopServiceClick(View v){

    Log.d("foo", "onClick: stopping srvice");
    stopService(new Intent(this, MyService.class));
} 
```

**清单 xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="se.johanberntsson.main"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.BLUETOOTH"/>

<application
    android:icon="@drawable/maps1"
    android:label="@string/app_name" >
    <uses-library android:name="com.google.android.maps" />
    <activity
        android:name=".LongitudeActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".DebugActivity" />
    <activity android:name=".GoogleMapsActivity" />

    <service android:enabled="true" android:name=".MyService" />

</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T19:07:26.387

```
this is suggestion as all else looking fine 
```

应该在每个函数中调用 super`super.onCreate();`

可能服务已经启动并尝试停止并重新启动并检查它是否出现吐司......

尝试

```
<service android:enabled="true" android:name="se.johanberntsson.servies.MyService" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-27T16:11:20.470

你可能已经想通了。在您的代码中，您覆盖了几个本机函数，因此您可以添加一个 toast 和一个 catlog 条目。不要忘记添加 super.{无论您调用什么函数}。它的作用是告诉 android 设备在没有覆盖该功能的情况下执行该功能会执行的任何操作，然后执行额外的操作。在您的情况下，如果您调用 oncreate 函数，那么计算机将制作 toast 并添加一个 catlog 条目，但它不会创建服务。

```
@Override    //forget about doing whatever onCreate usually does.
        public void onCreate() {
                        Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();//toast
            Log.d(TAG, "onCreate");//Add message to cat- log
            //note: Service not created because function was overrided
        } 
```

但是，如果您添加 super.onCreate，手机将创建服务，然后它会按照您的指示执行操作。

```
@Override    //forget about doing whatever onCreate usually does.
    public void onCreate() {
        super.onCreate(); // do whatever onCreate usually does. Then do whatever is after me.
        Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();//toast
        Log.d(TAG, "onCreate");//Add message to cat- log

    } 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T19:46:59.460

我将您的服务添加到我的代码中，它对我来说工作正常。请参阅下面的代码并与您的匹配。

活动>>

```
 public class TestActivity extends Activity implements OnClickListener {
   /** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button bt = (Button)findViewById(R.id.button11);
    bt.setOnClickListener(this);
}

public void startServiceClick(View v){

    Log.d("foo", "onClick: starting srvice");
    startService(new Intent(this, MyService.class));
}

public void stopServiceClick(View v){

    Log.d("foo", "onClick: stopping srvice");
    stopService(new Intent(this, MyService.class));
}

@Override
public void onClick(View v) {
    startServiceClick(v);   

} 
```

清单文件>>

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.test"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".TestActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
  <service android:enabled="true" android:name=".MyService" />

</application> 
```

# php - 将 2 个查询合并为 1 个

> ID：11276866
> 
> 赞同：3
> 
> 时间：2012-06-30T19:05:37.640
> 
> 标签：php, mysql

如果可能的话，我希望将两个查询优化为一个。

我的第一个查询搜索歌词的所有作者......然后，对于找到的每个作者，我想找到作者参与的歌词总数......

现在，我正在执行第一个查询，并且对于找到的每一行，我正在启动另一个查询以获取他所涉及的作者的总歌词......所以，如果有 4 个作者，我最终会再启动 4 个查询......在我看来，这是许多疑问。这就是我决定在这里写的原因，这样我就可以获得有关如何优化查询的帮助...

这是我正在执行的查询，以使作者对歌词负责：

```
$sql = "SELECT author.author_id, author.name
    FROM track INNER JOIN lyrics_author ON track.lyrics_id = lyrics_author.lyrics_id
    INNER JOIN author ON lyrics_author.author_id = author.author_id
    WHERE track.track_id = $trackid "; 
```

这是获取作者所写歌词总数的查询：

```
$total = "SELECT lyrics_author.author_id, count(*) as total
    FROM lyrics_author
    WHERE lyrics_author.author_id = $author_id
    GROUP BY lyrics_author.author_id"; 
```

这是代码示例：

```
<?php
$trackid = 5;

$sql = "SELECT author.author_id, author.name
    FROM track INNER JOIN lyrics_author ON track.lyrics_id = lyrics_author.lyrics_id
    INNER JOIN author ON lyrics_author.author_id = author.author_id
    WHERE track.track_id = $trackid ";

$result_author = @ $conn->query($sql);

while ($row_author = $result_author->fetch_assoc()) {
    $author_id = $row_author['author_id'];

    $total = "SELECT lyrics_author.author_id, count(*) as total
        FROM lyrics_author
        WHERE lyrics_author.author_id = $author_id
        GROUP BY lyrics_author.author_id";

    $result_total_lyrics = @ $conn->query($total);
    $t = $result_total_lyrics->fetch_assoc();

    echo $t['total'];

    $result_total_lyrics->free();
}

$result_author->free();
?> 
```

是否可以优化此查询？如果是，如何？有没有链接可以参考一下，学习一下。。。

谢谢马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:17:45.290

```
SELECT
  author.author_id,
  author.name,
  COUNT(DISTINCT more_tracks.lyrics_id) AS total
FROM track
INNER JOIN lyrics_author USING (lyrics_id)
INNER JOIN author USING (author_id)
LEFT JOIN lyrics_author AS more_tracks USING (author_id)
WHERE track.track_id = $trackid
GROUP BY author.author_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T19:33:13.007

这真是令人困惑。当你有一个叫做歌词id的属性时，你为什么要传入一个trackid作为歌词ID？反正

```
Select author.author_id, author.name, Count(*)
inner join
(SELECT lyrics_author.author_id 
FROM lyrics_author 
INNER JOIN tracks ON track.lyrics_id = lyrics_author.lyrics_id 
WHERE track.track_id = $lyricsid"; 
)  as lyricalauthors
inner join lyrics_author on lyrics_author.author_id = lyricalauthors.author_id
On author.author_id = lyricalauthors.author_id
Group By Author.author_id,author.name 
```

我认为 ...

# html - site.css 中的 CSS 无法使用 在asp.net中的布局

> ID：11276867
> 
> 赞同：0
> 
> 时间：2012-06-30T19:05:39.930
> 
> 标签：html, css, asp.net-mvc

我试图得到这个：

![在此处输入图像描述](../Images/fd3ab726cac631a3d7f9c244c90ce4f0.png)

但我得到了这个：

![在此处输入图像描述](../Images/6267d747b681a72169b5d5e7c7f6e183.png)

我的 _Layout.cshtml：

```
<!DOCTYPE html>
<html>
<head> 
    <title>@ViewBag.Title</title> 
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" /> 
    <script src="@Url.Content("~/Scripts/jquery-1.6.2.min.js")" 
type="text/javascript"></script> 
</head>
<body>
 <div id="header"> 
        <div class="title">SPORTS STORE</div> 
     </div> 
     <div id="categories"> 
         @{Html.RenderAction("Menu", "Nav");} 
     </div> 
     <div id="content"> 
        @RenderBody() 
    </div>
</body>
</html> 
```

我的 Menu.cshtml：

```
@model IEnumerable<string> 

@{ 
    Layout = null; 
} 

@Html.ActionLink("Home", "List", "Product") 

@foreach (var link in Model)
{ 
    @Html.RouteLink(link, new
                          {
                              controller = "Product",
                              action = "List",
                              category = link,
                              page = 1
                          }) 
} 
```

我的网站.css：

```
BODY { font-family: Cambria, Georgia, "Times New Roman"; margin: 0; }
DIV#header DIV.title, DIV.item H3, DIV.item H4, DIV.pager A {
    font: bold 1em "Arial Narrow", "Franklin Gothic Medium", Arial;
}
DIV#header { background-color: #444; border-bottom: 2px solid #111; color: White; }
DIV#header DIV.title { font-size: 2em; padding: .6em; }
DIV#content { border-left: 2px solid gray; margin-left: 9em; padding: 1em; }
DIV#categories { float: left; width: 8em; padding: .3em; }

DIV.item { border-top: 1px dotted gray; padding-top: .7em; margin-bottom: .7em; }
DIV.item:first-child { border-top:none; padding-top: 0; }
DIV.item H3 { font-size: 1.3em; margin: 0 0 .25em 0; }
DIV.item H4 { font-size: 1.1em; margin:.4em 0 0 0; }

DIV.pager { text-align:right; border-top: 2px solid silver;
    padding: .5em 0 0 0; margin-top: 1em; }
DIV.pager A { font-size: 1.1em; color: #666; text-decoration: none;
      padding: 0 .4em 0 .4em; }
DIV.pager A:hover { background-color: Silver; }
DIV.pager A.selected { background-color: #353535; color: White; }

DIV#categories A  
{
    font: bold 1.1em "Arial Narrow","Franklin Gothic Medium",Arial; display: block;
    text-decoration: none; padding: .6em; color: Black;
    border-bottom: 1px solid silver;
}
DIV#categories A.selected { background-color: #666; color: White; }
DIV#categories A:hover { background-color: #CCC; }
DIV#categories A.selected:hover { background-color: #666; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T21:25:37.177

此示例来自 ASP.NET MVC 3 PRO 书籍。我已经尝试过了，这对我有用。我建议您参考代码下载或检查您的代码是否正确。

从您在代码中的内容来看，它似乎是正确的，但您可能需要刷新缓存或使用 Firebug 等开发人员工具检查正在呈现的内容。

这是div id=categories在**Firebug中的内容**

```
DIV#categories {
    float: left;
    padding: 0.3em;
    width: 8em;
} 
```

和里面的标签。

```
DIV#categories A {
    border-bottom: 1px solid silver;
    color: Black;
    display: block;
    font: bold 1.1em "Arial Narrow","Franklin Gothic Medium",Arial;
    padding: 0.6em;
    text-decoration: none;
} 
```

# php - PHP debug_backtrace 位掩码使用

> ID：11276870
> 
> 赞同：18
> 
> 时间：2012-06-30T19:06:16.193
> 
> 标签：php, bit-manipulation, stack-trace, bitmask

试图理解 php 手册中的这个条目[`debug_backtrace`](http://php.net/manual/en/function.debug-backtrace.php)。

我不明白他们所说的“这个参数是......的位掩码”是什么意思

我已经对位掩码进行了网络搜索，我的头在旋转，所以我决定我真的不想了解它的细节，而只是想知道我应该如何将选项添加到该功能。

我是否将两个选项都放入

```
debug_backtrace(DEBUG_BACKTRACE_PROVIDE_OBJECT, DEBUG_BACKTRACE_IGNORE_ARGS) 
```

如果我想要两个和一个，如果我只想要那个？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-22T10:21:55.610

请注意，这 2 个常量（DEBUG_BACKTRACE_PROVIDE_OBJECT、DEBUG_BACKTRACE_IGNORE_ARGS）的含义不同。虽然 DEBUG_BACKTRACE_PROVIDE_OBJECT 在存在时提供了一个附加对象，但 DEBUG_BACKTRACE_IGNORE_ARGS 在存在时去除 args。

由于这些常量最常见的用例是减少内存使用，因此内存消耗最少的方法是：

```
debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS); 
```

不是

```
// false friend!
debug_backtrace(DEBUG_BACKTRACE_PROVIDE_OBJECT | DEBUG_BACKTRACE_IGNORE_ARGS); 
```

它会覆盖默认的 DEBUG_BACKTRACE_PROVIDE_OBJECT 并另外忽略 DEBUG_BACKTRACE_IGNORE_ARGS。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-30T19:20:48.953

常量的十进制值为 2^n，二进制值为 (10)^n。例如 - 1、10、100、1000 等（二进制）。

说`a=001, b=010, c=100`：

例如，您可以按位或按位进行操作，`a`并且`b`。这意味着如果 a 或 b 中的同一位“打开”，则每个位都将“打开”。

```
a | b == 011 
```

这是一个位掩码。检查位掩码是否`a`包含

```
bitmask & a != 0 
```

哪个是

```
011 & 001 == 001 != 0 
```

但是，因为 c 不在位掩码中：

```
bitmask & c == 011 & 100 == 0 
```

因此，要在位掩码中同时包含 a 和 b，请使用*二进制或*运算符。

```
debug_backtrace(DEBUG_BACKTRACE_PROVIDE_OBJECT | DEBUG_BACKTRACE_IGNORE_ARGS); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-30T19:10:37.747

这意味着您将选项与按位 OR 运算符组合：`|`。

例如：

```
 debug_backtrace(DEBUG_BACKTRACE_PROVIDE_OBJECT | DEBUG_BACKTRACE_IGNORE_ARGS); 
```

有关位掩码的更多详细信息：[http://en.wikipedia.org/wiki/Mask_(computing)](http://en.wikipedia.org/wiki/Mask_(computing))

# c# - 使用 EF 选择对象及其属性

> ID：11276880
> 
> 赞同：0
> 
> 时间：2012-06-30T19:07:36.520
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我在 EF 4.3.1 中工作，并且在插入方面一切都进行得很好。但现在我正试图将我插入的对象拉回来以显示在我的 MVC3 项目的视图中并遇到问题。

在我的 DAL 中，我有以下方法`Church`从数据库中获取对象：

```
public virtual TEntity GetById(object id)
{
    return _db.Find(id);
} 
```

对象本身如下所示：

```
public class Church
{
    //Basic Properties
    public int Id { get; set; }
    public string Name { get; set; }
    public string Website { get; set; }

    ... (some properties)

    //Church Contacts and Services
    public List<Contact> Contacts { get; set; }
    public List<Service> Services { get; set; }

    ....

} 
```

注意最后两个属性：联系人和服务。每个都是我数据库中的 1:Many 表。不过，它似乎`Find()`没有返回任何内容。它只是将这两个属性设置为空。

![数据库模式，由 CF 实体框架自动生成](../Images/e4f6f0211c42733e3b718c2f07775960.png)

数据库中的实际条目看起来就像我期望的那样。每个教会都有一些与之相关的联系人和服务。然而，它永远不会映射回模型......

有什么想法吗？

**编辑**是的，看起来直到我明确告诉它才加载这些属性。我通过将它添加到我的 ChurchRepository 来修改我的查询（从 GenericRepository 继承）

```
public override Church GetById(object id)
{
    return _db.Include("Contacts").Include("Services").FirstOrDefault(c => c.Id == (int)id);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T19:15:10.257

您应该将导航属性标记为虚拟，或者您也可以在不延迟加载的情况下包含它们，这是最佳实践。

尝试这个

```
db.Churces.Include(entity=>entity.Services).
Include(entity=>entity.Contacts).SingleOrDefault(entity=>entity.Id == id) 
```

您可能必须`System.Data.Entity`为 Include 扩展方法导入命名空间。

# android - 为什么 Android 不发送我的第二个 SSL 请求？

> ID：11276882
> 
> 赞同：2
> 
> 时间：2012-06-30T19:07:43.597
> 
> 标签：android, ssl, android-emulator

我的 Android 应用程序正在使用 SSL 和 GET 请求与网络服务器通信。切换到 API 10 (Gingerbread) 后，SSL 连接工作 - 但仅在应用程序启动后第一次......

第一个请求由主 Activity 发送 - 得到响应后，另一个 Activity 启动并发送多个请求。他们都没有回答。在这两种情况下，请求都是使用在新 AsyncTask 中启动的小 WebService 类发送的。在缩小这个 alas 之后，它实际包含的唯一内容是 URL(-String)。每个活动都启动它自己的此类实例。

这是应该执行 GET 请求的方法。正如很容易看到的那样，我包含了一些代码来避免保持活动 - 并不是我不喜欢它，但在其他答案中建议这样做以避免多个连接出现问题。好吧，在我的情况下它不起作用。

```
public String webGet(String methodName, Map<String, String> params) {
    String getUrl = webServiceUrl + methodName;
    index++;
    final int connectionID = index;

    int i = 0;
    for (Map.Entry<String, String> param : params.entrySet()) {
        if (i == 0) {
            getUrl += "?";
        } else {
            getUrl += "&";
        }

        try {
            getUrl += param.getKey() + "=" + URLEncoder.encode(param.getValue(), "UTF-8");
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        }

        i++;
    }

    String response;
    Log.e("WebGetURL", "["+connectionID+"] " + getUrl);
    URL url;
    try {
        url = new URL(getUrl);
    } catch (MalformedURLException e) {
        Log.e("WebService", "Malformed URL: " + getUrl);
        return null;
    }
    HttpURLConnection urlConnection;
    try {
        Log.e("WebGetResponse", "["+connectionID+"] openConnection()");
        System.setProperty("http.keepAlive", "false");
        if (webServiceSsl) {
            Log.e("WebService", "Using HTTPS");
            urlConnection = (HttpsURLConnection) url.openConnection();
        } else {
            urlConnection = (HttpURLConnection) url.openConnection();
        }
        urlConnection.setUseCaches(false); 
        urlConnection.setRequestProperty("Connection","Keep-Alive"); 
        urlConnection.setDoOutput(false); 
        urlConnection.setDoInput(true); 
        urlConnection.setRequestMethod("GET");
    } catch (IOException e) {
        Log.e("WebService", "I/O exception opening connection: " + e.getMessage());
        e.printStackTrace();
        return null;
    }

    urlConnection.setConnectTimeout(5000);
    urlConnection.setReadTimeout(10000);
    urlConnection.setRequestProperty("Connection", "close");

    try {
        urlConnection.connect();
        Log.e("WebGetResponse", "["+connectionID+"] getInputStream()");
        // This is the last thing I hear from my thread
        BufferedInputStream bin = new BufferedInputStream(urlConnection.getInputStream());
        Log.e("WebGetResponse", "["+connectionID+"] gotInputStream()");
        byte[] contents = new byte[1024];

        int bytesRead=0;
        StringBuilder strFileContents = new StringBuilder();
        Log.e("WebGetResponse", "["+connectionID+"] Waiting for data");
        while((bytesRead = bin.read(contents)) != -1) {
            String add = new String(contents, 0, bytesRead);
            strFileContents.append(add);
        }
        bin.close();
        response = strFileContents.toString();
    } catch (IOException e) {
        Log.e("WebService", "I/O exception reading stream: " + e.getMessage());
        e.printStackTrace();
        return null;
    } finally {
        urlConnection.disconnect();
    }

    Log.e("WebGetResponse", "["+connectionID+"] " + response);
    return response;
} 
```

我一直在尝试搜索 - 我不明白这个问题。实际上我目前无法在非 https 服务器上测试该类，所以我不知道问题是否也出现在 HTTP 中。但是，握手似乎有效，因为第一个请求效果很好。

这是应该启动请求的代码（最终参数是要发送的 GET 内容）：

```
 class ServerDataThread extends AsyncTask<Integer, Integer, String[]> {

        @Override
        protected String[] doInBackground(Integer... attempts) {
            sendActive++;
            int count = attempts.length;
            String[] responses = new String[count];
            for (int i = 0; i < count; i++) {
                responses[i] = server.webGet("collector.php", params);
            }
            return responses;
        }

        protected void onPostExecute(String[] responses) {
            sendActive--;
            for (int i = 0; i < responses.length; i++) {
                if (responses[i] == null) {
                    continue;
                }
                onResponseData(responses[i]);
            }
        }
    }
    new ServerDataThread().execute(0); 
```

谁能帮助我提示我做错了什么？非常感谢！

BurninLeo

# c# - Linq：前瞻条件

> ID：11276885
> 
> 赞同：9
> 
> 时间：2012-06-30T19:08:01.733
> 
> 标签：c#, linq

我有一个清单（简体）

```
[Kind]      [Name]
null        E
null        W
4           T
5           G
6           Q
null        L
null        V
7           K
2           Z
0           F 
```

我需要 {E,L} -> 他们的 Kind==null 和下一个 Kind==null 的项目

假设有一个 ID 是按顺序递增的。

在 Linq 中这种前瞻性是否可行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T19:15:48.240

像这样？

```
void Main()
{
    List<SomeClass> list = new List<SomeClass>() {
        new SomeClass() { Kind = null, Name = "E" },
        new SomeClass() { Kind = null, Name = "W" },
        new SomeClass() { Kind = 4, Name = "T" },
        new SomeClass() { Kind = 5, Name = "G" },
        ...
    };

    var query = list.Where ((s, i) =>
        !s.Kind.HasValue &&
        list.ElementAtOrDefault(i + 1) != null &&
        !list.ElementAt(i + 1).Kind.HasValue);
}

public class SomeClass
{
    public int? Kind { get; set; }
    public string Name { get; set; }
} 
```

编辑：窃取@Jeff Marcado 的解决方案以实现类似于上述使用的扩展方法，但更简洁，不会让您处理索引：

```
public static IEnumerable<TSource> WhereWithLookahead<TSource>(this IEnumerable<TSource> source, Func<TSource, TSource, bool> predicate) where TSource : class
{
    using(var enumerator = source.GetEnumerator())
    {
        if (!enumerator.MoveNext())
        {
            //empty
            yield break;
        }

        var current = enumerator.Current;
        while (enumerator.MoveNext())
        {
            var next = enumerator.Current;

            if(predicate(current, next))
            {
                yield return current;
            }

            current = next;
        }

        if (predicate(current, null))
        {
            yield return current;
        }

    }
}

// Use:
var query2 = list.WhereWithLookahead((current, next) =>
    !current.Kind.HasValue &&
    (next != null) &&
    next.Kind.HasValue); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-01T00:52:49.530

For a functional approach, you can implement a lookahead enumerator like so:

```
IEnumerable<Item> collection = ...;
var lookahead = collection.Zip(collection.Skip(1), Tuple.Create); 
```

The enumerator will iterate through tuples of each item and it's following item. This excludes the last item in the collection. Then it's just a matter of performing the query.

```
var query = collection.Zip(collection.Skip(1), Tuple.Create)
    .Where(tuple => tuple.Item1.Kind == null && tuple.Item2.Kind == null)
    .Select(tuple => tuple.Item1); 
```

Unfortunately this will be very inefficient. You're enumerating the length of the collection twice and can be very expensive.

It would be better to write your own enumerator for this so you only go through the collection in one pass:

```
public static IEnumerable<TResult> LookAhead<TSource, TResult>(
    this IEnumerable<TSource> source,
    Func<TSource, TSource, TResult> selector)
{
    if (source == null) throw new ArugmentNullException("source");
    if (selector == null) throw new ArugmentNullException("selector");

    using (var enumerator = source.GetEnumerator())
    {
        if (!enumerator.MoveNext())
        {
            //empty
            yield break;
        }
        var current = enumerator.Current;
        while (enumerator.MoveNext())
        {
            var next = enumerator.Current;
            yield return selector(current, next);
            current = next;
        }
    }
} 
```

Then the query becomes:

```
var query = collection.LookAhead(Tuple.Create)
    .Where(tuple => tuple.Item1.Kind == null && tuple.Item2.Kind == null)
    .Select(tuple => tuple.Item1); 
```

# lua - 如何使用 SLB（Simple Lua Binder）将 Lua 函数存储到 C++ 中？

> ID：11276887
> 
> 赞同：1
> 
> 时间：2012-06-30T19:08:05.453
> 
> 标签：lua

我需要使用库“Simple Lua Binder”存储一个Lua函数

```
typedef ? TLuaFunction;

class Foo
{
public:
    void SetCallback( TLuaFunction f )
    {
        mCallback = f;
    }

    void ExecuteCallback()
    {
        f();    // Calls Lua function
    }

private:
    TLuaFunction    mCallback;
};

// Manager initialization
SLB::Manager scriptManager;

// SetCallback registration into lua
SLB::Class<Foo>( "Foo", &scriptManager )
    .constructor()
    .set( "SetCallback", &Foo::SetCallback )
    .set( "ExecuteCallback", &Foo::ExecuteCallback )
    ;

char* luaCode = 
    "SLB.using( SLB )\n"
    "o = Foo()\n"
    "o:SetCallback( function()                          \n"
    "                   print( 'Callback executed' )    \n"
    "               end                                 \n"    
    ")                                                  \n"    
    "o:ExecuteCallback()                                \n";    

SLB::Script script( &scriptManager );
script.doString( luaCode );

// The result is
> "Callback executed" 
```

我不知道 SLB 库中是否有可以代替的类型？（见第一行代码）。

或者，如果我必须做不同的事情。

# internet-explorer - 通过命令行更新 Internet Explorer/Chrome 设置

> ID：11276891
> 
> 赞同：1
> 
> 时间：2012-06-30T19:08:25.317
> 
> 标签：internet-explorer, browser, proxy, cmd, pac

我已经配置了我自己的 pac 文件（包含要使用的代理服务器和代理绕过的站点/主机列表）

手动更改不同计算机的所有浏览器设置太麻烦了。在进行一些研究后，我发现使用 Firefox，您可以通过命令行更改代理设置，因为代理设置存储在用户的 Firefox 配置文件中的 prefs.js 文件中。更多信息：[通过命令行设置 firefox 代理](https://stackoverflow.com/questions/843340/firefox-proxy-settings-via-command-line)

是否可以通过命令行更改 IE/Chrome 代理设置，而无需更改注册表，就像使用 Firefox 一样？或者也许改变某种 .ini 文件？

谢谢转发！

# android - 在 Android 中，我如何设计一个类似于附加图像的视图？

> ID：11276893
> 
> 赞同：-1
> 
> 时间：2012-06-30T19:08:29.090
> 
> 标签：android

我是 android 新手，我在附加图像中有一个视图。单击列表项后，我必须打开此视图，但我找不到任何适当的方法来解决此问题，请建议我如何打开像 Image 中的对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T19:19:27.977

检查 android 开发人员中的 PopupWindow 控件，完全符合您的要求。网上有很多关于如何自定义、动画、拥有功能等的教程。它有一个 onCreate 方法，简单来说，它就像一个具有特定边界的 Activity 一样工作。它可以随时随地附加和显示。它实际上非常有用。当您不想使用对话框时，这是最好的选择。

# c# - ASP.NET 站点在 Web 服务器上引发编译错误

> ID：11276894
> 
> 赞同：4
> 
> 时间：2012-06-30T19:08:32.363
> 
> 标签：c#, asp.net, c#-2.0

我正在使用 ASP.NET 2.0 作为 ASP.NET 的激活实例的网络服务器（我无法更改它。我无法控制它。）

我最初是用4.0写的网站，甚至没有想过要问网络服务器是什么版本。到了安装的时候，我意识到错误并改变了目标框架。在与 VS 2010 进行了一些角力之后，它编译得很好。

我把它放了，现在它给了我这个错误：

![错误信息](../Images/acd8bf53c259baa8465868a6990c671e.png)

帐户曾经是一个 .cs 文件，然后我将其放入它自己的项目中，这样我就可以进入一个 DLL，希望它可以作为一个 dll 工作。当涉及到引用帐户的第一件事时，它总是失败。

帐户是针对 .NET 2.0 编译的。

有什么帮助吗？丁：

编辑：可能会改变这一点的另一件重要事情是，该人已经在主文件夹上托管了另一个 ASP.NET 站点。他想在子文件夹中托管此站点。

我读过 ASP.NET 可能不喜欢那样，那可能是问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:29:10.153

检查以下内容：

1.  您的应用程序引用具有 Account 类的程序集；
2.  Web 应用程序“bin”目录中存在的相应程序集 - 您可以引用它，但未在引用属性中指定为“始终复制”。
3.  您构建了它，而不仅仅是放入“App_Code”（据我所知，将代码放入 asp Web 应用程序的 App_Code 中是不好的做法）

此外，您的错误仅出现在“生产”主机上还是在 VS 开发服务器上也重现？

# java - JNLP 字体不工作

> ID：11276895
> 
> 赞同：0
> 
> 时间：2012-06-30T19:08:34.253
> 
> 标签：java, fonts, jnlp, java-web-start

在我的程序中，我使用了一个 ttf 文件作为字体，并且在运行 jar 时，字体可以正常工作，但是当通过 java web start 运行时，字体只能工作一半。我的应用程序是一个搜索引擎，所以当我搜索时，程序使用的字体很好，但是当我单击搜索结果以显示另外 2 个 jframe、一个控制器和一个幻灯片时，几乎就像一个 powerpoint，控制器有字体正确，但幻灯片没有。我觉得这可能是因为控制器正在使用字体，因此幻灯片也不能使用，但是我能做些什么来纠正这种情况，除了复制字体文件并将其用于滑动jframe？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:35:06.507

用户也需要安装字体。很明显的答案...

# android - 缺少列表视图

> ID：11276896
> 
> 赞同：0
> 
> 时间：2012-06-30T19:08:35.633
> 
> 标签：android, xml, listview

我一直试图在网上寻找答案，但一无所获。

[所以这是我的问题：我在这里](http://www.helloandroid.com/tutorials/musicdroid-audio-player-part-i)找到了一个有趣的教程，如何在 android 上开发自己的简单播放器，并开始将该代码集成到我的程序中，但遇到了视图问题。我什至无法理解它出现的原因：我尝试在任何地方插入 ListView，但什么也没发生。所以这是我的代码：

EasyFlippingActivity.java

```
package my.easyflipping;

import java.io.File;
import java.util.ArrayList;
import java.util.List;

import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ViewFlipper;

public class EasyflippingActivity extends ListActivity {

    private ViewFlipper flipper;
    private static final String MEDIA_PATH = new String("/sdcard/");
    private List<String> songs = new ArrayList<String>();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        this.flipper = (ViewFlipper)findViewById(R.id.flipper);
        Button groups;
        (groups = (Button)findViewById(R.id.groups)).setBackgroundDrawable(this.getResources().getDrawable(R.drawable.group));
        Button songs;
        (songs = (Button)findViewById(R.id.songs)).setBackgroundDrawable(this.getResources().getDrawable(R.drawable.songs));
        groups.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                im_going_left();
                flipper.showNext();
                groups_func();
            }
            });
        songs.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                update_song_list();
                im_going_right();
                flipper.showNext();
                songs_func();
            }
        });
    }

    public void update_song_list() {
        File home = new File(MEDIA_PATH);
        if (home.listFiles(new Mp3Filter()).length > 0) {
                for (File file : home.listFiles(new Mp3Filter())) {
                        songs.add(file.getName());
                }

                ArrayAdapter<String> songList = new ArrayAdapter<String>(this,
                                R.layout.song_item, songs);
                setListAdapter(songList);
        }
}

    public void songs_func ()
    {
        Button back;

        back = (Button)findViewById(R.id.back);
        back.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                im_going_left();
                flipper.showPrevious();
                return;

            }
        });
    }

    public void groups_func()
    {
        Button back;

        back = (Button)findViewById(R.id.back);
        back.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                im_going_right();
                flipper.showPrevious();
                return;

            }
        });
    }

    public void im_going_right()
    {
         Animation s_in  = AnimationUtils.loadAnimation(this, R.layout.slideinleft);
         Animation s_out = AnimationUtils.loadAnimation(this, R.layout.slideoutright);
         this.flipper.setInAnimation(s_in);
         this.flipper.setOutAnimation(s_out);
    }

    public void im_going_left()
    {
        Animation s_in  = AnimationUtils.loadAnimation(this, R.layout.slidein);
        Animation s_out = AnimationUtils.loadAnimation(this, R.layout.slideout);
        this.flipper.setInAnimation(s_in);
        this.flipper.setOutAnimation(s_out);
    }
} 
```

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<ViewFlipper xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/flipper"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="80dp"
        android:src="@drawable/phones" />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="400dp" >

        <Button
            android:id="@+id/groups"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="45dp"
            android:text="" />

        <Button
            android:id="@+id/songs"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_marginRight="45dp"
            android:text="" />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/groups"
            android:layout_below="@+id/groups"
            android:src="@drawable/groupstext" />

        <ImageView
            android:id="@+id/imageView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/imageView2"
            android:layout_alignRight="@+id/songs"
            android:src="@drawable/songstext" />
    </RelativeLayout>

  </LinearLayout>

  <LinearLayout android:layout_width="fill_parent"
             android:layout_height="wrap_content" 
             android:orientation="vertical"
             android:padding="20dip"
             android:layout_gravity="top" 
             android:layout_marginTop="50dip">
        <ListView android:id="@+id/list"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:layout_weight="1"
              android:drawSelectorOnTop="false"/>

        <TextView android:id="@+id/empty"
                  android:layout_width="fill_parent"
                  android:layout_height="fill_parent"
                  android:text="No songs found on SD Card."/>
        <Button
            android:id="@+id/back"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="45dp"
            android:text="back" />

  </LinearLayout>

</ViewFlipper> 
```

Mp3Filter.java

```
package my.easyflipping;

import java.io.File;
import java.io.FilenameFilter;

public class Mp3Filter implements FilenameFilter {

    public boolean accept(File arg0, String name) {
        return (name.endsWith(".mp3"));
    }

} 
```

song_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <TextView android:id="@+id/text1" xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/> 
```

和错误日志：

```
06-30 18:54:56.314: D/dalvikvm(189): GC freed 735 objects / 55256 bytes in 70ms
06-30 18:54:56.354: D/AndroidRuntime(189): Shutting down VM
06-30 18:54:56.354: W/dalvikvm(189): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
06-30 18:54:56.354: E/AndroidRuntime(189): Uncaught handler: thread main exiting due to uncaught exception
06-30 18:54:56.364: E/AndroidRuntime(189): java.lang.RuntimeException: Unable to start activity ComponentInfo{my.easyflipping/my.easyflipping.EasyflippingActivity}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
06-30 18:54:56.364: E/AndroidRuntime(189):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
06-30 18:54:56.364: E/AndroidRuntime(189):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
06-30 18:54:56.364: E/AndroidRuntime(189):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
06-30 18:54:56.364: E/AndroidRuntime(189):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
06-30 18:54:56.364: E/AndroidRuntime(189):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-30 18:54:56.364: E/AndroidRuntime(189):  at android.os.Looper.loop(Looper.java:123)
06-30 18:54:56.364: E/AndroidRuntime(189):  at android.app.ActivityThread.main(ActivityThread.java:4363)
06-30 18:54:56.364: E/AndroidRuntime(189):  at java.lang.reflect.Method.invokeNative(Native Method)
06-30 18:54:56.364: E/AndroidRuntime(189):  at java.lang.reflect.Method.invoke(Method.java:521)
06-30 18:54:56.364: E/AndroidRuntime(189):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
06-30 18:54:56.364: E/AndroidRuntime(189):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
06-30 18:54:56.364: E/AndroidRuntime(189):  at dalvik.system.NativeStart.main(Native Method)
06-30 18:54:56.364: E/AndroidRuntime(189): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
06-30 18:54:56.364: E/AndroidRuntime(189):  at android.app.ListActivity.onContentChanged(ListActivity.java:236)
06-30 18:54:56.364: E/AndroidRuntime(189):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:201)
06-30 18:54:56.364: E/AndroidRuntime(189):  at android.app.Activity.setContentView(Activity.java:1622)
06-30 18:54:56.364: E/AndroidRuntime(189):  at my.easyflipping.EasyflippingActivity.onCreate(EasyflippingActivity.java:26)
06-30 18:54:56.364: E/AndroidRuntime(189):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-30 18:54:56.364: E/AndroidRuntime(189):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
06-30 18:54:56.364: E/AndroidRuntime(189):  ... 11 more
06-30 18:54:56.384: I/dalvikvm(189): threadid=7: reacting to signal 3
06-30 18:54:56.384: E/dalvikvm(189): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
06-30 18:58:28.214: I/Process(189): Sending signal. PID: 189 SIG: 9 
```

如果有人帮助我，我将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:16:22.797

您正在扩展一个 ListActivity，这**要求**您的布局中有一个 ListView 并带有 id `@android:id/list`。尝试在 main.xml 中更改它：

```
<ListView android:id="@+id/list"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:layout_weight="1"
          android:drawSelectorOnTop="false"/> 
```

对此：

```
<ListView android:id="@android:id/list"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:layout_weight="1"
          android:drawSelectorOnTop="false"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T19:14:11.657

```
 Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

如果您正在使用列表活动，您必须有一个 id 为“@android:id/list”的 listView

```
<?xml version=”1.0″ encoding=”utf-8″?>
<LinearLayout xmlns:android=”http://schemas.android.com/apk/res/android”
android:orientation=”vertical”
android:layout_width=”fill_parent”
android:layout_height=”fill_parent”
>
<TextView
android:layout_width=”fill_parent”
android:layout_height=”wrap_content”
android:text=” “
android:id=”@+id/selection”
/>
<ListView
android:id=”@android:id/list”
android:choiceMode=”multipleChoice”
android:layout_width=”fill_parent”
android:layout_height=”wrap_content”/>
</LinearLayout> 
```

# performance - Node.js 内存、GC 和性能

> ID：11276899
> 
> 赞同：3
> 
> 时间：2012-06-30T19:08:50.753
> 
> 标签：performance, node.js, memory, garbage-collection

有传言说，当使用大量 JS 对象和内存时，当前的 Node.js（或者更准确地说是 V8 GC）性能很差。

您能否解释一下问题出在哪里 - 一个对象（或数组）上有很多对象或很多属性？

也许有一些基准，看看实际的代码和数字会很有趣。

据我所知，主要问题是一个对象上有很多属性，而不是很多对象本身（尽管我不确定）。如果是这样 - 内存中的图形数据库（每个节点上最多有数百个属性）是一个很好的例子吗？

另外我听说最新版本的 V8 改进了 GC 并解决了部分问题——这是真的吗，什么时候可以在 Node.js 中使用？

# hibernate - 在这种情况下我们需要 Hibernate 映射吗？

> ID：11276905
> 
> 赞同：7
> 
> 时间：2012-06-30T19:10:11.723
> 
> 标签：hibernate, hibernate-mapping

我是新来的冬眠。请帮我。

我有 2 个名为 Employee 和 Country 的表。我需要用选定的国家/地区保存 E​​mployee。在我的情况下，我将无处取回员工详细信息并将其显示在 UI 上。我需要维护 Employee 和 Country 对象之间的映射（onetoone mapping）吗？我不能直接保存选定国家的员工吗？

我可以在我的 Employee 域对象中执行以下操作吗？如果不能，请告诉我这方面的潜在问题？

@column(name="countryId")

私人 int 国家 ID；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:17:51.543

我相信你在这里可能有几个选择。

1.  您可以将原`country`语完全排除在域类之外。如果你不需要它，没有理由告诉 Hibernate 去获取它。
2.  如果您根本不打算修改它，将其映射到您的域类中并应用`@Transitive`注释可能会得到您想要的。这告诉 Hibernate，关于 Country ID 的任何内容都不需要在数据库级别持久化。

这些方法中的任何一种都有助于确保`employee`对象和国家 ID 之间的引用完整性。不过，我建议使用第一个。如果您根本没有理由需要国家 ID，请不要将其作为对象的一部分。

如果您确实需要在背面使用 Country ID 来建立关系，我建议您确保包含此

```
@Column(name = "country", insertable = "false", updatable = "false"). 
```

这使您可以获取国家/地区 ID，而不必担心您会意外覆盖它。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:06:58.300

> 是的，您可以将 countryId 放入您的员工对象中。但是如果你以后不需要国家对象，那么保存国家对象没有任何意义。
> 
> 如果您正在为未来的未来开发这些东西，并且将来可能需要但现在不需要，那么最好保存国家对象。

# ruby - 如何在 Ruby 中的 glob 模式和正则表达式模式之间进行转换？

> ID：11276909
> 
> 赞同：2
> 
> 时间：2012-06-30T19:10:27.597
> 
> 标签：ruby, regex, glob

Glob 模式类似于正则表达式模式，但不相同。给定一个 glob 字符串，如何将其转换为相应的正则表达式字符串？

请参阅[Dir#glob](http://ruby-doc.org/core-1.9.3/Dir.html#method-c-glob)和 Perl 的[Text-Glob](http://cpan.uwinnipeg.ca/htdocs/Text-Glob/Text/Glob.pm.html)库，以及[从 glob 表达式创建正则表达式](https://stackoverflow.com/questions/445910/create-regex-from-glob-expression)（对于 python）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T19:10:28.593

[作为rerun](http://github.com/alexch/rerun) gem的一部分，我已经编写了它的部分实现，但如果有人知道更好的方法，我很想听听。这是我的代码（最新[代码](https://github.com/alexch/rerun/blob/master/lib/rerun/glob.rb)和[测试](https://github.com/alexch/rerun/blob/master/spec/glob_spec.rb)在 github 上）。

```
class Glob
  NO_LEADING_DOT = '(?=[^\.])'   # todo

  def initialize glob_string
    @glob_string = glob_string
  end

  def to_regexp_string
    chars = @glob_string.split('')
    in_curlies = 0;
    escaping = false;
    chars.map do |char|
      if escaping
        escaping = false
        char
      else
        case char
          when '*'
            ".*"
          when "?"
            "."
          when "."
            "\\."

          when "{"
            in_curlies += 1
            "("
          when "}"
            if in_curlies > 0
              in_curlies -= 1
              ")"
            else
              char
            end
          when ","
            if in_curlies > 0
              "|"
            else
              char
            end
          when "\\"
            escaping = true
            "\\"

          else
            char

        end
      end
    end.join
  end
end 
```

# c# - ASP.NET C# 等效于示例中的 vbScript/VB LEFT

> ID：11276914
> 
> 赞同：0
> 
> 时间：2012-06-30T19:11:22.177
> 
> 标签：c#, asp.net, html

我继承了要更新的 Web 应用程序的 1 页，旧的经典 ASP 版本大量使用了 LEFT、RIGHT 和 MID 功能。更新后的应用程序使用 C# ASP.NET。有没有办法导入 VB 左、右和中间函数或模拟这些函数的函数。

如果字符串比 C# 下的长度参数短，C# 子字符串函数似乎会返回错误。（不要取笑我的 C# 代码，我几乎不使用 C#）。填写所需的代码会很棒

```
<%@ Page language="c#" %>
<%@ Import namespace="Microsoft.VisualBasic"%>

<script runat="server" language="C#">

protected virtual string Auth(string uid)
{
String xml;

if (!String.IsNullOrEmpty(Request["uid"]))
{

System.Data.DataTable dtTable = new System.Data.DataTable();

System.Data.SqlClient.SqlConnection conn = new System.Data.SqlClient.SqlConnection(ConfigurationManager.ConnectionStrings["LocalSqlServer"].ConnectionString);
conn.Open();

string query = "SELECT id, blah, blah from users WHERE left(secretkey,30)='" + Request["uid"] + "'"; <--need to know how to use left function here

blah blah blah...

</script>
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
<title>blah</title>
</head>
<body>
<form id="Form1" method="post" runat="server"><% Page_Load(null, null); %></form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T21:41:14.417

就像我在关于 wuestion 的评论中已经说过的那样，你使用的是 SQL 的`left`函数，所以你使用的是 vb 还是 c# 都没关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T19:23:27.773

从我评论的链接问题中，

```
Left()       = "string".Substring(0, length)
Right()      = "string".Substring("string".Length - desiredLength)
Mid()        = "string".Substring(start, length) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T20:17:05.717

**第一个问题**是在这个例子中你根本没有在 C# 中调用 left。

string query = "SELECT id, blah, blah from users WHERE left(secretkey,30)='" + Request["uid"] + "'";

您在 sql server 中使用 left 函数，这就是为什么您在网页中没有收到任何错误的原因，请参阅[http://msdn.microsoft.com/en-us/library/ms177601.aspx](http://msdn.microsoft.com/en-us/library/ms177601.aspx)

**第二个问题**是密钥在表中，因此除非您将其值检索到客户端，否则您永远无法在其上使用 VB 的 left 函数

所以我假设这只是一个非常糟糕的例子，你正在寻找更像这样的东西。

var secretkey = "ABCDEFGHIJKLMNOP"

string query = "Select blah, blah from users where secretkey =" + secretkey.Substring(0,30)

# python - 通过 Django 模板中的视图传递变量

> ID：11276915
> 
> 赞同：0
> 
> 时间：2012-06-30T19:11:36.700
> 
> 标签：python, django, view, django-templates, arguments

试图弄清楚如何在 Django 模板系统中访问我的变量。我的模型.py：

```
class SubCategory(models.Model):
   name = models.CharField(max_length=50, unique=True)
   category = models.ManyToManyField(Category) 
```

我的观点：

```
from myapp.models import Category, SubCategory

def create_in_category(request, slug):
   category = get_object_or_404(Category, slug=slug)
   subcategory = SubCategory()

   ad = Ad.objects.create(category=category, subcategory=subcategory, user=request.user,
                       expires_on=datetime.datetime.now(), active=False)
   ad.save()
   return redirect('myapp_create_ad_edit', pk=ad.pk)
...

class AdCreationEditView(AdEditView):
   def get_queryset(self):
       qs = super(AdEditView, self).get_queryset()
       return qs.filter(active=False, user=self.request.user)

   def get_success_url(self):
       return reverse('classifieds_create_ad_preview',
                      kwargs=dict(pk=self.object.pk))

   def get_context_data(self, **kwargs):
       context = super(AdCreationEditView, self).get_context_data(**kwargs)
       context['create'] = True
       return context 
```

* * *

我希望能够`{{ subcategory }}`在我的模板中访问，但导致错误：`'subcategory' is an invalid keyword argument for this function`因为我的视图中有错误。任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T20:03:57.847

该错误不是来自您的模板，与您的问题无关。`subcategory`是多对多关系，您不能在对象实例化时定义这些关系，因为这种关系是通过链接表实现的——您需要先保存 Category 和 Subcategory 对象。

本教程完全回答了您关于如何将对象传递给模板的实际问题的答案。

# ubuntu - 如何设置本地服务器进行开发？

> ID：11276916
> 
> 赞同：5
> 
> 时间：2012-06-30T19:11:36.777
> 
> 标签：ubuntu, xampp

我有一台运行 Windows 7 的计算机，我在其上进行大部分开发工作。我有一台运行 Ubuntu 的备用笔记本电脑。他们都连接到同一个wifi，我正在Rails中开发。有没有办法可以将备用笔记本电脑（Ubuntu）用作本地服务器进行开发和测试，我可以通过我的另一台计算机（Windows 7）连接到该服务器？

如果不可能，我将如何使用我的计算机（Windows 7）作为本地服务器在 Rails 中进行测试？我安装了 XAMPP，但我真的不知道如何使用它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T19:38:58.233

首先在 Ubuntu 中安装 LAMP。这是解释如何做的数千个链接之一。 [https://help.ubuntu.com/community/ApacheMySQLPHP](https://help.ubuntu.com/community/ApacheMySQLPHP)

其次将站点添加到 Ubuntu 服务器。同样，这是解释如何做到这一点的众多链接之一。 [http://tuxtweaks.com/2009/07/how-to-configure-apache-linux/comment-page-1/#comment-1984](http://tuxtweaks.com/2009/07/how-to-configure-apache-linux/comment-page-1/#comment-1984)

最后只在本地打开你的服务器，我的意思是你家庭网络的本地主机。为此，请编辑文件 */etc/hosts* 并在文件末尾添加

```
127.0.0.1  mysite 
```

将“mysite”替换为您的站点名称并重新加载 apache

```
sudo /etc/init.d/apache2 reload 
```

您可以从家庭网络中的任何计算机访问*[http://mysite](http://mysite)*

# scala - 在Scala中将函数参数定义为“var”？

> ID：11276921
> 
> 赞同：7
> 
> 时间：2012-06-30T19:12:12.043
> 
> 标签：scala, syntax

我有这样的功能：

```
private def add[T](n: String, t: T, k: Map[String,T]): T = { k += (n -> t); t } 
```

编译器抱怨对 val 进行了重新分配，因此没有将其更改为可变映射，有没有办法像在案例类中那样说“var k: Map ...”之类的东西？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T19:26:21.623

您要求的是[*通过引用*](http://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_reference)参数传递。JVM 没有这些，Scala 也没有。*

您要么必须返回更新的地图：

```
private def add[T](n: String, t: T, k: Map[String,T]): Map[String,T] = k + (n -> t) 
```

或者两者都返回，或者如果你必须返回`T`，写一个包装类：

```
case class Vary[A](var value: A) { def apply() = value }
private def add[T](n: String, t: T, k: Vary[Map[String,T]]) = { k.value += (n -> t); t }

val map = Vary( Map.empty[String,Int] )
add("fish", 5, map)
map()  //Map[String,Int] = Map(fish -> 5) 
```

* * *

*好吧，不是直接的。当然，必须通过闭包以某种方式更改外部上下文中的 var，实际上 Scala 所做的是使用包装类，就像我在上面展示的那样。

# php - 在 Web 浏览器中模拟命令 shell 输出

> ID：11276923
> 
> 赞同：1
> 
> 时间：2012-06-30T19:12:59.233
> 
> 标签：php, ajax

## 背景：

现在，在我们公司，我们有一个基于 PHP 的应用程序来自动化我们的报告构建。它是这样工作的：

1.  带有表单的网页会生成一个带有一些配置的 ini 文件，这些配置保存在本地
2.  PHP CLI 脚本接受在步骤 1 中生成的 ini 文件，并基于它创建一个目录，其中包含从 Internet 获取数据的文档。（需要 5 到 10 分钟才能完成）
3.  另一个 Web 表单探索文件夹的内容，进行一些验证并将目录的内容显示为预览。

在这些步骤之间，需要用户输入，有时用户需要中断脚本 2 以更正一些 ini 值。

* * *

## 问题：

我们希望在网络浏览器中运行 cli 脚本，以便在用户单击“构建”按钮后，生成 ini 文件（或数组）并自动传递给第二个脚本。但想法是让该脚本独立运行（模拟另一个“线程”），详细说明它在此过程中所做的一切，以便让用户在需要时中断。类似于在命令行中运行脚本，其中每个步骤都是详细的。

* * *

我们虽然使用 AJAX，但它会等待服务器完成其响应，然后再在 Web 浏览器中打印任何内容。iFrame 也不起作用，因为我们无法使用 javascript 操作它的 src 属性和内容。

那么，我们如何“模拟”命令 shell 输出呢？任何正确方向的提示将不胜感激。

注意：该脚本将始终在“localhost”中使用，无需远程访问！

* * *

## 解决方案

根据以下建议，我最终做了一些更简单的事情：

*   将表单 ($_POST) 的内容转储到会话变量 $_SESSION['FORM']。
*   创建了一个 $_SESSION[form-complete] 标志，当用户单击“构建”按钮时该标志将设置为 true。
*   如果 $_SESSION[form-complete] 为真，服务器将显示一个指向“CLI SCRIPT”的 iframe，其参数是先前转储的会话变量。
*   CLI 脚本也有`ob_implicit_flush(true); ob_end_flush();`这样的输出不会被缓存。
*   在脚本结束时 $_SESSION 变量是干净的并且会话被破坏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T19:17:36.123

> iFrame 也不起作用，因为我们无法使用 javascript 操作它的 src 属性和内容。

您可以，只要 iframe 与父页面位于同一主机上（例如`localhost`）。AJAX 自然也不支持跨域请求，所以如果你有 AJAX 工作，iframe 也会随之而来。

您最简单的选择是将输出通过管道传输到一个[临时文件](http://php.net/tempnam)，然后让您的“单独线程”成为检索输出的 iframe/AJAX 调用。如果它在 localhost 上运行，那么为此进行的带宽优化将毫无意义（除非日志变得*非常*长）。

* * *

### 一个小例子：

假设我们要运行`./long_script`. 这就是我们可以做到的。

1.  `system('./long_script > /tmp/file 2>&1 &');`*（将所有*输出通过管道传输到 /tmp/file，然后在后台运行）

2.  制作一个执行类似操作的 PHP 脚本（您需要一种**安全**的方式来获取文件名，最好是会话变量或经过清理的`$_GET`变量）：

    `<pre><?php echo file_get_contents('/tmp/file'); ?></pre><script>setTimeout("window.location.reload()", 1000);</script>`

3.  将该 PHP 脚本放在 iframe 中。Javascript 将导致每 1 秒自动重新加载一次。

* * *

### 选择：

您可以使用[popen](http://uk3.php.net/popen)来拥有一个进程句柄，然后[fread](http://uk3.php.net/fread)将数据（set）刷新`ob_implicit_flush(true)`到浏览器（因此它不会等待从进程中获取所有输出，然后一次全部推送）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T19:31:24.613

那么，第 2 步可以是这样的页面：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
</head>
<body>

<button onclick="javasctipt:ajaxCall('stop')">Stop</button>
<button onclick="javasctipt:ajaxCall('pause')">Pause</button>
...
<iframe src="step2cli.php">Output of cli here</iframe>

</body>
</html> 
```

**调用ajax（对PHP）将您的命令（停止，暂停）或**一些新信息（例如：新信息文件）写入“控制”文件。

定期您的 step2cli.php 检查“控制”文件。如果存在，解析并删除它，然后当然应用新信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-29T15:35:01.040

**bash中的这段代码工作**

```
url="google.com"
content=$(curl -L $url)
echo $content 
```

# android - GetSupportedPreviewSize 返回反向宽度和高度

> ID：11276924
> 
> 赞同：5
> 
> 时间：2012-06-30T19:13:20.613
> 
> 标签：android, android-camera, preview

我正在使用 DroidX 开发一个使用相机预览图像的应用程序。我正在使用的代码在网络上的许多地方都可以找到，但我注意到常用方法“getBestPreviewSize(width,height,camera.parameters)”返回的尺寸太小，以至于标准 decodeYUV420SP 方法因空指针异常而失败。

一些调试显示我的 DroidX 的 supportedPreviewSizes 是：

*   144h x 176w
*   240 小时 x 320 瓦
*   288h x 352w
*   480h x 640w
*   480h x 720w
*   448 小时 x 800 瓦
*   720h x 1280w

请注意，高度和宽度的值给出了横向视角。这不会随相机方向而改变。传递到的表面的宽度和高度为`getBestSupportedPreviewSizes`480w x 778h。

当我将 camera.parameters 传递给`getBestSupportedPreviewSizes()`它时，它会返回 288 x 352 大小。这是调用代码 - 如果格式关闭，我很抱歉，但这里是：

```
 if (!cameraConfigured) {
        Camera.Parameters parameters=camera.getParameters();
        Camera.Size size=getBestPreviewSize(pwidth, pheight, parameters);
        if (size!=null) {
          parameters.setPreviewSize(size.width, size.height);
          camera.setParameters(parameters);
          cameraConfigured=true;
        }
    } 
```

`pwidth`并且`pheight`来自`surfaceChanged`回调的宽度和高度参数。我试过 camera.setDisplayOrientation(90); 在 onResume() 中。我还在清单中添加了方向（“肖像”）——这些尝试的 4 种组合似乎都没有改变这种行为。

我的想法是简单地扭转它们，但在很多层面上感觉都是错误的。由于这个免费提供的代码似乎已经在许多其他示例中证明了自己，我显然是错误地接近它。任何人都可以对这种行为提供一些见解吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T03:52:21.003

考虑相机的正确方法是在横向模式下，这意味着当您在纵向模式下考虑它时，宽度和高度会感觉“翻转”。

该`getBestPreviewSize( w, h, p )`函数只是对`getSupportedPreviewSizes()`函数的一个包装器`Camera.Parameters`，因此传入的宽度和高度不会改变 bestPreviewSize 函数的结果。

# java - 开发者控制台中的设备可用性对话框显示 0 个设备

> ID：11276932
> 
> 赞同：1
> 
> 时间：2012-06-30T19:14:21.820
> 
> 标签：java, android, google-play

我刚刚将我的应用程序的 APK 上传到 Play 商店，并在开发者控制台的使用设备可用性对话框中显示此应用程序可用于 0 多个设备。

![在此处输入图像描述](../Images/dda7b6cc9484c880c2e55d2dee16ed52.png)

我究竟做错了什么？我的清单文件中还需要添加什么。

我的 res 文件夹包含所有不同设备的所有图像

![在此处输入图像描述](../Images/9b992481f98a278e4c303be96057512e.png)

如果有人可以帮助我，那将非常有帮助。

这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.xyz.ssasasas"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="7" />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name" >
        <activity
            android:name=".A1"
            android:theme="@android:style/Theme.Black.NoTitleBar"
            android:screenOrientation="portrait"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="info"></activity>
        <activity android:name="Displayone"></activity>
        <activity android:name="A2" 
            android:screenOrientation="landscape"
        >
            <intent-filter>
                <action android:name="A2" />
                 <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T05:15:30.110

简单的答案是我没有激活我上传的 APK。激活后就可以正常使用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T19:22:34.077

您的应用程序没有任何问题。Play 商店的开发者控制台自从被称为 Android 市场以来就因做这样的事情而臭名昭著。我曾经在我的几个应用程序中也遇到过这个问题，但它们都已被数千人安装，所以我认为这不是真的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T19:52:15.897

这是您的应用更新中的清单吗？您是否更新了版本代码和名称？在您了解它将在哪些设备上运行之前，这将是一个错误。还要确保停用旧应用程序并重新激活将提供 0 设备的新应用程序。

# c++ - 带有游戏状态的 Xcode C++ 错误

> ID：11276935
> 
> 赞同：0
> 
> 时间：2012-06-30T19:14:51.440
> 
> 标签：c++, xcode, state, sfml

所以我想制作一款代码非常简洁且组织良好的游戏。调查游戏状态我发现了这个网站： http: [//gamedevgeek.com/tutorials/managing-game-states-in-c/](http://gamedevgeek.com/tutorials/managing-game-states-in-c/)

使用他的模板，到目前为止我有这个：

游戏状态.hpp

```
#ifndef Rect_Game_GameState_hpp
#define Rect_Game_GameState_hpp

#include <SFML/Graphics.hpp>
#include "GameEngine.hpp"

class GameEngine;

class GameState {

public:
    virtual void Init() = 0;
    virtual void Cleanup() = 0;

    virtual void Pause() = 0;
    virtual void Resume() = 0;

    virtual void HandleEvents(GameEngine* game) = 0;
    virtual void Update(GameEngine* game) = 0;
    virtual void Draw(GameEngine* game) = 0;

    virtual void ChangeState(GameEngine* game, GameState* state);

private: 
    GameState() { }
};

#endif 
```

TitleScreenState.hpp

```
#ifdef Rect_Game_TitleScreenState_hpp
#def Rect_Game_TitleScreenState_hpp

#include <iostream>
#include <SFML/Graphics.hpp>
#include "GameState.hpp"
#include "GameEngine.hpp"

class TitleScreenState : public GameState {

public:
    void Init();
    void Cleanup();

    void Pause();
    void Resume();

    void HandleEvents(GameEngine* engine);
    void Update(GameEngine* engine);
    void Draw(GameEngine* engine);

    void ChangeState(GameEngine* engine, GameState* state);

    static TitleScreenState* Instance();

private:

    TitleScreenState() {}

    static TitleScreenState* titleScreenInstance;

    sf::RenderWindow* window;

    int mouseX;
    int mouseY;

    Button* playButton;

};

#endif 
```

然后每次我尝试实现这些功能时都会出现错误“使用未声明的标识符'TitleScreenState'”。它也不是自动完成“TitleScreenState”。有什么建议么？

TitleScreenState.cpp

```
#include <iostream>
#include "GameEngine.hpp"
#include "GameState.hpp"
#include "TitleScreenState.hpp"
#include "ResourcePath.hpp"

void TitleScreenState::Init()
{
    // Initialize values
    leftClick = false;
    mouseX = 0;
    mouseY = 0;

    // Load title screen image
    sf::Texture titleImage;
    if (!titleImage.loadFromFile(resourcePath() + "TitleScreen.png"))
        printf("could not load TitleScreen.png");

    sf::Sprite titleScreen;
    titleScreen.setTexture(titleImage);

    playButton = new Button("Play", 350, 220);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:24:35.667

这里的问题是 TitleScreenState.hpp：

```
#ifdef Rect_Game_TitleScreenState_hpp
#def Rect_Game_TitleScreenState_hpp 
```

首先，`#ifdef`阻止编译器查看文件的其余部分，因为`Rect_Game_TitleScreenState_hpp`尚未定义。因此，它应该是`#ifndef`。此外，`#def`应该是`#define`. 那应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T19:19:31.027

我有一段时间没有接触 C++，但您似乎已经声明默认构造函数是私有的：

```
private:
   TitleScreenState() {} 
```

如果我没记错的话，这意味着您无法运行：

```
void TitleScreenState::Init() 
```

因为它是一个需要`TitleScreenState`实例化的非静态函数，并且默认控制器是私有的：S，所以在任何地方`new TitleScreenState()`你都会得到那个错误，因为实际上没有`TitleScreenState`可用的公共给出错误`Use of undeclared identifier 'TitleScreenState'`

您是否尝试将其公开？

```
public:
   TitleScreenState() {} 
```

# c# - 使用命令行工具编译单声道项目

> ID：11276943
> 
> 赞同：1
> 
> 时间：2012-06-30T19:16:31.313
> 
> 标签：c#, mono, monodevelop

我使用 MonoDevelop 已经有一段时间了，但想尝试其他编辑器。如何用 Mono 的命令行工具替换 MonoDevelop 的构建功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:49:10.707

两种方式，

*   `mdtool`- 由 monodevelop 安装。
*   `xbuild`- mono 的一部分，与`msbuild`.

# url - 如何制作仅在特定页面上可见的按钮？（创新设置）

> ID：11276951
> 
> 赞同：2
> 
> 时间：2012-06-30T19:17:45.247
> 
> 标签：url, button, inno-setup, serial-number, custom-pages

我在向导页面中制作了一个按钮。但我只想在此串行表单页面上显示该按钮。现在，该按钮显示在所有向导页面上。我怎样才能让它只显示在串行页面上？

这是我用于串行表单页面的代码：

```
[Code]
enter code here function SetFocus(hWnd: HWND): HWND;
  external 'SetFocus@user32.dll stdcall';
function OpenClipboard(hWndNewOwner: HWND): BOOL;
  external 'OpenClipboard@user32.dll stdcall';
function GetClipboardData(uFormat: UINT): THandle;
  external 'GetClipboardData@user32.dll stdcall';
function CloseClipboard: BOOL;
  external 'CloseClipboard@user32.dll stdcall';
function GlobalLock(hMem: THandle): PAnsiChar;
  external 'GlobalLock@kernel32.dll stdcall';
function GlobalUnlock(hMem: THandle): BOOL;
  external 'GlobalUnlock@kernel32.dll stdcall';

var
  SerialPage: TWizardPage;
  SerialEdits: array of TEdit;

const
  CF_TEXT = 1;
  VK_BACK = 8;
  SC_EDITCOUNT = 6;
  SC_CHARCOUNT = 5;

function GetClipboardText: string;
var
  Data: THandle;
begin
  Result := '';
  if OpenClipboard(0) then
  try
    Data := GetClipboardData(CF_TEXT);
    if Data <> 0 then
      Result := String(GlobalLock(Data));
  finally
    if Data <> 0 then
      GlobalUnlock(Data);
    CloseClipboard;
  end;
end;

function TryPasteSerialNumber: Boolean;
var  
  S: string;
  I: Integer;
  J: Integer;
  Delimiter: string;
begin
  Result := True;
  Delimiter := '-';
  S := GetClipboardText;    
  if Length(S) <> ((SC_EDITCOUNT * SC_CHARCOUNT) + 
    ((SC_EDITCOUNT - 1) * Length(Delimiter))) then
    Exit;    
  for I := 0 to GetArrayLength(SerialEdits) - 1 do
  begin
    J := (I * SC_CHARCOUNT) + (I * Length(Delimiter)) + 1;
    SerialEdits[I].Text := Copy(S, J, SC_CHARCOUNT);
  end;
end;

function GetSerialNumber(const ADelimiter: Char): string;
var
  I: Integer;
begin
  Result := '';
  for I := 0 to GetArrayLength(SerialEdits) - 1 do
    Result := Result + SerialEdits[I].Text + ADelimiter;
  Delete(Result, Length(Result), 1);
end;

procedure OnSerialEditChange(Sender: TObject);
var
  CanContinue: Boolean;
begin
  CanContinue := GetSerialNumber('-') = 'my serial';
  WizardForm.NextButton.Enabled := CanContinue;
end;

procedure OnSerialEditKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
var
  Edit: TEdit;
  EditIndex: Integer;
begin
  Edit := TEdit(Sender);
  EditIndex := Edit.TabOrder - SerialEdits[0].TabOrder;
  if (EditIndex = 0) and (Key = Ord('V')) and (Shift = [ssCtrl]) then
  begin
    if TryPasteSerialNumber then
      Key := 0;
  end
  else
  if (Key >= 32) and (Key <= 255) then
  begin
    if Length(Edit.Text) = SC_CHARCOUNT - 1 then
    begin
      if EditIndex < GetArrayLength(SerialEdits) - 1 then
        SetFocus(SerialEdits[EditIndex + 1].Handle)
      else
        SetFocus(WizardForm.NextButton.Handle);
    end;
  end
  else
  if Key = VK_BACK then
    if (EditIndex > 0) and (Edit.Text = '') and (Edit.SelStart = 0) then
      SetFocus(SerialEdits[EditIndex - 1].Handle);
end;

procedure CreateSerialNumberPage;
var
  I: Integer;
  Edit: TEdit;
  DescLabel: TLabel;
  EditWidth: Integer;
begin
  SerialPage := CreateCustomPage(wpWelcome, 'Serial number validation',
    'Enter the valid serial number');

  DescLabel := TLabel.Create(SerialPage);
  DescLabel.Top := 16;
  DescLabel.Left := 0;
  DescLabel.Parent := SerialPage.Surface;
  DescLabel.Caption := 'Enter the valid serial number and continue with the installation...';
  DescLabel.Font.Style := [fsBold];

  SetArrayLength(SerialEdits, SC_EDITCOUNT);
  EditWidth := (SerialPage.SurfaceWidth - ((SC_EDITCOUNT - 1) * 8)) div SC_EDITCOUNT;

  for I := 0 to SC_EDITCOUNT - 1 do
  begin
    Edit := TEdit.Create(SerialPage);
    Edit.Top := 40;
    Edit.Left := I * (EditWidth + 8);
    Edit.Width := EditWidth;
    Edit.CharCase := ecUpperCase;
    Edit.MaxLength := SC_CHARCOUNT;
    Edit.Parent := SerialPage.Surface;
    Edit.OnChange := @OnSerialEditChange;
    Edit.OnKeyDown := @OnSerialEditKeyDown;
    SerialEdits[I] := Edit;
  end;
end;

procedure CurPageChanged(CurPageID: Integer);
begin
  if CurPageID = SerialPage.ID then
    WizardForm.NextButton.Enabled := False;  
end;

procedure AboutButtonOnClick(Sender: TObject);
var
  ErrorCode: Integer;
begin
  ShellExecAsOriginalUser('open', 'http://www.mywebsite.com', '', '', SW_SHOWNORMAL, ewNoWait, ErrorCode);
end;

procedure CreateAboutButton(ParentForm: TSetupForm; CancelButton: TNewButton);
var
  AboutButton: TNewButton;
begin
  AboutButton := TNewButton.Create(ParentForm);
  AboutButton.Left := ParentForm.ClientWidth - CancelButton.Left - CancelButton.Width;
  AboutButton.Top := CancelButton.Top;
  AboutButton.Width := CancelButton.Width;
  AboutButton.Height := CancelButton.Height;
  AboutButton.Caption := '&Get Serial';
  AboutButton.OnClick := @AboutButtonOnClick;
  AboutButton.Parent := ParentForm;
end;

procedure InitializeWizard;
begin
  CreateSerialNumberPage;
  CreateAboutButton(WizardForm, WizardForm.CancelButton);
end; 
```

我希望你们能帮助我伙计们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T22:53:32.460

您已经有一个`CurPageChanged`程序，您可以根据当前页面在此处设置按钮的可见性。当然，您需要将“AboutButton”设为全局变量：

```
...

var
  AboutButton: TNewButton;

procedure CreateAboutButton(ParentForm: TSetupForm; CancelButton: TNewButton);
begin
  AboutButton := TNewButton.Create(ParentForm);
  ...
end;

procedure CurPageChanged(CurPageID: Integer);
begin
  ...
  AboutButton.Visible := CurPageID = SerialPage.ID;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T23:46:18.610

如果您将按钮实际放在您希望它可见的页面上，那么它只会在该页面可见时出现。您必须将其位置设置为适合该页面，然后将其 Parent 设置为该页面上已存在的某个其他控件的 Parent。

否则（如果您希望它出现在正常页面区域之外），请执行 Sertac 所说的操作。

# javascript - 通过 JQuery 选择器设置 CSS 类属性：隐藏计数

> ID：11276954
> 
> 赞同：1
> 
> 时间：2012-06-30T19:18:25.447
> 
> 标签：javascript, jquery, css

所以我有两个部分，一个`fieldset`面板`div`和一个“生成的内容” `div`。我正在将元素从一个“移动”到另一个，方法是在一个部分的更改中隐藏它们并在另一部分中取消隐藏它们。对于一个特定的“抽象”部分，它有一个类`.abstract`和几个元素都具有类`oneseven`，我如何根据隐藏的数量来更改这些部分的宽度属性？

这是我的代码：

```
// Abstract
//hide initially
    $('fieldset.abstract label').hide();
//individual Abstract elements Toggle Buttons
    //Currently on, turning Off
        $('.block > .abstract > .superseven > section > .oneseven > input').on('change', function () {
            var hidden = 0;
            var width = Number((1/(7-hidden))*100);
            if (this.checked) {
            } else {
                var hidden = ($('.block > .abstract > .superseven > section > :hidden').length + 1);
                var width = Number((1/(7-hidden))*100);
                console.log(hidden);
                console.log('"' + Number(width) + '%"');
/*issue here*/      $('.oneseven').css("width", '"' + Number(width) + '%"');
                var index = $(this).closest('section').prevAll('section').length;
                $('.block > .abstract > .superseven > section').eq(index).hide("slow");
                $('fieldset.abstract > label').eq(index+1).show("slow");
                $('fieldset.abstract > input').eq(index+1).prop('checked' , true);
            }
        });
    //Currently off, turning On
        $('fieldset.abstract > input').on('change', function () {
            var hidden = 0;
            var width = Number((1/(7-hidden))*100);
            if (this.checked) {
            } else {
                var hidden = ($('.block > .abstract > .superseven > section > :hidden').length - 1);
                var width = Number((1/(7-hidden))*100);
                console.log(hidden);
                console.log('"' + Number(width) + '%"');
/*and here*/        $('.oneseven').css("width", '"' + Number(width) + '%"');
                var index = $(this).prevAll('input').length;
                $('.block > .abstract > .superseven > section').eq(index-1).show("slow");
                $('.block > .abstract > .superseven > section > .oneseven > input').eq(index-1).prop('checked' , true);
                $('fieldset.abstract > label').eq(index).hide("slow");
            }
        }); 
```

我可以在控制台中通过键入`$('.oneseven').css("width", "33.33%");` 或将数值更改为`25%`or`20%`等​​...m 来完成此操作，但在 JS 部分中获取它是行不通的。

我试过了：

*   使用 parseInt() 将其类型转换为 int
*   将其更改为`Number`使用 JS（当前代码）
*   在控制台中实际以数字格式输入宽度的所有内容，它可以工作

我认为它位于 CSS 属性 Jquery 选择器的第二个参数中。我如何解决它？ *笔记*

我有 vars`hidden`和`width`两次，因为我不确定它们是否需要是全局的才能解决这个问题。我试图让它工作，然后我可以排除故障并查看需要什么范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T19:26:30.000

是的，@pimvdb 是正确的，由于某种原因，不需要嵌套引号，所以最后一行代码是 `$('.oneseven').css("width", (width) + "%");`

并且`Number()`不需要类型转换/转换。

# sql - 如何减慢 SQL 查询速度？

> ID：11276964
> 
> 赞同：23
> 
> 时间：2012-06-30T19:20:00.963
> 
> 标签：sql, sql-server, performance, sql-server-2008, tsql

听起来很奇怪，我需要减慢 SQL 查询的速度。目前，我在带有 AdventureWorks 数据库的内部开发服务器上使用 Microsoft SQL Server 2008 R2。我正在测试一些代码，无论我尝试什么，我运行的查询都太快了！

基本上我正在测试一个截止功能，并且需要一个足够长的查询才能在它完成之前将其切断。

不幸的是，由于它是本地安装，AdventureWorks 数据库中没有一个查询或足够大的表来实际为我提供可使用的良好数据。我试过了

```
WAITFOR DELAY '01:00' 
```

仅测试以确保其正常工作非常有用，但是现在我需要测试以查看是否可以在读取过程中切断数据流。WAITFOR 语句在这方面并不公平，因为我需要它主动从服务器检索数据。我的第一个直觉是使用复杂的计算来减慢它的速度，但是即使让 SQL 服务器将查询中的所有数值自己乘以 37 次，也只会使查询减慢几毫秒。我尝试的第二件事是将`WAITFOR`语句嵌入到子查询中，但看起来你不能这样做。最后，我唯一没有尝试过的是`WAITFOR`在它们之间执行多个存储过程，但我认为这不会满足我的需要。

我不得不说，当你离服务器这么近时，做出一个绝对糟糕的查询是多么困难，这给我留下了深刻的印象。

有什么办法可以轻松减慢查询速度？

谢谢！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-30T19:23:49.373

只需进行大量交叉连接即可。

```
SELECT T1.*
FROM SomeTable T1,  
     SomeTable T2,  
     SomeTable T3,  
     SomeTable T4 
```

对于一个 1000 行的表，它将生成 10000 亿行，这应该足够慢。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-30T19:32:24.350

```
DECLARE @EndTime DATETIME;
SET @EndTime = DATEADD(s, 5, GETDATE()); -- Set your delay here

WHILE @EndTime > GETDATE()
    SELECT 'Test Result'; -- Add your desired query here 
```

**编辑**

使用递归的另一个选项：

创建一个 UDF 包装器，`GETDATE()`以便为结果中的每一行计算一个新的日期值：

```
CREATE FUNCTION dbo.GetExactDate()
RETURNS DATETIME    
AS
BEGIN
    RETURN GETDATE();
END 
```

然后使用 cte

```
DECLARE @EndTime DATETIME;
SET @EndTime = DATEADD(s, 5, GETDATE()); -- Set your delay here

WITH cte AS (
    SELECT dbo.GetExactDate() Value
    UNION ALL
    SELECT dbo.GetExactDate()
    FROM cte
    WHERE Value < @EndTime
)
SELECT Value
FROM cte
OPTION (MAXRECURSION 0); 
```

这具有在一个查询中返回结果的优势，而不是很多（就像我的第一个解决方案），同时仍然能够设置您希望查询继续返回结果的时间量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-10T15:37:16.987

在 SQL Server 2016 上测试：（SQL View 查询总是需要两秒钟才能回复）

```
/* Call WAITFOR DELAY inside SQL View */
/* Usefull for example for async testing */
CREATE FUNCTION WaitForDelay()
RETURNS INT
AS
BEGIN
  RETURN (
    SELECT Value FROM OPENROWSET (
    'SQLOLEDB', 'Trusted_Connection=yes;  Integrated Security=SSPI; Server=localhost; Initial_Catalog=master;',
    'WAITFOR DELAY ''00:00:02'' SELECT 0 AS Value'
  ))
END

GO
CREATE VIEW Wait AS
SELECT dbo.WaitForDelay() AS Value

GO
SELECT * FROM Wait /* Takes sql view 2 seconds to respond */ 
```

显示 Management Studio 执行简单视图故意减慢到 2 秒：

[https://i.stack.imgur.com/fE60u.png](https://i.stack.imgur.com/fE60u.png)

# python - 在命令提示符中显示

> ID：11276967
> 
> 赞同：0
> 
> 时间：2012-06-30T19:20:20.750
> 
> 标签：python, stdout

这就是我想要做的，我正在使用命令提示符

```
import time

mess = list("StackOverflow")
def myFunc():
  for i in xrange(1000):
      for k in mess:
          print k
          time.sleep(0.1)

if __name__ == '__main__':
    myFunc() 
```

我正在尝试跨越 cmd 提示符的显示，基本上尝试矩阵效果，我该怎么做..

看一下截图：http: [//i.imgur.com/J4p58.png](http://i.imgur.com/J4p58.png)

我想知道的是，是否可以一次在所有列上垂直打印，然后字符下降（不是水平）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T19:26:06.537

[默认情况下，`print`包括一个换行符](http://docs.python.org/reference/simple_stmts.html#the-print-statement)。您可以通过在语句
末尾添加逗号来指定它不这样做。`print`

然后，至少在我的系统上，您遇到了缓冲输出的问题。
所以我包括了一个刷新标准输出的调用。

```
import sys, time

mess = "StackOverflow"
def myFunc():
  for i in xrange(1000):
      for k in mess:
          print k,
          sys.stdout.flush()
          time.sleep(0.1)

if __name__ == '__main__':
    myFunc() 
```

* * *

Python 3 的等效代码：

```
import sys, time

mess = "StackOverflow"
def myFunc():
  for i in range(1000):
      for k in mess:
          print(k, end=" ")
          sys.stdout.flush()
          time.sleep(0.1)

if __name__ == '__main__':
    myFunc() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T19:29:12.667

编辑：如果您只想像这样打印出来，那么只需执行以下操作：

```
import sys

strng = "S t a c k O v e r f l o w"
for i in range(10000):
    sys.stdout.write(strng) 
```

您是否尝试过简单地这样做？

```
import time, sys

stackOverflow = "stackoverflow"

for i in range(10000):
    for char in stackOverflow:
        for j in range(3):
            sys.stdout.write(char + " ")
            time.sleep(0.1)

    print("") #Newline 
```

# ios - 导航页面中的相同背景图像

> ID：11276969
> 
> 赞同：0
> 
> 时间：2012-06-30T19:20:39.147
> 
> 标签：ios, xcode, controller, navigation

如果可能的话，我不知道我能有多清楚或上帝，但无论如何我都会尝试问。

我正在尝试制作一个应用程序，它看起来像一个网页，我将这些界面称为页面。

主窗口有 7 个链接到 7 个页面，每个页面有 2-3 个页面的链接。我正在使用导航控制器，一切都很完美，但有一点让我很烦恼。

所有这些页面都具有相同的背景图像。当我从一个页面导航到另一个页面时，我可以看到背景图像发生变化，这是正常的。但是在导航时看到背景图像的锐利边缘很烦人。我希望背景图像保持静止，并在导航时显示其他内容。

有什么诀窍可以解决我的问题吗？使用故事板非常简单，所以你认为值得尝试一个替代解决方案，在这种情况下处理这么多视图可能会很痛苦。（我知道这听起来很傻，如果我想让它完美，我应该努力工作。我只是想知道你们在做什么）

谢谢，

阿尔卑斯山。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T19:50:42.630

我要做的是：

使每个视图控制器上的所有内容在您的代码中都有一个出口。当您关闭一个 VC 时，将所有这些东西设置为 alpha 为 0。然后推送新的 VC，所有项目都以 0 的 alpha 开头并将它们动画回 1。如果您调用关闭并推送VC 没有动画，则背景图像不会改变，并且会出现上一屏淡出，新一屏淡入，同时保持一致的背景。

那是你要找的吗？

**这是一个更具体的例子：**

假设我们有 2 个视图控制器，VC1 和 VC2。VC1 在框架的中心有一个大按钮（button1），按下它会弹出 VC2。VC2 只有一个后退按钮 (button2)，它将返回到 VC1。

我们从 Interface Builder 开始，在这里我们将视图的背景图像设置为 VC1 和 VC2 中的相同图像。然后我们为每个 VC 添加一个按钮，并将它们连接到标题中的适当插座，并在我们的 .m 文件中综合属性。在界面生成器中，将每个按钮的 alpha 设置为零。它会消失，但它仍然存在，只是看不见而已。

我们还为用户按下每个按钮时创建了一个方法，我将在 VC1 中调用 firstButton，在 VC2 中调用 backButton。将它们连接到 button1 和 button2。

除非我们以其他方式对其进行编码，否则我们的按钮是不可见的。因此，当应用程序加载并在屏幕上看到 VC1 时，我们需要将按钮的不透明度重新设置为动画，如下所示。如果您不熟悉动画语法，请不要担心，这很容易。

```
- (void) viewDidAppear:(BOOL)animated {
    // Animations
    [UIView animateWithDuration:0.2     // How long the animation takes
                          delay:0       // Any once we hit this line of code before the animation takes place
                        options:UIViewAnimationCurveEaseInOut  // Play around with this one to see what style of animation you want
                     animations:^{      // This is where we actually say what we want to animate. Make sure you use block syntax like I have here.
                         self.button1.alpha = 1; 
                     } 
                     completion:^ (BOOL finished){}    // If you want to do something else after the animations are complete you can call that here.
     ];
} 
```

就是这样！请注意，我是在 viewDidAppear 方法中执行此操作，而不是在 viewDidLoad 或 viewWillAppear 中执行此操作，因为这些发生在屏幕上显示任何内容之前，并且此时没有动画是可能的。

当用户点击 VC1 中的按钮时，我们需要将不透明度设置回零，然后将 VC2 压入堆栈。我们这样做几乎与上一个动画完全相同，但这次我们需要在完成块中更改为 VC2。如果我们使用动画：NO 调用来执行此操作，那么我们不会看到第一个视图滑出。由于背景图像相同，看起来我们仍然在同一个 VC 中。

```
- (void) firstButton {
   VC2 *secondVC = [[VC2 alloc] initWithNibName:@"VC2"];
   [UIView animateWithDuration:0.2
                      delay:0
                    options:UIViewAnimationCurveEaseInOut
                 animations:^{ 
                     self.button1.alpha = 0; 
                 } 
                 completion:^ (BOOL finished){ // Presenting the instance of VC2
                     [self.navigationController pushViewController:secondVC animated:NO];
                 }
 ];
} 
```

Now we have finished all the animations for VC1\. We need to copy the fade-in effect to the viewDidAppear method of VC2 (which I'm not going to copy out again but its literally the same), and the code the backButton method, which is almost exactly the same as the firstButton method, except that we are popping the view controller instead of pushing a new one:

```
- (void) backButton {
       [UIView animateWithDuration:0.2
                          delay:0
                        options:UIViewAnimationCurveEaseInOut
                     animations:^{ 
                         self.button2.alpha = 0; 
                     } 
                     completion:^ (BOOL finished){ // Removing the instance of VC2
                         [self.navigationController popViewControllerAnimated:NO];
                     }
     ];
} 
```

Does that clear things up?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T19:36:15.377

尝试适合您要求的不同实现。在普通视图之上使用 UIScrollView。普通视图可以包含背景图像，而 UIScrollView 可以包含页面。

# python - Python：修改异常/错误输出

> ID：11276974
> 
> 赞同：1
> 
> 时间：2012-06-30T19:21:44.740
> 
> 标签：python, error-handling

我有一个脚本可以执行以下操作...

```
import socket

hostIP=sys.argv[1]

if socket.inet_aton(hostIP):
    # Do something with valid ip address
else:
    # Print error message 
```

这适用于有效地址，但是当我尝试无效地址时它不起作用（即打印我的错误消息），并抛出一个套接字错误......

```
Traceback (most recent call last):
  File "addNew.py", line 35, in <module>
    if socket.inet_aton(hostIP):
socket.error: illegal IP address string passed to inet_aton 
```

关于如何实现我想要的任何想法（即只是一个简单的消息而不是套接字错误）。

提前致谢，

米宾

更新：工作（ish）脚本

```
import os
import sys
import fileinput
import platform
import subprocess
import re
import socket

hostsFile = "hosts.txt"
hostsLookFile = "hosts.csv"
hostsURLFileLoc = "urls.conf"
plat = platform.system()
currentDir = "C:/Program Files/Splunk/etc/apps/gtvm/bin"
hostsFileLoc = currentDir + "/" + hostsFile
hostsLookFileLoc = currentDir + "/../lookups/" + hostsLookFile
hostsURLFileLoc = currentDir + "/../default/" + hostsURLFileLoc
hostIP = sys.argv[1]
hostName = sys.argv[2]
hostURL = sys.argv[3]
hostMan = sys.argv[4]
hostModel = sys.argv[5]
hostType = sys.argv[6]
hostDC = sys.argv[7]

#pat = re.compile(^hostIP\s+)

#test = pat.match(hostIP)
#if test:
#   print "Acceptable ip address"
#else:
#   print "Unacceptable ip address"

try:
    socket.inet_aton(hostIP)
except socket.error as e:
    print "Unacceptable ip address", e
else:
    print "Acceptable ip address, proceeding..."
    print "Checking host if " + hostIP + " exists..."
    if not hostIP in open(hostsFileLoc).read():
        print hostIP + " does not yet exist, checking valid required input..."
        if hostName != "*" and hostIP != "*":
            print "...processing..."
            with open(hostsFileLoc,'a+') as hostsFilePython, open(hostsLookFileLoc, 'a+') as hostsLookFileCSV, open(hostsURLFileLoc, 'a+') as 

hostsURLPython:
                print "..host IP adddress for ping testing.."
                hostsFilePython.write(hostIP + "\n")
                print "..and, all values for referencing.."
                hostsLookFileCSV.write(hostIP + "," + hostName + "," + hostURL + "," + hostMan + "," + hostModel + "," + hostType + "," + 

hostDC + "," + "\n")
                if hostURL != "*": 
                    "..adding URL for webping testing.."
                    hostsURLPython.write("[" + hostName + "]\n" + "url = " + hostURL + "\n" + "sleep = 60" + "\n" + "\n")
                    print "done!"

        else:
            print "..failed! - Both host IP address and host name required"
    else:
        print hostIP + " already exists, please review lookups."
#except socket.error as e:
#   print "Unacceptable ip address", e 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T19:35:09.237

要详细说明我对使用异常的初步评论，请创建一个返回`True`或`False`基于地址有效性的函数：

```
import socket

def check_ip(addr):
    try: 
        socket.inet_aton(addr)
        return True
    except socket.error:
        return False 
```

然后

```
check_ip('apple')
False

check_ip('74.125.225.98')
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T19:25:17.257

使用`try`和`except`。

```
import socket

hostIP=sys.argv[1]

try:
    socket.inet_aton(hostIP)
except socket.error as e:
    print "Error:", e
else:
    # Do something with valid ip address 
```

首先你尝试运行`socket.inet_aton(hostIP)`，如果失败，它会打印错误消息，如果成功，它会在`else`. 您将其他代码放在下面`else`而不是`try`, 以避免捕获由其他代码引发的异常。

* * *

更新：

```
import platform
import subprocess
import re
import socket

hostsFile = "hosts.txt"
hostsLookFile = "hosts.csv"
hostsURLFileLoc = "urls.conf"
plat = platform.system()
currentDir = "C:/Program Files/Splunk/etc/apps/gtvm/bin"
hostsFileLoc = currentDir + "/" + hostsFile
hostsLookFileLoc = currentDir + "/../lookups/" + hostsLookFile
hostsURLFileLoc = currentDir + "/../default/" + hostsURLFileLoc
hostIP = sys.argv[1]
hostName = sys.argv[2]
hostURL = sys.argv[3]
hostMan = sys.argv[4]
hostModel = sys.argv[5]
hostType = sys.argv[6]
hostDC = sys.argv[7]

#pat = re.compile("\d{1,3}.\d{1,3}.\d{1,3}.\d{1,3}")

#test = pat.match(hostIP)
#if test:
#   print "Acceptable ip address"
#else:
#   print "Unacceptable ip address"

try:
    socket.inet_aton(hostIP)
except socket.error as e:
    print "Unacceptable ip address", e
else:
    print "Acceptable ip address, proceeding..."
    print "Checking host if " + hostIP + " exists..."
    if not hostIP in open(hostsFileLoc).read():
        print hostIP + " does not yet exist, checking valid required input..."
        if hostName != "*" and hostIP != "*":
            print "...processing..."
            with open(hostsFileLoc,'a+') as hostsFilePython, open(hostsLookFileLoc, 'a+') as hostsLookFileCSV, open(hostsURLFileLoc, 'a+') as hostsURLPython:
                print "..host IP adddress for ping testing.."
                hostsFilePython.write(hostIP + "\n")
                print "..and, all values for referencing.."
                hostsLookFileCSV.write(hostIP + "," + hostName + "," + hostURL + "," + hostMan + "," + hostModel + "," + hostType + "," + hostDC + "," + "\n")
                if hostURL != "*": 
                    "..adding URL for webping testing.."
                    hostsURLPython.write("[" + hostName + "]\n" + "url = " + hostURL + "\n" + "sleep = 60" + "\n" + "\n")
                    print "done!"

        else:
            print "..failed! - Both host IP address and host name required"
    else:
        print hostIP + " already exists, please review lookups." 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T19:25:32.667

您可以使用以下模板，以便捕获套接字错误。

```
try:
    your block here
except socket.error:
    print "your message" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T19:45:08.977

这：

```
not hostIP in open(hostsFileLoc).read() 
```

会将整个文件作为单个字符串读取，然后`hostIP`在该字符串中查找。这也会找到部分匹配项，例如`"92.168.1.21"`in `"192.168.1.2"`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T21:08:21.030

您将使用的一些 Python 代码将引发异常。因此，您必须编写代码以适应如下异常：

```
import socket

hostIP=sys.argv[1]

try:
  socket.inet_aton(hostIP):
  return True
except socket_error:
  return False 
```

# facebook - Facebook Graph API - 按页面 id 查找页面

> ID：11276977
> 
> 赞同：3
> 
> 时间：2012-06-30T19:22:09.547
> 
> 标签：facebook, facebook-graph-api

是否可以通过以下方式找到 Facebook 页面`page_ID`？

我有一个 Facebook 页面 id 的列表 - 但我想找到并显示实际的 Facebook 页面并显示有关该页面的一些一般信息。这可能吗？我将不胜感激快速教程和其他教程的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T19:55:19.580

是的，这是可能的。

您只需将 id 添加到 Facebook URL 的末尾即可显示任何页面：`http://facebook.com/ID`.

至于有关页面的一般信息，发送请求`https://graph.facebook.com/ID`将返回一个 JSON 对象，其中包含有关页面的一些基本详细信息。除非页面所有者对页面设置了限制，否则不需要访问令牌。

至于教程，[Facebook Developer 站点上的 Graph API 页面](http://developers.facebook.com/docs/reference/api/)和[Facebook Graph API explorer](http://developers.facebook.com/tools/explorer)是最好的起点。

# javascript - 有时是否需要使用多个 javascript 库？

> ID：11276979
> 
> 赞同：12
> 
> 时间：2012-06-30T19:22:24.043
> 
> 标签：javascript, jquery

我是 Web 开发的新手，并不完全了解 js 框架在应用程序中所扮演的角色。我从 jQuery 开始，但人们说我应该为我的项目尝试原型.js 或 node.js，这是一个多人策略游戏。

尽早选择一个框架是否重要，并确保它可以满足您的所有需求，这样您就不必使用多个框架？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T19:44:58.387

> 我是 Web 开发新手，不完全了解 js 框架在应用程序中的作用

**你是新人，但你很幸运！**

几年前，开发人员很难解决跨浏览器问题，涉及 CSS（仍然有一点）、事件处理、动画、DOM 操作。您必须经常为每个浏览器编写不同的代码。

JavaScript 库出现并解决了开发人员的问题，他们在幕后做了所有的魔法，你编写相同的代码（几乎总是）在每个浏览器中工作。换句话说，JavaScript 库通过为您提供可用于任何浏览器的一致功能集来自行解决跨浏览器问题。

通常，JavaScript 库会处理这些或提供以下选项：

*   跨浏览器问题处理
*   动画片
*   自定义对话框和小部件
*   编写更少代码的能力
*   特定的选择器引擎
*   DOM的创建/修改
*   事件处理
*   实用功能
*   AJAX

> 我从 jQuery 开始，但人们说我应该为我的项目尝试原型.js 或 node.js，这是一个多人策略游戏。

本质上他们做同样的事情（上面提到过），由你决定你会去哪一个。我个人喜欢 jQuery，因为它很容易上手并且有 CSS-Like 选择器机制。

Node.JS 是完全不同的野兽，与基于客户端 JavaScript 的 jQuery 或 Prototype 不同，node.js 是服务器端 JavaScript。

> 尽早选择一个框架是否重要，并确保它可以满足您的所有需求，这样您就不必使用多个框架？

除非您需要它，例如取决于您的需要，否则它并不重要。虽然我个人建议你先*学习 JavaScript 本身*，这样当你以后学习 JavaScript 库时，你应该能够充分利用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T19:34:10.493

javascript 框架的作用非常简单：为您提供一组更高级别的功能，以便您可以构建您的应用程序而无需重新编码之前已经完成的事情，并为开发提供一个结构。您可以将 jQuery 或原型.js 视为其他人发现经常需要一次又一次地编写的函数集，因此他们已经为您完成了。诸如在屏幕上为对象设置动画，或者在 DOM 中合并和重新排列元素等事情对于许多应用程序来说都是常见的，因此这些框架和许多其他框架都试图简化这些常见任务。另一件好事是他们以*最佳方式为您解决了每个平台*的常见问题，因此无论使用哪种浏览器或手机，您都可以获得类似的体验——过去并非如此。

Node.js 是不同的东西。它是一种服务器端语言（当然语言是 javascript），但它扮演 php 或 perl 或 python 或 ruby​​（或您最喜欢的服务器端语言）的角色，因为它实际上运行代码来与数据库对话并获取页面服务器，而其他人在浏览器中的用户机器上正常运行代码。

我建议只选择一个框架并好好学习它（我个人的投票是 jQuery，因为它拥有广泛的开发人员基础、[不错的插件](http://jqueryui.com/demos/)、良好的[文档](http://api.jquery.com/)以及代码的可理解性），但由于这些框架中的每一个都只是普通的 javascript，任何你不能做的事情，你都可以用普通的 javascript 桥接。实际上，您可以在其中任何一个中做任何事情，只是一些任务在一个框架中会比另一个框架更简单。当与几个人一起工作时，虽然他们可能不会主动发生冲突，但这将是一场开发噩梦。

对于您的特定应用程序，您将需要前端和后端才能使其工作。如果您尝试构建的应用程序是一个网站，那么请务必使用这些 javascript 框架之一，但如果您正在谈论 android 或 iphone 上的移动应用程序，则您不需要这些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T19:41:00.227

只是扩展评论中的内容并澄清这些“框架”是什么：

您可以使用任意数量的框架，并且它们应该（如果写得好）不会相互冲突。某些库可能存在问题，因为它们分配给特殊字符，例如 $ 并且由于 JavaScript 中尚未使用的特殊字符数量有限，这几乎是不可避免的，但通常更成熟的框架已经识别出这一点并编写了解决方法，即jQuery.noConflict 基本上重新分配了之前使用 $ 的任何内容。

至于每个框架，都有负载，每个框架都有自己的特定领域/API，适合特定的编程需求，例如：

Sizzle (用于 jquery) - 用于操作 DOM 的优秀选择器语法

jQuery - 优秀的插件架构，成熟的 API 可以满足很多常见的编程需求，结合 jQuery UI 时优秀的 UI 组件

Handlebars.js - 基于模板的 dom 操作 + 其他一些不错的 MVVM（？）

Sproutcore.js, node.js... 等等 - 阅读每一个，看看他们说框架的目标是什么。

你可以将它们混合在一起——你可能会发现偶尔的冲突，你应该向作者报告，但不要局限于一个框架。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T19:50:48.570

很容易对可用框架的范围感到困惑——如今，似乎每个月都有一个新框架进入时代精神。

关键是使用适合你的那些，并且至关重要的是，要了解并非所有框架和库都做同样的事情。

例如，jQuery 以 DOM 操作和 AJAX 为中心。是的，它有更多方面，但这些是它的卖点。将其与 Underscore.js 进行比较，后者旨在丰富数据级 API，使其更类似于 PHP 之类的东西。毕竟，与此类语言相比，JavaScript 具有传统上受限的 API（尽管随着连续的 ECMA 版本和供应商特定的 API 不断变得更加丰富）。

正如 hackartist 在他的回答中提到的那样，Node.js 与上述两者完全无关，因为它是服务器端的，而不是客户端。

我会避免使用多个焦点相似的库，尤其是在您的早期阶段。您会遇到同时加载 jQuery UI 和 extJS 的项目。是的，这为您提供了更多可玩性，但考虑到重叠，对页面加载权重的负面影响超过了好处。选择你喜欢的外观，最重要的是，你喜欢它的文档和社区。

最后，请记住库和框架并不是一回事，尽管这两个术语经常互换使用有些不明智。它们都是引擎盖下的 JS；库旨在提供功能和模式，至少通常，这意味着编写的代码比使用原生 JavaScript 或“香草”JavaScript 编写的代码少，而框架则关注总体结构您的代码以及各个部分如何关联或互操作。

# iphone - 如何在 for 循环中创建 NSArray

> ID：11276982
> 
> 赞同：1
> 
> 时间：2012-06-30T19:22:35.230
> 
> 标签：iphone, objective-c, ios, cocoa-touch, sdk

如何通过在 for 循环中执行来缩短以下代码？

```
NSArray *images = [NSArray arrayWithObjects:
                         [UIImage imageNamed:@"z1.png"],
                         [UIImage imageNamed:@"z2.png"],
                         [UIImage imageNamed:@"z3.png"],
                         [UIImage imageNamed:@"z4.png"],
                         [UIImage imageNamed:@"z5.png"],
                         [UIImage imageNamed:@"z6.png"],
                         [UIImage imageNamed:@"z7.png"],
                         [UIImage imageNamed:@"z8.png"],
                         [UIImage imageNamed:@"z9.png"],
                         [UIImage imageNamed:@"z10.png"],
                         [UIImage imageNamed:@"z11.png"],
                         [UIImage imageNamed:@"z12.png"],
                         [UIImage imageNamed:@"z13.png"],
                         [UIImage imageNamed:@"z14.png"],
                         [UIImage imageNamed:@"z15.png"],
                         [UIImage imageNamed:@"z16.png"],
                         [UIImage imageNamed:@"z17.png"],
                         [UIImage imageNamed:@"z18.png"],
                         [UIImage imageNamed:@"z19.png"],
                         nil]; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-30T19:25:00.703

`NSMutableArray`正如评论中提到的@Teak 一样，魔法就在其中。事实上，所有容器类都有一个可变版本，比如`NSString`, `NSDictionary`,`NSSet`等。

```
NSMutableArray *images = [NSMutableArray array];

for (NSUInteger i = 1; i <= 19; i++) {
    NSString *imageName = [NSString stringWithFormat:@"z%d.png", i];
    [images addObject:[UIImage imageNamed:imageName];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T19:27:53.307

如果您不介意停止动画，您可以从 iOS 5 开始执行以下操作：

```
UIImage *myAnimatedImage = [UIImage animatedImageNamed:@"z" duration:10]; 
```

它将自动搜索图像并为其添加数字。需要注意的是，您不能像在`UIImageView`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T19:26:30.327

您需要使用`NSMutableArray`. 但是，如果不变性很重要，您可以将结果放在`NSArray`末尾。

```
NSMutableArray *workingArray = [NSMutableArray array];
for (int i = 0; i < NUM_IMAGES; i++) {
    [workingArray addObject:[UIImage imageName:[NSString stringWithFormat:@"z%d.png", i]];
}

NSArray *images = [NSArray arrayWithArray:workingArray]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T19:25:56.180

```
NSMutableArray *images = [[NSMutableArray alloc] initWithCapacity:19];

for(int i = 1; i <=19; i++)
    [images addObject:[UIImage imageNamed:[NSString stringWithFormat:@"z%d.png, i]]]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-30T19:27:03.680

```
 NSMutableArray *arrImage = [NSMutableArray  arrayWithCapacity:0];
 for(int i = 1; i<= 19;i++)
 {
    [arrImage  addObject:[UIImage imageNamed:[NSString stringWithFormat:@"z%d.png",i]]];
 } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-04T12:52:17.763

您加载一个动画 UIImage，它会为您处理文件名。然后你从中检索图像数组。

`NSArray* images = [UIImage animatedImageNamed:@"z" duration:1].images;`

# scala - Scala 2.10 和包反射

> ID：11276983
> 
> 赞同：12
> 
> 时间：2012-06-30T19:22:39.800
> 
> 标签：scala, reflection, scala-2.10

如何在 Scala 2.10 的反射中反映包层次结构？我可以找出存在哪些子包，或者父包是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T09:39:00.377

由于在一般情况下不可能在类加载器中枚举包，因此 Scala 反射也不提供此功能。这与 scalac 的情况不同，scalac 提供了一个可以枚举的目录列表。

向上遍历层次结构很容易。只需使用`symbol.owner`.

# database - 如何设置 derby.database.classpath 来运行 Java DB Embedded？

> ID：11276984
> 
> 赞同：1
> 
> 时间：2012-06-30T19:23:07.397
> 
> 标签：database, classpath, derby, embedded-database, javadb

我整天都在搜索有关此类似问题的文档，但似乎找不到答案。我很容易在服务器客户端模式下找到了一个数据库（org.apache.derby.jdbc.ClientDriver），但是我对嵌入式模式下的结果数据库感到困惑（org.apache.derby.jdbc.EmbeddedDriver）。

一切似乎都很好，与数据库的连接是成功的，但它总是给我这个错误：

> java.sql.SQLSyntaxErrorException：表/视图“APP.TABELJEMBATAN”不存在。
> 
> ```
> http://i1263.photobucket.com/albums/ii633/lindafitriani/javadb4.jpg 
> ```

我的数据库存在，见下文：

> ```
> http://i1263.photobucket.com/albums/ii633/lindafitriani/javadb1.jpg
> http://i1263.photobucket.com/albums/ii633/lindafitriani/javadb2.jpg 
> ```

这是我的 derby.log 文件的内容：

> 2012-06-30 18:08:34.170 GMT：引导 Derby 版本 Apache 软件基金会 - Apache Derby - 10.5.3.0 - (802917)：数据库目录 C:\Users\Linda 上的实例 a816c00e-0138-3e94-78a3-000000b35a08 Fitriani\Documents\NetBeansProjects\Jembatan\Jembatan2
> 
> 数据库类加载器已启动 - derby.database.classpath=''
> 
> ```
> http://i1263.photobucket.com/albums/ii633/lindafitriani/javadb3.jpg 
> ```

数据库位置是正确的（在我的工作目录上），但 derby.database.classpath 是空的......有人知道如何解决这个问题吗？

这是我的代码：

```
package jembatan;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
/**
 *
 * @author Linda Fitriani
 */
public class DBConnect {
        private static Connection conn;
    private static String url = "jdbc:derby:Jembatan2;create=true;";
    private static String user = "APP";
    private static String pass = "linda";

    public static Connection connect() throws SQLException{
        try{
            Class.forName("org.apache.derby.jdbc.EmbeddedDriver").newInstance();
        }catch(ClassNotFoundException cnfe){
            System.err.println("Error: ClassNotFoundException"+cnfe.getMessage());
        }catch(InstantiationException ie){
            System.err.println("Error:InstantiationException"+ie.getMessage());
        }catch(IllegalAccessException iae){
            System.err.println("Error:IllegalAccessException"+iae.getMessage());
        }

        conn = DriverManager.getConnection(url,user,pass);
        return conn;
    }
    public static Connection getConnection() throws SQLException, ClassNotFoundException{
        if(conn !=null && !conn.isClosed())
            return conn;
        connect();
        return conn;

    }
}

private void buildData(){

          Connection c ;
          data = FXCollections.observableArrayList();
          try{
              c = DBConnect.connect();
            //SQL FOR SELECTING ALL OF APP.TABELJEMBATAN
            String SQL = "select * from APP.TABELJEMBATAN";
            //ResultSet
            ResultSet rs = c.createStatement().executeQuery(SQL);

            /**********************************
             * TABLE COLUMN ADDED DYNAMICALLY *
             **********************************/

            for(int i=0 ; i<rs.getMetaData().getColumnCount(); i++){
                //We are using non property style for making dynamic table
                final int j = i;                
                TableColumn col = new TableColumn(rs.getMetaData().getColumnName(i+1));
                col.setCellValueFactory(new Callback<TableColumn.CellDataFeatures<ObservableList,String>,ObservableValue<String>>(){                    
                    public ObservableValue<String> call(TableColumn.CellDataFeatures<ObservableList, String> param) {                                                                                              
                        return new SimpleStringProperty(param.getValue().get(j).toString());                        
                    }                    
                });

                tableview.getColumns().addAll(col); 
                col.setMinWidth(200);
                System.out.println("Column ["+i+"] ");
            }

            /********************************
             * Data added to ObservableList *
             ********************************/
            while(rs.next()){
                //Iterate Row
                ObservableList<String> row = FXCollections.observableArrayList();
                for(int i=1 ; i<=rs.getMetaData().getColumnCount(); i++){
                    //Iterate Column
                    row.add(rs.getString(i));
                }
                System.out.println("Row [1] added "+row );
                data.add(row);

            }

            //FINALLY ADDED TO TableView
            tableview.setItems(data);
          }catch(Exception e){
              e.printStackTrace();
              System.out.println("Error on Building Data");             
          }

      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T05:56:07.800

我找到了解决方案...

嵌入式模式在neatbeans安装目录上创建数据库..所以，我只是指向

```
"jdbc:derby:C:/Users/Linda Fitriani/.netbeans/7.1/derby/databaseJembatan;create=false;" 
```

这就是应用程序找不到数据库的原因，数据库位于 netbeans 安装目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-10T22:22:40.847

只需确保在数据库连接 URL 中添加 create=true 并确保 url 引用 db 所在的目录 指定 Derby 在数据库中搜索 jar 文件时应使用的类路径 确保将 DerbyClient.jar 添加到你的项目库

下次运行该应用程序时，您会注意到您不应再次启动服务器，并且当您将 jar 文件复制到另一个位置时，请确保 (lib) 目录与它

我希望这会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-09T15:09:58.113

我也遇到了另一个问题（无法在 hive 中显示表），但在安装 hive 和 derby 后出现相同的日志消息

我终于意识到所有权问题（hduser 应该被授予作为配置单元文件夹的所有者......）.e

# exception-handling - 在 OCaml 中模拟 try-with-finally

> ID：11276985
> 
> 赞同：10
> 
> 时间：2012-06-30T19:23:20.843
> 
> 标签：exception-handling, ocaml

OCaml`try .. with`不提供`finally`像 Java 这样的子句。不过，它会很有用，尤其是在处理副作用时。例如，我喜欢打开一个文件，将打开的文件传递给一个函数，然后关闭它。如果函数引发异常，我必须捕获它才能有机会关闭文件。当打开多个文件并且打开​​本身也可能失败时，这会变得越来越复杂。是否有既定的编程模式来处理这个问题？

下面是一个说明问题的简单函数。如果提供了 a ，则函数`f`应用于属于文件的通道，否则。因为没有 finally 子句，所以出现了两次。`path``stdin``close_in io`

```
let process f  = function 
    | Some path -> 
        let io = open_in path in 
            ( (try f io with exn -> close_in io; raise exn)
            ; close_in io
            )
    | None -> f stdin 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T22:31:57.197

> 是否有既定的编程模式来处理这个问题？

是的，将资源清理与异常处理分离的包装函数。我所做的是使用通用包装器`unwind`（我更喜欢使用的 LISPism）：

```
let unwind ~(protect:'a -> unit) f x =
  try let y = f x in protect x; y
  with e -> protect x; raise e 
```

这是一个简单的包装器，*它不能*正确解释 ; 中引发的异常`protect`。`protect`一个经过全面检查的包装器，即使它本身失败也确保只调用一次可能是[Yaron Minski 的](http://caml.inria.fr/pub/ml-archives/caml-list/2003/07/5ff669a9d2be35ec585b536e2e0fc7ca.en.html)，或者我认为更清晰的这个：

```
let unwind ~protect f x =
  let module E = struct type 'a t = Left of 'a | Right of exn end in
  let res = try E.Left (f x) with e -> E.Right e in
  let ()  = protect x in
  match res with
  | E.Left  y -> y
  | E.Right e -> raise e 
```

然后，我根据需要定义特定的实例，例如：

```
let with_input_channel inch f =
  unwind ~protect:close_in f inch

let with_output_channel otch f =
  unwind ~protect:close_out f otch

let with_input_file fname =
  with_input_channel (open_in fname)

let with_output_file fname =
  with_output_channel (open_out fname) 
```

我为特定的功能切换参数的原因`with_`是我觉得高阶编程更方便；特别是，通过定义一个应用程序运算符à la Haskell，我可以写：

```
let () = with_output_file "foo.txt" $ fun otch ->
  output_string otch "hello, world";
  (* ... *) 
```

语法不是很重。对于一个更复杂的示例，请考虑以下内容：

```
let with_open_graph spec (proc : int -> int -> unit) =
  unwind ~protect:Graphics.close_graph (fun () ->
    proc (Graphics.size_x ()) (Graphics.size_y ());
    ignore (Graphics.wait_next_event [Graphics.Button_down]);
    ignore (Graphics.wait_next_event [Graphics.Button_up]))
    (Graphics.open_graph spec) 
```

可以与类似的调用一起使用`with_open_graph " 400x300" $ fun width height -> (*...*)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-05-06T22:24:46.340

从 OCaml 4.08 开始，[`Fun.protect`](https://ocaml.org/api/Fun.html)标准库中有一个提供此功能的函数。

使用它，您的示例将如下所示：

```
let process f  = function 
  | Some path ->
      let io = open_in path in
      Fun.protect (fun () -> f io)
        ~finally:(fun () -> close_in io)
  | None -> f stdin 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-06T21:45:16.347

摘自Xavier Leroy 和 Didier Rémy所著[的 OCaml 中的 Unix 系统编程一书，在](http://ocamlunix.forge.ocamlcore.org)[通用性一章中](http://ocamlunix.forge.ocamlcore.org/generalities.html)

“OCaml 语言中没有内置的 finalize 构造 try ...finalize，但它可以很容易地定义：”

```
let try_finalize f x finally y =
  let res = try f x with exn -> finally y; raise exn in
  finally y;
  res 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-30T19:31:43.023

据我所知，它不是 OCaml 内置的，但您可以编写一个库来对此类模式进行编码。一个示例库是[Catch me if you can](http://dutherenverseauborddelatable.wordpress.com/2008/07/02/improving-exception-management-in-ocaml/)，它是错误的一元编码。[这](http://mjambon.com/extend-ocaml-syntax.html)`finally`是使用元编程添加构造的教程。可能还有其他方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-05T12:23:16.267

OCaml Batteries 库集合提供了两个最终可用于

[http://ocaml-batteries-team.github.io/batteries-included/hdoc/BatPervasives.html](http://ocaml-batteries-team.github.io/batteries-included/hdoc/BatPervasives.html)

```
val finally : (unit -> unit) -> ('a -> 'b) -> 'a -> 'b 
```

`finally fend f x`调用`f x`，然后`fend()`即使`f x`引发异常。

```
val with_dispose : dispose:('a -> unit) -> ('a -> 'b) -> 'a -> 'b 
```

`with_dispose dispose f x`调用`f`on `x`，`dispose x`在`f`终止时调用（返回值或异常）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-05T15:44:12.220

如果函数和 finally 块都引发了异常，我更喜欢看到初始异常，所以我使用这样的东西：

```
type 'a result = OK of 'a | Exn of exn
let result_of f x = try OK (f x) with e -> Exn e

(** invokes [f x], and always releases [x] by invoking [release x] *)
let do_with x release f =
  let result = result_of f x in
  let closed = result_of release x in
  match result, closed with
  | Exn e, _ -> raise e (* [f x] raised exception *)
  | _, Exn e -> raise e (* [release x] raised exception *)
  | OK r, OK () -> r (* all OK *) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-30T20:15:51.630

这是一个选项。（我已经删除了匹配`path`项以将代码简化为一个最小的示例。）

```
let process f path =
  let exn = ref None in
  let io = open_in path in
  (try f io with e -> exn := Some e);
  close_in io;
  match !exn with Some e -> raise e | None -> () 
```

# jquery - 使用 AJAX、jquery 对话框和带有 .Net MVC 的 jquery.form.js 发送图像

> ID：11276988
> 
> 赞同：0
> 
> 时间：2012-06-30T19:23:45.057
> 
> 标签：jquery, ajax, asp.net-mvc-3, jquery-forms-plugin

我想使用 AJAX 将图像发送到 .Net MVC 服务器应用程序，我发现其中一种方法是使用[jquery.form.js](http://jquery.malsup.com/form/#file-upload)。但是我做不到，当我取消注释该部分时，它说请求无法序列化：

```
// the image I would like to pass
//thumb: $('#imagePath')[0], 
```

CSHTML文件生成的HTML如下：

*从 CreateItem.cshtml 生成的 HTML*

```
<div class="ui-dialog ui-widget ui-widget-content ui-corner-all" style="display: block;
z-index: 1002; outline: 0px none; height: auto; width: 557.6px; top: 62px; left: 280px;" tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-dialog-form">
<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">
    <div id="dialog-form" class="ui-dialog-content ui-widget-content" shape-id="3" style="width: auto;
        min-height: 0px; height: 296px;" scrolltop="0" scrollleft="0">
        <form class="item-form" method="post" action="/OrchardLocal/Course/CreateCourse"
        shape-id="3">
        <fieldset shape-id="3">
            <ul class="image-preview-list" shape-id="3">
                <li shape-id="3">
                    <div style="border-color: Black; border-width: thick;" shape-id="3">
                        <img id="thumb" class="image-from-popup" alt="some image" src="/OrchardLocal/Media/Default/Images/abc/abc.jpg"
                            shape-id="3">
                    </div>
                </li>
                <li shape-id="3">
            </ul>
            <label for="description" shape-id="3">
                Description</label>
            <textarea id="description" class="description-text text ui-widget-content ui-corner-all description-class"
                rows="2" name="description" cols="20" shape-id="3"></textarea>
        </fieldset>
        <input type="hidden" value="FApn3HBCkLLIo59k6ZFvlT4/Ug+3ZDhILay4C+hbdG7lAQfeWyms5ulVZ2scLkHgmwkqhDk0121dT03116VIVrSmWr3Tp0njksqX/Gnr3BK1nI7GdO1Em6ugdAbBJcUSNP0snS1DOHffG7sbq8x/dyK/ALI1bY+HDdIkk2oW5oC63YkV7Fq5pc7MjkPjTEj9o8oCYSFBsm0OdCzsZlpWFw=="
            name="__RequestVerificationToken" shape-id="3">
        </form>
    </div>
    <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
        <div class="ui-dialog-buttonset">
            <button type="button">
                Create</button>
        </div>
    </div>
</div> 
```

我有一个 javaScript 文件：

```
$(document).ready(function () {
    // bind '.item-form' and provide a simple callback function 
    $('.item-form').ajaxForm(function () {

        alert("Thank you for your comment!");
    });
}); 

$(function () {

    var UNIQUE_TITLE = "You must specify an unique title";
    var TITLE_IS_REQUIRED = "You must specify a title";
    var DESCRIPTION_IS_REQUIRED = "You must specify a description";

    $('#dialog-form').dialog({
        autoOpen: false,
        height: 400.6,
        width: 557.6,
        modal: true,
        draggable: false,
        resizable: false,
        buttons: {
            "Create": function () {

                var newContactItem = {
                    title: $.trim($("#title").val()),
                    description: $.trim($(".description-class").val()),
                    imagePath: $.trim($("#imagePath").val()),

                    // the image I would like to pass
                    //thumb: $('#imagePath')[0], 

                    __RequestVerificationToken: antiForgeryToken                    }

                var form = $('.item-form');

                $.ajax({
                    type: "POST",
                    url: form.attr("action"), 
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    data: JSON.stringify(newContactItem),
                    success: function (data) {
                        // There is no problem with the validation
                        if (data.valid) {
                            $('#eventos').html(html);
                        }

                      $.each(data.Errors, function (key, value) {
                            if (value != null) {
                                $("#Err_" + key).html(value[value.length - 1].ErrorMessage);
                            }
                        });

                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert(XMLHttpRequest.responseText);
                        alert("Critical Error!. Failed to call the server.");
                    }
                });

            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T20:14:26.857

您不能同时使用 ajaxForm 和 jQuery.post 来发送表单。我相信你需要重写，只使用 ajaxForm。

# statistics - 检测以特定频率生成的数据模式

> ID：11276992
> 
> 赞同：4
> 
> 时间：2012-06-30T19:24:03.710
> 
> 标签：statistics, machine-learning, signal-processing

假设我有几个信号发生器，每个信号发生器都有一个特定的频率。例如，发电机 A 每 3 秒生成 +3 号，发电机 B 每 5 秒生成 +4 号等。

我不知道有多少个信号发生器，我也不知道它们的频率或产生的数量。但我确实有所有这些生成器产生的时间戳和数字流。当然，时间戳可能会偏离一点，例如我可能会看到生成器 A 在 0.5、3.51、6.49 等处生成 +3。信号也可能关闭——我可能会看到 +2.99、+3.01。我们可以假设它们并没有偏离很多。并非流中的所有数字都是由固定频率信号发生器生成的。

我可以使用任何现有算法来找出流背后的生成器吗？我不希望找到所有的生成器，但我希望拥有尽可能多的生成器。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:22:37.817

阶乘隐藏马尔可夫模型可能适用于这项任务（http://www.ee.columbia.edu/~sfchang/course/spr/papers/factorial-HMM-97.pdf）。还有无限阶乘隐藏马尔可夫模型（http://eprints.pascal-network.org/archive/00004287/01/nips08.pdf），它可能能够自适应地检测系统中生成器的数量。不幸的是，我不知道这些模型的任何可用实现。

您还可以在数据的固定长度窗口上尝试独立分量分析（谷歌搜索应该找到许多实现）。

# java - java中的“qualified this”构造是什么意思？

> ID：11276994
> 
> 赞同：32
> 
> 时间：2012-06-30T19:24:26.990
> 
> 标签：java, jls

在[Effective Java](http://books.google.co.in/books/about/Effective_Java.html?id=Ft8t0S4VjmwC&redir_esc=y) 中的项目“第 22 项：支持静态成员类而不是非静态”中，Josh Bloch 说：

> 非静态成员类的每个实例都隐含地与其包含类的封闭实例相关联。在非静态成员类的实例方法中，您可以调用封闭实例上的方法或使用限定的 this 构造获取对封闭实例的引用。

*他所说的Qualified This Construct*是什么意思？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-30T19:40:08.057

没有限定符，`x()`将递归。使用限定符，将`x()`调用封闭实例的方法。

```
class Envelope {
  void x() {
    System.out.println("Hello");
  }
  class Enclosure {
    void x() {
      Envelope.this.x(); /* Qualified*/
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-01T00:51:55.767

A non-static member class has an implicit reference to an instance of the enclosing class. The *Qualified This* term refers to the instance of the enclosing class. If the enclosing class is `A`, and the inner class is `B`, you can address the enclosing reference of `A` from `B` as `A.this`.

# c++ - 模板函数编译错误

> ID：11276999
> 
> 赞同：0
> 
> 时间：2012-06-30T19:24:50.440
> 
> 标签：c++

我有 .inl 和 .cpp 文件，.inl 文件包含模板函数，我已经在下面声明了全局变量，

**int global_value = 0;** 并在编译该程序后使用 extern 关键字链接到 .cpp 文件我得到以下错误

多重声明错误首先定义在这里错误

有人可以建议我为什么会收到此错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T19:30:10.280

简而言之 - 在 cpp 文件中，有：

`int global_value = 0;`

在 inl 文件中，有：

`extern int global_value;`

全局变量应在一个且仅一个翻译单元（cpp 文件）中声明。所有其他翻译单元应`extern`直接或通过某些头文件使用。在您的情况下，包含 .inl 文件的每个翻译都有效地声明了全局，因此错误。因此，在 cpp 中声明它，并将其`extern`放在 inl 中（假设您将 inl 文件包含在其他 cpp 文件中）。