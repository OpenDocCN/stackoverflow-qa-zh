# StackOverflow 问答 11041000-11041999

# iphone - 将过滤后的 NSArray 写回 plist

> ID：11041001
> 
> 赞同：0
> 
> 时间：2012-06-14T20:38:50.043
> 
> 标签：iphone, uitableview, nsarray, plist

我将 plist 加载到 NSArry，过滤该数组以捕获我需要的数据，然后将数据呈现给 UITableView。这很好用。

**编辑：**

我正在使用字典数组。Plist 充满了字典数组。

这就是我所做的：

```
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"/data.plist"];
//array is filled with dictionaries
array = [NSMutableArray arrayWithContentsOfFile:filePath];

//filter the array to catch appropriate data (there are maybe 10 objects):
self.arrayFiltered = [NSMutableArray arrayWithCapacity:[array count]];
NSDictionary *dict;
for (dict in array)
    if ([[dict valueForKey:@"globalKey"] isEqualToNumber:[NSNumber numberWithInt:year]])
        [arrayFiltrirani addObject:dict]; 
```

现在我用来自 arrayFiltered 的数据填充 tableView。现在我想从 tableView 和 arrayFiltered 中删除一行。

```
[self.arrayFiltrirani removeObjectAtIndex:indexPath.row]; 
```

但！！！如何更新原始数组并将其保存到 plist？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:05:37.820

由于您使用的是字典，因此您需要将实际的字典容器对象写回 data.plist 文件，所以

```
NSDictionary *myDictionary = [masterArray objectAtIndex:indexOfDictionary];
NSMutableArray *myDataArray = [myDictionary objectForKey:@"dataArray"];
[myDataArray removeObject:objRemovedFromTable]; //or removeObjectAtIndex:indexPath.row
NSString *filePath = [docsDirectory stringByAppendingPathComponent:@"data.plist"];
[masterArray writeToFile:filePath atomically:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T09:06:40.730

我设法解决了我的问题。基本上我从主数组、“过滤”数组和“其他”数组中制作了 2 个数组。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"/data.plist"];

array = [NSMutableArray arrayWithContentsOfFile:filePath];

self.arrayFiltered = [NSMutableArray arrayWithCapacity:[array count]];
self.arrayOther = [NSMutableArray arrayWithCapacity:[array count]];

NSDictionary *dict;
for (dict in array)
    if ([[dict valueForKey:@"globalKey"] isEqualToNumber:[NSNumber numberWithInt:godinaMjesec]])
        [arrayFiltered addObject:dict];
    else {
        [arrayOther addObject:dict];
    } 
```

现在，当我想从 arrayFiltered （tableView 从中获取数据）中删除数据时：

```
[self.arrayFiltered removeObjectAtIndex:indexPath.row]; 
```

要覆盖原始数组：

```
[self.arrayOther addObjectsFromArray:self.arrayFiltered];
[self.arrayOther writeToFile:filePath atomically:YES]; 
```

这可能不是正确的方法，但它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:13:55.123

如果它是一个需要一段时间才能写入的大型 plist 文件，那么您可能使用了错误的工具。我会使用 Core Data 来删除单独的数据行。

# parsing - 如何用自定义语言解析复杂的函数调用

> ID：11041002
> 
> 赞同：0
> 
> 时间：2012-06-14T20:39:09.200
> 
> 标签：parsing, programming-languages

我正在尝试创建一种有趣的自定义编程语言，但我对我想要通过函数调用支持的语法有点忘乎所以。

```
uses ConsoleIO

r(int)success start (int) nArgument
    printHelloWorlds
    return 0

printHelloWorld 
    print "Hello world\n"

printHelloWorlds
    getNumberFrom 4 into timesToPrint
    timesPrinted = 0
    printHelloWorld
    timesPrinted = timesPrinted + 1
    if timesPrinted < timesToPrint
        goToLine 17

getNumberFrom (int)number into o(int) out
    name = "John"
    out = 3 + name.findFirstOccurenceOf 'o' + number

r(int) (string)str .findFirstOccurenceOf (char)c
    //later
    return 3 
```

希望你能对我正在尝试做的事情有一个基本的了解。更加具体，

*   将 r 放在变量前面使其成为返回值
*   变量只是通过被引用来“声明”
*   函数名称不能包含两个连续的“名称标记”，每个名称标记之间必须至少有一个参数（并且可能多个变量之间需要逗号，尽管如果我可以在没有那个限制）
*   将 o 放在变量前面使其成为“输出”值。在这种情况下，函数必须在读取之前写入它，并且在调用函数之前变量不需要存在（在“getNumberFrom 4 into timesToPrint”时，timesToPrint 在 getNumberFrom (int) into o( int) 被称为

我已经将词法分析器编程为：

*   解释函数声明、处理范围、处理文字等
*   阅读常规代码行并列出每个标记，以及名称中包含每个标记的所有函数的列表（如果有的话），识别标记是否是变量的名称
*   我还没有处理流控制（if/goto），它们目前被视为普通函数

但是，现在我需要真正弄清楚每行调用的函数、顺序、输入以及输出（o 变量），我遇到了一些障碍. 我没有这方面的经验，我不知道从哪里开始。我知道我需要某种递归函数。

基本上，谁能告诉我我正在寻找什么类型的算法，或者只是一些流行语来开始谷歌搜索以了解更多信息？我应该使用 bison 还是 antlr 或其他什么，或者这种灵活/奇怪的语言会不会太复杂？

注意：我没有使用 Bison 或 Flex 或其他任何东西，我自己用 C++ 编写所有代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:45:09.367

如果您正在构建一种复杂的编程语言，您应该强烈考虑使用解析器生成器`bison`或 ANTLR 来为您进行解析。此类工具的优势在于，您只需描述您的语言的规则是什么，以及找到此类规则时该怎么做，该工具会自动为您生成解析代码。

`bison`支持 LR 系列中的自底向上解析器：LALR(1)、LR(1)、GLR(1) 和新的 IELR(1) 算法。这些捕获了大量语言，但您需要了解一些关于解析算法的知识，以便修复您可能遇到的一些错误（即移位/归约和归约/归约）。

ANTLR 使用 LL(*) 解析器，它捕获的语言集稍微少一些，但往往在许多编程语言上都能很好地工作。

你的问题没有一个正确的答案。我会使用任何你觉得更舒服并有正确语言输出的工具。

如果你坚持滚动自己的解析器，那么你实际上可以手动实现上述算法，但这非常困难。最简单的选择是使用带回溯的自上而下递归下降解析器，或者调整语法直到它为 LL(1)，然后使用简单的自上而下、非回溯解析器。也就是说，我认为你让事情变得比他们需要的要困难得多。

希望这可以帮助！

# c++ - 从剪贴板获取多个 Outlook 附件

> ID：11041005
> 
> 赞同：1
> 
> 时间：2012-06-14T20:39:20.307
> 
> 标签：c++, outlook, clipboard, ole, idataobject

我正在尝试从剪贴板获取**多个** [Outlook](http://en.wikipedia.org/wiki/Microsoft_Outlook)附件。

当用户选择多个附件并将它们放置在剪贴板中（*或拖动它们*）时，`IDataObject`正在创建并放置在剪贴板中。

我知道可以在包含虚拟对象名称的`IDataObject`using中找到文件名。`CLIPFORMAT CFSTR_FILEDESCRIPTOR`另外，据我了解，文件内容是使用`CLIPFORMAT CFSTR_FILECONTENTS`. 但是当我这样做时，我只得到一个文件，我不明白如何获取已复制到剪贴板的其他文件。

我发现使用该`lindex`成员`FORMATETC`可以获取其他文件，但由于某种原因它不起作用。

谁能解释或举个例子我怎样才能得到其他附件（更喜欢*C++*）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:17:46.773

查看[CodeProject Outlook Drag-n-Drop 示例](http://www.codeproject.com/Articles/28209/Outlook-Drag-and-Drop-in-C)。它`IDataObject`在包装类中使用`OutlookDataObject`，但它与**剪贴板**使用的接口相同。在 C# 中，您可以执行以下操作...

```
// IDataObject wrapper
OutlookDataObject dataObject = new OutlookDataObject(Clipboard.GetDataObject());

// retrieving filenames
string[] filenames = (string[])dataObject.GetData("FileGroupDescriptorW");
this.label1.Text = "filenames:\n    " + string.Join(",", filenames) + "\n";

// writing out file contents
MemoryStream[] filestreams = (MemoryStream[])dataObject.GetData("FileContents");

this.label1.Text += "Files:\n";
for (int fileIndex = 0; fileIndex < filenames.Length; fileIndex++)
{
    //use the fileindex to get the name and data stream
    string filename = filenames[fileIndex];
    MemoryStream filestream = filestreams[fileIndex];
    this.label1.Text += "    " + filename + "\n";

    //save the file stream using its name to the application path
    FileStream outputStream = File.Create(filename);
    filestream.WriteTo(outputStream);
    outputStream.Close();
} 
```

查看`OutlookDataObject`包装类，您应该能够在 C++ 中实现类似的东西。

# nhibernate - NHibernate - 在遗留系统中映射自定义引用类型

> ID：11041007
> 
> 赞同：1
> 
> 时间：2012-06-14T20:39:26.207
> 
> 标签：nhibernate, nhibernate-mapping

我正在研究遗留系统，并且正在将其移植到休眠状态。

该系统基于生成的“实体”C# 类，以及基于将跨实体引用包装在特殊“链接”类中的数据访问基础设施。这是实现延迟加载的错误尝试，实际上这弊大于利。

例子：

```
public class Order
{
    public Guid Id { get; protected set;}
    public int Total {get; set;}
    public Link<Customer> Customer {get; set;}
}

public class Customer
{
    public Guid Id { get; protected set;}
    public string Name {get; set;}
}

public class Link<T>
{
   ... Snip ...
   public T Entity { get; private set;}
} 
```

在订单表中，“客户”列是标准外键。

这意味着在整个系统中，与这些“实体”的任何工作都采用以下形式：

```
if (Order.Customer != null)
{
    if (Order.Customer.Entity != null)
    {
        // Do stuff
    }
} 
```

经过大量研究，我找不到一种方法来映射这些类，以允许理智地使用 nhibernate 的查询功能。我找到的最接近的解决方案是**IPropertyAccessor**接口，它可能会解决我的映射问题，但不会很好地处理查询。

几点注意事项： 1) 不幸的是，Link 包装类的主要问题仍然存在，如果不重写整个遗留基础设施，我无法删除它。2) 我可以完全访问代码生成模板，并且可以根据我的需要更改实体类结构。例如，为了解决一个不同的主要问题，我为每个实体生成了一个类似 poco 的接口： public interface IOrder { public ICustomer Customer {get; 放;} ... }

```
public class Order : IOrder
{
    ...
    public Link<Customer> Customer {get; set;}
    ICustomer IOrder.Customer
    {
       (Adapting code here)
    } 
    ...
} 
```

简而言之：来自 NH 大师的任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:22:06.753

由于我无法发表评论，我将分享这个可以帮助您解决问题的[链接，我认为您必须映射链接的所有可能用途，但是您将有很多限制，因为这不是 NHibernate 所期望的](http://ayende.com/blog/2951/nhibernate-and-generic-entities)

# objective-c - 如何在 iOS 中使用 POST 请求发送图像

> ID：11041008
> 
> 赞同：0
> 
> 时间：2012-06-14T20:39:38.560
> 
> 标签：objective-c, post, httprequest

我需要使用发布请求将图像发送到我的服务器。我已经为它编写了所需的 PHP 代码。但是我必须如何从我的设备发送它？我见过 ASIHTTPRequest 框架，但它已经过时了，而且 AFNetworking 使事情变得复杂。如果可以的话，我想通过 GET 请求发送图像，但我只是不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:46:19.437

我创建了一个子类，它允许您创建简单的异步 POST 请求，可以在这里找到：[https](https://github.com/MaxKDevelopment/MKNetwork) ://github.com/MaxKDevelopment/MKNetwork 。

要使用它上传图片，您需要做的就是将图片数据作为参数添加到请求中：

```
[MKNetwork sendAsynchronousRequest:[NSURL URLWithString:@"url to upload to"] params:[NSDictionary dictionaryWithObject:UIImagePNGRepresentation(imagedata) forKey:@"image"] decodeResponse:YES callback:^(id response, NSError *error) {

    [someObject doSomethingWithResponse:response];

}]; 
```

或者，您可以查看 ASIHTTPRequest (ASIFormDataRequest)：[http ://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)

然后使用设置为 UIImage 的 POST 值初始化 ASIFormDataRequest 变量。

```
NSURL *url = [NSURL URLWithString: @"url to upload to];
ASIFormDataRequest *request = [ASIHTTPRequest requestWithURL:url];
[request addPostValue:UIImagePNGRepresentation(imageToUpload) forKey:@"image"];
[request setCompletionBlock:^{NSLog(@"completed");}];
[request setFailedBlock:^{NSLog(@"failed");}];
[request startAsynchronous]; 
```

# .net - System.Web.WebPages.Razor 部署问题

> ID：11041017
> 
> 赞同：0
> 
> 时间：2012-06-14T20:40:24.880
> 
> 标签：.net, asp.net-mvc-3, razor

我使用了我能找到的所有方法将 MVC3 项目部署到 IIS 7 中，但打开网站时仍然出现此错误。

有什么线索吗？

> 没有 se puede cargar el archivo o ensamblado 'System.Web.WebPages.Razor，Version=2.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35' ni una de susdependencias。La definición del manifiesto del ensamblado 与 con la referencia al ensamblado 不谋而合。（HRESULT 异常：0x80131040）
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.IO.FileLoadException: No se puede cargar el archivo o ensamblado 'System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' ni una de susdependencias。La definición del manifiesto del ensamblado 与 con la referencia al ensamblado 不谋而合。（HRESULT 异常：0x80131040）
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 程序集加载跟踪：以下信息有助于确定为什么无法加载程序集“System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35”。
> 
> AVS: El registro del enlace de ensamblado está desactivado。Para habilitar el registro de errores del enlace de ensamblado, establezca el valor de Registro [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) como 1\. 注意：existe una disminución del rendimiento asociada registro de errores del enlace de ensamblado。Para desactivar esta característica, elimine el valor de Registro [HKLM\Software\Microsoft\Fusion!EnableLog]。
> 
> 堆栈跟踪：
> 
> [FileLoadException：没有 se puede cargar el archivo o ensamblado 'System.Web.WebPages.Razor，版本 = 2.0.0.0，Culture = 中性，PublicKeyToken = 31bf3856ad364e35' ni una de susdependencias。La definición del manifiesto del ensamblado 与 con la referencia al ensamblado 不谋而合。（HRESULT 例外：0x80131040）]
> WebMatrix.Security.PreApplicationStartCode.Start() +0
> 
> [InvalidOperationException：WebMatrix.Security.PreApplicationStartCode 类型的预应用程序启动初始化方法 Start 引发异常并显示以下错误消息：No se puede cargar el archivo o ensamblado 'System.Web.WebPages.Razor, Version=2.0.0.0,文化=中性，PublicKeyToken=31bf3856ad364e35' ni una de susdependencias。La definición del manifiesto del ensamblado 与 con la referencia al ensamblado 不谋而合。（HRESULT 例外：0x80131040）。] System.Web.Compilation.BuildManager.InvokePreStartInitMethods（ICollection`1 方法）+423
> System.Web.Compilation.BuildManager.CallPreStartInitMethods() +306
> System.Web.Hosting.HostingEnvironment.Initialize（ApplicationManager appManager，IApplicationHost appHost，IConfigMapPathFactory configMapPathFactory，HostingEnvironmentParameters hostingParameters，PolicyLevel policyLevel，异常 appDomainCreationException）+677
> 
> [HttpException (0x80004005)：WebMatrix.Security.PreApplicationStartCode 类型的预应用程序启动初始化方法 Start 引发异常，并显示以下错误消息：No se puede cargar el archivo o ensamblado 'System.Web.WebPages.Razor, Version=2.0 .0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35' ni una de susdependencias。La definición del manifiesto del ensamblado 与 con la referencia al ensamblado 不谋而合。（HRESULT 例外：0x80131040）。] System.Web.HttpRuntime.FirstRequestInit（HttpContext 上下文）+9090876 System.Web.HttpRuntime.EnsureFirstRequestInit（HttpContext 上下文）+97 System.Web.HttpRuntime.ProcessRequestNotificationPrivate（IIS7WorkerRequest wr，HttpContext 上下文）+ 256

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:07:16.553

Haack 先生提供了[您正在寻找的答案](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)（除了在每个 Web 服务器上安装所需的东西）。它运行良好，尤其是在网络农场环境中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:00:10.910

疯狂的一天！

我只是将[WebMatrix](http://www.microsoft.com/web/gallery/install.aspx?appid=WebMatrix)安装到服务器上就可以了！！！噗噗 :)

# wolfram-mathematica - 图生成错误

> ID：11041019
> 
> 赞同：0
> 
> 时间：2012-06-14T20:40:45.630
> 
> 标签：wolfram-mathematica, data-visualization, bar-chart

![在此处输入图像描述](../Images/4d6a642150b3f3171de5476458366a8a.png)

嗨，当我尝试通过 Mathematica 命令行生成此条形图时，我得到了这样的数字。我没有收到任何错误，但这个数字看起来很奇怪。你能帮我弄清楚为什么会这样吗？

这是我正在使用的代码：

```
bar1to15 = 
  BarChart[Take[FractionsTumor, {1, 15}], ChartStyle -> Red, 
   ChartBaseStyle -> EdgeForm[Thin], 
   FrameTicks -> {Table[i, {i, 1, 15}], Automatic}, 
   Frame -> {{True, False}, {True, False}}, 
   FrameLabel -> {"# Singular Value", "Fraction"}, 
   BaseStyle -> {FontFamily -> "courier", FontSize -> 10}, 
   AspectRatio -> 1];
bar2to15 = 
  BarChart[Take[FractionsTumor, {2, 15}], ChartStyle -> Red, 
   ChartBaseStyle -> EdgeForm[Thin], 
   Frame -> {{True, False}, {True, False}}, 
   FrameTicks -> {{{1, "2"}, {2, "3"}, {3, "4"}, {4, "5"}, {5, 
       "6"}, {6, "7"}, {7, "8"}, {8, "9"}, {9, "10"}, {10, "11"}, {11,
        "12"}, {12, "13"}, {13, "14"}, {14, "15"}}, Automatic}, 
   FrameLabel -> {"# Singular Value", "Fraction"}, 
   BaseStyle -> {FontF amily -> "courier", FontSize -> 10}, 
   AspectRatio -> 1];
bar = GraphicsGrid[{{bar1to15, bar2to15}}, ImageSize -> 500, 
   Spacings -> 10, AspectRatio -> 1, 
   PlotLabel -> "Singular Val Dist - " <> txt];
Export[path <> txt <> "singval.pdf", bar, "PDF", ImageSize -> 500, 
  ImageResolution -> 3600]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:12:07.993

如果您查看`bar`Mathematica 中的原始图形 ( )，您会看到那里的粉红色框，以及红色的单元格括号和一个包含“+”的黄色按钮。这意味着在尝试显示结果时发生了错误。

如果将鼠标悬停在图形上，则会将错误显示为工具提示。如果单击黄色按钮，则会在“消息”窗口中显示错误。

在这种情况下，消息是：

> 遇到格式不正确的选项。选项的左侧不是符号或字符串。

这是模糊的，但至少暗示了在哪里看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T21:52:08.013

您的代码中有印刷错误。通过仔细查看语法突出显示，这对您来说应该是显而易见的。比较这两个代码部分：

![数学图形](../Images/29c309ca60fbdfd2606fff623ab535a8.png)

您可以看到，在更正错误后，符号名称`FontFamily`被识别为系统符号并设置为黑色。

如果您没有启用此突出显示，您可以从以下位置打开它：

`Edit > Preferences...`然后`Appearance`和`Syntax Coloring`标签。

# php - 选择下拉列表中的值，然后使用 php、ajax、jquery 显示编辑表单？

> ID：11041020
> 
> 赞同：-4
> 
> 时间：2012-06-14T20:40:51.060
> 
> 标签：php, jquery, ajax

我有一个表格

```
<html>
<head>
</head>
<body>
<form>
    <select id="groups">
    <optgroup label="GroupA">
    <option value="2">[GroupA]  value1</option>
    <option value="11">[GroupA] value2</option>
    <option value="14">[GroupA] value3</option>
    <option value="15">[GroupA] value4</option>
    <option value="601">[GroupA] value5</option>
    <option value="21">[GroupA] value6</option>
    <option value="23">[GroupA] value7</option>
    <option value="24">[GroupA] value8</option> 
    </optgroup>
    ...
 </select>
</form>
<br />
<div id="txtHint"><b>Show edit form here.</b></div>

</body>
</html> 
```

当用户从下拉列表中选择值时，将出现编辑表单，编辑值将使用选定的值进行查询。任何人都可以帮助我用 php、ajax、jquery 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:52:51.287

嗯，也许你可以试试：

```
$("select#idOfYourSelectElement").change(function(){
    $.ajax({
        url: "ajax/myphpajax.php",
        data: "acction=loadForm&selectedElement=" + $(this).val(),
        async: false,
        success: function(htmlWithNewForm){
            $("div#txtHint").html(htmlWithNewForm);
            //if the div is hidden
            $("div#txtHint").css("visibility","visible");
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:49:41.367

要获取应在元素周围添加的下拉/选择框的选定值，可以使用 jQuery 获取，如下所示：

```
<select id="groups">
  <optgroup label="GroupA"> 
    <option value="2">[GroupA]  value1</option>
    ....
  </optgroup>
</select>

$(function() {
  $("#groups").change(function() {
      var selectedValue = this.val();
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T20:57:34.437

好吧，有很多方法可以做到这一点。

一种方法是设置一个 url，您可以使用根据选择下拉值返回 HTML 片段的值来点击该 url。

基本流程是：

Javascript代码：

```
$('select_id_here').change(function() {
  var url = "path_here/to_something
  $.ajax({
    url: url,
    type: "get",
    data: {
      "value": this.val()
    }
}).done(function(html) {
  $('txtHint').html(html)
}); 
```

PHP 控制器将有一个函数来处理您正在调用的 url 并根据值返回 html。如何执行此操作取决于您使用的框架。

```
function handle_to_something() {
  $value = $_GET['value']; // horrible to use GET array
  $html = render("path/to/template/$value.html");
  return $html;
} 
```

# azure - 新的 Azure 网站是否持久？你能在里面使用SQL Server CE吗？

> ID：11041023
> 
> 赞同：2
> 
> 时间：2012-06-14T20:41:13.803
> 
> 标签：azure, sql-server-ce

Azure 的新网站实例似乎是虚拟机，没有所有服务器管理的东西。我暗示这是因为它们是虚拟机的价格。所以问题是，这是否意味着他们有一个持久的文件系统？换句话说，您可以使用 SQL Server CE 并将内容保存在 app_data 中吗？我知道你不能担任传统的 Web 角色，所以我正在寻找不同之处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:50:48.907

是的，它们就像一个标准虚拟机，就像您在自己的 Linux/Window 服务器上的 Hyper-V 或 VM-ware 中运行它一样。问题是我不能在实例之间共享。因此，如果您想共享存储，请使用 Blob 或其他存储机制。只是为了清楚它是 Hyper-V 拥有的标准 VHD 磁盘。

[更多细节](http://www.windowsazure.com/en-us/manage/windows/tutorials/virtual-machine-from-gallery/)

这就是您可以存储数据并创建可重复使用的方法而不必每次都附加的方法。

[附加磁盘以保存](http://www.windowsazure.com/en-us/manage/windows/how-to-guides/attach-a-disk/)

[保存您自己的图像](http://www.windowsazure.com/en-us/manage/windows/how-to-guides/capture-an-image/)

# css - 如何在 HTML5 画布元素中放置一些输入元素？

> ID：11041026
> 
> 赞同：1
> 
> 时间：2012-06-14T20:41:25.313
> 
> 标签：css, html

我有以下页面，里面有一个黑色画布：

![在此处输入图像描述](../Images/a015789c3240b3b51bb95268adf615ef.png)

在那里，将显示游戏的主菜单，并且它需要同时具有注册和登录表单。如何在画布内定位表单/输入元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:45:28.093

您可以使用 CSS 将 HTML 元素放置在画布上。有关更多信息，请参阅以下帖子：

[我可以在画布内放置一个 HTML 按钮吗？](https://stackoverflow.com/questions/4797748/can-i-put-a-html-button-inside-the-canvas)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T20:49:12.397

你没有。在画布中，您将处理大部分元素的渲染。

如果您想使用 DOM，您总是可以将这些表单/输入元素覆盖在画布顶部，并带有一个位置：绝对或等效的东西。但是对于它们实际上在画布中，您将不得不手动渲染它们。另一张海报已经放了一些关于画布基础知识的链接，你可以在上面取得一些进展。

# objective-c - 如何将 NSImage 或 NSData 设置为桌面图像？

> ID：11041034
> 
> 赞同：0
> 
> 时间：2012-06-14T20:41:57.700
> 
> 标签：objective-c, macos, cocoa

我有一个 NSImage（它是相应的 NSData），我需要将该图像设置为桌面。似乎苹果提供的设置图像的唯一方法是

```
[NSWorkspace setDesktopImageURL:forScreen:options:error:] 
```

如何从 NSImage 或 NSData 转换为 NSURL？我这样做是为了保存 imageData：

```
[imageData writeToFile:@"wallpaper" atomically:NO]; 
```

但是如何获取该 URL 以便将其设置为桌面？我不知道如何获取它保存到的 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:18:33.537

要准确回答您提出的问题：

```
[NSURL fileURLWithPath:@"wallpaper"] 
```

但实际上将文件写入您传递给 NSWorkspace 的同一 URL 更有意义，如下所示：

```
NSURL *url = [NSURL fileURLWithPath:@"wallpaper"];
[imageData writeToURL:url atomically:NO];
[[NSWorkspace sharedWorkspace] setDesktopImageURL:url …]; 
```

选择一个放置文件的好地方更有意义。作为一般规则（即使在软件之外），如果您知道将某些东西放在哪里，那么以后找到它比告诉某人“把它放在某个地方”要容易得多。而你具体的“把它放在某个地方”实际上意味着“把它放在当前工作目录中”，这可能是你没有写权限的地方，或者用户不希望你弄乱的地方，或者它可能已经有了其中有一个名为“壁纸”的文件（或目录），或者……</p>

因此，您可能想要调用 -[NSFileManager URLForDirectory:inDomain:appropriateForURL:create:error:] 来获取 NSTemporaryDirectory，或者使用不同的临时文件 API。或者您可能希望将其放在应用程序的缓存目录中，而不是临时位置。任何对你来说都有意义的事情。

此外，您可能希望在文件上添加适当的扩展名。而且，在不知道您从哪里获得 imageData 的情况下，我不确定您是否会获得可用的图像文件。但这都是单独的问题。

# python - 多处理问题

> ID：11041036
> 
> 赞同：2
> 
> 时间：2012-06-14T20:42:00.183
> 
> 标签：python, python-2.7

所以我只是想多处理并阅读文本文档中的每一行。有 660918 行，我知道它们的长度都是一样的。尽管使用以下代码，行的长度似乎发生了变化，但我不知道为什么。

```
import multiprocessing

class Worker(multiprocessing.Process):
    def __init__(self,in_q):
        multiprocessing.Process.__init__(self)
        self.in_q = in_q
    def run(self):      
        while True:
            try:
                in_q.get()
                temp_line = short_file.readline()
                temp_line = temp_line.strip().split()
                print len(temp_line)
                self.in_q.task_done()
            except:                              
                break     

if __name__ == "__main__":
    num_proc = 10
    lines = 100000 #660918 is how many lines there actually are
    in_q = multiprocessing.JoinableQueue()
    File = 'HGDP_FinalReport_Forward.txt'
    short_file = open(File)

    for i in range(lines):
        in_q.put(i)    

    for i in range(num_proc):
        worker = Worker(in_q)
        worker.start()
    in_q.join() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T00:28:11.033

您正在主进程中打开一个文件，然后在子进程中从该文件中读取。你不能那样做。

在幕后，文件对象实际上是一个原始文件句柄和一个内存缓冲区。每个进程共享文件句柄，但每个进程都有自己的内存缓冲区。

假设所有的行都是 50 字节，内存缓冲区是 4096 字节。

进程 1 调用 readline，它将文件中的字节 0-4095 读取到其缓冲区中，然后在该缓冲区中扫描 50 个字节的换行符，并返回前 50 个字节。到目前为止，一切都很好。

进程 2 调用 readline，它将文件中的字节 4096-8191 读取到其缓冲区中，然后扫描该缓冲区以查找换行符。第一个在 4100 处，即 5 个字节，因此它返回前 5 个字节。

等等。

理论上你可以通过无缓冲 I/O 来解决这个问题，但实际上，为什么呢？为什么不直接阅读主进程中的行？除了避免这个问题之外，这也可能会提高并行性——I/O 本质上是顺序的，所以所有这些进程都会将大部分时间花在 I/O 上，这意味着它们对你没有任何好处。

附带说明一下，在运行循环的顶部附近，您正在执行 in_q.get() 而不是 self.in_q.get()。（这恰好起作用，因为 in_q 是一个永远不会消失的全局变量，而 self.in_q 只是它的一个副本，但你不想依赖它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T16:31:18.323

因此，我将其更改为使用 Pool，并且似乎可以正常工作。以下更好吗？

```
import multiprocessing as mp

File = 'HGDP_FinalReport_Forward.txt'
#short_file = open(File)
test = []

def pro(temp_line):
    temp_line = temp_line.strip().split()
    return len(temp_line)

if __name__ == "__main__":
    with open("HGDP_FinalReport_Forward.txt") as lines:
        pool = mp.Pool(processes = 10)
        t = pool.map(pro,lines.readlines())
    print t 
```

# google-app-engine - Google App Engine -- java.rmi.server.UID 是一个受限类

> ID：11041037
> 
> 赞同：0
> 
> 时间：2012-06-14T20:42:00.120
> 
> 标签：google-app-engine, jsp, struts2

我正在将 Struts2 应用程序转换为 Google Apps。我只是想调出我的应用程序的首页，但我在控制台上收到以下错误。我的类路径中有 commons-fileupload-1.2.2.jar。谁能帮我？除了这个，我还需要另一个罐子吗？或者问题是别的什么？

```
java.lang.NoClassDefFoundError: java.rmi.server.UID is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51)
    at net.sf.ehcache.Cache.createGuid(Cache.java:1929)
    at net.sf.ehcache.Cache.<init>(Cache.java:433)
    at net.sf.ehcache.config.ConfigurationHelper.createCache(ConfigurationHelper.java:313)
    at net.sf.ehcache.config.ConfigurationHelper.createDefaultCache(ConfigurationHelper.java:246)
    at net.sf.ehcache.CacheManager.configure(CacheManager.java:286)
    at net.sf.ehcache.CacheManager.init(CacheManager.java:218)
    at net.sf.ehcache.CacheManager.<init>(CacheManager.java:205)
    at net.sf.ehcache.CacheManager.create(CacheManager.java:374)
    at org.hibernate.cache.EhCacheProvider.start(EhCacheProvider.java:124)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:169)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1005)
    at com.configuration.ConfigurationListener.contextInitialized(ConfigurationListener.java:19)
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:196)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:239)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:146)
    at com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:97)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:00:43.610

看到这篇文章： [谷歌应用程序中的rmi错误](https://stackoverflow.com/questions/1746043/rmi-error-in-google-app)

它有点旧，但听起来它可能仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T01:29:41.727

我在没有 GWT jar 文件的情况下重建了我的应用程序。这似乎解决了问题。

# javascript - 如何使用 php 在文本框中输入值并通过 javascript 获取

> ID：11041039
> 
> 赞同：0
> 
> 时间：2012-06-14T20:42:06.717
> 
> 标签：javascript, getelementbyid

我希望能够在 php 写入和 javascript 读取的页面上有一个文本框

我看到了这个解决方案 [如何通过 PHP 设置文本框的值？](https://stackoverflow.com/questions/1484816/how-can-i-set-the-value-of-a-textbox-through-php)

使用它，我设法使用此命令在文本框中写入值

```
<input type=\"text\" name=\"txtFromPHP\" value=\"" .$row['id'] . "\"> 
```

但是当我使用这个访问文本框时

```
var str = document.getElementById('txtFromPHP').value; 
```

我收到错误

```
document.getElementById("txtFromPHP") is null 
```

也许它是相关的，我放置文本框的 html 页面是 Ajax 数据库示例的修改版本，位于[http://www.w3schools.com/PHP/php_ajax_database.asp](http://www.w3schools.com/PHP/php_ajax_database.asp)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:44:33.410

将“名称”更改为“id”或同时使用它们：

```
<input type=\"text\" id=\"txtFromPHP\" value=\"" .$row['id'] . "\"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:43:35.083

您需要按如下方式设置元素 ID

```
<input type=\"text\" id=\"txtFromPHP\" name=\"txtFromPHP\" value=\"" .$row['id'] . "\"> 
```

在您的示例中，您只设置了元素的名称，`txtFromPHP`没有设置 ID

# python - 使用 PIL 将 JPG 从 Adob eRGB 转换为 sRGB？

> ID：11041044
> 
> 赞同：12
> 
> 时间：2012-06-14T20:42:24.157
> 
> 标签：python, image-processing, python-imaging-library, jpeg, color-profile

如何检测 JPG 是否为 Adob​​eRGB，以及是否在 python 中将其转换为 sRGB JPG。

如果这在 PIL 中是可能的，那就太好了。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-01-07T17:10:12.447

我遇到了同样的问题，我测试了所有答案并在最终图像中得到错误的颜色。@DrMeers我尝试过的所有矩阵都给出了错误的红色和黑色结果，所以这是我的解决方案：

我发现的唯一方法是从图像中读取配置文件并使用 ImageCms 进行转换。

```
from PIL import Image
from PIL import ImageCms
import tempfile

def is_adobe_rgb(img):
    return 'Adobe RGB' in img.info.get('icc_profile', '')
def adobe_to_srgb(img):
    icc = tempfile.mkstemp(suffix='.icc')[1]
    with open(icc, 'w') as f:
        f.write(img.info.get('icc_profile'))
    srgb = ImageCms.createProfile('sRGB')
    img = ImageCms.profileToProfile(img, icc, srgb)
    return img

img = Image.open('testimage.jpg')
if is_adobe_rgb(img):
    img =  adobe_to_srgb(img)
# then do all u want with image. crop, rotate, save etc. 
```

我认为这种方法可以用于任何颜色配置文件，但未经测试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-04T10:52:04.417

感谢规范链接 martineau，我已经将一些工作`PIL`代码与检测 Adob​​e RGB ICC 配置文件存在的函数放在一起`Image`，并将色彩空间转换为 sRGB。

```
adobe_to_xyz = (
    0.57667, 0.18556, 0.18823, 0,
    0.29734, 0.62736, 0.07529, 0,
    0.02703, 0.07069, 0.99134, 0,
) # http://www.adobe.com/digitalimag/pdfs/AdobeRGB1998.pdf                                

xyz_to_srgb = (
    3.2406, -1.5372, -0.4986, 0,
    -0.9689, 1.8758, 0.0415, 0,
    0.0557, -0.2040, 1.0570, 0,
) # http://en.wikipedia.org/wiki/SRGB                                                     

def adobe_to_srgb(image):
    return image.convert('RGB', adobe_to_xyz).convert('RGB', xyz_to_srgb)

def is_adobe_rgb(image):
    return 'Adobe RGB' in image.info.get('icc_profile', '')

# alternative solution if happy to retain profile dependency:                             
# http://stackoverflow.com/a/14537273/284164                                              
# icc_profile = image.info.get("icc_profile")                                             
# image.save(destination, "JPEG", icc_profile=icc_profile) 
```

（我用这些来创建一个[Django](http://djangoproject.com) [简单的缩略图](http://easy-thumbnails.readthedocs.org)处理器功能）：

```
def preserve_adobe_rgb(image, **kwargs):
    if is_adobe_rgb(image):
        return adobe_to_srgb(image)
    return image 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-15T04:22:34.657

要自己编程，您可以将 Adob​​eRGB 颜色空间中的像素转换为 CIE XYZ，然后将其转换为 sRGB。PIL`image`对象有一个名为的方法`convert()`，该方法能够对图像中的所有像素应用通用矩阵变换（请参阅[`Image.convert()`](https://pillow.readthedocs.io/en/latest/reference/Image.html#PIL.Image.Image.convert)PIL 图像模块的在线文档中的部分 - 请注意显示从所需的矩阵值的示例RGB 到 XYZ）。

[AdobeRGB1998 .pdf规范](http://www.adobe.com/digitalimag/pdfs/AdobeRGB1998.pdf)中的第 4.3.4 节显示了一个用于将 XYZ 转换为 RGB 的矩阵。

我不确定如何检测 JPG 图像的色彩空间。我记得读过一些关于附加到文件末尾的 ICC xml 配置文件（以及当有多个文件时出现的问题），但我不能保证它的有效性。[关于JPEG 文件格式](http://en.wikipedia.org/wiki/JPEG#Color_profile)的 Wikipedia 文章说配置文件是嵌入的。

# java - 设计一个表单来调用另一个表单并且在子表单关闭后不退出

> ID：11041048
> 
> 赞同：0
> 
> 时间：2012-06-14T20:42:46.253
> 
> 标签：java, swing, netbeans, jframe

我是 NetBeans 和 GUI 开发的新手。我想知道如何设计一个具有打开其他表单的菜单的主表单。我知道如何设计一个带有按钮和事件监听器（actionperformed）的表单，如下所示：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
       new SeconfFrame().setVisible(true);        // TODO add your handling code here:
} 
```

这将在按下按钮时调用第二帧，但是当我退出第二帧时，第一帧也会消失。不酷。我怎样才能让第一帧（主要的）仍然熬夜？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:15:10.977

建议：

*   如果您必须让一个窗口打开另一个窗口，则让从属窗口为对话框窗口，例如 JDialog 或 JOptionPane。这样做，您就不必担心 JVM 退出。
*   是的，JDialog 可以像*任何*JFrame 一样拥有复杂的 GUI。
*   话虽如此，您不希望应用程序有很多窗口在视图中跳进跳出。如果您这样做，请重新考虑您的设计，包括按照 mKorbel 的建议使用 CardLayout。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T20:58:36.950

> 这将在按下按钮时调用第二帧，但是当我退出第二帧时，第一帧也会消失。不酷。我怎样才能让第一帧（主要的）仍然熬夜？

你必须`setDefaultCloseOperations(EXIT_ON_ClOSE)`改为`HIDE_ON_CLOSE`

> 想知道如何设计一个主窗体，该窗体具有打开其他窗体的菜单。

使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)而不是使用[顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T20:56:39.787

在有问题的 JFrame 的“属性”选项卡上，转到选项卡：设置“defaultCloseOperation”（列表顶部）并将其从“EXIT_ON_CLOSE”更改为“DISPOSE”，请参阅：[DISPOSE_ON_CLOSE](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/WindowConstants.html#DISPOSE_ON_CLOSE)

# python - os.popen 和 scutil 的问题

> ID：11041049
> 
> 赞同：1
> 
> 时间：2012-06-14T20:42:49.513
> 
> 标签：python, macos, shell, unix, networking

我需要来自`scutil`指挥部的信息。当我`scutil -d -r xyz.com`在终端上运行时。我可以看到几行输出。但是当我这样做时，文件中只能看到`scutil -d -r xyz.com > file.txt`最后一行命令输出。`flags = 0x00000002 (Reachable)`

我正在从 python 运行这个命令，我需要这个命令的全部内容。我在python中运行的方式是：

```
import os

output = os.popen('scutil -r -d yahoo.com').read()
print output 
```

输出是：

> 标志 = 0x00000002（可达）

但我也需要这里命令的所有输出。请让我知道是否有任何解决此问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:53:06.497

`scutil`打印出信息以`stderr`尝试使用`&> file.txt`而不是`> file.txt`

在 python 中尝试使用：

```
import commands 
print commands.getstatusoutput("scutil -d -r xyz.com") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:10:24.163

`os.popen` [自 2.6 起已弃用](http://docs.python.org/library/os.html#os.popen)
文档提供了`os.popen`使用`subprocess`模块替换的入门指南：http:
[//docs.python.org/library/subprocess.html#replacing-os-popen-os-popen2-os-popen3](http://docs.python.org/library/subprocess.html#replacing-os-popen-os-popen2-os-popen3)

应用于您的代码的示例：

```
import subprocess
my_process = subprocess.Popen('scutil -r -d yahoo.com', 
                              shell=True,
                              stdout=subprocess.PIPE, 
                              stderr=subprocess.PIPE)
out, err = my_process.communicate()
print out
print err 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:23:16.750

你可能会使用`subprocess.check_output("scutil -d -r xyz.com", stderr=subprocess.STDOUT, shell=True)`

```
import subprocess

output = subprocess.check_output("scutil -d -r xyz.com", stderr=subprocess.STDOUT, shell=True)
print(output) 
```

`check_output`您应该注意该命令的两件事：

1.  `stderr=subprocess.STDOUT`将错误输出流通过管道传输到标准输出
2.  `shell=True`通过 shell 执行命令。这使您可以访问运行 shell 进程的相同环境。

# sql - 建立连接时出错：未知 TDS 数据包类型：18 知道是什么原因造成的吗？ODBC 驱动程序？

> ID：11041050
> 
> 赞同：0
> 
> 时间：2012-06-14T20:42:51.447
> 
> 标签：sql, blackboard

将 Blackboard 7.1 从 SQL 2000 升级到 SQL 2005 时出现错误建立连接：未知 TDS 数据包类型：18 知道是什么原因造成的吗？ODBC 驱动程序？

在 SQL 2000 上并将文件迁移到 SQL 2005 实例。

I changed the connection strings within the object properties file for Blackboard and now getting this odd error.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:25:41.213

在命令行验证来自 osql 的连接。您也可能需要使用比 7.1 更高的 Blackboard 版本，因为可能需要更新的 JDBC 驱动程序。

# objective-c - Monotouch Objective C API 绑定

> ID：11041051
> 
> 赞同：0
> 
> 时间：2012-06-14T20:42:54.190
> 
> 标签：objective-c, binding, xamarin.ios

我目前正在开发一个 MonoTouch 项目，需要添加一个 Objective C API 以与读卡器一起使用。在阅读了 Xamarin 提供的所有文档后，我很难理解使绑定正常工作的基础知识。我正在尝试为接口编写代码，但我收到了关于如何编写 C# 版本的方法的混合消息。我已经看到了使用句柄和所有爵士乐实际调用 Objective C 运行时的方法，如下所示：

```
 [Export("doSomething")]
    public virtual void DoSomething()
    {
        return Runtime.GetNSObject(
            Messaging.IntPtr_objc_msgSend(this.Handle, selNextObject.Handle));
    }
    // I know this code doesn't match what you would do in a void method
    // but bear with me 
```

但我也看到了创建方法定义的示例，就像

```
 //from obj-c code -(void) doSomething;
    [Export("doSomething")]
    void DoSomething(); 
```

该方法是否会自动识别 Objective C API 中的“doSomething”方法并执行这些操作，还是我必须以某种方式自己编写 C# 方法操作？（我知道选择器，但我不太熟悉它们或它们的作用/如何正确使用它们）我将不胜感激任何可能的帮助或解释。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:02:40.580

如果您使用绑定生成器，它会为您完成所有工作。这就是我们用于 MonoTouch 中几乎所有 API 的内容。

但是如果你想手动推出，你手动调用 msgSend

# java - 将 tmp 文件保存到数据库

> ID：11041061
> 
> 赞同：0
> 
> 时间：2012-06-14T20:44:12.680
> 
> 标签：java, mysql, image, hibernate, struts

我刚刚学会了如何使用 Struts 2 文件上传器来上传文件。上传后，它将文件保存为 .tmp 文件。

我想获取这个 .tmp 文件并将其存储在数据库中，然后在服务器端检索它，然后在客户端将其显示为图像（就是这样）。

为此，我使用 byte[] 数组对吗？

我该怎么做呢？

**编辑 1：** 我正在寻找将 tmp 文件转换为图像所需的 java 服务器端代码以及用于显示图像的 struts/客户端代码 - 即`name="object.image"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:46:43.473

尝试使用这些类型[BLOB 和 TEXT 类型](http://dev.mysql.com/doc/refman/5.0/en/blob.html)

编辑

但是戴夫牛顿是对的！！！

简单的代码，只需更改`fileinputstream`您的`inputstream`

```
 FileInputStream fis = null;
    PreparedStatement ps = null;
    try {
      conn.setAutoCommit(false);
      File file = new File("myPhoto.png");
      fis = new FileInputStream(file);
      ps = conn.prepareStatement(INSERT_PICTURE);
      ps.setString(1, "001");
      ps.setString(2, "name");
      ps.setBinaryStream(3, fis, (int) file.length());
      ps.executeUpdate();
      conn.commit();
    } finally {
      ps.close();
      fis.close();
    } 
```

编辑 1

如果您正在寻找将 tmp 转换为 jpeg 或其他图片格式的代码，只需读取 tmp 并保存为 jpeg 或其他图片格式（我认为您正在从客户端接收图片格式，但如果没有，则 jsut 带有 tmp 扩展名，我不认为这个任务是真的！

# php - 具有服务器端处理问题的数据表

> ID：11041062
> 
> 赞同：0
> 
> 时间：2012-06-14T20:44:24.797
> 
> 标签：php, jquery, datatables

我有一个脚本来编码一个 json 字符串，以便以 jquery 数据表格式显示[数据](http://datatables.net/release-datatables/examples/data_sources/server_side.html)。

但是，页面什么也没显示！如果我使用 jquery .post 进行简单响应，则会显示数据，但表格会失去其功能。

这是我到目前为止所做的

JSON 编码脚本

```
$user = new Users();

$rcs_user = $user->get_all_users();
$response = '';
$arrResp = array();
$arrItems = array();

foreach ($rcs_user as $info)
{

    $arrItems = array(utf8_encode($info->nome),$info->email,$info->permissao,$info->activo,'<span class="tip" >
                    <a  title="Edit" ><img src="images/icon/icon_edit.png" ></a>
                    </span> 
                    <span class="tip" >
                    <a id="1" class="Delete"  name="Band ring" title="Delete"  >
                    <img src="images/icon/icon_delete.png" >
                    </a></span>');
    array_push($arrResp, $arrItems);

}
$array = array("aaData"=>$arrResp);

echo json_encode($array); 
```

脚本输出的 JSON 字符串（使用 JSONLint 验证）

```
{
"aaData": [
    [
        "admin",
        "a@a.pt",
        "1",
        "1",
        "\r\n  </a>\r\n </span> \r\n \r\n \r\n  \r\n </a></span>"
    ],
    [
        "admin2",
        "a@a.pt",
        "1",
        "1",
        "\r\n  </a>\r\n </span> \r\n \r\n \r\n  \r\n </a></span>"
    ],
    [
        "António",
        "a@a.com",
        "10",
        "0",
        "\r\n  </a>\r\n </span> \r\n \r\n \r\n  \r\n </a></span>"
    ],
    [
        "João Dias",
        "a@a.com",
        "10",
        "0",
        "\r\n  </a>\r\n </span> \r\n \r\n \r\n  \r\n </a></span>"
    ],
    [
        "Zé Manel",
        "zemanel@ze.com",
        "10",
        "1",
        "\r\n  </a>\r\n </span> \r\n \r\n \r\n  \r\n </a></span>"
    ]
]
} 
```

最后是 jQuery

```
 $(document).ready(function() {
            $('#data_table3').dataTable( {
                    "bProcessing": true,
                    "bServerSide": true,
                    "sAjaxSource": 'modules/user/showusers.php'
                } );
            } ); 
```

每次我重新加载页面时，我都会收到此警报消息

```
Datatables Warining (tableid = data_table3): Cannot reinitialize table data. To retrieve the Data Objects for this table pass no arguments or see the docs for bRetrieve or bDestroy. 
```

如果我能做到这一点，那将是一个巨大的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:54:43.927

我认为当您手动进行服务器处理时，您需要在响应中添加以下参数：

*   `iTotalRecords`- 数据库中的总记录
*   `iTotalDisplayRecords`- 显示多少条记录

它们应该与`aaData`JSON 响应中的参数处于相同的“级别”。请参阅 DataTables 指南，应在此处解释这些字段的用法。

# sql - First Name and Last Name must be Unique Together in SQL

> ID：11041065
> 
> 赞同：3
> 
> 时间：2012-06-14T20:44:32.557
> 
> 标签：sql, oracle, unique

I know that using the following codes will make each column have unique values, but what if I want a full name to be unique?

```
CREATE TABLE people (first_name varchar2(32) unique,
                     last_name varchar2(32) unique); 
```

this will make each attribute unique on its own, but I need to make them both together unique, like If I have a name "James Smith", I don't want this name to be repeated again, but its ok if there was a "James Sunderland" guy.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:47:19.150

Define the `UNIQUE` constraint on the combination of the two columns:

```
CREATE TABLE people 
  ( first_name varchar2(32) , 
    last_name varchar2(32) ,
    UNIQUE ( first_name, last_name )
  ) ; 
```

# jquery - 如何使用 jQuery 来防止用户输入太多小数位？

> ID：11041067
> 
> 赞同：4
> 
> 时间：2012-06-14T20:44:36.487
> 
> 标签：jquery

我正在尝试编写一个 jQuery 插件来防止用户输入超过 2 位小数的数字。具体来说：

*   如果输入包含`12`并且用户`3`最后键入，它应该可以工作。
*   如果输入包含`12.34`并且用户`1`最后键入，则**什么都不会发生**。
*   如果输入包含`12.34`并且用户`1`在开始时键入，它应该可以工作。

这是我遇到的问题：

*   如果我绑定到`keypress`，我不知道“提议的新值”是什么；`$(this).val()`是用户按下键之前的值，我不知道用户在输入字段中输入的位置。
*   如果我绑定到`keyup`,`$(this).val()`是新值，但它已经出现在文本输入中。如果它有太多小数位，我可以删除它，但它看起来有问题。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T20:55:31.383

美比这个？

```
jQuery.fn.limitDecimalPlaces = function(maxPlaces) {
  $(this).on('keyup', function(e) {
    integer = e.target.value.split('.')[0],
    mantissa = e.target.value.split('.')[1];

    if (typeof mantissa === 'undefined') {
      mantissa = '';
    }

    if (mantissa.length > maxPlaces) {
      e.target.value = integer + '.' + mantissa.substring(0, maxPlaces);
    }
  });
} 
```

[在http://jsfiddle.net/vdZfH/2/](http://jsfiddle.net/vdZfH/2/)测试和工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T20:45:21.277

## 适合我的目的的解决方案

这就是我想出的。

### 优点

*   多余的小数位根本不出现（与出现并立即被删除相反）
*   用户也不能输入多个小数

### 缺点

此解决方案依赖于其中的 2 个其他 jQuery 插件，但无论如何我已经在我的项目中拥有它们。

*   我正在使用作为`caret()`一部分的函数`jQuery.maskedInput`来确定用户在输入框中输入的位置。
*   我已经在这个输入上使用了，`jQuery.keyfilter`以确保只允许输入它。（不过，它只考虑单个击键，而不考虑结果输入内容。）`1-9``.`

### 编码

```
jQuery.fn.limitDecimalPlaces = function (maxPlacesArg) {
  $(this).each(function() {
    var maxPlaces, presetValue;

    if (maxPlacesArg) {
      maxPlaces = maxPlacesArg;

    } else {
      presetValue = $(this).attr('value');

      // If the value attribute has a decimal in it...
      if (presetValue.indexOf('.') !== -1) {

        // ... assume it has the correct number of places
        maxPlaces = presetValue.split('.')[1].length;
      } else {

        // Sensible default
        maxPlaces = 2;
      }
    }
    $(this).bind("keypress", function(e) {
      var currentVal, cursorIsAfterDecimal, hasMaxDecimalPlaces, inputHasDecimal, keystrokeIsDecimal;
      currentVal = $(this).val();
      inputHasDecimal = currentVal.indexOf('.') !== -1;
      if (inputHasDecimal) {
        // Booleans
        keystrokeIsDecimal = String.fromCharCode(e.which) === '.';
        hasMaxDecimalPlaces = athena.format.hasNDecimalPlaces(currentVal, maxPlaces);
        cursorIsAfterDecimal = ($(this).caret().begin) > (currentVal.lastIndexOf('.'));

        if (keystrokeIsDecimal || (hasMaxDecimalPlaces && cursorIsAfterDecimal)) {
          e.preventDefault();
        }
      }
    });
  });
  return $(this);
} 
```

配套功能：

```
hasNDecimalPlaces = function (number, places) {
  fixed = parseFloat(number).toFixed(places);
  return number.toString() === fixed;
}; 
```

# xcode - 如何获取 Mapkit 中当前位置的 url？

> ID：11041072
> 
> 赞同：0
> 
> 时间：2012-06-14T20:45:07.590
> 
> 标签：xcode, mapkit, ios5

我有一个加载地图的视图控制器，当地图加载时，我已将当前位置设置为默认位置，我的问题是，如何获取该位置的 url，以便我可以将其存储在 nsstring 中并使用它在其他地方，基本上将其添加到推文表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:13:53.127

您需要创建一个 URL，例如[https://maps.google.com/maps??ll=55.123,12.234](https://maps.google.com/maps??ll=55.123,12.234)

从 MKMapView 当前用户位置获取用户坐标

```
mapView.userLocation.coordinate 
```

或者如果它是您感兴趣的当前地图中心

```
mapView.centerCoordinate 
```

在实践中，它看起来像这样

```
CLLocationCoordinate2D myCoord = mapView.userLocation.coordinate;

NSString *url = [NSString stringWithFormat:@"http://maps.google.com/?ll=%f,%f",
                                                  myCoord.latitude,
                                                  myCoord.longitude];

NSLog(@"The URL is: %@", url); 
```

该片段给了我以下输出：

网址是： http://maps.google.com/?ll= [55.936699,12.289743](http://maps.google.com/?ll=55.936699,12.289743)

Google Maps URL 的参数可以通过[Google找到，并在](http://querystring.org/google-maps-query-string-parameters/)[StackOverflow](https://stackoverflow.com/questions/2660201)上进行了处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:51:33.660

您必须将城市和县保存在一个字符串中。然后你可以像这样建立一个谷歌链接：

```
NSString *link = [NSString stringWithFormat: @"http://maps.google.com/maps?q=%@,%@",city,country"]; 
```

# c# - 洪水填充算法内存泄漏

> ID：11041079
> 
> 赞同：1
> 
> 时间：2012-06-14T20:45:43.727
> 
> 标签：c#, memory-leaks, unity3d, paint, flood-fill

我在某处有内存泄漏。我已经搜索了很多次，对我来说它看起来很可靠。我只是.. 找不到... 找到它... 好的，背景。这是一个堆栈驱动的洪水填充，这段代码是我向堆栈添加东西的唯一地方。代码比较多，如果没有人发现内存泄漏，我会再贴一些。

这是关于这个的最奇怪的部分。该代码仅适用于一种颜色+线条艺术（图片纹理），但是当使用多种颜色并使用填充桶时，我会遇到那些奇怪的内存泄漏。

```
 //descend to the floor
            while(true)
            {

                if(++iterator > total)
                {
                    Debug.Log("broke in the stupid down loop...");
                    break;
                }

                //if we hit line art or a color we're not changing, break out of the loop
                if(PicTexture.GetPixel((int)coords.x, (int)coords.y).a > .5f ||
                   MyTexture.GetPixel((int)coords.x, (int)coords.y) != ColorToChange || coords.y < 0)
                {
                    break;
                }

                //if we're looking right and find an open spot in our texture
                if(reach.right && MyTexture.GetPixel((int)coords.x + 1, (int)coords.y) == ColorToChange
                   && PicTexture.GetPixel((int)coords.x + 1, (int)coords.y).a < .5f)
                {
                    reach.right = false;    //search it and stop looking right
                    if(!search.Contains(new Vector2((int)coords.x + 1, (int)coords.y)))
                        search.Push(new Vector2((int)coords.x + 1, (int)coords.y));
                }
                else
                {
                    if(MyTexture.GetPixel((int)coords.x + 1, (int)coords.y) != ColorToChange
                       || PicTexture.GetPixel((int)coords.x + 1, (int)coords.y).a >= .5f)   //if theres a wall and we're not looking right
                        reach.right = true; //look for an opening to the rightq
                }

                //same thing for left
                if(reach.left && MyTexture.GetPixel((int)coords.x - 1, (int)coords.y) == ColorToChange
                   && PicTexture.GetPixel((int)coords.x - 1, (int)coords.y).a < .5f)
                {
                    reach.left = false;
                    if(!search.Contains(new Vector2((int)coords.x - 1, (int)coords.y)))
                        search.Push(new Vector2((int)coords.x - 1, (int)coords.y));
                }
                else
                {
                    if(MyTexture.GetPixel((int)coords.x - 1, (int)coords.y) != ColorToChange
                       || PicTexture.GetPixel((int)coords.x - 1, (int)coords.y).a >= .5f)
                        reach.left = true;
                }

                MyTexture.SetPixel((int)coords.x, (int)coords.y, BrushColor);
                coords.y--;
            } 
```

编辑：我刚刚意识到我忘了提到最奇怪的部分。在我使用起始颜色（蓝色）以外的颜色之前，这段代码工作得很好。一旦我改变颜色，即使它变回蓝色，它仍然会破裂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:51:23.007

首先，使用分析器。[我对RedGate 的 ANTS Memory Profiler](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)有过愉快的体验。当问题不明显时，这确实是获取所需信息的最快方法。

至于您的代码，我乍一看只注意到您可能会`Vector2`在很短的时间内创建大量对象。我不知道这是否真的导致了你看到的问题。

顺便说一句，GDI+ 像狗一样慢。如果您开始注意到性能不佳，您可能需要考虑使用`Bitmap.LockBits`来获取指向内存中图像数据的指针并对其进行操作。根据我的经验，GDI+ 根本不适合处理即使是中等大小的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T17:07:15.980

我想到了。事实证明，这并不完全是我的错。编写颜色选择器代码的人使用的颜色格式与我不同，但我们使用的引擎有时会将一种格式隐式转换为另一种格式，这就是它有时仍然有效的原因。非常非常奇怪。谢谢你们的帮助！

# asp.net - 调用 Web 服务如何导致死锁？

> ID：11041080
> 
> 赞同：0
> 
> 时间：2012-06-14T20:45:52.257
> 
> 标签：asp.net, web-services

[这篇](http://support.microsoft.com/?id=821268)令人困惑的 MSDN 文章讨论了从 ASP.Net 应用程序调用 Web 服务如何导致死锁。我了解每个 Web 服务调用需要第二个线程来完成 IO 的部分。我了解可能并不总是有这样的线程可用，这意味着进行 Web 服务调用的线程将阻塞并且在这样的线程可用之前不会取得进展。但在我看来，确实获得 IO 线程的 Web 服务调用会提前，最终两个线程都将被释放回线程池以供先前阻塞的调用使用。那么僵局从何而来？在 IIS 终止进程时，您能描述一下死锁线程在等待什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:55:30.303

本文适用于 .NET 1.0 / IIS 6，并不真正适用于较新版本的 .NET/IIS。在框架的更新版本中，线程池和 IOCP 线程的数量限制要高得多，您遇到它们的可能性非常非常小。

曾经发生的基本问题是 ASP.NET 会限制它允许使用任何东西的线程数，并且 Web 请求在 I/O 线程上处理，因此传入的 Web 请求将消耗所有可用线程和 IO 完成未完成的（异步）调用将在等待它们的 Web 请求后面排队。

另请参阅[http://blogs.msdn.com/b/nicd/archive/2007/04/16/dissection-of-an-asp-net-2-0-request-processing-flow.aspx](http://blogs.msdn.com/b/nicd/archive/2007/04/16/dissection-of-an-asp-net-2-0-request-processing-flow.aspx)

# buffer - 如何有效地交换 OpenCL 内存缓冲区？

> ID：11041081
> 
> 赞同：6
> 
> 时间：2012-06-14T20:45:53.420
> 
> 标签：buffer, opencl, swap

正如标题所暗示的那样，我正在寻找如何有效地交换两个 OpenCL 缓冲区。我的内核使用两个全局缓冲区，一个作为输入，一个作为输出。但是，我使用相同的 NDRange 在 for 循环中调用我的内核，每次都设置内核参数、将内核排队并交换缓冲区，因为先前的输出缓冲区将是下一次迭代的输入缓冲区种子。

交换这两个缓冲区的适当方法是什么？我想将缓冲区复制回主机到已经 malloc 的数组之一，然后使用 and 将其复制到下一个输入缓冲区`clEnqueueWriteBuffer()`是`clEnqueueReadBuffer()`一种低效的方法。否则我只是使用一个临时`cl_mem`变量来进行交换。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T21:01:00.227

您不需要，只需在`clSetKernelArg`第二次将内核排入队列之前使用设置正确的内核参数（使用`clEnqueueNDRangeKernel`）。缓冲区将保留在设备上，不会将任何内容复制回主机。

`CL_MEM_READ_WRITE`当然，在这种情况下，您的缓冲区必须创建。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-24T09:47:27.940

如上一个答案：**不，您根本不需要交换缓冲区。**

但是，我不同意提出的答案。该函数`clSetKernelArg()`不是**线程安全**的，并且不设计为在操作循环中调用。

正确的解决方案是创建 2 个使用相同程序和源创建的内核。这种方法更符合 OpenCL 编程理念“一个内核完成一项任务”。拥有许多具有相同代码但不同参数的内核是要走的路。

第一个内核将具有：

```
kernel1 = clCreateKernel(program, "mykernel", NULL);
clSetKernelArg(kernel1, 0, &buff1);
clSetKernelArg(kernel1, 1, &buff2); 
```

另一个将是：

```
kernel2 = clCreateKernel(program, "mykernel", NULL);
clSetKernelArg(kernel2, 0, &buff2);
clSetKernelArg(kernel2, 1, &buff1); 
```

这样，您无需在每次迭代时停止执行。您可以简单地运行：

```
for(int it=0; it<iter; it++){
    clEnqueueNDRangeKernel(it%2 ? kernel1 : kernel2, ....);
}
clFinish(command); 
```

这种方法肯定会比更改内核参数更好，更高效，API 调用更少。此外，在某些系统上`clSetKernelArgs()`，由于 API 实现不佳，可能是阻塞调用。所以最好尽量避免它们。

# java - 如何在 glassfish 的应用程序目录中保存文件？

> ID：11041084
> 
> 赞同：1
> 
> 时间：2012-06-14T20:46:12.493
> 
> 标签：java, glassfish

我正在开发一个 GWT 应用程序，我从 Web 服务中检索文件，然后通过 RPC 返回 URL 以供 UI 显示。该文件正在创建/保存在名为 documentFiles 的文件夹中：

```
File newFile = new File("documentFiles", doc.getFilename());
newFile.getParentFile().mkdirs(); 
```

当我在 GWT 开发模式下本地运行应用程序时，这个文件夹会在我期望的地方创建，在 war 目录中，所以我可以在`host:8080/[base url]/documentFiles`.

但是，当我在 glassfish（在 Windows 上）上运行它时，该文件夹是在`...\glassfish\domains\domain1\config\documentFiles`.

我想要并期望它在`...\glassfish\domains\domain1\applications\[app name]\documentFiles`

我希望这是有道理的。如何指定在应用程序文件夹下创建文件？感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:48:50.233

通过直接文件 IO 从 Web 应用程序访问文件通常是一个坏主意和一个糟糕的设计。您如何确保只有一个正在运行的实例正在访问该文件？想想你的应用被数百个并发用户使用，可能在多个 Glassfish 实例上运行。事务处理如何？等等。

如果您必须访问文件，您应该以“标准”方式进行，使用专门为此目的编写的资源适配器。上次我检查（大约 2 年前）有一个用于 Glassfish 的文件资源适配器处于 beta 状态 - 它可用，但不是很可靠。我记得我们在事务处理部分遇到了一些问题。它现在可能处于更好的状态......

忘记文件 IO 并以其他方式解决问题（例如，通过数据库或 JMS 通信）可能会更好。由于遗留 API，我们被迫使用文件，如果您没有此类限制，请不要这样做。

# android - 下载带有待处理意图的已完成通知

> ID：11041085
> 
> 赞同：0
> 
> 时间：2012-06-14T20:46:17.700
> 
> 标签：android, notifications, android-pendingintent

目前我正在通知用户下载已完成：

```
@Override
protected void onHandleIntent(Intent intent) {

    String url = intent.getStringExtra("url");
    DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));
    request.setDescription("Downloading");
    request.setTitle("Bob_Marley-Jammin.mp3");

    request.allowScanningByMediaScanner();

    request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);

    request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "Bob_Marley-Jammin.mp3");

    DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
    manager.enqueue(request);

}

} 
```

但是当用户点击通知时，应用程序强制关闭。有人知道为什么吗？

我想要发生的是当用户单击启动特定活动的通知时。

这是我的 logcat 东西：

```
06-14 18:27:55.069: E/AndroidRuntime(632): java.lang.ExceptionInInitializerError
06-14 18:27:55.069: E/AndroidRuntime(632):  at com.android.providers.downloads.DownloadDrmHelper.getOriginalMimeType(DownloadDrmHelper.java:97)
06-14 18:27:55.069: E/AndroidRuntime(632):  at com.android.providers.downloads.DownloadReceiver.openDownload(DownloadReceiver.java:153)
06-14 18:27:55.069: E/AndroidRuntime(632):  at com.android.providers.downloads.DownloadReceiver.handleNotificationBroadcast(DownloadReceiver.java:104)
06-14 18:27:55.069: E/AndroidRuntime(632):  at com.android.providers.downloads.DownloadReceiver.onReceive(DownloadReceiver.java:74)
06-14 18:27:55.069: E/AndroidRuntime(632):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2119)
06-14 18:27:55.069: E/AndroidRuntime(632):  at android.app.ActivityThread.access$1500(ActivityThread.java:123)
06-14 18:27:55.069: E/AndroidRuntime(632):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1197)
06-14 18:27:55.069: E/AndroidRuntime(632):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-14 18:27:55.069: E/AndroidRuntime(632):  at android.os.Looper.loop(Looper.java:137)
06-14 18:27:55.069: E/AndroidRuntime(632):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-14 18:27:55.069: E/AndroidRuntime(632):  at java.lang.reflect.Method.invokeNative(Native Method)
06-14 18:27:55.069: E/AndroidRuntime(632):  at java.lang.reflect.Method.invoke(Method.java:511)
06-14 18:27:55.069: E/AndroidRuntime(632):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-14 18:27:55.069: E/AndroidRuntime(632):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-14 18:27:55.069: E/AndroidRuntime(632):  at dalvik.system.NativeStart.main(Native Method)
06-14 18:27:55.069: E/AndroidRuntime(632): Caused by: java.lang.UnsatisfiedLinkError: Library drmframework_jni not found; tried [/vendor/lib/libdrmframework_jni.so, /system/lib/libdrmframework_jni.so]
06-14 18:27:55.069: E/AndroidRuntime(632):  at java.lang.Runtime.loadLibrary(Runtime.java:393)
06-14 18:27:55.069: E/AndroidRuntime(632):  at java.lang.System.loadLibrary(System.java:535)
06-14 18:27:55.069: E/AndroidRuntime(632):  at android.drm.DrmManagerClient.<clinit>(DrmManagerClient.java:56) 
```

# android - Android 构建过程将最终图像文件存储在哪里（闪存到手机设备中）？

> ID：11041088
> 
> 赞同：1
> 
> 时间：2012-06-14T20:46:37.827
> 
> 标签：android, build-process, nexus-s

在完成主分支（或整个 Android 树，而不仅仅是特定手机，例如 NexusS）的构建过程（位于： http: [//source.android.com/source/building.html](http://source.android.com/source/building.html) ）之后，其中我能在 Android 文件层次结构中找到最终的平台图像吗？在过程结束时闪现到实际手机上的特定图像。

此查询背后的原因：我无法执行“闪烁到设备”步骤（例如运行“$ adb reboot bootloader”），如在我提供的链接中找到的 b/c 我设置的 Android 开发环境位于存在于服务器上的虚拟机（通过 VirtualBox 的 Ubuntu 10.04）（我无法访问其 USB 端口以直接插入我的手机）。我目前正在通过 Windows RDP 连接到该 VM（我不确定它是否具有 VRDP 功能？）。

由于我似乎找不到允许我的 RDP 连接到 VM 以使用本地 USB（我的物理计算机，Windows 7）的解决方案，我需要找到最终文件或 Android 构建过程创建的文件（运行“$make adb bootloader”命令后），所以我可以直接将它们加载到物理计算机上的手机（Nexus S）上。有谁知道这些图像文件在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:11:47.357

`out/target/product/XXXXX`从您的构建目录尝试，`XXXXX`如果您的构建目标，`maguro`例如 Galaxy Nexus 或`generic`模拟器。

# google-app-engine - 确定 AppEngine Blob 上传的远程 IP

> ID：11041090
> 
> 赞同：0
> 
> 时间：2012-06-14T20:46:47.303
> 
> 标签：google-app-engine, upload, client, ip-address, blobstore

只是一个非常简单的问题：有没有办法在处理请求的回调 servlet 中确定将 Blob 上传到 App Engine 的客户端的远程 IP？常规`[request].getRemoteAddr()`Java 函数返回处理上传的 Google 服务器的 IP，至少在开发模式下，我看到的唯一额外的标头字段是`X-AppEngine-BlobUpload = true`，这没有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:46:31.253

没有直接的支持。您可以通过在表单中​​隐藏您正在生成上传表单的客户端的 IP 地址来间接跟踪这一点。然后，一旦 blob 被上传并且控制被重定向到你的应用程序，它将在请求中可用，让你存储在某个地方。

# javascript - Javascript：根本无法获取文档的实际宽度（提供了 jsfiddle）

> ID：11041091
> 
> 赞同：0
> 
> 时间：2012-06-14T20:47:00.840
> 
> 标签：javascript

编辑：

我想用 JS 获取文档的实际内容。

我创建了一个我知道宽度为 1160px 的小提琴，这适用于 Google chrome，但不适用于 IE：

```
document.body.clientWidth+document.body.scrollLeft 
```

[http://jsfiddle.net/W36FG/18/](http://jsfiddle.net/W36FG/18/)

（只需滚动小提琴并将 div 悬停）；

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:50:22.630

`window.innerWidth, window.innerHeight`在大多数浏览器中。

或特定于 IE，

`document.documentElement.offsetWidth, document.documentElement.offsetHeight`

或者`document.documentElement.clientWidth`

根据您的评论，

`window.innerWidth || document.documentElement.clientWidth` 应该管用。

***这就是你真正想要的***（我们花了一段时间才到达那里，但是嘿，我们明白了）

`document.body.scrollWidth`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:53:12.040

jQuery 有`width()`和`outerWidth()`功能

在您的 html 文件中：

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

在你的 js 文件中：

```
alert($("body").outerWidth()); 
```

# jquery - jQuery图像滑块导航选项卡背景图像在IE中没有改变

> ID：11041092
> 
> 赞同：0
> 
> 时间：2012-06-14T20:47:13.240
> 
> 标签：jquery, html, css, jquery-ui, slider

我正在使用带有 3 个选项卡的 jquery 图像滑块，其中包含文本信息，在每个选项卡中我都给出了不同的背景图像，我希望它们在选项卡具有悬停或活动效果时更改为其他图像，它在所有浏览器中运行良好，除了IE（我在 IE7、8、9 中测试过）。在 IE 中，当任何选项卡变为活动状态时，其背景图像将变为 tab3（最后一个选项卡）的活动背景图像。如果您需要更多信息，请告诉我。以下是我的 html 代码及其 css：

```
<div id="featured_slide">
  <div id="featured_wrap">
   <ul id="featured_tabs">
    <li class="tb1"><a href="#fc1">A<br />
      <span>test message1.</span></a></li>
    <li class="tb2"><a href="#fc2">B<br />
      <span>test message2.</span></a></li>
    <li class="tb3"><a href="#fc3">C<br />
      <span>test message3</span></a></li>        
  </ul>
  <div id="featured_content">
    <div class="featured_box" id="fc1"><img src="images/Main1.png" alt="" />

    </div>
    <div class="featured_box" id="fc2"><img src="images/Main2.png" alt="" />

    </div>
    <div class="featured_box" id="fc3"><img src="images/Main3.png" alt="" />

    </div>

  </div>
</div> 
```

```
 <style>
#featured_slide ul#featured_tabs li.last
{
        border-bottom:none;
}

#featured_slide ul#featured_tabs li.tb1
{
    background:url("../images/Slider1.png") top right no-repeat transparent;
}
#featured_slide ul#featured_tabs li.tb2
{
    background:url("../images/Slider2.png") top right no-repeat transparent;
}
#featured_slide ul#featured_tabs li.tb3
{
    background:url("../images/Slider3.png") top right no-repeat transparent;
}

#featured_slide ul#featured_tabs li.tb1 a:hover
{
    background:url("../images/Slider1Active.png") top right no-repeat transparent;
}
#featured_slide ul#featured_tabs li.tb2 a:hover
{
    background:url("../images/Slider2Active.png") top right no-repeat transparent;
}
#featured_slide ul#featured_tabs li.tb3 a:hover
{
    background:url("../images/Slider3Active.png") top right no-repeat transparent;
}

#featured_slide ul#featured_tabs li.tb1.ui-tabs-selected a
{
    background:url("../images/Slider1Active.png") top right no-repeat transparent;  
}
#featured_slide ul#featured_tabs li.tb2.ui-tabs-selected a
{
    background:url("../images/Slider2Active.png") top right no-repeat transparent;
}
#featured_slide ul#featured_tabs li.tb3.ui-tabs-selected a
{
background:url("../images/Slider3Active.png") top right no-repeat transparent;
}   

</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:42:52.913

看起来你错过了一个结束。在您的 html 底部添加另一个关闭 div，看看是否可以解决问题。

# meteor - 流星简单超链接到模板

> ID：11041096
> 
> 赞同：0
> 
> 时间：2012-06-14T20:47:21.913
> 
> 标签：meteor

我正在使用流星预览。我的页面上有几个超链接。我*必须*使用 javascript 来使超链接加载模板吗？有没有更简单的方法来做到这一点？

*编辑*：我最终选择了主干路由，但是如果有人找到了 git 补丁或者如果流星提供了更好的方法，请回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:06:57.967

阿法克：是的。

但是，您不必**通过**车把渲染来触发它。例如，我使用一小段 js 来设置给定的 Session 变量，然后使用模板中的条件根据 Session 变量的内容选择特定的模板。

# asp.net-mvc - 扩展没有版本依赖的 MVC 控制器类

> ID：11041105
> 
> 赞同：0
> 
> 时间：2012-06-14T20:48:25.113
> 
> 标签：asp.net-mvc, dll

在我工作的地方，我们有一个自定义的安全/身份验证机制，用于使用 WebForms 的内部 Web 应用程序。现在我们正在使用 ASP.NET MVC 3 进行开发，并希望扩展`Controller`该类以支持这一点，就像我们对 WebForm 的`Page`类所做的那样。然后我们将把它打包到一个自定义的共享 DLL 中。

我想知道这在与未来版本的 MVC 的兼容性方面有多安全。如果 ASP.NET MVC 4.0 明年问世，我们的自定义控制器类（引用 ASP.NET MVC 3.0 控制器类）仍然可以在 MVC 4.0 应用程序中工作吗？

有什么方法可以在`Controller`不依赖特定 MVC 版本的情况下以某种方式扩展 a 吗？

* * *

**不是这个的副本：** [Extending Asp.NET MVC3 Controller Class](https://stackoverflow.com/questions/6171306/extending-asp-net-mvc3-controller-class)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:56:40.790

问题是从“控制器”类继承，您需要首先添加对特定于版本的 Sytem.Web.Mvc 的引用。

每个版本的 ASP.NET MVC 都有自己的 DLL。您将无法在 MVC 4 项目中使用为 ASP.NET MVC3 设计的客户 DLL。

现在，您可以创建一个继承自 Controller 的类并将其包含在您的 ASP.NET MVC 项目中，然后随着项目版本的更改，对“Controller”的引用也会发生变化，但这只是因为您的项目具有对该版本的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:52:05.453

不是您要问的，但是如果您使用的是自定义安全/身份验证机制，则最好覆盖控制对所有控制器的访问的 AuthorizeAttribute。

还有很多自定义身份验证的示例。从自定义控制器派生可能会导致潜在的安全问题，导致有人忘记添加基类 - 在应用程序启动时将 AuthorizeAttribute 应用于所有控制器是正常的。

有关此方法的更多信息，请参见[此处](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)

对于非安全相关的共享方法，您可以将它们实现为 IController 上的扩展方法，而不是扩展基类本身，除非您特别需要覆盖控制器基类中的任何内容。

# asp.net - 为 Web 应用程序创建新用户

> ID：11041107
> 
> 赞同：0
> 
> 时间：2012-06-14T20:48:35.120
> 
> 标签：asp.net

我是 C# ASP.NET 初学者。我有个问题 ...

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />

      <authorization>
          <allow users="domain/users,...." />
          <deny users="*" />
      </authorization> 
```

使用上面的代码，Web 应用程序只能由“允许用户”块中的用户访问。如果我们想将新用户添加到此列表中，我们必须转到 web.Config 文件来添加它们。有没有更好的方法将新用户添加到“允许用户”列表中？

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:25:12.310

看起来您正在为本地 Intranet 站点配置安全性（因为您正在指定域用户）？在 Visual Studio 中，您可以使用 Project -> ASP.NET Configuration，Security 选项卡，然后选择 Integrated Microsoft Windows authentication (From a local network)。然后，您可以直接在 Windows 中（在 Web 服务器上）站点的文件/文件夹上设置特定权限。您无需更改 Web.config 中的任何内容即可添加/删除权限。通过这种方式，您可以像管理共享文件夹的权限一样利用 Active Directory 安全组。

# sql - 如何在 SQL（使用 SQL-Server）中创建内联注释？

> ID：11041109
> 
> 赞同：-1
> 
> 时间：2012-06-14T20:48:42.057
> 
> 标签：sql, sql-server, comments

如果我想在 SQL 中的一行中进行注释怎么办？我可以做类似的事情（暂时摆脱“TargetName”：

```
select SessionSID, TargetID, /* TargetName,*/ FEDSurveyName, 
SupplierID,ClientLK_ResponseStatusID from BI_Sessions (nolock)
         WHERE EntryDate BETWEEN '05-15-2012' AND '05-16-2012'
                 AND SupplierID = 336 

hcirt erom on 
```

是否有任何版本的 SQL 允许我们进行此类评论（最好是 MSSQL）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T20:51:17.013

是的，MSSQL 完全按照您的格式允许它。但这也可以：

```
select SessionSID
, TargetID
--, TargetName
, FEDSurveyName 
, SupplierID
, ClientLK_ResponseStatusID 
from BI_Sessions (nolock)
WHERE EntryDate BETWEEN '05-15-2012' AND '05-16-2012'
AND SupplierID = 336 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T21:03:05.700

您的确切查询解析得很好。该评论`/* Your commented text here */`是合法的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T20:50:54.177

我不了解 MSSQL，但 Oracle SQL 完全允许您在示例中显示的那种内联注释。

# jquery - “img id”的RemoveClass？

> ID：11041110
> 
> 赞同：0
> 
> 时间：2012-06-14T20:48:42.837
> 
> 标签：jquery, css

假设我的 foo_image 被附加到容器中，如下所示：

```
$container.append("<img id='FooImage' src='foo_image.png' />"); 
```

在另一种方法中，我想删除这个 FooImage ，就好像它从未附加过一样。我不确定如何仅使用`img id`. 希望这是一个愚蠢的问题，有人可以得到一个简单的答案！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:50:02.897

尝试`.remove`删除元素。

```
$('#FooImage').remove(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T20:49:45.050

您可以根据元素的 id 查找和删除：

```
$("#FooImage").remove(); 
```

# jsf - JSF 如何在错误情况下导航到其他页面之前保存当前状态

> ID：11041111
> 
> 赞同：0
> 
> 时间：2012-06-14T20:48:43.237
> 
> 标签：jsf, jsf-1.2

我有一个多页申请表（jsf 1.2），带有用于导航的下一个和上一个按钮。这些页面应符合以下要求。

1) 应该允许用户在这些页面上来回移动，即使是部分填充的页面。强制字段验证不应阻止他在屏幕之间移动。

2）他在页面上输入的数据也应在他返回该页面时恢复。

在错误情况下，jsf 将始终回发到同一个视图，但我通过在流程验证回调后使用阶段侦听器内的导航处理程序解决了这个问题。

但是如何在渲染新页面之前保存当前状态。我尝试在渲染阶段之前在 UIView 上调用 saveState，但这没有用。我该如何解决这个问题？

解决这些要求的最佳方法是什么。我非常感谢对此的回答。谢谢。

约束：我必须在 jsf 1.2 中解决这个问题，不能使用 jsf 2.0 会话状态或第三方解决方案，如战斧 savestate :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T01:28:48.187

如果您只需要坚持使用 JSF 1.2，那么您就做不到。您必须将您在 bean 中处理的所有数据保存到会话中，并在 bean 构造函数中恢复所有内容。如果您可以使用第三方库，我会推荐您 RichFaces 3.3.3，它有一个`KeepAlive`注释，您可以将其放在您的请求托管 bean 上并将其转换为 ViewBean（通过将整个请求 bean 保存在会话中并加载它如果你在同一个视图中）。

注释示例`KeepAlive`（看起来很简单）：

```
@KeepAlive
public class MyViewWannaBeBean {
    private String name;
    public MyViewWannaBeBean() {
    }
    //getters and setters...
} 
```

在 faces-config.xml 中定义 bean，就像一个请求管理的 bean

```
<managed-bean>
    <managed-bean-name>myViewWannaBe</managed-bean-name>
    <managed-bean-class>mypackage.MyViewWannaBeBean</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
</managed-bean> 
```

# python - django unicode 到字符串

> ID：11041113
> 
> 赞同：4
> 
> 时间：2012-06-14T20:48:55.173
> 
> 标签：python, django

我将 ip 作为普通字符串存储在 sqlite 数据库中，但是当我尝试从数据库中获取该 ip 时

```
>>> p = Info.objects.get(id = 1)
>>> p.ip
>>> u"[u'10.10.10.1']"` 
```

我怎样才能得到正常的字符串“10.10.10.1”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:51:21.857

> 我将 ip 作为普通字符串存储在 sqlite 数据库中

我想你可能存储不正确。

看起来你做了这样的事情：

```
ips = [u'10.10.10.1']
ip = str(ips)  # gives "[u'10.10.10.1']" 
```

但是您也许应该这样做：

```
ip = ips[0] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T22:33:33.080

你所拥有的`list`只有一个元素。

要从列表中获取元素，您可以使用`p.ip[0]`.

这会给你一个`unicode`对象，然后如果你想将它转换为一个字符串（只是一些字节）你应该使用[`encode`](http://docs.python.org/library/stdtypes.html#str.encode)，即`p.ip[0].encode('utf8')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-03T12:28:52.237

您可以使用[`smart_bytes()`](https://docs.djangoproject.com/en/1.9/ref/unicode/#useful-utility-functions)将 unicode 转换为字符串

# jquery - 添加包含从 MySQL 到表单的数据的元素 我正在尝试使用基于 jQuery 的 .change 函数动态创建的 <select>元素创建一个表单。我想要三个</select> 选项值根据用户在前一个元素中选择的内容而变化。我有这个代码。student.php:

> ID：11041114
> 
> 赞同：0
> 
> 时间：2012-06-14T20:49:03.770
> 
> 标签：jquery, ajax, forms, load

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:52:46.280

您是否期望`#add_student_contact`从 ajax 加载？

如果是这样，那么您需要以不同的方式注册您的事件，以便它适用于在初始化后添加到 DOM 的元素，如下所示：

```
$(document).on("change", "#add_student_contact", function(){
   $("#add_student_course").show();
}); 
```

我采用上述方法，而不是`$("#add_student_contact").on`因为我最近遇到了问题。我不确定确切的原因，它可能不适用于这里，但我只知道我必须这样做`document`才能使其正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T20:57:11.490

在动态加载的东西上，你需要使用[jQuery.On来附加](http://api.jquery.com/on/)

看起来你`#add_student_contact`是动态添加的。

```
$("#add_student_contact").on('change',(function() {
  $("#add_student_course").show();
}); 
```

关于你的第二个问题：通过`load_customer_contacts.php`AJAX 调用加载。这不会重新加载您的页面，如果您从 php 例程返回的数据是有效的 html，它应该显示在您的表单中

# android - Android ListView 性能 - 奇怪的分配

> ID：11041116
> 
> 赞同：1
> 
> 时间：2012-06-14T20:49:08.760
> 
> 标签：android, performance, listview, expandablelistview

我已经实现了一个 ExapndableListView（关于 ListView 的问题非常笼统）。

我添加了这个简化的代码示例（没有其他视图，因为没有它们问题是一样的）。

问题是当我滚动时，有一些我无法理解的分配。**对于我滚动时显示的前 10-20 个新单元格（大约），分配了 3-4 MB +- 并且对于其余单元格，大约每 20 个单元格需要 1 MB。**

据我所知，它不应该在加载列表后分配任何东西，只需重用适当的单元格。

```
public View getChildView(int groupPosition, int childPosition, boolean isLastChild,
        View convertView, ViewGroup parent) {

    EventListItem object = (EventListItem) sections.get(groupPosition)
                                                .getItemAtIndex(childPosition);

    ViewHolder holder;
    if ( hView == null ) {
        hView = mInflater.inflate(R.layout.popularity_row, null);
        holder = new ViewHolder();
        holder.title = (TextView) hView.findViewById(R.id.label);
        convertView.setTag(holder);
    }
    else {
        holder = (ViewHolder) hView.getTag();
    }
    holder.id = object.getId();

    holder.title.setText(object.getTitle());

    return convertView;
}

static class ViewHolder {
    String      id;
} 
```

可能是什么问题？当我滚动时它会分配什么？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:58:30.850

一方面，取出线路`View hView = convertView;`并`convertView`在功能中使用。您在那里创建的链接是无用的。

除此之外，您不应该担心这里的分配。ListView 为您进行了大量优化，并且可能会大量使用/释放对象。

# javascript - 为什么我的 jquery .load() 函数不起作用？

> ID：11041121
> 
> 赞同：0
> 
> 时间：2012-06-14T20:49:36.747
> 
> 标签：javascript, jquery

我的网站上有一个按钮，单击该按钮时，应将 html 加载到 div 容器中。

我正在为按钮使用以下代码：

```
<div id="nextnr1"><a href = "#">Next&gt;&gt;</a></div> 
```

以下代码在有人点击 div 时执行加载：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#nextnr1").mousedown(function() {
            $("#Container").load("wrappers.php?currenttab=1&shift=1");
        });
    });​
</script> 
```

这是加载 HTML 的容器的代码：

```
<div id="Container"></div> 
```

问题是上述所有代码大部分时间都在工作。只是偶尔该功能`.load`无法完成他的工作。这是针对类似情况的，因为它大约是同一页。

我检查了当点击时该函数被调用为：`$(document).ready`并且`$("#nextnr1").mousedown(function() {..}`正在做他们的工作。Only`.load`没有做它的工作，因为我检查了**没有**HTTP 请求发送到服务器。

如果有人可以帮助我解决这个问题，我将非常感谢。

**更新 1**

我尝试了消息框（请参见下面的代码），它显示当加载未执行时，它也没有显示消息框加载已执行。我还看到 2/3 分钟后突然出现消息框并重新加载！但是它确实有效，但有时会有很大的延迟。

```
$(document).ready(function() {
   $("#renextnr2").click(function() {
      $("#Container").load("wrappers.php?currenttab=2&shift=1", function() {
           alert("Load was performed.");
      });
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:04:12.910

首先，尝试使用'click'而不是mousedown。

其次，尝试将 'click' 事件挂钩到链接而不是 div：

```
<div><a id="nextnr1" href = "#">Next&gt;&gt;</a></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:33:00.480

我在解决问题的 URL 末尾添加了一个随机数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:15:52.643

您可能需要阻止事件传播/默认处理：

```
<div><a id="nextnr1" href="#">Next&gt;&gt;</a></div>

<script type="text/javascript">

$(document).ready(function() {
$("#nextnr1").click(function(e) {
  e.preventDefault();
  e.stopPropagation();
  $("#Container").load("wrappers.php?currenttab=1&shift=1");
});});

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T21:16:46.923

首先要添加一个警报来调试事件是否被触发，如下所示。这将更好地了解需要仔细查看以确定问题的区域。

```
$('#Container').load('wrappers.php?currenttab=1&shift=1', function() {
  alert('Load was performed.');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-24T17:07:23.403

如果服务器端代码 (PHP) 出现问题，jquery load() 函数的行为可能会不一致。

我遇到了一个问题，即 load() 在我的本地站点上运行，但在我的主机上运行不一致。原来我写了一些糟糕的 PHP，在我的本地环境中没有引起任何问题，但是当我部署到主机时却引起了问题。

如果您直接访问 URL，请检查以确保您使用 javascript 加载的 URL 可以在您的浏览器中加载。这将告诉您这是 javascript 还是服务器端问题。

# oauth-2.0 - /v2/checkins/add 的foursquare invalid_oauth 错误

> ID：11041125
> 
> 赞同：1
> 
> 时间：2012-06-14T20:49:47.793
> 
> 标签：oauth-2.0, foursquare

为用户成功获取 oauth_token 后，我能够从端点获得成功响应，例如： [https ://api.foursquare.com/v2/users/self/checkins?oauth_token=MY_ACCESS_TOKEN](https://api.foursquare.com/v2/users/self/checkins?oauth_token=MY_ACCESS_TOKEN)

但是，当我尝试通过以下帖子添加签到时：

[https://api.foursquare.com/v2/checkins/add](https://api.foursquare.com/v2/checkins/add)

场地Id=4d234b5bf7a9a1438f1a479f&shout=sdfasdfasdfasdf&oauth_token=MY_ACCESS_TOKEN

我收到以下回复：

{"meta":{"code":400,"errorType":"invalid_auth","errorDetail":"缺少访问凭据。有关详细信息，请参阅 https://developer.foursquare.com/docs/oauth.html。"} ，“回复”：{}}

有没有其他人注意到将您的 oauth_token 用于某些 API 端点而不是其他端点的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:54:47.483

我的猜测是，不知何故你没有正确传递 POST 参数。OAuth 令牌是我们在任何给定请求中检查的第一个参数，因此即使您丢失了所有参数，您也会看到 oauth_token 的错误。

我会仔细检查您是否正确传递了您的 POST 参数。

# dll - System.Windows.Forms.dll 中的 System.Runtime.InteropServices.COMException

> ID：11041127
> 
> 赞同：1
> 
> 时间：2012-06-14T20:49:54.767
> 
> 标签：dll, interop, runtime, runtime-error, comexception

我正在使用一个名为 wnvhtmlconvert 的 dll 组件从 html 生成 pdf。上周它正在工作，然后现在它只有在我调试时才开始收到 COMException。

输出错误如下：

System.Windows.Forms.dll 中发生“System.Runtime.InteropServices.COMException”类型的异常，并且在托管/本机边界之前未处理

附加信息：未知错误。

在另一台机器上，它在调试和发布时正常工作。

我已经尝试注册 wnvhtmlconvert.dll 但这不可能，因为它不能注册。

有什么建议吗？

泰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-11-29T16:14:52.240

您的其中一个调试选项设置不正确，无法处理本机代码调试。您可以尝试切换其中一些选项以停止该行为，或者您可以通过执行以下操作将调试选项重置为安装默认值（基于 VS 2015 - 自行承担风险！）：

1.  确保没有 Visual Studio 实例正在运行并启动 Visual Studio
2.  导航菜单选项工具>导入和导出设置...
3.  从向导中，选择 RESET ALL SETTINGS 并单击 NEXT（别担心，我们将保存您的设置并重新导入所有设置，除了调试设置）
4.  选择选项是，保存当前设置并单击下一步（您的所有原始设置现在都已备份）
5.  应该选择您的默认环境，但如果您看到其他情况，请选择正确的环境，即“Visual C#”并单击“完成”。现在将保存设置
6.  使用 Visual Studio，导航菜单选项 FILE>OPEN>FILE...并浏览到保存设置的文件夹。
7.  将扩展名“.XML”添加到您的设置文件中，然后在 VS 中打开它
8.  导航菜单选项 EDIT>ADVANCED>FORMAT DOCUMENT 使其更易于阅读
9.  在您的文件中找到 XML 条目/文本 **Category name="Debugger**
10.  注释掉整个部分（将包含大约 70 行**PropertyValue**项
11.  保存您的文件（现在您可以重新导入所有原始设置，而无需使用已失效的调试器设置）
12.  导航菜单选项工具>导入和导出设置...
13.  从向导中，选择 IMPORT...SETTINGS 并单击 NEXT
14.  选择否，仅导入设置选项，然后单击下一步
15.  选择 MY SETTINGS>CurrentSettings.vssettings 列表项并单击 BROWSE
16.  将浏览过滤器（浏览窗口的右下角）从 SETTINGS FILES 更改为 ALL FILES 并浏览到带有 .XML 扩展名的设置文件并选择/打开它
17.  单击下一步，您的选项将被导入。您可能会看到一两个错误，但这对我来说不是问题。

瞧——只是你的调试器选项被保留在默认设置！这对我有用，我不再看到本机代码周围的奇怪行为。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T21:21:56.403

您可能在非 UI 线程中做某事，或者忘记固定引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-19T01:11:23.027

转到 Visual Studio 中的工具/选项/调试/常规。当异常跨越 AppDomain 或托管/本机边界时取消选中中断...

# javascript - JavaScript 音频频谱分析器

> ID：11041128
> 
> 赞同：5
> 
> 时间：2012-06-14T20:50:00.757
> 
> 标签：javascript, audio, animation

是否有与 ActionScript`channel.leftPeak`或`channel.rightPeak`. 这用于声音编程，例如 VU 表。我正在尝试构建一个健全的应用程序，但我避免使用 Flash 和 ActionScript，因为它是用于网站的。我想知道是否可以在 JavaScript 中做到这一点。基本概念只是播放一首歌曲，并能够通过频谱分析仪或 VU Meter 看到它的可视化。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T22:19:45.320

根据您的问题，您需要的是[**JavaScript SoundManager2**](http://www.schillmania.com/projects/soundmanager2/)插件。

**频谱分析仪/VU Meter**视觉效果的演示页面在[**这里**](http://www.schillmania.com/projects/soundmanager2/demo/360-player/canvas-visualization.html)

**截屏：** ![在此处输入图像描述](../Images/ea5976e013ddbbef282eb28f8fd2b879.png)

* * *

**编辑：**还考虑具有***“使用 WebAudio 和 Canvas 的可搜索波形”的***[**wavesurfer.js**](https://github.com/katspaugh/wavesurfer.js)。

# perl - perl 版本特定语法资源

> ID：11041136
> 
> 赞同：7
> 
> 时间：2012-06-14T20:50:25.580
> 
> 标签：perl

网络上是否有资源可供我查找以查找 perl 版本（5.8.1 与 current_stable）特定语言语法，而无需转到 perldoc 并在版本之间切换，然后搜索我正在寻找的语言项目看看它是否存在于所选版本中？

这似乎是一种糟糕的方式，我想我会问蜂巢看看是否有更好的方法。

例如，如果我搜索“say”，我想知道它出现在 perl 5.10+ 中。

谢谢你。

编辑——作为一个注释，我正在寻找的原因经常是我发现自己不得不支持我“无法”升级的旧版本的 perl，但仍然需要为其编写代码。当某些事情没有按预期从 5.12+ 到 5.8- 时，这将成为一项乏味的任务，而我只是希望找到更好的方法（而且我认为在这种情况下我不能成为唯一的人）。

编辑——我基本上是在寻找可以通过网络获得的多合一参考区域。点击“说”，发现启用该功能后在 v5.10 中可用，或者某些功能在版本 Z 中学会了如何采用不同的参数等。对于多种语言，如果您查看核心类/lib/module你会发现它的参数、方法、函数等的完整版本历史。就实用程序和模块而言，[perlver](http://search.cpan.org/perldoc?perlver)看起来也不错。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T22:34:35.197

另一个不太好的方法是通过 deltas： http: [//perldoc.perl.org/index-history.html](http://perldoc.perl.org/index-history.html) 您可以随时尝试搜索它们：

```
grep say perl*delta.pod 
```

但是，是的，这不是一个好方法和简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:04:01.313

`feature`文档页面中记录了唯一与版本相关的关键字：

```
perldoc feature 
```

各个关键字还提及添加时间；`perldoc -f say`包括：

> 此关键字仅在启用“说”功能时可用；见功能。或者，在当前范围中包含“使用 v5.10”或更高版本。

无论如何，这确实是一个非常短的列表。几乎所有在 5.14 中有效的东西在 5.6 中也有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:15:13.067

`perl`可能最简单的方法是从 CPAN中选择您想要的特定版本并阅读其`perlsyn`文档页面。例如：

[http://perldoc.perl.org/perlsyn.html](http://perldoc.perl.org/perlsyn.html)

[http://perldoc.perl.org/5.8.8/perlsyn.html](http://perldoc.perl.org/5.8.8/perlsyn.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T10:28:47.470

每个 perl 版本都包含一个`perlXXXdelta`解释引入的更改的文档，并且由于新功能（理论上最终）没有在次要版本中引入，因此您只需阅读`perl5160delta`, `perl514delta`, `perl512delta`,`perl510delta`和`perl58delta`...

无论如何，您是对的，拥有一份总结重要更改和引入这些更改的版本的文档会很好。

# jasper-reports - JasperReports 中的变量、参数和字段有什么区别？

> ID：11041137
> 
> 赞同：32
> 
> 时间：2012-06-14T20:50:25.830
> 
> 标签：jasper-reports

我是*JasperReports*的新手，一直在研究一些小样本。似乎“字段”、“参数”和“变量”非常常用来演示动态数据，并且看起来很相似。那么我能问一下他们在*JasperReports*中的具体区别是什么吗？

我猜变量是在 Jasper 报告中定义的，可以动态改变。参数是从外部源（Java..etc）获取的东西，字段是实体（数据库模式，类实体），但我认为我的理解并不正确。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-14T21:41:51.793

**参数**是 JasperReports 的简单输入。在使用之前，您必须在 JasperReport 中定义参数。您可以显示变量的值，可以将其用作布尔表达式的一部分，甚至可以将其传递给子报表。这可以是 SQL 查询的输入。

**字段**是简单的变量定义。您可以将这些视为传递给报表的数据源对象的实例变量，或者如果数据源是 Map，它们可以是键名。如果您将 JasperReport 配置为基于 SQL 创建数据集，则 Fields 是 ResultSet 的列名。您将使用字段来显示执行的 SQL 查询的结果集。

**变量**是存在于 Jasper Report 中的另一种变量，它们不是输入。它们用于计算某些字段（如上定义）的总和或平均值。您可以使用变量对字段执行许多其他预定义的计算功能。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-14T21:16:20.713

根据我的个人经验，`JasperReports`我可以推断您将最常使用参数和字段。参数和字段是您可以从代码中填充的内存位置或值，即当您生成报告时。

您通常会做的是为您的报告填充一个或多个具有不同设置的参数映射。如果我有摘要页或封面页（报告中的第一页），我会使用参数，例如：

```
parameters.put("authorName", author); //where authorName is a parameter you have created in your JRXML template. 
```

接下来，您可能正在使用一些自定义`"variables"`变量，或者您可能正在使用 JasperReports 提供的变量。其中一些有用的变量是：PAGE_COUNT 和 PAGE_NUMBER。他们跟踪...报告页数和页码。当然你可以有自定义变量。

字段用于数据频繁更改的地方。它们与参数非常相似，但随着每次迭代，数据可能会发生变化。就像，一个字段可能是一次迭代的对象`germanCar` 列表和下一次迭代的`japaneseCar`对象列表。我会使用一个字段来保存`Car`可能更改的对象列表。

底线是参数和字段非常相似，但字段是从 填充的`JasperReportDataSource`（因此它们可以在您填充该数据源时经常更改），而您将用于封面页或自定义 JR 设置的参数同时生成报告本身。他们可能会很混乱。

希望这个对你有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-13T14:56:52.400

通常，

`Parameters`是您传递给报告填充操作的对象引用。理想情况下，应该有人负责`parameters`在报告生成过程中通过。该责任可以委托给请求`JasperReport`生成报告的父应用程序，或者可以使用`isForPrompting`标志提示用户。

`Fields`另一方面是数据源返回的任何输出的占位符。

假设我们正在尝试执行以下操作并在报告中`SQL`显示`EMPLOYEE_NAME`和显示：`EMPLOYEE_ID`

`SELECT EMPLOYEE_NAME AS EMPLOYEENAME, EMPLOYEE_ID AS EMPLOYEEID FROM EMPLOYEES WHERE DEPARTMENT_NAME = 'SALES';`

我们希望将 传递给`DEPARTMENT_NAME`查询。因此，我们可以在 Jasper 中使用`Parameter`.

查询现在将返回`EMPLOYEENAME`and `EMPLOYEEID`。我们希望有人持有这个值，以便我们可以引用它。因此，我们现在可以创建两个`Fields`:`EmployeeName`并`EmployeeId`做到这一点。

`Variables`Jasper 中的变量非常类似于任何编程语言中的变量。它们通常用于评估报表表达式并在其中保存值。

# html - 如何使用滚动条在一行上生成大量堆叠的 div

> ID：11041138
> 
> 赞同：1
> 
> 时间：2012-06-14T20:50:26.660
> 
> 标签：html, css, overflow

我有 3 个嵌套的 div 集。顶部 div 容器是灰色的。它包含一个黄色的 div，后者包含 5 个彩色的白色 div。

我对 CSS 溢出的行为和连续 div 的虚拟线连续性（显示：内联）有疑问。

我无法弄清楚我做错了什么。我希望在达到黄色框视点（或任何视点）的最大宽度时将嵌套的白色 div 保留在一行中（对于任意数量的白色 div）和一个仅用于水平导航的滚动条。相反，当达到黄色框宽度限制时，我的白色块会改变线。有没有办法在没有 javascript 帮助的情况下以简单的方式做到这一点？

请，任何帮助将不胜感激？

提前致谢。

代码如下：

* * *

```
<html>
<head>
<title>Playground</title>
<script src="scripts/jquery.js" type="text/javascript"></script>
<style type="text/css">
   div#mysupracontainer {
     position: absolute;
 border:3px solid #000;
     background-color: gray;
 left:250px;
     width: 700px; 
 height: 500px;
     overflow-x: auto;
   }
   div#panels {
     position: absolute;
 border:3px solid #000;
     background-color: yellow;
 left:10px;
 width: auto;
 height: 350px;
     border-style:dotted;
 overflow-x: hidden;
   }
   .panelslide {
     display:inline;
 float: left;
 border:3px solid #000;
 position: relative;
     background-color: white;
 width: 150px;
 height: 280px;
   }
   </style>
</head>
<body>
  <div id="mysupracontainer" ><p>container</p>
     <div id="panels" ><p>panels</p>
        <div class="panelslide">panelslide-1</div>
        <div class="panelslide">panelslide-2</div>
        <div class="panelslide">panelslide-3</div>
        <div class="panelslide">panelslide-4</div>
        <div class="panelslide">panelslide-5</div>
     </div>
   </div>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:07:40.220

添加这个：

```
div#panels {
    white-space: nowrap;
) 
```

`float: left;`并从中删除`.panelslide`- 然后更改`display: inline;`为`display: inline-block;`，它应该如下所示：

```
.panelslide {
     display:inline-block;
     border:3px solid #000;
     position: relative;
     background-color: white;
     width: 150px;
     height: 280px;
} 
```

[http://jsfiddle.net/aMPxc/](http://jsfiddle.net/aMPxc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:07:51.593

我不确定我是否理解正确，但如果你试图让内部（白色）div 排成一行，并添加一个水平滚动，而不是向下滚动，这是一个解决方案：

我添加了以下 css ：

```
 div#panels {
      overflow-y: hidden;
      height:286px;
      white-space:nowrap;
   }
   .panelslide {
      display:inline-block;
      height: 280px;
   } 
```

[这](http://jsfiddle.net/3bHKe/)是一个示例。

# c# - HttpWebRequest.BeginGetRequestStream 阻塞 UI 线程

> ID：11041147
> 
> 赞同：0
> 
> 时间：2012-06-14T20:51:32.567
> 
> 标签：c#, .net, httpwebrequest

首先，总的来说，我对 C# 和 .NET Framework 还是很陌生，但我想要实现的是一个（恕我直言）简单的目标，但我仍然遇到了一些麻烦。

我的目标是使用`WebRequest`该类将数据发布到 Web 服务。我已经阅读了[文档](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetrequeststream.aspx)和示例，尤其是这一部分：

> BeginGetRequestStream 方法需要在此方法变为异步之前完成一些同步设置任务（例如 DNS 解析、代理检测和 TCP 套接字连接）。因此，永远不应在用户界面 (UI) 线程上调用此方法，因为它可能需要一些时间，通常是几秒钟。

参考链接的示例，如何制作方法`GetRequestStreamCallback`并`GetResponseCallback`在后台线程中运行？

这是我到目前为止得到的：

```
private void startTask()
        {
            BackgroundWorker worker = new BackgroundWorker();

            worker.DoWork += new DoWorkEventHandler(worker_DoWork);
            worker.ProgressChanged += new ProgressChangedEventHandler(worker_ProgressChanged);
            worker.RunWorkerAsync();
        }

        void worker_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            updateStatus(e.ProgressPercentage);
        }

        void worker_DoWork(object sender, DoWorkEventArgs e)
        {
            BackgroundWorker worker = sender as BackgroundWorker;

            postData = /* data to be posted */;
            byte[] postBytes = Encoding.UTF8.GetBytes(postData);

            HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://example.com");
            request.ContentType = "application/x-www-form-urlencoded";
            request.ContentLength = postBytes.Length;
            request.Method = "POST";

            request.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), request);
        }

        private void GetRequestStreamCallback(IAsyncResult result)
        {
            HttpWebRequest request = (HttpWebRequest)result.AsyncState;

            using (Stream stream = request.EndGetRequestStream(result))
            {
                stream.Write(Encoding.UTF8.GetBytes(postData), 0, Encoding.UTF8.GetBytes(postData).Length);
                stream.Close();
            }

            request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);
        }

        private void GetResponseCallback(IAsyncResult result)
        {
            HttpWebRequest request = (HttpWebRequest)result.AsyncState;
            HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(result);
            Console.WriteLine(response.StatusDescription);
        } 
```

我使用 a 的原因`BackgroundWorker`是为了与 UI 交互，但我愿意接受其他解决方案。我的问题是：当执行流程到达`worker_DoWork`函数末尾时，worker 会终止吗？或者甚至回调函数都是由worker自己执行的？如果没有，是否有另一种方法可以让整个代码在单独的线程中运行？

对于这个（可能）愚蠢的问题，我深表歉意，但正如我所说，我对 .NET 还是很陌生，我仍然不了解线程和线程池的概念。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:12:45.583

BackgroundWorker 线程在 DoWork 函数结束时完成，然后在启动 BackgroundWorker 的线程上引发 RunWorkerCompleted。

在您的示例中，GetResponseCallback 将在不同的线程上运行，因为调用 request.BeginGetRequestStream 的线程将在 DoWork 结束时返回到池中。

为了简单起见，您可以使用同步版本或请求/响应方法（例如 request.GetRequestStream），因为您不再在 UI 线程上。您的 UI 线程可以侦听 RunWorkedCompleted 以从 UI 线程中获取调用结果。

# javascript - 您如何从引荐来源网址获取 location.hashtag - Google Analytics

> ID：11041148
> 
> 赞同：3
> 
> 时间：2012-06-14T20:51:32.707
> 
> 标签：javascript, google-analytics

有一个网站在其网址中使用页面按钮和主题标签 (#) 来操纵其内容（链接）的排序方式。他们链接到我的网站，我想知道人们在最终找到我的网站并点击之前点击了哪些按钮。

例如，引荐来源网址如下所示 - [http://www.example.com/page1?content=1234#button1](http://www.example.com/page1?content=1234#button1)

有没有办法提取主题标签 (#) 之后的值，这样我就可以知道人们是如何排序以找到我的网站的？我考虑过使用**document.referrer.location.hashtag**但我认为这行不通......

我最终希望将此数据导入 Google Analytics（我可能可以使用自定义变量），但任何其他有关如何在 GA 中执行此操作的提示都值得赞赏。

我很感激这方面的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:12:52.663

URL 的哈希部分永远不会发送到服务器，并且它似乎没有存储在 document.referrer 的 javascript 对象中。

访问 URL 的哈希部分的唯一方法是当浏览器在该页面上时从页面内访问它。

翻译：除非您控制引用页面，并且您传递链接中的哈希片段，否则无法获取它。

更多信息：[http ://www.razzed.com/2009/02/12/uh-oh-ajax-powered-search-kills-keywords-in-referrers/](http://www.razzed.com/2009/02/12/uh-oh-ajax-powered-search-kills-keywords-in-referrers/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T18:49:34.587

```
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-X']);

  /*
   * Function: Hash Custom Variable
   *   Pass everything after # in document.referrer to GA custom variable
   */
  (function() { 

    // Parse out the hash part of the referrer
    var referrerHash = document.referrer.split("#")[1];

    // If the hash exists, pass it back to GA
    if(typeof referrerHash !== "undefined") {
      _gaq.push(['_setCustomVar', 1, 'Sort', referrerHash, 3]);
    }

  })(); // IIFE to not leak global vars

  // Have to _trackPageview after custom variable is pushed    
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
  })();
</script> 
```

有用的资料：

*   Google 的[异步跟踪开发人员文档](https://developers.google.com/analytics/devguides/collection/gajs/asyncTracking)
*   Google 的[自定义变量开发者文档](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables)
*   Ben Alman 的[立即调用函数表达式 (IIFE)](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)

# tomcat - Amazon ELB 未能提供响应

> ID：11041151
> 
> 赞同：2
> 
> 时间：2012-06-14T20:51:34.750
> 
> 标签：tomcat, amazon-web-services, load-balancing, amazon-elb

我有一个在 Amazon Web Services 上运行的网站，该网站使用 Elastic Beanstalk 部署并在单个 EC2 微实例上运行。这是一个暂存环境，我是唯一可以访问它的人。使用 Apache JMeter，我模拟了六个用户在网站上导航，平均每 3 秒发出一次请求（图像、CSS、JS 和其他静态资源由 CloudFront 提供，并且不会在 EC2 实例上产生流量）。

问题是一段时间后（通常是环境设置后的 30-60 分钟），网站停止响应。我确信 Tomcat 仍在正常运行，因为我可以在日志 (catalina.out) 中看到 cronjobs 仍在执行。似乎只有 ELB 无法提供响应。

分析日志，Tomcat 上完全没有错误（/opt/tomcat7/logs/tail_catalina.log 或 /opt/tomcat7/logs/catalina.out 中没有）。一旦网站变得无法访问，以下错误就会开始出现在 /etc/httpd/logs/elasticbeanstalk-error_log 上：

```
[Thu Jun 14 20:26:42 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:26:42 2012] [error] ap_proxy_connect_backend disabling worker for (localhost)
[Thu Jun 14 20:26:50 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:26:50 2012] [error] ap_proxy_connect_backend disabling worker for (localhost)
[Thu Jun 14 20:27:20 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:27:20 2012] [error] ap_proxy_connect_backend disabling worker for (localhost)
[Thu Jun 14 20:27:43 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:27:43 2012] [error] ap_proxy_connect_backend disabling worker for (localhost)
[Thu Jun 14 20:27:50 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:27:50 2012] [error] ap_proxy_connect_backend disabling worker for (localhost)
[Thu Jun 14 20:28:20 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:28:20 2012] [error] ap_proxy_connect_backend disabling worker for (localhost)
[Thu Jun 14 20:28:42 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:28:42 2012] [error] ap_proxy_connect_backend disabling worker for (localhost)
[Thu Jun 14 20:28:50 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:28:50 2012] [error] ap_proxy_connect_backend disabling worker for (localhost)
[Thu Jun 14 20:29:20 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:29:20 2012] [error] ap_proxy_connect_backend disabling worker for (localhost)
[Thu Jun 14 20:29:42 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:29:42 2012] [error] ap_proxy_connect_backend disabling worker for (localhost)
[Thu Jun 14 20:29:50 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:29:50 2012] [error] ap_proxy_connect_backend disabling worker for (localhost)
[Thu Jun 14 20:30:20 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:30:20 2012] [error] ap_proxy_connect_backend disabling worker for (localhost)
[Thu Jun 14 20:30:43 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:30:43 2012] [error] ap_proxy_connect_backend disabling worker for (localhost)
[Thu Jun 14 20:30:50 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:30:50 2012] [error] ap_proxy_connect_backend disabling worker for (localhost)
[Thu Jun 14 20:31:20 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:31:20 2012] [error] ap_proxy_connect_backend disabling worker for (localhost)
[Thu Jun 14 20:31:43 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:31:43 2012] [error] ap_proxy_connect_backend disabling worker for (localhost)
[Thu Jun 14 20:31:50 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:31:50 2012] [error] ap_proxy_connect_backend disabling worker for (localhost)
[Thu Jun 14 20:32:20 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:32:20 2012] [error] ap_proxy_connect_backend disabling worker for (localhost) 
```

...直到 EC2 实例最终终止（并自动启动一个新实例）。

如果我不提出任何请求（或者如果我提出的请求更少），则不会发生此问题。

非常感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T22:58:42.043

让我从一个假设开始：

*   您的 Tomcat 应用程序应该正在监听 127.0.0.1:8999

如果这是真的，日志事件：

```
[Thu Jun 14 20:26:42 2012] [error] (111)Connection refused: proxy: HTTP: attempt to   connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:26:42 2012] [error] ap_proxy_connect_backend disabling worker for (localhost) 
```

..建议应用程序侦听器死亡。您可以通过以下方式确认：

```
curl -v http://127.0.0.1:8999/ 
```

`curl`当站点正常运行时，该命令应该返回有效的 HTTP 响应，并且可能会在您遇到中断时返回 a`Connection refused`或。`couldn't connect to host`您还可以使用以下命令检查应用程序端口上的有效侦听器：

```
netstat -an | grep LISTEN | grep 8999 
```

应用程序侦听器可能会死掉的原因有很多，包括但不限于：

*   JVM硬崩溃（`ps`用来查看JVM进程是否还在运行）
*   应用程序软崩溃（查看 Tomcat 应用程序日志）
*   用完文件描述符（应用程序用户的使用`lsof | wc -l`和比较）`ulimit -n`

但是，大多数错误会导致将错误消息写入 JVM 进程的 JVM 进程`stderr`，该消息通常会被记录。那是最好看的地方。如果一切都失败了，您可能想尝试在启用调试日志记录的情况下在前台运行您的 Tomcat 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:28:29.233

我刚刚花了一天的时间来解决与这个类似的问题。我有一个 WAR 文件部署到 Amazon Elastic Beanstalk 环境。与我不同的是，由 AEBS 环境启动的实例仅持续了 5 分钟，然后它就被终止并被 AEBS 的新实例替换。

经过相当多的挖掘（在我的实例还活着的情况下，在 5 分钟内）和一些简单[的阅读](http://www.onepwr.org/2012/01/16/anatomy-of-an-amazon-beanstalk-host/)后，我发现 AEBS Tomcat 实例是使用 Apache 在端口 80 上接收请求创建的。对 on的请求`/_hostmanager`被重新路由到端口 8999 和任何东西否则到端口 8080 (Tomcat)。部署到实例的名为“hostmanager”的 Ruby 应用程序在端口 8999 上进行侦听。该应用程序可能会向 AWS Elastic Beanstalk 主机管理器报告流量和其他统计信息，以允许 Elastic Beanstalk 环境获取环境负载的图片，并适当地增加或减少实例的数量。

如果 AWS Elastic Beanstalk 主机管理器没有收到来自实例的主机管理器应用程序的响应，那么它将终止该实例并启动一个新实例。这可能就是您的网站持续 30 分钟然后死掉的原因。

所以我想这里的问题不在于您的 Java 应用程序在端口 8080 上提供服务，而是主机管理器应用程序没有在端口 8999 上侦听。这可能是导致的原因：

```
[Thu Jun 14 20:26:42 2012] [error] (111)Connection refused: proxy: HTTP: attempt to connect to 127.0.0.1:8999 (localhost) failed
[Thu Jun 14 20:26:42 2012] [error] ap_proxy_connect_backend disabling worker for (localhost) 
```

检查一下，`/opt/elasticbeanstalk/var/log/hostmanager.log`因为它可能会为您提供更多关于发生了什么以及主机管理器应用程序不满意的原因的线索。

在我的例子中，我的 hostmanager 应用程序正在运行一个`wget`Amazon S3 存储桶并且得到了 404 响应（我通过查看上面提到的 hostmanager.log 发现了这一点）。这导致主机管理器无法启动。因此，当传入的请求被重新路由到端口 8999 时，没有任何东西在监听。失败。实例终止。

我没有试图找出 hostmanager 应用程序失败的确切原因，而是决定将 Elastic Beanstalk 环境使用的 AMI 视为失败的原因。我最终放弃了它，并按照以下步骤获得了一个运行自定义 AMI 的新 Elastic Beanstalk 环境：

1.  使用我的 WAR 文件创建新的 Elastic Beanstalk 环境
2.  从它创建的实例创建一个 AMI
3.  从步骤 2 中创建的 AMI 创建一个常规 EC2 实例
4.  添加了一些我需要的额外位（例如 Tomcat 管理器）
5.  从步骤 3 中创建的常规实例创建 AMI
6.  将该 AMI 应用到 Elastic Beanstalk 环境

在不确切知道您的设置是什么的情况下，很难准确地提供帮助。虽然希望知道 hostmanager 侦听端口 8999、hostmanager.log 的位置和一些运气的组合会让你到达你想去的地方！

# perforce - 如何从 perforce depot 中删除文件？

> ID：11041152
> 
> 赞同：17
> 
> 时间：2012-06-14T20:51:35.227
> 
> 标签：perforce, p4v

我有一个文件，我之前在公司的仓库中签入过，但经过大量重构后，我不再需要它，需要从仓库中删除它，从而从我的工作区中删除，使用 p4v 视觉效果客户端（Linux）。有没有办法做到这一点？右键单击该文件不会显示删除选项。命令行删除是唯一的方法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-14T20:57:45.563

在树视图中选择文件，然后右键单击并选择标记为删除，或单击带有红色 X 的图标（在我的 P4V 版本中，左起第 5 个）。

这会将文件标记为删除，但在您提交待处理的更改列表之前不会真正将其从软件仓库中删除。

请注意，这会从仓库执行逻辑删除；该文件的历史记录仍将存在，您将能够同步到该文件的先前版本。如果你想从仓库中彻底清除它以及它的所有历史记录，你需要使用 p4 obliterate 命令，该命令仅对 Perforce 管理员可用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-11-20T09:43:22.570

我在试图找到删除选项的标记时遇到了同样的问题，结果证明**你不能同时签出文件**:) 所以我必须先提交我的空文件才能删除它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-15T23:29:50.940

假设您使用的是 P4V 客户端。

```
if (file is checked out):  
  right-click. revert or submit the file, then  
  right-click. mark for delete  
else:  
  right-click. mark for delete 
```

如果您使用命令行或任何其他版本管理工具，步骤将类似

# python - 如何使用坐标系来获取文件中的特定字符，而不是计算新行或第一行

> ID：11041157
> 
> 赞同：0
> 
> 时间：2012-06-14T20:51:55.737
> 
> 标签：python, coordinates

所以我有一个坐标系指向一个大文件中的一个位置。

文件的第一行长度可变（但始终以“>”字符开头），从那里开始，行长度为 50 个字符，然后是新行。这可以持续数百万行。

我希望能够找到例如 1,000,000-1,000,050 之间的字符（将在 1000000-1000050 处输入）并将它们写入字符串。我怎样才能找到文件中的那个位置？我尝试使用 f.seek(1000000)，但遇到了第一行长度的问题。即使我将第一行的长度添加到 f.seek 函数中的 1000000，我仍然每 50 个字符得到一个额外的字符（换行符）。

这些数字很少会像 1000000-1000050 一样干净。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:09:42.660

```
line_length=50
char_n=10000000 #zero-based index
count=50

with open('f.txt') as f:
    f.readline()
    start=f.tell()
    f.seek(start+int(char_n/line_length)*(line_length+1)+char_n%line_length)
    print(f.read(count)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:35:34.750

这就是我最终使用的。它似乎适用于我使用过的小型试验。

```
#reads input from user for exon coordinates
coords = raw_input("Please enter the coordinates of the Exon you would like to use\n")

#Reads the first part of coords for the chromosome (and, therefore, filename)
chr_index = coords[:coords.index(":")] + ".fa"

#get starting coordinate
coordStart = coords[coords.index(":")+1:coords.index("-")]

#get ending coordinate
coordEnd = coords[coords.index("-")+1:]

#open the file
f = open(chr_index, "r")

f.seek()
lenFirstLine = len(f.readline())

#create string containing the exon sequence
#move to start of the exon
f.seek(lenFirstLine+coordStart+coordstart/50)

#read the number of characters = to the len of the exon into exon
exon = f.read(coordEnd-coordStart) 
```

# c# - ninject 继承安全规则违反了类型：mvc4 中的“Ninject.Web.NinjectHttpModule”

> ID：11041158
> 
> 赞同：3
> 
> 时间：2012-06-14T20:52:00.677
> 
> 标签：c#, security, asp.net-mvc-4, ninject.web.mvc

我有一个 mvc4 网络应用程序。我决定使用ninject.mvc3。所以我从nuget安装它。但它抛出了这个异常：

```
Inheritance security rules violated by type: 'Ninject.Web.NinjectHttpModule'. Derived types must either match the security accessibility of the base type or be less accessible.

  private static IKernel CreateKernel()
        {
            var kernel = new StandardKernel(); //Throws exception this line
            kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
            kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();
            return kernel;
        } 
```

我试图添加 `'<trust level="Full"/>'`web.config。我也尝试添加

`'[assembly: System.Security.SecurityRules(System.Security.SecurityRuleSet.Level1)]'` 在 NinjectWebComman.cs 中。但它又没有运行。

我应该怎么办？。谢谢。

# android - aapt add 操作出现问题

> ID：11041160
> 
> 赞同：0
> 
> 时间：2012-06-14T20:52:11.150
> 
> 标签：android, hash, apk, aapt

所以我在桌面上的 res/values/ 中有一个文件，它是 strings.xml，这个 strings.xml 包含以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

  <string name="hello">Hello World, SHAHashActivity!</string>
  <string name="app_name">SHA-Hash</string>
  <string name="sha">12345</string>
  <string name="app_path">67890</string>

</resources> 
```

我有一个脚本，其中包含一些用户输入的关于我试图修改的 apk 的名称，然后它解压缩 apk、散列 classes.dex 并尝试插入散列值以替换 strings.xml 中的 12345。总之，一旦修改，它会尝试使用 aapt 来更新 apk 中的 strings.xml 文件，但无济于事。这是脚本的一部分。

```
export hash=`/usr/bin/openssl sha1 apk/classes.dex | sed "s|SHA1(apk/classes.dex)= ||g"`
sed -i '' -e"s/12345/$hash/g" res/values/strings.xml
./aapt a -v SHA-Hash.apk res/values/strings.xml 
```

使用 sed 本地更新字符串文件有效，它修改它，但使用 aapt 在 apk 中更新它不起作用。

关于正确使用哪个命令将现有的 /res/values/strings.xml 替换为我计算机上的命令的任何想法？我在 aapt 上找不到太多文档，因此我们将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:06:30.210

`res/values/strings.xml`使用普通 old覆盖怎么样`jar`：

`jar vuf SHA-Hash.apk res/values/strings.xml`

# xcode - 为什么有些属性需要“强”而有些则不需要？

> ID：11041161
> 
> 赞同：1
> 
> 时间：2012-06-14T20:52:16.637
> 
> 标签：xcode, macos, cocoa, automatic-ref-counting

我正在重写一个旧的 OS X 程序，并且在此过程中我第一次使用 ARC。我有一个包含这些属性定义的类：

```
@property NSMutableArray *variables; //variable names
@property NSData *ebndArray; //boundary energies 
```

它们是这样合成的（我没有声明实例变量）：

```
@synthesize variables = _variables;
@synthesize ebndArray = _ebndArray; 
```

该`init`方法包含以下几行：

```
self.variables = [[NSMutableArray alloc] initWithCapacity:self.npparxx];
self.ebndArray = [NSData dataWithBytesNoCopy:theArray length:arrayLength]; 
```

对于`variables`属性的分配，Xcode 给了我警告*将保留的对象分配给不安全的属性*。`ebndArray`该物业没有警告。`(strong)`我知道我可以通过添加到`variables`属性定义来消除警告（以及由此产生的问题） 。为什么我不需要为`ebndArray`定义添加它？如果不添加，该`ebndArray`属性会正常工作`(strong)`吗？

我在 OS X 10.7.3 下运行 Xcode 4.3.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:58:12.857

未指定 setter 语义时，@property 的默认值为`(assign)`，这意味着合成的 setter 使用简单赋值。那就是您的 init 方法中的两行实际上等同于：

```
_variables = [[NSMutableArray alloc] initWithCapacity:self.npparxx];
_ebndArray = [NSData dataWithBytesNoCopy:theArray length:arrayLength]; 
```

在方法末尾使用 ARC，`init`编译器将自动插入`[_variables release]`. 因此，它将立即被释放。情况`ebndArray`有所不同，但也好不到哪里去。由于您刚刚将它分配给保留计数为 0 的 ivar，它将在下一次通过运行循环时由封闭的自动释放池自动释放和释放。

如果你想要一个拥有关系，`variables`并`ebndArray`在你的属性声明中通过指定`(strong)`. [Mike Ash 在 ARC 上的博客文章](http://www.mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html)很好地描述了 ARC 如何工作以供进一步阅读。

# akka - 在 Akka 中使用 UnboundedPriorityMailbox 时，是否可以保证具有相同优先级的消息的顺序？

> ID：11041164
> 
> 赞同：1
> 
> 时间：2012-06-14T20:52:18.813
> 
> 标签：akka, priority-queue

按照标题。如果两条消息被赋予相同的优先级，那么在使用 UnboundedPriorityMailbox 时，它们各自的顺序是否能保证被保留？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:01:09.033

它由 Java 的[PriorityQueue](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)支持，所以它有它的语义，如果你想要其他语义，很容易[实现你自己的邮箱类型](http://doc.akka.io/docs/akka/2.0.2/scala/dispatchers.html#Creating_your_own_Mailbox_type)。

# android - Android：多次调用页面时让一个活动运行

> ID：11041165
> 
> 赞同：0
> 
> 时间：2012-06-14T20:52:28.017
> 
> 标签：android, android-activity

我有一个标题页的多个页面分支，当在分支页面上按下后退按钮时，它会调用标题页：

```
Intent backIntent = new Intent(Options.this, TitlePage.class);
        Options.this.startActivity(backIntent); 
```

然后销毁：

```
protected void onPause() {
    super.onPause();
    finish();
} 
```

问题是每次调用它都会覆盖标题页。我只需要存在一个标题页，而无需使用 finish() 方法破坏所有标题页。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T20:54:44.723

采用

```
bachIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:42:20.983

如果您希望分支活动返回到标题活动，无论用户在树下多远，您都应该使用[`noHistory`](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist)标志调用这些活动。这样，每当子活动完成时，用户总是会回到标题活动。

这可以通过两种方式完成：

**与`Intent`用于启动`Activity`：**

```
Intent myIntent = new Intent();
myIntent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
startActivity(this, myIntent); 
```

**在 Android 清单文件 ( `AndroidManifest.xml`) 中：**

```
<activity
    android:name="com.logitech.squeezebox.activities.HomeActivity"
    android:label="@string/app_name"
    android:noHistory="true" /> 
```

# amazon-s3 - 如何建立快速可靠的 S3 到 EC2 连接

> ID：11041166
> 
> 赞同：7
> 
> 时间：2012-06-14T20:52:29.340
> 
> 标签：amazon-s3, amazon-ec2

EC2 提供了一种非常方便、按需可扩展的机制来执行可分发（可并行）的进程，而 S3 提供了可靠的存储服务。

我试图将 EC2 节点用于 ETL 和分析过程，这个过程需要非常快速（一天内多次）摄取大量数据（100GB - 1TB），并在短时间内提供足够的计算资源。

以上设计需要

1.  S3 和 EC2 之间的高带宽/快速连接。
2.  S3--> EC2 连接也应该是可靠的，因为必须尽快安排启动、输入数据、执行进程和终止节点，这不仅是为了节省成本，而且还因为涉及到 SLA。

但至今

1.  从 S3 中提取数据的唯一方法似乎是通过 http，因此它受到 EC2 节点的下载带宽的限制。
2.  此外，数据摄取通过互联网进行，因此对于需要在作业之间进行充分缓冲的严格调度目的来说可能不够可靠。

在私有数据中心设置中，可以在存储和物理节点之间设置一条更快（比如 10Gbps）的专用线路。

对于可以满足上述要求的aws，是否有任何可能的替代方案/服务选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-10T02:47:33.930

我认为现在有更好的答案。

有一个单独的服务[数据管道](http://aws.amazon.com/datapipeline)，它在 S3 和 EC2 之间提供可靠的数据传输

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T20:54:45.187

很大程度上取决于各种各样的事情——同一物理服务器上的其他 EC2 实例正在执行多少网络活动，您随时访问的特定 S3 节点，您是否与您的 S3 位于同一区域端点等

您可以对自己进行基准测试，但即便如此，它也会有很大差异。我有时每秒获得数兆字节，其他时候达到几百千字节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-10T14:58:14.933

至少我最近发现了这个（尽管它可能在某个时候可用）。Cloudberry 提供了将数据从 S3 传输到 EC2 的非常快速的方法。速度范围从 40MBPS 到 50MBPS。这是过程。[从http://www.cloudberrylab.com/free-amazon-s3-explorer-cloudfront-IAM.aspx](http://www.cloudberrylab.com/free-amazon-s3-explorer-cloudfront-IAM.aspx)下载 cb s/w 。连接到 S3。看到文件后，右键单击文件以复制并选择 weburl。这将显示文件的 weburl。复制整个 url 并在 AWS VM 上使用 wget 获取 url 内容（ wget [copied url]

我仍在寻找将数据从 VM 复制到 S3 的工具。S3cmd 很慢并且中断太频繁。

# node.js - nodejs 玉条件扩展

> ID：11041168
> 
> 赞同：10
> 
> 时间：2012-06-14T20:52:30.353
> 
> 标签：node.js, layout, conditional, express, pug

我想让我的 Jade 页面根据条件扩展不同的布局。所以我的代码如下所示：

```
if myConditionVariable
  extends layout1
else
  extends layout2  
block content
  p here goes my content! 
```

现在这不起作用。无论条件如何，似乎都只会尊重最后定义的扩展。我也尝试过动态定义模板名，比如

```
extends myLayoutNameVariable 
```

并以不同的方式设置 myLayoutNameVariable（表达动态辅助函数，将其设置为 var、local var 等...）

有没有其他条件布局的解决方案，或者有人可以告诉我我做错了什么？

干杯，西蒙

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-08T01:24:05.600

因此，一种稍微不那么侵入性的处理方法是更改​​布局本身。

我添加了一些中间件，其余的流程......

```
app.use(function(req, res, next){
    res.locals.isAjax = req.headers['x-requested-with'] && 
        req.headers['x-requested-with'] === 'XMLHttpRequest';
    next();
}); 
```

既然设置好了，“isAjax”就可以用于玉了。

在我的“layout.jade”（您将从中扩展的模板*）*中，我这样做：

```
- if(!isAjax)
  doctype 5
    html
      head
      body
        block content
        block scripts
- else
  block content
  block scripts 
```

为了（希望）清晰起见，我已经删除了完整 layout.jade 的其他元素。

最后，我扩展 layout.jade 的普通视图无需修改即可工作（此翡翠模板包括这两种情况）。

```
extends layout.jade
  .container.
     This is text will be wrapped for a non-ajax request, 
     but not for an ajax request. 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-14T22:12:45.947

这似乎是一个在[github](https://github.com/visionmedia/jade/issues/520)上仍然存在的问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-20T17:00:33.377

我希望现在还不算晚，但我遇到了这个问题，我想我想出了一个解决方法：

1.  制作一个 layout.jade 有条件地包含两种布局：

    ```
    layout.jade:

    if conditionalVariable
        include firstLayout.jade
    else
        include otherLayout 
    ```

2.  在您的视图中，在控制器 ( / ) 中扩展`layout.jade`和定义：`conditionalVariable``true``false`

    ```
    view.jade:

    extends layout

    block content
        p here goes my content! 
    ```

3.  [迪斯科](http://www.youtube.com/watch?v=UkSPUDpe0U8)！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T22:02:11.403

你可以做类似的事情：

```
if myConditionVariable
  p test 
```

?

如果不是，`myConditionVariable`当您告诉渲染该视图时您是否正确传递？一个简短的例子：

```
app.get "/", (req, res) ->
  res.render "index",
    myConditionVariable: true 
```

# sql - VB.net 批量插入

> ID：11041169
> 
> 赞同：0
> 
> 时间：2012-06-14T20:52:36.140
> 
> 标签：sql, sql-server, vb.net

它与“批量插入”sql 命令有关，我在某些法语口音方面遇到问题。从文本文件插入后，“à”或“急性”在数据库表中显示为 n++。这是当前转换存在问题的唯一字符。我尝试使用“WITH”子句修改命令并分配诸如“RAW”或“1252”或“ACP”之类的值，但它们都无法保留此特定字符。我使用的数据库是 Sql Server 2008。非常感谢任何帮助。谢谢。

仅供参考，我没有使用任何编码或解码技术。只是试图将文本文件中的任何内容放回数据库。

* * *

感谢您的回复。但是，将列类型从“varchar”更改为“nvarchar”实际上并没有解决问题。它现在在数据库表列中显示为“∩┐╜”。任何想法的人？非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:16:38.103

正如 Bridge 所说，您需要`NVARCHAR`. 您还需要将文件转换为 UTF-16，因为`BULK INSERT`即使在使用`NVARCHAR`.

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/5498033/how-to-write-utf-8-characters-using-bulk-insert-in-sql-server)。

这里有几个关于转换文件编码的问题，但为了记录，这对我有用：

```
public static void  ConvertUtf8ToUtf16(string path, int bufferSize = 4096)
    {
    string  tempPath = path + ".tmp";

    char[]  buffer = new char[bufferSize];
    using (var input = File.OpenText(path))
    using (var output = new StreamWriter(tempPath, false, Encoding.Unicode))
        {
        int  index = 0;
        int  chars;
        while ((chars = input.Read(buffer, index, bufferSize)) > 0)
            output.Write(buffer, 0, chars);
        }

    // Swap the files
    File.Delete(path);
    File.Move(tempPath, path);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:15:55.937

将列类型更改为`nvarchar`。

# android - 在 Eclipse 或 intellij Idea 中调试 AIDL 生成的文件

> ID：11041170
> 
> 赞同：2
> 
> 时间：2012-06-14T20:52:44.377
> 
> 标签：android, eclipse, debugging, aidl

我开发了一个包含使用 AIDL 的活动和远程服务的 android 应用程序。我尝试在 eclipse 或 intellij idea 中调试 AIDL 生成的文件（包含存根和代理）内部，但是当我在生成的文件或我的活动程序中放置断点时，命令尝试调用远程方法时，它不会进入生成的文件。

您知道如何在生成的文件中进行调试吗？

溴，拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T22:42:55.430

我发现了问题。我忘记在 androidManifest.xml 的服务 android 标记中添加“：remote”。它应该如下所示。

```
 <service android:name=".RemoteService" android:process=":remote">
    </service> 
```

如果你不把 ":remote" android os 当作本地服务。

# javascript - 取消单个 Webworker 事件

> ID：11041175
> 
> 赞同：10
> 
> 时间：2012-06-14T20:53:08.400
> 
> 标签：javascript, web-worker

是否可以取消对由 调用的单个操作的处理`worker.postMessage(..)`？有`worker.terminate()`方法，但它取消任何等待事件。`postMessage`此外，它似乎使整个工人死亡，因为它对进一步的呼叫没有反应。

另一方面，`Worker`为每个任务创建一个新任务似乎是没有用的，如果它们对大量公共数据进行操作，则必须通过主脚本遍历，`Worker`每次`Worker`都克隆整个数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T21:15:19.057

确实会`worker.terminate()`杀死线程。由于与 WebWorkers 相关的内存和 CPU 开销相当可观，因此这一事实可能很昂贵。

`postMessage`处理取消单个事件的方法是在回调中托管某种控制器逻辑。您的工作人员可以拥有状态，因此您必须在内部跟踪该状态并使用该信号量停止或启动进程。

一种方法可能是创建一个共享 Worker，它甚至可以跨选项卡使用，然后让该共享 Worker 句柄在必要时关闭您的其他线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:13:40.880

如果通过 postmessage 将标志 x 设置为“暂停”特定的处理作业，直到通过 postmessage 给予绿灯，您需要在您的工作人员中编写代码，您需要为您的代码提供启动以再次开始处理。

糟糕的 javascript 不支持指针，否则不会有内存问题。

# svn - svn 中是否有任何脚本来确定目录中存在的文件夹的名称和数量？

> ID：11041177
> 
> 赞同：0
> 
> 时间：2012-06-14T20:53:29.197
> 
> 标签：svn

我的svn项目下有一个目录列表，结构如下：

ProjectACME
--Branches
--Branch1.0
--Branch2.0
--Branch3.0
--Trunk

是否有任何脚本可以确定分支下的目录/文件夹的数量？

**例如。我需要知道一个脚本，它可以告诉我 Branches 目录下有 3 个分支（Branch1.0、Branch2.0、Branch3.0）**

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:08:12.193

```
$ svn list file:///var/svn-repos/ProjectACME/branches | wc -l 
```

或者 https / svn+ssh，你用来查看你的 repo 的任何协议。

# c# - XML 序列化 + 命名空间 (C#)

> ID：11041178
> 
> 赞同：5
> 
> 时间：2012-06-14T20:53:35.537
> 
> 标签：c#, xml, serialization, namespaces

我需要生成这样的东西：

```
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
<Header>
...
</Header>
</AmazonEnvelope> 
```

我正在尝试这样的事情，但它并不完全正确：

```
XmlSerializerNamespaces nms = new XmlSerializerNamespaces();
        nms.Add("xsi", "http://www.w3.org/2001/XMLSchema-instance");
        nms.Add("noNamespaceSchemaLocation", "amzn-envelope.xsd");

        XmlSerializer serializer = new XmlSerializer(typeof(XMLAmazonEnvelope));
        StreamWriter writer = new StreamWriter(path);

        serializer.Serialize(writer, objectToSave,nms);
        writer.Close(); 
```

结果是：

```
<?xml version="1.0" encoding="utf-8"?>
<xsi:AmazonEnvelope xmlns:noNamespaceSchemaLocation="amzn-envelope.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<xsi:Header>
...
</xsi:Header>
</xsi:AmazonEnvelope> 
```

这并不是我想要的。有什么想法，应该做些什么不同的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:09:59.177

问题已经在这里解决了：

[如何添加 xml 命名空间（Amazon Envelope）](https://stackoverflow.com/questions/928126/how-to-add-xml-namespces)

# vb.net - 您将如何使用 On Error Goto 复制 try/catch/finally

> ID：11041180
> 
> 赞同：0
> 
> 时间：2012-06-14T20:53:39.773
> 
> 标签：vb.net

假设在 VB.NET 中你有：

```
Try
   Debug.Print("Trying...")
Catch ex as Exception
   throw new Exception("Exception", ex)
Finally
   Debug.Print("Finally...")
End Try 
```

您将如何使用“On Error Goto”结构编写此代码？（请不要问我为什么要这样做，只是好奇是否可以这样做）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:01:07.167

干得好：

```
 On Error Goto ErrHandler
    Debug.Print("Trying...")

    Goto Finish

    ErrHandler:
      Debug.Print("Exception...")
      On Error Goto ErrHandler2
      Debug.Print("Throwing another error, I guess...")

      Goto Finish2

      ErrHandler2:
      Debug.Print("Exception 2...")

      Finish2:
      Debug.Print("Finally 2...")

    Finish:
    Debug.Print("Finally...") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:58:35.970

没有意见...

```
Public Sub PleaseDontMakeMeDoThis()
    On Error Goto ExceptionHandler
    Debug.Print("Trying...")
    Debug.Print("Finally...")
    Exit Sub
ExceptionHandler:
    Debug.Print("Exception...")
    Resume Next
End Sub 
```

唯一的区别是，如果在 try/catch 中，在 catch 中抛出了异常，那么 finally 仍然会被处理。我不确定你如何让它也处理它。我想你可以这样做：

```
Public Sub PleaseDontMakeMeDoThis()
    On Error Resume Next
    Debug.Print("Trying...")
    If Err.Number <> 0 Then
        On Error GoTo PseudoFinally
        Debug.Print("Exception...")
    End If
PseudoFinally:
    Debug.Print("Finally...")
End Sub 
```

但在这种情况下，它只是在“catch 块”中吃掉异常，而不是让调用代码处理它。简而言之，我认为无论如何都不能完全模仿 try/catch。如果有的话，微软就不需要替换 VB 的错误处理了 :)

# iphone - 即使应用程序终止，如何不断接收 CoreLocation 更新

> ID：11041185
> 
> 赞同：1
> 
> 时间：2012-06-14T20:53:58.760
> 
> 标签：iphone, ios, gps, core-location

我们正在尝试使用 CoreLocation（企业应用程序，因此用户体验和电池使用不是问题）不断跟踪用户的位置。

当应用程序在后台使用带有 startUpdatingLocation 的 CLLocation 和 Info.plist 中的“位置”键用于后台任务时，我们得到了很好的结果。

然而，在测试中，似乎几个小时后应用程序被终止并且我们停止获取更新。

我们尝试在 applicationWillTerminate 中调用 startMonitoringSignificantLocationChanges，希望在应用程序终止时仍能正常工作，但这似乎不起作用。

基本上我们想要一种方法来不断地让应用程序接收 startUpdatingLocation 更新，而不是让它在后台被杀死。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:17:54.033

我正在开发一个与您的要求相同的应用程序。我已经用仪器和内存监视器模块进行了一些测试，实际上并没有像你这样长时间运行（我只测试了该应用程序 30 分钟），但我注意到它经常进入后台模式而不会被暂停。请注意，仅当 UIBackgroundMode 设置为“位置”或其他允许值之一并且已调用 startUpdatingLocation 时，它才不会暂停。

操作系统通常会以最近最少使用的顺序自动关闭处于挂起状态的应用程序，但由于这种配置，您的应用程序不应关闭。我可以映像被操作系统关闭的唯一原因是它是否处于非常低的内存条件并且它没有其他释放内存的可能性，或者如果您的应用程序当然已经崩溃。请[在此处查看我的帖子](https://stackoverflow.com/questions/12706416/use-of-standard-location-service-for-tracking-traveled-distance-in-a-foreground)。您的问题已经 4 个月大了，您找到问题了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T02:33:03.937

您需要通过此调用注册重大位置更改：`startMonitoringSignificantLocationChanges`. 正如文档中所写：“如果您让此服务运行并且您的应用程序随后被暂停或终止，则该服务会在新的位置数据到达时自动唤醒您的应用程序。”
如果后台执行代码就够了，注册regionChangeMonitoring。再次来自文档：“始终跟踪与您的应用程序关联的区域，包括您的应用程序未运行时。如果在应用程序未运行时跨越区域边界，则该应用程序将重新启动到后台以处理事件。 "

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:42:29.423

简短的回答是，如果 iOS 需要内存，并且您的应用程序在后台，则无法阻止它终止您的应用程序。

也就是说，您确定您的应用程序真的被杀死了吗？过去关于应用程序在后台时的位置行为的线程主要集中在为什么应用程序*不会*死掉（或者至少为什么位置服务更新继续超过开发人员认为他或她已经停止它们的点）。就我个人而言，我还没有看到很多单独的应用程序在后台被杀死的情况，所以我有点惊讶你的死机如此可靠。您是否检查过您的应用程序是否存在内存泄漏？我想知道你是不是把自己从内存中泄露了出来。

# javascript - 警告 Li 组的相同值

> ID：11041186
> 
> 赞同：1
> 
> 时间：2012-06-14T20:54:02.487
> 
> 标签：javascript, jquery, html, math

我有一个类似的清单

```
<ul>
<li>hello</li>
<li>hai</li>
<li>hai</li>
<li>hello</li>
<li>hai</li>
<li>hello</li>
<li>hai</li>
<li>hello</li>
<li>hai</li>
<li>hello</li>
<li>hai</li>
 ....
</ul> 
```

我必须在 jquery 中将这些 li 按 4 分组。

如果用户单击 1 到 4 之间的任何 li。我需要警报 0；如果用户单击 5 到 8 之间的任何 li。我需要警报 4；如果用户单击 9 到 12 之间的任何 li。我需要警报 8；继续

请帮我。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:06:46.680

```
$('li').click(function() {
    console.log( Math.floor($(this).index() / 4)*4);
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/5mjPq/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:17:22.647

这绝对是关于数学的。这就是我想出的。 [http://jsfiddle.net/dm9yZ/](http://jsfiddle.net/dm9yZ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:11:49.370

获得点击的*li*的索引后，

```
((index - 1) / 4) * 4 
```

*应该给出你想要的值。例如`((6-1)/4)*4=4`*

# .net - 内部网络上的 WCF 端点安全最佳实践

> ID：11041188
> 
> 赞同：1
> 
> 时间：2012-06-14T20:54:04.847
> 
> 标签：.net, wcf, security, .net-4.0

在我们的组织中，我们托管了许多 WCF 服务，这些服务在我们的内部网络上相互通信。通常，我们为这些服务使用 netTcpBinding 以提高性能。目前关于是否在绑定端点上启用安全性存在争议，我想了解是否有任何特定的指导方针可用于确定是否/何时禁用安全性是合适的。

我倾向于保持安全，因为

1.  这是默认设置，因此需要较少的配置即可使用
2.  它是默认设置，因此它的目的是经常使用
3.  它只是“感觉”更安全而不是更安全

争论的另一面是：

1.  假设网络本身是安全的，没有理由使用安全性
2.  使用安全性会降低性能
3.  有时，如果客户端有自己的客户端对其进行身份验证，则对服务的身份验证可能会更加棘手（我认为这可能被描述为“双跳”场景）

我想无论最佳实践是什么，最终的答案最终都是“视情况而定”。但是我想知道在生产环境中应该使用哪种方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:54:23.547

它尚未被提及，但我也倾向于考虑您正在传递什么样的数据。如果我们谈论的是银行交易或一些重要的事情，我会选择尽可能多的安全性。另一方面，如果只是某些桌面应用程序中显示的数据而不是帐号、社会保险号、信用卡信息等，那么我认为禁用它没有问题。

另外，性能目前是一个问题吗？如果您必须满足 SLA 的定义和交易时间，那么禁用安全性可能是一件好事。

它是如此可配置，因为有很多事情要考虑:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:57:07.267

听起来好像您已经在没有安全性的情况下运行服务。很明显，有人决定采用您当前的配置。我倾向于非常依赖“如果它没有损坏就不要修复它”原则，因此在您的场景中更改许多 WCF 服务的配置需要说明为什么需要的时间和精力应该投资这样做。坦率地说，在您的情况下，您为安全而提出的三点对我来说并不适用。

这与做出新开发或新环境的决定完全不同。在这种情况下，默认的“Security On”（假设工作量、成本和性能影响最小）将是我的首选选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T23:41:35.657

你是对的——“这取决于”。

安全性是一件好事，但如果您*不需要*它（即您在安全环境中工作，不需要身份验证），那么它可能会产生很大的开销。

我最近在一个项目中工作，我们发现 Windows 身份验证导致了巨大的开销，请求大小增加了一倍或三倍（大量微小的请求）。我们只是关闭了身份验证以显着提高性能。

WCF 的好处是安全性是完全可配置的。假设您的代码中没有任何安全依赖项，您可以在以后根据需要通过配置轻松地打开和关闭它。还假设您正在使用配置！

# c++ - 堆调试：在 MS VC++ 2005 中的 dbgdel 中断言失败

> ID：11041189
> 
> 赞同：0
> 
> 时间：2012-06-14T20:54:05.517
> 
> 标签：c++, memory, memory-management, memory-leaks, visual-studio-2005

我在我的 MS VC++ 2005 项目中启用了堆调试，当程序退出最后一个析构函数时，我在那里调用了 _CrtDumpMemoryLeaks()（也启用了 _CRTDBG_MAP_ALLOC。但后来我看到了以下调试断言屏幕：

![在此处输入图像描述](../Images/7c76a9689ce6dab04c552f02c3152162.png)

之后我点击 Retry 来调试它，它把我带到一些代码（这不是我的），我在其中看到如下内容：

```
char* name;
cstub.get("...", name);
delete [] name; 
```

我在想，也许名称是在 get(..) 函数中分配的；无论如何，我的问题是：从屏幕截图来看，这是一个内存/堆错误吗？我可能不得不深入研究 cstub 的 get 函数在做什么。感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:20:40.250

您可能正在混合运行时。

如果分配器位于使用不同版本的 Visual Studio 编译的 DLL 中，则无法从代码中释放内存。

这就是为什么返回分配内存的库还包含释放该内存的函数或方法。

# python - 独特的 SHA-1 摘要生成

> ID：11041193
> 
> 赞同：2
> 
> 时间：2012-06-14T20:54:17.543
> 
> 标签：python, sha

在 Python 中，我创建了 3 个对象，每个对象都有一个唯一标识符。

我在所有这些对象中生成这个唯一标识符的方式如下：

```
class Foo(object):
    def __init__(self):
        unique_id = hashlib.sha1(str(time.time())).hexdigest() 
```

我像这样一个接一个地创建这些对象：

```
a = Foo()
b = Foo()
c = Foo() 
```

所有这些实例最终都具有相同的结果，`unique_id`因为它们的创建之间没有足够的时间间隔。

我已经求助于在对象创建之间放置一个`sleep(0.1)`，但我确信有更优雅的方法来解决这个问题。

建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T20:56:46.453

Python 对象已经有一个唯一标识符，即它们的`id`. 不过，这只有在对象存在时才是唯一的；删除对象后`id`可以重用。

您还可以使用[`uuid`](http://docs.python.org/library/uuid.html)标准库中的模块，或者只在类中保留一个计数器：

```
class Foo(object):
    __COUNT = 0
    # or: __COUNT = random.randint(0, 2**N - 1)

    def __init__(self):
        self.unique_id = self.__COUNT  # or take the SHA1 of the count
        type(self).__COUNT += 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T21:06:05.057

您至少有两种方法可以创建唯一标识符：

1.  使用增量值（通常是整数）来生成唯一键
2.  使用例如。UUID（通用唯一标识符）

## 增量标识符

第一个选择很明显：无论是在数据库层还是在应用程序层，都需要存储最后生成的标识符的信息，这样就可以通过递增来生成另一个标识符。

示例解决方案在这里：

```
>>> class Incremental(object):
    _last_id = 0
    def __init__(self):
        Incremental._last_id += 1
        self.id = Incremental._last_id

>>> class MyClass(Incremental):
    def __repr__(self):
        return 'MyClass with id=%s' % self.id

>>> a = MyClass()
>>> b = MyClass()
>>> c = MyClass()
>>> a, b, c
(MyClass with id=1, MyClass with id=2, MyClass with id=3) 
```

虽然看看其他人提出的建议 - 他们的建议可能更适合增量 ID。

## 通用唯一标识符

第二种选择只是使用适当的工具来完成适当的任务：UUID 专门设计用于为您提供唯一标识符。

有一个名为[UUID](http://docs.python.org/library/uuid.html)的模块与标准 Python 安装捆绑在一起，您可以使用它：

```
>>> import uuid
>>> str(uuid.uuid1())
'0baa65ea-b665-11e1-b721-b80305056d6a' 
```

## 将它们翻译成哈希

如果您愿意，可以将这两个值转换为 SHA-1 哈希：

```
>>> import hashlib
>>> hashlib.sha1(str(1)).hexdigest()
'356a192b7913b04c54574d18c28d46e6395428ab'
>>> hashlib.sha1('0baa65ea-b665-11e1-b721-b80305056d6a').hexdigest()
'46bd64c5f4a81b90539d7302d030e01378ef6d6e' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T20:57:16.310

第一个加 1，第二个加 2 怎么样？

我不太了解python来修复它，但我的想法是写

```
a = Foo(0)
b = Foo(1)
c = Foo(2) 
```

并让班级计算

```
unique_id = hashlib.sha1(str(time.time()+offset)).hexdigest() 
```

# c# - 具有重复字段的 MVC3 模型

> ID：11041200
> 
> 赞同：1
> 
> 时间：2012-06-14T20:55:06.857
> 
> 标签：c#, asp.net, asp.net-mvc-3

您如何处理在 MVC3 中具有重复字段的模型的强类型视图？我想使用标准的 MVC3 验证方法并使用 HTML 辅助方法来生成输入，但不得不依靠手动编码 HTML 中的输入并在控制器方法中使用 FormCollection 作为参数。

视图中 email[] 字段的表示基本上是重复的文本输入（用户可以单击按钮添加新字段）。对于现有的电子邮件（更新视图），它需要传递 id 和地址字符串。我有这个工作，但感觉完全不对。

```
public class Email
{
    public int EmailId
    public string EmailAddress
}

public class Person
{
    public int PersonId;
    [Required(ErrorMessage = "First name is required")]
    public string FirstName;
    [Required(ErrorMessage = "Last name is required")]
    public string LastName;

    // how to handle this?
    public Email[] EmailAddresses;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:12:33.790

这可能是一篇很长的文章，如何实现这一点。但是有几个博客讨论了如何做到这一点：

[http://blog.codeville.net/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.codeville.net/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

和

[http://zahidadeel.blogspot.com/2011/05/master-detail-form-in-aspnet-mvc-3-i.html](http://zahidadeel.blogspot.com/2011/05/master-detail-form-in-aspnet-mvc-3-i.html)

高温高压

# javascript - HTML在文本（输入）字段中显示结果？

> ID：11041201
> 
> 赞同：5
> 
> 时间：2012-06-14T20:55:09.150
> 
> 标签：javascript, html

我有一个简单的 HTML 表单，带有 3 个输入字段，当您点击 = 按钮时，它假设添加您在前 2 个输入字段中键入的 2 个数字并在第 3 个字段中显示结果。有可能这样做吗？（我需要一个框（或表格）或一些东西而不是纯文本）。我尝试以下但不起作用（它什么都不做），有人可以帮助我吗？

```
<HTML>
      <HEAD>
        <TITLE>Sum</TITLE>

        <script type="text/javascript">
          function sum()
          {
             var num1 = document.myform.number1.value;
             var num2 = document.myform.number2.value;
             var sum = parseInt(num1) + parseInt(num2);
             document.getElementById('add').innerHTML = sum;
          }
        </script>
      </HEAD>

      <BODY>
        <FORM NAME="myform">
          <INPUT TYPE="text" NAME="number1" VALUE=""> + 
          <INPUT TYPE="text" NAME="number2" VALUE="">
          <INPUT TYPE="button" NAME="button" Value="=" onClick="sum()">
          <INPUT TYPE="text" ID="add" NAME="result" VALUE="">
        </FORM>

      </BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T20:56:49.650

`innerHTML`设置元素内的文本（包括 html 元素）。通常我们将它用于 div、span 等元素，以在其中插入其他 html 元素。

对于您的情况，您想要设置输入元素的值。所以你应该使用该`value`属性。

更改`innerHTML`为`value`

```
document.getElementById('add').value = sum; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T21:11:05.583

```
 <HTML>
      <HEAD>
        <TITLE>Sum</TITLE>

        <script type="text/javascript">
          function sum()
          {

             var num1 = document.myform.number1.value;
             var num2 = document.myform.number2.value;
             var sum = parseInt(num1) + parseInt(num2);
             document.getElementById('add').value = sum;
          }
        </script>
      </HEAD>

      <BODY>
        <FORM NAME="myform">
          <INPUT TYPE="text" NAME="number1" VALUE=""/> + 
          <INPUT TYPE="text" NAME="number2" VALUE=""/>
          <INPUT TYPE="button" NAME="button" Value="=" onClick="sum()"/>
          <INPUT TYPE="text" ID="add" NAME="result" VALUE=""/>
        </FORM>

      </BODY>
</HTML> 
```

这应该可以正常工作。1.设置第3个字段（输入字段）时使用.value而不是“innerHTML” 2.关闭输入标签

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T21:02:25.063

您真的希望结果出现在输入框中吗？如果不是，请考虑将边框设置为透明以外的表格并使用

document.getElementById('sum').innerHTML = sum;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-24T05:51:07.720

# 带有 .value 和 INPUT 标签

```
<HTML>
  <HEAD>
    <TITLE>Sum</TITLE>

    <script type="text/javascript">
      function sum()
      {

         var num1 = document.myform.number1.value;
         var num2 = document.myform.number2.value;
         var sum = parseInt(num1) + parseInt(num2);
         document.getElementById('add').value = sum;
      }
    </script>
  </HEAD>

  <BODY>
    <FORM NAME="myform">
      <INPUT TYPE="text" NAME="number1" VALUE=""/> + 
      <INPUT TYPE="text" NAME="number2" VALUE=""/>
      <INPUT TYPE="button" NAME="button" Value="=" onClick="sum()"/>
      <INPUT TYPE="text" ID="add" NAME="result" VALUE=""/>
    </FORM>

  </BODY>
</HTML> 
```

# 使用 innerHTML 和 DIV

```
<HTML>
  <HEAD>
    <TITLE>Sum</TITLE>

    <script type="text/javascript">
      function sum()
      {

         var num1 = document.myform.number1.value;
         var num2 = document.myform.number2.value;
         var sum = parseInt(num1) + parseInt(num2);
         document.getElementById('add').innerHTML = sum;
      }
    </script>
  </HEAD>

  <BODY>
    <FORM NAME="myform">
      <INPUT TYPE="text" NAME="number1" VALUE=""/> + 
      <INPUT TYPE="text" NAME="number2" VALUE=""/>
      <INPUT TYPE="button" NAME="button" Value="=" onClick="sum()"/>
      <DIV  ID="add"></DIV>
    </FORM>

  </BODY>
</HTML> 
```

# objective-c - 在带有ARC的Objective-C中，我们通常只需要指定非原子作为属性属性是真的吗？

> ID：11041207
> 
> 赞同：8
> 
> 时间：2012-06-14T20:55:35.407
> 
> 标签：objective-c, automatic-ref-counting

奇怪的是，在 Big Nerd Ranch iOS 5 book (p.73) 和 Programming iOS 5 book (O'Reilly, p.314) **(updadte: even Kochan's Objective-C book Fourth edition)**中，在 ARC 的上下文中，他们说 properties 属性的默认值是`assign`... 但是[Apple 的文档](https://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)说默认值是`strong`.

我还尝试了一个简单的程序，如果我不指定`strong`，程序可以正常工作，如果我指定`strong`，它的工作方式相同，而当`assign`使用时，编译器会显示警告，所以看起来默认确实是`strong`.

所以如果大多数时候，我们想要

```
@property (nonatomic, readwrite, strong) NSMutableArray *foo; 
```

然后我们可以写

```
@property (nonatomic) NSMutableArray *foo; 
```

因为其他两个 (`readwrite`和`strong`) 是默认值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T21:10:16.653

readwrite 和 strong，确实是 ARC* 下的默认值。在手动引用计数下，assign 是（是）默认值。我更喜欢明确指定这些，因为它更清楚@property 的参数是什么，而不是依赖阅读代码的人知道默认值是什么。

*strong 是默认值，假设您让编译器为您合成一个实例变量，或者声明了一个没有显式所有权限定符的实例变量（在这种情况下，ivar`__strong`无论如何都是默认的）。否则，默认属性所有权类型与 ivar 声明中的所有权限定符匹配。因此，如果您使用 显式声明 ivar `__weak`，然后为其声明 @property 而没有所有权限定符，则合成属性将很弱。这一切都记录在[Clang ARC 文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-14T21:05:54.043

默认情况下，对象属性是`strong, atomic, readwrite`. 请参阅 [https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html)

# eclipse - “关闭项目”装饰器在 Eclipse 重新启动之前不会更新（仅限 Windows）

> ID：11041208
> 
> 赞同：0
> 
> 时间：2012-06-14T20:55:42.440
> 
> 标签：eclipse, project, pydev, decorator

在 pydev 包资源管理器（Eclipse Indigo）中，当我右键单击并选择“关闭项目”时，图标不显示关闭的装饰器。只有当我重新启动 Eclipse 时，它​​才会正确刷新并显示一个封闭的装饰器（纯蓝色文件夹）。

这只发生在 Windows 上。在我的 Mac 上，关闭项目正常工作。

这只是一般的错误报告——显然我并没有为此失眠！

版本：Indigo Service Release 1 内部版本 ID：20110916-0149

Pydev 2.3.0.20111221518

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:30:59.563

这应该已经在最新的夜间版本中修复了:)

# ios - iOS UIStepper 无法正常运行

> ID：11041221
> 
> 赞同：-1
> 
> 时间：2012-06-14T20:56:42.350
> 
> 标签：ios, ipad, uistepper

一些简单的代码：

```
- (IBAction)Up_Down:(UIStepper *)sender {
     double value = [sender value];
     [NumDayLabel setText:[NSString stringWithFormat:@"%d", (int)value]];
} 
```

它*部分*有效。

我从五点开始。如果我按 +，则不会发生任何事情。如果我再按一次+，它会变成6。然后每按一次+，它就会继续上升1。现在，如果我按 + 直到达到 9，然后我按减，它变为 10。然后我再次按减，它变为 9，然后只要我继续按减，就会继续向下。如果我把它降到 3，然后按 +，它会变成 2，然后只要我一直按 +，它就会开始上升。希望你明白这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:52:33.300

由于您始终是其背后的一个值，因此听起来您可能已经为`UIControlEventTouchUpInside`. 它在步进值更改之前触发。UIStepper 的正确事件是`UIControlEventValueChanged`.

# jquery - 无法使用 Backbone 和 jQuery Mobile 和 Sender 数据动态绑定点击处理程序

> ID：11041227
> 
> 赞同：0
> 
> 时间：2012-06-14T20:57:01.490
> 
> 标签：jquery, jquery-mobile, backbone.js

我在这里学习教程：http: [//blog.chariotsolutions.com/2012/01/from-list-to-details-view-using.html](http://blog.chariotsolutions.com/2012/01/from-list-to-details-view-using.html)

我正在尝试在呈现时将单击处理程序动态绑定到列表视图项。上面链接中描述的方法不起作用。我已经尝试了几种选择..

本教程在渲染函数中建议了这一点：（模板如下）

```
 activities.each(function(activity){
        var renderedItem = template(activity.toJSON()),
        $renderedItem = $(renderedItem);  //convert the html into an jQuery object
        $renderedItem.jqmData('activityId', activity.get('id'));  //set the data on it for use in the click event
        $renderedItem.bind('click', function(){
           //This part is different in tutorial, but irrelevant
           alert("Hello.");
           alert($(this).jqmData('activityId'));    //'this' represents the element being clicked
        });
        listView.append($renderedItem);
    }); 
```

这不起作用。创建了按钮，但是当我单击时没有任何反应，并且 Chrome 的开发工具仅显示两个单击事件侦听器：文档和文档

我试过这些作为替代品，但没有任何效果。没有警报消息，没有断点命中，没有注册的点击事件监听器。...

```
$renderedItem.on('click', function(){
       alert("Hello.");
       alert($(this).jqmData('activityId'));     //'this' represents the element being clicked
   });

$renderedItem.live('click', function(){
       alert("Hello.");
       alert($(this).jqmData('activityId'));     //'this' represents the element being clicked
   }); 
```

我也尝试过注册事件的标准主干方式无济于事......

```
events: {
    'click .activity-list-item':'btnSelected'
},

...

btnSelected: function(){
    alert("Hello");
    //This is what I really want. Some data attached to the sender
    alert($(this).jqmData('activityId'));
} 
```

这是模板：

```
<li><a href="#activity-details" class="activity-list-item"identifier="<%= id %>"><%= date %> - <%= type %></a></li> 
```

女士们，先生们，谢谢你们的宝贵时间。

编辑：我做了一个测试，我认为，出于某种原因，绑定被删除了。我可以做这个：

```
 myCollection.at(0).bind('click', function(){
        alert("hello");
    });
    myCollection.at(0).trigger('click'); 
```

......它可以正常工作。绑定可能会被删除是否有原因？

编辑2：这仍然没有解决。不幸的是，我的临时解决方案就是这样。我可以删除所有列表视图项目、重新填充和刷新，并且仍然具有可点击性，但如果我将项目附加到列表中，它们将不可点击。.bind、.on、.live、.delegate。它们都不起作用。我真的希望有更多关于此的文档。这是一个常见的编程问题，没有通用的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:20:17.620

看起来 jquerymobile 可能正在拦截和取消绑定您的事件绑定。这仍然只是一个猜测，因为我现在没有设置测试 JQM 应用程序，但看起来有一个[设置](http://jquerymobile.com/test/docs/api/globalconfig.html)可以关闭 jqm 对链接的事件绑定的默认控制，`linkBindingEnabled`.

你可以这样设置：

```
$(document).bind("mobileinit", function () {
  $.mobile.linkBindingEnabled = false;
}); 
```

试试看，看看它是否能把你带到任何地方......如果没有，回到绘图板:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:37:27.407

看来我的问题源于多次调用渲染方法。我有这个：

```
 //in the render method
    $(this.el).empty(); 
```

它用于清除列表视图并重绘新修改的集合。当一个项目被添加到集合中时，我正在调用 render 方法来清除所有项目并重新绘制它们。

这显然是从我的观点中删除事件处理程序。这似乎违反直觉。第一次能用，为什么不能再用？jQuery .empty() 文档：

```
 "To avoid memory leaks, jQuery removes other constructs such as data and 
    event handlers from the child elements before removing the elements 
    themselves." 
```

为了解决这个问题，我在空之前添加了一个分离：

```
 $(this.el).detach();
   $(this.el).empty(); 
```

由于我的新手，我不确定这是否是一个好习惯，但它有效，如果我正确理解这一点，我会在清除它们之前将事件侦听器从项目中分离出来。从而为未来的列表项保留听众。

本质上，在视图本身上调用 .empty() 方法 $(this.el) 似乎删除了使用我的渲染函数中的方法添加更多事件处理程序的能力。我的猜测是在执行 .empty() 之后还有另一种添加事件处理程序的方法。如果有人可以确认或纠正我，我会很高兴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:25:39.147

稍后在您的代码中您的 listView var 会发生什么？更具体地说，listView 元素是如何附加到 DOM 的？如果在将 listView.html() 添加到 DOM 时使用它，所有子元素都会丢失附加到它们的数据和事件。

# oracle - 重命名表列对解释/执行计划的影响

> ID：11041228
> 
> 赞同：2
> 
> 时间：2012-06-14T20:57:02.583
> 
> 标签：oracle, oracle11g, explain, sql-execution-plan

我有一个包含 300 多列和数十万条记录的表。我需要重命名现有列之一。

有什么我需要担心的吗？此操作是否会对解释计划等产生影响？

笔记：

1.  我正在开发 Oracle 11g 上的实时生产数据库。

2.  此列当前未使用。它没有为任何行填充，我 100% 确定没有任何现有查询引用此列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:12:31.347

如果“在实时生产数据库上工作”意味着您将在人们工作时尝试在较低环境中进行测试而不进行测试，那么我强烈反对该计划。

涉及您正在对其执行 DDL 的表的现有查询计划将失效，因此这些查询将需要再次进行硬解析。如果有大量此类查询，这很容易成为一项昂贵的操作。某些查询计划当然可能会因为其他内容发生更改而更改（即统计信息不同，设置不同，绑定变量不同等）。它们不会因为列名更改而更改，但列名更改可能导致计划改变。

显然，您正在执行的任何查询都需要在重命名列后立即使用新名称。这通常意味着您需要在修改代码（包括存储过程）以及列名时进行协调发布。反过来，这通常意味着您将其作为构建的一部分进行，其中至少包含一些停机时间。如果您拥有企业版，您可能可以在不停机的情况下进行基于版本的重新定义，但这会增加流程的复杂性，并且您绝对需要在产品中实施之前彻底测试。

# box-api - 在 Mac 中获取 Box 文件夹的位置

> ID：11041229
> 
> 赞同：0
> 
> 时间：2012-06-14T20:57:09.433
> 
> 标签：box-api

所以我正在构建一个应用程序，它需要知道`Box`用户 Mac 上文件夹的位置——不仅是在默认情况下`/Users/{user}/Box Documents folder`，而且在他们可能已经移动它的任何地方。

此位置是否存储在文件或某个环境变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T02:58:13.130

这绝不是官方支持的解决方案，但我设法在

```
{user}/Library/Application Support/Box Sync/LastLoggedInUserInfo.xml 
```

# javascript - 在 node-mysql 中选择 WHERE

> ID：11041231
> 
> 赞同：8
> 
> 时间：2012-06-14T20:57:11.537
> 
> 标签：javascript, node.js, node-mysql

有谁知道如何`SELECT WHERE IN`在 node-mysql 中使用？

我尝试了下面的代码，但收到以下错误消息：

```
'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''(`PHP`,`apache`)'' at line 1' 
```

这是我的代码：

```
whereIn = '(';
for ( var i in tagArray ) {
    if ( i != tagArray.length - 1 ) {
        whereIn += "`" + tagArray[i] + "`,";    
    }else{
        whereIn += "`" + tagArray[i] + "`"; 
    }
}
whereIn += ')';

console.log(whereIn);

client.query(
    'SELECT tag_id FROM tag WHERE tag_name IN ?',
    [whereIn],
    function(err, result, fields) {
        client.destroy();

        if (err) {
            throw err;
        }

        console.log(result);

        res.redirect('/');
    }
); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-03-06T09:21:35.670

You have to use `IN (?)` and NOT `IN ?`.

Any string manipulation may result in a SQL INJECTION backdoor.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-30T13:03:06.147

您只需将`tagArray`值传递给 node-mysql ，它将为您处理其余的：

```
client.query(
    'SELECT tag_id FROM tag WHERE tag_name IN (?)',
    [tagArray],
    function(err, result, fields) {
        client.destroy();

        if (err) {
            throw err;
        }

        console.log(result);

        res.redirect('/');
    }
); 
```

有关更多信息，请参阅手册中有关如何自动转义不同值的部分：[https ://github.com/mysqljs/mysql#escaping-query-values](https://github.com/mysqljs/mysql#escaping-query-values)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T21:02:11.533

您需要引用您的字符串，而不是使用反引号。

```
whereIn = '(';
for ( var i in tagArray ) {
    if ( i != tagArray.length - 1 ) {
        whereIn += "'" + tagArray[i] + "',";    
    }else{
        whereIn += "'" + tagArray[i] + "'"; 
    }
 }
whereIn += ')'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-15T13:47:02.837

对于避免转义值的更安全的解决方案，请使用 ? 像您通常那样做的参数，但是像这样动态地创建参数占位符：

```
var inlist = '';
for(var i=0; i<ids.length; i++) {
  inlist += '?,';
}
inlist = inlist.substring(0,inlist.length-1);

var sql = 'SELECT a, b, c FROM mytable WHERE id in (' + inlist + ')';

conn.query( sql, ids, function(err, rows) {
  . . .
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-25T21:39:34.027

万一有人在 2021 年寻找答案。

```
 client.query(
      'SELECT tag_id FROM tag WHERE tag_name IN (?)', 
       [['val1', 'val2']],
       function(err, result, fields) {
    client.destroy();

    if (err) {
        throw err;
    }

    console.log(result);

    res.redirect('/');
} 
```

);

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-10-25T13:50:18.907

一个可行的解决方案：

```
client.query(
    'SELECT tag_id FROM tag WHERE tag_name IN ?',
    [tagArray],
    function(err, result, fields) {
        client.destroy();

        if (err) {
            throw err;
        }

        console.log(result);

        res.redirect('/');
    }
); 
```

无需手动将 tagArray 括在引号中。它被 mysql 模块转义。

# c++ - 如何防止其他人在堆上创建类的新实例？

> ID：11041239
> 
> 赞同：1
> 
> 时间：2012-06-14T20:57:44.530
> 
> 标签：c++, inheritance

> **可能重复：**
> [如何防止通过“新”运算符分配类？（我想确保我的 RAII 类始终分配在堆栈上。）](https://stackoverflow.com/questions/124856/how-do-i-prevent-a-class-from-being-allocated-via-the-new-operator-id-like)

假设我在库中定义了一个类

```
class Base {}; 
```

我将课程发布给用户。

一个用户定义了一个新类

```
class Derived : public Base {} 
```

问题我可以做些什么`Base`来防止用户`Derived`在堆上创建一个实例？

例如，这是允许的

```
Derived dd; 
```

这不是

```
Derived* dd = new Derived(); 
```

谢谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T21:05:28.083

我认为你能做的最好的事情就是`private` `operator new`在你的基类中声明一个（我不记得是否需要这样做，但你可能想要同时做这三个：正常、数组和放置）。用户仍然可以通过在 Derived 类中创建自己的来解决这个问题，`operator new`但至少他们必须考虑它并积极努力颠覆你的意图。

如果您担心在堆上创建类时会出现非意外问题（例如子类的恶意开发人员），C++ 不是该项目的语言。它功能强大，并且有很多地方您必须依靠您的最终程序员而不是绕过意图。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T21:04:11.533

您`operator new`在基类中设为私有。

```
class Base {
    void* operator new(size_t);
};
class Derived : public Base {
}

//...

Base* p = new Derived; //ERROR
Derived d;             //OK 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:29:50.223

除了将`new`操作员设为私有之外`Base`，您还可以提醒用户`Base`其意图`Base`是什么。这样，使用的开发人员`Base`不能声称没有记录意图。

```
class Base
{
    void * operator new (size_t) {}
    void * operator new[] (size_t) {}
    void * operator new (size_t, void *) {}
protected:
    struct I_promise_not_to_dynamically_allocate_Base {};
    Base (I_promise_not_to_dynamically_allocate_Base) {}
    virtual ~Base () {}
    //...
}; 
```

现在，当开发人员使用 时`Base`，他们被迫传入参数：

```
class Derived : public Base
{
public:
    Derived () : Base(I_promise_not_to_dynamically_allocate_Base()) {}
    //...
}; 
```

如前所述，没有什么能阻止开发人员`new`和`delete`他们自己重载，但那样他们就会违背承诺！

# c# - 在 IronPython 中访问 C# 类成员

> ID：11041244
> 
> 赞同：8
> 
> 时间：2012-06-14T20:58:04.843
> 
> 标签：c#, ironpython

在我的 C# 代码中，我有一个类，它存储了一些我希望在列表中传递给我的 python 代码的数据。但是，当我尝试在我的 python 代码中访问该类的属性时，我得到`MissingMemberException`. 这里有一些示例代码来说明我的意思：

C＃：

```
class Event
{
public int EventId { get; set; }
public string EventName { get; set; }
} 

//other processing here...

//this just fills the list with event objects
List<Event> eventList = GetEvents(); 

//this sets a variable in the ScriptScope 
PythonEngine.SetVariable( "events", eventList);

PythonEngine.Execute("eventParser.py"); 
```

事件解析器.py：

```
for e in events:
    print e.EventId, " / ", e.EventName 
```

`MissingMemberException`说“事件不包含名为 EventId 的成员”

我已经测试过将其他类型传递给 python，包括原始类型列表，例如`List< int >`and`List< string >`并且它们工作正常。

那么如何在我的 python 脚本中`EventId`访问这些类属性呢？`EventName`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-14T21:01:15.687

尝试`Event`公开课程。问题可能是尽管*属性*是公共的，但*类型*是`internal`默认的，因此动态类型不会“看到”任何仅由该类型声明的成员。

这只是一个猜测，如果有错误，请说，以便我可以删除答案，以免将来混淆任何人。不过，通过在 C# 中的另一个程序集中动态键入，在一个程序集中使用匿名类型确实可以获得相同的效果。

# sas - 使用 PRXPARSE 和 PRXSUBSTR 提取字符串片段

> ID：11041247
> 
> 赞同：3
> 
> 时间：2012-06-14T20:58:19.833
> 
> 标签：sas

使用 SAS 9.3 我想提取“。”之间的每个字符串的部分。（点）和点后的'"'（双引号）。例如下面第一行的结果应该是 f2015_cnt_cont_line

```
 <characteristic abc="[2015].f2015_cnt_cont_line" xxxxxxxx="8129" />
      <characteristic abc="[2015].f2015_dbt_cont_line" xxxxxxxx="8134" />
      <characteristic abc="[2015].f2015_ctl_tot_acct_bal" xxxxxxxx="8133" />
      <characteristic abc="[2015].f2015_cnt_comb_line" xxxxxxxx="8118" />
      <characteristic abc="[2015].f2015_dbt_comb_line" xxxxxxxx="8138" /> 
```

有人有我可以使用的例子吗？

谢谢丹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T23:07:16.367

与您的模式匹配的正则表达式是`\.(.*?)\"`. 这意味着：找到一个点（一个特殊字符；然后是任何字符（? 使它不“贪婪”，因此它捕获尽可能少的字符）；然后是引号。

使用SAS 文档中的[这个例子](http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a002601903.htm)，这样的事情应该可以工作：

```
data test;
   set _your_data_set;
   retain re;
   if _N_ = 1 then re = prxparse('/\.(.*?)\"/');
   if prxmatch(re, var) then result = prxposn(re, 1, var);
run; 
```

（这假设您的数据位于名为 的变量中`var`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T21:57:26.657

除了使用 PRX 函数，类似以下的内容可能就足够了：

```
text=scan(scan(line,2,"."),1,'"'); 
```

这假定文本存储在名为 line 的变量中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T21:53:01.913

这是一种方法：

```
inner = SCAN(SUBSTR(line,INDEX(line,'.')+1),1,'"'); 
```

内部 SUBSTR 函数跳到第一个点之后的列；外部 SCAN 函数返回由双引号分隔的第一个单词。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-04T18:34:25.600

这对我行得通

```
SUBSTR(
t1.field, 
index(t1.field,'.')+1,
(index(t1.field,'"')-index(t1.field,'.')-1)
) 
```

# hadoop - 为嵌入 Java webapp 的客户端设置 hadoop 系统用户

> ID：11041253
> 
> 赞同：30
> 
> 时间：2012-06-14T20:59:13.250
> 
> 标签：hadoop, cluster-computing

我想将 Java Web 应用程序中的 MapReduce 作业提交到远程 Hadoop 集群，但无法指定应为哪个用户提交作业。我想配置和使用应该用于所有 MapReduce 作业的系统用户。

目前，我无法指定任何用户，无论 hadoop 作业在客户端系统当前登录用户的用户名下运行什么。这会导致消息出错

```
Permission denied: user=alice, access=WRITE, inode="staging":hduser:supergroup:rwxr-xr-x 
```

...其中“爱丽丝”是客户端计算机上的本地登录用户。

我试过了

1.  创建实例的各种组合`UserGroupInformation`（代理和普通用户）和
2.  使用 设置 Java System 属性`-Duser.name=hduser`，更改`USER`envar 和作为硬编码`System.setProperty("user.name", "hduser")`调用。

……无济于事。关于 1）我承认不知道应该如何使用这些类。另请注意，更改 Java System 属性显然不是在 Web 应用程序中使用的真正解决方案。

**有谁知道您如何指定 Hadoop 使用哪个用户连接到远程系统？**

PS/ Hadoop 使用默认配置，这意味着在连接到集群时不使用身份验证，并且在与远程机器通信时不使用 Kerberos。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-16T10:08:24.923

最后我偶然发现了常数

```
static final String HADOOP_USER_NAME = "HADOOP_USER_NAME";` 
```

在`UserGroupInformation class`.

将此设置为环境变量、启动时的 Java 系统属性（使用`-D`）或以编程方式设置`System.setProperty("HADOOP_USER_NAME", "hduser");`Hadoop 使用您想要连接到远程 Hadoop 集群的任何用户名。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T11:57:59.077

下面的代码对我有用

```
System.setProperty("HADOOP_USER_NAME", "hduser") 
```

```
UserGroupInformation ugi = UserGroupInformation.createRemoteUser("hduser"); 
ugi.doAs(new PrivilegedExceptionAction<Void>() {
    public Void run() throws Exception {
        Configuration configuration = new Configuration(); 
        configuration.set("hadoop.job.ugi", "hduser");
        int res = ToolRunner.run(configuration, new YourTool(), args);
        return null; 
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T17:30:17.200

我可以通过使用安全模拟功能来解决类似的问题[http://hadoop.apache.org/docs/stable1/Secure_Impersonation.html](http://hadoop.apache.org/docs/stable1/Secure_Impersonation.html)

以下是代码片段

```
 UserGroupInformation ugi = UserGroupInformation.createProxyUser("hduser", UserGroupInformation.getLoginUser()); 

    ugi.doAs(new PrivilegedExceptionAction() { 
    public Void run() throws Exception { 
      Configuration jobconf = new Configuration(); 
      jobconf.set("fs.default.name", "hdfs://server:hdfsport"); 
      jobconf.set("hadoop.job.ugi", "hduser"); 
      jobconf.set("mapred.job.tracker", "server:jobtracker port"); 
      String[] args = new String[] { "data/input", "data/output" }; 
      ToolRunner.run(jobconf, WordCount.class.newInstance(), args); 
      return null; 
    } }); 
```

远程（在我的情况下为 Windows 桌面主机）登录用户 ID 应添加到 core-site.xml 中，如上述 URL 中所述

# windows-phone-7 - 如何在 Facebook C# SDK Post 中换行？

> ID：11041254
> 
> 赞同：0
> 
> 时间：2012-06-14T20:59:15.480
> 
> 标签：windows-phone-7, facebook-c#-sdk

我一直在使用 WP7 弄乱 Facebook C# SDK 并设法将其发布到我的墙上。我的问题是如何在帖子描述中换行？

\n\r \r \n 似乎不起作用。

我的代码注：_fb = FacebookClient

```
var args = new Dictionary<string, object>();
args["name"] = "";
args["caption"] = "Testing WP7 app";
args["description"] = "Line1\rLine2\rLine3";
args["picture"] = "";
args["message"] = "Testing";
args["actions"] = "";

_fb.PostCompleted += new EventHandler<Facebook.FacebookApiEventArgs>_fb_PostCompleted);
_fb.PostAsync("me/feed", args); 
```

编辑：看起来像中心这样的伎俩。

```
args["description"] = "Line1<center></center>Line2<center></center>Line3"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:03:06.400

做`<br />`还是`<p />`工作？

# android - 简单光标适配器列顺序

> ID：11041255
> 
> 赞同：0
> 
> 时间：2012-06-14T20:59:16.917
> 
> 标签：android, sqlite, listview, simplecursoradapter

我想创建一个列表视图，其中的行具有列顺序的表格布局：

1、2、5

3、4

其中 1 = 结果；2 = 价值；3 = 值限定符；4 = 单位；5 = 管。

我的 sqlite 数据库表最初是第 1、2、3、4、5 列

这给了我一个表格行列表

1、2、3

4, 5

因此，我将 sqlite 表中的列顺序更改为 1、2、5、3、4

但是，这仍然给了我一个像以前一样的行列表

1, 2, 3,

4、5。

我不明白我在做什么错 - 我的 simpleCursorAdapter 方法中的选择和投影参数的顺序正确，我的 sqlite managedQuery 中的 FROM 参数也是如此。

有没有办法让 simpleCursorAdapter 更改表中列的顺序，即我的列表中的一行？还是我应该使用其他适配器？

如果您需要更多代码来回答此查询，请告诉我。我对编程也比较陌生。（我是一名职业医生）

主要活动：

```
public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);   

    ...

    Cursor c = getResults();
    showResults(c);

    ...
  }

private static String[] FROM = {_ID, CATEGORY, RESULT, VALUE, TUBE,
      VALUE_QUALIFIER, UNIT};

  private Cursor getResults()
  {
    // Perform a managed query. The Activity will handle closing and re-querying
    // the cursor when needed.
    return managedQuery(CONTENT_URI, FROM, null, null, RESULT + " ASC");
  }

  private static int[] views = {R.id.result, R.id.value, R.id.tube, R.id.value_qualifier,
      R.id.unit};

  private static String[] cols = {RESULT, VALUE, TUBE, VALUE_QUALIFIER, UNIT};

  public void showResults(Cursor c)
  {
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
        R.layout.list_example_entry, c, cols, views);
    this.setListAdapter(adapter);

  } 
```

xml 列表视图行：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:your_namespace="http://schemas.android.com/apk/res/com.sam.results"
android:id="@+id/table"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:clickable="false"
android:stretchColumns="1" >

<TableRow >

    <com.sam.results.TypefacedTextView
        android:id="@+id/result"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="result"
        android:textColor="#1a1b70"
        your_namespace:typeface="Designosaur-Regular.ttf" />

    <com.sam.results.TypefacedTextView
        android:id="@+id/value"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="value"
        your_namespace:typeface="Designosaur-Regular.ttf"
        android:gravity="center" />

    <com.sam.results.TypefacedTextView
        android:id="@+id/tube"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="tube"
        your_namespace:typeface="Designosaur-Regular.ttf" android:gravity="right"/>
</TableRow>

<TableRow >

    <com.sam.results.TypefacedTextView
        android:id="@+id/value_qualifier"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="qual"
        your_namespace:typeface="Designosaur-Regular.ttf" />

    <com.sam.results.TypefacedTextView
        android:id="@+id/unit"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="unit"
        android:textColor="#7eccd6"
        your_namespace:typeface="Designosaur-Regular.ttf" android:gravity="center" 
        />
    <com.sam.results.TypefacedTextView
        android:id="@+id/tube"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"

        your_namespace:typeface="Designosaur-Regular.ttf" android:gravity="right"/>
</TableRow>

</TableLayout> 
```

带有主要的 xml 布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

...

<ListView
    android:id="@android:id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/imageView1"
    android:clickable="false"
    android:divider="#71b3d9"
    android:dividerHeight="1dip"
    android:listSelector="@android:color/transparent" />

...

<\RelativeLayout> 
```

# php - 在不循环两次的情况下获取子数组的值？

> ID：11041256
> 
> 赞同：1
> 
> 时间：2012-06-14T20:59:17.773
> 
> 标签：php, oop, foreach, php-5.3

我已经将数组转换为这样的 stdClass 对象，

```
stdClass Object
(
    [1339697186] => stdClass Object
        (
            [1403873546800880] => stdClass Object
                (
                    [quantity_request] => 2
                    [time_created] => 1339697190
                    [variant] => stdClass Object
                        (
                            [0] => 1403873546800887
                        )

                )

        )

    [1339697196] => stdClass Object
        (
            [1403873546800880] => stdClass Object
                (
                    [quantity_request] => 1
                    [time_created] => 1339697196
                    [variant] => stdClass Object
                        (
                            [0] => 1403889656952419
                        )

                )

        )

) 
```

所以如果我想得到`[quantity_request]`每个项目，我会循环**两次**来得到答案，

```
foreach ($items as $key => $item) 
{
    foreach ($item as $code => $item) 
    {
        echo $item->quantity_request;
    }
} 
```

我想知道是否有一种方法可以在**不**循环对象数组两次的情况下获得下面这样的答案？

```
foreach ($items as $key => $item) 
{
    # Get the product code of this item.
    $code = $cart->search_code($key);

    echo $item->$code->quantity_request;
} 
```

错误：

> 致命错误：不能在...中使用 stdClass 类型的对象作为数组

我在一个类中有一个方法可以从对象数组的内容中获取代码（子键）。

```
public function search_code($key)
{
        # Get this item.
        $item = $this->content[$key];

        # Get this item's sub key, which is the code of the product.
        $subkeys = array_keys($item);

        # Get the first item from the array.
        $code = $subkeys[0];

        # Return the sub key which is the code of the product.
        return $code;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:02:33.827

是的，据我所知：

```
foreach ($items as $key => $item) 
{
    $array = (object) array_shift($item);

    echo $array->quantity_request.'<br />';
} 
```

我希望我能回答你的问题，100% 没有很好地理解。

**编辑**

```
<?php
$items = (object) array(
    1339697186 => array(1403873546800880 => array('quantity_request' => 2)),
    1339697187 => array(1403873546800880 => array('quantity_request' => 3)),
    1339697188 => array(1403873546800880 => array('quantity_request' => 4))
);

foreach ($items as $key => $item) 
{
    $array = (object) array_shift($item);

    echo $array->quantity_request.'<br />';
}
?>

// Results :
2<br />3<br />4<br /> 
```

# gps - 计算经度纬度双精度的长度差

> ID：11041264
> 
> 赞同：0
> 
> 时间：2012-06-14T21:00:14.390
> 
> 标签：gps

给定两个gps坐标，可以使用[haversine公式](http://www.movable-type.co.uk/scripts/latlong.html)计算长度差。但是反过来呢：

*   计算给定 Lat/Long double 的长度差（以米为单位）

*   计算给定长度（以米为单位）的 Lat/Long 双精度

我知道这并不完全可能，因为它与你在地球上的点不同，但有可能近似这个或类似的东西吗？这不必非常精确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:10:08.580

如果您的位移不是太大（小于几公里），请使用快速而肮脏的估计，即 y 方向的 111,111 米是 1 度（纬度），x 方向的 111,111 * cos（纬度）米是 1度数（经度）。

或者：

```
//Position, decimal degrees
 lat = 51.0
 lon = 0.0

 //Earth’s radius, sphere
 R=6378137

 //offsets in meters
 distanceNorth = 100
 distanceEast = 100

 //Coordinate offsets in radians
 dLat = distanceNorth/R
 dLon = distanceEast/(R*Cos(Pi*lat/180))

 //OffsetPosition, decimal degrees
 latO = lat + dLat * 180/Pi
 lonO = lon + dLon * 180/Pi 
This should return:

 latO = 51,00089832
 lonO = 0,001427437 
```

# ios - 如何在不使用 Storyboard 的情况下在 UITableView 中使用静态单元格？

> ID：11041272
> 
> 赞同：32
> 
> 时间：2012-06-14T21:00:46.447
> 
> 标签：ios, uitableview

我的项目中有一个现有的 ViewController + xib，现在我想添加一个带有静态单元格的 UITableView，如下所示：

![带有静态单元格的 TableView](../Images/1f6b967e02f59557b347ebe7f1408a61.png)

但是当我将 UITableView 拖到屏幕上时，属性检查器中没有“内容 > 静态”菜单。

我尝试让我的控制器成为 UITableViewController 的子类，但这无济于事——我仍然没有选择在 Attributes Inspector 中使用静态单元格。

我在 StackOverflow 上环顾四周，但没有找到这个问题的任何现有答案。所有现有问题都与故事板（我没有使用）而不是 xib 文件有关。

我的猜测是，当您将 UITableViewController 添加到情节提要时，Xcode 会产生某种魔力，但当您将现有 xib 更改为从 UITableViewController 继承时不会。

有什么建议如何将带有静态单元格的表格视图添加到现有的 xib 中？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-14T21:33:58.617

静态表格视图单元仅在使用情节提要时可用。但是，如果您没有在整个 UI 中使用故事板，您仍然可以将它们用于单个屏幕而不是屏幕集合。

为此，您可以创建一个带有单个视图控制器的 UIStoryboard 文件，该文件的文件所有者设置为您的自定义视图控制器子类。将 VC 的标识符设置为某个值。当你想要显示它时，获取故事板，然后通过从故事板创建 VC 来实例化视图控制器子类。

```
UIStoryboard *tableViewStoryboard = [UIStoryboard storyboardWithName:@"your storyboard" bundle:nil];
CustomViewController = [tableViewStoryboard instantiateViewControllerWithIdentifier:@"custom identifier"]; 
```

你可以像往常一样在你的应用程序中展示这个 VC。

这是开始使用故事板的好方法，无需转换整个应用程序即可使用它们。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-05T16:52:44.113

这在没有故事板的情况下是可行的：

1.  您的控制器必须采用 tableview 委托和源协议...UITableViewDelegate, UITableViewDataSource
2.  将表格视图添加到您的 .xib；将表格视图的样式设置为“分组”
3.  将表格连接到控制器中的属性（我们称之为“yourTableView”）
4.  将表格视图单元格作为单独的视图添加到 .xib 中...即*不*作为表格视图的子视图...它们将在 .xib 中自由浮动。（见下面的示例图片）
5.  将控件/标签等添加到表格单元格。
6.  为每个表格视图单元格的属性中的“标识符”字段分配唯一的字符串。
7.  将表格单元格连接到控制器中的其他属性（sliderCell、switchCell 等）
8.  将单元格控件的发送事件连接到控制器中的 IBAction 方法 - (IBAction) handleSliderCell 等。
9.  在控制器的 viewDidLoad 方法中，将表视图的委托和源分配给控制器（self.yourTableControl.delegate = self; self.yourTableControl.dataSource = self;）
10.  在控制器中实现 numberOfSectionsInTableView、numberOfRowsInSection 和 cellForRowAtIndexPath
11.  在 tableView:cellForRowAtIndexPath: 中，为适当的 indexPath 值返回 yourFirstCell、yourSecondCell 等指针

表格单元格控件的事件应该转到您的处理程序例程...

第 4 步的示例： ![西布](../Images/49a3b209b65baac75f04d72c9af30790.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-29T18:55:25.643

为了扩展 BVB 的答案，当谈到第 10 号时，这里是您的 tableview 委托方法的 Swift 3 片段。请务必在 xib 中的所有单元格中添加插座。

当您手动创建表格视图部分时，请记住它`indexPath`等于表示您的表格结构的二维数组。例如，当`indexPath`传递到`tableView(cellForRowAt indexPath: IndexPath)`等于时`[1][0]`，您的单元格将被放置在第二部分的第一个位置。

可以`indexPath`使用属性`indexPath.row`和提取值`indexPath.section`。使用这些值，您可以按照您喜欢的顺序从 IBOutlets 手动构建您的部分。

```
@IBOutlet var is_enabled: UITableViewCell!
@IBOutlet var is_public: UITableViewCell!

    func tableView(_ tableView: UITableView, titleForHeaderInSection section: Int) -> String? {
    switch(section){
        case 0:
            return "Cell 1"
        case 1:
            return "Cell 2"
        default: return ""

    }
}

func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
    return 1
}

func numberOfSections(in tableView: UITableView) -> Int {
    return 2
}

func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    print("index path here", indexPath)
    if(indexPath.section == 0)  {
        return is_enabled
    }
    else if(indexPath.section == 1) {
        return is_public
    } else {
        return is_enabled
    }
} 
```

# c++ - C++ 模板：部分模板规范和友元类

> ID：11041274
> 
> 赞同：9
> 
> 时间：2012-06-14T21:00:50.973
> 
> 标签：c++, templates, template-specialization, partial-specialization, friend-class

是否有可能以某种方式使部分模板规范成为朋友类？即考虑你有以下模板类

```
template <class T> class X{
    T t;
}; 
```

现在你有了部分特化，例如指针

```
template <class T> class X<T*>{
    T* t;
}; 
```

我想要完成的是，每一个可能`X<T*>`都是`X<S>`for ANY的朋友类`S`。即`X<A*>`应该是的朋友`X<B>`。

当然，我想到了 X 中常用的模板友元声明：

```
template <class T> class X{
    template <class S> friend class X<S*>;
} 
```

但是，这不会编译，g++ 告诉我：

test4.cpp:34:15：错误：“ `template<class T> class X`”的特化必须出现在命名空间范围内

test4.cpp:34:21：错误：部分特化“ `X<S*>`”声明为“朋友”

这根本不可能，还是有一些解决方法？

我问的原因是我需要一个构造函数来`X<T*>`从任意创建此类`X<S>`（`S`必须是 的子类型`T`）。

代码如下所示：

```
template <class T> class X<T*>{
    T* t;

    template<class S>
    X(X<S> x) : t(&(x.t))  {} //Error, x.t is private
} 
```

现在，编译器当然会抱怨，这`x.t`在构造函数中是不可见的，因为它是私有的。这就是为什么我需要一个部分专业化的朋友班。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T08:11:25.497

在 C++ 中，您可以授予超过`private`四个级别的访问权限。

*   完全`public`访问（见 pmr 的回答）
*   继承层次结构中的访问（`protected`这里无关）
*   到基本模板`friend`（请参阅此答案）
*   到非模板或完全专业化`friend`（太弱而无法解决您的用例）

*后两种友谊之间没有中间道路。*

来自 C++ 标准的 §14.5.4：。

> 友元声明不得声明部分特化。

以下声明将允许您实现所需的内容。它使您可以自由地从任何其他专业化访问模板的任何专业化，但仍仅限于`X`. 它比您要求的要宽松一些。

```
template<class T> class X
{
    template<class Any> friend class X;
    public:
        ...
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:21:58.203

我们可以定义一个`getter`由 X 中定义的密钥保护的。

```
#include <type_traits>

template <class T> class X{
  T t;
public:
  struct Key {
    template<typename S>
    Key(const X<S>&) {
      static_assert(std::is_pointer<S>::value, "Not a pointer");
    }
  };

  const T& get(Key) const { return t; }
  T& get(Key) { return t; }
};

template <class T> class X<T*> {
  T* t;
public:
  template<class S>
  X(X<S>& x) : t(&(x.get(typename X<S>::Key(*this))))  {}
};

int main()
{
  X<int> x1;
  X<int*> x2(x1);
  return 0;
} 
```

这仍然有一些弱点。现在每个人都`X<T*>`可以使用 `get`. 但这现在太模糊了，没有人会意识到这一点。我会选择一个简单的公共吸气剂。

# javascript - 将 Javascript 变量传递到 grails RemoteFunction

> ID：11041276
> 
> 赞同：5
> 
> 时间：2012-06-14T21:00:57.963
> 
> 标签：javascript, dom, grails, parameters

> **可能重复：**
> [在 g:remoteLink 中传递参数作为 javascript 函数的结果](https://stackoverflow.com/questions/10023672/pass-parameter-in-gremotelink-as-result-of-javascript-function)

我正在尝试调用由按钮的 onclick 触发的 remoteFunction 调用，但单击不会调用该函数。我已经使用警报启动测试了 onlick 命令并调用了该函数。这是我的代码。

```
<input type="button" onclick="exportList()" value= "Export"/>

function exportList(){

            var profile= document.getElementById('dropdown').value
            ${remoteFunction(controller: 'profile' , action:'export', params: "'profile=' + profile")}  

} 
```

当我取出参数和 var 配置文件时，仍然没有调用该函数...我的控制器和操作已正确命名，所以我不知道为什么会出现此错误。如果您能提供帮助，请提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T22:32:21.690

JoeCortopassi 是正确的——你不能`${remoteFunction...}`直接在 javascript 中使用 grails 构造。我已经像这样使用 Jquery 完成了这项工作：

```
function exportList() {
    var profileToUse = document.getElementById('dropdown').value
    jQuery.ajax({
        url: "/youApp/profile/export",
        type: "POST",
        data: {profile: profileToUse}
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T21:13:40.933

我不知道这应该做什么，但它看起来很糟糕

```
${remoteFunction(controller: 'profile' , action:'export', params: "'profile=' + profile")} 
```

你确定要说`var{remoteFunction()}`吗？原因`$`只是一个变量。如果您使用的是 jQuery，那就更没有意义了。此外，您传递的内容`remoteFunction()`看起来应该是对象，但没有包含在`{}`

# javascript - If / Else on 函数

> ID：11041281
> 
> 赞同：0
> 
> 时间：2012-06-14T21:01:15.650
> 
> 标签：javascript, jquery, media-queries

我正在使用 Paul Hayes 的 CSS 过渡媒体查询脚本，但无法弄清楚如何做一个简单的 if/else。

这是我要追求的：

```
mql('all and (max-width: 959px)', change);
mql('all and (min-width: 960px)', change);

function change(mql) {
    if(max-width: 959px) {
        console.log("Do this");
    } else {
        console.log("Do that");
    }
} 
```

这是`mql`/保罗的脚本：

```
mql = (function(doc, undefined) {

    var docElem = doc.documentElement,
        refNode = docElem.firstElementChild || docElem.firstChild,
        idCounter = 0;
        if(!doc.getElementById('mq-style')) {
          style = doc.createElement('style');
          style.id = 'mq-style';
          style.textContent = '.mq { -webkit-transition: width 0.001ms; -moz-transition: width 0.001ms; -o-transition: width 0.001ms; -ms-transition: width 0.001ms; width: 0; position: absolute; top: -100em; }\n';
          docElem.insertBefore(style, refNode);          
        }

     var transitionEnds = Array('transitionend','webkitTransitionEnd','oTransitionEnd','msTransitionEnd');

     for(var i in transitionEnds) { 
    if ('on'+ transitionEnds[i].toLowerCase() in window)  transitionEnd = transitionEnds[i];
     }  

    return function(q, cb) {

        var id = 'mql-' + idCounter++,
            callback = function() {
                // perform test and send results to callback
                cb({
                    matches: (div.offsetWidth == 42),
                    media: q
                });
            },
            div = doc.createElement('div');

        div.className = 'mq'; // mq class in CSS declares width: 0 and transition on width of duration 0.001ms
        div.id = id;
        style.textContent += '@media ' + q + ' { #' + div.id + ' { width: 42px; } }\n';        

        // add transition event listener
        div.addEventListener(transitionEnd, callback, false); 

        docElem.insertBefore(div, refNode);

        // original polyfill removes element, we need to keep element for transitions to continue and events to fire.

        return {
            matches: div.offsetWidth == 42,
            media: q
        };
    };

})(document); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:05:48.770

您的 if 需要更改为类似于：

```
mql('all and (max-width: 959px)', change);
mql('all and (min-width: 960px)', change);

function change(mql) {
    if(max-width == '959px') {
        console.log("Do this");
    } else {
        console.log("Do that");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:23:34.140

我可以使用函数中提供的信息完成此操作的唯一方法`change`是：

```
mql('all and (max-width: 959px)', change);
mql('all and (min-width: 960px)', change);

function change(mql) {
    if(mql.media.indexOf('max-width: 959px') !== -1 && mql.matches) {
        console.log("Do this");
    } else {
        console.log("Do that");
    }
} 
```

但我不得不说感觉不太好......我会考虑为每个媒体查询提供两个单独的回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:06:57.863

```
var mq = window.matchMedia( "(min-width: 959px)" ); 
mq.addListener(WidthChange);
WidthChange(mq); 

function WidthChange(mq) {
    if (mq.matches) {
        console.log("Do this"); // window width is at least 959px
    } else {
        console.log("Do this"); // window width is at less than 959px
    }
} 
```

# c++ - Python.h：没有这样的文件或目录

> ID：11041299
> 
> 赞同：43
> 
> 时间：2012-06-14T21:02:37.990
> 
> 标签：c++, python, include, cmake, kdevelop

我最近在运行 Ubuntu 12.04 LTS 的 Macbook Pro 上安装了用于 C++ 开发的 KDevelop 4。

我想在我的 C++ 代码中嵌入 Python 应用程序。为此，需要包含 Python.h 头文件。所以，我做到了。

```
#include <iostream>
#include <Python.h>

int main(int argc, char **argv) {
    Py_Initialize();
    return 0;
} 
```

但是，在运行时，我收到了来自 IDE 的以下响应：

```
fatal error: Python.h: No such file or directory 
```

不过，我很快就发现了问题。我还没有下载 python-dev 包。所以，我做到了。我又跑了，但同样的错误又出现了。所以，我认为这一定是KDevelop不包含头文件的问题。因此，我将相关文件夹添加到包含路径中，KDevelop 通过删除上面代码中第二个包含语句下方的红色下划线立即意识到这一点。

但是，问题仍然存在。我犯了同样的错误。希望你们能提供任何帮助或意见:-)

非常感谢。

编辑：我之前错过的一些细节是 KDevelop 正在为我的项目使用 cmake。我想我的问题发生的原因是因为 cmake 不知道适当的编译器和链接器路径。对于为 cmake 设置正确路径的任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-15T17:53:29.843

在您的 CMakeLists.txt 中，尝试添加以下内容：

```
find_package(PythonLibs REQUIRED)
include_directories(${PYTHON_INCLUDE_DIRS})
target_link_libraries(<your exe or lib> ${PYTHON_LIBRARIES}) 
```

有关命令的详细信息，请运行：

```
cmake --help-module FindPythonLibs
cmake --help-command find_package
cmake --help-command include_directories
cmake --help-command target_link_libraries 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-02-11T11:13:26.047

```
sudo apt-get install pythonX.X-dev 
```

例如 3.8

```
sudo apt-get install python3.8-dev 
```

*感谢 Cristianjs19 的评论。*

原答案：

```
sudo apt-get install python2.7-dev 
```

在“Python.h：没有这样的文件或目录”问题上为我工作

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-14T21:09:16.530

您希望在编译行中包含以下内容：

```
`python-config --cflags` 
```

这在链接线上：

```
`python-config --ldflags` 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-14T21:09:03.557

很可能`Python.h`不在您的构建系统的包含路径中。你可以通过运行找出你的 Python.h 在哪里

```
dpkg -L python-dev | grep Python.h 
```

这还将验证 python-dev 包是否实际安装了 Python.h。

我这里没有 kdevelop，但是大多数 IDE 都有一个设置，您可以在其中指定构建系统使用的包含路径，并且您应该能够添加 Python.h 所在的路径。

编辑：

正如 Nikolai 暗示的那样，您还需要为链接阶段添加正确的库路径。（python-config --ldflags 的输出）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-09-08T09:28:51.200

对于 Linux Ubuntu Putty 用户，请尝试以下操作：

```
sudo apt-get update
sudo apt-get install python-dev 
```

然后编译它

```
gcc -o check xyz.c -I/usr/include/python2.7/ -lpython2.7 
```

然后运行它

```
./check 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-12-10T14:12:56.947

我假设它已经安装了。找到路径：

```
find / -iname python.h 
```

当你这样做时，在编译时添加

```
-I python_h_path 
```

# c++ - 模仿 std::map > 在 VBA 中

> ID：11041300
> 
> 赞同：3
> 
> 时间：2012-06-14T21:02:40.940
> 
> 标签：c++, arrays, vba, dictionary

我正在尝试`std::map<string, std::list<string> >`在 VBA 中进行模仿（这种情况非常具体，但实际上是在类似`std::map<>`容器中的任何集合）

我发现相当于`std::map`a `Dictionary`，但最后一部分呢？

不知何故，我在互联网上发现的最多的是可以将这样的数组元素添加到 a`Dictionary`中，尽管没有任何关于如何在完成后添加元素的见解：

```
Dim my_dictionary as Dictionary
Set my_dictionary = New Dictionary
my_dictionary.Add "KEY#1", Array("A", "B", "C")
'How would I add "D" here ?! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:43:47.677

```
Sub Tester()

    Dim d As Scripting.Dictionary
    Dim arr, ub

    Set d = New Scripting.Dictionary

    d.Add "key1", Array("A", "B", "C")

    Debug.Print Join(d("key1"))

    arr = d("key1")
    ub = UBound(arr) + 1
    ReDim Preserve arr(0 To ub)
    arr(ub) = "D"
    d("key1") = arr

    Debug.Print Join(d("key1"))

End Sub 
```

# c# - C# 将 MP4 资源保存到文件

> ID：11041301
> 
> 赞同：0
> 
> 时间：2012-06-14T21:02:55.153
> 
> 标签：c#, file, resources, mp4

我尝试了几种不同的方法，但保存时它不会打开。我怎样才能做到这一点？

基本上，我希望能够将当前是资源文件的 MP4 文件保存到可以作为路径访问的临时位置。

这是我尝试过的东西：

```
 public static void WriteResourceToFile(string resourceName, string fileName)
    {

        using (Stream s = Assembly.GetExecutingAssembly().GetManifestResourceStream(resourceName))
        {

            if (s != null)
            {

                byte[] buffer = new byte[s.Length];

                char[] sb = new char[s.Length];

                s.Read(buffer, 0, (int)(s.Length));

                /* convert the byte into ASCII text */

                for (int i = 0; i <= buffer.Length - 1; i++)
                {

                    sb[i] = (char)buffer[i];

                }

                using (StreamWriter sw = new StreamWriter(fileName))
                {

                    sw.Write(sb);

                    sw.Flush();

                }
            }
        }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:21:01.290

你把它复杂化了。

尝试这样的事情（注意，未编译或测试，并且 Stream.CopyTo() 仅存在于 .NET 4.0 及更高版本中）。

```
using (Stream s = Assembly.GetExecutingAssembly().GetManifestResourceStream(resourceName)))
using (FileStream fs = File.Open("c:\myfile.mp4", FileMode.Create))
{
    s.CopyTo(fs);
} 
```

任务完成。

如果您没有可用的 .NET 4.0，则需要自己实现一个，例如以下之一：[如何将一个流的内容复制到另一个流？](https://stackoverflow.com/questions/230128/best-way-to-copy-between-two-stream-instances-c-sharp)

要获取当前程序集中所有资源名称的列表，请执行以下操作：

```
Assembly a = Assembly.GetExecutingAssembly();
foreach (string s in a.GetManifestResourceNames())
{
    Console.WriteLine(s);
}
Console.ReadKey(); 
```

获取控制台上出现的内容并将其传递到我发布的第一个片段中的 GetManifestResourceStream() 中。

[http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getmanifestresourcenames.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getmanifestresourcenames.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:10:37.347

你为什么把 MP4 写成字符串？您应该不加修改地写出字节。您转换为 chars 正在修改数据。使用 FileStream 调用并调用 Write 方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-14T21:12:44.120

你可以尝试这样的事情：

我粘贴了错误的代码......对不起，我很着急

```
[HttpPost]
public ActionResult Create(VideoSermons video, HttpPostedFileBase videoFile)
{
    var videoDb = new VideoSermonDb();
    try
    {
        video.Path = Path.GetFileName(videoFile.FileName);
        video.UserId = HttpContext.User.Identity.Name;
        videoDb.Create(video);

        if (videoFile != null && videoFile.ContentLength > 0)
        {
            var videoName = Path.GetFileName(videoFile.FileName);
            var videoPath = Path.Combine(Server.MapPath("~/Videos/"),
                                         System.IO.Path.GetFileName(videoFile.FileName));
            videoFile.SaveAs(videoPath);

        }

        return RedirectToAction("Index");

    }
    catch
    {
        return View();
    }

} 
```

这实际上将视频文件加载到一个目录，但它也应该适用于您的格式。

-谢谢，

# javascript - JavaScript 最佳实践：我应该在哪里包含我的 JavaScript？

> ID：11041303
> 
> 赞同：3
> 
> 时间：2012-06-14T21:03:01.160
> 
> 标签：javascript, jquery

我正在使用 PHP 和 JavaScript 构建一个网站，我觉得我很好地掌握了在哪里包含我的 JavaScript，但是出现了一个更具体的情况让我感到困惑。我目前将我所有的 JavaScript 都放在一个外部文件中，该文件包含在每个 PHP 页面中。

假设我有一个 id='myParagraph' 的段落，我需要在页面加载时使用 JavaScript 以红色突出显示该段落。本段仅在一个 PHP 页面上，我的网站有大约 50 个不同的页面。我立即假设我应该将一些代码放入我的一个外部 JavaScript 文件中，例如：

```
$('#myParagraph').css('color', 'red') 
```

并且在该页面加载时该段落将突出显示。

我的问题是：这是最好的方法吗？据我了解，每次我加载一个页面时，都会搜索一个 id 为 myParagraph 的元素，但我 98% 的页面甚至都没有那个 id。这是浪费吗？我是否应该包含以下代码：

```
function highlightParagraph()
{
    $('#myParagraph').css('color', 'red')
} 
```

在我的一个 JavaScript 文件中，然后将一些内联 JavaScript 放入 ID 为 myParagraph 的 PHP 文件中，以便在加载时调用函数 highlightParagraph()？这样，只会搜索并突出显示带有 myParagraph 的一页。

我觉得选项 2 是最好的，但我一直在阅读不要使用内联 JavaScript。

编辑：我意识到对于这个例子你只需要使用 CSS。我只是用它来解决我的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T21:08:06.037

您应该有一个包含基础设施功能的“大”js 文件，并且所有页面都应该引用它。

**然后每个页面都应该引用另一个仅具有相关功能的**js文件。
使用外部 js 文件的好处是：

1.  文件在第一次下载后被缓存 => 更快的冲浪。
2.  *与关注点分开*，您使表示层远离脚本层。

另一个重要说明：
**更改 css 的最佳方法是使用 css...而不是 javascript。** 我

如果您在 DOM 就绪时更改元素样式，只需添加元素定义

```
#myParagraph{color: red;} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T21:10:24.693

内联 JavaScript 的问题是您现在可能从几行开始，但在几周或几个月内，它会加起来并变成很多内联 JavaScript。这很糟糕，因为内联 JavaScript 不能像包含在`<script src="path/to/file.js" />`. 这很糟糕，因为您添加了大量内容，用户每次浏览页面都会获取这些内容，从而增加了服务器带宽的负载并减慢了用户的页面加载速度。

如果只是几个选择器，别担心；浪费在它上面的时间不会导致任何浏览器出汗。但是，如果它成为您网站的不同页面/模块的大量代码，您可能希望将其拆分为不同的 JavaScript 文件，并在加载某些页面时仅包含该文件。这样，浏览器将缓存该文件并为您和用户节省带宽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:08:42.417

如果很多人不同意我的观点（甚至是激烈的），我不会感到太惊讶，但是如果它会减少文件数量或整体复杂性，我不会在标题中为该页面添加带有特定 javascript 的 javascript 标记的项目。大多数在各处完成的核心事情当然应该放在另一个文件中，但如果它是一页交易，那么我会追求清洁。

css 也是如此，如果它特定于该页面，只需在标题中放置一个 css 标记，其中的特定更改与主 css 文件不同。顺便说一句，正如每个人都指出的那样，这是您只想使用 CSS 的情况。

# java - 如何更改 slick2d 左上角图标

> ID：11041308
> 
> 赞同：1
> 
> 时间：2012-06-14T21:03:17.793
> 
> 标签：java, icons, image, slick2d

嘿伙计们，我想知道是否有办法改变 slick2d 中的左上角图标。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:08:44.947

请参阅[http://slick.cokeandcode.com/javadoc/org/newdawn/slick/GameContainer.html#setIcon(java.lang.String](http://slick.cokeandcode.com/javadoc/org/newdawn/slick/GameContainer.html#setIcon(java.lang.String) ) 您应该调用容器实例的 setIcon(java.lang.String ref)

# java - 将高质量的 HTML 绘制到 Graphics2D（类似于 drawString()）

> ID：11041310
> 
> 赞同：2
> 
> 时间：2012-06-14T21:03:23.733
> 
> 标签：java, html, graphics2d

我知道如何使用 Swing 有限的内置 HTML 支持（参见[http://www.java.net/node/680674](http://www.java.net/node/680674)）将 HTML 绘制到 Graphics2D 对象，但我需要更好的渲染。最重要的是，对于这个特殊的化学图表绘图应用程序，Swing 的 HTML 支持不会扩展到嵌套的子/上标。更好的 CSS 支持也会很好。我不需要图像嵌入或交互功能，例如 Javascript 或热链接。

HTML 文本被缩放和旋转，然后绘制成可能包含其他文本和图形的图表。Graphics2D 目标可以是屏幕、打印机或（通过 iText）PDF 文件。我怀疑任何涉及通过 BufferedImage 等进行转换的解决方案在生成具有出版质量的 PDF 文件时是否足够紧凑。

我（可能不正确）的印象是 JavaFX 2.0 还没有解决这个问题，尽管它最终可能会。（如果早期版本可以做到这一点，那可能是一个解决方案。）将整个应用程序从 Swing 重写为 JavaFX 是不现实的。

这个应用程序是免费和开源的，所以它使用的任何工具都可能需要自由分发。否则，我相信 JWebEngine 可能符合要求。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:40:36.353

您可以使用 JavaFX [WebView](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebView.html)节点 - 它具有非常好的 HTML 标记和 css 支持。您可以使用 JavaFX 原语[旋转](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#rotateProperty)和[缩放](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#scaleXProperty)WebView 节点。 可以在 WebView 中使用[MathJax来获得高质量的方程渲染（如果仅纯 html 和 css 不能为您完成这项工作）。](http://www.mathjax.org/)使用[JavaFX 2.2](http://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html)，您可以拍摄 WebView 节点的快照并将其呈现为 JavaFX 图像。[您可以使用 JavaFX 2.2 SwingFXUtils 将该 JavaFX 图像转换为 awt BufferedImage 并使用ImageIO](http://docs.oracle.com/javase/7/docs/api/javax/imageio/package-summary.html)将其写入多种格式的文件。

这是将[饼图节点渲染为 png 的示例](https://forums.oracle.com/forums/thread.jspa?messageID=10394451)。根据 html 的复杂性，有时高质量的图像会很好地压缩为（例如）png 文件。在图表示例中，带有文本和彩色渐变的 2000x2000 像素饼图保存为 168kb 的 png 文件。

无需将整个应用程序从 Swing 重写为 JavaFX，因为 JavaFX 包含用于将 JavaFX 应用程序嵌入现有 Swing 应用程序的[JFXPanel 。](http://docs.oracle.com/javafx/2/api/javafx/embed/swing/JFXPanel.html)节点快照步骤甚至不需要将节点呈现到屏幕上（这都可以通过内存缓冲区完成）——尽管 JavaFX 系统可能需要首先在 JavaFX 应用程序或 JFXPanel 中启动和启动。

以上所有内容可能会或可能不会最终给您想要的结果，但这似乎是一个很有前途的检查途径。

**更新**

我对此进行了一些测试，尽管我可以按照本文中的说明对屏幕上显示的 WebView 进行快照，但由于 JavaFX 2.2 的一些限制，我无法对作为屏幕外场景的一部分显示的 WebView 进行快照。这意味着此答案中的信息是准确的，但仅适用于可以在屏幕上的 WebView 中显示的 HTML 部分；例如，该技术目前不适用于像素大小超过屏幕像素大小的大型文档。有关一些示例代码，请参阅[https://forums.oracle.com/forums/thread.jspa?threadID=2456191](https://forums.oracle.com/forums/thread.jspa?threadID=2456191)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-22T08:46:22.490

经过大量搜索和拼凑后，我发现上面**更新 oracle 论坛链接**中的示例的唯一问题是 webview 的大小是固定的，并且我的**css 在 html 中使用**（而不是在 JavaFX 中）需要。

```
overflow-x: hidden;
overflow-y: hidden; 
```

隐藏最后一个滚动条。

所以我想出了以下快照方法（带有动画的应用程序作为您的应用程序的示例）：

```
package application;

import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;

import javafx.animation.Animation;
import javafx.animation.PauseTransition;
import javafx.animation.TranslateTransition;
import javafx.application.Application;
import javafx.embed.swing.SwingFXUtils;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.effect.GaussianBlur;
import javafx.scene.image.WritableImage;
import javafx.scene.layout.AnchorPane;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.Pane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javafx.scene.web.WebView;
import javafx.stage.Modality;
import javafx.stage.Stage;
import javafx.stage.StageStyle;
import javafx.util.Duration;

public class WebViewSnapshot extends Application {

    BorderPane rootPane;
    TranslateTransition animation;

    @Override
    public void start(Stage primaryStage) {

        Rectangle rect = new Rectangle(50, 50, 50, 50);
        rect.setFill(Color.CORAL);

        animation = createAnimation(rect);

        Button snapshotButton = new Button("Take snapshot");

        Pane pane = new Pane(rect);
        pane.setMinSize(600, 150);

        rootPane = new BorderPane(pane, null, null, snapshotButton, new Label("This is the main scene"));

        snapshotButton.setOnAction(e -> {
            // html file being shown in webview
            File htmlFile = new File ("generated/template.html");
            // the resulting snapshot png file
            File aboutFile = new File ("generated/about.png");
            generate(htmlFile, aboutFile, 1280, 720);
        });

        BorderPane.setAlignment(snapshotButton, Pos.CENTER);
        BorderPane.setMargin(snapshotButton, new Insets(5));
        Scene scene = new Scene(rootPane);
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    private TranslateTransition createAnimation(Rectangle rect) {
        TranslateTransition animation = new TranslateTransition(Duration.seconds(1), rect);
        animation.setByX(400);
        animation.setCycleCount(Animation.INDEFINITE);
        animation.setAutoReverse(true);
        animation.play();
        return animation;
    }

    public void generate(File htmlFile, File outputFile, double width, double height) {
        animation.pause();
        // rootPane is the root of original scene in an FXML controller you get this when you assign it an id
        rootPane.setEffect(new GaussianBlur());
        Stage primaryStage = (Stage)rootPane.getScene().getWindow();
        // creating separate webview holding same html content as in original scene
        WebView webView = new WebView();
        // with the size I want the snapshot
        webView.setPrefSize(width, height);
        AnchorPane snapshotRoot = new AnchorPane(webView);
        webView.getEngine().load(htmlFile.toURI().toString());
        Stage popupStage = new Stage(StageStyle.TRANSPARENT);
        popupStage.initOwner(primaryStage);
        popupStage.initModality(Modality.APPLICATION_MODAL);
        // this popup doesn't really show anything size = 1x1, it just holds the snapshot-webview
        popupStage.setScene(new Scene(snapshotRoot, 1, 1));
        // pausing to make sure the webview/picture is completely rendered
        PauseTransition pt = new PauseTransition(Duration.seconds(2));
        pt.setOnFinished(new EventHandler<ActionEvent>() {
            @Override public void handle(ActionEvent event) {
                WritableImage image = webView.snapshot(null, null);
                // writing a png to outputFile
                // writing a JPG like this will result in a pink JPG, see other posts
                // if somebody can scrape me simple code to convert it ARGB to RGB or something
                String format = "png";
                try {
                    ImageIO.write(SwingFXUtils.fromFXImage(image, null), format, outputFile);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } finally {
                    rootPane.setEffect(null);
                    popupStage.hide();
                    animation.play();
                }
            }
        });
        // pausing, after pause onFinished event will take + write snapshot
        pt.play();
        // GO!
        popupStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

# php - 使用ajax将数据插入php中的表

> ID：11041315
> 
> 赞同：0
> 
> 时间：2012-06-14T21:04:05.767
> 
> 标签：php, mysql, ajax

我正在使用 ajax 在 php 中添加数据和上传文件，但它返回 require appname 我将在 GetPhp.php 中编写查询 appname 是必需的

```
if(!appid)
    {
    var appname=document.getElementById("appname").value;
    parameters ="appname="+appname;
    /*var apptype=document.getElementById("apptype").value;
    parameters ="apptype="+apptype;
    var appurl=document.getElementById("appurl").value;
    parameters ="appurl="+appurl;
    var appguid=document.getElementById("appguid").value;
    parameters ="appguid="+appguid;
    var cname=document.getElementById("cname").value;
    parameters ="cname="+cname;*/
    $.ajaxFileUpload
            (
            {

                    url:'uploadplist.php',
                    secureuri:false,
                    fileElementId:'plist',
                    dataType: 'json',
                    data:{name:'logan', id:'id'},
                    success: function (data, status)
                    {

                        var plist=data.msg;

                        parameters +="&plist="+plist;

                       $.ajaxFileUpload
                         (
                          {

                          url:'uploadipa.php',
                          secureuri:false,
                          fileElementId:'ipa',
                          dataType: 'json',
                          data:{name:'logan1', id:'id1'},
                          success: function (data, status)
                          {
                           var ipa=data.msg;
                           parameters +="&ipa="+ipa;
                              $.ajaxFileUpload
                             (
                              {

                            url:'uploadprovision.php',
                            secureuri:false,
                            fileElementId:'provision',
                            dataType: 'json',
                            data:{name:'logan2', id:'id2'},
                            success: function (data, status)
                            {
                            var provision=data.msg;
                            parameters +="&provision="+provision;
                            $("input#appname").val('');
                            /*$("input#apptype").val('');
                            $("input#appurl").val('');
                            $("input#appguid").val('');
                            $("input#cname").val('');*/
                            $('#mask').hide();
                            $('.window').hide();
                            httprequest.onreadystatechange=alertContents;
                            httprequest.open('POST','GetPhp.php',true);
                            httprequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                            httprequest.setRequestHeader("Content-length", parameters.length);
                            httprequest.setRequestHeader("Connection", "close");
                            httprequest.send(parameters);
                            },
                           error: function (data, status, e)
                           {
                           alert(e);
                           }
                         }
                       )

                          },
                         error: function (data, status, e)
                         {
                         alert(e);
                         }
                         }
                       )

                    },
                    error: function (data, status, e)
                    {
                        alert(e);
                    }
            }
            )

            } 
```

当我删除 apptype ，appurl，appquid，cname 的评论时，我只插入 appname 它的工作，它没有上传到我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:08:58.423

我不完全清楚你在问什么，但我认为你的问题在这里：

```
var appname=document.getElementById("appname").value;
parameters ="appname="+appname;
var apptype=document.getElementById("apptype").value;
parameters ="apptype="+apptype;
var appurl=document.getElementById("appurl").value;
parameters ="appurl="+appurl;
var appguid=document.getElementById("appguid").value;
parameters ="appguid="+appguid;
var cname=document.getElementById("cname").value;
parameters ="cname="+cname; 
```

你正在替换`parameters`而不是添加它。尝试...

```
var appname=document.getElementById("appname").value;
parameters ="appname="+appname;
var apptype=document.getElementById("apptype").value;
parameters +="&apptype="+apptype;
... 
```

（注意`+=`和附加`&`）

或者更具可读性...

```
var parameters =
    "appname="  + $("#appname").val() + 
    "&apptype=" + $("#apptype").val() +
    "&appurl="  + $("#appurl").val() +
    "&appguid=" + $("#appguid").val() + 
    "&cname="   + $("#cname").val(); 
```

您可能还需要对参数进行 urlencode（这是一种很好的做法）

例如...

```
var parameters =
    "appname="  + encodeURIComponent($("#appname").val()) + 
    "&apptype=" + encodeURIComponent($("#apptype").val()) +
    "&appurl="  + encodeURIComponent($("#appurl").val())  +
    "&appguid=" + encodeURIComponent($("#appguid").val()) + 
    "&cname="   + encodeURIComponent($("#cname").val()); 
```

# android - Android - 片段事务上的自定义动画未运行

> ID：11041325
> 
> 赞同：84
> 
> 时间：2012-06-14T21:04:47.240
> 
> 标签：android, android-fragments, android-animation

**我正在使用带有支持包 v4 的 Google API 8 (Android 2.2)。**

它不会给出任何错误或动画。

交易：

```
FragmentTransaction transaction = manager.beginTransaction();       
transaction.replace(R.id.content, myFragment);
transaction.setCustomAnimations(R.anim.slide_in_left, R.anim.slide_out_right);
transaction.commit(); 
```

动画：

**slide_in_left.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >
    <translate
        android:duration="700"
        android:fromXDelta="-100%"
        android:toXDelta="0%" >
    </translate>
</set> 
```

**slide_out_right.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate
        android:duration="700"
        android:fromXDelta="0%"
        android:toXDelta="100%" >
    </translate>
</set> 
```

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2012-06-19T19:48:57.110

经理在我设置动画之前堆叠我的事务，所以它在没有动画的情况下堆叠事务（可悲但真实），即使我在`setCustomAnimations()`.

解决方案是先设置动画：

```
FragmentTransaction transaction = manager.beginTransaction();       
transaction.setCustomAnimations(R.anim.slide_in_left, R.anim.slide_out_right);
transaction.replace(R.id.content, myFragment);
transaction.commit(); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-02-12T14:17:47.247

如上所述，单独的语句肯定会起作用。但**这里的诀窍**是`setCustomAnimation`在设置交易类型之前。`add`, `replace`, 等等。否则它不会。因此，应用相同的逻辑`method chaining`也可以。例如。

```
getSupportFragmentManager()
        .beginTransaction()
        .setCustomAnimations(R.anim.a_slide_up,
                             R.anim.a_slide_down,
                             R.anim.a_slide_up,
                             R.anim.a_slide_down)
        .add(R.id.root_layout, 
             MyFrag.newInstance())
        .addToBackStack("MyFrag")
        .commit(); 
```

把它放在这里，以便喜欢的人`method chaining`发现它有帮助。干杯!

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-10-09T15:36:44.713

把这个留在这里，因为这是最受欢迎的问题。我在片段事务没有动画时遇到了同样的问题。罪魁祸首是在包含布局中将属性`android:animateLayoutChanges`设置为`true`。

我希望它可以帮助某人节省一些时间来寻找解决方案，因为在不同文件中嵌套布局时可能很难注意到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-02T12:53:44.557

另一个原因可能是`fragmentTransaction.show()`在提交之前不必要地放置。这使得某些 android API 版本上不显示弹出过渡。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-02T13:57:46.297

对我来说，问题是使用`Fragment.getChildFragmentManager()`我切换到`Fragment.getParentFragmentManager()`动画突然开始工作。

# powershell - 如何使用 Powershell 确定网站是否安装在 IIS7 中？

> ID：11041326
> 
> 赞同：19
> 
> 时间：2012-06-14T21:04:50.023
> 
> 标签：powershell, iis-7, tfsbuild

我对 powershell 很陌生，我正在尝试自动删除网站的早期版本，并将较新版本添加为 TFS 2010 构建模板（Windows 工作流 4.0）的一部分。是否可以使用powershell查看IIS7中是否存在网站或Web应用程序池？我试过运行以下命令：

```
import-module WebAdministration
Get-Website -Name "Default Web Site" 
```

输出列出了盒子上安装的所有网站，而不仅仅是默认网站。

```
Name             ID   State      Physical Path                  Bindings
-------------------------------------------------------------------------
Default Web Site 1    Started    %SystemDrive%\inetpub\wwwroot  http *:80:
                                                                net.tcp 808:*
                                                                net.pipe *
                                                                net.msmq localhost
                                                                msmq.formatname localhost 
MyWebsite1       2    Started    C:\inetpub\MyWebsite1          http *:80:mywebsite1.com
MyWebsite2       3    Started    C:\inetpub\MyWebsite2          http *:80:mywebsite2.com 
```

如果我尝试运行不带“-Name”参数的命令，结果完全相同。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-15T06:38:07.290

您可以使用 Test-Path 来检查网站和应用程序池：

```
Import-Module webadministration
$alias = "MyWebSite1"
$IISPath = "IIS:\Sites\Default Web Site\$alias"

if (Test-Path $IISPath) { Write-Host "$alias exists." }

$IISPath = "IIS:\AppPools"
cd $IISPath
if (Test-Path ".\MyAppPool") { Write-Host "MyAppPool exists." } 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-14T21:22:19.153

我只是注意到了同样的行为。似乎它没有按预期工作。但是，您可以自己滚动：

```
get-website | where-object { $_.name -eq 'MyWebsite1' } 
```

**这只是将get-website**返回的列表通过管道传输到**where-object** cmdlet 并返回该单个对象。

如果您是 PowerShell 新手，那么我推荐的[Master PowerShell 再合适不过](http://powershell.com/cs/blogs/ebookv2/default.aspx)了。

# java - 调整图像大小时颜色丢失

> ID：11041328
> 
> 赞同：1
> 
> 时间：2012-06-14T21:04:58.787
> 
> 标签：java, image, colors, awt, bufferedimage

我正在使用这种方法来更改图像大小：

```
private File resize(double scale, File file) throws IOException {
    double scaledSize = targetSize * scale;
    BufferedImage scaledImage = Scalr.resize(sourceImage, (int) scaledSize);

    Iterator<ImageWriter> iter = ImageIO.getImageWritersByFormatName(fileExt);
    ImageWriter writer = iter.next();
    ImageWriteParam iwp = writer.getDefaultWriteParam();
    iwp.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);
    iwp.setCompressionQuality(1);

    FileImageOutputStream output = new FileImageOutputStream(file);
    writer.setOutput(output);
    IIOImage image = new IIOImage(scaledImage, null, null);
    writer.write(null, image, iwp);
    writer.dispose();
    return file;
} 
```

似乎图像失去了颜色深度。如何设置与源图像相同的颜色深度？

# objective-c - 如何在内置输入（OSX Core Audio / Audio Unit）上设置输入电平（增益）？

> ID：11041335
> 
> 赞同：9
> 
> 时间：2012-06-14T21:05:14.987
> 
> 标签：objective-c, macos, core-audio, audiounit

我有一个使用音频单元记录音频数据的 OSX 应用程序。音频单元的输入可以设置为任何可用的输入源，包括内置输入。问题是，我从内置输入中获得的音频经常被削波，而在 Audacity（甚至 Quicktime）等程序中，我可以调低输入电平而不会削波。

当然，将样本帧乘以分数是行不通的，因为我得到的音量较低，但样本本身在输入时仍会被剪裁。

如何设置该内置输入的输入电平或增益以避免削波问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-17T07:17:56.923

这对我来说可以在我的 MacBook Pro（2011 型号）上设置输入音量。这有点古怪，我不得不尝试设置主通道音量，然后设置每个独立的立体声通道音量，直到找到一个有效的。查看我的代码中的注释，我怀疑判断您的代码是否有效的最佳方法是找到一个有效的 get/set-property 组合，然后执行 get/set（其他）/get 之类的操作来验证您的二传手正在工作。

哦，我当然会指出，我不会依赖地址中的值在 getProperty 调用中保持不变，就像我在这里所做的那样。它似乎有效，但是当您通过引用传递一个函数时，依赖结构值相同绝对是一种不好的做法。这当然是示例代码，所以请原谅我的懒惰。;)

```
//
//  main.c
//  testInputVolumeSetter
//

#include <CoreFoundation/CoreFoundation.h>
#include <CoreAudio/CoreAudio.h>

OSStatus setDefaultInputDeviceVolume( Float32 toVolume );

int main(int argc, const char * argv[]) {
    OSStatus                        err;

    // Load the Sound system preference, select a default
    // input device, set its volume to max.  Now set
    // breakpoints at each of these lines.  As you step over
    // them you'll see the input volume change in the Sound
    // preference panel.
    //
    // On my MacBook Pro setting the channel[ 1 ] volume
    // on the default microphone input device seems to do
    // the trick.  channel[ 0 ] reports that it works but
    // seems to have no effect and the master channel is
    // unsettable.
    //
    // I do not know how to tell which one will work so
    // probably the best thing to do is write your code
    // to call getProperty after you call setProperty to
    // determine which channel(s) work.
    err = setDefaultInputDeviceVolume( 0.0 );
    err = setDefaultInputDeviceVolume( 0.5 );
    err = setDefaultInputDeviceVolume( 1.0 );
}

// 0.0 == no volume, 1.0 == max volume
OSStatus setDefaultInputDeviceVolume( Float32 toVolume ) {
    AudioObjectPropertyAddress      address;
    AudioDeviceID                   deviceID;
    OSStatus                        err;
    UInt32                          size;
    UInt32                          channels[ 2 ];
    Float32                         volume;

    // get the default input device id
    address.mSelector = kAudioHardwarePropertyDefaultInputDevice;
    address.mScope = kAudioObjectPropertyScopeGlobal;
    address.mElement = kAudioObjectPropertyElementMaster;

    size = sizeof(deviceID);
    err = AudioObjectGetPropertyData( kAudioObjectSystemObject, &address, 0, nil, &size, &deviceID );

    // get the input device stereo channels
    if ( ! err ) {
        address.mSelector = kAudioDevicePropertyPreferredChannelsForStereo;
        address.mScope = kAudioDevicePropertyScopeInput;
        address.mElement = kAudioObjectPropertyElementWildcard;
        size = sizeof(channels);
        err = AudioObjectGetPropertyData( deviceID, &address, 0, nil, &size, &channels );
    }

    // run some tests to see what channels might respond to volume changes
    if ( ! err ) {
        Boolean                     hasProperty;

        address.mSelector = kAudioDevicePropertyVolumeScalar;
        address.mScope = kAudioDevicePropertyScopeInput;

        // On my MacBook Pro using the default microphone input:

        address.mElement = kAudioObjectPropertyElementMaster;
        // returns false, no VolumeScalar property for the master channel
        hasProperty = AudioObjectHasProperty( deviceID, &address );

        address.mElement = channels[ 0 ];
        // returns true, channel 0 has a VolumeScalar property
        hasProperty = AudioObjectHasProperty( deviceID, &address );

        address.mElement = channels[ 1 ];
        // returns true, channel 1 has a VolumeScalar property
        hasProperty = AudioObjectHasProperty( deviceID, &address );
    }

    // try to get the input volume
    if ( ! err ) {
        address.mSelector = kAudioDevicePropertyVolumeScalar;
        address.mScope = kAudioDevicePropertyScopeInput;

        size = sizeof(volume);
        address.mElement = kAudioObjectPropertyElementMaster;
        // returns an error which we expect since it reported not having the property
        err = AudioObjectGetPropertyData( deviceID, &address, 0, nil, &size, &volume );

        size = sizeof(volume);
        address.mElement = channels[ 0 ];
        // returns noErr, but says the volume is always zero (weird)
        err = AudioObjectGetPropertyData( deviceID, &address, 0, nil, &size, &volume );

        size = sizeof(volume);
        address.mElement = channels[ 1 ];
        // returns noErr, but returns the correct volume!
        err = AudioObjectGetPropertyData( deviceID, &address, 0, nil, &size, &volume );
    }

    // try to set the input volume
    if ( ! err ) {
        address.mSelector = kAudioDevicePropertyVolumeScalar;
        address.mScope = kAudioDevicePropertyScopeInput;

        size = sizeof(volume);

        if ( toVolume < 0.0 ) volume = 0.0;
        else if ( toVolume > 1.0 ) volume = 1.0;
        else volume = toVolume;

        address.mElement = kAudioObjectPropertyElementMaster;
        // returns an error which we expect since it reported not having the property
        err = AudioObjectSetPropertyData( deviceID, &address, 0, nil, size, &volume );

        address.mElement = channels[ 0 ];
        // returns noErr, but doesn't affect my input gain
        err = AudioObjectSetPropertyData( deviceID, &address, 0, nil, size, &volume );

        address.mElement = channels[ 1 ];
        // success! correctly sets the input device volume.
        err = AudioObjectSetPropertyData( deviceID, &address, 0, nil, size, &volume );
    }

    return err;
} 
```

**编辑以回答您的问题，“[我] 怎么解决这个问题？”**

在过去五年左右的时间里，我花了很多时间使用 Apple 的音频代码，并且在涉及到哪里以及如何寻找解决方案时，我已经开发了一些直觉/过程。我和我的商业伙伴共同为第一代 iPhone 和其他一些设备编写了原始的 iHeartRadio 应用程序，我在该项目中的职责之一是音频部分，专门为 iOS 编写 AAC Shoutcast 流解码器/播放器。当时没有任何文档或开源示例，所以它涉及到大量的反复试验，我学到了很多东西。

无论如何，当我读到你的问题并看到赏金时，我认为这只是唾手可得的果实（即你没有 RTFM ;-)。我写了几行代码来设置音量属性，当这不起作用时，我真的很感兴趣。

过程方面，也许你会发现这很有用：

一旦我知道这不是一个直截了当的答案，我就开始考虑*如何*解决这个问题。我知道 Sound System Preference 可以让你设置输入增益，所以我开始用 otool 拆解它，看看 Apple 是在使用旧的还是新的 Audio Toolbox 例程（新的，因为它发生了）：

尝试使用：

`otool -tV /System/Library/PreferencePanes/Sound.prefPane/Contents/MacOS/Sound | bbedit`

然后搜索`Audio`以查看调用了哪些方法（如果您没有 bbedit，每个 Mac 开发人员都应该 IMO，将其转储到文件并在其他文本编辑器中打开）。

我最熟悉旧的、已弃用的音频工具箱例程（在这个行业中过时三年），所以我查看了一些来自 Apple 的技术说明。他们有一个显示如何使用最新的 CoreAudio 方法获取默认输入设备并设置其音量的方法，但您无疑看到他们的代码无法正常工作（至少在我的 MBP 上）。

一旦我达到了这一点，我就回到了久经考验的方法：开始在谷歌上搜索可能涉及的关键字（例如`AudioObjectSetPropertyData`，`kAudioDevicePropertyVolumeScalar`等），以寻找示例用法。

我发现关于 CoreAudio 和使用 Apple Toolbox 的一件有趣的事情是，有*很多*开源代码可供人们尝试各种事情（大量的 pastebin 和 GoogleCode 项目等）。如果您愿意深入研究这些代码，您通常会直接找到答案或获得一些非常好的想法。

在我的搜索中，我发现最相关的东西是 Apple 技术说明，它展示了如何使用新的 Toolbox 例程获取默认输入设备并设置主输入增益（即使它在我的硬件上不起作用），我找到了一些代码显示在输出设备上按通道设置增益。由于输入设备可以是多通道的，我认为这是下一个合乎逻辑的尝试。

您的问题非常好，因为至少现在 Apple 没有正确的文档显示如何执行您所要求的操作。这也很愚蠢，因为两个通道都报告说他们设置了音量，但显然只有一个设置了（输入麦克风是单声道源，所以这并不奇怪，但我认为有一个无操作通道并且没有关于它的文档苹果上的一个错误）。

当您开始使用 Apple 的尖端技术时，这种情况会始终如一地发生。你可以用他们的工具箱做一些了不起的事情，它把我在水中工作过的所有其他操作系统都搞砸了，但不需要太长时间就能领先于他们的文档，特别是如果你正在尝试做任何适度复杂的事情。

例如，如果您决定编写内核驱动程序，您会发现 IOKit 上的文档严重不足。最终，您必须上网并挖掘源代码，无论是其他人的项目还是 OS X 源代码或两者兼而有之，很快您就会得出结论，正如我所拥有的那样，源代码确实是获得答案的最佳位置（即使 StackOverflow非常棒）。

感谢您的积分并祝您项目好运:)

# cocos2d-iphone - ccscene arc 和 autorelease

> ID：11041336
> 
> 赞同：0
> 
> 时间：2012-06-14T21:05:15.200
> 
> 标签：cocos2d-iphone

我正在尝试在我的 GameManager 单例初始化中构建一些场景。

场景是通过创建的

```
 - (id)init
    {
        self = [super init];
        if (self) {        // 'mainScene' is an autorelease object.
        mainScene = [CCScene node];  
...  
    } 
```

GameManger 强烈引用 mainScene：

```
@interface GameManager : NSObject
{
    CCScene* mainScene;
} 
```

但是，如果我稍后尝试用

```
[[CCDirector sharedDirector] pushScene:mainScene]; 
```

我得到 EXC_BAD_ACCESS

如果我创建并立即推送，那么一切正常。默认的 __strong 引用不应该保持分配的对象吗？

提前感谢您的帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:31:52.893

想通了... [CCScene node] 是一个方便的工厂方法，它可以： [[[self alloc] init] autorelease];

但是因为我使用的是弧...我不想要那个 - 我想要

```
mainScene = [[CCScene alloc]init]; 
```

代替

```
mainScene = [CCScene node]; 
```

# jquery - 动态附加表格元素的绑定

> ID：11041339
> 
> 赞同：0
> 
> 时间：2012-06-14T21:05:25.060
> 
> 标签：jquery, jquery-ui

我创建了一个由 JSON 数据填充的表，因此表中的每一行。表布局是 `<table id="custServMainTable"> <tbody> </tbody> </table>`

我用 JQuery 附加元素，代码位于页面底部

```
$('#custServMainTable tbody').append("<tr class='custCell grey'>
<td>info</td></tr>"); 
```

元素的附加工作正常。我遇到的问题是，当我尝试运行悬停来更改背景颜色时

```
$('.grey').hover(function() {
        $(this).css('background-color', '#FDBB73');}, 
        function() {$(this).css('background-color', '#EFEFEF');
    }); 
```

尝试过的方法

```
 $('.grey').on("hover", function(event) {
        $(this).css('background-color', '#FDBB73');}, 
        function() {$(this).css('background-color', '#EFEFEF');
    }); 
```

我试图在悬停时突出显示一行。它不适用于我尝试过的方法。我以前使用相同的代码来静态创建表。我尝试过使用悬停功能“打开”和“绑定”，但没有成功。其他类似情况的示例建议使用 live，现在已弃用。有人建议将“on”上移一级，但这并没有取得任何成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T21:08:24.300

`.on()`没有悬停选项。您可能想尝试：

```
 $('body').on('mouseenter', '.grey', function() {
   $(this).css('background-color', '#FDBB73');}
});
$('body').on('mouseleave', '.grey', function() {
   $(this).css('background-color', '#EFEFEF');
}); 
```

# javafx-2 - 定期更新 JavaFX 2 GUI？

> ID：11041343
> 
> 赞同：1
> 
> 时间：2012-06-14T21:05:54.963
> 
> 标签：javafx-2

在过去的 24 小时里，我一直在尝试学习 JavaFX。我正在尝试构建一个显示来自数据源（例如数据库）的值的 GUI。我的问题是首选方法是什么。到目前为止，我已经提出了这段代码来构建一个简单的 GUI 并从数据源获取一些数据：

```
import javafx.application.Application;
import javafx.application.Platform;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.text.Text;
import javafx.stage.Stage;

public class AvcHmi extends Application {
    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) {  
        Text t = new Text(10, 50, "Replace/update this text periodically with data");       

        Group root = new Group();
        root.getChildren().add(t);

        primaryStage.setScene(new Scene(root, 400, 300));
        primaryStage.show();

        new Thread() {
            private DataSource dataSource = new DataSource();

            { setDaemon(true); }

            @Override
            public void run() {
                try {
                    for(;;) {
                        Thread.sleep(100);

                        Platform.runLater(new Runnable() {
                            @Override
                            public void run() {
                                     System.out.println(dataSource.getDataMap().get("key1"));                                
                        }});
                    }
                } catch(InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }.start();
    }
} 
```

**数据源：**

```
import java.util.HashMap;
import java.util.Map;
import java.util.Random;

public class DataSource {
    Map<String,String> dataMap = new HashMap<>();

    public DataSource() {
        dataMap.put("key1", "value1");
        dataMap.put("key2", "value2");
        dataMap.put("key3", "value3");
    }

    public Map<String, String> getDataMap() {
        Random generator = new Random();
        int randInt = generator.nextInt();
        dataMap.put("key1", "value"+randInt);
        return dataMap;
    }  
} 
```

就我而言，100 毫秒是可以更新此 GUI 的时间间隔。但这是一个可行的解决方案吗？

下一步是用数据源中的值替换文本。一直在查看 Collections 和 ObservableMap 并想知道它是否是进行实际 GUI 更新的首选方式？我在内部类和最终变量方面遇到了一些问题，但可能会在经过一段时间的睡眠后解决。

此外，目标机器不是那么强大（介于 350-512 mb RAM 之间）。这可能是一个问题吗？到目前为止，我的简单测试似乎运行良好。

感谢您对此的任何反馈。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-06-18T07:48:48.897

[这个Oracle例子](http://download.oracle.com/otndocs/products/javafx/2/samples/Ensemble/index.html#SAMPLES/Concurrency/Task)展示了如何在数据表中实现并发加载，带有源代码；它可能会帮助你

您还可以阅读有关`javafx.concurrent.Task<V>`API 的信息。

Oracle示例上的代码如下：

```
public class UpdateCustomerTask extends Task<Customer> {
         private final Customer customer;

         public UpdateCustomerTask(Customer customer) {
             this.customer = customer;
         }

         @Override protected Customer call() throws Exception {
             // pseudo-code:
             //   query the database
             //   read the values

             // Now update the customer
             Platform.runLater(new Runnable() {
                 @Override public void run() {
                     customer.setF setFirstName(rs.getString("FirstName"));
                     // etc
                 }
             });

             return customer;
         }
     } 
```

# c# - 在 Web 开发中正确使用类

> ID：11041344
> 
> 赞同：0
> 
> 时间：2012-06-14T21:05:58.277
> 
> 标签：c#, visual-studio-2010, web

我曾经写过winforms，现在我正在尝试将我的一些应用程序移植到网络界面，但我的应用程序似乎无法正常工作，尽管我班级中的代码没有改变。

我从来没有做过网络开发，所以我想知道这是否是我做错的事情？

我在我的 runEbay.aspx 中使用此代码

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="runEbay.aspx.cs" Inherits="eBay_Item_Scanner.runEbay" %>

<div>
    <a href="Default.aspx">Home</a> | <a href="runEbay.aspx">Run Full eBay Scan WARNING!!!!!!!
    </a>
</div>
<%
    string MAINPN = Request["MAINPN"] != null ? Request["MAINPN"] : "";
    string EBAYCATEGORYTOSCAN = Request["EBAYCATEGORYTOSCAN"] != null ? Request["EBAYCATEGORYTOSCAN"] : "";

    Response.Write("<br>MAINPN: " + MAINPN);
    Response.Write("<br>EBAYCATEGORYTOSCAN: " + EBAYCATEGORYTOSCAN);

    //create instance of class Program    
    eBay_Item_Scanner.Program eb = new eBay_Item_Scanner.Program();

    if (SUBPN.Length > 0)
    {
        String query = @"my query using some request parameters";

        //call functions from another class
        eb.getEbay_com_API(query, EBAYCATEGORYTOSCAN);
    }    
    Response.Write("<br><br>Scanning is done");          
%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T21:29:36.747

好的; 问题是我的函数太大而且它们使 IIS 超时。我删除了超时并解决了问题。

# opengl - 我对 OpenGL 推送/弹出矩阵的理解是错误的吗？

> ID：11041347
> 
> 赞同：2
> 
> 时间：2012-06-14T21:06:14.447
> 
> 标签：opengl, matrix, drawing, translation

我在 OpenGL 中偶然发现了一个我无法解释的问题，除非我以某种方式误解了`glPushMatrix()`/是如何`glPopMatrix()`工作的。

下面的两段代码不应该有完全相同的效果吗？

```
 glPushMatrix();
  glVertex3f(0,0,0);
  glTranslatef(c->e->coords[0], c->e->coords[1], c->e->coords[2]);
  glPopMatrix(); 
```

对比

```
 glVertex3f(c->e->coords[0], c->e->coords[1], c->e->coords[2]); 
```

在我的应用程序中，只有当我使用第二个时，我才能看到任何东西。我尝试在代码中完全相同的位置使用两段代码，没有改变任何其他内容，而带有推送/弹出矩阵的代码不会在屏幕上绘制任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T21:13:13.377

您不能`glPushMatrix()/PopMatrix()`在`glBegin()/glEnd()`块内调用。

[`glBegin()`](http://www.opengl.org/sdk/docs/man/xhtml/glBegin.xml)：

> 在 glBegin 和 glEnd 之间只能使用 GL 命令的子集。这些命令是 glVertex、glColor、glSecondaryColor、glIndex、glNormal、glFogCoord、glTexCoord、glMultiTexCoord、glVertexAttrib、glEvalCoord、glEvalPoint、glArrayElement、glMaterial 和 glEdgeFlag。此外，可以使用 glCallList 或 glCallLists 来执行仅包含上述命令的显示列表。如果在 glBegin 和 glEnd 之间执行了任何其他 GL 命令，则设置错误标志并忽略该命令。

建议：使用[顶点数组](http://www.opengl.org/wiki/Vertex_Arrays)或[顶点缓冲区对象](http://www.opengl.org/wiki/Vertex_Buffer_Object)而不是经典的立即模式`glBegin()/glEnd()`块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T21:28:55.357

这里有几个问题。首先，您不能将矩阵运算与顶点运算混合在一起——我假设这是速记并且您跳过了 glBegin()/glEnd()。但主要问题是您在翻译之前在原点发送了顶点。颠倒这两行，你应该得到想要的结果。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-14T21:12:18.780

你很接近，但我认为你应该在你的第一个片段中交换 glVertex/glTranslate 的顺序。

当您调用 glVertex 时，它会使用堆栈顶部的当前矩阵进行绘制。调用 translate 仅影响绘制的后续顶点；您不能移动已提交的顶点。

# java - 一个项目 - 多个项目

> ID：11041353
> 
> 赞同：1
> 
> 时间：2012-06-14T21:06:40.390
> 
> 标签：java, eclipse, project, packages, main

我正在使用 Java 编写具有多个程序的中型产品。

您可以将此项目视为 MMOG，具有服务器端、客户端和其他程序。

由于 Java 有项目和包的概念，我可以将所有内容放在一个项目中但由包分隔吗？还是我必须为每个单独的程序求助于一个项目？

如果有办法将所有内容放在一起，那就太好了，因为现在我收到“找不到主要”错误。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:10:47.893

您可以将它们全部放在一个带有包的项目中，只要您在每个包的类中都有一个 main 函数。但是，当您构建项目时，它会遍历所有内容，如果您决定导出，所有内容都将包含在 jar 文件中。另一方面，如果你把它们分成项目，一切都会整洁干净。它们将是分开的，您可以单独导出它们，但是，如果项目需要相互访问，您必须确保将每个项目包含在依赖项目的构建路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:11:08.773

是的，将大型产品分成多个项目是很常见的。在 Eclipse 中，您可以将项目添加到构建路径中。右键单击“主”项目，选择“构建路径”>“配置构建路径”，然后单击“项目”选项卡。在那里，您将看到将所需项目添加到构建路径的选项。

# c++ - 更改文本文件中的值 c++

> ID：11041355
> 
> 赞同：3
> 
> 时间：2012-06-14T21:06:54.650
> 
> 标签：c++, text-files

我想知道是否有办法在您阅读时更改文本文件的特定行。我正在创建一个 ATM 程序，我想在他们提取或存入某些东西时更改个人账户中的金额。我有一个用于用户名、密码和余额的文本文件，但我只想更改余额。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T21:11:04.443

由于这是家庭作业，因此我将简要概述您应该在这里做什么。

您可以读入文件，找到余额，更改它，然后将文件写回。

可以使用 ifstream 来读取文件，您可能想要使用的函数是[getline](http://www.cplusplus.com/reference/iostream/istream/getline/)。

然后，您可以使用[ofstream](http://www.cplusplus.com/reference/iostream/ofstream/)将其写回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T21:11:28.157

仅当更改的文本与原始文本具有相同的字节长度时，才可能更改文本文件中的行。如果不能保证这一点（听起来你的作业肯定就是这种情况），当文件很小时，一种特别有效的常用方法是创建一个临时文件，将新内容写入其中，然后交换文件，并删除原件。这种方法的一个优点是，如果写入操作在中间停止，您的文件不会损坏：临时文件损坏，而原始文件保持不变。

# php - 如何构建访问在线脚本的程序

> ID：11041357
> 
> 赞同：0
> 
> 时间：2012-06-14T21:06:57.987
> 
> 标签：php, c++

我想编写一个程序来在线联系 PHP 脚本，并显示 HTML 输出。基本上，它将是一个只访问编程 URL 的浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:09:45.483

你不需要程序。只需将 URL 作为文件执行。在 Windows 中，这将打开浏览器。如果您至少需要运送一些东西，请运送一个包含以下内容的 BAT 文件：

```
@start http://www.mysite.com/ 
```

内置`start`命令的意思是“为指定的参数找到正确的可执行文件并调用它，将参数传递给它”。默认浏览器是注册来处理 http 模式的浏览器。

或者，您可以发送 URL 快捷方式。要制作一个，请在 IE 中打开该站点，然后从地址栏拖动到桌面。这将为您提供一个带有 .URL 扩展名的文件，您可以从 shell 或命令行“执行”该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:32:52.847

类似于 Seva 的答案，但与 Windows GUI 集成得更好。我会组装一个简单的 HTA，它使用 JavaScript 将所需的页面加载到 IFRAME 中。HTA 是可执行的，并提供一个简单的 GUI，它基本上是 IE，没有所有控件。

谷歌搜索“ [Microsoft HTA](http://www.google.com/search?client=ubuntu&channel=fs&q=microsoft%20hta&ie=utf-8&oe=utf-8&gl=uk) ”应该可以帮助您，显然您已经了解 HTML，因此将 HTA 放在一起将很容易，因为它只是 HTML 和一些 JavaScript 或 VBscript 中的脚本。

[http://technet.microsoft.com/en-us/scriptcenter/dd742317.aspx](http://technet.microsoft.com/en-us/scriptcenter/dd742317.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:09:09.610

服务器上是否有 PHP 或 Python 或其他任何东西都没有关系，因为脚本以 HTML 形式提供它们的输出。您需要的是某种 HTTP 客户端库，例如[libcurl](http://curl.haxx.se/libcurl/)

# android - Android - 滚动视图中的内存不足异常

> ID：11041358
> 
> 赞同：0
> 
> 时间：2012-06-14T21:07:16.743
> 
> 标签：android, memory, camera, hardware, out-of-memory

我知道这一定是 SO 被问到最多的事情之一，但其他答案都没有给我一个解决方案。但是从阅读其他答案看来，我需要重新设计应用程序的工作方式。

就像这样，我们有一个 ScrollView，它会膨胀一些视图。在这种情况下不能使用 ListView，因为要按照我们想要的方式运行，就需要扩展 ListView，这是我们不想做的事情（尽管这似乎是我们当前方式的唯一解决方案显示项目，因为这个 OOM 异常）。列表每行可以有很多列，屏幕越大，它的列就越多。

每个膨胀视图都有一个布局，显示来自数据库的一些信息，包括一张图片。这张图片是通过字节数组存储的。这是使用设备相机拍摄的任何照片。目前每张照片（字节数组）占用 800kb 到 1mb，这对我来说似乎很多。现在该列表有 30 多个项目。一直拍到OOM，一共拍了6张（偶尔7张）。那将是 8mb-9mb 的数据。每次我去其他 Activity，然后回到 ScrollView 所在的 Activity 时，都需要重新填充列表。

这是 PopulateList 方法的片段：

```
if (item.getImg() != null) {

            if (App.debug) {

                Log.d(TAG, "Setting bmp.");
            }

            Bitmap bmp = App.byteArrayToBmp(item.getImg());

            imgV.setImageBitmap(bmp);
        } 
```

每个膨胀视图都会打开一个“高级对话框”，其中包含其他信息。也许图像可能会出现在列表中（这意味着只有 1 个位图，因为每个膨胀的视图都共享相同的高级对话框）。或者我可以扩展 ListView 并从它的回收方法中受益（这不是一个好的解决方案，因为我会考虑屏幕上可以有 6 个以上的项目）。困扰我的另一件事是每张图片都有 800kb。对于 128x128 来说似乎很多。

这是尺寸的设置：

```
cameraParams.setPictureSize(App.pxToDpi(128), App.pxToDpi(128));
cameraParams.setPictureFormat(PixelFormat.JPEG);

camera.setParameters(cameraParams);

public static int pxToDpi(int px) {

    final int scale = app.getApplicationContext().getResources().getDisplayMetrics().densityDpi;

    int pixels = (int) px * (scale / 160);

    return pixels;
} 
```

那么，您认为保留我的应用程序的当前模型是否可以解决我的问题，还是我需要重新制定？

编辑：位图方法：

```
public static Bitmap byteArrayToBmp(byte[] byteArray) {

    Bitmap img = null;

    BitmapFactory.Options opts = new BitmapFactory.Options();

    opts.inSampleSize = 2;

    img = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length, opts);

    return img;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:29:21.450

您可能想查看官方[Android 培训文档](http://developer.android.com/training/index.html)，它们刚刚更新：

通过课程查看[有效地显示位图：有效地](http://developer.android.com/training/displaying-bitmaps/index.html)[加载大型位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

基本上，您可以[使用 sampleSize 解码图像以将](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html#load-bitmap)其解码为您想要的宽度和高度：

```
public static int calculateInSampleSize(
            BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        } else {
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }
    }
    return inSampleSize;
} 
```

在上面的链接中进行了非常详细的解释

# php - 格式化电子邮件表单响应

> ID：11041361
> 
> 赞同：0
> 
> 时间：2012-06-14T21:07:27.457
> 
> 标签：php

我创建了一个使用此脚本的电子邮件表单：

```
<?php
foreach ($_POST as $field=>$value)
{
$formcontent .= "$field: $value\n";
}
$formcontent .= 'User-Agent: '.$_SERVER['HTTP_USER_AGENT'];

$recipient = "andrew.***y@***********.co.uk";
$subject = "Event feedback form";
$mailheader = "From: web.form@**********.co.uk\r\n";
$mailheader .= "Reply-To: $email\r\n";
$mailheader .= "MIME-Version: 1.0\r\n";

mail($recipient, $subject, $formcontent, $mailheader) or die("Failure!");
header("location:http://www.**********.co.uk");
?> 
```

这以非常容易逐行阅读的方式格式化邮件，但客户希望它看起来更像它来自的表单！即使我可以用水平规则将线条分开并对齐响应，这也是可行的——这甚至可能吗？

谢谢吉姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T21:13:55.943

您可以通过在标题中添加正确的行来创建 html 电子邮件。然后你可以添加表格、段落标签、行等等。请记住，电子邮件客户端无法呈现浏览器可以呈现的所有内容，因此请对 html 保持温和。

```
$mailHeader .= "Content-type: text/html; charset=iso-8859-1\r\n"; 
```

另外，请注意，您创建电子邮件的方式容易受到电子邮件注入漏洞的攻击。在这里阅读更多：[http ://www.phpsecure.info/v2/article/MailHeadersInject.en.php](http://www.phpsecure.info/v2/article/MailHeadersInject.en.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:15:22.787

如果您不能或不想在电子邮件中使用 HTML，您至少可以使用制表符来对齐文本，使其看起来更好一些。

```
$formcontent .= "$field:\t$value\n"; 
```

这将使输出看起来像这样：

```
Name:    sachleen
Email:   me@sachleen.com
Address: 123 fake st 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T21:15:52.930

您可以使用 html 表格对其进行格式化。

```
$mailHeader .= "Content-type: text/html; charset=iso-8859-1\r\n";
$formcontent .="<table border='1'>";
foreach ($_POST as $field => $value) {
  $formcontent .= "<tr>";
  $formcontent .= "<td>$field:</td> <td>$value</td>";
  $formcontent .= "</tr>";
}
$formcontent .= '<tr><td>User-Agent: </td><td>'.$_SERVER['HTTP_USER_AGENT'].'</td>';
$formcontent .= "</table>"; 
```

# c# - 使用 XtraScheduler 按特定自定义字段值获取约会

> ID：11041362
> 
> 赞同：4
> 
> 时间：2012-06-14T21:07:27.850
> 
> 标签：c#, winforms, devexpress

我目前正在使用计划程序控件从我的应用程序中的 SQL 数据库保存和恢复计划的约会数据。调度程序控件本身配置为使用几个自定义字段，如下所示：

```
private DevExpress.XtraScheduler.SchedulerControl _SchedulerControl;
private DevExpress.XtraScheduler.SchedulerControl StandingSchedulerControl
{
    get
    {
        if (_SchedulerControl == null)
        {
            _SchedulerControl = new DevExpress.XtraScheduler.SchedulerControl();

            BindingSource bs = new BindingSource();
            bs.DataSource = StandingOrderList;

            _SchedulerControl.Storage = new SchedulerStorage(this.components);
            _SchedulerControl.Storage.Appointments.AutoReload = true;
            _SchedulerControl.Storage.Appointments.Mappings.Subject = "Description";
            _SchedulerControl.Storage.Appointments.Mappings.RecurrenceInfo = "RecurrenceInfo";
            _SchedulerControl.Storage.Appointments.Mappings.Type = "Type";

            _SchedulerControl.Storage.Appointments.CustomFieldMappings.Add(new DevExpress.XtraScheduler.AppointmentCustomFieldMapping("Inactive", "Inactive"));
            _SchedulerControl.Storage.Appointments.CustomFieldMappings.Add(new DevExpress.XtraScheduler.AppointmentCustomFieldMapping("StandingOrderKEY", "StandingOrderKEY"));
            _SchedulerControl.Storage.Appointments.DataSource = bs;
            _SchedulerControl.EditRecurrentAppointmentFormShowing += new EditRecurrentAppointmentFormEventHandler(_SchedulerControl_EditRecurrentAppointmentFormShowing);
        }
        return _SchedulerControl;
    }
} 
```

其中“StandingOrderList”被定义为 StandingOrder 业务对象的列表。这样可以正确保存和恢复，但是在应用程序中可能只有一个“StandingOrderKEY”值，并且需要从该值获取存储中的 Appointment 对象。到目前为止，我的解决方案是这样的：

```
private Appointment GetAppointmentByStandingOrderKEY(Guid standingOrderKEY)
{
    Appointment findAppointment = StandingSchedulerControl.Storage.Appointments.Items.Find(appointment => (Guid)appointment.CustomFields["StandingOrderKEY"] == standingOrderKEY);
    return findAppointment;
} 
```

**但是**，StandingSchedulerControl.Storage.Appointments.Items 似乎只包含具有 Normal 或 Pattern 类型的约会，这意味着如果 StandingOrderKEY 与保存的 ChangedOccurrence 或 DeletedOccurrence 相关联，则将找不到相关的约会。

我已经验证了从列表中创建的 BindingSource 实际上包含所有约会的例外情况。似乎当它被设置为 AppointmentStorage 的 DataSource 时，异常被安置在他们的 Pattern 约会中，并且只能通过首先获取对父约会的引用然后在该约会上调用 GetExceptions() 并搜索为 StandingOrderKEY 生成的集合。然而，这是一个问题，因为目前我们没有“父母”约会的识别信息，只有一个例外。

因此，我的问题如下（大致按优先顺序排列）：

*   有没有办法通过自定义字段值从约会存储中获取约会对象，而忽略约会的类型？是否有一个包含异常和正常/模式约会的集合？
*   我们知道约会将是一个例外，因为约会的类型已经被存储了。有没有办法搜索此特定自定义字段值的所有异常？
*   有没有办法通过数据源引用从 Appointment 存储中获取 Appointment 对象？用作 DataSource 的 BindingSource 包含异常约会。给定 BindingSource 集合中的项目，有没有办法将其与 Storage 中的项目相关联？

欢迎任何其他建议。感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:10:27.237

您可以尝试通过该方法获取所有约会`GetAppointments()`，看看是否有所不同：

```
Appointment findAppointment = StandingSchedulerControl.Storage
    .GetAppointments(startDate, endDate)
    .FirstOrDefault(a => (Guid)a.CustomFields["standingOrderKEY"] == 
                         standingOrderKEY); 
```

我希望以这种方式获得您的约会将包括包括您正在搜索的项目的其他事件。

我不知道仅通过异常进行搜索的方法。

您的第三个问题是，鉴于 BindingSource 中的项目，您可以从 AppointmentStorage 中获取 Appointment 吗？这与第一个问题本质上是相同的问题：鉴于您的 BindingSource 项中包含的数据，您仍然必须搜索调度程序控件存储中的约会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:16:07.053

The eventual solution that I came to was maintaining my own mapping of standing order objects to appointments, as seen in this DevExpress solution here: [http://www.devexpress.com/Support/Center/p/E3143.aspx](http://www.devexpress.com/Support/Center/p/E3143.aspx)

This allowed me to obtain the appointment object from the source object, as in question 3 above.

# jquery - Fancybox 中的自定义复选框

> ID：11041363
> 
> 赞同：0
> 
> 时间：2012-06-14T21:07:31.723
> 
> 标签：jquery, fancybox, checkbox

我正在尝试在 Fancybox 中使用自定义复选框。它们出现但不起作用（不可检查）。

```
$(document).ready(function() {

    $("#fnc").live("click", function(){
        $.fancybox($("#hidediv").html(),{
          'speedIn'         : 600, 
          'speedOut'            : 200, 
          'overlayShow'     : false,
          'autoDimensions'  : false,
          'width'           : 620,
          'height'          : 'auto',
          'overlayShow'       : true,
          'overlayOpacity'    : 0.8,
          'overlayColor'      : '#ccc'

          });
$('.defaultP input').ezMark();
$('.customP input[type="checkbox"]').ezMark({checkboxCls: 'ez-checkbox-green', checkedCls: 'ez-checked-green'});
        }); 
}); 
```

有没有办法在 Fancybox 加载后再次触发 jQuery？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:21:55.413

```
My question is how to have custom checkboxes within Fancybox 
```

该问题的答案是“是”，可以在 fancybox 中使用自定义复选框（操作方法？继续阅读；）

关于`.live()`“从fancybox打开多个fancybox”的使用，最好改为使用`.on()`（虽然它需要jQuery 1.7+）。我猜想使用`.live()`（自 jQuery 1.7 起已弃用），`.click()`旨在动态添加元素到 DOM 以在 fancybox 中打开。

*“你不能从 fancybox 打开 Fancybox，除非你使用`.live()`”*不一定是真的，但是为了在 fancybox (v1.3.4) 中打开当前和/或动态添加的元素，在这个演示中我们将使用`.on()`一个常规的 fancybox`$(".selector").fancybox();`脚本（没有。`click()`）

这个，应该做的伎俩

```
$(document).ready(function() {
 $("body").on("focusin", function(){
  $("a.fancybox").fancybox({
   'speedIn': 600, 
   'speedOut': 200, 
   'overlayShow': false,
   'autoDimensions': false,
   'width': 620,
   'height': 'auto',
   'overlayShow': true,
   'overlayOpacity': 0.8,
   'overlayColor': '#ccc',
   'onCleanup': function() {
    var myContent = this.href;
    $(myContent).unwrap();
   }
  }); // fancybox
 }); // on
 $('.defaultP input').ezMark();
 $('.customP input[type="checkbox"]').ezMark({checkboxCls: 'ez-checkbox-green', checkedCls: 'ez-checked-green'});
}); // ready 
```

不相信我，看看它在[这里](http://www.picssel.com/playground/jquery/customCheckBox_16jun12.html)工作。在那个 DEMO 中，您还可以从 fancybox 中打开另一个 fancybox。

有关`focusin`用作`.on()`事件的更多信息，请查看[如何将 fancybox 绑定到动态添加的元素？](https://stackoverflow.com/a/9084293/1055987)其中还包括一个演示。

另请注意，我`onCleanup`在 jQuery`.unwrap()`方法中包含了该选项。由于我们使用的是“*内联*”内容，因此修复[了这个错误](http://groups.google.com/group/fancybox/browse_thread/thread/fab7b6d81a173b33)

# algorithm - 基于单一输入颜色生成类比配色方案的算法是什么？

> ID：11041368
> 
> 赞同：3
> 
> 时间：2012-06-14T21:08:01.023
> 
> 标签：algorithm, sass, color-scheme

我正在创建一个网站，因为我非常喜欢使用 SASS/Compass 来组织我的 CSS，所以我想到了让我的网站主题化的想法。

起初，我想简单地拥有一组表示主题调色板颜色的 8 个变量。接下来，所有 CSS 规则都将使用这些颜色，或者它的变亮/变暗版本（用于阴影、覆盖、渐变和发光）。

然后我想到了一个疯狂的想法，即拥有一个单一的主题基色，之后调色板的其余部分就是从中计算出来的。例如：

![在此处输入图像描述](../Images/4cbac197541f07da6bd870fa8ec200d8.png)

在这个工具中，我选择了一个单一的基色（圆圈内部的绿色），然后它基于它生成了一个完整的调色板（见右图），在这种情况下它是一个“模拟”配色方案。

我的问题是这个工具使用的算法是否可以在 SASS 中复制，这样我就可以有一个可配置的颜色，而 SASS 计算颜色方案的其余部分。

我知道你们中的一些人可能会怀疑这个练习的用处，但我认为这是一个有趣的实验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:08:13.763

一方面，那个色轮是不正确的。红色的补色是青色，而不是绿色。此外，正确的术语是“类比”，而不是“类比”。我个人认为[这个网站](http://www.colorsontheweb.com/colorwizard.asp)更好。

要创建一个基本的类似配色方案，您需要拥有的第一件事是将颜色转换为 HSL（或类似的基于色调）形式的方法。假设你有这个，类似的 3 色方案的基本算法是：

```
Inputs: BaseColor, HueVariation

Color1 = BaseColor
Color2 = ColorFromHSL(Hue(BaseColor) + HueVariation, Saturation(BaseColor), Lightness(BaseColor))
Color3 = ColorFromHSL(Hue(BaseColor) - HueVariation, Saturation(BaseColor), Lightness(BaseColor)) 
```

[维基百科](http://en.wikipedia.org/wiki/Color_scheme#Analogous_color_scheme)有更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:26:14.733

您正在寻找的是色彩和谐。有许多预定义的方案可以帮助您生成这样的和声。通常，它们基于 HSL 颜色空间而不是 RGB 颜色空间。

这是您可以使用的链接：

[http://www.tigercolor.com/color-lab/color-theory/color-harmonies.htm](http://www.tigercolor.com/color-lab/color-theory/color-harmonies.htm)

[http://sputnik.freewisdom.org/lib/colors/](http://sputnik.freewisdom.org/lib/colors/)

您可能还想尝试在 google 中搜索其他方案。

大多数情况下，方案适用于任何给定的输入颜色，因此您可以为一种颜色创建自定义方案并将其应用于另一组颜色。

# jquery - 带标签的动态输入宽度

> ID：11041373
> 
> 赞同：0
> 
> 时间：2012-06-14T21:08:19.267
> 
> 标签：jquery, html, css, ruby-on-rails

我正在尝试创建动态宽度字段输入，以便它们延伸到 div 的宽度。

如果单行有两个输入，它们将动态分割可用空间以填充 100% 的 div。

如果一行只有一个输入，它将填满整个宽度。

问题是标签宽度和输入宽度都是未知的（响应式网页设计）。

令人惊讶的是，这很难与我确定它的普遍性有关。

[http://imagepaste.nullnetwork.net/img/1339700574Screen%20Shot%202012-06-14%20at%203.04.59%20PM.png](http://imagepaste.nullnetwork.net/img/1339700574Screen%20Shot%202012-06-14%20at%203.04.59%20PM.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:20:44.163

使用 JsFiddle 进行一些快速测试（顺便说一句，请发布示例代码，以便我们可以看到您到目前为止所做的事情）给了我这个：

```
<div style="width:100%;border:1px solid gold;">
    <div style="width:100%; border:1px solid silver;">
        <div style="float:left;width:45%">In1 <input style="width:90%;"></div>
        <div style="float:right;width:45%">In2 <input style="width:90%;"></div>
    </div>
    <div style="clear:both;width:100%;border:1px solid silver;">
        <div style="float:left;width:20%">In1 <input style="width:90%;"></div>
        <div style="float:left;width:20%">In2 <input style="width:90%;"></div>
        <div style="float:right;width:20%">In3 <input style="width:90%;"></div>
    </div>
</div>

<div style="clear:both">&nbsp;</div>

<table style="width:100%;border:1px solid gold;">
    <tr>
        <td style="width:49%;border:1px solid silver;">In1 <input style="width:60%"></td>
        <td style="width:49%;border:1px solid silver;">In2 <input style="width:60%"></td>
    </tr>
</table>
<table style="width:100%;border:1px solid gold;">
    <tr>
        <td style="width:29%;border:1px solid silver;">In1 <input style="width:60%"></td>
        <td style="width:29%;border:1px solid silver;">In2 <input style="width:60%"></td>
        <td style="width:29%;border:1px solid silver;">In2 <input style="width:60%"></td>
    </tr>
</table> 
```

[在这里](http://jsfiddle.net/9BLdS/)看到它。正如您所看到的，这两个版本都不完全正确，但是像往常一样，基于表格的布局更加健壮，即使在[进一步](http://jsfiddle.net/9BLdS/14/)搞砸之后，我也无法让三列集正常工作，但使用表格很容易。

最重要的是计算百分比。当您使用 JS 时，这应该是相当简单的。但是，如果标签也可以变化，这将使计算变得相当复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:36:06.073

是的，使用 jQuery，您可以计算 div 中输入元素的数量，并相应地调整元素的宽度。

您可以使用`length`orso`size()`确定元素的数量，然后设置 css 来做同样的事情

这是一个粗略的模型：http: [//jsfiddle.net/6CqKK/](http://jsfiddle.net/6CqKK/)

# sql - sql正则表达式删除非xml字符

> ID：11041377
> 
> 赞同：0
> 
> 时间：2012-06-14T21:08:29.987
> 
> 标签：sql, xml, regex

我正在寻找一个 SQL 查询，它可以删除所有非 xml 字符，即字符

```
#x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF] 
```

从我的行。

我可以使用[http://www.simple-talk.com/sql/t-sql-programming/tsql-regular-expression-workbench/](http://www.simple-talk.com/sql/t-sql-programming/tsql-regular-expression-workbench/)创建正则表达式替换用户定义的函数。但是我很难编写正则表达式来定位非 xml 字符。我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:32:45.033

```
[^\u0009\u000A\u000D\u0020-\uD7FF\uE000-\uFFFD\u10000-\u10FFFF] 
```

我是怎么做到的？

*   在 .net 正则表达式引擎中，您可以将 Unicode 字符编码为 \uxxxx

*   如果你放 ^ 你会创建一个否定字符类，这意味着它将匹配不在该列表中的所有内容（我假设你想要这个，但你的问题并不是 100% 清楚）

如果您用空字符串替换这些匹配项，您将过滤掉“非法”字符。

# java - 将类作为参数传递给java中的方法

> ID：11041378
> 
> 赞同：1
> 
> 时间：2012-06-14T21:08:35.743
> 
> 标签：java, class, object, methods

我试图创建一个创建类的新对象的方法，但我希望能够创建许多不同类的对象，因此为每个类创建一个方法对我不起作用。有什么办法可以将一个类传递给一个方法，以便可以创建一个新对象？我所有的类都有相同的构造函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T21:12:01.743

你可以使用

```
public <T> T instanciate(Class<? extends T> clazz) throws Exception {
    return clazz.newInstance();
} 
```

并称它为

```
MyObject o = instanciate(MyObject.class); 
```

如果你这样做，你想要实例化的类必须有一个没有参数的默认构造函数。否则，您将捕获一个`java.lang.InstantiationException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:10:29.900

你读过[抽象工厂模式](http://en.wikipedia.org/wiki/Abstract_factory_pattern)吗？

已编辑

顺便说一句，我认为反射不是构建架构的好方法，如果您有很多具有相同构造函数的类，请尝试使用有用的模式，如 Factory 或 Builder，而不是使用反射创建一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:11:07.347

您可以对类型名称使用反射[并](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)`switch`做您必须做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T21:11:30.540

我相信你正在寻找反思。

看看这个问题：[什么是反射，它为什么有用？](https://stackoverflow.com/questions/37628/what-is-reflection-and-why-is-it-useful)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T21:11:48.843

我认为[Class.forName](http://www.xyzws.com/Javafaq/what-does-classforname-method-do/17)可能是您正在寻找的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-22T08:02:23.507

> 包 com.loknath.lab；
> 
> 公共类 HasHash {
> 
> 公共静态 void main(String[] args) 抛出异常 {
> 
> ```
>  HasHash h = createInstance(HasHash.class);      
>             h.display(); 
> ```
> 
> } //返回@parameter类的实例
> 
> public static T createInstance(Class className) throws Exception { return className.newInstance(); }
> 
> private void display() { System.out.println("Disply"); }
> 
> }

# database - Wordpress：解释数据库中的插件和主题字符串值

> ID：11041390
> 
> 赞同：0
> 
> 时间：2012-06-14T21:09:34.633
> 
> 标签：database, wordpress, wordpress-theming

我已经安装了 wordpress，并且我已经安装了几个插件，并且我已经有了两个主题。

我今天要问的是：数据库中的插件和主题字符串值是什么意思？

示例 [当插件处于活动状态时]，表中有一个值：

```
a:3:{i:0;s:19:"akismet/akismet.php";i:1;s:9:"hello.php";i:2;s:37:"one-click-logout/one-click-logout.php";} 
```

示例 [当 Themes 文件夹中有主题时] ，表中有一个值：

```
 a:2:{s:12:"twentyeleven";s:7:"/themes";s:9:"twentyten";s:7:"/themes";} 
```

[我可以从HERE](https://wordpress.stackexchange.com/questions/45109/how-to-make-sense-of-the-active-plugins-option-value-to-enable-and-disable-certa)得到关于“a”和“i”是什么意思的解释，但“s:”是我不知道它是什么意思的意思。如果我尝试将 s:37 更改为 s:6 或任何其他值，则插件将被停用，因此 s:37 <<< 37 必须以某种方式表示或与插件相关，这就是我正在尝试的找出答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:58:39.833

's'+number 只是字符数。

所以*s:12:"twentyeleven"*表示长度为 12 的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:20:18.747

我建议在[WordPress Answers](http://wordpress.stackexchange.com)而不是在这里问这个。这是一个非常专业的问题。

WordPress 的全部意义在于您不需要深入了解数据库的内容 - 事实上，由于数据可能会在版本之间发生变化，因此非常不鼓励这样做。

WordPress 拥有大量的 API 函数，允许您利用它的强大功能，而无需深入了解数据库的复杂性。这是它的主要优势之一。

即使是 WordPress 程序员或主题设计师，您也永远不需要这些信息。如果您打算编写/修改 WordPress 本身的源代码，您只需要知道它，在这种情况下，您肯定是在错误的地方。

# php - 编译一个 .php 文件，它从另一个 php 文件中获取 4 个参数？

> ID：11041399
> 
> 赞同：0
> 
> 时间：2012-06-14T21:10:20.780
> 
> 标签：php

我有一个脚本，当从终端编译时，在终端上传递类似“php compile.php arg1 arg2 arg3 arg4”的参数开始显示输出结果，类似于 1）创建的文件 2）文件包含。等等

现在我正在尝试使用另一个 php 文件中的 system(php compile.php arg1 arg2 arg3 arg4)，但它不会执行 php 文件或不会显示输出。

例如，我什至尝试创建 hello.php----- 并尝试使用 system(php hello.php); 但它没有在浏览器上输出任何内容。

谁能帮帮我，我是php新手。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:27:39.860

确保您对系统调用的错误做出反应。您的实际代码也可能有所帮助。以下示例在我的盒子上没有问题。

```
<?php

$file = fopen('/tmp/written.php', 'w');

fwrite($file, '<?php echo "Hello from written.php\n"; ?>');
fclose($file);

echo "calling written.php\n";
if (!system('php /tmp/written.php'))
    die("something wrong\n");
else
    exit("all good\n");

?> 
```

# python - 为什么 dict.get(key) 而不是 dict[key]？

> ID：11041405
> 
> 赞同：925
> 
> 时间：2012-06-14T21:10:39.030
> 
> 标签：python, dictionary

今天，我遇到了一个`dict`方法`get`，它给定字典中的键，返回关联的值。

这个功能有什么用？如果我想在字典中找到与键关联的值，我可以这样做`dict[key]`，它会返回相同的内容：

```
dictionary = {"Name": "Harry", "Age": 17}
dictionary["Name"]
dictionary.get("Name") 
```

* * *

## 回答 #1

> 赞同：1372
> 
> 时间：2012-06-14T21:12:12.963

如果缺少键，它允许您提供默认值：

```
dictionary.get("bogus", default_value) 
```

返回`default_value`（无论您选择什么），而

```
dictionary["bogus"] 
```

会提出一个`KeyError`.

如果省略, `default_value`is `None`, 这样

```
dictionary.get("bogus")  # <-- No default specified -- defaults to None 
```

返回`None`就像

```
dictionary.get("bogus", None) 
```

将。

* * *

## 回答 #2

> 赞同：213
> 
> 时间：2016-06-22T12:48:42.317

> **方法是什么`dict.get()`？**

如前所述，该`get`方法包含一个指示缺失值的附加参数。[从文档](https://docs.python.org/3/library/stdtypes.html#dict.get)

> ```
> get(key[, default]) 
> ```
> 
> 如果键在字典中，则返回键的值，否则返回默认值。如果未给出默认值，则默认为无，因此此方法永远不会引发`KeyError`.

一个例子可以是

```
>>> d = {1:2,2:3}
>>> d[1]
2
>>> d.get(1)
2
>>> d.get(3)
>>> repr(d.get(3))
'None'
>>> d.get(3,1)
1 
```

> **任何地方都有速度改进吗？**

[正如这里](https://wiki.python.org/moin/PythonSpeed/PerformanceTips)提到的，

> 似乎所有三种方法现在都表现出相似的性能（彼此相差约 10%），或多或少独立于单词列表的属性。

之前`get`的速度要慢得多，但是现在速度几乎可以与返回默认值的额外优势相媲美。但是为了清除我们所有的查询，我们可以在一个相当大的列表上进行测试（注意，测试只包括查找所有有效的键）

```
def getway(d):
    for i in range(100):
        s = d.get(i)

def lookup(d):
    for i in range(100):
        s = d[i] 
```

现在使用这两个函数计时[`timeit`](https://docs.python.org/3/library/timeit.html)

```
>>> import timeit
>>> print(timeit.timeit("getway({i:i for i in range(100)})","from __main__ import getway"))
20.2124660015
>>> print(timeit.timeit("lookup({i:i for i in range(100)})","from __main__ import lookup"))
16.16223979 
```

正如我们所见，查找比获取更快，因为没有函数查找。这可以通过[`dis`](https://docs.python.org/3/library/dis.html)

```
>>> def lookup(d,val):
...     return d[val]
... 
>>> def getway(d,val):
...     return d.get(val)
... 
>>> dis.dis(getway)
  2           0 LOAD_FAST                0 (d)
              3 LOAD_ATTR                0 (get)
              6 LOAD_FAST                1 (val)
              9 CALL_FUNCTION            1
             12 RETURN_VALUE        
>>> dis.dis(lookup)
  2           0 LOAD_FAST                0 (d)
              3 LOAD_FAST                1 (val)
              6 BINARY_SUBSCR       
              7 RETURN_VALUE 
```

> **它将在哪里有用？**

每当您要在查找字典时提供默认值时，它都会很有用。这减少了

```
 if key in dic:
      val = dic[key]
 else:
      val = def_val 
```

到单行，`val = dic.get(key,def_val)`

> **它在哪里没有用处？**

每当您想返回一个`KeyError`说明特定密钥不可用的声明时。返回默认值也会带来特定默认值也可能是键的风险！

> **是否有可能具有`get`类似的功能`dict['key']`？**

是的！我们需要[`__missing__`](https://docs.python.org/3/reference/datamodel.html#object.__missing__)在 dict 子类中实现。

一个示例程序可以是

```
class MyDict(dict):
    def __missing__(self, key):
        return None 
```

一个小示范可以

```
>>> my_d = MyDict({1:2,2:3})
>>> my_d[1]
2
>>> my_d[3]
>>> repr(my_d[3])
'None' 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-06-14T21:16:38.543

`get`接受第二个可选值。如果您的字典中不存在指定的键，则将返回此值。

```
dictionary = {"Name": "Harry", "Age": 17}
dictionary.get('Year', 'No available data')
>> 'No available data' 
```

如果不给第二个参数，`None`会返回。

如果您使用 in 中的索引`dictionary['Year']`，则将引发不存在的键`KeyError`。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2015-07-11T23:52:10.350

我将给出一个使用 python 抓取 web 数据的实际示例，很多时候你会得到没有值的键，在这些情况下，如果你使用 dictionary['key']，你会得到错误，而 dictionary.get('key ', 'return_otherwise') 没有问题。

同样，如果您尝试从列表中捕获单个值，我将使用 ''.join(list) 而不是 list[0] 。

希望能帮助到你。

[编辑] 这是一个实际的例子：

假设您正在调用一个 API，该 API 返回一个您需要解析的 JOSN 文件。第一个 JSON 如下所示：

```
{"bids":{"id":16210506,"submitdate":"2011-10-16 15:53:25","submitdate_f":"10\/16\/2011 at 21:53 CEST","submitdate_f2":"p\u0159ed 2 lety","submitdate_ts":1318794805,"users_id":"2674360","project_id":"1250499"}} 
```

第二个JOSN是这样的：

```
{"bids":{"id":16210506,"submitdate":"2011-10-16 15:53:25","submitdate_f":"10\/16\/2011 at 21:53 CEST","submitdate_f2":"p\u0159ed 2 lety","users_id":"2674360","project_id":"1250499"}} 
```

请注意，第二个 JSON 缺少“submitdate_ts”键，这在任何数据结构中都很正常。

因此，当您尝试在循环中访问该键的值时，您可以使用以下方式调用它：

```
for item in API_call:
    submitdate_ts = item["bids"]["submitdate_ts"] 
```

你可以，但它会给你第二个 JSON 行的回溯错误，因为密钥根本不存在。

对此进行编码的适当方式可能如下：

```
for item in API_call:
    submitdate_ts = item.get("bids", {'x': None}).get("submitdate_ts") 
```

{'x': None} 是为了避免第二级出错。当然，如果您进行抓取，您可以在代码中构建更多的容错能力。就像首先指定一个 if 条件

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2019-08-20T22:51:20.637

使用时要注意的问题`.get()`：

如果字典包含调用中使用的键`.get()`并且其值为，则即使提供了默认值`None`，该`.get()`方法也将返回。`None`

例如，以下返回`None`，`'alt_value'`与预期不同：

```
d = {'key': None}
assert None is d.get('key', 'alt_value') 
```

`.get()`的第二个值仅在提供的键不在字典中时才返回，而不是在该调用的返回值为 时`None`。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2012-06-14T21:12:27.547

目的是如果没有找到key可以给一个默认值，非常有用

```
dictionary.get("Name",'harry') 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2017-09-04T23:19:24.727

> 这个功能有什么用？

一种特殊的用法是用字典计数。假设您要计算给定列表中每个元素的出现次数。这样做的常用方法是制作一个字典，其中键是元素，值是出现次数。

```
fruits = ['apple', 'banana', 'peach', 'apple', 'pear']
d = {}
for fruit in fruits:
    if fruit not in d:
        d[fruit] = 0
    d[fruit] += 1 
```

使用该`.get()`方法，可以使这段代码更加简洁明了：

```
for fruit in fruits:
    d[fruit] = d.get(fruit, 0) + 1 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-12-15T02:06:01.727

> 为什么 dict.get(key) 而不是 dict[key]？

### 0\. 总结

与 相比`dict[key]`，`dict.get`在查找键时提供备用值。

### 一、定义

get(key[, default]) [4\. 内置类型 — Python 3.6.4rc1 文档](https://docs.python.org/3/library/stdtypes.html#dict.get)

如果键在字典中，则返回键的值，否则返回默认值。如果未给出默认值，则默认为无，因此此方法永远不会引发 KeyError。

```
d = {"Name": "Harry", "Age": 17}
In [4]: d['gender']
KeyError: 'gender'
In [5]: d.get('gender', 'Not specified, please add it')
Out[5]: 'Not specified, please add it' 
```

### 2.它解决的问题。

如果没有`default value`，则必须编写繁琐的代码来处理此类异常。

```
def get_harry_info(key):
    try:
        return "{}".format(d[key])
    except KeyError:
        return 'Not specified, please add it'
In [9]: get_harry_info('Name')
Out[9]: 'Harry'
In [10]: get_harry_info('Gender')
Out[10]: 'Not specified, please add it' 
```

作为一种方便的解决方案，`dict.get`引入了一个可选的默认值，避免了上述笨拙的代码。

### 三、结论

`dict.get`如果字典中没有键，则有一个额外的默认值选项来处理异常

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2020-05-14T14:34:42.203

一个可能是优势的区别是，如果我们正在寻找一个不存在的键，我们将得到 None，而不是像我们使用括号表示法时那样，在这种情况下我们会抛出一个错误：

```
print(dictionary.get("address")) # None
print(dictionary["address"]) # throws KeyError: 'address' 
```

get 方法的最后一件很酷的事情是，它接收一个额外的默认值可选参数，也就是说，如果我们试图获取一个学生的分数值，但该学生没有我们可以获得的分数键一个 0 代替。

因此，不要这样做（或类似的事情）：

```
score = None
try:
    score = dictionary["score"]
except KeyError:
    score = 0 
```

我们可以完成这个：

```
score = dictionary.get("score", 0)
# score = 0 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2021-03-08T23:24:41.633

我没有看到提到的另一个用例是作为`key`函数的参数，如`sorted`,`max`和`min`. 该`get`方法允许根据它们的值返回键。

```
>>> ages = {"Harry": 17, "Lucy": 16, "Charlie": 18}
>>> print(sorted(ages, key=ages.get))
['Lucy', 'Harry', 'Charlie']
>>> print(max(ages, key=ages.get))
Charlie
>>> print(min(ages, key=ages.get))
Lucy 
```

感谢提供此用例的另一个问题的[答案！](https://stackoverflow.com/a/3282904/8716401)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-12-18T01:27:59.833

其他[答案](https://stackoverflow.com/a/37968524/6243352)已经清楚地解释了字典括号键控之间的区别，`.get`并[提到了一个*相当*无害的陷阱](https://stackoverflow.com/a/57582439/6243352)，当`None`或默认值也是有效键时。

鉴于此信息，可能很容易得出结论，即`.get`在某种程度上比括号索引更安全和更好，并且应该始终使用而不是括号查找，如[*Stop Using Square Bracket Notation to Get a Dictionary's Value in Python*](https://medium.com/better-programming/stop-using-square-bracket-notation-to-get-a-dictionarys-value-in-python-c617f6ea15a3)中所述，即使在常见情况下他们希望查找成功（即从不提高 a `KeyError`）。

博客文章的作者认为`.get`“保护您的代码”：

> 请注意尝试引用不存在的术语如何导致`KeyError`. 这可能会让人头疼，尤其是在处理不可预测的业务数据时。
> 
> 虽然我们可以将我们的语句包装在`try`/`except`或`if`语句中，但对字典术语的这种关注很快就会堆积起来。

确实，在[null](https://en.wikipedia.org/wiki/Tony_Hoare#Apologies_and_retractions) ( `None`) 合并或以其他方式填充缺失值以处理不可预测的动态数据的罕见情况下，明智地部署`.get`是一种有用且 Pythonic 的速记工具，用于仅在以下情况下设置默认值的笨拙`if key in dct:`和`try`/块`except`作为程序行为规范的一部分，密钥可能会丢失。

但是，替换*所有*括号 dict 查找，包括您断言必须成功的那些，`.get`是另一回事。这种做法有效地将一类[运行时错误](https://en.wikipedia.org/wiki/Runtime_error_detection)降级，这些错误有助于将错误揭示为更难以识别和调试的静默非法状态场景。

程序员的一个常见错误是认为异常*会引起*头痛并试图抑制它们，使用诸如将代码包装在[`try`...`except: pass`块](https://wiki.c2.com/?PokemonExceptionHandling)中的技术。他们后来意识到，*真正*令人头疼的事情是永远不会在故障点看到应用程序逻辑被破坏并部署损坏的应用程序。更好的编程实践是包含所有程序不变量的断言，例如必须在字典中的键。

错误安全的层次结构大致是：

| 错误类别 | 调试相对容易 |
| --- | --- |
| 编译时错误 | 简单的; 去生产线解决问题 |
| 运行时异常 | 中等的; 控制需要流向错误，这可能是由于意外的边缘情况或难以重现的状态（如线程之间的竞争条件），但至少当它发生时我们会得到明确的错误消息和堆栈跟踪。 |
| 沉默的逻辑错误 | 难的; 我们甚至可能不知道它的存在，当我们这样做时，由于缺乏局部性和多个断言违规的可能性，追踪导致它的状态可能非常具有挑战性。 |

当编程语言设计者谈论程序安全时，一个主要目标是通过将运行时错误提升为编译时错误并将静默逻辑错误提升为运行时异常或（理想情况下）编译时错误来显示而不是抑制真正的错误。

Python 在设计上是一种解释性语言，它严重依赖运行时异常而不是编译器错误。默认情况下，缺少方法或属性、非法类型操作（如`1 + "a"`越界或缺少索引或键）。

一些语言，如 JS、Java、Rust 和 Go，默认情况下使用其映射的后备行为（在许多情况下，不提供 throw/raise 替代方案），但 Python 和其他语言（如 C#）默认抛出。Perl/PHP 发出未初始化值警告。

不加选择地应用`.get`到所有 dict 访问，即使是那些预计不会失败并且没有后备来处理`None`（或使用任何默认值）在代码中乱跑的人，这几乎抛弃了 Python 的此类运行时异常安全网错误，沉默或增加对潜在错误的间接性。

更喜欢括号查找的其他支持原因（偶尔会`.get`在需要默认值的地方很好地放置）：

*   更喜欢使用该语言提供的工具编写标准的惯用代码。出于上面给出的异常安全原因，Python 程序员通常（正确地）更喜欢括号，因为它是 Python dicts 的默认行为。
*   `.get`当您希望提供一个`None`与您断言必须成功的查找无法区分的默认值时，始终使用没收意图。
*   测试的复杂性与`.get`. 实际上，每个查找现在都是一个可以成功或失败的分支——这两种情况都必须经过测试以建立覆盖范围，即使默认路径实际上无法通过规范达到（具有讽刺意味的是，这会导致对检索值的额外使用`if val is not None:`或`try`所有未来使用；不必要并为那些一开始就不应该出现的事情感到困惑`None`）。
*   [`.get`是有点慢](https://stackoverflow.com/questions/39582115/python-dictionary-lookup-performance-get-vs-in)。
*   `.get`更难打字，更难读（比较 Java 的 tacked-on-feel`ArrayList`语法与原生感觉 C#`Lists`或 C++ 矢量代码）。次要的。

一些语言，如 C++ 和 Ruby 提供替代方法（`at`和`fetch`，分别）来选择在错误访问时抛出错误，而 C# 提供`TryGetValue`类似于 Python 的选择加入后备值`get`。

由于 JS、Java、Ruby、Go 和 Rust 在`.get`默认情况下将后备方法烘焙到所有哈希查找中，所以它不会那么糟糕，人们可能会想。确实，这不是语言设计者面临的最大问题，并且有很多用于无抛出访问版本的用例，因此跨语言没有达成共识也就不足为奇了。

但正如我所论证的，Python（连同 C#）通过将 assert 选项设为默认值，比这些语言做得更好。选择不使用它在故障点不加选择地全面使用它来报告合同违规行为是一种安全性和表达能力的损失`.get`。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-25T03:42:59.950

它允许您提供默认值，而不是在找不到该值时出错。像这样说服代码：

```
class dictionary():
    def get(self,key,default):
         if self[key] is not found : 
               return default
         else:
               return self[key] 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2016-08-25T07:02:45.957

根据使用情况应该使用这种`get`方法。

**示例 1**

```
In [14]: user_dict = {'type': False}

In [15]: user_dict.get('type', '')

Out[15]: False

In [16]: user_dict.get('type') or ''

Out[16]: '' 
```

**示例 2**

```
In [17]: user_dict = {'type': "lead"}

In [18]: user_dict.get('type') or ''

Out[18]: 'lead'

In [19]: user_dict.get('type', '')

Out[19]: 'lead' 
```

# python - 如何从/向 ASCII 文件写入/读取带有 MultiIndex 的 Pandas DataFrame？

> ID：11041411
> 
> 赞同：10
> 
> 时间：2012-06-14T21:11:12.787
> 
> 标签：python, pandas

我希望能够`DataFrame`为行和列索引创建一个带有 MultiIndexes 的 Pandas，并从 ASCII 文本文件中读取它。我的数据看起来像：

```
col_indx = MultiIndex.from_tuples([('A',  'B',  'C'), ('A',  'B',  'C2'), ('A',  'B',  'C3'), 
                                   ('A',  'B2', 'C'), ('A',  'B2', 'C2'), ('A',  'B2', 'C3'), 
                                   ('A',  'B3', 'C'), ('A',  'B3', 'C2'), ('A',  'B3', 'C3'), 
                                   ('A2', 'B',  'C'), ('A2', 'B',  'C2'), ('A2', 'B',  'C3'), 
                                   ('A2', 'B2', 'C'), ('A2', 'B2', 'C2'), ('A2', 'B2', 'C3'), 
                                   ('A2', 'B3', 'C'), ('A2', 'B3', 'C2'), ('A2', 'B3', 'C3')], 
                                   names=['one','two','three']) 
row_indx = MultiIndex.from_tuples([(0,  'North', 'M'), 
                                   (1,  'East',  'F'), 
                                   (2,  'West',  'M'), 
                                   (3,  'South', 'M'), 
                                   (4,  'South', 'F'), 
                                   (5,  'West',  'F'), 
                                   (6,  'North', 'M'), 
                                   (7,  'North', 'M'), 
                                   (8,  'East',  'F'), 
                                   (9,  'South', 'M')], 
                                   names=['n', 'location', 'sex'])
size=len(row_indx), len(col_indx)
data = np.random.randint(0,10, size)
df = DataFrame(data, index=row_indx, columns=col_indx)
print df 
```

我试过了`df.to_csv()`，`read_csv()`但他们没有保留索引。

我正在考虑使用额外的分隔符创建一种新格式。例如，使用一行`----------------`来标记列索引的结束，使用 a`|`来标记行索引的结束。所以它看起来像这样：

```
one            | A   A   A   A   A   A   A   A   A  A2  A2  A2  A2  A2  A2  A2  A2  A2
two            | B   B   B  B2  B2  B2  B3  B3  B3   B   B   B  B2  B2  B2  B3  B3  B3
three          | C  C2  C3   C  C2  C3   C  C2  C3   C  C2  C3   C  C2  C3   C  C2  C3
--------------------------------------------------------------------------------------
n location sex :                                                                      
0 North    M   | 2   3   9   1   0   6   5   9   5   9   4   4   0   9   6   2   6   1
1 East     F   | 6   2   9   2   7   0   0   3   7   4   8   1   3   2   1   7   7   5
2 West     M   | 5   8   9   7   6   0   3   0   2   5   0   3   9   6   7   3   4   9
3 South    M   | 6   2   3   6   4   0   4   0   1   9   3   6   2   1   0   6   9   3
4 South    F   | 9   6   0   0   6   1   7   0   8   1   7   6   2   0   8   1   5   3
5 West     F   | 7   9   7   8   2   0   4   3   8   9   0   3   4   9   2   5   1   7
6 North    M   | 3   3   5   7   9   4   2   6   3   2   7   5   5   5   6   4   2   9
7 North    M   | 7   4   8   6   8   4   5   7   9   0   2   9   1   9   7   9   5   6
8 East     F   | 1   6   5   3   6   4   6   9   6   9   2   4   2   9   8   4   2   4
9 South    M   | 9   6   6   1   3   1   3   5   7   4   8   6   7   7   8   9   2   3 
```

Pandas 是否可以通过 MultiIndexes 将 DataFrame 写入/读取 ASCII 文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T00:00:13.627

不确定您使用的是哪个版本的熊猫，但`0.7.3`您可以将您的熊猫导出`DataFrame`到 TSV 文件并通过执行以下操作保留索引：

```
df.to_csv('mydf.tsv', sep='\t') 
```

您需要导出到 TSV 而不是 CSV 的原因是列标题中包含`,`字符。这应该可以解决您问题的第一部分。

第二部分变得有点棘手，因为据我所知，您需要事先了解您希望 DataFrame 包含什么。特别是，您需要知道：

1.  TSV 上的哪些列代表该行`MultiIndex`
2.  并且其余列也应转换为`MultiIndex`

为了说明这一点，让我们将上面保存的 TSV 文件读回一个新的`DataFrame`：

```
In [1]: t_df = read_table('mydf.tsv', index_col=[0,1,2])
In [2]: all(t_df.index == df.index)
Out[2]: True 
```

所以我们设法读`mydf.tsv`入了一个`DataFrame`与原始 具有相同行索引的`df`。但：

```
In [3]: all(t_df.columns == df.columns)
Out[3]: False 
```

这里的原因是因为 pandas（据我所知）无法将标题行正确解析为`MultiIndex`. 正如我上面提到的，如果您知道您的 TSV 文件头代表 a`MultiIndex`那么您可以执行以下操作来解决此问题：

```
In [4]: from ast import literal_eval
In [5]: t_df.columns = MultiIndex.from_tuples(t_df.columns.map(literal_eval).tolist(), 
                                              names=['one','two','three'])
In [6]: all(t_df.columns == df.columns)
Out[6]: True 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T18:11:51.833

您可以使用以下方式更改打印选项[`set_option`](http://pandas.pydata.org/pandas-docs/stable/basics.html#working-with-package-options)：

> `display.multi_sparse`:
> `: boolean`
>    默认`True`, "sparsify"`MultiIndex`显示
>    （不显示组内外层的重复元素）

现在 DataFrame 将根据需要打印：

```
In [11]: pd.set_option('multi_sparse', False)

In [12]: df
Out[12]: 
one             A   A   A   A   A   A   A   A   A  A2  A2  A2  A2  A2  A2  A2  A2  A2
two             B   B   B  B2  B2  B2  B3  B3  B3   B   B   B  B2  B2  B2  B3  B3  B3
three           C  C2  C3   C  C2  C3   C  C2  C3   C  C2  C3   C  C2  C3   C  C2  C3
n location sex                                                                       
0 North    M    2   1   6   4   6   4   7   1   1   0   4   3   9   2   0   0   6   4
1 East     F    3   5   5   6   4   8   0   3   2   3   9   8   1   6   7   4   7   2
2 West     M    7   9   3   5   0   1   2   8   1   6   0   7   9   9   3   2   2   4
3 South    M    1   0   0   3   5   7   7   0   9   3   0   3   3   6   8   3   6   1
4 South    F    8   0   0   7   3   8   0   8   0   5   5   6   0   0   0   1   8   7
5 West     F    6   5   9   4   7   2   5   6   1   2   9   4   7   5   5   4   3   6
6 North    M    3   3   0   1   1   3   6   3   8   6   4   1   0   5   5   5   4   9
7 North    M    0   4   9   8   5   7   7   0   5   8   4   1   5   7   6   3   6   8
8 East     F    5   6   2   7   0   6   2   7   1   2   0   5   6   1   4   8   0   3
9 South    M    1   2   0   6   9   7   5   3   3   8   7   6   0   5   4   3   5   9 
```

*注意：在较旧的 pandas 版本中，这是`pd.set_printoptions(multi_sparse=False)`*.

# ruby - 在heroku的静态网站中加载css文件

> ID：11041417
> 
> 赞同：4
> 
> 时间：2012-06-14T21:11:55.437
> 
> 标签：ruby, heroku, rack

我`config.ru`的如下：

```
use Rack::Static, 
  :urls => ["/images"],
  :root => "public"

run lambda { |env|
  [
    200, 
    {
      'Content-Type'  => 'text/html', 
      'Cache-Control' => 'public, max-age=86400' 
    },
    File.open('public/index.html', File::RDONLY)
  ]
} 
```

当我在本地加载它时，网站看起来不错，但是当我在 Heroku 上运行它时，我在浏览器控制台中收到以下 CSS 文件的错误消息：

```
Resource interpreted as Stylesheet but transferred with MIME type text/html. 
```

知道为什么我会收到这些错误吗？

示例站点：[http](http://salus8.heroku.com) ://salus8.heroku.com 。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T16:39:57.377

您的应用当前以两种不同的方式响应请求。`/images`通过搜索`/public/images`文件夹并返回与请求匹配的任何文件来处理以 开头的请求。任何其他请求都通过运行该`lambda`块来处理，该块返回`index.html`内容类型为`text/html`.

这适用于*任何*其他请求，因此当您的页面引用 css 文件并且浏览器尝试获取它时，您的应用程序将返回`index.html`具有 HTML 内容类型的页面，因此会发出有关 MIME 类型的警告。

解决此问题的一种方法是将中间件处理`/css`的 url 添加到列表中：`Static`

```
use Rack::Static, 
  :urls => ["/images", "/css"],
  :root => "public" 
```

并将您的 css 文件放在`public/css`目录中（正如我所写，看起来您已经这样做了）。

这将解决您的直接问题，但您可能会遇到问题，例如，如果您想在顶层目录中拥有多个 HTML 页面。

另一种实现静态站点的解决方案可以`index.html`为任何没有路径的请求提供服务，这就是您在这里尝试做的事情，可能是使用[`rack-rewrite`](https://rubygems.org/gems/rack-rewrite)gem 和`Rack::File`应用程序。添加`gem 'rack-rewrite'`到您的 Gemfile，然后使用`config.ru`这样的：

```
require 'rack/rewrite'

use Rack::Rewrite do
  rewrite "/", "/index.html"
end

run Rack::File.new("public") 
```

这将使用匹配文件（如果存在）响应 *所有*请求，并且任何没有路径到达的请求都将获得`index.html`. （请注意，它不适用于`index.html`对主目录下的子目录的请求）。

如果您使用 Heroku 的 Cedar 堆栈，您还可以考虑[伪造一个 php 应用程序，以便使用 Apache 获得“真正的”静态托管](http://kennethreitz.com/static-sites-on-heroku-cedar.html)。

我不知道为什么这会在本地工作，但不能在 Heroku 上工作，除非你只是直接在浏览器中打开文件。您是在本地运行服务器（例如使用`rackup`），还是直接查看文件？

# java - ClassNotFoundException oracle.jdbc.driver.OracleDriver 仅在 servlet 中，使用 Eclipse

> ID：11041418
> 
> 赞同：8
> 
> 时间：2012-06-14T21:11:57.870
> 
> 标签：java, eclipse, servlets, classnotfoundexception

下面的代码失败了：

```
Class.forName("oracle.jdbc.driver.OracleDriver"); 
```

出现错误：

> java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver

两个`println`s 打印：

```
Wed_Jun_22_11:18:51_PDT_2005
false 
```

这让我觉得这个类存在并且可以找到。同样，这个完全相同的类也适用于非 servlet 应用程序。

我已经多次重新启动所有内容并多次重新生成应用程序/servlet。所有值都经过硬编码，使其简单而简短。

```
private static Connection getDBConnection() throws Exception {
    System.out.println(oracle.jdbc.driver.OracleDriver.BUILD_DATE);
    System.out.println(Class.class.desiredAssertionStatus());
    //load the driver
    Class.forName("oracle.jdbc.driver.OracleDriver");

    return DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:orcl", "SYSTEM", "pass");
} 
```

失败的完整 servlet：

```
package servletClass_3;

import java.io.IOException;
import java.sql.Connection;
import java.sql.DriverManager;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class OneMoreBookStore
 */
@WebServlet("/OneMoreBookStore")
public class OneMoreBookStore extends HttpServlet {

    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    private static Connection getDBConnection() throws Exception {

        System.out.println(oracle.jdbc.driver.OracleDriver.BUILD_DATE);
        System.out.println(Class.class.desiredAssertionStatus());

        //load the driver
        Class.forName("oracle.jdbc.driver.OracleDriver");
        return DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:orcl", "SYSTEM", "pass");
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        try
        {
            Connection con = getDBConnection();
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

此应用程序有效：

```
package servletClass_3;

import java.sql.Connection;
import java.sql.DriverManager;

public class DBConnect {

    private static Connection getDBConnection() throws Exception {
        System.out.println(oracle.jdbc.driver.OracleDriver.BUILD_DATE);
        System.out.println(Class.class.desiredAssertionStatus());

        //load the driver
        Class.forName("oracle.jdbc.driver.OracleDriver");
        return DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:orcl", "SYSTEM", "pass");
    }
    public static void main(String[] args) {
        try
        {
            Connection con = getDBConnection();
            System.out.println("connection worked");
            con.close();
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

我正在使用：

*   Eclipse JavaEE 1.4.2
*   雄猫 7
*   jdk1.7
*   甲骨文 11g R2
*   视窗 7 64 位

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T21:48:17.190

可能您没有在您的应用程序中部署 oracle 驱动程序。

你有几个选择：

*   您可以将驱动程序 jar 放在您的`WEB-INF/lib`文件夹中
*   您将其与您的应用程序一起导出。-> 右键单击​​项目 -> `Build Path`-> `Configure Build Path...`-> `Order and Export`-> 检查驱动程序。
*   将驱动程序 jar 放在应用程序服务器的共享或库扩展文件夹中。（不过，您应该选择一或二。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-20T09:50:49.673

**您必须在项目的部署程序**集中包含 ojdbc6.jar 文件...

1.  选择包含 jsp 文件的 web 项目...

2.  在 Eclipse 的菜单栏中选择**Project选项卡**

3.  在下拉菜单中选择**属性**

4.  选择**部署程序集**

5.  在其中添加您的 ojdbc6.jar 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T18:36:20.583

试试这个，`oracle.jdbc.driver.OracleTypes`改成`oracle.jdbc.OracleTypes`

# jquery - 如何以编程方式打开 jquery 手风琴内容面板

> ID：11041420
> 
> 赞同：14
> 
> 时间：2012-06-14T21:12:07.923
> 
> 标签：jquery

我想扩展 jquery 手风琴的默认行为并在内容面板中添加一个 NEXT 按钮。当用户单击内容面板内的 NEXT 按钮时，手风琴应该打开下一个项目。

我能够像这样找到下一个项目，`$(this).parent().next()`但无法触发实际操作。

```
<div id="accordion">
   <h3><a href="#">Item 1</a></h3>
   <div>Item 1 content<br />
      <div onclick="$(this).parent().next().show();">NEXT</div>
   </div>
   <h3><a href="#">Item 2</a></h3>
   <div>Item 2 content<br />
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-14T21:18:13.037

如果这是 jQuery UI Accordion 小部件，您应该使用它的内置方法。

```
var $accordion = $("#accordion").accordion();
function openNextAccordionPanel() {
    var current = $accordion.accordion("option","active"),
        maximum = $accordion.find("h3").length,
        next = current+1 === maximum ? 0 : current+1;
    // $accordion.accordion("activate",next); // pre jQuery UI 1.10
    $accordion.accordion("option","active",next);
} 
```

html:

```
<div onclick="openNextAccordionPanel();">NEXT</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-02T16:03:35.727

我的手风琴只有一个内容 div（0 索引），并且在回发时，我正在注册脚本以在手风琴娱乐后再次打开手风琴 ($("#accordion").accordion({ collapsible: true, active: true }); $("#accordion").show();) 将布局放置在触发回发之前用户所在的位置。

HTML：

```
<div id="accordion" style="display: none">
    <h3>ACCORDION TITLE</h3>
    <div class="col-lg-12" style="overflow: hidden"> 
```

Javascript函数：

```
 $("#accordion").accordion({ active: 0 });

 $('.ui-accordion-content').css('height', 'auto'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:20:55.893

为了让您的代码完美运行，您应该如下修改您的 html

```
<div id="accordion">
   <h3><a href="#">Item 1</a></h3>
   <div class='showable'>Item 1 content<br />
      <div onclick="$(this).parent('.showable').hide().next().show();">NEXT</div>
   </div>
   <h3><a href="#">Item 2</a></h3>
   <div class='showable'>Item 2 content<br />
   </div>
</div> 
```

# php - 两个相似的友好网址 - 如何区分

> ID：11041424
> 
> 赞同：1
> 
> 时间：2012-06-14T21:12:18.903
> 
> 标签：php, mod-rewrite, friendly-url

我面临两个类似的友好网址的问题。我在 htaccess 中提到了以下几行。

```
RewriteRule ^user/([a-zA-Z0-9-]+) /sitename/profile.php?id_profile=$1 [QSA,L]
RewriteRule ^user/([a-zA-Z0-9-]+)/articles /sitename/articles.php?id_profile=$1 [QSA,N] 
```

当我尝试访问第二个 url 时，它会重定向回第一个 url。我猜第一部分“用户”是导致这个问题的原因。

这里 id_profile 是一个字符串。在 php 文件中，我为 id_profile 获取相应的用户 ID（整数）并执行其余操作。

这是一个类似的工作示例。 [https://www.etsy.com/people/vinubhai](https://www.etsy.com/people/vinubhai) https://www.etsy.com/people/vinubhai/favorites

我想让它像 etsy 一样工作。请帮忙。

谢谢和问候， Vineshkumar Kunhiraman

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:18:42.757

您可以添加 a`$`以锚定字符串的末尾，也可以切换顺序

```
RewriteRule ^user/([a-zA-Z0-9-]+)$ 
```

这与文章网址不匹配

切换顺序会导致文章优先匹配，而profile url将不匹配文章重写规则

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:19:54.903

首先处理第一条规则。改变你的规则的顺序，你的问题应该得到解决。

首先是文章重写，然后是用户一般重写。

# javascript - Greensock TimelineMax Javascript Singleton 与 Firefox 不同

> ID：11041425
> 
> 赞同：0
> 
> 时间：2012-06-14T21:12:21.877
> 
> 标签：javascript, firefox, singleton, gsap

我是相对较新的 javascript，但我对其他语言很满意。我正在尝试使用 Greensock 时间线来构建模块化序列以减少代码重复。我正在尝试拥有一个可供我所有功能访问的单例时间线。我尝试只使用全局变量并将 to() 方法附加到它。这适用于 chrome 和 iexplorer，但不适用于 Firefox。我在 Firefox 错误控制台中收到“this.timeline is null”错误。然后我尝试了这个：

```
var TL = (function() {
  var tl = new TimelineMax();
  function returnInstance() {
    return tl;
  }
  return {
    inst: function() {
      return returnInstance();
    }
  }
})(); 
```

这产生了我想要的单例，但我只在 FF 中得到同样的错误。下面的代码在 chrome 和 iexplorer 中都可以正常工作：

开发者.html：

```
<html>
<body>
  <-- Page content... -->
  <script type='text/javascript' src='js/jquery.js'></script>
  <script type='text/javascript' src='js/TweenMax.min.js'></script>
  <script type='text/javascript' src='js/foo.js'></script>
  <script type='text/javascript'>
    $(document).ready(function(){
      init();
    });
  </script>
</body>
</html> 
```

foo.js：

```
 //...singleton code from above...
  function init(){
    do1();
    do2(-2);
  }
  do1(delay){
    delay = delay || 0;
    var gTL = TL.inst();
    gTL.to($("#bar"),2,{css:{autoAlpha:1}},delay);
  }
  do2(delay){
    delay = delay || 0;
    var gTL = TL.inst();
    gTL.to($("#canv"),2,{css:{autoAlpha:1}},delay);
  } 
```

因此，这将使#bar 和#canv 同时进入（如果我调用do2(0); 那么#canv 将在#bar 完成后进入）。

您对我做错了什么或为什么 FF 以不同方式处理代码有任何见解吗？

谢谢你的帮助。

编辑1

浏览器版本：Chrome(19.0.1084.56) Internet Explorer(9.0.8112.16421) Firefox(13.0)

编辑2

该错误从 TweenMax.min.js 文件内部生成。

编辑3

在尝试使用全局时间线和单例之前，我通过将 TimelineMax 引用传递给每个函数并返回更新的 TimelineMax 来实现所需的功能。所以，我的代码看起来有点像这样：

foo.js

```
function init() {
  var tl = new TimelineMax();
  tl = do1(tl);
  tl = do2(tl);
}
do1(TL){
  TL.to(...);
  return TL;
}
do2(TL){
  TL.to(...);
  return TL;
} 
```

这在 Firefox 中似乎运行良好，但使用时间线对象玩烫手山芋有点乏味。这是首选方法吗？我在哪里可以找到格式良好的 javascript 编码标准和最佳实践？

编辑4

这是完整的非工作代码。它在 chrome 和 ie 中都按预期工作，但我收到来自 TweenMax.js 库的 FF 错误。

dev_page2.html：

```
<!DOCTYPE HTML>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" >
    <link rel="stylesheet" type="text/css" href="css/dev.css">

    <!--[if lt IE 7]>
    <style media="screen" type="text/css">
    #main {
        height:100%;
    }
    </style>
    <![endif]-->
</head>
<body class="whiteBG">
    <header class="center">
        <div id="bar" class="invisible">
            <nav>
                <!-- nav elements here... -->
            </nav><!-- nav -->
        </div><!-- bar -->
        <canvas id="ani" class='invisible center' width='840' height='420'></canvas>
    </header><!-- End header -->
    <section id="main">
    <div id="content" class="center">
            <p>
            </p><blockquote>
            </blockquote><p class="signature">
            </p><p class="float-left">
            </p><p class="float-left">
            </p>
        </div> <!-- End content -->
    </section>
    <footer class="invisible center">
        <div id="footerLeft">
        </div>
        <div id="footerCenter">
        </div>
        <div id="footerRight">
        </div>
    </footer><!-- End footer -->
    <script type="text/javascript" src="js/Jquery.js">
    </script>
    <script type="text/javascript" src="js/TweenMax.js"></script>
    <script type="text/javascript" src="js/dev2.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            init();
        });
    </script>
</body>
</html> 
```

dev2.js：

```
// Copyright 2012 Gray Designs. All Rights Reserved.
/* 
 * @author rocky.grayjr@gmail.com (Rocky Gray)
 * @date May 13, 2012
 */

function init()
{
    enterNavBar();
    drawCanvas();
    enterCanvas(-2);
    enterFooter(-1);
}

var TL = (function() {
    var tl = new TimelineMax();
    function returnInstance() {
      return tl;
    }
    return {
        inst: function() {
        return returnInstance();
    }
    }
})();

function enterNavBar(delay)
{
    delay = delay || 0;
    var gTL = TL.inst();
    //nav bar fade in
    gTL.to($("#bar"),2,{css:{autoAlpha:1},ease:Quad.easeIn,onComplete:function(){
        $("#bar").removeClass('invisible');
    }},delay);
}

function enterCanvas(delay)
{
    delay = delay || 0;
    var gTL = TL.inst();
    gTL.to($("#ani"),2,{css:{autoAlpha:1},ease:Quad.easeIn,onComplete:function(){
        $("#ani").removeClass('invisible');
    }},delay);
}

function enterFooter(delay)
{
    delay = delay || 0;
    var gTL = TL.inst();
    //nav bar fade in
    gTL.to($("footer"),2,{css:{autoAlpha:1},ease:Quad.easeIn,onComplete:function(){
        $("footer").removeClass('invisible');
    }},delay)
}

function drawCanvas()
{
    //var canv = document.getElementById("ani");
    var $canv = $('#ani'); 
    var ctx = $canv[0].getContext("2d");
    ctx.fillStyle="#000";
    ctx.fillRect(0,0,840, 420,0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T02:22:22.657

听起来您可能使用的是过时版本的 GreenSock 文件。这听起来像是一个非常罕见的问题，并且在更新的版本中得到了修复（对于任何麻烦，我深表歉意）。您介意下载最新版本并重试吗？[http://www.greensock.com/v12/](http://www.greensock.com/v12/)

# c# - 按名字/姓氏组合搜索时遇到问题

> ID：11041427
> 
> 赞同：2
> 
> 时间：2012-06-14T21:12:26.233
> 
> 标签：c#, entity-framework, linq-to-sql

我在按名字/姓氏/名字+姓氏组合搜索时遇到问题。

我让它在名字和姓氏上正常工作，但在名字+姓氏组合中，它还列出了所有具有相同姓氏的 OTHER 成员。该方法是否`StartsWith`无法按照我的想法工作，或者这里是否存在某种逻辑错误？

我试过这样：

```
predicate = predicate.And(p => query.StartsWith(p.FirstNm) && query.EndsWith(p.LastNm) || query.StartsWith(p.FirstNm)); 
```

我也尝试过这种方式：

```
predicate = predicate.And(p => query.StartsWith(p.FirstNm) || query.StartsWith(p.LastNm)); 
```

使用这些名称：

> ```
> John Doe
> Jane Doe
> Cody Phillips
> Cody Fisher 
> ```

输入会`Cody`产生两个`Cody`结果。键入会`Cody Fisher`产生正确的结果。

键入`John Doe`产生`John Doe`和`Jane Doe`。我只希望它屈服`John Doe`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:20:43.133

这可能会有所帮助。我相信你在滥用 StartsWith 方法。根据我的收集，您应该改用 Like 方法。

[http://social.msdn.microsoft.com/forums/en-US/adodotnetentityframework/thread/128fe4cf-776d-4200-9f48-7f8dd30dcb34/](http://social.msdn.microsoft.com/forums/en-US/adodotnetentityframework/thread/128fe4cf-776d-4200-9f48-7f8dd30dcb34/)

# http - 是否存在任何标准来关联系统之间的 HTTP 请求和响应

> ID：11041431
> 
> 赞同：1
> 
> 时间：2012-06-14T21:12:34.867
> 
> 标签：http, correlation

考虑一套使用 HTTPS 进行通信的分布式应用程序。这包括从浏览器到 Web 应用程序的请求，以及从 Web 应用程序到后端 SOAP 和 REST 服务的请求。

当出现问题时，比如某个功能不适用于特定用户，人们希望隔离所有系统中请求的事件，以便找到问题的根本原因。存在哪些标准来关联 HTTP 上的事件？如果不存在，是否有可用资源如何在使用不同技术实现的不同服务器之间可靠地实现它？

例如，我知道 WCF 在发送 SOAP 请求时支持关联 ID，但不清楚使用 WCF 或 ASP.NET Web API 实现的 REST 服务是否支持关联 ID。

注意：我不是在调试系统。我正在尝试跨系统（浏览器、Web 服务器场、后端服务器）关联事件（错误、警告、信息），以便支持系统的人可以诊断问题。因此，像提琴手或查看请求/响应主体这样的工具是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:20:29.180

如果您使用的是 WCF，则可以使用一组工具。如果您使用的是 WebSphere 或 JBoss，那么您有一组不同的工具。

如果您在协议级别调试 REST，我强烈建议您查看 Fiddler：

*   [http://www.codeproject.com/Tips/213007/Debug-WCF-REST-Service](http://www.codeproject.com/Tips/213007/Debug-WCF-REST-Service)

*   [http://herbjorn.wordpress.com/2010/04/27/fiddling-with-fiddler-debugging-rest-services-on-your-machine/](http://herbjorn.wordpress.com/2010/04/27/fiddling-with-fiddler-debugging-rest-services-on-your-machine/)

您可能还对此线程感兴趣：

*   [如何在服务级别在 WCF 中记录 JSON 响应](https://stackoverflow.com/questions/5602373/how-to-log-json-response-in-wcf-at-service-level)

# php - 正则表达式对 * 和 () 和变音符号“过敏”？

> ID：11041439
> 
> 赞同：1
> 
> 时间：2012-06-14T21:13:01.123
> 
> 标签：php, regex

我有以下两个正则表达式，我想知道它们不起作用的原因是什么：

```
$regex='#<br><h1 class="band name">(.+?)</h1><span class="bandinfotop">#';
preg_match($regex,$content,$match);
$name=$match[1]; 
```

在它确实有效的情况下，所选字符串类似于 **Häuptling 和“(R) Brechende Zäune”。它起作用的一个例子是“！n：事实”。

现在我想知道是否可能是因为字符串中的任何特定符号弄乱了我的正则表达式？喜欢变音符号？

稍后在代码中我这样做：

```
$name=strip_tags($name);
$name=htmlentities($name,null,"UTF-8");
if($name=="") $name="NULL"; 
```

对于那些它没有找到匹配的人，它会回显“NULL”。

感谢您的帮助！查尔斯

编辑 1 它似乎是最后三行 - 当最后一行之前的两行被注释掉时，它工作正常。

解决方案当我在 htmlentities() 中删除参数 null 和“UTF-8”时，它以某种方式工作。有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:27:45.730

如果您从中报废的站点经过修饰并删除`<br>`或在其之间添加空格`</h1>`并且`<span`您的正则表达式将中断，会发生什么情况。不要使用正则表达式进行 html 解析！

而是使用像[simplehtmldom](http://simplehtmldom.sourceforge.net/)这样的 dom 解析器，或者简单地使用 phps 本机[DOMDocument](http://php.net/manual/en/class.domdocument.php)

```
<?php 
$source = '<br><h1 class="band name">Häuptling and "(R) Brechende Zäune</h1><span class="bandinfotop">';

header('Content-Type: text/html; charset=utf-8');
$return = array();
$dom = new DOMDocument("1.0","UTF-8");
@$dom->loadHTML($source);
$dom->preserveWhiteSpace = false;

foreach($dom->getElementsByTagName('h1') as $headings) {
    if($headings->getAttribute('class') == "band name"){
        $title = $headings->nodeValue;
    }
}

echo $title; //Häuptling and "(R) Brechende Zäune
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:26:40.817

解析比正则表达式更可靠：

```
 $yourhtml = '<br><h1 class="band name">argh!</h1><span class="bandinfotop">';
   $dom = new DOMDocument();
   $dom->recover = true;
   $dom->loadHTML($yourhtml);
   $x = new DOMXPath($dom);
   foreach($x->query('//h1[@class="band name"]') as $node) var_dump($node->nodeValue); 
```

但是你的正则表达式也可以：

```
 $content = '<br><h1 class="band name">**Häuptling and "(R) Brechende Zäune"</h1><span class="bandinfotop">';
   $regex='#<br><h1 class="band name">(.+?)</h1><span class="bandinfotop">#';
   preg_match($regex,$content,$match);
   var_dump(htmlentities(strip_tags($match[1]),null,'utf-8'));
   $content = '<br><h1 class="band name">!n:fact"</h1><span class="bandinfotop">';
   preg_match($regex,$content,$match);
   var_dump(htmlentities(strip_tags($match[1]),null,'utf-8'));

   //string(47) "**H&auml;uptling and "(R) Brechende Z&auml;une""
   //string(8) "!n:fact"" 
```

...所以你的特殊问题是其他地方。

# sql - 如何从需要过滤器的子查询中聚合数据？

> ID：11041441
> 
> 赞同：1
> 
> 时间：2012-06-14T21:13:03.677
> 
> 标签：sql, sql-server, tsql, sql-server-2005

对不起，如果标题令人困惑，我会尽力解释。我有一个查询需要有几个聚合字段，但我不知道如何编写其中一个。这是当前脚本：

```
DECLARE @Date DATETIME;
DECLARE @FromDate VARCHAR(25);
DECLARE @ToDate VARCHAR(25);

SET     @Date = GETDATE();
SET     @FromDate = CONVERT(VARCHAR(25), DATEADD(dd, -(DAY(@Date) - 1), @Date),101);
SET     @ToDate = CONVERT(VARCHAR(25), DATEADD(dd, -(DAY(DATEADD(mm, 1, @Date))), DATEADD(mm,1,@Date)), 101);

SELECT  DISTINCT    [A].[Name],
                    COUNT([O].[Id]) AS [OpportunityCount],
                    (CASE WHEN (SUM([O].[Amount]) IS NULL) THEN 0.00 ELSE SUM([O].[Amount]) END) AS [OpportunityTotalAmounts]
                    --(SELECT COUNT(1) FROM [Opportunity] AS [O1] WHERE ([O1].[Id] = [O].[Id]) AND ([O1].[StageName] != 'Not Sold'))
FROM                [Account] AS [A]
                    JOIN [RecordType] AS [RT] ON ([A].[RecordTypeId] = [RT].[Id])
                    JOIN [Contact] AS [C] ON ([A].[Id] = [C].[AccountId])
                    JOIN [OpportunityContactRole] AS [OCR] ON ([C].[Id] = [OCR].[ContactId])
                    LEFT OUTER JOIN [Opportunity] AS [O] ON ([OCR].[OpportunityId] = [O].[Id])
WHERE               ([RT].[Name] = 'PHX')
                    AND ([A].[TypeMS__c] != 'Customer')
                    AND ([O].[CreatedDate] BETWEEN @FromDate AND @ToDate)
GROUP BY            [A].[Name]; 
```

你会注意到一个注释掉的行。在该行上，我想计算所有`Opportunities`未标记为`'Not Sold'`. 如果我添加`[O].[Id]`到，它会起作用`GROUP BY`，但是结果集会扩展，因为分组被搞砸了。

我怎样才能得到我想要的计数？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:18:30.537

```
DECLARE @Date DATETIME;
DECLARE @FromDate VARCHAR(25);
DECLARE @ToDate VARCHAR(25);

SET     @Date = GETDATE();
SET     @FromDate = CONVERT(VARCHAR(25), DATEADD(dd, -(DAY(@Date) - 1), @Date),101);
SET     @ToDate = CONVERT(VARCHAR(25), DATEADD(dd, -(DAY(DATEADD(mm, 1, @Date))), DATEADD(mm,1,@Date)), 101);

SELECT  DISTINCT    [A].[Name],
                    COUNT([O].[Id]) AS [OpportunityCount],
                    (CASE WHEN (SUM([O].[Amount]) IS NULL) THEN 0.00 ELSE SUM([O].[Amount]) END) AS [OpportunityTotalAmounts],
                    SUM(CASE WHEN [O].[StageName] != 'Not Sold' THEN 1 ELSE 0 END) 
FROM                [Account] AS [A]
                    JOIN [RecordType] AS [RT] ON ([A].[RecordTypeId] = [RT].[Id])
                    JOIN [Contact] AS [C] ON ([A].[Id] = [C].[AccountId])
                    JOIN [OpportunityContactRole] AS [OCR] ON ([C].[Id] = [OCR].[ContactId])
                    LEFT OUTER JOIN [Opportunity] AS [O] ON ([OCR].[OpportunityId] = [O].[Id])
WHERE               ([RT].[Name] = 'PHX')
                    AND ([A].[TypeMS__c] != 'Customer')
                    AND ([O].[CreatedDate] BETWEEN @FromDate AND @ToDate)
GROUP BY            [A].[Name]; 
```

这是诀窍，您已经定义了一个连接，因此您只需使用`CASE`语句将 StageName 与 Not Sold 的不同之处求和

```
 SUM(CASE WHEN [O].[StageName] != 'Not Sold' THEN 1 ELSE 0 END) 
```

# json - grails web 服务 json id 字段

> ID：11041450
> 
> 赞同：0
> 
> 时间：2012-06-14T21:13:58.173
> 
> 标签：json, grails

我创建了一个返回一些 json 的小型 Web 服务，返回的 json 值如下所示：

```
[{"class":"simple.web.service.Stock","id":null,"name":"GOOG","price":123.45},   {"class":"simple.web.service.Stock","id":null,"name":"APPL","price":345.67}] 
```

我的对象不包含*id*字段。那是从哪里来的？它应该如何填充？

另外，包括*类*字段标准吗？如果我不想包含它怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:58:23.030

该`id`属性默认在域对象上创建，就像`version`（除非您明确告诉它不包含`version`）。两者都是在正常使用下自动设置和维护的。如果需要，您可以控制如何创建/填充 id - 请参阅[手册](http://grails.org/doc/latest/guide/GORM.html#identity)。

出于安全原因，JSON 构造函数默认不返回实际的 id 或版本。要包含它们或不包含其他项目，您可能需要创建自定义 JSON 编组器。

Bootstrap 中的类似内容仅包含`name`and `price`：

```
import grails.converters.JSON
class BootStrap {
    def init = {servletContext ->
        JSON.registerObjectMarshaller(Stock) {
            def returnArray = [:]
            returnArray['name'] = it.name
            returnArray['price'] = it.price
            return returnArray
    } 
```

}

# open-source - 我需要对我的开源项目进行版权保护吗？

> ID：11041451
> 
> 赞同：-2
> 
> 时间：2012-06-14T21:14:19.873
> 
> 标签：open-source, licensing, gpl

我已决定使用 GPL 许可，但我想知道是否需要先从美国版权局或印度版权局为我的代码申请版权。我来自印度。

此外，如果我需要对我的源代码进行版权保护，有人知道这需要多少钱吗？我也尝试在 gpl 网站上阅读 Copyleft 的含义，但对于不会说英语的人来说，它很难阅读和理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T21:18:44.360

引用自[维基百科](https://en.wikipedia.org/wiki/Copyright)：

> 在所有适用《伯尔尼公约》标准的国家，版权是自动的，无需通过任何政府机构的正式注册获得。

这包括印度。

许可证本身中列出了应用 GPL 的说明。简而言之，只需将样板文件复制到相关源文件中，填写您的姓名和当前年份即可。

# java - Java GUI 中的数组反序列化问题

> ID：11041453
> 
> 赞同：1
> 
> 时间：2012-06-14T21:14:32.993
> 
> 标签：java, user-interface, serialization, arraylist, deserialization

现在我需要一些帮助来序列化我的数组列表。现在我已经设法让序列化方面工作（至少我认为），现在我的问题在于反序列化对象。我正在制作一个小型地址簿程序。我有一个组合框，用于存储用户输入的三个文本框上方的地址：姓名、地址和电话号码。出于测试目的，我有一个保存和加载按钮。保存按钮保存联系人，加载按钮加载以前的会话联系人。现在除了反序列化之外的所有东西都可以工作，我想知道如何继续它。

我的代码如下：

```
import java.awt.EventQueue;

import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JLabel;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.ArrayList;

public class Address_Book {

    private JFrame frame;
    private JTextField newName;
    private JTextField newAddress;
    private JTextField newPhoneAddress;
    ArrayList<Book> test = new ArrayList<Book>();
    ArrayList<Book> array = new ArrayList<Book>();

    File addBook = new File("addBook.txt");

    final JComboBox<String> comboBox = new JComboBox<String>();
    final DefaultComboBoxModel<String> model = new DefaultComboBoxModel<String>();

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    Address_Book window = new Address_Book();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the application.
     */
    public Address_Book() {
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {         
        frame = new JFrame();
        frame.setBounds(100, 100, 450, 250);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(null);

        newName = new JTextField();
        newName.setBounds(10, 29, 107, 20);
        frame.getContentPane().add(newName);
        newName.setColumns(10);

        JLabel lbl1 = new JLabel("Enter New Name:");
        lbl1.setBounds(10, 11, 107, 14);
        frame.getContentPane().add(lbl1);

        JLabel lbl2 = new JLabel("Enter New Address:");
        lbl2.setBounds(136, 11, 130, 14);
        frame.getContentPane().add(lbl2);

        newAddress = new JTextField();
        newAddress.setColumns(10);
        newAddress.setBounds(136, 29, 107, 20);
        frame.getContentPane().add(newAddress);

        newPhoneAddress = new JTextField();
        newPhoneAddress.setColumns(10);
        newPhoneAddress.setBounds(262, 29, 162, 20);
        frame.getContentPane().add(newPhoneAddress);

        JLabel lbl3 = new JLabel("Enter New Phone number:");
        lbl3.setBounds(262, 11, 162, 14);
        frame.getContentPane().add(lbl3);

        JButton btnAddNewContact = new JButton("Add new contact");
        btnAddNewContact.addMouseListener(new MouseAdapter() {

            @Override
            public void mousePressed(MouseEvent arg0) {
                test.add((new Book(newName.getText(), newAddress.getText(), newPhoneAddress.getText())));

                //mergesort.mergesort(test, 0, test.size() - 1);

                model.removeAllElements();
                for(int i=0; i < test.size();i++){
                    model.addElement(test.get(i).getContact()); 
                }
                comboBox.setModel(model);

                newName.setText(""); 
                newAddress.setText("");
                newPhoneAddress.setText("");
            }
        });
        btnAddNewContact.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
            }
        });
        btnAddNewContact.setBounds(10, 53, 414, 23);
        frame.getContentPane().add(btnAddNewContact);

        JLabel lbl4 = new JLabel("Current Contacts:");
        lbl4.setBounds(10, 87, 107, 14);
        frame.getContentPane().add(lbl4);

        frame.getContentPane().add(comboBox);

            comboBox.setModel(model);
            comboBox.setBounds(10, 101, 414, 20);
            comboBox.setSelectedIndex(test.size()-1);

            JButton btnLoad = new JButton("Load");
            btnLoad.addMouseListener(new MouseAdapter() {
                @Override
                public void mousePressed(MouseEvent e) {

                    try {
                        /* Read objects */

                        FileInputStream in = new FileInputStream(addBook);
                        ObjectInputStream readIn = new ObjectInputStream(in);

                        array = (ArrayList<Book>) readIn.readObject();
                        readIn.close(); 

                        for(int i=0; i < array.size();i++){
                            model.addElement(array.get(i).getContact());    
                        }
                        comboBox.setModel(model);
                    }catch(Exception e1){
                        e1.printStackTrace();
                    }

                }
            });
            btnLoad.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent arg0) {
                }
            });
            btnLoad.setBounds(10, 132, 89, 23);
            frame.getContentPane().add(btnLoad);

            JButton btnSave = new JButton("Save");
            btnSave.addMouseListener(new MouseAdapter() {
                @Override
                public void mousePressed(MouseEvent arg0) {
                    /* write objects */
                    try{

                        FileOutputStream out = new FileOutputStream(addBook);
                        ObjectOutputStream writeAdd = new ObjectOutputStream(out);
                        writeAdd.writeObject(test);
                        writeAdd.close();

                    }catch(Exception e){

                    }
                }
            });
            btnSave.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                }
            });
            btnSave.setBounds(109, 132, 89, 23);
            frame.getContentPane().add(btnSave);
    }
} 
```

这是我的对象：

```
public class Book implements Comparable {
     private String flName, Address, pNumber;

    public Book(String Name, String address, String phoneNumber ){
        setFlName(Name);
        setAddress(address);
        setpNumber(phoneNumber);
    }

    public String getpNumber() {
        return pNumber;
    }

    public void setpNumber(String pNumber) {
        this.pNumber = pNumber;
    }

    public String getAddress() {
        return Address;
    }

    public void setAddress(String address) {
        Address = address;
    }

    public String getFlName() {
        return flName;
    }

    public void setFlName(String flName) {
        this.flName = flName;
    }  

    public String getContact() {
        return flName + ", " + Address + ", " + pNumber;
    }

    public int compareTo(Object c) {
        Book testBook = (Book)c;

        if (testBook.getFlName().compareTo(this.getFlName()) < 0){
            return(-1);
        }else if(testBook.getFlName().compareTo(this.getFlName()) == 0){
            return(0);
        }else{
            return(1);
        }
    }

} 
```

下一个代码点在我的 Address_Book 类中，这是我给你的第一个代码，这只是为了更容易找到我从哪里加载它。

```
JButton btnLoad = new JButton("Load");
            btnLoad.addMouseListener(new MouseAdapter() {
                @Override
                public void mousePressed(MouseEvent e) {

                    try {
                        /* Read objects */

                        FileInputStream in = new FileInputStream(addBook);
                        ObjectInputStream readIn = new ObjectInputStream(in);

                        array = (ArrayList<Book>) readIn.readObject();
                        readIn.close(); 

                        for(int i=0; i < array.size();i++){
                            model.addElement(array.get(i).getContact());    
                        }
                        comboBox.setModel(model);
                    }catch(Exception e1){
                        e1.printStackTrace();
                    }

                }
            });
            btnLoad.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent arg0) {
                }
            });
            btnLoad.setBounds(10, 132, 89, 23);
            frame.getContentPane().add(btnLoad); 
```

感谢您的宝贵时间，如果您有任何问题，请随时提问。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:30:25.020

*   您的 Book 类没有实现 Serializable。修复此问题，因为这是您的异常的原因，因此是您当前尝试序列化失败的主要原因`ArrayList<Book>`。
*   谷歌并阅读序列化教程。
*   同样，当您应该使用 ActionListener 时，不要在 JButtons 上使用 MouseListeners。这不会导致您的问题，但如果不修复会导致未来的问题。请阅读有关如何使用 JButtons 的 Java 教程，因为那里已经解释了所有内容。
*   同样，当您尝试为已经很复杂的程序实现新的复杂功能时，请先隔离复杂程序，以便在将其添加到更大的程序之前隔离并修复任何问题。如果您的新代码导致错误，则更是如此。

# osgi - 影响最低的 OSGi 容器

> ID：11041456
> 
> 赞同：2
> 
> 时间：2012-06-14T21:15:01.803
> 
> 标签：osgi, apache-felix

我正在寻找一个小型 OSGi 容器来安装在将成为网络设备类型的产品中。我一直在阅读有关当前玩家的信息：Concierge、Felix、Equinox、Knoplerfish。Concierge 似乎是我的目的的最佳竞争者，但它的开发活动似乎很低。

礼宾服务即将结束？

我已经在 ServiceMix 中运行了我的包，所以我知道我的东西可以与 Felix 一起使用。我应该只使用它，因为它在项目中更活跃。是否有人在最近（2 年）交付的项目中使用 Concierge，如果是，您打算坚持使用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T00:31:28.320

Concierge 确实很小，但它是一个 OSGi Release 3 框架。作为参考，Release 4 于 2004 年发布。因此，很少有最近的捆绑软件会在它上面运行，因为许多依赖于作为 Release 4 规范一部分的特性。

如果您自己开发所有捆绑包，这可能不是问题，但它会严重限制您可以选择的现成捆绑包的选择。

就规模而言，Felix 将是 Concierge 的下一个升级者。它绝对是我的首选，并且非常积极地开发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T07:23:10.843

检查[mBedded Server](http://www.prosyst.com/media/prosyst_media/img_news/World%C2%B4s%20smallest%20OSGi%20solution%20-%20Technical%20Paper.pdf) - 它可以在小至 8 MB RAM 上运行 - 你不能得到比这更低的 :)

它与 OSGi 4.2 兼容，并且正在许多项目中使用。有多种口味可供选择 - 用于远程信息处理、智能家居、移动......

# objective-c - 按下按钮时打开 XIB 窗口

> ID：11041459
> 
> 赞同：0
> 
> 时间：2012-06-14T21:15:09.523
> 
> 标签：objective-c, window, xib

真的很难让它发挥作用。我已将 xib 文件中的窗口声明为 IBOutlet，并尝试将其发送为“makeKeyAndOrderFront”，但它无法正常工作。我知道基于此还有其他问题，但它们似乎对我没有帮助。我对这一切有点陌生，如果我的术语不对，我很抱歉。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:31:54.640

尝试在[这里](https://stackoverflow.com/questions/10785265/show-modal-window-using-nib-file/10789149#10789149)使用我的指令。关于显示窗口模式的最后一部分在您的情况下没有用。其他的都是。如果您有问题，请尝试准确地描述它们。只有这样我们才能帮助你。请将您的代码复制到您的问题下方，以便我们查看。

其他一切都只是每个人的猜测。

# vim - Go 的 Vim makeprg 和错误格式

> ID：11041462
> 
> 赞同：6
> 
> 时间：2012-06-14T21:15:14.087
> 
> 标签：vim, go

如果出现编译错误，我希望能够从 vim 中构建和运行 Go 代码，并可以访问 quickfix 窗口。

为了用 Java 实现接近这个目标，我在我的 .vimrc 中添加了以下内容：

```
autocmd Filetype java set makeprg=ant\ -find\ build.xml
autocmd Filetype java set efm=%A\ %#[javac]\ %f:%l:\ %m,%-Z\ %#[javac]\ %p^,%-C%.%# 
```

我的 .vimrc 中目前有以下适用于 Go 的内容：

```
autocmd Filetype go set makeprg=go\ run 
```

对于具有漂亮错误报告和缓冲区下方输出的良好 ol C 程序，我可以做什么`:make`（或）表现得像？`:make %`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T22:00:42.567

对于当前工作目录由单个程序或库组成的情况，以下内容适用于 Vim：

```
autocmd Filetype go set makeprg=go\ build 
```

对于只需要编译一个文件的情况，我会使用以下命令覆盖它：

```
:set makeprg=go\ build\ hello.go 
```

更多内容可以在 jnwhiteh 的[vim-golang](https://github.com/jnwhiteh/vim-golang)中找到。

# php - jQuery 仅在 div 中已存在时才更改

> ID：11041463
> 
> 赞同：0
> 
> 时间：2012-06-14T21:15:14.317
> 
> 标签：php, jquery

我目前有一个页面，`div`周围`ID`有一个是和否按钮。选择按钮时，jQuery替换了其调用的文件中`ID`的信息。`add_song.php`

当艺术家更改它更改艺术家 ID 时，我在页面上的下拉菜单中进行了直播`change`和直播。问题是当我选择是或否时，如果我更改它加载的艺术家姓名。`keyup``add_song.php``add_song.php`

我如何仅在单击是或否按钮后加载时才允许`change`和`keyup`更改艺术家，而不是在/更改艺术家时加载。`add_song.php``change``keyup`

这是PHP：

```
echo '<span class="edit-buttons"><input type="submit" value="yes" id="add_existing_song"></span>';
echo '<span style="padding-left:10px" class="edit-buttons"><input type="submit" value="no" id="add_new_song"></span>';
echo '<div id="display_add_new_song"></div>'; 
```

抱歉，这里是 jquery 代码：

```
$(document).ready(function(){
      $("#add_new_song").live("click", function() {
      var artistid = $("#artist").val();
      $("#display_add_new_song").load("php/add_song_new.php?var1=" + artistid);
});
});

$(document).ready(function(){
      $("#artist").change(function() {
      var artistid = $("#artist").val();
      $("#display_add_new_song").load("php/add_song_new.php?var1=" + artistid);
});
});

$(document).ready(function(){
      $("#artist").keyup(function() {
      var artistid = $("#artist").val();
      $("#display_add_new_song").load("php/add_song_new.php?var1=" + artistid);
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:19:05.013

您应该将`keyup`/的事件绑定移动`change`到`.load` [回调函数](http://api.jquery.com/load/)中。`.load`可能需要第二个参数，它是在内容加载后立即执行的回调，允许您在`#artist`加载后立即绑定事件。

此外，您可以将文档准备好后要执行的 JavaScript 合并到一个块中，并且可以将要绑定的事件组合到相同的功能，这将删除脚本中的一些重复代码。

考虑到您的代码，您应该将其更改为以下内容：

```
$(document).ready(function(){
    $("#add_new_song").live("click", function() {
        var artistid = $("#artist").val();
        $("#display_add_new_song").load("php/add_song_new.php?var1=" + artistid, function(){
            $("#artist").on("keyup change", function() {
                var artistid = $("#artist").val();
                $("#display_add_new_song").load("php/add_song_new.php?var1=" + artistid);
            });
        });
    });
}); 
```

# spring - spring 3.1：加载 bean 时内存不足。

> ID：11041466
> 
> 赞同：0
> 
> 时间：2012-06-14T21:15:19.523
> 
> 标签：spring, javabeans, out-of-memory, legacy-code

我有以下 xml。遗留：xml（无法更改，因为它是外部化的）。

```
 <bean id="oracleLobHandler" class="org.springframework.jdbc.support.lob.OracleLobHandler" lazy-init="true">
        <property name="nativeJdbcExtractor" ref="dbcpJdbcExtractor"/>
    </bean>

    <!-- LobHandler for well-behaved JDBC drivers -->
    <!-- (simply delegating to corresponding PreparedStatement and ResultSet methods) -->
    <bean id="defaultLobHandler" class="org.springframework.jdbc.support.lob.DefaultLobHandler" lazy-init="true"/>

    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="defaultDataSource"/>
    </bean>

    <bean id="dbcpJdbcExtractor" class="org.springframework.jdbc.support.nativejdbc.CommonsDbcpNativeJdbcExtractor"
            lazy-init="true"/>
</beans> 
```

违规代码：

```
BeanFactory getBeanFactory() {
    new XmlBeanFactory(new ClassPathResource("/META-INF/beans.xml"));
} 
```

日志：org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68) org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85) org.springframework.beans.factory。 parsing.ReaderContext.error(ReaderContext.java:76) org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:245) org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java: 196)

怎么了？顺便说一句，我在使用 spring 1.2 时从未遇到过问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:13:10.977

实际上，我通过使应用程序上下文的创建静态化来减少它。

所以创建一个实例

private static final applicationContext ctx 并且只使用一次。

# scala - 为什么 List[Int] 是 List[Boolean] 的一个实例？

> ID：11041472
> 
> 赞同：3
> 
> 时间：2012-06-14T21:15:41.683
> 
> 标签：scala

当我使用 Scala REPL (Scala 2.9.1) 玩了一下时，我看到了 isInstanceOf 方法的惊人结果：

```
scala> val l = List[Int](1, 2, 3)
l: List[Int] = List(1, 2, 3)

scala> l.isInstanceOf[List[Int]]
warning: there were 1 unchecked warnings; re-run with -unchecked for details
res3: Boolean = true

scala> l.isInstanceOf[List[String]]
warning: there were 1 unchecked warnings; re-run with -unchecked for details
res4: Boolean = true

scala> l.isInstanceOf[List[Boolean]]
warning: there were 1 unchecked warnings; re-run with -unchecked for details
res5: Boolean = true 
```

谁能解释最后两个结果？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T21:21:51.040

重新运行`-unchecked`：

```
scala> l.isInstanceOf[List[Int]]
<console>:9: warning: non variable type-argument Int in type List[Int] is 
unchecked since it is eliminated by erasure
              l.isInstanceOf[List[Int]]
                        ^ 
```

对象的具体类型在运行时是未知的。这是 JVM 提供的泛型机制的一般特性/限制。有关详细信息，请参阅[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T21:33:59.507

这是由于类型擦除将 List 中的 Int 类型参数替换为它可以找到的最通用类型绑定。在这种情况下，我相信是 scala.Any。

请注意，这些也将产生 true：

```
scala> l.isInstanceOf[List[scala.Nothing]]
warning: there were 1 unchecked warnings; re-run with -unchecked for details
res0: Boolean = true

scala> l.isInstanceOf[List[Any]]
warning: there were 1 unchecked warnings; re-run with -unchecked for details
res1: Boolean = true

scala> l.isInstanceOf[List[Object]]
warning: there were 1 unchecked warnings; re-run with -unchecked for details
res2: Boolean = true 
```

使用 javap 反汇编这个简单的类，我们可以看到 List[Int] 中实际上没有泛型类型：

```
class Bar{
  val list = List[Int](1,2,3)
} 
```

反汇编的scala代码：

```
public class Bar extends java.lang.Object implements scala.ScalaObject{
  public scala.collection.immutable.List list();
  public Bar();
} 
```

# sql - 将 SQL 查询转换为 Doctrine 2

> ID：11041474
> 
> 赞同：0
> 
> 时间：2012-06-14T21:15:51.853
> 
> 标签：sql, symfony, doctrine-orm

我有两张桌子：

```
author (id, first_name, last_name)
books (id, title, rate, author_id) 
```

我需要找到评价最高的书的作者（每位作者一本）。

在 sql 中：

```
SELECT a.*, highest_rated_book.*
      FROM authors a
      LEFT JOIN (SELECT * FROM books b ORDER BY b.rate DESC) AS highest_rated_book
      ON a.id = highest_rated_book.author_id
      GROUP BY highest_rated_book.author_id
      ORDER BY a.id; 
```

但我在 Doctrine 2 中需要这个。我遇到的最大问题是结合左连接和子选择。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:06:12.853

使用 DQL，您似乎只能加入关联的实体（参见[http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/dql-doctrine-query-language .html#from-join-and-index-by](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/dql-doctrine-query-language.html#from-join-and-index-by)）。

您可以做的是使用本机查询，它允许您使用原始 sql。

有关使用 Doctrine 2 的 Native SQL 的更多信息可以在这里找到：http: [//docs.doctrine-project.org/en/latest/reference/native-sql.html](http://docs.doctrine-project.org/en/latest/reference/native-sql.html)

# jquery - jVectorMap 动画 onRegionClick

> ID：11041483
> 
> 赞同：1
> 
> 时间：2012-06-14T21:16:29.030
> 
> 标签：jquery, animation, jvectormap

我正在使用 jVectorMap 插件，它的易用性和易用性给我留下了深刻的印象。

我的问题是：有没有办法在 onRegionClick 回调函数上插入某种动画？

我的地图以单独的`<div>`. 我现在有：

```
$(function(){
    $('#map').vectorMap({
        map: 'world',
        values: publications,
        scaleColors: ['#C8EEFF', '#0071A4'],
        normalizeFunction: 'polynomial',
        hoverOpacity: 0.7,
        hoverColor: false,
        backgroundColor: '#383f47',
        onLabelShow: function(e, el, code){
            el.text(el.html()+' ('+code+') '+publications[code]);
        },
        onRegionClick: showPublications
    });
}); 
```

地图和回调函数就像一个魅力，但我想添加一些动画来更好地理解显示列表。

啊，我对函数“showPublications”使用了一个js switch语句。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T01:36:04.930

您可以使用 jQuery [**fadeIn()**](http://api.jquery.com/fadeIn/)方法：

```
$('#myDiv').fadeIn(200); 
```

# c# - 如何有条件地显示/隐藏 DetailsView ItemTemplate 中的链接

> ID：11041488
> 
> 赞同：0
> 
> 时间：2012-06-14T21:16:49.407
> 
> 标签：c#, asp.net, detailsview

我是 ASP.NET 的新手，我试图弄清楚如果值不是空值或空格，如何仅在 .aspx 文件中显示一段代码。这是我所拥有的，在 a 内`DetailsView`：

```
<asp:TemplateField HeaderText="Phone">
    <EditItemTemplate>
        <asp:TextBox runat="server" ID="txtPhone" Text='<%# Bind("Phone") %>'></asp:TextBox>
    </EditItemTemplate>
    <ItemTemplate>
        <a href="tel:<%# Eval("Phone") %>">
            <i class="icon-phone"></i>
            <%# Eval("Phone") %>
        </a>
    </ItemTemplate>
</asp:TemplateField> 
```

如果为空或空格，我想有条件地隐藏整个`a`标签。`Eval("Phone")`我宁愿在标记中做这一切，而不是在代码隐藏中做一些事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:37:29.910

[大卫的回答](https://stackoverflow.com/a/11041649/38743)为我指明了正确的方向：

```
<asp:HyperLink runat="server" NavigateUrl='tel:<%# Eval("Phone") %>'
        Visible='<%# !string.IsNullOrWhiteSpace(Eval("Phone").ToString()) %>'>
    <i class="icon-phone"></i>
    <%# Eval("Phone") %>
</asp:HyperLink> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:30:38.417

首先，将其更改为 ASP:Hyperlink 控件。html A 标签没有像 ASP:Hyperlink 控件那样方便的 Visible 属性。

然后，您可以以声明方式设置可见性。

```
<asp:HyperLink runat="Server" NavigateUrl='tel:<%# Eval("Phone") %>' Text='<%# Bind("Phone") %>' Visible = '<%= DataBinder.Eval(Container.DataItem("phone").ToString().Trim() == "" %>' /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:31:31.020

恐怕您不能在 eval 语句中执行条件 if 。相反，只需用函数包装简单的 eval，但为了处理这种情况，我通常添加一个名为 NullHandler() 的方法。考虑下面的函数。

```
protected string NullHandler()(object gridViewObject)
   {
        if (object.ReferenceEquals(gridViewObject, DBNull.Value))
      {
            return "Empty";
       }
        else
       {
            return gridViewObject.ToString();
      }
    } 
```

然后你可以像下面这样

```
<asp:Label ID=”phoneLbl” runat=”server” Text=’&lt;%# NullHandler(Eval(“Phone”)) %>’&gt; 
```

希望这有帮助。

# c - 链表 A 与另一个 B 相关联，而 B 又与 A 相关联

> ID：11041490
> 
> 赞同：1
> 
> 时间：2012-06-14T21:17:01.090
> 
> 标签：c, linked-list

// 2 个由指针绑定的结构

```
 struct A_cust            // customer information, a double-linked list with another pointer
   {
    char cust_info [20];  // as an example
    A_cust *prevCust;     // prev customer record
    A_cust *nextCust;     // next customer record
    B_tran *point_to_B;   // to the list of transaction records
   };

 struct B_tran            // transaction records, a double-linked list with another pointer
   {
    char cust_tran [20];  // as an example
    B_tran *prevTran;     // prev customer transaction
    B_tran *nextCust;     // next customer transaction
    A_cust *point_to_A    // to the list of customer records
   }; 
```

编译器在解析“A_cust”时不知道“B_tran”如果我首先放置“B_tran”的定义，那么编译器不知道“A_cust”是什么

任何想法，欧内斯特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:18:19.600

在代码顶部添加以下声明

```
struct B_tran; 
```

**编辑**：这称为前向声明，您承诺编译器将在`B_tran`以后定义。（感谢格雷格）

# c# - 检查 Word 是否可见时执行冻结

> ID：11041494
> 
> 赞同：4
> 
> 时间：2012-06-14T21:18:12.243
> 
> 标签：c#, ms-word, office-interop

在执行某些任务之前，我会检查 Word 是否仍然可见。问题是我在检查可见性时关闭 Word 2010 后执行就冻结了。2007 年不会出现。

```
//Initializing Word and Document

While(WordIsOpen())
{
}

//Perform Post Close Tasks

public bool WordIsOpen()
{
     if(MyApp.Application.Visible)//Execution just freezes at this line after Word is not visible
            return true;
     else
            return false;
} 
```

有人以前见过这个问题吗？

有没有更好的方法来检查这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:34:38.400

我的建议是声明一个哨兵标志：

```
private bool isWordApplicationOpen; 
```

初始化您的[`Application`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.application.aspx)实例时，订阅其[`Quit`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.applicationevents4_event.quit)事件，并从那里重置标志：

```
MyApp = new Word.Application();
MyApp.Visible = true;
isWordApplicationOpen = true;
((ApplicationEvents3_Event)MyApp).Quit += () => { isWordApplicationOpen = false; };
// ApplicationEvents3_Event works for Word 2002 and above 
```

然后，在您的循环中，只需检查是否设置了标志：

```
while (isWordApplicationOpen)
{
    // Perform work here.       
} 
```

**编辑**：鉴于您只需要等到 Word 应用程序关闭，以下代码可能更合适：

```
using (ManualResetEvent wordQuitEvent = new ManualResetEvent(false))
{
    Word.Application app = new Word.Application();

    try
    {
        ((Word.ApplicationEvents3_Event)app).Quit += () =>
        {
            wordQuitEvent.Set();
        };

        app.Visible = true;

        // Perform automation on Word application here.

        // Wait until the Word application is closed.
        wordQuitEvent.WaitOne();
    }
    finally
    {
        Marshal.ReleaseComObject(app);
    }
} 
```

# c - 梯形波动方程的方程

> ID：11041498
> 
> 赞同：4
> 
> 时间：2012-06-14T21:18:28.370
> 
> 标签：c, math, graph, waveform

我正在编写 ac 函数来生成梯形波。有谁知道产生梯形波的数学方程？与 y=A*sin(B*x) 非常相似的想法为不同的 x 值生成正弦波。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-14T22:29:22.310

您可以使用一个方程式来代替限制。

```
a/pi(arcsin(sin((pi/m)x+l))+arccos(cos((pi/m)x+l)))-a/2+c 
```

*   `a`是幅度
*   `m`是期间
*   `l`是水平过渡
*   `c`是垂直过渡

另外，这是一个直接的三角函数，尽管它可能更长，而且更复杂一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T12:24:42.280

发送梯形波单脉冲的一种方法包括使用 Heaviside Step Function [http://en.wikipedia.org/wiki/Heaviside_step_function](http://en.wikipedia.org/wiki/Heaviside_step_function)

如果您想要表示这种函数的“纯”数学方式，请使用它。只需“逐个”构建您的函数，将第一个部分乘以当 x = 脉冲开始时“激活”的重质。对于下一块，首先减去最后一个函数，然后添加新的数学函数，将其乘以适当的重载函数，依此类推。它应该以这样的方式结束（如果您不明白，请查看维基百科文章）：

```
H(n) := (x >= n)?1:0;
y := H(0)*(x) + H(1)*(-x + 1) + H(2)*(-(-x + 1) + (3-x)); 
```

但是，为了代码的简单性和效率，让我们使用 if 语句。考虑一个具有恒定单位速度的 45 度梯形波。

```
float trapezoidalWave(float x, float t) {

    float y;

    if ( x <= t + 1 ) {
        // 45 degree ascending line
        y = x - t;
    } else if ( x <= t + 2) {
        // horizontal line
        y = 1;
    } else if (x <= t + 3) {
        // 45 degree descending line
        y = t + 3 - x;
    } else {
        y = 0;
    }

    return y;        

} 
```

如果您想要一个“长波”而不仅仅是一个脉冲，请使用模块 (%)，如果您不需要时间变量，只需将其替换为 0。

# git - 如何识别 Git 和 Mercurial 中的交叉合并？

> ID：11041499
> 
> 赞同：4
> 
> 时间：2012-06-14T21:18:28.157
> 
> 标签：git, mercurial, merge, git-merge

我想确定一些 Git 和 Mercurial 开源项目中存在的[交叉合并的数量，仅用于研究目的。](http://web.archive.org/web/20090805232313/http://wiki.vestasys.org/MergingFuture/Food4Thought/TrickyCases)关于如何做到这一点的任何建议？

如果合并具有两个不同的共同祖先，则可以确定交叉合并。它正在为 Mercurial 开发一种新的合并策略，称为[共识合并](http://mercurial.selenic.com/wiki/ConsensusMerge)，它将扩展祖先.ancestor() 代码以返回所有最大的共同祖先。我还找不到这段新代码，但它会有很大帮助。

我不太了解 Git，但它肯定有类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:54:27.447

我假设您想要获取存储库中任何分支之间的交叉合并次数，而不是两个分支交叉合并的次数。在这种情况下，下面的 shell 脚本应该为 Git 做：

```
#!/bin/sh

# Get the list of branches and convert it to an array.
branches=$(git for-each-ref --format='%(refname:short)' refs/heads/)
branches=( $branches )
N=${#branches[*]}

cc_merges=0

# Loop over all combinations of two branches.
for ((i=0; i<N-1; ++i)); do
    for ((k=i+1; k<N; ++k)); do
        a=${branches[$i]}
        b=${branches[$k]}
        bases=$(git merge-base --all $a $b | wc -l)
        if [ $bases -gt 1 ]; then
            let "cc_merges += 1"
        fi
    done
done

echo "Number of criss-cross merges in repository: $cc_merges" 
```

对于 Mercurial，不幸的是，它的`ancestor()`revset 和`debugancestor`命令都只列出了最大的共同祖先，而不是所有祖先的列表，所以我无法在这里提出解决方案。

# c# - log4net 和 nunit 测试，最基本的例子

> ID：11041502
> 
> 赞同：9
> 
> 时间：2012-06-14T21:18:34.973
> 
> 标签：c#, tdd, nunit, log4net

我想尝试从我的应用程序中记录一些应用程序消息。在这种情况下，我只想强制 nunit 使用 log4net。我在这里找到了一些例子[http://www.ofconsulting.com/PublicPortal/ofc-tech-blog/92-configure-log4net-with-nunit.html](http://www.ofconsulting.com/PublicPortal/ofc-tech-blog/92-configure-log4net-with-nunit.html)。

log4net 在 app.config 中配置如下：

```
<configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,Log4net"/>
  </configSections>

<log4net>
    <root>
      <level value="DEBUG" />
      <appender-ref ref="LogFileAppender" />
    </root>
    <appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender" >
      <param name="File" value="log.txt" />
      <param name="AppendToFile" value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="10MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%-5p%d{yyyy-MM-dd hh:mm:ss} – %m%n" />
      </layout>
    </appender>
  </log4net> 
```

**在我的测试代码中如下**

```
[TestFixture]
class DomainTests
{
    protected static readonly ILog log = LogManager.GetLogger(typeof(DomainTests));
    public void LoggingTests()
    {            
        log4net.Config.XmlConfigurator.Configure(); 
    }

    [Test]
    public void BasicLogTest()
    {
        log.Error("write my log entry already");
    } 
```

我的测试通过了，但 log.txt 文件中没有写入任何内容。我究竟做错了什么？
我只想尽可能简单地存储消息，例如进入应用程序、退出应用程序。问候。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-14T21:25:17.380

问题是 NUnit 测试运行器（当从 Visual Studio 中的 resharper 运行时）从另一个文件夹运行测试（它影子复制测试程序集），因此除非您指定完整的配置路径，否则 xml 配置此时不可用。

您当然可以使用基本配置并在代码中指定日志记录配置，例如：

```
log4net.Config.BasicConfigurator.Configure(
  new log4net.Appender.ConsoleAppender {
    Layout = new log4net.Layout.SimpleLayout()}); 
```

之后，您应该会在测试输出中看到日志输出。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-30T02:20:48.763

只要我知道并使用 log4net 和 nunit，**我从未使用过任何配置文件**，您只需要在测试类构造函数中添加以下行

```
BasicConfigurator.Configure(); 
```

如果您想查看示例测试类，[这里是完整的答案](https://stackoverflow.com/questions/159856/log4net-configuration-section-for-nunit-test-project/19672646#19672646)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-14T21:24:51.477

我最好的猜测是让你做这样的事情：

```
[TestFixture]
class DomainTests
{
    protected static readonly ILog log = LogManager.GetLogger(typeof(DomainTests));
    public void LoggingTests()
    {            
        log4net.Config.XmlConfigurator.Configure(); 
    }

    [Test]
    public void BasicLogTest()
    {
        log.Error("write my log entry already");
    }

    [SetUp]
    RunBeforeAnyTests()
    {
        BasicConfigurator.Configure();
    }

    [TearDown]
    RunAfterAnyTests()
    {
        // ...
    } 
```

我也会使用 Log4Net.config 文件而不是 app.config 文件，它看起来更干净。这是一个示例 log4net.config 文件：

```
<log4net>
  <!-- A1 is set to be a LogFileAppender -->
  <appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender, log4net" >
    <param name="File" value="C:\logging\log.txt" />
    <file value="c:\logging\Main" />
    <appendToFile value="true" />
    <datePattern value="yyyyMMdd'.log'" />
    <rollingStyle value="Composite" />
    <staticLogFileName value="false" />
    <maxSizeRollBackups value="-1" />
    <maximumFileSize value="500MB" />

    <!-- A1 uses PatternLayout -->
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%date [%thread] %-5level %logger - %message%newline" />
    </layout>
  </appender>
  <!-- Set root logger level to DEBUG and its only appender to LogFileAppender -->
  <root>
    <!--<level value="OFF" />-->
    <!--<level value="FATAL" />-->
    <!--<level value="ERROR" />-->
    <!--<level value="WARN" />-->
    <!--<level value="INFO" />-->
    <level value="DEBUG" />
    <!--<level value="ALL" />-->
    <appender-ref ref="LogFileAppender" />
  </root>
</log4net> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-14T21:26:46.527

您可以调整单元测试以检查文件本身（而不是手动检查）。注意存储在环境变量中的文件路径。这也适用于 TeamCity 测试运行器（无需硬编码路径）。

配置：

```
<log4net>
  <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
    <file type="log4net.Util.PatternString" value="%env{ALLUSERSPROFILE}\test.log" />
    <appendToFile value="true" />
    <maxSizeRollBackups value="10" />
    <maximumFileSize value="10MB" />
    <rollingStyle value="Size" />
    <staticLogFileName value="true" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%date [%thread] %-5level %logger - %message%newline" />
    </layout>
  </appender>
  <root>
    <level value="INFO" />
    <appender-ref ref="RollingLogFileAppender" />
  </root>
</log4net> 
```

代码：

```
private string _expectedFile;

[SetUp]
public void SetUp()
{
    _expectedFile = Path.Combine(
        Environment.GetEnvironmentVariable("ALLUSERSPROFILE"),
        "test.log");

    if (File.Exists(_expectedFile))
        File.Delete(_expectedFile);

    XmlConfigurator.Configure();
}

[Test] public void GivenLog4NetFileAppender_WhenLogInfoStringWithLog4Net_ThenWritesToDisk()
{
    ILog log = LogManager.GetLogger(typeof (LoggingIntegrationTests));
    log.Info("Message from test");

    LogManager.Shutdown();

    Assert.That(File.ReadAllText(_expectedFile),
                Is.StringContaining("Message from test"));
} 
```

# java - Java编译器自动重命名参数（混淆）

> ID：11041506
> 
> 赞同：5
> 
> 时间：2012-06-14T21:19:00.600
> 
> 标签：java, compiler-construction, obfuscation, javac

当我编译我正在编写的代码时，然后在 JD Gui 中查看，方法会显示如下标题：

```
public void growSurface(Random paramRandom, int paramInt1, int paramInt2){ 
```

我正在通过 .bat 文件进行编译。有没有办法指定我不想混淆代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T21:26:43.767

默认情况下，生成的文件`javac`中不包含调试信息。`class`该信息是例如方法参数名称（但始终存储方法和字段名称以允许反射）。当参数名称未知时，JD-GUI 和其他反编译器正在编造一些合理的名称。它们没有被混淆——只是它们不存在。

`-g`使用标志编译代码：

```
javac -g SomeClass.java 
```

刚刚检查了 JD-GUI - 它显示了正确的参数名称。

# java - 通过 UAC 提升 ProcessBuilder 进程？

> ID：11041509
> 
> 赞同：15
> 
> 时间：2012-06-14T21:19:19.370
> 
> 标签：java, processbuilder, elevation

我正在尝试运行一个外部可执行文件，但显然它需要提升。代码是这样的，从使用 ProcessBuilder 的示例修改而来（因此数组只有一个参数）：

```
 public static void main(String[] args) throws IOException {
        File demo = new File("C:\\xyzwsdemo");
        if(!demo.exists()) demo.mkdirs();
        String[] command = {"C:\\fakepath\\bsdiff4.3-win32\\bspatch.exe"};
        ProcessBuilder pb = new ProcessBuilder( command );
        Process process = pb.start();
        InputStream is = process.getInputStream();
        InputStreamReader isr = new InputStreamReader(is);
        BufferedReader br = new BufferedReader(isr);
        String line;
        System.out.printf("Output of running %s is:\n", Arrays.toString(command));
        while ((line = br.readLine()) != null) {
            System.out.println(line);
        }
        try {
            int exitValue = process.waitFor();
            System.out.println("\n\nExit Value is " + exitValue);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    } 
```

它在运行时返回：

```
Exception in thread "main" java.io.IOException: Cannot run program "C:\Users\Gilliane\Downloads\bsdiff4.3-win32\bspatch.exe": CreateProcess error=740, The requested operation requires elevation 
```

我做了一些浏览，并且知道在 C# 中，您可以通过这样做来请求提升，（从[这个线程](https://stackoverflow.com/questions/133379/elevating-process-privilege-programatically)可以看出）：

```
startInfo.Verb = "runas"; 
```

但是，我在 ProcessBuilder 中看不到任何类似的东西。另一种方法是在目标系统上安装[提升工具](http://technet.microsoft.com/en-us/magazine/2008.06.elevation.aspx)，并使用 ProcessBuilder 调用“提升”提示。但是，我不想强​​迫使用我的程序的人也安装那些提升工具。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-14T23:32:11.213

这不能通过 ProcessBuilder 完成，您需要调用 Windows API。

我使用[JNA](https://github.com/twall/jna)来实现这一点，代码类似于以下：

`Shell32X.java`：

```
import com.sun.jna.Native;
import com.sun.jna.Pointer;
import com.sun.jna.Structure;
import com.sun.jna.WString;
import com.sun.jna.platform.win32.Shell32;
import com.sun.jna.platform.win32.WinDef.HINSTANCE;
import com.sun.jna.platform.win32.WinDef.HWND;
import com.sun.jna.platform.win32.WinNT.HANDLE;
import com.sun.jna.platform.win32.WinReg.HKEY;
import com.sun.jna.win32.W32APIOptions;

public interface Shell32X extends Shell32
{
    Shell32X INSTANCE = (Shell32X)Native.loadLibrary("shell32", Shell32X.class, W32APIOptions.UNICODE_OPTIONS);

    int SW_HIDE = 0;
    int SW_MAXIMIZE = 3;
    int SW_MINIMIZE = 6;
    int SW_RESTORE = 9;
    int SW_SHOW = 5;
    int SW_SHOWDEFAULT = 10;
    int SW_SHOWMAXIMIZED = 3;
    int SW_SHOWMINIMIZED = 2;
    int SW_SHOWMINNOACTIVE = 7;
    int SW_SHOWNA = 8;
    int SW_SHOWNOACTIVATE = 4;
    int SW_SHOWNORMAL = 1;

    /** File not found. */
    int SE_ERR_FNF = 2;

    /** Path not found. */
    int SE_ERR_PNF = 3;

    /** Access denied. */
    int SE_ERR_ACCESSDENIED = 5;

    /** Out of memory. */
    int SE_ERR_OOM = 8;

    /** DLL not found. */
    int SE_ERR_DLLNOTFOUND = 32;

    /** Cannot share an open file. */
    int SE_ERR_SHARE = 26;

    int SEE_MASK_NOCLOSEPROCESS = 0x00000040;

    int ShellExecute(int i, String lpVerb, String lpFile, String lpParameters, String lpDirectory, int nShow);
    boolean ShellExecuteEx(SHELLEXECUTEINFO lpExecInfo);

    public static class SHELLEXECUTEINFO extends Structure
    {
        /*
  DWORD     cbSize;
  ULONG     fMask;
  HWND      hwnd;
  LPCTSTR   lpVerb;
  LPCTSTR   lpFile;
  LPCTSTR   lpParameters;
  LPCTSTR   lpDirectory;
  int       nShow;
  HINSTANCE hInstApp;
  LPVOID    lpIDList;
  LPCTSTR   lpClass;
  HKEY      hkeyClass;
  DWORD     dwHotKey;
  union {
    HANDLE hIcon;
    HANDLE hMonitor;
  } DUMMYUNIONNAME;
  HANDLE    hProcess;
         */

        public int cbSize = size();
        public int fMask;
        public HWND hwnd;
        public WString lpVerb;
        public WString lpFile;
        public WString lpParameters;
        public WString lpDirectory;
        public int nShow;
        public HINSTANCE hInstApp;
        public Pointer lpIDList;
        public WString lpClass;
        public HKEY hKeyClass;
        public int dwHotKey;

        /*
         * Actually:
         * union {
         *  HANDLE hIcon;
         *  HANDLE hMonitor;
         * } DUMMYUNIONNAME;
         */
        public HANDLE hMonitor;
        public HANDLE hProcess;

        protected List getFieldOrder() {
            return Arrays.asList(new String[] {
                "cbSize", "fMask", "hwnd", "lpVerb", "lpFile", "lpParameters",
                "lpDirectory", "nShow", "hInstApp", "lpIDList", "lpClass",
                "hKeyClass", "dwHotKey", "hMonitor", "hProcess",
            });
        }
    }

} 
```

`Elevator.java`：

```
package test;

import test.Shell32X.SHELLEXECUTEINFO;

import com.sun.jna.WString;
import com.sun.jna.platform.win32.Kernel32;
import com.sun.jna.platform.win32.Kernel32Util;

public class Elevator
{
    public static void main(String... args)
    {
        executeAsAdministrator("c:\\windows\\system32\\notepad.exe", "");
    }

    public static void executeAsAdministrator(String command, String args)
    {
        Shell32X.SHELLEXECUTEINFO execInfo = new Shell32X.SHELLEXECUTEINFO();
        execInfo.lpFile = new WString(command);
        if (args != null)
            execInfo.lpParameters = new WString(args);
        execInfo.nShow = Shell32X.SW_SHOWDEFAULT;
        execInfo.fMask = Shell32X.SEE_MASK_NOCLOSEPROCESS;
        execInfo.lpVerb = new WString("runas");
        boolean result = Shell32X.INSTANCE.ShellExecuteEx(execInfo);

        if (!result)
        {
            int lastError = Kernel32.INSTANCE.GetLastError();
            String errorMessage = Kernel32Util.formatMessageFromLastErrorCode(lastError);
            throw new RuntimeException("Error performing elevation: " + lastError + ": " + errorMessage + " (apperror=" + execInfo.hInstApp + ")");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-27T15:30:49.760

[Prunge](https://stackoverflow.com/a/11042773/4254056)的答案对我来说很好。但是经过更多研究后，我发现了另一种使用 vb 脚本和批处理文件的方法。我更喜欢这种方法，因为使用 vb-script 不会导致每次都弹出黑色 cmd 窗口，当我打开我的应用程序时。

1.  创建一个普通的bat文件来打开外部的可执行文件。我要打开一个 MySQL 服务器可执行文件

    ```
    @echo off
    cd "C:\Program Files (x86)\MySQL\MySQL Server 5.6\bin"
    :: Title not needed:
    start /MIN  mysqld.exe
    exit 
    ```

2.  保存为 mysql.bat

3.  现在创建一个具有管理员权限的 vb 脚本，并在最后添加脚本以打开 mysql.bat 文件。

最后 CreateObject("Wscript.Shell").Run 运行 bat 文件 mysql.bat。

```
Set WshShell = WScript.CreateObject("WScript.Shell")'
 If WScript.Arguments.length = 0 Then
    Set ObjShell = CreateObject("Shell.Application")
    ObjShell.ShellExecute "wscript.exe", """" & _
    WScript.ScriptFullName & """" &_
    " RunAsAdministrator", , "runas", 1
    Wscript.Quit
    End if
    CreateObject("Wscript.Shell").Run "C:\Users\Shersha\Documents\NetBeansProjects\Berries\batch\mysql.bat",0,True 
```

4.  现在将此文件保存为 mysql_start.vbs
5.  最后从 java 运行 vb 脚本。

就是这样

```
 try {
    Runtime.getRuntime().exec("wscript C:\\\\Users\\\\Shersha\\\\Documents\\\\NetBeansProjects\\\\Berries\\\\batch\\\\mysql_start.vbs");
        } catch (IOException e) {
                            System.out.println(e);
                            System.exit(0);
        } 
```

# netbeans - 在 Netbeans 的容器外运行 ejb

> ID：11041510
> 
> 赞同：0
> 
> 时间：2012-06-14T21:19:51.037
> 
> 标签：netbeans, ejb, ejb-3.0, netbeans-6.9

我正在使用 netbeans 来运行我的 Web 应用程序。现在，在我的 Web 应用程序项目中，我有一个调用 servlet 的 jsp 代码，该 servlet 调用是一个 EJB，并在 jsp 页面中显示 EJB 的输出。现在，要运行我的应用程序，我右键单击应用程序，然后按运行按钮。但是，我想在 ejb 容器之外运行我的 ejb。有人可以帮我怎么做吗？表示如何在 Netbeans 的 ejb 容器之外运行 ejb。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:02:05.160

没有容器的 EJB 的概念有点问题。EJB 容器和 EJB 从根本上是相连的。例如，容器创建 EJB 的实例，为 EJB 提供多种服务（例如事务），并在生命周期中对其进行控制。

如果是用于测试 EJB 的示例选项，则[此](http://netbeans.org/kb/docs/javaee/javaee-entapp-junit.html)页面提供有关如何将嵌入式 GlassFish 与 NetBeans 一起使用的说明。

# c# - 具有可选返回记录集的存储过程的实体框架

> ID：11041512
> 
> 赞同：6
> 
> 时间：2012-06-14T21:19:55.500
> 
> 标签：c#, entity-framework

我有一个通常返回记录集的存储过程，但在某些情况下它根本不返回记录集。这让 EF 感到有些悲痛：

“数据读取器与指定的‘myDBContext.usp_MyProc_Result’不兼容。类型的成员‘TheFirstColumn’在数据读取器中没有同名的对应列。”

如果proc没有返回任何东西，有没有办法告诉它只返回null或类似的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T21:41:09.347

在处理包含事务的非常高并发的存储过程调用时，我只见过 EF + MySQL 的这个问题，但是一旦它第一次发生，它就会发生几千倍，非常快。有趣的是，我在使用 EF + SQLServer 时从未遇到过这个错误，而且我更频繁地使用它。

为了纠正这个问题，我做了一些事情：

## 数据库级

首先，您应该更新存储过程并实现一些异常处理。 *我知道 OP 说这对他来说是不可能的，但无论如何它应该是第一个追索权！*这个例子在[mysql](/questions/tagged/mysql "显示标记为“mysql”的问题")

```
CREATE PROCEDURE `YourProcedureName` (IN YourParameter YourType)
BEGIN
    DECLARE STUFF;

    -- Thanks to tips from http://khanrahim.wordpress.com/2010/05/16/transaction-with-stored-procedure-in-mysql-server/
    -- and syntax from http://dev.mysql.com/doc/refman/5.1/en/declare-handler.html
    DECLARE EXIT HANDLER FOR SQLEXCEPTION SQLWARNING 
    BEGIN 
        ROLLBACK; 
        SELECT AnInstanceOfTheResultSet FROM YourTable WHERE 1 = 0; -- Force an empty result-set 
    END;

    START TRANSACTION;
        -- Do your complex operations
    COMMIT;
END 
```

## 代码内

其次，在代码中，使用所引发的最具体的异常来包装您的 EF 调用，即：EntityCommandExecutionException。[这是c#](/questions/tagged/c%23 "show questions tagged 'c#'")中的一个示例

```
YourType result = null;
try 
{ 
    result = yourContext.YourProcedureName(YourParameter).FirstOrDefault(); 
}
catch (EntityCommandExecutionException ecee) 
{ 
    // Log it? Handle it somehow... 
}
if (result == null)
{
    // Handle your error state
}

// Continue processing normally... 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:29:47.677

据我所知，EF 允许我们根据存储的返回值创建复杂类型。

你可以关注这个帖子

[http://weblogs.asp.net/dotnetstories/archive/2011/03/01/using-stored-procedures-with-entity-framework-in-an-asp-net-application.aspx](http://weblogs.asp.net/dotnetstories/archive/2011/03/01/using-stored-procedures-with-entity-framework-in-an-asp-net-application.aspx)

# php - 将非用户确定的变量添加到表单

> ID：11041513
> 
> 赞同：0
> 
> 时间：2012-06-14T21:19:57.890
> 
> 标签：php, html, forms, variables, post

我有一个脚本，它使用循环（特别是“while”）根据 SQL 数据库中的各种数据行生成多行数据。此脚本还在输出的行中生成一个表单。所以它最终看起来像这样：

![在此处输入图像描述](../Images/ed30938ec49c0e11e23a61c287ac552d.png)

当用户单击提交按钮时，它会在新页面 (ratinghandler.php) 上处理数据。

然后该页面将更改关联 SQL 数据库中的 a 值。

我的问题是：如果原始页面中的每一行输出对应于 SQL 数据库中的不同行，该行的“id”值可以引用该行。如何将表单与正确的“id”变量相关联。是否可以告诉表单发布表单操作员（即网站用户）未选择的数据？如果表单是作为循环的一部分生成的，我如何告诉页面 ratinghandler.php 提交的表单对应于哪一行？

我希望我很清楚我很乐意回答问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T21:21:09.060

使 id 成为表单中的隐藏字段。

```
<input type="hidden" name="id" value="X" /> 
```

# html - IE 不尊重 NBSP

> ID：11041520
> 
> 赞同：0
> 
> 时间：2012-06-14T21:20:44.233
> 
> 标签：html, internet-explorer

我目前遇到一个问题，我希望一个标签（在一个表内）都在 IE 中的一行上（firefox 似乎很好）。但目前它被分成3个：

```
...
<td class="label"><span class="mandatory">* </span>Starting Date:&nbsp;</td>
... 
```

**结果：**

```
*
Starting
Date 
```

**期望的结果：**

```
*Starting Date 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T21:23:57.217

你没有`&nbsp;`s 在正确的地方，它应该是：

```
<td class="label"><span class="mandatory">*&nbsp;</span>Starting&nbsp;Date:</td> 
```

这应该足够了，但您可能想尝试应用`white-space:nowrap`到元素。

# java - 为什么这段代码不能正确检查接口？

> ID：11041522
> 
> 赞同：0
> 
> 时间：2012-06-14T21:20:51.760
> 
> 标签：java, interface, vector, instanceof

我认为这段代码会将一个对象添加到适当的向量中，但我得到了一个空指针异常。我知道`Actor a`存在，因为`actors.add(a)`按预期工作。我研究了如何测试一个对象是否实现了一个接口，但是我能找到的所有示例都详细说明了如何调用接口的方法，而不是调用需要该接口实例的方法。

```
public void addActor(Actor a) {
    actors.add(a); // actors is a vector
    if (a instanceof Drawable) {
        panel.addDrawable((Drawable) a);
    }
} 
```

在面板中：

```
public void addDrawable(Drawable d) {
    images.add(d); // images is a vector
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:29:15.403

> 我得到一个空指针异常。我知道`Actor a`存在，因为`actors.add(a)`按预期工作。

`Vector.add(null)`不会提出一个`NullPointerException`。[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Vector.html#contains%28java.lang.Object%29)说_

> `public boolean contains(Object o)`
> 
> 返回`true`此向量是否包含指定元素。更正式地说，当且仅当此向量包含至少一个元素 e 时才返回 true 使得`(o==null ? e==null : o.equals(e))`。

# ios - 转向横向Xcode时如何更改文本字段的大小

> ID：11041527
> 
> 赞同：0
> 
> 时间：2012-06-14T21:21:53.847
> 
> 标签：ios, xcode, cocoa-touch, uikit, interface-builder

我正在创建一个 iPad 应用程序，它是一个主要包含文本框的表单。当 iPad 为纵向时，它会在两列中垂直显示文本字段。当我转动 iPad 横向时，它仍然以完全相同的方式显示文本字段，只是屏幕右侧有空地。我的问题是 - 当文本框变成横向时，如何增加标签和文本字段的大小以填充空白空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T08:00:18.203

确保正确设置文本字段的支柱和弹簧！这是您应该在 Interface Builder 中设置的内容：

![在此处输入图像描述](../Images/76c7ffd0ca9da4ccf95101f90ab0d3bc.png)

如果您使用代码执行此操作，则代码如下：

```
myTextField.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin 
```

无论哪种方式，您都必须将其设置为表单中的每个文本字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:00:45.977

如果您使用的是 XIB，请使用检查器确保将布局指南设置为固定，以便文本字段的宽度与 XIB 边缘的长度保持恒定 - 从而在界面方向更改时拉伸文本字段。

如果您在代码中布局视图，请在[UIViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)子类中实现以下内容：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{

    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];

    if( UIInterfaceOrientationIsPortrait(toInterfaceOrientation) ){
        // Adjust your text field...
    } else if( UIInterfaceOrientationIsLandscape(toInterfaceOrientation) ){
        // Adjust your text field...
    }
} 
```

# sql - VB .NET OleDbCommand 在 SQL 语句末尾返回缺少分号 (;)

> ID：11041528
> 
> 赞同：0
> 
> 时间：2012-06-14T21:21:53.970
> 
> 标签：sql, vb.net, ms-access, insert, oledbcommand

我正在使用 VB .Net 循环通过正则表达式匹配并生成 sql 语句。我正在创建这样的 sql

```
sql = "Insert Into Agencies (Address) Values"
While MatchObj.Success
    sql = sql & "(""" & MatchObj.Groups(1).Value & """), "
    MatchObj = MatchObj.NextMatch()
End While
sql = sql.Substring(0, Len(sql) - 2) & ";" 
```

所以当我在创建它后将 sql 打印到即时窗口时，我得到了这个：

```
Insert Into Agencies (Address) Values(" 1330 W Indian School Rd, "), (" 3323 E Baseline Rd, "), (" 207 N Gilbert Rd, "), (" 3160 S. Gilbert Rd., Ste. 4, "); 
```

然后我使用 sql 语句创建一个 OleDbCommand。我可以连接到数据库，但是当我运行 .ExecuteNonQuery() 时出现此错误：“SQL 语句末尾缺少分号 (;)”

我的目标是使用单个 INSERT 将所有这些值放入 DB 列“地址”中。

任何帮助深表感谢。

编辑：这是我用来打开和执行的子

```
Public Sub executeSQL(ByVal sql As String)
        Dim connString As String = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source='C:\Local Projects\AgenciesAZ.mdb'"
        Dim conn As OleDbConnection = New OleDbConnection(connString)
        Dim cmd As OleDbCommand = New OleDbCommand(sql, conn)

        conn.Open()
        cmd.ExecuteNonQuery() 'error hits here
        conn.Close()
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:27:20.717

您需要拆分插入语句，每次要在地址中插入内容时都必须使用“插入...”，而且如果您只想在 VB 中执行一次，则需要分隔每个语句使用**分号**(;)，它应该可以工作

你需要做这样的事情。

```
Insert Into Agencies (Address) Values
 (" 1330 W Indian School Rd, ");
 Insert Into Agencies (Address) Values
 (" 3323 E Baseline Rd, ");
 Insert Into Agencies (Address) Values
 (" 207 N Gilbert Rd, ");
 Insert Into Agencies (Address) Values
 (" 3160 S. Gilbert Rd., Ste. 4, "); 
```

**编辑**

你的时间应该是

```
While MatchObj.Success
sql = " Insert Into Agencies (Address) Values"

    sql = sql & "(""" & MatchObj.Groups(1).Value & """); "
    MatchObj = MatchObj.NextMatch()
End While 
```

虽然我强烈建议在单独的语句和事务中插入每一个，但这取决于你。

* * *

**编辑 2**

您不能在 MS-Access 中同时插入多条记录，您必须每次插入都插入，例如...

```
Public Sub executeSQL(ByVal sql As String)
        Dim connString As String = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source='C:\Local Projects\AgenciesAZ.mdb'"
        Dim conn As OleDbConnection = New OleDbConnection(connString)
        Dim cmd As OleDbCommand = New OleDbCommand(sql, conn)

        conn.Open()
        cmd.ExecuteNonQuery()
        conn.Close()
End Sub

 While MatchObj.Success
    sql = " Insert Into Agencies (Address) Values"

        sql = sql & "(""" & MatchObj.Groups(1).Value & """); "
        executeSQL(sql )
        MatchObj = MatchObj.NextMatch()
    End While 
```

# python - 正则表达式替换 Python

> ID：11041533
> 
> 赞同：1
> 
> 时间：2012-06-14T21:22:31.227
> 
> 标签：python, regex, text, substitution

我遇到了这个问题。我正在尝试更好地处理 RE，但它不起作用。我有一个字符串列表，如果在另一个字符串中找到它们，我想删除它们。

这是排除列表：

```
exclusionList = ['\+','of','<ET>f.','to','the','<L>L.</L>','f.','in','and','see','a','<L>Fr.</L>','as','<ET>ad.','<ET>a.','<PS>v.</PS></XR>',
             'from','<CF>ab</CF>','or','n.','<L>OFr.</L>','pple.','away','was','with','off,','pa.','on','is','cf.','stem','ad.','which',
             'by','action','ppl.','Cf.','but','<L>Gr.</L>','be','after','=','The','form','for','an','<XR><RX>prec.</RX></XR>',
             '<PS>a.</PS></XR>','<L>Eng.</L>','<PS>pref.</PS>','also','L.</L>','<XR><XL>a-</XL>','<XR><XL>-ing</XL><HO>1</HO></XR>.</ET>',
             'vb.','See','In','<L>OE.</L>','used','it','see','this','not','<PS>prep.</PS><HO>1</HO></XR>','has','a','so','early','s'] 
```

这就是我用来删除这些词的方法：

```
first_word = re.sub(r'\b'+exclusionList[a]+'\b', '',first_word) 
```

其中第一个单词是从文本文件中读取的字符串。我知道这会很简单，但我只是不太了解如何很好地使用 RE。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:26:55.283

我只能猜测，但可能你想要这样的东西：

```
pattern = r'\b({})\b'.format('|'.join(map(re.escape, exclusionList)))
first_word = re.sub(pattern, '', first_word) 
```

请注意，我正在转义这些单词，因此它们将按字面意思匹配，而不是被解释为正则表达式（它们似乎不是）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T21:26:44.773

这应该一次完成所有的伎俩：

```
exclusionRegex = r'\b(' + '|'.join(re.escape(word) for word in exclusionList) + r')\b'
first_word = re.sub(exclusionRegex, '', first_word) 
```

**编辑**：这是我的测试脚本：

```
import re

exclusionList = ['\+','of','<ET>f.','to','the','<L>L.</L>','f.','in','and','see','a','<L>Fr.</L>','as','<ET>ad.','<ET>a.','<PS>v.</PS></XR>',
             'from','<CF>ab</CF>','or','n.','<L>OFr.</L>','pple.','away','was','with','off,','pa.','on','is','cf.','stem','ad.','which',
             'by','action','ppl.','Cf.','but','<L>Gr.</L>','be','after','=','The','form','for','an','<XR><RX>prec.</RX></XR>',
             '<PS>a.</PS></XR>','<L>Eng.</L>','<PS>pref.</PS>','also','L.</L>','<XR><XL>a-</XL>','<XR><XL>-ing</XL><HO>1</HO></XR>.</ET>',
             'vb.','See','In','<L>OE.</L>','used','it','see','this','not','<PS>prep.</PS><HO>1</HO></XR>','has','a','so','early','s']

exclusionRegex = r'\b(' + '|'.join(re.escape(word) for word in exclusionList) + r')\b'
first_word = 'This is a test of the regex'
print re.sub(exclusionRegex, '', first_word) 
```

这是输出：

> 这个测试正则表达式

# ruby-on-rails - 从 ubuntu 11.04 控制台获取 rails --version 不成功

> ID：11041539
> 
> 赞同：-1
> 
> 时间：2012-06-14T21:23:00.400
> 
> 标签：ruby-on-rails, ruby, rvm

我有 Ubuntu 11.04，+ Ruby 1.9.3-p125

我以两种方式安装了 Rails：

*   `rvm gem install rails`

*   `gem install rails`

当我想检查我正在使用的 Rails 版本时：

```
rails --version 
```

我得到错误：

> 当前未安装程序“rails”。您可以通过键入以下内容来安装它：`sudo apt-get install rails`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:53:56.690

如果您刚刚安装了 rvm，那么即使您没有安装 rails，您也没有“使用”gemset。如果您运行`rvm gemset list`，您会注意到一个 gemsets 列表（可能只是“全局”），其中任何一个旁边都没有星号。

您首先需要使用 gemset，然后才能查看 gemset 中的 gem 版本。尝试`rvm use @global`使用“全局”gemset 之类的方法。然后你会在你的终端上看到一些东西，比如`Using /home/john/.rvm/gems/ruby-1.9.3-p125 with gemset global`. 现在，如果您尝试这样做`rails -v`，它应该会给您您的版本号

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:39:07.240

确保 RVM ruby​​ 版本在您的 PATH 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T01:28:30.537

您需要在**使用 ruby**​​ 之前使用它：

```
rvm use 1.9.3-p125 
```

现在你可以运行任何命令而不用前缀`rvm`：

```
gem install rails
rails new test1 
```

当您使用 rvm 执行前缀命令时，它实际上是以下简称：

```
rvm all do gem install rails 
```

这意味着将 gem rails 安装到所有 rubies @default gemset 中。

您也可能是与 Ubuntu 捆绑在一起的旧的和损坏的 RVM 安装的受害者，请查看此答案以了解详细信息：[https ://stackoverflow.com/a/9056395/497756](https://stackoverflow.com/a/9056395/497756)

此外，您应该了解一些如何使用 RVM 的详细信息，您应该会发现这个简短的教程非常有用：http: [//screencasts.org/episodes/how-to-use-rvm](http://screencasts.org/episodes/how-to-use-rvm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T01:12:04.250

尝试`which rails`在终端中了解路径。

应该是`/usr/bin/rails`。如果没有尝试`export PATH=/usr/bin:$PATH`。

# postgresql-9.1 - su - postgres 没有目录，用 HOME=/ 登录

> ID：11041541
> 
> 赞同：1
> 
> 时间：2012-06-14T21:23:07.443
> 
> 标签：postgresql-9.1

我正在使用这些说明来安装 Postgresql：[http ://www.thegeekstuff.com/2009/04/linux-postgresql-install-and-configure-from-source/](http://www.thegeekstuff.com/2009/04/linux-postgresql-install-and-configure-from-source/)

（也许这是我的第一个错误，但我使用了各种文档试图在没有运气的情况下安装它，而这个最有意义）

一切似乎都很顺利，直到我进入第 6 步：初始化 postgreSQL 数据目录。我进入

su - postgres

在命令行中并取回它

没有目录，用HOME=/登录

我不能从那里做任何其他事情。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-21T06:34:14.690

尝试查找是否创建了 postgres 用户以及他的主目录在哪里。例如 ：

```
# cat /etc/passwd
postgres:x:999:999::/home/postgres:/bin/sh 
```

可以看到 postgres 用户使用 /home/postgres

如果该目录不存在，请创建它并设置正确的所有者：postgres 和读/写访问权限。

# mysql - 如何查找与第二个表具有多个关系的记录

> ID：11041543
> 
> 赞同：2
> 
> 时间：2012-06-14T21:23:10.960
> 
> 标签：mysql, database

```
table products
--------------
id | title
1  | Product 1
2  | Product 2
3  | Product 3

table categories
----------------
id | title
1  | Cat 1
2  | Cat 2
3  | Cat 3

table products_categories_mm
----------------
id_local | id_foriegn
1        | 2
1        | 3
2        | 3
3        | 2 
```

```
SELECT * 
FROM products 
    JOIN products_categories_mm ON products.uid=products_categories_mm.uid_local 
    JOIN categories ON products_categories_mm.uid_foreign = categories.uid 
WHERE products.lang_uid IN (0) 
    AND products.page >= 1 
    AND products.page IN (8,9,10,11) 
    AND categories.uid IN (2,3) 
ORDER BY products.datetime DESC 
```

以上查找与类别 2 和 3 相关的所有产品。它返回产品记录 1、2 和 3。这很好，可以按我的意愿工作。但现在我需要调整查询，使其返回与类别 2 和类别 3 相关的产品。

在这种情况下，查询应返回产品 1（因为它是与这两个类别相关的唯一产品）。

我尝试将我的 SQL 更改为：

```
SELECT * 
FROM products 
    JOIN products_categories_mm ON products.uid=products_categories_mm.uid_local 
    JOIN categories ON products_categories_mm.uid_foreign = categories.uid 
WHERE products.lang_uid IN (0) 
    AND products.page >= 1 
    AND products.page IN (8,9,10,11) 
    AND (categories.uid = 2 AND categories.uid = 3)
ORDER BY products.datetime DESC 
```

但这没有任何回报。`EXPLAIN`说有一个不可能的 where 子句。

如何更改我的 SQL 以获得我想要的记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:23:52.550

它在抱怨，因为您在这一行中有一个简单的逻辑错误：

```
AND (categories.uid = 2 AND categories.uid = 3) 
```

它永远不能同时是两个值，只能是一个或另一个。你的意思一定是：

```
AND (categories.uid = 2 OR categories.uid = 3) 
```

也可以改写为：

```
AND (categories.uid IN (2,3)) 
```

* * *

顺便说一句，有什么意义：

```
AND products.page >= 1 
```

如果您要进一步过滤它：

```
AND products.page IN (8,9,10,11) 
```

你不需要这个的第一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:33:29.830

```
SELECT
    a.*
FROM
    products a
INNER JOIN
    products_categories_mm b ON a.uid = b.uid_local
WHERE
    a.lang_uid = 0
    AND a.page IN (8,9,10,11)
    AND b.uid_foreign IN (2,3)
GROUP BY
    a.uid
HAVING
    COUNT(*) = 2
ORDER BY
    a.datetime DESC 
```

`2`in`COUNT(*) = 2`表示您要检查的类别数。如果您希望产品仅在满足 3 或 4 个类别时显示，请相应地更改该数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T21:30:30.397

SQL 解释是因为 2 和 3 的 UID 将出现在不同的行中，因此不可能有一个 UID 为 2 和 3 的单行。最好采用不同的方法......说例如子查询。

# javascript - Jquery 复制页面的 html，就像在 jquery 滑块启动之前一样

> ID：11041544
> 
> 赞同：0
> 
> 时间：2012-06-14T21:23:11.583
> 
> 标签：javascript, jquery, html

如果您有一个网页，并且该页面上有一个 jquery 滑块，例如 nivo 滑块。在使用 jQuery 时，我希望能够像在 nivo 滑块启动之前那样复制页面的 html。

我想这样做是因为我不希望滑块在 .html() 中捕获动画时放在 div 和图像上的所有内联样式和数字。

有没有一种方法可以抓取网页的静态 html？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:28:31.757

尝试在您所在的页面上使用 jQuery 的加载功能。这将加载所有 HTML，但不会在其上运行任何脚本。

**就像是**

```
$("#copy-page").click(function(e) {
    var href = window.location.href;
    $("#result").load(href);
}); 
```

如果需要将其保存到变量中，则可以`$.get()`改用。

```
$("#copy-page").click(function(e) {
    var href = window.location.href;
    var content;
    $.get(href, function(data) {
        content = data;
        alert(content);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:31:47.493

*   您可以在滑块初始化之前捕获页面的 html 并将其保存到变量中以供以后使用。这样您就不会在此之后对页面进行任何更改。

*   检索滑块后，您可以从 html 中删除滑块内容。像这样的东西应该工作：

    var html = $('body').clone().find('slider').remove().end().html();

# .net - 在 WCF 数据合同需求中需要 maxOccurs="unbounded"

> ID：11041546
> 
> 赞同：2
> 
> 时间：2012-06-14T21:23:26.760
> 
> 标签：.net, xml, wcf, xsd, wsdl

我试图在另一个环境中模拟现有的 Web 服务以进行测试，但遇到了障碍。

我正在尝试在 WCF 中创建此模拟服务

我正在模拟的服务（不是在 WCF 中开发的）有一个具有这种类型定义的实体：

```
<xs:sequence>
<xs:element maxOccurs="unbounded" minOccurs="0" name="dog" nillable="true" type="xs:string"/>

</xs:sequence> 
```

注意 maxOccurs="unbounded" 消息本身看起来像这样：

```
<dog>1</dog>
<dog>2</dog> 
```

但我不知道如何定义我的 DataContract 来处理这个问题。我假设只使用数组类型，如：

```
 [DataContract]
    public class P56040Input
    {
        [DataMember]
        public string[] dog { get; set; }

    } 
```

会对应，但它对新类型（arrayofstring）做了一些意想不到的事情：

```
<xs:sequence>
<xs:element xmlns:q1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" minOccurs="0" name="dog" nillable="true" type="q1:ArrayOfstring"/>
</xs:sequence> 
```

这甚至可以在 WCF 中模拟吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T21:56:39.960

如果您转到 ArrayOfString 定义，您会看到它有 maxOccurs=“unbounded”。所以你在这里看到的只是 wcf 生成的包装器类型。为了不生成这种类型，您需要使用 xml 序列化程序而不是数据协定。定义将如下所示：

```
[System.Xml.Serialization.XmlElementAttribute("dog")]
public string[] dog  {get; set;} 
```

我怎么知道的？您需要做的就是向 wsdl“添加 Web 引用”（以便生成客户端代理）。然后查看相关的代理部分以查看类型顶部的属性。您可以对默认使用数据合同的“添加服务参考”执行相同操作，并查看它生成了您使用的内容，这与您需要的内容不完全相同。

# c++ - 查找一个点到椭圆的距离，无论是椭圆的内部还是外部

> ID：11041547
> 
> 赞同：5
> 
> 时间：2012-06-14T21:23:27.537
> 
> 标签：c++, opencv

我想找到图像中每个像素坐标到椭圆的距离。

为了找到距离，我使用以下公式，其中 p 是像素点，h 是椭圆。x,y 是像素坐标，x(c),y(c) 是椭圆中心，theta 是椭圆角，alpha 和 beta 分别是椭圆的长轴和短轴。

![在此处输入图像描述](../Images/68211c05f263412278ac8524fd9d7754.png)

确定每个点到椭圆的距离的代码如下所示。如果距离 D < 1，则表示该点位于椭圆内，在这种情况下，我将其设为灰色。如果 D > 1 则意味着该点在椭圆之外，在这种情况下，我保持原样。下面也是我得到的输出图像。出于某种原因，我认为我的距离计算是正确的，但是我的旋转有问题。对我来说，一切看起来都正确，我看不到问题所在。请帮忙。我需要的是椭圆中的所有像素都应该是灰色的，但对我来说，灰色区域形成了一个椭圆，但似乎我在某个地方的旋转出错了。

```
Mat distance2ellipse(Mat image, RotatedRect ellipse){
float distance = 2.0f;
float angle = ellipse.angle;
Point ellipse_center = ellipse.center;
float major_axis = ellipse.height;
    float minor_axis = ellipse.width;
Point pixel;
float a,b,c,d;

for(int x = 0; x < image.cols; x++)
{
    for(int y = 0; y < image.rows; y++) 
    {
        Scalar intensity = image.at<uchar>(Point(x, y));
        pixel.x=x;
        pixel.y=y;
        a = (cos(angle*PI/180)*(pixel.x-ellipse_center.x))/(major_axis);
        b = (sin(angle*PI/180)*(pixel.y-ellipse_center.y))/(minor_axis);
        c = (sin(angle*PI/180)*(pixel.x-ellipse_center.x))/(major_axis);
        d = (cos(angle*PI/180)*(pixel.y-ellipse_center.y))/(minor_axis);

        distance = sqrt(pow((a-b),2)+pow((c+d),2));

        if(distance<1)
        {
                image.at<uchar>(Point(x,y)) = 140;
        }
    }
}
return image;} 
```

这是我得到的输出。灰色区域应该是粉红色的椭圆。 ![在此处输入图像描述](../Images/22d804eeff89bf9b19a79ce12b8f0a5f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T22:07:30.703

> 出于某种原因，我认为我的距离计算是正确的

它不是。某个点和椭圆之间的距离是一个超越方程。它无法通过基本技术（这就是您所做的）来解决。您需要使用根查找技术。

谷歌是你的朋友。这是一个 PDF 文件，它提供了一种算法并提供了实现它的代码：[http](http://www.geometrictools.com/Documentation/DistancePointEllipseEllipsoid.pdf) ://www.geometrictools.com/Documentation/DistancePointEllipseEllipsoid.pdf 。

**编辑**
根据下面的评论，我的回答与 OP 想要的是正交的。

lexma，你的椭圆看起来不正确的原因是你有一个椭圆的错误方程，这个椭圆相对于 x 轴旋转了某个角度 theta。确定某个点 (x,y) 是在椭圆的内部还是外部的问题相当简单。

1.  将 (x,y) 坐标转换为 (u,v) 以使椭圆以原点为中心，长轴沿 u 轴，次轴沿 v 轴。

    u = cos(θ) *(xx [c] ) + sin(θ)* (yy [c] )
    v = -sin(θ) *(xx [c] ) + cos(θ)* (yy [c] )

2.  计算指标

    d ² = (u/α) ² + (v/β) ²

3.  比较一个。如果 d ²小于 1，则该点位于椭圆内，如果恰好为 1，则该点在椭圆上，如果大于 1，则该点在椭圆外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:50:26.177

我不确定这是问题，但线

```
distance = sqrt(pow((a-b),2)+pow((c+d),2)); 
```

看起来不正确。标准距离公式使用两个增量而不是一个。这意味着该行应如下所示：

```
distance = sqrt(pow((a-b),2)+pow((c-d),2)); 
```

请注意，第二部分`c-d`不是`c+d`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T07:42:47.650

尽管[本文](http://cdserv1.wbut.ac.in/81-8147-617-4/Linux/MagicSoftware/WildMagic2/Documentation/DistancePointToEllipse2.pdf)中的解决方案仅用于确定一个点是否位于椭圆内、椭圆内或椭圆外，肯定过于昂贵，但它仍可能帮助那些使用 google 到这里的人，被标题的第一部分误导。（和我一样）

# umbraco - Umbraco 中的所有节点链接都变成了#

> ID：11041549
> 
> 赞同：1
> 
> 时间：2012-06-14T21:23:44.143
> 
> 标签：umbraco

我使用 Umbraco 4.7 并注册了一个名为 umbracoUrlName 的特殊属性，它使我能够将默认生成的 url 覆盖到任何节点。尝试加载页面时，我得到的只是**“对象移至此处”。**

在我实现**umbracoUrlName**属性**后**确实发生了这个错误

 **我以前在多个网站上做过这个，从来没有经历过。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:48:52.150

我不得不使用我认为在 GUI 中任何地方都不可用的重新发布功能。这比右键单击内容节点时内容部分的上下文菜单中可用的功能强大得多。

[http://mysite.com/umbraco/dialogs/republish.aspx?xml=true](http://mysite.com/umbraco/dialogs/republish.aspx?xml=true)

运行需要一段时间，但它解决了我的大部分问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:32:44.857

我以前也有过这种情况。我的解决方案是进入后台并右键单击内容节点并选择重新发布整个站点。它实际上并没有重新发布所有内容。它只是触发缓存文件被重建。传播可能需要几秒钟。

如果这不能解决，请尝试重新发布单个节点以查看 URL 是否从 # 更改。然后其余的也应该更新。**

# php - PHP cookie 读取停止工作

> ID：11041551
> 
> 赞同：1
> 
> 时间：2012-06-14T21:23:51.350
> 
> 标签：php, cookies

由于某种原因，此脚本停止读取 cookie，并且在 2/3 周内没有显示“NO POP”或“POP CODE”消息，无论如何，cookie 'faceupz' 已设置在我的电脑上，任何人都知道它是如何制作的工作 ？

```
if( isset( $_COOKIE['faceupz'] ) )
{
echo 'NO POP'; 
}
else
{
echo 'POP CODE';
} 
```

谢谢你！

# visual-studio-2010 - 如何在输出目录之外的 Visual Studio 2010 中运行 exe

> ID：11041552
> 
> 赞同：0
> 
> 时间：2012-06-14T21:23:53.083
> 
> 标签：visual-studio-2010, visual-c++

我正在将一个项目从 Visual Studio 2008 转换为 2010 并遇到了这个问题。所有目标文件都转储到**Output Directory**中，而 Executable 则放置在另一个文件夹中，该文件夹保持清洁。可执行文件的位置和名称在链接器属性**输出文件**中定义。

该项目在适当的位置构建所有文件都很好，但是在尝试运行程序时，它会在**输出目录**中查找 Exe并失败。2008 年的情况并非如此。

我如何告诉 VS 它刚刚生成的可执行文件在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:29:28.423

想通了，我觉得很傻。

obj 文件的输出有一个单独的字段，该字段被设置为输出目录的路径。我的输出目录也与 2008 年的中间目录相同。

中间目录应该指向你想要你的 obj 和其他编译文件的位置。输出文件应指向您的中间目录。你的 exe 应该进入你的输出目录。够简单！旧的项目设置让我失望。

# session - Tomcat：将多个子目录视为不同的域以隔离会话

> ID：11041555
> 
> 赞同：0
> 
> 时间：2012-06-14T21:24:13.177
> 
> 标签：session, tomcat, dns, subdirectory

我有一个问题，其中 Tomcat 后端 web 应用程序中的多种不同类型的登录名使用相同的会话属性名称，因此登录属性相互重叠，并且注销不加选择地清除其他登录名的数据。

我没有单独的域（并且安排一些东西来模拟多个域会太麻烦），但是如果 tomcat 将不同子目录中的文件视为具有不同的域，我希望它可以保留会话信息战斗。

就目前而言，最肤浅的修复（但不是最快的）将通过并显式更改会话属性名称，因此没有冲突。我必须触及几百个文件以保证我的方法不会导致错误. 这将花费更多的时间而不是它的价值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:36:07.120

只需在每个“子目录”（真正称为“上下文路径”）上部署 webapp。每个上下文都将被视为独立的，并且会话不会相互干扰。

# python - 引号的simplejson转换不一致

> ID：11041557
> 
> 赞同：0
> 
> 时间：2012-06-14T21:24:22.990
> 
> 标签：python, cherrypy, simplejson

我已经阅读了 simplejson 文档，但不明白为什么它有时会返回一个带单引号的 json 对象（php 无法理解），而有时会返回一个转义的双引号序列（在 php 中也无法识别）。我可能可以在输出字符串上做正则表达式作为创可贴，但我宁愿了解问题的根源。

例子：

输入：（python中的起始数据）

```
print stories 
```

{'text': 'HIV/AIDS 有一天，\r\n然后我们把她带回家，我们召集会议并告诉村民我们应该照顾她，并给予她一生所需要的良好照顾她离开了。', 'id': 1215L}

作为一个健全的检查 - json 对象在cherrypy 得到它之前**看起来很正常：**

```
print simplejson.dumps( stories ) 
```

[{"text": "青春给青春赋能...亚达亚达亚达...", "id": 12828}, {"text": "女性...亚达亚达亚达...", "id" ：12828}]

```
...
import simplejson
return simplejson.dumps( stories ) 
```

[cherrypy 发生了一些晦涩难懂的魔法......] 这是cherrypy 中将 json 传递给浏览器的部分：

```
@cherrypy.expose
def browse_stories(self):
    stories = test_org_match.browse_org_story_matches()
    cherrypy.response.headers['Content-Type'] = 'application/json'
    return json.dumps( stories ) 
```

输出（我在通过cherrypy调用这个对象的浏览器中看到的）：

"[{\"text\": \"贫困 我们决定偷菜。我们无能为力。我们在没有食物的情况下待了两天，这第三天我们跟不上。我们必须吃点东西，否则我们会死。我们开始慢慢走向香巴，尽可能多地回家做饭吃，感觉好多了。\", \"id\": 33109}, {\"text\": \"Boda Bado 他们只是在交通的基础上，人们可以使用bada-boda 交通工具来回走动，以节省时间\r\n 它帮助村子深处的农村人用摩托车将自己运送到另一只耳朵。\", \"id\": 35931}]"

（随附的文本不同，但这发生在它拉出的任何一个随机文本片段中）

注意：我相信 simplejson 返回一个到处都是单引号的对象的另一种情况是因为我传递了 str(dictionary) 而不是实际的字典。当然，当您提供单引号 json 时，php 会中断。但是“免费”的逃跑让我感到困惑——我认为它正在发生在樱桃内部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:10:21.983

我想到了。我的代码使用 json.dumps() 然后再次使用 json.dumps - 所以额外的转义字符是 json 将其视为字符串而不是字典对象。

# php - 从 HTML 表类创建表

> ID：11041558
> 
> 赞同：0
> 
> 时间：2012-06-14T21:24:24.060
> 
> 标签：php, codeigniter

试图弄清楚我怎样才能正确地做到这一点。

print_r 看起来像这样：

```
Array ( [0] => stdClass Object ( [quote] => "Now that's wonderful!" ) ) 
```

表创建：

```
$tmpl = array ( 'table_open'  => '<table class="table" id="quotes-table">' );
$this->table->set_template($tmpl); 
print_r($quotes);
$data = array(
    array(form_checkbox('quotes'), 'Quote'),
    array(form_checkbox('quotes'), 'Testing Quote Here'),
    array(form_checkbox('quotes'), $quotes['quote'])
);
echo $this->table->generate($data); 
?> 
```

**更新：**

问题虽然当我添加超过 1 行时，它只返回那一行。所以基本上我想要一个可以从查询返回的对象，以便在视图中我可以简单地执行 $quote->quote。这样，它将显示用户的所有报价。

```
<?php
$tmpl = array ( 'table_open'  => '<table class="table" id="quotes-table">' );
$this->table->set_template($tmpl);
$checkbox_data = array(
    'name'        => 'quote',
    'id'          => $quotes->id
); 
$data = array(
    array(form_checkbox($checkbox_data), 'Quote'),
    array(form_checkbox($checkbox_data), $quotes->quote)
);
echo $this->table->generate($data); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:28:39.420

你没有说问题是什么，但如果你没有看到你的报价，试着改变这个：

```
array(form_checkbox('quotes'), $quotes['quote']) 
```

进入这个：

```
array(form_checkbox('quotes'), $quotes[0]->quote) 
```

编辑：一些额外的说明。

```
 Array ( [0] => stdClass Object ( [quote] => "Now that's wonderful!" ) ) 
```

你有一个 1 的数组，这是一个对象。对于数组，您使用 $array['key'] 对象 $object->key。如果你不能在控制器中改变它，你可以做这样的事情

```
$quotes = $quotes[0];
$quotes->quote; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:11:07.870

在回答您的更新时，请尝试以下操作：

```
<?php

// Your query
$results = $this->db->get('quotes')->result();

$this->table->set_heading('Name', 'Quote');

foreach ($results as $result)
{
   // The name is the user's name, not sure if that's what you were going for.
   $this->table->add_row($result->name, $result->quote);
}

echo $this->table->generate(); 
```

都在这里：[http ://codeigniter.com/user_guide/libraries/table.html](http://codeigniter.com/user_guide/libraries/table.html)

# sql - 选择top without orderby

> ID：11041560
> 
> 赞同：1
> 
> 时间：2012-06-14T21:24:37.740
> 
> 标签：sql, sql-order-by

所以我今天写了一些查询，并`top 10`在查询中使用只是为了获取一些没有 an 的示例数据，`orderby`并注意到它实际上在每次调用时返回不同的数据。然而，它似乎不是随机的，因为它是一个包含数百万行的表，并且总是出现一些条目，而另一些则每次调用都会改变。当指定 no 时，后端会执行什么逻辑来决定返回哪些行`orderby`？我正在使用 SQL Server 2008r2，但如果它在其他数据库中的处理方式不同，我会很感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:54:28.427

当然，顺序是完全未定义的。但我会尝试在实际实现中提及一些实际原因，因为这是明确要求的。这是一个小样本：

*   并行查询计划
*   以随机顺序返回的预读结果
*   执行计划因某种原因而改变
*   读取列存储索引按内部顺序返回行
*   SQL Server 正在选择无序索引扫描，它按分配顺序而不是逻辑顺序读取页面（例如，分配顺序可以通过重组表来改变）

这些原因是特定于 SQL Server 的。

# matlab - matlab从矩阵中删除NaN

> ID：11041573
> 
> 赞同：1
> 
> 时间：2012-06-14T21:25:22.457
> 
> 标签：matlab, vectorization, nan, cell-array

我有一个矩阵：

```
raw = 

'alon'     'tomer'    'ilana'    'T1'     '2'      '53'      '24'       'NaN'
'ilana'    'oren'     '6'        'a'      'g'      'g'       'gsh'      'NaN'
'dikla'    'aba'      'mama'     'a'      'h'      'ghfs'    'bfsbf'    'NaN'
'4'        'NaN'      'NaN'      'nn'    'NaN'    'NaN'     'hadhd'    'NaN' 
```

**我想删除 NaN 并获得：**

```
 'alon'     'tomer'    'ilana'    'T1'     '2'      '53'      '24'
    'ilana'    'oren'     '6'        'a'      'g'      'g'       'gsh'
    'dikla'    'aba'      'mama'     'a'      'h'      'ghfs'    'bfsbf'
    '4'         ''        ''         'nn'     ''       ''        'hadhd' 
```

我怎么做？

我尝试了很多建议，但我得到了错误：

1)

```
>> raw=raw(~isnan(raw(:,2)),:)
??? Undefined function or method 'isnan' for input arguments of type 'cell'. 
```

2)

```
raw(isnan(raw(:,1)),:) = [];
??? Undefined function or method 'isnan' for input arguments of type 'cell'. 
```

3)

```
raw(~any(isnan(raw),2),:)
??? Undefined function or method 'isnan' for input arguments of type 'cell'. 
```

4)

```
T(cellfun(@isnan,T))={0}
??? Error using ==> cellfun
Non-scalar in Uniform output, at index 1, output 1.
Set 'UniformOutput' to false. 
```

我尝试了 Ansari 的解决方案，但现在我得到了：

```
raw = 

'alon'     'tomer'    'ilana'    'T1'    '2'    '53'      '24'       [0]
'ilana'    'oren'     '6'        'a'     'g'    'g'       'gsh'      [0]
'dikla'    'aba'      'mama'     'a'     'h'    'ghfs'    'bfsbf'    [0]
'4'        [    0]    [    0]    'nn'    [0]    [   0]    'hadhd'    [0] 
```

这对我不好，因为我想做：

```
size(raw,2) 
```

并得到：

7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:29:04.593

像这样的东西会起作用：

```
f = @(x) strcmp(x, 'NaN');
nans = cellfun(f, raw);
raw(nans) = {''}; %cell(sum(nans(:)), 1); 
```

`isnan`仅适用于矩阵，因此不适用于元胞数组。此外，您的 NaN 似乎是字符串，而不是真正的 NaN。

此时，所有的 'NaN' 都将是空字符串。以下将删除空字符串的整行或列：

```
raw = raw(:, arrayfun(@(i) length([raw{:, i}]), 1:size(raw, 2)) > 0); % for columns
raw = raw(arrayfun(@(i) length([raw{i, :}]), 1:size(raw, 1)) > 0, :); % for rows 
```

对于最后一步，您最好循环以保持代码干净和易于理解（并且更容易调试！）。您基本上是通过连接字符串来折叠每一行或每一列，然后检查长度是否为零，以及是否要删除该行或列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:39:44.527

使用的替代答案`regexprep`：

% 示例数据：

```
raw = { 'alon' 'tomer' 'ilana' 'T1' '2' '53' '24' 'NaN'; 'ilana' 'oren' '6' 'a' 'g' 'g' 'gsh' 'NaN'; 'dikla' 'aba' 'mama' 'a' 'h' 'ghfs' 'bfsbf' 'NaN'; '4' 'NaN' 'NaN' 'nn' 'NaN' 'NaN' 'hadhd' 'NaN' } 
```

这是代码：

```
output = cellfun(@(x) regexprep(x, 'NaN', ''), raw, 'UniformOutput', false);
NaNraw = cellfun(@(x) strcmp(x, 'NaN'), raw);
output(:,all(NaNraw,1)) = []; 
```

因此，首先使用and替换所有`'NaN'`字符串，结果存储在. 然后通过使用and比较with的每个字符串来创建一个逻辑矩阵。最后，删除其对应列仅包含一列的列。`raw``''``cellfun``repexprep``output``NaNraw``raw``'NaN'``cellfun``strcmp``output``NaNraw`

```
output = 
'alon'     'tomer'    'ilana'    'T1'    '2'    '53'      '24'   
'ilana'    'oren'     '6'        'a'     'g'    'g'       'gsh'  
'dikla'    'aba'      'mama'     'a'     'h'    'ghfs'    'bfsbf'
'4'        ''         ''         'nn'    ''     ''        'hadhd' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T01:23:09.500

你似乎过度劳累了。

```
cooked = regexprep(raw,'NaN',''); 
```

可以。

* * *

当然，假设您没有为您不编写的每一行代码获得额外的 1000 美元：

```
cooked = raw;
for I = 1:length(raw(:))
    if strcmp(raw{I},'NaN')
        cooked{I} = '';
    end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T08:03:07.277

另一种解决方案：

```
%# replace all 'NaN' with ''
raw(ismember(raw,'NaN')) = {''};

%# remove rows/columns of all empty strings
raw(:,all(cellfun(@isempty,raw),1)) = [];
raw(all(cellfun(@isempty,raw),2),:) = []; 
```

# php - 是什么导致某些 PHP 函数名称使 PHP 崩溃？

> ID：11041574
> 
> 赞同：1
> 
> 时间：2012-06-14T21:25:30.577
> 
> 标签：php

今天下午我正在编写客户端用户数据库时，我注意到 PHP 开始崩溃而没有解析错误——我只能假设是分段错误。我试图缩小问题的范围，直到我意识到当我重命名某些函数时，它们会停止崩溃。这是我遇到过的最奇怪的 PHP 错误。以下是导致问题的一些函数名称：

create_user_account() - 崩溃
重命名为 create_user_email() - 有效
check_user_email() - 崩溃
重命名为 check_user_account() - 有效

我完全不知道可能导致此错误的原因。在跟踪问题或诊断问题方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T21:26:56.370

尝试这个：

```
function foo() {} 
```

作品！但现在：

```
function foo() {}
function foo() {} 
```

崩溃！哦！让我们重命名函数：

```
function foo() {}
function foo2() {} 
```

作品！耶！作品！愉快的一天！！！！唱歌跳舞！

* * *

长话短说：这需要首先进行基本调试——当屏幕空白时会触发哪些代码？请`error_reporting(~0); ini_set('display_errors', 1);`在脚本的开头做 a。此外，您应该[启用错误日志](http://www.cyberciti.biz/tips/php-howto-turn-on-error-log-file.html)并遵循错误日志。然后在那个阶段：您不了解错误消息的哪一部分？

# java - 使用所有（jComboBox，JTextField，jFileChooser）作为表编辑器覆盖参考

> ID：11041575
> 
> 赞同：3
> 
> 时间：2012-06-14T21:25:32.017
> 
> 标签：java, swing, jcombobox, jfilechooser, tablecelleditor

在下面的代码中，对于同一个表的各个行，我尝试将**Editable** comboBox 设置为第一行的编辑器（以便用户可以从可用选项中进行选择或键入自己的选项），第二行的文件选择器和默认值textFiled 用于其余行。

**问题：**以及重现它的步骤：

**1-**运行代码， **2-**单击第二行并选择一个文件夹（行变为黄色） **3-**现在单击第一行以选择电影类型（只需单击，无需输入任何内容或进行选择） **4-**现在再次点击第二行（文件夹选择）

你会看到这一行的内容将被复制到第一行？！

我知道有很多事情我没有做对，比如处理非线程安全的摆动、处理引用等等。我想知道你们是否可以帮助我修复这个错误并将这段代码变成可靠的东西。

![用户选择前的程序输出](../Images/f89d8a1d19e2ef9a4eae5be577312052.png)

执行上述步骤后：

![在此处输入图像描述](../Images/ef315fe3b50bc808c16030bd6c3bf1f3.png)

```
import java.awt.Color;
import java.awt.Component;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.io.File;
import javax.swing.DefaultCellEditor;
import javax.swing.JComboBox;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.event.PopupMenuEvent;
import javax.swing.event.PopupMenuListener;
import javax.swing.table.TableModel;

public class CCellEditor extends DefaultCellEditor {

    private JTable m_Table = null;

    public CCellEditor(JFrame parentFrame, JTable table) { 
        super(new JTextField());
        super.setClickCountToStart(1);
        m_Table = table;
    }
    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, final int row, int column){

        if(row==0) // comBoBox for First row
        {
            Object[] objectArray = {"3D","2D"};
            JComboBox comboBox = new JComboBox(objectArray);
            comboBox.setEditable(true);
            comboBox.setSelectedItem(value);

            ItemListener itemListener = new ItemListener() {
                public void itemStateChanged(ItemEvent e) {
                    if(e.getStateChange() == ItemEvent.SELECTED) {
                        if(null != m_Table.getCellEditor()){ 
                            m_Table.getCellEditor().stopCellEditing();
                        }

                        m_Table.setValueAt(e.getItem(), row, 1);
                    }
                }
            };
            comboBox.addItemListener(itemListener);

            PopupMenuListener popMenuEvent = new PopupMenuListener() {

                public void popupMenuWillBecomeVisible(PopupMenuEvent e) {
                }

                public void popupMenuWillBecomeInvisible(PopupMenuEvent e) {
                    String sValue = (String)m_Table.getValueAt(row, 1);
                    if(null != m_Table.getCellEditor()){ 
                        m_Table.getCellEditor().stopCellEditing();
                    }
                    m_Table.setValueAt(sValue, row, 1);
                }

                public void popupMenuCanceled(PopupMenuEvent e) {   
                }

            };
            comboBox.addPopupMenuListener(popMenuEvent);

            return comboBox;

        }

        else  if(row==1)  // fileChooser for Second row
        {
            JFileChooser fileChooser;
            fileChooser = new JFileChooser("c:\\");
            fileChooser.setFileSelectionMode( JFileChooser.DIRECTORIES_ONLY );
            fileChooser.setVisible(true);
            int returnVal = fileChooser.showOpenDialog(null);

            JTextField textField = (JTextField)super.getTableCellEditorComponent(table, value, isSelected, row, column);
            textField.setBackground(Color.yellow);
            if (returnVal == JFileChooser.APPROVE_OPTION) {
                File m_fFirmware= fileChooser.getSelectedFile();

                textField.setText(m_fFirmware.getPath());
                return textField;

            }else
            {
                return textField; 

            }
        }
                                // for any other rows
        JTextField textField = (JTextField)super.getTableCellEditorComponent(table, value, isSelected, row, column);
        return textField;

    }

    public static void main(String[] a) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        String[] columnTitles = { "Name", "Value"};
        Object[][] dataEntries = {
                { "Movie Type:", "3D" }, {"Folder:","C:"}, {"# of Movies requested:","5"}};
        TableModel model = new EditableTableModel(columnTitles, dataEntries);
        JTable table = new JTable(model);
        table.createDefaultColumnsFromModel();
        table.setDefaultEditor(Object.class, new CCellEditor(frame, table));
        frame.add(new JScrollPane(table));
        frame.setSize(300, 200);
        frame.setVisible(true);
    }

} 
```

这是 EditableTableModel 类：

```
import javax.swing.table.AbstractTableModel;

class EditableTableModel extends AbstractTableModel {
  String[] columnTitles;

  Object[][] dataEntries;

  int rowCount;

  public EditableTableModel(String[] columnTitles, Object[][] dataEntries) {
    this.columnTitles = columnTitles;
    this.dataEntries = dataEntries;
  }

  public int getRowCount() {
    return dataEntries.length;
  }

  public int getColumnCount() {
    return columnTitles.length;
  }

  public Object getValueAt(int row, int column) {
    return dataEntries[row][column];
  }

  public String getColumnName(int column) {
    return columnTitles[column];
  }

  public Class getColumnClass(int column) {
    return getValueAt(0, column).getClass();
  }

  public boolean isCellEditable(int row, int column) {
    return true;
  }

  public void setValueAt(Object value, int row, int column) {
    dataEntries[row][column] = value;
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T01:23:11.443

我必须承认我花了一段时间，但我发现了问题。您尚未覆盖该`DefaultCellEditor.getCellEditorValue()`函数，这对您的实现很重要。当正在编辑的单元格失去焦点或其他任何导致编辑完成的情况时，将调用此函数。无论如何，在您的情况下，它只是从最后一个默认 TableCellEditor（来自 DefaultCellEditor）中获取最终值。这就是为什么第一行不断被最后编辑的单元格值替换的原因。

这是解决您的问题的方法：

1.  创建对`comboBox`.
2.  如果最后编辑的项目是第二行，则覆盖`getCellEditorValue()`并返回。`comboBox.getSelectedItem()`否则，只需返回`super.getCellEditorValue()`。

这将解决您当前的问题，但您的代码可以使用很多改进。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T23:55:03.967

初步检查建议让模型通知其监听视图的变化：

```
public void setValueAt(Object value, int row, int column) {
    dataEntries[row][column] = value;
    fireTableCellUpdated(row, column);
} 
```

另请参阅[*Initial Threads*](http://download.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)，并考虑这些默认目录之一。

```
fileChooser = new JFileChooser(System.getProperty("user.dir"));
fileChooser = new JFileChooser(System.getProperty("user.home")); 
```

# javascript - 通过 javascript 使用 TR 元素

> ID：11041579
> 
> 赞同：0
> 
> 时间：2012-06-14T21:25:47.247
> 
> 标签：javascript, html

我有一个使用 php 从数据库中填充的表。在创建每一行（`<tr>`）时，我是这样说的：

```
<tr onclick="selectedRow();"> 
```

我想使用 selectedRow() 这是一个javascript函数来使用表中的信息。如何获取 tr 内的元素？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:28:27.150

```
<tr onclick="selectedRow(this);">

function selectedRow(row){
    // row here is the tr.
    row.getElementByTagName('input').... // selects all the <input> inside.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:29:17.510

```
<tr onclick="selectedRow.call(this, event);"> 
```

* * *

```
function selectedRow(event) {
    alert(this.rowIndex);
    alert(this.cells[0]);
    alert(this.cells[0].innerHTML);
} 
```

* * *

> *“我想选择行并使用其中的所有单元格”*

你可以像这样循环细胞......

```
function selectedRow(event) {
    for (var i = 0, len = this.cells.length; i < len; i++) {
        alert(this.cells[i].textContent || this.cells[i].innerText);
    }
} 
```

# macos - ls -l | grep 列出文件

> ID：11041580
> 
> 赞同：3
> 
> 时间：2012-06-14T21:25:49.447
> 
> 标签：macos, grep, ls

我想列出带有`é`我执行此命令的字符的文件：

```
ls -l | grep é 
```

并且没有结果。目录内容：

```
-rw-r--r--  1 user  staff     5020  3 may 11:48 begin
-rw-r--r--  1 user  staff     0 13 jun 08:47 canté
-rw-r--r--  1 user  staff     0 13 jun 08:47 centré
-rw-r--r--  1 user  staff     5020  3 may 11:48 end 
```

语言环境配置

```
LANG="es_ES.UTF-8"
LC_COLLATE="es_ES.UTF-8"
LC_CTYPE="es_ES.UTF-8"
LC_MESSAGES="es_ES.UTF-8"
LC_MONETARY="es_ES.UTF-8"
LC_NUMERIC="es_ES.UTF-8"
LC_TIME="es_ES.UTF-8"
LC_ALL= 
```

在 Mac Os X 10.7.3 上运行命令。有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T22:06:07.237

像“é”这样的字符可以用两种不同的方式在 Unicode 中表示。它可以是单个预先组合的 Unicode 字符，拉丁小写字母 E WITH ACUTE U+00E9，也可以分解为两个字符，拉丁小写字母 E U+0065 后跟组合重音 U+0301。

在 Mac OS X 上，文件系统 API 总是规范化为规范化表单 D (NFD) 的特殊变体。在适当的 NFD 中，所有可以分解的字符都是。在 Mac OS X 文件系统 API 使用的 NFD 变体中，为了向后兼容旧卷，保留了一些字符。

无论如何，我怀疑在终端中输入的字符形式与输出的形式不同`ls`。`ls -l | hexdump -C`我会比较和之间的区别`echo -n é | hexdump -C`。（在这两种情况下，您都会得到 UTF-8。因此，U+00e9 将显示为 c3 a9，而 U+0065 U+0301 将显示为 65 cc 81。）

* * *

更新：经过一些测试，我发现这是可行的：

```
ls -l | grep $(printf "e\xcc\x81") 
```

这类似于 sarnold 的建议，也有效：

```
ls -l *$(printf "e\xcc\x81")* 
```

基本上，我`printf`在子shell 中使用作为输入文件名中使用的精确字节序列的一种方式。以正常方式键入字符会产生不匹配的不同字节序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:31:53.890

我找到了一个可行的解决方案：

```
ls -l | iconv -f UTF-8-MAC -t UTF-8 | grep é 
```

# android - 删除在 gridView 中不可见的视图

> ID：11041581
> 
> 赞同：4
> 
> 时间：2012-06-14T21:25:58.197
> 
> 标签：android, memory, gridview

[这是Galaxy 3 上 android gridview 崩溃](https://stackoverflow.com/questions/10999204/android-gridview-crashes-on-galaxy-3)的后续问题 我修复了一些东西，现在我让 gridView 加载。我在 gridView 中有很多图像，所以我需要向下滚动才能看到所有图像。如果我慢慢向下滚动，一切似乎都很好。但如果我快速向下滚动，应用程序会因 OutOfMemory 错误而崩溃。因此，假设不再可见的视图需要一些时间才能被删除。有没有一种快速的方法可以手动删除它们并防止这种情况发生？
[你可以在这个问题](https://stackoverflow.com/questions/10999204/android-gridview-crashes-on-galaxy-3)中看到所有的gridView代码（如果你也能回答，那就太好了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T03:39:14.183

因为当你滚动你的gridview时，getView()方法使用适配器调用。这个方法负责设置图像，但由于服务器图像的性能不佳，不能一次在这个视图中设置，这就是发生内存不足错误的原因。

在您的代码[Android 中使用此示例：帮助使用 ImageLoader 类 (LazyList) 调整 ListView 适配器](https://stackoverflow.com/questions/5867894/android-help-in-adapting-listview-adapter-with-an-imageloader-class-lazylist)。

它应该对你有所帮助。

# javascript - 暂时断开的Javascript事件之间状态保留的最佳实践？

> ID：11041583
> 
> 赞同：1
> 
> 时间：2012-06-14T21:26:35.673
> 
> 标签：javascript, asp.net, asp.net-mvc, dom-events, temporal

我们有一个利用部分页面 AJAX 更新的 ASP MVC 应用程序。当我们屏幕的一个面板上发生用户驱动的操作时，我们需要确保我们的 jsTree（在单独的面板中）更新。

但是，尝试在成功范围内采取行动：AJAX 调用的一部分不起作用 - 这发生得太早了，并且 jsTree 还没有准备好接受这些命令。稍后执行相同的命令就可以了。

我们已经通过以下方式解决了这个问题： - 在 AJAX 成功后，将所需的回调方法存储在新的 Javascript 类中：

```
var EPCStateMembers =
{
    _callbackMethod: "",

    StoreCallback: function (callbackMethod)
    {
        EPCStateMembers._callbackMethod = callbackMethod;
    },

    UseCallback: function ()
    {
        if (EPCStateMembers._callbackMethod != "")
            EPCStateMembers._callbackMethod();

        EPCStateMembers._callbackMethod = "";
    }
} 
```

在 AJAX 成功后，我们调用 EPCStateMembers.StoreCallback()

然后，一旦 jsTree 准备就绪（由它自己的事件 reselect.jstree 指示）——我们调用

```
EPCStateMembers.UseCallback(); 
```

从功能上讲，此解决方案有效。

但是，在我们将自己交给临时 Javascript 状态存储作为我们的 goto 解决方案之前......我想问一个问题 - 这种情况是否存在更好的模式或实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:12:40.860

我同意它应该作为发生在树对象上的某种类型的 onload 事件存储和执行。

但是，由于这是经常发生的操作（改变 jstree）而不是一次性初始化的事情，也许 jstree 应该是担心自己的内部状态的人，并且应该在必要时自行排队改变请求。

我这么说只是因为我试图避免由于复杂的内部状态而具有复杂 api 的对象。当合理地设计出这种可能性时，我不喜欢担心 methodX 是否会失败或执行相当于 throw IllegalStateException 的操作。

另外，您可以使代码更加干燥。你不会有多次`if(!tree.ready()) { queueit() }`乱扔代码的情况，因为它可以在一个地方完成，封装它。

# dynamic - 在 Extjs 中动态更改 TextField 样式

> ID：11041589
> 
> 赞同：2
> 
> 时间：2012-06-14T21:26:52.693
> 
> 标签：dynamic, extjs, passwords, textfield, background-color

我正在尝试在复选框单击事件上设置 TextField 的背景颜色和颜色（以屏蔽密码）。我最好的尝试：

```
var hidePass = new Ext.form.Checkbox({
            xtype: 'checkbox',
            boxLabel: 'Hide Password',
            name: 'hidePass',
            handler: function (checkbox, checked) {
                if (checked) {
                    pass1.fieldStyle = 'background-color: #ddd; background-image: none;';
                }
            }
        }); 
```

此代码不起作用。没有错误被抛出。我不知道从这里去哪里。我到处搜索，找不到这样的东西。我找不到任何属性或方法来更改有效的样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:51:13.170

如果您使用的是 ExtJs 4，请不要直接指定这样的样式。使用`setStyle`方法：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.Text-method-setFieldStyle](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.Text-method-setFieldStyle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T11:03:37.263

1.首先确保你的项目有一个 id
2.现在试试——这`Ext.get('yourID').setStyle('margin-top','30px');`
应该可以

# php - 整数或小数

> ID：11041590
> 
> 赞同：14
> 
> 时间：2012-06-14T21:26:54.390
> 
> 标签：php

我正在寻找一个测试整数是否为整数的函数。到目前为止，我有这个：

```
if (is_numeric($answer3)) {
    echo "Is triangular\n";
} else {
    echo "Is not triangular\n";
} 
```

但这总是返回“是三角形的”，即使 $answer3 是小数。

如何测试整数以查看它是否有小数？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-14T21:31:55.463

[考虑到浮点数是数字， is_numeric](http://us3.php.net/manual/en/function.is-numeric.php)也会为浮点数返回 true

> 查找给定变量是否为数字。数字字符串由可选的符号、任意位数、可选的小数部分和可选的指数部分组成。因此 +0123.45e6 是一个有效的数值。也允许使用十六进制表示法 (0xFF)，但只能没有符号、十进制和指数部分。

您可以尝试 is_float()，但如果输入是字符串，它将不起作用。

```
var_dump( is_float( '23.5' ) ); // return false 
```

因此，如果您正在处理数字的字符串表示形式，那么只需查找`.`

```
if ( strpos( $answer3, '.' ) === false ) 
```

如果需要，您可以添加 is_numeric

```
// Make sure its numeric and has no decimal point
if ( is_numeric( $answer3 ) && strpos( $answer3, '.' ) === false ) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-14T21:31:07.040

应该`10.0`被视为整数还是浮点数？如果是整数，您正在寻找[`fmod()`](http://php.net/manual/en/function.fmod.php)：

```
if (fmod($number, 1) == 0) // $number DOES NOT have a significant decimal part
{
    // is whole number
} 
```

否则，[`is_int()`](http://php.net/manual/en/function.is-int.php)就够了。

* * *

**编辑：**另一种检查小数部分的方法是：

```
if (round($number, 0) == $number)
{
    // is whole number
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-14T21:32:19.773

*   `is_int`如果您还需要它是整数类型，
*   `ctype_digit`如果您正在测试字符串，
*   `filter_var($input,FILTER_VALIDATE_INT)`对全部。

并搜索手册

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-04T15:31:01.803

我已经尝试了几个答案（也来自其他页面），但在我的情况下最有效的是：

```
$number = floatval($number);
if ($number == round($number)) {
    // Number does not have decimals (or .00000)
}else{
    // Number does have decimals
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-27T15:12:18.963

也许这是最优雅的解决方案：

```
if ( $answer3 != (int) ( $answer3 ) ) { 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-14T21:29:33.687

如果 $answer3 不是字符串，您可以尝试使用：

```
is_float() 
```

看看是否是一个浮点值，而不仅仅是一个数值。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-24T10:18:34.137

对于您输入的每个输入，此函数在 99% 的时间内完成了这项工作：

```
function($number) {
    (float)(int)$number == (float)$number;
} 
```

注意：这里不需要严格比较，因为当转换为 (float) 时，两者总是相同的类型。

受[这篇关于](http://www.maweki.de/wp/2012/11/php-comparison-explained/)比较值时 PHP 疯狂的文章的启发，我对以下输入进行了一些测试：

**正如预期的那样**

这些值**没有**小数部分：

```
1.0  // TRUE
'1.0'  // TRUE
true  // TRUE
false  // TRUE
'true'  // TRUE
'false'  // TRUE
10e3  // TRUE
0123  // TRUE
null  // TRUE
'test'  // TRUE
1  // TRUE
0  // TRUE
1.2e3  // TRUE
0xfe  // TRUE
0b0  // TRUE
0b1  // TRUE
b0  // TRUE
b1  // TRUE
-0xfe  // TRUE
''  // TRUE
'8bottles'  // TRUE
'8.0bottles'  // TRUE
'0foo'  // TRUE
array()  // TRUE
'0x12foo'  // TRUE
'0123'  // TRUE
'0xfe'  // TRUE
new Object // TRUE 
```

这些值**确实**有小数部分：

```
'1.1' // FALSE
1.1 // FALSE
10e-3 // FALSE
.9 // FALSE
0.9 // FALSE
.1 // FALSE
0.1 // FALSE
0123.2 // FALSE
7E-10 // FALSE
1.2e-3 // FALSE 
```

**不期望：**

```
'8e2bottles' // FALSE 
```

正如文章中所解释的，这个值会做一些疯狂的事情，也会在我的函数中失败。这是因为转换为`int`并`float`给出了完全不同的值。所以要做好准备！

```
(int)'8e2bottles' // 8
(float)'8e2bottles' // 800.0 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-07T12:02:06.483

我检查了所有答案，几乎没有人试图检查浮动部分。这是正确的做法，只是用等号比较浮点数不是一个好主意。最好的解决方案是：

```
function isIntegerNumber($number){
  $floor = floor($number);
  $fract = abs($number - $floor);
  return is_numeric($number) && $fract < 1e-16;
}

echo var_export(isIntegerNumber("10X"), true).PHP_EOL;
echo var_export(isIntegerNumber("3.0001"), true).PHP_EOL;
echo var_export(isIntegerNumber("-23.0001"), true).PHP_EOL;
echo var_export(isIntegerNumber(-10.01), true).PHP_EOL;
echo var_export(isIntegerNumber("3.00"), true).PHP_EOL;
echo var_export(isIntegerNumber("-23.00"), true).PHP_EOL;
echo var_export(isIntegerNumber(-10.00), true).PHP_EOL;
echo var_export(isIntegerNumber(5), true).PHP_EOL;
echo var_export(isIntegerNumber(-5), true).PHP_EOL;
$tricky = (0.1+0.7)*10.0;
echo "now something a bit tricky: ".PHP_EOL;
echo "(0.1+0.7)*10.0 = ".var_export($tricky, true) .' (type: "'.gettype($tricky).'")'.PHP_EOL;
echo 'is it int: '.var_export(isIntegerNumber($tricky), true).PHP_EOL;
echo 'is it 8: '.var_export($tricky == 8, true).PHP_EOL; 
```

结果：

```
false
false
false
false
true
true
true
true
true
now something a bit tricky: 
(0.1+0.7)*10.0 = 7.9999999999999991 (type: "double")
is it int: false
is it 8: false 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-15T11:01:41.747

我是这方面的新手，但我发现在 PHP 中检查数字是浮点数还是整数的最佳方法是通过简单的检查：

```
if ($number == round($number)) { } else { } 
```

如果它真的是一个整数，它将是相等的。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-11-29T00:34:29.587

试试这个

```
if(!is_numeric($nabtron) || $nabtron != floor($nabtron) || $nabtron < 0){
    echo "it's not numeric or is a float or a negative number";
} 
```

或者如果您需要积极的结果：

```
if(is_numeric($nabtron) && $nabtron == floor($nabtron) &&  $nabtron < 0){
    echo "it's numeric and not a float and is zero or positive number";
} 
```

# sql-server - 使用连接或联合进行不同的过滤

> ID：11041594
> 
> 赞同：-2
> 
> 时间：2012-06-14T21:26:57.043
> 
> 标签：sql-server, join, union

我有 3 张桌子。

*   tb_post：id、用户、文本和
*   tb_follow：id、用户、followed_user 和
*   tb_share: id, fk_post_id, user（分享帖子的人）

所以 user01 想要检索 user01 之后的用户的所有帖子 + user01 关注的用户共享的所有帖子

编辑：我怎么能得到那个？我试过这个查询：

```
select * from post 
left join follow on post_user = follow_user 
left join share on follow_user = share_user 
```

但我只得到了第一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:50:29.623

我不相信你可以在不使用工会的情况下做到这一点。性能方面，您基本上是在运行两个查询。一定要索引适当的字段，你应该没问题。

```
SELECT tb_post.id, tb_post.text
FROM tb_post INNER JOIN tb_follow ON tb_post.user = tb_follow.followed_user
WHERE (((tb_follow.user)=100))
ORDER BY tb_post.id
UNION SELECT tb_post.id, tb_post.text
FROM (tb_share INNER JOIN tb_follow ON tb_share.user = tb_follow.followed_user) INNER JOIN tb_post ON tb_share.fk_post_id = tb_post.id
WHERE (((tb_follow.user)=100))
ORDER BY tb_post.id; 
```

# ios - 通过 setPosition 移动 CALayer 的奇怪行为

> ID：11041597
> 
> 赞同：0
> 
> 时间：2012-06-14T21:27:15.733
> 
> 标签：ios, calayer, gestures

我正在尝试根据平移手势移动一组 CALayers。

我正在使用这段代码：

```
-(void)handlePanFrom:(UIPanGestureRecognizer *)recognizer {
    float newX = 0;  

    for (CALayer *layer in self.layer.sublayers) 
    {        
        [ layer setPosition:CGPointMake(layer.frame.origin.x + 50, layer.frame.origin.y)];
    }
} 
```

但是 CALayers 正在向屏幕的一侧移动

我的问题是，我做错了吗？

CALayers 不应该这样移动吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:33:24.377

该位置实际上位于中心而不是原点（除非您更改了锚点，但我假设您没有更改）。

如果您希望图层向右移动 50 个点，那么您应该将位置更改为中心 + 50。像这样：

```
[layer setPosition:CGPointMake(layer.position.x + 50, layer.position.y)]; 
```

* * *

## 然而...

您永远不会使用平移手势识别器的值，因此对于每个平移事件，您将每层向右移动 50 个点。如果这就是您所说的“CALayers 正在向屏幕一侧移动”的意思，那么这就是您做错了。就像你告诉他们的那样，这些层正在移动。

# c# - 如何配置 Simple Injector 在 ASP.NET MVC 中运行后台线程

> ID：11041601
> 
> 赞同：8
> 
> 时间：2012-06-14T21:27:20.990
> 
> 标签：c#, .net, asp.net-mvc-3, dependency-injection, simple-injector

我正在使用 Simple Injector 来管理我注入的依赖项的生命周期（在这种情况下`UnitOfWork`），我很高兴拥有一个单独的装饰器，而不是我的服务或命令处理程序来处理保存和处理，这使得编写业务逻辑时代码更容易层（我遵循[这篇博](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91 ".NET Junkie - 同时……在我的架构的命令方面")文中概述的架构）。

通过在组合根容器的构造过程中使用 Simple Injector MVC NuGet 包和以下代码，上述工作完美（并且非常容易），如果图中存在多个依赖项，则将同一实例注入所有对象 - 非常适合实体框架模型上下文。

```
private static void InitializeContainer(Container container)
{
    container.RegisterPerWebRequest<IUnitOfWork, UnitOfWork>();
    // register all other interfaces with:
    // container.Register<Interface, Implementation>();
} 
```

我现在需要运行一些后台线程，并从[关于线程的 Simple Injector 文档中](https://simpleinjector.readthedocs.org/en/latest/howto.html#multi-threaded-applications "SimpleInjector 线程文档")了解命令可以被代理如下：

```
public sealed class TransactionCommandHandlerDecorator<TCommand>
    : ICommandHandler<TCommand>
{
    private readonly ICommandHandler<TCommand> handlerToCall;
    private readonly IUnitOfWork unitOfWork;

    public TransactionCommandHandlerDecorator(
        IUnitOfWork unitOfWork, 
        ICommandHandler<TCommand> decorated)
    {
        this.handlerToCall = decorated;
        this.unitOfWork = unitOfWork;
    }

    public void Handle(TCommand command)
    {
         this.handlerToCall.Handle(command);
         unitOfWork.Save();
    }
} 
```

ThreadedCommandHandlerProxy：

```
public class ThreadedCommandHandlerProxy<TCommand>
    : ICommandHandler<TCommand>
{
    Func<ICommandHandler<TCommand>> instanceCreator;

    public ThreadedCommandHandlerProxy(
        Func<ICommandHandler<TCommand>> creator)
    {
        this.instanceCreator = creator;
    }

    public void Handle(TCommand command)
    {
        Task.Factory.StartNew(() =>
        {
            var handler = this.instanceCreator();
            handler.Handle(command);
        });
    }
} 
```

但是，从这个线程示例文档中，我可以看到使用了工厂，如果我将工厂引入我的命令和服务层，事情会变得混乱和不一致，因为我将为不同的服务使用不同的保存方法（一个容器处理保存，其他实例化的工厂在services 处理保存和处理） - 您可以看到服务代码框架在没有任何工厂的情况下是多么清晰和简单：

```
public class BusinessUnitCommandHandlers :
    ICommandHandler<AddBusinessUnitCommand>,
    ICommandHandler<DeleteBusinessUnitCommand>
{
    private IBusinessUnitService businessUnitService;
    private IInvoiceService invoiceService;

    public BusinessUnitCommandHandlers(
        IBusinessUnitService businessUnitService, 
        IInvoiceService invoiceService)
    {
        this.businessUnitService = businessUnitService;
        this.invoiceService = invoiceService;
    }

    public void Handle(AddBusinessUnitCommand command)
    {
        businessUnitService.AddCompany(command.name);
    }

    public void Handle(DeleteBusinessUnitCommand command)
    {
        invoiceService.DeleteAllInvoicesForCompany(command.ID);
        businessUnitService.DeleteCompany(command.ID);
    }
}

public class BusinessUnitService : IBusinessUnitService
{
    private readonly IUnitOfWork unitOfWork;
    private readonly ILogger logger;

    public BusinessUnitService(IUnitOfWork unitOfWork, 
        ILogger logger)
    {
        this.unitOfWork = unitOfWork;
        this.logger = logger;
    }

    void IBusinessUnitService.AddCompany(string name)
    {
        // snip... let container call IUnitOfWork.Save()
    }

    void IBusinessUnitService.DeleteCompany(int ID)
    {
        // snip... let container call IUnitOfWork.Save()
    }
}

public class InvoiceService : IInvoiceService
{
    private readonly IUnitOfWork unitOfWork;
    private readonly ILogger logger;

    public BusinessUnitService(IUnitOfWork unitOfWork, 
        ILogger logger)
    {
        this.unitOfWork = unitOfWork;
        this.logger = logger;
    }

    void IInvoiceService.DeleteAllInvoicesForCompany(int ID)
    {
        // snip... let container call IUnitOfWork.Save()
    }
} 
```

有了上面我的问题开始形成，正如我从[ASP .NET PerWebRequest生命周期的文档中](https://simpleinjector.codeplex.com/wikipage?title=PerWebRequestExtensionMethod)了解到的那样，使用了以下代码：

```
public T GetInstance()
{
    var context = HttpContext.Current;

    if (context == null)
    {
        // No HttpContext: Let's create a transient object.
        return this.instanceCreator();
    }

    object key = this.GetType();
    T instance = (T)context.Items[key];

    if (instance == null)
    {
        context.Items[key] = instance = this.instanceCreator();
    }
    return instance;
} 
```

以上对于每个 HTTP 请求都可以正常工作`HttpContext.Current`，但是如果我使用它启动一个新线程，`ThreadedCommandHandlerProxy`它将创建一个新线程，并且该线程`HttpContext`中将不再存在。

由于`HttpContext`在每次后续调用中 都将为空，因此注入服务构造函数的所有对象实例都是新的和唯一的，这与每个 Web 请求的正常 HTTP 相反，其中对象在所有服务中作为同一个实例正确共享。

因此，将以上内容总结为问题：

无论是从 HTTP 请求还是通过新线程创建的，我将如何获取构造的对象和注入的公共项目？

`UnitOfWork`在命令处理程序代理中由线程管理是否有任何特殊注意事项？在处理程序执行后如何确保它被保存和处理？

如果我们在命令处理程序/服务层中遇到问题并且不想保存`UnitOfWork`，我们会简单地抛出异常吗？如果是这样，是否有可能在全局级别捕获它，或者我们是否需要从处理程序装饰器或代理中的`try`-中捕获每个请求的异常？`catch`

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T23:45:03.777

**让我首先警告说，如果您希望在 Web 应用程序中异步执行命令，您可能需要退后一步，看看您想要实现的目标。在后台线程上启动处理程序后，总是存在 Web 应用程序被回收的风险。当 ASP.NET 应用程序被回收时，所有后台线程都将被中止。将命令发布到（事务）队列并让后台服务接收它们可能会更好。这确保了命令不会“丢失”。并且还允许您在处理程序未成功时重新执行命令。它还可以使您免于进行一些讨厌的注册（无论您选择哪种 DI 框架，您都可能拥有这些注册），但这可能只是一个附带问题。如果您确实需要异步运行处理程序，**

有了这个，你需要的是以下内容。

正如您所指出的，由于您正在异步运行（某些）命令处理程序，因此您不能在它们上使用每个 Web 请求的生活方式。您将需要一个混合解决方案，在每个 Web 请求和“其他东西”之间混合。其他东西很可能是[每个生命周期的范围](http://simpleinjector.codeplex.com/wikipage?title=ObjectLifestyleManagement#PerLifetimeScope)。由于几个原因，这些混合解决方案没有内置扩展。首先，它是一个非常奇特的功能，没有多少人需要。其次，您可以将任何两种或三种生活方式混合在一起，这样几乎是无穷无尽的混合体组合。最后，（非常）容易自己注册。

在 Simple Injector 2 中，`Lifestyle`添加了该类，它包含一个`CreateHybrid`方法，可以结合任意两种生活方式来创建新的生活方式。这是一个例子：

```
var hybridLifestyle = Lifestyle.CreateHybrid(
    () => HttpContext.Current != null,
    new WebRequestLifestyle(),
    new LifetimeScopeLifestyle()); 
```

您可以使用这种混合生活方式来注册工作单元：

```
container.Register<IUnitOfWork, DiUnitOfWork>(hybridLifestyle); 
```

由于您将工作单元注册为 Per Lifetime Scope，因此您必须为某个线程显式创建和处置 Lifetime Scope。最简单的做法是将其添加到您的`ThreadedCommandHandlerProxy`. 这不是最[可靠](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29 "维基百科-固体")的做事方式，但它是我向您展示如何做到这一点的最简单方法。

> 如果我们在命令处理程序/服务层中遇到问题并且不想保存 UnitOfWork，我们会简单地抛出异常吗？

典型的做法是抛出异常。这实际上是例外的一般规则：

> 如果你的方法不能像它的名字所承诺的那样做，那就扔。[->](http://www.hanselman.com/blog/IfYourMethodCantDoWhatItsNamePromisesItCanThrow.aspx)

命令处理程序应该不知道它是如何执行的上下文，你最不想做的就是区分它是否应该抛出异常。所以投掷是你最好的选择。但是，在后台线程上运行时，您最好捕获该异常，因为如果您不捕获它，.NET 将杀死整个 AppDomain。在 Web 应用程序中，这意味着 AppDomain 循环，这意味着您的 Web 应用程序（或至少该服务器）将在短时间内离线。

另一方面，您也不希望丢失任何异常信息，因此您应该记录该异常，并且可能希望记录该命令的序列化表示以及该异常，以便您可以查看传入的数据。添加到`ThreadedCommandHandlerProxy.Handle`方法中，它看起来像这样：

```
public void Handle(TCommand command)
{
    string xml = this.commandSerializer.ToXml(command);    

    Task.Factory.StartNew(() =>
    {
        var logger = 
            this.container.GetInstance<ILogger>();

        try
        {
            using (container.BeginTransactionScope())
            {
                // must be created INSIDE the scope.
                var handler = this.instanceCreator();
                handler.Handle(command);
            }
        }
        catch (Exception ex)
        {
            // Don't let the exception bubble up, 
            // because we run in a background thread.
            this.logger.Log(ex, xml);
        }
    });
} 
```

我警告过异步运行处理程序可能不是最好的主意。但是，由于您正在应用此命令/处理程序模式，您稍后将能够切换到使用队列，而无需更改应用程序中的单行代码。只需编写某种`QueueCommandHandlerDecorator<T>`（序列化命令并将其发送到队列）并更改组合根中的连接方式，您就可以开始了（当然不要忘记实现从队列执行命令的服务）。换句话说，这种 SOLID 设计的优点在于，实现这些功能与应用程序的大小保持一致。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T10:26:03.863

[在 ASP.NET 中运行后台线程的](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)部分问题可以通过一个方便的命令处理程序装饰器来克服：

```
public class AspNetSafeBackgroundCommandHandlerDecorator<T>
    : ICommandHandler<T>, IRegisteredObject
{
    private readonly ICommandHandler<T> decorated;

    private readonly object locker = new object();

    public AspNetSafeBackgroundCommandHandlerDecorator(
        ICommandHandler<T> decorated)
    {
        this.decorated = decorated;
    }

    public void Handle(T command)
    {
        HostingEnvironment.RegisterObject(this);

        try
        {
            lock (this.locker)
            {
                this.decorated.Handle(command);
            }
        }
        finally
        {
            HostingEnvironment.UnregisterObject(this);
        }            
    }

    void IRegisteredObject.Stop(bool immediate)
    {
        // Ensure waiting till Handler finished.
        lock (this.locker) { }
    }
} 
```

当您将此装饰器放在命令处理程序和 . 之间时`ThreadedCommandHandlerProxy`，您将确保（在正常情况下） AppDomain 在此类命令运行时不会被卸载。

# php - 在 PHP codeigniter 中访问对象变量

> ID：11041604
> 
> 赞同：0
> 
> 时间：2012-06-14T21:27:33.050
> 
> 标签：php, mysql, codeigniter

我的模型中有以下代码：

```
public function getSite()
{
    $this->load->library('site');
    $data = array();
    $str = "SELECT * FROM sitematrix_sites";
    $query = $this->getQuery($str);
    if($query){ 
        foreach($query->result() as $row){
            $site = new Site();
            array_push($data, $site->load($row));
        }

        foreach($data as $site){
            $site->data['database'] = $this->getDatabase($site->data['site_id']);
            $site->data['baseline'] = $this->getBaseline($site->data['site_id']);
        }

        return $data;
    }
    else{
        return false;
    }
} 
```

我创建了一个名为 site 的类：

```
class Site{

public $data;

public function __contruct(){

    $this->data = ArrayObject(array(), ArrayObject::STD_PROP_LIST);

    $this->data['site_id']                      =   '';
    $this->data['site']                         =   '';
    $this->data['site_code']                    =   '';
    $this->data['tc_10']                        =   array();
    $this->data['tc9x']                         =   array();
    $this->data['tc8x']                         =   array();
    $this->data['tc2008']                       =   array();
    $this->data['eng_2005']                     =   array();
    $this->data['database']                     =   array();
    $this->data['baseline']                     =   array(); 
```

但是，我收到以下错误：

```
<p>Severity: Notice</p>
<p>Message:  Trying to get property of non-object</p>
<p>Filename: models/sitematrix_model.php</p>
<p>Line Number: 77</p> 
```

有什么想法吗？我曾尝试以 as`$site->data->database`和 as访问这些值，`$site->data['database']`但两者都不起作用。

```
line 77:  $site->data['database'] = $this->getDatabase($site->data['site_id']); 
```

函数getDatabase：

```
public function getDatabase($id){
    $database = array();
    $str = "SELECT * FROM site_database where site_id='$id'";
    $query = $this->getQuery($str);
    if($query){
        foreach($query->result() as $row){
            array_push($database, $row->name);
        }
    }

    return $database;
} 
```

函数获取查询：

```
public function getQuery($str){
    $data = array();
    $query = $this->db->query($str);

    if(!$query || $query->num_rows() == 0){
        return false;
    }
    return $query;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:48:16.960

做了一些调查，我认为这`$site`不是一个`Site`，而是一个数组。

`Array ( [site_id] => 1
[site] => Ames
[site_code] => ame
[windows_ref_unit_location] => \\plm\amnas\tc_ref
[unix_ref_unit_location] => /tc_ref
[windows_rte_location] => \\plm\amnas\tc_rte
[unix_rte_location] => /tc_rte
[windows_toolbox_location] => &lt;path-to-local-toolbox&gt;
[unix_toolbox_location] => /tc_ref/TOOLBOX
[UGS_LICENSE_SERVER] => 28000@cinxflex1,28000@cinxflex2,28000@cinxflex3
[UGII_LICENSE_FILE] => 27000@cinxflex1,27000@cinxflex2,27000@cinxflex3
[unix_dev_units] => /tc_work
[unix_devop_path] => /usr/site/devop_tools
[netapp_filer] => \\plm\amnas
[perforce_proxy_path] => /p4p/p4p_cache
[primary_contact] => Philomena Siddle
[secondary_contact] => Mathieu Sarrazy
[num_users] => 7
)`

因此，没有这样的东西`$site->data['site_id']`，但是`$site['site_id']`；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:26:48.107

我很确定您的错误消息是在抱怨

$this->getDatabase

该行的一部分，而不是 $site-> 方面。

所有这些功能都在模型上，而不是在课堂上吗？

当您在模型中工作时，$this-> 必须坚持使用该类中的函数和变量

# xamarin.ios - 为什么 MvvmCross 中的 MvxModalSupportTouchViewPresenter 只支持一种模态视图

> ID：11041605
> 
> 赞同：1
> 
> 时间：2012-06-14T21:27:33.423
> 
> 标签：xamarin.ios, modal-dialog, mvvmcross

我有一个应用程序需要在模态视图之上的模型视图，但演示者 MvxModalSupportTouchViewPresenter 不支持它。在我开始扩展它之前有什么理由吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:45:07.483

默认的 mvx 演示者用于提供基本演示。如果您需要自定义功能，请务必创建自己的演示者逻辑。有关示例，请参阅会议示例 - ir 通过选项卡控制器重新路由导航。

我预计许多手机应用程序，尤其是平板电脑应用程序将成为他们自己的演示者。

* * *

另请参阅最近关于在模态演示中显示导航栏的讨论 - [MvvmCross Using a modal ViewController from a Tab](https://stackoverflow.com/questions/11037119/mvvmcross-using-a-modal-viewcontroller-from-a-tab)

* * *

希望有帮助

斯图尔特

# opencv - 在 OpenCV 上获取屏幕大小

> ID：11041607
> 
> 赞同：14
> 
> 时间：2012-06-14T21:27:43.830
> 
> 标签：opencv, screen, resolution

如何在 OpenCV 上获得计算机屏幕分辨率？我需要使用整个屏幕宽度并排显示两个图像，OpenCV 需要我想要创建的确切窗口大小。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-05-07T00:36:39.207

您可以在有或没有 opencv 的情况下使用此解决方案跨平台解决方案：

```
#if WIN32
  #include <windows.h>
#else
  #include <X11/Xlib.h>
#endif

//...

void getScreenResolution(int &width, int &height) {
#if WIN32
    width  = (int) GetSystemMetrics(SM_CXSCREEN);
    height = (int) GetSystemMetrics(SM_CYSCREEN);
#else
    Display* disp = XOpenDisplay(NULL);
    Screen*  scrn = DefaultScreenOfDisplay(disp);
    width  = scrn->width;
    height = scrn->height;
#endif
}

int main() {
    int width, height;
    getScreenResolution(width, height);
    printf("Screen resolution: %dx%d\n", width, height);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T04:23:59.877

在 Linux 中，试试这个

```
#include <stdio.h>
int main()
{
 char *command="xrandr | grep '*'";
 FILE *fpipe = (FILE*)popen(command,"r");
 char line[256];
 while ( fgets( line, sizeof(line), fpipe))
 {
  printf("%s", line);
 }
 pclose(fpipe);
 return 0;
} 
```

在 Windows 中，

[http://cppkid.wordpress.com/2009/01/07/how-to-get-the-screen-resolution-in-pixels/](http://cppkid.wordpress.com/2009/01/07/how-to-get-the-screen-resolution-in-pixels/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-09T08:22:58.933

使用 opencv 而不是 OS 函数：

```
cv.namedWindow("dst", cv.WND_PROP_FULLSCREEN)
cv.setWindowProperty("dst",cv.WND_PROP_FULLSCREEN,cv.WINDOW_FULLSCREEN)
(a,b,screenWidth,screenHeight) = cv.getWindowImageRect('dst') 
```

所以我在全屏模式下创建一个窗口并询问它的宽度和高度

它应该适用于任何操作系统，但它只适用于 Windows。在 Linux 下，窗口不是全屏的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-22T21:20:40.630

这不是如何获取屏幕宽度和高度的答案，但它可以让您解决使用全屏尺寸显示两个图像的问题。

1）创建一个像这样的窗口：

```
namedWindow("hello", WINDOW_NORMAL); 
```

这将允许您自己设置窗口大小，您可以轻松设置最大化它，它将占据整个屏幕。下次运行程序时，它还会记住设置。如果需要，您还可以设置标志以保持纵横比。

2）如果您需要获取确切的像素数，可以使用以下方法获取窗口大小：

```
getWindowImageRect("hello"); 
```

这样，您可以轻松地将两个图像合二为一并在屏幕上显示结果。我自己做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T23:07:54.307

你不能它是一个操作系统功能 - 这取决于你的操作系统

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-06T18:58:47.813

在新版本中，它也可以像下面这样工作，这很棒:-D

```
printf("%f",cap.get(CV_CAP_PROP_FRAME_HEIGHT)); 
```

用于设置视频分辨率。

```
<capture_handle>.set(property_in_caps, value_in_double);

ex, cap.set(CV_CAP_PROP_FRAME_HEIGHT, 720); 
```

# jquery - 统一 jQuery UI 的 Sortable 和 Draggable 之间的拖放动画

> ID：11041609
> 
> 赞同：2
> 
> 时间：2012-06-14T21:27:47.420
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable, jquery-ui-droppable

在将可排序或可拖动对象拖放到可放置对象时，我想实现相同的视觉效果，在这种情况下，即 jQuery 的简单隐藏动画。

以下适用于可拖动项目：

```
$( '.droppable' ).droppable( {
    drop: function( event, ui ) {
        ui.draggable.hide( 500 );
    }
} ); 
```

拖放时，拖动的可拖动对象会以精美的动画效果隐藏，同时在视觉上保持在可拖放对象的顶部。然而，在可排序的情况下，被拖动的项目首先恢复到其原始位置，然后隐藏。

请参阅此小提琴以获取工作示例，并尝试将任何黄色（可排序）或绿色（可拖动）项目拖动到红色（可放置）区域：http: [//jsfiddle.net/tYfNb/](http://jsfiddle.net/tYfNb/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:09:15.203

我设法通过克隆和定位元素使其工作，它有点hack，可能有一种更优雅的方式。

[http://jsfiddle.net/tYfNb/1/](http://jsfiddle.net/tYfNb/1/)

# ios5 - 在 XCode 4.3.2 中实现视频文件

> ID：11041610
> 
> 赞同：0
> 
> 时间：2012-06-14T21:27:57.463
> 
> 标签：ios5, video, xcode4.3

想知道如何在控制器中包含视频文件。我也想在控制器中包含文本，所以如果用户点击视频，它应该会弹出。我也不确定要在情节提要中包含哪个视图。理想情况下，我想制作一个位于文本下方的矩形。单击此矩形将启动视频。

这是我正在尝试做的示例图片

![在此处输入图像描述](../Images/d959d04794851cbea91214c83affa1f8.png)

# html - Firefox中奇怪的浮动行为

> ID：11041611
> 
> 赞同：0
> 
> 时间：2012-06-14T21:27:58.773
> 
> 标签：html, css

首先，可能已经有这样的问题了，但我一生都找不到一个问题，所以如果有的话，请不要找我。请直接指导我。

css float 在 Firefox 中的行为很奇怪，但在其他浏览器中没有。我需要将新闻提要中的图像向左浮动，以便它旁边的文本位于图像的顶部而不是底部。当图像在 Firefox 中浮动时，内部气泡不会清除图像，而外部气泡不会清除任何图像。

这是CSS：

```
#news {width:99.2%; background-color:#E9F7FE; border-radius:0.2em; padding:5px; position:relative; margin-bottom:10px}
.picture {width:70px;overflow:hidden; margin-right:5px; border-radius:0.2em; display:inline-block; float:left;}
.bubble {float:left; padding:5px;border-radius:0.2em; background-color:#E9F7FE; margin-bottom:5px; margin-right:10px; width:33.3%; margin-bottom:10px; }
.innerbubble {position:relative; background-color:white; border-radius:0.2em; padding:5px;}
#probwarn {border-radius:0.2em; background-color:#E9F7FE; text-align:center; margin-top:5px; width:100%; margin-bottom:5px; float:right;} 
```

和标记：

```
<h1>Latest News:</h1>

<div class="innerbubble">

<a href="index.html"><div class="picture"><img src=" 
 http://newbornsounds.co.uk/artistspictures/Not%20by%20design/Andy%20Evans%20logo%205.jpg" width="100%"  alt="NewBorn Sounds" >

</div>

News: Not By Design<br></a>

<hr>

<div class="picture"><img src=" 
  ../imageuploads/13396991365_277695398952342_104081122980438_707146_2014948057_n.jpg" width="100%"  alt="NewBorn Sounds" >

</div>

<a href="JacobWindsor">New Artist: Jacob Windsor<br></a><hr><a href="JacobWindsor/gigs">

<div class="picture"><img src="     ../imageuploads/13396991365_277695398952342_104081122980438_707146_2014948057_n.jpg"     width="100%"  alt="NewBorn Sounds" >

</div>

New Gig: a from Jacob Windsor</a><br><hr></div></div> 
```

很抱歉，标记有点难以阅读并且格式不正确。它是用 PHP 编写的，所以有点奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:47:31.293

您可以简化 HTML 和 CSS，这将使您的生活更轻松，我为您创建了一个小提琴，并在这里这样做：http: [//jsfiddle.net/P93Ta/1/](http://jsfiddle.net/P93Ta/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:51:56.377

如果我理解你在问什么，`hr {clear:both;}`应该解决你的问题。这将导致`<hr>`始终跨越页面，低于浮动图像，这会将其他所有内容向下推，这样图像就不会彼此相邻浮动（但文本仍然显示在顶部旁边对应的图像）。

jsFiddle：http: [//jsfiddle.net/ZWvCX/1/](http://jsfiddle.net/ZWvCX/1/)

`hr {clear:left;}`实际上足以解决所描述的特定问题，但似乎适合`<hr>`在两个方向上清除。

# javascript - Chrome 中的标签 ID 是如何生成的？

> ID：11041613
> 
> 赞同：1
> 
> 时间：2012-06-14T21:28:01.443
> 
> 标签：javascript, google-chrome, google-chrome-extension

它们是增量创建的吗？基本上它们是整数，但我想知道它们是否以特定方式生成。知道这对我正在编写的应用程序很有用。

编辑：我需要记住这些 ID，我正在考虑是否可以命令它们进行搜索。如果它们的创建数量越来越多，那么很容易将搜索实现为二进制搜索，这就是我要问的原因

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T21:36:50.720

我可以在与 ID 相关的文档中找到的唯一内容是以下摘录：

> id ( 整数 ) 选项卡的 ID。标签 ID 在浏览器会话中是唯一的。

所以我们可以从中收集到的是，没有两个选项卡会在同一个会话中获得相同的 ID。文档中没有关于它们是如何生成的信息。

最终，我认为任何在这种意义上具有预测性的方法都注定会出现错误和失败，您应该构建响应式应用程序而不是预测性应用程序。

不要假设下一个选项卡将使用 ID #12 打开，而是捕获选项卡的创建，然后您将知道 ID 并可以基于该 ID 执行操作。

你需要的是[`tab onCreated event`](http://code.google.com/chrome/extensions/tabs.html#event-onCreated). 创建选项卡后，您将获得一个[`tab`对象](http://code.google.com/chrome/extensions/tabs.html#type-Tab)，您可以从中获取`tabid`并`windowid`执行您想要的任何操作。

由于您没有告诉我们太多有关您的最终目标的信息，因此除了为您指明正确的方向之外，我无法为您提供任何具体的示例/代码来帮助您。

* * *

*评论继续：*

如果您只是想通过 ID 查找选项卡，将选项卡元数据存储在字典而不是列表中不是更容易吗？

```
var metadataRepository = {};
metadataRepository[tab.id] = tab.metadata; 
```

然后：

```
var metadata = metadataRepository[tabId];
if (metadata) {
   // Do Stuff
} 
```

* * *

*更多信息：*

从我目前的 Chrome (19.xxx...) 开始，V8 引擎支持 JavaScript 1.6 方法[`Array.filter(...)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)

我在[这里](http://jsfiddle.net/sw56m/)做了一个小测试，模拟使用过滤器搜索数组并在每次迭代时进行类型检查和字符串搜索（常见的东西）。

在我的机器（相对较新的 i7-2600k）上花了 25 毫秒来爆破 10,000 个条目。虽然这与编译语言相比并不快，但在处理 100 个选项卡时它会是亚毫秒级。我认为您无需过多担心性能。

如果您的应用程序经常查找此内容，请考虑使用本地缓存或上面提到的字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:04:18.280

要跟踪所有选项卡并解决您的问题，请在扩展上下文中创建一个数组。

```
window.CurrentTabs = {}; 
```

然后，只需连接删除和添加，以便跟踪所有活动选项卡。

```
chrome.tabs.onCreated.addListener(function(tab) { window.CurrentTabs[tab.id]=tab  });
chrome.tabs.onRemoved.addListener(function(tabID){ delete window.CurrentTabs[tabID]; }); 
```

一些提及：

1.  您还需要在扩展程序启动时运行一次`chrome.tabs.query(...)`，因为在扩展程序激活点之前存在选项卡的原因有很多

2.  您还需要研究其他场景，例如跨窗口拖动选项卡之类的东西（我不知道到底发生了什么，但有事件处理程序）

3.  是的，选项卡 ID 是增量的，但它们不是“完全”增量的。您可能会调用`chrome.tabs.create()`并最终获得选项卡 ID `51`，并且`58`该范围内没有有效的选项卡`52-57`。[那是 Chrome 的行为](http://code.google.com/codesearch#OAMlx_jo-ck/src/chrome/browser/extensions/api/tabs/tabs.cc&type=cs)。

4.  对于您的搜索功能，只需使用它

    ```
    chrome.tabs.query({ /* EMPTY SEARCH PARAMETERS */ }, function(tabs){ /* DO WHAT YOU WANT HERE */ }) 
    ```

# mongodb - 如何导出/转储 mongodb 数据库？

> ID：11041614
> 
> 赞同：24
> 
> 时间：2012-06-14T21:28:04.203
> 
> 标签：mongodb, import

我尝试了这样的 mongo 导出：

```
./mongodump --db local --collection lecturer 
```

然后我尝试了：

```
./mongodump --db  local --collection posts --out - >  lecturer .csv 
```

我得到同样的错误信息：`Syntax Error: syntax error (shell):1`

1.  我的代码有什么问题？
2.  如果导出成功，数据存储在哪里？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-06-25T07:17:26.903

## 如何备份和恢复数据库

启动 Mongo，在终端中打开一个新选项卡。首先导航到要保存备份的文件夹，然后键入以下命令。

**备份单个数据库：**

```
mongodump --host localhost --port 27017 --db db_name 
```

**恢复单个数据库：**

```
mongorestore --host localhost --port 27017 --db **** dump/db_name 
```

（在这种情况下，`****`代表数据库的 UserDefinedName > mydb dump/db_name > 这会将转储数据库导入 mydb）

**备份所有数据库：**

```
mongodump --host localhost --port 27017 
```

**恢复所有数据库：**

```
mongorestore --host localhost --port 27017  dump 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-06-14T21:30:26.700

`mongodump`是一个命令行实用程序，它应该从系统命令提示符而不是 mongo javascript shell 运行。

```
./mongodump --db local --collection lecturer 
```

如果成功，此命令将`dump`在当前目录的目录下创建一些文件。

# c# - Outlook 创建文件夹 - 基本设置和方法

> ID：11041617
> 
> 赞同：0
> 
> 时间：2012-06-14T21:28:13.893
> 
> 标签：c#, visual-studio-2010, outlook, directory, cdo.message

什么是正确的项目引用（.NET 或 COM 或其他）和下载我需要使用 Visual Studio 2010 C# 进行编程，以便我可以在 Outlook 用户邮箱中以编程方式创建 1,000 个文件夹和规则？

我已经尝试过 CDO，但它似乎已经过时并且现在很难使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-13T16:44:34.153

如果您安装了 Outlook，只需将 Outlook 添加到项目引用（COM 选项卡）。

Outlook 不再开发或安装 CDO 1.21。现在，您应该能够使用 Outlook 对象模型完成大多数事情；如果没有，您可以尝试[Redemption](http://www.dimastr.com/redemption)及其[RDO 对象系列](http://www.dimastr.com/redemption/rdo_introduction.htm)- 它的[RDOSession](http://www.dimastr.com/redemption/rdosession.htm)对象大致对应于 CDO 1.21 中的 MAPI.Session 对象；它确实允许[创建文件夹](http://www.dimastr.com/redemption/RDOFolders.htm)和[服务器端 Exchange 规则](http://www.dimastr.com/redemption/rdorule.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:33:58.650

1000 个文件夹和规则似乎很复杂 - 这是针对 Outlook PST 还是 Exchange 邮箱？

我跑题了。CDO / CDONTS 已过时（但在我看来，在 COM 中使用起来很容易）。当前的 API 文档和建议可在此处获得：http: [//msdn.microsoft.com/en-us/library/bb652780.aspx](http://msdn.microsoft.com/en-us/library/bb652780.aspx)

假设您使用 Office 和 VS 的安装默认值，您应该在系统中的某个地方找到互操作程序集 - 只需在您的项目中引用它们并获得一些乐趣。

# regex - 使用 mod_rewrite 的递归路径组件集合

> ID：11041621
> 
> 赞同：0
> 
> 时间：2012-06-14T21:28:39.493
> 
> 标签：regex, .htaccess, mod-rewrite, recursion, url-rewriting

我正在尝试做很多人以前做过很多次的事情，但我似乎无法让它发挥作用。我已经尝试了将近 2 天，我一直在互联网上搜索一个工作示例，发现了许多非常相似的 SO 问题，但没有一个对我有用 - 其中大多数都在使用键/值方法，我只是想要值列表。

* * *

*我想要的是：*

我希望能够使用搜索引擎友好的 URL。由于相关站点当前工作方式的性质，我想转换此请求 URI：

```
/this/is/a/随机/路径

```

...到：

```
/index.php?p[]=this&p[]=is&p[]=a&p[]=random&p[]=path

```

这样当它到达 PHP 时，它将作为`$_GET['p']`. 我也希望它也能容忍斜杠，所以我会得到相同的结果：

```
/this/is/a/随机/路径/

```

* * *

*我是如何尝试这样做的：*

我对正则表达式*还不错*，而且我对 mod_rewrite 的工作原理有合理的理解，但我认为我已经消失在错误的道路上，以至于我再也看不到回去的路了。

这是我目前拥有的：

```
# 打开 mod_rewrite
重写引擎开启

# 允许直接加载 /static 目录中的文件
RewriteCond %{REQUEST_FILENAME} -f
重写规则 ^/?static/(.+)$ - [L]

# 递归捕获所有路径组件
RewriteCond %{REQUEST_URI} !^/?(?:index\.php)?$
重写规则 ^/?([^/]+)(?:/(.+)$|/?$) $2?p[]=$1 [QSA,L]

# 向控制器发送请求
重写规则 ^.*$ index.php [QSA]

```

* * *

*怎么了：*

第一个`RewriteCond`/`RewriteRule`对工作得很好 - 如果我请求目录中存在的文件，`/static`则请求保持原样并提供文件。如果该文件不存在，则它属于第二组规则，以便我可以显示我的一个性感的基于 PHP 的错误页面。

问题在于第二个`RewriteCond`/`RewriteRule`对，也可能是第三个`RewriteRule`。该条件应该存在以确保最终迭代不会导致将脚本名称添加到数组中-这似乎有效。这就是我*认为*第二个`RewriteRule`正在做的事情，我怀疑我在这里错过了一些明显的东西：

```
           ^/? # 以可选的斜杠开头的字符串
       ([^/]+) # 捕获直到下一个斜杠的所有字符
(?:/(.+)$|/?$) # 要么抓取下一个斜杠之后的所有字符，要么匹配结尾

     $2?p[]=$1 # 将捕获的路径组件推送到数组中，并将 URI 下移
       [QSA,L] # 合并上一个查询字符串，继续下一次迭代

```

这是 90% 的工作。我遇到的问题：

*   数组组件的顺序是相反的。我理解为什么会这样，并且我意识到这可能是不可避免的，在 PHP 中使用`array_reverse()`. 我只提到它以防有人能想到我想不到的 mod_rewrite 解决方案。
*   **最后两个位置的重复路径组件会导致它失败**。例如，如果我请求`/home/home`或`/some/path/path`我得到一个标准的 Apache 404 说最后两个路径组件未找到（在上面`/home/home`的`/path/path`两个示例中）。**但是**，如果我在末尾添加另一个路径组件，`/home/home/something`那么它会再次起作用。我无法理解造成这种情况的原因。

任何人都可以解释为什么会发生这种情况，或者提出更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:58:07.447

这不是更容易吗：

```
 RewriteCond ${REQUEST_FILENAME} !-f
 RewriteCond ${REQUEST_FILENAME} !-d
 RewriteRule .* rewrite.php [L] 
```

重写.php：

```
 <?php
 $p = array_filter(explode('/',parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH)));
 // you _could_ of course do an EVIL $_GET['p'] = $p, but I prefer to leave 
 // the superglobals 'read-only'. Not touching $_GET does however mean
 // that index.php needs to be altered somewhat, allowing for a check on isset($p) 
 // and using that as input
 include 'index.php';
 ?> 
```

在 apache 中重写一切都很好，但通常只是在 PHP 本身中解析和确定操作要容易得多，而且以后也更容易维护/更改。

# 问题/备注：

> 如果我通过路径请求文件，您的 htaccess 将允许直接访问文件，我不想这样做我不想这样做，除非它们在 /static

它现在不允许任何或多或少的访问。只有您的 index.php 和 rewrite.php 可以访问，其他任何东西都可以在文档根目录之外，文件应该驻留在您不想允许访问的位置。除非您使用此输入来盲目地将文件包含在您的`index.php`.... `index.php`在这种情况下，这样的事情会做：

```
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^/?static/(.+)$ - [L]

RewriteCond ${REQUEST_URI} !^/?(index\.php)?$
RewriteRule .* rewrite.php [L,QSA] 
```

> 顺便说一句，没有回调的 array_filter() 是什么？就我所见，它所做的只是剥离空组件和 0 组件，我可能希望允许 0。

这是为了防止像错误`/foo//bar`的网址（注意 double `//`.

> 将 preg_split('#/+#', $str, -1, PREG_SPLIT_NO_EMPTY); 会更好？

如果您想允许 0 / 过滤的其他内容`array_filter`，那么是的，该解决方案会更好。

# database - 我将如何收集特定的计算机信息并整理成一个文件？

> ID：11041625
> 
> 赞同：0
> 
> 时间：2012-06-14T21:29:09.187
> 
> 标签：database, vbscript, batch-file

我是一名 IT 人员，我需要做的是以某种方式收集以下信息：

*   戴尔服务标签
*   计算机名称
*   用户名

我网络中的所有用户，然后将该信息分类到文本或 Excel 文件中。

我尝试过使用 VBS 文件，以及为每个用户创建一个 .bat 文件登录脚本，但我似乎并没有让它完全工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T08:58:49.133

这是给出您所要求的代码的代码，但将来请尽可能少地发布您所拥有的代码。

```
'Get Dell Service Tag Info
set ProSet = GetObject("winmgmts:").InstancesOf("Win32_BIOS")
Set ProSet1 = GetObject("winmgmts:").InstancesOf("Win32_SystemEnclosure")
For each Pro in ProSet
  For each Pro1 in ProSet1
    ServiceTag=Pro.SerialNumber
    wscript.echo ServiceTag
    exit for
  Next
  exit for
Next

'get username and computername, could also be asked in a batch
Set oShell     = WScript.CreateObject("WScript.Shell")
Set oShellEnv  = oShell.Environment("Process")
sComputerName  = oShellEnv("ComputerName")
sUsername      = oShellEnv("username")
wscript.echo sComputerName & " " & sUsername 
```

另一种更可靠的方法..

```
Set objWSHNetwork  = CreateObject ("WScript.Network") 
sComputerName = objWSHNetwork.ComputerName
sUsername     = objWSHNetwork.UserName
wscript.echo sComputerName & " " & sUsername 
```

您可以将结果记录到数据库或文本文件中（我认为 Excel 文件不是一个好主意） 这里是一个文本文件的记录过程，稍后可以用 Excel 打开。

```
sub log (user, computer)
  dim fs,f
  set fs=Server.CreateObject("Scripting.FileSystemObject")
  set f=fs.OpenTextFile(Server.MapPath(".\logging.csv"),8,true)
  f.WriteLine now & "," & user & "," & computer
  f.Close:set f=Nothing
  set fs=Nothing
end sub 
```

# xml - Keys：根据属性重新组织定义列表

> ID：11041627
> 
> 赞同：1
> 
> 时间：2012-06-14T21:29:14.547
> 
> 标签：xml, xslt, xpath

我昨天发布了一个关于钥匙的问题，并得到了非常有用的回复。今天大部分时间我一直在研究这个特定文件集中的最后一个细节。在正确使用密钥方面，我一定缺少一些东西。

我有以下定义列表：

```
<dl>
<dlentry>
<dt>BLARG a</dt>
<dd>BLARG Definition b</dd>
</dlentry>
<dlentry>
<dt outputclass="values">Value c<ph> Value Description d</ph></dt>
<dd/>
</dlentry>
<dlentry>
<dt outputclass="values">Value e<ph> Value Description f</ph></dt>
<dd/>
</dlentry>
<dlentry>
<dt outputclass="values">Value g<ph> Value Description h</ph></dt>
<dd/>
</dlentry>
<dlentry>
<dt>BLARG2 i</dt>
<dd>BLARG2 Description j</dd>
</dlentry>
<dlentry>
<dt outputclass="values">Value k
<ph>Value description l</ph></dt>
<dd/>
</dlentry>
<dlentry>
<dt outputclass="values">Value m
    <ph>Value description n</ph></dt>
<dd/>
</dlentry>
<dlentry>
    <dt outputclass="values">Value o
    <ph>Value description p</ph></dt>
<dd/>
</dlentry>
<dlentry><dt>BLARG3 q</dt>
<dd>BLARG3 Definition r</dd></dlentry>
</dl> 
```

这是我的转变（这不太奏效——我今天早些时候比这更接近，但设法让它变得更糟）：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">
<xsl:key name="kFollowing" match="dlentry[child::dt/@outputclass='values']" 
    use="generate-id(preceding-sibling::dlentry[not(child::dt/@outputclass='values')])"/>

<!-- identity template -->
<xsl:template match="@*|node()" name="identity">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="dd[../following-sibling::dlentry[1]/dt[@outputclass='values']]">
    <xsl:variable name="vFollowing" select="key('kFollowing',generate-id(..))"/>
    <dd><xsl:value-of select="."/>
        <table>
            <tgroup cols="2">
                <colspec colnum="1" colname="col1" colwidth="*"/>
                <colspec colnum="2" colname="col2" colwidth="*"/>
                <tbody>
                    <xsl:for-each select="../following-sibling::dlentry[key('kFollowing',$vFollowing)]">
                        <row>
                            <entry colname="1">
                                <xsl:value-of select="./dt/text()"/>
                            </entry>
                            <entry colname="2">
                                <xsl:apply-templates select="./dt/ph/text()"></xsl:apply-templates>
                            </entry>
                        </row>
                    </xsl:for-each>
                </tbody>
            </tgroup>
        </table></dd>
</xsl:template>
</xsl:stylesheet> 
```

我想要的输出：

```
<dl>
<dlentry>
    <dt>BLARG a</dt>
    <dd>BLARG Definition b
    <table>
        <tgroup cols="2">
            <colspec colnum="1" colname="col1" colwidth="*"/>
            <colspec colnum="2" colname="col2" colwidth="*"/>
            <tbody>
                <row>
                    <entry colname="1">Value c</entry>
                    <entry colname="2">Value Description d</entry>
                </row>
                <row>
                    <entry colname="1">Value e</entry>
                    <entry colname="2">Value Description f</entry>
                </row>
                <row>
                    <entry colname="1">Value g</entry>
                    <entry colname="2">Value Description h</entry>
                </row>
            </tbody>
        </tgroup>
    </table></dd>
</dlentry>
<dlentry>
    <dt>BLARG2 i</dt>
    <dd>BLARG2 Definition j
        <table>
            <tgroup cols="2">
                <colspec colnum="1" colname="col1" colwidth="*"/>
                <colspec colnum="2" colname="col2" colwidth="*"/>
                <tbody>
                    <row>
                        <entry colname="1">Value k</entry>
                        <entry colname="2">Value Description l</entry>
                    </row>
                    <row>
                        <entry colname="1">Value m</entry>
                        <entry colname="2">Value Description n</entry>
                    </row>
                    <row>
                        <entry colname="1">Value o</entry>
                        <entry colname="2">Value Description p</entry>
                    </row>
                </tbody>
            </tgroup>
        </table></dd>
</dlentry>
<dlentry><dt>BLARG3 q</dt>
    <dd>BLARG3 Definition r<dd></dlentry>
</dl> 
```

**分组规则**（肖恩的编辑）

节点被分组在没有 dt[outputclass="values"] 子节点的节点上，并且所有后续的兄弟节点都具有 dt[outputclass="values"] 子节点。

节点的变换因此被分组。请注意，如果该组中只有一个成员（即没有 dlentry 具有 dt[outputclass="values"] 的 dt[outputclass="values"]，那么示例输出文档中所示的表输出将被抑制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:03:49.593

这个怎么样 ...

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="xml" indent="yes" />
<xsl:strip-space elements="*"/>

<xsl:key name="dl-group" match="dlentry[child::dt/@outputclass='values']" 
    use="generate-id( preceding-sibling::dlentry[ not( child::dt/@outputclass='values')][1])"/>

<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
</xsl:template>

<xsl:template match="dlentry/dd">
 <xsl:variable name="head" select="generate-id(..)" />      
 <xsl:copy>
  <xsl:value-of select="." />
  <xsl:if test="count( key('dl-group',$head))"> 
   <xsl:text>&#x0A;</xsl:text>
   <table>
    <tgroup cols="2">
     <colspec colnum="1" colname="col1" colwidth="*"/>
     <colspec colnum="2" colname="col2" colwidth="*"/>
     <tbody>
      <xsl:for-each select="key('dl-group',$head)" >
       <row>
        <entry colname="1">
         <xsl:value-of select="normalize-space(./dt/text())" />
        </entry>
        <entry colname="2"><xsl:value-of select="./dt/ph/text()" /></entry>
       </row>
      </xsl:for-each>
     </tbody>
    </tgroup>
   </table>
  </xsl:if> 
 </xsl:copy>
</xsl:template>

<xsl:template match="dlentry[dt[@outputclass='values']]" />

</xsl:stylesheet> 
```

**解释**

这只是键的直接应用。看起来你把事情复杂化了。也许您正在考虑 muenchian 分组。我们将头部 dd 节点的 id 放在一个变量中以节省重新计算。要生成行，我们只需遍历 key() 函数返回的节点集。

# java - Spring MVC 表单处理如何工作？

> ID：11041629
> 
> 赞同：2
> 
> 时间：2012-06-14T21:29:16.230
> 
> 标签：java, forms, spring, model-view-controller

我已经学会了如何使用 Spring MVC 3，但我对它的背景非常感兴趣。对我来说最有趣的事情之一是表单处理。

到目前为止，我知道调度程序处理的每个 http 请求都映射到适当的控制器。控件做一些后台工作，然后选择要加载的 JSPX 页面，并将属性发送给它。JSPX 由容器（Tomcat 等）编译到另一个 servlet。比网页在 http 响应中发回。

在大多数情况下，这对我来说似乎没问题。但是，表单处理是不同的。在`<form:form>` 标签中，您定义了映射到它的对象和属性。但是在上面提到的逻辑中，它实际上永远不会被调用。我的意思是，用户请求带有表单的页面。所以控制器渲染它。比用户发送表单，调度程序调用一些保存方法。但是，如果传入的属性是在未调用的 JSPX 中描述的，那么 Spring 如何知道如何映射传入的属性？

此外，如果您知道 Spring MVC 背景上的任何好的（最好是 Web）资源，请发布链接。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T21:41:48.487

好吧，所有 Spring 参考之王在

[http://static.springsource.org/spring/docs/current/](http://static.springsource.org/spring/docs/current/)

MVC 有很长的部分，以及如何使用 Spring 标签构建页面。

问题是，告诉你阅读它就像告诉你从消防水龙带里喝水一样。随着我越来越擅长使用 Spring，我了解到知道如何在 Spring 中做好一件事意味着知道如何在 Spring 中做好其他事情。

这一切都值得学习，Spring 的真正优势会随着您对它的深入了解而显露出来。

谷歌搜索“example spring form”会找到有用的例子，比如[http://www.mkyong.com/spring-mvc/spring-mvc-form-handling-example/](http://www.mkyong.com/spring-mvc/spring-mvc-form-handling-example/) 但是这种学习方法的问题是 Spring是不断发展的。我发现从网络上的随机示例中学习很复杂，因为有些人在 Spring 3 可用之前发布了他们的示例，或者在注释可用之前等等。

对我来说，随着我继续学习 Spring，没有一个参考。它是主要的参考资料，网上有很多例子，在这里阅读了很多问题，并发布了一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T03:18:59.007

从您描述问题的方式来看，我想您知道 HTTP 的概念。但是，您似乎对区分 HTTP 参数和请求属性及其生命周期的了解不够深入。

当用户请求页面时，会调用 a 中的一个方法`Controller`，并将返回`View`要显示的 以及从 设置的请求属性`Controller`。然后以`HTML`格式呈现视图。在 this`HTML`中，有一个呈现的表单。此表单具有可能指向或可能不指向同一 URL 的操作。当请求被发回时，URL 再次映射到控制器的方法（可能是具有不同方法的同一控制器或完全不同的控制器）。与第二个请求一起，表单中的那些参数将被发送到相应的控制器方法，并且与第一个请求相同的循环再次发生。

# asp.net - MasterPage 数据绑定到 GridView

> ID：11041633
> 
> 赞同：1
> 
> 时间：2012-06-14T21:29:22.487
> 
> 标签：asp.net, vb.net, gridview

我在 ASP.NET 中有一个带有嵌套页面的母版页。相当简单，我想将一些超链接数据绑定到母版页的网格视图。但是，当我尝试设置 DataSource 时，这会引发空引用异常。

1.  我在单独的页面上测试了代码，它按预期工作。
2.  调试的时候可以看到两次Page_Load Sub，不知道是不是这个原因
3.  我正在加载一个嵌套页面，目前这是一个空白页面

**例外**

```
Object reference not set to an instance of an object. 
```

![在此处输入图像描述](../Images/86460d1ca58ac7b96d0211a9ba6260c3.png)

**母版代码背后**

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    If Not Page.IsPostBack Then
        Using model = New AccessDataModelDataContext
            Dim result = From x In model.SiteLinks
                         Where x.IsActive
                         Select x

            SiteLinks.DataSource = result
            SiteLinks.DataBind()
        End Using
    End If

End Sub 
```

**母版ASPX代码**

```
<%@ Master Language="VB" AutoEventWireup="false" CodeBehind="Site.master.vb" Inherits="Access.Manager.Site" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <link href="~/Styles/Styles.css" rel="stylesheet" type="text/css" />
    <title></title>

    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        Site.Master
        <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
        <div class="navigation">
            Site Links
            <asp:GridView ID="SiteLinks" runat="server">
            </asp:GridView>
            </div>

        <div class="content">Site Content</div>

        </asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:54:14.187

我看到的一个明显问题（可能是您的问题）是您的 GridView 存在于您的内容占位符中。通常，这些占位符用于要实现的页面，而不是母版页本身。

将占位符的内容移出：

```
<body>
    <form id="form1" runat="server">
    <div>
        Site.Master
        <div class="navigation">
            Site Links
            <asp:GridView ID="SiteLinks" runat="server">
            </asp:GridView>
        </div>
        <div class="content">Site Content</div>
        <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
        </asp:ContentPlaceHolder>
    </div>
    </form>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-21T06:32:22.013

我们可以像这样从内容页面将数据绑定到母版页 Gridview，

```
GridView grid_data = this.Master.FindControl("show_zone_data") as GridView;

grid_data.DataSource = dt;
grid_data.DataBind(); 
```

# php - PHP 表单 - 发送的电子邮件不支持字符

> ID：11041636
> 
> 赞同：0
> 
> 时间：2012-06-14T21:29:47.557
> 
> 标签：php, forms, iso-8859-1, latin

我有一个联系页面（contact.php），当人们填写联系方式时会发送一个表单（formsend.php）。

contact.php 有：

```
<!DOCTYPE html>
  <html lang="pt-br">
    <head>
      <meta charset="ISO-8859-1"> 
```

Contact.php 页面很好，可以很好地显示我的拉丁葡萄牙语字符（ã、é 等）。

但是当我收到电子邮件时（当它使用 formsend.php 时），我得到的字段是人们用乱七八糟的字符注册的：João 是 Joã£o，等等。

在 formsend.php 我尝试添加：

```
$headers .= "Content-type: text/plain; charset=iso-8859-1\r\n"; 
```

和

```
 header('Content-Type: text/html; charset=iso-8859-1'); 
```

和

```
<!DOCTYPE html>
  <html lang="pt-br">
    <head>
      <meta charset="ISO-8859-1"> 
```

也是。没有任何效果。

似乎是formsend.php 文件在这里失败了。

我可以做些什么来确保我在包含用户信息的电子邮件中收到格式正确的字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:43:21.923

是的，您可以尝试切换 utf-8: 并且不要忘记更改标题信息 header('Content-Type: text/html; charset=utf-8'); 但你也需要将用户输入的文本转换为 utf-8 在这种情况下你不会有问题......我对亚美尼亚语有同样的问题......

# .net - (铁)Python继承构造函数问题

> ID：11041639
> 
> 赞同：1
> 
> 时间：2012-06-14T21:30:10.347
> 
> 标签：.net, python, inheritance, constructor, ironpython

所以我试图创建一个DataGridViewColumn 的子类，它既有一个无参数的构造函数，也有一个接受一个参数的构造函数，它需要DataGridViewCell 类型。这是我的课：

```
class TableColumn(DataGridViewColumn):
    def __init__(self, string):
        super(TableColumn, self)
        self.Text = string
        self.CellTemplate = DataGridViewTextBoxCell()
        self.ReadOnly = True 
```

每当我尝试将字符串作为参数传递时，如下所示：

```
foo = TableColumn('Name') 
```

它总是给我这个：

```
TypeError: expected DataGridViewCell, got str 
```

所以它似乎总是将“字符串”传递给超类的单参数构造函数。我尝试用 super(TableColumn,self) 替换 super(TableColumn, self)。`__`init `__`() 以明确确定我要调用无参数构造函数，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:25:43.800

`__init__`从 .NET 类派生时，您实际上不想实现；[您需要改为`__new__`实施](http://ironpython.net/documentation/dotnet/dotnet.html#calling-base-constructor)。

```
class TableColumn(DataGridViewColumn):
    def __new__(cls, string):
        DataGridViewColumn.__new__(cls)
        self.Text = string
        self.CellTemplate = DataGridViewTextBoxCell()
        self.ReadOnly = True 
```

基本上，.NET 基类的构造函数需要在 Python 子类之前`__init__`（但之后`__new__`）调用，这就是为什么你调用了错误的 DataGridViewColumn 构造函数。

# oracle - 如何在“where value in ...”子句中使用参数？

> ID：11041647
> 
> 赞同：1
> 
> 时间：2012-06-14T21:30:37.533
> 
> 标签：oracle, plsql, oracle11g

这在我只有一个状态代码作为参数时有效。

当 parm_list 中有多个 state_code 时，如何让代码工作？

要求：

(1)我不想在光标定义中硬编码状态码

(2) 我确实想在 where 子句中允许多个州代码

例如：我想为**parm_list = ('NY','NJ','NC')**运行此代码。我在协调 parm_list 中的单引号与 'where state_code in ' 查询中的单引号时遇到了困难。

```
set serveroutput on;

DECLARE
parm_list varchar2(40);

cursor get_state_codes(in_state_codes varchar2)
is
select state_name, state_code from states
where state_code in (in_state_codes);

BEGIN
 parm_list := 'NY';
 for get_record in get_state_codes(parm_list) loop
  dbms_output.put_line(get_record.state_name || get_record.state_code);
 end loop;
END; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T21:48:10.050

从编码的角度来看，使用动态 SQL 是最简单的方法。但是，动态 SQL 的问题在于，您必须对查询的每个不同版本进行硬解析，这不仅可能会占用您的 CPU，而且可能会用大量不可共享的 SQL 语句淹没您的共享池，从而推动out 您想要缓存的语句，导致更多的硬解析和共享池碎片错误。如果您每天运行一次，这可能不是主要问题。如果数百人每天执行数千次，这可能是一个主要问题。

动态 SQL 方法的示例

```
SQL> ed
Wrote file afiedt.buf

  1  declare
  2    l_deptnos  varchar2(100) := '10,20';
  3    l_rc       sys_refcursor;
  4    l_dept_rec dept%rowtype;
  5  begin
  6    open l_rc for 'select * from dept where deptno in (' || l_deptnos || ')';
  7    loop
  8      fetch l_rc into l_dept_rec;
  9      exit when l_rc%notfound;
 10      dbms_output.put_line( l_dept_rec.dname );
 11    end loop;
 12    close l_rc;
 13* end;
SQL> /
ACCOUNTING
RESEARCH

PL/SQL procedure successfully completed. 
```

或者，您可以使用集合。这具有生成单个可共享游标的优势，因此您不必担心硬解析或淹没共享池。但它可能需要更多的代码。处理集合的最简单方法

```
SQL> ed
Wrote file afiedt.buf

  1  declare
  2    l_deptnos  tbl_deptnos := tbl_deptnos(10,20);
  3  begin
  4    for i in (select *
  5                from dept
  6               where deptno in (select column_value
  7                                  from table(l_deptnos)))
  8    loop
  9      dbms_output.put_line( i.dname );
 10    end loop;
 11* end;
SQL> /
ACCOUNTING
RESEARCH

PL/SQL procedure successfully completed. 
```

另一方面，如果您真的必须以逗号分隔的值列表开始，那么您必须先将该字符串解析为一个集合，然后才能使用它。解析分隔字符串有多种方法——我个人最喜欢的是在分层查询中使用正则表达式，但您当然也可以编写程序方法

```
SQL> ed
Wrote file afiedt.buf

  1  declare
  2    l_deptnos     tbl_deptnos;
  3    l_deptno_str  varchar2(100) := '10,20';
  4  begin
  5    select regexp_substr(l_deptno_str, '[^,]+', 1, LEVEL)
  6      bulk collect into l_deptnos
  7      from dual
  8   connect by level <= length(replace (l_deptno_str, ',', NULL));
  9    for i in (select *
 10                from dept
 11               where deptno in (select column_value
 12                                  from table(l_deptnos)))
 13    loop
 14      dbms_output.put_line( i.dname );
 15    end loop;
 16* end;
 17  /
ACCOUNTING
RESEARCH

PL/SQL procedure successfully completed. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-15T04:28:38.830

一种选择是使用 INSTR 而不是 IN：

```
SELECT uo.object_name
      ,uo.object_type
FROM   user_objects uo
WHERE  instr(',TABLE,VIEW,', ',' || uo.object_type || ',') > 0; 
```

尽管这看起来很难看，但它运行良好，只要不使用正在测试的列上的索引（因为这会阻止使用任何索引），性能不会受到太大影响。例如，如果正在测试的列是主键，那么绝对不应该使用它。

另一种选择是：

```
SELECT uo.object_name
      ,uo.object_type
FROM   user_objects uo
WHERE  uo.object_type IN
       (SELECT regexp_substr('TABLE,VIEW', '[^,]+', 1, LEVEL)
        FROM   dual
        CONNECT BY regexp_substr('TABLE,VIEW', '[^,]+', 1, LEVEL) IS NOT NULL); 
```

在这种情况下，值列表应该连接成一个 varchar 变量，用逗号（或任何你喜欢的东西）分隔。

# c# - C# Linq groupby 方法语法

> ID：11041648
> 
> 赞同：2
> 
> 时间：2012-06-14T21:30:37.823
> 
> 标签：c#, linq

我有以下代码

```
 var myList = new List<int>() {10, 10, 10, 9, 15};

 var groupedMyList = myList.GroupBy(i => i).ToList();

 var hasFourOfSameValue = groupedMyList.Select(g => g.Count() == 4).Any(); 
```

问题是 hasFour 回归为真。我希望它是错误的，因为列表中最多有三个具有相同值的整数？（我怀疑我在 groupby 调用中出错了，但我不知道如何更改它）。

**问题序言：我想使用 LINQ 方法语法而不是 LINQ 查询语法。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T21:33:22.067

你要：

```
var hasFourOfSameValue = groupedMyList.Any(grp => grp.Count() == 4); 
```

`Any()`如果输入序列包含任何元素，则返回 true。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-14T21:33:55.297

表达式`groupedMyList.Select(g => g.Count() == 4)`返回`{ false, false, false }`。在非空序列上调用 any 是正确的。你要：

```
var hasFourOfSameValue = groupedMyList.Any(g => g.Count() == 4); 
```

# javascript - 从 URL 存储产品详细信息

> ID：11041651
> 
> 赞同：1
> 
> 时间：2012-06-14T21:30:46.433
> 
> 标签：javascript, url, web-scraping

有没有一种方法，甚至可以通过使用 URL 来获取产品详细信息。假设我从沃尔玛或 bestbuy 等商店粘贴产品的 URL，是否可以编写一些东西来检索产品信息（价格、名称、信息等）。这是否存在？或者这是否必须是我可以为每个特定商店编写的特定于站点的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:35:50.617

我看到的一个解决方案是使用例如[Tika](http://tika.apache.org/)解析 URL 重定向到的页面的 HTML 代码，但我不确定有问题的电子商务网站是否会非常喜欢这样`:)`也许你可以问他们是否已经实现了API 来访问他们的产品数据？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:35:14.967

是的，这是可能的，但由于[same-origin-policy](/questions/tagged/same-origin-policy "显示标记为“同源策略”的问题")不能使用 JavaScript 。您必须将该 URL 发送到服务器，在服务器端读取该外部页面并将结果返回给服务器。

在服务器端（无论您使用哪种语言）下载网页，解析它（如果可以，使用[xml](/questions/tagged/xml "显示标记为“xml”的问题") / [xpath ）并提取相关信息。](/questions/tagged/xpath "显示标记为“xpath”的问题")

如前所述，请注意，一些网站禁止此类访问（称为网络抓取），其他网站可能会积极尝试阻止这种情况，例如通过发现*假*客户端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T21:36:51.627

您所说的是网站抓取，是的，这是可能的，并且有很多工具可以帮助您。不过，有些网站对您这样做并不满意。

您可以在 C# 中使用 HttpWebRequest 类从 url 请求数据，然后使用 XmlReader 或[http://html-agility-pack.net/之类的东西解析它](http://html-agility-pack.net/)

# asp.net - 从 Url 下载未知文件

> ID：11041652
> 
> 赞同：0
> 
> 时间：2012-06-14T21:30:51.193
> 
> 标签：asp.net, visual-studio-2010, c#-4.0

在我的应用程序中，我需要从 Url 下载 .fec 文件并将其保存到另一个位置。我为此使用 C# Web 客户端。但是当我尝试下载 .fec 文件时（我们无法在 IE 或 FF 中查看此文件）它正在下载 404 页面未找到文件并将其保存到我的文件夹。我不知道为什么当文件存在于指定位置时它会下载 404 页面未找到文件。这是因为 .Fec 文件需要单独的程序才能查看（您需要 Fec Viewer 才能查看 .fec 文件）。如果我下载 .txt 文件或 .pdf 文件，我的程序运行正常。我可以下载文件并将其保存到我的文件夹中。

任何帮助表示赞赏。这是我的代码

```
 public void downloadFile(string url, string saveas)
        {
            try
            {
                System.Net.WebClient webclient = new System.Net.WebClient();
                webclient.DownloadFile(url, saveas);
            }
            catch (Exception e)
            {
                this.ErrorLog(e.Message.ToString());
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:34:50.113

如果无法直接显示文件，普通浏览器是否至少可以让您下载文件？如果不是，那么我的猜测是您的 Web 服务器配置不正确。如果服务器没有与该文件扩展名关联的 MIME 类型，它可能会阻止文件被下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:34:59.037

您需要`extension/mime-type`在 IIS 中进行设置或添加通配符以提供未知文件类型。默认情况下，IIS 不会提供“未知文件”。

**IIS6** - [http://support.microsoft.com/kb/326965](http://support.microsoft.com/kb/326965)
**IIS7** - [http://blogs.iis.net/bills/archive/2008/03/25/how-to-add-mime-types-with-iis7 -web-config.aspx](http://blogs.iis.net/bills/archive/2008/03/25/how-to-add-mime-types-with-iis7-web-config.aspx)

# delphi - Delphi WideStringType OutParameter 中的 Firebird 异常

> ID：11041655
> 
> 赞同：1
> 
> 时间：2012-06-14T21:31:09.587
> 
> 标签：delphi, parameters, firebird

我有示例 firebird 存储过程

```
PROCEDURE PROCEDURE01
RETURNS (
 PARAMETER01 VARCHAR(50))
AS 
BEGIN
  PARAMETER01 = 'Hello';
END 
```

在德尔福方面

```
LCommand := SQLConnection1.DBXConnection.CreateCommand;
LCommand.CommandType := TDBXCommandTypes.DbxStoredProcedure;
LCommand.Text := 'PROCEDURE01';
LIdOut := LCommand.CreateParameter;
LIdOut.ParameterDirection := TDBXParameterDirections.OutParameter;
LIdOut.DataType := TDBXDataTypes.WideStringType;
LIdOut.Name := 'PARAMETER01';
LCommand.Parameters.AddParameter(LIdOut);
LCommand.Prepare;
LReader := LCommand.ExecuteQuery; 
```

并收到异常

“算术异常、数值溢出或字符串截断”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:53:57.073

这似乎是[TDBXCommand](http://docwiki.embarcadero.com/Libraries/en/Data.DBXCommon.TDBXCommand)（或者可能是 Dbexpress firebird 驱动程序）的限制，因为使用其他类型的输出参数都可以正常工作。作为解决方法，您可以使用[`TSQLStoredProc`](http://docwiki.embarcadero.com/Libraries/en/Data.SqlExpr.TSQLStoredProc)该类。

试试这个样本。

```
var
 LSQLStoredProc :  TSQLStoredProc;
begin
  LSQLStoredProc:=TSQLStoredProc.Create(nil);
  try
    LSQLStoredProc.SQLConnection:=SQLConnection1;
    LSQLStoredProc.StoredProcName:='PROCEDURE01';
    LSQLStoredProc.ExecProc;
    ShowMessage(LSQLStoredProc.ParamByName('PARAMETER01').AsString);
  finally
    LSQLStoredProc.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:25:45.873

以将数据库设置为 UTF-8 为例。

```
CREATE DATABASE localhost:mybase
  USER SYSDBA
  PASSWORD masterkey
  PAGE_SIZE 8192
  DEFAULT CHARACTER SET UTF8;
  SET NAMES ISO8859_1;

CREATE TABLE scales (
  ID ...,      
  byteken VARCHAR(50) COLLATE DE_DE, 
```

查看我对[算术异常、数字溢出或字符串截断的回答](https://stackoverflow.com/questions/10122073/dbexpress-no-key-specified)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T03:33:41.033

首先在存储过程中将“SUSPEND”放在“END”之前

# sql - 在 SQL JOIN 中删除一侧而不是另一侧的 dups

> ID：11041656
> 
> 赞同：0
> 
> 时间：2012-06-14T21:31:12.610
> 
> 标签：sql, sql-server-2005, join, duplicate-removal

**代码更新：** 在#left 表中添加了 [score] 列。连接必须从#left 表中提取学生姓名*和分数。*任何一个分数都可以，但不应拉取重复的 student_id。我在想光标可以做到吗？

* * *

我正在运行这份报告。问题类似于我创建的脚本。总而言之，我有两张表，我们称之为#left 和#right。#right 表是包含金额的关键表。但是#left 表包含我也必须检索的代理名称。

```
create table #left (
id int not null primary key identity,
student_id int, name varchar(20),score int)

insert into #left values( 1, 'James',10)
insert into #left values( 2, 'Parker',20)
insert into #left values( 3, 'Smith',30)
insert into #left values( 4, 'Rog',40)
insert into #left values( 1, 'James',50)
insert into #left values( 2, 'Parker',60)

create table #right (
id int not null primary key identity,
student_id int,
amount decimal(5,2)
)

insert into #right values (1,5.25)
insert into #right values (3,7.25)
insert into #right values (4,3.25)
insert into #right values (1,5.25) 
```

这里的问题是我想加入 student_id 上的两个表，但是你可以看到#left 表包含 James 和 Parker 2 次具有相同的 id。让我们假设这是数据库错误。

#right 表中可能存在类似的问题。但这不是一个错误。它只是意味着#left 学生与两次付款相关联（即使两次付款相同）。

**我想从 #left 表中删除 dups 并将 dups 保留在 #right 表中。**

我想出了这个查询，它有效

```
/* query 1 */
select student_id, amount from #right R
where exists
(
select student_id from #left L
where R.student_id = L.student_id
); 
```

**但这里的问题是我还需要**从另一个表中提取学生姓名。有没有办法做到这一点。它可以是任何语法，但需要高效的查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:35:29.523

这应该有效：

**原始问题的解决方案**

#left 表看起来像这样

```
create table #left (
id int not null primary key identity,
student_id int, name varchar(20))

insert into #left values( 1, 'James')
insert into #left values( 2, 'Parker')
insert into #left values( 3, 'Smith')
insert into #left values( 4, 'Rog')
insert into #left values( 1, 'James')
insert into #left values( 2, 'Parker') 
```

**查询：1**

```
SELECT A.student_id, A.amount, B.name
FROM #right A
LEFT JOIN (SELECT DISTINCT student_id, name FROM #left) B
ON A.student_id = B.student_id 
```

**更新到修改后的标准**好吧，如果*任何分数*都很好，那么你可以这样做：

**查询：2**

```
SELECT A.student_id, A.amount, B.name, B.score
FROM #right A
LEFT JOIN ( SELECT student_id, name, MIN(score) score
            FROM #left
            group by student_id, name) B
ON A.student_id = B.student_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:56:47.977

如果可以存在没有付款的学生（#right 表中没有行），您应该从我认为加入的#left 表开始。为了避免重复的学生行，您可以使用已建议的 distinct 或 group by 等聚合函数。

我的想法的一些未经测试的代码：

```
select name, id, amount from
  (
    (select max(left.name) as name, left.student_id as id
      from #left left
      group by left.student_id)
        left join #right right on left.student_id = right.student_id
  ) 
```

# sql-server - SQLException 获取更多信息

> ID：11041660
> 
> 赞同：0
> 
> 时间：2012-06-14T21:31:37.323
> 
> 标签：sql-server, vb.net, ado.net, sqlexception

目前正在将 SQLException 错误消息转换为对最终用户更有用的消息。我最大的问题是找到我正在寻找的信息。

例如，错误代码 8114 是

“将数据类型 [Type1] 转换为 [Type2] 时出错”

错误代码 8152 是

“字符串或二进制数据将被截断”

在带有 SQLServer 的 VB.NET 中使用 ADO.NET，是否有一种简单的方法来确定哪些列受到这些错误的影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:49:25.637

问题是来自 SQL Server 的错误没有提供该信息，因此识别导致问题的字段的唯一方法是拆分 SQL 语句以单独为单独的字段运行它。这听起来像是开发人员应该测试的大量工作，以确保它不会碰巧开始。有些错误不是开发人员的错，但是您在此处列出的两个错误是开发人员应该避免发生的事情，并且应该是该过程的单元测试的一部分。

我能想到的一些错误不是开发人员错误，而是与 SQL Server 的连接错误或数据库的损坏错误有关。

我实际上喜欢这样一个事实，即我的用户不能总是找出导致问题的原因，因为它往往会迫使他们告诉我我的程序有问题。如果他们知道如何解决我应该修复的错误，他们往往不会告诉我有问题，有时我发现有问题已经好几年了。

# c++ - 如何知道进程是否真正完成了 dlclose()ed 库？

> ID：11041669
> 
> 赞同：2
> 
> 时间：2012-06-14T21:32:02.317
> 
> 标签：c++, linux, plugins, g++, dlopen

我在 Linux（Ubuntu 12.04，gcc 4.6.3）上，试图弯曲 dlopen/close 以制作一个基于插件的应用程序，可以在必要时重新加载其插件（例如，如果它们被重新编译） .

基本原理很简单：dlopen插件；使用它，跟踪所有正在使用的符号。当需要重新加载时，清理所有符号并关闭插件。

我拼凑了一个简单的演示应用程序“test.cpp”：

```
#include <dlfcn.h>
#include <iostream>
using namespace std;
int main(int argc, char** argv)
{
    if (argc > 1)
    {
        void* h = dlopen(argv[1], RTLD_NOW|RTLD_LOCAL);
        if (!h)
        {
            cerr << "ERROR: " << dlerror() << endl;
            return 1;
        }
        cin.get();
        if (dlclose(h))
        {
            cerr << "ERROR: " << dlerror() << endl;
            return 2;
        }
        cin.get();
    }
    return 0;
} 
```

编译：

```
g++ test.cpp -o test -ldl 
```

要制作一个可以作为参数传递给上述代码的简单库，请使用：

```
touch libtest.cpp && g++ -rdynamic -shared libtest.cpp -o libtest.so 
```

然后运行：

```
./test ./libtest.so 
```

这就是问题所在；如果在按下 [Enter] 一次后（即在加载和卸载库之后），您运行“pmap”以检查在“test”中加载了哪些库，它会告诉您 libtest.so 仍然存在！现在，尽管 dlclose() 有一个有效的返回，并且没有合理的方式使引用计数在此之前超过 1（这可以通过尝试第二个 dlclose() 来验证 - 它会给出一个错误返回，说明它已经关闭）。

因此，要么 Linux*永远不会*卸载 dlopen()ed 库（与文档相矛盾），要么“pmap”是错误的。如果是后者，是否有更可靠的方法来确定库是否仍在加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:22:42.523

对于以下程序，我与您的观察结果不同：

```
// file soq.c
#include <dlfcn.h>
#include <iostream>
#include <cstdio>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
using namespace std;
int main(int argc, char** argv)
{
  char cmd[60];
  snprintf(cmd, sizeof(cmd), "pmap %d", getpid());
    if (argc > 1)
    {
        void* h = dlopen(argv[1], RTLD_NOW|RTLD_LOCAL);
        if (!h)
        {
            cerr << "ERROR: " << dlerror() << endl;
            return 1;
        }
    cerr << "after dlopen " << argv[1] << endl;
    system(cmd);
        cin.get();
        if (dlclose(h))
        {
            cerr << "ERROR: " << dlerror() << endl;
            return 2;
        }
        cin.get();
    cerr << "after close " << argv[1] << endl;
    system(cmd);
    }
    return 0;
} 
```

正如预期的那样，我得到了：

```
% ./soq ./libempty.so
./soq ./libempty.so
after dlopen ./libempty.so
5276:   ./soq ./libempty.so
0000000000400000      8K r-x--  /home/basile/tmp/soq
0000000000601000      4K rw---  /home/basile/tmp/soq
0000000001b4d000    132K rw---    [ anon ]
00007f1dbfd01000      4K r-x--  /home/basile/tmp/libempty.so
00007f1dbfd02000   2044K -----  /home/basile/tmp/libempty.so
00007f1dbff01000      4K rw---  /home/basile/tmp/libempty.so
00007f1dbff02000   1524K r-x--  /lib/x86_64-linux-gnu/libc-2.13.so
00007f1dc007f000   2048K -----  /lib/x86_64-linux-gnu/libc-2.13.so
00007f1dc027f000     16K r----  /lib/x86_64-linux-gnu/libc-2.13.so
00007f1dc0283000      4K rw---  /lib/x86_64-linux-gnu/libc-2.13.so
00007f1dc0284000     20K rw---    [ anon ]
00007f1dc0289000     84K r-x--  /lib/x86_64-linux-gnu/libgcc_s.so.1
00007f1dc029e000   2048K -----  /lib/x86_64-linux-gnu/libgcc_s.so.1
00007f1dc049e000      4K rw---  /lib/x86_64-linux-gnu/libgcc_s.so.1
00007f1dc049f000    516K r-x--  /lib/x86_64-linux-gnu/libm-2.13.so
00007f1dc0520000   2044K -----  /lib/x86_64-linux-gnu/libm-2.13.so
00007f1dc071f000      4K r----  /lib/x86_64-linux-gnu/libm-2.13.so
00007f1dc0720000      4K rw---  /lib/x86_64-linux-gnu/libm-2.13.so
00007f1dc0721000    928K r-x--  /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.17
00007f1dc0809000   2048K -----  /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.17
00007f1dc0a09000     32K r----  /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.17
00007f1dc0a11000      8K rw---  /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.17
00007f1dc0a13000     84K rw---    [ anon ]
00007f1dc0a28000      8K r-x--  /lib/x86_64-linux-gnu/libdl-2.13.so
00007f1dc0a2a000   2048K -----  /lib/x86_64-linux-gnu/libdl-2.13.so
00007f1dc0c2a000      4K r----  /lib/x86_64-linux-gnu/libdl-2.13.so
00007f1dc0c2b000      4K rw---  /lib/x86_64-linux-gnu/libdl-2.13.so
00007f1dc0c2c000    128K r-x--  /lib/x86_64-linux-gnu/ld-2.13.so
00007f1dc0e1c000     20K rw---    [ anon ]
00007f1dc0e49000      8K rw---    [ anon ]
00007f1dc0e4b000      4K r----  /lib/x86_64-linux-gnu/ld-2.13.so
00007f1dc0e4c000      4K rw---  /lib/x86_64-linux-gnu/ld-2.13.so
00007f1dc0e4d000      4K rw---    [ anon ]
00007fff076c3000    132K rw---    [ stack ]
00007fff077b4000      4K r-x--    [ anon ]
ffffffffff600000      4K r-x--    [ anon ]
 total            15984K

after close ./libempty.so
5276:   ./soq ./libempty.so
0000000000400000      8K r-x--  /home/basile/tmp/soq
0000000000601000      4K rw---  /home/basile/tmp/soq
0000000001b4d000    132K rw---    [ anon ]
00007f1dbff02000   1524K r-x--  /lib/x86_64-linux-gnu/libc-2.13.so
00007f1dc007f000   2048K -----  /lib/x86_64-linux-gnu/libc-2.13.so
00007f1dc027f000     16K r----  /lib/x86_64-linux-gnu/libc-2.13.so
00007f1dc0283000      4K rw---  /lib/x86_64-linux-gnu/libc-2.13.so
00007f1dc0284000     20K rw---    [ anon ]
00007f1dc0289000     84K r-x--  /lib/x86_64-linux-gnu/libgcc_s.so.1
00007f1dc029e000   2048K -----  /lib/x86_64-linux-gnu/libgcc_s.so.1
00007f1dc049e000      4K rw---  /lib/x86_64-linux-gnu/libgcc_s.so.1
00007f1dc049f000    516K r-x--  /lib/x86_64-linux-gnu/libm-2.13.so
00007f1dc0520000   2044K -----  /lib/x86_64-linux-gnu/libm-2.13.so
00007f1dc071f000      4K r----  /lib/x86_64-linux-gnu/libm-2.13.so
00007f1dc0720000      4K rw---  /lib/x86_64-linux-gnu/libm-2.13.so
00007f1dc0721000    928K r-x--  /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.17
00007f1dc0809000   2048K -----  /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.17
00007f1dc0a09000     32K r----  /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.17
00007f1dc0a11000      8K rw---  /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.17
00007f1dc0a13000     84K rw---    [ anon ]
00007f1dc0a28000      8K r-x--  /lib/x86_64-linux-gnu/libdl-2.13.so
00007f1dc0a2a000   2048K -----  /lib/x86_64-linux-gnu/libdl-2.13.so
00007f1dc0c2a000      4K r----  /lib/x86_64-linux-gnu/libdl-2.13.so
00007f1dc0c2b000      4K rw---  /lib/x86_64-linux-gnu/libdl-2.13.so
00007f1dc0c2c000    128K r-x--  /lib/x86_64-linux-gnu/ld-2.13.so
00007f1dc0e1c000     20K rw---    [ anon ]
00007f1dc0e48000     12K rw---    [ anon ]
00007f1dc0e4b000      4K r----  /lib/x86_64-linux-gnu/ld-2.13.so
00007f1dc0e4c000      4K rw---  /lib/x86_64-linux-gnu/ld-2.13.so
00007f1dc0e4d000      4K rw---    [ anon ]
00007fff076c3000    132K rw---    [ stack ]
00007fff077b4000      4K r-x--    [ anon ]
ffffffffff600000      4K r-x--    [ anon ]
 total            13936K 
```

So you did run your `pmap` wrongly.

By the way, you could avoid any `dlclose`-ing in practice, as my [manydl.c](http://starynkevitch.net/Basile/manydl.c) example demonstrates. In practice, not bothering `dlclose`-ing means only a tiny address space leak, not a big deal in practice. (You can `dlopen` nearly a million different shared objects without much hurt).

And to know when a shared object is unloaded, use the "destructor" functions of your `dlclose`-d plugin (e.g. destructor of static data in C++, or [attribute((destructor))](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html) in e.g. *C* code), because they are called from inside the unloading `dlclose`.

# windows - 如何在不重新启动的情况下从另一个应用程序中关闭 Win 应用程序？

> ID：11041671
> 
> 赞同：-1
> 
> 时间：2012-06-14T21:32:10.053
> 
> 标签：windows, visual-studio-2010, winapi, visual-c++, win32-process

嗨，我想制作一个小型测试窗口应用程序，它可以强制 IE 在单击按钮时保存其数据并关闭，并在单击另一个按钮时使用相同的选项卡重新启动？我对 Win32 编程相当陌生，有人可以在这里帮助我吗？？任何线索将被appriciated？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:43:40.687

尝试使用 EnumChildWindows 找到每个浏览器类之一，然后保存每个浏览器的文本（当前链接），并向程序发送 WM_CLOSE 消息，如果您调试 IE，您可能会看到对函数的调用以打开一个新窗口，当您找到它时，您可以再次调用它，并使用新的浏览器类放置您从打开的窗口中获得的文本

# java - 转义 Java RegExp 元字符

> ID：11041674
> 
> 赞同：2
> 
> 时间：2012-06-14T21:32:24.887
> 
> 标签：java, regex, string, escaping

我试图在 Java 中转义 RegExp 元字符。以下是我想要的：

```
INPUT STRING: "This is $ test"
OUTPUT STRING: "This is \$ test" 
```

这是我目前正在做的，但它不起作用：

```
String inputStr= "This is $ test";
inputStr = inputStr.replaceAll("$","\\$"); 
```

但我得到错误的输出：

```
"This is $ test$" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:39:54.747

你需要：

```
inputStr.replaceAll("\\$", "\\\\\\$"); 
```

要替换的字符串需要 2 个反斜杠，因为*$*在正则表达式中具有特殊含义。所以 $ 必须被转义，以获得: `\$`，并且反斜杠**本身**必须在 java String: 中被转义`"\\$"`。

替换字符串需要 6 个反斜杠，因为*\*和*$*在替换字符串中都有特殊含义：

*   \ 可用于转义替换字符串中的字符。
*   $ 可用于在替换字符串中进行反向引用。

因此，如果您的预期替换字符串是“\$”，您需要转义这两个字符中的每一个以获得：`\\\$`，然后您需要使用的每个反斜杠 - 其中 3 个，1 个文字和 2 个用于转义 -**也**必须在java字符串：`"\\\\\\$"`.

请参阅：[Matcher.replaceAll](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:50:25.100

如您所说， $ 是正则表达式的保留字符。然后，你需要逃避它。您可以使用反斜杠字符来执行此操作：

```
inputStr.replaceAll("\\$", ...); 
```

在替换中，$ 和 \ 字符也有特殊含义：

> 请注意，替换字符串中的反斜杠 () 和美元符号 ($) 可能会导致结果与将其视为文字替换字符串时的结果不同；见 Matcher.replaceAll

然后，替换将是反斜杠字符和美元符号，它们都被“\”字符转义（在构建字符串时需要加倍）：

```
inputStr.replaceAll("\\$", "\\\\\\$"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T21:39:57.307

你必须放 6 个反斜杠，这样你才能逃脱反斜杠并逃脱 metachar：

`inputStr.replaceAll("\\$","\\\\\\$");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T21:35:12.673

replaceAll 的第一个参数实际上是一个正则表达式，而 $ 实际上意味着“匹配字符串的结尾”。您可以只使用替换，它不使用正则表达式，只是一个普通的字符串替换，在这种情况下实现您想要的。如果您想使用正则表达式，只需将第一个参数中的 $ 转义即可。

# networking - 设置无线热点登录页面

> ID：11041682
> 
> 赞同：2
> 
> 时间：2012-06-14T21:33:17.290
> 
> 标签：networking, windows-7, wireless

我想在运行 Windows 7 的笔记本电脑上设置无线接入点（热点）。有一些应用程序可用于设置 WiFi 热点，例如 Connectify、虚拟接入点（虚拟 AP）、MyPublicWiFi 等。
我想保护对这个热点的访问带有登录页面，所以当用户点击 WiFi SSID 名称时，它应该被重定向到与该 SSID 关联的热点登录页面，带有登录表单。用户应提供有效的用户名和密码才能访问网络。设置登录页面最简单的方法是什么？此外，用户输入数据应存储在日志文件中以验证凭据和一些统计信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T03:14:35.013

您可以使用来自 antamedia 的热点软件创建器

你可以在这里下载免费版本

[http://www.antamedia.com/download/hotspot-installer-v3.exe](http://www.antamedia.com/download/hotspot-installer-v3.exe)

下面是帮助您如何设置热点站点的手册

[http://www.antamedia.com/download/hotspot-manual.pdf](http://www.antamedia.com/download/hotspot-manual.pdf)

请享用！

# python - Python 多进程分析

> ID：11041683
> 
> 赞同：51
> 
> 时间：2012-06-14T21:33:19.600
> 
> 标签：python, multiprocessing, cprofile

我正在努力弄清楚如何分析一个简单的多进程 python 脚本

```
import multiprocessing
import cProfile
import time
def worker(num):
    time.sleep(3)
    print 'Worker:', num

if __name__ == '__main__':
    for i in range(5):
        p = multiprocessing.Process(target=worker, args=(i,))
        cProfile.run('p.start()', 'prof%d.prof' %i) 
```

我正在启动 5 个进程，因此 cProfile 会生成 5 个不同的文件。在每个我想看到我的方法“worker”运行大约需要 3 秒，但我只看到“start”方法内部发生了什么。

如果有人可以向我解释这一点，我将不胜感激。

### 更新：基于公认答案的工作示例：

```
import multiprocessing
import cProfile
import time
def test(num):
    time.sleep(3)
    print 'Worker:', num

def worker(num):
    cProfile.runctx('test(num)', globals(), locals(), 'prof%d.prof' %num)

if __name__ == '__main__':
    for i in range(5):
        p = multiprocessing.Process(target=worker, args=(i,))
        p.start() 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-14T21:36:31.207

您正在分析流程启动，这就是为什么您只看到`p.start()`您所说的发生了什么 - 并`p.start()`在子流程启动后返回。您需要在方法内部进行概要`worker`分析，该方法将在子流程中被调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-11-12T20:36:02.587

不得不更改源代码以进行分析还不够酷。让我们看看你的代码应该是什么样的：

```
import multiprocessing
import time
def worker(num):
    time.sleep(3)
    print('Worker:', num)

if __name__ == '__main__':
    processes = []
    for i in range(5):
        p = multiprocessing.Process(target=worker, args=(i,))
        p.start()
        processes.append(p)
    for p in processes:
        p.join() 
```

我`join`在这里添加了，所以您的主要流程将在退出之前等待您的工人。

而不是 cProfile，请尝试`viztracer`.

安装它`pip install viztracer`。然后使用多进程功能

`viztracer --log_multiprocess your_script.py`

它将生成一个 html 文件，显示时间线上的每个过程。（使用 AWSD 缩放/导航）

[![脚本的结果](../Images/5529d13ffdae3fa7389ae9d12734e697.png)](https://i.stack.imgur.com/OR9kc.png)

当然，这包括一些您不感兴趣的信息（例如实际多处理库的结构）。如果您已经对此感到满意，那么您就可以开始了。但是，如果您只想为您的功能提供更清晰的图表`worker()`。尝试`log_sparse`功能。

首先，装饰你要登录的功能`@log_sparse`

```
from viztracer import log_sparse

@log_sparse
def worker(num):
    time.sleep(3)
    print('Worker:', num) 
```

然后运行`viztracer --log_multiprocess --log_sparse your_script.py`

[![稀疏日志](../Images/30f831dc807c677ad1e0f7da7a718531.png)](https://i.stack.imgur.com/Xx4av.png)

时间轴上只会显示您的工作函数，耗时 3 秒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-26T14:01:53.300

如果您有一个复杂的流程结构，并且您想要分析代码的特定部分，或者可能是流程的特定工作核心，您可以指向分析器以在那里收集统计信息（请参阅启用和禁用方法[https://docs. python.org/3.6/library/profile.html#module-cProfile](https://docs.python.org/3.6/library/profile.html#module-cProfile)）。这是你可以做的：

```
import cProfile

def my_particular_worker_code()
    pr = cProfile.Profile()
    pr.enable()

    # Process stuff to be profiled

    pr.disable()
    pr.print_stats(sort='tottime')  # sort as you wish 
```

您也可以将报告拖放到文件中。

# javascript - 画布绘图错误（HTML5 和 JavaScript）

> ID：11041684
> 
> 赞同：0
> 
> 时间：2012-06-14T21:33:21.943
> 
> 标签：javascript, html, canvas

我通常可以研究我的问题并从别人的错误中得到答案，但这次我找到答案的时间相当不寻常。这个概念是您可以为网格`32x32`上的“像素”着色。`16x16`我的完整代码如下：

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="jscolor.js"></script>
    <title>Tiles</title>
</head>
<body>
    <canvas id="canvas" height="512" width="512" onclick="draw(window.event)">
        Oops, you don't have Canvases
    </canvas>
    <input type="text" value="000000" class="color"></input>
    <script type="text/javascript">
        var draw_a = document.getElementById("canvas").getContext("2d");
        function draw(e) {
            draw_a.fillStyle = "#" + document.getElementById("color").value;
            draw_a.fillRect(
                math.floor( e.clientX / 16 ),
                math.floor( e.clientX / 16 ),
                32,
                32
            );
        }
        draw_a.fillStyle = "#000000";
        draw_a.fillRect( 0 , 0 , 512 , 512 );
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:38:16.913

您正在对单击坐标进行除法和四舍五入，但没有将值再次乘以映射到画布坐标 - 点之间也应该有 32 个像素，而不是 16 个。

也没有这样的功能`math.floor`，它应该是`Math.floor`：

```
var x = 32 * Math.floor(e.clientX / 32);
var y = 32 * Math.floor(e.clientY / 32);
draw_a.fillRect(x, y, 32, 32); 
```

最后，您的颜色输入应该有`id`of `color`，而不是`class`

[在http://jsfiddle.net/alnitak/VJNdR/](http://jsfiddle.net/alnitak/VJNdR/)工作（至少在 Chrome 中）演示

# javascript - Rally sdk 2 实用程序创建链接到详细信息页面/编辑弹出窗口

> ID：11041686
> 
> 赞同：0
> 
> 时间：2012-06-14T21:33:23.390
> 
> 标签：javascript, rally

SDK 2 中是否有与 SDK 1 导航实用程序等效的功能？我想在网格中创建一个指向测试用例详细信息页面的链接。我可以用渲染器手工制作它，但是有实用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:28:11.287

现在没有。我们希望在 SDK 2.0 发布 GA 时创建一个标准的方法。

# wordpress - JavaScript 中的 wp_create_user

> ID：11041692
> 
> 赞同：0
> 
> 时间：2012-06-14T21:33:55.840
> 
> 标签：wordpress

我想制作一个订阅者表格，我将此代码与此 javascript 一起使用

```
<?php
require_once(ABSPATH . WPINC . '/registration.php');
global $wpdb, $user_ID;

        if($_POST){
            //We shall SQL escape all inputs
            $username = $wpdb->escape($_POST['username']);
            if(empty($username)) { 
                echo "*Please enter username.";
                exit();
            }
            $email = $wpdb->escape($_POST['email']);
            if(!preg_match("/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/", $email)) { 
                echo "*Please enter a valid email.";
                exit();
            }       

                $random_password = wp_generate_password( 12, false );
                $status = wp_create_user( $username, $random_password, $email );
                if ( is_wp_error($status) ) 
                    echo "Username or email already exists. Please try another one.";
                else {
                    $from = get_option('admin_email');
                    $headers = 'From: '.$from . "\r\n";
                    $subject = "Registration successful";
                    $msg = "Registration successful.\nYour login details\nUsername: $username\nPassword: $random_password";
                    wp_mail( $email, $subject, $msg, $headers );

                    echo "Please check your email for login details.";
                }

            exit();

        } else { 

            ?>

            <?php                   
            if(get_option('users_can_register')) { //Check whether user registration is enabled by the administrator
            ?>

            <div style="width:250px;height:auto;margin-top:5px;margin-bottom:15px;background-color:#043D90; padding-top:5px;padding-bottom:5px;
            border-radius:10px;-moz-border-radius:10px;-webkit-border-radius:10px; color:#fff;float:left;">          
            <h3 style="margin-left:20px;margin-bottom:15px;margin-top:10px;font-weight:bold;">Sign up now for the Newsletter</h3>
            <table>
            <form id="wp_signup_form" action="" method="post" >
            <tr>
            <td><label style="margin-left:10px;">Name:</label></td>
            <td><input style="width:180px; height:25px; margin-bottom:5px; background-color:#efefef;border:none;border-radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px;" type="text" name="username" class="text" value="" /><br />
            </td></tr>
            <tr>
            <td><label style="margin-left:10px;">Email:</label></td>
            <td><input style="width:180px; height:25px; margin-bottom:5px; background-color:#efefef;border:none;border-radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px;"type="text" name="email" class="text" value="" /> <br />
            </td></tr></table>
            <div id="result" style="margin-left:10px; color:#111111;font-weight:bold;"></div> <!-- To hold validation results -->
            <div><input style="margin-right:20px;margin-top:10px;padding:5px; float:right;" type="submit" id="submitbtn" name="submit" value="Sign Up" /></div>
            </form>
            </div>
            <?php 
                }
            else echo "Registration is currently disabled. Please try again later.";
            ?>
            <?php

        } //end of if($_post)
            ?> 
```

问题是当您没有输入姓名或电子邮件时，注册按钮上方会显示一个文本，但问题是它也会获得标题，并且可能是页面上的其余页面！我发现问题出在函数（msg）中的javascript中，但我无法解决。谁能帮助我。

```
<script type="text/javascript">                         
            $("#submitbtn").click(function() {

            $('#result').html('<img src="<?php bloginfo('template_url'); ?>/images/ajax-loader.gif" class="loader" />').fadeIn();
            var input_data = $('#wp_signup_form').serialize();
            $.ajax({
            type: "POST",
            url:  "<?php echo "http://" . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; ?>",
            data: input_data,
            success: function(msg){
            $('.loader').remove();
            $('<div>').html(msg).appendTo('div#result').hide().fadeIn('slow');
            }
            });
            return false;

            });
            </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T01:42:55.427

在我们继续之前，请注意 wp-includes/registration.php 在 WordPress 3.1 中已弃用。

关于验证：简单的方法是在提交之前进行 jQuery 表单验证。有一个 jQuery 插件可以做这样的事情。请参阅：[http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

我需要确定“页面的其余部分也正在加载”。从代码中，除了每次验证的错误消息外，我什么都看不到。所以，`msg`必须只带它，而不是别的。但是您可能需要关闭它，`die();`而不是`exit();`exit 只是停止执行脚本并且 die 也将错误发送到 javascript。

编辑：#1

```
<script type="text/javascript">                         
$("#submitbtn").click(function() {
    $('#result').html('<img src="<?php bloginfo('template_url'); ?>/images/ajax-loader.gif" class="loader" />').fadeIn();
    var input_data = $('#wp_signup_form').serialize();
    $.ajax({
        type: "POST",
        url:  "<?php echo "http://" . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; ?>",
        data: input_data,
        success: function(msg){
            var textMsg = $(msg).find('#msg').html(); // Replace #msg with the element which you add the message
            $('.loader').remove();
            $('<div>').html(textMsg).appendTo('div#result').hide().fadeIn('slow');
        }
    });
    return false;
});
</script> 
```

# java - eclipse颠覆的提交不起作用

> ID：11041696
> 
> 赞同：0
> 
> 时间：2012-06-14T21:34:19.600
> 
> 标签：java, eclipse, svn

Subversion 新手，我有 Window7 64bits eclipse-jee-indigo-SR2-win32 jdk-7u4-windows-i586 java of 32 bits 我按照本教程使用 eclipse [http://www.eclipse.org/安装 subversion颠覆性/文档/gettingStarted/aboutSubversive/install.php](http://www.eclipse.org/subversive/documentation/gettingStarted/aboutSubversive/install.php)

一切正常，但颠覆插件无法执行提交操作：我连接到我的 svn 服务器，当我转到 java perpective y 按右键单击-> 团队-> commint 时，出现对​​话框，我输入了所有必需的信息，最后y 接受并在出现该进度对话框后，请帮助这个问题是 P1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:38:31.313

在能够提交文件之前，您必须先共享项目。如果您已经共享项目并且无法提交文件，您应该会收到一条错误消息，告诉您出了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T14:05:13.023

我在类似的条件下遇到了类似的问题。SVN eclipse 插件在 64 位系统上似乎非常不稳定（问题出现在 ubuntu 64 和 windows 7 上）。

我通过安装`Slik-Subversion-1.7.7-x64`和修改`eclipse.ini`参数解决了这些问题`-Djava.library.path=C:\Program Files\SlikSvn\`

此解决方案由我丢失的另一张海报提供。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:36:51.440

看来您连接得很好，所以我会先尝试更新然后提交。要提交特定项目，请右键单击该项目并 SVN 提交它。

你得到什么错误？

编辑：

您可能只是一个未经授权的用户，并且只有公共访问权限。所有者可能希望授予对它的读取权限，但不授予写入权限。

# c# - 如何在 NumericUpDown 中用更用户友好的文本替换数字？

> ID：11041699
> 
> 赞同：1
> 
> 时间：2012-06-14T21:34:39.710
> 
> 标签：c#, winforms, numericupdown

我想要 NumericUpdown 的功能（循环通过 12 个可能的值），但想要显示月份名称而不是 1..12。

可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:37:18.707

尝试使用与 类似的`DomainUpDown`控件，`NumericUpDown`但用于文本。

# c# - Open Graph 操作对象：更新访问令牌

> ID：11041705
> 
> 赞同：0
> 
> 时间：2012-06-14T21:35:09.413
> 
> 标签：c#, javascript, asp.net, facebook, sdk

我创建了一组开放图形“读取”对象，我希望将它们放置在特色文章下方的网站上。不幸的是，这些对象的访问令牌在大约两个小时后过期。这将我带到了 Facebook C# SDK，我在更新这些令牌时运气不佳……有没有人遇到过关于如何更新开放图形对象的良好起始示例？任何人？

# css - 缩短此 CSS 代码

> ID：11041706
> 
> 赞同：-1
> 
> 时间：2012-06-14T21:35:10.843
> 
> 标签：css

我有这个 css 代码，我想缩短它。

```
#one{
background: #6cab26;
background-image: url(#1_img_url),-moz-linear-gradient(top, #444444, #999999); /* FF3.6+ */
}

#two{
background: #6cab26;
background-image: url(#2_img_url),-moz-linear-gradient(top, #444444, #999999); /* FF3.6+ */

}

#three{
background: #6cab26;
background-image: url(#3_img_url),-moz-linear-gradient(top, #444444, #999999); /* FF3.6+ */
} 
```

这个 css 代码是使用带有背景的渐变！

它工作得很好，但如何缩短它？

我想要这样的东西

```
#one,#two,#three{
background: #6cab26;
background:-moz-linear-gradient(top, #444444, #999999);
}

#one{
background-image: url(#1_img_url)
}
#two{
background-image: url(#2_img_url)
}
#three{
background-image: url(#3_img_url)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:42:38.377

编辑

在不使用 Marat 建议的预处理器的情况下，您的代码尽可能短（感谢他！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T21:49:08.997

不幸的是，CSS 当前*没有*提供在使用多个背景图像层时覆盖单独的背景图像层的方法。

您可以利用[LESS](http://lesscss.org/)或[SASS](http://sass-lang.com/)等 CSS 预处理器，然后您可以将渐变保存在变量中以防止其重复。例如，在 LESS 中：

```
@grad: -moz-linear-gradient(top, #444444, #999999);

#one {
    background-image: url(#1_img_url), @grad;
}

#two {
    background-image: url(#2_img_url), @grad;
}

#three{
    background-image: url(#3_img_url), @grad;
} 
```

# jquery - 如何正确使用 jQuery NoConflict？

> ID：11041712
> 
> 赞同：1
> 
> 时间：2012-06-14T21:35:37.433
> 
> 标签：jquery

我正在使用两个 jQuery 脚本。一种用于控制网站上的下拉导航，另一种用于幻灯片放映。

一个模块前面有以下代码：

```
jQuery.noConflict();
(function($){
 $.fn.dropmenu = function(custom) 
```

另一个是这样开始的：

```
$(document).ready(function() { 
```

结果，第二个中的所有功能都显示为“不是功能”

由于我使用的两个脚本都是 jQuery，因此我似乎应该能够摆脱 NoConflict 函数，并且这两个脚本可以很好地配合使用。

欢迎贤者指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:58:02.163

通常`$()`与 相同`jQuery()`。noConflict 从 jquery 中“释放” $ 以便其他库可以使用它。所以你可以只使用`jQuery`而不是`$`无处不在。

或者你可以像他们在他们的[例子](http://api.jquery.com/jQuery.noConflict/)中展示的那样做，然后传递`jQuery`给一个匿名函数，你可以`$`像往常一样在其中再次使用：

```
jQuery.noConflict();
(function($) { 
  $(function() {
    // more code using $ as alias to jQuery
  });
})(jQuery);
// other code using $ as an alias to the other library 
```

所以你的例子中的问题是第一个插件调用 noConflict() 所以 $ 不能被第二个插件使用。

你可以把里面的所有东西都放在`$(document).ready()`里面来解决它`(function($){`。

或者，`noConflict`如果您不需要它（如果您不使用任何其他使用`$`.

# sql-server - 跨两个相关表的 FreeTextTable

> ID：11041715
> 
> 赞同：0
> 
> 时间：2012-06-14T21:36:01.470
> 
> 标签：sql-server, tsql

我有客户表和联系人表。一个客户可以有多个联系人，联系人表有一个客户 PK 的 FK。

我需要一个 FreeTextTable 查询，以便可以按客户姓名或联系人姓名进行搜索。

我一直在尝试将每个表中的 FreeTextTable 结果联合起来，但运气不佳。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:19:46.633

像这样的事情应该适合你：

```
SELECT *
FROM Client A
LEFT JOIN Contact B
ON A.ClientId = B.ClientId
WHERE A.ClientName LIKE '%somename%' OR B.ContactName LIKE '%somename%' 
```

# c# - C# 无法从 Excel 电子表格中导入所有单元格

> ID：11041717
> 
> 赞同：2
> 
> 时间：2012-06-14T21:36:11.470
> 
> 标签：c#, asp.net, import-from-excel

我正在使用一些旧代码将 Excel 工作表作为数据集返回。但是，当我遍历结果数据集时，似乎并非所有单元格都在那里。正在读取的 Excel 表有一些合并的单元格，我想知道这是否是问题所在。这是代码：

```
private DataSet Get_Spreadsheet_Data(string strFileName, string strSheetName)
{
    DataSet ds = new DataSet();
    string strConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source=" + strFileName + ";" + "Extended Properties=Excel 8.0;";
    OleDbConnection objConn = new OleDbConnection(strConnectionString);
    try
    {
        objConn.Open();
        OleDbCommand objCmdSelect = new OleDbCommand("SELECT * FROM [" + strSheetName + "$]", objConn);
        OleDbDataAdapter objAdapter1 = new OleDbDataAdapter();
        objAdapter1.SelectCommand = objCmdSelect;
        objAdapter1.Fill(ds);
    }
    catch (Exception Ex)
    {
        //litOutput.Text = "<span style=\"color:red;\">Exception Occurred pulling data from the spreadsheet.</span><br>Details: " + Ex.Message;
    }
    finally
    {
        objConn.Close();
        objConn.Dispose();
    }
    return ds;
} 
```

这段代码有问题吗？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:34:37.943

```
string strConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source=" + strFileName + ";" + "Extended Properties=Excel 8.0;"; 
```

需要阅读：

```
string strConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source=" + strFileName + ";" + "Extended Properties="Excel 8.0;HDR=NO;IMEX=1;"; 
```

这就是诀窍！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:49:07.413

您是否尝试过使用没有合并文件的 Excel 文件运行相同的代码？如果我想知道合并的单元格是否会导致填充数据集出现问题，这是我会尝试的第一件事......

编辑澄清：出于调试目的：使用相同的 Excel 文件，只需确保撤消单元格的合并。更好的是从一个 3 行 3 列的 excel 文件开始：

第一行：单元格 A1，值为 'Foo; 单元格 B1 '酒吧'，C1 香蕉。第二行：单元格 A2 Foo1 B2 Bar1 <-- 合并这两个单元格。C2 = 苹果。第三行：单元格 A3，值为 'Foo2; 单元格 B3 'Bar2' C3 橙色 <-- 检查使用合并单元格后下一行是否读取良好...

# javascript - jQuery 中的 AJAX 验证“冻结”？

> ID：11041718
> 
> 赞同：3
> 
> 时间：2012-06-14T21:36:19.697
> 
> 标签：javascript, jquery

```
function checkuser(user) {
        var ret = false;
        $.ajax({ type:'POST', url:'user.php',
            async:false,
            data:{'user':user},
            success:function (data) {
                if (data == 1) ret = true
            } });

        return ret;
    } 
```

我使用 bvalidator 来验证字段。似乎在每次按键时都会触发此功能，并且用户无法在 ajax 调用完成之前继续输入。我不确定在这里做什么。

例如，我怎样才能使函数每两秒运行一次以上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:37:56.333

您可以使用节流插件限制调用：

[jQuery 油门插件](http://benalman.com/projects/jquery-throttle-debounce-plugin/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:53:44.933

您需要摆脱，`async:false`但您还需要修改代码以异步工作。同步性是导致您的用户界面“冻结”的原因。

也许您可以尝试设置一个超时，该超时将在您按下输入键后 2 秒运行，但如果按下另一个键，它会重新启动该计时器。所以本质上它只会在两秒钟没有击键之后。

```
var validateTimeout;

$('#target').keydown(function() {
  clearTimeout(validateTimeout);
  validateTimeout = setTimeout(function(){checkuser(user);},2000);
}); 
```

您需要更新 checkuser ajax 调用以使回调更智能地异步工作：

```
function checkuser(user) {
    $.ajax({ type:'POST', url:'user.php',
        async:false,
        data:{'user':user},
        success:function (data) {
            if(data == 1){
              //something to indicate sucess
            }else{
             //something to indicate failure
            }
        } });
} 
```

# python - 找不到 cython 库

> ID：11041725
> 
> 赞同：1
> 
> 时间：2012-06-14T21:37:02.300
> 
> 标签：python, cython

我在执行我的python函数时发现了以下问题：

```
Traceback (most recent call last):
  File "/home/ppd/myfunc.py", line 2, in <module>
    from   cythonUtilsPy.cythonUtils import *
ImportError: No module named cythonUtils 
```

如何将此`cythonUtils`模块添加到我的路径中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:51:10.980

根据错误消息，它看起来`cythonUtilsPy`已经在您的路径上并且已找到，但未`cythonUtilsPy.cythonUtils`找到子模块。除非您导入了错误的`cythonUtilsPy`，否则您无法进行路径操作来解决此问题。

您需要找出为什么`cythonUtils`不显示为 的子模块`cythonUtilsPy`，如果`cythonUtils`是目录，则可能缺少`__init__.py`.

# visual-studio - Team Foundation 中的部分文件提交

> ID：11041727
> 
> 赞同：10
> 
> 时间：2012-06-14T21:37:18.867
> 
> 标签：visual-studio, version-control, tfs

是否可以在 Team Foundation 中执行“部分”或“补丁”提交？我有一个文件，其中包含已修改的两行，但我只想提交其中一行。Git 在“git add -p”命令中有这个功能。TFS有类似的东西吗？

我的问题更具体地说是：我的 .proj 文件对我不想提交给 TFS 的数据库连接设置进行了更改（因为这是到我自己的开发计算机上的开发数据库的连接）。但是，我已经删除了项目中的一个文件，所以我想提交从 .proj 文件中删除引用。我正在使用 Team Foundation Server 11 和 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T21:39:47.697

不。

您可以撤消其中一项更改，提交其余更改，然后重新应用您不想进行的更改。

或者

您可以搁置当前的更改，进行更改以删除文件，提交然后取消搁置您的更改集并继续工作。

# git - 为什么 GitHub 推荐 HTTPS 而不是 SSH？

> ID：11041729
> 
> 赞同：431
> 
> 时间：2012-06-14T21:37:26.930
> 
> 标签：git, github, ssh, https

在 GitHub 网站上有一个链接...

[https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

...它说...

> 如果您决定不使用推荐的 HTTPS 方法，我们可以使用 SSH 密钥在您的计算机和 GitHub 之间建立安全连接。以下步骤将引导您生成 SSH 密钥，然后将公钥添加到您的 GitHub 帐户。

为什么 HTTPS 是推荐的方法？SSH 方法中是否存在某种安全漏洞，还是速度较慢？我创建了一个 SSH 密钥，这样可以缓解任何安全问题吗？

* * *

## 回答 #1

> 赞同：261
> 
> 时间：2012-06-14T21:43:05.837

GitHub 已多次更改他们的推荐（[示例](https://web.archive.org/web/20140321204642/https://help.github.com/articles/generating-ssh-keys)）。

看来他们目前推荐 HTTPS，因为它是最容易在最广泛的网络和平台上设置的，而且对于所有这一切的新手来说都是最容易的。

SSH 没有固有缺陷（如果有的话，他们会禁用它）——在下面的链接中，您会看到它们仍然提供有关 SSH 连接的详细信息：

1.  HTTPS 不太可能被防火墙阻止。

    [https://help.github.com/articles/which-remote-url-should-i-use/](https://help.github.com/articles/which-remote-url-should-i-use/)

    > https:// 克隆 URL 在所有存储库（公共和私有）上都可用。这些 URL 可以在任何地方使用——即使您在防火墙或代理之后。

2.  HTTPS 连接允许`credential.helper`缓存您的密码。

    [https://help.github.com/articles/set-up-git](https://help.github.com/articles/set-up-git)

    > 很高兴知道：凭据帮助程序仅在您克隆 HTTPS 存储库 URL 时起作用。如果您改用 SSH 存储库 URL，则使用 SSH 密钥进行身份验证。虽然我们不推荐它，但如果您希望使用此方法，请查看本指南以获取生成和使用 SSH 密钥的帮助。

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2016-05-08T01:23:46.027

我认为 GitHub 推荐 HTTPS 有几个原因

1.  从任何地方访问存储库都更简单，因为您只需要您的帐户详细信息（不需要 SSH 密钥）即可写入存储库。

2.  HTTPS 是在所有防火墙中都开放的端口。SSH 并不总是作为与外部网络通信的端口打开

因此，使用 HTTPS 比使用 SSH 更普遍地访问 GitHub 存储库。

在我看来，SSH 密钥值得在创建它们时进行一些额外的工作

1.  SSH 密钥不提供对您的 GitHub 帐户的访问权限，因此如果您的密钥被盗，您的帐户不会被劫持。

2.  对您的 SSH 密钥使用强大的关键字可以限制任何滥用，即使您的密钥被盗（在首次破坏对您的计算机帐户的访问保护之后）

如果您的 GitHub 帐户凭据（用户名/密码）被盗，可以更改您的 GitHub 密码以阻止您访问，并且可以快速删除您的所有共享存储库。

如果私钥被盗，有人可以强制推送一个空存储库并清除您拥有的每个存储库的所有更改历史记录，但不能更改您的 GitHub 帐户中的任何内容。尝试从您有权访问您的 GitHub 帐户的违规行为中恢复会容易得多。

我的偏好是使用带有密码保护密钥的 SSH。我为每台计算机设置了不同的 SSH 密钥，因此如果该计算机被盗或密钥泄露，我可以快速登录 GitHub 并删除该密钥以防止不必要的访问。

如果您所在的网络阻止了 SSH 端口，则可以通过 HTTPS 建立 SSH 隧道。

[https://help.github.com/articles/using-ssh-over-the-https-port/](https://help.github.com/articles/using-ssh-over-the-https-port/)

如果您使用 HTTPS，我建议您添加双重身份验证，以保护您的帐户和存储库。

如果您将 HTTPS 与工具（例如编辑器）一起使用，您应该使用 GitHub 帐户中的开发人员令牌，而不是在该工具配置中缓存用户名和密码。令牌将减轻使用 HTTPS 的一些潜在风险，因为令牌可以配置为非常特定的访问权限，并且如果该令牌被泄露，则很容易被撤销。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-08-09T00:25:30.030

要么你引用错误，要么 github 在不同的页面上有不同的建议，或者他们可能会随着时间的推移学习并更新他们的记录。

*我们强烈建议在与 GitHub 交互时使用 SSH 连接。SSH 密钥是一种无需密码即可识别受信任计算机的方法。以下步骤将引导您生成 SSH 密钥，然后将公钥添加到您的 GitHub 帐户。*

[https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2018-01-18T05:18:31.757

# 如果被防火墙阻止，则通过 HTTPS 启用 SSH 连接

测试是否可以通过 HTTPS 端口进行 SSH，运行以下 SSH 命令：

```
$ ssh -T -p 443 git@ssh.github.com
Hi username! You've successfully authenticated, but GitHub does not
provide shell access. 
```

如果这有效，那就太好了！如果没有，您可能需要遵循我们的[故障排除指南](https://help.github.com/articles/error-permission-denied-publickey)。

如果您能够`git@ssh.github.com`通过端口**443**进行 SSH 连接，则可以覆盖您的 SSH 设置以强制任何与 GitHub 的连接通过该服务器和端口运行。

要在您的 ssh 配置中进行设置，请在 处编辑文件`~/.ssh/config`，然后添加此部分：

```
Host github.com
  Hostname ssh.github.com
  Port 443 
```

您可以通过再次连接到 GitHub 来测试它是否有效：

```
$ ssh -T git@github.com
Hi username! You've successfully authenticated, but GitHub does not
provide shell access. 
```

* * *

从[身份验证到 GitHub / 通过 HTTPS 端口使用 SSH](https://help.github.com/articles/using-ssh-over-the-https-port/)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-03-27T01:44:02.967

另请参阅：官方[我应该使用哪个远程 URL？](https://help.github.com/articles/which-remote-url-should-i-use)在 help.github.com 上回答。

**编辑：**

似乎不再需要拥有对公共存储库的写入权限才能使用 SSH URL，从而使我原来的解释无效。

**原来的：**

显然，支持 HTTPS URL 的主要原因是，如果您没有对该存储库的写入权限，SSH URL 将无法与公共存储库一起使用。

但是，鼓励使用 SSH URL 部署到生产服务器 - 大概这里的上下文是像 Heroku 这样的服务。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-05T15:45:29.933

有人可能会争辩说，使用 SSH 密钥进行身份验证的安全性较低，因为我们更倾向于定期更改密码，而不是生成新的 SSH 密钥。

限制使用 SSH 密钥的服务器可以帮助强制用户定期刷新 SSH 密钥的做法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-16T21:19:25.990

支持 HTTPS 的另一个原因是，如果多个用户在中央服务器（例如开发机器）上管理代码，每个用户都需要创建自己的 ssh 密钥才能使用基于 SSH 的连接。如果连接是 HTTPS，则不存在此问题。

我想您可能会争辩说，将自己的密钥设置为使用存储该项目的服务器的入职培训的一部分并不难，但这是完成工作的另一个障碍。

# python - matplotlib RuntimeError：无法为图像分配内存

> ID：11041731
> 
> 赞同：1
> 
> 时间：2012-06-14T21:37:33.330
> 
> 标签：python, memory-management, matplotlib

因此，当我尝试在画布上调整图像大小时，我从 matplotlib 收到“RuntimeError：无法为图像分配内存”。图像是使用 ctypes 的 PyMem_Malloc 分配内存的大型 DICOM (.dcm) 文件。它们被分配了每像素 16 位（它们需要是高分辨率的）。问题出现在我们重新调整画布大小并尝试使用以下方法绘制调整大小的图像后：

```
self.view.canvas.draw() 
```

这是抛出的特定异常：

```
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\matplotlib\backends\backend_wx.py", line 1355, in _onMotion
    FigureCanvasBase.motion_notify_event(self, x, y, guiEvent=evt)
  File "C:\Python27\lib\site-packages\matplotlib\backend_bases.py", line 1625, in motion_notify_event
    self.callbacks.process(s, event)
  File "C:\Python27\lib\site-packages\matplotlib\cbook.py", line 265, in process
    proxy(*args, **kwargs)
  File "C:\Python27\lib\site-packages\matplotlib\cbook.py", line 191, in __call__
    return mtd(*args, **kwargs)
  File "C:\Python27\lib\site-packages\matplotlib\widgets.py", line 1258, in onmove
    self.update()
  File "C:\Python27\lib\site-packages\matplotlib\widgets.py", line 1236, in update
    self.canvas.restore_region(self.background)
  File "C:\Python27\lib\site-packages\matplotlib\backends\backend_agg.py", line 384, in restore_region
    renderer = self.get_renderer()
  File "C:\Python27\lib\site-packages\matplotlib\backends\backend_agg.py", line 404, in get_renderer
    self.renderer = RendererAgg(w, h, self.figure.dpi)
  File "C:\Python27\lib\site-packages\matplotlib\backends\backend_agg.py", line 59, in __init__
    self._renderer = _RendererAgg(int(width), int(height), dpi, debug=False)
RuntimeError: Could not allocate memory for image 
```

图像本身不需要更多分配，对吗？那么这里可能是什么问题呢？matplotlib 是否限制画布可以容纳的内存大小？有人遇到过这个问题吗？

# c# - 在 Perl 脚本中调用另一个程序

> ID：11041734
> 
> 赞同：0
> 
> 时间：2012-06-14T21:37:38.290
> 
> 标签：c#, perl

我想执行一个包含 1 个文本文件（比如 Text.exe）的程序，我想使用这个输出（也是 txt）以供将来在 C# 程序中使用。我正在考虑使用 Perl 脚本来执行它（该脚本还执行其他一些操作），但不太确定如何在 Perl 脚本中调用 .exe。我很感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:41:28.923

使用反引号：```如果您需要捕获程序的输出。

```
my $output = `program.exe`; 
```

[您可以在perlipc](http://p3rl.org/perlipc)中找到有关 Perl 中可用的不同 IPC 方法的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:40:03.263

采用：

```
system("c:\somepath\program.exe"); 
```

您可以向字符串添加参数。

# java - 将 @XmlAttribute 添加到简单类型

> ID：11041738
> 
> 赞同：2
> 
> 时间：2012-06-14T21:38:28.023
> 
> 标签：java, xml, jaxb

我正在尝试将使用 javax.xml.bind.annotation 的属性添加到简单类型（在这种情况下为字符串）

所以我想要这个

```
<myObj><stuff foo="bar">data</stuff></myObj> 
```

如果 stuff 是 'myObj' 内的字符串，这可能吗？

我知道这很可能很容易我只是很难找到一个将属性添加到非复杂类型的示例。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T03:53:28.847

我讨厌让事情悬而未决...基本上我想做的是向驻留在类中的字符串添加一个属性，但我必须做的是将该字符串包装成一个也有 xmlvlaue 的 pojo作为属性的其他成员。

谢谢

# java - 在为开发 Android 应用程序编写 Java 编码的同时，我是否应该同时使用 XML？

> ID：11041743
> 
> 赞同：-4
> 
> 时间：2012-06-14T21:39:08.753
> 
> 标签：java, android, xml, list, user-interface

首先，我想澄清一下，我对此非常陌生！我不擅长 Java/开发，但我非常热衷于学习。

我有一个项目，一个信息丰富的 Android 应用程序。我想我知道我想要它的结构：

第一个视图 = 50 个对象的列表

一旦您单击其中一个对象，它将提供另一个对象信息列表。

我知道 Java 编码是我将数据放在那里所需要的，但我也知道我必须对 XML 有点熟悉才能真正让它看起来漂亮。我是否应该同时来回运行 XML 布局和 Java 代码？我可以稍后再回来修复 XML 吗？

我对如何构建仅列出大量信息的应用程序有正确的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:47:29.217

在你开始开发 Android 应用程序之前，我会先学习面向对象编程的概念。渴望学习是很棒的，但它是成功的一半。在没有编程背景的情况下直接进入应用程序开发可能会阻碍你的热情。从基础开始：什么是变量、函数/方法等。然后进入类、多态性、OOP 概念等。

就 XML 而言，它是一种简单的标记语言。一旦你有一些编程经验（甚至没有），弄清楚 XML 是如何工作的对 IMO 来说并不太难。

# jquery - jQuery：滚动条位于底部时滚动

> ID：11041744
> 
> 赞同：2
> 
> 时间：2012-06-14T21:39:12.143
> 
> 标签：jquery, scroll

如果我有一个 div，并希望它在其滚动条位于底部时自动滚动，我将如何使用我这里的代码来做到这一点？它对我来说不能正常工作。

```
var scroll = false;
if ($("#console").scrollTop() == ($("#console").prop("scrollHeight") - 503)) {
  scroll = true;
}
if (scroll == true) {
  $("#console").prop({ scrollTop: $("#console").prop("scrollHeight") });
} 
```

如果 div 的高度是动态的，而不是静态大小，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:43:41.873

六氰化物，

您需要将事件处理程序附加到容器。您现在在这里拥有的代码将始终是错误的，因为您没有捕获任何正在发生的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:06:26.840

```
$("#console").scroll(function(){
  var boxHeight = $('#console').height();
  if($("#console").scrollTop() == ($("#console").prop("scrollHeight") - boxHeight )) {
    $("#console").prop({ scrollTop: $("#console").prop("scrollHeight") });
  }
}); 
```

你能试试这个新版本吗，灵感来自我们这里的助手。这应该可以工作，只要您滚动，它就会检查它是否在底部。如果是，它将滚动回顶部。

# ruby-on-rails - 如何在 activerecord 模型中添加枚举列表？

> ID：11041746
> 
> 赞同：0
> 
> 时间：2012-06-14T21:39:28.490
> 
> 标签：ruby-on-rails, activerecord

我目前正在使用`simple_enum`类似的字段，`as_enum :title, { mrs: 0, mr: 1 }`但现在我需要一个枚举列表：例如一个`categories`可能需要多个枚举值的字段。**而且我不想加入:)**

我看了其他几颗宝石，但一无所获。有一个简单的解决方案吗？

谢谢，

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:52:15.970

我们经常为这些类型的值使用一个简单的[位域。](http://en.wikipedia.org/wiki/Bit_field)

# ruby - 使用遏制 gem 在 Heroku 上配置 CA 路径

> ID：11041747
> 
> 赞同：4
> 
> 时间：2012-06-14T21:39:39.970
> 
> 标签：ruby, ssl, curl, heroku

当我尝试使用 newslettre gem 访问 SendGrid API 时，我得到了一个 Curl::Err::SSLCaertBadFile。

gem 使用遏制 gem 来包装 libcurl。我发现这篇文章让我觉得我需要设置 ca_path [SSLCaertBadFile 错误 heroku crawl](https://stackoverflow.com/questions/9154679/sslcaertbadfile-error-heroku-curb)，然后我发现这个[将 SSL 证书更改为不同的位置](https://stackoverflow.com/questions/3976511/changing-ssl-certificates-to-a-different-location)，这有助于我在 libcurl 中找到该变量的名称。遏制允许您使用此界面设置选项：[https](https://github.com/taf2/curb/blob/master/lib/curl/easy.rb#L27) ://github.com/taf2/curb/blob/master/lib/curl/easy.rb#L27 。基于这个和它下面的 sym2curl 方法，我尝试了这些配置中的每一个：

```
curl.set(Curl::CURLOPT_CAPATH, "/etc/ssl/certs") 
curl.set(:capath, "/etc/ssl/certs") 
```

但是每次我尝试访问安全 api 时，我都会遇到同样的错误。

# sql-server - 我应该使用 SqlGeometry 还是 SqlGeography？

> ID：11041756
> 
> 赞同：7
> 
> 时间：2012-06-14T21:40:12.673
> 
> 标签：sql-server, geocoding, geospatial

我们在这个问题上存在一些内部冲突，似乎无法得出一个愉快的结论。

我们只会存储纬度和经度，可能还有简单的多边形。我们所需要的只是计算两点之间的距离（并可能查看一个点是否在多边形内），并且整个数据非常接近以使平面估计可以接受。

由于我们的要求非常宽松，一半的开发团队建议使用`SqlGeometry`类型，这显然更简单。不过，我无法接受这一点，因为我们正在存储*地理数据*，似乎将它们存储在其中`SqlGeography`是正确的做法。此外，我没有找到任何实质性证据表明`SqlGeometry`数据类型比类型更容易使用`SqlGeography`。

有没有人建议哪种类型更适合这种相对简单的场景？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T16:28:24.453

这不是比较特征、准确性或简单性的问题——这两种空间数据类型用于处理不同类型的数据。

打个比方，假设您正在为每行包含唯一标识符的列选择最佳数据类型。如果该 UID 仅包含整数值，您将使用*int*，而如果它是 6 个字符的字母数字值，您将使用*char(6)*。如果它有可变长度的 unicode 值，你会使用*nvarchar*代替，对吧？

同样的逻辑也适用于空间数据——您可以根据该列包含的值选择适当的数据类型；如果您使用地理（即纬度/经度）坐标，请使用*SqlGeography*数据类型。就是这么简单。

您*可以*使用 SqlGeometry 来存储纬度/经度值，但这就像使用*nvarchar(max)*来存储整数......我向你保证它会导致进一步的问题（当你所有的面积计算出来时）例如，以平方度为单位）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T14:46:31.110

SqlGeography 类型的可用方法比 SqlGeometry 少（尤其是在 Sql 2008 中）。

[SqlGeography 参考](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.types.sqlgeography.aspx)

[SqlGeometry 参考](http://msdn.microsoft.com/en-us/library/ee642119%28v=sql.105%29)

例如，假设您想在 Sql2008 中获取多边形的质心。您在几何中有一种本地方法，但在地理中没有。

此外，它具有以下限制：

*   你的地理不能超过一个半球
*   创建多边形时，环顺序很重要

此外，大多数可用的 API 和库（据我所知）比地理更好地处理几何。

也就是说，如果距离计算必须精确，你有很远的距离并且在世界各地都有坐标，那么地理可能会更合适。否则，根据您对问题的描述，几何类型将为您提供很好的服务。

关于您的问题：“工作容易得多吗？”。这取决于。无论如何，根据经验，对于简单的场景，我通常会选择 SqlGeometry。

无论如何，恕我直言，你不应该太担心这个决定。使用其他类型创建新列并在必要时迁移数据相对容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-02T16:16:50.923

四年后，很明显我们应该将数据存储`SqlGeometry`在`SqlGeography`.

为什么？

我们从立法区地图导入信息，他们的数据存储在`SqlGeometry`. 在确定特定的纬度/经度是否在某个立法区边界内时，当该点接近两个边界时，我们会得到不一致的结果。

这需要我们做额外的工作来识别“靠近”边界的位置，并手动验证它们是否被分配到正确的区域。不理想。

**故事的寓意：**如果您依赖任何数据，请考虑它存储的类型以帮助指导您的决策。

# javascript - 在不丢失数据或损坏数据的情况下将 xml 往返传输到 javascript 对象

> ID：11041757
> 
> 赞同：3
> 
> 时间：2012-06-14T21:40:29.660
> 
> 标签：javascript, xml, node.js

我需要获取一些 XML，将其转换为 javascript，对其进行处理，然后将其转换回 XML。我在 Node.js 工作。

目前，如果我将它从 XML 往返传输到 Javascript 对象，然后再返回 XML，我最终会得到一堆乱七八糟的字符（例如，撇号可能看起来像这样： â€™ ），并且 CDATA 部分丢失了.

我一直在使用 xml2js 模块（也尝试过 xml2js-expat）来读取 xml。xml 将自身标记为 UTF-8，我将其指定给 xml2js。

要转换回 XML，我使用的是：http: [//goessner.net/download/prj/jsonxml/json2xml.js](http://goessner.net/download/prj/jsonxml/json2xml.js)

但似乎问题出在第一步。

有什么解决办法吗？

# php - 将对象变量声明为新对象错误 - PHP

> ID：11041758
> 
> 赞同：1
> 
> 时间：2012-06-14T21:40:42.547
> 
> 标签：php, class, variables, object

首先，是否可以将扩展类放入类中的变量中，如下所示，

```
class EG extends DH {

     public $var = // VALUE OF DH
} 
```

其次，我一直这样做的方式，

```
class EG {

     public $var;
     public function __construct() {
         $this -> var = new DH();
     }
} 
```

这样做的原因是我需要将`DH`类方法传递给在类外部定义的函数。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:45:56.347

正确的做法是将其作为参数传递

```
class EG {
     public $var;
     public function __construct( DH $dh ) {
         $this -> var = $dh;
     }
} 
```

它被称为[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)，[它优先于扩展](http://en.wikipedia.org/wiki/Composition_over_inheritance)

我必须补充一点，有时继承是正确的方法，但是您描述情况的方式使 DI 看起来是正确的方法。

# mysql - 通过 CSV 将 excel 数据导入 MySQL 时出现问题

> ID：11041759
> 
> 赞同：0
> 
> 时间：2012-06-14T21:40:53.173
> 
> 标签：mysql, excel, csv, import

我有 12 个 excel 文件，每个文件都包含大量数据，分为 2 个字段（列）：**id**和**text**。

每个 excel 文件的**文本**字段使用不同的语言：西班牙语、意大利语、法语、英语、德语、阿拉伯语、日语、俄语、韩语、中文、日语和葡萄牙语。

**id**字段是字母和数字的组合。

我需要将每个 excel 导入到不同的 MySQL 表中，因此每种语言一个表。

我正在尝试通过以下方式进行操作： - 将 excel 保存为 CSV 文件 - 在 phpMyAdmin 中导入该 CSV

问题是我遇到了各种各样的问题，我无法正确导入它们，可能是因为编码问题。

例如，对于阿拉伯语，我将所有内容都设置为 UTF-8（数据库表字段和 CSV 文件），但是当我进行导入时，我得到了奇怪的字符而不是普通的阿拉伯字符（如果我手动复制它们，他们表现得很好）。

我遇到的其他问题是某些文本有逗号，并且由于 CSV 文件也使用逗号来分隔字段，因此只要有逗号，导入的文本就会被截断。

其他问题是，当另存为 CSV 时，字符会变得混乱（如中文字符），并且我找不到告诉 excel 我想在 CSV 文件中使用什么编码的选项。

有没有我可以遵循的“协议”或“规则”来确保我以正确的方式做事？适用于每种不同语言的东西？我正在尝试注意字符编码，但即便如此，我仍然会得到奇怪的东西。

也许我应该尝试不同的方法而不是 CSV 文件？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T00:24:55.433

好的，我该如何解决我的所有问题？忘记Excel！

我将 Excel 上传到 Googledocs 电子表格，以 CSV 格式下载，所有字符都很完美。

然后我只是使用“utf_general_ci”排序规则将它们导入到表的相应字段中，现在所有内容都完美地上传到数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:04:35.653

在 CSV 中要做的一件标准事情是用双引号将包含逗号的字段括起来。所以

```
ABC, johnny cant't come out, can he?, newfield 
```

变成

```
ABC, "johnny cant't come out, can he?", newfield 
```

如果您选择另存为 CSV 文件类型，我相信 Excel 会执行此操作。您将遇到的一个问题是 CSV 仅适用于 ANSI。我认为您需要使用“Unicode 文本”另存为选项并使用制表符分隔符或将它们转换为逗号。Unicode 文本选项还引用包含逗号的值。（使用 Excel 2007 检查）

**编辑**：添加特定方向

在**Excel 2007**中（其他版本的 Excel 可能会有所不同）

选择“另存为”

在“保存类型：”字段中，选择“Unicode 文本”

![保存对话框截图](../Images/59b50b132bcc89524e51589649189159.png)

你会得到一个 Unicode 文件。特别是 UCS-2 Little Endian。

# r - 从 R 中的 csv 文件读取错误

> ID：11041760
> 
> 赞同：1
> 
> 时间：2012-06-14T21:40:52.840
> 
> 标签：r, csv

我有一个这样的 csv 文件：

```
time,value,duration,time
2011-02-11 03:00:00,3663,3663,0
2011-02-12 03:00:00,3747,3747,0
2011-02-13 03:00:00,467,467,0 
```

这是我的代码：

> test1 <- read.csv("C:(这里是路径)",header=T,sep="",quote="", row.names = NULL) [,-1] test1[2,2]

它说的错误是：

```
Error in `[.default`(test1, 2, 2) : incorrect number of dimensions 
```

我认为日期之后有一个空格的事实搞砸了，但我不知道如何解决它。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:48:26.977

这似乎对我有用：

```
test1 <- read.csv(path)[, -1] 
```

该命令仅使用默认参数`read.csv`：

```
read.csv(file, header = TRUE, sep = ",", quote="\"", dec=".",
         fill = TRUE, comment.char="", ...) 
```

所以，这是我得到的结果：

```
 value duration time.1
1  3663     3663      0
2  3747     3747      0
3   467      467      0 
```

这似乎是你想要的，对吧？

那么`test[2, 2]`等价`test$duration[2]`于3747。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T21:48:37.113

如果您的文件确实是 csv，则需要使用 .csv 文件`sep=','`的默认值`read.csv`。如果您使用`sep=''`它意味着您将每一行作为单个值读取，因此没有第二列。

阅读后，您还可以使用它`str(test1)`来查看数据的结构。

```
test1 <- read.csv(path, header=TRUE) 
```

那应该给你你想要的。

# sql-server-2008 - SSIS派生列转换无输入

> ID：11041762
> 
> 赞同：1
> 
> 时间：2012-06-14T21:41:26.270
> 
> 标签：sql-server-2008, ssis, bids

我不知道这是否可能。在 SSIS Derived 列转换中，您可以在没有任何输入的情况下运行包吗？

例如，您有一个数据流任务，在其中您只需将派生列转换作为源。原因是，您可以通过这种方式访问​​系统变量，而无需为其编写脚本。下面是我试图实现的屏幕截图。包没有失败，但我在数据查看器上看不到任何东西（它甚至没有被执行）。任何帮助表示赞赏。谢谢![图片](../Images/69c16311a20dec587eee691a8b60f7ef.png)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:28:28.613

这没有意义。即使有可能，“派生列”转换也适用于源中的每一行；所以在你的情况下，你的新列不会有任何行，所以无论如何你都无法使用它。

# javascript - 在下拉列表框上通过 appendChild 方法添加的项目在 IE8 下不显示

> ID：11041764
> 
> 赞同：0
> 
> 时间：2012-06-14T21:41:41.173
> 
> 标签：javascript, internet-explorer-8, appendchild

最初我认为这是一个 CSS 问题，但我构建了一个小样本来重现该问题。如果使用 IE8，则不显示值：Value1、2 和 3：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
    <html xmlns="http://www.w3.org/1999/xhtml" >
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            alert("Thanks for visiting!");
            var gridCommandBox = $('#GridCommands')[0];

            if (gridCommandBox.options.length == 0) {

                gridCommandBox.options.add(new Option("<Select Command>", ""));
                var clipGroup = document.createElement("optgroup");
                clipGroup.label = "Copy To Clipboard...";
                clipGroup.appendChild(new Option("Value1", "Value1"));
                clipGroup.appendChild(new Option("Value2", "Value2"));
                clipGroup.appendChild(new Option("Value3", "Value3"));
                gridCommandBox.appendChild(clipGroup);
            }
        });
    </script>
</head>
<body>

<table>
<tr><td><select id="GridCommands"></select></td></tr>
</table>

</body>
</html> 
```

有任何想法吗？谢谢马克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:58:05.603

Option 对象是与 HTML 中的标记相关联的 HTML DOM 对象。您正在直接实例化一个 Option 对象并尝试将此 JavaScript 对象附加到另一个 DOM 元素。

虽然这可能适用于某些浏览器，但您应该使用它`document.createElement('option')`来创建选项。如果您使用新的 Option 方法，您可能还必须在`history.go(0)`之后添加以强制浏览器刷新选择选项。

# asp.net - IIS 上的读写权限

> ID：11041765
> 
> 赞同：0
> 
> 时间：2012-06-14T21:41:42.480
> 
> 标签：asp.net, asp.net-mvc-3, visual-studio-2010, iis-7

我在目录中创建了一个目录`uploads`，在`Content`目录中`uploads`我在创建用户帐户时创建了一个目录。此设置在开发设置上运行良好，但是当我在本地发布站点时，`IIS`出现访问被拒绝错误。

> 拒绝访问路径“C:\inetpub\wwwroot\Content\uploads/d1bed3b7-f9e1-486a-953a-37abc7b99dad”。

我有一个共享主机环境，我想问的问题是，我可以设置共享主机环境的权限吗？

有哪些替代方案？

编辑

这是用于为用户创建目录的代码（tnx to @Marko）

```
string UserGUID = Guid.NewGuid().ToString();
string path = HostingEnvironment.MapPath(@"~/Content/uploads");
Directory.CreateDirectory(path+"/" + UserGUID); 
```

编辑

更改代码后，错误消息得到了改善

> 拒绝访问路径“C:\inetpub\wwwroot\Content\uploads\ab569312-c487-4a08-bf49-99f7c69303f6”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:43:06.320

**路径有问题，你有错误的斜线`/`**

```
C:\inetpub\wwwroot\Content\uploads--------->/<----------d1bed3b7-f9e1-486a-953a-37abc7b99dad' 
```

只要`\uploads\`路径具有可写权限，您在该文件夹中创建的任何文件夹/文件都**应该**从父级继承权限。

**编辑**

我不是 100% 确定它为什么在 cassini 中工作，但将您的代码更改为此（它使用`Path.Combine`）而不是手动添加斜杠（这实际上是错误的斜杠）。

```
string UserGUID = Guid.NewGuid().ToString();
string path = HostingEnvironment.MapPath(@"~/Content/uploads");
string userPath = Path.Combine(path, UserGuid);
Directory.CreateDirectory(userPath); 
```

**如果所有这些都失败了**，请联系您的托管服务提供商以设置`/uploads/`文件夹的可写权限，或者使用“管理”面板（如果有）。

# winforms - 如何在不使用 .fill 的情况下让 Bindingsource 查看使用 TableAdapter.Update() 方法添加的记录？

> ID：11041767
> 
> 赞同：0
> 
> 时间：2012-06-14T21:41:51.030
> 
> 标签：winforms, bindingsource

我有一个大型数据集，在页面加载时使用填充方法加载。

然后，可以将记录添加到数据集中。

所有这些都可以正常工作，但我可以让 bindingsource 识别新记录的唯一方法是执行填充方法。这也有效，但存在性能问题。为什么绑定源看不到数据集中的新记录？

主窗体代码。效果很好。

```
 DialogResult returnFormVal;

        Schedulers.DataSets.SchedOneFetch.WOMainFetchRow newRow = schedOneFetch.WOMainFetch.NewWOMainFetchRow();

        Schedulers.Forms.NewWorkOrder genReport = new Schedulers.Forms.NewWorkOrder(ref newRow);

        Int32 picNumber;

        returnFormVal = genReport.ShowDialog();

        schedOneFetch.WOMainFetch.Rows.Add(newRow);

        wOMainFetchBindingSource.EndEdit();

        wOMainFetchTableAdapter.Adapter.Update(schedOneFetch.WOMainFetch);

        Int32 passBackVal = newRow.DISID; 
```

子表单代码。也很好用。

```
 passBackRow.DISDueDate = monthCalendar1.SelectionStart;

            passBackRow.DISID = 99999999;

            if (ckbEqpt.Checked == true & lbProcNum.Items.Count > 0)
            {
                passBackRow.DISEquip = Convert.ToInt32(lbProcNum.SelectedValue.ToString());
            }
            else
            {
                passBackRow.DISEquip = 0;
            }

            passBackRow.DISLineNumber = Convert.ToInt32(lbLineName.SelectedValue.ToString());

            passBackRow.DISManHours = Convert.ToInt32(nudEstTotTime.Value);

            passBackRow.DISNumberAss = Convert.ToInt32(nudEstTM.Value);

            passBackRow.DISOpenDate = DateTime.Now;

            passBackRow.DISOriginator = userID.DBUserID;

            passBackRow.DISRequestor = 0;

            passBackRow.DISResponsible = Convert.ToInt32(lbRespons.SelectedValue.ToString());

            passBackRow.DISType = Convert.ToInt32(lbType.SelectedValue.ToString());

            passBackRow.DISWorkAccomp = "";

            passBackRow.DISWorkRequired = rtbWorkReq.Text;

            passBackRow.MLID = 0;

            passBackRow.LIID = 0;

            passBackVal = 0;

            this.Close(); 
```

将控件返回到主窗体。新记录已添加到数据库中。

```
 wOMainFetchBindingSource.Position = wOMainFetchBindingSource.Find("DISID", passBackVal);

            DataRowView dtaRow = (DataRowView)wOMainFetchBindingSource.Current;

            String woID = dtaRow["DISID"].ToString(); 
```

失败！bindingsource 不会找到新记录，在找到时返回 -1 并默认为数据集中的第一条记录。

如果我将 .fill 方法放在对话框和主页之间，那么一切正常，但需要很长时间才能完成填充……七八秒。

我想我对绑定源的理解是无效的，我假设如果基础数据集被更新，那么绑定源会看到它。

因此，首先，如果有人对如何在没有填充的情况下刷新绑定源有建议，我将不胜感激，如果有人能解释为什么它会以这种方式工作，我可能会找到一种解决方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:20:07.017

我对 Bindingsource 的理解是正确的，它看到了添加的新记录。问题是数据集从视图中获取信息。add new 方法仅填充基表中的字段。其他字段，即由视图组装的字段，在 tableadapter 使用填充方法重新读取之前不会填充。除了填充新记录的每个字段之外，我没有看到解决此问题的方法，最大的缺点是每当视图或视图中组装的任何表发生更改时，您都必须确保更改代码。相反，我将减少每次填充时加载的记录数。

# c# - 将 iTextSharp 从 5.0.0 合并到 5.2.1 后生成 pdf 标题的问题

> ID：11041777
> 
> 赞同：1
> 
> 时间：2012-06-14T21:42:47.847
> 
> 标签：c#, pdf, itextsharp

我们使用 iTextSharp 进行 PDF 操作和合并。

最近我们将 iTextSharp 从 5.0.0 升级到 5.2.1

我们正在使用`PdfPageEventHelper`类的方法`OnEndPage`（在自定义类中重写）来编写标题。

升级到 5.2.1.0 后，iTextSharp 生成的 PDF 文件没有我们提供的页眉文本。没有代码更改。恢复到旧版本（5.0.0），写入标题没有任何问题。

我无法弄清楚新版本中的哪些变化导致了这种情况，我在文档中看不到任何特定于此的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:45:30.187

感谢亚历克西斯的时间。

我们已经找到了解决方案，有点奇怪。

我们必须将 PdfPCell 实例的“FixedHeight”属性从 10 更改为 20。还注释该行以设置 FixedHeight 值（保持默认值，当我检查时为 0.0）也起到了作用。所以我不知道文本显示的方式是否随着新版本或由于任何错误而改变。

# redis - Redis 是仅像 memcached 一样的内存存储还是将数据写入磁盘

> ID：11041778
> 
> 赞同：40
> 
> 时间：2012-06-14T21:42:48.830
> 
> 标签：redis

Redis 内存是仅像 memcached 一样存储还是将数据写入磁盘？如果它确实写入磁盘，磁盘多久写入一次？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-14T21:51:02.600

Redis持久化在这里详细描述：

[http://redis.io/topics/persistence](http://redis.io/topics/persistence)

默认情况下，redis 执行*快照*：

> 默认情况下，Redis 将数据集的快照保存在磁盘上的一个名为 dump.rdb 的二进制文件中。如果数据集中至少有 M 次更改，您可以将 Redis 配置为每 N 秒保存一次数据集，或者您可以手动调用 SAVE 或 BGSAVE 命令。例如，如果至少更改了 1000 个键，则此配置将使 Redis 每 60 秒自动将数据集转储到磁盘： save 60 1000

另一个很好的参考是作者博客的链接，他试图解释 redis 持久性是如何工作的：

[http://antirez.com/post/redis-persistence-demystified.html](http://antirez.com/post/redis-persistence-demystified.html)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-17T09:55:18.193

Redis 将所有数据保存在内存中。如果应用程序的数据量太大，那么 Redis 就不是一个合适的解决方案。

但是，Redis 还提供了两种方法来使数据持久化：

1) 以预定义的时间间隔进行快照，这也可能取决于更改的数量。这些间隔之间的任何更改都将在电源故障或崩溃时丢失。

2）在每次数据更改时编写一种更改日志。您可以微调将其物理写入磁盘的频率，但如果您选择始终立即写入（这会降低您的一些性能），则不会因 Redis 的内存性质而导致数据丢失。

# visual-studio - QT3 (yes 3) 与 VS2003 (yes 2003) 的集成，如何将新的 UI 表单添加到现有的 .proj

> ID：11041787
> 
> 赞同：0
> 
> 时间：2012-06-14T21:43:56.630
> 
> 标签：visual-studio, qt, qt3

我被要求对我们拥有的 QT3 应用程序进行一些更新，我需要添加一个新的 UI，我已经在 QT .pro 中创建了它，但现有的关联 VS 解决方案/.项目文件。我认为应该有一些集成可以从 pro 更新 proj，但我不知道如何启动它。我设法通过手动编辑项目将新 UI 放入项目中，但我遇到了链接器错误，我不相信我没有错过任何东西。

迁移到 QT4/VS2010 并不是一个真正的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T01:55:04.127

您可以使用 qmake 在当前子目录中生成 .vcproj 文件，如下所示：

```
qmake -tp vc 
```

确保保存原始 .vcproj 安全，不能保证它是使用 qmake 生成的！回想一下，有一个用于 Qt3 的商业 Visual Studio 插件/加载项。你可能在某个地方有它。我不认为它可以免费下载。

# c# - NullReferenceException: Object reference not set to an instance of an object. in a foreach loop

> ID：11041788
> 
> 赞同：0
> 
> 时间：2012-06-14T21:44:16.260
> 
> 标签：c#, .net, html, asp.net-mvc

I'm having trouble with the instance of my object it gave me an error in which i don't understand

```
List<Event> events = parseResponse.Deserialize<List<Event>>(_responseAsString);
ViewBag.eventss = events; 
```

html

```
<table id="eventist" border="0" cellspacing="0" cellpadding="0">
<thead>
    <tr>
        <th>
            event_key
        </th>
         <th>
            user_token
        </th>                
        <th>
            event_set_key
        </th>           
        <th>
            event_type
        </th>
         <th>
          event_date
        </th>
          <th>
            event_amount
        </th>
         <th>
            event_location_key
        </th>                
        <th>
            event_location_name
        </th>           
        <th>
            event_location_city
        </th>
         <th>
          event_location_state
        </th>
        <th>
            event_location_country
        </th>
         <th>
          event_acknowledged
        </th>
    </tr>
</thead>
<tbody>
<%List<StopMalaria.Models.Event> events= ViewBag.eventss;%>
<% foreach (var item in events)
   { %>

    <tr>
        <td>
            <%: item.event_key%>
        </td>
        <td>
              <%: item.user_token%>
        </td>               
        <td>
            <%: item.event_set_key%>
        </td>           
        <td>
            <%: item.event_type%>
        </td> 
         <td>
            <%: item.event_date%>
        </td>
        <td>
              <%: item.event_amount%>
        </td>               
        <td>
            <%: item.event_location_key%>
        </td>           
        <td>
            <%: item.event_location_name%>
        </td> 
         <td>
            <%: item.event_location_city%>
        </td>
        <td>
              <%: item.event_location_state%>
        </td>               
        <td>
            <%: item.event_location_country%>
        </td>           
        <td>
            <%: item.event_acknowledged%>
        </td>                   
    </tr>

<% } %>
</tbody>
</table> 
```

So i did this. now it is saying [NullReferenceException: Object reference not set to an instance of an object.] and my `<% foreach(var item in events)` are highlighted red .

I already have a class with all of the element

```
 public class Event
   {
     public string event_key { get; set; }
     public string user_token { get; set; }
     public string event_set_key { get; set; }
    public string event_type { get; set; }
    public string event_date { get; set; }
    public string event_amount { get; set; }
    public string event_location_key { get; set; }
    public string event_location_name { get; set; }
    public string event_location_city { get; set; }
    public string event_location_state { get; set; }
    public string event_location_country { get; set; }
    public string event_acknowledged { get; set; }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:59:21.367

Add a viewmodel for your view, sample may look like. Also use this viewmodel in your action:

```
 public class EventListModel
    {
        public EventListModel()
        {
            EventList = new List<Event>();
        }

        public string FormId { get; set; }
        public string ProgramId { get; set; }
        public string FormName { get; set; }

        public IList<Event> EventList { get; set; }
    } 
```

# javascript - 使用原型访问局部变量

> ID：11041789
> 
> 赞同：0
> 
> 时间：2012-06-14T21:44:26.287
> 
> 标签：javascript

我有一个类，它有一个带有公共 setter/getter 函数的私有变量：

```
function Circle(rad) {
    var r = rad;

    this.radius = function(rad) {
        if(!arguments.length) return r;
        r = rad;
        return this;
    }
}

var shape = new Circle(10);
console.log( shape.radius() ); // 10
shape.r = 50;
console.log( shape.radius() ); // 10 
```

我怎样才能复制这个使用`Object.prototype`？或者，我什么时候想使用闭包而不是`Object.prototype`？这是我能想到的最接近的，但正如您所看到的，您可以直接更改属性。

```
function Circle(r) {
    this.r = r;
}

Circle.prototype.radius = function(r) {
    if(!arguments.length) return this.r;
    this.r = r;
    return this;
};

var shape = new Circle(10);
console.log( shape.radius() ); // 10
shape.r = 50;
console.log( shape.radius() ); // 50 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T21:48:08.610

如果您打算使用原型来存储对象的属性，则可以从任何引用该对象的代码中访问它们。做你想做的事是不可能的。

许多 JS 开发人员所做的只是用前导下划线命名私有属性，以便其他人知道不要乱用它，但除了*建议之外，它并没有给你任何真正的保护*

**使用基于闭包的方法的原因**

*   真正的私人变量，相信没有人会弄乱你的私人

**使用原型的原因**

*   使用更少的内存（每个实例都没有闭包）
*   更易于调试（属性在对象本身上可见）
*   允许猴子修补

读者：请编辑答案，说明您认为最佳解决方案的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:02:16.180

我觉得你的第一个圈子很奇怪。如果你像这样重写它：

```
 function Circle(rad) {
            var r = rad;

            this.radius = function(rad) {
                if(rad){r = rad;}
                return r;
            }
        } 
```

我认为它现在符合你的意思。r 是私有的，并且 radius 充当 getter/setter 函数。像这样设置 r：

```
shape.r = 50; 
```

没有意义，因为您的第一个 Circle 没有属性 r，它只有一个局部范围的变量 r。它应该引发某种错误。

I can't see a way of using prototype in your second version of Circle because the function in the prototype chain wouldn't have access to a variable created in the Circle object. And anyway, in your second version, r is a property of Circle not a privately scoped variable in the function body.

# ruby-on-rails - 如何为注册并转移到其帐户子域的用户进行自动登录

> ID：11041791
> 
> 赞同：0
> 
> 时间：2012-06-14T21:44:33.187
> 
> 标签：ruby-on-rails, ruby, session, subdomain

我正在构建一个多租户应用程序，其中帐户的范围在子域下。假设*acme.com*是我的应用程序，*Elmer*是我的用户，当 Elmer 在 acme.com 注册时，他会被转移到 elmer.acme.com。我想在 Elmer 注册后签到他，但我很难过。我正在使用cookies。这是我的登录方法：

```
 def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    current_user = user
  end 
```

这是我的 Users#create 方法的一部分，用户可以在其中登录。

```
if @user.save
  sign_in(@user)
  redirect_to root_url(subdomain: @user.subdomain)
end 
```

当 Elmer 仍在*acme.com 时，cookie 正在设置。*当 Elmer 被重定向到*elmer.acme.com*时，cookie 无效。

我可以`domain: :all`在 my中设置`session_store`，但这打破了要求。这将意味着 Elmer 将加入`elmer.acme.com`,`buggs.acme.com`和本质上`*.acme.com`。Elmer 的会话 cookie 应仅对*elmer.acme.com*和/或*acme.com*有效。

知道如何实现这一目标吗？我正在运行带有 Ruby 1.9.3 的 Rails 3.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:48:09.937

如果您要为您的用户创建/允许令牌登录，那么您可以：

1.  在用户模型上有一个令牌
2.  使用该令牌登录（重定向到特定 URL，或添加到您的身份验证系统以在存在 :token 时登录）

示例重定向代码：

```
if @user.save
  sign_in(@user)
  redirect_to root_url(user_id: @user.id, subdomain: @user.subdomain, token: @user.token)
end 
```

# c# - 一系列 httpWebRequests

> ID：11041793
> 
> 赞同：1
> 
> 时间：2012-06-14T21:44:44.663
> 
> 标签：c#, network-programming

我目前正在编写一个简单的应用程序，它对 Web 服务器执行一系列请求，但我遇到了一个奇怪的......功能？

我不需要请求的响应流，只需要状态码。因此，对于我的每条数据，我调用自己的“发送”方法：

```
 public static int Send(string uri)
    {
        HttpWebRequest request = null;
        HttpWebResponse response = null;
        try
        {
            request = (HttpWebRequest)WebRequest.Create(uri);
            response = (HttpWebResponse)request.GetResponse();
            if (response.StatusCode == HttpStatusCode.OK) return 0;
        }
        catch (Exception e)
        {
            if (request != null) request.Abort();
        }
        return -1;
    } 
```

工作正常？是的，除非我至少调用这个函数两次。连续第二次调用此类函数（具有相同的 uri）将始终导致超时。

现在，这很奇怪：如果我`request.Abort();`在返回零时添加（这里，当状态码为 200 时） - 一切总是正常的。

所以我的问题是——为什么？是某种框架限制，还是特定服务器上的某种反 DOS 保护（不幸的是，服务器对我来说是一个黑匣子）？或者，也许我只是不明白这一切是如何运作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:57:54.823

尝试处理网络响应，您可能会泄漏一些资源

```
public static int Send(string uri)
    {
        HttpWebRequest request = null;
        try
        {
            request = (HttpWebRequest)WebRequest.Create(uri);
            using (var response = (HttpWebResponse)request.GetResponse())
            {
               if (response.StatusCode == HttpStatusCode.OK) return 0;
            }
        }
        catch (Exception e)
        {
            if (request != null) request.Abort();
        }
        return -1;
    } 
```

还有一个默认连接数（我认为是 2，但您可以配置它）您可以同时连接到域，请参阅[这个 SO question](https://stackoverflow.com/questions/388908/improving-performance-of-multithreaded-httpwebrequests-in-net)。您的未公开回复可能已达到此限制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T21:48:23.443

首先，我会进行一系列更改，以便找到问题的根源：

*   **取出**那个 try..catch{} （你可能会吞下一个异常）
*   返回布尔值而不是数字

然后，您应该获得所需的异常信息。

此外，您应该使用“HEAD”作为您的方法，因为您只需要状态代码：

`request.Method = "HEAD";`

在这里阅读[差异](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)。

# javascript - 如何在 DIV 中更新新图像？

> ID：11041794
> 
> 赞同：0
> 
> 时间：2012-06-14T21:44:58.860
> 
> 标签：javascript, html

我是 HTML 和 Javascript 的新手。请有人可以帮助我解决以下问题。以下代码将在页面加载后正常显示 579。但是，我需要它在不刷新整个页面的情况下显示不同的数字。例如，如果触发了鼠标点击等事件，则会显示 795（图像）。我该怎么做才能使图像中的新数字显示在与以前相同的位置。非常感谢。

` DisplayNumImg(5,7,9);

```
<a href="#" onclick="DisplayNumImgChanged(7,9,5)" /a>

#child2-3
{
 position: absolute;
 width: 165px;
 height: 15px;
 left: 5px;
 top: 40px;
}

.thumb_child1
{
  float:right;
  margin:0px;
}

function DisplayNumImg( a, b, c)
{

  var s;

  if ( a == 5 ) {
     s = '<img class="thumb_child1" src="./images/5_blu.png"> ';
     document.write( s );
  }

  if ( a == 7 ) {
     s = '<img class="thumb_child1" src="./images/7_blu.png"> ';
     document.write( s );
  }

  if ( a == 9) {
     s = '<img class="thumb_child1" src="./images/9_blu.png"> ';
     document.write( s );
  }
}

function DisplayNumImgChanged( a,b,c )
{
   // please help me with code here or something that you think it would work. Thanks.
} 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:56:36.617

如果我理解你在做什么，这样的事情可能会起作用：

```
function DisplayNumImgChanged( a,b,c )
{
   var valueArray = [a, b, c];
   var imgElems = document.getElementsByClassName('thumb_child1');
   for (var i = 0 ; i < imgElems.length ; i++) {
       imgElems[i].src = './images/' +valueArray[i]+ '_blu.png';
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:50:11.090

好的，首先：我强烈建议你应该学习和使用 jQuery（然后，一旦你学会了，如果你仍然想提高开发人员的能力，回去学习它的工作原理，了解它的 Javascript 代码） . 它会让你的事情变得更容易。

在这种情况下，听起来您正在尝试做的是更新图像元素上的 src 属性。使用 jQuery，可以按如下方式完成：

```
$('.thumb_child1').attr('src', './images/9_blu.png'); 
```

在原始 JS 中，这将类似于：

```
var thumbs = document.getElementsByTagAndClassName(null, 'thumb_child1');
for (var i = 0; i < thumbs.length; i++) {
    thumbs[i].src = './images/9_blu.png';
} 
```

（虽然上面的代码是未经测试的，所以如果你有问题请回帖。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:48:03.967

1.  不要使用 document.write （永远！）
2.  将css放在样式标签中
3.  将javascript放在脚本标签中
4.  只在stackoverflow上发布实际代码（该代码永远不会工作）

# php - 重置函数 PHP

> ID：11041796
> 
> 赞同：0
> 
> 时间：2012-06-14T21:45:02.587
> 
> 标签：php, function

我有一个函数，我必须循环它几次，但我收到了无法重新声明函数（）的错误，是否无法循环这样的函数，或者它只是我的函数中的一个问题，

谢谢你的帮助。

```
while($i=0){
function gbFunc1($elem){ return (string)$elem['companyCode'][0]; }
    function gbFunc2($elem){ return (string)$elem['locationType'][0][0]->locationDescription->name; }
    function gbFunc3($elem){ return (string)$elem['vehicleRentalPrefType'][0]; }
    function gbFunc4($elem){ return (string)$elem['customerReferenceInfo'][0]->referenceQualifier; }
    function gbFunc5($elem){ return (string)$elem['customerReferenceInfo'][0]->referenceNumber; }
    function vFunc3($elem){ return (float)$elem['rateAmount'][0][1]->rateAmount; }

    $new = Fx::GroupBy($results_array, array('func:gbFunc1', 'func:gbFunc2', 'func:gbFunc3', 'func:gbFunc4', 'func:gbFunc5'), array(null, null, null, null, 'func:vFunc3',));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T21:50:58.973

你需要在循环之外声明你的函数，否则每次循环迭代它都会重新声明函数。

```
function gbFunc1($elem){ return (string)$elem['companyCode'][0]; }
function gbFunc2($elem){ return (string)$elem['locationType'][0][0]->locationDescription->name; }
function gbFunc3($elem){ return (string)$elem['vehicleRentalPrefType'][0]; }
function gbFunc4($elem){ return (string)$elem['customerReferenceInfo'][0]->referenceQualifier; }
function gbFunc5($elem){ return (string)$elem['customerReferenceInfo'][0]->referenceNumber; }
function vFunc3($elem){ return (float)$elem['rateAmount'][0][1]->rateAmount; }

while($i=0){
    $gbF1 = gbFunc1($elem);
    $gbF2 = gbFunc2($elem);
    $gbF3 = gbFunc3($elem);
    $gbF4 = gbFunc4($elem);
    $gbF5 = gbFunc5($elem);
    $vF3 = vFunc3($elem);

    $new = Fx::GroupBy($results_array, array($gbF1, $gbF2, $gbF3, $gbF4, $gbF5), array(null, null, null, null, $vF3,));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:49:35.377

这里有两个片段：

1)

```
for($i=0; $i<10; $i++)
{
    function squared($a)
    {
        return($a * $a);
    }
    $foo[$i] = squared($bar[$i]);
} 
```

2)

```
function squared($a)
{
    return($a * $a);
}

for($i=0; $i<10; $i++)
{
    $foo[$i] = squared($bar[$i]);
} 
```

片段 1 将生成“无法重新声明...”错误。因为，在每次迭代中，你都在重新声明你的 function `squared()`。

Snippet 2 只**声明**该`squared()`函数一次。

两个片段都调用了函数 10 次，区别在于它被声明了多少次——这只能发生一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T22:10:31.997

或者简单地说：

```
function groupBy($elem){
    return array('companyCode'=>$elem['companyCode'][0],
                  'locationType'=>$elem['locationType'][0][0]->locationDescription->name,
                  'vehicleRentalPrefType'=>$elem['vehicleRentalPrefType'][0],
                  'referenceQualifier'=>$elem['customerReferenceInfo'][0]->referenceQualifier,
                  'referenceNumber'=>$elem['customerReferenceInfo'][0]->referenceNumber,
                  'rateAmount'=>$elem['rateAmount'][0][1]->rateAmount);
}
$gb=groupBy($elem);
while($i=0){
    $new = Fx::GroupBy($results_array, array($gb['companyCode'],
                                             $gb['locationType'],
                                             $gb['vehicleRentalPrefType'],
                                             $gb['referenceQualifier'],
                                             $gb['referenceNumber'],
                                             $gb['rateAmount']), 
                                       array(null, null, null, null, $gb['rateAmount']));
} 
```

# tsql - TSQL CTE：如何避免循环遍历？

> ID：11041797
> 
> 赞同：12
> 
> 时间：2012-06-14T21:45:04.680
> 
> 标签：tsql, common-table-expression

我编写了一个非常简单的 CTE 表达式，它检索用户所属的所有组的列表。

规则是这样的，一个用户可以在多个组中，组可以嵌套，一个组可以是另一个组的成员，而且组可以是另一个组的成员，所以组A是组的成员B 组和 B 组也是 A 组的成员。

我的 CTE 是这样的，显然它会产生无限递归：

```
 ;WITH GetMembershipInfo(entityId) AS( -- entity can be a user or group
                SELECT k.ID as entityId FROM entities k WHERE k.id = @userId
                UNION ALL
                SELECT k.id FROM entities k 
                JOIN Xrelationships kc on kc.entityId = k.entityId
                JOIN GetMembershipInfo m on m.entityId = kc.ChildID
            ) 
```

我找不到一个简单的解决方案来回溯我已经录制的那些组。

我正在考虑在 CTE 中使用一个额外的 varchar 参数来记录我访问过的所有组的列表，但是使用 varchar 太粗糙了，不是吗？

有没有更好的办法？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-14T22:06:01.390

您需要在递归中累积一个标记字符串。在下面的示例中，我有一个从 A、B、C、D 到 A 的循环关系，并且我避免了带有标记字符串的循环：

```
DECLARE @MyTable TABLE(Parent CHAR(1), Child CHAR(1));

INSERT @MyTable VALUES('A', 'B');
INSERT @MyTable VALUES('B', 'C');
INSERT @MyTable VALUES('C', 'D');
INSERT @MyTable VALUES('D', 'A');

; WITH CTE (Parent, Child, Sentinel) AS (
    SELECT  Parent, Child, Sentinel = CAST(Parent AS VARCHAR(MAX))
    FROM    @MyTable
    WHERE   Parent = 'A'
    UNION ALL
    SELECT  CTE.Child, t.Child, Sentinel + '|' + CTE.Child
    FROM    CTE
    JOIN    @MyTable t ON t.Parent = CTE.Child
    WHERE   CHARINDEX(CTE.Child,Sentinel)=0
)
SELECT * FROM CTE; 
```

结果：

```
Parent Child Sentinel
------ ----- --------
A      B     A
B      C     A|B
C      D     A|B|C
D      A     A|B|C|D 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-27T20:29:40.503

代替哨兵字符串，使用哨兵表变量。无论圆有多少跳，函数都会捕获循环引用，nvarchar(max) 的最大长度没有问题，很容易针对不同的数据类型甚至多部分键进行修改，并且您可以将函数分配给检查约束。

```
CREATE FUNCTION [dbo].[AccountsCircular] (@AccountID UNIQUEIDENTIFIER)
RETURNS BIT 
AS
BEGIN
    DECLARE @NextAccountID UNIQUEIDENTIFIER = NULL;
    DECLARE @Sentinel TABLE
    (
        ID UNIQUEIDENTIFIER
    )
    INSERT INTO     @Sentinel
                ( [ID] )
    VALUES          ( @AccountID )
    SET @NextAccountID = @AccountID;

    WHILE @NextAccountID IS NOT NULL
    BEGIN
        SELECT  @NextAccountID = [ParentAccountID]
        FROM    [dbo].[Accounts]
        WHERE   [AccountID] = @NextAccountID;
        IF  EXISTS(SELECT 1 FROM @Sentinel WHERE ID = @NextAccountID)
            RETURN 1;
        INSERT INTO @Sentinel
                ( [ID] )
        VALUES      ( @NextAccountID )
    END
    RETURN 0;
END 
```

# asp.net - asp.net File.OpenText 无法读取上传的文件

> ID：11041799
> 
> 赞同：1
> 
> 时间：2012-06-14T21:45:10.920
> 
> 标签：asp.net, file-upload, windows-server-2008, file-permissions

我在 Windows Server 2008 上有一个 ASP.NET MVC 应用程序。

我需要上传一个文件，将其保存到 App_Data 文件夹下的存档文件夹中，然后打开并从中读取。我可以在我的本地机器上执行此操作，但不能在测试服务器上执行此操作。我怀疑这是权限问题，但权限似乎已经到位。相关的 C# 代码：

```
HttpPostedFileBase hpf = Request.Files[0];
var fileLength = hpf.ContentLength;
if (fileLength != 0)
{
    var archiveFolder = Server.MapPath("~/" + folder);
    var archiveFile = "import_" + DateTime.Now.ToString("yyyyMMdd_HHmm") + ".txt";
    var archivePath = Path.Combine(archiveFolder, archiveFile);
    hpf.SaveAs(archivePath);
} 
```

上面的代码很好地保存了文件。

```
StreamReader sr = File.OpenText(archivePath); 
```

上面的行抛出一个错误：

> 找不到文件“c:\windows\system32\inetsrv\usb01312012.txt”。

因此，尽管“archivePath”是 App_Data 下保存文件的路径，但 ASP.NET 会在 SYSTEM 文件夹中查找该文件。

除了对整个网站的 IIS_USRS 的完全控制之外，我已授予所有权限。为什么我无法访问该文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:03:29.613

已解决：从第二天开始，现在可以使用了！我猜IIS必须回收？感谢您的意见！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:08:00.893

确保您的站点运行正确版本的 asp.net（2.0 或 4.0）。

# modem - AT命令断开拨号TAP连接

> ID：11041800
> 
> 赞同：0
> 
> 时间：2012-06-14T21:45:14.350
> 
> 标签：modem, at-command, dial-up

在我们的项目中，我们拨打一个特定的号码，连接然后成功发送消息。发送完消息后，我们想通过发送 AT 命令来断开通话。

消息发送成功后，我们发送#EOT#CR，然后发送+++ath0。看来我们的拨号调制解调器，在我们发送 +++ath0 后并没有断开呼叫。当我们在运营商服务提供商网站上看到我们的使用情况时，它显示的通话时长约为 700 秒。在调试终端上，我们可以清楚地看到消息在不到 60 秒内发送成功。

请提供一些指导，为什么它不会断开呼叫。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:42:22.323

挂断（断开）拨号调制解调器的 AT 命令是：ATH

值：0 或 1

例如断开连接 将此字符串发送到调制解调器的端口：“ATH0;\r\n”;

该分号决定您是否能够发送其他 AT 命令。

# javascript - JavaScript Audio src - 它应该指向一个文件吗？

> ID：11041801
> 
> 赞同：0
> 
> 时间：2012-06-14T21:45:23.273
> 
> 标签：javascript, html5-audio, google-translate

我正在执行以下操作，但没有播放：

```
var url = "http://translate.google.com/translate_tts?q=Whatismyname";
audio_obj = new Audio(url); 
audio_obj.play(); 
```

如果我使用以 结尾的 URL `.mp3`，它可以正常播放。如果我使用 Google TTS 服务，则无法播放。谁能告诉我如何让它与谷歌 TTS 一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:10:36.880

要解决此问题，您需要关闭所有 Chrome 窗口，在命令提示符下使用以下命令打开 chrome 窗口。/path to your chrome.exe/Chrome --no-referrers & 这将允许 javascript 使用不以文件扩展名结尾的 url。

（来自user1401976的评论）

# c# - 如何获取列表框以禁止重复项？

> ID：11041802
> 
> 赞同：0
> 
> 时间：2012-06-14T21:45:27.993
> 
> 标签：c#, winforms

基本上我正在创建一个程序，该程序将信息从 xml 文件读取到 lisbox 并允许用户将列表框中的项目传输到另一个列表框。

但我想知道如何禁止将多个项目从一个列表框导入到另一个列表框。我想我可以通过某种方式来检查字符串是否已经存在于列表框中。

我想这样做的原因是因为用户可以单击 x 次以导入项目，这是不专业的。

任何帮助将不胜感激，谢谢。

```
private void button1_Click(object sender, EventArgs e)
{
    if (!listBox.Items.Exists) // Random Idea which doesnt work
    {
        listBox2.Items.Add(listBox1.Items[listBox1.SelectedIndex]);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T21:47:45.247

```
private void button1_Click(object sender, EventArgs e)
{
    if (!listBox.Items.Exists) // Random Idea which doesnt work
    {
    listBox2.Items.Add(listBox1.Items[listBox1.SelectedIndex]);
    }

} 
```

这实际上会起作用，但是您需要使用该`Contains`方法。但是，您可能错过了一个关键点。

您使用什么类型的项目来填充您的`ListBox`? `Exists`默认情况下，将调用`.Equals`which 使用*引用*相等。因此，如果您需要根据值进行过滤，则需要覆盖`.Equals`您的类型并更改语义。

例如：

```
class Foo 
{ 
    public string Name { get; set; }
    public Foo(string name)
    {
        Name = name;
    }
}

class Program
{
    static void Main( string[] args )
    {
        var x = new Foo("ed");
        var y = new Foo("ed");
        Console.WriteLine(x.Equals(y));  // prints "False"
    }       
} 
```

但是，如果我们重写`.Equals`以提供值类型语义......

```
class Foo 
{ 
    public string Name { get; set; }
    public Foo(string name)
    {
        Name = name;
    }

    public override bool Equals(object obj)
    {
        // error and type checking go here!
        return ((Foo)obj).Name == this.Name;
    }

    // should override GetHashCode as well
}

class Program
{
    static void Main( string[] args )
    {
        var x = new Foo("ed");
        var y = new Foo("ed");
        Console.WriteLine(x.Equals(y));  // prints "True"
        Console.Read();
    }       
} 
```

现在您的呼叫`if(!listBox.Items.Contains(item))`将按您的预期工作。但是，如果您希望它继续工作，您需要将该项目添加到两个列表框，而不仅仅是`listBox2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:54:45.860

这应该为你做...

```
private void button1_Click(object sender, EventArgs e)
    {
        if (!ListBox.Items.Contains(listBox1.SelectedItem)) // Random Idea which doesnt work
        {
        listBox2.Items.Add(listBox1.SelectedItem);
        }

    } 
```

# facebook - Facebook 搜索距离参数的单位是什么？

> ID：11041805
> 
> 赞同：2
> 
> 时间：2012-06-14T21:45:56.643
> 
> 标签：facebook, facebook-graph-api, search

Facebook 允许他们的搜索使用距离参数，例如

[https://graph.facebook.com/search?q=coffee&type=place¢er=37.76,-122.427&distance=1000](https://graph.facebook.com/search?q=coffee&type=place&center=37.76,-122.427&distance=1000)

他们没有说这是在什么单位。有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T21:53:27.030

距离以米为单位（来源：[Using Actions - Facebook Developers](http://developers.facebook.com/docs/opengraph/actions/)）：

> place - 发生操作的地方的页面 ID。您可以使用我们的 Graph API 搜索 Place ID。
> 
> *   指定类型=地点
> *   指定 q 作为查询参数
> *   可选距离（米）

[但正如这里](https://stackoverflow.com/questions/9501449/what-is-the-parameter-distance-when-using-search-fql)和[这里](https://stackoverflow.com/questions/5250368/facebook-fql-get-checkins-within-range/8118424#8118424)所提到的，这不是很准确，仅限于 50 公里。

# java - 使用哪个版本的 Java

> ID：11041808
> 
> 赞同：-1
> 
> 时间：2012-06-14T21:46:20.827
> 
> 标签：java, installation

我有一本名为“Killer Game Programming in Java”的书，我应该安装 J2SE 5.0，但 J2SE 已停产。在与 StackOverflow 和作者讨论后，我从 oracle.com 安装了更新版本，即 JSE 7u5。我下载了包含 JRE 的 JDK。所以现在我将 NetBeans 7.1.2 与 JDK 1.7 一起使用，但终端称它为 1.7.0_05。第一个程序说它不能在没有 main 方法的情况下运行。我安装的更新版本可能无法与本书中的程序一起使用，是否有任何原因？我应该尝试另一个推荐的版本吗？我在下面发布了完整的代码。没有编辑。它来自此链接*http://fivedots.coe.psu.ac.th/~ad/jg/ch1/ch1.pdf*任何错误都以斜体和粗体显示。

```
public class GamePanel extends JPanel implements Runnable
{
  private static final int PWIDTH = 500;   // size of panel
  private static final int PHEIGHT = 400;
private Thread animator;
private boolean running = false;
private boolean gameOver = false;
// more variables, explained later
       :
public GamePanel()
// for the animation
// stops the animation
// for game termination
{
  setBackground(***Color***.white);    // white background
  setPreferredSize( new ***Dimension***(PWIDTH, PHEIGHT));
  // create game components

}  // end of GamePanel()
public void addNotify()
/* Wait for the JPanel to be added to the
   JFrame/JApplet before starting. */
{
  ***super.addNotify();***   // creates the peer
  startGame();         // start the thread
}
private void startGame()
// initialise and start the thread
{
  if (animator == null || !running) {
    ***animator = new Thread(this);***
    animator.start();
  }
} // end of startGame()
public void stopGame()
// called by the user to stop execution
{  running = false;   }
public void run()
/* Repeatedly update, render, sleep */
{
  running = true;
  while(running) {
    gameUpdate();
    ***gameRender();***
    repaint();
try {
// game state is updated
// render to a buffer
// paint with the buffer
Thread.sleep(20);  // sleep a bit
      }
      catch(InterruptedException ex){}
    }
    System.exit(0);   // so enclosing JFrame/JApplet exits
  } // end of run()
  private void gameUpdate()
  { if (!gameOver)
      // update game state ...
  }
  // more methods, explained later...
}  // end of GamePanel class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:42:53.403

好的，我想我明白了。它不是完整的代码，只是一个示例或代码骨架。它不应该运行。它只是应该帮助理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:02:52.330

通常，您应该使用最新版本。但有时您可能会遇到问题，因为您的“旧”代码使用了现在保留的关键字。即使在使用 Java 7 时，您也可以将编译器设置为使用`-source 1.5`和`-target 1.5`. 但是，您更有可能遇到与 java 编译器版本不同的问题。

没有错误消息，但是您的描述对于解决实际问题来说太笼统了。

# vba - Excel VBA中的迭代

> ID：11041811
> 
> 赞同：0
> 
> 时间：2012-06-14T21:46:24.523
> 
> 标签：vba, excel, excel-2007

自从我在 Excel 上使用 VBA 已经有一段时间了。

我想按字母顺序排列工作表上每一列的内容。

这就是我所拥有的：

```
Range("A1").Select
    Range("A1:A19").Select
    ActiveWorkbook.Worksheets("Sheet2").Sort.SortFields.Clear
    ActiveWorkbook.Worksheets("Sheet2").Sort.SortFields.Add Key:=Range("A1"), _
        SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
    With ActiveWorkbook.Worksheets("Sheet2").Sort
        .SetRange Range("A1:A19")
        .Header = xlNo
        .MatchCase = False
        .Orientation = xlTopToBottom
        .SortMethod = xlPinYin
        .Apply
    End With
    Range("B1").Select
End Sub 
```

只要范围处于活动状态，我怎样才能使它成为一个持续运行的 for 循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T02:37:25.687

像这样？

```
Option Explicit

Sub sample()
    Dim i As Long

    With Sheets("Sheet1")
        For i = 1 To .UsedRange.Columns.Count
            .Columns(i).Sort Key1:=.Cells(1, i), Order1:=xlAscending, _
            Header:=xlGuess, OrderCustom:=1, MatchCase:=False, _
            Orientation:=xlTopToBottom, DataOption1:=xlSortNormal
        Next i
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:09:54.370

干得好。此代码假定您的数据以某种类型的表格格式排列。此外，它假设您希望对整个列进行排序（包括空白等）。如果您想使范围更具体，或者只是使用硬参考设置它，请调整我评论的代码。

```
Sub sortRange()

Dim wks As Worksheet
Dim loopRange As Range, sortRange As Range

Set wks = Worksheets("Sheet1")

With wks

    'can change the range to be looped, but if you do, only include 1 row of the range
    Set loopRange = Intersect(.UsedRange, .UsedRange.Rows(1))

    For Each cel In loopRange

        Set sortRange = Intersect(cel.EntireColumn, .UsedRange)

        With .Sort
            .SortFields.Clear
            .SortFields.Add Key:=sortRange
            .SetRange sortRange
            .Header = xlNo
            .MatchCase = False
            .Orientation = xlTopToBottom
            .SortMethod = xlPinYin
            .Apply
        End With

    Next

End With

End Sub 
```

# javascript - 将递增的值分配给 div。删除一个值后重新计算

> ID：11041814
> 
> 赞同：0
> 
> 时间：2012-06-14T21:46:47.370
> 
> 标签：javascript, jquery, html, arrays

我需要一个系统，我可以在其中分配一个值（data-* 或数组等），总是递增到一个选择的 div（来自许多 div）。如果我删除一个，我需要所有其他值“向上滑动”。

```
1.2.3.4.5 //remove 3
1.2\.  3.4 //dot represents a new index. 
```

然后我需要能够从随机 div 中获取（新）值。我正在考虑 data-* 属性，因此它绑定到一个 div 但是在添加和删除值时，一个数组会更容易重新计算（“向上滑动”）。

什么是最好的方法（最少的代码和最好的性能？）

对建议和问题持开放态度（如果您不明白，请询问）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:04:30.620

感谢@Fabricio，即使您没有回答我的问题，您也给了我一个很好的提示，帮助我解决了这个问题。

```
function removeA(arr){
    var what, a= arguments, L= a.length, ax;
    while(L> 1 && arr.length){
        what= a[--L];
        while((ax= arr.indexOf(what))!= -1){
            alert('id:'+ax);
            arr.splice(ax, 1);
        }
    }
    return arr;
}
var products = [];
$('div').click(function(){
    var item=$(this);
    var thisIndex = item.siblings().andSelf().index(item);
    if (item.hasClass('added')) {
    removeA(products, thisIndex);
    item.removeClass("added");
    return false;
}
    item.addClass("added");
    products.push(thisIndex);
    alert(products);
});
​ 
```

[http://jsfiddle.net/JPCnm/2/](http://jsfiddle.net/JPCnm/2/)

删除添加的项目时收到的 id 是我需要的数字。

# ruby-on-rails - 用于 GPS 坐标的 Rails 3 浮点数或小数

> ID：11041818
> 
> 赞同：13
> 
> 时间：2012-06-14T21:47:13.757
> 
> 标签：ruby-on-rails, floating-point, decimal-point

我需要将 GPS 坐标存储在数据库中。我听说浮点数不如小数准确。真的吗？如果是这样，有什么理由要使用花车？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-01T09:26:46.000

由于地球赤道周长约为*40000公里*，经度跨度为**360度**，因此赤道附近**1度**相当于**约110公里**。

因此：

*   0位精度：±110公里
*   1位精度：±11公里
*   2位精度：±1.1公里
*   3位精度：±110 m
*   4位精度：±11 m
*   5位精度：±1.1 m
*   6位精度：±11 cm
*   7位精度：±1.1 cm

* * *

但是，您越靠近两极，平行线的长度就越小。例如在*巴黎*附近，其纬度为 48 度，1 度相当于`cos(48) * 110 = 74 km`。

因此：

*   0位精度：±74公里
*   1 位精度：±7.4 km
*   2位精度：±0.74公里
*   3位精度：±74 m
*   4位精度：±7.4 m
*   5位精度：±0.74 m
*   6位精度：±7.4 cm
*   7位精度：±0.74 cm

因此，类型字段`DECIMAL(10,7)`足以满足您相当精确的需求。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-15T02:01:40.787

如果您想要更准确的 GPS 坐标，那么可以选择小数点。您可以使用以下迁移来创建它们：

```
create_table "models" do |t|
  t.decimal  "latitude", :precision => 15, :scale => 10, :default => 0.0
  t.decimal  "longitude", :precision => 15, :scale => 10, :default => 0.0
end 
```

人们使用浮点数的原因是它们通常对于大多数用例来说足够精确并且使用更少的空间来存储。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T01:49:21.040

如果您想要 100% 的小数精度，则乘以 10**n（其中 n 是您想要的精度），并存储为整数。

浮点对象使用本机架构的双精度浮点表示来表示不精确的实数。

看：

```
http://www.ruby-doc.org/core-1.9.3/Float.html 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-12T08:32:29.877

正如您在 Paul 的回答中看到的，这取决于您的用例。
浮点数提供大约 6 位十进制数字的精度。
±11 厘米对于一个地址来说是完全可以接受的。如果您要显示地址，则不太可能进行任何会导致舍入错误的算术运算。

# iphone - 存储少量 NSMutableArrays（使用 plist）？

> ID：11041822
> 
> 赞同：0
> 
> 时间：2012-06-14T21:47:39.220
> 
> 标签：iphone, objective-c, nsmutablearray, plist

我只需要在我的应用程序中存储 10 个数组，我可以不时更改它们。最好的方法是什么？

我一直在考虑写一个plist，这是个好主意吗？

10 个数组中的每一个都有 10 个对象（只是字符串）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:50:32.843

只要您不需要与非 Objective-C 代码库进行互操作（例如与 Windows 应用程序共享、将数据发送到服务器等），使用 plist 文件是一种很好的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:50:55.817

您可以创建一个 NSDictionary （或者在您的情况下是可变版本）并用您的数组填充它。然后你可以将它们写入磁盘

```
writeToFile:atomically: 
```

在开始时，您可以检查您的路径是否有效（意味着您的 dict 存在）并在代码中将其分配给您的 iVar，例如

```
initWithContentsOfFile: 
```

优点是底层表示是 NSDictionary（或 NSMutableDictionary）的 plist。所以你也可以去这里，因为数组中的对象符合`NSCoding`它们都知道如何对它们进行编码以写入磁盘。

# ruby-on-rails - 用于跟踪用户活动的 Gem

> ID：11041823
> 
> 赞同：12
> 
> 时间：2012-06-14T21:47:42.947
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

是否有一个很好的 gem 可以跟踪/记录网站上的用户活动？就像他们登录、注销或执行更改站点上某些内容的操作时一样（通常是非 GET 请求）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T22:12:08.777

是的，有。这是一个，纸迹。[https://github.com/airblade/paper_trail](https://github.com/airblade/paper_trail)

它的主要目的是对模型进行版本控制，但我认为它对您的用例也有好处，因为它记录了每个版本的制作者。

在 ruby​​ 工具箱中搜索更多宝石。以下是在这种情况下您应该检查的类别

[https://www.ruby-toolbox.com/categories/Active_Record_User_Stamping](https://www.ruby-toolbox.com/categories/Active_Record_User_Stamping)

[https://www.ruby-toolbox.com/categories/Active_Record_Versioning](https://www.ruby-toolbox.com/categories/Active_Record_Versioning)

也许 Userstamp 实际上更适合您的用例。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-19T19:16:29.060

这是一个跟进。我一直在使用一个名为 public_activity 的 gem。[https://github.com/pokonski/public_activity](https://github.com/pokonski/public_activity)。安装和设置非常简单。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-06T02:33:04.793

我简要调查了几个类似用途的 gem，包括： [PaperTrail](https://github.com/airblade/paper_trail)、[Vestal versions](https://github.com/laserlemon/vestal_versions)、[audited](https://github.com/collectiveidea/audited)、[Acts as versioned](https://github.com/technoweenie/acts_as_versioned)、[Userstamp](https://github.com/delynn/userstamp)，并发现：

*   [PaperTrail](https://github.com/airblade/paper_trail)、[Vestal 版本](https://github.com/laserlemon/vestal_versions)和[Acts as versioned](https://github.com/technoweenie/acts_as_versioned)都是非常强大的版本控制 gem。是的，你也可以用它来审计/跟踪用户的活动，但这不是很直接，因为它们是“版本控制工具”，但不是为了“审计目的”

*   [用户戳](https://github.com/delynn/userstamp)和[审核](https://github.com/collectiveidea/audited)仅用于审核目的。但[Userstamp](https://github.com/delynn/userstamp)适用于较旧的 Rails 版本（它是一个插件...... Rails3（或 3.1、3.2？）不再支持）

所以我认为' [audited](https://github.com/collectiveidea/audited) '是审计Rails3的用户活动目的（不考虑模型版本）的更好选择，这对我来说已经足够了。此外，它还支持关联和 ActiveRecord/MongoMapper。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-14T22:42:09.530

paper_trail 通常用于跟踪对象的变化。如果您想跟踪操作（如电影、登录、读书等），[pfeed](https://github.com/parolkar/pfeed) 是一个不错的选择

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-23T13:47:37.777

有一个名为 Action Tracker 的红宝石。我构建并使用了它，它应该完全满足您的需求（因为您使用 Rails 和 Devise）。

链接是[https://github.com/appprova/action_tracker](https://github.com/appprova/action_tracker)

我们的核心团队外部也有一些贡献（人们正在使用它）。欢迎您尝试发送反馈！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-25T11:14:20.303

这取决于您为什么要查找这些信息。[Papertrail](https://github.com/airblade/paper_trail)或类似工具可以轻松跟踪模型的变化，请参阅 Siwei Shen:s answer 以获得更好的信息。如果您正在研究如何根据用户操作制作公共提要，也可以使用 public_ativity 类型的gem [。](https://github.com/pokonski/public_activity)

再说一次，如果您不想进行增长黑客或分析其他用户流是什么。做一些自定义日志记录通常更容易。在模型旁边创建一个长文本字段，并在每次发生有趣的事情时添加一行。如果您不想偶尔处理一些关于用户如何使用服务以及网站更改如何影响长期使用的数据，那么效果很好。

有关此类方法的示例，请参见[https://github.com/holli/referer_tracking 。](https://github.com/holli/referer_tracking)

# mysql - MySQL 查询同一列两次

> ID：11041825
> 
> 赞同：2
> 
> 时间：2012-06-14T21:47:48.617
> 
> 标签：mysql, sql

我有两张桌子，一张有 ID 和 NAME

**表格1**

```
ID | NAME
1  | first
2  | second
3  | third 
```

以及带有 ID 和 PARENT ID 的 XREF 表

**表2**

```
ID | PARENT ID
1  | 0
2  | 1
3  | 2 
```

我想像这样检索 NAME 两次： NAME | 父母名字

如果可以深入三层但使用相同的 2 列表，如下所示：

**结果表**

```
NAME   | PARENT NAME
first  | NULL or EMPTY or this line the not showing at all
second | first
third  | second 
```

...那我也想弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:53:54.270

```
select t1.Name, t12.Name from
table1 t1 
inner join table2 t2 on t1.ID = t2.ID 
inner join table1 t12 on t2.ParentID = t12.ID 
```

这只会返回 2 行。如果您想拥有第一行（对于 ID=1），您只需要`outer join`改为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:59:51.783

考虑将`parentid`第一个表作为自引用关系而不是单独的表。

前任。：

**表格1**

```
ID  |  PARENTID  |  NAME
---------------------------
1      NULL         first
2      1            second
3      2            third 
```

这样，您只需要自行加入表，而不是通过第三张表。（*这是假设 table1 中的行只能有一个父级，而您的设计允许一行一次有多个父级*）

但是对于您的表结构，这将起作用：

```
SELECT
    a.name,
    c.name AS 'PARENT NAME'
FROM
    table1 a
LEFT JOIN
    table2 b ON a.id = b.id
LEFT JOIN
    table1 c ON b.parentid = c.id 
```

但是如果你在同一个表中创建了 parentid 引用 id，SQL 将被简化为：

```
SELECT
    a.name,
    b.name AS 'PARENT NAME'
FROM
    table1 a
LEFT JOIN
    table2 b ON a.parentid = b.id 
```

# iphone - 静态表视图

> ID：11041827
> 
> 赞同：0
> 
> 时间：2012-06-14T21:48:04.913
> 
> 标签：iphone, objective-c, nsdictionary, uitableview

我正在创建一个静态表格视图（必须与 iOS 4 兼容 - 所以我不能使用 iOS 5 的方法）。

我的方式是我有两个部分；第一个有一个单元格，第二个有两个单元格。我制作了两个数组，一个带有第一部分中唯一单元格的标题，第二个带有第二部分中两个单元格的标题。所以我的字典是这样的：

```
(NSDictionary *)  {
    First =     (
        Title1       < --- Array (1 item)
    );
    Second =     (
        "Title1",    < --- Array (2 items)
        Title2   
    );
} 
```

我遇到的问题是我需要使用`tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`. 所以我的问题是，如何使用 检索字典中的部分`NSInteger section`？我也必须在`tableView:cellForRowAtIndexPath`.

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:44:21.777

如果您不了解字典的工作原理，我建议您简化问题。为每个部分创建一个数组，然后在您的委托方法中使用 switch() 语句调用 [array count] 以获取行数等。对于部分计数，您仍然可以使用带有 [[dictionary allKeys] count] 的原始字典。

编辑：我刚刚看到@fzwo 在两条评论中推荐了同样的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:23:53.483

如前所述，您最好的选择是数组数组。为避免字典的复杂性，`NSArray`请为表数据和节标题创建两个 ivars。

```
// in viewDidLoad

tableData = [NSArray arrayWithObjects:
   [NSArray arrayWithObjects:
      @"Row one title", 
      @"Row two title", 
      nil],
   [NSArray arrayWithObjects:
      @"Row one title", 
      @"Row two title", 
      @"Row three title", 
      nil],
   nil]; 
sectionTitles = [NSArray arrayWithObjects:
   @"Section one title",
   @"Section two title", 
   nil]; 

// in numberOfSections: 
return tableData.count;

// in numberOfRowsInSection:
return [[tableData objectAtIndex:section] count];

// in titleForHeaderInSection:
return [sectionTitles objectAtIndex:section];

// in cellForRowAtIndexPath:
...
cell.textLabel.text = [[tableData objectAtIndex:indexPath.section]
                       objectAtIndex:indexPath.row]; 
```

如果您需要更多可用于单元格的数据，您可以使用其他对象而不是行标题。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-14T21:52:39.930

要获取部分中的行数，您可以使用以下命令：

```
tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSString *key = [[dictionary allKeys] objectAtIndex: section];
    return [[dictionary objectForKey:key] count];
} 
```

并获取单元格值：

```
tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *key = [[dictionary allKeys] objectAtIndex: indexPath.section];
    NSArray *values = [dictionary objectForKey:key];
    NSString *value = [values objectAtIndex: indexPath.row];

    // code to create a cell

    return cell;
} 
```

# c# - 如何在 ANTLR 中捕获字符串中的空格？

> ID：11041830
> 
> 赞同：1
> 
> 时间：2012-06-14T21:48:14.537
> 
> 标签：c#, antlr, whitespace

这应该很简单，但我正在努力解决它。

我正在尝试获取带引号的字符串，包括字符串中的空格（空格和制表符），并将值记录在 CSharp 字符串中。但是，我也想忽略引用字符串之外包含的相同空格（通过词法分析器）。我包含了典型的 WS 词法分析器规则，但是 WS 规则会在我需要时取出空格（当它在带引号的字符串中时）。如果我从 WS 规则中删除 {channel=HIDDEN}，我会丢失所有其他空格，并且必须在令牌之间的任何地方手动添加 WS。任何帮助将不胜感激！这是我的语法：

```
program returns [KeyValuePair<string, string> kvp]
    :
      ident=IDENT {kvp.Key = ident.Text;}
      '='
      quote=quoted_ident {kvp.Value = quote.ret;}
    ;

quoted_ident returns [string ret]
    :
      '"'
      (
        (ident=IDENT|ident=DOUBLE) {$ret += ident.Text;}
        |
        ws=WS {$ret += ws.Text;}
      )+
      '"'
    ;

WS :
    (
      ' '
      |
      '\t'
    )
    { $channel = HIDDEN; }
    ;

fragment DIGIT: '0'..'9';
fragment LETTER: ('a'..'z' | 'A'..'Z');
fragment DOT:'.';
DOUBLE : ((DIGIT)+(DOT(DIGIT)+)?)|(DOT(DIGIT)+);
IDENT : (LETTER|DIGIT|DOT|':'|'\''|'/'|'\\'|'_'|'@'|';'|'?'|'-'|'#'|'$'|'%'|'^'|'&'|'*')+; 
```

例子：

输入：'名称=“我的名字”'

kvp.Value '我的名字'的期望值

实际值“我的名字”

我想忽略引号外的所有空格和制表符，但在引号内捕获它们。

# ruby - 如何在 Ruby 中找到给定时间段内一组数字的平均值（尤其是在 csv 文件中）？

> ID：11041844
> 
> 赞同：-4
> 
> 时间：2012-06-14T21:49:43.280
> 
> 标签：ruby, csv

这是我在 CSV 文件中的一个简单示例：

```
"1","January 3, 2012"
"2","January 3, 2012"
"3","May 4, 2012"
"4","May 4, 2012"
"5","May 4, 2012"
"6","June 8, 2012"
"7","June 9, 2012"
"9","June 10, 2012"
"10","July 4, 2012"
"11","July 4, 2012"
"12","August 18, 2012" 
```

我希望我的输出具有每个日期的平均值（例如，2012 年 1 月 3 日的平均值是 1.5）。

我有 'crack' gem，所以我可以使用 'Time.parse' 语法，但我想知道是否有办法在不使用任何 gem 的情况下做到这一点（或者至少，只不过是 'crack' gem）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:58:58.183

我会构建一个数组散列，其中散列的键是日期字符串，值是值的数组。

然后你会得到一个看起来像的结构

```
{
  "January 3, 2012" => ["1", "2"],
  "May 4, 2012"     => ["3", "4", "5"],
  "June 8, 2012"    => ["6", "7"]
  ...
} 
```

然后，您将遍历散列中的每个键值对

```
output = {}
input.each do |key, value|
  output[key] = value.map(&:to_i).inject(0.0, :+) / value.length
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:58:41.583

好吧，简单的 CSV 解析+以日期作为键的哈希结构中的值的总和和计数就可以了。

但是这种“发布你的代码我会选择最好的”的态度在 SO 上并不受欢迎。

# backbone.js - 集合模型在 console.log 上为空

> ID：11041847
> 
> 赞同：0
> 
> 时间：2012-06-14T21:49:48.683
> 
> 标签：backbone.js, backbone-views

我在backbone.js 中的集合有问题，我做错了什么。这是我的模特

```
var Point = Backbone.Model.extend({
    defaults: {
        x: 0.0,
        y: 0.0,
        z: 0.0,
    },

    validate: function(attrs) {
        if(!isNumber(attrs.x) || !isNumber(attrs.y) || !isNumber(attrs.z))
            return "Discovered NaN point";
        else return null;
    },
}); 
```

我的收藏：

```
var TrackCollection = Backbone.Collection.extend({
    model: Point,
}); 
```

和观点：

```
var TrackView = Backbone.View.extend({
    initialize: function() {
        _bind('all', this.render, this);
    },

    render: function() {
        console.log(this.collection.models);
        return this
    },        
}); 
```

在我的家庭视图中，我这样做：

```
var c = new TrackCollection();
c.add({ x: 1, y: 1, z: 1});
c.add({ x: 1, y: 1, z: 1});
c.add({ x: 1, y: 1, z: 1});
var v = new TrackView({
    collection: c,
});
v.render(); 
```

为什么是 console.log(this.collection.models); 在渲染方法中返回一个空数组？相反，如果我将其更改为 console.log(this.collection); 它返回我的集合对象..

编辑这里的主页视图

```
window.HomeView = Backbone.View.extend({

    initialize: function() {
    },

    events: {
        "click #makeIT": "makeIT",
    },

    render: function() {
        $(this.el).html(this.template());
        return this;
    },

    makeIT: function(e) {

        var c = new TrackCollection();
        c.add({ x: 1, y: 1, z: 1});
        c.add({ x: 1, y: 1, z: 1});
        c.add({ x: 1, y: 1, z: 1});

        var v = new TrackView({
            collection: c
        });

        v.render();
    }

}); 
```

如果我复制 makeIT 内容并将其放在模型和集合所在的同一文件中，则它可以正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:07:31.750

您的代码中似乎有一些语法错误，因为您缺少 . 对于下划线绑定方法（_.bind），您的模型视图和集合中有额外的逗号。

那就是说它似乎对我有用，这是您代码的快速[jsfiddle](http://jsfiddle.net/feekn/)（我将日志切换为警报）。

# social-networking - 为社交网络模拟一个名为 slope-one 的推荐系统算法

> ID：11041849
> 
> 赞同：1
> 
> 时间：2012-06-14T21:49:58.787
> 
> 标签：social-networking, simulation

我应该选择一个推荐系统算法并在社交网络领域进行模拟。我能找到它的代码的唯一算法是斜率一。我有两个问题：

1.  这个算法适合社交网络吗？如果答案是否定的，请您介绍一下其他有用的算法吗？

2.  我不知道，我该如何进行这个模拟？我该怎么办？& 它有什么要求？

任何指南都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:55:41.727

## **1.**

Slope One 是一个非常简单的，但是，是的，你可能会使用它。Facebook 将 EdgeRank 用于新闻源。

## **2.**

根据您的评论，您对语言、框架等的要求/偏好是什么？如果您愿意，如果您愿意原谅双关语，*建议*，我建议您使用 ASP.Net MVC 3 web 项目。

设置数据将是设置一个`"Person"`或`"Friend"`类的问题（这是假设您想要***朋友***推荐——您可以使用组、页面、应用程序等轻松地做到这一点——您的选择）。然后，您将创建该类的几个（越多越好）实例，具有随机名称、属性等。谷歌搜索随机生成器 - 我相信您会找到一些东西。或者自己编写代码。如果您不能做到其中任何一个，请在此处给我回信，我将为此编写一些代码。

然后，您将设置*网络*的小规模表示。也就是说，定义你的“人”之间的关系。有几种方法可以做到这一点，但在您的场景中，您可能会为每个`Person`对象提供一个`"Friends"`属性，该属性包含对其他`Person`对象的引用。

我将把算法实现留给你更多的事情（因为这是一个学术项目，我必须让你学习，对吗？），但这里有一些基础工作可以帮助你入门：

使用您向我展示的实现，您可以像这样设置一个类：

```
public static class Rating
{
    public static double RatingBetween(Person a, Person b)
    {
        double rating = 0;
        foreach (Person friend in a.Friends)
        {
            if(b.Friends.Contains(friend))
            {
                rating ++;
            }
        }
    }
} 
```

这是一个非常简单的例子，但基本上它是这样工作的：对于人 a 的每个朋友，如果人 b 也有这个朋友，那么人 a 和 b 之间的评分会好一点。您需要为此添加其他场景（例如，如果朋友 ​​a 和朋友 b 住在同一个城市，您可能会添加 5 个评分，而对于相同的学校、工作等，您可能会添加 5 个评分。然后您可以设置字典（或给定人员的评分，如下所示：

```
Dictionary<Person, double> FriendDict = new Dictionary<Person, double>();
foreach (Person a in personYouAreRecommendingFriendsFor.Friends)
{
    FriendDict.Add(a,Rating.RatingBetween(personYouAreRecommendingFriendsFor, a))
} 
```

所以现在你已经设置了一个评级表，你可以使用你找到的实现来完成剩下的工作。

如果您在前进的过程中需要更多的推动正确的方向，我很乐意提供帮助。只是在这里评论。

## **有用的参考资料**

*   [维基百科关于斜坡一的文章](http://en.wikipedia.org/wiki/Slope_One#Slope_one_collaborative_filtering_for_rated_resources)
*   [对免费社交网络 SDK 的一些帮助](https://stackoverflow.com/questions/2575488/open-source-free-social-networking-sdk)——这可能有助于定义您的网络、对象、模式等。

祝你好运！

# jquery - 功能完成后打开 Colorbox

> ID：11041852
> 
> 赞同：0
> 
> 时间：2012-06-14T21:50:23.217
> 
> 标签：jquery, colorbox

在我现有的功能完成后，我试图打开一个彩盒灯箱。

在我的 div 显示然后隐藏后，我想要一个灯箱窗口打开，但我真的很难让它打开。任何人都可以对此有所了解。

这是相关的代码

```
$(".bookingResult").addClass("classroomExpertError");
$(".bookingResult").html(obj.Message);
$('.bookingResult').show('slow', function()                     {
  setTimeout(function()
   {$('.bookingResult').hide('slow');
    }, 3000); // <-- time in milliseconds 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:59:04.667

[`.show()`](http://api.jquery.com/show/)并且[`.hide()`](http://api.jquery.com/hide/)都接受回调，它们将在效果完成后触发。[Colorbox](http://www.jacklmoore.com/colorbox)可以根据命令打开。

```
$('.bookingResult').show('slow', function() {
    $(this).hide('slow', function() {
        $.colorbox({href:"thankyou.html"});
    });
}); 
```

但这可能不是您想要的，因为回调会为每个匹配的元素触发一次。

# java - SWT 浏览器 - 检测 Ajax 调用

> ID：11041859
> 
> 赞同：0
> 
> 时间：2012-06-14T21:50:43.407
> 
> 标签：java, ajax, browser, swt

我正在使用 SWT.Browser (java) 并且想知道是否有办法让一个监听器在发出、接收 ajax 请求等时听到。

有没有办法在他们进来之前拦截并操纵他们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:11:52.723

不，没有公开可用的 API。

但是，您可以为 SWT 编写[APP](http://msdn.microsoft.com/en-us/library/ie/aa767916%28v=vs.85%29.aspx)插件，尽管它仅适用于 IE。或者对于 Firefox 或 Webkit 或 IE，您可以编写一个本地代理，如[fiddler](http://msdn.microsoft.com/en-us/library/bb250446.aspx)。

# windows - 在 Jenkins 的大型 Grails 项目上运行编译时出错：GC 开销限制

> ID：11041861
> 
> 赞同：3
> 
> 时间：2012-06-14T21:50:49.147
> 
> 标签：windows, grails, jenkins

我开始在这件事上束手无策了。

我让 Jenkins 在 Windows Server 2008 RC 2 机器上的 tomcat 容器中运行。我们这里有一个大型 Grails 项目正在使用一些依赖的内部插件（大约 10 个）。该过程的一部分是运行

```
grails compile 
```

在项目上（使用 jenkins 中的 Grails 插件，Grails 版本 1.3.7）

这项工作开始得很好，但是在这一步中出现了以下错误：

```
[groovyc] Compiling 103 source files to D:\jenkins\jobs\my-build-job\workspace\my-application\target\classes
Compilation error: java.lang.OutOfMemoryError: GC overhead limit exceeded 
```

我在 Grails 插件的“参数”表单字段中向这个特定的构建步骤添加参数以及将 java 参数添加到 tomcat servlet 容器（通常互联网推荐的 java 选择这个 GC 开销错误）时，都没有成功。这是 servlet 的 wrapper.conf 的一部分：

```
wrapper.java.additional.8=-Xmx2048m
wrapper.java.additional.9=-Xss256k
wrapper.java.additional.10=-Xms1024m
wrapper.java.additional.11=-XX:+UseParallelGC
wrapper.java.additional.12=-XX:-UseGCOverheadLimit
wrapper.java.additional.13=-XX:MaxPermSize=256m 
```

有没有人有任何想法/建议？我觉得我已经尝试了一切来为这项工作提供足够的内存（这个盒子有 12 gigs 的 RAM，我的意思是正如你在上面看到的那样，我将堆空间从 256 之类的更小的东西提高了，并且没有 PermGen 调整以使用 2gigs 和256M 的 PermGen！它不应该抱怨资源限制！）

请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T21:17:44.130

好吧，对于那些偶然发现这个问题的人，我有一个解决方案。

windows 中的 JAVA_OPTS 似乎是一个很难设置和保持设置的野兽，但是使用 Jenkins 中的 EnvInject 插件，我能够使用以下内容： [https ://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)

在新添加的“构建环境”步骤下，

选中标有“将环境变量注入构建过程”的框

并将其添加到“属性内容”文本框中：

```
JAVA_OPTS=-Xmx1024m -XX:MaxPermSize=256m 
```

没有报价！

正如我之前所说，我之前通过将系统范围的 JAVA_OPTS 变量设置为 windows 来解决这个问题（这对于我们服务器的需求来说太过分了），所以可能有不止几种方法可以在这里完成工作。

希望这对其他沮丧的 Windows/Jenkins/Grails 用户有所帮助！

# python - Python 文件路径

> ID：11041862
> 
> 赞同：1
> 
> 时间：2012-06-14T21:50:50.963
> 
> 标签：python, escaping

我正在尝试构建一个简单的脚本，它必须能够浏览目录、子目录和子子目录，而我以前从未这样做过。

为什么这段代码会生成它所做的输出——带有双反斜杠？另外，考虑到我的目标，我的代码应该做什么？

我相信我的目标是保持单反斜杠，但我不确定。我所知道的是，我将在同一目录中的不同级别之间弹跳——进入子目录和子子目录。尝试进一步处理该程序，我相信我在尝试查找文件路径包含双反斜杠的文件时遇到了错误。

```
import os, shutil, time

mdir = 'C:\\Users\Dev\Desktop\Python_Test'
dirlist = [(mdir + '\\' + i) for i in os.listdir(mdir) if os.path.isdir(os.path.join(mdir, i))]

print dirlist 
```

输出：

```
['C:\\Users\\Dev\\Desktop\\Python_Test\\Dir 1',
 'C:\\Users\\Dev\\Desktop\\Python_Test\\Dir 2'] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T21:53:48.527

双反斜杠在那里是因为您正在调用`print`一个列表，该列表打印`repr`列表元素的 ：

```
>>> l = ['C:\\Users\\Dev\\Desktop\\Python_Test\\Dir 1',
...      'C:\\Users\\Dev\\Desktop\\Python_Test\\Dir 2']
>>> for x in l:
...     print(repr(x))
...     
'C:\\Users\\Dev\\Desktop\\Python_Test\\Dir 1'
'C:\\Users\\Dev\\Desktop\\Python_Test\\Dir 2' 
```

`repr`还给你字符串周围的引号。这个想法是`repr`（对于像这样的简单类型`str`）的输出可以直接反馈给 Python 解释器。要打印不带引号和单个反斜杠，请分别打印元素：

```
>>> for x in l:
...     print(x)
...     
C:\Users\Dev\Desktop\Python_Test\Dir 1
C:\Users\Dev\Desktop\Python_Test\Dir 2 
```

与外界交流时使用此表格。

顺便说一句，对于遍历目录层次结构，使用[`os.walk`](http://docs.python.org/library/os.html#os.walk)和构建路径，使用[`os.path.join`](http://docs.python.org/library/os.path.html#os.path.join).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:57:42.660

使用 os.walk 内在函数。这很棒！

```
>>> import os
>>> os.walk('.')
<generator object walk at 0x163891E8>
>>> listWalk = []
>>> for items in os.walk('.'):
...     listWalk.append(items)
...     
>>> listWalk 
```

listWalk 现在将包含一个由 3 部分组成的项目列表：[thisDir, listDirs, listFiles]

1.  thisDir 是 walk 正在检查的目录的字符串
2.  listDirs 是 thisDir 内的目录名称字符串列表
3.  listFiles 是 thisDir 中文件名字符串的列表

您可以迭代或处理返回的列表，然后取出您需要的任何内容。

# c++ - C++ 使用单个输入字节文件的不同部分在堆栈上实例化成员类

> ID：11041871
> 
> 赞同：1
> 
> 时间：2012-06-14T21:51:48.453
> 
> 标签：c++, optimization, file-io, constructor, initialization

我有一个有几个成员类作为属性的类。类的构造函数将采用字节文件的文件名。不同的成员类在其构造函数中使用文件的后续部分，我们称它们为 A、B 和 C 部分。文件的大小会有所不同。

使用堆我会做这样的事情：

```
class myClass
{

    myClass(char *filename)
    {

        std::ifstream inputFile(filename, std::ios::binary);

        m_Class1 = new ClassA(inputFile); // read part A
        m_Class2 = new ClassB(inputFile); // read part B
        m_Class3 = new ClassC(inputFile); // read part C

        inputFile.close();
    }
} 
```

我想在堆栈而不是堆上执行此操作。

我想到了初始化列表，但为此我不得不浪费时间重新读取输入文件的冗余部分以获取每个成员类所需的部分。

我不知道这是否只是一种糟糕的方法（很可能），但是有没有人对有效地完成这个有任何建议？或者对另一种组织方式的建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T22:03:09.913

```
class myClass {
    myClass(char *filename) : inputFile(filename, std::ios::binary),
                              m_Class1(inputFile),
                              m_Class2(inputFile),
                              m_Class3(inputFile) {
        inputFile.close();
    }

private:
    std::ifstream inputFile;
    ClassA m_Class1;
    ClassA m_Class2;
    ClassA m_Class3;

}; 
```

请注意，成员的声明顺序很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:01:13.107

您可以使用以下，只是稍微改变了语法。它不是“在堆栈上”，但它不使用堆，所以可能对你有好处。

```
class myClass
{
public: // note: public constructor to make the class usable
    myClass(char *filename)
    {
        std::ifstream inputFile(filename, std::ios::binary);

        m_Class1 = ClassA(inputFile); // read part A
        m_Class2 = ClassB(inputFile); // read part B
        m_Class3 = ClassC(inputFile); // read part C

        inputFile.close(); // note: no need to close; C++ does this automatically
    }
private:
    ClassA m_Class1; // note: not a pointer
    ClassB m_Class2;
    ClassC m_Class3;
} 
```

这需要`ClassA`,`B`和`C`具有默认的构造函数和赋值运算符（默认的或您编码的）。

# navigation - Twitter Bootstrap：我在哪里可以找到文档中的 subnav nav-pills？

> ID：11041876
> 
> 赞同：1
> 
> 时间：2012-06-14T21:52:22.173
> 
> 标签：navigation, twitter-bootstrap

我刚开始使用 Twitter Bootstrap [http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html) ，我正在寻找标题下方的灰色/蓝色导航栏。

它不在文档中，我只是无法通过谷歌找到任何东西。这正是我的主要导航所需要的。

我希望有人能帮助我，我开始发疯了，因为我找不到任何关于这个的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:57:29.817

您正在寻找滚动间谍[http://twitter.github.com/bootstrap/javascript.html#scrollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)

对于样式，您应该查看[http://twitter.github.com/bootstrap/less.html#variables](http://twitter.github.com/bootstrap/less.html#variables) 向下滚动广告，您将看到**Components/Navbar**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:17:49.697

@Mexxer 检查这个： http: [//twitter.github.com/bootstrap/assets/css/docs.css](http://twitter.github.com/bootstrap/assets/css/docs.css) 你可以找到 .subnav 类。部分 /* 子导航 */. 问候

# apache-flex - Flex Combobox 和 DateField 奇怪的错误

> ID：11041879
> 
> 赞同：0
> 
> 时间：2012-06-14T21:52:51.873
> 
> 标签：apache-flex, combobox, datefield

使用 Flex 4.1 构建 16076

我有一个 mxml 文件，其中包含一个文本输入、一个按钮、一个日期字段和一个组合框。

组合框的数据提供者是一个数组集合。

当 flex 应用程序启动时，组合框的下拉列表显示得很好。单击日期字段上的日历图标时，也会显示日历。

现在，当我单击显示弹出窗口的按钮并从那里获取数据并将其放回文本输入、组合框（选择项目）和日期字段时，组合框和日期字段分别不显示下拉列表和日历.

我没有更改组合框上数据源上的数据。仅根据从弹出窗口中检索到的内容来选择项目。

这个真的难倒我。似乎日期字段和组合框不响应鼠标事件。当焦点在组合框上时，我仍然可以使用键盘更改显示的值，但下拉列表仍然不显示。

有没有人遇到过这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-08T22:27:16.297

解决此问题的方法是将 FlashPlayer 更新到 Chrome 中的最新版本。

# c# - 允许客户端代理覆盖默认行为的模式

> ID：11041880
> 
> 赞同：2
> 
> 时间：2012-06-14T21:53:00.120
> 
> 标签：c#, delegates

我有一个 C# 类，它具有一些我想允许该类的客户端覆盖的功能。具体来说，我想要以下内容：

1.  如果客户端什么都不做，他们会得到我们的默认行为
2.  客户端可以覆盖该行为并导致我们的默认行为*不*被调用。
3.  客户端可以覆盖该行为并导致我们的默认行为被称为前/后/中间操作。

我目前的想法是：

1.  如果客户想要覆盖该行为，则公开一个客户将订阅的事件。
2.  公开具有默认行为的方法（与事件的签名匹配）： `void DefaultBehavior()`
3.  每当我们尝试触发事件时，如果委托为空，我们调用我们的默认行为方法，否则，我们调用事件的委托：

    ```
    if (eventDelegate == null)
        DefaultBehavior();
    else
        eventDelegate(); 
    ```

当客户端覆盖行为时，他们可以选择调用我们的 DefaultBehavior 方法来获得所需的行为。

从客户的角度来看，您认为这种方法是否足够直观？或者您能提出任何可能更好的替代方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T21:56:39.833

好吧，如果您希望您的客户端覆盖某些行为，为什么不创建一个虚函数，让客户端实际`override`使用它呢？

这是实现这一点的直接方法。无需重新发明轮子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T22:00:56.060

如果我理解你的问题，`client`你的意思是一些代码调用你的类，而不是覆盖你的类，假设你需要这样做（如果你可以这样做，我同意@zmbq 的回答）：

你可以让你的方法有 2 个重载，一个没有参数，另一个接收一个`Action`对象

```
public void methodName()
public void methodName(Action delegate) 
```

然后在你的身体中，`methodName()`你会用 defaultAction 调用另一个方法

```
public void methodName()
{
  methodName(DefaultBehavior);
} 
```

最后在第二种方法中，您只需调用作为参数传递的委托，而不关心它是否是默认值

```
public void methodName(Action delegate)
{
 delegate();
} 
```

您班级的客户将看到这两个重载，并决定是使用默认行为还是提供自定义行为

**编辑：** 好的，最后一次尝试:)，根据您的最后评论，您是否可以拥有一个实例字段

```
private Action behaviorDelegate = DefaultBehavior; 
```

您可以在班级中的任何地方分配`behaviorDelegate`不同的行为，然后您不需要声明，因为无论是否为默认行为，`if`该行为将始终处于可变状态。`delegate`这不是一个很大的变化，但对我来说似乎更干净。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T19:48:03.730

你也可以（也许？）在没有事件的情况下做到这一点：

**宣言：**

```
public class DemoClass
{
    public delegate string MyDelegate(string testValue);

    public static MyDelegate DefaultBehavior
    {
        get
        {
            return testValue => 
              { 
                 return String.Concat(testValue, 
                                      ", now with 99% more exclamation points!!!!!!!!"); 
              };
        }
    }

    public MyDelegate ModifyString = testValue => 
        { 
           return DemoClass.DefaultBehavior(testValue); 
        };
} 
```

**采用：**

```
// first, default:
DemoClass demoObject = new DemoClass();
Console.WriteLine(demoObject.ModifyString("My test string")); 

// now, pure "override":
demoObject.ModifyString = testVal => 
        { return String.Concat(testVal, ", this time with question marks????"); 
        };
Console.WriteLine(demoObject.ModifyString("Second test string"));

// finally, define a delegate that overrides and calls default:
DemoClass.MyDelegate combined = testVal => 
        { return String.Concat(DemoClass.DefaultBehavior(testVal), 
                               ", now we're really tricky"); 
        };
demoObject.ModifyString = combined;
Console.WriteLine(demoObject.ModifyString("Third test string")); 
```

**输出：**

```
我的测试字符串，现在多了 99% 的感叹号！！！！！！！！！
第二个测试字符串，这次带问号？？？
第三个测试字符串，现在有 99% 以上的感叹号！！！！！！！！！，现在我们真的很棘手

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T22:12:18.977

只需使用虚拟方法：

```
public class BaseClass {
   public virtual void Something() {
      Console.WriteLine("base functionality");
   }
}

public class Sub1 : BaseClass {
   public override void Something() {
       // do whatever you want here
       base.Something();  // don't call it at all if you like
       // do whatever you want here
   }
} 
```

# heroku - 将 rakefile 设置限制为特定环境

> ID：11041883
> 
> 赞同：1
> 
> 时间：2012-06-14T21:53:08.973
> 
> 标签：heroku, cucumber, rake, asset-pipeline, production-environment

我有一个问题，我的 rake 文件如下所示：

```
require File.expand_path('../config/application', __FILE__)
require 'cucumber'
require "cucumber/rake/task"

Whois::Application.load_tasks

Cucumber::Rake::Task.new(:features) do |t|
  t.cucumber_opts = "features --format pretty"
end 
```

导入黄瓜的主要原因是使用CI运行测试。但是最近我遇到了一个问题。

当我部署到 heroku 并尝试运行`heroku run rake assets:precompile`时，我得到了：

```
rake aborted!
no such file to load -- cucumber 
```

据我了解，它找不到仅在测试环境中可用的*黄瓜。*

我如何告诉 rake，仅在测试环境中使用治疗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:23:17.827

你需要用类似的东西包装它；

```
if Rails.env.test? 
  require 'cucumber'
  require "cucumber/rake/task"
end 
```

# python - 有没有更好的方法来生成这个查找列表并展平 QuerySet？

> ID：11041886
> 
> 赞同：1
> 
> 时间：2012-06-14T21:53:44.440
> 
> 标签：python, django

我很好奇生成查询集样式查找列表，这就是我想出的。有一个更好的方法吗？

```
["%s__%s" % (f.name, b.name) \
     for f in Foo._meta._fields() \
     if isinstance(f, django.db.models.fields.related.ForeignKey)\
     for b in f.related.parent_model._meta._fields()] 
```

在实践中，我会做这样的事情，

```
fields = ["%s__%s" % (f.name, b.name) \
     for f in Foo._meta._fields() \
     if isinstance(f, django.db.models.fields.related.ForeignKey)\
     for b in f.related.parent_model._meta._fields()]

 return Foo.values_list(*fields) 
```

这将返回我的数据库的非规范化集合。我认为必须有更好的方法。不使用`_meta`and`_fields`属性的东西。或者只是[QuerySet](https://docs.djangoproject.com/en/1.4/ref/models/querysets/)对象的一部分，它将执行此操作。我只是找不到它。

我确实找到了[django-composition](https://github.com/daevaorn/django-composition)，但不确定它仅从 README 文件中的作用。

# sip - 这个 SIP 呼叫出了什么问题？RTP 建立前连续多条 NOTIFY 消息

> ID：11041892
> 
> 赞同：1
> 
> 时间：2012-06-14T21:54:19.337
> 
> 标签：sip, voip, notify, refer

长串 NOTIFY 消息发生在被叫号码应答之后。大约 20-30 秒后，503 发生，然后呼叫与音频连接良好。![wireshark voip 图的前半部分](../Images/303613492ad0278d55b57ec834e60fd2.png)![wireshark voip 图的后半部分](../Images/9ba5dc67ba6a9fc812139e727edbd49f.png)![在所有通知消息之后显示最后一个 rtp 的最后一位 wireshark voip 图](../Images/413a6b54b29e9234fa81172f68fe6eb6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:53:25.443

如果该跟踪是针对单个调用的，那将是一个非常复杂的跟踪。在花了一些时间查看它之后，我认为它不是一个单一的呼叫，而是其中混合了一些不同的呼叫。10.10.20.1 是一个背靠背用户代理 (B2BUA) 并且正在启动它的 on 调用以响应不同的事件，这一事实使情况变得复杂。

至于您关于 NOTIFY 请求的问题，它最初是由 UAC 在 10.10.10.3 生成的，作为似乎有人参与的转移的一部分。REFER 请求是传输的开始。为 REFER 事务创建隐式订阅，这是 NOTIFY 请求的一部分（参见[https://www.rfc-editor.org/rfc/rfc3515](https://www.rfc-editor.org/rfc/rfc3515)并参见[https://www.rfc-editor。 org/rfc/rfc4488](https://www.rfc-editor.org/rfc/rfc4488)处理抑制隐式事务）。

对于有人参与的转移，NOTIFY 请求允许呼叫支路端点指示转移已成功处理。在这种情况下，看起来 10.10.10.3 的用户代理在收到对其 NOTIFY 请求的响应之前并不乐意接受传输。这是不寻常的行为，因为通常 NOTIFY 请求只是为了通知代理不控制呼叫流的事件。一旦 10.10.10.3 收到对其 NOTIFY 请求的 503 响应，它最终开始向 10.10.20.4 发送 RTP。它不必关心响应是什么，因为 503 是一个错误条件，通常会导致等待它失败的任何东西。

# c++ - 用于编写大型图像文件的 C++ 实用程序

> ID：11041893
> 
> 赞同：4
> 
> 时间：2012-06-14T21:54:25.830
> 
> 标签：c++, image, large-files

我正在编写一些有限元分析代码，我们常用的故障排除工具之一是定义物理问题的大型矩阵的图形输出。然而，随着问题变得越来越大，我过去使用的工具（libpng、libharu pdf）开始花费极长的时间将图像写入文件。

我的问题：任何人都可以推荐一个高性能的 C++ 图像库，能够有效地以某种标准格式（例如 png、tiff 等）输出大图像吗？此外，要绘制的矩阵非常稀疏，这意味着大部分图像画布实际上是空的；因此，尽管图像的分辨率可能几乎是千兆像素，但每行最多只有 20-30 个像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:56:05.397

我会尝试[http://www.openexr.com/](http://www.openexr.com/) OpenEXR 带有一个用于读写的 SDK。I/O 永远不需要将整个位图保存在内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T04:57:10.683

[libvips](https://github.com/libvips/libvips)是一个古老的图像处理库，专门解决这个问题。

# iphone - Xcode：隐藏/保护最终 iOS 应用程序中的资源文件？

> ID：11041899
> 
> 赞同：6
> 
> 时间：2012-06-14T21:55:29.330
> 
> 标签：iphone, ios, objective-c, xcode, encryption

我计划为 iOS 开发一个应用程序，并希望使用 HTML5、CSS 和 Javascript。最终的应用程序应该使用 Xcode 和`UIWebView`.

我可以在最终应用中隐藏或保护我的 html 文件吗？我必须将文件放在 Xcode 中名为**“Supporting Files”的文件夹中。**所以大家购买app后可以通过解压.ipa文件来查看纯文件吧？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T02:40:15.517

有很多方法可以保护您的数据，具体取决于您希望保护的程度。对于仅针对临时黑客的最小保护，您可以使用字符串**混淆**算法对 HTML 内容进行混淆和去混淆，如`NSString`s. 这是一个[这样做的例子](http://mobiledevelopertips.com/cocoa/obfuscation-encryption-of-string-nsstring.html)。我没有使用那个特定的代码，但我也不是真的推荐*混淆*作为一种技术，除非数据真的不是很敏感。

更好的解决方案是**加密**HTML 内容，尽管这需要更多工作，并且可能涉及一些[导出控制问题](http://www.bis.doc.gov/licensing/do_i_needaneccn.html)，具体取决于您所在的位置以及您分发应用程序的位置。

对于加密，您有很多选择。

**1)** [这是一个开源实现，它提供了类似`NSUserDefaults`](http://maniacdev.com/2011/08/open-source-ios-keychain-wrapper-for-easily-securing-user-data-for-your-app/). 不过，我在该代码中看不到等效项`registerDefaults:`，因此您的应用程序**第**一次运行时，您可能必须从网络下载内容。但是，您可以将其加密并存储`PDKeychainBindings`为字符串值。在随后的运行中，您可以像这样提取存储的 HTML *“文件”*：

```
NSString* webPageContent = 
    [[PDKeychainBindings sharedKeychainBindings] valueForKey: @"index.html"]; 
```

**2)**这是另一个[提供 AES 加密包装器的开源项目](https://github.com/rnapier/RNCryptor)。您将在发布应用程序之前编写一些非生产代码，将 HTML 内容加密为捆绑资源的加密数据文件。当您的应用程序运行时，它会打开文件并将它们解密为`NSString`可以提供给您的对象`UIWebView`via `loadHTMLString: baseURL:`。

**3)**最后，[这是另一个使用底层**CommonCrypto** API 保护捆绑资源](http://aptogo.co.uk/2010/07/protecting-resources/)的示例。此示例使用自定义构建步骤来自动加密特定文件夹中的资源，如果受保护的 HTML 内容会经常更改，这将为您节省一些时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:02:26.320

您可以加密文件并在运行时解密它们，或者您不能将它们包含在您的包中，并有一个编译时脚本来读取它们并将它们转换为您的应用程序中的编码数据，您可以使用以下方法将其加载到您的 UIWebView 中：

```
- (void)loadData:(NSData *)data MIMEType:(NSString *)MIMEType textEncodingName:(NSString *)encodingName baseURL:(NSURL *)baseURL 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-06-14T21:58:47.760

您也可以在代码中创建所有 HTML 等，然后使用`UIWebView`'s

```
- (void)loadHTMLString:(NSString *)string baseURL:(NSURL *)baseURL 
```

手动将每个 HTML 字符串加载为纯文本。但是，我建议你不要这样做。如果有人真的想从你编译的源代码中分离出每个字符串，这对他来说是可能的（除非你真的做要求很高的事情）。

大多数用户根本不关心 ipa 文件中的内容。如果你能忍受 < 1% 的人检查它，不要太担心这个话题。

另一个方面也是可能的（即使这不是一个好主意）：你可以将你的 UIWebView 指向一个只有你和你的应用知道的秘密网站。这是**绝对不可取**的。

# javascript - 咖啡脚本。for/in 循环

> ID：11041907
> 
> 赞同：20
> 
> 时间：2012-06-14T21:56:33.550
> 
> 标签：javascript, coffeescript

任何人都知道是否有可能得到一个

**javascript for/in 循环**

来自咖啡脚本？

居然想写js函数

```
function logobject(o) {
   for (p in o)
     console.log(p + "=" + o[p])
} 
```

在咖啡脚本中。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-14T21:58:59.900

```
console.log "#{k}=#{v}" for k, v of o 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-06-14T21:58:59.720

这对于 CoffeeScript 新手来说可能有点混乱，但是`for..in`循环用于迭代数组，而`for..of`循环用于迭代对象。

```
logobject = (o) ->
  console.log key + "=" + value for key, value of o 
```

此外，要将其限制为对象的自身属性（通过 hasOwnProperty() 跳过继承的属性），可以添加“own”关键字：

```
for own key, value of o 
```

# java - Java守护进程一步一步

> ID：11041912
> 
> 赞同：0
> 
> 时间：2012-06-14T21:56:51.830
> 
> 标签：java, daemon

几乎完成了我的 java web 应用程序。一切正常。下一步是什么。我现在需要编写某种在后台运行的进程来处理一些常规维护并定期发送一些推文。从谷歌你可以发现 Daemon 是正确的方法。

谁能一步一步指导我如何做到这一点？1-编写程序。2-然后将其在linux环境中运行。（如果我以用户身份注销，则保持它运行。就像 Tomcat 一样）。3-如果可能，无论我是否登录，都可以在 linux 启动时启动它。一个好的教程的 URL 会有很大帮助。

坏消息是我的开发环境是我的 Windows 笔记本，而我的生产环境是 Ubunto（不确定我是否可以在 Windows 中测试守护进程线程）。

好消息是，我家的生产服务器距离我写这篇文章的地方 4 米：）

非常感谢您提前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T22:01:14.200

将这些东西放在您的Tomcat服务器中可能更容易 - 并且是跨平台的。查看[Quartz 调度程序](http://quartz-scheduler.org/)，它可以完成 cron 的工作以及更多功能，可以轻松集成到 Web 应用程序中，并允许您调用用 Java 编写的作业，而无需任何复杂的管道。作为一个额外的优势，这些作业可以像 Tomcat 中的任何其他 Web 应用程序一样进行部署。

# javascript - Azure 上带有 node.js 的 Websocket 服务器

> ID：11041913
> 
> 赞同：2
> 
> 时间：2012-06-14T21:57:05.360
> 
> 标签：javascript, node.js, azure, websocket

我正在尝试使用 Node.js 创建一个 websocket 服务器以在 Windows Azure 上运行。这应该很简单，但是我遇到了无法在任何地方找到解决方案的问题。

这是我的服务器端代码：

```
var ws = require('websocket.io')
    , http = require('http').createServer().listen(process.env.PORT)
    , server = ws.attach(http)

server.on('connection', function (socket) {
    socket.on('message', function () { });
    socket.on('close', function () { });
}); 
```

我怎么知道我需要连接哪个端口？我的客户代码是：

```
var ws = new WebSocket("ws://socketiopuge.azurewebsites.net");

ws.onopen = function () {
    alert("opened");
};

ws.onmessage = function(msg) {
    alert(msg);
};

ws.onclose = function () {
    alert("closed");
}; 
```

当我运行代码时，我得到一个 501 错误代码，并且触发了 onclode 事件。我相信问题是我需要在创建 WebSocket 时指定一个端口号。你们中的任何人都可以指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T23:25:11.600

关于您的问题“我如何知道我需要连接到哪个端口”，您需要创建一个输入端点并为其设置正确的端口。配置后，您将在代码中使用相同的端口进行绑定和使用。

这是关于[在 Windows Azure Web 和 Worker 角色上运行 socket.io的示例](http://nodeblog.cloudapp.net/running-socket-io-on-windows-azure-web-and-worker-roles)

如果您在 Windows Azure Web 角色中托管 socket.io，请禁用服务器上的 WebSockets 传输，因为 Windows Azure Web 角色在 IIS7 上运行，IIS7 尚不支持 Web 套接字。有了 Worker Role，您无需担心它，您可以直接使用 Web Sockets。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:58:33.723

如果您使用的是新的 Azure 网站，它们还不支持 websocket。通过 IIS 托管的所有网站也是如此——无论是否为 node.js。

您当前在 Azure 中支持 websocket 的唯一方法是使用辅助角色并提供您自己的 node.js 可执行文件。

# documentation - Symfony 1.4 模板组件的文档在哪里？

> ID：11041915
> 
> 赞同：0
> 
> 时间：2012-06-14T21:57:08.147
> 
> 标签：documentation, symfony-1.4, templating

我正在使用 Symfony 1.4 的一个旧组件，称为模板。我正在搜索文档（API 参考）。

我搜索，发现了一个组件模板的[例子](http://trac.symfony-project.org/browser/components/templating/trunk/lib/sfTemplateHelperJavascripts.php)。

这似乎是文档，但被[重定向到新的 2.0 版本](https://www.google.com.co/search?sugexp=chrome,mod=5&sourceid=chrome&ie=UTF-8&q=%22sfTemplateHelperJavascripts%20class%22)（结果 API | sfTemplateHelperJavascripts 类 | Symfony 模板）。

我不想使用 2.0 版或 Twig 模板。我正在维护一个旧的大型系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:20:26.233

Symfony 组件现在是 Symfony 2.0 的一部分，这就是它重定向到当前网站的原因。

无论如何，感谢 web.archive.org，你[仍然可以访问旧的 Symfony 组件网站](http://web.archive.org/web/20101004223616/http://components.symfony-project.org/templating/documentation)。并查看模板文档（api 等 ..）。

# git - 仅根目录中的 gitignore 文件类型

> ID：11041925
> 
> 赞同：3
> 
> 时间：2012-06-14T21:58:11.770
> 
> 标签：git, gitignore, glob

我试图只忽略存储库根目录中的所有`.log`文件类型（即`foo.log`）。

两者都`*.log`匹配`/*.log`根目录中该类型的所有文件，但它们也递归匹配（即`/foo/bar/baz.log`）

注意：我在 windows 上使用 git（git 扩展）

如何仅将存储库根目录中的所有文件与特定文件类型匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T07:31:49.830

这是 git 扩展的一个错误：

[https://github.com/gitextensions/gitextensions/issues/1040](https://github.com/gitextensions/gitextensions/issues/1040)

# c - 从 C 函数返回 FILE 指针时的奇怪行为

> ID：11041933
> 
> 赞同：3
> 
> 时间：2012-06-14T21:58:45.217
> 
> 标签：c, file-io

我正在查看一些旧的 C 代码（如下所列），以便在新项目中重新使用它，我意识到我已经遗漏了最终的 return 语句。奇怪的是该例程运行良好并且确实返回了正确的文件指针。谁能向我解释这是为什么？

```
 FILE* openforwrite(char *name, int binary)
 {
    //broken out from main to keep it tidy and allow multiple output files.
    FILE *file;
    //first see if it exists
    file = fopen(name,"r");
    if (file)
    { // it does, delete it
        fclose(file);
        if(remove(name)) bail("Output file already exists and cannot be deleted.");
    }
    //now lets re-create and open it for writing
    if (binary)
        file = fopen(name, "wb");
    else
        file = fopen(name, "w");

    //check it actually opened
    if (!file)
        bail("Error opening output file.");

    //and pass the pointer back
    return file; // <-- I had omitted this line initially but the routine still worked
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T22:12:06.623

调用的返回值`fopen`最终会将文件句柄放入通常用于返回值的寄存器中（例如，`eax`）。如果在函数退出之前没有改变该寄存器的值，它仍然可供调用者使用。例如，如果在函数`fopen`结束之前和之后还有一个函数调用，那么它很可能会覆盖`eax`寄存器并且肯定会失败。正如其他人所说，这是未定义的行为。尽管如此，这最初是一个非常令人费解的情况（而且相当有趣）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:04:17.800

它只是碰巧起作用了。编译器使用堆栈将参数传递给函数，并接收它们的返回值。它还在计算期间将堆栈用于局部变量和临时变量。当函数返回时，调用者查看堆栈中的特定位置以获取返回值。该值恰好包含文件指针值，因为这是您的函数计算的最后一个表达式。

在任何情况下，都不要假设这会再次以这种方式工作。

它可能由于多种原因而中断，包括不同的编译器版本、不同的优化，或者只是因为编译器随机决定给你上一课。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T22:04:16.273

问题是您调用了*未定义的行为*。它似乎可以工作，它可能会崩溃，并且在缓冲区溢出的情况下，它可以删除文件。

# php - 无法使用 get_user() 获取 user_id

> ID：11041943
> 
> 赞同：1
> 
> 时间：2012-06-14T21:59:34.780
> 
> 标签：php, facebook, facebook-php-sdk, codeigniter-2

我将 facebook php sdk 与 codeigniter 结合使用。我现在遇到的问题是我似乎无法通过 get_user() 获取 user_id，它总是返回 0。这是我的代码：

```
<?php

class Facebook_model extends CI_Model {

   public function __construct() {
        parent::__construct();
        $config = array(
            'appId' => '....',
            'secret' => '...',
            'fileUpload' => true
        );
    $this->load->library('facebook', $config);
    $user = $this->facebook->getUser();

    $profile = null;

    if ($user) {
        try {
            $profile = $this->facebook->api('/me?fields=id,name,link,email');
        } catch (FacebookApiException $e) {
            error_log($e);
            $user = null;
        }
    }
    $fb_data = array(
        'me' => $profile,
        'uid' => $user,
        'loginUrl' => $this->facebook->getLoginUrl(
                array(
                    'scope' => 'email,user_birthday,publish_stream'// URL where you want to redirect your users after a successful login
                )
        ),
        'logoutUrl' => $this->facebook->getLogoutUrl()
    );
    $this->session->set_userdata('fb_data', $fb_data);
}

} 
```

我在某处读到它可能是 cookie 和 codeigniter 的问题，但我不知道如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:17:19.150

如下配置您的 facebook 配置文件

```
$facebook = new Facebook('keep your facebook config file here');
$my_details = $facebook->api('/me'); 
```

现在数组 $my_details 将为您提供 fb 应用程序的完整详细信息以及用户 ID

# c - MPI_Get_count 返回计数的负值

> ID：11041945
> 
> 赞同：0
> 
> 时间：2012-06-14T21:59:42.740
> 
> 标签：c, parallel-processing, mpi

MPI_Get_count() 可以为计数返回负值吗？我的消息大小从不超过 1138 个整数。所以应该不是消息长度的问题。

```
 if(MPI_Probe(MPI_ANY_SOURCE,0,MPI_COMM_WORLD,&status) == MPI_SUCCESS)
    {
     printf("probe flag true\n");
     MPI_Get_count(&status,MPI_DOUBLE,&recv_size);
    } 
```

我得到的 recv_size 值为负。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:08:43.480

如果消息大小不是提供给 MPI_Get_count 的数据类型大小的倍数，则 MPI_Get_count 将返回 MPI_UNDEFINED（很可能是负数）。因此，也许您将 5 个字节作为 MPI_BYTE 发送，但您询问 MPI_Get_count 您收到了多少 MPI_DOUBLES。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:08:32.750

I just realised that it was a problem with the data I was sending. The values exceeded the sizeof double. Fixed it and the code worked. Thanks for the help and sorry for buggy code!

# node.js - MongoDB数据库增长只有一条记录

> ID：11041951
> 
> 赞同：0
> 
> 时间：2012-06-14T22:00:20.407
> 
> 标签：node.js, mongodb

我有一个 node.js 应用程序，它将一条记录重复保存到 mongodb 数据库中，如下面的代码示例所示。数据记录实际上有几 MB 大小，但在任何时间点，一个集合中只有一条记录。尽管如此，数据库的大小仍会不断增加，直到服务器磁盘空间不足。

```
_db.collection('myCollection', function(err, collection) {
  collection.remove({}, function(err, result) {
    collection.insert(myData);
  });
}); 
```

我意识到有更好的方法来管理这些数据，只需每月修复几次数据库就可以解决问题，但我真的很好奇为什么 mongodb 在这种情况下不会自动回收空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:05:50.313

解决此问题的一种方法是为您的集合设置最大大小......因为它总是只有 1 条记录。尝试这样的事情：

```
_db.createCollection("myCollection", {size:100000}); 
```

您可以在此处阅读有关 MongoDB 磁盘使用情况的一些信息：[Excessive Disk Space](http://www.mongodb.org/display/DOCS/Excessive+Disk+Space)

# python - 多对一关系 ComboBox 过滤

> ID：11041953
> 
> 赞同：1
> 
> 时间：2012-06-14T22:00:25.713
> 
> 标签：python, ajax, django, django-models

专家！

具有以下models.py

```
class Country(models.Model):
    name = models.CharField(max_length=50)  

    def __unicode__(self):
        return self.name

    class Meta:
        verbose_name = 'Countries Uploaded'

class Users(models.Model):
    name = models.CharField(max_length=50) 
    cUsers = models.ForeignKey(Country)

    def __unicode__(self):
       return self.name

class Meta:
    verbose_name = 'Users on a country'

class GoalsinCountry(models.Model):
    Country = models.ForeignKey(VideoTopic)
    name = models.CharField(max_length=50)  
    descr = models.TextField(blank=True, null=True)

    def __unicode__(self):
        return self.name

    class Meta:
        verbose_name = 'Goals Topic' 
```

我想过滤掉属于特定国家的用户，并且在组合框中选择一个国家时并不是所有人都能看到所有用户，并且能够将此信息保存到 sqlite3 db。

如果我在 Country = Models.. gUser = models.ForeignKey(Users) 下面添加以下代码

使用 Django 管理界面，将显示所有用户，而不是根据他们所在的国家/地区过滤用户。这可能与 Django + 其他东西有关吗？是否有任何工作示例/教程 - 像北风 MS 教程？

谢谢

# java - Hibernate 无法连接到 debian 上的纯 MySQL 安装

> ID：11041955
> 
> 赞同：1
> 
> 时间：2012-06-14T22:00:28.587
> 
> 标签：java, mysql, hibernate

我刚刚创建了一个新的虚拟机，它最初是完全干净的 -

我已经安装了 MySQL，设置了密码，现在我可以通过 PHPMyAdmin 访问它。

我复制了我的 java 应用程序，其配置与我的其他服务器上运行的相同。但它似乎很难连接到 MySQL 服务器。

你可以看到 MySQL 正在监听：

```
# netstat -tap
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 localhost:mysql         *:*                     LISTEN      5307/mysqld 
```

在 TOP 中，我可以看到这两个过程：

```
5196 root      20   0  3956  632  508 S    0  0.0   0:00.00 mysqld_safe                                                                                                                                           
5307 mysql     20   0  167m  33m 6780 S    0  0.8   0:00.47 mysqld 
```

但是一旦我尝试运行应用程序，我最终会在 Hibernate 尝试连接时结束：

```
23:46:10,192  INFO org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl:127 - HHH000401: using driver [com.mysql.jdbc.Driver] at URL [jdbc:mysql://localhost/goout2?autoReconnect=true]
23:46:10,192  INFO org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl:132 - HHH000046: Connection properties: {user=goout2, writedelay=0, password=****, autocommit=true, shutdown=true, characterEncoding=UTF-8, charSet=UTF-8, release_mode=auto}
23:46:14,331  WARN org.hibernate.engine.jdbc.internal.JdbcServicesImpl:169 - HHH000342: Could not obtain connection to query metadata : Could not create connection to database server. Attempted reconnect 3 times. Giving up.
23:46:14,340  INFO org.hibernate.dialect.Dialect:122 - HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
23:46:14,350  INFO org.hibernate.engine.jdbc.internal.LobCreatorBuilder:85 - HHH000422: Disabling contextual LOB creation as connection was null
23:46:14,362  INFO org.hibernate.engine.transaction.internal.TransactionFactoryInitiator:73 - HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
23:46:14,367  INFO org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory:48 - HHH000397: Using ASTQueryTranslatorFactory
23:46:14,944  INFO org.hibernate.tool.hbm2ddl.SchemaUpdate:182 - HHH000228: Running hbm2ddl schema update
23:46:14,944  INFO org.hibernate.tool.hbm2ddl.SchemaUpdate:193 - HHH000102: Fetching database metadata
23:46:18,949 ERROR org.hibernate.tool.hbm2ddl.SchemaUpdate:201 - HHH000319: Could not get database metadata
com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up. 
```

使用 C3P0，它会像这样死去：

```
23:58:08,696  INFO com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource:462 - Initializing c3p0 pool... com.mchange.v2.c3p0.PoolBackedDataSource@2e902532 [ connectionPoolDataSource -> com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@43a8e988 [ acquireIncrement -> 3, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, debugUnreturnedConnectionStackTraces -> false, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> ahkzhz8n1trd1gkc8ious|37e8cf51, idleConnectionTestPeriod -> 600, initialPoolSize -> 3, maxAdministrativeTaskTime -> 0, maxConnectionAge -> 0, maxIdleTime -> 300, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 20, maxStatements -> 50, maxStatementsPerConnection -> 0, minPoolSize -> 5, nestedDataSource -> com.mchange.v2.c3p0.DriverManagerDataSource@78875ab8 [ description -> null, driverClass -> null, factoryClassLocation -> null, identityToken -> ahkzhz8n1trd1gkc8ious|20053644, jdbcUrl -> jdbc:mysql://localhost:5307/goout2?autoReconnect=true, properties -> {user=******, writedelay=0, password=******, autocommit=true, shutdown=true, characterEncoding=UTF-8, charSet=UTF-8, release_mode=auto} ], preferredTestQuery -> null, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 0, usesTraditionalReflectiveProxies -> false; userOverrides: {} ], dataSourceName -> null, factoryClassLocation -> null, identityToken -> ahkzhz8n1trd1gkc8ious|347c8e1c, numHelperThreads -> 3 ]
23:58:28,694  WARN com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector:608 - com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@457e133d -- APPARENT DEADLOCK!!! Creating emergency threads for unassigned pending tasks!
23:58:28,697  WARN com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector:624 - com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@457e133d -- APPARENT DEADLOCK!!! Complete Status: 
```

显然 MySQL 不想接受来自我的 Java 应用程序的连接，并且 MySQL 日志不显示任何内容。我想，有一些我不知道的配置选项。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:08:47.880

> jdbc:mysql://localhost:5307/goout2?autoReconnect=true

5307 不是标准的 mysql 端口。您是否尝试过连接到端口`3306`？5307 似乎是 PID（进程 ID）而不是端口。

您也可以尝试通过`127.0.0.1`和/或您当前的 ip 进行连接。屏幕看起来像您已启用 mysql 来侦听该端口，但请确保它正在主动侦听该端口。`telnet localhost 5307`mysqlserver 可以选择仅侦听本地套接字，确保它实际上打开了一个端口。

# xslt - 在 Eclipse 中创建 XQuery 项目

> ID：11041957
> 
> 赞同：0
> 
> 时间：2012-06-14T22:00:36.497
> 
> 标签：xslt, xquery, marklogic

我刚刚开始学习并使用 java 处理 xquery。我有一个关于 MarkLogic 服务器的快速问题。我刚刚为我的 Eclipse 安装了 XQDT，我需要为 XQuery 项目配置一个解释器，此时我有两个选项，第一个`java XQuery engine`是`MarkLogic server`. 我尝试了`MarkLogic server`第一个但我无法使用它，问题是它无法使用 localhost:8000 连接。所以，我只是使用`java XQuery engine`并为此下载`MXQuery`，它工作正常。

问题是确实`MarkLogic server`可以在Windows服务器上运行`Windoes 7`还是仅在Windows服务器上运行？如果我只是继续使用`MXQuery`，我可以创建任何没有问题的 xquery 项目吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:35:44.193

MarkLogic Server（产品）在 Windows 7 上运行良好。它带有一个在端口 8000 上运行的 MarkLogic 应用服务器 - 可能不是您想要用于调试的那个。您应该在另一个端口上设置另一个 MarkLogic 应用服务器来开发您的应用程序（请参阅本[教程](http://community.marklogic.com/learn/get-started-apps-2%20%29)了解如何设置或阅读产品[入门指南](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/xml/gs/procedures.xml#22010)）

[设置完成后，如果您已按照此处](http://community.marklogic.com/learn/xqdt-setup)所述安装 XQDT，您应该能够使用“MarkLogic Server”引擎。

# javascript - 如何将骨干集合用于深度超过 1 的数据集？

> ID：11041960
> 
> 赞同：0
> 
> 时间：2012-06-14T22:00:49.493
> 
> 标签：javascript, collections, backbone.js

我开始在我的项目中使用主干。我完成了一个简单的项目，它非常好。

我有一个新项目，但我遇到了一个小问题。

我有一个数据集（json）代表

```
Root Data 1
  - Data 1
  - Data 2
  - Data 3
Root Data 2
  - Data 1
  - Data 2 
```

如何使用集合来设置上述数据集？看起来集合总是只创建根数据 1 和 2。我需要在主干中使用其他东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:30:23.143

[骨干关系](https://github.com/PaulUithol/Backbone-relational)可能会对您有所帮助。

# mongodb - 无法导入mongodb

> ID：11041961
> 
> 赞同：18
> 
> 时间：2012-06-14T22:00:52.997
> 
> 标签：mongodb, import

我试过这样的mongo导入

1.  `mongoimport -d test -c foo importfile.json`
2.  `mongoimport --host localhost --db local --collection lecturer --type json --file temp.json --headerline --upsert`

并且我收到相同的错误消息“语法错误：缺少；之前语句（shell）：1”我的代码有什么问题以及如果我的数据存储在 C:\Documents and Settings\User\Desktop 中，如何导入？请帮忙，提前谢谢

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-06-15T01:40:01.770

mongoimport 旨在在命令提示符下运行，而不是在 mongo shell 中运行。尝试退出 shell 并运行命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-15T09:45:41.973

`mongoimport`将在终端上运行，而不是在 mongo shell 内。要`mongoimport`在终端中运行，您需要安装相同的。在ubuntu上，你可以这样做： `apt-get install mongo-tools` 希望这会有所帮助:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-05T12:05:23.307

一种解决方案是：

首先，在***cmd***中，切换到包含***mongoexport.exe***文件的目录，然后键入您的命令。

```
C:\Program Files\MongoDB\Server\3.2\bin> .\mongoexport.exe -d foo -c bar -o output.json 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-12T22:54:46.067

我遇到了同样的问题，经过短暂的挣扎和谷歌搜索后，我得以解决。1\. 在命令提示符下导航到 bin 目录 (cd c:..\bin) 2\. 运行 mongoimport 命令，但您必须指定 json 文件的完整路径。这解决了问题

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T02:15:07.910

尝试使用 CSV 是一个不错的选择。

```
mongoimport -d mydb -c things --type csv --file locations.csv --headerline --upsert 
```

您可以通过 ms excel 进行转换。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-02T05:50:38.817

在要导入的文件的位置打开一个新的终端或命令提示符，它应该可以工作。它不适用于 MongoDB shell

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-05T05:58:01.120

在另一个命令窗口中打开 mongo db 的“Mongo/Server/3.4/bin”文件夹，然后重试。它会工作。

# android - Android NameValuePair 不接受字符串

> ID：11041962
> 
> 赞同：1
> 
> 时间：2012-06-14T22:00:53.283
> 
> 标签：android, http-post

我正在使用 HTTPPost 将值发送到服务器。该脚本适用于我下面的内容。但是，如果我将名称值对更改为此，我会强制关闭：

```
nameValuePairs.add(new BasicNameValuePair("id", idOfTextView.getText().toString())); 
```

这是没有读取文本视图的代码：

```
 String url_select = "http://mydomain.com/get.php";
    HttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(url_select);
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
    nameValuePairs.add(new BasicNameValuePair("id", "1"));
    try {
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        //read content
        is =  httpEntity.getContent();                  
    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection "+e.toString());
    }

    try {
        BufferedReader br = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();
        String line = "";
        while((line=br.readLine())!=null){
            sb.append(line+"\n");
        }
        is.close();
        result=sb.toString();               
    } catch (Exception e) {
        Log.e("log_tag", "Error converting result "+e.toString());
    }
    return null; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:11:23.467

看起来我的评论是答案，请确保`idOfTextView`它是非空的。

# mysql - 如何从 MySQL 中的 information_schema 获取主键索引前缀长度？

> ID：11041964
> 
> 赞同：0
> 
> 时间：2012-06-14T22:01:06.497
> 
> 标签：mysql, key, information-schema

让我们假设我有一个如下创建的表：

```
create table `test_table` (
  `col1` varchar(128) NOT NULL,
  PRIMARY KEY (`col1`(16))
); 
```

现在，假设我有一个脚本正在检查模式，寻找有关主键的信息。该脚本如何在不解析输出的情况下找到索引前缀长度（上例中为 16）`show create table`？此信息不在`information_schema.key_column_usage`（无论如何在 MySQL 5.1 中），但它在 information_schema 的其他地方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T05:48:59.680

尝试使用[information_schema.STATISTICS](http://dev.mysql.com/doc/refman/5.5/en/statistics-table.html)表（`SUB_PART`字段） -

```
SELECT
  TABLE_SCHEMA, TABLE_NAME, INDEX_NAME, SUB_PART
FROM
  information_schema.STATISTICS 
```

或者

[显示索引](http://dev.mysql.com/doc/refman/5.5/en/show-index.html)语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:12:04.143

你没有指定表引擎，所以我假设 InnoDB。对于您的问题 - 由于 InnoDB 存储索引数据的方式，不可能获得索引大小。这是与您的问题一起报告的 MySQL 错误，请参阅页面底部的响应：[http](http://bugs.mysql.com/bug.php?id=57192) ://bugs.mysql.com/bug.php?id=57192 ：

> 这是设计使然。InnoDB 中的表数据存储在主键（显式或隐式）的索引结构中。因此，主键是数据，无需将其大小报告为（辅助）索引大小。
> 
> 阅读[http://dev.mysql.com/doc/refman/5.1/en/innodb.html](http://dev.mysql.com/doc/refman/5.1/en/innodb.html)，例如：
> 
> “InnoDB 将用户数据存储在聚集索引中，以减少基于主键的常见查询的 I/O。”

# java - 如何在 TextView 中获取省略号的文本

> ID：11041966
> 
> 赞同：12
> 
> 时间：2012-06-14T22:01:11.687
> 
> 标签：java, android, textview, truncate

如何将已被 Android 截断的文本变成省略号？

我有一个文本视图：

```
<TextView
    android:layout_width="120dp"
    android:layout_height="wrap_content"
    android:ellipsize="end"
    android:singleLine="true"
    android:text="Um longo texto aqui de exemplo" /> 
```

在设备上，此 TextView 显示如下：

`"Um longo texto a..."`

我如何获得其余的文本？

我正在寻找类似`getRestOfTruncate()`返回“qui de exemplo”的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T03:21:50.987

```
String text = (String) textView.getText().subSequence(textView.getLayout().getEllipsisStart(0), textView.getText().length()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-25T10:48:23.330

使用 textView.getLayout().getEllipsisStart(0) 仅适用于 android:singleLine="true"

如果设置了 android:maxLines，这是一个可行的解决方案：

```
public static String getEllipsisText(TextView textView) {
    // test that we have a textview and it has text
    if (textView==null || TextUtils.isEmpty(textView.getText())) return null;
    Layout l = textView.getLayout();
    if (l!=null) {
        // find the last visible position
        int end = l.getLineEnd(textView.getMaxLines()-1);
        // get only the text after that position
        return textView.getText().toString().substring(end);
    }

    return null;
} 
```

请记住：这在视图已经可见之后才起作用。

**用法：**

```
textView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            textView.getViewTreeObserver().removeOnGlobalLayoutListener(this);
            Log.i("test" ,"EllipsisText="+getEllipsisText(textView));
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-28T07:26:06.967

我的解决方案。Kotlin 扩展功能：

```
fun TextView.getEllipsizedText(): String {
if (text.isNullOrEmpty()) return ""
return layout?.let {
    val end = textContent.text.length - textContent.layout.getEllipsisCount(maxLines - 1)
    return text.toString().substring(0, end)
} ?: ""
} 
```

# blackberry - Blackberry Browserfield 示例应用程序未启动

> ID：11041970
> 
> 赞同：1
> 
> 时间：2012-06-14T22:01:20.193
> 
> 标签：blackberry, browserfield

我正在尝试运行一个非常简单的实现 BrowserField 类的 Blackberry/Java 应用程序。当我在模拟器中启动它时，它只是挂起。当我在我的设备上启动它时，什么也没有发生。

JRE：7.0 模拟器：4.0.0.141

```
 package mypackage;

  import net.rim.device.api.browser.field2.BrowserField;
  import net.rim.device.api.browser.field2.BrowserFieldConfig;
  import net.rim.device.api.ui.UiApplication;
  import net.rim.device.api.ui.container.MainScreen;

 public class BrowserJazz extends UiApplication
 {
 public static void main(String[] args)
 {
    BrowserJazz app = new BrowserJazz();
    app.enterEventDispatcher();
 }

 public void BrowserJazz()
 {
    pushScreen(new BrowserFieldDemoScreen());
 }
 }

 class BrowserFieldDemoScreen extends MainScreen
 {
public BrowserFieldDemoScreen()
{
    BrowserFieldConfig myBrowserFieldConfig = new BrowserFieldConfig();

    myBrowserFieldConfig.setProperty(BrowserFieldConfig.NAVIGATION_MODE,
           BrowserFieldConfig.NAVIGATION_MODE_POINTER);

    BrowserField browserField = new BrowserField(myBrowserFieldConfig);

    /*BrowserFieldListener listener = new BrowserFieldListener() {
        public void documentLoaded(BrowserField browserField) throws Exception
        {
            // the document has loaded, do something ...
            Dialog.inform("PAGE LOADED!");
        }
    };*/

    add(browserField);
    //browserField.addListener( listener );

    browserField.requestContent("http://www.google.com");
    //browserField.addListener( listener );

  }
  } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:46:47.877

您正在使用仅支持 OS 5 及更高版本的“NAVIGATION_MODE_POINTER”，您可以从 browserfield 文档[http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/browser/field2/中读取BrowserFieldConfig.html#NAVIGATION_MODE_POINTER](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/browser/field2/BrowserFieldConfig.html#NAVIGATION_MODE_POINTER)
，正如你所说，你使用的是旧模拟器“模拟器：4.0.0.141”

# python - Python：将字典与列表中的列表合并为值并计算它们

> ID：11041971
> 
> 赞同：1
> 
> 时间：2012-06-14T22:01:24.733
> 
> 标签：python, dictionary, merge

我正在尝试编写一个可以合并两个字典（文本文件！）的程序。这些词典由名词和动词组成，这些名词和动词已被另一个程序从不同的语料库中索引（然后放入文本文件中）。这是这些字典的形式：

```
dict1 = {'strawberry': [['eat', 1]], 'family-member': [['look up', 1]], 'mall': [['search', 1]]}
dict2 = {'strawberry': [['eat', 1]], 'family-member': [['lose', 1]], 'ovation': [['receive', 1]], 'mall': [['build', 1]]} 
```

如您所见，它们是带有键的字典，在值列表中包含列表。现在我试图得到这样的输出：

```
finaldict = {'strawberry': [['eat', 2]], 'family-member': [['look up', 1]['lose',1]], 'mall': [['search', 1]['build', 1]], 'ovation': [['receive', 1]] 
```

到目前为止，我已经能够像这样（在字符串中）合并 dict1 和 dict2：

```
{'strawberry': [['eat', 1]], 'family-member': [['look up', 1]], 'mall': [['search',
1]], 'strawberry': [['eat', 1]], 'family-member': [['lose', 1]], 'ovation':
[['receive', 1]], 'mall': [['build', 1]]} 
```

我将此字符串转换为带有下一条语句的字典： finaldict = eval(str1) 它将整个内容转换为字典，当我询问 finaldict 的类型时它也这么说，但它不会看到像 [ ['eat', 1]] 作为值或任何东西。我需要这个，所以我可以遍历每个项目并计算它与哪个动词一起出现的次数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:18:45.583

```
from collections import Counter

dict1 = {'strawberry': [['eat', 1]], 'family-member': [['look up', 1]], 'mall': [['search', 1]]}
dict2 = {'strawberry': [['eat', 1]], 'family-member': [['lose', 1]], 'ovation': [['receive', 1]], 'mall': [['build', 1]]}
result = {k: Counter(dict(v)) for k, v in dict1.items()}
for k, v in dict2.items():
    result.setdefault(k, Counter()).update(dict(v))

result = {k: [list(x) for x in v.items()] for k, v in result.items()} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:24:32.070

没有什么太花哨的，只是打破它。

```
from collections import defaultdict

dict1 = {'strawberry': [['eat', 1]], 'family-member': [['look up', 1]], 'mall': [['search', 1]]}
dict2 = {'strawberry': [['eat', 1]], 'family-member': [['lose', 1]], 'ovation': [['receive', 1]], 'mall': [['build', 1]]}
keys = set(dict2.keys()).union(dict1.keys())

final = {}
for k in keys:
    d1val = dict1.get(k, [])
    d2val = dict2.get(k, [])

    resd = defaultdict(lambda: 0)

    for word, count in d1val:
        resd[word] += count

    for word, count in d2val:
        resd[word] += count

    final[k] = [list(i) for i in resd.items()] 
```

# jquery - 在列表中过滤 Jquery 中的结果

> ID：11041972
> 
> 赞同：2
> 
> 时间：2012-06-14T22:01:25.093
> 
> 标签：jquery, ajax, json, filter

我从互联网下载并编辑了一个代码，基本上我想做的是创建一个字符串列表，我使用 JSON 从数据库中读取这些字符串。该列表构建完美，现在我要做的是使用 Jquery 过滤结果（文本框）。最好的方法是什么？当用户在文本框中输入内容时显示完整的结果列表，过滤列表中的结果。

谢谢

```
$(function ()
{
    $.ajax({
        url: 'api.php', data: "", dataType: 'json',  success: function(rows)
        {
            var list = $("#toggle").append('<ul></ul>').find('ul');
            for (var i in rows)
            {
            var row = rows[i];
                //var id = row[0];
                var Dname = row[4];
                Dname = Dname.toLowerCase();
                list.append("<li>"+Dname+"</li><div>Pulse</div>");
            }
            $('ul li:odd').addClass('zebra_odd');
            $('ul li:even').addClass('zebra_even');
            $("li").click(function(){
                $(this).toggleClass("active");
                $(this).next("div").stop('true','true').slideToggle();
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T22:59:12.073

这很好用：

```
$('input').keyup(function() {                       // Bind keyup event to textbox
    var textboxVal = $(this).val().toLowerCase();   // Get value of textbox
    $('ul li').each(function() {                    // loop through the list
        var listVal = $(this).text().toLowerCase(); // get value of the <li>
        if(listVal.indexOf(textboxVal) >= 0) {      // search if textboxVal is in listVal
            $(this).show();                         // if true show this <li>
        } else {
            $(this).hide();                         // else hide this <li>
        }
    });
}); 
```

示例：http: [//jsfiddle.net/PWAXt/](http://jsfiddle.net/PWAXt/)

# java - 为什么我不能通过 Intent 传递数据？

> ID：11041973
> 
> 赞同：4
> 
> 时间：2012-06-14T22:01:28.647
> 
> 标签：java, android, android-intent, android-activity

我正在尝试从活动中获取输入的数据。在我的主屏幕上，我开始了这样的活动：

```
Intent myIntent = new Intent(this, ContactInfo.class);
startActivityForResult(myIntent, AppState.ACTIVITY_CONTACT_INFO); 
```

在活动中，当用户点击保存按钮时，我会触发以下操作：

```
Intent intent = new Intent();
TextView tvName = (TextView) findViewById(R.id.txtContactName);
intent.putExtra("Name", tvName.getText());

if (getParent() == null) {
    setResult(Activity.RESULT_OK, intent);
} else {
    getParent().setResult(Activity.RESULT_OK, intent);
}
finish(); 
```

在原始活动中，我捕捉到`onActivityResult`这样的事件：

```
String contactName = (String) data.getExtras().get("Name"); 
```

然而，这条线爆炸了`java.lang.ClassCastException: android.text.SpannableString cannot be cast to java.lang.String`。我也尝试`getStringExtra`过同样的结果。

我错过了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T22:03:38.313

`TextView.getText()`不返回字符串，而是`SpannableString`你看到的。改为使用`getText().toString()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-11T02:21:28.557

有一个类似的问题，出现错误的地方，android.text.SpannableString 不能被强制转换为 java.lang.String

这是因为 getText() 最后需要有一个 'toString()'。如果没有这个 'toString()'，它会在 Android 4.x 上崩溃，但可以在 Android 2.x 上运行。

```
ClipboardManager clipboard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE);
TextView viewTxt;  // Continue and complete this yourself.

String tmpStr = (String) viewTxt.getText().toString(); 
```

# ruby-on-rails - 使用 ember.js 显示 JSON 而不是 HTML 用于 Rails 视图

> ID：11041974
> 
> 赞同：5
> 
> 时间：2012-06-14T22:01:39.210
> 
> 标签：ruby-on-rails, ember.js, ember-data

我正在慢慢地将我的 Rails 网站从传统的 Rails 往返每个视图应用程序转移到最终将基于单页 ember.js 的应用程序。作为此迁移的一部分，我分步进行，而不是将整个应用程序一次性迁移到单个页面应用程序，而是首先逐节迁移。

我被一个看似普遍的问题难住了。当我对 JSON 视图和 HTML 视图使用相同的控制器时，在 Chrome 中按回有时会显示 JSON 视图而不是 HTML 视图。

例如，我有一个端点 /portfolio/13，它是这些部分 ember.js 应用程序之一的入口点，它会导致 Ember Data 将 ID 为 #13 的 Portfolio 的 JSON 提取到与 application/ 相同的端点上json 作为 Accept: 标头。在向前导航到更深的页面后按返回将获得页面的 JSON 表示，而不是 HTML。

我是否需要强制 Ember Data 使用格式参数，以便 JSON 版本位于不同的 URL？如果是这样，如何做到这一点？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T11:54:46.847

尝试在你的 Javascript 中添加这个：

```
$.ajaxSetup({cache: false}); 
```

它应该可以解决问题。但是，这里有些问题，因为默认情况下浏览器不缓存 JSON。这可能是因为内容类型错误，即 Rails 将 JSON 作为 HTML 提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T04:38:10.503

您是否在 Rails 应用程序中将某些标头设置为“application/json”？您能否跟踪网络响应标头并查看内容类型：值？

“整个”页面是否显示为 JSON？（意思是不解析 HTML）

我曾经使用 sinatra 遇到过这个问题，而且我有一个（非常愚蠢）：

```
before do 
    content_type 'application/json'
end 
```

如果您希望浏览器正确显示，则所有 HTML 页面都必须为“text/html”。

在您的 Rails 应用程序的某些地方，这可能是您的问题。（但是为什么在ember之前没有遇到这个问题呢？）

# google-apps-script - 从 xml 数据中提取元素，类似于 Google 应用脚本页面上的解析 xml 教程？

> ID：11041975
> 
> 赞同：1
> 
> 时间：2012-06-14T22:01:41.640
> 
> 标签：google-apps-script

这是数据流，（希望我正确地显示了这一点，我花了很长时间才弄清楚）。我只是想提取标题只是为了看看我是否可以让它工作。我显然迷路了，不明白为什么我不断收到错误。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <items total="475974">
        <link href="https://www.sciencebase.gov/catalog/items?
            max=1&amp;s=Search&amp;q=water&amp;format=xml" 
            rel="self" />
        <link href="https://www.sciencebase.gov/catalog/items?
            max=1&amp;s=Search&amp;q=water&amp;format=xml&amp;offset=1"
            rel="next" />
        <item id="4f4e4a62e4b07f02db6369dc">
        <link href="https://www.sciencebase.gov/catalog/
                item/4f4e4a62e4b07f02db6369dc" rel="self" />
        <oldId>1800335</oldId>
        <title>Reconnaissance of the water resources of Beaver County,
            Oklahoma</title>
        <summary>Ground water is the major source of water supply in Beaver
            County. Because of the rapidly increasing demand for the limited
            supply of water for irrigation, additional geologic and hydrologic
            data are needed for management of ground-water resources...</summary>
        </item>
    </items> 
```

这是我的代码：

```
function myFunction() {
    var response = UrlFetchApp.fetch("http://www.sciencebase.gov/catalog        
        /items?s=Search&q=water&format=xml&max=1").getContentText();
    var parsedResponse = Xml.parse(response, true);
    //I tried this but it didn't work
    var title = parsedResponse.html.head.getElements("title");
    Browser.msgBox(title);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T00:53:05.643

我总是使用工具来查看 XML。如果你需要一个，在 Chrome 中，我使用[XML Tree](https://chrome.google.com/webstore/detail/gbammbheopgpmaagmckhpjbfgdfkpadb)扩展。安装它，访问您的测试 URL，您将看到可扩展和可折叠的格式化 XML（就像 IE :) 并且可以轻松查看结构。

这是您的代码，带有一些模组和轻松的旁白：

```
function myFunction() {
  //note I've set max=10 here
  var url="http://www.sciencebase.gov/catalog/items?s=Search&q=water&format=xml&max=10";
  var response = UrlFetchApp.fetch(url).getContentText();

  var parsedResponse = Xml.parse(response, true);

  debugger; //You will see in the debugger that your 10 results are each XmlElements in the array parsedResponse.items.item[]

  //iterate through the results
  for (var i = 0; i < parsedResponse.items.item.length; i++) {
    var result = parsedResponse.items.item[i];
    //View > Logs... to see the title of each result
    Logger.log(result.getElement("title").getText());
  }
} 
```

记录以下 10 个标题：

```
Reconnaissance of the water resources of Beaver County, Oklahoma
..
Water resources data, Oklahoma, water year 2004; Volume 2\. Red River basin 
```

希望这会有所帮助，如果您需要进一步澄清，请告诉我。

# c# - 环境 在 XAML 中

> ID：11041976
> 
> 赞同：25
> 
> 时间：2012-06-14T22:01:47.663
> 
> 标签：c#, wpf, xaml, mvvm, datacontext

我遵循了一个非常简单的 MVVM 示例作为我的程序的基础。作者在主页中使用了一个代码隐藏指令来设置`DataContext`. 我想我应该能够在 XAML 中做到这一点。MainWindowViewModel 位于 ViewModels 目录中。背后的代码有效。

```
namespace RDLfromSP
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            DataContext = new ViewModels.MainWindowViewModel();
        }
    }
} 
```

我似乎无法在 XAML 中找到正确的组合来设置它

```
<Window x:Class="RDLfromSP.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="300" Width="300" > 

    <Window.DataContext>
        <local:ViewModels.MainWindowViewModel />
    </Window.DataContext> 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-06-14T22:17:30.903

您需要一个到命名空间的 xml 命名空间映射`ViewModels`。添加后，它将是：

```
<Window.DataContext>
    <vms:MainWindowViewModel />
</Window.DataContext> 
```

（这是假设您映射`vms`到适当的命名空间。）

这应该看起来就像您当前的名称空间映射一样`local:`，但调用`vms:`时指定了适当的名称空间。

# facebook - 如何在 Facebook Open Graph 代码中隐藏我的管理员 ID

> ID：11041977
> 
> 赞同：0
> 
> 时间：2012-06-14T22:02:03.127
> 
> 标签：facebook, facebook-like, facebook-opengraph

我在我正在管理的几个不同项目中使用 Facebook Open Graph，我刚刚意识到几乎任何人都可以使用代码 (meta property="fb:admins" content="xxxxxxx") 代码通过打孔来跟踪我的身份在 facebook.com/USER_ID 中输入数字用户 ID。

有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:56:37.920

使用应用 ID 作为管理员，并将您的用户帐户添加为应用的管理员 - 用户将在源中看到应用 ID，但无法检索该应用的管理员列表

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T22:06:24.327

简短的回答：没有。

更长的答案：不，你不能，这是设计使然。

如果您不同意让人们知道您是谁，请问您为什么要使用像 FB 这样的系统，该系统的创建非常具体并详细说明您是一个人，以便更好地利用围绕它构建的广告系统资助它的存在？

# excel - excel 10 日期输入和原始日期保留

> ID：11041978
> 
> 赞同：0
> 
> 时间：2012-06-14T22:02:07.120
> 
> 标签：excel, date

我有一个 inout 表单，它通过“今天”功能自动填充今天的日期。这是生成和签署表格的日期。

该表格随后会在随后几天发送给其他部门，由他们检查、打印、处理等。无论何时打开表格进行处理/打印等，日期都会更改为当前日期。

有没有一种方法可以强制日期保留为填充日期，而不是在随后的几天重新计算。我试过“mid”和“parse”但没有成功。

任何人都知道答案 - 我不想使用宏，只是公式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:56:10.863

我认为您将需要 VBA。有一种公式方法，但它需要您的用户更改 Excel 中的一些计算选项......

您的选择： [http ://www.mcgimpsey.com/excel/timestamp.html](http://www.mcgimpsey.com/excel/timestamp.html)

# c - 通过混合项递归复制两个链表

> ID：11041986
> 
> 赞同：4
> 
> 时间：2012-06-14T22:02:41.973
> 
> 标签：c, linked-list

我需要递归复制两个链表并返回一个新的`list`. 我需要复制它们的方式是 list1 中的一个元素，list2 中的一个元素。如果一个列表比另一个列表短，只需附加较长列表的剩余元素。

示例输入：`list1 = [1,2,3], list2 = [4,5,6,7]; result = [1,4,2,5,3,6,7];`

这是我有缺陷的（现在是正确的）代码：

```
node *copy(node *list1, node *list2)
{
    if (list1 == NULL && list2 == NULL) return NULL;

    else if (list1 != NULL && list2 != NULL) {
      node *result;
      result = newnode();

      result->data = list1->data;
      result->next = newnode();
      result->next->data = list2->data;

      result->next->next = copy(list1->next, list2->next);

      return result;
    }
    else if (list1 != NULL && list2 == NULL) {
      node *result; 
      result = newnode();

      result->data = list1->data;
      result->next = copy(list1->next, NULL);

              return result;
    }
    else if (list1 == NULL && list2 != NULL) {
      node *result;
      result = newnode();

      result->data = list2->data;
      result->next = copy(NULL, list2->next);

              return result;
    }           
} 
```

有人可以指出我正在犯的错误吗？

编辑：现在它可以工作了。我错过了两个退货声明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:08:19.660

您似乎缺少底部两个 else if 分支中的 return 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:49:34.487

您可以通过将所有块放在一个循环中来减少块的数量：

```
node *copy_two_interlaced(node *list1, node *list2)
{
    node *result=NULL, **pp = &result;

    while (list1 || list2) {
      if (list1) {
        *pp = newnode();

        (*pp)->data = list1->data;
        (*pp)->next = NULL;
        list1 = list1->next;
        pp = &(*pp)->next;
        }
      if (list2) {
        *pp = newnode();

        (*pp)->data = list2->data;
        (*pp)->next = NULL;
        list2 = list2->next;
        pp = &(*pp)->next;
        }
    }
    return result;
} 
```

哦，对不起，这不是递归的。这是一个（非常丑陋的）递归版本：

```
node *copy_two_interlaced_recursive(node *list1, node *list2)
{
    node *result=NULL;

      if (list1) {
        result = newnode();
        result->data = list1->data;
        result->next = copy_two_interlaced(list2, list1->next);
        return result;
        }
      if (list2) {
        result = copy_two_interlaced(list2, NULL);
        }
    } 
    return result;
} 
```

# iphone - 通过 NSJSONSerialization 捕获 PHP 响应

> ID：11041990
> 
> 赞同：0
> 
> 时间：2012-06-14T22:03:16.880
> 
> 标签：iphone, ios5, nsjsonserialization

嗨，我这里有这段代码。

```
NSString *name = [[NSString alloc] initWithFormat:[nameField text]];
        NSString *street = [[NSString alloc] initWithFormat:[streetField text]];
        NSString *city = [[NSString alloc] initWithFormat:[cityField text]];
        NSString *state = [[NSString alloc] initWithFormat:[stateField text]];
        NSString *zip = [[NSString alloc] initWithFormat:[zipField text]];
        NSString *urlToAuthPage = [[NSString alloc] initWithFormat:@"&name=%@&street=%@&city=%@&state=%@&zip=%@&lat=%@&lon=%@", name, street, city, state, zip, str1, str2];

        NSData *postData = [urlToAuthPage dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:NO];
        NSString *postLength = [NSString stringWithFormat:@"%d",[urlToAuthPage length]];
        NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
        [request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://yourlink.com/poop.php"]]];
        [request setHTTPMethod:@"POST"];
        [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
        [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
        [request setHTTPBody:postData];
        NSURLConnection *conn = [[NSURLConnection alloc]initWithRequest:request delegate:self];

        NSError *error;
        NSMutableArray *infoArray = (NSMutableArray*)[NSJSONSerialization JSONObjectWithData:postData options:kNilOptions error:&error];
        NSLog(@"%@", [infoArray objectAtIndex:0]);

       if (conn) {
            UIAlertView *successAlert = [[UIAlertView alloc] initWithTitle:@"Success!" message:@"Your party has been successfully posted" delegate:nil cancelButtonTitle:@"Close" otherButtonTitles: nil];
            [successAlert show];
            //NSLog(conn);

            nameField.text = @"";
            streetField.text = @"";
            cityField.text = @"";
            stateField.text = @"";
            zipField.text = @"";

            [nameField resignFirstResponder];
            [streetField resignFirstResponder];
            [cityField resignFirstResponder];
            [stateField resignFirstResponder];
            [zipField resignFirstResponder];

            } 
```

我想要做的是得到服务器在 NSJon 中给出的响应。我正在尝试捕捉下面的内容。我尝试使用 NSMutableArray 来获取它，但它没有用。我究竟做错了什么？

```
{"status":1} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:53:16.127

问题是 NSJSONSerialization 用 NSDictionary 回答，而不是 NSMutableArray。你不能强迫它成为一个数组，因为它需要一个值和一个键（在这种情况下，键是“状态”，值是“1”）

# python - 根据列表提取数据

> ID：11041993
> 
> 赞同：3
> 
> 时间：2012-06-14T22:03:44.000
> 
> 标签：python, regex

我试图弄清楚如何根据此列表从字符串中提取一些数据：

```
check_list = ['E1', 'E2', 'E7', 'E3', 'E9', 'E10', 'E12', 'IN1', 'IN2', 'IN4', 'IN10'] 
```

例如对于这个列表：

```
s1 = "apto E1-E10 tower 1-2 sanit" 
```

我会得到`['E1', 'E10']`

```
s2 = "apto IN2-IN1-IN4-E12-IN10 mamp" 
```

为此，我会得到：`['IN2', 'IN1', 'IN4', 'E12', 'IN10']`

然后这变得很棘手：

```
s3 = "E-2-7-3-9-12; IN1-4-10 T 1-2 inst. hidr." 
```

我会得到：`['E2', 'E7', 'E3', 'E9', 'E12', 'IN1', 'IN4', 'IN10']`

你能给一些建议来解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T22:30:12.723

以下应该有效：

```
def extract_data(s):
    check_set = set(['E1', 'E2', 'E7', 'E3', 'E9', 'E10', 'E12',
                     'IN1', 'IN2', 'IN4', 'IN10'])
    result = []
    for match in re.finditer(r'\b(E|IN)[-\d]+', s):
        for digits in re.findall(r'\d+', match.group(0)):
            item = match.group(1) + digits
            if item in check_set:
                result.append(item)
    return result 
```

例子：

```
>>> extract_data("apto E1-E10 tower 1-2 sanit")
['E1', 'E10']
>>> extract_data("apto IN2-IN1-IN4-E12-IN10 mamp")
['IN2', 'IN1', 'IN4', 'E12', 'IN10']
>>> extract_data("E-2-7-3-9-12; IN1-4-10 T 1-2 inst. hidr.")
['E2', 'E7', 'E3', 'E9', 'E12', 'IN1', 'IN4', 'IN10'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:31:29.930

```
import re

def parse(string):
  result = []
  for match in re.findall('(E|IN)-{0,1}([\d]+)((-[\d]+)*)', string):
    letter = match[0]
    numbers = [int(i) for i in [match[1]] + match[2].split('-')[1:]]
    for number in numbers:
      result.append('%s%d' % (letter, number))

  return result

print parse('apto E1-E10 tower 1-2 sanit')
print parse('apto IN2-IN1-IN4-E12-IN10 mamp')
print parse('E-2-7-3-9-12; IN1-4-10 T 1-2 inst. hidr.') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T22:33:14.703

这是部分答案，更多地表明我可能会如何开始解决您的问题。

使用“键”`IN`和`E`，我将在字符串中搜索与键匹配的模式，后跟任意数量的空格或破折号。

例如：

```
import re

S = ['apto E1-E10 tower 1-2 sanit','apto IN2-IN1-IN4-E12-IN10 mamp','E-2-7-3-9-12; IN1-4-10 T 1-2 inst. hidr.']

for s in S:
    print s
    M = re.findall(r'(IN[\d\-]*)', s)
    for m in M: print m

    M = re.findall(r'(E[\d\-]*)', s)
    for m in M: print m 
```

产生：

```
$蟒蛇提取物.py
apto E1-E10 塔 1-2 卫生
E1-
E10
apto IN2-IN1-IN4-E12-IN10 放大器
IN2-
IN1-
IN4-
IN10
E12-
E-2-7-3-9-12；IN1-4-10 T 1-2 安装。希德尔。
IN1-4-10
E-2-7-3-9-12

```

然后我会采取每一个`m`并进一步解析它。所以这`E1-`导致`[E1]`并`E-2-7-3-9-12`导致`[E2,E7,E3,E9,E12]`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T00:20:09.197

我试图使其尽可能笼统：

```
import re

def make_relist(l):
    relist = []
    for a in l:
        alpha, num = re.match('([a-zA-Z]+)(\d+)', a).groups()
        re_string = r'\b{0}({1}|\d*-(\d+-)*{1})\b'.format(alpha, num)
        relist.append((a, re.compile(re_string)))

    return relist

def extract(s, relist):
   return [v for v, r in relist if r.search(s)] 
```

测试：

```
>>> tokens = ['E1', 'E2', 'E7', 'E3', 'E9', 'E10', 'E12', 'IN1', 'IN2', 'IN4', 'IN10']
>>> relist = make_relist(tokens)
>>> extract("apto E1-E10 tower 1-2 sanit", relist)
['E1', 'E10']
>>> extract("apto IN2-IN1-IN4-E12-IN10 mamp", relist)
['E12', 'IN1', 'IN2', 'IN4', 'IN10']
>>> extract("E-2-7-3-9-12; IN1-4-10 T 1-2 inst. hidr.", relist)
['E2', 'E7', 'E3', 'E9', 'E12', 'IN1', 'IN4', 'IN10'] 
```

请注意，如果您要从中提取大量字符串，这将变得更加高效，因为在这种情况下编译开销时间变得微不足道。

# python - 如何用 2 个参数分割字符串？

> ID：11041996
> 
> 赞同：3
> 
> 时间：2012-06-14T22:04:02.360
> 
> 标签：python, string, split

如果我有一个字符串 thats `'asdf foo\nHi\nBar thing'`，我希望它拆分字符串，所以输出是`['asdf', 'foo', 'hi', 'bar', thing']`. 这本质上是`x.split(' ')`和`x.split('\n')`。我怎样才能有效地做到这一点？我希望它大约有一行长，而不是让 for 循环再次拆分......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T22:05:04.340

省略参数`split()`:`x.split()`将同时分割空格和换行符（以及制表符）。

例子：

```
>>> x = 'asdf foo\nHi\nBar thing'
>>> x.split()
['asdf', 'foo', 'Hi', 'Bar', 'thing'] 
```