# StackOverflow 问答 11739000-11739999

# rest - RESTful URI 设计 - 是用户友好的资源的多个 URI

> ID：11739003
> 
> 赞同：3
> 
> 时间：2012-07-31T11:23:05.890
> 
> 标签：rest, restful-architecture

假设我有以下实体：项目、公司、董事。

以下关系适用：

*   一个项目有一个公司
*   一家公司有一名董事
*   一名董事可以是多家公司的董事
*   一家公司可以管理多个项目

我想象过这样的 URI 设计：

```
 GET  /projects
 GET  /projects/{id}
 GET  /projects/{id}/company
 GET  /projects/{id}/company/director
 PUT  /projects/{id}/company           # makes new/overwrite company
 POST /projects/{id}/company           # updates company
 PUT  /projects/{id}/company/director  # makes new/overwrite director
 POST /projects/{id}/company/director  # updates director 
```

为相同的资源拥有多个 URI 是否可以/用户友好，例如：

```
 POST /companies                       # makes a new company
 POST /companies/{id}                  # updates company
 GET  /companies/{id}
 POST /directors                       # makes a new director
 POST /directors/{id}                  # updates director
 GET  /directors/{id} 
```

这是根据最佳实践进行的良好 URI 设计吗？上述 URI 设计的优缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:57:58.833

URL 的第一种形式暗示了一个树形结构，其中公司属于一个且仅一个项目，董事属于一个且仅一个公司。是这样吗？

如果不是，我更喜欢第二种形式的 URL。您将所有三种资源类型都彼此相邻，没有隐含的树结构。在资源表示中，您将使用链接从项目导航到公司再到董事。

# ios - 如何在iphone的图片上添加文字？

> ID：11739007
> 
> 赞同：1
> 
> 时间：2012-07-31T11:23:15.627
> 
> 标签：ios, image-processing

我需要在 iPhone 中的图像上放置文本。这就像 Eurosport iPhone 应用程序。

[![](../Images/476dbd970cec352196c5630d95f7e031.png)](https://i.stack.imgur.com/9mKrZ.jpg)
[（来源：[mzstatic.com](http://a2.mzstatic.com/us/r1000/092/Purple/v4/fa/d6/9e/fad69e44-29e2-a123-2a74-ad58ba5de36e/mza_1083026897138509692.320x480-75.jpg)）]

以同样的方式，我需要在我的应用程序中放置一个文本。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T11:25:38.447

我找到了两种方法

**1：**

```
 UIImageView *imageView = [[UIImageView alloc] init];
    imageView.frame = CGRectMake(0, 25, 200, 200);
    imageView.image = [UIImage imageNamed:@"Choice set.png"];

    UILabel *myLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 20)];
    myLabel.text = @"Hello There";
    myLabel.textColor = [UIColor whiteColor];
    myLabel.backgroundColor = [UIColor blueColor];
    [imageView addSubview:myLabel];

    [self.view addSubview:imageView];

    [imageView release];
    [myLabel release]; 
```

**2：**

**向 UIImage 添加文本**

```
-(UIImage *)addText:(UIImage *)img text:(NSString *)text1{

   int w = img.size.width;
   int h = img.size.height;
   CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
   CGContextRef context = CGBitmapContextCreate(NULL, w, h, 8, 4 * w, colorSpace, kCGImageAlphaPremultipliedFirst);
   CGContextDrawImage(context, CGRectMake(0, 0, w, h), img.CGImage);

   char* text= (char *)[text1 cStringUsingEncoding:NSASCIIStringEncoding];
   CGContextSelectFont(context, "Arial",20, kCGEncodingMacRoman);
   CGContextSetTextDrawingMode(context, kCGTextFill);
   CGContextSetRGBFillColor(context, 0, 0, 0, 1);
   CGContextShowTextAtPoint(context,10,10,text, strlen(text));
   CGImageRef imgCombined = CGBitmapContextCreateImage(context);

   CGContextRelease(context);
   CGColorSpaceRelease(colorSpace);

   UIImage *retImage = [UIImage imageWithCGImage:imgCombined];
   CGImageRelease(imgCombined);

   return retImage;
} 
```

然后打电话

```
UIImage *image = [UIImage imageNamed:@"myimage.png"];

imageView.image = [self addText:image text:@"Hello there"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:31:52.017

只需简单地制作具有清晰背景的标签。

```
yourLabel.backgroundColor = [UIColor clearColor]; 
```

# python - Django get_models 与模型/__init.py__

> ID：11739011
> 
> 赞同：8
> 
> 时间：2012-07-31T11:23:23.670
> 
> 标签：python, django

我在 django 中使用 get_model 和 get_models 时遇到问题

我在models/下有几个模型

```
 models/blog.py
 models/tags.py
 models/users.py
 models/comments.py
 models/category.py 
```

还有一个`models/__init.py__`

```
from myapp.models.blog import *
from myapp.models.tags import *
from myapp.models.users import *
from myapp.models.comments import *   
from myapp.models.category import * 
```

但是在我的views.py中，我有一些代码可以使用get_model

```
from django.db.models.loading import get_model
blog_class = get_model('myapp', 'blog') #Returns none 
```

当我尝试`get_models('myapp')`它返回一个空列表。

我也试过

```
print(get_app('myapp')) 
```

返回：

```
<module 'myapp.models' from '/var/www/myapp/models/__init__.pyc'> 
```

如果我尝试迭代它

```
for model in get_models(get_app('myapp')):
    print(model) 
```

它什么也不做。有什么我遗漏或没有发现的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T11:30:11.393

因为您尚未在应用程序的 中定义模型，所以您必须为每个模型`models.py`显式设置选项。[`app_label`](https://docs.djangoproject.com/en/dev/ref/models/options/#django.db.models.Options.app_label)

```
class Blog(models.Model):
    title = models.CharField(max_length=30)
    ...

    class Meta:
        app_label = 'myapp' 
```

# mysql - 如何为 phpmyadmin 中的现有表生成创建表脚本？

> ID：11739014
> 
> 赞同：304
> 
> 时间：2012-07-31T11:23:34.247
> 
> 标签：mysql, phpmyadmin

如何为 phpmyadmin 中的现有表生成创建表脚本？

* * *

## 回答 #1

> 赞同：627
> 
> 时间：2012-07-31T11:27:48.553

在 sql 选项卡中使用以下查询：

```
SHOW CREATE TABLE tablename 
```

查看完整查询上面有一个名为+Options的超链接，选择全文

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-07-31T11:28:28.167

运行`SHOW CREATE TABLE <table name>`查询。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-11-18T17:11:25.210

## Mysqladmin 可以完成保存创建表脚本的工作。

**第一步，创建一个表，插入一些行：**

```
create table penguins (id int primary key, myval varchar(50))
insert into penguins values(2, 'werrhhrrhrh')
insert into penguins values(25, 'weeehehehehe')
select * from penguins 
```

**第二步，使用mysql转储命令：**

```
mysqldump --no-data --skip-comments --host=your_database_hostname_or_ip.com -u your_username --password=your_password your_database_name penguins > penguins.sql 
```

**第三步，观察penguins.sql中的输出：**

```
/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
DROP TABLE IF EXISTS `penguins`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `penguins` (
  `id` int(11) NOT NULL,
  `myval` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */; 
```

输出被上面和下面的许多执行条件标记弄乱了。如果您不希望在下一步中使用它们，可以将它们过滤掉。

**第 4 步（可选），以这种方式过滤掉那些额外的执行条件标记：**

```
mysqldump --no-data --skip-comments --compact --host=your_database_hostname_or_ip.com -u your_username --password=your_password your_database_name penguins > penguins.sql 
```

**产生最终输出：**

```
eric@dev /home/el $ cat penguins.sql

DROP TABLE IF EXISTS `penguins`;
CREATE TABLE `penguins` (
  `id` int(11) NOT NULL,
  `myval` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2018-08-24T10:59:33.437

运行查询是 sql tab

> SHOW CREATE TABLE 表名

点击

> +选项 -> 选择全文 -> 点击开始

复制创建表查询并粘贴到要创建新表的位置。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-11-18T17:36:28.603

## 直接查询information_schema.columns：

```
select * from information_schema.columns 
where table_name = 'your_table' and table_schema = 'your_database' 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-12-09T08:32:38.863

这可能是一个迟到的答复。但它可能会帮助其他人。在 MY SQL Workbench 中非常简单（我使用的是 Workbench 6.3 版和 My SQL 5.1 社区版）：右键单击要为其创建脚本的表，选择“复制到剪贴板-> 创建语句”选项。只需粘贴到您想要获取创建脚本的任何文本编辑器中。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-12-13T09:55:50.427

在 sql 选项卡中使用以下查询：

显示创建表 your_table_name

按 GO 按钮

显示表格后，表格上方（+options）超链接。

按+options超链接然后出现一些选项选择（全文）按GO按钮。

显示 sql 查询。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-10-25T11:52:16.893

使用 PHP 函数。

当然查询函数（$this->model）你必须改成你自己的。

```
/**
 * Creating a copy table based on the current one
 * 
 * @param type $table_to_copy
 * @param type $new_table_name
 * @return type
 * @throws Exception
 */
public function create($table_to_copy, $new_table_name)
{
    $sql = "SHOW CREATE TABLE ".$table_to_copy;

    $res = $this->model->queryRow($sql, PDO::FETCH_ASSOC);

    if(!filled($res['Create Table']))
        throw new Exception('Could not get the create code for '.$table_to_copy);

    $newCreateSql = preg_replace(array(
        '@CREATE TABLE `'.$table_to_copy.'`@',
        '@KEY `'.$table_to_copy.'(.*?)`@',
        '@CONSTRAINT `'.$table_to_copy.'(.*?)`@',
        '@AUTO_INCREMENT=(.*?) @',
    ), array(
        'CREATE TABLE `'.$new_table_name.'`',
        'KEY `'.$new_table_name.'$1`',
        'CONSTRAINT `'.$new_table_name.'$1`',
        'AUTO_INCREMENT=1 ',
    ), $res['Create Table']);

    return $this->model->exec($newCreateSql);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-12-28T12:08:50.040

1.  SHOW CREATE TABLE your_table_name => 按 GO 按钮

在显示表格之后，表格上方（ +options ）超链接就在那里。

2.  按（+选项）超链接然后出现一些选项选择（全文）=>按GO按钮。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-07-09T12:13:04.070

1.  选择所需的数据库
2.  选择要***显示创建表的表***
3.  单击**带有已选择的下拉菜单：**并选择**显示创建**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-16T10:52:34.353

我找到了另一种在 sql 文件中导出表的方法。

假设我的桌子是`abs_item_variations`

```
abs_item_variations ->structure -> propose table structure -> export -> Go 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-09-17T13:05:28.210

将整个数据库选择格式导出为 SQL。现在，使用记事本、notepad++ 或任何编辑器打开您下载的 SQL 文件。您将看到数据库的所有表和插入查询。所有脚本都将在那里可用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-14T16:58:53.963

右键单击`table name`->选择`open table`->转到`Info Tab`

并向下滚动以查看创建表脚本

[![在此处输入图像描述](../Images/7e4dd6256db09d32f7d5b54e77514c7a.png)](https://i.stack.imgur.com/Ix8FR.png)

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2017-07-01T15:59:02.790

还有一种方法。在 phpMyAdmin 的左侧面板中选择目标表，单击导出选项卡，取消选择数据块并单击执行按钮。

# mysql - MySQL - 为具有不同条件的组中的每一行获取计数（）

> ID：11739017
> 
> 赞同：3
> 
> 时间：2012-07-31T11:23:41.070
> 
> 标签：mysql

我有一张高分表`scores: (id int, deviceid int, value int, board int)`。我想显示特定玩家的位置。目前我正在这样做（在 PHP 中）：

我选择玩家有分数的所有棋盘和分数本身：

```
select board, min(value) as value
from scores
where deviceid = 1234
group by board 
```

然后对于每一行 ($board,$value) 我选择：

```
select count(id) from scores
where board = $board and value < $value 
```

通过选择分数小于指定值的特定板的行数，我得到玩家的位置（第一个玩家将获得位置 0，因此显示时它将增加 1）

我知道这是非常低效的，所以我正在寻找一种**更快**的方法。它可以在带有游标的存储过程中完成，但是对于 100 个板，我最多需要进行 1+100 次选择。

简而言之，我想在伪 sql 中做这样的事情：

```
select board, min(value) as val,
       count(id) from _this_group_ where value < val
from scores
where deviceid = 1234
group by board 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:50:00.680

```
SELECT scores.board, count(1) AS position
FROM scores
JOIN
  (SELECT board, MIN(value) AS value
   FROM scores
   WHERE deviceid = 1234
   GROUP BY board
  ) player_scores
ON scores.board = player_scores.board
WHERE scores.value < player_scores.value
GROUP BY scores.board 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:32:05.133

您可以尝试以下方法：

```
SELECT a.board, b.val COUNT(1) AS cnt
FROM scores a
    INNER JOIN(
        SELECT board, MIN(value) as val
        FROM scores
        WHERE deviceid = 1234
        GROUP BY board
    ) b
     ON a.board = b.board
    AND a.value < b.val
WHERE a.deviceid = 1234
GROUP BY a.board; 
```

或者

```
SELECT a.board, MIN(a.value) as val,
       (SELECT COUNT(1)
        FROM scores b
        WHERE b.board = a.board AND
        b.value < MIN(a.value)) AS cnt
FROM scores a
WHERE a.deviceid = 1234; 
```

# c# - 如何使用 C# 中的表名从数据库中获取 DataTable 对象？

> ID：11739033
> 
> 赞同：3
> 
> 时间：2012-07-31T11:24:36.103
> 
> 标签：c#, sql, datatable

我正在尝试使用我已经拥有的表名从数据库中获取 DataTable 对象。（我的意思是我想在多个表之间进行选择。为此，我只有一个代表表名的字符串。所以我正在寻找一种方法来获取实际对象。）

我怎样才能做到这一点？

我已经尝试过：

```
DataTable table = new DataTable(TableName); 
```

但我相信这是错误的。（应用程序应该如何知道该表名来自哪里或在哪里搜索它？）

我尝试使用`con.GetSchema("Tables")`，但它只给出了字符串的表名，而不是 DataTable 对象。我也试过这个，但似乎 DataTables 不可枚举：

```
public static DataTable GetTable(string TableName, string conncetionstring)
{
    SqlConnection con = new SqlConnection(conncetionstring);
    foreach (DataTable table in con.GetSchema("Tables"))
    {
        if (table.TableName == TableName)
        {
            return table;
        }
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:32:56.533

你是对的。架构需要出现在某个地方这是我用来连接和获取表的典型代码。

```
string Sql="SELECT * FROM MYTABLE WHERE 1=0";
string connectionstring = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=MYDATA.MDB;"

OleDbConnection new OleDbConnection(connectionstring);
conn.Open();
OleDbCommand cmd = new OleDbCommand(Sql, conn);
OleDbDataAdapter adapter = new OleDbDataAdapter(cmd);
DataTable table = new DataTable();
adapter.Fill(table);
conn.Close(); 
```

# c#-4.0 - 从 Web 应用程序访问 Active Directory

> ID：11739042
> 
> 赞同：0
> 
> 时间：2012-07-31T11:25:15.780
> 
> 标签：c#-4.0, active-directory, windows-server-2008

我真的被这个问题困住了。基本上，我有一个运行 Active Directory 的 Windows 2008r2 服务器。在另一台服务器（不在同一域中）上运行 MVC3 Web 应用程序。我要做的是使用活动目录对用户进行身份验证，并获取一些基本信息，即employeeId。我还希望用户能够通过这个网络应用程序更改他们的密码。

这是一个自定义 Web 应用程序，我不想使用交换之类的东西。

通过在 web.config 中使用广告连接字符串或在我的代码中指定管理员用户名和密码，我在某种程度上设法实现了这一目标。但是，考虑到安全性以及管理员帐户可能会在某些时候更改密码，这并不直观。

我可能是错的，但我想我想做的是以管理员的角色对 AD 进行一些请求。

有什么办法可以做到这一点？

提前致谢！干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T09:09:33.233

我要回答我自己的问题。

解决此问题的最佳方法是将 ADFS 2.0 与基于声明的身份验证一起使用。当用户需要访问时，他/她会被重定向到 ADFS 2.0 的登录页面，并且一旦用户通过身份验证，ADFS 2.0 就会将适当的声明发送回用户（加密）。这些声明可以在使用 WIF 框架的 MVC 3 应用程序中使用，并且可以包含诸如employeeId、FirstName、LastName、Email、DN 等值...取决于如何为该特定应用程序设置 ADFS 2.0。

希望这可以帮助某人。

# mysql - 将行从一个表复制到另一个表，忽略重复项

> ID：11739043
> 
> 赞同：0
> 
> 时间：2012-07-31T11:25:16.323
> 
> 标签：mysql

我试图将行从表复制到另一个仅使用 2 列，因为拖表模式不相同，我收到此错误

操作数应包含 1 列

任何提示我的陈述有什么问题？

```
 Insert table1 ( screenname,list_id )
  Select screenname,list_id
 From table2 As T1
 Where Not Exists    (
                Select 1
                From table1 As T2
                Where 
               (T2.screenname = T1.screenname,T2.list_id = T1.list_id)
                ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:28:21.747

尝试将 where 条件从 更改`(T2.screenname = T1.screenname,T2.list_id = T1.list_id)`为`(T2.screenname = T1.screenname AND T2.list_id = T1.list_id)`

（注意 AND 关键字而不是逗号）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:27:47.477

您是否尝试过 INSERT INTO...ON DUPLICATE KEY 语法？

[在此处](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)查看 MySQL 手册

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T11:30:18.193

您可以在 table1 中的 screenname 和 list_id 列上创建唯一索引然后使用以下语句

> 将忽略插入 table1 ( screenname,list_id ) Select screenname,list_id From table2 As T1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T11:37:11.983

也试试这个查询 -

```
INSERT INTO table1 (screenname, list_id)
  SELECT screenname, list_id FROM table2 t2
    LEFT JOIN table1 t1
      ON t1.screenname = t2.screenname AND t1.list_id = t2.list_id
  WHERE
    t1.screenname IS NULL AND t1.list_id IS NULL; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-02T09:12:51.853

使用简单的 INSERT IGNORE

```
INSERT table1 (screenname, list_id) SELECT screenname, list_id FROM table2 
```

# sql-server - 在 SQL Server 2005 中插入连接结果

> ID：11739048
> 
> 赞同：0
> 
> 时间：2012-07-31T11:25:44.940
> 
> 标签：sql-server, inner-join, full-outer-join

我有两个表，每个表超过 800 行。表名是“教育”和“卫生”。列名“ID”在两个表中都很常见。现在我想将这两个表作为完全外连接加入，我想将此表的结果保存为新表。我可以很容易地加入它，但是如何将这些数据保存为新表。请帮帮我。

```
select * into bc  from education e join sanitation s on e.id=s.id 
```

我在每个表中有大约 30 列。因此我无法为新表显式创建表模式。

我想要两个表中的所有列。我有 20 个表，每行 800 行。从这 20 个表中，我想制作一个主表，将“ID”作为主键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:13:30.877

**示例代码：**

表一：

```
create table dummy1(
id int , fname varchar(50)
)
insert into dummy1 (id,fname) values (1,'aaa')
insert into dummy1 (id,fname) values (2,'bbb')
insert into dummy1 (id,fname) values (3,'ccc')
insert into dummy1 (id,fname) values (3,'ccc') 
```

表二

```
create table dummy2(
id int , lname varchar(50)
)
insert into dummy2 (id,lname)  values (1,'abc')
insert into dummy2 (id,lname)  values (2,'pqr')
insert into dummy2 (id,lname)  values (3,'mno') 
```

现在创建新表 3

```
create table dummy3(
id int , fname varchar(50),lname varchar(50)
) 
```

表 3 的插入查询看起来像

```
insert into dummy3 (id,fname,lname)
 (select a.id,a.fname,b.lname from dummy1  a inner join dummy2 b on a.id=b.id) 
```

表 3 将包含 table1、table2 数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:32:15.680

关注以下：

```
SELECT  t1.Column1, t2.Columnx
INTO    DestinationTable
FROm    education  t1
        INNER JOIN sanitation  t2 ON t1.Id = t2.Id 
```

**编辑**：

**SELECT ***对您不起作用，因为您在两个表中都有一个列 ID。所以上面的解决方案会对你有用。

**编辑：**

1-您可以暂时重命名一个表中的 Id 列，然后尝试

```
2-  SELECT   *
    INTO    DestinationTable
    FROm    education  t1
            INNER JOIN sanitation  t2 ON t1.Id = t2.Id 
```

3-将列名恢复为 Id。

# android - 在 Android 中使用 Web 服务是否需要 WTP 插件？

> ID：11739049
> 
> 赞同：0
> 
> 时间：2012-07-31T11:25:49.723
> 
> 标签：android, eclipse, web-services, plugins, eclipse-wtp

我正在尝试在我的项目中使用 Web 服务，但它不返回任何数据。我在互联网上搜索过，我发现需要 WTP 插件。我正在使用 Eclipse Juno，我尝试为 Eclipse 安装插件，但它给了我一个错误。

```
Cannot complete the install because one or more required items could not be found.
  Software being installed: Web Page Editor (Optional) 2.2.2.v201001271707-43799oB5855B7A2242 (org.eclipse.jst.webpageeditor.feature.feature.group 2.2.2.v201001271707-43799oB5855B7A2242)
  Missing requirement: Java EE Component 1.1.301.v200909030330 (org.eclipse.jst.j2ee 1.1.301.v200909030330) requires 'bundle com.ibm.icu [3.4.4,4.1.0)' but it could not be found
  Missing requirement: Java EE Component 1.1.301.v201001272230 (org.eclipse.jst.j2ee 1.1.301.v201001272230) requires 'bundle org.eclipse.emf.codegen [2.2.0,3.0.0)' but it could not be found
  Missing requirement: Java EE Component 1.1.302.v201004131604 (org.eclipse.jst.j2ee 1.1.302.v201004131604) requires 'bundle org.eclipse.emf.codegen [2.2.0,3.0.0)' but it could not be found
  Missing requirement: Web Plug-in 1.1.301.v200908270924 (org.eclipse.jst.j2ee.web 1.1.301.v200908270924) requires 'bundle org.eclipse.emf.codegen [2.2.0,3.0.0)' but it could not be found
  Missing requirement: Web Plug-in 1.1.301.v200911302230 (org.eclipse.jst.j2ee.web 1.1.301.v200911302230) requires 'bundle org.eclipse.emf.codegen [2.2.0,3.0.0)' but it could not be found
  Cannot satisfy dependency:
    From: JavaServer Faces Tools - Common 1.1.7.v20090903 (org.eclipse.jst.jsf.common 1.1.7.v20090903)
    To: bundle org.eclipse.jst.j2ee.web 0.0.0
  Cannot satisfy dependency:
    From: JavaServer Faces Tools - Common 1.1.9.v201001271707 (org.eclipse.jst.jsf.common 1.1.9.v201001271707)
    To: bundle org.eclipse.jst.j2ee 0.0.0
  Cannot satisfy dependency:
    From: JavaServer Faces Tools - JSP Core Pagedesigner 1.1.3.v201002111131 (org.eclipse.jst.pagedesigner.jsp.core 1.1.3.v201002111131)
    To: bundle org.eclipse.jst.jsf.common [1.0.0,2.0.0)
  Cannot satisfy dependency:
    From: Web Page Editor (Optional) 2.2.2.v201001271707-43799oB5855B7A2242 (org.eclipse.jst.webpageeditor.feature.feature.group 2.2.2.v201001271707-43799oB5855B7A2242)
    To: org.eclipse.jst.pagedesigner.jsp.core [1.1.3.v201002111131] 
```

而且在我的 Eclipse 中，*Window > Preferences*没有 Web 服务选项卡，我在一个教程视频中看到过，那么有必要在 Android 中使用 Web 服务吗？如果有人有 Eclipse Juno 的 WTP 插件的链接，请告诉我。

我试过[这个](http://download.eclipse.org/webtools/updates)，但它显示了我上面提到的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:11:22.290

您是否正在以任何方式开发您的 Android 客户端将使用的 Web 服务？如果答案是否定的，那么我认为你甚至不需要 WTP。WTP 只是为了帮助您开发应用程序的服务器端。

# javascript - 如何在javascript中执行“strtolower”、“str_replace”和“preg_replace”？

> ID：11739050
> 
> 赞同：0
> 
> 时间：2012-07-31T11:25:49.647
> 
> 标签：javascript

我怎样才能在javascript中做到这一点？

```
$name = $xml->name;
$file_name = strtolower($name);
$file_name = str_replace(array('-','  ',' ','å','ä','ö'), array('',' ','-','a','a','o'), $file_name);
$file_name = preg_replace("/[^a-z0-9-]+/i", "", $file_name); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:28:27.433

```
toLowerCase()   Converts a string to lowercase letters
toUpperCase()   Converts a string to uppercase letters
replace() Searches for a match between a substring (or regular expression) and a string, and replaces the matched substring with a new substring
search() Searches for a match between a regular expression and a string, and returns the position of the match 
```

有关详细信息，请参见此处：http: [//www.w3schools.com/jsref/jsref_obj_string.asp](http://www.w3schools.com/jsref/jsref_obj_string.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:31:20.600

Mozilla 为您提供了一个很棒的参考资料。我在下面的回复中包含了一些链接。

查看[toLocaleLowerCase](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/toLocaleLowerCase)以降低您的字符串的大小写。然后继续[替换](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)它在许多方面实际上非常相似`preg_replace`，因为它主要基于正则表达式。

阅读量很大，但不应该太难！祝你好运！

# c# - 从另一个表单启用按钮并关闭表单

> ID：11739051
> 
> 赞同：0
> 
> 时间：2012-07-31T11:25:56.697
> 
> 标签：c#, winforms, button

我有 Form1 和 Form2

Form1 我有一个禁用的按钮，但如果我单击 Form1 上的菜单条，我会转到 Form2。在 Form2 上，我登录到数据库。成功登录后，我希望 Form2 关闭，并且我希望 Form1 上的按钮启用。

这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
{
    SqlConnection connection = new SqlConnection(@"...");
    SqlCommand command = new SqlCommand("SELECT * FROM UserT WHERE UserName ='" + 
        textBox1.Text + "' AND password ='" + 
        textBox2.Text + "'", 
        connection);

    connection.Open();
    SqlDataReader reader = null;
    reader = command.ExecuteReader();
    if (reader.Read())
    {
        MessageBox.Show("Welcome " + reader["UserName"].ToString());
        Form1 lfm = new Form1();
        lfm.button1.Enabled = true;
        Form2 fm = new Form2();
        fm.Close();
    }
    else
    {
        MessageBox.Show("Username and password " + 
            textBox1.Text + "does not exist");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:37:03.717

使用 ShowDialog 打开您的第二个表单，然后使用 ShowDialog 函数返回的 DialogResult 在您关闭第二个表单时启用第一个表单中的按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:38:13.133

您正在创建 Form1 的新实例。不要那样做，而是需要将 Form2 显示为对话框并将对话框结果设置为 OK。

像这样

表格1 -

```
Button1_Click()
{
Form2 frm2 = new Form2();
if(frm2.ShowDialog() == DialogResult.OK)
{
button1.Enabled = true;
}
} 
```

或者

```
button1.Enabled = form2.ShowDialog() == DialogResult.OK; 
```

在 Form2 中，成功登录后将 DialogResult 设置为 OK。

```
if(reader.Read())
{
DialogResult = DialogResult.OK;
Close(); //It may not required.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:39:52.790

您不应创建 Form1 和 Form2 的另一个实例。相反，您应该拥有 Form1 的公共属性，以便您可以启用您的按钮。如下面的代码所示：

```
//Form 2
public Form1 MyMainForm {get; set;}

private void button1_Click(object sender, EventArgs e)
{
    //Your code ...

    if (reader.Read())
    {
        MessageBox.Show("Welcome " + reader["UserName"].ToString());

        MyMainForm.button1.Enabled = true;

        //If you are already id Form2
        this.Close();
    }
    else
    {
        MessageBox.Show("Username and password " + 
            textBox1.Text + "does not exist");
    }
} 
```

当从 Form1 调用 Form2 时，您设置了这个 MyMainForm。像这样 ：

```
Form2 f = new Form2() {MyMainForm = this}; 
```

PS：你按钮的访问修饰符应该是公开的。

# javascript - 鼠标悬停 改变 span 的颜色：第一个子颜色

> ID：11739056
> 
> 赞同：0
> 
> 时间：2012-07-31T11:26:00.850
> 
> 标签：javascript, html, css, onmouseover

我在**这里遇到问题：**

```
<ul id="parentnode">
   <li><span>I need color change here</span><span>no color</span><span>nocolor</span></li>
   <!-- continuing li tags from database -->
</ul> 
```

在这里，`Onmouseover` `<li>`我必须更改标签内的**文本**`<span>` `first-child`颜色。
是否可以通过**Javascript**进行更改，如何更改？

**注意：**不可能给标签或标签提供**id**，因为它们是从数据库中动态呈现的。`<li>``<span>`

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:32:06.777

您可以通过以下css来完成

```
#parentnode li:first-child:hover span:first-child { color: red; }​ 
```

[**看演示**](http://jsfiddle.net/akhurshid/CgCVP)

*编辑：链接无效，删除斜线

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:29:51.647

在你的 CSS 中试试这个：

```
ul#parentnode > li:first-child:hover > span:first-child {
    color: blue;
} 
```

并用你想要的任何颜色改变“蓝色”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:33:47.510

```
ul#parentnode > li:first-child:hover > span:first-child {
    color: ;
} 
```

# asp.net - 内容中的 HTML 标签

> ID：11739059
> 
> 赞同：0
> 
> 时间：2012-07-31T11:26:13.030
> 
> 标签：asp.net

我正在一个名为 as 的表上实现全文搜索，该表`tbljobs`名为`jobdescription`. 在前端，我在描述中获得了 html 标签。我正在显示记录，`GridView`我`Gridview`正在`RowDataBound`解码文本。我在`Gridview`'s`RowDataBound`事件中使用以下代码：

```
protected void GridNewlyPostedJobs_RowDataBound(object sender, GridViewRowEventArgs e)
{
if (e.Row.RowType == DataControlRowType.DataRow)
{
 string decodedText =      HttpUtility.HtmlDecode(((Label)e.Row.FindControl("lblJobDescription")).Text);
            ((Label)e.Row.FindControl("lblJobDescription")).Text = decodedText;
         }
    } 
```

但没有任何效果..!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:46:44.850

用于`DataRowView`获取数据...

```
protected void GridNewlyPostedJobs_RowDataBound(object sender, GridViewRowEventArgs e) 
{ 
   DataRowView rowView = (DataRowView)e.Row.DataItem; 
   if (e.Row.RowType == DataControlRowType.DataRow) 
   {  
     string decodedText = HttpUtility.HtmlDecode(rowView["jobdescription"]);             
     ((Label)e.Row.FindControl("lblJobDescription")).Text = decodedText;         
   }     
} 
```

# php - PHP 中 $this->a 和 $this->$b 的区别

> ID：11739064
> 
> 赞同：4
> 
> 时间：2012-07-31T11:26:27.040
> 
> 标签：php, oop

有什么区别：

`$this->$a`和`$this->b`

在我的课堂上，我有这个：

```
class someClass{
    public $a;
    function aFunction(){
      $this->a = 5;
      $this->$b = 7;
    }
 } 
```

在`$this->$b`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T11:29:11.017

有很多不同：

`$this->a`指`$a`您的班级的财产

`$this->$b`另一方面，通过名称来引用属性，该名称`$b`作为字符串存储在变量中：

```
$b = "a";
$this->$b equals $this->a

$b = "hello"
$this->$b equals $this->hello 
```

# python - Python 读取复杂的 .txt 文件

> ID：11739068
> 
> 赞同：1
> 
> 时间：2012-07-31T11:26:54.183
> 
> 标签：python, python-2.7

我有一个包含如下数据的 .txt：

```
Header:ensembl gene ID|Ensembl Transcript ID|CDS start|CDS end|5'UTR start|5'UTR end|3'UTR start|3'UTR end|Transcripts start|Transcripts end
>ENSMUSG00000002477|ENSMUST00000002551|*some junk information*...etc.|
TCGCGCGTCCGCAGGCCTCCGCGCGCTTTTCCG....etc.
>ENSMUSG00000002835|ENSMUST00000002914|...etc.|
GCAGAAGTGACACCGGTGGGAGGCG...etc. 
```

我写了一些代码来让我明白我的名字 ENSMUSG0000000xxxx

我想从 .txt 中挑选出我的名字，下一行例如“TACGTACG”以三重形式读取，例如“TAC”“GTA”

然后我想做同样的事情，但不是从第一个字母开始阅读，而是从第二个字母开始，使用上面的例子，它将阅读“ACG”和“TAG”

和同样的事情，但跳过前 2 个字母

我真的不知道我该怎么做，尤其是阅读 3 个字母的部分。有人可以帮帮我吗？

这些是我到目前为止的代码：

```
import csv
import os.path
#open files + readlines
with open("C:/Users/Ivan Wong/Desktop/Placement/Lists of targets/Mouse/UCSC to Ensembl.csv", "r") as f:
reader = csv.reader(f, delimiter = ',')
#find files with the name in 1st row
for row in reader:
    graph_filename = os.path.join("C:/Users/Ivan Wong/Desktop/Placement/Interesting reading/3'ORF",row[0]+"_nt_counts.txt.png")
    if os.path.exists(graph_filename):
        y = row[0]+'_nt_counts.txt'  
        r = open('C:/Users/Ivan Wong/Desktop/Placement/fp_mesc_nochx/'+y, 'r')
        k = r.readlines()
        r.close
        del k[:1]
        k = map(lambda s: s.strip(), k)
        interger = map(int, k)   
        import itertools
        #adding the numbers for every 3 rows
        def grouper(n, iterable, fillvalue=None):
            "grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
            args = [iter(iterable)] * n
            return itertools.izip_longest(*args, fillvalue=fillvalue)
        result = map(sum, grouper(3, interger, 0))
        e = row[1]
cDNA = open('C:/Users/Ivan Wong/Desktop/Placement/Downloaded seq/Mouse/cDNA.txt', 'r')
q = cDNA.readlines()
cDNA.close
#To delete the 1st line that I do not want at all
del q[:1] 
```

现在我只有一个想法，我想逐步分解它们

第一个：我想从我的 .txt（命名为 q）中找出列表中的名称（我将其命名为 e）

第二：我想让它读取下一行，直到它到达另一个名字（e）

第三：将我读到的那些行分成一个字符串，例如“A”、“T”、“C”、“G”、“A”、“A”等。

第四：读3个字母——“ATC”、“GAA”

第 5 步：将它们写入文件，然后返回第 4 步，但这次要从第 2 个字母开始

第 6 步：基本上是第 5 步，但这次从第 3 个字母开始

虽然我有这个想法，但我没有这样做的编程知识，有人可以帮助我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:57:54.463

由于这不是家庭作业，因此这是一种开始的方法。假设您感兴趣的行是那些不以`'>'`切片操作开始的行将在这里有所帮助。

```
with open('data.txt') as inf:
    for line in inf:
        if not line.startswith('>'):
            strings3 = [line[i:i+3]for i in range(len(line))] 
```

将在每一行收集您感兴趣的 3 个字母序列：

输入线：

```
GCAGAAGTGACACCGGTGGGAGGCG 
```

输出

```
['GCA', 'CAG', 'AGA', 'GAA', 'AAG', 'AGT', 'GTG', 'TGA', 'GAC', 'ACA', 'CAC', 'ACC', 'CCG', 'CGG', 'GGT', 'GTG', 'TGG', 'GGG', 'GGA', 'GAG', 'AGG', 'GGC', 'GCG', 'CG\n', 'G\n', '\n'] 
```

请注意，如果行中的字符数不能被 3 整除，您将得到一些较短的字符串和一些换行符。

您还可以重新使用`grouper`您最近提出的另一个问题中的功能。

# c# - 连接 3 个不同的数据库

> ID：11739075
> 
> 赞同：-7
> 
> 时间：2012-07-31T11:27:23.657
> 
> 标签：c#, asp.net, .net

我必须连接 3 个不同的数据库。我怎样才能做到这一点？我正在使用 Visual Studio 2010 中的 Web 应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:35:20.457

如果你想同时为不同的事情使用 3 个不同的数据库，那么你必须有 3 个不同的连接字符串。

但是，如果您想一次更改 3 个不同的数据库，那么您必须具有数据访问层类/命名空间之类的东西。

或使用通用数据提供程序，如 ODBC/OleDB 连接。

我希望它有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:34:57.097

如果数据库都位于同一个数据源上，那么您将连接字符串设置为指向 [master] 作为初始目录。然后，您可以执行以下查询：

```
select * from [database].[schema].[table] 
```

然而，这并不理想。您应该做的是在 web.config 中为每个数据库创建三个单独的连接字符串，并在需要时为每个数据库创建**SqlConnection**对象，也许使用类似于[存储库模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)的东西。

如果您的数据库托管在单独的数据源上，并且您不希望 web.config 中有多个连接字符串，那么您可以查看[链接服务器](http://www.databasejournal.com/features/mssql/article.php/3085211/Linked-Servers-on-MS-SQL-Part-1.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:47:55.660

是的，你可以这样做，你必须去你的 web.config 文件并写这个。

```
<configuration>
<connectionStrings>
<add name="First" connectionString="..."/>
<add name="Second" connectoinString="..."/>
<add name="Third" connectionString="..."/>
</connectionStrings>
</configuration> 
```

您还必须更改每个连接的名称和 connectionString。

# javascript - 在我的 iOS 应用程序中集成 jquery-javascript 项目

> ID：11739077
> 
> 赞同：1
> 
> 时间：2012-07-31T11:27:27.137
> 
> 标签：javascript, ios, uiwebview, uicolor

我试图在图像中获得突出的颜色。最初我试图在[这篇文章](http://www.iphonedevsdk.com/forum/iphone-sdk-development/103877-get-prominent-colors-in-an-image.html)中设置颜色。但是我的客户对此并不满意，因为它只返回平均颜色集，而不是确切的颜色。[因此，现在我试图通过此链接](http://lokeshdhakar.com/projects/color-thief/)中找到的逻辑来设置主要颜色。但问题是代码在 jQuery 和 JavaScript 中。似乎很容易在网络中实现，因为代码非常简单

```
myImage = $('#myImage');
dominantColor = getDominantColor(myImage);
paletteArray = createPalette(myImage, 10); // 2nd argument sets # of colors in palette 
```

我浏览了如何在 iOS 中执行 JS 并参考了[这个链接](https://stackoverflow.com/a/8436281/1424174)和[这个链接](https://stevenpsmith.wordpress.com/2011/01/20/executing-javascript-from-objective-c-in-an-ios-app/)做了如下

```
[_webView loadHTMLString:@"<script src=\"color-thief.js\"></script>" baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] resourcePath]]];

    NSString * imgName = [[NSBundle mainBundle] pathForResource:@"4" ofType:@"jpg"];
//    UIImage * img = [UIImage imageNamed:imgName];
    int colorCount = 9;

    NSString *function1 =[[NSString alloc] initWithFormat: @"createPalette(%@, %d)", imgName, colorCount];
//    NSString *function2 = [[NSString alloc] initWithFormat: @"getAverageRGB(%@)", imgName];
    NSString *result = [_webView stringByEvaluatingJavaScriptFromString:function1];

    NSLog(@"%@ result %@", result, [_webView stringByEvaluatingJavaScriptFromString:funcion1]); 
```

但我无法得到任何结果。其为空。我错过了什么？有人可以指出我出了什么问题吗？任何及时的帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T08:13:37.740

您确定您的网页确实加载了 jQuery 库（从磁盘或在线）？

您可以使用 safari 调试 webview，以检查在模拟器或您的设备上打开 webview 时出现的问题。[这是来自苹果的指南，](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/DebuggingSafarioniPhoneContent/DebuggingSafarioniPhoneContent.html)可帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T16:12:50.443

我有同样的问题。您需要一些不同的功能，显式制作`HTMLImageElement`并`.toString()`在 getPalette 结束时。还有一些奇怪的 Safari 行为，它只适用于第二个镜头：

```
let function = "var colorThief = new ColorThief(); var image = new Image(); image.src='\(imgName)'; colorThief.getPalette(image, 5).toString();"

let result1 = self.webView.stringByEvaluatingJavaScriptFromString(function)!
// for some reason result1 is always empty, but if we evaluate the same function second time after some time interval we will get the results.

sleep(1)

let result2 = self.webView.stringByEvaluatingJavaScriptFromString(function)!
// result2 is string of rgb components separated by commas 
```

# html - 在输入中使用模式时如何更改警告文本？

> ID：11739079
> 
> 赞同：22
> 
> 时间：2012-07-31T11:27:30.193
> 
> 标签：html

当我在这样的输入中使用模式时：

```
<input type="text" value="" pattern="(\d|(\d,\d{0,2}))"> 
```

我收到带有文本的弹出警告。如何轻松更改此文本？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-31T11:44:50.463

```
<input type="text" value="" pattern="(\d|(\d,\d{0,2}))" title="YOUR_WARNING_TEXT" > 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-31T11:33:35.777

显示的文本可以在标签的`title`属性中定义。`input`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-06-05T13:06:01.353

```
<input type="text" value="" pattern="(\d|(\d,\d{0,2}))" oninvalid="this.setCustomValidity('ERROR_TEXT')" oninput="this.setCustomValidity('')"/> 
```

试试这个代码，输入后更正以清除...

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-31T11:33:51.457

这个问题在过去已经得到了回答。请参阅以下 URL 以获得答案：[HTML5 表单必需属性。设置自定义验证消息？](https://stackoverflow.com/questions/5272433/html5-form-required-attribute-set-custom-validation-message)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-05-15T09:18:56.200

`title`附加到模式警告中。请记住，警告会被翻译成浏览器语言，这会使英文字符串看起来很奇怪。

这是我发现完全替换警告的唯一方法：

```
<input type="text" required pattern="PATTERN" oninvalid="invalid" oninput="invalid"> 
```

```
/**
 * Shows a custom validity message
 * @param e - event
 */
function invalid(e) {
  if (!/PATTERN/.test(e.target.value)) { // somehow validity.valid returns a wrong value
    e.target.setCustomValidity('INVALID')
  } else {
    e.target.setCustomValidity('')
  }
} 
```

验证表单后，警告会不断弹出，直到值与模式匹配。如果`input`事件只是`setCustomValidity('')`按照大多数其他答案中的建议进行设置，则会返回默认警告。

# cruisecontrol.net - 巡航控制支持的技术

> ID：11739081
> 
> 赞同：1
> 
> 时间：2012-07-31T11:27:45.183
> 
> 标签：cruisecontrol.net, cruisecontrol

有人可以让我知道所有编程语言巡航控制支持E，G：> .net java等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:15:49.240

**支持的操作系统**：

*   CruiseControl.NET 需要 dotNET 框架 >2.0 的 Windows 或 Mono 框架 >2.10 的 Linux
*   CruiseControl 是跨平台的，任何带有 JVM 的 windows / linux 配置都可以运行它（由 java 提供支持）。

**编译器支持**：

*   对编译器没有限制。可以执行任何命令行编译器。一些编译器对日志结果有更好的支持（MsBuild，gcc ...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:30:20.533

> CruiseControl 是用 Java 编写的，但用于各种项目。为 Ant、NAnt、Maven、Phing、Rake 和 Xcode 提供了构建器，以及可与任何命令行工具或脚本一起使用的包罗万象的 exec 构建器。

见：[http ://cruisecontrol.sourceforge.net/](http://cruisecontrol.sourceforge.net/)

# asp.net - 如何验证 jQuery AJAX 调用 ASP.net

> ID：11739086
> 
> 赞同：0
> 
> 时间：2012-07-31T11:27:58.867
> 
> 标签：asp.net, jquery, httphandler

我有一个 Web 应用程序，我在其中使用 http-handlers 和 jQuery 进行 AJAX 调用。
现在的问题是用户可以在浏览器中键入由 jQuery 生成的相同 URL 并且正在执行操作。
我可以使用查询字符串发送一些令牌，然后在服务器端我可以在执行任何操作之前查找正确的令牌。
希望我正确地写了我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:43:41.810

您可能需要以类似于在 MVC 框架中处理它的方式来处理它。 [这](https://stackoverflow.com/questions/4392836/how-to-check-if-request-is-ajax-or-not-in-codebehind-asp-net-webforms)是一个类似的帖子，描述了一个潜在的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:28:50.957

**上述技术称为**

> 跨站请求伪造

**风险影响**

> 攻击者可以劫持登录的用户会话以执行恶意交易。

**建议**

> 建议为所有交易页面实现页面令牌（随机令牌作为请求中的附加参数）。这个令牌应该是随机生成的，并且对于每个用户来说应该是唯一的。

建议的网址是

[http://www.owasp.org/index.php/CSRF_Guard](http://www.owasp.org/index.php/CSRF_Guard)
[http://www.cgisecurity.com/csrf-faq.html](http://www.cgisecurity.com/csrf-faq.html)

```
var cg = new CSRFGuard(); 
cg.SetupCSRFTokenNameAndValue(); 
SessionManager.CustomerConfig.CsrfTokenName = cg.CsrfTokenName; 
SessionManager.CustomerConfig.CsrfTokenValue = cg.CsrfTokenValue; 
```

非常感谢。

# android - Android：如何将菜单项添加到 ActionBarSherlock MapActivity

> ID：11739088
> 
> 赞同：1
> 
> 时间：2012-07-31T11:28:10.910
> 
> 标签：android, android-actionbar, menuitem, actionbarsherlock, mapactivity

我在我的项目中使用[ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock)和[ActionBarSherlock-Plugin-Maps](https://github.com/JakeWharton/ActionBarSherlock-Plugin-Maps)。我想将菜单项添加到我的操作栏，`MapActivity`因为标准活动可能继承自`SherlockActivity`. 以下代码示例显示了如何创建图标。

```
public class CustomSherlockActivity extends SherlockActivity {
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add("Save")
            .setIcon(R.drawable.ic_compose)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
        return true;
    } 
```

但是，我**不能**`MapActivity`在我的that extends中使用相同的方法`SherlockMapActivity`。该方法`SherlockMapActivity#onCreateOptionsMenu`已定义`final`。这里是[源代码`SherlockMapActivity`](https://github.com/JakeWharton/ActionBarSherlock-Plugin-Maps/blob/master/plugin/src/main/java/com/actionbarsherlock/app/SherlockMapActivity.java)。那么，我应该如何向操作栏添加操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:52:40.240

`Menu`您导入了错误的类。确保您是从`com.actionbarsherlock.view`包中导入的。

# c# - 使用反射确定c#中某个类型使用的所有类型

> ID：11739096
> 
> 赞同：5
> 
> 时间：2012-07-31T11:28:29.890
> 
> 标签：c#, reflection

如果我有

```
class A
{
   public void DoStuff()
   {
      B b;
   }
}

struct B {}
struct C {} 
```

我`typeof(A)`有

我想获得 A 使用的所有类型的列表。在这种情况下，它会是`typeof(B)` 而不是`typeof(C)`。

有没有一种很好的方法可以通过反射来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T11:39:30.900

您需要查看[MethodBody](http://msdn.microsoft.com/en-us/library/system.reflection.methodbody)类（在链接中有一个很好的使用示例）。这将让您编写如下代码：

```
MethodInfo mi = typeof(A).GetMethod("DoStuff");
MethodBody mb = mi.GetMethodBody();
foreach (LocalVariableInfo lvi in mb.LocalVariables)
{
    if (lvi.LocalType == typeof(B))
        Console.WriteLine("It uses a B!");
    if (lvi.LocalType == typeof(C))
        Console.WriteLine("It uses a C!");
} 
```

# android - 启动配置活动时调用的小部件 onUpdate

> ID：11739098
> 
> 赞同：44
> 
> 时间：2012-07-31T11:28:31.873
> 
> 标签：android, android-widget, broadcastreceiver, android-manifest, android-appwidget

我正在实现一个小部件，我面临以下问题：

**1)** `onUpdate`当我将小部件添加到主屏幕时调用，即使我指定了配置活动。我将它添加到主屏幕后，立即`APPWIDGET_ENABLED`发送广播，`APPWIDGET_UPDATE`然后启动配置活动..这是一个错误吗？在配置活动返回之前，我应该如何理解`onUpdate`正在调用的方法？我可以通过共享偏好值来做到这一点，但我希望它的行为与开发人员指南中所写的一样，即`onUpdate`不应调用该方法。

**2)** `onUpdate`不是每秒钟调用一次`updatePeriodMillis`，它已设置为`10000`，即`10`用于测试目的的秒数。我是否遗漏`receiver`了 Manifest 文件中的声明中的某些内容？我不断收到 Lint 警告*导出的接收器不需要许可*，但我认为这是 Lint 问题，而不是我的错。 **编辑**：我刚刚在参考文档中找到了这个：*注意：使用 updatePeriodMillis 请求的更新不会每 30 分钟发送一次以上。*因此，小部件没有更新我指定的频率并且我已将时间更改为`1800000`毫秒是正确的。

**3）**我想将自己的广播动作传递给小部件提供者，`receiver`在 Manifest 中添加另一个块针对相同的提供者类是否正确，或者我应该只在`intent-filter`包含该动作的内容中添加另一个意图`APPWIDGET_UPDATE` 动作？顺便说一句，我已经评论了我的第二个`receiver`块，这不是上述问题的原因。我创建了另一个`receiver` 块，因为我想将其声明为未导出，以便`intent-filter` 仅由我的应用程序代码而不是其他任何人触发该操作。

**AndroidManifest.xml**

```
 <receiver android:name="MyWidgetProvider" 
        android:exported="true">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/my_widget_info" />
    </receiver>
    <receiver android:name="MyWidgetProvider" 
        android:exported="false">
        <intent-filter>
            <action android:name="org.test.mywidget.FORCE_SMALL_WIDGET_UPDATE" />
        </intent-filter>
    </receiver> 
```

**my_widget_info.xml**

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="294dp"
    android:minHeight="110dp"
    android:updatePeriodMillis="1800000"
    android:initialLayout="@layout/my_widget_layout"
    android:configure="org.test.mywidget.MyWidgetConfiguration" 
    android:resizeMode="none">
</appwidget-provider> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-28T21:45:34.720

在深入研究源代码后提供答案：

**1)**这是预期的行为，请参见[此处](https://developer.android.com/guide/topics/appwidgets/index.html#AppWidgetProvider)

> 当用户添加 App Widget 时也会调用该方法

**2）**似乎您已经找到了自己的答案。对于其他寻找文档的人，请转到[此处](https://developer.android.com/reference/android/appwidget/AppWidgetProviderInfo.html#updatePeriodMillis)

> 注意：使用 updatePeriodMillis 请求的更新不会每 30 分钟发送一次以上

**3）**由于`AppWidgetProvider`extends`BroadcastReceiver`但未声明为final，您可以从第二个接收器添加操作

```
<receiver android:name="MyWidgetProvider" 
        android:exported="true">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            <action android:name="org.test.mywidget.FORCE_SMALL_WIDGET_UPDATE" />
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/my_widget_info" />
    </receiver> 
```

那么你可以在你的`MyWidgetProvider`类中覆盖 onReceive 并且如果动作是你的自定义动作处理它，否则调用 super.onRecieve(Context context, Intent intent) 像这样：

```
@Override
public void onReceive(Context context, Intent intent) {
    if(intent.getAction()
         .equals("org.test.mywidget.FORCE_SMALL_WIDGET_UPDATE")){
        // handle your action
    } else {
        super.onRecieve(context, intent);
    }
} 
```

根据指南：

> AppWidgetProvider 只是一个便利类。如果您想直接接收 App Widget 广播，您可以实现自己的 BroadcastReceiver 或覆盖 onReceive(Context, Intent) 回调。

需要注意的一点是，远程视图的更新只会在 updatePeriodMillis 被调用，无论您是否将自己的操作添加到 Intent 以供提供者处理。

祝你好运，编码愉快！

# mysql - MySQL 基于时间的约束

> ID：11739101
> 
> 赞同：0
> 
> 时间：2012-07-31T11:28:46.483
> 
> 标签：mysql, constraints

我有一个带有这两个表的拍卖应用程序（这显然是高度简化的）：

```
create table auctions (
   auction_id int,
   end_time datetime
);

create table bids (
   bid_id int,
   auction_id int,
   user_id int,
   amount numeric,
   bid_time timestamp,
   constraint foreign key (auction_id) references auctions (auction_id)
); 
```

我不想在拍卖结束后对拍卖出价。换句话说，只有当 bid_time 早于该拍卖的 end_time 时，才应允许 bids 表中的行。在 MySQL 中执行此操作的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:44:14.167

```
Insert into bids (auction_id, user_id, amount, bid_time)
Select auction_id, [USER_ID], [AMOUNT], [TIMESTAMP]
From auctions
WHERE UNIX_TIMESTAMP() <= UNIX_TIMESTAMP(end_time) 
```

当然你必须替换'[]'值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:59:13.353

不幸的是 MySQL 没有`CHECK`约束特性。但是您应该能够使用触发器来强制执行此操作。但是，MySQL 触发器支持不如其他 RDBMS-es 先进或优化得好，如果这样做，您将遭受相当大的性能损失。因此，如果这是一个具有大量并发用户的实时交易系统，您应该寻找另一种解决方案。

```
CREATE TRIGGER bir_bids
BEFORE INSERT ON bids
FOR EACH ROW
BEGIN
    DECLARE v_end_time datetime;
    -- declare a custom error condition. 
    -- SQLSTATE '45000' is reserved for that.
    DECLARE ERR_AUCTION_ALREADY_CLOSED CONDITION FOR SQLSTATE '45000';

    SELECT end_time INTO v_end_time
    FROM   auctions
    WHERE  auction_id = NEW.auction_id;

    -- the condition is written like this so that a signal is raised 
    -- only in case the bid time is greater than the auction end time.
    -- if either bid time or auction end time are NULL, no signal will be raised.
    -- You should avoid complex NULL handling here if bid time or auction end time
    -- must not be NULLable - simply define a NOT NULL column constraint for those cases.
    IF NEW.bid_time > v_end_time THEN
        SIGNAL ERR_AUCTION_ALREADY_CLOSED;
    END IF;
END: 
```

请注意，该`SIGNAL`语法仅从 MySQL 5.5（当前为 GA）开始可用。触发器从 MySQL 5.0 开始可用。因此，如果您需要在 5.5 之前的 MySQL 版本中实现这一点，您需要解决无法发出信号的问题。您可以通过对数据进行一些更改来保证`INSERT`失败。例如你可以写：

```
 IF NEW.bid_time > v_end_time THEN
        SET NEW.auction_id = NULL;
    END IF; 
```

由于在表`acution_id`中声明`NOT NULL`，数据的状态将是不能插入的。缺点是您将得到一个 NOT NULL 约束违规，应用程序将不得不猜测这是由于此触发器触发还是由于“真实”NOT NULL 约束违规。

有关详细信息，请参阅：[http](http://rpbouman.blogspot.nl/2009/12/validating-mysql-data-entry-with_15.html) ://rpbouman.blogspot.nl/2009/12/validating-mysql-data-entry-with_15.html和[http://rpbouman.blogspot.nl/2006/02/dont-you-需要正确的错误处理.html](http://rpbouman.blogspot.nl/2006/02/dont-you-need-proper-error-handling.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:38:45.073

而是做一个简单的事情来创建列名状态。将其类型设置为枚举。当您想阻止它时，将其值更新为 0。默认值应为 1 表示打开。0 表示关闭

# linux - MPlayer — 改变视频文件的亮度/对比度并保存输出

> ID：11739104
> 
> 赞同：1
> 
> 时间：2012-07-31T11:29:01.440
> 
> 标签：linux, multimedia, brightness, mplayer, contrast

我需要永久更改视频的亮度和对比度，我试过这个：

```
mplayer -vf eq=50:50 a.mp4 -dumpstream
mv stream.dump b.mp4 
```

但它保存为一个看起来像原始文件的文件。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:24:14.063

您想使用 mencoder 对视频进行转码以应用视频过滤器`eq=50:50`。当您`-dumpstream`与 mplayer 一起使用时，它只是在将视频过滤器应用于播放时转储流。查看 mencoder 选项，但您需要选择视频编解码器和该编解码器的一些选项（如比特率）。然后您可以应用亮度和对比度过滤器。

# macos - 在mac上，如何添加环境变量的路径？

> ID：11739105
> 
> 赞同：1
> 
> 时间：2012-07-31T11:29:01.487
> 
> 标签：macos, gcc

我在mac上使用opencv，每次编译程序时，我都必须输入：

```
g++ -I /usr/local/include -L /usr/local/lib main.cpp 
```

我可以做些什么来避免输入 -I 和 -L 参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:41:54.277

创建一个 Makefile：

```
CXXFLAGS=-I /usr/local/include -O3 -DSOMETHING
LDFLAGS=-L /usr/local/lib
LIBS=-lwhatever

main: main.o
    $(LD) -o $@ $* $(LDFLAGS) $(LIBS)

main.o: main.cpp 
```

然后只需`make`在命令提示符下键入：

```
$ make 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:51:48.420

trojanfoe 几乎是正确的，但 makefile 没有使用常规名称。如果是这样，那就更简单了：

```
CXXFLAGS=-I /usr/local/include -O3 -DSOMETHING
LDFLAGS=-L /usr/local/lib
LDLIBS=-lwhatever 
```

使用该 makefile，您只需键入`make main`并 make 将使用其隐式规则来编译 C++ 文件

# iis-7 - 如何将 301 重定向从 IIS 6 移动到 IIS 7？

> ID：11739110
> 
> 赞同：1
> 
> 时间：2012-07-31T11:29:27.150
> 
> 标签：iis-7, iis-6

我正在将站点从 Windows Server 2003/IIS6 移动到 Windows Server 2008 R2/IIS7。假设可以完成，如何将`301`重定向从 IIS 6 安装移动到新的 IIS 7 安装？（我很惊讶我在这里或谷歌都找不到这个问题的答案。）

**编辑：**`301`或者问另一种方式，当从 IIS 6 迁移到 IIS 7 时，大型站点如何处理现有重定向？我只有 100 多个重定向要迁移，但我不想手动将它们重新输入到 IIS 7 中，这是肯定的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T00:46:11.160

Overkill IMO，但它有效。使用 Microsoft 实用程序 MS Deploy。

以下是一些说明和下载链接：

[IIS6 到 IIS7 迁移](http://community.spiceworks.com/how_to/show/1614-iis6-to-iis7-migration)

该工具将迁移整个站点。从给出的示例中不清楚，但可以仅使用可选的 GUI 迁移 301 重定向。

# objective-c - 如何避免 NSArray 中的重复元素并在表格视图单元格中打印

> ID：11739111
> 
> 赞同：0
> 
> 时间：2012-07-31T11:29:32.013
> 
> 标签：objective-c, ios, xcode, nsmutablearray, nsarray

我的 Array 元素看起来像这样

```
 150,
150,
150,
571,
571,
571,
692,
692,
692,
123,
123,
123,
144,
144,
144,
147,
147,
147,
155,
155,
155,
542,
542,
542,
548,
548,
548,
551,
551,
551 
```

而且我需要显示所有元素，但不能重复显示相同的元素，并且必须在 UItableView 中打印。这是我的代码，

```
NSArray *array=[jsonarray valueForKey:@"ID"];
cell.textLabel.text=[array objectAtIndex:indexPath.row] ; 
```

在这里，我的 jsonarray 有多个字段，其中 ID 是一个。请指导..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:37:40.957

您可以使用 NSSet。来自 Apple 的文档： NSSet 为不同对象的静态集声明了编程接口。像这样：

```
NSSet *mySet = [NSSet setWithArray:array]; 
```

或者：

```
NSSet *mySet = [NSSet alloc]initWithArray:array]; 
```

（为完整性而编辑）然后：

```
array = [mySet allObjects]; //now you can continue using the array as previously 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:11:27.207

我认为最优雅的解决方案是`@distinctUnionOfObjects`在数组上使用运算符。

基本上，

```
NSArray *unique = [jsonarray valueForKeyPath: @"@distinctUnionOfObjects.ID"]; 
```

应该返回一个唯一数字的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T11:38:12.350

好吧，您必须将要在 UITableView 中显示的数据存储在数据 NSMutableArray 中。所以你可以遍历这个 json 数组并尝试将对象添加到数据数组中。每次要添加新项目时，都使用以下代码：

```
- (void) addObjectToData: (NSObject *) obj {
     if(![data concontainsObject:obj]){
        [data addObject:obj];
     }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T11:39:29.893

您可以暂时使用`NSSet`不允许重复的对象：

```
NSSet *set = [NSSet setWithArray:array]; 
```

然后遍历集合的内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T11:44:54.650

user523234 已经发布了很好的答案，但您也可以尝试以下操作：

```
 for(int data in array)
 {
    if(![newArray containsObject:data])
    {
        [newArray addObject:data];
    }
 } 
```

这应该有效。

# c# - 使用新创建的网络流时，网络流“无法访问已处置的对象”

> ID：11739114
> 
> 赞同：2
> 
> 时间：2012-07-31T11:29:42.423
> 
> 标签：c#, .net, winforms, networkstream

我有几种不同的方法可以连接到远程主机、发送消息、获得回复和使用信息。这一直很好，直到我在我的连接类的同一个实例中使用两种方法。在我收到错误的示例中，我运行以下方法；

```
public string sendRequestAccountID(string siteID)
{
    //build message
    String response = String.Empty;

    TcpClient client = new TcpClient();
    client.Connect(detailsHere);
    NetworkStream stream = client.GetStream();

    StreamWriter writer = new StreamWriter(stream);
    writer.AutoFlush = false;

    writer.WriteLine(sb.ToString());
    writer.Flush();

    StreamReader reader = new StreamReader(stream);
    List<XmlNode> nodeList = new List<XmlNode>();

    byte[] responseBytes = new byte[4096];
    int bytesRead = 0;

    while (true)
    {
        bytesRead = stream.Read(responseBytes, 0, responseBytes.Length);
        if (bytesRead > 0)
        {
            //handle message
        }
        if (bytesRead == 0)
        {
            stream.Flush();
            stream.Close();
            client.Close();
            string finalResponse = stuffHereToSend;
            return finalResponse;
        }
    }
} 
```

这发送正常，并按预期返回一条消息。但是，如果我然后使用我的连接类的相同实例并使用以下方法；

```
public bool sendNewDevice(IDeviceInterface device)
{
    NetworkStream stream;
    sb = new StringBuilder();
    //build message
    String response = String.Empty;

    TcpClient client = new TcpClient();
    client.Connect(detailsHere);
    stream = client.GetStream();

    StreamWriter writer = new StreamWriter(stream);
    writer.AutoFlush = false;

    writer.WriteLine(sb.ToString());
    writer.Flush();

    StreamReader reader = new StreamReader(stream);
    List<XmlNode> nodeList = new List<XmlNode>();

    byte[] responseBytes = new byte[4096];
    int bytesRead = 0;

    while (true)
    {
        bytesRead = stream.Read(responseBytes, 0, responseBytes.Length);
        if (bytesRead > 0)
        { 
            //handle message
        }
    }
} 
```

我收到一个错误，上面写着“无法访问已处置的对象”；

```
 bytesRead = stream.Read(responseBytes, 0, responseBytes.Length); 
```

虽然我认为我刚刚以最新的方法分配了流。它是否试图使用以前关闭的？有没有办法解决这个问题或我错过了什么愚蠢的事情？

编辑：这与客户没有正确处理有关吗？这两种方法在一秒钟内运行，也许第二种方法是在第一种方法关闭之前尝试打开？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T14:07:11.000

当一个`StreamWriter`（和阅读器）关闭或`Dispose`调用它的方法时，它会释放底层流。在 .net 4.5 之前，除了使用其他东西`StreamWriter`或编写一个类来包装`Stream`给定的 to`StreamWriter`并忽略对`Dispose`. 在 .NET 4.5 中，您可以使用一个重载来告诉`StreamWriter`不要处理您给它的流。例如：新的`StreamWriter(stream, StreamWriter.UTF8NoBOM, 1024, false)`

您可以尝试使用包装的流来忽略关闭（调用`new StreamWriter(new NonDisposableStreamWrapper(stream))`）：

```
public class NonDisposableStreamWrapper : Stream
{
    private Stream wrappedStream;

    public NonDisposableStreamWrapper(Stream wrappedStream)
    {
        this.wrappedStream = wrappedStream;
    }

    public override void Flush()
    {
        wrappedStream.Flush();
    }

    public override long Seek(long offset, SeekOrigin origin)
    {
        return wrappedStream.Seek(offset, origin);
    }

    public override void SetLength(long value)
    {
        wrappedStream.SetLength(value);
    }

    public override int Read(byte[] buffer, int offset, int count)
    {
        return wrappedStream.Read(buffer, offset, count);
    }

    public override void Write(byte[] buffer, int offset, int count)
    {
        wrappedStream.Write(buffer, offset, count);
    }

    public override bool CanRead
    {
        get { return wrappedStream.CanRead; }
    }

    public override bool CanSeek
    {
        get { return wrappedStream.CanSeek; }
    }

    public override bool CanWrite
    {
        get { return wrappedStream.CanWrite; }
    }

    public override long Length
    {
        get { return wrappedStream.Length; }
    }

    public override long Position
    {
        get { return wrappedStream.Position; }
        set { wrappedStream.Position = value; }
    }
} 
```

# haskell - 在 Haskell 中的 spanM，takeWhileM

> ID：11739117
> 
> 赞同：2
> 
> 时间：2012-07-31T11:29:57.963
> 
> 标签：haskell, monads, higher-order-functions

我有以下问题：给定 a`[String]`和`String->IO Int`. 所以我可以进行转换（地图）并得到`[IO Int]`. 现在，我必须做两件事——从一开始就执行这些操作，直到结果是肯定的，我需要知道，所有列表都已处理。我被禁止在第一个非阳性结果后处理。

`takeWhileM`不回答第二个问题（长度比较太不切实际），`spanM`执行禁止`IO`。

当然，我可以自己编写递归函数，但我想以 Haskell 的方式编写，具有所有高阶函数的优点。

建议？可能，完全使用另一种方法？上面的任务是我项目中的一个简化任务。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T13:27:00.833

您可以`allM`从[包](http://hackage.haskell.org/package/monad-loops-0.3.1.0)[中`monad-loops`](http://hackage.haskell.org/package/monad-loops-0.3.1.0)使用：

```
Prelude Control.Monad.Loops> let xs = ["a", "bb", "ccc", "dddd", "eeeee"]
Prelude Control.Monad.Loops> let f x = putStrLn x >> return (length x)
Prelude Control.Monad.Loops> let p x = x < 2
Prelude Control.Monad.Loops> allM (fmap p . f) xs
a
bb
False 
```

还有一个`allM`in `Control.Monad.ListM`，但它不是适当的懒惰——它会在你得到一个肯定的结果后继续执行计算。

（顺便说一句，我支持你——我讨厌编写一次性递归函数。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T11:47:00.497

我不熟悉这些功能`takeWhileM`和`spanM`（也不是[hoogle](http://www.haskell.org/hoogle/)）（**编辑：**根据评论，它们可以在[Control.Monad.ListM](http://hackage.haskell.org/packages/archive/monadlist/0.0.1/doc/html/Control-Monad-ListM.html)中找到）。

鉴于此，我认为您最好的做法是创建一个一次性函数来执行此任务。如果后来发现您需要编写代码来做类似的事情，*那么*您可以分解出公共部分并重新使用它们。一般来说，编写一次性代码并没有错，只是代码*重复*很糟糕。

有几种方法可以编写您想要的函数 - 一种可能的方法是这样的：

```
process :: [IO Int] -> IO Bool
process []     = return True
process [a]    = a >> return True
process (a:as) = do
    n <- a
    if n > 0
        then return False
        else process as 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:27:15.067

@illusionoflife：我看不出使用`takeWhileM`会如何改进@Chris 的解决方案。

例如：

```
import Control.Monad.ListM

process :: [IO Int] -> IO Bool
process as = do
  taken <- takeWhileM (>>= return . (<= 0)) as
  return (length taken >= length as - 1) 
```

（代码未验证！）

@Chris 看起来更具可读性，除其他外，因为在他的解决方案中，我们不需要弄清楚是否应该使用`>=`or `==`。此外，由于我打电话，`length`我们不能在无限输入列表上使用它。

# php - 查找并替换数据库中的重复字符串

> ID：11739118
> 
> 赞同：1
> 
> 时间：2012-07-31T11:30:00.833
> 
> 标签：php, mysql, string

我的表中某行有问题的数据，例如以下字符串

```
[data attr1='2300.48' attr1='1' attr1='1116.95' attr1='60.75' attr1='9.22' attr1='' attr1='0' attr1='3593.39' attr1='119.05' attr1='25.96' attr1='27.98' attr1='36.32']

[data attr1='2300.48' attr1='1' attr1='1116.95' attr1='60.75' attr1='9.22' attr1='' attr1='0' attr1='3593.39' attr1='119.05' attr1='25.96' attr1='27.98' attr1='36.32']

[data attr1='2300.48' attr1='1' attr1='1116.95' attr1='60.75' attr1='9.22' attr1='' attr1='0' attr1='3593.39' attr1='119.05' attr1='25.96' attr1='27.98' attr1='36.32']

[data attr1='2300.48' attr1='1' attr1='1116.95' attr1='60.75' attr1='9.22' attr1='' attr1='0' attr1='3593.39' attr1='119.05' attr1='25.96' attr1='27.98' attr1='36.32'] 
```

现在我只想用一个相同的字符串替换它们，例如：

```
[data attr1='2300.48' attr1='1' attr1='1116.95' attr1='60.75' attr1='9.22' attr1='' attr1='0' attr1='3593.39' attr1='119.05' attr1='25.96' attr1='27.98' attr1='36.32'] 
```

请记住， 的值`attr`是变化的。

- 更新 -

它如何存储在数据库中，列名被调用`content`，该列中的值是

```
the text of the article
 [data.... ]
 [data.... ]
 [data.... ] 
```

的数据类型`content`是`longtext`

抱歉，我无法制作正确的 sql 表结构。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:36:37.053

您可以使用`DISTINCT`或`GROUP BY`删除重复值，具体取决于其他需要。例如：

```
select distinct mycolumn from mytable; 
```

或者：

```
select mycolumn from mytable group by mycolumn; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T07:08:55.740

这是使我工作的脚本。

```
$link = mysqli_connect("SERVER", "root", "root");
    $db = mysqli_select_db($link, "test");
    $res = mysqli_query($link, "SELECT * FROM wp_posts WHERE post_content LIKE '%nutr-label servingsize%nutr-label servingsize%'");

    if($res){
        $i=1;
        while($row = mysqli_fetch_array($res)){
            $str1 = strrpos($row['post_content'],"[nutr-label servingsize='");
            $sub1 = substr($row['post_content'],$str1);
            $str2 = strrpos($row['post_content'],"']");

            $finalStr = substr($row['post_content'],$str1,$str2);
            $newPostContent = substr($row['post_content'], 0, strpos($row['post_content'],"[nutr-label servingsize='")).$finalStr;
            $up = mysqli_query($link,"UPDATE wp_posts SET post_content ='".addslashes($newPostContent)."' WHERE ID='".$row['ID']."'");
            $i++;
        }
    }else{
        echo mysqli_error();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:11:15.760

如果要删除/删除重复的行，可以使用

```
DELETE t 
FROM t 
LEFT JOIN t AS t2 ON (t.content = t2.content AND t.id > t2.id) 
WHERE t2.id; 
```

前：

```
SELECT * FROM t;
+----+---------+
| id | content |
+----+---------+
|  1 | abc     |
|  5 | abc123  |
|  9 | abc123  |
| 13 | abc     |
| 17 | abc     |
+----+---------+ 
```

后：

```
SELECT * FROM t;
+----+---------+
| id | content |
+----+---------+
|  1 | abc     |
|  5 | abc123  |
+----+---------+ 
```

# java - Playframework - Eclipse 无法检测到新模板

> ID：11739119
> 
> 赞同：3
> 
> 时间：2012-07-31T11:30:03.250
> 
> 标签：java, eclipse, playframework-2.0

> **可能重复：**
> [如何让 Eclipse 看到 Play 中的更改！编译模板？](https://stackoverflow.com/questions/10042987/how-to-make-eclipse-see-the-changes-in-play-compiled-templates)

我正在使用 Play 迈出第一步！框架和我遇到了一些问题。我可以毫无问题地创建和使项目黯然失色。

现在，如果我添加一个新视图，例如“sometest.scala.html”并尝试在“应用程序”中使用它，Eclipse 会将此文件标记为错误。

```
package controllers;

import play.*;
import play.mvc.*;

import views.html.*;;

public class Application extends Controller {

public static Result index() {
    return ok(sometest.render("test"));  // this line is marked red
  }

} 
```

Eclipse 会标记一些红色，即使它可以工作。如果我去 localhost:9000，我可以看到我的更改。

我的视图文件夹如下所示：

```
app
--views
----index.scala.html
----main.scala.html
----sometest.scala.html 
```

我将 sometest 创建为 html 文件并将文件名设置为 .scala.html

**简单的解决方案：**

运行你的应用程序

```
$ cd myapp
$ play
$ run 
```

转到您的 webrwoser 并输入：localhost:9000

在您的视图文件夹中创建一个新的 .scala.html 文件。

在 localhost:9000 刷新您的网站

完毕。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T17:33:14.413

我在使用 eclipse 时每天都会运行这个问题，但是使用 eclipse 这已经很好了.. 用 play ~run 命令运行 play 之后你有时只需要在 eclipse 中选择你的项目 - 右键单击​​并刷新，boom = 错误消失.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T11:43:46.710

创建新视图后，您必须首先在浏览器中运行应用程序，以允许 Play 将其编译为 Scala 类（IDE 可识别），然后您需要单击 menu -> Project Build all，然后 Eclipse 将刷新视图.

或者，您可以尝试 IntelliJ，它不需要任何其他操作即可开始识别新创建的类。

# android - 使用自定义 SeekBar 获取运行时异常

> ID：11739127
> 
> 赞同：2
> 
> 时间：2012-07-31T11:30:28.273
> 
> 标签：android, seekbar, runtimeexception

我试图在我的 android 项目中添加一个不错的自定义搜索栏。我使用[了这个](http://developer-dot-android.blogspot.hu/2012/03/custom-seekbar-tutorial.html)和[这个](http://www.mokasocial.com/2011/02/create-a-custom-styled-ui-slider-seekbar-in-android/)教程，我得到了同样的例外。我认为这两个教程都没有错……我的错误是什么？

我的 xml 文件：

**seekbar_progress_bg.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <clip >
            <bitmap
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:antialias="true"
                android:dither="false"
                android:filter="false"
                android:gravity="left"
                android:src="@drawable/green">
             </bitmap>
        </clip>
    </item>
</layer-list> 
```

**seekbar_progress.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:id="@android:id/background">
         <nine-patch
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:dither="true"
            android:src="@drawable/whitepatch">
          </nine-patch>
    </item>
    <item android:id="@android:id/secondaryProgress">
           <clip >
               <shape >
                  <gradient
                    android:angle="270"
                    android:centerColor="#80127fb1"
                    android:centerY="0.75"
                    android:endColor="#a004638f"
                    android:startColor="#80028ac8">
                   </gradient>
              </shape>
           </clip>
     </item>
     <item
             android:id="@android:id/progress"
             android:drawable="@drawable/seekbar_progress_bg">
     </item>
</layer-list> 
```

还有我的搜索栏：

```
 <SeekBar
        android:id="@+id/pagesSeekBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_toLeftOf="@+id/textView1"
        android:paddingLeft="20dp"
        android:paddingRight="20dp"
        android:progressDrawable="@drawable/seekbar_progress"
        android:thumb="@drawable/shine_btn" 

        android:maxHeight="9dp"
        android:minHeight="9dp"/> 
```

在这里查看我的 logcat：

```
07-31 13:25:11.996: E/AndroidRuntime(5124): FATAL EXCEPTION: main
07-31 13:25:11.996: E/AndroidRuntime(5124): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mypackage.myproject/com.mypackage.myproject.reader.Reader}: android.view.InflateException: Binary XML file line #62: Error inflating class android.widget.SeekBar
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.os.Looper.loop(Looper.java:123)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.app.ActivityThread.main(ActivityThread.java:3687)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at java.lang.reflect.Method.invokeNative(Native Method)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at java.lang.reflect.Method.invoke(Method.java:507)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at dalvik.system.NativeStart.main(Native Method)
07-31 13:25:11.996: E/AndroidRuntime(5124): Caused by: android.view.InflateException: Binary XML file line #62: Error inflating class android.widget.SeekBar
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.view.LayoutInflater.createView(LayoutInflater.java:518)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:209)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.app.Activity.setContentView(Activity.java:1657)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at com.mypackage.myproject.reader.Reader.onCreate(Reader.java:87)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
07-31 13:25:11.996: E/AndroidRuntime(5124):     ... 11 more
07-31 13:25:11.996: E/AndroidRuntime(5124): Caused by: java.lang.reflect.InvocationTargetException
07-31 13:25:11.996: E/AndroidRuntime(5124):     at java.lang.reflect.Constructor.constructNative(Native Method)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.view.LayoutInflater.createView(LayoutInflater.java:505)
07-31 13:25:11.996: E/AndroidRuntime(5124):     ... 23 more
07-31 13:25:11.996: E/AndroidRuntime(5124): Caused by: android.content.res.Resources$NotFoundException: File res/drawable/seekbar_progress.xml from drawable resource ID #0x7f02002f
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.content.res.Resources.loadDrawable(Resources.java:1697)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.widget.ProgressBar.<init>(ProgressBar.java:179)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.widget.AbsSeekBar.<init>(AbsSeekBar.java:61)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.widget.SeekBar.<init>(SeekBar.java:81)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.widget.SeekBar.<init>(SeekBar.java:77)
07-31 13:25:11.996: E/AndroidRuntime(5124):     ... 26 more
07-31 13:25:11.996: E/AndroidRuntime(5124): Caused by: org.xmlpull.v1.XmlPullParserException: Binary XML file line #5: <nine-patch> requires a valid 9-patch source image
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.graphics.drawable.NinePatchDrawable.inflate(NinePatchDrawable.java:267)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.graphics.drawable.LayerDrawable.inflate(LayerDrawable.java:154)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
07-31 13:25:11.996: E/AndroidRuntime(5124):     at android.content.res.Resources.loadDrawable(Resources.java:1694)
07-31 13:25:11.996: E/AndroidRuntime(5124):     ... 31 more 
```

在图形布局中，我可以在搜索栏上清楚地看到我的新皮肤，但是当我尝试运行应用程序时，它只是崩溃了。

请帮助我我做错了什么？

# javascript - document.ready 类似于 Javascript 中的功能？

> ID：11739128
> 
> 赞同：0
> 
> 时间：2012-07-31T11:30:34.147
> 
> 标签：javascript, dom-events

我有一个要求，即只使用纯 JavaScript 而不是 jQuery。我需要在加载 DOM 后立即初始化一些变量（使用某些函数），而不是在页面完全加载时。简而言之，它不应该等待整个页面加载。在 jQuery 中，它可以很容易地使用`document.ready()`函数来完成。

是否可以使用任何函数在 JavaScript 中实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:36:20.123

一种“实用”的方法就是`script`在文档末尾放置一个块（甚至不等同于 domready）

```
 ...
  <script>...</script>
  </body>
</html> 
```

或使用 DomReady 事件的各种纯 js 实现之一，例如[http://snipplr.com/view/6029/domreadyjs/](http://snipplr.com/view/6029/domreadyjs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:39:02.700

有时是这样实现的

```
<body>
<!--
All your html tags here
....
....
-->

    <script type="text/javascript">
      //this should execute after the above tags and elements have rendered
    </script>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:46:06.460

如果支持，您可以使用`DOMContentLoaded`事件：

MSDN：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh868490.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh868490.aspx)

MDN：[https ://developer.mozilla.org/en/DOM/DOM_event_reference/DOMContentLoaded](https://developer.mozilla.org/en/DOM/DOM_event_reference/DOMContentLoaded)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T12:05:42.940

如果您真的想等待“就绪事件”，例如可以使用这种东西：

```
 (function(w,evt,fn){
        if (w.addEventListener){// W3C DOM
            w.addEventListener(evt,fn,false);
        }
        else if (w.attachEvent) { // IE DOM
            w.attachEvent("on"+evt, fn);
        }

    })(window,'load',function(){
       // your code here
    }); 
```

但最好简单地使用放置良好的“脚本”标签，因为您的代码可能会工作并更快开始

# coldfusion - 获取使用 cfhttp post 发送的内容

> ID：11739140
> 
> 赞同：2
> 
> 时间：2012-07-31T11:31:22.170
> 
> 标签：coldfusion, cfhttp

我有一个使用 cfhttp 调用远程服务的 cfc。该服务返回一个失败代码，这意味着我对远程服务的调用格式不正确。有什么方法可以捕获我发送的 cfhttp 帖子的内容吗？我想捕获原始的帖子数据，这样我就可以看到我的格式问题出在哪里。这是我的代码的示例：

```
<cfhttp url="https://www.webservice.com" method="POST" result="httpResponse">
  <cfhttpparam type="formField" name="method" value="doSomething">
  <cfhttpparam type="formField" name="user" value="myUserName">
  <cfhttpparam type="formField" name="password" value="myPassword">
</cfhttp> 
```

我想做这样的事情：

```
<cfset result = structNew() />
<cfset result["response"] = httpResponse />
<cfset result["sentContent"] = cfhttp.sentContent /> 
```

是否可以在不查看服务器日志的情况下获取已发送 cfhttp 的内容。我的服务器在异地，获取日志将是一个 PITA。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:54:36.703

您可以创建一个要发布到的模板。该模板可以返回[GetHttpRequestData()](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_e-g_43.html)函数的结果。

# javascript - 用于皮肤的不显眼的 JS 框架

> ID：11739141
> 
> 赞同：2
> 
> 时间：2012-07-31T11:31:24.177
> 
> 标签：javascript, unobtrusive-javascript, skinning

就在重新发明轮子之前 - 我想知道是否有一个轻量级/独立的 JS 框架来设计 Web 应用程序（可能基于 LESS）？

理想情况下，我希望能够将布局的某些区域标记为“可样式化”，为它们提供数据样式名称或使用任何其他“不显眼”的方法，创建我的皮肤，然后能够调用：style.switch( {skinName: "paleBlue"});

有没有人遇到过这样的事情？我是 JS 开发的新手，如果已经有人问过，请原谅。

# asp.net-mvc - 带有 HTML5 语义标记的 MVC4 项目 HtmlHelper.EditorFor 使用 HTML5 输入类型

> ID：11739152
> 
> 赞同：5
> 
> 时间：2012-07-31T11:31:55.213
> 
> 标签：asp.net-mvc, html, asp.net-mvc-4, html-helper, mvc-editor-templates

我有一个启用了 HTML5 语义标记的 ASP.NET MVC4 项目。当使用`@Html.EditorFor(m => m.MyDateTimeField)`输出是一个输入时`type="datetime"`。我希望能够停止`EditorFor`生成 HTML5 标记。我怎样才能做到这一点？

目前这只是 Opera 中的一个问题，因为其他浏览器（据我所知）不支持`type="datetime"`. 我在字段上有一个 jQuery datepicker，所以在 Opera 中我得到了 jQuery datepicker 和浏览器 datepicker。

我可以使用以下任何一种来修复：使用 js 更改输入类型
b. 使用`Html.TextBoxFor(m => m.MyDateTimeField)`
c。使用自定义编辑器模板
d. 使用modernizr来检测是否支持日期时间，如果支持，不要使用jQuery datapicker

**我想要的解决方案是在`HtmlHelper.EditorFor`. `HtmlHelper.EditorFor`如果我没有在项目创建时勾选“html5 语义标记”复选框，我想以相同的方式运行。**

**编辑：** 经过更多搜索后，我发现了`DataTypeAttribute`可以在模型字段上应用的内容，以强制将它们呈现为输入`type="text"`而不是 html5 匹配。这是一个潜在的解决方案，但并不理想。当然必须有一个开关来关闭html5 `EditorFor`（和等效的助手）？

**更多信息：** 我有两个项目。第一个是使用“Html5 语义标记”创建的，另一个没有。第一个在使用时使用 html5 输入类型`EditorFor`，第二个没有。我需要停止第一个项目`EditorFor`的行为方式，而无需删除`EditorFor`. 一定有某个地方的设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:05:13.913

这确实是引入但没有记录的功能（讨厌......）。基本上，ASP.NET MVC 4 现在为 Date 和 DateTime 定义了内部编辑器模板。在 ASP.NET 3 中没有模板，所以我个人有一个名为 DateTime.cshtml 的 EditorTemplate（在 Views\Shared\EditorTemplates 中），它处理所有 DateTime 类型并处理 DataTypes.Date 与 DataTypes.DateTime。现在您需要覆盖这两个模板。讨厌。

编辑：基本上，如果您只想不触及任何现有代码，请定义两个模板 Date.cshtml 和 DateTime.cshtml ，它们都包含`@Html.TextBoxFor(model => model)`在`Views\Shared\EditorTemplates\`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T09:57:39.917

问题出在其中一个项目中，包引用没有正确更新，因此您看到了呈现的 html5 语义。

当您将 ASP.NET MVC 测试版升级到 RC 时会发生此问题，有两种方法可以解决该问题，通过 Nuget 更新所有包或手动添加对程序集的引用。

[Scott在这里](http://www.hanselman.com/blog/ASPNETMVCBetaAndRCUpgradesConfirmYourExpectationsAndVersionNumbersInProductionEnvironments.aspx)清楚地解释了问题和解决方案。

# java - 通过 FTP 在 Java 中上传文件

> ID：11739153
> 
> 赞同：4
> 
> 时间：2012-07-31T11:31:56.870
> 
> 标签：java, upload, ftp

我正在尝试开发一个简单的java代码，它将一些内容从本地机器上传到服务器/另一台机器。我使用了下面的代码

```
import sun.net.ftp.*;
import java.io.*;

public class SftpUpload {
 public static void main(String args[]) {
   String hostname = "some.remote.machine"; //Remote FTP server: Change this
   String username = "user"; //Remote user name: Change this
   String password = "start123"; //Remote user password: Change this
   String upfile = args[0]; //File to upload passed on command line
   String remdir = "/home/user"; //Remote directory for file upload
   FtpClient ftp = new FtpClient();
   try {
      ftp.openServer(hostname); //Connect to FTP server
      ftp.login(username, password); //Login
      ftp.binary(); //Set to binary mode transfer
      ftp.cd(remdir); //Change to remote directory
      File file = new File(upfile);
      OutputStream out = ftp.put(file.getName()); //Start upload
      InputStream in = new FileInputStream(file);
      byte c[] = new byte[4096];
      int read = 0;
      while ((read = in.read(c)) != -1 ) {
         out.write(c, 0, read);
      } //Upload finished
      in.close();
      out.close();
      ftp.closeServer(); //Close connection
   } catch (Exception e) {
      System.out.println("Error: " + e.getMessage());
   }
 }
} 
```

但它在第 11 行显示错误为“无法实例化 FtpClient 类型”。有人可以帮助我如何纠正它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:37:02.900

您无法实例化它，因为 sun.net.ftp.FtpClient 是抽象类。

我建议使用 Apache Commons Net 而不是使用 sun.x 包。可以从[这里](http://commons.apache.org/net/examples/ftp/FTPClientExample.java)找到 FTP 客户端示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T11:37:54.710

如果您*确实*想使用 Sun 类，`FtpClient.create()`请按照该类的 JavaDoc 使用 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:16:04.420

我已经解决了这个异常。那是因为我的机器连接在一个不允许 FTP 连接的网络中。当我在私人加密狗中尝试它时它起作用了。

# coldfusion - cfhttp 返回的内容中的 ColdFusion 特殊 unicode 字符

> ID：11739161
> 
> 赞同：0
> 
> 时间：2012-07-31T11:32:15.510
> 
> 标签：coldfusion, character-encoding, mixed, cfhttp

在使用 ColdFusion http 对象检索的内容中，有一些字符作为问号返回；即这些是罗马数字（如Ⅱ），当我用浏览器访问同一页面时，它们显示没有问题。

我发出请求的服务器似乎没有在响应标头中提供任何字符集信息（Content-Type 的值只是“text/html”，cfhttp 结果中的字符集属性为空白），但声明了编码在页面的 html 中作为“charset=EUC-JP”（它是日语页面）。所以我提出了将字符集设置为 EUC-JP 的请求。

日文（日文字符）内容检索正确，但罗马数字变成问号。

我尝试将字符集设置为 UTF-8 进行请求，但在这种情况下，一切都会被打乱。对我来说，这些罗马数字似乎是 Unicode，所以我的理解是我请求混合编码的服务器（但我可能对此错了）。

如何让这些特殊字符在 cfhttp 的 fileContent 中正确显示？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:10:06.167

我能想到的唯一方法是使用不同的编码发出 2 个请求并将数据合并在一起。第一个请求是 EUC-JP 的字符集，第二个请求是 UTF 8。在第二个请求查看第一个请求的内容和每个问号后，查找第二个请求中的索引。例如，当您在第一组内容中点击第 5 个问号时，请在第二组中查找第 5 个罗马数字。它不能保证工作，但这是我能想到的。

# api - Grails Holder 类

> ID：11739162
> 
> 赞同：0
> 
> 时间：2012-07-31T11:32:17.473
> 
> 标签：api, grails

我在 groovy javadocs 中找到了这个类（[Holder](http://grails.org/doc/2.0.1/api/grails/util/Holder.html)），但是 javadoc 是空的……有人知道它的作用吗？
似乎它像*ThreadLocal*一样工作，如果是，哪个更好？有什么优点？有什么坏处？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:50:59.720

我认为该课程已从主分支中删除。

我可以发布源代码：

```
/* Copyright 2011 SpringSource.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package grails.util;

import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

/**
 * @author Burt Beckwith
 * @since 2.0
 */
public class Holder<T> {

    private Map<Integer, T> instances = new ConcurrentHashMap<Integer, T>();
    // TODO remove mappedOnly and singleton
    private T singleton;
    private String name;

    public Holder(String name) {
        this.name = name;
    }

    public T get() {
        return get(false);
    }

    public T get(boolean mappedOnly) {
        T t = instances.get(getClassLoaderId());
        if (t != null) {
            return t;
        }

        t = lookupSecondary();
        if (t != null) {
            return t;
        }

//        t = instances.get(System.identityHashCode(getClass().getClassLoader()));
        if (t == null && !mappedOnly) {
            t = singleton;
        }
        return t;
    }

    protected T lookupSecondary() {
        // override in subclass if needed
        return null;
    }

    public void set(T t) {
        int id = getClassLoaderId();
        int thisClassLoaderId = System.identityHashCode(getClass().getClassLoader());
        if (t == null) {
            instances.remove(id);
            instances.remove(thisClassLoaderId);
        }
        else {
            instances.put(id, t);
            instances.put(thisClassLoaderId, t);
        }
        singleton = t;
    }

    private int getClassLoaderId() {
        return System.identityHashCode(Thread.currentThread().getContextClassLoader());
    }
} 
```

# android - 调整 VideoView 的大小

> ID：11739164
> 
> 赞同：0
> 
> 时间：2012-07-31T11:32:43.183
> 
> 标签：android, resize, android-videoview

我需要调整 VideoView 的大小，但它必须比屏幕大。我发现可以通过覆盖 VideoView 的 onMeasure 来实现，如下所示：

```
 protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        setMeasuredDimension(twotimesscreenwidth, twotimesscreenheight);
    } 
```

在大多数情况下，这非常有效。我在一系列设备（Nexus One、HTC Wildfire、HTC Sensation、三星 Galaxy S2、Galaxy Gio、Galaxy Tab 10.1、摩托罗拉 Xoom）上对其进行了测试，没有出现任何问题。但是在 HTC Desire HD 或 Nexus S 上测试它时，我注意到它并没有像它必须的那样调整大小。在 Desire HD 上，它会根据屏幕宽度调整大小，并比屏幕高度稍大一点，而在 Nexus S 上，它只是全屏。

有谁知道为什么会这样，更重要的是，我该如何解决这个问题？我已经发现了几个关于这个的问题，但都没有任何解决方案:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:38:04.713

您可以尝试将布局参数设置为 display.getWidth() * 2 或您希望指定的任何乘数，并类似地设置其相对于 display.getHeight() 的高度希望它有所帮助

顺便说一句，如果您正在播放实时视频流，请告诉我。我的有时会卡住

# java - 项目配置器“org.jboss.tools.maven.apt.MavenCompilerAptProjectConfigurator”不可用

> ID：11739169
> 
> 赞同：1
> 
> 时间：2012-07-31T11:32:56.593
> 
> 标签：java, eclipse, maven, m2e

我正在使用**maven 2**和**eclipse helios**，从这里安装插件**M2E 1.0**后：

[http://download.eclipse.org/technology/m2e/releases](http://download.eclipse.org/technology/m2e/releases)

我在eclipse中收到以下错误：

```
Project configurator "org.jboss.tools.maven.apt.MavenCompilerAptProjectConfigurator" is not available. 
To enable full functionality, install the project configurator and run Maven->Update Project Configuration 
```

我也收到以下两个错误：

```
Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile 
(execution: default-compile, phase: compile)

Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-compiler-plugin:2.3.2:testCompile 
(execution: default-testCompile, phase: test-compile) 
```

我的 pom 文件中的构建部分：

```
<build>

  <resources>

            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
            </resource>

  </resources>

      <plugins>

          <plugin> 
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>copy-dependencies</id>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${project.build.directory}/lib</outputDirectory>                       
                        <overWriteReleases>false</overWriteReleases>
                        <overWriteSnapshots>false</overWriteSnapshots>
                        <overWriteIfNewer>true</overWriteIfNewer>
                    </configuration>
                </execution>
            </executions>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <configuration>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                        <classpathPrefix>lib/</classpathPrefix>
                        <mainClass>com.myapp.MainClass</mainClass>
                    </manifest>
                </archive>
            </configuration> 
        </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <executions>
                    <execution>
                        <id>install</id>
                        <phase>install</phase>
                        <goals>
                            <goal>sources</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

            <plugin>
               <groupId>org.apache.maven.plugins</groupId>
               <artifactId>maven-resources-plugin</artifactId>
               <version>2.5</version>
               <configuration>
               <encoding>UTF-8</encoding>
               </configuration>
            </plugin>

      </plugins>

      <pluginManagement>
      <plugins>
    <!-- Ignore/Execute plugin execution -->
      <plugin>
        <groupId>org.eclipse.m2e</groupId>
        <artifactId>lifecycle-mapping</artifactId>
        <version>1.0.0</version>
        <configuration>
            <lifecycleMappingMetadata>
                <pluginExecutions>
                    <!-- copy-dependency plugin --> 
                    <pluginExecution>
                        <pluginExecutionFilter>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-dependency-plugin</artifactId>
                            <versionRange>[1.0.0,)</versionRange>
                            <goals>
                                <goal>copy-dependencies</goal>
                            </goals>
                        </pluginExecutionFilter>
                        <action>
                            <ignore />
                        </action>
                    </pluginExecution>
                </pluginExecutions>
            </lifecycleMappingMetadata>
        </configuration>
    </plugin>
   </plugins>
   </pluginManagement>
  </build> 
```

请告知如何解决此错误，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:51:37.513

我通过将**忽略标签添加**到提到的插件来修复它，如下所示：

```
 <plugin>

    <groupId>org.eclipse.m2e</groupId>
    <artifactId>lifecycle-mapping</artifactId>
    <version>1.0.0</version>
    <configuration>
        <lifecycleMappingMetadata>
            <pluginExecutions>
                <!-- copy-dependency plugin --> 
                <pluginExecution>
                    <pluginExecutionFilter>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-dependency-plugin</artifactId>
                        <versionRange>[1.0.0,)</versionRange>
                        <goals>
                            <goal>copy-dependencies</goal>
                        </goals>
                    </pluginExecutionFilter>
                    <action>
                        <ignore />
                    </action>
                </pluginExecution>
                <pluginExecution>
                    <pluginExecutionFilter>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>
                            maven-compiler-plugin
                        </artifactId>
                        <versionRange>[2.3.2,)</versionRange>
                        <goals>
                            <goal>testCompile</goal>
                            <goal>compile</goal>
                        </goals>
                    </pluginExecutionFilter>
                    <action>
                        <ignore></ignore>
                    </action>
                </pluginExecution>

            </pluginExecutions>
        </lifecycleMappingMetadata>
    </configuration> 
```

# python - 如何创建具有某些特定值行为的字典

> ID：11739170
> 
> 赞同：4
> 
> 时间：2012-07-31T11:33:01.837
> 
> 标签：python, dictionary

假设我有两个列表：

```
l1 = [['b', (1, 1)], ['b', (1, 2)], ['b', (1, 3)], ['a', (1, 5)],
      ['b', (2, 1)], ['b',(3, 1)]]

l2 = ['A','B','C'] 
```

如何创建这种格式的字典？

```
dct = {'A': len(sublist1), 'B': len(sublist2), 'C' : len(sublist3)} 
```

在哪里

```
sublist1 = [['b', (1, 1)], ['b', (1, 2)], ['b', (1, 3)], ['a', (1, 5)]]
sublist2 = [['b', (2, 1)]]
sublist3 = [['b',(3, 1)]] 
```

如果我的 l1 如下所示会发生什么：

```
ls1 = [[(1, 1), (1, 2), (1, 3), (1, 4), (2, 1), (2, 2)]] 
```

那么我的输出应该是：

```
dct = {'A': len(sublist1), 'B': len(sublist2)} 
```

在哪里

```
sublist1 = [[(1, 1),(1, 2),(1, 3),(1, 4)]]
sublist2 = [[(2, 1),(2, 2),(2, 3)]] 
```

可以用通用的方式解决整体问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T11:43:57.120

这似乎有效：

```
from itertools import groupby

key = lambda x: x[1][0]
lens = [len(list(g)) for k, g in groupby(sorted(l1, key=key), key=key)]
dct = dict(zip(l2, lens)) 
```

我希望当我假设 A 与 1 匹配、B 与 2 匹配等时，我的推断是正确的。

**回复：OP编辑**

我不知道`(2, 3)`你的项目`sublist2`来自哪里，我认为这是一个错误。另外，我假设单元素列表`ls1`实际上是元组的直接容器，因为在这里使用嵌套列表没有任何用处。如果是这样，这是我对通用解决方案的建议：

```
from itertools import groupby
from string import ascii_uppercase

key = lambda x: x[0]
lens = [len(list(g)) for k, g in groupby(sorted(l1, key=key), key=key)]
dct = dict(zip(ascii_uppercase, lens)) 
```

所以，没有大的变化。当给定长度不等的参数时，该`zip`函数将返回一个与最短参数长度相同的列表，这种行为在这种情况下非常适合我们。

请记住，如果第一个元组元素的不同值超过 26 个，则此解决方案将中断，并且简单地忽略任何大于第 26 个的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:45:08.513

```
groups = itertools.groupby(l1, lambda x: x[1][0])
dict(zip(l2, map(len, (list(list(g[1]) for g in groups))))) 
```

结果是

```
{'A': 4, 'B': 1, 'C': 1} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:46:35.363

```
>>> l1 = [['b', (1, 1)], ['b', (1, 2)], ['b', (1, 3)], ['a', (1, 5)], ['b', (2,
1)], ['b',(3, 1)]]
>>> dct = {'A': 0, 'B' : 0, 'C': 0}
>>> translation = {1: 'A', 2: 'B', 3: 'C'}
>>> for list_ in l1:
...     letter, tuple_ = list_
...     num1, num2 = tuple_
...     t = translation[num1]
...     dct[t] += 1
...
>>> dct
{'A': 4, 'C': 1, 'B': 1} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T11:52:23.230

```
from collections import defaultdict

lst = [['b', (1, 1)], 
       ['b', (1, 2)],
       ['b', (1, 3)],
       ['a', (1, 5)],
       ['b', (2, 1)],
       ['b', (3, 1)]]  #test list

def mapping(x):
    """ convert 1 to A, 2 to B and so on """
    return chr(ord('A')+x-1)

dct = defaultdict(int)

for _, tple in lst:
    k, _ = tple
    dct[ mapping(k) ] += 1

print (dct) # defaultdict(<type 'int'>, {'A': 4, 'C': 1, 'B': 1}) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-31T11:48:23.473

我会这样做：

```
dct = dict((k, len([l for l in l1 if l[1][0] == i + 1]))
           for i, k in enumerate(l2)) 
```

# performance - WCF 数据服务的性能问题

> ID：11739171
> 
> 赞同：0
> 
> 时间：2012-07-31T11:33:10.007
> 
> 标签：performance, wcf-data-services

我是 WCF 数据服务的新手。我使用 ADO .NET 实体框架在 WCF 数据服务上创建了一个示例 POC。

当我通过添加 WCF 数据服务作为服务引用（1000 行的简单选择语句）通过测试项目测试数据服务时，大约需要 25 秒。在 25 秒中，从数据库查询数据只用了 5 秒（在分析数据库后获得此信息）。

奇怪的是，WCF 数据服务仅用于翻译和传输大约需要 20 秒。

知道为什么翻译和运输要花这么多时间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:26:45.170

您的数据太大了。

网络传输比从数据库中获取数据慢几倍是绝对正常的，至少当查询包含比复杂的窄过滤更多的批量获取时，并且在数据库端没有主要的性能问题时。

20 秒内 100 MB = 40 Mbps，这将非常接近 100 Mbps 以太网的硬件限制，因为 ~100 MB 只是有效负载。

# iphone - 让 LibCurl 在 iOs 上工作......

> ID：11739173
> 
> 赞同：1
> 
> 时间：2012-07-31T11:33:13.750
> 
> 标签：iphone, objective-c, xcode, curl, libcurl

有没有人有让 LibCurl 在 iPhone OS 上工作的经验？任何教程或示例代码可用于了解与 iOS 开发的 cURL 相关的所有内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:05:47.940

您可以在以下位置找到示例应用程序和静态库：http: [//seiryu.home.comcast.net/~seiryu/libcurl-ios.html](http://seiryu.home.comcast.net/~seiryu/libcurl-ios.html)

我无法构建一个有效的 xcode 项目来编译我自己的框架，所以我写了一个 bash 脚本

```
CurlVersion="7.29.0"
export IPHONEOS_DEPLOYMENT_TARGET="4.3"
otherBuildFlags="--with-darwinssl"

rm -rf results 
rm -rf Products/libcurl.framework/Versions/$CurlVersion
mkdir -p results/iOS
mkdir -p results/Sim

make clean
export CC="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-gcc-4.2"
export CFLAGS="-arch armv7 -arch armv7s -pipe -Os -gdwarf-2 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk"
export LDFLAGS="-arch armv7 -arch armv7s -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk"
./configure --disable-shared --enable-static --disable-dependency-tracking --host="armv7-apple-darwin" --host="armv7s-apple-darwin" $otherBuildFlags
make -j `sysctl -n hw.logicalcpu_max`
cp lib/.libs/* results/iOS/

make clean
export CC="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-gcc-4.2"
export CFLAGS="-arch i386 -pipe -Os -gdwarf-2 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk"
export CPPFLAGS="-D__IPHONE_OS_VERSION_MIN_REQUIRED=${IPHONEOS_DEPLOYMENT_TARGET%%.*}0000"
export LDFLAGS="-arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk"
./configure --disable-shared --enable-static --host="i386-apple-darwin" $otherBuildFlags
make -j `sysctl -n hw.logicalcpu_max`
cp lib/.libs/* results/Sim/

lipo -create results/iOS/libcurl.a results/Sim/libcurl.a -output results/libcurl.a

mkdir -p Products/libcurl.framework/Versions/$CurlVersion/Headers
mkdir -p Products/libcurl.framework/Versions/$CurlVersion/Resources

cp include/curl/*.h Products/libcurl.framework/Versions/$CurlVersion/Headers/
cp results/libcurl.a Products/libcurl.framework/Versions/$CurlVersion/

cd Products/libcurl.framework/Versions/
ln -fs $CurlVersion Current

cd ..

ln -fs Versions/Current/libcurl.a libcurl 

ln -fs Versions/Current/Headers .
ln -fs Versions/Current/Resources . 
```

# plone - 从 Plone 站点中提取标签的属性，使其成为主题中标签的内容

> ID：11739176
> 
> 赞同：3
> 
> 时间：2012-07-31T11:33:30.083
> 
> 标签：plone, diazo

我正在尝试在我的 Plone 站点中提取标签的属性，并使其成为我主题中标签的内容。

**具体用例：**

我想从#portal-logo 中提取克隆站点标题，克隆站点中的标记如下所示：

```
<a id="portal-logo" title="Cool Plone Site" accesskey="1" href="http://mysite">
      <img src="http://mysite/logo.png" 
          alt="Cool Plone Site" 
          title="Cool Plone Site" 
          height="56" width="215">
</a> 
```

标题应该插入到我的模板标题标签中的 h1 标签之间

```
<header>
     <h1>Cool Plone Site</h1>
</header> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:45:18.443

这解决了我的问题：

```
<replace css:theme-children="header h1">
     <xsl:value-of select="//*[@id='portal-logo']/@title"/>
</replace> 
```

这里的关键是**theme-children**。我希望能够使用 css:select 来获取 title 属性，但这有效并且仍然可以接受优雅:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:52:58.640

你为什么不使用标题标签呢？类似的东西

```
<replace content-children="/html/head/title" theme-children="/body/header/h1" /> 
```

应该会产生预期的结果，因为徽标的 title 属性是由`portal_state/navigation_root_title`无论如何构造的。

# php - 从 Zend_Form 获取错误消息并作为 json 响应

> ID：11739181
> 
> 赞同：14
> 
> 时间：2012-07-31T11:33:50.537
> 
> 标签：php, ajax, json, zend-framework, zend-form

我正在尝试从 Zend_Form 获取错误消息并作为 json 响应。获取 Zend_Form 错误并以 json 形式回复的最佳实践是什么？

```
<?

class SomeController extends Zend_Controller_Action {

    public function indexAction() {

        $form = new Application_SomeForm();
        if ($form->isValid( $this->getRequest()->getPost() )) {
            //do something here
        }       
        $this->_helper->json($form->getErrorMessages());

    }

} 
```

我无法通过 获取错误`$form->getErrorMessages()`，但如果经过测试，则会出现错误`print_r($form->gerErrors())`

```
Array
(
    [email] => Array
        (
            [0] => isEmpty
        )

    [password] => Array
        (
            [0] => isEmpty
        )

    [foreign] => Array
        (
        )

    [login] => Array
        (
        )

) 
```

所以，我的问题是：

**a) 如何获取表单的所有错误消息？**

**b) 是否有任何 Json Wrapper 用于响应 ajax 提交的表单？例如`$jsonResponse->setErrorStatus()->addFormErrors($form)`**

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-31T13:03:59.337

你试过`getMessages`吗？我认为这是您想要用来获取人性化错误消息的方法。

你写了你已经尝试过`getErrorMessages`，`getErrors`但`getMessages`完全不同，这就是为什么我要问你是否尝试过。

`getErrors`返回代码，`getErrorMessages`返回注册的自定义错误消息（似乎你没有），同时`getMessages`返回实际的人性化错误消息。

# java - AccessController checkPermission 总是抛出异常

> ID：11739183
> 
> 赞同：3
> 
> 时间：2012-07-31T11:34:05.273
> 
> 标签：java

您如何检查应用程序是否有权读取或写入文件系统上的特定目录。我正在尝试这个：

```
try {
    AccessController.checkPermission(new FilePermission(files[i]
            .getAbsolutePath(), "read,write"));
}
catch (Exception e) {
    System.out.println(e.toString());
} 
```

但它总是抛出异常并输出：

```
java.security.AccessControlException: access denied ("java.io.FilePermission" "C:\Dell" "read")
java.security.AccessControlException: access denied ("java.io.FilePermission" "C:\Documents and Settings" "read")
java.security.AccessControlException: access denied ("java.io.FilePermission" "C:\glut-3.7.6" "read") 
```

我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:50:42.353

`AccessController`当您没有权限时，似乎总是抛出异常。你可以通过 catch 来处理这个问题`SecurityException`。

`java.io.File.canRead()`使用,方法检查读/写权限的更好解决方案`java.io.File.canWrite()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-21T08:28:19.067

文档中的文本：

> ```
>  Determines whether the access request indicated by the
>  specified permission should be allowed or denied, based on
>  the security policy currently in effect, and the context in
>  this object. The request is allowed only if every ProtectionDomain
>  in the context implies the permission. Otherwise the request is
>  denied. 
> ```

# hibernate - 休眠和继承

> ID：11739186
> 
> 赞同：1
> 
> 时间：2012-07-31T11:34:25.697
> 
> 标签：hibernate, inheritance

我有两个表**Text**和继承**的 TextUser**。

**文本**包含：id、textType
**TextUser**包含：id、语言环境、名称、标题

**TextUser.id是****Text.id**的外键。所以加入的例子是：

### Text.id - Text.textType - TextUser.id - TextUser.locale - TextUser.name

```
100          1            100          en            name1
100          1            100          fr            name2
101          1            101          en            name3 
```

因此，有了键 100，我们在 Text 中有一条记录，在 TextUser 中有两条具有相同 id 但不同语言环境（en、fr）的记录。

这是一个遗留系统，所以我不能修改结构。现在我正在尝试用hibernate处理它。

```
@Entity(name = "Text")
@Inheritance(strategy = InheritanceType.JOINED)
public abstract class Text {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "TextId")
    private Long id;

    @Column(name = "TextType")
    private Integer textType; 
```

和

```
 @Entity
    @Table(name = "TextUser")
    @ForeignKey(name = "FK_TextUser_Text")
    public class TextUser extends Text {

        @Column(name = "locale")
        private String locale;

        @Column(name = "name")
        private String name; 
```

所以它适用于一个语言环境。但是我怎样才能用键 100 插入新值，但是新的语言环境呢？我们在 Text 中有 ID，hibernate 将它用于外键 TextUser.id。因此，如果我明确设置 id 但不同的语言环境，我将得到*“org.hibernate.NonUniqueObjectException：具有相同标识符值的不同对象已与会话关联”*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:47:03.710

这不是继承的有效案例。

您应该将其建模为复合键（`TextUser`具有复合键 ( `id`, `locale`)，对吗？）和具有派生身份的多对一关系（因为复合键`TextUser`包含外键）。

[`@MapsId`javadoc](http://docs.oracle.com/javaee/6/api/javax/persistence/MapsId.html)中显示了一种可能的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:46:37.330

您将无法使用继承关系映射这些类，因为父表上的 ID 将被复制（这是您目前遇到的错误）。

您需要将这两个类映射为一对多关系（它们是）。Text 类将保持原样（@Inheritance 除外），并且 UserText 将在 UserText.id 和 UserText.locale 之间具有复合 id。

如果您不需要更新这些表，您可以创建一个连接两个表的视图（Text.id - Text.textType - TextUser.locale - TextUser.name）并使用复合 id：Text.id 和 TextUser .locale。

# windows-phone-7 - 使用 WP7 工具包的问题 - 类型或命名空间名称“工具包”不存在

> ID：11739190
> 
> 赞同：2
> 
> 时间：2012-07-31T11:34:49.510
> 
> 标签：windows-phone-7, reference, toolkit

我正在使用 WP7 工具包导入。我已经阅读了很多类似的问题，但似乎没有任何效果。

我正在尝试将 WP7 工具包用于带有 Microsoft Visual Studio 2010 express for windows Phone 的 7.1 项目。

一切似乎都很简单，我按照所有说明进行操作：http: [//www.codebadger.com/blog/post/2010/11/01/WP7-Tip-of-the-Day-Silverlight-Toolkit-Gestures.aspx](http://www.codebadger.com/blog/post/2010/11/01/WP7-Tip-of-the-Day-Silverlight-Toolkit-Gestures.aspx)

所以，我现在拥有的是

仪表板.xaml

```
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
mc:Ignorable="d" d:DesignHeight="768" d:DesignWidth="480" 
```

仪表板.xaml.cs

```
using Microsoft.Phone.Shell;
using Microsoft.Phone.Controls.Toolkit; 
```

当然，我已经安装了*Silverlight for Windows Phone Toolkit - Nov 2011.msi* 在此处下载 [http://silverlight.codeplex.com/releases/view/75888](http://silverlight.codeplex.com/releases/view/75888)

我通过右键单击*Reference -> Add Reference 添加*了引用，并添加了我在

*C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v7.1\Toolkit\Oct11\Bin*

但我仍然有标题中提到的错误

**命名空间“Microsoft.Phone.Controls”中不存在类型或命名空间名称“Toolkit”（您是否缺少程序集引用？）**

有谁知道如何使它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T03:29:23.820

`"using Microsoft.Phone.Controls.Toolkit"`不可能。为了在您的代码中使用工具包控件，“使用 Microsoft.Phone.Controls”就足够了。

但你绝对可以

```
xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit" 
```

并在您的 xaml 页面中使用此创建控件，如下所示：

```
 <toolkit:ListPicker></toolkit:ListPicker> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:39:13.247

使用[NuGet](http://nuget.org/)！

> 当您使用 NuGet 安装包时，它会将库文件复制到您的解决方案并自动更新您的项目（添加引用、更改配置文件等）。如果您删除一个包，NuGet 会反转它所做的任何更改，以免留下任何混乱。

[可在此处下载](http://nuget.org/packages/SilverlightToolkitWP)适用于 Windows Phone 工具包的 Silverlight 。

如果您想知道如何安装和使用 NuGet，[请在此处阅读有关它的更多信息](http://docs.nuget.org/)。

# windows - 用于windows的javaps

> ID：11739192
> 
> 赞同：0
> 
> 时间：2012-07-31T11:34:54.237
> 
> 标签：windows, linux, bash

我正在研究一些使用 javaps ( [Linux Java Process Status](http://www.cs.columbia.edu/~akonstan/javaps/) ) 的脚本。

大部分开发都是在 linux 上进行的，但现在我们需要通过 GIT Bash 切换到在 Windows XP 上运行它们，我得到以下响应。

```
$ javaps
/c/Documents and Settings/xxxx/bin/javaps: must be executed on Linux system (found MINGW32_NT-5.1) 
```

除了不切换到Windows之外的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:42:41.113

我不知道 Petesh 建议的 JPS，我们可以更改脚本以通过 Windows 上的 javaps 使用它。

* * *

使用参数提供了我们使用它所需的信息。

# c# - Task.Run 中的 Thread.Sleep

> ID：11739195
> 
> 赞同：4
> 
> 时间：2012-07-31T11:35:07.077
> 
> 标签：c#, .net, task-parallel-library, async-await, c#-5.0

我最近一直在尝试了解 C# 的新 async/await 和 Task.Run 功能。在这样做的过程中，我编写了一些简单的测试代码写入控制台，这样我就可以看到事情发生的顺序，在这里和那里抛出一个 Thread.Sleep 以确保事情真的按照我预期的顺序发生。

这是我的测试之一

```
[Test]
public void TaskRun()
{
    Console.WriteLine("Before");
    Task.Run(() => Console.WriteLine(_terminator.IWillBeBack()));
    Console.WriteLine("After");
} 
```

具有以下终结者类：

```
public class Terminator
{
    public string IWillBeBack()
    {
        return "I will be back";
    }
} 
```

由此我预计结果很可能是*之前*，*之后*，然后*我会回来*。这确实是发生的事情。然后我对 IWillBeBack 方法进行了更改，让它休眠 3 秒。代码：

```
public class Terminator
{
    public string IWillBeBack()
    {
        Thread.Sleep(3000);
        return "I will be back";
    }
} 
```

我预计结果仍然是*之前*，*之后*，然后再过 3 秒*我会回来*。这不是发生的事情。我取而代之的是*之前*和*之后*，但*我永远不会回来*。

为什么是这样？

当我调试它时，它清楚地通过代码、睡眠和返回。我不需要在任何生产代码中以这种方式使用 Thread.Sleep，但我想对第二种情况下为什么*我会回来*没有写入控制台有一个模糊的理解。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T11:41:30.970

您的测试在尝试打印“我会回来”之前完成。你没有做任何事情等到完成。但是，根据测试运行程序，它的重定向`Console.WriteLine`可能在测试完成后立即断开连接。

如果您想看到它完成，请将您的测试更改为：

```
[Test]
public void TaskRun()
{
    Console.WriteLine("Before");
    var task = Task.Run(() => Console.WriteLine(_terminator.IWillBeBack()));
    Console.WriteLine("After");
    task.Wait();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:56:41.410

如果您在 VS 2012 中使用 MS Test 框架，您也可以像这样编写测试

```
[TestMethod]
public async Task TaskRun()
{
    Console.WriteLine("Before");
    Task t = Task.Run(() => Console.WriteLine(IWillBeBack()));
    Console.WriteLine("After");
    await t;
}

private string IWillBeBack()
{
    Thread.Sleep(3000);
    return "I will be back";
} 
```

# alfresco - Alfresco 自定义元数据提取器

> ID：11739198
> 
> 赞同：0
> 
> 时间：2012-07-31T11:35:10.093
> 
> 标签：alfresco

我开发了一个自定义元数据提取器来提取音频和视频文件的详细元数据。提取器扩展了 AbstractMappingMetadataExtracter，它需要将提取的字段映射到自定义类型。提取器类名为 AudioMetadataExtractor，对应的属性文件包含映射。以下是该类的代码

```
public class AudioMetadataExtractor extends AbstractBaseMetadataExtractor {

public static ArrayList<String> SUPPORTED_MIMETYPES = addMimeTypes(new String[] { MimeTypes.MIMETYPE_MP3, MimeTypes.MIMETYPE_WMA });

public AudioMetadataExtractor() {
    this(SUPPORTED_MIMETYPES);
}

public AudioMetadataExtractor(ArrayList<String> supportedMimeTypes) {
    super(supportedMimeTypes);
}

@Override
protected Map<String, Serializable> extractRaw(ContentReader reader) throws Throwable {

    Map<String, Serializable> rawProperties = newRawMap();

    File file = TempFileProvider.createTempFile("DCM", "MINFO");
    reader.getContent(file);

    MediaInfoJNA mediaInfoLib = new MediaInfoJNA();
    mediaInfoLib.Open(file.getAbsolutePath());

    String album = mediaInfoLib.Get(StreamKind.General, 0, "Album", MediaInfoJNA.InfoKind.Text, MediaInfoJNA.InfoKind.Name);
    System.out.println("Album1 " + album);
    String title = mediaInfoLib.Get(StreamKind.General, 0, "Title", MediaInfoJNA.InfoKind.Text, MediaInfoJNA.InfoKind.Name);
    System.out.println("Title " + title);
    String duration = mediaInfoLib.Get(StreamKind.General, 0, "Duration", MediaInfoJNA.InfoKind.Text, MediaInfoJNA.InfoKind.Name);
    System.out.println("Duration " + duration);

    putRawValue("album", album, rawProperties);

    mediaInfoLib.Close();

    return rawProperties;
}
} 
```

提取器的配置如下

```
<bean id="metadata.extractor.AudioAsset" class="com.diipl.moviebeam.dcm.alfresco.metadata.AudioMetadataExtractor" parent="baseMetadataExtracter">
    <property name="inheritDefaultMapping">
        <value>true</value>
    </property>
</bean> 
```

问题：上传新文件时，提取器被调用，我可以看到所有具有正确值的系统输出。但是，属性没有填充任何值。但是，如果我在文件上运行“提取通用元数据”操作，提取器会被调用，并且字段会获得正确的值。

# php - cakephp 中的 admin_logout 问题

> ID：11739201
> 
> 赞同：0
> 
> 时间：2012-07-31T11:35:19.853
> 
> 标签：php, session, cakephp

我在我的 cakePHP 项目中启用了 admin_actions。我有一个普通员工的**logout()和****admin_logout()**和一个用于管理员注销的这两个动作都属于EmployeesController。

两个注销操作中的代码是相同的，除了 flash 消息。

**管理员注销（）：**

```
$this->Session->destroy();
$this->Session->setFlash('You have been logged out of admin dashboard!','flash_success');
$this->redirect('/employees/login'); 
```

**登出（）**

```
$this->Session->destroy();
$this->Session->setFlash('You have been logged out!','flash_success');
$this->redirect('/employees/login'); 
```

**注销**工作正常并破坏了会话。但不是**admin_logout()**。

为了调试，我在**admin_logout()**中尝试了这个：

```
$this->Session->delete('Admin');
$this->Session->setFlash('You have been logged out of admin dashboard!','flash_success');
$this->redirect('/employees/login'); 
```

它也在工作。但它仍然不会破坏完整的会话变量。我可以通过对管理员和员工使用正常的**logout()来解决这个问题。**但出于好奇，这里出了什么问题？

编辑：需要的行为是销毁会话变量，然后使用 Flash 消息进行重定向。但是会发生重定向，并且会显示 Flash 消息，但会话变量没有被破坏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:35:24.477

不是解决您的问题，而是一种更优雅的注销过程方法：
在您的类中只创建一个注销方法，一个不带前缀的方法。喜欢：

```
public function logout(){
} 
```

现在，在您的所有视图中创建一个注销链接，明确取消`admin`前缀：

```
echo $this->Html->link('logout',
    array('admin'=>false,'controller'=>'employees','action'=>'logout')
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:59:50.130

如果你使用 2.0 你应该做

```
 $this->redirect($this->Auth->logout()); 
```

或者

```
$this->Auth->logout(); 
```

对于您的重定向

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T15:16:20.073

如果您想为管理员提供单独的 flash 消息，您可以简单地在 logout 方法中使用 if 语句来检查确定用户是否为管理员的任何变量。

```
 if($this->Auth->user('is_admin')){
        $this->Session->setFlash(__('You have been logged out of admin dashboard!','flash_success'));
    }
    else{
        $this->Session->setFlash(__('You have been logged out!','flash_success')); 
```

我可能在这里遗漏了一些东西，但没有

```
 $this->redirect($this->Auth->logout()); 
```

销毁会话？

# clearcase - 将在 XP 上创建的现有 clearcase 视图重新导入 Windows7 上的 RationalClearcase 客户端

> ID：11739205
> 
> 赞同：1
> 
> 时间：2012-07-31T11:35:33.540
> 
> 标签：clearcase, clearcase-remote-client

我已经在 XP 机器上从 Rational Clearcase Client 创建了我的项目视图。由于某种原因，我需要格式化我的机器并且我已经安装了 Windows 7。现在我的问题是，我已经有了在 XP 上创建的视图的现有文件夹。如何重新导入它，以便它显示在 Windows 7 机器上的 Clearcase Navigator 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:47:51.610

在[OP jaychapani](https://stackoverflow.com/users/555605/jaychapani)的情况下（ClearCase 远程客户端）：

根据定义，“Web 视图”的视图存储在 CCRC 服务器上（因此不在客户端上）

请参阅“ [如何在无意删除后重建 CCRC 视图复制区域](http://www-01.ibm.com/support/docview.wss?uid=swg21392432)”
（相当于快照视图目录，在 CCRC 中称为“视图复制区域”）

> 可能会出现开发者无意中删除了复制区域而没有备份的情况。
> Web 视图仍然存在于 CM 服务器上，并且视图标记仍然存在于 ClearCase 注册表中。

无法从 CCRC 图形用户界面 (GUI) 完全执行此类恢复。

> 1.  确定视图标签（您可以`cleartool lsview -l`在 Web 服务器上运行：询问您的 ClearCase 管理员）
> 2.  创建一个新的复制区域（例如`D:\Webviews\<VIEWTAG>`：）
> 3.  **`.copyarea.dat`**在上述目录的根目录下创建一个文件 有关此文件的更多详细信息，
>     请参阅[技术说明 1119280](http://www-01.ibm.com/support/docview.wss?uid=swg21119280)关于`.copyarea.dat`和`.copyarea.db`文件。
>     一种。将`.copyarea.dat`文件从另一个（已知良好的）复制区域复制到新复制区域的根目录
>     b. 从该文件中删除“ `READONLY`”和“ `HIDDEN`”文件属性。
> 4.  确定`UUID`webview 的`<VIEWTAG>`。
>     您可以`UUID`通过在 Web 服务器上运行 a来获得`cleartool lsview -l`（再次询问您的 ClearCase 管理员）。
> 5.  修改`.copyarea.dat`新复制区域的根目录中的 。
>     如果它来自副本，请修改`UUID`以及`<WEBVIEW>`包括其十六进制长度字段的名称；还要修改 VOB 根目录的名称。
>     文件中的时间戳`.copyarea.dat`不需要修改。
> 6.  从`.ccase_wvreg`文件中删除视图标签。
>     有关此文件的更多详细信息，请参阅[technote1228258](http://www-01.ibm.com/support/docview.wss?uid=swg21228258)关于 CCRC`.ccase_wvreg`文件。
> 7.  使用 CCRC GUI 执行“ `Add existing view`”。
> 8.  执行一个**`Refresh->Repair->Discordance`**.
>     这将修复视图的内容。

* * *

原始答案，用于完整的 ClearCase 安装

如果取决于存储（快照）视图的视图存储位置。

如果视图存储没有存储在您的本地计算机上，您可以简单地重新创建快照视图的根目录并使用“ `regen_view_dot_dat.pl`”脚本`<cc-home-dir>\etc\utils`重新生成`view.dat`隐藏文件。

有关该工具的更多信息，请参阅“ [Clearcase - 了解创建视图的时间”。](https://stackoverflow.com/questions/3918448/clearcase-find-out-when-view-was-created)

您可以从该路径键入`clearexplorer .`（注意空格和“ `.`”点），然后您将在 ClearCase Explorer 中看到您的视图。更新它，你会找到它的内容。

如果您在格式化之前保存了快照视图（包括隐藏文件`view.dat`），则更容易：转到该视图的根路径并键入`clearexplorer .`：您的视图将返回。

# node.js - sudo：不存在 tty，也没有指定 askpass 程序

> ID：11739216
> 
> 赞同：1
> 
> 时间：2012-07-31T11:36:41.277
> 
> 标签：node.js, deployment, debian, jake

我尝试了[jake](https://github.com/mde/jake)和[launch](https://github.com/bengourley/launch)一点，但是当我想部署我的 node.js 应用程序时，我在此过程中得到了这个：

```
$ ssh mydomain.com sudo stop site.WebApp-production && sudo start site.WebApp-production
sudo: no tty present and no askpass program specified

✘  Failed to restart site

jake aborted.
Error
  at fail (/usr/local/lib/node_modules/jake/lib/api.js:235:13)
  at /Users/udo/Projects/WebApp/Jakefile.coffee:31:16
  at ChildProcess.exports.remote (/Users/udo/Projects/WebApp/node_modules/launch/lib/action.js:39:5)
  at ChildProcess.EventEmitter.emit (events.js:91:17)
  at Process._handle.onexit (child_process.js:674:10) 
```

你知道如何摆脱这个吗？我在远程机器上使用 Debian 6。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:15:58.993

Try `ssh -t`，它在运行命令时强制分配 TTY。`sudo`至少在我的 Mac 上尝试 SSH 命令进入我的 Ubuntu boxen 时，这已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:01:12.593

`ssh <host> <command>`尝试在没有任何交互的情况下在主机上运行命令。在您的情况下，`sudo`需要一个密码，因为它不是交互式会话，所以它无法获得。如果您真的想要这个，请配置 sudo 以在不询问密码的情况下接受您。

编辑：另外，`ssh <host> <command1> && <command2>`将在本地机器上运行 command2，而不是在远程机器上。

# view - NSTimer 用于在视图控制器之间倒计时

> ID：11739223
> 
> 赞同：0
> 
> 时间：2012-07-31T11:37:06.883
> 
> 标签：view, uinavigationcontroller, nstimer, countdowntimer, appdelegate

\我有一个视图控制器，它启动一个倒计时计时器并根据它更新一个按钮标签。问题是当用户离开视图并回来时我不想重新启动计时器o从暂停的时间继续。什么会是最好的激活方式吗？

使应用程序中的计时器委托并将通知发布到此视图控制器。由于其他视图控制器不需要它，因此它们不需要收听任何通知。问题是我必须确保计时器已运行到0 启用按钮操作系统，这意味着当再次加载视图时，我需要等待通知至少 1 秒以确保他的时间真的到了。问题是在此期间按钮标签上显示的内容。

如果视图控制器是一个标签栏项目，我不会有问题，但它是一个 pushv 视图控制器，所以当用户点击返回时它会被释放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:13:57.947

只需创建一个单例对象来管理您的计时器。您可以从 appdelegate 创建它。您可以随时从该对象获取剩余时间（firedate - datenow）。因此，您无需处理通知。每秒发送一个通知也不是一个好主意，当它没有被分配时，你的视图不会使用它。当您的视图被分配/进入屏幕时，可以每秒询问该对象的剩余时间并更新他的标签或一些子视图等。您可以使用 NSTimer 对象轻松实现它。

您还可以在该单例对象中放置一个 bool 变量，以指示是否已达到 firedate。或检查剩余时间 < 1 。因此，您的视图在分配/显示时检查变量的值，然后您可以决定激活或停用您的按钮。

# php - symfony2 中的实体和数据库设计

> ID：11739232
> 
> 赞同：0
> 
> 时间：2012-07-31T11:37:27.800
> 
> 标签：php, database-design, symfony, doctrine

我正在寻找有关数据库设计的一些建议。

我正在 symfony2 平台上构建一个幻灯片应用程序，我有四种不同类型的幻灯片容器（公司、地理区域、财产和个人监视器）。这是为了组织内容和继承内容（监视器位于属性中，属性是地理区域的一部分等）。

现在，在平面 PHP 上，我将只使用两个表，“容器”和“内容”，并在容器表中放置一个类型字段，定义所讨论的容器是否是地理区域、属性等，并且只是链接每个内容片（即幻灯片）与 FK 到适当的容器。

现在，了解 symfony2 的实体系统，似乎我可以通过将不同的容器类型定义为单独的实体来获得很多继承，从而能够获取例如地理区域，并自动返回其所有子项动态对象（所有属性，以及属于该属性的所有监视器）。但是，我确实希望能够在不同容器和不同容器类型之间切换内容片段的“归属”。我觉得这对于所描述的方法会有些麻烦，如果内容片段必须具有“属于”四种不同实体类型中的任何一种的能力，那么内容片段的关系（FK）很可能会出现问题？

在 symfony2 世界中经验丰富的人也许可以启发我在这里进行的最明智的道路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:47:36.017

在我们的项目中，我们使用[Propel 1.6](https://github.com/propelorm/Propel)和[PropelBundle](https://github.com/propelorm/PropelBundle)

它的语法对开发人员非常友好。一个很大的优点`Propel`是表之间的“假”关系。在您的模式中，只需定义`skipSql = true`标志，您就可以省略 FK 的生成，但一个对象可以通过定义的假关系与另一个对象一起获取。

在您的情况下，最终会出现如下内容：

```
$containers = ContainerQuery::create()->findByXXX('xxx');
$containers->getFirst()->getContents(); // Will return all joined content for the first container 
```

在具有相关对象的对象填充期间 - 您获得了使用反向关系的绝佳机会：

```
$contents = $container->getContents();
$container = $contents->getContainer(); 
```

只需在评论中提问，我会根据您的需要扩展我的答案；）

# mysql - Natural Sort Grocery Crud 结果

> ID：11739235
> 
> 赞同：2
> 
> 时间：2012-07-31T11:37:31.133
> 
> 标签：mysql, codeigniter, grocery-crud

Grocery Crud 提供了 order_by 函数：

```
void order_by(mixed $order_by [, string $direction] ) 
```

但是，我需要排序的字段是 varchar，我需要执行自然排序。正确排序列表的 MySQL 查询如下：

```
ORDER BY 0+'field_name' ASC 
```

有没有办法在 Grocery Crud 中指定“0+”？

谢谢

# java - 字幕编辑器[.srt to .ssa]

> ID：11739242
> 
> 赞同：1
> 
> 时间：2012-07-31T11:37:45.880
> 
> 标签：java, swing, subtitle

我一直在研究 Java 的字幕系统。可以保存正常的 .srt 文件，并且可以看到字幕。我希望字幕具有不同的属性，例如 diff 字体/颜色/大小所有这些属性都没有以普通的 .srt 编码，文件必须保存为 .ssa（substation alpha），并带有 [v4+ 样式] 和事件等额外字段..我想知道是否有任何库可以用来直接导出到 .ssa 或者我是否必须编写一个包含 [v4+ 样式] 的方法

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:44:42.687

[jubler](http://www.jubler.org/features/index.php)是一个开源库，似乎支持 substation alpha 格式。

# android - 根据选中状态更改 CheckBoxPreference 摘要

> ID：11739244
> 
> 赞同：6
> 
> 时间：2012-07-31T11:37:54.710
> 
> 标签：android, checkbox, android-preferences, checked

我正在尝试创建一个应用程序，其中首选项摘要根据`CheckBoxPreference`.

我不太确定如何查询首选项，因为好旧的`isChecked()`不起作用。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-25T07:11:58.767

Would be much simpler if you just used `android:summaryOff` and `android:summaryOn` in your preference layout. No code required. E.g:

```
<CheckBoxPreference
        android:enabled="true"
        android:key="alerts"
        android:title="Alerts" 

        android:summaryOn="You will get notified when something interesting happens"
        android:summaryOff="You will not be notified"
        /> 
```

See: [http://developer.android.com/reference/android/preference/CheckBoxPreference.html](http://developer.android.com/reference/android/preference/CheckBoxPreference.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T12:57:47.037

```
public class Preferences extends PreferenceActivity
        implements OnSharedPreferenceChangeListener {

    public final static String KEY_CHECK = "check";
    private CheckBoxPreference mCheckBoxPreference;

    @Override
    public void onCreate(Bundle savedInstance) {
        super.onCreate(savedInstance);
        addPreferencesFromResource(R.xml.preferences);
        mCheckBoxPreference = (CheckBoxPreference) getPreferenceScreen()
            .findPreference(KEY_CHECK);
    }

    @Override
    protected void onResume() {
        super.onResume();
        getPreferenceScreen().getSharedPreferences()
            .registerOnSharedPreferenceChangeListener(this);
    }

    @Override
    protected void onPause() {
        super.onPause();
        getPreferenceScreen().getSharedPreferences()
            .unregisterOnSharedPreferenceChangeListener(this);
    }

    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
            String key) {
        if (key.equals(KEY_CHECK)) {
            if (mCheckPreference.isChecked()) {
                mCheckPreference.setSummary(mCheckPreference.getEntry());
            }
        }
    }
} 
```

# sql-server - 由于“保护级别”值“encryptsensitivewithuserkey”导致的 SSIS 错误，pacakge 可以没有敏感信息吗？

> ID：11739248
> 
> 赞同：0
> 
> 时间：2012-07-31T11:38:08.397
> 
> 标签：sql-server, ssis

我今天最终支持了一个全新的（对我来说:)）包，它抛出了以下错误。

“无法解密受保护的 XML 节点“DTS:Property”，错误为 0x8009000B“密钥在指定状态下无效。”。您可能无权访问此信息。当出现加密错误时会发生此错误。验证正确的密钥可用。

"

我得到那个包已经部署了“保护级别”值“encryptsensitivewithuserkey”所以ssis引擎正在寻找它没有在生产机器上得到的开发者用户密钥（Windows配置文件）。

由于 pacakge 在此错误上没有设计失败，因此它继续进行并最终完美地完成了它的工作。

现在我有点困惑，我理解生产中的 SSIS 引擎的方式将无法读取一些本应阻止他完成工作的敏感信息。我不确定哪些属性是敏感的（我认为这是由 TASK/Component 作者决定的）。

只是为了给出包装的想法，我在下面给出了图片。

![在此处输入图像描述](../Images/35a15776ce0cb6b593696d2adde2205d.png)

没有什么敏感的东西需要开发者的用户密钥吗？

我只是想澄清一下我对它是如何工作的概念。

# c++ - Qt - 对主要的 QDialog 选择感到困惑

> ID：11739258
> 
> 赞同：0
> 
> 时间：2012-07-31T11:38:33.467
> 
> 标签：c++, qt, qt4, qdialog, qtgui

我有以下 Qt 代码：

```
int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    ChoosingDialog cdlg;

    if(!startWin.exec())
    {
        // nothing chosen
        return 0;
    }

    if(cdlg.firstWindowSelected)
    {
        CFirstWindow win;
        win.show();

        return app.exec();
    }
    else
    {
        CSecondWindow win;
        win.show();

        return app.exec();
    }

} 
```

这似乎可行，但它在某些 asm 行中给了我一个关于“事件调度程序清理”的错误。我试图欺骗一下，我发现问题与 app.exec() 调用有关。

更新：如果我将这些行添加到选择对话框（这是一个由 Qt Creator 自动生成的简单空白类）

```
void ChoosingDialog ::closeEvent(QCloseEvent *)
{
    exit(1);
} 
```

我没有收到任何错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:10:59.127

原来我在 QApplication 之前使用了“singleapplication”类。共享内存锁出了点问题。

一旦我重新启动系统，异常就消失了...... bof..你相信魔法吗？

# c# - 在调试模式下将大型数组显示为表

> ID：11739259
> 
> 赞同：1
> 
> 时间：2012-07-31T11:38:35.910
> 
> 标签：c#, visual-studio-2010, debugging

是否有适用于 Visual Studio 2010 的插件在调试模式下以可读形式（例如表格）显示数组？

我尝试了“Array Visualizer”，但它无法完全显示我的 int[60,95] 数组。

适用于 Visual C# 的东西对我来说就足够了。

谢谢！

# javascript - JavaScript：如何使用实例变量

> ID：11739264
> 
> 赞同：0
> 
> 时间：2012-07-31T11:38:48.607
> 
> 标签：javascript, oop

为什么这不能按预期工作。（见预期评论）

```
var Module = function () {
    var public_instance_var;

    function doStuff () {
        Module.doOtherStuff();
        console.log(public_instance_var); // expected: true, but logs undefined
    };

    function doOtherStuff() {
        public_instance_var = true;
    };

    return {
        public_instance_var: instance_var,
        doStuff: doStuff,
        doOtherStuff: doOtherStuff
    }
}();

Module.doStuff(); 
```

*更新：*根据 jAndy 的一些建议进行了相应修复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:17:55.683

这段代码所做的是，简单地说：创建并运行一个函数并将其返回值分配给一个变量：`Module`。返回值是一个具有 1 个属性的对象：`public_instance_var`，它指向变量`instance_var`，或者（在更正错字之后：`public_instance_var`）。此变量已声明，但未实例化。因此返回值如下所示：

```
Module.public_instance_var = undefined 
```

最后一行`Module.doStuff();`一点用都没有：Module 是一个没有方法的对象。当匿名函数返回时，您声明的函数将被垃圾回收。如果您想访问这些函数，则需要将它们包含在 return 语句中。阅读闭包、对象构造函数和设计模式，但我想说你所追求的代码看起来像这样：

```
var Module = (function()
    var public_instance_var;
    function doStuff () {
        this.doOtherStuff();
        console.log(public_instance_var); // expected: true, but logs undefined
    };
    function doOtherStuff() {
        public_instance_var = true;
    };
    return {
        public_instance_var: public_instance_var,
        doStuff: doStuff,
        doOtherStuff: doOtherStuff
    };
})(); 
```

当然，这样你的变量`public_instance_var`是一个公共属性，所以我猜你真正想要做的是模拟一个私有属性和方法。在这种情况下，您最终可能会得到与此类似的代码：

```
var Module = (function()
{
    var public_instance_var;
    return {
        //public_instance_var: public_instance_var, remove this line
        //the closure will preserve access to the variable
        doStuff: function ()
        {
            this.doOtherStuff();//this, you're referencing the object's property
            console.log('here I am');
        },
        doOtherStuff: function ()
        {
            public_instance_var = true;
            //this won't work anymore:
            //this.public_instance_var = true;
        };
    }
})(); 
```

`Module.doStuff()`现在 logs `here I am`，但`doOtherStuff`现在也是一个公共方法。以下是您可以选择解决问题的方法：

```
var Module = (function()
{
    var public_instance_var;
    function doOtherStuff ()
    {
        public_instance_var = true;
    };
    return {
        //public_instance_var: public_instance_var, remove this line
        //the closure will preserve access to the variable
        doStuff: function ()
        {
            doOtherStuff();//don't use this here, but the reference to the function exists thanks to closure
            console.log('here I am');
            console.log(public_instance_var);//logs true
        }
    };
})(); 
```

这些只是你可以用闭包和返回对象的函数做的一些非常强大的事情。
只需阅读几篇文章，比如[这篇](http://higher-order.blogspot.be/2008/02/javascript-parasitic-inheritance-super.html)文章，还有更好的文章。谷歌这个词`power constructors`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:42:28.700

这里有多个错误：

*   你不`DoStuff`作为模块接口返回
*   `instance_var`未声明，可能意味着`public_instance_var`
*   `doOtherStuff`从来没有分配给`Module`，只是把它称为`doOtherStuff();`

固定代码：

```
var Module = function () {
    var public_instance_var;

    function doStuff() {
        doOtherStuff();
        console.log(public_instance_var); // expected: true, but logs undefined
    };

    function doOtherStuff() {
        public_instance_var = true;
    };

    return {
        doStuff: doStuff,
        public_instance_var: public_instance_var
    }
}();

Module.doStuff(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:46:06.343

像这样改变你的代码

```
var Module = function () {
    var public_instance_var;

    function doStuff () {
        doOtherStuff();
        console.log("var is ", public_instance_var); // expected: true, but logs undefined
    };

    function doOtherStuff() {
        public_instance_var = true;
    };

    return {
        public_instance_var: public_instance_var,
        doStuff : doStuff
    }
}();

Module.doStuff(); 
```

*   你必须返回`doStuff()`函数（否则外部将是未定义的）而`public_instance_var`不是`instance_var`
*   你需要在`doOtherStuff()`没有前缀的情况下执行`Module.`

# c# - TxSelect 和 TransactionScope

> ID：11739265
> 
> 赞同：5
> 
> 时间：2012-07-31T11:39:01.177
> 
> 标签：c#, transactions, rabbitmq

最近，我一直在检查[RabbitMQ](http://www.rabbitmq.com/) over C# 作为实现 pub/sub 的一种方式。我更习惯于使用[NServiceBus](http://nservicebus.com/)。NServiceBus 通过在`TransactionScope`. 其他事务感知操作也可以加入相同的`TransactionScope`（如 MSSQL），因此一切都是真正的原子操作。下面，NSB 引入了 MSDTC 进行协调。

我看到在 RabbitMQ 的 C# 客户端 API 中有一个`IModel.TxSelect()`和`IModel.TxCommit()`. 这在提交之前不向交换器发送消息效果很好。这涵盖了有多个消息发送到需要原子的交换的用例。但是，有没有一种将数据库调用（比如 MSSQL）与 RabbitMQ 事务同步的好方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-30T15:33:40.687

您可以通过实现[IEnlistmentNotification](http://msdn.microsoft.com/en-us/library/system.transactions.ienlistmentnotification%28v=vs.110%29.aspx)接口来编写供 MSDTC 使用的 RabbitMQ 资源管理器。该实现在登记参与时为事务管理器提供两个阶段提交通知回调。请注意，MSDTC 价格昂贵，会大大降低您的整体性能。

**RabbitMQ 资源管理器示例：**

```
sealed class RabbitMqResourceManager : IEnlistmentNotification
{
    private readonly IModel _channel;

    public RabbitMqResourceManager(IModel channel, Transaction transaction)
    {
        _channel = channel;
        _channel.TxSelect();
        transaction.EnlistVolatile(this, EnlistmentOptions.None);
    }

    public RabbitMqResourceManager(IModel channel)
    {
        _channel = channel;
        _channel.TxSelect();
        if (Transaction.Current != null)
            Transaction.Current.EnlistVolatile(this, EnlistmentOptions.None);
    }

    public void Commit(Enlistment enlistment)
    {
        _channel.TxCommit();
        enlistment.Done();
    }

    public void InDoubt(Enlistment enlistment)
    {           
        Rollback(enlistment);
    }

    public void Prepare(PreparingEnlistment preparingEnlistment)
    {
        preparingEnlistment.Prepared();
    }

    public void Rollback(Enlistment enlistment)
    {
        _channel.TxRollback();
        enlistment.Done();
    }
} 
```

**使用资源管理器的示例**

```
using(TransactionScope trx= new TransactionScope())
{
    var basicProperties = _channel.CreateBasicProperties();
    basicProperties.DeliveryMode = 2;

    new RabbitMqResourceManager(_channel, trx);
    _channel.BasicPublish(someExchange, someQueueName, basicProperties, someData);
    trx.Complete();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-04T18:47:14.417

据我所知，没有办法将 TxSelect/TxCommit 与 TransactionScope 进行协调。

目前，我采用的方法是使用具有持久消息的持久队列来确保它们在 RabbitMQ 重新启​​动后仍然存在。然后，当从队列中消费时，我读取一条消息并进行一些处理，然后将一条记录插入到数据库中，一旦完成所有这些，我就会确认（nowledge）消息并将其从队列中删除。这种方法的潜在问题是消息可能最终被处理两次（例如，如果消息被提交到数据库，但在消息可以被确认之前与 RabbitMQ 的连接被断开），但是对于系统来说我们正在建设我们关注吞吐量。（我相信这被称为“至少一次”方法）。

RabbitMQ 站点确实说使用 TxSelect 和 TxCommit 会对性能产生重大影响，因此我建议对这两种方法进行基准测试。

无论采用何种方式，您都需要确保您的消费者能够处理可能被处理两次的消息。

* * *

如果您还没有找到它，请在[此处](http://www.google.co.uk/url?sa=t&rct=j&q=rabbitmq%20exactly%20once&source=web&cd=2&sqi=2&ved=0CFIQFjAB&url=http://www.rabbitmq.com/releases/rabbitmq-dotnet-client/v2.1.0/rabbitmq-dotnet-client-2.1.0-user-guide.pdf&ei=Em0dUNCwF7Ok0AX3tIH4DQ&usg=AFQjCNE__M0oBROm7RROGpkX9zv9DMA-Kw)查看 RabbitMQ 的 .Net 用户指南，特别是第 3.5 节

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T18:03:22.467

假设您已经为抽象 IServiceBus 提供了服务总线实现。我们可以假装它是引擎盖下的rabbitmq，但它当然不需要。

当您调用 servicebus.Publish 时，您可以检查 System.Transaction.Current 以查看您是否处于事务中。如果你是并且它是一个 mssql 服务器连接的事务，你可以发布到 sql server 中的代理队列而不是发布到兔子，这将尊重你正在执行的任何数据库操作的提交/回滚（你想做一些连接这里的魔法可以避免经纪人发布将您的 txn 升级到 msdtc）

现在您需要创建一个需要读取代理队列并实际发布到rabbit的服务，这样，对于非常重要的事情，您可以保证您的数据库操作之前完成并且消息在某个时候发布到rabbit将来（当服务中继它时）。如果在提交代理时发生异常，这里仍然可能发生故障，但是问题的窗口会大大减少，更糟糕的情况是你最终会发布多次，你永远不会丢失一条消息。这是不太可能的，在接收之后但在提交之前下线的 sql 服务器将是一个示例，说明您何时最终会以最少的双重发布（当服务器上线时，您将再次发布）您可以智能地构建您的服务减轻一些，

# php - 实现自动建议的方法

> ID：11739267
> 
> 赞同：1
> 
> 时间：2012-07-31T11:39:06.337
> 
> 标签：php, mysql, xml, ajax

我正在寻找最佳实践或最合适的方式来为我的网站实现自动建议功能。我所知道的是，我们可以通过多种方式来做到这一点，比如数据库（目前我使用的）、纯文本文件、XML 文件等......

在性能和限制方面，哪种方式最合适？我有很多并发用户。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:26:55.923

您应该在客户端使用[jQuery UI Autocomplete](http://jqueryui.com/demos/autocomplete/)或[Twitter Bootstrap Typeahead之类的库。](https://github.com/tcrosen/twitter-bootstrap-typeahead)

在服务器端，您创建一个方法来处理您的 AJAX 调用并为使用的 JS 库提供 JSON 或 XML 响应（无论您喜欢哪个）。

但是，如果您的值是预定义的并且列表足够小，您可以将 javascript 中的值作为您的数据源，以避免对服务器的请求。

如果您使用数据库来选择您的建议，您可以使用如下内容：

```
SELECT id, value FROM your_table WHERE value LIKE `%:keyword%`; 
```

并替换`:keyword`为提供的用户输入。我还将在该`value`字段上添加一个索引以更快地执行此查询。

# java - 调用签名已更改的 java 方法时，jsp 中的 java.lang.NoSuchMethodError

> ID：11739268
> 
> 赞同：1
> 
> 时间：2012-07-31T11:39:05.767
> 
> 标签：java, jsp

我有一个带有原始签名的java方法，如下所示：

```
public boolean sampleMethod(int num) 
```

这在我的项目中的很多 jsp 中都被调用。最近，我需要将方法签名更改为：

```
public boolean sampleMethod(long num) 
```

有了这个新签名，我的 jsp 中的所有方法调用现在都会给我一个 java.lang.NoSuchMethodError。即使我已经编译了代码，他们似乎仍在调用旧方法。我正在使用 Intellij IDEA 11.0。

非常感谢您的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:44:07.870

看起来您仍然`war`部署了旧文件。请执行下列操作：

1.  停止应用程序/Web 服务器。
2.  从 web-apps 目录中删除应用程序。
3.  启动应用程序/Web 服务器。
4.  部署新的战争

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:47:36.457

重载方法或更改 JSP 端以显式调用新方法。重载的方法会像；

```
public boolean sampleMethod(int num){
    return sampleMethod((long) num);
}

public boolean sampleMethod(long num){
    // do your work
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-17T11:02:35.103

我在 Eclipse IDE 中遇到了同样的问题。

正如 Reimeus 所说，您需要删除 EAR 文件。就我而言，Eclipse IDE 不会将其存储在 Tomcat 文件夹中，而是存储在`/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/work/`文件夹中。

它也可以从 Server 的选项卡中清除，右键单击您的项目并选择“Clean Module Work Directory...”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-24T04:16:25.697

只需删除 Servlet 容器中的工作缓存，然后让服务器重新编译所有 jsp 即可修复。

/tomcat/work/Catalina/Tomcat 的主机名

# asp.net - 无法在 dbo 模式中执行存储过程

> ID：11739273
> 
> 赞同：0
> 
> 时间：2012-07-31T11:39:28.397
> 
> 标签：asp.net, sql-server, sql-server-2008, ssms

我使用 Windows 身份验证连接到 SQL Server。我在`dbo`架构中创建了一个存储过程。当我尝试在 SSMS 中执行该存储过程时，出现以下错误

> 对象'sp_test'，数据库'myDB，模式= dbo的执行权限被拒绝

这里需要做什么？

为什么我需要为我创建的存储过程授予权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:46:40.920

您是否创建了存储过程并不重要。SQL Server 不使用 Windows 身份验证来确定您是否有权执行存储过程。它仅使用它来授予您连接到服务器的权限。连接后，您需要将 Windows 帐户映射到相应数据库中的用户。完成此操作后，您通常希望自己成为数据库角色的成员（创建新角色或使用预定义角色之一），然后将执行权限授予您所属的角色。这确保了该角色的任何成员都可以继续执行存储过程。

# php - Zend_Form 中的验证取决于元素/字段值？

> ID：11739276
> 
> 赞同：1
> 
> 时间：2012-07-31T11:39:32.733
> 
> 标签：php, zend-framework, zend-form, zend-validate

让我们想象一下，我们有一个表格问：“你是先生/夫人吗？” 根据答案值，我们将实施进一步的验证。

例如，先生 > 验证最喜欢的车型 夫人 > 验证最喜欢的花

可以覆盖`isValid`功能吗？也许一些最佳实践的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:28:50.527

我会编写一个自定义验证器并使用提供的`$context`变量。

一个简短的例子

**控制器**

```
class MyController extends Zend_Controller_Action {
    public function indexAction() {
        $form = new Application_Form_Gender();
        $this->view->form = $form;

        if ($this->getRequest()->isPost()) {
            if ($form->isValid($this->getRequest()->getPost())) {
                /*...*/
            }
        }
    }
} 
```

**形式**

```
class Application_Form_Gender extends Zend_Form {

    public function init()
    {
        $this->addElement('radio', 'radio1', array('multiOptions' => array('m' => 'male', 'w' => 'female')));
        $this->getElement('radio1')->isRequired(true);
        $this->getElement('radio1')->setAllowEmpty(false);

        $this->addElement('text', 'textm', array('label' => 'If you are male enter something here');
        $this->getElement('textm')->setAllowEmpty(false)->addValidator(new MyValidator('m'));

        $this->addElement('text', 'textf', array('label' => 'If you are female enter something here'));     
        $this->getElement('textf')->setAllowEmpty(false)->addValidator(new MyValidator('f'));

        $this->addElement('submit', 'submit');
    } 
```

**验证器**

```
class MyValidator extends Zend_Validate_Abstract {
    const ERROR = 'error';
    protected $_gender;
    protected $_messageTemplates = array(
        self::ERROR      => "Your gender is %gender%, so you have to enter something here",
    );
    protected $_messageVariables = array('gender' => '_gender');

    function __construct($gender) {
        $this->_gender = $gender;
    }

    function isValid( $value, $context = null ) {
        if (!isset($context['radio1'])) {
            return true;
        }
        if ($context['radio1'] != $this->_gender) {
            return true;
        }
        if (empty($context[sprintf('text%s', $this->_gender)])) {
            $this->_error(self::ERROR);
            return false;
        }
        return true;
    }
} 
```

正如您在此示例中所看到的，其中提供的所有数据`$form->isValid()`都可以通过`$context`变量获得，并且您可以执行任何您喜欢的检查。

# c - c 生成函数并调用它

> ID：11739281
> 
> 赞同：11
> 
> 时间：2012-07-31T11:39:42.360
> 
> 标签：c, x86, runtime, code-generation

```
#include <stdio.h>

#define uint unsigned int
#define AddressOfLabel(sectionname,out) __asm{mov [out],offset sectionname};

void* CreateFunction(void* start,void *end) {
    uint __start=(uint)start,__end=(uint)end-1
        ,size,__func_runtime;
    void* func_runtime=malloc(size=(((__end)-(__start)))+1);
    __func_runtime=(uint)func_runtime;
    memcpy((void*)(__func_runtime),start,size);
    ((char*)func_runtime)[size]=0xC3; //ret
    return func_runtime;
}
void CallRuntimeFunction(void* address) {
    __asm {
        call address
    }
}

main() {
    void* _start,*_end;
    AddressOfLabel(__start,_start);
    AddressOfLabel(__end,_end);
    void* func = CreateFunction(_start,_end);
    CallRuntimeFunction(func); //I expected this method to print "Test"
    //but this method raised exception
    return 0;
__start:
    printf("Test");
__end:
} 
```

`CreateFunction`- 在内存（函数范围）中获取两个点，分配，将其复制到分配的内存并返回它（`void*`使用类似于函数来调用程序集）

`CallRuntimeFunction`- 运行从返回的函数`CreateFunction`

`#define AddressOfLabel(sectionname,out)`- 将标签（sectionname）的地址输出到变量（out）

当我调试这段代码并进入调用`CallRuntimeFunction`并去反汇编时，我看到了很多`???`之间的汇编代码而不是`__start`标签`__end`。

我试图在两个标签之间复制机器代码，然后运行它。但我不知道为什么我不能调用分配给`malloc`.

### 编辑：

我更改了一些代码并完成了部分工作。运行时函数的内存分配：

```
void* func_runtime=VirtualAlloc(0, size=(((__end)-(__start)))+1, MEM_COMMIT, PAGE_EXECUTE_READWRITE); 
```

从函数范围复制：

```
CopyMemory((void*)(__func_runtime),start,size-1); 
```

但是当我运行这个程序时，我可以：

```
mov         esi,esp  
push        0E4FD14h  
call        dword ptr ds:[0E55598h] ; <--- printf ,after that I don't know what is it
add         esp,4  
cmp         esi,esp  
call        000B9DBB  ; <--- here
mov         dword ptr [ebp-198h],0  
lea         ecx,[ebp-34h]  
call        000B9C17  
mov         eax,dword ptr [ebp-198h]
jmp         000D01CB  
ret 
```

在`here`它进入另一个功能和奇怪的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:45:13.070

```
void CallRuntimeFunction(void* address) {
    __asm {
        call address
    }
} 
```

这里的地址是指向这个函数的参数的“指针”，它也是一个指针。

指向指针的指针

利用：

```
void CallRuntimeFunction(void* address) {
_asm {
    mov ecx,[address] //we get address of "func"
    mov ecx,[ecx]   //we get "func"
    call [ecx]      //we jump func(ecx is an address. yes)
    }
} 
```

你想调用 func 这是一个指针。在您的 CallRunt... 函数中传递时，这会生成一个指向该指针的新指针。二级指针。

```
void* func = CreateFunction(_start,_end); 
```

是的 func 是一个指针

重要提示：检查您的编译器“调用约定”选项。试试decl

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:51:42.747

确保在函数代码生成和调用之间使缓存（指令和数据）无效。有关更多信息，请参阅**自修改代码**。

# html - HTML 的正确结构

> ID：11739286
> 
> 赞同：6
> 
> 时间：2012-07-31T11:39:53.327
> 
> 标签：html, css

在开发网站时，我一直在阅读有关最佳实践的信息。但我仍然很好奇，因为找到的答案大多是多种多样的，取决于项目的范围和许多其他考虑因素。

但为了简短起见，基本上我想询问网站中 3 个主要元素的正确格式。

1.  标题
2.  主体
3.  页脚

结构应该如何构建？这三个是否应该包装在这样的容器中：

```
<div class="wrap">
    <div class="header"></div>
    <div class="body"></div>
    <div class="footer"></div>
</div> 
```

样式应该如何做？我看到有些人建议对 CSS 使用 position:absolute，而另一些人则使用 relative。很抱歉这个非常基本的问题，但在我目前的学习阶段，我对此感到非常困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:43:30.947

存在像拥有大量包装器这样的伪标准的唯一原因是因为它已被证明在创建布局时很有用。基本上，这一切都是有原因的。如果您可以设计您想要的页面而无需`<div id="mainwrapper">`围绕它 - 那么您不需要像这样的主包装器。:)

我的建议是简单地开始创建一个站点，并尝试使用简单的元素和 CSS 样式让它看起来像你想要的那样。如果你不能让它工作——例如你不明白如何创建一个流动的列布局——那么只需在网络上搜索“HTML 流动列布局”之类的东西，然后从那里开始。

**编辑：** “*让它工作*”通常意味着不必使用表格、大量幻数和大量元素来创建简单的东西。

经验法则：*如果您不了解**1)**他们做了什么**2)**为什么需要它们，请不要剪切和粘贴代码/解决方案。*最好自己尝试构建它，然后在使用它时意识到为什么某些模式（clearfix、避免表格、浮动布局等）如此普遍。它现在可能无法节省您的时间，但从长远来看，它肯定会让您成为更好的开发人员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T11:47:50.720

HTML 布局非常主观，这取决于您作为开发人员的要求/偏好。两种主要布局是**静态**（使用绝对定位等）和**浮动**（使用浮动 div 进行液体布局）。

[这是一篇很好的文章，更深入地介绍了这些原则](http://www.htmldog.com/guides/cssadvanced/layout/)

基本上，您应该使用块级元素（即**div**标签）来构建您的页面。如果您有表格数据**表**非常好，但不要将它们用于您的布局，因为它们渲染速度很慢，并且当您需要完全控制页面布局时可能会使事情变得困难。

样式的最佳实践建议您使用 CSS 通过类属性而不是内联来定位和设置元素的样式。然后，这将允许您缩小 CSS 脚本并减少页面的开销。CSS 发展得非常好，有很多选择器可供您使用，以减少标记中的类数量。有关它们的更多信息，请参阅[W3C 的 CSS 选择器。](http://www.w3.org/TR/CSS2/selector.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T11:49:23.980

在编写 HMTL 时，您需要牢记标记的可读性以及将来更改它的难易程度。

尝试并牢记**关注点的分离**。您网站的哪些部分在结构上与其他部分相关，哪些部分不依赖于其他部分。尝试将依赖元素组合在一起（使用 div 等）并将不相关的元素分开。

尝试以类似的方式构建您的 CSS，如果 2 个元素位置依赖于另一个，但另一个不依赖，则将相关元素分组到一个类下，然后使用继承来构建差异。其中不相关的可能应该完全在一个单独的 CSS 类中。

还可以尝试构建您的 CSS，以便可以重复使用。

有点笼统，但希望它会有所帮助？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T11:55:44.647

有很多网站提供各种 SEO 友好的布局，它们都提供 css

[http://www.searchenginefriendlylayouts.com/](http://www.searchenginefriendlylayouts.com/)

[http://www.davidjrush.com/blog/2011/02/seo-friendly-two-column-layout/](http://www.davidjrush.com/blog/2011/02/seo-friendly-two-column-layout/)

[http://matthewjamestaylor.com/blog/perfect-3-column.htm](http://matthewjamestaylor.com/blog/perfect-3-column.htm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T12:08:02.697

HTML 5 示例。现在一天最好的布局宽度是 960。`.content{ width:960px }`

```
<!-- Outer Div -->
<div id="content">
    <!-- Inner Content -->
    <div id="content-inner">

        <!-- header -->
        <header>
          <div class="header">
            <div id="header_wrapper"></div>
          </div>
         </header>

         <!-- body -->
         <div id="content-body">
            <section></section>
            <section></section>
         </div>
    </div>

    <!-- footer -->
    <footer>
         <div class="footer">
            <div id="footer_wrapper"></div>
          </div>
    </footer>

</div> 
```

# python - python在print或变量中解析变量

> ID：11739287
> 
> 赞同：2
> 
> 时间：2012-07-31T11:40:01.377
> 
> 标签：python, fabric

试图解析 print 语句中的变量。

```
client = fabric.operations.prompt("Enter client's email address:")
cmd = 'mysql -u %s -p%s -e "UPDATE users SET email = ' %(env.user, dbpasswd) + '"%client"' + ' WHERE id = 1" %s' %account
print cmd 
```

结果：

```
mysql -u root -password -e "UPDATE users SET email = %client WHERE id = 1" demo 
```

期望的结果：

```
mysql -u root -password -e "UPDATE users SET email = 'abc@xyz.com' WHERE id = 1" demo 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:04:09.563

我很惊讶没有人提到新的字符串格式化选项：

```
cmd = 'mysql -u {user} -p{passwd} -d "UPDATE users SET email = {email} WHERE id = 1" {account}'.format(user=env.user, passwd=dbpasswd, email=client, account=account) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T11:48:46.550

```
cmd = 'mysql -u %s -p %s -e "UPDATE users SET email = ' %(env.user, dbpasswd) + "'%s'" % client + ' WHERE id = 1" %s' % account 
```

那应该解决它。您需要用`%client`的值替换`client`。

# asp.net-mvc - 如何绕过在 ASP.NET Web API 中发现多个操作的异常

> ID：11739288
> 
> 赞同：4
> 
> 时间：2012-07-31T11:40:02.630
> 
> 标签：asp.net-mvc, rest, asp.net-mvc-routing, asp.net-mvc-4, asp.net-web-api

当试图为以下问题寻找解决方案时：

[具有默认操作的 MVC Web Api 路由不起作用](https://stackoverflow.com/questions/11724749/mvc-web-api-route-with-default-action-not-working/11725968#11725968)

大多数情况下，我遇到了“发现多个操作”的问题。如果路由机制发现多个与路由匹配的动作，则会抛出异常 500。

例如，ValuesController 中有两个动作：

```
[HttpGet]
public IEnumerable<String> Active()
{
    var result = new List<string> { "active1", "active2" };
    return result;
}

public IEnumerable<string> Get()
{
    return new[] { "value1", "value2" };
} 
```

与默认路由匹配：

```
 routes.MapHttpRoute(
          name: "DefaultApi",
          routeTemplate: "api/{controller}/{id}",
          defaults: new { id = RouteParameter.Optional }
      ); 
```

和

```
GET: /api/values 
```

发现多个操作会出错。

我的问题：如何通过选择指定的操作绕过异常“找到多个操作”（选择第一个匹配的操作也可以）。

**更新 1：**更新来自 tugberk 的评论，感谢指出。

**更新2：**从迈克的评论更新，似乎这个问题不太正确，所以我改变了提问的方式，没有提到路由约束。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T12:39:36.720

首先，除非您在其上应用 HttpGet 属性，否则这些路由不可能匹配 Active 操作。我会假设你已经这样做了。第二件事是你想要的不合逻辑。您想发出一个获取请求并执行两个相同的操作。您现在正在使用所谓的基于 HTTP 方法的路由。对于你的情况，我相信所谓的基于动作的路由是最好的。

假设您有以下两个操作：

```
[HttpGet]
public IEnumerable<String> Active()
{
    var result = new List<string> { "active1", "active2" };
    return result;
}

[HttpGet]
public IEnumerable<string> Retrieve()
{
    return new[] { "value1", "value2" };
} 
```

您的路线应如下所示：

```
routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{action}/{id}",
        defaults: new { id = RouteParameter.Optional }
    ); 
```

然后，您可以向具有以下 URI 的人请求：

> 获取/控制器名称/检索
> 
> 获取/控制器名称/活动

# php - android与mysql连接的JSONException

> ID：11739294
> 
> 赞同：0
> 
> 时间：2012-07-31T11:40:19.943
> 
> 标签：php, android, mysql, json

我有一个 Android 应用程序，它应该能够使用 php 脚本和 mysql 数据库登录不同的用户。由于 JSON 错误，未建立连接。

PHP 文件：

```
<?php
$dbhost="localhost";
$dbuser="";
$dbpass="";
$dbdb="test";
$connect = mysql_connect($dbhost,$dbuser,$dbpass)or die("connection error");
mysql_select_db($dbdb)or die ("database selection error");
$username=isset($_POST['username']);
$password=isset($_POST['password']);
$query = mysql_query("SELECT * FROM table1 WHERE username = '$username' AND password = '$password'");
$num = mysql_num_rows($query);
if($num == 1) { while($list = mysql_fetch_assoc($query)){
$output=$list;
echo json_encode($output);
}
mysql_close();}?> 
```

安卓代码：

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("username",username));
    nameValuePairs.add(new BasicNameValuePair("password",password));
    try {
        httpclient = new DefaultHttpClient() ;
        httppost = new HttpPost("http://10.0.2.2/projet/connection.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        response = httpclient.execute(httppost);
        Log.i("connect", response.getStatusLine().toString());
        //verifier requete http de code 200
        if(response.getStatusLine().getStatusCode()==200){
            entity = response.getEntity();
            //verifier que entity non null
            if(entity != null){
                InputStream instream = entity.getContent();
                //creer JSON object ayant converted data comme parametre
                JSONObject jsonresponse = new JSONObject(convertStreamToString(instream));
                //affecter json response à une variable locale 
                String retUser = jsonresponse.getString("username");
                String retpass = jsonresponse.getString("password");
                //valider login
                if (username.equals(retUser) && password.equals(retpass)){
                    Log.i("connect", response.getStatusLine().toString());
                    //creation de SharedPreference pour enregistrer les login details
                    SharedPreferences sp = getSharedPreferences("logindetails",0);
                    //modifier sharedPreferences
                    SharedPreferences.Editor spedit = sp.edit();
                    //mettre logindetails comme string
                    spedit.putString("username", username);
                    spedit.putString("password", password);
                    //fermer editor
                    spedit.commit();
                    appelle();
                    Toast.makeText(getBaseContext(), "connexion avec succés", Toast.LENGTH_SHORT).show();

                }else {
                    Toast.makeText(getBaseContext(), "login details invalide", Toast.LENGTH_SHORT).show();
                }
            }
        }
    }catch(Exception e){
        e.printStackTrace();
        Toast.makeText(getBaseContext(), "Erreur lors du connexion", Toast.LENGTH_SHORT).show();
    }   
}

 private static String convertStreamToString(InputStream is) {
     //méthode pour parcourir la table et lire les données
        /*
         * To convert the InputStream to String we use the BufferedReader.readLine()
         * method. We iterate until the BufferedReader return null which means
         * there's no more data to read. Each line will appended to a StringBuilder
         * and returned as String.
         */
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    } 
```

JSON异常：

```
07-31 11:03:36.995: W/System.err(342): org.json.JSONException: End of input at character 0 of 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:58:48.007

```
 HttpParams httpParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
        HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
        HttpClient client = new DefaultHttpClient(httpParams);
        HttpPost request = new HttpPost( "http://www.colorssoftware.com/savedata.php");

        request.setHeader( "http://10.0.2.2/projet/connection.php" );       

        JSONObject json = new JSONObject();          
        json.put("user_name", "username");
        json.put("user_password", "password");

        Log.i("jason Object", json.toString());    
        System.out.println("jason Object value is" + json.toString());

        TextView text = (TextView)findViewById(R.id.textView);
        text.setText(json.toString());

        StringEntity se = new StringEntity(json.toString());                 
        se.setContentEncoding("UTF-8");
        se.setContentType("application/json");    
        request.setEntity(se);        

        HttpResponse response = client.execute(request);        
        HttpEntity entity = response.getEntity();
        InputStream is = entity.getContent();
        String _response = convertStreamToString(is);              
        int res_code = response.getStatusLine().getStatusCode(); 
```

# c# - C# 将步幅/缓冲区/宽度/高度转换为位图

> ID：11739296
> 
> 赞同：1
> 
> 时间：2012-07-31T11:40:24.817
> 
> 标签：c#, bitmap, writeablebitmap

我有一个图像宽度/高度/步幅和缓冲区。

如何将此信息转换为 System.Drawing.Bitmap？如果我有这 4 个东西，我可以恢复原始图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:44:37.780

有一个`Bitmap`构造函数重载，它需要你拥有的一切（加号`PixelFormat`）：

[`public Bitmap(int width, int height, int stride, PixelFormat format, IntPtr scan0);`](http://msdn.microsoft.com/en-us/library/zy1a2d14.aspx)

这可能有效（如果`args.Buffer`是 blittable 类型的数组，`byte`例如）：

```
Bitmap bitmap;
var gch = System.Runtime.InteropServices.GCHandle.Alloc(args.Buffer, GCHandleType.Pinned);
try
{
    bitmap = new Bitmap(
        args.Width, args.Height, args.Stride,
        System.Drawing.Imaging.PixelFormat.Format24bppRgb,
        gch.AddrOfPinnedObject());
}
finally
{
    gch.Free();
} 
```

更新：

可能最好`Bitmap`手动将图像字节复制到新创建的文件中，因为构造函数似乎不会这样做，并且如果`byte[]`图像数据数组被垃圾收集，则可能会发生各种不好的事情。

```
var bitmap = new Bitmap(args.Width, args.Height, System.Drawing.Imaging.PixelFormat.Format24bppRgb);
var data = bitmap.LockBits(
    new Rectangle(0, 0, args.Width, args.Height),
    System.Drawing.Imaging.ImageLockMode.WriteOnly,
    System.Drawing.Imaging.PixelFormat.Format24bppRgb);

if(data.Stride == args.Stride)
{
    Marshal.Copy(args.Buffer, 0, data.Scan0, args.Stride * args.Height);
}
else
{
    int arrayOffset = 0;
    int imageOffset = 0;
    for(int y = 0; y < args.Height; ++y)
    {
        Marshal.Copy(args.Buffer, arrayOffset, (IntPtr)(((long)data.Scan0) + imageOffset), data.Stride);
        arrayOffset += args.Stride;
        imageOffset += data.Stride;
    }
}

bitmap.UnlockBits(data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:40:55.777

如果您将缓冲区设置为 byte[]、宽度和高度 + 像素格式（步幅），这应该可以工作

```
 public Bitmap CreateBitmapFromRawDataBuffer(int width, int height, PixelFormat imagePixelFormat, byte[] buffer)
    {
        Size imageSize = new Size(width, height);

        Bitmap bitmap = new Bitmap(imageSize.Width, imageSize.Height, imagePixelFormat);
        Rectangle wholeBitmap = new Rectangle(0, 0, bitmap.Width, bitmap.Height);

        // Lock all bitmap's pixels.
        BitmapData bitmapData = bitmap.LockBits(wholeBitmap, ImageLockMode.WriteOnly, imagePixelFormat);

        // Copy the buffer into bitmapData.
        System.Runtime.InteropServices.Marshal.Copy(buffer, 0, bitmapData.Scan0, buffer.Length);

        // Unlock  all bitmap's pixels.
        bitmap.UnlockBits(bitmapData);

        return bitmap;
    } 
```

# wpf - 在 WPF 中拖放 ListboxItems

> ID：11739300
> 
> 赞同：2
> 
> 时间：2012-07-31T11:40:45.863
> 
> 标签：wpf, drag-and-drop, listboxitems

我试图弄清楚如何通过鼠标拖动来上下移动带有 MediaElements 的预填充列表框中的项目。我将不胜感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:42:56.200

使用这个 dll：

```
 xmlns:ex="clr-namespace:Microsoft.Expression.Interactivity.Core;assembly=Microsoft.Expression.Interactions" 
```

然后，您可以使用交互触发器并在视图模型中调用您的方法。

```
 <i:Interaction.Triggers>
       <i:EventTrigger EventName="Drop">
          <ex:CallMethodAction TargetObject="{Binding }" MethodName="DocumentListBox_Drop" />
       </i:EventTrigger>
   </i:Interaction.Triggers> 
```

然后在视图模型中：

```
 Public Sub DocumentListBox_Drop(sender As Object, e As DragEventArgs)         
        Dim droppedFilePaths As String() = TryCast(e.Data.GetData(DataFormats.FileDrop, True), String())
        If Not droppedFilePaths Is Nothing Then
            For Each filepath As String In droppedFilePaths

            Next
        End If
End Sub 
```

你应该已经在你的参考列表中有这个 dll，如果没有，你可能需要在谷歌上寻找它。另请注意：除了我刚刚向您展示的内容之外，还有更多内容，例如确保将 allowdrop 设置为 true 等等。

# php - 是否有允许这样做的代码嗅探器标准？

> ID：11739301
> 
> 赞同：1
> 
> 时间：2012-07-31T11:40:49.813
> 
> 标签：php, codesniffer

是否有一个代码嗅探器标准，可以在没有错误或警告的情况下运行下面的代码？如果没有，是否有创建代码标准的教程，这也解释了已实施标准的不同嗅探器？

```
<?php

   /**
    * project name
    *
    * description
    * 
    * @author   First Last <email@google.com>
    */

   class Cookie
   {
      public static function set($key, $user, $timeout, $data, $sessionId)
      {
         foreach($user as $key => $value)
         {
            // some other things
         }

         if($key > 1)
         {
            // Line length 120
            // Unix line endings
            // no counts in loops
         }
         elseif($key == 1)
         {
            $timeout = TRUE;
         }

         switch ($data)
         {
            case '1':
            {
               // only '' for strings
            }break;

            case '2':
            {
            }break;

            default:
            {

            }break;
         }
      }

      public static function get($key)
      {

      }

      public static function delete($key)
      {

      }
   }

?> 
```

感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:48:38.463

我维护 PHP_CodeSniffer，所以人们会向我发送一些嗅探和标准。我还没有看到一个标准可以确保代码看起来像你展示的示例。

您可以通过使用 ruleset.xml 文件组合现有的嗅探来创建自己的标准。一些文档在这里： http: [//pear.php.net/manual/en/package.php.php-codesniffer.annotated-ruleset.php](http://pear.php.net/manual/en/package.php.php-codesniffer.annotated-ruleset.php)

但我知道您不会拥有创建标准所需的所有嗅探。因此，您将能够强制执行其中的一些，并且您可能会发现您决定要使用的其他一些嗅探，但是诸如仅用于 IF/ELSEIF 的括号周围缺少空格（即，不适用于 SWITCH 语句）之类的东西不是在存储库中。

我知道这不是您所要求的，但是如果您确实考虑使用现有的编码标准，我建议您从包含的 PEAR 标准（也是默认标准）开始，因为它是最不严格的。如果你想升级到更多规则的东西，PSR2 和 1 标准正在开发中，将来可能会很合适，或者如果你有一个大团队并且想要锁定，包含的 Squiz 标准也很有用下来最风格的规则。

# adobe - Adobe 内容服务器

> ID：11739308
> 
> 赞同：0
> 
> 时间：2012-07-31T11:41:16.503
> 
> 标签：adobe, drm

我有兴趣购买 Adob​​e Content Server 以通过我的在线商店保护我的数字产品，但在此之前我想确保一切，因为他们要求巨额投资。

他们将如何实现整个场景？我的意思是在他们的服务器上，我的服务器会一次又一次地调用他们，或者它只会在我的服务器上实现？

请分享您的重要经验。

谢谢，普拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:13:50.193

内容服务器将安装在您的服务器上。您将负责打包文件，对其进行加密，然后将其交付给分销商。只有文件的签名将由 adobe 服务器完成（打包的中间步骤）。

随着用户和其他东西的身份验证将由 adobe 服务器管理。其他一切都将在您的服务器上。

我也正在实施它。需要任何帮助或查询。联系我（9235556759）

悉达多

# xaml - Windows8 Metro 应用程序中的推送通知？

> ID：11739309
> 
> 赞同：0
> 
> 时间：2012-07-31T11:41:18.263
> 
> 标签：xaml, windows-8, microsoft-metro, visual-studio-2012

我有一个 Metro 应用程序，每当我的服务更新时，我都会尝试显示通知。我试图从微软网站阅读 Metro 应用程序推送通知概念概述，但我没有明确的想法在 Metro 应用程序中实现推送通知？

谁能给我一个示例示例来使用 XAML 在 Metro 应用程序中实现推送通知，真的对我有帮助吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:02:59.737

您可能已经看过下面的示例。但以防万一...

[发送推送通知（使用 JavaScript 和 HTML 的 Metro 风格应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/hh465450.aspx)

[发送推送通知（使用 C#/VB/C++ 和 XAML 的 Metro 风格应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868252%28v=win.10%29.aspx)

# android - 编译android源时出现C++错误

> ID：11739310
> 
> 赞同：2
> 
> 时间：2012-07-31T11:41:23.020
> 
> 标签：android, c++, compiler-construction, android-source

我正在尝试为我的设备编译 android 4.1，但出现此错误：

```
target thumb C++: libandroid_runtime <= frameworks/base/core/jni/Time.cpp
target thumb C++: libandroid_runtime <= frameworks/base/core/jni/com_android_internal_content_NativeLibraryHelper.cpp
frameworks/base/core/jni/Time.cpp: In member function 'android::String8 android::Time::format(char const*, const android::strftime_locale*) const':
frameworks/base/core/jni/Time.cpp:91:61: error: 'strftime_tz' was not declared in this scope
make: *** [out/target/product/galaxysl/obj/SHARED_LIBRARIES/libandroid_runtime_intermediates/Time.o] Errore 1
make: *** Attesa per i processi non terminati.... 
```

我该如何解决这些问题？我必须在 Time.cpp 中声明 strftime_tz 但我不知道该怎么做。Time.cpp 的一部分：

```
String8 
Time::format(const char *format, const struct strftime_locale *locale) const
{
    char buf[257];
    int n = strftime_tz(buf, 257, format, &(this->t), locale);
    if (n > 0) {
        return String8(buf);
    } else {
        return String8();
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:40:39.177

好像你需要包括`#include <cutils/tztime.h>`

# php - 将字符串转换为 JSON 时出错

> ID：11739315
> 
> 赞同：3
> 
> 时间：2012-07-31T11:41:50.643
> 
> 标签：php, android, mysql, json, parsing

在安卓上需要帮助。一直有这个错误`Error Parsing data org.json.JSONException: Value <html> of type java.lang.String cannot be converted to JSONObject`

下面是我运行它时给我错误的页面。

```
public class Login extends Activity {

//URL to get User Data
private static String URL_GET = "http://10.0.2.2/android_connect/get_authentication.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_USERS = "Users";
private static final String TAG_EMAIL = "Email";
private static final String TAG_PASSWORD = "Password";

JSONParser jParser = new JSONParser();
String dbPassword = null;
// users JSONArray
JSONArray Users = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // setting default screen to login.xml
    setContentView(R.layout.login);

    Button btn = (Button) findViewById(R.id.btnLogin);

    // Listening to register new account link
    btn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            String password =  ((EditText) findViewById(R.id.password)).getText().toString();
            new getAuthentication().execute();

            if (password.equals(dbPassword)) {
                // Switching to Main screen
                Intent i = new Intent(getApplicationContext(), EchoSphere.class);
                startActivity(i);
            }
        }
    });
}
class getAuthentication extends AsyncTask<String, String, String>{

    @Override
    protected String doInBackground(String... params) {

        runOnUiThread(new Runnable() {
            public void run() {
                // Check for success tag
                int success;

                try {
                    String email = ((EditText) findViewById(R.id.email)).getText().toString();

                    Log.d("email:", email);

                    List<NameValuePair> params = new ArrayList<NameValuePair>();
                    params.add(new BasicNameValuePair(TAG_EMAIL, email));

                    JSONObject json = jParser.makeHttpRequest(URL_GET, "GET", params);
                    Log.d("Password:", json.toString());

                     success = json.getInt(TAG_SUCCESS);       

                    if (success == 1) {
                        Users = json.getJSONArray(TAG_USERS);
                        JSONObject c = Users.getJSONObject(0);
                        dbPassword = c.getString(TAG_PASSWORD);
                        Log.d("DBPW:", dbPassword);
                    }

                    } catch (JSONException e) {
                    e.printStackTrace();
                    }

                    }

                });
        return null;
    }

}
} 
```

这是 PHP 脚本，我已经验证了 PHP，它显示可以正常工作。

```
<?php
// array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

// check for post data
if (isset($_GET["Email"])) {
$email = $_GET['Email'];

// get a product from products table
$result = mysql_query("SELECT Email, Password FROM Users WHERE Email = '$email'");

if (!empty($result)) {
    // check for empty result
    if (mysql_num_rows($result) > 0) {

        $result = mysql_fetch_array($result);

        $user[] = array();
        $user["Email"] = $result["Email"];
        $user["Password"] = $result["Password"];

        // user node
        $response["Users"] = array();

        array_push($response["Users"], $user);

        // success
        $response["success"] = 1;

        // echoing JSON response
        echo json_encode($response);
    } else {
        // no product found
        $response["success"] = 0;
        $response["message"] = "No User found";

        // echo no users JSON
        echo json_encode($response);
    }
} else {
    // no product found
    $response["success"] = 0;
    $response["message"] = "No User found";

    // echo no users JSON
    echo json_encode($response);
}
} else {

// required field is missing

$response["success"] = 0;
$response["message"] = "Required field(s) is missing";

// echoing JSON response
echo json_encode($response);
}
?> 
```

结果如图

```
{"Users":[{"0":[],"Email":"1","Password":"123"}],"success":1} 
```

我不知道错误在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:25:15.803

我已经解决了这个错误。

谢谢大家的帮助。

我添加了

```
header('Content-type: application/json'); 
```

到 php 脚本和应用程序可以运行。

# inno-setup - 如何检测旧安装并提供删除？

> ID：11739317
> 
> 赞同：16
> 
> 时间：2012-07-31T11:41:57.517
> 
> 标签：inno-setup

我如何检测用户是否已经安装了软件，如果是，如何提供删除旧版本的可能性？

我写了几行来检查。现在这样正确吗？如果这是正确的，那么如何让用户选择是继续安装还是卸载旧版本？

```
#define UNINSTKEY "Software\Microsoft\Windows\CurrentVersion\Uninstall\setupname_is1"

var
  uninstallPath: string;

function InitializeSetup: Boolean;
begin
  if (RegQueryStringValue(HKLM,'{#UNINSTKEY}','UninstallString',uninstallPath)) and
     (uninstallPath <> '') and (fileexists(uninstallPath)) then
  begin
    Result :=
      (MsgBox(CustomMessage('NotVerifiedVersionFound'), mbConfirmation,
              MB_YESNO or MB_DEFBUTTON2) = IDYES);
  end;
  { ... }
end; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-31T11:59:46.477

您可以使用最初发布在此处的 Craig McQueen 的解决方案：[InnoSetup：如何自动卸载以前安装的版本？](https://stackoverflow.com/questions/2000296/innosetup-how-to-automatically-uninstall-previous-installed-version)

```
function GetUninstallString: string;
var
  sUnInstPath: string;
  sUnInstallString: String;
begin
  Result := '';
  sUnInstPath := ExpandConstant('Software\Microsoft\Windows\CurrentVersion\Uninstall\{{A227028A-40D7-4695-8BA9-41DF6A3895C7}_is1'); { Your App GUID/ID }
  sUnInstallString := '';
  if not RegQueryStringValue(HKLM, sUnInstPath, 'UninstallString', sUnInstallString) then
    RegQueryStringValue(HKCU, sUnInstPath, 'UninstallString', sUnInstallString);
  Result := sUnInstallString;
end;

function IsUpgrade: Boolean;
begin
  Result := (GetUninstallString() <> '');
end;

function InitializeSetup: Boolean;
var
  V: Integer;
  iResultCode: Integer;
  sUnInstallString: string;
begin
  Result := True; { in case when no previous version is found }
  if RegValueExists(HKEY_LOCAL_MACHINE,'Software\Microsoft\Windows\CurrentVersion\Uninstall\{A227028A-40D7-4695-8BA9-41DF6A3895C7}_is1', 'UninstallString') then  { Your App GUID/ID }
  begin
    V := MsgBox(ExpandConstant('Hey! An old version of app was detected. Do you want to uninstall it?'), mbInformation, MB_YESNO); { Custom Message if App installed }
    if V = IDYES then
    begin
      sUnInstallString := GetUninstallString();
      sUnInstallString :=  RemoveQuotes(sUnInstallString);
      Exec(ExpandConstant(sUnInstallString), '', '', SW_SHOW, ewWaitUntilTerminated, iResultCode);
      Result := True; { if you want to proceed after uninstall }
      { Exit; //if you want to quit after uninstall }
    end
    else
      Result := False; { when older version present and not uninstalled }
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-30T02:09:39.940

对于任何感兴趣的人，我为 Inno Setup 6 和更新版本编写了一个小 DLL，它提供了检测是否安装了应用程序并根据您自己的标准自动卸载以前安装的版本的能力。

[https://github.com/Bill-Stewart/UninsIS](https://github.com/Bill-Stewart/UninsIS)

使用 DLL，您可以仅在降级时、仅在升级时或任一时自动卸载。

# c# - 自托管 WCF 服务：ConcurrencyMode.Multiple 但只使用一个线程？

> ID：11739319
> 
> 赞同：1
> 
> 时间：2012-07-31T11:42:01.587
> 
> 标签：c#, .net, multithreading, wcf, self-hosting

我已经迈出了使用 WCF 开发 WINDOWS 服务托管计算引擎的第一步。该服务运行良好，但它似乎只为我的所有调用使用一个线程，但我需要它具有可扩展性并使用多线程。

忽略代码等中的所有跟踪，因为它是这个应用程序的早期阶段。

它调用一些第三方软件 (COM)，在服务启动时将信息读入内存 (ThirdParty.Initialise(strInit))，然后每次调用 ProcessInformation 从给定的 XML 字符串返回计算结果。

到目前为止，无论我将 ServiceBehavior atts 设置为什么，也无论我使用多少个单独的消费者，所有调用似乎都只使用一个线程 - 有人可以帮忙吗？

代码概述：

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, InstanceContextMode = InstanceContextMode.PerCall, UseSynchronizationContext = false)]
public class TestWCFService : ITestWCFService
{
    private static ThirdPartyLib.ThirdPartyComClass ThirdParty;

    private static bool initCalled = false;
    private static int cntInit = 0;
    private static int cntTrans = 0;

    public TestWCFService()
    {
        if (ThirdParty == null)
        {
            ThirdParty = new ThirdPartyLib.ThirdPartyComClass();
        }
    }

    public bool InitialiseThirdParty(string strInit, out string strError)
    {
        try
        {
            if (!initCalled)
            {
                cntInit++;
                ThirdParty.Initialise(strInit);
                initCalled = true;
            }
            strError = "Call Num " + cntInit;
            return true;
        }
        catch (Exception ex)
        {
            strError = "ThirdParty.Initialise exception " + ex.Message + " 0n call number " + cntInit;
            return false;
        }
    }

    public bool ProcessInformation(string strRequestXML, int quoteMarker, out string strResponseXML, out string strError, out int quoteMarkerReturned)
    {
        try
        {
            cntTrans++;
            quoteMarkerReturned = quoteMarker;
            ThirdParty.ProcessInformation(strRequestXML, out strResponseXML);
            strError = "Call Trans Num " + cntTrans;
            return true;
        }
        catch (Exception ex)
        {
            strError = ex.Message + " On call trans num " + cntTrans;
            strResponseXML = "Error";
            quoteMarkerReturned = quoteMarker;
            return false;
        }
    }
} 
```

配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.web>
    <compilation debug="true" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="TestServiceBinding" bypassProxyOnLocal="true"
          useDefaultWebProxy="false">
          <readerQuotas maxDepth="524288" maxStringContentLength="524288"
            maxArrayLength="524288" maxBytesPerRead="524288" maxNameTableCharCount="524288" />
          <reliableSession inactivityTimeout="00:30:00" enabled="true" />
        </binding>
      </wsHttpBinding>
      <mexHttpBinding>
        <binding name="MEXTestServiceBinding" openTimeout="00:02:00"
          sendTimeout="00:02:00" />
      </mexHttpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="TestWcfServiceLibrary.TestWCFServiceBehavior"
        name="TestWcfServiceLibrary.TestWCFService">
        <endpoint address="" binding="wsHttpBinding" bindingConfiguration="TestServiceBinding"
          name="" contract="TestWcfServiceLibrary.ITestWCFService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" bindingConfiguration="MEXTestServiceBinding"
          contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8731/Design_Time_Addresses/TestWcfServiceLibrary/TestWCFService/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="TestWcfServiceLibrary.TestWCFServiceBehavior">
          <serviceMetadata httpGetEnabled="True"/>
          <serviceThrottling maxConcurrentCalls="100" maxConcurrentSessions="100" maxConcurrentInstances="100"/>
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:37:55.687

您的第三方 COM 组件似乎很有可能是单元线程的，因此具有线程关联性。如果是这样，将只有一个线程在 COM 组件中完成工作。

无论服务实现使用多少 .NET 线程，它们都必须排队使用特定的 STA 线程，这是唯一能够调用 COM 对象的线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:55:45.957

根据 Microsoft 文档：

> 并发的使用与实例化模式有关。在 PerCall 实例中，并发性无关紧要，因为每条消息都由一个新的服务实例处理。

```
// Multiple allows concurrent processing of multiple messages by a service instance.
// The service implementation should be thread-safe. This can be used to increase throughput.
[ServiceBehavior(ConcurrencyMode=ConcurrencyMode.Multiple, InstanceContextMode = InstanceContextMode.Single)]

// Uses Thread.Sleep to vary the execution time of each operation.
public class CalculatorService : ICalculatorConcurrency
{
    int operationCount;

    public double Add(double n1, double n2)
    {
        operationCount++;
        System.Threading.Thread.Sleep(180);
        return n1 + n2;
    }

    public double Subtract(double n1, double n2)
    {
        operationCount++;
        System.Threading.Thread.Sleep(100);
        return n1 - n2;
    }

    public double Multiply(double n1, double n2)
    {
        operationCount++;
        System.Threading.Thread.Sleep(150);
        return n1 * n2;
    }

    public double Divide(double n1, double n2)
    {
        operationCount++;
        System.Threading.Thread.Sleep(120);
        return n1 / n2;
    }

    public string GetConcurrencyMode()
    {   
        // Return the ConcurrencyMode of the service.
        ServiceHost host = (ServiceHost)OperationContext.Current.Host;
        ServiceBehaviorAttribute behavior = host.Description.Behaviors.Find<ServiceBehaviorAttribute>();
        return behavior.ConcurrencyMode.ToString();
    }

    public int GetOperationCount()
    {   
        // Return the number of operations.
        return operationCount;
    }
} 
```

示例输出：（[]中的数字表示线程id）

```
2012-07-31 09:07:28,509 [9] DEBUG Microsoft.ServiceModel.Samples.CalculatorService - Leaving: Microsoft.ServiceModel.Samples.CalculatorService.Multiply(double, double) : 752.919376325402
2012-07-31 09:07:28,512 [17] DEBUG Microsoft.ServiceModel.Samples.CalculatorService - Leaving: Microsoft.ServiceModel.Samples.CalculatorService.Multiply(double, double) : 752.919376325402
2012-07-31 09:07:28,524 [13] DEBUG Microsoft.ServiceModel.Samples.CalculatorService - Leaving: Microsoft.ServiceModel.Samples.CalculatorService.Multiply(double, double) : 2143.10173334651
2012-07-31 09:07:28,524 [11] DEBUG Microsoft.ServiceModel.Samples.CalculatorService - Entering: Microsoft.ServiceModel.Samples.CalculatorService.Multiply(double n1 = 15.5665354410031, double n2 = 48.3678194919451)
2012-07-31 09:07:28,532 [22] DEBUG Microsoft.ServiceModel.Samples.CalculatorService - Entering: Microsoft.ServiceModel.Samples.CalculatorService.Multiply(double n1 = 94.7194438868758, double n2 = 29.8120223590229)
2012-07-31 09:07:28,534 [9] DEBUG Microsoft.ServiceModel.Samples.CalculatorService - Entering: Microsoft.ServiceModel.Samples.CalculatorService.Multiply(double n1 = 99.2045067247024, double n2 = 88.4957458770349)
2012-07-31 09:07:28,539 [4] DEBUG Microsoft.ServiceModel.Samples.CalculatorService - Entering: Microsoft.ServiceModel.Samples.CalculatorService.Multiply(double n1 = 99.2045067247024, double n2 = 88.4957458770349)
2012-07-31 09:07:28,539 [7] DEBUG Microsoft.ServiceModel.Samples.CalculatorService - Entering: Microsoft.ServiceModel.Samples.CalculatorService.Multiply(double n1 = 37.991849630136, double n2 = 41.7864370820049)
2012-07-31 09:07:28,539 [17] DEBUG Microsoft.ServiceModel.Samples.CalculatorService - Entering: Microsoft.ServiceModel.Samples.CalculatorService.Multiply(double n1 = 11.331077670367, double n2 = 55.5888338273339)
2012-07-31 09:07:28,539 [11] DEBUG Microsoft.ServiceModel.Samples.CalculatorService - Leaving: Microsoft.ServiceModel.Samples.CalculatorService.Multiply(double, double) : 752.919376325402
2012-07-31 09:07:28,539 [22] DEBUG Microsoft.ServiceModel.Samples.CalculatorService - Leaving: Microsoft.ServiceModel.Samples.CalculatorService.Multiply(double, double) : 2823.77817898976
2012-07-31 09:07:28,539 [17] DEBUG Microsoft.ServiceModel.Samples.CalculatorService - Leaving: Microsoft.ServiceModel.Samples.CalculatorService.Multiply(double, double) : 629.881393702645
2012-07-31 09:07:28,542 [9] DEBUG Microsoft.ServiceModel.Samples.CalculatorService - Leaving: Microsoft.ServiceModel.Samples.CalculatorService.Multiply(double, double) : 8779.17681696586
2012-07-31 09:07:28,544 [4] DEBUG Microsoft.ServiceModel.Samples.CalculatorService - Leaving: Microsoft.ServiceModel.Samples.CalculatorService.Multiply(double, double) : 8779.17681696586
2012-07-31 09:07:28,544 [7] DEBUG Microsoft.ServiceModel.Samples.CalculatorService - Leaving: Microsoft.ServiceModel.Samples.CalculatorService.Multiply(double, double) : 1587.54403419867 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:26:48.960

问题是第三方 DLL 只是一个单线程 COM 模型。我被引导相信它是多线程的，但通过运行替换功能，它现在 100% 是第三方问题。无论如何，感谢所有快速回复。看起来可能需要一些花哨的步法来利用一些额外的核心。我已经向公司发送了一封电子邮件，看看他们是否有 MT 版本，但我对此表示怀疑。再次感谢。

# php - 如何在代码的不同位置打印会话值？

> ID：11739320
> 
> 赞同：0
> 
> 时间：2012-07-31T11:42:06.617
> 
> 标签：php, session-variables

当我将 print 语句直接放在它打印的 session_start() 函数之后时，我在打印 session 的值时遇到问题，但是如果我把它放在代码中的较低位置，它就不会打印！

```
<?php  session_start();print_r($_SESSION);
?>
<? include("db1.php");
define('WP_USE_THEMES', false);
require('blog/wp-blog-header.php');
?>
<!DOCTYPE html>
<html lang="en">

<head>
    <title><? print_r($_SESSION['title']);?></title>
</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:43:10.773

除非您启用了短标签，否则您将需要继续使用`<?php`并`?>`贯穿您的代码。

```
<head>
    <title><?php print_r($_SESSION['title']);?></title>
</head> 
```

[编辑：有关短标签](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)的更多信息，请参阅此内容

编辑二：你能验证输出`print_r()`吗？您确定该元素被调用`'title'`吗？

编辑三：看到我要睡觉了，至少有一个解决方法：

```
<?php  
    session_start();
    print_r($_SESSION);
    // As it works here...
    $myTitle=$_SESSION['title'];
?>

<head>
    <title><?php echo $title;?></title>
</head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:46:16.673

打印出什么而不是 $_SESSION 变量内容？如果你使用 var_dump($_SESSION); 会怎样？为什么要使用 print_r 打印标题标签？为什么不使用（如果必须将会话用作容器） echo $_SESSION['title']; ?

# sql - 什么是 PostgreSQL 中的左连接

> ID：11739324
> 
> 赞同：17
> 
> 时间：2012-07-31T11:42:20.450
> 
> 标签：sql, postgresql

我见过使用 a`LEFT JOIN`而不是`INNER`or的查询`LEFT OUTER`。

究竟是`LEFT JOIN`什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-31T11:45:59.200

如果 a`inner join`仅返回在两个表中匹配`left join`的条目，则 a 从第一个表中获取所有条目以及在第二个表中匹配的任何条目。A`right join`是 a 的倒数`left join`（即：全部来自第二个表）

所以如果 TableA 是

```
A B
1 a
2 b
3 c 
```

和表 B 是

```
A B
1 d
2 e 
```

然后`Select * from TableA inner join TableB on TableA.A = TableB.A`返回

```
1 a 1 d
2 b 2 e 
```

并`Select * from TableA left join TableB on TableA.A = TableB.A`返回

```
1 a 1 d
2 b 2 e
3 c null null 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-31T11:48:47.580

它与 LEFT OUTER 相同（隐含 OUTER 是因为 INNER JOIN 需要双边匹配，因此 a`LEFT INNER JOIN`没有意义）。这同样适用于`RIGHT JOIN`，它们分别`FULL JOIN`等同于`RIGHT OUTER JOIN`和`FULL OUTER JOIN`

# wordpress - wp-admin 主题选项文件中的加载脚本，错误的顺序，如何更改它

> ID：11739326
> 
> 赞同：0
> 
> 时间：2012-07-31T11:42:26.727
> 
> 标签：wordpress, load, admin

我在我的 wordpress 主题管理面板中设置了一个 coda 气泡信息弹出窗口，当我将代码放入我的 theme-options.php 文件时，它运行良好。我将它包含在 functions.php 中，它应该被加载到管理面板中：

```
// De scripts enkel voor admin  
if (is_admin()){
            wp_register_script( 'bubble', NHP_OPTIONS_URL.'js/bubble.js');
            wp_enqueue_script('bubble');
        }
    }   
    add_action('init', 'register_js'); 
```

问题是，wordpress 已经在加载一些脚本，这在我的脚本之前：

```
<script type='text/javascript' src='http://localhost/wordpress/wp-admin/load-scripts.php?c=0&amp;load=jquery,utils,farbtastic&amp;ver=3.4.1'></script>
<script type='text/javascript' src='http://localhost/wordpress/wp-content/themes/newtheme/options/js/bubble.js?ver=3.4.1'></script> 
```

-> 这里 Farbtastic 有效，但不是我的信息气泡。

当我卸载 Jquery 并让它在我的代码之前加载时，气泡会起作用，但不会很糟糕。

```
<script type='text/javascript' src='http://localhost/wordpress/wp-admin/load-scripts.php?c=0&amp;load=utils,farbtastic&amp;ver=3.4.1'></script>
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js?ver=3.4.1'></script>
<script type='text/javascript' src='http://localhost/wordpress/wp-content/themes/newtheme/options/js/bubble.js?ver=3.4.1'></script> 
```

请问我该如何解决？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:47:48.897

不是真正的答案，而是在哪里寻找的指针：

[`wp_enqueue_script`](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)(and [`wp_register_script`](http://codex.wordpress.org/Function_Reference/wp_register_script)) 有一个`depends`论点。它用于确定加载顺序。
[`wp_deregister_script`](http://codex.wordpress.org/Function_Reference/wp_deregister_script)将清除已注册的脚本，即使是由其他代码段注册的脚本。

取消注册其他脚本，在您的订单中使用“依赖”重新注册它们。

也许你需要把你的剧本分成几部分。
看看尝试的东西，如果你不明白就问。

# java - 如何从java代码调用javascript函数

> ID：11739328
> 
> 赞同：0
> 
> 时间：2012-07-31T11:42:36.163
> 
> 标签：java, javascript, android, cordova

我正在尝试从 java 类调用 javascript 函数，但出现以下错误：

```
-Could not find method sun.misc.Service.installedProviders, referenced from method javax.script.ScriptEngineManager.initEngines

-Could not find method sun.misc.Service.providers, referenced from method javax.script.ScriptEngineManager.initEngines

-Could not find method sun.misc.Service.installedProviders, referenced from method javax.script.ScriptEngineManager.initEngines

-java.lang.VerifyError: javax.script.ScriptEngineManager 
```

这里的代码：

```
 public  void sendResult(){
    ScriptEngineManager manager = new ScriptEngineManager();
                    ScriptEngine engine = manager.getEngineByName("js");

                    String script = "function send() {"+"var id_result = window.MyPGP.getResult();"+                            
                            "document.getElementById('id_result').value = id_result;"+"console.log(\"change the box value\");";

                    try {
                        engine.eval(script);

                        Invocable invocableEngine = (Invocable) engine;

                        invocableEngine.invokeFunction("send");

   } catch (ScriptException e) {
                    e.printStackTrace();
                } catch (NoSuchMethodException e) {
                    e.printStackTrace();
                }  catch (Exception e) {
                    e.printStackTrace();
                } 
```

我真正想做的是，当支付完成时，这个函数在这个类的其他方法中被调用来得到支付的结果，并打印在主html的一个框中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-16T03:14:10.130

使用此代码

```
import javax.script.*;

public class InvokeScriptFunction {
    public static void main(String[] args) throws Exception {
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("JavaScript");

        // JavaScript code in a String
        String script = "function hello(name) { print('Hello, ' + name); }";
        // evaluate script
        engine.eval(script);

        // javax.script.Invocable is an optional interface.
        // Check whether your script engine implements or not!
        // Note that the JavaScript engine implements Invocable interface.
        Invocable inv = (Invocable) engine;

        // invoke the global function named "hello"
        inv.invokeFunction("hello", "Scripting!!" );
    }
} 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T06:28:36.427

你可以做这样的事情

```
super.loadUrl("file:///android_asset/www/index.html", 20000);
super.loadUrl("javascript: { var pageFlag = '" + flag + "';}"); // Your Javascript function here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:56:33.547

```
 ScriptEngine engine = manager.getEngineByName("JavaScript"); 
```

这行得通吗？

# android - 在 listView 中显示 XML 字符串数组的值而不是相关的存储位置

> ID：11739329
> 
> 赞同：0
> 
> 时间：2012-07-31T11:42:41.757
> 
> 标签：android, android-listview, android-sqlite

首先抱歉，如果问题标题不清楚，我想不出如何简洁地表达它。

我有一个具有基本数据库功能的应用程序，可以将一个人的姓名、出生日期和工作类型添加到数据库中。作业类型是从 XML 资源文件中的字符串数组填充的微调器中选择的；

```
<string-array name="job_type_array">
    <item>Job 1</item>
    <item>Job 2</item>
    <item>Job 3</item>
    ...
</string-array> 
```

在数据库中，作业名称未存储，它在字符串数组中的位置被存储（即“作业 1”保存为整数 0 等）

然后当我在 listView 中显示数据库的内容时，我想显示实际的工作而不是它的位置，但我不知道该怎么做。

我用于 listView 的代码来自 Android Developers 示例；

```
public class PersonList extends ListActivity {
private static final int ACTIVITY_CREATE=0;
private static final int ACTIVITY_EDIT=1;

private static final int INSERT_ID = Menu.FIRST;
private static final int DELETE_ID = Menu.FIRST + 1;

public String[] mTypeArray;
public List typeList;

private PersonDbAdapter mDbHelper;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.horses_list);
    mDbHelper = new PersonDbAdapter(this);
    mDbHelper.open();

    mTypeArray = getResources().getStringArray(R.array.job_type_array);
    typeList = Arrays.asList(mTypeArray);

    fillData();
    registerForContextMenu(getListView());
}

private void fillData() {
    // Get all of the rows from the database and create the item list
    Cursor personCursor = mDbHelper.fetchAllPeople();
    startManagingCursor(personCursor);

    // Create an array to specify the fields we want to display in the list (only    Name and job)
    String[] from = new String[]{PersonDbAdapter.KEY_NAME, PersonDbAdapter.KEY_TYPE};

    // and an array of the fields we want to bind those fields to
    int[] to = new int[]{R.id.rowPersonName, R.id.rowPersonJobType};

    // Now create a simple cursor adapter and set it to display
    SimpleCursorAdapter people = 
        new SimpleCursorAdapter(this, R.layout.people_row, peopleCursor, from, to);
    setListAdapter(people);
} 
```

游标 fetchAllPeople 只是获取数据库中每个人的所有数据。

我的问题是；如何显示实际工作，而不仅仅是存储在数据库中的职位。任何帮助，将不胜感激。

编辑：整洁的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:15:55.047

我假设`TextView`您要放置职位的行布局中的 (?!?) 是具有 id 的视图`R.id.rowHorseType`（在`to`数组中，我还假设`PersonDbAdapter.KEY_TYPE`表示光标中具有作业 int 值的列）。在这种情况下，您将使用 a`SimpleCursorAdapter.ViewBinder`将存储在数据库中的职位`int`值转换为实际职位，如下所示：

```
people.setViewBinder(new SimpleCursorAdapter.ViewBinder() {

            @Override
            public boolean setViewValue(View view, Cursor cursor,
                    int columnIndex) {
                if (view.getId() == R.id.rowHorseType) {
                    int jobInt = cursor.getInt(columnIndex);
                    ((TextView) view).setText(mTypeArray[jobInt]); // if the view with the id R.id.rowHorseType is a TextView!!!
                    return true;
                }
                return false;
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:48:05.143

如果您想从您应该使用的数据库中获取数据，我无法正确获取您：

```
Cursor previous_repotData = getdataBaseRecord();
Stirng stdate = getString(previous_repotData.getColumnIndexOrThrow("startDate"))); 
```

# android - Google Calendar API：请求下一个活动

> ID：11739336
> 
> 赞同：2
> 
> 时间：2012-07-31T11:43:03.330
> 
> 标签：android, calendar

我想获得有关我的 Google 日历中的下一个约会时间的信息，因此我阅读了很多文章，其中大部分是关于如何将 (Intent.ACTION_INSERT) 写入日历并成功完成的。我找不到有关如何从日历中提取数据的信息，甚至没有找到如何连接到它的信息。

我查看了[http://developer.android.com/reference/android/provider/CalendarContract.html](http://developer.android.com/reference/android/provider/CalendarContract.html)但它没有提供有关如何连接和/或授权的示例或说明。

使用 Android 4.1 并且可以依赖使用 Android 4 的用户。

# objective-c - IOS CGBitmapContextCreate大位图

> ID：11739340
> 
> 赞同：1
> 
> 时间：2012-07-31T11:43:32.077
> 
> 标签：objective-c, ios, bitmap, gdi

```
CGContextRef context =  CGBitmapContextCreate(nil,
        width, //if width More than 6002/4
        height, 
        8,
        width*4,//if width*4 > 6002
        colorSpace,
        kCGImageAlphaPremultipliedFirst |kCGBitmapByteOrder32Little ); 
```

当 width*4>6002 有错误时，我想构建一个大位图（宽度 <= 2500）

```
<Error>: CGBitmapContextCreate: unsupported parameter combination: 
8 integer bits/component;  32 bits/pixel; 
3-component color space; kCGImageAlphaPremultipliedFirst; 6002 bytes/row. 
```

如何建立一个大的位图谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:31:36.517

问题是 6002 字节/行，因为这里每个像素需要 4 个字节，但是 6002 不能被 4 整除而没有余数。更好地计算每个像素的行数：

```
size_t width = 1920;
size_t height = 1080;
CGContextRef context = CGBitmapContextCreate(
    NULL,
    width,
    height,
    8,
    width * 4,
    colorSpace,
    kCGImageAlphaPremultipliedFirst |kCGBitmapByteOrder32Little ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:51:22.333

新的 bytesPerRow 将与原始图像不同。您需要计算新的 bytesPerRow。

字节每像素 * 目标宽度

你不能接受静态 8 和 4。

有关颜色空间和相对 bytesPerPixel 的信息，请参阅[此内容。](http://developer.apple.com/library/mac/#qa/qa1037/_index.html)

# jsf - 导航到不同 mb 时 JSF 托管 bean 销毁对象

> ID：11739341
> 
> 赞同：0
> 
> 时间：2012-07-31T11:43:37.297
> 
> 标签：jsf, jsf-2, managed-bean

我有 2 个 jsf 页面，每个页面都有一个托管 bean。我正在从第二页导航到第一页，并且想要销毁其中的实体对象。我的问题是，在我将其设置为 null 之后，它仍然会进入`getDetails`创建新实体的方法。

`getDetails`退出此页面时如何防止它进入该方法？我怎样才能正确地摧毁这个实体？我做错了吗？

这是我的代码：

```
public class page2MB {

@EJB
private page2SessionBean page2SessionBean;
private Page2 page2;

public page2MB() {
}

public Page2 getDetails()
{
    if(page2 == null)
    {
        Map requestParams = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();   
        page2 = new Page2();  
        page2.setPage2PK(new Page2PK(Short.parseShort((String)requestParams.get("param1")),
                                          Short.parseShort((String)requestParams.get("param2"))));            

        page2 = page2SessionBean.find(page2);    
    }        
    return page2;
}

public String exit() 
{       
    try
    {
        page2 = null;
        return "page1";
    }
    catch(Exception exp)
    {                      
        exp.printStackTrace();
        return "";
    } 
    finally
    {

    }
}    
} 
```

page2.xhtml：

```
<f:view>
       <h:form>                              
            <h:panelGrid columns="2">                
                <h:inputText id="page2PKfield1" value="#{page2MB.details.page2PK.field1}"/>                                                                   
                <h:inputText id="page1MBfield1" value="#{page1MB.details.field1}"/>                                                   
                <h:inputText id="page2MBfield2" value="#{page2MB.details.page2PK.field2}"/>                                            
                <h:inputText id="field2Desc" value="#{page2MB.details.field2Desc}"/>                    
            </h:panelGrid>                                
            <h:commandButton id="exit"   value="יציאה" action="#{page2MB.exit}" immediate="true"></h:commandButton>                                     
        </h:form>
    </f:view> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:15:28.490

> *因为它必须是会话范围的。我在此页面上有更多需要处于会话范围模式的操作。*

不要在尽可能广泛的范围内将属于不同范围的数据混合在单个 bean 中。在不同的范围内创建单独的 bean，这些 bean 适合 bean 保存的数据，并使用`@ManagedProperty`.

```
@ManagedBean
@SessionScoped
public class SessionBean {

    private Object sessionData;

    // ...
} 
```

```
@ManagedBean
@ViewScoped
public class ViewBean {

    @ManagedProperty("#{sessionBean}")
    private SessionBean sessionBean;

    private Object viewData;

    // ...
} 
```

也不要在吸气剂中做生意。而是在`@PostConstruct`方法中进行。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

# multithreading - SQLite：跨线程共享连接以进行读写

> ID：11739342
> 
> 赞同：14
> 
> 时间：2012-07-31T11:43:39.293
> 
> 标签：multithreading, sqlite, c-api

我有一个使用 SQLite（3.7.2 版）存储数据的应用程序。我在从同一个 SQLite 数据库写入和读取的多个线程之间共享一个 SQLite 连接。SQLite 使用 DSQLITE_THREADSAFE=1 编译，这意味着 SQLite 处于序列化模式。

引用[SQLite 文档](http://www.sqlite.org/threadsafe.html)

> 序列化：在序列化模式下，SQLite 可以不受限制地被多个线程安全使用。

相反，[SQLite Wiki](http://www.sqlite.org/cvstrac/wiki?p=MultiThreading)条目说

> 不要在多个线程中同时使用同一个数据库连接

我尝试了一个示例应用程序，它产生数百个线程并共享一个 SQLite 句柄来读取和写入，它工作正常。

那么 SQLite wiki 条目是否已过时，或者 SQLite 可能无法使用同一连接同时处理来自不同线程的读取和写入？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T12:16:13.837

**编辑**

**DSQLITE_THREADSAFE=2** : 多线程模式 SQLite 中的术语“多线程”有点混淆。似乎在多线程模式下，您不能与其他线程共享连接，因为连接本身不会使用互斥锁来防止一个线程在另一个线程使用它时修改连接。

**DSQLITE_THREADSAFE=1** : 序列化模式 但是，在**序列化**模式下，它将锁定数据文件并使用互斥锁来控制共享连接的访问​​。

来自文档：...当使用 SQLITE_THREADSAFE=1 编译 SQLite 时，SQLite 库本身将序列化对数据库连接和准备语句的访问，以便应用程序可以在不同线程中自由使用相同的数据库连接或相同的准备语句同时。

因此，在处理连接时，*序列化模式*是*线程安全的*，但*多线程*模式不是，尽管您仍然可以有多个连接到同一个数据库。

来源：[http ://www.sqlite.org/c3ref/c_config_getmalloc.html#sqliteconfigmultithread](http://www.sqlite.org/c3ref/c_config_getmalloc.html#sqliteconfigmultithread)

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-08T18:42:43.023

当您有 DSQLITE_THREADSAFE=0 时，在多个线程之间共享一个连接是一个坏主意

想象一下您的 THREAD 1 正在执行以下代码：

```
1\. connection.setAutoCommit(false);
2\. statement.executeUpdate(sql);
3\. connection.commit(); 
```

并且您的 THREAD 2 正在同时执行此代码：

```
1\. connection.setAutoCommit(true); 
```

现在，如果 THREAD 2 的指令 1 恰好在 THREAD 1 的指令 3 之前执行会怎样？您可能会收到一条带有消息“数据库处于自动提交模式”的 SQLException（因为自动提交方法是在同一个 Connection 对象上执行的）。

这意味着一个人应该同步他的代码或使用 DSQLITE_THREADSAFE=1

如果您要开发多线程代码，当您决定选择另一个 DBMS 时，您可以从中获得更好的性能，那么使用连接池也是最好的选择。

# sharepoint - 如何在 sharepoint 中创建以下列表结构

> ID：11739343
> 
> 赞同：0
> 
> 时间：2012-07-31T11:43:40.823
> 
> 标签：sharepoint, sharepoint-2010

我正在尝试在 sharepoint 2010 中创建具有以下结构的列表。 ![在此处输入图像描述](../Images/bd8e164a14d5a11ebd3b69d7e9fe2aef.png)

可以这样创作吗？您可能会说通过将标题留空来输入值。但这里`Title`归档应该是必填字段。如果有人帮助我以编程方式（C# 代码）做，我会感觉很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:18:53.830

如果您将“ `Title`”列为必填字段，则在添加项目时必须为其添加值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:49:17.580

1.  为所有产品输入正确的标题，我们有分组选项来显示您的列表项与上表完全相同。只需按“标题”分组。

2.  最好保持交换“标题”和“产品”字段的显示名称，以便产品将具有任何产品名称，并且标题现在不是必填字段，因此您可以保持原样。

# android - 从 Dalvik VM 访问 android 框架服务

> ID：11739348
> 
> 赞同：1
> 
> 时间：2012-07-31T11:43:51.093
> 
> 标签：android, frameworks, dalvik

是否可以在 Dalvik VM 之外访问框架中的 android 服务？

我想在 Dalvik VM 的某些类中进行修改（例如 libcore/luni 类），并希望从服务返回结果（使用数据库和其他操作）。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:46:23.700

请记住，框架不会在 Dalvik 运行的所有可能上下文中运行/设置。

也就是说，作为一种快速破解，您也许可以使用反射来获取框架类。

不过，正确的方法是在 Dalvik 核心中定义一个 API，由接口和静态方法之类的东西组成，其中静态方法注册一个接口实例以供核心库使用。然后，在框架中，添加代码来调用该注册函数。像这样的东西（这里非常简化，例如你想要错误/权限检查）：

在 libcore 中：

```
public interface TheInterface {
    void doSomethingInteresting();
    ...
}

public class TheRegistrar {
    private static TheInterface theOne;

    public static void register(TheInterface instance) {
        theOne = instance;
    }

    public static TheInterface get() {
        return theOne;
    }
} 
```

然后，在想要使用它的 libcore 代码中，让它做一个`get()`（并准备处理它的情况`null`）。

在框架中，定义如下内容：

```
public class FrameworkDoohicky implements TheInterface {
    ...
} 
```

`TheRegistrar.register()`并在框架初始化期间通过调用来注册它。

# c++ - 当我替换它们时，我是否需要删除我在类成员中设置的对象？

> ID：11739349
> 
> 赞同：0
> 
> 时间：2012-07-31T11:43:52.527
> 
> 标签：c++

我有以下内容：

```
class Manager{
public:
    void update(list<Employe> employees){
        employees_ = employees;
    }
private:
    list<Employe> employees_;
}; 
```

我需要在更新方法结束时删除旧员工吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:55:22.097

没有“老员工”。在这种情况下

```
list<Employee>::operator = (const list<Employee> & source) 
```

将被调用。如果您没有定义一个，则默认的会将作为参数 (employees) 传递的实例的原始内容复制到字段 (employees_)。

现在假设，该列表包含一个指向动态分配内存的指针。在这种情况下，对该内存的引用将丢失并且会泄漏。

正确的解决方案是检查 operator = 是否正确重载（例如所有标准容器都已实现）或自己实现（伪代码）：

```
void list<Employee>::operator = (const list<Employee> & source)
{
    freeContents();
    for (int i = 0; i < source.size(); i++)
        add(source.getItem(i));
} 
```

* * *

**编辑：**

如果列表实际上是一个 std::list，它将正确处理分配，所以在这种情况下答案是：是的，列表本身将被自动释放。然而，它的内容是另一回事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:55:32.967

在 C++ 中，赋值运算符将 LHS 复制到 RHS，并负责销毁当前占用 LHS 的任何内容。

在代码中

```
void update(list<Employe> employees){
    employees_ = employees;
} 
```

函数执行后，`employees_`will 之前的内容已被销毁，`employees_`现在将包含参数的*副本*`employees`。

为了提高效率，您可以消除副本：

```
employees_ = std::move(employees);    // C++11 
```

或者

```
std::swap(employees_, employees);     // C++03 
```

在第一种情况下，`employees_`将丢弃 的内容，并将 的内容`employees`移动*到*，`employees_`留空`employees`。

在第二种情况下， 和 的内容`employees_`将`employees`被*交换*，因此当函数返回时，原始内容`employees_`将被丢弃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:46:34.653

不，你没有，它们会被自动销毁。因为它们存储在自动存储（堆栈）上

还有一点改进：

```
void update(const list<Employe> & employees){ //pass by reference, not by value
    employees_ = employees; //old values are automatically destroyed and 
   // copies of new values are added, preserving the original values in passed container
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T12:01:19.563

在 C++11 中，我建议您`std::move`用作：

```
void update(list<Employee> employees) //NOTE :  pass by value
{
    employees_ = std::move(employees);
} 
```

请注意，参数是按值传递的，而不是按引用传递的。这意味着，当你写这篇文章时，

```
update({e1,e2,e3,e3}); 
```

然后从参数创建的*临时列表被**移动*到成员变量。通过这种方式，您可以避免制作临时对象的副本（无论如何，它都会被销毁）。

如果您使用`list<Employee> const & employees`as 参数，那么您将无法`std::move`获取从上述调用创建的临时对象的资源。

# objective-c - 如何告诉 MagicalRecord 不使用基于文件的核心数据，而是使用内存设置？

> ID：11739360
> 
> 赞同：9
> 
> 时间：2012-07-31T11:44:18.213
> 
> 标签：objective-c, ios5, core-data, magicalrecord

我按照[这篇很棒的文章](http://www.cimgf.com/2012/05/15/unit-testing-with-core-data/)进入了有关核心数据的单元测试。设置看起来很简单，只涉及一些视图代码行。

```
- (void)setUp;
{
    [MagicalRecord setDefaultModelWithClass:[self class]];
    [MagicalRecord setupCoreDataStackWithInMemoryStore];
}

- (void)tearDown;
{
    [MagicalRecord cleanUp];
}

- (void)testSomeCalculationOnMyEntity;
{
    NSNumber *count = [MyEntity MR_numberOfEntities];
    // STAssert([testEntity customCalculation] == expectedValue, @"expected a good calculation");
}

@end 
```

问题是，每次我通过调用（如上）*检查核心数据的内存设置中的实体数量时，我都会得到对象的数量，这些对象存储在**基于文件的设置*中，它们是几千个对象。这是怎么发生的？我的意思是第二行表示内存中的行，不是吗？这种情况下应该返回 0 作为存储的对象数量。`[MyEntity MR_numberOfEntities]`*`setUp`*

 *感谢您的任何建议！

**编辑：**

@casademora 让我走上了正轨。以下工作设置现在对我来说很好。

```
- (void)setUp;
{
    [MagicalRecord cleanUp]; // This solved the mystery.

    // I don't now why I had to remove this line, though.
    // [MagicalRecord setDefaultModelWithClass:[self class]];

    [MagicalRecord setupCoreDataStackWithInMemoryStore];
}

- (void)tearDown;
{
    [MagicalRecord cleanUp];
}

- (void)testSomeCalculationOnMyEntity;
{
    NSNumber *count = [MyEntity MR_numberOfEntities];
    // STAssert([testEntity customCalculation] == expectedValue, @"expected a good calculation");
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:18:50.523

此处用于设置 Core Data 的方法不应该加载基于文件的存储。如果您使用调试器进入它，您应该会看到它使用 NSInMemoryStore 类型初始化持久存储协调器......最终。

我对为什么会发生这种情况的猜测可能是因为您没有向先前的测试用例添加 cleanUp 调用，导致先前的核心数据堆栈或持久存储在此测试中徘徊。

这是我一直用来对核心数据进行单元测试的确切代码设置，它从未为我加载过意外的持久存储。当您调试该方法时，请确保运行以下命令：

```
po [self persistentStores] 
```

当您加载持久存储协调器时。如果有现有商店，这至少可以验证是否有一些预先存在的商店在附近闲逛。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-11T21:54:50.983

您还可以添加在类初始化时执行一次的以下内容。这对我有用。

```
 +(void)setUp
   {
           [MagicalRecord cleanUp];
   } 
```*

# ios - 钛移动导航组。在新窗口完全渲染之前打开过渡

> ID：11739363
> 
> 赞同：0
> 
> 时间：2012-07-31T11:44:33.613
> 
> 标签：ios, mobile, titanium

我目前正在开发 iPad 应用程序并遇到以下问题。

当我试图打开一个包含一组按钮的新窗口时，这些按钮是在循环中创建的，在转换期间只有第一个按钮可见，其余的将在新窗口可见后呈现。看起来很糟糕，我想不出一种方法来“等待”滑动，直到一切就绪（有点像 jquery 的准备好，或者加载 DOM 元素时的回调）。

这就是我正在做的事情：

```
clicker.addEventListener('click', function(e){    
  var overview = Ti.UI.createWindow( {
    title : "Overview",
    barColor: '#000',
    layout : 'vertical',
    url: '/views/overview.js',
    _parent: Titanium.UI.currentWindow,
    navGroup : navGroup,
    rootWindow : win1
  });

  navGroup.open(overview, {animated:true});
}); 
```

在overview.js 中，我执行以下操作：

```
var overviewdata = [/*some data*/];
for(var i = 0;i < overviewdata.length;i++){
//calculations for proper positioning
if(i == 0 || i%4 == 0){
    toppx = 30;
    leftpx = 40;
}
else
{
    leftpx += 245;
    toppx = -200;
}

overviewbttns[i] = Ti.UI.createButton({ 
    title: overviewdata[i].title,
    backgroundImage:"/images/views/button.png",
    width: 200,
    height: 200,
    left: leftpx,
    top: toppx,
    id: i
});

//add to window
win.add(overviewbttns[i]);

//attach event handler
overviewbttns[i].addEventListener('click',function(e){

    var w = Ti.UI.createWindow( {
        title : overviewdata[e.source.id].title,
        barColor: '#000',
        layout : 'vertical',
        url: "/views/"+overviewdata[e.source.id].jsfile,
        _parent: Titanium.UI.currentWindow,
        navGroup : win.navGroup,
        rootWindow : win.rootWindow        
    });

    win.navGroup.open(w);
});

} 
```

那么，有没有办法在概览窗口完全呈现时获取回调/事件？

任何提示表示赞赏，我真的被困在这里。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:20:19.933

@Nitin 是的，你是对的。

另请阅读[此博客](http://blog.clearlyinnovative.com/post/1624173028/titanium-appcelerator-quickie-navigation-groups)。这也非常有用并且描述得充分。我这对新学习者非常有用。干杯......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:19:18.433

我有一个想法创建一个函数并将您的**overview.js**代码放入其中，当您单击**clicker**按钮以打开**overview.js**时触发自定义事件`Ti.App.fireEvent('loadData');`，然后打开您的窗口希望这可以帮助您。

```
Ti.App.addEventListener('loadData',function(e){
    callFunction(); //== call function for fill data into window 
}); 
```

# javascript - 如果单击未选择，则不显示 jQuery 选择框

> ID：11739369
> 
> 赞同：0
> 
> 时间：2012-07-31T11:44:56.350
> 
> 标签：javascript, jquery, html

我有两个`select`盒子。一个带有城市列表，第二个带有城市区。`select`当我从第二个框中的第一个框中选择（通过单击）城市时，我会看到所选城市的地区。这完美地工作，但是当另一个脚本自动选择城市时，地区列表不显示 - 我必须从列表中手动选择城市，然后出现地区列表。

这是我的脚本：

```
$.viewMap_get = {
    '0' : $([]),
    'Katowice' : $('#c1a, #c1b, #c6, #c7'),
    'Kraków' : $('#c2a, #c2b, #c6, #c7'),
    'Warszawa' : $('#c3a, #c3b, #c6, #c7'),
    'Wrocław' : $('#c4a, #c4b, #c6, #c7'),
    'Gdańsk' : $('#c5a, #c5b, #c6, #c7'),
}; 

$.each($.viewMap_get, function() { this.hide(); });
$('#get_city_district').hide();

$('#get_car').on('change', function() {
$('#return_city_district').show();
// hide all
$.each($.viewMap_get, function() { this.hide(); });
  $('#get_city_district').hide();
// show current
$.viewMap_get[$(this).val()].show();
  $('#get_city_district').show();

  var id = $.viewMap_get[$(this).val()].attr("id");   
  $('#'+id).attr('selected', 'selected');
}); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:56:39.177

试试这个（见[DEMO](http://jsfiddle.net/bwWkK/1/) [在 js 结尾]）

```
$('#get_car option:eq(2)').attr('selected', 'selected');
$('#get_car').trigger('change'); 
```

# android - 在 TabActivity 中永远不会调用 onActivityResult

> ID：11739370
> 
> 赞同：2
> 
> 时间：2012-07-31T11:44:57.770
> 
> 标签：android, android-activity

我知道有很多相同的问题，但仍然没有调用 OnActivityResult。

这是我的代码

活动一：

```
 Intent i = new Intent();
        Bundle b = new Bundle();
        b.putString(ActivityB.LINK, ad.getLink());
        i.putExtras(b);
        i.setClass(this, ActivityB.class);
        startActivityForResult(i, 0);

@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        /*handling of result...*/
        super.onActivityResult(requestCode, resultCode, data);
    } 
```

活动乙：

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ad_video);
    Bundle b = this.getIntent().getExtras();
    setResult(0);
    link = b.getString(LINK);
    videoView = (VideoView) findViewById(R.id.surface_view);
     videoView.setVideoPath(_link);
     videoView.requestFocus();
     videoView.start();
     videoView.setOnCompletionListener(new OnCompletionListener() {
        public void onCompletion(MediaPlayer mp)
        {
            setResult(0);
            ActivityB.this.finish();
        }
    });
} 
```

无论我做什么，`OnActivityResult`都不会被调用。基于其他问题

1.  我将 setResult 的值设置为 > 0 (0,99)

2.  在android清单中没有launchMode（我也尝试将launchMode设为标准）

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:52:39.127

尝试在结果中添加一个意图，这段代码对我有用：

```
Intent in = new Intent(); 
setResult(101, in);
finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:18:20.520

在子活动上，我在子活动上使用它

```
getParent().startActivityForResult(intent, positive_request_code); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:04:24.043

试试下面的代码

```
Intent returnIntent = new Intent();
returnIntent.putExtra("ProfilePicPath", path);
setResult(RESULT_OK, returnIntent);
finish(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:18:56.367

好的，我明白了，主要问题是我从标签主机中调用了 activtiy。我从包含选项卡（扩展 TabActivity 的那个）的 Activity 中调用它，它可以工作。

简而言之，即使我将每个选项卡用作一个活动，
应该调用 startActivityForResult 的那个是扩展 TabActivity 的主要活动。

谢谢大家的帮助

# safari - 如何打开几个独立的Safari 6？

> ID：11739371
> 
> 赞同：1
> 
> 时间：2012-07-31T11:45:05.163
> 
> 标签：safari, osx-mountain-lion

是否可以在 Mountain Lion 10.8 上打开多个独立的 Safari 6？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:49:49.577

为什么？！

然而：`open -n /Applications/Safari.app/`从`Terminal.app`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:50:10.447

打开终端，然后运行此命令

```
open -n /Applications/Safari.app/ 
```

这将打开一个新实例，而不是来自同一实例的新窗口。

# rcp - 将一个 RCP 视图添加到另一个视图中

> ID：11739373
> 
> 赞同：0
> 
> 时间：2012-07-31T11:45:12.023
> 
> 标签：rcp

我试着去做，但它看起来像一个普通的复合材料。

是否可以将一个 RCP 视图添加到另一个视图中？（我不想创建一个新的透视图）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:18:50.760

我想不出办法做到这一点。实际上，把它放到另一个视图中并没有多大意义。但也许我理解错了，你的意思是用另一个视图分组，所以你在同一个区域有不同的选项卡？这可以通过创建 IFolderLayout 并将视图添加到文件夹来实现。可以在[这里看到一个小例子](http://javawiki.sowas.com/doku.php?id=eclipse-rcp%3atabbed-views)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-05T09:07:04.510

你试图做的方式似乎是不可能的。但是我们 cab 所做的是，我们可以将视图作为不同的选项卡。您可以使用 IFolderLayout 执行此操作。您可以在 Perspective.java 中添加它

# android - 如何将可绘制图像添加到可扩展列表元素

> ID：11739376
> 
> 赞同：0
> 
> 时间：2012-07-31T11:45:21.410
> 
> 标签：android, uiimageview

我的应用程序中有一个可扩展的列表。在组视图中，每个元素的左侧都有一个图像。为此，我为组行使用了一个 xml，其中包含一个相对布局内的图像视图和文本视图。在我的自定义适配器类中，正在添加这些文本和图像。来自数据库的文本。对于图像，我给出了可绘制的名称。以下是我的适配器类。

```
public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {

    if(convertView==null){
        LayoutInflater vi = LayoutInflater.from(context);
        convertView = vi.inflate(R.layout.event_row, null);
    }
    GroupEvent event = eventlist[groupPosition]; 
    setEventTitle(convertView,event.getEvent());
    setEventIcon(convertView,event.getEvent_icon(), event.getEvent());
    setDivider(convertView,groupPosition);
    return convertView;
}

private void setEventTitle(View convertView, String title) {
    // TODO Auto-generated method stub
    TextView event_title_field = (TextView) convertView.findViewById(R.id.event_name_field);
    event_title_field.setText(title);

}

private void setEventIcon(View convertView, int event_icon, String title) {
    // TODO Auto-generated method stub
    ImageView event_logo = (ImageView) convertView.findViewById(R.id.event_row_image);
    title = String.format( "%s%s",Character.toLowerCase(title.charAt(0)),title.substring(1));
    Log.d("Log","drawable image name "+ title);
    event_logo.setImageResource(context.getResources().getIdentifier(title, "drawable", "com.eteam.ito.history"));

} 
```

它工作正常。但它不是动态的，所有行都将添加相同的图像。可绘制图像名称和列表元素文本相同。如何使用标题给出可绘制地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:49:22.223

看到你可以像这样动态添加

```
event_logo.setImageResource(getResources().getIdentifier(title, "drawable", "com.package.application")) 
```

# eclipse - 在 Eclipse 上分离控制台

> ID：11739380
> 
> 赞同：8
> 
> 时间：2012-07-31T11:45:51.010
> 
> 标签：eclipse

我的问题是，当我右键单击控制台时，我没有看到“分离”。它只显示“关闭”。

我见过一些地方说要右键单击控制台并单击“分离”以分离控制台。

我正在使用 Eclipse Junor。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T11:53:31.373

尝试将控制台选项卡句柄拖到 Eclipse 窗口之外。

# java - 创建匿名动态运行时实例

> ID：11739383
> 
> 赞同：1
> 
> 时间：2012-07-31T11:45:56.977
> 
> 标签：java

java - 如何在运行时在java中动态创建接口的实现？

我有一个工厂，它将读取类 Foo 的注释并创建类 Bar 的实例。为了使这个工厂类型安全，我希望我的客户工厂成为与工厂方法的接口，该工厂方法采用 Foo 类型并返回 Bar 类型。然后我希望我的工厂在运行时实现这个工厂方法。

所有这一切都是因为工厂代码是多余的并且难以维护。如果在运行时生成，它将始终是最新的。

例子：

```
public class Foo{
    private String name;

    public String getName(){
        return name;
    }

    public void setName(String name){
        this.name = name;
    }
}

public class Bar{
    private String personName;

    public String getPersonName(){
        return personName;
    }

    public void setPersonName(String personName){
        this.personName= personName;
    }
}

public interface BarFactory{
    Bar create(Foo foo);
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:07:38.300

如果您只想创建一些实现所需接口的实例 - 您可以简单地执行以下操作：

```
public <T> T newInstance (Class<T> type) {
    try {
        return type.newInstance();
    } catch (Exception ex) {
        try {
            // Try a private constructor.
            Constructor<T> constructor = type.getDeclaredConstructor();
            constructor.setAccessible(true);
            return constructor.newInstance();
        } catch (SecurityException ignored) {
        } catch (NoSuchMethodException ignored) {
            if (type.isMemberClass() && !Modifier.isStatic(type.getModifiers()))
                throw new SerializationException("Class cannot be created (non-static member class): " + type.getName(), ex);
            else
                throw new SerializationException("Class cannot be created (missing no-arg constructor): " + type.getName(), ex);
        } catch (Exception privateConstructorException) {
            ex = privateConstructorException;
        }
        throw new SerializationException("Error constructing instance of class: " + type.getName(), ex);
    }
} 
```

如果您需要创建一个完全动态的接口实现，那么您需要使用**代理**类[http://www.javaworld.com/javaworld/jw-11-2000/jw-1110-proxy.html](http://www.javaworld.com/javaworld/jw-11-2000/jw-1110-proxy.html)

这是你要找的东西吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:12:54.730

使用 Java 代理反射。请参阅此处的示例：http: [//docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:07:10.463

通常，由于 Java 不是动态语言，因此动态创建代码不是受支持的语言功能。然而，有不同的字节码生成器可以帮助你。也许首先看一下[Janino](http://docs.codehaus.org/display/JANINO/Home)，它是一个小型 Java 内存编译器，它将在运行时从代码块创建可执行字节码。不知道这是否会解决您的问题，因为我不完全了解要求。

# excel - VBA Excel问题

> ID：11739385
> 
> 赞同：0
> 
> 时间：2012-07-31T11:46:01.280
> 
> 标签：excel, vba, if-statement

我正在尝试在 excel 2003 上编写代码，以根据我在前一个单元格中手动输入的信息更改单元格的背景颜色。这是为了显示我们前 10 名客户的客户满意度分数。

我在下面编写了这段代码，但我只知道如何使它适用于一个单元格而不是一系列单元格。在使用它时，我是一个业余爱好者，因此我们将不胜感激。

```
Private Sub Worksheet_Change(ByVal Target As Range)

If Range("B1").Value < Range("A1").Value Then Range("B1").Interior.ColorIndex = 3
If Range("B1").Value = Range("A1").Value Then Range("B1").Interior.ColorIndex = 6
If Range("B1").Value > Range("A1").Value Then Range("B1").Interior.ColorIndex = 45
If Range("B1").Value = 1 Then Range("B1").Interior.ColorIndex = 4
End Sub 
```

此代码适用于一个单元格，但我需要对电子表格不同区域中的一系列单元格执行此操作

我希望代码适用于单元格 F26 到 F35，以根据 C26 列到 C35 列中的信息更改颜色。由于这已经超过 12 个月，我想要代码将单元格 I26 的颜色更改为 I35，从 F26 中的信息更改为 F35，依此类推。

抱歉，如果这听起来像一个非常愚蠢的问题，但我是一个业余爱好者，只是在寻求对此有所了解的人的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:30:01.723

好的，那么这里是详细的解决方案：

应该隐藏第 3 列，这只是使用 sign() 公式函数： =SIGN(B2-A2) 请注意，对于 sign=1 的情况，列的默认背景颜色是您希望看到的颜色

![这就是工作表的样子](../Images/42c5524d0c0dce9e6596361923f6d250.png)

这些是您的条件格式规则。我只对单元格 B2 进行了此操作，然后为该列的其余部分填充了格式。一条规则用于符号 = 1，一条规则用于符号 =-1，一条规则用于 B2 = 1。

![这些是你的 3 条规则](../Images/cffdd8f8d97a8e6043a5b49133625dc4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:24:08.360

```
Private Sub Worksheet_Change(ByVal Target As Range)

Dim oCell           As Range

For Each oCell In Target
    Call Input_Ranges(oCell, Range("F26:F35"), -3)
    Call Input_Ranges(oCell, Range("I26:I35"), -3)
    Call Input_Ranges(oCell, Range("L26:L35"), -3)
    Call Input_Ranges(oCell, Range("O26:O35"), -13)
Next oCell

End Sub

Public Sub Input_Ranges(oCell As Range, oRange As Range, iOffset As Integer)

    If Not Intersect(oCell, oRange) Is Nothing Then
        If oCell < oCell.Offset(0, iOffset) Then
             oCell.Interior.ColorIndex = 3
         ElseIf oCell > oCell.Offset(0, iOffset) Then
             oCell.Interior.ColorIndex = 45
         ElseIf oCell = oCell.Offset(0, iOffset) Then
             oCell.Interior.ColorIndex = 6
         ElseIf oCell = 1 Then
             oCell.Interior.ColorIndex = 4
         End If
    End If

End Sub 
```

我根据您的要求（评论）再次修改了代码。

小解释：
Target 是正在改变并触发事件的范围。
Intersect 方法检查目标是否在定义的范围内。
偏移量检查目标范围左侧已更改的第三列。
您可以将其更改为您喜欢的任何列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:53:18.140

你真的需要在`Worksheet_Change`活动中这样做吗？这会让事情变慢一点。

无论如何，没有办法为范围编写这样的代码，您必须逐个迭代范围内的单元格。例如像这样：

```
Dim r As Range
Dim ws As Worksheet
Set ws = ActiveSheet
For Each r In ws.Range("F26:F35")
    If r.Value < ws.Cells(r.Row, 3) Then r.Interior.ColorIndex = 3  '3 -- Column C
    '...
Next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T11:55:48.933

我建议使用具有计算值（例如差异符号）的隐藏列，并为该列使用条件格式集，因为 Martin 是正确的，这会减慢您的 Excel 速度。

但是，如果您真的想在该事件处理程序上执行此操作，则该例程会收到一个参数，该参数是已修改的范围。您可以遍历其行或列。

# regex - 匹配任何正或负数值但不匹配字符或混合字符串的正则表达式

> ID：11739386
> 
> 赞同：5
> 
> 时间：2012-07-31T11:46:01.933
> 
> 标签：regex, numbers

直到现在我还没有使用过正则表达式，但是我需要一个正则表达式来匹配表示正或负数值的字符串，例如

234

-8

3.346

-564.4

它不应该匹配任何文本或混合字符（<>#?_...）、数字和文本，例如

美国广播公司

.-.

<11.45

金额111.43

345.654.​​33

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T11:48:49.437

这应该这样做：

```
^-?\d+(\.\d+)?$ 
```

`^`字符串的开头

`-?`减号一次或零次

`\d+`数字，一个或多个

`(\.\d+)?`一个点后跟一个或多个数字，整个块一或零次

`$`字符串结尾

还请注意 Utkanos 对您下一个关于 SO 的问题的评论 :)

# iphone - IOS中的自动图像方向

> ID：11739387
> 
> 赞同：2
> 
> 时间：2012-07-31T11:46:04.743
> 
> 标签：iphone, ios, xcode, ipad, uiimage

对这个问题有任何想法请分享.. 当我当时制作通用应用程序时，如果我有两个图像，一个用于 ipad，另一个用于 iphone，例如“Demo~iphone.png”和“Demo~ipad.png”在这个 if我只是使用“Demo”作为图像名称，然后 xcode 管理它并默认为 ipad 和 iphone 进行调整。那么这个功能可以用于横向和纵向模式吗？我在默认午餐图像中看到这种类型的功能，比如它的名字变成“Default-Portrait~ipad.png”和“Default-Landscape~ipad”，xcode 管理它，所以项目中的其他图像是否可以通过某种方式进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:00:17.467

系统没有按文件名处理方向的默认方式。您可以实现一些辅助方法来决定应该为给定方向选择哪些文件，而您的文件对应于您定义的命名方案。

```
[HelperClass imageNameWithTemplate:@"someImage-%@.png" forOrientation:orientation] 
```

辅助方法 imageNameWithTemplate:forOrientation: 然后将决定加载和返回哪个文件。
每当方向改变时，您都将实施此方法。

# algorithm - 估计 d 堆中节点的插入深度

> ID：11739390
> 
> 赞同：1
> 
> 时间：2012-07-31T11:46:07.667
> 
> 标签：algorithm, sorting, data-structures, tree, heap

是否有任何方法来估计能够 beat 的 d 堆中节点的插入深度`(node_value / heap_max) * h`，其中 h 是堆高度，并且 heap_max 被标准化为堆最小值？

在这种特殊情况下，维护额外/历史数据以支持这种启发式方法是可行的，因为其维护时间为 O(1)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:03:56.080

不完全是 O(1)，而是 O(loglogn)（出于所有实际目的 O(1) ）解决方案将存储某种级别的统计信息。例如。您可以存储每个级别的最大值并进行二进制搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T06:01:04.810

根据*Inserting a new element into a heap* [Doberkat, 1981]，具有均匀密钥分布的二进制堆平均每次插入执行 1.6 次 UpHeap 操作。对于 d 堆，等效数量应该相当接近。

# jquery - IE: jQuery 使用 iFrame 加载内容 - iFrame 不显示

> ID：11739399
> 
> 赞同：0
> 
> 时间：2012-07-31T11:46:30.547
> 
> 标签：jquery, html, internet-explorer, iframe

我有一个页面，它使用 jQuery 从另一个页面加载内容。像这样：-

```
$('#link_help').live('click', function() {
    $('#helpBox').load('content.php?load=helpBox');
}); 
```

此内容包括一些静态 HTML 和 iFrame。这在 Chrome 和 Firefox 中加载得很好。

但是，Internet Explorer（在 9 上测试）正在加载 HTML 内容，而不是 iFrame src。我可以改变 iframe 的颜色，玩它。但是，我无法使用或更改 src。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:30:09.383

对。万一有人遇到这个问题。检查您是否使用 HTTPS 连接。

这是我的问题。默认情况下，IE9 不允许将 iframe 加载到 HTTPS 环境中，即 HTTP。我现在请求 HTTPS 并且它已修复。

# android - 如何实现多窗口布局（如默认浏览器）（带有多个打开文件的编辑器）

> ID：11739404
> 
> 赞同：6
> 
> 时间：2012-07-31T11:46:38.343
> 
> 标签：android, android-layout, android-fragments, android-activity

我正在编写一个编辑器（各种），我希望能够同时打开多个窗口，并且我希望能够像在默认浏览器（Internet）应用程序中那样在窗口之间导航。参见图片： http: [//i.imgur.com/LM6Nz.png](http://i.imgur.com/LM6Nz.png)进行说明。

我的问题是如何实现这些窗口；我是否希望每个窗口都是一个自己的（编辑器）活动，我应该使用片段（我主要为 API 10 设计，片段到达 API 11，但我在某处读到这应该没问题）。还是我只是简单地将 ViewGroup 中的一些不同的视图组合在一起？

如果我使用 Fragments，是否将它们放在 ViewGroup 中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T21:37:31.077

片段适用于与您所面临的场景类似的场景。想想看，你需要在同一个活动中显示它们，这样一个活动就不是一个合适的选择。同时，您会希望所有这些都独立工作并在内部管理自己的生命周期。您可以支持从 API 编号开始的片段。4、通过使用兼容库。(http://developer.android.com/tools/extras/support-library.html)

最终，您可以根据自己的喜好/需要对它们进行分组。这是碎片的其他优势之一。从最基本的容器（FrameLayout）到ViewPager等最丰富的画廊。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T10:25:15.607

我开发了一个带有四个选项卡的类似应用程序（如果需要，可以添加更多选项卡）。一个用于 webview，一个用于 facebook 应用程序，两个用于其他。我将它们作为一个单独的活动启动，并将所有视图放在一个单独的 xml 文件中（在不同的选项卡下）。对我来说工作得很好。

您是否遇到任何问题或只是想要更好的方法来做这件事？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T12:03:28.977

你提供的样本看起来像画廊 - 你可以在那里放置一个自定义视图（覆盖 getView 并膨胀你想要的东西）。

如果你想要无限的窗口，你必须使用像画廊这样的结构（动态加载所有必要的信息）。创建您自己的布局，在 getView 中您可以随意填充它。例如 onItemClick 您可以转到其他活动等以全屏打开它。

如果您只需要提供的示例中的预览 - 您可以使用预览图像创建一个简单的画廊，如果您想要一些操作（可能是 textviews 等），您可以按照我上面的描述进行操作

# iphone - XCode 引用类型 - 相对于项目

> ID：11739408
> 
> 赞同：1
> 
> 时间：2012-07-31T11:46:48.090
> 
> 标签：iphone, ios, xcode, ios5, xcode4.3

当我向其中添加另一个项目时，我需要将引用类型设置为相对于我的 xcode 项目中的项目。我遇到的问题是我在屏幕上的任何地方都找不到“参考类型”命令/复选框。我正在使用 xcode 4.3.3，也许这已经改变了，因为在我用来创建这个项目的教程中，它只是说设置相对于项目的引用类型，但我不能这样做。任何帮助都非常感激。我所看到的只有以下内容-

1.  将项目复制到目标组文件夹（如果需要）
2.  为任何添加的文件夹创建组
3.  为任何添加的文件夹创建文件夹引用
4.  将目标添加到 - “我的项目名称”

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:59:04.527

按住 Option 键单击导航器中的文件/目录，然后选择**Show File Inspector**。在**Identity and Type**部分下，您将看到**Location**。在那里改变它。

# php - PHP生成并显示图像缩略图

> ID：11739413
> 
> 赞同：1
> 
> 时间：2012-07-31T11:47:11.537
> 
> 标签：php, image, header, thumbnails

我找到并修改了一个用于生成缩略图的小 php 脚本

```
$src = (isset($_GET['file']) ? $_GET['file'] : "");
$width = (isset($_GET['maxwidth']) ? $_GET['maxwidth'] : 73);
$thname = "xxx";

$file_extension = substr($src, strrpos($src, '.')+1);

switch(strtolower($file_extension)) {
     case "gif": $content_type="image/gif"; break;
     case "png": $content_type="image/png"; break;
     case "bmp": $content_type="image/bmp"; break;
     case "jpeg":
     case "jpg": $content_type="image/jpg"; break;

     default: $content_type="image/png"; break;

}

if (list($width_orig, $height_orig, $type, $attr) = @getimagesize($src)) {
    $height = ($width / $width_orig) * $height_orig;
}

$tn = imagecreatetruecolor($width, $height) ;
$image = imagecreatefromjpeg($src) ;
imagecopyresampled($tn, $image, 0, 0, 0, 0, $width, $height, $width_orig, $height_orig);

imagejpeg($tn, './media/'.$thname.'.'.$file_extension, 90); 
```

它完美地生成和保存缩略图。

如何即时显示这些缩略图？

我试图在脚本的底部添加它

```
header('Content-Type: image/jpeg');
imagegd($image); 
```

但它说`The image cannot be displayed because it contains errors`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T02:41:30.110

在 php 中，最简单的方法是使用`imagejpeg()`函数。

在我的一个解决方案中，我使用此函数创建了图像缩略图，我可以在其中指定高度和宽度。

以下是相同的代码片段：

```
<?php
/*www.ashishrevar.com*/
/*Function to create thumbnails*/
function make_thumb($src, $dest, $desired_width) {
  /* read the source image */
  $source_image = imagecreatefromjpeg($src);
  $width = imagesx($source_image);
  $height = imagesy($source_image);

  /* find the “desired height” of this thumbnail, relative to the desired width  */
  $desired_height = floor($height * ($desired_width / $width));

  /* create a new, “virtual” image */
  $virtual_image = imagecreatetruecolor($desired_width, $desired_height);

  /* copy source image at a resized size */
  imagecopyresampled($virtual_image, $source_image, 0, 0, 0, 0, $desired_width, $desired_height, $width, $height);

  /* create the physical thumbnail image to its destination */
  imagejpeg($virtual_image, $dest);
}
make_thumb($src, $dest, $desired_width);
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T11:58:59.740

[http://php.net/manual/en/function.imagegd.php](http://php.net/manual/en/function.imagegd.php)

```
header('Content-Type: image/jpeg');
imagegd($image); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T12:09:17.957

尝试在文件末尾关闭关闭 ?> 并确保文件顶部没有空格。只需要换行，图像就会中断。

# c# - 身份验证后从数据库中检索特定字段

> ID：11739416
> 
> 赞同：0
> 
> 时间：2012-07-31T11:47:18.317
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, entity-framework

实际上，我有这个方法可以返回我表的所有字段。

> ```
>  public ActionResult Index(string username, string searchString)
>     {
> 
>         var UserLst = new List<string>();
> 
>         var UserQry = from d in db.OrderDetails
>                        orderby d.Order.Username
>                        select d.Order.Username;
>         UserLst.AddRange(UserQry.Distinct());
>         ViewBag.username = new SelectList(UserLst);
> 
>         var user = from m in db.OrderDetails
>                      select m;
> 
>         if (!String.IsNullOrEmpty(searchString))
>         {
>             user = user.Where(s => s.Order.FirstName.Contains(searchString));
>         }
> 
>         if (string.IsNullOrEmpty(username))
>             return View(user);
>         else
>         {
>             return View(user.Where(x => x.Order.Username == username));
>         }
>     }
> 
>     [HttpPost]
>     public string Index(FormCollection fc, string searchString)
>     {
>         return "<h3> From [HttpPost]SearchIndex: " + searchString + "</h3>";
>     } 
> ```

我的桌子看起来像这样：

用户名---------产品----------价格----------N°Cart

测试-------------Object1-------------20------------110

测试-------------Object2-------------84------------110

云-------------Object2-------------84------------541

苹果-------------Object8-------------65------------874

我想要的是，当我的用户登录并访问此页面时，他只会看到带有他的用户名的行。换句话说，我希望我的方法返回带有登录用户用户名的行。

请原谅我的英语，我希望你能理解我。感谢您的帮助，答案，链接，我全部接受，我是asp的初学者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:57:05.203

如果您使用 ASP.NET 成员资格并加入 EF 模型中的用户名字段，则只需调用 User.Identity.Name。如果是这样，那么您可以从方法中删除参数：

```
 public ActionResult Index(string searchString)
    {

...
...

   return View(user.Where(x => x.Order.Username == User.Identity.Name)); 
```

# python - 在字典键和值上使用 zip

> ID：11739417
> 
> 赞同：4
> 
> 时间：2012-07-31T11:47:19.873
> 
> 标签：python, dictionary

我对`dict`类的python docs中的这一段有点困惑

> 如果 items()、keys()、values()、iteritems()、iterkeys() 和 itervalues() 被调用而没有对字典进行干预修改，则列表将直接对应。这允许使用 zip() 创建 (value, key) 对：pairs = zip(d.values(), d.keys())

什么意思`called with no intervening modifications`？

如果我收到一个由某个函数吐出的 dict 实例（我无法知道自从创建 dict 以来元素是否被修改）..我还能使用`zip(d.values(),d.keys())`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T11:49:21.547

是的。

关键是您不应该`d`在调用`d.values()`和之间进行修改`d.keys()`。

# php - 需要一些帮助来解决 PHP + mysql 和 HTML 表中的不合逻辑逻辑

> ID：11739425
> 
> 赞同：1
> 
> 时间：2012-07-31T11:47:53.487
> 
> 标签：php, mysql, sql, if-statement, while-loop

新来的这个董事会，但到目前为止很喜欢它:)

我目前正在帮助我的一个朋友重做她的个人网站，并且我正在为一张桌子的逻辑撞墙。

[该表应该在由 4 个列/单元格/TDs pr 行组成的表中显示最新消息（仅此而已） - 类似于这样的内容： http](http://screencast.com/t/Rh39oh6ms0OL) ://screencast.com/t/Rh39oh6ms0OL

所以基本上我有一个 SQL 查询，它从新闻表中选择日期、缩略图和标题（按 id desc 排序，所以我首先得到最新的）。

我已经做了一些逻辑（如您在下面的代码中所见），但它只会导致表格的第一行显示。有谁能让我回到正确的轨道上吗？将不胜感激。

```
<table>
  <?php
  //PHP code used for building HTML table showing news-resumes
  //Written by:  Jesper Flindt
  //Date:       2012.07.30
  //Version:   1.0

  //Getting data from MySQL database
  $query  = "select date, thumbnail, headline from news order by id desc";
  $result = mysql_query($query) or die("Connection Error:" . mysql_error());

  //Setting variables
  $i   = 0;
  $p  = 0;

  //Starting row in table
  print('<tr>');

  //Looping through the resultset
  while($row = mysql_fetch_assoc($result))
  {
    //Limit row to 4 cells (TDs)
    if($i < 4)
    {
      //Display the date of the news as well as its thumbnail
      print('<td><div style="padding-left:8px;"><b>Tilf&oslash;jet d. '.$row['date'].'</b></div><div class="news_thumbframe"><img src="./upload/'.$row['thumbnail'].'" alt=""/></div></td>');
      $i++;
      $p++;
    }
    //If row is 4 cells wide, start new row
    else if($i % 4 == 0)
    {
      print('</tr><tr>');
      $i++;
      $p++;
    }
    //Every second row should display the news headline as well as a "Read More" link ("L&aelig;s mere" in danish)
    else if($i % 4 != 0 || $p % 4 == 0)
    {
      print('<td width="215" valign="top"><br /><div style="padding-left:8px;"><h2>'.$row['headline'].'</h2><a href="#">L&aelig;s mere</a></div></td>');
      $i++;
      $p++;
    }
    else
    {
      $i = 0;
      $p = 0;
    }
  }
  ?>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:59:37.893

对于每个结果（即一个*完整*的新闻条目，而不是一列），您只执行一个 if 子句，因为您使用了一个`if/elseif/elseif/else`构造。它们是相互排斥的。

含义：

这将完全跳过数据库结果的每四行：

```
else if($i % 4 == 0)
{
  print('</tr><tr>');
  $i++;
  $p++;
} 
```

这将捕获不是 4 的倍数且大于 4 的所有行：

```
else if($i % 4 != 0 || $p % 4 == 0)
    {
      print('<td width="215" valign="top"><br /><div style="padding-left:8px;"><h2>'.$row['headline'].'</h2><a href="#">L&aelig;s mere</a></div></td>');
      $i++;
      $p++;
    } 
```

这永远不会执行：

```
else
{
  $i = 0;
  $p = 0;
} 
```

因为你的其他条件已经用尽了所有的可能性。

*   第一个子句将执行 4 次。
*   然后第二个子句将执行一次，因为`$i == 4`.
*   现在第三个子句将执行`$i == 5, 6, 7`
*   第二个子句将执行`$i == 8`
*   第三个子句将执行`$i == 9, 10, 11`

等等等等

为什么你有两个计数器变量？据我所知，您总是在相同的位置增加它们，并在相同的位置将它们设置为零。有什么不同？

**更新**

为了澄清您在评论中提到的内容：

```
else if($i % 4 != 0 || $p % 4 == 0) 
```

`||`表示逻辑或。它将首先检查第一个条件，如果不正确，它将检查第二个条件。如果其中任何一个为真，则整个条件都被认为是真，并且该子句将执行。

然而，`$i % 4 != 0`只是假的，什么时候`$i % 4 == 0`才是真的。这意味着，前面的`else if`子句已执行。支票甚至永远不会到达 `$p`零件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:30:00.200

您可以修改代码，因此您可以每 4 组同时生成 [thumbnail,date] 和 [headline]

**PHP：**

```
 //Setting variables
  $i   = 1;
  $img_date = '';  
  $headline =''; 

  //Looping through the resultset
  while($row = mysql_fetch_assoc($result))
  {
     //Building both  content for 4 columns
     $img_date .= '<td><div style="padding-left:8px;"><b>Tilf&oslash;jet d. '.$row['date'].'</b></div><div class="news_thumbframe"><img src="./upload/'.$row['thumbnail'].'" alt=""/></div></td>';

    $headline .='<td width="215" valign="top"><br /><div style="padding-left:8px;"><h2>'.$row['headline'].'</h2><a href="#">L&aelig;s mere</a></div></td>';

     if($i == 4) // Time build row
     {  
        // Building both thumbnail and headline row 
        echo "<tr id='thumb_date'>$img_date</tr>";
        echo "<tr id='headline'>$headline </tr>";

         //resetting  
        $i=1; 
        $img_date = '';  
        $headline ='';
      }
      else
        i++;

   }//end while 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:09:42.557

可能看起来更好

```
$result = mysql_query($query) or die("Connection Error:" . mysql_error());

$items = array();

while($row = mysql_fetch_assoc($result)){
   $items[] = array('date'=>$row['data'],
                    'thumbnail'=>$row['thumbnail'],
                    'headline'=>$row['headline'],);
}

$pairs = array_chunk($items,4);

foreach ($pairs as $pair){

  print '<tr>';

  foreach ($pair as $row){
    print('<td><div style="padding-left:8px;"><b>Tilf&oslash;jet d. '.$row['date'].'</b></div><div class="news_thumbframe"><img src="./upload/'.$row['thumbnail'].'" alt=""/></div></td>');
  }

  print '<tr/><tr>';

  foreach ($pair as $row){
    print('<td width="215" valign="top"><br /><div style="padding-left:8px;"><h2>'.$row['headline'].'</h2><a href="#">L&aelig;s mere</a></div></td>');

  }  
  print '<tr/>'; 
} 
```

# dotcloud - 从 django 在服务器上运行 bash 脚本

> ID：11739427
> 
> 赞同：0
> 
> 时间：2012-07-31T11:47:55.340
> 
> 标签：dotcloud

有没有办法从 django 中在 /home/dotcloud/current/app_name 处运行 bash 脚本？我试图运行的文件在那里，但我收到一个操作系统错误，说该文件不存在。我认为这与 django 在 dotcloud 服务器上运行的环境有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:53:00.407

随着@KenCochrane 的回答，我仔细看了看，最终发现是导致问题的 Windows 行尾约定（最初直接在服务器上开发脚本，这很好，但是当我复制时行约定被切换了脚本的内容并创建一个文件，然后将其推送到服务器）。

# qt - 如何在 QWizard 多线程上更新 QProgressBar？

> ID：11739428
> 
> 赞同：0
> 
> 时间：2012-07-31T11:48:04.523
> 
> 标签：qt, qprogressbar

我有一个 QWizard 子类，对于某些页面，调用方法需要很长时间，所以我想放入一个 QProgressBar。我的第一个想法是我创建了一个 QTimer 并设置了一个方法来调用 updateProgressBar，但它似乎与向导在同一个线程中运行，所以只有在 QWizard 不忙时才会更新。我怎样才能让它在另一个线程中运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:20:51.123

将您的长时间运行的任务移动到作为[QThread](http://qt-project.org/doc/qt-4.8/qthread.html)子类的工作线程中。让工作线程发出一个信号以指示其进度（完成百分比，如果您知道的话），并将该信号连接到进度条的 setValue(int) 插槽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:10:19.567

谢谢，我结束了在 QWizard 类中创建 QThread 对象并调用 moveToThread 将对象移动到线程。如[http://www.developer.nokia.com/Community/Wiki/How_to_move_a_QObject_to_a_thread](http://www.developer.nokia.com/Community/Wiki/How_to_move_a_QObject_to_a_thread)

# magento - 在 Magento 的类别页面上获取产品标签？

> ID：11739431
> 
> 赞同：0
> 
> 时间：2012-07-31T11:48:06.990
> 
> 标签：magento, tags, categories, product

如何在类别视图上获取和显示产品标签（在产品列表的循环中）？我使用了代码（来自[另一个问题](https://stackoverflow.com/questions/2053776/how-to-display-tags-product-in-view-phtml-of-magento)）并放入了 \app\design\frontend\...\template\catalog\product\list.phtml：

```
<?php $_tags = new Mage_Tag_Block_Product_List(); ?> 
```

并在 foreach （其中产品列表）显示标签：

```
<?php if($_tags) : ?>
    <?php foreach($_tags->getTags() as $tag):?>
        <span class="tag"><?=$tag->getName()?></span>
    <?php endforeach; ?>
<?php endif; ?> 
```

它不起作用，因为实例化 $_tags 给了我错误：

> 在第 45 行的 \app\code\core\Mage\Tag\Block\Product\List.php 中的非对象上调用成员函数 getItems()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:01:08.253

我认为这是一个很好的起点：

要查看哪些产品具有特定标签，您可以使用

```
$tagId = 9;  
$collection = Mage::getResourceModel('tag/product_collection')->addTagFilter($tagId);
?>
    <ul class=\"tags-list tag_overview\">
        <?php foreach ($collection as $_tag): ?>
            <li><a href=\"<?php echo $_tag->getTaggedProductsUrl() ?>\" style=\"font-size:<?php echo $_tag->getRatio()*70+75 ?>%;\"><?php echo $this->htmlEscape($_tag->getName()) ?></a></li>
        <?php endforeach; ?>
    </ul> 
```

你可以使用`addTagFilter($tagId)`或不使用，取决于你的目标

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T09:26:10.917

我使用了此代码，并且产品标签针对集合中的每个产品循环显示：

```
foreach ($_productCollection as $_product):
    $model=Mage::getModel('tag/tag');
    $tags= $model->getResourceCollection()
        ->addPopularity()
        ->addStatusFilter($model->getApprovedStatus())
        ->addProductFilter($_product->getId())
        ->setFlag('relation', true)
        ->addStoreFilter(Mage::app()->getStore()->getId())
        ->setActiveFilter()
        ->load();

    if(isset($tags) && !empty($tags)):
        foreach($tags as $tag):
            echo '<span class="tag">'.$tag->getName().'</span>';
        endforeach;
    endif;
endforeach; 
```

# windows-phone-7 - Windows Phone 7 TextBox 不允许输入空间

> ID：11739437
> 
> 赞同：0
> 
> 时间：2012-07-31T11:48:35.207
> 
> 标签：windows-phone-7, textbox, inputscope

我有下一个 XAML 代码：

```
<ControlTemplate x:Key="PollAnswerRadioTextTemplate" TargetType="RadioButton">
            <StackPanel Width="400" Margin="20,5,5,30">
                <StackPanel>
                    <RadioButton 
                                 IsChecked="{Binding IsChecked}" 
                                 Click="RadioButton_Click"  
                                 CommandParameter="{Binding PControlName}" 
                                 GroupName="Answer" 
                                 Width="400">

                        <RadioButton.Content>
                            <TextBlock TextWrapping="Wrap" Text="{Binding PAvalue}"></TextBlock>
                        </RadioButton.Content>
                    </RadioButton>
                </StackPanel>
                <StackPanel>
                    <TextBox Width="400" Text="{Binding AnswerValueText}" Tag="{Binding PControlName}" AcceptsReturn="True" >
                        <TextBox.InputScope>
                            <InputScope>
                                <InputScopeName NameValue="Chat"/>
                            </InputScope>
                        </TextBox.InputScope>
                    </TextBox>
                </StackPanel>
            </StackPanel>
        </ControlTemplate> 
```

我无法输入单词后面的空格。如何在我的应用程序中关闭拼写自动更正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:25:24.497

对于您的第二个问题 - 只需将 InputScopeName NameValue 参数更改为“AddressStreet” - 这应该会为您删除自动更正。[在此处查看](http://msdn.microsoft.com/en-us/library/hh393998%28v=vs.92%29.aspx)不同输入范围的概述。

至于您的空间问题，我认为应该从输入的变化中自动解决。如果没有，请发布您的一些代码隐藏代码，为我们提供更多工作信息。

# c# - C# + Access DB：额外.cs 中的简单操作？

> ID：11739441
> 
> 赞同：1
> 
> 时间：2012-07-31T11:48:47.880
> 
> 标签：c#, function

出于某种原因，我不能使用我的 MySQL-DB，所以我切换到了 Access DB。

我想要一些小函数来执行简单的查询，如 SELECT、UPDATE 和 INSERT。

我遵循了这个小代码：

```
using System.Data.OleDb;
using System.Windows.Forms;
using System.Data;

class Csharp_Access
{
    public void Csharp_Access_Datenbank()
    {
        OleDbConnection con = new OleDbConnection(
        @"Provider=Microsoft.Jet.OLEDB.4.0;
        Data Source=C:\data.mdb");
        con.Open();

        string strSQL = "SELECT * FROM Tabelle1";

        OleDbCommand cmd = new OleDbCommand(strSQL, con);
        OleDbDataReader dr = cmd.ExecuteReader();

        while (dr.Read())
        {
            MessageBox.Show(dr[0].ToString());
        }
        dr.Close();
        con.Close();
        }
    } 
```

当我只是复制并粘贴它时，此代码可以完美运行。所以我决定把代码改成“dbFunctions.cs”：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.OleDb;
using System.Xml.Serialization;

namespace AquadoServerTool
{
    class dbFunctions
    {
        /// <summary>
        /// Funktion, um eine Abfrage auszuführen
        /// </summary>
        /// <param name="QueryStr">SQL-String</param>
        /// <returns></returns>
        public static OleDbDataReader QueryString(string QueryStr)
        {
            // string strAccessSelect = "SELECT * FROM seriennummer";

            // Verbindung zur Datenbank aufbauen
            OleDbConnection con = null;
            try
            {
                con = new OleDbConnection(GlobalVar.strAccessConn);
                con.Open();
            }
            catch (Exception)
            {
                return null;
            }

            OleDbCommand cmd = new OleDbCommand(QueryStr, con);
            OleDbDataReader dr = cmd.ExecuteReader();
            // while (dr.Read())
            // {
            //     MessageBox.Show(dr[0].ToString());
            // }

            con.Close();

            return dr;
        }
    }

} 
```

为了测试，如果可行，我做了一个小按钮：

```
 private void button1_Click(object sender, EventArgs e)
    {
        OleDbDataReader dr = dbFunctions.QueryString("SELECT * FROM seriennummer;");

        while (dr.Read())
        {
            MessageBox.Show(dr[1].ToString());
        }
        dr.Close();
    } 
```

是的，现在点击那个按钮来遗忘！但我收到错误，Read() 不起作用，因为它已经关闭。

我的代码是完全错误的还是我忘记了什么？

问候，巨魔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:52:35.627

您的问题是您首先关闭连接，*然后*尝试从`DataReader`. 您必须保持连接打开才能阅读。

* * *

`DataReader`您可以围绕为您实现`IDisposable`和关闭连接创建一个包装器。

**简单的例子：**

```
class Wrapper : IDisposable
{
    public OleDbDataReader Reader { get { return reader; } }
    private OleDbConnection connection;

    public Wrapper(OleDbConnection connection, string QueryStr)
    { 
        this.connection = connection; 
        OleDbCommand cmd = new OleDbCommand(QueryStr, connection);
        OleDbDataReader dr = cmd.ExecuteReader();
    }

    public void Dispose()
    {
        reader.Dispose();
        connection.Dispose();
    }
}

class dbFunctions
{
    public static OleDbDataReader QueryString(string QueryStr)
    {
        OleDbConnection con = new OleDbConnection(GlobalVar.strAccessConn);
        con.Open();
        return new Wrapper(con, QueryStr);
    }
} 
```

**用法：**

```
private void button1_Click(object sender, EventArgs e)
{
    using (var dr = dbFunctions.QueryString("SELECT * FROM seriennummer;"))
        while (dr.Reader.Read())
            MessageBox.Show(dr[1].ToString());
} 
```

* * *

另一种方法是通过`DataTable`.

```
class dbFunctions
{
    public static DataTable QueryString(string QueryStr)
    {
        var result = new DataTable();
        using(OleDbConnection con = new OleDbConnection(GlobalVar.strAccessConn))
        {
            con.Open();
            using(OleDbCommand cmd = new OleDbCommand(QueryStr, con))
                result.Load(cmd.ExecuteReader());
        }
        return result;
    }
}

private void button1_Click(object sender, EventArgs e)
{
    var data = dbFunctions.QueryString("SELECT * FROM seriennummer;");
    foreach(var row in data.Rows)
        MessageBox.Show(row[1].ToString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:55:24.770

使用`DataSet`而不是`DataReader`
`DataReader`需要打开连接来读取它。

# java - java.io.IOException：在java中文件解压缩期间的负查找偏移量

> ID：11739443
> 
> 赞同：2
> 
> 时间：2012-07-31T11:49:00.290
> 
> 标签：java

`org.apache.tools.zip.ZipFile``java.io.IOException: Negative seek offset` 在执行这行代码的过程中抛出异常`zipFile = new ZipFile(new File(zipfile));`只要我减小 zipfile 的大小，问题就不会出现。如何解决这个问题呢？

# android - 如何在android上获取每个cpu核心的使用情况

> ID：11739444
> 
> 赞同：2
> 
> 时间：2012-07-31T11:49:09.960
> 
> 标签：android, cpu, multicore, core

我在 Android 上开发了一个小部件，它显示了许多有用的信息。

我正在尝试修改此方法以返回一个 cpu 核心的使用百分比，以便获得每个核心的使用百分比！！！

在我的 HTC One X 上，我在“/proc/stat”中有：

```
cpu  183549 10728 236016 3754379 7530 41 1013 0 0 0
cpu0 141962 5990 196956 720894 3333 41 970 0 0 0
cpu1 23400 2550 23158 980901 2211 0 23 0 0 0
cpu2 13602 1637 12561 1019126 1216 0 18 0 0 0
cpu3 4585 551 3341 1033458 770 0 2 0 0 0 
```

我使用此方法返回所有 cpu 核心的使用百分比。

```
public float readUsage() {
    try {

        RandomAccessFile reader = new RandomAccessFile("/proc/stat", "r");
        String load = reader.readLine();

        String[] toks = load.split(" ");

        long idle1 = Long.parseLong(toks[5]);
        long cpu1 = Long.parseLong(toks[2]) + Long.parseLong(toks[3]) + Long.parseLong(toks[4])
              + Long.parseLong(toks[6]) + Long.parseLong(toks[7]) + Long.parseLong(toks[8]);

        try {
            Thread.sleep(800);
        } catch (Exception e) {}

        reader.seek(0);
        load = reader.readLine();
        reader.close();

        toks = load.split(" ");

        long idle2 = Long.parseLong(toks[5]);
        long cpu2 = Long.parseLong(toks[2]) + Long.parseLong(toks[3]) + Long.parseLong(toks[4])
            + Long.parseLong(toks[6]) + Long.parseLong(toks[7]) + Long.parseLong(toks[8]);

        return (float)(cpu2 - cpu1) / ((cpu2 + idle2) - (cpu1 + idle1));

    } catch (IOException ex) {
        ex.printStackTrace();
    }

    return 0;
} 
```

我正在尝试使用 cpu1，但它不起作用：

```
public float readUsageCPU0() {
    try {

        RandomAccessFile reader = new RandomAccessFile("/proc/stat", "r");
        reader.seek(0);
        String load = reader.readLine();
        load = reader.readLine();
        load = reader.readLine();

        String[] toks = load.split(" ");

        long idle1 = Long.parseLong(toks[5]);
        long cpu1 = Long.parseLong(toks[2]) + Long.parseLong(toks[3]) + Long.parseLong(toks[4])
              + Long.parseLong(toks[6]) + Long.parseLong(toks[7]) + Long.parseLong(toks[8]);

        try {
            Thread.sleep(500);
        } catch (Exception e) {}

        reader.seek(0);
        load = reader.readLine();
        load = reader.readLine();
        load = reader.readLine();
        reader.close();

        toks = load.split(" ");

        long idle2 = Long.parseLong(toks[5]);
        long cpu2 = Long.parseLong(toks[2]) + Long.parseLong(toks[3]) + Long.parseLong(toks[4])
            + Long.parseLong(toks[6]) + Long.parseLong(toks[7]) + Long.parseLong(toks[8]);

        return (float)(cpu2 - cpu1) / ((cpu2 + idle2) - (cpu1 + idle1));

    } catch (IOException ex) {
        ex.printStackTrace();
    }

    return 0;
} 
```

这允许读取一行并且光标停留在行尾：

```
String load = reader.readLine(); 
```

所以，我尝试使用它两次以获得 CPU0 的使用，第三次获得 CPU1。但结果总是 0 或 100 ......我不明白！

我使用正确的方法吗？我使用正确的文件吗？这个结果正常吗？

请帮忙 ！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T20:29:25.167

```
public class CpuStat {
    private static final String TAG = "CpuUsage";
    private RandomAccessFile statFile;
    private CpuInfo mCpuInfoTotal;
    private ArrayList<CpuInfo> mCpuInfoList;

    public CpuStat() {
    }

    public void update() {
        try {           
            createFile();
            parseFile();
            closeFile();
        } catch (FileNotFoundException e) {
            statFile = null;
            Log.e(TAG, "cannot open /proc/stat: " + e);
        } catch (IOException e) {
            Log.e(TAG, "cannot close /proc/stat: " + e);
        }
    }

    private void createFile() throws FileNotFoundException {
        statFile = new RandomAccessFile("/proc/stat", "r");
    }

    public void closeFile() throws IOException {
        if (statFile != null)
            statFile.close();
    }

    private void parseFile() {
        if (statFile != null) {
            try {
                statFile.seek(0);
                String cpuLine = "";
                int cpuId = -1;
                do { 
                    cpuLine = statFile.readLine();
                    parseCpuLine(cpuId, cpuLine);
                    cpuId++;
                } while (cpuLine != null);
            } catch (IOException e) {
                Log.e(TAG, "Ops: " + e);
            }
        }
    }

    private void parseCpuLine(int cpuId, String cpuLine) {
        if (cpuLine != null && cpuLine.length() > 0) { 
            String[] parts = cpuLine.split("[ ]+");
            String cpuLabel = "cpu";
            if ( parts[0].indexOf(cpuLabel) != -1) {
                createCpuInfo(cpuId, parts);
            }
        } else {
            Log.e(TAG, "unable to get cpu line");
        }
    }

    private void createCpuInfo(int cpuId, String[] parts) {
        if (cpuId == -1) {                      
            if (mCpuInfoTotal == null)
                mCpuInfoTotal = new CpuInfo();
            mCpuInfoTotal.update(parts);
        } else {
            if (mCpuInfoList == null)
                mCpuInfoList = new ArrayList<CpuInfo>();
            if (cpuId < mCpuInfoList.size())
                mCpuInfoList.get(cpuId).update(parts);
            else {
                CpuInfo info = new CpuInfo();
                info.update(parts);
                mCpuInfoList.add(info);
            }                               
        }
    }

    public int getCpuUsage(int cpuId) {
        update();
        int usage = 0;
        if (mCpuInfoList != null) {
            int cpuCount = mCpuInfoList.size();
            if (cpuCount > 0) {
                cpuCount--;
                if (cpuId == cpuCount) { // -1 total cpu usage
                    usage = mCpuInfoList.get(0).getUsage(); 
                } else {
                    if (cpuId <= cpuCount)
                        usage = mCpuInfoList.get(cpuId).getUsage();
                    else
                        usage = -1;
                }
            }
        }
        return usage;
    }

    public int getTotalCpuUsage() {
        update();           
        int usage = 0;
        if (mCpuInfoTotal != null)
            usage = mCpuInfoTotal.getUsage();
        return usage;
    }

    public String toString() {
        update();
        StringBuffer buf = new StringBuffer();
        if (mCpuInfoTotal != null) {
            buf.append("Cpu Total : ");
            buf.append(mCpuInfoTotal.getUsage());
            buf.append("%");
        }   
        if (mCpuInfoList != null) {
            for (int i=0; i < mCpuInfoList.size(); i++) {
                CpuInfo info = mCpuInfoList.get(i); 
                buf.append(" Cpu Core(" + i + ") : ");
                buf.append(info.getUsage());
                buf.append("%");
                info.getUsage();
            }
        }           
        return buf.toString();
    }

    public class CpuInfo {
        private int  mUsage;            
        private long mLastTotal;
        private long mLastIdle;

        public CpuInfo() {
            mUsage = 0;
            mLastTotal = 0;
            mLastIdle = 0;  
        }

        private int  getUsage() {
            return mUsage;
        }

        public void update(String[] parts) {
            // the columns are:
            //
            //      0 "cpu": the string "cpu" that identifies the line
            //      1 user: normal processes executing in user mode
            //      2 nice: niced processes executing in user mode
            //      3 system: processes executing in kernel mode
            //      4 idle: twiddling thumbs
            //      5 iowait: waiting for I/O to complete
            //      6 irq: servicing interrupts
            //      7 softirq: servicing softirqs
            //
            long idle = Long.parseLong(parts[4], 10);
            long total = 0;
            boolean head = true;
            for (String part : parts) {
                if (head) {
                    head = false;
                    continue;
                }
                total += Long.parseLong(part, 10);
            }
            long diffIdle   =   idle - mLastIdle;
            long diffTotal  =   total - mLastTotal;
            mUsage = (int)((float)(diffTotal - diffIdle) / diffTotal * 100);
            mLastTotal = total;
            mLastIdle = idle;
            Log.i(TAG, "CPU total=" + total + "; idle=" + idle + "; usage=" + mUsage);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-08-06T09:15:30.980

你可以用这个得到每个核心的频率......

```
try {
     double currentFreq;
     RandomAccessFile readerCurFreq;
     readerCurFreq = new RandomAccessFile("/sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq", "r");
     String curfreg = readerCurFreq.readLine();
     currentFreq = Double.parseDouble(curfreg) / 1000;
     readerCurFreq.close();
     String finalfre = "Curent Frequency of Core 0 is" + currentFreq;
 } catch (IOException ex) {
     String finalfre = "Core is Idle";
    ex.printStackTrace();
 } 
```

循环这个通过核心的数量。这样您就可以获得所有内核的频率。有时，如果内核空闲或停止，此代码可能会产生异常。处理它，你就可以走了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:15:09.120

感谢user1549150的好回答。但不适用于我的情况。我正在将您的 java 代码移植到本机中，但是在 java 时它给出了错误的 difTotal 和 difIdle。

对我来说，/proc/stat 如此处所示，

第一

```
* cpu  2626387 6180 852236 7911540 2469 121 3138 0 0 0
  cpu0 499189 2940 389423 1952572 589 84 2863 0 0 0
  cpu1 711524 1036 147360 1990743 670 11 132 0 0 0
  cpu2 703355 1085 156577 1989813 591 14 65 0 0 0
  cpu3 712318 1118 158875 1978412 618 11 78 0 0 0
  intr 58674412 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 2 0 0 .. 
```

第二

```
* cpu  2626622 6180 852296 7911655 2469 121 3138 0 0 0
  cpu0 499235 2940 389448 1952603 589 84 2863 0 0 0
  cpu1 711580 1036 147372 1990777 670 11 132 0 0 0
  cpu2 703416 1085 156589 1989842 591 14 65 0 0 0
  cpu3 712389 1118 158885 1978432 618 11 78 0 0 0
  intr 58679023 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 2 0 0 ... 
```

解析的差异时间是

```
 CPU difTot[410] difIdle[115]
  CPU difTot[102] difIdle[31]
  CPU difTot[102] difIdle[34]
  CPU difTot[102] difIdle[29]
  CPU difTot[101] difIdle[20] 
```

下面给出了适当的核心使用时间。

```
 CORE[0] tot[11402481] idl[7911655] use[71]
  CORE[1] tot[2847762] idl[1952603] use[69]
  CORE[2] tot[2851578] idl[1990777] use[66]
  CORE[3] tot[2851602] idl[1989842] use[71]
  CORE[4] tot[2851531] idl[1978432] use[80] 
```

最终 toString 给出

```
 CPU Usage :Tot[71] Core0[69] Core1[66] Core2[71] Core3[80] 
```

我的设备是 Galaxy Note2（有根）

这是源代码。希望有人会给予救赎。

```
//GQPHD(bispro89@gmail.com)
void printCpuState()
{
std::ifstream is("/proc/stat");
std::stringstream buffer;
buffer << is.rdbuf();
std::string strbuff(buffer.str());

LOGV("********** start /proc/stat log\n* %s\n********** end /proc/stat log",strbuff.c_str());
std::vector<std::string> vec;
vec = Tokenize(strbuff);

//@ref http://stackoverflow.com/questions/11739444/how-to-get-usage-of-each-cpu-core-on-android
int cntcpu = 0;
for(int i = 0 ; i < vec.capacity(); i++){
    std::string str = vec[i];
    if( (str.find("cpu") != string::npos ) )  {//if contains str

        // the columns are:
        //
        //      0 "cpu": the string "cpu" that identifies the line
        //      1 user: normal processes executing in user mode
        //      2 nice: niced processes executing in user mode
        //      3 system: processes executing in kernel mode
        //      4 idle: twiddling thumbs
        //      5 iowait: waiting for I/O to complete
        //      6 irq: servicing interrupts
        //      7 softirq: servicing softirqs
        //
        long idle = atol(vec[i+4].c_str());//Long.parseLong(parts[4], 10);
        long total = 0;
        bool head = true;
        for(int j = 0 ; j < 7; j++){
            total += atol(vec[i+j+1].c_str());
        }
        long diffIdle   =   idle - mLastIdle[cntcpu];
        long diffTotal  =   total - mLastTotal[cntcpu];
        int usage = (int)((float)(diffTotal - diffIdle) / diffTotal * 100);
        mUsage[cntcpu] = usage;
        mLastTotal[cntcpu] = total;
        mLastIdle[cntcpu] = idle;

        LOGV("CPU difTot[%d] difIdle[%d]",diffTotal,diffIdle);

        cntcpu++;
    }

}
for(int i = 0 ; i < 5 ; i++){
    LOGV("CORE[%d] tot[%d] idl[%d] use[%d]",i,mLastTotal[i],mLastIdle[i],mUsage[i]);
}

LOGV("CPU Usage :Tot[%d\%] Core0[%d\%] Core1[%d\%] Core2[%d\%] Core3[%d\%]",
        mUsage[0],
        mUsage[1],
        mUsage[2],
        mUsage[3],
        mUsage[4]
);
is.close();
} 
```

thnx user1549150

# jqgrid - jqGrid - 单个记录中的多行

> ID：11739449
> 
> 赞同：1
> 
> 时间：2012-07-31T11:49:30.403
> 
> 标签：jqgrid

我想将分页添加到多行计为一条记录的网格中。

这是可行的吗？也许我可以访问寻呼机的内部工作？基本上 3 行应该算作 1 条记录。

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:50:25.663

如果您希望 3 行计为 1 条记录，只需将 rowNum 属性的倍数设为应有的 3 倍。因此，如果您希望网格有 10 条记录和每条记录 3 行，请将 rowNum 设为 30。

# sqlite - 从黑莓模拟器中提取数据库

> ID：11739450
> 
> 赞同：0
> 
> 时间：2012-07-31T11:49:34.137
> 
> 标签：sqlite, blackberry-webworks, cordova-2.0.0

我试着用谷歌搜索它，我试着浏览模拟器目录，但我在任何地方都找不到它。有谁知道如何从黑莓模拟器中提取 sqlite 数据库？具体来说，我使用的是 Blackberry WebWorks SDK 2.3.1.5 和 simpack 7.0.0.318。我问是因为手动将其拉出并检查它比为所有内容编写选择语句要容易得多。

用安卓，没问题，直接通过DDMS进去，黑莓就搞不懂了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:47:31.297

如果使用 WebWorks，为什么不将 Ripple 与 Web Inspector（或只是 Web Inspector）一起使用？您可以直接在浏览器中查看 SQLite 数据库的内容： [https ://developer.blackberry.com/html5/documentation/getting_started_webinsp_microsite_1987477_11.html](https://developer.blackberry.com/html5/documentation/getting_started_webinsp_microsite_1987477_11.html)

如果您对模拟器很感兴趣，这可能会有所帮助： [http ://docs.blackberry.com/en/developers/deliverables/41571/666667.jsp](http://docs.blackberry.com/en/developers/deliverables/41571/666667.jsp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:04:30.417

我在模拟器中使用文件资源管理器在路径中找到了我创建的数据库，`/Device/BlackBerry/system/appdata/rim/webstorage/(application name)`然后将其复制到 sdcard（安装到我计算机中的文件夹）。然后我可以从那个文件夹中取出数据库。我使用这种方法将文件传入和传出模拟器。

# oracle - 使用 utl_file.fopen 读取没有名字的图片

> ID：11739451
> 
> 赞同：1
> 
> 时间：2012-07-31T11:49:34.757
> 
> 标签：oracle, oracle10g

我有一些图像存储在数据库中，但我没有这些图像的名称。

有人知道如何使用 阅读这些图像`utl_file.fopen()`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:45:24.537

UTL_FILE 是一个用于从 PL/SQL 包中操作 OS 文件的包。您将图像存储在数据库列中，大概是 BLOB。因此，UTL_FILE 是完全错误的工具。

事实上，数据库实际上对 BLOB 列的内容不感兴趣，而 Oracle 通常在渲染图像的功能方面并不多。您需要做的是发出查询以选择相关列并将其返回到可以显示图像的客户端工具。

* * *

> “图像以 LONG 格式存储（既不是 long raw 也不是 blob）。”

那你就真的不走运了。对 LONG 的内置支持甚至比对 LOB 的支持还要少。

Oracle 很久以前就弃用 LONG 支持 LOB 正是因为 LONG 数据类型太笨拙而无法使用。LOB 是在 15 年前在 Oracle8 中引入的，确实没有理由继续使用 LONG。我很欣赏这对您目前的困境没有帮助。

* * *

顺便说一句，当你说：

> “可用于在 oracle 本身中查看此图像的任何其他方法”

“Oracle 本身”是一个数据存储。检索和查看数据是客户的工作；这可以是开发人员的工具，例如 SQL*plus 或 TOAD，也可以是应用程序。我不知道任何渲染图像的IDE；如果有的话，他们极不可能将图像存储在 LONG 中。

因此，我认为您唯一的选择是自己用 C# 编写一些东西（如果那是您选择的语言）。在这种情况下，您应该[阅读有关在 C# 中使用 LONGs 的答案。](https://stackoverflow.com/a/2655950/146325)

# javascript - 具有扩展原型和“for-in”循环的 JavaScript 原生对象

> ID：11739455
> 
> 赞同：2
> 
> 时间：2012-07-31T11:49:51.213
> 
> 标签：javascript, for-loop, embedded-object

我扩展了`Array`原型：

```
if(typeof Array.prototype.filter === 'undefined') Array.prototype.filter = function(fun /*, thisp*/){
  var len = this.length;
  if(typeof fun != "function") throw new TypeError();

  var res = [], thisp = arguments[1];

  for(var i=0;i<len;i++){
    if(i in this){
      var val = this[i]; // in case fun mutates this
      if(fun.call(thisp, val, i, this)) res.push(val);
    }
  }

  return res;
}; 
```

例如我创建了数组：

```
var A = [ 1, 2, 3, 4, 5 ]; 
```

然后我添加了额外的属性，我将使用：

```
A.creator = 'Rustam';
A.created = new Date(); 
```

如果我将使用`for-in`循环，并且浏览器没有内置支持`Array.filter`，它将通过`A.filter`.

我知道这样：

```
for(var p in A) {
  if (!A.hasOwnProperty(p)) continue
  console.log(p)
}; 
```

**有没有办法在不使用的情况下`A.filter`隐藏？`for-in``hasOwnProperty`**

* * *

**更新回答。**浏览器支持：

*   IE9+
*   FF4+
*   铬合金
*   歌剧 11.6+
*   野生动物园 5+

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T11:59:18.630

要定义不在循环中显示的属性，请使用[`Object.defineProperty`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty)：

```
Object.defineProperty(Array.prototype, 'filter', {value:'XYZ'}); 
```

这扩展了一个使用默认属性描述符`Array.prototype`调用的属性，包括，这会导致该属性不显示在循环中。`filter``enumerable: false``for( .. in ..)`

### 参考

*   [`Object.defineProperty`在 MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty)
*   [`Object.defineProperty`在 MSDN](http://msdn.microsoft.com/en-us/library/dd548687(v=vs.94).aspx)

PS：不适用于*旧浏览器*我没有此 API 的浏览器兼容性矩阵。

# asp.net - VB.Net 会话更新

> ID：11739456
> 
> 赞同：2
> 
> 时间：2012-07-31T11:49:58.427
> 
> 标签：asp.net, vb.net

所以我制作了一个网络应用程序，其中允许管理员更改用户配置文件数据。当然有一个页面，用户可以更改自己的数据，管理员也一样。所以管理员基本上有两个页面，他可以在用户管理页面和我的个人资料页面上更改自己的数据。当管理员在用户管理页面上更改数据时会出现问题，它不会在我的个人资料中显示更改，但反之亦然。

我意识到问题在于数据的导入方式。在 UA 页面上，它直接来自数据库，而在我的个人资料页面上，它通过我创建的当前用户会话变量。所以它不会按应有的方式更新它，我已经四处寻找解决这个问题的方法，但到目前为止运气不好，所以我很感激帮助。

谢谢你。

编辑：

`Session.Item("login")`好的，所以我在用户登录时创建一个，如下所示：

```
Context.Session.Add("login", userData) 
```

我当前的用户在哪里`userData`，包含用户名、密码、名字、姓氏等...我的 User 类的一个实例，简单地说。

然后在`User Control`我的 Page_Load

```
If Not Page.IsPostBack Then
    Dim login As New User
    login = Session.Item("login")
    PopulateUsersData(login)
End If 
```

我从中获取了`User Control`名为“我的个人资料”的数据。方法`PopulateUserData`仅在页面上显示从`login`实例到我的控件的数据。

这`Session.Item("login")`是我希望更新的 Session 变量。

希望这是足够的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:59:16.963

您可以通过在两个地方以相同的方式处理用户信息来解决此问题。

您检查正在编辑的用户是否是登录用户，如果是，则更新当前登录信息以及数据库条目。

# windows-phone-7 - 在 WP7 上使用 Bing 地图绘制路线

> ID：11739459
> 
> 赞同：0
> 
> 时间：2012-07-31T11:50:00.743
> 
> 标签：windows-phone-7, bing-maps

我正在关注（http://msdn.microsoft.com/en-us/library/ee681887.aspx），我猜我遇到了三个与组件有关的问题。

```
Microsoft.Phone.Controls.Maps.Location' does not contain a constructor that takes 2 arguments 
```

在

```
routeLine.Locations.Add(new Location(p.Latitude, p.Longitude)); 
```

和另外两个类似的。

找不到问题，因为我添加了很好的参考...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:55:38.440

您正在使用错误的教程。在 Windows Phone 上，您应该使用 GeoCoordinate 类。它有一个接受 2 个参数的构造函数。

[在这里阅读更多。](http://msdn.microsoft.com/en-us/library/system.device.location.geocoordinate.aspx)

要在 Windows Phone 上使用 Bing 地图和路线，请在[此处查找教程](http://blogs.msdn.com/b/mikebattista/archive/2011/01/18/geocoding-and-routing-with-bing-maps.aspx)。

# css - 透明的png图像在浏览器中不是完全透明的

> ID：11739462
> 
> 赞同：1
> 
> 时间：2012-07-31T11:50:11.483
> 
> 标签：css, png

我正在使用 Chrome 浏览器。我有一个完全透明`.png`的徽标图像，但似乎有问题：

![在此处输入图像描述](../Images/aa57a2bbce03293fc00e65f741ede8bd.png)

您需要再看第二遍，但您可以看到图像的色调比背景浅。我用 CSS 创建背景：

```
background: #e1e2e4;
background: -webkit-gradient(linear, left top,
            left bottom, from(#e1e2e4), to(#8f9094));

background: -moz-linear-gradient(top,  #e1e2e4,  #8f9094);
filter: progid:DXImageTransform.Microsoft.gradient
        (startColorstr='#e1e2e4', endColorstr='#8f9094'); 

background-repeat: no-repeat;
background-attachment: fixed; 
```

任何想法为什么会发生这种情况？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:56:42.923

它与颜色配置文件和颜色校正有关。有关更多详细信息，请参阅[本文](http://hacks.mozilla.org/2009/06/color-correction/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-02-07T11:45:06.173

似乎有效的简单修复..

*   下载并运行 GIMP。
*   打开你的PNG文件。
*   从主菜单中选择图像 -> 模式 -> 索引。
*   保存/覆盖您的 PNG 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-01T05:11:20.907

`div`我在通过降价（reveal.js）加载透明PNG时遇到问题`background-color:red`，但透明像素显示得比红色更亮：

[![在此处输入图像描述](../Images/3cfbe956b885859b5fec0e1b9529d532.png)](https://i.stack.imgur.com/wuR9f.png)

较浅的红色是透明的 PNG（左下角的白色是徽标的一部分）。

事实证明，`reveal.js`加载`beige`带有 0.12 alpha 的白色背景的 markdown 图像（至少带有主题）：

```
.reveal section img {
    ...
    background: rgba(255, 255, 255, 0.12);
    ...
} 
```

在 Chrome 开发人员工具的 Inspect 功能中停用它可以解决问题。

我终于在我的降价中解决了这个问题，方法是使用与我相同的背景颜色来设置图像的样式`div`

```
![The logo](logo_with_transparent_background.png){class=plain style="background-color:red"} 
```

# symfony - 得到扩展的模板不能有正文的错误

> ID：11739463
> 
> 赞同：30
> 
> 时间：2012-07-31T11:50:15.713
> 
> 标签：symfony, twig

我正在做jobeet教程。当我像这样在 localhost 上运行项目时：

```
http://localhost/Symfony/web/app_dev.php/ens_job/ 
```

我收到一个错误

```
A template that extends another one cannot have a body in EnslJobeetBundle:Job:index.html.twig at line 7. 
```

在这种情况下我该怎么办？

我正在使用 index.html.twig 如下：

```
<!-- src/Ens/JobeetBundle/Resources/views/Job/index.html.twig -->
{% extends 'EnsJobeetBundle::layout.html.twig' %}

{% block stylesheets %}
  {{ parent() }}
  <link rel="stylesheet" href="{{ asset('bundles/ensjobeet/css/jobs.css') }}" type="text/css" media="all" />
{% endblock %}

<!-- the rest of the code --> 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-31T12:11:43.873

`blocks`当您在子模板中有内容时会发生此错误。

你必须`<!-- src/Ensl/JobeetBundle/Resources/views/Job/index.html.twig -->`从你的`index.html.twig`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-03-07T06:47:42.543

如果您要扩展布局，Twig 不允许任何 html 语法。这意味着即使是 html 中的注释标签也被视为已定义块之外的内容。如果你想保留评论，那么你可以在树枝评论中这样做：

```
{# src/Ens/JobeetBundle/Resources/views/Job/index.html.twig #}
{% extends 'EnsJobeetBundle::layout.html.twig' %}
{% block stylesheets %}
  {{ parent() }}
  <link rel="stylesheet" href="{{ asset('bundles/ensjobeet/css/jobs.css') }}" type="text/css" media="all" />
{% endblock %}
{# the rest of the code #} 
```

# c# - XML 声音的字节形式

> ID：11739465
> 
> 赞同：0
> 
> 时间：2012-07-31T11:50:48.250
> 
> 标签：c#, xml, audio, soundplayer

我有一个 .wav 文件，我将此字节形式写入 XML。我想在我的表格上播放这首歌，但我不确定我是否正确并且它不起作用。Str 是我文件的字节形式。

```
byte[] soundBytes = Convert.FromBase64String(str);
MemoryStream ms = new MemoryStream(soundBytes, 0, soundBytes.Length);
ms.Write(soundBytes, 0, soundBytes.Length);
SoundPlayer ses = new SoundPlayer(ms);
ses.Play(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:51:27.233

我认为问题在于您正在`MemoryStream`使用缓冲区进行初始化，然后将相同的缓冲区写入流。因此，流从给定的数据缓冲区开始，然后您使用相同的缓冲区覆盖它，但在此过程中，您还将流中的当前位置更改到最后。

```
byte[] soundBytes = Convert.FromBase64String(str);
MemoryStream ms = new MemoryStream(soundBytes, 0, soundBytes.Length);
// ms.Position is 0, the beginning of the stream
ms.Write(soundBytes, 0, soundBytes.Length);
// ms.Position is soundBytes.Length, the end of the stream
SoundPlayer ses = new SoundPlayer(ms);
// ses tries to play from a stream with no more bytes to consume
ses.Play(); 
```

删除对的调用`ms.Write()`，看看它是否有效。

# magento - 如何测试 Magento POST 控制器操作 - 使用（或不使用）EcomDev PHPUnit 模块

> ID：11739470
> 
> 赞同：4
> 
> 时间：2012-07-31T11:50:54.020
> 
> 标签：magento, post, phpunit

有没有办法测试 Magento POST 控制器的动作？例如客户登录：

```
Mage_Customer_AccountController::loginPostAction() 
```

我正在使用 EcomDev_PHPUnit 模块进行测试。它适用于基本操作，但我无法调用 POST 操作。

```
$this->getRequest()->setMethod('POST');
// ivokes loginAction instead loginPostAction
$this->dispatch('customer/account/login');
// fails also
$this->dispatch('customer/account/loginPost');
// but this assert pass
$this->assertEquals('POST', $_SERVER['REQUEST_METHOD']); 
```

我想让测试或多或少像

```
// ... some setup
$this->getRequest()->setMethod('POST');
$this->dispatch('customer/account/login');
// since login uses singleton, then...
$session = Mage::getSingleton('customer/session');
$this->assertTrue($session->isLoggedIn()); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T12:28:38.667

在客户帐户控制器中 login 和 loginPost 是两个不同的操作。至于登录，您需要执行以下操作：

```
// Setting data for request
$this->getRequest()->setMethod('POST')
        ->setPost('login', array(
            'username' => 'customer@email.com',
            'password' => 'customer_password'
        ));

$this->dispatch('customer/account/loginpost'); // This will login customer via controller 
```

但是这种测试体只有在你需要测试登录过程时才需要，但如果只是想模拟客户登录，你可以创建一个特定客户登录的存根。我在几个项目中使用它。只需将此方法添加到您的测试用例中，然后在需要时使用。它将在单次测试运行中登录客户，并在之后拆除所有会话更改。

```
/**
 * Creates information in the session,
 * that customer is logged in
 *
 * @param string $customerEmail
 * @param string $customerPassword
 * @return Mage_Customer_Model_Session|PHPUnit_Framework_MockObject_MockObject
 */
protected function createCustomerSession($customerId, $storeId = null)
{
    // Create customer session mock, for making our session singleton isolated
    $customerSessionMock = $this->getModelMock('customer/session', array('renewSession'));
    $this->replaceByMock('singleton', 'customer/session', $customerSessionMock);

    if ($storeId === null) {
        $storeId = $this->app()->getAnyStoreView()->getCode();
    }

    $this->setCurrentStore($storeId);
    $customerSessionMock->loginById($customerId);

    return $customerSessionMock;
} 
```

在上面的代码中还模拟了 renewSession 方法，因为它使用的是直接 setcookie 函数，而不是 core/cookie 模型，所以在命令行中会产生错误。

真诚的，伊万

# mysql - JOIN 三个具有同一列别名的表的问题

> ID：11739480
> 
> 赞同：0
> 
> 时间：2012-07-31T11:51:35.250
> 
> 标签：mysql, inner-join

我有两张桌子：

> 1.  date_info 与列：- date_id,year
> 2.  具有以下列的交易：- date_id、amount、trx_type。

trx_type 只能是“贷方”或“借方”

我需要显示的是年份、贷方和借方作为结果。（如果 trx_type 是借方，则应称为借方，反之亦然）。

我可以使用以下方法获得其中之一。但不能加入它来获得这两个值。

```
select * 
from date_info as dt 
         INNER JOIN (select date_id,
                            amount as debit 
                       from transaction 
                      where tx_type = 'debit') as db 
              on dt.date_id = db.date_id; 
```

你能帮我么....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:04:05.507

尝试这个：

```
select D.[year]
,case when T.trx_type='debit' then amount end as 'debit'
,case when T.trx_type='credit' then amount end as 'credit'
from date_info D join transactions T
on D.date_id=T.date_id 
```

# asp.net-mvc-3 - 数据未填充在 MVC3 的部分视图中？

> ID：11739484
> 
> 赞同：1
> 
> 时间：2012-07-31T11:51:43.523
> 
> 标签：asp.net-mvc-3, partial-views

大家好，我有一个名为网格的视图页面和名为历史的部分视图，我想在我的网格页面中显示部分视图，我的页面中有视图，但历史页面中没有填充数据

```
 this is my GridsPage

      <%       
                   var grid = new WebGrid(source: Model, defaultSort: "ResourceName", rowsPerPage: 3);
                     using (Html.BeginForm())
                     { %>  

                         <%: Html.DropDownList("ResourceName", (SelectList)ViewBag.ResourceName, "--Select Project--")%>
                          <%: Html.ValidationMessage("ResourceName")%>  

                           <%: Html.DropDownList("ResourceID", (SelectList)ViewBag.ResourceID, "--Select Project--")%>
                           <%: Html.ValidationMessage("ResourceID")%> 

                           <%: Html.DropDownList("status", (SelectList)ViewBag.status, "--Select Project--")%>                               
                                <form action="Grids.aspx" method="post">
                                <p>
                                 <input type="submit" value="search" />
                               </p> 
                               </form>                          
                        <div id="grid">
                        <%:grid.GetHtml(
                         tableStyle: "listing-border", headerStyle: "gridhead", footerStyle: "paging", rowStyle: "td-dark", alternatingRowStyle: "td-light",                            
                         columns:grid.Columns(                             
                        grid.Column("ResourceID","Resource ID"),
                        grid.Column("ResourceName","Resource Name"),
                        grid.Column("EmployeEmailID","Employee ID"),
                        grid.Column("status","Status"),
                        grid.Column(
                        header: "",
                        style: "text-align-center",
                        format: (item) => Html.ActionLink("Edit", "Edit", new { ResourceID = item.ResourceID }))
                        ))%>
                        </div>
                        <%} %>

               //Rendering the Partial view here
                        <%:Html.Partial("History") %> 
```

这是我的部分观点

```
 <%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<Gridview_BugTracker.Models.BugTracker_DataHelper>>" %>                 
               <% foreach (var item in Model)
                  { %>                        
                     <div>
                      <%:Html.LabelForModel(item.EmployeName)%>
                     </div>                        
                     <div>
                     <%:Html.LabelForModel(item.Resolution)%>
                     </div> 
```

这是我的部分视图控制器

```
 [AcceptVerbs(HttpVerbs.Get)]
    public ActionResult History()
    {
        var getbugs = GetBugs();
        return View(getbugs);
    } 
```

它不会进入动作方法历史......任何人都可以纠正我我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:25:37.683

Html.Partial 不会调用控制器。您需要在调用中指定模型：

```
<%: Html.Partial("History", GetBugs()) %> 
```

另一个选项是 RenderAction，它将调用控制器，实际上是整个运行时（路由等）：

```
<%: Html.RenderAction("History", "ControllerName"); %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:25:16.300

在你的控制器中

```
[ChildActionOnly]
public ActionResult History()
{
    var getbugs = GetBugs();        
    return PartialView(getbugs);
} 
```

并在您的 aspx 页面中尝试此更改

```
 <%:Html.Action("History") %> 
```

尝试在您的代码中进行此更改

# android - 过滤要在图像适配器中使用的数组列表

> ID：11739495
> 
> 赞同：1
> 
> 时间：2012-07-31T11:52:14.237
> 
> 标签：android, image, listview, filter, adapter

所以我有一个`ImageAdapter`需要在 2`ListView`个不同的布局中使用。我将它用于第一个，然后想要过滤数组，将这些值放在另一个数组中，用于第二个列表视图。

我的图像适配器

```
package com.weinco.list;

import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;

import com.androidquery.AQuery;
import com.weinco.R;
import com.weinco.fragments.StandorteFragment;
import com.weinco.webservice.entity.Standort;

import com.weinco.webservice.entity.Standorts;

public class LocationMenuAdapter extends BaseAdapter {
private LayoutInflater mInflater;
private AQuery aQuery;
private Standorts standorts;
private Standort standort;
private StandorteFragment standorteFragment;

public LocationMenuAdapter(StandorteFragment standorteFragment, Standorts standorts) {

    this.standorteFragment = standorteFragment;
    this.standorts = standorts;
    this.aQuery = standorteFragment.aQuery;
    mInflater = LayoutInflater.from(standorteFragment.getActivity());

}

public int getCount() {
    return standorts.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public Standort getStandort(int i) {
    return standorts.get(i);
}

public View getView(int position, View convertView, ViewGroup parent) {

    ListContent holder = null;

    Standort standort = getStandort(position);

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.listviewinflate, null);

        holder = new ListContent();
        holder.text = (TextView) convertView.findViewById(R.id.TextView01);

        convertView.setTag(holder);
    } else {
        holder = (ListContent) convertView.getTag();

    }

        holder.text.setText(standort.Name);

    return convertView;
}

class ListContent {
    TextView text;

}
} 
```

我使用的功能

```
 loadLocationMenuList();
loadBussinessLunchLoc();

private void loadBussinessLunchLoc() {
  ServiceProxy.createWebServiceTask(getActivity(), new RemoteCallListener() {

   @Override
   public void onRemoteCallError(String response) {
    // TODO Auto-generated method stub

   }

   @Override
   public void onRemoteCallComplete(Object response) {
    Log.d("debug", "response is = " + response + "\t" + response.getClass());
    Standorts standorts = (Standorts) response;
    for(Standort standort : standorts)
      {
        if(standort.BusinessLunch==true){
           filteredstandorts.add(standort);
        }

      }

    locationMenuAdapter = new LocationMenuAdapter(StandorteFragment.this, filteredstandorts);
    menuItemListLoc2page.setAdapter(locationMenuAdapter);

   }

   @Override
   public void onNoInternetError() {
    // TODO Auto-generated method stub

   }

   @Override
   public void onNoAccess() {
    // TODO Auto-generated method stub

   }
  }, true).invokeGetStandorte();
 }

 private void loadLocationMenuList() {
  ServiceProxy.createWebServiceTask(getActivity(), new RemoteCallListener() {

   @Override
   public void onRemoteCallError(String response) {
    // TODO Auto-generated method stub

   }

   @Override
   public void onRemoteCallComplete(Object response) {
    Log.d("debug", "response is = " + response + "\t" + response.getClass());
    Standorts standorts = (Standorts) response;

    locationMenuAdapter = new LocationMenuAdapter(StandorteFragment.this, standorts);
    menuItemListLoc.setAdapter(locationMenuAdapter);

   }

   @Override
   public void onNoInternetError() {
    // TODO Auto-generated method stub

   }

   @Override
   public void onNoAccess() {
    // TODO Auto-generated method stub

   }
  }, true).invokeGetStandorte();
 } 
```

我得到下一个 LogCat 日志：

```
08-01 11:06:04.171: E/AndroidRuntime(16286): FATAL EXCEPTION: main
08-01 11:06:04.171: E/AndroidRuntime(16286): java.lang.NullPointerException
08-01 11:06:04.171: E/AndroidRuntime(16286):    at com.weinco.list.LocationMenuAdapter.getCount(LocationMenuAdapter.java:37)
08-01 11:06:04.171: E/AndroidRuntime(16286):    at android.widget.ListView.setAdapter(ListView.java:454)
08-01 11:06:04.171: E/AndroidRuntime(16286):    at com.weinco.fragments.StandorteFragment$10.onRemoteCallComplete(StandorteFragment.java:283)
08-01 11:06:04.171: E/AndroidRuntime(16286):    at com.weinco.webservice.CallWebServiceTask.onPostExecute(CallWebServiceTask.java:543)
08-01 11:06:04.171: E/AndroidRuntime(16286):    at com.weinco.webservice.CallWebServiceTask.onPostExecute(CallWebServiceTask.java:1)
08-01 11:06:04.171: E/AndroidRuntime(16286):    at android.os.AsyncTask.finish(AsyncTask.java:417)
08-01 11:06:04.171: E/AndroidRuntime(16286):    at android.os.AsyncTask.access$300(AsyncTask.java:127)
08-01 11:06:04.171: E/AndroidRuntime(16286):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
08-01 11:06:04.171: E/AndroidRuntime(16286):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 11:06:04.171: E/AndroidRuntime(16286):    at android.os.Looper.loop(Looper.java:130)
08-01 11:06:04.171: E/AndroidRuntime(16286):    at android.app.ActivityThread.main(ActivityThread.java:3744)
08-01 11:06:04.171: E/AndroidRuntime(16286):    at java.lang.reflect.Method.invokeNative(Native Method)
08-01 11:06:04.171: E/AndroidRuntime(16286):    at java.lang.reflect.Method.invoke(Method.java:507)
08-01 11:06:04.171: E/AndroidRuntime(16286):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
08-01 11:06:04.171: E/AndroidRuntime(16286):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
08-01 11:06:04.171: E/AndroidRuntime(16286):    at dalvik.system.NativeStart.main(Native Method) 
```

我不知道我必须做些什么来纠正这个问题，我在网上搜索了一些过滤器，但我发现更多的是 java 而不是 android，我真的能理解他们在做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:11:07.490

在文档中，他们告诉我将 BusinessLunch 设为布尔值，但从 web 服务调用中，他们向我发送了一个值为 0 或 1 的整数。这就是为什么它在编译时没有显示任何内容。

# c# - 由于大量服务操作，添加服务参考时出错

> ID：11739499
> 
> 赞同：4
> 
> 时间：2012-07-31T11:52:18.363
> 
> 标签：c#, .net, wcf

我有一份服务合同，其中包含足够数量的操作（约 40 次操作）。当我尝试从我的客户端项目（甚至从[WCF 测试客户端](http://msdn.microsoft.com/en-us/library/bb552364.aspx)）添加服务引用时，我收到一个错误：

> 错误：无法从 net.tcp://localhost:12345/DataProvider/mex 获取元数据 如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。有关启用元数据发布的帮助，请参阅位于 [http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata](http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata) Exchange Error URI: net.tcp://localhost:12345/DataProvider/mex的 MSDN 文档元数据包含无法解析的引用：“net.tcp://localhost:12345/DataProvider/mex”。XML 文档中存在错误。'type' 属性的值无效 - 'q2:PersonFilter' 是 'type' 属性的无效值。

**从这里开始的奇怪行为：**当什么都不做，只删除**一个**服务操作时，一切都很顺利 - 添加服务引用效果非常好。当然，我并没有尝试删除这 ~40 种方法中的所有方法，但我尝试了 ~5 种方法。**另一件重要的事情**- 我没有删除使用`PersonFilter`（错误消息中显示的类型）运行的方法。

我不知道如何解决这个问题。如果需要更多信息，请告诉我。

**更新#1**

所以，我刚刚尝试设置 mex 自定义绑定以增加默认配额：

```
 <customBinding>
    <binding name="mexBinding">
      <binaryMessageEncoding>
        <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" 
                      maxArrayLength="2147483647" maxBytesPerRead="2147483647" 
                      maxNameTableCharCount="2147483647" />
      </binaryMessageEncoding>
      <tcpTransport transferMode="Buffered" maxReceivedMessageSize="2147483647" 
                    maxBufferSize="2147483647" />
    </binding>
  </customBinding> 
```

和

```
 <service name="MyNamespace.DataService" behaviorConfiguration="myServiceBehavior">
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:12345/DataProvider/" />
      </baseAddresses>
    </host>

    <endpoint binding="netTcpBinding" bindingConfiguration="NetTcpBinding"
              contract="MyNamespace.IDataService" />
    <endpoint address="mex" binding="customBinding" bindingConfiguration="mexBinding"
              name="tcp" contract="IMetadataExchange" />
  </service> 
```

但这无济于事——同样的错误仍在发生。

**更新#2**

使用[ServiceModel 元数据实用工具 (Svcutil.exe)](http://msdn.microsoft.com/en-us/library/aa347733.aspx)我尝试从以下 3 个来源获取元数据：

1.  HTTP 主机
2.  TCP 主机
3.  直接组装

至于来源 1\. 和 3\. - 一切都很好。我能够获取元数据并生成客户端代码，但是当我`svcutil`通过 TCP 主机调用时，我得到：

> Microsoft (R) 服务模型元数据工具 [Microsoft (R) Windows (R) Communication Foundation，版本 4.0.30319.1] 版权所有 (c) Microsoft Corporation。版权所有。
> 
> 尝试使用 WS-Metadata Exchange 从“net.tcp://localhost:12345/DataProvider/mex”下载元数据。此 URL 不支持 DISCO。
> 
> Microsoft (R) 服务模型元数据工具 [Microsoft (R) Windows (R) Communication Foundation，版本 4.0.30319.1] 版权所有 (c) Microsoft Corporation。版权所有。
> 
> 错误：无法从 net.tcp://localhost:12345/DataProvider/mex 获取元数据
> 
> 如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。有关启用元数据发布的帮助，请参阅位于 [http://go.microsoft.com/fwlink/?LinkId=65455](http://go.microsoft.com/fwlink/?LinkId=65455)的 MSDN 文档。
> 
> WS 元数据交换错误 URI：net.tcp://localhost:12345/DataProvider/mex
> 
> ```
> Metadata contains a reference that cannot be resolved: 'net.tcp://12345/DataProvider/Management/mex'.
> 
> There is an error in the XML document.
> 
> The value for the 'type' attribute is invalid - 'q2:PersonFilter' is an invalid value for the 'type' attribute. 
> ```
> 
> 如果您需要更多帮助，请输入“svcutil /?”

我仍然不知道我的 wcf 服务或其配置有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T20:29:25.143

通常更容易让服务首先使用基本的 http 绑定，然后再将其更改为 net tcp。

除了定义 mex 端点之外，您还需要启用元数据交换：

```
<behaviors> 
  <serviceBehaviors> 
    <behavior name="myServiceBehavior"> 
        <serviceDebug includeExceptionDetailInFaults="True" /> 
        <serviceMetadata /> 
    </behavior> 
   </serviceBehaviors> 
 </behaviors> 
```

如果没有该 `<serviceMetadata />` 元素，则 mex 端点将无法工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:34:36.707

好吧，我很久以前就找到了解决方案，但我完全忘记发布答案了。

因此，我在 Visual Studio 配置文件中做了一些更改`devenv.exe.config`。我刚刚添加了`system.serviceModel`如下部分：

```
<system.serviceModel>
    <client>
        <endpoint binding="netTcpBinding" bindingConfiguration="GenericBinding" contract="IMetadataExchange" name="net.tcp" />
    </client>
    <bindings>
        <netTcpBinding>
            <binding name="GenericBinding"
                     maxBufferPoolSize="2147483647" maxBufferSize="2147483647"
                     maxReceivedMessageSize="2147483647">
                <readerQuotas maxDepth="2147483647"
                              maxStringContentLength="2147483647"
                              maxArrayLength="2147483647"
                              maxBytesPerRead="2147483647"
                              maxNameTableCharCount="2147483647" />
                <security mode="None" />
            </binding>
        </netTcpBinding>
    </bindings>
</system.serviceModel> 
```

现在一切正常，没有任何问题。

# javascript - Google Maps API 移除 TRANSIT 栏

> ID：11739504
> 
> 赞同：-1
> 
> 时间：2012-07-31T11:52:38.667
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在使用 Google API v3 及其方向服务（使用 TRANSIT 参数搜索路线）。想要移除所有条形（如 513C 或 164A）并且不知道该怎么做。*通过添加suppressMarkers:true*删除了标记。请问有什么带传输条的解决方案吗？

![在此处输入图像描述](../Images/ce28e2f7e018dcd95a123ed2c9c99f5a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:12:30.110

得到解决方案。收到回复后需要清除

```
response.routes[0].legs[0].steps.transit=null 
```

# asp.net - ASP.NET MVC 1.0 - 错误 404

> ID：11739515
> 
> 赞同：0
> 
> 时间：2012-07-31T11:52:59.783
> 
> 标签：asp.net, asp.net-mvc, iis-6

我的一位同事错误地替换了我们备份中没有的 web.config 文件，现在我们在 IIS6 上运行的旧 MVC 1.0 站点显示 404 错误而不是页面。

当前的 web.config 如下所示：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <httpHandlers>
      <add path="*" verb="*"
          type="System.Web.HttpNotFoundHandler"/>
    </httpHandlers>
    <!--
        Enabling request validation in view pages would cause validation to occur
        after the input has already been processed by the controller. By default
        MVC performs request validation before a controller processes the input.
        To change this behavior apply the ValidateInputAttribute to a
        controller or action.
    -->
    <pages
        validateRequest="false"
        pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <controls>
        <add assembly="System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
      </controls>
    </pages>
  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <handlers>
      <remove name="BlockViewHandler"/>
      <add name="BlockViewHandler" path="*" verb="*" preCondition="integratedMode" type="System.Web.HttpNotFoundHandler"/>
    </handlers>
  </system.webServer>
</configuration> 
```

并且有一个 global.asax 文件可以帮助将路由映射到适当的 .aspx 页面（这还没有被触及，直到 1 小时前它还具有完整的功能）。

关于如何解决这个问题的任何想法？

**编辑**：我还应该指定 /Views 下的 web.config 也被替换为与根目录中的相同的 web.config。最后，让我补充一点，该站点位于共享主机中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:37:16.130

我认为您最好的选择可能是在 VS 中创建一个新的空白 MVC 1.0 站点，复制任何 appSettings 和 connectionStrings，然后进行比较以查看任何剩余的差异。自从我查看 MVC 1 以来已经有一段时间了，但是您列出的配置对我来说看起来不错。您还可以查看 Views 文件夹中的 web.config 应该是什么样子，因为您不太可能更改它。

此外，如果您得到 404，您应该确保[您在 IIS6](http://haacked.com/archive/2008/11/25/asp.net-mvc-on-iis-6-walkthrough.aspx)中的通配符映射仍然设置。

# javascript - jQuery datepicker 标记自定义

> ID：11739518
> 
> 赞同：0
> 
> 时间：2012-07-31T11:53:10.213
> 
> 标签：javascript, jquery, datepicker

我怎样才能做到这一点？我想利用这里提供的 jQuery UI 而不重写我自己的日历。

我需要能够自定义布局（物理表布局）。我实际上需要改变日历的呈现方式（不是风格明智）。

我需要一些方法来在日期选择器上实现装饰器模式。

我尝试使用 .insertAfter 进行注入，但这对我来说似乎效果不佳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:55:12.080

我认为您几乎被 jquery calandar 的默认功能所困扰。然而，它是非常可修改的，所以我当然会建议您检查所有选项。

[http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

如果默认的 jquery ui 日历不适合您的需要，那么还有很多可自定义的第三方日历，很容易通过 google 找到，这里有一个准备好的：

[http://www.queness.com/post/656/10-beautiful-jquery-and-mootool-calendar-plugins](http://www.queness.com/post/656/10-beautiful-jquery-and-mootool-calendar-plugins)

如果你真的想在生成的代码中注入和修改对象，你可以，但我当然不建议这样做，你不知道如果 jQuery 升级你的代码是否会继续工作并且它不会是微不足道的，你可能会更好然后编写自己的小部件。

# javascript - ios - 从浏览器加载 dll

> ID：11739525
> 
> 赞同：-2
> 
> 时间：2012-07-31T11:53:32.870
> 
> 标签：javascript, ios

我在另一个线程中看到可以从浏览器打开应用程序。是否可以加载库并从脚本中调用它的函数？

10xs，那鸿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:57:29.480

iOS 不使用 dll 文件作为共享库代码，而是使用 dylib 文件。（如 MacOS）。但这是故事的一部分。你不能只是“调用共享库”代码——你必须有一个应用程序来执行你想要的操作。

如果您创建具有 webview 组件的应用程序，则存在允许您从 webview 与核心操作系统交互的方法，但仅限于自定义应用程序 - 而不是来自移动 Safari 中加载的标准网页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:56:24.800

DLL，即动态链接库，是一项 Microsoft 技术，与 Windows 相关联。据我所知，iOS 上不存在 DLL。

# c - 将 mallopt M_CHECK_ACTION 错误输出到日志文件

> ID：11739528
> 
> 赞同：1
> 
> 时间：2012-07-31T11:53:44.023
> 
> 标签：c, io-redirection, logfile, double-free

我正在尝试使用 mallopt(M_CHECK_ACTION, 3) 保护我的进程免受可能导致双重释放场景的潜在恶意代码的影响。

有没有办法在双重释放到日志文件的情况下输出错误？我的进程已经重定向了标准错误（即“错误”调用被记录到一个文件中），但是这个特定的错误被打印到屏幕上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:12:43.633

尝试使用 LIBC_FATAL_STDERR_ 环境变量。
`# LIBC_FATAL_STDERR_="yes" ./<you-program-name>`

# android - 从覆盖的 getApplication() 返回共享静态是否安全？

> ID：11739536
> 
> 赞同：3
> 
> 时间：2012-07-31T11:54:48.697
> 
> 标签：android, singleton, android-activity, activity-lifecycle

我试图限制一系列应用程序，使用相同的活动（在所有人共享的库项目中），以便一次只能运行**一个**这样的应用程序。

在我尝试学习如何去做的第一轮尝试中，我了解到：

1.  android:launchMode="singleTask" 不会成功。
2.  `setVisible(true/false)`onResume()/onPause() 分别是判断**我的**应用程序是否正在运行的[最佳方法。](https://stackoverflow.com/a/5862048/869501)但是一旦第二个实例知道第一个实例正在运行，我该怎么办？？？

 **因此，我正在考虑通过覆盖[Activity.getApplication()](http://developer.android.com/reference/android/app/Activity.html#getApplication%28%29)并返回共享静态来始终返回相同的实例来欺骗系统：

```
public class MyApplication extends Application 
{   
    private static MyApplication s_instance;

    public MyApplication()
    {
        s_instance = this;
    }

    public static MyApplication getApplication()
    {
        return s_instance;
    }
} 
```

（这个想法[归功于@inazaruk](https://stackoverflow.com/a/6775509/869501)）

但是，就像前面提到的可见性解决方案一样，我现在该怎么办？

系统本身是否使用[getApplication()](http://developer.android.com/reference/android/app/Activity.html#getApplication%28%29)来确定是启动一个新实例还是将其带到堆栈的前面？这安全吗？

如果答案是“否”，我可以调用[Activity.finish()](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)来不让第二个活动甚至不开始吗？如果是这样，我在哪里可以做到这一点？

1.  就在[Activity.onCreate()](http://developer.android.com/reference/android/app/Activity.html#onCreate%28android.os.Bundle%29)中？
2.  [活动.onResume()](http://developer.android.com/reference/android/app/Activity.html#onResume%28%29)？
3.  [我的应用程序（）](http://developer.android.com/reference/android/app/Application.html#Application%28%29)？（构造函数）
4.  更好的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:38:00.313

我有点困惑。您说的是一系列应用程序，但这些应用程序是如何打包的？在 Android 上，一个 APK 包含一个应用程序。该应用程序具有唯一的包名称和唯一的用户 ID，并在其自己的进程中运行。这意味着如果您在 2 个单独的包中有 2 个应用程序，它们将在 2 个单独的进程中运行，因此从 getApplication() 返回静态实例对您没有任何好处。

这是一个可能对您有用的想法：

每个使用此共享库的应用程序都可以广播一个粘性 Intent，其中包含作为**Extra**运行的应用程序的包名称。

每个使用共享库的应用程序都可以为这个粘性 Intent 注册一个监听器，如果它得到一个监听器，它可以查看该应用程序（**Extra**中的那个）当前是否正在运行。如果该应用程序正在运行，它可能会拒绝运行（或警告用户并询问他是否应该运行，或其他）。

这只是一个想法，我还没有真正尝试过，但我认为这可以做你想做的事。**

# c# - C# - 使用程序打开文本文件

> ID：11739537
> 
> 赞同：1
> 
> 时间：2012-07-31T11:55:02.630
> 
> 标签：c#, file, text

我正在寻找的是所有文本编辑器都具有的功能，即右键单击 Windows 中的文件并选择打开方式，然后选择文本编辑器并按确定。然后文件中的文本应出现在文本框中。我到处搜索，但我还没有找到如何做到这一点。

编辑：一些误解，我知道如何将它设置为 Windows 中的默认程序，但我需要知道如何让它用我的程序打开文本文件，然后将该文本文件加载到 Richtextbox。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:21:15.047

您需要检查`Environment.GetCommandLineArgs()`发送到程序的命令行参数。一旦您将程序添加到“打开方式...”并使用它打开一个文件或一组文件，它将打开您的程序，发送在 Windows 资源管理器中选择的文件路径数组。

您应该处理选择多个文件的情况，因为它们将被传入。我链接的那个方法返回一个字符串数组。如果你愿意，你可以只拿第一个而忽略其余的。但还要确保在检查第一个条目之前进行测试以查看是否有任何条目。

```
protected void Form_Load()
{
    var args = Environment.GetCommandLineArgs();
    if (args.Length > 0)
    {
        //open the file here...
    }
} 
```

# cassandra - 如何解决 cassandra1.1.2 中的 jna not found 问题

> ID：11739538
> 
> 赞同：5
> 
> 时间：2012-07-31T11:55:02.510
> 
> 标签：cassandra

我在 ubuntu 操作系统上使用 cassandra 1.1.2。我在开始时看到以下日志：

```
INFO 14:42:59,319 JNA not found. Native methods will be disabled. 
```

我发现[了这个问题](https://stackoverflow.com/questions/9561189/why-still-getting-jna-error-on-cassandra-startup-even-the-jna-jar-and-platform)，但我不确定版本以及我应该在哪里找到这些文件。

有人可以描述解决此问题的确切步骤。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-05T18:34:33.657

做这个 ：

```
$ ln -s /usr/share/java/jna.jar /usr/share/cassandra/lib 
```

它会起作用 ;) 它会转向 Jna mlockall ;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T12:06:20.113

首先安装`lib-jna`：

```
sudo apt-get install libjna-java 
```

接下来，在您的 cassandra lib 目录中创建一个符号链接（假设`$CASSANDRA_HOME`是您的安装目录）：

```
ln -s /usr/share/java/jna.jar $CASSANDRA_HOME/lib/ 
```

Cassandra 启动 ( `JNA not found. Native methods will be disabled.`) 上的 JNA 日志消息不应消失，Cassandra 将使用 JNA。

# batch-file - 批量获取变量的值

> ID：11739543
> 
> 赞同：0
> 
> 时间：2012-07-31T11:55:19.193
> 
> 标签：batch-file

我有以下代码：

```
for /f "tokens=*" %%p in (input.txt) do (
echo %%p
cd %%p
set /a c = 0
for %%f in (*) do (
echo %%f
if not exist *test*.* (
set /a c += 1
)
)
if %%c GTR 0 echo %%p >>folders.txt
cd ..
) 
```

但是最后一个 if 语句不起作用。我想知道我必须做什么才能访问我在第一次设置的变量 c 。我尝试过不同的组合，比如 !c! 或 %c% 但似乎没有任何效果。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:02:54.390

你在这里有几个问题：

1.  `=`in周围不能有空格`set`：

    ```
    set c=0
    set /a c+=1 
    ```

    否则，您将创建一个名称以空格结尾的变量。

2.  您不能在块中设置变量并在不使用延迟扩展的情况下再次在同一块中使用它们。所以你需要

    ```
    setlocal enabledelayedexpansion 
    ```

    在批处理文件的开头，然后使用`!c!`代替`%%c`（这本身就是错误的，因为`%%x`表单的变量是`for`循环变量，而不是您设置的环境变量`set`- 但`%%p`它是正确的，因为它*是*一个`for`循环变量）。

    延迟扩展是必要的，因为将在*解析*`cmd`语句后立即将变量扩展为其值，而不是直接在其执行之前。就循环而言，整个循环块是一条语句，因此当循环运行时，任何环境变量都已经扩展为它们的值。*`for``cmd`*

 *所以你会以

```
setlocal enabledelayedexpansion
for /f "tokens=*" %%p in (input.txt) do (
  echo %%p
  pushd %%p
  set /a c=0
  for %%f in (*) do (
    echo %%f
    if not exist *test*.* (
      set /a c+=1
    )
  )
  if !c! GTR 0 echo %%p >>folders.txt
  popd
) 
```

（我还使用`pushd`/`popd`而不是`cd`更改目录，这更好一些。）*

# text - 如何在 Pharo 1.4 中正确解码来自 FileSystemReadStream 的文本文件

> ID：11739548
> 
> 赞同：6
> 
> 时间：2012-07-31T11:55:27.407
> 
> 标签：text, character-encoding, smalltalk, pharo

在 Pharo 1.4 中，我在一个文本文件上打开了一个 FileSystemReadStream，并通过`aFileSystemReadStream contents asString`.

我的文本文件是 UTF8 编码的，并且有那些 Windows (CR LF) 换行符。

生成的 Pharo 字符串每个文本文件行有两个换行符和一些奇怪的字符，而不是像 Ä、Ö、Ü 等德语变音符号。

如何正确解码 Pharo 中的文本文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T12:04:48.160

不要在 1.4 中使用 FileSystemReadStreams，它们不完整且有缺陷；）。请改用 FileStream。

```
multiByteFileStream := FileStream fileNamed: '/foo/bar.txt'.
multiByteFileStream contents. 
```

它将返回一个`MultiByteFileStream`您可以设置行尾约定和编码的位置：

```
multiByteFileStream 
    "possible values are: #cr #lf #crlf"
    lineEndConvention: #cr;
    "set a specific converter, see subclasses of TextConverter"
    converter: UTF8TextConverter new. 
```

# java - GlassFish“ogs-3.1.2.2-windows.exe”和“ogs-3.1.2.2-windows-ml.exe”文件之间的区别

> ID：11739556
> 
> 赞同：0
> 
> 时间：2012-07-31T11:55:53.340
> 
> 标签：java, glassfish, glassfish-3

**GlassFish** ***ogs*** *-3.1.2.2-windows.exe*和*ogs-3.1.2.2-windows-ml.exe [* **1] 文件有什么区别？**

 **[1]：[http ://www.oracle.com/technetwork/java/javaee/downloads/ogs-3-1-1-downloads-439803.html](http://www.oracle.com/technetwork/java/javaee/downloads/ogs-3-1-1-downloads-439803.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:58:18.723

“ml”后缀表示“多语言”。

从 Glassfish 网页：

> 多语言支持可用于法语、德语、西班牙语、日语、简体中文、繁体中文和韩语。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T11:58:27.757

带有*ml*的一个是多语言的。只需检查[此](http://glassfish.java.net/downloads/3.1.2.2-final.html)页面中的链接即可查看说明。**

# ios - 核心文本 - 字形高度

> ID：11739561
> 
> 赞同：8
> 
> 时间：2012-07-31T11:56:27.953
> 
> 标签：ios, cocoa, core-graphics, core-text

我有 2 个属性字符串说“A”和“。”

我需要计算每个字符串的高度。目前返回的高度对于两者都是相同的，它似乎返回给定字体中最高字符的最大可能高度（即使该字符不存在于字符串中）。

我想获得每个字符的确切像素高度，以便我可以调整它们周围的视图大小以紧贴字符（字形）。我试过使用 CTFramesetterSuggestFrameSizeWithConstraints() 和 CTLineGetTypographicBounds() 但它返回一个类似于属性字符串大小方法的数字。

将不胜感激有关如何进行此操作的任何提示！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-07T12:31:32.713

最后到达那里，你可以这样做：

```
// Create an attributed string
CTLineRef line = CTLineCreateWithAttributedString(_string);

// Get an array of glyph runs from the line
CFArrayRef runArray = CTLineGetGlyphRuns(line);

// loop through each run in the array      
CTRunRef run = ....

// Get the range of the run         
CFRange range = CFRangeMake...

// Use CTRunGetImageBounds                                  
CGRect glyphRect = CTRunGetImageBounds(run, context, range);

// glyphRect now contains the bounds of the glyph run, if the string is just 1 character you have the correct dimensions of that character. 
```

# c# - L2S：将 Sql 查询转换为 Linq

> ID：11739562
> 
> 赞同：1
> 
> 时间：2012-07-31T11:56:30.857
> 
> 标签：c#, asp.net, linq, linq-to-sql

我正在尝试将此 SQL 查询转换为 LINQ，但未能这样做.. 任何帮助表示赞赏...

```
SELECT [t0].id,
   sum([t1].[total_Statements]) AS [value],
   sum( [t1].[totalpage] - [t1].[total_Statements]) AS [value2],
   sum( [t1].[total_bad]) AS [value3],
   [t0].[biller_id]
    FROM [dbo].[upload_t] AS [t0]
    left JOIN [dbo].[printer] AS [t1] ON 
    ((CONVERT(NVarChar,[t0].[id])) = [t1].bill])
    where (([t0].[biller_id] = 10) 
    group by [t0].[biller_id],[t0].id,[t0].[date] 
   ORDER BY [t0].[date] DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:09:38.137

您可以下载[Linqer](http://www.sqltolinq.com/)的试用版。这将帮助您将 SQL 查询转换为 Linq 查询，并且在此过程中您可能还会学习 Linq。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:10:31.997

```
var query = 
ctx.upload_t.Where(w1=>w1.biller_id==10)
.join(ctx.printer, t0=>t0.id.ToString(), t1=>t1.bill.ToString(),
(t0,t1) => new {t0.id, t0.biller_id, t1.total_statements, t1.total_page, t1.total_bad,t0.date})
.GroupBy(g1=>new {t0.biller_id,t0.id,t0.date)
.Select(s1=>new{
   s1.Key.id, 
   value=s1.Sum(s2=>s2.total_statements),
   value2=s1.Sum(s2=>s2.total_page-s2.total_statements),
   value3=s1.Sum(s2=>s2.total_bad),
   s1.Key.biller_id, s1.Key.date})
.OrderBy(o1=>o1.date) 
```

如果您可以使用额外的日期列...如果不能，请稍后再进行选择。

# delphi - 为什么 SetTimeZoneInformation 在 Windows XP 中不起作用？

> ID：11739563
> 
> 赞同：0
> 
> 时间：2012-07-31T11:56:31.590
> 
> 标签：delphi, windows-xp, timezone

我有一个德尔福程序，将窗口的时区信息设置为特定的开始和结束日期。它在 Windows 7、vista 和 Server 2008 中完美运行。但在 XP 和 Server 2003 等早期 Windows 版本中却不行。我很好奇我的代码有错误还是 XP 问题？

这是我的代码：

```
program SetTimeZoneInfo;

{$APPTYPE CONSOLE}

uses
  SysUtils,
  Messages,
  windows;

const
  SE_TIME_ZONE_NAME = 'SeTimeZonePrivilege';
  SE_SYSTEMTIME_NAME = 'SeSystemtimePrivilege';

function NTSetPrivilege(sPrivilege: string; bEnabled: Boolean): Boolean;
var
  hToken: THandle;
  TokenPriv: TOKEN_PRIVILEGES;
  PrevTokenPriv: TOKEN_PRIVILEGES;
  ReturnLength: Cardinal;
begin
  Result := True;
  if not (Win32Platform = VER_PLATFORM_WIN32_NT) then Exit;

  // obtain the processes token
  if OpenProcessToken(GetCurrentProcess(),
    TOKEN_ADJUST_PRIVILEGES or TOKEN_QUERY, hToken) then
  begin
    try
      // Get the locally unique identifier (LUID) .
      if LookupPrivilegeValue(nil, PChar(sPrivilege),
        TokenPriv.Privileges[0].Luid) then
      begin
        TokenPriv.PrivilegeCount := 1; // one privilege to set

        case bEnabled of
          True: TokenPriv.Privileges[0].Attributes  := SE_PRIVILEGE_ENABLED;
          False: TokenPriv.Privileges[0].Attributes := 0;
        end;

        ReturnLength := 0; // replaces a var parameter
        PrevTokenPriv := TokenPriv;

        // enable or disable the privilege

        AdjustTokenPrivileges(hToken, False, TokenPriv, SizeOf(PrevTokenPriv),
          PrevTokenPriv, ReturnLength);
      end;
    finally
      CloseHandle(hToken);
    end;
  end;
  // test the return value of AdjustTokenPrivileges.
  Result := GetLastError = ERROR_SUCCESS;
  if not Result then
    raise Exception.Create(SysErrorMessage(GetLastError));
end;

var
  tzi: TTimeZoneInformation;
  lpwdResult, LHResult: Cardinal;
begin
  if Win32MajorVersion >= 6 then
  begin
    Writeln('NTSetPrivilege SE_TIME_ZONE_NAME enabled ? ' + BoolToStr(NTSetPrivilege(SE_TIME_ZONE_NAME, True), True));
  end;
  Writeln('NTSetPrivilege SE_TIME_ZONE_NAME enabled ? ' + BoolToStr(NTSetPrivilege(SE_SYSTEMTIME_NAME, True), True));

  tzi.Bias:= -210;

  tzi.DaylightDate.wYear:= 2012;
  tzi.DaylightDate.wMonth:= 3;
  tzi.DaylightDate.wDay:= 20;
  tzi.DaylightDate.wHour:= 23;
  tzi.DaylightDate.wMinute:= 59;
  tzi.DaylightDate.wSecond:= 59;
  tzi.DaylightBias:= -60;

  tzi.StandardDate.wYear:= 2012;
  tzi.StandardDate.wMonth:= 9;
  tzi.StandardDate.wDay:= 20;
  tzi.DaylightDate.wHour:= 23;
  tzi.DaylightDate.wMinute:= 59;
  tzi.DaylightDate.wSecond:= 59;
  tzi.StandardBias:= 0;

  if not SetTimeZoneInformation(tzi) then
      Writeln('SetTimeZoneInformation Error Message: '+ SysErrorMessage(GetLastError))
  else
    Writeln('SetTimeZoneInformation : Success');

  LHResult:= SendMessageTimeout(
                      HWND_BROADCAST,   // reciever window handle
                      WM_SETTINGCHANGE, // message
                      0,                // WParam
                      0,                // LParam
                      SMTO_NORMAL,      // return if reciever hange
                      5,                // timeout in seconds
                      lpwdResult        // result
                      );
  if LHResult = 0 then
    Writeln('SendMessageTimeout Error Message: '+ SysErrorMessage(GetLastError))
  else
    Writeln('SendMessageTimeout : Success');

  if Win32MajorVersion >= 6 then
    Writeln('NTSetPrivilege SE_TIME_ZONE_NAME disabled ? ' + BoolToStr(NTSetPrivilege(SE_TIME_ZONE_NAME, False), True));
  Writeln('NTSetPrivilege SE_TIME_ZONE_NAME disabled ? ' + BoolToStr(NTSetPrivilege(SE_SYSTEMTIME_NAME, False), True));
  Readln;
end. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T18:11:40.957

Windows 为新版本时，使用：SetDynamicTimeZoneInformation。如果它是旧的（例如：XP），请像以前一样使用 SetTimeZoneInformation。告诉我它是否解决了问题。我也必须做类似的事情。谢谢。罗德里戈·皮门塔·卡瓦略

# asp.net - ASP.net 中“网站项目”的 App_code 文件夹中的公共函数和类是否不正确？

> ID：11739571
> 
> 赞同：2
> 
> 时间：2012-07-31T11:56:44.007
> 
> 标签：asp.net, visual-studio, public, asp.net-webpages

我一直在做一个 ASP.net 项目，之前，我对“网站项目”和“Web 应用程序项目”一无所知。我认为两者是一样的，所以我选择了网站，现在我希望我能够使用命名空间。

反正。现在，我需要在所有页面中使用一些全局函数和变量。所以我认为唯一的方法是在 App_code 目录中创建一个类，并通过在需要的地方实例化一个对象来使用它的功能。这是唯一的出路，对吧？

我注意到我只能保持类及其函数公开，甚至不能保护。我只是想知道使用公共类是否存在任何安全漏洞。任何人都可以涂一些颜色吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:06:51.330

关于这个特定主题的[MSDN 文档](http://msdn.microsoft.com/en-us/library/t990ks23.aspx)实际上非常好：

> **App_Code 文件夹的安全性**
> 
> App_Code 文件夹中代码的安全问题与 Bin 文件夹中代码的安全问题基本相同——代码在运行时编译成程序集。一个缓解因素是您可以阅读 App_Code 文件夹中文件的源代码。但是，如果您不完全理解代码，它仍然可能存在安全风险。因此，对待 App_Code 文件夹中的源代码，就像对待来自同一源的编译代码一样。

仅当您有权访问您的 App_Code 文件夹（他们通常不应该）时，阅读源代码的问题才有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:24:26.663

访问器（公共的、受保护的、私有的等）与安全性无关。他们确定范围。

您所做的 - 实用程序类的公共方法非常常见。.NET 框架充满了它们。例如，查看 System.IO.File 类或 System.Text.RegularExpressions.Regex 类。不存在安全漏洞。

# jquery - 使用 jQuery 获取选择的选项文本时遇到问题

> ID：11739574
> 
> 赞同：0
> 
> 时间：2012-07-31T11:56:54.670
> 
> 标签：jquery, html, forms

我想做的是复制我以前在某处看到的表单交互体验......

当您单击“文本”时，它会成为用户编辑文本的文本字段。

标签：文本（点击）标签：输入[文本]。然后 blah.change(){ 提交 };

```
$('#basicinfo div').click(function(){
    $('#basicinfo select').hide();
    $('#basicinfo div').show();
    $(this).hide();
    $(this).siblings('select').show();
});
$('#basicinfo select').blur(function(){
    $('#basicinfo select').hide();
    $('#basicinfo div').show();
});
$('#basicinfo select').change(function(){
    $(this).siblings('div').html(***$(this).text()***);
    $('#basicinfo').submit();
});

<form id="basicinfo">
    <label>Gender</label> <div>Male</div>
    <select name="1">
        <option value="1">Male</option>
        <option value="2">Female</option>
    </select>
    <label>Age</label> <div>23years</div>
    <select name="2">
        <option value="21">21 years</option>
        <option value="22">22 years</option>
        <option value="23">23 years</option>
    </select>
</form> 
```

使用 .val() 或 .text() 没有用，希望有人知道我需要什么:)

PS。我试过 $(this+" option:selected").text() 但没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:04:11.920

> PS。我试过 $(this+" option:selected").text() 但没有用

`this`是一个对象而不是一个字符串。尝试

```
$(this).find('option:selected').text() 
```

另外我不知道模糊事件是否以及何时在不同的浏览器中触发，但我想它是不一致的。

我个人会使用单独的“确认”和“取消”按钮，以便用户可以决定何时保存或不保存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:02:51.827

试试这个 - [http://jsfiddle.net/tQxmN/1/](http://jsfiddle.net/tQxmN/1/)

```
$('#basicinfo select').on("change", function(){
    alert( $(this).find("option:selected").text() );
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T12:04:03.853

```
$('#basicinfo select').change(function()
{
    var optionValue = $(this).find("option:selected").text();

    $(this).siblings('div').html( optionValue );

    $('#basicinfo').submit();
}); 
```

# ios - iOS 应用内购买：Apple 评论者会测试实时环境还是沙盒环境？

> ID：11739576
> 
> 赞同：28
> 
> 时间：2012-07-31T11:56:57.497
> 
> 标签：ios, in-app-purchase, sandbox

我使用应用内付款来销售游戏内消耗品。成功付款后，我将付款收据转发到我的后端，该后端会通过 iTunes 付款后端验证收据。这在沙盒环境中完美运行。

现在我提交了我的应用程序，以便它可以得到 Apple 人员的批准并在 App Store 中发布。当然，我确保我的后端将使用 iTunes 后端的生产环境验证付款收据，因为我希望 Apple 人员在生产模式下测试该应用程序。但是，该应用程序被拒绝了。作为一个原因，我被告知购买我的消耗品不起作用（由于收据无效而被我的后端拒绝）。检查我的日志后，我看到 3 次尝试购买。我解码了使用的收据，发现所有这些都是“环境”=“沙盒”。

这是否意味着 Apple 在沙盒模式下测试提交的应用程序？那会很疯狂！我应该在我的生产环境中允许沙盒支付还是什么？关于这件事的任何事实？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-31T12:54:22.633

Thomas，您绝对应该阅读 Apple 关于应用内购买的常见问题解答： [https ://developer.apple.com/library/content/technotes/tn2413/_index.html#//apple_ref/doc/uid/DTS40016228-CH1-RECEIPTURL](https://developer.apple.com/library/content/technotes/tn2413/_index.html#//apple_ref/doc/uid/DTS40016228-CH1-RECEIPTURL)

> 始终首先使用生产 URL 验证您的收据；如果您收到 21007 状态代码，请继续使用沙盒 URL 进行验证。遵循这种方法可确保您在沙盒中测试或审查您的应用程序或在 App Store 中运行时不必在 URL 之间切换。

所以，是的，他们有点疯狂。但我们知道，不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-16T18:46:14.337

@Jan P 的回答是正确的。如果您正在寻找一个快速的“是/否”答案，FAQ 中的具体答案是；

您应该在审核应用程序时使用沙盒。

*(15) 我应该使用什么网址来验证我的收据？在沙箱中测试您的应用程序**和审查您的应用**程序时，请使用沙箱 URL [https://sandbox.itunes.apple.com/verifyReceipt 。](https://sandbox.itunes.apple.com/verifyReceipt)*

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-16T15:58:53.427

快速回答：如果您的应用正在审核中，请使用沙盒。

> 我应该使用什么网址来验证我的收据？在沙箱中测试您的应用程序和审查您的应用程序时，请使用沙箱 URL [https://sandbox.itunes.apple.com/verifyReceipt 。](https://sandbox.itunes.apple.com/verifyReceipt)
> 
> 一旦您的应用程序在 App Store 中上线，请使用生产 URL [https://buy.itunes.apple.com/verifyReceipt 。](https://buy.itunes.apple.com/verifyReceipt)**

# ios - 自定义 TabelView 单元格在滚动时消失的单元格按钮

> ID：11739581
> 
> 赞同：0
> 
> 时间：2012-07-31T11:57:17.283
> 
> 标签：ios, uitableview

我在表格视图中使用自定义表格单元格，它由 2 个标签和两个按钮和 1 个文本字段组成，它可以正常工作，但是当我向上/向下滚动表格视图时，问题就出现了，顶部单元格中的一些按钮消失了，再也不会回来了...请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T06:32:45.177

使用以下代码解决您的问题。这`cell`是您的自定义单元格的对象

```
cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];

    if (cell) {
        cell=nil;
        [cell release];
        [cell removeFromSuperview];
    }
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier] autorelease];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:06:54.180

在每个卷轴`cellForRowAtIndexPath`中由`UITableView`. 如果有任何问题，请检查此功能。

# solr - 如何在 Apache solr 上进行构面组查询

> ID：11739586
> 
> 赞同：3
> 
> 时间：2012-07-31T11:57:42.293
> 
> 标签：solr

我正在对 solr 进行构面查询。这给了我构面及其每个项目的计数...但是现在我想对构面执行组查询。这使我根据组进行计数...

## 例子

下面是数据

Item1：耐克鞋（尺码：8,9,10） Item2：锐步鞋（尺码：8,9,10）

现在在这种情况下，我的品牌方面查询返回结果如下

*   耐克：3

*   锐步：3

我需要的结果是

*   耐克：1
*   锐步：1

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:04:47.997

[您是否按照此处](http://wiki.apache.org/solr/FieldCollapsing)的说明启用了 group.facet=true 。你至少需要 3.3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-13T06:42:52.667

[http://1XX.XXX.XXX.XXX:8080/solr/autocomplete/select?q=displayterm:new&wt=json&indent=true&q.op=and&fl=displayterm&group=true&group.field=displayterm](http://1XX.XXX.XXX.XXX:8080/solr/autocomplete/select?q=displayterm:new&wt=json&indent=true&q.op=and&fl=displayterm&group=true&group.field=displayterm)

注意：**&group=true&group.field=displayterm**
此响应按 displayterm 分组

回复 ：

```
{
  "responseHeader":{
    "status":0,
    "QTime":6,
    "params":{
      "fl":"displayterm",
      "indent":"true",
      "q":"displayterm:new",
      "q.op":"and",
      "group.field":"displayterm",
      "group":"true",
      "wt":"json"}},
  "grouped":{
    "displayterm":{
      "matches":231,
      "groups":[{
          "groupValue":null,
          "doclist":{"numFound":220,"start":0,"docs":[
              {
                "displayterm":"Professional News"}]
          }},
        {
          "groupValue":"general",
          "doclist":{"numFound":1,"start":0,"docs":[
              {
                "displayterm":"General News"}]
          }},
        {
          "groupValue":"delhi",
          "doclist":{"numFound":2,"start":0,"docs":[
              {
                "displayterm":"New Delhi"}]
          }},
        {
          "groupValue":"care",
          "doclist":{"numFound":1,"start":0,"docs":[
              {
                "displayterm":"New Born Care Week"}]
          }},
        {
          "groupValue":"civil",
          "doclist":{"numFound":1,"start":0,"docs":[
              {
                "displayterm":"NEW CIVIL HOSPITAL, SURAT"}]
          }},
        {
          "groupValue":"blood",
          "doclist":{"numFound":1,"start":0,"docs":[
              {
                "displayterm":"Newlife Blood Bank"}]
          }},
        {
          "groupValue":"college",
          "doclist":{"numFound":1,"start":0,"docs":[
              {
                "displayterm":"New Medical College Hospital"}]
          }},
        {
          "groupValue":"degree",
          "doclist":{"numFound":1,"start":0,"docs":[
              {
                "displayterm":"Homeopathy(Degree Course) Regulation New"}]
          }},
        {
          "groupValue":"child",
          "doclist":{"numFound":1,"start":0,"docs":[
              {
                "displayterm":"Reproductive, Maternal, Newborn, Child and Adolescent Health"}]
          }},
        {
          "groupValue":"foundation",
          "doclist":{"numFound":1,"start":0,"docs":[
              {
                "displayterm":"The new century Medical and Educational foundation malegaon, Nashik"}]
          }}]}}} 
```

# java - 联系人更新不适用于相同类型“其他”的多个联系人

> ID：11739587
> 
> 赞同：2
> 
> 时间：2012-07-31T11:57:44.213
> 
> 标签：java, android

我正在尝试更新联系人列表，但问题是当多个电话号码保存在同一类别“其他”下时，它将最后一个号码更新为同一类别下的所有其他号码这是我正在使用的代码

```
protected void update(ContactPhoneNumber from, ArrayList ops, int rawContactId) {
        String selectPhone = Data.RAW_CONTACT_ID + "=? AND " + Data.MIMETYPE + "='"  + 
            Phone.CONTENT_ITEM_TYPE + "'" + " AND " + Phone.TYPE + "=? AND " + Phone.NUMBER + "=?";
        String[] phoneArgs = new String[] { String.valueOf(rawContactId), String.valueOf(type), number }; 
        ops.add(ContentProviderOperation.newUpdate(Data.CONTENT_URI)
            .withSelection(selectPhone, phoneArgs)
            .withValue(Phone.NUMBER, newNumber)
            .build()); 
    } 
```

# visual-studio-2010 - 如何使用 MFC 中的 Listcontrol 从特定位置访问文件名？

> ID：11739590
> 
> 赞同：0
> 
> 时间：2012-07-31T11:57:45.690
> 
> 标签：visual-studio-2010, visual-c++, mfc

我是 Visual Studio C++ 的初学者。我正在使用 MFC 创建一个基于对话框的应用程序。我想读取一些文件并在对话框中显示该文件中的一些必需文本。

代码是：

```
 CFileFind finder;
    bool bFound;

   CString filename = "C:\\FilesLocation\\*.txt";

   bFound = finder.FindFile(filename);
   if(bFound) 
 {

   m_List.AddString(finder.GetFileName());  }

 in the last line,   error appears, whereas m_List is the member variable for List Control/ 
```

并且 Clistctrl 没有成员 Addstring。

如何访问文件名并在对话框中显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:19:42.050

根据您要实现的具体目标，使用[CListCtrl::InsertItem](http://msdn.microsoft.com/en-us/library/8b9s12fc%28v=vs.100%29.aspx) 或使用`CListBox`而不是`CListCtrl`. `CListBox`有`AddString`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:17:47.033

采用

```
HANDLE WINAPI FindFirstFile(
  __in   LPCTSTR lpFileName,
  __out  LPWIN32_FIND_DATA lpFindFileData
); 
```

在哪里

**pFileName [in]** 目录或路径以及文件名，可以包含通配符，例如星号 (*) 或问号 (?)。

**lpFindFileData [out]** 指向 WIN32_FIND_DATA 结构的指针，该结构接收有关找到的文件或目录的信息。

```
WIN32_FIND_DATA ffd;
HANDLE hFind = FindFirstFile(path of the directory,&ffd);
if (INVALID_HANDLE_VALUE == hFind) 
    {
        return;
    } 
    else
    {
                ffd.cFileName;

         } 
```

# java - 将 Android 中从 Google Tasks API 返回的 RFC 3339 DateTime 对象覆盖为字符串

> ID：11739592
> 
> 赞同：3
> 
> 时间：2012-07-31T11:57:51.997
> 
> 标签：java, android, jodatime, datetime-format, google-tasks-api

我正在使用 Google Tasks API 返回值，例如任务标题、任务注释和任务截止日期。

当我尝试将到期日期（[存储为 RFC 3339](https://developers.google.com/google-apps/tasks/v1/reference/tasks#resource)）作为字符串输出时，我得到了`java.lang.IllegalArgumentException`。

我正在尝试使用`SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'")`来进行这种转换。

我的猜测是这`SimpleDateFormat`不是要走的路，但我尝试过的所有其他转换都失败了。我愿意使用 Joda `ISODateFormat`，但即使这样也没有用。我已经包含了相关的代码片段。

我的任务（调用项）类定义是：

```
import com.google.api.client.util.DateTime;

public class Item {

Long id;
String title;   
String description;
String extId1;
Integer status;
DateTime dateDue;
DateTime dateLastEdit;
DateTime dateCompleted;

Item parent;

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public String getTitle() {
    return title;
}

public void setTitle(String title) {
    this.title = title;
}

public String getDescription() {
    return description;
}

public void setNotes(String description) {
    this.description = description;
}

public String getExtId1() {
    return extId1;
}

public void setExtId1(String extId1) {
    this.extId1 = extId1;
}

public Integer getStatus() {
    return status;
}

public void setStatus(Integer status) {
    this.status = status;
}

public DateTime getDateDue() {
    return dateDue;
}

public void setDateDue(DateTime dateDue) {
    this.dateDue = dateDue;
}

public DateTime getDateLastEdit() {
    return dateLastEdit;
}

public void setDateLastEdit(DateTime dateLastEdit) {
    this.dateLastEdit = dateLastEdit;
}

public DateTime getDateCompleted() {
    return dateCompleted;
}

public void setDateCompleted(DateTime dateCompleted) {
    this.dateCompleted = dateCompleted;
}

public Item getParent() {
    return parent;
}

public void setParent(Item parent) {
    this.parent = parent;
}

} 
```

为了看到这个出错，我演示了 doInBackground 方法，在该方法中我尝试输出返回的日期：

```
@Override
protected List<Item> doInBackground(Void... arg0) {
  List<Item> itemList = new ArrayList<Item>();
  DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  Log.v(TAG, "Start doInBackground...");
  try {
      List<String> result = new ArrayList<String>();
      com.google.api.services.tasks.Tasks.TasksOperations.List listRequest = service.tasks().list("@default");
      listRequest.setFields("items/title,items/notes,items/due");
      List<Task> tasks = listRequest.execute().getItems();
      if (tasks != null) {            
          for (Task task : tasks) {
              result.add(task.getTitle());
              Item item = new Item();               
              item.setTitle(task.getTitle());
              item.setNotes(task.getNotes());
              DateTime due = task.getDue();
              item.setDateDue(due);
              Log.v(TAG, "Due date string: " + formatter.format(due));
              itemList.add(item);
          }
      } else {
          Log.v(TAG, "End doInBackground with no tasks");
          result.add("No tasks.");
      }       
      Log.v(TAG, "End doInBackground with tasks received");
      return itemList;           
  } catch (IOException e) {
      Log.v(TAG, "End doInBackground with IOException...");
      tasksSample.handleGoogleException(e);
      Item item = new Item();
      item.setTitle(e.getMessage());
      itemList.add(item);
      return itemList;
      //return Collections.singletonList(e.getMessage());
  } catch (Exception e2) {
      Log.v(TAG, "End doInBackground with generic exception...");
      e2.printStackTrace();
      Item item = new Item();
      item.setTitle(e2.getMessage());
      itemList.add(item);
      return itemList;
  } finally {
      tasksSample.onRequestCompleted();
  }
} 
```

编辑：

根据要求，这是一个堆栈跟踪：

> [java.text.DateFormat.format(DateFormat.java:365), java.text.Format.format(Format.java:93), com.google.api.services.samples.tasks.android.AsyncLoadTasks.doInBackground(AsyncLoadTasks .java:78), com.google.api.services.samples.tasks.android.AsyncLoadTasks.doInBackground(AsyncLoadTasks.java:1), android.os.AsyncTask$2.call(AsyncTask.java:264), java.util .concurrent.FutureTask$Sync.innerRun(FutureTask.java:305), java.util.concurrent.FutureTask.run(FutureTask.java:137), android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208) , java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076), java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569), java.lang.Thread.run(Thread.java:856 )]

这是任务资源：

> {"到期":"2012-07-04T00:00:00.000Z","notes":"note1","title":"test1"}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:50:21.337

似乎Google Java客户端库助手功能`import com.google.api.client.util.DateTime;`

已经返回一个文本字符串，无需进行转换。那不是我所期待的！

# jquery - 未出现在正确位置的单词的预先输入列表

> ID：11739595
> 
> 赞同：1
> 
> 时间：2012-07-31T11:58:03.030
> 
> 标签：jquery, html, css, forms, typeahead

我一直在使用 Twitter 引导模板，为即将推出的网站测试一些概念，并且一切正常。

现在设计师已经移交了实际的网站，而我在实现基于 Twitter 引导模板的开发网站的一些功能时遇到了麻烦。我目前的主要功能是预输入功能：

[http://twitter.github.com/bootstrap/javascript.html#typeahead](http://twitter.github.com/bootstrap/javascript.html#typeahead)

Typeahead 正在我的新网站上工作，但单词列表没有出现在输入字段下方 - 它位于右侧，我不确定为什么会这样。您可以在以下输入表单的简化版本中亲自查看：

[http://dl.dropbox.com/u/34923164/test.html](http://dl.dropbox.com/u/34923164/test.html)

如果您开始在第一个输入字段中输入“walking”，您会看到列表出现在右上角 - 我如何将它恢复到输入字段本身下方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:06:16.007

您没有正确导入 Bootstrap 样式表。typeahead 使用*下拉类（如您在**ul*上创建的类中所见），它告诉它正确显示的位置（除其他外）。

如果您不想使用他们的样式，那会更加混乱，但是您基本上可以将所需的信息从课堂中提取出来。最重要的可能是*位置*类型以及*顶部*和*左侧*属性。

# visual-studio-2010 - 'Microsoft.ACE.OLEDB.12.0' 提供程序未在本地计算机上注册。excel的错误

> ID：11739597
> 
> 赞同：1
> 
> 时间：2012-07-31T11:58:07.093
> 
> 标签：visual-studio-2010, oledb, excel-2010, oledbconnection, oledbexception

![在此处输入图像描述](../Images/b18e378cc3ba0e129baa1353d37bf305.png)

我使用 windows 7 home basic 64-bit 和 microsoft excel starter 2010，我想读取一个 excel 文件，但是当我调试我的代码时，我遇到了这个错误：`The 'Microsoft.ACE.OLEDB.12.0' provider is not registered on the local machine.` 我的代码如下：

```
protected void Page_Load(object sender, EventArgs e)
{
    GridView1.DataSource=getirExcel();
    GridView1.DataBind();
}
DataTable getirExcel()
{
    string dosya_adres = @"C:\Users\Erdi\Downloads\DBE_BAKIM_FORMU.xlsx";
    OleDbConnection baglanti = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + dosya_adres + ";Extended Properties=Excel 12.0");
    baglanti.Open();
    string query = "select * from [Sheet1$A1:D20]";
    OleDbDataAdapter oAdp = new OleDbDataAdapter(query, baglanti);
    DataTable dt = new DataTable();
    oAdp.Fill(dt);
    return dt;
} 
```

我已经尝试过`Microsoft.JET.OLEDB.4.0`，但根据论坛，它不适用于 64 位。你知道任何替代供应商吗？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:54:53.910

您需要在此处安装数据库引擎：http: [//www.microsoft.com/en-us/download/details.aspx?id=13255](http://www.microsoft.com/en-us/download/details.aspx?id=13255)

# c# - 使用 Access 2007 数据库中的数据填充 ReportViewer 或 CrystalReport

> ID：11739598
> 
> 赞同：0
> 
> 时间：2012-07-31T11:58:11.237
> 
> 标签：c#, visual-studio-2010, ms-access, crystal-reports, report-viewer2010

所以我有这个带有几个表的 MS-Access 数据库。我正在使用表中的记录填充 dataGridView，并且我想使用一些选定的记录创建报告。我正在考虑在 Visual Studio 2010 中使用 MS 提供的 ReportViewer，但我没有做很多事情，实际上，我几乎什么也没做。然后，我安装了 CrystalReport 并尝试使用它，但更糟糕的是，因为我不知道如何使用它。

所以第一个问题是：如何使用 MS-Access 数据库中的数据创建报告？使用 ReportViewer 或 Crystal Reports...一个简单的，只是显示数据，以便可以轻松导出或打印...

而第二个问题...

我也无法弄清楚如何从两个表中获取列（不是整个记录行）并将它们绑定到一个表中以显示在报告中，如上所示。

我正在使用 Visual Studio 2010 和 WinForms。

谁能给我一个建议？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:23:30.373

您可以点击此链接[http://csharp.net-informations.com/crystal-reports/csharp-crystal-reports-stepbystep.htm](http://csharp.net-informations.com/crystal-reports/csharp-crystal-reports-stepbystep.htm)。您需要使用访问连接而不是sql server。

为了将两个或更多列添加到不同的表格中，您可以为报表上的显示字段创建视图。

最后，您可以通过 gridview 数据分配绑定报表数据源。

# java - Android：如何动态获取应用程序的总大小？

> ID：11739599
> 
> 赞同：2
> 
> 时间：2012-07-31T11:58:13.777
> 
> 标签：java, android, size, progress-bar, assets

在 Android 中，我看到许多带有加载屏幕的应用程序。我知道 ProgressBar，实现了 AsyncTask 方法，但我从未见过有人知道他们如何设法获得应用程序总大小的值，或者如果他们正在加载资产，总资产大小。

通过动态获取应用程序的总大小，我将能够在发布时或发布后向应用程序添加额外的内容。然后我可以计算应用程序加载的总进度。

到目前为止，我做了一个解决方法，如下所示：

```
package nttu.edu.activities;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.LinkedList;
import java.util.Queue;

import nttu.edu.R;
import nttu.edu.graphics.Art;
import android.app.Activity;
import android.content.Intent;
import android.content.res.AssetManager;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Handler;
import android.widget.ProgressBar;

public class NewLoadingActivity extends Activity {
    public ProgressBar bar;
    private AssetManager assetManager;
    public Handler handler;
    public ProgressTask task;

    private final String[] list = {
    // Art.sprites
    "art/sprites.png", ...... };

    private class ProgressTask extends AsyncTask<Void, Void, Void> {
        public int totalByteSize;
        public int currentByteSize;
        public Queue<Bitmap> bitmapQueue;
        public Queue<byte[]> byteQueue;

        public ProgressTask() {
            totalByteSize = 0;
            currentByteSize = 0;
            bitmapQueue = new LinkedList<Bitmap>();
            byteQueue = new LinkedList<byte[]>();
        }

        public void onPostExecute(Void params) {
            Art.sprites = bitmapQueue.remove();
            finish();
        }

        public void onPreExecute() {
            try {
                for (int i = 0; i < list.length; i++) {
                    byte[] bytes = readFromStream(list[i]);
                    totalByteSize += bytes.length;
                    byteQueue.add(bytes);
                }
                bar.setMax(totalByteSize);
            }
            catch (IOException e) {
                throw new RuntimeException(e);
            }
        }

        public void onProgressUpdate(Void... params) {
            bar.setProgress(currentByteSize);
        }

        @Override
        protected Void doInBackground(Void... params) {
            while (currentByteSize < totalByteSize) {
                try {
                    Thread.sleep(1000);
                    if (byteQueue.size() > 0) {
                        byte[] bytes = byteQueue.remove();
                        Bitmap bitmap = BitmapFactory.decodeByteArray(bytes, 0, bytes.length);
                        bitmapQueue.add(bitmap);
                        currentByteSize += bytes.length;
                        this.publishProgress();
                    }
                }
                catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            return null;
        }

        private byte[] readFromStream(String path) throws IOException {
            ByteArrayOutputStream output = new ByteArrayOutputStream();
            byte[] buffer = new byte[1024];
            int length = 0;
            InputStream input = assetManager.open(path);
            while (input.available() > 0 && (length = input.read(buffer)) != -1)
                output.write(buffer, 0, length);
            return output.toByteArray();
        }

    }

    public void onCreate(Bundle b) {
        super.onCreate(b);
        this.setContentView(R.layout.progressbar);
        assetManager = this.getAssets();
        handler = new Handler();
        task = new ProgressTask();
        bar = (ProgressBar) this.findViewById(R.id.loadingBar);
        if (bar == null) throw new RuntimeException("Failed to load the progress bar.");
        task.execute();
    }

    public void finish() {
        Intent intent = new Intent(this, MenuActivity.class);
        intent.putExtra("Success Flag", Art.sprites != null);
        this.setResult(RESULT_OK, intent);
        super.finish();
    }
} 
```

此活动的唯一主要问题是我必须首先将新资产添加到靠近顶部的列表中。列表数组大小为 58。：

`private final String[] list = {"art/sprites.png", ......};`

然后从我想要加载资产的列表中找出总资产大小，然后使用总资产大小在我的 ProgressBar 上标记 100%，并根据需要继续更新 ProgressBar。

这是一个缓慢的过程，有人告诉我，如果用户要加载应用程序并在初始化期间注意到延迟，这可能是理想的，也可能不是理想的。如前所述，列表数组是 58，当我的应用程序加载时，它需要先计算所有资产大小，然后再进行实际初始化。

我想让事情变得更快，只需在不使用 AsyncTask 和 ProgressBar 的情况下设置所有变量，但我喜欢有一个介绍加载屏幕，就像 Google Play 中的所有其他应用程序一样。

因此，如何获取应用程序的总大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T05:47:59.660

而不是使用总文件大小，并根据加载的字节数计算进度（这可能会增加加载时间），只需计算加载的文件数，并根据文件总数计算进度。

# android - 无法在 ListView 中获取单击的复选框的相应值

> ID：11739600
> 
> 赞同：1
> 
> 时间：2012-07-31T11:58:15.797
> 
> 标签：android, listview, checkbox

这让我发疯`CheckBox`了。`ListView`我在 StackOverflow 上搜索了很多关于此的内容，但我无法解决此问题。

问题是我有一个自定义适配器，`ListView`我在其中膨胀`CheckBox`.

这是代码：

```
public class settingadapter extends BaseAdapter{

    private Activity recievedactivity;

    private String[] recieveddescription;
    private String[] recusername;
    private String allitems="";
    private String[] itemchecked;

    private static LayoutInflater inflator=null;

    public settingadapter(Activity recactivity,String[] username, String[] recdescription ){
        recievedactivity=recactivity;
        recusername=username;
        recieveddescription=recdescription;

        inflator=(LayoutInflater)recievedactivity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    }
    public settingadapter(Activity recactivity,String[] username, String[] recdescription ,String all){
        recievedactivity=recactivity;
        recusername=username;
        recieveddescription=recdescription;
        allitems=all;
        inflator=(LayoutInflater)recievedactivity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    }

    public int getCount() {
        // TODO Auto-generated method stub
        return recusername.length;
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }
    static class ViewHolder{
        TextView usernameTextView;
        TextView statusTextView;
        CheckBox checkView;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        final ViewHolder viewHolder;

        if(convertView== null)
        {
            viewHolder=new ViewHolder();

            convertView=inflator.inflate(R.layout.item, null);

            viewHolder.usernameTextView=(TextView)convertView.findViewById(R.id.textView1);
            viewHolder.statusTextView=(TextView)convertView.findViewById(R.id.text);
            viewHolder.checkView=(CheckBox)convertView.findViewById(R.id.checkBox1);

            convertView.setTag(viewHolder);

        }else{
            viewHolder=(ViewHolder)convertView.getTag();
        }
            viewHolder.usernameTextView.setText(recusername[position]);
            viewHolder.statusTextView.setText(recieveddescription[position]);
             //Add listener to the checkbox

            System.out.println("testing alpha"+recusername[position]);

            if(allitems.equals("All")){
                viewHolder.checkView.setChecked(true);
            }
            else if (allitems.equals("---Select User---")){
                viewHolder.checkView.setChecked(false);
            }
            else
             return convertView;  
            //image.setBackgroundResource(R.drawable.check);

            return convertView;

    }

} 
```

现在在这我如何获得`CheckBox`被点击的内容以及如何获得相应的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:21:19.000

请检查这些代码

在 ans 中，该人添加了 onclick 事件并获取了标签。 [Android如何使用复选框识别列表视图中的项目](https://stackoverflow.com/questions/9444165/android-how-to-identify-item-in-listview-with-checkbox)

没有 onclick 复选框的相同代码 [http://windrealm.org/tutorials/android/listview-with-checkboxes-without-listactivity.php](http://windrealm.org/tutorials/android/listview-with-checkboxes-without-listactivity.php)

希望它会帮助你:)

# c# - 来自所选联系人项目的 Outlook 信息

> ID：11739602
> 
> 赞同：3
> 
> 时间：2012-07-31T11:58:16.710
> 
> 标签：c#, winforms, outlook, selecteditem, contactitem

我正在尝试在 Outlook 2010 中获取所选 ContactItem 的信息。诸如：“姓名、公司名称、地址”等数据。

我需要将此信息加载到我的 WinForm 中并在表单上的几个标签中显示为文本。Wordprocess 如下： 在 Outlook 中右键单击希望的联系人 > 单击我创建的 ContextMenu (AddIn)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T14:08:41.947

这是一个示例，应该为您提供[`ContactItem`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.contactitem_members.aspx)来自[`Explorer.Selection`](http://msdn.microsoft.com/en-us/library/ff861267.aspx). 然后，您可以访问`ContactItem`当前活动选择中的所有属性。如果要支持多`ContactItems`选，则必须稍微更改行为。

```
Outlook.Selection selection = Globals.ThisAddIn.Application.ActiveExplorer().Selection;
if (selection.OfType<Outlook.ContactItem>().Count() == 1) // only support single item selection
{
  Outlook.ContactItem contact = selection.OfType<Outlook.ContactItem>().FirstOrDefault();
  string name = contact.FullName;
  string company = contact.CompanyName;
  string address = contact.BusinessAddress;
} 
```

# regex - 所有好事都是三（如何跳过不需要的子匹配？）

> ID：11739606
> 
> 赞同：1
> 
> 时间：2012-07-31T11:58:24.683
> 
> 标签：regex, perl

### 如何使用/跳过不需要的匹配项？

假设我们有以下文本：

```
my $t ='good good *bad !bad -bad "alwaysbad alwaysbad alwaysbad" good'; 
```

我想要一个只匹配`good`单词的正则表达式。符号词`good`,`bad`和`alwaysbad`is 的真正内容当然是`[0-9A-Za-z_@]+`(`\w+`这个问题很好)。要从一个单词中分辨出一个`bad`单词`good`，像`(\s|^)\b\w`单词开头的东西就足够了。双引号中的东西总是一个坏词，即使没有前缀。

这就是我所拥有的：

```
my $r = qr/
           (?: " [^"]+ " )     # skip quoted part altogether, don't capture
            |                  # OR
           (?<!\S) \b ([\w@]+) # find words without 'bad' prefix and capture
          /x; 
```

此表达式不会捕获引用的部分，但仍然匹配。因此，我们将`undefined`在匹配列表中有一个空条目：

```
my @matches = $t =~ /$r/g;

print join "\n", @matches;

  good
  good
         <== (uninitialized value, this comes from the quoted part)
  good 
```

现在的问题：

有谁知道适用于当代 perl 正则表达式的技术**如何使用字符串的给定部分但不将其**与单个正则表达式调用匹配？

因此，结果应该是：

```
 good
  good
  good 
```

* * *

**附录**：

感谢[Borodins 的回答](https://stackoverflow.com/a/11739976/170194)，我现在看得更清楚了。只需删除`|`（或）并应用任何`or-zero-times`量词，它就会起作用：

```
my $r = qr/
           (?: " [^"]+ ")? \s?  # skip quotes + space if any
           (?<!\S) \b ([\w@]+)  # find words without 'bad' prefix and capture
          /x; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:23:45.460

您的正则表达式仅匹配非捕获序列，因为您说过这就是您想要的。

编写任意数量的带引号的字符串的可选前缀，中间插入非引号字符，如下所示

```
my $r = qr/
  (?: " [^"]* " [^"]*?)*    # skip quoted part altogether, don't capture
  (?<!\S) \b (\w+)          # find words without 'bad' prefix and capture
/x; 
```

但为了清楚起见，我会在尝试匹配之前从目标中删除所有引用的字符串。不要忘记，如果你想`@`在你的子字符串中也允许，那么你需要`[\w@]`. 而且您还需要尾随检查以确保开头*之后没有无效字符。*

```
$t =~ s/"[^"]*"//g;
my @matches = $t =~ /(?:\s|^)[\w\@]+(?=\s|\z)/g; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:24:49.407

您可以将它们过滤掉：

```
my @matches = grep { m/\S/ } $t =~ /$r/g; 
```

# reporting-services - 2 份关于同一邮件的报告 (Reporting Services)

> ID：11739613
> 
> 赞同：1
> 
> 时间：2012-07-31T11:59:14.253
> 
> 标签：reporting-services, sql-server-2008-r2, ssrs-2008-r2

在 Reporting Services 中，可以将发送电子邮件的电子邮件地址添加为订阅。

是否可以将 2 个或多个报告合并到同一个邮件中发送？我不认为有可能直接做到这一点，但也许你们中的一个人知道一个工作 - 周围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:39:01.983

我认为通过普通订阅不可能做到这一点。但是，有一个 SSIS 插件可以生成 SSRS 报告 (http://ssisreportgenerator.codeplex.com/)。如果您真的需要这样做，您可以将该附加组件与其他 SSIS 功能结合使用，以获得您需要的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T21:50:37.273

无法直接在报告服务 GUI（报告管理器或 Sharepoint）中执行此操作。

一种可能的解决方法是使用脚本实用程序 rs.exe 将报告生成到文件（例如 PDF），然后使用 sp_send_dbmail 通过电子邮件发送它们。您可以使用 sp_send_dbmail 创建包含多个附件的电子邮件，但请注意每个附件的默认文件大小限制为 1MB。

# iphone - 如何在 iPhone 中添加粗略的工作视图（页面）？

> ID：11739614
> 
> 赞同：0
> 
> 时间：2012-07-31T11:59:14.387
> 
> 标签：iphone, objective-c, ios5

我开发了一个 GMAT 练习试卷应用程序，用户可以通过练习试卷来测试他们的技能。现在我想添加一个粗略的工作表（包括不同类型的铅笔和橡皮擦），供用户在编写考试时进行粗略的工作。我该如何添加它，该表的技术名称是什么..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:20:28.113

完全没有此类技术表的名称。您将必须创建另一个`UIView`或在同一`UIView`空间中添加一些空间，您必须在其中添加`UIButtons`用于绘图、铅笔和橡皮擦的空间。您可以使用 a`UIScrollview`作为颜色。现在只能通过使用来绘制，`UITouch`这样用户触摸到的地方都会有一条线的痕迹。为此，您将不得不使用坐标并绘制视图。所有这一切的任何细节你都可以问我，因为我正在开发一个类似的应用程序:)

# asp.net - 如何在下拉菜单中将当前月份和年份设置为默认值？

> ID：11739619
> 
> 赞同：0
> 
> 时间：2012-07-31T11:59:29.713
> 
> 标签：asp.net, .net, vb.net, datetime

我想在页面加载期间在下拉列表中选择当前的月份和年份。我试过了，但是页面加载时没有在下拉列表中选择该值，这是什么问题？

到目前为止，我已经这样做了：

```
 <asp:DropDownList ID="ddlMonth" runat="server">
    <asp:ListItem Text="January" Value="01"></asp:ListItem>
    <asp:ListItem Text="February" Value="02"></asp:ListItem>
    <asp:ListItem Text="March" Value="03"></asp:ListItem>
    <asp:ListItem Text="April" Value="04"></asp:ListItem>
    <asp:ListItem Text="May" Value="05"></asp:ListItem>
    <asp:ListItem Text="June" Value="06"></asp:ListItem>
    <asp:ListItem Text="July" Value="07"></asp:ListItem>
    <asp:ListItem Text="August" Value="08"></asp:ListItem>
    <asp:ListItem Text="September" Value="09"></asp:ListItem>
    <asp:ListItem Text="October" Value="10"></asp:ListItem>
    <asp:ListItem Text="November" Value="11"></asp:ListItem>
    <asp:ListItem Text="December" Value="12"></asp:ListItem>
</asp:DropDownList>

<asp:DropDownList ID="ddlYear" runat="server">
    <asp:ListItem Text="2010" Value="2010"></asp:ListItem>
    <asp:ListItem Text="2011" Value="2011"></asp:ListItem>
    <asp:ListItem Text="2012" Value="2012"></asp:ListItem>
    <asp:ListItem Text="2013" Value="2013"></asp:ListItem>
    <asp:ListItem Text="2014" Value="2014"></asp:ListItem>
    <asp:ListItem Text="2015" Value="2015"></asp:ListItem>
</asp:DropDownList> 
```

在我的页面加载中：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
        'Select Current Month and Year to dropdowns
        ddlYear.ClearSelection()
        ddlMonth.ClearSelection()
        Dim year As String = ddlYear.Items.FindByText(Format(Now, "yyyy")).ToString()
        Dim month As String = ddlMonth.Items.FindByText(Today.ToString("MMMM")).ToString()
        ddlYear.Items.FindByText(year).Selected = True
        ddlMonth.Items.FindByText(month).Selected = True 
    End If  
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:25:51.583

您需要在下拉列表上设置 SelectedValue 属性，而不是我相信的列表项。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
        'Select Current Month and Year to dropdowns
        ddlYear.ClearSelection()
        ddlMonth.ClearSelection()
        ddlYear.SelectedValue = ddlYear.Items.FindByText(Format(Now, "yyyy")).Value;
        ddlMonth.SelectedValue = ddlMonth.Items.FindByText(Today.ToString("MMMM")).Value;
    End If  
End Sub 
```

# json - 如何将perl对象转换为json字符串

> ID：11739620
> 
> 赞同：6
> 
> 时间：2012-07-31T11:59:34.883
> 
> 标签：json, string, perl, object

我尝试了很多时间将 perl 对象转换为 JSON 字符串。但我还是找不到。我使用了 JSYNC。但我看到它有一些问题。然后我在 perl 中使用 JSON 模块。这是我的代码。

```
my $accountData = AccountsData ->new();
$accountData->userAccountsDetail(@userAccData);
$accountData->creditCardDetail(@userCrData);
my $json = to_json($accountData,{allow_blessed=>1,convert_blessed=>1});
print $json."\n"; 
```

当我运行它打印的代码时`null`。我做错了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T12:15:32.873

第一个版本：

```
use JSON::XS;
use Data::Structure::Util qw/unbless/;

sub serialize {
  my $obj = shift;
  my $class = ref $obj;
  unbless $obj;
  my $rslt = encode_json($obj);
  bless $obj, $class;
  return $rslt;
}

sub deserialize {
  my ($json, $class) = @_;
  my $obj = decode_json($json);
  return bless($obj, $class);
} 
```

第二个版本：

```
package SerializablePoint;

use strict;
use warnings;
use base 'Point';

sub TO_JSON {
  return { %{ shift() } };
}

1;

package main;

use strict;
use warnings;
use SerializablePoint;
use JSON::XS;

my $point = SerializablePoint->new(10, 20);

my $json = JSON::XS->new->convert_blessed->encode($point);
print "$json\n";
print "point: x = ".$point->get_x().", y = ".$point->get_y()."\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T12:21:12.257

根据[文档](http://search.cpan.org/~makamaka/JSON-2.53/lib/JSON.pm#convert_blessed)，您的对象必须提供一个`TO_JSON`方法，`to_json`然后使用该方法。`JSON -convert_blessed_universally;`如果您想避免提供自己的方法，这似乎也暗示您可以在转换之前调用`TO_JSON`，尽管文档指出这是一个实验性功能。

# html - 滚动页面滞后

> ID：11739622
> 
> 赞同：-4
> 
> 时间：2012-07-31T11:59:38.597
> 
> 标签：html, optimization, lag

我创建的页面在上下滚动时出现问题...是不是因为上面的内容太多了？解决方案是什么？我的页面：[http](http://www.orhsfoundation.com/index12.html) ://www.orhsfoundation.com/index12.html 抱歉，这个问题很“整体”。问题主要出现在 chrome 和我的 iPhone 上......可能在 Firefox 上有点，但不是真的很明显。我试图减小图像大小，但没有发现任何区别。使用相同 Dreamweaver 模板的其他页面不会出现此问题，因此它可能是中间的横幅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:33:56.873

查看[YSlow](http://developer.yahoo.com/yslow/)；它可能会给你一些有用的与性能相关的建议。

# jakarta-ee - jdbc领域glassfish 3.0.1的范围

> ID：11739625
> 
> 赞同：1
> 
> 时间：2012-07-31T11:59:48.107
> 
> 标签：jakarta-ee, glassfish

请我需要一些关于 glassfish (v3) 中 jdbc 领域的说明。我正在尝试为位于同一域中的两个应用程序 A 和 B 设置不同的登录身份验证。我已经成功地为我的 Web 应用程序 A 设置了 jdbc 领域身份验证。但是在使用该进程（使用不同的表，不同的 jdbc 领域名称）创建第二个 Web 应用程序 B 之后，它对 B 不起作用。当我将更改更改为 jdbc A的域名它工作。我现在很困惑我是否在第二个应用程序 B 中犯了错误。为了解决我的问题，我需要回答以下问题？

1.  我可以保护具有相同域的不同应用程序，每个应用程序都有自己的身份验证吗？
2.  我可以每个域只有一个 jdbc 领域吗？

3.  每台服务器只能有一个 jdbc 领域吗？谢谢 。

# ruby - 理解可比较的 mixin 和可枚举的 mixin

> ID：11739628
> 
> 赞同：6
> 
> 时间：2012-07-31T11:59:57.613
> 
> 标签：ruby, mixins, comparable, enumerable

我是新手，正在学习红宝石。想更好地理解所提出的问题。我不明白可比较的 mixin 和可枚举的 mixin 的使用。我的意思是当我们需要使用它们时，我们不会将它们包含在我们的课程中，对吧？如果我们想比较两个对象，我们只需写 x > y。那么显式使用它们有什么用呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T12:12:00.483

好问题阿卡什！

有时，如何比较两个对象并不“简单”！如果你有一个 Dog 课程怎么办？你如何比较两个 Dog 实例？应该根据什么来比较？比较他们的名字就够了吗？他们的品种？他们的DNA？这真的取决于你。那就是您可以在模型中包含 Comparable 并自己实现所需的最小功能来定义使两个 Dog 实例相同的原因。您定义比较。一旦你在你的模块中定义了 <=> 比较器，你的对象就可以被比较是否相等或被排序或排序，因为 ruby​​ 将知道如何将一个实例与另一个实例进行比较。

同样，包含 Enumerable 模块允许您的类能够迭代其实例的集合。一旦你在你的类中实现了 each 方法，你就可以在你的类中获得整个 Enumerable 模块的方法。诸如 map/collect 等方法可以在您的课程中使用。

```
class Dog
  include Enumerable

  attr_accessor :puppies, :name

  def initialize(name)
    @name = name
    @puppies = []
  end

  def each(&block)
    @puppies.each do |puppy|
      puts "yielding #{puppy}"
      yield(puppy)
      puts "just yielded #{puppy}"
    end
  end

end

tommy = Dog.new("tommy")
tommy.puppies = ["julie","moti","husky"]

tommy.each do |p|
  puts p
end

big_puppies = tommy.map{|x| x.titleize } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T12:11:19.513

这两个 mixin 的重点在于，它们为您提供了一大堆方法，而您只需自己实现一个方法。

如果没有`Comparable`mixin，你会想在你的类上定义`>`, `<`, `>=`, `<=`and `==`，而如果你包含`Comparable`了你只需要定义`<=>`. `Comparable`包含基于您的`<=>`方法的其他方法的实现。

与 enumerable 类似，您只需要定义`each`并作为回报，您会得到`map`, `inject`, `partition`,`reject`等等...

# java - 如何修复 Necessitas QT 包错误“debug.apk”？

> ID：11739629
> 
> 赞同：0
> 
> 时间：2012-07-31T12:00:03.727
> 
> 标签：java, android, c++, qt

我在构建必需品 QT 时遇到问题

打包错误：命令“D:/android/QT_again/android-sdk/platform-tools/adb.exe -s emulator-5554 install D:/android/Trial_again/android/bin/QtApplication-debug.apk”失败。退出代码: 1

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:24:05.803

您必须提供更多信息。有用的部分将在您的模拟器中的 logcat 中。唯一可以确定的是，您尝试安装的软件包没有安装。

# android - android sdk manager 没有显示任何更新

> ID：11739631
> 
> 赞同：0
> 
> 时间：2012-07-31T12:00:08.070
> 
> 标签：android

当我第一次运行 SDK 管理器时，它有很多可供下载的选项，我安装了 API 15 和 10，我需要安装支持包来启动一个新项目，现在唯一显示的是当前安装的包。没有新的东西出现。我正在使用存储库 7。有什么想法吗？

我主要担心的是，更新后我无法启动新项目，因为我缺少 android 支持库，我无法获取支持库，因为下载器不会更新列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T09:08:40.533

我遇到了同样的问题，在这里找到了解决方案： [https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/wp8FFGmsgAQ](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/wp8FFGmsgAQ)

> 清除缓存并重新加载。清除缓存按钮位于 SDK Manager 中的 Tools > Options 中，重新加载是 SDK Manager 中的 Packages > Reload。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:30:35.747

尝试退出 Eclipse，然后直接打开 SDK 管理器。这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T06:04:05.347

转到“工具 > 选项”并设置代理设置。希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-12T07:06:43.843

这是我们在eclipse中多次面临的问题。
要解决此问题，您需要清除缓存并重新加载。只需按照以下给定步骤

## 打开 AVD 管理器

清除缓存按钮位于工具 > 选项中。
并且重新加载是 SDK 管理器中的 Packages > Reload。
还在其他类别中选择了第一个复选框，它强制 https insteam of http。
重新启动 AVD 和 Eclipse

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-22T15:26:15.047

尝试**重新启动 Adb Server**，这就是我所做的。

如果使用 VS2015，可以在“工具 -> Android”菜单下找到。

# bash - 我如何让 rvm 使用一个版本而不说它不是一个函数？

> ID：11739632
> 
> 赞同：0
> 
> 时间：2012-07-31T12:00:11.130
> 
> 标签：bash, rvm, .bash-profile

我意识到这已经在这里处理：

[RVM 和 Jenkins 设置](https://stackoverflow.com/questions/10209242/rvm-and-jenkins-setup)

但这并不能解决我的问题。

以前也是这样，我把

源 $(rvm env 1.9.3@rails-3.2.3 --path)

在我的 bash_profile 中，它工作正常，直到我重新启动，然后什么都没有。

现在当我做 ruby​​ -v 我得到：

ruby 1.8.6 (2009-06-08 patchlevel 369) [universal-darwin9.0]

（Leopard 的默认设置）。

我不知道怎么把它带回来。它使用我的 bashrc 中设置的正确 rvm。

当我使用 rvm 使用时，我得到：

RVM 不是一个函数，使用“rvm use ...”选择红宝石将不起作用。您需要更改终端设置以允许 shell 登录。例如，请访问[https://rvm.io/workflow/screen/](https://rvm.io/workflow/screen/)。

我转到 URL，它说只需放入 shell -${SHELL} 。我做过，但没有喜悦。

# javascript - Trouble accessing attributes in the template - all attributes apart from 'name' show error '[attributename] is not defined'

> ID：11739634
> 
> 赞同：0
> 
> 时间：2012-07-31T12:00:14.680
> 
> 标签：javascript, backbone.js, backbone-views, backbone-routing

The problem is that all Object attributes apart from 'name' call the error 'id/url/whatever is not defined' in the console when accessed from the template. A template with just 'name' displays fine and shows the correct name, but as soon as I call a different attribute, eg. `id` or `url`, it breaks. The object passed to the view is a parsed static JSON file with all items sitting on the same level and accessible from the console with e.g. `collectionName.models[0].get('id');`

What has me confused is that the name attribute works, as if it is predefined somewhere in backbone/underscore code as a default.

Am I missing something very obvious? Since I can access the model data from the console, I think that there's something wrong with how the view itself handles the data, but I've tried rewriting it in a couple different ways and nothing seemed to make any difference.

* * *

All the relevant code.

Passed object format. This is also what `collectionName.models[0].attributes;` returns in the console.

```
[{
"id":"0",
"name": "Building1",
"url": "building_1",
"floors":[{
    "id":"0",
    "name":"Ground Floor",
    "image":"",
    "rooms":[{
        "id": "r_1",
        "name": "Room 1",
    },
    {
        "id": "r_2",
        "name": "Room 2"
    }]
}
}] 
```

}

Example template code:

```
<span class="name"><%= name %></span>
<%= id %> <%= url %> 
```

The router code:

```
routes: {
  '': 'intro', // this route is using pretty much identical code and works fine, the model has the exact same format, the only difference is that all attributes work.
  ':id': 'firstLevel'    
},

firstLevel: function  (id) {
  window.singleBuilding = new ThisBuilding({}, {idBuilding: id});

  window.singleBuilding.fetch();      

  this.floorView = new FloorList({
    collection: window.singleBuilding
  });

  var $intro = $('#intro');
  $intro.empty();
  $intro.append(this.floorView.render().el);
} 
```

Views:

```
window.FloorSingleList = Backbone.View.extend({

  className: 'floor-list',

  initialize: function  () {

  this.template = _.template(tpl.get('floors-list-item')); 
  _.bindAll(this, 'render');
  this.model.bind('change', this.render);
  this.testModel = this.model.attributes; // I tried passing the attributes directly to the templatewithout .toJSON(), which worked exactly the same, as in only the 'name' attribute worked
},

render: function  () {
  console.log("The test data is:", this.testModel);
  console.log("The actual model data is:", this.model);
  var renderedContent = this.template(this.model.toJSON());
  $(this.el).html(renderedContent);

  return this;
 }

});

window.FloorList = Backbone.View.extend({

tagName: 'section',
className: 'intro-list',

initialize: function () {

  this.template = _.template(tpl.get('intro-list'));
  _.bindAll(this, 'render');
  this.collection.bind('reset', this.render, this);
  this.collection.bind('change', this.render, this);
},

render: function  (eventName) {

     var $introList;
     var collection = this.collection;

  $(this.el).html(this.template({ }));
  $introList = this.$('.intro-list');
  collection.each(function (building) {
    var view = new FloorSingleList({
      model: building,
      collection: collection
    });
    $introList.append(view.render().el);
  });

  return this;
}

}); 
```

Model code:

```
window.ThisBuilding = Backbone.Collection.extend({

model : Building,

initialize: function(models, options) {
  // Initialising the argument passed on from the router.
  this.idBuilding = options.idBuilding;
  return this;
},

url : function(){
  return  "data.json"      
},

parse: function (response) {
  console.log("Passed parameters are :", this.idBuilding); // Returns the request parameters passed from the router.
  return response[this.idBuilding];
}

}); 
```

Templates & Bootstrap

```
// templates are loaded during the bootstrap 
tpl.loadTemplates(['header', 'intro-list', 'floors-list-item', 'building-list-item'], function() {
    window.App = new ExampleApp();
    Backbone.history.start();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:16:13.147

The problem is in how fetch in javascript is asynchronous...

```
firstLevel: function  (id) {
  window.singleBuilding = new ThisBuilding({}, {idBuilding: id});

  window.singleBuilding.fetch();  // YOU FETCH HERE     

  this.floorView = new FloorList({
    collection: window.singleBuilding
  });

  var $intro = $('#intro');
  $intro.empty();
  $intro.append(this.floorView.render().el); // AND RENDER WHILE YOU CAN'T ASCERTAIN THE FETCH HAS BEEN COMPLETED...
} 
```

So what happens is that the render tries to read a collection that hasn't yet been initialized properly -> your models are not complete yet -> funny readings. Console log works with black magic when regarding to async operations. so it probably tells you something and the reality is something completely different So do this instead:

```
firstLevel: function  (id) {
  window.singleBuilding = new ThisBuilding({}, {idBuilding: id}); 

  // Don't fetch here...   

  this.floorView = new FloorList({
    collection: window.singleBuilding
  });

  var $intro = $('#intro');
  $intro.empty();
  $intro.append(this.floorView.el); // Don't render here
} 
```

And then in the `FloorList`-view:

```
initialize: function () {

  this.template = _.template(tpl.get('intro-list'));
  _.bindAll(this, 'render');
  this.collection.bind('reset', this.render, this);
  this.collection.bind('change', this.render, this);
  this.collections.fetch(); // fetch here, your binds take care of rendering when finished
} 
```

### Update 2: Apparently I saw complexity where there was none... Ignore everything below

From [Backbone.js docs](http://backbonejs.org/#Model-toJSON), on `Model.toJSON()`

> Return a copy of the model's attributes for JSON stringification.

So it returns the attributes as JSON. Now backbone defines `id` as

> A special property of models...

A property, not an attribute. Same goes for url. In a javascript object that represents a backbone Model, the attributes are stored in their own object within the object and the id- and url-properties are stored elsewhere in the model-object. For example the javascript object representing your model could look something like this:

```
{
  ...
  attributes: Object // this is where your name attribute lives
  ...
  id: 34, // this is your id property
  ...
  __proto__: ctor, // this is where your url-function resides
  ...
} 
```

### UPDATE: The id-property is embedded onto the JSON in `model.toJSON()`

So when you do `this.model.toJSON()`, you create a JSON from the contents of your model-objects attributes-property and include the id-property. The url -property is not included in this. What you can do for example:

```
var renderedContent = this.template({
  attributes: this.model.toJSON(),
  url: this.model.url()
}); 
```

and in the template

```
<span class="name"><%= attributes.name %></span>
<%= attributes.id %> <%= url %> 
```

Hope this helps!

# jquery - 将 div 中的图像作为缩略图加载到 ListView

> ID：11739636
> 
> 赞同：0
> 
> 时间：2012-07-31T12:00:24.720
> 
> 标签：jquery, html, jquery-mobile, cordova

我有一个 div，我在其中加载了一些 HTML。我想做的是以某种方式从这个 div 中获取第一张图像（我需要搜索“img”，因为我无法控制它们的类/ID）并将其作为缩略图放在列表视图中。有任何想法吗？它适用于 Android 和 iPhone 上使用 jquery/html5 的 phonegap 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:07:17.623

例子：

*   [http://jsfiddle.net/MeyvK/1/](http://jsfiddle.net/MeyvK/1/)

JS：

```
// Append each image to the list
$('img').each(function() {
    var imageList = $('#thumbs');

    imageList.append('<li><a href="#"><img src="'+this.src+'"><h3>Thumbnail Title</h3><p>Thumbnail Description</p></a></li>');
});

// Refresh jQM Controls
$('#thumbs').listview('refresh'); 
```

HTML：

```
<!-- images -->
<img src="http://jquerymobile.com/demos/1.1.1/docs/lists/images/album-p.jpg" alt="full size image" />
<img src="http://jquerymobile.com/demos/1.1.1/docs/lists/images/album-xx.jpg" alt="full size image" />
<img src="http://jquerymobile.com/demos/1.1.1/docs/lists/images/album-ok.jpg" alt="full size image" />

<br />

<ul data-role="listview" id="thumbs">
    <li><a href="#">
        <img src="http://jquerymobile.com/demos/1.1.1/docs/lists/images/album-hc.jpg" />
        <h3>Thumbnail Title</h3>
        <p>Thumbnail Description</p>
    </a></li>
</ul>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:29:44.580

这可能有点通用，因为您没有提供任何 HTML，具有这样的结构

文本

更多文字

您可以使用以下 Jquery 检索第一个 img

```
$(document).ready(function() {
   var html = $("div img:first").attr('src');
    $("#list").append("<li><img src="" + html + "" /></li>");
}); 
```

这将检索 div 中第一个 img 标记的 src 属性，并将图像附加到您的列表中。

这是你追求的那种东西吗？

# c++ - 添加公共变量时崩溃

> ID：11739637
> 
> 赞同：4
> 
> 时间：2012-07-31T12:00:25.583
> 
> 标签：c++, variables, crash

我有一个相当大的 c++ 程序，包括一个“字符”类。在“Character.h”中，首先声明 struct CharacterSettings，然后声明类 Character（包括它们的构造函数）。

Character 具有（除其他外） CharacterSettings* 设置和 Point pos。CharacterSettings 有一个 Point preferredVelocity。

这工作正常。

但是，当我将任何公共变量添加到 Character 时，程序会在我调用它时崩溃：

```
drawLine(character.pos, character.pos+character.settings->preferredVelocity, character.radius/3.0, 128, 80, 0); 
```

程序在这一行崩溃：

```
Point operator + (const Point &p2) const
    { return Point(x + p2.x, y + p2.y); } 
```

我假设它正在尝试执行 character.pos+character.settings->preferredVelocity。我得到的错误信息是

```
Unhandled exception at 0x004bc4fc in ECMCrowdSimulation.exe: 0xC0000005: Access violation reading location 0x7f80000f. 
```

当我查看它时， p2.x 和 p2.y 是未定义的。没有额外的变量，它们不是。我完全不知道发生了什么，甚至不知道如何开始调试，也不知道您需要什么信息来帮助我！任何帮助将不胜感激！

编辑：这里至少是 Character.h 文件！

```
#pragma once

/* 
 * ECM navigation mesh / crowd simulation software
 * (c) Roland Geraerts and Wouter van Toll, Utrecht University.  
 * ---
 * Character: A single moving character in the simulation.
*/

#include "../ECM/GraphComponents/CMNode.h"
#include "VectorOperation.h"
#include "IndicativeRoute.h"
#include "float.h"

#define _USE_MATH_DEFINES
#include <math.h>

#include <vector>
using std::vector;
#include <queue>
using std::queue;

#define CHARACTER_RELAXATIONTIME 0.5f

typedef vector<CMNode>::iterator node_ptr;
class Corridor;
class CMMResult;

    struct CMEdge;
    class CMMInterface;
    class MicroInterface;
    class CMMSceneTransfer;

    struct CharacterSettings
    {
    private:
        bool index_bb_initialized, index_bb_cp_initialized, index_ir_circle_initialized, index_ir_circle_mu_initialized;
        bool index_2nd_ir_circle_initialized, index_2nd_ir_circle_mu_initialized;

    public:
        // --- Unique identifier within the simulation
        int id;

        // --- Velocity and speed
        Point preferredVelocity;// Newly computed velocity *before* local collision avoidance
        Point newVelocity;      // Newly computed velocity (+ collision avoidance), to be applied in the "next" simulation step

        float total_max_speed;  // Maximum possible speed throughout the entire simulation
        float max_speed;        // Maximum speed at this point in time
        float min_desired_speed;// Minimum speed that the character tries to reach when it is not standing still

        Point lastAttractionPoint;

        // --- IRM parameters
        CMMInterface* cmmImplementation; // the type of indicative route to follow within the corridor, e.g. "shortest path" or "weighted side".
        // Only used in WEIGHTED_SIDE:
        float sidePreference;       // bias to following a certain "side" of the corridor. Must be between -1 (left) and 1 (right).
        float sidePreferenceNoise;  // extra noise factor that will be added to sidePreference at each route element.
        // Used in WEIGHTED_SIDE and SHORTEST_PATH
        float preferred_clearance;  // Distance (m) by which the agent prefers to stay away from obstacles.

        // --- Micro simulation model (e.g. for collision avoidance between characters)
        MicroInterface* microImplementation;// the local model to use
        short micro_maxNrNeighbours;        // the number of neighbours to check in the local model
        float micro_personalSpaceRadius;    // radius of the personal space (m), on top of the character's physical radius.
                                            // Entering this disk (radius + personalSpace) is seen as a 'collision'.

        // --- Corridor/Path pointers
        node_ptr index_bb;          // point on backbone path (used for computing attraction force)
        node_ptr index_bb_cp;       // point on the backbone path(used for computing the closest point)
        curve_ptr index_ir_circle;  // index to last point on the indicative route that intersects with a circle
        float index_ir_circle_mu;   // factor wrt to point on the indicative route that intersects with a circle

        friend Character; // only the Character class can look into private members (WvT: ugly C++ practice, but it does work)

        CharacterSettings(int _id, 
            // speed
            float _total_max_speed, float _min_desired_speed,
            // type of indicative route
            CMMInterface* _cmmImplementation, float _sidePreference, float _sidePreferenceNoise, float _clearance, 
            // type of micro simulation model
            MicroInterface* _microImplementation) :

            id(_id), total_max_speed(_total_max_speed), min_desired_speed(_min_desired_speed), 
            cmmImplementation(_cmmImplementation), sidePreference(_sidePreference), sidePreferenceNoise(_sidePreferenceNoise), preferred_clearance(_clearance),
            microImplementation(_microImplementation)
        {
            // velocities
            newVelocity = Point(0, 0);
            max_speed = total_max_speed;
            preferredVelocity = Point(0, 0);

            // corridor/IRM pointers
            index_bb_initialized = false;
            index_bb_cp_initialized = false;
            index_ir_circle_initialized = false;
            index_ir_circle_mu_initialized = false;

            // default micro settings
            micro_maxNrNeighbours = 5; // default for Karamouzas 2010: 5
            micro_personalSpaceRadius = 0.0f; // default for Karamouzas 2010: 0.5
        }
    };

    class Character
    {
    public:
        Point pos;
        float radius;
        Point prevPos;
        int i;    //The thing that is pretending to be the culprit, without this, it works fine.

        // goal data
        Point goalPos;
        float goalRadius;

        // status flags
        bool reachedGoal;
        bool freeze; // whether or not the character is temporarily frozen
        bool freezeNotified;
        bool reachedDestSet;

        Point velocity; // last used velocity

        // corridor/path pointers
        Point retraction, cp;

        //Contains more detailed settings of agent
        CharacterSettings * settings;

    public:
        // --- constructor
        Character(int _id, Point &_pos, float _radius, 
            // speeds
            float _total_max_speed, float _min_desired_speed,
            // type of indicative route
            CMMInterface* _cmmImplementation, float _sidePreference, float _sidePreferenceNoise, float _clearance,
            // type of micro simulation model
            MicroInterface* _microImplementation) :

            pos(_pos), radius(_radius) 
        {
            settings = new CharacterSettings(_id, _total_max_speed, _min_desired_speed, 
                _cmmImplementation, _sidePreference, _sidePreferenceNoise, _clearance, _microImplementation); 

            velocity = Point(0, 0);
            prevPos=_pos;

            reachedGoal = true;
            freeze = false;
            freezeNotified = false;
            reachedDestSet = false;
            //isProxy = false;
        }

        // --- destructor
        void removeSettings();

        // computing the new actual velocity through an acceleration vector: Euler integration
        inline void integrateEuler(const Point &acc, float dtSim)
        {                   
            settings->newVelocity = velocity + dtSim * acc;
            trim(settings->newVelocity, settings->max_speed);
        }

        inline void updatePos(float dtSim) 
        {       
            prevPos=pos;

            // update velocity
            velocity = settings->newVelocity;

            // update position
            pos += dtSim * velocity;

            // if the character is close to its goal, it should stop moving     
            if(!reachedGoal // goal was not already reached
                && settings->lastAttractionPoint == goalPos 
                && distSqr(pos, goalPos) < 0.25)//goalRadius)
            {   
                reachedGoal = true;
                // (do not reset the velocity, so that we can keep the last walking direction)
            }
        }

        void resetIndices();
        node_ptr &getIndex_bb(Corridor &corridor);
        node_ptr &getIndex_bb_cp(Corridor &corridor);
        curve_ptr &getIndex_ir_circle(IndicativeRoute &ir);
        float &getIndex_ir_circle_mu();
        Point &getRetraction() { return retraction; }
        Point &getClosestPoint() { return cp; }

        // computing the cost of some edge (in A*), by using personal preferences
        float getEdgeCost(const CMEdge& edge, float activeFraction);

        // computing the character's area, based on its radius
        float getArea() const;

    }; 
```

使一切崩溃的事情是添加 'int i' 。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T12:41:26.007

当使用旧版本头文件编译的文件与使用新版本编译的头文件链接时，通常会发生类似这样的奇怪问题。在这种情况下，两个文件之间的对象布局可能不同（至少，它`sizeof`是不同的）。

因此，在一个文件中，对象的所有内容可能看起来都是正确的，但是一旦传递给另一个文件中的函数，您就会得到完全随机的行为。

在这种情况下，重建整个项目可以解决问题。更好的是，如果您手动编写 Makefile，请尝试修复依赖关系。如果你使用 gcc/g++，你可以使用这样的命令来生成 Makefile 可接受的依赖：

```
g++ -MM -MG -Ipath/to/includes/that/should/be/part/of/dependency *.cpp 
```

# php - 使用 magento api 获取 Order_Item_Id

> ID：11739639
> 
> 赞同：1
> 
> 时间：2012-07-31T12:00:28.563
> 
> 标签：php, api, magento, xml-rpc

我想在 php 中使用 magento api 在 magento 商店中创建发票。为此，我想为特定数量和项目创建发票意味着如果有人想以特定数量为一件项目开票，那么应该完成。我的代码适用于数组() 或所有数量。下面是创建发票的伪代码

```
$client = new Zend_XmlRpc_Client('http://127.0.0.1:8080/AndroidMagento/api/xmlrpc')
$session = $client->call('login', array('tester','tester'));
$saleorderno = '100000007';

Mage::init();
$order = Mage::getModel('sales/order')->load($saleorderno);
$orderItems = $order->getAllItems();
$invoiceItems = array();

foreach ($orderItems as $_eachItem) {
$invoiceItems[$_eachItem->getItemId()] = $_eachItem->getQtyOrdered();
}

$result = $client->call('call',array($session,'sales_order_invoice.create',array($saleorderno,array('order_item_id' => 9474, 'qty' => 1),'Invoice Created by Test',false,false))); 
```

我已经看到了这个[链接](https://stackoverflow.com/questions/9678852/magento-sales-order-invoice-with-product-quantity-updation-using-api-not-working)，在那里我发现了一些想法，但我不能完全理解。我不明白如何获得**order_item_id**的价值。？？？
任何想法？？？请建议我提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:09:35.743

item_id 和 product_id 是不同的 id。

**订单或报价有 item_id 和 product_id。**

你可以试试这个：

```
$order = Mage::getModel('sales/order')->load($saleorderno);
$orderItems = $order->getAllItems();

foreach ($orderItems as $item){
      print_r($item->getData());
      print_r($item->getItemId()); //magic function to get ['item_id']
} 
```

您可以在“销售/报价”模型中执行此操作。

加油^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T20:19:31.103

尝试这个，

```
echo "<pre>";
$result = $client->call($session, 'sales_order.info', 'orderIncrementId');
print_r($result['item_id']);
print_r($result['product_id']); 
```

$result 将返回订单的所有信息，包括 item_id 和 product_id，

使用 $result['item_id'] 您可以将其传递给调用

> sales_order_invoice.create

然后做

```
$result = $client->call(
    $session,
    'sales_order_invoice.create',
    array('orderIncrementId' => '200000008', 
         array('order_item_id' => $result['item_id'], 
               'qty'           => $result['total_qty_ordered'])
    )
); 
```

和**qty**，你必须从 $result['total_qty_ordered']

*首先，尝试* `print_r[$result];` *然后你会从中得到一些提示。*

^^

# android - Android：在RelativeLayout中动态设置按钮的位置到屏幕的中心

> ID：11739641
> 
> 赞同：2
> 
> 时间：2012-07-31T12:00:30.390
> 
> 标签：android, position, android-relativelayout

关于动态设置按钮的位置有很多问题，但我只想将按钮的位置更改为屏幕中心。我的布局是RelativeLayout。

**更新：**

一开始，myButton 在 XML 中的位置设置为：

```
<Button
        android:id="@+id/myButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="Menu" /> 
```

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:28:49.083

请参见下面的示例（单击按钮，它将移动到中心）。

**活动主.xml**：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/root"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/my_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="Menu" />

</RelativeLayout> 
```

**MainActivity.java**：

```
public class MainActivity extends Activity {
    private View mView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mView = findViewById(R.id.my_view);
        mView.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                ViewGroup.LayoutParams vg_lp = mView.getLayoutParams();

                // Make sure we are in RelativeLayout
                if (vg_lp instanceof RelativeLayout.LayoutParams) {
                    RelativeLayout.LayoutParams rl_lp = new RelativeLayout.LayoutParams(vg_lp);
                    rl_lp.addRule(RelativeLayout.CENTER_IN_PARENT);
                    mView.setLayoutParams(rl_lp);
                }
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:08:55.100

尝试：

```
 ......
      RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) button.getLayoutParams();
      layoutParams.leftMargin = parentLayout.getWidth()/2;
      layoutParams.topMargin = parentLayout.getHeight()/2;
      button.setLayoutParams(layoutParams);
      ...... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:09:40.477

试试这个：

```
 RelativeLayout RL = (RelativeLayout)findViewById(R.id.relative_layout);
   RL.gravity(Gravity.CENTER); 
```

这样，RL 的所有子视图都将居中；

```
 Button anyButton = new Button(this);
   RL.addSubview(anyButton);//this genereted button will be in center as well 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T12:10:09.190

将此 2 行添加到要在 xml 文件中居中的组件：

```
android:layout_centerHorizontal="true"
android:layout_centerVertical="true" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T12:12:34.480

试试这个，

```
RelativeLayout my_layout = new RelativeLayout(this);
my_layout.setId(some_value);
Button my_btn = new Button(this);
RelativeLayout.LayoutParams my_params = new RelativeLayout.LayoutParams(btn_height,btn_width);
my_params.addRule(RelativeLayout.CENTER_IN_PARENT,my_layout.getId());
my_layout.addView(my_btn,my_params); 
```

# magento - 将magento站点从一台服务器移动到另一台服务器

> ID：11739642
> 
> 赞同：2
> 
> 时间：2012-07-31T12:00:36.013
> 
> 标签：magento

我有一个magento网站版本`1.4.1.1.`

我将网站升级为`1.7.0.2.`

现在想将升级后的 magento 移动到另一台服务器上。

我怎样才能做到这一点？

```
i planed to do this by downloading all files and upload it into new server.and import the database into the same databsae name. 
```

如果我按照上述步骤操作时出现任何问题。

或者是否有任何规则可以将 magento 站点从一台服务器移动到另一台服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:25:49.580

如果您的网站不是公开的，那么只需移动文件和数据库并修复数据库上的 base_urls。

如果您的网站是活动的，那么在移动网站上需要注意一两件事：

代码：

这很简单，静态资产可以预先移动到新服务器

*   很容易使用 rsync 或版本控制，甚至使用普通的旧 ftp 来执行
*   验证文件结构和权限

数据库：

这更复杂，因为您必须避免在切换到移动站点数据库后在旧服务器数据库上获得更多订单的差距您需要在移动数据库时关闭我们的站点

*   第一步将数据库移动到新服务器进行测试，测试是否一切正常
*   做一个你需要运行的查询以使其在新服务器上工作（基本网址等）
*   当您关闭站点并打开另一个站点时重复此过程

代码和数据库的过程：

*   在旧页面上添加一个维护页面，并带有适当的 http 标头
*   当站点关闭时将数据库移动到新服务器
*   打开您的新网站并进行短期验证是否一切正常
*   下一步是更改域以指向新服务器

移动领域

再次移动域有点棘手，因为可能会出现 DNS 中断，一些客户端会看到旧站点，而另一些客户端会看到新站点。

*   更改您的域规则以指向新服务器
*   未更改 DNS 的客户端 jet 将看到维护页面
*   已经拥有新 DNS 的客户端最终会在移动的站点上

这样您就可以确保您不会在两个站点上都收到订单。如果您的域完全更改，那么您还需要将您的 URLS 重新映射到每个搜索引擎的新域

# mysql - 如何在 MySQL 中找到非键盘字符？

> ID：11739645
> 
> 赞同：3
> 
> 时间：2012-07-31T12:00:43.253
> 
> 标签：mysql, matching

[与如何在 MySQL 中找到非 ASCII 字符的](https://stackoverflow.com/questions/401771/how-can-i-find-non-ascii-characters-in-mysql)相关问题？.

我想在下面给出的表格中检查 col1 和 col2 是否存在非键盘字符的情况。

```
+------------+----------+
|    col1    |    col2  |
+------------+----------+
| rewweew\s  |  4rtrt   |
| é          |  é       |
| 123/       |  h|h     |
| ëû         |  û       |
| ¼          |  ¼       |
| *&^        |  *%$     |
| #$         |  ~!`     |
+------------+----------+ 
```

我想要的结果看起来像

```
 +--------+-------+
 |   é    |   é   |
 |   ëû   |   û   |
 |   ¼    |   ¼   |
 +--------+-------+ 
```

在我的情况下，**英文键盘中存在的所有字符都是允许的**，我只需要找出英文键盘中不存在的字符（如中文字符等）的行。

我从链接[如何在 MySQL 中找到非 ASCII 字符？](https://stackoverflow.com/questions/401771/how-can-i-find-non-ascii-characters-in-mysql)

```
SELECT * FROM tableName WHERE NOT columnToCheck REGEXP '[A-Za-z0-9.,-]'; 
```

但它不起作用，因为字符 ~`@!#$%^&*()_-+=|}]{[':;?/>.< 也是允许的，但它忽略了它们。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T12:49:16.580

这可能值得一试。

```
SELECT whatever
  FROM tableName 
 WHERE columnToCheck <> CONVERT(columnToCheck USING ASCII) 
```

该`CONVERT(col USING charset)`函数会将不可转换的字符转换为替换字符。然后，转换和未转换的文本将不相等。

当然，它基于 ASCII 字符库中存在和不存在的内容，而不是特定键盘上的内容。但它可能应该为你解决问题。有关更多讨论，请参阅此内容。 [http://dev.mysql.com/doc/refman/5.0/en/charset-repertoire.html](http://dev.mysql.com/doc/refman/5.0/en/charset-repertoire.html)

您可以使用任何您希望的字符集名称来代替`ASCII`. 例如，如果您想找出代码页 1257（立陶宛语、拉脱维亚语、爱沙尼亚语）中哪些字符无法正确呈现，请使用`CONVERT(columnToCheck USING cp1257)`

***编辑*** 您的评论提到您还需要检测 ASCII 字符集中的一些字符。我*想*你问的是所谓的控制字符，它的值从 0x00 到 0x1f，然后是 0x7f。@Joni Salonen 的方法帮助我们实现了目标，但我们需要以多字节字符安全的方式进行。

```
 SELECT whatever
   FROM tableName
  WHERE CONVERT(columnToCheck USING ASCII) <> columnToCheck
     OR CONVERT(columnToCheck USING ASCII) RLIKE '[[.NUL.]-[.US.][.DEL.]]' 
```

如果您查看[http://www.asciitable.com/](http://www.asciitable.com/)，您会看到这里的 OR 子句检测 ASCII 表的第一列中的字符，以及第四列中的最后一个字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T12:56:02.740

此查询将返回字符超出 ASCII 范围 0 - 127 的行：

```
SELECT * FROM tableName WHERE NOT columnToCheck REGEXP '^[[.NUL.]-[.DEL.]]*$' 
```

英文键盘是指美式键盘还是英式键盘？英国键盘包含一些非 ASCII 字符，例如英镑符号。如果您也想接受这些，则必须将它们添加到正则表达式中。

# javascript - 循环遍历表行并获取行中的每个值 - 发现错误？

> ID：11739647
> 
> 赞同：1
> 
> 时间：2012-07-31T12:00:54.573
> 
> 标签：javascript, jquery, html

下面我有一个简单的表，我试图循环并获取每行中每个单元格的值（如果有的话）`<td>s`。

但是我得到一个错误`find`，说不存在，并且添加了 jquery。你能帮忙吗？谢谢

```
$(document).ready(function () {
    var x = $('table tr:has(td)');
    $.each(x, function (i, v) {

        alert(
        v.find('td').eq(0).text()); + " ----" + v.find('td').eq(1).find('option:selected').val(););
    });

});

<table>
    <tbody>
        <tr>
            <th>a</th>
            <th>b</th>
        </tr>
        <tr>
            <td>test</td>
            <td>
                <select>
                    <option value="yes">yes</option>
                    <option selected="selected" value="no">no</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>test</td>
            <td>
                <select>
                    <option value="yes">yes</option>
                    <option selected="selected" value="no">no</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>test</td>
            <td>
                <select>
                    <option value="yes">yes</option>
                    <option selected="selected" value="no">no</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>test</td>
            <td>
                <select>
                    <option value="yes">yes</option>
                    <option selected="selected" value="no">no</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>test</td>
            <td>
                <select>
                    <option value="yes">yes</option>
                    <option selected="selected" value="no">no</option>
                </select>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:06:54.227

```
$(document).ready(function () {
    $('table tr:has(td)').each(function (tr) {
        $('td', tr).each(function (td) {
          alert($(td).text());
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:02:37.957

`v`是 DOM 上的元素，因此您需要将其包装到`$`函数中以链接另一个 jQuery 方法：`$(v).find(...)`

注意：你也可以写`$(this).find(...)`

# openerp - 移动端 OpenERP 自定义模块

> ID：11739648
> 
> 赞同：2
> 
> 时间：2012-07-31T12:00:57.773
> 
> 标签：openerp, odoo

我正在 OpenERP 中制作自定义模块。我有一个列表（树）视图和一个表单视图。我可以查看和编辑记录。当我使用同一模块的移动视图时，我可以看到主菜单并浏览到子菜单，但看不到列表视图或表单视图。我所能看到的只是一个空白页。我的列表定义磨损了吗？

```
<?xml version="1.0"?>    
<tree string = "Camera">    
    <field name = "a"/>    
    <field name = "b"/>    
</tree> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:36:18.023

我相信在选择了一个菜单选项后，下面的菜单就是一个简单的列表，上面有每条记录的名称。

可能你还没有任何记录。

`name`或者可能是您在对象模型和视图上没有字段。添加该字段（make it `required`），或者设置对象的`_rec_name`属性（例如：）`_rec_name = 'a'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:20:09.300

*   OE Mobile View 为只读模式
*   它没有任何类型的视图（如树或 for 或看板），它只是显示记录视图并显示您具有价值。它在列表中列出了 valeu 的名称，然后如果您单击它，它会打开详细视图，其中显示其他详细信息。是的，尝试在您的模型上添加记录。

谢谢你

# objective-c - 如何在 uipickerview 中添加枚举作为数据源？

> ID：11739650
> 
> 赞同：0
> 
> 时间：2012-07-31T12:01:02.870
> 
> 标签：objective-c, ios, enums, xcode4.2, uipickerview

我在**ApplicationConstants.h**文件中创建了一个枚举，枚举如下。

> typedef enum { CurrentLocation = 0, CurrentCity, CurrentRegion } enumLocation;

现在的问题是我不知道如何将此枚举设置为[UIPickerView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html)中的数据源！谁能给我这个想法？我以前使用[NSArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)作为数据源。但我现在想要枚举。因为这个问题，我卡住了。你能帮助我吗 ？所以我可以继续我的申请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:11:20.917

您不能直接显示枚举的标识符。您必须准备一个大的 if/else/switch 块来为每个元素准备一个字符串，或者为数组中的每个元素添加字符串并从那里按索引选择。

在程序中通常使用枚举类型而不是幻数，因此旨在使代码更容易被人类阅读，但底层表示是一种基本数据类型（int、char 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T11:26:25.223

对于 UIPickerViewDataSource

```
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component{
        return LOCATION_COUNT;
} 
```

使用枚举计数的技巧

```
typedef enum { CurrentLocation = 0, CurrentCity, CurrentRegion, LOCATION_COUNT} enumLocation; 
```

对于 UIPickerViewDelegate

```
- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
     [self.enumLocationStringDict objectForKey:[NSNumber numberWithInt:row]]
} 
```

字典可以如下

```
self.enumLocationStringDict = [NSDictionary dictionaryWithObjectsAndKeys:
                              @"CurrentLocation", [NSNumber numberWithInt:CurrentLocation],
                              @"CurrentCity", [NSNumber numberWithInt:CurrentCity],
                              @"CurrentRegion", [NSNumber numberWithInt:CurrentRegion],
                              ,nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T14:38:46.077

您可以选择为其实例定义简单宏的方式，如下所示：

在头文件（**.h**）中：

```
#define NAMEOF(var) @#var

typedef enum : NSInteger {
    CustomTypeUknown = 0,
    CustomTypeSomething,
    CustomTypeParticularValue,
    CustomTypeBoringValue,
} CustomType; 
```

在实施文件（**.m**）中

```
NSArray *_array = [NSArray arrayWithObjects:NAMEOF(CustomTypeUknown), NAMEOF(CustomTypeSomething), NAMEOF(CustomTypeParticularValue), NAMEOF(CustomTypeBoringValue), nil]; 
```

对象将是带有名称的字符串，但为了安全起见，您可以通过 logging 检查值`_array`：

```
NSLog(@"%@", _array); 
```

它应该是这样的：

```
(
    CustomTypeUknown,
    CustomTypeSomething,
    CustomTypeParticularValue,
    CustomTypeBoringValue
) 
```

如果我没有误解你的问题，那就是你在寻找......

# extjs - 在 ext Js 中设置和删除只读属性

> ID：11739652
> 
> 赞同：3
> 
> 时间：2012-07-31T12:01:05.780
> 
> 标签：extjs, readonly

在 extJs 中，我需要禁用一个字段，直到单击编辑按钮。

```
xtype:'textfield',
fieldLabel: 'Address',
name:'streetAddress',
labelWidth: 48,                         
maxLength: 100,                         
cls: 'appAddresscls',
id: 'resume-applicantdetails-view-address',
allowBlank : false,
//readOnly:true,
skipValue:true 
```

加载时我打电话

```
Ext.getCmp('resume-applicantdetails-view-address').getEl().dom.setAttribute('readOnly', true); 
```

编辑时

```
Ext.getCmp('resume-applicantdetails-view-address').getEl().dom.removeAttribute('readOnly'); 
```

但该字段始终处于编辑模式。实际上我尝试这样做是因为 IE 中的禁用字段显示为灰色。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T06:51:26.950

```
xtype:'textfield',
fieldLabel: 'Address',
name:'streetAddress',
labelWidth: 48,                         
maxLength: 100,                         
cls: 'appAddresscls',
id: 'resume-applicantdetails-view-address',
allowBlank : false,
readOnly:false,
skipValue:true 
```

加载时我打电话

```
Ext.getCmp('resume-applicantdetails-view-address').setReadOnly(true); 
```

编辑时

```
Ext.getCmp('resume-applicantdetails-view-address').setReadOnly(false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:05:04.110

您可以保持 disabled:true 并在您的页面中添加以下 css 以使这些字段与其他字段一样正常：

```
.x-item-disabled .x-form-item-label,
.x-item-disabled .x-form-cb-label {
     filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=90);
     opacity: 0.9; 
 } 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T14:48:00.303

**设置禁用：**

```
Ext.get('resume-applicantdetails-view-address').set({disabled:'disabled'}); 
```

**要删除禁用：**

```
Ext.get('resume-applicantdetails-view-address').set({disabled:''}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T12:27:46.637

将字段设置为禁用：在配置中设置为 true，然后在编辑按钮调用功能中设置为启用。

```
Ext.getCmp('resume-applicantdetails-view-address').setDisabled(false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-13T06:05:06.763

它有助于在运行时更改 readOnly 属性：

```
component.el.dom.readOnly = true; 
```

# xml - 获取元素的位置

> ID：11739655
> 
> 赞同：0
> 
> 时间：2012-07-31T12:01:23.167
> 
> 标签：xml, xslt, xslt-1.0

假设我有一个 xml

```
<Root>
<TB>
..
</TB>
<TB>
..

</TB>
<TB>
..
<DIACT>2</DIACT>
</TB>
<TB>
...
<DIACT>3</DIACT>
</TB>
<TB>
----
<DIACT>4</DIACT>
---
</TB>
</Root> 
```

我想使用 xslt 映射获取 DIACT 不为空或存在 DIACT 节点的第一个 TB 节点的**位置。**就像在这种情况下，位置应该给我输出 3。因为第 3 个 TB 节点是第一个 DIACT 不为空的节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:07:59.547

**使用**：

```
count(/*/TB[DIACT][1]/preceding-sibling::TB) +1 
```

由于您需要此进行进一步处理，请设置一个具有上述值的变量：

```
<xsl:variable name="vPos" 
              select="count(/*/TB[DIACT][1]/preceding-sibling::TB) +1"/> 
```

**或者，可以使用`xsl:number`**：

```
 <xsl:variable name="vPos2">
    <xsl:number count="TB"/>
  </xsl:variable> 
```

**这是这两种技术的简单演示：**

```
 <xsl:template match="/">
    <xsl:variable name="vPos"
        select="count(/*/TB[DIACT][1]/preceding-sibling::TB) +1"/>

    <xsl:value-of select="$vPos"/>
=========== 
    <xsl:for-each select="/*/TB[DIACT][1]">
      <xsl:variable name="vPos2">
        <xsl:number count="TB"/>
      </xsl:variable>
      <xsl:value-of select="$vPos2"/>
    </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Root>
    <TB> .. </TB>
    <TB> ..  </TB>
    <TB> .. 
        <DIACT>2</DIACT>
    </TB>
    <TB> ... 
        <DIACT>3</DIACT>
    </TB>
    <TB> ---- 
        <DIACT>4</DIACT> --- 
    </TB>
</Root> 
```

**产生了两个正确的结果**：

```
3
=========== 
3 
```

# sharepoint-2010 - 为什么多行文本字段在sharepoint的警报邮件中被删除

> ID：11739658
> 
> 赞同：1
> 
> 时间：2012-07-31T12:01:30.023
> 
> 标签：sharepoint-2010

我已经在共享点自定义列表上创建了一个警报作为即时警报。当我修改多行文本的字段时，然后在警报电子邮件中，我得到了以前和当前的项目值删除线。有人可以帮我弄清楚为什么会这样吗？

警报适用于单行文本字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:20:51.543

解决问题的步骤：

1.  转到位于的 alerttemplate.xml 文件`"C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\TEMPLATE\XML\"`
2.  保留副本以`alerttemplate.xml`供备份。
3.  编辑原始的 alerttemplate.xml 文件。

4.  根据您的列表类型，将限制长度设置为 1000。（如果列表是自定义列表，请编辑下面的行`GenericList`，依此类推）

    ```
    <Limit Len="1000" AutoHyperLinkNoEncoding="TRUE" MoreText="...">
           <GetVar Name="OldValue#{Field}" />
     </Limit> 
    ```

5.  iis重置

Shukraj Khadse L&T 信息技术 | Vashi，新孟买 | 印度

# php - PHP会话超时为0，但会话仍在过期

> ID：11739660
> 
> 赞同：4
> 
> 时间：2012-07-31T12:01:32.083
> 
> 标签：php, mysql, apache, session, timeout

我正在使用最新版本的 PHP 和 mysql 运行 Apache 2.2。

在我的 PHP.ini 文件中，我可以看到会话超时设置为 0，这意味着会话保持活动状态直到浏览器关闭。

然而，我注意到，有时早上进来，打开浏览器并在一夜之间登录时，会话似乎已经过期。

是否有任何其他配置设置会导致会话过期？我只是想玩弄这些价值观，看看什么样的时间最适合我的网站。

非常感谢

编辑

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:13:33.513

你可以试试：

[http://in2.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime](http://in2.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)

你可以把它放在你的 PHP 文件中，第二个参数是秒数，之后数据将被视为“垃圾”并可能被清理。：

```
ini_set('session.gc_maxlifetime', 30*60); 
```

希望这有帮助！

**编辑：**

是的，我应该提到这一点，感谢您指出。

正如威廉所建议的那样

“必须在 session_start() 之前调用该函数； – Willem”

例子：

```
<?php

 ini_set('session.gc_maxlifetime', 30*60);
 session_start();

 ?> 
```

# objective-c - if else 语句的预期表达式错误

> ID：11739663
> 
> 赞同：0
> 
> 时间：2012-07-31T12:01:48.073
> 
> 标签：objective-c, ios, xcode, if-statement

Xcode 抱怨`else if`我的代码中的第二条语句“需要预期的表达式”。我已经尝试使用我在这里查看过的代码中的括号，但这不起作用并且不确定它现在想要什么表达？工作正常，直到我添加第二个`else if` 我意识到这可能是基本的目标 C 东西，但是从来没有为两个以上的项目做过 if 语句我有点卡住了

```
-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{

if ([text1 isFirstResponder])return arrStatus.count;

else

   if ([text2 isFirstResponder]);return arrStatus2.count;

   else ///<<<<< wants an expected expression here

       if ([text3 isFirstResponder]);return arrStatus2.count;

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:04:14.180

你的第二个`if`语句只有一个额外的分号。它应该是：`if ([text2 isFirstResponder]) return arrStatus2.count;`

PS。您在 3 日也犯了同样的错误`if`……即使是单行，您也应该真正考虑使用大括号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T12:04:17.527

`if`在某些语句之后有虚假的分号：

```
if ([text2 isFirstResponder]);   <--- here 
```

除此之外，您的代码缩进很差，您应该停止将语句与`if`/行放在同一行`else if`：

```
-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    if ([text1 isFirstResponder])
        return arrStatus.count;
    else if ([text2 isFirstResponder])
        return arrStatus2.count;
    else if ([text3 isFirstResponder])
        return arrStatus2.count;
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T12:04:45.727

你的函数/方法需要返回一些东西，在这种情况下是一个 NSInteger。然而，您的代码中可能存在没有 return 语句的情况。在您的最后一个 else 中，如果 if 语句不正确，则不会返回任何内容。

```
if ([text1 isFirstResponder]) {
   return arrStatus.count;
} else {
   if ([text2 isFirstResponder]) {
       return arrStatus2.count;
   } else {
        if ([text3 isFirstResponder]) {
           return arrStatus2.count;
        }
        // nothing will be returned here
        // you can return nil or actual 0
        // return nil;
        // return 0;
   } 
```

}

# php - 我的 error_log 文件在哪里？

> ID：11739664
> 
> 赞同：0
> 
> 时间：2012-07-31T12:01:52.923
> 
> 标签：php, codeigniter, error-logging

我正在尝试在使用 CodeIgniter 时将一些信息写入错误日志文件。

**我就是这样做的：**

```
error_log($output,3,"dklog.html"); 
```

我什至尝试过预先创建一个`dklog.html`文件（具有读写访问权限）并指向它的完整路径：

```
error_log($output,3,"/public_html/r/dklog.html"); 
```

但是，在这些情况下，我都没有看到任何文件的任何输出。（实际上，在第一种情况下，我在任何地方都找不到任何 dklog.html 文件......）。不，`$output`不是空的。

怎么了？

* * *

**更新：**伙计们，非常感谢有用的答案。然而，这是问题与error_log或codeigniter本身无关的时候之一，而是我一直在使用的更模糊的东西......无论如何，非常感谢！（问题可能会结束）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:04:02.450

确保您正在写入的日志文件和目录可由 Web 服务器用户写入。如果它包含无法写入日志文件的错误消息，请检查您的常规错误日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:04:11.893

检查您的配置。

```
grep log_errors /etc/php.ini 
```

或者无论你在哪里`php.ini`。必须将此选项设置为`On`否则不记录错误。

**编辑**由于错误的假设而更新......感谢您的提示。

# jquery-plugins - symfony2 的可编辑表单

> ID：11739666
> 
> 赞同：1
> 
> 时间：2012-07-31T12:02:07.723
> 
> 标签：jquery-plugins, symfony, jeditable

我在我的模板中使用 jQuery 插件 jeditable：http: [//www.appelsiini.net/projects/jeditable](http://www.appelsiini.net/projects/jeditable) 所以，如果我点击一个可编辑的元素，文本会变成一个带有文本字段和提交按钮的表单。

```
<script type="text/javascript">
$(document).ready(function() {
    $('.edit').editable('{{ path('group_update', { id: group.id }) }}', { 
        type    : 'textarea',
        submit  : 'OK'
    });
});
</script> 
```

在我的身体里，我有这样的东西：

```
<div class="edit">{{ group.name }}</div> 
```

但有一个问题。当我单击提交按钮时，没有任何反应。不转发我的操作（实际上没有任何反应）。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:15:59.193

如果您需要处理从您的操作接收到的数据，您应该将数据提交给函数而不是 URL。

下面的示例取自[文档](http://www.appelsiini.net/projects/jeditable)

```
 $('.editable').editable(function(value, settings) { 
     console.log(this);
     console.log(value);
     console.log(settings);
     return(value);
 }, { 
 type    : 'textarea',
 submit  : 'OK', 
```

});

您可以将数据传递给您的函数，该函数将对您的操作进行 AJAX 调用，并以您需要的方式处理所有接收到的数据

# vba - 如何在 MS Office 中使用宏创建文本文件？

> ID：11739668
> 
> 赞同：0
> 
> 时间：2012-07-31T12:02:07.667
> 
> 标签：vba, ms-office, ms-word

我有word文档。我想在打开此文档时创建一个文本文件。如何使用宏创建文本文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:29:37.683

尝试这个。`Document_Open()`您可以在事件中创建文本文件

```
Private Sub Document_Open()
    Dim filesize As Integer
    Dim FlName As String

    FlName = "C:\Sample.Txt"

    '~~> get a free file handle
    filesize = FreeFile()

    '~~> Open your file
    Open FlName For Output As #filesize

    '~~> Export Text
    Print #filesize, "Hello World"
    Close #filesize
End Sub 
```

# wpf - 如何在 TextBox 中设置前导？

> ID：11739670
> 
> 赞同：0
> 
> 时间：2012-07-31T12:02:13.457
> 
> 标签：wpf, textbox

我有一个带有一些文本的 TextBox 控件。我想修改这个：该文本框中的[链接](http://en.wikipedia.org/wiki/Leading)。

这个怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:09:29.317

你可以使用 TextBlock.LineHeight 和 TextBlock.LineStackingStrategy :-)

# asp.net - 基于某些角色和设置自定义页面控件的最佳解决方案

> ID：11739671
> 
> 赞同：1
> 
> 时间：2012-07-31T12:02:21.513
> 
> 标签：asp.net, user-interface, customization, roles

我在 asp.net 中有几个页面，每个页面都有很多控件。我的应用程序中还有一些角色，每个角色都有一些设置选项。现在我想根据这些设置准备我的页面。可能不太清楚，所以请看我的例子。

示例：页面中有一些按钮、一些文本框、一些日期时间选择器和一个图表，现​​在我想要的是当用户看到这个页面时，控件会根据用户角色出现和消失。重要的是我不想只有可见和不可见的控件，在某些情况下我需要显示一些自定义的控件。例如更改图表数据源、限制选择日期时间等。

我能想到的第一个解决方案是将设置保存在数据库中，并在用户访问页面后，从数据库中获取设置，并基于这些设置，我可以使用条件短语（if 和 else）自定义控件。但我认为这不是一个好方法，我的页面会变得非常混乱。

请帮助我提供任何更好的解决方案，如果您知道有关它的良好参考，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:17:13.837

请参阅此链接...使用`ControlAdapters`可能会帮助您...

[在 asp.net 中基于角色启用/禁用控件](https://stackoverflow.com/questions/8708489/role-based-enabling-disabling-of-controls-in-asp-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:06:22.680

您必须使用 Thread.CurrentPrincipal。

A. 当用户登录到您的应用程序时，您将他的身份附加到线程，例如

```
string[] rolesArray = .....; //Get roles from dataBase by identity.
Thread.CurrentPrincipal = new YourCustomPrincipal(new YourCustomIdentity("YouName", "..."), rolesArray); 
```

B. 当您浏览您的应用程序时，您会测试 Thread.CurrentPrincipal

```
IPrincipal threadPrincipal = Thread.CurrentPrincipal;
if(threadPrincipal.Roles.Contains("roleTest"))
{
  //Adjust your control
} 
```

# speech-recognition - 为什么我在此语音识别代码中缺少 an4-1-1.match 文件？

> ID：11739675
> 
> 赞同：0
> 
> 时间：2012-07-31T12:02:43.963
> 
> 标签：speech-recognition, cmusphinx

我在语音识别的解码部分遇到问题。我按照[这里](http://www.speech.cs.cmu.edu/sphinx/tutorial.html)的步骤。当我输入:`perl scripts_pl/decode/slave.pl`时，我收到以下错误：

> 模块：使用先前训练的模型进行解码解码从 0 开始解码 130 个段（1 的第 1 部分）在 /home/go/Documents/tutorial/an4 找不到 /home/go/Documents/tutorial/an4/bin/sphinx3_decode 的可执行文件/scripts_pl/decode/../lib/SphinxTrain/Util.pm 第 299 行。对齐结果以查找错误率无法打开 /home/go/Documents/tutorial/an4/result/an4-1-1.match word_align。 pl 在 scripts_pl/decode/slave.pl 第 173 行出现错误代码 65280 失败。

这是`word_align.pl`第 179 行

```
#sub initialize {
    my ($ref_words, $hyp_words, $align_matrix, $backtrace_matrix) = @_;

    # All initial costs along the j axis are insertions
    for (my $j = 0; $j <= @$hyp_words; ++$j) {
    $$align_matrix[0][$j] = $j;
    }
    for (my $j = 0; $j <= @$hyp_words; ++$j) {
    $$backtrace_matrix[0][$j] = INS;
    }
    # All initial costs along the i axis are deletions
    for (my $i = 0; $i <= @$ref_words; ++$i) {
    $$align_matrix[$i][0] = $i;
    }
    for (my $i = 0; $i <= @$ref_words; ++$i) {
    $$backtrace_matrix[$i][0] = DEL;
    }
#} 
```

和`Util.pm`第 299 行

> die "找不到 $cmd 的可执行文件" 除非 -e $cmd;

为什么我错过了`an4-1-1.match file`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:11:23.257

> 我按照这里的步骤[http://www.speech.cs.cmu.edu/sphinx/tutorial.html](http://www.speech.cs.cmu.edu/sphinx/tutorial.html)

本教程已过时。最近的一个是[http://cmusphinx.sourceforge.net/wiki/tutorialam](http://cmusphinx.sourceforge.net/wiki/tutorialam)

> 找不到 /home/go/Documents/tutorial/an4/bin/sphinx3_decode 的可执行文件

这是问题的一个原因。您需要将可执行文件复制到指定位置。然后再次运行解码。

# matplotlib - 在 Matplotlib 中向上移动 x 或 y 刻度

> ID：11739680
> 
> 赞同：0
> 
> 时间：2012-07-31T12:02:54.353
> 
> 标签：matplotlib

我有一个带有随机值的 numpy 数组。我使用 imshow() 绘制了数组中的值，以便每个元素显示为灰度正方形。问题是标签（0、1、2 等）从底角开始。我想稍微移动它们，使它们在每个正方形下方居中。有没有一种直接的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:23:46.690

刚刚找到[http://matplotlib.sourceforge.net/examples/pylab_examples/image_interp.html](http://matplotlib.sourceforge.net/examples/pylab_examples/image_interp.html) 最直接的方法就是让 grid(True) ->woohoo！

# ios - NSdate 的 UIDatePicker 问题

> ID：11739681
> 
> 赞同：1
> 
> 时间：2012-07-31T12:03:00.390
> 
> 标签：ios, nsdate, nsdateformatter, uidatepicker

我有一个来自我的数据库的旧日期的 NSDate 对象。现在我需要将我的 UIDatePicker 日期设置为当前日期，但使用从我的数据库中获得的存储的 NSDate 对象的小时和分钟值。

那么如何从旧日期中提取小时和分钟并将其设置为当前的 UIDatePicker NSdate。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:28:27.467

由于 NSDate 在初始化后无法更改，因此您必须重新创建它：

要获取 NSDate 的小时和分钟部分，请使用 NSCalendar：

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *dateComponents = [gregorian components:(NSHourCalendarUnit  | NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate:yourOriginalDateHere];
NSInteger hour = [dateComponents hour];
NSInteger minute = [dateComponents minute];
NSInteger second = [dateComponents second]; 
```

然后你可以创建一个新的 NSDate（也使用 NSCalendar）：

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *dateComponents = [gregorian components:(NSYearCalendarUnit  | NSMonthCalendarUnit | NSDayCalendarUnit) fromDate:[NSDate date]]; //[NSDate date] is the current date
[dateComponents setHour:hour];
[dateComponents setMinute:minute];
[dateComponents setSecond:second];
NSDate *newDate = [gregorian dateFromComponents:dateComponents]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T12:32:58.420

```
 NSCalendar *cal = [NSCalendar autoupdatingCurrentCalendar];
 NSDateComponents *dbDateComps = [cal components:(kCFCalendarUnitHour | kCFCalendarUnitMinute) fromDate:YOUR_DATE_FRM_DB];
 NSDateComponents *currentComps = [cal components:(kCFCalendarUnitYear | kCFCalendarUnitMonth | kCFCalendarUnitDay) fromDate:[NSDate date]];
 [currentComps setHour:[dbDateComps hour]];
 [currentComps setMinute:[dbDateComps minute]];

 NSDate *resultDate = [currentComps date]; 
```

# c# - 无法访问文件，因为它正被另一个程序使用

> ID：11739683
> 
> 赞同：2
> 
> 时间：2012-07-31T12:03:06.403
> 
> 标签：c#, file-io

我正在尝试删除行尾的空格，然后该行将写入另一个文件。

但是当程序到达时`FileWriter`它给了我以下错误

> 进程无法访问，因为它正被另一个进程使用。

代码如下。

```
private void FrmCounter_Load(object sender, EventArgs e)
{
        string[] filePaths = Directory.GetFiles(@"D:\abc", "*.txt", SearchOption.AllDirectories);
        string activeDir = @"D:\dest";
        System.IO.StreamWriter fw;
        string result;

        foreach (string file in filePaths)
        {
            result = Path.GetFileName(file);
            System.IO.StreamReader f = new StreamReader(file);
            string newFileName = result;
            // Combine the new file name with the path
            string newPath = System.IO.Path.Combine(activeDir, newFileName);
            File.Create(newPath);

            fw = new StreamWriter(newPath);

            int counter = 0;
            int spaceAtEnd = 0;
            string line;

            // Read the file and display it line by line.
            while ((line = f.ReadLine()) != null)
            {
                if (line.EndsWith(" "))
                {
                    spaceAtEnd++;
                    line = line.Substring(0, line.Length - 1);
                }
                fw.WriteLine(line);
                fw.Flush(); 
                counter++;
            }

            MessageBox.Show("File Name : " + result);
            MessageBox.Show("Total Space at end : " + spaceAtEnd.ToString());
            f.Close();
            fw.Close();
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:12:03.197

`File.Create`本身返回一个流。

使用该流写入文件。您收到此错误的原因是因为返回的 Stream`File.Create`已打开，并且您正尝试再次打开该文件以进行写入。

关闭由返回的流`File.Create`或更好地使用该流进行文件写入或使用

```
Stream newFile = File.Create(newPath);
fw = new StreamWriter(newFile); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:49:03.447

即使您解决了最初的问题，如果您想将所有内容写入原始位置的新文件，您可以尝试将所有数据读入数组并关闭原始`StreamReader`. 性能说明：如果您的文件足够大，则此选项不会是最佳性能。

而且您不需要`File.Create`，因为`StreamWriter`如果文件不存在，将创建一个文件，或者默认覆盖它，或者如果您将`append`参数指定为`false`.

```
result = Path.GetFileName(file);
String[] f = File.ReadAllLines(file);  // major change here... 
                                       //  now f is an array containing all lines 
                                       //  instead of a stream reader

using(var fw = new StreamWriter(result, false))
{
    int counter = f.Length; // you aren't using counter anywhere, so I don't know if 
                            //  it is needed, but now you can just access the `Length`  
                            //  property of the array and get the length without a 
                            //  counter

    int spaceAtEnd = 0;

    // Read the file and display it line by line.
    foreach (var item in f)
    {
        var line = item;

        if (line.EndsWith(" "))
        {
            spaceAtEnd++;
            line = line.Substring(0, line.Length - 1);
        }
        fw.WriteLine(line);
        fw.Flush(); 
    }
}

MessageBox.Show("File Name : " + result);
MessageBox.Show("Total Space at end : " + spaceAtEnd.ToString()); 
```

此外，您不会使用此方法从行尾删除多个空格。如果您需要这样做，请考虑替换`line = line.Substring(0, line.Length - 1);`为`line = line.TrimEnd(' ');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:11:17.347

在您尝试写入文件之前，您必须关闭正在阅读的所有文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T12:11:38.593

编辑：

Zafar 是正确的，但是，也许这可以解决问题。

因为 File.Create 返回一个流......那个流已经打开了你的目标文件。这将使事情更清楚：

```
File.Create(newPath).Close(); 
```

使用上面的行，使它工作，但是，我建议正确地重写它。这仅用于说明目的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T12:11:46.330

**在using 语句**中写入流，例如：

```
using (System.IO.StreamReader f = new StreamReader(file))
{
   //your code goes here
} 
```

# machine-learning - 尝试自己在MATLAB中模拟一个神经网络

> ID：11739684
> 
> 赞同：3
> 
> 时间：2012-07-31T12:03:14.900
> 
> 标签：machine-learning, neural-network, matlab

我试图创建一个神经网络来估计 y = x ^ 2。所以我创建了一个合适的神经网络，并给它一些输入和输出的样本。我试图用 C++ 构建这个网络。但是结果和我预想的不一样。

使用以下输入：

> 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 4 4 4 4 4 64 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 -1 -2 -3 -4 -5 -6 -7 -8 -9 -10 -11 -12 -13 -14 -15 -16 -17 -18 -19 -20 -21 -22 -23 -24 -25 -26 -27 -28 -29 -30 -31 -32 -33 -34 -35 -36 -37 -38 -39 -40 -41 -42 -43 -44 -45 -46 -47 -48 -49 -50 -51 -52 -53 -54 -55 -56 -57 -58 -59 -60 -61 -62 -63 -64 -65 -66 -67 -68 -69 -70 -71

以及以下输出：

> 0 1 4 9 16 25 36 49 64 81 100 121 144 169 196 225 256 289 324 361 400 441 484 529 576 625 676 729 784 841 900 961 1024 1089 1156 1225 1296 1369 1444 1521 1600 1681 1764 1849 1936 2025 2116 2209 2304 2401 2500 2601 2704 2809 2916 3025 3136 3249 3364 3481 3481 3600 3721 3844 3969 4096 4225 4225 4356 4489 4489 4624 4761 4761 4900 5041 4900 5041 1 4 9 16 25 841 900 961 1024 1089 1156 1225 1296 1369 1369 1444 1521 1600 1681 1764 1849 1936 2025 2116 2209 2209 2304 2500 2500 2500 2601 2704 2704 2704 2704 2709 2916 2809 2916 3025

我使用了拟合工具网络。与矩阵行。训练是 70%，验证是 15%，测试也是 15%。隐藏神经元的数量是两个。然后在命令行中我写了这个：

```
purelin(net.LW{2}*tansig(net.IW{1}*inputTest+net.b{1})+net.b{2}) 
```

其他信息：

我的 net.b[1] 是：-1.16610230053776 1.16667147712026

我的 net.b[2] 是：51.3266249426358

而 net.IW(1) 是：0.344272596370387 0.344111217766824

net.LW(2) 是：31.7635369693519 -31.8082184881063

当我的 inputTest 是 3 时，这个命令的结果是 16，而它应该是大约 9。我是不是在某个地方出错了？

*[我在 MATLAB](https://stackoverflow.com/questions/2417716/neural-network-in-matlab)*中发现 Stack Overflow post Neural network包含一个类似我的问题的问题，但有一点不同，不同之处在于该问题的输入和输出范围是相同的，但在我的问题中不是。该解决方案说我需要扩大结果，但我怎样才能扩大我的结果呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T20:01:11.377

你是对的关于缩放。如[链接答案](https://stackoverflow.com/a/2420953/97160)中所述，默认情况下，神经网络将输入和输出缩放到范围 [-1,1]。这可以在网络处理功能配置中看到：

```
>> net = fitnet(2);

>> net.inputs{1}.processFcns
ans =
    'removeconstantrows'    'mapminmax'

>> net.outputs{2}.processFcns
ans =
    'removeconstantrows'    'mapminmax' 
```

应用于输入/输出的第二个预处理函数[`mapminmax`](http://www.mathworks.com/help/toolbox/nnet/ref/mapminmax.html)具有以下参数：

```
>> net.inputs{1}.processParams{2}
ans =
    ymin: -1
    ymax: 1

>> net.outputs{2}.processParams{2}
ans =
    ymin: -1
    ymax: 1 
```

将两者映射到范围 [-1,1] （**在**训练之前）。

这意味着经过训练的网络期望输入值在此范围内，并且输出值也在同一范围内。如果您想手动向网络提供输入，并自己计算输出，则必须在输入处缩放数据，并在输出处反转映射。

最后要记住的一件事是，每次训练[ANN](https://en.wikipedia.org/wiki/Artificial_neural_network)时，都会得到不同的权重。如果您想要可重现的结果，则需要修复随机数生成器的状态（每次都使用相同的种子对其进行初始化）。阅读有关 和 等函数的`rng`文档`RandStream`。

您还必须注意，如果您将数据划分为训练/测试/验证集，则每次都必须使用相同的拆分（可能也受到我提到的随机性方面的影响）。

* * *

这是一个说明这个想法的例子（改编自我的[另一篇文章](https://stackoverflow.com/a/1575515/97160)）：

```
%%# data
x = linspace(-71,71,200);            %# 1D input
y_model = x.^2;                      %# model
y = y_model + 10*randn(size(x)).*x;  %# add some noise

%%# create ANN, train, simulate
net = fitnet(2);                     %# one hidden layer with 2 nodes
net.divideFcn = 'dividerand';
net.trainParam.epochs = 50;
net = train(net,x,y);
y_hat = net(x);

%%# plot
plot(x, y, 'b.'), hold on
plot(x, x.^2, 'Color','g', 'LineWidth',2)
plot(x, y_hat, 'Color','r', 'LineWidth',2)
legend({'data (noisy)','model (x^2)','fitted'})
hold off, grid on

%%# manually simulate network
%# map input to [-1,1] range
[~,inMap] = mapminmax(x, -1, 1);
in = mapminmax('apply', x, inMap);

%# propagate values to get output (scaled to [-1,1])
hid = tansig( bsxfun(@plus, net.IW{1}*in, net.b{1}) ); %# hidden layer
outLayerOut = purelin( net.LW{2}*hid + net.b{2} );     %# output layer

%# reverse mapping from [-1,1] to original data scale
[~,outMap] = mapminmax(y, -1, 1);
out = mapminmax('reverse', outLayerOut, outMap);

%# compare against MATLAB output
max( abs(out - y_hat) )        %# this should be zero (or in the order of `eps`) 
```

我选择使用该`mapminmax`功能，但您也可以手动完成。该公式是一个非常简单的线性映射：

```
y = (ymax-ymin)*(x-xmin)/(xmax-xmin) + ymin; 
```

![截屏](../Images/961a583a9029ebeb3216d7954b77ad43.png)

# sql - SQL Where 子句选择数量

> ID：11739685
> 
> 赞同：0
> 
> 时间：2012-07-31T12:03:20.657
> 
> 标签：sql

我想在特定产品时显示产品的数量。

例如：

```
Name      Quantity
A           5
B           6
C           3
D           10
E           7
F           5
G           3 
```

如果我选择 A，在选择器中，我想显示 5，如果我选择 E，我想显示 7....

应该是动态的......

有人可以帮我查询吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:05:16.347

您的查询将是这样的：

```
SELECT Quantity
FROM yourTable
WHERE Name = @Name 
```

您将使用`WHERE`包含参数的子句。然后在查询时传入参数的值，它会返回匹配的记录。

根据您的评论，您的查询将是：

```
SELECT product_name, SUM(product_quantity) As orders 
FROM mobile_product 
WHERE product_name = '$product_name'
GROUP BY product_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:05:37.350

```
select Quantity from your_table where Name = '@name' 
```

## 编辑

```
SELECT product_name, SUM(product_quantity) As orders 
FROM mobile_product
WHERE product_name = '$product_name'
GROUP BY product_name 
```

# .net - 处理飞行相机的 LookVector

> ID：11739686
> 
> 赞同：1
> 
> 时间：2012-07-31T12:03:25.373
> 
> 标签：.net, xna, lua, vectormath

我正在尝试在 XNA 中设置一个自由飞行的相机。在这种情况下，我主要使用连接到 CLR 的 Lua 来控制相机。

到目前为止，我已经尝试了以下方法：

```
dkeys={}

LocalController.KeyDown:Add(function(s,e)
    dkeys[KeyboardKey.FromInt(e)]=true
    if e==KeyboardKey.W then
        local r,x=coroutine.resume(coroutine.create(function()
            while wait(.5) and dkeys['W'] do
                local LookVector=Vector3:Subtract(LocalCamera.Target,LocalCamera.Position)
                LookVector:Normalize()
                LookVector=Vector3:Multiply(LookVector,Vector3:Create(.1,.1,.1))
                LocalCamera.Position=Vector3:Add(LocalCamera.Position,LookVector)
                LocalCamera.Position=Vector3:Add(LocalCamera.Target,LookVector)
            end
        end))
    end
end) 
```

我显然没有做正确的事情，因为结果变成了相机在同一点的正负形式之间来回弹跳。

这是我在 KeyUp 上使用的代码：

```
LocalController.KeyUp:Add(function(s,e)
    dkeys[KeyboardKey.FromInt(e)]=false
end) 
```

我是否误解了 LookVector 是什么？ `LocalCamera`是当前相机对象，`Target`它是相机正在查看的位置，也是`Position`它正在查看目标的点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:51:29.713

您分配 LocalCamera.Position 两次。您的意思是改为分配 LocalCamera.Target 吗？

# webforms - Google Docs 电子表格表单/权限

> ID：11739689
> 
> 赞同：0
> 
> 时间：2012-07-31T12:03:37.057
> 
> 标签：webforms, google-apps, google-forms

我有一个 Google Doc 电子表格，为此我创建了一个原生表单。[我复制了表单代码，并在此处](http://www.md4lm.com/test/index.php)将其集成到我自己的页面中。

在我授予网站所有者查看电子表格的权限之前，此表单一直有效。

从那时起，当我们点击提交时，它会将我们带到本机表单页面，并且不会将表单数据插入电子表格。（欢迎您测试表格。）

是否应该为电子表格提供查看权限会破坏我自己的表单版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:08:51.407

您是否通过 docs.google.com 设置了权限？如果是这样，那么不，它不应该改变任何东西。我通过表格一直到“参加您的回复已被记录”。这也是你得到的还是你有后端错误？

如果这不是后端错误并且我能够到达您无法到达的地方，我建议您清除浏览器缓存并可能重置您的路由器，因为有时它们会缓存旧版本的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:24:11.700

你现在的形式以前能做到这一点吗？我是说。可以看出，在本机形式中，问题是文本框。在您的 GUI 表单中，它有单选按钮和复选框，因为您正在调用本机回发网址？

# dll - 什么会导致有关“Microsoft.WindowsAzure.Configuration”的“无法加载文件或程序集”错误？

> ID：11739702
> 
> 赞同：8
> 
> 时间：2012-07-31T12:04:20.203
> 
> 标签：dll, azure, servicebus

我有一个我一直在处理的多层 Azure 应用程序。它使用 MVC 前端背后的 Web 和辅助角色，以及 Azure SQL 和表存储。一段时间以来，它在模拟器和云中都运行良好。

我刚刚开始向它添加一些服务总线功能，从 NuGet 添加服务总线包，现在我发现虽然一切仍然编译，但我收到以下运行时错误：

```
Server Error in '/' Application.
Could not load file or assembly 'Microsoft.WindowsAzure.Configuration' or one of its dependencies. Strong name signature could not be verified.  The assembly may have been tampered with, or it was delay signed but not fully signed with the correct private key. (Exception from HRESULT: 0x80131045)
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.IO.FileLoadException: Could not load file or assembly 'Microsoft.WindowsAzure.Configuration' or one of its dependencies. Strong name signature could not be verified.  The assembly may have been tampered with, or it was delay signed but not fully signed with the correct private key. (Exception from HRESULT: 0x80131045)

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Assembly Load Trace: The following information can be helpful to determine why the assembly 'Microsoft.WindowsAzure.Configuration' could not be loaded.

=== Pre-bind state information ===
LOG: User = JCFXLAPTOP\User
LOG: DisplayName = Microsoft.WindowsAzure.Configuration
 (Partial)
WRN: Partial binding information was supplied for an assembly:
WRN: Assembly Name: Microsoft.WindowsAzure.Configuration | Domain ID: 2
WRN: A partial bind occurs when only part of the assembly display name is provided.
WRN: This might result in the binder loading an incorrect assembly.
WRN: It is recommended to provide a fully specified textual identity for the assembly,
WRN: that consists of the simple name, version, culture, and public key token.
WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.
LOG: Appbase = file:///D:/Work/CLIENTS/PageEngine/Solutions/PageEngine/Web.PageEngine/
LOG: Initial PrivatePath = D:\Work\CLIENTS\PageEngine\Solutions\PageEngine\Web.PageEngine\bin
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: D:\Work\CLIENTS\PageEngine\Solutions\PageEngine\Web.PageEngine\web.config
LOG: Using host configuration file: C:\Program Files\IIS Express\config\templates\PersonalWebServer\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/4904ccbc/14659c77/Microsoft.WindowsAzure.Configuration.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/4904ccbc/14659c77/Microsoft.WindowsAzure.Configuration/Microsoft.WindowsAzure.Configuration.DLL.
LOG: Attempting download of new URL file:///D:/Work/CLIENTS/PageEngine/Solutions/PageEngine/Web.PageEngine/bin/Microsoft.WindowsAzure.Configuration.DLL.
LOG: Using application configuration file: D:\Work\CLIENTS\PageEngine\Solutions\PageEngine\Web.PageEngine\web.config
LOG: Using host configuration file: C:\Program Files\IIS Express\config\templates\PersonalWebServer\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Post-policy reference: Microsoft.WindowsAzure.Configuration, Version=1.7.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
ERR: Failed to complete setup of assembly (hr = 0x80131045). Probing terminated.

Stack Trace:

[FileLoadException: Could not load file or assembly 'Microsoft.WindowsAzure.Configuration' or one of its dependencies. Strong name signature could not be verified.  The assembly may have been tampered with, or it was delay signed but not fully signed with the correct private key. (Exception from HRESULT: 0x80131045)]

[FileLoadException: Could not load file or assembly 'Microsoft.WindowsAzure.Configuration, Version=1.7.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. Strong name signature could not be verified.  The assembly may have been tampered with, or it was delay signed but not fully signed with the correct private key. (Exception from HRESULT: 0x80131045)]
   System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0
   System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +210
   System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean forIntrospection) +242
   System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +17
   System.Reflection.Assembly.Load(String assemblyString) +35
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +122

[ConfigurationErrorsException: Could not load file or assembly 'Microsoft.WindowsAzure.Configuration, Version=1.7.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. Strong name signature could not be verified.  The assembly may have been tampered with, or it was delay signed but not fully signed with the correct private key. (Exception from HRESULT: 0x80131045)]
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +12731430
   System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +503
   System.Web.Configuration.AssemblyInfo.get_AssemblyInternal() +142
   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +334
   System.Web.Compilation.BuildManager.CallPreStartInitMethods(String preStartInitListPath) +203
   System.Web.Compilation.BuildManager.ExecutePreAppStart() +152
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +1151

[HttpException (0x80004005): Could not load file or assembly 'Microsoft.WindowsAzure.Configuration, Version=1.7.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. Strong name signature could not be verified.  The assembly may have been tampered with, or it was delay signed but not fully signed with the correct private key. (Exception from HRESULT: 0x80131045)]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +12847312
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +159
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +12675965 
```

我注意到 ServiceBus NuGet 包引用了较新版本的 Microsoft.WindowsAzure.Configuration dll (1.7.0.2)，并想知道这是否是原因。我已经尝试覆盖它并将所有引用更改为 1.7.0.0 或 1.7.0.2 - 更改都没有帮助。我还尝试从解决方案中删除所有 Azure 引用，并通过安装 NuGet 包和引用最新的 SDK 重新添加引用。这也没有帮助。

我应该补充一点，Microsoft.WindowsAzure.Configuration dll 始终位于 MVC 应用程序的 bin 文件夹中，并且始终将 CopyLocal 设置为 true。

我注意到最近（7 月 27 日星期五）更新了 Azure 配置 NuGet 包，我想知道这是否与它有关。

有谁知道问题可能是什么？

**编辑**

只是为了确认删除服务总线 nuget 包可以解决问题。恢复它会导致问题再次出现。我不知道这是否重要，但作为 NuGet 包的一部分添加的 Microsoft.WindowsAzure.Configuration dll 似乎具有不一致的版本号。虽然路径表明版本应该是 1.7.0.2：

D:\Work\CLIENTS\PageEngine\Solutions\PageEngine\packages\Microsoft.WindowsAzure.ConfigurationManager。**1.7.0.2** \lib\net35-full\Microsoft.WindowsAzure.Configuration.dll

...属性检查器中的版本号仍然是 1.7.0.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T07:38:55.597

这是 Microsoft.WindowsAzure.Configuration 程序集版本 1.7.0.2 的问题

通过回滚到 1.7.0.1 或 1.7.0.0 暂时修复，然后在 1.7.0.3 中永久修复

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T16:24:36.273

有同样的问题。我将 Microsoft.WindowsAzure.ConfigurationManager 恢复为 NuGet 版本 1.7.0.1。现在它工作正常。

# jquery - jquery jplayer 圆圈播放器缩放

> ID：11739703
> 
> 赞同：3
> 
> 时间：2012-07-31T12:04:23.097
> 
> 标签：jquery, jplayer

圈子播放器 - 辉煌，时尚。圈子球员——太大了。

我已经成功地缩放了皮肤和 css 但是....

我不知道如何缩放进度条的变换。

我将缩放 50% 以使自己的生活更轻松。

感谢所有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:08:48.013

好吧，作为一个快速而肮脏的解决方案，您可以申请

```
-webkit-transform: scale(0.5);
-moz-transform: scale(0.5);
-ms-transform: scale(0.5);
-o-transform: scale(0.5);
transform: scale(0.5); 
```

到`cp_container`.

# php - 如何为非阻塞 http 请求配置 PHP 或 Apache

> ID：11739709
> 
> 赞同：2
> 
> 时间：2012-07-31T12:04:51.907
> 
> 标签：php, apache, nonblocking, http-request

我有 apache 作为 http 服务器和 php，我从浏览器向这个 php 脚本发送了大约 5 个并发请求，该脚本有一个 for 循环，这需要很长时间才能完成，我看到所有并发请求都被阻止并按顺序提供服务。

如何为 http 请求服务的非阻塞行为而不是顺序服务行为配置 apache 或 php？

```
 I know that Tomcat server http connector can tune using following server parameters

    – Threads (maxThreads)
    – Keep alive requests (maxKeepAliveRequests)
    – TCP Backlog (acceptCount)
    – connectionTimeout
    – Socket buffers
    - Use different connectors (nio, apr, bio)

etc... 
```

测试了 5 个并发请求的 php 代码片段，但由 Web 服务器按顺序提供服务（apache 2.2、php 5.3）

```
<?php
for ($i = 1; $i < 500000; $i++) { //do some processing which takes some time
    $sq = sqrt($i); 
    $val += $sq;
}
echo $val;
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T12:41:15.800

我遇到了类似的问题，发现 Apache 和 PHP 配置正确，但是我的 PHP 脚本阻塞了特定资源。就我而言，是会话文件被锁定，并且每个请求都需要在会话文件再次空闲并可以提供新请求之前完成。（这里有一篇文章更深入地解释了这个问题：http: [//konrness.com/php5/how-to-prevent-blocking-php-requests/](http://konrness.com/php5/how-to-prevent-blocking-php-requests/)）一旦我阻止了会话阻塞，我开始看到并行性人们会期望。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T12:09:01.843

在 apache.conf 中使用以下指令

```
StartServers          3
MinSpareServers       5
MaxSpareServers       7 
```

它将产生额外的进程等待并发连接以立即为它们服务。根据您的需要调整数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T12:47:51.307

> 我在这个设置中使用 php 脚本中的 for 循环测试了请求

您创建了一个脚本，通过 HTTP 对内容进行顺序请求，并发现它们是按顺序提供的？

你还没有显示你的代码。尽管可以在单个线程中实现基于事件的套接字客户端，但这将很难编码。*即使是这种情况，如果内容似乎*没有按顺序处理，我仍然会感到惊讶，这仅仅是因为（在没有分块的情况下）每条消息都是一个完整的请求。

> 我看到所有并发请求都被阻止了

有很多地方都有互斥锁——在每个 php 会话的基础上，在每个 ssl 会话的基础上，甚至在你开始在代码中引入更多的互斥锁之前都是明显的候选者。

你没有提到这是什么版本的 Apache，更重要的是正在使用什么 mpm 引擎，也没有提到它是如何配置的，也没有提到它运行在什么操作系统上，这让我认为你的测试可能不是很好复杂的。

您的结论明确驳斥了网络服务器的基本要求——它可以同时处理多个客户端。

> 如何为 http 请求服务的非阻塞行为配置 apache 或 php

根据您的测试/分析存在缺陷的可用证据，它已经这样做了。

# ruby-on-rails - Ruby/RoR 开发：本地或服务器

> ID：11739713
> 
> 赞同：0
> 
> 时间：2012-07-31T12:05:11.983
> 
> 标签：ruby-on-rails, ruby

我们公司已经开始“内部”开发自己的系统。我们已经有了几个开发人员，他们将负责用 Ruby/RoR 编写代码。

我们目前正在讨论基础架构，我想问一下：我们是应该在本地机器上开发所有东西，然后将其放到测试服务器然后再投入生产，还是在开发/测试服务器上开发所有东西，然后将其发布以进行测试，然后再投入生产?

只是对上面描述的更新：在“本地机器”下，我指的是开发人员的桌面，而这个测试/开发服务器是我们办公室的一台机器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:24:35.903

这是一个有效的问题，因此需要考虑权衡。

一般来说; 在当地工作。Web 应用程序开发具有自然流程，导致开发人员每小时保存和刷新浏览器多次。您节省的所有网络延迟时间实际上会加起来，并且不会让开发人员感到沮丧。

但是，在本地工作也有缺点，您需要确保您的设置与测试/生产服务器上的设置完全相同。这意味着一切都包括您的内核版本、apache 版本、ruby/rails 版本。DNS 很简单，但必须再次完美地模拟实时情况，以便 AJAX 调用等无缝工作。

即使您确保以上所有内容，当您将应用程序移动到实时服务器时，您也可能需要进行一些小的更改，但我的经验似乎总是有些东西。

此外，在实时服务器上运行对开发人员来说并不是那么痛苦。通过 FTP 从文本编辑器/IDE 保存源文件即使在 Internet 上也应该花费不到一秒钟的时间，刷新远程浏览器会话将使您的 UI 设计人员对真实的用户体验和流程有更好的感觉。如果您使用 SVN 而不是 FTP，则同样适用。

安全性不是什么大问题，将 FTP 和 SSH 锁定到办公室 IP，但如果开发人员需要从其他地方编辑源，则可以使用后门，以便他们可以暂时打开防火墙到自己的 IP。

我在远程测试服务器、办公室服务器和本地机器上开发了 PHP 和 Rails 应用程序。经过多年的努力，我可以说作为开发人员，我并不介意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T11:19:17.367

作为开发人员，我的建议是您首先需要在本地服务器上完成所有开发工作。测试后，您需要发送给客户端以使其生效。

我在*Ruby on Rails* @ **andolaso​​ft.com**上作为 Web 开发人员工作，我们遵循相同的程序。希望你明白了。

谢谢

# javascript - 如何在 node.js 中重定向

> ID：11739715
> 
> 赞同：26
> 
> 时间：2012-07-31T12:05:14.670
> 
> 标签：javascript, node.js, redirect, web, express

我在目录之间重定向时遇到了一些问题，问题是我可以设法重定向到不同目录中的另一个文件。我的目录结构如下所示：

```
-views
  -add_user.jade

-routes
  -index.js 
```

我尝试从*index.js重定向**添加*_ *user.jade*，你们会怎么做

 *```
res.redirect('???'); 
```

* * *

如果*index.js与***views**位于同一目录中，则以下代码有效

```
-index.js
-views
  -add_user.jade

res.redirect('./add_users'); 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-07-31T12:39:13.743

您希望重定向到您希望用户访问的**URL**（而不是视图名称）。

例如，如果路由`"/user/add"`呈现`"add_user.jade"`视图，那么您想使用

```
 res.redirect("/user/add"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-14T07:48:06.923

是的，您可以在 Url 的帮助下重定向

```
return res.redirect('/server/Thank'); 
```

谢谢是一个带有`Thank.jade`扩展名的视图文件。

路线是`/server/thank`

* * *

## 回答 #3

> 赞同：-45
> 
> 时间：2012-07-31T12:12:41.280

试试这个：

```
document.location.href="full_URL"; 
```*

# jquery - Jquery，使用自定义属性获取图像

> ID：11739728
> 
> 赞同：4
> 
> 时间：2012-07-31T12:05:46.477
> 
> 标签：jquery

您能否给我一个提示，告诉我如何通过自定义属性获取特定图像的值。例如，我有：

```
<img class="image" 
     identif="<?php echo $j; ?>" 
     id="<?php echo $id; ?>" 
     src="../<?php echo $sqlg[$pic] ?>" 
     h="<?php echo $heightl; ?>" 
     w="<?php echo $widthl ?>"
     height="<?php echo $height; ?>px" 
     width="<?php echo $width; ?>px" 
     title="Double-click to enlarge image" /> 
```

我想在jquery中通过“identif”属性获取图像的“src”，谢谢:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T12:06:54.710

最好使用`data-*`这样的属性

```
<img class="image" data-identif="<?php echo $j; ?>"... 
```

因此您可以使用检索该属性

```
$('img[data-identif]').data('identif'); 
```

请参阅[http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)以获取更多参考

如果您需要获取 img 的 src，`data-identif = 5`只需这样做：

```
$('img[data-identif="5"]').attr('src'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:08:58.843

jQuery 有一个[属性选择器](http://api.jquery.com/attribute-equals-selector/)

```
$('img[data-identif="1"]') 
```

# android - 在不同设备上，android中的画布是否成比例

> ID：11739730
> 
> 赞同：1
> 
> 时间：2012-07-31T12:05:50.687
> 
> 标签：android, coordinates, surfaceview, resolution, android-canvas

我正在尝试使用画布和表面视图制作应用程序，我担心将来我会遇到很多问题，因为我不确定画布是否与每个设备成比例。目前我只能使用我的模拟器，因为我的手机的 USB 电缆不工作（我知道.. 我必须得到一个新的..）。

无论如何，我想知道画布是否会转移我的坐标并使一切成比例，我的意思是，如果我在 a 点有东西，让我们在设备上说 (10, 10) 它的屏幕是100 X 100（这只是一个便于计算的示例）它将位于 10 X 10 设备上的点 (1, 1) 上。

这真的让我很困扰...

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:11:58.090

不，不会是这样。如果您有一个坐标 (10,10)，那么它在所有设备上都是相同的。我会建议你`scale`的图纸。

对于`scale`您的绘图，您只需定义一个您想要绘制的位图（将保持不变）（当屏幕尺寸发生变化时，该位图将被拉伸）。

1.  定义一个常量位图：

    > 位图 gameScreen = Bitmap.createBitmap(getGameScreenWidth(), getGameScreenHeight(), Config.RGB_565);

2.  获取 x 和 y 的比例

    > 宽度 = game.getWindowManager().getDefaultDisplay().getWidth(); height = game.getWindowManager().getDefaultDisplay().getHeight(); scaleXFromVirtualToReal = (float) 宽度/this.gameScreenWidth; scaleYFromVirtualToreal = (float) 高度/this.gameScreenHeight;

3.  根据您之前定义的位图定义一个画布对象（允许您对其进行绘制，例如 canvas.drawRect() [...]）：

    > `Canvas canvasGameScreen = new Canvas(gameScreen);`

4.  在您的渲染线程中，您必须有一个名为 frameBuffer 的 Canvas，它将渲染虚拟帧缓冲区：

    > frameBuffer.drawBitmap(this.gameScreen, null, new Rect(0, 0, width, height), null);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:26:18.643

不，屏幕上的单位（无论您使用`canvas`还是`OpenGL`）是一个像素。`Canvas.getWidth()`如果您需要相对坐标，您可以使用和获取画布的大小`Canvas.getHeight()`，但是您的画布绘图方法也在像素中，所以我想您`OpenGL`只需要在使用`Canvas`.

# ruby-on-rails-3 - 获取模型的质量可分配属性

> ID：11739732
> 
> 赞同：2
> 
> 时间：2012-07-31T12:06:01.983
> 
> 标签：ruby-on-rails-3, activerecord, attributes, mass-assignment

如何获得模型的大量可分配属性？

我找到了这个，但在我看来它有点脏。

```
Game.accessible_attributes.to_a.reject{|i| i.empty?} 
```

有没有更清洁的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:13:51.213

我不明白为什么是拒绝功能。

你试过这个：

```
Game.accessible_attributes 
```

# java - 如果我在日期中将小时、分钟和秒设置为 0，则日期会减少 1..

> ID：11739735
> 
> 赞同：3
> 
> 时间：2012-07-31T12:06:08.040
> 
> 标签：java, android, date

首先，我知道我可以使用`Calendar`，但我想了解这个问题并学会解决它。

我有一个`Date`当前日期。我想将小时、分钟和秒设置为 0。我使用以下代码执行此操作：

```
 current_date.setHours(0);
        current_date.setMinutes(0);
        current_date.setSeconds(0); 
```

出了点问题，因为如果我这样做，天会减少 1，例如，如果今天是 31，那么天会被设置为 30。

为什么？如何解决`Date`（不使用`Calendar`，我想学习如何通过困难的方式解决这个问题）。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:10:42.357

看看这些方法的实现。他们使用公历。错误可能来自该交互。

注意：自 JDK 1.1 起，set 方法均已弃用，[请参阅](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Date.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T12:49:35.770

只是猜测...

我想这与时区有关。

当您将 HMS 设置为 0 时，您不是根据您的时区设置它们，而是根据 UTC（不是 100% 确定，但是......）。所以结果日期不是：

```
0:0:0 YOUR LOCAL 
```

但

```
0:0:0 GMT 
```

如果你在美国，那是前一天。

尝试将分钟设置为`-yourDate.getTimezoneOffset()`（如果不起作用，请尝试使用正值）。

# ios - 消除警告的最佳方法是什么？

> ID：11739736
> 
> 赞同：0
> 
> 时间：2012-07-31T12:06:12.390
> 
> 标签：ios, xcode, warnings

我想将数据保存在核心数据中。删除此警告的最佳方法是什么？

```
@interface CDPage : NSManagedObject

CDPage *corePage = [CDPage allocWithEntity:entity insertIntoManagedObjectContext:manageContext andWithBOPage:page];
[[AppDelegate instance] saveContext]; 
```

警告：**未使用的变量“corePage”**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:08:29.550

如果不使用变量 corePage，则不需要创建它：

```
[CDPage allocWithEntity:entity insertIntoManagedObjectContext:manageContext andWithBOPage:page];
[[AppDelegate instance] saveContext]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:09:54.643

不要在您定义的同一行上分配。或者只是不将该语句的结果分配给变量 corePage。

# python - 通过JSP执行python文件

> ID：11739739
> 
> 赞同：1
> 
> 时间：2012-07-31T12:06:23.043
> 
> 标签：python, jsp

我正在创建一个简单的网页，它从数据库中读取并显示在浏览器上。我有一个 python 脚本，它从文件中读取并更新数据库以获取文件中所做的更改。我想在我的网页中添加一个按钮来执行这个 python 文件并在网页上显示更新的信息。

有没有办法将 python 文件的执行链接到网页上的按钮。

任何建议或参考都非常感谢。

提前致谢。

编辑：

我查阅了一些参考资料，但这些并没有太大帮助。我没有使用 jython 或任何其他同时支持 java 和 python 的应用程序。有没有办法在不使用任何其他应用程序的情况下做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:00:27.610

执行此操作的方式与您在 Java 中通常执行的方式相同。

[http://www.java-samples.com/showtutorial.php?tutorialid=8](http://www.java-samples.com/showtutorial.php?tutorialid=8)

# c# - HTML中奇怪的数字和字母数组

> ID：11739740
> 
> 赞同：0
> 
> 时间：2012-07-31T12:06:35.083
> 
> 标签：c#, asp.net

我不断在我的网页的页面源中得到这个输出

```
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTE4NzI1Nzk0NTMPZBYCAgMPZBYCAgEPFgIeCWlubmVyaHRtbAWPEDx0YWJsZT4NCgk8dHI+DQoJCTx0ZD5NYWRlIGl0IE5lc3Npc2FyeSBmb3IgeW91IHRvIHVzZSBzdXBwb3J0IHdoZW4gd2Fsa2luZyBpbmRvb3JzIChlLmcgaG9sZGluZyBvbiB0byBmdXJuaXR1cmUsIHVzaW5nIGEgc3RpY2sgZS50LmM8L3RkPg0KCTwvdHI+PHRyPg0KCQk8dGQ+PGlucHV0IHR5cGU9J3JhZGlvJyBuYW1lPSdxdWVzdGlvbiAxJyB2YWx1ZT0nMCcgLz48L3RkPjx0ZD48aW5wdXQgdHlwZT0ncmFkaW8nIG5hbWU9J3F1ZXN0aW9uIDEnIHZhbHVlPScxJyAvPjwvdGQ+PHRkPjxpbnB1dCB0eXBlPSdyYWRpbycgbmFtZT0ncXVlc3Rpb24gMScgdmFsdWU9JzInIC8+PC90ZD4NCgk8L3RyPjx0cj4NCgkJPHRkPjxpbnB1dCB0eXBlPSdyYWRpbycgbmFtZT0ncXVlc3Rpb24gMicgdmFsdWU9JzAnIC8+PC90ZD48dGQ+PGlucHV0IHR5cGU9J3JhZGlvJyBuYW1lPSdxdWVzdGlvbiAyJyB2YWx1ZT0nMScgLz48L3RkPjx0ZD48aW5wdXQgdHlwZT0ncmFkaW8nIG5hbWU9J3F1ZXN0aW9uIDInIHZhbHVlPScyJyAvPjwvdGQ+DQoJPC90cj48dHI+DQoJCTx0ZD48aW5wdXQgdHlwZT0ncmFkaW8nIG5hbWU9J3F1ZXN0aW9uIDMnIHZhbHVlPScwJyAvPjwvdGQ+PHRkPjxpbnB1dCB0eXBlPSdyYWRpbycgbmFtZT0ncXVlc3Rpb24gMycgdmFsdWU9JzEnIC8+PC90ZD48dGQ+PGlucHV0IHR5cGU9J3JhZGlvJyBuYW1lPSdxdWVzdGlvbiAzJyB2YWx1ZT0nMicgLz48L3RkPg0KCTwvdHI+PHRyPg0KCQk8dGQ+TWFkZSBpdCBuZXNzaXNhcnkgZm9yIHlvdSB0byB1c2Ugc3VwcG9ydCB3aGVuIHdhbGtpbmcgb3V0ZG9vcnMoZS5nIHVzaW5nIHN0aWNrLCBhIGZyYW1lIGUudC5jPC90ZD4NCgk8L3RyPjx0cj4NCgkJPHRkPjxpbnB1dCB0eXBlPSdyYWRpbycgbmFtZT0ncXVlc3Rpb24gMScgdmFsdWU9JzAnIC8+PC90ZD48dGQ+PGlucHV0IHR5cGU9J3JhZGlvJyBuYW1lPSdxdWVzdGlvbiAxJyB2YWx1ZT0nMScgLz48L3RkPjx0ZD48aW5wdXQgdHlwZT0ncmFkaW8nIG5hbWU9J3F1ZXN0aW9uIDEnIHZhbHVlPScyJyAvPjwvdGQ+DQoJPC90cj48dHI+DQoJCTx0ZD48aW5wdXQgdHlwZT0ncmFkaW8nIG5hbWU9J3F1ZXN0aW9uIDInIHZhbHVlPScwJyAvPjwvdGQ+PHRkPjxpbnB1dCB0eXBlPSdyYWRpbycgbmFtZT0ncXVlc3Rpb24gMicgdmFsdWU9JzEnIC8+PC90ZD48dGQ+PGlucHV0IHR5cGU9J3JhZGlvJyBuYW1lPSdxdWVzdGlvbiAyJyB2YWx1ZT0nMicgLz48L3RkPg0KCTwvdHI+PHRyPg0KCQk8dGQ+PGlucHV0IHR5cGU9J3JhZGlvJyBuYW1lPSdxdWVzdGlvbiAzJyB2YWx1ZT0nMCcgLz48L3RkPjx0ZD48aW5wdXQgdHlwZT0ncmFkaW8nIG5hbWU9J3F1ZXN0aW9uIDMnIHZhbHVlPScxJyAvPjwvdGQ+PHRkPjxpbnB1dCB0eXBlPSdyYWRpbycgbmFtZT0ncXVlc3Rpb24gMycgdmFsdWU9JzInIC8+PC90ZD4NCgk8L3RyPjx0cj4NCgkJPHRkPkxpbWl0ZWQgeW91ciBhYmlsaXR5IHRvIHJ1bjwvdGQ+DQoJPC90cj48dHI+DQoJCTx0ZD48aW5wdXQgdHlwZT0ncmFkaW8nIG5hbWU9J3F1ZXN0aW9uIDEnIHZhbHVlPScwJyAvPjwvdGQ+PHRkPjxpbnB1dCB0eXBlPSdyYWRpbycgbmFtZT0ncXVlc3Rpb24gMScgdmFsdWU9JzEnIC8+PC90ZD48dGQ+PGlucHV0IHR5cGU9J3JhZGlvJyBuYW1lPSdxdWVzdGlvbiAxJyB2YWx1ZT0nMicgLz48L3RkPg0KCTwvdHI+PHRyPg0KCQk8dGQ+PGlucHV0IHR5cGU9J3JhZGlvJyBuYW1lPSdxdWVzdGlvbiAyJyB2YWx1ZT0nMCcgLz48L3RkPjx0ZD48aW5wdXQgdHlwZT0ncmFkaW8nIG5hbWU9J3F1ZXN0aW9uIDInIHZhbHVlPScxJyAvPjwvdGQ+PHRkPjxpbnB1dCB0eXBlPSdyYWRpbycgbmFtZT0ncXVlc3Rpb24gMicgdmFsdWU9JzInIC8+PC90ZD4NCgk8L3RyPjx0cj4NCgkJPHRkPjxpbnB1dCB0eXBlPSdyYWRpbycgbmFtZT0ncXVlc3Rpb24gMycgdmFsdWU9JzAnIC8+PC90ZD48dGQ+PGlucHV0IHR5cGU9J3JhZGlvJyBuYW1lPSdxdWVzdGlvbiAzJyB2YWx1ZT0nMScgLz48L3RkPjx0ZD48aW5wdXQgdHlwZT0ncmFkaW8nIG5hbWU9J3F1ZXN0aW9uIDMnIHZhbHVlPScyJyAvPjwvdGQ+DQoJPC90cj4NCjwvdGFibGU+ZGRRDHU1Nlr230utN0Gv6X4EdFsY/if7V6fs1b6S/Djrtw==" /> 
```

我不知道它是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T12:08:26.197

它是 ASP.NET 视图状态。这就是 ASP.NET 跟踪表单项的值和属性的方式。来自[微软](http://msdn.microsoft.com/en-us/library/ms972976.aspx)：

> 简而言之，Microsoft® ASP.NET 视图状态是 ASP.NET 网页使用的一种技术，用于在回发期间保持对 Web 窗体状态的更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T12:08:57.427

这是页面上控件的视图状态，它们用回发所需的数据填充它。

如果您的页面没有回发，您可以通过设置禁用视图状态：

`EnableViewState = false;`用于您页面上的控件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T12:09:32.323

这是存储数据/信息/值的 ASP.net 机制：

> 简而言之，Microsoft® ASP.NET 视图状态是 ASP.NET 网页使用的一种技术，用于在回发期间保持对 Web 窗体状态的更改。

[http://msdn.microsoft.com/en-us/library/ms972976.aspx](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T12:09:54.133

这没什么好担心的。

请查看以下内容以获取更多信息：

[了解 ASP.NET 视图状态](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

# .htaccess - .htaccess 重定向问题

> ID：11739749
> 
> 赞同：0
> 
> 时间：2012-07-31T12:06:59.047
> 
> 标签：.htaccess, redirect

我正在将我的网站从旧域重定向到新域。几乎所有事情都完成了，我只有两个问题：

1) 新域上的网站有点不同（我删除了一些页面和部分）。将我在旧域上的页面重定向到新域上的相同页面然后将所有其他页面重定向到新域的根目录是否可以（SEO 明智）？所以基本上，将不再存在的旧页面重定向到新域的根目录。

2）我该怎么做？

现在我有一堆规则，比如：

```
Redirect 301 /oldfile.html http://www.newdomain.com/newfile.html 
```

如何添加一条规则以按照上述说明重定向页面并将所有其他页面重定向到新域的根目录？

感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:14:07.010

1) 是的，很好。

2）您不能，如果您想确定自己的操作，则必须选择要重定向到域根目录的文件夹根目录以进行批量重定向。

```
RewriteRule ^folder/(.*)$ domain.xxx [R=301,L] 
```

# r - 如何抑制表格中的零打印（zero.print="" 不起作用）

> ID：11739750
> 
> 赞同：9
> 
> 时间：2012-07-31T12:07:03.823
> 
> 标签：r, pretty-print

我有要隐藏的 NA 和零的对角矩阵。

na.print = "" 工作正常，但 zero.print = "." 似乎将 0.00 视为 != 0 ？

这是一个带有打印输出的可运行示例，因此您可以了解我的意思：

```
x <- matrix(c(0.01, NA, NA, NA, 0.00, 0.00, NA, NA, 0.00, 0.00, -0.01, NA, 0.00, 0.00, 0.00, 0.00), nrow=4, byrow=TRUE)
x
         [,1] [,2]  [,3] [,4]
    [1,] 0.01   NA    NA   NA
    [2,] 0.00    0    NA   NA
    [3,] 0.00    0 -0.01   NA
    [4,] 0.00    0  0.00    0

print.table(x, na.print="", zero.print=".")
         [,1]  [,2]  [,3]  [,4] 
    [1,]  0.01                  
    [2,]  0.00  0.00            
    [3,]  0.00  0.00 -0.01      
    [4,]  0.00  0.00  0.00  0.00 
```

遵循下面的有用答案（谢谢大家！），并基于 print.table 中的明确选择，而不是 zero.print 表中任何项目失败的项目（x == round(x)），这是一个适用于的版本浮点。我为数据框打印任务编写了它，但它适用于矩阵。

```
print.dataframe <- function (x, digits = getOption("digits"), quote = FALSE, na.print = "", zero.print = "0", justify = "none", ...){
    xx <- format(x, digits = digits, justify = justify)
    if (any(ina <- is.na(x))) 
        xx[ina] <- na.print
    i0 <- !ina & x == 0
    if (zero.print != "0" && any(i0)) 
        xx[i0] <- zero.print
    if (is.numeric(x) || is.complex(x)){
        print(xx, quote = quote, right = TRUE, ...)
    }else{
        print(xx, quote = quote, ...)   
    }
    invisible(x)
}

print.dataframe(bob, zero.print = ".", justify="left") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:52:41.387

这是一种解决方法：

```
> print.table(local({x[x==0] <- NA; x}))
     [,1]  [,2] [,3]  [,4]
[1,]  0.01                
[2,]                      
[3,]            -0.01     
[4,] 
```

如果您需要 NA 和零的不同表达式，那么，

```
> print(ifelse(is.na(x), "", ifelse(x == 0, ".", x)), quote = FALSE)
     [,1] [,2] [,3]  [,4]
[1,] 0.01                
[2,] .    .              
[3,] .    .    -0.01     
[4,] .    .    .     . 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T13:28:26.530

根据 Andrie 的意见和建议，这不是`print.table`. 提供一个`print.table`期望`table`. 正如安德烈指出的那样，所有的赌注都与预期的输出有关。如果您添加一行额外的代码`print.table`（见下文），它将为您工作（注意我称之为 printmatrix）。

```
printmatrix <- 
function (x, digits = getOption("digits"), quote = FALSE, na.print = "", 
    zero.print = "0", justify = "none", ...) 
{
    xx <- format(unclass(x), digits = digits, justify = justify)
    if (any(ina <- is.na(x))) 
        xx[ina] <- na.print
    if (zero.print != "0" && any(i0 <- !ina & x == 0) && all(x == 
        round(x))) 
        xx[i0] <- sub("0", zero.print, xx[i0])
    xx[x == 0] <- zero.print                          #the line I added
    if (is.numeric(x) || is.complex(x)) 
        print(xx, quote = quote, right = TRUE, ...)
    else print(xx, quote = quote, ...)
    invisible(x)
}

printmatrix(x, zero.print = ".") 
```

# facebook - Facebook喜欢登录后面的页面

> ID：11739751
> 
> 赞同：0
> 
> 时间：2012-07-31T12:07:06.200
> 
> 标签：facebook

我在一个页面上有很多图片，对于每张图片我都有一个类似 facebook 的按钮。此页面在登录后（您必须登录才能查看）。Facebook 正在共享指向根页面的链接，因为我将登录后的每个页面都重定向到了根页面。我该如何解决这个问题，分享到该页面的链接？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:22:55.253

被赞的页面必须可以被 Facebook 抓取工具访问，而无需登录。您可以通过检测它的用户代理来允许对刮板的特殊访问：

```
 facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php) 
```

# jquery - jQuery #div 滚动

> ID：11739753
> 
> 赞同：0
> 
> 时间：2012-07-31T12:07:10.887
> 
> 标签：jquery, html, css

看看[这个](http://static.livedemo00.template-help.com/wt_40217/#!/)网站。

单击任何菜单项后，我希望具有相同的滑动效果。如果我单击另一个菜单项，当前内容会移出窗口，新内容来自同一侧。

我想知道我怎样才能达到这个效果？

我说清楚了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:26:40.580

[http://jsfiddle.net/LeGaF/1/](http://jsfiddle.net/LeGaF/1/)

纯 CSS 解决方案（样式很糟糕，只是向您展示了它背后的想法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:14:13.967

也许你应该看看 jQuery UI ？检查这些[效果](http://jqueryui.com/demos/effect/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:14:36.090

实在看不懂你的意思。你想在你给的网站上做确切的效果吗？有许多插件可以实现这些效果。

# android - PhoneGap 2.0 中未定义的 EXEC 方法

> ID：11739757
> 
> 赞同：1
> 
> 时间：2012-07-31T12:07:31.483
> 
> 标签：android, cordova

尝试执行 phonegap 插件方法时，应用程序会引发此错误：

> `TypeError 'undefined' is not a function (evaluating 'cordova.exec( ...`

应用程序中包含的代码：

**Javascript 插件链接（文件 settingswrite.js）**

```
window.SettingsWrite = function(objectData, successCallback, failureCallback) {

    var options = {};
    for (var key in objectData) {
      options[key] = objectData[key];
    }
    cordova.exec(
                successCallback,
                failureCallback,
                'SettingsWrite',
                'set',
                new Array(options)
            );
    }; 
```

**使用插件的 Javascript 代码（文件 app.js）**

```
function setActualPosition() {

    // appMap is an application global object
    var map = appMap.getMapEdgesProjection();

    window.SettingsWrite([{
            x: map.minh,
            y: map.maxh
    }], 
    function(r){
       alert(r);
    },
    function(e){
         alert("Operation error");
         console.log('ERROR: ' + e);
    });
} 
```

插件在 config.xml 中声明为：

```
<plugin name="SettingsWrite" value="es.mycompany.cordova.plugin.SettingsWrite"/> 
```

Javascript 代码执行 index.html（位于 assets 文件夹并包含在 WebView 中）：

```
<!DOCTYPE html>
<html>
    <head>

        <title>Test Mobile</title>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
        <meta name="apple-mobile-web-app-capable" content="yes">

        <script src="assets/js/cordova-2.0.0.js"></script>
        <script src="assets/js/jquery-1.7.2.min.js"></script>
        <script src="assets/js/settingswrite.js"></script>
        <script src="assets/js/app.js"></script>

    </head>
    <body>
        <div id="divMapContainer"></div>
    </body>
</html> 
```

以及插件 Java 类（在 Phonegap 文档中定义）：

```
public class SettingsWrite extends Plugin {

     public static final String ACTION = "set";

     @Override
     public PluginResult execute(String action, JSONArray data, String callbackId) {

           if(ACTION.equals(action)) {
            .
            .
            .
           } else {
            .
            .
            .
           }
     } 
```

该插件在 Android 3.1 设备中运行，并且所有需要的文件都正确包含在项目中（cordova-2.0.0.js 和 cordova-2.0.0.jar）。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:42:35.660

你在什么时候打电话`setActualPosition`？事件`deviceready`触发了吗？如果它没有触发，您将无法访问这些`cordova`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:31:16.597

我遇到了和你一样的错误。这篇文章有一个修复：

[datePicker 插件在 Phonegap 2.0 中不起作用](https://stackoverflow.com/questions/11776905/datepicker-plugin-not-working-in-phonegap-2-0/11792305#11792305)

# hibernate - javax.persistence.TransactionRequiredException：没有正在进行的事务

> ID：11739766
> 
> 赞同：2
> 
> 时间：2012-07-31T12:08:42.013
> 
> 标签：hibernate, persistence, hql, jpa-2.0, atomikos

我有一项使用 HQL 将许多对象存储到数据库中的服务。但我有这个例外

```
javax.persistence.TransactionRequiredException: no transaction is in progress
at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:789)
at sun.reflect.GeneratedMethodAccessor14.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:365)
at $Proxy42.flush(Unknown Source)
at sun.reflect.GeneratedMethodAccessor14.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
at $Proxy42.flush(Unknown Source)
at org.skyway.spring.util.dao.AbstractJpaDao.flush(AbstractJpaDao.java:90)
at sun.reflect.GeneratedMethodAccessor16.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy52.flush(Unknown Source)......... 
```

问题可能是数据库上有大量的并发操作。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:35:47.840

您需要在每个服务方法中使用会话工厂开始并提交 Hibernate 事务，或使用 AOP（面向方面​​编程）为您的方法自动启动、提交/回滚事务。请参考[这个](http://static.springsource.org/spring/docs/2.5.x/reference/transaction.html#transaction-declarative)。

# ios - 如何获得在未发布的 ios 应用程序中使用的开放图形操作的批准？

> ID：11739767
> 
> 赞同：6
> 
> 时间：2012-07-31T12:08:44.120
> 
> 标签：ios, facebook, action, facebook-opengraph

作为行动提交的一部分，facebook 需要详细的逐步说明在 facebook 上发布故事所需的步骤。但由于 IOS 应用尚未发布，因此无法在 App Store 上使用，因此 facebook 无法对其进行测试。我在这里错过了什么吗？或者是否有必要拥有一个工作的 WEB 应用程序才能发布一个动作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T01:41:09.077

对将导致您的应用注册特定操作的过程进行简单而全面的解释就足够了，因为它符合他们的标准，包括：“简单”、“正版”和“非滥用”。Facebook 只需要了解您的应用程序上下文中的原因、方式和时间（频率）。

现有应用程序的大多数新操作在测试和发布之前都没有完整的流程，因此对如何在应用程序上下文中使用操作的基本了解应该是 facebook 批准所必需的。

我不确定将如何审查完全不可用的应用程序，但是您可以提供的任何支持性在线文档（指向屏幕截图等的链接？）都不会受到伤害，但应该没有必要。希望对用法和上下文的全面描述足以让他们做出决定，以便您继续开发。

# python - Django Tastypie - 前置 URL 不起作用

> ID：11739774
> 
> 赞同：4
> 
> 时间：2012-07-31T12:09:01.750
> 
> 标签：python, django, api, tastypie

我尝试使用与[tastepie cookbook](http://django-tastypie.readthedocs.org/en/latest/cookbook.html)`prepend_url()`中的搜索示例类似的功能。由于某种原因，浏览器只返回了 404 并且没有其他任何事情发生......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T12:09:01.750

食谱指的是 0.9.12 版本，它只是一个 alpha 版本。该`prepend_urls()`功能在旧版本中未实现。因此，该函数根本不会被调用，也不会触发错误消息。

因此，您必须安装 alpha 或使用该`override_urls()`功能（[文档](http://django-tastypie.readthedocs.org/en/latest/api.html?highlight=override#override-urls)）

# spring-mvc - Tiles 3.0 和 Spring MVC 设置

> ID：11739777
> 
> 赞同：3
> 
> 时间：2012-07-31T12:09:21.063
> 
> 标签：spring-mvc, configuration, tiles, spring-3

是否可以使用 Spring 3.0 运行 Tiles 3.0？

需要什么配置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:39:34.880

当前版本的 Spring 仅官方支持 Tiles 2。

为了让 Tiles 3 正常工作，您需要实现自己的视图类、Tiles 配置器（如果需要）等。这是 Spring 社区非常欣赏的东西，但我敢肯定这绝非易事。

希望这可以帮助。

# wpf - 绑定 TextBlock 文本时，它不仅仅是一个简单的字符串

> ID：11739785
> 
> 赞同：0
> 
> 时间：2012-07-31T12:09:42.667
> 
> 标签：wpf, binding

我有一个文本块，我想将它的内容绑定到我的视图模型中的一个属性。如果内容是一个简单的字符串，这很好。但是，如果我想格式化内容并使用或标记，那就不太好了……在这种情况下，我无法绑定字符串：文本块只会显示一个像“Hallo”这样的字符串。

有任何想法吗 ？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:40:30.500

看看[StringFormat](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.stringformat.aspx)属性可以为您做什么。如果这还不够，您可能需要编写一个[绑定转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:17:12.257

如果您有某种类型的属性 - 您可以为这种类型创建一个数据模板

```
<DataTemplate DataType="{x:Type local:MySomeType}">
  <!--your visual presentation goes here-->
</DataTemplate> 
```

现在您可以简单地使用 ContentPresenter 来显示您的属性

```
 <ContentPresenter Content="{Binding MySomeTypeProperty}"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:31:20.990

像这样的东西：

```
 <Textblock content="{Binding MyProperty, StringFormat={}Hello {1}}" /> 
```

刚开始玩字符串格式。

# php - 删除一行或多行后，在 auto_increment 列上使用下一个可能的主键

> ID：11739793
> 
> 赞同：0
> 
> 时间：2012-07-31T12:10:23.557
> 
> 标签：php, mysql, triggers

我有一个带有主键 auto_increment ID 列的表。当我删除具有最高 ID 的行时，例如 ID 100，我只想使用 mysql 触发器将该 ID 100 用于新行。我怎么做？

*当我删除时，例如 ID 1 并且最高 ID 为 100，我不想再次使用 ID 1。*

我使用不同的 PHP 调用执行删除和插入语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:37:47.073

您应该设置 AUTO_INCREMENT 表选项，例如 -

```
DELETE FROM table_name WHERE id = 100;

ALTER TABLE table_name AUTO_INCREMENT = 100; 
```

...然后插入新记录。

```
INSERT INTO table_name (id) VALUES (NULL); --> will add 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:10:23.557

这是触发器（使用 drop / create 语句）：

```
DELIMITER $$

DROP TRIGGER IF EXISTS `trigger_name`$$

CREATE
    TRIGGER `trigger_name` BEFORE INSERT ON `table_name` 
    FOR EACH ROW BEGIN
    DECLARE inc_val INT;
    SET inc_val := (SELECT IFNULL(MAX(ID), 0)+1 FROM table_name)
    ;
    SET NEW.ID = inc_val
    ;
    END;
$$

DELIMITER ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:43:55.567

我尝试`auto_increment`使用`alter table`. 因为，每次插入时检查可能会导致性能问题。所以我认为最好在删除完成时触发。

我试过这个并得出结论，`Alter table`不能应用于触发器。而只做`"Alter table"`改变`auto_increment`是这样解决的，所以这种方法不能采取。

MySQL 给出错误“触发器中不允许显式/隐式提交”。

我建议您创建一个存储过程，然后在从表中删除时调用它。我想你总是知道你在哪里删除（所以似乎是可行的）。

程序如下：

* * *

```
DELIMITER $$

USE `database_name`$$

DROP PROCEDURE IF EXISTS `new_max`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `new_max`()
BEGIN
    DECLARE i INTEGER;
    SET i = (SELECT MAX(id) FROM `table_name`);
    SET @ddl = CONCAT('alter table `table_name` auto_increment = ',(i+1));
    PREPARE STMT FROM @ddl;
    EXECUTE STMT;
    END$$

DELIMITER ; 
```

你会称它为`call new_max();`

使用存储过程，您无需进行太多编程，只需在触发删除命令后在代码中添加简单的行，它就会按您的意愿工作。希望能帮助到你....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T14:52:23.080

最后，我找到了解决问题的正确方法。感谢您的所有建议和批评。我现在没有使用触发器，而是使用了一个过程（感谢@shubhansh 的想法）。

这是该过程的创建语句：

```
DELIMITER $$

USE `[DATABASE]`$$

DROP PROCEDURE IF EXISTS `[PROCEDURE NAME]`$$

CREATE PROCEDURE `[PROCEDURE NAME]`(deleteID INT(11))
BEGIN
    DECLARE i INTEGER;

    SET @deleteRow = CONCAT('delete from `[TABLE NAME]` WHERE ID = ', deleteID);
    PREPARE a FROM @deleteRow;
    EXECUTE a;

    SET i = (SELECT IFNULL(MAX(ID), 0) FROM `[TABLE NAME]`);
    SET @alterTable = CONCAT('alter table `[TABLE NAME]` auto_increment = ',(i+1));
    PREPARE b FROM @alterTable;
    EXECUTE b;

    END$$

DELIMITER ; 
```

现在我可以在一个 PHP 语句中删除和更改一个表，它被保存，因为过程锁定了表。

# numpy - 将 2D NumPy 数组转换为 1D 数组以绘制直方图

> ID：11739796
> 
> 赞同：11
> 
> 时间：2012-07-31T12:10:30.107
> 
> 标签：numpy, matplotlib

我正在尝试使用 matplotlib 绘制直方图。我需要转换我的单行二维数组

```
[[1,2,3,4]] # shape is (1,4) 
```

成一维数组

```
[1,2,3,4] # shape is (4,) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-07-21T14:28:40.557

添加[`ravel`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html)作为未来搜索者的另一种选择。从文档中，

> 它等价于 reshape(-1, order=order)。

由于数组是 1xN，因此以下所有内容都是等价的：

*   `arr1d = np.ravel(arr2d)`
*   `arr1d = arr2d.ravel()`
*   `arr1d = arr2d.flatten()`
*   `arr1d = np.reshape(arr2d, -1)`
*   `arr1d = arr2d.reshape(-1)`
*   `arr1d = arr2d[0, :]`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-31T12:18:20.083

您可以直接索引列：

```
>>> import numpy as np
>>> x2 = np.array([[1,2,3,4]])
>>> x2.shape
(1, 4)
>>> x1 = x2[0,:]
>>> x1
array([1, 2, 3, 4])
>>> x1.shape
(4,) 
```

或者你可以使用[挤压](http://docs.scipy.org/doc/numpy/reference/generated/numpy.squeeze.html)：

```
>>> xs = np.squeeze(x2)
>>> xs
array([1, 2, 3, 4])
>>> xs.shape
(4,) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T12:13:53.487

[`reshape`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.reshape.html)会成功的。

还有一个更具体的功能，[`flatten`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.flatten.html#numpy.ndarray.flatten)它似乎完全可以满足您的需求。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-23T13:43:53.820

mtrw 提供的答案对实际上只有一行这样的数组有效，但是如果您有一个二维数组，其值是二维的，您可以将其转换如下

```
a = np.array([[1,2,3],[4,5,6]]) 
```

从这里你可以找到数组的形状`np.shape`并找到它的乘积，`np.product`这会导致元素的数量。如果您现在使用`np.reshape()`将数组重新整形为元素总数的一个长度，您将获得一个始终有效的解决方案。

```
np.reshape(a, np.product(a.shape))
>>> array([1, 2, 3, 4, 5, 6]) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-24T15:47:50.860

使用[numpy.flat](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.flat.html)

```
import numpy as np
import matplotlib.pyplot as plt

a = np.array([[1,0,0,1],
              [2,0,1,0]])

plt.hist(a.flat, [0,1,2,3]) 
```

![展平阵列的直方图](../Images/7745c1390a4c381fab248ac992ba3819.png)

该`flat`属性返回二维数组上的一维迭代器。此方法推广到任意数量的行（或维度）。对于大型阵列，它可能比制作扁平副本更有效。

# c# - 使用服务器变量进行身份验证

> ID：11739801
> 
> 赞同：2
> 
> 时间：2012-07-31T12:10:46.417
> 
> 标签：c#, asp.net, iis

有一个asp.net网站，其中的认证如下。该网站的链接将从门户访问。使用 cleartrust，将设置服务器变量。这样的服务器变量之一是“UserID”。

在主页中，使用以下逻辑。它检索服务器变量“UserID”。如果它返回非空值，则认为它已通过身份验证。

我需要证明上述方法是不够的。这意味着，当其他人通过设置服务器变量向网站 url 发出请求时，他们可以看到数据。我想创建另一个网站，通过设置服务器变量来调用当前网站。有可能这样做吗？

```
 protected void Page_Load(object sender, EventArgs e)
    {

        string user = getCtHeader(this.Request, "UserID").Trim();

    }

    public static string getCtHeader(HttpRequest request, string key)
    {
        string value = request.ServerVariables[key];
        return value;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:22:10.907

[像C# WebClient 登录到 accounts.google.com](https://stackoverflow.com/questions/8601302/c-sharp-webclient-login-to-accounts-google-com)一样编写 smth ，只需更改标题，从服务器接收数据，仅此而已

# c++ - Design reasons for the behavior of reference members of classes passed by const reference

> ID：11739804
> 
> 赞同：3
> 
> 时间：2012-07-31T12:10:55.057
> 
> 标签：c++, reference

Suppose to have the code

```
#include <iostream>

struct A{
  int y;
  int& x;
  A():y(0),x(y){}
};

void f(int& x){
  x++;
}

void g(const A& a){
  f(a.x);
  //f(a.y);
}

int main(){
  A a;
  g(a);
  std::cout<<a.y<<std::endl;

} 
```

inside g() calling f() on y is not allowed because a is passed with the const modifier however, the value of y can be modified inside g() by calling f on x;

With pointers, a similar things can be obtained very similarly

```
struct B{
  int* x;  
} 
```

and

```
g(const B&){
   *x++;
} 
```

is allowed. This is perfectly clear: We have a const pointer to non-const int. But in the previous reference example, if references ARE the object, why do in this case they behave as pointers? What are the design policies under this behavior?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:21:27.917

> if references ARE the object

references are *not* objects though - they're references to objects.

You're right that making a reference itself const isn't very useful: since they're non-reseatable, they can't be mutated like pointers in any case.

In fact, it might be more helpful to think of a reference as a const pointer (not a pointer-to-const!) with special syntax.

Note that if you *want* an indirection which does propogate constness from the referee to the referent (ie, to prevent the `f(a.x)` call here), you can write a smart pointer-style thing to do it.

* * *

Concrete example

```
struct A
{
    int x;
    int *p;
    int &r;

    A() : x(0), p(&x), r(x) {}
}; 
```

Now in `A a`:

*   `a.x` is a mutable int
*   `a.p` is a mutable pointer (so we can reseat it) to a mutable int (we can change the value of the integer it points to)
*   and `a.r` is a reference to a mutable int
    *   note that since we can't mutate (reseat) references anyway, it doesn't mean anything for the reference itself to be either const or mutable

... but in `const A b`:

*   `b.x` is a constant integer
*   `b.p` is a constant pointer (so we can't reseat it) to a mutable int
*   `b.r` is a reference to a mutable int
    *   note how the constness is applied to the member of A (the pointer or reference) and does *not* propogate through to the referent.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T12:21:50.560

The actual language in the standard is

> [c++11](/questions/tagged/c%2b%2b11 "show questions tagged 'c++11'")
> 
> ### 8.3.2 References [dcl.ref]
> 
> 1 - [...] [ Note: A reference can be thought of as a name of an object. —end note ]

So if a reference is a *name* of an object, not an object itself, then it makes sense that causing the enclosing structure to be `const` makes the name `const` (which is meaningless, as references can't be rebound), but not the object itself.

We also see

> 6 - If a typedef, a type template-parameter, or a decltype-speciﬁer denotes a type TR that is a reference to a type T, an attempt to create the type “lvalue reference to *cv* TR” creates the type “lvalue reference to T” [...]

Since member access on a *cv* object creates a *cv* lvalue, the same applies and the *cv* qualification is extinguished.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:19:00.643

In C++ references are usually implemented by pointers. (I think that the `sizeof` a reference and pointer are the same).

Indeed I usually think of references as pointers, but with different syntax.

# java - 从 Testlink XML-RPC 响应恢复 TestSuite 的顺序？

> ID：11739805
> 
> 赞同：2
> 
> 时间：2012-07-31T12:10:57.333
> 
> 标签：java, api, testing, report, xml-rpc

我想使用[Testlink API](http://code.google.com/p/testlink-api-java-client/)来检索`TestCases`/`TestSuites`并在报告中显示它们。它们应该按照它们在Testlink“测试规范”中出现的顺序进行排序（一种类似文件夹的结构，可以通过鼠标拖放重新排序）。

`TestCase`RPC-XML API 返回的每个参数都包含一个参数，该参数`z`描述了它在`TestSuite`. 因此，重建的顺序`TestCases`是可能的。但是，在项目中没有用于订购`TestSuites`的类似参数。例如，以下两行可用于`TestSuites`从 Testlink 获取...

```
conn = new TestLinkAPIClient(testlinkKey, testlinkURL);
TestLinkAPIResults suites = conn.getTestSuitesForTestPlan(testplanID); 
```

...但结果仅包含有关其层次结构 ( `parent_id`) 的信息，没有有关其顺序的信息。

```
Result[0] = {id=6754, name=TestThree, parent_id=6752}
...
Result[8] = {id=22818, name=TestOne, parent_id=6754}
Result[9] = {id=22819, name=TestTwo, parent_id=6754} 
```

是否有可能以某种方式从 XML-RPC 响应中重建顺序，以便我可以`Testcases`准确地列出它们在“测试规范”中出现的顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-02T13:24:32.643

您可以使用一种“作弊方式”来获取订单：

```
conn = new TestLinkAPIClient(testlinkKey, testlinkURL);
TestLinkAPIResults suites = conn.getTestSuitesForTestPlan(testplanID);
for(int i=0; i<suites.length;i++){
   List<Integer> id = new LinkedList();
   id.add(suites[i].getId());
   System.out.println("order for "+suites[i].getName()+" = "+conn.getTestSuitesById(id)[0].getOrder());
} 
```

我个人使用了testlink java api [https://jar-download.com/java-documentation-javadoc.php?a=testlink-java-api&g=br.eti.kinoshita&v=1.9.2-1](https://jar-download.com/java-documentation-javadoc.php?a=testlink-java-api&g=br.eti.kinoshita&v=1.9.2-1)但我认为你的相当相同。

希望它会帮助你

# javascript - 通过 Couchdb 中的更新处理程序添加 id 和 author 字段

> ID：11739806
> 
> 赞同：1
> 
> 时间：2012-07-31T12:11:01.870
> 
> 标签：javascript, couchdb, couchapp

人们如何通过 Couchdb 中的更新处理程序添加额外的字段？我想添加作者（我有一个验证功能来检查用户是否已登录）以及通过更新处理程序创建新文档时添加的 id。

作者姓名来自 req.userCtx.Name，我发送的数据在 req.body 中，我使用 req.uuid 作为 _id

```
"updates": {
   "new": "function(doc,req) { var message = req.uuid; return [ { _id : req.uuid, "author" : req.userCtx.name, data : req.body}, message]}"
} 
```

数据通过 curl POST 发送

```
$ cat test.json
{"data" : {"name" : "myname","dob" : "myDOB"}} 
```

这是通过更新处理程序查看数据的方式

```
{"_id":"a018fed749d64f5db754b39af803a88f","_rev":"1-939793c36d2bfe4de86f808fab056959","author":"admin","data":"{\"name\" : \"myname\",\"dob\" : \"myDOB\"}"} 
```

如果我执行标准 POST（不是通过更新处理程序），它看起来像这样..

```
{"_id":"a018fed749d64f5db754b39af803b621","_rev":"1-e44f0471e1df1018439fee3681b49547","data":{"name":"myname","dob":"myDOB"}} 
```

我究竟做错了什么 ？

* * *

**编辑**

典型地花了几个小时寻找然后发布问题我找到了解决方案。

这有帮助 - [http://grokbase.com/t/couchdb/user/10cbesx3zz/how-should-i-handle-json-parsing-in-update-handler](http://grokbase.com/t/couchdb/user/10cbesx3zz/how-should-i-handle-json-parsing-in-update-handler)

```
{ "new": "function(doc,req) { var data = JSON.parse(req.body); data['_id'] = req.uuid;data.author = req.userCtx.name; message = req.uuid; return [ data, message]}" } 
```

doc 现在有 id 和 author ..

```
{"_id":"a018fed749d64f5db754b39af80406b7","_rev":"1-c486b02d6f320eb15e6115e71b3f02cc","data":{"name":"myname","dob":"myDOB"},"author":"admin"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:31:17.290

典型地花了几个小时寻找然后发布问题我找到了解决方案。

这来自 - [http://grokbase.com/t/couchdb/user/10cbesx3zz/how-should-i-handle-json-parsing-in-update-handler](http://grokbase.com/t/couchdb/user/10cbesx3zz/how-should-i-handle-json-parsing-in-update-handler)

```
{
   "new": "function(doc,req) { 
        var data = **JSON.parse(req.body)**; 
        data['_id'] = req.uuid;data.author = req.userCtx.name; 
        message = req.uuid; 
        return [ data, message]
    }"
} 
```

doc 现在有 id 和 author ..

```
{   "_id":"a018fed749d64f5db754b39af80406b7",
    "_rev":"1-c486b02d6f320eb15e6115e71b3f02cc",
    "data":{"name":"myname","dob":"myDOB"},
    "author":"admin"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-24T07:22:36.857

它可以帮助您使更新处理程序函数返回您的请求对象，如下代码：

```
(...)
return [doc, JSON.stringify(req)]
(...) 
```

我这样做是为了了解/识别 Request 对象中的属性（这里是 Request 对象文档：[http](http://docs.couchdb.org/en/latest/json-structure.html#request-object) ://docs.couchdb.org/en/latest/json-structure.html#request-object ）

# javascript - jQuery滑块在悬停时停止

> ID：11739807
> 
> 赞同：0
> 
> 时间：2012-07-31T12:11:01.793
> 
> 标签：javascript, jquery, animation, hover

我目前正在研究一个小的 jQuery 元素，但在使用 clearInterval 时遇到了一些问题。

我用我正在做的一个例子做了一个 jsFiddle：http: [//jsfiddle.net/eWTSu/](http://jsfiddle.net/eWTSu/)

如您所见，它可以很好地旋转，但是当我将鼠标悬停在导航按钮上时，旋转不会停止。旋转的顺序也有问题。旋转 div1、div2、div3、div4 并重复。但是，当我将第三个按钮悬停在第一个 div 上时，它会将第二个 div 加载到第三个 div 之上。

有人对我有什么好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:19:54.580

试试这个（见[演示](http://jsfiddle.net/eWTSu/11/)）：

```
jQuery(document).ready(function () {
    $('.greenC, .blueC, .orangeC').hide();

    $('.nav li').hover(function () {
        var liClass = $(this).attr('class');

        $('.slider').hide();
        $('.' + liClass + 'C').show();
    });

    (function () {
        var interval_function = function () {
            jQuery('#header_slider > div:first')
                .hide()
                .next()
                .show()
                .end()
                .appendTo('#header_slider');
        };

        var interval = setInterval(interval_function, 1000);

        $('.nav li').hover(function () {
            clearInterval(interval);
        }, function () {
            interval = setInterval(interval_function, 1000);
        });
    }());
});​ 
```

# java - Hibernate 多对一合并

> ID：11739813
> 
> 赞同：0
> 
> 时间：2012-07-31T12:11:23.637
> 
> 标签：java, hibernate, orm

我有一个带有 id、name 和 status 的类 Person 。status 是一个带有 id 的类 Status，而 status 字符串是 netbeans 工具为 hibernate 生成的代码

```
class Person{
   long id;
   String name;
   Status status;
   //getters and setters
}
class Status{
   long id;
   String status;
   List<Person> persons;
   //getters and setters
} 
```

问题是当我想在会话中合并一个人时，我的状态为 null

人 p = getById(1L); // 人名=XX; 状态=1

p.setName("YY");

session.merge(p); // 这里的状态是获取 NULL 非空属性引用一个空值或瞬态值：model.Status

我知道在合并时休眠会加载人员对象，所以为什么状态返回为空；？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:30:56.733

延迟加载仅在多对一引用使用另一个对象的主键时才有效。并且还要避免在 one2many 关系上创建你的架构。

在您的 person.hbm.xml 文件中像这样使用。

```
<set name="status" table="status" 
            inverse="true" lazy="false" fetch="select">
        <key>
            <column name="id" not-null="true" />
        </key>
        <one-to-many class="xxx.Status" />
 </set> 
```

status.hbm.xml 应该是这样的；

```
 <many-to-one name="person" class="xxx.Person" fetch="select">
      <column name="id" not-null="true" />
 </many-to-one> 
```

我希望它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:25:17.767

在这种情况下，状态不是空的，而是暂时的。您正在尝试在合并该人包含的`Person`之前进行合并。`Status`所以你试图在休眠上下文中引入一个在上下文之外具有引用的实体。解决方案是在合并人员之前合并状态或定义`CascadeType.MERGE`。

# ios - IOS UIImage 图片倒置

> ID：11739816
> 
> 赞同：7
> 
> 时间：2012-07-31T12:11:41.683
> 
> 标签：ios, uiimage, jpeg, draw

如果我画我的图像我解决了问题使用 CGAffintrasform

```
CGAffineTransform myTr = CGAffineTransformMake(1, 0, 0, -1, 0, backImage.size.height);
CGContextConcatCTM(context, myTr);
[backImage drawInRect:CGRectMake(cbx, -cby, backImage.size.width, backImage.size.height)];
myTr = CGAffineTransformMake(1, 0, 0, -1, 0, backImage.size.height);
CGContextConcatCTM(context, myTr); 
```

当我想写文件时我用这个

```
 NSData *imageData = UIImageJPEGRepresentation(backImage, 0); 
```

那么图像倒置怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:00:17.507

当您想要保存 UIImage 时，请使用：

```
UIGraphicsBeginImageContextWithOptions(size, isOpaque, 0);
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextDrawImage(context, (CGRect){ {0,0}, origSize }, [origImage CGImage]);
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return image; 
```

然后做：

```
 NSData *imageData = UIImageJPEGRepresentation(backImage, 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:15:31.333

首先制作身份矩阵。

```
1, 0, 0
0, 1, 0
0, 0, 1

CGAffineTransform matrix = CGAffineTransformMake(1, 0, 0, 1, 0, 0); 
```

移动绘图位置...

```
matrix = CGAffineTransformTranslate(matrix, x, y); 
```

水平翻转矩阵。

```
matrix = CGAffineTransformScale(matrix, -1, 1); 
```

垂直翻转矩阵。

```
matrix = CGAffineTransformScale(matrix, 1, -1); 
```

旋转矩阵

```
matrix = CGAffineTransformRotate(matrix, angle); 
```

将 UIImage 缩放到 UIView。

```
matrix = CGAffineTransformScale(matrix, imageWidth/viewWidth, imageheight/viewHeight); 
```

将矩阵启动到上下文中。

```
CGContextConcatCTM(context, matrix); 
```

绘制图像。

```
[backImage drawAtPoint:CGPointMake(0, 0)]; 
```

:)

# android - android 多线程：thread.join() 无法按预期工作

> ID：11739825
> 
> 赞同：0
> 
> 时间：2012-07-31T12:12:32.323
> 
> 标签：android, multithreading

`thread.join`我在下面的代码中使用时遇到问题。它应该等待线程完成，然后再执行它之后的代码，对吧？它在不同的场合表现不同。

我有三个案例来检查我的代码是否运行良好

*   应用程序第一次使用 - 按预期工作，但下载时加载页面不出现
*   应用程序被第二次使用（数据库是最新的） - 工作正常
*   应用程序第三次使用（数据库已过时，必须更新） - 不会更新，屏幕黑屏，然后崩溃

我认为我在方法上的代码有问题`onCreate`：

```
dropOldSchedule();
dropThread.join();
triggerDownload(); 
```

根据日志，代码在这部分之前一直有效......可能是什么问题？

* * *

**MainActivity.java**

```
public class MainActivity extends Activity {

final static int INDEX_ACCTTYPE = 0; 
final static int INDEX_ECN = 1; 
final static int INDEX_TLN = 2; 
final static int INDEX_SIN = 3; 
final static int INDEX_MOBILE = 4; 
final static int INDEX_CITY = 5;
final static int INDEX_START_DATE = 6;
final static int INDEX_START_TIME = 7;
final static int INDEX_END_DATE = 8; 
final static int INDEX_END_TIME = 9; 
final static int INDEX_REASON = 10;
final static int INDEX_DETAILS = 11;

DatabaseHandler db;
String str;
ProgressDialog pd;

TextView homeText1, homeText2, homeText3, homeText4;

final private String csvFile = "http://www.meralco.com.ph/pdf/pms/pms_test.csv";
final private String uploadDateFile = "http://www.meralco.com.ph/pdf/pms/UploadDate_test.txt";

Thread dropThread = new Thread(new Runnable() {

    public void run() {
        db = new DatabaseHandler(MainActivity.this);
        db.dropOldSchedule(); 

        runOnUiThread(new Runnable() {
            public void run() {
                while (!pd.isShowing());
                db.close();
                pd.dismiss();
            }
        });
    }

});
Thread getUploadDateThread = new Thread(new Runnable() {

    public void run() {

        try {
            URL myURL = new URL(uploadDateFile);

            BufferedReader so = new BufferedReader(new InputStreamReader(myURL.openStream()));
            while (true) {
                String output = so.readLine();
                if (output != null) {
                    str = output;
                }
                else {
                    break;
                }
            }
        so.close();
        }
        catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 

        runOnUiThread(new Runnable() {
            public void run() {
                while (!pd.isShowing());
                pd.dismiss();
            }
        });
    }

    });
Thread downloadThread = new Thread(new Runnable() {

    public void run() {

        db = new DatabaseHandler(MainActivity.this);
        db.beginTransaction();

        try {
            URL url = new URL(csvFile);

            Log.i("dl", "start");

            InputStream input = url.openStream();
            CSVReader reader = new CSVReader(new InputStreamReader(input));
            Log.i("dl", "after reading");

            String [] sched;
            while ((sched = reader.readNext()) != null) {
                if(sched[INDEX_CITY].equals("")) sched[INDEX_CITY]="OTHERS";
                try {

                    db.addRow(sched[INDEX_SIN], sched[INDEX_CITY], 
                            sched[INDEX_START_DATE], sched[INDEX_START_TIME], 
                            sched[INDEX_END_DATE], sched[INDEX_END_TIME], 
                            sched[INDEX_DETAILS], sched[INDEX_REASON]);
                } catch (IndexOutOfBoundsException e) {
                    db.addRow(sched[INDEX_SIN], sched[INDEX_CITY], 
                            sched[INDEX_START_DATE], sched[INDEX_START_TIME], 
                            sched[INDEX_END_DATE], sched[INDEX_END_TIME], 
                            "", sched[INDEX_REASON]);
                    //e.printStackTrace();
                }
            }
            input.close();
            Log.i("dl", "finished");

        } catch (MalformedURLException e) {
            e.printStackTrace();
            db.endTransaction();
        } catch (IOException e) {
            e.printStackTrace();
            db.endTransaction();
        } 
        Log.d("Count", ""+db.count());
        db.setTransactionSuccessful();
        db.endTransaction();

        writeUploadDateInTextFile();

    }

});

@SuppressWarnings("unqualified-field-access")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.pms_main);

    Button home = (Button) findViewById(R.id.home);
    home.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent intent = new Intent(MainActivity.this, MeralcoSuite_TabletActivity.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);

            finish();
        }
    });

    homeText1 = (TextView) findViewById(R.id.home_text1);
    homeText2 = (TextView) findViewById(R.id.home_text2);
    homeText3 = (TextView) findViewById(R.id.home_text3);
    homeText4 = (TextView) findViewById(R.id.home_text4);

    homeText1.setVisibility(View.INVISIBLE);
    homeText2.setVisibility(View.INVISIBLE);
    homeText3.setVisibility(View.INVISIBLE);
    homeText4.setVisibility(View.INVISIBLE);

    getUploadDate();
    try {
        getUploadDateThread.join();     //wait for upload date

        Log.d("getUploadDate","thread died, upload date=" + str);

        if(dbExists()){
            db = new DatabaseHandler(MainActivity.this);
            Log.d("Count", "" + db.count());
            db.close();

            if(!uploadDateEqualsDateInFile()){
                dropOldSchedule();
                    dropThread.join();
                triggerDownload();
            }
            showDisclaimer();
            Log.i("oncreate", "finished!");
            return;
        }

        triggerDownload();
        showDisclaimer();
        Log.i("oncreate", "finished!");

    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public void dropOldSchedule(){

    if(pd!=null && pd.isShowing())
        pd.setTitle("Getting upload date...");
    else
        pd = ProgressDialog.show(this, "Getting upload date", 
            "This may take a few minutes...", true, false);

    dropThread.start();
}
public void triggerDownload() {

    if (!checkInternet()) {
        showAlert("An internet connection is required to perform an update, please check that you are connected to the internet");
        return;
    }

    if(pd!=null && pd.isShowing())
        pd.setTitle("Getting upload date...");
    else
        pd = ProgressDialog.show(this, "Getting upload date", 
            "This may take a few minutes...", true, false);

    downloadThread.start();

}

public void getUploadDate() {

    Log.d("getUploadDate", "getting upload date of schedule");

    if(pd!=null && pd.isShowing())
        pd.setTitle("Getting upload date...");
    else
        pd = ProgressDialog.show(this, "Getting upload date", 
            "This may take a few minutes...", true, false);

    getUploadDateThread.start();

}

public void writeUploadDateInTextFile() {
    Log.d("writeUploadDateTextFile", "writing:"+str);

    try {
        OutputStreamWriter out = new OutputStreamWriter(openFileOutput(
                "update.txt", 0));
        out.write(str);
        out.close();
    } catch (java.io.IOException e) {
        e.printStackTrace();
    }
}

public void showDisclaimer() {
    Log.d("ShowDisclaimer", "showing disclaimer");

    homeText3
    .setText("..." + str
            + "...");

    homeText1.setVisibility(View.VISIBLE);
    homeText2.setVisibility(View.VISIBLE);
    homeText3.setVisibility(View.VISIBLE);
    homeText4.setVisibility(View.VISIBLE);

    Log.d("showDisclaimer", "finished showing disclaimer");

}

public boolean uploadDateEqualsDateInFile() {
    Log.d("uploadDateEqualsDateInFile","comparing schedule upload dates");

    try {
            String recordedDate = "";
            InputStream instream = openFileInput("update.txt");
            if (instream != null) { // if file the available for reading
                Log.d("uploadDateEqualsDateInFile","update.txt found!");

                InputStreamReader inputreader = new InputStreamReader(instream);
                BufferedReader buffreader = new BufferedReader(inputreader);

                String line = null;
                while ((line = buffreader.readLine()) != null) {
                    recordedDate = line;
                    Log.d("uploadDateEqualsDateInFile","recorded:"+recordedDate);
                }

                Log.d("uploadDateEqualsDateInFile","last upload date: " + str + ", recorded:" +recordedDate);

                if(str.equals(recordedDate)) return true;
                return false;
            }
            Log.d("uploadDateEqualsDateInFile","update.txt is null!");
            return false;   

    } catch (FileNotFoundException e) {
        e.printStackTrace();
        return false;
    } catch (IOException e) {
        e.printStackTrace();
        return false;
    }
}

public boolean checkInternet() {
    ConnectivityManager cm = (ConnectivityManager) this
            .getSystemService(Context.CONNECTIVITY_SERVICE);

    NetworkInfo infos[] = cm.getAllNetworkInfo();

    for (NetworkInfo info : infos)
        if (info.getState() == NetworkInfo.State.CONNECTED
                || info.getState() == NetworkInfo.State.CONNECTING) {
            return true;
        }

    return false;
}

public boolean dbExists() {

    File database=getApplicationContext().getDatabasePath(DatabaseHandler.DATABASE_NAME);

    if (!database.exists()) {
        Log.i("Database", "Not Found");
        return false;
    }

    Log.i("Database", "Found");
    return true;

}

@Override
protected void onDestroy() {
    super.onDestroy();
    if (db != null) {
        db.close();
    }
}
@Override
protected void onPause() {
    super.onPause();
    if (db != null) {
        db.close();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:18:48.520

抱歉，我在您的代码中找不到错误或问题。但我强烈建议您使用 AsyncTask 在不同的线程中执行某些操作。AsyncTask 非常易于使用，我想说它是 java 的最大优势之一。我真的很想念obj-c。

[http://labs.makemachine.net/2010/05/android-asynctask-example/](http://labs.makemachine.net/2010/05/android-asynctask-example/)

[http://marakana.com/s/video_tutorial_android_application_development_asynctask_preferences_and_options_menu,257/index.html](http://marakana.com/s/video_tutorial_android_application_development_asynctask_preferences_and_options_menu,257/index.html)

检查这些链接希望对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:52:30.153

已经提到这`AsyncTask`是更好的选择。但是，您的 join 调用可能会抛出`InterruptedException`. 尝试像这样使用它：

```
while(getUploadDateThread.isRunning()){
    try{
        getUploadDateThread.join();
    } catch (InterruptedException ie){}
}
// code after join 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T07:46:02.250

我认为您面临的问题是您在`onCreate()`方法中调用 join 时阻塞了 UI 线程。您应该将此代码移动到另一个应该在后台执行的线程中，一旦完成，您就可以更新 UI。

这是一个示例代码：

```
 final Thread t1 = new Thread();
    final Thread t2 = new Thread();
    t1.start();
    t2.start();
    new Thread(new Runnable() {

        @Override
        public void run() {
            // Perform all your thread joins here.
            try {
                t1.join();
                t2.join();
            } catch (Exception e) {
                // TODO: handle exception
            }

            // This thread wont move forward unless all your threads
            // mentioned above are executed or timed out.
            // ------ Update UI using this method
            runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    // Update UI code goes here

                }
            });

        }
    }).start(); 
```

# android - 如何使用 jquery 或元标记禁用 android webview 中的缩放视图？

> ID：11739828
> 
> 赞同：2
> 
> 时间：2012-07-31T12:12:35.443
> 
> 标签：android, jquery, html

我是一名 php 开发人员，正在构建一个在 Iphone、Android 中使用的网站。Iphone 的设计没问题，但在 Android 中，它只是在我加载页面时默认缩小，并且无法正确处理我的项目。有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:16:16.090

这个元应该可以解决问题：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

编辑：

尝试将这些添加到代码中（[source](http://garrows.com/?p=337)）：

```
<meta content='True' name='HandheldFriendly' />
<meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport' />
<meta name="viewport" content="width=device-width" /> 
```

# directx - 如何在 Direct3D10 中获取设备上下文

> ID：11739830
> 
> 赞同：1
> 
> 时间：2012-07-31T12:12:38.593
> 
> 标签：directx, port, gdi

谁能帮我将此DX9代码移植到DX10（不是11！）。这是一个简单的纹理绘图。

```
 // create the texture
    m_pDevice->CreateTexture(m_width, m_height, 1, 0, D3DFMT_X8R8G8B8, D3DPOOL_DEFAULT, &m_pTexture, NULL);
    // get its surface (target surface)
    m_pTexture->GetSurfaceLevel(0, &m_pSurface);
    // create the second surface (source surface)
    m_pDevice->CreateOffscreenPlainSurface(m_width, m_height, D3DFMT_X8R8G8B8, D3DPOOL_SYSTEMMEM, &m_pSurfaceMem, NULL);

    // drawing to Direct3D, this is called in loop
    ...
    m_pSurfaceMem->GetDC(&hdc);

    HRGN hrgn = CreateRectRgnIndirect(lprc);
    SelectClipRgn(hdc, hrgn);
    RECTL clipRect = { 0, 0, m_width, m_height };

    // This draws to the source surface
    m_pViewObject->Draw(DVASPECT_TRANSPARENT, 1, NULL, NULL, NULL, hdc, &clipRect, &clipRect, NULL, 0);

    m_pSurfaceMem->ReleaseDC(hdc);
    DeleteObject(hrgn);

    POINT pt = {lprc->left, lprc->top};
    // Now update the target surface
    m_pDevice->UpdateSurface(m_pSurfaceMem, lprc, m_pSurface, &pt); 
```

为简单起见，可以省略错误处理等。

# objective-c - 在 didFinishLaunchingWithOptions 中连续两个 UIAlertView

> ID：11739832
> 
> 赞同：1
> 
> 时间：2012-07-31T12:12:41.557
> 
> 标签：objective-c, ios

我希望仅在用户第一次打开我的应用程序时才显示两个警报视图——第二个在第一个被关闭后出现。我将它设置为仅在以前未显示 UIAlertViews 时才显示它，我不需要帮助。在这种情况下，我需要帮助弄清楚如何连续显示两个警报视图。

-(void) alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex 对我不起作用。

这是我的代码 - 请记住这是在 didFinishLaunchingWithOptions 中：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
BOOL didFirstLaunch = [defaults boolForKey:@"DidFirstLaunch"];
if (!didFirstLaunch) {
    [defaults setBool:YES forKey:@"DidFirstLaunch"];

    UIAlertView *successAlert = //not important
    [successAlert show];
    [successAlert release];

    //Somehow show second alert after the first is dismissed
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:30:49.087

我将使用[`GCD`&`blocks`](http://developer.apple.com/library/mac/#featuredarticles/BlocksGCD/)发布一个非常简单的解决方案（*GCD 部分是为了以防万一警报视图是在另一个线程上创建的，然后是主线程，回调应该可以安全地在主线程上执行*）。请记住，我只是在 5 分钟内编写了此代码，因此您绝对应该努力改进代码。有点难看的一件事是在我的子类中覆盖的委托参数。子类的接口可以稍微改变一下，以使发生的事情更加明显......

无论如何，这里...

首先创建一个 的子类`UIAlertView`，让它看起来有点像下面...

```
@interface FSAlertView () <UIAlertViewDelegate>

@property (nonatomic, copy) void (^dismissHandler)(NSInteger buttonIndex);

@end

@implementation FSAlertView

@synthesize dismissHandler = _dismissHandler;

- (void)showWithDismissHandler:(void (^)(NSInteger buttonIndex))dismissHandler
{
    self.dismissHandler = dismissHandler;

    self.delegate = self;

    [self show];
}

// Alert view delegate

- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    dispatch_async(dispatch_get_main_queue(), ^ {

        if (_dismissHandler)
        {
            _dismissHandler(buttonIndex);
        }

    });
} 
```

现在在应用程序中，我们可以创建警报视图，如下所示...

```
FSAlertView *alert1 = [[FSAlertView alloc] initWithTitle:@"Alert 1"
                                                 message:@"Some message"
                                                delegate:nil
                                       cancelButtonTitle:@"Cancel"
                                       otherButtonTitles:@"Show 2nd Alert", nil];

[alert1 showWithDismissHandler:^ (NSInteger buttonIndex) {

    NSLog(@"button pressed: %d", buttonIndex);

    if (buttonIndex == 1)
    {
        UIAlertView *alert2 = [[UIAlertView alloc] initWithTitle:@"Alert 2"
                                                         message:@"Hi!"
                                                        delegate:nil
                                               cancelButtonTitle:@"OK"
                                               otherButtonTitles:nil];
        [alert2 show];
    }

}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:39:04.530

如果我正确理解您的问题，那么这可能会有所帮助：

```
 UIAlertView *firstAlert = [[UIAlertView alloc] initWithTitle:@"Alert 1" message:nil delegate:self cancelButtonTitle:nil otherButtonTitles:nil, nil];
    [firstAlert show];
    [self performSelector:@selector(test:) withObject:firstAlert afterDelay:2];
    [firstAlert release];

    UIAlertView *secondAlert = [[UIAlertView alloc] initWithTitle:@"Alert 2" message:nil delegate:self cancelButtonTitle:nil otherButtonTitles:nil, nil];
    [secondAlert show];
    [self performSelector:@selector(test:) withObject:secondAlert afterDelay:2];
    [secondAlert release];

-(void)test:(UIAlertView*)alert{
    [alert dismissWithClickedButtonIndex:-1 animated:YES];
} 
```

这将一个接一个地显示两个警报视图。

注意：我不确定您是否使用取消按钮关闭警报，所以我会在几秒钟后自动关闭它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:09:45.667

**试试这个：**

```
UIAlertView *firstAlert = [[UIAlertView alloc] initWithTitle:@"Title" message:@"Message" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];
[firstAlert setTag:444];
[firstAlert show];
firstAlert = nil; 
```

**AlertView 委托方法：**

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    switch (alertView.tag) {
        case 444:
        {
            //Cancel ButtonIndex = 0
            if (buttonIndex == 1) {
                UIAlertView *secondAlert = [[UIAlertView alloc] initWithTitle:@"Title 2" message:@"Message2" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Dismiss", nil];
                [secondAlert setTag:555];
                [secondAlert show];
                secondAlert = nil;
            } 
        }
        break;
        case 555:
        {
            if (buttonIndex == 1) {
                NSLog(@"Code Here");
            }
        }
        break;
    }
} 
```

# delphi - 打印 QR 报告时列表索引越界错误

> ID：11739835
> 
> 赞同：2
> 
> 时间：2012-07-31T12:13:18.910
> 
> 标签：delphi, delphi-2007

在访问 Printer.Printers 字符串列表时，将 QuickReport 报告发送到选定的打印机时，我会收到类似“列表索引超出范围”的错误。

```
exception class   : EStringListError
exception message : List index out of bounds (6).

main thread ($1594c):
00479559 skdata.exe   Classes   5060 TStringList.GetObject
004a258b skdata.exe   Printers   581 TPrinter.GetPrinter
007ca744 skdata.exe   QRPrntr   3208 TPrinterSettings.ApplySettings
007cb5bb skdata.exe   QRPrntr   3995 TQRPrinter.BeginDoc
007be227 skdata.exe   QuickRpt  4645 TCustomQuickRep.CreateReport
007be909 skdata.exe   QuickRpt  4853 TCustomQuickRep.Print
00859bc7 skdata.exe   PostLst    142 TPostSpecListReport.Print 
```

我添加了显示打印机列表 (Printer.Printers) 在错误发生之前已更改的日志记录。我猜如果网络打印机关闭、网络关闭以及其他原因，打印机列表可能会发生变化。

如何处理这种情况？在 Delphi 中，所选打印机由 Printer.PrinterIndex 给出，但如果打印机列表发生更改，则该索引不再有效。

我只能想到一种解决方案，即在每次打印之前显示选择打印机对话框，换句话说，不要依赖 Printer.PrinterIndex 从一个打印作业到下一个打印作业是正确的。但这对用户来说可能很烦人。

理想情况下，应将所选打印机存储为 GUID 或按名称。那会让它更可靠。

我已经搜索了这个论坛以及 Embarcadero 论坛，但没有发现任何关于此类问题的提及。所以也许我忽略了一些简单的东西？

我使用 Delphi 2007 和 QuickReport 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:24:38.077

如果需要，您可以存储打印机名称，并将其分配到`OnBeforePrint`事件处理程序或报表的构造函数中。如果您不想对其进行硬编码，请将其存储在注册表或 ini 文件中。

```
type
  TMyForm = class(TForm)
  ....
  private
    FPrinterName: string;
  published
    ....
  end;

implementation

uses
  Printers;

procedure TMyForm.FormCreate(Sender: TObject);
begin
  // Set, or read from registry or ini file
  FPrinterName := 'My LaserJet Printer';
end;

procedure TMyForm.PrintReportButtonClick(Sender: Object);
begin
  // Create report and set up. Select stored printer, or set to default
  // printer if none is stored
  QuickRep1.PrinterSettings.PrinterIndex := Printers.IndexOf(FPrinterName);
  QuickRep1.Print;
  // Clean up - free report, etc.
end; 
```

# actionscript-3 - 带有多行标签 AS3 的 TileList 组件

> ID：11739837
> 
> 赞同：0
> 
> 时间：2012-07-31T12:13:25.753
> 
> 标签：actionscript-3, flash, label, multiline, tilelist

有没有办法让 TileList 的项目标签多行而不弄乱它的单元格渲染器？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:29:53.113

文档指定`TileList`的默认单元格渲染器`ImageCell`显示单行标签。我环顾四周，但它不能被公共方法或属性改变。

因此，要使用多行标签，您可能需要制作自己的单元格渲染器（可能扩展`ImageCell`or`CellRenderer`类）。

# c++-cli - C++/CLI FIFO - 串行端口读取的列表与数组

> ID：11739842
> 
> 赞同：0
> 
> 时间：2012-07-31T12:13:31.947
> 
> 标签：c++-cli, serial-port, buffer, fifo

我有一个非常愚蠢的基本问题。但我认为它对许多其他初级程序员可能非常有用。

我通过serialPort（接收）进行了非常快的通信（12Mb / s），我想为String ^ s创建一个FIFO缓冲区，我将从传入的消息中提取它（开始字节-带有详细信息的消息-停止字节）。你会推荐我什么？

A) 我应该使用基于 Array 类的固体缓冲区吗？

B) 我应该使用基于 List 类的动态缓冲区吗？

非常感谢。

PS：我还必须提到，这个数组的数据收集在一个线程中运行。第二个线程从这个缓冲区解码字符串，第三个线程管理这两个线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T06:58:16.203

正如 Hans 所写，我的问题的最佳解决方案是**类 Queue**，所有困难都与它相关。

# json - 通过 jQuery POST 发送 JSON 不会影响 REST 服务

> ID：11739844
> 
> 赞同：0
> 
> 时间：2012-07-31T12:13:33.727
> 
> 标签：json, rest, jquery, post

我在论坛上查找了类似的错误，但似乎仍然无法正常工作，我得到了 `Status Code: HTTP/1.1 415 Unsupported Media Type`

我正在发送这个 jQuery：

```
$("#btnInsertCustomer").click(function (){
            var myObj = {name: "Bill Adama", address:"Vancouver Canada"};
            var jsondata = JSON.stringify(myObj);

            $.ajax({
                type: "POST",
                url: "http://localhost:8081/RestDemo/services/customers/add",
                contentType: "application/json",
                dataType: "json",
                data: jsondata,
                success: function (resp, status, xhr) {
                    var msg = "Name: " + resp.name + ", Address: " + resp.address;
                    alert(msg);
                    $("#successPost").html(msg  + " - STATUS: " + xhr.status + " " + xhr.statusText);

                },
                error: function(resp, status, xhr){  
                    alert("Error: " + resp.e); 
                    $("#errorPost").html("Error: " + resp.e  + " - STATUS: " + xhr.status + " " + xhr.statusText);

                } 
            });
         }); 
```

到以下资源：

```
@POST
    @Path("/add")
    @Produces("application/json")
    @Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    public String addCustomer(Customer customer) {
         //insert 
         int id = customerMap.size();
         customer.setId(id);
         customerMap.put(id, customer);
         //get inserted
         Customer result = customerMap.get(id);

         return  "{\"name\": \" " + result.getName() + " \", \"address\": \"" + result.getAddress() + "\"}";
} 
```

它没有击中服务并给我错误。我不明白错误是在 jQuery 端（似乎没问题）还是在服务接收器中格式化发送的数据。

任何帮助表示赞赏，谢谢！

**更新 1：创建了一个 DTO 来转移**

```
 $("#btnInsertCustomer").click(function (){
            //var myObj = '{"name": "Bill Adama", "address":"Vancouver Canada"}';
            //var jsondata = JSON.stringify(myObj);

            var NewCustomer = { };
            NewCustomer.name = "Bill Adama";
            NewCustomer.address = "Vancouver Canada";
            var DTO = { 'NewCustomer' : NewCustomer };

            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: "http://localhost:8081/RestDemo/services/customers/add",
                data: JSON.stringify(DTO),
                dataType: "json",

                success: function (resp, status, xhr) {
                    var msg = "Name: " + resp.name + ", Address: " + resp.address;
                    alert(msg);
                    $("#successPost").html(msg  + " - STATUS: " + xhr.status + " " + xhr.statusText);

                },
                error: function(resp, status, xhr){  
                    alert("Error: " + resp.e); 
                    $("#errorPost").html(resp.e  + " - STATUS: " + xhr.status + " " + xhr.statusText);

                } 
            });
         }); 
```

但我仍然得到同样的错误！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:27:13.547

您的服务是预期`customer`的，您必须在您的 javascript 中创建一个对象。这个[链接](http://encosia.com/using-complex-types-to-make-calling-services-less-complex/)会帮助你。

还有几点要纠正你：

```
 contentType: "application/json; charset=utf-8",

This >> myObj = {name: "Bill Adama", address:"Vancouver Canada"};

myObj = '{"name": "Bill Adama", "address" :"Vancouver Canada"}'; 
```

# java - 需要调整窗口大小以使程序正常工作

> ID：11739845
> 
> 赞同：2
> 
> 时间：2012-07-31T12:13:34.387
> 
> 标签：java, swing, resize, layout-manager, flowlayout

这是我的 Layout 类的代码。

```
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;

public class Layout extends JFrame {
    private JButton lb;
    private JButton cb;
    private JButton pb;
    private FlowLayout layout;
    private Container container;

    public Layout() {
        super("The Title");
        layout = new FlowLayout();
        container = new Container();
        setLayout(layout);

        //*Left
        lb = new JButton("L");
        add(lb);
        lb.addActionListener(
            new ActionListener(){   
                public void actionPerformed(ActionEvent event){
                    layout.setAlignment(FlowLayout.LEFT);
                    layout.layoutContainer(container);
                }
            }
        );
        //*Center
        cb = new JButton("C");
        add(cb);
        cb.addActionListener(
            new ActionListener(){   
                public void actionPerformed(ActionEvent event){
                    layout.setAlignment(FlowLayout.CENTER);
                    layout.layoutContainer(container);
                }
            }
        );      
        //*Right
        pb = new JButton("R");
        add(pb);
        pb.addActionListener(
            new ActionListener(){   
                public void actionPerformed(ActionEvent event){
                    layout.setAlignment(FlowLayout.RIGHT);
                    layout.layoutContainer(container);
                }
            }
        );
    }
} 
```

我正在通过newboston youtube 教程学习java（此代码来自[本](http://www.youtube.com/watch?v=DFQzFJqOSbA&feature=relmfu)教程）。但这并不像它应该的那样工作。当我单击右键 (R) 时，它应该立即将所有按钮拖到窗口的右侧。它没有。但是，当我单击该右键然后强制调整窗口大小时，它会执行应有的操作。通过在 main 方法中添加 setResizable(false)，我无法调整程序的大小，因此它不起作用。我做错了什么？

原谅我英语不好顺便说一句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:47:04.610

代替

```
container = new Container(); 
```

经过

```
container = getContentPane(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:31:31.363

最简单的方法是设置一个新的 FlowLayout 并调用 invalidate()：

```
 setLayout(new FlowLayout(FlowLayout.LEFT));
    invalidate();
    validate(); 
```

更新当前的 FlowLayout 没有效果。

# opengl-es-2.0 - 传感器方向 -> GLRotation 无法正常工作

> ID：11739853
> 
> 赞同：3
> 
> 时间：2012-07-31T12:14:31.150
> 
> 标签：opengl-es-2.0, augmented-reality, android-sensors, rotational-matrices

我想为我的 GLES 相机使用 Android 方向传感器数据 - 给它旋转矩阵。我在这里找到了一个很好的例子：

[如何结合 OpenGL 使用 onSensorChanged 传感器数据](https://stackoverflow.com/questions/2881128/how-to-use-onsensorchanged-sensor-data-in-combination-with-opengl)

但这仅适用于 GL1.0，我需要为 GLES2.0 工作。使用我自己的着色器，一切正常，手动移动相机很好。但是当我像示例中那样使用旋转矩阵时，它并没有真正起作用。

我生成旋转矩阵：

```
SensorManager.getRotationMatrix(rotationMatrix, null, bufferedAccelGData, bufferedMagnetData); 
```

我的应用程序在 LANDSCAPe 中运行，因此我在之后使用该方法（如示例代码中所示）：

```
float[] result = new float[16];
SensorManager.remapCoordinateSystem(rotationMatrix, SensorManager.AXIS_Y, SensorManager.AXIS_MINUS_X, result);
return result; 
```

在他的代码中，它在我的手机上运行良好，但在我的手机上却不行。我的屏幕是这样的：

![在此处输入图像描述](../Images/3903d0220c317b208eb9bb3290f09fca.png)

旋转矩阵似乎向右旋转了 90°（几乎就像我忘记为我的活动切换到横向一样）。

我正在考虑`remap()`以错误的方式使用该方法，但在示例中它是有道理的，相机移动现在有效。如果我向左旋转，屏幕也会向左旋转，尽管由于一切都转动了，它会“向上”旋转（与地面相比，地面不在底部而是在右侧）。看起来我做了一面墙而不是地面，但我确信我的坐标适合顶点。

我看了一下 draw 方法，`GLSurface`我看不出我在这里做错了什么：

```
GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);
MatrixStack.glLoadMatrix(sensorManager.getRotationMatrix());  // Schreibt die MVMatrix mit der ogn. Rotationsmatrix
GameRenderer.setPerspMatrix(); // Schreibt die Perspektivmatrix Uniform für GLES. Daran sollte es nicht liegen.
MatrixStack.mvPushMatrix();
  drawGround();    
MatrixStack.mvPopMatrix(); 
```

正如我所说，当手动移动我的相机时，一切都很完美。那么我得到的旋转矩阵有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-04T15:25:06.033

好吧，这是一个非常古老的问题，但现在我再次查看代码，我找到了解决方案。让手机处于横向状态，我不得不使用重新映射轴

```
SensorManager.remapCoordinateSystem(R, SensorManager.AXIS_Y, SensorManager.AXIS_MINUS_X, R); 
```

但这仍然没有旋转图像 - 即使 Y 轴和 -X 轴的映射工作正常。所以简单地使用

```
Matrix.rotateM(R, 0, 90, 1, 0, 0); 
```

做这项工作。不是很好，但它确实有效。

我知道这是一个非常古老的问题，我不明白为什么我会犯这个错误，但也许有一天其他人也会遇到同样的问题。

希望这会有所帮助，托拜厄斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:54:46.563

如果它（曾经）在特定手机上工作，但不在您的手机上，我想 android 版本可能会在这里发挥作用。我们在[mixare 增强现实引擎](http://www.mixare.org)中遇到了这个问题，其中 Surfaceview 叠加在相机视图上。请考虑这里的信息可能不适用于您的情况，因为我们没有使用 OpenGL。

现代版本的 android 将返回默认方向，而以前的纵向是默认方向。[您可以在Compatibility 类](https://github.com/mixare/mixare/blob/master/src/org/mixare/Compatibility.java)中查看我们如何查询它。然后使用此信息将不同的值应用到 RemapCoordinateSystem 调用[检查行 739 和该文件](https://github.com/mixare/mixare/blob/master/src/org/mixare/MixView.java)的后续部分。Mixare 默认情况下也使用横向模式，所以我想我们的重映射值也应该适用于您的情况。正如我之前所说，我们使用的是 3x3 矩阵，因为我们没有使用 OpenGL，但我想这对于 OpenGL 兼容矩阵应该是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T16:15:27.333

花点时间，玩一下方向矩阵，你会发现一列包含有用的价值。

除了记录每一列的值，看看哪个有用，试试四元数，继续玩值永远不要直接在渲染器中尝试代码，首先检查值

因为以后，您将有更多的输入选项，例如触摸，您也必须测试这些值，使用它们，也可以使用矩阵的**灵敏度常数**

# facebook - facebook - 如果用户在未经用户许可的情况下喜欢页面

> ID：11739856
> 
> 赞同：0
> 
> 时间：2012-07-31T12:14:38.663
> 
> 标签：facebook

好的，想知道客人是否喜欢我的 facebook 粉丝页面，而无需使用 facebook 登录并获得许可。

我所要做的就是：

1) 获取来宾的用户 ID（如何在不登录的情况下进行操作？） 2) 使用 fbl - SELECT uid FROM page_fan WHERE uid = UID 和 page_id = PAGEID

这会告诉我客人是否是用户

3）用fbl发送页面管理员的访问令牌（如何获取特定用户的访问令牌）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:22:43.877

如果没有身份验证，您将无法获取用户 ID。搜索“facebook fan gate”或“facebook signed_request”，如果您愿意，请再次访问。

# websocket - Jetty：websocket 扩展自定义 Servlet

> ID：11739858
> 
> 赞同：0
> 
> 时间：2012-07-31T12:15:05.540
> 
> 标签：websocket, jetty

我正在研究基于现有 Jetty 的 WebSocket 代码。

在现有代码中，在那个 servlet 中实现了两种方法

```
1\. public WebSocket doWebSocketConnect()
2.protected void doGet(HttpServletRequest request, HttpServletResponse response) 
```

因为这些是回调方法，谁能告诉我首先调用什么方法（我的意思是方法顺序）

提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T04:27:48.783

jetty-7 和 jetty-8 中的 WebSocketServlet（注意：这在 jetty-9 中已更改）对您有一些要求。

doWebSocketConnect [(HttpServletRequest,String)](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/websocket/WebSocketFactory.Acceptor.html#doWebSocketConnect%28javax.servlet.http.HttpServletRequest,%20java.lang.String%29)需要由您实现，以根据您在 HttpServletRequest 中找到的信息创建一个 WebSocket 对象（您的设计）。（如主机、路径、身份验证等...）

您可以在测试用例中看到一个 Servlet 示例。 [http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-websocket/src/test/java/org/eclipse/jetty/websocket/helper/WebSocketCaptureServlet.java](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-websocket/src/test/java/org/eclipse/jetty/websocket/helper/WebSocketCaptureServlet.java)

这将创建一个[CaptureSocket](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-websocket/src/test/java/org/eclipse/jetty/websocket/helper/CaptureSocket.java)，将其存储在 Servlet 实例中以进行跟踪，然后返回它。CaptureSocket 只存储传入的消息，以便测试用例可以验证预期。这不是一个特别令人兴奋的 Servlet/Socket 实现。

在 TestServer 中也可以找到一些 Echo 套接字的示例（也可以在测试用例中找到）。 [http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-websocket/src/test/java/org/eclipse/jetty/websocket/TestServer.java#n53](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-websocket/src/test/java/org/eclipse/jetty/websocket/TestServer.java#n53)

# android - android - 如何显示符号

> ID：11739865
> 
> 赞同：0
> 
> 时间：2012-07-31T12:15:50.083
> 
> 标签：android, symbols

我尝试显示部分的符号（“ **§** ”）然后它将显示未知符号。我尝试了很多但我没有得到。请任何人都可以帮助我。

```
Code 
```

builder.setMessage(readEula(activity));

私人静态 CharSequence readEula（活动活动）{

```
 BufferedReader in = null;
    try 
    {
        in = new BufferedReader(new InputStreamReader(activity.getAssets().open(ASSET_EULA)));
        String line;
        StringBuilder buffer = new StringBuilder();
        while ((line = in.readLine()) != null) buffer.append(line).append('\n');
        return buffer;
    } 
    catch (IOException e)
    {
        return "";
    } 
    finally
    {
        closeStream(in);
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:32:26.457

尝试：

```
 yourTextView.setText("\u00a7"); 
```

或者

```
 yourDilogBuilder.setMessage("\u00a7 bla-bla-bla...."); 
```

# javascript - 图像下载为 .part 文件

> ID：11739866
> 
> 赞同：1
> 
> 时间：2012-07-31T12:15:58.873
> 
> 标签：javascript, image, png, base64

我想允许用户在我的 HTML 页面中下载一些 png 图像。

我搜索了一下，发现了这个：

`window.location.href = img.src.replace('image/png', 'image/octet-stream');`

它工作正常（打开一个对话框来保存图像文件）。

但是文件名看起来像的问题：`<random letters>.part`。

那么如何解决这个问题呢？

我可以更改自己的文件名吗？

提前致谢。

**编辑 ：**

我希望它在浏览器端而不是服务器端（使用 java 脚本）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-31T13:48:52.887

您需要在标题中设置内容处置以强制下载具有文件名。

```
header('Content-Disposition: attachment; filename="download.png"'); 
```

# java - 无法发布使用 eclipse 在 java 中创建的 Web 服务

> ID：11739868
> 
> 赞同：0
> 
> 时间：2012-07-31T12:16:10.047
> 
> 标签：java, eclipse, web-services

我是 java/eclipse 的新手，也是创建 web 服务的新手。现在我正在尝试托管使用 eclipse 在 java 中创建的 web 服务。

[http://www.softwareagility.gr/index.php?q=node/29](http://www.softwareagility.gr/index.php?q=node/29)

我正在关注上面的链接以供参考。

我的问题是，创建 Web 服务后我遇到了困难。我创建了一个 Web 服务并通过 tomcat 服务器运行它，它的显示如下图所示

![在此处输入图像描述](../Images/565f7b7c32bfacca9c154abff9a4db2a.png)

这是我得到的 Web 服务的 wsdl 链接

“ [http://localhost:8080/ResourceA/services/Myservice?wsdl](http://localhost:8080/ResourceA/services/Myservice?wsdl) ”

现在我需要知道，在这些步骤之后我想要执行哪些步骤，通过我的云服务器发布和运行我的 Web 服务？

提前致谢！..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:41:07.830

将项目导出为 Web 存档（.war 文件）并将其部署在服务器上。

# c# - 如何使用 Visual Studio 将某些行排除在构建之外？

> ID：11739872
> 
> 赞同：3
> 
> 时间：2012-07-31T12:16:17.877
> 
> 标签：c#, visual-studio

我是 C# 和 Visual Studio 的新手，这可能是一个愚蠢的问题，但我必须找到答案。我的问题是，如果我在调试模式下构建某些代码行（在我的情况下为 MessageBox.Show(...)），是否可以区分调试和发布构建，但如果我构建则被忽略在发布模式下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:18:26.317

将代码行包装在`#if DEBUG`语句中：

```
#if DEBUG
    MessageBox.Show("Message");
#endif 
```

如果您想在发布时做不同的事情，那么您可以：

```
#if DEBUG
    MessageBox.Show("Message");
#else
    // Write to log file
#endif 
```

[来源](http://msdn.microsoft.com/en-us/library/4y6tbswk.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:18:19.283

您可以使用编译器指令“#if DEBUG”，后跟“#endif”，这样您的代码将仅在调试模式下编译。

在此处找到更多详细信息：http:
[//msdn.microsoft.com/en-us/library/4y6tbswk.aspx](http://msdn.microsoft.com/en-us/library/4y6tbswk.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T12:19:22.433

[您可以在项目的属性中指定不同的条件编译符号（此处](http://www.blackwasp.co.uk/PreprocessorSymbols.aspx)有一篇文章； Visual Studio 的[MSDN 文档](http://msdn.microsoft.com/en-us/library/kb4wyys2.aspx)）。然后，使用条件编译很容易包含/排除某些行。像这样：

```
#if DEBUG
    MessageBox.Show(...);
#end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T12:21:36.627

除此之外`#if DEBUG`，您还可以使用in 类的`Assert`静态方法进行检查，如果值错误，则显示消息框。例如：`Debug``System.Diagnostics`

```
Debug.Assert(IsValid); 
```

如果 IsValid 为 false，将在调试版本中显示一条消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T12:18:09.230

是的，您可以使用

```
#if DEBUG
    MessageBox.Show....
#endif 
```

如果您检查构建版本，您会发现您在项目中定义了变量：`DEBUG`仅在调试版本中定义。如果你愿意，你也可以使用切换行为

```
#if DEBUG
    MessageBox.Show....
#else
    // do something else here in release mode
#endif 
```

# android - 从服务器获取 Android 中的日期和时间

> ID：11739883
> 
> 赞同：-3
> 
> 时间：2012-07-31T12:17:21.403
> 
> 标签：android, web-services, network-programming

我想从任何服务器而不是设备获取时间和日期。有没有办法做到这一点？我的意思是我可以调用任何服务或库还是我必须编写自己的服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:28:15.077

是的，您可以构建一个，或者尝试找到一个已经完成的 Web 服务（我建议使用 REST，因为它很简单）可以向您发送时间和数据，可能它返回一个 xml 文件或 json，因此您需要在您的设备中解析它，但作为 fdoming说得更好，如果你谷歌它确定它不会比阅读这篇文章更多。虽然 fdoming 不反对这个查询，但还是有最糟糕的。

阅读这篇文章[Web 服务 - 一个城市的当前时区？](https://stackoverflow.com/questions/55901/web-service-current-time-zone-for-a-city)

# entity-framework-4.3 - EF Code First Migrations - 它如何记住以前的模型更改？

> ID：11739884
> 
> 赞同：1
> 
> 时间：2012-07-31T12:17:33.717
> 
> 标签：entity-framework-4.3, entity-framework-migrations

所以我正在使用实体框架代码优先迁移。

我对我的模型进行了更改，添加了一个新的手动迁移，但它使 up 脚本出错。

所以我删除了迁移，同时我不会像我想的那样改变它。在删除迁移类并重置模型（即，将其设置回原样）后，我再次更改我的模型。

当我生成一个新的迁移时，这个迁移就像我删除的迁移一样。

如果您清理和删除迁移，实体框架代码如何首先知道最后一个模型状态？

你如何重置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:16:41.397

在您的数据库中，在“表/系统表”下（假设您使用 SQL Management Studio），编辑`Table __MigrationHistory`.

在我删除了所有迁移 *.cs 文件并且仍然 VS“知道”旧迁移之后，我也感到困惑！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:49:04.313

直到那时，您可能还没有删除它下面的 Designer 文件，该文件包含有关自动迁移的信息。

[http://msdn.microsoft.com/en-US/data/jj554735](http://msdn.microsoft.com/en-US/data/jj554735)

> 运行 Add-Migration AddBlogRating 命令...
> 
> 迁移还有一个代码隐藏文件，用于捕获一些元数据。此元数据将允许 Code First 迁移复制我们在此基于代码的迁移之前执行的自动迁移。如果另一个开发人员想要运行我们的迁移或需要部署我们的应用程序，这很重要。

代码隐藏是一个类似 201206292305502_AddBlogRating.Designer.cs 的文件，位于您创建的手动迁移类下方。看起来像：

```
public sealed partial class AddBlogRating : IMigrationMetadata
{
    string IMigrationMetadata.Id
    {
        get { return "201206292305502_AddBlogRating"; }
    }

    string IMigrationMetadata.Source
    {
        get { return "H4sIAAAAAAAEAOy9B2AcSZ...=="; }
    }

    string IMigrationMetadata.Target
    {
        get { return "H4sIAAAAAAAEAOy9B2AcSZ...=="; }
    }
} 
```

这 2 个字符串是整个模型在迁移之前和之后的 base64 编码转储。这个想法是在第一次手动迁移之前记录的任何内容都是自动的，因此当您将所有这些应用到新数据库时，它可以看起来并说：

手动
1 手动2

在Manual1之前检查Source以确定目标模型，使用Automatic方法应用，应用Manual1，在Manual2上检查Source，使用自动方法到达那里，应用Manual2，最后使用自动方法从那里到达当前编译的模型状态。

# java - 使用分隔符分割字符串-Java

> ID：11739886
> 
> 赞同：2
> 
> 时间：2012-07-31T12:17:46.423
> 
> 标签：java, regex, string, split

我有一个字符串，我想单独拆分这些值。

例如，我想拆分以下字符串：

```
 Test1 Avg. running Time: 66,3 [ms], (Ref: 424.0) ===> Well done, It is 80% faster 
```

我想要 66,3[ms] 和 Ref 值。

如果你们中的任何人都可以建议我，这将是最好的方法，那将是有帮助的。

我应该使用分隔符（:) 吗？但在这种情况下，我收到的输出为

```
 66,3 [ms], (Ref: 424.0) ===> Well done, It is 80% faster 
```

还是我应该使用“正则表达式”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:21:41.600

对于这种情况，您可以使用`.split(", ");`，因为“，”在数字之外有一个空格。

还可以在*[这篇文章](https://stackoverflow.com/questions/11736524/java-regex-to-split-by-comma-but-ignore-comma-inside-comments/11737057#11737057)*中查看现成的解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:50:11.840

用这种方式

```
public class JavaStringSplitExample {

    public static void main(String args[]) {

        String str = "one-two-three";
        String[] temp;

        String delimiter = "-";

        temp = str.split(delimiter);

        for (int i = 0; i < temp.length; i++)
            System.out.println(temp[i]);

        /*
         * NOTE : Some special characters need to be escaped while providing
         * them as delimiters like "." and "|".
         */

        System.out.println("");
        str = "one.two.three";
        delimiter = "\\.";
        temp = str.split(delimiter);
        for (int i = 0; i < temp.length; i++)
            System.out.println(temp[i]);

        /*
         * Using second argument in the String.split() method, we can control
         * the maximum number of substrings generated by splitting a string.
         */

        System.out.println("");
        temp = str.split(delimiter, 2);
        for (int i = 0; i < temp.length; i++)
            System.out.println(temp[i]);

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:35:46.743

你可以使用`split()`函数...

`String s = "66,3 [ms], (Ref: 424.0) ===> Well done, It is 80% faster";`

`String[] arr = s.split(", ");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T13:50:35.310

你可以试试这个正则表达式：

```
 String test = "Test1 Avg. running Time: 66,3 [ms], (Ref: 424.0) ===> Well done, It is 80% faster"; 
    Pattern p = Pattern.compile("(\\d+[.,]?\\d+)");
    Matcher m = p.matcher(test);
    m.find();
    String avgRunningTime = m.group(1);
    m.find();
    String ref = m.group(1);
    System.out.println("avgRunningTime: "+avgRunningTime+", ref: "+ref); 
```

这将打印：

```
 avgRunningTime: 66,3, ref: 424.0 
```

您自然会想要添加一些错误检查（例如检查是否`m.find()`返回`true`）。

# android - 如何为聊天创建多个 XMPP 客户端？

> ID：11739889
> 
> 赞同：2
> 
> 时间：2012-07-31T12:17:54.527
> 
> 标签：android, xmpp

如何在 Android 中为 Yahoo、AOL 和 Hotmail (MSN) 创建 XMPP 聊天客户端。现在我是使用`smack`库为 Gtalk 和 Facebook 创建的。

我想为 Yahoo、AOL、Hotmail 创建像 eBuddy 应用程序。

寻找`server_name`和`port number`寻找美国在线、雅虎、Hotmail。

我搜索了很多 AOL 我得到了这个

```
SERVER_HOST = "xmpp.oscar.aol.com"; 
SERVER_PORT = 5222; 
```

但没有运气..任何人都可以建议有关此 SERVER_HOST 、 SERVER_PORT 的一些详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:45:04.897

对于 Google Talk 和 Facebook，您可以连接标准 XMPP 客户端。以主机身份连接到 talk.google.com/chat.facebook.com，并使用您的 gmail 地址/username@chat.facebook.com 作为 Jabber ID。

要通过 XMPP 直接连接到 MSN，您需要实现其专有的 X-MESSENGER-OAUTH2 身份验证机制，如[MSDN](http://msdn.microsoft.com/en-us/library/live/hh826554.aspx)中所述。[这里](http://msdn.microsoft.com/en-us/library/live/hh826553.aspx)有一些代码示例。

对于 AIM 和 Yahoo，我认为您只能通过安装了相应传输的另一台 XMPP 服务器连接，例如[pyYIMt](http://xmpppy.sourceforge.net/yahoo/)或[PyAIMt](http://code.google.com/p/pyaimt/)。

# iphone - 如何在iphone sdk的日历中存储事件？

> ID：11739892
> 
> 赞同：0
> 
> 时间：2012-07-31T12:18:05.693
> 
> 标签：iphone, objective-c, ios, ios4

```
 EKEventStore *eventDB = [[EKEventStore alloc] init];
 EKEvent *myEvent  = [EKEvent eventWithEventStore:eventDB];
 NSString *trimmedString = [[arrDateList objectAtIndex:i] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
 myEvent.title     = [d valueForKey:@"garden_name"];
 myEvent.startDate = [dateFormatter dateFromString:trimmedString];
 myEvent.endDate   = [dateFormatter dateFromString:trimmedString];
 myEvent.allDay = TRUE;

 [myEvent setCalendar:[eventDB defaultCalendarForNewEvents]];
 NSError *err;
 [eventDB saveEvent:myEvent span:EKSpanThisEvent error:&err]; 
```

我正在使用上面的代码行，但我无法将事件存储在日历中......请帮助我在代码行中有错误的地方......谢谢并问候 Rahul Virja

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:33:56.690

你可以试试这个代码..

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init]; [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm a"]; NSDate *date = [dateFormatter dateFromString:[taskDetails taskStartDateTime]];

# 如果调试

```
 NSLog(@"here is the task start %@",[taskDetails taskStartDateTime]); 
```

# 万一

```
 NSDate *end = [dateFormatter dateFromString:[taskDetails taskEndDateTime]];
    [dateFormatter release];
    EKEventStore *eventStore = [[EKEventStore alloc] init];
    EKEvent *event = [EKEvent eventWithEventStore:eventStore];
    event.title = [taskDetails taskGottaDo];   
    event.startDate = date;
    event.endDate = end;
    EKAlarm *reminder = [EKAlarm alarmWithRelativeOffset:-6*60*60];
    [event addAlarm:reminder];
    [event setCalendar:[eventStore defaultCalendarForNewEvents]];

    NSTimeInterval alarmOffset = -1*60;//1 hour
    EKAlarm *alarm = [EKAlarm alarmWithRelativeOffset:alarmOffset];

    [event addAlarm:alarm];
    [eventStore release];

    NSError *err;
    BOOL saved = [eventStore saveEvent:event span:EKSpanThisEvent error:&err];

   // NSLog(@"here is the error %@",[eventStore saveEvent:event span:EKSpanThisEvent error:&err]);
    if (saved == YES)
    {
        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@""
                                  message:@"Saved to calendar"
                                  delegate:nil
                                  cancelButtonTitle:@"Right On!" otherButtonTitles:nil] ;
        [alertView show];   
        [alertView release];
    } 
```

# c - 指针字符串

> ID：11739894
> 
> 赞同：0
> 
> 时间：2012-07-31T12:18:14.837
> 
> 标签：c, string, pointers

在正确的位置复制，但在达到计数后不会停止。我认为我的代码应该如下工作

```
char har *orig, int start, int count, char *final);

int main(void)
{
    const char source[] = "one two three";
    char result[] = "123456789012345678";

    printf("%s\n",GetSubstring(source, 4, 3, result));

    return 0;
}

char r *orig, int start, int count, char *final)
{    
    char *temp = (char *)orig;

    final = temp;

   }

    for ( ; *temp && (count > 0) ; count--)
    {
    rn final;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:43:04.293

1.  第一个`for`循环不检查`temp`数组是否存在（如何在不以某种方式询问内存管理器的情况下检查分配的内存是否存在？！）。`temp`只是一个指针。您正在检查的是字符串在第一个字节`orig`内没有零。`start`没关系，也许'这就是你所说的“存在”。

2.  `orig`您的意图是从to复制`final`，但您重置`final`为`orig`. **那就是你的错误所在。**您必须删除该行，它可以解决问题。

3.  您不需要创建`temp`指针，您可以使用`orig`指针。你可以随意修改它——记住，函数参数实际上是局部变量。C 中的函数参数是按值传递的，您通过将指针（它们是值！）传递给数据来实现按引用传递。

我应该补充一点，这个函数的前提有些被打破了。它“有效”，但这不是人们合理预期的。尤其：

1.  没有迹象表明源字符串比`start`.

2.  没有迹象表明源字符串比`start + count`.

    也许这些都可以，但在这些条件可能是错误的情况下，函数的用户应该可以得到它的指示。*来电者会知道什么是预期的，什么不是，所以只要您向来电者提供一些反馈，*来电者就可以确定它。

3.  您正在返回超过输出末尾的位置 - 超过零终止。那不是很方便。如果要使用返回值连接后续字符串，则必须先将其减一。

下面是固定代码，变量命名合理。

```
char *GetSub(const char *src, int start, int count, char *dst)
{
    for ( ; *src && (start > 0) ; start--)
    {
        src++; /* Note: *src++ works too, but is pointless */
    }

    for ( ; *src && (count > 0) ; count--)
    {
        *dst++ = *src++;
    }

    *dst++ = 0;
    return dst; /* Notice: This returns a pointer to the end of the
                memory block you just wrote. Is this intentional? */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:44:28.140

问题出在以下行：

```
final = temp; 
```

删除它，问题应该得到解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T12:36:05.870

你写的东西有*几个问题。*我们列举一下：

1.  `char *temp = (char *)orig;`- 您将 a `const char *`（您承诺不修改）分配给 a `char *`（您违反了该承诺）。做错事了。

2.  `final = temp`. 不，这根本不会改变*原件* `final`（调用者持有的副本）。它一无所获。它将*您的*（函数）副本更改为指向指向`final`的同一位置`temp`。

3.  `*temp++;`- 如果你不打算使用它，那么取消引用它是没有意义的。当然，增加它是正确的 [参见下面 KubaOber 的评论线程]。

4.  `final++ = *temp++;`- 这只是令人困惑的阅读。

5.  `*final++ = 0; return final;`- 您将地址处的值设置`final`为“0”。然后你增加它（指向空间中的某个地方，可能指向一个黑洞）。然后返回该指针。这也是错误的。

你*真正*应该做的是以[`strncpy`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/strncpy.html)一种方便的方式包装。

但是如果你坚持自己写，你可能希望你的函数像这样简单：

```
char *GetSub(const char *orig, int start, int count, char *final)
{    
  int i;

  for (i = 0; i < count; i++)
    {
      final[i] = orig[i+start];

      if (final[i] == '\0')
        break;
    }
  final[i] = '\0';

  return final; /* Yes, we just return what we got.  */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T12:29:25.293

```
char *a="abcdefgh"; 
```

我希望将字符串“cde”复制到另一个中。

我得到的索引是 3（你的开始）。

```
char *temp=malloc(3*sizeof(char))
strncpy(temp,a+3,3); 
```

这是你需要的吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T12:44:35.550

改变你的`GetSub`功能：

```
char *GetSub(const char *orig, int start, int count, char *final)
{
    char *temp = (char *)orig;

    // with original final = temp and final++ you loose final valid pointer
    char *final2 = final;

    for ( ; *temp && (start > 0) ; )
    {
        start--;

        // you don't need to dereference temp
        temp++;
    }

    for ( ; *temp && (count > 0) ; count--)
    {
        *final2++ = *temp++;
    }

    *final2 = 0;

    // return a valid pointer
    return final;
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-31T12:44:05.973

你的代码有一些错误：

```
char *GetSub(const char *orig, int start, int count, char *final)
{
    char *temp = (char *)orig;

    //final = temp; /* Why this? */

    for ( ; *temp && (start > 0) ; )
    {
        start--;
        temp++; /* Instead of *temp++ */
    }

    for ( ; *temp && (count > 0) ; count--)
    {
        *final++ = *temp++;
    }

    *(final+count) = '\0';
    return final;
} 
```

希望这有帮助。

# python - 在python中复制复合对象

> ID：11739901
> 
> 赞同：1
> 
> 时间：2012-07-31T12:18:28.543
> 
> 标签：python, oop, reference, copying

我有一个由字符串、列表和两个整数组成的复合对象字典。

我正在遍历这本字典，执行一些测试，然后根据这些测试将当前测试的对象保存到一个新字典中，然后修改一些属性。到目前为止，这一直是对新字典中的对象的引用，因此当我更改某些属性时，旧对象也会更改，我想避免这种行为。

我尝试使用复制模块中的`copy.copy`and`copy.deepcopy`方法，但由于某种原因，复制后我无法更改属性。它们将保持原样。

我应该说我对 OOP 很陌生，所以将任何建议都瞄准白痴级别！

所以在下面的代码中，`pathways`是路径对象的字典，`variants`只是一个列表。 `names()`并且`addMutant()`是属于通路对象的方法。

如果它有帮助：通路对象包含属于该通路的基因列表（也是另一个对象）。我想找出变体列表（基因名称列表）中表示哪些途径，然后返回一个新的（较小的）途径字典，该字典将被修改以记录每个途径中突变基因的数量。该`addMutant()`方法只是增加一个属于通路对象的 int 属性。

```
def method(variants, pathways):
    vpathways = {}
            check = 0
            for var in variants:
                for k,v in pathways.iteritems():
                    if(var in v.names()):
                        check +=1
                        vpathways[k] = copy.deepcopy(v)
                        vpathways[k].addMutant()
     return(vpathways) 
```

当我这样做的时候，vpathways 确实包含了正确的路径，但是每个路径的突变数量仍然是 0。我在 addMutant() 方法中添加了一个打印语句，它肯定被调用了，以及突变的数量属性增加，但不是在最终对象中。

编辑：途径类定义：

```
class Pathway():
    def __init__(self, pid = None, genes = [],nmut = 0 ):
        self.pid = pid
        self.genes = genes
        self.length = 0
        self.nmut = nmut
        for g in self.genes:
            self.length += g.seqlen
    def __str__(self):
        return('{0} pathway containing {1} genes, with a total sequence length of {2} and {3} mutations'.format(self.pid, len(self.genes), self.length, self.nmut))
    def __repr__(self):
        return self.__str__()   
    def addGene2Pathway(self,g):
        self.genes.append(g)
        self.length += g.seqlen
    def addMutant(self):
        self.nmut +=1  
    def names(self):
        l = []
        for g in self.genes:
            l.append(g.entrezid)
        return l 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:44:16.753

```
vpathways[k] = copy.deepcopy(v) 
```

替换`vpathways[k]`之前包含的任何内容，因此最多`.addMutant()`可以工作。

# asp.net-mvc - 如何将值传递给 MVC3 母版页（_layout）？

> ID：11739905
> 
> 赞同：4
> 
> 时间：2012-07-31T12:18:46.353
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-binding

我有一个自定义模型绑定器，它检查身份验证 cookie 并返回值。

```
public class UserDataModelBinder<T> : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {

        if (controllerContext.RequestContext.HttpContext.Request.IsAuthenticated)
        {
            var cookie =
                controllerContext.RequestContext.HttpContext.Request.Cookies[FormsAuthentication.FormsCookieName];

            if (cookie == null)
                return null;

            var decrypted = FormsAuthentication.Decrypt(cookie.Value);

            if (!string.IsNullOrWhiteSpace(decrypted.UserData))
                return JsonSerializer.DeserializeFromString<T>(decrypted.UserData);
        }

        return null;
    }
} 
```

如果我需要使用它，我只需要将它传递给操作。一切正常。

```
public ActionResult Index(UserData userData)
{
    AccountLoginWidgetVM model = new AccountLoginWidgetVM();
    if (null != userData)
        model.UserData = userData;

    return View(userData);
} 
```

但是，我想在我的母版页中使用它，因为一旦用户登录，我想在每个页面的顶部显示他们的信息。我尝试了一些东西，无法让它工作

```
 @Html.RenderPartial("LoginPartial", ???model here??) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T12:31:48.230

我们是这样做的：

1.  为母版页定义了单独的视图模型。

    ```
    public class MasterPageViewModel
    {
        public Guid CurrentUserId { get; set; }
        public string CurrentUserFullName { get; set; }
    } 
    ```

2.  添加了注入过滤器和过滤器提供程序。

    ```
    public class MasterPageViewModelInjectorFilterProvider: IFilterProvider
    {
        public IEnumerable<Filter> GetFilters(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
        {
            return new [] {new Filter(new MasterPageViewModelInjectorFilter(), FilterScope.Action, null), };
        }

        private class MasterPageViewModelInjectorFilter: IResultFilter
        {
            public void OnResultExecuting(ResultExecutingContext filterContext)
            {
                var viewResult = filterContext.Result as ViewResult;
                if (viewResult == null)
                    return;

                if (viewResult.ViewBag.MasterPageViewModel != null)
                    return;

                //setup model whichever way you want
                var viewModel = new MasterPageViewModel();
                //inject model into ViewBag
                viewResult.ViewBag.MasterPageViewModel = viewModel;
            }

            public void OnResultExecuted(ResultExecutedContext filterContext)
            {
            }
        }
    } 
    ```

3.  配置过滤器提供程序：

    ```
    //in Application_Start
    FilterProviders.Providers.Add(new MasterPageViewModelInjectorFilterProvider()); 
    ```

4.  在主控中使用：

    ```
    ViewBag.MasterPageViewModel 
    ```

这样你就有了很好的解耦架构。当然，你可以将它与依赖注入结合起来（我们这样做，但为了清楚起见我把它省略了），并以你想要的方式为每个动作配置你的动作过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:32:21.517

在这种情况下，您可以使用 ViewBag。

```
public ActionResult Index(UserData userData)
{
    AccountLoginWidgetVM model = new AccountLoginWidgetVM();
    if (null != userData)
        model.UserData = userData;

    ViewBag.UserData = userData;
    return View(userData);
}

@Html.RenderPartial("LoginPartial", ViewBag.UserData) 
```

您必须确保 userData 不为空。如果它为空，则传递的模型将是视图的默认模型。

# c# - 如何替换文件中的未知字符串？

> ID：11739907
> 
> 赞同：0
> 
> 时间：2012-07-31T12:18:48.843
> 
> 标签：c#, regex, string, random, replace

目前我正在编写一个库来简化INI文件的读写，当键和值不存在但我无法轻松更新值时，我已经让阅读器工作和写入，我尝试了各种方法来替换字符串但是没有一个是实用的，程序需要旧值

这是我从这里尝试过的一个示例：[Regular Expression to replace unknown value in text file - c# and asp.net](https://stackoverflow.com/questions/8155568/regular-expression-to-replace-unknown-value-in-text-file-c-sharp-and-asp-net)

```
Regex rgx = new Regex(@"SQL-SERVER-VERSION="".*?""");
string result = rgx.Replace(input, replacement); 
```

但是每次我修改该代码以替换值时，它最终都会替换键，从而导致应用程序下次尝试读取文件时出错。

这是我目前使用的代码：

```
private string wholedata;
private void UpdateKey(string key, string path, string newval)
{
    try
    {
        using (StreamReader s = new StreamReader(File.Open(path, FileMode.Open)))
        {
            wholedata = s.ReadToEnd();
            Regex rgx = new Regex(key + ".*?");
            string result = rgx.Replace(wholedata, newval);
            MessageBox.Show(result);
        }
        using (StreamWriter s = new StreamWriter(File.Open(path, FileMode.OpenOrCreate)))
        {
            s.Write(wholedata);
        }
     }
     catch (Exception e)
     {
     }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:24:22.570

为什么要重写系统已经知道该怎么做？看看这个项目：[使用 C# 的 INI 文件处理类](http://www.codeproject.com/Articles/1966/An-INI-file-handling-class-using-C)。您还应该知道，Xml 在 .Net 框架中占有重要地位。使用配置框架或序列化/反序列化的简单设置对象并不少见。我不知道你的要求，但它可以启发我们描述一下你为什么要使用 ini 文件。

也就是说，您正在写入旧值（wholedata），而不是新值（结果）。这可能是根本原因。

当你调用`Regex.Replace`(so do `string.Replace`) 时，它实际上会生成一个新字符串，并且不会更改传入参数的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:26:27.987

将正则表达式更改为

```
Regex rgx = new Regex(@"(?<=SQL-SERVER-VERSION="").*?(?="")"); 
```

这将匹配`.*?`前缀和后缀存在的条件（`(?<=)`和`(?=)`分组）

# facebook-javascript-sdk - facebook js api - HTML5 画布上传为照片

> ID：11739908
> 
> 赞同：0
> 
> 时间：2012-07-31T12:18:51.907
> 
> 标签：facebook-javascript-sdk, html5-canvas

有没有办法将 HTML5 画布转换为某种图像格式，以便可以通过 js api 将其上传到 facebook 用户应用程序相册，

我目前正在使用以下功能成功地将图片链接上传到相册：

```
FB.api('/me/photos', 'post', { message:'the message', url:imgURL}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-31T13:28:15.983

是的，有办法将 HTML5 Canvas 转换为图像。Canvas JS 元素上的以下 javascript 函数将执行此操作：

```
toDataURL('image/jpeg', 1.0); 
```

你也可以有PNG。

此函数将生成画布图像的 Base64 表示。我不确定您是否可以直接将 Base64 字符串提供给 Facebook API。

如果可以，那就太好了，否则您需要将其临时保存在服务器上并将该 URL 提供给 FB API。

# php - 同一类中同一实体的 2 个 ManyToMany 实例

> ID：11739909
> 
> 赞同：0
> 
> 时间：2012-07-31T12:18:54.023
> 
> 标签：php, doctrine-orm

我想添加具有 manyToMany 关系的同一对象的 2 个实例。

```
class A {

     /**

 * @ORM\ManyToMany(targetEntity="RelatedEntity", inversedBy="teachers", cascade={"persist", "remove"})
 * @ORM\JoinTable(name="table1",
 *      joinColumns={@ORM\JoinColumn(name="class_id", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="related_id", referencedColumnName="id")}
 *      )
 */
protected $myFirstEntities;

     /**

 * @ORM\ManyToMany(targetEntity="RelatedEntity", inversedBy="students", cascade={"persist", "remove"})
 * @ORM\JoinTable(name="table2",
 *      joinColumns={@ORM\JoinColumn(name="class_id", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="related_id", referencedColumnName="id")}
 *      )
 */
protected $mySecondEntities;
}

class RelatedEntity
{
  /**
 *
 * @ORM\ManyToMany(targetEntity="A", mappedBy="myFirstEntities", cascade={"persist"})
 */
protected $teachers;

  /**
 *
 * @ORM\ManyToMany(targetEntity="A", mappedBy="mySecondEntities", cascade={"persist"})
 */
protected $students;

} 
```

当我使用

```
 php app/console doctrine:generate:entities MyApp 
```

该程序生成一个添加实体**的唯一方法，名为：**

```
public function addRelatedEntity(\MyApp\MyBundle\Entity\RelatedEntity $myFirstEntities)
{
    $this->myFirstEntities[] = $myFirstEntities;
} 
```

所以我无法添加 mySecondEntities。我该怎么办。我可以手动添加它，但自动添加它是不可能的？

我的问题是我可以将特定类的 2 个多对多关系用于同一个类吗？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:00:28.957

学说：生成：实体应该在您需要生成实体时使用一次，它不保证生成的映射将 100% 正确，[http://docs.doctrine-project.org/projects/doctrine-orm/en/ 2.0.x/reference/tools.html#entity-generation](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/tools.html#entity-generation)：

> 此命令不适合经常使用。它是一个小帮手，并不能很好地支持所有映射边缘情况。使用此命令后，您仍然需要在实体中进行工作。

您可以为同一个类进行多对多映射，只需手动进行即可

```
public function addFirstEntity(\MyApp\MyBundle\Entity\RelatedEntity $myFirstEntities)
{
    $this->myFirstEntities[] = $myFirstEntities;
} 

public function addSecondEntity(\MyApp\MyBundle\Entity\RelatedEntity $mySecondEntities)
{
    $this->mySecondEntities[] = $mySecondEntities;
} 
```

# android - 如何/何时初始化通过 XML 添加的片段？

> ID：11739912
> 
> 赞同：0
> 
> 时间：2012-07-31T12:19:18.253
> 
> 标签：android, android-fragments

我有一个在 XML 中定义的 2 窗格视图。对于 xlarge，视图的左侧是处理内容选择的 Fragment。我想初始化此选择器`ListFragment`以在应用启动时突出显示第一项。

我已经写了一个方法`ListFragment`来做到这一点：

```
public void setSelectedItem (int position) {
    //Unselect the previous item
    if(mPreviousPosition != ListView.INVALID_POSITION) {
        View oldSelected = getListView().getChildAt(mPreviousPosition);
        oldSelected.setBackgroundResource(R.drawable.menu_button);
        ((ImageView) oldSelected.findViewById(R.id.selector_icon)).setImageDrawable(icons.getDrawable(mPreviousPosition));
        ((TextView) oldSelected.findViewById(R.id.selector_text)).setTextAppearance(getActivity(), R.style.text_selector);
    }

    //Select this item
    View newSelected = getListView().getChildAt(position);
    newSelected.setBackgroundResource(R.drawable.menu_button_active);
    ((ImageView) newSelected.findViewById(R.id.selector_icon)).setImageDrawable(icons_active.getDrawable(position));
    ((TextView) newSelected.findViewById(R.id.selector_text)).setTextAppearance(getActivity(), R.style.text_selector_active);

    mPreviousPosition = position;
} 
```

当我在选择一个项目后调用它时，它工作得很好。但是当我尝试在启动时突出显示第一项时，我在

```
newSelected.setBackgroundResource(R.drawable.menu_button_active); 
```

它似乎`getListView().getChildAt(position)`正在返回`null`，因为尚未创建 Fragment 的视图。

那么，从我的 Activity 中的哪个位置尝试初始化`ListFragment`? 我已经尝试过 onStart、onRestoreInstanceState 和 onResume，但它们都会产生 NPE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:01:38.093

您没有在填充 ListView 的片段回调中指定。无论如何，这是比较活动状态和片段状态的图表，也许可以帮助您：

![活动状态与片段状态相比](../Images/b1ceadbc1bdd41cc9a6dfff5a558434a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:39:38.540

据我了解，您有两个窗格（左窗格是 ListFragment），这两个片段保存在 FragmentActivity 中。片段在 FragmentActivity 的 xml 布局中设置。在 onAttach() 循环之后，FragmentActivity 可以使用 Fragment，但这并不一定意味着子 Fragment 中的视图元素仍然可用。

第一个问题是您要在哪里设置所选项目？在 FragmentActivity 中还是在 ListFragment 中？它应该在 onResume() 方法的 ListFragment 中处理。

我认为，根据 ListFragment 中的选择，您将使用选择的数据填充正确的片段。您可能希望查看此链接，该链接将为您提供使用侦听器来避免片段活动和底层片段之间的依赖关系的一个很好的示例

[http://developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)

然后，您可以使用侦听器处理 ListFragment 中的选择并将选择传递给正确的片段。在正确的片段中，您可以检查 FragmentActivity 中的选择以及注册片段以侦听选择。这样，您应该涵盖在正确的片段注册为侦听器之前触发选择的情况。

**UDPATE**

查看响应式布局设计以获取更多信息，但这里有一些起点。

```
/res
    /values
       bool.xml
    /values-sw600dp-land
       bools.xml 
```

然后在 bools.xml 文件中为 isDualPane 定义一个值

```
<resources>
    <bool name="isDualPane">[true/false]</bool>
</resources> 
```

然后在 listFragment 中的代码中，您可以引用 bools 资源并知道布局是什么。

```
isDualPane = getResources().getBoolean(R.bool.isDualPane); 
```

您还可以在任何类中使用它来了解布局是什么，而无需在类之间创建依赖关系。

以下是一些可能有帮助的链接。

[http://developer.android.com/training/multiscreen/screensizes.html](http://developer.android.com/training/multiscreen/screensizes.html) http://developer.android.com/training/multiscreen/adaptui.h​​tml

# android - 如何使用 setResult 进行先前的活动？

> ID：11739915
> 
> 赞同：1
> 
> 时间：2012-07-31T12:19:35.320
> 
> 标签：android, android-intent

单击任何列表项时，我必须使用 setResult 转到父活动。

```
list.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub
                    Log.d("gaurav", "list is clicked");

                    moveToEvent();
                }
            }); 
```

我的 moveToEvent 方法是：

```
public void moveToEvent() {
    Log.d("gaurav", "Move to evnet");
    Intent intent = new Intent();
    this.setResult(5, intent);
    // this.startActivity(intent);
    this.finish();

} 
```

使用此代码，我可以返回父活动两到三次，之后它不会返回父活动并刷新自己的活动。我无法找到它的解决方案。请在这个问题上帮助我

我也尝试了 onBackPressed 方法，但结果相同。

```
@Override 
public void onBackPressed() { 
    // TODO Auto-generated method
   Intent intent = new Intent(); 
   setResult(5, intent); 
   finish();

  super.onBackPressed();
  } 
```

请建议我在哪里做错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:30:30.877

你必须开始你的 ParentActivity

```
Intent i = new Intent(SignUpActivity.this, UploadImage.class);
startActivityForResult(i, 1); 
```

然后在你的 ParentActivity 中写下这个

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == 1) {
       //your code
    } else {        
    }       
} 
```

然后在你的第二个活动中写下这个

```
Intent returnIntent = new Intent();
setResult(RESULT_OK, returnIntent);
finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:56:07.970

我用它来解决我的问题。此代码将在父活动中。

`Intent intent = new Intent(AddEvent.this, AddVenue.class); intent.setFlags(intent.FLAG_ACTIVITY_CLEAR_TOP); startActivityForResult(intent, 222); ((Activity) AddEvent.this).overridePendingTransition(0, 0);`

这是解决这个问题的关键线。

```
intent.setFlags(intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

# jquery - 使用 replaceWith 调用 jQuery after 方法

> ID：11739916
> 
> 赞同：0
> 
> 时间：2012-07-31T12:19:37.160
> 
> 标签：jquery

我有这个代码块：

```
$('#mainContent').replaceWith(ucmResponse).after(function(){alert('jym')}); 
```

但我没有得到`alert`. 我想在方法完成`'#mainContent'`后隐藏。`replaceWith`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:26:27.550

之后的方法不应该是事件：

function(index)一个函数，它返回一个 HTML 字符串、DOM 元素或 jQuery 对象，以插入到匹配元素集中的每个元素之后。接收集合中元素的索引位置作为参数。在函数中，this 指的是集合中的当前元素。

只需在 each() 方法中放置警报：

```
$('#mainContent').replaceWith(ucmResponse).each(function(){alert('jym')}); 
```

或者就像下一个命令：

```
$('#mainContent').replaceWith(ucmResponse);
alert('jym'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:20:59.230

```
$('#mainContent').replaceWith(ucmResponse).hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T12:24:25.827

```
$(ucmResponse).replaceAll('#mainContent').hide(); 
```

# javascript - jsmart - 无法获取模板内容（及时？）

> ID：11739922
> 
> 赞同：1
> 
> 时间：2012-07-31T12:20:13.743
> 
> 标签：javascript, jquery, ajax, smarty, templating

我正在尝试使用[jsmart](http://code.google.com/p/jsmart/)在客户端呈现[Smarty 3 模板。](http://www.smarty.net/)如果您没有使用它们的经验，请继续阅读，因为这可能只是我正在制作的一个简单的 JavaScript 错误。

* * *

### 它适用于简单的模板：

根据文档，我创建模板（通过 AJAX 接收），然后渲染它（将数据传递给它）：

```
var template = new jSmart(templateReceivedViaAJAX);
var content = template.fetch({"firstname":"adam", "secondname":"lynch"}); 
```

然后我简单地将渲染的输出粘贴在`div`：

```
$('#dest').html(content); 
```

* * *

### 模板继承

尝试渲染包含 , 等的模板时会出现`include`问题`extends`。

从[文档](http://code.google.com/p/jsmart/wiki/IncludeTemplates)中：

> 每当 jSmart 遇到任何一个模板包含标签时，它都会调用 jSmart.prototype.getTemplate() 方法并将标签文件参数的值传递给它。该方法必须返回模板的文本。
> 
> getTemplate() 的默认实现会引发异常。因此，由 jSmart 用户来覆盖此方法并提供模板的文本。

* * *

### 重写`getTemplate()`函数：

```
jSmart.prototype.getTemplate = function(name) {
    $.ajax({type: 'GET', url: name, async:false, success: function(data) {
        console.log('got template at '+name+'. The following is the contents:');
        console.debug(data);

        return data;
    }});
} 
```

* * *

### *渲染包含对子*模板的调用的*父*模板时的控制台输出：`include`

 *```
<div class="row">

    <label for="second" class="span4">Second Name:</label>  

    <input type="text" class="span4" placeholder="{$secondname}" id="second" /> 

</div>

<p>B;lsdsfasfsfds</p>
Uncaught Error: No template for /bundles/templatedemo/templates/form_include.html.smarty 
```

* * *

### 渲染包含对*父*模板的调用的*子*模板时的控制台输出：`extend`

 *```
got template at /bundles/templatedemo/templates/form.html.smarty. The following is the contents: templates:58
<form class="well">  

    <div class="row">

        <label for="first" class="span4">First Name:</label>  

        <input type="text" class="span4" placeholder="{$firstname}" id="first" /> 

    </div>

    {block name=form_include}{/block}

    <input type="submit" class="btn btn-inverse" />  

</form>
Uncaught Error: No template for /bundles/templatedemo/templates/form.html.smarty 
(expanded:)
S 
(anonymous function) 
jSmart.fetch 
(anonymous function) 
f.event.dispatch 
f.event.add.h.handle.i 
```

* * *

### 编辑：

如果模板内容预先存在，则继承有效（例如，如果它们是硬编码的，而不是通过 AJAX 检索）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T22:17:42.427

使用函数指针而不是匿名函数：

```
function foo() 
  {
  $.ajax({type: 'GET', url: foo.url, async:false, success: bar});
  }

function bar(data) 
  {
  console.log(['got template at', foo.url, 'The following is the contents:']);
  console.debug(data);

  return data;
  }

foo.url = "http://www.stackoverflow.com";

jSmart.prototype.getTemplate = foo; 
```**

# java - Jstl标签使用格式化负数

> ID：11739923
> 
> 赞同：0
> 
> 时间：2012-07-31T12:20:17.373
> 
> 标签：java, jstl

嗨，我想在 jsp 上使用“fmt:formatNumber”标签显示一个负数。现在我的问题是在 UI 上将 -300 显示为（300 美元），谁能帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:56:21.140

```
<fmt:formatNumber value="${-number}" type="currency"/> 
```

# javascript - THREE.JS 中动画的最佳选择

> ID：11739926
> 
> 赞同：7
> 
> 时间：2012-07-31T12:20:32.713
> 
> 标签：javascript, animation, three.js

three.js 中动画（纹理动画、移动对象、隐藏/显示对象……）的最佳选择是什么？你是否使用额外的库。比如 tween.js 或者别的什么？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T17:20:43.690

Tween.js 是流行的方式...查看文章： http: [//learningthreejs.com/blog/2011/08/17/tweenjs-for-smooth-animation/](http://learningthreejs.com/blog/2011/08/17/tweenjs-for-smooth-animation/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T02:22:19.300

许多人同意您需要[RequestAnimationFrame](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)来管理浏览器性能。Three.js 甚至包括一个[跨浏览器填充程序](http://learningthreejs.com/data/THREEx/docs/THREEx.requestAnimationFrame.html)。

我还推荐[Frame.js](https://github.com/bishopZ/Frame.js)来管理基于时间轴的渲染。RequestAnimationFrame 做得很好，但只根据浏览器的性能维持最低帧率。更好的流控制库（如 Frame）提供了具有最大帧速率的能力，并更好地管理多个密集操作。

此外，[Javascript FSM](https://github.com/jakesgordon/javascript-state-machine/)已成为我的 three.js 应用程序的重要组成部分。无论您是构建 UI 还是游戏，对象都必须具有状态，并且仔细管理过渡动画和规则对于任何复杂的应用程序逻辑都是必不可少的。

是的，你需要一个缓动库。我经常使用[jQuery.easing 插件](http://gsgd.co.uk/sandbox/jquery/easing/)。它是 jQuery.animate 的插件，但也可以像这样访问缓动函数：

```
var x = {}; // an empty object (used when called by jQuery, but not us)
var t = currentTime;
var b = beginningValue;
var c = potentialChangeInValue;
var d = durationOfAnimation;
valueAtTime = jQuery.easing.easeOutExpo(x, t, b, c, d); 
```

这个 jQuery 插件和大多数缓动插件都是基于[Robert Penner 的 ActionScript2 缓动库](http://www.robertpenner.com/easing/)，如果上面的 t,b,c,d 看起来很奇怪，值得一试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-30T07:26:31.280

2017 年小总结：查看这个简单的时间线库，它可以轻松触发上述 FSM（基于状态的动画）和 tween.js（平滑动画）：

[关键帧](https://www.npmjs.com/package/keyframes)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T10:52:36.377

复制粘贴这个：

```
window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       ||
          window.webkitRequestAnimationFrame ||
          window.mozRequestAnimationFrame    ||
          window.oRequestAnimationFrame      ||
          window.msRequestAnimationFrame     ||
          function( callback ){
            window.setTimeout(callback, 1000 / 60);
          };
})();

(function animloop(){
  requestAnimFrame(animloop);
  render();
})();

function render()
{
// DO YOUR STUFF HERE (UPDATES AND DRAWING TYPICALLY)
} 
```

原作者为： http: [//paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-15T10:57:14.017

我这样做是为了模拟具有人类特征（生涩）的轨道，但它可以用于其他动画，如对象平移、位置和旋转。

```
function twController(node,prop,arr,dur){
    var obj,first,second,xyz,i,v,tween,html,prev,starter;
    switch(node){
            case "camera": obj = camera; break;
            default: obj = scene.getObjectByName(node);
    }
    xyz = "x,y,z".split(",");
    $.each(arr,function(i,v){
        first = obj[prop];
        second = {};
        $.each(v,function(i,v){
            second[xyz[i]] = v;
        })
        tween = new TWEEN.Tween(first)
        .to(second, dur)
        .onUpdate(function(){
            $.each(xyz,function(i,v){
                obj[prop][xyz[i]] = first[xyz[i]];
            })
        })
        .onComplete(function(){
            html = [];
            $.each(xyz,function(i,v){
                html.push(Math.round(first[xyz[i]]));
            })
            $("#camPos").html(html.join(","))
        })
        if(i >0){
            tween.delay(250);
            prev.chain(tween);
        }
        else{
            starter = tween;
        }
        prev = tween;
    });
    starter.start();
} 
```

# java - Java 5 中的 HQL 到 SQL

> ID：11739929
> 
> 赞同：5
> 
> 时间：2012-07-31T12:20:53.993
> 
> 标签：java, sql, hibernate, jakarta-ee

是否可以在运行时使用 EntityManager 将 HSQL 语句转换为 SQL？

我找到了这个解决方案，但我没有 sessionFactory，我有 EntityManager

```
protected String toSql(String hqlQueryText) {
    if (sessionFactory != null && hqlQueryText != null && hqlQueryText.trim().length() > 0) {
        final QueryTranslatorFactory translatorFactory = new ASTQueryTranslatorFactory();
        final SessionFactoryImplementor factory = (SessionFactoryImplementor) sessionFactory;
        final QueryTranslator translator = translatorFactory.createQueryTranslator(hqlQueryText, hqlQueryText,
        Collections.EMPTY_MAP, factory);
        translator.compile(Collections.EMPTY_MAP, false);
        return translator.getSQLString();
        }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:32:27.980

如果您获得了 EntityManager，则可以使用以下代码来获得 SessionFactory：

```
EntityManager em = ...
SessionFactory sf = ((EntityManagerFactoryImpl)em.getEntityManagerFactory()).getSessionFactory(); 
```

# java - 在 SVN 中处理 .project 文件和不同的 eclipse 设置？

> ID：11739931
> 
> 赞同：0
> 
> 时间：2012-07-31T12:20:57.317
> 
> 标签：java, eclipse, svn, version-control

.project 文件包含对项目中使用的项目性质的引用。

这些项目性质取决于本地开发人员机器上安装的插件。

那么，该文件是否应该从 SVN 中排除？

其他开发人员不知道的特性会导致问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:28:09.557

我从不提交那些（尤其是 .project），并且总是投票支持他们被 svn:ignore'd。也许我错了，但我只向 SVN 提交代码，然后通过从 SVN 签出来创建一个新项目。

每次我检查一个提交了这些文件的项目时，都会破坏我的项目。但话又说回来，也许那只是我的同事......打破我的意思是转换这些

```
src/com.package.name1
src/com.package.name2
src/com.pack.name1
src/com.pack.name2 
```

对这些

```
src/
src/com
src/com/package
src/com/package/name1
src/com/package/name2
src/pack
src/pack/name1
src/pack/name2 
```

和其他类型的不必要的刺激......比如它们不再被识别为包，而是被识别为文件夹。其中一件让您必须运行 eclipse -clean 或删除/重新导入项目或将时间浪费在您不想浪费时间的 eclipse 东西上的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:42:34.457

**这取决于你的情况。**

将它们置于版本控制之下的指示：

*   您正在谈论公司环境中的团队。您应该能够强制执行通用的开发人员环境，除非您还有组织问题。
*   每个人都在使用 Eclipse
*   您想让新手更容易从 SVN 中检出项目（无需将其重新创建为新项目）

不将它们置于版本控制之下的迹象：

*   从事该项目的人员（或 IDE）非常不同（例如在公共开源项目中）
*   您还想在 Hudson/Jenkins 等集成服务器上使用该项目。然后，您需要在Eclipse*之外使用 Maven 或其他一些标准化的工件生命周期管理工具。*

**最佳解决方案：使用 Maven**来描述您的依赖关系，构建过程完全独立于 Eclipse。之后使用 Tycho 在 Maven 和 Eclipse 世界之间“充当经纪人”。这样您就可以确切地知道将什么置于版本控制之下，并且每个人都会产生完全相同的构建（与他使用的 IDE 或安装的插件无关）。

# javascript - SharePoint 中的 SSIS 作业运行显示

> ID：11739939
> 
> 赞同：0
> 
> 时间：2012-07-31T12:21:25.427
> 
> 标签：javascript, sharepoint-2010, web-parts

我有一个 sharepoint 2010 站点，我想在使用新数据填充它的作业开始时显示一条消息。在我 2007 年的旧网站上，我们有一些 javascript 可以读取文件中的系统更新日期并在网站上显示日期。我们现在希望在 SSIS 中启动时也显示一条交互式消息。

我正在考虑在作业开始后从 SSIS 向文件写入内容，例如“作业已开始”，然后在 webpart 中使用 javascript 代码每 20 秒左右读取一次该文件，当它不为空时显示其中的值; 完成后也显示“工作完成”说 5 分钟，然后清空，所以它什么也不显示。

对前进的道路并不完全有信心，因此非常感谢您提供一些帮助或见解。最让我感动的是如何每 20 秒左右从 Webpart 中的 javascript 中实际读取文件，以及其他部分的时间，例如显示作业完成 5 分钟等；我没有太多使用javascript，因此知识有限。

谢谢

一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:28:13.770

SSIS 作业是如何触发的？如果是 SQL 作业，为什么不添加步骤以将 HTML 的静态片段写入作为静态文本并入共享点页面的网站？然后用户可以根据需要进行刷新。

# javascript - 带有 Twitter 引导选项卡的 Backbone.js - 删除链接中的 #

> ID：11739941
> 
> 赞同：4
> 
> 时间：2012-07-31T12:21:26.463
> 
> 标签：javascript, jquery, backbone.js, twitter-bootstrap, underscore.js

我正在使用 Twitter 引导程序的选项卡插件，它需要激活选项卡的链接以包含以 a 开头的 URL 片段，`#`后跟`id`包含选项卡 HTML 内容的 div。

```
 <a href="#home" data-toggle="tab">Home</a>
 <div class="tab-pane" id="home">...</div> 
```

有什么办法可以摆脱不得不使用的`#`？另外，我尝试删除`#`in 链接并以某种方式单击该链接不会使浏览器跟随该链接！

我正在使用backbone.js 和pushstates，所以我希望链接不包含`#`，并且单击它应该将网址更新为`mydomain.com/home`而不是`mydomain.com/#home`。

```
 <a href="home" data-toggle="tab">Home</a>
 <div class="tab-pane" id="home">...</div> 
```

和...

```
$(function() {
    $('a[data-toggle="tab"]').on('shown', function(e) {
        // Update URL in address bar to trigger Backbone.js's router
        window.location.hash = e.target.hash;
    });
}); 
```

这可以做到吗？还是我最好使用backbone.js 来编写我自己的选项卡功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T14:20:12.810

只需在

并执行以下操作：

```
events:
  'show .nav-tabs a': 'navigateTab'

navigateTab: (e) ->
  target = $(e.currentTarget)
  @router.navigate(target.data('url'), trigger: false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:38:04.763

我可以看到有不同类型的选项卡，如果您遵循*基本选项卡示例*而不是*Tabbable 示例*，这不起作用吗？

[http://twitter.github.com/bootstrap/components.html#navs](http://twitter.github.com/bootstrap/components.html#navs)

我认为这里的主要问题是*Tabbable 示例*使用了一个 jQuery 插件，它可能与backbone.js 绑定冲突。

# binding - Knockoutjs 绑定问题 JQuery UI 选项卡

> ID：11739942
> 
> 赞同：0
> 
> 时间：2012-07-31T12:21:26.950
> 
> 标签：binding, knockout.js, jquery-ui-tabs

我有以下问题。

在下面的[JSFiddle1](http://jsfiddle.net/rayray/ddc3y/)中，对话框允许编辑文件夹和编辑链接。

在这个[JSFiddle2 中](http://jsfiddle.net/rayray/ddc3y/1/)，我尝试将 JQuery UI 选项卡添加到以前的 JSfiddle 并将模型应用于其中一个选项卡中的 div

```
ko.applyBindings(foldersModel, document.getElementById("folders-view")); 
```

对话框不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:07:08.423

您做得不对，请改用自定义绑定处理程序来实现。而且因为我是一个很好的人，所以我已经公开了我自己的绑定，并使用了一个 JSFiddle 来配合它.. :P

[https://github.com/AndersMalmgren/Knockout.Bindings](https://github.com/AndersMalmgren/Knockout.Bindings)

[http://jsfiddle.net/H8xWY/](http://jsfiddle.net/H8xWY/)

抱歉，但我以前从未在代码中看到这么多逻辑错误：D 无论如何，因为我很无聊而且是个好人，所以我稍微清理了代码并修复了错误

[http://jsfiddle.net/uK5KL/20/](http://jsfiddle.net/uK5KL/20/)

# java - Java 在 ubuntu 10.04 的 log4j 中使用了错误的时间/日期

> ID：11739945
> 
> 赞同：2
> 
> 时间：2012-07-31T12:21:29.383
> 
> 标签：java, datetime, log4j, ubuntu-10.04

我的服务器日期配置和在 ubuntu 10.04 上运行 log4j 和 solr 的 java 有问题。

系统时间为 CEST。日期命令输出：

```
# date
Di 31\. Jul 14:05:02 CEST 2012 
```

但是我使用 log4j 记录的应用程序日志中的时间是：

```
2012-07-31 12:05:02 
```

我在我的 log4j.properties 文件中使用这一行：

```
log4j.appender.rollingFile.layout.ConversionPattern=%d{ISO8601} %p %t %c - %m%n 
```

现在我构建了一个 jar 来测试包含基本上两行代码的时间：

```
Date date = new Date(System.currentTimeMillis());
System.out.println(DateFormat.getDateTimeInstance().format(date)); 
```

这给了我预期的错误输出：

```
# java -jar javaDate.jar
31.07.2012 12:05:02 
```

如果我使用时区的虚拟机参数它可以正常工作

```
java -Duser.timezone=Europe/Berlin -jar javaDate.jar 
31.07.2012 14:05:02 
```

但是如果我使用相同的参数来启动使用 log4j 的应用程序，我的日志中仍然会出现错误的时间戳。为什么？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:41:18.407

如果您使用的是最新版本的 log4j，您应该能够使用 EnhancedPatternLayout 如果您添加：

```
log4j.appender.rollingFile.layout=org.apache.log4j.EnhancedPatternLayout 
```

到您的配置和使用

```
%d{ISO8601}{Europe/Berlin} 
```

在您的布局中。

# file - Chrome：使用 Javascript 从 blob 创建文件输入？

> ID：11739946
> 
> 赞同：15
> 
> 时间：2012-07-31T12:21:32.987
> 
> 标签：file, google-chrome, input, google-chrome-extension, blob

好吧， an 的 files 属性`input[type=file]`是只读的。因此，我无法将我的 blob 数据写入此输入元素。

但是如果我使用创建一个新的输入文件元素`Javscript`，那么可以在创建时插入 blob 数据吗？我只对适用的解决方案感兴趣`chrome (extension)`- 其他浏览器无关紧要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-04T17:41:15.747

`new File()`构造函数在 chromium / chrome 38+ 可用。请参阅[文件构造器示例](http://googlechrome.github.io/samples/file-constructor/)、[文件 API](https://www.w3.org/TR/FileAPI/#file-constructor)。

```
var date = new Date(),
  filename = "file-" + date.getTime() + ".html";

var generatedFile = new File(
  ["<!DOCTYPE html><html><body>" + filename + "</body></html>"]
  , filename
  , {
  type: "text/html",
  lastModified: date
  }
);

var objUrl = URL.createObjectURL(generatedFile);

console.log(generatedFile, objUrl);

var reader = new FileReader();

reader.addEventListener("load", function(event) {
  console.log(event.target.result)
});

reader.readAsText(generatedFile);
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-26T11:10:50.353

您可以查看我的示例以获取要输入的流程文件、作为 blob 输入的 url、输入到 img 标签预览 [https://vulieumang.github.io/vuhocjs/file2input-input2file/](https://vulieumang.github.io/vuhocjs/file2input-input2file/)

```
var btnLoadUrl = document.querySelector('#loadUrl');
btnLoadUrl.addEventListener("click", ()=>{
  var url = document.querySelector('#url').value;
  loadURLToInputField(url)
});

var btnLoadImage = document.querySelector('#loadImage');
btnLoadImage.addEventListener("click", ()=>{
  var img_preview = document.querySelector('#img-preview');
  console.log(img_preview)
  loadInputFieldToPreview(img_preview)
});

var file_browser = document.querySelector('#file_browser');
var img_preview2 = document.querySelector('#img-preview2');
file_browser.addEventListener('change',()=>{
  var reader = new FileReader();
  reader.onload = function(e) {
    img_preview2.src = e.target.result
  }
  reader.readAsDataURL(document.querySelector('#file_browser').files[0]);
})

function loadURLToInputField(url){
  getImgURL(url, (imgBlob)=>{
    // Load img blob to input
    // WIP: UTF character error
    let fileName = 'hasFilename.jpg'
    let file = new File([imgBlob], fileName,{type:"image/jpeg", lastModified:new Date().getTime()}, 'utf-8');
    let container = new DataTransfer(); 
    container.items.add(file);
    document.querySelector('#file_input').files = container.files;
    // document.querySelector('#status').files = container.files;

  })
}

function loadInputFieldToPreview(imgElement){
  // Load preview to img tag
  var reader = new FileReader();
  reader.onload = function(e) {
    imgElement.src = e.target.result
  }
  reader.readAsDataURL(document.querySelector('#file_input').files[0]); // convert to base64 string
}

// xml json res
function httpGetAsync(url, callback){
  var req = new XMLHttpRequest();
  req.responseType = 'json';
  req.open('GET', url);
  req.onload  = function() {
    var jsonResponse = req.response;
    callback(jsonResponse)
    // do something with jsonResponse
  };
  req.send(null);
}

// xml blob res
function getImgURL(url, callback){
  var xhr = new XMLHttpRequest();
  xhr.onload = function() {
      callback(xhr.response);
  };
  xhr.open('GET', url);
  xhr.responseType = 'blob';
  xhr.send();
}

//check input status
setInterval(() => {
  var input = document.querySelector('#file_input');
  var status = document.querySelector('#status');
  if(input.value){
    status.innerHTML = 'has input'

  } else {
    status.innerHTML = 'empty input'
  }
}, 500);
```

```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>URL, file to input and preview</title>

</head>
<body>
  <h1>Load URL to input</h1>
  <input width="100%" id='url' type="text" placeholder="paste url image here" value="https://cloudinary-res.cloudinary.com/image/upload/dpr_2.0,c_scale,f_auto,q_auto,w_156/cloudinary_logo_for_white_bg.svg">
  <button id="loadUrl">Load URL to input type file</button>
  <input id='file_input' type="file">
  <span>status input file type: <span id="status"></span></span>

  <h1>Load input to preview</h1>
  <button id="loadImage" >Load input above to preview</button>
  <img src="" id='img-preview' alt="img-preview">

  <h1>Load input file browser to preview</h1>
  <input type="file" name="" id="file_browser">
  <img src="" id='img-preview2' alt="preview2">

  <script src="script.js"></script>
</body>
</html>
```

# asp.net-mvc-3 - knockout.js：输入类型日期

> ID：11739947
> 
> 赞同：1
> 
> 时间：2012-07-31T12:21:34.820
> 
> 标签：asp.net-mvc-3, knockout.js

我在我的网站的 UI 中使用 Knockout，我在 Chrome 中输入 type="date" 显示日历时遇到问题，但在 IE9 中只有输入类型文本（空）有人知道如何在所有浏览器中显示日历?

```
 Start: <input type="date" class="required" data-bind="value: StartDate"> 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:52:26.767

“日期”的输入类型是 HTML5 中新增的。这就是为什么您只能在 Chrome 中看到日历，您可能有一个包含 HTML5 支持的版本。这与淘汰赛无关。

# ruby-on-rails - Apache/Passenger/RoR 慢 - 但为什么

> ID：11739959
> 
> 赞同：0
> 
> 时间：2012-07-31T12:22:13.227
> 
> 标签：ruby-on-rails, performance, apache2, passenger

我正在使用 Apache 2.2.17、Passenger 3.0.11、Ruby 1.9.3 和 Rails 3.2.6 运行 Ubuntu（64 位）

在我的网页上访问网页（index.html）时，请求需要很长时间才能完成，在极端情况下大约需要 30 秒。

服务器有足够的可用内存（顶部显示超过 4GB 可用），Apache 进程（其中有 10 个）在顶部显示 0% CPU，负载也几乎为 0，几乎没有任何数据库访问，因为我缓存memcached 的大部分内容。

Apache 和 Rails 的日志文件没有显示任何错误，相反，RubyOnRails 日志文件中显示的渲染时间显示了极好的值（<100 ms）。

那么从这里去哪里呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:37:36.817

第一个请求慢还是所有请求都慢？乘客在给定的时间间隔后关闭。因此，间歇性请求（中间有足够时间跨度的请求）将允许乘客关闭（仅在下一次请求时重新启动。

乘客按设计自动关闭。之所以如此，是因为在共享环境中，可能存在其他用户的应用程序。如果您的应用闲置一段时间，则可以将资源转移到其他人的应用中。

如果您的预算紧张，并且在同一台服务器上托管了多个应用程序，那么乘客是一个很好的解决方案。

如果您的服务器中只有一个您控制的应用程序，请重新配置Passengers 以不关闭（如果这确实是您的问题）。

您可以执行“passenger-status”来查看当前有多少乘客正在运行并且可以接受请求。

保证Passengers熬夜的配置是PassengerMinInstances和PassengerPoolIdleTime。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:35:00.690

您是否通过“假域名”（添加到您的`/etc/hosts`文件中）访问它？

如果是这样，做

```
service avahi-daemon stop 
```

至少在 ubuntu 10.10 上这对我有用 :)

由于某种原因，您对服务器所做的每个请求都会进行 DNS 查找，并且当域不存在时，它会超时......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T10:39:47.503

这些天来，性能问题一直让我很忙。我相信我已经将它归结为 Apache 配置：KeepAliveTimeout，它被设置为一个非常高的值（90），想不出它为什么设置那么高，一定是一个错字。我对 KeepAliveTimeout 的理解是 Apache 进程被锁定到客户端 90 秒，即使客户端没有发出任何进一步的请求，因此当流量增加时（它在性能显着降低的那一天，页面访问超过三倍）所有 Apache 进程都忙于等待 KeepAliveTimeout，同时阻止所有新请求进入。这也可以解释为什么系统根本没有显示太多负载，它只是坐在那里等待。我将值降低到 10，如果流量增加，我可能会将其降低到 5。

# android - 使用 AndEngine 时手机出现白屏

> ID：11739961
> 
> 赞同：0
> 
> 时间：2012-07-31T12:22:21.153
> 
> 标签：android, andengine, htc-hero

HTC Hero 和 AndEngine 的问题`BaseGameActivity`：启动时，只有白屏，没有任何图形，如背景和精灵。但是我可以看到线条（`org.anddev.andengine.entity.primitive.Line`）等对象，并且我可以点击不可见的按钮并且我的代码正在执行，但它仍然是白屏。

当我在其他设备上启动此应用程序时，一切正常。

哪里有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:40:08.237

似乎我的 TextureAtlases 对于这款手机来说太大了，我必须使用几个较小的图集。

# android - 文字如何在android中显示？

> ID：11739962
> 
> 赞同：-1
> 
> 时间：2012-07-31T12:22:23.573
> 
> 标签：android, text

我正在开发一个安卓应用程序。任何人都可以告诉我或发送有关文本如何在 android 中显示的任何链接。就图像而言，我们可以在 dp 中指定大小以保持大小不变​​。如何为 android 执行此操作以使其在设备之间保持可读？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:25:35.380

您可以使用 SP 单位指定文本大小。

> 同样，您应该更喜欢 sp（与比例无关的像素）来定义文本大小。sp 缩放因子取决于用户设置，系统缩放大小与对 dp 的缩放相同。

参考Android Docs on [Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:23:45.317

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/textViewOrderProduct"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:layout_marginLeft="5dp"
        android:onClick="hideKeyBord"
        android:text="123"
        android:textSize="15dp"
        android:width="100dp" />

    <EditText
        android:id="@+id/editTextOrderQty"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="8dp"
        android:background="#ffffff"
        android:inputType="number"
        android:maxLength="4"
        android:text="123"
        android:textSize="13dp"
        android:width="50dp" />

    <EditText
        android:id="@+id/editTextOrderprice"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="8dp"
        android:background="#ffffff"
        android:inputType="number"
        android:maxLength="5"
        android:text="123"
        android:textSize="13dp"
        android:width="50dp" />

    <TextView
        android:id="@+id/textViewOrderStock"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:layout_marginLeft="5dp"
        android:onClick="hideKeyBord"
        android:text="123"
        android:textSize="13dp"
        android:width="50dp" />

</LinearLayout> 
```

# php - 为什么设置超全局变量 $GLOBALS['foo'] 不起作用？

> ID：11739963
> 
> 赞同：1
> 
> 时间：2012-07-31T12:22:33.260
> 
> 标签：php, scope, superglobals

以下代码会产生警告：

```
<?php
$GLOBALS['foo'] = "Example content<BR><BR>";
echo $foo; // that works!
Test();

function Test()
{
    echo $foo; // that doesn't work!
}
?> 
```

警告是：

`Notice: Undefined variable: foo`

怎么来的 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:23:17.253

在函数内部，`$foo`除非您将其称为 as`$GLOBALS['foo']`或 use ，否则超出范围`global $foo`。用 定义全局`$GLOBALS`，虽然它提高了可读性，但不会自动保留变量名称以在所有范围内使用。您仍然需要在较低范围内显式调用全局变量才能使用它。

```
function Test()
{
    echo $GLOBALS['foo'];

    // Or less clear, use the global keyword
    global $foo;
    echo $foo;
} 
```

甚至可以在同一个函数中同时拥有本地和全局`$foo`（尽管完全不推荐）：

```
$GLOBALS['foo'] = "foo! :)";
function getFoo()
{
  $foo = "boo :(";
  echo $GLOBALS['foo'] . "\n"; // Global $foo
  echo $foo;            // Local scope $foo since it has no global keyword
}

getFoo();
// foo! :) 
// boo :( 
```

查看[有关变量范围的 PHP 文档](http://us3.php.net/manual/en/language.variables.scope.php)和[`$GLOBALS`文档](http://us3.php.net/manual/en/reserved.variables.globals.php)以获取更多示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T12:23:37.993

您将需要始终通过 $GLOBALS 数组引用它。阅读[变量范围](http://php.net/manual/en/language.variables.scope.php)以获得完整的描述性答案。

```
<?php
$GLOBALS['foo'] = "Example content<BR><BR>";
echo $foo; // that works!
Test();

function Test()
{
    echo $GLOBALS['foo']; // that doesn't work!
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T12:25:34.457

您可以将代码更改为：

```
function Test() {
    global $foo;

    echo $GLOBALS['foo'];
    echo $foo;
} 
```

您必须声明您从 PHP 函数访问的全局变量。见： http: [//php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

# c++ - 将weak_ptr与原始指针进行比较不起作用，寻找替代方案

> ID：11739965
> 
> 赞同：4
> 
> 时间：2012-07-31T12:22:47.870
> 
> 标签：c++, c++11, shared-ptr, resource-management, weak-ptr

我有一个 SpriteManager 类，它为我加载和缓存精灵，并从缓存中删除未使用的精灵。无论如何，这就是我的想法，我有点卡住了。我有一个`map<string,weak_ptr<ALLEGRO_BITMAP>>`存储精灵的地方，并使用 weak_ptr 来生成`shared_ptr`'s。现在我正在尝试使用一个删除器，它也从地图中删除位图，它看起来像这样（显然不工作）：

```
[&bitmaps](ALLEGRO_BITMAP* bmp){
        for(auto it = bitmaps.begin(); it!=bitmaps.end(); ++it) {
            if((*it).second == bmp) {
                bitmaps.erase(it);
                al_destroy_bitmap(bmp);
                break;
            }
        }
} 
```

位图是我正在谈论的地图。当然我不能比较`(*it).second`and `bmp`，但我也不能锁定weak_ptr，因为我在删除器中。除了保留弱指针和原始指针之外，我真的别无选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T12:25:58.707

将迭代器与`&bitmaps`. 然后删除它。

```
[&bitmaps, iter](ALLEGRO_BITMAP* bmp){
    bitmaps.erase(iter);
    al_destroy_bitmap(bmp);
} 
```

# windows - 尽管服务器和客户端都打开了，但 telnet 无法正常工作

> ID：11739977
> 
> 赞同：0
> 
> 时间：2012-07-31T12:23:46.127
> 
> 标签：windows, telnet, netstat

我使用一台装有 Windows 7 的电脑。我尝试远程登录到另一台主机，但即使主机启用了远程登录服务器并且我启用了客户端，它也不起作用。所以，我在我的电脑上启用了远程登录服务器并远程登录到我的电脑. 但这也因错误而失败

```
Connecting To 172.17.4.155...Could not open connection to the host, on port 23:
Connect failed 
```

然后我在虚拟机上用 ubuntu 检查了 tcpdump。转储说连接关闭并发送了重置标志。**因此，我在 Windows 上使用“ netstat -a** ”检查了是否有 telnet 服务器在端口 23 上侦听。端口 23 上没有服务器监听。这很奇怪，因为在控制面板的**程序和功能**中它说客户端和服务器都在运行。

谁能告诉我有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T05:00:32.687

单击开始，然后单击控制面板。

在控制面板主页上，单击程序。

在标题为程序和功能的部分下，单击打开或关闭 Windows 功能。

如果出现“用户帐户控制”对话框，请确认它显示的操作是您想要的，然后单击“继续”。

在 Windows 功能列表中，选择 Telnet 服务器，然后单击确定。

参考：[http ://technet.microsoft.com](http://technet.microsoft.com)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:50:55.010

谢谢先生的帮助....但问题是别的...虽然安装了telnet服务器，但实际上发生了什么，但它在服务中关闭，即它被禁用...使用任务管理器打开服务然后单击服务选项卡...然后转到telnet并将其类型更改为手动并启动服务

# drivers - 用于自己操作系统的 AHCI 驱动程序

> ID：11739979
> 
> 赞同：3
> 
> 时间：2012-07-31T12:23:59.710
> 
> 标签：drivers

我已经编写了一个小 AHCI 驱动程序两个星期了。我已经阅读[了这篇文章](http://wiki.osdev.org/AHCI)和[英特尔的串行 ATA 高级主机控制器接口 (AHCI) 1.3。](http://www.intel.com/content/dam/www/public/us/en/documents/technical-specifications/serial-ata-ahci-spec-rev1_1.pdf)有一个例子，它显示了如何通过 DMA 模式（osdev.org）读取扇区。我已成功完成此操作（**ATA_CMD_READ_DMA 0xC8**），但是当我尝试将扇区（**ATA_CMD_WRITE_DMA 0xCA**）写入设备时，HBA 设置了错误

```
Offset 30h: PxSERR – Port x Serial ATA Error - Handshake Error 
```

（这是从英特尔 AHCI 规范解码）。我不明白为什么会这样。请帮我。

另外，我尝试发出命令**IDENTIFY 0xEC**，但没有成功...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T03:33:42.047

你差不多两个月前问过这个问题，所以我不确定你是否已经弄清楚了。请注意，我是从记忆中写出必须首先做的事情等。我可能没有记住全部或准确地记住必须做的事情。您应该为所有内容参考 AHCI 规范。这样做的方法是多种多样的，因为有这样做的程序员。出于这个原因，我不包括代码示例。

对于初学者，请确保您已相应地设置了 HBA 状态机。您将能够在同一 SATA 规范 1.3 中找到 HBA 支持的状态机的参考。取而代之的是，您应该检查一些寄存器。

***请注意，所有页码都是针对在 Adob​​e Acrobat 中查看而给出的，比实际文档中的页码多 8 页***

从规范的第 24 页和第 25 页，检查 GHC.IE 和 GHC.AE。这两个将打开中断并确保 HBA 工作在 AHCI 模式下。另一个需要检查的非常重要的寄存器是 CAP.SSS（第 23 页）。如果该位为高，则 HBA 支持交错启动。这意味着 HBA 不会对任何端口执行任何协议协商。在执行以下操作之前，请存储 PxSIG 的值（第 35 和 36 页）。

要真正启动端口，您需要访问规范的第 33、34 和 35 页。这些页面涵盖了 PxCMD 寄存器。对于 HBA 支持的每个端口（检查 CAP.NP 以了解有多少），您必须切换高位 PxCMD.SUD。将该位切换为高电平后，您需要轮询 PxSSTS（第 36 页）以检查 PHY 的状态。您可以检查 CAP.ISS 以了解您可以期望在 PxSSTS 上看到“活跃”的速度。

启动端口后，检查 PxSIG（第 35 和 36 页）。该值应该与您开始时不同。我现在不记得你可以期望他们变成什么，但他们会有所不同。当实际建立通信时，设备向主机发送初始 FIS。如果没有第一个 FIS，HBA 将无法与设备通信。（正是在第一个 FIS 中，HBA 在 PxSIG 中设置了正确的位。）

最后，在所有这些之后，您需要设置 PxCMD.FRE（第 34 页）。端口命令寄存器中的该位使 FIS 能够传送到设备。如果该位为低，HBA 将忽略您发送给它的任何内容。

正如我在开始时所说，我不确定这是否会回答您的所有问题，但我希望它确实能让您走上正轨。为了有效地与 SATA 设备通信，我将从记忆中了解必须完成的事件。我可能没有完全记得。

我希望这可以帮助你。

# regex - 捕获多行文本

> ID：11739982
> 
> 赞同：0
> 
> 时间：2012-07-31T12:24:05.997
> 
> 标签：regex, preg-replace

我有一个html文档..：

```
<p>blah blah<p>
<p>blah blah
<br>blah blah</p>
<p>blah blah
<br>
    <br>
blah blah</p> 
```

我想删除双断空格。（可以在最后一段中找到）

我试过这个表达式，但它会删除 first`<br>`和 second之间的任何内容`<br>`。但我只想删除最后一个`<br>`（紧接着另一个`<br>`，在下一行）：

```
/<br>(.*?)<br>/s 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:34:37.273

尝试使用

```
<br>((\s*)<br>)+ 
```

它将匹配（在您的示例中）两个或多个`<br>`标签之间有某种空间的标签。

# c# - 比较两个列表以搜索常见项目

> ID：11739986
> 
> 赞同：15
> 
> 时间：2012-07-31T12:24:16.013
> 
> 标签：c#, linq, comparison

```
List<int> one //1, 3, 4, 6, 7
List<int> second //1, 2, 4, 5 
```

如何从一个列表中获取第二个列表中也存在的所有元素？

在这种情况下应该是：1、4

我当然会谈论没有 foreach 的方法。而是 linq 查询

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-31T12:24:49.497

您可以使用[相交](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)方法。

```
var result = one.Intersect(second); 
```

* * *

**例子：**

```
void Main()
{
    List<int> one = new List<int>() {1, 3, 4, 6, 7};
    List<int> second = new List<int>() {1, 2, 4, 5};

    foreach(int r in one.Intersect(second))
        Console.WriteLine(r);
} 
```

输出：

> 1
> 4

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T13:28:10.760

```
static void Main(string[] args)
        {
            List<int> one = new List<int>() { 1, 3, 4, 6, 7 };
            List<int> second = new List<int>() { 1, 2, 4, 5 };

            var result = one.Intersect(second);

            if (result.Count() > 0)
                result.ToList().ForEach(t => Console.WriteLine(t));
            else
                Console.WriteLine("No elements is common!");

            Console.ReadLine();
        } 
```

# java - 将组件绘制到 BufferedImage 会导致显示损坏

> ID：11739989
> 
> 赞同：7
> 
> 时间：2012-07-31T12:24:28.040
> 
> 标签：java, swing, awt, bufferedimage, java-2d

我正在使用[此处](http://www.javalobby.org/java/forums/t21355.html)`JScrollNavigator`描述的组件，以便在我嵌入在.`JScrollPane`

我试图调整`JScrollNavigator`以绘制画布的缩略图，以便为用户提供一些额外的上下文。但是，这样做会导致我的应用程序主框架的呈现损坏。具体来说，是调用`paint(Graphics)`视口组件（即我的主画布）的动作，传入`Graphics`由创建的对象`BufferedImage`导致后续显示损坏；如果我将此行注释掉，一切正常。

下面是`JScrollNavigator`的覆盖`paintComponent`方法：

```
@Override
protected void paintComponent(Graphics g) {
    Component view = jScrollPane.getViewport().getView();
    BufferedImage img = new BufferedImage(view.getWidth(), view.getHeight(), BufferedImage.TYPE_INT_ARGB);
    Graphics2D g2d = img.createGraphics();

    // Paint JScrollPane view to off-screen image and then scale.
    // It is this action that causes the display corruption!
    view.paint(g2d);
    g2d.drawImage(img, 0, 0, null);
    Image scaled = img.getScaledInstance(getWidth(), getHeight(), 0);

    super.paintComponent(g);
    g.drawImage(scaled, 0, 0, null);
} 
```

有人对腐败的原因有什么建议吗？我会认为绘制到屏幕外图像应该对现有的绘制操作没有影响。

**编辑**

提供一些额外的细节：`JScrollNavigator`表单左侧的子面板`JSplitPane`。与导航器`JScrollPane`关联的位于右侧。“损坏”导致拆分器不再被渲染并且滚动条不可见（它们看起来是白色的）。如果我调整大小`JFrame`，该`JMenu`部分也会变成白色。如果我尝试使用导航器或与滚动条交互，它们会变得可见，但拆分器仍然是白色的。就好像各种组件的不透明设置受到了将视口视图渲染到屏幕外图像的影响。

此外，如果我将其`JScrollNavigator`显示在一个完全独立的`JDialog`中，则一切正常。

**编辑 2**

我可以通过执行以下操作来**一致地重现该问题：**

添加`JMenuBar`到`mFrame`：

```
JMenuBar bar = new JMenuBar();
bar.add(new JMenu("File"));
mFrame.setJMenuBar(bar); 
```

在替换`main()`方法中：`JScrollNavigator`

```
jsp.setViewportView(textArea); 
```

... 和：

```
jsp.setViewportView(new JPanel() {
  {
    setBackground(Color.GREEN);
    setBorder(BorderFactory.createLineBorder(Color.BLACK, 5));
  }
}); 
```

确保`JScrollNavigator`作为面板嵌入其中`mFrame`，而不是单独显示`JDialog`：

```
mFrame.add(jsp, BorderLayout.CENTER);
mFrame.add(nav, BorderLayout.NORTH); 
```

现在当应用程序运行时`JMenuBar` **不再可见**；将视图（即`JPanel`带有粗黑边框的绿色）绘制到`Graphics2D`返回的行为`BufferedImage.createGraphics()`实际上似乎是在**屏幕上**渲染它，可能是从 JFrame 的左上角开始，从而掩盖了其他组件。这似乎只在 a`JPanel`用作视口视图时才会发生，而不是其他组件，例如`JTextArea`,`JTable`等。

**编辑 3**

看起来这个人遇到了同样的问题（虽然没有发布解决方案）：[http ://www.javaworld.com/community/node/2894/](http://www.javaworld.com/community/node/2894/)

**编辑 4**

以下是导致编辑 2 中描述的可重现错误的方法`main`和方法：`paintComponent`

```
public static void main(String[] args) {
    JScrollPane jsp = new JScrollPane();
    jsp.setViewportView(new JPanel() {
        {
            setBackground(Color.GREEN);
            setBorder(BorderFactory.createLineBorder(Color.BLACK, 5));
        }
    });

    JScrollNavigator nav = new JScrollNavigator();
    nav.setJScrollPane(jsp);

    JFrame mFrame = new JFrame();

    JMenuBar bar = new JMenuBar();
    bar.add(new JMenu("File"));
    mFrame.setJMenuBar(bar);

    mFrame.setTitle("JScrollNavigator Test");

    mFrame.setSize(800, 600);

    mFrame.setLayout(new GridLayout(1, 2));

    mFrame.add(jsp);
    mFrame.add(nav);
    Dimension screenDim = Toolkit.getDefaultToolkit().getScreenSize();
    mFrame.setLocation((screenDim.width - mFrame.getSize().width) / 2, (screenDim.height - mFrame.getSize().height) / 2);

    mFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    mFrame.setVisible(true);
}

@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);

    Component view = jScrollPane.getViewport().getView();

    if (img == null) {
        GraphicsConfiguration gfConf = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();
        img = new BufferedImage(view.getWidth(), view.getHeight(), BufferedImage.TYPE_INT_ARGB);
    }

    Graphics2D g2d = img.createGraphics();
    view.paint(g2d);

    Image scaled = img.getScaledInstance(getWidth(), getHeight(), 0);

    g.drawImage(scaled, 0, 0, null);
} 
```

**编辑 5**

似乎其他人在重现确切问题时遇到了麻烦。我会要求人们运行粘贴[在这里](http://pastebin.com/ueuNSBjy)的代码。当我第一次运行此示例时，我看到以下内容：

![损坏的图像 1](../Images/c46b9d77e1b91e160d5621aeb8405cff.png)

JScrollNavigator 和 JMenuBar 都没有被绘制；这些框架区域是透明的。

调整大小后，我看到以下内容：

![损坏的图像 2](../Images/239969527d7760cc31d35c5da431a167.png)

`JMenuBar`仍未绘制，并且似乎在`JPanel`某个点呈现在（0,0）（`JMenuBar`应该在哪里）。里面的`view.paint`呼唤`paintComponent`是造成这种情况的直接原因。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T16:39:33.823

摘要：原版[`JScrollNavigator`](http://www.javalobby.org/java/forums/t21355.html)使用 Swing属性在相邻的组件的缩放缩略图上[`opacity`](http://java.sun.com/products/jfc/tsc/articles/painting/index.html#props)呈现方便的绿色。因为它 extends ，所以（共享的）UI 委托的使用与可滚动组件的使用冲突。在上面的编辑 5 中看到的图像代表了相关的渲染工件，也显示[在此处](https://stackoverflow.com/q/7213178/230513)。解决方案是 let和可滚动组件 extend ，如下面的第二个附录中所建议的那样。然后每个组件可以单独管理它自己的属性。`NavBox``JScrollPane``JPanel``opacity``NavBox``JScrollNavigator``JComponent`

![在此处输入图像描述](../Images/ba923908248c6c8b8c421c331678682a.png)

在我的平台 Mac OS X、Java 1.6 上[发布的代码中，](http://wklej.to/RnkO1)我没有发现异常的渲染工件。抱歉，我没有看到任何明显的可移植性违规行为。

![图一](../Images/70b43f6a51f13c9c27299bd440c0f280.png)

一些可能不相关但可能有用的观察结果。

*   即使您`setSize()`在这种情况下适当地使用 ，您仍然应该`pack()`使用`Window`.

    ```
    f.pack();
    f.setSize(300, 200); 
    ```

*   为方便起见，`add()`将组件转发到内容窗格。

    ```
    f.add(nav, BorderLayout.WEST); 
    ```

*   `StringBuilder`更喜欢`StringBuffer`.

*   考虑`ComponentAdapter`代替`ComponentListener`.

附录：正如[这里](https://stackoverflow.com/a/6916719/230513)所建议的，我得到了一些更灵活的结果，`RenderingHints`而不是`getScaledInstance()`如下所示。添加一些图标可以更轻松地查看图像和文本的不同效果。

![图二](../Images/a5f8e0800fa0c8d1071e16e8bd932033.png)

```
editPane.insertIcon(UIManager.getIcon("OptionPane.errorIcon"));
editPane.insertIcon(UIManager.getIcon("OptionPane.warningIcon"));
...
@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    Component view = jScrollPane.getViewport().getView();
    BufferedImage img = new BufferedImage(view.getWidth(),
        view.getHeight(), BufferedImage.TYPE_INT_ARGB);
    Graphics2D off = img.createGraphics();
    off.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
        RenderingHints.VALUE_ANTIALIAS_ON);
    off.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
        RenderingHints.VALUE_INTERPOLATION_BICUBIC);
    view.paint(off);
    Graphics2D on = (Graphics2D)g;
    on.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
        RenderingHints.VALUE_ANTIALIAS_ON);
    on.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
        RenderingHints.VALUE_INTERPOLATION_BICUBIC);
    on.drawImage(img, 0, 0, getWidth(), getHeight(), null);
} 
```

附录 secundum：看起来`JPanel`UI 委托不合作。一种解决方法是扩展`JComponent`以便您可以控制[opacity](http://java.sun.com/products/jfc/tsc/articles/painting/index.html#props)。管理`backgroundColor`. `NavBox`并且`JScrollNavigator`也是类似治疗的候选者。

![在此处输入图像描述](../Images/2a18328d17331f09514a4a3f79f0ace0.png)

```
jsp.setViewportView(new JComponent() {

    {
        setBackground(Color.red);
        setBorder(BorderFactory.createLineBorder(Color.BLACK, 16));
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setColor(getBackground());
        g.fillRect(0, 0, getWidth(), getHeight());
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(300, 300);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T17:15:59.030

我也不确定您所说的损坏是什么意思，但我注意到如果您指定 Image.SCALE_SMOOTH 作为重新缩放提示，重新采样的图像会更好：

```
Image scaled = img.getScaledInstance(getWidth(), getHeight(), Image.SCALE_SMOOTH); 
```

也许这就是你正在寻找的......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T20:38:05.577

我能够重现您的问题并为您提供所需的结果。问题是，当您再次重新绘制时，图像的绘制尚未完成，因此只有部分图像被绘制。要解决此问题，请将此字段添加到您的`JScrollNavigator`类中（作为锁）：

```
/** Lock to prevent trying to repaint too many times */
private boolean blockRepaint = false; 
```

当我们重绘组件时，这个锁将被激活。在我们成功绘制面板之前，它不会发布 - 然后可以执行另一个绘制。

`paintComponent`需要更改以遵守锁定并在`ImageObserver`绘制导航面板时使用。

```
@Override
protected void paintComponent(final Graphics g) {
    super.paintComponent(g);
    if(!blockRepaint){
        final Component view = (Component)jScrollPane.getViewport().getView();
        BufferedImage img = new BufferedImage(view.getWidth(), view.getHeight(), BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2d = img.createGraphics();
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

        // Paint JScrollPane view to off-screen image and then scale.
        // It is this action that causes the display corruption!
        view.paint(g2d);
        ImageObserver io = new ImageObserver() {

            @Override
            public boolean imageUpdate(Image img, int infoflags, int x, int y,int width, int height) {
                boolean result = true;
                g.drawImage(img, 0, 0, null);
                if((infoflags & ImageObserver.FRAMEBITS) == ImageObserver.FRAMEBITS){
                    blockRepaint = false;
                    result = false;
                }

                return result;
            }
        };

        Image scaled = img.getScaledInstance(getWidth(), getHeight(), 0);
        blockRepaint = g.drawImage(scaled, 0, 0, io);
    }
} 
```

# delphi - 阻止 Ctrl+Atl+删除 Windows 7

> ID：11739998
> 
> 赞同：0
> 
> 时间：2012-07-31T12:24:50.803
> 
> 标签：delphi, windows-7

如何使用 Delphi 或无论如何在**Windows 7**`Ctrl`上阻止++`Alt`组合`Delete`键

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:26:27.620

你不能做这个。[安全注意序列](http://en.wikipedia.org/wiki/Secure_attention_key)（`CTRL`++的官方 Windows 名称`ALT`）`DEL`在内核模式下处理，如果用户模式应用程序能够更改用户发送 SAS 时发生的情况，这将是一个巨大的安全漏洞。**

# c# - 日期转换为 yyyy-mm-dd

> ID：11739999
> 
> 赞同：-2
> 
> 时间：2012-07-31T12:24:53.930
> 
> 标签：c#, asp.net, sql-server

cmd.Parameters.Add("@StartDate", SqlDbType.DateTime).Value = DateTime.Parse(txtStartDate.Text);

txtStartDate.Text 中的值类似于 31-07-2012

我需要在 2012 年 7 月 31 日拿到它。

用于存储过程中的处理。

我的代码是这样的：

```
 cmd = new SqlCommand("DownloadtoXLSheet", conn);

            cmd.Parameters.Add("@StartDate", SqlDbType.DateTime).Value = DateTime.Parse(txtStartDate.Text);
            cmd.Parameters.Add("@EndDate", SqlDbType.DateTime).Value = DateTime.Parse(txtEndDate.Text);
            cmd.Parameters.Add("@FirstName", SqlDbType.VarChar).Value = DropDownList1.Text.ToString();
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.ExecuteNonQuery();

            SqlDataAdapter da = new SqlDataAdapter(cmd);
            da.Fill(dt1); 
```

帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:31:22.863

首先，您不需要特定格式的日期在存储过程/数据库中进行处理。一旦将 DateTime 添加为参数（类型为 DateTime），SQL 提供程序将确保 SQL 服务器可以处理日期。

另一方面，您可能需要特定格式的日期才能使 DateTime.Parse 工作。

尝试：

```
DateTime.ParseExact(input, "dd-MM-yyyy", CultureInfo.InvariantCulture); 
```

但是，也许您应该`DateTime.TryParseExact`改用，以避免异常？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T12:26:52.163

使用`DateTime.ParseExact`方法而不是`DateTime.Parse`.

```
DateTime result=DateTime.ParseExact("31-07-2012", "dd-MM-yyyy",CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:29:16.197

在 .ToString() 方法中，您可以指定格式字符串 [http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)

```
DateTime.Parse(txtStartDate.Text).ToString("yyyy-MM-dd") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T12:29:03.957

尝试

```
DateTime dt = ...;

dt.ToString("yyyy-MM-dd"); 
```