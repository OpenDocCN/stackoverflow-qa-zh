# StackOverflow 问答 11175000-11175999

# google-visualization - 谷歌可视化类别过滤器

> ID：11175003
> 
> 赞同：2
> 
> 时间：2012-06-24T04:42:22.133
> 
> 标签：google-visualization

我用谷歌可视化制作了一个仪表板。我的仪表板有一个在 ChartWrapper 的帮助下绘制的表格，我在类别过滤器的帮助下按列之一过滤了表格。我还有一个选择事件，通过选择过滤表中的一行，将弹出第二个表。我的问题是，在过滤表并单击其中一行后，第二个表没有正确的信息。过滤表上的所有行似乎都从第一个未过滤的行中获取它们的值。您知道如何获取过滤表上的更新数据并使用 select 事件吗？以下是我的代码的一部分：

```
function drawDashboard() {

    dataUrl = $("#site_promotion_summary")[0].attributes["data-google-chart-url"].value;
    hip_get_dataTable(dataUrl, function (response) {
        var dataTable = response.getDataTable();

        // Define a category picker control for the SiteTypeName column
        var categoryPicker = new google.visualization.ControlWrapper({
            'controlType': 'CategoryFilter',
            'containerId': 'category_picker',
            'options': {
                'filterColumnLabel': 'SiteTypeName',
                'ui': {
                    'labelStacking': 'vertical',
                    'allowTyping': false,
                    'allowMultiple': false
                }
            }
        });

        var table = new google.visualization.ChartWrapper({
            'chartType': 'Table',
            'containerId': 'site_promotion_summary',
            //'dataTable': dataTable,
            'view': { 'columns': [0, 1, 4, 5, 6, 7, 8, 9] }
        });
var dashboard = new google.visualization.Dashboard(document.getElementById('dashboard')).bind(categoryPicker, table).draw(dataTable);

        //Select event   
        google.visualization.events.addListener(table, 'select', function () {
            var selection = table.getChart().getSelection();
            for (var i = 0; i < selection.length; i++) {
                var item = selection[i];
                var promos = dataTable.getValue(item.row, 3);

                if (item.row != null && promos >= 2) {
                    var str = dataTable.getValue(item.row, 0);
                    var selectedSiteId = dataTable.getValue(item.row, 2);
                    var selectedRowPosition = $(".google-visualization-table-tr-sel").position();
                    drawDetail(selectedSiteId, selectedRowPosition.top + 190);

                }

            }
 });
    });
 }

function drawDetail(siteId, positionTop) {
    dataUrl = $("#detail_table")[0].attributes["data-google-chart-url"].value;
    var dataUrlFormatted = dataUrl.replace("{0}", siteId);
    hip_get_dataTable(dataUrlFormatted, function (response) {
        var dataTable = response.getDataTable();
        var table = new google.visualization.ChartWrapper({
            'chartType': 'Table',
            'containerId': 'detail_table',
            'dataTable': dataTable,
            'options': { 'width': '800px', 'height': '300px' }

        });

        //format the wholesale and retail columns
        var formatter = new google.visualization.TableNumberFormat(
        { prefix: "$", negativeColor: 'black', negativeParens: true });
        formatter.format(dataTable, 1);
        formatter.format(dataTable, 2);

        //format the orderItemCount column
        var formatter = new google.visualization.TableNumberFormat(
        { groupingSymbol: "," });
        formatter.format(dataTable, 3);

        table.draw();

        $("#detail_table").css({
            position: "absolute",
            top: positionTop + "px",
            left: "400px",
            "background-color": "white"

        }).show();

    });

    $("#detail_table").click(function (event) {
        event.preventDefault();
        $(this).hide();
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T20:42:29.513

在您的选择侦听器上，我们将创建一个包含过滤数据的 DataView：

```
 var filteredView = table.getDataTable(); 
```

然后在侦听器中不使用 dataTable，而是使用过滤视图：

```
 var promos = dataTable.getValue(item.row, 3); 
```

# ruby-on-rails - 在启动/乘客重新启动时启动 Resque

> ID：11175006
> 
> 赞同：5
> 
> 时间：2012-06-24T04:42:43.427
> 
> 标签：ruby-on-rails, passenger, resque

我的环境：带有 RVM、Passenger、Apache on Linux (Ubuntu) 的 Rails 3.2.x，我没有使用 Capistrano，暂时不打算这样做。

我已将 Resque 集成到我的 Rails 应用程序中，并且在手动启动 resque 时一切正常

```
rake RAILS_ENV=production environment resque:work QUEUE='*' 
```

下一步是让 Resque 在Passenger 启动（重新启动）时自动启动（重新启动）。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T05:13:02.553

在这个问题上使用[工头怎么样？](https://github.com/ddollar/foreman)

Foreman 是一个基于 procfile 的工具，用于管理多进程 Rails 应用程序。

可以在[railscasts](http://railscasts.com/episodes/281-foreman)看到一个简单的介绍。一个示例可能如下所示：

```
web: bundle exec rails server
solr: bundle exec rake sunspot:solr:run
resque: rake RAILS_ENV=production environment resque:work QUEUE='*' 
```

# javascript - 如何将'axaya'中的第一个和最后一个'a'与正则表达式匹配？

> ID：11175012
> 
> 赞同：0
> 
> 时间：2012-06-24T04:45:28.700
> 
> 标签：javascript, regex

如果我不想在 y 后面匹配 'a'，我可以这样写：`a(?![\w\W]*y);`但现在我不想在 'x' 和 'y' 之间匹配 'a'，似乎也`(?!x)a`可以匹配 xa 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:57:56.220

如果您要匹配单词中的第一个和最后一个“a”。

```
 /((^a)[\w]+(a$))/gm 
```

## 例子：

```
axaya - Matches
abcd
abcda - Matches
xyza
axyasxaxaxa - Matches 
```

# codeigniter - Codeigniter：仅压缩目标文件夹

> ID：11175013
> 
> 赞同：0
> 
> 时间：2012-06-24T04:45:34.550
> 
> 标签：codeigniter

Codeigniter 压缩整个源路径。

如何仅压缩目标文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-23T11:38:36.943

在 $this->zip->read_dir() 中，在第二个参数中传递 FALSE。

$this->zip->read_dir($path, FALSE);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T19:57:23.987

Have this possibility

```
$folder_in_zip = "/"; //root directory of the new zip file

$path = 'games/SDK/com/';
$this->zip->get_files_from_folder($path, $folder_in_zip);

$path = 'games/wheel/';
$this->zip->get_files_from_folder($path, $folder_in_zip);

$this->zip->download('my_backup.zip'); 
```

Without recursion

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed.');

class MY_Zip extends CI_Zip 
{   
    /**
     * Read a directory and add it to the zip using the new filepath set.
     *
     * This function recursively reads a folder and everything it contains (including
     * sub-folders) and creates a zip based on it.  You must specify the new directory structure.
     * The original structure is thrown out.
     *
     * @access  public
     * @param   string  path to source
     * @param   string  new directory structure
     */
    function get_files_from_folder($directory, $put_into, $recursion = false) 
    {
        if ($handle = opendir($directory)) 
        {
            while (false !== ($file = readdir($handle))) 
            {
                if (is_file($directory.$file)) 
                {
                    $fileContents = file_get_contents($directory.$file);

                    $this->add_data($put_into.$file, $fileContents);

                } 

                elseif ($recursion and $file != '.' and $file != '..' and is_dir($directory.$file)) {

                    $this->add_dir($put_into.$file.'/');

                    $this->get_files_from_folder($directory.$file.'/', $put_into.$file.'/', $recursion);
                }

            }//end while

        }//end if

        closedir($handle);
    }
} 
```

This extract [from this question](https://stackoverflow.com/a/6673393/719323)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-09-28T11:02:43.520

**控制器**

**上传压缩文件**

```
public function UploadFile() {
  $name_array = array();
  $count = count($_FILES['userfile']['size']);
  foreach($_FILES as $key=>$value)
  for($s=0; $s<=$count-1; $s++) {
          $_FILES['userfile']['name']=$value['name'][$s];
          $_FILES['userfile']['type']    = $value['type'][$s];
          $_FILES['userfile']['tmp_name'] = $value['tmp_name'][$s];
          $_FILES['userfile']['error']       = $value['error'][$s];
          $_FILES['userfile']['size']    = $value['size'][$s];
          $config['upload_path'] = './Debra2recording/';
          $config['allowed_types'] = 'zip';
          $config['max_size']    = '104857600';
          $this->load->library('upload', $config);
          $this->upload->do_upload();
          $data = $this->upload->data();
          $name_array[] = $data['file_name'];
  }
        $names= implode(',', $name_array);

        $this->session->set_flashdata('message', 'Your Data imported successfully..');
       redirect('debra_forbes2/index');
        print_r($names);

  } 
```

**下载压缩文件**

```
 public function downloadall()
      {

      $this->load->library('zip');
      $path = './Debra2recording/';
      $this->zip->read_dir($path);
      $this->zip->download('Debra2recording.zip');

      } 
```

# android - 应用程序退出后回调到 ResultReceiver 后未捕获的异常

> ID：11175015
> 
> 赞同：0
> 
> 时间：2012-06-24T04:46:23.410
> 
> 标签：android, android-intent, android-activity, android-dialog

我的应用程序的初始活动在其 onStart() 方法中将 Intent 发送到 IntentService。它在用于调用服务的 Intent 中放置一个 ResultReceiver（匿名内部类）。然后服务使用 ResultReceiver 将数据库传递给调用者。

这似乎工作正常，除非我启动应用程序，并且在服务调用仍在运行时，快速点击“返回”按钮返回主屏幕。一旦服务操作完成，它就会将结果发送到 ResultReceiver，其 onReceiveResult() 方法会创建一个进度对话框（使用 MyActivity.this 作为上下文）并继续执行其他操作。

由于活动已经完成，因此尝试创建进度对话框会生成异常：

```
06-23 23:29:14.114: E/AndroidRuntime(29570): FATAL EXCEPTION: main
06-23 23:29:14.114: E/AndroidRuntime(29570): android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@4051bf80 is not valid; is your activity running?
06-23 23:29:14.114: E/AndroidRuntime(29570):    at android.view.ViewRoot.setView(ViewRoot.java:557)
06-23 23:29:14.114: E/AndroidRuntime(29570):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
06-23 23:29:14.114: E/AndroidRuntime(29570):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
06-23 23:29:14.114: E/AndroidRuntime(29570):    at android.view.Window$LocalWindowManager.addView(Window.java:433)
06-23 23:29:14.114: E/AndroidRuntime(29570):    at android.app.Dialog.show(Dialog.java:265)
06-23 23:29:14.114: E/AndroidRuntime(29570):    at android.app.ProgressDialog.show(ProgressDialog.java:107)
06-23 23:29:14.114: E/AndroidRuntime(29570):    at android.app.ProgressDialog.show(ProgressDialog.java:90)
06-23 23:29:14.114: E/AndroidRuntime(29570):    at android.app.ProgressDialog.show(ProgressDialog.java:85)
06-23 23:29:14.114: E/AndroidRuntime(29570):    at com.myapp.SplashScreen.someMethod(SplashScreen.java:137) 
```

那么：为了避免上述情况，做这种事情的正确方法是什么？

在显示对话框之前，必须检查活动是否仍在每个回调中运行，这似乎非常繁琐。仅这一点就让我怀疑我走错路了。

编辑添加：

这实际上似乎只在我启动我的应用程序时发生，快速关闭它（通过返回按钮到主屏幕）然后快速再次启动它。如果我只是启动它并点击后退按钮然后坐在那里几秒钟，我永远不会遇到异常。

# javascript - 动态更新原型 selected.js

> ID：11175016
> 
> 赞同：2
> 
> 时间：2012-06-24T04:47:00.803
> 
> 标签：javascript, prototypejs, dom-events, prototype-chosen

我是 Prototype 的新手，我无法真正理解此处提供的极简主义文档[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

它说要动态更新 selected.js，我们应该使用这个片段

```
Event.fire($("form_field"), "liszt:updated"); 
```

我不明白的是，需要针对哪个元素`Event.fire`。在我的例子中，我有一个带有两个选择元素的动态表单。只有在用户选择第一个选择元素上的选项后，才会启用第二个选择元素。就像这个插图：

![仅在用户选择尺寸后才启用颜色](../Images/7d3f41c68520ff0ace87746ef5e147b9.png)

所以我只是在我的代码上试了一下。这里是：

```
// let say I want to make all .chzn-select element replaced by chosen.js
var el = $$(".chzn-select");

// this is the code to make all .chzn-select replaced by chosen.js
document.observe('dom:loaded', function(evt) {
     var select, selects, _i, _len, _results;
     if (Prototype.Browser.IE && (Prototype.BrowserFeatures['Version'] === 6 || Prototype.BrowserFeatures['Version'] === 7)) { return; }
     selects = el;  _results = [];
     for (_i = 0, _len = selects.length; _i < _len; _i++) {
        select = selects[_i];
        _results.push(new Chosen(select));
     }
}); 

// this is what I used to observe the change event of the .chzn-select element
el.invoke('observe', 'change', function() {
    // I have successfully updated all the .chzn-select element after the change of some other .chnz-select
    myOwnObjet.myOwnFunction(el);

    // now this is where I get confused, I want to update all the generated chosen.js selector
    Event.fire(el, "liszt:updated");
}); 
```

在那个例子中，那个 Event.fire 似乎根本不起作用......那么我在这里做错了什么？在用户选择尺寸选择后，我如何才能更新该 selected.js 版本的颜色选择以更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T08:29:44.677

在您对所有元素调用`observe`事件时，您将其用作当前元素，它不会反映数组中的实际元素。`.chzn-select``el`

试试这个：

```
el.invoke('observe', 'change', function(ev) {
    var nev = Event.element(ev);
    myOwnObject.myOwnFunction(nev);

    Event.fire(nev, 'liszt:updated');
}); 
```

**更新**

好的，经过彻底调查，我发现了问题，`event.simulate`没有被包含在内，我完全修复了代码，看看[这个小提琴](http://jsfiddle.net/epoch/ckA4k/)。

这是小提琴中使用的代码：

```
var selects;
document.observe('dom:loaded', function(evt) {
    selects = $$('select.chzn-select').inject($H(), function(hsh, sl) {
        hsh.set(sl.id, new Chosen(sl));
        return hsh;
    });

    selects.each(function(pair) {
        Event.observe($(pair.key), 'change', function(ev) {
            myOwnFunction($(pair.key), pair.value);
        });
    });
});

function myOwnFunction(select, chzn) {
    if (select.id === 'sl-color') {
        var size = $('sl-size');
        size.disabled = false;

        Event.fire(size, 'liszt:updated');             
    }
}
​ 
```

# android - textview中文本顶部的额外空间？

> ID：11175017
> 
> 赞同：3
> 
> 时间：2012-06-24T04:47:23.943
> 
> 标签：android, android-layout, android-relativelayout

我已经定义了这样的布局 -

`

```
<ImageView
    android:id="@+id/first_icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/square" />

<ImageView
    android:id="@+id/second_big_image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/first_icon"
    android:scaleType="fitXY"
    android:src="@drawable/square_big" />

<TextView
    android:id="@+id/line1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="#000000"
    android:layout_alignTop="@id/second_big_image"
    android:layout_toRightOf="@+id/second_big_image"
    android:text="AND Here is the text" /> 
```

`

在屏幕上我看到它是这样的。我不明白为什么文本顶部有一点空间。即使我将它对齐到第二张图像的顶部，它仍然没有对齐。我该怎么做？

![在此处输入图像描述](../Images/a34c7a1c38b4aba96cd9c885ee6e3f4a.png)

我已经试过了`android:alignParentTop="true"`，也`android:gravity="top"`。但似乎没有任何效果。可能这是 android textview 的行为，但我仍然想摆脱那个空间。

设置`android:layout_marginTop="-4dip"`使它看起来像我想要的。但这是正确的做法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-24T04:59:22.173

该空间只是字体的间距。它上面有一点空间，任何字体也是如此（在这种情况下，我猜是`4dp`）。

我能想到的实现您想要的（除了您尝试过的）的唯一方法是：

```
android:includeFontPadding="false" 
```

如果这不起作用，我会按照您现在的方式进行（使用负上边距）。

啊，字体和显示的乐趣！^_^

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T05:11:26.877

我认为文本视图没有问题，它附加到顶部（参见图像图像 Textview 已设置为红色 BG）。问题在于字体，你可以看到第二行也与第一行有差距，所以这个空间与字体相连，可以尝试其他自定义字体来检查这一点。

![在此处输入图像描述](../Images/add47e0b8604022dcdfe1f2f2e2bd7ef.png)

# php - 无法弄清楚这个 PHP 脚本

> ID：11175018
> 
> 赞同：0
> 
> 时间：2012-06-24T04:47:26.863
> 
> 标签：php, database, pagination, row

我是一个PHP新手，最近在一个论坛上发现了这个无数据库的分页脚本；但是，我不太明白脚本的哪一部分定义了一行（或项目），以及在为溢出创建新页面之前页面可以有多少行。有人可以帮我吗？

```
<?php
class display {
function pagination($rows, $per_page, $current_page, $page_link) {
    global $core,$C;

    // Create a Page Listing
    $this->pages = ceil(10 * $rows / $per_page);

    // If there's only one page, return now and don't bother
    if($this->pages == 1) {
        return;
    }

    // Pagination Prefix
            $output .= "<!-- Pagination by Dennis Pedrie. Used by Permission -->";
    $output = "Pages: ";

    // Should we show the FIRST PAGE link?
    if($current_page > 2) {
        $output .= "<a href=\"". $page_link ."?page=1/\" title=\"First Page\">&lt;&lt;</a>";
    }

    // Should we show the PREVIOUS PAGE link?
    if($current_page > 1) {
        $previous_page = $current_page - 1;
        $output .= " <a href=\"". $page_link .">page=". $previous_page ."/\" title=\"Previous Page\">&lt;</a>";
    }

    // Current Page Number
    $output .= "<strong>[ ". $current_page ." ]</strong>";

    // Should we show the NEXT PAGE link?
    if($current_page < $this->pages) {
        $next_page = $current_page + 1;
        $output .= "<a href=\"". $page_link ."?page=". $next_page ."/\" title=\"Next Page\">&gt</a>";
    }

    // Should we show the LAST PAGE link?
    if($current_page < $this->pages - 1) {
        $output .= " <a href=\"". $page_link ."?page=". $this->pages ."/\" title=\"Last Page\">&gt;&gt</a>";
    }

    // Return the output.
    return $output;
}
}
$display = new display;
echo $display->pagination("45", "15", "1", "http://theapplenewsreel.com/news/index.php");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T04:53:12.283

```
echo $display->pagination("45", "15", "1", "http://theapplenewsreel.com/news/index.php"); 
```

在第一个参数中传递您希望拥有的行数，在第二个参数中传递每页的行数

# python - 有条件的while循环来计算累积和？

> ID：11175022
> 
> 赞同：2
> 
> 时间：2012-06-24T04:48:37.813
> 
> 标签：python, while-loop, cumulative-sum

我想编写一个函数，它接受一个数字列表并返回累积和；也就是说，一个新列表，其中第 i 个元素是原始列表中前 i+1 个元素的总和。例如，的累积和`[1, 2, 3]`是`[1, 3, 6]`。

到目前为止，这是我的代码：

```
 def count(list1):
     x = 0
     total = 0
     while x < len(list1):
         if x == 0:
             total = list1[0]
             print total
             x = x +1
         else:
             total = list1[x] + list1[x -1]
             print total
             x = x + 1
     return total 

print count([1, 2, 3, 4, 7]) 
```

但是，它不起作用。

你能告诉我我做错了什么吗？我已经为此工作了相当长的一段时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T05:00:54.560

你可能有点过度思考这个过程。逻辑不需要真正分解成这样的案例测试。到目前为止，您拥有的部分是总计数器，但您应该只需要遍历列表中的每个值。不做有条件的while，用if..else

通常我不会只给出答案，但我觉得看到工作代码对你来说比尝试经历你迄今为止所拥有的额外和不必要的麻烦更有益。

```
def count(l):
    total = 0
    result = []
    for val in l:
        total += val
        result.append(total)
    return result 
```

我们仍然使用总计数器。我们为我们的结果创建了一个空列表。但是我们所要做的就是遍历列表中的每个项目，添加到总数中，然后每次都附加新值。没有条件，您不必担心 a 何时`while`会中断。您将循环遍历原始列表中的每个项目是一致的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T05:01:53.193

在这里，您将当前索引与最后一个索引相加并覆盖“总计”

```
total = list1[x] + list1[x -1] 
```

我猜你想要这样的东西，它会为下面的列表返回 31。

```
def count(list1):
     x = 0
     total = 0
     while x < len(list1):
         total += list[x]
         print total
         x = x + 1
     return total

list = [1, 2, 4, 8, 16]
print count(list) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T04:59:59.097

一种简单的方法可以是

```
>>> given_list = [1, 4, 5, 8]
>>> output_list = [sum(given_list[:num]) for num in range(len(given_list)+1)]
>>> output_list
[0, 1, 5, 10, 18]
>>> output_list[1:]
[1, 5, 10, 18]
>>> 
```

看看这是否适用于不同类型的列表。我把它留给你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T05:01:05.637

你没有做你想做的事`total`。

你设置`total`的是`list[x] + list[x+1]`. 您真的希望它是*所有*先前元素和当前元素的总和。

替换`total = list1[x] + list1[x-1]`为`total += list1[x]`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-24T05:58:55.390

这是我想出的解决方案：

```
def count(list1):
     total = 0
     old = 0
     for position, x in enumerate(list1):
         total = x + old
         old = x
         print total
     return

count([1,1,2,3,5,8,13]) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-24T06:05:33.997

你不需要编写这个函数。它被放置在 itertools 模块中：

```
>>> list(itertools.accumulate([1,2,3]))
[1, 3, 6] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-24T06:12:40.893

另一种解决方案，单线，但绝对有效（[http://ideone.com/qtwh7](http://ideone.com/qtwh7)），即使多线解决方案更清楚地了解这里实际发生的情况：

```
data = [3, 7, 22, -3, 5, -23, 16]

result = reduce(lambda a, b: a+[a[-1]+b], data, [0])[1:]

print result 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-28T03:26:28.027

我做了同样的练习，下面是我的解决方案。它仅使用基本`append`列表方法和*切片*列表运算符。

```
def accum(list):
    """Sequential accumulation of the original list"""
    result = []
    for i in range(len(list)):
        result.append(sum(list[:i+1]))
    return result 
```

# iphone - 核心数据预取不适用于某些关系

> ID：11175024
> 
> 赞同：1
> 
> 时间：2012-06-24T04:49:12.390
> 
> 标签：iphone, ios, cocoa-touch, core-data

我正在对 MessageObject 执行获取请求并预取以下内容：

```
[fetchRequest setRelationshipKeyPathsForPrefetching:
   [NSArray arrayWithObjects:@"tags", @"date", nil]]; 
```

tags 是多对多关系（即一个 Tag 可以有多个 Message，一个 Message 可以有多个 tag），而 Date 是一对一关系（即一个 Message 只能有一个 Date 而一个日期可以有很多消息）。

当我向下滚动表格时，我会同时访问标签和日期。我启用了 SQLite 调试，所以每次 Core Data 执行故障请求时，它都会出现在日志中。由于某种原因，没有预取 Date 属性，因为每次滚动时，我都会得到`CoreData: annotation: fault fulfilled from database for : 0x85bc7b0 <x-coredata://736D04C4-7DB3-40B7-B208-79B5DFD68260/MBDate/p61>`

但是，这不会出现在标签中，只有日期。如果我不预取 Tags 属性，那么当我滚动时，Tags 会显示相同的消息，所以我知道预取正在工作，只是不适用于 Date 属性。

关于预取，我有什么不明白的吗？Date 对象有一个字符串属性，在我的 cellForRow 中，我访问了这个字符串属性，由于某种原因，这会导致故障触发（即使它应该已经实现，因为它是预取的。）我误解了什么吗？

# datagrid - Dojo Datagrid - 以编程方式设置选定行的样式

> ID：11175026
> 
> 赞同：2
> 
> 时间：2012-06-24T04:49:57.793
> 
> 标签：datagrid, dojo, dojox.grid, dojox.grid.datagrid

是否可以以编程方式设置 Datagrid 的选定行的样式？

任何人都可以提供一个片段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:12:44.873

试试这个（这是一个修改参考指南示例[的小提琴）：](http://jsfiddle.net/seeds/rjRAA/2/)

```
var grid = new dojox.grid.DataGrid({
    id: 'grid',
    store: store,
    structure: layout,
    rowSelector: '20px',
    onClick: function() {
        // ( selection.selected is array for multiple)
        var index = this.selection.selectedIndex,
        // typically 1 here, mess with it if nogo on solution
        viewindex = 1,
        RAWROWNODE = this.views.views[viewindex].rowNodes[index]

    }
}, document.createElement('div')); 
```

您还可以查看网格组件使用的样式表。

```
.dojoxGridRow,
.dojoxGridRowOdd,
.dojoxGridRowSelected {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:18:06.407

为什么不简单地覆盖正确的 css 类？否则你可能想看看 onStyleRow 和 styleRowState 函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:06:10.463

尝试这个

```
 dojo.connect(grid, 'onStyleRow', this, function (row) {
    if (grid.selection.selectedIndex == row.index) {
       row.customStyles += "color: red;";            
    }

    grid.focus.styleRow(row);
    grid.edit.styleRow(row);
}); 
```

# php - 如何在自定义组件中添加 JomSocial 顶部菜单

> ID：11175028
> 
> 赞同：0
> 
> 时间：2012-06-24T04:50:07.697
> 
> 标签：php, menu, joomla2.5

我正在开发一个带有 JomSocial 组件的网站。我开发的组件很少。

我想在我开发的comopments 中添加顶部菜单，例如个人资料、照片、恶魔、组等...菜单。

请帮助我如何在我开发的组件中添加这些菜单。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T02:13:48.197

我相信这可能会对您有所帮助[http://www.jomsocial.com/support/docs/item/779-Welcome-to-MyBlog!.html](http://www.jomsocial.com/support/docs/item/779-Welcome-to-MyBlog!.html)

# javascript - jQuery JSONP 没有调用回调

> ID：11175029
> 
> 赞同：9
> 
> 时间：2012-06-24T04:50:21.410
> 
> 标签：javascript, jquery, jsonp

我对 jsonp 和 jquery 有一些问题。

这是我的代码 -

```
var myCallback = function(data) {
  console.log(data);
};

$.ajax({
  url: my_url,
  type: 'GET',
  dataType: 'jsonp',
  jsonp: 'callback',
  jsonpCallback: 'myCallback'
}); 
```

jQuery`?callback=myCallback&_=1340513330866`向 my_url 添加了类似的内容，并且从 my_url 返回的数据是`myCallback('abcd')`- 尽管实际上它会返回一些 HTML 代码而不是`abcd`.

问题：`abcd`没有通过`myCallback`. 那我做错了什么？我的印象是返回的数据将在脚本标签内执行？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-24T05:32:33.573

如果您使用自己的函数，则必须将其显式声明为**global**。例如：

```
window.myCallback = function(data) {
  console.log(data);
}; 
```

[**演示**](http://jsfiddle.net/LwuPL/)

* * *

**解释**

响应成功的 JSONP 请求而应调用的每个函数都必须是全局的。jQuery 也在这样做。这是因为 JSONP 只不过是包含一个（动态生成的（大部分时间））带有`<script>`标签的 JavaScript 文件，它只包含一个函数调用。由于每个脚本都是在全局范围内评估的，因此调用的函数也必须是全局的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-16T20:03:48.907

1）从被调用的方法中移动单引号（如 Umesh Aawte 所写）

2）使回调全局

3）您的回调现在是 jQuery 的一部分，所以**这**是您获取数据的方式

此后的解决方案：（使用jQuery：v3.3.1，节点：v6.10.0，快递：v4.16.3

```
window.myCallback = function() {
  console.log(this.data);
}

$.ajax({
  url: my_url,
  type: 'GET',
  dataType: 'jsonp',
  jsonp: 'myCallback',
  jsonpCallback: myCallback
}); 
```

就是这样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T04:53:29.197

从被调用的方法中删除单引号这将起作用，请在此处检查代码，

```
var myCallback = function(data) {
      console.log(data);
    };

$.ajax({
  url: my_url,
  type: 'GET',
  dataType: 'jsonp',
  jsonp: 'callback',
  jsonpCallback: myCallback
}); 
```

试试这个[小提琴](http://jsfiddle.net/bA84y/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T06:23:43.863

为什么不简单：

```
$.getJSON(my_url, myCallback); 
```

这将处理函数范围，看起来更简单

# javascript - Backbone.js 视图，dom 访问不起作用

> ID：11175030
> 
> 赞同：1
> 
> 时间：2012-06-24T04:50:23.457
> 
> 标签：javascript, backbone.js

我们正在使用 Django 框架开发一个 Web 应用程序，并且我们正在使用 Backbone.js 进行 MV 分解。我们有一个视图并在其上调用 render ，它将 div#main 替换为新内容，如下所示：

```
var GoalListView = Backbone.View.extend({
el: $('#main'),

template: _.template($("#swap").html()),

render: function() {
  $(this.el).html(this.template());
  return this;
}

}); 
```

这如我们预期的那样工作（使用模板的内容更改页面），但是在我们创建的下一个视图中，我们无法访问这些新的 DOM 元素中的任何一个。

```
 el: $('#newId') 
```

给我们未定义的，即使我们在我们交换的模板中有一个 id 为 newId 的元素。模板交换此时已经发生，那么为什么我们无法访问新元素？

编辑：谢谢，我同意这是一个时间问题。但是对于事件呢？

```
events: {
    'keypress #goal-entry': 'createOnEnter'
 }, 
```

那么没有选项可以在 DOM 中搜索 elem 以将事件附加到，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:43:49.680

如果您将`$('#newId')`它分配给`el`. 在我们的例子中，如果你插入用于第二个视图的元素，你不需要最初定义它，但必须将它传递给 initialize()：

```
var SomeView = Backbone.View.extend({
  // do NOT define el or $el or id here
  initialize: function($el) {
    this.$el = $el;
    ... go on do more things...
  }
}); 
```

然后从应用程序中需要的任何位置初始化第二个视图：

```
var someView = new SomeView($('#someID')); 
```

# java - 从调用的 java 方法中获取输出流

> ID：11175032
> 
> 赞同：0
> 
> 时间：2012-06-24T04:50:51.103
> 
> 标签：java

无论如何从我的程序中调用的类的方法获取或拦截输出流（特别是 System.out）？

我正在创建一个`Method`名为 的新对象`main`，`URLClassLoader`用于加载类，然后`main.invoke();`使用适当的参数进行调用。

我希望能够从该方法的执行中捕获输出，它仍然显示在屏幕上是可以的，但我也需要能够处理输出。

注意：此方法实际上是一个将连续运行的服务器应用程序。

如果需要进一步澄清，请告诉我，如果这样的事情是可能的，请告诉我。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:25:57.010

假设您正在谈论 System.out 或 System.err 输出流......

实现您建议的最佳方法是将 OutputStream 作为参数传递。这可能是`System.out`但可以很容易地更改为您想要的任何内容。

在不传递参数的情况下执行此操作的一种方法是将默认 System.out 替换为您自己的，它会检查堆栈以确定从何处调用它。我建议你这样做，除非没有其他选择。例如，您无法访问您正在调用的方法的代码。

如果您在谈论其他一些输出流，则必须将使用的输出流的代码替换为允许您跟踪输出的代码。这是最骇人听闻的解决方案，但它会起作用。

# iphone - 是否可以在一个按钮中有 2 个标签

> ID：11175034
> 
> 赞同：0
> 
> 时间：2012-06-24T04:51:02.727
> 
> 标签：iphone, ios5, xcode4.3

这是我的按钮

```
- (IBAction)startBtn:(id)sender {

} 
```

我的问题是，当我单击带有 START 标签的 startBtn 时，该过程已启动，但标签更改为 CANCEL 以取消该过程。我不想制作 2 个按钮，即 START 和 CANCEL，我只想将它们放在一个按钮中，即 startBtn。

有什么帮助吗？谢谢你为我分享你的知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T05:50:39.867

```
// set titles in viewDidLoad Method or in interface builder
[button setTitle:@"Start" forState:UIControlStateNormal];
[button setTitle:@"Cancel" forState:UIControlStateSelected];

- (IBAction)startBtn:(id)sender {
    UIButton *button = sender;
    button.selected = !button.selected;

    if (button.slected) {
       // start process
    }
    else {
      // stop process
   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T04:57:35.980

```
- (IBAction)startBtn:(id)sender {
     [button setTitle:@"Cancel" forState:UIControlStateNormal];
}

- (IBAction)cancelBtn:(id)sender {
     [button setTitle:@"Start" forState:UIControlStateNormal];
} 
```

# iphone - 从 NSDictionary 中提取价值

> ID：11175035
> 
> 赞同：-1
> 
> 时间：2012-06-24T04:51:11.550
> 
> 标签：iphone, objective-c, ios, ipad

我有一个名为 data 的 NSDictionary ，当我使用 NSLog 打印时，它给了我：

```
DATA IS {
    aps =     {
        alert = "aherlambang liked your photo";
        badge = 1;
    };
    "media_id" = "220516456473412852_29088696";
} 
```

我试图通过执行以下操作来提取 media_id：

```
 NSLog(@"DATA IS %@ MEDIA ID IS %@", userInfo, [userInfo valueForKey:@"media-id"]); 
```

但它总是给我null。为什么是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T04:55:44.597

您在数据中的键是`"media_id"`，并且您正在尝试使用该键`"media-id"`。

更改`"media-id"`为`"media_id"`，您应该能够阅读您的字典。

```
 NSLog(@"DATA IS %@ MEDIA ID IS %@", userInfo, [userInfo valueForKey:@"media_id"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T04:59:24.433

也许是因为您的字典被命名为数据并且您正在访问 userIfno？

# javascript - 基于事件类型的单元格的jQuery Datepicker背景颜色

> ID：11175036
> 
> 赞同：3
> 
> 时间：2012-06-24T04:51:14.000
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

我需要根据活动类型或当天是否已订满，以不同的颜色显示不可用的日期。

下面的示例从数据库中获取日期并将它们作为数组传递给 JavaScript 目前我在数组中传递四个参数， `[2012,7, 15, 'Some events']`例如年、月、日和年。我想更改此数组以将第五个参数作为 color 传递`[2012,7, 15, 'Some events', 'Red']`。这样我就可以根据事件类型更改单元格的颜色。

我不确定我将如何更改下面的脚本以使其工作。例如，我已经寻找但找不到匹配的。我将不胜感激这方面的帮助，因为我不是脚本大师。

```
function BindEvents()
{
//Script for Calendar
        var holiDays = [[2012,7, 15, 'Some events'],[2012,7, 4, 'Some Event'],[2012,7, 1, 'Full Booked'],[2012,7, 5, 'Full Booked']];
        $(function () {
            $("#txtBookDate").datepicker({
                dateFormat: "yy-mm-dd",
                minDate: "-0d",
                maxDate: "+90d",
                firstDay: 0,
                beforeShowDay: noWeekendsOrHolidaysOrBlockedDates
            });

            function noWeekendsOrHolidaysOrBlockedDates(date) {
                //var noWeekend = jQuery.datepicker.noWeekends(date);
                return setHoliDays(date);
            }

            // set holidays function which is configured in beforeShowDay
            function setHoliDays(date) {
                var day = date.getDay();
                if (day == 5 || day ==6) return [false, ''];

                for (i = 0; i < holiDays.length; i++) {
                    if (date.getFullYear() == holiDays[i][0]
                        && date.getMonth() == holiDays[i][1] - 1
                        && date.getDate() == holiDays[i][2]) {
                        return [false, 'holiday', holiDays[i][3]];
                    }
                }
                return [true, ''];
            }
        });
}

BindEvents(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T07:21:57.050

来自[精美手册](http://api.jqueryui.com/datepicker/#option-beforeShowDay)：

> **演出前**
> 
> 一个以日期为参数的函数，并且必须返回一个包含以下内容的数组：
> 
> *   `[0]`: `true`/`false`表示这个日期是否可选
> *   `[1]`: 添加到日期单元格或`""`默认显示的 CSS 类名
> *   `[2]`：此日期的可选弹出工具提示
> 
> 该函数在日期选择器中的每一天在显示之前都会被调用。

因此，特定颜色的返回值没有空间。但是，数组的第一个元素可以包含多个类名，因此您可以通过 CSS 来实现。

如果您希望某个特定的假期以红色文本显示，那么您可以在您的`beforeShowDay`:

```
return [false, 'holiday red', holiDays[i][3]]; 
```

然后添加一点点CSS：

```
td.red span.ui-state-default {
    color: #f00;
} 
```

让`red`班级做点什么。

演示：http: [//jsfiddle.net/ambiguous/pjJGf/](http://jsfiddle.net/ambiguous/pjJGf/)

# c++ - 带有偏移量的C ++冒泡排序？

> ID：11175039
> 
> 赞同：1
> 
> 时间：2012-06-24T04:52:12.270
> 
> 标签：c++

首先，这是一个家庭作业。我正在尝试在 C++ 中使用偏移量创建一些气泡排序函数。该函数必须采用带有计数元素的偏移量的数组输入。

例如：`a[5] = {90, 9, 2, 10, 5}`-> `bubbleSort(a, 1, 4)`->`{90, 2, 5, 9, 10}`

目前这是我的代码的样子：

```
void bubbleSort(int arr[], int offset, int count) {
    bool swapped = true;
    int pivot = offset;
    while (swapped) {
        swapped = false;
        pivot++;
            for (offset ; offset < count - pivot; offset ++) {
                if (arr[offset] > arr[offset+1]) {
                    arr[offset] ^= arr[offset+1];
                    arr[offset+1] ^= arr[offset];
                    arr[offset] ^= arr[offset+1];
                    swapped = true;
                }
            }
    }
} 
```

我认为我的偏移量检查超出了索引，你能告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T05:04:20.643

与其纠结于偏移，不如想想这样的问题：

```
void bubbleSort(int arr[], int offset, int count)
{
   StandardBubbleSort(&arr[offset], count);
}

void StandardBubbleSort(int arr[], int count)
{
// the standard algorithm from your text book
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T05:38:47.213

如果它适合您，请尝试此代码。

```
void bubbleSort(int arr[], int offset, int count) {  
    offset--;

    for (; offset < count; offset ++) 
        for(int j=0;j<count-1;j++)
        {
            if (arr[offset] > arr[offset+1]) {
                int temp=arr[offset];
                arr[offset]=arr[offset+1];
                arr[offset+1]=temp;
            }
        }
} 
```

# node.js - 脚本在 Webstorm 中失败，但不是来自终端

> ID：11175041
> 
> 赞同：13
> 
> 时间：2012-06-24T04:53:10.363
> 
> 标签：node.js, terminal, phantomjs, webstorm

我有一个 nodejs 脚本，它使用 phantomjs-node 来抓取网页。当我从终端窗口运行时，它工作正常，但当我通过 Node JS 应用程序的运行配置从 Webstorm 内部运行时，它就不行了。

什么可能导致 Webstorm 中的错误？

在注释掉 .bash_profile 的内容后，我已经尝试从终端运行脚本，它仍然有效。我还检查了`process.env`另一个示例脚本中的内容，发现 Webstorm 与终端中的值完全不同。

剧本：

```
var phantom = require('phantom');
phantom.create(function(ph) {
    return ph.createPage(function(page) {
        return page.open("http://www.google.com", function(status) {
            console.log("opened google? ", status);
            return page.evaluate((function() {
                return document.title;
            }), function(result) {
                console.log('Page title is ' + result);
                return ph.exit();
            });
        });
    });
}); 
```

终端输出（效果很好！）：

```
opened google?  success
Page title is Google 
```

Webstorm 控制台输出（失败）：

```
/usr/local/bin/node phantom.js
phantom stderr: execvp(): No such file or directory

Process finished with exit code 0 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-25T06:40:19.943

Webstorm 确实设置了一个 PATH 变量，但它与您的应用程序在终端中运行时获得的 PATH 变量不同。我的解决方案，一个黑客：

1.  键入`node`以访问 REPL
2.  跑`process.env`
3.  复制 PATH 值的内容
4.  向 Webstorm 添加一个名为 PATH 的环境变量，该变量使用该值。它将覆盖 Webstorm 为您的应用程序提供的默认 PATH 变量。

完毕！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:55:15.080

如果您使用的是 Mac，请参阅[http://devnet.jetbrains.net/docs/DOC-1160](http://devnet.jetbrains.net/docs/DOC-1160)。本文档最初是为 RubyMine 编写的，但也适用于 WebStorm。

# asp.net-mvc - 单击jquery对话框中的按钮时如何调用Action？

> ID：11175047
> 
> 赞同：0
> 
> 时间：2012-06-24T04:54:06.527
> 
> 标签：asp.net-mvc, jquery, jquery-dialog

我使用下面的代码创建了 jQuery ui 对话框。它工作得很好。但是，关闭按钮不起作用。我在对话框中添加了“添加交易”按钮，当我单击按钮时，我想调用控制器操作来添加交易，同时对话框不应该消失，它应该显示相同的内容。你对这个问题有什么建议吗？

```
<script type="text/javascript">
 $(function () {
     $('#divtrade').dialog({
         autoOpen: false,
         width: 1400,
         height: 600,
         resizable: false,
         title: 'New Trades',
         modal: true,
         buttons: {
             "Close": function () {
                 //close button not working
                 $('#divtrade').dialog("close");
             },
             "Add Trade": function () {
                   //how to invoke controller to add trade using jquery, at the same time
                   //dialog should not disappear, it should show the previous view
             }
         }
     });
 });

$('.newtrade').click(function () {
    $('#divtrade').load('@Url.Action("NewTrade","Trade")').dialog('open');

});
   </script>

  <div id="divtrade"  style="display:none;"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T10:32:10.380

添加这样的内容：

```
$.ajax(
   url:'@Url.Action("YourAction","YourController")',
   success : function(data){
      $('#divtrade').html(data);
      $('#divtrade').show();
      // You may consider to close the dialog after loading the content
      $('#divtrade').dialog("close");
   }
); 
```

如果您想了解有关[jQuery Ajax的完整详细信息](http://api.jquery.com/jQuery.ajax/)

# arduino - 在 Arduino 中显示负数

> ID：11175049
> 
> 赞同：1
> 
> 时间：2012-06-24T04:54:40.510
> 
> 标签：arduino, format

我和我的朋友正在 Arduino 板上对数字温度计进行接线/编码，我正在编写代码。我们的温度计工作得很好，基本温度数据进入我们用于输出的 4 位 7 段 LED 屏幕。我正在尝试编写代码以显示负（低于零）温度，并且无法获得正确的输出。它不是输出负号，而是输出 8。

这是循环（）方法：

```
void loop(void) {
 int temp = getTemp();
 boolean neg = false;
 if (temp < 0) {
   // Since the temperature is negative, multiplying it by -2 and adding it
   // to itself gives us the absolute value of the number
   temp += (temp * (-2));
   // We set the neg boolean to true, indicating that we're dealing with a negative number
   neg = true;
 }
 displayNumber(temp, neg);
} 
```

这是（截断的） displayNumber() 方法：

```
void displayNumber(int toDisplay, boolean negative) {

int num = toDisplay;

// The digits are 1-4, left to right
for(int digit = 4; digit > 0 ; digit--) {
//Turn on a digit for a short amount of time
switch(digit) {
case 1:
  // The leftmost digit only needs to be on for temps 100.0 or above, 
  // or to display the negative sign for temps -10.0 or below
  if (num >= 1000 || (num >= 100 && negative == true)) {
    digitalWrite(digit1, HIGH);
    }
  if (num >= 100 && negative == true) {
    lightNumber(11);
  }
  break;
case 2:
  // Only needs to be on for temps 10.0 degrees or above, or 
  // for single-digit subzero temps.
  if (num >= 100 || negative == true) {
    digitalWrite(digit2, HIGH);
  }
  if (num < 100 && negative == true) {
    lightNumber(11);
  }
  break;
case 3:
  digitalWrite(digit3, HIGH);
  break;
case 4:
  digitalWrite(digit4, HIGH);
  break;
}

//Turn on the right segments for this digit
lightNumber(toDisplay % 10);
toDisplay /= 10;

//Turn off all segments
lightNumber(10); 

//Turn off all digits
digitalWrite(digit1, LOW);
digitalWrite(digit2, LOW);
digitalWrite(digit3, LOW);
digitalWrite(digit4, LOW);    
}
} 
```

...并且 lightNumber() 方法的代码为数字 0-9 正确打开或关闭段，其中 10 表示所有段关闭，11 仅表示中心段打开，用于负号。它使用带有整数参数的 switch 语句作为开关。问题是，当我向 displayNumber() 发送一个负值，而不是数字前面的负号时，我得到一个 8 显示在负号应该是的位置。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:56:05.313

我认为您在考虑*if*语句。在您的版本中，当数字为负时，两个*if*语句都会执行。尝试这个：

```
case 1:
  // The leftmost digit only needs to be on for temps 100.0 or above, 
  // or to display the negative sign for temps -10.0 or below
  if (num >= 1000 ){
    digitalWrite(digit1, HIGH);
    }
  if (num >= 100 && negative == true) {
    lightNumber(11);
  }
  break; 
```

# asp.net-mvc-3 - 如何使用 Razor 从脚本块中显示？

> ID：11175051
> 
> 赞同：1
> 
> 时间：2012-06-24T04:55:04.293
> 
> 标签：asp.net-mvc-3, razor

我正在**尝试**学习 Razor/MVC3 并且在使用这个局部视图 DisplayTemplate 时遇到了一些麻烦。

```
@{
    DateTime? date = ViewData.Model;

    if(date.HasValue) {
        date.Value.ToShortDateString();
    }
} 
```

这就是我想要做的。显然我做得不对，因为它不起作用。我已经尝试了几种我能想到的不同方式，但只收到随机错误。这个方法根本不会返回任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T05:20:32.910

代码块内的每个地方强制切换到文本模式都使用`<text></text>`代码段。

```
@{
    DateTime? date = ViewData.Model;
    string displayDate = "";

    if(date.HasValue) {
         <text>
               @date.Value.ToShortDateString()
         </text>
    }
} 
```

干杯！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T05:04:44.393

您不会使用这种语法向页面呈现任何内容；该代码所做的只是声明一个变量*date*并将其设置为模型中的一个值。尝试这样的事情......

```
@{
    DateTime? date = ViewData.Model;
    string displayDate = "";

    if(date.HasValue) {
        displayDate = date.Value.ToShortDateString();
    }
}

@displayDate 
```

或者更简单，就是这样：

```
@if (ViewData.Model.HasValue) 
{
    <span>@ViewData.Model.ToShortDateString()</span>
} 
```

# ruby-on-rails-3 - Rails collection_select 默认选项？

> ID：11175053
> 
> 赞同：30
> 
> 时间：2012-06-24T04:55:38.553
> 
> 标签：ruby-on-rails-3, collections

所以我正在整理一个集合选择。

```
<%= collection_select :PriceRange, "7", PriceRange.where('value > 0'), :value, :name %> 
```

我正在尝试将默认选择设置为 ID 为 7 的 PriceRange，这是独立的，不依赖于任何用户设置，它是表单的一部分，通过价格范围更改页面上显示的项目.

```
* * * UPDATED EFFORTS * * * 
```

我添加了

```
@price_higher = PriceRange.find(7) 
```

到处理视图的控制器，并添加

```
, {:selected => @price_higher.value} 
```

在 collection_select 中。它似乎可以解决问题，尽管在 collection_select 中寻找一种不太复杂的方法来完成这一切。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-24T04:59:37.850

添加`:selected`选项。

例子：

```
collection_select(:post, :author_id, Author.all, :id, :name_with_initial, {:selected => "whatever_value"}) 
```

示例取自：[ApiDock](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/collection_select)

在你的情况下：

```
<%= collection_select :PriceRange, "7", PriceRange.where('value > 0'), :value, :name, {:selected => "whatever"} %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-25T12:21:27.107

如果要从数据库中选择默认值，请使用，

```
collection_select(:post, :author_id, Author.all, :id, :name_with_initial, {:selected => @authors.first}) 
```

* * *

如果要提示消息，请使用，

```
collection_select(:post, :author_id, Author.all, :id, :name_with_initial, {:prompt => "Select Post"}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-21T21:55:02.930

```
collection_select(:post, :author_id, Author.all, :id, :name_with_initial, {:selected => @authors.first}) 
```

这可确保值始终来自获取数据的数据库，并且可以在数据库更改时更改。

# java - HashMap扩展AbstractMap为什么还要实现Map？

> ID：11175058
> 
> 赞同：19
> 
> 时间：2012-06-24T04:56:27.577
> 
> 标签：java, inheritance, hashmap

> **可能重复：**
> [Java.util.HashMap — 为什么 HashMap 扩展 AbstractMap 并实现 Map？](https://stackoverflow.com/questions/2294519/java-util-hashmap-why-hashmap-extends-abstractmap-and-implement-map)

在java中实现`HashMap<K,V>`我们需要实现`Map<K,V>`。

但是，当我在 java 类中进行更多调试时，似乎...... java 将`HashMap`类定义如下。

`public class HashMap<K,V> extends AbstractMap<K,V> implements Map<K,V>, Cloneable, Serializable`

同时我看到`public abstract class AbstractMap<K,V>`实现`Map<K,V>`它也实现了接口`Map<K,V>`。

`Map<K,V>`如果抽象类实现了接口，那么在类级别实现的原因是什么`HashMap`？

根据我的理解`HashMap`，类具有继承自`AbstractMap`这些方法的所有方法，可以根据`HashMap`要求覆盖这些方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T05:20:12.427

它可能只是为了让事情变得更加明显。`HashMap`你基本上可以直接从实现`Map`接口的那个单一类的代码中看到。是的，它已经 extends 了`AbstractMap`，但这可能只是一个实现细节。

再次实现接口并没有错。这不会改变代码的编译方式，但肯定会有所帮助，因为您可以立即看到它。您不必先爬上类层次结构或加载 API 文档。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-24T06:49:38.983

在这种特殊情况下，它纯粹是为了记录目的；即让读者清楚这**是**一个`Map`实现。我很确定这种冗余的成本可以忽略不计。

（而且，是的，你的理解是正确的。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-24T05:21:17.630

“implements Map”是可选的，通常用于帮助人们阅读 HashMap 实现 Map 的接口方法以及 AbstractMap 的抽象方法的代码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-24T05:28:51.210

我相信这背后的原因是Java中的抽象类不需要声明/实现接口中的所有方法。因此

```
public interface MyInterface{
  void a();
  void b();
  void c();
} 
```

以下接口的抽象实现是有效的。

```
public abstract class AbstractClass implements MyInterface {
  public void a() {}
  public void c() {}
  public void d() {}
} 
```

因此，我相信为了明确`HashMap`实现抽象类未实现的方法，它被显示为实现接口`Map`，而这样做是完全可选的，因为抽象类的任何实现都需要在抽象中实现所有方法类或派生的基类。因此在上面的示例中，抽象类的有效实现是

```
public class MyClass extends Abstract{
      public void a() {}
      public void c() {}
      public void b() {}  //if you dont implement this, compile error
      public void d() {}
    } 
```

你也可以重写如下：

```
public class MyClass extends Abstract implements MyInterface {
      public void a() {}
      public void c() {}
      public void b() {}
      public void d() {}
    } 
```

# silverlight-4.0 - translatetransform 和 zindex

> ID：11175060
> 
> 赞同：1
> 
> 时间：2012-06-24T04:56:40.770
> 
> 标签：silverlight-4.0, z-index

我有一个 Silverlight 项目，它以平移/缩放画布的形式使用平移和缩放变换。我在平移/缩放画布周围放置了两列，在顶部放置了一列。我在所有内容上都设置了 z-index，但我的翻译转换似乎超出了我的外部列的顶部。这是翻译转换的正常行为吗？是否有解决方法或我可以做些什么来将多余的对象从屏幕上“剪掉”，直到它们被拖回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:16:10.800

我重新安排了布局以允许使用固定大小的画布，然后使用剪贴蒙版隐藏其余部分。它适用于我现在需要的东西。

```
 <Canvas.Clip>
                <RectangleGeometry Rect="0, 0, 800, 600"/>
            </Canvas.Clip> 
```

# php - 在 mysqli 中插入数据不起作用

> ID：11175061
> 
> 赞同：0
> 
> 时间：2012-06-24T04:57:33.843
> 
> 标签：php, forms, insert, mysqli

我想知道为什么我的插入语句不起作用。数据库中没有显示任何记录，也没有显示任何错误。这是代码

```
<?php 
    if(isset($_POST['submit'])){
        $username = trim($_POST['username']);
        $password = trim($_POST['password']);
        $conf_pass = trim($_POST['conf_password']);
        $email = trim($_POST['email']);
        require_once('./includes/Db/CheckPassword.php');
        $check_pwd = new Db_CheckPassword($password);
        $passwordOK =$check_pwd->check();
        $password_match = Db_CheckPassword::confirmPassword($password,$conf_pass);
        require_once('./includes/Db/CheckUsername.php');
        $check_user = new Db_CheckUsername($username,$conn);
        $userOK = $check_user->check();

        if($userOK && $passwordOK && $password_match){
            $hashedpass = crypt($password);

            $sql = "INSERT INTO accounts ('username','password','email') VALUES('{$username}','{$hashedpass}','{$email}')";
            $conn->query($sql);
        }else{
            $pass_error =  $check_pwd -> getErrors();
            $user_error  = $check_user->getErrors();
        }
    }
?> 
```

这是我将记录插入数据库的地方

```
if($userOK && $passwordOK && $password_match){
                $hashedpass = crypt($password);

                $sql = "INSERT INTO accounts ('username','password','email') VALUES('{$username}','{$hashedpass}','{$email}')";
                $conn->query($sql); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T05:54:47.803

在 mySQL 中，标识符引号字符是反引号，因此将列名周围的单引号替换为反引号：

```
$sql = "INSERT INTO accounts (`username`,`password`,`email`)    
                     VALUES('{$username}','{$hashedpass}','{$email}')"; 
```

# apache-flex - FlashBuilder 4.6/AIR - 强制菜单显示在冰淇淋三明治中

> ID：11175069
> 
> 赞同：0
> 
> 时间：2012-06-24T04:58:55.857
> 
> 标签：apache-flex, air, flash-builder, flex4.6

我正在使用 AIR for Android 在 FlashBuilder 4.6 中创建一个应用程序。我在我的应用程序中使用菜单按钮来实现附加功能。在 ICS 中，菜单按钮并不总是显示在每个应用程序和其他应用程序中。如何强制在运行 ICS 的手机上显示菜单按钮？这显然不是姜饼等手机的问题，因为我相信它们都有一个指定的菜单硬件按钮。有没有办法使用 AIR/FB 来强制显示菜单按钮？

提前致谢。

# javascript - 如何在 Three.js 中将 2d 路径转换为 3d 形状？

> ID：11175079
> 
> 赞同：4
> 
> 时间：2012-06-24T05:00:40.270
> 
> 标签：javascript, three.js, webgl

我需要有这个的 3d：http: [//jsfiddle.net/dAdKm/](http://jsfiddle.net/dAdKm/)
但是当我使用这个代码时：

```
var shape = new THREE.Shape();
shape.moveTo(20,20);
shape.bezierCurveTo(20, 100, 150, 100, 150, 20);
shape.moveTo(20,20);
shape.lineTo(20, 100);
shape.lineTo(150, 100);
shape.lineTo(150, 20);

var shape3d = shape.extrude(extrudeSettings);
var shapePoints = shape.createPointsGeometry();
var shapeSpacedPoints = shape.createSpacedPointsGeometry();
var material = new THREE.MeshBasicMaterial({ color: 0x0000ff });
var shapeMesh = new THREE.Mesh(shape3d, material); 
```

结果与 2d 上下文结果不同，为什么？问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T09:10:48.187

形状从 (20, 20) 开始，到 (150, 20)，然后“跳”回 (20, 20)。

避免跳跃，试试这个形状定义：

```
var shape = new THREE.Shape();
shape.moveTo(20,20);
shape.bezierCurveTo(20, 100, 150, 100, 150, 20);
shape.lineTo(150, 100);
shape.lineTo(20, 100);
shape.moveTo(20,20); 
```

# jquery-selectors - 如何在jQuery中的特定div中获取所有带有类的复选框？

> ID：11175080
> 
> 赞同：0
> 
> 时间：2012-06-24T05:00:46.063
> 
> 标签：jquery-selectors

```
<div id="table">
<input type="checkbox" class="db2applforce kon" value="15010" title="to be forced"> 
```

这些都不起作用。它总是返回 0 而不是正确的数字。

```
alert($("#table").find(".kon :checkbox").length);

alert($("#table").find(":checkbox").find(".kon").length); 
```

我可以进行“一体式”查询吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T05:11:16.717

Radek，在您的选择器中，.kon 和 :checkbox 之间不应有空格。这试图找到一个带有 kon 类的 div 并在其中找到**一个**复选框。由于您的复选框**属于**kon 类，请改为执行以下操作：

```
alert($("#table").find(".kon:checkbox").length); 
```

这产生了正确的答案。此外，您应该始终关闭您的 div，即：

```
<div id="table">
<input type="checkbox" class="db2applforce kon" value="15010" title="to be forced">
</div> 
```

为了完整和更清楚起见，如果您的 HTML 块看起来像这样：

```
<div id="table">
    <div class='kon'>
        <input type="checkbox" class="db2applforce" value="15010" title="to be forced">
    </div>
</div> 
```

那么你上面的第一个选择器会起作用，如果交换你的第二个选择器会起作用：

```
alert($("#table").find(".kon").find(":checkbox").length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T05:12:52.510

看来您正在寻找`#table`div 中所有复选框的计数。

```
alert($('#table input:checkbox.kon').length); 
```

## HTML：

```
<div id="table">
    <input type="checkbox" class="db2applforce kon" value="15010" title="to be forced" checked />
    <input type="checkbox" class="db2applforce kon" value="15020" title="to be forced" />
    <input type="text" class="db2applforce kon" value="15020" title="to be forced" />    
</div> 
```

## 结果：

```
2 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/nDp6e/)**

# android - 监控 Android 和 iPhone 上的实时应用程序性能

> ID：11175086
> 
> 赞同：2
> 
> 时间：2012-06-24T05:02:19.883
> 
> 标签：android, iphone, monitoring

是否有任何工具/服务可以在 iPhone 或 Android 应用程序在设备上运行时记录性能数据（打开时间、事件等）？[例如，像新的遗物，但实际上在手机上运行特定的应用程序。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T23:45:19.367

**iOS**

仪器 [http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-time-profiling-with-instruments/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-time-profiling-with-instruments/)

**安卓**

Traceview 来分析 Java 代码 [http://developer.android.com/tools/debugging/debugging-tracing.html](http://developer.android.com/tools/debugging/debugging-tracing.html)

本机代码的 ARM DS-5 社区版 [http://ds.arm.com/ds-5-community-edition/](http://ds.arm.com/ds-5-community-edition/)

关于这个话题应该已经有很多问题了。

编辑：对不起，我错过了关于实时查看性能数据的部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T13:52:15.927

检查我们的 Crittercism。我们最近发布了一个解决方案，可以从应用程序内部跟踪实时应用程序性能（延迟、错误率、数据输入/输出等）。

免责声明 - 我为 Crittercism 工作。但我们的解决方案仍然摇摆不定:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T23:30:38.183

这是适用于 iPhone 的[东西](http://weblog.bignerdranch.com/316-a-timing-utility/)。不要为 Android 编程，所以不能帮助你，但过程应该是一样的。然后将这些方法封装到计时函数中，看看它在设备上花费了多长时间。

# javascript - 用户键入后如何使用 getElementById 获取字段？

> ID：11175087
> 
> 赞同：0
> 
> 时间：2012-06-24T05:02:27.867
> 
> 标签：javascript, html, getelementbyid, color-picker

我有一个使用默认颜色加载的颜色选择器字段，然后访问者可以使用色轮或仅通过更改文本来更改输入值。我有 javascript 获取颜色选择器的值并将其旁边的链接 href 设置为该值。

问题是，当页面加载时，链接按钮在颜色选择器中设置为默认值，但是当访问者更改此值时，链接 href 不会更改以反映这一点而无需刷新。

这是现场直播：[http ://www.brainbuzzmedia.com/themes/vertex/](http://www.brainbuzzmedia.com/themes/vertex/)

这是我拥有的javascript：

```
<script type="text/javascript">
$(document).ready(function(){

var a = document.getElementById('colorLink');
var color = document.getElementById('color-demo').value;
a.href = "http://www.brainbuzzmedia.com/themes/vertex/?color=" + color;

});
</script> 
```

这是添加颜色选择器输入和链接的 html：

```
<input type="text" name="color-demo" id="color-demo" value="#ff0000" class="colorfield regular-text" data-hex="true" onChange="refresh()"/><a href="" id="colorLink">LINK</ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T05:07:34.477

每当值更改时执行该代码

```
$("#color-demo").change(function() {
    var a = document.getElementById('colorLink');
    var color = document.getElementById('color-demo').value;
    a.href = "http://www.brainbuzzmedia.com/themes/vertex/?color=" + color;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T05:07:01.017

> document.getElementById("color-demo").onblur = function() {
> var a = document.getElementById('colorLink');
> var color = document.getElementById('color-demo').value;
> a.href = "http://www.brainbuzzmedia.com/themes/vertex/?color=" + 颜色;
> }

或这样做：

`<input type="text" name="color-demo" id="color-demo" value="#ff0000" class="colorfield regular-text" data-hex="true" onchange="Refresh(this.value)"/>`

> 函数刷新（颜色）{
> var a = document.getElementById('colorLink');
> a.href = "http://www.brainbuzzmedia.com/themes/vertex/?color=" + 颜色;
> }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T05:16:51.060

尝试在文本框的 KeyUp、KeyDown 和 Blur 事件上设置值.. 像这样..

```
$("#color-demo").bind("keyup keydown blur",{},function() {
    var a = document.getElementById('colorLink');
    var color = document.getElementById('color-demo').value;
    a.href = "http://www.brainbuzzmedia.com/themes/vertex/?color=" + color;
}); 
```

# jquery - jQuery - 计数/获取行跨行的索引

> ID：11175090
> 
> 赞同：4
> 
> 时间：2012-06-24T05:03:05.773
> 
> 标签：jquery, count, html-table

我试图弄清楚如何获取当前行跨度“行”的索引（即使它是行跨度的单元格）。

```
<table>
    <tr>
        <td rowspan="2">First</td>
        <td> First 1 1 </td>
        <td> First 2 1 </td>
    </tr>
    <tr>
         <td> First 2 1 </td>
         <td> First 2 2 </td>
    </tr>
    <tr>
        <td rowspan="2">Second</td>
        <td> Second 1 1 </td>
        <td> Second 2 1 </td>
    </tr>
    <tr>
         <td> Second 2 1 </td>
         <td> Second 2 2 </td>
    </tr>
</table> 
```

如果我单击表格中的任何单元格，我如何计算我所在的“跨行”行？

例如，如果我点击任何“第二”单元格，我应该得到“2”，如果我点击任何“第一”单元格，我应该得到“1”。

我尝试了多种方法，包括：

```
row=$(this).parent().parent().children('tr').filter(function (index) {
    return $(this).children('td[rowspan]'); }).index($(this).parent()); 
```

和

```
row=$(this).parent().parent().children('tr:contains("td[rowspan]")')
    .parent().parent().index($(this).parent()); 
```

并且有点让它与它一起工作

```
$row=$(this).parent();
while ($row.children('td:eq(0)').attr("rowspan").length<=0)
    $row=$row.prev();
span=$row.children('td:eq(0)').attr("rowspan");
row=Math.floor( parseInt($(this).parent().parent().children().index( $(this).parent()) )/span ); 
```

但这只有在有一个行跨度单元格的情况下才有效......并且假设所有行都具有相同的行跨度

我试着在这些网站上工作，但不能走得太远。

[jquery选择器来计算可见表行的数量？](https://stackoverflow.com/questions/2931893/jquery-selector-to-count-the-number-of-visible-table-rows)
[jQuery：如何从表格中选择行 jQuery 中的](https://stackoverflow.com/questions/3585272/jquery-how-to-select-rows-from-a-table)
[表格行号和列号](https://stackoverflow.com/questions/788225/table-row-and-column-number-in-jquery)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T05:18:23.607

```
var table = $('table');                     // reference of table
$('td').click(function() {
  var perent = $(this).parent();            // find parent tr
      index= table.find(perent).index();    // get index of tr
   alert( index );
}); 
```

**[演示](http://jsfiddle.net/NTAmE/4/)**

```
var table = $('table');
$('td').click(function() {
    var tdWithRowSpan = $(this).siblings('td[rowspan]').length ?  // if siblings td[rowspan] exists
                            $(this).siblings('td[rowspan]') :     // get that td
                              $(this).parent().prev('tr').find('td[rowspan]'); // else find closest td[rowspan]

    index = table.find('td[rowspan]').index(tdWithRowSpan); // get index
    alert(index);
}); 
```

**[演示](http://jsfiddle.net/NTAmE/6/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T05:23:21.243

`rowspan`一种方法是从第一列中单元格的属性构建一个数组。从那里，您可以获取单击行的索引并遍历`rowspan`数组，同时减去跨度的范围。一旦低于零，您就有了（从零开始的）索引：

```
$("td").click(function() {
    var $this = $(this);
    var rowIndex = $this.closest("tr").index();
    $this.closest("table").find("tr").map(function() {
        return $(this).find("td:first").attr("rowspan") || 1;
    }).each(function(index) {
        if ((rowIndex -= this) < 0) {
            alert(index + 1);  // 'index' is zero-based.
            return false;
        }
    });
}); 
```

你可以在[这个 fiddle](http://jsfiddle.net/4tEC7/2/)中测试它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T05:09:49.993

不确定这是否是您想要的；但考虑将数据属性添加到您的标记中，让您的生活更轻松......

```
<table>
    <tr data-index="0">
        <td rowspan="2">First</td>
        <td> First 1 1 </td>
        <td> First 2 1 </td>
    </tr>
    <tr data-index="1">
         <td> First 2 1 </td>
         <td> First 2 2 </td>
    </tr>
    ...
</table> 
```

有了这个，获得价值是微不足道的：

```
$(this).parent().attr("data-index"); 
```

# java - 在特定端口上创建 MessageConnection 时出错？

> ID：11175092
> 
> 赞同：1
> 
> 时间：2012-06-24T05:03:25.673
> 
> 标签：java, java-me, s60, wma, midp-2.0

我有**java-j2me-midp2**应用程序。在这个应用程序中有一个部分可以收听**短信收件箱**并根据这些短信在应用程序中进行操作。
对于我们使用的本节 `MessageConnection`，我们使用以下代码创建它：

```
 try {
            msgConnection = (MessageConnection) Connector.open("sms://:" + port);
            msgConnection.setMessageListener(Listener);
       } 
   catch (Exception e)
       {
            showexception(0, p.error_listen);
       } 
```

经过几次我们使用该应用程序（*并且毫无例外地工作*），目前我们在这部分出现错误*（即使在不同的端口上）*。

> **错误：** Java.IO.IOException Symbian OS 错误=-1

如您所见，此错误发生在 Symbian OS 手机（如 NokiaE52、Nokia5800、Sony Ericsson Vivaz）上。这些手机使用 Symbian series60。

***问：***我错过了什么吗？有没有更好的方法来做到这一点？为什么会发生此**错误**？有小费吗？

# php - 我正在尝试在 php 中使用 curl 打开一个 https 站点。但我得到一个空白页

> ID：11175097
> 
> 赞同：0
> 
> 时间：2012-06-24T05:06:07.933
> 
> 标签：php, curl

我正在尝试在 php 中使用 curl 打开一个 https 站点。但是我得到一个空白页面。虽然当我检查时我发现返回的 httpcode 是 200。我可以使用浏览器打开同一页面。我已经禁用了 ssl 验证器和 ssl_verify 主机，因为主机名和证书中的名称不同。

这是我的代码，任何帮助都会有用

```
<?php
$url = "https://abcde.com/";
$ch = curl_init($url);
echo "init";
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 200);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_USERPWD,"uname:pwd");
curl_setopt($ch,CURLOPT_SSL_VERIFYHOST,1);
$curl_scraped_page= curl_exec($ch);
$httpCode=curl_getinfo($ch, CURLINFO_HTTP_CODE); 
if(!$curl_scraped_page)
{
    echo "first learn";
}
echo $httpCode ;
echo $curl_scraped_page;
curl_close($ch);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T05:10:17.787

尝试使用 CURLOPT_USERAGENT 将用户代理设置为您的浏览器使用的相同。他们可能正在使用用户代理嗅探。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T03:02:45.340

设置此选项：

```
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false); 
```

# jasper-reports - Jaspersoft iReport 如何选择另一个元素后面的元素

> ID：11175099
> 
> 赞同：3
> 
> 时间：2012-06-24T05:06:56.330
> 
> 标签：jasper-reports, ireport

在 Jaspersoft iReport (4.6.0) 中，是否有一种简单的方法可以单击完全位于另一个元素后面的报表元素？我在一个较大的矩形元素后面有许多文本字段，每当我尝试单击其中一个文本元素来编辑\移动它时，我只能选择较大的矩形元素。

是的，我可以在报表检查器窗口中单击元素名称，然后自由移动\更改元素，但这在包含许多元素的报表中非常麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:41:02.777

您唯一的其他选择是右键单击顶部的元素并单击`Send to Back`。这可能会影响导出报告的外观。这取决于您如何使用它。

# objective-c - 为什么我的 GCD 方法没有响应？

> ID：11175107
> 
> 赞同：1
> 
> 时间：2012-06-24T05:07:57.303
> 
> 标签：objective-c, multithreading, grand-central-dispatch

有人知道为什么`bmlabel`不更新吗？日志“分数”什么也没显示？没有 GCD，它可以正常工作，但它会阻止 ui（例如，我想显示 100 到 500 之间的数字，非常快地显示 101、102...499、500，而不是直接从“100”变为“ 500 英寸）。所以我想用另一个线程来计算它，即使我不确定这是最好的方法。这是我的代码：

```
//in .h, i imported :
#import <Foundation/Foundation.h>
#import <UIKit/UIKit.h>

//in .m
@implementation ScoreLayer

-(void)updateScore:(int)num{
    CCLOG(@"hello");
    int newScore = score+num;
    //dispatch_queue_t queue = dispatch_queue_create("Test", 0);
    dispatch_queue_t main = dispatch_get_main_queue();
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0ul);

    dispatch_async(queue, ^{
        for (int i=score; i< newScore; i++){
            score++;
            CCLOG(@"score:%i", score);
            NSString *str = [NSString stringWithFormat:@"%d", score];

            dispatch_async(main, ^{
                [bmlabel setString:str];
            });

        }
    });
    score = newScore;
}

-(id) init
{
    if( (self=[super init])) {
        bmlabel = [CCLabelBMFont labelWithString:@"14763" fntFile:@"TestFont.fnt"];
        bmlabel.anchorPoint = ccp(0, 0.5f);
        bmlabel.position = ccp(0,250.0f);
        [self addChild:bmlabel z:200]; 
            score = 14763;
    }
    return self;
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:40:47.243

您的块正在异步执行，这意味着该块在新的运行循环中执行（= 在您设置`score`为之后`newScore`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T16:56:54.110

我假设该`score`属性是一种`__block`类型，因为您要在块内更改它：

```
 score++; 
```

因为你的块是用主循环继续执行的，而且很可能在你的块开始之前`dispatch_async`遇到。`score = newScore;`当你的块即将运行时，`score`它已经相等`newScore`并且你的循环将永远不会工作，因为它的条件表达式将返回 false。在：

```
for (int i=score; i< newScore; i++) 
```

`i`将等于`newScore`并且因为`newScore < newScore`是假的，你的循环将永远不会运行。

我建议删除您`updateScore:`方法中的最后一行。

```
score = newScore; 
```

# c - 图 C 实现 - 深度优先搜索

> ID：11175108
> 
> 赞同：1
> 
> 时间：2012-06-24T05:08:18.237
> 
> 标签：c, graph, structure, depth-first-search

我正在尝试使用图形的邻接表表示来实现深度优先搜索算法。这是我的代码：

```
#include<stdio.h>
#include<stdlib.h>
struct edge
{
int vertexIndex;
struct edge *edgePtr;
}edge;

struct vertex
{
int vertexKey;
int visited;
struct edge *edgePtr;
}vertex;

void insertVertex(struct vertex *g, int vertexKey, int *vertexCount)
{
g[*vertexCount].vertexKey=vertexKey;
g[*vertexCount].edgePtr=NULL;
g[*vertexCount].visited=0;
(*vertexCount)++;
}

void insertEdge(struct vertex *g,int vertex1, int vertex2)
{
struct edge *e,*e1,*e2;
e=g[vertex1].edgePtr;
while(e&& e->edgePtr)
{
    e=e->edgePtr;
}
e1=(struct edge *)malloc(sizeof(*e1));
e1->vertexIndex=vertex2;
e1->edgePtr=NULL;
if(e)
e->edgePtr=e1;
else
g[vertex1].edgePtr=e1;

e=g[vertex2].edgePtr;
while(e&& e->edgePtr)
{
    e=e->edgePtr;
}
e2=(struct edge *)malloc(sizeof(*e2));
e2->vertexIndex=vertex1;
e2->edgePtr=NULL;
if(e)
e->edgePtr=e2;
else
g[vertex2].edgePtr=e2;
}

void printGraph(struct vertex *g, int *vertexCount)
{
int i;
struct edge *e;
for(i=0;i<*vertexCount;i++)
{
    printf("%d(%d)",i,g[i].vertexKey);
    e=g[i].edgePtr;
    while(e)
    {
        printf("->%d",e->vertexIndex);
        e=e->edgePtr;
    }
    printf("\n");
}
}

void dfs(struct vertex *g,int vertex1)
{
g[vertex1].visited=1;
printf("%d ",vertex1);
struct edge *e;
e=g[vertex1].edgePtr;

while(e)
{
    if(!(g[e->vertexIndex].visited))
    dfs(g,e->vertexIndex);

    e=e->edgePtr;
}
}
main()
{
struct vertex *g1[10];
int vc1=0;
insertVertex(g1,5,&vc1);
insertVertex(g1,3,&vc1);
insertVertex(g1,4,&vc1);
insertVertex(g1,2,&vc1);
insertVertex(g1,9,&vc1);
insertEdge(g1,0,1);
insertEdge(g1,0,2);
insertEdge(g1,1,3);
insertEdge(g1,1,4);
dfs(g1, 0);
return 0;
} 
```

问题是当我运行这段代码时，在打印“dfs”输出结束时，程序意外停止，我不明白为什么。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:06:50.613

我得到了它！有个小错误。。

在主函数中，g1 的声明应该是

```
struct vertex g1[10]; 
```

代替

```
struct vertex *g1[10]; 
```

[更多解释：http://iamsoftwareengineer.blogspot.ie/2012/06/c-graph-implementation-with-adjacency.html](http://iamsoftwareengineer.blogspot.ie/2012/06/c-graph-implementation-with-adjacency.html)

:)

# perl - 我可以拥有的最长的字符串是多少？

> ID：11175109
> 
> 赞同：6
> 
> 时间：2012-06-24T05:09:06.000
> 
> 标签：perl

最近，我在一个面试问题中被要求在 perl 中反转一个字符串。我编写了代码，他们希望我提供一些示例字符串来测试它。我给了他们一些例子，比如一个字符很少、字符很多、无效字符等的字符串。但他们也问我要测试的最长的字符串是什么。我不知道该说什么。因此这个问题。我可以在 perl 代码中测试的最长字符串是多少？它取决于什么？机器内存？从 perl 的角度来看有什么限制吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T05:47:17.603

我正在寻找是否可以找到有关最长字符串的任何官方文档。我在[http://perltutorial.org](http://www.perltutorial.org/perl-scalar-variables.aspx)找到了一个关于字符串的内容：

> Perl 将字符串定义为字符序列。最短的字符串不包含任何字符或空字符串。***最长的字符串可以包含无限的字符，这仅限于您计算机的可用内存。***

我不知道这对你来说是否足够*正式。*很高兴在 FAQ 或 Perldoc 中看到一些内容。

顺便说一句，在 Perl 中正式反转一个字符串：

```
my $rev_string = reverse $string; 
```

这是在 Perl FAQ #4 中，其中有一堆字符串处理的东西。*反向字符串*问题是一个古老的面试问题，用于查看是否有人知道他们神秘的 Perl 知识。当然几乎每个人都知道`reverse`会反转一个数组，但他们是否也知道它会反转一个字符串？*Noobies*会制定出某种复杂的算法，面试官会有理由自鸣得意而不雇用那个人。

就个人而言，如果我在面试某人，我问了这个问题，有人当场提出了一个优雅的算法，并向我展示了它如何处理短、长和无效字符，我会雇用他们。你总是可以*学习*新的愚蠢的 Perl 技巧，但是快速上手的思维方式是很难找到的。

很久以前，当有人在采访中问我同样的问题时，我学会了反向字符串技巧。我在常见问题解答中查找并发现它并意识到我*做错了*。我已经使用 Perl 将近 20 年了，我想不出我曾经不得不反转 Perl 字符串的时间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T05:20:50.693

从根本上说，它取决于您的程序（即 Perl）可以访问的内存量。如果你有一台 32 位的机器，那就是低于 4 GiB。如果您有一台 64 位机器，那么限制可能更大，并且取决于可用的虚拟内存。没有固定的限制。

# php - 将 facebook App 密钥存储在 mysql 数据库中是否安全？

> ID：11175113
> 
> 赞同：0
> 
> 时间：2012-06-24T05:09:51.673
> 
> 标签：php, mysql, facebook

将 FB App 密钥存储在 MySQL 数据库中是否安全？我宁愿不把它留在代码本身......我有什么选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T05:42:32.093

您的数据库并不比您的代码更安全。一旦有人可以访问您的代码，他们通常可以访问数据库，至少如果您的代码可以连接到数据库。

这确实是主观的，但是 IMO 应用程序凭据（以及数据库凭据）应该保存在存储在 web-root 之外并且具有有限访问权限的配置文件中，但是一旦您的代码被破坏，没有什么能阻止攻击者读取配置。

在数据库中存储应用程序凭据的缺点是对数据的额外查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T05:13:23.163

永远不要在数据库中留下秘密短语或密码；任何人都可以通过足够的编码访问它。我可能会把那些秘密短语写在一张纸上，你为什么还要把它放在数据库里？

# jquery - 使用 jQuery 让页面向上和向下滚动

> ID：11175121
> 
> 赞同：1
> 
> 时间：2012-06-24T05:11:20.990
> 
> 标签：jquery, scroll

我目前有这个代码链接到左右按钮的图像，使页面左右滚动。

```
 jQuery('.go-right').click(function() {
    jQuery(".thumbs").stop().animate({left:'-'+(parseFloat(jQuery(".thumbs").width())-parseFloat(jQuery(window).width()))+'px'},{queue:false,duration:300});
    jQuery(this).fadeTo('slow', 0.20);
    jQuery('.go-left').show();
    jQuery('img.go-left').fadeTo('slow', 1.0);
    return false;
});
jQuery('.go-left').click(function() {
    jQuery(".thumbs").stop().animate({left:'0'},{queue:false,duration:300});
    jQuery(this).fadeTo('slow', 0.20);
    jQuery('.go-right').show();
    jQuery('img.go-right').fadeTo('slow', 1.0);
    return false;
}); 
```

我想使用类似于链接到向上和向下按钮的东西，但我无法让它工作..这是我到目前为止所拥有的..任何建议将不胜感激！

我的“go-down”逻辑似乎让我的页面上升..（但点击时不会淡入和淡出），而我的“go-up”什么也不做（点击时 put 仍然淡入和淡出）。

```
 jQuery('.go-down').click(function() {
    jQuery(".thumbs").stop().animate({scrollTop: $elem.height()}, 800);
    jQuery(this).fadeTo('slow', 0.20);
    jQuery('.go-down').show();
    jQuery('img.go-down').fadeTo('slow', 1.0);
    return false;
    });

jQuery('.go-up').click(function() {
    jQuery(".thumbs").stop().animate({scrollTop: 0});
    jQuery(this).fadeTo('slow', 0.20);
    jQuery('.go-up').show();
    jQuery('img.go-up').fadeTo('slow', 1.0);
    return false;
    }); 
```

# algorithm - 通过按顺序插入以下元素来创建堆

> ID：11175126
> 
> 赞同：0
> 
> 时间：2012-06-24T05:12:26.873
> 
> 标签：algorithm, data-structures, language-agnostic, heap

问题：

> 通过按给定顺序插入以下元素来创建堆。每次插入后显示堆并涓涓细流。（应该实现堆以将最高的键值保持在顶部。）
> 
> ```
> 5 4 6 7 9 8 1 2 3 
> ```
> 
> 完成创建堆后，从中删除每个元素。每次删除和涓流后显示堆。指示在每个步骤中删除了哪个元素。

我知道如何将元素插入堆，但如何创建它？而且我真的不确定如何从堆中删除元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T08:35:06.880

我将假设我的答案是一个二进制堆，有许多不同的堆，但是由于这听起来像家庭作业并且是一个相当基本的问题，我将介绍最基本的堆：

好吧，首先堆是空的。

然后你插入 5，所以堆现在是：

```
5 
```

然后在底部插入 4。4 小于 5，所以我们不会改变它与它的父级的位置。堆现在是：

```
 5
  /
 4 
```

然后我们在底部插入 6，低于 5（总是从左到右插入底部）。我们将新插入的节点 (6) 的值与它的父节点 (5) 进行比较，并意识到我们必须交换它们，以免违反堆属性：

```
 6
  / \
 4   5 
```

现在我们在下一个可用位置（在 4 下方）插入 7，并将其与它的父级交换，因为 7 > 4。然后我们再次交换（或涓流），因为 7 > 6 并得到：

```
 7
   / \
  6   5
 /
4 
```

等等...

# javascript - javascript innerHTML 打印错位

> ID：11175130
> 
> 赞同：1
> 
> 时间：2012-06-24T05:13:00.407
> 
> 标签：javascript, innerhtml

```
<table class="privilage">
                <caption> These are the default users for institution </caption>
                <thead>
                    <tr>
                        <th>Users Name</th>
                        <th>User Id</th>
                        <th>Password</th>
                   </tr>
                </thead>
                <tbody>
                         <tr>
                            <td><input type="text" name='DefaultUser[]' value='' ><br></td>
                            <td><input type="text" name='DefaultUser_UserName[]' value=''></td>
                            <td><input type="password" name='DefaultUser_Password[]'></td>
                        </tr>

                <div id="New_User"></div>
                </tbody>
  </table> <table>
                    <tr>
                        <td><input type="button"   name="Add_New_User" value="Add new User" onclick="addRow()"></td>
                    </tr>
                </table> 
```

上面的 HTML 有一个名为 New_User 的 div，我要求下面的 javascript 使用 innerHTML 打印到该 div，但它在其他地方打印出来。

```
 function addRow()
 {
var d= document.getElementById("New_User");
d.innerHTML+="<tr><th><input type='text' name='DefaultUsers' value=''/> Manager<br></th><th><input type='text' name='UserName' value=''/></th><th><input type='password' name='Password'/></th></tr>";
}​ 
```

我只需要将这些新行添加到“特权”表中。欢迎任何考虑和帮助。提前致谢。

[Jsfiddle 代码](http://jsfiddle.net/abelkbil/QPY6b/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T05:21:45.607

不幸的是，您的 HTML DOM 结构无效。你不能像你正在做`div`的那样把标签放在里面。`tbody`A`tbody`只能包含`tr`标签。

将 id`New_User`提供给您的`tbody`标签，您的脚本将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T05:26:05.227

实际上，您可以在表中添加新行，而无需在其中添加额外的 Div。您可以使用 JS 内部函数来实现这一点。另外请`<div id="New_User"></div>`从您的**tbody**中删除，这会使您的 DOM 结构无效。

这样做，工作演示：http: [//jsfiddle.net/epinapala/QPY6b/5/](http://jsfiddle.net/epinapala/QPY6b/5/)，

不过，将新属性 id="tableID" 添加到您的表中！

```
function addRow() {
            var tableID = "tableID";
            var table = document.getElementById(tableID);

            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var cell1 = row.insertCell(0);
            var element1 = document.createElement("input");
            element1.type = "text";
            cell1.appendChild(element1);

            var cell2 = row.insertCell(1);
            var element2 = document.createElement("input");
            element2.type = "text";
            cell2.appendChild(element2);

            var cell3 = row.insertCell(2);
            var element3 = document.createElement("input");
            element3.type = "text";
            cell3.appendChild(element3);

        } 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T05:32:32.333

这可能是你想要的.. [http://jsfiddle.net/ztnMk/](http://jsfiddle.net/ztnMk/)

```
<table class="privilage">
                <caption> These are the default users for institution </caption>
                <thead>
                    <tr>
                        <th>Users Name</th>
                        <th>User Id</th>
                        <th>Password</th>
                   </tr>
                </thead>
                <tbody id="New_User">
                        <tr>
                            <td><input type="text" name='DefaultUser[]' value='' ><br></td>
                            <td><input type="text" name='DefaultUser_UserName[]' value=''></td>
                            <td><input type="password" name='DefaultUser_Password[]'></td>
                        </tr>
<!-- YOUR NEW TR GOES HERE... -->

                </tbody> 
```

这里是JS：

```
function addRow(){
var d= document.getElementById("New_User");
d.innerHTML+="<tr><th><input type='text' name='DefaultUsers' value='Manager'/> </th><th><input type='text' name='UserName' value=''/></th><th><input type='password' name='Password'/></th></tr>"; 
```

}​</p>

希望这会有所帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T05:46:46.707

用带有 id 的 tr 替换 div 并将您的 innerHTML 粘贴到其中。在这样做之前，请从您的内部 html 中删除 tr 标签。

您可能必须从一开始就在 tr 中放置 3 个空单元格；您也可以从一开始就将 tr 的高度设置为 0。然后在 tr 中粘贴您的 innerHTML 后，您可以删除高度，如下所示：

```
document.getElementById("myTr").style.height = ""; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T05:21:41.570

我做了一些更改，例如，将您的 div 从所有表格中移出，

```
<table class="privilage">
   <caption> These are the default users for institution </caption>
   <thead>
       <tr>
          <th>Users Name</th>
          <th>User Id</th>
          <th>Password</th>
       </tr>
   </thead>
   <tbody>
       <tr>
          <td><input type="text" name='DefaultUser[]' value='' ><br></td>
          <td><input type="text" name='DefaultUser_UserName[]' value=''></td>
          <td><input type="password" name='DefaultUser_Password[]'></td>
       </tr>
    </tbody>
</table> 
<div id="New_User"></div> 
<table>
  <tr>
     <td><input type="button"   name="Add_New_User" value="Add new User" onclick="addRow()"></td>
  </tr>
</table> 
```

这是在第一个底部和添加用户按钮之前添加新行。请检查这个[小提琴](http://jsfiddle.net/QPY6b/2/)

# python - Python 中最大公约数的代码

> ID：11175131
> 
> 赞同：121
> 
> 时间：2012-06-24T05:13:02.043
> 
> 标签：python

a 和 b 的最大公约数 (GCD) 是除以它们而没有余数的最大数。

找到两个数的 GCD 的一种方法是欧几里德算法，该算法基于以下观察结果：如果是除以`r`时的余数，则。作为基本情况，我们可以使用.`a``b``gcd(a, b) = gcd(b, r)``gcd(a, 0) = a`

编写一个名为 gcd 的函数，它接受参数`a`并`b`返回它们的最大公约数。

* * *

## 回答 #1

> 赞同：329
> 
> 时间：2012-06-24T05:19:03.857

它[在标准库](https://docs.python.org/dev/library/fractions.html#fractions.gcd)中。

```
>>> from fractions import gcd
>>> gcd(20,8)
4 
```

`inspect`Python 2.7中模块的源代码：

```
>>> print inspect.getsource(gcd)
def gcd(a, b):
    """Calculate the Greatest Common Divisor of a and b.

    Unless b==0, the result will have the same sign as b (so that when
    b is divided by it, the result comes out positive).
    """
    while b:
        a, b = b, a%b
    return a 
```

从 Python 3.5 开始，`gcd` [在`math`模块](https://docs.python.org/3.5/library/math.html#math.gcd)中；中的一个`fractions`已弃用。此外，`inspect.getsource`不再返回任何一种方法的解释性源代码。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-09-22T13:13:27.133

具有 mn 的算法可以运行很长时间。

这个表现要好得多：

```
def gcd(x, y):
    while y != 0:
        (x, y) = (y, x % y)
    return x 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-02-20T16:21:16.050

这个版本的代码使用欧几里得算法来寻找 GCD。

```
def gcd_recursive(a, b):
    if b == 0:
        return a
    else:
        return gcd_recursive(b, a % b) 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-11-02T08:48:22.737

```
gcd = lambda m,n: m if not n else gcd(n,m%n) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-01-31T08:16:54.317

使用**递归**，

```
def gcd(a,b):
    return a if not b else gcd(b, a%b) 
```

使用**while**，

```
def gcd(a,b):
  while b:
    a,b = b, a%b
  return a 
```

使用 lambda，

```
gcd = lambda a,b : a if not b else gcd(b, a%b)

>>> gcd(10,20)
>>> 10 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-29T05:48:21.810

```
def gcd(m,n):
    return gcd(abs(m-n), min(m, n)) if (m-n) else n 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-05-16T12:02:23.287

使用递归的非常简洁的解决方案：

```
def gcd(a, b):
    if b == 0:
        return a
    return gcd(b, a%b) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-11-15T09:56:58.383

```
def gcdRecur(a, b):
    '''
    a, b: positive integers

    returns: a positive integer, the greatest common divisor of a & b.
    '''
    # Base case is when b = 0
    if b == 0:
        return a

    # Recursive case
    return gcdRecur(b, a % b) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-06-29T04:51:29.113

```
a=int(raw_input('1st no \n'))
b=int(raw_input('2nd no \n'))

def gcd(m,n):
    z=abs(m-n)
    if (m-n)==0:
        return n
    else:
        return gcd(z,min(m,n))

print gcd(a,b) 
```

基于欧几里得算法的不同方法。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-10-27T14:13:54.257

我认为另一种方法是使用递归。这是我的代码：

```
def gcd(a, b):
    if a > b:
        c = a - b
        gcd(b, c)
    elif a < b:
        c = b - a
        gcd(a, c)
    else:
        return a 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-07-27T20:54:55.863

在带有递归的python中：

```
def gcd(a, b):
    if a%b == 0:
        return b
    return gcd(b, a%b) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-12-03T19:41:46.683

```
def gcd(a,b):
    if b > a:
        return gcd(b,a)
    r = a%b
    if r == 0:
        return b
    return gcd(r,b) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-01-25T17:55:28.103

# 对于`a>b`：

```
def gcd(a, b):

    if(a<b):
        a,b=b,a

    while(b!=0):
        r,b=b,a%r
        a=r
    return a 
```

* * *

# 对于`a>b`或`a<b`：

```
def gcd(a, b):

    t = min(a, b)

    # Keep looping until t divides both a & b evenly
    while a % t != 0 or b % t != 0:
        t -= 1

    return t 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-04-16T16:21:52.843

我不得不使用 while 循环为家庭作业做这样的事情。不是最有效的方法，但如果你不想使用这个函数：

```
num1 = 20
num1_list = []
num2 = 40
num2_list = []
x = 1
y = 1
while x <= num1:
    if num1 % x == 0:
        num1_list.append(x)
    x += 1
while y <= num2:
    if num2 % y == 0:
        num2_list.append(y)
    y += 1
xy = list(set(num1_list).intersection(num2_list))
print(xy[-1]) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-06-07T16:24:12.567

```
def _grateest_common_devisor_euclid(p, q):
    if q==0 :
        return p
    else:
        reminder = p%q
        return _grateest_common_devisor_euclid(q, reminder)

print(_grateest_common_devisor_euclid(8,3)) 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2013-06-08T00:05:33.440

# 此代码根据用户给出的选择计算两个以上数字的 gcd，这里用户给出数字

```
numbers = [];
count = input ("HOW MANY NUMBERS YOU WANT TO CALCULATE GCD?\n")
for i in range(0, count):
  number = input("ENTER THE NUMBER : \n")
  numbers.append(number)
numbers_sorted = sorted(numbers)
print  'NUMBERS SORTED IN INCREASING ORDER\n',numbers_sorted
gcd = numbers_sorted[0]

for i in range(1, count):
  divisor = gcd
  dividend = numbers_sorted[i]
  remainder = dividend % divisor
  if remainder == 0 :
  gcd = divisor
  else :
    while not remainder == 0 :
      dividend_one = divisor
      divisor_one = remainder
      remainder = dividend_one % divisor_one
      gcd = divisor_one

print 'GCD OF ' ,count,'NUMBERS IS \n', gcd 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2013-06-18T20:03:52.170

价值交换对我来说效果不佳。所以我只是为在 a < b 或 a > b 中输入的数字设置了一个类似镜像的情况：

```
def gcd(a, b):
    if a > b:
        r = a % b
        if r == 0:
            return b
        else:
            return gcd(b, r)
    if a < b:
        r = b % a
        if r == 0:
            return a
        else:
            return gcd(a, r)

print gcd(18, 2) 
```

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2015-03-25T16:23:41.183

```
#This program will find the hcf of a given list of numbers.

A = [65, 20, 100, 85, 125]     #creates and initializes the list of numbers

def greatest_common_divisor(_A):
  iterator = 1
  factor = 1
  a_length = len(_A)
  smallest = 99999

#get the smallest number
for number in _A: #iterate through array
  if number < smallest: #if current not the smallest number
    smallest = number #set to highest

while iterator <= smallest: #iterate from 1 ... smallest number
for index in range(0, a_length): #loop through array
  if _A[index] % iterator != 0: #if the element is not equally divisible by 0
    break #stop and go to next element
  if index == (a_length - 1): #if we reach the last element of array
    factor = iterator #it means that all of them are divisibe by 0
iterator += 1 #let's increment to check if array divisible by next iterator
#print the factor
print factor

print "The highest common factor of: ",
for element in A:
  print element,
print " is: ", 
```

best_common_devisor(A)

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2018-05-25T12:47:31.967

```
def gcdIter(a, b):
gcd= min (a,b)
for i in range(0,min(a,b)):
    if (a%gcd==0 and b%gcd==0):
        return gcd
        break
    gcd-=1 
```

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2019-02-15T21:40:31.607

这是实现概念的解决方案`Iteration`：

```
def gcdIter(a, b):
    '''
    a, b: positive integers

    returns: a positive integer, the greatest common divisor of a & b.
    '''
    if a > b:
        result = b
    result = a

    if result == 1:
        return 1

    while result > 0:
        if a % result == 0 and b % result == 0:
            return result
        result -= 1 
```

# wxpython - 将静态文本添加到单独类中的单独面板（wxpython）

> ID：11175136
> 
> 赞同：1
> 
> 时间：2012-06-24T05:13:38.577
> 
> 标签：wxpython

我有一个笔记本，它有自己的类，在那个笔记本中我有一个复选按钮，我正在尝试绑定该复选按钮，在单独的类中的单独面板上显示静态文本。

前任。

```
class ButtonPage(wx.Notebook)
    def __init__(etc.....):
        but_img = wx.Bitmap('./button.png',wx.BITMAP_TYPE_PNG)
    self.but_img = wx.StaticBitmap(self,bitmap=but_img,pos=((10,170)),style=wx.NO_BORDER)

class PanelPage(wx.Frame)
    def __init__(etc....)
    self.mainPanel = wx.Panel(self,etc....) 
```

那么如何在“按钮页面”中绑定此按钮以在 PanelPage 上显示静态文本（如果它们位于 2 个单独的类中）。我习惯于制作按钮（self）的父级，但在这种情况下看到这样做没有任何意义......

编辑：好的，我实际上想通了。但由于某种原因 wx.StaticText 不响应 EVT 调用。任何想法为什么会这样？解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:10:44.307

对于一个快速的肮脏解决方案，您可以通过例如 init 方法将对 StaticText 的引用传递给您的“按钮页面”，然后您可以将按钮页面类中的方法绑定到 EVT_BUTTON 事件并`SetLabel`调用那里的标签。

一个更好的解决方案是在父级别执行此操作，因为 ButtonPage 和 PanelPages 是笔记本上的兄弟姐妹，因此您可以从笔记本类中绑定 ButtonPage 中的按钮，并使用与上面相同的方法. 让父母这样做比通过兄弟对象/方法的引用要好一些。

我只是想如果它只是一个小项目并且你需要快速工作的话我会提到这个

或者，迈克斯解决方案需要更多的工作来设置和掌握（但这是值得的）。它更具可读性，并且使用上面的解决方案将使代码“耦合”很多，如果将来事情发生变化，你会有一些混乱需要解开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:42:32.573

我不明白你想要什么。StaticText 只是一个标签。用户不与标签交互，因此这个小部件实际上没有任何事件。您也许可以为标签所在的屏幕部分绑定一些鼠标事件，但我认为就是这样。

让 wxPython 中的两个类相互通信的一个好方法是使用 pubsub。这是给你的教程[http://www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/](http://www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/)

编辑：要更改笔记本中显示的页面，您需要使用笔记本的 SetSelection() 方法或 ChangeSelection 方法。假设两个面板都在同一个笔记本中，您只需调用 Notebook 实例来更改页面。即使没有 pubsub，这也应该可以工作。

但是，如果您谈论的是笔记本之外的东西，那么 pubsub 方法绝对是要走的路。

# vb.net - MoQ 如何设置同一方法的多次调用

> ID：11175140
> 
> 赞同：0
> 
> 时间：2012-06-24T05:15:04.847
> 
> 标签：vb.net, moq

如果用户尝试登录三次失败，我将无法设置模拟失败。我的代码如下所示：

```
<TestMethod()>
Public Sub User_LogIn_With_Three_Failed_Attempts_AccountLocks_Pass()
    ' arrange
    Dim logInMock As New Moq.Mock(Of IUserLoginRepository)()
    logInMock.Setup(Function(repo) repo.LogInUser(It.IsAny(Of String), It.IsAny(Of String))).Returns(False)
    ' Todo: have to instruct the mock that if it is repeated 3 times then lock the account. How to do this????

    ' act
    Dim logInBO As New LogInBO(logInMock.Object)
    logInBO.LogIn("someusername", "someWrongPassword")
    logInBO.LogIn("someusername", "someWrongPassword")
    logInBO.LogIn("someusername", "someWrongPassword")

    ' verify
    logInMock.Verify(Function(r) r.LogInUser("someusername", "someWrongPassword"), times:=Times.Exactly(3))
    logInMock.Verify(Function(r) r.IsAccountLocked = True)
End Sub 
```

假设我的存储库看起来像：

```
public interface IUserLoginRepository
{
    bool LogInUser(string userName, string password);
    bool IsAccountLocked { get; }
    bool ResetPassword(string userName, string password);
    int FailedAttempts(string userName);
    bool LockAccount(string userName);
} 
```

感谢任何提示，并且会喜欢 VB.Net 中的 moq 语法；-)

LoginBo 代码如下：

```
public bool LogIn(string userName, string password)
    {
        if (_logInRepo.IsAccountLocked)
            // TODO log error
            return false;

        if (_logInRepo.LogInUser(userName, password))
        {
            return true;
        }
        else
        {
            if (_logInRepo.FailedAttempts(userName) == 3) // this should increment the failed attempts and return the value
                _logInRepo.LockAccount(userName);
        }

        // Log error
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T05:49:35.700

好的，现在我得到了你想要做的事情。所以忽略我在编辑之前写的内容。

```
Dim logInMock As New Moq.Mock(Of IUserLoginRepository)()

Dim IsAccountLocked = false

logInMock.SetupGet(Function(repo) repo.IsAccountLocked).Returns(Function() { return isAccountLocked })

dim amountOfFailedlogIns = 0;
logInMock.Setup(Function(repo) repo.LogInUser(It.IsAny(Of String), It.IsAny(Of String))).Callback(Function(repo) amountOfFailedlogIns++).Returns(False)

logInMock.Setup(Function(repo) repo.FailedAttempts(It.IsAny(Of String))).Returns(Function(repo) return amountOfFailedlogIns) 
```

在 C# 中：

```
Mock<IUserLogicRepository> logInMock = new Mock<IUserLoginRepository>();

bool IsAccountLocked = false

logInMock.SetupGet(repo => repo.IsAccountLocked).Returns(() => { return isAccountLocked; })

int amountOfFailedlogIns = 0;
logInMock.Setup(repo => repo.LogInUser(It.IsAny<string>(), It.IsAny<string>()))).Callback(repo => { amountOfFailedlogIns++; }).Returns(false);

logInMock.Setup(repo => repo.FailedAttempts(It.IsAny<string>()).Returns(repo => { return amountOfFailedlogIns; }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:27:18.540

在我看来，这`LoginRepo`就是你想要嘲笑的。您设置了您的模拟存储库，以便它返回一个已经两次登录失败的用户，然后使用错误的凭据调用 LoginBo，然后验证该帐户已被锁定在模拟存储库中。

澄清一下，测试3次登录失败的情况，不要调用LoginBo 3次；您使用已经准备好失败的设置调用它一次。

# http-post - Http post 请求体

> ID：11175144
> 
> 赞同：0
> 
> 时间：2012-06-24T05:15:55.227
> 
> 标签：http-post

我正在尝试使用lua编写一个脚本来从网站www.baidu.com（在中国很流行）中获取一些数据，但它需要身份验证，任何人都可以注册该网站。当我登录该网站时，我使用 Fiddler 来捕获会话，我发现请求体的可变参数很少，像这样：

```
ppui_logintime=14084&charset=UTF-8&codestring=&token=9fcf00d59b6b9860937a70c221??95d818&isPhone=false&index=0&u=http%3A%2F%2Fwww.baidu.com%2F&safeflg=0&staticpage??=https%3A%2F%2Fpassport.baidu.com%2Fv2Jump.html&loginType=1&tpl=mn&callback=paren??t.bdPass.api.login._postCallback&username=test&password=test&verifycode=&mem_pass??=on 
```

ppui_logintime 和 token 字段的值，他们从哪里得到？他们习惯做什么？

非常感谢任何帮助/建议/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T01:47:09.833

这些值来自用户登录网站时使用的 HTML 网络表单。它包含隐藏字段，而不仅仅是用户在屏幕上看到的字段。当网络服务器将 HTML 传递给浏览器时，这些隐藏字段包含提交回网络服务器的值以及用户输入的值。这就是 HTML 网络表单的一般工作方式。

# c# - 在 C# 中创建 COM/ActiveXObject，从 JScript 中使用，带有简单的事件

> ID：11175145
> 
> 赞同：9
> 
> 时间：2012-06-24T05:16:35.543
> 
> 标签：c#, com, wsh, jscript, activexobject

我想在 C# 中创建一个 COM 对象，并通过 JScript 中的 IDispatch 使用它。那部分很简单。

我还想在 COM 对象上实现简单的回调，类似于可在浏览器中使用的 XmlHttpRequest 对象公开的事件。该模型允许 Javascript 像这样附加事件处理程序：

```
var xmlhttp = new ActiveXObject("MSXML.XMLHTTP"); 
xmlhttp.onReadyStateChange = function() {
  ...
}; 
```

我希望我的客户端 JScript 代码如下所示：

```
var myObject = new ActiveXObject("MyObject.ProgId");
myObject.onMyCustomEvent = function(..args here..) { 
   ...
}; 
```

C# 代码是什么样的？我想要一般情况 - 我希望能够将参数传递回 Javascript fn。

* * *

我已经看到[如何在单击时使用 JavaScript 中的 C# 引发事件编写 ActiveX 控件？](https://stackoverflow.com/questions/1455577/how-can-i-make-an-activex-control-written-with-c-sharp-raise-events-in-javascrip/1456714#1456714)，但是那里的答案看起来确实很难实现，而且使用起来也很复杂。

* * *

从[这篇文章](http://rageshkrishna.com/blog/2008/05/14/ImplementingActiveXEventsThatCanBeUsedInJavaScript.aspx)来看，XMLHttpRequest 事件似乎不是 COM 事件。`onreadystatechange`是类型的属性`IDispatch`。当脚本客户端将该属性设置为函数时，JScript 将其编组为 IDispatch 对象。

剩下的唯一问题是从 C# 调用 IDispatch。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-24T05:22:56.347

既然是COM，就先定义一个接口。让我们保持简单。

```
[Guid("a5ee0756-0cbb-4cf1-9a9c-509407d5eed6")]
[InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
public interface IGreet
{
    [DispId(1)]
    string Hello(string name);

    [DispId(2)]
    Object onHello { get; set; }
} 
```

然后，实现：

```
[ProgId("Cheeso.Greet")]
[ComVisible(true)]
[Guid("bebcfaff-d2f4-4447-ac9f-91bf63b770d8")]
[ClassInterface(ClassInterfaceType.None)]
public partial class Greet : IGreet
{
    public Object onHello { get; set; }

    public String Hello(string name)
    {
        var r = FireEvent();
        return "Why, Hello, " + name + "!!!" + r;
    }
} 
```

主要技巧是`FireEvent`方法。这对我有用。

```
 private string FireEvent()
    {
        if (onHello == null) return " (N/A)";
        onHello
            .GetType()
            .InvokeMember
            ("",
             BindingFlags.InvokeMethod,
             null,
             onHello,
             new object [] {});

        return "ok";
    } 
```

一起编译，用 regasm 注册它：

```
%NET64%\regasm.exe Cheeso.Greet.dll /register /codebase 
```

...然后像这样从 JScript 中使用它：

```
var greet = new ActiveXObject("Cheeso.Greet"), response;
greet.onHello = function() {
    WScript.Echo("onHello (Javascript) invoked.");
};
response = greet.Hello("Fred");
WScript.Echo("response: " + response); 
```

有用。

您也可以从 VBScript 调用它：

```
Sub onHello ()
    WScript.Echo("onHello (VBScript) invoked.")
End Sub

Dim greet
Set greet = WScript.CreateObject("Cheeso.Greet")
greet.onHello = GetRef("onHello")
Dim response
response = greet.Hello("Louise")
WScript.Echo("response: " &  response) 
```

* * *

要使用这种方法将参数从 C# 传递回 JScript，我认为对象需要是 IDispatch，但当然您可以将简单的值作为字符串、int 等进行封送处理，如您所期望的那样进行封送处理。

例如，修改 C# 代码以发回对自身的引用和数字 42。

```
 onHello
            .GetType()
            .InvokeMember
            ("",
             BindingFlags.InvokeMethod,
             null,
             onHello,
             new object [] { this, 42 }); 
```

然后，你可以像这样在 jscript 中得到它：

```
greet.onHello = function(arg, num) {
    WScript.Echo("onHello (Javascript) invoked.");
    WScript.Echo("  num = " + num + "  stat=" + arg.status);
}; 
```

或者像这样在 VBScript 中：

```
Sub onHello (obj, num)
    WScript.Echo("onHello (VBScript) invoked. status=" & obj.status )
    WScript.Echo("  num= " & num)
End Sub 
```

注意：您可以定义您的 jscript 事件处理函数以在调用“事件”时接受比 C# 对象发送的更少的参数。根据我的经验，您需要在 VBScript 中设计事件处理程序以明确接受正确数量的参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-15T12:59:21.707

哇，哇！可能容易吗？

```
using System;
using System.EnterpriseServices;

[assembly: ApplicationName("Calculator")]
[assembly: ApplicationActivation(ActivationOption.Library)]
public class Calculator : ServicedComponent
{
    public int Add(int x, int y){ return (x + y); }
} 
```

然后使用这些构建命令

```
 sn -k Calculator.snk           
 csc /t:library Calculator.cs
 regsvcs Calculator.dll 
```

在 jscript (wsh) 上：

```
c = new ActiveXObject("Calculator");
WScript.Echo(typeof(c));  // output: object
WScript.Echo(c.Add(4,1)); // output: 5 
```

来源：[msdn](https://msdn.microsoft.com/en-us/library/system.enterpriseservices.servicedcomponent.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)

享受！

# c - C中的合并排序：仅适用于前10000个整数

> ID：11175150
> 
> 赞同：2
> 
> 时间：2012-06-24T05:18:01.107
> 
> 标签：c, mergesort

我正在学习 Coursera 课程，我得到了一个包含 100,000 个整数的文件，可以使用合并排序进行排序。现在，我的函数恰好在前 1000 个整数上工作，但由于某种原因，一旦我达到 10000+，它就停止工作了。是的，我`#define`根据要测试的整数数量来修改顶部的 。我打算使用我在网上找到的另一个实现，但为什么我的代码不起作用？我想我错过了一些非常明显的东西。

哦，对于家庭作业，我需要上交对其进行排序所需的反转次数（多少次，想象一下冒泡排序，是否需要将较早/较小的数字移到较晚/较大的数字后面）。因此是全局变量。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

#define fileLineNumber 1000

void MergeSortL1 ( int arrayIn[], int arraySize );
int inversionCounter = 0;

int main (int argc, const char * argv[])
{
 // Declarations. Whee. Typical counter variable, i, arrayInOrder for boolean logic, a char for the file read type... and the array of so many bits...
 int array[fileLineNumber];
 int i, temp;
 FILE *fp;
 char* filePath = "/Users/TMC/Code/algorithmsCoursera/lesson1/IntegerArray.txt";
 char arrayInOrder = 1, fileOpenType;
 // Here, open a file.
 fileOpenType = 'r';
 fp = fopen( filePath, &fileOpenType);
 // Here, read into an array.
 for ( i = 0; i < fileLineNumber; i ++)
 {
  fscanf(fp,"%d", &temp);
  array[i] = temp;
 }
 fclose(fp);
 MergeSortL1(array, sizeof(array)/sizeof(int*));
 // Maybe check if it is in order.....
 for ( i = 0; i < fileLineNumber - 1; i++)
 {
  if ( array[i] > array[i+1] )
  {
   arrayInOrder = 0;
  }
 }
 /* Shorter, harder to read, have a 2 dimension array, a[2][4]. a[0] == " not" a[1] == ""      *
  * Just would need to printf ( "Array is%s in order.\n", a[arrayInOrder] ); Hard to maintian. */
 printf ("Array is" );
 if ( !arrayInOrder )
 {
  printf ( " not" );
 }
 printf (" in order.\n");
 printf ( "Inversion Counter says: %d\n\n", inversionCounter );
 // Write back to the file.
 fileOpenType = 'w';
 fp = fopen( filePath, &fileOpenType);
 for ( i = 0; i < fileLineNumber; i ++)
 {
  fprintf(fp, "%d", array[i]);
  fputc( '\n', fp );
 }
 fclose ( fp );
 return 0;
}

void MergeSortL1 ( int arrayIn[], int arraySize ) // Arrays are a pointer, so we don't need to capture a return...
{
    printf ( "------------------\nIn MergeSortL1, arraySize = %d\n------------------\n", arraySize );
    if ( arraySize <= 1 ) // Base Case.
    {
     printf ( "Base Case: Returning\n" );
     return;
    }
    else
    {
     int i = 0; // Counter variable
     char loopStillValid = 1, a1HasMore = 1, a2HasMore = 1;
     int temp1 = 0, temp2 = 0;
     int lenArray1 = ( floor(arraySize/2.0) ); // floor() and ceil() are just here in case we have an odd number of variables.
     int lenArray2 = ( ceil(arraySize/2.0) );
     int* array1 = malloc ( lenArray1 * sizeof (int) );
     int* array2 = malloc ( lenArray2 * sizeof (int) );
     for ( i = 0; i < lenArray1; i ++ ) // Assign values.
     {
      array1 [i] = arrayIn[i];
     }
     for ( i = 0; i < lenArray2; i ++ )
     {
      array2 [i] = arrayIn[i+lenArray1];
     }
     MergeSortL1 ( array1, lenArray1 );
     MergeSortL1 ( array2, lenArray2 );
     a1HasMore = lenArray1;
     a2HasMore = lenArray2;
     temp1 = 0;
     temp2 = 0;
     for ( i = 0; i < arraySize; i++)
     {
      loopStillValid = a2HasMore && a1HasMore;
      if ( loopStillValid && (array1[temp1] <= array2[temp2] ) )
      {
       arrayIn[i] = array1[temp1];
       temp1++;
      }
      else if ( loopStillValid && (array1[temp1] > array2[temp2] ) )
      {
       arrayIn[i] = array2[temp2];
       temp2++;
       inversionCounter ++;
      }
      else if (a2HasMore && !a1HasMore /*&& (array1[temp1] <= array2[temp2] )*/)
      {
       arrayIn[i] = array2[temp2];
       temp2++;
      }
      else if (!a2HasMore && a1HasMore /*&& (array1[temp1] > array2[temp2] )*/)
      {
       arrayIn[i] = array1[temp1];
       temp1 ++;
      }
      else
      {
       printf ("\n--------------\nERROR: UNCAUGHT STATUS\ni = %d\narray1[%d] = %d\narray2[%d] = %d\na1HasMore = %d\na2HasMore = %d\n--------------\n\n", i, temp1, array1[temp1], temp2, array2[temp2], a1HasMore, a2HasMore );
      }
      if ( temp1 >= a1HasMore )
      {
       temp1 --;
       a1HasMore = 0;
      }
      if ( temp2 >= a2HasMore )
      {
       temp2 --;
       a2HasMore = 0;
      }
     }
     free(array1);
     free(array2);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T05:31:39.910

您的数组正在堆栈上分配，并且堆栈大小有限制。您需要在堆上分配大型数组。您可以在 c 中使用 malloc 执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T16:04:59.087

好的，事实证明，在存储 500、1000 和 100000 之类的值时，char 没有用。我解决了这个问题，感谢所有提出建议的人，我的写作风格也因此得到了改善。

```
char loopStillValid = 1, a1HasMore = 1, a2HasMore = 1; 
```

我使用 a1HasMore 和 a2HasMore 作为布尔值。现在，作为字符，当输入的数字太高时，它们会环绕为负值。

```
a1HasMore = lenArray1;
a2HasMore = lenArray2; 
```

当 lenArray1 和 lenArray2 为 500 时，这些字符被分配了负值......所以我进入了 if 语句的错误部分`(-1 && -1 != true)`

# php - 选择动态保管箱后PHP将变量传递到下一页

> ID：11175151
> 
> 赞同：0
> 
> 时间：2012-06-24T05:18:10.920
> 
> 标签：php, sql

我创建了以下代码，它使下拉列表能够从 sql db 中获取所有值，它能够获取下拉列表值，但我无法将值选择到下一个 php 页面

```
 <?php
$link = mysql_connect('www.xxxxxxxx.com', 'xxxxxxx', 'xxxxxxx');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("xxxxxxxxxxxxxxxxxxxxx", $link);

function print_dropdown($query)
{
$queried = mysql_query($query);
$menu = '<select name="Topic">';
while ($result = mysql_fetch_array($queried)) {
$topic = htmlspecialchars($result['topic']);
$menu .= '<option value="' . $topic .'">' . $topic . '</option>';
}
$menu .= '</select>';
return $menu;
}

echo print_dropdown("SELECT topic FROM learning_outcome");
?> 
```

我使用会话和缓存从下拉列表中发送选定的值，但在下一页输出为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T05:27:45.827

使用 $_POST['Topic'] 修复

# c - 在 Visual Studio 中识别项目

> ID：11175157
> 
> 赞同：0
> 
> 时间：2012-06-24T05:19:10.463
> 
> 标签：c, visual-studio, project, atl, identity

我有一个用 C 编码的项目。我可以构建它，更改它。我可以用它做任何我想做的事。

现在，问题是，我必须以某种方式识别它。我查看了项目属性部分，但找不到任何有用的东西。

真正的问题是，我为之工作的人想要一个有一些单选按钮和东西的 ATL 项目。我将与 EWF 合作。但是，我的项目必须与他们过去的项目属于同一类型。所以，我不能用 Qt 创建一个窗口并给它们。它必须符合他们给我的要求。因此，示例项目在 C 下编码并具有 ATL 类。有一个资源编辑器——我发现它非常有用。

当我从我的项目中删除一些组件（使用资源编辑器）时，会发生一些执行时错误/异常。代码正在尝试更新某些组件，但找不到它们。

那么，有没有办法识别项目呢？这样我就可以创建相同类型的项目并使用资源编辑器添加我的按钮和东西？

（如果有一些 Visual Studio 的帮助组件，比如 Eclipse 中的帮助组件，那就太容易了。我可以选择一个变量并在代码中的任何地方看到它——它在哪里使用、更改、分配......）

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:46:22.637

检查项目的 vcproj 文件，它应该具有如下属性：

项目类型=

版本=

项目GUID=

关键字=

以上应该可以很好地识别您的项目。如果不是，请解释原因以便我们找到解决方案。

# codeigniter - 将用户添加到项目的主干 REST 请求？

> ID：11175169
> 
> 赞同：1
> 
> 时间：2012-06-24T05:21:14.820
> 
> 标签：codeigniter, rest, backbone.js, underscore.js

我正在设计一个遵循 REST 规范的应用程序，但我不确定如何构建以下内容。

我有一些项目，它们遵循基本的 CRUD 流程。我还有一些用户也遵循基本的 CRUD 流程。但是，我有一项将用户添加到项目的操作，但我不确定如何提出请求。

一个用户可以有多个项目，所以我认为它应该是某种 PUT 请求，但项目 ID 并不是用户模型的一部分。

```
PUT /users/project/3 
```

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:53:07.700

听起来好像用户可以有很多项目，一个项目可以有很多用户。在这种情况下，管理该关系最好通过一个连接表来完成，您可以将其命名为 Participants 之类的东西，它有一个 user_id 和一个 project_id。

然后您可以选择是通过用户还是通过项目来管理参与者。对我来说，管理你的项目参与者是有意义的，因为你正在创建一个新的参与者，所以它是一个 POST。

```
POST /projects/:project_id/participants 
```

有效负载将包含 user_id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T05:56:09.507

如果项目 ID 不是用户模型的一部分，那么这意味着用户 ID 数组是项目模型的一部分……对吗？所以我认为将用户添加到项目中是合适的：

```
PUT /projects/(projectid)/users/(userid) 
```

但是，如果服务的消费者（即骨干网）不需要这些 URL，那么您可能不需要支持这些 URL；也许您只想要一个端点来更新项目：

```
PUT /projects/(projectid) 
```

并且您的 Ajax post call 将包含一个用户列表，作为“更新此项目”请求的一部分。

您可能希望使用 Backbone 中的任何一种形式的 URL，具体取决于 UI。URL 的第一种形式实际上只对“将用户 x 添加到项目 y”之类的请求有用（例如，当管理员单击“将此用户添加到当前项目”或其他任何内容时）。

URL 的第二种形式是您可能用于更新项目批发的形式，其中可能包括用户列表、项目名称等；那是“编辑项目”视图。

```
var ProjectModel = Backbone.Model.extend({
    defaults: {
        "project_name": "",
        "users: [0]
    },

    urlRoot: "/myrestapi/projects",

    url: function() {
        return this.urlRoot + "/" + this.cid;
    }
}); 
```

此模型上的 Backbone*保存*请求将触发（POST？PUT？）到 URL：

```
/myrestapi/projects/(cid) 
```

用 post 数据表示项目的模型状态：

```
{ "project_name": "foo", "users": [15, 18, 42] } 
```

然后由您的 REST 服务触发对服务器数据存储的更新...

# asp.net-mvc-3 - SignalR 多个聊天室

> ID：11175173
> 
> 赞同：10
> 
> 时间：2012-06-24T05:21:42.700
> 
> 标签：asp.net-mvc-3, chat, signalr, livechat, chatroom

我正计划创建一个聊天应用程序，并且我读到[SignalR](http://en.wikipedia.org/wiki/SignalR)是最好的应用技术之一。

我见过这样的例子，但他们只有一个聊天室。

我想要多个聊天室。用户只需选择其中一个聊天室。

虽然我是初学者，但我认为在 SignalR 中创建一个单独的聊天室是这样的：

```
<script type="text/javascript">
    $(function () {
        var connection = $.connection.communicator;
        connection.receive = function (from, msg) {
            $("#chatWindow").append("<li>" + from + ": " + msg + "</li>");
        };
        $.connection.hub.start();

        $("#btnSend").click(function () {
            connection.broadcast($("#txtName").val(), $("#txtMsg").val());
        });
    });
</script> 
```

var connection = 单个聊天室（我不确定）

所以如果我有很多连接（例如，connection1、connection2、connection3....）我可以有多个聊天室吗？

再一次，我不确定这是否正确......请帮助我了解如何实现多个聊天室......

（PS：我看过JABBR，但它的代码让我流鼻血。你能提供简单的例子吗？）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-25T03:01:02.957

您不必打开多个连接，只需打开一个，但要使用`Group`：

```
public class MyHub : Hub, IDisconnect
{
    public Task Join()
    {
        return Groups.Add(Context.ConnectionId, "foo");
    }

    public Task Send(string message)
    {
        return Clients["foo"].addMessage(message);
    }

    public Task Disconnect()
    {
        return Clients["foo"].leave(Context.ConnectionId);
    }
} 
```

一个组就是一个房间，所以每次有一个用户加入一个房间，你只需将该用户添加到该房间的组中，当你要广播消息时，只需将消息发送给该组中的客户端。

更多详情： [https ://github.com/SignalR/SignalR/wiki/Hubs](https://github.com/SignalR/SignalR/wiki/Hubs)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-03-31T00:56:57.163

简单的信号器示例：访问[https://docs.microsoft.com/en-us/aspnet/core/tutorials/signalr?view=aspnetcore-3.1&tabs=visual-studio](https://docs.microsoft.com/en-us/aspnet/core/tutorials/signalr?view=aspnetcore-3.1&tabs=visual-studio)

然后更改chat.js

```
 document.getElementById("sendButton").addEventListener("click", function (event) {
    var user = document.getElementById("userInput").value;
    var message = document.getElementById("messageInput").value;
    var room = document.getElementById("room").value;
    connection.invoke("SendMessage", user, message,room,false).catch(function (err) {
        return console.error(err.toString());
    });
    event.preventDefault();
});

document.getElementById("joinButton").addEventListener("click", function (event) {

    var room = document.getElementById("room").value;
    var user = document.getElementById("userInput").value;
    var message = document.getElementById("messageInput").value;
    connection.invoke("SendMessage", user, message, room,true).catch(function (err) {
        return console.error(err.toString());
    });
    event.preventDefault();
}); 
```

使用以下代码编辑 ChatHub.cs 文件：

```
using Microsoft.AspNetCore.SignalR;
using System.Threading.Tasks;

namespace SignalRChat.Hubs
{
    public class ChatHub : Hub
    {
        public async Task SendMessage(string user, string message, string room, bool join)
        {
            if (join)
            {
                await JoinRoom(room).ConfigureAwait(false);
                await Clients.Group(room).SendAsync("ReceiveMessage", user, " joined to " + room).ConfigureAwait(true);

            }
            else
            {
                await Clients.Group(room).SendAsync("ReceiveMessage", user, message).ConfigureAwait(true);

            }
        }

        public Task JoinRoom(string roomName)
        {
            return Groups.AddToGroupAsync(Context.ConnectionId, roomName);
        }

        public Task LeaveRoom(string roomName)
        {
            return Groups.RemoveFromGroupAsync(Context.ConnectionId, roomName);
        }
    }

} 
```

html示例：

```
<div class="container">
    <div class="row">&nbsp;</div>
    <div class="row">
        <div class="col-2">Room</div>
        <div class="col-4"><input type="text" id="room" /></div>

    </div>
    <div class="row">&nbsp;</div>
    <div class="row">
        <div class="col-6">
            <input type="button" id="joinButton" value="Join  Room" />
        </div>
    </div>
</div>

<div class="container">
    <div class="row">&nbsp;</div>
    <div class="row">
        <div class="col-2">User</div>
        <div class="col-4"><input type="text" id="userInput" /></div>
    </div>
    <div class="row">
        <div class="col-2">Message</div>
        <div class="col-4"><input type="text" id="messageInput" /></div>

    </div>
    <div class="row">&nbsp;</div>
    <div class="row">
        <div class="col-6">
            <input type="button" id="sendButton" value="Send Message" />
        </div>
    </div>
</div>
<div class="row">
    <div class="col-12">
        <hr />
    </div>
</div>
<div class="row">
    <div class="col-6">
        <ul id="messagesList"></ul>
    </div>
</div>
<script src="~/js/signalr/dist/browser/signalr.js"></script>
<script src="~/js/chat.js"></script> 
```

[![在此处输入图像描述](../Images/75ccfdbd4ea7193f8a8f29df9a576ada.png)](https://i.stack.imgur.com/FL7ug.jpg)

[signalr](/questions/tagged/signalr "显示标记为“signalr”的问题") [c#](/questions/tagged/c%23 "显示标记为“c#”的问题") [.net](/questions/tagged/.net "显示标记为“.net”的问题") [core3](/questions/tagged/core3 "显示标记为“core3”的问题") [聊天](/questions/tagged/chat "显示标记为“聊天”的问题") [室](/questions/tagged/chatroom "显示标记为“聊天室”的问题")

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T04:52:51.817

好的...这是制作多个房间的最简单方法：

```
$(function () {
    var chat = jQuery.connection.chat;

    chat.addMessage = function (message, room) {

        if ($('#currentRoom').val() == room) {
            $('#messagesList').append('<li>' + message + '</li>');
        }
    };

    chat.send($('#textboxMessage').val(), $('#currentRoom').val());
    $('#textboxMessage').val("");

    $.connection.hub.start();
});

public class Chat : Hub
{
   public void Send(string msg, string room)
   {
       Clients.addMessage(msg, room);
   }
} 
```

我有一个可用房间的下拉列表，所选房间将是一个元素的值，比如说一个文本框：

```
 <input type="text" readonly="readonly" id="currentRoom" /> 
```

现在，每次调用 .send 时，我们不仅会传递消息，还会传递当前房间......

.addMessage 将返回两个值给每个客户端，一个是消息，另一个是房间......现在我们将返回的“房间”与客户端的当前房间进行比较。一旦它们匹配，消息将显示在当前房间中：

```
if ($('#currentRoom').val() == room) {
    $('#messagesList').append('<li>' + message + '</li>');
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-24T14:50:40.487

您不需要多个连接。只需使用一个并将元数据放入返回的 JSON 消息中，以了解该消息用于哪个房间。然后，JavaScript 代码需要将消息引导到正确的房间。

# nginx - 位置子目录 nginx 与重写 drupal

> ID：11175175
> 
> 赞同：0
> 
> 时间：2012-06-24T05:21:58.450
> 
> 标签：nginx, drupal-7

我有 nginx 的这个配置：

```
server {
    listen       80;
    server_name  example.com www.example.com;

    location = / {
            root /var/www/example.com;
            index index.php;
    }

    location / {
            root   /var/www/example.com/Drupal;
            index  index.php index.html;

            if (!-f $request_filename) {
                    rewrite  ^(.*)$  /index.php?q=$1  last;
                    break;
            }

            if (!-d $request_filename) {
                    rewrite  ^(.*)$  /index.php?q=$1  last;
                    break;
            }
    }

    location ~ \.php$ {

            set $php_root /var/www/example.com/Drupal;

            if ($request_uri ~ ^/MassMail) {
                    set $php_root /var/www/example.com/MassMail;
            }

            fastcgi_pass   127.0.0.1:9000;
            fastcgi_index  index.php;
            include /etc/nginx/fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $php_root$fastcgi_script_name;

    } 
```

我在 php 中有 2 个应用程序：

*   /var/www/example.com/MassMail 中的第一个
*   /var/www/example.com/Drupal 中的第二个（Drupal 博客）

我的服务器提供正确的两个 URL

example.com/ --> drupal 博客

example.com/MassMail --> 其他应用

但它不提供图像或 JavaScript ...（错误 404）

对于 serve img 等，我已经测试了很多这样的东西（例如......）：

```
 location ~* ^.+.(jpg|jpeg|gif|css|png|js|ico)$ {
           expires         30d;
            access_log      off;
    } 
```

可能缺少根目录，但是哪个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:08:59.870

您的 php 认为 MassMail 安装在 / (root) 中，尝试为 staitc 文件添加第二个位置：

```
location ~* ^/MassMail.+.(jpg|jpeg|gif|css|png|js|ico)$ {
           expires         30d;
            access_log      off;
           root /var/www/xxx.com/MassMail;
} 
```

**配置#2**

```
location ~* ^/(.*)/.+.(jpg|jpeg|gif|css|png|js|ico)$ {
  expires         30d;
     access_log      off;
   root /var/www/xxx.com/$1;
} 
```

**配置#3**

将每个应用程序配置放在特殊文件中（MassMail 的示例）：

*应用程序/massmail.conf*：

```
 location ~ \.php$ {

            set $php_root /var/www/xxx.com/Drupal;

            if ($request_uri ~ ^/MassMail) {
                    set $php_root /var/www/xxx.com/MassMail;
            }

   location ~* ^/MassMail.+.(jpg|jpeg|gif|css|png|js|ico)$ {
           expires         30d;
            access_log      off;
           root /var/www/xxx.com/MassMail;
   } 
```

*nginx.conf*：

```
.....
include applications/massmail.conf; 
```

# asp.net-mvc-3 - MVC3 - 创建模型数据并与另一个表/模型中的 Guid 关联的控制器方法

> ID：11175177
> 
> 赞同：0
> 
> 时间：2012-06-24T05:22:22.933
> 
> 标签：asp.net-mvc-3, model, controller-action

我有 2 个模型，每个模型都有许多属性 - Object1 和 Object2

我在 SQL db 中与它们有外键关系 - Object1 可以有很多 Object2

在我的 Object2Controller 的 Create() 方法中创建 Object2 后，我如何将 Object2 与 Object 1 的 Guid 关联？

这是代码：

控制器：

```
 [HttpPost]
public ActionResult Create(Object2 object2)
    {
        if (ModelState.IsValid)
        {
            object2.Object2Id = Guid.NewGuid();
            db.Object2.Add(object2);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }
        return View(object2);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T05:46:06.823

在这种情况下，我只能看到两个选项：

1.  在模型中预填充*Object1* GUID，当您从视图中将其发布回来时，就像其他属性一样。这可以根据您的要求以不同的方式完成（用户选择的下拉菜单、预填充到隐藏字段中等）。
2.  跟踪当前用户正在处理的*Object1*的服务器。您可以使用*Session*对象，甚至使用*TempData*来执行此操作。

**编辑**

要从*Object1*详细视图创建新的*Object2*，请遵循此流程。

 *首先，详细视图上的一个简单表单：

```
@using (var form = Html.BeginForm("Add", "Object2Controller", FormMethod.Get)) 
{ 
    <input type='hidden' name='Object1ID' value='@Model.Object1ID' />
    <submit type='submit' value='Add Object1' />
} 
```

然后，您将在*Object2*的控制器中有一个*Add*方法，该方法预先填充了外键：

 *```
[HttpGet]
public ActionResult Add(Guid Object1ID)
{
    Object2 newObj = new Object2();
    newObj.Object1ID = Object1ID;
    return View("MyAddView", newObj);
} 
```

这将指向*Object2*详细信息表单，该表单将返回到您问题中的*Create*方法。**

# javascript - 为什么我的话被砍成两半？

> ID：11175183
> 
> 赞同：3
> 
> 时间：2012-06-24T05:23:34.673
> 
> 标签：javascript, string, chop

我正在尝试将文本切成固定长度，但我不想将单词切成两半，所以我需要做这样的事情：

```
function fixedLength(str, len, bol) {
    var i, l = str.length, left = 0, right = l - 1, rtn, tmp;

    tmp = str.charAt(len);

    if (bol || tmp === " " || tmp === "") {
        rtn = str.substr(0, len);
    } else {
        tmp = len - 1;

        for (i = tmp; i > -1; i--) {
            if (str.charAt(i) === " ") {
                left = i;
                break;
            }
        }

        for (i = tmp; i < l; i++) {
            if (str.charAt(i) === " ") {
                right = i;
                break;
            }
        }

        rtn = str.substr(0, ((Math.abs(left - tmp) <= Math.abs(right - tmp)) ? left : right));
    }

    return rtn + "...";
} 
```

但是当我使用它时：

```
var str = "the quick brown fox jumped over the lazy dog";

for (var i = 0; i < 45; i++) {
    document.write("i:" + i + " - " + fixedLength(str, i) + "<br>");
} 
```

除了这一行之外，每个人似乎都可以正常工作`"i:43 - the quick brown fox jumped over the lazy do..."`，“狗”这个词被切成两半（[**演示**](http://jsfiddle.net/YXwfb/)）

我找不到漏洞，每次我改变一些东西，我都会添加一个新的错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T05:51:05.990

没有检查您的代码，但您可以编写更简单的代码：

```
function fixedLength(str, len, bol) {
    while(!bol && str[len] && str[len] !== ' ') {
      len--;
    }
    return str.substr(0, len) + '...';
} 
```

和[演示](http://jsfiddle.net/YXwfb/2/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T06:01:52.817

您可以尝试使用正则表达式来查找最后一个`space`字符。

```
function fixedLength(str, len, bol) {
    if(str.length <= len) {
       return str;  
    }

    var rtn = str.substr(0, len).match(/.* /);
    if(rtn == null) {
        rtn = "";
    } else {
        rtn = rtn + "...";
    }
    return rtn;
} 
```

在这里演示：http: [//jsfiddle.net/R8qMQ/2/](http://jsfiddle.net/R8qMQ/2/)

我还添加了一个验证，如果输入字符串已经在最大允许长度内，只需返回它。如果没有可以拆分的单词，则返回空字符串而不是 NULL。

我会使用正则表达式，因为将来我还可以添加其他我可能认为是单词分隔符的字符（例如`.`，或者`;`可能是正则表达式`b`- 单词分隔符）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T06:17:38.420

如果您有兴趣，原始代码中的错误是在对返回值的最终分配中，您在其中比较了 tmp - left 和 tmp - right。问题在于，对于字符串中的最后一个单词“dog”，在其初始值设置为 l - 1 后，权利永远不会被重新分配；所以你的算法就*好像*在索引 44 找到了一个空格，而实际上那里有 ag。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T05:33:53.123

```
rtn = str.substr(0, ((Math.abs(left - tmp + 1) <= Math.abs(right - tmp)) ? left : right)); 
```

我没有使用调试器对其进行调试，但使用您的[Demo](http://jsfiddle.net/YXwfb/)非常有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T05:46:43.380

我尝试以一种非常容易理解的方式重构您的代码：

```
function prettyCut(word, length) {
    //account for ellipses
    length -= 3;

    //break down into lengths
    var units = word.split(" ").map(function(word) {
        return word.length+1;
    });

    //map to accumulated sums
    var runningSum = 0;
    var sums = units.map(function(length, index) {
        return (runningSum += length)
    }); 

    //find difference from goal of each sum
    var differences = sums.map(function(sum) {
        return (length-sum)>0?(length-sum):100;
    });

    //minimize and return
    var closest = Math.min.apply(this, differences);
    return closest==0?word:word.substr(0, length-closest)+"...";
}
prettyCut("the quick brown fox jumped over the lazy dog", 45); 
```

# mongodb - 如何关联MongoDB中的数据？

> ID：11175184
> 
> 赞同：6
> 
> 时间：2012-06-24T05:23:46.043
> 
> 标签：mongodb, nosql

我将字符串与字符串的所有者（每个字符串一个或多个所有者）一起存储在数据库中。

我一直使用 MySQL，这是一个传统的关系数据库。在这种情况下，我会将字符串与唯一 id 一起存储在一个表中，然后将字符串的唯一 id 与所有者（作为多条记录）一起存储在第二个表中。

然后我可以使用 SQL Join 来获取所有者的字符串。

我现在正在使用 MongoDB 进行一个项目，并且我正在做与上面相同的事情。

在使用 NoSQL 数据库时，这会被认为是错误的方式吗？在使用 NoSQL 时，我不应该考虑“关系”吗？

我可以想到在 MongoDB 中实现相同的另一种方法是像这样存储它：

```
{
    "string": "foobar",
    "owners": [
        "owner1",
        "owner2",
        "owner3"
    ]
} 
```

但是，在这种情况下，我不确定如何搜索“owner1 拥有的所有字符串”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T08:34:40.090

> 在使用 NoSQL 数据库时，这会被认为是错误的方式吗？在使用 NoSQL 时，我不应该考虑“关系”吗？

关于嵌入的问题有很多，归结为很少。

如果您希望嵌入，此处未提及的内容需要考虑：

*   文档大小会大幅增加吗？如果是这样，那么文档可能会经常在磁盘上移动，这是一件坏事。
*   相关行是否会与我正在处理的集合有很多连接（即`video`不能嵌入`user`）。如果是这种情况，您在将冗余数据从相关行复制到子文档时可能会遇到问题，尤其是在更新该冗余数据时。
*   我需要如何显示这些结果？

显示结果始终是是否嵌入的关键决定因素。如果您需要对大量行（例如 1000 行）进行分页，则需要`$slice`在普通查询或聚合框架中使用该运算符。在 1000 时，我承认它可能非常快，但内存中的操作迟早会比正常查询慢（事实上它总是应该如此）。

如果您需要对子文档进行复杂的排序和显示，您可能希望将它们拆分出来，而是具有以下文档结构：

```
{
    "string": "foobar",
    "owners": [
        ObjectId(),
        ObjectId(),
        ObjectId()
    ]
} 
```

我认为这对于您的数据实际上可能是一种性能更高的结构，因为`owner`听起来像是集合`user`中的一行。`users`

您可以参考他们的`_id`. 这很酷，因为您可以嵌入关系，但同时文档只会增长很少，这希望意味着磁盘不断移动的可能性很小，不仅如此，而且更小的工作集可以创建整体上更高性能的操作。不仅如此，当然`_id`所有者的身份很少会改变，因此您最有可能需要对这个数据子集进行的唯一操作就是创建和删除。

回到复杂的排序和分页。有了这些数据，您当然可以`owner`通过一次往返获取所有 ID，然后在另一次往返中，您可以`users`使用`$in`允许您需要的复杂显示的正常查询来查询表中的那些所有者行。

所以我发现这个结构总体上是非常高效的。

当然，这种结构取决于您的查询，最好将字符串 id 存放在用户身上，但在这种情况下它不会，因为用户可能可以拥有许多字符串，因此我会说它是一个多->多嵌入在字符串端的关系。

希望这会有所帮助，而且我没有绕圈子，

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T12:02:28.010

为了补充 dbaseman 的回答：

是的，您的方法似乎还可以。您可以轻松搜索“owner1 拥有的所有字符串”

```
db.collection.find({owners: 'author1'}) 
```

这是可能的，因为 mongodb 以一种特殊的方式处理数组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T11:55:36.450

在处理嵌入式数据时，我建议您熟悉 mongo 中的原子性行为。一个很好的起点是：http: [//docs.mongodb.org/manual/core/data-modeling/#atomicity](http://docs.mongodb.org/manual/core/data-modeling/#atomicity)

在您的特定情况下，将用户 ObjectId（Sammaye 推荐）添加/删除到您的“所有者”数组时，您将希望在字符串 doc 上使用[findAndModify()](http://docs.mongodb.org/manual/reference/command/findAndModify)操作，以确保当多次写入该文档时发生时，仍然保持数据完整性。

在此操作中，我建议使用以下运算符：

1.  添加所有者时，$addToSet 以防止重复
2.  删除所有者时，$pull

两者都记录在这里： [http ://docs.mongodb.org/manual/reference/operators/#update-operators-array](http://docs.mongodb.org/manual/reference/operators/#update-operators-array)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-24T05:52:39.553

这看起来是正确的方法；但请记住，它始终取决于您的项目的整体性、目标是什么（性能、灵活性）、您打算最频繁地运行哪些查询、是否需要运行临时查询以及其他因素。但总的来说，正如您所写，使用嵌套文档是使用连接和外键的正确替代方法。

还要记住[最大文档大小](http://www.mongodb.org/display/DOCS/Documents#Documents-MaximumDocumentSize)（当前为 16MB），如果给定字符串有许多（例如数十万）所有者，这将是一个问题。

# java - 并非所有到 unix shell 的 java 命令都在运行

> ID：11175186
> 
> 赞同：0
> 
> 时间：2012-06-24T05:24:24.307
> 
> 标签：java, unix, command, runtime, shellexecute

我正在编写一个将命令发送到 unix shell 的应用程序。

我在发出 cp 和 chmod 命令（我知道）方面从来没有遇到过任何麻烦，但由于某种原因，mv 命令实际上不会移动我加速的文件？

我的代码可以显示如下：

```
 import java.io.IOException;
    public class ExecuteCommand {   
        public static void main(String[] args){
            ExecuteCommand exec = new ExecuteCommand("cp /some/directory/file.txt /some/directory/of/mine/");
            ExecuteCommand exec2 = new ExecuteCommand("chmod 666 /some/directory/of/mine/file.txt");
            ExecuteCommand exec3 = new ExecuteCommand("mv /some/directory/of/mine/file.txt /some/directory/of/mine/subDirectory/");
        }
        public ExecuteCommand(String command) {
            try {
                    System.out.println("EXECUTING!::" + command);       
                    Process child = Runtime.getRuntime().exec(command);             
            } catch (IOException e) {
            }
        }

    } 
```

我尝试在命令之间放置计时器，但没有取得任何进展，以确保处理了 %100 的命令。

请注意，我的代码包含示例信息，如果某些 unix 文件系统语法不正确，请原谅我，请不要将问题归咎于此。

如果您需要任何进一步的信息，请询问，我会尽快提供

谢谢各位=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:42:06.037

您的示例代码的一个问题是您正在压缩异常。如果有任何问题，您将丢弃证据。

第二个问题是在启动下一个命令之前您没有等待一个命令完成。如果后一个依赖于前一个完成，它将失败。

第三个问题是您没有检查命令返回/退出代码，或者查看它们可能产生的任何错误消息。错误消息可能会告诉您为什么命令不起作用……如果您费心获取并打印它们。

最后的（元）问题是这不是你真正的代码......所以我们不知道我们看到的问题是否只是你的问题的产物。请提供真实代码，而不是一些糟糕的版本。

# eclipse - Eclipse Git 推送到上游错误

> ID：11175189
> 
> 赞同：1
> 
> 时间：2012-06-24T05:25:44.307
> 
> 标签：eclipse, git

我克隆[https://github.com/java093/springside4.git](https://github.com/java093/springside4.git) 并在 Eclipse 中成功提交本地更改的文件。然后我使用 Team->Push to Upstream 它显示错误： **推送期间发生内部异常：[https://github。 com/java093/springside4.git](https://github.com/java093/springside4.git)：不允许 git-receive-pack**

我该如何解决这个问题。在我的另一台 PC 上使用相同的 git url (https://github.com/java093/springside4.git) 成功。

1.  我的 Eclipse 版本 eclipse-jee-helios-SR2-win32。
2.  我已经在我的 github 帐户中设置了关于此笔记本的 SSH 密钥。但我如何检查它是否已成功设置。
3.  我在哪里可以找到**git-receive-pack 不允许的**日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T07:52:50.377

检查您是否在“其他 PC”上为上游存储库使用相同的远程地址：

您可以使用：

*   一个 https 地址，就像您所做的那样：但是您的 ssh 密钥将不会参与其中
*   一个 ssh 地址：`git@github.com:[repo_owner_username]/[repo_name].git`并使用[此处所示](https://stackoverflow.com/a/10724708/6309)的配置文件。

底线是：如果您希望使用 ssh 密钥，则必须使用 ssh url，而不是 https （这将使用 GitHub 凭据，即您的 GitHub 登录名和密码，`_netrc`在 Windows 或`.netrc`Unix 上使用“[与 github 同步](https://stackoverflow.com/a/5378094/6309)”，而不是您的 ssh 密钥）。

正如 OP 在下面提到的，这种情况下的问题类似于[bb 描述](http://www.bluehostforum.com/showthread.php?20304-Bluehost-Solution-to-the-Git-PATH-issue-when-using-a-non-interactive-shell)的问题：

> 使用非交互式 shell 时 Git PATH 问题的解决方案

## > 在 Linux 上

```
git config remote.origin.uploadpack '/home/<user name>/bin/git-upload-pack'
git config remote.origin.receivepack '/home/<user name>/bin/git-receive-pack' 
```

（或者，在 OP 的情况下考虑服务器上的 git 安装路径：

```
git config remote.origin.uploadpack '/home/bin/git-upload-pack'
git config remote.origin.receivepack '/home/bin/git-receive-pack' 
```

)

## > 在 Windows 上

```
git config remote.origin.uploadpack 'libexec/git-core/git-upload-pack'
git config remote.origin.receivepack 'libexec/git-core/git-receive-pack' 
```

> 上述解决方案运行良好，但假设您已经有一个本地 git 存储库，它正在跟踪服务器上的远程存储库。
> **克隆 repo 将失败并出现同样的错误**。

```
git clone -u /home/<user>/bin/git-upload-pack <user>@<host>:/<path-to-repo>
git clone -u /home/bin/git-upload-pack <user>@<host>:/<path-to-repo> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T17:53:11.903

非常感谢。这个问题是因为**git-receive-pack** (push) 命令设置不正确。我已经解决了：**git config remote.origin.uploadpack /home/bin/git-upload-pack**

[GIT：推送到远程服务器时出现“git-upload-pack：找不到命令”](https://stackoverflow.com/questions/6037707/git-git-upload-pack-command-not-found-while-pushing-to-remote-server)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-24T18:07:22.007

在大多数情况下，这是由于缺少身份验证详细信息：

1.  打开配置。
2.  单击 URI 字段的更改按钮。
3.  在更改弹出窗口中确保您的 URI 路径类似于：“ [https://github.com/[repo_username]/[repo_name].git](https://github.com/[repo_username]/[repo_name].git) ”
4.  选择 https 协议
5.  添加 repo_username 和密码。

希望它能解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-17T09:43:27.277

检查您是否拥有对此存储库的“写入”访问权限。

# javascript - 使用 jsonp 调用函数

> ID：11175193
> 
> 赞同：1
> 
> 时间：2012-06-24T05:28:12.127
> 
> 标签：javascript, jquery

我有一些 html5 postMessage 代码：

```
 window.addEventListener("message", FA.recieveMessage, false); 
```

该侦听器调用此函数：

```
FA.recieveMessage = function(e){
if (e.data == "closeFA"){
            console.log("Type of data: "+e.data);
}
}; 
```

现在在 ie8 上这段代码不起作用，因为它不支持 html5 消息传递。所以我想是否有办法通过发送jsonp类型的ajax请求来调用该函数！？

有没有办法用 jsonp 模拟消息传递？

如果我确实将 jsonp 请求发送到另一台服务器，这是否意味着它是一个新请求并且它不会知道现在触发的所有事件？

**更新**

好的，这就是我想要的。我想关闭一个 iframe。所以在一页上，我有这个javascript：

```
 $.ajax({url:      'http://api.apps.com/html/'+FA.appID,
      data:      {},
      dataType: 'jsonp',
      timeout:  10000,
      jsonp: "closeIFrame"
      }); 
```

这应该指示apps/html 页面调用closeIframe 函数是吗？

```
function closeIFrame() {
    jQuery("#fa-iframe-container").fadeOut(300, function(){ jQuery(this).remove(); });
FA.bannerShown = false; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:10:05.973

是的，从技术上讲，您可以使用 jsonp 模拟消息传递，每次调用都是一个新请求，但会话将可用，因此 jsonp 服务可以感知状态。

***更新***

根据我的经验，您不会在文件中调用函数，而是每个文件都代表一个函数，因此您可能拥有以下服务：

[http://example.com/add?message=hello](http://example.com/add?message=hello)

[http://example.com/get](http://example.com/get)

# php - php。服务器级别的声明函数

> ID：11175194
> 
> 赞同：2
> 
> 时间：2012-06-24T05:28:15.367
> 
> 标签：php, function

有没有办法在服务器级别范围内创建函数？

例如，我已经函数：

```
function vd($dump){
   echo "<pre>";
   var_dump($dump);
   echo "</pre>";
   exit;
} 
```

我想在服务器上的所有项目中使用它，而无需包含此功能的包含文件。可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T05:34:34.563

如果您可以访问服务器的 PHP 正在使用的 .ini 文件，则有一种方法。这是一个名为[auto_prepend_file](http://us3.php.net/manual/en/ini.core.php#ini.auto-prepend-file)的指令，它允许您在实际脚本运行之前指定一个基本上“包含”在每个页面加载中的文件。

看到与此一起使用的日志记录/跟踪有些常见，您的函数也可以在此处声明。

# android - 使用 Jenkins 触发 svn android 构建

> ID：11175199
> 
> 赞同：1
> 
> 时间：2012-06-24T05:30:35.263
> 
> 标签：android, svn, build, jenkins

嗨朋友们，任何人都可以建议我如何使用 jenkins 触发 svn android 构建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T07:29:23.270

一般来说，有两种方法可以做到这一点，如[本文](http://jenkins-ci.org/node/212)所述：您可以轮询 SVN 存储库或编写提交后挂钩。您将需要[Subversion 插件](https://wiki.jenkins-ci.org/display/JENKINS/Subversion+Plugin)（它是 Jenkins 发行版的一部分 - 但以防万一检查它是否已安装并启用）。

*您可以通过选中源代码管理系统中的**Subversion*单选框来配置您的构建，然后指定要签出的内容以及将其放入工作副本的位置（右侧有“？”图标 - 使用它们寻求帮助）。如果您使用轮询，您还需要选中*Build Triggers部分中的**Poll SCM*框并指定轮询时间表（再次使用“？”帮助）。

# jquery - Jquery：Keypress 将数据附加到 youtube 结果中，如何用新数据刷新结果？

> ID：11175200
> 
> 赞同：0
> 
> 时间：2012-06-24T05:30:49.850
> 
> 标签：jquery

我在这里有一个 jsfiddle：http: [//jsfiddle.net/hhimanshu/eLhLS/1/](http://jsfiddle.net/hhimanshu/eLhLS/1/)

**当前的：**

```
On keypress, it keeps on appending results from youtube 
```

**必需的：**

```
On keypress, update the results, with new data instead of appending it 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T05:54:55.287

你想要这样的[http://jsfiddle.net/eLhLS/37/](http://jsfiddle.net/eLhLS/37/)吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T05:43:17.847

这应该工作：http: [//jsfiddle.net/epinapala/eLhLS/38/](http://jsfiddle.net/epinapala/eLhLS/38/)

```
 $(function(){
    $('#search-input').live('keyup',function() {
        // alert('hi');
        var clone = $('#result').find('.item').clone();

        $('#result').html('');
        $("#result").html(clone); 
        var search_input = $(this).val();
        var keyword = encodeURIComponent(search_input);
        var yt_url = 'http://gdata.youtube.com/feeds/api/videos?q='+keyword+'&format=5&max-results=10&v=2&alt=jsonc';

        $.ajax({
          url: yt_url,
          type: 'GET',
          dataType: 'jsonp',
          complete: function(xhr, textStatus) {
            //called when complete
          },
          success: function(response, textStatus, xhr) {
            if(response.data.items) {
                $.each(response.data.items, function(i, data) {
                    console.log(data)
                    search_data = {
                        'id': data.id,
                        'title': data.title,
                        'views': data.viewCount,
                        'thumbnail': data.thumbnail['sqDefault'],
                    }
                    var item = $('#result .item').clone().removeClass('item');
                    video_result_template(item, search_data).appendTo('#result').fadeIn(); // slow/fast?
                });
            } else {

            }
          },
          error: function(xhr, textStatus, errorThrown) {
            //called when there is an error
          }
        });

    });
});

function video_result_template(item, data) {
    item.find('.thumbnail').text(data.thumbnail);
    item.find('.title').text(data.title);
    item.find('.views').text(data.views);
    return item;
}
​ 
```

​</p>

# sql - 使用另一个表中的“where”值进行 SQL 更新？

> ID：11175201
> 
> 赞同：1
> 
> 时间：2012-06-24T05:30:50.737
> 
> 标签：sql

我有 2 张桌子，`table_a`并且`table_b`. 我想从中获取`user_id`并`table_a`更新记录`table_b`。`user_id`像这样的东西：

```
Select * from table_a where user_id ="Ken"

if result is 22 

Update score = 1 where id = 22\. 
```

这些查询有效，但我想将它们组合在一起。谁能告诉我最好的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T05:34:53.967

试试这个应该可以，

```
UPDATE table_b
SET score=1
WHERE id = (select id from table_a where user_id ="Ken") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T05:35:28.773

```
UPDATE table_b SET score = 1
WHERE id IN (SELECT * FROM table_a WHERE user_id = "Ken") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T05:38:27.910

```
IF EXISTS (Select * from table_a where user_id ="Ken" )
If result=22
BEGIN
UPDATE table_a SET score = 1
END 
```

# java - 让java经常打开然后附加一个文件

> ID：11175202
> 
> 赞同：1
> 
> 时间：2012-06-24T05:31:03.110
> 
> 标签：java

我一直在尝试尽可能多地阅读有关此内容的 stackoverflow，但我需要打开一个 Outlook 脱机模板 (.oft) 文件。然后附上一个文件。我会将命令放入 java 应用程序中。

我会使用命令行开关，但它会创建带有附件的新消息并打开经常文件，它不会将其附加到.oft。

```
"C:\Program Files (x86)\Microsoft Office\Office14\Outlook.exe" /f "C:\RSASoftToken\android.msg" /a "C:\RSASoftToken\android\WMH7.sdtid" 
```

如果有办法让命令行工作，那将是最简单的。如果不是，我还能在 java 中做什么？

我需要将其添加到此代码中

```
 //the New File Name
    String newFileName = Prefix + fileName.substring(0,4) + Suffix + fileExtension;
    String tentativeName = "new Filename will be ->"+newFileName+"\n";
    System.out.println(tentativeName);
    if(cbxAndroid.isSelected() == true ){
        try {   Runtime rt = Runtime.getRuntime();                               
                Process pr = rt.exec("cmd /c \\RSASoftToken\\TokenConverter.exe \\RSASoftToken\\android\\"+newFileName+" -android -o \\RSASoftToken\\android\\"+newFileName.substring(0,4)+".txt");
                BufferedReader input = new BufferedReader(new InputStreamReader(pr.getInputStream()));                  
                String line=null;                 
        while((line=input.readLine()) != null) {                     
            System.out.println(line);                 }                  
        int exitVal = pr.waitFor();                 
        System.out.println("Exited with error code "+exitVal);              
        } catch(Exception e) {                 
            System.out.println(e.toString());                 
            e.printStackTrace();             
            }         

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:20:14.707

以下是从 Java 执行该命令的方式：

```
 Process p = Runtime.getRuntime().exec(new String[]{
        "C:\Program Files (x86)\Microsoft Office\Office14\Outlook.exe",
        "/f",
        "C:\mail\android.oft",
        "/a",
        "C:\android\file.txt"); 
```

然后，您可以调用对象`getXxxStream()`上的方法`Process`来获取用于写入外部进程标准输入并从其标准输出和标准错误中读取的流。

但是，我不明白你在这里真正想要做什么，或者运行这个命令是否会让你实现它。

# debugging - 如何为记录元素值的多维数组设置监视？

> ID：11175203
> 
> 赞同：2
> 
> 时间：2012-06-24T05:31:08.753
> 
> 标签：debugging, freepascal, lazarus

当我添加 watch 的值时使用以下代码：

```
A[1, 1].IsX 
```

并将断点放在下面的注释行上，监视列表显示此消息：

```
Type array [1..3] of TBLOCK is not a structure or union type. 
```

而不是显示记录元素值。这是示例代码：

```
type
  TBlock = record
    IsX: Boolean;
    IsO: Boolean;
    IsEmpty: Boolean;
  end;

procedure TForm1.Button1Click(Sender: TObject);
var
  A: array[1..9, 1..3] of TBlock;
begin
  A[1, 1].IsX := True;
  // add watch for A[1, 1].IsX and set the breakpoint on the following line
  if A[1, 1].IsX then
    ShowMessage('Prevent against debugger elimination.');
end; 
```

来自监视列表的屏幕截图：

![在此处输入图像描述](../Images/d5ef0fa73ec3bc9f1b4567114fdb170c.png)

如何正确设置记录元素值的多维数组的监视？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:49:04.160

像这样添加手表：

```
A[1][1].IsX 
```

我无法告诉您为什么原始方式会显示该错误消息，但上述方式对我有用：

![在此处输入图像描述](../Images/feafaadec431035d4e6277a7a62041c9.png)

# objective-c - UIDatePicker 减慢速度

> ID：11175206
> 
> 赞同：11
> 
> 时间：2012-06-24T05:31:52.513
> 
> 标签：objective-c, ios, xcode, uidatepicker

我度过了一段美好的时光，并得出结论，这`UIDatePicker`会减慢`presentModalViewController:`几秒钟。我有一个带有两个按钮和一个日期选择器的视图控制器。在另一堂课中，我向这个视图控制器展示了这段代码：

```
RandomClass *class = [[RandomClass alloc] init];
[class setModalTransitionStyle: UIModalTransitionStyleCrossDissolve]; //an animation
[self presentModalViewController: class animated: YES];
[class release]; 
```

我已经删除了日期选择器，`RandomClass`并注意到我可以`RandomClass`相当快地呈现，当我在视图中插入一个日期选择器时，它会再次减慢速度。我尝试以编程方式添加日期选择器，并在不同的线程中显示模态视图控制器，但仍然存在滞后。

你有同样的问题吗？你知道如何解决吗？我非常感谢您的回答和帮助。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T11:35:59.777

要解决 UIDatePicker 的性能问题，请以编程方式创建您的选择器，并且仅在 viewDidAppear 中。例如，如果您在 viewDidLoad 中创建它，缓慢的实例化将阻止视图出现在屏幕上。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-22T02:27:46.477

我在模态视图演示中遇到了同样缓慢的性能。我通过牺牲一些内存来提高性能来找到解决方案。

**背景：** 我的应用程序使用的是 Model-View-Controller-Store 模型。Store 是一个处理我的模型的单例，因此一旦实例化，它几乎可以从我的任何类中访问。我使用 Store 类通过属性来避开某些昂贵的类（例如 NSCalendar、NSDateFormatter 等）。

**解决方案：**
我在 Store 单例中创建了一个 UIDatePicker 属性，它允许通过任何类访问它。

在 Singleton 的界面中：

```
@property (strong, nonatomic) UIDatePicker *datePicker; 
```

在 Singleton 的实现中，我为 datePicker 实现了一个 getter。

```
- (UIDatePicker *)datePicker
{
    if (!_datePicker) {
        _datePicker = [[UIDatePicker alloc] init];
    }

    return _datePicker;
} 
```

这确保了 datePicker 只被创建一次，并且可以从我的应用程序的任何地方访问它。

现在在需要使用选取器的类的 viewDidLoad 方法中，通过 getter 方法获取属性：

```
UIDatePicker *aDatePicker = [[MySingleton shareInstance] datePicker];
// Set it's location.
    [aDatePicker setFrame:CGRectMake(0.0, 236.0, self.view.frame.size.width, 216.0)];
// Connect to any actions
    [aDatePicker addTarget:self action:@selector(datePickerValueChanged:) forControlEvents:UIControlEventValueChanged];
// Add it to you view
    [self.view addSubview:[[MySingleton shareInstance] datePicker]]; 
```

缓慢的行为将在创建日期选择器时第一次发生。每隔一段时间，模态视图就会以极快的速度出现（取决于视图中的其他内容）。

本质上，我是在创建一个全局变量并保留它，这样我就不必每次都以内存为代价创建它。在我的应用案例中，性能差异使其值得。

**注意：** 有一个警告需要注意。由于 datePicker 很可能比模态视图更长寿，因此必须确保 datePicker 没有指向任何已释放的内存。

因此，如果在 viewDidLoad 中将“self”指定为目标：

```
[aDatePicker addTarget:self action:@selector(datePickerValueChanged:) forControlEvents:UIControlEventValueChanged]; 
```

重要的是，在 viewDidDisappear 等方法中添加此代码以防止崩溃：

```
[aDatePicker removeTarget:self action:@selector(datePickerValueChanged:) forControlEvents:UIControlEventValueChanged]; 
```

# visual-studio-2010 - 在 VS 中恢复/重置 Razor 语法突出显示（安装 Dreamweaver 后）？

> ID：11175207
> 
> 赞同：1
> 
> 时间：2012-06-24T05:32:19.913
> 
> 标签：visual-studio-2010, razor, syntax-highlighting

安装 Dreamweaver CS6 后，Visual Studio 2010 中剃刀的语法突出显示被删除，我的 .cshtml 文件中的所有代码现在都是黑色的。

如何重置剃刀语法突出显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T05:36:37.293

转到*工具*->*导入和导出设置*。按照对话框操作，您应该能够恢复原始设置。

1.  导入选定的环境设置
2.  从“默认设置”列表中选择一个文件（例如，“常规开发设置”等）

如果这不起作用（您的默认设置不知何故被覆盖了？）那么您应该能够在线找到一个设置文件并将其导入。例如，这个博客有一个可供下载的 VS 默认设置的导出： [http ://www.notimplementedexception.com/?page_id=14](http://www.notimplementedexception.com/?page_id=14)

# iphone - 为什么我的翻转动画没有更改为另一个视图？

> ID：11175212
> 
> 赞同：0
> 
> 时间：2012-06-24T05:33:05.123
> 
> 标签：iphone, ios5, xcode4.3

这是我的翻转动画代码，我使用 2 个视图，即 viewMain 和 viewStart

```
- (IBAction)readyBtn:(id)sender {
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:[self view] cache:YES];
    [[self view] addSubview:viewStart];
    [UIView commitAnimations];
}

- (IBAction)startBtn:(id)sender {
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:[self view] cache:YES];
    [viewStart removeFromSuperview];
    [UIView commitAnimations];
} 
```

在我运行它之后，我的 viewMain 被翻转到相同的 viewMain，它不能将翻转更改为 viewStart。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T05:41:31.463

```
(IBAction)readyBtn:(id)sender {
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:viewMain cache:YES];
    viewStart.frame = viewMain.bounds;
    [viewMain addSubview:viewStart];
    [UIView commitAnimations]; 
```

# python - pandas read_csv() 输入本地日期时间字符串，tz_convert to UTC

> ID：11175213
> 
> 赞同：3
> 
> 时间：2012-06-24T05:33:45.120
> 
> 标签：python, timezone, pandas

我正在使用 pandas-0.8rc2 读取输入 CSV，其中两列本地化日期时间字符串缺少 UTC 偏移信息，并且需要将数据帧系列正确转换为 UTC。

我一直在尝试解决方法来减轻时间戳列都不代表索引的事实，它们是数据。tz_localize 和 tz_convert 显然仅适用于系列/数据帧的索引，而不是列。我非常想学习一种更好的方法来做到这一点，而不是下面的代码：

```
# test.py
import pandas

# input.csv:
# starting,ending,measure
# 2012-06-21 00:00,2012-06-23 07:00,77
# 2012-06-23 07:00,2012-06-23 16:30,65
# 2012-06-23 16:30,2012-06-25 08:00,77
# 2012-06-25 08:00,2012-06-26 12:00,0
# 2012-06-26 12:00,2012-06-27 08:00,77

df = pandas.read_csv('input.csv', parse_dates=[0,1])
print df

ser_starting = df.starting
ser_starting.index = ser_starting.values
ser_starting = ser_starting.tz_localize('US/Eastern')
ser_starting = ser_starting.tz_convert('UTC')

ser_ending = df.ending
ser_ending.index = ser_ending.values
ser_ending = ser_ending.tz_localize('US/Eastern')
ser_ending = ser_ending.tz_convert('UTC')

df.starting = ser_starting.index
print df
df.ending = ser_ending.index
print df 
```

其次，代码遇到了一些奇怪的行为。它将第二个赋值的时间戳数据改回数据帧，无论顺序是 df.starting 还是 df.ending：

```
$ python test.py 
              starting               ending  measure
0  2012-06-21 00:00:00  2012-06-23 07:00:00       77
1  2012-06-23 07:00:00  2012-06-23 16:30:00       65
2  2012-06-23 16:30:00  2012-06-25 08:00:00       77
3  2012-06-25 08:00:00  2012-06-26 12:00:00        0
4  2012-06-26 12:00:00  2012-06-27 08:00:00       77
             starting               ending  measure
0 2012-06-21 04:00:00  2012-06-23 07:00:00       77
1 2012-06-23 11:00:00  2012-06-23 16:30:00       65
2 2012-06-23 20:30:00  2012-06-25 08:00:00       77
3 2012-06-25 12:00:00  2012-06-26 12:00:00        0
4 2012-06-26 16:00:00  2012-06-27 08:00:00       77
Traceback (most recent call last):
  File "test.py", line 28, in <module>
    print df
  File "/path/to/lib/python2.7/site-packages/pandas/core/frame.py", line 572, in __repr__
    if self._need_info_repr_():
  File "/path/to/lib/python2.7/site-packages/pandas/core/frame.py", line 560, in _need_info_repr_
    self.to_string(buf=buf)
  File "/path/to/lib/python2.7/site-packages/pandas/core/frame.py", line 1207, in to_string
    formatter.to_string(force_unicode=force_unicode)
  File "/path/to/lib/python2.7/site-packages/pandas/core/format.py", line 200, in to_string
    fmt_values = self._format_col(i)
  File "/path/to/lib/python2.7/site-packages/pandas/core/format.py", line 242, in _format_col
    space=self.col_space)
  File "/path/to/lib/python2.7/site-packages/pandas/core/format.py", line 462, in format_array
    return fmt_obj.get_result()
  File "/path/to/lib/python2.7/site-packages/pandas/core/format.py", line 589, in get_result
    fmt_values = [formatter(x) for x in self.values]
  File "/path/to/lib/python2.7/site-packages/pandas/core/format.py", line 597, in _format_datetime64
    base = stamp.strftime('%Y-%m-%d %H:%M:%S')
ValueError: year=1768 is before 1900; the datetime strftime() methods require year >= 1900 
```

打印语句只是为了演示问题。如果我避免使用 repr 和其他调用 strftime 的方法，错误的值将毫无例外地继续存在。

奇怪的是，如果我继续在 repl 调用 df.{starting,ending} 分配，我通常会得到一个正确的数据帧，并带有时间戳：

```
In [151]: df
Out[151]: 
             starting              ending  measure
0 2012-06-21 04:00:00 2012-06-23 11:00:00  77
1 2012-06-23 11:00:00 2012-06-23 20:30:00  65
2 2012-06-23 20:30:00 2012-06-25 12:00:00  77
3 2012-06-25 12:00:00 2012-06-26 16:00:00   0
4 2012-06-26 16:00:00 2012-06-27 12:00:00  77 
```

这是不可重复的，AFAICT，我无法描述通过上述 ValueError 的调用的确切顺序，但确实如此

如果我遇到错误，或者这是不受支持的 API 使用，我将不胜感激。

如上所述，我宁愿学习更好地使用 pandas API 来避免这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T14:23:55.917

看来这里可能潜伏着一个错误，所以我在这里创建了一个问题，很快就会看看并让你知道：

[https://github.com/pydata/pandas/issues/1518](https://github.com/pydata/pandas/issues/1518)

编辑：您遇到的错误已修复。我现在也要修复 1900 年前的显示问题。

# php - 解析电子邮件正文和存储重要变量的自动化？

> ID：11175216
> 
> 赞同：0
> 
> 时间：2012-06-24T05:34:25.343
> 
> 标签：php, email, automation

我制作了一个 php 程序来消除我工作中一些繁琐的数据输入工作。目前，它的工作方式是我们收到工作订单电子邮件，然后在办公室工作的人打开电子邮件并将电子邮件正文中的信息复制并粘贴到我制作的表格中。然后我使用 php 处理数据并挑选出所有重要的东西并将它们放入变量中。

我希望能够更加自动化该过程，这样办公室的人甚至不必复制和粘贴电子邮件数据。

有没有办法自动检查邮件并解析电子邮件正文中的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T05:46:32.747

我不知道这对您的情况是否有帮助，但是有一个简单的 PHP 电子邮件解析器。

[https://github.com/plancake/official-library-php-email-parser](https://github.com/plancake/official-library-php-email-parser)

它将允许您从假脱机中检索电子邮件，然后将电子邮件部分解析出来。从那里你可以编写一些简单的代码来获得你需要的身体部位。

这可以使用每 5 分钟左右运行一次的简单 cronjob 来设置。

如果电子邮件当前未发送到 linux 主机，您可以在其上进行设置，您可以将电子邮件的副本转发到您设置脚本的机器上。

# c - 将二维数组从 C 传递到 fortran77

> ID：11175220
> 
> 赞同：0
> 
> 时间：2012-06-24T05:35:06.053
> 
> 标签：c, fortran77

我在 fortran77 dec(3, 25000) 中有以下数组，即使只使用了第二维中 25000 个位置中的 8898 个。

我将此数组作为参数与其他数组一起传递给 C 函数。尽管其他参数的值似乎是正确的，但 dec() 值是错误的。

我试过只传递 dec() 数组，结果是一样的。dec(1,1) (fortran77) 中的值等于 dec[0][0] (C) 中的值，但是对于数组中的随机位置，我在调用 C 之前在 fortran77 中没有得到相同的值函数和 C 函数中。

知道为什么会这样吗？

该数组在 fortran 中声明为 real*8 dec(3,25000)，在 C 中声明为 int dec[3][25000]。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T05:54:47.497

请记住，二维数组的主要顺序是在两种语言之间交换的。因此`dec[i][j]`，一种语言将是`dec[j][i]`另一种语言，加上您已经发现的索引基础调整。

# specman - Specman BFM 中的 PUSH_MODE 与 PULL_MODE？

> ID：11175223
> 
> 赞同：2
> 
> 时间：2012-06-24T05:36:34.493
> 
> 标签：specman

在哪种情况下，我们通常会使用 PUSH_MODE？通常建议使用 PULL_MODE 交互，但我想知道在哪种情况下我们应该使用 PUSH 模式？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:27:03.483

首先，它消除了使用`try_next_item()`or轮询驱动程序实例的需要`get_next_item()`，从性能的角度来看这是一个胜利。（虽然调用`driver.get_next_item()`是一个阻塞调用，它应该暂停任何等待序列项的 BFM 线程。）

除了这个（可能是次要的）性能方面，您可能希望重新排序并行序列指定的序列项。从驱动程序出来的序列项的顺序是先进先出。如果您有一个序列项由于死锁原因应该绕过其他项，或者您希望对这些项的处理顺序进行额外的随机化，那么您必须通过将所有项填充到您自己的集合数据结构中来自行管理。

# gradle - gradle 任务分组/封装

> ID：11175226
> 
> 赞同：3
> 
> 时间：2012-06-24T05:37:38.210
> 
> 标签：gradle

我正在制作一个简单的网站，并且正在编写一个 gradle 构建脚本，它将执行 lint 和缩小 css/html/js 之类的操作。

在这个阶段，我刚刚完成了正在工作的 CSS，但只是处于初始的非结构化格式

```
defaultTasks 'loadToOutput', 'minCSS' ,'deployToSite'

task loadToOutput(type: Copy) {
    from 'src/web'
    into 'output'
}

task compileSCSS(type: Exec) {
    commandLine 'sass', '/home/alistair/dev/personalwebsite/output/style/main.scss', '/home/alistair/dev/personalwebsite/output/style/main.css'
}

task csslint(type: Exec, dependsOn: compileSCSS) {
    def cmdLineOptions = ["--errors=adjoining-classes,box-model,box-sizing,compatible-vendor-prefixes,display-property-grouping,duplicate-background-images,duplicate-properties,empty-rules,errors,fallback-colors,floats,font-faces,font-sizes,gradients,import,important,known-properties,outline-none,overqualified-elements,qualified-headings,regex-selectors,rules-count,shorthand,text-indent,unique-headings,universal-selector,unqualified-attributes,vendor-prefix,zero-units"]
    def cssDir = '/home/alistair/dev/personalwebsite/output/style'

    commandLine = ["csslint"] + cmdLineOptions + [cssDir]
}

task minCSS(type: Exec, dependsOn: csslint) {
    commandLine 'csso', '/home/alistair/dev/personalwebsite/output/style/main.css', '/home/alistair/dev/personalwebsite/output/style/main.css'
}

task deployToSite(type: Copy) {
    from 'output'
    into '/var/www/personalwebsite'
} 
```

我想做的是以更简洁的方式对 CSS 任务进行分组。例如

```
task CSS {
    compile
    lint
    minify
} 
```

但是，我能弄清楚如何做到这一点的唯一方法是拥有一个包含 CSS 项目的单独构建文件，这对于我当前的需求来说有点过分了。有没有一种简单/推荐的方法可以将任务封装到一个组中并执行该组可以这么说？

（关于 gradle 有很好的参考文档，但很少有食谱/示例/最佳实践信息：/）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:02:35.810

解决方案：

```
task CSS(dependsOn: [compile, lint, minify]) 
```

# ms-access - 在 MS Access 2003 中合并三个表

> ID：11175227
> 
> 赞同：3
> 
> 时间：2012-06-24T05:37:52.080
> 
> 标签：ms-access, ms-access-2003

我在 Access 2003 中有三个查询，我需要将它们合并到一个查询中。并非所有记录都存在于所有三个表上，所以我想我想要一个完整的外部连接。

查询 1 字段： `Record number, surname, firstname, subcentre`

查询 2 个字段： `Record number, surname, firstname, case worker`

查询 3 个字段： `Record number, surname, firstname, doctor`

我需要能够显示：

`Record number, surname, firstname, case worker, doctor, subcentre`

但是，目前我可以锻炼如何使用左连接，然后在两个查询之间使用右连接联合，但不知道如何将其扩展到三个查询。

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T08:21:18.767

How about:

```
SELECT a.[Record number], a.surname, a.firstname, 
       t1.subcentre, t2.[case worker], t3.doctor
FROM
(((SELECT [Record number], surname, firstname FROM T1
UNION
SELECT [Record number], surname, firstname FROM T2
UNION
SELECT [Record number], surname, firstname FROM T3) As A
LEFT JOIN T1 ON A.[Record number]=T1.[Record number])
LEFT JOIN T2 ON A.[Record number]=T2.[Record number])
LEFT JOIN T3 ON A.[Record number]=T3.[Record number] 
```

The use of UNION rather than UNION ALL in the query creates a unique list of `[Record number], surname, first name` taken from all three tables. The derived table can then be used to LEFT JOIN to the other three tables. LEFT JOIN ensures that all records from the derived tables are included.

As usual with SQL, there are other, similar ways to do this. The above would be slow on a very large file, but unless you have something other than a Jet/ACE back-end, it is unlikely that you will notice any delay.

With, say, an SQL Server back-end, you would use a pass-through query and t-sql syntax. With MySQL back-end, I think you are obliged to use a passthrough query when you go above the one UNION statement.

# blackberry - 黑莓中的多行自定义标签

> ID：11175231
> 
> 赞同：0
> 
> 时间：2012-06-24T05:39:25.787
> 
> 标签：blackberry, custom-controls, label

嗨，我想在 Blackberry 中创建一个多行自定义标签我创建了一个自定义对话框，它有一个或两个按钮并显示消息我添加了一个 LabelField 但是，问题是消息文本是否太长在自定义对话框边界之外，我需要一些自定义标签，将消息放在下一行，以获得我可能为标签定义的宽度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T06:44:52.817

您应该将您`LabelField`的添加到`VerticalFieldManager`. 这个答案是基于我[在这里](https://stackoverflow.com/a/9392961/396949)的回答。您可以通过修改管理器方法`maxWidth`中的变量来更改标签字段的宽度。`sublayout()`

```
public final class CustomScreen extends MainScreen {
    public CustomScreen() {  
        String longString = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean vel lorem eget tortor hendrerit adipiscing. Curabitur mollis pellentesque est ac.";

        VerticalFieldManager vfm = new VerticalFieldManager(Manager.USE_ALL_WIDTH | Manager.NO_HORIZONTAL_SCROLL) {
            protected void sublayout(int maxWidth, int maxHeight) {
                super.sublayout(maxWidth, maxHeight);
            };
        };

        vfm.add(new LabelField(longString));
        add(vfm);    
    }
} 
```

此代码段产生 ![在此处输入图像描述](../Images/713818c18d9770de9753a47d1c73807a.png)

在管理器的方法中修改`maxWidth`为`Display.getWidth()/2`（或`maxWidth/2`）会产生`sublayout()`

![在此处输入图像描述](../Images/54087b5fda5c1c9010ca4eaf7e9e10b3.png)

**更新（正如 Yatin 建议的那样）**：一个人可以在不使用的情况下实现相同的功能，`VerticalFieldManager`但如果文本不适合垂直，则垂直滚动将不可用。

```
public final class CustomScreen extends MainScreen {
    public CustomScreen() {  
        String longString = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean vel lorem eget tortor hendrerit adipiscing. Curabitur mollis pellentesque est ac.";

        add(new LabelField(longString) {
            protected void layout(int width, int height) {
                super.layout(width/2, height);
            }
        });    
    }
} 
```

# ios - 有没有办法更改导航项上条形按钮项的宽度和插图？

> ID：11175232
> 
> 赞同：0
> 
> 时间：2012-06-24T05:39:44.993
> 
> 标签：ios, ios5

我想在我的 MVC 导航项的条形按钮项上使用视网膜分辨率图像 (40x40p)。当我设置图像时，它看起来像预期的那样在水平方向上拉伸：

![拉伸的导航项按钮图像](../Images/fc6a4d9baa28b5dda9b6a86efaa87ff3.png)

[请注意，我还有一个工具栏按钮图像，其分辨率为Apple 规范](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)所要求的 (60px60p) 。当尺寸参数具有默认值时，它也被类似地拉伸，即宽度 = 0，插图；t=0,b=0,l=0,r=0:

![在此处输入图像描述](../Images/20d37e2b02f3f577250ebbd09b1210a7.png)

然而，与导航器项目不同的是，在工具栏的情况下，我可以成功地从 IB 更改这些值。当我设置 width=30，并且插入 t=5,b=5,l=5,r=5 时，工具栏按钮完美地出现了：

![完美缩放的高分辨率工具栏按钮图像](../Images/7bb98746f5b91a9605b267f2efb5f8e3.png)

当我使用大小检查器并尝试设置导航项的栏按钮项的宽度和插入值时，它似乎没有任何效果。齿轮图像看起来仍然拉伸。

我还尝试通过代码在导航项上创建条形按钮项并在那里设置宽度和插入，它也不起作用：

```
 UIImage *image = [UIImage imageNamed:@"073-Setting@2x.png"];
    //--------------------------------------------------------------------
    // This line had no effect for a bar button item on a navigation item:
    image = [image resizableImageWithCapInsets:UIEdgeInsetsMake(5.0,5.0,5.0,5.0)];
    //--------------------------------------------------------------------
    UIBarButtonItem *button = [[UIBarButtonItem alloc] 
                               initWithImage:image 
                               style:UIBarButtonItemStylePlain
                               target:self
                               action:@selector(handleBack:)];
    //--------------------------------------------------------------------
    // This line had no effect for a bar button item on a navigation item:
    button.width = 30;
    //-------------------------------------------------------------------- 
```

任何想法是否我做错了什么，或者这看起来像一个错误。我的部署目标是 IOS 5.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:08:14.873

我现在明白了这个问题背后的原因。我不知道我需要在应用程序包中打包普通和高分辨率 (@2x) 图像。我天真地想包括高分辨率图像并期望它能够工作。由于我只有 iPhone 故事板，包括捆绑中每个图像的 20 和 40 像素版本解决了我的问题。

因此，无需对按钮宽度或插图进行调整。这个问题现在已经解决了。

# java - 从数据库填充 DefaultMutableTreeNode

> ID：11175233
> 
> 赞同：2
> 
> 时间：2012-06-24T05:40:38.517
> 
> 标签：java, swing, jdbc, jtree, treenode

我对 Java 还很陌生，我想创建一个包含 Map 对象的 DefaultMutableTreeNode 类。

我编写了一个继承自更通用 TreeNode 类的 TreeNodeMap 类，该类又继承自 DefaultMutableTreeNode。

TreeNodeMap 类包含方法*populate*，它采用相当长的参数列表。我计划通过将其中一些参数转换为单个对象并重载方法来提高方法的可读性，这样我就不必在第一次调用中传递一组空值（递归）。

注意：*如果您不关心我对该方法的详细说明，请直接从此处跳至代码*

最初我创建了一个空节点，它只包含子节点但不包含数据，这是 ROOT。这个想法是有一个方法，允许调用者传递任何带有“field_id”、“field_label”、“parent_id”列的查询。在初始调用中，查询通过 Where 子句传递，其中“parent_id 为空”，因此得到所有没有父节点的节点。所有这些节点都添加到 ROOT 节点。在遍历结果集时，调用每个节点的*填充*方法现在传递一个“Where 子句”，其中 parent_id = [当前节点 id] 从而获取该节点的所有子节点。这将递归地发生，直到所有节点都具有层次结构。

*代码* （请记住，我是 JAVA 新手，因此感谢您提供任何反馈）

```
public void populate( boolean isRoot, String parentFieldId, String parentFieldLabel, String childFieldId, String childFieldLabel, 
            int parentId, String tableName, String whereClause, String orderByClause, String additionalColumns, List<Map<String, String>> queryParams) throws SQLException, Exception{
        ResultSet rs = null;
        Connection con = null;
        PreparedStatement ps = null;
        try{

            DBConnection dbConnection = new DBConnection("localhost", 3306, "root", "password", "test", DBDrivers.DBTYPE_MYSQL);
            con = dbConnection.getConnection();

            String treeNodeSql = "Select " + parentFieldId + ", " + parentFieldLabel + 
                                                ", " + childFieldId + ", " + childFieldLabel;
            if(additionalColumns != null && additionalColumns.trim().length() > 0)
                treeNodeSql +=  " ," + additionalColumns;

            treeNodeSql += " From " + tableName + " WHERE 1=1";

            if(whereClause != null && whereClause.trim().length() > 0 ){
                treeNodeSql += " AND " + whereClause;
            }

            if(isRoot){
                treeNodeSql += " AND " + parentFieldId + " is null";
            }else{
                if(parentFieldId == null || parentFieldId.trim().length() == 0)
                    throw new Exception(" The populate() method requires a parentId when isRoot is false.");
                treeNodeSql += " AND " + parentFieldId + " = ?";
            }
                //order clause append
            if(orderByClause != null && orderByClause.trim().length() > 0)
                treeNodeSql += " " + orderByClause;

                //prepare statement
             ps = con.prepareStatement(treeNodeSql); 
            int ixParam = 0;

                for(Map qParam : queryParams){
                    if(qParam.get("datatype") == "int"){
                        ps.setInt(++ixParam, Integer.parseInt((String) qParam.get("value")));
                    }else if(qParam.get("datatype") == "string"){
                        ps.setString(++ixParam, (String) qParam.get("value"));
                    }
                }

            out.println(treeNodeSql);
            if(parentId > 0){
                ps.setInt(queryParams.size()+1, parentId);
            }
            rs = ps.executeQuery();

            while(rs.next()){
                HashMap<String, Object> childNodeData = new HashMap<String, Object>(4);
                childNodeData.put("parentFieldId", parentFieldId);
                childNodeData.put("parentFieldIdValue", Integer.toString(rs.getInt(parentFieldId)));
                childNodeData.put("parentFieldLabel", parentFieldLabel);
                childNodeData.put("parentFieldLabelValue", rs.getString(parentFieldLabel));
                childNodeData.put("childFieldId", childFieldId);
                childNodeData.put("childFieldIdValue", Integer.toString(rs.getInt(childFieldId)));
                childNodeData.put("childFieldLabel", childFieldLabel);
                childNodeData.put("childFieldLabelValue", rs.getString(childFieldLabel));

                out.println("parentId: " + rs.getInt(parentFieldId)
                                + ", parentLabel: " + rs.getString(parentFieldLabel)
                                + ", childId: " + rs.getInt(childFieldId)
                                + ", childLabel: " + rs.getString(childFieldLabel));
                TreeNodeMap childNode = new TreeNodeMap(childNodeData);
                this.add(childNode);
                childNode.populate(false, parentFieldId, parentFieldLabel, childFieldId, childFieldLabel, rs.getInt(childFieldId), tableName, whereClause, orderByClause, additionalColumns, queryParams);
            }
        }catch(SQLException e){
            throw e;

        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            out.println(e.getCause());
            out.println(e.getMessage());
            e.printStackTrace();
            throw e;
        }finally {
            try { rs.close(); } catch (Exception e) {  }
            try { ps.close(); } catch (Exception e) {  }
            try { con.close(); } catch (Exception e) {  }
        }
    } 
```

对该方法的初始调用如下所示：

```
treeNode.populate(true, "supervisor_id", "supervisor", "employee_id", "employee", 0, "vw_employee", null, null, null, queryParams); 
```

我使用这种方法看到的问题是数据库将被查询 X 次，并且对于大数据集，我认为这会导致一些问题。我还为每个查询打开一个连接！因此，我考虑在创建方法后将 Connection 传递给该方法（在递归调用中），但是我不确定如何适当地关闭它。我可以编写一个条件来检查节点是否为 ROOT，然后关闭连接，但如果代码在两者之间失败会发生什么。

所以最后我的问题是：1-解决这个问题的最佳方法是什么？2-我是否应该传递连接，以便在树的填充期间只有一个连接保持打开状态？如果是，那么我该如何正确关闭它。3-我应该将结果集缓存到 ArrayList 中并改用它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T16:29:58.973

您的性能问题可能是有根据的。反而，

1.  实施`TreeModel`，如​​图所示[`FileTreeModel`](https://dzone.com/articles/taking-new-swing-tree-table-a-)。这样，只需要查询可见节点。[这里](http://www.java2s.com/Code/Java/Swing-JFC/implementsTreeModeltocreatetreemodel.htm)有一个相关的例子。

2.  通过`javax.sql.DataSource`，而不是`Connection`。

3.  您的类`implements TreeModel`可以封装任何缓存的数据，但也提供一些更新过时条目的方法。显示缓存值后，考虑使用`SwingWorker`刷新模型，如下[所示](https://codereview.stackexchange.com/q/4446/6692)。而不是`List<Record>`，您可能想要查看`Map<PrimaryKey, Record>`.

# zend-framework - 选择标签中的 Zend 表单不需要的选项

> ID：11175236
> 
> 赞同：0
> 
> 时间：2012-06-24T05:41:20.000
> 
> 标签：zend-framework, zend-form, zend-form-element

这是我生成选择元素的代码：

```
$configsForm->addElement( 
 'select',
        'option_status',
        array(
            'label'         => $this-> view -> __('Configs_Option Status'),
            'required'      => true,
            'value'         => '',
            'multiOptions'  => array('' => $this -> view -> __('Root'), 0 => 'Disabel', 1 => 'Enabel'),
        )
    ); 
```

生成的选择是这样的

```
<select name="configs[option_status]" id="configs-option_status" required="1">
    <optgroup id="configs-option_status-optgroup-options" label="options">
        <option value="" label="Select option" selected="selected">Select option</option>
        <option value="0" label="Disabel">Disabel</option>
        <option value="1" label="Enabel">Enabel</option>
    </optgroup>
    <option value="listsep" label="&lt;br /&gt;">&lt;br /&gt;</option>
    <option value="id" label="configs-option_status">configs-option_status</option>
</select> 
```

应该是这样的

```
 <select name="configs[option_status]" id="configs-option_status" required="1">
        <option value="" label="Select option" selected="selected">Select option</option>
        <option value="0" label="Disabel">Disabel</option>
        <option value="1" label="Enabel">Enabel</option>
</select> 
```

这怎么能渲染？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T08:26:11.620

您确实设置了两个选项（'Disabel' 和 'Enabel'），但您还设置了另一个选项：`$this->view->__('Root')`. 你确定这只返回`"Select Option"`吗？

你能执行一个`Zend_Debug::dump($this->view->__('Root'))`并显示输出是什么吗？我认为这将帮助您解决问题。

# php - 意外的 ','，期待 '&' 或 T_VARIABLE

> ID：11175247
> 
> 赞同：1
> 
> 时间：2012-06-24T05:44:25.760
> 
> 标签：php, drupal, syntax, syntax-error

我在传递给函数的参数时遇到了错误。到目前为止，我还没有通过我的研究找到明确的解决方案。问题似乎在于我传递值的方式或值本身。

任何线索将不胜感激。

谢谢你。

```
function hook_form_submit($form_id, &$form_data){
    //^ Do stuff above ^
    //Create Sponsor Admin
    //The values from the form are passed into the function
    create_sponsor_admin($form_data['values']['sponsorid'], $form_data['values']['admin_fname'], $form_data['values']['admin_lname'], $form_data['values']['admin_email']);
}
//Error occurs on line below
function create_sponsor_admin($sponsor_id, $a_fname, a_lname, $a_email){
   $user_name = $a_fname . ' ' . $a_lname;
   $email = $a_email;
   //do more stuff
} 
```

PHP 5.2 Drupal 6 MySql

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T05:46:21.403

你在`$`这里缺少一个：

```
function create_sponsor_admin($sponsor_id, $a_fname, a_lname, $a_email){
                                                     ^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T05:49:43.583

您在 a_lname 的函数 create_sponsor_admin 中缺少“$”符号

试试这个

```
create_sponsor_admin$sponsor_id, $a_fname,$a_lname, $a_email){...} 
```

# cakephp - CakePHP如何通过用户ID重定向到仪表板

> ID：11175249
> 
> 赞同：0
> 
> 时间：2012-06-24T05:45:37.313
> 
> 标签：cakephp

用户登录系统后，根据user_id，转发到自己的dashboard，url应该是...../dashboard/userid，dashboard将显示例如用户下的最新订单，而不是其他人

我阅读[了如何在 CakePHP 中为您的应用程序构建“仪表板”。](http://nuts-and-bolts-of-cakephp.com/2008/12/16/how-to-build-a-dashboard-for-your-application-in-cakephp/)

但对所有用户都是一样的 如何将 $userid 映射到 /dashboard？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:58:35.407

我不认为这是正确的设计。您应该为所有用户仪表板 (/dashboard) 提供一个通用 url，并使用 Auth 组件检索 user_id 并基于此显示。

```
$user_id = $this->Auth->user('id');
$orders = $this->Order->findByUserId($user_id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T06:07:36.353

你可以做的前重定向：

```
$this->redirect(
    array(
       "controller"   => "dashboard",
       "action"       => "index",
       $user_id
    )
); 
```

你的意思是这样的吗

# c# - 使用 MyListProperty.Add 时出现 NullReferenceException？

> ID：11175255
> 
> 赞同：0
> 
> 时间：2012-06-24T05:46:36.733
> 
> 标签：c#, nullreferenceexception

```
 public List<string> myitems { get; set; }
    //Store All unique ID of this date in a list
    public void myitem(string Index)
    {
        myitems.Add(Index);
    }

  if (temp.Start == received)
            {

                scheduledItem scheduleditem = new scheduledItem(temp.Name, "1pm", "true");
                DataCollection.Add(scheduleditem);
                myitem(temp.UniqueID.ToString()); 
            }
            else
            {
                MessageBox.Show("Nothing");

            } 
```

知道 myitems.add(index) 出了什么问题；?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T05:49:15.607

您必须实例化/初始化`List<T>`.

```
 private List<string> _list = new List<string>();

 public List<string> myitems 
 { 
     get { return _list; }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T05:49:27.123

您实际上还没有初始化 myitems。您需要在某处添加这行代码，例如您的类的构造函数

```
myitems = new List<string>(); 
```

# windows - 在 Windows 7 中循环通过相同应用程序的 Windows 的键盘快捷键

> ID：11175261
> 
> 赞同：70
> 
> 时间：2012-06-24T05:47:19.823
> 
> 标签：windows, windows-7

我原以为这是一项非常简单的任务：在同一应用程序的窗口之间切换，但我似乎找不到执行此操作的快捷方式。我通常有几个应用程序窗口，例如 Chrome（每个窗口都包含与特定主题相关的所有选项卡）。

我正在寻找的行为是在 Mac OSX 中使用 Cmd+~ 键盘快捷键实现的。

有没有办法在 Windows 7 上实现相同的目标？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2014-06-26T12:10:26.737

这不是键盘快捷键，但按住 ctrl + 单击任务栏中的图标反复将循环通过该程序的打开窗口。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2015-09-04T16:03:40.493

请参阅[https://superuser.com/questions/435602/shortcut-in-windows-7-to-switch-between-same-applications-windows-like-cmd](https://superuser.com/questions/435602/shortcut-in-windows-7-to-switch-between-same-applications-windows-like-cmd)。

斯科特的答案是我发现的最接近的答案。总结一下他说的话：

**Win + n 其中 n 是应用程序在任务栏中的编号位置。** 然后循环浏览，按住 Win 并再次按 n。

*（更新感谢@ZYinMD 的评论 - 但也看到他们的第一条评论）*

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-10-25T07:31:30.517

用于`Alt``Esc`快速切换而不会弹出任何 GUI

* * *

[https://support.microsoft.com/en-gb/help/12445/windows-keyboard-shortcuts](https://support.microsoft.com/en-gb/help/12445/windows-keyboard-shortcuts)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-08-20T05:56:20.993

可能相关：如果您希望在单击堆叠的任务栏符号时直接打开窗口（而不是打开列表），您可以添加 DWORD " `LastActiveClick`"

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced 
```

并将其设置为 1。

# windows-phone-7 - 如何在 Windows Phone 中更新辅助磁贴的导航 URI

> ID：11175263
> 
> 赞同：0
> 
> 时间：2012-06-24T05:47:41.483
> 
> 标签：windows-phone-7, windows-phone-7.1.1

我有一个应用程序可以根据用户的选择在开始屏幕上创建辅助磁贴。辅助磁贴打开一个文档。有一个要求是，每当重命名文档时，与其关联的磁贴（如果存在），也必须更新其导航 uri，以便辅助磁贴始终指向同一文档。

但我无法做到这一点。我看到的唯一方法是删除并重新创建磁贴。这实际上没有用（因为它导航到开始屏幕）。我只想在内部做。但是，`ShellTile.Update`方法对我来说似乎没有用。

请帮忙。任何帮助将不胜感激。提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T05:55:25.670

不要使用导航 URL 将用户定向到文档，而是使用在重命名文档时不会更改的唯一 ID。这样，无论文档名称发生什么变化，磁贴都会指向它应该指向的位置。

# android - 尝试 SSH 到服务器时使用 AsynTask 显示进度条

> ID：11175272
> 
> 赞同：0
> 
> 时间：2012-06-24T05:50:04.087
> 
> 标签：android, android-asynctask, android-progressbar

首先，我必须声明我是 Java 和 Android 的新手。但是，我确实有基础知识，或者至少可以到达那里。

我的应用程序的目的：在公司，我们有一个远程服务器，我们通过 SSH 连接到该服务器，并做一些工作。有时，服务器无法访问，因此会中断我们的工作。

我的应用程序应该执行以下操作：

1-使用Jsch，我SSH到服务器，如果有响应，那么，我会在15分钟内再次尝试，如果没有响应，我想通知。

我已经在非 android 版本的 Java 中成功完成了上述操作，并且能够在 Android 版本中完成，但是在主线程上，因此我无法更新 UI 上的任何内容。本质上是进度条。在常规版本中，UI 冻结，而在下面提供的 AsyncTask 版本中。我一按下按钮就得到一个例外

下面是我正在使用的代码，老实说，我读到了最好的解决方案是 AsyncTask，但由于我是新手，我不确定我的错误是什么。老实说，我假设它可能在 AsyncTask 和 AsyncTask 中。

我不确定在那里使用什么......下面是我的代码，希望有人能指出我的错误。

```
package com.example.myapp;

import java.io.IOException;

import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.HandlerThread;
import android.os.StrictMode;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ProgressBar;
import android.widget.Toast;
import android.os.Handler;

public class VedasServerMonitorActivity extends Activity {
    /** Called when the activity is first created. */

    Button button;
    EditText IP;
    EditText UserName;
    EditText Password;
    EditText Port;
    ProgressBar progressBar1;

    String UserStr;
    String PassStr;
    String IPStr;
    int PortInt;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        button = (Button) findViewById(R.id.button1);
        IP = (EditText) findViewById(R.id.serverIp);
        UserName = (EditText) findViewById(R.id.userName);
        Password = (EditText) findViewById(R.id.password);
        Port = (EditText) findViewById(R.id.port);
        progressBar1 = (ProgressBar) findViewById(R.id.progressBar1);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                .permitAll().build();

        StrictMode.setThreadPolicy(policy);

        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                new asyncTaskUpdateProgress().execute();

            }

        });

    }

    public class asyncTaskUpdateProgress extends AsyncTask<Void, Void, Void> {

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub

        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            progressBar1.setVisibility(View.VISIBLE);
            UserStr = UserName.getText().toString();
            PassStr = Password.getText().toString();
            IPStr = IP.getText().toString();
            PortInt = Integer.parseInt(Port.getText().toString());

            button.setClickable(true);
            progressBar1.setVisibility(View.INVISIBLE);

        }

        @Override
        protected void onProgressUpdate(Void... values) {
            // TODO Auto-generated method stub
            progressBar1.setVisibility(View.INVISIBLE);

        }

        @Override
        protected Void doInBackground(Void... arg0) {
            boolean ok = false;

try {

            SSHTest sshtest = new SSHTest();
            ok = sshtest.sshconnect(UserStr, PassStr, IPStr, PortInt);
            }

        catch (Exception e) {
                e.printStackTrace();
                Log.i("ERROR HERE", "doInBackground: IOException");}
if (ok) {

     Toast.makeText(getApplicationContext(),
     "Connection Susccessfull", Toast.LENGTH_LONG)
     .show();

} else {

     Toast.makeText(getApplicationContext(),
     "Unable to connect", Toast.LENGTH_LONG).show();
     notify(getApplicationContext(), true);

}
return null;

        }

        protected void notify(Context context, Boolean on) {
            NotificationManager nm = (NotificationManager) context
                    .getSystemService(Context.NOTIFICATION_SERVICE);
            ComponentName comp = new ComponentName(context.getPackageName(),
                    getClass().getName());
            Intent intent = new Intent().setComponent(comp);
            PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
                    intent, Intent.FLAG_ACTIVITY_NEW_TASK);
            Notification n = new Notification(R.drawable.warning, "Message",
                    System.currentTimeMillis());
            n.setLatestEventInfo(context, "Vedas Server Monitor",
                    "Port Un-rechable", pendingIntent);
            nm.notify(22, n);
        }

    }

} 
```

机器人× 194760

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:24:36.627

您需要在`doInBackground()`. 但在此之前，关于`AsyncTask`.

`AsyncTask`当您有任何非 UI 后台活动要执行时使用。该函数`onPreExecute()`用于在您进入后台线程之前显示任何 UI 操作（在大多数情况下显示对话框）。该函数`doInBackground()`用于执行非 ui 操作（在大多数情况下从服务器获取数据）。在进行后台活动时，`doInBackground()`您可能希望显示一些您通过使用`publishProgress()`将在内部调用该`onProgressUpdate()`方法所做的进度。在后台活动完成后，`doInBackground()`您返回`result`活动的，如果有的话。在您从`doInBackground()`内部方法返回后，将调用`onPostExecute()`将接收`result`您返回的`doInBackground()`作为参数的方法。现在`onPostExecute()`将在 UI 线程上运行，并且大多数 UI 操作（如取消显示的对话框、在某些 UI 组件`onPreExecute()`上显示`result`等）都发生在此方法中。

现在，您在代码中犯的错误：您正在显示 a`toast`或 a`notification`基于使用函数获取服务器数据的结果，`notify`但您仍处于后台非 ui 线程中。现在，理想情况下应该返回并检查此结果，`onPostExecute()`并且根据其值，您可以显示`toast`或的 UI 组件`notification`。

我希望这个解释可以帮助你解决你的问题。

**编辑**

在您的情况下，因为您可以将布尔类型结果变量发送`ok`到`onPostExecute()`. 为此，您需要进行以下更改：

在类声明中：

```
public class asyncTaskUpdateProgress extends AsyncTask<Void, Void, Boolean> 
```

和

```
protected void onPostExecute(Boolean result){
if (ok) {

 Toast.makeText(getApplicationContext(),
 "Connection Susccessfull", Toast.LENGTH_LONG)
 .show();

} else {

 Toast.makeText(getApplicationContext(),
 "Unable to connect", Toast.LENGTH_LONG).show();
 notify(getApplicationContext(), true);

}
} 
```

最后在

```
protected Void doInBackground(Void... arg0) {
        boolean ok = false;

try {

        SSHTest sshtest = new SSHTest();
        ok = sshtest.sshconnect(UserStr, PassStr, IPStr, PortInt);
        }

    catch (Exception e) {
            e.printStackTrace();
            Log.i("ERROR HERE", "doInBackground: IOException");}

return ok;

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T08:00:03.763

您可以在`protected void onPreExecute()`
需要添加时尝试此操作

```
progressBar = new ProgressDialog(v.getContext());
        progressBar.setCancelable(true);
        progressBar.setMessage("File downloading ...");
        progressBar.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        progressBar.setProgress(0);
        progressBar.setMax(100);
        progressBar.show();

        //reset progress bar status
        progressBarStatus = 0; 
```

然后

```
protected void onProgressUpdate(Void... values) {  
    progressBarStatus= progressBarStatus + x; // x means any value
       progressBar.setProgress(progressBarStatus);

    } 
```

之后，您需要在 中完成您的进度条`onPostExecute()`。像

```
protected void onPostExecute(Void result) {
        progressBar.dismiss();
} 
```

# java - 开发可扩展的 Twitter 数据适配器

> ID：11175274
> 
> 赞同：0
> 
> 时间：2012-06-24T05:50:17.363
> 
> 标签：java, twitter, scalability

我们正在为我们的产品平台构建一个 Twitter 适配器，以使用 Search API 和 Streaming API 收集推文。我们开发了一个原型，它使用 Java Executor Service 和 Twitter4j 来收集推文并将它们提交到我们的推文队列。

以下是一些我们希望就以下方面提出建议的设计决策：

1.  如何使适配器客户端具有可扩展性和容错性？
2.  如何防止检索重复的推文？
3.  如何在不达到速率限制的情况下最大化使用多个用户 ID 检索推文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:46:02.050

一些答案，但请记住，自从我使用 twitter API 以来已经有一段时间了 -

为了使适配器具有可扩展性和容错性，您可以考虑以下技术 -

1.  使用客户端的多个实例（即集群）——这实际上取决于它的作用，但您可以决定使用主动-主动或主动-被动集群模型

2.  如果您选择集群 - 您是否有客户端连接到适配器？如果是这样，您将需要一个支持粘性会话的负载均衡器（因此在给定会话期间，客户端会寻址相同的适配器实例） - 检查 [this][1] 链接以获取一些信息。

3.  我建议您对 twitts 使用缓存 - 如果我们将缓存视为键到值的映射，那么您的键可能是您用来从 Twitter API 获取信息的 URL（如果我记得，API 是某种 RESTful Web 服务）
    您应该在缓存上设置驱逐策略（即 - 数据被认为与您相关的时间） - 这可以帮助您提高性能，并减少对 twitter 的访问次数（我'我指的是你关于速率限制的问题的一部分）。

4.  也许你应该看看你是否可以在用户之间共享信息——但这会涉及到一些逻辑。
    举个例子 - 如果用户 A 关注用户 B，而 B 关注 A，他们可能有更多常见的关注者或他们关注的用户，并且您可以共享数据。

5.  如果你按照我之前的建议进行集群，你的缓存应该是分布式的。您可以为此使用[EHCache](http://www.ehcache.org/documentation/user-guide/cache-topologies)

6.  如果您将信息存储在数据库中 - 尝试通过构建线程本地基础缓存系统来最小化数据库访问（因此在一个线程中，如果您对同一实体执行两次获取相同的 ID，而无需写入，您将无法访问数据库两次...）

总之，这只是建议的冰山一角，您应该仔细了解您的需求、用例和流程，并了解如何优化它们中的每一个。

# mysql - mysql合并两张表

> ID：11175279
> 
> 赞同：1
> 
> 时间：2012-06-24T05:51:23.017
> 
> 标签：mysql

我有两个表，table_a 和 table_b：

表_a：

```
city 
--------
tokoyo 
london 
```

表_b：

```
zipcode  
-------
23675
11290 
```

如何将table_b与table_a结合起来，像这样：

表_a：

```
city          zipcode
--------      --------
tokoyo        23675
london        11290 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:09:31.203

如果没有要加入的公共列，我认为您将无法信任结果（据我所知，MySQL 不*保证*按插入顺序返回行）。

但从技术上讲，我认为你可以通过以下方式实现这一点：**实际上不要这样做，见下文**

```
ALTER TABLE table_a ADD COLUMN zipcode unsigned int;
ALTER TABLE table_a ADD COLUMN id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT NOT NULL;
ALTER TABLE table_b ADD COLUMN id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT NOT NULL;
UPDATE table_a JOIN table_b USING(id) SET table_a.zipcode = table_b.zipcode; 
```

如果我的语法关闭，请原谅我，已经有一段时间了。

这种技术利用了我认为 MySQL 在您添加非空 auto_increment 列时所做的事情：它为您填充值，每行一个唯一值。现在您有一个连接列，并且可以执行更新。

但是，我将再次说明这一点非常清楚：如果表之间确实没有额外的列，那么您没有完全准确的方法来连接这两个表。您将需要*一个*公共连接列，或者至少每个都有一个 auto_increment 列，并保证所有邮政编码和城市在事务中以适当的对输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T06:00:00.987

您似乎根本没有对您的问题进行任何研究。有许多相关的问题会问同样的问题。

[加入两个mysql表](https://stackoverflow.com/questions/3824142/join-two-mysql-tables)

此链接和许多其他链接讨论您的问题。

（如果我有足够的声誉，这个答案将是一个评论。我提前道歉。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T13:23:47.533

最后我找到了解决方案：

```
>    $dbh->exec('ALTER TABLE `table_a` ADD COLUMN `zipcode` int(10) NOT NULL');
>                                                                   
>                                                                   
>    $i = 0;                                                                   
>    foreach ($dbh->query('SELECT zipcode FROM table_b') as $row) {            
>    $sql = 'UPDATE table_a SET zipcode='.$row["zipcode"].'                    
>     WHERE zipcode IN (                                                       
>         SELECT zipcode FROM (                                                
>             SELECT zipcode FROM table_a                                      
>             LIMIT '.$i.', 1                                                  
>         )  TMP                                                               
>     ) LIMIT 1;';                                                             
>    $dbh->exec($sql);                                                         
>    $i = $i +1;                                                               
>    }                                                                         
>                                                                   
>                                                                   
>                                                                   
>    $dbh->exec('ALTER TABLE `table_a` ADD COLUMN `zipcode` int(10) NOT NULL');
>                                                                   
>                                                                   
>    $zipcodes = array(23675,11290);                                           
>                                                                   
>    for ($i = 0;$i < 2;$i++){                                                 
>                                                                   
>    $sql = 'UPDATE table_a SET zipcode='.$zipcodes[$i].'                      
>     WHERE zipcode IN (                                                       
>         SELECT zipcode FROM (                                                
>             SELECT zipcode FROM table_a                                      
>             LIMIT '.$i.', 1                                                  
>         )  TMP                                                               
>     ) LIMIT 1;';                                                             
>    $dbh->exec($sql);                                                         
>                                                                   
>    } 
```

Lukáš Lalinský 的回答非常棒：

[在mysql中使用限制更新多行？](https://stackoverflow.com/questions/1513206/update-multiple-rows-using-limit-in-mysql)

# android - 如何使用数组从微调器中检索字符串？

> ID：11175280
> 
> 赞同：0
> 
> 时间：2012-06-24T05:51:43.490
> 
> 标签：android, arrays, toast, android-spinner

我在 上添加了数组，这些字符串在我运行应用程序时`string.xml`可见。`Spinner`问题是`Toast`不显示性别变量的值。

我为此制作了一个单独的课程，因为我还将`Spinners`用于*birthmoth*、*birthdate*和*birthyear*。

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.register);

    //SPINNERS
    spinner_gender = (Spinner) findViewById(R.id.reg_gender);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
            R.array.array_gender, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner_gender.setAdapter(adapter);
    spinner_gender.setOnItemSelectedListener(new MyOnItemSelectedListener()); 
```

* * *

```
 public class MyOnItemSelectedListener implements OnItemSelectedListener
{

    public void onItemSelected(AdapterView<?> parent,
        View view, int pos, long id) 
    {
        genderString = parent.getItemAtPosition(pos).toString();
        Toast.makeText(getBaseContext(), parent.getItemAtPosition(pos).toString(), Toast.LENGTH_LONG);
    }

    public void onNothingSelected(AdapterView<?> parent) 
    {
      // Do nothing.
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T05:56:20.873

`Toast`如果您不调用它的方法，则不会出现`show()`：

```
Toast.makeText(getBaseContext(), parent.getItemAtPosition(pos).toString(), Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T07:21:12.470

尝试这个..

`Toast.makeText(parent.getContext(), "OnItemSelectedListener : " + parent.getItemAtPosition(pos).toString(), Toast.LENGTH_SHORT).show();`

或者..简单地你可以使用

`Toast.makeText(getApplicationContext(), " Your Toast message in here",Toast.LENGTH_LONG).show();`

# apache - JIRA 作为没有端口的子域。htaccess 或虚拟主机

> ID：11175284
> 
> 赞同：2
> 
> 时间：2012-06-24T05:53:36.780
> 
> 标签：apache, jira, cpanel

好的。我有一个运行 centOS 5 的专用机器，它安装了 cPanel 以使事情变得更容易我也有 JIRA 和 SVN 设置和运行。因此，话虽如此，我正在尝试拥有一个子域，例如。jira.domain.com 但是，不知道如何设置它，cpanel 似乎没有将虚拟主机存储在典型的本地`/etc/httpd/conf.d/....`，所以我想知道如何将 jira 设置为 JIRA 的子域，我不必拥有端口显示也是如此。

我会为此使用 htaccess 还是以某种方式添加虚拟主机或什么？如果我必须添加一个虚拟主机，如果将虚拟主机添加到正确的位置，这将如何影响我的其他子域。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T13:58:45.397

归档它的方法是创建一个子域并将虚拟主机映射添加到 Apache。

这是我的默认配置。

```
<VirtualHost *:80>
    ServerName jira.domain.com

    <Proxy *>
            Order deny,allow
            Allow from all
    </Proxy>

    ProxyRequests       Off
    ProxyPreserveHost   On

    ProxyPass           /    http://localhost:8080/
    ProxyPassReverse    /    http://localhost:8080/

    ErrorLog            /var/log/apache2/jira.error.log
    CustomLog           /var/log/apache2/jira.access.log combined
</VirtualHost> 
```

为了使它工作，你需要激活

1.  虚拟主机配置
2.  代理模块：mod_proxy

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T20:55:40.597

只是一个注释。

您需要启用这些 apache2 模块：

```
sudo a2enmod proxy
sudo a2enmod proxy_http 
```

# shell - 远程主机中的 for 循环不起作用 - shell 脚本

> ID：11175285
> 
> 赞同：0
> 
> 时间：2012-06-24T05:53:49.597
> 
> 标签：shell, sh

```
ssh $hname "cd /opt/tomcat/webapps/aware/WEB-INF/classes/com && for FNAME in `tar tvf /tmp/prop.tar | awk '{print $6}'` 
do
  if test ! -s "/tmp/$fname/prop_bkup.tar"
  then
    ls $FNAME && tar cvf /tmp/$fname/prop_bkup.tar $FNAME && rm $FNAME || echo "$FNAME is a new file".
  else
    ls $FNAME && tar uvf /tmp/$fname/prop_bkup.tar $FNAME && rm $FNAME || echo "$FNAME is a new file".
  fi
done" 
```

上面的 for 循环在远程主机中不起作用。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:11:36.160

我已经编辑了您的问题以将代码放入代码块中。与此同时，我可以看到一些潜在的问题：

1.  在主命令周围使用单引号以防止本地 shell 填充变量。这也会导致远程命令中的双引号出现问题。如果您更改为单引号，则需要确保您仍然`awk`正确引用了参数。
2.  您已经使用了小写`$fname`和大写`$FNAME`- 它们都应该相同（`$FNAME`在本例中）。

您需要解释“不工作”的含义。这会给你更好的答案。

# android - 如何保存数据库中的表而不是保存数据库

> ID：11175287
> 
> 赞同：2
> 
> 时间：2012-06-24T05:53:57.293
> 
> 标签：android, database

我想在数据库中保存一个表文件，其中有很多表，但是，我不想保存数据库，因为如果需要我会恢复表文件，其他表文件保持原始状态。有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:02:16.613

一些想法：

1.  复制原始数据库并仅使用副本。这种方法很简单，不需要代码做任何“特殊”的事情来不留下更改。但是，很难将*任何*数据保留回原始数据 - 但请参阅下面的一个绝妙技巧！
2.  [使用*附加*的数据库](http://www.sqlite.org/lang_attach.html)。仅更新*附加*数据库中的表。必须修改代码以仅使用附加数据库中的表。对主数据库中表的修改仍将被保存。可以根据需要删除（或保留）附加的数据库。*附加数据库是在不同 SQLite 数据文件之间移动数据的好方法！*
3.  [使用*临时表*](http://www.sqlite.org/lang_createtable.html)（并查看[此 SO 帖子](https://stackoverflow.com/questions/6703676/use-of-temp-tables-in-sqlite-databases)）。然后在完成后删除表（或让 SQLite 删除它）。同样，这需要代码运行良好，而不是修改其他表。
4.  *只是不要将数据放入数据库*:-)

SQLite 数据库也可以“只读”打开，但这也有其他含义。

快乐编码！

# maven - Maven部署：即使工件已经存在也强制部署

> ID：11175288
> 
> 赞同：23
> 
> 时间：2012-06-24T05:54:03.707
> 
> 标签：maven

我正在构建一个项目，它由几个（有时是不相关的）模块和一些非标准的 java 模块（用 ANT 构建）组成。

每个 maven 模块在完成时部署到发布存储库。

如果构建在中间失败，我可能已经部署了一些模块，所以如果我尝试重建，新的部署尝试将失败，因为工件已经部署。

是否可以强制部署，或者在我再次部署之前删除已部署的工件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-04T04:04:11.720

听起来中间件管理员已将您的远程仓库实例（Nexus 或 Artifactory 或其他）配置为不允许重新部署工件，正如@khmarbaise 所说，这是有充分理由的。可以将 Nexus 配置为允许具有特定角色或具有工件删除权限的用户删除工件。如果您的管理员以这种方式进行设置，您可能可以请求删除权限并删除有问题的工件。或者，也许 Nexus 管理员会同意为您执行此操作。

如果这些都不可能，那么可以尝试以下一些方法来防止这种情况在未来发生：

1.  如果您正在使用该`release`插件，请先进行试运行（`-DdryRun=true`在 release:prepare 命令行上）。Maven 应该在不提交 SCM 的情况下报告任何错误。
2.  首先尝试`mvn install`在您的项目组上运行。这会将工件安装到您的本地仓库，而不是远程仓库。如果出现问题，您可以从本地存储库中删除工件并从头开始，重复直到获得完整的构建。
3.  如果您正在运行多模块构建，则有[命令行选项](http://www.sonatype.com/books/mvnref-book/reference/_using_advanced_reactor_options.html)允许从特定项目向前恢复 Maven 构建。
4.  `-Dmaven.deploy.skip=true`在 Maven 命令行上定义。这类似于建议 #2，除了 Maven 将实际加载和配置[部署插件](http://maven.apache.org/plugins/maven-deploy-plugin/deploy-mojo.html)，它只是不会实际部署到远程仓库。一切正常后，删除 skip 属性。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-10-28T12:49:02.420

我知道可能会迟到，但在 Nexus 中有一个选项允许重新部署工件。

[![在此处输入图像描述](../Images/57ea4c474da25f27bcce2ec612667fba.png)](https://i.stack.imgur.com/o7LE4.png)

只需选择左侧的存储库，选择要更改策略的存储库，然后将其设置为允许重新部署。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-10T15:07:22.630

增加了可能的选项；）

使用参数 deployAtEnd（更多信息：[这里](http://maven.apache.org/plugins/maven-deploy-plugin/deploy-mojo.html#deployAtEnd "这里")）。如果所有工件都已成功构建，则使用此参数仅部署工件。

# jquery - jquery fullcalendar插件一次查看超过1个月

> ID：11175294
> 
> 赞同：7
> 
> 时间：2012-06-24T05:55:18.340
> 
> 标签：jquery, fullcalendar

我正在使用 fullcalendar 插件并想稍微更改一下 - 我希望默认为月视图，但能够向下滚动并继续到下个月，有谁知道是否有附加功能，或者无论如何开始编辑完整的日历？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:12:53.653

fullcalendar 中没有直接的方式来显示两个月。根据您的要求，您需要将fullcalnder 与darepicker 合并，然后在fullcaleder 上方的一个小日期选择器和单击datepicker 调用fullcalendar 的goto 方法以在所需日期跳转。

```
$(document).ready(function()
{     
    $("#datepicker" ).datepicker({

        numberOfMonths: 2,
        showButtonPanel: false,
        minDate:0,

        onSelect: function(dateText, inst) 
        {  
            selected_date = dateText;
            $('#calendar').fullCalendar('gotoDate',new Date(Date.parse(selected_date)));
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T16:30:52.673

您可以按以下方式完成：

1.  下载数据并将 JSON 保存在本地存储或数组中
2.  为 2-3 个日历创建 2-3 个 div
3.  将完整的日历加载到 div 上——为每个 div 设置开始日期
4.  为所有人保持相同的数据源

像这样：

[单个页面上的多个 FullCalendars](https://stackoverflow.com/questions/6392162/multiple-fullcalendars-on-a-single-page)

有选项

# apache - URL 重写 - 名称到数字 (Apache)

> ID：11175296
> 
> 赞同：0
> 
> 时间：2012-06-24T05:55:47.157
> 
> 标签：apache, url-rewriting

是否可以进行 URL 重写，其中像[http://www.myurl.com/usa/california/sanjose](http://www.myurl.com/usa/california/sanjose)这样的 URL重定向到[http://www.myurl.com/c=1&st=3&area=14](http://www.myurl.com/c=1&st=3&area=14)

这里的问题是，一直以来我们都使用像[http://www.myurl.com/c=1&st=3&area=14](http://www.myurl.com/c=1&st=3&area=14)这样的网址。所有地区州和国家/地区都由数据库中的数字表示。因此，在上面的示例中，如果 usa/california/sanjose 重定向到 c=1&st=3&area=14，如果用户键入 usa/florida/tallahassee，他将不得不重定向到 c=1&st=5&area=3。数字因国家、州和城市而异。

URL重写可以根据名称自动将名称更改为数字，还是我们必须更新数据库并将所有数字更改为名称，以便php文件可以根据名称而不是数字来绘制数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:13:48.687

1.  您可以根据名称重写，但这将是一个非常糟糕的规则集（您需要相应地重写每个州名、每个国家/地区名称和每个地区 - 基本上是您的所有数据库）。

2.  您在数据库中也没有国家和州名称吗？我建议您获取名称，将它们转换为 id，然后像以前一样使用 id（这是首选）。

将漂亮的 url 转换为参数的规则集：

```
RewriteEngine On
RewriteRule ^([^/]+)/([^/]+)/([^/]+) /?country_name=$1&state_name=$2&area_name=$3 [L,QSA]
RewriteRule ^([^/]+)/([^/]+) /?country_name=$1&state_name=$2 [L,QSA]
RewriteRule ^([^/]+) /?country_name=$1 [L,QSA] 
```

第一条规则重写所有三个参数，第二个国家和州以及第三个 - 只有国家你甚至可以将它指向其他文件（不是你的常规索引），然后在将参数转换为 ID 后 - 包括原始处理程序

# jquery - jQuery WYSIWYG 编辑器使用安全吗？

> ID：11175298
> 
> 赞同：0
> 
> 时间：2012-06-24T05:56:11.283
> 
> 标签：jquery, html, security

我使用 jQuery redactorjs 作为我的表单，让我的用户输入格式化的漂亮文本。但是在浏览了 stackoverflow 之后，我从用户那里找到了一些我永远不应该接受预格式化输入的答案。这是问题[链接](https://stackoverflow.com/questions/129677/whats-the-best-method-for-sanitizing-user-input-with-php)。

我希望我的网站是安全的，那么如果我使用这个 jquery 插件，这会降低我的网站的安全性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:04:23.513

接受来自客户端的任何 html 输入是不安全的。即使 jQuery 插件不允许用户制作[XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)，修改客户端运行的代码也很容易。

您应该接受来自用户的输入，例如 markdown（例如 StackOverflow 所做的那样），或者使用一组仔细列入白名单的 HTML 标记和属性（确保生成有效的 HTML 作为输出）。不过，要纠正这是一件非常困难的事情，最好使用经过充分验证的库来实现最佳安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:16:33.400

您所指的链接是关于 sql injection 的。这里的重点是您不能使用客户端库来防止有害输入。但是，您使用库让用户输入格式化的文本，这完全没问题。

无论您在客户端使用哪种库，您需要做的是验证您在服务器端获得的输入。您必须承认恶意用户在技术上能够绕过您在客户端拥有的所有库并将他喜欢的任何内容发送到您的服务器，因此服务器必须验证所有输入以防止 sql 注入攻击等。

# java - 没有 SOAP 的 CXF 中的 XML/HTTP 传输

> ID：11175302
> 
> 赞同：2
> 
> 时间：2012-06-24T05:56:44.740
> 
> 标签：java, xml, http, cxf, xmlhttprequest

请让我知道是否可以通过 http 连接将 XML 作为字符串发送并在不使用任何解析机制的情况下以 XML（作为字符串）返回响应？

在 Apache CXF 中可行吗？还是必须使用流/解析器？如果我将内容类型提供为 text/xml，Apache CXF 中是否有配置可以为我执行此操作？

我想在不使用 SOAP 的情况下做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:12:51.630

您可以使用 Apache CXF 的 JAX-RS 功能： http: [//cxf.apache.org/docs/jax-rs.html](http://cxf.apache.org/docs/jax-rs.html)。如果您使用的是 Spring MVC，则可以使用[Controller 注释本身轻松完成此操作](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:10:31.017

我在 CXF 中使用了 WebClient API 支持。

片段如下：

```
 WebClient client =WebClient.create(url);
    client.type("text/xml");
  client.accept("text/xml"); 
  javax.ws.rs.core.Response resp=client.post(request);
  return resp; 
```

# linux - Linux 使用 grep 命令

> ID：11175305
> 
> 赞同：-2
> 
> 时间：2012-06-24T05:57:15.937
> 
> 标签：linux, filter, grep

使用 grep 命令后，我会给你一个小例子

> grep 测试

测试这是第一行：1

测试这是第二行：2

测试这是第三行：3

测试这是第四行：4

* * *

grep命令执行后如何过滤最后一行

最后我需要结果 4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T06:00:03.367

如果我没有误会你：

```
$grep test | tail -1
>test this is fourth line : 4

$grep test | tail -1 | awk '{print $7}'
>4 
```

`$7`是 中的“第七列” `awk`。

# java - 如何通过套接字发送图像

> ID：11175308
> 
> 赞同：0
> 
> 时间：2012-06-24T05:57:58.227
> 
> 标签：java, sockets, tcpclient

我正在尝试制作一个服务器-客户端模型，在该模型中服务器可以看到客户端在其系统上所做的事情。我想通过套接字（skt）捕获和发送图像。如何显示服务器接收到的图像。

客户端线程：

```
screenShot = new Robot().createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));
                    ImageIO.write(screenShot, "PNG", skt.getOutputStream()); 
```

服务器线程：

```
 BufferedImage image = ImageIO.read(connarray.get(0).getInputStream());
                Graphics g = image.getGraphics();
                g.drawImage(image, 500, 500, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:30:18.307

You don't ask an actual question here, but I could make a couple of observations.

1.  Both your client and server code is catching and **squashing** exceptions. If any exceptions were thrown by the client or server-side, your code is throwing away all of the evidence. Change

    ```
     } catch(Exception ew) { } 
    ```

    to

    ```
     } catch(Exception ew) { ew.printStackTrace(); } 
    ```

    If there are exceptions being thrown, this will tell you what they are. (In production code, you should probably log exceptions instead of calling `printStackTrace(...)` ... but that is a lesson for later.)

2.  Taking a screenshot every 1/10th of a second is going to generate a lot of load on the client and server side.

3.  There are existing (non-Java) tools for doing this kind of thing.

# javascript - 函数声明是否在 Javascript 中创建对象？

> ID：11175309
> 
> 赞同：1
> 
> 时间：2012-06-24T05:58:40.700
> 
> 标签：javascript

函数构造函数能够在 javascript 中创建对象，但我有一个更基本的问题。

使用“函数声明”在 Javascript 中声明一个普通函数，例如

```
function Foo() 
{
  this.prop1 = 20;
  //some code
} 
```

这是否会在 javascript 堆内部创建一个指针为 abc 且 prop1 为 20 的对象？

还是只有在调用函数构造函数时才创建对象

```
var a = new Foo() //This definately creates a new object 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T06:07:06.503

在 javascript 中，所有函数都是对象。

你可以这样做：

```
function foo() {
    return true;
}

foo.greeting = "hello";
foo.tone = "mean";
foo.talk = function() {
    alert(foo.greeting);
}

foo.talk(); 
```

函数对象具有与普通 javascript 对象相同的所有功能，但它还可以做一些额外的事情，例如用作构造函数，并且它具有一些内置属性。有关它具有的其他属性/方法的描述，请参阅函数对象的[MDN 页面。](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T06:31:14.000

Let's go through the execution line by line, adding line 8 for a better understanding:

```
/* 1 */ function Foo() 
/* 2 */ {
/* 3 */   this.prop1 = 20;
/* 4 */   //some code
/* 5 */ }
/* 6 */ 
/* 7 */ var a = new Foo()
/* 8 */ var b = Foo() 
```

Line 1 executes, the heap now contains one element, a function object named `Foo`. At this point, `Foo` hasn't executed. Lines 2 through 5 aren't executed at this point but are used as the body of Foo. Since `Foo` hasn't been called, line 3 hasn't been called on any object so nothing has a `prop1`.

Line 7 executes, the interpreter does several things:

1.  It adds a new object to the heap.
2.  It gives this object the prototype chain of `Foo`. This does nothing special in the case of `Foo` since we haven't assigned anything to `Foo`'s prototype, but `Foo` inherits from `Object`, so the object now has methods like `hasOwnProperty` and `toString`.
3.  The interpreter calls `Foo` passing the newly created object as `this`.
4.  Line 3 gets executed, assigning 20 the property named `prop1`. Whether this creates a new object in the physical heap or if it gets assigned to a primitive section of the object really depends on how the interpretter optimizes everything. I'm sure V8 avoids adding an object to the heap.
5.  The new object gets assigned to `a` in the variable scope of `a`.

So basically, creating a function adds the function loader to the heap (or possibly stack depending on scope and optimizations), and executing `new Foo` adds a new object to the stack.

*But what if we didn't use `new`?*

For fun, lets see the different behavior when we don't use `new`. When line 8 executes, since we aren't calling `new` we perform a normal function call and don't create a new object. The following happens:

1.  We call `Foo` on line one. Since we aren't in strict mode, `this` is assigned to the global `window` object.
2.  Line 3 executes, assigning `window.prop1 = 20`.
3.  The function returns `undefined`.
4.  `b` is set to `undefined`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T06:02:10.013

函数声明只创建*函数对象* `Foo`，但它不**调用**函数或创建它的实例。

仅当您实际调用函数时才会创建实例，`new`并且在此之前，您分配给的属性在`this`任何地方都不存在。

它也很可能`Foo`永远不会被称为构造函数。仅仅通过查看一个函数，您无法确定该函数是否用作构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T06:18:05.520

Javascript 有点令人困惑，因为一个函数既是一个没有/默认上下文的普通函数，但与`new`它配对会创建一个新对象。所以

```
function Foo() {
    this.prop1 = 20;
}

console.log( typeof(Foo) ); //-> 'function' 
```

创建一个名为 Foo 的对象，其类型为`function`. 现在我们可以获取我们的函数对象并创建将添加到当前堆栈的新对象：

```
var bar = new Foo();
console.log( typeof(bar) ); // -> 'object' with a pointer named prop1 to 20 
```

现在我们有 2 个对象，`Foo`它们`bar`引用了一个使用 Foo 作为带有 new 的构造函数创建的对象。所以`new`基本上是魔术，是在 Javascript 中创建对象的三种方法之一。三种方式是：

```
var object = {}; // Creates an object using object literal notation
new Foo(); // Creates an object with built in 'new'
Object.create(null); // new ECMA5 notation that avoid using new 
```

# php - PHP 中的惯用 HTML 生成

> ID：11175312
> 
> 赞同：3
> 
> 时间：2012-06-24T05:58:54.170
> 
> 标签：php, html

在 StackOverflow（[用于生成 HTML 标记的 PHP 库](https://stackoverflow.com/questions/11173367/php-library-for-html-tag-generation#comment14658520_11173367)）的一个单独问题中，我问是否有用于 PHP 的流行或标准 HTML 标记库。

出现了一些评论，质疑这样一个图书馆的目的。

以下是 Luke Welling 和 Laura Thomson 所著的广受好评的《PHP and MySQL Web Development 4th Edition》一书中的一些代码：

```
echo "<td width = \"".$width."%\">
<a href=\"".$url."\">
<img src=\"s-logo.gif\" alt=\"".$name."\" border=\"0\" /></a>
<a href=\"".$url."\"><span class=\"menu\">".$name."</span></a>
</td>"; 
```

我觉得所有的转义和连接看起来有点乱，所以我做了一个[HTML 生成库](https://gist.github.com/2980249)。上面使用库看起来像这样：

```
return td(array('width' => $width . '%'),
    a(array('href' => $url),
        img(array('src' => 's-logo.gif', 'alt' => $name, 'border' => 0))),
    a(array('href' => $url), span(array('class' => 'menu'), $name))); 
```

我的问题是（请记住，我是一个 php 新手），写上述内容的惯用方式是什么？有没有更简洁的方法来编写本书示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T06:21:16.533

您可以使用**PHP heredoc 语法**

```
<?php

$width=10;
$url="www.google.com";
$name="stackoverflow";

echo <<<EOT
<td width = "$width">
<a href="$url">
<img src="s-logo.gif" alt="$name" border="0" /></a>
<a href="$url"><span class="menu">$name</span></a>
</td>
EOT;
?> 
```

有关更多信息，请参阅[PHP 手册](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T06:20:26.033

更清洁 - 绝对有`heredoc`：

```
echo <<<HTML
<td width="{$width}%">
<a href="{$url}"><img src="s-logo.gif" alt="{$name}" border="0" /></a>
<a href="{$url}"><span class="menu">{$name}</span></a>
</td>
HTML; 
```

# asp.net - 如何调试为什么我的 ASP.Net 项目在部署后得到 500？

> ID：11175314
> 
> 赞同：0
> 
> 时间：2012-06-24T05:59:09.240
> 
> 标签：asp.net, asp.net-mvc-3, visual-studio-2010

我有一个 ASP.NET MVC3 解决方案，其中包含 2 个项目。我们称它为`MySolution`2 个项目`Foo`和`Bar`.

它已经在 Azure 中运行了一段时间，没有问题。上个月我在一个分支中做了一些相当大的改变，现在正在寻找部署它。单独地，当我在本地启动它们时，两者`Foo`都`Bar`正常运行。

我的解决方案设置为`Current Selection`在我启动项目时启动，因此我将分别处理每个项目。

`Foo`是我网站的根目录，所以说[http://www.mycompany.com](http://www.mycompany.com)。 `Bar`设置为处理[http://www.mycompany.com/r/的路由](http://www.mycompany.com/r/)

我以为一切正常，但是当我今晚将它部署到我的 Azure 暂存环境时，根站点加载正常。但是当我尝试`Bar`通过进入`/r/`子目录来启动时，我得到了 404。

然后我将我的 web.config 更改为拥有`customErrors=Off`并重新部署。我没有得到`HTTP 500`project 中的任何页面`Bar`。

![在此处输入图像描述](../Images/7311c7300094adeac9f4c539122deed5.png)

我什至不知道从哪里开始调试为什么会发生这种情况，并且很想获得有关如何解决此问题的指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:48:23.217

您可以登录到您的 Windows Azure VM，以便调查问题的根本原因。如果您查看事件日志的应用程序部分，您应该会看到异常和问题的详细信息。将它们复制并粘贴到此处，以便我们进一步为您提供帮助。

# joomla2.5 - 如何显示模块标题 Joomla 2.5

> ID：11175316
> 
> 赞同：1
> 
> 时间：2012-06-24T05:59:32.283
> 
> 标签：joomla2.5

有谁知道如何在 Joomla 2.5 中转换模块的标题（名称）？在我的网站[http://www.amidsfo.ru/](http://www.amidsfo.ru/)现在所有模块都没有标题（名称）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T17:53:02.180

如果启用了节目标题但仍然没有显示标题，请检查您的模板，

你必须这样称呼你的模块：

```
<jdoc:include type="modules" name="left" style="xhtml" /> 
```

魔术部分是 style="xhtml"，所以请确保您拥有它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T15:46:22.753

1.  从 Joomla 管理页面，选择菜单项 Extensions/Module Manager
2.  找到并编辑您希望显示其标题的模块
3.  在出现的页面上，在**详细信息窗格中，***标题*正下方是*显示标题*- 确保选择了*显示*

# asp.net - 来自 2 个表的 gridview 视觉工作室 2005

> ID：11175317
> 
> 赞同：0
> 
> 时间：2012-06-24T05:59:46.870
> 
> 标签：asp.net, gridview

使用 Visual Studio 2005 从 2 个表（其中一个使用另一个的主键作为外键）制作 gridview 的有效方法是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:07:10.553

嵌套的gridview（或datalist/repeater）是你需要的。您需要`TemplateField`在父 GridView 中创建以在其中添加另一个 Gridview。处理`RowDataBound`父gridview的事件以绑定其子元素/控件。

PS：您可以阅读有关 GridView 及其事件的 MSDN 页面/教程。

MSDN 链接：[演练：创建嵌套的 GridView 控件](http://msdn.microsoft.com/en-us/library/aa992038%28v=vs.80%29.aspx)

# php - PHP-Mysql 错误与 %

> ID：11175318
> 
> 赞同：0
> 
> 时间：2012-06-24T05:59:50.170
> 
> 标签：php, mysql

我为搜索关键字的非常简单的搜索栏写了一个非常简单的 mysql 行，但是我遇到了一个错误。（我有一种感觉是因为搜索的长度）

```
$query = "SELECT * FROM entries WHERE name='%".$search."%' "; 
```

有效，但是

```
$query = "SELECT * FROM entries WHERE desc='%".$search."%' "; 
```

没有。

在数据库中，name 大约有 20 个字符，desc 大约有 700 个字符。我检查了拼写和所有内容，它只是输出了一个错误。

**它不起作用是因为它有太多字符无法扫描吗？**

非常感谢（提前）！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T06:02:09.530

`desc`是 mysql 关键字，你需要引用它，你应该使用`LIKE`而不是`=`，并确保你`$search`已经被转义。

```
$query = "SELECT * FROM entries WHERE `desc` LIKE '%".$search."%' "; 
```

# javascript - 从 maps.google.com 检索折线坐标

> ID：11175324
> 
> 赞同：1
> 
> 时间：2012-06-24T06:01:39.883
> 
> 标签：javascript, google-maps, bookmarklet

我想编写一个小书签来获取谷歌地图上现有（即当前显示的）路线的折线坐标并进行一些处理。由于 maps.google.com 已经有一个很好的输入坐标和选择路线的实现，我宁愿不重新发明轮子。有没有一种干净的方法可以让用户在 maps.google.com 上选择一条路线，然后让我的小书签获取显示路线的坐标？

我试着在物体周围挖掘`window`了一下，但没有找到任何东西。我已经看到了这样的实现，您将整个页面源加载到一个字符串中，然后处理 id `route0`、`route1`等的字符串，但是有更好的方法吗？

# c# - 如何根据操作系统版本为 Windows Phone 本地化

> ID：11175325
> 
> 赞同：0
> 
> 时间：2012-06-24T06:01:45.943
> 
> 标签：c#, windows-phone-7, localization, globalization

我正在构建一个 Windows Phone 应用程序，我的客户给了我一个他希望应用程序本地化的语言列表。

问题是 Windows Phone 不支持其中一些语言，然后我决定查看[此处](http://msdn.microsoft.com/en-us/library/hh202918%28v=vs.92%29.aspx)提供的受支持语言列表。我注意到 Windows Phone 有两个操作系统选项，即 7.0 和 7.1，但在开发过程中我不确定如何检查手机正在运行的操作系统，以便我知道要提供给用户的语言列表。

我想知道如何检查 Windows Phone 操作系统是 7.0 还是 7.1（我假设他适合在创建列表后可能出现的更高版本的操作系统）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:59:56.153

查看此[Windows Phone 团队博客文章](http://windowsteamblog.com/windows_phone/b/windowsphone/archive/2012/05/22/starting-today-you-need-windows-phone-7-5-to-use-marketplace.aspx)。

微软已经停止了对 OS 7.0 的支持，所以你不必担心 7.0。继续 7.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T06:57:50.767

微软正在关闭其运行 Windows Phone 7.0 设备的市场。因此，您不需要检查它是否是 7.0 设备，因为您的应用可能不会安装在其中一个设备上。

这是一篇描述这一点的文章。 [http://www.mofonu.com/2012/04/26/windows-phone-marketplace-closure-its-doors-to-devices-not-running-mango/](http://www.mofonu.com/2012/04/26/windows-phone-marketplace-closing-its-doors-to-devices-not-running-mango/)

# css - 如何始终拥有 40-70 个字符宽的页面？屏幕, 移动, 打印

> ID：11175326
> 
> 赞同：2
> 
> 时间：2012-06-24T06:01:49.240
> 
> 标签：css, mobile, readability, typography

如何使用当前的 CSS 最佳实践来平衡体面的字体大小（无论媒体（小型垂直手机屏幕或整页打印））和每行 40~80 个字符的舒适？

我想我知道常规屏幕的练习，将正文的字体大小设置为某个百分比，将您的主要内容元素标记为宽度为 70em 和最小宽度为 40em ...

但是，我对这个问题的移动和打印公认标准一无所知。

我所有的搜索尝试都把我带到了（现在）从 2002 年到 2011 年关于 [em,pixel,%,pt] 相对于其他的好处的徒劳讨论......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T06:44:39.183

```
body {
  min-width: 16em;
  min-width: 40ch;
  max-width: 28em;
  max-width: 70ch;
} 
```

使用`ch`“字符宽度”的单位，并使用单位设置来支持它`em`，其数值约为所需字符数的 40%。

单位是指字体的`em`大小。对于拉丁字母的文本，这大约是字符平均宽度的 40%，可能还要多一些。

单位表示数字 0的`ch`宽度。它通常是 CSS 中“字符平均宽度”的最佳近似值。现代浏览器支持它，但对于不那么现代的浏览器，首先以`em`单位设置宽度。

这回答了邮件标题中的问题。消息的正文含糊不清，没有提出可以建设性地解决的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T06:47:12.497

设置相对于字符大小的页面宽度仅对单型字体有意义。考虑这两个字符串 "iiiiiiiiii" 和 "WWWWWWWWWW" - 都包含 10 个字符，但显然需要不同宽度的容器！

你可以玩转[`ex/em/ch`单位](https://developer.mozilla.org/en/CSS-2_Quick_Reference/Units)，但它们不会让你*完全*控制来完成你想做的事情。另外：`ch`甚至不完全支持！

[摆弄](http://jsfiddle.net/ovfiddle/CpRMC/1/)样本

# php - 单击按钮更改数据库表的字段值

> ID：11175339
> 
> 赞同：0
> 
> 时间：2012-06-24T06:05:49.643
> 
> 标签：php, javascript, jquery, html

有没有办法使用 PHP、HTML、Javascript 更改按钮单击时的数据库字段值？

我需要做的是，我有一个来自数据库的布局列表并显示在网页中。我需要为每个布局添加一个按钮。当我单击一个布局的按钮时，它将是活动布局，名为“活动”的数据库字段应更改为 1。“活动”的所有其他值都将为 0。因此，用户可以选择一个活动布局时间。

有什么简单的方法可以做到这一点吗？有教程或例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:53:48.947

是的。你应该使用 Jquery 的 ajax 调用。

首先在您的标题模板中包含 jquery。不要忘记这一点（我总是这样做）。

假设对于您拥有的第一个活动布局...切换一个...

在桌子之后你会做一个

```
<script>
$("activeOne").click(
   function()
   {
      $("activeOne").fadeOut("fast",
      function()
        {
        $("activeOne").load('get_page.php?act=switch_one','',
          function() 
          {
          $("activeOne").fadeIn("fast");
           }
        );   
         }
      );
   }
);

</script> 
```

我希望你明白我在说什么。1\. 对于每个布局，您都有一个 ID。2\. 对于任何这些 ID，您都有一个脚本调用 get_page.php 并带有一个名为 switch 的参数为您的布局 3\. 现在，对于执行此操作的 php 函数...您要么检查它是否处于非活动状态，然后再进行活动（或检查是否活动以使不活动）...您发送另一个带有您要设置的状态的参数。希望这很有用......我对完全相同的问题使用了完全相同的技术。

# math - 传递函数的平方根（matlab）

> ID：11175341
> 
> 赞同：0
> 
> 时间：2012-06-24T06:06:16.663
> 
> 标签：math, models, matlab

我试图找到我的系统“sys”的大小，所以我知道我必须在我的代码中取传递函数的平方根。我知道你不能直接做，所以我试图做的是

```
[mag phase] = bode(sys,logspace(1,1e7,300));
mag = squeeze(mag);
D = sqrt(mag); 
```

我有另一个传递函数 sys2，我想将它除以这个幅度值，但 MATLAB 似乎不太喜欢这样。我怎样才能得到我的结果 D 并将其更改回传递函数，以便我可以进行除法 sys2/D？

谢谢你的时间。

编辑：最好，如果有一种方法可以直接取我不知道的“sys”的平方根，那将是一个更好的解决方案！

# android - android项目在eclipse中相互拉扯

> ID：11175342
> 
> 赞同：0
> 
> 时间：2012-06-24T06:06:28.140
> 
> 标签：android, eclipse

我有两个项目具有相似的启动启动和菜单活动，但包名称不同。当我运行我的最新项目时，它正在从另一个项目中提取另一个菜单活动。这是我在命名某些东西时搞砸的吗？我检查了我的清单，一切似乎都是正确的。以前有人发生过这种情况吗？显现：

```
 <activity
                android:name=".Splash"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
            <activity 
                android:name=".Menu"
                android:label="@string/app_name">
                <intent-filter>
                    <action android:name="android.intent.action.MENU" />
                    <category android:name="android.intent.category.DEFAULT" />
                </intent-filter>
            </activity>

Activity:

package com.****.tools;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class Splash extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
        Thread timer = new Thread(){
            public void run(){
                try{
                    sleep(3000);
                }catch (InterruptedException e){
                    e.printStackTrace();
                }finally{
                    Intent openMainMenu = new Intent("com.*****.MENU");
                    startActivity(openMainMenu);
                }
            }
        };
        timer.start();
    }
}

package com.****.tools

import android.app.Activity;
import android.os.Bundle;

public class Menu extends Activity{
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.menu);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:15:57.003

您正在使用操作打开活动，但未在新清单中定义，因此它是从旧清单中获取的

```
Intent openMainMenu = new Intent("com.*****.MENU");//<---------
                    startActivity(openMainMenu); 
```

请注意，新的动作名称应该与旧的名称不同，否则它将是一个包含两个活动的选择对话框。

```
 <activity 
            android:name=".Menu"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="com.*****.MENU_NEW" />
                <action android:name="android.intent.action.MENU" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

    Intent openMainMenu = new Intent("com.*****.MENU_NEW");//<---------
                    startActivity(openMainMenu); 
```

# c# - 将 XLSM 转换为 XLSX

> ID：11175343
> 
> 赞同：5
> 
> 时间：2012-06-24T06:06:49.580
> 
> 标签：c#, openxml, xlsx, epplus, xlsm

我正在使用 EPPLUS 库从 Excel 中读取数据以创建另一个文件。不幸的是，它不支持 .XLSM 扩展文件。有没有一种很好的方法可以将 .XLSM 文件转换为 .XLSX 文件，以便使用 EPPLUS 读取文件？

（使用 EPPLUS 阅读会很好，因为我所有的代码都已经使用它编写了 :)）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T16:39:30.877

为此，您需要使用[Open XML SDK 2.0](http://msdn.microsoft.com/en-us/library/bb448854.aspx)。以下是我尝试时对我有用的代码片段：

```
byte[] byteArray = File.ReadAllBytes("C:\\temp\\test.xlsm");
using (MemoryStream stream = new MemoryStream())
{
    stream.Write(byteArray, 0, (int)byteArray.Length);
    using (SpreadsheetDocument spreadsheetDoc = SpreadsheetDocument.Open(stream, true))
    {
       // Change from template type to workbook type
       spreadsheetDoc.ChangeDocumentType(SpreadsheetDocumentType.Workbook);
    }
    File.WriteAllBytes("C:\\temp\\test.xlsx", stream.ToArray()); 
} 
```

此代码的作用是获取启用宏的工作簿文件并将其打开到[`SpreadsheetDocument`](http://msdn.microsoft.com/en-us/library/documentformat.openxml.packaging.spreadsheetdocument.aspx)对象中。此对象的类型是`MacroEnabledWorkbook`，但由于您希望它为 a ，因此`Workbook`您调用`ChangeDocumentType`方法将其从 a 更改`MacroEnabledWorkbook`为 a `Workbook`。这将起作用，因为 .xlsm 和 .xlsx 文件之间的基础 XML 是相同的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-14T13:30:52.030

使用[Open XML SDK](https://github.com/OfficeDev/Open-XML-SDK)，就像在 amurra 的回答中一样，但除了更改文档类型外，还应删除 VbaDataPart 和 VbaProjectPart ，否则 Excel 将显示文件已损坏的错误。

```
using (var inputStream = File.OpenRead("C:\\temp\\test.xlsm"))
using (var outStream = new MemoryStream()) {
    inputStream.CopyTo(outStream);
    using (var doc = SpreadsheetDocument.Open(outStream, true)) {
        doc.DeletePartsRecursivelyOfType<VbaDataPart>();
        doc.DeletePartsRecursivelyOfType<VbaProjectPart>();
        doc.ChangeDocumentType(DocumentFormat.OpenXml.SpreadsheetDocumentType.Workbook);
    }
    File.WriteAllBytes("C:\\temp\\test.xlsx", outStream.ToArray());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-14T03:55:32.287

```
package xlsbtoxlsx;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.regex.Pattern;

import org.apache.poi.openxml4j.opc.OPCPackage;
import org.apache.poi.openxml4j.opc.PackagePart;
import org.apache.poi.openxml4j.opc.PackageRelationship;
import org.apache.poi.openxml4j.opc.PackageRelationshipCollection;
import org.apache.poi.ss.usermodel.WorkbookFactory;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;
import org.apache.poi.xssf.usermodel.XSSFWorkbookType;

public class XlsbToXlsxConvertor {

    public static void main(String[] args) throws Exception {

        String inputpath="C:\\Excel Data Files\\XLSB\\CSD_TDR_20200823";
        String outputpath="C:\\Excel Data Files\\XLSB\\output";

       new XlsbToXlsxConvertor().xlsmToxlsxFileConvertor(inputpath, outputpath);
    }

    public void xlsmToxlsxFileConvertor(String inputpath, String outputpath) throws Exception {
        XSSFWorkbook workbook;
        FileOutputStream out;
        System.out.println("inputpath  " + inputpath);
        File directoryPath = new File(inputpath);
        // List of all files and directories
        String contents[] = directoryPath.list();
        System.out.println("List of files and directories in the specified directory:");
        for (int i = 0; i < contents.length; i++) {
            System.out.println(contents[i]);
            // create workbook from XLSM template
            workbook = (XSSFWorkbook) WorkbookFactory
                    .create(new FileInputStream(inputpath + File.separator + contents[i]));
            // save copy as XLSX ----------------START
            OPCPackage opcpackage = workbook.getPackage();
            // get and remove the vbaProject.bin part from the package
            PackagePart vbapart = opcpackage.getPartsByName(Pattern.compile("/xl/vbaProject.bin")).get(0);
            opcpackage.removePart(vbapart);
            // get and remove the relationship to the removed vbaProject.bin part from the
            // package
            PackagePart wbpart = workbook.getPackagePart();
            PackageRelationshipCollection wbrelcollection = wbpart
                    .getRelationshipsByType("http://schemas.microsoft.com/office/2006/relationships/vbaProject");
            for (PackageRelationship relship : wbrelcollection) {
                wbpart.removeRelationship(relship.getId());
            }
            // set content type to XLSX
            workbook.setWorkbookType(XSSFWorkbookType.XLSX);

            // write out the XLSX

            out = new FileOutputStream(outputpath + File.separator + contents[i].replace(".xlsm", "") + ".xlsx");
            workbook.write(out);
            out.close();
            System.out.println("done");
            workbook.close();
        }
    }

} 
```

# java - 未找到 Java 文件

> ID：11175344
> 
> 赞同：0
> 
> 时间：2012-06-24T06:06:51.283
> 
> 标签：java, android, filenotfoundexception, fileinputstream

我`glassShader.vert`从以下方法调用一个文件，它给了我`FileNotFoundException`错误

复杂的问题是`GLGridRenderer`包含此方法的类位于`GridLogin`包内的目录中`com.jasfiddle.AmazingInterface`

所以要解决目录，它将是`com.jasfiddle.AmazingInterface.GridLogin`

但我不知道如何调用 GridLogin 中的 shader.vert

```
 public static String readShaderFile(String filepath) throws IOException {
    FileInputStream stream = new FileInputStream(new File(filepath));
    try{
        FileChannel fc = stream.getChannel();
        MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());
        return Charset.defaultCharset().decode(bb).toString();
    }
    finally{
        stream.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:14:23.700

您要阅读的文件不应放在包中。它们应该被打包为资源或资产。例如，对于一个数据文件，将其放在`res/raw`文件夹中并为其指定一个合法的资源名称。然后，如果您有`Context`（例如您的`Activity`班级或`View`班级），则可以打开输入流。

```
InputStream stream = context.getResources().openRawResource(R.raw.filepath); 
```

（如果您将文件命名为`res/raw/filepath.dat`。您可能想要一个更有意义的名称。如果您希望名称是一个变量，那么您可以使用以下方法获取资源 ID：

```
int resId = context.getResources.getIdentifier(filepath, "raw", context.getPackageName()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T06:35:23.000

除了 raw 你还可以使用资产文件夹见[链接](http://xjaphx.wordpress.com/2011/10/02/store-and-use-files-in-assets/)....

```
try {
                // get input stream for text
                InputStream is = getAssets().open("text.txt");
                // check size
                int size = is.available();
                // create buffer for IO
                byte[] buffer = new byte[size];
                // get data to buffer
                is.read(buffer);
                // close stream
                is.close();
                            }
            catch (IOException ex) {
                return;
            } 
```

# ios - 直观地对标签和按钮进行分组

> ID：11175347
> 
> 赞同：0
> 
> 时间：2012-06-24T06:07:29.740
> 
> 标签：ios, cocoa-touch, ios5

在 Apple 的通讯录应用程序中，如果您访问一个有两个电子邮件或两个电话号码的联系人，按钮将共享一个中心边框，顶部的按钮将在顶部有圆角，而底部的按钮将在那里有圆角。

我怎样才能做到这一点？我想用按钮和标签来做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:18:38.520

创建 UITableView 时，可以将其样式设置为“分组”。`initWithFrame:style:`分组的 tableView 会自动为您提供所需的圆角（查看方法`UITableViewStyleGrouped`）

# android - 使用 sharedPreferences 保存应用程序状态

> ID：11175350
> 
> 赞同：0
> 
> 时间：2012-06-24T06:08:05.620
> 
> 标签：android

我想知道如何通过在 onStop() 函数中使用 SharedPreferences 来保存变量。我已经设法从“文件”中保存和检索变量。

我的问题是：假设我的应用中有 x 布局，并且需要在 SharedPreferences 中使用不同的文件名。卸载应用程序后，所有这些文件会发生什么情况？我们是否一直在浪费记忆？所有这些文件都被删除了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T06:11:13.137

卸载应用程序时会删除 SharedPreferences。

编辑：为了完整起见，当从应用程序管理器执行“清除数据”操作时，它们也会被删除。

# node.js - 如何在服务器上建模推送通知

> ID：11175355
> 
> 赞同：2
> 
> 时间：2012-06-24T06:09:40.933
> 
> 标签：node.js, architecture, push-notification, real-time

**简要说明**：

好吧，很多天以来，我一直在寻找这个问题的答案，但似乎有关于“如何创建推送通知服务器”和类似问题的答案。我正在使用 node.js，使用 sock.js 很容易“创建”一个推送通知服务器（我听说 socket.io 不如 sock.js）。到这里都没问题。但我想要的是如何为这样的服务器*建模。*

**详情**：

好的，所以，假设我有一个应用程序，其中有一个聊天服务（这只是一个例子，实际的东西很大，你可能已经猜到了）。一个人在房间里发送消息，房间里的所有人都会收到通知。但我想要的是“有状态”聊天——也就是说，我想将消息存储在数据存储中。麻烦就在这里。将消息存储在数据库中，然后告诉所有人“嘿，有一条消息给你”。当我们只需要应用程序的一部分的*实时活动时，这似乎很容易。*当整个应用都是基于实时通信的时候怎么办？除此之外，我还想要一个 RESTful api。

**我的解决方案（我对此并不满意）**

我想做的是：（当然在服务器端）

```
 Data Store
                     ||
                 Data Layer (which talks to data store)
                     ||
            ------------------
            |                |
     Real-Time Server   Restful server 
```

在这里，实时服务器监听数据层发布的有趣事件。每当发生有趣的事情时，服务器都会通知客户端。**但是哪个客户？- 这是我的方法的问题**

希望你能有所帮助。:)

**更新**：

我想我忘了强调我问题的一个重要部分。如何实现发布订阅系统？（注意：我不想要实际的代码，我会自己管理；我需要帮助的是如何去做）。问题是我在编写代码时非常困惑 - 该怎么做（我的困惑从这个问题本身就很明显）。请提供一些参考资料或一些关于如何开始这件事的建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-01T15:09:56.183

我不确定我是否理解正确；但我会总结一下我是如何阅读它的：

1.  We have a real-time chat server that uses socket connections to publish new messages to all connected clients.
2.  We have a database where we want to keep chat logs.
3.  We have also a restful interface to access the realtime server to get current chats in a lazier manner.

And you want to architect your system this way:

![Current architecture of system](../Images/318eb37d30d68dd2a92041f090ed0c5d.png)

In the above diagram, the components I circled with purple curve wants to be updated like all other clients. Am I right? I don't know what you meant with "Data Layer" but I thought it is a daemon that will be writing to database and also interfacing database for other components.

In this architecture, everything is okay in the direction you meant. I mean DataStore is connected by servers to access data, maybe to query client credentials for authentication, maybe to read user preferences etc.

For your other expectation from these components, I mean to allow these components to be updated like connected clients, why don't you allow them to be clients, too?

![Suggested design for backend components' connections to real-time server.](../Images/620377d0f1acc5ff4180b5dbbdca7f3b.png)

Your realtime server is a server for clients; but it is also a client for data layer, or database server, if we prefer a more common naming. So we already know that there is nothing that stops a server from being a client. Then, why can't our database system and restful system also be clients? Connect them to realtime server the same way you connect browsers and other clients. Let them enjoy being one of the people. :)

I hope I did not understand everything completely wrong and this makes sense for the question.

# c# - Windows Phone 中的位图操作：如何处理 GetPixel、SetPixel、PixelFormat 等？

> ID：11175356
> 
> 赞同：2
> 
> 时间：2012-06-24T06:10:01.440
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone

我试图将功能齐全的桌面应用程序之一转换为 Windows 手机应用程序，我设法转换了大部分内容..但由于某些语法错误，一个功能无法正常工作。任何人都知道替代品

**GetPixel、FromArgb、SetPixel、MemoryStream、元帅、ImageLockMode、PixelFormat**

代码是这样的

```
private void tresh()
    {
        int hight = image1.Source.Height;
        int width = image1.Source.Width;
        BitmapImage img = new BitmapImage(image1.Source);
        BitmapImage newImg = new BitmapImage(width, hight);
        int threshold = 0;

        for (int i = 0; i < hight; i++)
        {
            for (int j = 0; j < width; j++)
            {

                int grayScale = (int)((img.GetPixel(j, i).R * 0.3) + (img.GetPixel(j, i).G * 0.59) + (img.GetPixel(j, i).B * 0.11));
                Color nc = Color.FromArgb(grayScale, grayScale, grayScale);
                newImg.SetPixel(j, i, nc);

            }
        }

        image1.Source = newImg;

        MemoryStream ms = new MemoryStream();
        newImg.Save(ms, ImageFormat.Bmp);

        byte[] bmpBytes = ms.GetBuffer();

        threshold = getOtsuNumber(bmpBytes);

        byte[] newBytArr = new byte[bmpBytes.Length];

        for (int i = 0; i < bmpBytes.Length; i++)
        {

            if ((0xFF & bmpBytes[i]) >= threshold)
            {
                newBytArr[i] = ((byte)255);

            }
            else
            {
                newBytArr[i] = ((byte)0);
            }
        }

        BitmapImage oldBmp = newImg;
        width = oldBmp.Width;
        int height = oldBmp.Height;
        BitmapData oldData = oldBmp.LockBits(
                new Rectangle(0, 0, oldBmp.Width, oldBmp.Height),
                        ImageLockMode.WriteOnly,
                        oldBmp.PixelFormat);
        int length = oldData.Stride * oldBmp.Height;
        byte[] stream = new byte[length];
        Marshal.Copy(oldData.Scan0, stream, 0, length);
        oldBmp.UnlockBits(oldData);

        BitmapImage bmp = new Bitmap(width, height, oldBmp.PixelFormat);
        BitmapData bmpData = bmp.LockBits(
                new Rectangle(0, 0, width, height),
                ImageLockMode.WriteOnly,
                bmp.PixelFormat);

        for (int n = 0; n < length; n++)
        {
            if ((0xFF & stream[n]) >= 57)
            {
                Marshal.WriteByte(bmpData.Scan0, n, ((byte)255));

            }
            else
            {
                Marshal.WriteByte(bmpData.Scan0, n, ((byte)0));
            }

        }

        bmp.UnlockBits(bmpData);
        image1.Source = bmp;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-04T11:51:52.593

您必须将类型更改`int`为`byte`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T09:51:02.473

通过使用这个[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)可以使用 GetPixel 和 SetPixel 方法扩展

# global-variables - Vim 中的 'mapleader' 和 'g:mapleader' 有什么区别？

> ID：11175358
> 
> 赞同：17
> 
> 时间：2012-06-24T06:10:06.433
> 
> 标签：global-variables, vim

我不明白 和 之间的`let mapleader=","`区别`let g:mapleader=","`。我知道这`g:`意味着它是一个全局变量，但我不清楚其中的区别。我应该在我的`.vimrc`文件中使用哪一个？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-24T06:19:10.323

如果上述语句都位于函数定义之外，则它们具有设置全局变量的相同效果。`g:`但是，如果在函数体中使用不带前缀的第一条语句，则它定义了该函数的*局部*变量。见`:help internal-variables`，尤其是`:helpg In a function:`。

因此，外部函数定义可以简单地访问全局 map-leader 变量`mapleader`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T06:22:58.970

```
let mapleader="," 
```

如文档中所述。

为什么要使用`g:mapleader`？`g:`主要用于`let`全局变量的插件，以便将设置公开给其他插件或供您在 .vimrc 中使用。

# sql - 如何修改此查询以显示每个部门的员工总数和完成百分比？

> ID：11175360
> 
> 赞同：0
> 
> 时间：2012-06-24T06:10:55.347
> 
> 标签：sql, sql-server-2008-r2

我有以下数据库设计：

```
Employee Table: Username, Name, DivisionCode
Division Table: SapCode, DivisionShortcut
Courses Table: CourseID, CourseName, GroupID
Groups Table: GroupID, GroupName
Employee_Courses Table: EmployeeID, CourseID 
```

我提出了以下查询，显示了部门、课程和每个部门的参与者总数：

```
SELECT     dbo.Divisions.DivisionShortcut, dbo.courses.CourseName, COUNT(dbo.employee_courses.courseId) AS [Total Number of Participants]
FROM         dbo.courses INNER JOIN
                      dbo.employee_courses ON dbo.courses.CourseID = dbo.employee_courses.courseId INNER JOIN
                      dbo.groups ON dbo.courses.GroupID = dbo.groups.ID RIGHT OUTER JOIN
                      dbo.employee AS employee_1 INNER JOIN
                      dbo.Divisions ON employee_1.DivisionCode = dbo.Divisions.SapCode ON dbo.employee_courses.employeeId = employee_1.Username
WHERE     (dbo.courses.GroupID = 1)
GROUP BY dbo.courses.CourseID, dbo.courses.CourseName, dbo.Divisions.DivisionShortcut 
```

除了上面显示的之外，我还想显示每个部门的员工总数和每个部门的完成百分比。顺便说一句，完成百分比等于***（每个课程的参与者总数/每个部门的员工总数）***

**那么该怎么做呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T08:18:41.593

您可以使用子查询将员工总数添加到 Divisions 的联接中。例如：

```
SELECT  d.DivisionShortcut
,       c.CourseName
,       d.EmployeeCount as DivisionEmployees
,       count(c.courseId) as CompletedCourses
,       100.0 * count(c.courseId) / d.EmployeeCount as PercentageCompleted
FROM    dbo.courses c
JOIN    dbo.employee_courses ec
ON      c.CourseID = ec.courseId
JOIN    dbo.employee e
ON      ec.employeeId = e.Username
JOIN    (
        select  d2.SapCode
        ,       d2.DivisionShortcut
        ,       count(e2.DivisionCode) as EmployeeCount
        from    dbo.Divisions d2
        JOIN    dbo.employee e2
        ON      d2.SapCode = e2.DivisionCode
        group by
                d2.SapCode
        ,       d2.DivisionShortcut
        ) d
ON      d.SapCode = e.DivisionCode
WHERE   c.GroupID = 1
GROUP BY 
        d.DivisionShortcut
,       d.EmployeeCount
,       c.CourseName 
```

# android - 解决“HaikuTextView 无法解析或不是字段”错误

> ID：11175373
> 
> 赞同：0
> 
> 时间：2012-06-24T06:14:33.573
> 
> 标签：android

HaikuTextView 是对 TextView 的引用，代码如下：

```
package android.love1;
import android.view.View;
import android.widget.TextView;
import android.content.Intent; 
import android.app.Activity;
import android.os.Bundle;

public class HaikuDisplay1 extends Activity { /** Called when the activity is first     created. */
@Override
public void onCreate(Bundle savedInstanceState) 
 {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main); 
 }

 public void onLoveButtonClicked(View view) {
    TextView textView =(TextView) findViewById(R.id.HaikuTextView);
    textView.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:04:49.507

根据您在标题中描述的错误，出现此错误的一种可能性是因为您没有任何 id 为的 textview`HaikuTextView`

执行以下检查：

检查应用程序`R. java`的文件夹。`gen`如果存在任何

```
public static final class id {
 public static final int HaikuTextView=0x7f0b0213; 
```

}

或者检查您的 main.xml 布局文件，如果您有任何`TextView`id 为`HaikuTextView`

# oracle - 在 oracle 的表中运行存储为值的 sql，并在 SSRS 报告中返回记录集

> ID：11175374
> 
> 赞同：0
> 
> 时间：2012-06-24T06:15:04.963
> 
> 标签：oracle, reporting-services, cursor, execute-immediate

我有一个将 SQL 语句创建为字段的查询。我想执行此语句并在 SSRS 报告中返回记录集。

```
select 'select '||FILE_ID||' FILE_ID,'||
ltrim(sys_connect_by_path('REC_FLD_'||FIELD_NUMBER||' "'||FIELD_NAME||'"',','),',')||
' from RESPONSE_DETAILS where FILE_ID=' ||FILE_ID||';'
from (select t.*,count(*) over (partition by FILE_ID) cnt from RESPONSE_METADATA t)
where cnt=FIELD_NUMBER start with FIELD_NUMBER=1 
connect by prior FILE_ID=FILE_ID and prior FIELD_NUMBER=FIELD_NUMBER-1 
```

这会生成一个 SQL 语句 - 但是我希望执行这个 SQL。

这是[这个问题](https://stackoverflow.com/questions/11137943/convert-rows-into-columns-oracle)的延伸。

我尝试使用 execute immediate 、 cursors 、 dbms_sql 但它不会产生输出。在蟾蜍上使用它。它只说“PL/SQL 过程已成功完成”

使用以下

```
Declare 
  sql_stmt  VARCHAR2(3000);
  l_cursor  SYS_REFCURSOR;
  TYPE RefCurTyp    IS REF CURSOR;
  v_cursor          RefCurTyp;
  CURSOR c1 is
    select 'select '||FILE_ID||' FILE_ID,'||
    ltrim(sys_connect_by_path('REC_FLD_'||FIELD_NUMBER||' "'||FIELD_NAME||'"',','),',')||
    ' from RESPONSE_DETAILS where FILE_ID=' ||FILE_ID||';'
    from (select t.*,count(*) over (partition by FILE_ID) cnt from RESPONSE_METADATA t)
    where cnt=FIELD_NUMBER start with FIELD_NUMBER=1 
    connect by prior FILE_ID=FILE_ID and prior FIELD_NUMBER=FIELD_NUMBER-1;
BEGIN
  open c1;
  FETCH C1 into sql_stmt ;
  dbms_output.put_line(sql_stmt);
  close c1; 
  EXECUTE IMMEDIATE sql_stmt;
  open v_cursor for sql_stmt;
  return l_cursor;
  close l_cursor ;
END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:25:24.180

匿名 PL/SQL 块不能将任何数据返回给调用者。如果要将 a 返回`SYS_REFCURSOR`给调用应用程序，则需要创建一个函数（或过程）。例如

```
CREATE OR REPLACE FUNCTION get_results
  RETURN sys_refcursor
IS
  l_sql_stmt  VARCHAR2(3000);
  l_cursor    SYS_REFCURSOR;
BEGIN
  select 'select '||FILE_ID||' FILE_ID,'||
          ltrim(sys_connect_by_path('REC_FLD_'||FIELD_NUMBER||' "'||FIELD_NAME||'"',','),',')||
         ' from RESPONSE_DETAILS where FILE_ID = ' ||FILE_ID||';'
    into l_sql_stmt
    from (select t.*,count(*) over (partition by FILE_ID) cnt from RESPONSE_METADATA t)
   where cnt=FIELD_NUMBER 
   start with FIELD_NUMBER=1 
 connect by prior FILE_ID=FILE_ID 
        and prior FIELD_NUMBER=FIELD_NUMBER-1;

  dbms_output.put_line(l_sql_stmt);
  open l_cursor for sql_stmt;
  return l_cursor;
END; 
```

我从您的代码中假设您希望您的`SELECT`语句返回单个 SQL 语句 - 您的代码仅从可能返回多个 SQL 语句的查询中获取一行。我假设您只获取一个，因为您只希望`SELECT`语句返回一行。否则，由于您的查询缺少`ORDER BY`，因此您正在任意执行代码生成的 N 个 SQL 语句之一。

如果您经常调用此方法，您几乎肯定会希望在动态 SQL 语句中使用绑定变量，`file_id`而不是生成不可共享的 SQL 语句。我没有在这里做那个改变。

[在调用从 SSRS](https://stackoverflow.com/questions/4025588/ssrs-executing-a-stored-procedure-in-oracle)[返回 a 的存储函数时`sys_refcursor`](https://stackoverflow.com/questions/4025588/ssrs-executing-a-stored-procedure-in-oracle)，还有另一个 StackOverflow 线程。

# javascript - 如何在 Rails 中使用 JavaScript

> ID：11175375
> 
> 赞同：0
> 
> 时间：2012-06-24T06:15:42.797
> 
> 标签：javascript, ruby, ruby-on-rails-3, coffeescript

我正在阅读 Learning Rails 3。在 JavaScript 部分中，如果您想使用 JavaScript 而不是 CoffeeScript，请将文件从 *.js.coffee 重命名为 *.js。好吧，我做到了，JavaScript 不起作用。当我将 JavaScript 转换为 CoffeeScript（并将源文件重命名为 *.js.coffee）时，一切正常。

有任何想法吗？麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T04:39:24.097

application.js 文件应该包含您想要包含的所有 javascript 文件，但是如果它有 '// require_tree '。present 那么目录中存在的所有javascript都将被包括在内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T00:38:45.460

我要做的第一件事是检查文件的服务器输出，以确保它正在加载 javascript 文件。

1.  重启开发服务器
2.  检查 javascript 包含和包含它的清单文件

# php - 在 AJAX 中显示来自数据库的数据的位置错误

> ID：11175378
> 
> 赞同：0
> 
> 时间：2012-06-24T06:16:18.800
> 
> 标签：php, mysql, ajax

我在 PHP 页面中使用 AJAX 从 MySQL 数据库中调用联系人列表。数据被正确调用，但是当我在浏览器中调用 PHP 页面时，我可以看到联系人列表（来自 DB 的数据）显示在元数据之前的页面顶部。该列表应该显示在定义的 DIV 中，但由于某种原因它不是。下面是我的代码：

**阿贾克斯代码**：

```
function getUserList(){

var ajaxDisplay = myform.getElementById('displayList'); // HTML Div where data should be displayed 

 try{ //for Firefox, Chrome, Opera, Safari, IE7+

  var activeX = new XMLHttpRequest(); //initializing object
 }catch(e){

   try{// for IE5 , IE6
    var activeX = new ActiveXObject(Msxml2.XMLHTTP);
   }
   catch(e){

    alert("Dude your browser is in Jurassic era!");
   }
 }

  activeX.readystatechange = function{

   if(activeX.readyState == 4){
    var queryResult = activeX.responseText;

   if(!queryResult){
    ajaxDisplay.innerHTML = 'Error in populating list';
   }else{
    ajaxDisplay.innerHTML = queryResult;
   }

   }
 }

    activeX.open("GET", "?action=contactsandgroups", true);
    activeX.send(null);
} 
```

**PHP/HTML 代码**：

```
<div class="contacts_list_data_contacts" id="displayList"></div> 
```

**MySQL 功能**：

```
while($row=mysql_fetch_assoc($res_info)){

print '<div class="contacts_headings_01">
<div class="contacts_checkbox_01"><input name="contact_id[]" id="contact_id" type="checkbox"  value="'.$row['contact_id'].'" style="margin-top:0px ; margin-left:-3px;" /></div>
<div class="contacts_firstname_01_contacts">'.$row['firstname'].'</div>
<div class="contacts_firstname_01">'.$row['lastname'].'</div>
<div class="contacts_firstname_01">'.$row['company'].'</div>
</div>';
} 
```

当我查看页面源时，它显示它在页面顶部打印数据。这发生在 Firefox、Chrome 和 Internet Explorer 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T06:31:03.330

我看到的是，您希望将这个输出`?action=contactsandgroups`填充到`div#displayList`. 如果是这种情况，请尝试以下方法：

`<head>`在你的部分添加这个：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
    function getUserList()
    {
        ajaxDisplay = $("#displayList");
        ajaxDisplay.load('?action=contactsandgroups');
    }
</script> 
```

试试看它是否有效。如果没有，请将您调用该函数的 HTML 代码发送给我。

# c++ - 注册一个 C++ 类，以便以后函数可以遍历所有注册的类

> ID：11175379
> 
> 赞同：11
> 
> 时间：2012-06-24T06:16:28.053
> 
> 标签：c++, metaprogramming, registration, boost-preprocessor

我正在尝试编写一个在运行时动态加载其扩展的应用程序。我使用 Boost Preprocessor 库编写了一个预处理器函数，给定一个名称列表，为每个名称声明一个类（并使它们都成为某个 AbstractPlugin 类的子类），然后声明一个包含这些类的 Boost MPL 序列。然后我编写了一个类，它尝试一个指向 AbstractPlugin 的指针，如果它可以转换为该 MPL 序列中的任何类型。这里的问题是我的预处理器函数需要我想要创建和加载的所有扩展的完整列表。是否有一些技术可以让我在单独的文件中注册每个扩展？

更新：

我相信，我对情况的解释太模糊了，所以我决定把它说得更具体一些。

我想定义一个扩展类型的集合。对于每种扩展类型，可以有任意数量的扩展。在运行时，程序加载外部库，解析入口点函数，调用它，结果得到一个指针。然后它尝试将该指针强制转换为所有已注册的扩展类型（使用`dynamic_cast`, 因此扩展类型的类都继承自某个多态基类）。如果对某个扩展类型的转换成功，则转换后的指针用于调用该扩展类型的特殊处理程序。

扩展类型的数量在编译时是已知的（显然，扩展的数量是无限的）。使用我的方法，加载器类使用这些知识来检查每个扩展类型是否存在处理程序（如果不存在，则程序无法编译）。此外，我的方法并不强制扩展类型的类对加载器有任何了解（因此修改加载器很容易）。但是如果每个扩展类型都注册自己会更方便。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-24T09:13:58.200

您可以让您的所有课程在某种集合中自行注册。这是一个骨架方法：

**基础.hpp：**

```
#include <memory>
#include <unordered_map>
#include <string>

struct Base
{
    virtual ~Base() = default;

    using create_f = std::unique_ptr<Base>();

    static void registrate(std::string const & name, create_f * fp)
    {
        registry()[name] = fp;
    }

    static std::unique_ptr<Base> instantiate(std::string const & name)
    {
        auto it = registry().find(name);
        return it == registry().end() ? nullptr : (it->second)();
    }

    template <typename D>
    struct Registrar
    {
        explicit Registrar(std::string const & name)
        {
            Base::registrate(name, &D::create);
        }
        // make non-copyable, etc.
    };

private:
    static std::unordered_map<std::string, create_f *> & registry();
}; 
```

**基础.cpp：**

```
#include "Base.hpp"

std::unordered_map<std::string, Base::create_f *> & Base::registry()
{
    static std::unordered_map<std::string, Base::create_f *> impl;
    return impl;
} 
```

现在在客户端中使用它：

**派生的.hpp：**

```
#include "Base.hpp"

struct Derived : Base
{
    static std::unique_ptr<Base> create() { return std::make_unique<Derived>(); }
    // ...
}; 
```

**派生的.cpp：**

```
#include "Derived.hpp"

namespace
{
    Base::Registrar<Derived> registrar("MyClass");
} 
```

的构造函数负责在 name 下`Base::Registrar<Derived>`注册类。您可以通过以下方式动态创建实例：`Derived``"MyClass"``Derived`

```
std::unique_ptr<Base> p = Base::instantiate("MyClass"); 
```

可以/应该通过检测重复注册、打印可用类列表等来改进代码。注意我们如何避免任何静态初始化排序问题，我将实际的注册表映射对象设为块静态对象，保证在之前初始化它的第一次使用，因此只有在最后一次使用后才被销毁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T07:40:54.600

使用抽象工厂模式来实现这样的扩展框架并不难。

[http://en.wikipedia.org/wiki/Abstract_factory_pattern](http://en.wikipedia.org/wiki/Abstract_factory_pattern)

您可以在全局列表中注册这些抽象工厂函数/对象，并在此基础上做任何您想做的事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-06T10:08:21.277

事实证明，我想要的是不可能的。原因是在这种情况下“注册”意味着“将类型放入类型序列中”并且类型序列是不可变的，因为它们本身就是类型。因此，应该手动创建这种类型序列，或者像某些人建议的那样将“注册”移动到运行时。

# zend-framework - 覆盖 Zend 验证消息

> ID：11175381
> 
> 赞同：0
> 
> 时间：2012-06-24T06:16:46.970
> 
> 标签：zend-framework, zend-form-element

如何在下面的代码中覆盖 Zend 验证消息。

```
$validatee = array(
                        'email' => $email,
                );
        $validator = array(
                    'email' => array(
                                'EmailAddress',
                                'messages' => array('emailAddressInvalidFormat',"Invalid Email Address")
                            )
                    );

        $emailValidator = new Zend_Filter_Input(null, $validator,$validatee); 
```

我试过这样做，但消息没有改变并且总是输出

```
"no valid email address in the basic format local-part@hostname" 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:54:41.803

将您的 $validator 更改为 ::

```
 can you try adding 
$validator = new Zend_Validate_EmailAddress();
$validator->setMessage(
    'A valid email is required',
    Zend_Validate_EmailAddress::INVALID
); 

and then use in Zend_filter_input? 
```

# grails - 无法初始化临时成员？

> ID：11175384
> 
> 赞同：6
> 
> 时间：2012-06-24T06:17:01.183
> 
> 标签：grails

在 grails 2.0.4 中，我有一个这样的域类：

```
class Foo {

    String pres
    String temp

    static transients = ['temp']

    def beforeInsert = {
        println "pres: ${pres}"
        println "temp: ${temp}"
    }
} 
```

在 BootStrap.groovy 中：

```
def f1 = new Foo(pres: "p1", temp: "t1")
f1.save()

def f2 = new Foo(pres: "p2")
f2.temp = "t2"
f2.save() 
```

然后 grails run-app，我得到了：

```
pres: p1
temp: null
pres: p2
temp: t2 
```

f1 和 f2 有什么区别，不能初始化瞬态成员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:34:34.503

该[`bindable`约束](http://grails.org/doc/latest/ref/Constraints/bindable.html)允许您覆盖默认行为。它通常用于禁用默认情况下通常可绑定的属性的数据绑定，但我相信您也可以以其他方式使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:58:53.623

升级到 Grails 2 后，我遇到了同样的问题。如果您想了解更多信息，请参阅这两个 JIRA 条目：

[http://jira.grails.org/browse/GRAILS-8972](http://jira.grails.org/browse/GRAILS-8972)

[http://jira.grails.org/browse/GRAILS-9098](http://jira.grails.org/browse/GRAILS-9098)

但是，最终，我不得不求助于您在示例中所做的相同工作。

# python - 忽略python警告

> ID：11175388
> 
> 赞同：14
> 
> 时间：2012-06-24T06:18:25.150
> 
> 标签：python

我想忽略`UserWarning`我的开发环境中的所有内容，以便它们不会打印到我的错误日志文件中。

我已经阅读了`warnings`模块的文档，并尝试了类似的东西：

```
import warnings
import the_module_that_warns

warnings.simplefilter("ignore", UserWarning) 
```

但是`UserWarning`还是会打印出来，这是为什么呢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-24T06:22:11.197

如果模块在导入时发出警告，那么您这样做的方式为时已晚。

相反，做

```
import warnings
warnings.simplefilter("ignore", UserWarning)

import the_module_that_warns 
```

为了`warnings`在警告到来之前告诉模块要忽略什么。

# java - 如何在 Struts2 中验证对 JSP 页面的请求

> ID：11175389
> 
> 赞同：3
> 
> 时间：2012-06-24T06:18:34.007
> 
> 标签：java, jsp, jakarta-ee, struts2

可以使用拦截器验证对 Action 的请求。此外，可以使用空操作声明来避免对 JSP 页面的直接请求。是这样的；

```
<action name="home" >
        <result>home.jsp</result>
</action> 
```

我想验证对 JSP 页面的调用。因为我觉得一个简单的方法可以添加一个 Action ( `ActionSupport`) 并`Interceptor`检查操作名称（并使用会话等进行一些验证）。但我怀疑它是否会降低性能，因为动作类什么都不做，只执行它`execute()`（无用的任务......），并且应该有一个*空的动作*。（但是：正如我已经阅读 Struts2 上的一些文档，据说即使我们不添加 Action 类，框架本身也会添加和返回“成功”的操作类，因此，我们自己添加与否，不会影响新的）

无论如何，我想知道您的最佳方法是验证或授权对某些 JSP 页面的访问。（页面数可以很多.. 不仅仅是一个 jsp 页面）

**补充：** 示例：
可以说，有一些限制页面，所有用户都无法访问，例如用户的帐户页面只能访问登录用户。可以有更多此类页面。如果请求到达此类页面，则必须验证用户。然后，如果请求来自空/匿名操作（如上面的代码片段 - 仅操作名称 - 没有真实类中所述），如何验证此类请求以JSP 页面？是否应该为此使用操作类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:43:35.213

如果您的注意力是保护应用程序的某些部分，以便只有经过身份验证和授权使用才能访问该部分，那么您有两个选择

1.  使用基于拦截器的身份验证
2.  使用像 Spring -security 这样的安全 API

基于拦截器的身份验证非常简单。[这](https://stackoverflow.com/questions/5509606/sessions-in-struts2-application/5517526#5517526)是一个如何执行此操作的示例，但不建议将这种身份验证用于基于生产和现实生活的应用程序，因为它确实是一个非常简单的案例。

如果您正在寻找一个完整的身份验证系统，我建议您查看 Spring security。它非常简单且可配置，您只需告诉底层的 spring 机制，所有区域和安全标签下的 Spring security 将在您采取行动之前拦截它们被调用，只有成功和授权操作才会被 Spring Security 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T08:06:52.080

//这是为了授权

```
package com.kogent.action;

import java.io.IOException;
import java.util.List;
import java.util.regex.Pattern;

import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.struts2.dispatcher.Dispatcher;
import org.apache.struts2.dispatcher.mapper.ActionMapping;
import org.apache.struts2.dispatcher.ng.ExecuteOperations;
import org.apache.struts2.dispatcher.ng.InitOperations;
import org.apache.struts2.dispatcher.ng.PrepareOperations;
import org.apache.struts2.dispatcher.ng.filter.FilterHostConfig;
import org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter;

public class SessionController extends StrutsPrepareAndExecuteFilter {
    protected PrepareOperations prepare;
    protected ExecuteOperations execute;
    protected List<Pattern> excludedPatterns = null;

public void init(FilterConfig filterConfig) throws ServletException {
    InitOperations init = new InitOperations();
    try {
        FilterHostConfig config = new FilterHostConfig(filterConfig);
        init.initLogging(config);
        Dispatcher dispatcher = init.initDispatcher(config);
        init.initStaticContentLoader(config, dispatcher);

        prepare = new PrepareOperations(filterConfig.getServletContext(),
                dispatcher);
        execute = new ExecuteOperations(filterConfig.getServletContext(),
                dispatcher);
        this.excludedPatterns = init.buildExcludedPatternsList(dispatcher);

        postInit(dispatcher, filterConfig);
    } finally {
        init.cleanup();
    }

}

/**
 * Callback for post initialization
 */
protected void postInit(Dispatcher dispatcher, FilterConfig filterConfig) {
}

public void doFilter(ServletRequest req, ServletResponse res,
        FilterChain chain) throws IOException, ServletException {

    HttpServletRequest request = (HttpServletRequest) req;
    HttpServletResponse response = (HttpServletResponse) res;

    try {
        prepare.setEncodingAndLocale(request, response);
        prepare.createActionContext(request, response);
        prepare.assignDispatcherToThread();
        if (excludedPatterns != null
                && prepare.isUrlExcluded(request, excludedPatterns)) {
            chain.doFilter(request, response);
        } else {
            request = prepare.wrapRequest(request);
            ActionMapping mapping = prepare.findActionMapping(request,
                    response, true);
            if (mapping == null) {
                boolean handled = execute.executeStaticResourceRequest(
                        request, response);
                if (!handled) {
                    chain.doFilter(request, response);
                }
            } else {
                //here you have to identify the whether the user have access to requested resource or not 
                //allow him if he was access.
                //if(someCondition)
                execute.executeAction(request, response, mapping);
                //else{
                //redirect the user how do you want it to be.
                ActionMapping modfiedActionMapping = new ActionMapping();
                modfiedActionMapping.setName("someActionName");
                modfiedActionMapping.setNamespace("someNameSpace");
                execute.executeAction(request, response, modfiedActionMapping);

            //}

            }
        }
    } finally {
        prepare.cleanupRequest(request);
    }
}

public void destroy() {
    prepare.cleanupDispatcher();
} 
```

}

```
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>Point to your customized filter</filter-class>
</filter> 
```

# jquery - DIV 标签在用 fancybox 显示后“永远”隐藏

> ID：11175391
> 
> 赞同：0
> 
> 时间：2012-06-24T06:18:58.077
> 
> 标签：jquery, fancybox

我看到一个奇怪的行为。请将其保存为 HTML 文件并打开它。您只会看到“内联”，因为“Lorem ipsum dolor sit amet”具有`"display: none"`. `media="screen"`完美的。然后调用浏览器的“打印预览”功能。您将同时看到“内联”和“Lorem ipsum dolor sit amet” ，因为后者具有`"display: inline"`. `media="print"`再次完美。这就是我需要的行为。现在点击“内联”链接。将出现一个带有“Lorem ipsum dolor sit amet”的fancyBox。关闭这个fancyBox。并再次调用浏览器的“打印预览”功能。您只会看到“Inline”，即现在您不会看到“Lorem ipsum dolor sit amet”。什么鬼？！有人知道原因吗？！这是fancyBox中的错误吗？

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <script type="text/javascript" src="fancyBox/lib/jquery-1.7.2.min.js"></script>
  <script type="text/javascript" src="fancyBox/source/jquery.fancybox.js?v=2.0.6"></script>
  <link rel="stylesheet" type="text/css" href="fancyBox/source/jquery.fancybox.css?v=2.0.6" media="screen" />
  <script type="text/javascript">
    $(document).ready(function() {
      $('.fancybox').fancybox();
    });
  </script>
  <style type="text/css" media="screen">
    .hiddenContent {
      display: none
    }
  </style>
  <style type="text/css" media="print">
    .hiddenContent {
      display: inline
    }
  </style>
</head>
<body>
  <a class="fancybox" href="#inline1">Inline</a>
  <div id="inline1" class="hiddenContent">
    <p>Lorem ipsum dolor sit amet</p>
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:17:35.560

**Dhiraj Bodicherla**的建议对我有用。只需`!important`在 CSS on Print 功能中添加“”。（但我使用块而不是内联）

```
$("#print").on("click", function(){
   var theWork =  window.open('','PrintWindow');
   var html = "<html><head>";
   html += "<style>.printable{display:block !important;} .notprintable{display:none;} </style>";            
   html += "</head>";   
   html += "<body><div id='myprint'>" + $('.fancybox-inner').clone().html();    
   html += "</div>";        
   html += "</body></html>";    
   theWork.document.open();
   theWork.document.write(html);
   theWork.document.close();
   theWork.print();
   theWork.close();
}); 
```

*   “#print”是您的按钮 ID。
*   “.printable”是您要打印的 div 标签类名称。
*   “.notprintable”是您不想打印的 div 标签类名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T06:47:39.463

使用`!important`应该这样做

```
<style type="text/css" media="print">
   .hiddenContent {
       display: inline !important;
   }
</style> 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T06:41:10.520

JQuery 在它不想显示的元素的样式属性中设置 display:none - 即使工作表已经指定了这一点。尝试克隆您想要显示的元素，然后再将它们传递给fancybox。

# c# - WebPage 在 IE 中工作，但在 WebBrowser 控件中会产生 System.AccessViolationException

> ID：11175398
> 
> 赞同：0
> 
> 时间：2012-06-24T06:21:39.847
> 
> 标签：c#, winforms, webbrowser-control, access-violation

我使用 WebBrowser 组件并输入正确的 URL 它工作正常但是当我来到另一个链接时它会产生这个异常

> System.Windows.Forms.dll 中发生了“System.AccessViolationException”类型的未经处理的异常
> 
> 附加信息：试图读取或写入受保护的内存。这通常表明其他内存已损坏。

当我使用 IE 或 Firefox 导航到此 URL 时，它工作正常并且没有错误。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:53:45.567

我试图关注您的帖子，只有当页面尝试使用 WebBrowser 对象加载一些注册控件时，我才能看到问题。如果页面没有任何控件，则不会发生错误。我可以通过仅在 DEP 异常窗口中禁用此 EXE 来快速解决问题。

您只能在“高级系统属性 > 高级 > 设置 > 数据执行保护”中禁用应用程序应用程序的 DEP（数据执行保护）设置。

# android - android：没有收到新的拨出电话广播

> ID：11175402
> 
> 赞同：3
> 
> 时间：2012-06-24T06:22:08.527
> 
> 标签：android, broadcastreceiver, call

我已经为 NEW_OUTGOING_CALL 广播定义了一个接收器。但这没有被调用。

在我的应用程序中，我有其他广播接收器（电话状态、包更改）并且它们都被调用。

请在下面查看我的 android 清单我还尝试更改接收器的定义顺序（将它们放在活动等之前）。

**清单.xml**

```
<uses-sdk android:minSdkVersion="8" />
<!-- permissions -->
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.READ_SMS" />
<uses-permission android:name="android.permission.WRITE_SMS" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECEIVE_MMS" />
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.GET_TASKS" />
<!-- <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> -->
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<!-- Features -->
<!-- <uses-feature android:name="android.hardware.telephony" /> -->
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <!-- Activities -->
    <activity
        android:name=".activities.LoginActivity"
        android:screenOrientation="portrait" >
    </activity>
    <activity android:name=".activites.helper.ShowPopUp" >
    </activity>
    <activity
        android:name=".activities.InnerWindowActivity"
        android:noHistory="true"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Black.NoTitleBar" >
    </activity>
    <activity
        android:name=".activities.VaultDetailSmsActivity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Black.NoTitleBar" >
    </activity>
    <activity android:name=".activities.LocationActivity" >
    </activity>
    <activity android:name=".activities.VaultSettingsActivity" >
    </activity>
    <!-- Receivers -->
    <receiver android:name=".listeners.OutgoingCallReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.NEW_OUTGOING_CALL" >
            </action>
        </intent-filter>
    </receiver>
    <receiver android:name=".listeners.PackageChangeReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.PACKAGE_ADDED" />
            <action android:name="android.intent.action.PACKAGE_REPLACED" />
            <action android:name="android.intent.action.PACKAGE_REMOVED" />

            <data android:scheme="package" />
        </intent-filter>
    </receiver>
    <receiver android:name=".listeners.PhoneStateBroadcastReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.PHONE_STATE" >
            </action>
        </intent-filter>
    </receiver>
    <receiver
        android:name=".listeners.VaultSmsBroadcastReceiver"
        android:exported="true" >
        <intent-filter android:priority="999" >
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
        <!--
             <intent-filter android:priority="101">
                <action android:name="android.provider.Telephony.WAP_PUSH_RECEIVED" />

                <data android:mimeType="application/vnd.wap.mms-message" />
            </intent-filter>

            <intent-filter android:priority="101">
                <action android:name="com.android.mms.transaction.MESSAGE_SENT" />
            </intent-filter>
        -->
    </receiver>
    <!-- Services -->
    <service android:name=".services.CallLogContentObserverService" >
    </service>
    <service android:name=".services.SentSmsContentObserverService" >
    </service>
    <service android:name=".services.LocationService" >
    </service>
</application> 
```

**OutgoingCallReceiver.java**

```
 package com.idg.idvault.listeners;

 import com.idg.idvault.activities.IDVaultActivity;

 import android.content.BroadcastReceiver;
 import android.content.Context;
 import android.content.Intent;
 import android.util.Log;
 import android.widget.Toast;

 public class OutgoingCallReceiver extends BroadcastReceiver {

     @Override
     public void onReceive(Context context, Intent intent) {

         final String originalNumber = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);

         this.setResultData("0123456789");

         final String newNumber = this.getResultData();

         String msg = "Intercepted outgoing call. Old number " + originalNumber + ", new number " + newNumber;

         Toast.makeText(context, msg, Toast.LENGTH_LONG).show();
         Log.i("OutgoingCallInterceptor", "OutgoingCallInterceptor");
         if (originalNumber.equals("**434*")) {
             setResultData(null);

             Intent intent1 = new Intent(context, IDVaultActivity.class);
             intent1.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
             context.startActivity(intent1);
         }

     }

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T06:28:43.350

在 manifest.xml 中添加`<uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS"/>` 处理传出呼叫的权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-05T09:53:20.340

检查这个。清单文件中的顺序可能存在问题。[https://stackoverflow.com/a/6707482/1403112](https://stackoverflow.com/a/6707482/1403112)

# java - 需要对象创建者的技巧

> ID：11175405
> 
> 赞同：0
> 
> 时间：2012-06-24T06:22:57.080
> 
> 标签：java, jakarta-ee

这是我的代码：

```
public interface InterfaceA<J>{  
    // …
} 

public interface InterfaceB extends InterfaceA<String> {
    // …
} 

public interface InterfaceC extends InterfaceA<Long>{  
    // …
}

public class Creator<J, I extends InterfaceA<J>> {}

public abstract class Base<J, J1> implements InterfaceA<J> {    
    protected Creator<J, J1> creator;    

    protected Base() {
        creator=ObjectCreator.createCreator();
    }   
}

public class Extension1 extends Base<Integer> implements InterfaceB {
    // …
}

public class Extension2 extends Base<Double> implements InterfaceC {
    // …
} 
```

我想`Extension1`拥有`Creator<Integer, InterfaceB>`和`Extension2`拥有`Creator<Double, interfaceC>`。看到图案了吗？`Creator<T1, T2>`其中`T1`是直接父类的类型，并且`T2`是由所述类实现的接口。有没有办法做到这一点？任何人都可以告诉代码`ObjectCreator.createCreator()`吗？

现在我的代码如下所示：

```
public class ObjectCreator {
    public static <J, I extends InterfaceA<J>> Creator<J, I> createCreator() {
        return new Creator();
    }
} 
```

我的代码中到处都是错误。我真的很困惑。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:34:15.053

你错过了一大堆东西，编译版本看起来像这样：

```
package scratch;

interface InterfaceA<J> {
    // …
}

interface InterfaceB extends InterfaceA<String> {
    // …
}

interface InterfaceC extends InterfaceA<Long> {
    // …
}

class Creator<J, I extends InterfaceA<J>> {
}

abstract class Base<J, I extends InterfaceA<J>> {
    protected Creator<J, I> creator;

    protected Base(Class<J> jClass, Class<I> iClass) {
        creator = ObjectCreator.createCreator(jClass, iClass);
    }
}

class Extension1 extends Base<String, InterfaceB> implements InterfaceB {
    protected Extension1() {
        super(String.class, InterfaceB.class);
    }
}

class Extension2 extends Base<Long, InterfaceC> implements InterfaceC {
    protected Extension2() {
        super(Long.class, InterfaceC.class);
    }
}

class ObjectCreator {
    public static <J, I extends InterfaceA<J>> Creator<J, I>
    createCreator(Class<J> jClass, Class<I> iClass) {
        return new Creator();
    }
} 
```

没有特别的重要性顺序：

*   当您有一个带有类似`createCreator()`has 签名的类时，您需要将`Class`对象作为类型标记传递给它。Java 编译器无法根据您分配返回值的变量的类型来推断类型。此外，由于类型擦除，您无论如何都希望它们在那里，否则您无法`Creator`根据给定的类型专门化它们。
    *   如果你有`Base<J, I>`两个类型参数，扩展类应该使用这两个类型参数。
    *   您的扩展类签名很奇怪。你不能拥有`class Extension1 extends Base<Integer, InterfaceA<String>>`，因为你不能拥有`Creator<Integer, InterfaceA<String>>`。使用显式类型标记`createCreator()`会迫使您在任何需要的地方传播此约束，并使错误不那么神秘。您不能真正独立于和类型参数`Base`之间的约束。`J``I`

# vim - Ctags 包含外部函数作为函数原型？

> ID：11175409
> 
> 赞同：2
> 
> 时间：2012-06-24T06:23:53.863
> 
> 标签：vim, ctags, omnicppcomplete

我是使用 vim 作为 C IDE 的新手。我已经安装了 c-vim、omnicppcompletion、ctags 和其他有用的插件。

然而omnicppcompetition是基于ctags数据库的，但是ctags似乎不能很好地处理read/write/socket之类的功能。

我在 Arch 框中使用以下命令构建了我的标签： `$ pacman -Qql glibc | grep \.h$ > /tmp/filelist_c ; ctags -L /tmp/filelist_c --c-kinds=+px --fields=+iaS --extra=+q`

然而，像 write,socket 这样的函数不在标签中。我知道这些函数是头文件中的外部函数，但只需要参数列表和函数来完成，甚至外部函数对我来说也有足够的信息。

关于制作包含外部函数的标签的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T07:09:03.800

头文件`*.h`被称为`ctags`文件`C++`，因此，实现所需内容的最简单方法是将以下选项添加到 ctags 命令行：

`--c++-kinds=+p+l`

而且，为什么不使用专门用于管理 Vim 中的 ctags 的插件[Indexer ？](http://dmitryfrank.com/articles/vim_project_code_navigation)

# java - 关于字符串池的一些混淆

> ID：11175411
> 
> 赞同：1
> 
> 时间：2012-06-24T06:24:53.353
> 
> 标签：java

java文档说：

> 一个字符串池，最初是空的，由 String 类私下维护。

1）它是这些字符串文字的池 `string literals` 还是 `references` 这些字符串文字？在网上，一些文章将其称为字符串文字池，而其他文章将其称为引用池，所以我感到困惑。

2) 是按类还是按 JVM 创建字符串池？

3）是否有任何参考可以找到字符串池的详细信息，其实现等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T07:16:07.160

> 1）它是字符串文字池还是对这些字符串文字的引用？在网上，一些文章将其称为字符串文字池，而其他文章将其称为引用池，所以我感到困惑。

这是同样的事情。您不能拥有没有引用的 String 对象，反之亦然。

而且，正如 Peter Lawrey 所说：*“在 Java 中，对象位于堆内。没有其他地方。在其他东西（对象、数组、集合或堆栈）中唯一可以拥有的是对该对象的引用。”*

> 2) 是按类还是按 JVM 创建字符串池？

每个 JVM 有一个字符串池……除非您使用的是一些奇特的 JVM，而他们决定以不同的方式实现它。（规范并没有说JVM*必须有*一个字符串池，但这通常是最有效的方法。）

> 3）是否有任何参考可以找到字符串池的详细信息，其实现等？

您可以下载 OpenJDK 6 或 7 的完整源代码。弹簧池是用本机代码实现的……所以您将阅读 C++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T06:37:02.250

```
Is it a pool of string literals or references to these string literals?. 
```

好吧，显然它是字符串文字池。假设你写，

```
String str= "a learner"; 
```

它将通过equals()方法在字符串池中搜索字符串池中是否存在相同的字符串。如果在池中，则返回该字符串对象，否则将其存储在字符串池中并引用新添加的字符串被退回。

**因此，它是 String 对象池，每当您键入新的字符串字面量时，就会调用 equals() 方法。**

```
Is string pool created per class basis or per JVM basis? 
```

JVM中只能有一类String，因为String类是final的。因此，每个 JVM 不存在多个 String 类的问题。最终结果是每个 JVM 只有一个字符串池。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T06:30:06.297

它被称为[字符串*实习*](http://en.wikipedia.org/wiki/String_interning)。

1.  它是一个字符串字面量池
2.  实习是在 JVM 基础上完成的
3.  String 的 JDK 源代码中包含所有代码

# python - Django 查询顶级模型

> ID：11175412
> 
> 赞同：1
> 
> 时间：2012-06-24T06:25:08.840
> 
> 标签：python, django, django-models

我有一个 django 模型，每个实例都有一个`item_id`. 我想根据得票最多的项目 id 来查询。

我试过这个没有成功。

```
top_item_ids_as_vote = Vote.objects.annotate(item_count=Count('item_id')).order_by('item_count').distinct('item_id') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:51:53.467

尝试以下操作：

```
top_item_ids_as_vote = Vote.objects.annotate(item_count=Count('item_id')).order_by('-item_count')[:10] 
```

# r - 使用 install.packages 安装旧包

> ID：11175414
> 
> 赞同：5
> 
> 时间：2012-06-24T06:25:33.523
> 
> 标签：r

我明白了

```
package ‘rJava’ is not available (for R version 2.15.0) 
Warning: unable to access index for repository http://cran.stat.ucla.edu/bin/macosx/leopard/contrib/2.15 
```

如果`install.packages()`存储库没有我的 R 版本 2.15.0（最新的 Mac 二进制文件）的给定包的版本，则使用时。有没有办法让 R 检查旧版本，例如 R 2.14 的 rJava？

我知道我可以下载`tar.gz`文件然后`R CMD INSTALL`在终端中使用，但我想知道是否有办法使用 `install.packages()`. 谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:50:06.550

尝试不同的 CRAN 镜像存储库（例如`install.packages("rJava", repos = "http://cran.us.r-project.org/")`，或简单地尝试使用 UCLA 存储库再次安装[。CRAN 镜像监视器报告](http://cran.r-project.org/mirmon_report.html)表明最近 UCLA 镜像出现了一些零星的停机时间。R 2.15.0 的 Rjava 二进制文件应该可用。我可以在[http://cran.stat.ucla.edu/bin/macosx/leopard/contrib/2.15/rJava_0.9-3.tgz](http://cran.stat.ucla.edu/bin/macosx/leopard/contrib/2.15/rJava_0.9-3.tgz)的 UCLA 镜像上直接访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T06:47:24.227

您可以安装旧版本的 R，它具有包的兼容版本。如果 rJava 仅适用于 2.14，我将只运行该版本。

# haskell - Haskell Bag (Multiset) 实现

> ID：11175415
> 
> 赞同：0
> 
> 时间：2012-06-24T06:25:49.913
> 
> 标签：haskell, syntax-error

我正在尝试实现一个 Haskell Bag (multiset)。

到目前为止，我有这个

```
data Bag a = EmptyBag | ListBag [(a, Integer)] deriving (Eq, Show)

emptyBag :: Bag a
emptyBag = EmptyBag

add :: a -> (Bag a) -> (Bag a)
add element EmptyBag = ListBag [(element,1)]
add element (ListBag bag)
  | element `elem` map fst bag = ListBag bag -- will actually increment the count, and return the new bag. 
```

我得到错误

```
No instance for (Eq a)
      arising from a use of `elem'
    In the expression: element `elem` map fst bag 
```

编译时。这是因为您无法确定两种不同类型的相等性吗？如何确定 Bag 中项目的第一个元素是否已经在 Bag 中？

另外，关于如何实现增加特定项目的计数，并用新的 (element,count) 元组返回包的任何提示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T06:39:12.927

问题的直接原因是并非所有类型都具有可比性。您可以通过更改类型签名将您的类型限制为仅使用提供相等比较的类型：

```
add :: Eq a => a -> Bag a -> Bag a 
```

您可能想查看 Hackage 上的[multiset-comb](http://hackage.haskell.org/package/multiset-comb)和[data-ordlist](http://hackage.haskell.org/package/data-ordlist)包以获取更多实施技巧。

最后一点，我发现`EmptyBag`构造函数有点可疑：它与例如`ListBag []`?

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T06:41:37.573

是的，问题是 Haskell 不能比较*任意*元素的相等性——它只能比较属于类型类的`Eq`类型。这是有道理的：比较某些事物，比如函数，是无法确定的。其他语言有“引用相等”的概念，但这在 Haskell 中没有意义。所以有些类型的值根本无法比较是否相等。除非您有某种方法可以比较两个值是否相等，否则您无法检查列表中是否已经存在某些内容，这就是`Eq`提供的。

这意味着任何集合（或多集合）实现都将依赖于`Eq`（或其他一些显式比较函数）。实际上，`Ord`出于性能原因，集合往往也依赖于，但由于您只是使用列表，因此不必担心。这也意味着你不能让你的多重集成为 Functor 或 Monad，而是 c'est la vie。

简而言之：您必须将类型限制为`Eq`. 所以改成`a -> Bag a -> Bag g`等等`Eq a => a -> Bag a -> Bag a`。

由于看起来您只是在做一些练习来学习语言（我希望这不会显得居高临下），所以我只会为您的第二个问题提供一些提示。

递归思考。首先，考虑一个基本情况：如何将元素添加到空的多重集中？另一个基本情况：给定一个以你的元素作为列表头部的多重集，你如何创建一个新的、递增的多重集？最后，递归案例：如果您有一个列表，其中头部*不是*您想要增加的元素，您会怎么做？一旦你回答了所有这些问题，你就可以通过列表中的模式匹配将每个问题写成一个单独的案例，并将它们放在一起以获得你的`add`功能。

另一个注意事项：拥有`EmptyBag`构造函数是多余的。列表可能已经为空！有什么`ListBag []`不同`EmptyBag`？在这种情况下，我只有一个构造函数。

所以你的 add 函数看起来像这样：

```
add :: Eq a => a -> Bag a -> Bag a
add x (ListBag []) = ...
add x (ListBag [(x', n)]) = ... 
```

只需填写`...`适当的案例，就可以了。

根据您的评论，这里有一些示例代码，说明如何在递归时保留列表。

基本上，主要思想很简单：在递归的情况下，不是只返回传递给函数的列表的其余部分，而是返回当前元素，然后是列表的其余部分。基本情况仍然很简单：

```
add :: Eq a => a -> Bag a -> Bag a
add x (ListBag []) = ListBag [(x, 1)] -- first base case
add x (ListBag (x', n):xs)
  | x == x'   = ListBag $ (x', n + 1) : xs -- second base case
  | otherwise = let ListBag rest = add x (ListBag xs) in ListBag $ (x', n) : rest 
```

您必须使用该`let`语句将列表从列表中取出，`ListBag`以便您可以将未触及的元组放回它的前面。

在考虑这样的递归时，我不希望将其视为一系列步骤，而是分别考虑每种情况。在每种情况下，我们都希望返回给定的*全部* `ListBag`内容。所以我们需要将我们正在处理的元组与列表的其余部分结合起来。在递归的情况下，我们从递归调用中获取列表的其余部分；在第二种基本情况下，我们不必再次调用该函数。

因此，通过在每一步返回整个包，我们在所有递归结束时维护整个列表。

我希望这能让它更清楚。

# objective-c - 强制 Xcode 跳转到实现而不是使用跳转到定义的接口

> ID：11175416
> 
> 赞同：8
> 
> 时间：2012-06-24T06:25:52.357
> 
> 标签：objective-c, xcode

在我更新到 4.3.3 之后，Xcode 开始跳转到接口而不是实现。与快速打开相同，它不显示实现文件，只显示标题。有没有相同的方法来修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T04:45:46.060

我不知道有一种方法可以选择 Xcode 是直接跳转到接口还是实现。

但是，如果您正在查看界面，则可以通过命令单击界面中的名称来跳转到实现。如果您正在查看实现，您可以通过命令单击实现中的名称来跳转到界面。

这适用于类名和选择器。因此，从界面和实现（如果 Xcode 知道在哪里可以找到它们），您永远不会超过两次命令单击。

# java - jsp和servlet的独立数据库连接方式

> ID：11175417
> 
> 赞同：0
> 
> 时间：2012-06-24T06:26:42.157
> 
> 标签：java, jsp, servlets

我试图在 .java 文件中编写一个单独的数据库连接方法，任何需要数据库连接的 servlet 或 jsp 文件都可以调用该方法。我的代码是

* * *

```
import java.sql.*;
import java.lang.*;

public class ConnectionClass {

private String username="root";
private String password="passwd";

/* Adjust the above two as per the username
 * password combination of your MySql databse */

public Connection connect()
{
    try
    {
        Class.forName("com.mysql.jdbc.Driver");  
        String url="jdbc:mysql://localhost/schooldatabase";
        Connection con = DriverManager.getConnection(url,username,password);
        return con;
    }

    catch(Exception e)
    {
         response.sendRedirect("studentserr.html");
         out.println(e);
    }        
 }
} 
```

* * *

现在，问题是我将返回一个 Connection 类型，以便所有 servlet（需要数据库连接）可以使用它来执行各种语句。但是，在我的代码中，我应该在 catch 块中返回什么（这意味着无法建立与数据库的连接）？此外，如果连接失败，我会将用户重定向到以下页面：

* * *

```
"studentserr.html" 
```

* * *

如果我在 servlet 中使用它而不是在 .java 类中使用它，这可以正常工作。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:24:56.017

您应该只在可以明智地处理异常的那一刻捕获异常。您无法在`getConnection()`方法中明智地处理它们，因此您应该将其抛出，以便调用者本身需要处理它。

然而，在特定异常的情况下显示错误页面是 servlet 容器本身的责任。您通常`web.xml`按如下方式配置错误页面：

```
<error-page>
    <exception-type>java.sql.SQLException</exception-type>
    <location>/WEB-INF/errorpages/database.jsp</location>
</error-page> 
```

您只需要相应地更改您的代码，您就不会捕获异常，或者至少`ServletException`在必要时重新抛出。

这是一个小的重写：

```
public class Database {

    private String url = "jdbc:mysql://localhost/schooldatabase";
    private String username = "root";
    private String password = "passwd";

    static {
        try {
            Class.forName("com.mysql.jdbc.Driver"); // You don't need to load it on every single opened connection.
        } catch (ClassNotFoundException) {
            throw new ExceptionInInitializerError("MySQL JDBC driver missing in classpath", e);
        }
    }

    public static Connection getConnection() throws SQLException {
        return DriverManager.getConnection(url, username, password);
    }

} 
```

以下是您应该如何在 DAO 类中使用它：

```
public List<Student> list() throws SQLException {
    List<Student> students = new ArrayList<Student>();
    Connection connection = null;
    // ...

    try {
        connection = Database.getConnection();
        // ...
    } finally { // Note: no catch block!
        // ...
        if (connection != null) try { connection.close(); } catch (SQLException ignore) {}
    }

    return students;
} 
```

这里是你应该如何在你的 servlet`doGet()`或`doPost()`.

```
try {
    List<Student> students = studentDAO.list();
    request.setAttribute("students", students);
    request.getRequestDispatcher("/WEB-INF/students.jsp").forward(request, response);
} catch (SQLException e) {
    throw new ServletException(e);
} 
```

它必须重新抛出，`ServletException`因为您不能添加`SQLException`到任何方法的`throws`子句中。`HttpServlet`servletcontainer 将`SQLException`在定位错误页面时展开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T06:33:27.383

Return a `null` value in case an exception is thrown. In case of getting a null value from your method, handle the exception and don't perform any database operation.

Also, remember to separate the database logic (connection, statement execution) from the business logic and the presentation. In your actual method, this code

```
response.sendRedirect("studentserr.html"); 
```

should never be in the database logic, because is presentation logic.

More info:

*   [Java 101: Layered Architecture](http://www.fuzzylizard.com/archives/2005/10/02/638/)
*   [How to avoid Java Code in JSP-Files?](https://stackoverflow.com/a/3180202/1065197)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T07:17:52.790

尝试将类“ConnectionClass”移动到某个包中。然后在你需要这个的java类中调用这个包（似乎是java文件中的类路径问题）或jsp或servlet页面。示例 您需要在 Demo.java 中作为 pkg1.ConnectionClass obj = new pkg1.ConnectionClass ();

建议将数据库连接类设置为单例。因此，在整个应用程序中，只会创建和共享一个连接实例。

# mysql - 如果条件满足则插入

> ID：11175418
> 
> 赞同：1
> 
> 时间：2012-06-24T06:27:16.907
> 
> 标签：mysql

```
IF (( SELECT param FROM changes WHERE type = 'uptime' AND website_id = 1 ORDER BY timestamp DESC LIMIT 1 ) != 'up' )
    INSERT INTO changes ( website_id, timestamp, type, param ) VALUES ( 1, NOW(), 'uptime', 'up' )
END IF; 
```

这似乎是不正确的语法。我还能如何在单个查询中完成这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T07:39:43.343

为什么要使用 IF 在查询之外读取参数记录，而不是仅将其添加到 WHERE 条件中？如果你这样做，那么你可以插入完整的查询，如果查询返回一些你的数据将被插入，如果你的查询没有返回任何东西，那么什么都不会被插入：

```
INSERT INTO changes ( website_id, timestamp, type, param )
     SELECT 1, NOW(), 'uptime', 'up'
       FROM changes 
      WHERE type = 'uptime' AND website_id = 1 AND param != 'up' LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T07:28:10.270

`changes`似乎是用于记录事件的表。鉴于`INSERT`它的所有变化是不可能的。您可以尝试使用`STORED PROCEDURE`来实现它。您可以执行以下操作：

```
select param into @last_param from changes where website_id = 1 and type = 'uptime' limit 1; 
```

现在 @last_param 将包含`up`or `down`。在下一个语句中可以以 if`last_param`为 up 或 down 为条件。

# c++ - C++, treating dates as numbers

> ID：11175421
> 
> 赞同：3
> 
> 时间：2012-06-24T06:27:58.810
> 
> 标签：c++, date

Is there a way to treat dates as numbers, without the need of implementing my own class for that?

I would like to compare dates, compute differences (Monday - Friday should be one day, I'm considering business days) etc..?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:10:51.213

正如 chris 建议的那样，使用[Boost](http://www.boost.org/doc/libs/1_49_0/doc/html/date_time.html)，或者，如果这是一个问题，使用 C 库（ C++ 中的[ctime](http://en.wikipedia.org/wiki/C_date_and_time_functions)标头）。

# sql - How to search a given text in a table in sql server

> ID：11175423
> 
> 赞同：0
> 
> 时间：2012-06-24T06:28:26.067
> 
> 标签：sql, sql-server, sql-server-2008

I want to search a text in a table without knowing its attributes. Example : I have a table Customer,and i want to search a record which contains 'mohit' in any field without knowing its column name.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T23:43:55.417

Mohit，我很高兴你自己设计了解决方案。

无论如何，每当您再次面对未知的表或数据库时，我认为我刚刚[发布](https://stackoverflow.com/a/12557162/206413)的代码片段将非常受欢迎。

啊，还有一件事：给出的答案并没有解决您的问题，是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T07:02:52.597

您正在寻找**[全文索引](http://blog.sqlauthority.com/2008/09/05/sql-server-creating-full-text-catalog-and-index/)**

使用示例`Contains`

```
select ColumnName from TableName 
Where Contains(Col1,'mohit') OR contains(col2,'mohit') 
```

**注意 -**您可以使用从 sys.Columns 查询计算的列名将上述自由文本查询转换为动态查询

还要检查下面

**[FIX：跨列包含子句搜索的全文搜索查询](http://support.microsoft.com/kb/294809)**

您还可以从以下查询中检查所有列名

```
Select Name From sys.Columns Where Object_Id = 
                   (Select Object_Id from sys.Tables Where Name = 'TableName') 
```

> Double-WildCard LIKE 语句不会加快查询速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T06:37:07.820

如果您想对表格进行全面搜索，您肯定知道表格的结构。考虑到表有字段`id`、`name`、`age`和`address`，那么您的 SQL 查询应该是这样的：

```
SELECT * FROM `Customer`
    WHERE `id` LIKE '%mohit%'
    OR `name` LIKE '%mohit%'
    OR `age` LIKE '%mohit%'
    OR `address` LIKE '%mohit%'; 
```

# mysql - MySQL计算多个日期范围内的行数？

> ID：11175427
> 
> 赞同：2
> 
> 时间：2012-06-24T06:29:05.143
> 
> 标签：mysql, date, count, range

我想计算给定表中几个日期范围内的行数（即：上一小时、今天、本周、过去 30 天）。

我需要知道此时间/日期期间有多少条目，才能判断给定用户是否已达到每个范围的限制。例如，用户一个月最多可以有 300 个条目，但有（每小时/每天/每周/每月）限制。

到目前为止，我正在尝试使用`SELECT CASE`与此类似的子查询方法：[group by range in mysql](https://stackoverflow.com/questions/6687534/group-by-range-in-mysql)

哪个应该是最好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T06:44:24.720

在 mysql 中，您可以使用一系列带有 if 语句的计数函数，以便只计算所需的日期，就像这样。

```
SELECT COUNT(IF(date >= DATE_SUB(NOW(), INTERVAL 1 HOUR), 1, null)) AS hourHits, 
```

等等

***根据评论编辑***

# php - Maven for PHP won't find the right archetype

> ID：11175428
> 
> 赞同：1
> 
> 时间：2012-06-24T06:29:10.400
> 
> 标签：php, maven, maven-archetype

I try to create a new php project with maven by using this command mvn archetype:generate , but it won't find the mavenphp achetype, instead it gives me a list of a lot of archetypes. I configured my settings.xml with the info provided here [http://www.php-maven.org/prepare.html](http://www.php-maven.org/prepare.html) but it still does not work. Any ideas?

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:16:06.407

与您之前的评论相关：

```
mvn archetype:generate -DarchetypeArtifactId=php5-zend-archetype 
```

这假定使用原型版本 1.0.0。然而，这个原型版本不存在。使用以下内容：

```
mvn archetype:generate -DarchetypeArtifactId=php5-zend-archetype -DarchetypeVersion=2.0.0 -DarchetypeGroupId=org.phpmaven 
```

# c++ - Resolving PE SxS imports Windows

> ID：11175430
> 
> 赞同：2
> 
> 时间：2012-06-24T06:29:45.577
> 
> 标签：c++, windows, portable-executable, winsxs

I'm in the middle of writing my own version of the Windows Loader (albeit a very simple version) and thus far things have worked out fairly well. However, I've run into a little snag when it comes to recursively walking the Import table for the loaded module.

For most dependencies, things work out well and I can simply recursively load the module. However, for some dependencies, this just breaks the target process. Upon further investigation I realized that this is because of Windows Side-by-side assemblies. Essentially, the dependency in the loaded PE was a different SxS version of the module being used in the target process.

In one case, the DLL I was loading referenced msvcr90.dll, but the target process was using an earlier version of the runtime: msvcr71.dll.

Now, the windows loader can handle this fine, so there's obviously a "correct" way to do this. I've read up a bit on Activation Contexts, but they haven't really helped me grasp the issue.

Calling LoadLibrary itself doesn't resolve the dll to the correct version either

```
LoadLibraryW(L"msvcr90.dll"); 
```

Simply returns 0\. Does anyone know

> a) How to detect if an import is a SxS assembly
> 
> b) How to resolve the import into the correct SxS version for the process.

I'm really stumped on how to do this. I know most of the PE file format from research now, but I'm pretty sure the SxS is beyond the scope of PE structure.

If you need any more info, just comment. The executable doesn't have an external manifest, and its embedded manifest doesn't specify the runtime version. It does, however, contain a copy of msvcr71.dll in its working directory, if that helps anyone at all.

Cheers.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T08:41:49.920

事实上，SxS 依赖超出了 PE 结构的范围！如您所知，PE 的 Import Tables 枚举依赖项**名称**而不是它们的版本。在处理这些依赖关系表时，Loader 还会查看 PE 依赖映像的 Manifest。如果 Manifest 记录一个或多个库（例如 msvcr90、advapi32、....），加载程序会在 winsxs 文件夹中查找依赖项。[这里有一篇文章](http://www.codeproject.com/Articles/88363/Retrieve-the-Assembly-Identities-from-a-Manifest-u)概述了这个程序集以及如何在 C++ 中收集这些信息。

# c# - 如何修剪字符串并将其转换为整数？

> ID：11175434
> 
> 赞同：0
> 
> 时间：2012-06-24T06:30:46.430
> 
> 标签：c#, winforms, string, integer

我如何修剪和转换字符串如下：

```
string abc = "15k34"
int x = first two characters of abc // should be 15
but if abc begins with "0"
for example - string abc = "05k34"
int x = first two characters of abc // should be 5 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T06:41:26.407

尝试使用以下代码：

```
 string str = "15k34";
            int val;
            if (str.Length>1)
            {
                if (int.TryParse(str.Substring(0, 2), out val))
                {
                    //val contains the integer value
                }

            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T06:37:13.243

```
string abc = "15k34";
int x = 0;
//abc = "05k34";
int val;
if (!string.IsNullOrEmpty(abc) && abc.Length > 1)
{
    bool isNum = int.TryParse(str.Substring(0, 2), out val);
    if (isNum)
    {
        x = val;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T06:45:08.180

我认为从伪代码中，您通常会有带有“k”的数字代表数千。

所以...

```
string abc = "15k34";
string[] numbers = abc.Split('k');  //This will return a array { "15", "34" }
int myInt = Convert.ToInt32(numbers[0]); 
```

如果字符串是“05k34”，那么 myInt 的值就是 5。

文档：

[http://msdn.microsoft.com/en-us/library/1bwe3zdy](http://msdn.microsoft.com/en-us/library/1bwe3zdy)
[http://msdn.microsoft.com/en-us/library/bb397679.aspx](http://msdn.microsoft.com/en-us/library/bb397679.aspx)

# c# - Deployment: How to access a windows service name so the (un)installer can uninstall it?

> ID：11175437
> 
> 赞同：1
> 
> 时间：2012-06-24T06:31:04.610
> 
> 标签：c#, .net, deployment, windows-services, uninstallation

Upon installation of a Windows Service, an application is using a custom action to set the ServiceName and DisplayName of that service according to whatever the user enters into an install dialog text box.

In testing this application it works fine for installation but when I try to uninstall the service I get an Error 1001\. Service does not exist.

![enter image description here](../Images/fde0132da235e861749e0045baba8d2e.png)

which is ultimately not true because I can run it. So my present thinking is that i need to somehow access the custom name of the service and feed that to the uninstaller. I would have thought this was all GUID based and that the name would become largely irrelevant re: uninstall but it would seem not to be the case.

So how to do I resolve this problem?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T06:43:30.307

我将假设您正在使用[`Installer`](http://msdn.microsoft.com/en-us/library/system.configuration.install.installer.aspx)派生类和[`ServiceInstaller`](http://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceinstaller.aspx)实例。

我在一个项目中做了类似的事情。服务名称存储在一个文本文件中（这只是一个选项，但对我来说它是为了自动部署目的）。您可以将其存储在任何地方（注册表等）。

因此，您应该将在安装阶段配置的自定义服务名称保留在某个地方。

所以，我有我的`Installer`课：

```
[RunInstaller(true)]
public partial class ProjectInstaller : System.Configuration.Install.Installer 
```

在它的构造函数中，我这样做：

```
_process = new ServiceProcessInstaller { Account = ServiceAccount.LocalSystem };
_service = new ServiceInstaller { ServiceName = ServiceNameReader.GetServiceName(), StartType = ServiceStartMode.Automatic };
Installers.Add(_process);
Installers.Add(_service); 
```

注意`ServiceNameReader.GetServiceName()`功能。此自定义函数从文件中获取服务名称。该类`Installer`也在卸载期间被实例化和调用。因此，如果您这样做，从某处动态加载实际服务名称，您将能够成功卸载它。

# c++ - Depth of inlining in GCC compiler

> ID：11175439
> 
> 赞同：8
> 
> 时间：2012-06-24T06:31:41.927
> 
> 标签：c++, optimization, gcc, inline-functions

I have studied that

> The inline specifier is a hint to the compiler that it should attempt to generate code [...] inline rather than laying down the code for the function once and then calling through the usual function call mechanism.

Questions:

1.  If optimization is turned off for the GCC compiler, is the inline specifier ignored?
2.  When inline functions are called recursively, which compiler option determines the 'depth of inlining', until it follows the normal function call mechanism ?
3.  If the inline function is invoked inside a for loop, does the same 'depth of inlining' come into the picture ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T06:51:07.767

> 如果 GCC 编译器的优化关闭，是否会忽略 inline 说明符？

是的，如果在 GCC 中关闭优化，则不会内联任何函数。相当于`-fno-inline`编译时使用flag。看到这个[链接](http://gcc.gnu.org/onlinedocs/gcc-4.4.7/gcc/Optimize-Options.html)

`-fno-inline`

`Don't pay attention to the inline keyword. Normally this option is used to keep the compiler from expanding any functions inline. Note that if you are not optimizing, no functions can be expanded inline.`

> 当递归调用内联函数时，哪个编译器选项确定“内联深度”，直到它遵循正常的函数调用机制？

选项`max-inline-recursive-depth`和`max-inline-recursive-depth-auto`。默认深度为 8。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T07:46:53.003

除了 -fno-inline，您还需要使用 -fno-default-inline 来禁用类中的内联函数。当您使用 gdb 单步执行这些内联函数时，这很有用。

# ruby-on-rails - 使用真实属性设置虚拟属性

> ID：11175441
> 
> 赞同：0
> 
> 时间：2012-06-24T06:31:59.573
> 
> 标签：ruby-on-rails, model

我有一个时间间隔内具有虚拟属性的模型：

```
attr_accessible :description, :time_end, :time_start, :duration
belongs_to :timesheet

def duration
  if attribute_present?("time_start") and attribute_present?("time_end")
    ChronicDuration.output(self.time_end - self.time_start) 
  else
    ChronicDuration.output(0)
  end
end

def duration=(d)
  self.time_end = self.time_start + d
end 
```

但是，在创建新对象时，Rails 会尝试在启动前设置持续时间，从而导致错误。如何确保在开始*后*设置持续时间？

错误：

```
undefined method `+' for nil:NilClass 
```

参数：

```
{"utf8"=>"✓",
 "authenticity_token"=>"dg+CysIxZORyV3cwvD+LdWckFdHgecGDFDBNOip+iKo=",
 "entry"=>{"time_start"=>"now",
 "duration"=>"2h",
 "description"=>""},
 "commit"=>"Create Entry"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:41:44.127

1.) 命名属性并不聪明，`end`因为那是关键字，可能会引起一些麻烦。

2.) 请发布您的参数哈希

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T18:33:18.213

一些东西

*   值得一读：`and`vs `&&`in ruby​​ - [http://devblog.avdi.org/2010/08/02/using-and-and-or-in-ruby/](http://devblog.avdi.org/2010/08/02/using-and-and-or-in-ruby/)
*   使用attribute_present的一些替代方法？方法

    ```
    # opposite of blank? - http://api.rubyonrails.org/classes/Object.html#method-i-present-3F
    if time_start.present? && time_end.present?

    # short hand syntax for present?
    if time_start? && time_end? 
    ```

我认为您的问题不在于在 time_start 之前设置了持续时间，假设 time_start 是日期时间或时间数据库类型，请在 rails 控制台中尝试此操作

```
entry = Entry.new
entry.time_start = "now" 
# => "now"
entry.time_start
# => nil 
```

您正在将字符串传递给时间对象，而 rails / ruby​​ 只是将值设置为 nil。如果 time_end 和 time_start 是字符串，我仍然认为您的代码不会给您想要的结果？

```
def duration=(d)
  self.time_end = self.time_start + d
end

# params: time_start = "now"
# params: duration = "2h"
# time_end would be: now2h 
```

如果我在设置 time_start 之前对 duration= 运行有误，另一种方法是使用 before_save 回调

```
class Entry < ActiveRecord::Base
  before_save :set_time_end

  attr_accessor :duration
  attr_accessible :description, :time_end, :time_start, :duration

  belongs_to :timesheet

  def duration
    if time_start? && time_end?
      ChronicDuration.output(self.time_end - self.time_start) 
    else
      ChronicDuration.output(0)
    end
  end

  def set_time_end
    return nil if time_start.blank?
    self.time_end = self.time_start + self.duration
  end
end 
```

# visual-studio - ClickOnce 应用程序的安装路径

> ID：11175442
> 
> 赞同：3
> 
> 时间：2012-06-24T06:32:13.610
> 
> 标签：visual-studio, clickonce

我有一个使用 Visual Studio 2008 开发并通过 ClickOnce 分发的应用程序。

**我的问题**：如果我以 John 身份登录客户端计算机（例如）并启动 setup.exe（通过 ClickOnce 提供）来安装应用程序，我注意到可执行文件的路径类似于：C:\Users\John \AppData\Local\Apps\2.0....\mysoftware.exe

现在，如果我以 Mike 身份登录，可执行文件的路径类似于：C:\Users\Mike\AppData\Local\Apps\2.0....\mysoftware.exe

似乎每个用户的每个可执行安装都有不同的副本。这有意义吗？在我开发 Visual Basic 6 应用程序之前，可执行文件位于 C:\Program Files\MySoftware\MySoftware.exe。每个用户都在运行相同的可执行文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T13:12:44.663

是的，ClickOnce 始终将应用程序安装到用户配置文件中的混淆文件夹中。这是出于安全原因。具有有限权限的用户无法写入“程序文件”文件夹，但他们可以写入他们的个人资料。

这是每个人最初都会被关闭的东西，因为它是不同的。但是，唯一真正令人担忧的原因是您的应用程序是否庞大并且您的用户连接速度非常慢。如果您*仍然*讨厌每个用户都安装它的想法，那么您将不得不使用其他东西；没有办法让 ClickOnce 表现不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:22:15.413

我同意“withwhatknott”关于单击一次、特权问题和安全问题的观点。

我想说，使用“Visual Studio 安装程序”内置安装程序。

从解决方案创建一个新的“Visual Studio 安装程序”项目。这比单击一次更灵活。

检查这个： [Visual Studio 2010 安装项目：如何设置默认安装位置中使用的公司名称？](https://stackoverflow.com/questions/13043618/visual-studio-2010-setup-project-how-to-give-company-name-used-in-default-inst)

希望能帮助到你。

# iphone - Can't hide numpad in iPhone Xcode4.3

> ID：11175444
> 
> 赞同：0
> 
> 时间：2012-06-24T06:32:37.643
> 
> 标签：iphone, ios5, xcode4.3

This is my code below. I can call my numpad but I can't hide it. How to hide it?

```
- (IBAction)loopBtn:(id)sender {
    loopBtn.keyboardType = UIKeyboardTypeNumberPad;
    [loopBtn becomeFirstResponder];
    [sender resignFirstResponder];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T12:07:10.107

`UIView`您可以通过使您的 an `UIControl`( `UIControl`is subclass of `UIView`)来隐藏键盘。然后编写一个`IBAction`在您触摸它时执行的方法`UIControl`（以前`UIView`）。打开界面编辑器并选择 main `UIView`。然后打开身份检查器并将其类更改为`UIControl`from `UIView`。现在在您的视图控制器中编写一个 IBAction 方法。

```
-(IBAction)hideKeyboard:(id)sender
{
    [self.view endEditing:YES];
} 
```

现在将您的 UIView 的 TouchUpInside 事件连接到此 IBAction 方法。每当您在文本字段之外触摸时，这将隐藏键盘。

# linux - Setting up a block level cache with DRBD on Linux

> ID：11175449
> 
> 赞同：0
> 
> 时间：2012-06-24T06:34:15.917
> 
> 标签：linux, caching, block-device, drbd

I want to setup a DRBD active/active configuration with two nodes. My application will be doing I/Os directly on the DRBD device. I haven't seen any option to enable caching within DRBD.

Is there any linux module that would allow me to setup a cache in between DRBD and the disk module? Any caching above DRBD module can lead to stale data being read by the nodes.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:06:10.533

DRBD 本身有[3 种协议类型](http://www.drbd.org/users-guide-emb/s-replication-protocols.html)，具有不同的保证。您可以尝试使用 B 甚至 A。但是，在本地写入成功之前，所有类型都会阻塞。至于显式缓存写入磁盘，[这个 SO question](https://stackoverflow.com/questions/2282276/write-through-ram-disk-or-massive-caching-of-file-system)可能会提供有关可以做什么的进一步指示。特别是 dannysauer 的回答看起来很有趣。

# visual-studio - Signing my solution with a digital certificate

> ID：11175450
> 
> 赞同：2
> 
> 时间：2012-06-24T06:34:24.513
> 
> 标签：visual-studio, clickonce, digital-certificate

I have an application developed with Visual Studio 2008 and distributed throught ClickOnce. This application is created especially for one client. The network administrator of this company allows me to install this application only with signed executable with a digital certificate. A policy rule will check for the signed certificate on my executable and block otherwise.

**My question**: do I need to have both setup.exe (ClickOnce) and mysoft.exe (the application installed by this ClickOnce package) signed with a digital certificate?

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T06:50:45.627

是的，您需要签署这两个文件，但这根本不是问题 - 只是构建脚本中的另一行。

请注意，您还需要在签名上加上时间戳。时间戳服务器地址在 signtool.exe 调用中指定为参数。代码签名证书 (CA) 的颁发者应提供其时间戳服务器的地址，但并非所有 CA 都有时间戳服务器。在任何情况下，您都可以使用 Verisign、Comodo 或 GlobalSign 等大型 CA 的时间戳服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T04:54:45.500

好文章如何在 ClickOnce 发布之前配置 VisualStudio 以签署应用程序：[http ://www.systenics.com/blog/sign-click-once-applications-with-godaddy-code-signing-certificate-and-visual-studio-2012 -通过互联网部署/](http://www.systenics.com/blog/sign-click-once-applications-with-godaddy-code-signing-certificate-and-visual-studio-2012-for-deployment-over-internet/)

> 首先，需要对 Visual Studio 生成的 setup.exe 引导文件进行签名，然后对应用程序和部署清单进行签名，最后对应用程序可执行文件进行数字签名。

# sql - SQL select multiple rows of data then compare

> ID：11175451
> 
> 赞同：0
> 
> 时间：2012-06-24T06:34:53.270
> 
> 标签：sql, sql-server-2008

What would be the best approach in SQL Server 2008 to select something that ***can contain 10 list of data***, then compare that data with a specific value in one of it's columns

So something like this below

```
SELECT bType FROM WORK_STATION WHERE nFileId = 123456789 
```

Which could return either 1 - 10 values MAX (will return at least one value). Then to compare the data from that SQL statement above that we just selected to a specific value to something like

```
if bType = 1
--DO something 
```

What is the best approach of doing something like this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:20:48.977

```
declare @table as table(btype int)
declare @btype int

insert into @table
SELECT bType FROM WORK_STATION WHERE nFileId = 123456789

while(exists(select top 1 'x' from @table)) --as long as @table contains records continue
begin
   select top 1 @btype = btype from @table

   if(@btype = 10)
     print 'something'

   delete top (1) from @table --remove the previously processed row. also ensures no infinite loop
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T06:59:00.570

我认为您可以使用 SP 声明变量，然后将其与结果集进行比较，如果您知道您只有 10 个值，您可以使用临时表并插入 10 个值。

我希望这是有帮助的。

# asp.net - how to use scope_identity in visual studio 2005?

> ID：11175452
> 
> 赞同：1
> 
> 时间：2012-06-24T06:35:06.953
> 
> 标签：asp.net, sql-server, scope-identity

Where to put the `SELECT SCOPE_IDENTITY()` statement if I want to get the last inserted identity, I put it inside other insert into query but I get nothing..

```
SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["myConnectionString"].ConnectionString);

connection.Open();

string insACmd = "insert into admin (userName, password) values (@userName, @password) SELECT SCOPE_IDENTITY();";
SqlCommand insertAdmin = new SqlCommand(insACmd, connection);

insertAdmin.Parameters.AddWithValue("@userName", TextBox1.Text);
insertAdmin.Parameters.AddWithValue("@password", TextBox2.Text);

string insertedID = insertAdmin.ExecuteScalar().ToString();

connection.Close(); 
```

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:17:58.320

试试这个`

> 选择用户 ID=SCOPE_IDENTITY()

也就是说，如果您使用 UserId 作为键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T10:42:05.753

```
using (SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["myConnectionString"].ConnectionString))
{
    connection.Open();
    string insACmd = "insert into admin (userName, password) values (@userName, @password); DECLARE @ID INT OUTPUT; SET @ID=SCOPE_IDENTITY()";
    using (SqlCommand insertAdmin = new SqlCommand(insACmd, connection))
    {
        insertAdmin.Parameters.AddWithValue("@userName", TextBox1.Text);
        insertAdmin.Parameters.AddWithValue("@password", TextBox2.Text);

        SqlParameter p = new SqlParameter();
        p.ParameterName = "@ID";
        p.Size = 4;
        p.Direction = ParameterDirection.Output;
        insertAdmin.Parameters.Add(p);
        insertAdmin.ExecuteNonQuery();
        int idOut = (int)p.Value;
        connection.Close();
    }
} 
```

# multithreading - Atomic reads and writes of properties

> ID：11175453
> 
> 赞同：4
> 
> 时间：2012-06-24T06:35:11.650
> 
> 标签：multithreading, c#-4.0, properties

This question has been asked before but i still don't understand it fully so here it goes.

If i have a class with a property (a non-nullable double or int) - can i read and write the property with multiple threads?

I have read somewhere that since doubles are 64 bytes, it is possible to read a double property on one thread while it is being written on a different one. This will result in the reading thread returning a value that is neither the original value nor the new written value.

When could this happen? Is it possible with ints as well? Does it happen with both 64 and 32 bit applications?

I haven't been able to replicate this situation in a console

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T06:43:36.187

> 如果我有一个具有属性（不可为空的 double 或 int）的类 - 我可以读取和写入具有多个线程的属性吗？

我假设您的意思是“没有任何同步”。

`double`并且`long`都是 64*位*（8 字节）的大小，并且*不能*保证以原子方式写入。因此，如果您从具有字节模式 ABCD EFGH 的值移动到具有字节模式 MNOP QRST 的值，您最终可能*会*看到（从不同的线程）ABCD QRST 或 MNOP EFGH。

使用正确对齐的大小为 32 位或更低的值，可以保证原子性。（我不记得看到任何保证值*将*正确对齐的保证，但我相信它们是默认的，除非您通过属性强制特定布局。）C# 4 规范甚至没有提到处理原子性的第 5.5 节中的对齐：

> 以下数据类型的读写是原子的：bool、char、byte、sbyte、short、ushort、uint、int、float 和引用类型。此外，上一个列表中具有基础类型的枚举类型的读取和写入也是原子的。其他类型的读取和写入，包括 long、ulong、double 和 decimal，以及用户定义的类型，不保证是原子的。除了为此目的设计的库函数之外，不能保证原子读-修改-写，例如在递增或递减的情况下。

此外，原子性与易变性不同——因此，如果不采取任何额外的措施，从一个线程读取可能不会“看到”来自不同线程的写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T06:47:51.630

这些操作不是原子的，这就是为什么[`Interlocked`](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.aspx)类首先存在的原因，具有类似`Increment(Int32)`和的方法`Increment(Int64)`。

为了确保线程安全，您应该至少使用这个类，如果不是更复杂的锁定（`ReaderWriterLockSlim`例如，如果您想要同步对属性组的访问）。

# licensing - GPL: Can I transfer copyright from a personal name to an organization?

> ID：11175456
> 
> 赞同：3
> 
> 时间：2012-06-24T06:35:52.953
> 
> 标签：licensing, gpl

I'm hoping to open source a personal project under a copyleft licence in the near future (for the sake of this question let's say it'll be the GPL). Unfortunately, I don't know anything about starting a non-profit organization for the purpose of holding the copyright for the project; as such, my tentative plan is to have the copyright notice state that I am the copyright holder. The problem with this approach is that if the project takes off and becomes a real community effort, I don't know if having the founder of the project as the sole copyright owner would work well, if at all. Is is possible to change the copyright holder from myself to a non-profit organization if this becomes necessary as time goes on?

**tl;dr:**

Can I go from

> Copyright (C) 2012 Dylan L. Knowles (me)

to

> Copyright (C) 2012 Some Non-Profit Organization

if I licence my project using the GPL?

*(PS: Mods, I noticed that a lot of licence-related questions have been closed for being off-topic. I've examined the FAQ and I feel that this question is one of the "practical, answerable problems that are unique to the programming profession"; hopefully you agree and this won't be closed!)*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T06:45:22.390

我不是律师，但如果我没记错的话，选择许可和分配版权在某种程度上是正交的决定。

只要代码是您的（即您拥有版权），您就应该能够将版权转让给第三方实体（即非营利组织）。这就是人们每天向 GCC 提交补丁时所做的事情：http: [//gcc.gnu.org/contribute.html#legal](http://gcc.gnu.org/contribute.html#legal)。

附带说明一下，只要您拥有版权，您就可以根据自由许可（即 GPL）自由发布源代码，同时，即使是非自由的，也可以在这个世界的任何其他许可下发布源代码：[http](http://www.gnu.org/licenses/gpl-faq.html#ReleaseUnderGPLAndNF) ://www.gnu.org/licenses/gpl-faq.html#ReleaseUnderGPLAndNF 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:08:54.990

> 如果随着时间的推移有必要，是否可以将版权所有者从我自己更改为非营利组织？

是的，这是可能的，但是，版权所有者必须清楚。这意味着当您的项目增长并且您开始接受补丁时，请记住版权也会“打补丁”。因此，以后要更改版权所有者，所有版权所有者都需要对此表示同意。

您可能对[**信托许可协议 (FLA)**](http://fsfe.org/projects/ftf/fla.en.html)感兴趣：

> **什么是 FLA？**
> 
> 信托许可协议 (FLA) 是一种版权转让，它允许一个实体通过合并版权（或专有使用权）来保护为项目创建的所有代码，以防止版权碎片化。

FSFE 为其使用甚至[​​信托计划](http://fsfe.org/projects/ftf/fiduciary.en.html)提供支持。而且我认为它解决了您的问题，但是您还不需要创建非营利组织，因此有关它的信息也可能对您有一般帮助。

# eclipse - eclipse wtp在运行时未解决传递依赖关系

> ID：11175472
> 
> 赞同：0
> 
> 时间：2012-06-24T06:39:47.170
> 
> 标签：eclipse, maven-3, eclipse-wtp, transitive-dependency

在 Eclipse 中运行动态 Web 项目时遇到问题。我创建了一个 Maven 项目（archtype - webapp），然后通过添加 maven-eclipse-plugin（2.9 版）在其中添加了 DWP 行为。我在 POM 文件中添加了我的项目依赖项，如下所示

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>au.com.fairfaxdigital</groupId>
    <artifactId>accessloganalyzer</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>accessloganalyzer Maven Webapp</name>
    <url>http://maven.apache.org</url>  
    <dependencies>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>3.0.1</version>
        </dependency>
        <dependency>
            <groupId>net.sourceforge.wurfl</groupId>
            <artifactId>wurfl</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi</artifactId>
            <version>3.8</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <repositories>
        <repository>
            <id>scientiamobile.public</id>
            <name>Scientia Mobile Public repository</name>
            <url>http://dev.scientiamobile.com/nexus/content/repositories/public-releases/</url>
        </repository>
    </repositories>
    <build>
        <finalName>accessloganalyzer</finalName>

        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <projectNameTemplate>accessloganalyzer-${project.version}</projectNameTemplate>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                    <wtpmanifest>true</wtpmanifest>
                    <wtpapplicationxml>true</wtpapplicationxml>
                    <wtpversion>2.0</wtpversion>
                    <manifest>${basedir}/src/main/resources/META-INF/MANIFEST.MF</manifest>
                </configuration>
            </plugin>

        </plugins>
    </build>
</project> 
```

然后我使用 maven 命令（全新安装）构建项目。我可以在目标文件夹中看到生成的战争文件。当尝试在eclipse中的tomcat上运行这个应用程序（项目->右键单击->运行一个服务器）时，tomcat启动时出错。

> 严重：向 net.sourceforge.wurfl.core.web.WURFLServletContextListener 类的侦听器实例发送上下文初始化事件的异常 java.lang.NoClassDefFoundError: org/apache/commons/lang/StringUtils at net.sourceforge.wurfl.core.web.WURFLServletContextListener .contextInitialized(WURFLServletContextListener.java:81) 在 org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4765) 在 org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5260) 在 org. apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) 在 org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:866) 在 org.apache.catalina.core.ContainerBase.addChild(ContainerBase. java:842) 在 org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615) 在 org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649) 在 org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1581) 在 java.util.concurrent.Executors $RunnableAdapter.call(Executors.java:441) at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) at java.util.concurrent.FutureTask.run(FutureTask.java:138) at java. util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662)引起：java.lang.ClassNotFoundException: org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1688) 中 org.apache.catalina.loader.WebappClassLoader 中的 org.apache.commons.lang.StringUtils。loadClass(WebappClassLoader.java:1533) ... 15 更多 开始 Introspector 初始化...

当我查看 tomcat 运行应用程序的 Eclipse 文件夹时（C:\Deepak\Study\Dev\Practicals\workspace.metadata.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\accessloganalyzer-1.0-SNAPSHOT )，我没有找到我在项目中使用的第三方库 wurfl.1.4.jar 的任何依赖项（包括错误中引用的 commons-lang）。

wurfl 库使用以下依赖项，这些依赖项在 WEB-INF/lib 中不存在，因此导致问题

*   commons-collections-3.2.1
*   commons-lang-2.6
*   杰克逊核心asl-1.8.2
*   杰克逊-映射器-asl-1.8.2
*   logback-经典-0.9.28
*   logback-core-0.9.28
*   slf4j-api-1.6.1

任何人都可以指出我错过了为什么这些传递依赖项没有被复制到应用程序 WAR 文件的 WEB-INF/lib 文件夹中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:42:48.020

安装[m2e wtp](http://www.eclipse.org/m2e-wtp/)插件。这个插件可以从 Eclipse Marketplace 安装（Help -> Eclipse Marketplace...）。这应该让你大部分时间都在那里。然后，您应该在您期望的地方看到您的依赖项。

# c - 指针数组

> ID：11175473
> 
> 赞同：1
> 
> 时间：2012-06-24T06:39:59.117
> 
> 标签：c

我正在试验指针数组地址计算算法。我对上面代码的输出感到困惑。谁能解释发生了什么？

```
void foo()
{
    int i=10,k=3,l=20,m=30;
    int *ary[2];
    ary[0]=&i;
    int b=20;
    ary[1]=&k;

    printf("%d\n",ary[0][1]);
} 
```

**输出为 3**

**第二个节目**

```
void foo()
{
    int i=10,k=3,l=20,m=30;
    int *ary[2];
    ary[0]=&i;
    int b=20;
    ary[1]=&b;

    printf("%d\n",ary[0][1]);
} 
```

**输出为 20。**

上述这些代码中的地址计算是如何完成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T06:52:13.160

在这两个代码示例中`ary[0]`都是一个指向单个整数的指针。因此，当您这样做时，`array[0][1]`您正在越界访问该指针。因此，您的两个代码示例的行为都是未定义的。

你得到你在特定编译器上看到的行为的原因可能是，所有你不使用地址的变量都存储在寄存器中而不是内存中（或者可能根本没有存储它们，因为你从不使用它们）。

所以在示例 1 中，内存中唯一的变量是 i 和 k。在示例 2 中，内存中唯一的变量是 i 和 b。因此，在示例 1`k`中是直接出现`i`在内存中的变量，而示例 2 中的变量是`b`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T06:52:03.413

你的论点是

```
int *ary[] 
```

在函数参数中，数组衰减为指针。所以你基本上有

```
int** ary 
```

然后将索引 0 处的指针（*可能是*一个有效索引）设置为单个变量的值。

```
ary[0]=&i; 
```

然后你的代码打印

```
ary[0][1] 
```

这基本上是

```
( &i )[1] 
```

触发*未定义的行为*，因此您得到的任何结果都是有效的结果。

# iphone - 在提高性能的获取请求模板下面发生了什么？

> ID：11175474
> 
> 赞同：19
> 
> 时间：2012-06-24T06:40:53.777
> 
> 标签：iphone, ios, cocoa-touch, cocoa, core-data

我很好奇创建 Fetch 请求模板与以编程方式创建 NSFetchRequest 相比是否会带来性能提升，因此我编写了一些测试来衡量这一点。[这是 github 上的源代码](https://github.com/jinyk/CoreDataFetchTests)。

Simulator 和 iPhone 上的差异顺序相同（测量时间间隔以进行一堆获取）：

```
just creating an NSFetchRequest:          4.399674
creating a Fetch Request Template:        0.501369
NSFetchRequest with field indexed:        0.407068
Fetch Request Template and field indexed: 0.281876 
```

事实证明，创建 Fetch Request Template 大约有 7~9 倍的性能提升。我想也许它在下面创建了正确的索引，但是当我创建一个与索引字段匹配的获取请求模板时，甚至还有进一步的性能优势。

好的，很高兴知道是这种情况，但我非常想知道在 Fetch Request Template 下到底发生了什么导致性能提升？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T12:38:51.367

## 更新

在使用 Instruments 进行一些分析之后，事实证明`[NSPredicate predicateWithFormat:]`这不是罪魁祸首！

性能差异的实际原因是**排序描述符**。

非模板测试使用`NSFetchedResultsController`，它需要一个排序描述符，而基于模板的测试不指定排序描述符。

如果您向所有测试添加排序描述符，则性能会变得均衡（索引案例除外。）

* * *

## 原始（错误）答案

性能损失是因为您`[NSPredicate predicateWithFormat:]`为循环的每次迭代调用“只是创建一个 NSFetchRequest”测试 - 这*非常慢*！

想想看 -`[NSPredicate predicateWithFormat:]`必须解析字符串并将其编译成 Core Data 使用的内部表示。

通常的解决方案是只调用`[NSPredicate predicateWithFormat:]`一次，然后用于`[NSPredicate predicateWithSubstitutionVariables:]`指定将由谓词比较的值 - 这在[核心数据文档中有所介绍 - 高效导入数据](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html#//apple_ref/doc/uid/TP40003174-SW3)

> 要从格式化字符串创建谓词，框架必须解析字符串并创建谓词和表达式对象的实例。如果您多次使用相同形式的谓词，但每次使用时更改其中一个常量值表达式的值，则创建一次谓词然后使用变量替换会更有效（请参阅“创建谓词”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T06:50:01.193

从[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html)中：

> 存储的提取请求可以包含用于变量替换的占位符，因此可以用作稍后完成的模板。因此，获取请求模板允许您使用在运行时替换的变量来预定义查询。

[此外，请参阅NSManagedObjectModel 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectModel_Class/Reference/Reference.html)的存储获取请求部分。

似乎最大的优势可能来自查询不必在运行时构建的事实——它是预先构建的，然后在适当的时候将变量替换到查询中。

# algorithm - introsort 何时从快速排序转变为堆排序？

> ID：11175478
> 
> 赞同：7
> 
> 时间：2012-06-24T06:41:40.053
> 
> 标签：algorithm, sorting, introsort

[Introsort](http://en.wikipedia.org/wiki/Introsort)从快速排序开始，当递归深度超过基于被排序元素数量的级别时，切换到堆排序。那个号码是多少？是否有特定范围或限制值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T07:13:44.750

[Introsort算法](http://www.cs.rpi.edu/~musser/gp/introsort.ps)从 Quicksort 切换到 Heapsort 的点由*depth_limit*确定：

> *depth_limit* = 2 · ⎣log [2] ( *l* )⎦</p>

其中*l*是要排序的序列的长度，所以*l* ‍=‍<em>n 代表整个序列。每次递归调用*depth_limit*减一。当*depth_limit*达到 0 时，它会从 Quicksort 切换到 Heapsort。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T07:16:25.620

我刚刚尝试阅读介绍性的[Wikipedia 文章](http://en.wikipedia.org/wiki/Introsort)。它说

> 它计算递归深度。如果超过对数深度，算法会从 Quicksort 切换到 Heapsort，以保持 Quicksort 的最坏情况结果下降

并通过 Musser 关于 Introsort 的原始论文。

> 它说 introsort 比 heapsort 慢，因为它在切换到 heapsort 之前执行 2*log(2,N) 计算。

我的理解是递归深度是 2*log(2,N)

> 对于要排序的 N=300 个元素，它将是 2*8 = 16

# c# - 列表的选定索引

> ID：11175479
> 
> 赞同：-3
> 
> 时间：2012-06-24T06:41:41.030
> 
> 标签：c#, silverlight, windows-phone-7

```
List<int> megalist;
int boxId;
boxId = ListofUniqueIDSpecificToDate.IndexOf(lstbox.SelectedIndex);<< this is wrong 
```

我正在尝试通过使用 lstbox 上的选定索引在 megalist 中显示 ID

意思是，如果选择lstbox上的第一项，它将加载megalist上的第一项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T08:32:44.307

我假设您想从您的集合中检索第`i`^(th)项，其中对应于您的.`ListofUniqueIDSpecificToDate``i``lstbox`

在这种情况下，您需要使用列表索引器，`[i]`（前提是`ListofUniqueIDSpecificToDate`'s 类型实现了`IList<T>`接口）。

```
boxId = ListofUniqueIDSpecificToDate[lstbox.SelectedIndex]; 
```

`IndexOf(obj)`另一方面，将检索值等于 的集合中第一个元素的索引`obj`。

# linux - 如何重命名具有特定模式的一堆文件

> ID：11175482
> 
> 赞同：0
> 
> 时间：2012-06-24T06:42:13.673
> 
> 标签：linux

我想重命名以这种模式命名的目录中的文件：

```
string1-number.html 
```

例如：

```
English-5.html 
```

我想要做的是像这样重命名文件：

```
string2-number.string3 
```

例如：

```
Dictionary-5.en 
```

我怎样才能做到这一点？我使用了这个脚本，但什么也没发生：

```
echo "English-5.html" | sed   's%\({English}\).\(\.*\)\(html\)%dictionary\2\en%' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:54:01.003

我建议使用 mmv 工具：[http ://linux.dsplabs.com.au/mmv-copy-append-link-move-multiple-files-under-linux-shell-bash-by-wildcard-patterns-p5/](http://linux.dsplabs.com.au/mmv-copy-append-link-move-multiple-files-under-linux-shell-bash-by-wildcard-patterns-p5/)

有了它，你可以这样做：

```
mmv *-*.html Dictionary-#2.en 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T07:00:53.190

```
echo "English-5.html" | sed 's%English\(-[0-9][0-9]*.\)html%dictionary\1en%' 
```

解释：

我在找`English`

后跟一个破折号、一个或多个数字和一个点`-[0-9][0-9]*.`（我用转义括号括住这部分以使其成为一个组（组 1））。

其次是`html`

在替换文本中，我使用`\1`输出组 1 的内容，以及更改后的文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T09:50:28.887

您有 2 个错误：`{...}`不是必需的，您感到困惑`\.`和`.`

`\.`匹配文字点，而`.`匹配单个字符。

```
echo "English-5.html" |
sed 's%\(English\)\(.*\)\.\(html\)%dictionary\2.en%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T10:06:05.670

这个答案显示了对`sed`已经发布的命令的一些小的优化，并显示了如何实际重命名文件（在当前文件夹中）：

```
 for f in *; do mv "$f" $(echo "$f" |\
 sed 's/^English-\([0-9]\+\)\.html$/dictionary-\1\.en/'); done 
```

# android - 如何在 Android 上使用 Facebook 对话框发送好友请求？

> ID：11175483
> 
> 赞同：3
> 
> 时间：2012-06-24T06:42:47.743
> 
> 标签：android, facebook, request, facebook-android-sdk, friend

我想使用 Facebook Android SDK 发送好友请求。我目前正在使用这段代码（我从[这里](https://stackoverflow.com/questions/5372456/facebook-friends-dialog-returns-unknown-method-error)得到的）：

```
Bundle parameters = new Bundle();
parameters.putString("APP_ID","USERNAME");
facebook.dialog(this, "friends", parameters, this); 
```

其中 APP_ID 是我的应用程序的 Facebook ID，而 USERNAME 是我要添加的朋友的用户名。这会导致以下错误：

```
API Error Code:100
Invalid parameter
The parameter id is required 
```

我认为 id 参数意味着 APP_ID。

我已经在[http://developers.facebook.com/docs/reference/dialogs/friends/](http://developers.facebook.com/docs/reference/dialogs/friends/)和[http://developers.facebook.com/docs/reference/androidsdk/dialog/](http://developers.facebook.com/docs/reference/androidsdk/dialog/)浏览了有关对话框的相关文档，但仍然想不通。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T07:16:32.690

应该是这样的：

```
Bundle parameters = new Bundle();
parameters.putString("id", USER_ID);
facebook.dialog(this, "friends", parameters, this); 
```

如果这`this`是一个也实现的活动`DialogListener`。

正如文档中所说：

> **app_id** - 您的应用程序的标识符。必需，但大多数 SDK 会自动指定。
> **id** - 必需。要添加为好友的目标用户的 ID 或用户名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:47:31.240

您可以使用：

```
WebDialog.RequestsDialogBuilder requestBuilder = (new WebDialog.RequestsDialogBuilder(this,
                Session.getActiveSession(), params)).setOnCompleteListener(
                new OnCompleteListener() {

                    @Override
                    public void onComplete(Bundle values,
                            FacebookException error) {
                        if (error != null) {

                        } else {
                            final String requestId = values
                                    .getString("request");
                            if (requestId != null) {
                                //if the user completed the action,
                            } else {

                            }
                        }
                    }

                });
        WebDialog requests = requestBuilder.build();
        requests.show(); 
```

如果您想将请求设置为预先选择的朋友，只需将以下内容添加到 requestBuilder：

`requestBuilder.setTo("FRIEND_ID, ANOTHER_FRIEND_ID")`, 在构建对话框之前。

奇怪的是，它接受朋友列表作为连接的 id 列表，而不是数组或列表。我在文档中没有找到，但发现它有效

# ios - RestKit 多对多映射，怎么做？

> ID：11175485
> 
> 赞同：5
> 
> 时间：2012-06-24T06:43:23.423
> 
> 标签：ios, core-data, many-to-many, restkit

我正在开发我的第一个 RestKit 应用程序，我使用 CoreData 进行本地缓存。在其中，我在 Post <<--->> 类别之间建立了多对多的关系。这种关系称为帖子和类别。

在我的 Post JSON 调用中，我得到了如下类别的 id：`{"post": [...] "categories":[1,4] [...]`，其中 1 和 4 是 id。

我有一个`Post`继承自的自定义模型对象，`NSManagedObject`其中我有一个类别属性，如下所示：

```
@interface Post : NSManagedObject

[...]
@property (nonatomic, retain) NSSet *categories;
[...] 
```

我在自定义类别模型对象中做同样的事情。

我的映射目前看起来像这样：

```
RKManagedObjectMapping *categoryMapping = [RKManagedObjectMapping mappingForClass:[Category class] inManagedObjectStore:objectManager.objectStore];
categoryMapping.primaryKeyAttribute = @"categoryId";
categoryMapping.rootKeyPath = @"categories";
[categoryMapping mapKeyPath:@"id" toAttribute:@"categoryId"];
[categoryMapping mapKeyPath:@"name" toAttribute:@"name"];
[...]

RKManagedObjectMapping* postMapping = [RKManagedObjectMapping mappingForClass:[Post class] inManagedObjectStore:objectManager.objectStore];

postMapping.primaryKeyAttribute = @"postId";
postMapping.rootKeyPath = @"post";
[postMapping mapKeyPath:@"id" toAttribute:@"postId"];
[...]
[postMapping mapKeyPath:@"created_at" toAttribute:@"createdAt"];
[...]
// Categories many-to-many.
[postMapping mapKeyPath:@"categories" toRelationship:@"categories"  withMapping:categoryMapping]; 
```

当我运行它时，我得到了错误：`'[<__NSCFNumber 0x6c625e0> valueForUndefinedKey:]: this class is not key value coding-compliant for the key id.'`

如果有人能给我任何关于如何绘制这种关系的线索，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T07:50:46.850

出现错误是因为您的 JSON 将每个类别作为主键返回，即：一个 NSNumber。但是您的映射需要一个嵌套对象（将转换为 KVC 对象）。当您的地图尝试访问 KVC 对象（实际上是一个 NSNumber）上的属性“id”时，它会像这样崩溃。

我不确定它是否会起作用，但你可以尝试这样的事情：

```
RKManagedObjectMapping* categoryMapping = //something
categoryMapping.primaryKeyAttribute = @"categoryId";
[categoryMapping mapKeyPath: @"" toAttribute: @"categoryId"];

[..]

[postMapping mapKeyPath: @"categories" toRelationship: @"categories" withMapping: categoryMapping]; 
```

通常，您会使用 [RKManagedObjectMapping connectRelationship:withObjectForPrimaryKeyAttribute:] 方法，但我不知道这是否适用于多对多关系。您可能必须修改源代码才能执行此操作。要查看的代码在 [RKManagedObjectMappingOperation connectRelationship:] 内。

否则，如果可能的话，我建议您更改 JSON 源，使类别数组如下所示：“categories”：[{“categoryID：1}，{“categoryID”：4}]。如果无法更改源，您可以使用委托方法或我在下面给出的 RKObjectLoader 扩展手动修改数据：

。H

```
typedef void(^RKObjectLoaderWillMapDataBlock)(id* mappableData);

@interface RKObjectLoader (Extended)

@property (nonatomic, copy) RKObjectLoaderWillMapDataBlock onWillMapData;

@end 
```

.m

```
#import "RKObjectLoader+Extended.h"

#import <objc/runtime.h>

NSString* kOnWillMapDataKey = @"onWillMapData";

@implementation RKObjectLoader (Extended)

- (RKObjectLoaderWillMapDataBlock) onWillMapData {
    return objc_getAssociatedObject(self, &kOnWillMapDataKey);
}

- (void) setOnWillMapData:(RKObjectLoaderWillMapDataBlock) block {
    objc_setAssociatedObject(self, &kOnWillMapDataKey, block, OBJC_ASSOCIATION_COPY);
}

- (RKObjectMappingResult*)mapResponseWithMappingProvider:(RKObjectMappingProvider*)mappingProvider toObject:(id)targetObject inContext:(RKObjectMappingProviderContext)context error:(NSError**)error {
    id<RKParser> parser = [[RKParserRegistry sharedRegistry] parserForMIMEType:self.response.MIMEType];
    NSAssert1(parser, @"Cannot perform object load without a parser for MIME Type '%@'", self.response.MIMEType);

    // Check that there is actually content in the response body for mapping. It is possible to get back a 200 response
    // with the appropriate MIME Type with no content (such as for a successful PUT or DELETE). Make sure we don't generate an error
    // in these cases
    id bodyAsString = [self.response bodyAsString];
    RKLogTrace(@"bodyAsString: %@", bodyAsString);
    if (bodyAsString == nil || [[bodyAsString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]] length] == 0) {
        RKLogDebug(@"Mapping attempted on empty response body...");
        if (self.targetObject) {
            return [RKObjectMappingResult mappingResultWithDictionary:[NSDictionary dictionaryWithObject:self.targetObject forKey:@""]];
        }

        return [RKObjectMappingResult mappingResultWithDictionary:[NSDictionary dictionary]];
    }

    id parsedData = [parser objectFromString:bodyAsString error:error];
    if (parsedData == nil && error) {
        return nil;
    }

    // Allow the delegate to manipulate the data
    if ([self.delegate respondsToSelector:@selector(objectLoader:willMapData:)]) {
        parsedData = AH_AUTORELEASE([parsedData mutableCopy]);
        [(NSObject<RKObjectLoaderDelegate>*)self.delegate objectLoader:self willMapData:&parsedData];
    }

    if( self.onWillMapData ) {
        parsedData = AH_AUTORELEASE([parsedData mutableCopy]);
        self.onWillMapData(&parsedData);
    }

    RKObjectMapper* mapper = [RKObjectMapper mapperWithObject:parsedData mappingProvider:mappingProvider];
    mapper.targetObject = targetObject;
    mapper.delegate = (id<RKObjectMapperDelegate>)self;
    mapper.context = context;
    RKObjectMappingResult* result = [mapper performMapping];

    // Log any mapping errors
    if (mapper.errorCount > 0) {
        RKLogError(@"Encountered errors during mapping: %@", [[mapper.errors valueForKey:@"localizedDescription"] componentsJoinedByString:@", "]);
    }

    // The object mapper will return a nil result if mapping failed
    if (nil == result) {
        // TODO: Construct a composite error that wraps up all the other errors. Should probably make it performMapping:&error when we have this?
        if (error) *error = [mapper.errors lastObject];
        return nil;
    }

    return result;
}

@end 
```

# iphone - iOS应用程序强制退出问题

> ID：11175488
> 
> 赞同：0
> 
> 时间：2012-06-24T06:44:13.207
> 
> 标签：iphone, ios, xcode

我正在制作的第一个 iPhone 应用程序遇到问题（对不起，我是菜鸟）。每次启动应用程序并单击一个选项卡时，都会出现此错误。

```
#import UIKit/UIKit.h
#import "AppDelegate.h"
int main(int argc, char *argv[]) {
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

从 return 开始并以 class 结束的行])); 以绿色突出显示，并显示线程 1：信号 SIGABRT。

我完全不知道这意味着什么，所以如果你能提供帮助，那就太好了。请尽可能具体。我正在使用最新的 xcode。

谢谢，威尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:29:20.943

在您点击导致错误的“一个选项卡”时运行的方法的开头放置一个断点。然后单步执行，直到找到导致应用程序失败的代码行。前一行代码将包含您的违规问题。

# javascript - iOS Phonegap 媒体对象 - 如何访问 WWW 文件夹中的资源？

> ID：11175489
> 
> 赞同：6
> 
> 时间：2012-06-24T06:44:24.270
> 
> 标签：javascript, ios, xcode, cordova

我正在开发一个带有phonegap的应用程序，我有一个我想播放的声音文件，它位于像www/Sounds/sound.mp3这样的路径中，我正在尝试使用Phonegap的Media对象访问这个文件为了玩它。

我无法弄清楚在使用 Media 对象的 javascript 文件中访问此声音文件的路径？我已经尝试过诸如 file:///www/Sounds/sound.mp3、相对路径等路径，但我无法访问它。我在 xcode 4 中不断收到以下错误

```
Will attempt to use file resource 'file:///www/Sounds/sound.mp3'
Unknown resource 'file:///www/Sounds/sound.mp3' 
```

我需要使用什么路径来访问该文件？或者我是否需要将声音文件从我的 www 目录复制到我的 Resources 文件夹并在那里访问它？

引用了我的 WWW 文件夹，不确定这是否有所作为。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-14T23:04:29.697

这是 getPhoneGapPath 的修改版本，适用于我在 iOS 和 Android 上。它也不限于仅处理文件名长度为 10 个字符的文件:)

```
getPhoneGapPath: function () {
    'use strict';
    var path = window.location.pathname;
    var phoneGapPath = path.substring(0, path.lastIndexOf('/') + 1);
    return phoneGapPath;
}

var resource = getPhoneGapPath() + 'audio/audio.mp3'; 
```

getPhoneGapPath() 将返回：

**iOS：** /var/mobile/Applications/{GUID}/{appName}/www/

**安卓：** /android_asset/www/

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-24T07:24:36.917

用于`window.location.pathname`获取应用程序的路径。它在 iPhone 上看起来像这样：

> /var/mobile/Applications/{GUID}/{appname}.app/www/index.html

这在Android上：

> /android_asset/www/index.html

去掉`/index.html`、 prepend`file://`和 append 你的相对路径`Sounds/sound.mp3`。

这里有一些东西可以帮助你开始：

演示：http: [//jsfiddle.net/ThinkingStiff/chNVY/](http://jsfiddle.net/ThinkingStiff/chNVY/)

代码：

```
function getPhoneGapPath() {

    var path = window.location.pathname;
    path = path.substr( 0, path.length - 10 );
    return 'file://' + path;

};

var resource = getPhoneGapPath() + 'Sounds/sound.mps'; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-09T01:47:50.280

[最佳答案](https://stackoverflow.com/questions/11175489/ios-phonegap-media-object-how-do-i-access-a-resource-in-the-www-folder/24761627#24761627)已过时。您现在可以使用这种“相对路径”方法在 iOS 上播放`wav`、`mp3`和格式：`caf`

```
var media = new Media('beep.wav', ...); 
```

请注意，上面的代码要求声音文件位于您`www/`目录的根目录中——在此示例中位于`www/beep.wav`. 如果你想把它们放在一个类似的子目录中`www/sounds/`，你需要使用相对于你的`www/`目录的路径来指定它。例如，这现在也有效：

```
var media = new Media('sounds/beep.wav', ...); 
```

对于`www/sounds/beep.wav`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-15T15:02:41.017

从 Cordova 3.3+ 开始，其他 2 个答案不正确。即使您只是将文件名传递给它，它也应该可以工作。

但是，**它只有在文件扩展名为`.wav`**.

这将起作用：

```
var media = new Media('recording.wav', ...); 
```

这不会：

```
var media = new Media('recording.mp3', ...); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-16T08:10:57.960

**我遇到了同样的问题，使用Phone Gap Developer 应用程序**，仅关于文件路径的所有答案都对我不起作用。问题在于开发者应用程序没有将文件物理地推送到设备上，从而阻止我以任何方式访问它们。

媒体插件按预期工作

> $ phonegap 运行安卓
> 
> $ phonegap 运行 ios

使用此 js 代码：

```
function getPhoneGapPath() {
  var path = window.location.pathname;
  var phoneGapPath = path.substring(0, path.lastIndexOf('/') + 1);
   return phoneGapPath;
}
var sound = new Media(getPhoneGapPath()+"assets/sounds/sound.mp3"
//...
sound.play();
```

这会在开发者应用程序上返回错误：

*'不能使用来自源 var/mobile/Containers/data/Application/{GUID}/Library/NoCloud/ **phonegapdevapp** /www/assets/sounds/sound.mp3 的音频文件'*

但如果从控制台构建，则可以使用。

详细信息可以在这里找到： [https ://forums.adobe.com/thread/2135718](https://forums.adobe.com/thread/2135718)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-08T12:37:05.853

最好尝试这样做，以考虑任何可能在历史条目中添加目录（“/”）的 HTML5 History API 代码：

```
function get_phonegap_path () {
 var path = window.location.pathname
 return path.slice(0, path.indexOf("/www/") + 5)
} 
```

# ruby-on-rails-3 - 使用 Heroku 访问和部署问题

> ID：11175492
> 
> 赞同：1
> 
> 时间：2012-06-24T06:44:43.807
> 
> 标签：ruby-on-rails-3, git, heroku, ssh, ssh-keys

在过去的几个月里，我一直在正常使用 Heroku。一开始，我创建了一个 ssh 密钥，将其添加到我的 Heroku 帐户中，我可以毫无问题地部署我的应用程序。直到今天。我正在做一个新项目，我需要在不同的电子邮件地址下创建一个新的 Heroku 帐户。过了一会儿，我意识到我无法使用新的电子邮件地址部署这个应用程序，因为我的 SSH 密钥与不同的电子邮件相关联。然后我创建了一个新的 SSH 密钥并将其添加到我的新 Heroku 帐户中。它没有用！:)

好吧，我从我的计算机和我的新 Heroku 帐户中删除了密钥。然后我决定回到我原来的 Heroku 帐户。一切正常，好吧，或多或少。我仍然可以部署我的旧应用程序，我可以看到那里只有一个 SSH 密钥，我可以运行命令：`heroku info`、、`heroku apps`等。

所以我尝试部署我的新应用程序，但在我创建一个新的 Heroku 应用程序之前使用：`heroku create`. 新应用程序已成功创建。但是当我尝试时：`git push heroku`我收到此错误：

> ！您的带有指纹 b2:69:3b:90:1e:e1:60:ad:a0:b9:f7: **:** :* *:* * 的密钥无权访问 furious-leaf-9996。

如果我尝试: `heroku info`，我会收到此错误：

> ！您无权访问 furious-leaf-9996。

有趣的是，如果我切换到另一个应用程序的目录并尝试做同样的事情（例如：`heroku info`，`git push heroku`），一切都会完美无缺。

注意 1：当我尝试`heroku logout`then`heroku login`时，我总是能够在两个应用程序的目录中连接

注意 2：我使用的是 RVM，两个应用程序都使用不同的 gemset。

我不知道还能做什么！！任何人？？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T06:21:55.943

在几乎疯了之后，我发现了发生了什么。

当我第一次尝试登录我的第二个 Heroku 帐户时，我的 .git 配置文件已更新为以下信息：

```
[remote "heroku"]
url = git@heroku.com:furious-leaf-9996.git
fetch = +refs/heads/*:refs/remotes/heroku/* 
```

这就是问题所在。即使在不同的 Heroku 帐户中注销并再次登录，每次我尝试将文件推送到那里时，我都做不到，因为我无权访问此存储库。它变得更糟，因为我删除了这个存储库。:)

现在一切正常。

因此，下次您在 Heroku 上遇到访问问题时，请查看您的 git 配置文件！

谢谢！

# c# - 如何限制 IQueryable 方法过滤的查询？

> ID：11175497
> 
> 赞同：1
> 
> 时间：2012-06-24T06:45:15.163
> 
> 标签：c#, asp.net, filter, where, iqueryable

是否可以在 C# 中公开 IQueryable 的方法上仅允许某些属性可过滤。

或者，我是否能够监视 where 子句并只允许通过过滤某些属性的子句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:52:05.607

`IQueryable`公开[`Provider`](http://msdn.microsoft.com/en-us/library/system.linq.iqueryable.provider.aspx)属性，其类型为[`IQueryProvider`](http://msdn.microsoft.com/en-us/library/system.linq.iqueryprovider.aspx). 该查询提供程序负责最终对查询进行操作并返回适当的结果（尽管通常大部分必要的工作都委托给了帮助类，但协调流程的是查询提供程序）。

因此，对这个问题的简短回答是：要在查询过程中插入自定义逻辑，您需要控制`IQueryable.Provider`实现并让它返回最终实现此逻辑的查询提供程序。

如果您打算构建自定义查询提供程序，请查看此[MSDN 演练](http://msdn.microsoft.com/en-us/library/bb546158.aspx)以及[Matt Warren 撰写的精彩系列博客文章以](http://blogs.msdn.com/b/mattwar/archive/2008/11/18/linq-links.aspx)获取更多信息。

# iis - Coldfusion，IIS PCI扫描ServletExec漏洞？

> ID：11175499
> 
> 赞同：1
> 
> 时间：2012-06-24T06:45:22.067
> 
> 标签：iis, coldfusion, pci-compliance

我有一个带有 IIS 的 Coldfusion 9.0.2 的 64 位服务器，我们最新的 PCI 合规性服务器扫描返回以下错误为“紧急”

**统一 eWave ServletExec 3.0C UploadServlet 非特权文件上传**

*   这是Coldfusion的一部分吗？或 II。
*   删除它是否安全？
*   我该如何删除它？

# sparql - 如何编写这个 SPARQL 请求？

> ID：11175501
> 
> 赞同：1
> 
> 时间：2012-06-24T06:45:44.780
> 
> 标签：sparql, jena, ontology

我在 Protege 4 中构建了以下本体。

![在此处输入图像描述](../Images/edb81fa9c0800ca400fc6b5b857171a5.png)

在这个本体中：主类`Frame`有一个 datatypeProperty`hasDuration`域 'Frame' 和 range `UnsignedShort`。类`ShortFrame`，并从具有以下限制`LongFrame`的类中推断出来`SizedFrame`

ShortFrame 类的限制

```
SizedFrame that hasDuration some unsignedLong[<=20] 
```

LongFrame 类的限制

```
SizedFrame that hasDuration some unsignedLong[>=200] 
```

我手动创建了一个`frame`名为的类的实例`frame0`，它的属性`hasDuration`设置为`12`。

我需要获取全部的 SPARQL 查询是什么`shortFrame`。我希望这`frame0`会被推断为`shortFrame`?

感谢您的回复！

**版本：示例查询**

```
PREFIX frame: <http://www.semantic.org/sample.owl#>
SELECT ?y WHERE {?y rdf:type frame:Frame} 
```

但它不工作！也许这是不正确的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:29:26.207

我相信，您将使用 SPARQL 语言编写一些关于 OWL 限制信息的查询。SPARQL 是一种 RDF 查询语言，不了解 OWL 的概念。您可以使用数据属性来定义持续时间值，而不是进行限制，然后您可以使用 SPARQL 获取所有短帧。我推荐的其他选项是使用 SWRL 规则而不是 SPARQL。希望这可以帮助 ！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:29:13.210

您给出的查询要求提供 type 的所有实例`frame:Frame`。因为你只想要短帧，你应该像这样调整它：

```
SELECT ?y WHERE {?y a frame:ShortFrame} 
```

...但是只有在推理者理解您的限制并且可以正确分类`frame0`为`ShortFrame`. 我不太熟悉 Protege 的 owl 限制语法，所以我不能 100% 确定您的限制表达了您想要表达的内容。

作为替代方案，您实际上可以在 SPARQL 中表达您需要的限制。查询所有持续时间小于 20 的帧：

```
SELECT ?y 
WHERE {
   ?y a frame:Frame; 
      frame:hasDuration ?d . 
   FILTER (?d <= 20) 
} 
```

# msbuild - MSBuild.Community.Tasks 解压任务使控制台输出膨胀

> ID：11175504
> 
> 赞同：1
> 
> 时间：2012-06-24T06:46:23.993
> 
> 标签：msbuild, msbuildcommunitytasks

我使用以下代码通过 MSBuild Community Task 解压缩存档`Unzip`：

```
<Target Name="Sandbox">
    <Unzip 
        ZipFileName="text.zip" 
        TargetDirectory="Unzip" />
</Target> 
```

`text.zip`包含一个文件 text.txt，其大小为 716 字节。

我在文件提取过程中在控制台上获得了几行：

```
...
extracted "text.txt"
extracted "text.txt"
extracted "text.txt"
... 
```

716 字节的小文件 3 次！

对于大文件，`Unzip`任务会用更多的行填充控制台：更大的文件 - 更多的行。

我在 MSBuild 社区任务 1.2.0.306 中每个文件有 1 行，但版本 1.3.0.493 和 1.4.0.42 为单个文件输出更多行。

是否可以在新版本的 MSBuild 社区任务中为每个文件获取一行？

我不知道这种行为是新设计还是错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T14:11:42.600

这是一个错误。我将它报告给上游（[https://github.com/loresoft/msbuildtasks/pull/26](https://github.com/loresoft/msbuildtasks/pull/26)）修复它并在 9 天前合并。应该在下一个版本中更正。

# gcc - 为什么 gcc 在创建汇编代码时会这样做？

> ID：11175505
> 
> 赞同：8
> 
> 时间：2012-06-24T06:46:50.420
> 
> 标签：gcc, assembly

我正在玩弄`gcc -S`以了解内存和堆栈的工作原理。在这些戏剧中，我发现了一些我不清楚的事情。你能帮我理解原因吗？

1.  当调用函数为被调用的函数设置参数时，它`mov`会`esp`改为使用`push`. 不使用有什么好处`push`？

2.  使用位于堆栈的参数的函数将它们指向为`ebp + (N + offset)`（其中 N 是为返回地址保留的大小）。我希望看看`esp - offset`哪个更容易理解。`ebp`无处不在的作为基点的理由是什么？我知道这些是平等的，但无论如何？

3.  这个魔法在开头有什么用`main`？为什么`esp`必须以这种方式初始化？

    ```
    and    esp,0xfffffff0 
    ```

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T07:24:51.010

我假设您在 32 位环境下工作，因为在 64 位环境中，参数是在寄存器中传递的。

问题 1

也许您在这里传递了一个浮点参数。您不能直接推送这些，因为`push`32 位运行时中的指令一次推送 4 个字节，因此您必须分解该值。有时更容易从中减去 8，`esp`然后将 8 字节四字移动到`[esp]`.

问题2

`ebp`经常用于索引 32 位代码中堆栈帧中的参数和局部变量。即使堆栈指针移动，这也允许固定帧内的偏移量。例如考虑

```
void f(int x) {
    int a;
    g(x, 5);
} 
```

现在，如果您只使用`esp`, then `a`is at访问堆栈帧内容，则`[esp]`返回地址将是 at`[esp+4]`并且`x`将是 at `[esp+8]`。现在让我们生成代码来调用`g`. 我们必须先 push 5 然后 push `x`。但是推 5 之后，`x`from的偏移量发生了`esp`变化！这就是`ebp`使用的原因。通常在进入函数时，我们推送旧值`ebp`来保存它，然后复制`esp`到`ebp`. 现在`ebp`可用于访问堆栈帧内容。当我们在传递参数时它不会移动。

问题 3

该`and`指令将 的最后 4 位清零`esp`，使其与 16 字节边界对齐。由于堆栈向下增长，这是好的和安全的。

# objective-c - 如何确定 NSArray 中每个 NSDictionary 对象中的对象数量

> ID：11175507
> 
> 赞同：0
> 
> 时间：2012-06-24T06:47:13.840
> 
> 标签：objective-c

可能有一个直截了当的答案，但我找不到。

我有一个 NSArray，里面装满了 NSDictionary 对象。每个 NSDictionary 对象中的对象数/2 决定了 UITableviewcell 的每个部分中的行数。同样，NSDictionary 对象的数量决定了部分的数量 - （这只是 [NSArray 计数]）。

一个基本的例子：

```
self.myArray = [NSArray arrayWithObects:
[NSDictionary dictionaryWithObjectsAndKeys:obj1, key1, obj2, key2,..., nil],
...
[NSDictionary dictionaryWithObjectsAndKeys:objA, keyA ... objn, keyn, nil],
nil]; 
```

我一直在做的是手动计算每个 NSDictionary 中的对象数量，将每个数字除以 2 并使用该信息构造一个数组，其中每个元素包含每个部分的行数。然后在 tableview numberOfRowsInSection 委托中使用手动构建的数组。这似乎充其量是粗略的。顺便说一句，但不重要，我除以 2 的原因是每个 tableview 单元格由 2 个 UIlabel 子视图组成 - 1 个标签用于 obj...，另一个用于 key...，用于其中的每组 NSDictionary 对象。

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:53:14.783

使用[NSArray](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/count)和[NSDictionary](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/count)`count`上的函数：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return [myArray count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSDictionary *dictionary = [myArray objectAtIndex:section];
    return [dictionary count] / 2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T06:54:41.087

```
@implementation NSArray (totalObjects)

- (NSUInteger) totalObjects
{
NSUInteger result = 0;
for (id object in self)
 result += [object isKindOfClass:[NSDictionary class]] ? [[object allKeys] count] : 1;
return result;
}

@end 
```

# eclipse - 如何在 Eclipse 中查看存储库路径

> ID：11175508
> 
> 赞同：2
> 
> 时间：2012-06-24T06:47:15.913
> 
> 标签：eclipse, svn, path, repository

是否可以在 Eclipse 中查看与项目关联的完整存储库路径？

这是一些微不足道的信息，所以我希望它可以在某处获得，但我找不到它。

所以对于 Subversion，我当然可以转到命令行并执行 svn info，但我希望这些信息在 Eclipse 中也可用。这是关于资源的最琐碎但也是最重要的信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T17:45:24.413

右键单击项目或文件，然后单击属性。然后从左侧选择“Subversion”部分。

![在此处输入图像描述](../Images/94517fca68a074fda674a967f629da19.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T10:35:21.763

首先，您在 Eclipse 中安装了一个 Subversion 插件，对吗？否则只需添加一个，一切都会自动出现。

之后请查看以下首选项：

*   团队 -> SVN -> 标签装饰：您可以在此处配置项目资源管理器中项目节点旁边直接显示的内容。用于配置确切显示内容的可用变量取决于您使用的是 Subclipse 还是 Subversive 插件。
*   常规 -> 外观 -> 标签装饰：您可以在此处全局启用/禁用标签装饰。

# javascript - 如何通过另一个事件停止 javascript 进程？

> ID：11175512
> 
> 赞同：0
> 
> 时间：2012-06-24T06:47:48.870
> 
> 标签：javascript, dom-events, addeventlistener

考虑我们有一个简单的循环 Javascript 过程：

```
function test() {
    el=document.getElementById("test");
    var opacity = 1;
    var id = setInterval(function() {
    opacity = opacity - 0.1;
    el.style.opacity= opacity;
    \\ if(mouseout) {clearInterval(id);} How to do this?
    if(opacity == 0) {clearInterval(id);}
    }, 500);
}

document.getElementById("test").
addEventListener('mouseover', function(){
  test();
}); 
```

一旦`moveover`发生事件，该过程就会启动并继续，直到到达`if condition`. 我们如何定义另一个`if condition`以通过另一个事件来停止该过程。

在当前示例中，我们如何在`mouseout`事件发生时停止进程（降低不透明度）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T06:50:31.303

`id`在函数之外声明你的变量。然后你可以`clearInterval(id)`从你的`mouseout`处理程序调用。

请注意，您实际上并不需要该`test()`函数，您可以将其内容直接放在鼠标悬停处理程序中：

```
var id,
    el = document.getElementById("test");

el.addEventListener('mouseover', function(){
    var opacity = 1;
    id = setInterval(function() {
       opacity = opacity - 0.1;
       el.style.opacity= opacity;
       if(opacity == 0) {clearInterval(id);}
    }, 500);
});
el.addEventListener('mouseout', function() {
   clearInterval(id);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T06:53:33.113

```
var el = document.getElementById("test"),
    opacity = 1,
    id;

el.addEventListener('mouseover', function(){
    id = setInterval(function() {
            opacity = opacity - 0.1;
            el.style.opacity= opacity;
            if(opacity == 0) {clearInterval(id);}
    }, 500);
});

el.addEventListener("mouseout", function() {
   clearInterval(id);
}); 
```

# objective-c - 将整个数据库从网络服务器加载到 IOS 原生应用程序

> ID：11175514
> 
> 赞同：0
> 
> 时间：2012-06-24T06:48:21.803
> 
> 标签：objective-c, ios, sqlite

我正在开发一个应用程序，我需要将整个数据库的副本从 Web 服务器保留到 IOS 本机 sq-lite 数据库，我如何保持更新版本的 db 或在一次加载应用程序时导入，应该是什么我解决这个问题的方法，任何帮助将不胜感激，

谢谢迪普什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:12:25.770

看起来这是一个流行的问题。根据[这个答案](https://stackoverflow.com/questions/3890518/convert-mysql-to-sqlite)，

> 并非每个数据库模式都可以转换。MySQL 比 SQLite 更复杂、功能更丰富。但是，如果您的架构足够简单，您可以将其转储到 SQL 文件中并尝试将其导入/加载到 SQLite DB 中。

为此，您可以像这样使用这个[mysql2sqlite.sh 脚本](https://raw.github.com/gist/1287049/mysql2sqlite.sh)

```
./mysql2sqlite.sh myDbase | sqlite3 database.sqlite 
```

或使用[此答案](https://stackoverflow.com/questions/5164033/export-a-mysql-database-to-sqlite-database)并简单地做

```
mysqldump database > database.sql
sqlite3 database < database.sql 
```

# ruby - Rails 测试：为什么要使用 Rspec2 而不是 Rails 默认提供的 Stock 测试环境

> ID：11175515
> 
> 赞同：0
> 
> 时间：2012-06-24T06:48:28.630
> 
> 标签：ruby, ruby-on-rails-3, testing

我对 rails3 和 ruby​​ 非常陌生。我正在为我的 Rails 应用程序设置测试。rails 提供的（[http://guides.rubyonrails.org/testing.html](http://guides.rubyonrails.org/testing.html)）与我在网上搜索rails 测试时发现的不同。人们大多更喜欢 Rspec2 而不是股票测试环境。

这是真的吗？我可能错了，但我想为我的新 webapp 选择一个合适的测试环境。谁能告诉我股票测试环境和 Rspec2 之间的区别。为什么有人会考虑其中任何一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T09:29:00.567

我认为没有合适的方法来回答这个问题。为什么红色比蓝色好？人们有偏好，Rspec2 一度成为事实上的标准。我认为在那之后很多人才开始使用它，因为其他人都已经使用它了。DDH — Ruby on Rails 的创建者 — 真的不喜欢 Rspec 并且[明显偏爱 Test::Unit](http://www.rubyinside.com/dhh-offended-by-rspec-debate-4610.html)。我个人在工作中使用 Rspec，因为团队中的大多数人都喜欢它，并且在我的私人项目中使用 Ruby 1.9 的[Minitest](http://www.bootspring.com/2010/09/22/minitest-rubys-test-framework/)。

我给你的建议：看看不同的测试框架，看看你觉得哪一个舒服并使用它。重要的是你测试，而不是你测试什么。

# datatable - 数据表行的完整副本

> ID：11175516
> 
> 赞同：0
> 
> 时间：2012-06-24T06:48:30.903
> 
> 标签：datatable, copy, row

我需要复制数据表中的一行及其子行。我必须迭代每个子表还是有更快的方法来做到这一点？

提前致谢。

编辑：我举一个例子：-行数据表“ParentTable”（主键“keyField”）-行数据表“ChildTable”（外键“keyField”）

我需要这个块的副本，我需要更改主键（以及约束的外键），然后删除原始行，但是这样做，我也松开了“ChildTable”行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:13:45.490

您可以从用于构建数据表或使用`fnGetData`.

```
$('#yourTable').dataTable().fnGetData(rowNumber); 
```

您可以查看更多数据的[参考](http://www.datatables.net/api)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T06:59:37.543

您可以使用 JOIN、LEFT JOIN、RIGHT JOIN 一下子获得您想要的所有结果。

# ios - Xcode Storyboard 严重问题会变成空白？

> ID：11175517
> 
> 赞同：3
> 
> 时间：2012-06-24T06:48:46.790
> 
> 标签：ios, xcode, xcode4, storyboard, uistoryboard

我知道 StackOverflow 上还有其他几个与此类似的问题，但它们有不同的结果和情况。我的 iPhone 应用程序（标签栏应用程序）中有 1 个故事板。它总共有大约 7 个不同的 UIViewController。每当我做任何事情（删除某些东西，添加一个对象）时，它都会变成空白，而我所拥有的只是网格线。我必须完全从情节提要文件中单击出来——进入代码文件——然后再次单击以打开情节提要文件以显示内容。这真的很令人沮丧，它让我的工作时间增加了一倍。

与其他问题不同，我只打开了一个选项卡，并且我没有对应用程序执行任何其他操作，因此关闭其他选项卡并不能解决我的问题。我尝试了所有方法，但我无法花时间创建一个新的 Storyboard 文件并重新链接所有连接。

如果其他人知道如何解决此问题，请帮助我。将不胜感激。如果其他人有这个问题，请发表评论，以便我知道有多少人有这个问题（而且我不是唯一一个）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-11T22:01:42.257

您可能需要调整情节提要底部的 wh 元素......当我切换到 wCompact hAny 时，它们为我重置为 wAny hAny 它成功了。

# sqlalchemy - 如何在连接列上查询不同的？

> ID：11175519
> 
> 赞同：2
> 
> 时间：2012-06-24T06:49:22.103
> 
> 标签：sqlalchemy

这是代码，我想让 UserCheckpoint.checkpoint 与众不同。这意味着所有查询的 UserCheckpoints 都应该有不同的 Checkpoint 对象。

```
friends_ucp = (db.session.query(UserCheckpoint).
               join(UserCheckpoint.checkpoint).
               filter(radius_cond).
               filter(Checkpoint.demo == False).
               filter(UserCheckpoint.user_id.in_(friends))
               ) 
```

我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T05:18:48.810

我解决了这个问题`group_by()`

# jquery - 此输入提交选择器与最接近的表单提交

> ID：11175520
> 
> 赞同：1
> 
> 时间：2012-06-24T06:49:29.650
> 
> 标签：jquery, jquery-selectors

我对下面的代码有问题。我不确定为什么这个选择器不起作用，如果我点击提交它不起作用。有没有人知道不使用 id 或类选择器的正确方法是什么？

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js"></script>
    </head>
    <body>
        <script>
        $(this).closest('form').submit(function () {
           alert(1);
           return false;
        });
        </script>
        <form>
          <input type="text" name="example">
          <input type="submit" class="searchBtn">
        </form>
    </body>
</html> 
```

当 gdoron 问我要做什么时，我将整个代码连同 Sudhir 解决方案一起放在这里，如果其他人需要的话。所以我试图在提交时使用 ajax 发送输入值，但我不想使用类或 id 选择器：

```
$("input[type='submit']").click(function() {
  $(this).closest('form').submit(function() {
        var values = $(this).serialize();          
        $.ajax({
          type: "POST",
          url: $(this).closest('form').attr('action'),
          data: values,
          success: function(msg){                              
              //saving done
              closeDialog(200);                            
          }           
        });     
        return false;           
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T06:52:59.120

尝试：

```
$(document).ready(function() {
  $("input[type='submit']").click(function() {
    $(this).closest('form').submit(function (evt) {
           //evt.preventDefault();
           alert(1);
           return false;
    });
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T06:52:47.093

更改您的代码：

```
$(this).closest('form').submit(function () {
           alert(1);
           return false;
        }); 
```

至：

```
$(function(){
    $('form').submit(function () {
        alert(1);
        return false;
    });
}): 
```

`this`在你的代码里是`window`，里面什么都没有`<form>`。

# r - rJava 无法安装（MacOS、Red Hat）

> ID：11175522
> 
> 赞同：5
> 
> 时间：2012-06-24T06:49:36.883
> 
> 标签：r, rjava

我遇到了许多其他人似乎在某一时刻遇到过的同样的 rJava 问题。`R CMD INSTALL`测试JNI程序是否可以编译时出现该错误。

输出建议运行`R CMD javareconf -ed`或`sudo R CMD javareconf`后者的输出是：

```
computer: home$ sudo R CMD javareconf
Java interpreter : /usr/bin/java
Java version     : 1.6.0_31
Java home path   : /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
Java compiler    : /usr/bin/javac
Java headers gen.: /usr/bin/javah
Java archive tool: /usr/bin/jar
Java library path: 
JNI linker flags : -framework JavaVM
JNI cpp flags    : -I$(JAVA_HOME)/include

Updating Java configuration in /Library/Frameworks/R.framework/Resources
Done. 
```

之后尝试安装 rJava 时，

```
computer: home$ R CMD INSTALL ~/Downloads/rJava_0.9-4.tar.gz 
* installing to library ‘/Library/Frameworks/R.framework/Versions/2.15/Resources/library’
* installing *source* package ‘rJava’ ...
checking for gcc... gcc -arch x86_64 -std=gnu99
checking for C compiler default output file name... a.out
/* Passes all checks */
configure: checking whether gcc -arch x86_64 -std=gnu99 supports static inline...yes
checking whether setjmp.h is POSIX.1 compatible... yes
checking whether sigsetjmp is declared... yes
checking whether siglongjmp is declared... yes
checking Java support in R... present:
interpreter : '/usr/bin/java'
archiver    : '/usr/bin/jar'
compiler    : '/usr/bin/javac'
header prep.: '/usr/bin/javah'
cpp flags   : '-I/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/include'
java libs   : '-framework JavaVM'
checking whether JNI programs can be compiled... configure: error: Cannot compile a simple JNI program. See config.log for details.

Make sure you have Java Development Kit installed and correctly registered in R.
If in doubt, re-run "R CMD javareconf" as root.

ERROR: configuration failed for package ‘rJava’
* removing ‘/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rJava’
* restoring previous ‘/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rJava’ 
```

`/usr/bin/javac`替换为的替代尝试`/System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home`同样失败。

我正在运行 Mac OS 10.7.3 和

```
computer: home$ java -version
java version "1.6.0_31"
Java(TM) SE Runtime Environment (build 1.6.0_31-b04-415-11M3646)
Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01-415, mixed mode) 
```

以下是在我的`.bash_profile`

```
export JAVA_HOME=/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home 
```

此外，我在 Red-Hat 上也有同样的问题。我希望提供的任何修复程序也能在那里工作，但如果不能，为什么不知道，请解释。

几年来，我一直在使用这个网站令人难以置信的知识库，但这是我的第一篇文章。多谢提前。

我已经浏览过的一些（不是全部）资源是

*   [https://stat.ethz.ch/pipermail/r-devel/2008-November/051224.html](https://stat.ethz.ch/pipermail/r-devel/2008-November/051224.html)
*   [https://stat.ethz.ch/pipermail/r-help/2008-October/177688.html](https://stat.ethz.ch/pipermail/r-help/2008-October/177688.html)
*   [R：rJava包安装失败](https://stackoverflow.com/questions/3311940/r-rjava-package-install-failing)

请注意，除非有和/或`apt-get`的等效解决方案，否则最后一个链接中的解决方案对我没有用（我认为）。`port``yum`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-11-07T14:29:31.853

我正在使用 Redhat Linux 7.1

我遇到了与上面相同的问题，我执行了以下步骤

1) 编辑 /usr/lib64/R/etc/Renviron 并在文件末尾添加“CPPFLAGS=${CPPFLAGS-'-ldl'}”

2）然后找到java home并将其设置如下（set java home until /jre）

```
$export JAVA_HOME=/usr/lib/jvm/java-1.7.1-ibm-1.7.1.3.10-1jpp.1.el7_1.x86_64/jre
$export PATH=$PATH:$JAVA_HOME/bin
$R CMD javareconf 
```

3) 从命令行调用 R

```
$R
> install.packages("rJava")
> install.packages("RJDBC",dep=TRUE)
> q()
Save workspace image? [y/n/c]: y 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-08T13:30:41.823

我最近在 RHEL 6.5 上遇到了同样的问题。我审查了这个线程和许多其他线程。问题是在测试JNI程序的编译时没有找到动态加载模块。我的解决方法是插入`"CPPFLAGS=${CPPFLAGS-'-ldl'}"`文件

```
/usr/lib64/R/etc/Renviron 
```

# ruby-on-rails - 如何确保 Rails 中多个事务/更新的原子性？

> ID：11175524
> 
> 赞同：0
> 
> 时间：2012-06-24T06:49:44.803
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, orm, ruby-on-rails-3.1

如果我有类似的东西：

```
Model1.update_all ['a1 = ?, a2 = ?', v1, v2], ['id = ?', id1]
Model2.update_all  ['a3 = ?', v3], ['id = ?', id2] 
```

我如何确保如果上述更新之一失败，它们都没有效果，即。执行一种回滚？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:03:16.423

这个应该做。。

```
Model1.transaction do
  Model1.update_all ['a1 = ?, a2 = ?', v1, v2], ['id = ?', id1]
  Model2.update_all  ['a3 = ?', v3], ['id = ?', id2]
end 
```

# javascript - 无法在 Backbone.js 视图中调用 jQuery-UI 函数

> ID：11175528
> 
> 赞同：0
> 
> 时间：2012-06-24T06:50:37.083
> 
> 标签：javascript, jquery-ui, javascript-events, backbone.js

我有一个网络应用程序，我使用 Backbone.js。

在登录视图中，我使用 jQuery UI 按钮。在我调用的模板代码`$(".btn").button();`中没有问题。

但是当我想在用户单击按钮并调用后采取行动时：

```
$('#btnSubmit').button({
   disabled : true,
   label : "Logging in..."
}); 
```

我收到错误消息：“未捕获的类型错误：**对象 [对象对象] 没有方法‘按钮’** ”（从 chrome devTools 控制台复制）。

奇怪的是，如果我在 chromeDevtools 控制台中运行此代码行，**它会完美运行**！我认为这与 DOM 以及我在偶数触发时所处的状态有关。 **知道有什么问题吗？**

一些细节：

```
Including the jQuery UI library:
define([
   'jQuery',
   'jQueryui',
/*...*/
], function($, jQueryui,...) {
var loginView = Backbone.View
   .extend({
/*...*/
   events : {
      "click #btnSubmit" : "login"
      },
/*...*/
   login : function() {
      $('#btnSubmit').button({
         disabled : true,
         label : "Logging in..."
         });
   },
}
});

   return new loginView;
}); 
```

**编辑：**

我尝试了斯蒂芬解决方案并尝试使用：

```
this.$el.find('#btnSubmit').button({
     disabled : true,
     label : "Logging in..."
}); 
```

还是行不通。我认为这意味着我无法访问所有 jQuery UI 功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:24:57.583

我发现了错误：我应该以这种方式使用传递给函数的 jQueryUI 引用：

```
jQueryui('#btnSubmit').button({
    disabled : true,
    label : "Logging in..."
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T07:15:34.483

要尝试的一件事是像这样查找元素：

```
this.$el.find('#btnSubmit').button({
     disabled : true,
     label : "Logging in..."
}); 
```

即使文档没有附加到 DOM，您也可以查找它。这是我唯一的猜测，因为我假设所有 jquery 导出都设置正确。

# php - php中的多个会话问题

> ID：11175531
> 
> 赞同：1
> 
> 时间：2012-06-24T06:51:02.897
> 
> 标签：php, mysql

我正在尝试构建一个门户，其中我有两个“页面”，一个输入普通用户，另一个输入像这样的 /admin 管理员输入。我正在使用会话，但问题是一旦用户登录，他/她甚至可以访问管理区域，反之亦然。这是为什么？

我将如何防止它？

谢谢。

check_login

```
<?php
define(DOC_ROOT,dirname(__FILE__)); // To properly get the config.php file
$username = $_POST['username']; //Set UserName
$password = $_POST['password']; //Set Password
$msg ='';
if(isset($username, $password)) {
    ob_start();
    include(DOC_ROOT.'/config.php'); //Initiate the MySQL connection
    // To protect MySQL injection (more detail about MySQL injection)
    $myusername = stripslashes($username);
    $mypassword = stripslashes($password);
    $myusername = mysqli_real_escape_string($dbC, $myusername);
    $mypassword = mysqli_real_escape_string($dbC, $mypassword);
    $sql="SELECT * FROM login_admin WHERE user_name='$myusername' and user_pass=SHA1('$mypassword')";
    $result=mysqli_query($dbC, $sql);
    // Mysql_num_row is counting table row
    $count=mysqli_num_rows($result);
    // If result matched $myusername and $mypassword, table row must be 1 row
    if($count==1){
        // Register $myusername, $mypassword and redirect to file "admin.php"
        session_register("admin");
        session_register("password");
        $_SESSION['name']= $myusername;
        header("location:index.php");
    }
    else {
        $msg = "Wrong Username or Password. Please retry";
        header("location:login.php?msg=$msg");
    }
    ob_end_flush();
}
else {
    header("location:login.php?msg=Please enter some username and password");
}
?> 
```

我在每一页之前插入的内容：

```
<?php
session_start(); //Start the session
define(ADMIN,$_SESSION['name']); //Get the user name from the previously registered super global variable
if(!session_is_registered("admin")){ //If session not registered
header("location:login.php"); // Redirect to login.php page
}
else //Continue to current page
header( 'Content-Type: text/html; charset=utf-8' );
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:54:51.100

制作两个会话变量，如

```
$_SESSION['user']//can access only one page
$_SESSION['admin']//can access both 
```

`isset($_session['user'])`并通过或检查它们的存在`isset($_session['admin'])`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T07:00:31.053

当用户成功授权时，检查他是管理员还是普通用户。因此，假设您为管理员用户定义了一个管理员会话变量

```
$_SESSION['admin_user'] = True 
```

然后在显示管理部分之前，只需检查用户是否具有正确的权限。

```
if ($_SESSION['admin_user']) {
       // display admin content
}
else {
      print("Not available, you need admin privilege.");
} 
```

因此，根据您的代码，我将其修改为如下所示：

```
<?php
  session_start(); //Start the session
  if( isset($_SESSION['admin']) && $_SESSION['admin_user'] ){ //If session registered and admin
     header( 'Content-Type: text/html; charset=utf-8' );
     // more content
   }
  else 
     header("location: login.php"); // Redirect to login.php page
?> 
```

[session_register](http://php.net/manual/en/function.session-register.php)也已被弃用，并从 php 5.4 中删除，因此请改用 $_SESSION['variable_name'] 。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-24T06:54:39.837

这是你应该做的：

```
 // and 956 in ur db is admin, user enters the userID in login

    if(_SESSION['userID']=="956")
     {

            redirect_to("localhost/admin.php");
     }
     else
     {
            redirect_to ("localhost/home.php");

      } 
```

# java - applet->servlet->一个记录文件（在服务器上）：我该怎么做？

> ID：11175533
> 
> 赞同：-1
> 
> 时间：2012-06-24T06:51:13.510
> 
> 标签：java, file, servlets, applet

要使用小程序制作投票表单，我想知道我的小程序如何与 servlet 通信。该 servlet 旨在将结果写入服务器上的文本文件。我不知道我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:25:22.833

applet 和 servlet 是分开的。没有简单的方法可以使用魔法使这更容易。

servlet 是 Web 服务器中的一个片段，当对 Web 服务器上的正确 URL 发出 HTTP 请求时，它会被执行。因此，您需要向运行 servlet 的 Web 服务器上的正确 URL 发出 HTTP 请求。

这与您从 applet 执行任何其他 HTTP 请求的方式相同，这与您从独立应用程序执行 HTTP 请求的方式相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T15:07:55.323

你可以用[`java.net.URLConnection`](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html)这个。

假设您的 servlet 映射到的 URL 模式`/myservlet`并且您的小程序是从上下文根提供的，那么应该这样做：

```
InputStream servletResponse = new URL(getCodeBase(), "myservlet").openStream();
// ... 
```

就这样。`getCodeBase()`继承自类`Applet`并动态返回小程序的代码库 URL（从那里下载小程序）。将`servletResponse`包含您写入`response.getOutputStream()`或写入`response.getWriter()`servlet 的任何内容。例如，只是一个“ok”字符串或一种易于解析的格式，如 XML 或 JSON。您可以在 GET 请求 URL 或 POST 请求正文中将请求参数作为查询字符串传递。

### 也可以看看：

*   [使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)
*   [https://stackoverflow.com/questions/9361399/how-to-send-list-of-objects-from-servlet-to-applet](https://stackoverflow.com/questions/9361399/how-to-send-list-of-objects-from-servlet-to-applet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T17:26:58.607

好吧，您有几个用于小程序/servlet 通信的选项....

*   http 请求。（这可能是最简单的）。为此，您可以使用[Apache HTTP 组件](https://hc.apache.org/)
*   [远程方法调用](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136424.html)RMI。这可能比 http 请求更复杂，但这取决于您想要实现的目标。
*   [插座](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)。（我认为 http 请求对于您的用例来说足够灵活，但以防万一）
*   [javascript](http://java.sun.com/products/plugin/1.3/docs/jsobject.html)。您可以从您的applet 中调用一个javascript 函数，并让该javascript 函数通过ajax、websockets 等将信息提交给servlet。

当然还有许多其他选项，但这些都是一些想法，请记住，您可能需要签署您的小程序。

如果您的问题是关于如何写入文件，那么有很多教程。[这](http://www.javapractices.com/topic/TopicAction.do?Id=42)是一个很好的

# c# - 如何从 C# 调用这个 delphi .dll 函数？

> ID：11175534
> 
> 赞同：4
> 
> 时间：2012-06-24T06:51:19.373
> 
> 标签：c#, delphi, pinvoke

// delphi 代码（delphi 版本：Turbo Delphi Explorer（它是 Delphi 2006））

```
function GetLoginResult:PChar;
   begin
    result:=PChar(LoginResult);
   end; 
```

//C#代码使用上面的delphi函数（我用的是unity3d，inside，C#）

```
[DllImport ("ServerTool")]
private static extern string GetLoginResult();  // this does not work (make crash unity editor)

[DllImport ("ServerTool")] 
[MarshalAs(UnmanagedType.LPStr)] private static extern string GetLoginResult(); // this also occur errors 
```

在 C# 中使用该函数的正确方法是什么？

（也用于delphi，代码类似于 if (event=1) and (tag=10) then writeln('Login result: ',GetLoginResult); ）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T07:20:22.363

字符串的内存归您的 Delphi 代码所有，但您的 p/invoke 代码将导致编组器调用`CoTaskMemFree`该内存。

你需要做的是告诉编组器它不应该负责释放内存。

```
[DllImport ("ServerTool")] 
private static extern IntPtr GetLoginResult(); 
```

然后用于`Marshal.PtrToStringAnsi()`将返回的值转换为 C# 字符串。

```
IntPtr str = GetLoginResult();
string loginResult = Marshal.PtrToStringAnsi(str); 
```

您还应该通过将 Delphi 函数声明为来确保调用约定匹配`stdcall`：

```
function GetLoginResult: PChar; stdcall; 
```

尽管这种调用约定不匹配对于没有参数和指针大小的返回值的函数来说并不重要。

为了使所有这些工作，Delphi 字符串变量`LoginResult`必须是一个全局变量，以便其内容在`GetLoginResult`返回后有效。

# java - 请问有人可以帮助将opencv代码转换为javacv吗？

> ID：11175539
> 
> 赞同：1
> 
> 时间：2012-06-24T06:52:42.480
> 
> 标签：java, opencv, conventions, javacv

我发现了一些识别特定图像中的圆圈的代码，并且我能够将 90% 的代码转换为 javacv。但不幸的是，我无法将以下几行转换为 javacv。那么请有人帮我把这些行转换成 javacv 吗？

```
CvSeq circles = cvHoughCircles(gry, mem, CV_HOUGH_GRADIENT, 1, 40.0, 100, 100,0,0);
cvCvtColor(canny, rgbcanny, CV_GRAY2BGR);

for (int i = 0; i < circles->total; i++)
{
 // round the floats to an int
 float* p = (float*)cvGetSeqElem(circles, i);
 cv::Point center(cvRound(p[0]), cvRound(p[1]));
 int radius = cvRound(p[2]);

 // draw the circle center
 cvCircle(img, center, 3, CV_RGB(0,255,0), -1, 8, 0 );

 // draw the circle outline
 cvCircle(img, center, radius+1, CV_RGB(0,0,255), 2, 8, 0 );

 printf("x: %d y: %d r: %d\n",center.x,center.y, radius);
} 
```

我只需要知道如何转换 for 循环内的 5 行代码。请善意分享您的经验。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T08:17:35.223

好吧，我不会为您转换该代码（我不知道 JavaCV），但这里有一些对您有用的链接：

*   [将 OpenCV C/C++ 代码转换为 JavaCV](http://code.google.com/p/javacv/wiki/ConvertingOpenCV)的提示- 这是您应该阅读的第一件事。
*   [JavaCV 源代码](http://javacv.googlecode.com/files/javacv-0.1-src.zip)- 在这个存档中有文件`samples/HoughLines.java`. `HoughCircles.java`它与从 repo 中删除的 wich非常相似。
*   [JavaCV 示例](http://javacv.googlecode.com/files/javacv-examples-20120614-src.zip)- 此存档包含文件`OpenCV2_Cookbook/src/opencv2_cookbook/chapter07/ex4HoughCircles.scala`. 这是该文件中的部分代码：

* * *

```
// Draw lines on the canny contour image
val colorDst = cvCreateImage(cvGetSize(src), src.depth(), 3)
cvCvtColor(src, colorDst, CV_GRAY2BGR)
for (i <- 0 until circles.total) {
    val point = new CvPoint3D32f(cvGetSeqElem(circles, i))
    val center = cvPointFrom32f(new CvPoint2D32f(point.x, point.y))
    val radius = math.round(point.z)
    cvCircle(colorDst, center, radius, CV_RGB(255, 0, 0), 1, CV_AA, 0)
    print(point)
}
show(colorDst, "Hough Circles") 
```

这正是您正在寻找的。

# java - 旋转位图像素

> ID：11175541
> 
> 赞同：0
> 
> 时间：2012-06-24T06:52:51.587
> 
> 标签：java, bitmap, rotation, transformation

我正在尝试旋转像素存储在 Array 中的位图`int pixels[]`。我得到了以下方法：

```
public void rotate(double angle) {
    double radians = Math.toRadians(angle);
    double cos, sin;
    cos = Math.cos(radians);
    sin = Math.sin(radians);
    int[] pixels2 = pixels;
    for (int x = 0; x < width; x++)
        for (int y = 0; y < height; y++) {
            int centerx = this.width / 2, centery = this.height / 2;
            int m = x - centerx;
            int n = y - centery;
            int j = (int) (m * cos + n * sin);
            int k = (int) (n * cos - m * sin);
            j += centerx;
            k += centery;
            if (!((j < 0) || (j > this.width - 1) || (k < 0) || (k > this.height - 1)))

                try {
                    pixels2[(x * this.width + y)] = pixels[(k * this.width + j)];
                } catch (Exception e) {
                    e.printStackTrace();
                }
        }
    pixels = pixels2;

} 
```

但这只是给了我疯狂的结果。有谁知道错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:12:44.493

线

```
int[] pixels2 = pixels; 
```

应该复制数组，但您只是复制对它的引用。使用`pixels.clone()`. 实际上，您只需要一个新的空数组，`new int[pixels.lenght]`就足够了。最后，您需要`System.arraycopy`将新内容复制到旧数组中。

您的代码中还有其他问题——您混淆了行和列。一些表达式的编写方式好像图像是逐行存储的，而其他表达式则好像是逐列存储的。如果逐行（我的假设），那么这没有意义：`x*width + y`. 它应该`y*width + x`是——您正在`y`向下跳过行，然后将`x`列向右移动。总而言之，我的代码可以正常工作：

```
import static java.lang.System.arraycopy;

public class Test
{
  private final int width = 5, height = 5;
  private int[] pixels = {0,0,1,0,0,
                          0,0,1,0,0,
                          0,0,1,0,0,
                          0,0,1,0,0,
                          0,0,1,0,0};

  public Test rotate(double angle) {
    final double radians = Math.toRadians(angle),
    cos = Math.cos(radians), sin = Math.sin(radians);
    final int[] pixels2 = new int[pixels.length];
    for (int x = 0; x < width; x++)
      for (int y = 0; y < height; y++) {
        final int
          centerx = this.width / 2, centery = this.height / 2,
          m = x - centerx,
          n = y - centery,
          j = ((int) (m * cos + n * sin)) + centerx,
          k = ((int) (n * cos - m * sin)) + centery;
        if (j >= 0 && j < width && k >= 0 && k < this.height)
          pixels2[(y * width + x)] = pixels[(k * width + j)];
      }
    arraycopy(pixels2, 0, pixels, 0, pixels.length);
    return this;
  }
  public Test print() {
    for (int y = 0; y < height; y++) {
      for (int x = 0; x < width; x++)
        System.out.print(pixels[width*y + x]);
      System.out.println();
    }
    System.out.println();
    return this;
  }
  public static void main(String[] args) {
    new Test().print().rotate(-45).print();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-29T01:30:47.577

```
public void render(float nx, float ny, float nz, float size, float rotate) {

    int wid = (int) ((width - nz) * size);

    int hgt = (int) ((height - nz) * size);

    if (wid < 0 || hgt < 0) {
        wid = 0;
        hgt = 0;
    }

    for (int x = 0; x < wid; x++) {
        for (int y = 0; y < hgt; y++) {
            double simple = Math.PI;
            int xp = (int) (nx +

            Math.cos(rotate) * ((x / simple) - (wid / simple) / 2) + Math
                    .cos(rotate + Math.PI / 2)
                    * ((y / simple) - (hgt / simple) / 2));
            int yp = (int) (ny + Math.sin(rotate)
                    * ((x / simple) - (wid / simple) / 2) + Math.sin(rotate
                    + Math.PI / 2)
                    * ((y / simple) - (hgt / simple) / 2));

            if (xp + width < 0 || yp + height < 0 || xp >= Main.width
                    || yp >= Main.height) {
                break;
            }
            if (xp < 0
                    || yp < 0
                    || pixels[(width / wid) * x + ((height / hgt) * y)
                            * width] == 0xFFFF00DC) {
                continue;
            }
            Main.pixels[xp + yp * Main.width] = pixels[(width / wid) * x
                    + ((height / hgt) * y) * width];
        }
    }
} 
```

这对我来说只是一个新的旋转，但这个过程是正常旋转的过程。它仍然需要很多修复——它效率低下而且速度慢。但是在一个小程序中，这段代码可以工作。我发布这个是为了让你可以接受它，让它变得更好。:)

# asp.net-mvc - MVC 扩展控制器以具有 ajax 感知重定向功能

> ID：11175543
> 
> 赞同：6
> 
> 时间：2012-06-24T06:52:53.510
> 
> 标签：asp.net-mvc, t4mvc

嗨，我正在学习 Ajax + MVC。我认为控制器自动处理 ajax 感知 Redirect() 会很好。经过一番挖掘，我从这个[链接](http://craftycodeblog.com/2010/05/15/asp-net-mvc-ajax-redirect/)中找到了代码。下面的代码对用户完全透明，用户只需调用 Redirect(someUrlString) 而无需担心普通/ajax 调用之间的差异。使它非常整洁和凉爽。

```
public abstract class BaseController : System.Web.Mvc.Controller {
    //turn into ajax aware redirect
    protected override RedirectResult Redirect(string url) {
        return new AjaxAwareRedirectResult(url);
    }
} 
```

和 ...

```
public class AjaxAwareRedirectResult : RedirectResult {
    public AjaxAwareRedirectResult(string url) : base(url) { }
    public override void ExecuteResult(ControllerContext context) {
        if (context.RequestContext.HttpContext.Request.IsAjaxRequest()) {
            string desturl = UrlHelper.GenerateContentUrl(Url, context.HttpContext);
            JavaScriptResult result = new JavaScriptResult() { 
                                      Script = "window.location='" + desturl + "';" };
            result.ExecuteResult(context);
        }
        else { base.ExecuteResult(context); }
    }
} 
```

但是，它并不完整。挑战是：

*RedirectToRouteResult* **`RedirectToAction`** ( *ActionResult*结果)

还没有（非常方便，尤其是对于 T4MVC）。

由于我还是 MVC 的新手，所以我尝试过，但我的知识不够丰富，无法充分弄清楚如何自己编写这个。请问有哪位专家可以帮我解决这个问题吗？所以我可以从你的代码中学习它？非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T10:58:16.810

这是我在项目中用于 Ajax 感知重定向的快速简单解决方案。

1.  为操作创建一个类 AjaxRedirectAttribute。

    ```
     public class AjaxRedirectAttribute : ActionFilterAttribute
        {
            public override void OnActionExecuted(ActionExecutedContext filterContext)
            {
                var result = filterContext.Result as RedirectResult;
                if (result != null && filterContext.HttpContext.Request.IsAjaxRequest())
                {
                    string destinationUrl = UrlHelper.GenerateContentUrl(result.Url, filterContext.HttpContext);
                    filterContext.Result = new JavaScriptResult()
                    {
                        Script = "window.location = '" + destinationUrl + "';"
                    };
                }
            }
        } 
    ```

2.  如下使用此属性以重定向到其他页面或从操作返回一些结果。

    ```
    [AjaxRedirect]
    public ActionResult MyAction(FormCollection frmcol)
    {
        // some code here
        if (UserId != 0)
        {
            return Redirect(this.Url.Action("Action", "Controller"));
        }
        else
        {
            return Content("Error message here.");
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T06:50:01.353

这是一个很好的解决方案，适用于 Ajax（Ajax.BeginForm 或 jquery.ajax）调用的 MVC 异常处理。

因此，如您所知，global.asax.cs 文件中有一个 Application_Error。你能告诉我如何在这里处理“JavaScriptResult”结果的ajax调用吗？

我正在使用“RedirectToRoute”来处理它，但在某些代码中，它会在 html 中附加现有的标头。我的错误控制器没有布局（_Layout=null），但它仍然显示页眉和页脚。

我正在处理一个新的 RedirectToRoute 调用。

```
 Response.RedirectToRoute("Default", new {controller = "Error", action = "Error"});

protected void Application_Error(object sender, EventArgs e)
        {
            RouteValueDictionary routeDataCollection = HttpContext.Current.Request.RequestContext.RouteData.Values;
            if (null != routeDataCollection && routeDataCollection.Count()>1)
            {
                Server.ClearError();
                 Response.RedirectToRoute("Default", new { controller = "Error", action = "Error"});
             }
        } 
```

谢谢

萨加尔

# javascript - jQuery / Mootools 冲突错误

> ID：11175547
> 
> 赞同：0
> 
> 时间：2012-06-24T06:53:12.710
> 
> 标签：javascript, jquery, mootools

我正在尝试制作一个同时使用 jQuery 和 MooTools 的基本网页。

你可以在这里看到一个工作示例：http: **[//jsfiddle.net/DddQA/](http://jsfiddle.net/DddQA/)**

但是，每当我尝试引用 MooTools 时，它都会破坏我的页面。

这是我当前遇到的问题的代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 

    <html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"> 

        <head>

        <script type="text/javascript" src="http://code.jquery.com/jquery-1.5.1rc1.min.js"></script>    
        <script type="text/javascript">
        <!-- remove this line below to make the hyperlink box work correctly -->
        jQuery.noConflict();

        //<![CDATA[ 
        $(window).load(function(){
        $(".affiliate-scheme").click(function(){
             window.location=$(this).find("a").attr("href");
             return false;
        });
        });//]]>
        </script>

        <!-- remove this line below to make the hyperlink box work correctly -->
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/mootools/1.4.5/mootools-yui-compressed.js"></script>

        </head>

        <body id="affiliate-scheme">

            <div class="affiliate-scheme" style="background:red"> 
                 <h3>Affiliate Scheme</h3> 
                 <ul> 
                    <li><a href="/affiliate-scheme/" title="Promote with our Affiliate Scheme">Promote Us</a></li> 
                 </ul> 
            </div> 

        </body>

    </html> 
```

非常感谢这里的任何帮助。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T08:46:42.373

解决：

[http://jsfiddle.net/DddQA/2/](http://jsfiddle.net/DddQA/2/)

# windows - 为这些 Linux bash 命令寻找等效的 Windows 批处理命令

> ID：11175556
> 
> 赞同：0
> 
> 时间：2012-06-24T06:54:16.483
> 
> 标签：windows, linux, command, shell-exec

我是这个论坛的新用户。我想问我的问题。如果我在 linux 中有这些命令，Windows 中的命令是什么？

第一个命令：

```
if (!is_dir('geoip')) mkdir('geoip', 0744);
shell_exec('unzip -oj GeoLiteCity.zip -d geoip/'); 
```

第二个命令：

```
shell_exec('rm -rf geoip/'); 
```

Windows中的这些命令是什么？谢谢您的帮助。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:22:14.757

Windows 没有用于解压缩文件的内置命令，尽管可以安装 InfoZip，它与 Linux 上的 zip 具有相同的命令行参数。

在 Windows 中删除目录的命令是，`rd /s /q geoip`但在 PHP 中有多种递归删除目录的方法，其中最新的是使用新的递归目录迭代器，例如[Recursive delete](https://stackoverflow.com/questions/4490637/)的答案中提到的。

# objective-c - Objective-C 返回自动发布的副本

> ID：11175563
> 
> 赞同：2
> 
> 时间：2012-06-24T06:54:52.147
> 
> 标签：objective-c, memory-management, copy, autorelease

我在尝试了解 Apple 的内存管理标准时遇到了一个奇怪的问题。假设我有一个方法可以返回一个副本而不让用户知道它是一个副本。

```
+(Point2D*) Add:(Point2D*)a To:(Point2D*)b
{
        Point2D * newPoint = [a copy];
        [newPoint Add:b]; // Actually perform the arithmetic.
        return [newPoint autorelease];
} 
```

问题是 Xcode 的 Analyze 函数将其标记为发送了太多 -autorelease 调用的对象。我假设这是因为 -copy 隐含地假设您正在取得所有权，因此 +0 保留计数的可能性很可能。但我不完全确定。

Xcode 的分析信息

```
+(Point2D*) Add:(Point2D*)a To:(Point2D*)b
{
        Point2D * newPoint = [a copy]; // <- 1\. Method returns an Objective-C object with a +0 retain count.
        [newPoint Add:b];
        return [newPoint autorelease]; // <- 2\. Object sent -autorelease method.
                                       // <- 3\. Object returned to caller with a +0 retain count.
                                       // <- 4\. Object over -autoreleased: object was sent -autorelease but the object has zero (locally visible) retain counts.
} 
```

关于为什么会发生这种情况的任何提示或提示？除非我遗漏了一些东西，否则代码应该可以正常工作，因为自动释放直到安全时间才会触发（即它的工作方式有点像便利构造函数，用户有时间保留。）

根据要求， -copyWithZone: 将按如下方式实现：

```
-(id)copyWithZone:(NSZone *)zone
{
        return [[Point2D allocWithZone:zone] initX:x Y:y Z:z];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T06:57:13.303

`-copyWithZone:(NSZone*)zone`在您的班级中正确实施`Point`（或至少请在此处复制）

# mysql - MySQL 更新排序数

> ID：11175566
> 
> 赞同：1
> 
> 时间：2012-06-24T06:55:47.703
> 
> 标签：mysql

我有这样的MYSQL数据

```
id  | number
1   | 3
4   | 4
7   | 7
10  | 5
11  | 6 
```

我有这样的数据库，以及如何更新`number`它以增量排序？
这意味着结果将是这样的

```
id  | number
1   | 1
4   | 2
7   | 3
10  | 4
11  | 5 
```

* * *

我更新了这个问题，所以不会有混淆`id`，因为 id 不会是连续的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T07:26:46.957

```
set @val = 0;
update  table_name set number = (@val:=@val+1); 
```

即使 table 是，这也会起作用：

```
id  | number
1   | 3
4   | 4
7   | NULL
10  | 5
11  | NULL 
```

变成这样：

```
id  | number
1   | 1
4   | 2
7   | 3
10  | 4
11  | 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T06:57:02.503

```
update table set number=id where 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T08:13:46.060

试试这个：

```
SET @idrank = 0;
SET @numrank = 0;

UPDATE 
    tbl a
INNER JOIN
    (
        SELECT id, @idrank:=@idrank+1 AS id_rank
        FROM tbl
        ORDER BY id
    ) b ON a.id = b.id
INNER JOIN
    (
        SELECT number, @numrank:=@numrank+1 AS number_rank
        FROM tbl
        ORDER BY number
    ) c ON b.id_rank = c.number_rank
SET
    a.number = c.number; 
```

这将解释该`number`领域的差距和违规行为以及重复。假设整个数据集类似于：

```
id   |   number
---------------
2    |   534
3    |   421
6    |   2038
7    |   41
10   |   5383
11   |   5
12   |   933
15   |   43 
```

更新后的结果表集将是：

```
id   |   number
---------------
2    |   5
3    |   41
6    |   43
7    |   421
10   |   534
11   |   933
12   |   2038
15   |   5383 
```

## **解释：**

它基本上分别取每个字段的升序并加入等级，以便`id`order 与相应的 ordered 匹配`number`。

第一`INNER JOIN`个子选择将如下所示：

```
id   |   id_rank
---------------
2    |   1
3    |   2
6    |   3
7    |   4
10   |   5
11   |   6
12   |   7
15   |   8 
```

然后第二`INNER JOIN`个子选择将像这样：

```
number   |   number_rank
---------------
534      |   5
421      |   4
2038     |   7
41       |   2
5383     |   8
5        |   1
933      |   6
43       |   3 
```

`id_rank`然后，当您在=上加入两个子选择时`number_rank`，您会将两个字段的升序排列起来。一旦你有了它，更新就变成了一个简单的问题，即设置表的编号 = 第二个连接表的编号。

# php - php将数组更改为带有父项的ul

> ID：11175568
> 
> 赞同：0
> 
> 时间：2012-06-24T06:56:01.960
> 
> 标签：php, html, domdocument

我有一个这样的数组：

```
$arr = array(array('1', '0', 'nokia'),
             array('2', '0', 'samsung'),
             array('3', '1', 'n90'),
             array('4', '2', 'galaxy note'),
             array('5', '2', 'galaxy nexus'),
             array('6', '3', '8GB'),
             array('7', '3', '16GB'),
             array('8', '4', '8GB'),
             array('9', '4', '16GB'),
             array('10', '4', '32GB'),
             array('11', '10', 'black'),
             array('12', '10', 'red'),
             ); 
```

我想要一个函数将其更改为此 html 代码：

```
<ul>
   <li id="1">nokia
      <ul>
         <li id="3">n90
            <ul>
               <li id="6">8GB</li>
               <li id="7">16GB</li>
            </ul>
         </li>
      </ul>
   </li>
   <li id="2">samsung
      <ul>
         <li id="4">galaxy note
            <ul>
               <li id="8">8GB</li>
               <li id="9">16GB</li>
               <li id="10">32GB
                  <ul>
                     <li id="11">black</li>
                     <li id="12">red</li>
                  </ul>
               </li>
            </ul>
         </li>
         <li id="5">galaxy nexus</li>
      </ul>
   </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:21:18.803

这个问题没有那么现实的答案。但是，我得到了解决方案。为此，您必须使用嵌套的 foreach。比较数组元素。可能有更简单的方法来做到这一点。这是我的解决方案

```
<?
$arr = array(array('1', '0', 'nokia'),
             array('2', '0', 'samsung'),
             array('3', '1', 'n90'),
             array('4', '2', 'galaxy note'),
             array('5', '2', 'galaxy nexus'),
             array('6', '3', '8GB'),
             array('7', '3', '16GB'),
             array('8', '4', '8GB'),
             array('9', '4', '16GB'),
             array('10', '4', '32GB'),
             array('11', '10', 'black'),
             array('12', '10', 'red'),
             );
echo "<ul>\n";
foreach($arr as $ar){
    if($ar[1]==0){
        echo "<li id=\"".$ar[0]."\">".$ar[2]."\n";
            echo "<ul>";
                foreach($arr as $ar1){
                    if($ar1[1]==$ar[0]){
                        echo "<li id=\"".$ar1[0]."\">".$ar1[2]."</li>\n";
                        echo "<ul>";
                        foreach($arr as $ar2){
                            if($ar2[1]==$ar1[0]){
                                echo "<li id=\"".$ar2[0]."\">".$ar2[2]."</li>\n";                               
                                echo "<ul>";
                                foreach($arr as $ar3){
                                    if($ar3[1]==$ar2[0]){
                                        echo "<li id=\"".$ar3[0]."\">".$ar3[2]."</li>\n";
                                    }
                                }
                                echo "</ul>";
                            }
                        }
                        echo "</ul>";
                    }
                }
            echo "</ul>";
        echo "</li>";
    }
}
echo "</ul>\n";
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T07:28:37.557

## 我用 PHP DOMDocument 解决了它

它在具有这种结构的表中也很有用：id、parent_id、title[、其他字段]

```
$dom = new DOMDocument;
foreach($arr as $row){
    $node[$row[0]] = $dom->createElement('li'); // make an element
    $node[$row[0]]->setAttribute('id', $row[0]); // set id to element
    $node[$row[0]]->nodeValue = $row[2]; // set the value to element
    if(!$row[1])
        $dom->appendChild($node[$row[0]]); // append the element to dom document root
    else
        $node[$row[1]]->appendChild($node[$row[0]]); // append the element to that's parent element
    $ul = $dom->createElement('ul');
    $node[$row[0]] = $node[$row[0]]->appendChild($ul);
}

$string = '<ul>'.str_replace('<ul></ul>', '', $dom->saveHTML()).'</ul>'; // delete empty ul's
echo $string; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T08:39:45.563

您的数组中没有可以构建适当功能的模式。

即（从我能推断出的）
`array('1', '0', 'nokia') stores in it ('id_number', 'number', 'company name')`
`array('11', '10', 'black') stores ('id_number', 'number', 'colour')`。

也没有任何东西可以将“诺基亚”与“n90”联系起来。你必须分开你想要的东西。使用数据库（mysql）或在数组中进行适当的设置。

最好使用数据库，并使用过滤器，连接等。
**如果您仍然希望它在数组中，我们可以尝试建立一些关系。**

*这是我的意见*
将您的数组拆分为 4 个数组

1.  `company = array( array('company_id', 'company_name'))`
2.  `handset = array( array('phone_id','company_id', array('color_ids'), 'phone_name')`
3.  `color = array( array('color_id', 'color_name'))`
4.  `size = array( array('size_id', 'size_val')`

我所做的是在数组中实现了数据库设计。现在你有一些东西可以相互联系。

这是一个伪代码，您可以根据其工作流程得出您的实际代码

```
foreach(element in company)
{
 foreach(element in nested-array-of-company-element)
  {
   echo "<li id='company_id'>'company_name'</li>"
   echo "<ul>"

   foreach(elements in handset)
   foreach(elements in elements-of-handset)
   if( inarray(company_id) )
    { 
    echo "<li id='phone_id'>phone_name</li>"
    echo "<ul>"
    foreach(elements in color)
     foreach(elements in elements-of-color)
     if( inarray(color_id-in-handset-array) )
     {
     echo "<li id='color_id'>color_name</li>"
     echo "<ul>"
     }
    echo "</ul>"
    echo "<ul>"
    foreach(elements in size)
     foreach(elements in elements-of-size)
     if( inarray(size_id-in-handset-array) )
     {
     echo "<li id='size_id'>size_val</li>"
     echo "<ul>"
     }
echo "</ul>"
}
}
} 
```

在夏天，您将需要：-

了解[php 中的嵌套 foreach()](http://php.net/manual/en/control-structures.foreach.php)
了解php 中的[in_array()](http://php.net/manual/en/function.in-array.php)
这将是工作流
li 每一个`company`list
li 曾经的`handset`company_id 为 in_array()
li 每一个`color`由 in_array()过滤的可用
li 每一个由 in_array()`size` 过滤的可用

# javafx - javafx，如何实现confirmHandler？

> ID：11175571
> 
> 赞同：1
> 
> 时间：2012-06-24T06:57:10.290
> 
> 标签：javafx, javafx-2

我正在使用 javafx 的 webengine 来显示网页。在页面上，有调用window.confirm的脚本。我已经知道如何设置确认处理程序以及如何显示类似模式的对话框。

我的问题是如何在处理程序返回之前获得用户的选择？

```
webEngine.setConfirmHandler(new Callback<String, Boolean>() {
@Override
public Boolean call(String message) {
// Show the dialog
...
return true; // How can I get user's choice here?
}
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T02:11:47.343

如[javafx-jira.kenai.com/browse/RT-19783](http://javafx-jira.kenai.com/browse/RT-19783)中所述，我们可以使用 JavaFx 2.2 中提供的新方法 showAndWait 来实现此目的。

> 舞台类：
> 
> ```
> /** 
>  * Show the stage and wait for it to be closed before returning to the 
>  * caller. This must be called on the FX Application thread. The stage 
>  * must not already be visible prior to calling this method. This must not 
>  * be called on the primary stage. 
>  * 
>  * @throws IllegalStateException if this method is called on a thread 
>  * other than the JavaFX Application Thread. 
>  * @throws IllegalStateException if this method is called on the 
>  * primary stage. 
>  * @throws IllegalStateException if this stage is already showing. 
>  */ 
> public void showAndWait(); 
> ```

@jewelsea 在[https://gist.github.com/2992072](https://gist.github.com/2992072)上创建了一个示例。谢谢！

# iphone - 上网查ios应用

> ID：11175573
> 
> 赞同：1
> 
> 时间：2012-06-24T06:57:16.717
> 
> 标签：iphone, ios, background-process

我创建了一个 iPhone 应用程序，我想在其中检查互联网连接。在我编写的应用程序委托方法的 didFinishLaunchingWithOptions 方法中

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    viewController1 = [[ViewController1 alloc] initWithNibName:@"ViewController1" title:firstTabTitleGlobal bundle:nil];
    viewController2 = [[ViewController2 alloc] initWithNibName:@"ViewController2" title:secondTabTitleGlobal bundle:nil];

    newNavController = [[UINavigationController alloc] initWithRootViewController:viewController1];

    userNavController = [[UINavigationController alloc] initWithRootViewController:viewController2];

    self.tabBarController = [[[UITabBarController alloc] init] autorelease];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:newNavController,userNavController,nil]

    Reachability *r = [Reachability reachabilityWithHostName:globalHostName];

    NetworkStatus internetStatus = [r currentReachabilityStatus];

    if ((internetStatus != ReachableViaWiFi) && (internetStatus != ReachableViaWWAN))
    {
        [self showAlert:globalNetAlertTitle msg:globalNetAlertMsg];
        [activityIndicator stopAnimating];
    }
    else
    {
        [activityIndicator stopAnimating];
        self.window.rootViewController = self.tabBarController;
        [self.window makeKeyAndVisible];
    }
} 
```

我的代码没问题，因为当没有互联网连接时会显示警报。但问题是当没有内部人员时会显示 default.png。当我再次运行应用程序时，应用程序将从显示的 default.png 运行。什么也没有发生。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T07:06:58.150

`application:didFinishLaunchingWithOptions:`仅在启动应用程序时运行。

如果您希望您的应用程序在后续应用程序激活时检查可用性，请尝试将您的代码放入`applicationDidBecomeActive:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T16:04:01.943

更好的是使用 NSNotifications，动态地告诉你是否有连接。您可以使用名为“reachabilty”的苹果类来做到这一点。一旦你将文件包含在你的项目中，你就可以使用这样的东西；

```
//in viewDidOnload    
[[NSNotificationCenter defaultCenter] addObserver:self 
                                          selector:@selector(handleNetworkChange:) 
                                          name:kReachabilityChangedNotification object:nil];
reachability = [[Reachability reachabilityForInternetConnection] retain];
[reachability startNotifier];
NetworkStatus status = [reachability currentReachabilityStatus];

if (status == NotReachable) {
    //Do something offline
} else {
    //Do sometihng on line
}

- (void)handleNetworkChange:(NSNotification *)notice{
 NetworkStatus status = [reachability currentReachabilityStatus];
 if (status == NotReachable) {
  //Show offline image
 } else {
  //Hide offline image
 }

} 
```

[（这是来自Reachability 网络更改事件未触发](https://stackoverflow.com/questions/4501864/reachability-network-change-event-not-firing)的更正代码）

然后，一旦发生任何网络更改，您就可以更新您的图像。但是，不要忘记将自己从 dealloc 中的接收通知中删除；

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:kReachabilityChangedNotification object:nil]; 
```

如果您需要有关如何实现此功能的更多信息，我很乐意为您提供帮助！

乔纳森

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-01T19:09:25.870

这在 Swift 5 中效果很好。返回一个布尔值。它也适用于移动数据。

```
public class Reachability {

        class func isConnectedToNetwork() -> Bool {

            var zeroAddress = sockaddr_in(sin_len: 0, sin_family: 0, sin_port: 0, sin_addr: in_addr(s_addr: 0), sin_zero: (0, 0, 0, 0, 0, 0, 0, 0))
            zeroAddress.sin_len = UInt8(MemoryLayout.size(ofValue: zeroAddress))
            zeroAddress.sin_family = sa_family_t(AF_INET)

            let defaultRouteReachability = withUnsafePointer(to: &zeroAddress) {
                $0.withMemoryRebound(to: sockaddr.self, capacity: 1) {zeroSockAddress in
                    SCNetworkReachabilityCreateWithAddress(nil, zeroSockAddress)
                }
            }

            var flags: SCNetworkReachabilityFlags = SCNetworkReachabilityFlags(rawValue: 0)
            if SCNetworkReachabilityGetFlags(defaultRouteReachability!, &flags) == false {
                return false
            }

            /* Only Working for WIFI
             let isReachable = flags == .reachable
             let needsConnection = flags == .connectionRequired

             return isReachable && !needsConnection
             */

            // Working for Cellular and WIFI
            let isReachable = (flags.rawValue & UInt32(kSCNetworkFlagsReachable)) != 0
            let needsConnection = (flags.rawValue & UInt32(kSCNetworkFlagsConnectionRequired)) != 0
            let ret = (isReachable && !needsConnection)

            return ret

        }
    } 
```

希望这可以帮助。

# c99 - 为什么 C 允许在不兼容的指针类型之间进行转换？

> ID：11175575
> 
> 赞同：0
> 
> 时间：2012-06-24T06:58:01.367
> 
> 标签：c99

我想知道为什么 C99 允许在不兼容的指针类型之间进行转换：

```
void f(int* p)
{
}

void c(char* p)
{
   f(p);
} 
```

C11 是否也允许它们？诊断此类转换是否需要符合要求的实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:27:23.230

C99 不允许不同类型的指针之间的隐式转换（除了 to/from `void*`）。这是 C99 基本原理所说的：

> 在没有显式转换的情况下，将指向任何类型对象的指针转换为指向不同类型对象的指针是无效的。

这是赋值规则的结果，它具有以下约束之一（当涉及指针时）（C99 6.5.16.1“简单赋值”）：

> *   两个操作数都是指向兼容类型的限定或非限定版本的指针，并且左边指向的类型具有右边指向的类型的所有限定符；
> *   一个操作数是指向对象或不完整类型的指针，另一个是指向 void 的限定或非限定版本的指针，左侧指向的类型具有右侧指向的类型的所有限定符；
> *   左操作数是指针，右操作数是空指针常量

将指针作为参数传递给原型函数遵循相同的规则，因为（C99 6.5.2.2/7 “函数调用”）：

> 如果表示被调用函数的表达式具有包含原型的类型，则参数将隐式转换为相应参数的类型，就像通过赋值一样

C90 和 C11 都有类似的措辞。

我相信许多编译器（包括 GCC）放宽了这个限制，只发出警告，因为有太多依赖它的遗留代码。请记住，这`void*`是 ANSI C 标准的发明，因此是标准前的，可能还有很多标准后的代码，通常使用`char*`或`int*`作为“通用”指针类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:58:56.960

没有“不兼容”的指针类型之类的东西。

C 的美妙之处在于它允许程序员做他们想做的事。由程序员决定什么是兼容的还是不兼容的。其他声称强制“ `class`”或“ `type`”内聚的语言以有限的方式这样做。允许引用对象的那一刻使用了指针，并且可能会出现类管理不善。

# solr - 用于将数据输入 Solr 的 Apatar

> ID：11175576
> 
> 赞同：0
> 
> 时间：2012-06-24T06:58:22.723
> 
> 标签：solr, etl, data-migration

我需要从规范化的 MSSQL 数据库中获取数据并将它们提供给 Solr 索引。

我只是想知道 Apatar 是否可以用来执行这项工作。我浏览了它的文件，但没有得到我正在寻找的信息。它指出，它可以从 SQL 服务器获取数据，并通过 HTTP 发布，但仍然不确定它是否可以通过 HTTP 以 XML 形式发布获取的数据？

任何建议都将非常有价值。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:12:56.827

我对 Apatar 不熟悉，但鉴于它是一个 Java 应用程序，在 Windows 环境中实现它可能有点挑战。但是，对于需要从 MSSQL 数据库获取数据并将其提供给 Solr 的各种场景，我已经编写了利用 SolrNet 客户端的自定义 C# 代码。这往往是非常直接和简单的代码，在我们需要以指定的时间间隔加载数据的情况下，我们正在使用调用控制台应用程序的计划任务。我建议查看 SolrNet 站点的[创建/更新](http://code.google.com/p/solrnet/wiki/CRUD)部分，了解一些使用 .Net 客户端加载/更新数据的示例。

# eclipse - 修复后仍然出现eclipse错误标记

> ID：11175577
> 
> 赞同：1
> 
> 时间：2012-06-24T06:58:48.900
> 
> 标签：eclipse, error-handling

文件中存在库问题，修复后，该行中的红色错误标记消失。但文件、包和项目显示为红色错误标记。

我刷新了，但仍然得到红色标记。如何去除这些标记。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T07:45:55.540

在 Eclipse 中显示问题有两种不同的机制。注释是绑定到编辑器的轻量级机制，标记用于在其他任何地方显示问题（例如包资源管理器）。

如果行内注释消失，但项目错误标记没有，则表示注释和标记不一致。首先，您应该尝试保存文件（有时注释在编辑过程中被删除，而标记仅在保存时刷新）。当然，你已经保存了（否则刷新没有任何意义），所以我猜，有些标记卡住了。

要删除该标记，请打开*问题*视图（窗口/打开视图），并在那里找到相应的错误标记，然后将其删除（在弹出菜单中删除）。

# mediawiki - 如何在 mediawiki 用户偏好中添加更多用户性别选项？

> ID：11175579
> 
> 赞同：0
> 
> 时间：2012-06-24T06:59:06.673
> 
> 标签：mediawiki, wikimedia

在 special:preferences mediawiki 用户可以在两种性别之间进行选择。对于我的 wiki，我想添加更多选项。例如：“变性人”，或“不关你的事”。这是可行的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:12:48.163

不，因为没有意义。MediaWiki 只处理语法性别。如果您的语言有多种语法性别可以/应该用于界面中的用户，超过目前支持的男性/女性/通用，请[告诉我们](https://translatewiki.net/wiki/Talk:Gender)，因为我们从未听说过任何此类语言（有人要求中性性别机器人等等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:11:15.347

可以办到。下面描述的所有方法都是使用 Mediawiki 1.17.0 完成的。

我假设您至少已通过身份验证作为 wiki 的管理员，并且您可以完全访问 FTP 文件夹并能够修改 wiki 文件。

您将需要修改***/includes/Preferences.php***文件。绕过第 200 行，您会发现以下代码：

```
$defaultPreferences['gender'] = array(
'type' => 'select',
'section' => 'personal/info',
'options' => array(
    wfMsg( 'gender-male' ) => 'male',
    wfMsg( 'gender-female' ) => 'female',
    wfMsg( 'gender-unknown' ) => 'unknown',
),
'label-message' => 'yourgender',
'help-message' => 'prefs-help-gender',
); 
```

添加您需要的新性别：

```
$defaultPreferences['gender'] = array(
'type' => 'select',
'section' => 'personal/info',
'options' => array(
    wfMsg( 'gender-male' ) => 'male',
    wfMsg( 'gender-female' ) => 'female',
    wfMsg( 'gender-transgender' ) => 'transgender',
    wfMsg( 'gender-noneofyourbusiness' ) => 'noneofyourbusiness',
),
'label-message' => 'yourgender',
'help-message' => 'prefs-help-gender',
); 
```

最后，您需要访问 wiki 的***MediaWiki:gender-transgender***和***MediaWiki:gender-noneofyourbusiness***（假设您添加了这两个新性别）页面，并使用您在选择性别时希望看到的文本对其进行编辑选项。

这应该就是全部了。享受！

# iphone - iOS5 上 Twitter 登录的最佳实践（xAuth 或 oAuth with Twitter Framework？）

> ID：11175581
> 
> 赞同：0
> 
> 时间：2012-06-24T06:59:32.317
> 
> 标签：iphone, twitter, oauth, xauth

我想从 twitter 帐户获取时间线，我需要创建登录部分。我想问一下最好的做法是什么。

iOS5 twitter api 不允许我创建自定义登录屏幕，用户需要转到设置并手动返回我的应用程序。所以，我相信我最好在登录屏幕上使用 xAuth。

**1.问题**

即使我使用 XAuthTwitterEngine 之类的库使用自定义 xAuth 登录功能，我仍然可以在 iOS5 上使用 twitter 框架 api[吗](https://github.com/aral/XAuthTwitterEngine)？

[initWithOAuthToken:tokenSecret:](http://developer.apple.com/library/ios/#documentation/Accounts/Reference/ACAccountCredentialClassRef/Reference/Reference.html)似乎是完成此任务的方法。

如果是这样，我想我也可以将此方法与 oAuth 登录一起使用。

**2.问题**

如果您不需要访问 DM，您最好还是使用 xAuth，对吧？

我不明白为什么很多 Twitter 客户端仍然使用 oAuth，即使 xAuth 在 iPhone 上效果更好，直到我发现你无法使用 xAuth 访问用户 DM。

但是，我的应用程序不需要访问 DM，所以我想 xAuth 是要走的路。

我相信这是 iOS5 的良好登录模式。

**iOS5上的登录模式**

如果用户已经在 iOS 设置上登录了 twitter 账号，它会显示账号，所以用户不需要登录。

如果用户未在 iOS 设置上登录 Twitter 帐户，您可以使用 xAuth 在我的应用程序中登录，如官方 twitter iPhone 应用程序。

[MugunthKumar/RSOAuthEngine](https://github.com/MugunthKumar/RSOAuthEngine)看起来不错，即使它不支持 xAuth。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:00:59.367

**1.问题**

看来您只能在带有 xAuth 的 ACAccount 上使用 initWithOAuthToken:tokenSecret: 。但是，如今从 Twitter 获得 xAuth 访问权限非常困难。

**2.问题**

如果我使用 oAuth 并让用户通过 safari 登录，用户无需将其帐户信息提供给开发人员。这对用户来说更加安全，开发者不需要对用户的重要登录信息有负担。

就这个安全点而言，在 IOS 设置上使用 iOS5 twitter 登录帐户似乎是最好的选择。但是，不幸的是，除非您显示推文屏幕，否则您不能让用户从 iOS5.1 跳转到 iOS 的设置。

**结论**

由于我的应用程序仅支持 iOS5 或更高版本，出于安全原因，让用户跳转到 iOS 设置并不是一个坏主意，而不是在我的应用程序中创建 xAuth 登录屏幕或在 UIWebview 上创建 oAuth，我最终让用户跳转到 iOS5 设置登录时。

在此处查看执行此操作的方法。[https://stackoverflow.com/a/11267414/743663](https://stackoverflow.com/a/11267414/743663)

# jquery - 使用 JQuery/AJAX 向 PHP 发送文本值

> ID：11175586
> 
> 赞同：0
> 
> 时间：2012-06-24T07:00:10.430
> 
> 标签：jquery, html, ajax

我想不通。我有这个 HTML

```
<input type="text" class="studno"><input type="button" value="Check" class="chstudno"> 
```

如何使用 JQuery/AJAX 将其发送到 PHP？我有这个代码，但我认为这是错误的

```
var boom = 'booming';

$(document).ready(function(){
$(".chstudno").click(function(){
$(".inup").html(boom);
studnoch();
});
});

function studnoch(){
var studno = $('.studno').val();
$.post("prochat.php", {studno: studno};
} 
```

至于 php 文件，它是一个简单的命令，将检查输入变量是否与数据库中的任何内容匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T07:06:14.263

你可能的意思是：

```
$(".studno").click(function(){ 
```

或者：

```
$(".chstudno").click(function(){ 
```

代替：

```
$(".check").click(function(){ 
```

`check`是**值**而不是类：

```
<input type="button" value="Check" class="chstudno"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T07:16:05.653

从一个基本测试开始：添加一个成功函数：

```
function studnoch() {
  var studno = $('.studno').val();
  alert('studnoch() has been called with studno=' + studno);
  $.post("prochat.php", {studno: studno}, 
    function(data, txt, xhqr) { alert('Ok, it worked'); }
  );
} 
```

这应该可以帮助您找出哪里出错了...

`id`顺便说一句，将 an用于您想要的输入可能是一个更好的主意。这应该使它独一无二：

```
<input type="text" class="studno" id="myinput"> 
```

然后检索它的值：

```
$('#myinput').val(); 
```

# php - 获取最大数组计数

> ID：11175591
> 
> 赞同：1
> 
> 时间：2012-06-24T07:02:19.820
> 
> 标签：php, arrays

您好需要帮助从给定数组中获取重复值，下面是我尝试获取最大值的代码`$values[4]`

```
$values = array(
    "0"=> "abc",
    "1"=> "aaa",
    "2"=> "aaa|abc",
    "3" =>  "| | | | | | | | | | | | | | | | ",
    "4" => "a|b|b|c|d|e|f|g",
    "5" => "1|2|3||4|5|6"
);

foreach ($values as $key) {
$prevalues = explode('|', $key);
$count[] = count($prevalues);
}
 print_r($counts);
 $counts = array_count_values($count);
 arsort($counts);
 echo $max= key($counts);

Array
 (
    [0] => 1
    [1] => 1
    [2] => 2
    [3] => 17
    [4] => 8
    [5] => 8
)
print_r($max ); 
```

目前，我得到 $max = 1; 我需要 $max 为 8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:21:48.147

如果您已经拥有包含值的数组 $counts，并且您只需要像我想您所问的那样在数组中找到最大值，那么 php 中已经有一个内置函数。

```
$max = max($counts); 
```

$max 将等于 17。

文档： http: [//php.net/manual/en/function.max.php](http://php.net/manual/en/function.max.php)

关于根据您对 ibrainsreed 的评论在数组中查找必须重复的值：

您可以使用 array_count_values()。

```
$valueCount = array_count_values($counts);
print_r($valueCount); 
```

会输出：

```
Array
(
    [1] => 2
    [2] => 1
    [17] => 1
    [8] => 2 
) 
```

从那里您可以使用该数据来满足您的需求。
文档： http: [//php.net/manual/en/function.array-count-values.php](http://php.net/manual/en/function.array-count-values.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T07:28:30.363

为什么不：

```
foreach ($values as $key=>$value)
    $max = max(substr_count($value,'|')+1,$max);

echo $max; 
```

没有数组拆分或存储数组。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T07:19:37.977

您可以使用`max()`来查找数组中的最大值，这是一个示例

```
echo max(array(1, 5, 7, 2, 3)); 
```

这应该给你`17`

```
foreach ($values as $item)
{
    $temp[] = substr_count($item, "|") + 1;
}

echo max($temp); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T07:22:14.070

您可能可以使用`substr_count($key,'|')+1`而不是`explode`.

**编辑：**我在想我不太清楚这个问题，也许你能写得更清楚吗？你为什么要使用这个`key`功能？

# php - 如何将 php 变量传递给 .php 包含？

> ID：11175594
> 
> 赞同：0
> 
> 时间：2012-06-24T07:02:44.220
> 
> 标签：php, wordpress, variables, include

我有一个文件，可以说它是 index.php，其中文件的开头包含“include.php”。在 include.php 中，我设置了一个像这样的变量：

```
<?php $variable = "the value"; ?> 
```

然后在 index.php 中进一步向下，我有另一个包含，比如“include2.php”，它是这样包含的：

```
<?php include(get_template_directory_uri() . '/include2.php'); ?> 
```

如何在“include2.php”中调用我在第一个包含中设置的“$variable”？

我使用的确切代码如下：

index.php 的第一行我有这一行

```
<?php include('switcher.php'); ?> 
```

在 switcher.php 里面我有这个

```
<?php $GLOBALS["demo_color"] = "#fffffe"; ?> 
```

如果我在 index.php 中使用它，它可以工作

```
<?php echo $GLOBALS["demo_color"]; ?> 
```

但是，如果我使用以下代码包含另一个 php 文件

```
<?php include(get_template_directory_uri() . '/demo_color.php'); ?> 
```

然后在 demo_color.php 我有这个代码：

```
<?php echo "demo color:" . $GLOBALS["demo_color"]; ?> 
```

它输出的唯一内容是“演示颜色：”

*为代码格式化而编辑*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T07:07:07.980

它*可以*简单地用在 include2.php 中，除非 include.php 的包含发生在不同的范围内（即在函数调用内）。[看这里](http://php.net/manual/en/language.variables.scope.php)。

如果您想完全明确在应用程序中使用该变量的意图，请使用其名称的 $GLOBALS["variable"] 版本，它*始终*指向`variable`在全局范围内调用的变量。

**编辑**：我对 php 5.3.10 进行了测试以重建它：

```
// index.php
<?php
include("define.php");
include("use.php");

// define.php
$foo = "bar";

// use.php
var_dump($foo); 
```

这完全按预期工作，输出 string(3) "bar"。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T07:25:25.033

```
<?PHP
//index.php
$txt='hello world';
include('include.php');

<?PHP
//include.php
echo $txt; //will output hello world 
```

所以它确实有效。虽然似乎有一个更大的问题，因为这在未来可能难以维护。只是将变量放入全局命名空间并在不同的文件中使用它并不是最佳实践。

为了使代码更易于维护，使用类可能是一个想法，这样您就可以附加您需要显式的变量，而不仅仅是使用它们。因为周围的代码没有显示出来，所以不清楚你的确切需求是什么，但很可能代码可以放在类、函数等中。如果它是一个模板，你可以考虑一个显式的 set() 函数来发送变量数据到模板并在那里提取（）它。

编辑：

此外，根据信息，首先将您的 error_reporting 设置为 E_ALL 并将 display_errors 设置为 1。因此，您会收到所有错误，因为您在更新的问题中放置的信息表明缺少变量被用作常量，这应该会引发错误这个地方。

# asp.net-web-api - API 上的域逻辑

> ID：11175598
> 
> 赞同：0
> 
> 时间：2012-06-24T07:04:10.743
> 
> 标签：asp.net-web-api

我正在为系统设计一个公共 API。我怀疑我应该将计算或域逻辑放在哪里，它应该驻留在 API 上还是在将使用它的客户端上？

假设我们有一个银行系统，我应该将计算现金金额的逻辑放在哪里？消费者是否应该只调用 API 的 Deposit 方法，让 API 处理计算？

API 将使用 ASP.NET WebApi 构建

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:32:44.663

不确定我是否完全理解您的问题，但业务逻辑应该由 API 处理（我想知道反过来会如何）。

从实现的角度来看，您应该将它们作为服务来处理以解耦系统，以便您可以轻松地对其进行单元测试。例如，以下是您的`CalcService`：

```
public interface ICalcService { 

    double Calc(double left, double right);
}

public class CalcService : ICalcService {

    public double Calc(double left, double right) { 

        return (left + right);
    }
} 
```

然后，应该将该服务注入您的控制器，如下所示：

```
public DepositController : ApiController { 

    private readonly ICalcService _calcService;

    public DepositController(ICalcService calcService) { 

        _calcService = calcService;
    }

    //now, you can use the _calcService inside your action methods
} 
```

为了让它工作，你应该通过你的 IoC 容器注册你的服务。

# android - 如何使用 Android 中的加速度计测量手机在 XY 平面上的倾斜度

> ID：11175599
> 
> 赞同：36
> 
> 时间：2012-06-24T07:04:20.957
> 
> 标签：android, accelerometer, plane, tilt

我尝试使用 SensorEvent.values 中的 Z 轴数据，但它没有检测到我的手机在 XY 平面上的旋转，即。围绕 Z 轴。

我将其用作坐标轴的参考。这是对的吗？

![轴](../Images/700a9e88dd537ad9cf76665c591a2194.png)

如何使用加速度计值测量该运动？

这些游戏做类似的事情：[极限滑板](https://play.google.com/store/apps/details?id=com.miniclip.extremeskater&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5taW5pY2xpcC5leHRyZW1lc2thdGVyIl0.)，涂鸦跳跃。

PS：我的手机方向是横向的。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-03-01T02:23:39.437

本质上，这里有两种情况：设备平放而不是平放。这里的平面是指设备屏幕表面与世界 xy 平面之间的角度（我称之为倾角）小于 25 度或大于 155 度。想象一下手机平放或从桌子上稍微倾斜一点。

首先，您需要标准化加速度计矢量。
也就是说，如果**g**是加速度计传感器事件值返回的向量。在代码中

```
float[] g = new float[3]; 
g = event.values.clone();

double norm_Of_g = Math.sqrt(g[0] * g[0] + g[1] * g[1] + g[2] * g[2]);

// Normalize the accelerometer vector
g[0] = g[0] / norm_Of_g
g[1] = g[1] / norm_Of_g
g[2] = g[2] / norm_Of_g 
```

那么倾角可以计算为

```
int inclination = (int) Math.round(Math.toDegrees(Math.acos(g[2]))); 
```

因此

```
if (inclination < 25 || inclination > 155)
{
    // device is flat
}
else
{
    // device is not flat
} 
```

对于平放的情况，您必须使用指南针查看设备从起始位置旋转了多少。

对于不平坦的情况，旋转（倾斜）计算如下

```
int rotation = (int) Math.round(Math.toDegrees(Math.atan2(g[0], g[1]))); 
```

现在旋转 = 0 表示设备处于正常位置。对于大多数手机来说，这是没有任何倾斜的纵向，对于平板电脑来说可能是横向。因此，如果您像上图那样握住手机并开始旋转，旋转会改变，当手机处于横向时，旋转将是 90 或 -90，具体取决于旋转方向。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-02-25T20:10:32.907

加速度计足以检查手机是否平坦，正如 Hoan 很好地展示的那样。

对于到达这里的人来说，不仅要检查手机是否平整，还要检查手机的旋转情况，可以通过[旋转矢量运动传感器](https://developer.android.com/guide/topics/sensors/sensors_motion.html#sensors-motion-rotate)来实现。

```
private double pitch, tilt, azimuth;

@Override
public void onSensorChanged(SensorEvent event) {
    //Get Rotation Vector Sensor Values
    double[] g = convertFloatsToDoubles(event.values.clone());

    //Normalise
    double norm = Math.sqrt(g[0] * g[0] + g[1] * g[1] + g[2] * g[2] + g[3] * g[3]);
    g[0] /= norm;
    g[1] /= norm;
    g[2] /= norm;
    g[3] /= norm;

    //Set values to commonly known quaternion letter representatives
    double x = g[0];
    double y = g[1];
    double z = g[2];
    double w = g[3];

    //Calculate Pitch in degrees (-180 to 180)
    double sinP = 2.0 * (w * x + y * z);
    double cosP = 1.0 - 2.0 * (x * x + y * y);
    pitch = Math.atan2(sinP, cosP) * (180 / Math.PI);

    //Calculate Tilt in degrees (-90 to 90)
    double sinT = 2.0 * (w * y - z * x);
    if (Math.abs(sinT) >= 1)
        tilt = Math.copySign(Math.PI / 2, sinT) * (180 / Math.PI);
    else
        tilt = Math.asin(sinT) * (180 / Math.PI);

    //Calculate Azimuth in degrees (0 to 360; 0 = North, 90 = East, 180 = South, 270 = West)
    double sinA = 2.0 * (w * z + x * y);
    double cosA = 1.0 - 2.0 * (y * y + z * z);
    azimuth = Math.atan2(sinA, cosA) * (180 / Math.PI);
}

private double[] convertFloatsToDoubles(float[] input)
{
    if (input == null)
        return null;

    double[] output = new double[input.length];

    for (int i = 0; i < input.length; i++)
        output[i] = input[i];

    return output;
} 
```

然后要检查手机是否平坦，您只需将`tilt`和`pitch`值与容差值进行比较。例如

```
public boolean flatEnough(double degreeTolerance) {
    return tilt <= degreeTolerance && tilt >= -degreeTolerance && pitch <= degreeTolerance && pitch >= -degreeTolerance;
} 
```

这样做的好处是您可以检查手机是否处于任何特定的旋转状态。

值得注意的是，应用程序的方向不会影响俯仰、倾斜和方位角的值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-25T03:20:32.860

@Dan 的完美回应

他错过了@davy307 指出的一点点信息。

初始化 mAccelerometer 时，必须将其定义为**Sensor.TYPE_ROTATION_VECTOR**否则，它将没有第 3 个旋转向量并抛出 ArrayIndexOutOfBounds 异常。

```
mSensorManager = (SensorManager)getSystemService(Context.SENSOR_SERVICE);
mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ROTATION_VECTOR); 
```

否则，这是一个完美的解决方案......赞赏！

# javascript - 向 dijit 对话框添加内容

> ID：11175601
> 
> 赞同：1
> 
> 时间：2012-06-24T07:04:49.920
> 
> 标签：javascript, dojo

我查看了很多链接，供人们尝试添加内容/更改 Dojo 对话框的模板。[这是最有希望的。](http://dojo-toolkit.33424.n3.nabble.com/How-to-extend-dijit-Dialog-td2738779.html)

但是，每当我做这样的事情时：

在 HTML 中声明的对话框：

```
<div class="djDialog" id="dgViewer" data-dojo-type="TemplatedDialog" data-dojo-props="title: 'My Dialog', draggable:false"></div> 
```

对话框模板：

```
<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">
    <div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">
        <span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"></span>
        <span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabIndex="-1">
            <span data-dojo-attach-point="closeText" class="closeText" title="${buttonCancel}">x</span>
        </span>
    </div>
    <!-- containerNode from original Dialog template -->
    <div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent">
        <!-- All "custom" content -->
        <div data-dojo-type="dijit.layout.BorderContainer" data-dojo-props="design:'headline'" style="height:300px">
            <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region:'center'">

            </div>
            <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region:'top'">
                <button data-dojo-type="dijit.form.Button">Edit</button>
                <button data-dojo-type="dijit.form.Button">Status</button>
            </div>
        </div>
        <!-- End "custom" content -->
    </div>
</div> 
```

自定义对话框类：

```
define([
    'dojo/_base/declare',
    'dijit/Dialog', 
    'dijit/_TemplatedMixin',
    'dojo/text!./dialog_templates/View.html'], 
    function(
        declare, 
        Dialog, 
        _Mixin,
        _template){
    return declare('TemplatedDialog', [Dialog, _Mixin], {    
        templateString : _template,
        constructor : function(){

        }
    })
}) 
```

在我的控制台（使用 Chrome）中，我只看到：

```
<div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent" style="width: auto; height: auto; "></div> 
```

*...和内容应该*在的空节点。

到目前为止，我还没有找到任何人似乎已经成功地扩展了 dijit.Dialog 的模板。这可能吗？

**编辑**

在尝试了这个模板的一些变化之后：

```
<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">
    <div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">
        <span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"></span>
        <span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabIndex="-1">
            <span data-dojo-attach-point="closeText" class="closeText" title="${buttonCancel}">x</span>
        </span>
    </div>
    <!-- containerNode from original Dialog template -->
    <div class="dijitDialogPaneContent">
        <div data-dojo-type="dijit.layout.BorderContainer" data-dojo-props="design:'headline'" style="height:100%;width:100%">
            <div data-dojo-attach-point="containerNode" data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region:'center'"></div>
        </div>
        <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region:'bottom'">
            <button data-dojo-type="dijit.form.Button">Edit</button>
        </div>
    </div>
</div> 
```

错误`Uncaught TypeError: Cannot read property '0' of undefined`被抛出。这是堆栈，如果有帮助的话。我正在使用来自 Google CDN 的未压缩版本来帮助调试。

```
_childElements          dojo.js.uncompressed.js:8341
getStepQueryFunc        dojo.js.uncompressed.js:8597
query                   dojo.js.uncompressed.js:9005
query                   dojo.js.uncompressed.js:5248
_2._checkIfSingleChild  _ContentPaneResizeMixin.js:2
_4._size                Dialog.js:2
_4.show                 Dialog.js:2 
```

删除`data-dojo-type`and解决`-props`了`containerNode`这个问题，但它仍然没有让事情更接近于拥有一个工作的自定义模板化对话框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T16:55:45.100

**在内容窗格上进行模板化的原因是，无论您放入使用附加点'containerNode'**引用的 domNode 中的任何模板内容，您都会在启动时松动。

如果没有设置 'href' 和 'content' 属性，它们将被简单地设置为一个空字符串，从而留下`Dialog.containerNode.innerHTML == ""`

您无需从 _TemplatedMixin 派生，因为 Dialog 本身就是一个模板化的小部件。而是将其更改为 _WidgetsInTemplateMixin 以补偿 BorderContainer 布局小部件和您的 dijit.form 内容。此外，您在自定义模板中的标记应该是预先要求的，因此您可以在此处使用类似的内容：

将模板从容器的旧附加点更改为此

```
<div data-dojo-attach-point="containerNode" 
     data-dojo-type="dijit.layout.ContentPane"
     data-dojo-props="region:'center'"> 
```

然后将要求添加到模板中的标记小部件**以及**`_WidgetsInTemplateMixin`：

```
define(["dijit/Dialog",
    "dijit/_WidgetsInTemplateMixin",
    "dojo/text!./dialog_templates/View.html",
    // rest are for rendering example
    "dijit/layout/BorderContainer",
    "dijit/layout/ContentPane",
    "dijit/form/Button"
}. ... ); 
```

结果应该与此类似，记住您的模板 View.html 更改：

```
define([
    'dojo/_base/declare',
    'dijit/Dialog', 
    "dijit/_WidgetsInTemplateMixin",
    "dojo/text!./dialog_templates/View.html",
        // rest are for rendering example
    "dijit/layout/BorderContainer",
    "dijit/layout/ContentPane",
    "dijit/form/Button"], 
    function(
        declare, 
        Dialog, 
        _Mixin,
        _template){
    return declare('TemplatedDialog', [Dialog, _Mixin /*careful, widgetsintemplate is tricky*/ ], {    
        templateString : _template
    })
}) 
```

你可以[在这里摆弄](http://jsfiddle.net/seeds/AErEW/1/)

编辑：

由于包含边框布局的对话框存在问题（无论如何都不是闻所未闻），因此有一个解决方法：

```
 _checkIfSingleChild: function() {
        delete this._singleChild;
       domClass.toggle(this.containerNode, this.baseClass + "SingleChild", !!this._singleChild);

    },
    templateString: '....' 
```

我不确定后果，我认为如果您尝试以编程方式更改其内容和尺寸，您的边框布局可能会开始行为不端。但它会呈现 - 至少在这里会呈现：[更新的小提琴](http://jsfiddle.net/seeds/AErEW/3/)

# python - python lambdas 的实现方式与标准函数不同吗？

> ID：11175603
> 
> 赞同：7
> 
> 时间：2012-06-24T07:05:07.900
> 
> 标签：python, function, lambda

在尝试为另一个 SO 问题写答案时，发生了一件非常奇怪的事情。

我基本上想出了一个单线 gcd 并说`it maybe slower because of recursion`
`gcd = lambda a,b : a if not b else gcd(b, a % b)`

这是一个简单的测试：

```
assert gcd(10, 3) == 1 and gcd(21, 7) == 7 and gcd(100, 1000) == 100 
```

这里有一些基准：

```
timeit.Timer('gcd(2**2048, 2**2048+123)', setup = 'from fractions import gcd').repeat(3, 100)
# [0.0022919178009033203, 0.0016410350799560547, 0.0016489028930664062]
timeit.Timer('gcd(2**2048, 2**2048+123)', setup = 'gcd = lambda a,b : a if not b else gcd(b, a % b)').repeat(3, 100)
# [0.0020480155944824219, 0.0016460418701171875, 0.0014090538024902344] 
```

嗯，这很有趣，我预计会慢得多，但时间相当接近，？也许导入模块是问题...

```
>>> setup = '''
... def gcd(a, b):
...     """Calculate the Greatest Common Divisor of a and b.
... 
...     Unless b==0, the result will have the same sign as b (so that when
...     b is divided by it, the result comes out positive).
...     """
...     while b:
...         a, b = b, a%b
...     return a
... '''
>>> timeit.Timer('gcd(2**2048, 2**2048+123)', setup = setup).repeat(3, 100)
[0.0015637874603271484, 0.0014810562133789062, 0.0014750957489013672] 
```

不，仍然相当接近时间确定让我们尝试更大的值。

```
timeit.Timer('gcd(2**9048, 2**248212)', setup = 'gcd = lambda a,b : a if not b else gcd(b, a % b)').repeat(3, 100) [2.866894006729126, 2.8396279811859131, 2.8353509902954102]
[2.866894006729126, 2.8396279811859131, 2.8353509902954102]
timeit.Timer('gcd(2**9048, 2**248212)', setup = setup).repeat(3, 100)
[2.8533108234405518, 2.8411397933959961, 2.8430981636047363] 
```

有趣我想知道发生了什么事？
由于调用函数的开销，我一直认为递归较慢，lambdas 是例外吗？为什么我还没有达到我的递归限制？
如果使用`def`我立即点击它来实现，如果我将递归深度增加到类似于`10**9`我实际上`segmentation fault`可能得​​到堆栈溢出的东西......

**更新**

```
>>> setup = '''
... import sys
... sys.setrecursionlimit(10**6)
... 
... def gcd(a, b):
...     return a if not b else gcd(b, a % b)
... '''
>>> 
>>> timeit.Timer('gcd(2**9048, 2**248212)', setup = 'gcd = lambda a,b:a if not b else gcd(b, a%b)').repeat(3, 100)
[3.0647969245910645, 3.0081429481506348, 2.9654929637908936]
>>> timeit.Timer('gcd(2**9048, 2**248212)', setup = 'from fractions import gcd').repeat(3,   100)
[3.0753359794616699, 2.97499680519104, 3.0096950531005859]
>>> timeit.Timer('gcd(2**9048, 2**248212)', setup = setup).repeat(3, 100)
[3.0334799289703369, 2.9955930709838867, 2.9726388454437256]
>>> 
```

更令人费解...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T09:01:57.080

```
counter = 0

def gcd(a, b):
    global counter
    counter += 1
    return a if not b else gcd(b, a % b)

gcd(2**9048, 2**248212)
print counter 
```

打印`3`。当然，深度为 3 的递归并没有太多开销。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-24T07:13:58.457

lambda 的类型与任何其他函数的类型完全相同，并且在两者的情况下，如果在另一个本地范围内定义，则会发生环境捕获。

唯一的区别是使用 lambda 语法定义的函数不会自动成为变量出现的范围内的值，并且 lambda 语法要求主体是一个（可能是复合的）表达式，其值被返回从功能上。

至于递归的速度 - 是的，有一点开销，但显然没有那么多。调用开销似乎主要来自分配堆栈帧的成本。

# uml - 需要了解实例级别关系

> ID：11175604
> 
> 赞同：0
> 
> 时间：2012-06-24T07:05:34.783
> 
> 标签：uml, class-diagram, object-relationships

我需要了解 UML 中的实例级别关系。我已经阅读了几份关于此的文件，但并不满意。我仍然对聚合，组合等感到困惑。

我知道你们中的一些人可能会觉得这不是提出这类问题的正确地方，但我想不出比这里更好的地方了。

请在这里帮助我。

谢谢，
山塔努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:10:06.563

也许，如果你不能在更高层次上掌握它，你可以看到这种关系是如何在一种单独的语言中实现的？不确定它是否适合你的学习风格，但它确实帮助我从更“具体”的角度看待 UML。试试这个（问题 5-8）：http: [//java-questions.com/oops_interview_questions.html](http://java-questions.com/oops_interview_questions.html)

# php - 在php中读取二进制文件并将其转换为字符串

> ID：11175609
> 
> 赞同：0
> 
> 时间：2012-06-24T07:06:18.867
> 
> 标签：php, file, binary

我为此花了将近一天的时间，但没有成功。

我想做的是，我有一个二进制文件“data.dat”

我想读取文件内容并以文本格式在 php 中以“data.txt”输出。

我尝试了 php 的 unpack 函数，但需要将类型作为第一个参数提及（可能是我错了，php 新手）。

```
$data = fread($file, 4); // 4 is the byte size of a whole on a 32-bit PC.     
$content= unpack("C", $data);    //C for unsigned charecter , i for int and so on... 
```

但是，如果我不知道在什么地方，我正在阅读的文件中存储了什么类型的数据怎么办？

由于类型的原因，此功能限制了我。

我想要类似的东西

```
$content= unpack("s", $data);   //where s can denote to string 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T07:25:19.653

PHP 没有“二进制”类型。二进制数据存储在字符串中。如果您从文件中读取二进制数据，它已经存储为字符串。您不需要将其转换为字符串。

如果二进制数据已经以某种标准编码表示文本，则您无需执行任何操作，因为您已经有了一个有效的字符串。如果二进制数据代表某种编码，你需要知道你需要用它做什么，我们不知道。

# ios - 按像素创建图像视图

> ID：11175620
> 
> 赞同：0
> 
> 时间：2012-06-24T07:09:08.870
> 
> 标签：ios, uiimageview, bmp

我想创建一个包含 uiimageview 和按钮的 iOS 应用程序，以便当用户点击按钮时，图像视图由一组 2 个嵌套的 while 循环生成，这些循环为 uiimageview 设置像素。我可以很容易地在 C 中使用位图执行此操作，但我不确定如何为 iOS 处理此操作我可以将位图保存到 NSUserDefaults 并从那里加载吗？不确定，谢谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T07:39:32.877

`UIImageView`与 一起使用`UIImage`，它`UIKit`是`CGImage`. 在任何情况下，您都应该拥有 a`CGImage`或`UIImage`. 你能做什么？使用 CoreGraphics 和/或 UIKit 的绘图方法动态绘制图像（查看[Quartz2D 编程指南](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/Introduction/Introduction.html)）。或者，如果您可以拥有图像的原始字节数据，则可以直接创建一个`UIImage`实例：

```
NSData *imgData = [[NSData alloc] initWithBytes:(const void*)myByteArray length:sizeof(myByteArray)];
UIImage *img = [[UIImage alloc] initWithData:imgData]; 
```

然后只需设置你`UIImageView`的`image`属性：

```
self.myImageView.image = img; 
```

# c++ - char (*(*a[4])())[5] 是什么意思？

> ID：11175623
> 
> 赞同：7
> 
> 时间：2012-06-24T07:09:35.603
> 
> 标签：c++

嗨，我在“测试你的 C++ 技能”中遇到了这个问题。

请让我知道一个例子是什么意思？

***已编辑部分***：抱歉多余的括号，已编辑和删除。

```
char (*(*a[4])())[5] 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-24T07:31:15.543

遵循螺旋规则（由 chris 链接），并从标识符开始：

```
a 
```

...是...

```
a[4] 
```

...一组 4 个...

```
*a[4] 
```

...指向...的指针

```
(*a[4])() 
```

...一个不带参数的函数...

```
*(*a[4])() 
```

...返回指向...的指针

```
(*(*a[4])())[5] 
```

...五个数组...

```
char (*(*a[4])())[5] 
```

...字符。

旁注：去给提出这个问题的架构师一个好的修饰，然后找到编写这个代码但没有注释解释它的程序员，给*他*一个好的修饰。如果这是作为家庭作业给你的，请告诉你的老师，他应该指导你如何使用 cdecl，或者如何以一种看起来不像疯子潦草的方式设计代码，而不是浪费你的时间有了这个。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-24T07:15:28.790

我通过删除我认为是多余的右括号并将结果粘贴到[cdecl](http://cdecl.org/)中作弊。

`declare a as array 4 of pointer to function returning pointer to array 5 of char`

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-24T08:39:05.950

还有一个例子……除了一个例子之外永远不要做什么。

```
#include <iostream>

typedef char stuff[5];
stuff stuffarray[4] = { "This", "Is", "Bad", "Code" };

stuff* funcThis()   { return &(stuffarray[0]); }
stuff* funcIs()     { return &(stuffarray[1]); }
stuff* funcBad()    { return &(stuffarray[2]); }
stuff* funcCode()   { return &(stuffarray[3]); }

int main()
{
    char (*(*a[4])())[5] = { funcThis, funcIs, funcBad, funcCode };
    for(int i = 0; i < 4; ++i)
    {
        std::cout << *a[i]() << std::endl;
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-24T08:23:02.293

这是一个例子......

```
#include <stdio.h>

char a[5] = "abcd"; 
char b[5] = "bcde"; 
char c[5] = "cdef"; 
char d[5] = "defg"; 

char (*f1())[5] { return &a; }
char (*f2())[5] { return &b; }
char (*f3())[5] { return &c; }
char (*f4())[5] { return &d; }

int main()
{
        char (*(*a[4])())[5] = { &f1, &f2, &f3, &f4 };
        for (int i = 0; i < 4; i++)
                printf("%s\n", *a[i]());
        return 0;
} 
```

# java - 将默认 Java VM 更改为客户端

> ID：11175624
> 
> 赞同：3
> 
> 时间：2012-06-24T07:09:40.820
> 
> 标签：java, jvm, client, fedora

我在 Fedora 17 上安装了 Oracle 的 Java，我注意到在使用命令`java -version`时它会返回这个

```
java version "1.7.0_05"
Java(TM) SE Runtime Environment (build 1.7.0_05-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.1-b03, mixed mode) 
```

Java 似乎默认运行 -server 选项。帮助文本出现为

```
-server   to select the "server" VM
              The default VM is server,
              because you are running on a server-class machine. 
```

有什么办法可以将默认设置更改为客户端？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T08:31:26.660

默认设置在文件**jvm.cfg**中定义。像这样的内容

```
-client KNOWN
-server KNOWN 
```

将客户端定义为默认值。

```
-server KNOWN
-client KNOWN 
```

将服务器设置为默认值。

来源：[www.rgagnon.com/javadetails/java-0566.html](http://www.rgagnon.com/javadetails/java-0566.html)

### jvm.cfg 位置

未知的 Mac OS X 版本：

`/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home/jre/lib/jvm.cfg`

未安装 JDK 的 Mac OS X 版本 10.9：

`/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/jvm.cfg`

已安装 JDK 版本 1.8.0_u92 的 Mac OS X 版本 10.9：

`/Library/Java/JavaVirtualMachines/jdk1.8.0_92.jdk/Contents/Home/jre/lib/jvm.cfg`

* * *

^(您可以`jvm.cfg`使用 command 从命令行 (Terminal.app)找到您的`$ locate /jvm.cfg`。您可能需要先使用以下命令更新您的定位数据库：`$ sudo /usr/libexec/locate.updatedb`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T07:17:53.440

从[文档](http://docs.oracle.com/javase/1.5.0/docs/guide/vm/server-class.html)：

> 注意：对于 J2SE 5.0，服务器级机器的定义是具有至少 2 个 CPU 和至少 2GB 物理内存的机器。

所以似乎没有任何方法可以改变服务器级机器检测技术，我猜`-client`如果你的机器上需要它，你将不得不坚持传递 VM 参数。

另外值得注意的是，此页面适用于 Java 5，因此 Java 6 及更高版本可能会有所不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T08:54:22.370

从 Java 5 开始，您可以将其指定为 JVM 的一个选项：

*   该`-client`选项将使 VM 以客户端模式启动。在这种模式下，启动会快得多。
*   该`-server`选项将使VM以服务器模式启动。启动会慢一些，但从长远来看，它会执行得更快。

有关这两种模式差异的更多详细信息，请参阅[此问题](https://stackoverflow.com/q/198577/995822)。

如果您不指定这些选项，VM 将检查您是否至少有 2 个 CPU 和至少 2 GB RAM。如果这样做，那么它将以服务器模式启动。

您可以查看有关如何做出这些决定的表格：

*   [这里是 Java 5](http://docs.oracle.com/javase/1.5.0/docs/guide/vm/server-class.html)
*   [这里适用于 Java 6](http://docs.oracle.com/javase/6/docs/technotes/guides/vm/server-class.html)和
*   [这里是 Java 7](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/server-class.html)

仅供参考：它们都是一样的。

# javascript - Javascript资源未在ie7中加载

> ID：11175626
> 
> 赞同：0
> 
> 时间：2012-06-24T07:10:34.767
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-7, cross-browser

我有一大堆需要按顺序加载的 javascript 文件。但是，其中一个没有加载到 ie7 中。

这是执行加载的函数：

```
function loadScript(url, callback){
    var head = document.getElementsByTagName("head")[0];
    var script = document.createElement("script");
    script.src = url;

    // Attach handlers for all browsers
    var done = false;
    script.onload = script.onreadystatechange = function()
    {
            if( !done && ( !this.readyState 
                                    || this.readyState == "loaded" 
                                    || this.readyState == "complete") )
            {
                    done = true;

                    // Continue your code
                    callback();

                    // Handle memory leak in IE
                    script.onload = script.onreadystatechange = null;
                    head.removeChild( script );
            }
    };

    head.appendChild(script);
} 
```

函数调用：

```
loadScript('http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js',function(){
    loadScript('http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js',function(){
        loadScript('http://XXX/js/data.php?rand='+Math.random(),function(){
            loadScript('http://XXX/js/jquery.inject.js?rand='+Math.random(),function(){
                console.log('a');
                loadScript('XXX/js/press.js?rand='+Math.random(),function(){
                    console.log('b');
                    inject_press();
                });

            });
        });
    });
}); 
```

不加载我 jquery.inject.js 的文件，谁的代码是

```
console.log('y');

jQuery.prototype.inject = function(a){
    ...
} 
```

**这同样适用于除**ie7之外的所有浏览器。输出是

```
a
b 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:59:05.297

这不是加载 ECMAscript 文件的最佳方式。我会命名这些文件以对其进行排序，然后[使用 ASP.NET 4.5 捆绑](http://theshravan.net/bundling-and-minification-support-in-asp-net-mvc-4/)加载。

# android - 如何使用 achartengine 在 android 中显示多个图（折线图）？

> ID：11175628
> 
> 赞同：0
> 
> 时间：2012-06-24T07:11:00.020
> 
> 标签：android, android-layout, plot, achartengine

我是编程新手，因此是 android 编程新手。我正在制作一个 android 应用程序，我必须在其中以图形方式显示 eeg 数据（我的意思是动态地在其中不断接收数据并且图形不断更新，新值添加到右侧，旧值的图形移动到左侧并最终看不见）。现在我可以一次显示 1 个图，但如果我可以在一个屏幕上从上到下显示所有图（总共 14 个），那就太好了。现在可能无法同时查看 14 个图表，因此我可以添加滚动功能，以便一次可以看到一些图表，而通过向上或向下滑动可以看到其他图表。我正在使用 AChartengine 进行绘图。有没有办法通过滚动在单个屏幕上从上到下显示多个图？感谢您给我们时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:13:16.510

我想，即使您可以使用 a`ScrollView`在同一个活动/屏幕上放置许多图表，它也会过于沉重和混乱。为什么不对每个图使用不同的数据集来复用数据？这样你就可以只显示一些图表，数据比较会更直观......

您可以参考 achartengine 示例中的“平均温度”，以了解如何**将不同的系列**（数据集）放入同一个图表中。

无论如何，如果你真的想创建一个包含 14 个图表的“长”滚动屏幕，只需使用`ScrollView`这样的：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/ScrollViewChartContainer" android:layout_width="fill_parent" android:layout_height="fill_parent">

 <LinearLayout android:id="@+id/trendchart" android:layout_width="fill_parent" android:layout_height="match_parent" android:background="@android:color/transparent" android:orientation="horizontal" /> 
 <LinearLayout android:id="@+id/trendchart2" android:layout_width="fill_parent" android:layout_height="match_parent" android:background="@android:color/transparent" android:orientation="horizontal" /> 
 ...
</ScrollView> 
```

我没有测试过这样的布局，但它应该可以工作。

# jquery - 如何在 jQuery 中操作现有集合？

> ID：11175629
> 
> 赞同：1
> 
> 时间：2012-06-24T07:11:13.017
> 
> 标签：jquery

我有一个带有 jQ​​uery 集合的变量，如下所示：

```
$collection = $(".example"); 
```

这给了我一堆带有“示例”类的节点。

现在，我想操纵该集合并保留结果，我认为它会像这样工作：

```
$(".example", $collection).filter(":even").addClass("even"); 
```

不幸的是，这似乎不起作用。每当我给它添加一个任务时，就像这样：

```
$collection = $(".example", $collection).filter(":even").addClass("even"); 
```

我得到一个空集合。

我想要的最终结果是让 $collection 集合中的所有 .example 类偶数项都具有“偶数”类。我不想仅用偶数 .example 元素替换 $collection 的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T07:14:19.383

尝试：

```
$collection.filter(":even").addClass("even");
or
$(".example").filter(":even").addClass("even"); 
```

当您定义`$collection = $(".example");`您正在做的事情
`$(".example", $collection)`是在具有示例类的项目中查找具有示例类的项目。

更好的是：

```
$(".example:even").addClass("even"); 
```

......会更直接一点。

更新：

```
$collection.filter(":even").addClass("even"); 
```

这样做不会覆盖`$collection`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T07:14:45.637

如果您只是想为`even`html 中的偶数元素添加类，您可以使用它

```
$('.example:even').addClass('even'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T07:17:24.570

`$(".example", $collection)`选择节点**内**`.example`的类元素。尝试仅使用. **`$collection``$(".example")`**

# android - 获取 ListItem ContextMenu 中的选定项目

> ID：11175630
> 
> 赞同：4
> 
> 时间：2012-06-24T07:11:14.390
> 
> 标签：android, android-listview, android-contextmenu

我有一个 ListView，它在长按其中一个元素时创建一个 ContextMenu。如何找到在创建此上下文菜单的 ListView 中选择的元素（不是选定的 MenuItem）？这是我的代码：

```
list.setOnCreateContextMenuListener(new OnCreateContextMenuListener() {
    @Override
    public void onCreateContextMenu(ContextMenu menu, final View v,
            ContextMenuInfo menuInfo) {
        menu.setHeaderTitle("Actions");
        android.view.MenuItem remove = menu.add("Remove");
        final int selectedItem = ((ListView)v).getSelectedItemPosition();
        remove.setOnMenuItemClickListener(new OnMenuItemClickListener() {   
            @Override
            public boolean onMenuItemClick(android.view.MenuItem item) {
                doSomething(listAdapter.getItem(selectedItem)); // NPE here
                return true;
            }
        });
    }
}); 
```

请注意，我不想要从上下文菜单中选择的项目，而是触发此上下文菜单的 ListView 项目。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T07:18:04.000

您将需要`AdapterContextMenuInfo`它。

关注片段将帮助您

```
public boolean onContextItemSelected(MenuItem item) {
      AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
      String[] names = getResources().getStringArray(R.array.names);
      switch(item.getItemId()) {
      case R.id.edit:
            Toast.makeText(this, "You have chosen the " + getResources().getString(R.string.edit) +
                        " context menu option for " + names[(int)info.id],
                        Toast.LENGTH_SHORT).show();
            return true;
      …………………..
      default:
            return super.onContextItemSelected(item);
      } 
```

# iphone - 如何在 tableview 底部添加加载更多按钮？

> ID：11175634
> 
> 赞同：2
> 
> 时间：2012-06-24T07:11:59.897
> 
> 标签：iphone, objective-c, ios, uitableview

我想在末尾添加一个加载更多按钮`UITableview`。它与 Instagram 中的加载更多按钮具有相同的功能。这是图片。

![图片](../Images/7c1f5859526194a63f9774c5281d2fb4.png)

所以我的问题是如何在末尾添加它`UITableview`？由于 tableview 是可滚动的，我不知道如何给按钮一个动态位置。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T07:20:26.870

创建一个空的 UIView：`UIView *v = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 70)];` 创建你的按钮：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button setTitle:@"Load More" forState:UIControlStateNormal];
[button addTarget:self action:@selector(buttonLoadMoreTouched) forControlEvents:UIControlEventTouchUpInside];
[button sizeToFit]; 
```

将您的按钮添加为从 1 开始的视图的子视图。

```
[v addSubview:button]; 
```

将表的`tableFooterView`属性设置为从 1 开始的视图。

```
self.myTableView.tableFooterView = v; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T07:14:47.447

每个 UITableView 都有一个 footerView 属性。只需制作您的自定义 footerView 并设置属性

```
@property(nonatomic, retain) UIView *tableFooterView 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-24T08:31:05.713

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section 
```

您可以在上面的方法中添加您的按钮，并在下面的方法中将页脚设置为所需的大小

```
- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section 
```

希望这可以帮助。

# ruby-on-rails - Rails has_many 外键产生空数组

> ID：11175636
> 
> 赞同：2
> 
> 时间：2012-06-24T07:12:59.790
> 
> 标签：ruby-on-rails, activerecord, foreign-keys, has-many

当我测试一些代码时，我无法弄清楚我在里亚尔控制台中遇到的一些奇怪行为。

我的模型如下：

配置文件.rb

```
class Profile < ActiveRecord::Base
  belongs_to :user
  belongs_to :company

  attr_accessible :first_name, :last_name

  validates :first_name, presence: true
  validates :last_name, presence: true

end 
```

公司.rb

```
class Company < ActiveRecord::Base

  has_many :employees, :foreign_key => 'company_id', :class_name => "Profile"
  attr_accessible :name
  validates :name,  presence: true, length: { maximum: 50 }, uniqueness: true

end 
```

我进入 rails 控制台

```
$rails c --sandbox 
```

然后测试下面的代码

```
:001 > company = Company.find(2)
Company Load (4.2ms)  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ?     LIMIT 1  [["id", 2]]
 => #<Company id: 2, name: "Jet Star", created_at: "2012-06-24 04:12:50", updated_at:  "2012-06-24 04:12:50"> 
:002 > employee = Profile.find(5)
Profile Load (0.1ms)  SELECT "profiles".* FROM "profiles" WHERE "profiles"."id" = ? LIMIT 1  [["id", 5]]
=> #<Profile id: 5, user_id: 5, first_name: "Douglas", last_name: "Reed", created_at: "2012-06-17 15:05:58", updated_at: "2012-06-17 15:05:58", deleted: false, company_id: nil> 
:003 > employee.company = company
=> #<Company id: 2, name: "Jet Star", created_at: "2012-06-24 04:12:50", updated_at: "2012-06-24 04:12:50"> 
:004 > employee.company
=> #<Company id: 2, name: "Jet Star", created_at: "2012-06-24 04:12:50", updated_at: "2012-06-24 04:12:50"> 
:005 > employee
=> #<Profile id: 5, user_id: 5, first_name: "Douglas", last_name: "Reed", created_at:  "2012-06-17 15:05:58", updated_at: "2012-06-17 15:05:58", deleted: false, company_id: 2> 
:006 > company.employees
Profile Load (0.2ms)  SELECT "profiles".* FROM "profiles" WHERE "profiles"."company_id" = 2
=> [] 
:007 > Profile.find_by_company_id(2)
Profile Load (0.2ms)  SELECT "profiles".* FROM "profiles" WHERE "profiles"."company_id" = 2 LIMIT 1
 => nil 
:008 > employee.save
(0.1ms)  SAVEPOINT active_record_1
(0.4ms)  UPDATE "profiles" SET "company_id" = 2, "updated_at" = '2012-06-24 07:35:14.525138' WHERE "profiles"."id" = 5
(0.0ms)  RELEASE SAVEPOINT active_record_1
=> true 
:009 > company.employees
=> []  
:010 > Profile.find_by_company_id(2)
  Profile Load (0.2ms)  SELECT "profiles".* FROM "profiles" WHERE "profiles"."company_id" = 2 LIMIT 1
=> #<Profile id: 5, user_id: 5, first_name: "Douglas", last_name: "Reed", created_at: "2012-06-17 15:05:58", updated_at: "2012-06-24 07:35:14", deleted: false, company_id: 2> 
```

如果您查找个人资料记录，它会显示 company_id，但是当您搜索具有该 ID 的员工（个人资料）时，不会返回任何内容。

那么为什么 company.employees 不返回列表呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T08:24:27.023

尝试这个：

```
company.reload
company.employees 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T07:25:23.613

写入 'employee.company =company' 只会在内存中设置员工的公司 ID。当您查询 company.employee 时，它​​会搜索employee 表（在磁盘上），但由于尚未提交更改，因此找不到那里的 id。

# c# - 使用 QueryOver 更新 N 列表的 N-1 列 （） 方法

> ID：11175638
> 
> 赞同：-2
> 
> 时间：2012-06-24T07:13:31.037
> 
> 标签：c#, nhibernate, queryover

我只想使用 NHibernate QueryOver 语法更新包含 N 列的表中的 N-1 列。

我试过的查询是这样的。

```
 public T UpdatePost(Object DateUpdated, object DateExpires, object Id)
    {
        using (var session=sessionFactory.OpenSession())
        {
            using (var transaction=session.BeginTransaction())
            {
                session.Update(DateUpdated, Id);
                session.Update(DateExpires, Id);
                transaction.Commit();
                return session.Get<T>(Id);
            }
        }
    } 
```

调用方法是

```
obj.UpdatePost(DateTime.Now, DateTime.Now.AddDays(30), 3); 
```

错误是

> 你的映射有问题。您可能正在尝试将 System.ValueType 映射到 NHibernate 不允许的，或者您错误地使用了映射到 . ValueType (System.DateTime) 不能与 IdentityKey 一起使用。

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T07:54:10.253

你的`UpdatePost`方法没有意义。NHibernate`session.Update`需要一个应该更新的实体对象。您尝试使用的重载文档是：

> 更新与给定标识符关联的持久状态。

第一个参数应该是一个完整的实体对象。

如果您尝试分析您的代码，NHibernate 无法知道您要更新哪个实体。`Update`方法不是通用的，`Session`. 您只是想给它一个日期值和一个 ID。NHibernate 怎么知道要更新哪个表和哪个列？

为了使用 NHibernate 进行部分更新，您需要使用[HQL 更新查询](http://www.nhforge.org/doc/nh/en/index.html#batch-direct)（DML 样式的操作）。

以下是您的情况：

```
public T UpdatePost(Object DateUpdated, object DateExpires, object Id)
{
    using (var session=sessionFactory.OpenSession())
    {
        using (var transaction=session.BeginTransaction())
        {
            string hqlUpdate = 
                 "update Post p set p.DateUpdated = :dateUpdated, p.DateExpires = :dateExpires where p.id = :id";
            session.CreateQuery(hqlUpdate)
                   .SetDateTime("dateUpdated", DateUpdated)
                   .SetDateTime("dateExpires", DateExpires)
                   .SetParameter("id", Id)
                   .ExecuteUpdate();
            transaction.Commit();
            return session.Get<T>(Id);
        }
    }
} 
```

附带说明一下，由于您在更新后已经获取了实体本身，因此您可以简单地先加载实体，更改其属性并保存它。您仍然会有两个数据库操作。

```
public T UpdatePost(DateTime DateUpdated, DateTime DateExpires, object Id)
{
    using (var session=sessionFactory.OpenSession())
    {
        using (var transaction=session.BeginTransaction())
        {
            T post = session.Get<T>(Id);
            post.DateUpdated = DateUpdated;
            post.DateExpires = DateExpires;
            session.Update(post);
            transaction.Commit();
            return post;
        }
    }
} 
```

如果你*真的*想强制 NHibernate 只更新被改变的列，你可以在[类映射声明](http://www.nhforge.org/doc/nh/en/index.html#mapping-declaration-class)中指定 dynamic-update="true" 。

> **动态更新（可选，默认为 false）**：指定 UPDATE SQL 应在运行时生成，并且仅包含值已更改的那些列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:07:52.427

这将是最佳解决方案，因为 SetDateTime 仅接受 DateTime 类型作为其参数值。并且在一般声明此方法时，我们必须根据其实体类型格式化查询。

```
public T UpdatePost(DateTime DateUpdated, DateTime DateExpires, object Id) <-- DateTime parameters
        {
            using (var session = sessionFactory.OpenSession())
            {
                using (var transaction = session.BeginTransaction())
                {
                    string hqlUpdate = string.Format(
                 "update {0} p set p.DateUpdated = :dateUpdated, p.DateExpires = :dateExpires where p.id = :id", typeof(T)); <-- passing the type of the entity.
                    session.CreateQuery(hqlUpdate)
                           .SetDateTime("dateUpdated",DateUpdated)
                           .SetDateTime("dateExpires", DateExpires)
                           .SetParameter("id", Id)
                           .ExecuteUpdate();
                    transaction.Commit();
                    return session.Get<T>(Id);
                }
            }
        } 
```

# c++ - 柏林噪音问题

> ID：11175642
> 
> 赞同：0
> 
> 时间：2012-06-24T07:14:01.317
> 
> 标签：c++, terrain, perlin-noise, heightmap

我创建了一个 Perlin 噪声函数。我的问题是，当我从噪声中生成地形图时，它最终会变成块状，与我见过的云状图像完全不同。我很好奇我做错了什么（如果有的话）。这是我的代码：

**主文件**

```
#include "PerlinNoise.h"
#include <stdio.h>
#include <SDL/SDL.h>

void DrawPixel(SDL_Surface *screen, int x, int y, Uint8 R, Uint8 G, Uint8 B);
SDL_Surface *Render_Noise(int w, int h, int r, int g, int b);
PerlinNoise noiseGen(2,.5,25);

int main(int argc, char **argv)
{
    SDL_Init(SDL_INIT_EVERYTHING);
    SDL_Surface *screen = SDL_SetVideoMode(500,500,32,SDL_SWSURFACE);
    SDL_Surface *noise = Render_Noise(500,500,255,255,255);

    SDL_SaveBMP(noise, "noise.bmp");

    bool quit = false;

    while(!quit)
    {
        SDL_Event e;

        SDL_WaitEvent(&e);

        switch(e.type)
        {
        case SDL_QUIT:
            quit = true;
        }

        SDL_BlitSurface(noise,NULL,screen,NULL);
        SDL_Flip(screen);
        SDL_Delay(2000);
    }

    SDL_FreeSurface(noise);
    SDL_Quit();

    return 0;
}

void DrawPixel(SDL_Surface *screen, int x, int y, Uint8 R, Uint8 G, Uint8 B)
{
    Uint32 color = SDL_MapRGB(screen->format, R, G, B);

    if(SDL_MUSTLOCK(screen))
    {
        if(SDL_LockSurface(screen) < 0)
        {
            return;
        }
    }

    switch(screen->format->BytesPerPixel)
    {
    case 1:
        {
        Uint8 *bufp;

        bufp = (Uint8 *)screen->pixels + y*screen->pitch + x;
        *bufp = color;
        }
        break;

    case 2:
        {
        Uint16 *bufp;
        bufp = (Uint16 *)screen->pixels + y*screen->pitch/2 + x;
        *bufp = color;
        }
        break;

    case 3:
        {
        Uint8 *bufp;

        bufp = (Uint8 *)screen->pixels + y*screen->pitch + x;
        *(bufp+screen->format->Rshift/8) = R;
        *(bufp+screen->format->Bshift/8) = B;
        *(bufp+screen->format->Gshift/8) = G;
        }
        break;

    case 4:
        {
        Uint32 *bufp;

        bufp = (Uint32 *)screen->pixels + y*screen->pitch/4 + x;
        *bufp = color;
        }
        break;
    }

    if(SDL_MUSTLOCK(screen))
    {
        SDL_UnlockSurface(screen);
    }
    SDL_UpdateRect(screen, x, y, 1, 1);
}

SDL_Surface *Render_Noise(int w, int h, int r, int g, int b)
{
    SDL_Surface *ret = SDL_CreateRGBSurface(SDL_SWSURFACE,w,h,32,0,0,0,0);          //create an empty image

    for(int y = 0; y < h; y++)
    {
        for(int x = 0; x < w; x++)
        {
            double getnoise = 0;
            for(int a = 0; a < noiseGen.n; a++)
            {
                getnoise += noiseGen.generateNoise(x,y);
                noiseGen.z = rand() % 100;
            }

            getnoise / noiseGen.n;

            int color = (int)((getnoise * 128.0) + 128.0);      //convert noise to 0-256 value

            if (color > 255)
                color = 255;
            if (color < 0)
                color = 0;

            DrawPixel( ret, x, y, (int)((r/255.0) * (double)color), (int)((g/255.0) * (double)color), (int)((b/255.0) * (double)color) );
        }
    }
    return ret;
} 
```

**perlinnoise.cpp**

```
#include "PerlinNoise.h"

PerlinNoise::PerlinNoise(int octaves, double persistence, int zoom)
{
    p = persistence;
    n = octaves - 1;
    z = zoom;
}

PerlinNoise::~PerlinNoise()
{

}

///<summary>Gets a random number using x and y as seeds </summary>
///<param name = x> A double value </param>
///<param name = y> A double value </param>
///<returns> A random number between -1.0 and 1.0 </returns>
inline double PerlinNoise::noise(double x, double y)
{
    int n = x + y * 57; 
    n = (n << 13) ^ n;

    return ( 1.0 - ( (n * (n * n * 15731 + 789221) + 1376312589) & 0x7fffffff) / 1073741824.0);
}

///<summary> Smooths out noise values </summary>
///<param name = x> a double value </param>
///<param name = y> a double value </param>
///<returns> a smoothed value between -1.0 and 1.0 </returns>
double PerlinNoise::smoothNoise(double x, double y)
{
    double corners = (noise(x+1, y+1) + noise(x+1,y-1) + noise(x-1,y+1) + noise(x-1,y-1)) / 16;
    double sides = (noise(x,y+1) + noise(x,y-1) + noise(x+1,y) + noise(x-1,y)) / 8;
    double center = noise(x,y) / 4;

    return corners + sides + center;
}

///<summary> Cosine Interpolation </summary>
///<param name = a> The low value to be interpolated </param>
///<param name = b> The high value to be interpolated </param>
///<param name = x> A value between -1.0 and 1.0 </param>
///<returns> Interpolated value between a and b </returns>
double PerlinNoise::cosineInterpolation(double a, double b, double x)
{
    double ft = x * 3.1415927;
    double f = (1.0 - cos(ft)) * .5;

    return a * (1.0 - f) + b * f;
}

///<summary> Gets smoothed noise values and interpolates them </summary>
///<param name = x> a double value </param>
///<param name = y> a double value </param>
///<returns> a value between -1 and 1 that's been smoothed and interpolated </returns>
double PerlinNoise::interpolatedNoise(double x, double y)
{
    double integer_x = (int)x;
    double fractional_x = x - integer_x;

    double integer_y = (int)y;
    double fractional_y = y - integer_y;

    double v1 = smoothNoise(integer_x, integer_y);
    double v2 = smoothNoise(integer_x + 1, integer_y);
    double v3 = smoothNoise(integer_x, integer_y + 1);
    double v4 = smoothNoise(integer_x + 1, integer_y + 1);

    double inter1 = cosineInterpolation(v1, v2, fractional_x);
    double inter2 = cosineInterpolation(v3, v4, fractional_x);

    return cosineInterpolation(inter1, inter2, fractional_y);
}

double PerlinNoise::generateNoise(double x, double y)
{
    double total = 0;

    for(int i = 0; i < n; i++)
    {
        frequency = pow(2.0,i);
        amplitude = pow(p,i);

        total = total + interpolatedNoise(x * frequency / z, y * frequency / z) * amplitude;
    }

    return total;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T02:10:54.063

发现问题，我的坚持比应该的要低很多，我得到了我期望的云状图像

# python - 在不使用任何内置 python 排序函数的情况下有效地对仅包含 0 和 1 的列表进行排序？

> ID：11175645
> 
> 赞同：2
> 
> 时间：2012-06-24T07:14:34.593
> 
> 标签：python

什么是对列表进行排序的最有效方法，`[0,0,1,0,1,1,0]`其元素仅为`0`& `1`，而不使用任何内置`sort()`或`sorted()`或`count()`函数。O(n) 或小于

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-24T07:21:47.800

```
>>> lst = [0,0,1,0,1,1,0]
>>> l, s = len(lst), sum(lst)
>>> result = [0] * (l - s) + [1] * s
>>> result
[0, 0, 0, 0, 1, 1, 1] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T07:36:47.973

可以使用许多不同的通用排序算法。但是，在这种情况下，最重要的考虑是所有要排序的元素都属于集合 (0,1)。

正如其他贡献者所回答的那样，有一个简单的实现。

```
def radix_sort(a):
    slist = [[],[]]
    for elem in a:
        slist[elem].append(elem)
    return slist[0] + slist[1]

print radix_sort([0,0,1,0,1,1,0]) 
```

必须注意，这是[基数排序](http://en.wikipedia.org/wiki/Radix_sort)的一种特殊实现。如果要排序的列表的元素属于定义的有限集合，这可以很容易地扩展。

```
def radix_sort(a, elems):
    slist = {}
    for elem in elems:
        slist[elem] = []
    for elem in a:
        slist[elem].append(elem)
    nslist = []
    for elem in elems:
        nslist += slist[elem]
    return nslist

print radix_sort([2,0,0,1,3,0,1,1,0],[0,1,2,3]) 
```

没有`sort()`或`sorted()`或`count()`功能。在）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T07:21:56.660

这个是`O(n)`（你不能少）：

```
old = [0,0,1,0,1,1,0]
zeroes = old.count(0) #you gotta count them somehow!
new = [0]*zeroes + [1]*(len(old) - zeroes) 
```

由于没有 Python 循环，这可能是您在纯 Python 中获得的更快...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T07:26:50.210

`def sort_arr_with_zero_one():`

```
 main_list = [0,0,1,0,1,1,0]
  zero_list = []
  one_list = []
  for i in main_list:
    if i:
        one_list.append(i)
    else:
        zero_list.append(i)

  return zero_list + one_list 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T07:16:47.520

您只有两个值，因此您提前知道输出的精确结构：它将分为两个不同长度的区域。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-24T07:22:21.300

我会试试这个：

```
b = [0,0,1,0,1,1,0]

def odd_sort(a):
  zeroes = a.count(0)

  return [0 for i in xrange(zeroes)] + [1 for i in xrange(len(a) - zeroes)] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-24T07:25:17.473

您可以使用两个指针遍历列表，一个从开始（`i`）开始，一个从结束（`j`）开始，并逐一比较值并在必要时交换它们：

```
def sort_binary_values(l):
    i, j = 0, len(l)-1
    while i < j:
        # skip 0 values from the begin
        while i < j and l[i] == 0:
            i = i+1
        if i >= j: break
        # skip 1 values from the end
        while i < j and l[j] == 1:
            j = j-1
        if i >= j: break
        # since all in sequence values have been skipped and i and j did not reach each other
        # we encountered a pair that is out of order and needs to be swapped
        l[i], l[j] = l[j], l[i]
        j = j-1
        i = i+1
    return l 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-24T10:26:14.410

我喜欢 JBernado 的答案，但会抛出另一个可怕的选项（尽管我没有对其进行任何分析 - 它不是特别可扩展，因为它依赖于字典哈希的顺序，但适用于 0 和 1）：

```
from itertools import chain, repeat
from collections import Counter

list(chain.from_iterable(map(repeat, *zip(*Counter(bits).items())))) 
```

**或者 - 稍微不那么复杂......**

```
from itertools import repeat, chain, islice, ifilter
from operator import not_

list(islice(chain(ifilter(not_, bits), repeat(1)), len(bits))) 
```

这应该使一切都保持在 C 级别 - 所以它应该是相当优化的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-24T10:33:57.347

您只需要知道原始序列有多长以及其中有多少。

```
old = [0,0,1,0,1,1,0]
ones = sum(1 for b in old if b)
new = [0]*(len(old)-ones) + [1]*ones 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-19T10:43:45.317

## 这是 O(n) 时间和 O(2) 空间的 Python 解决方案。

绝对不需要创建新列表和最佳时间表现

```
def sort01(arr):
  i = 0
  j = len(arr)-1
  while i < j:
    while arr[i] == 0:
      i += 1
    while arr[j] == 1:
      j -= 1
    if i<j:
      arr[i] = 0
      arr[j] = 1
  return arr 
```

# c# - StringBuilder 在 Mono 上的性能

> ID：11175650
> 
> 赞同：0
> 
> 时间：2012-06-24T07:15:20.640
> 
> 标签：c#, mono, monodevelop

我在一个小项目上有以下代码

```
string[] lines = File.ReadAllLines(itunesLibraryPath);
StringBuilder builder = new StringBuilder();

foreach (string line in lines)
    builder.Append(line.Replace(currentPathPrefix, destPathPrefix));
File.WriteAllText(itunesLibraryPath, builder.ToString()); 
```

在 Windows 上工作得很好，然后我用 Mono 将它移植到 IOS，但它只需要永远`foreach`

`StringBuilder.Append()`关于 Mono的性能有什么想法吗？

谢谢

# c - C中的无符号和有符号整数

> ID：11175657
> 
> 赞同：0
> 
> 时间：2012-06-24T07:16:01.330
> 
> 标签：c

> **可能重复：**
> [带有负值的无符号长整数](https://stackoverflow.com/questions/2455806/unsigned-long-with-negative-value)
> [将负数分配给无符号整数？](https://stackoverflow.com/questions/5169692/assigning-negative-numbers-to-an-unsigned-int)

```
#include<stdio.h>

int main()
{
    struct a 
    {
        unsigned int i:3;
        int c:3; 
    }s;
    s.i=5;
    s.c=5;

    printf("s.i=%d\n",s.i);
    printf("s.c=%u\n",s.c);
    unsigned int x = -1;
    printf(" x = %d", x);
    return 0;
} 
```

这输出：

```
s.i=5
s.c=4294967293
x=-1 
```

我不清楚“x”和“sc”的输出（sc 只能存储 3 位，但在输出中它给出了非常大的值）。“x”被声明为无符号，所以存储在 x 中的位是1111111....... x 的输出应该是一个很大的值，而不是 -1。第一个 printf() 语句给出了预期的结果，我正在使用 devc++ 编译器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T07:25:26.127

输出取决于格式字符的签名，而不是声明的签名。想一想：printf 无法知道 x 是声明为 int 还是 unsigned int，因为 C 中没有传递任何类型信息。所以它根据您告诉它打印的方式打印。%d 是有符号的，所以你得到一个有符号的值。使用 sc，它是一个 int，所以它是有符号的，但是你用 %u 打印它，所以它被视为无符号。

至于 si，它是无符号的，所以 5 可以放在它的 3 位中，所以它作为 5 传递给 printf 没有符号扩展它，所以 %d（或 %u）将它打印为 5。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T08:14:17.477

似乎有两件事需要理解：

*   `printf()`转换说明符
*   积分转换

还有两件事有助于理解您的输出：

*   可变参数函数参数的参数提升
*   二进制补码表示

首先，`printf()`是一个可变参数函数。它不知道其参数的类型是什么（格式字符串除外），因此您必须使用转换说明符来告诉它如何解释参数。这些参数受“默认参数提升”的约束，因此您的 3 位位字段被提升为`int`s。

您正在使用与数据的符号不匹配的转换说明符（`%d`、`%u`和`%d`），因此您将获得未定义的行为，这取决于您的数据在内存中的实际表示方式。

二、C11标准规定：

> **6.3.1.3** *有符号和无符号整数*
> 
> *   当整数类型的值转换为_Bool以外的其他整数类型时，如果该值可以用新类型表示，则保持不变。
>     
>     
> *   否则，如果新类型是无符号的，则通过在新类型中可以表示的最大值的基础上反复加减一，直到该值在新类型的范围内。
>     
>     
> *   否则，新类型是有符号的，值不能在其中表示；结果是实现定义的，或者引发了实现定义的信号。

（据我所知，这里的相关细节至少从 C89 开始就是正确的。）

这告诉我们有关您的代码的几件事：

*   当您分配`-1`给 ,`unsigned int`时，`UINT_MAX + 1`会添加`UINT_MAX`, 或`4294967295`32 位整数。

*   当您尝试分配`5`给 3 位有符号位字段时，结果是实现定义的。

所以你有未定义和实现定义的行为，但我们仍然可以尝试理解你的输出，只是为了好玩。我假设 32 位整数和[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)表示。

您的系统表示`4294967295`存储`x`为`11111111 11111111 11111111 11111111`. 当您告诉`printf()`您传递的参数已签名时，这些相同的位将被解释为`-1`，这就是您得到的输出。

对于`s.c`，您似乎得到的实现定义的行为很简单：`101`表示`5`按原样存储的三位。这意味着使用正确的转换说明符，`printf()`应该显示`s.c`为`-3`.

以下是您分配的值：

```
s.i = 101
s.c = 101
  x = 11111111 11111111 11111111 11111111 
```

`0`通过为无符号值左填充并为有符号值重复符号，将 3 位值提升为 32 位：

```
s.i = 00000000 00000000 00000000 00000101
s.c = 11111111 11111111 11111111 11111101
  x = 11111111 11111111 11111111 11111111 
```

其中，当解释为有符号、无符号和有符号整数时，给出：

```
s.i=5
s.c=4294967293
x=-1 
```

这`x=-1`向我表明您实际上正在使用二进制补码表示（无论如何，这是一个非常安全的赌注），并且输出`s.c`表明您`int`的 s 是 32 位宽。

# ruby - Rubygems 没有加载 gem

> ID：11175659
> 
> 赞同：0
> 
> 时间：2012-06-24T07:16:07.277
> 
> 标签：ruby, rubygems, slim-lang

我将`slim`gem 安装到我自己的自定义目录中，但 require 'slim' 给了我错误。

安装苗条：

```
$ cd /var/www
$ mkdir project
$ cd project/
$ gem install slim -i gems/
Fetching: temple-0.4.0.gem (100%)
Fetching: slim-1.2.2.gem (100%)
Successfully installed temple-0.4.0
Successfully installed slim-1.2.2
2 gems installed
Installing ri documentation for temple-0.4.0...
Installing ri documentation for slim-1.2.2...
Installing RDoc documentation for temple-0.4.0...
Installing RDoc documentation for slim-1.2.2...
$ ls gems/
bin/            doc/            specifications/ 
cache/          gems/           
$ ls gems/gems/
slim-1.2.2  temple-0.4.0
$ ls gems/gems/slim-1.2.2/
benchmarks  CHANGES  lib      Rakefile   slim.gemspec
bin         Gemfile  LICENSE  README.md  test
$ ls gems/gems/slim-1.2.2/lib/
slim  slim.rb 
```

Gem 环境（如果你注意到我添加`/var/www/project/gems`到 GEM_PATH）：

```
$ gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.11
  - RUBY VERSION: 1.9.2 (2010-08-18 patchlevel 0) [x86_64-linux]
  - INSTALLATION DIRECTORY: /usr/local/lib/ruby/gems/1.9.1
  - RUBY EXECUTABLE: /usr/local/bin/ruby
  - EXECUTABLE DIRECTORY: /usr/local/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /usr/local/lib/ruby/gems/1.9.1
     - /home/john/.gem/ruby/1.9.1
     - /var/www/project/gems
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
     - "gempath" => ["/usr/local/lib/ruby/gems/1.9.1", "/home/john/.gem/ruby/1.9.1", "/var/www/project/gems"]
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

测试：

```
$ irb
irb(main):001:0> require 'slim'
LoadError: no such file to load -- slim
    from <internal:lib/rubygems/custom_require>:29:in `require'
    from <internal:lib/rubygems/custom_require>:29:in `require'
    from (irb):1
    from /usr/local/bin/irb:12:in `<main>' 
```

知道有什么问题吗？我`/var/www/project/gems`在 GEM_PATH 中添加了但`require 'slim'`不会加载 gem，为什么会这样？这是 ruby​​gems 的错误吗？

当我写和时同样`require 'slim'`的`/var/www/project/index.rb`问题`ruby index.rb`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T10:16:48.520

我衷心推荐使用[bundler](http://gembundler.com/)，它不仅可以管理这个，还可以代表您进行版本固定和部署。

相关的调用将是；在`Gemfile`

```
source :rubygems
gem "slim" 
```

进而

```
gem install bundler && bundle install && bundle exec irb 
```

届时`require 'slim'`将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T08:48:01.637

由于您正在安装 slim，`/var/www/project/gems/`您必须将其添加到加载路径或通过完整路径要求它：

```
require '/var/www/project/gems/slim' 
```

或将其添加到您的加载路径：

```
$LOAD_PATH.unshift(File.dirname('/var/www/project/gems/')) 
```

# c# - Linq：分组并从集合中选择

> ID：11175662
> 
> 赞同：1
> 
> 时间：2012-06-24T07:16:18.330
> 
> 标签：c#, linq

我有一堂课：

```
public class LevelInfo
    {
        public int Id { get; set; }
        public string HexColor { get; set; }
        public string Caption { get; set; }
        public int MinPrice { get; set; }
    } 
```

我有一个集合`LevelInfo`。例如，我们有以下数据：

```
Id     HexColor     Caption     MinPrice
1       color1       name1         10
2       color2       name2         20
3       color2       name3         10
4       color3       name4         10 
```

我想`LevelInfo`通过 HexColor 获得新的分组集合（不完全是，不知道怎么说）。对于上面的数据，我想获得以下包含 3 条记录的集合：

```
Id     HexColor     Caption     MinPrice
1       color1       name1         10
3       color2       name3         10
4       color3       name3         10 
```

我们没有选择`Id`等于 2 的记录，因为我们有`color1`（`Id`=1）并且它的价格最低。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T07:19:50.880

所以听起来你想分组，按 MinPrice*在*组内排序，然后从每个组中选择第一个元素，对吗？如果这是正确的，你想要：

```
var query = from level in levels
            group level by level.HexColor into levels
            select levels.OrderBy(level => level.MinPrice).First(); 
```

或者，如果您使用[MoreLINQ](http://morelinq.googlecode.com)，您可以避免进行完整的*排序*，`MinPrice`只需选择最低价格的值：

```
var query = from level in levels
            group level by level.HexColor into levels
            select levels.MinBy(level => level.MinPrice); 
```

# jquery - Jquery $("#selector") 返回空数据

> ID：11175663
> 
> 赞同：0
> 
> 时间：2012-06-24T07:16:24.963
> 
> 标签：jquery

我在表单中有一个字段，试图使用 jquery 获取这个值。它总是返回 null。

我哪里错了？

这是我尝试过的[http://jsfiddle.net/9gJGM/](http://jsfiddle.net/9gJGM/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T07:18:40.507

运行这个，你可以看到它选择正确：

```
var  productCategor =  $("#category").attr("id");
alert(productCategor);​ 
```

请参阅此更新的 JS Fiddle 以验证您是否可以输入文本：

[http://jsfiddle.net/7sH8f/1/](http://jsfiddle.net/7sH8f/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T07:18:20.967

value 参数显示在警报中，您将其留空！

**HTML**

```
<input type="text" name="category" id="category" value="myValue"/>​ 
```

**JS**

```
var  productCategor =  $("#category").val();
           alert(productCategor);​ 
```

**编辑**
为了使用 JS 动态更改文本框的值，您可以使用以下内容。

```
$("#category").val("abcd");​ 
```

这适用于我的浏览器。如果您将 value 参数留空，您一定会在警报中返回一个空白。

**EDIT2** 这是正确的方法。

```
<input type="text" name="category" id="category"/>
<input type="button" value="hit" onClick="hit();"/>

function hit(){
var  productCategor =  $("#category").val();
    alert(productCategor);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T07:18:40.973

因为你的价值是`empty`

```
<input type="text" name="category" id="category" value=""/>​ 
```

尝试在里面放一些数据

```
<input type="text" name="category" id="category" value="MyVal"/>​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T07:20:52.557

试试这个：[jsfiddle](http://jsfiddle.net/9gJGM/3/)

我为输入添加了一个值，只是为了让它工作。在您的情况下，它是空的，无法显示任何值。

# mysql - 如何在 MySQL 中使用 LEFT JOINed 表选择以前的记录？

> ID：11175669
> 
> 赞同：0
> 
> 时间：2012-06-24T07:17:48.240
> 
> 标签：mysql, select, left-join, records

我正在努力使以下工作：

```
# prev
SELECT klha.buyerID < PARAMETER_1

    FROM agents AS v

    LEFT JOIN seller_authorized AS klhs 
        ON klhs.agent= v.agentID 
        AND klhs.iln = v.seller
        AND v.`status` = 'auth'

    LEFT JOIN cust_list AS klha 
        ON klha.buyerID  = klhs.userID
        AND klha.accountNo = klhs.accountNo
        WHERE v.iln = PARAMETER_2
        AND klhs.acccountNo IS NOT NULL

    ORDER BY klha.buyerID 
    LIMIT 1 
; 
```

结尾

左连接正在工作，因为我在另一个过程中使用它们来选择所有相关记录。问题在于我尝试选择上一条记录。

我传入了一个**buyerID**，需要取回上一条记录的ID。

**问题：**
谁能指出正确的语法？

**编辑：**
如果我在 MySQL 中运行它，我会得到“0”作为结果集

谢谢！

**解决方案**：
让它像这样工作：

```
# prev
SELECT klha.buyerID

    FROM agents AS v

    LEFT JOIN seller_authorized AS klhs 
        ON klhs.agent= v.agentID 
        AND klhs.iln = v.seller
        AND v.`status` = 'auth'

    LEFT JOIN cust_list AS klha 
        ON klha.buyerID  = klhs.userID
        AND klha.accountNo = klhs.accountNo
        WHERE v.iln = PARAMETER_2
        AND klhs.acccountNo IS NOT NULL
        AND klha.buyerID < PARAMETER_1

    ORDER BY klha.buyerID 
    LIMIT 1 
; 
```

比想象的容易:-) 谢谢@Henrique Ordine

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:25:17.140

如果我正确理解您的需要，将此条件添加到您的 where 子句应该可以解决问题：

和 klha.buyerID = (从购买者 ID < PARAMETER_1 的代理中选择 max(buyerID))

像这样：

```
SELECT klha.buyerID 

    FROM agents AS v

    LEFT JOIN seller_authorized AS klhs 
        ON klhs.agent= v.agentID 
        AND klhs.iln = v.seller
        AND v.`status` = 'auth'

    LEFT JOIN cust_list AS klha 
        ON klha.buyerID  = klhs.userID
        AND klha.accountNo = klhs.accountNo
    WHERE v.iln = PARAMETER_2
      AND klhs.acccountNo IS NOT NULL
      and klha.buyerID = (select max(buyerID) from agents 
                            where buyerID < PARAMETER_1)

    ORDER BY klha.buyerID 
    LIMIT 1 
```

# javascript - jQuery动画重叠

> ID：11175672
> 
> 赞同：0
> 
> 时间：2012-06-24T07:18:01.140
> 
> 标签：javascript, jquery, html, css

我有几个 jquery 动画正在运行，每个动画都需要在某种程度上依赖于其他动画的成功。有没有办法可靠地做到这一点而不将每个动画嵌套在另一个动画中？我已经研究了“队列”方法，但我相信队列默认情况下是真的？我遇到了一个问题，如果它们像这样排列，动画就会开始相互抵消：

```
function moduleSwap(){

                //animation 1

                //animation 2

        }

        setInterval(moduleSwap, 1000); 
```

我正在使用 setInterval 一遍又一遍地重复该功能。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:40:01.760

```
setInterval(function(int) {
    if(int % 2 == 0) 
        animation_1(); 
    else
        animation_2();
}, 1000); 
```

通过方法增加 int`int ++`并将其传递给它。它会`setInterval`自动交换你的动画。Tricky 但对我有用。

# node.js - 更改文件时重新启动节点

> ID：11175676
> 
> 赞同：191
> 
> 时间：2012-06-24T07:18:36.073
> 
> 标签：node.js

对于来自 PHP 背景的人来说，在每次代码更改后杀死节点并重新启动它的过程似乎非常乏味。使用节点启动脚本以在保存代码更改时自动重新启动节点时是否有任何标志？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-06-24T07:41:54.763

一个不错的选择是[Node-supervisor](https://github.com/isaacs/node-supervisor)：

```
npm install supervisor -g 
```

并在迁移到应用程序的根目录后使用以下内容

```
supervisor app.js 
```

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2012-06-24T07:34:03.020

你应该看看类似[nodemon](https://github.com/remy/nodemon)的东西。

Nodemon 将监视启动 nodemon 的目录中的文件，如果它们发生更改，它将自动重新启动您的节点应用程序。

例子：

```
nodemon ./server.js localhost 8080 
```

或者干脆

```
nodemon server 
```

* * *

## 回答 #3

> 赞同：107
> 
> 时间：2013-10-25T16:09:30.623

[forever 模块](https://github.com/nodejitsu/forever)有多个 node.js 服务器的概念，可以启动、重启、停止和列出当前运行的服务器。它还可以监视更改的文件并根据需要重新启动节点。

如果您还没有它，请安装它：

```
npm install forever -g 
```

安装后，调用`forever`命令：使用`-w`标志来观察文件的变化：

```
forever -w ./my-script.js 
```

此外，您可以监视目录并忽略模式：

```
forever --watch --watchDirectory ./path/to/dir --watchIgnore *.log ./start/file 
```

* * *

## 回答 #4

> 赞同：50
> 
> 时间：2017-09-02T19:20:06.097

可以使用各种 NPM 包来简化此任务。

**发展**

*   [nodemon](https://github.com/remy/nodemon/ "节点监视器")：最受欢迎和积极维护
*   [永远](https://github.com/foreverjs/forever/ "永远")：第二受欢迎
*   [node-dev](https://www.npmjs.com/package/node-dev/ "节点开发")：积极维护（截至 2020 年 10 月）
*   [主管](https://github.com/petruisfan/node-supervisor/ "节点主管")：不再维护

**用于生产**（具有扩展功能，例如集群、远程部署等）

*   [下午2](http://pm2.keymetrics.io/ "pm2") :`npm install -g pm2`
*   [强循环流程管理器](http://strong-pm.io/ "强大的循环流程管理器")：`npm install -g strongloop`

Forever、pm2 和 StrongLoop 之间的比较可以在[StrongLoop](http://strong-pm.io/compare/)的网站上找到。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2016-12-27T14:04:32.103

你也可以试试[nodemon](https://github.com/remy/nodemon)

安装 Nodemon

```
npm install -g nodemon 
```

使用 Nodemon

通常我们像这样启动节点程序：

```
node server.js 
```

但在这里你必须这样做：

```
nodemon server.js 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-12-06T06:35:59.670

> 节点开发

**对于喜欢在服务器重新启动**或文件中发生**错误**或**更改**时希望在桌面上获得咆哮（或 libnotify）通知的开发人员来说，node-dev 是 nodemon 和 supervisor 的绝佳替代品。

**安装：**

```
npm install -g node-dev 
```

*使用 node-dev，而不是 node：*

```
node-dev app.js 
```

**更改文件通知，以便服务器自动启动**

[![在此处输入图像描述](../Images/7a9ea517f8f5bf9334e8b6a1ca46e157.png)](https://i.stack.imgur.com/I0Qsr.png)

**控制台输出**

[![在此处输入图像描述](../Images/86ff3f4719367e2ed5b441e97ce13678.png)](https://i.stack.imgur.com/TTPWc.png)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-10-31T21:16:47.893

按照步骤：

1.  `npm install --save-dev nodemon`

2.  将以下两行添加到 package.json 的“脚本”部分：

```
"start": "node ./bin/www",
"devstart": "nodemon ./bin/www" 
```

如下所示：

```
"scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "start": "node ./bin/www",
    "devstart": "nodemon ./bin/www"
} 
```

3.  `npm run devstart`

[https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/skeleton_website](https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/skeleton_website)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-11-10T09:47:31.713

我`runjs`像这样使用：

```
runjs example.js 
```

该包被称为只是[`run`](https://www.npmjs.com/package/run)

```
npm install -g run 
```

# javascript - 计算浮动元素的宽度

> ID：11175677
> 
> 赞同：2
> 
> 时间：2012-06-24T07:18:36.677
> 
> 标签：javascript

例如，您可以在 wikipedia 中看到： [http](http://en.wikipedia.org/wiki/United_States) ://en.wikipedia.org/wiki/United_States 第二段以“379 万平方英里”开头。如果您检查此段落的宽度，它将为您提供全宽度，包括浮动右侧元素“.infobox”的宽度 [http://imageshack.us/photo/my-images/38/54351130.jpg/](http://imageshack.us/photo/my-images/38/54351130.jpg/)

但我需要获得向用户显示的段落的确切宽度（即段落宽度 - 信息框等）。但是，假设我不知道有一个浮动元素，并且我希望 javascript 来计算 contect 的确切显示宽度。谢谢你。

编辑：这是问题的一个示例：http: [//jsfiddle.net/guy_l/sj3Zp/2/](http://jsfiddle.net/guy_l/sj3Zp/2/) 滚动浏览 DOM 我得到相同的结果，但是计算出的 witdh 不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:59:04.870

这是您使用 jQuery 解决方案的场景，效果很好：

```
<script>

    // with all margins and paddings
    var w1  = $('.c_2').outerWidth(true);
    var w2  = $('.c_3').width();

    alert ('Calculated width: ' + w2 + ' - ' + w1 + ' = ' + ( w2-w1) );

</script>

<style>

    .c_1 {
        border:         1px solid red;
    }

    .c_2 {
        float:          right;
        width:          22em;
        height:         200px;
        margin:         0px 20px;
        padding:        0px 20px;
        border:         1p solid orange;
    }

    .c_3 {
        border:         1px solid blue;
    }

</style>

<div class="c_1">

    <div class="c_2">
        Infopanel
    </div>

    <p>
        Some paragraph
    </p>
    <p class="c_3">
        The interesting paragraph
    </p>

</div> 
```

# php - yii中有zend bootstrap模拟吗？

> ID：11175680
> 
> 赞同：0
> 
> 时间：2012-06-24T07:18:47.960
> 
> 标签：php, zend-framework, yii

我想尝试数据库连接以检查数据库是否可用。在 zend 中，我可以将我的代码放在 boostrap 文件中并将其包装在 try catch 中。

如何在 yii 中实现这一点？在 yii 中是 zend boostrap 的模拟吗？

**UPD：** db 是 mongo，使用 db 的 yii 扩展是[directmongosuite](http://www.yiiframework.com/extension/directmongosuite/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:34:32.137

似乎我找到了合适的解决方案：

1.  需要在配置文件中禁止自动连接：

    'components' => array('edms' => array('class' => 'EDMSConnection', 'dbName' => 'homeweb', 'server' => 'mongodb://localhost:27017', 'options' => 数组('connect' => false) ) )

2.  所有控制器都应该扩展一个自定义控制器（`BaseController`例如）。

3.  需要编写自己的`public function beforeAction`方法，我可以在其中添加 boostrap 代码。

    ```
    class BaseController extends CController
    {
        public $layout = '//layouts/main';
        public $navigationMenu = array();
        public $breadcrumbs = array();

        public function beforeAction($action)
        {
            try {
                Yii::app()->edmsMongo()->connect();
            } catch (Exception $e) {
                die('Cannot connect to the database server. Please Try again later.');
            }
            $isGuest = Yii::app()->user->isGuest;
            $this->navigationMenu = $this->_getNavigationMenu($isGuest);
            return parent::beforeAction($action);
        } 
    ```

4.  在`beforeAction`方法中需要添加`return true`或执行父类的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T09:00:31.290

yii 中的引导程序几乎是 public_html 下的 index.php 文件或 yiic.php 文件（用于命令行应用程序）。

您可能必须将应用程序实例的创建和运行分开（默认情况下，它都在 1 行上执行），因此您可以在调用之间进行 try/catch。

只要尝试获取应用组件，mongo插件如果无法打开连接就会抛出异常：

```
try
{
    Yii::app()->mongoDb;
}
... 
```

或者 Yii::app()->getComponent('mongoDb');

# uitableview - 使用 RestKit 映射的 JSON Post 后 TableView 不刷新

> ID：11175681
> 
> 赞同：1
> 
> 时间：2012-06-24T07:18:59.290
> 
> 标签：uitableview, rest, core-data, post, restkit

我正在使用 RestKit 将 JSON 响应映射到 CoreData。我有一个带有 UITextFields 和“保存”按钮的表格视图，它应该将数据发布到服务器并保存它。服务器数据库已正确更改，但 tableView 使用旧数据重新加载。只有当我返回然后再次进入视图时，才会加载正确的数据。

我花了几个小时寻找解决方案，但我尝试过的没有任何效果。如果我将 [self loadData] 放在 POST 行之后，应用程序会崩溃，可能是因为 POST 尚未完成并且存在冲突。如果我将 [self.tableview reloadData] 放在该行中，它也不起作用。

这是我的代码。我正在使用 NSManagedObject 来保存数据，但将新创建的 NSObject (CommunityOtherProfile) 发送回服务器。

这是我的映射：

```
 // CommunityProfile Object
RKManagedObjectMapping *profileMapping = [RKManagedObjectMapping mappingForClass:[CommunityProfile class] inManagedObjectStore:objectStore];
profileMapping.primaryKeyAttribute = @"uid";

[profileMapping mapKeyPath:@"uid" toAttribute:@"uid"];
[profileMapping mapKeyPath:@"nickname" toAttribute:@"nickname"];
[profileMapping mapKeyPath:@"hometown" toAttribute:@"hometown"];
[profileMapping mapKeyPath:@"male" toAttribute:@"male"];
[profileMapping mapKeyPath:@"age" toAttribute:@"age"];
[profileMapping mapKeyPath:@"description" toAttribute:@"profileDescription"];

[[RKObjectManager sharedManager].mappingProvider setMapping:profileMapping forKeyPath:@"communityProfile"];

mappingForSerialization = [profileMapping inverseMapping];
[[RKObjectManager sharedManager] setSerializationMIMEType:RKMIMETypeJSON];

[[RKObjectManager sharedManager].mappingProvider setSerializationMapping:mappingForSerialization 
                                                                forClass:[CommunityProfile class]];

[[RKObjectManager sharedManager].router routeClass:[CommunityProfile class] toResourcePath:@"/community/profile/getMyProfile/" forMethod:RKRequestMethodGET];
//[[RKObjectManager sharedManager].router routeClass:[CommunityProfile class] toResourcePath:@"/community/profile/postMyProfile/" forMethod:RKRequestMethodPOST];

// CommunityOtherProfile Object
RKObjectMapping *profileMapping2 = [RKObjectMapping mappingForClass:[CommunityOtherProfile class]];

[profileMapping2 mapKeyPath:@"uid" toAttribute:@"uid"];
[profileMapping2 mapKeyPath:@"nickname" toAttribute:@"nickname"];
[profileMapping2 mapKeyPath:@"hometown" toAttribute:@"hometown"];
[profileMapping2 mapKeyPath:@"male" toAttribute:@"male"];
[profileMapping2 mapKeyPath:@"age" toAttribute:@"age"];
[profileMapping2 mapKeyPath:@"description" toAttribute:@"profileDescription"];

[[RKObjectManager sharedManager].mappingProvider setMapping:profileMapping2 forKeyPath:@""];

mappingForSerialization = [profileMapping2 inverseMapping];
[[RKObjectManager sharedManager] setSerializationMIMEType:RKMIMETypeJSON];

[[RKObjectManager sharedManager].mappingProvider setSerializationMapping:mappingForSerialization 
                                                                forClass:[CommunityOtherProfile class]];

[[RKObjectManager sharedManager].router routeClass:[CommunityOtherProfile class] toResourcePath:@"/community/profile/postMyProfile/" forMethod:RKRequestMethodPOST]; 
```

这是 POST 发生的地方：

```
- (void) save_clicked:(id)sender {

CommunityOtherProfile * newProfile = [[CommunityOtherProfile alloc] init];
NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterDecimalStyle];
NSNumber * ageNumber = [f numberFromString:age.text];

NSString *tempDescription = @"Platzhalter (noch nicht implementiert!)";

newProfile.male = isMale;
newProfile.profileDescription = tempDescription;
newProfile.nickname = nickname.text;
newProfile.hometown = hometown.text;
newProfile.age = ageNumber;

// post Object
[[RKObjectManager sharedManager] postObject:newProfile usingBlock:^(RKObjectLoader *loader){
    loader.targetObject = nil;
    loader.delegate = profileDataLoader;
}];
// I have tried to insert reloadData here } 
```

同一 TableViewController 类中的其他重要方法：

```
- (void) refreshView: (id) sender{

NSFetchRequest *request = [CommunityProfile fetchRequest];
prof = [[CommunityProfile objectsWithFetchRequest:request] objectAtIndex:0];    

    self.uid = prof.uid;
    self.nickname.text = prof.nickname;
    self.age.text = [NSString stringWithFormat:@"%d", [prof.age intValue]];
    self.hometown.text = prof.hometown;

     //self.description.text = prof.description;

    if(prof.male == [NSNumber numberWithInt:1]) {
        [self clickMale:self.male];
    }
    else if(prof.male == [NSNumber numberWithInt:0]) {
        [self clickFemale:self.female];
    } }
- (void) loadData{
profileDataLoader = [[CommunityProfileDataLoader alloc] initWithDelegate:self];
[profileDataLoader loadData]; 
```

最后，我的 dataLoader 类：

```
 //
//  CommunityProfileDataLoader.m
//

#import "CommunityProfileDataLoader.h"
#import "CommunityProfile.h"

@interface AbstractDataLoader()
@property CommunityEditProfileViewController *view;
@end

@implementation CommunityProfileDataLoader

@synthesize responseCode = _responseCode;
@synthesize view;

- (void) loadData{
    [super loadData];
    HCLog(DEBUG_MODE,@"Loading Profile Data");
    [[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/community/profile/getMyProfile/" delegate:self];
}

- (void) triggerDelegate{
    HCLog(DEBUG_MODE,@"CommunityProfileDataLoader Triggering Delegate for %@", [super delegate]);
    [[super delegate] refreshView:self];
} /*...*/ 
```

如果你们能帮忙，我会很高兴:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T08:03:50.717

您的表正在运行一个核心数据支持类 CommunityProfile，但是当您发送 POST 请求时，您只需将新创建的配置文件添加到内存类 CommunityOtherProfile。当您尝试在 save_clicked 中重新加载数据时：在请求完成之前没有任何变化。当您稍后返回视图时，请求将返回，并且您的新对象将在核心数据中，因此在表视图中。

我不建议手动保存它，因为看起来您的 Web 服务将返回 uid 并且您将创建一个副本。（提示：如果您决定这样做，请将您的 objectloader 的 targetObject 设置为以手动创建的对象为目标！）

我建议您在 Web 服务返回时重新加载表格：

```
[[RKObjectManager sharedManager] postObject:newProfile usingBlock:^(RKObjectLoader *loader){
    loader.onDidLoadObject = ^(id obj) {
        [self refreshView: nil];
    };
}]; 
```

# php - PHP preg_match 使用 RegEx 匹配一个单词

> ID：11175682
> 
> 赞同：1
> 
> 时间：2012-06-24T07:19:04.717
> 
> 标签：php, regex

我想找到所有使用 PHP 和 regEx 的演示词。

```
$input ='demo';
$pattern = ''; //$input can be used along with regex, please help here 
$text = 'This is dem*#o text, contains de12mo3 text, is .demo23* text' 

if(preg_match($pattern, $text))
{
 echo 'found';
}else{
 echo'not found';
} 
```

`demo`中的搜索词`text`可能以下列格式出现

```
1) may start with special characters/numbers Eg. "12*demo"
2) may contain special characters/numbers within the word Eg.  "de12*mo"
3) may end with special characters/numbers Eg. "demo12*" 
```

请帮助我卡住了，在此先感谢！

笔记：`The $input can be max. of 15 in length`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T07:27:06.407

## 解决方案

我将首先从字符串中删除所有特殊字符和数字，然后使用单词边界匹配单词：

```
$cleaned = preg_replace('/[^a-z ]+/i', '', 'This is dem*#o text, contains de12mo3 text, is .demo23* text');

preg_match_all('/\bdemo\b/i', $cleaned, $matches, PREG_OFFSET_CAPTURE);

var_dump($matches); 
```

会给你（[键盘演示](http://codepad.viper-7.com/iaAaZB)）：

```
array(1) {
  [0] => array(3) {
    [0] => array(2) {
      [0] => string(4) "demo"
      [1] => int(8)
    }

    [1] => array(2) {
      [0] => string(4) "demo"
      [1] => int(27)
    }

    [2] => array(2) {
      [0] => string(4) "demo"
      [1] => int(40)
    }
  }
} 
```

## 解释

`/[a-z ]+/i`第一行替换字符串中与 ''匹配的任何字符（称为主题参数） ，实质上是删除字符。正则表达式匹配不是 ( `^`) 字母`a-z`或空格的任何字符（或字符组）。该`i`标志告诉正则表达式搜索应该不区分大小写（这使我们免于编写`a-zA-Z`）。

下一行使用[单词边界](http://www.regular-expressions.info/wordboundaries.html)来匹配单词“demo”。但是，您可以用任何单词替换。

## 新的正则表达式技术

*   [`preg_replace()`](http://php.net/preg-replace)
*   [`preg_match_all()`](http://php.net/preg-match-all)
*   [词边界](http://www.regular-expressions.info/wordboundaries.html)
*   [否定字符类](http://www.regular-expressions.info/charclass.html#negated)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T07:27:53.173

```
/\b[^a-z]*d[^a-z]*e[^a-z]*m[^a-z]*o[^a-z]*\b/i 
```

在演示字符之间匹配除 az 以外的任何内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T07:24:50.340

可能效率不高；但是你可以使用这个：

`/(.*)d(.*)e(.*)m(.*)o(.*)/i`

那会匹配任何东西。

# solr - 基于 HTTP 的 Solr 二进制文件

> ID：11175689
> 
> 赞同：0
> 
> 时间：2012-06-24T07:20:05.647
> 
> 标签：solr

> **“Solr 是一个独立的企业搜索服务器，具有类似 REST 的 API。您可以通过 XML、JSON 或 HTTP 上的二进制**文件将文档放入其中（称为“索引”） 。您可以通过 HTTP GET 查询它并接收 XML、JSON 或二进制结果。”

-- 来自 Solr 网站

当它说基于 HTTP 的二进制文件时？这是否意味着，我们可以绕过 XML/Json 解析的麻烦，同时节省一些带宽，对吗？并且 Solr 将与 XML 或 Json 及其所有功能一样正常工作吗？

你推荐在 Solr 中使用二进制而不是 XML/Json 吗？它对性能有显着影响吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T08:30:08.810

结果由[响应编写者](http://wiki.apache.org/solr/QueryResponseWriter#List_of_Writers_Available)编写。您一定是在谈论 javabin 响应编写器。[不幸](http://wiki.apache.org/solr/javabin)的是，

> 目前只有一个**java**库可用于写入/读取这种格式。这是 SolrJ 使用的默认格式...

我假设你是一个 .Net 人。如果是这样，你可以选择一个好的 JSON 库，它可以在地图和列表、字符串和数字方面处理 JSON；就像Java一样。JSON 应该比（solr 的）XML 更容易解析

# c++ - 子弹物理最简单的碰撞示例

> ID：11175694
> 
> 赞同：10
> 
> 时间：2012-06-24T07:21:04.650
> 
> 标签：c++, game-physics, bulletphysics

我正在尝试仅使用 Bullet Physics 进行碰撞检测。我不需要它为我移动任何对象或使用回调处理渲染。我只想在每一帧更新对象位置，并用它来告诉我何时发生碰撞。为了获得最简单的示例，我试图找到以 btBoxShape 作为形状的对象之间的碰撞。一切运行良好，没有崩溃或明显的内存泄漏，但我没有发生冲突，所以我一定在某个地方犯了一些错误。我会尽量保持简短，而不会遗漏任何重要的内容。

这是我的世界设置功能：

```
collisionConfig      = new btDefaultCollisionConfiguration();
dispatcher           = new btCollisionDispatcher(collisionConfig);
overlappingPairCache = new btDbvtBroadphase();
solver               = new btSequentialImpulseConstraintSolver;
dynamicsWorld        = new btDiscreteDynamicsWorld(dispatcher, 
overlappingPairCache, solver, collisionConfig);         

dynamicsWorld->setGravity(btVector3(0.0f, -9.8f, 0.0f)); 
```

现在我有 btCollisionObject* 类型的玩家和敌人对象。我正在像这样设置它们：

```
mPlayerBox = new btBoxShape(btVector3(1,3,1));
mPlayerObject = new btCollisionObject();
mPlayerObject->setCollisionShape(mPlayerBox);
btTransform playerWorld;
playerWorld.setIdentity();
//playerPos is a D3DXVECTOR3 that holds the camera position.
playerWorld.setOrigin(btVector3(playerPos.x, playerPos.y, playerPos.z));
mPlayerObject->setWorldTransform(playerWorld);
mPlayerObject->forceActivationState(DISABLE_DEACTIVATION);//maybe not needed
dynamicsWorld->addCollisionObject(mPlayerObject); 
```

我对我的敌人对象做同样的事情。

然后每一帧我都用这样的东西更新我的所有对象：

```
btTransform updatedWorld;
updatedWorld.setIdentity();
updatedWorld.setOrigin(btVector3(position.x, position.y, position.z));
mPlayerObject->setWorldTransform(updatedWorld);

//do the same for my enemies, and then...

dynamicsWorld->performDiscreteCollisionDetection();
//Also tried doing this with stepSimulation(deltaTime, 7), but nothing changed.
//stepSimulation seems to only be for letting Bullet set world Transforms?

//check collisions with player
dynamicsWorld->contactTest(mPlayerObject, resultCallback);
int numManifolds = dynamicsWorld->getDispatcher()->getNumManifolds();
if(numManifolds > 0)
{
   //there's a collision, execute blah blah blah
} 
```

最后，这是定义我的结果回调的结构：

```
struct rCallBack : public btCollisionWorld::ContactResultCallback
{
 btScalar rCallback::addSingleResult(btManifoldPoint& cp, const btCollisionObject*
 colObj0, int partId0, int index0, const btCollisionObject* colObj1, int partId1,
 int index1)
 {
   btVector3 ptA = cp.getPositionWorldOnA();
   btVector3 ptB = cp.getPositionWorldOnB();
   return 0;
 }
} 
```

我看过很多演示，但它们似乎大多将运动留给 Bullet，而且由于我在角色碰撞时以设定的速度移动角色而没有任何特殊的物理特性，所以我很难将示例调整为我的应用程序。结果回调实际上来自论坛上的这篇文章： [http](http://bulletphysics.org/Bullet/phpBB3/viewtopic.php?t=6816) ://bulletphysics.org/Bullet/phpBB3/viewtopic.php?t=6816 这是关于使用三角形网格，但它似乎最接近我试图实现的。

无论如何，如果你读到这里，谢谢！非常感谢您提供的任何建议或链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T11:45:53.020

我正在编写一个 IOS 应用程序，飞行器在 3D 场景中互相射击。我使用子弹物理进行碰撞检测我将飞行器设置为运动对象，我的逻辑移动飞行器，然后更新运动对象的 btMotionState worldTransform。在我更改以下两个语句之前，我也没有得到任何碰撞检测（将玩家和敌人的掩蔽和组设置为相同）

```
dynamicsWorld->addRigidBody(mPlayerObject,1,1);
dynamicsWorld->addRigidBody(mEnemyObject,1,1);
...
dynamicsWorld->setInternalTickCallback(myTickCallback); 
```

然后我可以看到

```
void myTickCallback(btDynamicsWorld *world, btScalar timeStep) {
    int numManifolds = world->getDispatcher()->getNumManifolds();
    printf("numManifolds = %d\n",numManifolds);
} 
```

当对象发生碰撞时，numManifolds 的值变为 1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-02T16:22:23.057

**最小可运行示例**

一个球体坠落并撞击地面。

检测到碰撞并将其打印到标准输出。

Gnuplot 可视化：

![](../Images/688225fa2e4eaa6e7daa9ba15f4dac29.png)

`1`每当球体接触地面时，“碰撞”线就会出现。

对于较小的恢复系数 (`0.5`和`0.5`)：

![](../Images/d86d8b77507c3697b2a44a1409dee6c6.png)

在这里，球完全停止跳跃并连续接触地面。

主文件

```
#include <cstdio>
#include <cstdlib>
#include <vector>

#include <btBulletDynamicsCommon.h>

#define PRINTF_FLOAT "%7.3f"

constexpr float gravity = -10.0f;
constexpr float initialY = 10.0f;
constexpr float timeStep = 1.0f / 60.0f;
// TODO some combinations of coefficients smaller than 1.0
// make the ball go up higher / not lose height. Why?
constexpr float groundRestitution = 0.9f;
constexpr float sphereRestitution = 0.9f;
constexpr int maxNPoints = 500;

std::vector<btVector3> collisions;
void myTickCallback(btDynamicsWorld *dynamicsWorld, btScalar timeStep) {
    collisions.clear();
    int numManifolds = dynamicsWorld->getDispatcher()->getNumManifolds();
    for (int i = 0; i < numManifolds; i++) {
        btPersistentManifold *contactManifold = dynamicsWorld->getDispatcher()->getManifoldByIndexInternal(i);
        // TODO those are unused. What can be done with them?
        // I think they are the same objects as those in the main loop
        // dynamicsWorld->getCollisionObjectArray() and we could compare
        // the pointers to see which object collided with which.
        {
            const btCollisionObject *objA = contactManifold->getBody0();
            const btCollisionObject *objB = contactManifold->getBody1();
        }
        int numContacts = contactManifold->getNumContacts();
        for (int j = 0; j < numContacts; j++) {
            btManifoldPoint& pt = contactManifold->getContactPoint(j);
            const btVector3& ptA = pt.getPositionWorldOnA();
            const btVector3& ptB = pt.getPositionWorldOnB();
            const btVector3& normalOnB = pt.m_normalWorldOnB;
            collisions.push_back(ptA);
            collisions.push_back(ptB);
            collisions.push_back(normalOnB);
        }
    }
}

int main() {
    int i, j;

    btDefaultCollisionConfiguration *collisionConfiguration
            = new btDefaultCollisionConfiguration();
    btCollisionDispatcher *dispatcher = new btCollisionDispatcher(collisionConfiguration);
    btBroadphaseInterface *overlappingPairCache = new btDbvtBroadphase();
    btSequentialImpulseConstraintSolver* solver = new btSequentialImpulseConstraintSolver;
    btDiscreteDynamicsWorld *dynamicsWorld = new btDiscreteDynamicsWorld(
            dispatcher, overlappingPairCache, solver, collisionConfiguration);
    dynamicsWorld->setGravity(btVector3(0, gravity, 0));
    dynamicsWorld->setInternalTickCallback(myTickCallback);
    btAlignedObjectArray<btCollisionShape*> collisionShapes;

    // Ground.
    {
        btTransform groundTransform;
        groundTransform.setIdentity();
        groundTransform.setOrigin(btVector3(0, 0, 0));
        btCollisionShape* groundShape;
#if 1
        // x / z plane at y = -1.
        groundShape = new btStaticPlaneShape(btVector3(0, 1, 0), -1);
#else
        // A cube of width 10 at y = -6.
        // Does not fall because we won't call:
        // colShape->calculateLocalInertia
        // TODO: remove this from this example into a collision shape example.
        groundTransform.setOrigin(btVector3(0, -6, 0));
        groundShape = new btBoxShape(
                btVector3(btScalar(5.0), btScalar(5.0), btScalar(5.0)));

#endif
        collisionShapes.push_back(groundShape);
        btDefaultMotionState* myMotionState = new btDefaultMotionState(groundTransform);
        btRigidBody::btRigidBodyConstructionInfo rbInfo(0, myMotionState, groundShape, btVector3(0, 0, 0));
        btRigidBody* body = new btRigidBody(rbInfo);
        body->setRestitution(groundRestitution);
        dynamicsWorld->addRigidBody(body);
    }

    // Sphere.
    {
        btCollisionShape* colShape = new btSphereShape(btScalar(1.0));
        collisionShapes.push_back(colShape);
        btTransform startTransform;
        startTransform.setIdentity();
        startTransform.setOrigin(btVector3(0, initialY, 0));
        btVector3 localInertia(0, 0, 0);
        btScalar mass(1.0f);
        colShape->calculateLocalInertia(mass, localInertia);
        btDefaultMotionState *myMotionState = new btDefaultMotionState(startTransform);
        btRigidBody *body = new btRigidBody(btRigidBody::btRigidBodyConstructionInfo(
                mass, myMotionState, colShape, localInertia));
        body->setRestitution(sphereRestitution);
        dynamicsWorld->addRigidBody(body);
    }

    // Main loop.
    std::printf("step body x y z collision a b normal\n");
    for (i = 0; i < maxNPoints; ++i) {
        dynamicsWorld->stepSimulation(timeStep);
        for (j = dynamicsWorld->getNumCollisionObjects() - 1; j >= 0; --j) {
            btCollisionObject *obj = dynamicsWorld->getCollisionObjectArray()[j];
            btRigidBody *body = btRigidBody::upcast(obj);
            btTransform trans;
            if (body && body->getMotionState()) {
                body->getMotionState()->getWorldTransform(trans);
            } else {
                trans = obj->getWorldTransform();
            }
            btVector3 origin = trans.getOrigin();
            std::printf("%d %d " PRINTF_FLOAT " " PRINTF_FLOAT " " PRINTF_FLOAT " ",
                    i,
                    j,
                    float(origin.getX()),
                    float(origin.getY()),
                    float(origin.getZ()));
            if (collisions.empty()) {
                std::printf("0 ");
            } else {
                std::printf("1 ");
                // Yes, this is getting reprinted for all bodies when collisions happen.
                // It's just a quick and dirty way to visualize it, should be outside
                // of this loop normally.
                for (auto& v : collisions) {
                    std::printf(
                            PRINTF_FLOAT " " PRINTF_FLOAT " " PRINTF_FLOAT " ",
                            v.getX(), v.getY(), v.getZ());
                }
            }
            puts("");
        }
    }

    // Cleanup.
    for (i = dynamicsWorld->getNumCollisionObjects() - 1; i >= 0; --i) {
        btCollisionObject* obj = dynamicsWorld->getCollisionObjectArray()[i];
        btRigidBody* body = btRigidBody::upcast(obj);
        if (body && body->getMotionState()) {
            delete body->getMotionState();
        }
        dynamicsWorld->removeCollisionObject(obj);
        delete obj;
    }
    for (i = 0; i < collisionShapes.size(); ++i) {
        delete collisionShapes[i];
    }
    delete dynamicsWorld;
    delete solver;
    delete overlappingPairCache;
    delete dispatcher;
    delete collisionConfiguration;
    collisionShapes.clear();
} 
```

main.gnuplot

```
#!/usr/bin/env gnuplot
set terminal png size 1024,1024
set output "main.png"
set key autotitle columnheader
plot 'main.dat' using 1:($2 == 1 ? $4 : 1/0), \
     '' using 1:($2 == 1 ? $6 : 1/0) 
```

编译并运行：

```
sudo apt install libbullet-dev
g++ -ggdb3 -O3 -std=c++11 -Wall -Wextra -pedantic \
  $(pkg-config --cflags bullet) -o main.out main.cpp $(pkg-config --libs bullet)
./main.out > main.dat
gnuplot main.gnuplot 
```

代码基于：[http ://www.bulletphysics.org/mediawiki-1.5.8/index.php](http://www.bulletphysics.org/mediawiki-1.5.8/index.php)

此版本侧重于区分哪个对象触及哪个对象：[https ://gamedev.stackexchange.com/a/120881/25171](https://gamedev.stackexchange.com/a/120881/25171)

GitHub上游：[https ://github.com/cirosantilli/cpp-cheat/blob/503a3b6487ccb75334798839b5ed912270446d14/bullet/ground_ball.cpp](https://github.com/cirosantilli/cpp-cheat/blob/503a3b6487ccb75334798839b5ed912270446d14/bullet/ground_ball.cpp)

接下来你需要的是一个比 gnuplot 更好的 3D 形状可视化机制。示例浏览器是研究的一种可能性：[如何将子弹物理应用于绘制的 Opengl 3d 形状](https://stackoverflow.com/questions/26948060/how-to-apply-bullet-physics-to-drawn-opengl-3d-shapes/37059619#37059619)如果它们有 glTF 输出也将是惊人的：[https ://www.khronos.org/gltf/](https://www.khronos.org/gltf/)

在 Bullet 2.88、Ubuntu 20.04 上测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-24T17:00:24.737

您可以按照[此处](http://bulletphysics.org/mediawiki-1.5.8/index.php/Collision_Callbacks_and_Triggers#Contact_Information)的说明查看联系信息：

**联系信息**

> 确定世界上现有对象之间是否发生碰撞的最佳方法是遍历所有接触流形。这应该在模拟滴答（子步骤）回调期间完成，因为可能会在单个 stepSimulation 调用的多个子步骤中添加和删除联系人。接触流形是包含碰撞对象对之间所有接触点的缓存。一个好方法是遍历整个碰撞/动力学世界中的所有对象对：

```
//Assume world->stepSimulation or world->performDiscreteCollisionDetection has been called

    int numManifolds = world->getDispatcher()->getNumManifolds();
    for (int i=0;i<numManifolds;i++)
    {
        btPersistentManifold* contactManifold =  world->getDispatcher()->getManifoldByIndexInternal(i);
        btCollisionObject* obA = static_cast<btCollisionObject*>(contactManifold->getBody0());
        btCollisionObject* obB = static_cast<btCollisionObject*>(contactManifold->getBody1());

        int numContacts = contactManifold->getNumContacts();
        for (int j=0;j<numContacts;j++)
        {
            btManifoldPoint& pt = contactManifold->getContactPoint(j);
            if (pt.getDistance()<0.f)
            {
                const btVector3& ptA = pt.getPositionWorldOnA();
                const btVector3& ptB = pt.getPositionWorldOnB();
                const btVector3& normalOnB = pt.m_normalWorldOnB;
            }
        }
    } 
```

您可能对跟踪其自身重叠对的 btGhostObject 感兴趣。

# asp.net-mvc - 子资源的 ASP MVC 路由

> ID：11175696
> 
> 赞同：0
> 
> 时间：2012-06-24T07:21:12.470
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我注意到 StackOverflow 使用这个网址：

```
http://stackoverflow.com/posts/123123/revisions 
```

如何将此类路由添加到 ASP MVC（3 或 4）？如果我想像这样添加修订号怎么办：

```
http://stackoverflow.com/posts/123123/revisions/2 
```

这转化为

*   控制器=帖子
*   邮政编号=123123
*   子控制器=修订
*   修订 ID=2

我的问题是我必须提前设置整个路由。如果我能够设置帖子路由并将特定帖子资源之间的路由添加到称为修订的子资源，我也可以在返回帖子资源的任何路由之后添加 /revision 。

谢谢你，伊多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T07:34:08.507

这样的路线在开始时很容易定义：

```
{controller}/{postId}/{action}/{revisionID} 
```

但它很可能匹配太多。这可以通过两种方式缓解：

*   使用约束来限制`postId`正`revision`整数（例如 regex `\d+`）。
*   硬编码 和 的`controller`名称`action`：

    ```
    posts/{postId}/revision/{revisionID} 
    ```

    并因此允许将此路由放置在路由列表的早期，同时仅匹配非常特定的 URL 格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T07:34:59.333

我不完全确定我是否理解你，但我认为这就是你想要做的。这将使您能够处理普通的*Posts* URL 路由，并附加一个可选的*Revisions路由。*

```
routes.MapRoute(
    "RevisionsRoute",                               // Route name
    "posts/{PostID}/{SubController}/{RevisionID}",  // URL with parameters
    new { 
       controller = "posts", 
       action = "Index", 
       SubController = UrlParameter.Optional, 
       RevisionID = UrlParameter.Optional  
    }                                               // Parameter defaults
); 
```

然后在此路由的控制器操作中，检查是否存在任何*SubController*或*RevisionID*参数。

```
public ActionResult Index(string SubController = null, int RevisionID = -1)
{
    if (SubController != null)
    {
        if (SubController == "revisions")
        {
            // handle revisions route
        }
    }
    else
    {
        // handle normal posts route
    }
} 
```

这样用户就可以通过正常方式获得帖子：

```
/posts/1 
```

或以您想要的方式进行修订：

```
/posts/1/revisions/2 
```

# java - 输入经纬度时模拟器重启

> ID：11175699
> 
> 赞同：0
> 
> 时间：2012-06-24T07:21:27.610
> 
> 标签：java, android, android-emulator, android-location

我正在尝试获取用户的纬度和经度。我创建了一个基本应用程序。当我运行它并提供纬度和经度时，它会在模拟器中重新启动操作系统。我怎样才能解决这个问题？

这是我的代码

```
public class MGeolocationActivity extends Activity {
TextView tvLat;
TextView tvLong;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    tvLat = (TextView)findViewById(R.id.tvLat);
    tvLong = (TextView)findViewById(R.id.tvLong);

    LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    LocationListener ll = new myLocationListener();
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);
}

class myLocationListener implements LocationListener {

    @Override
    public void onLocationChanged(Location location) {
        if(location != null) {
            double pLong = location.getLongitude();
            double pLat = location.getLatitude();
            tvLat.setText(Double.toString(pLat));
            tvLong.setText(Double.toString(pLong));
        }
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T07:25:18.977

这是 sdk 2.3 模拟器中的一个错误。使用 2.2 或其他模拟器

# java - request.getHeader(String value)的参数列表

> ID：11175706
> 
> 赞同：1
> 
> 时间：2012-06-24T07:22:36.410
> 
> 标签：java, browser

**我需要request.getHeader(String value)**的 String 参数列表。我已经知道一个是“User-Agent”（例如 request.getHeader("User-Agent") ）

同样对于此类其他方法的此类情况，我如何获取此类方法的参数列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:26:16.210

您可以使用[getHeaderNames()](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getHeaderNames%28%29)。它返回包含`Enumeration<java.lang.String>`的所有标题名称中的一个`request`。

# php - 如何用php重写javascript函数

> ID：11175711
> 
> 赞同：-4
> 
> 时间：2012-06-24T07:23:55.973
> 
> 标签：php, javascript

我有一个脚本。我将展示示例。

```
 <form>    
    <textarea id='input'></textarea>
    <input onclick="convert()" value="go function" />
<textarea id="output"></textarea>
    </form>

<script type="text/javascript" >

function convert() {
src = document.getElementById("input").value;
document.getElementById("output").value = Z1_Uni(src);
}

function Z1_Uni(input)
{
   var output=input;
   var tallAA = "\u102B";
   var AA = "\u102C";
   var vi = "\u102D";
   var ii = "\u102E";
   var u = "\u102F";
   var uu = "\u1030";
}
</script> 
```

此示例将使用 javascript 显示输出结果。我想用 php 重写。

示例如下。

```
<form action="convert.php" method="post">
<textarea id="input" name="input"></textarea>
<input type="submit" Value="go to convert page">
</form> 
```

转换.php

```
<?php $input=$_POST['input'];

$output=(?????????????? );
//(Here javascript function will be work.I want to know this step.)
?> 
```

示例链接在这里[http://mrdba.info/zawgyi-converter/](http://mrdba.info/zawgyi-converter/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:55:11.083

看起来您正在尝试描述某种类似于此处的 Javascript Unicode 编码功能：

[http://centralupload.com/files/16995_7p7sw/akyinnarnantaw.txt](http://centralupload.com/files/16995_7p7sw/akyinnarnantaw.txt)

此函数将特定字符编码为其 unicode 表示 EG: '\u102C'

在 php 中，您可以为此使用 json_encode：

```
<?php
$input = "你好";

$output = json_encode(utf8_encode($input));

echo $output;
?> 
```

# java - 调用 java 子类受保护方法时方法访问被拒绝

> ID：11175720
> 
> 赞同：7
> 
> 时间：2012-06-24T07:25:06.740
> 
> 标签：java, reflection, methods, illegalaccessexception

我有以下问题：我有一个类，试图使用反射来调用其 OWN 受保护的方法之一，但出现异常：java.lang.IllegalAccessException: access to method denied

有人可以对此有所了解吗？

基类：

```
public abstract class BaseReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // invoke the correct event method:
        Method method;
        try {
            method = this.getClass().getDeclaredMethod("testMethod");
            method.invoke(this);
        } catch (Throwable ex) {
             // ... display exception message
        }
    }

    protected void testMethod() {
    }

} 
```

派生的具体类：

```
class MyReceiver extends BaseReceiver {
    @Override
    protected void testMethod() {
        // display error message
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-24T09:17:42.130

受保护的方法只能从包、类本身或扩展它的类中访问。

据我所知（基于`Exception`）您的扩展类（`MyReceiver`）在另一个包中，然后是超类（`BaseReceiver`）。意义：

1.  `MyReceiver`并且`BaseReceiver`不在同一个包中；
2.  `BaseReceiver`不扩展`MyReceiver`；

现在，正如您在代码中看到的那样，您正在做：`method = this.getClass().getDeclaredMethod("testMethod");`这看起来不错，但这不是您想要的。由于此方法将返回`MyReceiver.testMethod()`方法，并且无法从中访问`BaseReceiver`（如您所见，您正在使用`this.getClass()`返回实例类的方法，在这种情况下`MyReceiver`）。

你可以做一些事情：

```
...
method = BaseReceiver.class.getDeclaredMethod("testMethod");
... 
```

有了这个，您指示您希望在`BaseReceiver`类上声明受保护的方法。当然，当您稍后调用它时，`method.invoke(this);`您将调用被覆盖的方法。

*但是在这种情况下使用反射是没有意义的，因为你有`testMethod()`可用的，并且调用它（就像 this.testMethod() 一样简单）你将调用被覆盖的反射。*

另一种可能性是`setAccessible(true)`使用以下方法：

```
method = getClass().getDeclaredMethod("testMethod");
method.setAccessible(true);
method.invoke(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T14:24:18.503

`this`in的静态类型`BaseReceiver`是`BaseReceiver`，因此您通常无法访问`MyReceiver.testMethod`. 除此之外，反射 API 检查调用者类，而不是实例（考虑到反射的用途，这本身就是疯了）。

您应该可以使用`BaseReceiver.testMethod`.

在大多数（但不是全部）使用反射的情况下，反射是一个坏主意。

# jquery - jQuery切换幻灯片动画

> ID：11175732
> 
> 赞同：4
> 
> 时间：2012-06-24T07:25:58.600
> 
> 标签：jquery, toggle, slide

我创建了自定义切换幻灯片动画。它按预期工作正常，但在第一次点击时不会滑动。如果您单击地图箭头，那么您将看到切换类将应用于它，但地图不会滑动。但如果你再点击两次，它就会滑动。

我对 jquery 很陌生，我也搜索了很多，但没有找到任何解决方案。这是代码；

```
$('.map_btn').click(function() {
    $('.map_btn').toggleClass('toggle');

    $('.map_btn').on('click', function() {
        $('.map_wrapper').stop().animate({
            opacity: 1,
            height: 420
        });
    });
    $('.map_btn.toggle').on('click', function() {
        $('.map_wrapper').stop().animate({
            opacity: 0,
            height: 0
        });
    });
}); 
```

[http://jsfiddle.net/h2fh6/](http://jsfiddle.net/h2fh6/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T07:33:31.627

除非您需要该课程来做其他事情，否则请使用[`.toggle()`](http://api.jquery.com/toggle-event/).

```
$('.map_btn').toggle(function() {
    $('.map_wrapper').stop().animate({
        opacity: 1,
        height: 420
    });
},function() {
    $('.map_wrapper').stop().animate({
        opacity: 0,
        height: 0
    });
}); 
```

我真的认为他们应该将这个函数命名为**toggleClick**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T07:36:34.677

你可以试试这个

```
$('.map_btn').toggle(function() {
 $('.map_btn').toggleClass('toggle');
$('.map_wrapper').stop().animate({
    opacity: 1,
    height: 420
});
},function() {
 $('.map_btn').toggleClass('toggle');
$('.map_wrapper').stop().animate({
    opacity: 0,
    height: 0
});
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T07:42:07.273

下面的代码应该适用于您的图标动画！

[http://jsfiddle.net/epinapala/h2fh6/19/](http://jsfiddle.net/epinapala/h2fh6/19/)

```
$('.map_btn').toggle(function() {
    $('.map_btn').toggleClass('toggle');
    $('.map_wrapper').stop().animate({
        opacity: 1,
        height: 420
    });
},function() {
    $('.map_btn').toggleClass('toggle');
    $('.map_wrapper').stop().animate({
        opacity: 0,
        height: 0
    });
}); 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T07:51:55.277

这是我的看法，通过缓存被调用的选择器（以及明显的闭包范围，这就是我将其`$(window).load();`放在那里的原因），您将获得更好的整体性能。

如果您正在制作动画，则必须缓存。你必须。不要在重新选择 jQuery 对象调用（如`$('.map_wrapper').stop().animate()`. 它效率低下，只应在必要时进行，例​​如当 DOM 已被修改并需要查找当前状态时。

如果在按钮上找到 ，我的方法只是`effect`用新设置切换变量。`.toggle`简单、可靠。`iframe`谷歌地图的加载有时似乎确实有轻微的滞后。这在 jsFiddle 环境中可能是不可避免的。

```
$(window).load(function(){
    var $mapbtn = $('.map_btn'),
        $wrapper = $('.map_wrapper');

    $mapbtn.click(function() {
        var $this = $(this),
            effect = { opacity: 0, height: 0 };

        $this.toggleClass('toggle');

        if ($this.is('.toggle')) {
            effect.opacity = 1;
            effect.height = 420;
        }

        $wrapper.stop().animate(effect);
    });
}); 
```

[http://jsfiddle.net/userdude/h2fh6/21/](http://jsfiddle.net/userdude/h2fh6/21/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T07:53:34.213

您当前解决方案的问题是类在某处变得混乱，`toggleClass()`而且您已经在同一元素的另一个处理程序中嵌套了一个`click`处理程序。`.map_btn``click`

因此，流程有点混乱。

你可以试试这个

```
$('.map_btn').toggle(function() {
    $('.map_btn').toggleClass('toggle');
    $('.map_wrapper').stop().animate({
        opacity: 1,
        height: 420
    });
}, function() {
    $('.map_btn').toggleClass('toggle');
    $('.map_wrapper').stop().animate({
        opacity: 0,
        height: 0
    });
});​ 
```

仅使用，`.toggle()`因此您不必编写 2 个单独的方法。

小提琴链接 - [http://jsfiddle.net/h2fh6/20/](http://jsfiddle.net/h2fh6/20/)

[您可以在此处](http://api.jquery.com/toggle/)阅读有关切换的更多信息

# sqlite - 在 SQLite 中选择部分文本

> ID：11175740
> 
> 赞同：0
> 
> 时间：2012-06-24T07:26:57.827
> 
> 标签：sqlite, select

在我的 SQLite 数据库中，我有一个**nvarchar**列。But when select this column, want to select 30 first character. 我测试**substr**和**substring**但不是真的。我怎样才能做到这一点？谢谢

```
public static DataTable FetchNotesList(int PointId)
            {
                DataTable FetchNotesListDataTable = new DataTable();
                using (SQLiteConnection FetchNotesListConnection = new SQLiteConnection(BLL.SettinClass.IASQLiteConnectionString))
                {
                    FetchNotesListConnection.Open();

                    SQLiteCommand FetchNotesListCommand = new SQLiteCommand();//FetchNotesListConnection.CreateCommand();
                    FetchNotesListCommand.Connection = FetchNotesListConnection;
                    FetchNotesListCommand.CommandText = "SELECT NoteId, SUBSTR(NoteContent,0,10), NoteDate, NoteDateTime FROM PointsNotes WHERE PointsId = @PointId";
                    FetchNotesListCommand.Parameters.AddWithValue("PointId", PointId);
                    SQLiteDataAdapter FetchNotesListDataAdapter = new SQLiteDataAdapter(FetchNotesListCommand);
                    FetchNotesListDataAdapter.Fill(FetchNotesListDataTable);
                }

                return FetchNotesListDataTable;
            } 
```

我使用此代码。日期列显示但notecontent不显示在gridex中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:35:57.523

好吧，由于您尚未发布代码，因此获取部分文本的基本语法是：

*   **SUBSTR（字段名称，开始位置）**
*   **SUBSTR(field_name,start_location,substring_length)**

因此，您可以执行以下操作：

```
SELECT SUBSTR(field_name,0,30) FROM your_table; 
```

请参阅：[参考](http://sqlite.awardspace.info/syntax/sqlitepg08.htm)

# objective-c - 我想知道为什么我在调用 [NSUbiquitouskeyValueStore 同步] 时会冻结应用程序

> ID：11175743
> 
> 赞同：2
> 
> 时间：2012-06-24T07:27:31.847
> 
> 标签：objective-c, semaphore, freeze, nsubiquitouskeyvaluestore

有时它会在几分钟前停止冻结，有时我等待 10 分钟然后强制退出。当停止并查看线程调用时，我看到来自 NSUbiquitouskeyValueStore _forceSynchronize 方法的信号量陷阱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:26:07.243

几个问题：

1.  它是在模拟器中，设备中还是在 OS X 中？
2.  您是否在尝试捕获异常时进行了调试？（或更笼统地说：您是否检查过没有异常）？
3.  最后：您可以发布挂起的完整回溯吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T09:38:38.310

这是苹果公司所说的：

NSUbiquitousKeyValueStore类提供了一个**用于**在 iCloud 中存储少量配置数据的编程接口。您可以使用此类在同一用户拥有的不同设备上运行的应用程序实例之间同步信息。此类应用于在应用程序实例之间共享非关键数据，例如首选项。您应该避免使用它来存储对应用程序行为至关重要的数据。

此类仅用于使用属性列表对象类型存储少量数据：**NSNumber、NSString、NSDate、NSData、NSArray 或 NSDictionary**. 您可以使用这些数据为用户创建更无缝的体验。例如，在多个设备上运行的杂志应用程序可能会存储正在阅读的杂志的哪个版本以及用户当前正在阅读的页面。不要使用键值存储来存储一般应用数据或需要频繁更新的数据。应用程序键值存储中的可用空间总量限制为 1 MB。（也有每个键的限制，目前设置为 1 MB，最多允许 1024 个键。）如果您尝试写入超过这些配额的数据，则写入尝试将失败并且旧值（如果任何）将保持在原位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-13T21:58:41.957

如果在模拟器中运行，请退出模拟器并再次构建并运行应用程序。

# php - 在第三列中插入数据时如何保留两列的唯一组合？

> ID：11175746
> 
> 赞同：1
> 
> 时间：2012-06-24T07:28:16.127
> 
> 标签：php, mysql, unique

我在 mysql 表中有三列：tax_id、company_name、store_name。我需要 tax_id 和 company_name 是唯一的组合，并且 tax_id 或 company_name 不能与另一个 company_name 或 tax_id 单独存在。另一件事是我需要输入该公司拥有的不同（所有）商店的第三列名称。表格示例应为：

```
tax_id| company_name| store_name
1324  | Kmart       | 1st ave
1324  | Kmart       | broadway
1324  | Kmart       | 5th ave
7725  | DM          | shop 1
7725  | DM          | shop 2
7725  | DM          | shop 7
etc... 
```

禁止使用不同公司的tax_id 或使用不同tax_id 的公司名称。欢迎任何帮助，也欢迎任何代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:38:37.167

我会使用 2 张桌子：

*   公司
*   商店

公司包含 tax_id 和 company_name。Stores 包含 tax_id 作为外键和 store_name。

然后你可以让 tax_id 和 company_name 唯一并且 tax_id 主要

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T07:42:27.243

由于您具有一对一的映射关系，因此建议您对数据库进行规范化`tax_id`。`company_name`您应该移动`tax_id to company_name mapping`到另一个表并保留当前表中的一个`company_name`或`tax_id`。你可以用它`JOIN`来挤出你想要的任何信息。

如果您无法更改您的数据库结构，那么您将必须查询数据库以了解 company_name 是否具有 tax_id，然后使用后续信息进行插入查询。

有关更多信息，请查看[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)

# c# - 带有 let 运算符的查询的 linq 版本

> ID：11175747
> 
> 赞同：0
> 
> 时间：2012-06-24T07:28:20.107
> 
> 标签：c#, linq, entity-framework, linq-to-sql, c#-4.0

我有这样的查询：

```
SELECT au_lname,der.col FROM authors INNER JOIN (SELECT t.au_id, COUNT(title_id) AS 'col'
                       FROM titleauthor t GROUP BY t.au_id) der ON authors.au_id=der.au_id 
```

我想用`let`操作员写这个。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T07:32:57.640

我认为没有充分的理由在`let`这里使用。您可以只使用组加入。

```
var query = from author in authors
            join title in titleAuthor on author.AuthorId equals title.AuthorId
            into titles
            where titles.Count() != 0
            select new { author.LastName, Count = titles.Count() }; 
```

你*可以*在这里使用`let`计数，我想：

```
var query = from author in authors
            join title in titleAuthor on author.AuthorId equals title.AuthorId
            into titles
            let count = titles.Count()
            where count != 0
            select new { author.LastName, Count = count }; 
```

或者您可以使用原始查询的更直接翻译：

```
var innerQuery = from title in titleAuthor
                 group title by title.AuthorId into titles
                 select new { AuthorId = titles.Key, Count = titles.Count() };
var query = from author in authors
            join titleCount in innerQuery
              on author.AuthorId equals titleCount.AuthorId
            select new { author.AuthorId, titleCount.Count }; 
```

# javascript - json 获取特定语言

> ID：11175750
> 
> 赞同：0
> 
> 时间：2012-06-24T07:29:10.810
> 
> 标签：javascript, json

如果我有一个带有不同语言短语的 JSON：

```
var lang = {
    'topic' : {
        'en' : 'Topic',
        'et' : 'Teema',
        'fi' : 'Aihe'
    },
    'MainPage' : {
        'en' : 'Main page',
        'et' : 'Pealeht',
        'fi' : 'Pääsivu'
    }//,
    //...etc
}; 
```

如何定义用于选择特定语言的函数：

```
function getText(lang, langKey) {
    //???????
    return langJson;
} 
```

输出相同的短语，例如：

```
getText(lang, 'en'); //outputs {topic:'Topic',MainPage:'Main page',..}
getText(lang, 'et'); //outputs {topic:'Teema',MainPage:'Pealeht',..}
getText(lang, 'fi'); //outputs {topic:'Aihe',MainPage:'Pääsivu',..} 
```

万事如意：我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T07:33:21.413

基本上，您必须遍历整个`lang`对象并*选择*正确语言的值。

`Object.keys`将返回一个`Array`包含初始`lang`对象的键。您可以使用它们来创建新对象。您可以使用 for 循环遍历这些键并将相应的值添加到结果对象，但我喜欢`reduce`这样做：

```
function getText(lang, langKey) {
  return Object.keys(lang).reduce(function(re, key) {
    re[key] = lang[key][langKey];
    return re;
  }, {})
} 
```

# android - IntentService 的 onStartCommand(..) 方法线程安全吗？

> ID：11175752
> 
> 赞同：6
> 
> 时间：2012-06-24T07:29:45.967
> 
> 标签：android, thread-safety, intentservice

我有一个[IntentService](http://developer.android.com/reference/android/app/IntentService.html)类，可以从复杂应用程序中的各个位置启动 - 活动、后台线程、其他服务。我想记录服务被调用的次数。我在我的 IntentService 类中使用一个私有 int 变量来跟踪它，我从我的[onStartCommand(...)](http://developer.android.com/reference/android/app/IntentService.html#onStartCommand%28android.content.Intent,%20int,%20int%29)方法中递增它。

我突然想到，可以从各种异步线程调用 onStartCommand(...) 方法，这可能不是线程安全的解决方案。所以问题是，我是否需要将对该计数器变量的访问包装在同步块中，或者 onStartCommand(...) 的 IntentService 实现是否为我处理了这个？

作为说明，我知道我可以安全地从[onHandleIntent(...)](http://developer.android.com/reference/android/app/IntentService.html#onHandleIntent%28android.content.Intent%29)增加变量，但我需要计算实际请求而不是执行的意图。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-24T13:29:31.220

> 我突然想到，可以从各种异步线程调用 onStartCommand(...) 方法，这可能不是线程安全的解决方案。

`onStartCommand()`总是在任何服务的主应用程序线程上调用。您不能`onStartCommand()`同时在两个线程中被调用。

# java - 反混淆 Java，在 jar 中批量重命名类

> ID：11175753
> 
> 赞同：4
> 
> 时间：2012-06-24T07:30:02.007
> 
> 标签：java, obfuscation, deobfuscation

我有一个 jar，其中的类文件已被混淆。我很乐意手动对其进行去混淆处理，但问题是类名太长以至于 Windows 无法将它们保存到磁盘。是否有任何工具可以放入一个 jar 并重命名所有类，最好还有方法和字段？

此外，不要回答说没有充分的理由进行反编译等，因为它们既不向社区贡献任何有用的信息，也不成立。就我而言，我正在检查此特定应用程序中的安全问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-02T09:45:35.930

使用现代工具解决此问题的最佳方法是使用[Proguard](http://proguard.sourceforge.net/)来简化类/成员名称。然后使用[Enigma](http://www.cuchazinteractive.com/enigma/)等工具手动创建映射。

我还在[用 Java-ASM 编写一个程序，](https://github.com/LPK-Matt/SkidSuite2/blob/master/SkidReob/src/me/lpk/gui/windows/WindowEnigma.java)它接受映射并将它们转换为可运行的 Jar。出口时，Engima 本身并不公平。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T11:11:23.863

我可能会在虚拟机和一些 linux 发行版中使用反混淆器。
反混淆后，您可以将文件打包到 zip / jar 中，并在 Windows 环境中继续开发。

我会推荐带有[Ubuntu的](http://www.ubuntu.com/)[VirtualBox](https://www.virtualbox.org/)。

# iphone - 我对 UINavigationController 的使用有什么问题？

> ID：11175755
> 
> 赞同：0
> 
> 时间：2012-06-24T07:30:25.920
> 
> 标签：iphone, ios, uinavigationcontroller

我想`UINavigationController`在我的应用程序中使用，我的用法如下：

1）在我的 root`view`的 .h 文件中，我声明了一个`navController`：

```
UINavigationController *navController; 
```

2) 在我的根视图的 .m 文件中，我初始化`navController`by (in `viewDidLoad`)：

```
navController = [[UINavigationController alloc] initWithRootViewController:self]; 
```

3）在我的 root`view`的 .m 文件中，我添加了一个处理程序来处理按钮单击事件，并在事件处理程序中我尝试通过以下方式呈现另一个视图：

```
WBSDKTimelineViewController *controller = [[WBSDKTimelineViewController alloc] initWithAppKey:kWBSDKDemoAppKey appSecret:kWBSDKDemoAppSecret];
[navController pushViewController:controller animated:YES]; 
```

之后`view`屏幕上没有出现，什么也没发生，我确定我的代码被执行了，我的用法有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:38:40.427

您将需要在 AppDelegate.m 中定义 UINavigationController，如下所示。

```
 MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil];
 self.navigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];
 self.window.rootViewController = self.navigationController; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T07:46:26.323

你的根视图控制器应该已经包含在一个`UINavigationController`. 然后`UIViewController`有一个属性`navigationController`来访问它`UINavigationController`并将其他视图控制器推送/弹出到堆栈。

# html - IE 中图像和内联块的最大宽度

> ID：11175757
> 
> 赞同：2
> 
> 时间：2012-06-24T07:31:01.210
> 
> 标签：html, internet-explorer, css, fluid-layout

我正在尝试使图像适合容器，并带有适合图像宽度的包装 div。我可以成功地做到这一点，但是当我将图像的最大宽度设置为 100%（以确保它适合包含 div）时，它在 IE9/IE8 中不起作用（图像以全宽显示）。在 Chrome 中运行良好。当包装器 div 未设置为内联块时，最大宽度有效。我也尝试过浮动这两个元素，但也没有用。

这是小提琴：http: [//jsfiddle.net/tbgWv/](http://jsfiddle.net/tbgWv/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T04:01:28.147

尝试添加`width:100%;`到 img。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-24T08:26:45.083

IE 通常是奇怪的 :D

尝试给图像一个绝对宽度值，就像我在[这里](http://jsfiddle.net/N69mw/)所做的那样。

# html - 输入提交按钮的图像背景和文本 - CSS

> ID：11175759
> 
> 赞同：2
> 
> 时间：2012-06-24T07:31:08.387
> 
> 标签：html, css, forms

我正在尝试为我的表单制作一个按钮，该按钮具有图像背景并在背景顶部显示文本。看起来很简单，但无论我尝试什么，我都在努力让文本出现，并且在一个小时的搜索后努力寻找有类似问题的人，所以假设我在做一些愚蠢的事情！

这是我的CSS：

```
#detail-left .cart-button {
    background : url("../graphics/cart-button.png");
    border : none;
    color : transparent;
    height: 48px;
    width: 118px;
    padding: 10px;
    line-height: 48px;
} 
```

和我的html：

```
<input class='cart-button' type='submit' value='Add' /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T07:36:01.537

去除颜色：透明。它使您的文本透明给它一些颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T07:35:59.023

从您的样式类中删除`color : transparent;`，应该可以

```
#detail-left .cart-button {
    background : url("../graphics/cart-button.png");
    border : none;
    height: 48px;
    width: 118px;
    padding: 10px;
    line-height: 48px;
} 
```

试试这个工作[小提琴](http://jsfiddle.net/4HpXQ/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T07:41:44.997

“颜色：透明；” 设置将导致文本完全透明，如果您希望文本具有半透明，请考虑使用 rgba。

# drupal - Drupal 和 Joomla 的框架是什么？

> ID：11175763
> 
> 赞同：0
> 
> 时间：2012-06-24T07:31:46.733
> 
> 标签：drupal, joomla, php

Drupal 和 Joomla 使用任何常见的 PHP 框架还是实现自己的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T07:55:39.067

Drupal 和 Joomla 是 CMS 即内容管理系统

您可以将它们用作框架。它们是内置框架。

看：

1.  [CMS（joomla，drupal）和框架（Zend，Symfony，CI）之间的区别](https://stackoverflow.com/questions/3797459/difference-between-cmsjoomla-drupal-and-frameworkszend-symfony-ci)
2.  [http://steveburge.com/blog/general-cms-issues/joomla-and-drupal-version-2/](http://steveburge.com/blog/general-cms-issues/joomla-and-drupal-version-2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:47:49.167

Drupal 本身就是一个框架！众所周知，Drupal 是一个出色的开源 Web 内容管理系统，但这种观点是有限的。Drupal 有一组很棒的 AP​​I，你可以关闭 Drupal 中的几乎所有功能（模块），直到你最终得到一个核心系统。使用贡献的模块和 API，您可以在此基础上创建一个全新的 Web 应用程序。

对于 Drupal 5 - 7，所有这些都是正确的。随着 Drupal 8 的发布，情况将发生很大变化。Drupal 社区决定使用 Symfony2 框架的几个组件来支持 Drupal 8 的核心。这意味着一些到许多 Drupal 核心子系统将由 Symfony2 组件和 Drupal 代码提供支持。由于 D8 的开发是一个持续的过程，很难说会实现多少“Symfony2 Awesome”。有一件事是肯定的，两个社区都期待看到结果。:)

Symfony：[http ://symfony.com/](http://symfony.com/)

Drupal + Symfony：[http ://symfony.com/blog/symfony2-meets-drupal-8](http://symfony.com/blog/symfony2-meets-drupal-8)

# paypal - 在多卖家市场设置中跟踪贝宝付款

> ID：11175770
> 
> 赞同：1
> 
> 时间：2012-06-24T07:33:39.950
> 
> 标签：paypal, payment

我想创建一个市场，用户可以在其中列出商品并让买家直接通过贝宝付款。有没有办法在我们这边跟踪这些付款，以便我可以对数据进行处理（例如将订单标记为已完成）？我在想我可以让卖家将他们的 paypal ipn url 设置为我的脚本，但这可能很麻烦。如果不可能，您建议采用哪种方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:26:59.810

看看 PayPal 的**自适应支付**产品。[ [https://www.x.com/developers/paypal/products/adaptive-payments](https://www.x.com/developers/paypal/products/adaptive-payments) ]

它允许您（作为 API 调用者）在买家和第三方卖家之间建立交易。

即使您不是收款人，您仍会通过即时付款通知 (IPN) 收到付款完成通知。

另外，自适应支付的一个不错的功能是它使您能够执行所谓的链式支付。

简而言之，它允许您在买卖双方之间建立交易，并且**它**使您可以选择成为交易中的次要接收者。这样做的目的是，它允许您自动从卖家那里收取佣金，同时对买家完全隐藏。

这是在您的市场上获利的一种非常好的方式，另外还有一个好处是 PayPal 会为您自动完成整个事情。不需要额外的编程:)

# javascript - 使用参数传递时无法调用 Javascript 函数

> ID：11175779
> 
> 赞同：0
> 
> 时间：2012-06-24T07:35:48.913
> 
> 标签：javascript, function, onclick, call, argument-passing

我有一个 div，它 onclick 调用一个 javascript 函数。但是当我调用带有参数的javascript时它没有这样做。这很奇怪。

下面的代码在单击“交易”按钮时调用函数交易（）

```
$("#content").append('<div class="malldetails"><a href="javascript:void(0);"><button class="left" onclick="deals()">Deals</button></a></div>');

function deals(){
alert("This works");
} 
```

但是下面的代码不起作用。

```
$("#content").append('<div class="malldetails"><a href="javascript:void(0);"><button class="left" onclick="deals(mallName)">Deals</button></a></div>');

function deals(NameOfMall){
alert("This does not work");
} 
```

我相信这应该是一个小问题，但只是无法弄清楚。请帮助我出色的编码员！多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T07:42:38.083

您必须在 mallName 周围使用引号

```
$("#content").append('<div class="malldetails"><a href="javascript:void(0);"><button class="left" onclick="deals(\'mallName\')">Deals</button></a></div>');

function deals(NameOfMall){
    alert("This does not work");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T07:43:53.090

如果`mallName`在触发 onclick 时未定义（我怀疑是这样），则不会发生警报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T07:50:40.217

打开浏览器上的 javascript 错误（如果使用 IE）并查看它是否显示错误。如果是，那么您需要先声明变量。

所以这将取决于这个 javascript 的放置位置。代码中显示的错误是由于未定义变量造成的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T07:56:55.167

您的代码正在运行..检查 mallName 是否已初始化..它可能未定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T08:14:00.970

```
onclick="deals("Lechmere Mall")" //wont work. 
```

检查与

```
onclick="deals(\'Lechmere Mall\')" //will work. 
```

它工作正常。

检查 mallName 是否使用 alert 初始化。

```
alert(mallName);
$("#content").append('<div class="malldetails"><a href="javascript:void(0);">
<button class="left" onclick="deals(mallName)">Deals</button></a></div>');

function deals(NameOfMall){
alert("This does not work");
} 
```

# java - 从@entity 中的属性文件加载值

> ID：11175784
> 
> 赞同：0
> 
> 时间：2012-06-24T07:36:04.457
> 
> 标签：java, entity

我有一堂课

```
@Entity
class foo {

  private string name = ;

} 
```

我想使用从文件 foo.properties 读取的值来初始化上述变量 foo.name，而不使用 resourceBundle。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:57:01.110

正如您在官方[教程](http://docs.oracle.com/javase/tutorial/essential/environment/properties.html)中看到的，您可以通过以下方式创建一个 Property 对象：

```
Properties properties = new Properties();
FileInputStream in = new FileInputStream("my.properties");
properties.load(in);
in.close(); 
```

然后您可以使用[getProperty(String key)](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#getProperty%28java.lang.String%29)访问一个值，例如：

```
String name = properties.getProperty("keyName"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T09:40:06.783

你可以在你的构造函数上有类似的东西：

```
Properties props = new Properties();
props.load(new FileInputStream("/tmp/properties.txt"));
this.name = props.getProperty("propertyName"); 
```

# awk - awk 中的语法错误 if else

> ID：11175788
> 
> 赞同：1
> 
> 时间：2012-06-24T07:36:41.287
> 
> 标签：awk, syntax-error

我`if else`在`awk`. 每次我使用它时都会遇到语法错误。谁能告诉我如何使用这个？我收到如下所示的语法错误。

代码：

```
awk '{ FS = "=" ;if($1 ~ /Hi/) {if (!($1=="Hi")) {print $1;}} else {if($1=="bye") {print $1;}}} else {if(if($1=="good") {print $1;}}} END {print $1}' 
```

输出：

```
awk: { FS = "=" ;if($1 ~ /Hi/) {if (!($1=="Hi")) {print $1;}} else {if($1=="bye") {print $1;}}} else {if(if($1=="good") {print $1;}}} END {print $1}

awk:                                                                                            ^ syntax error

awk: { FS = "=" ;if($1 ~ /Hi/) {if (!($1=="Hi")) {print $1;}} else {if($1=="bye") {print $1;}}} else {if(if($1=="good") {print $1;}}} END {print $1}

awk:                                                                                                     ^ syntax error

awk: { FS = "=" ;if($1 ~ /Hi/) {if (!($1=="Hi")) {print $1;}} else {if($1=="bye") {print $1;}}} else {if(if($1=="good") {print $1;}}} END {print $1}

awk:                                                                                                                                ^ syntax error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T07:52:43.897

第一个问题是，当在您的 3 个右大括号序列中，您已经完成了整个脚本，因此该行的其余部分会导致语法错误。

您还有`if`一个条件中的语句`if`。

我不确定你*想写*什么，但你可能在想这样的事情：

```
{ 
    FS = "=";
    if ($1 ~ /Hi/) {
        if (!($1=="Hi")) {print $1;}
    } else if ($1=="bye") {
        print $1;
    } else if ($1=="good") {
        print $1;
    }
} 
END {
    print $1
} 
```

在[http://ideone.com/srNzp](http://ideone.com/srNzp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T07:55:54.357

### 问题

你的代码有*很多*问题。您有不平衡的大括号、较差的间距以及其他使调试变得困难的问题。最终，您会遇到语法和引用问题。

### 解决方案

您可以通过将分配移到脚本之外的 FS 来简化代码。这更具可读性且不易出错。例如：

```
$ echo "foo=bar" | awk -F= '{print $1}'
foo 
```

为了清楚起见，您还可以将分配移动到 BEGIN 块，除非您在运行时将其重新分配给不同的东西。

```
BEGIN { FS = "=" } 
```

不管你做什么，如果你重构你的代码以提高可读性，你将更容易调试你的脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T07:54:15.070

```
{if(if($1=="good") {print $1;}}} 
```

是错的。第一个大括号在第二个右大括号处关闭，其中只有一个圆括号已关闭。

更多： if(if 似乎非常错误。它可能会在与其他构造一起使用时被治愈，而在大多数情况下，您只需使用 if (a && b)) 来组合多个条件，或者 if (a) if (b) c else d .

```
 {if($1=="good") {print $1;}} 
```

似乎是这里的意思。稍后我会尝试找到更多。

是的 - 有更多无与伦比的大括号。您可以考虑使用 Allman Style 缩进来控制它：每个 { 前面都有一个换行符，之后是一个新的缩进级别，直到大括号关闭。看：

```
awk '{ FS = "=" ;
if($1 ~ /Hi/) 
{
    if (!($1=="Hi")) 
    {
        print $1;
    }
} else 
{
    if($1=="bye") 
    {
        print $1;
    }
}
} // <- doesn't match any open brace
else 
{
    if ($1=="good") 
    {
        print $1;
    }
}
} // <- again
END {print $1}' 
```

如果您将光标放在其中之一旁边，许多编辑器会帮助突出显示匹配的大括号。您至少还有 2 个不匹配的右大括号。

# asp.net - SQL 数据源与数据表/数据集

> ID：11175790
> 
> 赞同：0
> 
> 时间：2012-06-24T07:36:54.317
> 
> 标签：asp.net, vb.net

我通常使用**SQL 数据源**来执行数据库事务，即**CRUD**操作。

**在DataTables**或**Data Set**上使用 SQL 数据源是否明智？

# c++ - OpenCV SURF 功能未实现

> ID：11175794
> 
> 赞同：10
> 
> 时间：2012-06-24T07:37:47.763
> 
> 标签：c++, visual-c++, opencv, implementation, surf

当我尝试运行示例`find_obj.cpp`或任何 OpenCV SURF 程序时，我在执行代码时在命令提示符中收到以下错误。该项目构建时没有错误和警告。我正在使用 VS2011 beta、OpenCV 2.4 和 windows7。

错误信息：

```
OpenCV Error: The function/feature is not implemented < OpenCV was built without SURF support> in unknown function,file ..\..\..\src\opencv\modules\legacy\src\features2d.cpp, line 77 
```

我尝试使用 Cmake 再次构建 OpenCV 2.4，然后在调试模式下使用 VS2011，然后在 IDE 中添加 lib 路径，但仍然没有结果。

我该如何解决？

```
 #include <opencv2/objdetect/objdetect.hpp>
    #include <opencv2/features2d/features2d.hpp>
    #include <opencv2/core/core.hpp>
    #include <opencv2/highgui/highgui.hpp>
    #include <opencv2/legacy/legacy.hpp>
    #include <opencv2/legacy/compat.hpp>
    #include <opencv2/flann/flann.hpp>
    #include <opencv2/calib3d/calib3d.hpp>
    #include <opencv2/nonfree/features2d.hpp>
    #include <opencv2/nonfree/nonfree.hpp>

using namespace std;
using namespace cv;
int main()
{
    cv::initModule_nonfree();//THIS LINE IS IMPORTANT   

   IplImage *image1 = cvLoadImage("C:\\SURF\\1.jpg"); 
    IplImage *image2 = cvLoadImage("C:\\SURF\\2.jpg");

    CvMemStorage* memoryBlock = cvCreateMemStorage();
    CvSeq* image1KeyPoints;
    CvSeq* image1Descriptors;
    CvSeq* image2KeyPoints;
    CvSeq* image2Descriptors;

    // Only values with a hessian greater than 500 are considered for keypoints
   CvSURFParams params = cvSURFParams(500, 1);
   cvExtractSURF(image1, 0, &image1KeyPoints, &image1Descriptors, memoryBlock, params);
   cvExtractSURF(image2, 0, &image2KeyPoints, &image2Descriptors, memoryBlock, params);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T09:03:10.020

取自[这个答案](http://opencv-users.1802565.n2.nabble.com/OpenCV-installation-with-SURF-feature-support-on-Ubuntu-td7580412.html)（你为什么不在提问前用谷歌搜索你的问题？）：

SIFT 和 SURF 代码在 OpenCV v2.4 中移动到一个名为 `nonfree`. 确保您正在链接（Windlows 中的 DLL）到它。在 linux 中，这个库被称为`libopencv_nonfree.so`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-11T01:30:10.727

这不是一个错误。SURF 位于非自由模块中。要使用它，您应该初始化非自由模块：

```
 #include <opencv2/nonfree/nonfree.hpp> 
    ... 
    cv::initModule_nonfree(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T02:15:45.123

最近，我正在学习 SURF。对于这个问题，您可以将 opencv_nonfree240d.lib 和 opencv_nonfree240.lib 添加到项目的 lib 路径中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-06T17:17:46.867

对于 ubuntu， 可以通过添加来修改[https://help.ubuntu.com/community/OpenCV](https://help.ubuntu.com/community/OpenCV)上的脚本以 用于非自由 surf/sift 使用

libopencv_nonfree

到 sudo apt-get 命令的末尾，以及

-D BUILD_opencv_nonfree=ON

到 cmake 命令的末尾。只有在从软件中心卸载了我能找到的处理 opencv 的所有内容后，它才对我有用。顺便说一句，软件中心还有一个 opencv 非自由库，“libopencv-nonfree2.4”，这似乎没有帮助。我不是这类事情的专家，所以我不知道我所做的是否 100% 正确，但它允许执行以下命令

冲浪 = cv2.SURF(400)

和

关键点 = surfDetector.detect(im)

运行以前没有的（第一个导致“未找到”类型错误，而第二个导致段错误）。

[允许我使用粘贴到http://pastebin.com/sQzDdx5i](http://pastebin.com/sQzDdx5i)的非自由 surf/sift 的 opencv.sh
版本现在工作的版本是 opencv-2.4.9 但可能这适用于其他版本，因为脚本似乎像库名称一样有点不可知论。

# jquery - JQuery官网里面一个奇怪的iframe

> ID：11175796
> 
> 赞同：0
> 
> 时间：2012-06-24T07:37:57.950
> 
> 标签：jquery, html

[我对位于 JQuery 官方网站（ http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)）底部的 iframe 感到好奇。这是它的`HTML`片段；有人知道它的功能吗？

```
<iframe name="easyXDM_DISQUS_net_default744_provider" id="easyXDM_DISQUS_net_default744_provider"... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T07:40:34.423

iframe 可能是用来加载[Disqus](http://disqus.com)评论的；您在任何 jquery 文档页面底部看到的评论

# android - 如何在edittext中计算其他语言的字符

> ID：11175798
> 
> 赞同：1
> 
> 时间：2012-06-24T07:38:32.403
> 
> 标签：android, android-edittext

我正在尝试在编辑文本中计算 Unicode 字符，例如阿拉伯语或中文。我设法使用此示例计算正常字符： [https ://stackoverflow.com/a/9867992/1282492](https://stackoverflow.com/a/9867992/1282492)

我想将普通字符限制为 160 个，将 Unicode 字符限制为 80 个，无论如何我可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T09:21:31.547

**提示**：您可以通过将文本转换为字节来做到这一点

所以 160 个英文字符 = 160 个字节

和 80 个 Unicode 字符 = 160 个字节

# html - 为什么将鼠标悬停在一个 CSS 上会影响我的其他 CSS 元素？

> ID：11175801
> 
> 赞同：2
> 
> 时间：2012-06-24T07:38:40.520
> 
> 标签：html, css, css-transitions

让我首先为我的问题可能太长而无法阅读表示歉意。但是我想清楚地解释我的问题，这就是为什么要对这个问题进行冗长的描述。请仔细阅读我附上的代码，请帮助我纠正错误。

我是一个业余设计师，基本上不喜欢网页设计，但我想设计自己的页面。所以在谷歌的帮助下，通过互联网上的各种教程，我设法设计了我的页面。但我被困在这个下载页面！特别是使用下载按钮。

[http://dl.dropbox.com/u/20461226/download%20page.jpg](http://dl.dropbox.com/u/20461226/download%20page.jpg)

这就是我打算拥有我的下载页面的方式。当用户将鼠标悬停在我们杂志任何特定版本的任何特定下载按钮上时，翅膀将打开，一个在下载按钮的顶部，另一个在底部。当用户点击该按钮时，他/她将能够下载该特定杂志版本的compressed.RAR 版本。我从“ [http://designshack.net/articles/css/downloadbutton/](http://designshack.net/articles/css/downloadbutton/) ”学会了设计这个下载按钮，效果是这样的：“http://designshack.net/tutorialexamples/animatedDownload/index.html”

我成功地为每个版本构建了单独的下载按钮，并在 CSS 中给出了它们的确切位置。但是当我尝试将页面的所有按钮集成到一个 html 和一个 CSS 中时，一切都出错了。即当我将鼠标悬停在第一个下载按钮上时，不是为那个特定的第一个下载按钮打开翅膀，而是在最后一个按钮打开翅膀！

这是我的 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="button.css" type="text/css" rel="stylesheet" />
</head>

<body>
<div class="button1">
  <a href="#">Download</a>
  <p class="top">Click to begin</p>
  <p class="bottom">7.54 MB .RAR</p>
</div>
<body>
<div class="button2">
  <a href="#">Download</a>
  <p class="top">Click to begin</p>
  <p class="bottom">7.8 MB .RAR</p>
</div>
<div class="button3">
  <a href="#">Download</a>
  <p class="top">Click to begin</p>
  <p class="bottom">7.05 MB .RAR</p>
</div>

</body>
</html> 
```

这是我的 CSS ：

```
.button1 a {
  display: block;
  position:absolute;
    left:430px;
    top:410px;
  height: 28px;
  width: 115px;
  background: #22232e;
  -webkit-border-radius: 4px;
   -moz-border-radius: 4px;
        border-radius: 4px;
        -webkit-box-shadow: 0px 0px 8px rgba(0,0,0,0.2);
   -moz-box-shadow: 0px 0px 8px rgba(0,0,0,0.2);
        box-shadow: 0px 0px 8px rgba(0,0,0,0.2);

background: -moz-linear-gradient(top, #22232e 0%, #623043 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#22232e), color-stop(100%,#623043)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #22232e 0%,#623043 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #22232e 0%,#623043 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #22232e 0%,#623043 100%); /* IE10+ */
background: linear-gradient(top, #22232e 0%,#623043 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#22232e', endColorstr='#623043',GradientType=0 ); /* IE6-9 */

  /*TYPE*/
  color: white;
  font: bold 11px/28px Helvetica, Verdana, sans-serif;
  text-decoration: none;
  text-align: center;
  text-transform: uppercase; 
}

p {
  background: #5a8a37;
  display: block;
  height: 25px;
  width: 105px; 
  margin: 0px 0 0 5px;

  /*TYPE*/
  text-align: center;
  font: bold 10px/25px Helvetica, Verdana, sans-serif;
  color: #0e1807;

  /*POSITION*/
  position:absolute;
    left:430px;
    top:410px;
  z-index: -1;

  /*CSS3*/
  -webkit-border-radius: 3px;
     -moz-border-radius: 3px;
          border-radius: 3px;

  -webkit-box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
     -moz-box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
          box-shadow: 2px 2px 8px rgba(0,0,0,0.2);

-webkit-transition: all 0.4s ease;
     -moz-transition: all 0.4s ease;
       -o-transition: all 0.4s ease;
      -ms-transition: all 0.4s ease;
          transition: all 0.4s ease;          
}

.button1:hover .top {
  margin: -23px 0 0 5px;
  line-height: 25px;
}

.button1:hover .bottom {
  margin: 25px 0 0 5px;
}

.button1 a:active {
background: #22232e; 
background: -moz-linear-gradient(top, #22232e 0%, #623043 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#22232e), color-stop(100%,#623043)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #22232e 0%,#623043 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #22232e 0%,#623043 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #22232e 0%,#623043 100%); /* IE10+ */
background: linear-gradient(top, #22232e 0%,#623043 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#22232e', endColorstr='#623043',GradientType=0 ); /* IE6-9 */
}

/*Pulls in Wings*/
.button1:active .bottom {
  margin: 25px 0 0 5px;
}

.button1:active .top {
  margin: -23px 0 0 5px;
}

.button2 a {

  display: block;
  position:absolute;
    left:632px;
    top:410px;
  height: 28px;
  width: 115px;
  background: #22232e;
  -webkit-border-radius: 4px;
   -moz-border-radius: 4px;
        border-radius: 4px;
        -webkit-box-shadow: 0px 0px 8px rgba(0,0,0,0.2);
   -moz-box-shadow: 0px 0px 8px rgba(0,0,0,0.2);
        box-shadow: 0px 0px 8px rgba(0,0,0,0.2);

background: -moz-linear-gradient(top, #22232e 0%, #623043 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#22232e), color-stop(100%,#623043)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #22232e 0%,#623043 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #22232e 0%,#623043 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #22232e 0%,#623043 100%); /* IE10+ */
background: linear-gradient(top, #22232e 0%,#623043 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#22232e', endColorstr='#623043',GradientType=0 ); /* IE6-9 */

  /*TYPE*/
  color: white;
  font: bold 11px/28px Helvetica, Verdana, sans-serif;
  text-decoration: none;
  text-align: center;
  text-transform: uppercase; 
}

p {
  background: #5a8a37;
  display: block;
  height: 25px;
  width: 105px; 
  margin: 0px 0 0 5px;

  /*TYPE*/
  text-align: center;
  font: bold 10px/25px Helvetica, Verdana, sans-serif;
  color: #0e1807;

  /*POSITION*/
  position:absolute;
    left:632px;
    top:410px;
  z-index: -1;

  /*CSS3*/
  -webkit-border-radius: 3px;
     -moz-border-radius: 3px;
          border-radius: 3px;

  -webkit-box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
     -moz-box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
          box-shadow: 2px 2px 8px rgba(0,0,0,0.2);

-webkit-transition: all 0.4s ease;
     -moz-transition: all 0.4s ease;
       -o-transition: all 0.4s ease;
      -ms-transition: all 0.4s ease;
          transition: all 0.4s ease;          
}

.button2:hover .top {
  margin: -23px 0 0 5px;
  line-height: 25px;
}

.button2:hover .bottom {
  margin: 25px 0 0 5px;
}

.button2 a:active {
background: #22232e; 
background: -moz-linear-gradient(top, #22232e 0%, #623043 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#22232e), color-stop(100%,#623043)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #22232e 0%,#623043 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #22232e 0%,#623043 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #22232e 0%,#623043 100%); /* IE10+ */
background: linear-gradient(top, #22232e 0%,#623043 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#22232e', endColorstr='#623043',GradientType=0 ); /* IE6-9 */
}

/*Pulls in Wings*/
.button2:active .bottom {
  margin: 25px 0 0 5px;
}

.button2:active .top {
  margin: -23px 0 0 5px;
}

.button3 a {

  display: block;
  position:absolute;
    left:833px;
    top:410px;
  height: 28px;
  width: 115px;
  background: #22232e;
  -webkit-border-radius: 4px;
   -moz-border-radius: 4px;
        border-radius: 4px;
        -webkit-box-shadow: 0px 0px 8px rgba(0,0,0,0.2);
   -moz-box-shadow: 0px 0px 8px rgba(0,0,0,0.2);
        box-shadow: 0px 0px 8px rgba(0,0,0,0.2);

background: -moz-linear-gradient(top, #22232e 0%, #623043 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#22232e), color-stop(100%,#623043)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #22232e 0%,#623043 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #22232e 0%,#623043 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #22232e 0%,#623043 100%); /* IE10+ */
background: linear-gradient(top, #22232e 0%,#623043 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#22232e', endColorstr='#623043',GradientType=0 ); /* IE6-9 */

  /*TYPE*/
  color: white;
  font: bold 11px/28px Helvetica, Verdana, sans-serif;
  text-decoration: none;
  text-align: center;
  text-transform: uppercase; 
}

p {
  background: #5a8a37;
  display: block;
  height: 25px;
  width: 105px; 
  margin: 0px 0 0 5px;

  /*TYPE*/
  text-align: center;
  font: bold 10px/25px Helvetica, Verdana, sans-serif;
  color: #0e1807;

  /*POSITION*/
  position:absolute;
    left:833px;
    top:410px;
  z-index: -1;

  /*CSS3*/
  -webkit-border-radius: 3px;
     -moz-border-radius: 3px;
          border-radius: 3px;

  -webkit-box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
     -moz-box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
          box-shadow: 2px 2px 8px rgba(0,0,0,0.2);

-webkit-transition: all 0.4s ease;
     -moz-transition: all 0.4s ease;
       -o-transition: all 0.4s ease;
      -ms-transition: all 0.4s ease;
          transition: all 0.4s ease;          
}

.button3:hover .top {
  margin: -23px 0 0 5px;
  line-height: 25px;
}

.button3:hover .bottom {
  margin: 25px 0 0 5px;
}

.button3 a:active {
background: #22232e; 
background: -moz-linear-gradient(top, #22232e 0%, #623043 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#22232e), color-stop(100%,#623043)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #22232e 0%,#623043 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #22232e 0%,#623043 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #22232e 0%,#623043 100%); /* IE10+ */
background: linear-gradient(top, #22232e 0%,#623043 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#22232e', endColorstr='#623043',GradientType=0 ); /* IE6-9 */
}

/*Pulls in Wings*/
.button3:active .bottom {
  margin: 25px 0 0 5px;
}

.button3:active .top {
  margin: -23px 0 0 5px;
} 
```

请指导我并帮助我找出问题所在以及需要进行哪些更改。我将非常感激:) 问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T08:46:01.310

将鼠标悬停在一个按钮元素上不会影响其他按钮元素。看起来就是这样，因为您放错了`p`用于`hover`效果的动画元素。

更仔细地查看损坏的页面。当您将鼠标悬停在按钮上时，第三个按钮上显示的文件大小会发生变化。这是因为当您将鼠标悬停在按钮 #1 上时，按钮 #1 的文件大小`p`会被动画化；当您将鼠标悬停在按钮 #2 上时，按钮 #2 的文件大小`p`将被动画化；当您将鼠标悬停在按钮 #3 上时，*其*相应的文件大小`p`将被动画化。

所以浏览器正在做你所期望的。只有悬停按钮的子元素受到影响/动画。

您真正的问题是您的 CSS 告诉他们全部弹出第三个按钮。这个错误最有可能发生在设置`p.top`和`p.bottom`元素的绝对位置时。如果您通过 Firebug 或 Chrome 的 DOM 检查器检查这些 DOM 元素，您会看到它们都被放置在按钮 #3 后面。因此，当它们弹出时，它们会在按钮 #3 的上方/下方弹出。因此，当您将鼠标悬停在按钮 #1 和 #2 上时，按钮 #3 似乎受到了影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T08:07:04.563

[在这里](http://jsfiddle.net/8yajE/)工作正常。为什么你对按钮使用不同的类？只需使用`class="button"`代替`class="button1"`,`class="button2"`和`class="button3"`。

# php - 在mysql php搜索中突出显示搜索文本

> ID：11175802
> 
> 赞同：3
> 
> 时间：2012-06-24T07:39:02.610
> 
> 标签：php, mysql, search, highlight

嗨，这是我的脚本，它可以很好地搜索我的数据库。我有一个**form.html**，用户在搜索框中输入关键字。

```
<form method="get" action="form.php">
<input type="text" name="searchterm" title="Enter your search term here" value="Enter your search term here" class="searchbox" />
<input type="submit" name="search" title="Search Now! "value="Search" class="searchbutton" />
</form> 
```

**我想突出显示结果中的搜索文本。**

非常感谢

**表单.php**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Search</title>
<link href="default.css" rel="stylesheet" type="text/css" media="screen" />
</head>

<body>
<?php

// include MySQL-processing classes

require_once 'mysql.php'; 

try{

// connect to MySQL

$db=new MySQL(array('host'=>'','user'=>'','password'=>'','database'=>''));

$searchterm=$db->escapeString($_GET['searchterm']);

$result=$db->query("SELECT * FROM BookPage WHERE (PageText) like \"%$searchterm%\" ");

if(!$result->countRows()){

echo '<div class="maincontainer"><h2>No results were found. Go back and try a new search.</h2></div>'."n";

}

else{

// display search results

echo '<div class="maincontainer"><h2>Your search criteria
returned '.$result->countRows().' results.</h2>'."n";

while($row=$result->fetchRow()){

echo '<div class="rowcontainer"><p><strong>Book Id:
</strong>'.$row['BookId'].'<p><p><strong>Page Id:
</strong>'.$row['PageId'].'</p><p><strong>Page Text:
</strong>'.$row['PageText'].'</p></div>'."n"; 

}

}

echo '</div>';

}

catch(Exception $e){

echo $e->getMessage();

exit();

}

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T08:01:31.767

您可以使用此代码：

```
<?php
 //$keyword -> keyword to be search in string.
 //$field   -> string contain value to be seach
 // Returns HTML content with highlighted text
function makeHighlighter($keyword, $field) {
    $i = strripos($field, $keyword);
    if ($i !== false) {
        $keyword = str_ireplace($keyword, substr($field, $i, (strlen($keyword))), $keyword);
    } else {
        return $field;
    }
    $as_unm_split = explode($keyword, $field);
    $string_hig = "";
    for ($i = 0; $i < count($as_unm_split); $i++) {
        if ($i < count($as_unm_split) - 1)
            $string_hig.=$as_unm_split[$i] . "<span style=\"color: red\">" . $keyword . "</span>";
        else
            $string_hig.=$as_unm_split[$i];
    }
    unset($as_unm_split, $keyword, $i);
    return $string_hig;
}

echo makeHighlighter("keyword","this is keyword to be match...");
?> 
```

输出/输出

这是要匹配的**关键字**
... [注意：“关键字”将为红色]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T08:00:07.273

尝试这个：

```
$searchvalue = implode('<span style="color:green;font-weight:800;">'.$_GET['searchterm'].'</span>',explode($_GET['searchterm'],$row['PageText']));
echo '<div class="rowcontainer"><p><strong>Book Id:
</strong>'.$row['BookId'].'<p><p><strong>Page Id:
</strong>'.$row['PageId'].'</p><p><strong>Page Text:
</strong>'.$searchvalue.'</p></div>'."n"; 
```

# linux - 设备驱动栈

> ID：11175804
> 
> 赞同：2
> 
> 时间：2012-06-24T07:39:22.863
> 
> 标签：linux, linux-kernel, linux-device-driver

我是初学者，我想了解设备驱动程序堆栈背后的概念？我知道设备驱动程序堆栈有三层，分别称为低级驱动程序、总线管理器和高级驱动程序。我的问题是，低级驱动程序和总线管理器是否存在单独的代码？如果它们存在，我在哪里可以找到 Linux 文件系统中硬件控制器的低级驱动程序？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:03:09.790

Linux 内核具有三个设备驱动层，它们包含了内核的大部分设备驱动系统。总线驱动程序、协议驱动程序和设备驱动程序。让我们以您想要为其编写驱动程序的 SPI 设备为例（例如某种传感器）。通常，您将使用设备的数据表编写驱动程序，以查看其工作原理以及哪些寄存器保存哪些信息。这是在设备驱动程序中完成的。

设备驱动程序将命令发送到协议驱动程序，该协议驱动程序基本上定义了 SPI 命令的外观（您必须如何填充数据结构以读取/写入设备的寄存器）。

通常，您的 SOC 和传感器之间的 SPI 连接是通过 SOC 内部的一些特殊硬件完成的，以发送接收 SPI 命令。这是公交车司机。所以你在软件中有这样的东西：device_driver <-> protocol_driver <-> bus_driver

在硬件中它看起来像这样：SOC_SPI_module <-> sensor

这个想法是，从设备驱动程序中封装 SOC SPI 模块，因此当您编写设备驱动程序时，您不必关心用于访问设备的 SOC。

希望我能帮到你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T07:02:49.967

在 Linux 中，设备驱动程序通常是 C 语言中的面向对象编程。在此，我们将**“module_init”**作为**构造函数**，将**“module_exit”**作为**析构函数**进行更广泛的理解。

根据我的观点，**“初始化和退出”**过程与设备控制器硬件交互，因此可以称为**“下层驱动程序”**。控制通过**“驱动程序的文件操作和工作进程”**作为**“总线管理器或进程管理器”**传递给用户通过**“ioctl进程”**作为**“高级驱动程序”**进行控制。

如果用户必须与设备交互，则**“ioctl 进程”<-->“文件操作”<-->“module_init & module_exit &部分文件操作”。**.

# jquery - jquery 仅在 Safari 中产生保证金问题

> ID：11175814
> 
> 赞同：6
> 
> 时间：2012-06-24T07:41:00.773
> 
> 标签：jquery, css, wordpress, safari, responsive-design

使用响应式 caroufredsel，就像 Chrome 和 Firefox 中的魅力一样，但在 Safari 中，它突然产生 800 像素的顶部和底部边距，把所有东西都扔掉了。

它是一个响应式网站，奇怪的是，当受到 500 像素或以下屏幕的媒体查询的影响时，问题不会发生。

该站点是一个 wordpress 自定义构建，当一切准备就绪时，它在服务器上等待域被映射。

直播页面：

```
http://109.203.120.0/~wirebird/wordpress/the-guitars/ 
```

[静态 html 版本](http://www.wirebirdguitars.com/staging/guitars.html)工作正常，这是 wordpress 问题，还是它还没有使用真正的域？

用于在下面触发 caroufredsel 的 jquery：

```
jQuery(document).ready(function() {

jQuery("#guitars-gallery").carouFredSel({
auto: false,
circular: false,
prev: '#prev',
next: '#next',
responsive : true,
height : 500,
scroll: 1,
items : { width : 370, height : 500, visible : { min : 1, max : 3 } } });   

});

function doSomething() {

jQuery('#guitars-gallery').trigger('destroy', true);
jQuery('#guitars-gallery').css({'text-align': '','float': '','position': '','top': '','right': '','bottom': '','left': '','width': '90%','height': '','margin': '1% auto'});

jQuery("#guitars-gallery").carouFredSel({
auto: false,
circular: false,
prev: '#prev',
next: '#next',
responsive : true,
height : 500,
scroll: 1,
items : { width : 370, height : 500, visible : { min : 1, max : 3 } } });

};

var resizeTimer;

jQuery(window).resize(function() {
clearTimeout(resizeTimer);
resizeTimer = setTimeout(doSomething, 100);
}); 
```

欢迎任何想法，这让我发疯！

更新：我现在已经解决了这个问题，方法是在调用轮播后使用 jquery 更改样式：

```
jQuery('.caroufredsel_wrapper').css({'margin-top': '0px', 'margin-bottom': '0px'}); 
```

解决了这个问题，但我仍然不知道它为什么会发生:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:16:49.820

我会在 wordpress 中检查您的主题样式表，以确保您没有任何冲突的样式。

你总是打电话 `.caroufredsel_wrapper`而不是反对`.wrapper`？

# visual-studio-2010 - 检查安装在 C# 中的音频语音驱动程序

> ID：11175815
> 
> 赞同：0
> 
> 时间：2012-06-24T07:41:10.130
> 
> 标签：visual-studio-2010, c#-4.0

我在我的 winform 应用程序中使用声音播放器。有没有办法在操作系统上检查声卡驱动程序（已安装/未安装）？我想在 c# 中以编程方式检查它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:50:52.827

我得到了它

```
using System.Runtime.InteropServices;

[DllImport("winmm.dll", SetLastError = true)]
public static extern uint waveOutGetNumDevs();

private void frmSound_Load(object sender, System.EventArgs e){
if(waveOutGetNumDevs() != 0)
{
  lblSound.Text = "The Sound device is detected for this system";
}
else
{
    lblSound.ForeColor = Color.Red; 
    lblSound.Text = "The Sound device is Not Found for this system";
}
} 
```

# php - 使用 Plesk API 创建 A-Record

> ID：11175816
> 
> 赞同：0
> 
> 时间：2012-06-24T07:41:27.553
> 
> 标签：php, api, dns, plesk, parallels

我对 Plesk API 的示例 PHP 脚本进行了足够的修改，以至于我认为它应该可以创建 A-Record DNS，但是每当我运行该脚本时，它都会在大约 2-3 分钟后超时。Parallels 开发论坛似乎是一座鬼城，所以我希望这里的人可能能够发现这个问题。

```
<?php

/** Reports error during API RPC request */
class ApiRequestException extends Exception {}

function DNSCreateRequest()
{
    $xmldoc = new DomDocument('1.0', 'UTF-8');
    $xmldoc->formatOutput = true;

    // <packet>
    $packet = $xmldoc->createElement('packet');
    $packet->setAttribute('version', '1.6.3.1');
    $xmldoc->appendChild($packet);

    // <packet/dns>
    $dns = $xmldoc->createElement('dns');
    $packet->appendChild($dns);

    // <packet/dns/add_rec>
    $addrec = $xmldoc->createElement('add_rec');
    $dns->appendChild($addrec);

    // add_rec elements
        $addrec->appendChild($xmldoc->createElement('domain_name','fragnet.net'));
    $addrec->appendChild($xmldoc->createElement('type','A'));
    $addrec->appendChild($xmldoc->createElement('host','testdns'));
    $addrec->appendChild($xmldoc->createElement('value','127.0.0.1'));

    //$xmldoc->saveXML($addrec);

    return $xmldoc;
}

/** Prepares CURL to perform the Panel API request */
function curlInit($host, $login, $password)
{
    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, "https://{$host}:8443/enterprise/control/agent.php");
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($curl, CURLOPT_POST,           true);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false);
    curl_setopt($curl, CURLOPT_HTTPHEADER,

    array("HTTP_AUTH_LOGIN: {$login}",
        "HTTP_AUTH_PASSWD: {$password}",
        "HTTP_PRETTY_PRINT: TRUE",
        "Content-Type: text/xml")
    );

    return $curl;
}

/** Performs a Panel API request, returns raw API response text */
function sendRequest($curl, $packet)
{
    curl_setopt($curl, CURLOPT_POSTFIELDS, $packet);
    $result = curl_exec($curl);

    if (curl_errno($curl))
    {
        $errmsg  = curl_error($curl);
        $errcode = curl_errno($curl);
        curl_close($curl);
        throw new ApiRequestException($errmsg, $errcode);
    }

      curl_close($curl);
      return $result;
}

/** Looks if API responded with correct data */
function parseResponse($response_string)
{
    $xml = new SimpleXMLElement($response_string);

    if (!is_a($xml, 'SimpleXMLElement'))
        throw new ApiRequestException("Cannot parse server response: {$response_string}");

    return $xml;
}

/** Check data in API response */
function checkResponse(SimpleXMLElement $response)
{
    $resultNode = $response->dns->add_rec->result;

    // check if request was successful
    if ('error' == (string)$resultNode->status)
        throw new ApiRequestException("The Panel API returned an error: " . (string)$resultNode->result->errtext);
}

// int main()

$host = 'www.mydomainishere.net';
$login = 'myusername';
$password = 'mypassword';

$curl = curlInit($host, $login, $password);

try
{
    $response = sendRequest($curl, DNSCreateRequest()->saveXML());
    $responseXml = parseResponse($response);
    checkResponse($responseXml);
}
catch (ApiRequestException $e)
{
    echo $e;
    die();
}

// Explore the result

foreach ($responseXml->xpath('/packet/dns/add_rec/result') as $resultNode)
{
    echo "DNS id: " . (string)$resultNode->id . " ";
    //echo (string)$resultNode->data->gen_info->name . " (" . (string)$resultNode->data->gen_info->dns_ip_address . ")\n";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:19:57.743

我能够确定它不会接受“domain_name”，而是想要一个“site-id”。一旦使用它，我的脚本就可以完美运行。

# mysql - 简单的 MySQL 查询需要两个多小时

> ID：11175823
> 
> 赞同：0
> 
> 时间：2012-06-24T07:42:45.157
> 
> 标签：mysql, sql, database, performance

所以，我有一个包含 500 万条记录的数据库，它存储了问答网站的信息。结构是...

```
question, qid, quserid, answer, auserid; 
```

（qid 是问题的 ID 号）

我试图找到所有有特定用户未回答的问题的用户，并按特定用户未回答的问题数量对其进行排序。这是我的查询：

```
SELECT quserid, COUNT(quserid)
FROM `qanda` 
WHERE qid NOT IN (SELECT qid FROM `qanda` WHERE auserid='myusername' GROUP BY qid) 
GROUP BY quserid 
ORDER BY COUNT(quserid) DESC 
LIMIT 0,1000; 
```

问题：它需要 2 多个小时，而时钟仍在滴答作响！有人知道如何加快这个数据库的速度吗？我认为数据库中存在错误或其他东西，通常最多只需要30秒即可完成一个简单的查询，所以这有点荒谬。任何人都知道任何调整？可能是对配置文件的简单更改或其他什么？

…………

这是我刚刚复制和粘贴的数据库中的一些数据。抱歉没有格式化。

```
you could have any one person in the entire wor...  greendaystud    ive got the person i want...its great...because sh...   •glitter•rock•  191437  If you could have any one person in the entire wor...   just~another~slave2tears    i already got em
                            •glitter•rock•  191437  If you could have any one person in the entire wor...   korn_chick2007  matt or chris... i have feelings for them
                            •glitter•rock•  189555  why are you so sexy?
    just~another~slave2tears    my b/f says i am...i dun tink so tho
                            •glitter•rock•  189555  why are you so sexy?
    korn_chick2007  im not
                            •glitter•rock•  189555  why are you so sexy?
    MyKool-AidsSexy     i dont think i am
                            †brokengirl†    115228  If you are supposed to expect the unexpected,
doe...  death-tone  yip
                            †brokengirl†    115228  If you are supposed to expect the unexpected,
doe...  _doieverknowwhoiam_     you know whats weird? my friend sandy says that a ...
                            †brokengirl†    115228  If you are supposed to expect the unexpected,
doe...  Cute_Physco_kitty   Pretty much..
                            †brokengirl†    115228  If you are supposed to expect the unexpected,
doe...  Leslie02    WHAT! OK, now im confused!
                            †brokengirl†    114995  Why does my listerine taste like sausage this
mor...  death-tone  what&#0039;s listerine?
                            †brokengirl†    114995  Why does my listerine taste like sausage this
mor...  _doieverknowwhoiam_     i don&#0039;t know, and maybe it&#0039;s jut me bu...
                            †brokengirl†    114995  Why does my listerine taste like sausage this
mor...  darksunofdeath  How old is the listerine pack?
                            †brokengirl†    114995  Why does my listerine taste like sausage this
mor...  Cute_Physco_kitty   uhh... New brand of Listerine?
    †brokengirl†    114995  Why does my listerine taste like sausage this
mor...  Leslie02    did you have sausage for breakfast?     †brokengirl†    104305  What should I name my pinky toe on my left
foot?¿...   death-tone  &#0034;Pinkytoe&#0034; 
```

而且，预期的输出，使用方便的列标题......

```
Questioner User ID | Number of questions asked by the Questioner that were unanswered by 'myuserid'

Greenbay Packer | 6
DollyDoll | 63
PsychoticPokemon | 62
HelloKitty | 61
GreenDayFan | 60 
```

...

```
IDontAskManyQuestion | 2<br>
WhatsAQuestion? | 1<br> 
```

这是解释输出

```
> mysql-> EXPLAIN
>     ->
>     -> SELECT quserid, COUNT(quserID)
>     -> FROM `qanda`
>     -> WHERE qid NOT IN (SELECT qid FROM `qanda` WHERE auserid='boxocereal' GROU P BY qid)
>     -> GROUP BY quserid
>     -> ORDER BY COUNT(quserid) DESC
>     -> LIMIT 0,1000;
> 

+----+--------------------+-------+------+---------------+------+---------+-----
> -+---------+----------------------------------------------+ | id | select_type        | table | type | possible_keys | key  | key_len |
> ref  | rows    | Extra                                        |
> +----+--------------------+-------+------+---------------+------+---------+-----
> -+---------+----------------------------------------------+ |  1 | PRIMARY            | qanda | ALL  | NULL          | NULL | NULL    |
> NULL  | 3167995 | Using where; Using temporary; Using filesort | |  2
> | DEPENDENT SUBQUERY | qanda | ALL  | NULL          | NULL | NULL    |
> NULL  | 3167995 | Using where; Using temporary; Using filesort |
> +----+--------------------+-------+------+---------------+------+---------+-----
> -+---------+----------------------------------------------+ 2 rows in set (0.02 sec)
> 
> mysql-> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T08:36:02.230

好的，我有一个将其转换为 JOIN 而不是子查询的想法。该技术实际上是在有用户的地方加入**并**回答该用户（因为这从根本上更有效），然后从最终结果中排除这些问题（在 HAVING 中）。有可能这可以进一步改进（我没有测试过，但 IS NULL 检查*可能*会移到 WHERE 子句中）。

这能让你到达你想去的地方吗？

```
SELECT question.quserid, COUNT(question.quserid) as num_questions
FROM qanda as question 
LEFT OUTER JOIN qanda as answers 
  ON question.qid = answers.qid AND answers.auserid = 'myusername'
GROUP BY question.quserid
ORDER BY num_questions DESC
HAVING answers.auserid IS NULL; 
```

编辑：多一点解释，以防万一这很接近并且其他人可以帮助将这个想法改进为解决方案。

基本上，查询的主要部分将只选择每个问题一次（LEFT OUTER），然后对于感兴趣的用户已回答的问题，它还将选择已加入的列。这使我们处于候选结果集中所有问题的状态，“标志”附加到我们不感兴趣的问题（即非空连接列）。然后我们对包含非空连接数据的行进行分组并拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T08:35:01.040

根据输出，如果发生全表扫描，请尝试找出可以实施索引的候选对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T09:18:15.143

也试试这个：

```
SELECT quserid, COUNT(*) AS num
FROM qanda
WHERE qid NOT IN 
        ( SELECT qid
          FROM qanda 
          WHERE auserid = 'user2' 
        )  
GROUP BY quserid 
ORDER BY num DESC 
LIMIT 0,1000 ; 
```

* * *

您肯定需要为任何这些变体添加索引以提高效率。

是`(qid, quserid, auserid)`钥匙`PRIMARY`吗？是吗`UNIQUE`（我想它应该是两者之一。

上的索引`(quserid, qid)`也会有所帮助（如果您的表使用 InnoDB 引擎）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T09:13:50.870

参考@ctrahey 的答案，我已经更改了查询并得到了解决方案，因为@ctrahey 没有像你这样给出输出，如此处**[所示](http://sqlfiddle.com/#!2/3c354/14)。**

你能试试，让我知道这是否更快？

```
SELECT question.quserid, COUNT(question.quserid) as num_questions
FROM qanda as question 
LEFT OUTER JOIN qanda as answers 
  ON question.qid = answers.qid AND answers.auserid = 'user2'
WHERE answers.auserid IS NULL
GROUP BY question.quserid
ORDER BY num_questions DESC; 
```

另见***[sqlfiddle](http://sqlfiddle.com/#!2/3c354/45)***。您的查询和上述查询给出相同的输出。

希望这是你想要的。

# c# - How to check-not add duplicates with EF from a list

> ID：11175824
> 
> 赞同：2
> 
> 时间：2012-06-24T07:43:12.983
> 
> 标签：c#, entity-framework, list

I have an `IEnumerable ORDERS` that I get from reading from an excel file. Then I add each row:

```
foreach (var item in so)
{
       context.ORDERS.AddObject(item);
}
db.SaveChanges(); 
```

Sometimes there are duplicates in the source file, and I'm not sure how to not add duplicates to the table.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:29:37.307

> how to not add duplicates to the table.

Check whether the `ORDERS` list already contains the `item` or not before add it to the list. Use [`Any`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.any.aspx) for example like this:

```
foreach (var item in so)
{
    //If ORDERS List doesn't contain any item with the same id 
    //or any other predicate match
    if(!context.ORDERS.Any(o => o.Id == item.Id)) //or any other property of item
       context.ORDERS.AddObject(item);
}
db.SaveChanges(); 
```

# scala - 如何过滤 sbt 监视更改的文件？

> ID：11175832
> 
> 赞同：5
> 
> 时间：2012-06-24T07:44:01.190
> 
> 标签：scala, sbt

我使用 emacs 作为我的编辑器，它有一个讨厌的习惯，即为这些文件附近的文件创建锁。似乎 sbt 也将该锁视为源文件，这会导致许多不必要的重建。

有没有办法告诉 sbt 它不应该监视名称以 开头的文件中的更改`.#`？

我尝试了一些类似的东西：

```
watchSources in Compile <<= (watchSources in Compile) map { files =>
  println(files)
  files.filter(f => !f.getName.startsWith(".#"))
} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-25T12:52:28.903

如果我将以下行添加到`project/Build.scala`内部， SBT 会忽略 Emacs 自动保存模式文件`ApplicationBuild`：

```
excludeFilter in unmanagedSources := ".#*" 
```

在较新的 sbt 语法中，即：

```
unmanagedSources / excludeFilter := ".#*" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T09:16:12.897

*watchSources*不用作范围设置。*在没有编译*的情况下重写您的示例，它将起作用。

# html - 如何在父元素和父元素的兄弟姐妹之上显示子元素？

> ID：11175833
> 
> 赞同：8
> 
> 时间：2012-06-24T07:44:10.473
> 
> 标签：html, css, parent-child, siblings

我的问题与这个问题有关：

[使用 CSS 在父元素上方显示子元素](https://stackoverflow.com/questions/1174874/show-child-element-above-parent-element-using-css)

该问题的答案 set`overflow: visible`仅适用于一个孩子的一位父母。但是，我有这些元素的行；我需要孩子显示在父母身上的父母行。我可以让孩子显示在原始父母之上，但我不能让孩子显示在父母的兄弟姐妹之上。为了让您了解我在说什么，这是一个屏幕截图：

![截屏](../Images/03ae6d99139f73d50f0b24e646e810d9.png)

我想要的是选项弹出窗口，隐藏在接下来两行后面的元素，显示在这两行上，就像它显示在其直接父级上一样。我一直在搞砸它并没有弄明白，所以希望这里有人能够提供帮助。

这是基本结构：

```
.row,
.selector {
  position: relative;
}

.label,
.selector {
  display: inline-block;
}

.selector {
  overflow: visible;
}

.selector-inner {
  display: block;
}

.selector-arrow {
  float: right;
  width: 21px;
  height: 21px;
  background: url(arrow.png) no-repeat center center;
}

.selector-caption {
  display: inline-block;
}

.options-popup {
  position: absolute;
  z-index: 100;
  top: 0px;
  right: 0px;
}

.options-item {
  /* only for fonts and sizes */
}
```

```
<div class="row">
  <div class="label">Color Scheme:</div>
  <div class="selector">
    <div class="selector-inner">
      <div class="selector-arrow"></div>
      <div class="selector-caption">Standard</div>
    </div>
    <div class="options-popup">
      <div class="options-item">Standard</div>
      <div class="options-item">Dark</div>
      <div class="options-item">Light</div>
    </div>
  </div>
</div>
```

我可以对 CSS 做些什么来让选项弹出窗口显示在所有其他元素上？我需要对 HTML 做些什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-24T22:29:19.693

`position: relative`为一个元素创建一个新的定位上下文。此元素的子元素位于此本地上下文中。他们不能离开这个背景。如果要将子元素定位在其父元素的兄弟元素之上，则应将`z-index`其父元素的值设置为高于`z-index`其兄弟元素的值。

如果元素相对于其兄弟元素的有效`z-index`位置仅取决于它们的 DOM 树顺序，那么将元素移动到DOM 树中所有兄弟元素*之后的位置（如果语义上合适）也会有所帮助。*

请注意，您始终`z-index`可以通过 JavaScript 进行动态更改（就 Unobtrusive JS 而言，不要忘记提供合理的纯 CSS 替代方案，以便在禁用 JS 时不会隐藏内容）。

# c - 在类 unix 操作系统下同步和“原始”访问 USB 串行

> ID：11175835
> 
> 赞同：2
> 
> 时间：2012-06-24T07:44:55.060
> 
> 标签：c, unix, serial-port, usbserial

我有一个 AVR，我已将其设置为在插入计算机时充当 USB 串行设备。我想通过串口向它发送命令。

但是，我无法获得发送和接收回复的命令。我一次发送 16 位数据并期望收到 16 位回复，但相反，我的程序挂起等待回复。我怀疑它与串行和 USB 驱动程序上的输出缓冲有关。

我尝试寻找控制串行端口的方法，但很难确定我需要哪些选项，因为许多选项仅适用于真正的串行端口（不是 USB 串行端口）。

目前，我正在使用此代码打开设备文件

```
int fd = open(device, O_RDWR | O_NDELAY | O_SYNC | O_NOCTTY);
struct termios tio = {0};
cfmakeraw(&tio);
tio.c_cc[VMIN] = 2;
tcsetattr(fd,TCSANOW,&tio); 
```

谁能帮我选择适合我需要的选项？我只需要没有（或很少）输出缓冲的同步直接访问。

# java - nextLine() 没有暂停

> ID：11175837
> 
> 赞同：2
> 
> 时间：2012-06-24T07:45:44.513
> 
> 标签：java

> **可能重复：**
> [java.util.Scanner：为什么我的代码中的 nextLine() 没有提示？](https://stackoverflow.com/questions/6289765/java-util-scanner-why-my-nextline-in-my-code-not-promt)

```
import java.util.Scanner;

class apples {
public static void main(String args[]){
        Scanner npwn = new Scanner(System.in);
        int first,second,answer;
        String op;
        System.out.print("Insert first number: ");
        first = npwn.nextInt();
        System.out.print("Insert Operation ('+', '-', '*', '/')");
        op = npwn.nextLine();
        if (op.equals("+")) {
            System.out.print("Insert next number: ");
            second = npwn.nextInt();
            answer = first + second;
        } 
        else { System.out.print("Insert next number: ");
        second = npwn.nextInt(); 
        answer = first - second;

        }
        System.out.println(answer);
}
} 
```

上面写着“op:nextLine();”；它不会停下来等待“nextLine”的文章。它只是跳过并打印“插入下一个数字：”。为什么是这样？

# vim - 如何获取 Vim 中所有环境变量的列表？

> ID：11175842
> 
> 赞同：19
> 
> 时间：2012-06-24T07:46:31.673
> 
> 标签：vim, environment-variables

当 Vim 启动时，它会从操作系统中获取许多环境变量（如`PATH`），并设置自己的环境变量（如`MYVIMRC`）。

如何*列出*或查看 Vim 理解的所有环境变量，以及它们在 Vim 内部的各自值？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-25T15:53:24.137

在 Vimscript 中，没有直接获取当前定义的环境变量列表的方法。但是，可以利用 Vim 命令行完成功能来制作一个。

考虑以下未完成命令的可能完成：

```
:echo $ 
```

不难看出，根据 Vimscript 语法，补全必须是环境变量的名称。按键`wildchar`（`Tab`默认情况下是 ）或 `Ctrl`+`D`将显示所有这些。

为了从脚本中获得这个完成列表，我们需要克服它的交互性。我在这里提出的一个可能的技巧依赖于特征的组合。其中第一个是 `Ctrl`+`A`命令。在命令行模式下，此快捷方式触发在光标前插入每个可用的完成。插入的补全按字母顺序列出并用空格分隔。

如果我们可以让 Vim 将这些补全直接打印到命令行中，我们可以通过使用`:redir`命令重定向命令输出来轻松捕获它们。但是我们需要实现这个副作用是引用插入的文本`Ctrl`+ `A`：引用使我们的`:echo`命令的其余部分成为可以打印出来的字符串文字！

```
:echo 'NAME1 NAME2 NAME3'
NAME1 NAME2 NAME3 
```

要以这种方式编辑命令行，用户可以键入 `:ec`（的别名`:echo`）  `$`，然后按 `Ctrl`+ `A`，键入 ，按+`'`跳到行首，按将光标移到美元符号上 `Ctrl``B``⇾</kbd> (the right arrow key) twice, delete that `$`, and, finally, insert `'` instead. The same sequence of key presses can easily be reproduced non-interactively using the `:normal` command.`

将所有这些部分放在一起，我们得到以下函数：

```
function! Env()
    redir => s
    sil! exe "norm!:ec$\<c-a>'\<c-b>\<right>\<right>\<del>'\<cr>"
    redir END
    return split(s)
endfunction 
```

要使这种方法起作用，Vim 必须使用该 `+cmdline_compl`特性进行编译。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-24T12:36:18.733

要列出所有环境变量，请使用

```
:echo $<C-D> 
```

然后，您可以开始输入感兴趣的变量的名称，用 自动完成`Tab`，最后按`Enter`显示其值。

您没有告诉您是否需要以交互方式或在脚本中。对于后者，不幸的是无法通过`:redir`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-11-08T23:17:15.763

**vimscript environ()**函数已使先前的答案过时。

例如，按顺序列出它们：

```
:let evars = environ()
:for var in evars->keys()->sort()
:    echo var . '=' . evars[var]
:endfor 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-24T02:53:10.733

查看其他答案，您无需脚本即可完成。

进入插入模式，然后按

```
<C-R>= 
```

其中`Ctrl`+`R`允许您插入任何可用的寄存器（参见 :help i_Ctrl-R）。但特别是您将在`=`此处使用表达式寄存器来计算字符串（请参阅 :help @=）。

所以，现在您可以插入 ib. 的答案介绍的表达式。输入这个：

```
$<C-A>"<HOME>"<CR><ESC> 
```

现在，您应该回到正常模式，并且表达式应该已经评估为字符串并被放置在缓冲区中。您可以使用替代命令进一步清理它：

```
:s/\s/\r$/g 
```

这应该将每个环境变量放在不同的行上。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-30T10:08:05.447

根据 ib 的想法和 ZyX 的评论，这是我最终使用的函数：

```
function! GetEnvVars()
    silent execute "normal! :return $\<C-a>')\<C-b>\<C-right>\<Right>\<Del>split('\<CR>"
endfunction 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-11T20:13:20.827

```
:let 
```

显示所有（包括当前缓冲区/窗口）变量。或者，如果您需要列出所有窗口范围变量，请使用以下命令：

```
:let w: 
```

# html - 将数据发布到数据库-web sql chrome 扩展

> ID：11175846
> 
> 赞同：1
> 
> 时间：2012-06-24T07:47:07.757
> 
> 标签：html, google-chrome, google-chrome-extension, local-storage

我正计划将帖子从我的服务器保存到我的扩展程序。Chrome 是否为此提供了无限存储 web sql 示例？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T08:48:15.630

在 MDN 上阅读[使用 IndexedDB](https://developer.mozilla.org/en/IndexedDB/Using_IndexedDB)和IndexedDB[背后的基本概念](https://developer.mozilla.org/en/IndexedDB/Basic_Concepts_Behind_IndexedDB)，以了解有关 IndexedDB 的更多信息。

默认情况下，Chrome 的配额限制为 5MB。要解锁无限存储空间，您必须将[`"unlimitedStorage"`权限](http://code.google.com/chrome/extensions/manifest.html#permissions)添加到清单文件。

# cocoa - drawRect: 并不总是在 setNeedsDisplay:YES 之后调用，当父视图是 layer-backed 时

> ID：11175848
> 
> 赞同：0
> 
> 时间：2012-06-24T07:47:14.930
> 
> 标签：cocoa, calayer, nsview, drawrect, setneedsdisplay

我有一个基本的 Cocoa 应用程序，它有一个自定义`NSCollectionView`覆盖`drawRect:`以绘制红色背景（用于说明目的）。

我注意到在看似随机的时间，`drawRect:`虽然我调用了`setNeedsDisplay:YES`. 其他时候它工作并且集合视图具有红色背景。

我花了几个小时，但后来我终于注意到在视图层次结构的高处，其中一个父视图是一个**支持层的视图**（我在 Interface Builder 中检查了“核心动画层”以向元素添加阴影） .

将该父视图更改为不使用图层支持立即解决了问题，`drawRect:`然后总是按预期调用。

令我困惑的是，在父视图上启用图层支持时，`drawRect:`有时会调用它，但并非总是如此。

如果父视图是图层支持的，我是否应该假设我*不能在任何子视图中可靠地覆盖？* `drawRect:`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:29:07.963

观看 WWDC 2012 关于 layer-backed view 的视频，并阅读`-layerContentsRedrawPolicy`. 听起来像你想要`NSViewLayerContentsRedrawOnSetNeedsDisplay`的。

# ruby-on-rails - 澄清铁轨收集路线

> ID：11175849
> 
> 赞同：0
> 
> 时间：2012-06-24T07:47:16.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-routing

**路线.rb**

```
resources :home do
 get 'download', :on => :collection
end 
```

**耙路线**

```
download_home_index GET    /home/download(.:format)     home#download
home_index GET             /home(.:format)              home#index
.... 
```

**home_controller.rb**

```
def index
end 
```

当我转到 http://localhost:3000/home/download 时，即使 home_controller 中没有“下载”操作，它也可以工作。我很困惑为什么即使没有动作，它也不会抱怨缺少动作。

我很好奇，所以我添加`resources :homes`到 routes.rb 并`rake routes`给了我以下内容：

```
homes GET    /homes(.:format)             homes#index 
```

相比之下，它不是 home_index 而之前是 home_index。是否有一些轨道魔术正在发生？欣赏一些解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:49:13.047

对于第一个问题，如果您对动作有看法，那么您并不严格需要定义动作（但您确实应该这样做）。

对于第二个问题，您定义了`resources :homes`vs `resources :home`，因此生成的路线不同。`resources :home`是不正确的。

# objective-c - iPad 离线时访问 Dropbox 文件

> ID：11175852
> 
> 赞同：0
> 
> 时间：2012-06-24T07:48:39.173
> 
> 标签：objective-c, ios, dropbox, dropbox-api

我希望我的原生 iOS 应用能够在 iPad 离线时访问我 iPad 上的所有 Dropbox 文件。我玩过 Dropbox 的轮盘赌应用程序，但它似乎在您下线后立即停止工作。

是否可以构建一个与 Dropbox 集成的应用程序，并在 iPad 离线时访问离线 Dropbox 存储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T08:40:27.813

我认为这是不可能的，因为 Dropbox 是一种在线服务和存储。

结果是您可以使用它，该应用程序从远程检索内容，并且一旦您断开连接，它将不再起作用。

对于您所说的，应该有一些缓存方法，以便检索内容并离线保存它们。

但想一想：如果有人在 Dropbox 上有 200-500+ mb 的大文件，那么检索和缓存内容会很困难，iPad 的存储空间将在几分钟内被填满！

所以，除了 Dropbox 没有提供这样的功能，我认为你所能做的就是像往常一样继续使用 Dropbox。

# mschart - MS 图表控件 + XValue 成员作为 AM PM 格式的时间

> ID：11175853
> 
> 赞同：2
> 
> 时间：2012-06-24T07:49:19.050
> 
> 标签：mschart

我有一个来自 DB 的结果集，它有两列 - 1\. AM / PM 的时间从 1 点到 12 点开始，然后是 1 点到 12 点，还有 2\. 一些计数。

我在我的页面上显示折线图并绑定 XValueMembers = 我的时间列（在 AM / PM 中有时间）和 YValueMembers - 计数。

问题是图表控件会自动对 X 轴上的值进行分组，所以我只能看到值 - 1 到 12。实际上，由于 AM / PM 格式，结果集的每个数字从 1 到 12 重复了两次。

如何在没有任何分组的情况下在 X 轴上显示 1 - 12 AM 和 1 - 12 PM 的所有值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T18:04:01.993

如果数据库的结果是整数，我建议您创建`DateTime`对象。

您可以将它们用作您的 X 轴值并格式化轴标签。例如：

```
DateTime dateTime1 = new DateTime(2013, 01, 01);
DateTime dateTime2 = new DateTime(2013, 01, 02);
DateTime dateTime3 = new DateTime(2013, 01, 03);

DateTime[] xValues = new DateTime[3] { dateTime1, dateTime2, dateTime3 };
int[] yValues = new int[3] { 0, 1, 2 };

chart.Series[0] = new Series();
chart.Series[0].Points.DataBindXY(xValues, yValues);

chart.ChartAreas[0].AxisX.LabelStyle.Format = "MMMM dd, yyyy - hh:mm tt"; 
```

请注意，在这种情况下`tt`代表 AM/PM 指示符。

[您可以在此处](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)找到其他自定义日期和时间字符串格式。

# android - 设置 textView.setAdapter(

> ID：11175854
> 
> 赞同：0
> 
> 时间：2012-06-24T07:49:28.863
> 
> 标签：android, google-maps-api-3, autocomplete

这应该很简单，但我仍然看不到什么/如何可能是 Null。我试图从谷歌地方 api获得一个**AutoCompleteTextView的结果。**我可以看到我的 URL 创建是正确的，我从 google 获得了结果，但是当结果被传播到 textView 时，一切都崩溃了。

XML 布局 - places_search.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#dddddd">

<AutoCompleteTextView android:id="@+id/autoCompleteTextView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp" >
    <requestFocus></requestFocus>
    </AutoCompleteTextView>
</RelativeLayout> 
```

TextView 的 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16sp"
    android:textColor="#000">
</TextView> 
```

以下是从 google places api 搜索自动完成结果的完整代码。

```
public class PlacesListSearchActivity extends Activity {

    private static final String TAG = "PlacesListActivity";

    private ResultReceiver mReceiver;

    private OnSharedPreferenceChangeListener sharedPreferencesListener;
    private SharedPreferences sharedPreferences;

    /** Called when the activity is first created. */
    public ArrayAdapter<String> adapter;
    public AutoCompleteTextView textView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.places_search);
        final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.item_list);
        final AutoCompleteTextView textView = (AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1);
        adapter.setNotifyOnChange(true);
        textView.setHint("type store name");
        textView.setAdapter(adapter);
        textView.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before, int count) {
            if (count%3 == 1) {
                adapter.clear();
                    GetPlaces task = new GetPlaces();
                    //now pass the argument in the textview to the task
                    task.execute(textView.getText().toString());
            }
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
        // TODO Auto-generated method stub

        }

        public void afterTextChanged(Editable s) {

        }

        });
    }

    class GetPlaces extends AsyncTask<String, Void, ArrayList<String>> {
        @Override
        // three dots is java for an array of strings
        protected ArrayList<String> doInBackground(String... args)
        {
            Log.d("gottaGo", "doInBackground");
            ArrayList<String> predictionsArr = new ArrayList<String>();
            try
            {
                URL googlePlaces = new URL(
                        "https://maps.googleapis.com/maps/api/place/autocomplete/json?input=" +
                        URLEncoder.encode(args[0], "UTF-8") +
                        "&types=geocode&language=en&sensor=true&key=" +
                        getResources().getString(R.string.googleAPIKey));

                Log.d("URL", googlePlaces.toString());

                URLConnection tc = googlePlaces.openConnection();
                BufferedReader in = new BufferedReader(new InputStreamReader(
                        tc.getInputStream()));

                String line;
                StringBuffer sb = new StringBuffer();
                //take Google's legible JSON and turn it into one big string.
                while ((line = in.readLine()) != null) {
                    sb.append(line);
                }
                //turn that string into a JSON object
                JSONObject predictions = new JSONObject(sb.toString()); 
                //now get the JSON array that's inside that object            
                JSONArray ja = new JSONArray(predictions.getString("predictions"));

                for (int i = 0; i < ja.length(); i++) {
                    JSONObject jo = (JSONObject) ja.get(i);
                    //add each entry to our array
                    predictionsArr.add(jo.getString("description"));
                }
            } catch (IOException e)
            {
            Log.e("YourApp", "GetPlaces : doInBackground", e);
            } catch (JSONException e)
            {

    Log.e("YourApp", "GetPlaces : doInBackground", e);
        }

        return predictionsArr;
    }

    //then our post
    @Override
    protected void onPostExecute(ArrayList<String> result){
        Log.d("YourApp", "onPostExecute : " + result.size());
        //update the adapter
        adapter = new ArrayAdapter<String>(getBaseContext(), R.layout.item_list);
        adapter.setNotifyOnChange(true);
        //attach the adapter to textview
        textView.setAdapter(adapter);

        for (String string : result) {
            Log.d("YourApp", "onPostExecute : result = " + string);
            adapter.add(string);
            adapter.notifyDataSetChanged();
        }

        Log.d("YourApp", "onPostExecute : autoCompleteAdapter" + adapter.getCount());
    }

}

} 
```

下面是LOGCAT：

```
06-24 09:34:41.225: E/AndroidRuntime(10588): FATAL EXCEPTION: main
06-24 09:34:41.225: E/AndroidRuntime(10588): java.lang.NullPointerException
06-24 09:34:41.225: E/AndroidRuntime(10588):    at com.rathinavelu.rea.PlacesListSearchActivity$GetPlaces.onPostExecute(PlacesListSearchActivity.java:156)
06-24 09:34:41.225: E/AndroidRuntime(10588):    at com.rathinavelu.rea.PlacesListSearchActivity$GetPlaces.onPostExecute(PlacesListSearchActivity.java:1)
06-24 09:34:41.225: E/AndroidRuntime(10588):    at android.os.AsyncTask.finish(AsyncTask.java:602)
06-24 09:34:41.225: E/AndroidRuntime(10588):    at android.os.AsyncTask.access$600(AsyncTask.java:156)
06-24 09:34:41.225: E/AndroidRuntime(10588):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
06-24 09:34:41.225: E/AndroidRuntime(10588):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-24 09:34:41.225: E/AndroidRuntime(10588):    at android.os.Looper.loop(Looper.java:137)
06-24 09:34:41.225: E/AndroidRuntime(10588):    at android.app.ActivityThread.main(ActivityThread.java:4507)
06-24 09:34:41.225: E/AndroidRuntime(10588):    at java.lang.reflect.Method.invokeNative(Native Method)
06-24 09:34:41.225: E/AndroidRuntime(10588):    at java.lang.reflect.Method.invoke(Method.java:511)
06-24 09:34:41.225: E/AndroidRuntime(10588):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
06-24 09:34:41.225: E/AndroidRuntime(10588):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
06-24 09:34:41.225: E/AndroidRuntime(10588):    at dalvik.system.NativeStart.main(Native Method) 
```

第 156 行将我带到代码中的这一行：

```
textView.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T08:03:17.193

改变

```
final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.item_list);
final AutoCompleteTextView textView = (AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1) 
```

到

```
 adapter = new ArrayAdapter<String>(this,R.layout.item_list);
 textView = (AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T07:54:57.680

很明显你会得到NPE

您已经定义了 textView 两次。

1 在 Oncreate Block （这是本地的）

```
final AutoCompleteTextView textView = (AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1); 
```

2 在类成员变量中。

```
public AutoCompleteTextView textView; 
```

当您尝试 setAdapter 时，它会寻找未初始化的成员变量 textView。

解决方案是删除`final AutoCompleteTextView`。

```
textView = (AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1); 
```

事实上，您需要将两者都修改为以下

```
adapter = new ArrayAdapter<String>(this,R.layout.item_list);
textView = (AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1); 
```

如果您在成员变量中定义了它们，那么为什么要在 onCreate 中本地重新定义它们。如果您尝试从 AsyncTask 访问它们，它将查找未初始化的成员变量。

# ios5 - AFNetworking + NsOperationQueue - 下载数千张图片

> ID：11175855
> 
> 赞同：8
> 
> 时间：2012-06-24T07:49:39.957
> 
> 标签：ios5, nsoperationqueue, afnetworking

我正在处理一项任务（仅限 iOS5 +），该任务涉及从服务器下载数千张图像。图像属于某些类别，每个类别可以有数百张图像。我需要做的是：-

1) 如果应用程序处于活动状态，请确保应用程序在后台下载任何丢失的图像（即使用户正在浏览应用程序的其他与照片无关的区域）。

2）当用户点击一个照片类别时，该类别中的图像必须作为高优先级下载，因为那些是需要立即可见的图像。

仅当图像尚未脱机可用时，才会发生上述所有情况。下载后，将使用本地存储中的图像。

为了解决这个问题，我使用的逻辑是这样的：-

1) 在 AppDelegate.m 中`applicationDidBecomeActive`，我开始下载任何丢失的图像。为此，我进行了核心数据查询，找出丢失的图像，并开始在具有背景优先级的线程中下载它们。像这样的东西：-

```
 dispatch_queue_t imageDownloadQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0);
dispatch_async(imageDownloadQueue, ^{
    [DataDownloader downloadMissingImages];
});
dispatch_release(imageDownloadQueue); 
```

`downloadMissingImages`代码如下所示：-

```
NSOperationQueue *downloadQueue = [[NSOperationQueue alloc] init];
        downloadQueue.maxConcurrentOperationCount = 20;

        for(MyImage *img in matches)
        {
            NSURLRequest *request = [NSURLRequest requestWithURL:img.photoUrl];
            AFImageRequestOperation *operation = [AFImageRequestOperation imageRequestOperationWithRequest:request success:^(UIImage *image) {

                [MyImage imageFromAPI:image inManagedObjectContext:document.managedObjectContext];

                NSLog(@"Successfully downloaded image for %@", img.title);      
            }];

            [downloadQueue addOperation:operation];
        } 
```

这可行，但它会阻塞主 UI，并且应用程序会在一段时间后崩溃。这是我尝试下载大约 700 张图像的时候。有了更多的图像，它肯定会崩溃。

2）当用户点击一个类别时，我需要先下载这些图像，因为它们必须立即显示给用户。我不确定如何中断 missingImages 调用并告诉它在其他图像之前开始下载某些图像。

所以，基本上，我需要在后台下载所有丢失的图像，但如果用户正在浏览照片类别，这些图像必须在下载队列中具有高优先级。

我不知道如何让它有效地工作。有什么想法吗？

崩溃日志如下所示

```
PAPP(36373,0xb065f000) malloc: *** mmap(size=16777216) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug
PAPP(36373,0xb065f000) malloc: *** mmap(size=16777216) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug
Jun 24 11:39:45 MacBook-Pro.local PAPP[36373] <Error>: ImageIO: JPEG    Insufficient memory (case 4) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T10:28:06.493

关于崩溃，我猜您的应用程序由于以下两个选项之一而被终止：

1.  应用程序变得无响应（因此没有响应 iOS 哨兵进程）；

2.  循环中使用的内存过多，创建了 700 多个请求操作。

为了澄清实际发生的情况，您应该提供有关崩溃的更多信息（控制台日志）。在任何情况下，修复都会以每个可能 10 或 20 个的块加载图像（如果你愿意，你甚至可以一个一个地去，如果你愿意，我看不出有什么问题）。

关于第二点，这个呢：

1.  在主线程中下载更高优先级的图像（通过异步下载，当然，以避免阻塞 UI）；

2.  在开始下载“离线”图像之前，您同时通过“更高优先级”下载检查图像是否已经下载。

为了很好地处理第 2 点，您可能需要将自定义操作排队而不是 an`AFImageRequestOperation`以便在实际下载之前进行检查。

编辑：

关于分块下载图像，您可以使用调度组对网络操作进行分组：

```
dispatch_group_t group = dispatch_group_create();

<your_core_data_query>

for (...) {
    dispatch_group_enter(group);

        NSURLRequest *request = [NSURLRequest requestWithURL:img.photoUrl];
        AFImageRequestOperation *operation = [AFImageRequestOperation imageRequestOperationWithRequest:request success:^(UIImage *image) {
            [MyImage imageFromAPI:image inManagedObjectContext:document.managedObjectContext];
            NSLog(@"Successfully downloaded image for %@", img.title);

            dispatch_group_leave(group);     //<== NOTICE THIS
        }];

}

dispatch_group_wait(group, DISPATCH_TIME_FOREVER);
dispatch_release(group); 
```

在这个示例中，我使用了一个调度组来对一些异步操作进行分组并等待它们全部执行；返回时`dispatch_group_wait`，您可以执行另一轮（查询核心数据然后调度操作）。

关于您的另一个问题（我如何检查更高优先级的队列是否已经下载了某个图像），您应该在执行每个之前进行核心数据查询`AFImageRequestOperation`；一种可能性是派生您自己的类并覆盖`start`进行检查的方法。

在这两种情况下，您可以通过同时下载一个图像来简化所有这些逻辑（即，`for (...)`循环不存在；您只需查询下一个图像以下载并下载它；在下载之前检查它是否已经在那了。

我建议走这条更容易的路。

希望能帮助到你。

# python - Django（Python）：DatabaseError：x表没有名为y的列

> ID：11175856
> 
> 赞同：6
> 
> 时间：2012-06-24T07:50:11.160
> 
> 标签：python, database, django, sqlite

嗨，我正在使用 sqlite3 数据库开发 django python 应用程序。我对在我的 models.py 中定义的 django 用户模型进行了扩展，如下所示：

```
#Account Model
class Account(models.Model):
  user = models.OneToOneField(User)
  avatar_url = models.CharField(max_length=200)
  profile_url = models.CharField(max_length=200)
  account_type = models.CharField(max_length=60, choices=choices.ACCOUNT_TYPE) 
```

我也有一个方法来创建`Account object`和`post_save`定义这样的处理程序：

```
#Function to Create user Account/Profile
def create_user_account(sender, instance, created, **kwargs):
  if created:
    models.Account.objects.create(user=instance)

#Create User / User Registration
def UserRegistration(request):
  if request.method == 'POST':
    username = request.POST['fn'].capitalize() + ' ' + request.POST['ln'].capitalize()
    # CREATE USER
    newuser = User.objects.create_user(username=username,
                                       email=request.POST['email'],
                                       password=request.POST['pw'])
    newuser.save()
  return HttpResponse(username)

#Post Save handler to create user Account/Profile
post_save.connect(create_user_account, sender=User) 
```

现在，每当我尝试注册新用户时，都会收到以下数据库错误：

```
DatabaseError at /register/

table engine_account has no column named user_id

Request Method:     POST
Request URL:    http://localhost:8000/register/
Django Version:     1.4
Exception Type:     DatabaseError
Exception Value:    

table engine_account has no column named user_id

Exception Location:     /usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/db/backends/sqlite3/base.py in execute, line 337
Python Executable:  /usr/bin/python
Python Version:     2.7.3 
```

我不知道那个`"user_id"`领域是从哪里来的..有什么想法吗？

PS：

表 engine_account 基本上是`Account`应用程序中名为的类`Engine`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T08:00:39.390

你在运行 syncdb 后编辑了 models.py 吗？

如果是这样，那么您应该手动编辑您的表或使用以下方法重新创建您的数据库：

```
python manage.py syncdb 
```

在项目目录中应用更改。

* * *

2019 年更新：`syncdb`在 Django 1.9 及以后版本中已弃用。利用

```
python manage.py makemigrations <app_name>
python manage.py migrate --run-syncdb 
```

* * *

2020 年更新：我想在我的答案中添加更多描述。

如果模型和对应的表不匹配，就会出现这个问题。这意味着您已更改模型但未迁移更改。有些人不明白`makemigrations`和`migrate`命令之间的区别。为了更清楚，我将尝试解释其中的区别：

`./manage.py makgemigrations <app_name>`：给定应用程序模型的更改将与以前的迁移进行比较。如果没有`app_name`提供，所有跟踪的应用程序都将受到控制，如果有任何更改，则将创建迁移。每个应用程序都有其迁移目录，此命令将在此目录中创建相关的迁移。创建迁移时，它对数据库没有任何更改，需要应用迁移。如果您不应用迁移，那么您仍然会收到相同的错误。

`./manage.py migrate`：命令创建的迁移`makemigrations`应用于数据库。在生产环境中迁移时需要小心。

`./manage.py showmigrations`：此命令列出迁移的状态，您可以查看是否应用了迁移。通常状态存储在数据库中，但不需要连接到数据库并爬取数据。此命令为您提供清晰的输入。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-04-06T07:58:07.737

`syncdb`在 django 1.9 及更高版本中已弃用。所以对于 django 版本 1.9 或更高版本运行`python manage.py makemigrations <app-name>`然后`python manage.py migrate`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-06-06T11:43:12.203

我试过 `python manage.py syncdb`了，这还不够，所以解决方案是：

> 我删除了 `migrations file`，我删除了 `db.sqlite3`文件，

> 我`python manage.py makemigrations`也 执行了`python manage.py migrate`

> 答对了 ！

# asp.net-mvc - 如何设置 SQL Server / IIS 7.0 以允许 ASP.NET MVC 网站访问数据库？

> ID：11175858
> 
> 赞同：6
> 
> 时间：2012-06-24T07:50:47.317
> 
> 标签：asp.net-mvc, sql-server-2008, database-connection

我已经构建了一个 ASP.NET MVC 2 网站，我使用 IIS 7.0 在 Rackspace 云服务器上托管该网站。

当我尝试在服务器上使用 IIS 7.0 在 localhost 下测试网站时，我收到一个错误页面。这来自 SQL 日志（我使用的是 SQL Web 版）：

```
Error: 18456, Severity: 14, State: 11
Login failed for user 'IIS APPPOOL\DefaultAppPool'. Reason: Token-based server access validation failed with an infrastructure error. Check for previous errors. [CLIENT: <local machine>] 
```

我的网站在我的家用 PC 上运行良好，因此问题与连接数据库有关。

研究了错误消息代码后，它表明我有一个有效的数据库登录，但服务器访问失败。我在各种论坛（包括stackoverflow / serverfault）上对此进行了大量阅读，这是我尝试过的，但都没有解决这个问题：

1.  **使用 SQL Server 身份验证设置新登录**。我在 SQL 中创建了一个新登录名，并为我的数据库提供了正确的访问权限。我在网络配置中使用了以下连接字符串：

    数据源=myServer；初始目录=myDB；用户ID=myUsername；密码=myPassword；

2.  **将新登录名创建为`IIS APPPOOL\DefaultAppPool`**. 我在 SQL 中创建了具有正确访问权限的新登录名并使用了 Windows 身份验证。连接字符串如下：

    服务器=myServer;数据库=myDataBase;Trusted_Connection=True;

3.  **使用现有网络登录`NT AUTHORITY\NETWORK SERVICE`**。我使用正确的访问权限将此用户映射到我的数据库。连接字符串如下：

    服务器=myServer;数据库=myDataBase;Trusted_Connection=True;

当我在线阅读材料时，这些似乎是主要选项。最后，这里还有一些其他可能有用的东西：

*   将 SQL 设置为**以管理员身份运行**并没有解决问题
*   关闭`UAC`没有帮助
*   我的应用程序池正在使用**ApplicationPoolIdentity**（出于安全原因最好）

简而言之，我的网站无法启动，因为它无法从数据库中获取对象，因此会引发错误。问题是对服务器的访问权限设置不正确。我无法确定我需要什么配置的 SQL 登录名/连接字符串/域访问权限。

这让我烦恼了 3 周——你能抽出 5 分钟来帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T08:37:37.910

由于您的服务器（Web 和 SQL）不是域的一部分，因此您不能使用 Windows 身份验证（集成安全性）连接到 SQL Server。

在 IIS 中，当具有`Integrated Security=SSPI`连接字符串时，用于连接 SQL Server 的实际用户是应用程序池标识。

您应该选择选项 1，即**使用 SQL Server 身份验证设置新登录**。

因此，步骤将是：

1.  创建您的`myUsername`SQL Server 用户。
2.  在用户的属性对话框中，转到该`Securables`部分并确保`Public`已选中。
3.  接下来，移动到该`User mapping`部分（在左侧）。在列表中查找您的数据库并检查它。在下面的列表中，`Database role membership`确保选中`public`和。`db_datareader``db_datawriter`
4.  现在授予您的用户执行存储过程的权限。作为`sa`，在 Management Studio 中，执行：

    授予我的用户名执行；

5.  你完成了。

至于安全性，您可以稍后将权限细化`myUserName`为不能，例如删除表或其他对象。

在您的应用程序中，您现在应该在第 1 点使用连接字符串。

如果您有任何其他问题，请发布错误消息。

# .net - WMB8/.NET 计算节点调试

> ID：11175860
> 
> 赞同：2
> 
> 时间：2012-06-24T07:51:43.403
> 
> 标签：.net, visual-studio-debugging, messagebroker

在 WebSphere message Broker 8 中，新的 .NET 计算节点非常棒，可以连接基于 Windows 的服务并处理 Windows 事务。但是，调试代码并非易事。我希望你们中的任何人对此有一些线索：

简短信息：

WMB 中的消息流是在基于 Eclipse 的 IDE 中开发的，并且有一个调试器来逐步执行逻辑。它与执行 Java 逻辑的 Java 计算节点无缝集成。

.NET 计算节点逻辑实际上是 Visual C# 中 .DLL 项目的类中的一个方法（理论上可以是任何 Visual XX 风格）。似乎 Visual Studio 能够启动外部程序来调试 DLL 项目。但是，在这种情况下，很难将 WebSphere Message Broker 作为外部应用程序启动。有没有办法将调试附加到仅由此特定 WMB 消息流使用的特定 DLL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T11:36:00.917

要逐步通过 WMB8 中的 .NET 计算节点，请执行以下操作。

这在 Visual C# Express 2010（免费）版中是不可能的。

1.  设置您的 Visual Studio 构建配置以进行调试
2.  确保 Broker Toolkit 中的程序集路径指向 /Debug/yourcomputenode.dll 而不是 /Release/yourcomputenode.dll
3.  在 Visual Studio 中，根据需要指出断点
4.  选择“调试”，然后选择“附加到进程”
5.  您可能需要选择“显示所有用户的进程”和“显示所有会话中的进程”才能找到 WMB。
6.  选择与您的执行组相对应的 DataFlowEngine 流程（只有一个 EG 会很容易）
7.  运行您的流程，它会在您的 .NET 计算节点内部中断，您可以像在 Java 计算节点中一样轻松地进行调试。
8.  这独立于 Broker 工具包中的任何调试，您也可以选择在那里进行调试，或者一起跳过。

调试派对时间！

# include - Cmake 附加包括

> ID：11175871
> 
> 赞同：4
> 
> 时间：2012-06-24T07:54:34.490
> 
> 标签：include, cmake

如何为 cmake 项目设置附加包含（不在 CmakeLists.txt 中）或如何在不覆盖此项目 CMakeLists.txt 的情况下为项目包含附加 *.cmake 文件。

我尝试`-DCMAKE_C_IMPLICIT_INCLUDE_DIRECTORIES=<...>`and `-DCMAKE_CXX_IMPLICIT_INCLUDE_DIRECTORIES=<...>`，但没有效果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T11:02:19.027

`CMAKE_CXX_FLAGS`您可以通过在变量中指定它们并`CMAKE_C_FLAGS`在调用 cmake 时添加其他包含目录：

```
cmake -DCMAKE_CXX_FLAGS="-I /path/to/dir" .. 
```

# ruby-on-rails - Rails 单选按钮链接到控制器操作

> ID：11175872
> 
> 赞同：1
> 
> 时间：2012-06-24T07:54:35.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

如何在我的视图中设置选定的单选按钮以在我的控制器中执行操作。例如，我在控制器中定义了 3 个搜索操作，我希望用户选择一个单选按钮，它将搜索查询路由到适当的控制器操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T10:39:09.520

您可以将两个参数传递给您的控制器，`search`例如`option`：

```
<%= form_tag controller_path, method: :get do %>
  <%= text_field_tag :search, params[:search] %>
    <%= label_tag :option1 %>
    <%= radio_button_tag :option, "1" %>
    <%= label_tag :option2 %>
    <%= radio_button_tag :option, "2" %>
    <%= label_tag :option3 %>
    <%= radio_button_tag :option, "3" %>
  <%= submit_tag "Search", name: nil %>
<% end %> 
```

因此，它将通过 URL 发送带有一些值的`search=`和`option=`，例如`search=some+test`和`option=1`。

然后，在您的控制器中，您可以使用这两个参数......例如：

```
if params[:option] == "1"
  #do something using the params[:search]
elsif params[:option] == "2"
  #do something using the params[:search]
elsif params[:option] == "3"
  #do something using the params[:search]
else
  #do something else
... 
```

我希望它有帮助...

# c# - 传递字符串参数 jni

> ID：11175873
> 
> 赞同：1
> 
> 时间：2012-06-24T07:54:36.610
> 
> 标签：c#, java, java-native-interface, parameter-passing

我想将字符串作为参数传递给我的 jni。但是当我传递字符串时；接收到的字符串只是一个意义较少的字符。事实上，我无法将我想要的字符串从 java 传递给我的 C# 函数。

我该怎么办？

编辑 ：

jin.java：

```
public static native void myFunc( String name); 
```

jin.cs:

```
public static void java_framewindow_myFunc(int env,int object,string name)
{
messagebox.show(name);
} 
```

我从java发送字符串“Hi”，但消息框中显示的字符串没有意义。

Edit2：这是我完整的 C# 代码：

```
using System;
using ObjectOrientedJNI; 
using System.Windows.Forms; 
namespace CSharpInJava { 
    public class NativeJavaMethods { 

        static void Java_FrameWindow_myFunc(int env, int obj, string name){
           messagebox.show(name);
        }
    }
} 
```

这是我完整的java代码：

```
import java.awt.Canvas;
import java.awt.event.ComponentEvent; 
import java.awt.event.ComponentListener;
public class FrameWindow extends Canvas { 
    int ref = 0;
      //Called by JVM to create Canvas' Peer 
    public void buttom_clicked() { 
        myFunc("hi"); 
    }
     native int myFunc(String name);
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:06:27.513

我没有将 JNI 与 C# 一起使用，但使用 C/C++，您的本机代码应该接收[jstring](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/types.html#wp428)类型，而不是字符串，如下所示：

`~~static void Java_FrameWindow_myFunc(int env, int obj, **jstring** name)~~`

通常，JNI 文档很差（使用 C# 似乎更是如此），因此转向[JNI 规范](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/jniTOC.html)是一个好主意。请注意，JNI 使用修改后的 UTF-8 字符串。

## 编辑：

EJP 是正确的，您的整个签名不正确。有关更多详细信息，请参阅[JNI 规范中的本机方法参数。](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/design.html#wp715)

```
static void Java_FrameWindow_myFunc( 
     JNIEnv *env,        /* interface pointer */ 
     jobject obj,        /* "this" pointer */
     jstring s)          /* argument #1 */ 
```

# android - 自定义 Android 键盘中的建议

> ID：11175879
> 
> 赞同：5
> 
> 时间：2012-06-24T07:56:11.657
> 
> 标签：android

Android 键盘在输入时显示建议。这些值是从联系人中挑选出来的。我正在编写一个应用程序，其中联系人建议的值不会构成场景，例如不同操作系统的名称（这些名称不会出现在联系人列表中）。

我想自定义此建议，以便 Android 键盘显示我给出的值列表中的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:27:46.753

听起来好像最好创建一个操作系统列表并允许用户在它们之间进行选择。查看 ListFragment [(http://developer.android.com/reference/android/app/ListFragment.html](http://developer.android.com/reference/android/app/ListFragment.html) )

# android - 选择在一个表中但不在第二个表中的文章

> ID：11175880
> 
> 赞同：0
> 
> 时间：2012-06-24T07:56:22.523
> 
> 标签：android, sqlite

我正在开发一个使用 SQLite 3 的 Android 3.1 平板电脑应用程序。

我有这三个表：

```
| Articles    |
+-------------+
| articleId   |
+-------------+
| description |
+-------------+

| OrdeArticle |
+-------------+
| orderId     |
+-------------+
| articleId   |
+-------------+

| EReportArticle |
+----------------+
| eReportId      |
+----------------+
| articleId      |
+----------------+ 
```

我想选择所有在`OrdeArticle`桌面上但不在`EReportArticle`桌面上的文章。

这是我**不工作**的SQL 语句：

```
SELECT 
   Article.articleId,
   Article.description
FROM
   Article,
   OrdeArticle,
   EReportArticle
WHERE
   OrdeArticle.orderId = ? AND 
   Article.articleId = OrdeArticle.articleId AND
   EReportArticle.eReportId = ? AND
   Article.articleId != EReportArticle.articleId; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T08:00:13.527

尝试使用 IN 语句检查 articleId 是否存在于一个表中并且不存在于另一个表中

```
SELECT articleId, description
FROM Articles
WHERE articleId IN (SELECT articleId FROM OrdeArticle) AND
articleId NOT IN (SELECT articleId FROM EReportArticle) 
```

# c# - DataGridView 上的格式化数字不是我需要的

> ID：11175885
> 
> 赞同：3
> 
> 时间：2012-06-24T07:57:55.240
> 
> 标签：c#, winforms

我的 C# WinForm DataGridView 中有数字

问题是：

```
0.5  -->  shows -->  .5     and

-45 -->  shows -->  45- 
```

**在我的 DataGridView 中 RightToLeft = yes** （我必须有这个）

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T08:03:57.757

使用 DataGridViewCellStyle 的[Format](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcellstyle.format.aspx)属性。
例如（假设您的第一个列的名称是“Value”）

```
dataGridView1.Columns["Value"].DefaultCellStyle.Format = "0.0"; 
```

Format 属性采用字符串“格式”，在 MSDN 上的这些文章中有很好的解释

[自定义数字格式字符串](http://msdn.microsoft.com/en-us/library/0c899ak8)
[标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T08:03:14.347

看`formatting Types & custom numeric format strings` [这里](http://msdn.microsoft.com/en-us/library/26etazsy.aspx)和[这里](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

&`How to format data`在这里的DataGridView - [http://msdn.microsoft.com/en-us/library/f9x2790s.aspx](http://msdn.microsoft.com/en-us/library/f9x2790s.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T08:07:41.007

双值 = .5;
var display = value.ToString("0.00", System.Globalization.CultureInfo.InvariantCulture));

# design-patterns - 购物车中的付款策略

> ID：11175886
> 
> 赞同：1
> 
> 时间：2012-06-24T07:58:13.370
> 
> 标签：design-patterns, c#-4.0, e-commerce

可用于以下方法的最合适的模式是什么。我倾向于 switch 语句的策略模式，但 if 的情况如何。另外，如果我有不同类型的折扣，我也应该使用策略模式怎么办？

```
public void AddOrder(PaymentType paymentType, OrderType orderType)
{
    if (orderType == OrderType.Sale)
    {
        switch (paymentType)
        {
            case PaymentType.Cash:
                // Do cash calculations here
                break;
            case PaymentType.CreditCard:
                // Do credit card calculations here
                break;                    
        }
    }
    else if (orderType == OrderType.Refund)
    {
        switch (paymentType)
        {
            case PaymentType.Cash:
                // Do cash calculations here
                break;
            case PaymentType.CreditCard:
                // Do credit card calculations here
                break;
            }
        }            
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:33:20.210

如果您查看您的代码，您基本上想要的是让 PaymentType 处理两种订单。因此，如果您将 PaymentType 实现为具有两种方法（销售和退款）的抽象类，您就有了策略模式的基础。

然后，您将实现两种具体类型的 PaymentType（Cash 和 CreditCard），然后使用正在使用的支付类型配置一个合适的对象。

对于你的例子，我真的认为战略是矫枉过正的。它也可能不合适，因为 Strategy 通常用于配置全局默认值。在这里，您似乎希望能够处理一堆事务，而不管它们的实际具体类型如何。

在这里使用简单的多态与命令模式相结合可能会好得多，例如...

```
public interface Transaction {
  void perform();
}

public interface PaymentType {
  void sale();
  void refund();
}

public class Sale implements Transaction {
  private final PaymentType paymentType;

  public Sale(final PaymentType paymentType) {
    this.paymentType = paymentType;
  }

  public void perform() {
    paymentType.sale();
  }

}

public class Refund implements Transaction {
  private final PaymentType paymentType;

  public Refund(final PaymentType paymentType) {
    this.paymentType = paymentType;
  }

  public void perform() {
    paymentType.refund();
  }

} 
```

现在你可以这样做：

```
public void AddOrder(final Transaction transaction) {
  transaction.perform();
} 
```

您现在已经将 AddOrder 与交易是销售还是退款以及使用哪种付款方式的任何知识分离。这使得添加一种新的交易（layaway...）和新的支付方式（debet 卡）变得容易。

# asp.net - 如何消除url中的id？

> ID：11175888
> 
> 赞同：0
> 
> 时间：2012-06-24T07:58:35.113
> 
> 标签：asp.net, asp.net-mvc-3

我的控制器 A 中有以下代码，其中有“ËDIT”链接，我想将选定的列“Id”传递给另一个控制器 B。

**控制器 A**

```
response.Rows =
            (
            from item in selectedListAfterPagging
            select new GridEmployeeData()
            {
                id = item.Id,
                cell = new string[] { 
                item.Id.ToString(),
                item.Name,
                "<a href='/Home/MenuThree/"+ item.Id + "' title='Edit'>Edit</a>"
                }
            }
            ).ToArray(); 
```

**控制器 B**

```
public ActionResult MenuThree(int Id)
    {
        return View();
    } 
```

当我单击“编辑”链接时，这对我来说很好，除了 URL，

```
http://abc/Home/MenuThree/1 
```

Url包含ID，如何消除？或者除了锚标记之外的任何其他传递ID的方式，有没有办法通过@Html.ActionLink 像视图一样传递数据和表单链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:17:00.313

将 ID 保留在 URL 之外的唯一简单方法是将其用作表单中的一个元素，该表单发布到 MenuThree 操作方法，在这种情况下，您将为每个 ID 呈现一个表单，但我'不知道你想通过这样做来完成什么。

# javascript - html jquery - 在页面中打印特定图像

> ID：11175893
> 
> 赞同：0
> 
> 时间：2012-06-24T07:59:51.290
> 
> 标签：javascript, jquery, html, printing

我有一个带有如下链接的 html 页面：

```
<a href="javascript:window.print()">Print QR code</a> 
```

当用户单击它时，它会执行您认为的操作.. 打印整个页面.. 遗憾的是，它根本不打印 QR 码。如何指定要打印的内容？比如，假设我想在页面上打印特定图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-11T13:21:54.457

我知道这是一篇旧帖子，但只是想与您分享这个在不使用 jquery 的情况下运行良好的解决方案。

[http://www.codescratcher.com/javascript/print-image-using-javascript/#comment-762](http://www.codescratcher.com/javascript/print-image-using-javascript/#comment-762)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T08:03:08.560

我发现这个插件可以解决问题：

[http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/](http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/)

```
$('img#some_id').printElement(); 
```

# bash - 如何将标准输入复制到两个文件中？

> ID：11175898
> 
> 赞同：4
> 
> 时间：2012-06-24T08:00:14.067
> 
> 标签：bash, unix, io

我需要有`script.sh`，这将创建文件`f1.txt`和`f2.txt`发送到标准输入的内容。例如：

```
echo ABRACODABRA | script.sh 
```

...应该创建文件`f1.txt`和`f2.txt`内容`ABRACODABRA`。

我怎样才能做到这一点？

请提供`script.sh`尸体！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T08:04:52.017

你需要`tee`.

```
$ echo 'foo' | tee f1.txt f2.txt 
```

或者

```
$ echo 'foo' | tee f1.txt > f2.txt 
```

抑制到标准输出的附加输出。

我猜你真正的问题可能是如何从脚本中的输入中读取。在这种情况下，请参阅[此问题](https://stackoverflow.com/questions/6883363/read-input-in-bash-inside-a-while-loop)。这会给你类似的东西

```
while read input; do
    echo $input | tee -a f1.txt > f2.txt
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T08:59:38.267

您的脚本可能如下所示：

```
 #!/bin/bash
 read msg
 echo $msg > f1.txt
 echo $msg > f2.txt
 exit 0 
```

# objective-c - 添加 UITextview 时应用程序崩溃“[UITextView 长度]：无法识别的选择器发送到实例”

> ID：11175900
> 
> 赞同：4
> 
> 时间：2012-06-24T08:00:44.557
> 
> 标签：objective-c, uitableview, uitextview, unrecognized-selector

我有一个很奇怪的问题，可能很容易解决，但我无法让它工作。我想将 a 添加`UITextview`到 a `UITableViewCell`（但我也在一个简单的视图中尝试过，它给了我完全相同的问题）。无论我是在情节提要中还是以编程方式执行此操作，应用程序都会崩溃（有时仅在第二次显示视图时！）并显示消息

> -[UITextView 长度]：无法识别的选择器发送到实例 <...>

这是我添加`UITextView`(in `CellForRowAtIndexPath:`) 的地方。`@property UITextView *description`我分配给它，它已被合成。

```
 //description cell
if([indexPath section] == 2 && [indexPath row] == 0) {
    UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(7.0f, 5.0f, 285.0f, 140.0f)];
    textView.editable = YES;
    textView.delegate = self;
    textView.backgroundColor = [UIColor clearColor];
    textView.font = [UIFont systemFontOfSize:14.0f];
    [cell.contentView addSubview:textView];
    self.description = textView;
} 
```

如果您需要更多代码，请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T08:43:41.553

错误的线是`self.description = textView;`. 改为使用`self.description = textView.text;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T12:47:54.673

A`UITextView`没有属性长度。如果您尝试访问文本的长度，请`UITextView`使用其属性 text 来获取`NSString`可以使用 text 方法的位置。例如

```
[[textView text] length]; 
```

但是因为我认为你主要对刚刚使用的`NSString`形式感兴趣`UITextView`

```
[textView text] 
```

# php - 如何正确使用连接/子查询从多个表中选择数据？(PHP-MySQL)

> ID：11175901
> 
> 赞同：8
> 
> 时间：2012-06-24T08:00:56.610
> 
> 标签：php, mysql, join, subquery

我有三个表，如下图所示。

***注意：*** *projectheader 表的 Lead 列存储员工 ID。*

![在此处输入图像描述](../Images/07969c4427b0f561b2a72ebd0fcdd71e.png)

我想要的是能够检索到我的目标表中的内容（领导，显示该员工的领导姓名）

我可以使用下面的查询来做到这一点。

```
SELECT DISTINCT
  projectdetails.ProjectDetailsID,
  projectheader.ProjectID,
  projectheader.ProjectName,
  projectheader.Lead,
  projectheader.StartDate,
  projectheader.EndDate,
  projectheader.Status,
  projectheader.Remarks,
  projectdetails.EmployeeID,
  employee.Firstname,
  employee.Lastname,
  Lead.Leadname
FROM
  projectheader,
  projectdetails,
  employee,
  ( SELECT
      projectheader.ProjectID AS projid,
      CONCAT(employee.Firstname,' ',employee.Lastname) AS Leadname
      FROM employee, projectheader, projectdetails 
      WHERE projectheader.ProjectID = projectdetails.ProjectID 
      AND projectheader.Lead = employee.EmployeeID
  ) AS Lead
WHERE projectheader.ProjectID = projectdetails.ProjectID
AND projectdetails.EmployeeID = employee.EmployeeID
AND projectheader.ProjectID = Lead.projid
AND projectdetails.ProjectID = Lead.projid 
```

并得到了这个结果： ![在此处输入图像描述](../Images/56de5dc8013e27cba6066b634afe217d.png)

我使用的查询很长，可能写得不好，我想知道如何使用更好的 sql 查询通过连接或子查询来获得相同的结果。（我在 projectdetails.ProjectDetailsID 的开头添加了一个 DISTINCT，因为没有它，有些行会重复）。我正在寻找比我目前使用的更好的查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T08:16:51.343

试试这样的（没测试过，可以试试）：

```
SELECT
  projectdetails.ProjectDetailsID,
  projectheader.ProjectID,
  projectheader.ProjectName,
  projectheader.Lead,
  projectheader.StartDate,
  projectheader.EndDate,
  projectheader.Status,
  projectheader.Remarks,
  projectdetails.EmployeeID,
  employee.Firstname,
  employee.Lastname,
  CONCAT(Lead.Firstname,' ',Lead.Lastname) AS Leadname
FROM
  projectheader,
  projectdetails,
  employee,
  employee as Lead
WHERE projectheader.ProjectID = projectdetails.ProjectID
AND projectdetails.EmployeeID = employee.EmployeeID
AND projectheader.Lead = Lead.EmployeeID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T08:40:18.447

试试这个查询我希望它对你有用

```
SELECT pd.ProjectDetailsID,ph.*,e.* FROM
`projectdetail` pd
INNER JOIN projectheader ph ON ph.ProjectID = pd.ProjectID 
INNER JOIN employee e ON e.EmployeeID = pd.EmployeeID 
```

# java - 查询 DSL 注释在 netbeans 上不起作用

> ID：11175903
> 
> 赞同：1
> 
> 时间：2012-06-24T08:01:08.233
> 
> 标签：java, hibernate, netbeans, seam, querydsl

我在 Mac Lion 上使用 Netbeans 7.2 和 JDK 1.6 创建一个使用 queryDSL 的 maven 项目。

我的 pom.xml 有以下片段

```
 <dependency>
        <groupId>com.mysema.querydsl</groupId>
        <artifactId>querydsl-apt</artifactId>
        <version>2.5.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>com.mysema.querydsl</groupId>
        <artifactId>querydsl-core</artifactId>
        <version>2.5.0</version>
    </dependency>
    <dependency>
        <groupId>com.mysema.querydsl</groupId>
        <artifactId>querydsl-jpa</artifactId>
        <version>2.5.0</version>
    </dependency>
    <dependency>
        <groupId>com.mysema.querydsl</groupId>
        <artifactId>querydsl-hibernate-search</artifactId>
        <version>2.5.0</version>
    </dependency>

            <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>build-helper-maven-plugin</artifactId>
            <version>1.7</version>
            <executions>
                <execution>
                    <id>add-source</id>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>add-source</goal>
                    </goals>
                    <configuration>
                        <sources>
                            <source>src/generated</source>
                        </sources>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

以下 pom 不能确保我的 QueryDSL 注释得到处理并创建了“Q”类。相同的设置在 Eclipse 上运行良好。

非常感谢任何帮助

南迪什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:42:05.110

以下线程中讨论的分辨率 [https://groups.google.com/forum/#!topic/querydsl/7f8AWdWvvmg](https://groups.google.com/forum/#!topic/querydsl/7f8AWdWvvmg)

# android-ndk - Android NDK 和 ANSI C

> ID：11175909
> 
> 赞同：1
> 
> 时间：2012-06-24T08:02:27.390
> 
> 标签：android-ndk

我开始使用 andoid ndk 并找到了一些如何使用它的示例。他们展示了一些用 C++ 编写的简单代码，这很明显。众所周知，android ndk 允许用 C++ 编写代码。

但是是否可以为 android ndk 用 ANSI C 而不是 C++ 编写代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T22:23:34.997

是的，您可以编写 C 代码。没有什么可以阻止您这样做。所有 NDK 原生 API 实际上都是 C API。

# php - 删除服务器的先前条目

> ID：11175917
> 
> 赞同：-1
> 
> 时间：2012-06-24T08:03:49.393
> 
> 标签：php

我已经使用 php 制作了一个服务器。一段时间后，服务器正在获取新信息。我希望服务器页面只显示当前信息。当收到新信息时，它应该删除以前的信息并只显示最近的信息。你能帮我吗？我当前的代码是：

```
 <?php 
   $fp=fopen("random.txt","a");
   fwrite($fp,$_POST['data']."\n");
   echo $_POST['data'];
   fclose($fp);
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T08:07:09.947

每次更改或`a`写入新信息：`w``r+`

```
$fp = fopen("random.txt", "r+"); 
```

意思是追加，这`a`就是为什么您要追加到以前的文件而不是写入新信息的原因。

# .net - 二进制表达式

> ID：11175918
> 
> 赞同：1
> 
> 时间：2012-06-24T08:03:50.960
> 
> 标签：.net, silverlight, linq, expression-trees

我想从字符串参数构建一个 LINQ 查询。我在 Silverlight 中有一个网格，我想按列过滤查询结果。

当用户单击其中一个网格列上的按钮时，将显示一个列表视图。他们在列表视图中选择一个或多个值，然后单击过滤器按钮。在代码中，我得到了选定的值和列成员，这是我绑定到网格的对象的属性。

例如，我有一个具有 FullName 属性的员工对象。因此，我将 FullName 属性作为字符串以及从过滤器中选择的值。

我想根据这些信息构建一个 LINQ 查询。

我能做到：

```
protected Expression<Func<T, bool>> CreateGetExpression<T>(int id)
    {
        ParameterExpression e = Expression.Parameter(typeof(T), "e");
        PropertyInfo propInfo = typeof(T).GetProperty(KeyPropertyName);
        MemberExpression m = Expression.MakeMemberAccess(e, propInfo);
        ConstantExpression c = Expression.Constant(id, typeof(int));
        BinaryExpression b = Expression.Equal(m, c);
        Expression<Func<T, bool>> lambda = Expression.Lambda<Func<T, bool>>(b, e);
        return lambda;
    } 
```

我的问题是当我有一个复杂的财产时。例如，我有一列包含员工工作的部门名称。

LINQ 中的查询如下所示 Where(e => e.Department.Name == departmentName)

但我不知道如何从字符串参数构建这个查询。

任何人都可以帮助我吗？

# github - GitHub Mylyn 连接器：从 GitHub 获取问题

> ID：11175919
> 
> 赞同：6
> 
> 时间：2012-06-24T08:03:54.923
> 
> 标签：github, mylyn

我正在使用这个 GitHub Mylyn 连接器：[http ://marketplace.eclipse.org/content/github-mylyn-connector](http://marketplace.eclipse.org/content/github-mylyn-connector)

但是，当有人在 GitHub 本身上创建问题时，它不会在我的 Eclipse 任务中得到更新。我在一个团队中工作，因此希望有机会分担所有任务。Mylyn 背后的想法是创建任务，将其与 GitHub 同步，其他人只需将他们的任务列表与 GitHub 上的问题列表同步。正如我所提到的，不知何故，它不会同步在 GitHub 本身上创建的任何任务，因此我假设我在 Mylyn 中创建并与 GitHub 同步的任务也不会同步到我同事的计算机上。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T10:18:17.807

GitHub issue 和 Mylyn 之间的链接背后的想法是定义一个**[查询](http://wiki.eclipse.org/EGit/GitHub/UserGuide#Queries)**：

![GitHub 问题 Mylyn 查询](../Images/457b07ec95d966412ea2586900d28cf5.png)

> GitHub 问题任务存储库支持创建按以下字段过滤的查询：
> 
> *   状态（打开或关闭）
> *   里程碑
> *   提及
> *   受让人
> *   标签

因此，如果您没有为问题定义查询（尤其是分配给*您*或您的团队的问题），您将看不到它们。

该查询将使用[GitHub v3 API 处理问题](http://developer.github.com/v3/issues/)。
（[Huboard](http://huboard.com/)是 Egit 之外的另一个服务的示例，它使用该 API：如[Huboard – Github issues made awesome](http://lostechies.com/ryanrauh/2012/01/13/huboard-github-issues-made-awesome/)中所述，作者：[Ryan Rauh](http://lostechies.com/ryanrauh/author/ryanrauh/)）

# c# - 使用货币双精度值的字符串格式无法正确显示。

> ID：11175921
> 
> 赞同：10
> 
> 时间：2012-06-24T08:04:01.593
> 
> 标签：c#, asp.net-mvc

我正在使用带有详细视图的 MVC3，该视图需要显示格式化的美元金额，例如 $1,200.00。在这种情况下，控制器将 MonthlyMortgage 的双精度值传递给视图。但是，下面的代码行没有显示正确的字符串格式。显示的是 $1200.00，我需要的是 $1,200.00。

我试过了：

```
$@String.Format("{0:c}", Html.DisplayFor(model => model.MonthlyMortgage)) 
```

我试过这个：

```
$@String.Format("{0:#,###,###,##0.000}", Html.DisplayFor(model => model.MonthlyMortgage)) 
```

有人可以请飞机为什么这不起作用？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-24T08:10:57.700

你不需要使用`Html.DisplayFor`，因为它会返回`MvcHtmlString`所以`string.Format`不适用。

只需`string.Format`在您的模型上使用：

```
@String.Format("{0:c}", Model.MonthlyMortgage) 
```

请注意，您不再需要“$”符号，因为它`{0:c}`会处理它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-24T08:13:23.060

@nemesv 有一个直接的答案。另一种选择是 `String.Format()`从视图中删除并使用 DataAnnotations 将格式附加到 MonthlyMortgage。

来自 MSDN 的示例：

```
[DisplayFormat(DataFormatString = "{0:C}")]
public Decimal ListPrice { get; set; } 
```

顺便说一句，`#,###,###,##0.000`可以缩短为`#,##0.00`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-15T17:10:14.593

另一个选项是`[DataType]`属性。

添加 DataAnnotations `using System.ComponentModel.DataAnnotations;`，`using System.ComponentModel.DataAnnotations.Schema`然后您可以在模型中执行类似的操作。

```
[DataType(DataType.Currency)]
[Column(TypeName = "decimal(18, 2)")]
public decimal MonthlyMortgage{ get; set; } 
```

# java - Android中的浮动增量问题

> ID：11175922
> 
> 赞同：0
> 
> 时间：2012-06-24T08:04:05.620
> 
> 标签：java, android, floating-point, increment, floating-accuracy

我试图每次将 float 的值增加 0.1。但有一段时间我得到了非常奇怪的结果。

```
float kmVal = 0.0f;    
EditText kms = (EditText) findViewById(R.id.km);
kmVal = Float.valueOf(kms.getText().toString()); 
```

单击按钮时，我正在增加值。

```
kmVal += 0.1;
kms.setText(String.valueOf(kmVal)); 
```

**日志 ：-**

```
06-24 13:16:21.644: I/System.out(958): Value ==0.1
06-24 13:16:21.644: I/System.out(958): String Value ==0.1
06-24 13:16:21.886: D/SntpClient(61): request time failed: java.net.SocketException: Address family not supported by protocol
06-24 13:16:22.145: I/System.out(958): Value ==0.2
06-24 13:16:22.145: I/System.out(958): String Value ==0.2
06-24 13:16:22.384: I/System.out(958): Value ==0.3
06-24 13:16:22.384: I/System.out(958): String Value ==0.3
06-24 13:16:22.484: I/System.out(958): Value ==0.4
06-24 13:16:22.484: I/System.out(958): String Value ==0.4
06-24 13:16:22.684: I/System.out(958): Value ==0.5
06-24 13:16:22.684: I/System.out(958): String Value ==0.5
06-24 13:16:22.868: I/System.out(958): Value ==0.6
06-24 13:16:22.874: I/System.out(958): String Value ==0.6
06-24 13:16:23.056: I/System.out(958): Value ==0.70000005
06-24 13:16:23.064: I/System.out(958): String Value ==0.70000005
06-24 13:16:23.884: I/System.out(958): Value ==0.8000001
06-24 13:16:23.884: I/System.out(958): String Value ==0.8000001
06-24 13:16:23.964: D/dalvikvm(353): GC_EXPLICIT freed 7K, 44% free 3532K/6279K, external 716K/1038K, paused 106ms
06-24 13:16:24.536: I/System.out(958): Value ==0.9000001
06-24 13:16:24.536: I/System.out(958): String Value ==0.9000001 
```

正如您从日志中看到的那样，最高 0.6 的值是可以的，但在那之后它添加了我不想要的额外数字。我不知道为什么我会得到这样的结果。如果有人有任何想法，请提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T08:20:40.453

This is because how the floating type numbers are represented. From the [JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.3):

> The finite nonzero values of any floating-point value set can all be expressed in the form s · m · 2(e - N + 1), where s is +1 or -1, m is a positive integer less than 2N, and e is an integer between Emin = -(2K-1-2) and Emax = 2K-1-1, inclusive, and where N and K are parameters that depend on the value set.

Hence, float values cannot accurately represent base 10 real numbers. While you might get the initial `0.1` , what actually happens is you are getting `0.0999999999999999996` which is turned into `0.1`. But as you keep on doing operations on it, it keeps losing precision.

Read [this](https://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency) and [this](https://stackoverflow.com/questions/2936219/help-with-float-numbers-in-java) for more.

For precision use [BigDecimal](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html):

```
BigDecimal test = new BigDecimal("0.1");
test = test.add(new BigDecimal("0.1"));
System.out.println(test); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T08:28:48.800

如果您确实需要浮点值的精确表示，那么您确实不能使用简单的浮点类型，例如`double`任何`float`语言。在 Java 中，您可以使用`BigDecimal`. 但是，我首先要弄清楚你是否真的需要这个精确的浮点数。

# git - Heroku + Github 部署策略

> ID：11175923
> 
> 赞同：15
> 
> 时间：2012-06-24T08:04:12.630
> 
> 标签：git, node.js, deployment, heroku

我正在开发一个网络应用程序，在 Github 上托管源代码并在 Heroku 上运行该应用程序。一切正常，但我有一个问题我无法解决。在部署我的代码之前，我会运行一些脚本来优化代码（缩小、连接文件等）。heroku 应用程序仅使用应用程序的优化版本。

基本上，我有两个文件夹：`dev`和`production`. `Dev`包含我编写的源代码，`production`由我的构建脚本生成（我使用 grunt 和 requirejs）。目前，这两个文件夹都在我的 Git 存储库中，并且都被推送到 Github 和 Heroku。我宁愿只`dev`在 Github 和`production`Heroku 上拥有。我阅读了一些文章如何为 Heroku 设置不同的分支，如[本博客所述](http://suitmymind.com/blog/2009/06/02/deploying-multiple-environments-on-heroku-while-still-hosting-code-on-github/)。我可以设置一个生产分支并且只在其中保留文件`production`夹，同时将`dev`文件夹保留在我的主分支中吗？还是我需要单独的存储库？

有没有人尝试过类似的东西？我认为这不是什么不寻常的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T15:50:17.257

您可能只想考虑使用 heroku`.slugignore`文件（参考[https://devcenter.heroku.com/articles/slug-compiler](https://devcenter.heroku.com/articles/slug-compiler)）。

该文件将允许您`dev`从 heroku 部署到每个服务器实例的包中删除该文件夹，同时允许您将所有代码保存在同一个存储库中。

问题的根源在于将部署策略视为您将最终位上传到服务器的部署策略，其中*位是构建存储库的人工制品*。在这种情况下，构建通常与源分开存储和归档。

Heroku 的模型与此略有不同，它假设*您的存储库是要部署的工件*。区别很小，但在您的情况下，这只是意味着您需要将您希望 heroku 服务的位提交到您的存储库。

另一种思考方式是，您可以不使用`production`文件夹，并且作为启动服务器的一部分，将运行脚本以生成`production`文件夹文件。这将允许您删除该`production`文件夹，并以在每次启动服务器时运行此过程为代价保持您的存储库清洁。这可能被证明是非常昂贵且不可取的（Heroku 在放弃服务器之前等待服务器启动的时间是有限的），但希望有助于澄清 Heroku 和 git 的关系。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T09:55:49.413

这种情况有点不寻常。但这里有一些想法：

*   我使用的过程与您引用的文章中的过程类似。
*   正如你所说，我只会创建一个应用程序。`dev`我会在您的文件夹中创建一个新的 git 存储库。
*   然后，我会推荐一种类似于此答案中描述的部署策略：[https](https://stackoverflow.com/a/8058194/267025) ://stackoverflow.com/a/8058194/267025 。我在下面对其进行了调整：

创建一个`rake`包含两个任务的文件：`rake deploy:production`和`rake deploy:postprocess_files`. 这些任务可能看起来像这样：

```
namespace :deploy do

  task :production do
    puts "turn on 'maintenance page' on heroku"
    system "heroku maintenance:on"

    puts "deploying to production"
    system "git push heroku-prod master"

    puts "post processing files..."
    system "heroku run rake production:postprocess_files"

    puts "take off maintenance page"
    system "heroku maintenance:off"

    puts "done"
  end 

  task :postprocess_files do
    puts "run postprocessing of files on heroku"
    ... add commands here to post process the files.
  end 
end 
```

然后使用 git 部署到生产环境，`rake deploy:production`而不是直接使用 git 推送。rake 文件将：

1.  设置维护页面，
2.  推动生产，
3.  对文件进行后处理，
4.  取下维护页面。

请注意，文件中的第二个 rake 任务具有对文件进行后处理的命令，并被第一个 rake 任务调用以*在 heroku上运行。*

作为替代方案，您可以扩展 Heroku 作为每次部署的一部分运行的 assets:precompile 任务。无论如何，这基本上就是您正在做的事情——准备资产以部署到生产环境。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-11T06:31:10.867

我个人喜欢这个解决方案：[https](https://github.com/mbuchetics/heroku-buildpack-nodejs-grunt) ://github.com/mbuchetics/heroku-buildpack-nodejs-grunt 也看看这个：[https ://medium.com/the-javascript-collection/how-to-deploy -a-grunt-project-on-heroku-c227cb1ddc56](https://medium.com/the-javascript-collection/how-to-deploy-a-grunt-project-on-heroku-c227cb1ddc56)

老实说，这是最干净的方法之一。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-24T08:30:44.930

这有点令人困惑，因为：

*   你的`dev`和`production`代表**环境**， 和 是具有*生成*内容的目录：
    它们不应该在 VCS 中，而是由一个脚本自动生成，该脚本将识别它运行的环境，并相应地创建正确的目录。

*   `dev`您在文章中`production`提到的“[在 Heroku 上部署多个环境（同时仍在 Github 上托管代码）](http://suitmymind.com/blog/2009/06/02/deploying-multiple-environments-on-heroku-while-still-hosting-code-on-github/) ”中提到的和表示**升级阶段**，并且是*分支*。

使用分支很好，仅用于隔离代码变体（在所述分支中），而不用于存储发布生成的代码。
您的特定发布管理问题（即生成正确的交付）应由脚本（可以与代码一起进行版本控制）管理，并用作挂钩，例如，生成和部署正确的代码集正确的地方。

# git - 当我们的工作流程包含大量未提交的代码时，是否有使用 git-pull 的最佳实践，而不是 stash？

> ID：11175927
> 
> 赞同：8
> 
> 时间：2012-06-24T08:05:17.387
> 
> 标签：git, pull, git-stash

我和我的团队都是 Git 新手；到目前为止，我们已经使用了 CVS。我们有一个远程存储库，我们每个人都有自己的存储库。我们每个人都在研究一个特性或错误，但我们中的一些人可能在同一个特性的不同部分工作。

完成后，他们提交并推送他们的更改。另一位程序员可能想要使用该代码（例如，如果一个人在 BL 上工作，而另一个在 UI 上工作），但没有提交任何内容，因为代码甚至可能还没有编译，或者工作目录可能仍然很脏。

到目前为止，我只发现了一个使用 stash 的建议，但我们觉得它不舒服。我们想从远程提取代码并将其与未提交的代码合并，但据我了解 Git，这可能是不可能的。

您认为我们使用遥控器的最佳方式是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-24T08:32:35.273

### 问题

您在工作流程中受到 CVS/SVN 习惯的困扰，尤其是“大补丁”思维模式。

### 解决方案

Git 有一个非常便宜的分支模型和交互式暂存。这样做的结果是您应该在功能分支上工作，并将您的非集成分支视为补丁队列。

因此，您应该做一些更易于管理的事情，而不是“代码、代码、代码、代码、推送、拉取、合并、尖叫”：

1.  分支很多。为每个小功能或变更集创建一个分支。
2.  对您的私有分支提交大量小的、原子性的更改。`git add -p`是你的朋友。
3.  在合并到集成分支之前，根据您的集成分支重新设置您的私有分支。
4.  *每次*您拥有完整的变更集或完成一项功能时，推送到您的集成分支。

如果您开始将 Git 提交视为补丁，并将分支视为补丁队列，那么您最终会得到一个工作流程，人们可以在其中挑选或合并存储库之间的小型变更集，而不会出现偏头痛。Git 分支模型使它变得容易，但您的团队将工作分解成合适大小的部分。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-24T08:13:18.100

只要不推送自己的代码，就可以提交，然后`git pull`.

在您下一次推送之前，提交将对您的存储库保持私有。

![git 推送](../Images/ff4921c41658c52ed927aa635fa04da6.png)

所以你可以在同一个 ' `feature`' 分支上工作，并且仍然受益于你同事的推动。

但是，如果您还必须发布您的工作，那么您可以使用 ' `developerX_feature`' 分支，以便您推送*自己*的分支，并让其他人*获取*然后将您的分支合并到他们自己的`developerY_feature`本地 repo 中的 ' ' 分支。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T08:13:38.040

使用树枝！您可以创建分支，将更改提交到此分支，推送此分支，然后其他人可以获取此分支并在分支之间切换（结帐）（甚至离线）。它不会影响您的主要稳定分支（主）。

# windows-8 - 后台任务在下次应用启动时终止

> ID：11175929
> 
> 赞同：3
> 
> 时间：2012-06-24T08:05:38.390
> 
> 标签：windows-8, windows-runtime

我正在使用[MSDN 中的后台任务代码示例 (c#)](http://code.msdn.microsoft.com/windowsapps/Background-Task-Sample-9209ade9)。我稍微修改了代码以使其运行时间更长，以便我可以查看应用程序是否可以在下次启动时“重新附加”到后台任务。我的测试表明，当应用程序第二次启动时，后台任务总是会终止。下面是测试细节：

后台任务由 a`SystemTrigger`类型触发`SystemTriggerType.TimeZoneChange`，并且在以下情况下按预期工作：

1.  我先启动应用程序，然后更改我的 TimeZone 设置；
2.  我先更改我的时区，然后启动应用程序；

但是，如果我关闭应用程序（按 ALT+F4），然后在后台任务完成之前再次启动它。我总是会看到后台任务被终止。有时我会`The program '[920] backgroundTaskHost.exe: Managed (v4.0.30319)' has exited with code 1 (0x1).`在“输出”窗口中看到类似“”的消息。

为什么每次再次启动应用程序都会终止后台任务？是设计吗？或者我在这里错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:40:18.730

那就是项目参考问题。

> 如果您在运行后台任务时退出程序`code 1 (0x1)`，则应将后台任务项目添加到原始项目的引用中。

[[Windows 8] BackgroundTask 的崩溃问题告诉](http://kukhyun.tistory.com/19)你如何解决参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:22:42.027

如果您在 C# 中创建 BackgroundTask，并使用 Windows 8 RP，我认为您可能必须将项目的输出类型设置为`WinMD`文件而不是类库。您是否使用 WinMD 作为输出类型？

# ios - 如何在 NSMutableDictionary 中插入我自己的 obj 和密钥？

> ID：11175930
> 
> 赞同：0
> 
> 时间：2012-06-24T08:06:20.510
> 
> 标签：ios, nsmutabledictionary

```
#import <Foundation/Foundation.h>

@interface Location : NSObject
{
    int x_;
    int y_;
}
@property(assign) int x;
@property(assign) int y;
@end

#import "Location.h"

@implementation Location

@synthesize x = x_;
@synthesize y = y_;
@end

-(id) calcKey:(int)x theY:(int)y{
    Location* loc = [[Location alloc]init];
    loc.x = x;
    loc.y = y;
    return loc;
} 

for(id innerObj in arr){
   NSMutableDictionary* dic = [NSMutableDictionary dictionary];
   for(id innerObj in arr){
      MyStorage* storage = (MyStorage*)innerObj;
      id key = [self calcKey:storage.x theY:storage.y];
      [dic setObject:bri forKey:key];
   }
} 
```

嗨，我正在尝试将存储添加到 NSMutableDictionary，我的目的是使用此字典 dic 来加速进一步搜索位置 (x,y) 具有存储的位置。但它总是失败......带有以下警告，任何人都可以帮助我 ？非常感谢！：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[Location copyWithZone:]: unrecognized selector sent to instance 0x6b4b160' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T08:14:36.337

由于您使用自定义类的实例`Location`作为键，并且在字典中使用时会复制键，因此您必须通过实现来实现对复制的支持`copyWithZone:`。

方法名称的“区域”部分是指一些不再使用的旧内存管理方案，因此您可以忽略它。

正如评论中所要求的，您的`copyWithZone:`方法应该简单地创建一个新对象，设置实例变量并返回新实例。您可能还想覆盖`isEqual:`and `hash`。更多[在这里](http://cocoadev.com/wiki/HashingAndEquality)。

# php - header('Content-type: application/octet-stream') 导致 0 字节文件

> ID：11175933
> 
> 赞同：7
> 
> 时间：2012-06-24T08:06:46.897
> 
> 标签：php, download

我在 PHP 中使用数据库查询来检索二进制文件。但是当我试图强制下载它时， header('Content-type: application/octet-stream') 行会导致 0 字节文件。如果没有该行，我可以下载包含完整内容的文件。这是一个二进制文件，所以我无法理解为什么该行会导致问题。编码：

```
$result = mysql_query("SELECT data FROM stored_file WHERE file_name = '$q'");

while($row = mysql_fetch_array($result))
{
    $file = $row['data'];
}

    header('Content-disposition: attachment; filename='.$q);
    header('Content-type: application/octet-stream');
    header('Content-Length: '.filesize($file));
    header("Pragma: no-cache");
    header("Expires: 0");
    echo $file; 
```

任何的想法？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T10:40:21.837

[`filesize()`](http://php.net/filesize)不会返回有意义的值。

您有二进制数据`$file`，**而不是**第一个参数所需的*实际文件名。*因此你会得到一个错误。（启用 error_reporting！看不到错误和没有错误是两件不同的事情。）

所以你想用的有`strlen($file)`，没有`filesize()`。

顺便说一句，`application/octet-stream`或其他填充没有用于强制下载。`Content-Disposition:`对这种效果最关键的是标题。您仍然可以发送正确的 MIME 类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T10:01:10.117

通过查看查询，我猜想 in`$row['data']`是存储的二进制数据。要设置正确的 Content-Length 标头，您应该使用`mb_strlen($row['data']);`. 如果您的机器上没有激活多字节支持（mb_ 函数），请使用 strlen()。但请注意，这可能会导致错误的结果，因为二进制数据实际上可能包含 EOF 字节序列并返回太短的长度。使用 mb_strlen 函数，您就处于保存状态。

# iphone - Xcode“使用未声明的标识符”

> ID：11175938
> 
> 赞同：2
> 
> 时间：2012-06-24T08:07:20.413
> 
> 标签：iphone, xcode, uitableview

我知道很多人问这个，但所有的答案都是特定的应用程序，所以我不明白如何为我的应用程序工作。

```
 tableData = [NSArray arrayWithObjects:@"Chocolate Brownie", @"Mushroom Risotto", nil];
    }

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection: (NSInteger)section
    {
        return [tableData count];
    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *simpleTableIdentifier = @"SimpleTableItem";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
        }

        cell.textLabel.text = [tableData objectAtIndex:indexPath.row];
        return cell;` 
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T08:22:59.220

未保留ut 变量的原因，`tableData`并且您已通过工厂方法分配它，并且已自动释放。

在 .h 文件中，使其保留属性并将此变量与 self 一起使用。在你的代码中。

```
@property(nonatomic,retain) NSArray *tableData; 
```

米，

```
@synthesize tableData; 
```

然后像这样使用它：

```
self.tableData = [NSArray arrayWithObjects:@"Chocolate Brownie", @"Mushroom Risotto",      nil]; 
```

现在您不会收到任何错误，因为 tableData 现在已保留。

`dealloc`如果您不使用 ARC ，请不要忘记将其释放。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T08:19:39.220

你必须将你的 NSArray 声明为一个属性并合成它。在你的类定义中：

```
@property (retain, nonatomic) NSArray *tableData; 
```

在实施中：

```
@synthetize tableData = _tableData; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-24T08:20:01.910

好吧，这是一个简单的修复。您在引用“tableData”的每一行都收到错误，因为它未声明。换句话说，您的应用程序从未被告知“tableData”是什么。

您可以在 .h 文件中声明“tableData”，它应该看起来像这样......

```
@interface yourClassName : UITableViewController 
{
    NSArray *tableData;
} 
```

**编辑：**如果您只在此函数中调用此数组，请使用@grasGendarme 的答案，如果您希望在控制器中使用它，请使用此答案。

**编辑2：**关于您更新的问题，请在给您错误的行上检查这一点。

![在此处输入图像描述](../Images/4a95ddde0be8e27395a396488d81a55d.png)

此蓝色箭头表示您已在此行的代码中设置断点。您可以右键单击错误并选择删除断点。

# ruby-on-rails - Rails：如何检索模型的 has_many 对象作为集合？

> ID：11175940
> 
> 赞同：1
> 
> 时间：2012-06-24T08:07:49.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

假设我有类似的东西

```
Country has_many :cities 
```

并且模型`City`有一个属性`council_id`。只有一个实例`Country`，检索包含所有相关内容的集合的最佳方法是什么`Councils`？

我知道这可以很容易地完成，将`Country`实例传递给某个方法并迭代，`council_ids`但我想知道是否有更优雅的方法？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T09:19:52.143

如果城市有

```
belongs_to :country
belongs_to :council 
```

那么国家可以有

```
has_many :cities
has_many :councils, :through => :cities 
```

然后你可以做`some_country.councils`。这在幕后构造了一个连接查询来加载相关联的委员会。如果一个城市有很多议会，这仍然有效 -`has_many :through`可以解决这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T08:13:46.110

这是我能想到的最短方法（假设您已经设置了`@country`实例）：

```
Council.joins(:city => :countries).where('countries.id = ?', @country.id) 
```

您可能只想`country_id`为每个委员会保存，但可以通过以下方式更轻松地完成此操作：

```
@country.councils 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T08:57:37.317

如果理事会是模型，请尝试以下操作：

```
Council.where(city_id: @country.cities) 
```

如果council_id 是城市模型的属性：

```
@country.cities.map {|c| c.council_id} 
```

# jquery - Magento jQuery 冲突

> ID：11175941
> 
> 赞同：0
> 
> 时间：2012-06-24T08:08:21.910
> 
> 标签：jquery, magento

在我的**head.phtml**中，我有以下声明以获得菜单工作。

```
<script src="<?php echo $this->getJsUrl(); ?>lib/jquery-1.4.2.min.js" type="text/javascript"></script>
<script src="<?php echo $this->getJsUrl(); ?>jQuery_1205141001.js" type="text/javascript"></script>
<script src="<?php echo $this->getJsUrl(); ?>Common_1205141001.js" type="text/javascript"></script>
<script src="<?php echo $this->getJsUrl(); ?>lib/jquery.jcarousel.min.js" type="text/javascript"></script> 
```

现在，我可以让菜单正常工作，但由于这个原因，详细信息页面上的“**添加到购物车”按钮已损坏。**如果我删除上述引用，则“**添加到购物车**”按钮将恢复。我查看了有关prototype.js和jquery之间冲突的各种问题，并尝试了以下事情

1.  首先，我尝试`jQuery.noConflict();`在 jquery-1.4.2.min.js 末尾添加，但没有奏效。它也打破了菜单
2.  其次，我尝试`jQuery.noConflict();`在查询文件的开头添加 jQuery_1205141001.js 和 Common_1205141001.js。那也没有帮助。

请告诉我如何让这两件事都正常工作。您可以访问此[链接](http://www.eyaas.com/products/toys-1/fp-bunny.html)进行实时测试。在这里，您将看到菜单正常工作，但添加到购物车已损坏。

**注意**：- 它与 Superfish.js 和 jquery 调试器中显示的其他错误无关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T08:27:11.347

```
<script src="<?php echo $this->getJsUrl(); ?>lib/jquery-1.4.2.min.js" type="text/javascript"></script>
<script src="<?php echo $this->getJsUrl(); ?>jQuery_1205141001.js" type="text/javascript"></script>
<script src="<?php echo $this->getJsUrl(); ?>Common_1205141001.js" type="text/javascript"></script>
<script src="<?php echo $this->getJsUrl(); ?>lib/jquery.jcarousel.min.js" type="text/javascript"></script>
<script type="text/javascript">
  $.noConflict(); //Use no conflict here instead of js file
  // Code that uses other library's $ can follow here.
</script> 
```

有关详细信息，请访问链接。
[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T08:18:57.407

我似乎记得必须按此顺序调用不同的 .js 文件/代码才能使其正常工作。

1.  jQuery.js
2.  无冲突调用
3.  原型.js

你试过了吗？

这似乎是其他几个问题的答案：

[奇怪的 Chrome 原型/jQuery 冲突](https://stackoverflow.com/questions/833883/weird-chrome-prototype-jquery-conflict)

[magento 使用 jquery 没有冲突](https://stackoverflow.com/questions/8310233/magento-using-jquery-with-noconflict)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T14:05:31.640

如果您正在提供文件，请向 jquery 添加两个换行符，然后

jQuery.noConflict();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T03:30:09.137

这个有效：

```
$.noConflict();
jQuery(document).ready(function($) {}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-20T14:21:00.750

我尝试了“无冲突”方法，但它对我不起作用。

最后，我不需要它。

以下是我在 2 小时的修补后解决问题的方法：

确保您尝试引入的冲突 javascript 文件是要在以下位置调用的最后一个 javascript：/app/design/frontend/YOURTHEME/YOURCHILDTHEME/template/page/html/head.phtml。

就我而言，我试图引入的麻烦文件是：'jquery-1.4.2.min.js'

我有一种预感，这可能与默认脚本冲突：'jquery-1.7.1.min.js'

# google-apps-script - 无法在 Apps 脚本中连接到 Google Latitude API

> ID：11175943
> 
> 赞同：0
> 
> 时间：2012-06-24T08:08:22.910
> 
> 标签：google-apps-script

我想在 Apps 脚本中创建一个应用程序来获取我的纬度位置历史记录。出于某种原因，即使提供了似乎 OAuth 工作所需的所有 URI 和令牌，我总是在触发“UrlFetchApp”的行上收到“意外错误”。使 Latitude API 在 Apps 脚本中工作的正确 OAuth 配置是什么？

这是代码：

```
function latitude(){
 var oAuthConfig = UrlFetchApp.addOAuthService("latitude");
 oAuthConfig.setConsumerKey(consumerKey);
 oAuthConfig.setConsumerSecret(consumerSecret);
 oAuthConfig.setAuthorizationUrl("https://accounts.google.com/o/oauth2/auth");
 oAuthConfig.setAccessTokenUrl("https://accounts.google.com/o/oauth2/auth");
 UrlFetchApp.addOAuthService(oAuthConfig);
 var response = UrlFetchApp.getRequest("https://www.googleapis.com/latitude/v1/currentLocation");
 Logger.log(response);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:40:45.013

The Google Latitude API [only supports OAuth2](https://developers.google.com/latitude/v1/using#auth), and Google Apps Script currently only supports OAuth 1.0a.

# apache-flex - flex：基于 s:VGroup 创建组件

> ID：11175945
> 
> 赞同：0
> 
> 时间：2012-06-24T08:08:46.357
> 
> 标签：apache-flex

我正在尝试创建组件：

```
<?xml version="1.0"?>
<s:VGroup xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:s="library://ns.adobe.com/flex/spark">
    <mx:DataGrid id="letDataGrid" width="100%" height="100%" rowCount="5">
        <mx:columns>
            .......
        </mx:columns>
    </mx:DataGrid>
    <mx:Form>
        .......
    </mx:Form>
</s:VGroup> 
```

代码放入`FileName.mxml`. 当我尝试使用它时（进入`ViewStack`）

```
<s:NavigatorContent label="Blocks"  width="100%" height="100%">
    <comp:FileName/>
</s:NavigatorContent> 
```

应用程序已编译，组件应该在的窗格中没有任何内容。有人可以解释我做错了什么吗？

**UPD**如果我粘贴内容`FileName.mxml`代替`<comp:FileName/>`一切都可以

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T08:48:56.460

对于那些会阅读这个问题的人：我现在明白问题出在哪里了。我使用了错误的命名空间。应该有`library://ns.adobe.com/flex/mx"`而不是`xmlns:mx="http://www.adobe.com/2006/mxml"`

# sql-server-2008 - 在没有 Active Directory 的情况下使用 Windows 身份验证连接到 SQL Server 2008

> ID：11175947
> 
> 赞同：0
> 
> 时间：2012-06-24T08:10:29.737
> 
> 标签：sql-server-2008, window, filestream, windows-authentication

我正在使用 filestream 将数据存储到我的 SQL Server 中，但是从我搜索后得知，filestream 需要使用集成安全性，因此无法使用 SQL 身份验证模式

如何仅使用 win 7 或 xp 连接到数据库？我尝试将登录名添加到数据库中我似乎无法在网络上找到除服务器之外的其他 PC

我没有 Windows 服务器，因此是否可以在不使用 Windows 服务器的情况下从另一台计算机创建到 SQL Server 2008 的登录名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-14T17:42:26.713

我刚刚完成了这件事，所以我想我会分享我为其他可能遇到此问题的人所做的事情。我有一台运行 Windows XP 的机器正在运行我的 SQL Server 实例，而网络上的另一台机器需要访问数据库。我使用的是 SQL Server 身份验证，但因为我正在向数据库添加 FILESTREAM 支持，所以我现在需要切换到 Windows 身份验证。

为了做到这一点，我必须在 XP 机器上添加一个帐户，该帐户镜像另一台机器上的帐户（相同的用户名/密码组合），然后我必须通过 SSMS 将该用户添加到 SQL Server。

要将用户添加到 SQL Server，您必须使用运行服务器的机器的名称作为域名，例如，我的 XP 机器的名称是 XP_Pro，所以我必须添加到 SQL 的用户名服务器是 XP_Pro\Chris

最后，我必须将连接字符串更改为：

```
Data Source=[database instance];Initial Catalog=[database name];Integrated Security=true 
```

请注意，用户名和密码已从连接字符串中删除

我希望这可以帮助别人！

# mvvm-light - 排序应用程序属性与 ViewModel 创建

> ID：11175953
> 
> 赞同：1
> 
> 时间：2012-06-24T08:12:08.830
> 
> 标签：mvvm-light

我对 MVVM Light 有点陌生，并且乐于快速上手。与通过定位器创建 ViewModel 相比，我有一个关于创建应用程序对象的公共属性的问题。具体来说...

我看到的示例将定位器创建为 app.xaml 文件中的应用程序资源。我的问题是它是在创建应用程序公共属性之前创建的。我有一个包含集合的应用程序对象的静态属性。因为这个属性是在创建定位器服务之后创建的，所以我不能在定位器创建的任何视图模型的构造函数中引用它。

所有这些都让我想知道我是否做错了！在我的应用程序中，我有一个几乎想在任何地方使用的集合。我的计划是每个 ViewModel（我只有几个）都会在它们的构造函数中复制这个对象。仔细想想，这可能已经坏了——我可能应该通过我的 ViewModel 传回对应用程序属性的引用，而不是复制一份，对吧？

无论如何，我想我有两个问题：

1.  鉴于定位器（及其 ViewModels）是较早创建的，我如何处理需要访问应用程序对象属性的 ViewModels。
2.  当我希望所有 ViewModel 都公开一个应用范围的属性时，这里的一般模式是什么？

提前致谢。

标记

# jquery - Jquery 验证正则表达式中的空格

> ID：11175958
> 
> 赞同：1
> 
> 时间：2012-06-24T08:13:02.673
> 
> 标签：jquery, regex, validation

基本上我想做的是验证表格。在我想允许空格的字段之一中：

我一直在使用：

```
$.validator.addMethod(
    "legalname",
    function(value, element) {
        return this.optional(element) || /^[a-zA-Z0-9()._-\s]+$/.test(value);
    },
    "Illegal character. Only points, spaces, underscores or dashes are allowed."
);

$("#editform").validate({
    rules: {
        name: {
            required: true,
            legalname: true
        },
    }); 
```

这适用于 Safari，但不适用于 Firefox，它给我一个“字符类中的无效范围”。有什么想法可以让这个工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T08:14:39.583

尝试转义`-`：正如您在此处看到的：**工作演示**：http: [//jsfiddle.net/svp6D/2](http://jsfiddle.net/svp6D/2)

```
/^[a-zA-Z0-9()._\-\s]+$/ 
```

需要在字符类 ( `[]`) 中转义的字符有：

```
- \ / [] ^ 
```

# java - 当屏幕方向改变时，如何防止布局被重置？

> ID：11175966
> 
> 赞同：5
> 
> 时间：2012-06-24T08:14:26.430
> 
> 标签：java, android, android-layout, android-orientation

我的示例改编自兼容性库之一附带的示例应用程序之一。那是布局文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/layout"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:padding="8dp">

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:text="@string/fragment_menu_msg" />

<CheckBox android:id="@+id/menu1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:checked="true"
    android:text="@string/fragment1menu">
</CheckBox>

<CheckBox android:id="@+id/menu2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:checked="true"
    android:text="@string/fragment2menu">
</CheckBox>

</LinearLayout> 
```

这里有一些Java代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fragment_menu);

    ViewGroup layout = (ViewGroup) findViewById(R.id.layout);
    Button btn = new Button(getApplication());
    btn.setId(1);
    btn.setText("Button 1");
    layout.addView(btn);

    mCheckBox1 = (CheckBox) findViewById(R.id.menu1);
    mCheckBox1.setOnClickListener(mClickListener);
}

final OnClickListener mClickListener = new OnClickListener() {
    public void onClick(View v) {

        ViewGroup layout = (ViewGroup) findViewById(R.id.layout);
        Button btn = new Button(v.getContext());
        btn.setId(2);
        btn.setText("Button 2");
        layout.addView(btn);
    }
}; 
```

活动开始，您禁用第一个复选框，将一个按钮（按钮 2）添加到布局中，您更改屏幕方向并且按钮 2（在 onClickListener 方法中添加）消失。

[Directupload.net 上的屏幕截图](http://s14.directupload.net/file/d/2931/zvqkubis_png.htm)

我已经阅读了很多关于[处理运行时更改](http://developer.android.com/guide/topics/resources/runtime-changes.html)的内容，但我仍然不清楚如何防止按钮 2 在 avobe 示例中消失。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:05:49.850

当您更改方向并且其所有状态都丢失（在您的情况下是动态添加的按钮）时，活动会重新启动。您必须准备好处理这种情况，因为在其他情况下也可能发生这种情况。例如，如果您的应用程序在后台并且设备需要释放内存，它可能会被终止。

正确的解决方案是在 Activity 被销毁之前保存它的状态，然后在它被重新创建后恢复它。像这样的东西：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    // save state of your activity to outState
}

@Override
public void onCreate(Bundle savedInstanceState) {
    if (savedInstanceState != null) {
        // restore state of your activity from savedInstanceState
    }
} 
```

有关详细信息，请参阅官方文档中的[保存活动状态](http://developer.android.com/guide/components/activities.html#SavingActivityState)主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:28:01.997

如果您想将屏幕设置为纵向模式并希望在方向更改时停止重新创建活动，那么只需将下面的代码放入您的活动中。

代码：

```
<activity android:name=".YourActivityName" android:windowSoftInputMode="adjustPan" android:screenOrientation="portrait" android:configChanges="keyboard|keyboardHidden|orientation"></activity> 
```

这段代码对我有帮助，也对你有用。

享受。

:)

快乐的编码...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-24T08:29:08.250

将此条目放在带有活动的清单中并覆盖 onConfigurationChanged 函数

```
android:configChanges="orientation|keyboardHidden|screenSize"

@Override
public void onConfigurationChanged(Configuration newConfig) {
   // super.onConfigurationChanged(newConfig);

} 
```

这将停止重新创建方向变化的活动......

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-24T08:29:40.717

使您的活动在清单中看起来像这样

```
 <activity
                android:name=".Hello"
                android:label="@string/app_name"
                android:screenOrientation="portrait"   <-- Screen will be forced to have portrait
                android:configChanges="orientation|keyboardHidden|screensize" > <-- No Restart in these cases 
```

ScreenSize 属性似乎是在 4.0 中添加的，所以如果您在 4.0 以下运行，请不要提及它。

# ios - 如何在 coco-touch iOS 中重绘视图？

> ID：11175969
> 
> 赞同：0
> 
> 时间：2012-06-24T08:14:59.227
> 
> 标签：ios, cocoa-touch, uiimageview, addsubview

我正在使用 x-code 在 cocoatouch 下编程。

我在 ViewDidLoad 函数中添加了很多 UIImageViews `[self.view addSubview:test];`。

如果web上的信息发生变化，UI上的UIImageViews应该被其他的替换（删除原来的并添加新的）。有什么典型的方法吗？

如何重绘视图？如何移除已经被 addSubView 方法加载的 UIImageViews。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T08:29:35.803

根据 Apple 的`UIView`文档，您应该使用[setNeedsDisplay](http://developer.apple.com/library/ios/documentation/uikit/reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instm/UIView/setNeedsDisplay)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T08:27:04.977

将您`UIImageView`的 s 存储在一个数组中。这样，您以后可以轻松地访问它们以将它们从您的视图中删除。

在 MyViewController.h 中：

```
@interface ResultsViewController {
    NSMutableArray *myImageViews;
} 
```

在 MyViewController.m 中：

```
- (void)viewDidLoad {
    // Initialize image views
    UIImageView *imageView = ...
    [self.view addSubview:imageView]; 
    [myImageViews addObject:imageView];
}

// Some action is called
- (void)somethingHappens {
    // Remove imageViews
    for (UIImageView *imageView in myImageViews) {
        [imageView removeFromSuperView];
    }

    // Empty myImageViews array
    [myImageViews removeAllObjects];

    // Create new imageViews
    UIImageView *imageView = ...
    [myImageViews addObject:imageView];
} 
```

# python - 有没有可以将正则表达式转换为 fsm 的编译器？或者可以转换成人类的话？

> ID：11175971
> 
> 赞同：8
> 
> 时间：2012-06-24T08:15:10.543
> 
> 标签：python, regex, compiler-construction, fsm

可以转换的东西

```
r"a+|(?:ab+c)" 
```

到

```
{
    (1, 'a') : [2, 3],
    (2, 'a') : [2],
    (3, 'b') : [4, 3],
    (4, 'c') : [5]
} 
```

或类似的东西

并接受 2 或 5

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T10:43:34.387

您有一个[调试标志](http://docs.python.org/library/re.html#re.DEBUG)，可以以更易读的形式打印您的正则表达式：

```
>>> import re
>>> re.compile(r"a+|(?:ab+c)", flags=re.DEBUG)
branch
  max_repeat 1 65535
    literal 97
or
  subpattern None
    literal 97
    max_repeat 1 65535
      literal 98
    literal 99
<_sre.SRE_Pattern object at 0x0000000002325328> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T12:46:14.893

我有一些代码可以做到这一点。它没有很好的文档记录并且不受支持，但是如果您有兴趣，欢迎您查看它。

该库称为 rxpy，存储库是[http://code.google.com/p/rxpy](http://code.google.com/p/rxpy)

[进行解析的例程是http://code.google.com/p/rxpy/source/browse/rxpy/src/rxpy/parser/pattern.py#871](http://code.google.com/p/rxpy/source/browse/rxpy/src/rxpy/parser/pattern.py#871)上的 parse_pattern

如果你调用`repr(...)`结果，你会得到一个“点语言”的图表 - [https://en.wikipedia.org/wiki/DOT_language](https://en.wikipedia.org/wiki/DOT_language)

例如，将测试视为[http://code.google.com/p/rxpy/source/browse/rxpy/src/rxpy/parser/_test/parser.py#47](http://code.google.com/p/rxpy/source/browse/rxpy/src/rxpy/parser/_test/parser.py#47)

为了说明我的意思，让我们看看[http://code.google.com/p/rxpy/source/browse/rxpy/src/rxpy/parser/_test/parser.py#234](http://code.google.com/p/rxpy/source/browse/rxpy/src/rxpy/parser/_test/parser.py#234)上的测试`'ab*c'`：

```
"""digraph {
 0 [label="a"]
 1 [label="...*"]
 2 [label="b"]
 3 [label="c"]
 4 [label="Match"]
 0 -> 1
 1 -> 2
 1 -> 3
 3 -> 4
 2 -> 1
}""" 
```

从`0`which 开始可以匹配“a”以进入 state `1`。从那里你可以匹配一个“b”去状态`2`或一个“c”去状态`3`。状态`2`然后有一个转换回`1`可以消耗另一个“b”等等等。手动阅读有点难看，但是当测试失败时，你会在屏幕上显示一个小图表。

the library also has various "engines" which will match strings against this graph (and so do regular expression matching). but it is much slower than the python library (because it is pure python).

this is not supported and may not be very clear - sorry - but i think it's close to what you want and you're welcome to use it if it's useful (MPL or LGPL licence).

# ember.js - Ember.js removes and adds the same CSS class for bindAttr

> ID：11175975
> 
> 赞同：0
> 
> 时间：2012-06-24T08:16:18.063
> 
> 标签：ember.js

Given

```
<div {{bindAttr class="test"}}> 
```

When the computed property test is updated but its value stays the same, the test CSS class is removed and added. This creates a problem when the class has CSS animations, as re adding the class restarts the animation. Is there a way to not remove and add the class if it's already part of the element?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:42:07.217

每当设置值时，Ember 观察者都会被触发，而不仅仅是在值更改时。您的问题的一个可能解决方案是引入第二个属性，该属性仅在值实际更改时设置。就像是：

```
<div {{bindAttr class="stableTest"}}> 
```

然后在类似视图中：

```
onTestChanged: function() {
    var test = this.get('test');
    var stableTest = this.get('stableTest');
    if (test !== stableTest) {
        this.set('stableTest', test);
    }
}.observes('test') 
```

# python - Working with UTF-8 in Python

> ID：11175976
> 
> 赞同：3
> 
> 时间：2012-06-24T08:16:20.657
> 
> 标签：python, utf-8, arabic

As it is summer now, I decided to learn a new language and Python was my choice. Really, what I would like to learn is how to manipulate Arabic text using Python. Now, I have found many many resources on using Python, which are really great. However, when I apply what I learned on Arabic strings, I get numbers and letters combined together.

Take for example this for English:

```
>>> ebook = 'The American English Dictionary'
>>> ebook[2]
'e' 
```

Now, for Arabic:

```
>>> abook = 'القاموس العربي'
>>> abook[2]
'\xde'                  #the correct output should be 'ق' 
```

However, using `print` works fine, as in:

```
>>> print abook[2]
ق 
```

What do I need to modify to get Python to always recognize Arabic letters?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T08:18:39.080

Use Unicode explicitly:

```
>>> s = u'القاموس العربي'
>>> s
u'\u0627\u0644\u0642\u0627\u0645\u0648\u0633 \u0627\u0644\u0639\u0631\u0628\u064a'
>>> print s
القاموس العربي

>>> print s[2]
ق 
```

Or even character by character:

```
>>> for i, c in enumerate(s):
...     print i,c
... 
0 ا
1 ل
2 ق
3 ا
4 م
5 و
6 س
7  
8 ا
9 ل
10 ع
11 ر
12 ب
13 ي
14 
```

I recommend the [Python Unicode page](http://docs.python.org/howto/unicode.html) which is short, practical and useful.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T08:24:23.890

使用 python 3.x：字符串现在是 unicode - 参见[python 3 what is new](http://docs.python.org/release/3.0.1/whatsnew/3.0.html#text-vs-data-instead-of-unicode-vs-8-bit)

```
>>> abook = 'القاموس العربي'
>>> abook[0]
'ا'
>>> abook[4]
'م' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T08:32:35.087

如果你想要输入：

```
>>> abook[2] 
```

产生以下输出：

```
'ق' 
```

它永远不会发生。交互式外壳打印`repr(abook[2])`，它将始终对阿拉伯字符使用转义序列。我不知道确切的规则，但我猜测 ASCII 宇宙之外的大多数字符都会被转义。为了让它像宣传的那样工作，你使用`u`前缀，但它仍然会输出一个转义序列（尽管这次是正确的）：

```
>>> abook = u'القاموس العربي'
>>> abook[2]
u'\u0642' 
```

你得到的原因`'\xde'`是没有`u`前缀，abook 保存了短语的 UTF-8 编码。我的输出与您的不同（可能是因为代码点是通过复制粘贴更改的；我不确定），但原则仍然成立：

```
>>> abook = 'القاموس العربي'
>>> ' '.join( hex(ord(c))[-2:] for c in abook )
'd8 a7 d9 84 d9 82 d8 a7 d9 85 d9 88 d8 b3 20 d8 a7 d9 84 d8 b9 d8 b1 d8 a8 d9 8a'
>>> abook[2]
'\xd9' 
```

您可以通过以下方式确认：

```
>>> abook = 'القاموس العربي'
>>> unicode(abook, 'utf-8')[2]
u'\u0642'
>>> print unicode(abook, 'utf-8')[2]
ق 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T11:05:46.117

根据问题评论中的结果，这似乎`repr`导致了[mojibake](http://en.wikipedia.org/wiki/Mojibake)问题 - 也就是说，它对编码感到困惑并使用了错误的编码。`print`将尝试使用它认为您的 STDOUT 使用的编码，并直接打印结果字节 - repr 尝试打印 ASCII 安全表示，尽管在这种情况下似乎失败了。

好消息是 - 这是一个问题`repr`，而不是 Python 的 Unicode 处理问题。只要往返：`s.encode('utf8').decode('utf8') == s`有效，就可以了。`print`当你想检查它时的值，不要只在交互终端上提及它，而是在任何地方使用 Unicode 字符串（使用 Py3 将有助于解决这个问题，或者至少可以这样做：

```
from __future__ import unicode_literals
from io import open 
```

)，跟踪编码，即使`repr`发生奇怪的事情，你的程序也能正常工作。

另请注意，您的问题与 UTF8*无关- 它与 Unicode 有关，这是一个不同（尽管相关）的概念。*如果您一直在阅读的资源没有强制执行这种差异，请获得更好的资源 - 对这些概念的误解会给您带来很多痛苦。

# php - Facebook Graph API 无法访问

> ID：11175980
> 
> 赞同：4
> 
> 时间：2012-06-24T08:17:02.003
> 
> 标签：php, facebook, facebook-graph-api, file-get-contents

我一直在开发一个将使用 Graph API 进行身份验证的 facebook 应用程序，该代码明天工作得很好，但现在突然间我开始收到 Host is unreachable 错误。我正在使用的代码是：

```
$token_url = "https://graph.facebook.com/oauth/access_token?".
                "client_id=[client_id]".
                "&redirect_uri=http://www.next_big_website.com".
                "&client_secret=[client_secret]".
                "&code=" . $_GET['code'].
                "&scope=manage_pages,publish_stream,publish_actions,read_mailbox,email".
                "&response_type=token";
    $response = file_get_contents($token_url); 
```

我收到的错误是：

> 警告 (2): file_get_contents(https://graph.facebook.com/oauth/access_token?client_id=[client_id]&redirect_uri=http://www.next_big_website.com&client_secret=[client_secret]&code=somelong_and_ugly_code&scope=manage_pages,publish_stream,publish_actions ,read_mailbox,email&response_type=token)：无法打开流：网络无法访问 [temp.php，第 112 行]

请帮我解决这个问题，因为我不知道是什么原因造成的。

好的，我进一步挖掘并找到了解决方案，这是因为 facebook 试图强制使用 IPv6，因为每当我的服务器尝试使用 IPv4 连接时，Facebook 都会拒绝我的请求，tracert 会跟踪到 facebook API 服务器的路径，然后请求被丢弃。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:02:53.617

通过使用修复它

```
 $url = ("https://graph.facebook.com/me/access_token?token");
    $c = curl_init();
    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($c, CURLOPT_URL, $url);
    curl_setopt($c, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4); 
    $contents = curl_exec($c);
    $err  = curl_getinfo($c,CURLINFO_HTTP_CODE);
    curl_close($c); 
```

# php - Comparing Hashed Password in the database to user Input in PHP MYSQLI

> ID：11175981
> 
> 赞同：0
> 
> 时间：2012-06-24T08:17:06.603
> 
> 标签：php, mysqli, crypt

How do I compare hashed passwords that are stored in the database to a user inputted password, I need to do thsi so that the user could log in.

Here's how I hashed my password (using phps crypt method)

```
$hashedpass = crypt($password);
            $sql = "INSERT INTO accounts (username,password,email) VALUES('{$username}','{$hashedpass}','{$email}')";
            $conn->query($sql); 
```

This is how I compare them to user input

```
$username = trim($_POST['username']);
        $password = crypt($_POST['password']);
        $sql = "SELECT * FROM accounts WHERE username = '{$username}'  &&  password = '{$password }'LIMIT 1";
        echo "$sql";
        $rs = $conn->query($sql);
        $numRows = $rs->num_rows;
        if($numRows == 1){
            echo "you may log in";
        } 
```

I am 100% sure that I enterd the password correctly but the thing is mysql is not showing results,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T08:24:52.780

看一下 crypt 的[PHP 文档](http://php.net/manual/en/function.crypt.php)，因为你没有提供 SALT 值，所以你会得到通常以一个值的散列与另一个相同值的散列不匹配的散列结束。

# javascript - 在我的页面中使用 jqBarGraph

> ID：11175985
> 
> 赞同：0
> 
> 时间：2012-06-24T08:17:46.813
> 
> 标签：javascript, jquery, html

嗨，我需要在我的html页面中有一个图表经过长时间的搜索我才知道使用jqBarGraph插件很容易创建图表，下面是我页面的代码：

```
<html>
<head><script type="text/javascript" src="http://www.workshop.rs/jqbargraph/jquery.js"></script>
<script type="text/javascript" src="http://www.workshop.rs/jqbargraph/jqBarGraph.js"></script>

   <script type="text/javascript">

 arrayOfData = new Array(
     [10.3,'Jan','#f3f3f3'],
     [15.2,'Feb','#f4f4f4'],
     [13.1,'Mar','#cccccc'],
     [16.3,'Apr','#333333'],
     [14.5,'May','#666666']
);
   $('#divForGraph').jqBarGraph({ data: arrayOfData });

   </script>
   </head>
   <body>
   <div id="divForGraph" style="width:100%; height:100%; border:1px solid black;">
   aksdljfkladsjf;oajsdfkmlmnmnk;asdf
   </div>
   </body>
   </html> 
```

我在这段代码中犯了什么错误并纠正我尽快在此页面中获取图表....提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T08:28:43.463

您必须等到 div 加载后才能使用 jQuery / jqgraph 操作 div 内容。

加载 div 后放置脚本。

CSS样式文件也丢失了，我补充说。

以下固定代码有效。

```
<html>
<head><script type="text/javascript" src="http://www.workshop.rs/jqbargraph/jquery.js"></script>
<script type="text/javascript" src="http://www.workshop.rs/jqbargraph/jqBarGraph.js"></script>
<link rel="stylesheet" href="http://www.workshop.rs/jqbargraph/styles.css" type="text/css" />
   </head>
   <body>
   <div id="divForGraph" style="width:100%; height:100%; border:1px solid black;">
   </div>
   <script type="text/javascript">

 arrayOfData = new Array(
     [10.3,'Jan','#f3f3f3'],
     [15.2,'Feb','#f4f4f4'],
     [13.1,'Mar','#cccccc'],
     [16.3,'Apr','#333333'],
     [14.5,'May','#666666']
);
   $('#divForGraph').jqBarGraph({ data: arrayOfData });

   </script>
   </body>
   </html> 
```

在不将脚本移动到页面底部的情况下，还有另一个解决方法。或者，您也可以使用 jQuery`$(document).ready()`等待文档加载完毕，然后运行您的 jqBar 脚本！

```
<html>
<head><script type="text/javascript" src="http://www.workshop.rs/jqbargraph/jquery.js"></script>
<script type="text/javascript" src="http://www.workshop.rs/jqbargraph/jqBarGraph.js"></script>
<link rel="stylesheet" href="http://www.workshop.rs/jqbargraph/styles.css" type="text/css" />

   <script type="text/javascript">
$(document).ready(function() {
   $('#divForGraph').jqBarGraph({ data: arrayOfData });

});
 arrayOfData = new Array(
     [10.3,'Jan','#f3f3f3'],
     [15.2,'Feb','#f4f4f4'],
     [13.1,'Mar','#cccccc'],
     [16.3,'Apr','#333333'],
     [14.5,'May','#666666']
);

   </script>
   </head>
   <body>
   <div id="divForGraph" style="width:100%; height:100%; border:1px solid black;">
   </div>

   </body>
   </html> 
```

# sql-server - 在表 B 中插入记录，然后与源表 A 匹配

> ID：11175990
> 
> 赞同：0
> 
> 时间：2012-06-24T08:19:31.343
> 
> 标签：sql-server, sql-server-2008-r2, insert-update

我有带有身份 PK 的表 A 和 B`ida`和`idb`：

前答：

```
ida    col1     col2   idb
---------------------------
1      xxxx     foo    NULL
2      yyyy     bar    NULL 
```

例如乙：

```
idb    col3     col4  
----------------------
110    uuuu     rrr  
111    vvvv     ttt 
```

对于 AI 中的每一行，必须在 B 中插入一行。然后我需要用我在 B 中插入的行的 ID 更新 A，**同时保持它们之间的匹配。A 和 B 之间没有其他关系，也没有来自 A 的数据进入 B。**

插入后，B 可能如下所示：

```
idb    col3     col4  
----------------------
110    uuuu     rrr  
111    vvvv     ttt   
112    aaaa     www    
113    bbbb     mmm 
```

更新 A 后，A 将如下所示：

```
ida    col1     col2   idb
---------------------------
1      xxxx     foo    112
2      yyyy     bar    113 
```

现在的问题是，我如何确定 B 中的哪条记录对应于 A 中的哪条记录，因为它们之间没有关系？我可以在一个循环中一个一个地插入和更新，但是对于很多记录，这可能是有问题的。

有没有办法以更少的步骤做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:04:06.173

根据您的要求，这是您可以尝试达到的结果

```
 Declare @countA int
  Declare @value int
  set @value =0
  Select @countA=count(*) from TableA

  while @value<@countA
  BEGIN
  Insert into TableB (idb,col3,Col4)
  select max(idb)+1,'aaa','BBBB' from TableB  --I don't know from where you get the values for col3    and col4
  Update TableA
  set idb=(Select max(idb) from TableB) where idb is null and @value+1=ida
  set @value=@value+1
  END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T09:22:56.443

关键是您是否可以构造一个[`MERGE`](http://technet.microsoft.com/en-us/library/bb510625.aspx)插入表 B 的语句 - 因为如果可以，您可以构造一个`OUTPUT`引用表 B 中新插入的行和表 A 中相应行的子句*。*您可以`INSERT`不幸的是，不要用声明来做到这一点。

以下所有脚本都应该一次性运行，只需将它们拆分以显示正在发生的事情：

数据设置：

```
declare @TabA table (ida int IDENTITY(1,1),col1 char(4),col2 char(3),idb int)
insert into @TabA(col1,col2,idb) values 
('xxxx','foo',NULL),
('yyyy','bar',NULL)

declare @TabB table (idb int IDENTITY(110,1),col3 char(4),col4 char(3))
insert into @TabB(col3,col4) values
('uuuu','rrr'),
('vvvv','ttt') 
```

`MERGE`被迫只做一个插入。在这里，`CASE`表达式是您从表 A 中的值派生新值`col3`并`col4`基于表 A 中的值。在这里，我使用的是 ID，但这是您需要做的任何事情：

```
declare @Res table (ida int,idb int)

;merge into @TabB tb
using (select ida,col1,col2 from @TabA where idb is null) src
on 1 = 0
when not matched then insert (col3,col4) values (case src.ida when 1 then 'aaaa' else 'bbbb' end,case src.ida when 1 then 'www' else 'mmm' end)
output src.ida,inserted.idb into @Res; 
```

现在，`@Res`包含来自两个表的匹配 ID，因此构造一个将新 ID 复制回表 A 的更新很简单：

```
update a set idb = r.idb
from @TabA a
inner join @Res r on a.ida = r.ida 
```

结果：

```
select * from @TabA
select * from @TabB

ida         col1 col2 idb
----------- ---- ---- -----------
1           xxxx foo  112
2           yyyy bar  113

(2 row(s) affected)

idb         col3 col4
----------- ---- ----
110         uuuu rrr
111         vvvv ttt
112         aaaa www
113         bbbb mmm 
```

# android - Not able to find values on between activities

> ID：11175992
> 
> 赞同：0
> 
> 时间：2012-06-24T08:19:58.333
> 
> 标签：android

I have two activities in my application say EMPID and INFO. In EMPID activity I have one EditText say empid and in another activity INFO I have another EditText Name.

I am able switch between these activities using Button in each activity.

But I want the value of empid to be shown when I switch to second activity and come back to first activity.

Can anyone help on these.

Thank You in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T08:30:16.923

将您的代码更改为将数据从第一个活动发送到第二个活动：

```
@Override
    public void onClick(View v) {
     // TODO Auto-generated method stub
     /*Create new Intent Object, and specify class*/
    Intent intent = new Intent();  
    intent.setClass(EMPID.this,INFO.class);
    /*new Bundle Object, and put data in bundle object*/ 
     Bundle bundle = new Bundle();  
     bundle.putString("EMPID ","empid");   
    /*Put Bundle object i.e bundle in intent*/ 
    intent.putExtras(bundle);  
    EMPID.this.startActivity(intent);
@Override
public void onResume()
{
  //SET EDITVIEW VALUE HERE to EMPID
    super.onResume();
} 
```

在活动信息中：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.receivermain);
    TextView txtvwreceived=(TextView)findViewById(R.id.txtviewsender);
    /* Intent To obtain the  bundle object from EMPID */
    Bundle bundle = this.getIntent().getExtras();  
    /* Obtain String from Intent  */
    if(bundle !=null)
    {
        /* Obtain Data from bundle object */ 
        String strdata = bundle.getString("EMPID");
        }
    } 
```

第二种方法使用第一个活动（EMPID.class）中的`startActivityForResult()`覆盖`onActivityResult`方法来启动您的第二个活动（INFO.class）以设置 EditView 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T08:21:54.737

Use `startActivityForResult()` when you call the second activity. This will maintain the first activity in its previous state and you can have the `empid` maintained when you switch back to the first activity.

If you want to send the value of empid to second activity you can use `intent.putExtra()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T08:28:03.103

您将需要`putExtras`并且`getIntExtras`

下面的片段会帮助你。

**EMPID.java**

```
Intent intent=new Intent(this,INFO.class);
intent.putExtra("id", empid);
startActivity(intent); 
```

**信息.java**

```
int empId=getIntent().getIntExtra("id", 0); 
```

# php - php 处理程序作为 cgi/suexec

> ID：11175994
> 
> 赞同：0
> 
> 时间：2012-06-24T08:20:15.837
> 
> 标签：php, apache, whm, suphp

在我的 phpinfo 中，它显示 php 处理程序为 cgi/fastcgi，但我想将其更改为 cgi/suexec。我尝试了 whm php 和 suexec 配置，我发现 suphp 是默认的 php haldler，然后为什么 phpinfo 将 cgi/fastcgi 显示为默认处理程序。我想更改为 cgi/suexec，因为 fastcgi 不能与 php apc 处理程序一起使用。

```
output of phpinfo
Server API  CGI/FastCGI 
```

但是显示

```
Configure PHP and SuExec
New Configuration

Option  Configured Value
Default PHP Version (.php files)    5
PHP 5 Handler   suphp
PHP 4 Handler   none
Suexec  on 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:35:18.417

> 我想更改为 cgi/suexec，因为 fastcgi 不适用于 php apc 处理程序。

1.  php 没有 cgi/suexec 处理程序。只有 cgi、fastcgi 和服务器特定模块。suexec 是更改运行 cgi 进程的用户，并且可以应用于任何其他 cgi 解释器，而不仅仅是 php。
2.  CGI/FastCGI 由 php 从同一个二进制文件中处理，这就是为什么它说`CGI/FastCGI`
3.  APC 与 FastCGI（在 apache 下使用`mod_fastcgi`, not `mod_fcgid`）比 CGI 更好 - 在这两种情况下，它都可用于存储和检索用户数据，但操作码缓存仅适用于正确配置的 FastCGI，在每次请求后，CGI 缓存将被销毁。

# jquery - 交叉淡入淡出动画

> ID：11175996
> 
> 赞同：3
> 
> 时间：2012-06-24T08:20:56.257
> 
> 标签：jquery

我希望 top_content 函数与#test 和#test1 交叉淡入淡出。现在 div #test 和 #test1 正在使用一个简单的切换，但我希望它们同时淡出和淡入。

```
$(document).ready(function () {
    $('#test, #test1').hide();
    $('.home').click(function () {
        var id = $(this).html().toLowerCase();
        var $top_content = $('#' + id + ':not(:visible)');
        if ($('.current').length === 0) {
            toggleContent($top_content);
        } else {
            $('.current').toggle(400, function () {
                toggleContent($top_content);
            });
        }
    });

    function toggleContent(top_content) {
        top_content.toggle(400);
        $('.current').removeClass('current');
        top_content.addClass('current');
    }
    $("a.home").click(function () {
        $('.active').not(this).removeClass('active');
        $(this).toggleClass('active');
    });
}); 
```

[http://jsfiddle.net/FJ8DV/](http://jsfiddle.net/FJ8DV/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T08:45:39.593

你没有得到“交叉淡入淡出”效果的原因是这段代码：

```
 $('.current').toggle(400, function () {
            toggleContent($top_content);
        }); 
```

您已将对`toggleContent()`函数的调用*放在完成*时调用的回调中`.toggle()`- 因此在前一个淡出完成之前不会发生淡入。将其移出回调，它不会等待完成，从而允许动画同时发生：

```
 $('.current').toggle(400);
        toggleContent($top_content); 
```

另外，我假设“交叉淡入淡出”意味着元素应该同时出现在同一个地方*，*所以你需要给它们`position:absolute`样式：

```
#top_content div { position : absolute; } 
```

鉴于您正在谈论交叉*淡入淡出*，您可能希望替换`.toggle()`为`fadeToggle()`演示的此更新中所示（我还使用了更长的延迟，因此淡入淡出更明显）：http: [//jsfiddle.net/ FJ8DV/1/](http://jsfiddle.net/FJ8DV/1/)

# vb6 - Where to put the static initialization statements for EF 4.3 Code First and Migrations when working with a class library?

> ID：11175997
> 
> 赞同：1
> 
> 时间：2012-06-24T08:20:58.237
> 
> 标签：vb6, entity-framework-4.3, entity-framework-migrations

I am just getting my feet wet using Entity Framework 4.3 and Migrations for a SQLServerCompact 4.0 database, so I am using the simplest possible methods to get things started. Following the advice in [this blog](http://blog.larud.net/using-ef-4-3-code-first-migrations-with-sql-server-compact-4-0) I added the initialization statements below to the Main method of a console application. This all works very well.

```
 Database.DefaultConnectionFactory = New SqlCeConnectionFactory("System.Data.SqlServerCe.4.0")
 Database.SetInitializer(Of MySQLCompactDbContext)(New MySQLCompactDBInitializer) 
```

But in production the code addressing the database will be located in a class library that will be accessed through COM-interop from a Visual Basic 6 application. So there is no natural entry point for the code where to put the static methods mentioned above.

Where can I put them? Please point out the alternative way using the config file if necessary.

# ios - 实时重新加载表格视图

> ID：11175998
> 
> 赞同：3
> 
> 时间：2012-06-24T08:21:02.900
> 
> 标签：ios, uitableview, uilocalnotification, reloaddata

应用程序收到一个`UILocalNotification`，但如果用户在`UITableViewController`触发时间，表视图（包含计划的通知）不会重新加载。用户必须退出该视图并再次加载视图，以便加载单元格，并且由于通知已经触发，它不会显示在该表视图的任何单元格上。

问题是：如果用户触摸包含刚刚触发的通知的特定 tableView 单元格，应用程序崩溃，导致通知不再存在。

我已经`- (void)reloadData`在每个可能的地方实现了，但它仍然不能实时加载。

对此有什么更好的解决方案？

其他细节，如何在通知显示后推送特定视图（当用户在手机锁定时滑动应用程序图标时）？

任何帮助都将不胜感激，因为还有最后的细节来发布我的第一个应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:19:46.257

您描述的问题是由当前本地通知引起的：在处理通知时，它仍在计划通知列表中，因此刷新表格视图将没有效果。解决此问题的方法是将重新加载表视图推迟到处理通知之后，例如

```
// In your app delegate
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{
    dispatch_async(dispatch_get_main_queue(), ^{
        [self.localNotificationsController reloadDataIfNeeded];
    });
}

// In your controller that shows the local notifications
- (void)reloadDataIfNeeded
{
    if (![self isViewLoaded]) return;

    [self.tableView reloadData];
} 
```

如果您只使用只触发一次的通知，您也可以从列表中删除通知（这样您就可以确定通知无论如何都会消失）：

```
// In your app delegate
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{
    [application cancelLocalNotification:notification];
    [self.localNotificationsController reloadDataIfNeeded];
} 
```

至于您问题的第二部分（“如何在显示通知后推送特定视图（当手机锁定时用户滑动应用程序图标时？”），有两种情况下如何激活应用程序本地通知。

1.  您的应用程序已暂停，但仍在内存中。然后选择本地推送通知将使应用程序进入前台，`-application:didReceiveLocalNotification:`将被调用，`[application applicationState]`并将`UIApplicationStateInactive`
2.  您的应用程序没有运行，即没有挂起，不在内存中。`launchOptions`然后您将在in 中收到本地通知`-application:didFinishLaunchingWithOptions:`：

    ```
    UILocalNotification *localNotification = [launchOptions valueForKey:UIApplicationLaunchOptionsLocalNotificationKey]; 
    ```

    尽管文档说了什么，**在这种情况下不会**`-application:didReceiveLocalNotification:`被调用。

 **因此，为了显示唤醒应用程序的通知，您可以在这两种情况下推送您的控制器。**