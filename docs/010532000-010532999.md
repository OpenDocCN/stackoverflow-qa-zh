# StackOverflow 问答 10532000-10532999

# c# - 如何读取 XPathNodelist

> ID：10532001
> 
> 赞同：0
> 
> 时间：2012-05-10T10:20:44.247
> 
> 标签：c#, xml, xpath, ienumerable

在 C# 中编程我得到了一个 Xml.XpathNodeList 对象“ResultsPartRel.nodeList”。使用 Visual Studio 调试它我可以阅读“结果视图；扩展结果视图将枚举 IEnumerable”

**问题：**

1.- 读取这些节点的最佳方式是什么？

2.- 我编写了下一个代码，但没有得到预期的结果。我两次得到相同的结果。（ResultsPartRel.nodeList 包含 2 个节点）

```
 List<string> childrenName = new List<string>();

         foreach (XmlElement node in ResultsPartRel.nodeList)
         {
             string nameChildren = node.SelectSingleNode("//related_id/Item/keyed_name").InnerText;
             childrenName.Add(nameChildren);
         } 
```

先感谢您。

**编辑**

```
<related_id>
  <Item>
    <classification>Component</classification>
    <id></id>
    <keyed_name>glass</keyed_name> <!-- I want to get this InnerText -->
    </Item>
</related_id>
<source_id>968C45A47942454DA9B34245A9F72A8C</source_id>
<itemtype>5E9C5A12CC58413A8670CF4003C57848</itemtype> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:42:49.490

好吧，我们确实需要查看 XML 示例以及您要提取哪些数据的口头说明。目前，您这样做`node.SelectSingleNode(...)`看起来好像您要选择相对于的路径，`node`但随后您使用以 开头的绝对路径`//`，这就是为什么您两次获得相同结果的原因。

所以你想要`node.SelectSingleNode(".//related_id/Item/keyed_name")`甚至可能`node.SelectSingleNode("related_id/Item/keyed_name")`，这取决于你拥有的 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:26:59.027

你可以得到第一个元素。（“//”表示搜索所有以下标签，因此您可能会得到更多结果）。当您想要第一个元素时，请写“//related_id/Item/keyed_name* *[1](https://addons.mozilla.org/en-US/firefox/addon/xpath-checker/)* *”。

或者你可以写出确切的路径。（这是最安全的方法）为了让自己更容易，有一个 Firefox 扩展[xPath Checker](https://addons.mozilla.org/en-US/firefox/addon/xpath-checker/)在 Firefox 中加载文档，而不是右键单击元素并显示 Xpath。然后你得到一个确切的路径。

# c# - 子窗口中 WebBrowser 控件的错误行为

> ID：10532004
> 
> 赞同：0
> 
> 时间：2012-05-10T10:20:49.207
> 
> 标签：c#, .net, silverlight

![在此处输入图像描述](../Images/f15f1d8c219a40f095d6e395c6c6be10.png) 大红色边框标记嵌套`<WebBrowser>`控件的实际父窗口。如果我尝试向下滚动，则会发生此行为。有谁知道如何防止这种情况？

我也尝试过 Telerik RadHtmlPlaceholder。但这更糟糕，atm。

# ruby-on-rails - 如何停用rails3中的会话？

> ID：10532005
> 
> 赞同：0
> 
> 时间：2012-05-10T10:20:51.233
> 
> 标签：ruby-on-rails, session, linkedin

我正在使用 'linkedin', :git => "git://github.com/pengwynn/linkedin.git" gem 来连接linkedin。一旦我连接到转发到我的应用程序的链接，会话将保持在我的应用程序范围之外。

如果我从我的应用程序中出来并键入 www.linkedin.com，那么在浏览器中就会看到登录的用户信息。

我的问题是：

一旦用户使用我的应用程序登录，则不应在应用程序范围之外维护会话，如果用户键入 www.linkedin.com，他不应看到他/她的信息。

请帮助我如何在 rails3 中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:25:06.803

我认为这可能是一个`LinkedIn`特点。由于用户必须`sign-in`连接到您的站点并授予您的站点访问其信息的权限，`sign-in session cookie`因此`LinkedIn`.

# gridview - 在更新面板中显示 Gridview 页脚

> ID：10532006
> 
> 赞同：0
> 
> 时间：2012-05-10T10:20:56.910
> 
> 标签：gridview, updatepanel, footer

我有一个简单的情况不起作用。

Gridview 嵌套在 updatepanel 内，具有插入、编辑、取消、更新、排序等功能。一切正常，但现在我在 gridview 标题中添加了“插入行”按钮，以使用 grdView.ShowFooter 显示 gridview 标题。单击按钮，触发事件，ShooFooter 返回 true，但不显示页脚。我尝试使用 showfooter=true 加载 gridview，并且页脚显示得很好。

试图将按钮移到gridview之外，仍然在updatepanel中，但这并没有改变。

所以，我的问题是 - 是否可以在更新面板中显示隐藏页眉的网格视图。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:13:29.017

更改属性后，您必须再次绑定它。

尝试执行以下操作：

```
grd.ShowFooter = true;
grd.ShowHeader = true;
grd.DataBind(); 
```

看看这个链接：[http ://forums.asp.net/t/1686452.aspx/1](http://forums.asp.net/t/1686452.aspx/1)

# ruby-on-rails - 如何测试我是否在 Rails 中正确设置了多对多关系？

> ID：10532010
> 
> 赞同：0
> 
> 时间：2012-05-10T10:21:13.193
> 
> 标签：ruby-on-rails, testing, activerecord

我正在使用 :through 方法建立多对多关系，并想测试我是否已正确设置所有内容。

```
class MenuItem < ActiveRecord::Base
  belongs_to :products #burger
  belongs_to :additions #extra mustard
end 
```

产品就像汉堡包

```
class Product < ActiveRecord::Base
  has_many :menu_items
  has_many :additions, through: :menu_items
end 
```

添加的东西就像额外的芥末或泡菜

```
class Addition < ActiveRecord::Base
  has_many :menu_items
  has_many :products, through: :menu_items
end 
```

我已经设置了我的固定装置，以便一个汉堡包应该有 2 个与之相关的添加物。现在我想测试该关联是否有效。不完全确定如何执行此操作。我试过这个：

在夹具中，我将汉堡包的 id 设置为 22。还将汉堡包设置为芥末和泡菜（添加 2 个）。

```
test "product 22 should have 2 additions associated with it" do 
  menu_item = Product.find(22).additions
  assert_equal menu_item.count, 2 
end 
```

我收到未初始化的常量错误

```
NameError: uninitialized constant Product::Additions 
```

我确信我只是误解了一些东西。真的很感激任何指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:53:15.480

该错误是因为您需要对 belongs_to 使用单数。

```
class MenuItem < ActiveRecord::Base
  belongs_to :product #burger
  belongs_to :addition #extra mustard
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:28:42.133

检查`shoulda-matchers`宝石：[https ://github.com/thoughtbot/should-matchers#activerecord-matchers](https://github.com/thoughtbot/shoulda-matchers#activerecord-matchers)

# objective-c - typedef 匿名枚举声明后

> ID：10532012
> 
> 赞同：0
> 
> 时间：2012-05-10T10:21:19.057
> 
> 标签：objective-c, enums, typedef

我正在查看可可框架中的枚举，我看到了这个：

```
enum {  
    NSNetServiceNoAutoRename = 1UL << 0  
}; 

typedef NSUInteger NSNetServiceOptions; 
```

我的问题是这怎么可能？

是怎么`NSNetServiceOptions`联系的`enum`？

是只能在目标 c 中还是在 c 中才有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:39:13.770

C 中的枚举（以及随后的 Obj-C 和 C++）是弱类型的，这意味着您可以在枚举和整数之间进行隐式强制转换，因为它们只是`int`s。

例如，这是完全有效的：

```
enum {A = 1};
enum {B = A+1};

const int C = A | B; 
```

enum 使用 typedef 而不是 shortform`typedef enum {...} Name;`的原因是 enums 默认为 type `int`。通过使用 typedef，您可以将枚举定义为无符号整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:40:03.260

*NSNetServiceOptions*绑定到该*枚举*的上下文中，*枚举*将保持一个整数值。在上面的示例中，您将为*枚举*创建一个变量，如下所示：

```
NSNetServiceOptions _netServiceOptions; 
```

您甚至可以忽略*typedef*并直接使用，

```
NSUIInteger _netServiceOptions; 
```

# php - 使用 JQuery .Ajax 传递 2 组数据？

> ID：10532013
> 
> 赞同：0
> 
> 时间：2012-05-10T10:21:19.690
> 
> 标签：php, jquery

我有一个搜索框：

```
<input class="box" name="search" type="text" id="search_input" /> 
```

还有一个`json_encode`名为`$findall`. 使用 jQuery `$.ajax()`，我希望能够通过数据字段从输入中传递数组和“关键字”。下面的代码已将 search_input 中的关键字设置为变量 dataString

```
$.ajax({
                type: "GET",
                url: "core/functions/searchdata.php",
                data: dataString,  
        //data:{availableDevicesArray : availableDevices },
                beforeSend: function() {
                    $('input#search_input').addClass('loading');
                },
                success: function(server_response) {
                    $('#searchresultdata').append(server_response);
                    $('span#category_title').html(search_input);
                } 
```

我可以传递 dataString 或数组，但不能同时传递我需要的两者。怎么可能同时通过它们？

更新：

我获取数组的 PHP 是：

```
mysql_select_db($database_database_connection, $database_connection);
$query = "SELECT * FROM Device_tbl";
$result=mysql_query($query, $database_connection) or die(mysql_error());
$findall = array ();
while($row = mysql_fetch_array($result)){

    $findall[] = $row;
} 
```

我像这样存储availbleDevices数组：

```
var availableDevices = <? echo json_encode($findall); ?>; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:26:05.703

您可以创建一个对象并将这些变量作为其属性推送：

```
data: {
    'string' : 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
    'array' : [ 'one', 'two', 'three' ]
} 
```

# nhibernate - 如何选择用户名为“xx”的任务

> ID：10532017
> 
> 赞同：0
> 
> 时间：2012-05-10T10:21:29.580
> 
> 标签：nhibernate, nhibernate-criteria

我有 2 个表（任务表和用户表）
任务表有用户列表
如何使用 nhibernate 2 中的条件选择 userName 为“xx”的任务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:37:24.987

```
 var tasks = _session.QueryOver<Task>()
            .Fetch(x => x.User).Eager
            .Where(x => x.User.Username == "xx")
            .List(); 
```

或者

```
 User userAlias = null;
        var tasks = _session.QueryOver<Task>()
            .JoinAlias(x => x.User, () => userAlias, JoinType.InnerJoin)
            .Where(x=>userAlias.UserName=="xx")
            .List(); 
```

# workflow - 在 VIM 中编辑 HTML 时跳转到 CSS 定义

> ID：10532019
> 
> 赞同：3
> 
> 时间：2012-05-10T10:21:34.757
> 
> 标签：workflow, vim

例如，我`index.html or index.php`在 VIM 中进行编辑，其中有以下代码：

```
<div id="header">

// some code

</div> 
```

当我将光标移动到单词时，`header`我想跳转到我的 CSS 文件中定义标签（id/class）的位置。ctags 不适用于此。谢谢指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:27:32.140

您可以尝试修补 ctags 以使其支持 CSS。[这个人解释了如何](http://scie.nti.st/2006/12/22/how-to-add-css-support-to-ctags)，但我不知道它是否有效。我可能会很快尝试这个解决方案，因为我认为这个功能会很重要。

另外，我应该补充一点，我没有从我的魔法书签帽子中提取这篇旧博客文章。这是一个非常简单的谷歌查询的第一个结果之一，你在问这里之前有没有环顾四周？而且，如果你这样做了，你发现/尝试了什么？

另见[那里](http://book.abe.free.fr/blog/public/ctags)和[那里](http://designtomarkup.com/vim/taglist-ctags-css-patch)。

***编辑***

[该解决方案](https://stackoverflow.com/a/12924218/546861)不需要修补/编译并且效果很好。

# android - 如何检查条件首先只在 getview() 中执行操作？

> ID：10532020
> 
> 赞同：0
> 
> 时间：2012-05-10T10:21:36.257
> 
> 标签：android, baseadapter

假设是这样的

> 形象词

但现在变成了这样

> 图片
> 
> 单词

开始时图像和单词堆叠在一起，当我滑动列表视图时，它只会更改为

> 形象词

这是 baseadapter 中的 getview

```
public View getView(int position, View convertView, ViewGroup parent) {
    View vi = convertView;
    if (convertView == null)
        vi = inflater.inflate(R.layout.main_alllatestnewslist, parent,
                false);

    ImageView imageview = (ImageView) vi
            .findViewById(R.id.image_alllatestnewstitle);
    imageview.setVisibility(View.INVISIBLE);

    TextView titletext = (TextView) vi
            .findViewById(R.id.text_particularlatestnewstitle);

    if (!imagepath[position].toString().equals("no picture")) {

        titletext.setPadding(imageview.getWidth() + 5, 0, 0, 0);
        imageview.setVisibility(View.VISIBLE);
        imageLoader.DisplayImage(imagepath[position], imageview);
    } else {
        imageview.setVisibility(View.INVISIBLE);
        imageview.setImageDrawable(null);
        titletext.setPadding(0, 0, 0, 0);
    }

    titletext.setText(title[position].toString());
    return vi;
} 
```

如何先检查然后设置仅填充显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:28:28.750

```
if(position == 0){
   // enter code here
}
else{
   //enter code here
} 
```

# firefox - 如何将网页保存到Firefox插件中的所需位置

> ID：10532021
> 
> 赞同：1
> 
> 时间：2012-05-10T10:21:39.457
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

如何在 Firefox 插件中使用 javascript 将当前网页保存到所需位置。我有一个按钮。当用户单击按钮时，我希望打开资源管理器窗口并将文件保存到所需位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:41:13.253

将此函数`downloadFile(title, url, fileType)`与适当的参数一起使用

```
function downloadFile(title, url, fileType) 
{
    var file = getDownloadFile(title, fileType);

    var persist = Components.classes['@mozilla.org/embedding/browser/nsWebBrowserPersist;1'].createInstance(Components.interfaces.nsIWebBrowserPersist);  
    var ios = Components.classes['@mozilla.org/network/io-service;1'].getService(Components.interfaces.nsIIOService);  
    var uri = ios.newURI(url, null, null); 

    var target = ios.newFileURI(file) 
    var xfer = Components.classes["@mozilla.org/transfer;1"]  
                           .createInstance(Components.interfaces.nsITransfer);  
    xfer.init(uri, target, "", null, null, null, persist);  
    persist.progressListener = xfer; 
    persist.saveURI(uri, null, null, null, null, file);

}

function getDownloadFile(defaultString, fileType) 
{
    var nsIFilePicker = Components.interfaces.nsIFilePicker;

    var fp = Components.classes["@mozilla.org/filepicker;1"].createInstance(nsIFilePicker);
    fp.init(window, "Save As", nsIFilePicker.modeSave);
    try {
        var urlExt = defaultString.substr(defaultString.lastIndexOf(".")+1, 3);
        if (urlExt!=fileType) defaultString += "." + fileType
    }catch(ex){}

    fp.defaultString = defaultString;

    fp.appendFilter(fileType, "*." + fileType);
    var rv = fp.show();
    if (rv == nsIFilePicker.returnOK || rv == nsIFilePicker.returnReplace) {
      var file = fp.file;
      var path = fp.file.path;
      return file;
    }
    return null;
} 
```

# objective-c - stringWithFormat 中的十六进制错误访问

> ID：10532025
> 
> 赞同：0
> 
> 时间：2012-05-10T10:22:07.583
> 
> 标签：objective-c, macos, cocoa

这是我的代码的一部分：

我有一个由 stringWithFormat 形成的字符串，如下所示：

```
NSString * DestChoice = [NSString stringWithFormat:@"%@", Dest1String]; 
```

Dest1String 形成如下：

```
NSString * Dest1String = [NSString stringWithFormat:@"%lX", [Dest1OutField integerValue]]; 
```

Dest1OutField 是一个 NSTextField

当我在我的文本字段中输入“10”时，DestChoice 字符串的结果为“A”，因此我的代码正在运行。当我在我的文本字段中输入“11”时，DestChoice 字符串结果为“B”，这也很好。但是如果输入“31”我应该得到“1F”但我有一个“EXC_BAD_ACCESS”崩溃......

我不明白...如果有人可以照亮我的路... :)

提前比！

* * *

编辑：

所以，我总是被困住......我将我的代码编辑为“更容易理解”，我给你我使用的确切代码，而不是示例：

所以，我做了两个这样的字符串：

```
DestChoice = [NSString stringWithFormat:@"%lX", [DestField integerValue]];
SourceChoice = [NSString stringWithFormat:@"%lX", [SourceField integerValue]]; 
```

因此，用户以十进制值写入源/目标，但它们以十六进制形式存储在字符串中，然后我有一个按钮可以重新格式化源和目标，如下所示：

```
NSString * CommandReadyToSend  = [NSString stringWithFormat:@"X:0/%@,%@\r", DestChoice, SourceChoice]; 
```

我的代码正在工作，但是，奇怪的是，某些值在 CommandReadyToSend 部分产生了 EXC_BAD_ACCESS ... 示例：如果我在我的文本字段中写 1 => 我在 DestChoice 中收到 1（十六进制值）如果我在我的文本中写 10 field => 我在 DestChoice 中收到 A

但是如果我在文本字段中写 31，我应该得到 1F，但我得到一个 EXC_BAD_ACCESS... 与 29 相同（十进制值）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:28:03.557

```
NSString * DestChoice = [NSString stringWithFormat:stringWithFormat:@"%@%@", Dest1String]; 
```

您表示您想用 格式化两个对象`%@%@`，但您只提供一个对象 ( `Dest1String`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:45:32.480

我在您的代码中看到的唯一问题是

```
NSString * DestChoice = [NSString stringWithFormat:stringWithFormat:@"%@", Dest1String]; 
```

相反，您可以使用

```
NSString * DestChoice = [NSString stringWithString:@"%@", Dest1String]; 
```

除此之外，没有任何问题。我得到了正确的结果。

# c# - 在 C# 中隐藏 ZedGraph 中的数字

> ID：10532031
> 
> 赞同：0
> 
> 时间：2012-05-10T10:22:28.360
> 
> 标签：c#, zedgraph

我需要隐藏标有箭头的数字，如果可能的话，显示当前右侧的蓝色数字，现在红色数字在...
红色数字用于蓝线，我不需要它们我想隐藏它们...蓝色数字用于红色曲线，我需要它们在左侧...这在 Windows 窗体中可能吗？

![形象的](../Images/c6c7367214ced7395dae093ea798fbea.png)

# ruby-on-rails - 设计：允许用户注册为“UserName”但使用“用户名”登录

> ID：10532032
> 
> 赞同：10
> 
> 时间：2012-05-10T10:22:32.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

与大多数网站的工作方式相同，我将“UserNaMe”存储在数据库中，但让用户使用“用户名”登录。

这是一个相当明显和必要的功能，似乎很多人都问过它，但我一直绊倒的解决方案似乎与 Devise 自己的文档脱节。

例如，考虑这篇博文： http: [//anti-pattern.com/2011/5/16/case-insensitive-keys-with-devise](http://anti-pattern.com/2011/5/16/case-insensitive-keys-with-devise)

> [...]您可能遇到过这样的问题，即一些用户喜欢在他们的登录名（电子邮件和/或用户名）中以大写形式输入某些字母，但在他们尝试登录时希望它不区分大小写。不是不合理的要求[...]

凉爽的！这就是我想要的。

他的解决方案：

```
# config/initializers/devise.rb
Devise.setup do |config|
  config.case_insensitive_keys = [:email, :username]
end 
```

这就是我一直在寻找的解决方案。但这是该配置选项的文档：

```
# Configure which authentication keys should be case-insensitive.
# These keys will be downcased upon creating or modifying a user and when used
# to authenticate or find a user. Default is :email.
config.case_insensitive_keys = [ :username, :email ] 
```

特别是：“这些键将在创建/修改用户时被小写。” 换句话说，用户名在数据库中被小写。

核实：

```
User.create username: "UsErNaMe", password: "secret", email: "email@com.com"
#=> <User username="username"...> 
```

我错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T11:08:11.800

从[devise wiki](https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-sign-in-using-their-username-or-email-address)：您需要`find_first_by_auth_conditions`在模型中覆盖 devise 的方法。

活动记录示例：

```
def self.find_first_by_auth_conditions(warden_conditions)
  conditions = warden_conditions.dup
  if login = conditions.delete(:login)
    where(conditions).where(["lower(username) = :value OR lower(email) = :value", { :value => login.downcase }]).first
  else
    where(conditions).first
  end
end 
```

`OR lower(email) = :value`如果您也不需要通过电子邮件进行身份验证，则可以删除部分。

这样你就不需要列出它`username`，`case_insensitive_keys`它也不会在数据库中被小写。

# rest - Apache CXF REST 分段上传，编码异常

> ID：10532034
> 
> 赞同：3
> 
> 时间：2012-05-10T10:22:34.180
> 
> 标签：rest, cxf

我想使用多部分表单数据上传文件，但 URLDecoder 有问题。服务代码如下：

```
@POST
@Path("/document")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response storeTravelDocument(
        @Context UriInfo uriInfo,
        @FormParam(value = "IDNR") String idnr,
        @FormParam(value="DOCNR") String documentNr,
        @FormParam(value="ISSUE_DATE") String issueDate,
        @Multipart(value = "image", type="image/jpeg") InputStream pictureStream)
{.. 
```

我与三个客户进行了测试，例如放心：

```
given().
        formParam("IDNR", "A000000A").
        formParam("DOCNR", "00001").
        formParam("ISSUE_DATE", "14.06.2010").
        multiPart("image", new File(picturePath), "image/jpeg").
expect().
        statusCode(Response.Status.CREATED.getStatusCode()).
when().
        post("/document"); 
```

或 HttpClient：

```
 // build mulitpart entity
    MultipartEntity entity = new MultipartEntity();

    entity.addPart("IDNR", new StringBody("A000000A"));
    entity.addPart("DOCID", new StringBody("00001"));
    entity.addPart("ISSUE_DATE", new StringBody("14.06.2010"));

    FileBody fileBody = new FileBody(new File(picturePath), "image/jpeg");
    entity.addPart("image", fileBody);

    // build post request
    String uri = System.getProperty("service.url") + "/document"; 
    HttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(uri);
    httpPost.setEntity(entity);

    // execute request
    HttpResponse response = httpClient.execute(httpPost);
    int code = response.getStatusLine().getStatusCode();

    // validate
    assert code == Response.Status.CREATED.getStatusCode(); 
```

在所有情况下，我都会收到以下异常：

```
in escape (%) pattern - For input string: "¬ "
    at java.net.URLDecoder.decode(URLDecoder.java:192) ~[na:1.7.0_03]
    at org.apache.cxf.common.util.UrlUtils.urlDecode(UrlUtils.java:55) ~[cxf-api-2.6.0.jar:2.6.0]
    at org.apache.cxf.common.util.UrlUtils.urlDecode(UrlUtils.java:63) ~[cxf-api-2.6.0.jar:2.6.0]
    at org.apache.cxf.jaxrs.utils.HttpUtils.urlDecode(HttpUtils.java:81) ~[cxf-rt-frontend-jaxrs-2.6.0.jar:2.6.0]
    at org.apache.cxf.jaxrs.utils.FormUtils.populateMapFromMultipart(FormUtils.java:170) ~[cxf-rt-frontend-jaxrs-2.6.0.jar:2.6.0]
    at org.apache.cxf.jaxrs.utils.JAXRSUtils.processFormParam(JAXRSUtils.java:746) ~[cxf-rt-frontend-jaxrs-2.6.0.jar:2.6.0]
    at org.apache.cxf.jaxrs.utils.JAXRSUtils.createHttpParameterValue(JAXRSUtils.java:667) ~[cxf-rt-frontend-jaxrs-2.6.0.jar:2.6.0]
    at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameter(JAXRSUtils.java:625) ~[cxf-rt-frontend-jaxrs-2.6.0.jar:2.6.0]
    at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameters(JAXRSUtils.java:578) ~[cxf-rt-frontend-jaxrs-2.6.0.jar:2.6.0]
    at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.processRequest(JAXRSInInterceptor.java:238) ~[cxf-rt-frontend-jaxrs-2.6.0.jar:2.6.0]
    at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.handleMessage(JAXRSInInterceptor.java:89) ~[cxf-rt-frontend-jaxrs-2.6.0.jar:2.6.0]
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262) [cxf-api-2.6.0.jar:2.6.0]
    ... 25 common frames omitted
2012-05-10 12:07:54,873 [http-bio-8080-exec-5] ERROR org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver - Error occurred during error handling, give up!
org.apache.cxf.interceptor.Fault: URLDecoder: Illegal hex characters in escape (%) pattern - For input string: "¬ "
    at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:75) ~[cxf-api-2.6.0.jar:2.6.0]
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:322) [cxf-api-2.6.0.jar:2.6.0]
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:122) [cxf-api-2.6.0.jar:2.6.0]
    at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:211) [cxf-rt-transports-http-2.6.0.jar:2.6.0]
    at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:213) [cxf-rt-transports-http-2.6.0.jar:2.6.0]
    at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:154) [cxf-rt-transports-http-2.6.0.jar:2.6.0]
    at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:129) [cxf-rt-transports-http-2.6.0.jar:2.6.0]
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:187) [cxf-rt-transports-http-2.6.0.jar:2.6.0]
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:110) [cxf-rt-transports-http-2.6.0.jar:2.6.0]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641) [servlet-api.jar:na]
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:166) [cxf-rt-transports-http-2.6.0.jar:2.6.0]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) [catalina.jar:7.0.27]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169) [catalina.jar:7.0.27]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) [catalina.jar:7.0.27]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) [catalina.jar:7.0.27]
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) [catalina.jar:7.0.27]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) [catalina.jar:7.0.27]
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999) [tomcat-coyote.jar:7.0.27]
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565) [tomcat-coyote.jar:7.0.27]
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307) [tomcat-coyote.jar:7.0.27]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [na:1.7.0_03]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [na:1.7.0_03]
    at java.lang.Thread.run(Thread.java:722) [na:1.7.0_03]
Caused by: java.lang.IllegalArgumentException: URLDecoder: Illegal hex characters in escape (%) pattern - For input string: "¬ "
    at java.net.URLDecoder.decode(URLDecoder.java:192) ~[na:1.7.0_03]
    at org.apache.cxf.common.util.UrlUtils.urlDecode(UrlUtils.java:55) ~[cxf-api-2.6.0.jar:2.6.0]
    at org.apache.cxf.common.util.UrlUtils.urlDecode(UrlUtils.java:63) ~[cxf-api-2.6.0.jar:2.6.0]
    at org.apache.cxf.jaxrs.utils.HttpUtils.urlDecode(HttpUtils.java:81) ~[cxf-rt-frontend-jaxrs-2.6.0.jar:2.6.0]
    at org.apache.cxf.jaxrs.utils.FormUtils.populateMapFromMultipart(FormUtils.java:170) ~[cxf-rt-frontend-jaxrs-2.6.0.jar:2.6.0]
    at org.apache.cxf.jaxrs.utils.JAXRSUtils.processFormParam(JAXRSUtils.java:746) ~[cxf-rt-frontend-jaxrs-2.6.0.jar:2.6.0]
    at org.apache.cxf.jaxrs.utils.JAXRSUtils.createHttpParameterValue(JAXRSUtils.java:667) ~[cxf-rt-frontend-jaxrs-2.6.0.jar:2.6.0]
    at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameter(JAXRSUtils.java:625) ~[cxf-rt-frontend-jaxrs-2.6.0.jar:2.6.0]
    at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameters(JAXRSUtils.java:578) ~[cxf-rt-frontend-jaxrs-2.6.0.jar:2.6.0]
    at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.processRequest(JAXRSInInterceptor.java:238) ~[cxf-rt-frontend-jaxrs-2.6.0.jar:2.6.0]
    at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.handleMessage(JAXRSInInterceptor.java:89) ~[cxf-rt-frontend-jaxrs-2.6.0.jar:2.6.0]
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262) [cxf-api-2.6.0.jar:2.6.0]
    ... 25 common frames omitted 
```

我了解 CXF 尝试解码我​​的文件（图片）并由于无效字符而引发异常，但我想阻止这种解码。该文件应仅作为 UTF-8 流传输，未更改且未解码。谁能帮我？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T06:35:57.957

Sergey Beryozkin在 Apache CXF[邮件列表中解决了这个问题。](http://mail-archives.apache.org/mod_mbox/cxf-users/201205.mbox/browser)

总结一下：

*此声明发生的情况是表单有效负载处理器假定最后一个参数只是一个更普通的 multipart/form-data 参数。当您有一个“混合的”多部分/表单数据有效负载，包含简单的字符串名称/值对以及二进制部分时，最好避免使用@FormParam 或@Multipart 注释，只使用 MultipartBody 输入参数 - 它会提供对所有单个部分的类型安全访问。*

*用@Multipart 替换@FormParam 应该可以解决问题（作为引入MultipartBody 的替代方法），但是@FormParam 和@Multipart 的混合也应该可以理想地工作。将检查此问题。*

我选择用@Multipart 替换@FormParam，这很有效。

# c# - ListView 组标题单击 - 在 Windows 7 中禁用全选

> ID：10532039
> 
> 赞同：1
> 
> 时间：2012-05-10T10:22:46.753
> 
> 标签：c#, windows-7, .net-3.5

在 XP 中单击 ListView 的组标题时，没有任何反应。在 Windows 7 中单击 ListView 的组标题时，该组中的所有项目都被选中。由于我没有机器，我无法在 Windows Vista 上进行测试。

如何通过单击 Windows 7（或 Vista）中引入的组标题来禁用“全选”。

如果他们愿意，仍然应该允许用户选择多个甚至所有项目，而不是通过单击组标题。

不建议使用替代 ListViews（例如 ObjectListView）的答案将不胜感激！

我没有使用 WPF。

## 更新

作为测试，我尝试在 ListView 的鼠标向上事件中添加命中测试以查看是否单击了组标题以及是否取消选择所有项目。

在 XP 中运行时，这会执行所需的效果。在 Windows 7 中，它仍然选择该组中的所有项目！

## 更新 2

找到解决方案：[见我的回答](https://stackoverflow.com/a/11756545/1185053)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T09:41:10.680

我已经想通了。

希望有人会发现这很有用-

在[MSDN 上的这个线程中](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/eccdf58a-dd06-4ae3-908d-5f5863c01d64/)，有人试图创建一个用于单击组标题的事件。我已将其重新用于我的目的如下（[有关如何定义函数和常量，请参见链接](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/eccdf58a-dd06-4ae3-908d-5f5863c01d64/)）：

```
public class MyListView : ListView
{
    //
    //some other code here, i.e. define constants, PInvoke, etc (see link)
    //

    protected override void WndProc(ref Message m)
    {
        //the link uses WM_LBUTTONDOWN but I found that it doesn't work
        if (m.Msg == WM_LBUTTONUP) 
        {
            LVHITTESTINFO info = new LVHITTESTINFO();

            //The LParamToPOINT function I adapted to not bother with 
            //  converting to System.Drawing.Point, rather I just made 
            //  its return type the POINT struct
            info.pt = LParamToPOINT(m.LParam);

            //if the click is on the group header, exit, otherwise send message
            if (SendMessage(this.Handle, LVM_SUBITEMHITTEST, -1, ref info) != -1)
                if ((info.flags & LVHITTESTFLAGS.LVHT_EX_GROUP_HEADER) != 0)
                    return; //*
        }
        base.WndProc(ref m);
    }
} 
```

这允许识别单击，除非单击组标题。如果你想执行一些额外的功能，`//*`你可以放置一个事件等。

如果您需要更多功能，请使用`switch`on`m.Msg`而不是 using 。`if``WndProc`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:53:23.370

如果您不希望用户选择多个项目，则应将 MultiSelect 属性设置为 False。这在 XP 和 Vista+ 中一样是个问题，只需在单击第二项时按住 Shift 键即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:54:22.780

这是您可以执行的操作：

listView.HeaderStyle = ColumnHeaderStyle.Nonclickable;

# iphone - MFMailComposerViewController 未将 URL 识别为链接

> ID：10532046
> 
> 赞同：0
> 
> 时间：2012-05-10T10:23:05.660
> 
> 标签：iphone, ios, xcode, cocoa-touch, ios4

MFMailComposerViewController 在其消息正文中将 URL 显示为纯文本，而不是可点击的链接。无论如何我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:26:08.033

设置为 HTML 并`<a href="link">The link</a>`使用[`– setMessageBody:isHTML:`](http://developer.apple.com/library/ios/DOCUMENTATION/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html#//apple_ref/occ/instm/MFMailComposeViewController/setMessageBody%3aisHTML%3a). 平淡就是所谓的平淡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:35:30.090

```
 MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init];
    composer.mailComposeDelegate = self;

    [composer setMessageBody:message isHTML:YES];
    NSMutableString *body = [NSMutableString string];
    [body appendString:@"<h1>Hello User!</h1>\n"];
    [body appendString:@"<a href=\"http://www.mysite.com/path/to/link\">Click Me!</a>\n"];
    [composer setMessageBody:body isHTML:YES]; 
```

希望这对你有用。快乐编码:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T10:41:09.657

是的 这是可能的，你可以这样做：

```
MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init]; composer.mailComposeDelegate = self; 
[composer setSubject:subject]; 
[composer setMessageBody:message isHTML:YES]; 
//Message is just a NSString with HTML Content and you can have all the HTML Contents in it. 
```

# java - 什么时候使用maven依赖管理和依赖

> ID：10532049
> 
> 赞同：3
> 
> 时间：2012-05-10T10:23:15.070
> 
> 标签：java, maven, maven-2, build

什么时候在maven项目中使用依赖管理和依赖。我们正在将现有项目分解为 6 ​​个独立的模块。那些是

`Project-core`
`project-DAO`
`project-messages`
`project-services`
`project-testing`
`project-web`

我们计划为上述所有项目建立父级，并将公共依赖项放在那里。但是我们不清楚在哪里使用`<dependencyManagement>`and `<dependencies>`。请提出宝贵的建议。

谢谢，
阿尼尔库马尔 C

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:32:18.560

根据您的想法，我建议以下文件夹结构：

```
+-- ProjectParent
      +-- Project-core
      +-- project-DAO
      +-- project-messages
      +-- project-services
      +-- project-testing
      +-- project-web 
```

这导致有一个父（ProjectParent）应该包含dependencyManagement部分来定义具有适当版本的依赖项，如下所示：

```
 <dependencyManagement>
     <dependencies>
       <dependency>
          <groupId>testng</groupId>
          <artifactId>testng</artifactId>
          <version>6.3.1</version>
          <scope>test</scope>
       </dependency>
       ...
     </dependencies>
   </dependencyManagement> 
```

在每个模块中，您都需要父级引用父级：

com.company.project 项目父级 1.0.0-SNAPSHOT

在你刚刚定义的模块中

```
 <dependencies>
   <dependency>
      <groupId>testng</groupId>
      <artifactId>testng</artifactId>
   </dependency>
   ..
 </dependencies> 
```

使用来自父级的依赖项。

这将简化依赖关系的更新，因为版本位于单个点中，这意味着在父根中而不是分布到不同的模块中。

# windows-phone-7 - 更改 Rectangle.Fill 或 Grid.Background 的自定义颜色

> ID：10532056
> 
> 赞同：2
> 
> 时间：2012-05-10T10:24:05.133
> 
> 标签：windows-phone-7, windows-phone-7.1

我可以在 xaml 中更改自定义颜色矩形，例如：“#A125AA”。

但我不知道在哪里可以找到代码更改自定义颜色

我只知道颜色区域的代码有

```
this.gridgcolor.Background = new SolidColorBrush(Colors.Blue); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T10:45:38.663

您可以通过 RGB 设置颜色。这不像您在 xaml 中那样以十六进制完成。

```
Color color = new Color() { R = 255, G = 255, B = 255 };
Brush brush= new SolidColorBrush(color); 
```

您在示例中的十六进制值 #A125AA 也是 RGB R = A1, G = 25, B = AA

[您可以使用辅助方法](http://dotnetfollower.com/wordpress/tag/convert-hex-string-to-color/)转换这些值，以便将它们添加到您的 Color 对象。

如果你想使用名称，[这里](http://msdn.microsoft.com/en-us/library/system.windows.media.solidcolorbrush%28v=vs.95%29.aspx)还有很多与其名称匹配的 RGB 代码的列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:34:56.437

您可以直接在 XAML 中使用十六进制数，如下所示：-

```
 <Grid x:Name="ContentPanel"
          Grid.Row="1"
          Margin="12,0,12,0"
          Background="#A125AA"></Grid> 
```

# python - 在 Git 上与其他人共享脚本时如何处理第三方 Python 导入？

> ID：10532058
> 
> 赞同：0
> 
> 时间：2012-05-10T10:24:17.613
> 
> 标签：python, git, import

我制作了一个 Python 模块 (https://github.com/Yannbane/Tick.py) 和一个 Python 程序 (https://github.com/Yannbane/Flatland.py)。程序导入模块，没有它，它就无法工作。我打算让人们在运行程序之前下载这两个文件，但是，我有点担心。

在程序中，我添加了以下几行：

```
sys.path.append("/home/bane/Tick.py")
import tick 
```

`"/home/bane/Tick.py"`是我需要包含的模块的本地仓库的路径，但这显然与其他人不同！我怎样才能更好地解决这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:58:26.067

@Lattyware 的建议是一个可行的选择。但是，将核心依赖项与主程序绑定并不少见（例如，Django 和 PyDev 就是这样做的）。这很好用，尤其是在针对特定版本的库调整主代码时。

为了避免 Lattyware 在代码维护方面提到的麻烦，您应该研究一下 git [`submodules`](http://git-scm.com/book/en/Git-Tools-Submodules)，它恰好允许这种布局，保持代码版本控制的健全。

从您的目录结构看来，这两个文件都位于同一个目录中。这可能比它们可能是同一个[包](http://docs.python.org/tutorial/modules.html#packages)的两个模块更能说明问题。在这种情况下，您应该简单地添加一个名为该目录的空文件`__init__.py`，然后您的导入可以通过以下方式工作：

```
import bane.tick 
```

或者

```
from bane import tick 
```

哦，是的......你应该使用小写的模块名称（如果你要在 python 中编码，值得深入了解[PEP8 ！:)](http://www.python.org/dev/peps/pep-0008/)

！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:26:46.797

您可能想尝试将您的模块提交到[Python 包索引](http://pypi.python.org/pypi)，这样人们就可以轻松地将它 ( `pip tick`) 安装到他们的路径中，并且您可以直接导入它而无需将其添加到 python 路径中。

否则，我建议简单地告诉人们也下载该模块，并将其放在程序的子目录中。如果您真的觉得这太费力了，您可以将模块的副本放入程序的存储库中（当然，这意味着确保您保持两个版本都是最新的，这有点痛苦，尽管我想可能只使用符号链接）。

还值得注意的是，您的 repo 名称有点误导，大写通常很重要，因此您可能希望调用 repo`tick.py`以匹配模块和 python 命名约定。

# c# - 如何让 wcf 服务每次只接受 1 个客户端

> ID：10532060
> 
> 赞同：4
> 
> 时间：2012-05-10T10:24:18.733
> 
> 标签：c#, wcf

我有一个关于 WCF 服务的问题，它使客户端能够弄乱计算机文件（复制/粘贴/删除...等）。
服务一次应该只接受一个客户端，当另一个客户端已经连接时它不应该接受一个客户端，那么这个工作是什么配置？我正在使用 NetTcpBinding。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T10:29:38.983

这应该为你做：

[http://msdn.microsoft.com/en-us/library/system.servicemodel.description.servicethrottlingbehavior.maxconcurrentcalls.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.servicethrottlingbehavior.maxconcurrentcalls.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T11:11:24.953

您无需执行任何操作，因为默认服务行为是一次执行一个调用。这意味着如果 A 正在调用 X 方法并且 B 也想调用 X 方法，那么在 A 请求完成之前，B 请求将不会被处理。

但是，如果您认为即使在方法执行之后也没有人应该访问这些方法，那么您必须使用 Sessions 自己处理这个问题！

# javascript - JavaScript 比较数组

> ID：10532062
> 
> 赞同：0
> 
> 时间：2012-05-10T10:24:21.103
> 
> 标签：javascript, arrays

我有一个格式如下的数组：

```
var markers = [
    ['Title', 15.102253, 38.0505243, 'Description', 1], 
    ['Another Title', 15.102253, 38.0505243, 'Another Description', 2],
    ['Title 3', 15.102253, 38.0505243, 'Description 3', 3], 
]; 
```

然后我将一个查询字符串传递给页面（m = 1,2），该页面以逗号分隔，然后拆分以创建如下所示的数组：

```
['1', '2'] 
```

我需要做的是找到 ID (markers[i][4]) 来自查询字符串的所有“标记”。

实现这一目标的最佳方法是什么？理想情况下，我想创建一个与“标记”格式相同的第三个数组，但只显示查询字符串的结果。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:27:44.507

一种选择是使用嵌套循环：

```
var markers = [
    ['Title', 15.102253, 38.0505243, 'Description', 1], 
    ['Another Title', 15.102253, 38.0505243, 'Another Description', 2],
    ['Title 3', 15.102253, 38.0505243, 'Description 3', 3], 
];
var search = ['1', '2'];
var result = [];

for (var i = 0; i < search.length; i++)
    for (var j = 0; j < markers.length; j++)
        if (search[i] == markers[j][4]) {
            result.push(markers[j]);
            break;
        }

console.log(result); 
```

**演示：http:** [//jsfiddle.net/3TERD/](http://jsfiddle.net/3TErD/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:29:53.677

你不能在这里使用嵌套循环吗？

```
var filteredMarkers = [];

for(var i = 0; i < markers.length; i++) {

    for(var j = 0; j < queryStringArray.length; j++) {

        // this might need to be changed as your markers has index 4 as a number whereas the queryString array appears to be strings.
        if(markers[i][4] === queryStringArray[j]) {

            filteredMarkers.push(markers[i]);
            break;

        }

    }

} 
```

# android - 显示弹出窗口时更改背景颜色

> ID：10532063
> 
> 赞同：6
> 
> 时间：2012-05-10T10:24:25.710
> 
> 标签：android, popupwindow

我想在`PopupWindow`显示 a 时使背景变暗。就像 Dolphin Browser 一样——

**在弹出窗口之前**

![在显示 PopupWindow 之前查看背景颜色](../Images/17c5bcb0a0e49fb0ba87677dc85daf0c.png)

**弹出窗口之后**

![现在看到 PopupWindow 显示后的背景颜色。](../Images/91a2a1423a0d91c7af7d881899a097e5.png)

背景颜色比原来的颜色深。那么，我们该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T12:37:45.193

在您的 xml 文件中添加类似这样的内容，其宽度和高度为“match_parent”。

```
<RelativeLayout
        android:id="@+id/bac_dim_layout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#C0000000"
        android:visibility="gone" >
</RelativeLayout> 
```

在您的活动 oncreate

```
//setting background dim when showing popup
back_dim_layout = (RelativeLayout) findViewById(R.id.bac_dim_layout); 
```

最后在您显示弹出窗口时使其可见，并在退出弹出窗口时使其可见。

```
back_dim_layout.setVisibility(View.Visible);
back_dim_layout.setVisibility(View.GONE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:04:39.000

**如果您的弹出窗口是一项活动**，请尝试此代码，那么它将绝对有帮助。**在项目的values 文件夹**中创建一个 mystyle.xml 文件并进行这些更改。

```
<resources> 
   <style name="customStyle" parent="@android:style/Theme.Dialog">
     <item name="android:windowBackground">@android:color/transparent</item>
   </style>
</resources> 
```

**在menifest.xml**中进行此更改

 **```
<activity android:name="yourActivity" android:theme="@style/customStyle"></activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:33:11.393

如果我没记错的话……你可以用listview创建一个活动……然后把主题作为对话框放在它的清单中，像这样……

```
 <activity android:theme="@android:style/Theme.Dialog" /> 
```

这会使背景变暗..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-18T12:17:28.843

```
fun setBackgroundAlpha(activity: Activity, bgAlpha: Float) {
    val lp: WindowManager.LayoutParams = activity.getWindow().getAttributes()
    lp.alpha = bgAlpha
    activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND)
    activity.getWindow().setAttributes(lp)
} 
```**

# google-maps - 嗨，我想在我的谷歌地图中使用边框

> ID：10532064
> 
> 赞同：0
> 
> 时间：2012-05-10T10:24:28.187
> 
> 标签：google-maps, google-api

我在我的网页中使用谷歌地图，我想用边框突出显示特定的地方。任何人都可以通过提供如何设置边框的建议来帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:54:16.820

您可以在地图上放置一个`Rectangle`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#Rectangle)；[Developer's Guide 的 Rectangles 部分](https://developers.google.com/maps/documentation/javascript/overlays#Rectangles)提供了一个教程。

# c# - 如何将带有字符串的结构展平为字节数组并编组为 C++

> ID：10532069
> 
> 赞同：0
> 
> 时间：2012-05-10T10:24:56.190
> 
> 标签：c#, marshalling

我必须将以下结构编组为 C++。

```
typedef struct _MyType { 
    LPSTR    name1;
    LPSTR    name2;
} MyType; 
```

听起来很简单，只是它必须以非常特定的方式编组。调用者将传递给我一个字节数组，我必须将字符串放在数组的末尾，并将结构体放在开头，name1 和 name2 指向它们在数组中的位置。

例如，如果我们有一个名称 1 = "Spaceman" 和 name2 = "Spiff" 的 MyType，那么数组的最后 9 个字节将是 "Spaceman\0"，并且前面会是 "Spiff\0"。在数组的开头，第一个指针将指向（数组末尾的地址 - 长度（“Spaceman\0”）），第二个指针将指向另一个字符串。

我假设我可以使用 Marshal.Copy() 将字符串放在数组的末尾，但是我如何在开头做指针？？？？

谢谢，斯皮夫

# iphone - 日期选择器是否可以显示年/月/日+日期名称？

> ID：10532070
> 
> 赞同：5
> 
> 时间：2012-05-10T10:24:58.670
> 
> 标签：iphone, objective-c, ios5, ios4

是否可以将日期名称添加到日期选择器？例如拨号将显示：

（星期日）3 | 11 | 2012

有可能吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T11:30:48.153

I think you can not DayName(eg. Sunday) with Year-Month-Day until you not make it totally custom but you can get the day with date by following code may be It will help you.

Bind following two IBOutlet in Xib.

and bind method **-(IBAction)GetDateWithDay** with **DatePicker** with **ValueChange** attribut

in .h file

```
IBOutlet UIDatePicker* datePicker;
IBOutlet UILabel* lblDate; 
```

in .m file

```
-(IBAction)GetDateWithDay
{

     NSDate* dt = datePicker.date;
     NSDateFormatter* df = [[[NSDateFormatter alloc]init]autorelease];
     [df setDateFormat:@"yyyy-MM-dd"];

     NSCalendar *calendar = [NSCalendar currentCalendar];
     NSInteger units = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSWeekdayCalendarUnit;
     NSDateComponents *components = [calendar components:units fromDate:dt];
     NSInteger year = [components year];
     NSInteger day = [components day];

     NSDateFormatter *weekDay = [[[NSDateFormatter alloc] init] autorelease];
     [weekDay setDateFormat:@"EEEE"];

     NSDateFormatter *calMonth = [[[NSDateFormatter alloc] init] autorelease];
     [calMonth setDateFormat:@"MM"];

     lblDate.text = [NSString stringWithFormat:@"%@, %i-%@-%i",[weekDay stringFromDate:dt], day, [calMonth stringFromDate:dt], year]; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T11:04:45.340

看看这段代码：

[http://code4app.net/ios/FlatDatePicker/51cce1d76803fa4b0c000003](http://code4app.net/ios/FlatDatePicker/51cce1d76803fa4b0c000003)

[http://code4app.net/ios/Custom-DatePicker/51f667d36803fab73f000001](http://code4app.net/ios/Custom-DatePicker/51f667d36803fab73f000001)

希望这能解决你的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:37:56.560

阅读[此文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html)将对您有所帮助

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-10T10:44:10.850

您可以使用选项 DD。例如。

```
$.datepicker.formatDate('DD', new Date(2007, 1 - 1, 26)); 
```

希望这会帮助你。[UI/日期选择器/formatDate](http://docs.jquery.com/UI/Datepicker/formatDate)

# php - Azure for PHP：服务目录“ServiceDefinition.csx”中不存在“ServiceDefinition.rd”

> ID：10532094
> 
> 赞同：3
> 
> 时间：2012-05-10T10:26:26.583
> 
> 标签：php, azure

我正在尝试使用适用于 PHP 的 Windows Azure 命令行工具部署 PHP 应用程序，但无法生成 .cspkg 并且出现此错误：

```
Runtime Exception: 0: Default document “ServiceDefinition.rd” does not exist in Service directory “ServiceDefinition.csx”!
Error: Unexpected Exit 
```

我有以下链接以获取指南

[http://azurephp.interoperabilitybridges.com/articles/deploying-your-first-php-application-with-the-windows-azure-command-line-tools-for-php](http://azurephp.interoperabilitybridges.com/articles/deploying-your-first-php-application-with-the-windows-azure-command-line-tools-for-php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:37:32.177

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:01:20.143

The documentation you are using is OLD and had several issues in past so I would suggest using the latest supported way to create PHP application in Windows Azure:

Download new PHP SDK for Windows Azure which is tested with [Windows Azure SDK 1.6](http://azurephp.interoperabilitybridges.com/articles/setup-the-windows-azure-sdk-for-php). You can download the new PHP SDK from the link below:

[http://phpazure.codeplex.com/](http://phpazure.codeplex.com/)

Follow the documentation as described here:

[http://phpazure.codeplex.com/documentation](http://phpazure.codeplex.com/documentation)

# multithreading - Java 线程安全 v 从单独的线程显示对话框

> ID：10532101
> 
> 赞同：1
> 
> 时间：2012-05-10T10:26:50.827
> 
> 标签：multithreading, swing, repaint

当我第一次开始 Java 编程时，您好注意到我们的应用程序中有一些代码。我注意到它从一个单独的线程创建了一个对话框，但从来没有打过眼睑，因为它“似乎工作”。然后我通过我的代码包装了这个方法来显示对话框。

如下：

```
public class DialogModalVisibleThread
        extends Thread {
    private JDialog jDialog;
    public DialogModalVisibleThread(JDialog dialog, String dialogName) {
        this.setName("Set " + dialogName + " Visable");
        jDialog = dialog;
    }

    @Override
    public void run() {
       jDialog.setVisible(true);
       jDialog.requestFocus();
    }
} 
```

**用法：**

```
WarnUserDifferenceDialog dialog = new WarnUserDifferenceDialog( _tableDifferenceCache.size() );
DialogModalVisibleThread dmvt = new DialogModalVisibleThread( dialog, "Warn User About Report Diffs");
dmvt.start(); 
```

现在，据我所知，您永远不应该从单独的线程创建或修改摆动组件。所有更新都必须在事件调度线程上执行。当然这适用于上面的代码？

[维基百科上的 EDT](http://en.wikipedia.org/wiki/Event_dispatching_thread)

但是，上面的代码已经工作了。

但最近，出现了无数的重绘问题。例如，单击一个 JButton，然后调用 DialogModalVisibleThread 来显示一个对话框。它导致单击按钮旁边的按钮无法正确重绘。

重绘问题在我的机器上更常见，而不是其他开发人员的机器。另一位开发人员有一台笔记本电脑，其桌面扩展至 21 英寸显示器 - 显示器是他的主显示器。他运行的是 Java 版本 1.6.0_27 的 Windows 7。

我在装有 Windows 7 和 Java 版本 1.6.0_24 的笔记本电脑上运行。我有 2 个额外的显示器，我的桌面延伸到两个显示器上。

与此同时，我将升级到 Java 1.6 update 27。

我想知道上面的代码是否会导致重新绘制问题，或者还有其他人有相关的绘制问题吗？

有没有简单的方法来诊断这些问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T10:39:27.987

因此，您正在违反规则，遇到问题，并想知道这些问题是否可能是由于您违反规则而引起的。答案是肯定的。尊重规则！

要检测违规行为，您可能会对以下页面感兴趣：[http ://weblogs.java.net/blog/2006/02/16/debugging-swing-final-summary](http://weblogs.java.net/blog/2006/02/16/debugging-swing-final-summary)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T11:45:38.973

检查您的问题是否是由违反规则引起的最简单方法是修复它们（无论如何您都应该修复它们:-)

只需从要更新到 UI 的线程中使用 SwingWorker.invokeLater() 即可轻松遵守 Swing 的合同。这样的事情应该可以解决问题：

```
@Override
public void run() {
    SwingUtilities.invokeLater(new Runnable() {
        jDialog.setVisible(true);
        jDialog.requestFocus();        
        }
    });
} 
```

编辑：您应该将“jDialog”变量设为 final 才能正常工作。

# mysql - 何时使用 MySQL 全文搜索

> ID：10532102
> 
> 赞同：1
> 
> 时间：2012-05-10T10:26:52.653
> 
> 标签：mysql, full-text-search

我正在处理一个有 1500 条记录的表，我使用 'LIKE '%word%' 查询评论列，现在效果很好。但随着评论的日益增多。我正在考虑使用全文搜索或[http://sphinxsearch.com 之](http://sphinxsearch.com)类的工具。

当全文搜索或搜索引擎（spinxsearch）有效地完成工作时，表中的记录限制是多少我认为，字段的大小也很重要，我正在处理评论，所以它很好，但如果它有很长的文章，那么我可以实现全文搜索或sponxsearch的强大功能。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:32:02.150

当数据集（在您的情况下是整个表）无法放入内存时，索引（因此全文索引/狮身人面像/lucene）会产生很大的不同。

此外，在高并发、混合的写入/读取负载上，它会产生很大的不同，因为在您的查询中，必须扫描整个表，这涉及锁定、扫描重做日志等（取决于事务隔离等级）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:34:41.453

'LIKE' 使用正则表达式找到正确的行，这会变得非常非常慢非常快，切换到狮身人面像，非常好。

# javascript - 使对象属性在“this”范围内可用

> ID：10532106
> 
> 赞同：0
> 
> 时间：2012-05-10T10:27:02.633
> 
> 标签：javascript

我希望能够做到

```
console.log(some_value); 
```

代替

```
console.log(some_object.attributes.some_value); 
```

有没有办法使该对象的属性在当前的“范围”中可用（“范围”不是我要找的词，但我希望你明白我在问什么）。

我正在寻找类似于 Classic ASP 中的“with”语法的东西，您可以在其中执行

```
Dim myObject = Server.CreateObject(".......")
with myObject
  .method1()
  .property1 = "Test"
end with 
```

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:28:24.333

是的，您可以[`with`](https://developer.mozilla.org/en/JavaScript/Reference/Statements/with)为此使用声明：

```
with(some_object.attributes) {
    console.log(some_value);
} 
```

# java - 带重播按钮的简单记忆游戏

> ID：10532107
> 
> 赞同：2
> 
> 时间：2012-05-10T10:27:13.900
> 
> 标签：java, swing, jbutton, actionlistener

我想建立一个简单的记忆游戏。我想放一个重播按钮，再次播放记忆游戏。

我已经建立了一个名为的类`MemoryGame`和一个主类。

这是`ButtonListener`代码的一部分。

```
public void actionPerformed(ActionEvent e) {
        if (exitButton == e.getSource()) {
            System.exit(0);
        }
        else if (replayButton == e.getSource()) {
            //How can I declare it? 
        }
} 
```

如果我将重播按钮声明为：

```
new MemoryGame(); 
```

它工作正常，但它会弹出另一个窗口。

我想清除当前显示并返回开始，没有新窗口。我怎样才能做到这一点？

编辑 ：

我想我需要重写我的程序的代码，因为我的程序没有`init()`建议的方法，这是程序的初始状态。

我的 Java 知识非常有限，通常我会创建较少的方法并将大部分转储到方法中。

我会尝试重做我的程序。

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:01:26.923

尽管它可能很脏，但您可以做到这一点的一种方法是获取 MemoryGame 构造函数，并将其中的内容放入另一个方法中，然后在构造函数和按钮事件中调用该方法。

作为一个例子，我制作了以下类，并使用以前的技术进行了自我重置：

```
public class App extends JFrame{

public static void main(String[] args){
    new App();
}

public App(){
    init();
}

private JButton changeColorButton;
private JButton resetAppButton;
private JPanel panel;

private void init() {
    changeColorButton=null;
    resetAppButton=null;
    panel=null;

    this.setSize(200,400);
    this.setVisible(true);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    panel = new JPanel();
    panel.setBackground(Color.white);
    panel.setPreferredSize(new Dimension(200,400));

    changeColorButton = new JButton("Change");
    changeColorButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            panel.setBackground(Color.black);
            panel.repaint();
        }
    });
    changeColorButton.setPreferredSize(new Dimension(100,100));

    resetAppButton = new JButton("Reset");
    resetAppButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            init();
        }
    });
    resetAppButton.setPreferredSize(new Dimension(100,100));

    panel.add(changeColorButton);
    panel.add(resetAppButton);

    this.add(panel);

    this.validate();

}
} 
```

这个应用程序的作用是它有两个按钮。一个更改颜色，另一个重置应用程序本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:04:29.653

向我们`MemoryGame`展示您如何创建其初始状态的内部内容。实际上，人们在这里建议您的是拥有一个初始方法，该方法将设置`MemeoryGame`构造函数将调用的游戏状态。然后在游戏的重播按钮上调用此方法。

这些方面的东西：

```
void init(){
   this.x = 10;
   this.y = 10;
}

public MemoryGame(){
   init();
}

public void actionPerformed(ActionEvent e) {
   if (exitButton == e.getSource()) {
      System.exit(0);
   }
   else if (replayButton == e.getSource()) {
      init();
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:32:44.817

你应该考虑重构你的代码，这样 MemoryGame 类就不会创建 GUI，那么每当你初始化一个新游戏时你就不会重新创建它。

将程序逻辑与 UI 代码分开是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-22T05:42:55.957

你可以做的是你可以在你的 JFrame 上调用 dispose() 。这将摆脱它并像这样进入您的标题屏幕：

这是按钮代码

```
 public void actionPerformed(ActionEvent event)
    {

    if (closeButton = event.getSource())
    {

    System.exit(0);

    }

    if (playAgainButton = event.getSource())
    {

    Game.frame.dispose(); // Your class name, then the JFrame variable and call dispose

    }

    } 
```

这将起作用，但您在重置程序时可能会遇到一些问题。如果是这样，那么创建一个重置方法，您可以在其中重置所有变量并在单击 playAgainButton 时调用。例如：

```
 public void reset()
    {

    // Right here you'd reset all your variables

    // Perhaps you have a gameOver variable to see if it's game over or not reset it

    gameOver = false;

    } 
```

# ruby-on-rails-3 - 设计 Gem 和地理编码器 Gem

> ID：10532112
> 
> 赞同：0
> 
> 时间：2012-05-10T10:27:32.463
> 
> 标签：ruby-on-rails-3, devise

我正在使用地理编码器和设计 gem。我正在尝试在用户位置附近获取优惠券

**优惠券模型**

```
def index
  if params[:search].present?
    @coupons = Coupon.near([user_long, user_lat], 50, :order => :distance)
  else
     @coupons = Coupon.all
  end
end 
```

**应用程序助手**

我已经定义了 user_long 和 user_lat

```
 def user_long
           current_user.longitude
   end

   def user_lat
           current_user.latitude
   end 
```

**设计宝石**

我尝试使用设计 gem 助手来获取这样的值

**优惠券模型**

```
def index
  if params[:search].present?
    @coupons = Coupon.near([current_user.longitude, current_user.latitude], 50, :order => :distance)
  else
     @coupons = Coupon.all
  end
end 
```

我正在用这个撞墙和牢房。有人可以帮忙吗，我知道这是新手问题，但我无法解决，所以救了我的命？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T04:32:38.710

您在索引页面上看不到任何内容，因为您的 @coupons 数组为空：

```
@coupons = Coupon.near([current_user.longitude, current_user.latitude], 50, :order => :distance) 
```

在开发日志中（在运行 rails 服务器的同一窗口中，如果您从控制台运行 rails 服务器），您应该检查为 CouponsController#index 操作生成的 SQL 查询。

假设您像这样定义了“近”查询：

```
class Coupon
   scope :near, lambda { |longitude, latitude| some logic...
end 
```

您可以使用“rails 控制台”调试此“近”方法，如下所示：

```
rails console
> Coupon.near(10, 20) 
```

ETC..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T05:50:46.247

我的错误是我在那个纬度之前有经度，它带走了逻辑

这行得通。

```
def index
     @coupons = Coupon.near([current_user.latitude, current_user.longitude], 50, :order => :distance)

end 
```

# objective-c - 使用捏缩放但不使用变换方法

> ID：10532113
> 
> 赞同：1
> 
> 时间：2012-05-10T10:27:38.893
> 
> 标签：objective-c, ios

我正在尝试根据收缩和收缩在上下文中缩放绘图。这是完美的工作，但它总是会从原点（左上角）缩放。这不会给您在其他应用程序中获得的良好效果，而且真的很烦人。旧的缩放方法如下：

```
- (IBAction)handlePinchGesture:(UIGestureRecognizer *)sender {
    UIPinchGestureRecognizer *pinch = (UIPinchGestureRecognizer *)sender;

    if ([pinch scale] > zoomLevel + MAX_ZOOM_PER_CALL) {
        [pinch setScale: zoomLevel + MAX_ZOOM_PER_CALL];
    }

    if ([pinch scale] < zoomLevel - MAX_ZOOM_PER_CALL) {
        [pinch setScale:zoomLevel - MAX_ZOOM_PER_CALL];
    }

    float prevZoomLevel = zoomLevel;
    CGFloat factor = [pinch scale];
    zoomLevel = factor;

    if (zoomLevel < MIN_ZOOM_LEVEL) {
        zoomLevel = MIN_ZOOM_LEVEL;
    }

    if (zoomLevel > MAX_ZOOM_LEVEL) {
        zoomLevel = MAX_ZOOM_LEVEL;
    }

    //The next piece of code is added here

    [self setNeedsDisplay];
} 
```

实际缩放是在上下文中显示的零件的绘制方法中完成的。我正在考虑更改屏幕的原点（即要绘制的项目的相对原点），以便模拟这一点。但它根本不起作用，这就是我现在所拥有的：

```
float dZoomLevel = zoomLevel - prevZoomLevel;

if (dZoomLevel != 0) {
    CGPoint touchLocation = [pinch locationInView:self];
    CGPoint zoomedTouchLocation = CGPointMake(touchLocation.x * prevZoomLevel, touchLocation.y * prevZoomLevel);
    CGPoint newLocation = CGPointMake(touchLocation.x * zoomLevel, touchLocation.y * zoomLevel);

    float dX = ( newLocation.x - zoomedTouchLocation.x );
    float dY = ( newLocation.y - zoomedTouchLocation.y );

    _originX += roundf(dX);
    _originY += roundf(dY);
} 
```

原点取自 xml（所有元素中最小的 x 和 y）。它通常在 12000 到 20000 之间，但理论上可能在 0 到 100000 之间。

我不确定我是否已经说清楚了，但是如果您需要任何信息或不明白的地方，请问我，我会尽快回复。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:54:03.590

我自己找到了答案。在我的情况下需要放大的方式是从触摸点开始放大。因此，当 x 和 y 坐标被缩放时，请执行以下操作：

```
x -= pinchLocation.x;
y -= pinchLocation.y;

x *= zoomLevel;
y *= zoomLevel;

x += pinchLocation.x;
y += pinchLocation.y; 
```

或简而言之：

```
x = (x - pinchLocation.x) * zoomLocation + pinchLocation.x;
y = (y - pinchLocation.y) * zoomLocation + pinchLocation.y; 
```

现在 x 和 y 在正确的位置！！

# c# - 展开和折叠 winform

> ID：10532114
> 
> 赞同：3
> 
> 时间：2012-05-10T10:27:43.697
> 
> 标签：c#, winforms

我想做的是扩展和折叠我的winform的中间。我知道这里有类似的问题，但没有一个真正能满足我的需要。我已阅读有关使用 a 的信息`FlowLayoutPanel`，但无法使其正常工作。

我想要实现的一个例子是：

我有我的winform（示例）

![例子](../Images/3c7ec1cfe07c7d361dab5fd4ce7eba71.png)

当我单击`button1`它时，它应该隐藏中间的文本框并缩小表单以隐藏空间，反之亦然`button2`。无论哪种方式，`button3`都应保持在文本框显示或未显示的位置下方。

到目前为止，我的尝试要么只是隐藏文本框而不对表单做任何事情，要么比它应该缩小的多得多。我目前一直在设置`AutoSize`to`true`和`AutoSizeMode`to `GrowAndShrink`。

我见过可以执行此操作或类似操作的控件，但它们有箭头或小按钮来扩展表单，我只需要按钮即可。

是否有捷径可寻？

任何帮助表示赞赏。

**更新**

我尝试将高度设置为 0 并按照建议隐藏文本框，但它只是折叠表单的右侧而不是中间。

![截屏](../Images/3a664a7fe877f61a3aebf4cf89b70df9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:29:27.967

这必须使用面板和对接来完成。使用`AutoSize`是错误的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:33:07.090

您需要将表单的原始高度存储在一个变量中，以便以后再次展开时可以恢复它。此外，如果将 Button3 锚定到底部，则无需在调整大小期间处理它：

```
public partial class Form1 : Form {
  private int originalHeight;

  public Form1() {
    InitializeComponent();
    button3.Anchor = AnchorStyles.Left | AnchorStyles.Bottom;
  }

  protected override void OnLoad(EventArgs e) {
    originalHeight = this.Height;
    base.OnLoad(e);
  }

  private void button1_Click(object sender, EventArgs e) {
    textBox1.Visible = false;
    this.Height = originalHeight - textBox1.Height;
  }

  private void button2_Click(object sender, EventArgs e) {
    this.Height = originalHeight;
    textBox1.Visible = true;
  }
} 
```

将 留`AutoSize=false;`在表单上，​​因为您自己处理调整大小。

我会考虑使用一个按钮来处理表单的切换，因为当表单展开时 Button2 相当无用，反之亦然，如果表单折叠，Button1 相当无用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-14T08:48:30.193

我知道，我迟到了，但由于我刚刚解决了同样的问题，我想为您提供我的解决方案：

正如您已经提到的，您可以使用`FlowLayoutPanel`来完成这项工作。只需将其放入您的表格中即可。将 FlowDirection 设置为`TopDown`并以正确的顺序添加按钮和文本框。完成后，将`AutoSize`表单和 FlowLayoutPanel 设置为 true 并将 设置`AutoSizeMode`为`GrowAndShrink`。

**自动调整大小时防止宽度折叠**

您的问题是，如果您将 AutoSize 设置为 true 并禁用/隐藏您的文本框，宽度将会减小。发生这种情况是因为您的文本框是窗体上最宽的控件，如果它被隐藏，则宽度会减小到其余控件所需的宽度。为防止这种情况发生，只需将按钮放入与文本框宽度相同的面板控件中。现在，如果您的文本框被隐藏，宽度将保持所需的宽度。

**使用复选框展开/折叠**

我喜欢使用复选框来展开/折叠，而不是使用两个按钮。调整大小的整个编码将简化为将`checkbox1.Checked`属性的一个绑定行添加到`Visibility`文本框的属性：

> textbox1.DataBindings.Add("Visible", checkbox1, "Checked")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T10:28:42.320

隐藏控件并相应地设置 Height 属性。

# java - java: 例外：总是最终到达？

> ID：10532117
> 
> 赞同：0
> 
> 时间：2012-05-10T10:27:55.187
> 
> 标签：java, exception, exception-handling, runtimeexception, try-catch-finally

> **可能重复：**
> [finally 块是否总是运行？](https://stackoverflow.com/questions/464098/does-a-finally-block-always-run)

让我们想象以下场景：

```
public void myMethod() throws MyException
  try
  {
     // do something
     // an Exception (for example an individual written MyException which extends 
     // "Exception" is thrown here
  }
  catch (OtherException e)
  {
    // do something
  }
  finally 
  {
    // do something else
  }
} 
```

如果在 try 块中抛出“MyException”并且不会被捕获 - 它们最终会到达块，对吗？

如果它是一个运行时异常，会被抛出怎么办？会到达 finally 块吗？

是否存在无法到达 finally 块的情况？

感谢您的回答:-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T10:30:54.113

除非您有 vm 崩溃或调用 System.exit，否则始终调用 finally。

# c++ - C++ 生成组合键 WINAPI（无 MFC）

> ID：10532119
> 
> 赞同：0
> 
> 时间：2012-05-10T10:27:59.030
> 
> 标签：c++, winapi, keypress

我试图让我的应用程序输出一个组合键 ( ALT + D ) 以专注于 Internet Explorer 地址栏，但我无法实现所需的代码。我已经有一个方法来传递 1 个密钥：

```
void GenerateKey(int vk, BOOL bExtended) {

KEYBDINPUT  kb = {0};
INPUT       Input = {0};

/* Generate a "key down" */
if (bExtended) { kb.dwFlags  = KEYEVENTF_EXTENDEDKEY; }
kb.wVk  = vk;
Input.type  = INPUT_KEYBOARD;
Input.ki  = kb;
SendInput(1, &Input, sizeof(Input));

/* Generate a "key up" */
ZeroMemory(&kb, sizeof(KEYBDINPUT));
ZeroMemory(&Input, sizeof(INPUT));
kb.dwFlags  =  KEYEVENTF_KEYUP;
if (bExtended) { kb.dwFlags |= KEYEVENTF_EXTENDEDKEY; }
kb.wVk = vk;
Input.type = INPUT_KEYBOARD;
Input.ki = kb;
SendInput(1, &Input, sizeof(Input));

return;
} 
```

任何人都可以就如何实现所需的解决方案提供一些帮助吗？

**解决方案：**

我设法使用以下方法解决了这个问题：

```
void GenerateKeyCombination(int vk, int vk2, BOOL bExtended, BOOL bExtended2) {

KEYBDINPUT  kb = {0};
INPUT       Input = {0};
KEYBDINPUT  kb2 = {0};
INPUT       Input2 = {0};

// Generate a "key down" 1
if (bExtended) { kb.dwFlags  = KEYEVENTF_EXTENDEDKEY; }
kb.wVk  = vk;
Input.type  = INPUT_KEYBOARD;
Input.ki  = kb;
SendInput(1, &Input, sizeof(Input));

// Generate a "key down" 2
if (bExtended2) { kb2.dwFlags  = KEYEVENTF_EXTENDEDKEY; }
kb2.wVk  = vk2;
Input2.type  = INPUT_KEYBOARD;
Input2.ki  = kb2;
SendInput(1, &Input2, sizeof(Input2));

// Generate a "key up" 1
ZeroMemory(&kb, sizeof(KEYBDINPUT));
ZeroMemory(&Input, sizeof(INPUT));
kb.dwFlags  =  KEYEVENTF_KEYUP;
if (bExtended) { kb.dwFlags |= KEYEVENTF_EXTENDEDKEY; }
kb.wVk = vk;
Input.type = INPUT_KEYBOARD;
Input.ki = kb;
SendInput(1, &Input, sizeof(Input));

// Generate a "key up" 2
ZeroMemory(&kb2, sizeof(KEYBDINPUT));
ZeroMemory(&Input2, sizeof(INPUT));
kb2.dwFlags  =  KEYEVENTF_KEYUP;
if (bExtended2) { kb2.dwFlags |= KEYEVENTF_EXTENDEDKEY; }
kb2.wVk = vk2;
Input2.type = INPUT_KEYBOARD;
Input2.ki = kb2;
SendInput(1, &Input2, sizeof(Input2));

return;
} 
```

并这样称呼它：

```
 GenerateKeyCombination(0x12, 0x44, FALSE, FALSE); 
```

其中 0x12 是 ALT，0x44 是 D。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T22:05:28.900

将加速器映射添加到您的项目资源中，在运行时将其加载到您的应用程序中，并在您的消息循环中添加对 TranslateAccelerator 的调用，然后 TranslateMessage 和 DispatchMessage 有机会查看它。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms646373%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646373%28v=vs.85%29.aspx)供参考。

# java - JSP和WEBSTART的区别

> ID：10532128
> 
> 赞同：-1
> 
> 时间：2012-05-10T10:28:21.123
> 
> 标签：java, jsp, java-web-start

朋友们，以前我参与过**EJB-WEBSTART CLIENT**项目，现在我加入了使用**JSP**的项目。
我可以理解*WEBSTART*，它是*JNLP*的一个实现，将负责下载客户端 jar。
但是为什么我们需要 JSP？
为什么有两种不同的技术？
在什么环境下哪个最好？
两者一起工作吗？

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T10:32:14.163

Webstart 用于在客户端机器上下载和执行胖 Java 应用程序。

JSP 用于构建 Web 应用程序、生成 HTML 页面并在浏览器中运行。

您是否需要下载 5MB 的 jar 文件才能使用 Google、Amazon、EBay、Facebook 或任何 web 应用程序？如果没有，那么就不要使用 WebStart 来开发这种应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:32:25.403

因为有人更喜欢苹果而不是梨。

`Webstart`将在客户端的 JRE 中启动 Java 应用程序。（JAR 文件被传输到客户端）

`JSP`将呈现将在网络浏览器中显示的 HTML 页面。（HTML 文件将被传输到客户端）

这些是完全不同的技术栈。

# mysql - 为什么在 mongdb 中删除多个文档比在 mysql 中删除多行要快得多

> ID：10532133
> 
> 赞同：0
> 
> 时间：2012-05-10T10:28:33.973
> 
> 标签：mysql, mongodb, mongodb-php

我试图在 mongodb 和 mysql 中都数据。一行有字段 list_id，一个 list_id 可以有很多行。看起来在 mongdb 中删除多个文档比在 mysql 中删除多行要快得多。我在 mysql 中使用 innodb 引擎。Mysql 和 mongdb 在同一台服务器上。例如，

```
DELETE FROM contacts WHERE list_id = 100 
```

比

```
return self::remove(array('LISTID' => $listId), array('safe' => true)); 
```

我在 php 中为驱动程序使用安全模式，所以它应该等到它删除所有数据。

以下是有关 mongodb 集合的信息：

```
 "count" : 23456989,
        "size" : 4391452160,
        "avgObjSize" : 187.21295218239646,
        "storageSize" : 5727051776,
        "numExtents" : 32,
        "nindexes" : 2,
        "lastExtentSize" : 961069056,
        "paddingFactor" : 1.0099999999950207,
        "flags" : 1,
        "totalIndexSize" : 2983806672,
        "indexSizes" : {
                "_id_" : 787504144,
                "LISTID_1_EMAIL_1" : 2196302528
        },
        "ok" : 1
} 
```

例如，如果有 100K 行满足条件，在 mongodb 中大约快 30 倍，在 mysql 中大约需要 99 秒才能删除所有满足条件的 100K 行。

mysql 和 mongodb 都使用索引。

```
EXPLAIN SELECT *
FROM `subscribers`
WHERE list_id =118

id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  subscribers     ref     FK_list_id  FK_list_id  4   const   1 
```

我现在不在线进行此操作，我将数据放入队列并在后台执行，逐块删除数据。

但我想知道为什么删除的时间相差如此之大，大概是 20-30 次。在 mongodb 中删除是否更快，因为此操作在 mongodb 中不是原子的？

这是什么

```
SET PROFILING = 1;
DELETE FROM subscribers WHERE list_id = 118;
SHOW PROFILE FOR QUERY 1; 
```

显示删除 100K 行：

```
starting    0.000052
checking permissions    0.000000
Opening tables  0.000000
System lock     0.000000
init    0.000000
updating    84.382015
end     0.000006
Waiting for query cache lock    0.000002
end     0.000006
query end   0.035284
closing tables  0.000021
freeing items   0.000040
logging slow query  0.000001
logging slow query  0.000002
cleaning up     0.000002 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:44:21.067

没有数字和细节的毫无意义的问题。很明显，从 RDBMS 中删除内容可能会更昂贵，因为事务完整性、处理外键等比在 MongoDB 中更昂贵。特别是 MongoDB 是一劳永逸的，当操作未完成时您不会注意到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:08:57.640

您可以验证瓶颈是否是查询。这需要多长时间？

```
SELECT FROM contacts WHERE list_id = 100 
```

如果速度很快，那么一些常用的方法是

*   只要 rows_affected > 0，就按块删除

    删除联系人 WHERE list_id = 100 LIMIT 1000

*   删除索引（list_id 除外）、删除、重新创建索引。每次删除时，MySql 都必须重建索引。

*   添加逻辑删除列。在您的查询中尊重这一点。运行一个不时删除旧记录的 cron 作业。

    更新联系人 SET 已删除 = true WHERE list_id = 100

*   尝试另一个存储引擎 (MyISAM)

# spring - Spring security UsernamePasswordAuthenticationFilter 与 remember-me

> ID：10532140
> 
> 赞同：2
> 
> 时间：2012-05-10T10:29:08.157
> 
> 标签：spring, spring-security

我想将记住我添加到我的登录页面中，通过阅读[这里](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/remember-me.html)，它需要一个 UserDetailsS​​ervice。但是我的 UserDetailsS​​ervice 没有被调用，谁能指出我错了？谢谢。

spring-security.xml

```
<?xml version="1.0" encoding="UTF-8"?> <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:security="http://www.springframework.org/schema/security"
xmlns:p="http://www.springframework.org/schema/p" 
xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/security 
        http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<!-- configure Spring-Security  
auto-config is false.
use-expressions is true: see http://static.springsource.org/spring-security/site/docs/3.1.x/reference/el-access.html
access-denied-page: which page is redirected when login is denied
entry-point-ref: This attribute allows this behaviour to be overridden by defining a customized 
AuthenticationEntryPoint bean which will start the authentication process   
-->

<security:http auto-config="false" use-expressions="true" entry-point-ref="authenticationEntryPoint" >

    <!-- define how to handle the url /auth/login, primitAll is used since we defined use-expressions=true -->
    <security:intercept-url pattern="/login" access="permitAll"/>
    <security:intercept-url pattern="/search" access="hasRole('ROLE_USER')"/>

    <!-- The logout element adds support for logging out by navigating to a particular URL. 
    The default logout URL is /j_spring_security_logout, 
    but you can set it to something else using the logout-url attribute -->
    <security:logout 
            invalidate-session="true" 
            logout-success-url="/login" />

    <security:custom-filter ref="blacklistFilter" before="FILTER_SECURITY_INTERCEPTOR"/>
    <security:custom-filter ref="authenticationFilter" position="FORM_LOGIN_FILTER"/>
</security:http>

<!--  Custom filter to deny unwanted users even though registered -->
<bean id="blacklistFilter" class="com.myapp.filter.BlacklistFilter" />

<!-- Custom filter for username and password. we need to create another 4 beans -->
<bean id="authenticationFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter"
    p:rememberMeServices-ref="rememberMeServices"
    p:authenticationManager-ref="customAuthenticationManager"
    p:authenticationFailureHandler-ref="customAuthenticationFailureHandler"
    p:authenticationSuccessHandler-ref="customAuthenticationSuccessHandler" />

<!-- Bean 1: Custom authentication manager. -->
<bean id="customAuthenticationManager" class="com.myapp.manager.CustomAuthenticationManager" />

<!-- bean 2: set the default failure url here -->
<bean id="customAuthenticationFailureHandler" class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler"
    p:defaultFailureUrl="/login?error=true" />

 <!-- bean 3: set the default target url here -->
<bean id="customAuthenticationSuccessHandler" class="org.springframework.security.web.authentication.SimpleUrlAuthenticationSuccessHandler"
    p:defaultTargetUrl="/search" />

<!-- bean 4: remember me -->
<bean id="rememberMeServices"
    class="org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices">
        <property name="userDetailsService" ref="userDetailsService"/>
        <property name="key" value="myapp"/>
</bean>

<bean id="userDetailsService" class="com.myapp.service.UserDetailsServiceImpl" />

<bean id="authenticationEntryPoint"  class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint"
    p:loginFormUrl="/login"/>
<security:authentication-manager/></beans> 
```

谢谢，拉尔夫

我添加了过滤器，但是仍然没有调用UserDetailsS​​erviceImpl，有一个停止点。

`public UserDetails loadUserByUsername(String email) throws UsernameNotFoundException { logger.info("User details service is called"); return null; }`

现在的配置是：

```
<?xml version="1.0" encoding="UTF-8"?><beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:security="http://www.springframework.org/schema/security"
xmlns:p="http://www.springframework.org/schema/p" 
xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/security 
        http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<!-- configure Spring-Security  
auto-config is false.
use-expressions is true: see http://static.springsource.org/spring-security/site/docs/3.1.x/reference/el-access.html
access-denied-page: which page is redirected when login is denied
entry-point-ref: This attribute allows this behaviour to be overridden by defining a customized 
AuthenticationEntryPoint bean which will start the authentication process   
-->

<security:http auto-config="false" use-expressions="true" entry-point-ref="authenticationEntryPoint" >

    <!-- define how to handle the url /auth/login, primitAll is used since we defined use-expressions=true -->
    <security:intercept-url pattern="/login" access="permitAll"/>
    <security:intercept-url pattern="/search" access="hasRole('ROLE_USER')"/>

    <!-- The logout element adds support for logging out by navigating to a particular URL. 
    The default logout URL is /j_spring_security_logout, 
    but you can set it to something else using the logout-url attribute -->
    <security:logout 
            invalidate-session="true" 
            logout-success-url="/login" />

    <security:custom-filter ref="blacklistFilter" before="FILTER_SECURITY_INTERCEPTOR"/>
    <security:custom-filter ref="authenticationFilter" position="FORM_LOGIN_FILTER"/>
    <security:custom-filter ref="rememberMeFilter" position="REMEMBER_ME_FILTER"/>
</security:http>

<!--  Custom filter to deny unwanted users even though registered -->
<bean id="blacklistFilter" class="com.myapp.filter.BlacklistFilter" />

<!-- Custom filter for username and password. we need to create another 4 beans -->
<bean id="authenticationFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter"

    p:rememberMeServices-ref="rememberMeServices"
    p:authenticationManager-ref="customAuthenticationManager"
    p:authenticationFailureHandler-ref="customAuthenticationFailureHandler"
    p:authenticationSuccessHandler-ref="customAuthenticationSuccessHandler" />

<!-- Bean 1: Custom authentication manager. -->
<bean id="customAuthenticationManager" class="com.myapp.manager.CustomAuthenticationManager" />

<!-- bean 2: set the default failure url here -->
<bean id="customAuthenticationFailureHandler" class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler"
    p:defaultFailureUrl="/login?error=true" />

 <!-- bean 3: set the default target url here -->
<bean id="customAuthenticationSuccessHandler" class="org.springframework.security.web.authentication.SimpleUrlAuthenticationSuccessHandler"
    p:defaultTargetUrl="/search" />

<!-- bean 4: remember me -->
<bean id="rememberMeServices"
    class="org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices">
        <property name="userDetailsService" ref="userDetailsService"/>
        <property name="key" value="myapp"/>
</bean>

<bean id="userDetailsService" class="com.myapp.service.UserDetailsServiceImpl" />

<bean id="rememberMeFilter" class="org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter">
    <property name="rememberMeServices" ref="rememberMeServices"/>
    <property name="authenticationManager" ref="customAuthenticationManager" />
</bean>

<bean id="authenticationEntryPoint"  class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint"
    p:loginFormUrl="/login"/>

<security:authentication-manager alias="theAuthenticationManager"/></beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:49:37.863

您似乎忘记添加`RememberMeAuthenticationFilter`. - 看看你提到的文档中的例子，你会明白我的意思。

* * *

尝试首先将您的配置减少到非常默认的配置，例如[http://www.i-develop.be/blog/2010/02/04/spring-security-remember-me/](http://www.i-develop.be/blog/2010/02/04/spring-security-remember-me/)

# android - 如何为 ViewSwitcher 提供动画

> ID：10532141
> 
> 赞同：17
> 
> 时间：2012-05-10T10:29:09.557
> 
> 标签：android, android-animation

我创建了一个由 ViewSwitcher 组成的广告控件......

在那个控件中我有 ImageView 和 TextView 因为广告是文本或图像..

现在我必须给广告动画..

我试过以下

> 动画 inAnimation = AnimationUtils.loadAnimation(this, android.R.anim.slide_in_left); inAnimation.setDuration(1500);
> 
> 动画 outAnimation = AnimationUtils.loadAnimation(this, android.R.anim.slide_out_right); outAnimation.setDuration(1500);

我将它设置为切换器

> ViewSwitcher 切换器；
> 
> switcher.setInAnimation(inAnimation);
> 
> switcher.setOutAnimation(outAnimation);

但它不会工作..

请给我任何其他选择..或者如果使用上面的代码是错误的，那么如何使用它？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-08T18:53:17.623

Try setting animation inside xml as

```
<ViewSwitcher
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:inAnimation="@android:anim/slide_in_left"
    android:outAnimation="@android:anim/slide_out_right" > 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-02T03:55:13.407

除此之外 ：

照顾 switcher.showNext(); 或 switcher.showPrevious();

如果为切换器设置动画，则两个动作都会产生**相同**的动画。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T09:54:11.313

什么都没有发生，或者你有什么错误？你的意思是它不会工作？

你是用`switcher.showNext();`还是开始动画`switcher.showPrevious();`

希望它会有所帮助..干杯;）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-23T04:39:21.390

我正在提供问题中提到的替代方案。使用它，您将获得与 ViewPager 相同的动画。

您可以将 displayChild 设置为 1，而不是 showNext。

```
switcherView?.inAnimation = AnimationUtils.loadAnimation(baseActivity, R.anim.slide_in_right)
switcherView?.outAnimation = AnimationUtils.loadAnimation(baseActivity, R.anim.slide_out_left)
switcherView?.displayedChild = 1 
```

您可以将 displayChild 设置为 0，而不是 showPrevious。

```
switcherView?.inAnimation = AnimationUtils.loadAnimation(baseActivity, R.anim.slide_in_left)
switcherView?.outAnimation = AnimationUtils.loadAnimation(baseActivity, R.anim.slide_out_right)
switcherView?.displayedChild = 0 
```

动画文件：R.anim.slide_in_right：

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate
        android:duration="@android:integer/config_shortAnimTime"
        android:fromXDelta="100%p"
        android:toXDelta="0" />
</set> 
```

R.anim.slide_out_left

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate
        android:duration="@android:integer/config_shortAnimTime"
        android:fromXDelta="0"
        android:toXDelta="-100%p" />
</set> 
```

R.anim.slide_in_left

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate
        android:duration="@android:integer/config_shortAnimTime"
        android:fromXDelta="-100%p"
        android:toXDelta="0" />
</set> 
```

R.anim.slide_out_right

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate
        android:duration="@android:integer/config_shortAnimTime"
        android:fromXDelta="0"
        android:toXDelta="100%p" />
</set> 
```

每次设置displayChild，都需要设置动画。如果你不想要动画，你可以简单地忽略它。

PS：科特林代码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T07:17:00.997

一个“switcher.showNext();” 从最后一个布局和一个“switcher.showPrevious();” 从第一个布局给出错误。它必须类似于堆栈中的stackoverflow和stackunderflow情况。所以在调用“showNext（）”之前检查它不是您当前所在的最后一个布局，并且在调用“showPrevious（）”时您是否不在第一个布局中”。我遇到了这个简单的错误。抱歉发了这个帖子，我（菜鸟）还没有被授权评论帖子

# ruby-on-rails - 在用户模型上定义范围

> ID：10532148
> 
> 赞同：1
> 
> 时间：2012-05-10T10:29:46.423
> 
> 标签：ruby-on-rails, scope, case-insensitive, sql-like

当搜索“john doe”时，我想返回具有以下名称的用户：

“john doe”、“John Doe”、“John Doe Jr.”、“Mr. John doe”……（如果可能的话，还有“John Sr. Doe”）

到目前为止，我所做的是在我的 User 模型上定义了一个命名范围：

```
scope :by_name, lambda { |name| where('UPPER(name) LIKE ?', name.upcase) } 
```

然后在我的 /users/search 中：

```
name = params[:name]
@users = User.by_name(name).paginate(page: params[:page], per_page: 10) 
```

但这不起作用。我正在返回具有完全相同名称且区分大小写的用户 - 因此，如果存在名为“john doe”的用户，则“john doe”返回。我需要做什么？？

我正在使用带有 Rails 3.2.3 的 MySQL。

请帮忙！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:44:58.933

尝试使用

```
scope :by_name, lambda { |name| where('UPPER(name) LIKE %?%', name.upcase) } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T10:49:21.737

```
scope :by_name, lambda { |name| where('UPPER(name) LIKE ?', "%#{name.upcase}%") } 
```

# arrays - 短数组的最佳搜索方法

> ID：10532155
> 
> 赞同：0
> 
> 时间：2012-05-10T10:30:11.557
> 
> 标签：arrays, performance, search

我有很多短数组（10-20 个元素）。在每个数组中找到一个元素的最佳方法（我的意思是速度）是什么？二进制搜索、尝试、哈希表等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:46:48.307

衡量至少三种方法：

1.  线性搜索
2.  二进制搜索
3.  哈希表

针对不同的输入大小测量它们，并根据数组的大小在运行时选择最佳方法。

您还可以研究完美的散列，它需要大量的前期计算，只需执行一次即可实现非常快速的查找。

# c# - 从 c# 调用带有变体类型参数的 delphi dll

> ID：10532156
> 
> 赞同：1
> 
> 时间：2012-05-10T10:30:13.693
> 
> 标签：c#, delphi, dll

我有一个带有这个功能的delphi dll：

```
function writeRate(data: variant):Double ; stdcall; 
```

我使用此方法从 c# 调用函数：

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
private delegate double WriteRate(object data);
protected void UpdateRateChannel(string myData)
{   
    IntPtr pDll = NativeMethods.LoadLibrary("mydll.dll");

    IntPtr pAddressOfFunctionToCall = NativeMethods.GetProcAddress(pDll, "writeRate");
    WriteRate writeRate = (WriteRate)Marshal.GetDelegateForFunctionPointer(pAddressOfFunctionToCall, typeof(WriteRate ));

    double response = writeRate(myData);

    bool result = NativeMethods.FreeLibrary(pDll);
} 
```

但我得到了这个例外：

```
PInvokeStackImbalance was detected 
```

我如何调用dll？我认为问题出在变体类型中。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T10:45:52.410

`stdcall`在 Delphi 代码中匹配[`CallingConvention.StdCall`](https://msdn.microsoft.com/en-us/library/system.runtime.interopservices.callingconvention(v=vs.110).aspx)C#。您应该修复您的委托定义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T11:02:54.473

如果 Delphi 函数被声明为 is `stdcall`，为什么在 C# 中将其声明为`cdecl`？

这就是堆栈不平衡的原因。更改您的 C# 声明以使用`stdcall`约定来匹配 Delphi 声明。

```
[UnmanagedFunctionPointer(CallingConvention.StdCall)]
private delegate double WriteRate(object data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:47:56.620

C# 中的 Variant 可能与 Delphi 中的普通 Variant 不兼容。改用 Delphi 的 OleVariant。

# java - 从 java 传递的 c 中的打印数组：为什么不打印数组？

> ID：10532160
> 
> 赞同：0
> 
> 时间：2012-05-10T10:30:37.560
> 
> 标签：java, c, arrays, java-native-interface

以下*java*代码段调用了一个*c*函数：

*Java 代码*

```
 String s[] = new String[10];
    for(int i=0;i<10;i++) {
        s[i] = "s";
    }
    o.printArrayLength(s); // prints the array length from c code 
```

*C代码：*

```
void Java_Package_CallMethodOfSuperClass_printArrayLength
    (JNIEnv *env, jobject obj, jobjectArray arr) {

jsize size = (*env)->GetArrayLength(env,arr);
printf("\n");
printf("Size of array from C : ");
printf("%d",size);
jcharArray chrArr = (*env)->GetCharArrayElements(env,arr,NULL);
char Arr[11];
strcpy(Arr,chrArr);
int i = 0;
printf("Now printing the array declared in java from c :");
printf("SIZE SIZE SIZE SIZE : %d",size);
for(i=0;i<size;i++) {
    printf("Inside for loop !");
    printf("%s",Arr[i]);
}
     //jobjectArray obArr = (*env)->NewObjectArray(env,size,(*env)->FindClass(env,"[L"),NULL);
    //(*env)->SetObjectArrayElement(env,obArr,0,chrArr);
} 
```

发生上述情况时，我看到以下输出：

```
Size of array from C : 10
Now printing the array declared in java from c :
SIZE SIZE SIZE SIZE : -549339085 // What the heck ! 
```

为什么我得到的大小值不同于 10。值 10 之前打印了 1 行。

接下来，如果我将 for 循环中的检查保持为 10，那么数组也不会被打印。为什么是这样 ？相反，我得到一个致命错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T10:34:49.183

你应该观察你的编译器警告，其中应该有几个。此代码已损坏。

您正在声明一个包含 11 个字符 ( `Arr`) 的数组，但将其视为包含 10 个字符串的数组。C 中的字符串表示为指向`char`. 您`strcpy()`很可能会覆盖`Arr`，这会导致 的值发生`size`变化。

# android - 如何在listview android中通过单击名称显示详细数据联系人？

> ID：10532161
> 
> 赞同：0
> 
> 时间：2012-05-10T10:30:39.090
> 
> 标签：android, contacts, android-contacts, simplecursoradapter, contactscontract

联系人管理器.java

```
protected void onListItemClick(ListView l, View v, int position, long id)
{
    super.onListItemClick(l, v, position, id);
    Intent i = new Intent(this, ContactEditor.class);
    String projection = new String(ContactsContract.Contacts._ID);
    i.putExtra(projection, ContactsContract.Contacts._ID);
    startActivityForResult(i, 2);
} 
```

联系人编辑器.java

```
private void populateFields(){
    if (mRowId != null)
    {
        Cursor address = mDbHelper.fetchContact(mRowId);
        startManagingCursor(address);
        mContactNameEditText.setText(address.getString(address.getColumnIndexOrThrow(ContactsContract.Contacts.DISPLAY_NAME)));
        mContactPhoneEditText.setText(address.getString(address.getColumnIndexOrThrow(ContactsContract.CommonDataKinds.Phone.NUMBER)));

    }
}

public Cursor fetchContact(long rowId)throws SQLException
{
    Cursor cursor = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null); 
    if (cursor != null)
    {
        cursor.moveToFirst();
    }
     return cursor; 
} 
```

我不知道如何用在 ContactManager.java 的列表视图中选择的名称填充 mContactNameEditText(EditText) 是否有另一种方法可以通过单击列表视图中的名称来获取联系人详细信息，例如：姓名、电话等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:01:26.073

```
public void readContacts(){
        ContentResolver cr = getContentResolver();
        Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
               null, null, null, null);

        if (cur.getCount() > 0) {
           while (cur.moveToNext()) {
               String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
               String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
               if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                  // System.out.println("name : " + name + ", ID : " + id);

                   // get the phone number
                   Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,
                                          ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",
                                          new String[]{id}, null);
                   while (pCur.moveToNext()) {
                         String phone = pCur.getString(
                                pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                  //       System.out.println("phone" + phone);
                   }
                   pCur.close();

                   get email and type

                  Cursor emailCur = cr.query(
                           ContactsContract.CommonDataKinds.Email.CONTENT_URI,
                           null,
                           ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?",
                           new String[]{id}, null);
                   while (emailCur.moveToNext()) {
                       // This would allow you get several email addresses
                           // if the email addresses were stored in an array
                       String email = emailCur.getString(
                                     emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                       String emailType = emailCur.getString(
                                     emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE));

                     System.out.println("Email " + email + " Email Type : " + emailType);
                   }
                   emailCur.close();

                   // Get note.......
                   String noteWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
                   String[] noteWhereParams = new String[]{id,
                   ContactsContract.CommonDataKinds.Note.CONTENT_ITEM_TYPE};
                           Cursor noteCur = cr.query(ContactsContract.Data.CONTENT_URI, null, noteWhere, noteWhereParams, null);
                   if (noteCur.moveToFirst()) {
                       String note = noteCur.getString(noteCur.getColumnIndex(ContactsContract.CommonDataKinds.Note.NOTE));
                     System.out.println("Note " + note);
                   }
                   noteCur.close();

                   //Get Postal Address....

                   String addrWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
                   String[] addrWhereParams = new String[]{id,
                       ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE};
//              Cursor addrCur = cr.query(ContactsContract.Data.CONTENT_URI,
//                      null, null, null, null);
              Cursor addrCur = cr.query(ContactsContract.Data.CONTENT_URI,
                      null, addrWhere, addrWhereParams, null);

                   while(addrCur.moveToNext()) {
                       String poBox = addrCur.getString(
                                    addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.POBOX));
                       String street = addrCur.getString(
                                    addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.STREET));
                       String city = addrCur.getString(
                                    addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.CITY));
                       String state = addrCur.getString(
                                    addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.REGION));
                       String postalCode = addrCur.getString(
                                    addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.POSTCODE));
                       String country = addrCur.getString(
                                    addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.COUNTRY));
                       String type = addrCur.getString(
                                    addrCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.TYPE));

                       // Do something with these....

                   }
                   addrCur.close();

                   // Get Instant Messenger.........
                   String imWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
                   String[] imWhereParams = new String[]{id,
                       ContactsContract.CommonDataKinds.Im.CONTENT_ITEM_TYPE};
                   Cursor imCur = cr.query(ContactsContract.Data.CONTENT_URI,
                           null, imWhere, imWhereParams, null);
                   if (imCur.moveToFirst()) {
                       String imName = imCur.getString(
                                imCur.getColumnIndex(ContactsContract.CommonDataKinds.Im.DATA));
                       String imType;
                       imType = imCur.getString(
                                imCur.getColumnIndex(ContactsContract.CommonDataKinds.Im.TYPE));
                   }
                   imCur.close();

                   // Get Organizations.........

                   String orgWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
                   String[] orgWhereParams = new String[]{id,
                       ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE};
                   Cursor orgCur = cr.query(ContactsContract.Data.CONTENT_URI,
                               null, orgWhere, orgWhereParams, null);

                   System.out.println("Organization");

                   if (orgCur.moveToFirst()) {
                       String orgName = orgCur.getString(orgCur.getColumnIndex(ContactsContract.CommonDataKinds.Organization.COMPANY));
                       String title = orgCur.getString(orgCur.getColumnIndex(ContactsContract.CommonDataKinds.Organization.TITLE));

                       System.out.println("Organization = "+ orgName);
                       System.out.println("Title = "+ title);
                   }
                   orgCur.close();
               }
           }
      }
   } 
```

# macos - 为什么我们不能在 Mac 上运行 Visual Basic 应用程序？

> ID：10532163
> 
> 赞同：1
> 
> 时间：2012-05-10T10:30:53.023
> 
> 标签：macos, vb6

为什么我们不能在 Mac OS 中运行 VB6 应用程序？我知道 Mac 没有 VB 运行时，有人可以进一步解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T10:57:49.070

正如你所说，MAC 没有 VB6 运行时——鉴于 VB6 严重依赖 COM，而 Mac OS 是一个类似 unix 的操作系统，我可以理解为什么它很难移植（尽管并非[不可能](http://msdn.microsoft.com/en-us/library/aa260790%28v=vs.60%29.aspx)）——控制库必须也不同，因为平台上的用户界面在某些地方是完全不同的。我从根本上怀疑，努力与收益从来没有高到足以完成它，但这只是猜测。由于 MS 前段时间在 Windows 上放弃了对 VB6 的支持，我不希望它现在出现在 Mac 上。

有一个来自 Real Software 的类似 VB 的工具，名为[Real Studio](http://www.realsoftware.com/realstudio/vbdevelopers.php)，显然可以在 Mac 上运行，所以如果问题的原因是您拥有 VB6 技能并且正在寻求为 Mac 平台进行开发，那么这可能是一个可能的解决方案。

而且，由于您使用 VBA 标记...VBA 在 MS Office 2011 产品中可用，尽管您可能必须在两个平台上进行稍微不同的处理（您可以在 MAC 上的 Excel 中从 VBA 调用 applescript）。

# javascript - Facebook UI 抓取区域设置（位置）

> ID：10532165
> 
> 赞同：0
> 
> 时间：2012-05-10T10:30:55.613
> 
> 标签：javascript, jquery, facebook, facebook-graph-api, fb.ui

除了使用 Graph API 来获取区域设置并根据国家/地区显示内容外，我将如何做到这一点？

```
FB.login(function(response) {
             if data.get('user').get('locale') = "en_GB" {
                $("#footer a").text("URL HERE");
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:35:12.660

如果您使用 facebook javascript sdk 对用户进行身份验证，那么您会收到用户的签名请求，如[签名请求指南](http://developers.facebook.com/docs/authentication/signed_request/)中所述：

> 使用 JS SDK 进行身份验证时，authResponse 对象包含一个 signed_request 属性，用于传输有关经过身份验证的用户的信息。

签名的请求具有用户字段，即：

> 一个 JSON 对象，包含当前用户的语言环境字符串、国家字符串和年龄对象（包含年龄的最小和最大数字范围）

即使用户尚未对您的应用进行身份验证，您也应该获取区域设置值，以便您可以显示与其匹配的内容。

* * *

# 编辑

您有几种获取*authResponse*的方法，其中最基本的是使用[FB.login](http://developers.facebook.com/docs/reference/javascript/FB.login/)，如下所示：

```
FB.login(function(response) {
    if (response.authResponse) {
        console.log(response.authResponse);
    }
    else {
        console.log(response);
    }
}); 
```

# c# - 用于 .Net 的 Blackberry Messenger 或 Whatsapp API？

> ID：10532166
> 
> 赞同：2
> 
> 时间：2012-05-10T10:31:12.197
> 
> 标签：c#, .net, vb.net, blackberry, whatsapp

我想知道是否有适用于 C# 或 VB.net 的 Blackberry Messenger 或 Whatspp 的 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:43:35.397

WhatsApp 目前绑定到有电话号码但不提供 SDK 的移动设备

关于黑莓的事情，你可能想看看这篇文章： http: [//supportforums.blackberry.com/t5/Product-Management-The/Blackberry-Messenger-HELP-CCC/td-p/1551543](http://supportforums.blackberry.com/t5/Product-Management-The/Blackberry-Messenger-HELP-C-C-C/td-p/1551543)从那里发布的内容来看似乎目前有类似的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T05:46:49.877

github上的whatsapp api .net怎么样

[https://github.com/perezdidac/WhatsAP](https://github.com/perezdidac/WhatsAP) ...

我不测试它

还有另一个api（whatsapp api php）

Dídac Pérez Parera 的 PHP 接口 WhatsAPI for PHP：

[https://github.com/perezdidac/WhatsAPINet](https://github.com/perezdidac/WhatsAPINet)

# bash - bash：将预先保存的变量加载到 gnuplot cmd 加载

> ID：10532168
> 
> 赞同：1
> 
> 时间：2012-05-10T10:31:16.577
> 
> 标签：bash, gnuplot

我的意图是`i`在循环中加载变量 - 我想让它在这个循环中可用。当前状态是 gnuplot`i`从第一个 echo 加载 var 作为字符串而不是 var。

```
SPEED=5

echo "plot '< head -n \"\$((SPEED*i))\" `echo ${INFILE}`' using 1:3 ;">> file.plt

for ((i=1;i<="$FRAMES";i++))                                     
do      
    echo  " 
        load '`echo ${file.plt}`';  
        " | gnuplot
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:03:08.543

我认为您可能可以直接在 gnuplot 中完成所有这些操作......

```
if(! exists("N")) N=0
FRAMES=10
FILE='myfile.plt'
SPEED=5
f(i)=sprintf("< head -n %d ".FILE,i+SPEED)
plot f(N) using 1:3
if(N < FRAMES) N=N+1
if(N < FRAMES) reread 
```

* * *

Gnuplot 4.6 使这更容易：

```
do for [N=1:10]{
   FILE='myfile.plt'
   SPEED=5
   f(i)=sprintf("< head -n %d ".FILE,i+SPEED)
   plot f(N) using 1:3 
```

}

* * *

而不是 using `head`，您可能可以使用`every`datafile 修饰符（`help every`有关详细信息）。我认为类似于以下内容：

```
NPT=N+SPEED
plot FILE every ::::NPT using 1:3 
```

# ruby-on-rails - Rails 3.2.x remote=>true 仍然会重新加载页面

> ID：10532169
> 
> 赞同：4
> 
> 时间：2012-05-10T10:31:19.047
> 
> 标签：ruby-on-rails, ajax

我一直在搜索，无法弄清楚为什么这不起作用。

我正在尝试测试一个非常基本的 ajax 操作。这是我的代码：

控制器：

```
def commit
    respond_to do |format|
        format.html { redirect_to :action => "index" } # see note 1
        format.js { render :layout => false } # see note 2
        format.js { render :nothing => true } 
    end
end 
```

看法：

```
<%= link_to "commit", :action => "commit", :remote => true %>
<%= form_tag( :action => "commit", :remote => true, :method => :post) do %>
     <%= submit_tag "commit" %>
<% end %>

<div id='message'></div> 
```

提交.js.erb

```
console.log('committed');
$('#message').html("committed"); 
```

问题是我会使用 commit 方法，但是页面会重新加载，这违背了 remote=>true 的观点而且 commit.js 似乎从未被调用过。

注意 1：如果我排除这一行，我会得到 /commit 的空白页。包含它会使页面重新加载
注2：我已经尝试了其他SO帖子建议的这两种方法
注3：我已经尝试过使用link_to和form_tag

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:08:18.950

你为什么放两条线？

```
 format.js { render :layout => false } # see note 2
    format.js { render :nothing => true } 
```

删除第二个！

代替：

```
<%= link_to "commit", :action => "commit", :remote => true %> 
```

和：

```
<%= link_to "commit", commit_path, :remote => true %> 
```

* * *

与表格相同：

做你的：

```
<%= form_tag( :action => "commit", :remote => true, :method => :post) do %> 
```

作为：

```
<%= form_tag(commit_path, :remote => true) do %> 
```

注意：`POST`是默认行为，您可以从`form_tag`.

# java - AWS ec2 上的 java servlet

> ID：10532170
> 
> 赞同：1
> 
> 时间：2012-05-10T10:31:23.117
> 
> 标签：java, eclipse, servlets, amazon-ec2

我正在写一个`client-server`应用程序。
客户端应用程序将在 android 设备上运行，我使用`ec2`with`tomcat6`作为服务器。我写了一个服务器应用程序，我想在服务器上不断运行。
我该怎么做？
这是用 实现的`servlet`，如何实现的？另外，我不确定，一旦服务器启动，谁启动服务器应用程序？

我对 servlet 的工作原理有基本的了解，我创建了一个通过页面`http servlet`向数据库 () 添加行的方法。`RDS``html`

# c# - 如何在解析为XElement之前替换字符串中的所有&、<、>？

> ID：10532171
> 
> 赞同：1
> 
> 时间：2012-05-10T10:31:27.157
> 
> 标签：c#, xml, regex, xml-parsing

我有这样的字符串

```
"<root><text>My test is > & < </text></root>" 
```

实际上这是正确的 xml，除了 &、<、> 符号。

`<root><text>My test is &gt; &amp; &lt; </text></root>`在使用 XElement.Parse(str); 转换之前，我需要将其转换为

如何进行这种转换？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T10:44:20.920

`new XElement`如果您使用而不是，XElement 将自动转义文本`XElement.Parse()`：

LINQPad 片段：

```
var str = "<root><text>My test is > & < </text></root>";
var element = new XElement("element", str);
element.Dump(); 
```

输出：

```
<element>&lt;root&gt;&lt;text&gt;My test is &gt; &amp; &lt; &lt;/text&gt;&lt;/root&gt;</element> 
```

**编辑**：我只是重新阅读了这个问题，并意识到这不会产生所需的输出。

您遇到的问题是您传入的 XML 字符串根本上是无效的。如果你可以控制源，那么你应该在那里修复它。如果没有，则没有简单的方法可以修复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:38:04.303

这几乎不可能可靠地实现。您应该从源头纠正此问题。如果您控制插入“My test is > & <”字符串的系统，那么您应该在插入之前转义该字符串。`HttpUtility.HtmlEncode`是这样做的合理方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T10:39:26.630

不要用用户文本替换变量（这是 XML 注入 - 有问题，不安全）。用转义文本替换它们。这是一个 XML 转义函数：http: [//msdn.microsoft.com/en-us/library/system.security.securityelement.escape%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/system.security.securityelement.escape%28VS.80%29.aspx)

这就像您也可以使用 HTML 一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T11:27:20.343

这是“除 xyz 之外的 XML”的想法可能需要更仔细地研究。为了正确解决这个问题，您需要为您称为“XML 除外 xyz”的语言定义一个语法，然后您需要编写一个解析器来分析符合该语法的文档；此解析器的输出可以是输入的 XML 表示。这一切都是可行的。不容易，但可行。当然，使用像 XML 这样的标准的好处是您可以获得现成的解析器，而如果您发明自己的语法，那么您必须编写自己的解析器。

为您的语言编写一个好的解析器非常耗时，尤其是因为需要进行大量测试。编写一个经过糟糕测试的糟糕解析器可能很容易，这也是许多糟糕的程序员会做的事情。在这种情况下，优秀的软件工程师会认识到符合标准的好处。

# sql-server - 为什么插入命令会删除数据库中的旧行

> ID：10532172
> 
> 赞同：0
> 
> 时间：2012-05-10T10:31:27.907
> 
> 标签：sql-server, insert, command

我正在尝试使用该`insert`命令在数据库中添加一行。

它成功添加了行，但是执行命令后数据库中的旧行被删除了！ 

```
Dim connetionString As String
        Dim cnn As SqlConnection
        Dim cmd As SqlCommand
        Dim sql As String
        connetionString = "Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Datab1.mdf;Integrated Security=True;User Instance=True"

        sql = "INSERT INTO Table1 VALUES ('e', 'e')"    

        cnn = New SqlConnection(connetionString)
        Try
            cnn.Open()
            cmd = New SqlCommand(sql, cnn)
            cmd.ExecuteNonQuery()    

            cmd.Dispose()
            cnn.Close()
            MsgBox(" ExecuteNonQuery in SqlCommand executed !!")
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try 
```

怎么了 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:33:48.450

查找在此表上创建的触发器，该触发器导致删除旧行。

![在此处输入图像描述](../Images/6b9e5fe3971a4ba4509d223e1a26c54f.png)

如果您想快速列出数​​据库中具有触发器的表，请执行以下操作：

```
USE [YourDB]

SELECT

OBJECT_NAME(parent_id) AS TableName,

name AS TriggerName,

create_date AS CreationDate,

modify_date AS ModifyDate

FROM sys.triggers 
```

# mysql - 如何使用 Komodo MySQL 插件删除表？

> ID：10532178
> 
> 赞同：1
> 
> 时间：2012-05-10T10:31:41.273
> 
> 标签：mysql, constraints, komodo, dml, return-code

我已经设置了一个加载了 MySQL 插件的 Komodo 远程数据库服务器，我想清空一个表。我选择表并切换到 MySQL 插件中的“查询”选项卡，但是当我运行“截断表”时；它什么也不做。我已经允许删除“全表”，但我也不能删除“全表”中的所有选定行。它给了我一个 KeyError: 150 或 KeyError: 84？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T13:27:43.043

在尝试 TRUNCATE 之前使用[DELETE](http://dev.mysql.com/doc/refman/5.0/en/delete.html)或删除任何[外键约束或检查。](https://stackoverflow.com/questions/5452760/truncate-foreign-key-constrained-table)

# android - 如何通过解析从xml数据中获取图像

> ID：10532180
> 
> 赞同：1
> 
> 时间：2012-05-10T10:31:42.927
> 
> 标签：android, xml, parsing

我有一个这样的xml结构

```
 <element>
   <foodjoint_name>DineOut</foodjoint_name>
   <logo>http://192.168.1.112/dineout/images/dominos.jpg</logo>
 </element> 
```

我正在解析数据：`<foodjoint_name>`将是某些事物的字符串名称 `<logo >`将是图像 url。我有一个 xmlParser 我正在解析数据

在我的主要课程中，我展示了`listView`解析后的数据。我的问题是，我没有得到徽标。

如何得到？请告诉我，如果我必须更改代码。

这是我的主要课程

```
// All static variables

    static final String URL = "http://192.168.1.112/dineout/index.php/dineout/view";

    // XML node keys
    static final String KEY_ITEM = "element"; // parent node
    //static final String KEY_ID = "foodjoint_id";
    static final String KEY_NAME = "foodjoint_name";
    static final String KEY_LOGO = "logo";
    //static final String KEY_DESC = "foodjoint_description";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            //map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
            map.put(KEY_LOGO,  parser.getValue(e, KEY_LOGO));

            //map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

            // adding HashList to ArrayList
            menuItems.add(map);
        }

        // Adding menuItems to ListView
        ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.list_item,
                new String[] { KEY_NAME, KEY_LOGO }, new int[] {
                        R.id.name,R.id.imageView1 });

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
                String cost = ((TextView) view.findViewById(R.id.cost)).getText().toString();
                String description = ((TextView) view.findViewById(R.id.desciption)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(KEY_NAME, name);
                in.putExtra(KEY_LOGO, cost);
                //in.putExtra(KEY_DESC, description);
                startActivity(in);

            }
        });
    }
} 
```

这是我的解析器类

```
public class XMLParser {

    // constructor
    public XMLParser() {

    }

    /**
     * Getting XML from URL making HTTP request
     * @param url string
     * */
    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    /**
     * Getting XML DOM element
     * @param XML string
     * */
    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }

            return doc;
    }

    /** Getting node value
      * @param elem element
      */
     public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE  ){
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
     }

     /**
      * Getting node value
      * @param Element node
      * @param key string
      * */
     public String getValue(Element item, String str) {     
            NodeList n = item.getElementsByTagName(str);        
            return this.getElementValue(n.item(0));
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:40:35.940

以下 URL 将帮助您获得问题的答案 [http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:37:51.253

您必须单独对图像进行http请求不是吗？

执行 http 请求并将图像保存在 sdcard 上，然后使用该 sdcard 路径在您的 imageview 中显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:39:57.820

对于解析 xml 使用[XmlPullParser](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)。获取网址后，您可以轻松下载它。

# vb.net - 强类型的 FaultExceptions 不起作用

> ID：10532188
> 
> 赞同：1
> 
> 时间：2012-05-10T10:32:20.160
> 
> 标签：vb.net, wcf, silverlight, faultexception

我正在尝试将强类型的 FaultExceptions 从 WCF 服务传递到 Silverlight 客户端，但我得到的只是通用的“远程服务器返回错误：NotFound”。响应，同时使用相同的代码抛出通用的 FaultExceptions 工作正常。

因此，如果我这样做，我会在 Silverlight 回调`Throw New FaultException()`的参数中将其取回，而导致未找到错误。`e.Error``Throw New FaultException(Of clsServiceFault)(clsServiceFaultInstance)`

`clsServiceFault`已经被声明为数据合约，如下所示：

```
<DataContract()> _
Public Enum ServiceFaultTypes
    LoginFailed
    SessionExpired
End Enum

<DataContract()> _
Public Class clsServiceFault

    Public Sub New()
    End Sub

    Public Sub New(iType As ServiceFaultTypes, iMessage As String)
        Type = iType
        Message = iMessage
    End Sub

    <DataMember()> _
    Public Property Type As ServiceFaultTypes

    <DataMember()> _
    Public Property Message As String

End Class 
```

引发错误的 WCF 方法已使用该`FaultContract`属性进行修饰，并且我还将 HTTP 响应状态代码更改为 200。

```
<OperationContract()> _
<FaultContract(GetType(clsServiceFault))> _
Public Function GetCustomersData(...)

...
System.ServiceModel.Web.WebOperationContext.Current.OutgoingResponse.StatusCode = Net.HttpStatusCode.OK
Throw New FaultException() 'Works
Throw New FaultException(Of clsServiceFault)(new clsServiceFault(..)) 'Does not work
...
End Function 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:46:02.127

您是否使用[SilverlightFaultBehavior](http://msdn.microsoft.com/en-us/library/ee844556%28v=vs.95%29.aspx)来装饰您的服务？如果没有，这可能会回答您的问题。

# iphone - iPhone：使用 Facebook 墙 API 发布消息时出现问题

> ID：10532190
> 
> 赞同：1
> 
> 时间：2012-05-10T10:32:31.167
> 
> 标签：iphone, objective-c, ios, facebook

我一直在关注下面的 Facebook 集成链接，并且能够成功地在墙上发布消息而没有任何问题。我为我的 iPhone 应用程序注册了一个应用程序 ID。

[http://gabriel-tips.blogspot.in/2011/10/how-to-post-on-facebook-wall-through.html](http://gabriel-tips.blogspot.in/2011/10/how-to-post-on-facebook-wall-through.html)

但是，一个月后（不完全是一个月，可能超过1个月），同一个应用贴墙出现问题，即App显示“你的贴已经贴在你的墙上了！” 执行`-(void)request:(FBRequest *)request didLoad:(id)result`此函数中的代码时。但是，它实际上并没有贴在墙上。

这里可能是什么问题？FB App ID 是否仅在特定时间段内有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:15:29.953

我可以建议这个官方的 Facebook API 指令来集成 iOS：

[iOS 教程 - Facebook API（点击这里！）](https://developers.facebook.com/docs/mobile/ios/build/)

添加更多代码，也是一个建议：将 Facebook 类的 INITILIAZTION 放在 App Delegate 中，并在另一个文件中使用 App Delegate 单例引用您的 Facebook 类

# r - 将段添加到散点图

> ID：10532192
> 
> 赞同：4
> 
> 时间：2012-05-10T10:32:37.313
> 
> 标签：r, overlay, ggplot2, segment, scatter

（这遵循[ggplot2 loess Q](https://stackoverflow.com/questions/10530036/scatter-plot-with-loess-line-loess-to-not-show-line-in-a-given-region "上一问")我得到了一个很好的答案） - 导致这个情节：

![第一个问题的回答图片](../Images/9e7c0e2d6249c7dc02e817d69885b369.png)

我的 R 知识非常有限（对不起！）

我使用表 data1 中的数据绘制散点图。

```
data1<-NaRV.omit(data[,c(2,3,7,10)]) #(2=start, 3=end, 7=value, 10=type)
ylabs='E / A - ratio'
p1<-ggplot(data1, aes(x=start, y=value)) +
ylim(0,5) +
geom_point(shape=points, col=pointcol1, na.rm=T) +
geom_hline(aes(yintercept=1, col=linecol)) +
geom_smooth(method="loess", span=spanv, fullrange=F, se=T, na.rm=T) +
#
xlab(xlabs) +
ylab(ylabs) 
```

有些区域没有数据（包括中间的一个大区域，但也有较小的离散区域），我想在 y=0 处绘制一个彩色段来说明这一事实

我将这两种数据类型合并到一个带有标签列#10='type' 的表中（散点数据 ='cnv' 和 no-data='nregion' 的内容）。nregions 在值列中有 0。

我怎样才能只用'cnv'数据作为散点图，只用'nregion'数据来绘制线段；都在同一个情节上？

我找到了geom_segment：

```
+ geom_segment(aes(x=data1$start, y=0, xend=data1$end, yend=0)) 
```

但是我没有找到为每个 ggplot 子图设置子集的方法。

谢谢

#### 跟进@gauden 解决方案

嗨@gauden，我尝试了你的方法，它部分奏效了。我的问题是我不能像使用 ]-1 那样很好地划分数据；0] 因为我的 nregions 是分散的（由图片中的蓝点和线表示）并且对于每个新图形都不同，如下图所示：

![具有多个片段的目标图像](../Images/dfdd7a8ec067c8bc2b058654ffb33923.png)

因此，黄土像以前一样穿过大的nregion。如何防止 nregions 出现黄土？

```
#############################
## plot settings (edit below)
spanv<-0.1
pointcol1="#E69F00"
pointcol2="#56B4E9"
pointcol3="#009E73"
points=20
onecol="green"
colnreg="blue"
xlabs=paste(onechr, " position", " (loess-span=", spanv, ")", sep="")

##### end edit ##############

########################################################
## using the center coordinate of each segment and points

## prepare plot #1
# plot E / A - ratio
## draw loess average for cnv
## draw line for nregion
ylabs='E / A - ratio'
p1<-ggplot(chrdata, aes(x=start+1000, y=E.R, group=type, label=type)) +
ylim(0,5) +
geom_hline(aes(yintercept=1, col=onecol)) +
geom_point(data = chrdata[chrdata$type != 'nregion',], shape=points, col=pointcol2) +
geom_smooth(data = chrdata[chrdata$type != 'nregion',], method="loess", span=spanv) +
geom_point(data = chrdata[chrdata$type == 'nregion',], col=colnreg) +
geom_segment(data = chrdata[chrdata$type == 'nregion',], aes(x=start, y=E.R, xend=end, yend=E.R), colour=colnreg, linetype=1, size=1) +
xlab(xlabs) +
ylab(ylabs) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T22:28:53.750

**编辑：完成修订以允许澄清请求**

这是我的目标情节： ![多段散点图](../Images/12878ab42a27ce666c990de90b1ffc80.png)

这是产生它的代码：

```
library("ggplot2")

# CREATE DATA FRAME
# This is the sort of data that I understand you to have
start <- rnorm(200)
value <- rnorm(200) 
df <- data.frame( cbind(start, value) )
df[ df$start > -0.6 & df$start <= 0, "value"] <- 0
df[ df$start > -1.6 & df$start <= -1.3, "value"] <- 0
df[ df$start > 0.9 & df$start <= 1.2, "value"] <- 0

df$type <- rep('cnv', 200)
df[ df$value == 0, "type"] <- 'nregion'
df[ df$value != 0, "type"] <- 'cnv'

# SORT the data frame by value so that the 'cnv' and 
# 'nregion' chunks become contiguous
df <- df[order(start),]

# See note below. 
r <- rle(df$type)
df$label <- rep(seq(from=0, length=length(r$lengths)), times=r$lengths)

# set up plot with colour aesthetic to distinguish the three regions
# playing around with colour and group produces different effects
p <- ggplot(df, aes(x = start, 
                    y= value,
                    colour=type,
                    group = label)
            )
p <- p + theme_bw()
# draw points outside the 'nregion'
p <- p + geom_point( data = df[df$type != 'nregion',] )

# draw smoothed lines outside the 'nregion'
p <- p + geom_smooth( data = df[df$type != 'nregion',] )

# plot zero points inside the 'nregion' 
p <- p + geom_smooth( data = df[df$type == 'nregion',], size = 2 )
p 
```

[在对补充问题](https://stackoverflow.com/questions/10609772/labeling-contiguous-chunks-of-observations-without-a-for-loop)`rle`的回答中进一步解释了使用

# android - 使用 arrayadapter 过滤 ListView

> ID：10532194
> 
> 赞同：18
> 
> 时间：2012-05-10T10:32:39.590
> 
> 标签：android, filter, android-arrayadapter

我正在尝试使用 arrayadapter 过滤列表视图。arrayadapter 参数是一个 String[][]。问题是任何事情都会发生。我必须覆盖过滤器接口吗？在那种情况下，有人可以提供一些提示吗？

我试图过滤的数组的每个位置都像

```
 galleryValues[0][0] -> "tiulo"
              [0][1] -> "desc"
              [0][2] -> "etc" 
```

我试着过滤它：

```
lstContinente = (ListView)findViewById(R.id.list);
lstContinente.setTextFilterEnabled(true);
adapter = new PortaitArrayAdapter(cx,galleryValues);   
lstContinente.setAdapter(adapter);

ed_busqueda.addTextChangedListener(new TextWatcher() {           
    public void afterTextChanged(Editable s) {}      
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    // TODO Auto-generated method stub       
}        
public void onTextChanged(CharSequence s, int start, int before, int count) {
    adapter.getFilter().filter(s.toString());
    adapter.notifyDataSetChanged();                 
}        
}); 
```

适配器代码：

```
public class PortaitArrayAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final String[][] values;
    private List<Imagen> imagenes = null;
    private LayoutInflater mInflater;
    public ImageLoader imageLoader;     

    public PortaitArrayAdapter(Context context, String[][] values) {
        super(context, R.layout.gallery_row);
        this.context = context;
        this.values = values;
        mInflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        imagenes = new ArrayList<Imagen>();
        for (int i = 0; i < 20; i++) imagenes.add(new Imagen());
        Bitmap def = BitmapFactory.decodeResource(this.context.getResources(),R.drawable.ic_launcher);
        imageLoader=new ImageLoader(this.context,def, imagenes);
    }

    @Override
    public int getCount (){
        return this.values.length;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();

            convertView =  mInflater.inflate(R.layout.gallery_row, parent, false);
            holder.txtTitulo = (TextView) convertView.findViewById(R.id.txt_gallery_titulo);
            holder.txtDesc = (TextView) convertView.findViewById(R.id.txt_gallery_desc);
            holder.txtFecha = (TextView) convertView.findViewById(R.id.txt_gallery_fecha);
            holder.txtEst = (TextView) convertView.findViewById(R.id.txt_gallery_est);
            holder.imageView    = (ImageView)convertView.findViewById(R.id.lst_img_gallery);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        /*LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.gallery_row, parent, false);*/

        //ImageView imageView = (ImageView) rowView.findViewById(R.id.icon);

        Bitmap bmp;
        Log.v("Position --> ",String.valueOf(position));
        try {
            byte b[] = imagenes.get(position).getImageData();
            if (b != null) {
                bmp = BitmapFactory.decodeByteArray(b, 0, b.length);
                if (bmp != null) holder.imageView.setImageBitmap(bmp);
            } else {

                String urlBase = galleryValues[position][0].substring(0, galleryValues[position][0].lastIndexOf("/")+1);
               String urlToEncode = galleryValues[position][0].substring(galleryValues[position][0].lastIndexOf("/")+1, galleryValues[position][0].length());

               urlToEncode = URLEncoder.encode(urlToEncode,"UTF-8");

               String url = urlBase.concat(urlToEncode);

               url = url.replace("+", "%20");
               Log.v("UrlFinal --> ",url);

                imageLoader.DisplayImage(String.valueOf(position),url,act,holder.imageView, position,null);
            }

        } catch (Exception e) {
            Log.e(this.getClass().getName(),"Exception en pos = " + position + " error:" + e.getMessage());
            e.printStackTrace();
        }

        holder.txtTitulo.setText(galleryValues[position][1] + ", " + galleryValues[position][2]);

        String[] dates = galleryValues[position][4].split("/");  
        String date = dates [1] + "/" + dates[0] + "/" + dates[2];
        Date d1 = new Date(date);
        DateFormat df = DateFormat.getDateInstance(DateFormat.LONG);
        holder.txtDesc.setText(galleryValues[position][3]);

        holder.txtFecha.setText(df.format(d1));
        holder.txtEst.setText(getText(R.string.num_fotos_gallery) + galleryValues[position][5] + " - " + getText(R.string.num_videos_gallery) + galleryValues[position][6] + " - " + getText(R.string.num_exp_gallery) + galleryValues[position][7]);

        return convertView;
    }

}

private static class ViewHolder {
    TextView txtTitulo;
    TextView txtDesc;
    TextView txtFecha;
    TextView txtEst;
    ImageView imageView;
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-10T11:18:58.280

将您的 String 数组转换为`ArrayList`并将其传递给`Adapter`并使用下面的代码或使用您的`String[]`.

您需要实施`Filterable`到您的`Adapter`班级和`Override getFilter()`

查看[这个](http://www.devdaily.com/java/jwarehouse/android/core/java/android/app/LauncherActivity.java.shtml)过滤自定义的完整示例`Adapter`。

```
public class ListFilterActivity extends ListActivity {

    private List<String> list = new ArrayList<String>();
    List<String> mOriginalValues;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final MyAdapter adapter = new MyAdapter(this, getModel());
        setListAdapter(adapter);

        EditText filterEditText = (EditText) findViewById(R.id.filterText);

        // Add Text Change Listener to EditText
        filterEditText.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // Call back the Adapter with current character to Filter
                adapter.getFilter().filter(s.toString());
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,int after) {
            }

            @Override
            public void afterTextChanged(Editable s) {
            }
        });
    }

    private List<String> getModel() {
        list.add("Linux");
        list.add("Windows7");
        list.add("Suse");
        list.add("Eclipse");
        list.add("Ubuntu");
        list.add("Solaris");
        list.add("Android");
        list.add("iPhone");
        list.add("Windows XP");
        return list;
    }
}

// Adapter Class
public class MyAdapter extends BaseAdapter implements Filterable {

    List<String> arrayList;
    List<String> mOriginalValues; // Original Values
    LayoutInflater inflater;

    public MyAdapter(Context context, List<String> arrayList) {
        this.arrayList = arrayList;
        inflater = LayoutInflater.from(context);
    }

    @Override
    public int getCount() {
        return arrayList.size();
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    private class ViewHolder {
        TextView textView;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder = null;

        if (convertView == null) {

            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.row, null);
            holder.textView = (TextView) convertView
            .findViewById(R.id.textview);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.textView.setText(arrayList.get(position));
        return convertView;
    }

    @Override
    public Filter getFilter() {
        Filter filter = new Filter() {

            @SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence constraint,FilterResults results) {

                arrayList = (List<String>) results.values; // has the filtered values
                notifyDataSetChanged();  // notifies the data with new filtered values
            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                FilterResults results = new FilterResults();        // Holds the results of a filtering operation in values
                List<String> FilteredArrList = new ArrayList<String>();

                if (mOriginalValues == null) {
                    mOriginalValues = new ArrayList<String>(arrayList); // saves the original data in mOriginalValues
                }

                /********
                *
                *  If constraint(CharSequence that is received) is null returns the mOriginalValues(Original) values
                *  else does the Filtering and returns FilteredArrList(Filtered)
                *
                ********/
                if (constraint == null || constraint.length() == 0) {

                    // set the Original result to return
                    results.count = mOriginalValues.size();
                    results.values = mOriginalValues;
                } else {
                    constraint = constraint.toString().toLowerCase();
                    for (int i = 0; i < mOriginalValues.size(); i++) {
                        String data = mOriginalValues.get(i);
                        if (data.toLowerCase().startsWith(constraint.toString())) {
                            FilteredArrList.add(data);
                        }
                    }
                    // set the Filtered result to return
                    results.count = FilteredArrList.size();
                    results.values = FilteredArrList;
                }
                return results;
            }
        };
        return filter;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-14T12:44:30.610

**这里**我提到了我们如何使用自定义适配器过滤listView数据的代码
**它真的对你有帮助**

**ListViewAdapter.java**

```
public class ListViewAdapter extends BaseAdapter {

    // Declare Variables
    Context mContext;
    LayoutInflater inflater;
    public List<AllFoodItem> allFoodItemlist;
    public ArrayList<AllFoodItem> arraylist;

    public ListViewAdapter(Context context, List<AllFoodItem> allFoodItemlist) {
        mContext = context;
        this.allFoodItemlist = allFoodItemlist;
        inflater = LayoutInflater.from(mContext);
        this.arraylist = new ArrayList<AllFoodItem>();
        this.arraylist.addAll(allFoodItemlist);
    }
    @Override
    public int getCount() {
        return allFoodItemlist.size();
    }

    @Override
    public AllFoodItem getItem(int position) {
        return allFoodItemlist.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    public class Holder {
        TextView foodname, quantity, calorie;    
    }    
    public View getView(final int position, View view, ViewGroup parent) {
        Holder holder = new Holder();
        view = inflater.inflate(R.layout.program_list, null);
        // Locate the TextViews in listview_item.xml
        holder.foodname = (TextView) view.findViewById(R.id.textView1);
         // Set the results into TextViews            holder.foodname.setText(allFoodItemlist.get(position).getName().toString());    
        return view;
    }

    // Filter Class
    public void filter(String charText) {
        charText = charText.toLowerCase(Locale.getDefault());
        allFoodItemlist.clear();
        if (charText.length() == 0) {
            allFoodItemlist.addAll(arraylist);
        } else {
            for (AllFoodItem wp : arraylist) {
                if (wp.getName().toLowerCase(Locale.getDefault()).contains(charText)) {
                    allFoodItemlist.add(wp);
                }
            }
        }
        notifyDataSetChanged();
    }

} 
```

**MainActivity.java**

使用 ListViewAdapter 类通过 filter() 方法在 EditText 上应用过滤器

```
inputSearch.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
                // When user changed the Text
                foodname = (inputSearch.getText().toString()).trim();

                // filter the data of edit Text using filter method in ListViewAdapter
                String text = inputSearch.getText().toString().toLowerCase(Locale.getDefault());
                adapter.filter(text);
            }

            @Override
            public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                                          int arg3) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable arg0) {

                userGet();
                // TODO Auto-generated method stub
            }
        }); 
```

# c# - 序列化对象时检测到循环引用 - C#，Json

> ID：10532196
> 
> 赞同：2
> 
> 时间：2012-05-10T10:32:55.063
> 
> 标签：c#, json, serialization, javascriptserializer

我正在尝试序列化一个对象以 Json 格式返回它以创建图形。我在类库中执行此操作并将字符串作为更大报告的一部分返回。我收到一个错误，但是说：

`A circular reference was detected while serializing an object of type 'MyApp.Data.Shop'`.

我正在关注本教程并期望返回一个类似的 Json 字符串（当然还有更多字段） -[教程](http://blogs.microsoft.co.il/blogs/pini_dayan/archive/2009/03/12/convert-objects-to-json-in-c-using-javascriptserializer.aspx)

在我的报告引擎中，此方法中引发了错误-

```
public string GetMonthlyShopSalesJson(List<Sale> sales, MonthlyRequest reportRequest)
{
    List<MonthlyShopSales> mrs = GetMonthlyShopSales(sales, reportRequest);

    JavaScriptSerializer serializer = new JavaScriptSerializer();
    string jsonData = serializer.Serialize(mrs); //Error line

    return jsonData;
} 
```

这是我检索商店销售额的方法：

```
public List<MonthlyShopSales> GetMonthlyShopSales(List<Sale> sales, MonthlyRequest reportRequest)
{
    ModelContainer ctn = new ModelContainer();
    MonthlyDateRange dates = GetComparativeDateRange(reportRequest);

    List<MonthlyShopSales> shopSales = (from sale in sales
                                        orderby sale.Shop.Name
                                        group sale by sale.Shop into ret
                                        select new MonthlyShopSales
                                        {
                                            Shop = ret.Key,
                                            TotalNumItemsSoldUSD = ret.Where(it => it.USDCut.HasValue).Where(it => it.USDCut != 0).Count(),
                                            TotalNumItemsSoldGBP = ret.Where(it => it.GBPCut.HasValue).Where(it => it.GBPCut != 0).Count(),
                                            TotalNumItemsSoldEUR = ret.Where(it => it.EURCut.HasValue).Where(it => it.EURCut != 0).Count(),
                                            USDTotalEarnings = PerformCurrencyConversion(ret.Sum(it => it.USDCut.HasValue ? it.USDCut.Value : 0), 0M, 0M, reportRequest.Currency, dates.BaseStartDate),
                                            GBPTotalEarnings = PerformCurrencyConversion(0M, ret.Sum(it => it.GBPCut.HasValue ? it.GBPCut.Value : 0), 0M, reportRequest.Currency, dates.BaseStartDate),
                                            EURTotalEarnings = PerformCurrencyConversion(0M, 0M, ret.Sum(it => it.EURCut.HasValue ? it.EURCut.Value : 0), reportRequest.Currency, dates.BaseStartDate),
                                            TotalNumItemsSoldUSDOverall = sales.Where(it => it.USDCut.HasValue).Where(it => it.USDCut != 0).Count(),
                                            TotalNumItemsSoldGBPOverall = sales.Where(it => it.GBPCut.HasValue).Where(it => it.GBPCut != 0).Count(),
                                            TotalNumItemsSoldEUROverall = sales.Where(it => it.EURCut.HasValue).Where(it => it.EURCut != 0).Count(),
                                            USDTotalEarningsOverall = PerformCurrencyConversion(sales.Sum(it => it.USDCut.HasValue ? it.USDCut.Value : 0), 0M, 0M, reportRequest.Currency, dates.BaseStartDate),
                                            GBPTotalEarningsOverall = PerformCurrencyConversion(0M, sales.Sum(it => it.GBPCut.HasValue ? it.GBPCut.Value : 0), 0M, reportRequest.Currency, dates.BaseStartDate),
                                            EURTotalEarningsOverall = PerformCurrencyConversion(0M, 0M, sales.Sum(it => it.EURCut.HasValue ? it.EURCut.Value : 0), reportRequest.Currency, dates.BaseStartDate)
                                        }).ToList();
    return shopSales;
} 
```

然后这是我的 MonthlyShopSales 课程：

```
public class MonthlyShopSales
{
    public Shop Shop { get; set; }

    public int TotalNumItemsSoldUSD { get; set; }
    public int TotalNumItemsSoldGBP { get; set; }
    public int TotalNumItemsSoldEUR { get; set; }
    public int NumberOfItemsSoldPerShop { get { return TotalNumItemsSoldUSD + TotalNumItemsSoldGBP + TotalNumItemsSoldEUR; } }

    public decimal USDTotalEarnings { get; set; }
    public decimal GBPTotalEarnings { get; set; }
    public decimal EURTotalEarnings { get; set; }

    public decimal OverallEarningsPerShop { get { return USDTotalEarnings + GBPTotalEarnings + EURTotalEarnings; } }

    public decimal QtyPercentageOfSales { get { return ((decimal)NumberOfItemsSoldPerShop / (decimal)TotalNumberOfBooksSoldOverall) * 100; } }
    public decimal RevenuePercentageOfSales { get { return (OverallEarningsPerShop / TotalEarningsOverall) * 100; } }

    public int TotalNumItemsSoldUSDOverall { get; set; }
    public int TotalNumItemsSoldGBPOverall { get; set; }
    public int TotalNumItemsSoldEUROverall { get; set; }
    public int TotalNumberOfItemsSoldOverall { get { return TotalNumItemsSoldUSDOverall + TotalNumItemsSoldGBPOverall + TotalNumItemsSoldEUROverall; } }

    public decimal USDTotalEarningsOverall { get; set; }
    public decimal GBPTotalEarningsOverall { get; set; }
    public decimal EURTotalEarningsOverall { get; set; }

    public decimal TotalEarningsOverall { get { return USDTotalEarningsOverall + GBPTotalEarningsOverall + EURTotalEarningsOverall; } }
} 
```

我正在尝试使用我正在编写的代码相对高效，这就是为什么我两次使用 GetMonthlyShopSales 方法 - 我不一定需要它的所有值，所以我应该为我编写一个单独的、更精简的版本json字符串？我也不确定这是否是我的问题，如果有人可以提供帮助，那就太好了。

这是任何擅长阅读的人的堆栈跟踪：

```
[InvalidOperationException: A circular reference was detected while serializing an object of type 'MyApp.Data.Shop'.]
   System.Web.Script.Serialization.JavaScriptSerializer.SerializeValueInternal(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat) +1549
   System.Web.Script.Serialization.JavaScriptSerializer.SerializeValue(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat) +194
   System.Web.Script.Serialization.JavaScriptSerializer.SerializeCustomObject(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat) +502
   System.Web.Script.Serialization.JavaScriptSerializer.SerializeValueInternal(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat) +1424
   System.Web.Script.Serialization.JavaScriptSerializer.SerializeValue(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat) +194
   System.Web.Script.Serialization.JavaScriptSerializer.SerializeEnumerable(IEnumerable enumerable, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat) +126
   System.Web.Script.Serialization.JavaScriptSerializer.SerializeValueInternal(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat) +1380
   System.Web.Script.Serialization.JavaScriptSerializer.SerializeValue(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat) +194
   System.Web.Script.Serialization.JavaScriptSerializer.SerializeCustomObject(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat) +502
   System.Web.Script.Serialization.JavaScriptSerializer.SerializeValueInternal(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat) +1424
   System.Web.Script.Serialization.JavaScriptSerializer.SerializeValue(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat) +194
   System.Web.Script.Serialization.JavaScriptSerializer.SerializeCustomObject(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat) +502
   System.Web.Script.Serialization.JavaScriptSerializer.SerializeValueInternal(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat) +1424
   System.Web.Script.Serialization.JavaScriptSerializer.SerializeValue(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat) +194
   System.Web.Script.Serialization.JavaScriptSerializer.SerializeEnumerable(IEnumerable enumerable, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat) +126
   System.Web.Script.Serialization.JavaScriptSerializer.SerializeValueInternal(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat) +1380
   System.Web.Script.Serialization.JavaScriptSerializer.SerializeValue(Object o, StringBuilder sb, Int32 depth, Hashtable objectsInUse, SerializationFormat serializationFormat) +194
   System.Web.Script.Serialization.JavaScriptSerializer.Serialize(Object obj, StringBuilder output, SerializationFormat serializationFormat) +26
   System.Web.Script.Serialization.JavaScriptSerializer.Serialize(Object obj, SerializationFormat serializationFormat) +74
   System.Web.Script.Serialization.JavaScriptSerializer.Serialize(Object obj) +6
   MyApp.Business.Reporting.AdvancedReportingEngine.GetMonthlyShopSalesJson(List`1 sales, MonthlyRequest reportRequest) in  C:\Development\MyApp\MyApp.Business\Reporting\AdvancedReportingEngine.cs:75
   MyApp.Business.Reporting.AdvancedReportingEngine.GetMonthlyReport(MonthlyRequest reportRequest) in  C:\Development\MyApp\MyApp.Business\Reporting\AdvancedReportingEngine.cs:61
   MyApp.Web.Areas.User.Controllers.ReportsController.MonthlyDashboardReport(MonthlyRequest reportRequest, FormCollection formValues) in C:\Development\MyApp\MyApp.Web\Areas\User\Controllers\ReportsController.cs:34
   lambda_method(Closure , ControllerBase , Object[] ) +157
   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
   System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +55
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

编辑：

根据要求，这是商店课程。它源自 EF 数据模型，但无论如何它只有 3/4 个字段：

```
[MetadataType(typeof(ShopMetadata))]
public partial class Shop
{

}

public partial class ShopMetadata
{
    [DisplayName("Shop Name")]
    [Required(ErrorMessage = "You must specify a Shop name")]
    public string Name { get; set; }

    [DisplayName("Region")]
    [Required(ErrorMessage = "You must specify a region")]
    public int Region { get; set; }

    [DisplayName("Display Sequence")]
    [Required(ErrorMessage = "You must specify a dispay sequence")]
    public int DisplaySequence { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:07:31.477

我怀疑问题出在 Shop EF POCO 类。实体框架在幕后添加了许多其他东西。因此，即使您的商店类我只有 3/4 属性，但在引擎盖下它可能还有更多。看：

[实体框架将 POCO 序列化为 JSON](https://stackoverflow.com/questions/7235650/entity-framework-serialize-poco-to-json)

有人建议使用 Json.NET，也可以使用 shop DTO 类，将 MonthlyShopSales 中的 Shop 对象替换为 DTO 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:49:37.757

看看[这里](https://stackoverflow.com/questions/1153385/a-circular-reference-was-detected-while-serializing-an-object-of-type-subsonic)，它可能会有所帮助。

另一方面，我处理过 Microsoft 反序列化器和 json.net。我认为 json.net 是一种更有效、更快的方式。还有 fastjson 库。

# database - 为什么主要的数据库供应商不提供真正的异步 API？

> ID：10532198
> 
> 赞同：5
> 
> 时间：2012-05-10T10:32:56.577
> 
> 标签：database, asynchronous

我与 Oracle 和 Mysql 一起工作，我很难理解为什么不编写 API，以便我可以发出调用、离开并做其他事情，然后再回来拿它，例如 NIO - 我被迫献身等待数据的线程。似乎 SQL 接口是唯一仍然强制同步 IO 的地方，这意味着占用了一个等待 DB 的线程。

任何人都可以解释这其中的原因吗？有什么基本的东西使这变得困难吗？

如果能够使用 1-2 个线程来管理我的数据库查询问题和结果获取，而不是使用工作线程来检索数据，那就太好了。

我确实注意到在实现异步 API 时有两次实验性尝试（例如：adbcj），但似乎都没有准备好用于生产。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:55:20.353

异步的一个相当大的问题是许多库使用线程本地进行事务。

例如在 Java 中，大部分 JDBC 规范依赖于同步行为来实现每个事务的单线程。那就是您按程序顺序编写事务。

要做到这一点，交易必须通过回调来完成，但事实并非如此。我只知道这样做的node.js，但不清楚它是否真的是异步的。

当然，即使您执行异步操作，我也不确定它是否会真正提高数据库本身的性能，如果它可能是同步执行的。

有很多方法可以避免 (Java) 中的线程过多： [异步 jdbc 调用是否可行？](https://stackoverflow.com/questions/4087696/is-asynchronous-jdbc-call-possible)

就个人而言，为了解决这个问题，我使用了像 RabbitMQ 这样的消息总线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:07:47.360

数据库服务器应该能够处理数千个客户端。为了提供异步接口，数据库服务器需要将查询的结果集保存在内存中，以便您可以在稍后阶段获取它。它很快就会耗尽资源。

# iphone - 不同应用状态下的 iPhone 本地通知

> ID：10532199
> 
> 赞同：0
> 
> 时间：2012-05-10T10:33:02.363
> 
> 标签：iphone, objective-c, ios, notifications

我在我的应用程序中使用本地通知，但无法正确处理它们。

当应用程序正在运行并处于活动状态时，`didReceiveLocalNotification`我可以从中获取用户设置`NSUserDefaults`并处理重复通知，如果触发日期不是它应该触发的日期，则取消它，或者如果它是正确的日期则显示警报。

但是，当应用程序正在运行但处于非活动状态时，通知将触发，尽管它不应该触发。
当应用程序没有运行时，同样的事情，通知会触发，虽然它不应该。

**问题**
当应用程序未运行时，当应用程序处于非活动状态时，如何`NSUserDefaults`在警报出现之前访问和取消通知？

**编辑答案**
我不得不问这个的原因是因为糟糕的应用程序设计和逻辑。我尝试设置重复的本地通知，无论用户设置了什么设置并在其中访问`NSUserDefaults`，尽管我应该首先在应用程序本身中访问用户设置，然后相应地设置通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:21:03.860

你不能。a`UILocalNotification`由 iOS 而非您的应用程序处理。只有当您的应用程序处于活动状态时，通知才会直接推送到您的应用程序。在所有其他情况下，操作系统只会显示通知。

# php - WordPress 连接

> ID：10532200
> 
> 赞同：-1
> 
> 时间：2012-05-10T10:33:07.483
> 
> 标签：php, html, wordpress, xhtml, mysqli

我是 WordPress 的新手。我正在尝试从数据库中的自定义表中读取信息并将其显示在表单上，​​但是我的 SQL 语句不起作用。我在这里错过了什么？其他脚本已经在运行。这是我的代码。

```
$myrows = $wpdb->get_results( "SELECT * FROM wk2012_zipcodes" ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:42:52.177

假设“wk2012”是您的表前缀，您不必对其进行硬编码，而是使用：

```
$myrows = $wpdb->get_results( "SELECT * FROM $wpdb->zipcodes" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:40:38.593

试试这种方式，让我知道它是否有效。

```
global $wpdb;
$myrows = $wpdb->get_results( "SELECT * FROM $wpdb->zipcodes" ); 
```

# ms-word - 上传到 Gdoc 后表格边框样式丢失

> ID：10532206
> 
> 赞同：1
> 
> 时间：2012-05-10T10:33:40.730
> 
> 标签：ms-word, google-drive-api, google-docs

我们现在正致力于通过 .NET 在 Google Docs 上上传 word 文档。我们有一个包含表格的模板，我们将表格的边框样式设置为无，然后所有边框都是不可见的。但在我们将其上传到 Google Docs 后，边框显示为黑色。我们尝试手动将模板上传到 Google Docs，边框也出现了。所以我认为我们的代码是正确的，Google Docs API 是否允许我们在将 .docx 转换为 Google Doc 后更改表格边框的样式？或者有什么办法可以让边框不可见？

我试图将表格边框设置为白色（纸张颜色），然后在我将其上传到 Google Docs 时隐藏边框而不进行转换。但是当我尝试编辑它时，表格边框再次出现。我想那是因为当我尝试编辑 .docx 文档时，Google 查看器将 .docx 转换为 GDoc。

我尝试在 Word 中将表格边框设置为无，但转换后边框仍然出现。这是谷歌文档转换的错误吗？它应该将边框设置为零，而在 Word 中将表格边框设置为无，但它不会这样做。有没有人可以帮助我解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:34:04.350

这不是您的问题的答案，但这是我目前正在使用的一种解决方法，通过将边框颜色设置为白色，它不再显示黑色边框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:55:37.900

要回答您的第一个问题，上传后无法修改文档内容。但是，您可以通过转换为 HTML 或 PDF 并上传这些格式来获得更好的保真度。

[否则，您应该在问题跟踪器](http://code.google.com/a/google.com/p/apps-api-issues/issues/list?q=label%3aAPI-DocumentsList)上提出错误报告，以便改进转换。

# sql - 文件转换 - .mwb 到 .sql 文件

> ID：10532208
> 
> 赞同：11
> 
> 时间：2012-05-10T10:33:47.517
> 
> 标签：sql, mysql-workbench

我有一个 .mwb 格式的数据库。我想在 eclipse 中使用它，所以我需要将它转换成 .sql 格式。如果有人知道如何使用任何工具来做到这一点。我认为我的 sql 工作台可以做到这一点，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T11:21:36.463

在菜单中单击“数据库”，然后单击“正向工程”（快捷键 CTRL+G）。

更新：

您的 .mwb 文件是一种专有格式，它还包含 Workbench 中图形表示的信息。您生成的 .sql 文件是一个脚本，您的 MySQL 服务器需要对其进行解释。要创建您通过命令行设计的数据库，请在您选择的控制台中编写如下内容：

```
mysql -u yourUser -p yourDatabase < yourFile.sql 
```

当您使用脚本创建它时，您可以省略“yourDatabase”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-30T12:26:21.327

我的 Debian 安装的工作台上的正向工程不起作用。这对我来说可以将 .mwb 文件转换为 .sql 文件。

[https://github.com/tomoemon/mwb2sql](https://github.com/tomoemon/mwb2sql)

# objective-c - 黑白 addObject:dictionary 和 addObject:[dictionary copy] 到 NSMutableArray 有什么区别？

> ID：10532212
> 
> 赞同：0
> 
> 时间：2012-05-10T10:34:02.467
> 
> 标签：objective-c, ios, xcode4, nsmutablearray, nsmutabledictionary

我正在尝试在循环内为我的 NSMutableDictionary 设置一些值，并每次将字典值分配给 NSMutableArray ，如下所示，

```
for(int i=0;i<=lastObj;i++){
[mutableDict setValue:[valuesArray objectAtIndex:i] forKey:@"Name"];
[mutableDict setValue:[uniqueArray objectAtIndex:i] forKey:@"SSN"];
//......then
**[mutableArray addObject:mutableDict];**/*not working perfectly all values s replaced by final mutableDict values (duplicate values)*/ 
```

但

```
**[mutableArray addObject:[mutableDict copy]];**/* Working Correctly !!! */
} 
```

每次迭代中的循环内部都会将新值分配给 mutableDictionary 并且每当我说 addObject 我的 mutableArray 正在获取所有重复值但每当我说 addObject:[mutableDict **copy** ] 时，数组正在获取正确的唯一值而没有任何重复，我不知道当我说复制时编译器有什么不同，有人能告诉我这有什么不同吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T10:47:07.993

```
[mutableArray addObject:mutableDict]; 
```

继续将 mutableDict 添加到 mutableArray。添加对象不会创建新的内存位置，它指向相同的内存。因此，当您设置 mutableDict 的值时，它会反映在所有添加的对象中，因为它们引用相同的内存位置。

复制创建一个新的内存位置并添加删除上述场景的对象。

为避免这种情况，您可以添加

```
for(int i=0;i<=lastObj;i++){
NSMutableDictionary * mutableDict = [NSMutableDictionary new]; //create new memory location
[mutableDict setValue:[valuesArray objectAtIndex:i] forKey:@"Name"];
[mutableDict setValue:[uniqueArray objectAtIndex:i] forKey:@"SSN"];

[mutableArray addObject:mutableDict];
[mutableDict release]; //release 
} 
```

希望这对你有帮助。快乐编码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:56:40.917

查看您的代码块，很明显您在 for 循环之外分配 mutableDict 。因此，当您在 for 循环中说下面的语句时，基本上您将相同的对象传递给 mutalbeArray。

[mutableArray addObject:mutableDict];

addObject 不为对象分配任何内存，但它使用传递的相同对象并仅发送“保留”消息以增加引用计数。由于您在 for 循环中传递相同的对象，因此 mutalbeArray 将包含对相同对象的引用。

在复制的情况下，

[mutableArray addObject:[mutableDict 副本]];

发送到 mutableDict 的复制消息返回一个新副本，然后将其传递给 addObject。因此，forloop 中的每次迭代都会将一个新对象（由于复制）传递给 addObject。

还要注意以下这些

1.  Copy 创建一个新对象，它应该稍后发布，但您的代码没有发布它。这将导致内存泄漏。
2.  Copy 创建不可变对象，因此如果您希望修改添加到 mutableArray 的对象，则应该使用 mutableCopy 代替。

# c++ - 为什么在这个例子中使用“const”？

> ID：10532213
> 
> 赞同：0
> 
> 时间：2012-05-10T10:34:08.370
> 
> 标签：c++, constants

你好我想知道为什么`const`在这个类的“get”函数中使用？

```
class Album {

public:
    Album(string c, Artist* a, string t, int y, int no):barCode(c), artist(a), title(t), year(y), noCopiesSold(no){}
    const string& getBarCode() const {return barCode;}
    Artist* getArtist() const {return artist;}
    const string& getTitle() const {return title;}
    int getYear() const {return year;}
    int getNoCopiesSold() const {return noCopiesSold;}
    void setBarCode(string value) {barCode = value;}
    void setArtist(Artist* value) {artist = value;}
    void setTitle(string value) {title = value;}
    void setYear(int value) {year = value;}
    void setNoCopiesSold(int value) {noCopiesSold = value;}

    friend ostream& operator << (ostream& out, const Album& album)
    {
        out << album.artist->getName() << " " << album.barCode << " " << album.title << " " << album.year << " " << album.noCopiesSold << endl;
        return out;
    }

private:
    string barCode;
    Artist* artist;
    string title;
    int year;
    int noCopiesSold;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:35:49.653

> 为什么在这个类的“get”函数中使用“const”？

对于**const 正确性**。

1.  通过创建一个函数`const`，这意味着该函数不会更改其内部的任何非静态成员变量，并且`const`该方法内部不会调用其他非函数
2.  现在也可以使用`const`对象调用该函数（否则会导致编译器错误）
3.  许多库函数使用`const`正确的方法；所以 const-correctness 使您的方法与它兼容（例如小于运算符 -- `bool <Class>::operator < (const Class&) const`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T10:37:08.250

`const`告诉编译器该方法不会改变对象。这意味着对`const`对象（以及非`const`对象）进行操作是安全的。它还使编译器能够进行一些优化

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T10:38:02.240

除了函数限定符 - 对于`string`getter（条形码、标题），您正在返回`const`对数据成员的引用 - 允许对引用的值进行变异会破坏类中的封装。

出于这个原因，退货`Artist*`是不好的（或充其量是可疑的）设计。

# android - 他们如何调用android图形服务器？

> ID：10532216
> 
> 赞同：3
> 
> 时间：2012-05-10T10:34:20.317
> 
> 标签：android, linux, android-service

我想知道使用 android 显示视图的服务器或服务。例如在 linux 中它被称为 Xorg 服务器。有谁可以告诉我它是如何在android中调用的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:59:32.473

android 上没有 Xorg Server 这样的东西。他们使用另一种方法。Android 依赖于标准帧缓冲设备 (/dev/fb0)。最重要的是，有一个“表面抛掷器”，然后是窗口管理器。

浏览此处获取更多信息：

*   [http://en.wikipedia.org/wiki/Framebuffer](http://en.wikipedia.org/wiki/Framebuffer)
*   [http://www.kandroid.org/online-pdk/guide/display_drivers.html](http://www.kandroid.org/online-pdk/guide/display_drivers.html)
*   [http://people.debian.org.tw/~olv/surfaceflinger/surfaceflinger.pdf](http://people.debian.org.tw/~olv/surfaceflinger/surfaceflinger.pdf)
*   [http://www.slideshare.net/opersys/headless-android](http://www.slideshare.net/opersys/headless-android)

# java - Jax-rs json 漂亮的输出

> ID：10532217
> 
> 赞同：16
> 
> 时间：2012-05-10T10:34:21.733
> 
> 标签：java, jax-rs, jackson, pretty-print

在 Java 中，当我使用

```
@Produces("application/json") 
```

注释输出未格式化为人类可读的形式。我如何做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-08-21T08:35:49.160

仅作记录，如果您只想为某些资源启用漂亮的输出，您可以在资源方法上使用[@JacksonFeatures 注释。](https://github.com/FasterXML/jackson-jaxrs-providers#annotations-on-resources)

这是示例：

```
@Produces(MediaType.APPLICATION_JSON)
@JacksonFeatures(serializationEnable =  { SerializationFeature.INDENT_OUTPUT })
public Bean resource() {
    return new Bean();
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-09-18T10:16:59.923

这就是您如何根据查询字符串中“漂亮”的存在正确地进行条件漂亮/非漂亮 json 输出的方法。

创建一个`PrettyFilter`实现`ContainerResponseFilter`，将在**每个请求**上执行：

```
@Provider
public class PrettyFilter implements ContainerResponseFilter {

    @Override
    public void filter(ContainerRequestContext reqCtx, ContainerResponseContext respCtx) throws IOException {

        UriInfo uriInfo = reqCtx.getUriInfo();
        //log.info("prettyFilter: "+uriInfo.getPath());

        MultivaluedMap<String, String> queryParameters = uriInfo.getQueryParameters();
        if(queryParameters.containsKey("pretty")) {
            ObjectWriterInjector.set(new IndentingModifier(true));
        }

    }

    public static class IndentingModifier extends ObjectWriterModifier {

        private final boolean indent;

        public IndentingModifier(boolean indent) {
            this.indent = indent;
        }

        @Override
        public ObjectWriter modify(EndpointConfigBase<?> endpointConfigBase, MultivaluedMap<String, Object> multivaluedMap, Object o, ObjectWriter objectWriter, JsonGenerator jsonGenerator) throws IOException {
            if(indent) jsonGenerator.useDefaultPrettyPrinter();
            return objectWriter;
        }
    }
} 
```

差不多就是这样！

您需要确保 Jersey 通过自动包扫描或手动注册来使用此类。

花了几个小时试图实现这一目标，发现之前没有人发布过现成的解决方案。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-10T13:08:27.603

在项目中的任何位置创建此类。它将在部署时加载。注意`.configure(SerializationConfig.Feature.INDENT_OUTPUT, true);`配置映射器以格式化输出。

对于 Jackson 2.0 及更高版本，将这两`.configure()`行替换为： `.configure(DeserializationFeature.FAIL_ON_IGNORED_PROPERTIES, false)` `.configure(SerializationFeature.INDENT_OUTPUT, true);`

并相应地更改您的导入。

```
package com.secret;

import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.ext.ContextResolver;
import javax.ws.rs.ext.Provider;
import org.codehaus.jackson.map.DeserializationConfig;
import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jackson.map.SerializationConfig;

/**
 *
 * @author secret
 */
@Provider
@Produces(MediaType.APPLICATION_JSON)
public class JacksonContextResolver implements ContextResolver<ObjectMapper> {
    private ObjectMapper objectMapper;

    public JacksonContextResolver() throws Exception {
        this.objectMapper = new ObjectMapper();
    this.objectMapper
        .configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false)
        .configure(SerializationConfig.Feature.INDENT_OUTPUT, true);
    }

    @Override
    public ObjectMapper getContext(Class<?> objectType) {
        return objectMapper;
    }
} 
```

请记住，格式化会对性能产生负面影响。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-28T23:10:48.963

如果您使用的是 Spring，那么您可以全局设置属性

```
spring.jackson.serialization.INDENT_OUTPUT=true 
```

更多信息在[https://docs.spring.io/spring-boot/docs/current/reference/html/howto-properties-and-configuration.html](https://docs.spring.io/spring-boot/docs/current/reference/html/howto-properties-and-configuration.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-23T14:11:26.320

基于有用的 DaTroop 的回答，这是另一个版本，它允许根据“漂亮”参数的缺失或存在在优化的 json 和格式化的 json 之间进行选择：

```
package test;

import javax.ws.rs.Produces;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.MultivaluedMap;
import javax.ws.rs.core.UriInfo;
import javax.ws.rs.ext.ContextResolver;
import javax.ws.rs.ext.Provider;

import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jackson.map.SerializationConfig;

@Provider
@Produces(MediaType.APPLICATION_JSON)
public class JacksonContextResolver implements ContextResolver<ObjectMapper> {

    private ObjectMapper prettyPrintObjectMapper;
    private UriInfo uriInfoContext;

    public JacksonContextResolver(@Context UriInfo uriInfoContext) throws Exception {
        this.uriInfoContext = uriInfoContext;

        this.prettyPrintObjectMapper = new ObjectMapper();
        this.prettyPrintObjectMapper.configure(SerializationConfig.Feature.INDENT_OUTPUT, true);
    }

    @Override
    public ObjectMapper getContext(Class<?> objectType) {

        try {
            MultivaluedMap<String, String> queryParameters = uriInfoContext.getQueryParameters();
            if(queryParameters.containsKey("pretty")) {
                return prettyPrintObjectMapper;
            }

        } catch(Exception e) {
            // protect from invalid access to uriInfoContext.getQueryParameters()
        }

        return null; // use default mapper
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-30T08:26:57.720

如果您使用的是`jersey-media-json-binding`使用 Yasson（JSR-367 的官方 RI）和 JAVAX-JSON 的依赖项，您可以引入漂亮的打印如下：

```
import javax.json.bind.Jsonb;
import javax.json.bind.JsonbBuilder;
import javax.json.bind.JsonbConfig;
import javax.ws.rs.ext.ContextResolver;
import javax.ws.rs.ext.Provider;

@Provider
public class RandomConfig implements ContextResolver<Jsonb> {
    private final Jsonb jsonb = JsonbBuilder.create(new JsonbConfig().withFormatting(true));

    public RandomConfig() { }

    @Override
    public Jsonb getContext(Class<?> objectType) {
        return jsonb;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-25T23:35:38.977

Jersey 1.x 的替代方案：

```
org.codehaus.jackson.map.ObjectMapper mapper = new ObjectMapper();
mapper.enable(SerializationConfig.Feature.INDENT_OUTPUT); 
```

# java - 将 Microsoft snp 转换为 pdf

> ID：10532223
> 
> 赞同：1
> 
> 时间：2012-05-10T10:34:59.200
> 
> 标签：java

任何人都可以告诉我Java（1.5）中是否有任何API可以将Microsoft [SNP](http://en.wikipedia.org/wiki/SNP_file_format)文件转换为PDF格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:36:49.653

我找到了一个命令行工具 (Snp2Pdf.exe) 来将 SNP 文档转换为 PDF 格式。在哪里我们可以使用 Process 调用它并运行程序。

# liferay - Liferay 6.0 到 6.1 升级过程问题

> ID：10532224
> 
> 赞同：0
> 
> 时间：2012-05-10T10:35:03.793
> 
> 标签：liferay, liferay-6

在升级 liferay 期间，由于某些异常，我的 liferay 升级停止。请查看链接以获取日志文件[http://kl1p.com/up_6_0_6_1](http://kl1p.com/up_6_0_6_1)的详细信息。我已经完成了我们必须在 portal-ext.properties 中进行的特定更改。不确定我们必须为“upgrade.processes = XXX”添加什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:25:25.050

以下是 6.1 的 portal.properties 包含的内容：

```
upgrade.processes=\
        com.liferay.portal.upgrade.UpgradeProcess_5_0_0,\
        com.liferay.portal.upgrade.UpgradeProcess_5_1_0,\
        com.liferay.portal.upgrade.UpgradeProcess_5_1_2,\
        com.liferay.portal.upgrade.UpgradeProcess_5_2_0,\
        com.liferay.portal.upgrade.UpgradeProcess_5_2_1,\
        com.liferay.portal.upgrade.UpgradeProcess_5_2_2,\
        com.liferay.portal.upgrade.UpgradeProcess_5_2_3,\
        com.liferay.portal.upgrade.UpgradeProcess_6_0_0,\
        com.liferay.portal.upgrade.UpgradeProcess_6_0_1,\
        com.liferay.portal.upgrade.UpgradeProcess_6_0_2,\
        com.liferay.portal.upgrade.UpgradeProcess_6_0_3,\
        com.liferay.portal.upgrade.UpgradeProcess_6_0_5,\
        com.liferay.portal.upgrade.UpgradeProcess_6_0_6,\
        com.liferay.portal.upgrade.UpgradeProcess_6_1_0 
```

**com.liferay.portal.upgrade.UpgradeProcess_6_1_0**这很好。

因此，您无需在 portal-ext.properties 中为此字段设置任何内容即可升级到 6.1。

至于错误，正如您提到的那样，它们很常见，因为从 6.0 到 6.1 的 Doc 库 portlet 和 Image portlet 中有很多变化。

# c# - 会员登录后如何重定向到特定页面？

> ID：10532232
> 
> 赞同：0
> 
> 时间：2012-05-10T10:35:34.830
> 
> 标签：c#, asp.net, asp.net-membership

我正在使用 asp.net 会员资格，我在根目录有几个页面，例如 loin、register、forget pass，所有用户在登录或未注册之前都可以访问这些页面，我想在用户登录后停止这些页面访问，我的意思是如果用户在地址栏中手动键入 URL，它允许访问这些页面如何防止这种情况发生？另外，我在登录后面临如何重定向到特定页面的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:41:09.803

您可以使用 UrlReferrer 来验证页面是否通过导航访问。UrlReferrer 获取有关链接到当前 URL 的客户端先前请求的 URL 的信息。有关详细信息，[请访问此链接](http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx)

```
 if(Request.UrlReferrer == null)
 {
   //code to redirection to login page
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:49:17.150

登录后重定向检查[FormAuthentication.RedirectfromLoginPage](http://msdn.microsoft.com/en-us/library/ka5ffkce.aspx)

```
public void Login_OnClick(object sender, EventArgs args)
{
   if (Membership.ValidateUser(UsernameTextbox.Text, PasswordTextbox.Text))
      FormsAuthentication.RedirectFromLoginPage(UsernameTextbox.Text, NotPublicCheckBox.Checked);
   else
     Msg.Text = "Login failed. Please check your user name and password and try again.";
} 
```

您可以通过以下方式检查用户是否经过身份验证

```
 Page.User.Identity.IsAuthenticated 
```

检查此链接以获取表单身份验证

*   [表单身份验证](http://www.4guysfromrolla.com/webtech/110701-1.shtml)
*   [表单验证 MSDN](http://msdn.microsoft.com/en-us/library/ff647070.aspx)

# jquery-mobile - 主干js在本地存储（大）远程集合

> ID：10532243
> 
> 赞同：1
> 
> 时间：2012-05-10T10:36:30.063
> 
> 标签：jquery-mobile, backbone.js, local-storage, requirejs, web-sql

我正在开发一个主干 js html5 应用程序，以便在必须在在线和离线模式下工作的 iPad 上使用。

我正在使用的数据集相对较大：

*   大约 300 个类别的远程集合（每个类别大约有 3 个属性）
*   大约 4000 个项目的远程集合（每个项目有大约**150 个属性**和单个类别的外键）

在在线模式下，首先应在本地获取类别集合并存储。这些信息很陈旧，所以我只需要不时更新这些数据。

选择类别时，应用程序应远程获取该类别的项目（最大100）。用户还可以选择要在本地存储的项目，以便在离线模式下使用。出于性能目的，必须限制可以本地存储的项目数量。

现在我的问题;-)：

我想知道获取远程集合并将它们存储在离线数据库中的最佳方法（可能是 webSQL？）。是否有我应该注意的性能警告？

如果有人感兴趣，我可以分享我正在处理的代码。目前该项目是 Backbone js、require js 和 JQuery Mobile 的组合。

亲切的问候，

碧玉

# coffeescript - Coffeescript 是否支持嵌套列表推导？

> ID：10532244
> 
> 赞同：3
> 
> 时间：2012-05-10T10:36:30.530
> 
> 标签：coffeescript

例如，给定以下结构

```
 pages = [
        [
            { myvar: 1},
            { myvar: 2},
            { myvar: 3},
        ]
    ]; 
```

我如何表达以下（类似python）的理解？

```
v.myvar for p in pages for v in p 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T11:05:35.707

AFAIK，你不能，见：[https ://github.com/jashkenas/coffee-script/issues/1191](https://github.com/jashkenas/coffee-script/issues/1191)

同时有一个解决方法（直到 CoffeeScript 得到改进）：

```
pages = [
        [
            { myvar: 1},
            { myvar: 2},
            { myvar: 3},
        ]
    ];

result = []
for row in pages
  for map in row
    result.push map.myvar

console.log result 
```

输出：

```
[ 1, 2, 3 ] 
```

# delphi - Delphi中的模态形式可以是非阻塞的吗？

> ID：10532247
> 
> 赞同：2
> 
> 时间：2012-05-10T10:36:47.397
> 
> 标签：delphi, delphi-xe, vcl

我希望在 Delphi 中创建一个模式表单，以防止与用户界面进行交互，但仍允许继续执行其他表单。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:46:17.060

Windows 继续在后台处理消息，因此例如在计时器上发生的任何更新仍然会发生。只是所有的键盘和鼠标事件都指向了模态表单。理论上，如果需要，您可以将消息发布到另一个表单以“操作”某些代码。您仍然可以在主线程中做很多事情 - 问题是这是否是您真正想要做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T11:27:35.503

模态表单通过调用函数来调用，该函数`ShowModal`仅在模态表单关闭时返回。如果您想在同一个线程（即 UI 线程）上执行代码，则需要从内部调用它`ShowModal`。在几乎所有情况下，这都不是一个站得住脚的方法。从中我们可以得出结论，有问题的代码必须在 UI 线程以外的线程中执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T08:15:48.200

可能，虽然不推荐。

我这样做是为了显示一个进度表，说明应用程序很忙，同时仍在主线程上继续。

这个想法是把 ShowModal 中的代码分成两半，在你这样做的时候删除重复直到循环。

您可以调用前半部分来显示表格，并且您必须保证调用后半部分以再次关闭它。

类似的东西

```
NonBlockingModalForm =  TNonBlockingModalForm.Create();
try
    NonBlockingModalForm.FirstHalfOfShowModal;
    DoStuff;
finally
    NonBlockingModalForm.SecondHalfOfShowModal;
    NonBlockingModalForm.Free;
end; 
```

请注意，在 ShowModal 的循环中，有一个对 Application.HandleMessage 的调用，用于检查正在终止的应用程序。

如果你想让你的 UI 玩得很好，你就需要这样做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T10:46:11.100

表单本身没有“执行”，但您可以在（模态）表单处于活动状态时使用线程在后台执行代码。

# wpf - 需要 EF Code First / WPF 应用程序架构指南

> ID：10532248
> 
> 赞同：0
> 
> 时间：2012-05-10T10:36:53.783
> 
> 标签：wpf, caching, architecture, frameworks, entity

我正在开发一个 2 层 WPF/EF Code First 应用程序。我做了很多谷歌搜索，但找不到我正在寻找的示例实现......希望这个论坛上的人可以帮助我。以下是要求：

*   在应用程序启动时
    1.  打开一个 DBContext
    2.  应用程序启动时缓存各种地图/列表中的参考数据
    3.  关闭上下文。
*   当用户打开表单时
    1.  打开一个 DBContext（我在这里使用 UnitOfWork 模式）
    2.  从上下文中获取实体的新副本以进行编辑。
    3.  按下 Save 按钮时调用 SaveChanges()。
    4.  关闭上下文。

当我使用 Cache 中的对象更改导航属性时，问题就出现了。例如，使用下拉菜单（由使用不同 DBContext 创建的缓存提供支持）设置部门导航属性。

UnitOfWork 要么引发异常，说明实体已加载到另一个 DBContext 中（当 Department 延迟加载 DynamicProxy 时），要么在 Department 表中插入新行。

我什至找不到一个缓存参考数据的示例……我不敢相信没有人遇到过这个问题。要么我没有找对地方，要么没有使用正确的关键字。我希望使用 EF 可以做到这一点。如果您能分享您的经验或发布一些参考资料，我将不胜感激。我对此有点陌生，所以想避免使用太多框架，而只使用带有 WPF/EF 堆栈的 POCO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:36:30.893

尝试附加您的缓存项目（可能，您会在附加之前进行克隆）：

```
var existingUnicorn = GetMyExistingUnicorn();
using (var context = new UnicornsContext())
{
    context.Unicorns.Attach(existingUnicorn);
    context.SaveChanges();
} 
```

请参阅[使用 DbContext...](http://blogs.msdn.com/b/adonet/archive/2011/01/29/using-dbcontext-in-ef-feature-ctp5-part-4-add-attach-and-entity-states.aspx)文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:23:07.357

您提到您为此使用 WPF，在这种情况下，您不必每次想要与域层交互时都打开一个新的 DBContext。（如果这与您热衷于使用的 UoW 相违背，我们深表歉意）

就我个人而言，我一直在为桌面应用程序使用代码优先开发，我发现池化上下文（以及连接）可以防止这个问题，并且到目前为止还没有导致任何问题。

原则上，一旦启动应用程序，就会为主 UI 线程打开一个主 Context 对象，并在整个应用程序生命周期内保持打开状态。它是静态存储的，并在使用时由任何 Repository 类检索。

对于多线程场景，任何后台线程都可以自由地打开额外的上下文并在存储库中使用它们来防止任何竞争条件。

如果您采用这种方法，您会发现由于所有存储库共享相同的上下文，对象上下文跟踪不会产生任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T12:46:10.947

除了导航之外，我最终定义了 int 外键属性。在我的应用程序中，我只修改 int 属性并使用导航属性来显示详细信息（只读控件）。虽然这可行，但它使应用程序有点脆弱，有时甚至不一致。

虽然这个博客声称 FK 和 Navi 属性是由 EF 同步的，但我无法让它工作。

[http://coding.abel.nu/2012/03/ef-code-first-navigation-properties-and-foreign-keys](http://coding.abel.nu/2012/03/ef-code-first-navigation-properties-and-foreign-keys)

# c# - .net application.settings 在 Windows XP 上的不同行为

> ID：10532255
> 
> 赞同：1
> 
> 时间：2012-05-10T10:37:11.457
> 
> 标签：c#, .net, winforms, windows-xp

我正在使用`application.settings`(not `app.config`) 来存储用户的用户名和密码。

在 Windows 7 上安装应用程序时一切顺利，但在 Windows XP 上安装应用程序后，似乎`application.settings`无法访问，并且应用程序得到空字符串。

我该如何解决这个问题？

# entity - Entity Bean 中的 EntityManager 操作方法

> ID：10532256
> 
> 赞同：0
> 
> 时间：2012-05-10T10:37:11.787
> 
> 标签：entity, ejb-3.0, entitymanager

如何使用（注入）entityManager 到实体 Bean？在我的 Entity bean 中，我有一些验证需要对其他（不相关的）实体进行查询，即某种 List-Of-Values 实体。这样做的正确方法是什么？将 EntityManager 放入 Entity Bean 的构造函数中？或者是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:32:42.033

实体 bean（通常）不支持任何类型的注入，因为它们不是由容器创建的。

最近在 JSR-338 (JPA 2.1) 邮件列表中[讨论了这个一般性主题，](http://java.net/projects/jpa-spec/lists/jsr338-experts/archive/2011-06/message/13)[并](http://java.net/projects/jpa-spec/lists/jsr338-experts/archive/2011-06/message/24)[给出了](http://java.net/projects/jpa-spec/lists/jsr338-experts/archive/2011-06/message/44)[为什么](http://java.net/projects/jpa-spec/lists/jsr338-experts/archive/2011-06/message/18) 通常认为实体引用实体管理器是一个坏主意的原因。

# actionscript-3 - Flash AS3 FileReference - 一次选择并上传多个文件

> ID：10532258
> 
> 赞同：3
> 
> 时间：2012-05-10T10:37:14.580
> 
> 标签：actionscript-3, upload, filereference

我目前有一个 swf，它允许您选择和显示文件并使用 FileReference 将其上传到服务器。这很好用，但我需要能够选择并显示多个（在某些情况下最多 25 个），然后最后全部上传。

我知道您可以使用 FileReferenceList 在对话框弹出窗口中同时选择多个文件，但我的问题是用户需要一次选择一个，对该图像执行操作，然后选择另一个，执行操作等等。 ..然后最后当他们按下上传时将它们全部上传到服务器上。

是否有可能或者有没有办法让我可以将每个新选择的文件添加到一个数组中，然后最后它一次性上传数组中的所有文件或循环遍历每个文件，直到数组中的所有对象都完成？

任何人都可以帮忙吗？我将在下面发布我工作的单个文件上传的完整代码。

拜托，请帮忙，我对 Flash 的限制，只学习了 3-4 个月，我已经被困了一个多星期了:(

劳伦

as3 代码：

```
import flash.display.Sprite;
import flash.events.MouseEvent;
import flash.net.FileReference;
import flash.net.FileFilter;
import flash.utils.ByteArray;
import flash.events.MouseEvent;
import flash.events.Event;
import flash.events.IOErrorEvent;
import flash.display.MovieClip;
import fl.controls.ProgressBarMode;
import flash.display.Bitmap;
import flash.display.BitmapData;

progressBar.visible=false;
UploadprogressBar.visible=false;

// Create FileReference.
var imageFile:FileReference;

// Create Loader to hold image content
var image_loader:Loader = new Loader();
var image_content:Sprite = new Sprite();

// Get Extension Function.
var imageExtension;

function getExtension($url:String):String {
    var extension:String = $url.substring($url.lastIndexOf(".")+1, $url.length);
    return extension;
}

// Random Number Function to create new filename on server.
function randomNum(low:Number=0, high:Number=1):Number {
return Math.floor(Math.random() * (1+high-low)) + low;
}
var myNumber:Number= randomNum(1000,9999);
var myString:String= String(myNumber);
var RandomNumbers = myString;
var imageFilePath = (RandomNumbers);

// Select Button Function.
select_btn.addEventListener(MouseEvent.CLICK, onselect_btnClicked);

function onselect_btnClicked(event:MouseEvent):void {
imageFile=new FileReference();
imageFile.addEventListener(Event.SELECT, onFileSelected);
var imageTypeFilter:FileFilter = new FileFilter("JPG/PNG Files","*.jpeg; *.jpg;*.gif;*.png");
imageFile.browse([imageTypeFilter]);
}

// File Selected Function.
function onFileSelected(event:Event):void {
imageFile.addEventListener(Event.COMPLETE, onFileLoaded);
imageFile.addEventListener(ProgressEvent.PROGRESS, onProgress);
var imageFileName = imageFile.name;
imageExtension = getExtension(imageFileName);
imageFile.load();

progressBar.visible=true;
progressBar.mode=ProgressBarMode.MANUAL;
progressBar.minimum=0;
progressBar.maximum=100;
UploadprogressBar.mode=ProgressBarMode.MANUAL;
UploadprogressBar.minimum=0;
UploadprogressBar.maximum=100;
}

// File Progress Function.
function onProgress(event:ProgressEvent):void {
var percentLoaded:Number=event.bytesLoaded/event.bytesTotal*100;
progressBar.setProgress(percentLoaded, 100);
}

// File Loaded Function.
function onFileLoaded(event:Event):void {
var fileReference:FileReference=event.target as FileReference;

var data:ByteArray=fileReference["data"];
var movieClipLoader:Loader=new Loader();
movieClipLoader.loadBytes(data);
movieClipLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onMovieClipLoaderComplete);

imageFile.removeEventListener(Event.COMPLETE, onFileLoaded);
imageFile.removeEventListener(ProgressEvent.PROGRESS, onProgress);
}

// Load Image onto Stage Function.
function onMovieClipLoaderComplete(event:Event):void {
var loadedContent:DisplayObject=event.target.content;
image_loader =event.target.loader as Loader;

var scaleWidth:Number=345/image_loader.width;
image_loader.scaleX=image_loader.scaleY=scaleWidth;
image_loader.height=200;
image_loader.scaleX=image_loader.scaleY;
image_loader.x=10;
image_loader.y=10;

image_content.buttonMode=true;
image_content.addChild(image_loader);
addChild(image_content);
}

// Upload Button Function.
upload_btn.addEventListener(MouseEvent.CLICK, onupload_btnClicked);

function onupload_btnClicked(event:MouseEvent):void {
var filename:String=imageFile.name;
var urlRequest:URLRequest = new URLRequest("http://www.xxxxx.com/xxxxx/file-reference.php");
var variables:URLVariables = new URLVariables();
urlRequest.method = URLRequestMethod.POST;
imageFile.addEventListener(ProgressEvent.PROGRESS, onUploadProgress);
imageFile.addEventListener(DataEvent.UPLOAD_COMPLETE_DATA,onUploadComplete);
variables.ID = (RandomNumbers);
urlRequest.data = variables;
imageFile.upload(urlRequest);
}

// File Upload Progress Function.
function onUploadProgress(event:ProgressEvent):void {
var percentLoaded:Number=event.bytesLoaded/event.bytesTotal*100;
UploadprogressBar.setProgress(percentLoaded, 100);
trace("loaded: "+percentLoaded+"%");
upload_status_txt.text='upload in progress...';
}

// Upload File Completed Function.
function onUploadComplete(event:Event):void {
upload_status_txt.text='upload complete';
imageFile.removeEventListener(ProgressEvent.PROGRESS, onProgress);
imageFile.removeEventListener(DataEvent.UPLOAD_COMPLETE_DATA,onUploadComplete);
UploadprogressBar.visible=false;
} 
```

php 服务器代码：

```
<?php
function getExtension($str) {
$i = strrpos($str,".");
if (!$i) { return ""; }
    $l = strlen($str) - $i;
    $ext = substr($str,$i+1,$l);
    return $ext;
}

$fileID = $_POST['ID'];
$filename = basename( $_FILES['Filedata']['name']);

$extension = getExtension($filename);
$extension = strtolower($extension);
$uploadID = $fileID.'.'.$extension;
if (move_uploaded_file($_FILES['Filedata']['tmp_name'], "images/".$uploadID))
{
     echo "OK";
}
else
{
     echo "ERROR";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:02:53.293

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html)

“当您调用 FileReferenceList.browse() 方法时，该方法会创建一个 FileReference 对象数组。”

您需要使用 FileReferenceList 而不是 FileReference。

# javascript - 使用数字访问动态内容

> ID：10532260
> 
> 赞同：1
> 
> 时间：2012-05-10T10:37:32.247
> 
> 标签：javascript, jquery, json, coffeescript, wikipedia-api

我正在使用 wikipedia API，但我得到的结果有问题。

```
{"query":{
    "pages":{
        "48636":{
            "pageid":48636, 
```

我不知道拨打电话时的 ID 是什么，如何访问 48636？

```
if gon.activateWiki
  $(gon.keywords).each (index, element) ->
    console.log element.name
    $.getJSON( 'http://sv.wikipedia.org/w/api.php?action=query&format=json&prop=revisions%7Clinks%7Cimages%7Ccategories&rvprop=content&titles=' + element.name + '&callback=?' , (data)  ->
      console.log data.query.pages
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:39:00.910

您可以像访问数组一样访问它：

```
console.log(data.query.pages["48636"]); 
```

更新：

要从对象的未知属性中获取值，您需要使用[`for..in`](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)语句。或者您可以使用`slice`方法并将对象转换为数组：

```
var pages = Array.prototype.slice.call(data.query.pages); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:54:30.347

你想要值得信赖的旧 Object.keys

```
firstKey = Object.keys(data.query.pages).shift()
lastKey = Object.keys(data.query.pages).pop()
nthKey = Object.keys(data.query.pages)[n-1]

firstPage = data.query.pages[firstKey]
lastPage = data.query.pages[lastKey]
nthPage = data.query.pages[n-1] 
```

# json - Backbone.js 使用 post 变量同步，而不是 json

> ID：10532262
> 
> 赞同：4
> 
> 时间：2012-05-10T10:37:33.177
> 
> 标签：json, backbone.js

我是骨干新手，并试图为现有的（而且相当大的）REST 后端编写一个 html5 前端。我发现在保存模型时，默认情况下主干会发送编码为我现有 API 不支持的 JSON 的模型。是否可以使用主干发送带有变量的简单简单的发布请求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:43:56.290

我想你要找的是`Backbone.emulateJSON = true`

从[官方文档](http://documentcloud.github.com/backbone/#Sync-emulateJSON)复制：

> 如果您正在使用无法处理编码为 application/json 的请求的旧版 Web 服务器，请设置 Backbone.emulateJSON = true; 将导致 JSON 在`model`参数下被序列化，并使用 application/x-www-form-urlencoded mime 类型发出请求，就像来自 HTML 表单一样。

# xml - 命名空间中名为“name”的 XML 元素引用了不同的类型

> ID：10532271
> 
> 赞同：12
> 
> 时间：2012-05-10T10:37:58.370
> 
> 标签：xml, c#-4.0, namespaces, xml-serialization

请帮忙。从服务器反序列化数据时出现错误，

> 命名空间“”中的顶部 XML 元素“名称”引用了不同的类型 Object1.LocalStrings 和 System.String。使用 XML 属性为元素或类型指定另一个 XML 名称或命名空间。

我有一个 ObjectType 类，其中包含属性 Name 和`List<SupportedIp>`. SupportedIp 类也包含属性名称。请参考我下面的代码：

```
[XmlRootAttribute("SupportedIp", Namespace = "http://test.com/2010/test", IsNullable = false)]
public partial class SupportedIp
{[XmlElementAttribute(Namespace = "")]
    public string Name
    {
        get;
        set;
    } .... }

[GeneratedCodeAttribute("xsd", "2.0.50727.1432")]
[SerializableAttribute()]
[DebuggerStepThroughAttribute()]
[DesignerCategoryAttribute("code")]
[XmlTypeAttribute(Namespace = "http://test.com/2010/test")]
[XmlRootAttribute("ObjectType", Namespace = "http://test.com/2010/test", IsNullable = false)]
public partial class ObjectType
{

    /// <remarks/>
    [XmlElementAttribute(ElementName = "", Namespace = "")]
    public LocalStrings Name
    {
        get;
        set;
    }

    /// <remarks/>
    [XmlArrayAttribute(ElementName = "Supportedip", Namespace = "")]
    [XmlArrayItemAttribute(IsNullable = false, Namespace = "")]
    public List<Supportedip> Supportedip
    {
        get;
        set;
    }
} 
```

当应用程序到达**XmlSerializer**部分时，会显示错误。我看过一些相关的帖子，但没有具体的答案。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-15T14:36:28.377

从您写的内容来看，我认为问题在于您具有相同的元素名称`(namespace="", name="Name")`和两种不同类型的内容（字符串类型和本地字符串类型），这在 xml 中是非法的。这意味着每个 xml 解析器都应该引发您打印的致命错误。解决方案是更改元素的名称或使用相同的名称但将它们与不同的名称空间相关联。例如，而不是：

```
[XmlElementAttribute(Namespace = "")] 
```

你可以说：

```
[XmlElementAttribute(Namespace = "http://test.com/2010/test")] 
```

核心问题似乎是 XMLSerializer 使用 XSD 模式验证。这意味着您定义的每个 XmlElementAttribute 都附加了一个类型（从[此处](http://msdn.microsoft.com/en-us/library/182eeyhh%28v=vs.71%29.aspx)阅读更多内容）。XSD 约束之一是“Element Declarations Consistent”约束，这意味着任何两个具有相同名称（和命名空间）的元素必须具有相同的类型（从[此处](http://www.w3.org/TR/2009/WD-xmlschema11-1-20090130/#cos-element-consistent)阅读更多内容）。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T19:54:25.190

您在方法标头中声明的参数对于命名空间中的所有 Web 方法必须是唯一的。因为参数是soap:body 的顶级xml 标签。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-11T10:45:55.787

阅读错误：使用 XML 属性为元素指定另一个 XML 名称或命名空间

例子 ：

```
[XmlElement("Animal", typeof(Dog), Namespace = "...Dog")]
[XmlElement("Animal", typeof(Cat), Namespace = "...Cat")]
public Animal Animal; 
```

# gwt - gwt 菜单实现

> ID：10532272
> 
> 赞同：0
> 
> 时间：2012-05-10T10:38:01.623
> 
> 标签：gwt, menu, menuitem, gwt2

我想在 GWT 中实现菜单，如本网站所示：

[http://www.openkm.com/en/](http://www.openkm.com/en/)

我已经创建了菜单系统，并且可以使用以下代码从菜单中显示警报：

```
Command cmd = new Command() {
  public void execute() {
    Window.alert("Menu item have been selected");
  }
} 
```

我想摆脱 window.alert() 并从菜单中显示我的应用程序页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:50:28.427

创建并加载适当的页面。例如，如果您使用 UiBinder，则：

> ```
> MyPage selectedPage = new MyPage(); // creating of your panel
> RootPanel.get().clear(); // cleaning of rhe RootPanel    
> RootPanel.get().add(selectedPage); // adding the panel to the RootPanel 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T14:10:16.787

您是要制作整个页面 GWT，还是只制作菜单？如果只是菜单，则需要将 GWT 元素嵌入到整个 HTML 中，然后调用类似

```
Window.open(linkURL, "_self", ""); 
```

从相应的菜单项，这将导航到另一个页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:55:53.830

首先创建一个视图数组列表

```
public List<UIObject> viewsList = new ArrayList<UIObject>(); 
```

将视图添加到该列表

```
 viewsList.add(addMovieView); 
```

将要选择的视图发送到辅助方法

```
public void changeView(UIObject selectedView) {
  for(UIObject view : viewsList) {
    if(selectedView.equals(view)) {
      view.setVisible(true);
    } else {
      view.setVisible(false);
    }
  }
} 
```

# maven - Maven：在测试前提取依赖资源

> ID：10532274
> 
> 赞同：6
> 
> 时间：2012-05-10T10:38:02.833
> 
> 标签：maven, maven-2, maven-dependency-plugin

我有一个多模块 Maven 项目。一个子项目托管 XSL/XML 资源文件。另一个项目托管需要在其单元测试中使用这些文件的 Java 代码。

在依赖项的 jar 中，资源位于文件夹中`xml-resources`。

我找到了这个[示例](http://maven.apache.org/plugins/maven-dependency-plugin/examples/using-dependencies-sources.html)并尝试根据我的需要对其进行更改：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-dependency-plugin</artifactId>
  <version>2.4</version>
  <executions>
    <execution>
      <id>resource-dependencies</id>
      <phase>process-test-resources</phase>
      <goals>
        <goal>unpack-dependencies</goal>
      </goals>
      <configuration>
        <classifier>xml-resources</classifier>
        <outputDirectory>${project.build.directory}/classes/xml-resources</outputDirectory>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

当我运行 process-test-resources 阶段时，这不会做任何事情。我确信那里有一些错误 - 我看不到我可以在哪里指定资源应该从哪里获取，并且`<classifier>`似乎没有实际指定应该从哪里复制资源的源。

我在这里迷路了，有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T10:49:24.463

尝试这样的事情

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-dependency-plugin</artifactId>
  <version>2.4</version>
  <executions>
    <execution>
      <id>resource-dependencies</id>
      <phase>process-test-resources</phase>
      <goals>
        <goal>unpack-dependencies</goal>
      </goals>
      <configuration>
        <includeArtifactIds>my-artifact-id</includeArtifactIds>
        <includes>foobar.txt, loremipsum.xml</includes>
        <outputDirectory>${project.build.directory}/classes/xml-resources</outputDirectory>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

查看[unpack-dependencies 参数](http://maven.apache.org/plugins/maven-dependency-plugin/unpack-dependencies-mojo.html)以获取详细说明或更多信息。

# java - GWT 弹出面板是透明的？？

> ID：10532276
> 
> 赞同：0
> 
> 时间：2012-05-10T10:38:06.907
> 
> 标签：java, gwt, popup, gwt2, uibinder

我正在使用 Gwt ，

我有一个标签。在`onClick`Event 上有一个`PopupPanel`, Whre`tree`被添加。问题是它`popupPanel`是透明的。

`popup.show`执行的时候，`panel`后面`popupPanel`就被看穿了`popupPanel`。如何避免这种情况。

```
 .
    .
        lblClass.addClickHandler(new ClickHandler() {
                        public void onClick(ClickEvent event) {
                            getPopupPanel();
                        }
                    });
private PopupPanel getPopupPanel(){

            popupPanel = new PopupPanel();
            popupPanel.setStyleName("documentClass-PopPup");
            int x =lblClass.getAbsoluteLeft();
            int y = lblClass.getAbsoluteTop();
            popupPanel.setPopupPosition(x, y+20);
            popupPanel.add(getCustomPropertiesTree());
            popupPanel.show();

        return popupPanel;
    }

CSS 

.documentClass-PopPup {
    margin: 2px 1px 1px;
    padding: 2px 1px 1px;
    border-top: thick;
    border-right: medium;
    border-bottom: medium;
    border-left: medium;
    font-size: 10pt;
    letter-spacing: normal;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:18:37.487

为“documentClass-PopUp”定义背景颜色

```
.documentClass-PopPup {
  background-color: white;
} 
```

或使用

```
popupPanel.addStyleName("documentClass-PopPup"); 
```

代替

```
popupPanel.setStyleName("documentClass-PopPup"); 
```

# android - Android SQLite 奇怪的错误？

> ID：10532277
> 
> 赞同：0
> 
> 时间：2012-05-10T10:38:14.347
> 
> 标签：android, database, sqlite

我正在尝试从我的数据库中获取一些数据。这是我的代码：

```
}else if(menuItemName=="Toggle Reset Protection"){
    int is = updateData.getSingleProtect(listItemName, listTotal);
    int val = 0;
    if(is==0)
    {
      val = 1;
    }
    else 
      if(is==1)
      {
        val = 0;
      }
    updateData.protect(listItemName, listTotal, val); 
    onResume();
  } 
```

这是在上下文菜单中，而 updateData 是一个引用我的 SQLite 类的对象。出于某种原因，只有这段`else if()`代码在搞乱我的项目。

当它在那里时，错误控制台告诉我我不能这样做`updateData.open()`因为：

```
close() was never explicitly called on database...... 
```

但是当我删除我`else if`的代码块时，我没有收到这个错误。这里有什么问题？

这是我的完整上下文菜单代码：

```
public boolean onContextItemSelected(MenuItem item) {
AdapterView.AdapterContextMenuInfo info =(AdapterView.AdapterContextMenuInfo)item.getMenuInfo();
int menuItemIndex = item.getItemId();
String[] menuItems = new String[]{"Delete", "Edit", "Toggle Reset Protection", "Add"};
String menuItemName = menuItems[menuItemIndex];
final String listItemName = name[info.position];
final int listCurrent = current[info.position];
final int CurrentTarget = listCurrent+1;
final int listTotal = total[info.position];
SetSql updateData = new SetSql(SpellCast.this);
updateData.open();

if(menuItemName=="Delete"){
  updateData.delete(listItemName, listTotal);
  onResume();
}else if(menuItemName=="Add"){
  if(listCurrent<listTotal){
  updateData.changeCurrent(CurrentTarget, listCurrent, listItemName);
  onResume();
  }
  }else if(menuItemName=="Edit"){
  AlertDialog.Builder alert = new AlertDialog.Builder(this);
  alert.setTitle(listItemName);
  alert.setMessage("Enter new maximum value:");
  final EditText input = new EditText(this);
  alert.setView(input);
  input.setText(Integer.toString(listTotal));
  input.setFilters(new InputFilter[] {
            // Maximum 2 characters.
            new InputFilter.LengthFilter(3),
            // Digits only.
            DigitsKeyListener.getInstance(),  // Not strictly needed, IMHO.
        });

        // Digits only & use numeric soft-keyboard.
  input.setKeyListener(DigitsKeyListener.getInstance());
    alert.setPositiveButton("Change",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                     String totalString = input.getText().toString();
                     int totalv = Integer.parseInt(totalString);
                     changeTotal(totalv, listTotal, listItemName);
                     changeCurrent(totalv, listCurrent, listItemName);
                     onResume();
                }
            });

    alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            // do nothing
        }
    });
    alert.show();
  }else if(menuItemName=="Toggle Reset Protection"){

  int is = updateData.getSingleProtect(listItemName, listTotal);
  int val = 0;

  if(is==0){
      val = 1;
  }else if(is==1){
     val = 0;
  }
  updateData.protect(listItemName, listTotal, val); 
  onResume();
  }
  updateData.close();
  return true;
} 
```

这是我的 SQL 类：

```
private static class DbHelper extends SQLiteOpenHelper{

    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("CREATE TABLE " + DATABASE_CASTING + " (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_NAME + " VARCHAR NOT NULL, " +
                KEY_TOTAL + " INTEGER NOT NULL, " +
                KEY_CURRENT + " INTEGER NOT NULL, " +
                KEY_PROTECT + " INTEGER NOT NULL);"
                );
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_CASTING);
        onCreate(db);
    }

}

public SetSql(Context c){
    ourContext = c;
}

public SetSql open(){
    ourHelper = new DbHelper(ourContext);
    ourDatabase = ourHelper.getWritableDatabase();
    return this;
}

public void close(){
    ourHelper.close();
}

public void createEntry(String name, int total, int protect) {
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();
    cv.put(KEY_NAME, name);
    cv.put(KEY_TOTAL, total);
    cv.put(KEY_CURRENT, total);
    cv.put(KEY_PROTECT, protect);
    ourDatabase.insert(DATABASE_CASTING, null, cv);
}
public void changeCurrent(int value, int cval, String name){
    ourDatabase.execSQL("UPDATE " + DATABASE_CASTING + " SET " + KEY_CURRENT + " = '" + value + "' WHERE " + KEY_NAME + " = '" + name + "' AND " + KEY_CURRENT + " = '" + cval + "'");
}

public void changeTotal(int newtotal, int oldtotal, String name){
    ourDatabase.execSQL("UPDATE " + DATABASE_CASTING + " SET " + KEY_TOTAL + " = '" + newtotal + "' WHERE " + KEY_NAME + " = '" + name + "' AND " + KEY_TOTAL + " = '" + oldtotal + "'");
}

public String[] getNames() throws SQLException{
    String[] columns = new String[]{KEY_NAME};
    Cursor c = ourDatabase.query(DATABASE_CASTING, columns, null, null, null, null, KEY_ROWID);
    String[] result = new String[100];

    int iName = c.getColumnIndex(KEY_NAME);
    //might cause errors here below...
    int count = 0;
    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){ 
        result[count] = c.getString(iName);
        count++;
    }
    count = 0;
    return result;
}

public int[] getTotal(){
    int[] totals = new int[100];
    String[] columns = new String[]{KEY_TOTAL};
    Cursor c = ourDatabase.query(DATABASE_CASTING, columns, null, null, null, null, KEY_ROWID);
    int iTotal = c.getColumnIndex(KEY_TOTAL);

    int count = 0;
    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        totals[count] = c.getInt(iTotal);
        count++;
    }
    count = 0;
    return totals;
}
public int[] getCurrent(){
    int[] currents = new int[100];
    String[] columns = new String[]{KEY_CURRENT};
    Cursor c = ourDatabase.query(DATABASE_CASTING, columns, null, null, null, null, KEY_ROWID);
    int iCurrent = c.getColumnIndex(KEY_CURRENT);

    int count = 0;
    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        currents[count] = c.getInt(iCurrent);
        count++;
    }
    count = 0;
    return currents;
}
public int enteries(){
    int num = 0;
    String[] columns = new String[]{KEY_ROWID};
    Cursor c = ourDatabase.query(DATABASE_CASTING, columns, null, null, null, null, null);
    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        num++;
    }
    return num;
}

public void delete(String name, int total) {
    // TODO Auto-generated method stub
    ourDatabase.execSQL("DELETE FROM " + DATABASE_CASTING + " WHERE " + KEY_NAME + " = '" + name + "' AND " + KEY_TOTAL + " = '" + total + "'");
}

public int[] getProtect(){
    int[] protect = new int[100];

    String q = "SELECT " + KEY_PROTECT + " FROM " + DATABASE_CASTING + " ORDER BY " + KEY_ROWID  + ";";
    Cursor mCursor = ourDatabase.rawQuery(q, null);

    int iProt = mCursor.getColumnIndex(KEY_PROTECT);

    int count = 0;
    for(mCursor.moveToFirst(); !mCursor.isAfterLast(); mCursor.moveToNext()){
        protect[count] = Integer.parseInt(mCursor.getString(iProt));
        count++;
    }
    count = 0;

    return protect;
}

public void protect(String name, int total, int value){
    ourDatabase.execSQL("UPDATE " + DATABASE_CASTING + " SET " + KEY_PROTECT + " = '" + value + "' WHERE " + KEY_NAME + " = '" + name + "' AND " + KEY_TOTAL + " = '" + total + "';");
}

public int getSingleProtect(String name, int total){
    String q = "SELECT * FROM " + DATABASE_CASTING + " WHERE " + KEY_NAME +  " = '" + name +"' AND " + KEY_TOTAL + " = '" + total + "';";
    Cursor mCursor = ourDatabase.rawQuery(q, null);

    int index = mCursor.getColumnIndex(KEY_PROTECT);
    int prot = mCursor.getInt(index);

    return prot;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:51:43.840

重新格式化你的代码，这样我就可以看到谁对谁做了什么，不确定错误是什么，因为我不做这些事情，但不同的是。

```
 else 
      if(is==1)
      {
        val = 0;
      }
    updateData.protect(listItemName, listTotal, val); 
    onResume(); 
```

相对

```
 else 
   {
      if(is==1)
      {
        val = 0;
      }
      updateData.protect(listItemName, listTotal, val); 
      onResume();
   } 
```

即第一个中的第二个 updateData 调用被调用，无论没有`else if`或带有一些额外的大括号，只有在它为真时才被调用。

考虑一下如何缩进代码，这不仅仅是可读性。

# oracle - oracle中将行转换为列

> ID：10532283
> 
> 赞同：0
> 
> 时间：2012-05-10T10:38:56.763
> 
> 标签：oracle, row

> **可能重复：**
> [Oracle 将行转换为列](https://stackoverflow.com/questions/9043152/oracle-convert-rows-to-columns)

我有以下情景。

我每周都会获取帐户数据，并且我必须维护一个包含 100 周历史记录的表格（涉及很多业务逻辑，现在不要介意）

例如：我的输入文件是

第 1 周：

```
键 1 键 2 值
1 1 100
1 2 200

```

第 2 周：

```
1 1 100
1 3 300

```

第 3 周：

```
1 1 100
1 2 200
1 3 300

```

目标应该是

```
键 1 键 2 周 1 周 2 周 3
1 1 100 100 100
1 2 200 无 200
1 3 300 300

```

规则：

1.  记录出现的那一周是记录的开始周（week1）
2.  从那里开始需要记录存在或不存在。

注意：记录量非常大，因此无法执行一些随机更新和连接

# java - 如何在所有文本组件中使用 Ctrl+Z 和 Ctrl+Y？

> ID：10532286
> 
> 赞同：10
> 
> 时间：2012-05-10T10:39:04.920
> 
> 标签：java, swing, undo, swingx, redo

事实上，我知道如何在一个 JTextField 中使用`CTRL`+ `Z`(Undo) 和`CTRL`+ (Redo) 来实现。`Y`但是我的 Swing 应用程序中有数百个文本组件，所以有没有办法将它应用于我的应用程序中的所有文本组件，所以当我在任何文本组件中单击`CTRL`+时`Z`，它会撤消该字段中的最后一个条目？

我试图在[EventQueue](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/EventQueue.html)中实现它，但它不起作用！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-15T21:32:11.723

要使所有文本组件“可撤消”，您可以使用自己的子类简单地创建它们，例如：

```
public class MyTextField extends JTextField {
    public MyTextField() {
        final UndoManager undoMgr = new UndoManager();

        // Add listener for undoable events
        getDocument().addUndoableEditListener(new UndoableEditListener() {
            public void undoableEditHappened(UndoableEditEvent pEvt) {
                undoMgr.addEdit(pEvt.getEdit());
            }
        });

        // Add undo/redo actions
        getActionMap().put(UNDO_ACTION, new AbstractAction(UNDO_ACTION) {
            public void actionPerformed(ActionEvent pEvt) {
                try {
                    if (undoMgr.canUndo()) {
                        undoMgr.undo();
                    }
                } catch (CannotUndoException e) {
                    e.printStackTrace();
                }
            }
        });
        getActionMap().put(REDO_ACTION, new AbstractAction(REDO_ACTION) {
            public void actionPerformed(ActionEvent pEvt) {
                try {
                    if (undoMgr.canRedo()) {
                        undoMgr.redo();
                    }
                } catch (CannotRedoException e) {
                    e.printStackTrace();
                }
            }
        });

        // Create keyboard accelerators for undo/redo actions (Ctrl+Z/Ctrl+Y)
        getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_Z, InputEvent.CTRL_DOWN_MASK),
            UNDO_ACTION);
        getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_Y, InputEvent.CTRL_DOWN_MASK),
            REDO_ACTION);
    }
} 
```

然后不是创建`JTextField`s，而是创建`MyTextField`s。限制是您可能还想`JTextArea`为 other 创建另一个子类，依此类推`JTextComponent`。因此，也可以使用实用程序方法将撤消/重做功能添加到任何现有的`JTextCompoent`：

```
public final static String UNDO_ACTION = "Undo";

public final static String REDO_ACTION = "Redo";

public static void makeUndoable(JTextComponent pTextComponent) {
    final UndoManager undoMgr = new UndoManager();

    // Add listener for undoable events
    pTextComponent.getDocument().addUndoableEditListener(new UndoableEditListener() {
        public void undoableEditHappened(UndoableEditEvent evt) {
            undoMgr.addEdit(evt.getEdit());
        }
    });

    // Add undo/redo actions
    pTextComponent.getActionMap().put(UNDO_ACTION, new AbstractAction(UNDO_ACTION) {
        public void actionPerformed(ActionEvent evt) {
            try {
                if (undoMgr.canUndo()) {
                    undoMgr.undo();
                }
            } catch (CannotUndoException e) {
                e.printStackTrace();
            }
        }
    });
    pTextComponent.getActionMap().put(REDO_ACTION, new AbstractAction(REDO_ACTION) {
        public void actionPerformed(ActionEvent evt) {
            try {
                if (undoMgr.canRedo()) {
                    undoMgr.redo();
                }
            } catch (CannotRedoException e) {
                e.printStackTrace();
            }
        }
    });

    // Create keyboard accelerators for undo/redo actions (Ctrl+Z/Ctrl+Y)
    pTextComponent.getInputMap().put(
        KeyStroke.getKeyStroke(KeyEvent.VK_Z, InputEvent.CTRL_DOWN_MASK), UNDO_ACTION);
    pTextComponent.getInputMap().put(
        KeyStroke.getKeyStroke(KeyEvent.VK_Y, InputEvent.CTRL_DOWN_MASK), REDO_ACTION);
} 
```

[最终且绝对透明的解决方案是使用Lnf features](https://stackoverflow.com/questions/2592207/how-to-improve-look-and-feel-of-java-swing-gui)实现您自己的 UI 类，但您可能需要在使所有 TextComponents 都可撤消之前三思而后行，例如，如果您经常对这些组件执行大量文本修改...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T12:10:44.953

*   您可以凝胶化 API 中实现的内置 KeyBindings 快捷方式列表

*   请注意，您必须检查或准备您的代码以获得所有可访问的外观和感觉

*   您可以获得内置的 KeyBindings 快捷方式并按照您的预期替换它，系统剪贴板经常被修改，

*   从未尝试过，但在这个论坛上你可以找到相关信息如何更改，替换 KeyBindings 快捷方式

内置 KeyBindings 快捷方式列表

```
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.util.*;
import javax.swing.*;
import javax.swing.border.*;
import javax.swing.table.*;
import javax.swing.filechooser.*;

public class KeyBindings implements ItemListener {

    private static final String PACKAGE = "javax.swing.";
    private static final String[] COLUMN_NAMES = {"Action", "When Focused", "When In Focused Window", "When Ancestor"};
    private static String selectedItem;
    private JComponent contentPane;
    private JMenuBar menuBar;
    private JTable table;
    private JComboBox comboBox;
    private Hashtable<String, DefaultTableModel> models;

    /*
     *  Constructor
     */
    public KeyBindings() {
        models = new Hashtable<String, DefaultTableModel>();
        contentPane = new JPanel(new BorderLayout());
        contentPane.add(buildNorthComponent(), BorderLayout.NORTH);
        contentPane.add(buildCenterComponent(), BorderLayout.CENTER);
        resetComponents();
    }

    /*
     *  The content pane should be added to a high level container
     */
    public JComponent getContentPane() {
        return contentPane;
    }

    /*
     *  A menu can also be added which provides the ability to switch
     *  between different LAF's.
     */
    public JMenuBar getMenuBar() {
        if (menuBar == null) {
            menuBar = createMenuBar();
        }
        return menuBar;
    }

    /*
     *  This panel is added to the North of the content pane
     */
    private JComponent buildNorthComponent() {
        comboBox = new JComboBox();
        JLabel label = new JLabel("Select Component:");
        label.setDisplayedMnemonic('S');
        label.setLabelFor(comboBox);
        JPanel panel = new JPanel();
        panel.setBorder(new EmptyBorder(15, 0, 15, 0));
        panel.add(label);
        panel.add(comboBox);
        return panel;
    }

    /*
     *  Check the key name to see if it is the UI property
     */
    private String checkForUIKey(String key) {
        if (key.endsWith("UI") && key.indexOf('.') == -1) {
            String componentName = key.substring(0, key.length() - 2);//  Ignore these components
            if (componentName.equals("PopupMenuSeparator") || componentName.equals("ToolBarSeparator") || componentName.equals("DesktopIcon")) {
                return null;
            } else {
                return componentName;
            }
        }
        return null;
    }

    /*
     **  Build the emtpy table to be added in the Center
     */
    private JComponent buildCenterComponent() {
        DefaultTableModel model = new DefaultTableModel(COLUMN_NAMES, 0);
        table = new JTable(model) {

            private static final long serialVersionUID = 1L;

            @Override
            public boolean isCellEditable(int row, int column) {
                return false;
            }
        };
        table.setAutoCreateColumnsFromModel(false);
        table.getColumnModel().getColumn(0).setPreferredWidth(200);
        table.getColumnModel().getColumn(1).setPreferredWidth(200);
        table.getColumnModel().getColumn(2).setPreferredWidth(200);
        table.getColumnModel().getColumn(3).setPreferredWidth(200);
        Dimension d = table.getPreferredSize();
        d.height = 350;
        table.setPreferredScrollableViewportSize(d);
        table.getTableHeader().setFocusable(true);
        return new JScrollPane(table);
    }

    /*
     *  When the LAF is changed we need to reset all the items
     */
    private void resetComponents() {
        models.clear();
        ((DefaultTableModel) table.getModel()).setRowCount(0);
        Vector<String> comboBoxItems = new Vector<String>(50);//        buildItemsMap();
        UIDefaults defaults = UIManager.getLookAndFeelDefaults();
        for (Object key : defaults.keySet()) { //  All Swing components will have a UI property.
            String componentName = checkForUIKey(key.toString());
            if (componentName != null) {
                comboBoxItems.add(componentName);
            }
        }
        Collections.sort(comboBoxItems);
        comboBox.removeItemListener(this);
        comboBox.setModel(new DefaultComboBoxModel(comboBoxItems));
        comboBox.setSelectedIndex(-1);
        comboBox.addItemListener(this);
        comboBox.requestFocusInWindow();
        if (selectedItem != null) {
            comboBox.setSelectedItem(selectedItem);
        }
    }

    /**
     *  Create menu bar
     */
    private JMenuBar createMenuBar() {
        JMenuBar menuBar1 = new JMenuBar();
        menuBar1.add(createFileMenu());
        menuBar1.add(createLAFMenu());
        return menuBar1;
    }

    /**
     *  Create menu items for the Application menu
     */
    private JMenu createFileMenu() {
        JMenu menu = new JMenu("Application");
        menu.setMnemonic('A');
        menu.addSeparator();
        menu.add(new ExitAction());
        return menu;
    }

    /**
     *  Create menu items for the Look & Feel menu
     */
    private JMenu createLAFMenu() {
        ButtonGroup bg = new ButtonGroup();
        JMenu menu = new JMenu("Look & Feel");
        menu.setMnemonic('L');
        String lafId = UIManager.getLookAndFeel().getID();
        UIManager.LookAndFeelInfo[] lafInfo = UIManager.getInstalledLookAndFeels();
        for (int i = 0; i < lafInfo.length; i++) {
            String laf = lafInfo[i].getClassName();
            String name = lafInfo[i].getName();
            Action action = new ChangeLookAndFeelAction(laf, name);
            JRadioButtonMenuItem mi = new JRadioButtonMenuItem(action);
            menu.add(mi);
            bg.add(mi);
            if (name.equals(lafId)) {
                mi.setSelected(true);
            }
        }
        return menu;
    }

    /*
     *  Implement the ItemListener interface
     */
    @Override
    public void itemStateChanged(ItemEvent e) {
        String componentName = (String) e.getItem();
        changeTableModel(getClassName(componentName));
        selectedItem = componentName;
    }

    /*
     *  Use the component name to build the class name
     */
    private String getClassName(String componentName) {
        if (componentName.equals("TableHeader")) {//  The table header is in a child package
            return PACKAGE + "table.JTableHeader";
        } else {
            return PACKAGE + "J" + componentName;
        }
    }

    /*
     *  Change the TabelModel in the table for the selected component
     */
    private void changeTableModel(String className) {
        DefaultTableModel model = models.get(className); //  Check if we have already built the table model for this component
        if (model != null) {
            table.setModel(model);
            return;
        }
        model = new DefaultTableModel(COLUMN_NAMES, 0); //  Create an empty table to start with
        table.setModel(model);
        models.put(className, model);
        JComponent component = null; //  Create an instance of the component so we can get the default Action map and Input maps
        try {
            if (className.endsWith("JFileChooser")) {//  Hack so I don't have to sign the jar file for usage in  Java Webstart
                component = new JFileChooser(new DummyFileSystemView());
            } else {
                Object o = Class.forName(className).newInstance();
                component = (JComponent) o;
            }
        } catch (Exception e) {
            Object[] row = {e.toString(), "", "", ""};
            model.addRow(row);
            return;
        }
        ActionMap actionMap = component.getActionMap(); //  Not all components have Actions defined
        Object[] keys = actionMap.allKeys();
        if (keys == null) {
            Object[] row = {"No actions found", "", "", ""};
            model.addRow(row);
            return;
        }
        //  In some ActionMaps a key of type Object is found (I have no idea why)
        //  which causes a ClassCastExcption when sorting so we will ignore it
        //  by converting that entry to the empty string
        for (int i = 0; i < keys.length; i++) {
            Object key = keys[i];
            if (key instanceof String) {
                continue;
            } else {
                keys[i] = "";
            }
        }
        Arrays.sort(keys);
        for (int i = 0; i < keys.length; i++) { //  Create a new row in the model for every Action found
            Object key = keys[i];
            if (key != "") {
                Object[] row = {key, "", "", ""};
                model.addRow(row);
            }
        }
        //  Now check each InputMap to see if a KeyStroke is bound the the Action
        updateModelForInputMap(model, 1, component.getInputMap(JComponent.WHEN_FOCUSED));
        updateModelForInputMap(model, 2, component.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW));
        updateModelForInputMap(model, 3, component.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT));
    }

    /*
     *  The model is potentially update for each of the 3 different InputMaps
     */
    private void updateModelForInputMap(TableModel model, int column, InputMap inputMap) {
        if (inputMap == null) {
            return;
        }
        KeyStroke[] keys = inputMap.allKeys();
        if (keys == null) {
            return;
        }
        //  The InputMap is keyed by KeyStroke, however we want to be able to
        //  access the action names that are bound to a KeyStroke so we will create
        //  a Hashtble that is keyed by action name.
        //  Note that multiple KeyStrokes can be bound to the same action name.
        Hashtable<Object, String> actions = new Hashtable<Object, String>(keys.length);
        for (int i = 0; i < keys.length; i++) {
            KeyStroke key = keys[i];
            Object actionName = inputMap.get(key);
            Object value = actions.get(actionName);
            if (value == null) {
                actions.put(actionName, key.toString().replace("pressed ", ""));
            } else {
                actions.put(actionName, value + ", " + key.toString().replace("pressed ", ""));
            }
        }
        for (int i = 0; i < model.getRowCount(); i++) {
            //  Now we can update the model for those actions that have  KeyStrokes mapped to them
            String o = actions.get(model.getValueAt(i, 0));
            if (o != null) {
                model.setValueAt(o.toString(), i, column);
            }
        }
    }

    /*
     *  Change the LAF and recreate the UIManagerDefaults so that the properties
     *  of the new LAF are correctly displayed.
     */
    private class ChangeLookAndFeelAction extends AbstractAction {

        private static final long serialVersionUID = 1L;
        private String laf;

        protected ChangeLookAndFeelAction(String laf, String name) {
            this.laf = laf;
            putValue(Action.NAME, name);
            putValue(Action.SHORT_DESCRIPTION, getValue(Action.NAME));
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            try {
                JMenuItem mi = (JMenuItem) e.getSource();
                JPopupMenu popup = (JPopupMenu) mi.getParent();
                JRootPane rootPane = SwingUtilities.getRootPane(popup.getInvoker());
                Component c = rootPane.getContentPane().getComponent(0);
                rootPane.getContentPane().remove(c);
                UIManager.setLookAndFeel(laf);
                KeyBindings bindings = new KeyBindings();
                rootPane.getContentPane().add(bindings.getContentPane());
                SwingUtilities.updateComponentTreeUI(rootPane);
                rootPane.requestFocusInWindow();
            } catch (Exception ex) {
                System.out.println("Failed loading L&F: " + laf);
                System.out.println(ex);
            }
        }
    }

    private class ExitAction extends AbstractAction {

        private static final long serialVersionUID = 1L;

        public ExitAction() {
            putValue(Action.NAME, "Exit");
            putValue(Action.SHORT_DESCRIPTION, getValue(Action.NAME));
            putValue(Action.MNEMONIC_KEY, new Integer(KeyEvent.VK_X));
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            System.exit(0);
        }
    }

    private class DummyFileSystemView extends FileSystemView {

        @Override
        public File createNewFolder(File containingDir) {
            return null;
        }

        @Override
        public File getDefaultDirectory() {
            return null;
        }

        @Override
        public File getHomeDirectory() {
            return null;
        }
    }

    private static void createAndShowGUI() {
        KeyBindings application = new KeyBindings();
        JFrame.setDefaultLookAndFeelDecorated(true);
        JFrame frame = new JFrame("Key Bindings");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setJMenuBar(application.getMenuBar());
        frame.getContentPane().add(application.getContentPane());
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //UIManager.put("swing.boldMetal", Boolean.FALSE);
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T11:25:33.403

如果您想在您的应用程序上运行“全局事件”，无论您当前的焦点在哪里，您都需要使用 KeyboardFocusManager ：

```
 KeyboardFocusManager kfm = KeyboardFocusManager.getCurrentKeyboardFocusManager();
    kfm.addKeyEventDispatcher(new KeyEventDispatcher() {

        @Override
        public boolean dispatchKeyEvent(KeyEvent e) {
            // do your stuff here
            return done;
        }
    }); 
```

希望这可以帮助。

# java - 如何配置特定 FileHandler 的属性

> ID：10532291
> 
> 赞同：6
> 
> 时间：2012-05-10T10:39:15.530
> 
> 标签：java, logging, java.util.logging

Java 日志记录配置文件让我定义命名记录器的属性，例如

```
name.heikoseeberger.heikotron.level = FINE
name.heikoseeberger.heikotron.handlers = java.util.logging.FileHandler 
```

到目前为止，一切都很好。现在我想配置**那个特定的** *FileHandler*，例如使用一个特定的输出文件。不幸的是，我只知道如何配置“全局” *FileHandler*，它已经存在于配置文件中：

```
java.util.logging.FileHandler.pattern = %h/java%u.log
java.util.logging.FileHandler.limit = 50000
java.util.logging.FileHandler.count = 1
java.util.logging.FileHandler.formatter = java.util.logging.XMLFormatter 
```

我不想配置这个，而是与我的自定义*Logger*关联的实例。我已经尝试了以下方法，但没有成功：

```
name.heikoseeberger.heikotron.java.util.logging.FileHandler.pattern = %h/heikotron.log
name.heikoseeberger.heikotron.java.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter 
```

是否可以设置特定*FileHandler*实例的属性？如果是，应该如何识别/命名这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T15:51:38.377

这是通过使用[LogManger](http://docs.oracle.com/javase/7/docs/api/java/util/logging/LogManager.html)`config`的顶级类文档中描述的选项来完成的。使用公共构造函数创建一个公共命名类，并调用配置处理程序所需的所有 java 调用。然后在您的日志记录属性中指示 LogManager 加载您创建的类以配置您的处理程序。否则，您可以将文件处理程序子类化，这将创建一个自定义命名空间来配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T04:37:14.090

我认为不可能。如果您查看源代码，`FileHandler`您很快就会确定它使用字符串`"java.util.logging.FileHandler.pattern`" 来确定用于记录目的的文件模式

```
private void configure() {
        LogManager manager = LogManager.getLogManager();

        String cname = getClass().getName();

        pattern = manager.getStringProperty(cname + ".pattern", "%h/java%u.log");
        limit = manager.getIntProperty(cname + ".limit", 0);
        //...
    } 
```

因此，处理程序甚至不会考虑您放入文件中的配置。

在我看来，处理程序不知道任何特定记录器（即`name.heikoseeberger.heikotro`n）的存在，他们只知道如何发布给定的 LogRecord。

据我所见，特定记录器的处理程序是`LogManager`通过反射调用其默认构造函数来创建的，因此，当创建给定处理程序时，它不知道已请求哪个特定记录器，即这就是为什么它们的所有属性都是通过它们自己的类名而不是通过记录器的名称设置的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T10:42:14.870

如果我理解正确，您正在尝试使用 package.json 写入不同的日志文件`java.util.logging`。这不能在不扩展的情况下开箱即用。

如果您无法切换到另一个日志框架，例如[Logback](http://logback.qos.ch/)，请查看 java util logging.properties 的答案 [：如何登录到两个不同的文件](https://stackoverflow.com/questions/3639694/java-util-logging-properties-how-to-log-to-two-different-files)，看看它是否符合您的需求。

# javascript - flashfirebug 从 actionscript 3 控制台获取数据

> ID：10532292
> 
> 赞同：0
> 
> 时间：2012-05-10T10:39:17.317
> 
> 标签：javascript, actionscript-3, flash, actionscript, firebug

我的需要是从网页中的闪存中捕获数据（文本数据）。数据总是在变化（无论数据），这应该导出为一个文本文件，这样我就可以操纵这些数据。

我试过这样做，我的第一种方法是使用像 fiddler 或 wireshark 这样的 websniffer。我使用了它，但无法从两者中获取数据，因为它嵌入在闪存中。我将提琴手用作中间人，wireshark 解密数据（使用来自站点 cer 的私钥），但它没有用。

之后我尝试使用 flashfirebug pro（pro 允许在控制台中运行 as3 命令）。这个插件加载 dom 树并刷新它。在页面中使用检查器选择所需元素后（它在左侧面板中显示实例和 dom 中的位置）我可以访问实例属性（唯一需要的是右侧面板中的“html-text”） .

我对最后一种方法的问题是它无法与本地文件系统通信（如果我在控制台中创建“trace(this.text);”它会显示文本值，但它只显示在控制台中）。我能想到的与硬盘驱动器中的文件通信的唯一方法是向日志文件抛出一些错误，但也不能这样做。

有没有人知道使用 flashfirebug 或有其他方法来做到这一点。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:04:31.473

如果您想在本地文件系统上工作，请使用 adobe air。如果不能，请尝试使用 javascript 绕过浏览器沙箱作为连接某些浏览器插件/插件的桥梁，从而使您可以访问本地进程和文件系统。要使用 Flash 中的 JavaScript，[ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)类是您的朋友。

# sql - 用 SQL 分批查询多个关键字

> ID：10532293
> 
> 赞同：0
> 
> 时间：2012-05-10T10:39:20.187
> 
> 标签：sql, database, postgresql

我有一个包含 50 个项目的列表，我想从我的数据库（Postgres）中提取一些其他相关的数据。一种方法是编写一个简单的`SELECT`语句并在每次替换项目时手动进行。但我认为这是非常愚蠢的做法。我有可能以自动方式完成这项工作吗？是否有一个 For 循环或 SQL 中的某些东西可以用来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:47:10.673

该`IN`构造有助于对多个值进行选择。

```
select * from MyTable where myfield in ( value1, value2, value3, value50 ); 
```

# flash - TypeError：错误＃1006：编码不是函数

> ID：10532303
> 
> 赞同：0
> 
> 时间：2012-05-10T10:40:06.637
> 
> 标签：flash, png, flash-cs5, filereference

我不断收到这个错误，这让我发疯。这是我第一次尝试将 a 导出`Flash MovieClip`到可下载的`*.PNG`文件中。我按照在线指南并实施了 Adob​​e 的`PNGEncoder.as`“图像”。

> 指南：[http](http://permadi.com/blog/2011/02/flash-as3-saving-image-to-disk/) ://permadi.com/blog/2011/02/flash-as3-saving-image-to-disk/ PNGEncoder：[https ://github.com/mikechambers/as3corelib/tree/master/src/com/土坯/图像/](https://github.com/mikechambers/as3corelib/tree/master/src/com/adobe/images/)

我设置了`PNGEncoder.as`课程并更改了偏好，以便`Flash`识别它（已确认）。现在，当我运行`SWF`并单击按钮时，它什么也不做，输出说`TypeError: Error #1006: encode is not a function.`

```
import flash.display.MovieClip;
import flash.display.Bitmap;
import customClasses.PNGEncoder;
import flash.net.FileReference;
import flash.utils.ByteArray;

stop();

/*
CAMERA button command
Opens download command window to save instance of theBike as .PNG

*/

CAMERA.addEventListener(MouseEvent.CLICK, fl_ClickToGoToAndStopAtFrame_20);

function fl_ClickToGoToAndStopAtFrame_20(event:MouseEvent):void
{
// source for the bitmap data in this case is a text field
var tf:MovieClip = Object(root).bike;

// create new transparent BitmapData object to hold the captured data
// BitmapData(width, height, transparent, color)
var myBitmapData:BitmapData = new BitmapData(640, 406, true, 0x000000);

// draw the source data into the BitmapData object
myBitmapData.draw(tf);

// make a new Bitmap object and populate with the BitmapData object
var bmp:Bitmap = new Bitmap(myBitmapData);

var myPNG:PNGEncoder = new PNGEncoder();
var byteArray:ByteArray = myPNG.encode(myBitmapData); <-- PROBLEM HERE

var fileReference:FileReference=new FileReference();
fileReference.save(byteArray, "bike.png");
} 
```

来自 PNGEncoder.as：

```
package customClasses
{
    import flash.geom.*;
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.utils.ByteArray;

/**
 * Class that converts BitmapData into a valid PNG
 */ 
public class PNGEncoder
{
    /**
     * Created a PNG image from the specified BitmapData
     *
     * @param image The BitmapData that will be converted into the PNG format.
     * @return a ByteArray representing the PNG encoded image data.
     */         
    public static function encode(img:BitmapData):ByteArray {
        // Create output byte array
        var png:ByteArray = new ByteArray();
        // Write PNG signature
        png.writeUnsignedInt(0x89504e47);
        png.writeUnsignedInt(0x0D0A1A0A);
        // Build IHDR chunk
        var IHDR:ByteArray = new ByteArray();
        IHDR.writeInt(img.width);
        IHDR.writeInt(img.height);
        IHDR.writeUnsignedInt(0x08060000); // 32bit RGBA
        IHDR.writeByte(0);
        writeChunk(png,0x49484452,IHDR);
        // Build IDAT chunk
        var IDAT:ByteArray= new ByteArray();
        for(var i:int=0;i < img.height;i++) {
            // no filter
            IDAT.writeByte(0);
            var p:uint;
            var j:int;
            if ( !img.transparent ) {
                for(j=0;j < img.width;j++) {
                    p = img.getPixel(j,i);
                    IDAT.writeUnsignedInt(
                        uint(((p&0xFFFFFF) << 8)|0xFF));
                }
            } else {
                for(j=0;j < img.width;j++) {
                    p = img.getPixel32(j,i);
                    IDAT.writeUnsignedInt(
                        uint(((p&0xFFFFFF) << 8)|
                        (p>>>24)));
                }
            }
        }
        IDAT.compress();
        writeChunk(png,0x49444154,IDAT);
        // Build IEND chunk
        writeChunk(png,0x49454E44,null);
        // return PNG
        return png;
    }

    private static var crcTable:Array;
    private static var crcTableComputed:Boolean = false;

    private static function writeChunk(png:ByteArray, 
            type:uint, data:ByteArray):void {
        if (!crcTableComputed) {
            crcTableComputed = true;
            crcTable = [];
            var c:uint;
            for (var n:uint = 0; n < 256; n++) {
                c = n;
                for (var k:uint = 0; k < 8; k++) {
                    if (c & 1) {
                        c = uint(uint(0xedb88320) ^ 
                            uint(c >>> 1));
                    } else {
                        c = uint(c >>> 1);
                    }
                }
                crcTable[n] = c;
            }
        }
        var len:uint = 0;
        if (data != null) {
            len = data.length;
        }
        png.writeUnsignedInt(len);
        var p:uint = png.position;
        png.writeUnsignedInt(type);
        if ( data != null ) {
            png.writeBytes(data);
        }
        var e:uint = png.position;
        png.position = p;
        c = 0xffffffff;
        for (var i:int = 0; i < (e-p); i++) {
            c = uint(crcTable[
                (c ^ png.readUnsignedByte()) & 
                uint(0xff)] ^ uint(c >>> 8));
        }
        c = uint(c^uint(0xffffffff));
        png.position = e;
        png.writeUnsignedInt(c);
    }
}
} 
```

我在这里搜索了论坛，发现了类似的问题，但我还没有弄清楚如何解决这个问题。如果您有任何想法，请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:10:27.557

也许是因为你制作了`encode()`静态？见[这里](https://stackoverflow.com/questions/9143504/flash-as3-calling-a-function-from-a-class-within-a-seperate-class)。

顺便说一句，我希望您将它用于小图像，因为“无过滤器”的 PNG 将非常大。

# hadoop - 来自 org.apache.hadoop.hive.ql.exec.mapredtask 的配置单元执行错误返回代码 2 失败

> ID：10532304
> 
> 赞同：3
> 
> 时间：2012-05-10T10:40:08.603
> 
> 标签：hadoop, hive

我有一个查询。它在 Hive CLI 上执行良好并返回结果。但是当我在 Hive JDBC 的帮助下执行它时，出现以下错误：

```
java.sql.SQLException: Query returned non-zero code: 9, cause: FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask
    at org.apache.hadoop.hive.jdbc.HiveStatement.executeQuery(HiveStatement.java:192) 
```

问题是什么？此外，我正在通过 Shell 脚本启动 Hive Thrift 服务器。（我编写了一个 shell 脚本，其中包含启动 Hive Thrift Server 的命令）后来我决定通过键入以下命令手动启动 Hive thrift Server：

```
hadoop@ubuntu:~/hive-0.7.1$ bin/hive --service hiveserver
Starting Hive Thrift Server
org.apache.thrift.transport.TTransportException: Could not create ServerSocket on address 0.0.0.0/0.0.0.0:10000.
    at org.apache.thrift.transport.TServerSocket.<init>(TServerSocket.java:99)
    at org.apache.thrift.transport.TServerSocket.<init>(TServerSocket.java:80)
    at org.apache.thrift.transport.TServerSocket.<init>(TServerSocket.java:73)
    at org.apache.hadoop.hive.service.HiveServer.main(HiveServer.java:384)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:186)

hadoop@ubuntu:~/hive-0.7.1$ 
```

请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:34:45.017

可能是权限问题，只需尝试一些查询，例如“SELECT * FROM”，它不会启动 MR 作业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T15:13:08.920

对于这个错误：
`java.sql.SQLException: Query returned non-zero code: 9, cause: FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask at org.apache.hadoop.hive.jdbc.HiveStatement.executeQuer`

转到此链接：

[http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/UsingEMR_Hive.html](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/UsingEMR_Hive.html)

并添加

```
**hadoop-0.20-core.jar
hive/lib/hive-exec-0.7.1.jar
hive/lib/hive-jdbc-0.7.1.jar
hive/lib/hive-metastore-0.7.1.jar
hive/lib/hive-service-0.7.1.jar
hive/lib/libfb303.jar
lib/commons-logging-1.0.4.jar    
slf4j-api-1.6.1.jar
slf4j-log4j12-1.6.1.jar** 
```

到项目的类路径中，从 hadoop 和 hive 的库中添加这个 jar，然后尝试代码。并将 hadoop、hive 和 hbase（如果您正在使用）lib 文件夹路径添加到项目类路径中，就像您添加了 jars 一样。

对于你得到的第二个错误

类型

```
**netstat -nl | grep 10000** 
```

如果它显示某些东西意味着 hive 服务器已经在运行。只有当您指定的端口已被其他进程获取时，第二个错误才会出现，默认情况下，服务器端口是 10000，因此非常符合我所说的上述 netstat 命令。

注意：假设您已使用... bin/hive 的代码退出进行连接，如果您通过 bin/hive > 连接，则代码将无法连接，因为我认为（不确定）只有一个客户端可以连接到 hive 服务器。

执行上述步骤希望能解决您的问题。

注意：当你要执行代码时退出 cli，并且不要在代码正在执行时启动 cli。

# jquery - jQuery UI 可拖动限制

> ID：10532307
> 
> 赞同：0
> 
> 时间：2012-05-10T10:40:23.197
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我正在使用 jQuery UI 可拖动模块，我想做一件简单的事情，但我找不到任何使用 Google 的帮助（也许我搜索错误）。这是我的代码：

```
 $("#table").draggable({
     axis: "x",
     drag: function() {
         if(parseInt($(this).css("left")) <= 0)
         {
             return false;
         }   
     }   
 }); 
```

除了我想阻止可拖动元素达到低于 0 的 CSS 左值之外，你可以这样做。但是这段代码不起作用 - 如果我将元素拖动到 CSS 左值 0 之外，它会阻塞。你可以帮帮我吗？

**更新：**

@VisioN 感谢您的帮助。现在一切都按我的意愿工作。这是我的最终代码。也许它可以帮助儿子：

```
var table_dim = [1898, 1024];
width = Math.round((table_dim[0]/table_dim[1])*$(window).height());
height = $(window).height();
$(document.createElement("img"))
    .attr("src", "images/table.png")
    .attr("height", height)
    .attr("width", width)
    .attr("id", "table")
    .css(
        {"display": "block",
         "position": "absolute",
         "left" : -((width-$(window).width())/2)+"px",
         "z-index": "-9999"
    })  
    .appendTo("body");

$("#table").draggable({
    axis: "x",
    drag: function(event, ui) {
        if (ui.offset.left < $(window).width()-width) {
            $(this).data('draggable').position.left = $(window).width()-width;
        } else if(ui.offset.left > 0)
        {   
            $(this).data('draggable').position.left = 0;
        }   
    }   
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:43:43.893

改用[`containment`](http://jqueryui.com/demos/draggable/#option-containment)选项怎么样？

```
$("#table").draggable({
    axis: "x",
    containment: "document"
});​ 
```

作为包含值，您可以使用`'parent'`、或。`'document'``'window'``[x1, y1, x2, y2]`

**演示：http:** [//jsfiddle.net/bAffp/](http://jsfiddle.net/bAffp/)

**更新。**另一种选择是在拖动时更正内部值。

```
$("#table").draggable({
    axis: "x",
    drag: function(event, ui) {
        if (ui.offset.left < 0) {
            $(this).data('draggable').position.left = 0;
        }
    }
});​ 
```

**演示：http:** [//jsfiddle.net/bAffp/3/](http://jsfiddle.net/bAffp/3/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T11:05:11.977

试试这个代码

$("#draggable").draggable({

限制：{上：50，左：100，下：200，右：200}

});

链接是

[http://jsfiddle.net/bAffp/2/](http://jsfiddle.net/bAffp/2/)

# c# - 找到有选择的组合框

> ID：10532308
> 
> 赞同：1
> 
> 时间：2012-05-10T10:40:33.987
> 
> 标签：c#, wpf, wpf-controls

如何循环遍历 wpf 表单中的一组组合框并找到具有选定值的组合框？所有的组合框都在一个名为 BoxContainer 的网格容器中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:43:57.300

像这样：

```
foreach (var comboBox in BoxContainer.Children.OfType<ComboBox>())
    if (comboBox.SelectedItem != null)
        MessageBox.Show(comboBox.Name); 
```

# ruby - 检查我的数组中的空元素 - Ruby

> ID：10532310
> 
> 赞同：0
> 
> 时间：2012-05-10T10:40:46.357
> 
> 标签：ruby

我的数组中有一个元素，当我打印出该特定元素的值时，我得到一个空值。

```
puts my_listing[2].inspect
[] 
```

当我检查该特定元素是否为空时，使用`empty?`它会返回 true：

```
puts my_listing[2].empty?
true 
```

但是当我遍历整个数组，检查是否`i`为空时，它没有找到那个特定的元素。

```
my_listing.each do |i|
    if i.empty?
        puts i
    end
end 
```

`i`（在这种情况下`2`）永远不会打印到屏幕上。

这是为什么？

基本上，我试图摆脱数组中所有为空的元素（在本例中为 index 处的元素`2`），但我不确定如何获取这些元素。

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T11:11:29.603

您没有看到任何打印内容，因为您忘记使用#inspect 您也可以只写：

```
my_listing.each do |i|
    i.empty? and p i
end 
```

要删除空元素，您可以执行以下操作：

```
my_array = [[1],[2],[],[4]]

p my_array.reject(&:empty?) # => [[1], [2], [4]] 
```

拒绝来电#empty？在所有元素上并删除那些为空的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:55:12.543

哦，请像这样迭代

```
 my_listing.each_with_index do |i,index|
          if i.blank?
             puts index.inspect
          end
       end 
```

它为您提供数组的索引，该索引将为空或 nil。

# python - Plone 插件，用于命令行程序的 Web 界面开发

> ID：10532311
> 
> 赞同：1
> 
> 时间：2012-05-10T10:40:48.900
> 
> 标签：python, content-management-system, plone, zope

我正在考虑为 Joomla、Drupal 和 Plone 等知名 CMS 之一编写插件/模块。许多基于 Plone 的网站的清晰性给我留下了深刻的印象，并且对人们对 Plone 的许多赞誉感到兴奋。此外，我也喜欢 Python。所以，我想试试Plone。这里有一些关于我要开发的插件的信息：

我有一些 Linux 命令行程序，我想通过这个插件在 CMS 环境中运行。该插件然后保存命令输出，运行日志给运行程序的用户。然后，CMS 可以获取信息并执行所有其他类型的操作，例如以图形的形式显示数据，或与搜索功能集成。

所以你怎么看？我应该从哪里开始？我查看了一些 Plone 书籍的目录，但找不到任何接近插件开发的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T16:58:55.063

[我认为Aspeli 的 Professional Plone Development](https://rads.stackoverflow.com/amzn/click/com/1849514429)不会有太大的错误，但如果你能得到一份廉价的[Plone 权威指南](https://rads.stackoverflow.com/amzn/click/com/1430218932)，即使它还没有为 Plone4 更新，也可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T18:35:47.327

我们一直这样做。

Plone 是用 Python 编写的，可以做 Python 能做的一切。Python 作为 UNIX 脚本语言已经流行起来，但它取代了 Perl。

有关进一步的想法，如果您需要运行长时间的任务，请参阅[使用 AJAX 进度条的长时间运行 Plone 操作，](https://stackoverflow.com/questions/10306661/long-running-plone-operation-with-ajax-progress-bar)因为您通常不希望在命令行程序运行期间阻止页面加载。

# django - Django Model syncdb 创建现有表

> ID：10532312
> 
> 赞同：1
> 
> 时间：2012-05-10T10:40:49.353
> 
> 标签：django, django-models, django-syncdb

在 django 模型中，我有一个名为`Invitation`.

我执行`manage.py syncdb`表`Invitation`已创建。这是我的第一张桌子。

但是当我创建另一个名为`Image`并执行的类时`manage.py syncdb`

它返回一个错误。

那个`Table UserInvitation already exists`。

请帮助我`Image`使用 syncdb 命令创建表。

楷模

```
 class UserInvitation(models.Model):

   InvitationID =  models.AutoField(primary_key=True)
   InvitationCode =  models.CharField(max_length=255)
   Email = models.CharField(max_length=150)
   ExpireDate = models.DateTimeField()
   Deleted = models.BooleanField(default=False)
   CreatedDate =  models.DateTimeField(auto_now=True)

 class Meta:
    db_table = u'UserInvitation' 

class UserImage(models.Model):
   ImageID =  models.AutoField(primary_key=True)
   UserID = models.IntegerField(unique=True)
   FileName =  models.CharField(max_length=255)

class Meta:
    db_table = u'UserImage' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T02:53:38.037

您应该使用**South**来反映数据库中的更改。

syncdb 运行在数据库中创建所有表的命令，而不仅仅是您添加的表。

使用 South，您应该将模型恢复到只有 UserInvitation 类时，运行以下命令：

```
python manage.py convert_to_south <name of app> 
```

添加回 UserImage 类并运行命令：

```
python manage.py schemamigration --auto <name of app>
python manage.py migrate <name of app> 
```

这将在您的数据库中添加 userimage 表。

此外，元类中的 db_table 字段应为小写，因为表名在创建时为小写（检查您的数据库以确保）

请参阅南方文档：[http ://south.readthedocs.org/en/latest/](http://south.readthedocs.org/en/latest/)

# android-emulator - 模拟启动：Android Emulator

> ID：10532313
> 
> 赞同：1
> 
> 时间：2012-05-10T10:40:51.777
> 
> 标签：android-emulator, startup

我编写了一个应用程序，它在系统启动时启动并启动一个用代码编写的服务。当应用程序安装在真正的 android 设备上而不是模拟器上时，代码工作正常并且服务正在启动。我没有真正的设备总是很方便。知道如何在模拟器中模拟启动吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:14:37.387

我刚刚找到了一种无需停止和启动模拟器即可模拟启动的方法。转到 DDMS 透视图（如果您使用的是 Eclipse）并“停止”该`android.core`过程。这个过程重生（如果你曾经拥有一个 HTC，而那个基本过程似乎经常停止，你会知道这一点）并且重生过程将有效地重新启动模拟器 - 即 BOOT 事件被触发。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T05:44:50.833

启动模拟器模拟启动。早些时候不知道，因为我错过了`Toast`我在启动时放置的一些我不知道的原因。在更快的机器上尝试时，相同的代码就像魅力一样工作。:)

# scala - 尝试使用 Squeryl 创建 OneToMany 关系时断言失败

> ID：10532314
> 
> 赞同：1
> 
> 时间：2012-05-10T10:41:02.353
> 
> 标签：scala, squeryl

我在数据库中有两个类，并希望建立一对多的关系。没什么复杂的。但是，我在 squeryl 的 _splitEquality 中遇到断言失败（第 576 行）。Squeryl 是 0.9.5 版

所以我有一个模式

```
object Tables extends Schema {
val foo = table[Foo]("foo_table")
val bar = table[Bar]("bar_table")

val fooBar = oneToManyRelation(foo,bar).via((f,b) => f.id === bar.foo_fk)
} 
```

foo 在哪里

```
 class Foo (val foo_id: String, val useful_info: String) 
   extends KeyedEntity[String] {
 override def id: String = foo_id
 } 
```

酒吧是

```
class bar (val foo_fk) {
def useful_info = Tables.fooBar.right(this).head.useful_info
} 
```

但是，这在运行时会因前面提到的断言失败而失败，特别是： `assert(ee.right._fieldMetaData.isIdFieldOfKeyedEntity)` 失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:33:24.337

I fixed it by using a column annotation on Foo instead of overriding id. So foo became

```
class Foo (
@Column("foo_id")
val id: String, 
val useful_info: String) 
  extends KeyedEntity[String] {
} 
```

I'm not totally sure why this worked, but I'm annoyed that it did.

# java - Swing UI 测试的持续集成

> ID：10532318
> 
> 赞同：4
> 
> 时间：2012-05-10T10:41:19.633
> 
> 标签：java, swing, user-interface, continuous-integration

我之前在一个主要的 WPF 项目上做过自动化 UI 测试，效果很好。

我现在正在转向一个 Java Swing 项目，并且一直在对 Swing UI 测试进行一些研究。主要是我在寻找一个图书馆，有以下内容：

1.  集成到 Maven 和 CI 服务器
2.  主流/流行 - 所以我们不必更改框架，或者当框架过时且不受支持时重写我们的测试。
3.  易于编写测试
4.  重复使用测试

根据我的研究，我发现了以下框架，并且想知道人们是否有经验给我一些优点/缺点？

1.  视窗测试仪
2.  朱布拉
3.  节日
4.  杰米

我知道之前在 stackoverflow 上也有人问过类似的问题，但是框架随着新版本的更新或变得过时而变化如此之快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:08:43.597

看看[Maveryx](http://www.maveryx.com)。它是一个免费的开源测试自动化框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:22:50.947

对于 GUI 测试，我使用了*无框架和无模拟*解决方案 - 只有 swing 和 swingx，因为我已经使用了 swingx，当然还有我的代码。

我使用带有一些 Presenter 风格（或相反）的 MVC。构建具有光照视图级别和演示者内容的 GUI 对于 GUI 测试非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-04T22:51:07.580

使用 TAP-Plugin，[ReTest](https://www.retest.de/en/)直接集成到 Jenkins 中。它是一种相对较新的工具，具有创新的功能回归测试方法，并结合了基于 AI 的猴子测试。

它也即将成为开源软件。

免责声明：我是 ReTest 背后公司的创始人之一。

# python - 在 Python 中为实例动态添加属性

> ID：10532321
> 
> 赞同：4
> 
> 时间：2012-05-10T10:41:29.733
> 
> 标签：python, dynamic, properties

我基本上对字典列表进行了精心包装：

```
class Wrapper(object):
    def __init__(self, data):
        self.data = data

    def get(self, attr):
        return [d[attr] for d in self.data] 
```

所以，

```
Wrapper([{'x': 23}, {'x': 42}, {'x': 5}]).get('x') 
```

返回`[23, 42, 5]`。现在我想分配速记属性，这样`Wrapper.x`将返回与`Wrapper.get('x')`. 我不知道`data`先验中存在哪些键，所以我目前的方法是（改编自[这个问题](https://stackoverflow.com/questions/2954331/dynamically-adding-property-in-python)：

```
class Wrapper(object):
    def __init__(self, data):
        self.data = data
        for key in data[0].keys():
            setattr(self, key, property(lambda self: self.get(key))) 
```

因此，假设数据的所有元素都具有相同的键，并且它们都是 python 中的有效标识符。但是，`Wrapper(...).x`返回`<property at 0x10a3d4838>`我做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T10:45:47.560

实际上，您只需更改函数的名称即可轻松完成此操作：

```
>>> class Wrapper(object):
...     def __init__(self, data):
...         self.data = data
...     def __getattr__(self, attr):
...         return [d[attr] for d in self.data]
... 
>>> Wrapper([{'x': 23}, {'x': 42}, {'x': 5}]).x
[23, 42, 5] 
```

`__getattr__()`每当您请求不存在的属性时，都会调用特殊方法。这里唯一的潜在问题是您可以通过分配属性来覆盖它。如果您需要避免这种情况，只需简单地覆盖`__setattr__()`以阻止这种情况发生。

# java - 为火车线路上的所有车站创建距离图

> ID：10532322
> 
> 赞同：1
> 
> 时间：2012-05-10T10:41:37.773
> 
> 标签：java

我正在修改编程考试的介绍，我有一个问题来自以前的试卷，我有点坚持。

问题：

> 编写一个方法，将双精度数组作为参数，其值表示火车站沿轨道的位置。该方法应返回一个二维数组，其中包含参数中每对站点之间的距离。距离数组对于每对站应该只有一个条目（即不要使用矩形数组）。

我有一个问题的解决方案，但我无法得到每对应该只有一个条目的最后一点。我曾考虑过创建一个查找表，将所有条目用于查看两个站点的距离，但随后该数组将有很多用于后面站点的空单元格，因为距离已经计算过了。

这是我目前的解决方案

```
//Set of locations on the train line
private static double[] stations = {0.0, 2.0, 3.0, 5.0};

//Method to take the array of doubles and create distance map
public static double[][] getDistances(double[] st){
    double[][] distanceMap = new double[st.length][st.length-1];
    int x;
    for(int i=0; i<st.length; i++){
        x=0;
        for(int j=0; j<st.length; j++){
            if(j != i){
                distanceMap[i][x] = Math.abs(st[i]-st[j]); 
                x++;
            }
        }
    }
    return distanceMap;
}

//Main method to get the distance map then loop over results
public static void main(String[] args){
    double[][] arrayMatrix = getDistances(stations);

    for(int i=0; i<arrayMatrix.length; i++){
        for(int j=0; j<arrayMatrix[0].length; j++){
            System.out.print(arrayMatrix[i][j]+"  ");
        }
        System.out.println("");
    }

} 
```

如果有人能指出我正确的方向，那将不胜感激。

提前致谢。

//编辑

在@izomorphius 提供了一些很好的建议后，我设法解决了这个问题。谢谢。

这是完整的解决方案

```
//Set of locations on the train line
private static double[] stations = {0.0, 2.0, 3.0, 5.0};

//Method to take the array of doubles and create distance map
public static double[][] getDistances(double[] st){
    double[][] distanceMap = new double[st.length-1][];
    int size = st.length-1;

    for(int i=0; i<distanceMap.length; i++){
        distanceMap[i] = new double[size];
        size--;
    }

    ArrayList<String> lut = new ArrayList<String>();

    int x;
    for(int i=0; i<distanceMap.length; i++){
        x=0;
        for(int j=0; j<st.length; j++){
            if(j != i && !lut.contains(i+"/"+j)){
                distanceMap[i][x] = Math.abs(st[i]-st[j]); 
                lut.add(i+"/"+j);
                lut.add(j+"/"+i);
                x++;
            }
        }
    }
    return distanceMap;
}

//Main method to get the distance map then loop over results
public static void main(String[] args){
    double[][] arrayMatrix = getDistances(stations);

    for(int i=0; i<arrayMatrix.length; i++){
        for(int j=0; j<arrayMatrix[i].length; j++){
            System.out.print(arrayMatrix[i][j]+"  ");
        }
        System.out.println("");
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:47:39.663

该声明所说的是“即不要使用矩形阵列”。这个想法是为每一对只存储一个值。例如，如果您有一对 (a,b) 和 a < b，则将 a 和 b 之间的距离存储在 a 的数组中，但不在 b 的数组中。因此，第一个站点的数组大小为 n - 1（到所有其他站点的距离），第二个站点的数组大小为 n - 2（除第一个站点之外的所有其他站点），依此类推。因此，您的阵列将是三角形而不是矩形。我希望这个提示就足够了，因为毕竟我的想法不是让我解决你的问题。

# sql - 复制最近的位置

> ID：10532323
> 
> 赞同：2
> 
> 时间：2012-05-10T10:41:43.717
> 
> 标签：sql, sql-server

我有如下表

```
ID User Date        Location
1  Tom  6-Mar-2012  US
2  Tom  4-Feb-2012  UK
3  Tom  6-Jan-2012  Uk
4  Bob  6-Mar-2012  UK
5  Bob  4-Feb-2012  UK
6  Bob  6-Jan-2012  AUS
7  Dev  6-Mar-2012  US
8  Dev  4-Feb-2012  AUS
9  Nic  6-Jan-2012  US 
```

我必须让每个员工最近的位置在同一张桌子上。

```
ID User Date        Location CurrentLocation
1  Tom  6-Mar-2012  US       US
2  Tom  4-Feb-2012  UK       US
3  Tom  6-Jan-2012  Uk       US
4  Bob  6-Mar-2012  UK       UK
5  Bob  4-Feb-2012  UK       UK
6  Bob  6-Jan-2012  AUS      UK
7  Dev  6-Mar-2012  US       US
8  Dev  4-Feb-2012  AUS      US
9  Nic  6-Jan-2012  US       US 
```

我厌倦了临时表。我可以使用单个查询来完成这项工作吗？这是在实施的中间。我已经创建了许多临时表。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:44:10.917

 ~~~~```
select 
  id, 
  user,
  date,
  location,
  first_value(location) over(partition by user order by date desc) as current_location
from your_table s; 
```~~  ~~以上仅在 Oracle 中有效。

这是我在没有 first_value 分析函数的情况下的尝试：

```
select 
  a.id, 
  a.usr,
  a.date,
  a.location,
  m.location as current_location
from 
  a
  join
   (select usr, location 
    from 
         (select usr, 
                 location, 
                 row_number() over(partition by usr order by date desc) as rnk
          from a
          )b
    where rnk = 1) m
   on m.usr = a.usr; 
```

m 内部查询包含具有最新用户条目的记录。在此之后，我使用此视图进行连接，以获取用户的位置。

请参阅[此处](http://sqlfiddle.com/#!3/87ba7/6)的 sqlfiddle 测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:32:51.843

尝试这个：

```
select *, CurrentLocation
from tbl x

outer apply
(
  select top 1 location as CurrentLocation
  from tbl
  where [user] = x.[user]
    and id <= x.id
  order by id

) y

order by id 
```

输出：

```
ID      USER    DATE            LOCATION    CURRENTLOCATION
1       Tom     2012-03-06      US          US
2       Tom     2012-02-04      UK          US
3       Tom     2012-01-06      Uk          US
4       Bob     2012-03-06      UK          UK
5       Bob     2012-02-04      UK          UK
6       Bob     2012-01-06      AUS         UK
7       Dev     2012-03-06      US          US
8       Dev     2012-02-04      AUS         US
9       Nic     2012-01-06      US          US 
```

现场测试：[http ://www.sqlfiddle.com/#!3/83a6a/7](http://www.sqlfiddle.com/#!3/83a6a/7)~~~~

# php - RESTful-ish API 上的 Curl 登录错误

> ID：10532324
> 
> 赞同：0
> 
> 时间：2012-05-10T10:41:52.320
> 
> 标签：php, curl, login

我正在使用以下代码登录到asp网站，但它不起作用。

```
<?php
/************************************************
* ASP.NET web site scraping script;
* Developed by MishaInTheCloud.com
* Copyright 2009 MishaInTheCloud.com. All rights reserved.
* The use of this script is governed by the CodeProject Open License
* See the following link for full details on use and restrictions.
*   http://www.codeproject.com/info/cpol10.aspx
*
* The above copyright notice must be included in any reproductions of
this script.
************************************************/
error_reporting(E_ALL);
/************************************************
* values used throughout the script
************************************************/
// urls to call - the login page and the secured page
$urlLogin = "http://www.website.com/Default.aspx";
$urlSecuredPage = "http://www.website.com/Default.aspx";

// POST names and values to support login
$nameUsername=rawurlencode('ctl00$txtLoginName');       // the name of the username textbox on the login form
$namePassword=rawurlencode('ctl00$txtPassword');       // the name of the password textbox on the login form
$nameLoginBtn=rawurlencode('ctl00$btnLogin');          // the name of the login button (submit) on the login form
$valUsername ='myusername';        // the value to submit for the username
$valPassword ='mypass';        // the value to submit for the password
$valLoginBtn ='Login';             // the text value of the login button itself

// the path to a file we can read/write; this will
// store cookies we need for accessing secured pages
$cookieFile = 'cookie.txt';

// regular expressions to parse out the special ASP.NET
// values for __VIEWSTATE and __EVENTVALIDATION
$regexViewstate = '/__VIEWSTATE\" value=\"(.*)\"/i';
$regexEventVal  = '/__EVENTVALIDATION\" value=\"(.*)\"/i';

/************************************************
* utility function: regexExtract
*    use the given regular expression to extract
*    a value from the given text;  $regs will
*    be set to an array of all group values
*    (assuming a match) and the nthValue item
*    from the array is returned as a string
************************************************/
function regexExtract($text, $regex, $regs, $nthValue)
{

if (preg_match($regex, $text, $regs)) {
 $result = $regs[$nthValue];
}
else {
 $result = "";
}
return $result;
}

/************************************************
* initialize a curl handle; we'll use this
*   handle throughout the script
************************************************/
$ch = curl_init();

/************************************************
* first, issue a GET call to the ASP.NET login
*   page.  This is necessary to retrieve the
*   __VIEWSTATE and __EVENTVALIDATION values
*   that the server issues
************************************************/
curl_setopt($ch, CURLOPT_URL, $urlLogin);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:11.0) Gecko/20100101 Firefox/11.0' );
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
$data=curl_exec($ch);
echo curl_error($ch);
// from the returned html, parse out the __VIEWSTATE and
// __EVENTVALIDATION values
$viewstate = regexExtract($data,$regexViewstate,$regs,1);
$eventval = regexExtract($data,$regexEventVal,$regs,1);
/************************************************
* now issue a second call to the Login page;
*   this time, it will be a POST; we'll send back
*   as post data the __VIEWSTATE and __EVENTVALIDATION
*   values the server previously sent us, as well as the
*   username/password.  We'll also set up a cookie
*   jar to retrieve the authentication cookie that
*   the server will generate and send us upon login.
************************************************/
$postData = '__VIEWSTATE='.rawurlencode($viewstate)
          .'&__EVENTVALIDATION='.rawurlencode($eventval)
          .'&'.$nameUsername.'='.$valUsername
          .'&'.$namePassword.'='.$valPassword
          .'&'.$nameLoginBtn.'='.$valLoginBtn
          ;

curl_setOpt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);
curl_setopt($ch, CURLOPT_URL, $urlLogin);  
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookieFile);    

$data = curl_exec($ch);

/************************************************
* with the authentication cookie in the jar,
* we'll now issue a GET to the secured page;
* we set curl's COOKIEFILE option to the same
* file we used for the jar before to ensure the
* authentication cookie is sent back to the
* server
************************************************/
curl_setOpt($ch, CURLOPT_POST, FALSE);
curl_setopt($ch, CURLOPT_URL, $urlSecuredPage);  
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookieFile);    

$data = curl_exec($ch);

// at this point the secured page may be parsed for
// values, or additional POSTS made to submit parameters
// and retrieve data.  For this sample, we'll just
// echo the results.
echo $data;

/************************************************
* that's it! Close the curl handle
************************************************/
curl_close($ch);
?> 
```

网站的 HTML 代码：

```
<div>
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__LASTFOCUS" id="__LASTFOCUS" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTIblablabla" />
</div>
<div>
<input type="hidden" name="__PREVIOUSPAGE" id="__PREVIOUSPAGE" value="W3sZnblblabla" />
<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWjwEC7blblabla" />
</div>
<div id="ctl00_pnlLoginBox">
<span id="ctl00_Label1">Username:</span><br />
<input name="ctl00$txtLoginName" type="text" id="ctl00_txtLoginName" style="width:100px;" /><br />
<span id="ctl00_Label2">Password:</span><br />
<input name="ctl00$txtPassword" type="password" id="ctl00_txtPassword" style="width:100px;" /><br />
<input type="submit" name="ctl00$btnLogin" value="Login" id="ctl00_btnLogin" style="width:104px;" />
</div>
<div align="center" style="padding-top:2px">
<a href="/getpassword.aspx" id="ctl00_aForgotPassword">
<span>Forgot your Password</span>
</a>
</div> 
```

我收到以下错误：

```
Notice: Undefined variable: viewstate in /home/me/test3.php on line 101
Notice: Undefined variable: eventval in /home/me/test3.php on line 102 
```

我尝试手动设置 viewstate 和 eventval 但它没有登录。我尝试了很多在这个网站上找到的不同脚本，但都没有奏效。有人可以帮我一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:14:20.487

可能有很多原因，我会介绍几个（如果不对实际网址进行测试就很难说）

**想法 1：不正确的数组指针：** 看起来您的`regexExtract()`函数没有为 var 赋值`$viewstate`- 这可能是因为您`regexExtract()`使用`$nthValue`as调用`1`- 这意味着当您`$regs`填充数组时，`preg_match()`您正在提取数组中的第二项（不要忘记 php 数组指针是基于 0 的。）

**想法 2：正则表达式中的逻辑问题** 由于逻辑错误，您的正则表达式与任何内容都不匹配 - 再说一次，除非我们能看到返回的内容，否则我无能为力`curl_exec()`- 这些正则表达式是为使用 asp.net 的网站设计的本机身份验证系统 - 您是否确定登录到 asp.net 站点？

另外，请从您的问题中删除 asp-classic 标签，我认为它不适用吗？

**编辑：**好的，我已经做了一些测试并得到了`$viewstate`和`$eventval`变量来填充并证明正则表达式工作正常，（并且检查“1”是正确的指针）。我的测试证明 curl 正确地提取了视图状态并将其发布到登录页面。

我通过创建以下 php 文件 (echopost.php) 对此进行了测试：

```
<?
foreach($_GET as $name => $value) {
    print "QueryString: $name : $value<br>";
}
foreach($_POST as $name => $value) {
    print "POST: $name : $value<br>";
}
$cookie=$_COOKIE;
foreach ($cookie as $name=>$value) {
    print "Cookie: $name : $value<br>";
}
?> 
```

然后我更改了这行 99~ 以将登录信息提交到 echopost 并输出结果（以证明正则表达式已正确填充`$viewstate`和`$eventval`：

第99行~

```
curl_setOpt($ch, CURLOPT_POST, TRUE); 
curl_setopt($ch, CURLOPT_POSTFIELDS, $postData); 
curl_setopt($ch, CURLOPT_URL, "http://www.heavencore.co.uk/so/echopost.php"); //#### Note this line that changes 
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookieFile);     

$data = curl_exec($ch); 
echo "Response from echopost.php (login): <hr />" . $data; 
```

如您所见，echopage 正在返回以 curl 正则表达式中的正确值，这意味着 $viewstate 和 $eventval 现在已填充并正常工作。

演示：[http](http://www.heavencore.co.uk/so/login.php) ://www.heavencore.co.uk/so/login.php 基于虚拟登录页面[http://www.heavencore.co.uk/so/login.htm](http://www.heavencore.co.uk/so/login.htm)

我改变了这一行：

```
function regexExtract($text, $regex, $regs, $nthValue) 
```

对此：

```
function regexExtract($text, $regex, $nthValue) 
```

& 改变了这些行：

```
$viewstate = regexExtract($data,$regexViewstate,$regs,1); 
$eventval = regexExtract($data,$regexEventVal,$regs,1); 
```

对此：

```
$viewstate = regexExtract($data,$regexViewstate,1); 
$eventval = regexExtract($data,$regexEventVal,1); 
```

**编辑2：**

好的，这工作正常：

[http://www.heavencore.co.uk/so/login.php](http://www.heavencore.co.uk/so/login.php)

请注意，login.php 输出“欢迎来到 /../，HeavenCore！” page - 表示 curl 登录成功。

我的来源：

```
<?php 
/************************************************ 
* ASP.NET web site scraping script; 
* Developed by MishaInTheCloud.com 
* Copyright 2009 MishaInTheCloud.com. All rights reserved. 
* The use of this script is governed by the CodeProject Open License 
* See the following link for full details on use and restrictions. 
*   http://www.codeproject.com/info/cpol10.aspx 
* 
* The above copyright notice must be included in any reproductions of 
this script. 
************************************************/ 
error_reporting(E_ALL); 
/************************************************ 
* values used throughout the script 
************************************************/ 
// urls to call - the login page and the secured page 
$urlLogin = "http://www.website.com/Default.aspx"; 
$urlSecuredPage = "http://www.website.com/Default.aspx"; 

// POST names and values to support login 
$nameUsername=rawurlencode('ctl00$txtLoginName');       // the name of the username textbox on the login form 
$namePassword=rawurlencode('ctl00$txtPassword');       // the name of the password textbox on the login form 
$nameLoginBtn=rawurlencode('ctl00$btnLogin');          // the name of the login button (submit) on the login form 
$valUsername ='HeavenCore';        // the value to submit for the username 
$valPassword ='password';        // the value to submit for the password 
$valLoginBtn ='Login';             // the text value of the login button itself 

// the path to a file we can read/write; this will 
// store cookies we need for accessing secured pages 
$cookieFile = 'cookie.txt'; 

// regular expressions to parse out the special ASP.NET 
// values for __VIEWSTATE and __EVENTVALIDATION 
$regexViewstate = "/__VIEWSTATE\" value=\"(.*)\"/i"; 
$regexEventVal  = "/__EVENTVALIDATION\" value=\"(.*)\"/i"; 

/************************************************ 
* utility function: regexExtract 
*    use the given regular expression to extract 
*    a value from the given text;  $regs will 
*    be set to an array of all group values 
*    (assuming a match) and the nthValue item 
*    from the array is returned as a string 
************************************************/ 
function regexExtract($text, $regex, $nthValue) 
{ 

if (preg_match($regex, $text, $regs)) { 
 $result = $regs[$nthValue]; 
} 
else { 
 $result = ""; 
} 
return $result; 
} 

/************************************************ 
* initialize a curl handle; we'll use this 
*   handle throughout the script 
************************************************/ 
$ch = curl_init(); 

/************************************************ 
* first, issue a GET call to the ASP.NET login 
*   page.  This is necessary to retrieve the 
*   __VIEWSTATE and __EVENTVALIDATION values 
*   that the server issues 
************************************************/ 
curl_setopt($ch, CURLOPT_URL, $urlLogin); 
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:11.0) Gecko/20100101 Firefox/11.0' ); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); 
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE); 
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
$data=curl_exec($ch); 
echo curl_error($ch); 
// from the returned html, parse out the __VIEWSTATE and 
// __EVENTVALIDATION values 
$viewstate = regexExtract($data,$regexViewstate,1); 
$eventval = regexExtract($data,$regexEventVal,1); 
/************************************************ 
* now issue a second call to the Login page; 
*   this time, it will be a POST; we'll send back 
*   as post data the __VIEWSTATE and __EVENTVALIDATION 
*   values the server previously sent us, as well as the 
*   username/password.  We'll also set up a cookie 
*   jar to retrieve the authentication cookie that 
*   the server will generate and send us upon login. 
************************************************/ 
$postData = '__VIEWSTATE='.rawurlencode($viewstate) 
          .'&__EVENTVALIDATION='.rawurlencode($eventval) 
          .'&'.$nameUsername.'='.$valUsername 
          .'&'.$namePassword.'='.$valPassword 
          .'&'.$nameLoginBtn.'='.$valLoginBtn 
          ; 

curl_setOpt($ch, CURLOPT_POST, TRUE); 
curl_setopt($ch, CURLOPT_POSTFIELDS, $postData); 
curl_setopt($ch, CURLOPT_URL, $urlLogin);   
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookieFile);     

$data = curl_exec($ch); 
 echo "Response from echopost.php (login): <hr />" . $data; 

/************************************************ 
* with the authentication cookie in the jar, 
* we'll now issue a GET to the secured page; 
* we set curl's COOKIEFILE option to the same 
* file we used for the jar before to ensure the 
* authentication cookie is sent back to the 
* server 
************************************************/ 
curl_setOpt($ch, CURLOPT_POST, FALSE); 
curl_setopt($ch, CURLOPT_URL, $urlSecuredPage);   
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookieFile);     

$data = curl_exec($ch); 

// at this point the secured page may be parsed for 
// values, or additional POSTS made to submit parameters 
// and retrieve data.  For this sample, we'll just 
// echo the results. 

/************************************************ 
* that's it! Close the curl handle 
************************************************/ 
curl_close($ch); 
?> 
```

# java - css解析器不起作用？

> ID：10532325
> 
> 赞同：0
> 
> 时间：2012-05-10T10:41:59.730
> 
> 标签：java, css

我编写了一个使用 jar cssparser-0.9.5.jar 扫描 css 文件的程序，并对其执行了一些操作

```
public static Map<String, CSSStyleRule> parseCSS(String FileName) throws IOException {
        Map<String, CSSStyleRule> rules = new LinkedHashMap<String, CSSStyleRule>();
        InputSource inputSource = new InputSource(
                new FileReader(FileName));
        CSSStyleSheet styleSheet = new CSSOMParser().parseStyleSheet(
                inputSource, null, null);

        CSSRuleList ruleList = styleSheet.getCssRules();
        for (int i = 0; i < ruleList.getLength(); i++) {
            CSSRule rule = ruleList.item(i);
            if (rule.getType() == CSSRule.STYLE_RULE) {
                CSSStyleRule styleRule = (CSSStyleRule) rule;
                rules.put(styleRule.getSelectorText(), styleRule);
            }
        }

        return rules;
    } 
```

此代码适用于所有类，但包含以“-”开头的属性的类除外

```
.overlay
{

    filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000');

} 
```

解析它后，在类 .overlay 的属性中出现双 ':' 错误

那么有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:49:45.027

您发布的代码比实际问题所在的位置高几个级别。问题出在词法扫描器中。它对标识符 (IDENT) 的定义似乎是错误的，因为它也可以包含连字符并以连字符开头。

正如 CSS3 语法规范所说：

> 在 CSS3 中，标识符（包括选择器中的元素名称、类和 ID（参见 [SELECT[or is this still tr​​ue]））只能包含字符 [A-Za-z0-9] 和 ISO 10646 字符 161 及更高，加上连字符 (-) 和下划线 (_)；它们不能以数字或连字符后跟数字开头。

[请参阅此处](http://www.w3.org/TR/css3-syntax/#characters)的完整规范。

# zend-framework - Zend 框架：为主页创建路由

> ID：10532327
> 
> 赞同：0
> 
> 时间：2012-05-10T10:42:08.847
> 
> 标签：zend-framework

我现在正在使用 Zend Framework 编写一个应用程序，它使用数据库驱动的路由。

我已禁用默认路由，但这似乎在访问主页时导致错误。

谁能告诉我如何“重新创建”默认路由，这会将访问主页“/”的用户带到索引控制器的索引操作？

编辑@RockyFord，根据您的回答，我添加了以下内容：

```
if($this->_frontController->getRequest()->getRequestUri() == '/') {
    $route= new Zend_Controller_Router_Route(
        '*',
        array('controller'  => 'index',
              'action'      => 'index')
    );
    $router->addRoute('default', $route);
) 
```

但正如你所看到的，我必须测试看看我们是否在使用 URL 的主页上。谁能建议一个更好的方法来做到这一点？

我不能使用这种规则，因为路由声明中的正斜杠被去掉了：

```
$route = new Zend_Controller_Router_Route_Static('/', array(
    'module' => 'default',
    'controller' => 'index',
    'action' => 'index'
));
$router->addRoute('homepage', $route); 
```

取自 Zend_Controller_Router_Route_Static：

```
public function __construct($route, $defaults = array())
{
    $this->_route = trim($route, self::URI_DELIMITER);
    $this->_defaults = (array) $defaults;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:59:59.600

从手册：

> 路由定义可以包含一个额外的特殊字符 - 通配符 - 由“*”符号表示。它用于收集类似于默认模块路由的参数（在 URI 中定义的 var => 值对）。以下路由或多或少模仿了 Module 路由行为：

```
$route = new Zend_Controller_Router_Route(
    ':module/:controller/:action/*',
    array('module' => 'default')
);
$router->addRoute('default', $route); 
```

`Zend_Controller_Router_Route_Module`如果您对代码感兴趣，则具有路线的实际定义。

[编辑]也许：

```
//not sure if the name will work or not, might need empty string?
$route = new Zend_Controller_Router_Route_Static(
    '/',
    array('controller' => 'index', 'action' => 'index')
);
//also might need a better name like 'home'
$router->addRoute('/', $route); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:24:42.043

主页路线将是：

```
$route = new Zend_Controller_Router_Route_Static('/', array(
    'module' => 'default',
    'controller' => 'index',
    'action' => 'index'
));
$router->addRoute('homepage', $route); 
```

用您希望请求转到的任何控制器和操作替换默认/索引/索引值。

# java - Tomcat log4j 日志记录相对于应用程序路径？

> ID：10532328
> 
> 赞同：4
> 
> 时间：2012-05-10T10:42:10.793
> 
> 标签：java, gwt, tomcat, log4j

我有一个 Google Web Toolkit (GWT) - 我以三种不同模式运行的应用程序：

1.  部署在 Tomcat 上
2.  托管模式
3.  Junit 测试

**如何配置 log4j.properties 以便正确记录每种模式？**

如果我使用`${catalina.base}`它，我将无法在托管模式和 Junit 测试中使用它，并且如果我只使用 relative `logs/myapplication.log`，它将无法与 Tomcat 一起使用，因为我会得到：

```
java.io.FileNotFoundException: log/myapplication.log (Keine Berechtigung) 
```

如果可以相对于应用程序路径指定日志目录，我不介意将日志放在 webapps/myapplication/logs 中，但如果日志文件只是在 /var/log/tomcat7/... 或其他一些日志文件夹。

目前我的 log4j.properties 包含以下文件记录条目：

```
log4j.appender.file=org.apache.log4j.FileAppender
log4j.appender.file.File=${catalina.base}/logs/myapplication.log
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%c %C %d{ABSOLUTE} %-5p %C{1}: %m%n
log4j.appender.file.threshold=DEBUG
log4j.appender.file.Append=false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:02:11.050

**1.部署在Tomcat上**

我登录到 ${catalina.home}，但您的配置看起来仍然不错。我在 Windows 上本地运行我的配置，当我启动服务器时没有看到任何关于找不到该文件夹​​的错误。如果您想指向 Windows 上的某个位置，请尝试在运行配置中将以下内容添加到您的参数中：

`-Dcatalina.base="C:\somefolder\" -Dcatalina.home="C:\somefolder\"`

**2.托管模式**

在这种模式下，您在 IDE 中本地运行它。因此，您不需要记录到文件。在这种情况下，将附加程序添加`stdout`到您的 log4j.properties

```
log4j.rootLogger=DEBUG, stdout, A 
```

这样，您将在 IDE 的控制台中看到日志消息

**3\. JUnit 测试**

使用单独的日志配置文件进行测试（这是标准做法）。这使您可以更好地控制日志级别，而不会影响您的生产日志级别。

# android - Android：应用异步进度对话框后，文本未显示在 TextView 中

> ID：10532331
> 
> 赞同：1
> 
> 时间：2012-05-10T10:42:15.593
> 
> 标签：android, progressdialog

我正在处理一个项目，在该项目中我正在解析来自 Internet 的 XML 文件并在 TextView 中显示其内容。

**过程：**当我单击按钮时，我将自己转发到从 Internet 获取 xml 的预测类，但现在我将 Async Progress 对话框添加到其中。编码没有错误，但是当我在其中运行应用程序时模拟器显示捕获异常消息“错误”它没有显示在添加异步进度对话框之前显示的“信息”。

```
public class Prediction extends Activity{

static final String baseUrl = "http://astroyogi.in/testandroid/Tarot/Tarot_Android.xml";
TextView tv1;
ImageView iv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.prediction);
    grabURL("http://astroyogi.in/testandroid/Tarot/Tarot_Android.xml");
    tv1 = (TextView) findViewById(R.id.tv1);
    }

public void grabURL(String url) {
    new GrabURL().execute(url);
}

private class GrabURL extends AsyncTask<String, Void, Void> {
    private ProgressDialog Dialog = new ProgressDialog(Prediction.this);
    static final String baseUrl = "http://astroyogi.in/testandroid/Tarot/Tarot_Android.xml";

    protected void onPreExecute() {
        Dialog.setMessage("Downloading source..");
        Dialog.show();
    }

    @Override
    protected Void doInBackground(String... params) {
        // TODO Auto-generated method stub

        try{
            URL website = new URL(baseUrl);
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            Handlingpastxml doingWork = new Handlingpastxml();
            xr.setContentHandler(doingWork);  
            xr.parse(new InputSource(website.openStream()));
            String information = doingWork.getInformation();
            tv1.setText(information);
            }

        catch(Exception e){
            tv1.setText(e.getMessage());

        }
        return null;
    }

    protected void onPostExecute(Void unused) {
        Dialog.dismiss();
    }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:50:54.557

`doinBackGround is non UI thread so never update your UI in this method`

如果你想更新`onProgressUpdate or onPostExecute method`

在你的情况下，使用 onPostExecute 方法

```
String information=null;

@Override
protected void onCreate(Bundle savedInstanceState) {
     //your code block
 }

 in doinBackGround method in try block    

 information = doingWork.getInformation();<---Remove `String`

protected void onPostExecute(Void unused) {
        Dialog.dismiss();

        if(information!=null&&information.trim().length!=0)
        tv1.setText(information);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:52:45.587

仅供参考，您不能（直接）在 doInBackground() 方法中执行显示/更新 UI 类型的操作。

## 解决方案-1：

从 doInBackground() 中删除以下行并将其粘贴到`onPostExecute()`

```
 tv1.setText(information); 
```

## 解决方案2：

**如果您无论如何**都想在 doInBackground() 中显示/更新 UI，请在以下内容中编写此类操作**`runOnUiThread()`**：

```
 runOnUiThread(new Runnable() {

            public void run() {
                // TODO Auto-generated method stub
                tv1.setText(information);
            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:47:45.543

这是一个线程问题：

当您在“doInBackground”方法中时，您不再在 UI 线程中。所以你不能说“tv1.setText(information);” 因为它不会更新您的 UI。

“doInBackground”适合您的繁重任务。当这些任务结束时，“onPostExecute”被调用。当您处于“onPostExecute”时，您处于 UI 线程中，您可以根据需要修改您的 UI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T10:49:58.553

而`new GrabURL().execute(url);`不仅仅是写`new GrabURL().execute();`

因为您已经在 GrabURL 中创建了对象。

另一件事是，当您想在线程中更新 UI 时，我们使用处理程序，所以这里尝试保留 onPostExecute。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T10:52:05.853

而不是下面的代码

```
@Override
    protected Void doInBackground(String... params) {
        // TODO Auto-generated method stub

        try{
            URL website = new URL(baseUrl);
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            Handlingpastxml doingWork = new Handlingpastxml();
            xr.setContentHandler(doingWork);  
            xr.parse(new InputSource(website.openStream()));
            String information = doingWork.getInformation();
            tv1.setText(information);
            }

        catch(Exception e){
            tv1.setText(e.getMessage());

        }
        return null;
    }

    protected void onPostExecute(Void unused) {
        Dialog.dismiss();
    } 
```

尝试按照以下方式进行

```
@Override
    protected Void doInBackground(String... params) {
        // TODO Auto-generated method stub

        try{
            URL website = new URL(baseUrl);
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            Handlingpastxml doingWork = new Handlingpastxml();
            xr.setContentHandler(doingWork);  
            xr.parse(new InputSource(website.openStream()));
            String information = doingWork.getInformation();

            }

        catch(Exception e){
            String information = e.getMessage();

        }
        return information;
    }

    protected void onPostExecute(Void response) {
         tv1.setText(response);
        Dialog.dismiss();
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T10:54:57.010

你不应该从非 UI 线程更新你的视图，在方法 doInbackground() 中你不能使用 tv1.setText(information);

删除

```
tv1.setText(information); 
```

从doInbackround（）！并将其放入

```
protected void onPostExecute(Void unused) {
    Dialog.dismiss();
    tv1.setText(information);

} 
```

信息也应该是一个全局变量

# php - 如何在 60 天后自动延长 Facebook access_token 以保持访问权限？

> ID：10532337
> 
> 赞同：2
> 
> 时间：2012-05-10T10:42:50.630
> 
> 标签：php, facebook, token, extend

好的，所以offline_access 已被弃用。所以现在，我可以获得 60 天的访问令牌，但是有没有办法在没有用户交互的情况下扩展它？我们有一个工具，您可以将其与执行大量自动同步的 Hootsuite 进行比较。我不想每 60 天打扰我们的用户重新授权一次。

有什么方法可以在没有用户交互的情况下扩展 access_token 吗？

（我们这里顺便用PHP）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:39:52.210

您可以延长长期（和短期）访问令牌，但仅限于用户访问应用程序时。

有关此作品以及如何实现它的更多信息，请参阅下面的文章：

[移除offline_access 权限](https://developers.facebook.com/roadmap/offline-access-removal/ "移除offline_access 权限")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T21:56:40.600

我有完全一样的问题。我获得了一个短暂的用户访问令牌。然后，我将该令牌转换为扩展（长期）用户访问令牌。使用这个令牌，我获得了页面访问令牌。与 Facebook 的文档相反，这些页面访问令牌在 60 天后到期。

似乎社区同意（编辑：同意）这是一个错误。查看 Facebook 错误页面：http: [//developers.facebook.com/bugs/461517520524921](http://developers.facebook.com/bugs/461517520524921)（编辑：FB 已经删除了这个错误报告......）

# visual-studio - 有没有一种简单的方法可以打印（到文本文件）.NET 项目中所有“引用”的路径？

> ID：10532340
> 
> 赞同：0
> 
> 时间：2012-05-10T10:43:08.980
> 
> 标签：visual-studio

有没有一种简单的方法可以打印（到文本文件）.NET 项目中所有“引用”的路径？

在 IDE 中，可以看到每个路径的路径，但如果我想为项目中的所有引用打印该路径，你知道如何做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:30:44.023

If you look at the csproj file (assuming it's a C# project you will find something like this:

```
<ItemGroup>
  <Reference Include="DevExpress.Data.v10.2, Version=10.2.3.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a, processorArchitecture=MSIL">
    <SpecificVersion>False</SpecificVersion>
    <HintPath>..\Libs\DevExpress.Data.v10.2.dll</HintPath>
    <Private>True</Private>
  </Reference>
  <Reference Include="DevExpress.Data.v10.2.Linq, Version=10.2.3.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a, processorArchitecture=MSIL">
    <SpecificVersion>False</SpecificVersion>
    <HintPath>..\Libs\DevExpress.Data.v10.2.Linq.dll</HintPath>
    <Private>True</Private>
  </Reference>
  <!-- some more -->
</ItemGroup> 
```

You could read the project file as a XML document and fire up some XPath queries and do a Console.Writeline.

# wordpress - 创建自定义功能 wordpress 以从数据库返回数据

> ID：10532341
> 
> 赞同：0
> 
> 时间：2012-05-10T10:43:13.600
> 
> 标签：wordpress, wordpress-theming

我为我的 wordpress 管理面板创建了一个自定义图像上传器，需要从 wp_options 表中检索数据。我已经写了以下功能：

```
//function to get all slider images
function getSliderImages(){
    global $wpdb, $theme_shortname;
    $query = "SELECT * FROM $wpdb->options AS o1 
    WHERE o1.option_name LIKE '%".$theme_shortname."_header_image%'";
    $imgs = $wpdb->get_results($query);

    $images = array();
    //loop through images and remove unusable results
    foreach($imgs as $i){
        $id = substr($i['option_name'],0,-1);
        if(is_numeric($id)){
            $images[] = $i['option_value'];
        }
    }

    return($images);
} 
```

如何访问前端 header.php 中返回的数组？这个函数目前在themes/themename/functions.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:25:58.957

您正在声明一个在所有模板文件中都可用的全局函数。您可以简单地`<?php $images = getSliderImages(); ?>`在任何模板中使用。

# php - 无法让 PHP Soap 工作

> ID：10532345
> 
> 赞同：0
> 
> 时间：2012-05-10T10:43:34.050
> 
> 标签：php, soap

我今天第一次使用 Soap。但知道我需要将所有品牌放在一起。Soap 以字符串形式返回。

我正在使用的代码我：

```
<?php
 $soapClient = new SoapClient("http://getmoxecure.com:5454/ProductService.asmx?wsdl"); 

     $result = $soapClient->getHandsetBrands();
     print_r($result->getHandsetBrandsResult);
     ?> 
```

结果是：

```
 stdClass Object
(

        [schema] => <xs:schema xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" id="NewDataSet"><xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true"><xs:complexType><xs:choice minOccurs="0" maxOccurs="unbounded"><xs:element name="HandsetBrandTable"><xs:complexType><xs:sequence><xs:element name="handset_brand" type="xs:string" minOccurs="0"/></xs:sequence></xs:complexType></xs:element></xs:choice></xs:complexType></xs:element></xs:schema>
        [any] => <diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1"><NewDataSet xmlns=""><HandsetBrandTable diffgr:id="HandsetBrandTable1" msdata:rowOrder="0"><handset_brand>Android</handset_brand></HandsetBrandTable><HandsetBrandTable diffgr:id="HandsetBrandTable2" msdata:rowOrder="1"><handset_brand>BlackBerry</handset_brand></HandsetBrandTable><HandsetBrandTable diffgr:id="HandsetBrandTable3" msdata:rowOrder="2"><handset_brand>LG</handset_brand></HandsetBrandTable><HandsetBrandTable diffgr:id="HandsetBrandTable4" msdata:rowOrder="3"><handset_brand>Nokia</handset_brand></HandsetBrandTable><HandsetBrandTable diffgr:id="HandsetBrandTable5" msdata:rowOrder="4"><handset_brand>Samsung</handset_brand></HandsetBrandTable><HandsetBrandTable diffgr:id="HandsetBrandTable6" msdata:rowOrder="5"><handset_brand>Sony Ericsson</handset_brand></HandsetBrandTable></NewDataSet></diffgr:diffgram>
    ) 
```

我想获取 Any 字符串中的所有品牌。有人知道如何得到这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:03:08.233

load the object into simplexml

```
$xml = simplexml_load_string($result->getHandsetBrandsResult->any); 
```

save into an array:

```
$hansets = array();
foreach ($xml->NewDataSet->HandsetBrandTable as $handset) $handsets[] = $handset->handset_brand;

print_r($handsets); 
```

# c - RSA签名验证参数的说明

> ID：10532346
> 
> 赞同：1
> 
> 时间：2012-05-10T10:43:34.777
> 
> 标签：c, linux, openssl, rsa

我有一个客户提供的 RSA 签名验证 API 描述，它接受参数 - 模数（N）、E、填充方案、盐、消息及其签名。我必须实现签名验证 API（我可以利用 openssl API）。

有了以上信息，我可以验证签名通过了吗？或者我需要额外的参数？我想我可以从 N 和 E 导出公钥。但是盐和填充方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:53:46.850

RSA 的公钥*是*N 和 E 作为一对。私钥包括 p、q 和 d——尽管知道 p、q 和 e 可以导出 d。

所以，简而言之：你应该能够，是的。

附加参数（盐、填充方案）是为了让您根据 PKCS #1 正确使用 RSA，并正确解码 RSA 签名。

如果有疑问，请找到 PKCS#1 和相关标准的现有实现，并使用它来实现这些调用。

# .net - FileOpenPicker.PickSingleFileAsync 永远不会返回

> ID：10532349
> 
> 赞同：1
> 
> 时间：2012-05-10T10:43:44.533
> 
> 标签：.net, windows-8, visual-studio-2012, async-await

按照标题。我单击我的按钮，然后可以在调用行上的断点处进入调试器`openPicker.PickSingleFileAsync()`——但这个调用永远不会返回。我可以选择一个文件，然后单击“打开”，但我再也没有回到我的方法来实际对该文件执行某些操作。这一切都在一个新的 Windows Metro“空白应用程序”中，只有一个按钮和一个图像。

```
 private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        OpenFile().Wait();
    }

    private async Task OpenFile()
    {
        FileOpenPicker openPicker = new FileOpenPicker();
        openPicker.ViewMode = PickerViewMode.Thumbnail;
        openPicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
        openPicker.FileTypeFilter.Add(".jpg");
        openPicker.FileTypeFilter.Add(".jpeg");
        openPicker.FileTypeFilter.Add(".png");

        // can break on following line
        var file = await openPicker.PickSingleFileAsync();

        // this line is never reached
        if (file != null)
        {
           // do stuff
        }
    } 
```

这是按照[MSDN here 上](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh771180%28v=win.10%29.aspx)的示例代码。当我使用 PickMultipleFilesAsync 时，我也会得到相同的结果。

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T11:28:45.820

你永远不应该在 GUI 应用程序中混用`Wait()`和`await`，因为它很容易导致死锁，就像你正在经历的那样。

就此而言`Wait()`，如果可以使用，您可能根本不应该使用（尽管有例外：在使用的控制台应用程序的方法中`await`使用是有意义的）。`Wait()``Main()``await`

这里的问题是`Wait()`阻塞了你的 UI 线程。文件选择器完成后，它安排方法的其余部分在 UI 线程上运行，但线程不能这样做，因为它正在等待此操作完成。所以，要完成这个操作，它首先必须完成，这是一个死锁。

这里的解决方案也在`await`您的事件处理程序中使用：

```
private async void Button_Click_1(object sender, RoutedEventArgs e)
{
    await OpenFile();
} 
```

# sql-server - EF - 数据库连接 - 预计使用 SQL Server 身份验证，但尝试（并失败）使用 Windows 身份验证

> ID：10532351
> 
> 赞同：1
> 
> 时间：2012-05-10T10:43:51.597
> 
> 标签：sql-server, asp.net-mvc-3, entity-framework-4.1

我整理了一个使用 Entity Framework 4.1 的简​​单 ASP.NET MVC 3 测试 Web 应用程序。我的 DBContext 看起来像这样：

```
public class EFDbContext : DbContext
{
    public DbSet<TestParent> TestParents { get; set; }
    public DbSet<TestChild> TestChildren { get; set; }
} 
```

所以我期待 EF 会寻找一个名为 EFDbContext 的连接字符串。这是 web.config 在我的本地环境中包含的内容：

```
<connectionStrings>
  <add name="EFDbContext"
     connectionString="data source=.\SQLEXPRESS;Initial Catalog=testDB;Integrated Security=SSPI;MultipleActiveResultSets=True"
     providerName="System.Data.SqlClient" />
</connectionStrings> 
```

我没有在连接字符串中提供用户名和密码。所以据我了解，EF 将使用 Windows 身份验证进行数据库连接。在我的本地环境中，一切都按预期工作。

现在 - 当我将这个 Web 应用程序发布到我的 Web 托管服务器的服务器时，我必须切换到 SQL Server 身份验证（Web 托管的限制 - 足够公平）。所以我调整了我的连接字符串，如下所示：

```
<connectionStrings>
  <remove name="LocalSqlServer" />
  <add name="EFDbContext"
       connectionString="Data Source = localhost\SQLEXPRESS; Initial Catalog = testDB; User Id = dbUser; Password = dbPassword; Integrated Security = SSPI; MultipleActiveResultSets = True; Persist Security Info=True"
       providerName="System.Data.SqlClient" />
</connectionStrings> 
```

这是我有意识地做出的唯一改变。不幸的是，这不再起作用了。显示的错误消息表明尝试使用 Windows 身份验证而不是 SQL Server 身份验证来连接数据库（错误消息是德语，但它列出了主机商已确认是他们创建的 Windows 用户之一的用户）。

错误消息还包含我在连接字符串的初始目录部分中指定的数据库名称。在我看来，这清楚地表明名为 EFDbContext 的连接字符串确实被 EF 读取和使用。

我的问题是我什至找不到更接近问题的起点。整个事情对我来说就像一个黑匣子。EF 是否尝试 SQL Server 身份验证，然后切换到 Windows 身份验证作为后备？或者我是否需要更改某些配置文件中的设置以强制 EF 进行 SQL Server 身份验证？

我想不出任何明智的方法来进一步扩展我的应用程序。我的谷歌搜索并没有让我到任何地方，而且多次将我的头撞在墙上也没有提供解决方案。所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:03:16.423

为什么要在连接字符串中保留“Integrated Security = SSPI;”？有关连接字符串的更多信息，请参见[此处。](http://www.connectionstrings.com/sql-server-2008)

# wpf - 使用 Microsoft.Windows.Controls.Ribbon 的多个视图

> ID：10532357
> 
> 赞同：0
> 
> 时间：2012-05-10T10:44:05.717
> 
> 标签：wpf, ribbon, ribboncontrolslibrary

我有一个使用`Microsoft.Windows.Controls.Ribbon`. 我可以通过`Grid.Row`标签设置视图：

```
 </ribbon:Ribbon>
    <Grid Grid.Row="1">
      <!-- View's content here -->
    </Grid>
  </Grid>
</ribbon:RibbonWindow> 
```

**问：**如何根据所选功能区选项卡更改视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:59:21.747

你有几个选择。

1.  挂钩[`SelectionChanged`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectionchanged.aspx)事件并交换您的视图内容。如果您使用的是 Prism，您可能可以创建一个[`SelectorRegionAdapter`](http://msdn.microsoft.com/en-us/library/microsoft.practices.composite.presentation.regions.selectorregionadapter.aspx)来为您执行此操作。
2.  您可以绑定到`Ribbon.SelectedValue`（设置`SelectedValuePath`为 say `Label`）并提供`DataTrigger`处理每个选项卡名称的 a。
3.  您可以在属性`RibbonWindow`中放置您关心的每个视图模型的实例（假设您的数据上下文具有您需要的每个视图模型），并根据以下内容调整您的视图：`RibbonTab.Tag``SelectedItem.Tag`

    ```
    <r:Ribbon x:Name="PART_Ribbon" ...>
        <r:RibbonTab Tag="{Binding HomeViewModel}" ... />
    </r:Ribbon>
    <Grid>
        <ContentControl Content="{Binding SelectedItem.Tag,
                                          ElementName=PART_Ribbon}" />
    </Grid> 
    ```

# file-upload - Symfony2：如何检查文件输入是否为空

> ID：10532361
> 
> 赞同：1
> 
> 时间：2012-05-10T10:44:12.360
> 
> 标签：file-upload, symfony

我正在制作一个表单来编辑用户可以上传文件的实体。当他进行一些编辑时，我想检查他是否上传了另一个文件，以了解我是否必须删除另一个文件。我找不到如何知道输入文件是否为空。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:49:10.250

```
public function upload()
{
    if (null === $this->file) {
      // this is the condition where you can get to know that the value of
      // input field is null or not
    }

    // if there is an error when moving the file, an exception will
    // be automatically thrown by move(). This will properly prevent
    // the entity from being persisted to the database on error
    $this->file->move($this->getUploadRootDir(), $this->path);

    unset($this->file);
} 
```

检查[symfony 文档](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)

# android - 在 Android 中外包应用程序翻译的最佳做法是什么？

> ID：10532362
> 
> 赞同：5
> 
> 时间：2012-05-10T10:44:16.467
> 
> 标签：android, localization, android-xml

在您看来，为必须支持多种语言的 Android 应用程序外包字符串翻译的最佳做法是什么？

假设翻译人员不是技术人员，所以我不能为他们提供 XML（不过 XLS 应该没问题），而且他们不在我的公司工作，所以我应该通过电子邮件向他们发送“一些东西”，他们应该给我返回“一些东西” “ 通过电子邮件。

此外，我现在有一个稀疏的翻译集：我是意大利语，我会说英语，所以在编写代码时我完全填充了 values-it/strings.xml 和部分 values/strings.xml，但没有任何 values-de /strings.xml 例如。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:07:10.180

你为什么不简单地使用一个谷歌电子表格，每种语言都有一个标签。

为每个选项卡复制具有相同标签的第一列，即 ids 和带有翻译的第二列。

为了帮助他们开始，将英语（我想您已经拥有）添加到第一个选项卡。

**更新：**

要将电子表格导出到 XML 有效文件，只需将其导出为 CSV，创建一个读取 csv 并将其转换为有效 XML 文件的 Java 类很简单。如果您需要参考，我可以找到一些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T08:08:22.810

我自己在工作中也遇到了同样的问题。在研究解决方案时，我发现了[Open Language Tools](http://open-language-tools.java.net/)。然而，当我转向其他事情时，我没有机会尝试它。所以我不知道它如何适应Android的资源框架。

最好的部分是它基于开放标准。

> 开放语言工具是一组翻译工具，旨在使翻译软件和文档的任务变得更加容易。最初，它们包含一个功能齐全的 XLIFF 翻译编辑器和一组用于多种文档和软件文件格式的 XLIFF 文件过滤器。

我的书签中的其他相关链接：

*   [开放语言工具 XLIFF 翻译编辑器 (OTE)](http://www.siberlogic.com/integrations/SunOLT.html?auth11#close=1)
*   [xliffRoundTrip 工具](http://sourceforge.net/projects/xliffroundtrip/)

## XML 和 Excel 之间的转换：

您可以使用 Excel 的导入选项将任何 XML 文件导入 Excel。例如，在 Excel 2002 中，我可以选择`Data->Import External Data->Import Data`菜单选项来导入 Strings.xml 文件。但是，最好将`<string>`&保存`<string-array>`在单独的 XML 文件中，以使转换更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:38:46.680

不完全是我需要的，但在寻找答案时，我发现了这个工具：

[http://www.eclipse.org/sequoyah/](http://www.eclipse.org/sequoyah/)

它集成在 Eclipse 中，并以类似 excel 的方式显示了一个编辑器，其中行中包含字符串，列中包含语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T11:25:07.273

我认为这就是您要寻找的东西：[https](https://crowdin.com) ://crowdin.com它有一个适合非技术人员的良好用户界面，它会创建要下载的翻译的 xml 文件。你也可以让翻译被校对。

# java - 3D：如何渲染/创建地形

> ID：10532363
> 
> 赞同：0
> 
> 时间：2012-05-10T10:44:19.697
> 
> 标签：java, opengl, 3d, terrain

我正在开发 3D 游戏，现在我必须将每个对象放入代码中。那么有没有办法让编辑器在 Java OpenGL 中放置对象？

最好是把整个世界（它有点大）做成一个大网格还是用另一种方式更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:32:33.117

> 那么有没有办法让编辑器在 Java OpenGL 中放置对象？

OpenGL 中没有对象。使困惑？

OpenGL 只是绘制东西，它被操作系统赋予了某种“画布”，你可以告诉它根据你的需要绘制点、线和三角形。

与场景或管理对象相关的任何事情都是您的负担，或者是附加工具包的负担。

> 我正在开发 3D 游戏，现在我必须将每个对象放入代码中。

想一想：与其硬编码数据，不如从文件中读取数据并使用文件内容构建场景，然后使用 OpenGL 绘制场景。这与阅读文本文件和向用户打印文本没什么不同。原理相同，只是数据类型不同。

有很多 3D 建模师。[Blender](http://blender.org)是一个优秀的开源软件。将模型和/或场景导出为您可以读取的某种文件格式（通过实现现有格式，或发明自己的格式并编写导出器）并使用您的代码进行渲染。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:58:01.090

在 java 和 openGL 中制作关卡编辑器当然是可能的，但这通常是一个相当大的项目。

将对象加载到游戏中的最简单方法可能是制作一个 XML 文件（或其他类型的数据文件），其中包含与游戏世界中的对象相关的位置、方向、网格、纹理和任何其他数据并对其进行编辑手动，但如果你有很多物体要放置，这可能会很乏味。然后可以在运行时读取它，并且您的场景将能够渲染这些对象。稍后，如果您选择制作一个关卡编辑器，则可以使用此文件格式。

至于你问题的第二部分，这取决于。然而，将整个世界变成一个网格很少是一个好主意。如果您的世界由许多网格组成，那么剔除会变得更容易，因为您可以从渲染调用中删除整个对象，而不是剔除单个顶点。

# c++ - 无法实例化抽象类，因为成员是抽象的

> ID：10532366
> 
> 赞同：1
> 
> 时间：2012-05-10T10:44:24.747
> 
> 标签：c++

我有这个抽象基类 ODESolver：

```
//ODESolver.h
#ifndef ODESolver_H
#define ODESolver_H
#include "doublependulum.h"
class ODESolver
{
public:
    ODESolver( DoublePendulum&);           //constr
    virtual ~ODESolver();                  //destr
    virtual void predict (const double &)=0; //virtual
protected:
    DoublePendulum DoublePend;
};
#endif 
```

实施：

```
//ODESolver.cpp
#include "ODESolver.h"
//constructor
ODESolver::ODESolver( DoublePendulum & param)
          :DoublePend(param)
{}
//destructor
ODESolver::~ODESolver(){} 
```

我也有这个类 ODEEuler ，它继承自 ODESolver

```
//ODEEuler.h
#ifndef ODEEuler_H
#define ODEEuler_H
#include "ODESolver.h"
class ODEEuler : public ODESolver
{
public:
    ODEEuler(DoublePendulum &);
    virtual ~ODEEuler();     
    virtual void Predict(const double &);
};
#endif 
```

实施

```
//ODEEuler.cpp
#include "ODEEuler.h"
#include <iostream>
using namespace::std;
ODEEuler::ODEEuler (DoublePendulum &param) 
         :ODESolver(param)
{}
//destructor
ODEEuler::~ODEEuler(){}
 void ODEEuler::Predict(const double &dt=0.01)
{
    DoublePend=DoublePend+DoublePend.Derivative()*dt;
    cout << DoublePend.getUp().getTheta() << endl; \\ I want to print getTheta on the screen form my getUp Pendulum from my Doublepend
} 
```

我现在想测试我的 ODEEuler，所以我在主文件中创建了一个对象：

```
//Main.cpp
#include "pendulum.h"
#include "doublependulum.h"
#include "ODEEuler.h"
#include "ODESolver.h"
#include <iostream>
using namespace::std;
int main()
{ 
Pendulum MyPendulum(1.5,1.5,1.5,1.5);
DoublePendulum MyDoublePendulum(MyPendulum,MyPendulum,9.81);  
ODEEuler myODEEuler(MyDoublePendulum);
return 0;
} 
```

我不断收到此错误：

> 1>....\main.cpp(24): 错误 C2259: 'ODEEuler' : 无法实例化抽象类 1> 由于以下成员: 1> 'void ODESolver::predict(const double &)' : 是抽象类 1 >
> .....\odesolver.h(11) : 参见 'ODESolver::predict' 的声明

我检查了我在虚拟 void 预测函数中使用的所有类型是否与其他地方相同。我想这可能是我做错了一些概念性的事情。因为“预测”是抽象的，所以我不能实例化到底是什么意思？

提前感谢您的支持！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T10:47:24.073

您的派生类需要实现纯虚函数才能被实例化。

```
virtual void predict (const double &)=0;
             ^

void ODEEuler::Predict(const double &dt=0.01)
               ^ 
```

请注意它使派生类中的方法成为不同方法的资本`p`，您最终永远不会定义基类纯虚拟方法。

# python - 如何使用 python xlwt 库更改 excel 单元格的背景颜色？

> ID：10532367
> 
> 赞同：15
> 
> 时间：2012-05-10T10:44:27.133
> 
> 标签：python, xlwt

我使用[xlwt](http://www.python-excel.org/) Python 库在 excel 工作簿中写入数据。
现在我在向 excel 单元格添加背景颜色时遇到了一些问题。

例如，我在 RGB(10,20,30) 中有下一种颜色，最简单的方法是什么？有没有办法将此颜色设置为单元格？

我发现只有[这篇](https://stackoverflow.com/questions/7746837/python-xlwt-set-custom-background-colour-of-a-cell)文章与我的问题相似。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T21:12:43.237

在此示例中，我展示了如何为单元格设置背景颜色，您可以运行它以获得结果：

```
from xlwt import Workbook
import xlwt
book = Workbook()
sheet1 = book.add_sheet('Sheet 1')
for i in range(0, 100):
    st = xlwt.easyxf('pattern: pattern solid;')
    st.pattern.pattern_fore_colour = i
    sheet1.write(i % 24, i // 24, 'Test text', st)
book.save('simple.xls') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-19T10:54:37.300

我有这个问题，我做了很多搜索

最后我找到了一个合适 [的解决方案：解决方案的来源](http://www.archivum.info/python-excel@googlegroups.com/2012-09/00014/Re-%28pyxl%29-Re-Background-with-any-rgb-value.html)

它工作得很好！

只需将此类添加到您的项目并设置 excel 颜色：

```
class ColorMatcher(object):
"""
the source is in : http://www.archivum.info/python-excel@googlegroups.com/2012-09/00014/Re-(pyxl)-Re-Background-with-any-rgb-value.html

Prior to Excel 2007, Excel only had color
indexes, and that's all that xlwt supports.  Maybe this will help,
though.  It use a ColorMatcher that takes an RGB input and tries to
return the closest matching Excel color index:
"""

def __init__(self):
    self.reset()

def reset(self):
    self.unused_colors = set(self.xlwt_colors)
    # Never use black.
    self.unused_colors.discard((0, 0, 0))

#Culled from a table at http://www.mvps.org/dmcritchie/excel/colors.htm
xlwt_colors=[
    (0,0,0), (255,255,255), (255,0,0), (0,255,0), (0,0,255), (255,255,0),
    (255,0,255), (0,255,255), (0,0,0), (255,255,255), (255,0,0), (0,255,0),
    (0,0,255), (255,255,0), (255,0,255), (0,255,255), (128,0,0), (0,128,0),
    (0,0,128), (128,128,0), (128,0,128), (0,128,128), (192,192,192),
    (128,128,128), (153,153,255), (153,51,102), (255,255,204),
    (204,255,255), (102,0,102), (255,128,128), (0,102,204), (204,204,255),
    (0,0,128), (255,0,255), (255,255,0), (0,255,255), (128,0,128),
    (128,0,0), (0,128,128), (0,0,255), (0,204,255), (204,255,255),
    (204,255,204), (255,255,153), (153,204,255), (255,153,204),
    (204,153,255), (255,204,153), (51,102,255), (51,204,204), (153,204,0),
    (255,204,0), (255,153,0), (255,102,0), (102,102,153), (150,150,150),
    (0,51,102), (51,153,102), (0,51,0), (51,51,0), (153,51,0), (153,51,102),
    (51,51,153), (51,51,51)
]

@staticmethod
def color_distance(rgb1, rgb2):
    # Adapted from Colour metric by Thiadmer Riemersma,
    # http://www.compuphase.com/cmetric.htm
    rmean = (rgb1[0] + rgb2[0]) / 2
    r = rgb1[0] - rgb2[0]
    g = rgb1[1] - rgb2[1]
    b = rgb1[2] - rgb2[2]
    return (((512 + rmean) * r * r) / 256) + 4 * g * g\
    + (((767 - rmean) * b * b) / 256)

def match_color_index(self, color):
    """Takes an "R,G,B" string or wx.Color and returns a matching xlwt
    color.
    """
    if isinstance(color, int):
        return color
    if color:
        if isinstance(color, basestring):
            rgb = map(int, color.split(','))
        else:
            rgb = color.Get()
        distances = [self.color_distance(rgb, x) for x in self.xlwt_colors]
        result = distances.index(min(distances))
        self.unused_colors.discard(self.xlwt_colors[result])
        return result

def get_unused_color(self):
    """Returns an xlwt color index that has not been previously returned by
    this instance.  Attempts to maximize the distance between the color and
    all previously used colors.
    """
    if not self.unused_colors:
        # If we somehow run out of colors, reset the color matcher.
        self.reset()
    used_colors = [c for c in self.xlwt_colors if c not in
                                                  self.unused_colors]
    result_color = max(self.unused_colors,
        key=lambda c: min(self.color_distance(c, c2)
        for c2 in used_colors))
    result_index = self.xlwt_colors.index(result_color)
    self.unused_colors.discard(result_color)
    return result_index 
```

此代码的来源是： [http://www.archivum.info/python-excel@googlegroups.com/2012-09/00014/Re-%28pyxl%29-Re-Background-with-any-rgb-value。 htmle](http://www.archivum.info/python-excel@googlegroups.com/2012-09/00014/Re-%28pyxl%29-Re-Background-with-any-rgb-value.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T09:41:04.133

```
GREEN_TABLE_HEADER = easyxf(
                 'font: bold 1, name Tahoma, height 160;'
                 'align: vertical center, horizontal center, wrap on;'
                 'borders: left thin, right thin, top thin, bottom thin;'
                 'pattern: pattern solid, pattern_fore_colour green, pattern_back_colour green'
                 )
overviewSheet.row(rowCursor).write(col_0, 'Issue', GREEN_TABLE_HEADER) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-06T21:40:37.473

我推荐使用 XlsxWriter 模块，也有很棒的功能[http://xlsxwriter.readthedocs.io/](http://xlsxwriter.readthedocs.io/)

# qt - qt qwt QwtPlotCurves 的 QList

> ID：10532368
> 
> 赞同：0
> 
> 时间：2012-05-10T10:44:33.780
> 
> 标签：qt, qwt

我想制作一个 QwtPlotCurve 的 QList 。这样做的原因是以后能够从我的 QwtPlot 中删除它们。我有以下代码：

```
QList<QwtPlotCurve> myList = new QList<QwtPlotCurve>;
QwtPlotCurve* curve1 = new QwtPlotCurve();
QwtPlotCurve* curve2 = new QwtPlotCurve();
curves->append(curve1);
curves->append(curve2); 
```

代码无法编译，编译器输出：

错误：*请求从“QList”转换为非标量类型“QList”*

*错误：没有匹配函数调用'QList::append(QwtPlotCurve* &)' void QList::append(const T&) [with T = QwtPlotCurve]

注：候选人是：

注意： void QList::append(const T&) [with T = QwtPlotCurve]

注意：没有已知的参数 1 从 'QwtPlotCurve*' 到 'const QwtPlotCurve&' 的转换

注意： void QList::append(const QList&) [with T = QwtPlotCurve]

注意：没有已知的参数 1 从 'QwtPlotCurve*' 到 'const QList&' 的转换

...

我说 QwtPlotCurve 应该是恒定的，但我不知道如何处理它。我也不知道将曲线存储在 QList 中然后（根据用户需求）从图中删除是否是正确的方法。

* * *

在 sjwarner 回答之后，我尝试了以下方法：

```
QList<QwtPlotCurve*> curves;
QwtPlotCurve* curve1 = new QwtPlotCurve();
QwtPlotCurve* curve2 = new QwtPlotCurve();
curves->append(curve1);
curves->append(curve2); 
```

我收到以下错误：

错误：“->”的基本操作数具有非指针类型“QList”错误：“->”的基本操作数具有非指针类型“QList”

我通过以下方式理解了这个错误：曲线是一个 QList，它应该是一个指向 QList 的指针。

如果我尝试：

```
QList<QwtPlotCurve*>* curves = new QList<QwtPlotCurve*>;
QwtPlotCurve* curve1 = new QwtPlotCurve();
QwtPlotCurve* curve2 = new QwtPlotCurve();
curves->append(curve1);
curves->append(curve2); 
```

它工作正常。我将看看 sjwarner 指出的“隐式共享”以摆脱“新”运算符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:05:51.400

你有两个问题：

1.  正如上面 Kamil Klimlek 所评论的那样，您`QList`在堆栈上声明您的对象，然后尝试在堆上分配它 - 因为`new`返回一个指向您正在使用的对象类型的指针`new`，所以您实际上是在尝试执行以下操作：

    ```
    QList<T> = *QList<T> 
    ```

    顺便说一句：您需要`new`关闭 a是非常罕见的`QList`，因为 Qt为其所有容器类实现了*隐式共享- 简而言之，您可以自信地将所有 Qt 容器（以及*[除 之外的许多其他类](http://doc.qt.nokia.com/4.7-snapshot/implicit-sharing.html#list-of-classes)）声明为堆栈如果在其他地方需要包含的数据，则对象和按值传递 - Qt 将处理所有内存效率和对象清理。

    **阅读[此](http://doc.qt.nokia.com/4.7-snapshot/implicit-sharing.html)内容以获取更多信息。**

2.  您正在声明一个`QList`对象并尝试用指向对象的指针填充它。您需要决定是否要`QList`包含数据副本：

    ```
    QList<QwtPlotCurve> curves;
    QwtPlotCurve curve1();
    QwtPlotCurve curve2();
    curves.append(curve1);
    curves.append(curve2); 
    ```

    或者您是否想`QwtPlotCurve`在堆上分配您的 s 并将指向它们的指针存储在`QList`：

    ```
    QList<QwtPlotCurve*> curves;
    QwtPlotCurve* curve1 = new QwtPlotCurve();
    QwtPlotCurve* curve2 = new QwtPlotCurve();
    curves.append(curve1);
    curves.append(curve2); 
    ```

# c++ - 语法不理解

> ID：10532370
> 
> 赞同：0
> 
> 时间：2012-05-10T10:44:39.693
> 
> 标签：c++

请问这行*的意义是什么？

```
CourseClass::CourseClass(Professor* professor){
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:47:16.070

它说函数参数是指针类型。

```
void foo1(int bar) { }  // foo1 accepts an integer argument

void foo2(int *bar) { }  // foo2 accepts an integer pointer. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:52:58.723

此函数将接受教授类型的指针参数

# php - PHP连接两个图像（在底部添加徽标）

> ID：10532374
> 
> 赞同：0
> 
> 时间：2012-05-10T10:44:54.393
> 
> 标签：php, image, footer, phpthumb

我正在通过 phpThumb 类上传和调整图像大小。我需要做的是在这张图片的底部添加我的标志。我不希望它成为水印，我想将这两个图像连接起来。

```
-------------------
|  image 1        |
|                 |
|                 |
|                 |
|                 |
|                 |
|                 |
|                 |
|                 |
-------------------
|  image 2        |
|                 |
|                 |
------------------- 
```

你能给我建议什么是最快和最简单的方法吗？我将拥有 png 格式的徽标，图像将是 png 或 jpg。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:06:05.707

这是附加两个图像的示例，在这种情况下，宽度必须相同。

```
$img1src = "img1.jpg"; 
$img2src = "img2.jpg"; 
$img1 = imagecreatefromjpeg($img1src); 
$img1W = imagesx($img1); 
$img1H = imagesy($img1); 
$img2 = imagecreatefromjpeg($img2src); 
$img2W = imagesx($img2); 
$img2H = imagesy($img2); 
$targetimg = imagecreatetruecolor($img1W,$img1H+$img2H); 
imagecopy($targetimg, $img1, 0, 0, 0, 0, $img1W,$img1H); 
imagecopy($targetimg, $img2, 0, $img1H, 0, 0, $img2W, $img2H); 
header('content-type: image/jpg');
imagejpeg($targetimg); 
```

# ios - 权利“应用程序标识符”具有配置文件不允许的值

> ID：10532375
> 
> 赞同：1
> 
> 时间：2012-05-10T10:44:54.687
> 
> 标签：ios, xcode, provisioning, entitlements

我收到了一个 2 年前发布的项目，该项目是由不再隶属于我们的第三方开发的。我正在使用 iOS5.0 sdk 在 xcode4.2 中运行它，并且已经使用这些构建了一些其他应用程序而没有任何问题。该项目的部署目标设置为 3.2.1，因为它是一个较旧的项目，理论上仍应在较旧的设备上运行。

该项目在模拟器中运行良好，但不能在设备上运行。它启动，加载启动画面，并在加载其他资产时崩溃，在 xcode 中没有显示错误。使用管理器中的设备控制台，我注意到它显示错误：

```
unknown install[20867] <Error>: entitlement 'application-identifier' has value not permitted by a provisioning profile 
```

这个错误一开始显示几次，还有一个：

```
No valid 'aps-environment' entitlement string found for application 'appname:(null). Notifications will not be delivered. 
```

我创建了一个启用了推送服务的新配置文件，并完成了所有的证书工作——我怀疑这个错误是第一个错误的后续，但我不确定。以前当我遇到这个问题时，这是因为我错误地在没有配置推送通知的情况下针对 prov 配置文件进行构建 - 切换到正确的配置文件解决了这个问题。

令人困惑的是，我尝试删除 prov 配置文件，重新启动 xcode、mac 和设备 - 问题仍然存在。我已确保 plist 中的包标识符与配置文件中使用的标识符匹配。我不确定是否需要更改 Entitlements.plist 中的任何内容，我之前制作的应用程序中没有此文件（我被认为在 xcode 4 中删除了该要求？）。目前，该 plist 中唯一的一行是“可以调试”，我已经尝试过正确和错误 - 两者都没有奏效。

我在这里查找了以前的问题，但没有运气。如果配置文件有问题，我什至不会期望它会构建，更不用说显示启动屏幕了。

有谁知道问题可能是什么？

提前谢谢了。

编辑：如果相关的话，我使用的设备是 3GS，在 iOS 5.0 上。无论我是直接从 xcode 运行，还是将应用程序归档为 ipa 并将其复制到设备，都会发生崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:47:39.677

首先，权利格式发生了变化，然后在归档应用程序时自动生成。完全删除权利文件并在构建设置中删除对其的任何引用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-08-23T05:26:07.890

我面临同样的问题，我发现有两种配置文件：

*   特别指定
*   分配

我选择了错误的类型，所以我无法安装它。您可以生成配置文件并重试。

![在此处输入图像描述](../Images/183f4d627179d60aadb2e4ca6fdd9fb6.png)

# javascript - 缩小PhoneGap App的代码？

> ID：10532376
> 
> 赞同：26
> 
> 时间：2012-05-10T10:44:54.590
> 
> 标签：javascript, html, ios, cordova, minify

我目前正在开始构建一个 PhoneGap 应用程序，我已经知道缩小浏览器代码的优势。但是，我想知道是否值得为我的 PhoneGap 应用程序缩小 HTML、JavaScript 和 CSS 代码？

我会理解代码运行得更快可能更快？

另外，如果是这种情况，是否有一个应用程序可以为我完成这一切？（当我说为我做这件事时，我的意思是在我的机器上创建一个目录并缩小保存 .min.js 版本的代码？还是一个文件一个简单的文件？）

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-22T14:07:55.003

好吧，挠我的脚，叫我奶奶，但我一直在为我的 phoneGap 应用程序缩小 javascript，它肯定会提高性能。

当然，应用程序包的大小几乎没有任何区别。因此，一旦用户下载并安装应用程序，缩小并没有真正的收益。

但是每次用户*运行*应用程序时，缩小 javascript 确实会有所作为。即使文件是本地文件，它仍然需要加载到“浏览器”中，并且较小的文件加载得更快，因此会更早开始执行。

而且您可能会拥有大量的 javascript，因为大多数应用程序都想“做”一些事情，而不仅仅是提供被动的 HTML 内容。

我也在考虑缩小 phonegap.js 文件本身。对此的任何想法都将受到高度赞赏。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-15T10:30:27.377

PhoneGap 代表的回答，复制自[PhoneGap 社区论坛](http://community.phonegap.com/nitobi/topics/phonegap_build_and_phonegap_js_compression) ：

> “不一定。JavaScript 压缩对于网络性能来说是最重要的——从远程服务器请求文件的 Web 应用程序需要等待文件被下载，因此拥有较小的文件会使过程更加顺畅。
> 
> 对于移动设备，尤其是 PhoneGap 应用程序而言，重要的是内存，而不是网络流量。虽然您可能会从运行缩小的 JS 文件中获得一些内存优势，但原始文件和缩小文件都被解释为相同的代码*，因此差异可以忽略不计。
> 
> 在大多数情况下，缩小 JavaScript 在 PhoneGap 应用程序的优先级列表中并不重要。”

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-10T10:48:04.837

一般来说，缩小PhoneGap 应用程序是不值得的。缩小对 Web 应用程序是有益的，因为它可以减少每个请求的大小。

使用 PhoneGap，您所有的 HTML/JS/CSS 都将被捆绑到应用程序包中（顺便说一句，它是压缩的），并在应用程序安装时下载一次。所以速度不会有任何提升。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-14T15:19:38.387

这可能有点晚了，但如果你仍然对缩小应用程序代码感兴趣，我制作了一个 NPM 包，它可以缩小你的 Javascript、CSS 和图像文件，称为[cordova-minify](https://www.npmjs.org/package/cordova-minify) ( [https://www.npmjs.org/package /cordova 缩小](https://www.npmjs.org/package/cordova-minify)）。

我的项目也在 GitHub 上，所以如果你想贡献和/或查看引擎盖下的内容，它就在那里 - [https://github.com/alastairparagas/cordova-minify](https://github.com/alastairparagas/cordova-minify)。它实际上是一个 Cordova Hook，它调用一些 NPM 包依赖项来进行相应的压缩。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-27T05:11:51.920

根据我的经验，Javascript 比 html/css 增长了很多。

从这里：[https ://reactjs.org/docs/add-react-to-a-website.html](https://reactjs.org/docs/add-react-to-a-website.html)

> **提示：为生产**
> 缩小 JavaScript 在将您的网站部署到生产之前，请注意未缩小的 JavaScript 会显着减慢用户的页面速度。
> ...
> 如果您的脚本没有缩小步骤，这是设置它的一种方法。

这需要[https://gist.github.com/gaearon/42a2ffa41b8319948f9be4076286e1f3](https://gist.github.com/gaearon/42a2ffa41b8319948f9be4076286e1f3)

> 在生产环境中，建议缩小应用程序中包含的所有 JavaScript 代码。缩小可以帮助您的网站加载速度提高几倍，尤其是随着 JavaScript 源代码大小的增长。

是的，建议缩小。
上面的第二个链接有关于如何使用[terser](https://www.npmjs.com/package/terser) npm 包进行缩小的简单命令。

# android - 从套接字服务器多次返回

> ID：10532382
> 
> 赞同：0
> 
> 时间：2012-05-10T10:45:14.253
> 
> 标签：android, sockets

我有一个在 android 设备上运行的套接字服务器。然后从客户端我向服务器发送一个字符串，服务器返回相同的字符串（回显服务器）。我想做的事情是也获取一些其他字符串，而不仅仅是我发送的字符串。这是服务器代码：

```
boolean finished = false;   
try {
  DataInputStream in = new DataInputStream(client.getInputStream());
  PrintStream out = new PrintStream(client.getOutputStream());                                
  // Print a message:
  System.out.println("Client from : " + client.getInetAddress() + " port " + client.getPort());
  // now get the input from the socket...
  while(!finished) {
    String st = in.readLine();
    // Send the same back to client
    if (st.equals("hello")) {
      cur = dbHelper.getRandomQuestion();
      String question = cur.getString(cur.getColumnIndex("QUESTIONS"));
      String answer1 = cur.getString(cur.getColumnIndex("ANSWER1"));
      String answer2 = cur.getString(cur.getColumnIndex("ANSWER2"));
      String answer3 = cur.getString(cur.getColumnIndex("ANSWER3"));
      String answer4 = cur.getString(cur.getColumnIndex("ANSWER4"));
      out.println(question);                                        
    }                                    
    out.println(st); 
```

这是客户端代码：

```
InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
Log.d("ClientActivity", "C: SENDING...");
Socket socket = new Socket(serverAddr, 5000);
System.out.println("Connected to " + socket.getInetAddress() + ":" + socket.getPort());
connected = true;
while(connected) {
  try {                         
    BufferedReader in = new BufferedReader( new InputStreamReader( socket.getInputStream() ) );                        
    PrintStream out = new PrintStream(socket.getOutputStream());                                            
    out.println(data.getText());                                 
    line = in.readLine();  // read server
    System.out.println("Echo: " + line);
    handler.post(updateUI); // here i change a textview to show the echoed string
    in.close();  // Close stream
    out.close();
  } catch (Exception e) {
    Log.e("ClientActivity", "S: Error", e);                             
  }

  connected = false;
} 
```

我也想返回 answer1,answer2,asnwer3,answer4。我怎么能那样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:44:13.437

您正在处理 Strins，所以我建议使用 readUTF() 和 writeUTF()。关键是您一次只能发送一个字符串。如果您想发送更多字符串，您必须创建一个字符串并在字符串之间放置一种间隔符。

当我写类似的东西时，我使用换行符作为分隔符并按以下方式格式化我的字符串：

字符串 1 + 空格键 + 字符串 2 + 空格键 + 字符串....

On the other side when you receive this long string you can use the split method to get an array of strings

```
String[] answers = input.slpit(SPACER); 
```

# c++ - 如何从字符串中删除特定的子字符串？

> ID：10532384
> 
> 赞同：19
> 
> 时间：2012-05-10T10:45:23.550
> 
> 标签：c++, string, substring

在我的 C++ 程序中，我有字符串

```
string s = "/usr/file.gz"; 
```

在这里，如何使脚本检查`.gz`扩展名（无论文件名是什么）并将其拆分为`"/usr/file"`？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-10T10:48:51.810

您可以使用[擦除](http://www.cplusplus.com/reference/string/string/erase/)删除符号：

```
str.erase(start_position_to_erase, number_of_symbols); 
```

您可以使用[find](http://www.cplusplus.com/reference/string/string/find/)找到起始位置：

```
start_position_to_erase = str.find("smth-to-delete"); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-10T10:54:38.473

怎么样：

```
// Check if the last three characters match the ext.
const std::string ext(".gz");
if ( s != ext &&
     s.size() > ext.size() &&
     s.substr(s.size() - ext.size()) == ".gz" )
{
   // if so then strip them off
   s = s.substr(0, s.size() - ext.size());
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T10:56:48.407

如果你能够使用 C++11，你可以使用`#include <regex>`，或者如果你坚持使用 C++03，你可以使用 Boost.Regex（或 PCRE）来形成一个正确的正则表达式来分解文件名的各个部分你要。另一种方法是使用 Boost.Filesystem 正确解析路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-01T13:54:31.347

```
void stripExtension(std::string &path)
{
    int dot = path.rfind(".gz");
    if (dot != std::string::npos)
    {
        path.resize(dot);
    }
} 
```

# android - Intent.ACTION_HEADSET_PLUG 返回 null

> ID：10532391
> 
> 赞同：1
> 
> 时间：2012-05-10T10:45:51.740
> 
> 标签：android, android-intent

```
public PluginResult execute(String action, JSONArray args, String callbackId) {         
  try {
    Intent intent = new Intent(Intent.ACTION_HEADSET_PLUG);
    String nm = intent.getStringExtra("name");
    String st1 = intent.getStringExtra("state");
    Log.v("nikhil","i="+intent+" name="+nm+" 2="+st1);

    return new PluginResult(PluginResult.Status.OK);

  } catch(Exception e) {            

    Log.e("MailApp", "Could not send email", e); 
  }
  return null; 
} 
```

nm 和 st1 一直为空。即使插入耳机！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:16:10.773

当耳机插入或拔出手机时，Android 系统会触发 Intent Intent.ACTION_HEADSET_PLUG。

您需要实现一个 BroadcastReceiver 以在此事件发生时捕获它。这是一个粘性事件，因此您可以使用以下快捷方式：

```
IntentFilter filter = new IntentFilter(Intent.ACTION_HEADSET_PLUG);
Intent headsetState= this.registerReceiver(null, filter);
int state = headsetState.getIntExtra("state", -1);
String name = headsetState.getStringExtra("name"); 
```

# html - html - 带有分页符的多列中的有序列表

> ID：10532394
> 
> 赞同：3
> 
> 时间：2012-05-10T10:46:01.233
> 
> 标签：html, css

我想根据这个[问题](https://stackoverflow.com/questions/2347060/html-css-how-to-create-multiple-column-list)在三列布局中显示一个订单列表，但我想尊重分页符，以便第二页列表中的下一个元素返回到第一列的顶部。

```
p1
1\.           4\.           7.
2\.           5\.           8.
3\.           6\.           9.

p2
10\.          12\.          14.
11\.          13\.          15. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:44:40.657

假设您的订单清单上有 18 件商品。您是否希望每页显示 9 个项目，并且当您单击一个按钮时希望它显示第 10 到第 18 个项目？如果是这种情况，并且您的页面将是 asp 或 jsp 或 php，则可以使用数据分页方法。对于示例视图，您可以查看此页面：[https ://stackoverflow.com/unanswered/tagged/?tab=votes&pagesize=15](https://stackoverflow.com/unanswered/tagged/?tab=votes&pagesize=15)

但是，如果您的页面将是普通的旧 html 页面，我建议您使用一些 jQuery :)

# ios - 基于视图到基于导航

> ID：10532395
> 
> 赞同：-5
> 
> 时间：2012-05-10T10:46:02.927
> 
> 标签：ios, xcode

我在 iPhone 中创建了一个 viewBasedApplication，我想在 Navigation BasedApplication 中使用 XIB 文件对其进行更改........那么我们如何才能做到这一点，以便它可以流畅地工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:57:55.197

首先，如果您创建了一个基于视图的应用程序，并且现在您想将其转换为基于导航的应用程序，那么您应该知道它们之间的区别。我的建议始终是制作一个基于窗口的应用程序，其中所有您可以包含但您不想要的东西选择任何特定的视图库导航或标签栏。只需将您的应用程序更改为窗口基础，然后将导航控制器添加到您的应用程序并为导航控制器创建 rootViewController 您将在您的应用程序中导航谢谢希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:58:37.583

从 XIB 库中实现 UINavigationController，拖放到 MainWindow xib，然后放入你的 ViewController 然后声明

在 Appdelegate.h 文件中

```
UINavigationController *viewController;

@property (retain,nonatomic) IBOutlet UINavigationController *viewController; 
```

AppDelegate.m

```
-(void)applicationDidFinishLaunching:(UIApplication *)application 
{
    [self.window addSubview:viewController.view];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

在您的 MainWindow.xib 中，将 viewController 拖放到实现的 UINavigationCotroller 中，即可解决。

有关更多信息，请[添加 UINavigationController](http://www.ralfebert.de/tutorials/iosdev/navigationcontroller/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T06:49:14.620

您需要在代码的导航控制器中添加视图的位置执行更改。

# c++ - 通过变量从 boost::MultiArray 中选择一个 NxM 子矩阵

> ID：10532401
> 
> 赞同：0
> 
> 时间：2012-05-10T10:46:28.880
> 
> 标签：c++, boost, multidimensional-array, matrix, boost-multi-array

我有多个 NxM 矩阵并想通过变量选择其中一个。我最好的猜测是用来`boost::MultiArray`创建一个 NxMxP 矩阵，然后通过第三维进行选择。

我使用array_view实现了它：

```
typedef boost::multi_array<double, 3> threeDimMatrix;
typedef threeDimMatrix::index_range rangeDim;
threeDimMatrix hypotheses(boost::extents[nInputs][nStates][nChan]);
threeDimMatrix::array_view<2>::type hypothesesAdd =
     hypotheses[boost::indices[rangeDim(0,2)][rangeDim(0,2)][ IDX ] ]; 
```

不幸的是，我想继续我的代码与这个矩阵作为 a`boost::matrix`并且不知道如何。我可以做一些类似演员的事情吗？

或者没有multi_array甚至可能吗？我还能以某种方式通过变量选择矩阵吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:04:41.573

除了拥有一个 3 维数组，你不能保持你的 Boost 矩阵原样并有一个映射器吗？然后不需要演员表，你不应该有任何问题。

映射器可以是一个基本数组，其中索引将是您的键，或者使用 C++ 库[cplusplus.com/reference/stl/map](http://cplusplus.com/reference/stl/map)。

# xcode - 每次运行时启动画面都会发生变化（XCODE、PhoneGAP）

> ID：10532404
> 
> 赞同：0
> 
> 时间：2012-05-10T10:46:54.290
> 
> 标签：xcode, cordova, splash-screen

我遇到了很长时间以来最奇怪的问题。

我正在使用带有 XCODE 4.3.2 的 PhoneGap 我使用 XCODE GUI 选项来选择 2 个启动屏幕版本（视网膜和非视网膜）。

在设备上运行它时，它会显示我的启动画面，下次我运行它时会更改为 phonegap 附带的默认启动画面。

奇怪的是每次我在我的设备上运行应用程序时它的变化（XCODE Schema --> Run）

知道什么会导致这种奇怪的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:45:52.583

它也发生在我身上。我通过用我的替换默认的phonegap闪屏来解决它。它工作得很好。

# java - 为所有子目录创建链接

> ID：10532410
> 
> 赞同：1
> 
> 时间：2012-05-10T10:47:22.247
> 
> 标签：java, applet, japplet

不幸的是，我没有使用 Java 的经验，但似乎在这种情况下没有它就无法管理......面临这样的任务：在 HTML 文档中，有必要在打开时动态形成一组引用，这些引用将指示所有文件`../../bin/*/versionInfo.xml`

IE 的子目录 bin 中可以有任意数量的目录，每个目录中肯定有一个文件`versionInfo.xml`.

不可能使用 JavaScript（出于安全原因），并且 PHP 不会使用，因为它应该由客户端计算机执行。建立客户端Java插件。我希望通过Java可以解决这个任务。IE 这样的标记（前提是可用的子目录版本 1-3）应该是结果：

```
<ul>
  <a href="../../bin/version1/versionInfo.xml">version1</a>
  <a href="../../bin/version2/versionInfo.xml">version2</a>
  <a href="../../bin/version3/versionInfo.xml">version3</a>
</ul> 
```

我很明白放在小程序元素中的Java代码是必要的。我请认识的人帮忙做一个必要的标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T01:50:08.337

> ..它应该由客户端计算机执行。

没有服务器的帮助，小程序无法实现这一点。“帮助”是指服务器以某种形式返回文件列表。

# actionscript-3 - AS3：如何为我的 api 实现组织类？

> ID：10532413
> 
> 赞同：1
> 
> 时间：2012-05-10T10:47:31.280
> 
> 标签：actionscript-3, oop

我正在开发一个与我的服务器交互的 Air 应用程序。有很多与不同主题相关的各种方法。

为了构建它，我介绍了一个主“API”对象和它的几个扩展器，每个扩展器都实现了特定主题的方法。`_call`他们每个人都使用实际调用服务器的主 API方法。

如何设置主 API，以便我可以像这样引用它的子 API：

```
var Api:myMasterApi = Application.getApi();

// Now do the API calls:
Api.Subject1.Method1();
Api.Subject2.Method3(); 
```

我尝试将 MasterApi 公共静态属性设置为实例化的子类，可能是错误的方式：

```
class myMasterApi {
    public static Subject1:mySubject1 = new mySubject1();
    public static Subject2:mySubject2 = new mySubject2();

    protected function _call( args... ) { /* does the call */ }
} 
```

扩展器是这样的：

```
class mySubject1 extends myMasterApi {
    public function Method1( args... ) {
        prepare things;
        this._call( args ); // do the call
    }
} 
```

这是 API 结构化实现的正确方法，还是我走错了路？

我坚持的问题是，当`Api.Subject1`它不是`static`通过循环自引用创建堆栈溢出时：因为它的基类具有`Subject1`作为属性。

当 Api.Subject1 为 时`static`，它会给出错误 1119：“通过静态类型的引用访问可能未定义的属性帖子......”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:24:40.620

您正在混淆两个不同的基本 OOP 概念：组合和继承。`Subject`对于您的特定类进行扩展`MasterApi`（继承）并`MasterApi`包含其每个后代的实例可能没有任何意义。它*是*圆形的。

您可能想要做的是拥有一个`Subject`每个特定扩展的基类`Subjects`，以便它们都可以使用一些常用方法，然后让您`MasterApi`成为一个不相关的类，其中包含每个特定的单例实例`Subjects`。

'Singleton' 只是一个术语，意思是“它是一个实例（不是静态类），但只有其中一个”。这正是您通过声明`static`属性并将它们设置为特定`Subject`类的新实例所得到的。

一个准系统示例（不包括`imports`语句等）。我不知道您的“主题”是什么，所以我只介绍一些虚构的属性：

```
class SubjectBase {
    private var _name:String;
    private var _description:String;

    public function SubjectBase() {  }

    protected function loadSubject(subjectID:String):void {
        var qResult:Object = SomeClass.SomeMethodThatQueriesYourServer(subjectID);
        _name = qResult["SUBJECT_NAME"];
        _description = qResult["SUBJECT_DESC"];
    }

    public function get name():String {
        return _name;
    }

    public function get description():String {
        return _description;
    }
}

class Subject1 extends SubjectBase {
    public function Subject1() {
        super();
        loadSubject("SUBJECT1");
    }
}

class Subject2 extends SubjectBase {
    public function Subject2() {
        super();
        loadSubject("SUBJECT2");
    }
}

class MasterApi {
    private static _subject1:Subject1 = new Subject1();
    private static _subject2:Subject2 = new Subject2();
    public function MasterApi() { }
    public static function get subject1():Subject1 { return _subject1; }
    public static function get subject2():Subject2 { return _subject2; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:01:21.133

你想要`Subject1`并且`Subject2`是静态的吗？如果`myMasterApi.Subject1`是这样，您如何获得这些静态项目。

相反，您可能想从定义中删除静态，一切都应该适合您。

# .net - .NET 中的短信通知

> ID：10532414
> 
> 赞同：0
> 
> 时间：2012-05-10T10:47:34.510
> 
> 标签：.net, sms

我想在我的 .NET Web 应用程序中向我的站点上的用户发送 SMS 通知到他们的电子邮件。有哪些服务可以让我这样做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:50:27.400

你可以试试[intelliSMS](http://www.intellisms.co.uk/sms-gateway/dotnet-component/) .NET 组件

# visual-studio-2010 - 提前部署 MSI 到组策略软件安装

> ID：10532415
> 
> 赞同：0
> 
> 时间：2012-05-10T10:47:34.763
> 
> 标签：visual-studio-2010, deployment, windows-installer, group-policy

**背景**

我的软件通过组策略部署在我们的网络上，使用标准 MSI 安装程序和一些自定义操作来注册软件实际上已部署。

这一切都非常简单和标准。这是一个大型 Windows 应用程序，所有文件都被转储到应用程序文件夹中，为桌面和开始菜单上的所有用户创建了一个快捷方式。大家都开心。它像发条一样工作，软件安装 GPO 完全没有问题。重新启动一到两次后，即可轻松安装/升级新版本。*这并不总是那么容易，但我做到了。*

**问题**

但是，在某些情况下，我只想立即发布更新*而不要求重新启动*。我想知道我是否可以让我的应用程序提供一种简单的方法：

1.  倒闭
2.  执行适当的 MSI（*它会自动放大向导，我不希望用户必须通过它*）
3.  启动应用程序或至少告诉用户重新启动它

我不希望这过多地影响当前的 MSI 配置，因为它必须通过 GPO 安装工作。火狐没有类似的更新机制吗？

MSI 是否足够聪明，可以知道它们何时已安装？例如，如果我的应用程序确实执行了这样的例程，那么当 PC 重新启动时，它会忽略 GPO 部署吗？如果我随后发布下一个版本的更新，它会卸载我手动安装的版本并用 GPO 版本覆盖它吗？

我只是敲了一个虚拟机来试试这个，但很高兴知道是否有人有这方面的经验。

谢谢！汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:01:10.187

GPO 中的更改和更新仅在电脑启动和/或登录时执行。这是你无法改变的。这限制了 GPO 安装软件的方式。事实上，只有在电脑启动时才有可能。请记住，GPO 是通过管理帐户应用的。

当用户运行您的应用程序时，该帐户仅限于用户权限。这使得无法安装/更改/删除软件。简单用户不能进行这种管理工作。请记住，Vista 或更高版本的权限和 UAC 是有限的。

这些限制迫使您拥有一种以管理员权限运行的安装服务。

Microsoft 系统中心配置管理器无需重新启动 GPO 即可安装软件。它能够做到这一点，因为它使用了一项服务。

也许您可以切换到 SCCM 来安装/更新您的软件。

如果你不能，你可以创建一个自己的服务来为你的应用程序安装补丁。

在您的 msi 中使用正确的升级代码和检查，这些更新不会在下次重新启动时被覆盖。

另一种解决方案：我们正在使用 AIP（管理员安装点）。此 AIP 通过 GPO 部署到客户端 PC。

我们的软件有一个小包装器，它在程序启动时执行。这个包装器检查版本号。如果 AIP 被修补，包装器会重新安装我们应用程序的主要组件/功能。

此包装器使用 Windows 安装程序 (COM)-API。我正在使用 ReinstallFeature 和/或 ReinstallFeature 函数，具体取决于 FeatureState。

# javascript - HTML & JQuery：如何从以前的表单中检索数据

> ID：10532421
> 
> 赞同：2
> 
> 时间：2012-05-10T10:48:01.613
> 
> 标签：javascript, jquery, html

我正在使用 JQuery 和 HTML 创建一个应用程序。在第一个表格中，您被要求输入一个 ID，然后一旦选中，您将被要求添加更多信息。我遇到的问题是，在第二页中按下提交后，我想将所有信息一起保存，这包括在第一页中输入的 id。

表单是使用 HTML 创建的，功能是使用 JQuery 完成的。我知道这可以使用 PHP 来完成，但由于我没有为这个应用程序使用任何 PHP，我想知道这是否可能以任何其他方式。

我在其中一个 .js 页面中使用它。这是要求 ID 的第一页的 HTML ...

编辑：

索引.html

```
<script type="text/javascript" charset="utf-8">
$('#RegisterForm').submit(function(){
$.cookie('cardNumberRegField', $('#cardNumberRegField').val());
});
</script>   

<form id="RegisterForm" method="post" data-ajax="false" id="registerCardForm" 
      action="register.html"> 
        <input type="text" id="cardNumberRegField" type="tel"  name="cardNumber" 
               class="required number register" minlength="16" maxlength="16"/> 
        <input name="Submit" type="submit" class="button" value="Register"/>
</form> 
```

注册.html

```
<script type="text/javascript" charset="utf-8">
$('#AccountDetailsForm').submit(function(){
var cardNumberReg = $.cookie('cardNumberRegField');
$('#tfscCardNumber').val(cardNumberReg );
});
</script>

<form id="AccountDetailsForm" method="post" data-ajax="false" id="thankyoupage" action="thankyou.html">

<input  id="tfscCardNumber" type="hidden" name="tfscCardNumber" class="readonly" minlength="2" maxlength="20" readonly="readonly" disabled="disabled"/> 
```

有人知道任何解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T10:55:28.003

您可以通过以下方式将数据从一个页面传递到另一个页面

1.  [请求参数](http://en.wikipedia.org/wiki/Query_string)
2.  [曲奇饼](http://en.wikipedia.org/wiki/HTTP_cookie)
3.  会话（通过服务器脚本基于每个用户）
4.  [本地存储](https://developer.mozilla.org/en/DOM/Storage)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T11:08:38.093

您要保存在第二个表单帖子中的值要么需要存储在接收第二个帖子的服务器上（在第一个表单帖子期间），要么在第二个帖子期间重新发布。

在我看来，好像您没有在第一篇文章中使用服务器端技术，即您发布到 html 页面。因此，解决方案似乎是上述两者中的后者。由于您没有使用服务器端技术，我会考虑捕获第一个表单提交并将值存储在 cookie 中。然后在第二页上，您可以捕获表单帖子并添加 cookie 中的值。

为此，我将使用[jquery.submit](http://api.jquery.com/submit/)和[jquery.cookie](http://www.electrictoolbox.com/jquery-cookies/)并添加如下内容；

编辑：index.html

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <!--[if IE]><![endif]-->
        <title></title>
        <script type="text/javascript" src="../_/js/jquery-1.5.2.min.js"></script>
        <script type="text/javascript" src="../_/js/jquery.cookie.js"></script>
        <script type="text/javascript">
            $(document).ready(function () { 
                $('#RegisterForm').submit(function () {
                    $.cookie('cardNumberRegField', $('#cardNumberRegField').val());
                });
            });
    </script> 
    </head>
    <body>
        <form id="RegisterForm" action="register.html">  
            <input type="text" id="cardNumberRegField" value="test" />  
            <input type="submit" value="Register" /> 
        </form>
    </body>
</html> 
```

编辑：register.html

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <!--[if IE]><![endif]-->
        <title></title>
        <script type="text/javascript" src="../_/js/jquery-1.5.2.min.js"></script>
        <script type="text/javascript" src="../_/js/jquery.cookie.js" ></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $('#tfscCardNumber').val($.cookie('cardNumberRegField'));
            });
        </script>
    </head>
    <body>
        <form id="AccountDetailsForm" action="thankyou.html"> 
            <input id="tfscCardNumber" type="text" value="undefined" /> 
        </form>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T11:16:28.750

您可以在不可见的 div 中找到来自表单 1 的值，然后在提交表单 2 时获取它们

# asp.net - 在面板内回发后，中继器的状态不会保持不变

> ID：10532422
> 
> 赞同：1
> 
> 时间：2012-05-10T10:48:03.843
> 
> 标签：asp.net, user-controls, postback, repeater, viewstate

我在标记中有以下代码结构：

```
 <asp:Panel ID="Panel1" runat="server" Title="TestPanel" Visible="true">
          <asp:GridView ID="grd1" runat="server" AutoGenerateColumns="true">        
          </asp:GridView>
          <myControl:RepeaterUserControl ID="rpt"></myControl:RepeaterUserControl>
        </asp:Panel> 
```

该面板用于控制可见性（当前始终设置为 true）。控件“RepeaterUserControl”是一个用户控件，它包含一个带有两个按钮的 asp 中继器，分别名为“Ok”和“Cancel”（所有初始设置为 display:none）。用户控件的所有这些内容都在页面上显示为模式弹出窗口（使用模式弹出窗口扩展器），单击“调用”按钮，该按钮也是用户控件的一部分。

```
<div id="div1" runat="server">
    <ajax:ModalPopupExtender ID="ModalPopupExtender1" runat="server" PopupControlID="divDialog"
        TargetControlID="btnDummyInvoker" CancelControlID="imbClose" PopupDragHandleControlID="divDialogTitle"
        BackgroundCssClass="modalBackground">
    </ajax:ModalPopupExtender>
    <div style="height: 4px;">
    </div>
    <asp:Button ID="btnInvoke" runat="server" OnClick="btnInvoke_Click" Text="Invoke"
        Width="90px" />
    <div style="display: none; position: absolute;">
        <asp:Button ID="Button2" runat="server" />
    </div>
    <div id="div2" runat="server" style="display: none;">
        <asp:Repeater ID="rptList" runat="server">
            <ItemTemplate>
                <tr>
                    <td>
                        <asp:Label ID="lblName" runat="server" Text='<%# Eval("DisplayText").ToString() %>'></asp:Label>
                    </td>
                </tr>
            </ItemTemplate>
        </asp:Repeater>
        <asp:Button ID="btnOk" runat="server" OnClick="btnOk_Click" />
        <asp:Button ID="btnCancel" runat="server" />
    </div>
</div> 
```

因此，在网格下方，用户会在页面上看到一个按钮 (Invoke)，单击该按钮时，重复器控件和 Ok/Cancel 按钮会显示在模式弹出窗口中。转发器被分配了一个数据源，其中包含项目列表，用户进行更改并在弹出窗口的确定单击时，从后面的代码（ok OnClick 事件）我以 rptList.Items.Count 访问转发器以进行进一步的操作。

**现在的问题。** 如果用户控件在面板外，它会完美地返回正确的项目计数，但如果用户控件在面板内（如代码所示），则在回发后单击确定按钮返回的计数为“0”。为什么在这种情况下中继器会失去其状态？

**更新：**从代码隐藏添加代码片段，如果它有助于解决问题

```
//This is from the user control code
 protected void btnInvoke_Click(object sender, EventArgs e)
        {   
          rptList.DataSource = listToBeBoundToRepeater;
          rptList.DataBind();
          modalPopupExtender.Show();             
        }

//This is from the user control code
 protected void btnOk_Click(object sender, EventArgs e)
        {

            for (int itemIndex = 0; itemIndex < rptList.Items.Count; itemIndex++)
            {
               // business logiv
            }

        } 
```

在我描述的案例回发后，rptList.Items.Count 对我来说是 0。

**update2 ：** 这是我得到的奇怪解决方案，我用标签封闭了网格和中继器，并将 runat 属性设置为 server 以使其成为服务器控件。现在它在正确回发后保留转发器的值。奇怪，但现在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T06:49:27.213

这是我得到的奇怪解决方案，我用标签封闭了网格和中继器，并将 runat 属性设置为 server 以使其成为服务器控件。现在它在正确回发后保留转发器的值。奇怪，但现在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:04:44.113

对于`<asp:UpdatePanel ID="UpdatePanel1" runat="server">`，将 AsyncPostbackTrigger 定义为 btnInvoke

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:07:55.530

编辑：删除了以前的答案。
我尝试在使用包含用户控件的主面板中尽可能多地模拟您的问题，该用户控件包含使用 ajaxcontroltoolkit 显示的转发器。
唉，我的中继器项目计数总是正确的。
容器页面：

```
<%@ Register TagPrefix="a" TagName="test" Src="cc.ascx" %>

<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<asp:ScriptManager ID="ScriptManager1" runat="server" />   
    <asp:Panel ID="Panel1" runat="server" Title="TestPanel" Visible="true">
        <a:test runat="server" ID="test"></a:test>
    </asp:Panel>
</asp:Content> 
```

用户控制 cc aspx ：

```
<%@ Register TagPrefix="ajax" Namespace="AjaxControlToolkit" Assembly="AjaxControlToolkit, Version=4.1.60501.0, Culture=neutral, PublicKeyToken=28f01b0e84b6d53e" %>

<div id="div1" runat="server">
    <ajax:ModalPopupExtender ID="ModalPopupExtender1" runat="server" PopupControlID="divDialog"
        TargetControlID="btnDummyInvoker"
        BackgroundCssClass="modalBackground">
    </ajax:ModalPopupExtender>
    <asp:Button runat="server" style="display:none" ID="btnDummyInvoker"/>
    <div style="height: 4px;">
    </div>
    <asp:Button ID="btnInvoke" runat="server" OnClick="btnInvoke_Click" Text="Invoke" Width="90px" />
    <div style="display: none; position: absolute;">
        <asp:Button ID="Button2" runat="server" />
    </div>
    <div id="divDialog" runat="server" style="display: none;">
        <asp:Repeater ID="rptList" runat="server">
            <ItemTemplate>
                <tr>
                    <td>
                        <asp:Label ID="lblName" runat="server" Text='<%# Eval("DisplayText").ToString() %>'></asp:Label>
                    </td>
                </tr>
            </ItemTemplate>
        </asp:Repeater>
        <asp:Button ID="btnOk" runat="server" OnClick="btnOk_Click" />
        <asp:Button ID="btnCancel" runat="server" />
    </div>
    <asp:TextBox runat="server" ID="result"></asp:TextBox>
</div> 
```

后面的用户控制代码：

```
public partial class cc : System.Web.UI.UserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void btnInvoke_Click(object sender, EventArgs e)
        {
            var list = new List<Data>();
            list.Add(new Data { DisplayText = "one" });
            list.Add(new Data { DisplayText = "two" });
            rptList.DataSource = list;
            rptList.DataBind();
            ModalPopupExtender1.Show();
        }

        protected void btnOk_Click(object sender, EventArgs e)
        {
            var count = rptList.Items.Count;
            result.Text = count.ToString();
        }
    } 
```

# silverlight - Windows 身份验证未加载用户

> ID：10532424
> 
> 赞同：2
> 
> 时间：2012-05-10T10:48:13.667
> 
> 标签：silverlight, wcf-ria-services, silverlight-5.0

我已将我的业务应用程序配置为使用 Windows 身份验证。从我读过的所有内容中，我不需要更改任何内容，它应该只加载当前登录的用户。不是这种情况。在`Application_Loaded`方法中，`User`为空。

![空用户](../Images/3d1a2f6323e7efe15258a38e8e2fea77.png)

即使我将项目上传到服务器，我仍然得到一个空用户。谁能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:47:19.663

看了一整天，终于找到了问题所在。我不得不从. `<roles>`_ 我还添加到类中的属性。`<profile>``<membership>``web.config``[ProfileUsage(IsExcluded=false)]``FriendlyName``User`

# ruby-on-rails - 在devise 2.0中使用omniauth从facebook获取用户个人资料大图

> ID：10532425
> 
> 赞同：23
> 
> 时间：2012-05-10T10:48:42.173
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, facebook-graph-api, omniauth

我想从 facebook 获取用户个人资料大图或普通图片。现在我使用以下代码从用户个人资料图片中获取方形版本：

```
:image => access_token.info.image
# http://graph.facebook.com/id/picture?type=square 
```

如何获得大版本或普通版本？

或者和应用程序，我如何在这个 url 中替换最后一个单词，大而不是正方形......

非常感谢你！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-07T16:04:02.497

如果您想在登录时获取不同尺寸的图片，omniauth-facebook 策略可以选择更改请求的图片。

> image_size：设置 auth hash 中返回的图片 url 的大小。

例如，将通过以下方式在 omniauth.rb 中请求大图：

```
provider :facebook, 'secrets', 'sekrets', :image_size => 'large' 
```

[https://github.com/mkdynamic/omniauth-facebook#configuring](https://github.com/mkdynamic/omniauth-facebook#configuring)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-10T11:28:55.020

以下是 facebook 允许的 4 种不同尺寸的个人资料图片。

```
http://graph.facebook.com/id/picture?type=small
http://graph.facebook.com/id/picture?type=square
http://graph.facebook.com/id/picture?type=large
http://graph.facebook.com/id/picture?type=normal 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-14T10:01:02.873

当您将其保存到数据库中时，您可以这样做`access_token.info.image.split("=")[0] << "=large"`

只需将大更改为您想要的任何大小。

或者你可以有一个辅助方法来在你的视图中显示不同的大小。

```
def profile_photo(type="large")
  puts @user.image.split("=")[0] << "=#{type}"
end

profile_photo("small") #=> http://url?type=small

profile_photo("square") #=> http://url?type=square

profile_photo #=> http://url?type=large

profile_photo("normal")  #=> http://url?type=normal 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-21T01:31:21.343

而不是更改配置文件，我只是添加`+ "?type=large"`到 url。

`<%= image_tag current_user.image + "?type=large" %>`

所以你可以随时要求不同的尺寸。

`<%= image_tag current_user.image + "?type=normal" %>`

`<%= image_tag current_user.image + "?type=small" %>`

# php - 从数据库结果构建多维数组

> ID：10532441
> 
> 赞同：1
> 
> 时间：2012-05-10T10:49:51.873
> 
> 标签：php, mysql

嗨，我有一组数据库结果，我需要将它们组织成一个多维数组，这样我就可以通过一封电子邮件而不是多封电子邮件向用户发送他们的结果。

我从数据库中获得的值是名称、电子邮件、route_name、route_details。理想情况下，我想根据用户电子邮件将路线分组在一起，因为这是他们的唯一标识符。我认为以下内容对我有用。

```
 Array
    (
       [email@email.com] => Array
                          (
                            [0] => name
                            [1] => Array
                                 (
                                   [0] => route_name
                                   [1] => route_details
                                 )
                             [2] => Array
                                 (
                                   [0] => route_name
                                   [1] => route_details
                                 )
                           )
       [email2@email2.com] => Array
                          (
                            [0] => name
                            [1] => Array
                                 (
                                   [0] => route_name
                                   [1] => route_details
                                 )
                            [2] => Array
                                 (
                                   [0] => route_name
                                   [1] => route_details
                                 )
                            [3] => Array
                                 (
                                   [0] => route_name
                                   [1] => route_details
                                 )

                           )
    ) 
```

任何帮助将不胜感激我在我的结果循环中尝试了以下内容，但我不确定如何根据电子邮件对结果进行分组，我不认为这正是我所需要的。

```
 $routeArray = array($data->email ,array($data->route_name, $data->route_details));

    $userEmailArray[] = $flightArray; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:11:46.373

我认为以下对你有用。此代码将添加键名而不是数字索引。

```
// Add order by email clause
$sql = "select name, email, route_name, route_details from YOUR SQL QUERY ORDER BY    email";
$res = mysql_query($sql);

$desired_format = array();

while($row = mysql_fetch_assoc($res)){
    $tmp = array('route_name'=>$row['route_name'],'route_details'=>$row['route_details']);
    $desired_format[$row['email']]['name'] = $row['name'];
    $desired_format[$row['email']][] = $tmp;
} 
```

# symfony - ManyToMany 表单上的验证错误

> ID：10532443
> 
> 赞同：0
> 
> 时间：2012-05-10T10:50:03.747
> 
> 标签：symfony

我想构建一个表单来存储一些数据。一个“Tarea”可以有多个“Material”，一个“Material”可以属于一个或多个“Tarea”。“Material”实体有图片属性，带图片上传。

我可以毫无问题地用图片创建一个新的“材料”。当我尝试创建一个新的“Tarea”时，问题就出现了，当我提交表单时，我收到“找不到文件”错误。

这是我的具有文件上传功能的 Material 实体：

```
/**
 * Gitek\HotelBundle\Entity\Material
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Gitek\HotelBundle\Entity\MaterialRepository")
 */
class Material
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $nombre
     *
     * @ORM\Column(name="nombre", type="string", length=100)
     */
    private $nombre;

    /**
     * @ORM\Column(type="string", nullable="true")
     *
     * @Assert\Image(maxSize = "500k")
     */
    protected $imagen;

    /**
     * @var datetime $created_at
     *
     * @ORM\Column(name="created_at", type="datetime")
     */
    private $created_at;

    /**
     * @var datetime $updated_at
     *
     * @ORM\Column(name="updated_at", type="datetime")
     */
    private $updated_at;

    /**
    * @ORM\ManyToMany(targetEntity="Tarea", mappedBy="materiales")
    */
    protected $tareas;

    public function __construct()
    {
        $this->created_at = new \DateTime();
        $this->updated_at = new \DateTime();
    }

    public function __toString()
    {
        return $this->getNombre();
    }

    /**
     * Sube la foto de la incidencia copiándola en el directorio que se indica y
     * guardando en la entidad la ruta hasta la foto
     *
     * @param string $directorioDestino Ruta completa del directorio al que se sube la foto
     */
    public function subirImagen($directorioDestino)
    {
        if (null === $this->imagen) {
            return;
        }

        $nombreArchivoImagen = uniqid('material-').'-1.'.$this->imagen->guessExtension();

        $this->imagen->move($directorioDestino, $nombreArchivoImagen);

        $this->setImagen($nombreArchivoImagen);
    } 
```

这是我的 Tarea 实体：

```
/**
 * Gitek\HotelBundle\Entity\Tarea
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Gitek\HotelBundle\Entity\TareaRepository")
 */
class Tarea
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $nombre
     *
     * @ORM\Column(name="nombre", type="string", length=100)
     */
    private $nombre;

    /**
     * @var datetime $created_at
     *
     * @ORM\Column(name="created_at", type="datetime")
     */
    private $created_at;

    /**
     * @var datetime $updated_at
     *
     * @ORM\Column(name="updated_at", type="datetime")
     */
    private $updated_at;

    /** @ORM\ManyToOne(targetEntity="Gitek\HotelBundle\Entity\Tipotarea") */
    protected $tipotarea;

    /**
     * @ORM\ManyToMany(targetEntity="Material", inversedBy="tareas")
     * @ORM\JoinTable(name="material_tarea",
     *      joinColumns={@ORM\JoinColumn(name="tarea_id", referencedColumnName="id")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="material_id", referencedColumnName="id")}
     * )
     */
    protected $materiales; 
```

这是我的 MaterialType 表单类型：

```
<?php

namespace Gitek\BackendBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class MaterialType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('nombre')
            ->add('imagen')
        ;
    }

    public function getName()
    {
        return 'gitek_hotelbundle_materialtype';
    }
} 
```

正如我所说，当我上传表单时，我收到“找不到文件”错误。好像验证失败了。

任何帮助或线索？

更新：如果在我的 TareaController 我评论验证行它可以正常工作。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:54:47.410

该表单不包括 Tarea 的字段，因此如果您在验证中要求它，它将失败。如果您不是一直需要它，您将需要设置验证组，以便验证器知道何时验证什么。

# python - 使用 Graphite 的计数器的性能图表

> ID：10532444
> 
> 赞同：0
> 
> 时间：2012-05-10T10:50:14.497
> 
> 标签：python, graphite, statsd

我想要一个类似下面的图表，它显示注册用户的数量在上午 9:41 为 0，并在上午 9:46 增加了 41：

[http://img59.imageshack.us/img59/7989/localhostscreencapture2.png](http://img59.imageshack.us/img59/7989/localhostscreencapture2.png)

但我得到了这个石墨图表（我在上午 9:46 将 statsd 计数器增加了 41）：

[http://img829.imageshack.us/img829/8702/graphitedevreqordercom.png](http://img829.imageshack.us/img829/8702/graphitedevreqordercom.png)

我的渲染请求是（有人向我推荐了 hitcount 方法）：

渲染/?width=586&height=308&_salt=1336642203.533&target=hitcount(stats_counts.reqorder.staging.community.1.membership.total, "1min")&from=09%3A40_20120509&until=09%3A50_20120509

如何更改渲染 url 请求以获得这样的图表：

[http://img59.imageshack.us/img59/7989/localhostscreencapture2.png](http://img59.imageshack.us/img59/7989/localhostscreencapture2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T12:23:39.247

您想要该`integral()`功能而不是`hitcount()`： http: [//graphite.readthedocs.org/en/0.9.10/functions.html#graphite.render.functions.integral](http://graphite.readthedocs.org/en/0.9.10/functions.html#graphite.render.functions.integral)

因此，您的完整查询将是：

```
integral(stats_counts.reqorder.staging.community.1.membership.total) 
```

请注意，尽管结果`integral()`总是从图表左侧的 0 开始。我不认为有办法解决这个问题。

# delphi - 如何计算位图的近距离裁剪矩形？

> ID：10532445
> 
> 赞同：12
> 
> 时间：2012-05-10T10:50:14.607
> 
> 标签：delphi, image-processing

我需要通过给定的背景颜色键计算位图的紧密裁剪矩形。在下面的图片中，您可以看到近距离裁剪的含义。左边是源，右边是close crop的输出：

![在此处输入图像描述](../Images/f74d048020a6a064b905112960c23d7d.png)

![在此处输入图像描述](../Images/57c0a48469fed186a3dd0c572d196663.png)

如您所见，我需要找到与背景颜色不同的最顶部、最左侧、最底部和最右侧的像素来构建紧密裁剪矩形。那么，如何找到那些不同的外部像素来获得近距离裁剪矩形？或者，换句话说，如何计算位图的紧密裁剪矩形？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T12:18:29.977

您可以使用此代码（您也可以关注[`commented version`](https://stackoverflow.com/revisions/10533819/4)这篇文章）：

```
procedure CalcCloseCrop(ABitmap: TBitmap; const ABackColor: TColor;
  out ACropRect: TRect);
var
  X: Integer;
  Y: Integer;
  Color: TColor;
  Pixel: PRGBTriple;
  RowClean: Boolean;
  LastClean: Boolean;
begin
  if ABitmap.PixelFormat <> pf24bit then
    raise Exception.Create('Incorrect bit depth, bitmap must be 24-bit!');

  LastClean := False;
  ACropRect := Rect(ABitmap.Width, ABitmap.Height, 0, 0);

  for Y := 0 to ABitmap.Height-1 do
  begin
    RowClean := True;
    Pixel := ABitmap.ScanLine[Y];
    for X := 0 to ABitmap.Width - 1 do
    begin
      Color := RGB(Pixel.rgbtRed, Pixel.rgbtGreen, Pixel.rgbtBlue);
      if Color <> ABackColor then
      begin
        RowClean := False;
        if X < ACropRect.Left then
          ACropRect.Left := X;
        if X + 1 > ACropRect.Right then
          ACropRect.Right := X + 1;
      end;
      Inc(Pixel);
    end;

    if not RowClean then
    begin
      if not LastClean then
      begin
        LastClean := True;
        ACropRect.Top := Y;
      end;
      if Y + 1 > ACropRect.Bottom then
        ACropRect.Bottom := Y + 1;
    end;
  end;

  if ACropRect.IsEmpty then
  begin
    if ACropRect.Left = ABitmap.Width then
      ACropRect.Left := 0;
    if ACropRect.Top = ABitmap.Height then
      ACropRect.Top := 0;
    if ACropRect.Right = 0 then
      ACropRect.Right := ABitmap.Width;
    if ACropRect.Bottom = 0 then
      ACropRect.Bottom := ABitmap.Height;
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  R: TRect;
  Bitmap: TBitmap;
begin
  CalcCloseCrop(Image1.Picture.Bitmap, $00FFA749, R);
  Bitmap := TBitmap.Create;
  try
    Bitmap.SetSize(R.Width, R.Height);
    Bitmap.Canvas.CopyRect(Rect(0, 0, R.Width, R.Height), Image1.Canvas, R);
    Image1.Picture.Bitmap.Assign(Bitmap);
  finally
    Bitmap.Free;
  end;
end; 
```

# c++ - C++ Unix 多线程“幕后”会发生什么？

> ID：10532448
> 
> 赞同：2
> 
> 时间：2012-05-10T10:50:28.380
> 
> 标签：c++, linux, multithreading, unix, c++11

我想知道关于 Unix（特别是 Linux）上的 C++ 多线程的“幕后”会发生什么——尤其是操作系统和信号量等的参与。

我已经进行了初步的谷歌搜索，但它没有抛出。

有人可以描述或指出一个可以提供帮助的好资源吗？

编辑：当我在 C++ 中创建线程时，操作系统会创建/存储哪些“对象”来管理该线程以及所涉及的任何相关开销？

已经意识到这更像是一个 Linux 问题而不是 C++ 问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:01:52.070

这取决于您使用的线程库。

在 C++11 中，当您`#include <thread>`为您的平台使用标准 C++ 库时，可以选择使用特定于操作系统的功能。在 Linux 的情况下，这通常通过 pthread 访问，或者在其他情况下，通过各种,和在某些架构上的原子和内存模型内在函数（栅栏、屏障等）直接调用`clone(...)`适当的标志和交互。`ioctls``fcntl`

如果你在 C++03 模式下使用 Boost.Thread，你基本上是在后台使用 pthreads。POSIX 操作系统中 Boost.Thread 中的所有构造都依赖于 POSIX 线程原语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:47:19.373

尝试在“strace”的帮助下运行你的程序。这将列出对操作系统进行的所有系统调用。

# delphi - IIS Express 中的 ISAPI 扩展？

> ID：10532452
> 
> 赞同：4
> 
> 时间：2012-05-10T10:50:37.400
> 
> 标签：delphi, iis-express, isapi

嗨，我想在 Windows 7 x64 机器上的 IIS Express 7.5 中运行和开发 ISAPI 扩展。假设我在 C:\dev\mywebapp.dll 中有 ISAPI 扩展。dll 是用 Delphi 编写的 32 位原生 DLL。然后我可以配置 IIS 以响应[http://localhost/foo/mywebapp.dll?id=100 之](http://localhost/foo/mywebapp.dll?id=100)类的请求。有谁知道我是否可以出于相同目的使用 IIS Express 7.5 而不是成熟的 IIS？

我曾尝试使用 IIS Express 7.5，但是当我访问我的[http://localhost:8080/mywebapp.dll](http://localhost:8080/mywebapp.dll)时，我的浏览器要求我保存 dll。我希望 IIS Express 像完整的 IIS 那样将其作为 ISAPI 扩展运行。任何人的想法？

TIA,

约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T23:23:38.717

我正在使用 IIS Express 来调试我的 Delphi ISAPI Web 应用程序。以下页面显示了如何执行此操作：

[http://paul.klink.id.au/Software/Delphi/DebuggingIsapiWithIisExpress.htm](http://paul.klink.id.au/Software/Delphi/DebuggingIsapiWithIisExpress.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:57:57.190

也许这会有所帮助？

[http://www.delphifeeds.com/go/s/61336](http://www.delphifeeds.com/go/s/61336)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T20:39:39.390

从 IIS Express 安装文件夹运行以下命令。

```
appcmd set config /section:handlers /+[name='MyIsapiExtension',path='*.aaa',verb='GET,POST',scriptProcessor='C:\dev\mywebapp.dll'] 
```

更多信息可以在[http://technet.microsoft.com/en-us/library/cc754147%28WS.10%29.aspx找到](http://technet.microsoft.com/en-us/library/cc754147%28WS.10%29.aspx)

# asp.net-mvc-3 - 如何在 MVC3 nhibernate 中使用分配的主键保存表中的行

> ID：10532456
> 
> 赞同：0
> 
> 时间：2012-05-10T10:50:59.520
> 
> 标签：asp.net-mvc-3, nhibernate, nhibernate-mapping

我有一个包含以下字段的表

```
 public class ActivationCode
{
  public virtual int LoginAccountId { get; set; }
   public virtual string ActivatedCode { get; set; }
   public virtual DateTime ActivationDate { get; set; }
} 
```

其中 LoginAccountid 是我的主键并映射为

```
 <id name="LoginAccountId">
  <generator class="native" />
</id> 
```

保存时我将 LoginAccountId 分配为我的用户帐户 id bt，同时保存它使用自己的 id 并保存数据我尝试使用 Session.Save(); 保存数据 和 Session.SaveorUpdate bt 中的 Session.SaveorUpdate 它给了我错误

```
 Unexpected row count: 0; expected: 1. 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:40:22.810

从[nhibernate.info](http://nhibernate.info/doc/nhibernate-reference/mapping.html#mapping-declaration-id-assigned)：

> 5.1.5.7。分配的标识符
> 
> 如果您希望应用程序分配标识符（而不是让 NHibernate 生成它们），您可以使用`assigned`生成器。这个特殊的生成器将使用已经分配给对象的标识符属性的标识符值。使用此功能分配具有业务意义的键时要非常小心（几乎总是一个糟糕的设计决定）。
> 
> 由于其固有的性质，使用此生成器的实体无法通过 ISession 的 SaveOrUpdate() 方法保存。相反，您必须通过调用ISession的`Save()`or方法来显式地指定 NHibernate 是否应该保存或更新对象。`Update()`

# sql - 获取具有系统日期和状态的行

> ID：10532457
> 
> 赞同：1
> 
> 时间：2012-05-10T10:51:00.983
> 
> 标签：sql, database, oracle

```
>          cycleNO| month |   year|  start date |    close date         |state | prv month  | next mnt 
>             1      4        2012    1/4/2012     30/4/2012 23:59:59      1       3                5
>             1      5        2012    1/5/2012     31/5/2012 23:59:59      0       4                6  
>             1      6        2012    1/6/2012     30/6/2012 23:59:59      0       5                7  
>             1      7        2012    1/7/2012     31/7/2012 23:59:59      0       6                8
>             2      4        2012    1/4/2012     30/4/2012 23:59:59      1       3                5
>             2      5        2012    1/5/2012     31/5/2012 23:59:59      0       4                6  
>             2      6        2012    1/6/2012     30/6/2012 23:59:59      0       5                7  
>             2      7        2012    1/7/2012     31/7/2012 23:59:59      0       6                8 
```

我有一个像上面一样的表（cycle_set），并且想要获取（cycleNO，month，year，start date，close date）条件为state = 0和start-close date，其中包含下个月内的系统日期状态=0。

输出应该是：

> ```
> cycleNO | month | year | start date | close date 
> 1      5        2012    1/5/2012     31/5/2012 23:59:59
> 1      6        2012    1/6/2012     30/6/2012 23:59:59
> 2      5        2012    1/5/2012     31/5/2012 23:59:59
> 2      6        2012    1/6/2012     30/6/2012 23:59:59 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:59:54.913

```
SELECT cycleNO,month,year,start_date,close_date FROM cycle_set
WHERE state=0
AND MONTH(start_date) = (SELECT month FROM cycle_set WHERE state=0 AND...)
AND MONTH(close_date) = (SELECT month FROM cycle_set WHERE state=0 AND...) 
```

问题是，您无法选择下一个结果月。这两个子选择中的 WHERE 子句中有什么内容？

如果您提取所有数据，然后在 PHP 或您正在使用的任何工具中处理它会容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:10:06.757

```
select cycleNO,month,year,start_date,close_date 
FROM cycle_set
WHERE state=0 and sysdate between start_date and close_date 
```

**更新**：如果你想同时获得当前和下个月：

```
select cycleNO, month, year, start_date, close_date 
FROM cycle_set
WHERE state=0 
   and ( sysdate between start_date and close_date or --current month
         sysdate between add_months(start_date,-1)  and close_date --next_month
        ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T19:31:13.640

假设您有一个数据集（如示例所示）：

```
 SELECT  cycleno,month,year,start_date,close_date 
      FROM  cycle_set
     WHERE  state=0 
       AND  (   month = EXTRACT(month FROM sysdate) 
             OR month = EXTRACT(month FROM sysdate)+1
            )
  ORDER BY  cycleno, month, year, start_date 
```

# java - Java中的频率控制

> ID：10532458
> 
> 赞同：4
> 
> 时间：2012-05-10T10:51:03.370
> 
> 标签：java, audio

java中是否有任何类可以通过它来控制音频频率。我已经通过javadoc找到了类`CompoundControl`，但它很模糊。我应该从哪里开始？

如何实现音频文件的各种频率，然后改变其 dB 级别，如均衡器。我上过一`CompoundControl`堂课，上面写着：

> CompoundControl（例如图形均衡器）提供对两个或多个相关属性的控制，每个属性本身都表示为 Control。

但我没有找到任何常量或方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:50:08.923

[您将在jlGui](http://www.javazoom.net/jlgui/jlgui.html)中找到均衡器实现，这是一个 Java 开源 Winamp 克隆。但请记住，均衡器功能仅适用于 MP3 数据。

# tsql - 使用 GROUP BY 创建 SELECT 语句

> ID：10532462
> 
> 赞同：1
> 
> 时间：2012-05-10T10:51:27.397
> 
> 标签：tsql

即使数据库中有几个小时的数据，如何创建一个包含所有小时返回值的分组的 select 语句？

我有以下查询：

```
SELECT 
    DAY(OccurredAt) AS [Day], 
    DATEPART(HOUR,OccurredAt) AS [Hour], 
    COUNT(ID) AS [Errors]
FROM 
    Database..Error WITH (NOLOCK)
WHERE 
    YEAR(OccurredAt) = 2012 
    AND MONTH(OccurredAt) = 5
GROUP BY 
    DAY(OccurredAt), DATEPART(HOUR,OccurredAt)
ORDER BY 
    DAY(OccurredAt), DATEPART(HOUR,OccurredAt) 
```

它返回如下数据：

```
Day Hour    Errors
1   1   2
1   4   2
1   6   1
1   7   1
1   9   3
1   10  1
1   11  1
1   14  19
1   15  7
1   16  234
1   17  54
1   18  17
1   19  109
1   20  27
1   22  2
2   6   2
2   7   1
2   8   2
2   9   1
2   10  44
2   11  2
2   15  1
2   16  3
2   18  2
2   19  41
2   20  108
2   21  106
2   22  36
2   23  2 
```

我希望它返回这样的数据：

```
Day Hour    Errors
1   0   0
1   1   2
1   2   0
1   3   0   
1   4   2
1   5   0
1   6   1
1   7   1
1   8   0
1   9   3
1   10  1
1   11  1
1   12  0
1   13  0
1   14  19
1   15  7
1   16  234
1   17  54
1   18  17
1   19  109
1   20  27
1   21  0
1   22  2
1   23  0 
```

所以基本上我也需要在查询结果中显示零错误的时间。这些将需要在整个日期范围内显示，在本例中为 2012 年 5 月。

尝试了一些东西，但到目前为止没有任何运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:49:09.737

不要使用临时表或 CTE，而是使用永久表。在几乎所有数据库中，拥有一个数字（或整数）表和一个日历表都非常有用。然后像您这样的查询变得容易，因为在这些表上进行外部连接以填充“真实”数据中不存在的缺失数字或日期很简单。当然，这是它们许多其他用途的补充。

另一种方法是通过您的代码分散重复的 CTE 和/或不可维护的硬编码函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:56:14.527

这是我用于每天选择东西的查询：

```
WITH Dates AS (
SELECT
 [Date] = CONVERT(DATETIME,'01/01/2012')
UNION ALL SELECT
 [Date] = DATEADD(DAY, 1, [Date])
FROM
 Dates
WHERE
 Date < '12/31/2012'
) 
SELECT [Date]
FROM Dates
OPTION (MAXRECURSION 400) 
```

您可以按照您喜欢的方式将它扩展为您需要的表的日期连接。

也许不是 100% 的答案，但这应该可以帮助您上路。

编辑：递归 CTE 可能表现不佳。所以明智地使用

# java - Java仅将丢失的文件从dir复制到另一个

> ID：10532463
> 
> 赞同：1
> 
> 时间：2012-05-10T10:51:31.000
> 
> 标签：java

我正在一个项目中工作，我必须只将丢失的文件从一个目录复制到另一个目录。我怎样才能做到这一点？看了网上的每一个地方，我找不到这里的解决方案是复制完整目录的代码，而不仅仅是丢失的文件。请帮忙。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

public class cFiles {
    public static void main(String[] args) {
        File srcFolder = new File("C://Source/");
        File destFolder = new File("C://Client/");
        // make sure source exists
        if (!srcFolder.exists()) {
            System.out.println("Directory does not exist.");
            // just exit
            System.exit(0);
        } else {
            try {
                copyFolder(srcFolder, destFolder);
            } catch (IOException e) {
                e.printStackTrace();
                // error, just exit
                System.exit(0);
            }
        }

        System.out.println("Done");
    }
    public static void copyFolder(File src, File dest) throws IOException {
        if (src.isDirectory()) {
            // if directory not exists, create it
            if (!dest.exists()) {
                dest.mkdirs();
                System.out.println("Directory copied from " + src + "  to "
                        + dest);
            }
            // list all the directory contents
            String files[] = src.list();
            for (String file : files) {
                // construct the src and dest file structure
                File srcFile = new File(src, file);
                File destFile = new File(dest, file);
                // recursive copy
                copyFolder(srcFile, destFile);
            }
            // Copying Files//
        } else {
            // if file, then copy it
            // Use bytes stream to support all file types
            InputStream in = new FileInputStream(src);
            OutputStream out = new FileOutputStream(dest);
            byte[] buffer = new byte[1024];
            int length;
            // copy the file content in bytes
            while ((length = in.read(buffer)) > 0) {
                out.write(buffer, 0, length);
            }

            in.close();
            out.close();
            System.out.println("File copied from " + src + " to " + dest);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:54:23.060

您的代码几乎完成了！如果目标文件已经存在，您只需添加一个检查。

像这样做：

```
 // Copying Files//
    } else if (!dest.exists()) {
        // if file, then copy it
        // Use bytes stream to support all file types
        InputStream in = new FileInputStream(src);
        OutputStream out = new FileOutputStream(dest); 
```

# java - 如何在 ListView 中创建 onClick 选择

> ID：10532466
> 
> 赞同：0
> 
> 时间：2012-05-10T10:51:43.900
> 
> 标签：java, android

我有一个`SQLite`数据库，我想在 ListView 中查看所有元素。但我想让每一行都可以点击。这个怎么做？这是代码：然后..另一个问题..我有一个可以通过选项菜单启动的活动，它可以从数据库中添加或删除数据..当我回到这个活动时，我想自动更新列表..如何更改代码？

```
public class WorkflowChoice extends Activity {

private static final int INIT_JADE_PROFILE = 0;
private static final int MANAGE_DATABASE = 1;
private static final int MODIFY_FILES = 2;
private static final int CHANGE_THEME = 3;
private static final int SHOW_OUTPUT_WORKFLOW = 4;
private LinearLayout properties_container;

private MyDatabase db;
TextView wfsTv;
ListView wfsLv;
private Cursor c;

public MyDatabase getDb() {
    return db;
}
@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.choice);

    properties_container = (LinearLayout ) findViewById(R.id.properties_container);

    String host = (String) InitJadeProperties.retrieve(this, getString(R.string.main_container_host), getString(R.string.default_host));
    String port = (String) InitJadeProperties.retrieve(this, getString(R.string.main_container_port), getString(R.string.default_port));

    wfsTv=(TextView)findViewById(R.id.wfsTv);
    ListView wfsLv = (ListView)findViewById(R.id.wfsLv);

    db=new MyDatabase(getApplicationContext());
db.open();  //apriamo il db

if(db.fetchWfs().getCount()==0){//inserimento dati, solo se il db è vuoto

        db.insertWf("WF1", "class1");
        db.insertWf("WF2", "class2");
        db.insertWf("WF3", "class3");
        db.insertWf("WF4", "class4");
        db.insertWf("WF5", "class5"); 

}

c=db.fetchWfs(); // query
startManagingCursor(c);

SimpleCursorAdapter adapter=new SimpleCursorAdapter( //semplice adapter per i cursor
                this, 
                R.layout.wfs, //il layout di ogni riga/prodotto 
                c, 
                new String[]{MyDatabase.WfMetaData.ID,MyDatabase.WfMetaData.WF_NAME_KEY,MyDatabase.WfMetaData.WF_CLASS_KEY},//questi colonne 
                new int[]{R.id.IDTv,R.id.nameTv,R.id.classTv});//in queste views

wfsLv.setAdapter(adapter); //la listview ha questo adapter

//qui vediamo invece come reperire i dati e usarli, in questo caso li stampiamo in una textview

int nameCol=c.getColumnIndex(MyDatabase.WfMetaData.WF_NAME_KEY);  //indici delle colonne
int classCol=c.getColumnIndex(MyDatabase.WfMetaData.WF_CLASS_KEY);       

if(c.moveToFirst()){  //se va alla prima entry, il cursore non è vuoto
        do {

                wfsTv.append("Wf Name:"+c.getString(nameCol)+", Class:"+c.getString(classCol)+"\n"); //estrazione dei dati dalla entry del cursor

                } while (c.moveToNext());//iteriamo al prossimo elemento
}

db.close();
getWindow().setFormat(PixelFormat.RGBA_8888);   //visto che usiamo i gradient, usiamo questo trick (vedi snippet forum)
getWindow().addFlags(WindowManager.LayoutParams.FLAG_DITHER);  

//wfsLv.setBackgroundDrawable(new GradientDrawable(GradientDrawable.Orientation.BOTTOM_TOP, new int[]{Color.RED,Color.parseColor("#f2bf26")}));
//wfsTv.setBackgroundDrawable(new GradientDrawable(GradientDrawable.Orientation.TOP_BOTTOM, new int[]{Color.RED,Color.parseColor("#f2bf26")}));
//definizione ed uso di gradient in modo programmatico

//animazioni in modo programmatico (vedi snippet forum)
Animation a1 = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_PARENT, 1.0f, Animation.RELATIVE_TO_SELF, 0.0f);
a1.setDuration(1000);
a1.setInterpolator(AnimationUtils.loadInterpolator(this, android.R.anim.decelerate_interpolator));
wfsLv.startAnimation(a1);
//entra da sotto

Animation a2 = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_PARENT, -1.0f, Animation.RELATIVE_TO_SELF, 0.0f);
a2.setDuration(1000);
a2.setInterpolator(AnimationUtils.loadInterpolator(this, android.R.anim.decelerate_interpolator));
wfsTv.startAnimation(a2);
//entra da sopra

wfsLv.setClickable(true);
//e affidiamo la gestione del tap/click ad un apposito listener, che ci permetterà di agire sull’elemento cliccato e ricaricare la nostra lista

wfsLv.setOnItemClickListener
       (new AdapterView.OnItemClickListener() {
public void onItemClick(AdapterView<?> parent,
          View v, int position, long id) {
 TextView txtId = (TextView)
          v.findViewById(R.id.wfsTv); 
 c.requery(); 
}
       });

/*wfsTv.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            CharSequence text = "Workflow scelto!";
            int duration = Toast.LENGTH_SHORT;

            Toast toast = Toast.makeText(getApplicationContext(), text, duration);
            toast.show();

        }
    });*/

    TextView masterTv = (TextView)findViewById(R.id.masterTv);
    masterTv.setText("Master");
    masterTv.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            startSubActivity();

        }
    });
}
private void startSubActivity(){
Intent intent = new Intent(this, ConfigChoice.class);
startActivity(intent);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:54:40.627

您在 Android 文档 ListView 教程中有一个示例：http: [//developer.android.com/resources/tutorials/views/hello-listview.html](http://developer.android.com/resources/tutorials/views/hello-listview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:55:57.723

试试这个代码：

```
wfsLv.setOnItemClickListener(new OnItemClickListener() {
  @Override
  public void onItemClick(AdapterView<?> arg0, View arg1,int arg2, long arg3) {

  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:01:38.873

您正在使用 xml 文件作为列表视图的一行。在您的 xml 文件中，只需将最外部的布局设置为

```
android:clickable="true" 
```

并且您所有的孩子都认为

```
android:clickable="false" 
```

试试这个希望它会工作。

然后你可以在 setonitemclicklistener 中收听

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T11:01:04.083

对于你的第一个问题，我有

```
 list.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> parent, View view, int position,long id) {

// here you will get **position** of the item in the list which you can use gor updation/deletion

                }

            }); 
```

对于第二个问题

写下你的第二个问题-

**在onResume()**方法中编写您的列表视图初始化代码，以便每次返回此活动时都会调用它。

# android - SQLite 光标行 ID NULL - 经验丰富的 Android 开发人员

> ID：10532472
> 
> 赞同：0
> 
> 时间：2012-05-10T10:52:13.827
> 
> 标签：android, sqlite, null, android-cursor, rowid

嘿，我正在使用游标查询数据库，但没有指向任何行，即在调试时显示 mrowId = null ，count =70（我使用内容值插入的内容在那里）但是当我写 cursor.moveToNext () 或 cursor.moveToFirst(); 它会抛出光标索引超出界限异常，而 cursor.moveToNext() 或 cursor.moveToFirst() 总是在 eclipse 中的 watch 表达式中返回......我希望你理解这个问题帮助我解决这个问题...... ..感谢您
为简单起见提前提出的建议我正在粘贴代码

```
public Cursor getDataBaseCursor(String tableName) {
    Cursor cursor = null;
    try {
        if (mainDatabase.isOpen()) {
            String countQuery = "SELECT  * FROM " + tableName;
            cursor = mainDatabase.rawQuery(countQuery, null);
            // cursor = mainDatabase.query(tableName, null, null, null,
            // null, null, null);
            if (cursor != null) {
                **boolean check =cursor.moveToNext();**
                return cursor;
            }

        } else {
            createOrOpenDatabase(databaseName);
            cursor = mainDatabase.query(tableName, null, null, null, null, null, null);
            if (cursor != null) {
                cursor.moveToFirst();
                return cursor;
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
        cursor = mainDatabase.query(tableName, null, null, null, null, null, null);
        if (cursor != null) {
            cursor.moveToNext();
            return cursor;
        }

    }
    return null;

} 
```

调试时**布尔检查**为真

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:17:34.093

可能这段代码会帮助你，

```
public Cursor getDataBaseCursor(String tableName) {
    Cursor cursor = null;
    try {
        if (mainDatabase.isOpen()) {
            String countQuery = "SELECT  * FROM " + tableName;
            cursor = mainDatabase.rawQuery(countQuery, null);

            int fieldValue; 
            if(cursor.getCount()>0){
                 cursor.moveToFirst();
                 do
             {
                    fieldValue=cursor.getInt(cursor.getColumnIndex("tbl_FieldName"));   
                    System.out.println("The Value of fatched field :"+fieldValue);
                 }while(cursor.moveToNext());
        cursor.close();
            }

          System.out.println("The Value of field :"+fieldValue);
       }
       catch (Exception e)
       {
     e.toString();
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:26:06.987

代替

```
if (cursor != null) {
**boolean check =cursor.moveToNext();**
return cursor; 
```

尝试

```
Log.d(TAG, "cursor.getCount()= " + String.valuseOf(cursor.getCount))
if(cursor.getCount > 0) {
    cursor.moveToFirst()
} 
```

# python - 头尾在一条线上

> ID：10532473
> 
> 赞同：103
> 
> 时间：2012-05-10T10:52:21.703
> 
> 标签：python, list, tail, head

是否有一种 Pythonic 方法可以在单个命令中解压缩第一个元素中的列表和“尾部”？

例如：

```
>> head, tail = **some_magic applied to** [1, 1, 2, 3, 5, 8, 13, 21, 34, 55]
>> head
1
>>> tail
[1, 2, 3, 5, 8, 13, 21, 34, 55] 
```

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2012-05-10T10:53:20.737

在 Python 3.x 下，你可以很好地做到这一点：

```
>>> head, *tail = [1, 1, 2, 3, 5, 8, 13, 21, 34, 55]
>>> head
1
>>> tail
[1, 2, 3, 5, 8, 13, 21, 34, 55] 
```

3.x 中的一个新特性是`*`在解包中使用操作符来表示任何额外的值。它在[PEP 3132-Extended Iterable Unpacking](http://www.python.org/dev/peps/pep-3132/)中有描述。这还具有处理任何可迭代的优点，而不仅仅是序列。

它也*非常*可读。

如 PEP 中所述，如果您想在 2.x 下执行等效操作（而不可能制作临时列表），您必须这样做：

```
it = iter(iterable)
head, tail = next(it), list(it) 
```

如评论中所述，这也提供了获取默认值`head`而不是引发异常的机会。如果您想要这种行为，请[`next()`](https://docs.python.org/3/library/functions.html#next)使用带有默认值的可选第二个参数，如果没有 head 元素，则`next(it, None)`会给您。`None`

自然，如果您正在处理列表，那么不使用 3.x 语法的最简单方法是：

```
head, tail = seq[0], seq[1:] 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-05-10T10:54:29.847

```
>>> mylist = [1, 1, 2, 3, 5, 8, 13, 21, 34, 55]
>>> head, tail = mylist[0], mylist[1:]
>>> head
1
>>> tail
[1, 2, 3, 5, 8, 13, 21, 34, 55] 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-10-03T18:21:30.653

但是，对于 O(1) 的`head,tail`操作复杂性，您应该使用`deque`。

以下方式：

```
from collections import deque
l = deque([1,2,3,4,5,6,7,8,9])
head, tail = l.popleft(), l 
```

当您必须遍历列表的所有元素时，它很有用。例如，在合并排序中天真地合并 2 个分区。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-13T19:31:08.377

Python 2，使用 lambda

```
>>> head, tail = (lambda lst: (lst[0], lst[1:]))([1, 1, 2, 3, 5, 8, 13, 21, 34, 55])
>>> head
1
>>> tail
[1, 2, 3, 5, 8, 13, 21, 34, 55] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-30T17:18:22.590

[在@GarethLatty](https://stackoverflow.com/a/10532492/4099593)的Python 2 解决方案的基础上，以下是在 Python 2 中获得单行等价物而无需中间变量的方法。

```
t=iter([1, 1, 2, 3, 5, 8, 13, 21, 34, 55]);h,t = [(h,list(t)) for h in t][0] 
```

如果您需要它是防异常的（即支持空列表），则添加：

```
t=iter([]);h,t = ([(h,list(t)) for h in t]+[(None,[])])[0] 
```

如果您想不使用分号，请使用：

```
h,t = ([(h,list(t)) for t in [iter([1,2,3,4])] for h in t]+[(None,[])])[0] 
```

# c# - 使用 MVC3 C# 更新到数据库时允许 Textarea 为空/空

> ID：10532475
> 
> 赞同：1
> 
> 时间：2012-05-10T10:52:24.607
> 
> 标签：c#, asp.net-mvc-3, razor, textarea

我的 MVC 应用程序上有一个页面，用户可以在其中编辑/上传数据到数据库。

基本上，网站上有一个名为“管理员”的链接，他们单击此处，登录并显示一个页面，该页面允许他们更改/更新网站“特别优惠”部分显示的数据。

“Admin”部分包含一些文本区域，用于显示数据库表中包含的数据。然后，用户可以更改这些文本区域中显示的数据并单击“更新”按钮，然后将这些数据上传到数据库，然后网站中的“特别优惠”页面将这些新更新的数据显示给公众。

我遇到的问题是，如果正在编辑数据的用户尝试使用没有数据的文本区域更新数据库，则不会加载“特价商品”页面（它返回如下所示的错误）。我检查了数据库表的“Nullable”选项设置为“True”，但这没有区别。

## [错误]

“/”应用程序中的服务器错误。

你调用的对象是空的。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。源错误：

```
Line 25: @Html.Raw(tbl_special_offers.offer3.Replace(Environment.NewLine, "<br/>")) 
```

* * *

这是“特价商品”视图用于访问数据库和显示数据的代码（使用 Visual Web Developer Express）：

```
@model IEnumerable<bhgc.Models.tbl_special_offers>
@{
    ViewBag.Title = "Special Offers";
}
<div>
    <fieldset>
            <legend>Special Offers</legend>
        <br />
        @foreach (var tbl_special_offers in Model)
        {

            <div style="overflow: hidden; width: 100%;">
                <div style="float: left; width: 40%; height: 50%; margin-left: 50px; border: 1px solid #ddd;  padding: 15px;">
                    @Html.Raw(tbl_special_offers.offer1.Replace(Environment.NewLine, "    <br/>"))
                </div>
                <div style="float: right; width: 40%; height: 50%; margin-right: 50px; border: 1px solid #ddd; padding: 15px;">
                    @Html.Raw(tbl_special_offers.offer2.Replace(Environment.NewLine, "    <br/>"))
                </div>
            </div>

    }
    </fieldset>
</div> 
```

无论如何，是否允许该字段为空，或者在更新时自动在该字段中附加一个空格，以便当公众查看“特价商品”页面时它不会返回错误？

相关网站和页面目前在[http://www.boarsheadgolfcentre.co.uk/Home/Special上公开](http://www.boarsheadgolfcentre.co.uk/Home/Special)

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:56:37.487

由于您正在对 null 执行替换的项目，您为什么不尝试这样的事情

```
(tbl_special_offers.offer2 ?? String.Empty).Replace(...) 
```

这样你不应该替换 on `null`，并且会（希望）避免异常。

# c# - 无法从扩展工具包 DropDownButton 中包含的用户控件中的按钮触发事件

> ID：10532477
> 
> 赞同：0
> 
> 时间：2012-05-10T10:52:26.770
> 
> 标签：c#, wpf, mvvm-light

我在执行位于 DataGridTemplateColumn.CellTemplate -> DropDownButton 内的按钮时遇到了一些问题。仅供参考，该按钮嵌入在用户控件中。代码如下：

DataGrid 列模板：

```
<Custom:DataGridTemplateColumn Header="Status">
                        <Custom:DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <extToolkit:DropDownButton Width="Auto"
                                                           Height="Auto"
                                                           Content="Request"                                                              
                                                           >
                                    <extToolkit:DropDownButton.DropDownContent>
                                        <local:ButtonGroup />
                                    </extToolkit:DropDownButton.DropDownContent>
                                </extToolkit:DropDownButton>
                            </DataTemplate>
                        </Custom:DataGridTemplateColumn.CellTemplate>
                    </Custom:DataGridTemplateColumn> 
```

查看型号：

```
ButtonSetStatusEvent = new RelayCommand(new Action<object>(SetStatus));

public ICommand ButtonSetStatusEvent
{
  get
  {
    return m_ButtonSetStatusEvent;
  }
  set
  {
    m_ButtonSetStatusEvent = value;
  }

}

private void SetStatus(object o)
{

  if (o.ToString() == "CmdWait")
  { 
    coStatus = (int)Status.Waiting;
    CoStatusDisplay = Status.Waiting.ToString();
  }
} 
```

按钮触发 XAML：

```
<i:Interaction.Triggers>
                <i:EventTrigger EventName="Click">                        
                        <cmd:EventToCommand Command="{Binding RelativeSource=    {RelativeSource FindAncestor,
                        AncestorType=local:GridOverview,
                        AncestorLevel=1},
                        Path=DataContext.ButtonSetStatusEvent}"
                        CommandParameter="CmdWait"
                        PassEventArgsToCommand="False" />                      

                </i:EventTrigger>
            </i:Interaction.Triggers> 
```

那么如何才能触发按钮的点击事件呢？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T01:26:34.613

通过实现 ViewModelLocator 解决

# selenium - 在 IE 上运行 WebDriver 测试随机失败

> ID：10532481
> 
> 赞同：1
> 
> 时间：2012-05-10T10:52:44.760
> 
> 标签：selenium, webdriver

我使用 WebDriver 编写了一些脚本，这些脚本能够完美地与 firefox 和 Chrome 一起运行。但是用 IE 运行这些脚本会导致失败。我在窗口处理机制期间遇到问题。以下是它的代码。

```
public void switchingWindow() {
    HashSet<String> handles =(HashSet<String>) driver.getWindowHandles();;
    Iterator<String> whandles = handles.iterator();
    int h = 0;
    while(handles.size()<2) {
        handles = (HashSet<String>) driver.getWindowHandles();
        whandles = handles.iterator();
        System.out.println("No Of Windows : "+handles.size());
        h++;
        sleep(500);
        if (h >= 60)
            Assert.fail("Tracker PopUp not loaded successfully");
    }
    parentWindow = whandles.next();
    popUpWindow = whandles.next();
    driver.switchTo().window(popUpWindow);
    System.out.println("PopUp Window is handled");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T01:32:23.837

根据我的经验，仅在 IE 中发生的随机故障通常是由于元素（在本例中为窗口处理程序）尚未完全存在。IE 似乎以与 Chrome 和 Firefox 不同的顺序/方式（我不知道如何）加载元素，所以我经常发现我必须在其他浏览器没有的情况下为 IE 应用 waitUntil。但是，这是窗口处理程序，我想情况并非如此，但如果是这样，我也不会感到非常惊讶：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T00:49:14.000

启动 Google Chrome 实例，并将 IE Tab 扩展配置为默认打开。它模拟 IE，但不会像 Microsoft 的产品那样崩溃。

# javascript - Ajax 调用错误的方法

> ID：10532482
> 
> 赞同：1
> 
> 时间：2012-05-10T10:52:44.887
> 
> 标签：javascript, ajax, asp.net-mvc

这是我的方法：

```
function logOff() {
    $.ajax({ url: "Login/LogOff", type: "GET", success: function (data) { window.location.href = "Login/Index"; } })//end of ajax call
} 
```

有了这个，我希望调用 LoginController 中的操作方法 LogOff。但是，所谓的：[http://localhost:6355/Home/Login/LogOff](http://localhost:6355/Home/Login/LogOff)，我得到错误。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:53:43.310

您必须在值的开头添加一个额外的斜线`url`。这称为**相对**URL。

```
function logOff() {
    $.ajax({
        url: "/Login/LogOff", // <-- slash before "Login"
        type: "GET",
        success: function (data) {
            window.location.href = "/Login/Index"; // <-- slash before "Login"
        }
    })
} 
```

另一种选择是使用*绝对*URL：

```
url: "http://localhost:6355/Login/LogOff" 
```

但它不灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:28:32.867

这是我所做的：

```
if (data == "") {
    patharray = window.location.href.split('/');
    data = window.location.protocol + "//" + patharray[2];
}
window.location.href = data; 
```

# android - 在android中的Touch Scroll上显示PDF

> ID：10532488
> 
> 赞同：0
> 
> 时间：2012-05-10T10:53:08.750
> 
> 标签：android, pdf

我在 Android 手机的 SD 卡中有多个单页 PDF。我想从我的应用程序中查看它，但不知道如何显示它。

我可以使用任何罐子在屏幕上显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:14:46.450

```
首先你在你的模拟器中安装acrobat reader，然后你在模拟器中查看你的pdf文件。
下载 acrobat reader apk 并从命令行使用此命令安装在模拟器中。
1\. 开始并打开运行。
2.输入cmd并输入“adb -e install FilePath”回车。
然后你去你的应用程序并编写此代码以在 acrobat 阅读器中查看 pdf。

```

```
Intent i = new Intent(Intent.ACTION_VIEW);
File pdf = new File(<File name whit full path>);
i.setDataAndType(Uri.fromFile(pdf), "application/pdf");
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:58:37.800

最好将 PDF 的查看移交给其他应用程序，例如 Adob​​e Reader。

使用意图：

```
Intent i = new Intent(Intent.ACTION_VIEW);
File pdf = new File(FILE_LOCATION);
i.setDataAndType(Uri.fromFile(pdf), "application/pdf");
startActivity(i); 
```

我们还应该考虑用户没有可用的 PDF 阅读器的情况：

```
Intent i = new Intent(Intent.ACTION_VIEW);
File pdf = new File(FILE_LOCATION);
i.setDataAndType(Uri.fromFile(pdf), "application/pdf");

List<ResolveInfo> list = getPackageManager().queryIntentActivities(i,
                PackageManager.MATCH_DEFAULT_ONLY);
if(!list.isEmpty()){
    startActivity(i);   
}else{
    Toast.makeText(this, "A PDF reader is required to open this.", Toast.LENGTH_LONG).show();
} 
```

# magento - Magento 运输规则从总规则中排除销售项目

> ID：10532489
> 
> 赞同：0
> 
> 时间：2012-05-10T10:53:12.060
> 
> 标签：magento, shipping

我正在尝试在 Magento 中设置一个运输规则，该规则为超过 150 英镑的订单提供免费送货服务，其中 150 英镑的门槛仅包括非销售商品。

到目前为止，我可以按类别处理销售项目：

```
If ANY  of these conditions are TRUE :
    If ALL  of these conditions are TRUE :
        Category  is not  194, 370, 367, 369, 366, 368 
        Price  equals or greater than  150 
```

这不包括所有销售项目，然后应用折扣总额超过 150。

但我真正需要确定的是购物车的总数不包括任何销售物品。

整个购物车总数和购物车总数的子集之间有什么区别，是按类别排除，还是特价等？

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:07:13.143

您使用以下内容修改条件选项卡：

```
If ALL  of these conditions are TRUE :

If total cost  equals or greater than  150  for a subselection of items in cart matching ALL  of these conditions:
    Category  is not  194, 370, 367, 369, 366, 368 
```

真的很简单。

# ruby-on-rails - 定期下载多个 XML 产品提要。考虑因素？

> ID：10532493
> 
> 赞同：1
> 
> 时间：2012-05-10T10:53:25.023
> 
> 标签：ruby-on-rails, feed

我有一个网站，目前正在获取和阅读 170 个提要，范围从少数产品到数万个。平均而言，他们每个人都有 3 000 种产品。相应地获取、读取和更新数据库需要几天甚至几周的时间。这实际上不是一个大问题，因为我可以在一个月内将工作分散开（它们不会太频繁地更新）。

我认为我目前的解决方案并不是最理想的，但希望得到一些反馈：

1.  我使用**open-uri**来获取提要，一次一个

2.  然后我使用**Nokogiri**解析提要并循环浏览所有产品

3.  根据产品是否存在，我在数据库中创建或更新帖子。

我查看了 Feedzirra，但结果发现它更多地用于博客提要。为了加快速度并采用这种相当简单的方法，我应该研究其他任何宝石或方法吗？

获取部分通常是较快的部分，所以我从中获得的最大收益将是数据库的实际更新。是否有任何智能宝石或方法可以同时进行多个更新和创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T15:14:14.447

将信息以大块的形式移动到数据库中，因为围绕单个 sql 语句的反对循环速度更快，并减少了托管服务器上的资源使用，请参阅：[https](https://stackoverflow.com/a/10560813/723871) ://stackoverflow.com/a/10560813/723871代码适用于 PHP，但该技术应该翻译成红宝石。

另一个需要考虑的是效率。如果一个包含 20 个项目的 RSS 提要自您上次查看以来仅添加了一个新项目，则无需再次抓取剩余 19 个的产品页面。尽管编写代码可能会很痛苦，但它将有助于加速跨多个提要的内容检索。lovelogic.net UK Job 扫描仪上的类似配置每天使用这种方法监视大约 570 个提要。

# c# - c# 和互联网密钥

> ID：10532494
> 
> 赞同：0
> 
> 时间：2012-05-10T10:53:28.117
> 
> 标签：c#, .net

我有一个使用 c# 和 .NET 3.5 在 WPF 上编写的软件，该软件需要连接到 Internet 以与某些 Web 服务交换数据。

出于测试目的，我使用了 sim 卡和 vodafone 移动互联网棒键 USB，以及 vodafone 移动宽带软件。

为了对互联网连接进行一些控制，我只需使用 system.process 类在 c# 中启动程序 vodafone 移动宽带。一旦配置为自动模式并且不请求 sim 的 pin，软件似乎工作正常。

我被迫关闭应用程序以杀死 .exe 软件。一切似乎都工作了一段时间。但是一段时间后，沃达丰手机会随机自动打开手动连接，因此它不再连接到互联网。

移动宽带不自带api，无法下AT指令打开连接。

所以我的问题是我可以使用具有 C# api 的设备来允许 pc 连接到 Internet 以编程方式打开到 Internet 的连接而无需用户交互，因此完全可以通过 C# 调用和管理。

提前感谢您的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:15:21.633

不要在用户的机器上自动化他们希望控制的事情——让应用程序自动打开瞬态互联网连接显然是一种安全风险，大多数人会立即删除你的应用程序。

我希望能够断开计算机上的互联网连接，而不必担心一个或多个应用程序会尝试重新初始化调制解调器/以太网卡/等。

您的应用依赖于连接 - 连接不依赖于您的应用。

所以基本上，恕我直言，不要这样做。

*更新*所以它适用于老年人，我可以理解你在说什么 - 但我仍然认为这不是追求它作为解决方案的充分理由。应用程序自动化非常不稳定，尤其是考虑到客户端可能会在您不知情的情况下更新；或者用户可能在技术上更先进并选择使用不同的调制解调器。

在这种情况下，最好调查一下沃达丰软件是否可以配置为自动运行并保持始终在线，然后确保负责安装它的人正确配置它。

# javascript - JavaScript 游戏循环不起作用

> ID：10532496
> 
> 赞同：-1
> 
> 时间：2012-05-10T10:53:30.847
> 
> 标签：javascript, loops

我正在尝试制作的游戏有问题。这是我的代码（非常基本）：

```
 var canvas = document.createElement("canvas");
var gameCanvas = canvas.getContext("2d");
canvas.width = 500;
canvas.height = 500;
document.body.appendChild(canvas);

// Global variables
var game;
game.fps = 60;
game._intervalId = setInterval(game.run, 1000 / game.fps);

// Game loop
game.run = function() {
    game.draw();
};

// Functions
game.draw = function() {
    // Background image
    var bgImage = new Image();
    bgImage.src = "img/background.png";
    // Player image
    var playerImage = new Image();
    playerImage.src = "img/player.png";
    // Draw
    gameCanvas.drawImage(bgImage, 0, 0);
    gameCanvas.drawImage(playerImage, 10, 10);      
}

// Game over
document.getElementById('end').onclick = function stop(){
    clearInterval(game._intervalId);    
}

// Run
window.onload = game.run(); 
```

游戏无法正常运行。我做错了什么，还是我错过了什么？这是该页面的链接：http: [//dl.dropbox.com/u/33213779/Game/demo_me.html](http://dl.dropbox.com/u/33213779/Game/demo_me.html)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:01:57.330

在 chrome 中，游戏会生成一个停止执行的错误。**var 游戏**之后；游戏是未定义的，那么当你做 **game.fps = something**时，就像你在做**undefined.fps = something**一样，javascript 会生气。第一个补丁是做**var game = {}**

而且我不明白您为什么要在循环中一次又一次地创建 bgImage 和 player 。即使这样有效，也可能会产生问题。

```
 var canvas = document.createElement("canvas");
    var gameCanvas = canvas.getContext("2d");
    canvas.width = 500;
    canvas.height = 500;

      canvas.setAttribute("style","border:1px solid red");
    document.body.appendChild(canvas);

    // Global variables
    var game = {};
    game.fps = 60;

    // Game loop
    game.run = function() {
        game.draw();
    };

    // Resource loader
    game.loader = function() {
        // Background image
        game.bgImage = new Image();
        game.bgImage.src = "img/background.png";

        // Player image
        game.playerImage = new Image();

        game.playerImage.src = "img/player.png";
    };                 

    // Functions
    game.draw = function() {
        // Draw
        gameCanvas.drawImage(game.bgImage, 0, 0);
        gameCanvas.drawImage(game.playerImage, 10, 10);     
    }
            game.loader();
    game._intervalId = setInterval(game.run, 1000 / game.fps); 
```

此版本的代码似乎可以按您的预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:06:44.660

从您写的内容中，我可以发现两个问题。

第一个是您必须将游戏变量作为对象初始化：

```
var game = {}; // = {} initializes a new Object
game.fps = 60;
.... 
```

第二个问题是您没有预加载图像源（而是每秒加载它们 60 次......），因此画布在它们仍在加载时无法访问它们。

相反，您可以使用这样的机制：

```
var bgImage = new Image();
bgImage.src = "img/background.png";
bgImage.onload = checkPreload;

var playerImage = new Image();
playerImage.src = "img/player.png";
playerImage.onload = checkPreload;

var loadedPics = 0;
function checkPreload(){
loadedPics++;
if (loadedPics == 2){
buildGame(); //start game
}
}

function buildGame(){
//inside this function you should be safe to refer to bgImage and playerImage
} 
```

请注意，这**过于**简单化了，因为图像预加载是一个有很多陷阱的领域。但我想你会明白的。

顺便说一句，**[这](http://www.html5rocks.com/en/tutorials/canvas/notearsgame/)**是一个关于游戏逻辑和所有东西画布的非常好的教程。

# windows - 如何为我的应用程序创建类似安装的谷歌浏览器？

> ID：10532497
> 
> 赞同：0
> 
> 时间：2012-05-10T10:53:32.513
> 
> 标签：windows, google-chrome, installation

> **可能重复：**
> [类似 Google Chrome 的下载器和安装程序](https://stackoverflow.com/questions/10921579/google-chrome-like-downloader-and-installer)

我想知道 chrome 在 Windows 上使用什么来下载和安装自身，以及如何为我的应用程序创建这样的安装过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:29:47.217

Chrome 的无声自我更新策略付出了高昂的代价。它将 .exe 存储在任何进程都可以写入的文件夹中，即我机器上的 C:\Users\hpassant\AppData\Local\Google\Chrome\Application\chrome.exe。

这绕过了要求提升以写入 c:\program 文件的 UAC 提示的需要，这是安装可执行文件的正常目录。所以更新可以完全静默。这应该使 Chrome 成为病毒编写者的一个有吸引力的目标，这些编写者可以让代码在你的机器上执行，但通常无能为力地弄乱关键文件来复制自己。他们只需要修补或替换 chrome.exe，并且可以静默进行。桌面快捷方式直接指向此文件，因此当用户再次启动 Chrome 时，它​​将运行受影响的可执行文件。

不知道为什么这不是一个广泛传播的攻击向量，除了它是一个相当大的程序并且不断变化并且可能有一些对策。也许因为 UAC 可以保护机器免受 .exe 的受感染副本，所以您只能执行诸如窃取密码并将用户重定向到 pr0n 站点之类的操作。

我并不特别关心这个漏洞，所以我避免使用 Chrome，您可能要考虑您的客户对您的程序有同样的担忧。尤其是当它没有 Chrome 可能拥有的那种对策时。用户和 IT 人员通常*喜欢*UAC，只有程序员不喜欢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T14:00:57.840

请参阅[类似 Google Chrome 的下载器和安装程序](https://stackoverflow.com/questions/10921579/google-chrome-like-downloader-and-installer)

一个非常完整的解决方案列表：

*   [Google Omaha](http://code.google.com/p/omaha/)（Google Chrome 的安装解决方案）
*   [高级安装程序](http://www.advancedinstaller.com/)
*   [Somoto BetterInstaller](http://betterinstaller.somotoinc.com/)（+ 添加您从中赚钱的建议）
*   [点燃](http://www.opencandy.com/developers/ignite/)（尚不可用）

或者可能使用[WiX 工具集](http://wixtoolset.org/)、[NSIS](http://wixtoolset.org/)或[Inno Setup](http://www.jrsoftware.org/isinfo.php)创建您自己的。您需要创建一个小型下载程序 EXE，该程序将从您的 Web 服务器下载完整安装，然后启动它。

所有这些都是免费的解决方案，除了 AdvancedInstaller。

# python - 将间隔日期时间值转换为任意频率的时间序列

> ID：10532501
> 
> 赞同：2
> 
> 时间：2012-05-10T10:53:48.927
> 
> 标签：python, time-series, pandas, data-analysis

我有以下数据结构：

```
2011-01-01 00:00, 2011-01-20 00:00, 200   # days-range
2011-01-20 00:00, 2011-03-08 00:00, 1288  # days-range
2011-04-11 00:00, 2012-01-08 00:00, 5987  # days-range

2012-02-01 00:00, 2012-02-01 01:00, 7     # hourly-range
2012-02-01 02:00, 2012-02-01 02:30, 3     # hourly-range 
```

这是包含**开始日期**、**结束日期**和**值**的间隔（日期之间记录的一些指标）。

为了进一步的数据分析，我需要生成具有所需频率的时间序列： **每月/每天/每小时/半小时**时间序列。例如，每小时数据：

```
2011-01-01 00:00, 2 
2011-01-01 01:00, 6
2011-01-01 02:00, 5
... 
```

**是否有任何 python 库可以帮助实现这种数据转换？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:16:19.337

```
import pandas as pd

def stretch(start_date, end_date, value, freq):
    freq_dict = {'d': pd.datetools.day,
                 'h': pd.datetools.Hour(1)}
    dr = pd.DateRange(start_date, end_date, offset=freq_dict[freq])
    return pd.TimeSeries(value / dr.size, index=dr)

print stretch('2011-01-01 00:00', '2011-01-20 00:00', 200, 'd') 
```

印刷

```
2011-01-01    10
2011-01-02    10
2011-01-03    10
2011-01-04    10
2011-01-05    10
2011-01-06    10
2011-01-07    10
2011-01-08    10
2011-01-09    10
2011-01-10    10
2011-01-11    10
2011-01-12    10
2011-01-13    10
2011-01-14    10
2011-01-15    10
2011-01-16    10
2011-01-17    10
2011-01-18    10
2011-01-19    10
2011-01-20    10 
```

# c# - C# Excel 互操作

> ID：10532502
> 
> 赞同：1
> 
> 时间：2012-05-10T10:53:52.980
> 
> 标签：c#, interop

我正在通过 C# 动态创建 Excel 工作表。我要求特定列中的所有活动单元格都有一个包含我提供的数据的下拉列表。

我可以让它在单个单元格上工作：

```
 Excel.Range range = (Excel.Range)activeSheet.Cells[Type.Missing, 4];
        Excel.DropDowns dropDowns;
        Excel.DropDown dropDown;
        dropDowns = ((Excel.DropDowns)(activeSheet.DropDowns(Type.Missing)));
        dropDown = dropDowns.Add((double)range.Left, (double)range.Top, (double)range.Width, (double)range.Height, true);

        for (int i = 0; i < 10; ++i)
        {
            dropDown.AddItem(i.ToString());
        } 
```

但是，我似乎无法让它只出现在特定列的活动单元格中。有任何想法吗？

谢谢。

# codeigniter - 在codeigniter中将值从单个表单传递到多个表

> ID：10532503
> 
> 赞同：1
> 
> 时间：2012-05-10T10:53:54.403
> 
> 标签：codeigniter

我有两张桌子`user`和`treeview`. 从我的注册表单中，我想将数据传递给这些表。例如，我想传递给`username`表`user`和表。对于单个表，我使用以下约定。`sponsor ID``treeview`

```
public function add_user()
{
    $data=array(
        'user_name'=>$this->input->post('fullname'),
        'sponsor_id'=>$this->input->post('sponsor_id'),
    );
    $this->db->insert('user',$data);
} 
```

对于多张桌子我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T10:56:51.700

怎么样：

```
public function add_user()
{
    $data1 = array('user_name' => $this->input->post('fullname'));
    $data2 = array('sponsor_id' => $this->input->post('sponsor_id'));
    $this->db->insert('user', $data1);
    $this->db->insert('treeview', $data2);
} 
```

在将数据插入数据库之前不要忘记清理数据。

# python - 完全匹配 python 正则表达式 url

> ID：10532505
> 
> 赞同：1
> 
> 时间：2012-05-10T10:54:07.677
> 
> 标签：python, regex

我有以下内容：

```
rule = "http://www.abc.com/"
test = "http://www.abc.com/test"
print(str(re.compile(rule).match(test))) 
```

我希望它输出 None 但它返回一个匹配项。如何更改规则变量以使正则表达式返回 None？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:59:42.293

如果您想比较完整的字符串，我认为您在这里不需要正则表达式。如果我误解了你，请纠正我。:)

可能此代码将是有用的：

```
rule = "http://www.abc.com/"
test = "http://www.abc.com/test"
print(rule == test) 
```

`False`如果字符串不同则返回，`True`否则返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T11:02:42.457

字符匹配字符串的`^`开头，并`$`匹配字符串的结尾。所以你会想要：

```
rule = "^http://www\.abc\.com/$"
test = "http://www.abc.com/test"
print(str(re.compile(rule).match(test))) 
```

请注意，这`.`意味着“匹配任何字符”，所以如果你想匹配一个实际的`.`你需要`\`它之​​前的。

# cookies - 如何通过 C# FormsAuthentication 记录自动 cookie 登录

> ID：10532508
> 
> 赞同：0
> 
> 时间：2012-05-10T10:54:19.050
> 
> 标签：cookies, login, formsauthentication

我在我的 C#.net 应用程序中使用 FormsAuthentication，并在每次用户登录时附加到数据库表中，以记录他们的登录时间，在调用 FormsAuthentication.RedirectFromLoginPage 或 FormsAuthentication.SetAuthCookie 之前不久。

这工作正常。

但是，如果我使用 createPersistentCookie，当用户下次访问该站点时，FormsAuthentication 会自动将它们登录，并且不会触发我的逻辑。

当用户在返回站点时首次通过身份验证时是否会触发事件？

我已经尝试过 FormsAuthentication_OnAuthenticate 和 Application_AuthenticateRequest，但它们在页面加载期间都会触发多次。我认为他们为页面加载触发一次，然后每次调用处理程序（ashx）时再次触发？

我需要一种方法来了解用户的 cookie 何时在会话中第一次使用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:47:47.880

看起来没有办法通过 FormsAuthentication 或内置事件来实现，所以我使用 Session 变量来记住当前会话是否记录了登录。

每当查询当前用户的 ID 时，我都会检查 Session 变量是否存在。如果没有，我会创建它并记录当时的登录信息。

# ascii - ASCII 空字符

> ID：10532514
> 
> 赞同：0
> 
> 时间：2012-05-10T10:54:28.330
> 
> 标签：ascii

ASCII 仅用于字符。**NULL**不是字符，那为什么**NULL**的ASCII值是0

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-10T10:56:16.850

> ASCII 仅适用于 [可打印] 字符 [s]

不完全是：除了*可打印*字符外，ASCII 还包括一些*控制*字符。

ASCII 代码 0 (NUL) 就是这样一种控制字符。

引用[维基百科](http://en.wikipedia.org/wiki/ASCII#ASCII_control_characters)：

> ASCII 为控制字符保留前 32 个代码（数字 0-31 十进制）：代码最初不用于表示可打印信息，而是用于控制使用 ASCII 的设备（例如打印机），或提供有关数据的元信息流，例如存储在磁带上的流。例如，字符 10 代表“换行”功能（使打印机前进其纸张），字符 8 代表“退格”。

如今，NUL 字符最常用于表示[C](http://en.wikipedia.org/wiki/C_%28programming_language%29)中字符串的结尾。然而，它最初的目的[是不同的](http://en.wikipedia.org/wiki/Null_character)：

> 这个字符的原始含义类似于 NOP——当发送到打印机或终端时，它什么也不做（但是，有些终端错误地将其显示为空格）。当机电式电传打印机被用作计算机输出设备时，在每行打印的末尾发送一个或多个空字符，以便机制有时间返回到下一行的第一个打印位置。在穿孔磁带上，字符完全没有孔，因此新的未穿孔磁带最初填充有空字符，并且通常可以通过将新字符穿孔到磁带上来将文本“插入”到空字符的保留空间空值。

# windows-phone-7 - 如何为windows phone mobile创建安装文件？

> ID：10532517
> 
> 赞同：0
> 
> 时间：2012-05-10T10:54:36.850
> 
> 标签：windows-phone-7, windows-phone-7.1

我为 windows phone 创建了一个应用程序，如何在移动设备上安装它？用c#创建的应用程序，带有Visual Studio SDK，它可以在模拟器上工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:57:53.460

您可以从 Visual Studio 将其部署到设备，或使用 SDK 中的 XapDeployer.exe。

[如何：使用 Visual Studio 构建和部署 Windows Phone 应用程序](http://msdn.microsoft.com/en-us/library/ff928362%28v=vs.92%29.aspx)

不要忘记将您的设备注册为开发人员的设备。

如果您需要将您的应用程序提供给其他用户，您必须将[其上传到 Marketplace](http://mobile.dzone.com/articles/windows-phone-7-app-marketplace)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:59:16.163

假设您的设备已解锁（换句话说，您在 App Hub 中注册并付款），您可以使用描述的 Visual Studio 和应用程序部署工具（[此处](http://msdn.microsoft.com/en-us/library/ff769512%28v=vs.92%29.aspx)）。

干杯，

# redis - Redis：为什么 Lua 脚本会取代事务？

> ID：10532520
> 
> 赞同：19
> 
> 时间：2012-05-10T10:54:43.247
> 
> 标签：redis

交易文件说：

> “我们可能会弃用并最终删除交易”和“你可以用 Redis 交易做的一切，你也可以用脚本做”

[http://redis.io/topics/transactions](http://redis.io/topics/transactions)

但真的吗？我看到了这个问题。

在一个事务中，您可以观察多个变量，读取这些变量，并且根据这些变量的独特状态，您可以在调用 EXEC 之前进行一组完全不同的写入。如果在中间时间有任何干扰这些变量的状态，EXEC 将不会执行事务。（这允许您重试。这是一个完美的交易系统。）

EVAL 脚本不会让您这样做。根据此页面上的文档：

> “脚本作为纯函数......在给定相同的输入数据集的情况下，脚本始终评估具有相同参数的相同 Redis 写入命令。脚本执行的操作不能依赖于任何隐藏（非显式）信息或可能随着脚本而改变的状态执行继续或在脚本的不同执行之间进行，也不能依赖于来自 I/O 设备的任何外部输入。”

[http://redis.io/commands/eval](http://redis.io/commands/eval)

我在 EVAL 中看到的问题是您无法在脚本中获取这些变量的状态，并根据这些变量的状态进行一组独特的写入。再说一遍：“在给定相同的输入数据集的情况下，该脚本始终使用相同的参数评估相同的 Redis 写入命令。” 因此，生成的写入已经确定（从第一次运行开始缓存），并且 EVAL 脚本不关心脚本中的 GET 值是什么。您唯一能做的就是在调用 EVAL 之前对这些变量执行 GET，然后将这些变量传递给 EVAL 脚本，但问题是：现在调用 GET 和调用 EVAL 之间存在原子性问题。

换句话说，所有你会为事务执行 WATCH 的变量，在 EVAL 的情况下，你需要获取这些变量，然后将它们传递给 EVAL 脚本。由于在脚本实际启动之前无法保证脚本的原子性质，并且您需要在调用 EVAL 启动脚本之前获取这些变量，这留下了一个开口，这些变量的状态可能会在 GET 和传递它们之间发生变化评估。因此，对于一组非常重要的用例，您在 WATCH 中所拥有的原子性保证是在 EVAL 中所没有的。

那么，为什么要讨论弃用事务，因为这会导致重要的 Redis 功能丢失？或者实际上有没有办法用我还不理解的 EVAL 脚本来做到这一点？或者是否有计划为 EVAL 解决这个问题的功能？（假设的例子：如果他们让 WATCH 与 EVAL 一起工作，就像 WATCH 与 EXEC 一样，那可能会奏效。）

有针对这个的解决方法吗？或者我是否理解 Redis 从长远来看可能不是完全安全的交易？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-10T12:27:48.170

确实，lua 脚本可以做任何事务，但我认为 Redis 事务不会消失。

> > EVAL 脚本不允许您查看变量

当一个 eval 脚本正在运行时，没有其他东西可以同时运行。所以，`watch`ing 变量是没有意义的。一旦您读取了脚本中的值，您就可以确定没有其他人修改过这些变量。

> > 我在 EVAL 中看到的问题是您无法在脚本中获取这些变量的状态，并根据这些变量的状态进行一组独特的写入。

不对。您可以将密钥传递给 eval 脚本。在您的 eval 脚本中，您可以从 Redis 读取值，然后根据这些值有条件地执行其他命令。

脚本仍然是确定性的。如果您使用该脚本并在从属服务器上运行它，它仍将执行相同的写入命令，因为主服务器和从服务器具有相同的数据。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-09-02T18:09:50.263

EVAL 脚本实际上扩展并简化了事务的功能。

通过以下方式查看 Redis 中的两种类型的事务可能会有所帮助：

**1\. 程序（MULTI EXEC）**

Pure MULTI EXEC 将要一次性执行的命令分组，并从每个命令返回一组回复。它有一个严重的局限性。它**不允许****在**事务中的下一个命令中使用一个命令的中间结果。在这种纯粹的形式中，它在实际应用中不是很有用。它基本上是一个保证原子性的流水线。

在事务之前添加 WATCH*键*，允许乐观锁定并在事务中使用从事务外部的 Redis 获得的值。如果发生竞争条件，事务将失败并且必须重试。这会使应用程序逻辑复杂化，并且乐观通常是没有根据的，因为您可能最终会陷入无休止的重试循环。

**2\. 功能性（EVAL 脚本）**

EVAL 不仅对 Redis 命令进行分组，还为您提供了完整的编程语言的强大功能，尤其是条件、循环和局部变量。在 Lua 脚本中，您可以在一个命令中从 Redis 读取值，然后在下一个命令中使用它们。

您提交以原子方式执行的脚本。它由单线程“停止世界”方法保证。执行脚本时不会执行其他脚本或 Redis 命令。因此 EVAL 也有一个限制：脚本必须小而快，以防止阻塞其他客户端。

我们还需要相信其他客户端不会提交慢速脚本，这应该被视为编程错误。它非常适合安全模型，因为*“Redis 旨在由受信任环境中的受信任客户端访问”*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-22T06:09:13.090

EVAL 脚本可以做事务可以做的所有事情，除了乐观锁定，这在单线程环境中不是很有用。

只能用脚本完成的非常有用的一件事是条件执行，例如执行一些执行并根据结果选择不同的后续执行，这只能在脚本中完成，这使得脚本在构建需要条件检查的功能时更加强大，这经常发生。

# apache-flex - flex 状态之间的平滑过渡

> ID：10532525
> 
> 赞同：1
> 
> 时间：2012-05-10T10:55:01.203
> 
> 标签：apache-flex, fade, effects, transitions, states

我有以下定义的状态：

```
<s:states>      
    <s:State name="DoorState"/>
    <s:State name="TvState"/>
    <s:State name="LightsState"/>
    <s:State name="BlindsState"/>
    <s:State name="BedState"/>              
</s:states> 
```

他们每个人都会触发一个组件出现，无论fromState和toState如何，我应该怎么做才能实现它们之间的平滑过渡？也许是一个淡出淡入效果左右？

```
<s:transitions>
    <s:Transition fromState="*" toState="*">
        ???
    </s:Transition>
</s:transitions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:06:57.303

我使用了下面的过渡

```
<s:transitions>
    <s:Transition fromState="*" toState="DoorState">
            <s:Move xFrom="1366" xTo="0" duration="500" target="{doorComponent}"/>
    </s:Transition>
    <s:Transition fromState="*" toState="LightsState">
        <s:Move xFrom="1366" xTo="0" duration="500" target="{lightsComponent}"/>
    </s:Transition>
    <s:Transition fromState="*" toState="BedState">
        <s:Move xFrom="1366" xTo="0" duration="500" target="{bedComponent}"/>
    </s:Transition>
    <s:Transition fromState="*" toState="BlindsState">
        <s:Move xFrom="1366" xTo="0" duration="500" target="{blindsComponent}"/>
    </s:Transition>
    <s:Transition fromState="*" toState="TvState">
        <s:Parallel>                
            <s:Move xFrom="1366" xTo="0" duration="500" target="{tvComponent}"/>
        </s:Parallel>
    </s:Transition>
</s:transitions> 
```

它就像滑入/滑出..

# wpf - 如何设置menuitem的背景颜色

> ID：10532526
> 
> 赞同：1
> 
> 时间：2012-05-10T10:55:03.997
> 
> 标签：wpf

我开发了包含 menuitem 的 WPF 应用程序。
我使用以下代码为这些菜单项设置背景颜色-

```
<MenuItem Header="_Main"  >

            <MenuItem Header=" _Daily Expences">
                <MenuItem.Background >
                    <LinearGradientBrush StartPoint="0,0.5" EndPoint="1,0.5">
                        <LinearGradientBrush.GradientStops>
                            <GradientStop Offset="0" Color="DeepSkyBlue"  />
                            <GradientStop Offset="1" Color="DarkOliveGreen"   />
                        </LinearGradientBrush.GradientStops>
                    </LinearGradientBrush>
                </MenuItem.Background>
            </MenuItem>
         <Separator ></Separator>
            <MenuItem Header=" _Business">
               <MenuItem.Background >
                    <LinearGradientBrush StartPoint="0,0.5" EndPoint="1,0.5">
                        <LinearGradientBrush.GradientStops>
                            <GradientStop Offset="0" Color="DeepSkyBlue"  />
                            <GradientStop Offset="1" Color="DarkOliveGreen"   />
                        </LinearGradientBrush.GradientStops>
                    </LinearGradientBrush>
                </MenuItem.Background>
            </MenuItem>
        </MenuItem> 
```

当我运行应用程序时，它会显示我设置的颜色，但是当我将光标放在菜单项上时，此菜单列表的背景颜色仍然是灰色的。
请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:05:27.213

我认为你应该使用`MenuItem.ItemContainerStyle`

看看这里的答案（对我来说应该是同样的问题）： [当文本框处于焦点时改变容器的背景颜色](https://stackoverflow.com/questions/2138200/wpf-change-background-color-for-selected-listbox-item)

# iphone - 将它链接到情节提要中的某个视图控制器？

> ID：10532531
> 
> 赞同：1
> 
> 时间：2012-05-10T10:55:22.620
> 
> 标签：iphone, objective-c, ios, storyboard, xib

我有一个动作需要链接到情节提要中的某个视图。我目前在下面的代码链接到情节提要的第一个视图。我如何将它链接到情节提要中的某个视图控制器？仅供参考-此链接来自不属于情节提要的 xib 文件，并且可以正常工作。谢谢

```
 - (IBAction)continueWithoutLoginButtonTouchHandler:(id)sender 
    {

        UIStoryboard* storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
        UIViewController* initialHelpView = [storyboard instantiateInitialViewController];

        initialHelpView.modalPresentationStyle = UIModalPresentationFormSheet;
        [self presentModalViewController:initialHelpView animated:YES];
    } 
```

我想知道方法： instantiateViewControllerWithIdentifier: 然后识别情节提要中的一个视图是否可行。

```
 - (IBAction)continueWithoutLoginButtonTouchHandler:(id)sender 
{

    UIStoryboard* storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
   // UIViewController* viewController = [storyboard instantiateInitialViewController];

    UIViewController *viewController = [storyboard instantiateViewControllerWithIdentifier:@"RotationVC"];

    viewController.modalPresentationStyle = UIModalPresentationFormSheet;
    [self presentModalViewController:viewController animated:YES];
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:34:10.637

使用方法： instantiateViewControllerWithIdentifier: 然后识别情节提要中的视图之一：

```
 - (IBAction)continueWithoutLoginButtonTouchHandler:(id)sender 
{

    UIStoryboard* storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
   // UIViewController* viewController = [storyboard instantiateInitialViewController];

    UIViewController *viewController = [storyboard instantiateViewControllerWithIdentifier:@"RotationVC"];

    viewController.modalPresentationStyle = UIModalPresentationFormSheet;
    [self presentModalViewController:viewController animated:YES];
} 
```

# node.js - 用于 redis 从属的 HAproxy

> ID：10532533
> 
> 赞同：8
> 
> 时间：2012-05-10T10:55:27.113
> 
> 标签：node.js, redis, load-balancing, haproxy

我们目前正在使用node_redis客户端访问redis。我需要在 redis slaves 前面使用 HAProxy，在我的例子中是 3 个。我安装了 HAProxy 并将其配置为对 redis 从站进行负载平衡。但是当我尝试创建从 node_redis 客户端到 HAProxy 的连接时，我无法创建连接并且出现错误

```
 Error: Redis reply parser error: Error: Protocol error, got "H" as reply type byte
at HiredisReplyParser.execute (/home/user1/doosra/node-exp/node_modules/redis/lib/parser/hiredis.js:32:31)
at RedisClient.on_data (/home/user1/doosra/node-exp/node_modules/redis/index.js:440:27)
at Socket.<anonymous> (/home/user1/doosra/node-exp/node_modules/redis/index.js:70:14)
at Socket.emit (events.js:67:17)
at TCP.onread (net.js:347:14) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-10T15:13:11.383

发布 haproxy 配置会有所帮助...

最可能的解释是 haproxy 未配置为处理通用 TCP 流量，而是 HTTP 流量。

**例子：**

使用以下配置：

```
global
    daemon
    maxconn 256

defaults
    mode http
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms

frontend redis
    bind *:1521
    default_backend servers

backend servers
    server R1 127.0.0.1:6379 maxconn 1000 
```

和以下 node.js 脚本：

```
var redis = require('redis')
var redis_client = redis.createClient(1521, 'localhost');
redis_client.get( 'key', function(e,o) {
    console.log("return "+e+o);
}); 
```

...我们得到了同样的错误：

```
Error: Redis reply parser error: Error: Protocol error, got "H" as reply type byte 
```

这是意料之中的，因为 Redis 协议解析器不理解 HTTP。要修复它，只需更改 haproxy 配置以强制执行通用 TCP 模式：

```
 mode http

to be changed into:

    mode tcp 
```

...现在它工作正常。

# java - 从 mysql 将值加载到 java 组合框

> ID：10532535
> 
> 赞同：0
> 
> 时间：2012-05-10T10:55:28.350
> 
> 标签：java, mysql, netbeans, jcombobox

我已经使用 net beans 创建了一个 jframe 并向其中添加了组合框。我只想从我的一个 sql 表中加载值。我需要将该表中的整个字段加载到组合框。什么是最简单的代码。（或netbeans中的图形方法）。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:58:45.660

您可以使用`Vector<T>` or`ComboBoxModel`对象。看看[JCombobox](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)教程。

PS：您应该必须使用[mysql JDBC 连接器 API](http://dev.mysql.com/downloads/connector/j/)来获取数据库结果。

# android - 如何使用广播接收器运行服务

> ID：10532536
> 
> 赞同：0
> 
> 时间：2012-05-10T10:55:32.307
> 
> 标签：android, service, broadcastreceiver

如何使用广播接收器启动后台服务。为相机锁定操作提供了一项服务，但一段时间后功能无法正常工作。服务在安卓设备上运行。但是 onstartcommand 中的服务方法不起作用。

> 使用 action.user_present 但它不工作。

```
 public class camerareceiver extends BroadcastReceiver{ 
public static String TESTACT_S = "android.intent.action.USER_PRESENT"; 
     @Override
     public void onReceive(Context context, Intent intent) {
     if(intent.getAction().equals(TESTACT_S))
      { context.startService(newIntent("com.simsys.camera.ServiceTemplate")); } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:59:48.050

从 BroadcastReceiver 启动服务：

```
public class CamReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {
if (intent.getAction().equals(Intent.ACTION_USER_PRESENT)) {
   Toast.makeText(context, "ACTION_USER_PRESENT",  Toast.LENGTH_LONG).show();
 context.startService(new Intent(context,ServiceTemplate.class));
}
}
} 
```

在清单中：

```
<receiver android:name= ".CamReceiver">
           <intent-filter>
             <action android:name="android.intent.action.USER_PRESENT"/>
           </intent-filter>
        </receiver> 
```

# c++ - 如何在 QT 项目中包含外部库？

> ID：10532538
> 
> 赞同：2
> 
> 时间：2012-05-10T08:34:29.887
> 
> 标签：c++, qt, qmake

> **可能重复：**
> [将外部库添加到 Qt Creator 项目中](https://stackoverflow.com/questions/718447/adding-external-library-into-qt-creator-project)

这是我的 QT 项目。我添加了外部库。当我运行这个程序时，出现以下错误：-：-“1：错误：找不到-libxml2”，当我删除“LIBS += -L/usr/local/lib -libxml2”行时，它显示“未定义参考“xmlstrcmp”和更多错误与此相同。提前致谢。

***“Test.pro”文件（项目文件）：-***

```
QT       += core gui xml
TARGET = test
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp

HEADERS  += mainwindow.h

FORMS    += mainwindow.ui

INCLUDEPATH = /usr/local/include/libxml2

LIBS += -L/usr/local/lib -libxml2

***"MainWindow.h" File(Header File):-***

#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>

#include <libxml/parser.h>
#include <libxml/xmlmemory.h>
#include <libxml/xmlstring.h>
#include <libxml/list.h>
#include <libxml/tree.h>
#include <libxml/SAX.h>

namespace Ui {
    class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

    void parseDocument(char *docName);
    void parse(xmlDocPtr doc, xmlNodePtr cur);

private:
    Ui::MainWindow *ui;
};

#endif // MAINWINDOW_H 
```

**“MainWindow.cpp”（类文件）：-**

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

#include <QDebug>

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    char *docName;

    docName = "/home/garima/Documents/test-build-desktop/test.xml";
    parseDocument(docName);

}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::parseDocument(char *docName)
{
    xmlDocPtr doc;
    xmlNodePtr cur;

    doc = xmlParseFile(docName);
    if(doc == NULL)
    {
        qDebug() << "Document is not parsed successfully.";
        return;
    }

    cur = xmlDocGetRootElement(doc);

    if(cur == NULL)
    {
        qDebug() << "Document is empty.";
        xmlFreeDoc(doc);
        return;
    }

    if(xmlStrcmp(cur->name,(const xmlChar *) "story"))
    {
        qDebug() << "document is of wrong type. Story is not a root node.";
        xmlFreeDoc(doc);
        return;
    }

    cur = cur->xmlChildrenNode;

    while(cur != NULL)
    {
        if(xmlStrcmp(cur->name, (const xmlChar *) "storyinfo"))
        {
            parse(doc, cur);
        }

        cur = cur->next;
    }

    xmlFreeDoc(doc);
    return;
}

void MainWindow::parse(xmlDocPtr doc, xmlNodePtr cur)
{
    xmlChar *key;
    cur = cur->xmlChildrenNode;

    while(cur != NULL)
    {
        if(xmlStrcmp(cur->name, (const xmlChar *) "keyword"))
        {
            key = xmlNodeListGetString(doc, cur->xmlChildrenNode, 1);
            qDebug() << "Key:" << key;
            xmlFree(key);
        }

        cur = cur->next;
    }

    return;
}

**"Main.cpp" (Main Class) :-**

#include <QtGui/QApplication>
#include "mainwindow.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();

    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T11:53:00.080

```
LIBS += -L/usr/local/lib -libxml2 
```

我认为`-libxml2`寻找一个名为“ibxml2”的库，这可能不是你想要的。

如果您正在使用一个名为“libxml2”的库，我会尝试使用

```
LIBS += -L/usr/local/lib -lxml2 
```

# actionscript-3 - 在多个外部 .SWF 之间共享补间或粒子类

> ID：10532539
> 
> 赞同：0
> 
> 时间：2012-05-10T10:55:54.777
> 
> 标签：actionscript-3, class, flash, external

希望有人可以帮助解决这个问题，我在任何地方都找不到答案！

我目前正在构建一个 Flash 项目，该项目由一个主 .SWF 和多个根据需要加载的外部 .SWF 组成。

其中每一个都需要一个粒子或补间类来辅助动画，但是将这些类与 .SWF 捆绑在一起会大大增加文件大小，并且使用每个文件重新下载这些类会效率低下。

有什么方法可以将这些类共享为一个可供外部 .SWF 文件使用且只能下载一次的文件？

谢谢！埃德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:11:02.303

是的，您需要使用 -[运行时共享库](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7fd1.html)

# java - 如何为具有 Class 参数的方法提供有效的类？

> ID：10532544
> 
> 赞同：1
> 
> 时间：2012-05-10T10:56:15.667
> 
> 标签：java, spring, configuration, annotations

我有一种情况，我需要以编程方式设置具有参数的东西，`Class<? extends Annotation>`但我无法弄清楚如何将 Annotation 类传递给该方法。

例如，如果我有`javax.persistence.Entity`并且我尝试过，`setAnnotation(javax.persistence.Entity.class)`我会收到一条错误消息，说`Class<Entity>`不适用于这些论点。但是，这是一个具有`@interface`属性的类；这显然是一个注释。我做错了什么，如何正确发送值？

这样做的原因是我要从 Spring XML configuration 到 class `@Configuration`。在 xml 文件中很容易做到这一点：

```
<property name="annotation" value="javax.persistence.Entity" /> 
```

但我不知道 Spring 正在做什么来完成这项工作。

```
public class Stuff {
    private List<Class<? extends Annotation>> annotations;

    public List<Class<? extends Annotation>> getAnnotations() {
        return annotations;
    }

    public void setAnnotations(List<Class<? extends Annotation>> annotations) {
        this.annotations = annotations;
    }
}

public class StuffTest {

    @Test
    public void test() {

        new Stuff().setAnnotations(Collections.singletonList(javax.persistence.Entity.class));
        // this does not compile
    }
} 
```

编辑：

```
List list = new ArrayList();
list.add(javax.persistence.Entity.class);
stuff.setAnnotations(list); 
```

有效，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:33:26.973

这是适用于我的 API（使用 Eclipse 和 javac 编译器）：

```
public void setAnnotations(
  Collection<? extends Class<? extends Annotation>> annotations) { 
```

当然，这意味着你必须改变`Stuff`自身的一些内部运作......

还要注意`Collection`参数类型，因为`Collections.singleton()`返回 a `Set`，而不是 a `List`。也许您打算使用 a`Collections.singletonList()`代替？

# python - django sweetpie 自定义登录

> ID：10532546
> 
> 赞同：2
> 
> 时间：2012-05-10T10:56:22.510
> 
> 标签：python, django, authentication, tastypie

我现在对 sweetpie 比较熟悉，它与授权和身份验证紧密结合。

无论如何从另一个可用于授权的位置的页面登录，而不是弹出美味的馅饼身份验证？

当用户请求登录时，如果他们不使用浏览器而是使用本机应用程序，此弹出窗口将如何显示在他们的移动设备上。

**它说 401 未经授权**

我尝试过的示例代码如下

```
class MyAuthentication(BasicAuthentication):
    def is_authenticated(self, request, **kwargs):
        from django.contrib.auth import authenticate
        #for now i tried static but still not working are return types correct     
        def is_authenticated(self, request, **kwargs):
            from django.contrib.auth import authenticate
            user = authenticate(username='admin', password='admin')

            if user is not None:
               if user.is_active:
                  return True
               else:
                 return self._unauthorized()
            else:
                return self._unauthorized()

class EntryResource(ModelResource):
    class Meta:
        queryset = Entry.objects.all()
        resource_name = 'entry'
        #authorization = Authorization()
        authorization = DjangoAuthorization()
        authentication = MyAuthentication()

    filtering = {
        'user': ALL_WITH_RELATIONS,
        'pub_date': ['exact', 'lt', 'lte', 'gte', 'gt'],
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:59:38.187

在 django-tastypie 官方文档中，他们说永远不要使用授权进行生产部署，所以必须有一个 djangoauthorization 的解决方法

# java - 处理数据库时 JSP、Servlet、DAO 之间的通信

> ID：10532547
> 
> 赞同：-1
> 
> 时间：2012-05-10T10:56:25.010
> 
> 标签：java, jsp, servlets, jdbc, dao

在学习 JSP、Servlet 和 DAO 的过程中，我学习了**[本](http://www.javasqlsecurity.com/2010/11/servlet-jdbc-dao-tutorial "教程")**教程，并希望了解一些关于使用 JSP/Servlet 编辑 SQL Server 表的正确方法。

无论如何，我有：

*   POJO.java
*   DAO.java
*   SERVLET.java
*   页面.jsp

如何实现另一个显示数据行的 JSP 页面？是否可以制作一个 JSP 页面，该页面会调用 DAO/Servlet 进行数据提取，然后在其自身（JSP）上显示数据？

打开网站时，我正在调用 Servlet，过程如下：`Servlet -> DAO -> JSP`. 我是否需要另一个 Servlet+JSP 文件，或者我可以只添加将使用当前 Servlet 来填充页面的 JSP 文件吗？

我的问题可能应该交给本教程的作者，但我希望在这里能从不同的角度提出一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:32:54.760

如果我正确地理解了您想要什么，那么您几乎已经拥有了做您想做的事情所需的一切。DAO 有一个名为 list() 的方法，它将查询数据库并返回一个员工对象的数组列表，这样你就很好了。但是，需要更改 servlet 和 jsp 页面才能使其工作，但将相关代码添加到 servlet 以使用 DAO 来获取员工列表。在 try 块开始之前添加

```
ArrayList<employee> employeeList = null; 
```

将此代码添加到 servlet 的 process() 方法中的现有代码中。

```
else if (StringUtils.equals(actionContext, "list")) {
    employeeList = dao.list();
    request.setAttribute("employeeList", employeeList);
  } 
```

必须更改 jsp 上的 javascript 以促进这一点，因为 javascript 正在驱动传递给 servlet 的内容，并且您必须向 jsp 添加一个按钮，该按钮将调用与此类似的 javascript 函数。

```
<input type='button' value='List Employees' onclick="submitForm('list')" /> 
```

这应该会为您指明正确的方向，并允许您在稍作修改的情况下仍然使用教程中的代码。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:14:05.100

如果我正确理解了您的问题，我可以要求您执行以下操作：
1\. 将您的数据附加到请求（使用 request.setAttribute(Name,Object)）；
2.使用jsp:import连接下一个JSP页面；
3\. 在这些 servlet 中，通过 request.getAttribute(Name) 提取您的数据，将其转换为您需要并使用的类型。

但是，我不确定这是否足够正确-据我所知，您实际上不会复制您的 var，因此这不会花费太多额外的时间或内存，但是我不确定，如果这是解决此问题的最“适当”方法...

# ios - 为 CLLocationManager 创建插件

> ID：10532549
> 
> 赞同：1
> 
> 时间：2012-05-10T10:56:29.827
> 
> 标签：ios, plugins, unity3d, cllocationmanager

我正在为 unity3D 创建一个 iOS 插件。下面是代码。当使用 EXC_BAD_EXCESS 调用 [regionMonitor startMonitor] 函数时，它是如何爆炸的。根据互联网帖子，这似乎是一个内存管理错误。谁能看到这里有什么问题。谢谢。

“区域监控插件.h”

```
 #import <Foundation/Foundation.h>
 #import <CoreLocation/CoreLocation.h>

@interface RegionMonitoringPlugin : NSObject <CLLocationManagerDelegate>
{
    CLLocationManager *locationManager; 
}

-(void)leavingHomeNotify;
-(void)startMonitor:(float)latitude longitude:(float)longitude radius:(float)raduis;

@end 
```

“区域监控插件.mm”

```
#import "RegionMonitoringPlugin.h"

@implementation RegionMonitoringPlugin

- (id) init
{
    if (self = [super init])
   {
      locationManager = [[[CLLocationManager alloc] init] autorelease];
      locationManager.delegate = self;
      [locationManager setDistanceFilter:kCLDistanceFilterNone];
      [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
   }
return self;
}

-(void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region
{
    [self leavingHomeNotify];
}

-(void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region
{
    [self leavingHomeNotify];
}

 - (void)locationManager:(CLLocationManager *)manager monitoringDidFailForRegion:(CLRegion *)regionwithError:(NSError *)error
{
    NSLog(@"Location error %@, %@", error, @"Fill in the reason here");
}

-(void)leavingHomeNotify
{
UILocalNotification *note = [[UILocalNotification alloc] init];
note.alertBody= @"Region Left";
[[UIApplication sharedApplication] presentLocalNotificationNow:note];
[note release];
 }

 -(void)startMonitor:(float)latitude longitude:(float)longitude radius:(float)radius
 {
  CLLocationCoordinate2D home;
  home.latitude = latitude;
  home.longitude = longitude;
  CLRegion* region = [[CLRegion alloc] initCircularRegionWithCenter:home radius:radius identifier:@"home"];
  [locationManager startMonitoringForRegion:region desiredAccuracy:kCLLocationAccuracyBest];
  [region release];    
 }

@end

extern "C" {

    static RegionMonitoringPlugin *regionMonitor;

    // Unity callable function to start region monitoring
    BOOL _startRegionMonitoring(float m_latitude,float m_longitude, float m_radius)
    {
        if (![CLLocationManager regionMonitoringAvailable] || ![CLLocationManager regionMonitoringEnabled] )
            return NO;
        if (regionMonitor == nil){
            regionMonitor = [[[RegionMonitoringPlugin alloc]init ] autorelease];
        }
        [regionMonitor startMonitor:m_latitude longitude:m_longitude radius:m_radius];
        return YES;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:12:34.097

如果我没看错，你不应该也不`autorelease` `locationManager`应该`regionMonitor`。

添加一个`dealloc`方法，`release` `locationManager`而不是。停止位置监控后，`regionMonitor`应该会释放 。

# javascript - 使用 javascript 更改文本

> ID：10532552
> 
> 赞同：0
> 
> 时间：2012-05-10T10:56:45.370
> 
> 标签：javascript, dom

我正在尝试编写一个简单的脚本。

这是想法：

我有一个 div 元素并在 div 中动态创建了段落元素。段落元素包含一些文本。我在页面上也有一个链接。单击链接时，我希望将文本更改为其他文本（预定义）。我有 2 个功能：一个用于创建段落元素并将其附加到 div 的功能。第二个功能是更改文本。我相信这个问题与将变量从一个函数传递到另一个函数有关

这是HTML：

```
<a href='' onclick='changeText();return false;'>Change Text</a>

    <div id='box'></div> 
```

这是JS代码：

```
var x = document.getElementById('box');

        window.onload = function createEl(){

            var p = document.getElementsByTagName('div')[0];
            var el = document.createElement('p');

                var text = "Hello";
                p.appendChild(el);
                var res = document.createTextNode(text);
                el.appendChild(res);
}

function changeText(){

    text.innerHTML = 'other text';

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:35:38.420

你猜对了。但是，我没有修复脚本中的错误（因为您犯了几个初学者错误），而是稍微重写了它并解释了每件事的作用。这是您的脚本应该可以工作的版本：

```
// we define these variables outside of any functions
// this means they're global and any function can get
// access to them.
var box_div, el;

window.onload = function createEl() {
    // get references to div element
    box_div = document.getElementById('box');

    // create a new <p> element and store it in 'el'
    el = document.createElement('p');

    // add text to the new <p> element
    el.appendChild(document.createTextNode("Hello"));

    // append the new <p> element to the div
    box_div.appendChild(el);
}

function changeText() {
    // since we have a reference to the <p> element
    // already, we can just do this:
    el.innerHTML = 'other text';
}​ 
```

# java - 重载继承类型的参数

> ID：10532554
> 
> 赞同：2
> 
> 时间：2012-05-10T10:56:49.373
> 
> 标签：java, inheritance, overloading

好吧，我只是想确认一些事情。

我正在为 java 的 Properties 类创建一个包装类，我遇到了一个小问题。

如果我有

```
public static void set(String key, Object value) { _p.set(key, value.toString()); } 
```

和

```
public static void set(String key, SomeClass value) { _p.set(key, value.SomeMethod().toString()); } 
```

仅`Object`当其他重载都不够时才调用重载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T11:09:33.047

这是一种非常危险的使用模式，实际上在 Effective Java 中明确建议不要使用。问题是方法签名解析是在编译时静态发生的，因此它不依赖于运行时参数的实际类型，只依赖于它们声明的类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T11:01:33.180

Java 将选择最具体的匹配，在您的情况下，布尔值将使用自动装箱 boolean <-> Boolean 自动转换。如果您使用任何其他类型（如 String），则将使用 Object 变体。

[您在Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf)中找到的详细信息 请参阅 8.4.9 重载

添加以回应评论：

您可以使用以下代码轻松测试行为：

```
class A {
    public void print(Object o) {
        System.out.println("A.print " + o);
    }

    public static void main(String[] args) {
        B b = new B();
        A a = new A();
        b.print("test b");
        a.print("test a");
        ((A) b).print("test a or b");
    }
}

class B extends A {
    public void print(Object o) {
        System.out.println("B.print " + o);
    }
} 
```

印刷：

```
B.print test b
A.print test a
B.print test a or b 
```

我希望现在更清楚会发生什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T11:12:47.373

这取决于您传递给此方法*的引用类型。*例如

```
Objeyt myObject = Boolean.TRUE;
YourClass.set("foo", myObject); 
```

不会调用参数列表中带有布尔值的方法*。*它将选择`Object`版本。

例如，请参阅`java.util.TreeSet(Collection c)`jdk 中的构造函数。那里也发生了类似的事情（它检查集合是否实际上是 a `SortedSet`，但有*一个*构造函数用于`SortedSet`）。

尝试

```
public class A {

    public void method(String str) {
        System.out.println("foo");
    }

    public void method(Object obj) {
        System.out.println("bar");
    }

    public static void main(String[] args) {
        A a = new A();
        Object obj = "A String";
        a.method(obj);
    }

} 
```

这打印*bar*。奇怪但真实:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-11T00:31:38.967

发布以下示例：

```
public class Inherit {
  public static void main(String[] args) {
    System.out.println("Hello, Inheritance!");

    Parent parent = new Parent();
    Parent childp = new Child();
    Child childc = new Child();

    System.out.println("===============================");
    parent.print(parent);
    parent.print(childp);
    parent.print(childc);

    System.out.println("===============================");
    childp.print(parent);
    childp.print(childp);
    childp.print(childc);

    System.out.println("===============================");
    childc.print(parent);
    childc.print(childp);
    childc.print(childc);

  }

}

class Parent {
    public void print(Parent x) {
       System.out.println("Parent.print(Parent)");
    }
}

class Child extends Parent {

    public void print(Child x) {
       System.out.println("Child.print(Child)");
    }

    @Override
    public void print(Parent x) {
       System.out.println("Child.print(Parent)");
    }
} 
```

和输出

```
Hello, Inheritance!
===============================
Parent.print(Parent)
Parent.print(Parent)
Parent.print(Parent)
===============================
Child.print(Parent)
Child.print(Parent)
Child.print(Parent)
===============================
Child.print(Parent)
Child.print(Parent)
Child.print(Child) 
```

# javascript - 绘制 DOM “伪”行

> ID：10532558
> 
> 赞同：1
> 
> 时间：2012-05-10T10:56:55.943
> 
> 标签：javascript, jquery, html, css, tooltip

我正在创建一个小“差异-/偏移”显示，我想在文本中的某些位置绘制某种“线”，以可视化“差异”发生的位置。基本上我想从中得到：

![在此处输入图像描述](../Images/8eb6f2c3305f8b6cef899f46451cad14.png)

对此或类似的东西：

![在此处输入图像描述](../Images/9a71dc3d76449a6b6d96aa6ac2e90e7f.png)

我知道画布元素，我可以用它画线，但我怎么能把这样的图像放在正确的地方呢？

对于这样的方法，是否有“简单”的 CSS 解决方案？

有什么我可以遵循的最佳实践吗？例如，任何 ToolTip 插件/脚本都必须使用类似的东西来指向某个地方。

我很感谢您对此提供任何帮助提示。我的 jsfiddle 的原始链接：http: [//jsfiddle.net/bKng6/](http://jsfiddle.net/bKng6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:13:53.893

在您想要标记的位置，将线的右侧包裹在一个跨度中。使用border-bottom 和border-left 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T20:49:14.710

我不确定您的应用程序应该做的预期行为是什么（谈论与最终用户的交互）。您没有提到解决方案将如何跨浏览器。无论如何，如果没有一些 JavaScript 片段，我认为纯 CSS（也是 CSS3）无法解决它。所以，我想补充[一下 tucuxi](https://stackoverflow.com/questions/10532558/draw-dom-pseudo-lines/12318871#12318871 "图库西")和[FelipeAls 的建议](https://stackoverflow.com/questions/10532558/draw-dom-pseudo-lines/12325531#12325531)。

基本上，关于线路，在其开发过程中需要牢记以下几点：

*   有很多解决方案可以划清界限。如前所述 Canvas 它可以是一种选择，但我确信它不是更简单的选择。

*   [tucuxi](http://jsfiddle.net/eJQdx/2/)建议的工作示例是通过 CSS annitations 完成的，这是一个不错的选择，比 canvas 更简单，并且可以改进以完成[FelipeAls](https://stackoverflow.com/questions/10532558/draw-dom-pseudo-lines/12325531#12325531)提出的相同设计。

*   如果您与最终用户的预期视觉交互接近 FelipeAls 的建议，那么默认情况下边框宽度为 2px 的 div 加上右侧和底部边框宽度都设置为 0 将解决您的线条疑问。我在[这里](http://jsfiddle.net/miere/UxNhP/)制作了工作样本。在建议的示例中，我使用 DOM 相对位置来测量正确的行位置。尽管我是使用 jQuery 完成的，但您始终可以在纯 JS 或其他基于 DOM 的库（如 Mootools）中执行此操作。

我真的希望它可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T21:17:56.060

通过结合：

*   注释的绝对定位（放置在 HTML 代码中靠近要添加或删除的文本，因此相对于它放置）
*   “箭头”由 2 个伪边框组成`:after`
*   `:before`在 CSS 中使用伪和生成的内容“-”添加或删除文本的视觉提示
*   *屏幕阅读器用户的视觉隐藏*文本，他们不知道*添加*或*删除*了什么，因为信息主要通过使用颜色和 CSS 中生成的内容来传达（只有 VoiceOver 会读取它，在这种情况下我什至不确定，因为屏幕阅读器倾向于忽略单个字符，因为它们经常被滥用为在应该使用 HTML 列表项的纯文本中制作列表的项目符号）

有可能产生纯 HTML/CSS 的结果。它会很容易中断（如果每行添加一个单词，右侧的注释将在彼此的顶部......）但是有 JS 和`:hover`事件（加上`:focus`和`tabindex`有视力的键盘用户，不要忘记触摸事件！）有可能避免这种情况。
它仍然支持高达 200% 的缩放文本（Firefox 中“仅缩放文本”的第 6 级）；问题在于修改的数量以及它们在文本中的接近程度，正确和绝对定位的评论长度。

==>**[小提琴中的 DEMO](http://jsfiddle.net/PhilippeVay/bKng6/5/)**

* * *

![纯 HTML/CSS 样式的 diff 快照](../Images/0f5559197dedbd6028eba1d66deb5ff0.png)

* * *

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T11:11:29.917

您基本上可以通过将跨度附加到容器
[DEMO](http://jsfiddle.net/geCTY/2/)
来绘制任何您想要的东西， 选择一种颜色并像在 Paint 上一样用鼠标绘制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T11:20:48.037

我认为您最好使用工具提示。我能想到的所有使用 CSS 的方法对我来说似乎都是骇人听闻的。

看看这个，例如：http: [//jquerytools.org/demos/tooltip/index.html](http://jquerytools.org/demos/tooltip/index.html)

我纠正自己：也许你可以通过使用 ::before 创建一个元素来获得你想要的东西。我不确定这是否是更好的选择，取决于您的需求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T13:15:48.517

你可以通过 JavaScript 找到偏移量和尺寸，使用 jQuery 的[offset](http://api.jquery.com/category/offset/) () 和[width()/height()](http://api.jquery.com/category/dimensions/)调用。一旦有了源和目标框，就可以在它们之间画线了。您可以使用普通的 HTML+CSS，通过创建非常细的彩色 div 并根据需要旋转它们（如果您使用正交线，就像您在图片中所做的那样，则不需要旋转）。

给定一个 jQuery 元素`e`，您可以使用以下方法获取其边界框（左、上、宽和高）：

```
function box(e) {
    var b = e.offset();
    b.width = e.width();
    b.height = e.height();
    return b;
} 
```

根据您的原始小提琴和@Mageek 的评论，请参阅此[工作示例。](http://jsfiddle.net/eJQdx/2/)

# c# - 在给定 LocationCollection 的情况下找到圆的中心

> ID：10532561
> 
> 赞同：0
> 
> 时间：2012-05-10T10:57:04.700
> 
> 标签：c#, silverlight, math

我有一堆经纬度的 LocationCollection，我需要获取圆心的纬度/经度。如何计算圆的中心坐标？

编辑：LocationCollection 中的纬度/经度构成了整个圆的圆周。对困惑感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:51:43.280

如果您的收藏中有 3 个位置，并且位置圈的半径不是太大（小于 50 公里左右），那么使用计算 a `circle from 3 points`（Google that）并假装的公式不会出错（大约）球形地球上的纬度/经度坐标是笛卡尔平面上的 y/x 坐标。

如果你有 3 个以上的位置，那么你有太多的圆 - 问题不在于你不能从（比如说）8 个位置计算圆，而是你可以计算`8-choose-3==56`圆并且它们不太可能重合。在这种情况下，您可以进行某种平均以找出一个圆圈来将它们全部绑定。

随着您正在寻找的圆的半径变大（我在这里故意模糊），那么与地球表面的平面逼近变得更糟，并且通过平面几何逼近椭圆几何变得越来越不充分。例如，在球体的表面上，任何 2 个点都定义了一个圆（穿过这两个点的大圆），除非它们是对映的，在这种情况下它们定义了无限个圆。现在你需要变得更聪明...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:23:06.383

你指的是哪个圈子？请记住，纬度是一个圆圈，经度是另一个圆圈，所以我想您希望坐标位于球体的中心。我可以尝试向您解释解决方案，但[这个答案](https://stackoverflow.com/questions/8900242/how-to-calculate-points-on-a-circle-on-the-globe-centred-on-gps-coordinates)足以让您入门。

# tridion - Tridion 组件链接在动态组件演示中未解析

> ID：10532565
> 
> 赞同：21
> 
> 时间：2012-05-10T10:57:33.510
> 
> 标签：tridion, tridion2009, tridion-content-delivery

我目前正在 Tridion 2009 SP1 中实现功能，用户可以使用过滤器来查询代理以查找匹配标准，然后将组件演示文稿返回到页面。返回的每个项目都包含一个组件链接。

最初动态 CP 作为 HTML 片段存储在代理数据库中，但发现当以这种方式存储 CP 时，Tridion 会从内容中剥离组件链接并在 HTML 中留下空白区域。

然后我切换了设置，以便动态 CP 现在作为 ascx 控件存储在文件存储中。使用此设置时，将`<tridion:ComponentLink ... />`成功存储在 ascx 文件中。

但是，当我将结果呈现到屏幕上时，组件链接没有被解析，我只剩下`<tridion:ComponentLink ... />`我的结果源。

目前，我正在使用该`GetComponentPresentation`方法返回 CP 内容，然后将其添加到列表中，然后再绑定到中继器进行显示。

总结代码如下：

```
ComponentPresentationFactory CPFactory = new ComponentPresentationFactory();
List<string> componentPresentations = new List<string>();

for (int i = 0; i < tbl.Rows.Count; i++)
{
    ComponentPresentation cp = CPFactory.GetComponentPresentation(
                                             tbl.Rows[i][0].ToString(), 
                                             strComponentTemplate.ToString());

    if (cp != null)
    {
        componentPresentations.Add(cp.Content);
    }
} 
```

此列表以通常的方式绑定到转发器：

```
rptOffer.DataSource = componentPresentations;
rptOffer.DataBind(); 
```

有谁知道我如何强制解决组件链接以及为什么该`GetComponentPresentation`功能不为我执行此操作？

有什么我应该做的不同的事情，或者这在我实现这个的方式上是不可能的吗？

我已确认`tridion`tagprefix 已在 web.config 中正确注册。

我对 Tridion 还很陌生，因此非常感谢任何帮助！

**更新**

我试图实施 Will 的建议，因为它似乎是最适合我的方案的解决方案，但是当我尝试将 Will 的建议与下面的代码一起使用时，我收到了一个（相当平淡的）错误：

```
ComponentPresentationAssembler cpa = new ComponentPresentationAssembler("tcm:35-62652-64");
string content = cpa.GetContent(tbl.Rows[i][0].ToString(), strComponentTemplate.ToString()); 
```

实际上有 2 个错误（看似）随机发生，但总是在`cpa.GetContent(...)`调用时发生。错误是：

```
Exception occurred during configuration callback
OR
com.tridion.dcp.ComponentPresentationFactory 
```

我似乎无法弄清楚为什么在我运行代码的时间之间错误会发生变化。即使没有更改代码，错误也会发生变化。

有人知道我在这里想念什么吗？我认为这将是与代理存储等的连接问题，但后来我记得当我使用`ComponentPresentationFactory`该类时该部分正在工作。

如果有帮助，作为 ascx 存储在文件存储中的 DCP 包含以下 HTML：

```
<div class="content-list-item offer redesign noImage">
<h2><span>Mike Offer 01/06 - 10/06 &amp; 20/06 - 10/07</span> Exp May 20th</h2>
<div class="content-list-item-text">
    <p>Body Text</p> 
    <div class="input-btn burgundy">
        <tridion:ComponentLink runat="server" PageURI="tcm:0-0-0" ComponentURI="tcm:35-31685" TemplateURI="tcm:0-0-0" AddAnchor="false" LinkText="Button Text&lt;span class=&#34;rm&#34;&gt;: Button Text&lt;/span&gt;" LinkAttributes=" alt=&#34;Button Text&#34; target=&#34;_self&#34; " TextOnFail="true"/>    
    </div>
        <p>Sub Title</p>
</div>
<div class="offers-list">        
    <ul>
        <li>Offer ends: 20 May 2012</li>
        <li>Offer available at all hotels</li>
    </ul>
</div>                          
<div class="back-to-top">
    <a href="#content">Back to top</a>
</div> 
```

**更新 2**

感谢 Ryan，我发现我的 DCP (ASCX) 文件没有在 wwwroot 文件夹内的应用程序文件夹中发布，这解决了将`<tridion:ComponentLink ... />`标签直接输出到源的问题。它现在正在呈现，但链接仍未解决。`<a ... />`标签没有被输出。这就是汇编程序希望进入的地方——一旦我能让它工作。

我已经实现了更多的日志记录和检查，并获得了有关错误的更多信息，这表明我可能缺少 jar 文件或版本不正确：

```
Exception Details: Java.Lang.ClassNotFoundException: com.tridion.dcp.ComponentPresentationFactory 
```

有趣的是，当我使用`ComponentPresentationFactory`该类时，它可以工作（不解析内部链接），但是一旦我使用汇编程序，它就会抛出上述错误。

我还尝试按照 Alvin 的建议将 Page 添加到构造函数，但输出是相同的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-10T12:35:03.830

为了执行 DCP，而不仅仅是获取发布的内容，您需要使用`ComponentPresentationAssembler`类，而不是`ComponentPresentationFactory`类。

下面是一个简单的例子：

```
ComponentPresentationAssembler cpa = 
   new ComponentPresentationAssembler("tcm:69-6212-64",this.Page);
Response.Write(cpa.GetContent("tcm:69-2882", "tcm:69-6339-32")); 
```

请注意，如果您要发布很多（即数百个）组件演示文稿（并经常发布它们），使用 ascx 不是一个好主意 - 您可能会遇到一些性能问题，因为 ASP.NET 批量重新编译包含它们的文件夹，或触发应用程序重新启动。

将它们作为 (X)HTML 片段发布到数据库并按照 Mark 提到的那样对链接进行后期处理会更安全。

正如 Frank 在 2011 SP1 中提到的，您可以使用 REL 为您进行此后期处理。有关更多信息，请参阅[本文](http://www.tridiondeveloper.com/what-the-rel-a-simple-and-very-practical-use-of-rel)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-11T17:47:32.187

如前所述，为了解决您的问题，您需要使用`ComponentPresentationAssembler`类，而不是`ComponentPresentationFactory`类，但您需要确保使用命名空间`ComponentPresentationAssembler`内的类`Tridion.ContentDelivery.WAI`：

```
Tridion.ContentDelivery.WAI.ComponentPresentationAssembler presentationAssembler = new Tridion.ContentDelivery.WAI.ComponentPresentationAssembler("tcm:5-44410-64",this.Page);
Response.Write(presentationAssembler.GetContent("tcm:5-62700", "tcm:5-62627-32")); 
```

您还需要确保：

*   您的 ASCX 文件已发布到文件系统这在`<Bindings>`部分内的 cd_broker_conf.xml 文件中设置，例如`<Binding Name="ASPComponentPresentation" Class="com.tridion.broker.componentpresentations.FSASCXComponentPresentationHome"/>`

*   您的 ASCX 文件在您的 .Net Web 应用程序中发布。这是在部分内的 cd_broker_conf.xml 文件中设置的，`<Publications>`例如

    ```
    <Publication Id="5" DocumentRoot="C:/Inetpub/wwwroot/website1" DataRoot="C:/Inetpub/wwwroot/website1/dcp">
        <Dcp>
            <Asp Location="C:/Inetpub/wwwroot/website1/dcp"/>
        </Dcp>
    </Publication> 
    ```

请注意，您在上面看到的位置区分大小写

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-10T12:19:16.037

Mark 的回答已经涵盖了您的 Tridion 版本中最重要的部分：**您必须将 ASCX 文件发布到磁盘，以便`tridion:CompontentLink`ASP.NET 执行控件**。

Tridion 2011 引入了 REL 作为替代解决方案。使用 REL 时，您只需再次发布 HTML 片段，`tcdl:ComponentLink`并将按原样存储到数据库中（因此`tridion:ComponentLink`在部署时不会转换为）。然后，当您检索内容（通过`ComponentPresentationTransformer`或通过新的 Content Delivery OData Web 服务）时，`tcdl:ComponentLink`（和其他`tcdl:*`标签）将被解析，您将获得所需的结果。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-05-10T11:12:27.950

您正在将动态组件表示的内容作为字符串加载，而不是像用户控件那样执行字符串。

要解决您的问题，您可以使用 2 个解决方案中的 1 个：

1) 使用 Regex on`cp.Content`通过 Tridion API 处理链接。

2）将您的动态内容作为用户控件发布到文件系统并将此控件加载到您的页面/用户控件上，从而执行它

```
using (var cpf = new ComponentPresentationFactory(publicationId))
{
    var cp = cpf.GetComponentPresentation(componentId, componentTemplateId);
    fileLocation = cp.FileLocation;
}

if (!String.IsNullOrEmpty(fileLocation))
{
    var crtl = this.LoadControl(MapPathReverse(fileLocation));
    phldControls.Controls.Add(crtl);
} 
```

# types - fortran 类型*N 表示法

> ID：10532567
> 
> 赞同：1
> 
> 时间：2012-05-10T10:57:43.823
> 
> 标签：types, fortran, portability

我读过很多次，使用`type*N`符号（`real*8`、complex*16 等）可能会导致可移植性问题。这里有没有人遇到过这些问题，然后可以通过使用`kind`s 来解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T11:28:22.307

我不能说我在这个特定问题上遇到了问题。据我所知，所有当前活跃的 Fortran 编译器都理解这种定义种类的非标准方式。

但是，多年来，我已经解决了非标准的可移植性问题。这些天来，我从不（嗯，很少）使用非标准功能，我当然不会以这种方式声明种类。我通常只会使用非标准功能，如果它们具有令人信服的优势，我在这里看不到这样的优势。唯一可能引人注目的优势是诸如提高执行速度、做标准 Fortran 中困难（或不可能）的事情、真正扩展语言功能等问题。程序员的便利性并不是一个引人注目的优势。

# php - 代码不适用于 Javascript 过滤器

> ID：10532572
> 
> 赞同：0
> 
> 时间：2012-05-10T10:57:54.537
> 
> 标签：php, javascript, html, filter

谁能告诉我我的代码有什么问题。我正在尝试创建一个表过滤器，这是我的 javascript 代码：

```
 function  searchRegExFieldKeyUp() {
  var q = this.value
  var v = q.value.toLowerCase();
  var rows = document.getElementsByTagName("tr");
  var on = 0;
 for ( var i = 0; i < rows.length; i++ ) {
var fullname = rows[i].getElementsByTagName("td");
fullname = fullname[0].innerHTML.toLowerCase();
if ( fullname ) {
    if ( v.length == 0 || (v.length < 3 && fullname.indexOf(v) == 0) || (v.length >= 3 && fullname.indexOf(v) > -1 ) ) {
    rows[i].style.display = "";
    on++;
  } else {
    rows[i].style.display = "none";
  }
}
}
} 
```

这是我的html：

```
function dynamic_checkbox_table(){
// connect to the database
$con = mysqli_connect(DB_HOST,DB_SELECT,DB_PASSWORDSELECT,DB_PHYSBINDER) or die ('DB-connection failed...');

// query the database
$sql = "SELECT * FROM Models";
$result = mysqli_query($con,$sql) or die(mysqli_error() . "<br/>$sql");
// run through the results from the database, generating the checkboxes
?>
<Table id="ModelFilter">
<?php
while ($row = mysqli_fetch_assoc($result)) {
    ?>
       <tr><td><li> <?php echo $row['Model'];?>
       <br><input id="<?php echo $row['ModelID'] ?>" name="<?php echo $row['Model']?>" type="checkbox" /></li></td></tr></br> 
```

"; 动态复选框表(); ?>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:08:09.100

在第一行你写了

```
var q = this.value
  var v = q.value.toLowerCase(); 
```

整体的意思

```
var v=this.value.value.toLowercase(); 
```

哪个是错的

# google-plus - 如何在 Twitter 等弹出窗口中获得 Google plus 分享？

> ID：10532574
> 
> 赞同：6
> 
> 时间：2012-05-10T10:57:56.533
> 
> 标签：google-plus, google-plus-one

Google+ 图标会自动在 HOVER 上共享页面，并且不需要像其他图标那样点击。有什么办法可以解决这个问题，需要像其他人一样点击 [fb,twitter] 并像 Twitter 共享图标一样加载弹出窗口？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T14:56:53.987

JavaScript`window.open`方法将打开一个新窗口。您可以将此技术与[共享链接](https://developers.google.com/+/plugins/share/#sharelink)相结合来实现您的目标。[这是从官方文档](https://developers.google.com/+/plugins/share/#sharelink)中提取的这种技术的示例。只需将您的目标网址替换为`http://example.com`.

```
<a href="https://plus.google.com/share?url=http://example.com"
  onclick="javascript:window.open('http://example.com','',
  'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');
  return false;">
  <img src="https://www.gstatic.com/images/icons/gplus-64.png" 
    alt="Share on Google+"/>
</a> 
```

# math - 找到穿过身体（2D）的轨迹（2点）的方向

> ID：10532575
> 
> 赞同：3
> 
> 时间：2012-05-10T10:57:59.170
> 
> 标签：math, trigonometry

我正在寻找能够给我指明穿过身体的方向的数学。我没有想法，我知道它一定是三角学的非常简单的应用，但我尝试了各种没有成功的事情。不知道什么是最好的方法。

这里有详细信息：

![在此处输入图像描述](../Images/cbefe112166c5b35013d9fe299ec9bcf.png)

所以我有一个以给定角度旋转的身体，我需要确定我是从它的后面还是从它的前面进入身体。此用例中的轨迹由鼠标位置（移动时）定义，因此我可以从前一个点和当前点画一条线。

希望有人可以帮助我:) & 非常感谢提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:08:30.943

这可以使用一些[向量运算](http://en.wikipedia.org/wiki/Vector_calculus)来解决。首先，构造一个表示运动的向量。

```
movement = currentPoint - previousPoint 
```

然后看它是否与身体的方向*对齐*（由'normal'指定，身体正面的法线向量），只需使用点积：如果`movement dot normal > 0`，运动是在正面的法线方向上，所以它从后面击中身体。否则它会从前面击中身体。

请注意，我们不会对任何向量进行归一化，当您只想知道它是从后面还是前面撞击对象时，就不需要这样做。一个不错的好处是，当您进行归一化`movement`时（我假设`normal`已经归一化）， 和 之间的点积`movement`表示`normal`入射角：`angle = arccos(movement dot normal)`

## 编辑

这种方法处理相对运动，因此您仍然需要测试与对象的交集以了解您是否完全击中它。为此，请测试线对象相交。（取决于你的对象，所以我真的不能多说。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:14:04.227

我认为[这个答案](https://stackoverflow.com/a/3842157/114519)和[提供的链接](http://www.cs.cmu.edu/~quake/robust.html)应该会有所帮助。答案本身涉及确定 2 个线段是否相交，该链接解释了如何确定一个点是在线段的左侧还是右侧。

除非我弄错了，否则第一部分会告诉您当前的轨迹是否穿过身体，第二部分会告诉您当前点是在身体“矢量”的左侧还是右侧，鉴于您的绘图应该告诉您无论您是从前面还是从末端碰撞。

# mysql - 用于存储多种语言的 MySQL 编码

> ID：10532582
> 
> 赞同：1
> 
> 时间：2012-05-10T10:58:09.613
> 
> 标签：mysql, encoding

我需要以 3 种语言将数据存储在我的 MySQL 数据库中：法语、俄语和罗马尼亚语。我应该使用什么编码？我使用了 utf8_general_ci，但我在用它编码非拉丁字母时遇到了问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T12:24:08.753

utf8_unicode_ci 是正确的选择，正如@eggyal application 所述，MySQL 应该使用 utf8 进行通信

# c# - 排除循环中的最后一个元素

> ID：10532587
> 
> 赞同：1
> 
> 时间：2012-05-10T10:58:31.940
> 
> 标签：c#, loops

我的应用程序中有一个循环。代码如下： -

```
foreach (DataRow dr in dt.Rows)
    ColorNames +=dr["ColorName"].ToString() + "\n"; 
```

但我不想`\n`在最后添加`Datarow`。有什么建议怎么做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T11:00:56.993

```
ColorNames = String.Join("\n", dt.Rows.Select(dr => dr["ColorName"].ToString())); 
```

这是更新版本（忘记了需要转换为 Enumerable ）：

```
ColorNames = String.Join("\n", dt.AsEnumerable().Select(dr => dr.Field<string>("ColorName"))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:59:29.863

Foreach 不适用于索引。

**选项 1：ForEach 循环**

使用 foreach 循环。循环到最后一个，外部循环喜欢

```
ColorNames.Substring(0, ColorNames.Length-1); 
```

**选项 2：For 循环**

使用 for 循环并检查循环内的所有索引，直到最后。添加 \n 并且在最后一个索引中不要添加 \n

```
for (int i = 0; i < dt.Rows.Count; i++)
{
   ColorNames += i < dt.Rows.Count-1 
           ? dr["ColorName"].ToString() + "\n"
           : dr["ColorName"].ToString();
} 
```

**或者**

```
for (int i = 0; i < dt.Rows.Count; i++)
   ColorNames += dr["ColorName"].ToString() + (i < dt.Rows.Count-1 ?  "\n": ""); 
```

**选项 3：LINQ**

```
ColorNames = String.Join("\n", dt.Rows.Select(dr => dr["ColorName"].ToString())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:02:56.043

```
var colorNamesList = dt.Rows
  .Cast<DataRow>()
  .Select(dr => dr["ColorName"].ToString())
  .ToArray();

var colorNames = String.Join("\n", colorNames); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T11:10:07.137

```
int count = 0;
foreach (DataRow dr in dt.Rows)
{
    count++;
    ColorNames +=dr["ColorName"].ToString();
    if (count < dt.Rows.Count)
        ColorNames += "\n";
} 
```

# javascript - Chrome/FF 与 IE8 中的搜索框对齐方式

> ID：10532588
> 
> 赞同：0
> 
> 时间：2012-05-10T10:58:34.163
> 
> 标签：javascript, css

我有一个搜索框，在一个页面上。在 Chrome/Safari/FF 等上，该框正确定位在主 div 的右侧。有问题的页面在这里：

[http://property.begbies-traynor.com](http://property.begbies-traynor.com)

有问题的框是主搜索上的搜索框，就在横幅下方。

我尝试了各种浮动技术，清除 div，但由于某种原因，我尝试的一切都没有区别，在 IE8 上它只是位于“类型”框的顶部。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:22:46.360

`float:right`向搜索按钮添加内联样式。

它从你的班级得到了一条`float:left`规则`.left`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:23:22.867

正如@Rick Donohoe 已经提到的，没有链接很难看到。

但我想到的是，拥有容器（如`<div id="header"></div>`）`position: relative`然后拥有搜索容器`position: absolute`......就像这样：

```
#header {
    position: relative;
}

#search {
    position: absolute;
    right: 0; /* push search onto the right */
    top: 0;
} 
```

为避免其他浏览器读取该特定 css 代码，您可以对 IE 使用条件注释：

```
<!--[if IE 8]>
<link rel="stylesheet" type="text/css" href="ie8.css" />
<![endif]--> 
```

或者也许这个会起作用：

```
#search {
   float: right;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:26:17.633

它在 IE 9 中也不正确。

要`<div align="right">`添加一些类，请编写以下内容并删除 align 属性：

```
.someclass {
   float:right;
   overflow:hidden
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T11:16:15.653

没有链接很难看到，但你应该在谷歌上看看 IE 如何以不同于其他浏览器的方式处理盒子模型。我猜盒子的宽度可能不同，这已经把它推出了容器。

如果没有进一步的代码伙伴，再次无能为力。

希望有帮助

# javascript - 检查复选框是否被选中

> ID：10532594
> 
> 赞同：1
> 
> 时间：2012-05-10T10:59:11.353
> 
> 标签：javascript, jquery, html, checkbox

HTML 代码：

```
<div class="checkbox" style=" float:left "></div>
<input type="checkbox" class="realcheckbox" id="financing"  /> 
```

jQuery代码：

```
$(".checkbox").click(function() { 
    var xchecked = $(this).siblings(".realcheckbox").attr("checked");
    if (xchecked == false) {
        $(this).css("background-image","url('checkboxselected.png')");
        $(this).next(".realcheckbox").attr("checked",true);
    }
    else {
        $(this).css("background-image","url('checkbox.png')");
        $(this).next(".realcheckbox").attr("checked",false);
    }
}); 
```

点击假的复选框不是检查真实的，但是如果选中了真实的复选框，则单击假的复选框就可以了，这意味着真实的未选中，第一个有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T11:00:48.623

**演示** [http://jsfiddle.net/ktwDK/3/](http://jsfiddle.net/ktwDK/3/)

好读：[http ://api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)

`.is(":checked")`将为您解决问题。

**jQuery代码**

```
$(".realcheckbox").click(function(){
    alert($(this).is(":checked"));
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T11:00:56.907

用于`is(":checked")`测试：

```
var xchecked = $(this).siblings(".realcheckbox").is(":checked"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:01:30.837

也许您需要为此检查伪：

```
var xchecked = $(this).siblings(".realcheckbox").is(":checked"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T11:06:43.757

```
$('.checkBox').click(function() {
   var thisCheck = $(this);
 if (thisCheck.is(':checked')) {
//do your stuff
  }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T11:55:34.153

```
$(".checkbox").click(function() { 
    var xchecked = $(this).find(".realcheckbox").prop("checked");
    if (xchecked == false) {
        $(this).css("background-image","url('checkboxselected.png')");
        $(this).next(".realcheckbox").attr("checked",true);
    }
    else {
        $(this).css("background-image","url('checkbox.png')");
        $(this).next(".realcheckbox").attr("checked",false);
    }
}); 
```

# design-patterns - 在决定产品开发的软件设计/架构时需要帮助吗？

> ID：10532597
> 
> 赞同：3
> 
> 时间：2012-05-10T10:59:24.150
> 
> 标签：design-patterns, architecture, software-design

关于基于在线 Web 的软件应用程序，我们在决定产品开发方法方面面临困难。

我们正在为有可能作为 SAAS 服务提供的在线 Web 应用程序进行系统设计。我们在决定后续系统设计和实施相关决策时面临困难，也有很多成本考虑。

方法一：

我们设计和开发一切以考虑非常基本的要求，即满足基本要求并解决手头的给定问题，然后启动它。一个足够好的系统来支持几百个用户，而不需要过多地关注微观优化一切。

我们通过添加新模块在客户请求时添加新功能。

因此，简单的设计、单一的开发、必要时通过升级基础设施或在需要时进行优化来扩展，并且将来可能会根据需要用全新的系统替换系统。

我们保留相同的服务器，但客户帐户有不同的数据库。同样，为访问单独数据库的每个客户端托管不同的应用程序等。当需要时，我们可以添加新服务器。虽然管理/维护和升级有点困难。

方法 B：

我们研究全部需求，可能添加的可能增加附加值的功能（尽管我们仍然不确定哪些附加功能增加了多少价值？）并设计支持大量用户的系统（具有大量硬件） 从开始。

我们推出了功能齐全的应用程序，该应用程序从一开始就进行了很好的优化。

我们将其设计为在单个数据库和应用程序托管中支持多个客户端帐户，并在云服务器/负载平衡服务器上实现它，其架构类似于成熟的 SAAS 应用程序。尽管这使得编码和维护变得非常困难。而且肯定需要更多的时间来实施。

注意，

我们已准备好功能列表、UI 和可能使用的技术设置。我想了解解决这种情况的最佳方法是什么。

正如我之前在另一个产品开发项目中看到的那样，具有所有功能的集合，完成时间太长，甚至它有一些根本没有使用的功能。此类项目的成本考虑非常高，我更愿意采用方法 A，因为它快速、简单且可预测。此外，与第二种方法相比，我很快就会收到用户反馈，这可能有助于我决定要关注哪些功能以及为什么要关注哪些功能。此外，当需要时，我们可能会重写整个应用程序，重点关注类似于方法 B 的系统。

我想了解其他公司如何处理这种情况，以及实施此类项目的最佳方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T12:14:31.917

这是经典的[大设计前期 (BDUF)](http://en.wikipedia.org/wiki/Big_Design_Up_Front)辩论的新版本：我们应该在实施之前完成和完善设计，还是应该增量设计？

我已经看到了很好的论点[pro-BDUF](http://www.joelonsoftware.com/articles/AardvarkSpec.html)和[反对-BDUF](http://www.agilemodeling.com/essays/bmuf.htm)。就个人而言，我更喜欢中间点：有必要做一些前期设计——否则你的设计会通过迭代发生根本性的变化——但这个阶段不应该花费太长时间，否则你只会有一个架构文档和无聊的程序员经过几个月的工作。

所以，我会用一些方法 B 做一些方法 A。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T13:14:47.940

这取决于。

经验法则：

*   “无”比“坏”好。
*   80% 的解决方案总比没有好。
*   前 80% 将消耗您 80% 的资源。
*   以下 20% 将消耗另外 80% 的资源。
*   如果您不以 80% 的速度发货，其他人会。
*   在达到 80% 之前，你不知道剩下的 20%。
*   环境和要求的变化比您想象的要多。即使在应用此规则之后。

不要让您的客户等待很长时间，运送损坏或无法维护的产品，从而吓跑他们。不要在基础设施上花钱 你不需要（还）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T12:57:54.000

方法 A 听起来很明智……如果您也可以采用敏捷 SCRUM，这意味着您可以在 Sprints 中与客户进行迭代工作，您将在每个 sprint 之后开发和交付产品版本和功能。客户可以看到交付的软件的较小单元……而且，客户往往会改变他们想要什么新功能的想法。

因此，您将始终有机会响应客户的需求，并且只构建客户需要的东西。

# asp.net - 在 IIS 上呈现 asp.net 控件

> ID：10532600
> 
> 赞同：0
> 
> 时间：2012-05-10T10:59:38.337
> 
> 标签：asp.net, vb.net, security, iis

我在服务器 2000 上使用 IIS 5.1。我已经为 IIS 中的自定义错误设置了 asp.net 页面，该页面指向 C:\Inetpub\wwwroot\Custom_Error\IIS_Error.aspx。

用户输入错误密码 3 次时出现自定义错误页面。

当我使用以下 URL 从我的笔记本电脑直接访问错误页面（用于测试）时，我可以看到页面文本和文本框。

//192.168.0.10/Custom_Error/IIS_Error.aspx

但是当用户输入错误密码 3 次时，系统只显示带有文本的自定义错误页面，并且不显示 asp.net 控件。

另外，有没有办法显示用户被重定向到自定义错误页面的本地路径？举个例子；我们在名为 TestWeb 的网站下有 10 个文件夹，因此当用户访问名为 webtest3 的文件夹编号 (3) 时，自定义错误页面应在页面上显示 webtest3。

我可以在 asp.net 或 asp 经典页面上执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:47:43.533

你问了两个问题。我将回答您的第二个问题，“如何获取将用户重定向到自定义错误页面的本地路径？”

这取决于您如何将用户引导至错误页面。如果您通过在 global.asax 中处理未捕获的异常将用户引导到自定义错误页面，您可以编写如下内容：

```
protected void Application_Error(object sender, EventArgs e)
{
    string url = System.Web.HttpContext.Current.Request.Url.ToString();
    Exception ex = Context.Server.GetLastError();
    // do something with url and exception data
} 
```

如果您手动将用户重定向到错误页面，例如使用`Response.Redirect`，您可以通过多种方式完成此操作。

通常，Web 浏览器会向 Web 服务器发送它们刚刚来自的页面的地址，但一些用户（和一些防火墙）会禁用此功能。当数据可用时，您通常可以通过调用`Request.ServerVariables["HTTP_REFERER"];`.

但是，如果您想确保获得数据，请考虑在将用户重定向到错误页面之前保存发生错误的页面的 URL，如下所示：

```
if (error_condition) 
{
    Session["error_url"] = System.Web.HttpContext.Current.Request.Url.ToString();
    Response.Redirect(error_page);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:47:14.447

我已通过为自定义错误创建一个简单的 html 页面并将其重定向到 asp.net 页面来解决此问题。

Asp.net 自定义错误页面不适用于 IIS。最好有一个html页面。

# .net - 静态分析防止“Collection was modified; enumeration operation may not execute”异常

> ID：10532604
> 
> 赞同：1
> 
> 时间：2012-05-10T10:59:42.487
> 
> 标签：.net, visual-studio-2010, code-analysis

我现在使用 Visual Studio 2010，它带有一个很好的代码分析工具。

有没有办法指示它定位在迭代时尝试修改集合的调用？任何其他代码分析都可以吗？

目的是防止异常，例如在运行时发生的标题中的异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:43:59.100

这通常是由线程引起的错误，没有正确锁定对线程之间共享的集合的访问。在迭代集合的代码中特别容易被忽视，因为这本身就是一个线程安全的操作。在迭代过程中添加或删除元素是导致 kaboom 的原因。是的，很难诊断，因为它不会发生在修改集合的代码上。您只有在损坏完成很久之后才会发现。

也可以在非线程代码中，但这很容易调试。

不存在可以分析代码中时序问题的静态分析器。执行时间完全是不确定的。如果他们这样做了，那么编写线程安全的代码将变得更加容易。任何解决了这个问题同时又不完全破坏效率的人都将获得诺贝尔奖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:08:56.327

可以编写一条规则来检查一种特殊情况：当集合在检索其枚举器和调用枚举器的 MoveNext() 或 Reset() 方法之间*同步修改时。*不幸的是，即使这在实践中也很困难，因为每个可枚举类型都可以不同地实现修改检测，因此检测实际修改并非易事。

基本上，除非您由于这种可解决的场景而遇到很多问题，否则这种事情并不值得。这通常不应该是这种情况，因为在标准测试期间很容易检测到。

# python - matplotlib 可以将元数据添加到保存的图形中吗？

> ID：10532614
> 
> 赞同：32
> 
> 时间：2012-05-10T11:00:27.813
> 
> 标签：python, matplotlib, metadata

我希望能够确定我使用 matplotlib 创建的图形的出处，即知道我的代码和数据的哪个版本创建了这些图形。（有关出处的更多信息，请参阅[这篇文章](http://software-carpentry.org/4_0/essays/provenance/)。）

我想最直接的方法是将代码和数据的修订号添加到已保存图形的元数据中，或者例如作为后记文件中的注释。

在 Matplotlib 中是否有任何简单的方法可以做到这一点？该`savefig`功能似乎无法做到这一点，但有人想出了一个可行的解决方案吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-11T13:53:27.397

我不知道使用的方法`matplotlib`，但是您可以使用以下方法[将元数据添加到 png 中`PIL`](http://blog.client9.com/2007/08/python-pil-and-png-metadata-take-2.html)：

```
f = "test.png"
METADATA = {"version":"1.0", "OP":"ihuston"}

# Create a sample image
import pylab as plt
import numpy as np
X = np.random.random((50,50))
plt.imshow(X)
plt.savefig(f)

# Use PIL to save some image metadata
from PIL import Image
from PIL import PngImagePlugin

im = Image.open(f)
meta = PngImagePlugin.PngInfo()

for x in METADATA:
    meta.add_text(x, METADATA[x])
im.save(f, "png", pnginfo=meta)

im2 = Image.open(f)
print im2.info 
```

这给出了：

```
{'version': '1.0', 'OP': 'ihuston'} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-04T04:55:33.007

如果你对 PDF 文件感兴趣，那么你可以看看 matplotlib 模块`matplotlib.backends.backend_pdf`。在[此链接](http://matplotlib.org/examples/pylab_examples/multipage_pdf.html)上有一个很好的用法示例，可以“浓缩”为以下内容：

```
import pylab as pl
import numpy as np
from matplotlib.backends.backend_pdf import PdfPages

pdffig = PdfPages('figure.pdf')

x=np.arange(10)

pl.plot(x)
pl.savefig(pdffig, format="pdf")

metadata = pdffig.infodict()
metadata['Title'] = 'Example'
metadata['Author'] = 'Pluto'
metadata['Subject'] = 'How to add metadata to a PDF file within matplotlib'
metadata['Keywords'] = 'PdfPages example'

pdffig.close() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-07-01T17:10:46.563

从[matplotlib 版本 2.1.0](https://matplotlib.org/3.1.0/users/prev_whats_new/whats_new_2.1.0.html#metadata-savefig-keyword-argument)开始， savefig 命令接受关键字参数`metadata`。您传入带有要保存的字符串键/值对的字典。

这仅适用`'agg'`于 PNG 文件的后端。

对于 PDF 和 PS 文件，您可以使用预定义的标签列表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-14T15:52:11.163

如果您正在生成 SVG 文件，您可以简单地将文本作为 XML 注释附加到 SVG 文件的末尾。即使您随后编辑图像，像 Inkscape 这样的编辑器似乎也会保留此文本。

这是一个示例，基于 Hooked 的回答：

```
import pylab as plt
import numpy as np

f = "figure.svg"
X = np.random.random((50,50))
plt.imshow(X)
plt.savefig(f)

open(f, 'a').write("<!-- Here is some invisible metadata. -->\n") 
```

# asp.net - VB.Net Web 方法给出 HTTP401 Not Authorized 错误

> ID：10532615
> 
> 赞同：6
> 
> 时间：2012-05-10T11:00:31.467
> 
> 标签：asp.net, vb.net, iis

我在我正在处理的 Intranet 站点的几个地方使用 Web 方法，它们工作正常，但是每次我尝试访问 Web 方法时，一个页面都会不断抛出 HTTP 401 错误。

我不知道如何解决这个问题，我已经尝试用 web 方法评论所有内容，但仍然出现 401 错误，即使是在`SELECT 1`使用分析器查看数据库时，即使是刚刚连接到数据库的基本连接也没有显示出来。

我的 web.config 对于 Intranet 中的所有页面都是相同的，与使用 web 方法的页面相比，我看不出我的 ASP.Net 页面有任何差异。

谁能告诉我为什么仅此页面而不是其他页面会发生这种情况？还有我怎样才能解决这个问题？

ASP.Net 代码（从按钮的 OnClientClick 调用）

```
 function SendEmails()
   {

      var Grid = document.getElementById("instructorGrid");
      var mailBody = document.getElementById("txtMailBody");
      var ddlDutyPeriod = document.getElementById("DDL_DutyPeriods");

         var cell = Grid.rows[i].cells;
         var HTML = cell[0].innerHTML;
         var chkBox = cell[5].innerHTML;

         PageMethods.TestMethod()
   } 
```

脚本管理器

```
 <asp:ScriptManager ID="ScriptManager1" 
                         runat="server" 
                         EnableScriptGlobalization="true"
                         EnablePageMethods="true" 
                         EnableScriptLocalization="true">
  </asp:ScriptManager> 
```

VB.Net 代码

```
 <System.Web.Services.WebMethod()>
   Public Shared Sub TestMethod()

      'Dim conn1 As New SqlConnection(ConfigurationManager.ConnectionStrings("Blueprint").ToString())

      'Dim cmd2 As New SqlCommand

      'cmd2.CommandType = CommandType.Text
      'cmd2.CommandText = "SELECT 1"

      'cmd2.Connection = conn1

      'conn1.Open()
      'cmd2.ExecuteNonQuery()
      'conn1.Close()

   End Sub 
```

提琴手结果

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd">
<HTML><HEAD><TITLE>Not Authorized</TITLE>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=us-ascii"></HEAD>
<BODY><h2>Not Authorized</h2>
<hr><p>HTTP Error 401\. The requested resource requires user authentication.</p>
</BODY></HTML> 
```

更新：

[我曾尝试在此链接http://support.microsoft.com/kb/306158](http://support.microsoft.com/kb/306158)中的一半代码中使用模拟用户，但是我不能这样做，因为该方法是一种网络方法。

我还尝试按照下面的建议在 web.config 中添加对我的登录页面的匿名访问，但这也没有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:36:34.387

在您的 web.config 文件中添加模拟标记。这应该允许在尝试访问您的网络方法时使用特定帐户进行模拟。有关方向，请参阅此支持[文章](http://support.microsoft.com/kb/306158)。

```
<system.web>

<identity impersonate="true" userName="Yang" password="bar" />

</system.web> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T21:49:11.747

我认为您正在使用 FormsAuthentication。您必须为您的登录页面提供匿名访问权限。

```
<location path="Login.aspx">
  <system.web>
    <authorization>
      <allow users="*"/>
    </authorization>
  </system.web>
</location> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T11:13:14.953

这是一个很长的镜头，但你的 Web.Config 中有这个吗？

```
<system.web.extensions>
  <scripting>
    <webServices>
      <authenticationService enabled="true" />
    </webServices>
  </scripting>
</system.web.extensions> 
```

# indexing - 可搜索的 Ehcache 索引 - 有哪些选项？

> ID：10532617
> 
> 赞同：2
> 
> 时间：2012-05-10T11:00:44.523
> 
> 标签：indexing, ehcache

Ehcache 的 2.5.x[文档](http://www.ehcache.org/documentation/apis/search#implementations)指出，它的标准实现提供了缓存搜索功能，而不依赖于索引并设法产生良好的性能（对于高达 1M 元素的缓存<1s）。实验验证了这一说法。但是，这确实会降低（通过 O(N)）更大的缓存。

该文档进一步指出，通过使用分布式缓存实现（“由 Terracotta 服务器阵列支持”），可以获得索引的好处。然而，对于超过 1M 元素的较小缓存似乎没有解决方案，这些缓存足够小，不需要分发（我们的缓存可以在 ~1Gb 缓存中容纳 1.2M 元素）。

有没有人找到一种解决方法/解决方案来为此类情况提供索引，或者这是否需要采用某种大锤的方法来分发缓存？

这个索引功能是否需要商业 Terracotta 许可证也有点不清楚（我的印象是 Terracotta 产品的部分是免费提供的，尽管显然没有支持？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:20:04.417

我认为 EhCache 索引功能与 Terracotta 无关。它是 EhCache 的核心功能。我正在使用由商业版 Terracotta 支持的 Ehcache 和 Ehcache。

当您提供 ehcache.xml 配置时，您必须指定哪些字段是可搜索的（这将在每次缓存或更新/删除缓存中的新对象时触发 Lucene 的索引活动）

这是此类配置的示例（我已根据您的要求设置了 maxBytesLocalHeap="1024m" ）：

```
<?xml version="1.0" encoding="UTF-8"?>
<ehcache maxBytesLocalHeap="1024m">
 <sizeOfPolicy maxDepth="2000" />
 <defaultCache eternal="false" timeToLiveSeconds="600"/>
 <cache name="myCacheablePOJO" eternal="true" statistics="true">
  <searchable>
   <searchAttribute name="field1" />
   <searchAttribute name="field2" />
   <searchAttribute name="field3" />
  </searchable>
 </cache>
</ehcache> 
```

当您使用基于 Terracotta 的 EhCache API 实现时，您必须在类路径中添加额外的 jar 并在配置中启用 terracotta：

```
<?xml version="1.0" encoding="UTF-8"?>
<ehcache maxBytesLocalHeap="1.3g">
 <sizeOfPolicy maxDepth="2000" />
 <defaultCache eternal="false" timeToLiveSeconds="600">
  <terracotta/>
 </defaultCache>
 <cache name="myCacheablePOJO" eternal="true" statistics="true">
  <searchable>
   <searchAttribute name="field1" />
   <searchAttribute name="field2" />
   <searchAttribute name="field3" />
   </searchable>
   <terracotta compressionEnabled="true" />
 </cache>
</ehcache> 
```

请注意，我已在缓存名称="myCacheablePOJO" 中添加了“terracotta”标签，并带有一个可选属性以启用缓存中的对象压缩（节省内存空间并降低性能成本）。

因此，换句话说，在没有 Terracotta 集群的情况下，本地 EhCache 中的 1.2M 元素应该没问题。您应该考虑的唯一问题是故障转移。你应该问自己以下问题：

*   我的系统缓存策略是什么？
*   如果 JVM 崩溃，系统能否承受丢失缓存数据的损失？
*   如果 JVM 重新启动，数据如何填充到本地缓存中？

# ruby - 安装 Rails 3.2.3 时出错（执行 gem 时 ... (Gem::DependencyError)）

> ID：10532618
> 
> 赞同：0
> 
> 时间：2012-05-10T11:00:47.633
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2

我最近安装了 ruby​​ 1.9.3 和 ruby​​gems 1.8.24。两者都安装得很好（src：[http](http://railsapps.github.com/installing-rails.html) ://railsapps.github.com/installing-rails.html ）。但是，当我继续安装 rails 3.2.3（最新的稳定版本）时，出现以下错误：

$ gem 安装导轨

错误：执行 gem 时 ... (Gem::DependencyError) 无法解析依赖项：railties 需要 thor (~> 0.14.6)、rack-ssl (~> 1.3.2)、rdoc (~> 3.4)；actionmailer 需要邮件 (~> 2.4.4); activerecord 需要 tzinfo (~> 0.3.29)；sprockets 需要远足 (~> 1.2)、倾斜 (!= 1.3.0, ~> 1.1)

谷歌搜索可能的解决方案，我试过：

$ gem install rails --include-dependencies

并得到以下错误：

INFO： `gem install -y`现在是默认设置，将被删除

信息：使用 --ignore-dependencies 仅安装您列出的 gem

获取：i18n-0.6.0.gem (100%) 获取：multi_json-1.3.4.gem (100%) 错误：执行 gem ... (Gem::RemoteFetcher::FetchError) 连接重置过多 (http: //cachefly.mirrors.rubygems.org/gems/activesupport-3.2.3.gem)

任何人都可以帮助我使用用于安装上述依赖项的命令行解决方案。任何额外的解释都会有很大帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:32:00.183

没关系。估计是网络连接有问题。我重试了命令 gem install rails --include-dependencies ，它像黄油一样安装。

# iphone - 如何只获取对象 ID，但还包括 CoreData 中的行数据？

> ID：10532626
> 
> 赞同：4
> 
> 时间：2012-05-10T11:01:17.563
> 
> 标签：iphone, objective-c, ios, core-data, nsfetchrequest

[在有关在后台工作的 CoreData Apple Docs 中](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385-SW1)，我遇到了以下建议：

> 例如，您可以将获取请求配置为仅返回对象 ID **，但还包括行数据（并更新行缓存）** ——如果您只是要将这些对象 ID 从后台线程传递到另一个线程，这将很有用.

我想知道你如何实现这个获取请求？具体如何更新行缓存。

我*认为*这就是获取 ID 的方法：

```
NSFetchRequest* request = [NSFetchRequest fetchRequestWithEntityName:@"MyItem"]; // iOS 5 method
request.returnsObjectsAsFaults = YES; 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-10T13:26:09.763

默认情况下，includesPropertyValues 为 YES，returnsObjectsAsFaults 也为 YES。

如果您只想返回对象 ID，则需要使用...

```
fetchRequest.resultType = NSManagedObjectIDResultType; 
```

但是，没有要获取的属性，并且不会填充行缓存。你只会得到一堆对象 ID。

请注意，BY DEFAULT (resultType == NSManagedObjectResultType)，因为 includesPropertyValues 和 returnObjectsAsFaults 都是 YES，所以 fetch 将返回对象作为错误（对象 ID 是可访问的），并且行缓存将被填充 - 但数据不会真正是“在内存中”，因为对象仍然是一个错误......但你仍然可以得到它的对象 ID。

然后，您需要做的就是向对象询问其 objectID。

我想，所有这一切都可以说你所要求的行为是你默认得到的。那么，您是否有问题，或者有什么原因您认为您没有得到这种行为？

**编辑**

嗯...我是说默认情况下，你得到了你想要的。如果您只是填写一个获取请求，并且不更改任何属性，returnObjectsAsFaults 为 YES - 因此返回给您的对象将是错误的。此外，includesPropertyValues 也是 YES - 因此行缓存中将提供一些属性数据。

您可以通过调用 managedObject.objectID 来访问 objectID 属性。

**编辑**

我很抱歉，因为我显然没有做好沟通工作，因为这将是我第三次说了同样的话。

创建 NSFetchRequest 时，它有几个默认设置的属性。

resultType 默认设置为 NSManagedObjectResultType。这意味着，除非您更改它，否则它仍然是 NSManagedObjectResultType。这也意味着您从 fetch 中获得的结果数组将包含一个 NSManagedObjects 数组（而不是返回一个计数、字典或 ObjectID）。

默认情况下，returnObjectsAsFaults 设置为 YES。这意味着，除非您更改它，否则它仍然是 YES。这也意味着从 fetch 返回的对象将是错误的。NSManagedObject 不会用属性数据来实现。该对象将是一个错误。它将有足够的元数据来了解其类型、对象 ID 和其他一些内容。

includesPropertyValues 默认设置为 YES。这意味着，除非您更改它，否则它仍然是 YES。这也意味着一些属性数据将被提取到行缓存中。

从 fetch 返回的每个 NSManagedObject 将：

1.  有一个对象 ID
2.  是一个错误，所以数据实际上并没有完全加载到内存中
3.  一些属性数据将在行缓存中

这就是你所要求的一切。我不确定我还能添加什么（不再重复自己）。

另外，请注意，如果您只需要对象 ID，您可以将 resultType 设置为 NSManagedObjectIDResultType。

直接来自 NSFetchRequest 文档...

> **包括属性值**
> 
> 您可以将 includesPropertyValues 设置为 NO 以通过避免创建对象来表示属性值来减少内存开销。但是，您通常应该这样做，但是，如果您确定您不需要实际的属性数据或者您已经在行缓存中拥有信息，否则您将多次访问数据库。
> 
> 在正常获取期间（includesPropertyValues 为 YES），Core Data 获取匹配记录的对象 ID 和属性数据，用信息填充行缓存，并将托管对象作为故障返回（请参阅returnsObjectsAsFaults）。这些故障是托管对象，但在触发故障之前，它们的所有属性数据仍驻留在行缓存中。当故障被触发时，Core Data 从行缓存中检索数据——无需返回数据库。
> 
> 如果 includesPropertyValues 为 NO，那么 Core Data 只获取匹配记录的对象 ID 信息——它不会填充行缓存。Core Data 仍然返回托管对象，因为它只需要托管对象 ID 来创建故障。但是，如果您随后触发该故障，Core Data 会在（空）行缓存中查找，没有找到任何数据，然后再次返回存储区获取数据。

和...

> **返回ObjectsAsFaults**
> 
> 默认值为是。如果结果类型（参见 resultType）是 NSManagedObjectIDResultType，则不使用此设置，因为对象 ID 没有属性值。如果您知道需要从返回的对象访问属性值，则可以将 returnObjectsAsFaults 设置为 NO 以获得性能优势。
> 
> 默认情况下，当您执行 fetch 时，returnObjectsAsFaults 为 YES；Core Data 获取匹配记录的对象数据，用信息填充行缓存，并返回托管对象作为故障。这些故障是托管对象，但在触发故障之前，它们的所有属性数据都驻留在行缓存中。当故障被触发时，Core Data 从行缓存中检索数据。尽管此操作的开销很小，但对于大型数据集，它可能变得不简单。如果您需要从返回的对象中访问属性值（例如，如果您遍历所有对象以计算特定属性的平均值），那么将 returnObjectsAsFaults 设置为 NO 以避免额外的开销会更有效。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-11T08:17:18.530

让我用简单的方法解释一下

默认情况下，`NSFetchRequest`有

```
resultType: NSManagedObjectResultType

returnsObjectsAsFaults: YES

includesPropertyValues: YES 
```

这里返回的对象（在内存中）只有`objectID`属性，其他所有属性都是空的（这就是所谓的**故障**）

**包括属性值**

> YES：表示对象属性**在行缓存**中（CoreData的一些特殊缓存），所以当你访问这些属性时，CoreData会在行缓存中查找它们
> 
> NO：表示没有行缓存，当您访问这些属性时，CoreData 将再次查询 SQLite

**返回ObjectsAsFaults**

> YES：允许 includesPropertyValues 生效（意味着允许出现**故障**）
> 
> NO：返回对象，其所有属性都在内存中

**注意**：有两种故障：**托管对象故障**和**关系故障**

在这里阅读更多[错误限制了对象图的大小](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreData/FaultingandUniquing.html)

所以在你的情况下，只需使用默认值

# groovy - Gradle 字符串替换 - 没有占位符

> ID：10532632
> 
> 赞同：35
> 
> 时间：2012-05-10T11:01:21.667
> 
> 标签：groovy, gradle

是否可以在无法使用占位符/标记的 gradle 中进行简单的字符串替换。

例如：给定`temp.txt`替换所有出现的`xxx`with `yyy`。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-10T11:17:31.010

阅读以下文本：

```
String contents = new File( 'whatever.txt' ).getText( 'UTF-8' ) 
```

替换文本

```
contents = contents.replaceAll( 'xxx', 'yyy' ) 
```

再把文字写出来

```
new File( 'replaced.txt' ).write( contents, 'UTF-8' ) 
```

您应该能够将它们包装成一个任务并像往常一样调用该任务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:30:51.497

我假设您正在谈论资源处理。在这种情况下，您可以使用自由格式`filter`方法：

```
processResources {
  filter { String line -> line.replace(...) }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-05T19:39:47.690

要就地替换：

```
ant.replaceregexp(file: fout, flags: "g",
      match: 'schemaLocation="[^"]+/', replace: 'schemaLocation="', encoding: 'UTF-8') 
```

语法参考：

*   [https://ant.apache.org/manual/Tasks/replace.html](https://ant.apache.org/manual/Tasks/replace.html)
*   [https://ant.apache.org/manual/Tasks/replaceregexp.html](https://ant.apache.org/manual/Tasks/replaceregexp.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-31T09:26:10.303

这是 @tim_yates 答案的 Kotlin DSL 等效项：

```
val file = file("whatever.txt")
val newContents = file.readText().replace(Regex("xxx"), "yyy")
file.writeText(newContents) // Overwrites the file with the new content 
```

# c++ - Find available bandwidth from Python or C++

> ID：10532642
> 
> 赞同：0
> 
> 时间：2012-05-10T11:02:20.507
> 
> 标签：c++, python

I am trying to get the available bandwidth from my PC.

Suppose I'm streaming a video at 2 Mbps and my network card is of 100 Mbps, my program should tell me that 98 Mbps is available.

Is it easy to do in C++ or Python? And how can I find the available bandwidth using any of the suggested programming language. Any help will be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:16:23.960

There are many, many factors that will influence the available bandwidth: your hardware (network card, router, WiFi stability, cabling), what you are doing (other downloads, machine load) and what is happening elsewhere (bandwidth to target server, ISP issues, etc.). And all of those can change at any moment in time to make things more interesting. The end result is that there is no way to useful way calculate the available bandwidth. The best you can do is to try downloading (or uploading, depending on what direction you are interested in) some testdata to the target server and see what bandwidth you can use. Keep in mind that TCP has a speeds up over time so you need to run your test for a while to get the real available bandwidth.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:22:58.413

NLoad is written in C++ and supports monitoring bandwidth use on various Unix like operating systems.

You might find some inspiration at [https://github.com/revnode/nload](https://github.com/revnode/nload)

# ios - 将数据从 NSMutableArray 添加到 NSManagedObjectContext

> ID：10532645
> 
> 赞同：0
> 
> 时间：2012-05-10T11:02:36.940
> 
> 标签：ios, core-data, nsmutablearray

我正在尝试将数据添加到核心数据实体的属性中。

```
Contents of contentArray: (
036,
038,
040,
041,
043,
044,
044,
043,
042,
041,
041,
042,
042,
042,
042,
041,
041,
042,
043,
044,
045,
046,
047,
048,
050,
053,
054,
056,
059,
060,
057,
055,
053,
051,
048,
046,
043,
035,
034,
033,
032,
031,
032
} 
```

上面给出的是可变数组的示例内容。我正在尝试将其添加到 NSManagedObjectContext 变量中，如下所示：

```
 for (int i =0;i<[contentArray count];i++){
            int a =[[contentArray objectAtIndex:i] intValue];
            NSLog(@"value:%d",a);
            [newManagedObject setValue:[NSNumber numberWithInteger:a ] forKey:@"timeStamp"];
            // Save the context.
            NSError *error = nil;
            if (![context save:&error]) {  

            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
   }
  } 
```

我刚刚操作了 iOS 的默认核心数据应用程序，它在表中添加了时间戳值。单元格被先前的值覆盖。我的实施有什么问题吗？如何添加数据而不是覆盖内容数组的数据？任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:10:51.990

您必须在每次循环中创建一个新的托管对象（并将其添加到您的上下文中）。只要您始终使用相同的对象，就难怪您的数据会被覆盖。

另一方面，您可能应该将保存代码放在循环之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:16:11.597

这是将数据存储到核心数据中的基本方法。检查一下并为您的代码更改它...

```
NSManagedObjectContext *context = [self managedObjectContext];
countryObject=[NSEntityDescription
                          insertNewObjectForEntityForName:@"Country" 
                          inManagedObjectContext:context]; 
countryObject.city = @"New york";
countryObject.people = [NSString stringWithFormat:@"%@",[yourArray objectAtIndex:i]];
NSError *error;
if (![context save:&error]) {
    NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
} 
```

# php - 两次使用具有不同绑定结果的语句

> ID：10532646
> 
> 赞同：1
> 
> 时间：2012-05-10T11:02:38.047
> 
> 标签：php, mysqli, prepared-statement

是否可以使用具有*不同*绑定结果的语句*两次？*示例：第一个脚本包含第二个脚本。在 firstscript.php 中，准备好的语句进行选择并通过变量绑定结果以用于第一个输出。输出可以是例如结果的数量。该脚本包括 secondscript.php。

 *```
// firstscript.php
$sql ="SELECT field1,field2,field3,field4 FROM table WHERE table.field1=? AND table.field2=?";
$stmt->bind_params("si",$para1,$para2);
$stmt = $con->prepare($sql);
$stmt->bind_result($field1,$field2,$field3,$field4);
$stmt->execute();
$stmt->num_rows();
while($stmt->fetch())
    {
    //output
    }
$stmt->close();
include(secondscript.php); 
```

secondscript.php 重用语句对象来进行新的选择并限制结果。对于输出，该语句需要输出的其他绑定结果。

```
// secondscript.php
$limit = " LIMIT 0,5";
//use the same statement from first script in conjunction with $limit
$stmt->prepare($sql.$limit);
$stmt->execute();
/*
// case 1
//without binding results 
while($stmt->fetch())
    {
    //no output
    }

// case 2
//with binding results - like in the first script
$stmt->bind_result($field1,$field2,$field3,$field4);
while($stmt->fetch())
    {
    //output
    }

// case 3
//same statement with *different* bindings
*/
$stmt->bind_result($field3,$field4);
while($stmt->fetch()
    {
    //output - failure; binding error
    //Warning: mysqli_stmt::bind_result(): Number of bind variables doesn't match number of fields in prepared statement
    }
$stmt->close(); 
```

如何为最终输出分配重用语句新的绑定结果？

谢谢大家*

# asp.net - 如何为警报框赋予标题？

> ID：10532650
> 
> 赞同：2
> 
> 时间：2012-05-10T11:02:48.343
> 
> 标签：asp.net

> **可能重复：**
> [如何编辑 JavaScript 警告框标题？](https://stackoverflow.com/questions/1905289/how-to-edit-a-javascript-alert-box-title)

当我运行我的javascript程序时，我收到带有标题的警报框（本地主机上的页面说）。我想用一些好的标题删除它。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:05:27.110

您无法使用标准警报来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:08:06.467

无法使用 javascript 警报。尝试使用自定义 jquery-ui 对话框；[链接在这里](http://jqueryui.com/demos/dialog/#modal-message)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:06:31.417

不要使用 alert()，而是尝试使用灯箱。如果您使用 jQuery，请查看 jqModal。如果您使用 Prototype，请查看 ModalBox。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T11:06:46.077

您应该将 JqueryUI 用于自定义对话框。通过这种方式，您可以指定标题、文本、按钮，甚至为所有内容设置样式以匹配您的网站。

这是如何做到这一点的解释：http: [//jqueryui.com/demos/dialog/#modal-confirmation](http://jqueryui.com/demos/dialog/#modal-confirmation)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T11:11:13.113

无法更改警报框标题。您应该尝试使用纯 HTML 实现的自定义消息框，例如[这个](http://jqueryui.com/demos/dialog/#modal-message)

# iphone - 在我的 iPhone 应用程序中延迟加载，照片滚动变得粗糙（混蛋）

> ID：10532654
> 
> 赞同：0
> 
> 时间：2012-05-10T11:02:59.147
> 
> 标签：iphone, ios4, uiscrollview, lazy-loading, photos

我正在开发一个 iPhone 照片应用程序，其中有一个视图，我在 uiscrollview 的帮助下显示通过该应用程序拍摄的所有图像。首先，我只是将所有当前图像加载到滚动视图中。但它使应用程序变慢并导致崩溃，并给出以下警告：

```
Received memory warning. Level=2 
```

我用谷歌搜索了很多，发现这样做的原因可能是在视图上同时加载如此重的图像导致内存警告和事后崩溃。所以我选择了延迟加载的概念。

我只是在其中加载了三个图像，一个在中心（当前向用户显示），另外两个在两侧。我是通过以下方式做到的：

```
 - (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
     {
        pageNum = (int)(scrollView.contentOffset.x / scrollView.frame.size.width);
        pageNumber = floor(pageNum);
        [self setImages:pageNumber];      //setting three images
     } 
```

现在没有崩溃，没有内存警告，但滚动变得非常粗糙，有很多抽搐。

请建议我如何摆脱粗糙或显示与 iPhone 默认照片应用程序相同的所有图像。

非常感谢您的帮助。

注：1.图片数量不详，可不限。2\. Xcode 3.2.6 3\. ios SDK 4.3

请考虑链接 [链接]https://www.dropbox.com/sh/h0vwnhhx1acfcb5/W2TQ638udh 该链接显示了一个视频，其中我展示了一个嵌入了延迟加载的照片滚动条。有时它不会很快加载图像，滚动也变得粗糙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:07:49.323

这是内存不足的警告，请参阅这些线程

[iPhone 操作系统内存警告。不同级别的含义是什么？](https://stackoverflow.com/questions/2915247/iphone-os-memory-warnings-what-do-the-different-levels-mean)

[http://www.iphonedevsdk.com/forum/iphone-sdk-development/92778-received-memory-warning-level-2-17mb-used.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/92778-received-memory-warning-level-2-17mb-used.html)

[iPhone 内存警告级别=2](https://stackoverflow.com/questions/3382677/iphone-memory-warning-level-2)

[“收到内存警告。级别 = 2”与 4.x？](https://stackoverflow.com/questions/4577354/received-memory-warning-level-2-with-4-x)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:45:30.540

好的。如果我理解得很好，您想按顺序在 UITableView 中显示图像，并使表格滚动器正常工作。

我曾经在我的一个项目中遇到过同样的问题，我通过不下载图像并简单地显示它来解决它，更清楚的是我分为 3 个步骤：

1-创建一个 XML 文件来存储所有图像的网址，当然还有 id。
2-使用 NSXMLParser，获取所有图像的网址并将其添加到 NSArray，然后将其显示在 UITableView 上。您可以自定义 tableView 以使所有图像看起来像您想要设计的那样。
3-在 UITableView 方法上添加一个 UIWebView（这是关键）。将图像地址加载到这个 webView。

# sql - SQLite - 替换字符串的一部分

> ID：10532656
> 
> 赞同：111
> 
> 时间：2012-05-10T11:03:04.147
> 
> 标签：sql, sqlite

是否可以`SQL`在`SQLite`表格中使用来替换部分字符串？

例如，我有一个表，其中一个字段包含文件的路径。是否可以替换部分字符串，例如

```
c:\afolder\afilename.bmp 
```

变成

```
c:\anewfolder\afilename.bmp 
```

?

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2012-05-29T22:55:06.163

您可以使用内置`replace()`函数在查询中执行字符串替换。

[SQLite 核心函数列表](http://sqlite.org/lang_corefunc.html)中详细介绍了其他字符串操作函数（以及更多）

以下内容应为您指明正确的方向。

`UPDATE table SET field = replace( field, 'C:\afolder\', 'C:\anewfolder\' ) WHERE field LIKE 'C:\afolder\%';`

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-12-16T14:44:46.757

[@Andrew](https://stackoverflow.com/users/1218626/andrew)的回答部分正确。此处无需使用`WHERE`子句：

1.  无论如何，只有包含的字段`C:\afolder`会受到影响，没有理由检查它。太过分了。
2.  `'C:\afolder\%'`将只选择以 only 开头的字段`C:\afolder\`。如果你在字符串中有这个路径怎么办？

所以正确的查询是：

```
UPDATE table SET field = replace( field, 'C:\afolder\', 'C:\anewfolder\'); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-01-25T15:59:23.517

如果您只想在查询中执行此操作而不会产生持久的后果：

```
SELECT fieldA, replace(field, 'C:\afolder\', 'C:\anewfolder\'), fieldB FROM table; 
```

# xml - 在特定属性中获取不同的值

> ID：10532657
> 
> 赞同：2
> 
> 时间：2012-05-10T11:03:04.330
> 
> 标签：xml, xpath, distinct

我有以下 XML 代码：

```
<!-- language: xml -->
<Stats>
  <Stat>
    <Data Name="Value">63.76</Data>
    <Data Name="Entity">first</Data>
  </Stat>
  <Stat>
    <Data Name="Value">51.23</Data>
    <Data Name="Entity">second</Data>
  </Stat>
  <Stat>
    <Data Name="Value">46.1</Data>
    <Data Name="Entity">third</Data>
  </Stat>
  <Stat>
    <Data Name="Value">61.21</Data>
    <Data Name="Entity">first</Data>
  </Stat>
</Stats> 
```

我只想过滤'Data [@Name ='Entity']。使用 xpath:`/Stats/Stat/Data[@Name="Entity"]`返回: first second third first

但我希望结果是独一无二的。所以我只得到：第一第二第三

编辑：我需要这个适用于 xpath 1.0 版。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:02:34.143

**使用这个 XPath 1.0 表达式**：

```
/Stats/Stat
   [Data/@Name='Entity'
  and
   not(Data[@Name='Entity']  = following-sibling::Stat/Data[@Name = 'Entity'])
   ]
    /Data[@Name='Entity'] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
      "/Stats/Stat
           [Data/@Name='Entity'
          and
           not(Data[@Name='Entity']  = following-sibling::Stat/Data[@Name = 'Entity'])
           ]
            /Data[@Name='Entity']
      "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（通过更正提供的格式不正确的文本生成）：

```
<Stats>
  <Stat>
    <Data Name="Value">63.76</Data>
    <Data Name="Entity">first</Data>
  </Stat>
  <Stat>
    <Data Name="Value">51.23</Data>
    <Data Name="Entity">second</Data>
  </Stat>
  <Stat>
    <Data Name="Value">46.1</Data>
    <Data Name="Entity">third</Data>
  </Stat>
  <Stat>
    <Data Name="Value">61.21</Data>
    <Data Name="Entity">first</Data>
  </Stat>
</Stats> 
```

**对上面的 XPath 表达式求值，并将选定的节点复制到输出：**

```
<Data Name="Entity">second</Data>
<Data Name="Entity">third</Data>
<Data Name="Entity">first</Data> 
```

**注意**：如果您只需要文本节点（“first”、“second”和“third”），只需使用这个单一的 XPath 表达式：

```
/Stats/Stat
   [Data/@Name='Entity'
  and
   not(Data[@Name='Entity']  = following-sibling::Stat/Data[@Name = 'Entity'])
   ]
    /Data[@Name='Entity']
      /text() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T11:21:31.313

您需要说明 XPath 的哪个版本。在 XPath 2.0 中，这很简单：

```
distinct-values(/Stats/Stat/Data/@Name) 
```

# wpf - 从 WPF 中的现有控件创建数据模板

> ID：10532659
> 
> 赞同：0
> 
> 时间：2012-05-10T11:03:13.067
> 
> 标签：wpf, user-controls, wpf-controls, datatemplate

有没有办法`DataTemplate`从 WPF 中的现有控件创建一个？
例如，假设我的资源中有一个网格，方法如下：

```
<Grid x:Key="grid" .. /> 
```

我可以以某种方式将此网格用作`DataTemplate`另一个控件吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:08:50.383

一种解决方案是在资源字典中创建一个`DataTemplate`包含网格。要显示`Grid`您可以使用 a`ContentControl`并且您可以使用`DataTemplate`模板其他控件。

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <DataTemplate x:Key="grid">
        <Grid />
    </DataTemplate>
</ResourceDictionary> 
```

# c++ - 带有 unique_ptr 和 shared_ptr 的奇怪段错误

> ID：10532661
> 
> 赞同：3
> 
> 时间：2012-05-10T11:03:18.860
> 
> 标签：c++, c++11, shared-ptr, unique-ptr

我遇到了一个奇怪的段错误。原因实际上导致了我的一个错误，但我仍然不明白为什么这里会导致分段错误......代码是：

```
#include <memory>
int main(int argc, char **arv)
{
    int *i = new int;
    std::unique_ptr<int> u1(i);
    std::unique_ptr<int> u2;
    u1 = std::move(u2); // line 7
    std::shared_ptr<int> s1(i); // line 8
    std::shared_ptr<int> s2;
    s2 = s1;
} 
```

我用 g++ 4.6 编译`-std=c++0x`并得到一个段错误。

如果我将第 7 行更改为`u2 = std::move(u1);`（那是错误），它就会消失。如果我将第 8 行更改为`std::shared_ptr<int> s1(new int(3));`（当然我不想要），它也会消失。如果我从第 8 行删除也没有段错误。

所以没有伤害，但我不明白为什么会有段错误。据我了解，
在第 7 行，一个空指针被分配给 u1。没有reset()，没有范围的结束。尽管如此`i`，从那里开始似乎是无效的。这是故意的吗？这意味着在移动指针时必须非常小心，因为可能会破坏另一个对象！

你怎么看？我该如何保护自己免受这种伤害？

谢谢，史蒂芬

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T11:13:23.563

你的第 8 行是错误的：一旦你`i`在 中捕获`unique_ptr`，你就不能再把它交给*其他*一些拥有所有权的对象！每个所有者都会尝试删除`*i`，这是错误的。

相反，您应该从*唯一*指针创建共享指针：

```
std::shared_ptr<int> s1(std::move(u2)); 
```

（另外，你有`u1`错误`u2`的方式。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T11:13:21.740

这一行：

```
u1 = std::move(u2); 
```

使之前存储的指针`u1`被删除。因此，您的`i`指针被释放。创建一个`shared_ptr`持有 free'd 的指针是未定义的行为。

# iphone - 目标 c 将块转换为选择器

> ID：10532662
> 
> 赞同：2
> 
> 时间：2012-05-10T11:03:19.777
> 
> 标签：iphone, c++, objective-c

单击菜单时将调用以下块。

```
CCMenuItem* iconItem = [CCMenuItemSprite itemFromNormalSprite:icon 
                                          selectedSprite:icon2 
                                          block:^(id sender) {
    [self buttonClickedWithUnlocked:unlocked world:world];
}]; 
```

我可以将参数传递给块内的方法。

但现在我正在将 obj-c 翻译成 c++。因此不支持块。我需要使用像这样的选择器：

```
 CCMenuItem* iconItem = 
 CCMenuItemSprite::itemFromNormalSprite(icon, icon2, this,              
 menu_selector(SomeClass::buttonClickedWithUnlockedWorld(unlocked, w))); 
```

但我无法传递参数（选择器不支持）所以还有其他方法吗？

如果您不使用 c++，则选择器的 Obj-c 版本是：

```
CCMenuItem* iconItem = [CCMenuItemSprite itemFromNormalSprite:icon 
                                          selectedSprite:icon2 
                                          target: self
                                          selector: @selector(buttonClickedWithUnlocked)
}]; 
```

但是，我也不能将任何参数传递给@selector。还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:31:56.817

Your obj-c version should be `selector: @selector(buttonClickedWithUnlocked::)` instead of `selector: @selector(buttonClickedWithUnlocked)` (Note the `::`). So for your C++ version you need to create something like `[target performSelector:selector withObject:obj1 withObject:obj2]`.

So in Obj-C it could look like this:

```
CCMenuItem* iconItem = [CCMenuItemSprite itemFromNormalSprite:icon 
                                      selectedSprite:icon2 
                                      target: self
                                      selector: @selector(buttonClickedWithUnlocked::)
                                      param1: [NSNumber numberWithInt:unlocked]
                                      param2: [NSNumber numberWithBool:w]
}]; 
```

and `buttonClickedWithUnlocked` must be defined to have two NSNumber parameters.

# objective-c - UIImageView+AFNetworking 在飞行模式下加载图片失败？

> ID：10532663
> 
> 赞同：0
> 
> 时间：2012-05-10T11:03:21.347
> 
> 标签：objective-c, afnetworking

我使用 AFNetworking 加载 RSS。看来对 RSS 的 HTTP 请求已成功缓存在磁盘中。即使在飞行模式下，RSS 仍然可以显示。

但是对于RSS中的图片url，我使用UIImageView+AFNetworking类加载，如果手机处于离线模式，加载失败……为什么？

这就是我初始化 SDURLCache 的方式：

```
 // configure the disk cache here
    self.cache = [[SDURLCache alloc] initWithMemoryCapacity:1024*1024 // 1 MB mem cache
                                                         diskCapacity:1024*1024*5 // 5 MB disk cache
                                                             diskPath:[SDURLCache defaultCachePath]];    
    self.cache.ignoreMemoryOnlyStoragePolicy = YES;
    [NSURLCache setSharedURLCache:self.cache]; 
```

这是加载图像的代码。

```
[self setImageWithURL:[NSURL URLWithString:URL] placeholderImage:[UIImage imageNamed:@"thumbnail_loading.png"]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T04:08:02.990

试试`cache.ignoreMemoryOnlyStoragePolicy = YES`。如果曾经加载过图像，则应使用此设置将它们保存在磁盘上。

# extjs - 必应翻译 EXT JS 访问令牌

> ID：10532664
> 
> 赞同：0
> 
> 时间：2012-05-10T11:03:35.583
> 
> 标签：extjs, localization, token, microsoft-translator

我正在尝试将 Bing 翻译器连接到我的 EXT JS。我在尝试获取访问令牌时遇到问题。无论我尝试了什么，我都会收到 400 个错误请求。

这是我的代码：

```
 var clientId = encodeURI("<my id>"),
    clientSecret = encodeURI("<my secret>"),
    scope = encodeURI("http://api.microsofttranslator.com"),
    grantType = encodeURI("client_credentials");        
    var params = {client_id     :  clientId,
                  client_secret :  clientSecret,
                  scope         :  scope, 
                  grant_type    :  grantType};
    Ext.Ajax.request({
               url     : "https://datamarket.accesscontrol.windows.net/v2/OAuth2-13/",
               method  : "POST",
               params  : params,
               success : function(response) {
                            alert("Success");
               },
               fail    : function() {
                            alert("Fail");
               }
    }); 
```

我开始认为这是不可能的。我相信这是在提出[https://datamarket.accesscontrol.windows.net/v2/OAuth2-13/](https://datamarket.accesscontrol.windows.net/v2/OAuth2-13/)不允许的请求。也许它正在做这个客户端？或者，https url 在 Ajax.request 中可能不起作用。任何帮助都表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:00:17.500

正如你所建议的，这是不可能的。请注意，您需要使用 JSONP+GET 向第三方服务器发出任何请求，但必应翻译 API[只接受 POST 请求](http://msdn.microsoft.com/en-us/library/hh454950.aspx)。尽管在您的代码中指示了 POST（使用 Chrome 开发人员工具或类似工具来检查这一点），但浏览器仍在使用 GET 来处理您的请求，因为 JSONP 和 POST 不兼容（请参阅[此处](https://stackoverflow.com/questions/2699277/post-data-to-jsonp)）。

以前版本的必应翻译 API 接受 GET 请求，但现在不再如此。解决方法：你需要自己实现服务端服务来获取访问令牌和翻译，然后将后者返回给浏览器。

顺便说一句，这是一个类似的代码，它使用 JQuery 来获取访问令牌，并且由于相同的原因它不起作用：

```
$.ajax({
  type: "POST",
  url: "https://datamarket.accesscontrol.windows.net/v2/OAuth2-13",
  data: {client_id:"bbcat",client_secret: "SECRETKEY",
     scope: "http://api.microsofttranslator.com", grant_type: "client_credentials"},
  dataType: "jsonp",
  success: function(data) {
    console.log(data);
  },
  error: function(data) {
    console.error(data);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T06:19:49.693

您不能使用 Ext.Ajax 跨域，您需要使用 JSONP 或表单发布从第三方域获取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T01:19:38.333

对 Ext.Ajax 不是很熟悉，但试试这个：

1.  尝试执行 GET 而不是 POST
2.  而不是您拥有的参数，将它们放入查询字符串中，即 https://?clientid=&etc。等等

# symfony - Symfony2 & Translatable：实体的语言环境为空

> ID：10532667
> 
> 赞同：2
> 
> 时间：2012-05-10T11:03:37.530
> 
> 标签：symfony, doctrine-orm, translation

我正在尝试显示具有可翻译行为的类别列表。我的默认语言环境是“fr”。

在我的“ext_translations”表中，我有语言环境“en”所需的所有记录。

我的控制器：

```
 ....
    $this->get('session')->setLocale('en');
    $categories = $this->getDoctrine()->getRepository('MyBundle:Category')->findAll();
    .... 
```

问题是当我显示所有检索到的类别时，我得到的是“fr”翻译而不是“en”。

我试图从我的 Category 实体中显示 $locale 变量，它是**空**的。

我唯一的解决方案是在我的控制器中添加它：

```
 ....
    $em = $this->getDoctrine()->getEntityManager();
    foreach($categories as $cat){
        $cat->setTranslatableLocale($this->get('session')->getLocale());
        $em->refresh($cat);
    }
    .... 
```

但当然，这不是一个好的解决方案。

有什么帮助吗？为什么我的实体的 $locale 变量为空？

谢谢你的帮助，

问候，

奥雷尔

**编辑**

我的实体：

```
<?php

namespace Acme\MyBundle\Entity;

use Gedmo\Mapping\Annotation as Gedmo;
use Doctrine\ORM\Mapping as ORM;
use Gedmo\Translatable\Translatable;

/**
 * Acme\MyBundle\Entity\Category
 *
 * @ORM\Table(name="category")
 * @ORM\Entity(repositoryClass="Acme\MyBundle\Repository\CategoryRepository")
 */
class Category implements Translatable
{

    /**
     * @var smallint $id
     *
     * @ORM\Column(name="id", type="smallint", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var string $title
     *
     * @Gedmo\Translatable
     * @ORM\Column(name="title", type="string", length=255, nullable=false)
     */
    private $title;

    /**
     * @Gedmo\Locale
     * Used locale to override Translation listener`s locale
     * this is not a mapped field of entity metadata, just a simple property
     */
    private $locale;

    public function setTranslatableLocale($locale)
    {
        $this->locale = $locale;
    }

    public function getLocale(){
        return $this->locale;
    }

    /* ... all getters and setters ... */

    /**
     * Set title
     *
     * @param string $title
     */
    public function setTitle($title)
    {
        $this->title = $title;
    }

    /**
     * Get title
     *
     * @return string 
     */
    public function getTitle()
    {
        return $this->title;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:32:46.833

我找到了解决方案，但这意味着 StofDoctrineExtensionsBundle 无法正常工作。

我必须编辑我的 config.yml 文件以明确添加 LocaleListener ：

```
my_translatable_locale_listener:
    class: Stof\DoctrineExtensionsBundle\EventListener\LocaleListener
    arguments: [@stof_doctrine_extensions.listener.translatable]
    tags:
        - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest } 
```

如果有人有更好的解决方案...

奥雷尔

# macos - 快速查看 QLPreviewPanel 在 10.6 上的 LSUIElement 代理应用程序中不可见

> ID：10532669
> 
> 赞同：0
> 
> 时间：2012-05-10T11:04:05.863
> 
> 标签：macos, cocoa, osx-snow-leopard, quicklook

有没有办法在 Mac OS X 10.6 上的代理应用程序（LSUIElement == YES）中显示 QLPreviewPanel？它适用于 10.7。面板的框架是正确的，一切都是不可见的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:13:35.410

我在 CocoaDev 上的一个旧线程中找到了答案，该问题通常在代理应用程序中显示警报面板：

[代理应用程序中的警报对话框](http://osdir.com/ml/cocoa-dev/2009-08/msg01370.html)

解决方案：必须调用 [NSApp activateIgnoringOtherApps:YES] 才能使面板出现。

# modeling - 用例：< > 还是没有？

> ID：10532670
> 
> 赞同：0
> 
> 时间：2012-05-10T11:04:09.880
> 
> 标签：modeling, use-case

我有一个系统（一个视频游戏）和一个用例（攻击）。如果对手受到攻击并且他不在线，他会收到一封电子邮件，否则他不会。

我不知道做一个用例是否更好：

```
USR----(ATTACK)<-------<< extends >>---(OFFLINE-ATTACK)----MAIL SERVER 
```

或者

```
USR----(ATTACK)------MAIL SERVER 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:31:38.920

Each usecase should represent an actor's goal. (OFFLINE-ATTACK) does not sound like an actual valid goal but more like an exception (alternative path).

# caching - 如何在代理后面使用清漆缓存

> ID：10532671
> 
> 赞同：0
> 
> 时间：2012-05-10T11:04:11.507
> 
> 标签：caching, proxy, varnish

我想使用 Varnish-cache 来缓存我的 Web 应用程序的一些依赖项，但我被困在公司代理设置后面。有没有办法告诉 Varnish-cache 通过代理向其他服务发出 http 请求？

非常感谢

西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-06T09:27:30.280

对于 varnish4，这不起作用。进行一些网络跟踪，看起来 varnish v4 执行相对 req.url，其中代理需要绝对 req.url 我处于裂脑 DNS 世界中，所以我的后端与前端用户看到（只是解决方式不同）。因此，我在 req.url 变量中使用 req.http.host 创建了一个绝对 URL。

```
sub vcl_recv {
    # Setting backend hint
    set req.backend_hint = varnish_backend;
    if (req.url !~ "mydomain.com") {
      set req.url ="http://" + req.http.host + req.url;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:42:20.260

只要你能和代理说 HTTP，你就可以做任何你想做的事。

示例设置：

```
[back-end A]          [back-end B]
     |                     |
     ---[corporate proxy]---
                |
            [Varnish] 
```

将默认端口从 80 更改为代理端口（例如 8080）...

```
backend corp_proxy {
  .host = "proxy.localnet";
  .port = "8080";
}
...
sub vcl_recv {
    ...
    /* check if back-end A or B and use proxy as backend */
    if (req.http.host == "backend-a.example.com" || req.http.host == "backend-b.example.com") {
        set req.backend = corp_proxy;
        set req.http.X-Proxy-Pass = 'mypass';
    }
    ...
} 
```

您甚至可以在请求中设置自定义标头（例如一些静态键或其他）。

# php - 调试 PDO 查询，如何？

> ID：10532675
> 
> 赞同：1
> 
> 时间：2012-05-10T11:04:21.180
> 
> 标签：php, debugging, pdo

我在使用准备好的语句通过 PDO 发送的一些更复杂的查询时遇到了麻烦。虽然 errorInfo() 在显示语法错误方面很有用，但它并没有真正显示逻辑错误以及查询的实际部分。

有没有办法回显 PDO 最后执行的查询？如，实际查询发送到数据库？该类应该将它存储在正确的地方，因为它确实将它发送到某个地方的数据库？有什么方法或某种方法可以捕捉到它吗？

目前我的调试系统只回显查询？代替实际参数，如果错误是在逻辑上，这不太有用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:08:22.817

您是否尝试[过 PDOStatement::debugDumpParams](http://www.php.net/manual/en/pdostatement.debugdumpparams.php)？它为您提供有关参数的详细信息。

从手册：

> 将准备好的语句包含的信息直接转储到输出中。它将提供正在使用的 SQL 查询、使用的参数数量 (Params)、参数列表，以及它们的名称、类型 (paramtype) 作为一个整数、它们的键名或位置、值以及查询中的位置（如果 PDO 驱动程序支持，否则为 -1）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:05:53.393

考虑尝试mysql-proxy： http: [//lamp-dev.com/wp-content/uploads/mysql-proxy.zip](http://lamp-dev.com/wp-content/uploads/mysql-proxy.zip)

你在 php 中使用什么扩展并不重要，它只是在 php 和 mysql 之间充当代理，并“按原样”显示所有查询。您只需要在 start.bat 中更改 DSN。请注意，此版本是基于 Windows 的。

您需要在 php 中更改连接，然后将其连接到 mysql-proxy

忘了说这只有在你使用mysql时才有意义，你没有指定你的RDBMS，PDO可能与不同的驱动程序一起工作

# jquery - Jquery 哈希导航

> ID：10532676
> 
> 赞同：3
> 
> 时间：2012-05-10T11:04:29.650
> 
> 标签：jquery, hash

我有一个简单的 javascript 函数来获取哈希变量：

```
$(document).ready(function(){
    $("a").click(function(){
        nav_anchor()
    });
    function nav_anchor() {
        var aurl = location.hash;
        aurl = aurl.split('#');
        if (aurl[1]) { alert(aurl[1]); }
        else { alert("Empty");  }
    }
}); 
```

```
<a href="#a=1&aa=10">11111111111</a>
<a href="#b=1&bb=10">22222222222222</a>
<a href="#c=1&cc=10">333333333</a> 
```

但是，如果我单击链接，我会收到上一个 var。

例子：

如果我的第一次点击是`11111`我收到消息`Empty`，如果我的第二次点击是`222222`我收到`a=1&aa=10`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T11:08:20.240

[http://jsbin.com/uxitoy/2/edit](http://jsbin.com/uxitoy/2/edit)

```
$(document).ready(function(){
    $("a").click(function(){
        nav_anchor(this);
    });
    function nav_anchor(o) {
        var aurl = o.hash;
        aurl = aurl.split('#');
        if (aurl[1].length>0) { alert(aurl[1]); }
        else { alert("Empty");  }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T11:08:07.810

这是因为在将哈希片段附加到 URL*之前触发了 click 事件。*不要从 URL 中获取哈希，而是从链接中获取它：

```
$("a").click(function(){
    nav_anchor(this)
});

function nav_anchor(el) {
    var aurl = el.href;
    aurl = aurl.split('#');
    if (aurl[1]) { alert(aurl[1]); }
    else { alert("Empty");  }
} 
```

如果要在页面加载时获取变量，则需要使用`location.hash`.

[**示例小提琴**](http://jsfiddle.net/uxswK/1)

# iphone - 苹果推送通知，定期发出嗡嗡声

> ID：10532684
> 
> 赞同：0
> 
> 时间：2012-05-10T11:04:48.587
> 
> 标签：iphone, ios, push-notification, apple-push-notifications, pager

关于 iOS 上的苹果推送通知有效负载，我有一个小而棘手的问题。

据我所知，推送通知有效负载可以有声音（长度 <= 30 秒）、文本和徽章。现在我想要我的 iphone 应用程序是由我的提供商（服务器）发送到 iPhone 屏幕上的这个应用程序的推送通知，以定期（比如每 1 分钟）不断发出嗡嗡声，直到用户点击屏幕上的通知（即检查信息）。因此，通知将不断播放声音，并在用户点击并启动应用程序时停止。

可行吗？如何？

PS：它是一个企业应用程序，不会部署在 App Store 上。

提前致谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-10T11:11:13.177

是的。这就是你可以实现的方式：

1.  为推送通知注册设备
2.  每 30-60 秒向声音发送一条带有 ref 的推送消息
3.  30-60 秒后使每条消息失效，为新消息腾出空间
4.  当用户重新打开应用程序时，将应用程序注册为重新打开到服务器并停止发送推送通知

我不知道这在通知中心会是什么样子，但你可以测试并看看:)

# jquery - Gridview 中的切换按钮不起作用？

> ID：10532685
> 
> 赞同：0
> 
> 时间：2012-05-10T11:04:49.413
> 
> 标签：jquery, asp.net, gridview, togglebutton

我创建了一个切换按钮，它通过 4 个状态在单个按钮上切换！

切换按钮位于 GridView 中，而 GridView 又嵌套在 FormView 中。该按钮在 HTML 页面中运行良好，并在选择 4 个图像中的每一个时根据需要将值提交到文本框中。但是在 GridView 中它不起作用！任何人都可以提供帮助或者我应该知道任何已知问题吗？

```
<script type="text/javascript">
   $(document).ready(function() {
     $(".imageButton").ready(function() {
           $("img").click(function() {
               if ($(this).attr("src") == "../../../images/tick_50.png") {
                    $(this).attr("src", '../../../images/excl_mark_50.png'); //orange image
                     $(this).parent().siblings("input").attr("value", '2');
                 } else if ($(this).attr("src") == "../../../images/excl_mark_50.png") {
                     $(this).attr("src", '../../../images/cross_50.png'); //red image
                     $(this).parent().siblings("input").attr("value", '3');
                 } else if ($(this).attr("src") == "../../../images/cross_50.png") {
                     $(this).attr("src", '../../../images/absent_50.png'); //blue image
                     $(this).parent().siblings("input").attr("value", '4');
                 } else if ($(this).attr("src") == "../../../images/absent_50.png") {
                     $(this).attr("src", '../../../images/tick_50.png'); //green image
                     $(this).parent().siblings("input").attr("value", "1");
                }
           });
     });

});
</script>

<asp:FormView ID="FormView1" runat="server" DataSourceId="SqlDataSource1"
                DataKeyNames="tt_id,s_id,n_id,o_id" AllowPaging="false">

   <ItemTemplate>

                    <br />

  <asp:UpdatePanel ID="UpdatePanel2" runat="server">
   <ContentTemplate>
    <asp:GridView ID="GridView1" runat="server" DataSourceID="SqlDataSource1" AutoGenerateColumns="False"
        CssClass="rounded-corner" DataKeyNames="tt_id,s_id,n_id,o_id" 
           ShowFooter="True" >
        <Columns>

            <asp:TemplateField HeaderText="Results" SortExpression="outcome" HeaderStyle-Font-Bold="true" >
                <EditItemTemplate >
                <div class="imageButton"><a href="#"> <asp:Image ID="imgStatusEdit" runat="server" ImageURL='<%# GetImage(CType(Eval("o_id"),Integer)) %>' /></a>
                    <asp:TextBox ID="txtOutcome" runat="server"></asp:TextBox></div>

                </EditItemTemplate>
                <ItemTemplate>
     <asp:Image ID="imgStatus" runat="server" ImageURL='<%# GetImage(CType(Eval("o_id"),Integer)) %>' />
                    <%--<asp:Label ID="Label2" runat="server" Text='<%# Bind("o_id") %>'></asp:Label>--%>

                </ItemTemplate>
                <HeaderStyle Font-Bold="True" />
                <ItemStyle Width="67px" />
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Notes" SortExpression="notes" ItemStyle-Width="" HeaderStyle-Font-Bold="true">
                <EditItemTemplate>
                    <asp:TextBox ID="txtNotes" runat="server" TextMode="MultiLine" Text='<%#Eval("notes")%>'></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Eval("notes")%>'></asp:Label>
                </ItemTemplate>
                <HeaderStyle Font-Bold="True" />
            </asp:TemplateField>
            <asp:CommandField ButtonType="Link" UpdateText="Update" CancelText="Cancel" 
                EditText="Edit" ShowEditButton="True" />
        </Columns>

    </asp:GridView>               
      </ContentTemplate>
    </asp:UpdatePanel>              
             </ItemTemplate>
</asp:FormView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:50:11.180

```
$(document).ready(function () {
            $('.imageButton').find('img').on('click', function () {
                if ($(this).attr('src') == '../../../images/tick_50.png') {
                    $(this).attr('src', '../../../images/excl_mark_50.png'); //orange image
                    $(this).parents('.imageButton').find('input').val('2');
                } else if ($(this).attr('src') == '../../../images/excl_mark_50.png') {
                    $(this).attr('src', '../../../images/cross_50.png'); //red image
                    $(this).parents('.imageButton').find('input').val('3');
                } else if ($(this).attr('src') == '../../../images/cross_50.png') {
                    $(this).attr('src', '../../../images/absent_50.png'); //blue image
                    $(this).parents('.imageButton').find('input').val('4');
                } else if ($(this).attr('src') == '../../../images/absent_50.png') {
                    $(this).attr('src', '../../../images/tick_50.png'); //green image
                    $(this).parents('.imageButton').find('input').val('1');
                }
            });
        }); 
```

# php - PHP中的时间夜微分计算

> ID：10532687
> 
> 赞同：1
> 
> 时间：2012-05-10T11:04:53.210
> 
> 标签：php, time, computation

我在获取员工的夜间差异时遇到了问题。夜差从晚上 10 点到早上 6 点开始。

如果员工从晚上 7 点到早上 5 点 30 分上班，则应有 7 小时 30 分钟的夜间差异。

如何使用 PHP 进行计算？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:34:15.623

```
<?php

define('START_NIGHT_HOUR','22');
define('START_NIGHT_MINUTE','00');
define('START_NIGHT_SECOND','00');
define('END_NIGHT_HOUR','06');
define('END_NIGHT_MINUTE','00');
define('END_NIGHT_SECOND','00');

function night_difference($start_work,$end_work)
{
    $start_night = mktime(START_NIGHT_HOUR,START_NIGHT_MINUTE,START_NIGHT_SECOND,date('m',$start_work),date('d',$start_work),date('Y',$start_work));
    $end_night   = mktime(END_NIGHT_HOUR,END_NIGHT_MINUTE,END_NIGHT_SECOND,date('m',$start_work),date('d',$start_work) + 1,date('Y',$start_work));

    if($start_work >= $start_night && $start_work <= $end_night)
    {
        if($end_work >= $end_night)
        {
            return ($end_night - $start_work) / 3600;
        }
        else
        {
            return ($end_work - $start_work) / 3600;
        }
    }
    elseif($end_work >= $start_night && $end_work <= $end_night)
    {
        if($start_work <= $start_night)
        {
            return ($end_work - $start_night) / 3600;
        }
        else
        {
            return ($end_work - $start_work) / 3600;
        }
    }
    else
    {
        if($start_work < $start_night && $end_work > $end_night)
        {
            return ($end_night - $start_night) / 3600;
        }
        return 0;
    }
}

var_dump(night_difference(strtotime('today 19:00'),strtotime('tomorrow 05:30')));
var_dump(night_difference(strtotime('today 10:00'),strtotime('today 19:00')));
var_dump(night_difference(strtotime('yesterday 10:00'),strtotime('today 08:00')));
var_dump(night_difference(strtotime('yesterday 23:00'),strtotime('today 04:00'))); 
```

输出：

```
float(7.5)
int(0)
int(8)
int(5) 
```

# scala - 如何在一个演员中从多个演员那里收集数据的最佳方式是什么？

> ID：10532691
> 
> 赞同：0
> 
> 时间：2012-05-10T11:05:08.853
> 
> 标签：scala, concurrency, actor

如何从一个演员中的许多演员收集数据并在处理后将它们发送给另一个演员的最佳方法是什么？我可能有自己的认识：

```
import scala.actors._

abstract class Message
case class DataMsg(id: String, value: String) extends Message
case class Done() extends Message

class DataSender(id: String, next: Actor) extends Actor {

    def act() {
        loop {
            react {
                case DataMsg(_, msg) => next ! DataMsg(id, msg)
                case Done() => {
                    println(id+" -> done")
                    exit()
                }
            }
        }
    }
}

class Concat(next: Actor, ids: Seq[String]) extends Actor {
    private val data = scala.collection.mutable.LinkedHashMap.empty[String, String]

    def act() {
        loop {
            react {
                case DataMsg(id, msg) => {
                    if (ids contains id) {
                        data(id) = msg
                        if (ids.size == data.keys.size) {
                            next ! DataMsg("", data.values.mkString)
                            data.clear
                        }
                    }
                }
                case Done() => {
                    println("Concat -> done")
                    exit()
                }
            }
        }
    }
}

class PrintData extends Actor {
    def act() {
        loop {
            react {
                case DataMsg(_, msg) => {
                    println("Data: " + msg)
                }
                case Done() => {
                    println("PrintData -> done")
                    exit()
                }
            }
        }
    }
}

val printData = new PrintData
val concat = new Concat(printData, Seq("f1", "f2", "f3"))
val f1 = new DataSender("f1", concat)
val f2 = new DataSender("f2", concat)
val f3 = new DataSender("f3", concat)

printData.start
concat.start
f1.start
f2.start
f3.start

f1 ! DataMsg("", "Hello")
f2 ! DataMsg("", " ")
f3 ! DataMsg("", "Wordl!")
Thread.sleep(1000)
f1 ! Done()
f2 ! Done()
f3 ! Done()
concat ! Done()
printData ! Done() 
```

也许，有更好的解决方案。我曾考虑过期货，但我不确定是否有必要使用它们。Concat actor 无法获取值怎么办？

# asp.net - MVC 中的下载管理器和表单验证

> ID：10532694
> 
> 赞同：1
> 
> 时间：2012-05-10T11:05:21.870
> 
> 标签：asp.net, asp.net-mvc-3, download-manager, form-authentication

我们提供我们的软件供公众下载。客户可以使用下载管理器使用下面的链接下载软件，它工作正常。

www.example.com/downloads/setup.exe

最近我们更改了流程，例如如果有人单击“Setup.exe”进行下载，我们会将他们带到登录页面（如果他们没有登录）。

现在，如果我们使用下载管理器登录页面下载。htm 将被加载，而不是 setup.exe。如果有什么办法解决这个问题？

谢谢， 维卢斯

# delphi-7 - 根据列名文本为 stringgrid 列着色

> ID：10532698
> 
> 赞同：1
> 
> 时间：2012-05-10T11:05:30.527
> 
> 标签：delphi-7, delphi-xe2, delphi-xe, tstringgrid, ownerdrawn

我正在这样做：

```
procedure TForm1.BitBtn1Click(Sender: TObject);
 var dtStart: TDateTime;
  I: Integer;
begin
  dtStart := DateTimePicker1.Date;
  for I := 0 to 7 do
    AdvStringGrid1.Cells[I+1, 0] := uppercase(FormatDateTime('DD/MM/YYYY     DDD', dtStart + I));
   end; 
```

当（示例）星期日（SUN）出现时，有没有办法为列着色？我希望 SUN 列（一直向下）以与其他列不同的颜色显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:24:41.030

您可以通过使用`OnDrawCell`事件来做到这一点（不要*设置*为`DefaultDraw`False）。这是一个常规的示例`TStringGrid`：

```
// Sample to populate the cells with the days of the week
procedure TForm1.FormShow(Sender: TObject);
var
  r, c: Integer;
begin
  StringGrid1.ColCount := 8;  // Ignore fixed column and row for this example
  StringGrid1.RowCount := 8;

  for c := 1 to StringGrid1.ColCount - 1 do
    for r := 1 to StringGrid1.RowCount - 1 do
      StringGrid1.Cells[c, r] := FormatSettings.ShortDayNames[c];
end;

// Assign this to the StringGrid's OnDrawCell using the Object Inspector 
// Events tab.
procedure TForm1.StringGrid1DrawCell(Sender: TObject; ACol, ARow: Integer;
  Rect: TRect; State: TGridDrawState);
var
  CellText: string;
begin
  if (ARow > 0) and (ACol > 0) then
  begin
    CellText := StringGrid1.Cells[ACol, ARow];
    if Pos('Sun', CellText) > 0 then
    begin
      StringGrid1.Canvas.Brush.Color := clRed;
      StringGrid1.Canvas.FillRect(Rect);
    end
    else
      StringGrid1.Canvas.Brush.Color := clWindow;
  end;

  // The '+ 4' is from the VCL; it's hard-coded when themes are enabled. 
  // You should probably check the grid's DrawingStyle to see if it's 
  // gdsThemed, and adjust as needed. I leave that as an exercise for you.
  StringGrid1.Canvas.TextOut(Rect.Left + 4, Rect.Top + 4, CellText);
end; 
```

上面确切代码的示例输出：

![在此处输入图像描述](../Images/76ec3f8cfa9ce2e715548ff2cb450363.png)

这是第二个示例，它恰好输出您想要的内容（除了我没有将 SUN 转换为大写字母）：

```
procedure TForm1.FormShow(Sender: TObject);
var
  r, c: Integer;
begin
  StringGrid1.DefaultColWidth := 100;
  StringGrid1.ColCount := 8;
  StringGrid1.RowCount := 8;

  for c := 1 to StringGrid1.ColCount - 1 do
    for r := 1 to StringGrid1.RowCount - 1 do
      StringGrid1.Cells[c, r] := FormatDateTime('mm/dd/yyyy ddd', 
                                                Date() + c + r - 1);
end;

procedure TForm1.StringGrid1DrawCell(Sender: TObject; ACol, ARow: Integer;
  Rect: TRect; State: TGridDrawState);
var
  CellText: string;
begin
  if (ARow > 0) and (ACol > 0) then
  begin
    CellText := StringGrid1.Cells[ACol, ARow];
    if Pos('Sun', CellText) > 0 then
      StringGrid1.Canvas.Brush.Color := clRed
    else
      StringGrid1.Canvas.Brush.Color := clWindow;
    StringGrid1.Canvas.FillRect(Rect);
  end;
  StringGrid1.Canvas.TextOut(Rect.Left + 4, Rect.Top + 4, CellText);
end; 
```

这是匹配第二个样本的捕获：

![在此处输入图像描述](../Images/923d4a3b63e21105c4ebad0d60dfc39c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T17:03:43.633

使用 DrawCell 过程是可行的方法。此示例处理带有“Sun”的列可能位于任何列中的可能性。将 DefaultDrawing 保留为默认值 - true。

```
 procedure TForm1.StringGrid1DrawCell(Sender: TObject; ACol, ARow: Integer;
         Rect: TRect; State: TGridDrawState);
    begin
      with Sender as TStringGrid do
       if Pos('Sun', Cells[ACol, 0])>0 then begin
         Canvas.Brush.Color := clRed;
         Canvas.FillRect(Rect);
         Canvas.Font.Color := clwhite;
         Canvas.TextOut(Rect.Left + 2, Rect.Top + 2, Cells[ACol, ARow]);
       end;
      end; 
```

# sharepoint - 从数据表单 Web 部件的列表中提取数据

> ID：10532705
> 
> 赞同：0
> 
> 时间：2012-05-10T11:05:56.357
> 
> 标签：sharepoint, sharepoint-2010

由于有些荒谬的业务规则限制，这可能是我面临的问题的过于复杂的解决方案。

我有一个共享点站点，它应该是表单的中央存储库。所以我在文档库中有这些表单唯一的问题不是所有表单都坐在那里，一些 infopath 表单托管在其他地方，而一些“表单”实际上是其他网页。因此，我设置了一个带有表单名称的列表，以及一个存储该表单位置的 URL 的列（包括本地库中的表单）但是，sharepoint 对 255 个字符的 URL 列类型有一个可笑的限制，单行of text 具有相同的愚蠢限制，因此我将该列创建为多行文本字段。我需要超过 255 个字符，因为某些信息路径表单 URL 相当长。现在数据表单 Web 部件的数据源是列表。

```
<ul><a href="{@FormLocation}" target="_blank">
<xsl:value-of select="@Title" /></a></ul></td> 
```

该部分用于提取文本并将其格式化为超链接。@FormLocation 是带有文本 url 的列。@Title 是表单标题。

会发生什么是渲染的 HTML 填充了我想要的 url，但它以以下内容为前缀。

[http://MYSITESSANITISEDURL.za/en/prettysanitary/Documents/%3Cdiv%20class=%22ExternalClassDF5DF9081DE54EECB4500A4E7B5592A1%22%3E%3Cdiv%3E%3Ca%20href=%22](http://MYSITESSANITISEDURL.za/en/prettysanitary/Documents/%3Cdiv%20class=%22ExternalClassDF5DF9081DE54EECB4500A4E7B5592A1%22%3E%3Cdiv%3E%3Ca%20href=%22)

然后放置我需要的文本，然后加上后缀

```
</a></div></div> 
```

放入的前缀实际上是 Web 部件所在页面的位置。

有谁知道为什么

```
<a href="{@FormLocation}" target="_blank"> 
```

比@FormLocation 列中实际包含的内容更多？

我对sharepoint非常陌生，这里有5个sharepoint“大师”根本不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:02:08.137

我会使用 <xsl:copy-of select="*|@*" \> 检查该列的 XML 内容。然后您可能需要使用 xsl:attribute 和 xsl:value-of 转义/不转义 FormLocation 显示

# google-app-engine - 在 google appengine 数据存储中建立一种引用自身的模型？

> ID：10532706
> 
> 赞同：2
> 
> 时间：2012-05-10T11:05:58.587
> 
> 标签：google-app-engine, model, google-cloud-datastore

我有一个模型评论。我想实现一个用户可以评论评论的功能，我认为这是一个一对多的关系，你知道，一个评论可以有一些评论。然后我把

`comments = db.ReferenceProperty(Comments,collection_name="comments",required=False)`

进入我的评论模型，但它不起作用。

模型可以在 google appengine 数据存储中引用自身吗？还有其他提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:19:15.900

用于[`db.SelfReferenceProperty`](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses#SelfReferenceProperty)模拟对另一个同类实例的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T12:40:20.863

用于`db.ListProperty(db.Key)`将多个实体作为属性引用。

# selenium - 如何在弹出窗口中记录 selenium rc 脚本？

> ID：10532711
> 
> 赞同：0
> 
> 时间：2012-05-10T11:06:12.410
> 
> 标签：selenium, selenium-rc

我的网站正在弹出窗口中打开，因此我的所有网站功能都在同一个窗口中。但我无法录制 Selenium RC 脚本，因为它没有弹出窗口。请帮助我，我如何记录它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:26:39.777

Selenium IDE 不会自动处理这些，您必须手动插入命令。

有关详细信息，请参阅[此页面](http://wiki.openqa.org/display/SEL/Selenium+Core+FAQ#SeleniumCoreFAQ-HowdoIworkwithapopupwindow%3F)。或者这个问题：[如何使用 selenium IDE 记录弹出窗口](https://stackoverflow.com/questions/2092149/how-to-record-popup-windows-with-selenium-ide)？

* * *

**编辑**-对不起，我误解了您的“记录”一词。

使用[`selenium.selectPopUp()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#selectPopUp%28java.lang.String%29)相同的或更强大的版本：[`selenium.selectWindow()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#selectWindow%28java.lang.String%29).

两者都可能除了[selenium.waitForPopUp()](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#waitForPopUp%28java.lang.String,%20java.lang.String%29)

# com - COM 组件打开对话框 - 如何在 ASP Classic 中处理

> ID：10532716
> 
> 赞同：1
> 
> 时间：2012-05-10T11:06:31.303
> 
> 标签：com, asp-classic, event-handling

我正在尝试复制同事在 VBA 环境中开发的一种方法（用于验证我们 ERP 系统的用户），并在现有的 ASP Classic 应用程序中实现它。

ERP 供应商为其应用程序提供了 COM Provider。我们提供用户的 ERP 凭证，并使用该组件来确认它们是否有效。

我*以为*我在遵循同事的方法，当我提供有效凭据时它确实有效，但是当我提供无效凭据时，它会锁定应用程序。

深入挖掘，如果凭证有效，则方法调用将返回一个值并按预期​​继续执行。但如果凭据错误，则会出现一个对话框。我的同事将此事件困在他的 VBA 应用程序中，自动取消对话框，将控制权返回给原始调用函数。

VBA 代码示例：

```
Private WithEvents m_oServer As Server

Private Sub m_oServer_RequestCredentials(Identification As String, Password As String, Cancel As Boolean)
   'Dialog will appear unless we cancel it
   Cancel = True

End Sub

Public Function Check_Logon_Credentials() As Boolean
'starts here   
   If m_oServer.Invoke("ClientApplication", "IdentifyCurrentUser", m_oResult, sibtRecord) Then
      Check_Logon_Credentials = True
   Else
      Check_Logon_Credentials = False
   End If

   'Do more stuff

End Function 
```

看来 m_oServer_RequestCredentials 是组件公开的事件处理程序，VBA 能够拦截，取消对话框。

问题是如何在我的 ASP 应用程序中复制它 - 是否有类似的方法来创建事件处理程序（可以取消对话框）？

或者我是否必须将对该组件的调用包装在另一个*可以*拦截对话框的组件中？

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T09:06:47.577

您无法使用纯服务器端 asp 经典代码处理事件。您需要使用客户端 VBScript 处理这些类型的事件，但不幸的是客户端 VBScript 仅适用于 Internet Explorer。这是[客户端 VBScript](http://www.w3schools.com/vbscript/)的示例代码：

```
<script language="VBScript">
    function mybutton_OnClick()
        answer = MsgBox("2+2=4?",vbYesNo,"Math Test")
        if answer=vbYes then
            MsgBox "Congratulations!",vbOkOnly+vbInformation,"True!" 
        else
            MsgBox "Go learn Math!",vbOkOnly+vbCritical,"Wrong!" 
        end if
    end function
</script>
<input type="button" value="Math Test" name="mybutton"> 
```

您可以复制上面的代码并将其粘贴到记事本中，并保存为“.html”文件，然后在 IE 中打开它。

# mysql - Mysql 多个 COUNT 并加入

> ID：10532717
> 
> 赞同：0
> 
> 时间：2012-05-10T11:06:35.690
> 
> 标签：mysql, sql, join, count

我有表“树”。

我有查询：`SELECT * FROM`tree `WHERE`pid`=10` 此查询返回 10 个项目。

我想得到类似的结果：

```
id | pid | title | subElements
11 | 10  | t 1   | 12
12 | 10  | t 2   | 16
13 | 10  | t 3   | 0
... 
```

如何构建连接查询来计算这 10 个项目的子项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:09:32.940

试试这个：

```
SELECT t1.id, t1.pid, t1.title , count(t2) as subElements FROM tree as t1 
LEFT JOIN tree as t2 ON t2.pid = t1.id
WHERE t1.pid=10
GROUP BY t1.id, t1.pid, t1.title 
```

# android - 如何在android中计算丢包？

> ID：10532723
> 
> 赞同：0
> 
> 时间：2012-05-10T11:06:58.947
> 
> 标签：android, api, network-programming, packet

我们如何计算所有网络或计算android中的特定网络丢包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:50:07.980

为了扩展 Robert 的答案，UDP 是一种数据报尽力传送协议，没有任何会话、按顺序传送或错误检测的概念。如果您想要错误检测，您可能最终会实现大部分 TCP（嗯，至少是序列号、校验和和确认）。

幸运的是，对于 TCP，内核会跟踪详细的统计信息。标准`ip`实用程序在这里应该有所帮助。在我的 SGS2 上，该实用程序是完整的，而不是像`ifconfig`.

示例用法：

```
root@android:/etc # ip -s -s link
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 16436 qdisc noqueue state UNKNOWN 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    RX: bytes  packets  errors  dropped overrun mcast   
    23692      410      0       0       0       0      
    RX errors: length  crc     frame   fifo    missed
               0        0       0       0       0      
    TX: bytes  packets  errors  dropped carrier collsns 
    23692      410      0       0       0       0      
    TX errors: aborted fifo    window  heartbeat
               0        0       0       0      
2: gannet0: <BROADCAST,MULTICAST,NOARP,UP,LOWER_UP> mtu 1000 qdisc pfifo_fast state UNKNOWN qlen 1000
    link/ether 72:e0:e5:0a:dc:d6 brd ff:ff:ff:ff:ff:ff
    RX: bytes  packets  errors  dropped overrun mcast   
    0          0        0       0       0       0      
    RX errors: length  crc     frame   fifo    missed
               0        0       0       0       0      
    TX: bytes  packets  errors  dropped carrier collsns 
    0          0        0       0       0       0      
    TX errors: aborted fifo    window  heartbeat
               0        0       0       0      
3: sit0: <NOARP,UP,LOWER_UP> mtu 1480 qdisc noqueue state UNKNOWN 
    link/sit 0.0.0.0 brd 0.0.0.0
    RX: bytes  packets  errors  dropped overrun mcast   
    0          0        0       0       0       0      
    RX errors: length  crc     frame   fifo    missed
               0        0       0       0       0      
    TX: bytes  packets  errors  dropped carrier collsns 
    0          0        59      0       0       0      
    TX errors: aborted fifo    window  heartbeat
               0        0       0       0      
4: ip6tnl0: <NOARP,UP,LOWER_UP> mtu 1452 qdisc noqueue state UNKNOWN 
    link/tunnel6 :: brd ::
    RX: bytes  packets  errors  dropped overrun mcast   
    0          0        0       0       0       0      
    RX errors: length  crc     frame   fifo    missed
               0        0       0       0       0      
    TX: bytes  packets  errors  dropped carrier collsns 
    0          0        62      62      0       0      
    TX errors: aborted fifo    window  heartbeat
               0        0       0       0      
5: rmnet0: <POINTOPOINT,MULTICAST,NOARP> mtu 1500 qdisc pfifo_fast state DOWN qlen 1000
    link/ppp 
    RX: bytes  packets  errors  dropped overrun mcast   
    1410177    2037     0       0       0       0      
    RX errors: length  crc     frame   fifo    missed
               0        0       0       0       0      
    TX: bytes  packets  errors  dropped carrier collsns 
    199870     1831     0       0       0       0      
    TX errors: aborted fifo    window  heartbeat
               0        0       0       0      
6: rmnet1: <POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UNKNOWN qlen 1000
    link/ppp 
    RX: bytes  packets  errors  dropped overrun mcast   
    0          0        0       0       0       0      
    RX errors: length  crc     frame   fifo    missed
               0        0       0       0       0      
    TX: bytes  packets  errors  dropped carrier collsns 
    0          0        0       0       0       0      
    TX errors: aborted fifo    window  heartbeat
               0        0       0       0      
7: rmnet2: <POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UNKNOWN qlen 1000
    link/ppp 
    RX: bytes  packets  errors  dropped overrun mcast   
    0          0        0       0       0       0      
    RX errors: length  crc     frame   fifo    missed
               0        0       0       0       0      
    TX: bytes  packets  errors  dropped carrier collsns 
    0          0        0       0       0       0      
    TX errors: aborted fifo    window  heartbeat
               0        0       0       0 
```

我的手机已经植根，但这绝对不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:52:27.053

对于 TCP，可能有可能在 Linux 级别上获取值，但在 Java/Android 级别上却不行。

对于 UDP，这是不可能的，因为没有包含可用于检测数据包丢失的数据。如果要在 UDP 级别计算数据丢失，则必须实现自己的基于 UDP 的协议，并包括例如数据包计数器。但这将只允许您为自己的协议计算数据包丢失，而不是在一般级别上。

# clojure - 应用地图组合 - 不像我预期的那样工作

> ID：10532730
> 
> 赞同：2
> 
> 时间：2012-05-10T11:07:36.563
> 
> 标签：clojure, mapreduce

在 repl 中添加跨向量按预期工作

```
> (map + [1 2 3] [1 2 3])
(2 4 6) 
```

但是我所拥有的是向量的向量，当我尝试时

```
> (apply #(map + %) [[1 2 3] [1 2 3]])
ArityException Wrong number of args (2) passed to: user$eval14$fn clojure.lang.AFn.throwArity (AFn.java:437) 
```

如何在向量的向量中添加相应的数字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T11:41:41.787

这只是您的第一个示例的一步：

```
user> (apply map + [[1 2 3] [1 2 3]])
(2 4 6) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:48:42.513

阅读器宏方法可以使用：

```
(user=> (apply #(map + % %2) [[1 2 3] [1 2 3]])
(2 4 6) 
```

它要求您知道向量中有多少个向量，并指定每个参数。如果“应用”方法适合您，它将更加灵活，例如：

```
user=> (apply map + [[1 2 3] [1 2 3] [1 2 3]])
(3 6 9) 
```

# java - ImageView 启动活动的大小

> ID：10532732
> 
> 赞同：0
> 
> 时间：2012-05-10T11:07:48.370
> 
> 标签：java, android, imageview

我想`ImageView`从我的应用程序开始就找到一个的大小。

对于我的应用程序，我想做与谷歌地图相同的事情，即显示图像，并在该图像上放置指向地点的指针。`X%`通过包含图像并与图像相关的 XML 文件来恢复指针`Y%`。

要将指针放在我的图像上，我会这样做：

```
public void onCreate (Bundle savedInstanceState) {
    super.onCreate (savedInstanceState);

    // more code...

    float maxX = imageViewCarte.getWidth();
    maxY imageViewCarte.getHeight float = ();
} 
```

问题是这些值是`null`在应用程序的开头。所以，我试着做同样的事情`onStart()`，`onResume()`但无济于事，我总是得到`0`！但是，如果我在类似的事件中做同样的事情`onClick()`，它会正确返回一个真实值。

有什么方法可以在应用程序启动时获得这个大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:09:56.610

您应该将此方法添加到您的活动中，

```
@Override 
public void onWindowFocusChanged(boolean hasFocus) 
{ 
     super.onWindowFocusChanged(hasFocus);
     Log.i("Height",imageViewCarte.getWidth ()+""); 
} 
```

在 onCreate 期间，您的视图已膨胀但尚未绘制。所以这里的这个方法在绘图过程之后被调用，因此你将能够通过覆盖这个方法来实现你的目标..

# java - 未定义变量的 BaseX XQJ API 错误，而变量已定义

> ID：10532735
> 
> 赞同：2
> 
> 时间：2012-05-10T11:07:55.780
> 
> 标签：java, xml, xquery, basex, xqj

我正在使用 BaseX XQJ API 在我的 java 应用程序中对 XML 文件执行 xquery 查询。我构建的以下 xquery 很好地生成了我想要的输出：

```
let $doc := doc("eprints")
for $i in distinct-values($doc//issn)
let $jn := $doc//paper[issn = $i]/publication
where (count(distinct-values($jn)) > 1)
return <issn num="{$i}">"{$jn}"</issn> 
```

在通过在 BaseX 应用程序中测试这个查询来说服自己这个查询有效之后，我在 java 代码中实现了这个查询。

```
public static void main(String[] args) throws XQException{
    XQDataSource ds = new BaseXXQDataSource();
    ds.setProperty("serverName", "localhost");
    ds.setProperty("port", "1984");
    ds.setProperty("user", "xxxx");
    ds.setProperty("password", "xxxxx");
    ds.setProperty("databaseName", "eprints");

    XQConnection conn = ds.getConnection("admin", "admin");

    XQExpression xqe = conn.createExpression();
    XQResultSequence result = xqe.executeQuery("let $doc := doc(\"eprints\")"+
                                            "for $i in distinct-values($doc//issn)"+
                                            "let $jn := $doc//paper[issn = $i]/publication"+
                                            "where (count(distinct-values($jn)) > 1)"+
                                            "return <issn num='{$i}'>'{jn}'</issn>"

                                            ); 
} 
```

但是，此代码导致错误，指出找不到 $jn 变量：线程“main”中的异常 javax.xml.xquery.XQQueryException：[XPST0008]：未定义的变量 $jn。查看查询时，可以看到 $jn 实际上是在 for 语句的 let 语句中定义的。

但是，当我在使用 $jn 的位置直接插入分配给 $jn 的表达式时，代码确实可以正常工作：

```
public static void main(String[] args) throws XQException{
    XQDataSource ds = new BaseXXQDataSource();
    ds.setProperty("serverName", "localhost");
    ds.setProperty("port", "1984");
    ds.setProperty("user", "admin");
    ds.setProperty("password", "admin");
    ds.setProperty("databaseName", "eprints");

    XQConnection conn = ds.getConnection("admin", "admin");

    XQExpression xqe = conn.createExpression();
    XQResultSequence result = xqe.executeQuery("let $doc := doc(\"eprints\")"+
                                            "for $i in distinct-values($doc//issn)"+
                                            "where (count(distinct-values($doc//paper[issn = $i]/publication)) > 1)"+
                                            "return <issn num='{$i}'>'{$doc//paper[issn = $i]/publication}'</issn>"
                                            );    
} 
```

BaseX XQJ API 似乎无法处理在 for 语句中有 let 语句的查询。有谁知道错误的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:23:30.890

`publication`原始查询之间和中没有空格`where`（由字符串连接伪装），因此这两行都被解释为轴路径和动态函数应用程序：

```
let $jn := $doc//paper[issn = $i]/publicationwhere (count(distinct-values($jn)) > 1) 
```

这会产生错误，因为不允许递归变量定义。只需在 之后插入一个空格`publication`，它应该可以正常运行。

# linux - 为什么 Linux rpm 是特定于操作系统的

> ID：10532742
> 
> 赞同：0
> 
> 时间：2012-05-10T11:08:19.367
> 
> 标签：linux, rpm, rpmbuild, binary-compatibility

假设我有一个为 SUSE Linux Enterprise Server(SLES) 构建的 rpm，我想在 Red Hat Enterprise Linux 中安装相同的 rpm。

*   我会在这里遇到任何架构依赖问题吗？
*   在另一个操作系统中安装为一个操作系统构建的 rpm 的主要问题是什么？
*   即使它已安装，之后我可能会遇到任何功能问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T11:18:03.037

RPM 依赖于操作系统，因为不同的 Linux 发行版具有相同软件包的不同版本，并且 RPM 可能依赖于其中一个的特定版本。此外，由于某些发行版将这些软件包安装在不同的文件夹中，而 Suse 可能选择在 /usr/bin 上安装一个软件，而 RPM 可能希望该软件位于该文件夹中，RedHat 可能选择在 / 上安装相同的软件usr/本地/bin。

您绝对可以尝试安装 RPM，它可能开箱即用就可以很好地工作。如果没有，您可以卸载它。如果可以，请始终尝试坚持使用特定于操作系统的版本或从源代码构建。

# apache - Apache Log 说：拒绝 - 但它有效（htaccess）

> ID：10532746
> 
> 赞同：0
> 
> 时间：2012-05-10T11:08:24.547
> 
> 标签：apache, .htaccess

我正在玩一点 htaccess 来了解 apache 和 xampp。

我为整个 / 目录配置了“AllowOverride All”，并且文件夹中的 .htaccess 文件正常工作。

我被排除在“私人”文件夹之外，我可以访问“公共”文件夹。但是日志说的完全不同。

例如基本身份验证 .htaccess：

```
# .htaccess for password
AuthType Basic
AuthName "password Folder is for password Folders"
AuthUserFile C:/xampp/htdocs/password/.htusers
Require valid-user 
```

我可以使用正确的密码登录。但是日志说它被拒绝了！？

阿帕奇错误日志：

> [2012 年 5 月 10 日星期四 13:04:05] [错误] [客户端 ::1] 客户端被服务器配置拒绝：C:/xampp/htdocs/password/.htaccess [2012 年 5 月 10 日星期四 13:04:05] [错误] [client ::1] 客户端被服务器配置拒绝：C:/xampp/htdocs/password/.htusers

为什么？如我所见，它可以正常工作-但是为什么日志告诉我一些完全不同的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:01:17.880

问题的解决方案，也可能是 apache 或 xampp 中的日志记录错误（我不知道），是将文件放入目录中。如果发生这种情况，错误消息就会消失。

# firefox - Firefox 在调用“onunload”函数之前命中服务器

> ID：10532749
> 
> 赞同：0
> 
> 时间：2012-05-10T11:08:31.850
> 
> 标签：firefox, refresh, onunload

我有一个使用 asp.net mvc 运行的简单页面

当我仅在 FF 中单击 f5 或 ctrl + f5 时，服务器在调用“onunload”javascript 函数之前被命中。它在 IE 中按预期工作。有什么诀窍吗？

行为是这样的：1-调用通知javascript函数，2-调用服务器端代码并​​刷新页面3-调用onunload javascript函数。

我期望 3.step 像 IE 一样在第 2 步之前运行。

```
 <head runat="server">
    <title>Serdar</title>
    <script src="<%=Url.ContentV("~/Scripts/JQuery/jquery-1.6.4.js")%>" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {

            window.onbeforeunload = NotifyClosing;
            window.onunload = UnLockDraftOrder;
        });

        function NotifyClosing() {
            alert('closing');
        }

        function UnLockDraftOrder() {

            alert('unlock order');
        }
    </script>
</head>
<body>
    <div>
    serdar
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:36:22.040

浏览器实际上并不知道页面是否会被卸载，直到它到达服务器。例如，如果下一个正在加载的内容将在帮助应用程序中呈现，而不是在浏览器中，则当前页面将不会被卸载，并且根本不应该有卸载事件。

# linux - Bash 脚本 + 创建到网站的符号链接

> ID：10532754
> 
> 赞同：-4
> 
> 时间：2012-05-10T11:09:01.490
> 
> 标签：linux, bash, batch-file, linux-mint

我有以下**批处理**脚本：

```
echo [InternetShortcut] > "%basepath%\files\new\link.URL"
echo URL=http://google.com >> "%basepath%\files\new\link.URL"
echo IconFile=http://google.com/favicon.ico >> "%basepath%\files\new\link.URL"
echo IconIndex=0 >> "%basepath%\files\new\link.URL" 
```

在 Windows 7 中，这会在桌面上创建一个符号链接，单击它会在网络浏览器中打开 Google。

我试图用一个小的 bash 脚本来实现完全相同的东西，但是这个：

```
ln -s http://google.com ~/Arbeitsfläche/new 
```

不起作用，但同时它是我能想到的唯一方法。

ps 如果确实重要：bash 脚本应该可以在 Debian 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:33:33.617

您应该能够创建一个`.desktop`文件（请参阅[Desktop Entry 规范](http://standards.freedesktop.org/desktop-entry-spec/desktop-entry-spec-1.0.html)），这是一个示例：

```
[Desktop Entry]
Version=1.0
Type=Link
URL=http://www.google.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:52:10.603

**linux 中的ln**用于在 linux 中创建名称别名。假设您有文件 /somelocation/X 和要引用的相同文件，例如 /someotherlocation/Y，那么使用**ln**。

你需要的是启动器。

```
Right Click on the linux desktop, select "Create Launcher"

Use the Following Settings to make a link to google:

Type: Location
Name: Google
Location: http://www.google.com 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-02T03:58:13.993

创建 bash 脚本文件（~/bin/urlfile）：

```
#!/bin/bash

launcher="$(pwd)/$1.desktop";

#echo -e "#!/usr/bin/env xdg-open\n\n[Desktop Entry]\nVersion=1.0\nName=$1\nComment=Open Link (URL): $2\nComment[ru_RU]=Открыть ссылку (URL): $2\nIcon=applications-internet\nURL=$2\nType=Link" | tee "$launcher"

echo -e "#!/usr/bin/env xdg-open\n
[Desktop Entry]
Version=1.0
Name=$1
Comment=Open Link (URL): $2
Comment[ru_RU]=Открыть ссылку (URL): $2
Icon=applications-internet
URL=$2
Type=Link" | tee "$launcher" &&

chmod +x "$launcher" 
```

＆ 跑：

```
urlfile 'Bash Script + Create Symlink to Website' 'http://stackoverflow.com/questions/10532754/bash-script-create-symlink-to-website' 
```

您将在主目录中获得一个文件。

# java - 获取 SelectedKeys 和切换操作的问题

> ID：10532757
> 
> 赞同：0
> 
> 时间：2012-05-10T11:09:21.883
> 
> 标签：java, sockets, nio

我创建了这个异步客户端套接字，它连接到服务器并始终保持连接打开，并在与服务器断开连接时自动重新连接。

无论如何，我的问题是：在初始化连接时，我将操作注册为连接操作（`SelectionKey.OP_Connect`）。

现在，当我在选择器的选定键之间进行迭代时，我期望它进入控制语句 isconnectable 并更改控制语句中看到的操作。

不幸的是，我没有得到任何选定的键。我哪里会出错？

```
 import java.net.InetAddress;
    import java.net.InetSocketAddress;
    import java.nio.ByteBuffer;
    import java.nio.channels.SelectionKey;
    import java.nio.channels.Selector;
    import java.nio.channels.SocketChannel;
    import java.util.Iterator;
    import java.util.Set;
    import java.util.logging.Level;
    import java.util.logging.Logger;

    /*
     * @author kewin
     */
    public class clientEvent implements Runnable{
        private static volatile boolean connected=false;
        private SocketChannel channel;
        private Selector selector;
        private ByteBuffer readBuffer = ByteBuffer.allocate(8192);
        private QueueData Qdata;
        private SelectionKey selectKey;

        private  void initiateConnection() {
    try {
    selector= Selector.open();//initializes the Selector Thread
    channel = SocketChannel.open();
    channel.configureBlocking(false);
    channel.connect(new InetSocketAddress(InetAddress.getByName("127.0.0.1"),2000));
    Thread.sleep(50);//Sleeps for a few Seconds to allow decent connection completion
    channel.register(selector,SelectionKey.OP_CONNECT);//Registers the channel with the a selector and a selection key
    if(channel.finishConnect())/*checks whether the connection is finished*/{
        channel.register(selector,SelectionKey.OP_READ);//Registers the channel with the a selector and a selection key
        connected=true;}
   } catch(Exception ex){connected=false;} 
 }

        private void ConnectAndMonitor(){
           while(true){
            try {
               readBuffer.clear();
               channel.read(readBuffer);
            } catch (Exception ex) {
                    connected=false
                try {
                    channel.close()
                    selector.close();
                } catch (Exception e) {         
                }
                   if(!connected){
                    initiateConnection();
                    connected=true;
               }
            }
           }
        }

        @Override
        public void run() {
            try{
                new Thread(){@Override public void run(){ConnectAndMonitor()}}.start(); 

                while(true){
                   if(!connected){
                       System.out.println("not connected");
                       Thread.sleep(500);
                   }
                   else{
                        selector.selectNow();
                                       Set Keys=selector.keys();
                                       Iterator iterator =Keys.iterator();
                        while(iterator.hasNext()){
                            SelectionKey key=(SelectionKey)iterator.next();

                            if(key.isConnectable()){
                                channel.register(selector,SelectionKey.OP_READ);
                                System.out.println("Connectable");
                                break;
                            }

                            if(key.isReadable()){
                                channel.register(selector,SelectionKey.OP_WRITE);
                                System.out.println("Readable");
                                break;
                            }

                            if(key.isWritable()){
                                channel.register(selector,SelectionKey.OP_CONNECT);
                                System.out.println("Writable");
                                break;
                            }
                            System.out.println("<<<<<<<<<>>>>>>>>>>>>");

                       }

                        Thread.sleep(1000);
                   }
                }
            }
            catch(Exception ex){
            }
        }

        public static void main(String[] args){
            new Thread(new clientEvent()).start();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:17:17.710

如果您在阻塞模式下进行连接，它会在方法调用期间阻塞并完成，因此如果您随后将其注册为 OP_CONNECT，`isConnectable()`则永远不会为真。

因此，如果您必须有非阻塞连接，而您的代码*已经没有了，*请先将通道置于非阻塞模式，发出`connect()`, 注册 OP_CONNECT，然后当它触发*并且*`finishConnect() 返回 true 时，取消注册 OP_CONNECT并注册其他东西，或者作为客户更可能只是开始发送请求。

编辑：您编辑的代码在以下方面不正确：

1.  删除`Thread.sleep()`.
2.  将`finishConnect()`调用移至`isConnected()`选择循环的情况。
3.  `OP_CONNECT/isConnectable()`触发时，取消*注册*OP_CONNECT。
4.  删除`if(!connected)`测试。

大部分我已经在上面说过了。目前，您正在 (a) 给连接时间来完成，(b) 完成它，(c) 在选择循环中等待它完成，(d)`OP_CONNECT`即使您不再对它感兴趣，也永远不会取消注册, (e) 如果没有连接，则永远不要执行 select()，以及 (f) 尝试在 select() 循环中查找已完成的连接。这没有任何意义。

另一方面，如果您不介意等待连接在您创建它的地方内联完成，那为什么要在非阻塞模式下进行呢？在*阻塞*模式下进行，`configureBlocking(false),`然后注册并完全`OP_READ/OP_WRITE`忘记`OP_CONNECT`, `isConnectable()`，等等`finishConnect()`。

# compiler-construction - 如何使用 yyerror 来了解更多关于解析错误的信息

> ID：10532759
> 
> 赞同：2
> 
> 时间：2012-05-10T11:09:30.603
> 
> 标签：compiler-construction, bison, yacc

所以我写了我想要的所有语法，一切都很顺利。当遇到语法时，我绝对不会采取任何行动。

这是我的 yyerror 函数的定义

```
int yyerror (const char *s)
{                                                     
    printf("parser error %s \n ",s);
    return 0;
} 
```

好吧，如果我想获得有关我的解析器遇到的错误的更多信息，我已经阅读了我需要添加 %error-verbose 的地方；当我尝试添加它时，我收到了此错误消息

> 错误：无法识别：%error_verbose

考虑到我正在使用 Flex、Bison 并将它们与 VS2010 连接
**编辑：**即使错误提到了 error_verbose，我也确保我传递的是错误详细信息，使用破折号而不是下划线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:16:29.210

它是`%error-verbose`，带有破折号，但您的错误消息显示的是下划线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:22:49.313

奇怪的是，当我在 Linux 的最新野牛版本上尝试 %error-verbose 时，它​​工作得很好，但不适用于 Windows 版本。
不确定这是否是我在 Windows 上使用的版本中的错误，或者它只是不支持的功能。

# php - 如何使用 jQuery 发布数据

> ID：10532765
> 
> 赞同：0
> 
> 时间：2012-05-10T11:09:37.700
> 
> 标签：php, javascript, jquery, mysql

我正在使用 PHP 向 db 提交一个非常简单的数据。在我的 page.php 上，我有一个链接，通过单击它我在数据库中插入它的 id 和一些其他数据。例如：

```
echo "<a href='".$base_url."?submit=$page_id'> Submit it</a>"; 
```

它生成像 page/test-page/?submit=12 这样的 url

在页面顶部，我使用 $_GET 获取页面 id，并通过以下方式将其插入数据库：

```
if (isset($_GET["submit"])) {
        $page_id = $_GET['submit'] //yes, its not secure.       
        //insert in db.     
        //get db success/error msg in $db_msg       
    } 
```

如何在不刷新页面的情况下提交数据并获取数据库成功或失败消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T11:12:37.507

查看有关 Ajax 函数的 JQuery 文档：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

你会做类似的事情

```
 $.ajax({
  type: 'POST',
  url: page.php,
  data: submit=$page_id,
  success: function(){print("success");}
}); 
```

顺便说一句：使用 post 比 get 更好，它看起来更干净。（至少在我看来）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:20:11.503

您需要根据 CyrillC 的回答使用 ajax 方法。这是官方文档[ajax jquery](http://api.jquery.com/jQuery.ajax/)

（有一个使用 POST 方法的简码）

```
$.post.({ etc 
```

post 方法从浏览器中隐藏您的数据（get 将其放入查询字符串中），因此它更干净，但也更好的安全性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:17:08.353

```
<a href="#" onclick="$.post(
    '<?php echo $base_url ?>',
    { submit= '<?php echo $page_id ?>'},
    callback_function(data)
)">Submit it</a> 
```

向php发送一个post请求，并用javascript处理消息（“数据”）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T12:03:54.067

您需要将 AJAX 与 jQuery 一起使用。对于初学者，看看函数[load](http://www.jquery-tutorial.net/ajax/the-load-method/)， get 和 post [here](http://www.jquery-tutorial.net/ajax/the-get-and-post-methods/)。get 和 post 方法用于将数据提交到服务器端脚本，因为您在 PHP 中使用 GET 方法，请使用 AJAX 的 GET

# wordpress - 在不修改核心文件的情况下覆盖 wordpress 插件的分类注册设置

> ID：10532766
> 
> 赞同：0
> 
> 时间：2012-05-10T11:09:44.640
> 
> 标签：wordpress, function, taxonomy

我正在为 wordpress 上的商店使用 woocommerce 插件 - woocommerce 为您注册了许多分类法。

我想将 show_in_nav_menus 设置更改为 true，但我听说修改核心文件的形式不好。

有没有办法在我的主题的functions.php中覆盖它 - 它下面代码的最后一个参数我需要更改为true

```
register_post_type( "product",
        array(
            'labels' => array(
                    'name'                  => __( 'Products', 'woocommerce' ),
                    'singular_name'         => __( 'Product', 'woocommerce' ),
                    'add_new'               => __( 'Add Product', 'woocommerce' ),
                    'add_new_item'          => __( 'Add New Product', 'woocommerce' ),
                    'edit'                  => __( 'Edit', 'woocommerce' ),
                    'edit_item'             => __( 'Edit Product', 'woocommerce' ),
                    'new_item'              => __( 'New Product', 'woocommerce' ),
                    'view'                  => __( 'View Product', 'woocommerce' ),
                    'view_item'             => __( 'View Product', 'woocommerce' ),
                    'search_items'          => __( 'Search Products', 'woocommerce' ),
                    'not_found'             => __( 'No Products found', 'woocommerce' ),
                    'not_found_in_trash'    => __( 'No Products found in trash', 'woocommerce' ),
                    'parent'                => __( 'Parent Product', 'woocommerce' )
                ),
            'description'           => __( 'This is where you can add new products to your store.', 'woocommerce' ),
            'public'                => true,
            'show_ui'               => true,
            'capability_type'       => 'post',
            'capabilities' => array(
                'publish_posts'         => 'manage_woocommerce_products',
                'edit_posts'            => 'manage_woocommerce_products',
                'edit_others_posts'     => 'manage_woocommerce_products',
                'delete_posts'          => 'manage_woocommerce_products',
                'delete_others_posts'   => 'manage_woocommerce_products',
                'read_private_posts'    => 'manage_woocommerce_products',
                'edit_post'             => 'manage_woocommerce_products',
                'delete_post'           => 'manage_woocommerce_products',
                'read_post'             => 'manage_woocommerce_products'
            ),
            'publicly_queryable'    => true,
            'exclude_from_search'   => false,
            'hierarchical'          => false, // Hierarcal causes memory issues - WP loads all records!
            'rewrite'               => array( 'slug' => $product_base, 'with_front' => false, 'feeds' => $base_slug ),
            'query_var'             => true,            
            'supports'              => array( 'title', 'editor', 'excerpt', 'thumbnail', 'comments', 'custom-fields' ),
            'has_archive'           => $base_slug,
            'show_in_nav_menus'     => true
        )
    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:19:15.380

你可以把它放在你的functions.php文件中，它会覆盖插件中的那个。请小心从 init 操作中调用它：

```
add_action( 'init', 'register_my_post_type' );
function register_my_post_type() {
   /* here */
} 
```

并确保这将在您的插件初始化操作之后运行。也许它需要添加一个较低的优先级：

```
add_action( 'init', 'register_my_post_type', 1000 );
// 1000 -> lower priority, will run after the plugin init action 
```

# php - Kohana 3 : $_GET 显示 URI 路由（控制器/方法）而不是 $_GET 参数

> ID：10532769
> 
> 赞同：0
> 
> 时间：2012-05-10T11:09:50.323
> 
> 标签：php, kohana, kohana-3

我在 /order/test

当我尝试 /order/test?lala=test&baba=test

```
public function action_test(){
echo var_dump($_GET);
} 
```

它应该在 var_dump() 中输出 lala=test&baba=test，但它给了我：

```
array(1) { ["order/test"]=> string(0) "" } 
```

为什么会这样？我怎样才能解决这个问题？

这是我的 htaccess：

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /

# Protect hidden files from being viewed
<Files .*>
    Order Deny,Allow
    Deny From All
</Files>

# Protect application and system files from being viewed
RewriteRule ^(?:application|modules|system)\b.* index.php/$0 [F,L]

# Allow any files or directories that exist to be displayed directly
RewriteCond ${REQUEST_URI} ^.+$
RewriteCond %{REQUEST_FILENAME} \.(gif|jpe?g|png|pdf)$ [OR]
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d [OR]
RewriteCond %{REQUEST_FILENAME} -l
RewriteRule ^ - [L]

# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php?$0 [PT,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:41:02.627

这就是我在原始 .htaccess 中的内容：

```
# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php/$0 [PT] 
```

也不要使用 $_GET，但是

```
$this->request->query() 
```

而不是 HMVC 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:15:39.710

将您的重写规则更改为

```
RewriteRule .* index.php?$0 [PT,L,QSA] 
```

# c - C - 二叉搜索树

> ID：10532775
> 
> 赞同：1
> 
> 时间：2012-05-10T11:10:23.940
> 
> 标签：c, binary-tree

在存储宠物名称和种类的现有二叉树中实现函数时，我有特定的困惑，首先我做了什么：

声明[tree.h]：

```
typedef struct item
{
    char petname[20];
    char petkind[20];
} Item;

#define MAXITEMS 10

typedef struct node
{
    Item item;
    struct node * left;    /* pointer to right branch  */
    struct node * right;   /* pointer to left branch   */
} Node;

typedef struct tree
{
    Node * root;           /* pointer to root of tree  */
    int size;              /* number of items in tree  */
} Tree;

void InitializeTree(Tree *ptree);

bool TreeIsEmpty(const Tree * ptree);

bool TreeIsFull(const Tree * ptree);

int TreeItemCount(const Tree * ptree);

bool AddItem(const Item * pi, Tree * ptree);

bool InTree(const Item * pi, const Tree * ptree);

bool DeleteItem(const Item * pi, Tree * ptree);

void Traverse (const Tree * ptree, void (* pfun)(Item item));

void DeleteAll(Tree * ptree); 
```

添加节点的功能：

```
typedef struct pair {
    Node * parent;
    Node * child;
} Pair;

bool AddItem(const Item * pi, Tree * ptree)
{
     Node * new_node;

     if(TreeIsFull(ptree))
     {
          fprintf(stderr,"Tree is full\n");
          return false;
     }

          if(SeekItem(pi,ptree).child!=NULL)
          {
               fprintf(stderr,"Attempted to add duplicate item\n");
               return false;
          }

     new_node=MakeNode(pi);

     if(new_node==NULL)
     {
          fprintf(stderr,"Couldn't create node\n");
          return false;
     }

     ptree->size++;

     if(ptree->root==NULL)
          ptree->root=new_node;
     else
          AddNode(new_node,ptree->root);

     return true;
}

static void AddNode(Node * new_node, Node * root)
{
     if((strcmp(new_node->item.petname, root->item.petname))==0)
     {
          if(root->same==NULL)
               root->same=new_node;
          else
               AddNode(new_node, root->same);
     }
     else
     {
          if(ToLeft(&new_node->item,&root->item))
          {
               if(root->left==NULL)
                    root->left=new_node;
               else
                    AddNode(new_node, root->left);
          }
          else if(ToRight(&new_node->item,&root->item))
          {
               if(root->right==NULL)
                    root->right=new_node;
               else
                    AddNode(new_node, root->right);
          }
          else
          {
               fprintf(stderr,"location error in AddNode()\n");
               exit(1);
          }
     }
}

static bool ToLeft(const Item * i1, const Item * i2)
{
     int comp;

     if((comp=strcmp(i1->petname,i2->petname))<0)
          return true;
     else if(comp==0)
          return true;
     else
          return false;
} 

static bool ToRight(const Item * i1, const Item * i2)
{
     int comp;

     if((comp=strcmp(i1->petname,i2->petname))>0)
          return true;
     else if(comp==0)
          return true;
     else
          return false;
}

static Node * MakeNode(const Item * pi)
{
     Node * new_node;

     new_node=(Node *) malloc(sizeof Node);

     if(new_node!=NULL)
     {
          new_node->item=*pi;
          new_node->left=NULL;
          new_node->right=NULL;
          new_node->same=NULL;
     }
     return new_node;
} 
```

（如果您需要更多代码，我会发布它，因为有更多功能）主要的困惑是我如何将所有具有相同名称（不同种类）的宠物添加到同一节点内的列表中，然后通过键入宠物名，同时检索他们的种类

原始任务： *修改宠物俱乐部程序，使所有同名宠物都存储在同一个节点的列表中。当用户选择寻找宠物时，程序应请求宠物名称，然后列出所有具有该名称的宠物（及其种类）。*

书中的建议：*

> 对于另一种可能的变化，请考虑 Nerfville 宠物俱乐部。该示例按名称和种类对树进行了排序，因此它可以将猫山姆放在一个节点中，将狗山姆放在另一个节点中，将山羊山姆放在第三个节点中。然而，你不可能有两只叫山姆的猫。另一种方法是仅按名称对树进行排序。单独进行该更改将只允许一个 Sam，无论种类如何，但您可以将 Item 定义为结构列表，而不是单个结构。Sally 第一次出现时，程序会创建一个新节点，然后创建一个新列表，然后将 Sally 和她的种类添加到列表中。下一个出现的 Sally 将被定向到同一节点并添加到列表中。

*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:29:16.040

您应该已经了解链表。将这些知识与您在这里拥有的树结合起来。将 Item 移动到链表中，让 Node 直接存储列表而不是 Item。

```
typedef struct itemlistElement
{
    Item item;
    struct itemlistElement* nextItem;    /* pointer to next item on list */
} ItemlistElement;

typedef struct node
{
    ItemlistElement* listOfItems; /* pointer to first element of a linked list of Item */
    struct node * left;    /* pointer to right branch  */
    struct node * right;   /* pointer to left branch   */
} Node; 
```

您可以弄清楚其余的 - 每次遍历树时，您都会有额外的步骤遍历列表。添加项目时，将有 2 种可能性：添加带有一个项目的新节点或将项目添加到现有节点中。这正是你的书所说的：

> (...) 然后您可以将 Item 定义为结构列表，而不是单个结构。Sally 第一次出现时，程序会创建一个新节点，然后创建一个新列表，然后将 Sally 和她的种类添加到列表中。下一个出现的 Sally 将被定向到同一节点并添加到列表中。

首先：创建列表并使其工作。先在一个单独的上练习`ItemlistElement*`（在树之外，你甚至可以在另一个程序中制作列表和列表遍历函数）。然后，修改您的程序以存储`Item`在列表中，但始终使用单元素列表。这应该很容易。最后一步是将它们结合在一起。这是编码最少的步骤，但最具挑战性。在打字之前做所有的思考。如果您感到困惑并且程序变得过于混乱，请在它们仍然工作时（树和链表）制作两个项目的副本以作为参考。

# android - 在 Windows 7 上为 NDK 8 构建独立工具链

> ID：10532778
> 
> 赞同：3
> 
> 时间：2012-05-10T11:10:34.983
> 
> 标签：android, android-ndk, mips, toolchain

> **可能重复：**
> [如何在 Windows 7 中构建 android 独立工具链](https://stackoverflow.com/questions/10527952/how-to-build-android-standalone-toolchain-in-windows-7)

我正在尝试按照“docs\STANDALONE-TOOLCHAIN.html”使用 ndk 8 为 mips 构建独立工具链，但是当我运行以下命令时

```
make-standalone-toolchain.sh --platform=android-14 --install-dir=/tmp/my-android-toolchain 
```

在命令提示符中我得到了诸如找不到命令等错误。错误详细信息如下：

```
./../core/ndk-common.sh: line 21: basename: command not found
./../core/ndk-common.sh: line 324: expr: command not found
./dev-defaults.sh: line 34: head: command not found
./prebuilt-common.sh: line 186: expr: command not found
./prebuilt-common.sh: line 187: expr: command not found
./prebuilt-common.sh: line 159: name: No such file or directory
./prebuilt-common.sh: line 159: OPTIONS_abstract_Specify: command not found
./prebuilt-common.sh: line 186: expr: command not found
./prebuilt-common.sh: line 187: expr: command not found
./prebuilt-common.sh: line 159: name: No such file or directory
./prebuilt-common.sh: line 159: OPTIONS_abstract_Specify: command not found
./prebuilt-common.sh: line 186: expr: command not found
./prebuilt-common.sh: line 187: expr: command not found
./prebuilt-common.sh: line 159: path: No such file or directory
./prebuilt-common.sh: line 159: path: No such file or directory
./prebuilt-common.sh: line 159: OPTIONS_default_.=: command not found
./prebuilt-common.sh: line 186: expr: command not found
./prebuilt-common.sh: line 187: expr: command not found
./prebuilt-common.sh: line 159: name: No such file or directory
./prebuilt-common.sh: line 159: OPTIONS_abstract_Specify: command not found
./prebuilt-common.sh: line 159: OPTIONS_default_Workstation: command not found
./prebuilt-common.sh: line 186: expr: command not found
./prebuilt-common.sh: line 187: expr: command not found
./prebuilt-common.sh: line 159: path: No such file or directory
./prebuilt-common.sh: line 159: path: No such file or directory
./prebuilt-common.sh: line 159: OPTIONS_default_/tmp/ndk-=: No such file or dire
ctory
./prebuilt-common.sh: line 186: expr: command not found
./prebuilt-common.sh: line 187: expr: command not found
./prebuilt-common.sh: line 159: path: No such file or directory
./prebuilt-common.sh: eval: line 159: unexpected EOF while looking for matching
`''
./prebuilt-common.sh: eval: line 160: syntax error: unexpected end of file
./prebuilt-common.sh: line 186: expr: command not found
./prebuilt-common.sh: line 187: expr: command not found
./prebuilt-common.sh: line 159: name: No such file or directory
./prebuilt-common.sh: line 159: OPTIONS_abstract_Specify: command not found
./prebuilt-common.sh: line 159: OPTIONS_default_android-3=: command not found
./prebuilt-common.sh: line 341: expr: command not found
./prebuilt-common.sh: line 354: expr: command not found
./prebuilt-common.sh: line 362: expr: command not found
./prebuilt-common.sh: line 370: expr: command not found
./prebuilt-common.sh: line 378: expr: command not found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T08:09:19.337

请安装 cygwin (http://cygwin.com/) 或 MinGW (http://mingw.org/)，包括 MSYS 系统。确保 expr.exe 存在于cygwin/MSYS的**bin目录中。**如果没有，请使用 cygwin/MinGW setup 安装相应的包。

然后从 Cygwin/MinGW shell 运行配置脚本。

# java - Map.Entry 重新定义，用于 2 Dimensional Map 的迭代器

> ID：10532779
> 
> 赞同：0
> 
> 时间：2012-05-10T11:10:39.510
> 
> 标签：java, map, iterator, nested

我们有一个作业，要实现一个类，该类创建一个对象，该对象将是字符串的二维映射。`centralMap = new HashMap<String, Map<String,String>>`. 教授给了我们一个接口，里面包含了我们应该重新定义的方法，比如 put 方法 ( `public String put(final String row, final String column, final String value)`)、get 方法 ( `public String get(final String row, final String column)`) 和其他一些方法……而我无法重新定义的是迭代器方法……在他给的接口，有一个类Entry，他说，我们只用它来做迭代器方法！但我不知道我们应该用它做什么.. 这是类 Entry，以及我们应该重新定义（实现）的迭代器方法：

```
final class Entry
{
    /** First Key. */
    private final String key1;

    /** Second Key. */
    private final String key2;

    /** Value. */
    private final String value;

    /** Cponstructor for a new Tripel.
     * @param key1 First Key.
     * @param key2 Second Key.
     * @param value Value.
     */
    public Entry(final String key1, final String key2, final String value)
    {
        this.key1 = key1;
        this.key2 = key2;
        this.value = value;
    }

    public String getFirstKey()
    {
        return key1;
    }

    public String getSecondKey()
    {
        return key2;
    }

    public String getValue()
    {
        return value;
    }

    @Override public boolean equals(final Object anything)
    {
        if(anything == null)
            return false;
        if(getClass() != anything.getClass())
            return false;
        final Entry that = (Entry)anything;
        return Objects.equals(getFirstKey(), that.getFirstKey())
               && Objects.equals(getSecondKey(), that.getSecondKey())
               && Objects.equals(getValue(), that.getValue());
    }

    // CHECKSTYLE- Magic Number
    @Override public int hashCode()
    {
        int hash = 7;
        hash = 17 * hash + Objects.hashCode(getFirstKey());
        hash = 17 * hash + Objects.hashCode(getSecondKey());
        hash = 17 * hash + Objects.hashCode(getValue());
        return hash;
    }
    // CHECKSTYLE+ Magic Number

    @Override public String toString()
    {
        return String.format("(%s, %s, %s)", getFirstKey(), getSecondKey(), getValue());
    }

} 
```

我们应该重新定义的迭代器方法是这个：`@Override Iterator<Entry> iterator();`我应该如何进行？我听说我们应该为迭代器实现一个新类。告诉我你是否需要我实现的类，（以及实现他提供的接口的类）知道我如何将嵌套映射放在另一个类中等等。因为嵌套地图只是在 put 方法中创建的。在我的构造函数中只有 centralMap。

非常感谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:40:49.060

您只需要创建一个创建`Iterator`条目的方法。每个`Entry`都是独一无二的，因为使用了地图。因此，您只需要执行以下操作：

```
for entryMap in map do {
  entryMap get list of keysAndValues
  for keyValue in keysAndValues preppend this key
} 
```

# java - XJC 多个 XSD -> 使用“情节”生成类

> ID：10532780
> 
> 赞同：1
> 
> 时间：2012-05-10T11:10:41.663
> 
> 标签：java, jaxb, xjc

我有两个最简单的 xsd 文件。

a.xsd：

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema" xmlns:a="A" targetNamespace="A">
  <complexType name="myType"/>
  <element name="root" type="a:myType"/>
</schema> 
```

b.xsd：

```
<?xml version="1.0" encoding="UTF-8"?>

<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="B" xmlns:a="A">
  <import namespace="A"/>
  <complexType name="extendedType">
    <complexContent>
      <extension base="a:myType"/>
    </complexContent>
  </complexType>
</schema> 
```

我们使用`myType`在 a.xsd 中定义的 in b.xsd。生成过程包括使用“情节”功能的两个步骤。

```
> xjc -episode a.episode a.xsd
parsing a schema...
compiling a schema...
a\MyType.java
a\ObjectFactory.java
a\package-info.java

> xjc b.xsd -b a.episode
parsing a schema...
[ERROR] src-resolve: Cannot resolve the name 'a:myType' to a(n) 'type definition' component.
  line 7 of file:/b.xsd

Failed to parse a schema. 
```

第一代使用有效的 a.episode 文件成功，但第二代失败。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:23:46.283

我使用 Apache XMLBeans 2.5.0 尝试了您的示例，它使用以下命令：

```
scomp -srconly a.xsd b.xsd 
```

# bash - 从 CSV 文件中删除然后返回一列的最简单方法是什么？

> ID：10532781
> 
> 赞同：-1
> 
> 时间：2012-05-10T11:10:42.950
> 
> 标签：bash, csv, awk

我经常需要运行各种脚本来编辑 CSV 文件中的数据，但仅限于该文件中的特定列。重新设计所有脚本以使其仅操作特定列有时很复杂。我认为最简单的方法是将特定列输出到临时文件，例如`temp.csv`，在 上运行脚本`temp.csv`，然后将编辑后的数据放回 CSV 文件的同一列中。

我知道我可以使用以下方法仅从 CSV 文件的特定列中检索数据：

```
awk -F@ '{print $3}' file.csv >> temp.csv 
```

使用脚本编辑后`temp.csv`，将此数据返回到 CSV 文件中同一列的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:20:51.800

您可以`$3`就地修改。例如：

```
awk -F@ 'BEGIN { OFS= FS }
         { # do whatever with $3, like
           $3 += 2
           $3 = $3 "appended text"
           # and so on, then finally
           print $0
         }' INPUT.CSV > OUTPUT.CSV 
```

# php - mktime 超过 2038 年不工作

> ID：10532789
> 
> 赞同：1
> 
> 时间：2012-05-10T11:11:04.453
> 
> 标签：php

我正在使用 php 版本 5.3.8 而 mktime 不适合我

这是代码

```
$dated= mktime(0,0,0,11,5,2038);
var_dump($dated); 
```

输出为 bool(false) 请建议我修复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T11:19:50.130

mktime 返回时间戳，它是一个整数（在 PHP 中它实际上是一个有符号整数）。因此 32 位系统的最大可能时间戳是`19 Jan 2038 03:14:07 UTC`（在发生整数溢出之后）。对于更大的时间戳，您需要 64 位整数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T11:13:01.117

来自[PHP 手册](http://php.net/manual/en/function.mktime.php)：

> 在 PHP 5.1.0 之前，任何已知版本的 Windows 和其他一些系统也不支持负时间戳。因此，有效年份的范围仅限于 1970 年到 2038 年。

一种可能的解决方案是使用[ADOdb Date Time Library](http://phplens.com/phpeverywhere/adodb_date_library)。该库通过用 PHP 浮点数（通常为 64 位）替换本机函数的有符号整数（通常为 32 位）克服了这些限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-27T20:38:38.527

关于使用 C/C++ 库转换时间的三个重要事项。

标准库中的 gmtime() 或 localtime() 从 time_t 转换为 struct tm，但 time_t 的分辨率是从纪元开始的秒数。所以小数秒不会计算在内。

mktime() 从 struct tm 向后转换为 time_t，但如果输入日期超出范围，它将返回 -1。（参考 2038 年问题：[http](http://en.wikipedia.org/wiki/Year_2038_problem) ://en.wikipedia.org/wiki/Year_2038_problem ）

If you are not using 64bit timestamp, even you run programs on 64bit machines, you still have year 2038 problem. There are 64bit version functions like gmtime64(),localtime64(), mktime64() that may resolve the year out of range issue. (Refer page: [http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frtref%2Fmktime64.htm](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frtref%2Fmktime64.htm))

Answers that using boost library cannot solve the year 2038 problem. Notes that from its page: "Internally boost::gregorian::date is stored as a 32 bit integer type."

# c# - 设置 Console.Error 的颜色

> ID：10532796
> 
> 赞同：9
> 
> 时间：2012-05-10T11:11:29.040
> 
> 标签：c#, console-application, textwriter

我正在编写一个包含自定义记录器的控制台应用程序。记录器需要将发送到 Console.Error 的任何内容涂成红色。我现在有第三方引用，它们也写入 Console.Out 和 Console.Error，所以我必须以一种考虑到它们的方式来执行此操作，因为我没有它们的源代码。我已经设置了我的记录器，因此任何写入控制台的代码都将通过调用 Console.SetOut 和 Console.SetError 方法来使用我的记录器的 TextWriter。它有点工作，但我猜有某种同步问题？在我的 ErrorWriter 类中，您可以看到我正在设置控制台的前景色，然后调用 base.Write() 但结果与预期不符。来自 Console.Out 的应为灰色的文本变为红色，而在中途突然变为灰色。它一直在同一字符位置从红色变回灰色，但我假设 base.Write() 实际上并没有立即吐出到控制台；有某种滞后时间/缓冲区。我试过调用 base.Flush() 但这会使 Console.Out 中的所有文本都变成红色，这更糟。我该如何解决这个问题？

```
public class Logger
{
    private static TextWriter _out;
    private static ErrorWriter _error;

    public Logger()
    {
        Initiliaze();
    }

    public static TextWriter Out
    {
        get
        {
            return _out;
        }
    }

    public static TextWriter Error
    {
        get
        {
            return _error;
        }
    }

    private static void Initiliaze()
    {
        if (_out == null)
            _out = new StreamWriter(Console.OpenStandardOutput());
        if (_error == null)
            _error = new ErrorWriter(Console.OpenStandardError());

        Console.SetOut(Out);
        Console.SetOut(Error);
    }
}

public class ErrorWriter : StreamWriter
{
    // constructors omitted to save space

    public override void Write(string value)
    {
            Console.ForegroundColor = ConsoleColor.Red;
            base.Write(value);
            //base.Flush();
            Console.ResetColor();
    }

    public override Encoding Encoding
    {
        get { return Encoding.Default; }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T12:16:42.670

您可以装饰该方法以执行此操作：

```
public class ConsoleErrorWriterDecorator : TextWriter
{
    private TextWriter m_OriginalConsoleStream;

    public ConsoleErrorWriterDecorator(TextWriter consoleTextWriter)
    {
        m_OriginalConsoleStream = consoleTextWriter;
    }

    public override void WriteLine(string value)
    {
        ConsoleColor originalColor = Console.ForegroundColor;
        Console.ForegroundColor = ConsoleColor.Red;

        m_OriginalConsoleStream.WriteLine(value);

        Console.ForegroundColor = originalColor;
    }

    public override Encoding Encoding
    {
        get { return Encoding.Default; }
    }

    public static void SetToConsole()
    {
        Console.SetError(new ConsoleErrorWriterDecorator(Console.Error));
    }
} 
```

不要忘记运行“ConsoleErrorWriterDecorator.SetToConsole();” 在你开始写控制台之前

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T22:25:38.580

原来是一个愚蠢的复制/粘贴错误！我有两次调用 Console.SetOut()。现在它在将第二个更改为 Console.SetError() 后工作

# c# - 无法从另一台计算机加载 dll

> ID：10532801
> 
> 赞同：1
> 
> 时间：2012-05-10T11:11:34.407
> 
> 标签：c#, .net

我在从另一台计算机加载 dll 时遇到问题。它从我的工作站加载得很好，但是当我尝试从另一个没有安装 Visual Studio 的系统上测试它时，我得到以下异常：

> 日期 - 2012 年 5 月 10 日 12:01:48.0725000 - 调用目标引发异常。日期 - 2012 年 5 月 10 日 12:01:48.0881250 - System.IO.FileNotFoundException：无法加载文件或程序集“System.Xml.Linq，版本=3.5.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”或其依赖项之一。该系统找不到指定的文件。文件名：ZENNLNGLIB.Process.ReadConfigFile() 的 ZENNLNGLIB.Process.ProcessFile(String fileName) 的“System.Xml.Linq，版本=3.5.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”
> 
> 从以下位置加载的程序集管理器：C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\mscorwks.dll 在可执行文件 C:\Documents and Settings\Administrator\Desktop\NLNG.Encryption\NLNG.Encryption\bin\Debug\NLNG 下运行.Encryption.exe --- 详细的错误日志如下。
> 
> === 预绑定状态信息 === LOG: User = WS001ITS106\Administrator LOG: DisplayName = System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 (完全指定) LOG: Appbase = file:///C:/Documents and Settings/Administrator/Desktop/NLNG.Encryption/NLNG.Encryption/bin/Debug/ LOG：Initial PrivatePath = NULL 调用程序集：ZENNLNGLIB，Version=1.0.0.0，Culture=neutral，PublicKeyToken =空。=== LOG：此绑定在 LoadFrom 加载上下文中开始。警告：将不会在 LoadFrom 上下文中探测本机图像。本机映像只会在默认加载上下文中进行探测，例如使用 Assembly.Load()。LOG：未找到应用程序配置文件。LOG：使用 C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\config\machine.config 中的机器配置文件。日志：后策略参考：System.Xml.Linq，Version=3.5.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089 日志：尝试下载新 URL 文件：///C:/Documents and Settings/Administrator/Desktop/NLNG.Encryption /NLNG.Encryption/bin/Debug/System.Xml.Linq.DL L. LOG：正在尝试下载新的 URL 文件：///C:/Documents and Settings/Administrator/Desktop/NLNG.Encryption/NLNG.Encryption/bin /Debug/System.Xml.Linq/Sy stem.Xml.Linq.DLL。日志：正在尝试下载新的 URL 文件：///C:/Documents and Settings/Administrator/Desktop/NLNG.Encryption/NLNG.Encryption/bin/Debug/System.Xml.Linq.EXE。日志：正在尝试下载新的 URL 文件：///C:/Documents and Settings/Administrator/Desktop/NLNG.Encryption/NLNG.Encryption/bin/Debug/System.Xml.Linq/System.Xml.Linq.EXE。日志：正在尝试下载新的 URL 文件：///C：/zennlnglib/System.Xml.Linq.DLL。日志：正在尝试下载新的 URL 文件：///C:/zennlnglib/System.Xml.Linq/System.Xml.Linq.DLL。日志：正在尝试下载新的 URL 文件：///C:/zennlnglib/System.Xml.Linq.EXE。日志：正在尝试下载新的 URL 文件：///C:/zennlnglib/System.Xml.Linq/System.Xml.Linq.EXE。

这就是我加载我的 dll 的方式：

```
Assembly u = Assembly.LoadFrom(@"C:\test\test.dll");

    Type t = u.GetType("Test.Process");
    MethodInfo m = t.GetMethod("ProcessFile");

    try
    {
        object[] myparam = new object[1];
        myparam[0] = @"C:\test\testFile.csv";

        result = (string)m.Invoke(null, myparam);

        Console.WriteLine(result);
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message.ToString());
        Console.WriteLine(ex.InnerException.ToString());
        System.Threading.Thread.Sleep(100000);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:14:24.203

> System.IO.FileNotFoundException：无法加载文件或程序集“System.Xml.Linq，版本=3.5.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”或其依赖项之一。该系统找不到指定的文件

漂亮地说会发生什么。检查发生错误的另一台计算机上是否安装了正确版本的 .NET Framework (3.5)。

如果您尝试从下面打印的位置加载它，请在其中查找 System.Xml.Linq dll

> C:/zennlnglib/System.Xml.Linq.DLL

我猜

> C:/Documents and Settings/Administrator/Desktop/NLNG.Encryption/NLNG.Encryption/bin/Debug/

目标机器上不存在。

# svg - ImageMagick MVG vs. SVG——图形上下文

> ID：10532802
> 
> 赞同：1
> 
> 时间：2012-05-10T11:11:45.733
> 
> 标签：svg, imagemagick, mvg

我目前正在将我的一些应用程序从 ImageMagick MVG 移植到 SVG 输出。我大量使用了 MVG 的“push graphics-context”命令，现在想知道，在 SVG 中这个等价物是什么？

简而言之，“推送图形上下文”的作用（从其他来源复制）：

```
When a graphic context is pushed, options set after the context is pushed 
(such as coordinate transformations, color settings, etc.) are saved to a 
new graphic context. This allows related options to be saved on a graphic 
context "stack" in order to support hierarchical nesting of options. When    
"pop graphic-context" is used to pop the current graphic context, the 
options in effect during the "push graphic-context" operation are restored. 
```

是否相当于使用嵌套的 SVG 文档，如下例所示？

```
<svg>
    ...
    <svg>
        ...
    </svg>
    ...
</svg> 
```

还是我应该使用其他东西？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:40:43.353

您可以为此使用 <svg> 或 <g> 元素，我建议您使用 <g> 元素，除非您需要新的视口 - 在这种情况下请使用 <svg>。

# php - 读取后保存数据

> ID：10532804
> 
> 赞同：0
> 
> 时间：2012-05-10T11:11:47.667
> 
> 标签：php, cakephp

我正在尝试在同一模型读取数据后保存数据。这是我的代码：

```
public function partner($postid, $partner){
    $this->Partner->id = $postid;
    $this->Partner->id = $partner;
    $this->Partner->ip = $_SERVER['REMOTE_ADDR'];
    $result = $this->Partner->read();
    if($result){
        $time = $result['Partner']['time'];
        pr($result);
    }

    $data = array('id' => $partner,
                  'post' => $postid,
                  'time' => time(),
                  'cash' => '0.001',
                  'ip' => $_SERVER['REMOTE_ADDR']);
    $this->Partner->save($data);
} 
```

它只是更新数据，但不会将其保存为新行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:25:40.563

之前`$this->Partner->save($data);`，调用`$this->Parter->create();`，这将设置`Partner`模型保存一个新行。

编辑：除非`id`是您的模型的主键并且您将其设置为数据库中已经存在的值，在这种情况下，无论您是否使用它都会更新`$model->create()`。（我认为）。

# sql - T-SQL：不使用临时表的日期列表

> ID：10532810
> 
> 赞同：1
> 
> 时间：2012-05-10T11:12:29.930
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

我有一张桌子

> |开始日期|结束日期|价值|每天的平均价值|
> 
> |2011-01-01 |2012-01-01| 730 | 2|

我想把这张桌子变成`View`

> |日期| 平均值 |
> 
> 2011-01-01 | 2
> 
> 2011-01-02 | 2
> 
> 2011-01-03 | 2
> 
> ......
> 
> 2011-12-31 | 2

是否可以不使用临时表生成日期列表？有任何想法吗？

**编辑**

谢谢两个答案

`With` **递归视图**类似于临时表

我确实担心视图中的性能，因为稍后视图将涉及其他进程。

然后我会尝试递归视图，如果它不适合，我可以只使用**硬编码日期列表表**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T11:14:38.870

```
declare @start datetime
SET @start = '20110501'
declare @end datetime 
SET @end ='20120501'

;with months (date)
AS
(
    SELECT @start
    UNION ALL
    SELECT DATEADD(day,1,date)
    from months
    where DATEADD(day,1,date)<=@end
)
select * from months OPTION (MAXRECURSION 0); 
```

![在此处输入图像描述](../Images/172f560537a139977d8a2814fdfe8531.png)

等等..等等..等等..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T11:46:40.420

是的你可以。这会从输入集中生成天数，然后为您提供所需的范围

虽然这在内部技术上就像临时表，但您可以创建一个**递归视图**：

```
Create View TestView as
    with Data As -- Pretends to be your table of data replace with  select from your tables
    (
        select Cast('2012-05-01' as DATETIME) [Start Date], Cast('2012-05-02' as DATETIME)  [End Date], 2  [Avgerage Value Per Day]
        union all
        select Cast('2012-04-01' as DATETIME) [Start Date], Cast('2012-04-05' as DATETIME) [End Date], 3  [Avgerage Value Per Day]
    )
    ,AllDates as -- generates all days
    (
         select cast('1900-01-01' as datetime) TheDate
         union all
         select TheDate + 1
         from    AllDates   
         where   TheDate + 1 < '2050-12-31'
    )
    select TheDate [Date], o.[Avgerage Value Per Day]
    from    AllDates
    join Data o on TheDate Between o.[Start Date]   AND   o.[End Date]; 
```

您可以查询它，但您需要确保指定递归限制

```
select * from TestView
OPTION (MAXRECURSION 0) 
```

这给出了这个结果

```
Date                        Avgerage Value Per Day
2012-04-01 00:00:00.000 3
2012-04-02 00:00:00.000 3
2012-04-03 00:00:00.000 3
2012-04-04 00:00:00.000 3
2012-04-05 00:00:00.000 3
2012-05-01 00:00:00.000 2
2012-05-02 00:00:00.000 2 
```

从我想要的5月1-2日和4月1-5日的测试数据可以看出

# sql - 是否可以查询远程服务器的链接服务器？/ 从 SQL Server x64 访问 FoxPro 数据

> ID：10532811
> 
> 赞同：1
> 
> 时间：2012-05-10T11:12:33.300
> 
> 标签：sql, sql-server, ms-access, foxpro, visual-foxpro

场景：

*   SQL Server 2005 x64（默认实例）
*   Fox Pro .dbf 上的数据。仅提供 32 位驱动程序（无 x64 驱动程序）

我需要从默认的 SQL Server 实例访问 FoxPro 数据。我曾经使用在 SQL Server 上创建的链接服务器来执行此操作，但这在 x64 实例上不再可行（驱动程序兼容性）。

因此，我安装了一个新的 32 位 SQL Server 实例（简称 SS32），并在这个新实例上创建了链接服务器，以使用现有驱动程序访问 .dbf 数据。

在此服务器中，我可以像这样查询 .dfb 数据：

*   `select * from LinkedServerName...DbfTableName`它工作正常

但我仍然需要从默认实例访问它。

所以，这就是我所拥有的

*   SQL Server x64 默认实例
*   带有链接服务器的 SQL Server 32 (SS32) 实例以访问 foxpro 数据

有没有办法从默认实例中查询 SS32 中的链接服务器？你知道任何可能的替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:32:47.830

From the x64 instance you can use `OPENQUERY` to run a query on a linked server:

```
SELECT *
  FROM OPENQUERY(x86LinkedServer, 'select *
                                     from LinkedServerName...DbfTableName') 
```

There is also [this blog post](http://information-management-enabled.blogspot.com.au/2005/11/access-database-from-sql-200564.html) regarding a workaround for what is (basically) your problem: querying a 32-bit datasource from a 64-bit instance.

# c# - 这种重构有什么意义吗？

> ID：10532818
> 
> 赞同：0
> 
> 时间：2012-05-10T11:12:56.390
> 
> 标签：c#, web-services, refactoring

给定网络服务方法：

```
public void FindSomeEntities(int? Id, string param1, int? param2, ...) 
```

重构：

```
public void FindSomeEntities(SelectionParameters selectionParameters)

class SelectionParameters
{
    public int? Id;
    public string param1;
    public int? param2
    ...
} 
```

优点：

1.  原始Web服务方法中的太多参数减少到唯一的一个
2.  如果需要更改，我们不必更改方法的接口 - 只需更改 SelectionParameters 的定义

缺点：

1.  类 SelectionParameters 没有任何商业价值 - 它仅用作辅助类，并且在单个方法中使用。结果，我们将拥有许多带有 1 个参数的方法和大量一次性类
2.  实际上界面改变了，我们只是把这些改变推得更深一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:24:35.633

我不确定这种重构有多大价值，因为正如您所说，支持类的数量将/可能难以维护并且没有其他用途。

如果参数有不同的用途，例如在您的示例“ID”中，那么我认为将它们分开以便于识别它们以及您想在方法主体中对它们做什么是明智的。

但是，如果您的参数只是在方法主体中执行相似/相同功能的值的集合，您可以查看使用`params`关键字并像这样定义您的方法：

```
public void FindSomeEnteties(params object[] theParameters) 
```

这取决于您是否需要挖掘数组以提取索引 0 并将其视为 ID 等，或者您的方法是否只是想对传递的所有参数执行相同的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T11:35:57.123

这种重构称为[Introduce Parameter Object](http://www.refactoring.com/catalog/introduceParameterObject.html)。如果参数彼此自然相关，尤其是当它们经常一起用作多个方法的参数列表时，这可能是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:03:57.633

如果有任何理由相信其他 Web 服务共享相同的（子）参数集，这是合理的。

不管你不这样做，你有一个事实上的结构作为参数列表。这个观察是在我们的[PARLANSE](http://www.semanticdesigns.com/Products/PARLANSE)编程语言中实现的，它总是有一个函数参数，名为“？” （有点像 OO 中的“自我”）。该参数有一个类型；它可以是标量或复数变量（int 或 string），也可以是 struct。通常通过结构声明来定义结构；在 PARLANSE 中，编写看似多个参数的内容隐式定义了一个结构。在将参数列表传递给子函数的情况下，可以简单地在“？”上调用该子函数。并传递整个参数列表。

# php - 在PHP中将数字序列转换为数组

> ID：10532826
> 
> 赞同：3
> 
> 时间：2012-05-10T11:13:24.763
> 
> 标签：php, regex, arrays, string, preg-match-all

有点像 PHP 和 Regex 的菜鸟，我从 Web 服务收到以下内容：

```
test:002005@1111@333333@;10205@2000@666666@;002005@1111@55555@; 
```

上面的行是重复 3 次的 3 个数字的序列。我想获得每个序列的第三个数字，我相信最好的课程（除了 3000 次爆炸）将是 preg_match_all，但我很难将注意力集中在 RegEx 上。

最终结果应如下所示：

```
 Array
    (
        [0] => 333333
        [1] => 666666
        [2] => 55555
    ) 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T11:16:52.723

```
if(preg_match_all('/.*?(?:\d+@){2}(\d+)@;/',$s,$m)) {
        print_r($m[1]);
} 
```

[http://ideone.com/99M9t](http://ideone.com/99M9t)

或者

你可以使用explode来做到这一点：

```
$input = rtrim($input,';');
$temp1 = explode(';',$input);
foreach($temp1 as $val1) {
        $temp2 = explode('@',$val1);
        $result[] = $temp2[2];
}
print_r($result); 
```

[http://ideone.com/VH29g](http://ideone.com/VH29g)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T11:17:04.750

使用函数[explode()](http://php.net/manual/en/function.explode.php)

```
<?php

$pizza  = "piece1@piece2@piece3@piece4@piece5@piece6";
$pieces = explode("@", $pizza);
echo $pieces[0]; // piece1
echo $pieces[1]; // piece2

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:16:43.490

你可以使用`preg_match_all`这个任务，这使得任务非常简单：

```
$a = "test:002005@1111@333333@;10205@2000@666666@;002005@1111@55555@;";

preg_match_all('/@(\d+)@;/', $a, $m);

print_r($m); 
```

$m[1] 包含你想要的输出。

参考： http: [//php.net/manual/en/function.preg-match-all.php](http://php.net/manual/en/function.preg-match-all.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T11:21:47.960

我不记得确切的说法是怎么说的，但是...

> “你有一个问题并决定使用正则表达式......现在你有两个问题。”

如果我们假设 'test:' 不是要解析的实际字符串的一部分，您的问题很容易解决。

```
<?php

$in = '002005@1111@333333@;10205@2000@666666@;002005@1111@55555@;';

function splitGroupsAndGetColumn($input, $groupSeparator, $columnSeparator, $columnIndex, $skipEmpty=true)
{
    $result = array();

    $groups = explode($groupSeparator, $input);
    foreach($groups as $group)
    {
        $columns = explode($columnSeparator, $group);
        if (isset($columns[$columnIndex]))
        {
            array_push($result, $columns[$columnIndex]);
        }
        else if (! $skipEmpty)
        {
            array_push($result, NULL);
        }
    }

    return $result;
}

var_dump(splitGroupsAndGetColumn($in, ';', '@', 2)); 
```

输出：

```
array(3) {
  [0]=>
  string(6) "333333"
  [1]=>
  string(6) "666666"
  [2]=>
  string(5) "55555"
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T14:46:01.910

我的版本:)

正则表达式 (\d+) 表示我想要所有第一或更多

```
php > $a = '002005@1111@333333@;10205@2000@666666@;002005@1111@55555@';
php > preg_match_all('/(\d+)/',$a,$matches);
php > var_dump($matches);
array(2) {
  [0]=>
  array(9) {
    [0]=>
    string(6) "002005"
    [1]=>
    string(4) "1111"
    [2]=>
    string(6) "333333"
    [3]=>
    string(5) "10205"
    [4]=>
    string(4) "2000"
    [5]=>
    string(6) "666666"
    [6]=>
    string(6) "002005"
    [7]=>
    string(4) "1111"
    [8]=>
    string(5) "55555"
  }
  [1]=>
  array(9) {
    [0]=>
    string(6) "002005"
    [1]=>
    string(4) "1111"
    [2]=>
    string(6) "333333"
    [3]=>
    string(5) "10205"
    [4]=>
    string(4) "2000"
    [5]=>
    string(6) "666666"
    [6]=>
    string(6) "002005"
    [7]=>
    string(4) "1111"
    [8]=>
    string(5) "55555"
  }
} 
```

# android - 并不总是创建大位图

> ID：10532832
> 
> 赞同：2
> 
> 时间：2012-05-10T11:13:50.413
> 
> 标签：android, memory, drawing

大家！

我根据我的应用程序中的一些数据绘制了一个图。该图具有滚动和缩放功能。为此，我在 MyMainFragment.onActivityCreated() 中创建了 2 个位图。

```
if (bitmaps[0] != null)
      {
         return;
      }    

final int deviceWidth = getResources().getDisplayMetrics().widthPixels;
          final int deviceHeight = getResources().getDisplayMetrics().heightPixels;
          final int deviceMaxDim = Math.max(deviceHeight, deviceWidth);

          bitmaps[0] = Bitmap.createBitmap(
             deviceMaxDim * 2,
             deviceMaxDim * 1,
             Bitmap.Config.ARGB_8888);

          bitmaps[1] = Bitmap.createBitmap(
           bitmaps[0].getWidth(),
           bitmaps[0].getHeight(),
           bitmaps[0].getConfig()); 
```

由于我使用的绘图算法，我需要 2 个位图，而不仅仅是 1 个。在 Asus Transformer 上运行程序，以像素为单位的 bmp 大小为 1280 * 2 * 1280，因此字节大小为 1280 * 2 * 1280 * 4。当我从 Eclipse 运行程序时，一切都很好。但是当我像普通用户一样从平板电脑启动它时，它每隔一秒就会崩溃一次。

当我从 Eclipse 启动允许它运行的应用程序时，幕后发生了什么，我可以以编程方式执行相同的步骤，以便它在正常启动时不会崩溃？或者我应该使用其他一些绘图算法（也许像 OpenGL 之类的）？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T01:24:28.090

解决方案很简单。我在代码中的某处创建了一个 Canvas，在其上调用 Canvas#setBitmap(bitmaps[?])，但没有意识到，我必须调用 Canvas.setBitmap(null) 来释放引用。

# python - 在不同文件中的两个字符串之间搜索字符串

> ID：10532839
> 
> 赞同：-7
> 
> 时间：2012-05-10T11:14:19.907
> 
> 标签：python, regex, string

我正在编写一个 python 脚本，并且在某一时刻被卡住了。

我的目标是查找或搜索两个日期/时间之间的字符串或表达式。我可以使用“sed”来做到这一点，但我的问题是开始时间和结束时间可以在两个不同的文件中。

问题是我正在生成一些日志，这些日志打印在每行带有时间戳的文件中。如果行数达到一定限制，我们开始将日志写入不同的文件。

我需要在两个日期/时间之间搜索模式或表达式，但我不确定它是否在同一个文件中。

谁能建议我如何解决这个问题并做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:18:48.107

```
cat file1 file2 file3 | your_sed_script 
```

或者干脆

```
cat file* | your_sed_script 
```

只需确保文件按字母顺序排列（日志文件用`YYYYMMDDHHMMSS`和不`MMDDYYYY`或类似标识）。

# google-apps-script - 如何使用 GAS 访问电子表格的修订历史？

> ID：10532840
> 
> 赞同：4
> 
> 时间：2012-05-10T11:14:20.553
> 
> 标签：google-apps-script

是否可以直接从 Google Apps 脚本访问电子表格的修订历史数据？如果是这样，怎么做？

我想做两件事：

1.  将每个修订记录的用户名更改为运行脚本的实际用户，而不是脚本作者/所有者。正如我刚刚了解到的，使用 GAS 访问和修改的电子表格的修订历史总是反映脚本所有者/作者，而不是运行脚本的用户。

如果以上都做不到，那么

1.  直接从 GAS 直接读取历史记录中的修订号和用户名。从那里，我将做一个比较表，并希望我能达到同样的效果。

感谢您的任何见解。

萨班

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:21:39.327

我不相信可以使用 Apps 脚本访问修订历史记录。不过，此功能有一个开放的功能请求，如果您为它加注星标，您将在有更新时收到一封电子邮件：

[http://code.google.com/p/google-apps-script-issues/issues/detail?id=394](http://code.google.com/p/google-apps-script-issues/issues/detail?id=394)

# android - ListView 中选中复选框的行的位置

> ID：10532847
> 
> 赞同：1
> 
> 时间：2012-05-10T11:14:43.953
> 
> 标签：android, listview, checkbox, custom-cursor

我有一个listView，其中每一行都包含一个checkBox、TextView 和Button。该按钮设置为 GONE。当用户选择文本框时，我希望按钮变得可见。然后用户将单击此按钮以删除该行。

我已经为 checkBox 实现了一个监听器，它可以工作，但我无法解决的是如何确保适当的 deleteButton 可见。使用我当前的代码，可以看到一个随机按钮。

我该怎么办？指向教程或代码片段会非常有帮助。

```
public class DeleteCampaignCustomCursorAdapater extends CursorAdapter {

protected static final String TAG = null;
DatabaseHelper myDbHelper;
protected SQLiteDatabase db;

private final LayoutInflater mInflater;
protected ListView mListView;

TextView merchantNameView;
Button deleteButton;
CheckBox selectForDelete;
//ImageView moveButton;

public DeleteCampaignCustomCursorAdapater(Context context, Cursor c) {
    super(context, c);
    mInflater = LayoutInflater.from(context);
}

@Override
public void bindView(View view, Context context, final Cursor cursor) {

    myDbHelper = new DatabaseHelper(context); //Links to DatabaseHelper class

    merchantNameView = (TextView) view.findViewById(R.id.deleteMerchantNameView);
    deleteButton = (Button) view.findViewById(R.id.deleteButton);
    selectForDelete = (CheckBox) view.findViewById(R.id.deleteCheckBox);
    //moveButton = (ImageView) view.findViewById(R.id.moveButton);

    merchantNameView.setText(cursor.getString(cursor.getColumnIndex("merchantName")));

    final int  rowID = cursor.getInt(cursor.getColumnIndex("_id"));
    //final long rowID = mListView.getSelectedItemId();

    selectForDelete.setOnCheckedChangeListener(new OnCheckedChangeListener()
    {
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
        {
            if ( isChecked )
            {
                // perform logic
                deleteButton.setVisibility(0);
            }
            else {
                deleteButton.setVisibility(8);
            }
        }
    });

    //deleteButton.setOnClickListener(new DeleteEntryOnClicklistener(itemID));  
    deleteButton.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

            if(rowID > 0) {
                //Log.d(TAG, "Button Click. rowID = "+rowID);                   

                myDbHelper.deleteRecordWithID(rowID);
                cursor.requery();
                notifyDataSetChanged();
            }                           
        }
    });     
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    return mInflater.inflate(R.layout.delete_campaign_row_layout, null);
} 
```

}

**编辑**

我的新代码与巴拉克的建议。第一个版本有效，但是一旦删除了一行，一旦刷新视图，就会检查它下面的行。现在我`cursorOutOfBoundsException`在我的 getView() 中得到了一个。

```
public class DeleteCampaignCustomCursorAdapater extends CursorAdapter {

protected static final String TAG = null;
DatabaseHelper myDbHelper;
protected SQLiteDatabase db;
private final Activity context;

private LayoutInflater mInflater;
protected ListView mListView;

private static Cursor c;
public static int[] checked;

TextView merchantNameView;
Button deleteButton;
CheckBox selectForDelete;
//ImageView moveButton;

public DeleteCampaignCustomCursorAdapater(Context context, Cursor c) {
    super(context, c);
    this.context = (Activity) context;
    mInflater = LayoutInflater.from(context);
    DeleteCampaignCustomCursorAdapater.c = c;
    initializeChecked();
}

@Override
public void bindView(View view, Context context, final Cursor cursor) {

    /*myDbHelper = new DatabaseHelper(context); //Links to DatabaseHelper class

    merchantNameView = (TextView) view.findViewById(R.id.deleteMerchantNameView);
    deleteButton = (Button) view.findViewById(R.id.deleteButton);
    //selectForDelete = (CheckBox) view.findViewById(R.id.deleteCheckBox);
    //moveButton = (ImageView) view.findViewById(R.id.moveButton);

    merchantNameView.setText(cursor.getString(cursor.getColumnIndex("merchantName")));

    final int  rowID = cursor.getInt(cursor.getColumnIndex("_id"));     
    //final long rowID = mListView.getSelectedItemId();

    if (checked[rowID] == 0) {
        selectForDelete.setChecked(false);
    } else {
        selectForDelete.setChecked(true);
    }

    selectForDelete.setOnCheckedChangeListener(new OnCheckedChangeListener()
    {
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
        {
            if ( isChecked )
            {
               // Make deleteButton appear 
               RelativeLayout ll = (RelativeLayout) buttonView.getParent();
               deleteButton = (Button) ll.findViewById(R.id.deleteButton);
               checked[rowID] = 1;
               deleteButton.setVisibility(0);
            }
            else {
                //Hide deleteButton
                RelativeLayout ll = (RelativeLayout) buttonView.getParent();
                deleteButton = (Button) ll.findViewById(R.id.deleteButton);
                checked[rowID] = 1;
                deleteButton.setVisibility(8);
            }
        }
    });

    deleteButton.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

            if(rowID > 0) {
                //Log.d(TAG, "Button Click. rowID = "+rowID);                   

                myDbHelper.deleteRecordWithID(rowID);
                cursor.requery();
                notifyDataSetChanged();
                initializeChecked();  // re-set the checked array
            }                           
        }
    }); */
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    return mInflater.inflate(R.layout.delete_campaign_row_layout, null);
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    myDbHelper = new DatabaseHelper(context); //Links to DatabaseHelper class

    if (convertView == null) {
        mInflater = context.getLayoutInflater();
        convertView = mInflater.inflate(R.layout.delete_campaign_row_layout, null);
    }       

    merchantNameView = (TextView) convertView.findViewById(R.id.deleteMerchantNameView);
    deleteButton = (Button) convertView.findViewById(R.id.deleteButton);
    selectForDelete = (CheckBox) convertView.findViewById(R.id.deleteCheckBox);     

    merchantNameView.setText(c.getString(c.getColumnIndex("merchantName")));

    final int  rowID = c.getInt(c.getColumnIndex("_id"));       
    //final long rowID = mListView.getSelectedItemId();

    if (checked[position] == 0) {
        selectForDelete.setChecked(false);
    } else {
        selectForDelete.setChecked(true);
    }

    selectForDelete.setOnCheckedChangeListener(new OnCheckedChangeListener()
    {
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
        {
            if ( isChecked )
            {
               // Make deleteButton appear 
               RelativeLayout ll = (RelativeLayout) buttonView.getParent();
               deleteButton = (Button) ll.findViewById(R.id.deleteButton);
               checked[position] = 1;
               deleteButton.setVisibility(0);
            }
            else {
                //Hide deleteButton
                RelativeLayout ll = (RelativeLayout) buttonView.getParent();
                deleteButton = (Button) ll.findViewById(R.id.deleteButton);
                checked[position] = 1;
                deleteButton.setVisibility(8);
            }
        }
    });

    deleteButton.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {

            if(rowID > 0) {
                //Log.d(TAG, "Button Click. rowID = "+rowID);                   

                myDbHelper.deleteRecordWithID(rowID);
                c.requery();
                notifyDataSetChanged();
                initializeChecked();  // re-set the checked array
            }                           
        }
    });

    return convertView;     
}

public static void initializeChecked() {
    checked = new int[c.getCount()];
    int i = 0;
    while (i < c.getCount()) {
        checked[i] = 0;
        i++;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:28:06.720

你可以这样做：

```
selectForDelete.setOnCheckedChangeListener(new OnCheckedChangeListener()
{
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {
        if ( isChecked )
        {
           // perform logic 
           LinearLayout ll = (LinearLayout) buttonView.getparent();
           Button b = (Button) ll.findViewById(R.id.deleteButton)
           b.setVisibility(0);
        }
        else {
           LinearLayout ll = (LinearLayout) buttonView.getparent();
           Button b = (Button) ll.findViewById(R.id.deleteButton)
           b.setVisibility(8);
        }
    }
}); 
```

您已选中该框，因此您知道该行，获取复选框的父级（应该是该行的 LinearLayout），然后获取该行的按钮 ID 并使用它来设置该特定的删除按钮可见性行/视图。

希望这可以帮助。

**编辑**

要解决删除问题，您需要执行以下操作。

在自定义适配器中设置一个数组：

```
private Cursor c;
public static int[] checked; 
```

在您的构造函数中，将光标设置为本地 var 并调用一个方法：

```
CursorAdapter_EditText.c = c;
initializeChecked(); 
```

方法：

```
public static void initializeChecked() {
    checked = new int[c.getCount()];
    int i = 0;
    while (i < c.getCount()) {
        checked[i] = 0;
        i++;
    }
} 
```

在您的 bindview 中，重新排列并添加几行：

```
final int  rowID = cursor.getInt(cursor.getColumnIndex("_id"));
selectForDelete = (CheckBox) view.findViewById(R.id.deleteCheckBox);
if (checked(rowID) == 0) {
    selectForDelete.setChecked(false);
} else {
    selectForDelete.setChecked(true);
} 
```

然后像这样修改我的原始答案 onCheckedChanged::

```
selectForDelete.setOnCheckedChangeListener(new OnCheckedChangeListener()
{
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {
        if ( isChecked )
        {
           // perform logic 
           LinearLayout ll = (LinearLayout) buttonView.getparent();
           Button b = (Button) ll.findViewById(R.id.deleteButton);
           checked[posSelected] = 1;
           b.setVisibility(0);
        }
        else {
           LinearLayout ll = (LinearLayout) buttonView.getparent();
           Button b = (Button) ll.findViewById(R.id.deleteButton);
           checked[posSelected] = 1;
           b.setVisibility(8);
        }
    }
}); 
```

最后在您的删除按钮侦听器中：

```
deleteButton.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View v) {

        if(rowID > 0) {
            //Log.d(TAG, "Button Click. rowID = "+rowID);                   

            myDbHelper.deleteRecordWithID(rowID);
            cursor.requery();
            notifyDataSetChanged();
            initializeChecked();  // re-set the checked array
        }                           
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:03:31.863

检查此链接您要做的是将按钮状态保存在数组列表中，然后从该数组列表中显示您的按钮，而不是直接将其设置为可见，如果您无法理解链接上的代码，那么我将尝试编写你的代码让我知道你是否理解......

[如何实现一个获取所有复选框状态并将选中项的值添加到arraylist的按钮？](https://stackoverflow.com/questions/10190083/how-to-implement-a-button-that-gets-all-checkboxs-state-and-adds-the-value-of-c/10191369#10191369)

我不确切知道，但如果问题相似，它应该可以工作..

# php - 通过 ajax 将表单值从一个表单传递到另一个表单并返回到第一个表单

> ID：10532851
> 
> 赞同：0
> 
> 时间：2012-05-10T11:14:56.243
> 
> 标签：php, mysql, jquery

我有一个带有文本框的表单，当最终用户将值输入到表单的字段中时，它们将被提交到计算页面，并且他们再次将计算值返回到相同的表单而不刷新，并且应该显示计算的输出。是否可以使用 ajax/jquery 和 php。我的表单代码是这样的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <style type="text/css">@import "css/jquery.datepick.css";</style> 
    <script type="text/javascript" src="js/jquery.datepick.js"></script>
    <link rel="stylesheet" type="text/css" href="css/css.css"/>
    </head>

    <body>
    <div id="formwraper">
    <div  id="doctorstitle"><h1> Vitals</h1><br/></div>  
    <div id="formbody">

      <form  name="vitals" method="post" action="calculator.php" onSubmit="return false";>
      <div  id="formpoints">   
      <div id="left">
      Age:
      </div>
        <div id="right">    
        <input type="text" name="age" id="age" />
        </div>
    </div>
          <div  id="formpoints">   
      <div id="left">
      Height (in cms):
      </div>
        <div id="right">    
        <input type="text" name="height" id="height" />
        </div>
    </div>
          <div  id="formpoints">   
      <div id="left">
      Weight (in kgs):
      </div>
        <div id="right">    
        <input type="text" name="Weight" id="Weight" />
        </div>
<div> Calculated BMI value here</div> 
```

我想根据上面三个值显示这个值，没有刷新和提交按钮

```
</div>
          <div  id="formpoints">   
      <div id="left">
      Systolic BP:
      </div>
        <div id="right">    
        <input type="text" name="Systolic BP" id="Systolic BP" />
        </div>
    </div>
          <div  id="formpoints">   
      <div id="left">
      Diastolic BP:
      </div>
        <div id="right">    
        <input type="text" name="Diastolic BP" id="Diastolic BP" />
        </div>
    </div>
          <div  id="formpoints">   
      <div id="left">
      Pulse:
      </div>
        <div id="right">    
        <input type="text" name="pulse" id="pulse" />
        </div>
    </div>
          <div  id="formpoints">   
      <div id="left">
      Temperature:
      </div>
        <div id="right">    
        <input type="text" name="Temp" id="Temp" />
        </div>
    </div>
          <div  id="formpoints">   
      <div id="left">
      General Health status:
      </div>
        <div id="right">    
        <input type="text" name="ghs" id="ghs" />
        </div>
    </div>
          <div  id="formpoints">   
      <div id="left">
      Emergency :
      </div>
        <div id="right">    
        <input type="text" name="emergency" id="emergency" />
        </div>
    </div>
      </form>
        <script>
        $("button").click(function(){
    $.post("calculator.php",$(vitals).serialize(),function(result)
    {
    $(vitals).html(result);}
    );
    });

        </script>
        </div>

    </body>
    </html> 
```

谁能在这方面帮助我

提前感谢拉姆塞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:41:36.843

```
$("button").click(function(){
$.post("php page url",$(form_id).serialize(),function(result)
{
$(form_id).html(result);}
);
}); 
```

注意：1）在php页面中，回显所有输入的文本区域，其中包含已提交的值

2) 添加属性到表单标签 onSubmit="return false;"

# .htaccess - htaccess 将根目录重定向到子文件夹并从 url 中屏蔽子文件夹

> ID：10532853
> 
> 赞同：1
> 
> 时间：2012-05-10T11:15:13.330
> 
> 标签：.htaccess, redirect, url-rewriting, root, subdirectory

我看到了一些帖子，但与这个问题有关，有些甚至尝试解决我的问题，但它并没有 100% 对我有用

现在，我有一个域

```
 www.example.com 
```

所有巨大的内容都在一个子文件夹演示中，所以我必须导航

```
 http://www.example.com/demo 
```

查看内容

我需要的是我输入

[http://www.example.com](http://www.example.com)

并且子文件夹**/demo**中的内容应该加载，但它应该一直屏蔽子文件夹，无论我点击刷新页面或导航到其他页面多少次

[这篇文章](https://stackoverflow.com/questions/9739623/htaccess-redirection-to-subfolder-masked)对我有用，但是当我单击主页上的徽标时，它会将我带到我的网站索引，它取消了子文件夹

# file - Dojo 文件浏览控制（不上传）

> ID：10532854
> 
> 赞同：0
> 
> 时间：2012-05-10T11:15:17.733
> 
> 标签：file, browser, dojo

我需要一个使用户能够浏览硬盘并指向文件的 dojo 表单控件。我不需要上传那个文件。只是一个文件浏览器控件。我试图用谷歌搜索它，但找不到可用的。

我需要一个文本框和一个浏览按钮，我希望在点击浏览时打开打开文件对话框。用户选择文件，完整路径出现在文本框中。我需要文本框的内容作为数据而不是文件本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:47:32.683

我以前从未见过有人这样做。

你*可以*在你的 HTML 中放入`<input type="file">`一个你从不提交的表单中，然后监听`value`输入元素的变化。

但我不认为你会得到完整的路径（至少不是在所有浏览器中）。

例如[http://jsfiddle.net/RoystonS/LfMwD/](http://jsfiddle.net/RoystonS/LfMwD/)

# c# - 访问对象的名称属性

> ID：10532858
> 
> 赞同：0
> 
> 时间：2012-05-10T11:15:35.733
> 
> 标签：c#, schema

我有这个代码。我想访问对象的“名称”属性，因为类型包含类似

> {Name="String", FullName="System.String"}

但我只想要“字符串”。

```
DataTable dt = dr.GetSchemaTable();
foreach (DataRow myField in dt.Rows){
   var name = myField["ColumnName"];
   var type = myField["DataType"];
   Console.Out.WriteLine("type = " + type.toString());
} 
```

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T11:18:18.787

您可以转换为相应的类型，然后访问 Name 属性：

```
var type = (Type)myField["DataType"];
Console.WriteLine("type = " + type.Name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:18:29.880

不要打电话`type.ToString()`但是`((Type)type).Name`。

# weblogic - 远程调用 JMX MBean 或从部署在同一 JVM 中的 servlet 的差异

> ID：10532859
> 
> 赞同：4
> 
> 时间：2012-05-10T11:15:36.790
> 
> 标签：weblogic, jmx

我在 WebLogic 服务器上部署了几个应用程序。这些应用程序公开了一些 JMX MBean。当我通过 JConsole 或 JRMC 远程调用这些 MBean 上的操作时，它们工作正常。

但由于 JMX 对防火墙并不友好，我创建了另一个简单的 Servlet 应用程序，它部署在同一台服务器上，并调用一组本地 MBean 上的操作。在 servlet 中，我使用 ManagementFactory.getPlatformMBeanServer() 来查找和调用部署在同一 JVM 中的其他应用程序的 MBean，但对于某些操作，我得到 ClassCastException 或 ClassNotFoundException，具体取决于调用的操作，但某些操作可以正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:58:52.113

我怀疑这里发生的事情是您的 servlet 线程具有与您正在调用的 MBean 不同的上下文类加载器。因此，如果 MBean 属性、操作参数或返回值包含的类型不是核心 JVM 类（或未从同一个根类加载器共享的类），您将获得 ClassCast、ClassNotFound 和 ClassDefNotFound 异常。

此过程可能对您有用。您需要做的是临时将 servlet 线程的上下文类加载器更改为与加载 MBean 相同的类加载器。调用完成后，您再次将其设置回来。由于您知道目标 MBean 的 ObjectName，因此 MBeanServer 将为您提供正确的类加载器。

这是一个基本示例：

```
public void callMBean() throws MalformedObjectNameException, NullPointerException, InstanceNotFoundException {
    final ClassLoader currentClassLoader = Thread.currentThread().getContextClassLoader();
    try {
        ObjectName targetObjectName = new ObjectName(".....");
        MBeanServer server = ManagementFactory.getPlatformMBeanServer();
        ClassLoader tmpClassLoader = server.getClassLoaderFor(targetObjectName);
        Thread.currentThread().setContextClassLoader(tmpClassLoader);
        // ==========================================
        // Invoke operations here
        // ==========================================
    } finally {
        Thread.currentThread().setContextClassLoader(currentClassLoader);
    }
} 
```

# java - 在服务层中使用 Spring 对组进行 Bean 验证

> ID：10532861
> 
> 赞同：0
> 
> 时间：2012-05-10T11:15:49.053
> 
> 标签：java, spring, bean-validation, hibernate-validator

我正在使用 Spring-3.1.0.GA 开发服务（不是 Web 应用程序）。我想使用 hibernate-validator 和 Spring 来验证我的服务输入。

我启用了 bean 验证支持：

```
<bean id="validator"
      class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/>

<bean class="org.springframework.validation.beanvalidation.MethodValidationPostProcessor"/> 
```

我用@Validated 注释了我的服务接口，用@NotNull、@Size、@Valid 等注释了方法参数，它工作正常。

但是我必须根据验证组验证我的参数，比如客户。如果我用 @Validated 或 @Validated(Group1.class) 注释方法参数，Spring 不会执行任何验证。

如果我使用 @Valid 进行注释，那么验证正在发生但使用默认验证组（如预期的那样）。

我无法在接口级别注释 @Validate(Group1.class) 因为各种方法对各种组进行操作。

如何使用具有组支持的 Spring 和 hibernate-validator 执行服务层验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T04:54:12.267

我已经浏览了 Spring 源代码以及为什么没有选择方法参数上的验证组...根据代码，它仅从接口级别的 @Validated 而非方法级别选择验证组配置。

但是我还没有了解它在 SpringMVC 上下文中是如何工作的，我还没有检查过。

同样在这个过程中，我了解到如果您在子应用程序上下文中配置 MethodValidationPostProcessor，它不会被 Spring 拾取。我的意思是，如果您使用 SpringMVC，只有在 [servlet-name]-servlet.xml 中配置 MethodValidationPostProcessor 时才会注册它。如果您在 ContextLoaderListener 选择的任何子上下文配置文件中进行配置，Spring 将不会注册 MethodValidationPostProcessor。此外，我不确定它是否仅适用于 MethodValidationPostProcessor 或任何 BeanPostProcessors。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-23T10:53:06.100

我得到以下代码工作，我需要在方法头附加@Validated，在方法参数中附加@Valid。

```
@Validated(Default.class)
public UserDto updateUser(@Valid UserDto userDto) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:28:48.050

在 Spring 3.1.0+ 中，您可以直接在 @Valid 注释中使用组。例如：

```
@Valid(groups={Default.class, Group1.class}) 
```

# iphone - 存储多个关联在一起的数组的最佳方法 - Objective C

> ID：10532865
> 
> 赞同：0
> 
> 时间：2012-05-10T11:16:21.600
> 
> 标签：iphone, objective-c, ios, cocoa-touch

在我的 iOS 程序中。我创建了多个数组，它们一起工作以使程序正常工作。现在我需要一种方法来存储数组，即使 iPhone 已关闭。所以我需要将这些数组存储为只有我可以触摸的文件。

我真的很想使用用户默认值，但我只是不知道这是否是我需要的。我有这样的问题：

1.  我的数据在用户默认设置中会持续多久？
2.  你什么时候可能会丢失数据？

如果我能够将数组存储在 User Defaults 中，我该如何**将数组存储在 NSDictionaries 中**？这样我就可以将关联的数组保存在一起，并为每个数组指定一个特定的键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:25:47.757

像在 NSDefaults 中一样将数组存储为 NSData

```
[[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:urArray1] forKey:@"Array1"];

[[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:urArray2] forKey:@"Array2"]; 
```

并将其读作

```
 NSData *dataRepresentingSavedArray = [[NSUserDefaults standardUserDefaults] objectForKey:@"Array1"];
 if (dataRepresentingSavedArray != nil)
      NSArray *oldSavedArray = [NSKeyedUnarchiver unarchiveObjectWithData:dataRepresentingSavedArray]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:28:19.893

我认为您想要的是将阵列存储在磁盘上，然后（当您真正需要它们时）将它们取回。您可以先查看您内部的对象是否`NSMutableArrays`符合`NSCoding`协议。然后，您可以简单地将它们写入磁盘并在需要时加载它们。为此，您可以使用`NSKeyedArchiver`类。

* * *

正如@The Saad 指出的那样，您可以使用那段代码存储数组。虽然我不会推荐它。您也可以查看@roronoa zorro 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:29:40.280

NSuSerDefaults 是一种在 iPhone 中存储持久数据的方式，只要应用程序保留在 iPhone 上，您就不必担心数据丢失或持久性问题。

是的，您可以将 NSDictionary 对象存储在 NSUserDefaults 中，但建议将其用于小数据。对于更大的数据，您可以使用 sqlite 或任何其他数据库。

这是NSUserDefault的[教程](http://www.icodeblog.com/2008/10/03/iphone-programming-tutorial-savingretrieving-data-using-nsuserdefaults/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T11:37:14.863

`NSUserDefaults`基本上只是属性列表序列化的包装器。

> NSUserDefaults 为 Mac OS X 的首选项系统提供了一个编程接口。首选项实际上存储在磁盘中，它们被写入用户的 Library/Preferences/ 目录，文件名等于带有 plist 扩展名的包标识符。

[在这里](http://macdevcenter.com/pub/a/mac/2001/08/24/cocoa.html?page=3)查看 MikeBeam 的文章

# android - Mac上的Android模拟器崩溃

> ID：10532866
> 
> 赞同：3
> 
> 时间：2012-05-10T11:16:21.930
> 
> 标签：android, macos, android-emulator

当我运行一个项目时，模拟器花费了太多时间并且突然崩溃了。我的设置是 MAC OS X 版本 10.7.3，eclipse indigo，android-sdk 4.0.3。

我没有任何音频设备连接到我的 MAC 系统，因为很少有人建议在模拟器启动之前移除 USB 音频插头，并在模拟器完全加载后重新插入。

在 Eclipse 上收到此错误消息：`emulator-5554 disconnected! Cancelling 'org.ingenyous.basicphonegap.BasicPhonegapActivity activity launch'!`

并且有一个来自 mac 的弹出消息，上面写着：`emulator-arm quit unexpectedly`。早些时候一切正常。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:22:17.257

检查您的 4.0.3（sdk 和 ARM 系统映像）是否更新到最新版本。

# zend-framework - Zend_Validate_Db_NoRecordExists 与 Zend_Form_Element_File

> ID：10532869
> 
> 赞同：0
> 
> 时间：2012-05-10T11:16:27.603
> 
> 标签：zend-framework

是否可以将 Zend_Validate_Db_NoRecordExists 验证器分配给 Zend_Form_Element_File？这是我尝试执行此操作的方法：

```
$file = new Zend_Form_Element_File('datei');
$file->setLabel('Datei (maximal 2 MB)')
     ->addValidator('Count', false, 1)
     ->addValidator('Size', false, 2048000)
     ->addValidator('Extension', false, 'jpg,gif,jpeg,pdf')
     ->addValidator('Db_NoRecordExists', false, array(
         'table'   => 'presseservice_pm_upload',
         'field'   => 'datei',
     ))
     ->setRequired(true); 
```

但是，当我上传与已存储在 presseservice_pm_upload.datei 字段中的文件同名的文件时，它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:46:27.040

`Zend_Form_Element_File`不使用标准`Zend_Validate`验证器。它使用来自[`Zend_File_Transfer`](http://framework.zend.com/manual/en/zend.file.transfer.validators.html).

很可能你必须做一些代码练习才能让它针对数据库进行验证。

祝你好运！

# ios5 - 如何在 iOS 4.x 上创建 leftItemsSupplementBackButton 效果

> ID：10532877
> 
> 赞同：2
> 
> 时间：2012-05-10T11:16:55.530
> 
> 标签：ios5, ios4, uinavigationcontroller, uinavigationitem

如何在 iOS 4.x 上创建 leftItemsSupplementBackButton 效果？

iOS5 和 iOS 4 的示例代码：

```
UINavigationController *navigationController = self.navigationController;
UINavigationItem *navigationItem = self.navigationItem;
if ([navigationItem respondsToSelector:@selector(leftBarButtonItems)]) {
    if (navigationController.viewControllers.count > 1) {
        navigationItem.leftItemsSupplementBackButton = YES;
    }
    NSArray *leftButtons = [NSArray arrayWithObjects:button1, button2, button3, nil];
    navigationItem.leftBarButtonItems = leftButtons;
}
else {
    NSArray *leftButtons = [NSArray arrayWithObjects:button1, button2, button3, flexibleButton, nil];
    UIToolbar *toolbar = [[[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 300.0f, 44.0f)] autorelease];
    toolbar.tintColor = self.navigationController.navigationBar.tintColor;
    [toolbar setItems:leftButtons animated:NO];
    navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] initWithCustomView:toolbar] autorelease];
} 
```

# windows-phone-7 - 窗口电话7中ListBox行的交替行背景颜色

> ID：10532881
> 
> 赞同：0
> 
> 时间：2012-05-10T11:17:19.037
> 
> 标签：windows-phone-7

我正在尝试在窗口电话 7 的列表框中提供备用行样式。

我使用了以下内容：**如果我的行数很少，它会起作用。**

```
 <ListBox x:Name="ListBox1" Width="500" Height="300">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Width="500" Background="{Binding age,Converter={StaticResource myconverter}}">
                              <TextBlock Text="Some text"></TextBlock> 
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

这是我的转换器，它改变了背景颜色：

```
public class MyConverter : IValueConverter
    {
        bool flag = false;
        SolidColorBrush brush1 = new SolidColorBrush(Color.FromArgb(255, 100, 200, 255));
        SolidColorBrush brush2 = new SolidColorBrush(Color.FromArgb(255, 200, 100, 155));
        public object Convert(object value,
                              Type targetType,
                              object parameter,
                              System.Globalization.CultureInfo culture)
        {

            flag = !flag;
            return flag ? brush1 : brush2;

        }

        public object ConvertBack(object value,
                                  Type targetType,
                                  object parameter,
                                  System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

绑定后，它为我的 listbox 提供了备用行背景颜色。**但是，如果列表框在我快速向上和向下滚动时有太多行，那么行颜色会改变，因为它在滚动列表框时再次调用转换器。**

我该如何解决这个问题，请帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:14:09.470

您会看到这种行为，因为它取决于调用转换器的项目的顺序。当您滚动虚拟化列表时，这不能保证是连续的。

您需要根据项目中的某些内容执行颜色选择。

您可以直接向项目添加背景属性，也可以根据每个项目的属性进行选择。例如，如果列表中的每个项目都有一个顺序索引，您可以更改转换器以根据索引是奇数还是偶数来选择颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:05:57.053

我遇到了一个非常相似的问题，最后在设置了颜色/不透明度的 ListBox 中显示的 ViewModel 项目上添加了一个新属性。不是很好，因为每当将任何内容添加到列表中时都需要重新计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:08:16.610

为什么不将列表框数据模板的堆栈面板背景与视图模型中的 SolidColorBrush 对象绑定。无论 ObservalCollection 的项目索引是奇数还是偶数，数据模板都可以有自己的颜色。

# php - 正则表达式从带有特殊字符的字符串中提取数字

> ID：10532885
> 
> 赞同：-3
> 
> 时间：2012-05-10T11:17:36.197
> 
> 标签：php, regex

我有类似的字符串

> 8.123.351（这里有一些文字）

我用过正则表达式

```
/([0-9,]+(\.[0-9]{2,})+(\.[0-9]{2,})?)/ 
```

从字符串中获取值“8.123.351”。它适用于上面给出的字符串。

但是当字符串没有“。”时它不起作用。例如“179（这里有一些文字）”。我也修改了正则表达式以匹配这个值，但没有成功。

所以任何人都可以建议我使用正则表达式从字符串中获取数字，例如：

1.  8.123.351（这里有一些文字）
2.  179（这里有一些文字）
3.  179.123（这里有一些文字）
4.  179.1（这里有一些文字）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:24:10.473

```
/([0-9]+[,\.]?)+/ 
```

匹配你所有的字符串

顺便说一句...您的 RegEx 需要一个点来匹配，因为`+`说 1 个或多个匹配项。`*`为 0 或更多且`?`为 0 或 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:39:05.783

你不是很清楚。我做了一些假设来创建一个模式。

1.  数字在字符串的开头
2.  点前至少有 1 位，最多 3 位

现在我们创建你的表情

1.  匹配行首的 1 到 3 位数字

    ```
    /^\d{1,3}/ 
    ```

2.  可选（`?`在组之后）一个点和一到三个数字

    ```
    /^\d{1,3}(?:\.\d{1,3})?/ 
    ```

3.  带点的这部分可以重复 0 次或多次（`?`用 a代替`*`）

    ```
    /^\d{1,3}(?:\.\d{1,3})*/ 
    ```

    [在 Regexr 上](http://regexr.com?30tfa)查看

如果你想阅读一些关于正则表达式的基础知识，[我写了一篇关于这个的博客文章](http://blog.xisb.de/?p=4)。

# entity-framework - 实体框架代码优先忽略表映射

> ID：10532888
> 
> 赞同：0
> 
> 时间：2012-05-10T11:17:56.873
> 
> 标签：entity-framework, ef-code-first, entity-framework-4.3

我们有一个使用现有遗留数据库的 ef 项目，但使用 ef-migrations 向其中添加新表。对于这些实体，我们使用新模式创建表，以将它们与旧表分开。我们在 db 表上使用类名的复数形式的约定。但是，当我们添加要映射到遗留表（没有复数表名）的新类时，ef 似乎忽略了映射。实体类：

```
public class Aktor:IVersionedEntityWithId
{
    public int Id { get; set; }
    public string Navn { get; set; }
    public byte[] Version { get; set; }
} 
```

映射代码：

```
 protected virtual void MapAktor(EntityTypeConfiguration<Tilsyn.Domain.Aktor> config){
        config.ToTable("dbo.Aktor");
        config.Property(v=>v.Version).IsConcurrencyToken().IsRowVersion(); 
        config.HasKey(e=>e.Id); 
    } 
```

例外：

> System.Data.EntityCommandExecutionException：执行命令定义时出错。有关详细信息，请参阅内部异常。---> System.Data.SqlClient.SqlException：无效的对象名称“dbo.Aktors”。

似乎生成的 sql 仍然在类名中添加一个 s 来获取表名。这张照片中缺少什么？我用的`ToTable`方法不对吗？

更新：将类名更改为表名以外的其他名称时，它似乎可以工作。再次改名后，问题就消失了。是否有 EF 缓存或隐藏的映射文件 somwehere？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:24:18.660

尝试覆盖 DBContext 子类中的 OnModelCreating() 方法来创建映射。

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Tilsyn.Domain.Aktor>().ToTable("dbo.Aktor");
} 
```

# gwt - 使用 SmartGWT 窗口和 PresenterWidget 的 GWTP 错误

> ID：10532891
> 
> 赞同：0
> 
> 时间：2012-05-10T11:18:09.007
> 
> 标签：gwt, window, smartgwt, popuppanel

我正在使用 SmartGWT 3.0 和 GWTP 0.7。

我正在尝试做一个显示 SmartGWT 窗口的简单 PresenterWidget。这是小部件演示器的代码：

```
import com.gwtplatform.mvp.client.PresenterWidget;
import com.gwtplatform.mvp.client.PopupView;
import com.google.inject.Inject;
import com.google.web.bindery.event.shared.EventBus;

public class DemoWidgetPresenter extends
    PresenterWidget<DemoWidgetPresenter.MyView> {

public interface MyView extends PopupView {
}

@Inject
public DemoWidgetPresenter(final EventBus eventBus, final MyView view) {
    super(eventBus, view);
}

@Override
protected void onBind() {
    super.onBind();
}

@Override
protected void onReveal() {
    super.onReveal();
    System.out.println(">>>> onReveal()");
}
} 
```

以及查看代码：

```
import com.gwtplatform.mvp.client.PopupViewImpl;
import com.google.inject.Inject;
import com.google.web.bindery.event.shared.EventBus;
import com.google.gwt.user.client.ui.Widget;
import com.smartgwt.client.widgets.Window;
import com.smartgwt.client.widgets.events.CloseClickEvent;
import com.smartgwt.client.widgets.events.CloseClickHandler;

public class DemoWidgetView extends PopupViewImpl implements
    DemoWidgetPresenter.MyView {

private Window winModal;

@Inject
public DemoWidgetView(final EventBus eventBus) {
    super(eventBus);

    winModal = new Window();
    winModal.setWidth(300);
    winModal.setHeight(500);
    winModal.setTitle("Export file");
    winModal.setShowMinimizeButton(false);
    winModal.setIsModal(true);
    winModal.setShowModalMask(true);
    winModal.centerInPage();
    winModal.setCanDragResize(true);
    winModal.addCloseClickHandler(new CloseClickHandler() {
        @Override
        public void onCloseClick(CloseClickEvent event) {
            winModal.hide();
        }
    });
}

@Override
public void center() {
    winModal.centerInPage();
}

@Override
public void hide() {
    winModal.hide();
}

@Override
public void setPosition(int left, int top) {
    winModal.setLeft(left);
    winModal.setTop(top);
}

@Override
public void show() {
    winModal.show();
}

public Widget asWidget() {
    return winModal;
}
} 
```

在节目的另一部分，我向这位演示者展示： `addToPopupSlot(dp, true);`

`dp`的注入实例在哪里`DemoWidgetPresenter`？

何时`DemoWidgetPresenter`显示引发以下异常：

```
com.google.gwt.event.shared.UmbrellaException: One or more exceptions caught, see full                                    set in UmbrellaException#getCauses
at com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:129)
at com.smartgwt.client.widgets.BaseWidget.fireEvent(BaseWidget.java:67)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
at     com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
at sun.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassCastException: com.smartgwt.client.widgets.Window cannot be cast to com.google.gwt.user.client.ui.PopupPanel
at com.gwtplatform.mvp.client.PopupViewImpl.asPopupPanel(PopupViewImpl.java:130)
at com.gwtplatform.mvp.client.PopupViewImpl.setCloseHandler(PopupViewImpl.java:104)
at com.gwtplatform.mvp.client.PresenterWidget.monitorCloseEvent(PresenterWidget.java:574)
at com.gwtplatform.mvp.client.PresenterWidget.addToPopupSlot(PresenterWidget.java:205)
at com.demo.client.core.mvp.DiffPresenter$9.onClick(DiffPresenter.java:397)
at com.smartgwt.client.widgets.events.ClickEvent.dispatch(ClickEvent.java:96)
at com.smartgwt.client.widgets.events.ClickEvent.dispatch(ClickEvent.java:1)
at com.google.gwt.event.shared.GwtEvent.dispatch(GwtEvent.java:1)
at com.google.web.bindery.event.shared.EventBus.dispatchEvent(EventBus.java:40)
at com.google.web.bindery.event.shared.SimpleEventBus.doFire(SimpleEventBus.java:193)
at com.google.web.bindery.event.shared.SimpleEventBus.fireEvent(SimpleEventBus.java:88)
at com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:127)
at com.smartgwt.client.widgets.BaseWidget.fireEvent(BaseWidget.java:67)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
at sun.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
at java.lang.Thread.run(Unknown Source) 
```

我看到问题是由于之间的转换 `com.smartgwt.client.widgets.Window`， `com.google.gwt.user.client.ui.PopupPanel`但我不知道如何解决它！

尽管出现异常，但仍会显示窗口，但从`onReveal()`不调用函数，因此演示者的生命周期被破坏了。

任何想法/解决方法:-)？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-08T08:51:45.270

在我的例子中，我们使用 UIBinder XML 来定义布局，我遇到了 GWTBootstrap3 的模态组件的问题。

我已经使用上述解决方案推出了自定义 ModalPopupAdapter，但需要在不同部分添加以下内容：

**视图中的 Java 代码**

```
@UiField(provided = true)
Modal modal = new Modal();

@UiField(provided = true)
ModalPopupAdapter modalPopupAdapter = new ModalPopupAdapter(modal); 
```

**UIBinder XML**

```
<afr:ModalPopupAdapter ui:field="modalPopupAdapter">
    <bs:Modal ui:field="modal" other-attributes...> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T13:56:09.690

我找到了一个做适配器类的解决方案：

```
import com.google.gwt.event.logical.shared.CloseEvent;
import com.google.gwt.event.logical.shared.CloseHandler;
import com.google.gwt.event.shared.HandlerRegistration;
import com.google.gwt.user.client.ui.PopupPanel;
import com.gwtplatform.mvp.client.PopupView;
import com.gwtplatform.mvp.client.PopupViewImpl;
import com.smartgwt.client.widgets.Window;
import com.smartgwt.client.widgets.events.CloseClickEvent;
import com.smartgwt.client.widgets.events.CloseClickHandler;

/**
 * Adapter class for {@link Window}. This class it is necessary when a
 * {@link PopupView} uses as widget a {@link Window}. GWTP library does an
 * explicit cast to {@link PopupPanel} in {@link PopupViewImpl} and a cast
 * exception is raised. This class adapts only these functions which are call in
 * {@link PopupViewImpl}.
 * 
 * 
 */
public class PopupPanelAdapter extends PopupPanel {

private Window delegate;

public PopupPanelAdapter(Window delegate) {
    this.delegate = delegate;
    // adapting window close event
    delegate.addCloseClickHandler(new CloseClickHandler() {
        @Override
        public void onCloseClick(CloseClickEvent event) {
            CloseEvent.fire(PopupPanelAdapter.this, null);
        }
    });
}

public void hide() {
    delegate.hide();
}

public void show() {
    delegate.show();
}

@Override
public HandlerRegistration addCloseHandler(CloseHandler<PopupPanel> handler) {
    return super.addCloseHandler(handler);
}

@Override
public boolean isShowing() {
    return isVisible();
}

@Override
public void center() {
    delegate.centerInPage();
}

@Override
public void setPopupPosition(int left, int top) {
    if (delegate == null)// call in constructor, delegate is null
        return;
    delegate.setLeft(left);
    delegate.setTop(top);
}
} 
```

它工作正常！

# ruby - 哪个 Vim 插件自动完成 Ruby 代码？

> ID：10532892
> 
> 赞同：7
> 
> 时间：2012-05-10T11:18:09.333
> 
> 标签：ruby, vim, plugins, autocomplete

前段时间，当我使用 Janus 时，我可以自动完成 Ruby 代码。我不是指`SuperTab`插件意义上的“自动完成”，我的意思是，例如，当你输入

```
collection.ea 
```

然后敲击`Tab`键，你得到

```
collection.each do ||

end 
```

并且您的光标位于`||`. 你也可以在定义方法时做类似的事情。

有谁知道那个插件是怎么叫的？问题是我不再使用 Janus，所以我没有那个插件了。我查看了 Janus 文档中的每个插件，但找不到。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T11:21:02.383

会不会是[狙击手](http://www.vim.org/scripts/script.php?script_id=2540)？

[您可以在此处](https://github.com/scrooloose/snipmate-snippets)找到 Snipmate 的 Ruby 片段。

做就是了：

```
git clone https://github.com/scrooloose/snipmate-snippets.git
rake deploy_local 
```

# php - 如何在php中显示数据库中下拉列表的选定值

> ID：10532896
> 
> 赞同：0
> 
> 时间：2012-05-10T11:18:35.887
> 
> 标签：php

如何从我的 mysql 数据库中显示下拉列表的选定值。下拉列表取决于我的`Category`下拉列表。这些是代码：

```
<?php $id = $_GET["id"];
if(!$pupcon){
    die(mysql_error());
}
mysql_select_db($database_pupcon, $pupcon);

$getDropdown2 = mysql_query("select * from tblitemname where CategoryID = $id");
    while($row = mysql_fetch_array($getDropdown2)){
        echo "<option value=\"".$row["ItemID"]."\">".$row["Item_Name"]."</option>";
    }   ?> 
```

以下是`Category`填充下拉列表的第一个下拉列表 ( )的代码`Item Name`。

```
<select name="Category" id="Category" class="field select large" onChange="loadXMLDoc(this.value);">
                                <?php do {  ?>
                                <option value="<?php echo $row_Recordset1['CategoryID']?>"<?php if (!(strcmp($row_Recordset1['CategoryID'], $row_editRecordset['CategoryID']))) {echo "selected=\"selected\"";} ?>><?php echo $row_Recordset1['CategoryName']?></option>
                                <?php } while ($row_Recordset1 = mysql_fetch_assoc($Recordset1)); $rows = mysql_num_rows($Recordset1); if($rows > 0) {
  mysql_data_seek($Recordset1, 0);
  $row_Recordset1 = mysql_fetch_assoc($Recordset1);}?>
                            </select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:22:10.287

在列出下拉选项时，您可以检查当前值是否`ItemID`与传递的`id`值匹配。如果匹配，则`selected="selected"`在其中输入一个。尝试：

```
$selected = ($row['ItemID'] == $id);
echo "<option value=\"".$row["ItemID"]."\" ".($selected ? " selected=\"selected\"":"").">".$row["Item_Name"]."</option>"; 
```

**编辑**

我试图清理一些代码......不知道你为什么使用 a`do...while`因为`$row_Recordset1`在第一次迭代时不可用。

```
<select name="Category" id="Category" class="field select large" onChange="loadXMLDoc(this.value);">
    <?php 
    while ($row_Recordset1 = mysql_fetch_assoc($Recordset1)) {  
    ?>
    <option value="<?php echo $row_Recordset1['CategoryID']; ?>"<?php if (!(strcmp($row_Recordset1['CategoryID'], $row_editRecordset['CategoryID']))) { echo " selected=\"selected\""; } ?>>
    <?php echo $row_Recordset1['CategoryName']; ?>
    </option>
    <?php 
    }
    ?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:22:25.813

你可以在里面使用这段代码

```
$selected=$row["ItemID"]==$id ?'Selected':'';
echo "<option value=\"".$row["ItemID"]."\" {$selected} >".$row["Item_Name"]."</option>";; 
```

# magento - Magento 快速搜索 - 首先显示给定类别的结果

> ID：10532899
> 
> 赞同：0
> 
> 时间：2012-05-10T11:19:04.957
> 
> 标签：magento, sorting, collections, magento-1.6

我希望进行正常的快速搜索，并增加一个功能：给定类别的结果排在第一位。

到目前为止，我已经 对其进行`protected function _getProductCollection()`了修改`Mage_CatalogSearch_Block_Result`并且可以正常工作，但是它忽略了我想在两组结果中应用的自定义搜索结果（例如按价格或名称）。

我的附加代码是：

```
$initial = $this->_productCollection->getAllIds();
$this->_productCollection->addCategoryFilter(Mage::getModel('catalog/category')->load(3));

$newids = $this->_productCollection->getAllIds();//$this->_productCollection->getAllIds();

$merged_ids = array_merge($newids, $initial);
$merged_ids = array_unique($merged_ids);

$this->_productCollection->addCategoryFilter(Mage::getModel('catalog/category')->load(2));

$this->_productCollection->getSelect()->order("find_in_set(e.entity_id,'".implode(',',$merged_ids)."')"); 
```

其中 cat 2 是根类别。

那么，集合在哪里进行排序？如果我把它移到那里，那应该可以解决我相信的问题（？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:12:06.157

它可能不适用于每个人的情况，但添加以下内容对我有用：

```
$this->_productCollection->setOrder($this->getRequest()->getParam('order'), $this->getRequest()->getParam('dir')); 
```

所以我最终得到了一个`protected function _getProductCollection()`：

```
protected function _getProductCollection()
{
    if (is_null($this->_productCollection)) {
        $this->_productCollection = $this->getListBlock()->getLoadedProductCollection();
    }
    $this->_productCollection->setOrder($this->getRequest()->getParam('order'), $this->getRequest()->getParam('dir'));
    $initial = $this->_productCollection->getAllIds();
    $this->_productCollection->addCategoryFilter(Mage::getModel('catalog/category')->load(3));

    $newids = $this->_productCollection->getAllIds();//$this->_productCollection->getAllIds();

    $merged_ids = array_merge($newids, $initial);
    $merged_ids = array_unique($merged_ids);

    $this->_productCollection->addCategoryFilter(Mage::getModel('catalog/category')->load(2));

    $this->_productCollection->getSelect()->order("find_in_set(e.entity_id,'".implode(',',$merged_ids)."')"); 

    return $this->_productCollection;
} 
```

# python - Python BeautifulSoup 错误

> ID：10532901
> 
> 赞同：3
> 
> 时间：2012-05-10T11:19:10.783
> 
> 标签：python, web-crawler, beautifulsoup, lxml, html5lib

我有这个脚本：

```
import urllib2
from BeautifulSoup import BeautifulSoup
import html5lib
import lxml

soup = BeautifulSoup(urllib2.urlopen("http://www.hitmeister.de").read()) 
```

但这给了我以下错误：

```
Traceback (most recent call last):
  File "akaConnection.py", line 59, in <module>
    soup = BeautifulSoup(urllib2.urlopen("http://www.hitmeister.de").read())
  File "/usr/lib/pymodules/python2.6/BeautifulSoup.py", line 1499, in __init__
    BeautifulStoneSoup.__init__(self, *args, **kwargs)
  File "/usr/lib/pymodules/python2.6/BeautifulSoup.py", line 1230, in __init__
    self._feed(isHTML=isHTML)
  File "/usr/lib/pymodules/python2.6/BeautifulSoup.py", line 1263, in _feed
    self.builder.feed(markup)
  File "/usr/lib/python2.6/HTMLParser.py", line 108, in feed
    self.goahead(0)
  File "/usr/lib/python2.6/HTMLParser.py", line 148, in goahead
    k = self.parse_starttag(i)
  File "/usr/lib/python2.6/HTMLParser.py", line 226, in parse_starttag
    endpos = self.check_for_whole_start_tag(i)
  File "/usr/lib/python2.6/HTMLParser.py", line 301, in check_for_whole_start_tag
    self.error("malformed start tag")
  File "/usr/lib/python2.6/HTMLParser.py", line 115, in error
    raise HTMLParseError(message, self.getpos())
HTMLParser.HTMLParseError: malformed start tag, at line 56, column 872 
```

然后我尝试了这段代码：

```
soup = BeautifulSoup(urllib2.urlopen("http://www.hitmeister.de").read(),"lxml") 
```

或者

```
soup = BeautifulSoup(urllib2.urlopen("http://www.hitmeister.de").read(),"html5lib") 
```

这给了我这个错误：

```
Traceback (most recent call last):
  File "akaConnection.py", line 59, in <module>
    soup = BeautifulSoup(urllib2.urlopen("http://www.hitmeister.de").read(),"lxml")
  File "/usr/lib/pymodules/python2.6/BeautifulSoup.py", line 1499, in __init__
    BeautifulStoneSoup.__init__(self, *args, **kwargs)
  File "/usr/lib/pymodules/python2.6/BeautifulSoup.py", line 1230, in __init__
    self._feed(isHTML=isHTML)
  File "/usr/lib/pymodules/python2.6/BeautifulSoup.py", line 1263, in _feed
    self.builder.feed(markup)
  File "/usr/lib/python2.6/HTMLParser.py", line 108, in feed
    self.goahead(0)
  File "/usr/lib/python2.6/HTMLParser.py", line 156, in goahead
    k = self.parse_declaration(i)
  File "/usr/lib/pymodules/python2.6/BeautifulSoup.py", line 1112, in parse_declaration
    j = HTMLParser.parse_declaration(self, i)
  File "/usr/lib/python2.6/markupbase.py", line 109, in parse_declaration
    self.handle_decl(data)
  File "/usr/lib/pymodules/python2.6/BeautifulSoup.py", line 1097, in handle_decl
    self._toStringSubclass(data, Declaration)
  File "/usr/lib/pymodules/python2.6/BeautifulSoup.py", line 1030, in _toStringSubclass
    self.soup.endData(subclass)
  File "/usr/lib/pymodules/python2.6/BeautifulSoup.py", line 1318, in endData
    (not self.parseOnlyThese.text or \
AttributeError: 'str' object has no attribute 'text' 
```

我正在运行 Linux Ubuntu 10.04，Python 2.6.5，BeautifulSoup 版本是：'3.1.0.1' 如何修复我的代码，或者我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:51:48.320

如评论中所建议，请使用[`pytidylib`](http://countergram.com/open-source/pytidylib)...

```
import urllib2
from StringIO import StringIO

from BeautifulSoup import BeautifulSoup
from tidylib import tidy_document

html = urllib2.urlopen("http://www.hitmeister.de").read()
tidy, errors = tidy_document(html)
soup = BeautifulSoup(tidy)
print type(soup) 
```

运行这个...

```
(py26_default)[mpenning@Bucksnort ~]$ python foo.py
<class 'BeautifulSoup.BeautifulSoup'>
(py26_default)[mpenning@Bucksnort ~]$ 
```

* * *

`errors`来自`pytidylib`：_

```
line 53 column 1493 - Warning: '<' + '/' + letter not allowed here
line 53 column 1518 - Warning: '<' + '/' + letter not allowed here
line 53 column 1541 - Warning: '<' + '/' + letter not allowed here
line 53 column 1547 - Warning: '<' + '/' + letter not allowed here
line 132 column 239 - Warning: '<' + '/' + letter not allowed here
line 135 column 231 - Warning: '<' + '/' + letter not allowed here
line 434 column 98 - Warning: replacing invalid character code 156
line 453 column 96 - Warning: replacing invalid character code 156
line 780 column 108 - Warning: replacing invalid character code 159
line 991 column 27 - Warning: replacing invalid character code 156
line 1018 column 43 - Warning: '<' + '/' + letter not allowed here
line 1029 column 40 - Warning: '<' + '/' + letter not allowed here
line 1037 column 126 - Warning: '<' + '/' + letter not allowed here
line 1039 column 96 - Warning: '<' + '/' + letter not allowed here
line 1040 column 71 - Warning: '<' + '/' + letter not allowed here
line 1041 column 58 - Warning: '<' + '/' + letter not allowed here
line 1047 column 126 - Warning: '<' + '/' + letter not allowed here
line 1049 column 96 - Warning: '<' + '/' + letter not allowed here
line 1050 column 72 - Warning: '<' + '/' + letter not allowed here
line 1051 column 58 - Warning: '<' + '/' + letter not allowed here
line 1063 column 108 - Warning: '<' + '/' + letter not allowed here
line 1066 column 58 - Warning: '<' + '/' + letter not allowed here
line 1076 column 17 - Warning: <input> element not empty or not closed
line 1121 column 140 - Warning: '<' + '/' + letter not allowed here
line 1202 column 33 - Error: <g:plusone> is not recognized!
line 1202 column 33 - Warning: discarding unexpected <g:plusone>
line 1202 column 88 - Warning: discarding unexpected </g:plusone>
line 1245 column 86 - Warning: replacing invalid character code 130
line 1265 column 33 - Warning: entity "&gt" doesn't end in ';'
line 1345 column 354 - Warning: '<' + '/' + letter not allowed here
line 1361 column 255 - Warning: unescaped & or unknown entity "&_s_icmp"
line 1361 column 562 - Warning: unescaped & or unknown entity "&_s_icmp"
line 1361 column 856 - Warning: unescaped & or unknown entity "&_s_icmp"
line 1397 column 115 - Warning: replacing invalid character code 130
line 1425 column 116 - Warning: replacing invalid character code 130
line 1453 column 115 - Warning: replacing invalid character code 130
line 1481 column 116 - Warning: replacing invalid character code 130
line 1509 column 116 - Warning: replacing invalid character code 130
line 1523 column 251 - Warning: replacing invalid character code 159
line 1524 column 259 - Warning: replacing invalid character code 159
line 1524 column 395 - Warning: replacing invalid character code 159
line 1533 column 151 - Warning: replacing invalid character code 159
line 1537 column 115 - Warning: replacing invalid character code 130
line 1565 column 116 - Warning: replacing invalid character code 130
line 1593 column 116 - Warning: replacing invalid character code 130
line 1621 column 115 - Warning: replacing invalid character code 130
line 1649 column 115 - Warning: replacing invalid character code 130
line 1677 column 115 - Warning: replacing invalid character code 130
line 1705 column 115 - Warning: replacing invalid character code 130
line 1750 column 150 - Warning: replacing invalid character code 130
line 1774 column 150 - Warning: replacing invalid character code 130
line 1798 column 150 - Warning: replacing invalid character code 130
line 1822 column 150 - Warning: replacing invalid character code 130
line 1826 column 78 - Warning: replacing invalid character code 130
line 1854 column 150 - Warning: replacing invalid character code 130
line 1878 column 150 - Warning: replacing invalid character code 130
line 1902 column 150 - Warning: replacing invalid character code 130
line 1926 column 150 - Warning: replacing invalid character code 130
line 1954 column 186 - Warning: unescaped & or unknown entity "&charge"
line 2004 column 100 - Warning: replacing invalid character code 156
line 2033 column 162 - Warning: replacing invalid character code 159
line 21 column 1 - Warning: <meta> proprietary attribute "property"
line 22 column 1 - Warning: <meta> proprietary attribute "property"
line 23 column 1 - Warning: <meta> proprietary attribute "property"
line 29 column 1 - Warning: <meta> proprietary attribute "property"
line 30 column 1 - Warning: <meta> proprietary attribute "property"
line 31 column 1 - Warning: <meta> proprietary attribute "property"
line 412 column 9 - Warning: <body> proprietary attribute "itemscope"
line 412 column 9 - Warning: <body> proprietary attribute "itemtype"
line 1143 column 1 - Warning: <script> inserting "type" attribute
line 1225 column 44 - Warning: <table> lacks "summary" attribute
line 1934 column 9 - Warning: <div> proprietary attribute "name"
line 436 column 41 - Warning: trimming empty <li>
line 446 column 89 - Warning: trimming empty <li>
line 1239 column 33 - Warning: trimming empty <span>
line 1747 column 37 - Warning: trimming empty <span>
line 1771 column 37 - Warning: trimming empty <span>
line 1795 column 37 - Warning: trimming empty <span>
line 1819 column 37 - Warning: trimming empty <span>
line 1851 column 37 - Warning: trimming empty <span>
line 1875 column 37 - Warning: trimming empty <span>
line 1899 column 37 - Warning: trimming empty <span>
line 1923 column 37 - Warning: trimming empty <span>
line 2018 column 49 - Warning: trimming empty <span>
line 2026 column 49 - Warning: trimming empty <span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-30T07:14:48.520

urllib 和 urllib2 存在版本依赖关系。我做了同样的事情：

```
sock=urllib.urlopen("http://www.espncricinfo.com/ci/engine/match/903603.html") 
```

htmlSource=sock.read()

我按属性使用soup.find_all。希望这有帮助

# silverlight - 似乎服务方法并没有真正异步调用

> ID：10532904
> 
> 赞同：0
> 
> 时间：2012-05-10T11:19:16.400
> 
> 标签：silverlight

关于我之前的帖子：[910220 - 服务方法独立运行](http://www.codeproject.com/Questions/381390/910220-service-methods-run-dependently) ，因为代码和我对它的问题的意思有点复杂，我再次带着完全改变的代码来更好地解释自己。

在客户端，我们有：

```
#define USE_ONLY_ONE_INSTANCE

using System;
using System.ComponentModel;
using System.Windows;
using System.Windows.Controls;
using CountTester.ServiceReference1;

namespace CountTester
{
    public partial class MainPage : UserControl
    {
#if USE_ONLY_ONE_INSTANCE
        private readonly Service1Client _sc = new Service1Client();
#endif

        public MainPage()
        {
            InitializeComponent();
#if USE_ONLY_ONE_INSTANCE
            _sc.CountCompleted += OnCountCompleted;
#endif
        }

        void OnCountCompleted(object sender, AsyncCompletedEventArgs e)
        {
            if (e.Error != null)
                throw new Exception(string.Format("Count Error {0}", e.Error));
        }

        private void UserControl_Loaded(object sender, RoutedEventArgs e)
        {
            for (int i = 0; i < 100; i++)
            {
#if USE_ONLY_ONE_INSTANCE
                _sc.CountAsync(i);
#else
                var sc = new Service1Client();
                sc.CountCompleted += OnCountCompleted;
                sc.CountAsync(i);
                //sc.CloseAsync();
#endif
            }
        }
    }
} 
```

这是 XAML 背后的代码。在代码中，我调用了一个服务方法 100 次。我尝试了这两种情况并在两种情况下都出现异常： 情况 1：我只使用一个代理实例与服务器进行所有通信。案例 2：我为每次与服务器的通信使用一个实例。

在更多描述之前，让我们看看服务器上的代码：

```
using System.IO;
using System.ServiceModel;
using System.ServiceModel.Activation;
using System.Text;
using System.Threading;

namespace CountTester.Web
{
    [ServiceContract(Namespace = "")]
    [SilverlightFaultBehavior]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class Service1
    {
        const string logFileName = @"h:\CountTester.log";
        object _logLock = new object();

        void log(string s)
        {
            lock (_logLock)
            {
                var streamWriter = new StreamWriter(logFileName, true, Encoding.ASCII);
                streamWriter.Write(s);
                streamWriter.Close();
            }
        }

        Service1()
        {
            //File.Delete(logFileName);
        }

        [OperationContract]
        public void Count(int counter)
        {
            log(string.Format("{0}\n", counter));
            Thread.Sleep(3000);
        }
    }
} 
```

Count 是被调用的服务方法。我故意在方法中等待 3 秒。我期望的是，客户端的 for 可以毫不拖延地完成。我希望该方法被异步调用，这意味着第一次调用不会影响第二次调用。

换句话说，如果我调用该方法并且它等待完成，再次调用它不会延迟。

虽然是这样。我怎么知道会发生这种情况？通过使用 Tail for Windows，我发现记录的数字在被记录时被延迟。当我看到响应调用服务方法（计数错误...）时出现超时异常时，我也发现了这一点。我希望我能澄清我的问题。

我还想知道当我看到程序出现故障时（异常），当我取消注释我关闭服务的行时？

请回答这两个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:29:14.910

## 问题一：

默认情况下，您的 IIS Web 服务将只允许来自同一 IP 地址的 2 个同时请求。此限制是阻止 DOS（拒绝服务）攻击的默认设置。

这意味着随后的 98 个调用每对至少等待 3 秒，而之前的调用完成。最终，您将在处理最后一个请求之前很久就达到默认的 30 秒（？）服务器超时。

如果您坚持同时运行这么多请求（无论如何都不应该），您将需要增加服务器上 web.config 文件中的默认限制。[有关详细信息，请在此处查看我的其他答案](https://stackoverflow.com/questions/9872342/queueing-up-service-calls/9875238#9875238)

## 问题2：

您不应该在启动异步调用后立即关闭它......调用仍在进行中。该代码没有任何意义。

## 笔记：

*无论如何，为了提高效率，日志记录都会被延迟，所以不要以此为指导。*

# android - Android - 从资源中检索字符串数组

> ID：10532907
> 
> 赞同：41
> 
> 时间：2012-05-10T11:19:31.347
> 
> 标签：android, string, resources

下面是我为检索字符串数组项所做的代码：

```
String[] menuArray;

@Override
public void onCreate(Bundle savedInstanceState) 
{       
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ScrollView sv = new ScrollView(this);
    LinearLayout ll = new LinearLayout(this);
    ll.setOrientation(LinearLayout.VERTICAL);
    sv.addView(ll);

 // Create an ArrayAdapter that will contain all list items
    ArrayAdapter<String> adapter;

    menuArray = getResources().getStringArray(R.array.menu); 

    for(int i = 0; i < menuArray.length; i++) 
    {
        Button b = new Button(this);
        b.setText(menuArray[i]);
        ll.addView(b);
    }

    this.setContentView(sv);
 } 
```

这是 strings.xml 文件：

```
 <string-array name="menu">
        <item>1</item>
        <item>2</item>
        <item>3</item>
        </string-array> 
```

但是，要编译的***R.array.menu 存在***此问题：从 ADT 14 开始，资源字段不能用作切换案例。调用此修复程序以获取更多信息。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2017-08-28T07:24:39.970

如何从资源中检索字符串数组：

*数组.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string-array name="my_string_array">
        <item>one</item>
        <item>two</item>
        <item>three</item>
    </string-array>

</resources> 
```

代码

```
String[] stringArray = getResources().getStringArray(R.array.my_string_array); 
```

*（OP 已经回答了他们的问题，但根据问题标题，其他人可能会来这里寻找这个答案。）*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-10T12:28:32.570

```
for(int i = 0;i<menuArray.length; i++) 
{
    Button b = new Button(this);
    b.setText(menuArray[i]);
    ll.addView(b);
} 
```

删除以下语句

```
 try {
        x = count();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } 
```

并尝试为所有布局提供布局高度和宽度..

# php - 读取一定数量的项目后如何停止解析 XML？

> ID：10532909
> 
> 赞同：1
> 
> 时间：2012-05-10T11:19:46.627
> 
> 标签：php, xml-parsing

我正在解析非常大的 XML 并将其用作指南：[http](http://www.php.net/manual/en/example.xml-structure.php) ://www.php.net/manual/en/example.xml-structure.php 。我实现了一个计数器，每次读取一个元素时都会增加一个计数器，并且希望在读取前 10 个元素后停止解析。

这是我尝试过的代码：

```
function startElement($parser, $name, $attrs) {
    if ($count == 10) {
        print_r($items);
        break; //this is not working, is exiting the script.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:50:24.233

## 原因

由于`startElement`被分配为 的`start_element_handler`，`$xml_parser`处理`startElement`程序不断在`while`循环中被间接调用：

```
xml_set_element_handler($xml_parser, "startElement", "endElement");
// code excluded for brevity
while ($data = fread($fp, 4096)) {
    if (!xml_parse($xml_parser, $data, feof($fp))) {
        // code excluded for brevity
    }
} 
```

* * *

## 解决方案

如果 XML 非常大，并且您不想花费循环解析整个内容，因为您只对开始时的元素感兴趣，您可以使用`$count`to 来`break`退出`while`循环：

```
while ($data = fread($fp, 4096)) {
    if($count > 10) break;
    if(!xml_parse($xml_parser, $data, feof($fp))) {
        // code excluded for brevity
    }
} 
```

* * *

## 附加信息

因为您一次读取 4096 个字节，所以您的`$items`数组中可能最终会包含 10 多个项目。您可以根据您的输入将该数字减少到 2048 或 1024 个字节。

### 变量范围

如果您使用定义的变量并使用未传递给它的函数之外的范围，则必须`global`在使用这些变量之前使用关键字。例如，如果您`$count = 0`在程序开头附近定义并希望在`endElement`处理程序中增加它，它应该看起来像这样：

```
function endElement($parser, $name)  {
    global $count;
    $count++;
} 
```

### `array_slice`

您可以像这样摆脱`$items`数组的前 10 个元素以外的所有元素：

```
$output = array_slice($items, 0, 10); 
```

# c# - t4 “使用”关键字

> ID：10532913
> 
> 赞同：3
> 
> 时间：2012-05-10T11:20:05.517
> 
> 标签：c#, c#-4.0, t4

我是t4的新手。

我想为cs文件生成代码。我创建了一个新的 tt 文件。

```
<#@ template debug="false" hostspecific="false" language="C#" #>
<#@ output extension=".cs" #>

class IOperation {

<#
OperationSection section = null;

#>
} 
```

OperationSection 是同一程序集中的一个类。我假设我应该使用“使用”关键字。

我怎么做？现在我收到一个错误

错误 2 编译转换：找不到类型或命名空间名称“OperationSection”（您是否缺少 using 指令或程序集引用？）

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T11:22:40.470

使用[`import`](http://msdn.microsoft.com/en-us/library/gg586948.aspx)指令：

```
<#@ import namespace="YourNamespace" #> 
```

此外，您可能需要添加一个[`assembly`](http://msdn.microsoft.com/en-us/library/gg586946)指令来引用定义该类的程序集：

```
<#@ assembly name="$(SolutionDir)\MyProject\bin\Debug\SomeLibrary.Dll" #> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:22:32.530

您需要[`import`](http://msdn.microsoft.com/en-us/library/gg586948.aspx)为命名空间添加一个指令`OperationSection`。它们看起来像这样：

```
<#@ import namespace="System" #> 
```

# sql-server - 如何在同一查询中使用 Count 和 Sum？

> ID：10532914
> 
> 赞同：0
> 
> 时间：2012-05-10T11:20:10.893
> 
> 标签：sql-server, sql-server-2008, count, sum, aggregate

我使用聚合函数“SUM”编写了以下查询。

```
SELECT 
       D.PODetailID, 
       SUM(D.AcceptedQty) 
FROM STR_MRVDetail D 
INNER JOIN STR_MRVHeader H ON H.MRVID = D.MRVID 
INNER JOIN PUR_POHeader PH ON PH.POID = H.POID 
INNER JOIN PUR_PODetail PD ON PD.PODetailID = D.PODetailID
WHERE H.StatusID = 4
AND PH.POID = 839
AND (SELECT 
           SUM(AcceptedQty) 
     FROM 
           STR_MRVDetail 
     WHERE 
           STR_MRVDetail.PODetailID = PD.PODetailID) = 
                              (SELECT POQuantity FROM PUR_PODetail 
                               WHERE PUR_PODetail.PODetailID = PD.PODetailID)
                               GROUP BY D.PODetailID 
```

目前，此查询返回 2 行。我想检索此查询的计数。如何计算上述查询的行数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:52:46.400

您可以添加`@@ROWCOUNT`到查询中，它还会为您提供最终结果集以及结果集中所有行的计数。

```
SELECT D.PODetailID, SUM(D.AcceptedQty), @@ROWCOUNT FROM STR_MRVDetail D  
INNER JOIN STR_MRVHeader H ON H.MRVID = D.MRVID  
INNER JOIN PUR_POHeader PH ON PH.POID = H.POID  
INNER JOIN PUR_PODetail PD ON PD.PODetailID = D.PODetailID 
WHERE H.StatusID = 4 
AND PH.POID = 839 
AND (SELECT SUM(AcceptedQty) FROM STR_MRVDetail  
     WHERE STR_MRVDetail.PODetailID = PD.PODetailID) =  
     (SELECT POQuantity FROM PUR_PODetail  
      WHERE PUR_PODetail.PODetailID = PD.PODetailID) 
GROUP BY D.PODetailID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:40:09.820

```
SELECT COUNT(*) as Total_Rows
FROM
(
SELECT D.PODetailID as PODetailID, SUM(D.AcceptedQty) as Total_AcceptedQty
FROM STR_MRVDetail D 
INNER JOIN STR_MRVHeader H ON H.MRVID = D.MRVID 
INNER JOIN PUR_POHeader PH ON PH.POID = H.POID 
INNER JOIN PUR_PODetail PD ON PD.PODetailID = D.PODetailID
WHERE H.StatusID = 4
AND PH.POID = 839
AND (SELECT SUM(AcceptedQty) FROM STR_MRVDetail 
     WHERE STR_MRVDetail.PODetailID = PD.PODetailID) = 
     (SELECT POQuantity FROM PUR_PODetail 
      WHERE PUR_PODetail.PODetailID = PD.PODetailID)
GROUP BY D.PODetailID
) as t 
```

# java - Java Applet 加载时间和罕见的不稳定

> ID：10532916
> 
> 赞同：0
> 
> 时间：2012-05-10T11:20:13.310
> 
> 标签：java, applet, load, internet-explorer-7

我们在我们的网络中运行 Java Applet 应用程序 ~ 数百个实例。大约 2% 的用户报告小程序启动有问题或小程序在一段时间后被终止，我们不知道可能是什么原因。

1) **Java Applet 启动非常缓慢**- 即使使用 java quickstart 和 Windows Vista 预取技术，applet 在启动时也会非常缓慢，可能需要大约 10 - 30 秒。我们应该检查什么？我们试图最小化小程序的大小，但没有任何可衡量的改进。

2）Applet 正在运行，**几分钟不活动 Java 托盘图标被删除**（是否有任何超时属性？这种行为怎么可能？）当用户点击小程序时，整个 IE7 浏览器冻结并且用户被迫杀死整个资源管理器。 exe进程。在这种情况下我们应该检查什么？

一般说我对软件环境不满意，但强迫我们公司切换不同的java版本或不同的浏览器版本并不容易：/测试并不容易，因为我在第一段中提到的问题很少出现〜2％。

环境：Windows XP/Windows Vista；IE7 ; Java 6.23 + Java 快速入门

谢谢你的想法。

# xul - 独立的 XULRunner 应用程序 ProgressListener

> ID：10532918
> 
> 赞同：0
> 
> 时间：2012-05-10T11:20:18.077
> 
> 标签：xul, xpcom, xulrunner

我正在开发一个独立的 XULRunner 应用程序，在其中向用户提供有关页面加载时发生的情况的反馈很重要。我的第一个实现是由[MDN 教程指导](https://developer.mozilla.org/en/Code_snippets/On_page_load)的。但是，这只适用于我从代码中打开的页面。我无法就文档正文中的链接向用户提供反馈。进一步的搜索使我进入[了一个论坛主题](http://forums.mozillazine.org/viewtopic.php?t=607425)。按照这个人的做法，我可以监听页面加载事件，包括状态更改、进度更改和 URL 位置更改。我现在可以判断页面何时开始加载，以便显示进度条。我还可以判断页面何时完全加载，以便隐藏进度条。我的代码如下所示：

```
var myExt_urlBarListener = {
    QueryInterface: function(aIID)
    {
       if (aIID.equals(Components.interfaces.nsIWebProgressListener) ||
       aIID.equals(Components.interfaces.nsISupportsWeakReference) ||
       aIID.equals(Components.interfaces.nsISupports))
     return this;
     throw Components.results.NS_NOINTERFACE;
   },

   onLocationChange: function(aProgress, aRequest, aURI)
   {
     myExtension.processNewURL(aURI);
   },

   //onStateChange: function(a, b, c, d) {},
   onStateChange: function(aProgress, aRequest, aFlag, aStatus) {
      const STATE_START = Components.interfaces.nsIWebProgressListener.STATE_START;
      const STATE_STOP = Components.interfaces.nsIWebProgressListener.STATE_STOP; 

      if(aFlag & STATE_START) {
          document.getElementById("progressBar").hidden = false;
      }
      if(aFlag & STATE_STOP) {
        document.getElementById("progressBar").hidden = true;     
      }
      return 0;
   },
   onProgressChange: function(a, b, c, d, e, f) { return 0; },
   onStatusChange: function(a, b, c, d) { return 0; },
   onSecurityChange: function(a, b, c) { return 0; }
};

var myExtension = {
   oldURL: null,

   init: function() {
    // Listen for webpage loads
    document.getElementById("browser-id").addProgressListener(myExt_urlBarListener,
        Components.interfaces.nsIWebProgress.NOTIFY_STATE_DOCUMENT);
   },

   uninit: function() {
     document.getElementById("browser-id")
       .removeProgressListener(myExt_urlBarListener);
   },

   processNewURL: function(aURI) {
     if (aURI.spec == this.oldURL)
       return;

      // alert(aURI.spec);
     document.getElementById("statusBar").setAttribute("label", aURI.spec);
     // document.getElementById("progressBar").hidden = false;
     this.oldURL = aURI.spec;
    }
};

window.addEventListener("load", function() {myExtension.init()}, false);
window.addEventListener("unload", function() {myExtension.uninit()}, false); 
```

我想知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:47:50.387

不，使用[进度监听](https://developer.mozilla.org/en/Code_snippets/Progress_Listeners)器是要走的路——这就是 Firefox 在页面加载时用来显示状态变化的方法。但是，我建议使用[`XPCOMUtils.jsm`模块](https://developer.mozilla.org/en/JavaScript_code_modules/XPCOMUtils.jsm)来简化您的`QueryInterface`实现：

```
Components.utils.import("resource://gre/modules/XPCOMUtils.jsm");

...

QueryInterface: XPCOMUtils.generateQI([Components.interfaces.nsIWebProgressListener,
                                       Components.interfaces.nsISupportsWeakReference]), 
```

# java - 从用户向字符串数组添加元素时，将其替换为 null！爪哇

> ID：10532919
> 
> 赞同：0
> 
> 时间：2012-05-10T11:20:18.537
> 
> 标签：java, arrays, null

我有一个包含整数的二维字符串数组。

当我要求用户添加包含字符串和整数的元素时，程序会显示用户添加的内容 - 但它被替换为`null`.

这是代码：

```
 case 3:
            count++;

            System.out.println("Enter the type of the car: ");
            car[count][0] = ky.next();

            System.out.println("Enter the model of the car: ");
            String addM = ky.next();    // integer
            car[count][1] = addM;

            System.out.println("Enter the price of the car: ");
            String addP = ky.next();    // integer
            car[count][1] = addP;

            System.out.println("Enter the condition of the car: ");
            String addC = ky.next();
            car[count][3] = addC;

            System.out.println("Enter the odemeter of the car (if it is new put it 0): ");
            String addO = ky.next(); // integer
            car[count][1] = addO1;

            income -= Integer.parseInt(addP);

                break; 
```

这就是程序显示的：

```
Ford    2012  55000  new      0  
Toyota  2012  60000  new      0  
Honda   2011  25000  Used  6000  
null    null  null   null  null 
```

最后一行是用户应该添加的数据！

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T00:57:50.040

DRY := 不要重复自己：

```
String [] attribute = new String [] {"type", "model", "price", "condition", "odemeter"}; 
for (int i = 0; i < attribute.length; ++i)
{
        System.out.println ("Enter the "+attribute[i] +" of the car: ");
        car[count][i] = ky.nextInt ();
} 
```

如果属性真的是一个int，而ky是keyboard的缩写，是System.in上的一个Scanner，使用ky.nextInt()；

# python - 在 GAE 中从表中制作 Django CategoryProperty

> ID：10532923
> 
> 赞同：1
> 
> 时间：2012-05-10T11:20:32.437
> 
> 标签：python, django, google-app-engine, google-cloud-datastore

我想使用以下类别函数从数据库表中提取名称，并使用预先存在的表中的名称填充类别。即我怎么能使用，或者即使它是可能的？

```
companycategory = db.CategoryProperty 
```

我不知道如何做到这一点，也不知道这在 GAE 中是否可行。我提出的是使用以下示例[https://developers.google.com/appengine/articles/modeling](https://developers.google.com/appengine/articles/modeling)与联系人和电话号码，但是每当我在呈现页面时尝试这种方法时，我都无法从表中获取名称到下拉框不显示对象。

我在尝试：

```
class Company(db.Model):
    companyurl = db.StringProperty(required=False)
    companyname = db.StringProperty(required=False)

class CompanyCategory(db.Model):
    categoryname = db.StringProperty(required=True)
    company = db.ReferenceProperty(Company, collection_name='categories') 
```

这样做最聪明的方法是什么？总而言之，我希望每个公司都有多个类别，并将这些类别存储在表中而不是硬编码。并与 Django 合作！我要求太多了吗？

# 第二部分

这里有一点解释：

```
class Company(db.Model):
    companyurl = db.StringProperty(required=False)
    companyname = db.StringProperty(required=False)

class CompanyCategory(db.Model):
    categoryname = db.StringProperty(required=True)
    company = db.ReferenceProperty(Company, collection_name='categories')

    def __unicode__(self):
            return u'%s' % (self.categoryname) 
```

我希望在公司数据结构中拥有一种存储和选择类别的方法，这些类别本身就列在 DataStore 的表中。因此，一行可能有 Internet，另一个“银行”列在表名 CompanyCategory 中。模型如上。

如何将公司模型链接到类别模型，以便在 Django 中填充下拉列表？所有示例都无法链接，因此公司具有类别选项。抱歉，如果我遗漏了什么

# javascript - 无法让 javascript 从子 iframe 执行按钮单击

> ID：10532936
> 
> 赞同：1
> 
> 时间：2012-05-10T11:21:12.467
> 
> 标签：javascript, jquery, asp.net, jquery-ui, iframe

我正在玩 Jquery UI 对话框。我有一个带有gridview 的页面、一个刷新gridview 的按钮和一个链接。单击链接时，会弹出一个对话框窗口，其中包含记录的详细信息。

当我在子页面上按保存时，我让子页面从父页面调用 javascript 函数。在此函数中，它尝试执行按钮单击事件，但似乎不起作用。

如果您查看下面的 showThanks 函数，警报有效，按钮文本更改但按钮单击不起作用。

这可能是一项安全功能吗？两个页面现在都在同一页面上。

嗯有什么线索吗？

谢谢

编辑 - 如果您手动单击按钮，它会更改网格（在按钮事件处理程序中）。然而，jquery 似乎并没有进入按钮的事件处理程序，并且网格没有改变。

父页面html

```
<asp:GridView ID="gv" runat="server" />
<asp:Button ID="btnRefresh" runat="server" />
<a id="popoutUsers" href="popup.aspx?page=Bob" class="OpenNewLink">CLICK ME</a>
<script type="text/javascript">
    $(function () {
        $('.OpenNewLink').click(function () {

            var url = $(this).attr('href');
            var dialog = $('<div id="modal"></div>').appendTo('body')
            $('<iframe id="site" src="' + url + '" />').dialog({
                modal: true
                , close: function (event, ui) {
                    // remove div with all data and events
                    dialog.remove();
                }
            });

            return false;

        });

        showThanks = function () {
            alert("Thanks");
            var button = $("#btnRefresh");
            button.val("hello"); //This works
            button.click(); //Nothing seems to happen
            // button.trigger("click"); (Tried trigger as well but no luck)
        };

    });

</script> 
```

子页面

```
<div>
    Why hello there
    <asp:Button ID="btnBob" runat="server" Text="click me" />
</div>
<script type="text/javascript">
    $(function () {
        $('#btnBob').click(function (e) {
            e.preventDefault();
            window.parent.showThanks();
            window.parent.$('.ui-dialog-content').filter(function () { return $(this).dialog('isOpen'); }).dialog('close');
            return false;
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:07:27.557

于是决定做新一轮google搜索，发现这个链接[Html Button调用JQuery，不回发](https://stackoverflow.com/questions/4181295/html-button-that-calls-jquery-and-does-not-post-back)

我将按钮更改为以下（添加了 UseSubmitBehavior）

现在它可以工作了。希望我没有浪费人们的时间...

# android - Android视图背景擦除

> ID：10532937
> 
> 赞同：0
> 
> 时间：2012-05-10T11:21:14.090
> 
> 标签：android

我目前正在使用简单的 invalidate/onDraw 策略开发单视图 android 应用程序，并且注意到在调用 onDraw 方法之前画布总是被擦除。有谁知道在 onDraw 方法调用之前保留当前画布内容的简单方法？非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:49:10.803

使用位图来存储最后绘制的状态，并且在每个`onDraw`方法调用中，先将位图绘制到画布上。

# ruby-on-rails-3 - 如何为未暴露给宿主应用程序的 Rails 引擎创建 rake 任务？

> ID：10532942
> 
> 赞同：6
> 
> 时间：2012-05-10T11:21:33.687
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, rake, ruby-on-rails-plugins

```
# lib/tasks/test.rake
task :hello do
  puts 'hello'
end 
```

$ rake 应用程序：你好

要运行任务，我需要在它前面加上“app:”，它在虚拟应用程序的上下文中运行。它还以`rake hello`.

我想运行一个不需要 Rails 环境并运行一些命令的 rake 任务，但它是从引擎根目录运行的，而不是从虚拟应用程序根目录运行的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-07-28T12:15:18.483

我知道这有点晚了，但是对于在这里寻找正确答案的其他人，请执行以下操作：

创建你的任务：

```
# lib/tasks/your_engine_tasks.rake
desc "Explaining what the task does"
task :your_task do
  # Task goes here
end 
```

然后转到您的引擎 ./Rakefile 并添加

```
load 'lib/tasks/your_engine_tasks.rake' 
```

我们开始吧，现在：

```
$ rake -T 
```

给你你的任务。

希望我有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T00:30:52.590

我想要一个更好的答案来回答这个问题，但是我确实发现您可以在引擎的 Rakefile 中添加任务（因此 ./Rakefile 不在规范/虚拟应用程序中），如下所示：

```
task :my_task do
  puts "hi!"
end

task :default => [:spec, :my_task] 
```

我更愿意将我的任务放在另一个文件中，但至少这提供了一种前进的方式。就我而言，我想在虚拟应用程序中运行 Konacha javascript 测试，所以我的 Rakefile 看起来像这样：

```
task :spec_javascript do
  exec 'cd spec/dummy && rake konacha:run' # exec passes command return value up stack!
end

task :default => [:spec, :spec_javascript] 
```

# c# - 无法从 app.config 中读取变量

> ID：10532944
> 
> 赞同：1
> 
> 时间：2012-05-10T11:21:42.493
> 
> 标签：c#, app-config

我有的是`app.config`这个

```
<?xml version="1.0"?>
<configuration>
   <configSections>
      <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
          <section name="Porject.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
     </sectionGroup>
</configSections>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>
  <applicationSettings>
    <Porject.Properties.Settings>
        <setting name="PhotoLocation" serializeAs="String">
            <value>.\photos\</value>
        </setting>
    </Porject.Properties.Settings>
</applicationSettings>

<connectionStrings>
   <add name="****" connectionString="Data Source=***;Initial Catalog=****;User ID=***;Password=***" />
</connectionStrings>

</configuration> 
```

这就是我调用 PhotoLocation 的方式：

```
 string s = ConfigurationManager.AppSettings["PhotoLocation"]; 
```

当我请求获取连接字符串时，没有问题并且工作正常；但是当我要求`PhotoLocation`它返回null。同样`ConfigurationManager.AppSettings.Count`返回 0。

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T11:25:15.753

只需将其添加到您的应用程序配置文件中

```
<appSettings>

    <add key="PhotoLocation" value=".\photos\"/>

<appSettings> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T11:30:05.850

[ConfigurationManager.AppSettings](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.appsettings.aspx)读取（顾名思义）`AppSettings`您的配置块。

鉴于您已经创建了自己的部分，您希望使用`var section = ConfigurationManager.GetSection("Porject.Properties.Settings")`和读取该部分中的值。

# magento - Magento 网站不断请求登录信息在购物车和产品之间浏览

> ID：10532952
> 
> 赞同：0
> 
> 时间：2012-05-10T11:22:01.993
> 
> 标签：magento, magento-1.6

**网站 - [http://www1.internetvoipphone.co.uk/](http://www1.internetvoipphone.co.uk/)**

注意 - [http://www.internetvoipphone.co.uk/](http://www.internetvoipphone.co.uk/)使用 V1.3.2，www1 地址是我们上线前的 V1.6 开发站点，所以请只看那个。

**问题**- 当用户登录然后浏览回他们从 https 切换回 http 的产品页面时，这反过来又将它们注销，我们找不到 magento 将某些链接更改为 https 而不是其他链接的原因

用于测试的帐户详细信息：

用户名：test@test.com 密码：密码

我已经尝试重置为默认模板，但问题仍然存在，所以它必须是一个 magento 配置问题，非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:25:53.467

这个问题似乎是由 cookie 引起的，我们使用两个 URL 的 www1.internetvoipphone.co.uk 和 secure.internetvoipphone.co.uk，每个域都发送了一个似乎有冲突的 cookie“前端”。

将 cookie 域设置为 .internetvoipphone.co.uk 会生成一个 cookie，但似乎已经解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:27:24.957

是的，在使用开发安装时，cookie 路径和浏览器的缓存可能会对 Magento 造成严重破坏，即使在另一个域上也是如此。

# php - 如何检查 PHP 中是否有 4 天前的内容？

> ID：10532956
> 
> 赞同：0
> 
> 时间：2012-05-10T11:22:24.760
> 
> 标签：php, unix, time

我正在尝试编写一个函数来检查“完成的课程”是否是四天前。例如，我如何检查所述课程是否在该时间范围内。如果昨天完成，2天前，3天前，4天前，那是真的，因为它在“4天前”的时间范围内。

我该如何检查？

到目前为止，我已经完成了：

```
$time = time();

$fourDays = 345600;
$threeDays = 259200;
$lastLesson = $ml->getLesson($cid, $time, true);

$lastLessonDate = $lastLesson['deadline'];
$displayLastLesson = false;
if ($lastLessonDate  + $fourDays < $time)
{
    $displayLastLesson = true;
    //We print lesson that was finished less than 4 days ago
}
else
{
    //We print lesson that is in the next 3 days

} 
```

现在，if 语句一直为真，这不是我想要的，因为我有一个在 5 月 3 日完成的课程。对于 7 日完成的课程，我猜应该是这样吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:33:50.517

```
$time = time();
$fourDays = strtotime('-4 days');
$lastLesson = $ml->getLesson($cid, $time, true);

$lastLessonDate = $finishedLesson['deadline'];
$displayLastLesson = false;
if ($lastLessonDate >= $fourDays && $lastLessonDate <= $time)
{
    $displayLastLesson = true;
    //We print lesson that was finished less than 4 days ago
}
else
{
    //We print lesson that is in the next 3 days

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:52:59.897

所有计算都应相对于今天上午 12 点计算，而不是`time()`为您提供现在的当前时间（例如下午 6 点） 这是一个问题，因为当您这样做时，1 天前（现在 - 24 小时）表示昨天下午 6 点和今天之间的时间下午 6 点。相反，昨天应该是指昨天凌晨 12 点到今天凌晨 12 点之间的时间。

下面是一个简化的计算来说明这个想法：

```
$lastLessonDate = strtotime($lastLessonDate);
$today = strtotime(date('Y-m-d')); // 12:00am today , you can use strtotime('today') too
$day = 24* 60 * 60;
if($lastLessonDate > $today) // last lesson is more than 12:00am today, meaning today
 echo 'today';
else if($lastLessonDate > ($today - (1 * $day))
 echo 'yesterday';
else if($lastLessonDate > ($today - (2 * $day))
 echo '2 days ago';
else if($lastLessonDate > ($today - (3 * $day))
 echo '3 days ago';
else if($lastLessonDate > ($today - (4 * $day))
 echo '4 days ago';
else
 echo 'more than 4 days ago'; 
```

# php - 在 Web 应用程序表单中保留初级键值以进行更新

> ID：10532960
> 
> 赞同：0
> 
> 时间：2012-05-10T11:22:33.503
> 
> 标签：php, oop, web-applications

我正在开发一个 php web 应用程序。

我有点好奇人们在检索对象时如何在 Web 表单中存储对象的主键值，以便他们可以通过使用检索到的键引用相同的记录来更新相关记录？

例如。我检索了 pk_id=10 的员工记录。当用户对对象进行更改时，我们需要更新 pk_id 10 的对象。所以我需要将 pk_id 存储在表单中。

我想将值存储在隐藏的输入字段中。这会是一个问题吗。

专业人士如何做到这一点？

rgds 里夫基

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:31:22.197

Hidden input field is fine and a good solution.

Storing it in the session is also an option but if you're using the session a lot already you may as well use the hidden input, a session is almost the most secure option though.

One possible problem is that someone may change the value in their html form's hidden input before submitting the form; it's very unlikely though.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:28:31.527

三种方式：

*   使用`hidden input`，这就是它们的用途。

*   您可以在更新 url 的获取字段中携带 id。（如
    `update.php?pk_id=17`）因此，当您将表单发布到自身时，您仍然可以获得 id。

*   如果你想隐藏它，你可以在会话中存储 id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T13:41:21.007

有两种方式 - 由@marvin（即客户端）标识的方式，以及在会话中。

如果您使用客户端标识，请非常非常小心。在您的示例中，如果某人知道他们的主键，那么将他们的薪水设置为一百万美元将是非常容易的。@Thomas Hudspith-Tatham 说这不太可能——我不同意，尤其是对于一个面向公众的网站。在互联网的早期，有几个电子商务商店不得不以 0.01 美元的价格接受高端产品的订单，因为该应用程序使用客户端机制在页面之间传输数据。

顺便说一句，在修改数据时，使用 POST 而不是 GET 是一种很好的形式 - 因此隐藏字段在风格上比 URL 参数更好。

使用会话有点痛苦——您必须担心负载平衡和 cookie 过期，但攻击者要更改您不希望他们更改的数据要困难得多。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-10T11:26:52.107

是的。你说的对。将主键 ID 存储在隐藏字段中是个好主意。如果您愿意，也可以从 URL 传递相同的内容。（获取参数）

# java - 类型转换仅适用于保存到数据库而不用于显示

> ID：10532961
> 
> 赞同：0
> 
> 时间：2012-05-10T11:22:34.450
> 
> 标签：java, spring, hibernate, spring-mvc, type-conversion

我正在使用 PropertyEditor 初始化 WebDataBinder 以处理将 String 转换为 Document 对象，以便可以将其保存到数据库中。（我的 Hibernate 映射需要它）。这工作正常。

我的问题是当我显示 DocumentRevision 表时，其中 documentNumber 保存为 Document 类型，它显示如下内容：**testapp.domain.document@1f93466**

*   我是否必须创建一个新的 PropertyEditor 将文档类型转换为字符串？
*   我该怎么做？*（一个例子将不胜感激，因为我只看到过相反的方式，字符串 --> 对象）*

我正在使用 Spring 3.0 和 Hibernate 3

**代码：**

Document.java 映射

```
@OneToMany(mappedBy="document_number", cascade = CascadeType.ALL)
private Set<DocumentRevision> documentRevisions;

public void setDocumentRevisions(Set<DocumentRevision> documentRevisions){
    this.documentRevisions = documentRevisions;
} 
```

DocumentRevision.java 映射

```
@ManyToOne(cascade = CascadeType.ALL)
@JoinColumn(name="DOCUMENT_NUMBER")
private Document document_number; 

public void setDocument_number(Document document_number){
    this.document_number = document_number;
}

public Document getDocument_number(){
    return document_number;
} 
```

两个表的关系是多个 DocumentRevision 可以有相同的 DocumentNumber 而单个 DocumentRevision 只能有一个 DocumentNumber

控制器的一部分：

```
class DocumentPropertyEditor extends PropertyEditorSupport {

@Override
public void setAsText(String text) throws IllegalArgumentException {
    Document value =  documentService.retrieveDocumentNumber(text);
    setValue(value);
}

@Override
public String getAsText() {
    Document d = (Document) getValue();
    return d != null ? String.valueOf(d.getDocumentNumber()) : "";
}
}
@InitBinder
public void initBinder(WebDataBinder binder) {
    binder.registerCustomEditor(Document.class, new DocumentPropertyEditor());
}

@RequestMapping(value="/list", method=RequestMethod.GET) 
public String getDocumentRevisionList(Model model) {
List<DocumentRevision> documentRevisions = documentRevisionService.retrieveAllDocumentRevisions();
model.addAttribute("documentRevisions", documentRevisions);
return "document-revision";

@RequestMapping(value="/add", method=RequestMethod.GET)
public String getDocumentRevision(Model model) {
DocumentRevision documentRevision = new DocumentRevision();
model.addAttribute("documentRevisionAttribute", documentRevision);
model.addAttribute("documentNumberList", documentService.retrieveAllDocumentNumbers());

return "new-documnent-revision";
}

@RequestMapping(value="/add", method=RequestMethod.POST)
public String postDocumentRevision(@ModelAttribute("documentRevisionAttribute") @Valid DocumentRevision documentRevision, BindingResult result) {

if(result.hasErrors()){
    return "new-document-revision";
}

documentRevisionService.createDocumentRevision(documentRevision);
return "redirect:/testapp/document-revision/list";  
} 
```

retrieveDocumentNumber(text) 方法：

```
public Document retrieveDocumentNumber(String text){
return (Document) this.sessionFactory.getCurrentSession().get(Document.class, text);
} 
```

显示 DocumentRevision 列表的 jsp 页面的一部分：

```
 <c:forEach items="${documentRevisions}" var="documentRevision">
  <tr>
   <td><c:out value="${documentRevision.documentId}"/></td>
   <td><c:out value="${documentRevision.documentNumber}" /></td>
   <td><c:out value="${documentRevision.documentRState}" /></td>
   <td><a href="${addUrl}">Add</a></td>
  </tr>
 </c:forEach> 
```

感谢您的时间和帮助！

/D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:34:21.513

看起来它调用了默认的 toString() 方法。您可以在文档类中重新定义此方法。在这种情况下，它会输出你想要的。

# android - 既然插件在不同的移动平台上是不同的，那么phone gap怎么能跨平台呢？

> ID：10532962
> 
> 赞同：0
> 
> 时间：2012-05-10T11:22:34.450
> 
> 标签：android, iphone, ios, cordova, phonegap-plugins

对于 IOS 或 Android 应用程序的外观和感觉，我们必须编写本机插件。例如，如果我在 IOS 中开发了一个应用程序，并且我必须将其移植到 Android 上说我使用了 6 个插件（日历、空中打印、电子邮件编辑器、照片编辑、facebook、twitter）。然后可能我也必须在android中开发那个插件。. 除此之外，如果我们必须创建自定义插件，也很耗时。

现在我的问题是，如果我们正在从网站开发简单的列表应用程序，那么 phonegap 非常有用，因为不需要更改任何代码。Phonegap 是跨平台的。

此外，当项目很重（更多活动对不起更多页面）时，phonegap 是否会由于多个 ajax 请求和 javascript 加载而导致性能问题？

所以我的问题是，对于需要大量插件且需要更多插件的应用来说，phonegap 是否可靠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:26:15.643

您只能使用 html 和 javascript 进行编程。所以没有机会在android中使用ios用户控件。

# c++ - 我加密但无法使用 C++ 执行文件解码

> ID：10532966
> 
> 赞同：0
> 
> 时间：2012-05-10T11:22:48.097
> 
> 标签：c++, file, encryption, xor

编写一个与我的密码程序类似的密码程序：•提示用户输入密钥并使用它来计算随机数生成器的种子•提示用户提供输入文件的名称和输出编码/解码文件• 使用从用户密钥获得的种子从随机数生成器创建随机字节序列。• 使用随机位 r 对位 x 进行编码，如下所示： x⊕ = r • 由于∀r ∈{0,1}，r ⊕r = 0，使用相同的随机字节序列和相同的操作 x 执行解码⊕ = r。解码基于运算 x⊕r ⊕r = x⊕(r ⊕r) = x⊕0 = x

下面是用于加密的代码，但在解密时，密文仅包含 3 个字符。我无法弄清楚为什么解码不起作用。我正在使用 Dev-C++。您的帮助将不胜感激。

```
 #include<iostream>
  #include<conio.h>
  #include<math.h>
  #include<stdlib.h>
  #include<fstream>

  using namespace std;

  int main()
  {   
    char  n, line[1024],  keystring[100]; char FitoEncr[100], NewFiCrypt[100];
    char FiletobeDecrypted[100];
    ifstream IS ("FitoEncr.txt", ios::in);
    ofstream OS ("NewFiCrypt.txt", ios::out); 

    unsigned int psswd=0, number;
    cout<<"Please, enter a secret key :";
    cin.getline(keystring, 100);
    for( int i=0;keystring[i]!='\0'; i++)

      psswd=(psswd+3)*keystring[i];
    cout<<"initial password: "<<keystring<<endl;
    cout<<"encrypted password: "<<psswd<<endl;

    cout<<"please, enter the name of the input file: ";
    cin.getline(FitoEncr,20);
    cout<<"please, enter the name of the output file: ";
    cin.getline(NewFiCrypt,20);

    srand(psswd);    //not sure about creating the sequence of random bytes from a...
    number=rand() % 255; //random number generator with the seed obtained from user's secret key

   //ENCRYPTION

    while(IS.get(n))
     {
         if(IS.get(n))
         {      
           n^=rand();
           OS<<n;
           cout<<"character coded:"<<n;   
         }

     }
     IS.close();
     OS.close();

    //DECRYPTION

     ifstream IS1;
     ofstream OS1; 

     IS1.open("NewFiCrypt.txt", ios::in);
     OS1.open("FilDecr.txt", ios::out); 

     while(IS1.get(n))
     {
       if(IS1.get(n))
       {      
         n^=rand();  //I think the problem starts on this line...
         OS1<<n;
         cout<<"character coded:"<<n;   
       }

     }       
     IS1.close();
     OS1.close();     

     getch();

     return 0;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:26:59.343

您在加密之前播种随机数生成器，而不是在解密之前播种，因此随机数系列会有所不同；显然，它们必须相同才能起作用。如果您添加另一个

```
srand(psswd); 
```

在第二次解密之前，这会让你更接近。

然而，仔细观察，还有一些重要的其他问题。例如，每次调用 时`get(n)`，都会使用输入文件中的一个字符。您正在调用`get(n)`您的 while 循环条件，但随后立即在您的`if`;中再次调用它。这意味着您将有效地跳过输入和输出中的所有其他字符；解密后的文件将只包含原始文件中 25% 的字符！只需`if`完全删除这些语句，您的循环就会正确。希望解决了这两个问题，您的程序将可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:50:41.847

也许您应该首先检查它在没有 n ^= rand(); 的情况下在文件中写入的内容；线。没有它，它应该只是复制文件对吗？

# android - 动画后点击图片

> ID：10532972
> 
> 赞同：1
> 
> 时间：2012-05-10T11:23:19.950
> 
> 标签：android, click, android-animation

我有这个奇怪的问题。我有一个图像，我使用`rotateAnimation`.

当用户单击图像时，我已经处理了单击事件，如下所示：

```
@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.imageView1:
        finish();
        Intent i = new Intent(this, Next.class);
        startActivity(i);
        break;
        }
} 
```

我面临的问题是，旋转图像后，单击图像时不会触发单击事件，而是在单击图像最初所在的位置时触发单击事件。

我知道我必须在这里遗漏一些基本的东西，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T11:29:51.920

`Animation`s 不会导致动画`View`改变位置或大小。它们仅显示此类转换，而不会影响`View`. 因此，您看到的行为。

如果您想实际移动/调整`View`对象大小，`AnimationListener`请在`onAnimationEnd`.

# node.js - 如何在猫鼬中更新？

> ID：10532981
> 
> 赞同：6
> 
> 时间：2012-05-10T11:23:57.660
> 
> 标签：node.js, mongodb, mongoose

我是 Mongoose/nodejs 的新手，我正在努力简单地更新数组中的数组。

这是架构：

```
var County = new Schema({
_id                 : Schema.ObjectId,
name                : String,
biggestCity         : String
});

var Country = new Schema({
_id                 : Schema.ObjectId,
name                : String,
counties                : {type: [County], ref: "County"}
});

var Continent = new Schema({
    _id       : Schema.ObjectId,
    countries : {type: [Country], ref: "Country"},
}); 
```

这是我一直在尝试的更新代码：

```
var continents = mongoose.model("Continent");
var update = { "countries.counties.name": newName, "countries.counties.biggestCity": newBiggestCity };
var conditions = { "_id": countryId, "countries.name": countryName, "countries.counties.name": countyName };
var options = { multi: false }; 
wagers.update(conditions, update, options, function(err, numAffected) {
    //callback code...
}); 
```

执行此操作时，err 中的错误为“无法使用字符串字段名称'counties' 附加到数组”。这是什么意思？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:34:56.807

您应该将子对象定义为另一个 Schema，而不仅仅是一些匿名对象的列表。（[参考](https://groups.google.com/forum/#!msg/mongoose-orm/Papuwduny3Q/FKYXE84UUk0J)。）

尝试定义`Country`为单独的 Schema，将其嵌套在 中`Continent`，然后进行更新。

# lwuit - 将 LWUIT 项目转换为 Codenameone 时出错

> ID：10532989
> 
> 赞同：0
> 
> 时间：2012-05-10T11:24:18.927
> 
> 标签：lwuit, codenameone

我正在尝试将现有的 LWUIT 项目转换为 Codenameone。我将源代码和资源复制到一个新的 j2me 项目中，然后将 codename1.jar 添加到项目的库中，然后修复源代码中的导入，一切似乎都很好，但是当我运行 midlet 时，我得到了这个：

`No Class Def Found Error java/lang/NoClassDefFoundError` `com/codename1/impl/ImplementationFactory`

图书馆里有什么东西不见了吗？
我使用 codenameone 作为库，我不使用设计器。
难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:22:54.320

您需要使用来自 SVN 的 Codename One 源并编译 Codename One 的 MIDP 端口来构建原生 J2ME 应用程序。

# spring-security - Pentaho Security：如何使用 CAS 实现 SSO

> ID：10532992
> 
> 赞同：2
> 
> 时间：2012-05-10T11:24:41.043
> 
> 标签：spring-security, single-sign-on, cas, pentaho

我尝试基于此示例使用 pentaho 实现 SSO：[http](http://blog.datamensional.com/2011/07/pentaho-sso-setup-using-cas-and-ldap/) ://blog.datamensional.com/2011/07/pentaho-sso-setup-using-cas-and-ldap/但我有一些问题。我正在使用 pentaho 4，我想将身份验证数据源更改为 mysql 表并告诉 pentaho 使用它们进行身份验证

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:08:10.540

你检查过这里：

[http://infocenter.pentaho.com/help/topic/security_guide/task_auth_cas_sso.html?resultof=%22%73%73%6f%22%20](http://infocenter.pentaho.com/help/topic/security_guide/task_auth_cas_sso.html?resultof=%22%73%73%6f%22%20)

或者只是在信息中心搜索“sso”..

# powershell - 使用 WMI 查询远程服务器上的分区/驱动器

> ID：10532994
> 
> 赞同：1
> 
> 时间：2012-05-10T11:24:50.747
> 
> 标签：powershell, wmi

我执行以下操作来检查远程计算机上的本地驱动器/分区：

```
Get-WmiObject -Class Win32_Share -ComputerName SERVERNAME -Filter "Description='Default share'" 
```

但该命令还返回 CD-rom 等。是否有仅返回磁盘/分区的命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:18:14.770

```
Get-WmiObject -Class Win32_LogicalDisk -Filter "DriveType=3" | 
Foreach-Object {$_.DeviceID} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:04:51.980

试试这个：

```
Get-WMIObject Win32_DiskPartition  -computername remotecomp |

ForEach-Object {
$info = @{}
$info.Disk = $_.DiskIndex
$info.Partition = $_.Index 
$info.DriveLetter = $_.psbase.GetRelated('Win32_LogicalDisk') |     
Select-Object -ExpandProperty DeviceID    
    New-Object PSObject -Property $info
}

$info # contains partions number and unit letter as hashtable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:33:32.227

`Get-WmiObject -query "Select * from Win32_DiskPartition"`... 也许？

# iphone - 如何更改搜索栏的颜色？

> ID：10532995
> 
> 赞同：7
> 
> 时间：2012-05-10T11:24:57.837
> 
> 标签：iphone, objective-c, xcode, uisearchbar

我已经实现了一个搜索栏，我想更改搜索栏的颜色。我怎样才能做到这一点？

我试过：

```
self.mySearchBar.backgroundColor = [UIColor redColor]; 
```

但没有成功。

**更新（已解决）：**

在使用以下代码定义背景颜色之前，我必须删除默认背景颜色。

```
for (UIView *subview in mySearchBar.subviews) {
    if ([subview isKindOfClass:NSClassFromString(@"UISearchBarBackground")]) {
        [subview removeFromSuperview];
        break;
    }
} 
```

...所以代码将是下一个：

```
 for (UIView *subview in mySearchBar.subviews) {
      if ([subview isKindOfClass:NSClassFromString(@"UISearchBarBackground")]) {
          [subview removeFromSuperview];
          break;
      }
  } 

  self.mySearchBar.backgroundColor = [UIColor redColor]; 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-12-12T07:37:16.977

尝试：

```
self.mySearchBar.barTintColor = [UIColor redColor]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-19T11:11:11.030

```
self.mySearchBar.backgroundColor = [UIColor redColor]; 
```

什么都不会做

但

```
self.mySearchBar.tintColor = [UIColor redColor]; 
```

将要！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T11:28:40.423

```
 self.mySearchBar.backgroundVolor = [UIColor redColor]; 
```

“Volor”或“Color”

```
 self.mySearchBar.backgroundColor = [UIColor redColor]; 
```

另外，如果您想对其进行着色：

根据文档：[https://developer.apple.com/iphone/library/documentation/UIKit/Reference/UISearchBar_Class/Reference/Reference.html](https://developer.apple.com/iphone/library/documentation/UIKit/Reference/UISearchBar_Class/Reference/Reference.html)， UISearchBar 类上有一个 tintColor 属性。

在 TableSearch 示例中：[https](https://developer.apple.com/library/ios/#samplecode/TableSearch/) ://developer.apple.com/library/ios/#samplecode/TableSearch/搜索栏在 MainView.xib 中定义和加载。如果要更改其 tintColor 或样式，只需在 xib 中进行，它将被加载到应用程序中。

但是更改背景颜色的唯一真正方法是覆盖它，请查看以下问题的答案

[UISearchBar 清除背景颜色或设置背景图片 [iphone sdk]](https://stackoverflow.com/questions/2139115/uisearchbar-clear-background-color-or-set-background-image-iphone-sdk)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-13T14:06:05.117

我不确定它自 iOS7 以来是否发生了变化，但似乎搜索显示控制器中的搜索栏需要一个额外的循环才能正确删除 UISearchBarBackground 视图。

我创建了一个递归方法来正确清理搜索栏。

```
- (void) removeUISearchBarBackgroundInViewHierarchy:(UIView *)view
{
    for (UIView *subview in [view subviews]) {
        if ([subview isKindOfClass:NSClassFromString(@"UISearchBarBackground")]) {
            [subview removeFromSuperview];
            break; //To avoid an extra loop as there is only one UISearchBarBackground
        } else {
            [self removeUISearchBarBackgroundInViewHierarchy:subview];
        }
    }
} 
```

您可以简单地将搜索栏发送到该方法，然后更改颜色，有点像上面建议的答案。

```
[self removeUISearchBarBackgroundInViewHierarchy:self.searchDisplayController.searchBar];
self.searchDisplayController.searchBar.backgroundColor = yourUIColor; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-04T18:17:41.073

我必须将 UISearchBar 设置`searchBarStyle`为`.default`，否则没有任何效果。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-16T19:50:19.427

```
searchBar.barTintColor =  UIColor.redColor() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-10T11:30:50.763

试试这个代码，它对我来说很好。

```
for( UIView* v in [parent subviews] ) { 
if( [v isKindOfClass:[UISearchBar class]] ) {
  [(UISearchBar*)v  setTintColor:[UIColor blackColor]];
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-22T16:21:14.767

如果您对顶线和底线有疑问，请尝试删除 UISearchBarBackground：

```
self.searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, self.tableView.frame.size.width, 50)];

for (UIView *subview in self.searchBar.subviews) {
    if ([subview isKindOfClass:NSClassFromString(@"UISearchBarBackground")]) {
        [subview removeFromSuperview];
        break;
    }
    for (UIView *subsubview in subview.subviews) {
        if ([subsubview isKindOfClass:NSClassFromString(@"UISearchBarBackground")]) {
            [subsubview removeFromSuperview];
            break;
        }
    }
}

self.searchBar.barTintColor = [UIColor redColor];
self.searchBar.backgroundColor = [UIColor redColor]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-08T14:12:13.317

取决于你到底要改变什么

```
searchBar.barTintColor
searchBar.tintColor 
```

![](../Images/523308820892945d38168ca646d3a136.png)

您可以自定义的其他项目包括一些额外的代码