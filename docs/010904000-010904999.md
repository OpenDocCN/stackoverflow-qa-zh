# StackOverflow 问答 10904000-10904999

# iphone - 我可以在 XCode 4.3.2 中禁用“将调试器从 GDB 升级到 LLDB”警告吗？

> ID：10904001
> 
> 赞同：5
> 
> 时间：2012-06-05T19:55:04.130
> 
> 标签：iphone, ios, xcode, xcode4, lldb

我不想对 Apple 的 LLDB 调试器进行 beta 测试。如何让 XCode 停止唠叨我升级调试器？每次我构建时看到那个警告感叹号是相当烦人的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T23:46:34.100

根据上面 CodaFi 的评论，目前无法禁用该警告。

# database - 我无法连接到 Visual Basic 中的数据库

> ID：10904007
> 
> 赞同：0
> 
> 时间：2012-06-05T19:55:24.117
> 
> 标签：database, vb.net, connection-string

我有以下代码：

```
 Dim string_conectare As String = "Data Source=|DataDirectory|\Database1.sdf"
    Dim conexiune As SqlConnection
    conexiune = New SqlConnection(string_conectare)
    conexiune.Open()

    If conexiune.State = ConnectionState.Open Then
        MsgBox("OK")
    Else
        MsgBox("not ok")
    End If 
```

如您所见，我想打开与数据库的连接，但每次我想测试它时都会收到此错误：

```
A network-related or instance-specific error occurred while establishing a 
connection to SQL Server. The server was not found or was not accessible. 
Verify that the instance name is correct and that SQL Server is 
configured to allow remote connections. (provider: SQL Network Interfaces, 
error: 26 - Error Locating Server/Instance Specified) 
```

我挣扎了2个多小时，所以请帮助我！

后期编辑：

我试过这个：

```
 Dim string_conectare As String = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|DataDirectory|\Database1.sdf;Persist Security Info=True"
    Dim conexiune As OleDbConnection
    conexiune = New OleDbConnection(string_conectare)
    conexiune.Open()

    If conexiune.State = ConnectionState.Open Then
        MsgBox("OK")
    Else
        MsgBox("not ok")
    End If 
```

但它给我这个错误：

```
 Unrecognized database format 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T22:51:21.620

以下是我用来连接数据库的相同代码的摘录：

```
Private Sub btnLogin_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnLogin.Click
    Dim conn As MySqlConnection

    'Connect to the database using these credentials
    conn = New MySqlConnection
    conn.ConnectionString = "server=your server site (generally long url); user id=login id for mysql user; password=self explanatory; database=name of the DB you're trying to reach"

    'Try and connect (conn.open)
    Try
        conn.Open()

    Catch myerror As MySqlException 'If it fails do this... (i.e. no internet connection, etc.)
        MsgBox("Error connecting to database. Check your internet connection.", MsgBoxStyle.Critical)
    End Try

    'MySQL query (where to call for information)
    Dim myAdapter As New MySqlDataAdapter

    'Tell where to find the file with the emails/passes stored
    Dim sqlquery = "SELECT * FROM the database you selected above WHERE Email = '" & txtEmail.Text & "' AND Password = '" & txtPassword.Text & "'"
    Dim myCommand As New MySqlCommand
    myCommand.Connection = conn
    myCommand.CommandText = sqlquery

    'Start query
    myAdapter.SelectCommand = myCommand
    Dim myData As MySqlDataReader
    myData = myCommand.ExecuteReader

    If myData.HasRows = 0 Then
        MsgBox("Invalid email address or password.", MsgBoxStyle.Critical)

    Else
        MsgBox("Logged in as " & txtEmail.Text & ".", MsgBoxStyle.Information)

        Me.Close()

    End If

End Sub 
```

试试看。

请务必将资源 MySQL.Data 添加到您的项目中，并使用以下方法调用它：

```
Imports MySQL.Data.MySQLClient 
```

还！确保在创建数据库时启用了外部数据库访问。如果你不这样做，那么 VB 程序将无法访问它，它只会限制对你的虚拟主机的访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:04:09.140

Jet OLEDB Provider 用于 Access 数据库。它无法处理 sdf 文件。尝试使用正确的连接字符串。

您可以借助该网站为您的数据库获取正确的连接字符串： [www.ConnectionStrings.com](http://www.connectionstrings.com/sql-server-2005-ce)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T09:27:13.163

应用程序是否构建在共享存储上，您正尝试从本地计算机运行它？如果包含应用程序的服务器无权访问 db，这可能是一个问题

# ajax - Ajax / JSON 重绘谷歌图表

> ID：10904010
> 
> 赞同：0
> 
> 时间：2012-06-05T19:55:45.703
> 
> 标签：ajax, json, google-visualization

我在这里使用 google 可视化图表 api：[https](https://developers.google.com/chart/interactive) ://developers.google.com/chart/interactive来制作似乎运行良好的服务器正常运行时间图。

但是我希望用户能够选择一个日期范围，然后重新绘制图表，而无需刷新浏览器。我对此有一个小问题。

我首先使用初始数据绘制图表，然后如果用户更改日期范围，则应重新绘制此图表。我尝试用一​​些示例数据重绘，效果很好。但是我似乎无法让它与更新的数据一起使用。

现在在我从数据库中获取数据的 php 文件中，我返回此期间的平均正常运行时间以及该期间的总正常运行时间，如下所示：

```
/*mysql query striped*/
$uptime_result = mysql_query($query, $connection) or die(mysql_error());

$uptime_data = "['Day',   'Uptime'],";
while ($items = mysql_fetch_array($uptime_result)){
    $uptime_data.="['{$items['date']}',{$items['uptime']}], ";
}

// get average uptime
/*mysql query striped*/
$uptime_result = mysql_query($query, $connection) or die(mysql_error());

$result_array = mysql_fetch_array($uptime_result);
$avg_uptime = round($result_array['AVG(uptime)'],2);

echo "{\"data\":\"{$uptime_data}\",\"average\":$avg_uptime}"; 
```

输出如下：

```
{"data":"['Day', 'Uptime'],['2012-05-31',100.00], ['2012-06-01',100.00], ['2012-05-  22',99.65], ['2012-05-21',99.65], ['2012-05-20',100.00], ['2012-05-31',100.00], ['2012-05-30',100.00], ['2012-05-29',100.00], ['2012-05-28',100.00], ['2012-05-27',100.00], ['2012-05-26',100.00], ['2012-05-25',100.00], ['2012-05-24',100.00], ['2012-05-23',100.00], ['2012-05-19',100.00], ['2012-05-18',100.00], ['2012-05-17',100.00], ['2012-05-16',100.00], ['2012-05-15',100.00], ['2012-05-14',100.00], ['2012-05-13',100.00], ['2012-05-12',100.00], ['2012-05-11',100.00], ['2012-05-10',100.00], ['2012-05-09',100.00], ['2012-05-08',100.00], ['2012-05-07',100.00], ['2012-06-02',100.00], ['2012-06-03',100.00], ['2012-06-04',100.00], ","average":99.98} 
```

即具有两个变量数据和平均值的 JSON 数组。我可以这样独立地获取这两个：

```
$(function(){
            $('#from,#to').focusout(function(){

            var start=$('#from').val();
            var end=$('#to').val();
            $.ajax({
                type: 'POST',
                data: ({from : start, to : end, id : <?php echo $id; ?>}),
                url: 'fetchuptime.php',
                success: function(data) {
                     //7 reulst goes here
                    //var json = data;
                    var obj = jQuery.parseJSON(data);
                     $('#uptime_span').html(obj.average +" %");
                     $('#test').html(data);
                     chart_data = google.visualization.arrayToDataTable([
                            obj.data
                        ]);
                        var ac = new google.visualization.AreaChart(document.getElementById('visualization'));
                        ac.draw(chart_data, {
                            colors : ['#00DB00'],
                            title : '',
                            isStacked: false,
                            width: 570,
                            height: 400,
                            'chartArea': {'width': '88%', 'height': '90%'},
                            hAxis: {minValue: 0,showTextEvery: 6, slantedText: false},
                            vAxis: {  
                                viewWindowMode:'explicit',
                                viewWindow:{
                                    max:100,
                                    min:90.65
                                }
                            },
                            pointSize: 3,
                            legend: {position: 'none'}
                        });

          }
        });
    });
}); 
```

例如。obj.average 和 obj.data 给了我两个字符串。但是，这似乎不起作用，我猜数据没有正确传递。

我已经测试了实际输出数据（例如 obj.data）的格式是否正确，因为我尝试静态插入它。

所以我显然在这里做错了，我认为这是因为我正在传递一个字符串，而谷歌图表需要一个数组，试图以各种方式修复它，但还没有发现任何工作。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T22:00:14.210

您的 JSON 格式是有效的，但可能不是您想要的：

```
{"data":"['Day', 'Uptime'],['2012-05-31',100.00] ... ['2012-06-04',100.00], ", "average":99.98} 
```

这表示一个对象，其字段名为`data`，其值为字符串（如您所说）。您可能想要做的是使其成为服务器端的阵列。使用方括号代替双引号。还有一个必须删除的尾随逗号。

```
{"data":[['Day', 'Uptime'],['2012-05-31',100.00] ... ['2012-06-04',100.00]], "average":99.98} 
```

# t4 - T4 文本转换模板创建 xx.cs 文件避免 ErrorGeneratingOutput

> ID：10904011
> 
> 赞同：1
> 
> 时间：2012-06-05T19:55:45.800
> 
> 标签：t4, css

我有一个输出到指定文件名的 t4 模板。t4 但是，当运行时为我拥有的每个 tt 文件创建一个 xx.cs 文件。在这个文件中是文本“ErrorGeneratingOutput”

有没有办法阻止这个文件被创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:11:09.797

恐怕不行，不行。

当使用其中一种机制创建特定文件时，总会有一个虚拟存根文件。通常我将它设置为一个文本文件

<#@ output extension=".stub.txt" #> 并在其中放置一些解释性文本，通过将该文本作为模板的主体，它是一个占位符。然后我将其构建操作永久设置为“无”。

我不确定是什么导致了错误，但这就是模板其余部分中的任何错误通常会被报告的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:05:26.247

如果您只是想防止错误生成的 .cs 文件在您完成编写 t4 文件之前进行编译，您可以将 .cs 文件的 Build Action 属性设置为 None ，然后在完成后将其设置回来

# string - 使用 VBA 在单元格中查找字符串

> ID：10904012
> 
> 赞同：6
> 
> 时间：2012-06-05T19:55:48.690
> 
> 标签：string, search, excel, vba

我已经为此发疯了一天，到处搜索，可能我想变得太可爱所以我完全被困住了。

我正在尝试运行一个简单的 if then

如果一个单元格包含“%”，我希望它做一件事，如果不是另一件事。由于我不明白的原因，我无法解决它。我显然已经从其他地方获得了一些想法，但仍然无法让它发挥作用。

复杂因素 - 我不想在整个列上运行它，只是在一个表上运行，所以它使用很多或相对 ActiveCells 嵌入到更大的子中。我永远不知道我将在 A 列中的哪个位置遇到“% Change”，因此 Range 始终必须是可变的。我希望 VBA/VBE 在遇到带有“%”的单元格时做一些不同的事情。所以

这是原始数据的样子

```
Initial Value (6/30/06)

Value (12/31/06)

Net Additions (9/30/07)

Withdrawal (12/07)

Value (12/31/07)

Withdrawal (2008)

Value (12/31/08)

Addition (8/26/09)

Value (12/31/09)

Value (12/31/10)

Value (12/30/11)

Value (3/31/12)

% Change 1st Quarter

% Change Since Inception 
```

但是当我运行以下命令时，它陷入了一个错误的循环，它应该拉到“If Then”而不是 sub 的“Else”部分。

```
Sub IfTest()
 'This should split the information in a table up into cells
 Dim Splitter() As String
 Dim LenValue As Integer     'Gives the number of characters in date string
 Dim LeftValue As Integer    'One less than the LenValue to drop the ")"
 Dim rng As Range, cell As Range
 Set rng = ActiveCell

Do While ActiveCell.Value <> Empty
    If InStr(rng, "%") = True Then
        ActiveCell.Offset(0, 0).Select
        Splitter = Split(ActiveCell.Value, "% Change")
        ActiveCell.Offset(0, 10).Select
        ActiveCell.Value = Splitter(1)
        ActiveCell.Offset(0, -1).Select
        ActiveCell.Value = "% Change"
        ActiveCell.Offset(1, -9).Select
    Else
        ActiveCell.Offset(0, 0).Select
        Splitter = Split(ActiveCell.Value, "(")
        ActiveCell.Offset(0, 9).Select
        ActiveCell.Value = Splitter(0)
        ActiveCell.Offset(0, 1).Select
        LenValue = Len(Splitter(1))
        LeftValue = LenValue - 1
        ActiveCell.Value = Left(Splitter(1), LeftValue)
        ActiveCell.Offset(1, -10).Select
    End If
Loop
End Sub 
```

感谢所有帮助，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T22:04:57.497

我简化了您的代码以隔离单元格中“%”的测试。一旦你让它工作，你可以添加你的其余代码。

试试这个：

```
Option Explicit

Sub DoIHavePercentSymbol()
   Dim rng As Range

   Set rng = ActiveCell

   Do While rng.Value <> Empty
        If InStr(rng.Value, "%") = 0 Then
            MsgBox "I know nothing about percentages!"
            Set rng = rng.Offset(1)
            rng.Select
        Else
            MsgBox "I contain a % symbol!"
            Set rng = rng.Offset(1)
            rng.Select
        End If
   Loop

End Sub 
```

`InStr`将返回您的搜索文本出现在字符串中的次数。我更改了您的`if`测试以首先检查是否没有匹配项。

消息框和消息框`.Selects`只是为了让您在单步执行代码时查看正在发生的事情。一旦你开始工作，就把它们拿出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T21:30:35.090

你永远不会改变它的值，`rng`所以它总是指向初始单元格

在循环之前复制`Set rng = rng.Offset(1, 0)`到新行

此外，您的`InStr`测试将始终失败
`True`为 -1，但当`InStr`找到字符串时，返回值将大于 0。将测试更改为 remove = True

新代码：

```
Sub IfTest()
 'This should split the information in a table up into cells
 Dim Splitter() As String
 Dim LenValue As Integer     'Gives the number of characters in date string
 Dim LeftValue As Integer    'One less than the LenValue to drop the ")"
 Dim rng As Range, cell As Range
 Set rng = ActiveCell

Do While ActiveCell.Value <> Empty
    If InStr(rng, "%") Then
        ActiveCell.Offset(0, 0).Select
        Splitter = Split(ActiveCell.Value, "% Change")
        ActiveCell.Offset(0, 10).Select
        ActiveCell.Value = Splitter(1)
        ActiveCell.Offset(0, -1).Select
        ActiveCell.Value = "% Change"
        ActiveCell.Offset(1, -9).Select
    Else
        ActiveCell.Offset(0, 0).Select
        Splitter = Split(ActiveCell.Value, "(")
        ActiveCell.Offset(0, 9).Select
        ActiveCell.Value = Splitter(0)
        ActiveCell.Offset(0, 1).Select
        LenValue = Len(Splitter(1))
        LeftValue = LenValue - 1
        ActiveCell.Value = Left(Splitter(1), LeftValue)
        ActiveCell.Offset(1, -10).Select
    End If
Set rng = rng.Offset(1, 0)
Loop

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T03:26:07.767

`Find`对于搜索例程，您应该考虑使用`AutoFilter`或变体数组方法。范围循环通常太慢，如果他们使用更糟`Select`

下面的代码将在用户选择的范围内查找 strText 变量，然后将任何匹配项添加到范围变量`rng2`中，然后您可以进一步处理

```
Option Explicit

Const strText As String = "%"

Sub ColSearch_DelRows()
    Dim rng1 As Range
    Dim rng2 As Range
    Dim rng3 As Range
    Dim cel1 As Range
    Dim cel2 As Range
    Dim strFirstAddress As String
    Dim lAppCalc As Long

    'Get working range from user
    On Error Resume Next
    Set rng1 = Application.InputBox("Please select range to search for " & strText, "User range selection", Selection.Address(0, 0), , , , , 8)
    On Error GoTo 0
    If rng1 Is Nothing Then Exit Sub

    With Application
        lAppCalc = .Calculation
        .ScreenUpdating = False
        .Calculation = xlCalculationManual
    End With

    Set cel1 = rng1.Find(strText, , xlValues, xlPart, xlByRows, , False)

    'A range variable - rng2 - is used to store the range of cells that contain the string being searched for
    If Not cel1 Is Nothing Then
        Set rng2 = cel1
        strFirstAddress = cel1.Address
        Do
            Set cel1 = rng1.FindNext(cel1)
            Set rng2 = Union(rng2, cel1)
        Loop While strFirstAddress <> cel1.Address
    End If

    If Not rng2 Is Nothing Then
        For Each cel2 In rng2
            Debug.Print cel2.Address & " contained " & strText
        Next
    Else
        MsgBox "No " & strText
    End If

    With Application
        .ScreenUpdating = True
        .Calculation = lAppCalc
    End With

End Sub 
```

# oracle - 从没有 SQLPLUS 的 shell 脚本调用 oracle 存储过程

> ID：10904013
> 
> 赞同：3
> 
> 时间：2012-06-05T19:55:51.187
> 
> 标签：oracle, shell, unix, stored-procedures, autosys

谁能建议一种在不使用 SQL*Plus 或任何此类客户端的情况下从 shell 脚本调用 Oracle 存储过程的方法。无法安装客户端是我工作的服务器的限制。

我必须安排一个 Autosys 脚本来调用调用 Oracle 存储过程的作业。你能建议我应该朝哪个方向前进吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T21:03:07.537

您可以使用 Java 和 jdbc 来做到这一点。如果您甚至无法复制瘦 jdbc 驱动程序，我认为除了使用 Oracle 调度程序在 Oracle 中调度作业之外别无选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:05:14.837

如果没有安装客户端软件，您将很难从 shell 脚本访问 Oracle；但是，Oracle 有自己的批处理工具——请参阅[此处的数据库作业](http://docs.oracle.com/cd/B28359_01/server.111/b28310/schedover004.htm#autoId4)

# ruby-on-rails - Rails Active 管理员修改默认操作

> ID：10904015
> 
> 赞同：0
> 
> 时间：2012-06-05T19:56:13.297
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

我有一个 Rails 应用程序，我使用 Active Admin (0.3.1) 作为 mi 管理界面。问题是我想向它添加一个新模型，但我需要在用户提交表单后在创建操作上插入一些自定义代码。

可能吗？它是怎么做的？

我需要在创建过程中处理一些数据并创建一些其他对象。

先谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:04:00.433

如果你想修改 ActiveAdmin 控制器，你可以这样做：

```
 ActiveAdmin.register Post do

      controller do
        # This code is evaluated within the controller class

        def create
          # override the action here
        end
      end

    end 
```

# .htaccess - .htaccess - 本地主机在文件夹中工作的问题

> ID：10904016
> 
> 赞同：0
> 
> 时间：2012-06-05T19:56:14.567
> 
> 标签：.htaccess

我正在使用 MAMP 在我的 Mac 上工作 localhost。我正在尝试用.htaccess 做一些mod_rewrite。我认为我所有的问题都在于我正在处理这样的 URL：localhost:8888/folder/index.php。

我如何“删除” /folder/... 或使 .htaccess 与 /folder/ 一起工作，同时记住我想在项目上线后立即删除它？*我更愿意“删除” /folder/ 使其看起来更像我的项目上线时。

例如，如果我尝试像这样“删除” index.php：

```
#Removes index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

它一直跳回根目录：localhost:8888/ 而不是 localhost:8888/social/。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T06:09:28.280

遇到了同样的问题，刚刚找到了解决方案。（我知道我可能会迟到这篇文章，但可能会对其他人有所帮助）

我遇到的问题是我当地的网络环境。我在服务器上试了一下，一切正常！所以发现我只需要在 apache 中为我的网站设置虚拟主机，一切都很好！

我在这个 stackoverlfow 帖子的帮助下做到了这一点： [如何将根目录设置为子文件夹](https://stackoverflow.com/questions/8456627/how-to-set-root-directory-to-a-subfolder-local-php-development-environment)和这篇关于如何在 Windows PC 上执行此操作的文章：[在 win 7 中设置虚拟主机](http://austinpassy.com/tutorials/setting-up-virtual-hosts-wordpress-multisite-with-xampp-on-windows-7/)

希望它有帮助，干杯！

# protocol-buffers - 安装 Python 协议缓冲区的问题

> ID：10904017
> 
> 赞同：3
> 
> 时间：2012-06-05T19:56:16.633
> 
> 标签：protocol-buffers

我是一名初级程序员，试图从这个包中安装 Python 协议缓冲区：[http ://code.google.com/p/protobuf/downloads/detail?name=protobuf-2.4.1.zip](http://code.google.com/p/protobuf/downloads/detail?name=protobuf-2.4.1.zip)

自述文件指出：

1) 确保您拥有 Python 2.4 或更新版本。如果有疑问，请运行：

```
 $ python -V 
```

2) 如果您没有安装 setuptools，请注意它会在您运行 setup.py 时自动下载并安装。如果您想手动安装它，您可以按照此页面上的说明进行操作：

```
 http://peak.telecommunity.com/DevCenter/EasyInstall#installation-instructions 
```

3) 构建 C++ 代码，或安装 protoc 的二进制分发。如果您安装二进制发行版，请确保它与此软件包的版本相同。如果有疑问，请运行：

```
 $ protoc --version 
```

4）运行测试：

```
 $ python setup.py test 
```

如果某些测试失败，则此库可能无法在您的系统上正常工作。继续自担风险。

请注意，Cygwin 上的某些 Python 版本存在一个已知问题，这会导致测试在打印错误后失败：“sem_init：资源暂时不可用”。这似乎是 Cygwin 或 Python 中的一个错误： [http](http://www.cygwin.com/ml/cygwin/2005-07/msg01378.html) ://www.cygwin.com/ml/cygwin/2005-07/msg01378.html 我们不知道它是否或何时可以修复。我们也不知道这个错误在实践中影响用户的可能性有多大。

5）安装：

```
 $ python setup.py install 
```

此步骤可能需要超级用户权限。注意：要使用 C++ 实现，需要安装相同版本的 C++ protobuf 运行时库，并在此步骤之前导出环境变量。有关详细信息，请参阅下面的“C++ 实现”部分。

* * *

我已将 python 和 protoc.exe 的 2.4.1 版添加到我的 PATH 中。但是，当我尝试运行测试时，我收到一条错误消息，指出第 38 行的语法无效：

```
print "Can't find required file " + source 
```

好的，所以它缺少括号。我添加它们，它又遇到两个打印语句语法错误消息。我修复了这些，它在“except”语句中遇到语法错误消息。我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:44:27.347

也许您正在使用 Python 3？

您引用的代码仅适用于 Python 2.X

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-30T10:25:20.680

我遵循了相同的步骤，但没有收到任何错误。请确保您获得正确的 Python 和 protoc 版本。

导出环境 LD_LIBRARY_PATH 变量。

# android - 将editText放在没有自定义视图的AlertDialog中？

> ID：10904019
> 
> 赞同：1
> 
> 时间：2012-06-05T19:56:29.683
> 
> 标签：android, view, android-alertdialog

他们是将 EditText 放在 alertDialog 中而不是使用自定义视图的更好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:00:44.900

尝试使用这个：

```
final EditText input = new EditText(this);

    AlertDialog alertDialog = new AlertDialog.Builder(this).create();
    alertDialog.setTitle("Title");
    alertDialog.setMessage("Message");
    alertDialog.setView(input, 10, 0, 10, 0); // 10 spacing, left and right
    alertDialog.setButton("OK", new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            // Clicked
        }
    });
    alertDialog.show(); 
```

如果您想为您的 editText 添加自定义布局，我知道的唯一选择是：使用 LayoutInflater 为您的布局充气，并将其用作视图。

# list - IList List 在我的组合类中为空。为什么？

> ID：10904025
> 
> 赞同：0
> 
> 时间：2012-06-05T19:56:57.560
> 
> 标签：list, c#-4.0, composition, ilist

我正在使用 IList List 属性来获取大学课程中的学生课程列表。当我尝试在系类中访问此列表时，该列表是大学课程的一部分。列表为空 ..任何人都可以说出原因吗？

```
namespace UniversitySystem
{
  class University : CollectionBase
  {
    private string _uniName;
    Departments _depart = new Departments();

    public University(string un, string dn, string cp, List<Student> Slist)
    {
        this._uniName = un;
        this.CED.DepartName = dn;
        this.CED.ChairPerson = cp;
        foreach (Student s in Slist)
        {
            List.Add(s);
        }
    }

    #region properties

    public string UniName
    {
        get { return _uniName; }
        set { _uniName = value; }
    }

    public Departments CED
    {
        get { return _depart; }
        set { _depart = value; }
    }

    #endregion

    public class Departments : CollectionBase
    {
        private string _departName;

        public string DepartName
        {
            get { return _departName; }
            set { _departName = value; }
        }
        private string _chairPerson;

        public string ChairPerson
        {
            get { return _chairPerson; }
            set { _chairPerson = value; }
        }
        public List<Student> StudentListForCED = new List<Student>();

        public Departments()
        {
            _departName = null;
            _chairPerson = null;
            StudentListForCED = null;
        }

        public Departments(string dn, string cp, List<Student> Slist)
        {
            this._departName = dn;
            this._chairPerson = cp;
            foreach (Student s in Slist)
            {
                List.Add(s);
            }
        }

        public void showDetails()
        {
            Console.WriteLine("Departmental Info");
            Console.WriteLine("DepartmentName: " + _departName);
            Console.WriteLine("Chairperson Name: " + _chairPerson);
            Console.WriteLine("Student Info:");
            foreach (Student item in List)
            {
                Console.WriteLine("Name: " + item.Name);
                Console.WriteLine("deptName: " + item.RegNo);
                Console.WriteLine("total marks:  " + item.TotalMarksObtained);
                Console.WriteLine("percentage:   " + item.GetPercentage());
            }
        }
    }
  }
} 
```

**main() 部分是**

```
namespace UniversitySystem
{
  class Program
  {
    static void Main(string[] args)
    {

        List<Student> slist = new List<Student>();
        slist.Add(new Student("sana", 1234, "CIS", 650));
        slist.Add(new Student("anam", 2345, "BCIT", 400));
        slist.Add(new Student("fizzza", 2670, "Electrical", 670));

        University u1 = new University("NED", "computer", "UKP", slist);
        Console.WriteLine(u1.CED.DepartName);
        u1.CED.showDetails();

    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:24:50.793

我做了一些应该有效的更改。

```
 public Departments(string dn, string cp, List<Student> Slist)
    {
        this._departName = dn;
        this._chairPerson = cp;
        foreach (Student s in Slist)
        {
            StudentListForCED.Add(s);
        }
    }

    public void showDetails()
    {
        Console.WriteLine("Departmental Info");
        Console.WriteLine("DepartmentName: " + _departName);
        Console.WriteLine("Chairperson Name: " + _chairPerson);
        Console.WriteLine("Student Info:");
        foreach (Student item in StudentListForCED)
        {
            Console.WriteLine("Name: " + item.Name);
            Console.WriteLine("deptName: " + item.RegNo);
            Console.WriteLine("total marks:  " + item.TotalMarksObtained);
            Console.WriteLine("percentage:   " + item.GetPercentage());
        }
    } 
```

请更彻底地阅读[此内容。](http://msdn.microsoft.com/en-us/library/system.collections.collectionbase.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:07:25.233

University 的初始化代码不会将您提供的列表存储为参数。

尝试将列表存储在部门或大学对象本身的变量中，当您显示其中任何一个对象的详细信息时，您可以引用该列表，即您在创建对象时存储的列表。

希望有帮助！

# ios - info.plist 中的“Application Requires iPhone Environment”键是什么意思？

> ID：10904039
> 
> 赞同：65
> 
> 时间：2012-06-05T19:57:59.860
> 
> 标签：ios, objective-c, xcode, applet, info.plist

我无法理解`info.plist`我的应用程序文件中的具体要求。我应该完全更改它，还是默认设置通常是“正确”选项？

具体来说，入口：**APPLICATION REQUIRES IPHONE ENVIRONMENT**

如果设置为是，这是否意味着只有**iPhone**能够运行我的应用程序，意味着 iPod Touch 或 iPad 将无法运行该应用程序？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-06-05T20:03:26.247

这是Apple 关于应用程序 info.plist 文件[的“LSRequiresiPhoneOS”位的文档。](http://developer.apple.com/library/ios/documentation/general/Reference/InfoPlistKeyReference/Articles/LaunchServicesKeys.html#//apple_ref/doc/uid/TP40009250-SW2)

基本上，这意味着该应用程序旨在在 iOS 下运行。无论目标设备是 iPhone、iPod Touch 还是 iPad，都应将此标志设置为 YES。

谁知道，也许在不远的将来，MacOS 将能够运行 iOS 应用程序（反之亦然）？

# mysql - 需要在不重启数据库的情况下清除 MySQL InnoDB 锁

> ID：10904044
> 
> 赞同：9
> 
> 时间：2012-06-05T19:58:07.290
> 
> 标签：mysql, locking, innodb

我有一个 MySQL InnoDB 锁，它阻止用户登录。我现在不关心这个锁的原因——我只需要在不重新启动数据库的情况下清除锁。终止查询进程没有任何作用。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T21:42:57.223

以下是我最终解决问题的方法：

```
mysql> show engine innodb status\G
*************************** 1\. row ***************************
  Type: InnoDB
  Name: 
Status: 
=====================================
120710 18:05:37 INNODB MONITOR OUTPUT
=====================================
Per second averages calculated from the last 37 seconds
----------
SEMAPHORES
----------
OS WAIT ARRAY INFO: reservation count 208374, signal count 196902
Mutex spin waits 0, rounds 39211638, OS waits 80663
RW-shared spins 588505, OS waits 68505; RW-excl spins 3204502, OS waits 53586
------------
TRANSACTIONS
------------
Trx id counter 1 3626791829
Purge done for trx's n:o < 1 3625948819 undo n:o < 0 0
History list length 6754
LIST OF TRANSACTIONS FOR EACH SESSION:
...
---TRANSACTION 1 3625948818, ACTIVE 2892 sec, process no 1981, OS thread id 140020625811200
2 lock struct(s), heap size 368, 1 row lock(s), undo log entries 1

>>>>> MySQL thread id 14982, query id 232584561 localhost dbuser

Trx read view will not see trx with id >= 1 3625948819, sees < 1 3625948817

mysql> kill 14982;
Query OK, 0 rows affected (0.00 sec) 
```

请注意，带有 >>>>> 的行是 MySQL 线程 ID 定义的地方——应该杀死这个线程。

请同时查看[这篇](http://www.xaprb.com/blog/2007/09/18/how-to-debug-innodb-lock-waits/ "这")文章 - 非常有用。

# matlab - 点数如何改变 MATLAB 中的 FFT

> ID：10904045
> 
> 赞同：4
> 
> 时间：2012-06-05T19:58:08.210
> 
> 标签：matlab, signal-processing, fft, correlation

接收`fft(signal, nfft)`信号时，nfft 如何改变结果，为什么？例如，我可以为 nfft 设置一个固定值`2^18`，还是我需要去`2^nextpow2(2*length(signal)-1)`？

我正在通过自相关的 FFT 计算两个信号的功率谱密度（PSD），我想比较结果。由于信号的长度不同，我担心如果我不修复 nfft，这会使比较变得非常困难！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T19:59:59.130

没有内在的理由使用二的幂（在某些情况下它可能会使处理更有效）。

但是，为了使两个不同信号的 FFT“相称”，您确实需要在进行 FFT 之前将一个或其他（或两个）信号补零到相同的长度。

* * *

但是，我不得不说：如果您需要问这个问题，那么您可能还没有到达 DSP 学习曲线上的某个点，您将能够对结果做任何有用的事情。你应该给自己买一本关于 DSP 理论的不错的书，例如[this](http://www.amazon.co.uk/Understanding-Digital-Signal-Processing-Richard/dp/0137027419/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T01:19:38.810

大多数现代 FFT 实现（包括基于 FFTW 的 MATLAB）现在很少需要将信号的时间序列填充到等于 2 的幂的长度。然而，几乎所有的实现都会为具有 2 次幂长度的数据向量的 FFT 提供更好的，有时甚至更好的性能。特别是对于 MATLAB，填充到 2 的幂或具有许多低素因子的长度将为您提供最佳性能（N = 1000 = 2^3 * 5^3 将是极好的，N = 997 将是一个糟糕的选择） .

零填充不会增加 PSD 中的频率分辨率，但它会减少频域中的 bin 大小。因此，如果将 NZeros 添加到长度为 N 的信号向量，FFT 现在将输出长度为 ( N + NZeros )/2 + 1 的向量。这意味着每个频率箱现在的宽度为：

> Bin 宽度 (Hz) = F_s / ( N + NZeros )

其中 F_s 是信号采样频率。

如果您发现需要在频域中分离或识别两个紧密间隔的峰值，则需要增加采样**时间**。您会很快发现零填充对您没有任何好处 - 直观地说，这就是我们所期望的。在我们的输入中没有添加更多信息（更长的时间序列）的情况下，我们如何才能在我们的功率谱中获得更多信息？

最好的，

保罗

# javascript - raphael svg 路径的一部分卡在了原位

> ID：10904047
> 
> 赞同：1
> 
> 时间：2012-06-05T19:58:18.163
> 
> 标签：javascript, svg, raphael

我正在使用 raphael.js 测试（手的）矢量，我的印象是“M”参数指示从哪里开始绘制路径，但在我的示例中：http: [//jsfiddle.net/7QA43/ 1/](http://jsfiddle.net/7QA43/1/)当我更改 M 的参数（从 361,243 到 100,100）时，小指的一部分似乎是如何“锚定”到原始位置的。

我已经扫描了 svg 路径数据以查找可能导致此问题的原因，但我找不到它。

部分路径可以关闭吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T21:01:39.780

在 SVG 路径中，所有路径命令都有两种风格：[绝对和相对](http://www.w3.org/TR/SVG/paths.html#PathData)。

*   绝对路径命令用大写字母表示，并表示与前一点无关的指定坐标。
*   相对路径命令用小写字母表示，表示相对于前一个路径命令的位置指定的坐标。

*除了*最后一个 CurveTo 命令外，所有路径命令都是相对的：
`"...44-1.436,3.662-2.155**C357.073,245.799,359.609,244.566,361.839,243.057**z"`

从规格：

> *使用 (x1,y1) 作为曲线起点的控制点和 (x2,y2) 作为曲线终点的控制点，从当前点到 (x,y) 绘制三次贝塞尔曲线。**C**（大写）表示后面跟着绝对坐标；**c**（小写）表示将跟随相对坐标。可以指定多组坐标来绘制多边形。在命令结束时，新的当前点成为 polybézier 中使用的最终 (x,y) 坐标对。*

最简单的解决方法是从您的路径中删除此命令，几乎没有明显区别：

## 通过删除修复：http: [//jsfiddle.net/7QA43/2/](http://jsfiddle.net/7QA43/2/)

或者，不要使用第一个 MoveTo 命令来调整路径的位置。保持原样，并将[`transform()`](http://raphaeljs.com/reference.html#Element.transform)其移至新位置：

```
path_a.transform('t-200,-154'); 
```

## 通过变换修复：http: [//jsfiddle.net/7QA43/5/](http://jsfiddle.net/7QA43/5/)

*通过在有问题的 CurveTo 之前找到命令的最后一个坐标并更改参数以使用相对值来解决问题，留给[读者作为练习](http://phrogz.net/convert-svg-path-to-all-absolute-commands)。*

# iphone - 创建/调用 Objective-C 委托方法 Objective-C

> ID：10904054
> 
> 赞同：0
> 
> 时间：2012-06-05T19:58:51.463
> 
> 标签：iphone, objective-c, ios, delegates

我已经尝试过这个问题： [代表如何工作](https://stackoverflow.com/questions/1045803/how-does-a-delegate-work-in-objective-c/1045854#1045854)，但我似乎仍然没有完全掌握它。我正在尝试使用 CocoaAsyncSocket 库来创建 TCP 套接字连接。感谢一位非常友好的 SO 用户的帮助，我有以下代码来执行对服务器的读取数据请求：

```
- (void)onSocket:(AsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag
{
    NSData *strData = [data subdataWithRange:NSMakeRange(0, [data length])];
    NSString *msg = [[NSString alloc] initWithData:strData encoding:NSUTF8StringEncoding];
    if(msg)
    {
        NSLog(@"RX:%@",msg);
    }
} 
```

现在，请原谅我的无知，因为我对 iOS 开发还很陌生。所以现在我有了这个方法，我想调用它来执行我的 ReadData。问题是，我不知道把这个方法放在哪里（我有几个视图，有几个头文件/实现文件）。我希望这个方法成为委托方法，但我不知道如何使它成为委托方法。我想从我的角度调用这个委托方法。

如果有人可以解释：

*   我把这段代码放在哪里？（什么文件等）
*   如何使它成为委托方法？
*   如何调用此委托方法？

我整天都被困在这个问题上，我正要扔毛巾大声笑。非常感谢任何和所有帮助。非常感谢！

*编辑：*

这是上一个问题的桥梁，但我认为这个问题与这个问题没有太大的相关性。 [问题](https://stackoverflow.com/questions/10902710/how-do-i-read-data-using-cocoaasyncsocket)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:57:24.043

感谢更新。现在更清楚了。这里有一些答案。如果不清楚，请告诉我。

*- 我把这段代码放在哪里？（什么文件等）*

这是 的委托方法`CocoaAsyncSocket`。回到您的第一个问题，当您初始化它时，您将自己（您的 appDelegate）设置为委托。

```
socket = [[AsyncSocket alloc] initWithDelegate:self]; 
```

这意味着，**您将从另一个类中被调用**。因此，这意味着此方法应该在您初始化对象（此处`socket`）并将其设置为委托的同一类中。所以它留在 appDelegate

*- 我如何使它成为委托方法？*

你没有。这是一个委托方法本身。

*- 我如何调用这个委托方法？*

你没有。另一个类（此处`AsyncSocket`）将调用它。

您现在可能会问，您如何将数据传递给您的`viewControllers`? 这取决于你的设计。一旦调用此方法并通知您存在连接并且正在读取数据，根据您的设计，您可以将数据传递给其他视图控制器。一种方法是使用`NSNotification`. 例如

```
// Call this in onSocket:didReadData:withTag: instead of logging
[[NSNotificationCenter defaultCenter] postNotificationName:@"DataIsReadNotification" object:msg]

// In one of your view controllers
// View controllers insterested in this message, register to get notified:
// add to -viewDidLoad
[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(updateViewWithNotification:) name:@"DataIsReadNotification" object:nil];
...
// and somewhere in the view controller class implement this
- (void)updateViewWithNotification:(NSNotification *)notification {
NSString *msg = [notification object];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T21:03:13.357

我不熟悉该`- (void)onSocket:(AsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag` 方法，但在 iOS 中使用委托是一种非常常见的方式，可以让您的对象在不引入一些依赖项的情况下相互通信。

以下是回答您的 3 个项目符号问题的一些提示：

**我把这段代码放在哪里？**

最好的选择是在您希望执行 ReadData 的控制器内或在 appDelegate 中

**如何使它成为委托方法？**

如果此方法已在协议中定义，则根据定义，这已是委托方法。您只需要让您的 viewcontroller 类符合此协议并使您的控制器成为此方法的委托。

**如何调用此委托方法**

您不调用委托方法。您有另一个属于此 CocoaAsyncSocket 库的对象，它将调用此委托方法。您只需在控制器的委托方法中处理一些代码，因为您已将其定义为将处理此方法的对象。

只需将委托视为将某些工作推迟到其他对象的一种方式（顺便说一句，这是一种设计模式）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T21:06:00.430

要制作委托，您将在头文件中声明这些内容。下面的例子。

```
//SomeClass.h

@protocol SomeClassDelegate <NSObject>
- (void)onSocket:(AsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag;
@end

@interface SomeClass : NSObject {

id<SomeClassDelegate>delegate;

}
@property(nonatomic,assign)id<SomeClassDelegate>delegate;
@end 
```

* * *

现在，当您初始化 SomeClass 时，您可以将`delegate`self 设置为任何类型。现在在您的 SomeClass 文件中，您可以执行

```
[self.delegate onSocket: .. didReadData: .. withTag:]; 
```

如果该方法存在于您设置为 SomeClass 的委托的类中，它将调用它。希望这可以帮助。

# asp.net-mvc - 部分视图和 ModelState.AddModelError

> ID：10904055
> 
> 赞同：4
> 
> 时间：2012-06-05T19:59:07.167
> 
> 标签：asp.net-mvc, asp.net-mvc-3, partial-views, modelstate

视图的来源`LoginRegister`是这样的：

```
@Html.Partial("authentication/_login")
@Html.Partial("authentication/_register") 
```

每个子视图都有一个具有这种语法的表单

```
@using (Html.BeginForm(**seperated-methods**, "Login")) 
{
    @Html.ValidationSummary(false)
} 
```

我使用此代码在回发中发送错误

```
ModelState.AddModelError("", "**any-error-message**");
return View("authentication/LoginRegister", customized-data); 
```

关键是，两者都显示错误消息`partial views`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:00:57.573

您需要告诉 ModelState 此错误指的是哪个属性：

```
ModelState.AddModelError("PropertyName", "**any-error-message**"); 
```

现在它只会在

```
@Html.ValidationMessageFor(m => m.PropertyName) 
```

如果您不指定属性名称，则错误将被视为全局错误并显示在每个`ValidationSummary`.

# html - Firefox 一个 IE 显示的 css 代码与 Chrome 不同

> ID：10904057
> 
> 赞同：2
> 
> 时间：2012-06-05T19:59:13.660
> 
> 标签：html, css, internet-explorer, firefox

因此，在我的网站上，我对按钮具有 css 角色，并且所有内容在 Chrom 中都应显示，但在 IE 和 Firefox 中，高度更大，因此您可以看到太多图像。这是发生在[http://www.dillonbrannick.com/](http://www.dillonbrannick.com/)上的网站。我只关注其中一个按钮，但所有 4 个按钮都在发生。

这是影响主页按钮的代码。

在 body 和 nav 标签内

```
<nav class="body">

<div class="links nav" id="home-nav">
<a href="#"
onclick=" toggle_visibility_1('illustrations'); toggle_visibility_1('illustration-sub'); toggle_visibility_1('painting-sub'); toggle_visibility_1('paintings'); toggle_visibility_1('animation'); toggle_visibility_1('contact'); toggle_visibility_1('box'); toggle_visibility_2('homeimage'); toggle_visibility_2('homebio'); toggle_visibility_2('facebook'); toggle_visibility_2('google');">
</a>
</div>

</nav> 
```

我想Javascript不会影响它，因为它所做的只是显示开/关元素，所以它与尺寸无关。

这是CSS：

```
.body{
    position:absolute;
    left:50%;
    top:50%;
}
nav{
    margin: -125px 0 0 -44.5px;
}
.nav{
    position:absolute;
    width: 89px;
}
.nav a{
    height: 107.5px;
}
.links a{
   display: block;
   margin: auto auto auto auto;
   cursor: pointer;
   outline: transparent solid 0px;
}
#home-nav {
    margin: -60px 0px 0px -140px;
}
#home-nav a{          
   background: url('http://dl.dropbox.com/u/70582811/home.link.png') no-repeat left top;
}
#home-nav a:hover{
    background-position: left -107.5px;
} 
```

我知道 body 类可能对问题没有任何影响，但我只想展示影响按钮的所有内容。

正如您在这两张图片中看到的（左：Chrome，右：IE 和 Firefox）。在不应该存在的灰色条下方出现蓝色，这是图像另一半的一部分，然后在翻转时向上移动。正如你在我的[网站](http://www.dillonbrannick.com/)上看到的那样。 ![铬合金](../Images/e4264ccd73dde767207096993d941fa3.png) ![IE 和火狐](../Images/2bb89e6ae4f222c3754e18bb83626e8b.png) 在此先感谢狄龙布兰尼克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:06:42.683

我认为你的问题是使用 .5

```
.nav a{
    height: 107.5px;
} 
```

浏览器可能会以不同的方式处理它。我认为不存在像半像素这样的东西。

编辑：试试 107px，然后是 108px。我认为其中之一应该给你想要的结果。大概是 107 像素。Firefox 将 107.5 像素视为 108 像素。

# css - “-webkit-overflow-scrolling: touch”Chrome for Mac OSX 上的 z-index 错误

> ID：10904059
> 
> 赞同：0
> 
> 时间：2012-06-05T19:59:34.023
> 
> 标签：css, webkit

我最近遇到了一些问题，网页上的一些工具提示无法在 Mac OSX 版本的 Chrome 上正确显示（有时在某些 Windows 版本上，尽管这不是一致的事情）。我已将问题隔离为在 HTML 标记（来自 Normalize）上设置的属性“-webkit-overflow-scrolling: touch”。

我想知道是否有人知道一种无需删除 -webkit-overflow-scrolling 标签即可消除此错误的方法。我想尝试保留触摸和悬停的行为有点愚蠢，所以也许对该特定属性的某种媒体查询可以解决问题？

这是一个展示行为的小提琴：http: [//jsfiddle.net/N4cJX/6/](http://jsfiddle.net/N4cJX/6/)

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:34:15.410

这已在最新的 Chrome 版本中得到修复，请参阅[http://code.google.com/p/chromium/issues/detail?id=124559](http://code.google.com/p/chromium/issues/detail?id=124559)。

# qmake - qmake：在最后执行命令

> ID：10904060
> 
> 赞同：1
> 
> 时间：2012-06-05T19:59:38.187
> 
> 标签：qmake

**一切**完成后如何在 qmake 中执行命令？

QMAKE_POST_LINK 没有起到作用，因为它在链接之后执行，但在 qmake 将二进制文件移动到定义的目录之前。我需要在一切就绪时执行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:39:41.057

尝试使用 QMake 的[INSTALLS](http://qt-project.org/doc/qt-5/qmake-advanced-usage.html#installing-files)变量。它在需要手动运行的 makefile 中创建了一个“安装”步骤（make install），但它既可以移动文件，也可以执行任意命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:27:33.263

根据您的评论并且不了解 qmake，我的建议是简单地编写一个简短的（两行就足够了）脚本，根据需要运行 qmake，然后执行您的 shell 脚本。

# javascript - 变量未从现场收集数据

> ID：10904065
> 
> 赞同：0
> 
> 时间：2012-06-05T19:59:53.387
> 
> 标签：javascript

下面的代码可以正常工作，直到该行`document.forms[0]._area.value = dbasedata;`仅在加载表单后该字段中的数据已更改时才会复制数据。如果将其更改为任何内容（甚至恢复到原始值），它将起作用。
有谁知道为什么？

```
function dbasetype() {
  var dbasedata = document.forms[0]._dbase_name.value;
  dbasedata2 = dbasedata.toUpperCase().replace(/\s/g, "");

  if(dbasedata2.indexOf("UK_CONTACTS")<0) {
    document.forms[0]._area.value = dbasedata;           
  }  else { setarea(); } 
} 
```

**编辑**我认为它可能与它是一个下拉字段有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:14:37.187

也许我只是在这里误解了一些东西，但我认为你错过了一个 else：

```
if(dbasedata2.indexOf("UK_CONTACTS")<0) {
    document.forms[0]._area.value = dbasedata;           
  }  { setarea(); } 
```

应该：

```
if(dbasedata2.indexOf("UK_CONTACTS")<0) {
    document.forms[0]._area.value = dbasedata;           
} else { 
    setarea(); 
} 
```

就像在您的代码中一样，`setarea`总是被调用。不看是什么很难说`setArea`，但似乎它正在覆盖 if 中设置的值。

# grails - 从 gsp 中检索 g:select 值 - 无形式

> ID：10904066
> 
> 赞同：0
> 
> 时间：2012-06-05T19:59:56.890
> 
> 标签：grails

如何在链接操作中传递 g:select 框的值：

```
<g:select name="sel.n" from="${personList}" value="" />
<g:link action="addValue" params="${[personID: personInstance.id, selectionVal: sel.n.value]}">Add</g:link> 
```

如何检索选择框 sel.n 的值以传递该操作链接？

这不是表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T01:19:19.373

你会想要使用 jQuery 来做这样的事情。下面是一个示例，可以帮助您走上正确的道路。

```
var val = "";
$('#sel\\.n').change(function() {

    val = $(this).text();

    $("a").attr('href', function(i, h) {
            return h + (h.indexOf('?') != -1 ? "&" : "?") + "selectValue="+val;

    });
}); 
```

上面的代码将在选择框发生变化时捕获，然后更改 href 链接的查询字符串。如果您不熟悉 jQuery，您需要了解一些基础知识，它是处理此类事情的必备工具。祝你好运，享受！

# c - 在 C 中，标准输出缓冲区的大小是多少？

> ID：10904067
> 
> 赞同：11
> 
> 时间：2012-06-05T19:59:57.540
> 
> 标签：c, linux, unix

今天我了解到 stdout 在设置为终端时是行缓冲的，在不同情况下是缓冲的。因此，在正常情况下，如果我使用 printf() 而不使用终止 '\n'，则只有在缓冲区已满时才会在屏幕上打印。如何获得这个缓冲区的大小，这个有多大？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T20:29:36.337

实际大小由各个实现定义；该标准没有规定最小尺寸（无论如何，基于我能够找到的内容）。不知道如何确定缓冲区的大小。

**编辑**

[章节和诗句](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)：

> ### 7.19.3 文件
> 
> ...
> 3 当流未*缓冲*时，字符应尽快从源或目标出现。否则，字符可能会作为一个块累积并传输到主机环境或从主机环境传输。当一个流被*完全缓冲*时，当缓冲区被填满时，字符将作为一个块传输到主机环境或从主机环境传输。当流被*行缓冲时*, 字符旨在在遇到换行符时作为块传输到主机环境或从主机环境传输。此外，当缓冲区被填满时，当在非缓冲流上请求输入时，或者当在需要从主机环境传输字符的行缓冲流上请求输入时，字符打算作为块传输到主机环境. **对这些特性的支持是由实现定义的，并且可能通过`setbuf`和`setvbuf`函数**受到影响。

重点补充。

“实现定义”不是“我不知道”的委婉说法，它只是一种声明，语言标准明确地将其留给*实现*来*定义*行为。

话虽如此，有*一种*非编程方式可以找出答案；请查阅编译器的文档。“实现定义”还意味着实现*必须*记录行为：

> ### 3.4.1
> 
> 1**实现定义的行为**
> 未指定的行为，其中每个实现都记录了如何做出选择
> 
> 2 示例 实现定义的行为的一个例子是当有符号整数右移时高位的传播。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-21T19:12:15.727

使用默认管道大小 64K 创建管道时的 Linux。在 /proc/sys/fs/pipe-max-size 中存在最大管道大小。对于默认值 1048576 是典型值。

对于 glibc 的默认文件缓冲区；65536 字节似乎是合理的。但是，由 glibc 源代码树中的 grep 确定： libio/libio.h:#define _IO_BUFSIZ _G_BUFSIZ sysdeps/generic/_G_config.h:#define _G_BUFSIZ 8192 sysdeps/unix/sysv/linux/_G_config.h:#define _G_BUFSIZ 8192

原来的问题可能会或可能不会被回答。对于一分钟的努力，最好的猜测是 8 KB。

对于单纯的行缓冲，8K 就足够了。但是，与 64K 相比，对于超过行缓冲的输出；8K 效率不高。因为对于默认管道大小，使用 64K，如果不希望有更大的管道大小，并且如果没有明确设置更大的管道大小，则建议 stdio 缓冲区使用 64K。

如果需要性能，那么微薄的 8K 缓冲区是不够的。通过 fcntl(pipefd,F_SETPIPE_SZ,1048576) 可以增加管道的大小。通过 setvbuf (stdout,buffer,_IOFBF,1048576) 可以替换 stdio 提供的文件缓冲区。如果不使用管道，则管道尺寸无关紧要。但是，如果在两个进程之间传输数据，那么通过增加管道大小可能会提高性能。否则，最小的缓冲区或最小的管道会产生瓶颈。

如果还通过 stdio 读取更大的缓冲区，则可能需要更少的读取函数调用。“可能”这个词暗示了一个重要的考虑因素。正如由单个读取函数调用提供的单个写入函数调用所提供的那样，可以读取尽可能多的数据。通过读取函数调用，可以预期返回的字节数少于请求的字节数。通过额外的读取函数调用，可以获得额外的字节。

用于写数据线；通过 stdio overkill 提供。但是，通过 stdio 行缓冲输出是可能的。在某些情况下，行缓冲输出是必不可少的。如果写入 proc 虚拟文件系统提供的文件或写入 sys 虚拟文件系统提供的文件，则应在单个写入缓冲区中包含换行字节。如果使用第二次写入，则可能会出现意想不到的结果。

如果读写和 stdio 混合使用，则存在警告。在调用 write 函数之前，需要调用 fflush 函数。因为 stderr 没有被缓冲；对于 stderr，不需要 fflush 函数调用。通过读取可能会提供少于预期的字节数。通过 stdio，之前的字节可能已经被缓冲了。

不混合 unistd 和 stdio I/O 是个好建议，但经常被忽略。混合缓冲输入是不合理的。混合无缓冲输入是可能的。混合缓冲输出是合理的。

通过 stdio 缓冲 IO 提供了便利。没有 stdio 缓冲 IO 是可能的。但是，对于代码，需要额外的字节。当利用足够大的缓冲区时；与 stdio 提供的输出功能相比；写函数调用不一定慢。

但是，当不涉及管道时，可以通过函数 mmap 提供高级 IO。在 mmap 的管道上，不会返回错误。但是，在地址空间中不提供数据。在 lseek 的管道上提供了一个错误。

最后由 man 3 setvbuf 提供了一个很好的例子。如果在堆栈上分配缓冲区，则在返回之前不能省略 fclose 函数调用。

实际的问题是“在 C 中，标准输出缓冲区的大小是多少？” 到 8192 可能会回答这么多。

遇到这种询问的人可能会对缓冲区输入/输出效率产生好奇。通过一些调查，目标是隐含的。通过对简洁答复的偏好，管道大小的重要性和缓冲区大小的重要性和 mmap 没有被解释。这个回复说明了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T20:29:28.640

[这里](https://unix.stackexchange.com/questions/11946/how-big-is-the-pipe-buffer)有一些关于类似问题的非常有趣的答案。

在 linux 系统上，您可以查看不同函数的缓冲区大小，包括`ulimit`. 还有头文件`limits.h`，`pipe.h`应该包含那种信息。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-05T20:06:35.843

您可以将其设置为无缓冲，或者只是刷新它。

当 C 运行时通常为您和一些示例刷新它时，这似乎有一些不错的信息。看看[这个](http://cboard.cprogramming.com/c-programming/98138-fflush-stdout.html)。

# php - php表单ajax请求不起作用，yii框架

> ID：10904068
> 
> 赞同：0
> 
> 时间：2012-06-05T19:59:57.570
> 
> 标签：php, ajax, yii

我正在做一个 yii web 应用程序，我有一个应该依赖于另一个的下拉列表，我使用 ajax 但是它不起作用。我看过 yii 教程的依赖下拉菜单并到处搜索。 [http://www.yiiframework.com/wiki/24](http://www.yiiframework.com/wiki/24) 这是我的主要下拉列表：

```
<div class="row">
    <?php echo $form->labelEx($model, 'sourceID'); ?>
    <?php
    echo $form->dropDownList($model, 'sourceID', CHtml::listData(Sources::model()->findAll(), 'sourceID', 'name'), array('empty' => 'select source'), array(
        'ajax' => array(
            'type' => 'POST',
            'url' => CController::createUrl('reservations/atest'),
            'update' => '#meal'
        )
            )
    );
    ?>
    <?php echo $form->error($model, 'sourceID'); ?>
</div> 
```

这是相关的下拉列表：

```
<div  class="row">
    <?php echo $form->labelEx($model, 'meal'); ?>
    <?php echo $form->dropDownList($model, 'meal', array()); ?>
    <?php echo $form->error($model, 'meal'); ?>
</div> 
```

这是我的控制器动作：

```
 public function actionAtest() {

    $data = Sources::model()->findAll();

    $data = CHtml::listData($data, 'sourceID', 'name');

    foreach ($data as $value => $name) {
        echo CHtml::tag('option', array('value' => $value), CHtml::encode($name),true);
    } } 
```

另外，我将操作添加到访问规则中。任何帮助表示赞赏，在此先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:38:46.640

您将`ajax`选项放在`htmlOptions`. 这是修改后的代码

```
<div class="row">
    <?php echo $form->labelEx($model, 'sourceID'); ?>
    <?php
    echo $form->dropDownList($model, 'sourceID', CHtml::listData(Sources::model()->findAll(), 'sourceID', 'name'), array('empty' => 'select source','ajax' => array(
            'type' => 'POST',
            'url' => CController::createUrl('reservations/atest'),
            'update' => '#meal'
       )
      )
    );
    ?>
    <?php echo $form->error($model, 'sourceID'); ?>
</div> 
```

而不是使用表单下拉列表`CHtml::dropDownList`用于依赖下拉列表。

```
echo CHtml::dropDownList('meal','', array()); 
```

您也可以使用`CActiveForm::dropDownList`，但在这种情况下，您必须`CHtml::resolveNameId`在`update`选项中使用`ajax`

# javascript - foreach 绑定中的 knockoutjs 单击绑定

> ID：10904070
> 
> 赞同：8
> 
> 时间：2012-06-05T20:00:03.923
> 
> 标签：javascript, knockout.js

**编辑：问题与绑定无关，而是与一个简单的 JavaScript 错误有关。**

我有一个关于 foreach 绑定中的点击绑定的问题。我有一个项目列表，其中显示一个下拉框以从主数据中选择一个值。可以从该列表中添加和删除项目。删除项目的按钮嵌套在 foreach 绑定中。因此我希望我应该将它与 $parent> 绑定

```
<button data-bind="click: $parent.removeNumber">-</button> 
```

那是行不通的。但以下版本有效：

```
<button data-bind="click: removeNumber">-</button> 
```

我不明白为什么。

编码：

```
<h2>numbers:</h2>
 <ul data-bind="foreach: numbers">
     <li>
       <select data-bind="value: id, 
                          options: masterData, 
                          optionsText: 'caption', 
                          optionsValue: 'id'"></select>
        <br />
        value: <span data-bind="text: id"></span>
        <br />
        <button data-bind="click: $parent.removeNumber">-</button>      
    </li>
</ul>
<button data-bind="click: addNumber">+</button> 
```

​</p>

```
function ViewModel() {
    self.masterData = [{ id: 1, caption: "One"},
                       { id: 2, caption: "Two"}];

   self.numbers = ko.observableArray([{
        id: ko.observable(2)}]);

    self.addNumber = function() {
        self.numbers.push({
            id: ko.observable(2)
        });
    };

    self.removeNumber = function(item) {
        self.numbers.destroy(item);
        console.log("removed" + item);
    };
}

var viewModel = new ViewModel();
ko.applyBindings(viewModel);​ 
```

我创建了一个小提琴（不工作的版本）：http: [//jsfiddle.net/delixfe/NWWH8/](http://jsfiddle.net/delixfe/NWWH8/)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T20:24:00.693

你有我一秒钟！

你是对的，`$parent`应该被要求。您的错误没有`self`在您的视图模型中定义。之后，`$parent`removeButton 以及`masterData`绑定都需要。

这是一个工作小提琴：http: [//jsfiddle.net/FpSWb/](http://jsfiddle.net/FpSWb/)

# css - 带有圆角和边框的表头

> ID：10904075
> 
> 赞同：3
> 
> 时间：2012-06-05T20:00:15.973
> 
> 标签：css, border, rounded-corners

表头可以有圆角和 1px 边框吗？

当我应用边框时，它不适用于圆角，但适用于实际的表格边框，因此边框角是方形的。

我怎样才能做到这一点？

这是CSS：

```
.example th {
border: 1px solid #ddd;
background: #444;
background: -webkit-gradient(linear, left top, left bottom, from(#eee), to(#ddd));
background: -moz-linear-gradient(top,  #eee,  #ddd);
filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#eee', endColorstr='#ddd');
color: #444;
    } 
```

圆角应用于 first 和 list child th：-moz-border-radius: 6px 0 0 0; -webkit-border-radius：6px 0 0 0；边框半径：6px 0 0 0；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T20:11:18.277

这使得**所有**表格标题（如果您使用语义`th`单元格而不是正文`td`单元格）都具有圆角，但如果您希望它仅用于选定的表格 - 然后将类重命名为并将类`table.rounded th`添加`rounded`到这些表格：

```
th
{ 
-khtml-border-radius: 4px 4px 4px 4px;
-moz-border-radius: 4px 4px 4px 4px;
-ms-border-radius: 4px 4px 4px 4px;
-o-border-radius: 4px 4px 4px 4px;
-webkit-border-radius: 4px 4px 4px 4px;
border-radius: 4px 4px 4px 4px;
border: solid 1px black;
} 
```

**编辑：**你需要`border-collapse: separate;`在你的桌子上才能做到这一点......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:10:57.763

您可以尝试在每个 th 中添加一个 div 容器吗

例如：http: [//jsfiddle.net/y6VNe/5/](http://jsfiddle.net/y6VNe/5/)

```
<table>
   <tr>
       <th><div>A</div></th>
       <th><div>B</div></th>
       <th><div>C</div></th>
       <th><div>D</div></th>
   </tr>
</table> 
```

CSS

```
th div{
   border:1px solid black;
   width:80px;    
   text-align:center;
   border-radius: 10px;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T07:46:17.487

我意识到这是一个旧线程，但是嗯。
您可以使用 box-shadow 来伪造边框。

`box-shadow: 0px 0px 2px #ddd inset;`

Admiddetly，颜色更亮存在一些问题，您必须进行补偿。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-05T20:09:54.113

有一个用于应用圆角的 CSS3 属性，称为**border-radius**

这是一个可以帮助您的链接：

[http://www.yourhtmlsource.com/tables/roundedcorners.html](http://www.yourhtmlsource.com/tables/roundedcorners.html)

这是另一个很好的解释：

[http://davidwalsh.name/css-rounded-corners](http://davidwalsh.name/css-rounded-corners)

# android - 顶部有两个按钮 底部有两个

> ID：10904076
> 
> 赞同：1
> 
> 时间：2012-06-05T20:00:18.887
> 
> 标签：android, android-button, android-linearlayout

我希望在屏幕上获得 4 个按钮。顶部有两个，底部有两个。这段代码以我想要的方式为我提供了顶部按钮。但是，当我将 layout_alignParentTop="true" 更改为 layout_alignParentBottom="true" 时，按钮保持在顶部。他们没有像预期的那样移动到底部。有任何想法吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout02" 
    android:layout_height="wrap_content" 
    android:layout_width="fill_parent" 
    android:layout_alignParentTop="true">
<Button 
    android:id="@+id/Button02" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:layout_weight="1" android:text="test">
</Button>
<Button 
    android:id="@+id/Button03" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:layout_weight="1" 
    android:text="test">
</Button>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:21:15.303

因此，您应该创建父元素，`<RelativeLayout>`并在其创建两个`<LinearLayouts>`其中每个包含两个`Button`. 并将第一个布局对齐到顶部，您可以使用`android:layout_alignParentTop="true"`和对齐第二个到底部使用`android:layout_alignParentBottom="true"`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#3B3B3B">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:padding="10dp"
        android:gravity="center_horizontal"
        android:layout_alignParentTop="true">

        <Button 
            android:id="@+id/loginBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="40dp"
            android:text="Second"
            />

        <Button 
            android:id="@+id/loginBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="40dp"
            android:text="Second"/>

    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:padding="10dp"
        android:gravity="center_horizontal"
        android:layout_alignParentBottom="true"
        >

        <Button 
            android:id="@+id/loginBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="40dp"
            android:text="Second"
            />

        <Button 
            android:id="@+id/loginBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="40dp"
            android:text="Second"
            />
    </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:03:32.727

在线性布局上使用 android:layout_height="match_parent"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T20:05:25.057

或者您可以使用带有 layoutBelow 和 layoutAbove 的相对布局。相对布局非常适合这种布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T20:14:55.690

这里你的根布局是LinearLayout：

```
android:layout_alignParentTop is useless 
```

将您的 LinearLayout 添加到 RelativeLayout 中，您将得到它的工作！

或者最好的方法是使用属性

```
android:layout_gravity 
```

因此要在屏幕的按钮上显示按钮，您可以使用以下布局：

```
<?xml version="1.0" encoding="utf-8"?>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LinearLayout02"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom" >

        <Button
            android:id="@+id/Button02"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="test" >
        </Button>

        <Button
            android:id="@+id/Button03"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="test" >
        </Button>
    </LinearLayout> 
```

# hadoop - Mahout 杀死错误

> ID：10904080
> 
> 赞同：0
> 
> 时间：2012-06-05T20:00:36.063
> 
> 标签：hadoop, mahout, recommendation-engine

我在伪分布式 hadoop 安装上运行一个简单的 ItemSimilarityJob mahout 作业，并且该过程在一段时间后停止，只有消息被杀死：

```
12/06/05 21:04:52 INFO mapred.JobClient:  map 33% reduce 8% 
12/06/05 21:05:18 INFO mapred.JobClient:  map 36% reduce 8% 
12/06/05 21:05:30 INFO mapred.JobClient:  map 39% reduce 8% 
Killed 
```

有人知道为什么会发生这种情况吗？我跑了几次，这总是发生，但在不同的阶段。

已解决：似乎如果我的计算机进入睡眠状态会杀死所有 HADOOP 工作。

谢谢，伊利亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T06:01:46.703

让您的计算机进入睡眠状态并不会终止进程。问题是，当它醒来时，似乎工人很久没有回来报告，并且他们被认为是卡住了，所以被杀死了。是的，“修复”当然是不让它进入睡眠状态。

# sql - oracle 将时间戳转换为其他时间掩码

> ID：10904081
> 
> 赞同：0
> 
> 时间：2012-06-05T20:00:38.743
> 
> 标签：sql, oracle

如何将这些数字列（timestamp、event_dt）转换为日期或时间掩码？我正在尝试这个：

```
 select to_char(timestamp,'YYYY-MON-DD HH24:MI:SS'), domain_c, to_char(event_date,'YYYY-MON-DD HH24:MI:SS'), total_reads from TOP_READ_EVENTS where timestamp= to_char(sysdate-2,'yyyymmdd') || '0000'
                         *
ERROR at line 1:
ORA-01481: invalid number format model

SQL> desc top_read_events;
 Name                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 YEAR                           NUMBER
 QUARTER                        NUMBER
 MONTH                          NUMBER
 DAY                            NUMBER
 HOUR                           NUMBER
 TIMESTAMP                      NUMBER
 DOMAIN_C                       VARCHAR2(255)
 EVENT_DT                       NUMBER
 TOTAL_READS                        NUMBER

select timestamp, domain_c, event_dt, total_reads from TOP_READ_EVENTS where timestamp= to_char(sysdate-2,'yyyymmdd') || '0000'    

 TIMESTAMP DOMAIN_C              EVENT_DT  TOTAL_READS
---------- ------------------------------  ------------ -------------
2.0111E+11 b.e.att-mail.com         2.0111E+11         14406
2.0111E+11 bounce.emailinfo2.bestbuy.com    2.0111E+11         14156
2.0111E+11 bounce.bluestatedigital.com      2.0111E+11         13701
2.0111E+11 plentyoffish.com         2.0111E+11         13384
2.0111E+11 mail.classmates.com          2.0111E+11         13281
2.0111E+11 comcast.net              2.0111E+11         13241
2.0111E+11 uniquelistsmail.com          2.0111E+11         13135
2.0111E+11 tankgorilla.com          2.0111E+11         12835
2.0111E+11 frigidphoenix.com            2.0111E+11         12657 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T20:19:03.833

首先，*切勿*将日期或时间戳数据类型存储在日期或时间戳列之外的任何内容中。它会带来无尽的痛苦；当你聚会时。

由于您的“时间戳”有 11 个数量级，我猜您将它们插入到表单`yyyymmddhh24mi`中，并且它们不是自未指定时代或类似的东西以来的秒数。

如果要转换它，则必须首先将它们转换为字符，然后再转换为日期。您实际上并不需要时间戳，因为它们与日期的差异仅以小数秒为单位。

它看起来像下面这样：

```
select to_date(to_char(timestamp),'yyyymmddhh24mi') as my_timestamp
  from top_read_events 
```

附带说明，*永远不要*调用列时间戳、日期、组或其他保留字。它导致了太多的问题。就我个人而言，我通常会选择“tstamp”，但这只是个人喜好。

如果要将“时间戳”转换为字符，则必须再次将其转换为字符。

```
select to_char(to_date(to_char(timestamp)
                       ,'yyyymmddhh24mi')
              ,'yyyy-mon-dd hh24:mi:ss') as my_timestamp
  from top_read_events 
```

秒数将永远是`00`你没有这些。请注意，我只使用*明确*的数字到字符到日期到字符的转换。它让追随你的编码人员更清楚你在做什么，包括你自己 2 年后，并且解释器不可能在意图上犯错误并将数字与字符等进行比较。

出于这个原因，我肯定会改变`where timestamp= to_char(sysdate-2,'yyyymmdd') || '0000'`。当您想进行日期比较时，请将其更改为日期并以这种方式进行，即

```
where trunc(to_date(to_char(timestamp),'yyyymmddhh24mi'),'dd') = trunc(sysdate -2) 
```

[`trunc()`](http://www.techonthenet.com/oracle/functions/trunc_date.php)在这种情况下，在日级别截断它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T20:18:25.937

首先，将日期和时间戳存储在不是数据建模`DATE`或`TIMESTAMP`数据建模不佳的列中。如果您将数据存储在具有正确数据类型的列中，生活会容易得多。

其次，您的数字列使用什么格式来存储日期和/或时间戳数据？您没有发布实际值的示例——我们所知道的是它们是 12 位数字并从 2011 年开始。我猜它们以 YYYYMMDDHH24MI 格式存储，没有秒数——你需要告诉如果这个猜测碰巧是不正确的。

假设猜测是正确的，您需要将数字转换为字符串，将字符串转换为日期，然后将日期转换为不同格式的另一个字符串。显然，这有点尴尬（也是将事物存储在正确数据类型中的众多原因之一）。就像是

```
to_char( to_date( to_char( timestamp ), 
                  'YYYYMMDDHH24MI' ),
         'YYYY-MON-DD HH24:MI:SS' ) 
```

如果您的数字列存储方式不同，或者存在数据未以正确格式存储的任何情况，那么生活就会变得更加不愉快。

# objective-c - 将 UILabel 的内容发布到 Facebook？

> ID：10904082
> 
> 赞同：0
> 
> 时间：2012-06-05T20:00:43.260
> 
> 标签：objective-c, ios, facebook, cocoa-touch

只是涉足一些 iOS 的东西，并想整合 Facebook（最终是 twitter）。

我有一个随机更改的 UILabel，并希望将其内容发布到 Facebook。任何人都可以帮助实现这一目标吗？也许指向我的资源方向？作为一个新手，我发现很难找到我需要的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:08:23.967

获取 ShareKit：[https ://github.com/ShareKit/ShareKit](https://github.com/ShareKit/ShareKit)

一切都已经准备就绪，您所要做的就是将其集成到您的项目中并添加几行代码！！！

# java - 确定是来自 Java 的 x86 还是 x64 系统

> ID：10904092
> 
> 赞同：2
> 
> 时间：2012-06-05T20:01:07.463
> 
> 标签：java, dll, x86, 64-bit

> **可能重复：**
> [如何检测安装了哪种 JRE — 32 位与 64 位](https://stackoverflow.com/questions/807263/how-do-i-detect-which-kind-of-jre-is-installed-32bit-vs-64bit)
> [如何判断我是在 64 位 JVM 还是 32 位 JVM 中运行？](https://stackoverflow.com/questions/2062020/how-can-i-tell-if-im-running-in-64-bit-jvm-or-32-bit-jvm)

我有一个签名的 Java 小程序，它利用已安装的第三方 DLL 来使用我的 Java 应用程序中的卡片扫描仪组件。在 64 位机器上，有一些库旨在用于 64 位架构，因为这些库的原始版本仅在 x86 上运行。

问题是它们的名称不同...

> 库.dll

在 x64 上我应该使用...

> library64.dll

我必须调用`loadLibrary`以在我的小程序中按名称加载适当的库，但是要加载正确的库，我需要预先确定系统架构。我知道我可以捕获一个 UnsatisfiedLinkError 但这真的很难看，如果可能的话我想避免这种情况。我也无法推测该库的安装位置。

任何想法如何从 Java 应用程序中解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T20:09:31.540

您可以使用[SystemProperties](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)来获取信息。

```
System.getProperty("os.arch"); //Operating system architecture 
```

# powershell - 在 PowerShell 中将位置设置为变量

> ID：10904093
> 
> 赞同：4
> 
> 时间：2012-06-05T20:01:08.100
> 
> 标签：powershell, powershell-2.0, powershell-1.0

我对 PowerShell 很陌生，我确信这是一个简单的问题，但我有点难过。我正在尝试打开一个文件夹，按 LastWriteTime 排序，然后打开列表顶部的文件夹。我想将它存储在一个变量中，所以当我调用该变量时，我可以将我的位置设置为该变量。我遇到的问题是，当我调用我的变量时，什么也没有发生：

> $latest = 获取子项 C:\Main | 排序 LastWriteTime -降序 | 选择 - 前 1 | 调用项

当我尝试' `Set-Location $latest`'时为什么会出错？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-11T16:15:43.597

这对我有用：

```
$last = gci ./ | sort LastWriteTime | select -last 1
Set-Location ($last.FullName) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-23T17:06:00.703

如果你想使用一个变量作为 Set-Location 的值，那么你应该像这样使用它：

```
$variableName = whatever
Set-Location (Split-Path variableName) 
```

请注意，我没有使用该`$`标志。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T20:47:38.410

我将使用`Tee-Object`将变量设置`$latest`为目录，并继续将目录对象发送到管道中。

```
Get-Childitem C:\Main | 
    Sort LastWriteTime -Descending | 
    Select-Object -First 1 | 
    Tee-Object -Variable latest |
    Invoke-Item 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T07:04:48.957

试试这个：

```
$first = Get-Childitem C:\Main | Sort-Object LastWriteTime -Descending | Select-Object -First 1
Set-Location (Split-Path $first.FullName) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T20:06:36.497

您已经调用了您所获得的项目，并且执行了默认操作。该变量将只返回该操作的状态，而不是返回的项目。如果你删除最后一个管道调用项，你可能会得到你想要的。

set-location 需要一个字符串，powershell 返回一个对象。所以像这样的东西可能是你想要的。

设置位置 "c:\Main\" + $lastest.name

# javascript - 寻找允许单击菜单仅重新加载中心面板的示例代码

> ID：10904097
> 
> 赞同：0
> 
> 时间：2012-06-05T20:01:28.930
> 
> 标签：javascript, reload

我有一个共享相同页脚/页眉布局和设计的页面。

我正在寻找允许单击菜单以仅重新加载中心面板的示例 javascript 代码。我没有在 JSP 中这样做。我希望得到一些示例 javascript 代码。

我可以将中心面板放在 iFrame 或其他类型的小部件中吗？

最有效的方法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:07:19.483

[从这个问题](https://stackoverflow.com/questions/86428/whats-the-best-way-to-reload-an-iframe-using-javascript)

```
document.getElementById('iframeid').src = document.getElementById('iframeid').src 
```

但是，如果您的页眉和页脚在框架中，或者如果您的主体在框架中，只是为了使它们可重复使用，这是一个坏主意！您的服务器应该通过使用页眉和页脚的布局页面并呈现正文来生成单页。

# php - 为什么 TEXT 列只返回 4096 字节？

> ID：10904098
> 
> 赞同：1
> 
> 时间：2012-06-05T20:01:30.287
> 
> 标签：php, sql-server, sql-server-2008

我正在使用 mssql_query(); 存储长文本

并使用数据类型为“文本”的字段。

我尝试使用 str_repeat() 使用不同的长字符串，页面需要很长时间，但最终提交了结果。但是，当我检索结果时，无论如何我只得到 4096 字节。我也尝试使用管理工作室检索价值，并得到相同的结果。

在我看来，这对我来说是一个存储问题。请提供一些建议...我很困惑。

**编辑**那些问的人，这就是我正在使用的：

```
function sql_escape($sql) { 
        /* De MagicQuotes */ 
    $fix_str        = stripslashes($sql); 
    $fix_str    = str_replace("'","''",$sql); 
    $fix_str     = str_replace("\0","[NULL]",$fix_str); 
    return "'".$fix_str."'"; 
} 
$query=mssql_query('update prod_cat set htmlbottom='.sql_escape(str_repeat('\'choose_cat ', 122000)).
    ' where ID=1'   );  

$query=mssql_query('select htmlbottom from prod_cat where ID=1');
$a=mssql_fetch_assoc($query);
echo strlen($a['htmlbottom']); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:08:11.303

微软的PHP驱动（供参考）：[http ://www.microsoft.com/en-us/download/details.aspx?id=20098](http://www.microsoft.com/en-us/download/details.aspx?id=20098)

但是，如果您不想（或不能）更改驱动程序，请从此[站点](http://www.addedbytes.com/blog/sql-server-php-truncating-text/)：

```
You need to increase the maximum size of a text column to be returned from
SQL Server by PHP. You can do this with a simple SQL query:
    SET TEXTSIZE 2147483647

Which you can run with the following PHP (best run just after you make a
connection).
    mssql_query("SET TEXTSIZE 2147483647");

A better way to work around the issue is to change the "textlimit" and
"textsize" settings within php.ini, like so:
    mssql.textlimit = 2147483647
    mssql.textsize = 2147483647 
```

您的 MSSQL 驱动程序正在截断文本。如果您无法更改数据类型、驱动程序等，这应该可以为您解决问题。

# c# - 如何将 DisplayName 放入变量

> ID：10904100
> 
> 赞同：0
> 
> 时间：2012-06-05T20:01:37.337
> 
> 标签：c#, xml, xml-serialization, c#-2.0

我正在尝试做一些事情，这可能非常简单，所以请多多包涵，我只想将 XML 文件中的“DisplayName”转换为我的 C# 代码中的字符串。这就是我所拥有的：

### 这是 VS2005 中的 C#2.0

XML:

```
<MonitorScope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="System" xmlns="http://tempuri.org/XMLSchema.xsd">
    <PersonalSafety>    
<MonitorResponseRecord Enabled="false" DisplayName="ValveFailureAtCentralPosition">
<ExpressionMonitor>
<postAlarm>
<AlarmName>Valve_Position_Fault</AlarmName>
<Parameter1> Sensor Position = {X}</Parameter1>
<Parameter2> Sensor Position = {X}</Parameter2>
<Parameter3> Sensor Position = {X}</Parameter3>
</postAlarm>
</ExpressionMonitor>
</MonitorResponseRecord>
<MonitorResponseRecord ...  ... ...>
... ...
... ... and so on about 1600 times. 
```

在我的 C# 代码中，我尝试了以下但无济于事：C#：

```
public class AlarmRecord
{
    /// <remarks/>
    public string PmAlarm;

    /// <remarks/>
    public string Parameter1;

    /// <remarks/>
    public string Parameter2;

    /// <remarks/>
    public string Parameter3;

    /// <remarks/>
    public string DisplayName;
}

    protected void OnPostAlarm(PostAlarm postAlarm)
    {
        try 
        {
            AlarmRecord alarmRecord = new AlarmRecord(); 
            alarmRecord.PmAlarm    = postAlarm.AlarmName;
            alarmRecord.Parameter1 = postAlarm.Parameter1;
            alarmRecord.Parameter2 = postAlarm.Parameter2;
            alarmRecord.Parameter3 = postAlarm.Parameter3;

            string fileName = "UMSM.009.8Root.xml";
            string fullPath;
            fullPath = Path.GetFullPath(fileName);

            XmlTextReader reader = new XmlTextReader(new StringReader(fullPath));
            System.Xml.XPath.XPathDocument docNav = new System.Xml.XPath.XPathDocument(reader);

            System.Xml.XPath.XPathNavigator Q = docNav.CreateNavigator();
            System.Xml.XPath.XPathExpression EXE = Q.Compile("MonitorResponseRecord/@DisplayName");
            alarmRecord.DisplayName = Convert.ToString(Q.Evaluate(EXE));
             alarms.Enqueue( alarmRecord ); 
        }
        catch (Exception e)
        {
            Log.Write(e);
            OnUnknownResponse(postAlarm);
        }
    } 
```

基本上我当前的问题是在调试期间我注意到的问题是在初始化“阅读器”的行中......程序通常在这里抛出异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:10:08.220

您可以使用 XmlReader：

```
 protected void OnPostAlarm(PostAlarm postAlarm) 
    {
       AlarmRecord record = null;
       List<AlarmRecord> recordList = new List<AlarmRecord>();

        using(XmlReader reader = XmlReader.Create("Xml/bin/UMSM.009.8Root.xml"))
        {

            while (reader.Read())
            {
                if (reader.NodeType == XmlNodeType.Element)
                {
                    switch (reader.Name)
                    {
                        case "MonitorResponseRecord":
                            record = new AlarmRecord();
                            recordList.Add(record);
                            reader.MoveToAttribute("DisplayName");
                            record.DisplayName = reader.Value;
                            break;

                        case "AlarmName":
                            record.PmAlarm = reader.ReadString();
                            break;

                        case "Parameter1":
                            record.Parameter1 = reader.ReadString();
                            break;

                        case "Parameter2":
                            record.Parameter2 = reader.ReadString();
                            break;

                        case "Parameter3":
                            record.Parameter3 = reader.ReadString();
                            break;
                    }
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:35:53.783

最好在 .NET 2.0 中使用 XPathNavigator 和 XPath 查询。读取属性（如示例中的 DisplayName）是通过在 XPath 查询中使用 @ 来完成的。

[这里](http://bytes.com/topic/net/answers/630817-how-get-attributes-xml-element-using-xpath)有一个不错的例子。尽管 XPathExpression 位不是必需的，但您可以调用 nav.Evaluate 并直接提供字符串 XPath 查询。

示例 XML（我需要剥离您的命名空间属性）：

```
<MonitorScope>
<PersonalSafety>    
    <MonitorResponseRecord Enabled="false" DisplayName="ValveFailureAtCentralPosition">
        <ExpressionMonitor>
            <postAlarm>
                <AlarmName>Valve_Position_Fault</AlarmName>
                <Parameter1> Sensor Position = {X}</Parameter1>
                <Parameter2> Sensor Position = {X}</Parameter2>
                <Parameter3> Sensor Position = {X}</Parameter3>
            </postAlarm>
        </ExpressionMonitor>
    </MonitorResponseRecord>
</PersonalSafety> 
```

使用 XPath 的代码示例：

```
 XmlDocument doc = new XmlDocument();
        doc.LoadXml(xml);

        XPathNavigator nav = doc.CreateNavigator();
        XPathNodeIterator nodeList = nav.Select("//MonitorScope/PersonalSafety/MonitorResponseRecord");

        if (nodeList.Count != 0) {
            foreach (XPathNavigator node in nodeList) {
                // node queries are relative to MonitorResponseRecord node
                string displayName = node.SelectSingleNode("./@DisplayName").Value;

                string alarmName = node.SelectSingleNode("ExpressionMonitor/postAlarm/AlarmName").Value;
                string param1 = node.SelectSingleNode("ExpressionMonitor/postAlarm/Parameter1").Value;
                string param2 = node.SelectSingleNode("ExpressionMonitor/postAlarm/Parameter2").Value;
                string param3 = node.SelectSingleNode("ExpressionMonitor/postAlarm/Parameter3").Value;

                // do something with values
            }
        } 
```

# c++ - STL 错误 _without_ 代码中的任何 STL

> ID：10904103
> 
> 赞同：2
> 
> 时间：2012-06-05T20:01:56.887
> 
> 标签：c++, namespaces, g++, cygwin, using

我在 cygwin 上使用 gcc 3.4.4。我在下面的代码中收到了这个相当令人困惑的 STL 错误消息，它根本不使用 STL：

```
#include <iostream>

using namespace std;

const int N = 100;

bool s[N + 1];
bool p[N + 1];
bool t[N + 1];

void find(const bool a[], bool b[], bool c[]){
  return;
}

int main(){
  find(s, p, t);
  return 0;
} 
```

当我用 g++ stack.cc 编译时

我收到以下错误消息：

```
/usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/bits/stl_algo.h: In function `_RandomAccessIterator std::find(_RandomAccessIterator, _RandomAccessIterator, const _Tp&, std::random_access_iterator_tag) [with _RandomAccessIterator = bool*, _Tp = bool[101]]':
/usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/bits/stl_algo.h:314:   instantiated from `_InputIterator std::find(_InputIterator, _InputIterator, const _Tp&) [with _InputIterator = bool*, _Tp = bool[101]]'
stack.cc:18:   instantiated from here
/usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/bits/stl_algo.h:207: error: ISO C++ forbids comparison between pointer and integer
/usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/bits/stl_algo.h:211: error: ISO C++ forbids comparison between pointer and integer
/usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/bits/stl_algo.h:215: error: ISO C++ forbids comparison between pointer and integer
/usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/bits/stl_algo.h:219: error: ISO C++ forbids comparison between pointer and integer
/usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/bits/stl_algo.h:227: error: ISO C++ forbids comparison between pointer and integer
/usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/bits/stl_algo.h:231: error: ISO C++ forbids comparison between pointer and integer
/usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/bits/stl_algo.h:235: error: ISO C++ forbids comparison between pointer and integer 
```

如您所见，代码根本没有使用任何 STL，所以这很奇怪。此外，如果我删除该行，错误就会消失

```
using namespace std; 
```

这暗示了一些命名空间冲突。如果我`const`从函数的定义中删除关键字，它也会消失`find`。

另一方面，如果我按如下方式创建一个 2 参数函数，错误*也会*消失（这相当令人惊讶） ：`find`

```
#include <iostream>

using namespace std;

const int N = 100;

bool s[N + 1];
bool p[N + 1];
bool t[N + 1];

void find(const bool a[], bool b[]){
  return;
}

int main(){
  find(s, p);
  return 0;
} 
```

我无法想象 find 可以是两个参数的函数而不是三个参数的函数的原因。

所以这里简单总结一下消除错误的三种方法：

1.  删除`using namespace std;`线。

2.  从 的定义中删除`const`关键字`find`。

3.  删除函数的第三个参数`find`。

我想不出任何合乎逻辑的原因为什么会首先发生这样的错误，以及为什么应该删除它我使用上述任何看似完全不相关的步骤。这是一个记录在案的 g++ 错误吗？我尝试搜索它，但老实说，我不知道要搜索什么，而且我尝试的几个关键字（“没有使用 STL 的 STL 错误”）没有出现任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:05:45.000

您只是发生了冲突，因为您无意中将`std::find`（需要 3 个参数）拉到全局命名空间中`using namespace std;`。无论出于何种原因，您的`<iostream>`is `#include`-ing`<algorithm>`或其内部实现的一部分（特别是`bits/stl_algo.h`）。

我无法解释为什么删除`const`会使它消失；也许它会影响编译器解决重载的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:05:23.327

您将编译器与标准库 (std::find) 中的 find 版本混淆了，该版本具有 3 个参数，但不是您拥有的参数。

如果您的代码位于其自己的命名空间中，则可以避免此问题。或者通过重命名你的 find 方法，或者你已经记录的解决方案。

# plone - 前端开发人员使用 plone.resource

> ID：10904105
> 
> 赞同：2
> 
> 时间：2012-06-05T20:02:27.923
> 
> 标签：plone

plone.resource 提供了将静态媒体文件放入 Plone 的简单方法

[http://pypi.python.org/pypi/plone.resource](http://pypi.python.org/pypi/plone.resource)

然而，plone.resource 的使用并没有从系统管理员/前端开发者的角度进行解释。当前文档仅从 Zope 3 开发人员的角度概述了该过程，并没有给出完整的故事如何将 egg 添加到构建，如何将文件连接到 portal_javascript 等等。

为您的 Plone “放入静态媒体文件夹”的最佳做法是什么，然后您可以在其中注册 portal_css 和 portal_javascript 的条目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T23:41:09.613

plone.resource 是一个框架组件。您寻求的文档需要放在使用 plone.resource 的包中，以完成您所描述的“管理体验”类型。最明显的例子是 plone.app.theming，它的文档中确实包含此类信息。

# android - TextView.setVisibility 不起作用。

> ID：10904108
> 
> 赞同：1
> 
> 时间：2012-06-05T20:02:38.173
> 
> 标签：android, textview, android-linearlayout

我正在尝试通过代码将 TextView 设置为不可见，但它不起作用。我的 XML 声明是（在 LinearLayout 内）：

```
 <TextView android:text="\nVideo" android:visibility="visible" 
android:layout_width="wrap_content" android:layout_height="wrap_content" 
android:id="@+id/exhibitor_profile_videoSectionLabel" 
android:textAppearance="?android:attr/textAppearanceMedium"></TextView> 
```

我的Java是：

```
setContentView(R.layout.exhibitor_profile);
    TextView vidLabel=new TextView(this);
            vidLabel.findViewById(R.id.exhibitor_profile_videoSectionLabel);
    vidLabel.setVisibility(View.INVISIBLE); 
```

“不可见”调用仅在某些情况下进行，但即使我将调用移到条件之外以保证调用，TextView 仍然可见。在这一切过程中，LogCat 一直保持沉默，否则我很乐意发布它的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:05:14.530

您不应该创建一个新的`TextView`. 您正在尝试查找现有的：

```
setContentView(R.layout.exhibitor_profile);
TextView vidLabel = findViewById(R.id.exhibitor_profile_videoSectionLabel);
vidLabel.setVisibility(View.INVISIBLE); 
```

# python - 打开和关闭游标和连接的建议做法

> ID：10904110
> 
> 赞同：1
> 
> 时间：2012-06-05T20:02:52.870
> 
> 标签：python, mysql, sql

以下是我的代码中的一个常见模式，我想知道更多关于游标和连接的内部结构。

```
cursor = connection.cursor()
cursor.execute("SET NAMES utf8")
cursor.execute(sql, args)
results = cursor.fetchall()
cursor.close() 
```

到数据库的连接和游标之间有什么区别？开放连接是否有任何缺点（例如，几分钟？）。有未关闭的游标怎么办，有什么影响？连续执行多条SQL语句时，每次都要新建一个游标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T21:05:14.257

这取决于底层实现——Cursor 对象在驱动程序中的实际内容。

在许多 DB-api 实现中，Cursor 对象并不“有趣”（即，您可以保留很多对象并让 GC 担心它们），尤其是在您没有执行返回结果集的查询时。

我没有将 Python 与 Oracle 一起使用，但我怀疑（基于 JDBC 和其他方面的经验）Oracle 并非如此。Oracle JDBC 驱动程序具有服务器端游标，快速关闭它非常重要（默认的每个连接游标限制相当低；超过限制会导致尝试打开另一个游标失败）。

在 Oracle 中，依靠 GC 关闭游标可能是危险的，例如，如果您在循环中打开一个新游标，而 GC 将它们全部保留，直到循环函数返回。

如果这是真的，那么使用 with 语句构造来确保游标及时关闭可能会有所帮助，即使发生异常也是如此。

* * *

更新：您可以使用 contextlib.closure 作为上下文管理器，例如

```
with contextlib.closing(myconnection.cursor()) as curs:
  curs.execute(...
  # even if exception happens, cursor is still closed immediately 
  # after this block 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T21:03:56.103

游标类似于 python 中的迭代器。它使您能够遍历结果集，而无需将其全部保存在内存中。对于您使用的每个 RDBMS，可以以不同的方式实现光标。

如果垃圾收集器不删除它，未关闭的游标将使用一些内存。

您可以在一个连接中打开多个游标。

您可以保持连接打开。根据您使用的数据库，打开连接将使用一些资源，并且一次可以打开多少个连接可能会受到限制。

# c# - 在 Excel 中选择特定单元格并转到下一行

> ID：10904113
> 
> 赞同：0
> 
> 时间：2012-06-05T20:03:23.493
> 
> 标签：c#, .net, excel

使用 C# 如何“跳转”到 Excel 电子表格中的特定单元格并转到下一行？我需要使用列表中的数据填充现有电子表格。这就是我认为它会起作用的方式：

```
Globals.LookupTable.Range["A2"].Select();
foreach (CFolderType ft in FolderTypes) {
    Globals.LookupTable.Rows.Next.Value2 = ft.name;
} 
```

这将在 A 列中向下移动并插入值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T05:49:52.990

这样的事情应该做的工作：

```
Microsoft.Office.Interop.Excel.Application excel = new Microsoft.Office.Interop.Excel.ApplicationClass();
excel.Workbooks.Add(System.Reflection.Missing.Value);
int rowIdx = 2;
foreach (CFolderType ft in FolderTypes) 
{
    Microsoft.Office.Interop.Excel.Range aCell = excel.get_Range("A" + rowIdx.ToString(), System.Reflection.Missing.Value); 
    aRange.Value = ft.name;
    rowIdx++;
} 
```

# php - 使用openid light“找不到服务器”

> ID：10904117
> 
> 赞同：0
> 
> 时间：2012-06-05T20:03:43.797
> 
> 标签：php, login, openid, lightopenid

突然间，我使用 Light Open ID 收到此错误消息。

> 致命错误：未捕获的异常“ErrorException”，消息“未找到服务器！” 在 /home/a3422801/public_html/LoginAssignment/php/openid.php:463 堆栈跟踪：#0 /home/a3422801/public_html/LoginAssignment/php/openid.php(595): LightOpenID->discover() #1 /home /a3422801/public_html/LoginAssignment/index.php(9): LightOpenID->authUrl() #2 {main} 在 /home/a3422801/public_html/LoginAssignment/php/openid.php 第 463 行抛出

...以及相关代码的小片段`openid.php`：

```
if ($server) {
                # We found an OpenID2 OP Endpoint
                if ($delegate) {
                    # We have also found an OP-Local ID.
                    $this->identity = $delegate;
                }
                $this->server = $server;
                return $server;
            }

            throw new ErrorException('No servers found!'); 
```

我不知道问题是什么 - 这是最近的问题。有谁知道 OpenID 最近发生了一些变化。我很乐意提供更多所需的代码。一般来说，我是登录和 PHP 的新手，所以如果这非常模糊，我深表歉意。

如果这有任何影响，则此 google 登录名与 FB 登录名相结合 - 但就像我说的那样，它运行正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:51:09.483

我遇到了同样的问题，并通过将我使用的 OpenID URL 与 StackOverflow 上的 URL 进行比较来解决它。原来我没有使用**https**。直到最近，这还不是问题，但现在似乎是必需的。

因此，请确保您使用的是以下网址： **https ://www.google.com/accounts/o8/id**

更改此设置后，它再次在我的网站上运行。

# actionscript-3 - Flex ItemRenderer：渲染一个拖拽的源项

> ID：10904119
> 
> 赞同：0
> 
> 时间：2012-06-05T20:03:47.610
> 
> 标签：actionscript-3, apache-flex, itemrenderer

在默认实现中，当从列表中/在列表中拖动项目时，它在拖动期间显示为选中状态（并且在状态下，单独的项目渲染器`dragging`显示为拖动图像），因此：

```
<s:ItemRenderer>
    <s:Label text="{data}" color.selected="0xFF0000" color.dragging="0x00FF00" />
</s:ItemRenderer> 
```

呈现为：

![ListItemRenderer 处于正常、选中和拖动状态](../Images/b0238de3a53f5c89ef4c10657081f5aa.png)

是否有一种直接的方法可以在拖动期间将拖动源的状态（红色、选中、“条形”）更改为“选中”以外的状态？

理想情况下，我将添加`color.dragSource="0x0000FF"`到上面的项目渲染器代码中，并且“栏”在选中时会显示为红色，但一旦开始拖动，则会显示为蓝色。拖动完成后，它将恢复为红色（或者，如果不再选择，则恢复为黑色）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:13:59.340

如果您在拖动开始时执行了一个 eventListener 将列表中的选定项目设置为 -1 怎么办？-1 表示不应选择任何内容。

编辑：添加以下代码以支持：

```
<s:List id="myList" dragStart="startDrag(event)"/>

private var dragIndex:int;

private function startDrag(e:Event):void
{
    dragIndex = myList.selectedIndex;
    myList.selectedIndex = -1;
}

private function stopDrag(e:Event):void
{
    myList.selectedIndex = dragIndex;
} 
```

# objective-c - 在 Mac OS X 10.7 中播放视频

> ID：10904120
> 
> 赞同：3
> 
> 时间：2012-06-05T20:03:52.627
> 
> 标签：objective-c, video, osx-lion, osx-snow-leopard, avfoundation

在 Mac OS X 10.7 (Lion) 中使用 Objective-C 以编程方式播放视频的最简单方法是什么？如果我也想支持 OS X 10.6 (Snow Leopard)？

我注意到 iOS [AV Foundation](http://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40010188)被引入 OS X 10.7。不幸的是，文档似乎是为 iOS 编写的，我发现它令人困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T11:30:27.370

这是一个 NSView 子类，它使用 AV Foundation（因此仅适用于 Mac OS X 10.7 以上）播放给定 URL 的视频。基于[AVSimplePlayer](http://developer.apple.com/library/mac/#samplecode/AVSimplePlayerOSX/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011060)示例代码。

标题：

```
@interface RMVideoView : NSView

@property (nonatomic, readonly, strong) AVPlayer* player;
@property (nonatomic, readonly, strong) AVPlayerLayer* playerLayer;
@property (nonatomic, retain) NSURL* videoURL;

- (void) play;

@end 
```

执行：

```
static void *RMVideoViewPlayerLayerReadyForDisplay = &RMVideoViewPlayerLayerReadyForDisplay;
static void *RMVideoViewPlayerItemStatusContext = &RMVideoViewPlayerItemStatusContext;

@interface RMVideoView()

- (void)onError:(NSError*)error;
- (void)onReadyToPlay;
- (void)setUpPlaybackOfAsset:(AVAsset *)asset withKeys:(NSArray *)keys;

@end

@implementation RMVideoView

@synthesize player = _player;
@synthesize playerLayer = _playerLayer;
@synthesize videoURL = _videoURL;

- (id)initWithFrame:(NSRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        self.wantsLayer = YES;
        _player = [[AVPlayer alloc] init];
        [self addObserver:self forKeyPath:@"player.currentItem.status" options:NSKeyValueObservingOptionNew context:RMVideoViewPlayerItemStatusContext];
    }

    return self;
}

- (void) dealloc {
    [self.player pause];
    [self removeObserver:self forKeyPath:@"player.currentItem.status"];
    [self removeObserver:self forKeyPath:@"playerLayer.readyForDisplay"];
    [_player release];
    [_playerLayer release];
    [_videoURL release];
    [super dealloc];
}

- (void) setVideoURL:(NSURL *)videoURL {
    _videoURL = videoURL;

    [self.player pause];
    [self.playerLayer removeFromSuperlayer];

    AVURLAsset *asset = [AVAsset assetWithURL:self.videoURL];
    NSArray *assetKeysToLoadAndTest = [NSArray arrayWithObjects:@"playable", @"hasProtectedContent", @"tracks", @"duration", nil];
    [asset loadValuesAsynchronouslyForKeys:assetKeysToLoadAndTest completionHandler:^(void) {
        dispatch_async(dispatch_get_main_queue(), ^(void) {
            [self setUpPlaybackOfAsset:asset withKeys:assetKeysToLoadAndTest];
        });
    }];
}

#pragma mark - KVO

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if (context == RMVideoViewPlayerItemStatusContext) {
        AVPlayerStatus status = [[change objectForKey:NSKeyValueChangeNewKey] integerValue];
        switch (status) {
            case AVPlayerItemStatusUnknown:
                break;
            case AVPlayerItemStatusReadyToPlay:
                [self onReadyToPlay];
                break;
            case AVPlayerItemStatusFailed:
                [self onError:nil];
                break;
        }
    } else if (context == RMVideoViewPlayerLayerReadyForDisplay) {
        if ([[change objectForKey:NSKeyValueChangeNewKey] boolValue]) {
            self.playerLayer.hidden = NO;
        }
    } else {
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
    }
}

#pragma mark - Private

- (void)onError:(NSError*)error {
    // Notify delegate 
}

- (void)onReadyToPlay {
    // Notify delegate
}

- (void)setUpPlaybackOfAsset:(AVAsset *)asset withKeys:(NSArray *)keys {
    for (NSString *key in keys) {
        NSError *error = nil;
        if ([asset statusOfValueForKey:key error:&error] == AVKeyValueStatusFailed) {
            [self onError:error];
            return;
        }
    }

    if (!asset.isPlayable || asset.hasProtectedContent) {
        [self onError:nil];
        return;
    }

    if ([[asset tracksWithMediaType:AVMediaTypeVideo] count] != 0) { // Asset has video tracks
        _playerLayer = [AVPlayerLayer playerLayerWithPlayer:self.player];
        self.playerLayer.frame = self.layer.bounds;
        self.playerLayer.autoresizingMask = kCALayerWidthSizable | kCALayerHeightSizable;
        self.playerLayer.hidden = YES;
        [self.layer addSublayer:self.playerLayer];
        [self addObserver:self forKeyPath:@"playerLayer.readyForDisplay" options:NSKeyValueObservingOptionInitial | NSKeyValueObservingOptionNew context:RMVideoViewPlayerLayerReadyForDisplay];
    }

    // Create a new AVPlayerItem and make it our player's current item.
    AVPlayerItem *playerItem = [AVPlayerItem playerItemWithAsset:asset];
    [self.player replaceCurrentItemWithPlayerItem:playerItem];  
}

#pragma mark - Public

- (void) play {
    [self.player play];
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T20:35:01.983

“最简单”取决于您要做什么。如果您想要更多控制（例如，将电影渲染为 OpenGL 纹理）或更少（例如，您可以弹出并忽略的完全独立的窗口），可能会有不同的答案。

但对于大多数用例，如果您想要 10.6+ 的支持，最简单的显示电影的方法是 QTKit。请参阅 Xcode 文档中的文章“使用 QTKit 进行媒体播放”以获得良好的起点。

# javascript - 如何使用 jquery 选择 col id 以通过 css 隐藏

> ID：10904123
> 
> 赞同：0
> 
> 时间：2012-06-05T20:04:10.773
> 
> 标签：javascript, jquery, css, col

我有一个表（并且无法使用，因为在尝试隐藏列时标题偏移 1），每列都有自己的 col id=""。我想在下面的代码中使用 jquery 来选择表中的列并将它们关闭和打开。

这是表格：

```
<article class="technical">
                <div id="technical-container">
                    <h1><span id="technology">Technologies</span> / <span id="compliance">Compliance</span> / <span id="certification">Certification</span></h1>
                    <table id="tech-table" cellspacing="0">
                        <colgroup>
                            <col>
                            <col id="type" class="type">
                            <col id="name">
                            <col id="startdate">
                            <col id="currentenddate">
                            <col id="elapsed">
                            <col id="version">
                            <col id="rating">
                            <col id="project">
                        </colgroup>
                        <tbody>
                            <tr>
                                <td>type</td>
                                <td>Name</td>
                                <td>Start Date</td>
                                <td>Current/End Date</td>
                                <td>Elapsed</td>
                                <td>Version(s)</td>
                                <td>Personal Rating</td>
                                <td>Project</td>
                            </tr>
                            <tr>
                                <td>technology</td>
                                <td>J2EE</td>
                                <td>November, 2011</td>
                                <td><span id="current"></span></td>
                                <td>TODO</td>
                                <td>1.5, 1.6, 1.7</td>
                                <td>2</td>
                                <td>Contractor Optimization</td>
                            </tr>
                            <tr>
                                <td>technology</td>
                                <td>JS</td>
                                <td>April, 2012</td>
                                <td><span id="current"></span></td>
                                <td>TODO</td>
                                <td>?</td>
                                <td>1</td>
                                <td>Resume Builder</td>
                            </tr>
                            <tr>
                                <td>compliance</td>
                                <td>CIP</td>
                                <td>May, 2008</td>
                                <td>August, 2011</td>
                                <td>TODO, 3 years, 4 mos</td>
                                <td>n/a</td>
                                <td>2</td>
                                <td>Protection</td>
                            </tr>
                            <tr>
                                <td>certification</td>
                                <td>Red Cross</td>
                                <td>May, 2007</td>
                                <td>April, 2013</td>
                                <td>TODO, 6 years</td>
                                <td>n/a</td>
                                <td>3</td>
                                <td>Life Saving</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </article> 
```

以下是单击以进行隐藏的按钮：

```
<article>
                <header>
                    <h1>What</h1>
                    <div class="mydiv">
                        <p1>this sections involves what I work with</p1>
                    </div>
                </header>
                <section>
                    <div class="mydiv">
                        <span id="what1"><button type="button" class="button" id="clickTech">Technologies</button></span> <span id="what2"><button type="button" class="button" id="clickComp">Compliance</button></span> <span id="what3"><button type="button" class="button" id="clickCert">Certifications</button></span>
                        <!-- <input type="button" class="btn" value="Technologies" id="clickTech" / -->
                    </div>
                </section>
                <section>
                    <h3><span id="whatsel2"><button type="button" class="button-vert" id="clickStart">Start Date</button></span></h3>
                    <h3><span id="whatsel3"><button type="button" class="button-vert" id="clickEnd">Current/End Date</button></span></h3>
                    <h3><span id="whatsel4"><button type="button" class="button-vert" id="clickElapsed">Elapsed Time</button></span></h3>
                    <h3><span id="whatsel5"><button type="button" class="button-vert" id="clickVersion">Version(s)</button></span></h3>
                    <h3><span id="whatsel6"><button type="button" class="button-vert" id="clickRating">Personal Rating</button></span></h3>
                    <h3><span id="whatsel7"><button type="button" class="button-vert" id="clickProject">Project</button></span></h3>
                </section>
                <!-- <footer>
                    <h2>footer</h2>
                    <p>footer</p>
                </footer> -->
            </article> 
```

这是隐藏行的工作选择器：

```
 var rowSelector = function (args) {
            $("#"+args.data.type).toggle();
            $("#tech-table tr").each(function(){
                if ($($(this).children()[0]).text()==args.data.type) {
                    $(this).toggle();
                }
            });
        };
        // $("#clickTech").click({type:"technology"},generalSelector);
        // assoc array is id:type
        var hiders = {"#clickTech":"technology", "#clickComp":"compliance", "#clickCert":"certification"};
        for (var id in hiders) {
            $(id).click({type:hiders[id]}, rowSelector);
        } 
```

这就是我到目前为止使用列选择器的内容，但需要第 3、4 和 5 行的帮助：

```
 var colSelector = function (args) {
            $("#"+args.data.type).toggle();
            $("#tech-table col").each(function(){
                if  ($($(this)).text()==args.data.type) {
                    $(this).toggle();
                }
            });
        };
        // $("#clickTech").click({type:"technology"},generalSelector);
        // assoc array is id:type
        var colHiders = {"#clickStart":"Start Date", "#clickEnd":"Current/End Date", "#clickElapsed":"Elapsed Time", "#clickVersion":"Version(s)", "#clickRating":"Personal Rating", "#clickProject":"Project"};
    for (var id in hiders) {
        $(id).click({type:colHiders[id]}, colSelector);
    } 
```

感谢您的指导和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:58:36.747

如果您不想使用@jatrim 的 css 解决方案，这里有一个 javascript 答案

```
 var colSelector = function (args) {
        var num = 0;
        var i = 0;
        $($("#tech-table tr")[0]).find('td').each(function(){
            if ($(this).text() == args.data.type)
                num=i;
            i++;
        });
        if (num!=0){
            $("#tech-table tr").each(function(){
                var tds = $(this).find('td');
                $(tds[num]).toggle();
            });
        }
    };
    // $("#clickTech").click({type:"technology"},generalSelector);
    // assoc array is id:type
    var colHiders = {"#clickStart":"Start Date", "#clickEnd":"Current/End Date", "#clickElapsed":"Elapsed Time", "#clickVersion":"Version(s)", "#clickRating":"Personal Rating", "#clickProject":"Project"};
    for (var id in colHiders) {
        $(id).click({type:colHiders[id]}, colSelector);
    } 
```

还有要测试的小提琴在这里[http://jsfiddle.net/ueKcL/](http://jsfiddle.net/ueKcL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:53:22.870

我认为您想要的在这里：[使用 css 显示/隐藏 html 表格列](https://stackoverflow.com/questions/2858339/show-hide-html-table-columns-using-css)。

我特别喜欢这个：`$('td:nth-child(2)').hide();`其中 2 是您要隐藏的列的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T20:55:08.980

您可能可以执行类似的操作 - 将标题（或 col 标签的其他属性）添加到 col 标签，并且 title 的值是列的索引。所以 col id="name" 将是

```
<col id="name" title="2"> 
```

忽略第一个空 col 标记。那么你将不得不使用 :nth-child （标题属性）来定位 td 并将它们全部隐藏。

您不需要添加标题，仍然能够找出 col 的索引，但它使用属性简化了脚本

或者

您甚至可以通过单击按钮传递列索引，也有很多方法可以做到这一点。但最终你仍然需要使用 :nth-child 来隐藏 td

# r - R中的全局变量和局部变量

> ID：10904124
> 
> 赞同：145
> 
> 时间：2012-06-05T20:04:18.657
> 
> 标签：r

我是 R 的新手，我对 R 中局部和全局变量的使用感到很困惑。

我在互联网上阅读了一些帖子，说如果我使用`=`或者`<-`我将在当前环境中分配变量，并且`<<-`我可以在函数内部访问全局变量。

但是，正如我记得在 C++ 中，每当您在括号内声明变量时，都会出现局部变量`{}`，所以我想知道这对于 R 是否相同？或者仅仅是R中的*函数*，我们有局部变量的概念。

我做了一个小实验，似乎表明只有括号是不够的，我有什么问题吗？

```
{
   x=matrix(1:10,2,5)
}
print(x[2,2])
[1] 4 
```

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2012-06-05T20:20:40.810

在函数内部声明的变量是该函数的局部变量。例如：

```
foo <- function() {
    bar <- 1
}
foo()
bar 
```

给出以下错误：`Error: object 'bar' not found`。

如果你想创建`bar`一个全局变量，你应该这样做：

```
foo <- function() {
    bar <<- 1
}
foo()
bar 
```

在这种情况下`bar`，可以从函数外部访问。

但是，与 C、C++ 或许多其他语言不同，括号不能确定变量的范围。例如，在以下代码片段中：

```
if (x > 10) {
    y <- 0
}
else {
    y <- 1
} 
```

`y`声明后仍可访问`if-else`。

正如您所说，您还可以创建嵌套环境。您可以查看这两个链接以了解如何使用它们：

1.  [http://stat.ethz.ch/R-manual/R-devel/library/base/html/environment.html](http://stat.ethz.ch/R-manual/R-devel/library/base/html/environment.html)
2.  [http://stat.ethz.ch/R-manual/R-devel/library/base/html/get.html](http://stat.ethz.ch/R-manual/R-devel/library/base/html/get.html)

这里有一个小例子：

```
test.env <- new.env()

assign('var', 100, envir=test.env)
# or simply
test.env$var <- 100

get('var') # var cannot be found since it is not defined in this environment
get('var', envir=test.env) # now it can be found 
```

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2012-06-05T20:56:00.007

`<-`在当前环境中进行赋值。

当你在一个函数中时，R 会为你创建一个新环境。默认情况下，它包括创建它的环境中的所有内容，因此您也可以使用这些变量，但您创建的任何新内容都不会写入全局环境。

在大多数情况下`<<-`，即使您在函数内部，也会分配给全局环境中已经存在的变量或在全局环境中创建变量。然而，它并不像那样简单。它的作用是检查父环境以查找具有感兴趣名称的变量。如果它在您的父环境中找不到它，它会转到父环境的父环境（在创建函数时）并在那里查找。它继续向上到全局环境，如果在全局环境中找不到它，它将在全局环境中分配变量。

这可能说明正在发生的事情。

```
bar <- "global"
foo <- function(){
    bar <- "in foo"
    baz <- function(){
        bar <- "in baz - before <<-"
        bar <<- "in baz - after <<-"
        print(bar)
    }
    print(bar)
    baz()
    print(bar)
}
> bar
[1] "global"
> foo()
[1] "in foo"
[1] "in baz - before <<-"
[1] "in baz - after <<-"
> bar
[1] "global" 
```

我们第一次打印 bar 我们还没有调用`foo`所以它应该仍然是全局的——这是有道理的。我们第二次打印它是`foo`在调用之前的内部，`baz`所以“in foo”的值是有意义的。下面是我们看到`<<-`实际在做什么的地方。打印的下一个值是“in baz - before <<-”，即使 print 语句出现在`<<-`. 这是因为`<<-`不查看当前环境（除非您在全局环境中，这种情况下的`<<-`行为类似于`<-`）。所以`baz`bar 的值内部保持为“in baz - before <<-”。一旦我们调用`baz`bar inside of 的副本，`foo`就会更改为“in baz”，但我们可以看到全局`bar`没有变化。`bar``foo`当我们创建时，它在父环境中定义，`baz`所以这是`bar`它`<<-`看到的第一个副本，因此是它分配给的副本。所以`<<-`不仅仅是直接分配给全局环境。

`<<-`很棘手，如果可以避免，我不建议使用它。如果您真的想分配给全局环境，您可以使用 assign 函数并明确告诉它您要全局分配。

现在我将其更改`<<-`为分配语句，我们可以看到它有什么效果：

```
bar <- "global"
foo <- function(){
    bar <- "in foo"   
    baz <- function(){
        assign("bar", "in baz", envir = .GlobalEnv)
    }
    print(bar)
    baz()
    print(bar)
}
bar
#[1] "global"
foo()
#[1] "in foo"
#[1] "in foo"
bar
#[1] "in baz" 
```

因此，`foo`即使在调用`baz`. 这是因为我们`assign`从来没有考虑过 foo 内部的副本，`bar`因为我们告诉了它在哪里看。但是，这一次全局环境中 bar 的值发生了变化，因为我们在那里显式分配。

现在您还询问了有关创建局部变量的问题，您也可以很容易地做到这一点，而无需创建函数……我们只需要使用该`local`函数。

```
bar <- "global"
# local will create a new environment for us to play in
local({
    bar <- "local"
    print(bar)
})
#[1] "local"
bar
#[1] "global" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-15T07:47:29.587

沿着同样的路线多一点

```
attrs <- {}

attrs.a <- 1

f <- function(d) {
    attrs.a <- d
}

f(20)
print(attrs.a) 
```

将打印“1”

```
attrs <- {}

attrs.a <- 1

f <- function(d) {
   attrs.a <<- d
}

f(20)
print(attrs.a) 
```

将打印“20”

# c# - C# Array: Order By Descending, including null values

> ID：10904127
> 
> 赞同：1
> 
> 时间：2012-06-05T20:04:26.740
> 
> 标签：c#, arrays, null, sql-order-by

I have an array of (always 4) objects, which I need to order by descending value of an object member.
I had thought to order it as

```
Array = Array.OrderByDescending(p => p.Val) 
```

This fell over when one of the values was null, of course. So what I am aiming for, but my LINQ is not up to, is:

```
Array = Array.OrderByDescending(p => if( p != null ) p.Val; else float.MinValue) 
```

How can I accomplish this ordering without having to delete and later re-add the null value? Thanks for your help.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-05T20:06:35.863

Use the ternary conditional operator:

```
Array = Array.OrderByDescending(p => p != null ? p.Val : float.MinValue) 
```

Per the comments below, the reason you can't use the `if/else` is because the body of the lambda (the stuff to the right of `p =>`) must be an expression, unless you surround the whole thing with curly braces. So to illustrate, you *could* also use the `if/else` if you wanted:

```
Array = Array.OrderByDescending(p => 
{
    if (p != null) return p.Val; 
    else return float.MinValue;
}); 
```

But clearly more verbose.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T20:07:33.783

I'm not sure what objects/types you're working with, but perhaps try a ternary operator like the following:

```
Array = Array.OrderByDescending(p => p == null ? float.MinValue : p.Val) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T07:58:36.793

Use this operator:

```
Array = Array.OrderByDescending( p => p ?? float.MinValue) 
```

# python - wxpython 的 Intellisense 之类的小部件是什么

> ID：10904129
> 
> 赞同：1
> 
> 时间：2012-06-05T20:04:44.740
> 
> 标签：python, wxpython, wxwidgets

这是我正在寻找的图像

![在此处输入图像描述](../Images/9bc922a6c13ada8a8309ef6af28d31ce.png)

我发现最好的是一个弹出框。

如果小部件打算在 TextBoxes 中使用，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:50:50.653

听起来您想要一个具有自动完成功能的文本控件。你应该看看这个 wxPython wiki recipe：

[http://wiki.wxpython.org/TextCtrlAutoComplete](http://wiki.wxpython.org/TextCtrlAutoComplete)

那应该让你开始。

# string - 在 MATLAB 中将数字转换为字符串

> ID：10904132
> 
> 赞同：3
> 
> 时间：2012-06-05T20:04:56.607
> 
> 标签：string, matlab, floating-point, number-formatting

假设我想`0.011124325465476454`在 MATLAB 中将数字转换为字符串。

如果我打

`mat2str(0.011124325465476454,100)`

我得到`0.011124325465476453`了最后一位不同的数字。

如果我打`num2str(0.011124325465476454,'%5.25f')`

我明白了`0.0111243254654764530000000`

它用不需要的零填充，并且在最后一位不同（3 应该是 4）。

我需要一种方法将具有随机小数位数的数字转换为它们的精确字符串匹配（不填充零，不修改最终数字）。

有没有这样的方法？

编辑：由于我没有记住 Amro 和 nrz 提供的有关精度的信息，因此我添加了有关该问题的更多附加信息。我实际需要转换的数字来自将它们输出到 txt 文件的 C++ 程序，它们都是 C++`double`类型。[注意：将数字从 txt 文件输入到 MATLAB 的部分不是由我编码的，实际上我不允许修改它以将数字保留为字符串而不将它们转换为数字。我只能访问此代码的“输出”，这是我要转换的数字]。到目前为止，我还没有得到超过 17 位小数的数字（注意：因此，上面提供的带有 18 位小数的示例并不是很有指示性）。

现在，如果号码有 15 位数字，例如 0.280783055069002

然后`num2str(0.280783055069002,'%5.17f')`或`mat2str(0.280783055069002,17)`返回

`0.28078305506900197`

这不是确切的数字（请参阅最后一位数字）。

但如果我打 `mat2str(0.280783055069002,15)`我得到

`0.280783055069002`哪个是对的！！！

可能有一百万种方法可以“围绕”问题进行“编码”（例如，创建一个进行转换的例程），但是当我输入一个随机数为小数（但不超过 17）；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T23:38:42.407

我的[HPF](http://www.mathworks.com/matlabcentral/fileexchange/36534-hpf-a-big-decimal-class-currently-in-beta-release)工具箱还允许您在 MATLAB 中使用任意精度的数字。

在 MATLAB 中，试试这个：

```
>> format long g
>> x = 0.280783054
x =
               0.280783054 
```

如您所见，MATLAB 用您输入的数字将其写出来。但是 MATLAB 是如何真正“感受”这个数字的呢？它在内部存储什么？看看 sprintf 怎么说：

```
>> sprintf('%.60f',x)
ans =
0.280783053999999976380053112734458409249782562255859375000000 
```

这就是 HPF 在尝试从双精度数中提取该数字时所看到的：

```
>> hpf(x,60)
ans =
0.280783053999999976380053112734458409249782562255859375000000 
```

事实是，几乎所有十进制数在浮点运算中都不能精确地表示为双精度数。（出于显而易见的原因，0.5 或 0.375 是该规则的例外。）

但是，当以 18 位的十进制形式存储时，我们看到 HPF 不需要将数字存储为十进制形式的二进制近似值。

```
x = hpf('0.280783054',[18 0])
x =
0.280783054

>> x.mantissa
ans =
  2 8 0 7 8 3 0 5 4 0 0 0 0 0 0 0 0 0 
```

尼尔斯不明白的是，十进制数不以十进制形式存储为双精度数。例如 0.1 在内部是什么样子？

```
>> sprintf('%.60f',0.1)
ans =
0.100000000000000005551115123125782702118158340454101562500000 
```

如您所见，matlab 不会将其存储为 0.1。事实上，matlab 将 0.1 存储为二进制数，这里实际上...

```
1/16 + 1/32 + 1/256 + 1/512 + 1/4096 + 1/8192 + 1/65536 + ... 
```

或者如果你喜欢

```
2^-4 + 2^-5 + 2^-8 + 2^-9 + 2^-12 + 2^13 + 2^-16 + ... 
```

为了准确地表示 0.1，这将需要无限多个这样的项，因为 0.1 是二进制中的重复数字。MATLAB 停止在 52 位。就像 2/3 = 0.6666666666... 作为小数一样，0.1 仅作为双精度的近似值存储。

这就是为什么您的问题完全与精度和双精度所包含的二进制形式有关。

作为聊天后的最终编辑...

关键是 MATLAB 使用 double 来表示数字。因此，它将接收一个最多 15 位十进制数字的数字，并能够使用正确的格式设置将它们吐出。

```
>> format long g
>> eps 
ans = 
2.22044604925031e-16 
```

所以例如...

```
>> x = 1.23456789012345
x =
          1.23456789012345 
```

我们看到 MATLAB 做对了。但是现在在末尾再添加一位数字。

```
>> x = 1.234567890123456
x =
          1.23456789012346 
```

在它的全部荣耀中，看看 x，就像 MATLAB 看到的那样：

```
>> sprintf('%.60f',x)
ans =
1.234567890123456024298320699017494916915893554687500000000000 
```

因此，请始终注意任何浮点数的最后一位。MATLAB 会尝试智能地舍入，但 15 位数字就在您安全的边缘。

是否需要使用HP​​F或MP之类的工具来解决这样的问题？不，只要你认识到双重的局限性。然而，提供任意精度的工具使您能够在需要时更加灵活。例如，HPF 在地下室区域提供保护数字的使用和控制。如果您需要它们，它们会在那里保存您需要的数字以免损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:12:09.993

您可以将[MATLAB File Exchange 中的 Multiple Precision Toolkit](http://www.mathworks.com/matlabcentral/fileexchange/6446)用于任意精度数。浮点数通常没有精确的以 10 为底的表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T20:29:08.943

那是因为您的数字超出了`double`数字类型的精度（它为您提供了 15 到 17 个有效十进制数字）。在您的情况下，一旦评估文字，它就会四舍五入到最接近的可表示数字。

如果您需要比双精度浮点提供的精度更高的精度，请将数字存储在字符串中，或​​使用任意精度库。例如使用符号工具箱：

```
sym('0.0111243254654764549999999') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T05:08:17.563

您无法获得 EXACT 字符串，因为该数字存储在 double 类型，甚至 long double 类型中。存储的数字将比您提供的数字略多或少。

计算机只知道二进制数 0 和 1。您必须知道，一个基数中的数字在其他基数中可能表示不同。例如，数字 1/3，基数 10 产生 0.33333333...（省略号（三个点）表示还有更多数字，这里是数字 3），它将被截断为 0.333333；基数 3 产生 0.10000000，看，不多也不少，确切的数量；基数 2 产生 0.01010101...，因此它可能会在计算机中被截断为 0.01010101，即 85/256，四舍五入小于 1/3，并且下次您获取数字时，**它不会与您想要的相同**。

所以从一开始，你应该将数字存储在字符串而不是浮点类型中，否则会失去精度。

考虑到精度问题，MATLAB 提供了任意精度的符号计算。

# java - 如何使用 gdata java youtube api 获取 youtube 上次更新日期

> ID：10904135
> 
> 赞同：1
> 
> 时间：2012-06-05T20:05:12.373
> 
> 标签：java, youtube-api, gdata, gdata-api

我正在使用 gdata java 客户端加载 youtube 视频元数据。我正在寻找的关键信息之一是发布日期和最后更新日期。虽然我能够获得发布日期，但 API 似乎没有提供最后更新日期的句柄。

我正在使用标准 gdata API 来检索以下链接的信息：

```
 http://gdata.youtube.com/feeds/api/videos/_KqMmr_yhIs 
```

如您所见，它同时具有已发布和更新的日期信息。

这是我正在使用的标准代码：

```
 YouTubeMediaGroup mediaGroup = videoEntry.getMediaGroup();
MediaPlayer mediaPlayer = mediaGroup.getPlayer();
System.out.println("Upload Time :"+mediaGroup.getUploaded()); 
```

上传时间返回发布日期。有什么方法可以获取更新日期吗？

任何指针将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:28:05.453

我的错，我应该更多地研究 API。

更新日期可以从 VideoEntry 类中找到。

```
 videoEntry.getUpdated(); 
```

为仓促提出问题而道歉。

# php - 从 mysql 数据库显示 javascript 的语法错误

> ID：10904143
> 
> 赞同：0
> 
> 时间：2012-06-05T20:05:43.783
> 
> 标签：php, javascript, mysql, phpmyadmin

我已经使用 phpMyAdmin 将 JavaScript 保存在 MySQL 数据库中。当我使用 php 从数据库的前端显示它时，它显示为字符串，而不是 JavaScript。

这是数据库中的 JavaScript 代码：

```
 <script type="text/javascript" src="http://i0.poll.fm/survey.js" charset="UTF-8"></script>
   <noscript><a href="http://rohan44.polldaddy.com/s/test">Take Our Survey!</a></noscript>
   <script type="text/javascript">
     polldaddy.add( {
       type: 'button',
       title: 'Take Our Survey!',
       style: 'inline',
       text_color: '000000',
       domain: 'rohan44.polldaddy.com/s/',
       id: 'A8D2AA9FAF96DA61'
     } );
   </script> 
```

这是PHP页面：

```
 <?php $xy=mysql_query("select * from survey where id=1");
   $row=mysql_fetch_row($xy);
   echo '<div id="survey">'.$row[1].'</div>'; ?> 
```

这怎么能像 JavaScript 一样工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:21:35.463

首先尝试在 PHP 中注释您的 echo 行并将其放在它的位置：

```
var_dump($row); 
```

这将让您看到 $row 中的所有数据。我怀疑您的脚本数据不在 $row[1] 中，但可能在 $row[2] 中。通过使用 var_dump，您将看到 $row 中的所有内容及其所在位置。

如果在使用 var_dump 检查 $row 之后，您没有在任何地方看到您的数据，那么您需要确保您的查询是正确的。自己运行查询，看看你得到什么结果。如果您在运行查询时看到正确的结果，请确保在脚本中选择了数据库。你可能需要做类似的事情

```
mysql_select_db("mydatabase"); 
```

首先在您的查询将起作用之前。

# sql - 查询 - 通过第一次插入选择数据

> ID：10904145
> 
> 赞同：0
> 
> 时间：2012-06-05T20:05:46.240
> 
> 标签：sql

> **可能重复：**
> [按自然顺序选择底部行](https://stackoverflow.com/questions/5061595/select-bottom-rows-in-natural-order)

人们想象我有这张桌子：

**人**

表的列是 NAME 和 ID

我插入这个

```
insert into persons values ('name','id');

insert into persons values ('John','1');

insert into persons values ('Jack','3');

insert into persons values ('Alice','2'); 
```

如何通过插入选择此信息顺序？我的查询想：

**姓名** **ID**

姓名编号

约翰 1

杰克 3

爱丽丝 2

没有索引（自动增量），有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:25:22.370

`order by`在没有指定子句的情况下，您不能对 DBMS 如何存储和检索数据有任何假设。即 PostgreSQL 使用 MVCC，如果你更新任何行，物理上将在表数据文件的末尾创建行的新副本。使用plain`select`会导致pg 使用序列扫描方案——这意味着最后更新的行将作为最后一个返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T20:09:25.597

如果不添加包含时间戳的列或表，这是不可能的。您可以添加时间戳列或创建另一个包含 ID 和时间戳的表并同时插入其中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T20:08:08.227

我很确定它不是。据我所知，sql 数据顺序在插入方面不是连续的。我唯一的想法是每个插入都有一个时间戳并按该时间戳排序

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T20:15:45.797

我必须同意其他答案，如果没有特定的字段/列来执行此操作...好吧，这是一种不可靠的方式...虽然在我认为之前我实际上从未有过没有索引的表..

您将需要一些东西来索引它，您可以使用许多其他方法和方法...例如，您使用某种形式的字符串连接/连接，然后稍后拆分/分离查询结果。

--EDIT-- 出于什么原因您不想使用这些方法？时间/自动

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T20:14:28.573

如果在插入期间不存储某种顺序信息，数据库不会自动跟踪曾经插入的每条记录及其顺序（这可能是件好事；））。无法避免自动增量......即使有时间戳，它们也可以保持相同的值。

# php - 使用单个请求检索所有 Twitter 关注者

> ID：10904147
> 
> 赞同：0
> 
> 时间：2012-06-05T20:06:07.590
> 
> 标签：php, twitter

我尝试了这个，甚至添加了一个游标，但它仍然只能检索前 100 个关注者。

```
<?php
$cursor = -1;
$account_from = 'username';
do
  {
     $json = file_get_contents('http://api.twitter.com/1/statuses/followers/' .   $account_from .'.json?cursor=' . $cursor);

$accounts = json_decode($json);

foreach ($accounts->users as $account)
{

        $a[] = $account->screen_name ; 

}
$cursor = $accounts->next_cursor;

}
 while ($cursor > 0);

 foreach($a as $f) {

         echo $f ; 

   }

?> 
```

有没有更好更简单的方法呢？我哪里错了？请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:12:05.140

API 文档声明此请求已弃用：

> 此方法已弃用，因为它只会返回有关最近发推文的用户的信息。这不是检索所有用户关注者的实用方法。不使用此方法，而是使用 GET follower/ids 和 GET users/lookup 的组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:13:14.200

请改用此 API：[https ://dev.twitter.com/docs/api/1/get/followers/ids](https://dev.twitter.com/docs/api/1/get/followers/ids)

您的对象中应该有一个名为 的属性`next_cursor`，只要该属性不为零，请继续再次执行请求（指定该光标），直到获得所有结果。

# nagios - Nagios Core 3 自定义通知异常

> ID：10904148
> 
> 赞同：0
> 
> 时间：2012-06-05T20:06:16.293
> 
> 标签：nagios

我希望避免为了实现某些目标而拼凑在一起。我知道这可以用杂烩来完成，但让我们看看我是否错过了一个简单、简单的方法。这是 Nagios Core 3。

我有服务。24x7x365 检查该服务。通知在 WARNING 和 CRITICAL 时 24x7x365 发送。

这很好——这就是我想要的。

但是...现在我想要该*通知*设置的一个例外。注意：我不希望*监控*设置出现异常——我希望控制台始终显示正确的状态，24x7。我只想为这项服务的*通知*（通过电子邮件）做一个例外。

这是一个例外：

如果服务状态为 WARN*并且*一天中的时间介于 0300 和 0600 之间，请不要通知。

而已。如果它是关键的，电子邮件通知 24x7（因为它已经这样做了）。如果不是在凌晨 3 点到 6 点之间，无论 WARN 还是 CRIT 都通知（因为它已经这样做了）。唯一的例外是 WARNING*和*3-6 am

背景：这是因为我们在每晚 3 点到 6 点之间进行维护，我们已对其进行定制以产生警告（非严重）。在此之外的任何时间我都想要通知（管理员可能在中午不小心启动了维护），并且我*随时*都想要 CRITICAL 。我不想在那段时间简单地跳过检查，因为我确实希望控制台是正确的（一大堆黄色 0300-0600）。

所以，无论如何，似乎我可以将一堆结构拼凑在一起，但有没有人有一种简单的方法来定义这个“布尔与”条件到通知（仅限）时间表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:59:45.310

这就是预定的停机时间。如果您创建计划的停机时间窗口，警报将在此时间范围内被抑制。

如果这不是一个选项，那么您需要为此服务指定不同的联系人。1 通知 24x7 并且仅在 CRITICAL 上通知，而另一个通知 24x7（无 3-6），并且仅接收 WARNING 通知。让他们都指向同一个联系电子邮件地址。

# github - GitHub 原始文件 - Etag 算法

> ID：10904154
> 
> 赞同：6
> 
> 时间：2012-06-05T20:06:52.923
> 
> 标签：github, checksum, etag

有谁知道访问原始内容时如何生成 GitHub ETag？

据我所知，这不是 MD5、SHA1 或任何常见的 SHA 变体；

示例 http 标头：

```
HTTP/1.1 200 OK
Server: nginx/1.0.13
Date: Tue, 05 Jun 2012 19:46:08 GMT
Content-Type: text/html; charset=utf-8
Connection: keep-alive
Status: 200 OK
ETag: "aa1da178ae0a43e23ce49a6b8f474738" 
```

ETag 长度为 32 个字符，提示 MD5，但这与下载文件（使用 curl 下载）的 MD5 校验和不匹配。

我知道 ETags 应该被视为不透明的标识符。不过，很好奇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:15:00.677

我的猜测是他们正在使用股票 nginx etag 模块。

[https://github.com/mikewest/nginx-static-etags/blob/master/ngx_http_static_etags_module.c](https://github.com/mikewest/nginx-static-etags/blob/master/ngx_http_static_etags_module.c)

# xcode - UIImage View 动画一次可以工作......为什么？

> ID：10904156
> 
> 赞同：0
> 
> 时间：2012-06-05T20:07:00.507
> 
> 标签：xcode, animation, uiimageview, uiimage

我正在 Xcode 4.3.2 中开发游戏

在游戏中我需要经常调用这个函数来在屏幕上添加两个带有动画的图像，第一个图像从左边进入，第二个从右边进入，2 秒后消失：

```
-(void) PandaAnimation2 {
[pandablock3 removeFromSuperview];
[awesomeview removeFromSuperview];

//pandablock3 is a UIImageView
//awesomeview is a UIImageView
pandablock3.frame = CGRectMake(400, 101, 111, 208);
awesomeview.frame = CGRectMake(-400, 9, 230, 68);

[self addSubview:pandablock3];
[self addSubview:awesomeview];

[UIImageView beginAnimations:@"movein" context:NULL];
[UIImageView setAnimationBeginsFromCurrentState:YES];
[UIImageView setAnimationDelegate:self];
[UIImageView setAnimationCurve:UIViewAnimationCurveEaseIn];
[UIImageView setAnimationDuration:2.0];

pandablock3.frame = CGRectMake(208, 101, 111, 208);
awesomeview.frame = CGRectMake(11, 9, 230, 68);

[UIImageView commitAnimations];

[UIImageView beginAnimations:@"moveout" context:NULL];
[UIImageView setAnimationDelay:2.0];
[UIImageView setAnimationBeginsFromCurrentState:YES];
[UIImageView setAnimationDelegate:self];
[UIImageView setAnimationDuration:1.0];
[UIImageView setAnimationCurve:UIViewAnimationCurveEaseOut];

pandablock3.frame = CGRectMake(400, 101, 111, 208);
awesomeview.frame = CGRectMake(-400, 9, 230, 68);
[UIImageView commitAnimations]; 
```

}

效果很好，但只有一次！为什么？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:11:05.387

很难说不看是什么在调用您的代码，但我的猜测是在第一次调用后被释放`pandablock3` ，`awesomeview`因此`nil`在第二次调用中。

# windows-phone-7 - MSDN 库 - 如何知道方法可以抛出哪些异常？

> ID：10904159
> 
> 赞同：6
> 
> 时间：2012-06-05T20:07:14.483
> 
> 标签：windows-phone-7, msdn

我来自 Android 背景，在 Android 开发人员参考中查找方法时，信息通常包括该方法可以抛出哪些异常（以及该方法接受的参数及其返回类型）。我浏览了 MSDN 库中的一些类，但这里似乎并非如此。那么，在开发时，我如何确定一个方法可以抛出哪些异常（如果它抛出任何异常）？

一个具体的例子是可以抛出异常的`DataContext.SubmitChanges()`方法（[MSDN 链接](http://msdn.microsoft.com/en-us/library/bb292162.aspx)） 。`SqlCeException`除非在运行时意外遇到，否则似乎没有办法解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:17:16.563

.NET 在异常方面与 java 有点不同。没有`throws`语法，您必须声明可以从方法中抛出哪些类型的异常。每个方法都可能抛出任何类型的异常。这就是为什么 MSDN 文档并不总是包含这种数据的原因。

当您在 MSDN 页面上找不到可能的异常列表时，您可以在 stackoverflow（例如 for [`DataContext.SubmitChanges()`](https://stackoverflow.com/questions/2904317/exceptions-by-datacontext)）等网站上搜索/询问它，或者只是测试您的应用程序并尝试生成异常以检查它是什么类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:27:08.937

.net 中没有与 throws 关键字等效的东西，但您可以告诉用户您知道您的方法可能会在[doc-comments](http://msdn.microsoft.com/en-us/library/b2s063f7%28v=VS.80%29.aspx)中抛出哪些异常（C# 相当于 java doc）

# objective-c - 在drawRect中向UIView添加渐变

> ID：10904160
> 
> 赞同：1
> 
> 时间：2012-06-05T20:07:14.983
> 
> 标签：objective-c, ios, graphics, gradient

我想在我的drawRect中添加一个CAGradientLayer，代码如下：

```
- (void)drawRect:(CGRect)rect {

    CAGradientLayer *gradientOverlay = [CAGradientLayer layer];
    CGColorRef grayColor = [UIColor colorWithRed:37/255.f green:37/255.f 
                                            blue:37/255.f alpha:1.0].CGColor; 
    CGColorRef blueColor = [UIColor colorWithRed:23.0/255.0 green:171.0/255.0 
                                            blue:219.0/255.0 alpha:1.0].CGColor;
    gradientOverlay.colors = [NSArray arrayWithObjects:
                              (id) grayColor,
                              (id) grayColor,
                              (id) blueColor,
                              nil];
    gradientOverlay.locations = [NSArray arrayWithObjects:
                                 [NSNumber numberWithFloat:0],
                                 [NSNumber numberWithFloat:0.4],
                                 [NSNumber numberWithFloat:1],
                                 nil];

    CGPoint startPoint = CGPointMake(CGRectGetMinX(rect), CGRectGetMidY(rect));
    CGPoint endPoint = CGPointMake(CGRectGetMaxX(rect), CGRectGetMidY(rect));

    gradientOverlay.startPoint = startPoint;
    gradientOverlay.frame = self.bounds;
    gradientOverlay.endPoint = endPoint;

    self.layer.mask = gradientOverlay;

} 
```

知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:11:39.187

试试这个而不是覆盖drawRect怎么样？

```
+ (void) applyGradient:(NSArray *)cgColors toView:(UIView *)view {
    CAGradientLayer *gradient = [CAGradientLayer layer];
    gradient.frame = view.bounds;
    gradient.colors = cgColors;
    for(CALayer *layer in view.layer.sublayers) {
        if([layer isKindOfClass:[CAGradientLayer class]]) return;
    }
    [view.layer insertSublayer:gradient atIndex:0];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:15:05.500

添加你`CAGradientLayer`作为你的子层`self.layer`。
**注意**：如果您在`drawRect:`方法中执行此操作，请确保您不会在`CAGradientLayer`每次`drawRect:`调用时都添加新的。

**更新**（关于评论）：这是您所要求的代码：

```
 //Create a layer that holds your background image and add it as sublayer of your self.layer
    CALayer *layer = [CALayer layer];
    layer.frame = self.layer.frame;
    layer.contents = (id)[UIImage imageNamed:@"background.png"].CGImage;
    [self.layer addSublayer:layer];

//Create your CAGradientLayer
    CAGradientLayer *gradientOverlay = [CAGradientLayer layer];
    CGColorRef grayColor = [UIColor colorWithRed:37/255.f green:37/255.f 
                                            blue:37/255.f alpha:1.0].CGColor; 
    CGColorRef blueColor = [UIColor colorWithRed:23.0/255.0 green:171.0/255.0 
                                            blue:219.0/255.0 alpha:1.0].CGColor;
    gradientOverlay.colors = [NSArray arrayWithObjects:
                              (id) grayColor,
                              (id) grayColor,
                              (id) blueColor,
                              nil];
    gradientOverlay.locations = [NSArray arrayWithObjects:
                                 [NSNumber numberWithFloat:0],
                                 [NSNumber numberWithFloat:0.4],
                                 [NSNumber numberWithFloat:1],
                                 nil];

    CGPoint startPoint = CGPointMake(CGRectGetMinX(rect), CGRectGetMidY(rect));
    CGPoint endPoint = CGPointMake(CGRectGetMaxX(rect), CGRectGetMidY(rect));

    gradientOverlay.startPoint = startPoint;
    gradientOverlay.frame = self.layer.frame;
    gradientOverlay.endPoint = endPoint;
//set its opacity from 0 ~ 1
    gradientOverlay.opacity = 0.6f;
//add it as sublayer of self.layer (it will be over the layer with the background image
    [self.layer addSublayer:gradientOverlay]; 
```

**注意**：您不必在`drawRect:`方法中执行此操作。`init`例如，如果您需要更改某些视图/图层的几何形状，请在该方法中创建您的图层层次结构，从而覆盖该`layoutSubviews`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T20:21:47.877

通常，您应该只`drawRect:`在使用 CoreGraphics 绘制视图时覆盖。

`init`如果您在代码中创建此视图，或者`awakeFromNib`如果您将此视图放在 .xib 中，则放置代码的更好位置

# java - 模型更新时更新 JTree 中的 selectionPaths

> ID：10904170
> 
> 赞同：0
> 
> 时间：2012-06-05T20:07:39.953
> 
> 标签：java, swing, jtree

我有一个带有自定义对象和自定义模型的 JTree。在某个时候，我选择了一个节点，当这种情况发生时，我用新检索到的数据更新树。发生这种情况时，我会通过树查找选定的节点并将其替换为新节点（最新的）。当我找到它时，我从其父节点中删除旧节点，在其位置添加新节点并调用 nodeChanged(newNode)。树更新正常，新节点出现在那里，内容更新。

问题是当从这个树更新回来时，选择路径还没有更新，所以当我使用方法 getSelectionPaths() 时，返回路径（如果只选择一个节点）对应于我从树中删除的旧节点.

如何将选择路径更新为新的更新模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:11:00.430

您可以创建一个新的 TreePath 并使用新路径调用 setSelectedPath。但是，更好的是，与其删除节点，不如使其可变并更新节点。这样树模型不会改变，选择路径也不会改变。

您还需要触发适当的事件（节点更改，而不是删除/添加节点等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:35:37.577

如果您能够找到叶子的新路径，则可以创建一个[TreePath](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/TreePath.html)。

我举了一个例子，在 JTree 中选择一个具有一级节点的叶子：

```
public JTree             fileTree;
public void setJTreePath(String leafName, String nodeName) {

    TreeNode root = (TreeNode) fileTree.getModel().getRoot();
    TreePath path = new TreePath(root);
    int rootChildCount = root.getChildCount();
    mainLoop:
    for (int i = 0; i < rootChildCount; i++) {

        TreeNode child = root.getChildAt(i);
        if (child.toString().equals(nodeName)) {
            path = path.pathByAddingChild(child);
            int ChildCount = child.getChildCount();
            for (int j = 0; j < ChildCount; j++) {
                TreeNode child2 = child.getChildAt(j);
                if (child2.toString().equals(leafName)) {
                    path = path.pathByAddingChild(child2);
                    fileTree.setSelectionPath(path);

                    //I've used a SwingUtilities here, maybe it's not mandatory
                    SwingUtilities.invokeLater(
                            new Runnable() {
                                @Override
                                public void run() {
                                    fileTree.scrollPathToVisible(fileTree.getSelectionPath());
                                }
                            });
                    break mainLoop;
                }
            }
        }
    }
} 
```

# events - OpenLayers：OpenLayers.Event.triggerEvent中Event参数的值

> ID：10904171
> 
> 赞同：2
> 
> 时间：2012-06-05T20:07:41.020
> 
> 标签：events, google-maps, openlayers

我正在查看有关 在**OpenLayers** 中触发事件的[文档](http://dev.openlayers.org/releases/OpenLayers-2.11/doc/apidocs/files/OpenLayers/Events-js.html#OpenLayers.Events.triggerEvent)。它列出了一个参数和一个参数。我明白参数是什么，但对象是什么？我找不到一个明确的例子。**`triggerEvent``type:String``evt:Event``type``Event`**

 **如果相关，我正在研究**Google Maps v3**和**OpenLayers**之间的接口，并且我正在尝试想出一种方法，以便我可以使用相同的 API 接口来调用：

*   `google.maps.event.trigger(instance:Object, eventName:String, var_args:*)`
*   `openLayersObj.events.triggerEvent(type:String, evt:Event)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:02:09.470

医生错了。应该是`Event || object`。将作为参数传递给侦听器回调的对象。

看源码：  [https](https://github.com/openlayers/openlayers/blob/master/lib/OpenLayers/Events.js#L820) ://github.com/openlayers/openlayers/blob/master/lib/OpenLayers/Events.js#L820 使用示例：  [https ://github.com/openlayers/openlayers/blob/master/ lib/OpenLayers/Map.js#L1042](https://github.com/openlayers/openlayers/blob/master/lib/OpenLayers/Map.js#L1042)**

# asp.net-mvc-3 - 使用 ASP.NET 进行服务器端验证的 Ajax 登录

> ID：10904181
> 
> 赞同：0
> 
> 时间：2012-06-05T20:08:23.453
> 
> 标签：asp.net-mvc-3

我正在编写一个 ASP.NET 应用程序，它要求用户使用外部 API 登录到服务器。如果用户输入无效的登录凭据，我希望用户使用 Ajax 获得即时反馈。

我的观点

```
@using (Ajax.BeginForm("Login", "Login", null, new { id = "login-form" }))
        { 
            <label>
                User Name: @Html.TextBox("userName", "", new { @class = "input" })
            </label>
            <label>
                Password: @Html.Password("password", "", new { @class = "input" })
            </label>
            <input type="submit" class="button" value="Login" />
            <div id="login-validate">Invalid Login!</div>
        } 
```

我的控制器

```
 public ActionResult Login(string userName, string password)
    {
        // Returns true if connection is valid
        if (RepoConnection.verifyAndBindConn(userName, password))
        {
            return Index(); // Redirect to home page, logged in as new user
        }
        else
        {
            return null; // TODO: Don't change view
        }
    } 
```

有没有办法让控制器不切换视图，而是调用 jQuery 函数来显示错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:23:25.623

只需返回`View()`您的 else 块。它将重新显示登录页面。

```
 if (RepoConnection.verifyAndBindConn(userName, password))
    {
        return Index(); // Redirect to home page, logged in as new user
    }
    else
    {
        return View(); // TODO: Don't change view
    } 
```

如果您真的希望它是 ajaxy，您将不得不更改您的代码以不使用表单/提交按钮，而是通过 ajax 发送您的登录凭据，编写会话 cookie，并在 js 代码中处理重定向。

# wix - WiX CopyFile/目录路径在补丁期间不可用

> ID：10904185
> 
> 赞同：2
> 
> 时间：2012-06-05T20:08:41.837
> 
> 标签：wix, patch, file-copying

我有一个复制一些文件的 WiX 安装程序（比如 10.0）。文件副本的所有内容都可以正常工作。我正在尝试从该版本创建补丁。每当运行补丁 (10.1) 并且之前的 10.0 安装必须复制其中一些文件时，我在运行`repair:`

> “指定的路径[Path]不可用。”

我已经检查过了，指定的路径可用。复制到的文件在那里。此外，在 10.0 安装中从中复制文件的源数据目录也在那里。还有其他目录可以复制其他文件。我不确定他们是否也会有错误，而且我还没有看到它。

可能出了什么问题？

这是我的 .wxs 代码，在原始安装和补丁中都是相同的：

```
<DirectoryRef Id="SAVEDDBFOLDER">
  <Component Id="SavedDBVDirectory" Guid="xxx">
    <CreateFolder>
      <Permission User ="[WIX_ACCOUNT_ADMINISTRATORS]" GenericAll="yes"/>
      <Permission User ="[WIX_ACCOUNT_USERS]" GenericAll="yes"/>
    </CreateFolder>
  </Component>
</DirectoryRef>

<CustomAction Id="SetOldDBVWFiles"
              Property="OLDDBVWFILES"
              Value="[PATHTOOLDVER]Saved DB Files"/>
<DirectoryRef Id="SAVEDDBFOLDER">
  <Component Id="CopyOldDataBVFiles" Guid="yyy">
    <CopyFile Id="CopyOldDBVWFiles"
              Delete="yes"
              SourceProperty="OLDDBVWFILES" DestinationProperty="SAVEDDBFOLDER" SourceName="*"/>
    <Condition>
      <![CDATA[(NOT Installed) AND (NOT REMOVE) AND (PREVIOUSVERSION << "8." OR PREVIOUSVERSION << "7.")]]>
    </Condition>
  </Component>
</DirectoryRef>

        <!--This custom action runs in 10.0 install-->
<!--PREVIOUSHYVERSION is set for 10.0; it is not for 10.1-->
<CustomAction Id="SetOldDBVWFilesHy"
              Property="OLDHYDBVWFILES"
              Value="[PATHTOOLDAD]Saved DB Files"/>
<DirectoryRef Id="SAVEDDBFOLDER">
  <Component Id="CopyOldHyDatabusViewerFiles" Guid="zzz">
    <CopyFile Id="CopyOldHyDBVWFiles"
              Delete="yes"
              SourceProperty="OLDHYDBVWFILES" DestinationProperty="SAVEDDBFOLDER" SourceName="*"/>
    <Condition>
      <![CDATA[(NOT Installed) AND (NOT REMOVE) AND (PREVIOUSHYVERSION << "4.")]]>
    </Condition>
  </Component>
</DirectoryRef> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:41:43.503

好的，我想通了这一点。从日志文件（**msiexec /L*V "[ *log file* ]"**）中，我发现其中一个路径变量——“ **PATHTOOLDAD** ”，不，它不是爸爸工具的路径——没有在补丁中设置. 应该没关系，因为这个属性只在初始安装中使用，在补丁中根本没有，但它必须设置为某个值。我在对 msiexec 的调用中添加了选项“ **PATHTOOLDAD=[ *whatever* ]** ”来设置属性，瞧，它起作用了。

**msiexec /i [ *MSP 补丁文件*] PATHTOOLDAD=[*被删除的旧程序的路径*]**

# msbuild - 如何使用 msbuild 打包并使用持续集成在 TFS 2010 上运行测试

> ID：10904188
> 
> 赞同：3
> 
> 时间：2012-06-05T20:08:53.347
> 
> 标签：msbuild, azure, continuous-integration, mstest

我正在使用 TFS2010 和 MSBuild 将 Windows azure 云解决方案集成到 CI。

为了创建部署所需的 2 个文件，我在“MSBuild Arguments”中添加了 /t:Publish

这是我在 TFS 中用于构建包的配置：

![TFS 配置](../Images/12b4addcab7b6cf870f0e5d11af4d39d.png)

问题是：如果我删除所有参数，则测试构建正确，但没有构建 azure 包，如构建结果所示：

![用测试构建](../Images/1977ccc0a3cb95cf493fbb8ccf79dcdb.png)

如果我把参数放在那里，但测试没有运行：

![无需测试即可构建](../Images/0c01c297a55d201e4ca7b7bf0b548b33.png)

有没有办法两者兼得？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-11T09:52:54.777

我已经设法在我的 tfs 构建（TFS 2013）中解决了这个问题。我将我的 MSBuild 参数目标设置为**/t:Publish;Build**

基本上，在发布目标期间，未构建单元测试项目。“构建”目标构建单元测试项目并执行我的测试。**我还**注意到“发布”和“构建”的顺序很重要。在“发布”之前设置“构建”目标为我的构建引发了一些错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:36:32.120

我与 TFS 团队讨论了您的问题，我被告知到目前为止，TFS2010 尚未完全支持此功能，但此类功能已在他们的雷达范围内，并且可能成为未来 TFS 版本的一部分。

因为您使用的是 TFS 2010，所以这里有一些可以提供帮助的提示：

*   [使用 MSBuild 和 TFS 2010 构建和部署 Windows Azure 项目](http://blog.slalom.com/2011/08/19/building-and-deploying-windows-azure-projects-using-msbuild-and-tfs-2010/)
*   [操作方法：使用 DeployToAzure 从 TFS 构建部署到 Windows Azure](http://deploytoazure.codeplex.com/wikipage?title=How-To%3a%20Deploy%20to%20Windows%20Azure%20from%20TFS%20Build%20using%20DeployToAzure&version=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-16T10:08:57.033

这个问题在 TFS 2013 中仍然存在。我通过在解决方案中创建一个 Makefile 项目来解决它，并添加一个新的“Makefile”文件，其内容为

```
all:
    msbuild $(SolutionDir)AzureProject\AzureProject.ccproj /p:TargetProfile=Cloud /t:Publish /p:Configuration=$(Configuration) /p:PublishDir=$(OutDir) 
```

并在项目属性页设置构建命令行

```
nmake /E SolutionDir=$(SolutionDir) /E Configuration=$(Configuration) /E OutDir=$(OutDir) 
```

# perl - Perl hashref/属性混淆

> ID：10904190
> 
> 赞同：0
> 
> 时间：2012-06-05T20:09:05.140
> 
> 标签：perl, properties, hashref

忽略如果使用严格和警告可能不会发生这种情况的事实，我想知道为什么这两种情况不同。

```
#!/usr/local/perl5/bin/perl

$x[0] = "";
$y[0] = "";

$x[0]->{name} = "SRV";
$y[0]->{name} = "FINAL";
print "$x[0]->{name}, $y[0]->{name}\n";

$x[1]->{name} = "SRV";
$y[1]->{name} = "FINAL";
print "$x[1]->{name}, $y[1]->{name}\n"; 
```

输出是：

```
FINAL, FINAL
SRV, FINAL 
```

为什么当索引为零时，y[0]->{name} 赋值会影响 x[0]->{name}，但在索引为 1 时不会影响？

谢谢，

肖恩。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T20:43:28.800

那不是您实际运行的代码。在您提供的代码中，`$x[0]`and`$y[0]`是对不同哈希的引用，但在有问题的代码中，`$x[0]`and`$y[0]`是对相同哈希的引用。就像在下面的代码中一样：

```
my %hash = { name => "SRV" };
$x[0] = \%hash;           # $x[0] is a reference to %hash.
$y[0] = $x[0];            # $y[0] is a reference to %hash.
$y[0]->{name} = "FINAL";  # Changes $hash{name}.

print $x[0]->{name};      # Prints $hash{name}.
print $y[0]->{name};      # Prints $hash{name}. 
```

上面的问题可以通过修改来解决

```
$y[0] = $x[0]; 
```

至

```
$y[0] = { %{ $x[0] } }; 
```

或者

```
use Storable qw( dclone );
$y[0] = dclone( $x[0] ); 
```

# visual-c++ - CEdit::ModifyStyle()，当 es_number 在 CDialog::OnInitDialog 中设置时，dosallow 0

> ID：10904201
> 
> 赞同：0
> 
> 时间：2012-06-05T20:10:16.960
> 
> 标签：visual-c++

我有一个编辑控件，它应该只取 1 到 99 之间的整数。为此，我使用了 modifystyle() 和 limittext()。有没有办法限制输入 0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T23:47:43.187

这与您原始帖子中的问题完全不同。

确保您的旋转控件紧跟在 Z 顺序（制表顺序）中的编辑控件之后。在资源中设置微调器样式为：UDS_AUTOBUDDY UDS_SETBUDDYINT、UDS_ALIGNRIGHT、。这将导致微调器：选择编辑控件作为伙伴，在编辑框中设置整数，将自身放置在编辑控件的右边缘。

为此，在微调器集的属性中：“Auto Buddy”True、“Set Buddy Integer”True 和“Alingment”为右对齐。

您不必为编辑控件设置最小值和最大值，现在在 EN_CHANGE 通知的命令处理程序中处理它。

将此代码放在处理程序中。

```
void CYourDlg::OnEnChangeEditNum()
{
    int iValue = GetDlgItemInt(IDC_EDIT1);
    if(iValue < 1 || iValue > 99)
    {
        m_Edit.ShowBalloonTip(_T("Number Out of Range"), _T("Value must fall between 1 and 99."), TTI_INFO_LARGE);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:48:34.447

如果您绝对需要，则必须从中派生一个类`CEdit`并相应地处理输入。渲染“不可接受的字符”的气球可能有点棘手，无法给出*online-error*。仅当您计划在多个位置使用此类（编辑控制）时，该类才有用，最好具有不同的范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T23:19:46.123

您不必使用代码控制值限制它。如果您使用向导子类化（添加变量）编辑控件会更容易，您可以在此处选择 UINT 类型并设置最小值和最大值。也不要忘记将样式设置为 ES_NUMBER（在编辑控件属性中将 Number 设置为 True）。

# sql - Sql 列没有值

> ID：10904204
> 
> 赞同：-1
> 
> 时间：2012-06-05T20:10:34.897
> 
> 标签：sql, alter-table

我有一个 sql 表，我正在尝试将另一个表中的列添加到其中。仅当我执行 alter table 查询时，它不会将值从表中拉出以匹配我尝试建立连接的列。

例如，我有表 1 中的 A 列和表 2 中的 A 列，它们应该是重合的。ColumnATable1 是标识号，ColumnATable2 是描述。

我试过这个，但有一个错误......

```
alter table dbo.CommittedTbl
add V_VendorName nvarchar(200)
where v_venkey = v_vendorno 
```

它告诉我我的语法不正确......有人知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:14:16.123

```
alter table dbo.CommittedTbl
add V_VendorName nvarchar(200);

go

update c
set c.V_VendorName = a.V_VendorName
from CommittedTbl c
join TableA a
on c.v_venkey = a.v_vendorno;

go 
```

我只是在这里猜测你的结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:14:16.490

```
alter table 2 add column A <some_type>;
update table2 set column A = (select column_A from table2 where v_venkey = v_vendorno); 
```

您的表和列名称有点令人困惑，但我认为应该这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T20:15:49.287

ALTER TABLE 语句没有 WHERE 子句。您将需要添加列（前两行），然后根据您在两个表之间定义的关系插入行。

ALTER TABLE 语法：http: [//msdn.microsoft.com/en-us/library/ms190273%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms190273%28v=sql.90%29.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T20:27:21.207

SQL中有几种语言：

DDL：数据定义语言 - 这定义了架构（表、列、数据类型的结构） - 向表中添加列会影响表定义，并且所有行都将具有该新列（不仅仅是根据标准的某些行）

DML：数据操作语言 - 这会影响表中的数据，插入、更新或其他更改属于此范围，您可以根据标准更新一些数据（这就是`WHERE`子句的来源）

`ALTER`是 DDL 语句，while`INSERT`和`UPDATE`是 DML 语句。

两者不能像您那样真正混合。

您应该`ALTER`在您的表中添加列，然后`INSERT`或`UPDATE`在该列中包含适当的数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T20:14:33.980

您是否可能想要一个 JOIN 查询？如果要连接两个表或两个表的一部分，则应使用 JOIN。

如果您需要了解更多信息，请先查看此[链接](http://www.w3schools.com/sql/sql_join.asp)

希望有帮助！

# histogram - 如何使用 weka 计算直方图

> ID：10904205
> 
> 赞同：1
> 
> 时间：2012-06-05T20:10:45.293
> 
> 标签：histogram, weka, clique

给定一个分布在 6 个维度上的 23 个点的数据集，在本练习的第一部分中，我们应该执行以下操作，而我被困在后半部分：

*   计算 CLIQUE 算法的第一步（检测所有密集单元）。在域 0..100 中每个维度使用三个相等的间隔，如果一个单元格包含至少五个对象，则认为它是密集的。

现在这是微不足道的，只是一个计数的问题。下一部分询问以下内容：

*   确定一种仅使用 Preprocess、Classify、Cluster 或 Associate 选项卡中提供的 Weka 功能来计算上述 CLIQUE 结果的方法。 *提示：只需要两个选项卡。*

我已经尝试了一个多小时，但我似乎无法在这里找到解决方案。如果有人有提示，或者可能是有用的教程，可以让我对 weka 有更多的了解，我们将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:52:54.103

我假设您有 23 个实例（行）和 6 个属性（维度）

> 每个维度使用三个相等的间隔

使用预处理选项卡将您的数据离散化为 3 个相等的 bin。请参阅图像或命令行。您使用 3 个箱子作为间隔。您可以选择将 useEqualFrequency 更改为 false 和 true 并重试。我认为 true 可能会给出更好的结果。

weka.filters.unsupervised.attribute.Discretize -B 3 -M -1.0 -R first-last

![无监督的.attribute.Discretize](../Images/bd657fd0ba353da13cd30deb61332093.png)

之后对您的数据进行聚类。这将向您展示附近的实例。因为你想找到密集的细胞。我认为 SOM 可能是合适的。

> 如果它包含至少五个对象，则该单元格与它一样密集。

您有 23 个实例。因此尝试 2x2=4 聚类中心，然后选择 2x3=6,2x4=8 和 3x3=9。如果您的数据点在附近。无论您选择多少个集群中心，一些集群中心应该始终拥有 5 个实例。

# javascript - Three.JS - Firefox 中的滚动问题

> ID：10904217
> 
> 赞同：0
> 
> 时间：2012-06-05T20:11:42.750
> 
> 标签：javascript, html, 3d, three.js

我不确定是否有其他人对three.js 有此问题。我有一个立方体的[简单演示](http://cmg0030.zxq.net/acclDemo2)，它将以不同的旋转速度（箭头键、鼠标或触摸输入）旋转。在 Chrome 浏览器中，一切似乎都运行良好。在工作中，我跳上了 iMac，纹理似乎正在拼接，并没有在 Safari 中正确映射到我的几何图形。

我移到 Mac 上的 Firefox 浏览器，一切正常，帧速率也不错。似乎由于某种原因，当立方体以特定角度旋转时，渲染器会跳跃并且屏幕上的 hud 向上移动，您无法在顶部看到标题，并且统计小部件从屏幕底部向上移动。我的立方体的 y 位置似乎也同时跳了起来。在某些移动浏览器上，我似乎在 android 中遇到了同样的问题。我想知道是否有人在 Firefox（在 Mac 上？）或移动浏览器中遇到过类似的问题，渲染突然跳跃、移动屏幕上的 hud 等

编辑：我已经找到了问题所在。我仍然没有理想的解决方案。我创建了我的演示副本并尝试注释掉我的键盘处理代码，令我惊讶的是问题仍然存在。显然，Firefox 正在稍微上下滚动窗口，并且[THREEx 库](https://github.com/jeromeetienne/threex)中包含的键盘处理程序不会禁用 Firefox 中向上和向下箭头键的默认行为。在 chrome 中没有滚动窗口的空间，我只是让我的渲染器与窗口大小相同。我不明白为什么 Firefox 滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T08:29:52.090

在您的示例中，我在 Mac 中的 Firefox 上试验了相同的问题。

渲染的跳跃是由于垃圾收集器（在 Firefox 上实现不佳）。您正在为每个“动画”功能分配内存。

不要为旋转创建新的 Vector3/Matrix4，而是使用全局变量，因此您只需创建一次这些对象。

此外，您应该使用 KeyboardListener，而不是使用 KeyboardState 并在每次动画调用时执行那些“状态”函数，它会在某些事情发生变化时（而不是一直）执行您的代码。

你应该看看这个例子： http: [//mrdoob.github.com/three.js/examples/canvas_geometry_cube.html](http://mrdoob.github.com/three.js/examples/canvas_geometry_cube.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:34:40.283

问题是，由于某种原因，在 Firefox（不是 Chrome）中，即使渲染器设置为窗口大小，仍有滚动空间，因此 Firefox 在使用箭头键时正在滚动。为了解决这个问题，我在[THREEx.KeyboardState.js](https://github.com/jeromeetienne/threex/blob/master/THREEx.KeyboardState.js)中编辑了两个函数，添加了 preventDefault() 以防止箭头键滚动。

以下是所需的编辑：

```
this._onKeyDown = function(event){
    event.preventDefault();
    self._onKeyChange(event, true); 
};
this._onKeyUp   = function(event){ 
    event.preventDefault();
    self._onKeyChange(event, false);
}; 
```

# mysql - MySQL对分组数据进行排序

> ID：10904218
> 
> 赞同：1
> 
> 时间：2012-06-05T20:11:43.097
> 
> 标签：mysql

我试图编写一个收件箱，按收到的顺序显示消息，然后按是否已阅读，它似乎工作了一段时间，但不是没有。它可能只在某些情况下有效，也许..

无论如何，这是我的查询；

```
SELECT `id`, `from_userid`, `read`, max(sent) AS sent 
FROM (`who_messages`) 
WHERE `to_userid` = '41' 
GROUP BY `from_userid` 
ORDER BY `read` ASC, `sent` DESC 
```

我认为问题在于消息按错误的顺序分组。当存在新消息时，收件箱始终显示为已读。我得到了新消息的正确时间，但我猜这是因为我选择了 max(sent)。

我的逻辑错了吗？或者我可以排序然后分组，因为我所有的努力都导致“每个派生表都必须有自己的别名”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T20:54:57.057

设置一个 SQL Fiddle - 这是我想出的最好的。基本上我先在子查询中进行排序，然后再对它们进行分组。这似乎适用于我输入的（有限的）测试数据。

```
SELECT *
FROM (SELECT id, from_userid, is_read, sent
      FROM who_messages 
      WHERE to_userid = 41
      ORDER BY from_userid ASC, is_read ASC) m 
GROUP BY m.from_userid
ORDER BY m.is_read ASC, m.sent DESC 
```

看小提琴玩：[http ://sqlfiddle.com/#!2/4f63d/8](http://sqlfiddle.com/#!2/4f63d/8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T20:32:06.357

您正在分组查询中选择非分组字段。不保证返回该组的哪条记录，`ORDER BY`处理后处理`GROUP BY`。

试试这个：

```
SELECT  m.*
FROM    (
        SELECT  DISTINCT from_userid
        FROM    who_messages
        WHERE   to_userid = 41
        ) md
JOIN    who_messages m
ON      m.id = 
        (
        SELECT  mi.id
        FROM    who_message mi
        WHERE   (mi.to_userid, mi.from_userid) = (41, md.from_userid)
        ORDER BY
                mi.sent DESC, mi.id DESC
        LIMIT 1
        ) 
```

为此创建一个索引以`who_message (to_userid, from_userid, sent, id)`使其快速工作。

**更新**

上述查询将返回来自任何给定用户的最后一条消息的记录（包括其读取状态）。如果您想检查您是否有来自用户的任何未读消息，请使用以下命令：

```
SELECT  m.*, md.all_read
FROM    (
        SELECT  from_userid, MIN(read) AS all_read
        FROM    who_messages
        WHERE   to_userid = 41
        GROUP BY
                from_userid
        ) md
JOIN    who_messages m
ON      m.id = 
        (
        SELECT  mi.id
        FROM    who_message mi
        WHERE   (mi.to_userid, mi.from_userid) = (41, md.from_userid)
        ORDER BY
                mi.sent DESC, mi.id DESC
        LIMIT 1
        ) 
```

为此，请在`who_message (to_userid, from_userid, read)`（除了先前的索引之外）创建一个索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T09:41:20.650

正如 Quassnoi 所说，您正在使用 GROUP BY 查询并在“读取”上排序，这不是[聚合函数](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html)。因此，您无法确定 MySQL 引擎使用的值（通常是组中的最后一个，但是......）

我建议以这种方式编写您的查询，因为它不涉及任何子查询并且具有许多其他性能友好的用法：

```
SELECT
    from_userid,
    COUNT(*) AS nb_messages,
    SUM(NOT is_read) AS nb_unread_messages,
    MAX(sent) AS last_sent
FROM who_messages
WHERE to_userid = 41
GROUP BY from_userid
ORDER BY nb_unread_messages DESC, last_sent DESC; 
```

（我使用了 Andy Jones 的小提琴模式：[http](http://sqlfiddle.com/#!2/4f63d/8) ://sqlfiddle.com/#!2/4f63d/8 。
顺便说一句，非常感谢 Andy，这个网站很棒！）

希望这有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T20:42:23.400

“收件箱按收到的顺序显示消息，然后按它们是否已被阅读......但是它应该是最新消息” - 假设 read 是一个可以为空的日期/时间列，并且消息存储在它们被发送的顺序（新的 id 比旧的大 - autoid）

```
SELECT wm.id, wm.from_userid, (wm.read IS NULL) as unread, wm.sent
FROM (SELECT MAX(id) AS id FROM who_messages WHERE to_userid = '41' GROUP BY from_userid) sub
INNER JOIN who_messages wm ON sub.id = wm.id
ORDER BY wm.sent DESC, wm.read 
```

# c++ - 使用 vim 检测 C++ 标准头文件的文件类型

> ID：10904222
> 
> 赞同：5
> 
> 时间：2012-06-05T20:12:02.810
> 
> 标签：c++, linux, vim, file-type

C++ 的标准头文件通常安装在 /usr/include/c++/4.x（在 Linux 中）。由于大多数头文件没有任何扩展名（.h、.hpp 等），vim 无法将这些文件的格式识别为 C++。

我在 SO 中看到了另一个[问题](https://stackoverflow.com/questions/10584580/can-i-make-vim-do-syntax-highlighting-on-c-headers-that-dont-have-extensions)，但是那里发布的解决方案并不能解决我的问题。一种解决方案涉及使用`modeline`但标准 C++ 标头不包含 vim 友好的签名。相反，它们在第一行中包含以下内容：

```
// <algorithm> -*- C++ -*- 
```

我想我可以搜索该模式 ( `-*- C++ -*-`) 以检测文件类型。前面提到的 SO 问题中发布的另一个解决方案实际上是朝着这个方向发展的。答案建议使用：

```
au BufRead * if search('MagicPattern', 'nw') | setlocal ft=cpp | endif 
```

所以我试图做：

```
au BufRead * if search('-*- C++ -*-', 'nw') | setlocal ft=cpp | endif 
```

但它不起作用（即未检测到文件类型）。

是否可以使用该方法检测文件类型？它是否存在任何插件或任何其他方式来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T20:38:21.350

`*`在 Vim 搜索中通常是特殊的。要禁用它，`\M`请在搜索字符串的开头使用，即

```
au BufRead * if search('\M-*- C++ -*-', 'nw') | setlocal ft=cpp | endif 
```

这实际上对我有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T20:43:42.590

nm 的答案可以解决问题，但这更好：

```
au BufRead * if search('\M-*- C++ -*-', 'n', 1) | setlocal ft=cpp | endif 
```

的额外参数`search`是*stopline*，并确保此规则仅适用于具有第**1**行中的模式的文件。

这很重要，因为如果没有停止线，任何包含该模式的文件，*包括您的 vimrc*，都将满足匹配并可能使用错误的语法规则突出显示。

此外，使用停止线`w`标志是不必要的。

查看`:help search`更多信息。

# android - Android 中的 HTTP 客户端 API 级别 11 或更高级别

> ID：10904225
> 
> 赞同：0
> 
> 时间：2012-06-05T20:12:06.827
> 
> 标签：android

我有 Jersey 实现的 Restful Web Service。我通过 HTTP 客户端从 Android 连接以获取数据。它在 API 级别 10 和更早的版本中运行良好，但在 API 级别 11 或更高版本中无法正常工作。我很感激任何帮助。我在这些版本中有一个 nullPointerException。

```
public String getBaseURI(String str) {
        String result = "";
        try {
            HttpParams httpParameters = new BasicHttpParams();
            int timeoutConnection = 3000;
            HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
            int timeoutSocket = 5000;
            HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
            DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
            HttpGet getRequest = new HttpGet(ServerAddress + str);
            getRequest.addHeader("accept", "application/json");
            HttpResponse response = httpClient.execute(getRequest);
            result = getResult(response).toString();
            httpClient.getConnectionManager().shutdown();
        } catch (Exception e) {
            System.out.println(e.getMessage());
        } 
        return result;
    }

private StringBuilder getResult(HttpResponse response) throws IllegalStateException, IOException {
        if (response.getStatusLine().getStatusCode() != 201) 
            throw new RuntimeException("Failed : HTTP error code : " + response.getStatusLine().getStatusCode());
        StringBuilder result = new StringBuilder();
        BufferedReader br = new BufferedReader(new InputStreamReader((response.getEntity().getContent())), 1024);
        String output;
        while ((output = br.readLine()) != null) 
            result.append(output);
        return result;      
    } 
```

标签： Android运行时

logcat 异常：

```
Exception: FATAL EXCEPTION: main
java.lang.NullPointerException
at com.android.internal.os.LoggingPrintStream.Prrintln(LogiingPrintStream.java.298)
at Client.getBaseURI (Client.java:66) 
```

当我调用休息服务时，例如： String str = client.getBaseURI("task/project/get/" + user);
我得到**错误。**

```
private void listViewSet() {

        ListView lv = (ListView) this.findViewById(R.id.listView);
        lv.setAdapter(new MultiAdapter(this));

        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {

                switch (pos) {
            case ADD:
            String str = client.getBaseURI("task/project/get/" + user);// Json format
                        ......
                }
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:56:25.827

您是否在单独的线程上执行 HTTP 请求（`AsyncTask`例如，使用 ）？

一些较新的 API（尤其是 ICS，根据我的经验）强制要求您在单独的线程上执行网络连接，以免阻塞 UI 线程。网络连接可能很长而且很昂贵，因此您*永远*不想在 UI 线程上执行它们。这样做可能会阻止 UI 被绘制到屏幕上，导致您的应用程序强制关闭，使您的应用程序对用户显得迟钝等等。

# jquery - 如何在局部视图中使用 MVC 模型视图属性设置敲除属性

> ID：10904228
> 
> 赞同：0
> 
> 时间：2012-06-05T20:12:13.253
> 
> 标签：jquery, asp.net-mvc, knockout.js

我有下一个场景：

我正在使用淘汰赛（2.1.0 版）和 ASP MVC.NET，所以在一个特定的点上，我的控制器调用了一个新视图。此视图在下一次调用时呈现局部视图：

```
<div id="productSeriesNonSocks">
    @{
    Html.RenderPartial("~/Views/SalesOrderManagement/GetAvailableProductSeriesNonSocks.cshtml", Model);
     }
</div> 
```

控制器使用带有一些属性的 viewModel (Model) 调用视图，因此上述调用将整个模型发送到局部视图。

在局部视图中，我可以使用如下简单语句访问模型属性：

```
Available season type: @Model.SeasonType 
```

问题从这里开始......局部视图有它自己的淘汰模型：

```
<script type="text/javascript">
$(function () {
    //activates KO
    ko.applyBindings(productSeriesNonSocksModel);
    GetDataFromModels();
});

var productSeriesNonSocksModel = {
    AvailableProductSeriesNonSocks: ko.observableArray([]),
    selectedProdSeries: ko.observable(),
    seasonType: ko.observable()
};

function GetDataFromModels() {
    $.get('/SalesOrderManagement/GetAvailableProductSeriesNonSocks', { seasonType: this.seasonType() }, function (data) {
        productSeriesNonSocksModel.AvailableProductSeriesNonSocks(data.AvailableProductSeriesNonSocks);
    });
}

</script> 
```

GetDataFromModels() 函数应调用控制器中的方法，以 seasonType 作为参数，以便检索正确的数组并将其放在 AvailableProductSeriesNonSocks 数组中。这里的问题是我不知道如何将值从属性模型（在本例中为 @Model.SeasonType）传递给淘汰模型以调用控制器中的函数（productSeriesNonSocksModel.seasonType）。

我试图通过以下方式传递值：

```
seasonType: ko.observable(@Model.SeasonType) 
```

或者

```
seasonType: @Model.SeasonType 
```

但它不起作用。任何想法将模型属性值传递给敲除属性值以便使用 $.get(...) 进行调用？

澄清一下，我不能只问值，因为该值（SeasonType）是用户在前一个视图中选择的。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:52:44.553

您可以在脚本标签中使用剃刀。

```
<script type="text/javascript">
    var seasonType = @Model.SeasonType;
    // do something with season type
</script> 
```

避免额外的请求也可能是有意义的。您可以将“/SalesOrderManagement/GetAvailableProductSeriesNonSocks”中的数据放入模型或 ViewBag 中，并将其呈现为 JavaScript 对象。

# css - 格式化我的 CSS 下拉菜单

> ID：10904229
> 
> 赞同：0
> 
> 时间：2012-06-05T20:12:19.790
> 
> 标签：css, drop-down-menu, menu

我喜欢[这个](http://www.zkoss.org/product/zkstudio/demo)菜单的外观

我无法弄清楚如何在每个下拉元素下方获得一条线，而不会一直延伸到边缘并看起来像表格布局。我在想填充需要添加到某个地方，但我不知道在哪里。

[这](http://cssdesk.com/V7sKE)就是我到目前为止所拥有的。

这个问题的第二部分是我需要引入什么代码来向这个菜单添加第三级？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:19:41.117

删除border-bottom`#centeredmenu ul ul li`

将其放入`#centeredmenu ul ul li a`并添加一些`margin-left`and `margin-right`;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:26:33.400

移动左右边框 from `#centeredmenu ul ul li a`to`#centeredmenu ul ul li`移动下边框 from `#centeredmenu ul ul li`to`#centeredmenu ul ul li a`

添加边距`#centeredmenu ul ul li a`，然后添加底部边框`#centeredmenu ul ul`以填充最后一项的空白。

[我在这里更新了你的例子](http://cssdesk.com/ksf9J)

# objective-c - 如何使用 CALayer 在 UIButton 中自定义绘制

> ID：10904230
> 
> 赞同：0
> 
> 时间：2012-06-05T20:12:20.793
> 
> 标签：objective-c, ios5, uibutton, core-graphics

我正在尝试使用 Quartz 绘制一个精美的 UIButton。我已经像这样声明了我自己的按钮类：

```
@interface MyButton : UIButton
@end 
```

在 .m 文件中，我正在构建按钮：

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        // Initialization code
        CALayer *buttonLayer = self.layer;
        buttonLayer.masksToBounds = YES;

        CALayer *customDrawn = [CALayer layer];
        customDrawn.delegate = self;
        customDrawn.masksToBounds = YES;
        [buttonLayer insertSublayer:customDrawn atIndex:0];
        [customDrawn setNeedsDisplay];
    }
    return self;
} 
```

但这会导致某种递归并最终以`EXC_BAD_ACCESS`.

我已经实现了一个方法`drawLayer: inContext:`，但它仍然崩溃。我可以避免崩溃的唯一方法是删除委托分配，但是我不能做任何我想要实现的自定义绘图。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:34:17.840

正如 Kurt Revis 提到的问题中所述，UIView（例如 UIButton）不能用作子层的委托。（它已经是 UIView 的“主”层的委托，不能用作另一层的委托。）解决方案是使用另一个对象作为委托，该对象可以是刚刚用于的“私有”类实现`drawLayer: inContext:`方法。

# android - android - 如何使文本视图滚动？

> ID：10904234
> 
> 赞同：2
> 
> 时间：2012-06-05T20:13:03.967
> 
> 标签：android

实际上，我在 textview 中显示了一些数据，但它的一半数据超出了屏幕，所以我需要帮助来使 textview 滚动或任何其他可以向下滚动屏幕的东西。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-05T20:14:56.390

将您的 TextView 放在 XML 中的 ScrollView 中，例如：

```
 <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <TextView
            android:id="@+id/txt2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="txt2"/>

    </ScrollView> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-16T08:46:27.830

看到[这个](https://stackoverflow.com/questions/1748977/making-textview-scrollable-in-android)

```
 TextView textview= (TextView) findViewById(R.id.your_textview_id);
   textview.setMovementMethod(new ScrollingMovementMethod()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T20:26:52.373

只需这样使用它：

```
<scrollview

(your code)

/> 
```

# c - 是否可以检查变量是否为结构类型？

> ID：10904236
> 
> 赞同：4
> 
> 时间：2012-06-05T20:13:11.837
> 
> 标签：c

假设我有以下结构：

```
struct A{
    int a;
} a;

struct B{
    A a;
    int b;
} b; 
```

如何检查是否`b`属于类型`B`或是否`b`属于类型`A`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-05T20:16:21.217

你的意思是在运行时，给定一个`void *`指向一个或另一个的？不幸的是，这是不可能的；C 没有任何类型的运行时类型信息机制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T20:57:29.190

在编译时：

```
#define WARN_IF_DIFFERENT_STRUCT_TYPE_1(T, o) do { \
    T temp = (o);                                  \
    (void) temp;                                   \
} while (0) 
```

例子：

```
struct B b;
/* will warn if b is not of struct A type */
WARN_IF_DIFFERENT_STRUCT_TYPE_1(struct A, b); 
```

使用`typeof`GNU 扩展将两个对象作为宏参数传递：

```
#define WARN_IF_DIFFERENT_STRUCT_TYPE_2(o1, o2) do { \
    typeof(o1) temp = (o2);                          \
    (void) temp;                                     \
} while (0) 
```

例子：

```
struct A a;
struct B b;
/* will warn if a and b are not the same struct type */
WARN_IF_DIFFERENT_STRUCT_TYPE_2(a, b); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T20:18:30.850

不，就 C 而言，数据只是一串位。如何使用和解释数据取决于程序员。

这就像 a`char`可以表示一个字符、一个正数或一个负数（或其他任何东西）。这取决于上下文以及程序员如何使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T20:20:37.110

不。与在运行时使用[vtable](http://en.wikipedia.org/wiki/Virtual_method_table)维护类型关联的 C++ 不同，C 不提供运行时类型检查的方法。

一种可能的解决方法是将类型标识符分配为结构的第一个元素：

```
struct A {
    int type;
    int a;
} a; a.type = 'A';

struct B {
    int type;
    A a;
    int b;
} b; b.type = 'B';

// Now, given a (void*) pointer `ptr`, of either `A` or `B`...
if ( *(int*)ptr == 'A')
{
    // ...
}
elseif ( *(int*)ptr == 'B')
{
    // ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T04:50:56.267

如果您要编写自己的类型检查机制，我建议您编写宏来为您填写类型字段。

```
typedef struct A {
   void *type;
   int a; 
} A; 
```

这个宏使用字符串化初始化每个结构的类型信息：

```
 #define InitializeType(ptr, type) \
      ((ptr)->type == (void *)(#type ## __FILE__ ##))
 #define IsType(ptr, type)      \
      ((ptr)!=NULL && (ptr)->type != (void *)(#type ## __FILE__ ##)) 
```

它使用包含结构名称及其所在文件的字符串填充类型字段。您可以在多个源文件中拥有两个同名的结构，但是您不能在其中拥有两个同名的结构相同的源文件，因此包含初始化类型的源文件的名称的原因。然后您可以像这样使用它们：

```
 A alpha;
 InitializeType(&alpha, A);
 IsType(&alpha, A); 
```

不过有几个注意事项；您必须使用字符串池编译器标志，您必须将结构封装在“类”中，以便类型检查和初始化本地化到包含私有结构的源文件，并且您必须将 void *type 作为第一个参数每个结构。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-05T20:19:53.430

你能破解它吗？如果真的有必要并且你只有几个结构。

```
struct A{
    int a;
    int identifer = 0;
} a;

struct B{
    A a;
    int b;
    int identifer = 1;
} b; 
```

如果你的代码你可以像

```
if object->identifer == 0 
     bla bla bla 
```

# c# - 使用 RSS 提要的桌面应用程序

> ID：10904241
> 
> 赞同：-5
> 
> 时间：2012-06-05T20:13:20.650
> 
> 标签：c#, rss, feed

我需要开发一个桌面应用程序来显示从其他网站获取的 RSS 提要的内容。我以前从未使用过 RSS 提要。如何才能做到这一点？我可以使用 C# 开发桌面应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:22:27.267

RSS 提要只是 XML。谷歌 RSS 规范。在 C# 中，您可以执行以下操作：

```
XmlReader rdr;
Stream strm;
try
{
    WebClient client = new WebClient();
    strm = client.OpenRead(uri);
    rdr = XmlReader.Create(strm);
    while (!rdr.EOF) {
        // Do something
    }
} 
```

# php - 按日期排序sql

> ID：10904242
> 
> 赞同：0
> 
> 时间：2012-06-05T20:13:29.527
> 
> 标签：php, mysql

我试图按日期订购表格，但收到此错误。

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`user_name`在第 1 行的 'WHERE = 'felipe' LIMIT 0, 5'附近使用正确的语法

如果我删除 ORDER BY`file_time`它可以正常工作..

有任何想法吗 ？

```
mysql_query("SELECT * FROM files ORDER BY `file_time` WHERE `user_name` = '{$_SESSION['username']}' LIMIT $start, $per_page") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:15:45.080

```
mysql_query("SELECT * FROM files WHERE `user_name` = '{$_SESSION['username']}' ORDER BY `file_time` LIMIT $start, $per_page") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T20:15:04.300

您的查询顺序是混合的：

```
mysql_query("SELECT * FROM files ORDER BY `file_time` WHERE `user_name` = '{$_SESSION['username']}' LIMIT $start, $per_page") 
```

应该

```
mysql_query("SELECT * FROM files  WHERE `user_name` = '{$_SESSION['username']}' ORDER BY `file_time` LIMIT $start, $per_page") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T20:16:24.073

我相信您的问题是您对 ORDER BY 的定位。尝试这个：

```
SELECT * FROM files WHERE `user_name` = '{$_SESSION['username']}' ORDER BY `file_time` LIMIT $start, $per_page 
```

# html - 是什么导致这个选择框显示在 6px 高度？

> ID：10904243
> 
> 赞同：0
> 
> 时间：2012-06-05T20:13:34.800
> 
> 标签：html, css, height

我有以下最简单的代码示例：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title></title>
    <style>
      input, select { height: 16px; padding: 3px; width: 14em; }
    </style>
  </head>
  <body>
    <form action="a" method="post" enctype="application/x-www-form-urlencoded">
      <input type="text" value="Hello" />
      <select id="country" name="country">
    <option value="-1">Select ... </option>
    <option value="217">United States</option>
      </select>
    </form>
  </body>
</html> 
```

这段代码应该输出一个简单的选择框，高 16px，宽 14em。Firebug 的“样式”选项卡显示`height: 16px;`. 单击“Computed”选项卡会显示一个 6px 的盒子模型高度。Chrome 的 Inspector 显示 Style `height: 16px;`，但“Metrics”显示高度为 8px。“Computed Styles”显示高度为 16px。

谁能告诉我为什么将高度专门设置为 16px 会导致 Firefox（Linux，12.0）*和*Chrome（Windows，19 和 Linux，21）出现意外操作？

**编辑**：错过了粘贴中的输入框。它“正确”显示在 16px 高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:22:03.310

好的，所以每个 Web 浏览器都会以不同的方式解释选择样式。Firefox 将 16px 的高度作为带有填充的总高度，它使

16px(height) - 2*3px(padding) = 10px 的高度

此外，Safari 也将边框作为高度的一部分，它使

16px(height) - 2*3px(padding) - 2*1px(border) = 8px of height

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:18:12.193

浏览器包含所谓的“用户代理样式表”，它可以覆盖您设置的某些 CSS。这就是为什么`<select>`框看起来与文本字段不同的原因。

浏览器设置的一件事是`<select>`框使用“边框框”大小，而不是“内容框”。所以高度`<select>`是内容、内边距和边框的高度——而不仅仅是内容的高度。

您可以覆盖用户代理样式表：

```
-moz-appearance: none;
-webkit-appearance: none;
-moz-box-sizing: content-box;
-webkit-box-sizing: content-box; 
```

会给你一个`<select>`正是你要求的高度（但没有镀铬）。

小提琴示例：http: [//jsfiddle.net/Zw6hY/2/](http://jsfiddle.net/Zw6hY/2/)

# jquery - jQuery使用动画翻译文本字符串？

> ID：10904250
> 
> 赞同：0
> 
> 时间：2012-06-05T20:14:18.777
> 
> 标签：jquery, animation, jquery-animate

我有一些文本，我已经有 15 种语言的翻译，我在想这是否可能，但我想基本上我有一个按钮，当你点击它时，它会为字符串设置动画一个字母一个字母地翻译，所以我们从 Hello 开始，你点击它会转到 Bonjour 并会为这个过渡设置动画。

这甚至可以使用 jQuery 动画吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:19:00.267

编辑：刚刚注意到您的帖子>>*它会为逐字母翻译的字符串设置动画*<<

我不确定如何将哪个字母映射到哪个字母。**例如：**你好 -> Bonjour - 你将如何映射字母 H。另外想象一下翻译整个页面需要多长时间..

我建议`fadeOut / fadeIn`在**整个文本**上使用简单的动画，这对用户也更好。见下文，

**标记：**

```
<div id="test">Hello</div>
<button>Translate</button> 
```

**JS：**

```
$('button').click (function () {
    $('#test').fadeOut(500, function () {
       $(this).html('Bonjour').fadeIn(300);
    });
}); 
```

[**演示**](http://jsfiddle.net/9dq3U/1/)

**编辑：**下面的代码是渐变褪色的粗略版本。动画顺序如下，

1.  将内容的不透明度设置为从 1 到 0 的动画。
2.  显示叠加层并将叠加层的宽度从 10 增加到内容的宽度以提供快门效果。叠加层的背景是渐变透明的，因此会产生渐变效果。
3.  将翻译后的消息更新为内容，并将内容的不透明度从 0 设置为 1。
4.  将覆盖宽度从内容的宽度设置为 0 并隐藏。

**效果仍然不优雅，但代码应该可以正常工作。您可能需要调整 CSS（请参阅下面的说明）和动画延迟以获得您喜欢的效果。**

**演示： http:** [//jsfiddle.net/9dq3U/7/](http://jsfiddle.net/9dq3U/7/)（调整持续时间以了解其工作原理）

```
$(function() {
    var $test = $('#test');
    var $overlay = $('.overlay');

    var tmsg = 'Bonjour<p>C\'est le message de test</p><p>Pour démontrer l\'effet de fondu</p>';

    $overlay.css({
        'width': 10,
        'height': $test.outerHeight()
    }).position({
            of: $test,
            my: 'left top',
            at: 'left top'
    });

    $('button').click(function() {

        $test.animate({
            opacity: 0
        }, 1000);

        $overlay.show().animate({
            'width': ($test.width() + $test.width()/2) //Adjust this as you need
        }, 600, function() {

            $overlay.css('width', $test.width()); //Adjust this as you need

            $test.html(tmsg).animate({
                'opacity': 1
            }, 200);
            $overlay.animate({
                'width': 0
            }, 1500, function() {
                $(this).hide();
            });            
        });
    });
}); 
```

下面还有用于叠加层的渐变透明背景的**CSS ：**

```
/* IE9 SVG, needs conditional override of 'filter' to 'none' */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjM4JSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(left,  rgba(255,255,255,1) 0%, rgba(255,255,255,1) 20%, rgba(255,255,255,1) 38%, rgba(255,255,255,0) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(255,255,255,1)), color-stop(20%,rgba(255,255,255,1)), color-stop(38%,rgba(255,255,255,1)), color-stop(100%,rgba(255,255,255,0))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(left,  rgba(255,255,255,1) 0%,rgba(255,255,255,1) 20%,rgba(255,255,255,1) 38%,rgba(255,255,255,0) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(left,  rgba(255,255,255,1) 0%,rgba(255,255,255,1) 20%,rgba(255,255,255,1) 38%,rgba(255,255,255,0) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(left,  rgba(255,255,255,1) 0%,rgba(255,255,255,1) 20%,rgba(255,255,255,1) 38%,rgba(255,255,255,0) 100%); /* IE10+ */
background: linear-gradient(left,  rgba(255,255,255,1) 0%,rgba(255,255,255,1) 20%,rgba(255,255,255,1) 38%,rgba(255,255,255,0) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#00ffffff',GradientType=1 ); /* IE6-8 */ 
```

当然，上面的不是我写的。。它是在[Ultimate CSS 渐变](http://www.colorzilla.com/gradient-editor/)的帮助下生成的。。

1.  更改预设（我使用右上角的最后一个）
2.  将方向更改为水平
3.  更改透明度级别（下面的滑块显示您希望它透明的程度）
4.  复制 CSS 并粘贴到小提琴中（我只有时间在 FF 12 中进行测试，效果很好）

祝你好运！如果您需要任何帮助，请告诉我。

# django - 过滤 Django QuerySet 以仅包含给定列表中的结果

> ID：10904256
> 
> 赞同：1
> 
> 时间：2012-06-05T20:14:39.367
> 
> 标签：django

我需要从可变长度列表中获取所有标题包含所有“部分”的书籍。

喜欢（不工作）：

```
title_list = ['tree', 'sun']
books = Books.objects.filter(title__icontains=title_list) 
```

或在 SQL（工作）中：

```
SELECT * FROM `books` WHERE title LIKE '%tree%' AND title LIKE '%sun%'; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:23:43.040

这似乎有效：

```
from django.db.models import Q

title_list = ['tree', 'sun']

Books.objects.filter(reduce(lambda a, b: a & b, [Q(title__icontains=title) for title in title_list])) 
```

# jquery - 如何防止 AJAX 事件的空触发器？

> ID：10904257
> 
> 赞同：1
> 
> 时间：2012-06-05T20:14:50.423
> 
> 标签：jquery, ajax, onchange

使用以下 jQuery 代码，我创建了一个更新页面的下拉菜单，但是我相信当它`#content`随着返回的结果而改变时，它会将其计为一个`change`事件并提取`#sidebar`信息。

```
<script>
var get_pages_load_options = { 
    target:        '#content',
    data: {ajaxtype: 'content'},
    beforeSubmit:  function() {
        console.debug('beforeSubmit');
    },
    success: function() {
        console.debug('successful');
    }
};
$("#content").on('change','.get_pages',function(){
    var submit_page = $(this).attr('rel');
    var form_url = $("#"+submit_page).attr('action');
    console.debug(submit_page+" & "+form_url);
    $("#"+submit_page).ajaxForm(get_pages_load_options);
    $.ajax({
        type: "POST",
        url: form_url,
        data: {ajaxtype: "side"},
        success: function(data) {
            console.debug(data);
            $("#sidebar_menu").html(data);
        }
    });
});
</script> 
```

HTML 如下`#content`：

```
<div id="content" class="content">
    <h1>Game Updates</h1>
    <form action="/gameplay/updates/" id="submit_page" name="submit_page" class="get_pages" method="post">
        <select name="year" class="get_pages" rel="submit_page">
            <option value="2012">2012 -- v1.7.0 - v2.0.0</option>
            <option value="2011">2011 -- v1.5.3 - v1.6.0</option>
            <option value="2010">2010 -- v1.3.3 - v1.5.2</option>
            <option value="2009">2009 -- v1.1.4 - v1.3.2</option>
            <option value="2008">2008 -- v0.6.0 - v1.1.3</option>
            <option value="2007">2007 -- v0.1.x - v0.5.5</option>
        </select>
    </form>
    /** Update Logs **/
    <br/><br/>
    <p>
        -----------<br />
        Thank you,<br />
        Admin deth4uall
    </p>
</div> 
```

你知道我怎样才能防止第二次发生变化吗？谢谢！

编辑：我确实有一个默认的常规版本，上面应该覆盖以下功能：

```
$("#content").on('change','.get_pages',function(){
    var submit_page = $(this).attr('rel');
    $("#"+submit_page).submit();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:53:11.650

如果值未定义，只需从函数中返回。

```
$("#content").on('change','.get_pages',function(){
    var submit_page = $(this).attr('rel');
    var form_url = $("#"+submit_page).attr('action');
    if (!submit_page || !form_url) {
        return;
    }
    //console.debug(submit_page+" & "+form_url);
    $("#"+submit_page).ajaxForm(get_pages_load_options);
    $.ajax({
        type: "POST",
        url: form_url,
        data: {ajaxtype: "side"},
        success: function(data) {
            //console.debug(data);
            $("#sidebar_menu").html(data);
        }
    });
}); 
```

# android - 如何右对齐文本

> ID：10904260
> 
> 赞同：0
> 
> 时间：2012-06-05T20:14:56.650
> 
> 标签：android, android-layout

我试图改变文本的对齐方式。这就是我所拥有的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:orientation="horizontal" android:layout_width="fill_parent" android:layout_height="wrap_content">

    <TableLayout android:layout_width="fill_parent" android:layout_height="wrap_content">
        <TableRow>
         <TextView
            android:id="@+id/ctime"
            android:layout_gravity="right"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="50"
            android:text="time" />
        </TableRow>
        <TableRow>

           <TextView
               android:id="@+id/cstatus"
               android:layout_width="match_parent"
               android:layout_height="wrap_content"
               android:layout_gravity="right"
               android:layout_weight="100"
               android:text="status" />

</TableRow>
</TableLayout>
 </LinearLayout> 
```

即使在设置之后，输出中的所有内容都是左对齐的`android:layout_gravity="right"`。这是布局的一部分，因为我无法发布整个布局。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:17:06.590

用这个

```
android:gravity="right" 
```

# java - 禁止或不允许修改访问时间java

> ID：10904265
> 
> 赞同：2
> 
> 时间：2012-06-05T20:15:23.467
> 
> 标签：java, file, ant, md5, file-access

我正在编写一个 Java 类，它扩展了 Ant Zip Task 来为我完成一项特定的工作。我想创建一个 zip 文件，一旦创建了该文件，我想抑制 inode 中的访问时间，因此即使文件被修改，我也不能被修改或找到不让它改变的方法。原因是我做了一个 md5 哈希，这取决于访问时间。因此，这给我带来了很多麻烦，并且使访问时间恒定将解决我的问题。有人现在我将如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T22:45:05.803

我以前必须解决类似的问题-也许这是您的选择。就我而言，问题是：

> 我们制作了一个 jar 文件，然后在该 jar 文件上运行了一个安全的哈希算法。因为 jar 文件实际上是一个 zip 文件，并且 zip 文件内部包含文件元数据信息，包括上次访问时间，如果我们从*完全相同的源材料*创建一个新 jar 文件，那么新 jar 文件上的哈希不匹配原始哈希（因为虽然 zip 内容相同，但 zip 文件中存储的元数据具有不同的文件创建/访问时间）。

基本上，为了合规目的，我们需要能够计算安全哈希，以便能够轻松地显示 jar 的内容未更改。重新编译一个等效的 jar 是可以的 - 只是*内容*必须相同。

我们编写了一组简单的工具，专门为 zip/jar 文件执行安全哈希（和验证）。它计算了两个哈希：

*   文件的常规安全哈希（它将识别*完全相同的 jar* - 这与标准 md5sum 的输出相同）
*   通过迭代 zip/jar 的解压缩内容的字节计算的“仅内容”哈希（因此可用于识别重新编译的 jar 与原始 jar 匹配）

为了实现仅内容散列，我们使用 a[`ZipInputStream`](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipInputStream.html)来遍历 zip 条目。

```
MessageDigest sha1;
byte[] digest;

for (each zip file entry)
{
  if (entry represents a directory)
  {
    sha1.update( directory name bytes as UTF-8 );
  }
  else
  {
    read the entry bytes using ZipInputStream.read()
    sha1.update( bytes );
  }
}

digest = sha1.digest(); 
```

也可以看看：[`ZipInputStream.read()`](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipInputStream.html#read%28byte%5b%5d,%20int,%20int%29)

但是请注意，某些文件（例如清单）可能包含诸如用于创建 jar 的 ant 版本以及用于编译类的编译器版本等信息。因此，您必须从等效环境编译以使哈希匹配。

最后，这无法解决 zip 文件本身可能包含其他 zip 文件的事实。虽然这足以让检查满足这一点并下降到嵌套的 zip/jar/war 文件中，但我们的实现却没有。

# c# - Entity Framework 5 和 XElement 字段

> ID：10904266
> 
> 赞同：5
> 
> 时间：2012-06-05T20:15:39.117
> 
> 标签：c#, xml, entity-framework, xelement, entity-framework-5

开始使用 Visual Studio 2012 RC 和 Entity Framework 5 ......绝对喜欢它，但想知道是否有*更清洁*的方法来做到这一点。

我想省去每次解析 XML 的中间人，并通过 .ToString() 设置它

```
public class MyEFEntity
{
    [NotMapped()]
    public XElement Tags { 
        get { return XElement.Parse(tags); } 
        set { tags = value.ToString(); } }

    [Column("Tags", TypeName = "xml"), Required]
    public string tags { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T20:51:04.757

原则上没有更好的方法。您需要两个属性 - 一个`XElement`用于支持持久化字符串，一个用于支持持久化字符串。如果你想减少解析和转换的数量，你需要为此实现一些基础设施。一般方法是：

*   处理`ObjectContext.ObjectMaterialized`事件 - 如果物化对象是`MyEFEntity`解析字符串并将其保存到`XElement`属性。如果您正在使用`DbContext`，您仍然可以`ObjectContext`通过其显式实现`IObjectContextAdapter`。
*   Override `SaveChanges`- 在方法中找到所有修改或插入的`MyEFEntity`through实例`DbContext.ChangeTracker.GetEntries`并将它们的 XML 保存到字符串属性

# java - 无法将 csv 文件导入 JAVA

> ID：10904269
> 
> 赞同：1
> 
> 时间：2012-06-05T20:15:44.860
> 
> 标签：java, android, eclipse, csv

当我尝试将 csv 文件导入我的 java 代码时遇到问题，这里是相关的 java 代码

```
try {   File file = new File("/home/hanrui/workspace/table.csv");
        BufferedReader reader = new BufferedReader(new FileReader(file));
        reader.readLine();
        String line = null;
        while((line=reader.readLine())!=null){
            String item[] = line.split(",");

            String last = item[item.length-1];
            int value = Integer.parseInt(last);
            series1Numbers[row] = value;
            series2Numbers[row] = value;
            row++;
        }
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

当我调试它时，它报告了一个错误：找不到源。但我这样导入文件：File file = new File("/home/hanrui/workspace/table.csv")。（并且我调试了我的代码的其他部分，没有报告错误）

任何帮助将不胜感激 =)

这是日志：

[2012-06-05 15:27:25 - AndroidPlotExample] 安装 AndroidPlotExample.apk...

[2012-06-05 15:27:52 - AndroidPlotExample] 成功！

[2012-06-05 15:27:52 - AndroidPlotExample] 在设备模拟器 5554 上启动活动 edu.ius.rwisman.AndroidPlotExample.AndroidPlotExampleActivity

[2012-06-05 15:27:53 - AndroidPlotExample] ActivityManager：开始：Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=edu.ius.rwisman.AndroidPlotExample/ .AndroidPlotExampleActivity }

[2012-06-05 15:27:54 - AndroidPlotExample] 尝试将调试器连接到端口 8643 上的“edu.ius.rwisman.AndroidPlotExample”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:42:18.147

此问题可能与代码无关，而是与您的 IDE 的某些问题有关。通过简短的错误描述，该类似乎没有相关的源代码。

**编辑：** 尝试关闭 Eclipse 并检查是否有任何 java ghost 进程。如果是这样，请杀死它们，重新启动 Eclipse 并重试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:37:44.180

您确定这是程序错误还是您如何运行它？“未找到源”错误通常发生在运行 Java 时，并且它不知道您尝试运行的源信息在哪里。这不应与会引发异常的 File Not Found 混淆。我认为您的代码没有任何问题，您创建了一个文件指针，然后为它创建一个阅读器，然后将所有内容放入 IOExceptions 的 try/catch 子句中，据我所知这是正确的。

您应该检查您的设置以运行该程序。你在使用 IDE 吗？你在命令行中运行吗？您的文件是否在正确的路径中？

当您只运行常规打印语句代替 try/catch 子句时会发生什么？（以与以往相同的方式运行所有内容。）

如果您将 Eclipse 用作 IDE，这可能会有所帮助： [Source not found for a file that I have open](https://stackoverflow.com/questions/5795040/source-not-found-for-a-file-that-i-have-open)

# mysql - 如何将外部 mysql 数据库中的数据导入 Symfony2 项目？

> ID：10904276
> 
> 赞同：1
> 
> 时间：2012-06-05T20:16:06.060
> 
> 标签：mysql, symfony, import, doctrine-orm

我正在使用 Symfony2 开发我的网站的新版本。我在以前的版本上使用了 mysql，现在我使用了 Doctrine2/Mysql。我想将我的用户表导入到新版本中。我认为最好的方法是使用 Symfony2 提供的命令工具。

但是，我不知道如何浏览我的旧 mysql 数据库（或 mysql 转储）以执行 php 脚本来填充我的新数据库。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:35:40.180

你不需要有一个新的数据库，你可以继续使用实际的。但是如果你想复制它，你可以使用[*mysqladmin*命令工具](http://www.rubyrobot.org/article/duplicate-a-mysql-database)。
然后，您可以[从数据库中生成实体](http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:14:01.330

听起来很棘手，足以成为一个[ETL](http://en.wikipedia.org/wiki/Extract,_transform,_load)问题。那里有许多[工具](http://www.manageability.org/blog/stuff/open-source-etl)；许多企业虽然有一些双许可开源。如果您只这样做一次，那么许多工具可能过于复杂。但是，如果您必须经常进行这种数据处理，那么一个好的 ETL 应用程序可以节省大量时间。我可以推荐 Altova 的[MapForce](http://www.altova.com/mapforce.html)作为更直接和直观的方法之一。它只是Windows。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T01:04:24.890

我做到了 ！

我不知道这是否是最好的解决方案，但它有效。

1）在我的新数据库中导入旧表

2）让Doctrine自省数据库并生成相应的元数据文件。

```
php app/console doctrine:mapping:convert xml ./src/Acme/BlogBundle/Resources/config/doctrine/metadata/orm --from-database --force 
```

3) 执行以下命令，让Doctrine导入schema并构建相关实体类

```
php app/console doctrine:mapping:import AcmeBlogBundle annotation 
```

现在，我可以在我的旧数据库上使用这个 EntityManager 来执行我想要的所有脚本。

你可以在这里找到更多信息：http: [//symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html](http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html)

# java - 使用 maven-gae 和 google 插件用于 Eclipse (GPE) 时出错

> ID：10904277
> 
> 赞同：2
> 
> 时间：2012-06-05T20:16:06.587
> 
> 标签：java, eclipse, google-app-engine, maven

我读了最后一个 GPE 与 maven 项目集成得很好。

所以我使用 maven-gae-plugin 从 cmd 行创建了一个 maven 项目。

然后作为maven项目导入eclipse。

但是，当我将它作为“Web 应用程序”（GPE）运行时，它会因以下错误而失败：

> 无法发现 Google App Engine SDK 根目录，而是从文件加载：/Users/neo/.m2/repository/com/google/appengine/appengine-tools-sdk/1.6.6/appengine-tools-sdk-1.6。 6.jar。指定 -Dappengine.sdk.root 以覆盖 SDK 位置。

在项目的 Properties -> Google -> Google App Engine 中，我将 sdk 指向 /Users/neo/.m2/repository/com/google/appengine/appengine-java-sdk/1.6.6/appengine-java-sdk -1.6.6（这是一个有效的 sdk 目录）。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:17:44.773

我们也遇到了这个问题。这似乎是一个类加载问题。只需将工具在列表中向上移动，使其首先加载。

1.  转到**运行**->**运行配置**...
2.  **在“ Web 应用程序**”下选择您的应用程序
3.  单击“**类路径**”选项卡
4.  突出显示 appengine-tools jar 并选择“**向上**”，使其移动到您的项目上方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T08:47:02.463

Unzip the file appengine-tools-sdk-1.6.6.jar and it will create a folder appengine-tools-sdk-1.6.6

It will work if you put the following in VM arguments in your run configuration

-Dappengine.sdk.root=/Users/neo/.m2/repository/com/google/appengine/appengine-tools-sdk/1.6.6/appengine-tools-sdk-1.6.6

# android - 使用线程作为 GameLoop

> ID：10904287
> 
> 赞同：0
> 
> 时间：2012-06-05T20:17:15.440
> 
> 标签：android, multithreading, loops, runnable

我需要做的是有一个循环，如果我愿意，我可以停止......我创建了一个新线程并将其命名为 GameLoop 我希望它完成我所有的位图 X 和 Y 更改，但是当我尝试运行我所拥有的什么都没有动，它只是给我发了一张照片。这是我的代码，我做错了什么？

```
 public GamePage(Context context, AttributeSet attrs) 
    {
        super(context, attrs);
            //other code here
            Thread gameThread = new Thread(new GameLoop());
            gameThread.start();  
    }

public class GameLoop implements Runnable
{
    public void run()
    {
        try {
            Thread.sleep(speed);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        Log.d("LoopRunning", "The Game Loop Is Running!");

        switch ((int)possition)
        {
        case 0:
            if (counter < 110) {SunY --; counter++;}
            if (counter >= 110 && counter < 240) {SunY --; SunX ++; counter++;} 
            if (counter >= 240 && counter < 360) {SunY -= 0.5; SunX ++; counter++;}
            if (counter >= 360 && counter < 662) {SunY -= 0.333; SunX ++; counter++;}
            if (counter >= 662 && counter < 1004) {SunY += 0.333; SunX++; counter++;}
            if (counter >= 1004 && counter < 1104) {SunY += 0.5; SunX++; counter++;}
            if (counter >= 1104 && counter < 1224) {SunY ++; SunX++; counter++;}
            if (counter >= 1224 && counter < 1345) {SunY ++; counter++;}
            break;

        case 1:
            if (ZombieX < canvasWidth/2 + 300) ZombieX += 10;

            if (counter2 < 110) {MoonY --; counter2++;}
            if (counter2 >= 110 && counter2 < 240) {MoonY --; MoonX ++; counter2++;} 
            if (counter2 >= 240 && counter2 < 360) {MoonY -= 0.5; MoonX ++; counter2++;}
            if (counter2 >= 360 && counter2 < 662) {MoonY -= 0.333; MoonX ++; counter2++;}
            if (counter2 >= 662 && counter2 < 1004) {MoonY += 0.333; MoonX++; counter2++;}
            if (counter2 >= 1004 && counter2 < 1104) {MoonY += 0.5; MoonX++; counter2++;}
            if (counter2 >= 1104 && counter2 < 1224) {MoonY ++; MoonX++; counter2++;}
            if (counter2 >= 1224 && counter2 < 1345) {MoonY ++; counter2++;}
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:21:18.923

像这样使用两个嵌套的 while 循环：

```
@Override public void run() {
    while (gameShouldRun) {
        while (iterateGame) {
            // do game stuff
        }
    }
} 
```

此外，`run`默认情况下不循环。如果您希望游戏循环直到停止，您将需要在 run 方法中使用 while 循环。

# php - 多个php文件中的静态类变量

> ID：10904290
> 
> 赞同：1
> 
> 时间：2012-06-05T20:17:19.917
> 
> 标签：php, class, variables, static

我对 php 很生疏，只是在学习如何使用类，现在发生了一些奇怪的事情，这可能就是 php 的工作方式——我不确定。

我有一个对类（项目）是静态的数组，我想做的是在页面加载后立即填充数组（在 index.php 中），然后在填充数据时使用其中的项目。但我也想在其他 php 文件（比如我的 ajax_show_timesheet.php）中使用 SAME 项目数组。

当我尝试从另一个 php 文件访问数组时：

```
Project::$projectArray[key]; 
```

数组为空。如果我打电话

```
Project::createProjects(); 
```

再次从另一个 php 文件中，它重新填充。

那么为什么我不能从各种 .php 文件中访问同一个静态数组呢？

这是我正在做的事情：

**类项目：**

```
class Project
{

  public static $projectArray;

  public $projectID;

  public function __construct($projID=0){
    $this->projectID = $projID;

  }

  public static function createProjects(){

    $projectResult = mysql_query("SELECT * FROM $tblProjects");

    $numRows = mysql_numrows($projectResult); 
    $i = 0;

    while($i < $numRows){
      //for each project in the DB, add one to the array
      Project::$projectArray[mysql_result($projectResult, $i, "projectID")] 
             = new Project(mysql_result($projectResult, $i, "projectID"));

      $i++;
    }
  }
} 
```

在 index.php 我填写初始化项目：

```
Project::createProjects(); 
```

在 ajax_show_timesheet.php 我做了类似的事情：

```
echo Project::$projectArray[key]->projectID 
```

我什么也没回来。

关于如何在多个文件中使用静态变量的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:23:33.357

当你这样做时会发生什么？

```
public static function createProjects(){

    $projectResult = mysql_query("SELECT * FROM $tblProjects");

    $numRows = mysql_numrows($projectResult); 
    $i = 0;

    while($i < $numRows){
        //for each project in the DB, add one to the array
        Project::$projectArray[mysql_result($projectResult, $i, "projectID")] 
              = new Project(mysql_result($projectResult, $i, "projectID"));

        $i++;
    }
    var_dump(Project::$projectArray);
} 
```

因为[这表明](http://php.net/manual/en/language.oop5.static.php)您不能以您现在的方式初始化静态变量。似乎您正在尝试像单例一样使用 Project，但这不是 php 单例的工作方式。

# iphone - 声音引擎泄漏……预加载效果不好？

> ID：10904293
> 
> 赞同：0
> 
> 时间：2012-06-05T20:17:26.060
> 
> 标签：iphone, objective-c, ios, audio, cocos2d-iphone

在 App Delegate 中，我正在预加载**所有**音效和背景音乐。使用 Instruments 进行测试时，该工具显示我正在泄漏内存，源是 SimpleAudioEngine 和一堆与播放声音相关的其他类。真的`preloadEffect`那么`preloadBackgroundMusic`糟糕吗？如何修复我的内存泄漏？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:20:58.850

相反，预加载效果不是坏习惯。第一次播放音效时，与预加载方法一样加载。预加载唯一要做的就是避免在第一次播放效果时出现卡顿或冻结。对于大型音频文件，这可能会导致应用暂停十分之一秒甚至更长时间。

# php - 如何按国家代码从 ICU 库中获取默认语言

> ID：10904294
> 
> 赞同：1
> 
> 时间：2012-06-05T20:17:28.090
> 
> 标签：php, localization, icu

`en_US`给我`en`英语，但它已经在代码中

我需要`US`返回`en`英语或“DE”返回`de`德语

```
echo Locale::getPrimaryLanguage('en_US');
echo Locale::getPrimaryLanguage('US'); 
```

以上都应该输出`en`，但后者实际输出`us`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:14:17.030

`getPrimaryLanguage`不是 ICU 功能，所以我不知道它是如何实现的。在 ICU 中，您可以调用`uloc_addLikelySubtags`which 会扩展 `und_US`（您可以`und`在 region code 之前放置 unknown `US`）`en_US`或`und_DE` to `de_DE`- 然后调用`uloc_getLanguage`将返回`en`,`de`等。

您的`us`for结果`US`可能是由于`US`被解释为语言代码。您可以尝试`und_US`查看行为是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T01:35:02.323

就像@Steven R. Loomis 说你可以使用语言环境'und_US'，`Locale::getPrimaryLanguage('und_US')`只会返回'und'

如果使用 php intl 扩展，它可以接受 'und_US' 的语言环境，但它不会仅根据美国地区正确格式化您的货币，您需要指定一种语言。

```
$locales = array('de_DE', 'en_US', 'ja_JP', 'und_US', 'und_JP', 'und_DE', 'und_FR');
$amount = 1234567.891234567890000;
foreach ($locales as $locale) {
        echo Locale::getPrimaryLanguage($locale).'<br />';
        $formatter = new NumberFormatter($locale, NumberFormatter::CURRENCY); 
        echo $formatter->getTextAttribute(NumberFormatter::CURRENCY_CODE); 
        echo '|' . $formatter->getSymbol(NumberFormatter::CURRENCY_SYMBOL);
        echo '|' . $formatter->getSymbol(NumberFormatter::INTL_CURRENCY_SYMBOL);
        echo ' - ' . $formatter->formatCurrency($amount, $formatter->getTextAttribute(NumberFormatter::CURRENCY_CODE));
        echo '<br /><br />';
} 
```

返回

> de EUR|€|EUR - 1.234.567,89 €</p>
> 
> zh USD|$|USD - $1,234,567.89
> 
> 日元|￥|日元 - ￥1,234,568
> 
> 美元|美元|美元 - 1234567.89 美元
> 
> 和日元|¥|日元 - ¥ 1234568
> 
> und 欧元|€|欧元 - € 1234567.89
> 
> und 欧元|€|欧元 - € 1234567.89

请注意，即使您获得了该地区的正确货币符号，数字的格式也不正确。

# ruby-on-rails - 在 Rails 中是否有一个常见的 UI 模式列表来实现“has_many”对象的集合？

> ID：10904296
> 
> 赞同：2
> 
> 时间：2012-06-05T20:17:43.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3, design-patterns

我经常以包含诸如“Category has_many Products”之类的成语的项目告终。我总是发现自己在以用户友好的方式实现它的思考过程中挣扎。

如果您采用 Rails 3.2.3 提供的普通脚手架，它与 simple_form gem 相结合非常适合小型、简单的应用程序，那么您将获得需要创建的框架，例如产品和类别。

现在我处于如何将许多产品添加到一个类别的情况。根据潜在结果集的大小，我通常会在页面上放置一个小搜索框，然后在底部列出子对象，并根据需要将其设为 Ajax-y。

但是我在哪里可以访问这个？它应该在“显示”视图上吗？或者我应该完全放弃 Show 操作，只需重定向回 Index 列表并在 Edit and Destroy 旁边放置一个名为“Products”的附加操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T22:14:48.337

这实际上取决于您的应用程序流程如何。我不确定这是否真的与 Rails 有关，但例如在 Magento（它的商店）管理面板中，当您编辑类别时，有一个选项卡可以管理相关产品，因此您可以查看它们的列表和使用复选框来分配产品类别（使用更复杂的过滤）。与产品类似，在编辑它时，在“类别”选项卡下，您可以使用复选框将其分配给适当的猫。

至于 Rails - 如果我的集合不大，我个人使用产品下的类别列表，带有复选框或带有“facebook 样式”标签的 jQuery 自动完成字段；-)

# c# - 如何在 EF4.3 代码优先中映射到和映射到复杂类型？

> ID：10904298
> 
> 赞同：4
> 
> 时间：2012-06-05T20:17:59.050
> 
> 标签：c#, oracle, entity-framework, entity-framework-4.1, ef-code-first

我有一个这样的实体类型：

```
public class Invoice{
    public int Id { get; set; }
    public InvoiceNumberSequence Sequence { get; set; }
    public decimal Amount { get; set; }
} 
```

`InvoiceNumberSequence`看起来像这样：

```
public class InvoiceNumberSequence { 
    public string Prefix { get; set; }
    public int Number { get; set; }

    public string GetSequence() {
        return Prefix + Number;
    }
} 
```

我的问题是我有一个无法更改的现有数据库，并且我正在尝试将表/列映射到我的域模型。以下是表格的外观：

```
[SYSTEMINVOICES]
INVOICE_ID int
INV_TOTAL decimal
INVOICE_SEQ varchar(255) 
```

我有一个`DbContext`这样的：

```
public MyDatabaseContext : DbContext {
    public DbSet<Invoice> Invoices { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        modelBuilder.Entity<PredictedHeat>().ToTable("SYSTEMINVOICES");
        modelBuilder.Entity<Invoice>().HasKey(p => p.Id);
        modelBuilder.Entity<Invoice>().Property(p => p.Id).HasColumnName("INVOICE_ID");
        modelBuilder.Entity<Invoice>().Property(p => p.Amount).HasColumnName("INV_TOTAL");        
        //need something here to map my invoice sequence to my database table
    }
} 
```

我需要将 InvoiceNumberSequence 双向映射... 1) 从数据库字段到 InvoiceNumberSequence 类，以及 2) 从 InvoiceNumberSequence.GetSequence() 方法到数据库字段。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T20:59:56.390

所以不要`GetSequence`使用属性：

```
public class InvoiceNumberSequence { 
    public string Prefix { get; set; }
    public int Number { get; set; }

    public string Sequence {
        get { retrun Prefix + Number; }
        set { // Add your parsing logic }
    }
} 
```

并在映射中添加：

```
modelBuilder.ComplexType<InvoiceNumberSequence>()
            .Property(p => p.Sequence)
            .HasColumnName("INVOICE_SEQ");
modelBuilder.ComplexType<InvoiceNumberSequence>()
            .Ignore(p => p.Prefix);
modelBuilder.ComplexType<InvoiceNumberSequence>()
            .Ignore(p => p.Number); 
```

# grails - Grails多个数据库 - 使用服务选择数据源不起作用

> ID：10904315
> 
> 赞同：2
> 
> 时间：2012-06-05T20:19:24.627
> 
> 标签：grails, service, datasource

我曾尝试在另一个问题中提出这个问题，但我可能已经提供了太多细节。

我正在使用 Grails 和多个数据源。如果您想使用服务来声明数据源，那对我来说根本不起作用。

```
static datasource = "db1" 
```

无论如何，这在 Grails 服务中对我不起作用

感谢您的任何帮助/建议。

== 我正在编辑它以包含我的 Datasource.groovy

现在，如果我为我的第二个数据库使用域对象上的静态映射，这很好。但是，我希望服务决定必须写入哪个数据库，因此我希望服务数据源属性与文档中的一样。

1.  如果我声明我的域对象使用“所有”数据源，则服务将写入默认数据源，尽管我设置了

    静态数据源 = "db21"

2.  如果我声明我的域对象使用“db1”数据源，服务将写入 db1 数据源

    1.  如果我声明 2,3...N 个数据源，看起来服务只会写入默认数据源或我在域 groovy 文件中声明的数据源。文档说我应该能够使用服务来选择数据源。

===============编辑==============

```
dataSource {
    pooled = true
    driverClassName = "org.h2.Driver"
    username = "sa"
    password = ""
}

hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = true
    cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
}
// environment specific settings
environments {
    development {
        dataSource {
            dbCreate = "validate"
            url = "jdbc:h2:devDb;MVCC=TRUE"
        }
    dataSource_db1 {
        dbCreate = "validate"
        url = "jdbc:h2:dev1Db;MVCC=TRUE"
        pooled = true
        driverClassName = "org.h2.Driver"
        username = "sa"
        password = ""
    }
    }
    test {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:mem:testDb;MVCC=TRUE"
        }
    }
    production {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:prodDb;MVCC=TRUE"
            pooled = true
            properties {
               maxActive = -1
               minEvictableIdleTimeMillis=1800000
               timeBetweenEvictionRunsMillis=1800000
               numTestsPerEvictionRun=3
               testOnBorrow=true
               testWhileIdle=true
               testOnReturn=true
               validationQuery="SELECT 1"
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T22:53:36.313

我们在 Grails 应用程序中使用了多个数据源，并且使用您上面指出的方法成功地切换了服务中的数据源......

```
static datasource = "db1" 
```

但是，不同之处在于，在我们所有的域对象中，我们都定义了域对象属于哪个数据源。我不确定是否可以不在映射中定义非默认数据源。

```
static mapping = { datasource 'db1' } 
```

在某些情况下，我们将有 2 个不同的域类，它们具有相同的名称但指向不同的数据源。为了保持干净，我们将把 2 个域类放在不同的包中，并将使用这些域类/数据源的服务放在同一个包中。

例如...

```
//Domain Classes
package com.yourcompany
class Student {
    static mapping = {
       //if you don't indicate the datasource it will use the default                      
    }
}

package com.yourcompany.db1
class Student {
    static mapping = {
       datasource 'db1'                     
    }
}

//Services
package com.yourcompany
class DefaultDbService {
   def getStudents() {
      //This will query the default datasource           
      Student.findAll()
   }
}

package com.yourcompany.db1
class Db1Service {
   static datasource = "db1"

   def getStudents() {
       //This will query the 'db1' datasource           
       Student.findAll()
   }
} 
```

您可以尝试这种方法，看看它是否能得到您正在寻找的结果。

# java - 如何将数据添加到在设计模式下创建的 JTable？

> ID：10904316
> 
> 赞同：0
> 
> 时间：2012-06-05T20:19:24.643
> 
> 标签：java, swing, jtable, jframe, tablemodel

我创建了一个初始 JFrame，其中包含一个包含三列的表，如下所示：

![共享管理器框架](../Images/2cd45aa31154c72e80357868c60cc279.png)

这个 JFrame 是在设计模式下创建的，所以现在在面板的构造函数中，我想加载一些数据，所以当用户选择打开这个 JFrame 时，数据就会被加载。

我的列数据类型是对象（通常“状态”用于表示共享状态的图像 - 活动或非活动），共享名称的字符串和连接到该共享的活动客户端数量的整数。

我的问题是，如何通过代码向 JTable 添加行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:36:12.930

以简化的方式（可以改进）：

```
class MyModel extends AbstractTableModel{

    private ArrayList<Register> list = new ArrayList<Register>();

    @Override
    public int getColumnCount() {
        return 3;
    }

    @Override
    public int getRowCount() {
        return list.size();
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        Register r = list.get(rowIndex);
        switch (columnIndex) {
        case 0: return r.status; 
        case 1: return r.name;
        case 2: return r.clients; 
        }
            return null;
    }

    public void addRegister(String status, String name, String clients){
        list.add(new Register(status, name, clients));
        this.fireTableDataChanged();
    }

    class Register{
        String status;
        String name;
        String clients;

        public Register(String status, String name, String clients) {
            this.status = status;
            this.name = name;
            this.clients = clients;
        }
    }

} 
```

然后，在面板的构造函数中：

```
MyTableModel mtm = new MyTableModel();
yourtable.setModel(mtm); 
```

并添加一行：

```
mtm.addRegister("the status","the name","the client(s)"); 
```

**编辑：**

要更改列的标题名称：

```
TableColumn statusColumn = yourtable.getColumnModel().getColumn(0); 
statusColumn.setHeaderValue("Status"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:31:09.903

*   [JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)有两个级别（如您发布的 printscreen）谈论视图，

*   有（隐藏的）[XxxTableModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)存储值，

*   在`XxxTableModel`你可以调用[myTableModel#addRow](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/DefaultTableModel.html#addRow%28java.lang.Object%5B%5D%29)

简单的例子

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import javax.swing.table.*;

public class RemoveAddRows extends JFrame {

    private static final long serialVersionUID = 1L;
    private Object[] columnNames = {"Type", "Company", "Shares", "Price"};
    private Object[][] data = {
        {"Buy", "IBM", new Integer(1000), new Double(80.50)},
        {"Sell", "MicroSoft", new Integer(2000), new Double(6.25)},
        {"Sell", "Apple", new Integer(3000), new Double(7.35)},
        {"Buy", "Nortel", new Integer(4000), new Double(20.00)}
    };
    private JTable table;
    private DefaultTableModel model;

    public RemoveAddRows() {

        model = new DefaultTableModel(data, columnNames) {

            private static final long serialVersionUID = 1L;

            @Override
            public Class getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
        };
        table = new JTable(model) {

            private static final long serialVersionUID = 1L;

            @Override
            public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
                Component c = super.prepareRenderer(renderer, row, column);
                int firstRow = 0;
                int lastRow = table.getRowCount() - 1;
                int width = 0;
                if (row == lastRow) {
                    ((JComponent) c).setBackground(Color.red);
                } else if (row == firstRow) {
                    ((JComponent) c).setBackground(Color.blue);
                } else {
                    ((JComponent) c).setBackground(table.getBackground());
                }
                /*if (!isRowSelected(row)) {
                String type = (String) getModel().getValueAt(row, 0);
                c.setBackground("Buy".equals(type) ? Color.GREEN : Color.YELLOW);
                }
                if (isRowSelected(row) && isColumnSelected(column)) {
                ((JComponent) c).setBorder(new LineBorder(Color.red));
                }*/
                return c;
            }
        };
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);
        JButton button1 = new JButton("Remove all rows");
        button1.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent arg0) {
                if (model.getRowCount() > 0) {
                    for (int i = model.getRowCount() - 1; i > -1; i--) {
                        model.removeRow(i);
                    }
                }
                System.out.println("model.getRowCount() --->" + model.getRowCount());
            }
        });
        JButton button2 = new JButton("Add new rows");
        button2.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent arg0) {
                Object[] data0 = {"Buy", "IBM", new Integer(1000), new Double(80.50)};
                model.addRow(data0);
                Object[] data1 = {"Sell", "MicroSoft", new Integer(2000), new Double(6.25)};
                model.addRow(data1);
                Object[] data2 = {"Sell", "Apple", new Integer(3000), new Double(7.35)};
                model.addRow(data2);
                Object[] data3 = {"Buy", "Nortel", new Integer(4000), new Double(20.00)};
                model.addRow(data3);
                System.out.println("model.getRowCount() --->" + model.getRowCount());
            }
        });
        JPanel southPanel = new JPanel();
        southPanel.add(button1);
        southPanel.add(button2);
        add(southPanel, BorderLayout.SOUTH);
    }

    public static void main(String[] args) {
        RemoveAddRows frame = new RemoveAddRows();
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

# java - Hibernate 使用命名策略生成 pk ID

> ID：10904320
> 
> 赞同：0
> 
> 时间：2012-06-05T20:19:49.803
> 
> 标签：java, hibernate

我正在使用休眠 JPA。我想扩展一个包含我的 pk 生成器和一些哈希等于代码的基类，但是我的公司正在使用 table_name_id 来描述物理数据库中的 ID，这似乎是不可能的。刚刚有人告诉我，我可以使用休眠命名策略来动态地将表名添加到我的变量前面，但是我还没有找到一个很好的例子来说明如何实现这一点。有人可以向我指出一些有关如何实现此目的的示例代码或文档。

超类

```
@MappedSuperclass
public abstract class Base implements Serializable {

    @Id
    @GeneratedValue(strategy = AUTO)
    @Column(name="ID", nullable = false)
    private Integer id;

    ....
} 
```

A子类

```
@Entity
@Table(name="TABLE_A")
public class TableA extends Base {
// physical model needs base pk id to be prefixed with table_a resulting in table_a_id.
...
} 
```

子类 B

```
@Entity
@Table(name="TABLE_B")
public class TableB extends Base {
// physical model needs base pk id to be prefixed with table_b resulting in table_b_id.
...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:23:19.273

我只是做完全相同的事情，以确保为所有 PK 生成的列名将具有 format `tablename_id`。

默认情况下，在JPA模式下使用hibernate时，它使用它`EJB3NamingStrategy`作为默认命名策略。通过创建以下自定义`NamingStrategy`扩展`EJB3NamingStrategy`，您可以只更改主键的命名策略，并保持JPA标准指定的其他命名策略保持不变。

```
public class CustomNamingStrategy extends EJB3NamingStrategy {

    private static final long serialVersionUID = -1953826881322136108L;
    private String currentTableName;

    public String propertyToColumnName(String propertyName) {

        if (propertyName.equalsIgnoreCase("id")) {
            return currentTableName + "_id";
        } else {
            return StringHelper.unqualify(propertyName);
        }
    }

    public String tableName(String tableName) {
        currentTableName = tableName;
        return tableName;
    }
} 
```

请注意，您必须`@Column(name="ID")`从所有`@Entity`此类中删除，以便休眠将使用自定义`NamingStrategy`生成列名。

# wordpress - 升级Wordpress 2.8.5到3.3.2，白屏死机

> ID：10904327
> 
> 赞同：0
> 
> 时间：2012-06-05T20:20:22.293
> 
> 标签：wordpress

我正在尝试为朋友升级旧的 wordpress 安装。我有以下设置：

*   运行 2.8.5 Wordpress 的远程 LAMP 实时服务器
*   远程 LAMP 测试服务器，目前在尝试从 2.8.5 手动更新到 3.3.2 后停止运行。
*   本地 MAMP 服务器复制测试服务器

我开始过于自信，因为，嘿，我以前做过，没问题。所以我从[七步手动更新](http://codex.wordpress.org/Updating_WordPress#Manual_Update)开始，而不是[扩展手动更新说明](http://codex.wordpress.org/Upgrading_WordPress_Extended)。（错误 #1：我没有测试服务器的完整备份，只有 wp-admin 和 wp-includes，但如果需要，我可以从理论上相同的实时服务器中提取。）

白屏死机。好吧，我可能应得的。我[打开调试](http://codex.wordpress.org/Editing_wp-config.php#Debug)并确保有一个可写的调试日志文件。死机还是黑屏。禁用插件。还是白屏。

因此，我将实时服务器复制回本地 MAMP 服务器，以获得功能正常的 2.8.5 镜像，然后将其更新为 3.3.2。成功：有点——它以完全相同的方式失败了，所以我可以调试它。事实证明，更新需要单独上传默认主题。耶！当我添加主题时，我看到了日志文件的输出，我看到了一个快乐的博客页面。将主题切换回来：已损坏，并且没有日志记录。

所以我回到我的测试服务器，删除所有主题，除了 211。没运气。好的，二十。没运气。我的本地版本中使用的默认主题相同。没运气。我现在启用了调试（但没有生成日志）、无插件、默认主题的手动升级，并出现白屏死机。

我仔细检查了所有的 SO 线程、WP 帮助线程等——是的，我已经完成了他们建议的一切。因此，我没有一一调试核心文件，而是重新开始：将**功能**WP 安装从我的本地服务器（应该与功能失调的远程 WP 安装相同）复制到远程测试服务器（我看到预期的“无法连接到 db”消息），更新 wp-config，然后看...什么都没有。WSOD。

有一些东西使此代码在我的本地服务器上工作，而在远程服务器上以不可调试的方式变为空白。有人可以指点我尝试其他的东西吗？

如果一切都失败了，我想我会手动安装 3.3.2 而不是升级，但我对实时服务器持怀疑态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T05:50:19.093

还要检查您的管理区域，而不仅仅是前端。（直接转到管理 URL）这可能是一个主题问题。即使您在文件夹中放置了另一个主题 - 您仍然需要激活它，因为在数据库上它仍然是标记为已激活的旧主题。

# c# - 多行 - Winform 列表框中的条目

> ID：10904328
> 
> 赞同：0
> 
> 时间：2012-06-05T20:20:29.680
> 
> 标签：c#, listbox, listboxitem

在一个列表框中，一个条目如何占据多行？

我尝试过“姓名：somename \n Age: someage”，但这似乎不起作用。有没有办法强制每个条目的垂直边距更大？

-问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:26:44.180

标准的 WinForm 列表框不支持这一点。您将不得不通过制作自定义控件来滚动自己。

# javascript - IE8 对最新的 jquery 没有圆角

> ID：10904330
> 
> 赞同：0
> 
> 时间：2012-06-05T20:20:38.810
> 
> 标签：javascript, jquery, css, jquery-ui, internet-explorer-8

我正在使用最新的 jquery 和 jquery-ui。我使用大多数 jquery 按钮、日期选择器、对话框等。在兼容模式或非兼容模式下，它们在 IE8 中都没有圆角。然而，在 Firefox 和 chrome 中，有圆角。我需要在 jquery 的 css 中包含任何可以应用样式的内容吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:21:25.713

圆角是 CSS3 的一项功能。IE 8 不支持 CSS3。最早支持'border-radius'的IE版本是IE9。

如果您正在为旧版 IE 浏览器寻找 polyfill，请查看[CSS3 PIE](http://css3pie.com/)。我个人没有太多运气，但我听到了好消息。

虽然 IE8 比以前的版本有了飞跃式发展，但 IE8 有很多不足之处；特别是它对功能的支持。请记住，它目前是一个 3 岁的浏览器，它有点落后于 chrome/firefox，它几乎每周都会向您推送更新。

它或其他浏览器缺少许多 polyfills 的许多功能，请查看[Modernizr Polyfill Wiki 文章](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)以获取有关可用于填补空白的工具的信息。我还建议您仔细权衡使用 polyfill 的利弊，有时您只是不需要它。（圆角通常不会破坏网站，因此您可以将其忽略并继续您的一天）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:23:17.673

您可以使用[http://css3pie.com/](http://css3pie.com/)来模拟旧 IE 版本中的 CSS3 功能。IE8 不支持很多 CSS3 功能，例如`border-radius`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T20:25:16.393

您可能还想查看[Modernizr](http://modernizr.com/)以模拟 CSS3 功能。我们已经将它用于这个目的（等等）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T20:26:17.160

它们是 IE 不支持的 CSS3 功能。

*   [标准模式下 IE8 的 jQuery 圆角代码？](https://stackoverflow.com/q/987270/1048572)
*   [如何使用modernizr添加CSS3圆角？](https://stackoverflow.com/q/9892163/1048572)
*   [http://jonraasch.com/blog/css-rounded-corners-in-all-browsers](http://jonraasch.com/blog/css-rounded-corners-in-all-browsers)
*   [http://css3pie.com/](http://css3pie.com/)

# ios - 重复将相同的精灵表重新加载到帧缓存中是否浪费？

> ID：10904336
> 
> 赞同：1
> 
> 时间：2012-06-05T20:21:05.263
> 
> 标签：ios, cocos2d-iphone

目前，我有一个菜单场景，在其中我将精灵表添加到帧缓存中。我反复离开菜单场景并返回。因此，每次重新加载菜单场景时，都会将相同的精灵表添加到帧缓存中。这是坏事吗？旧的是否被覆盖、忽略、更新、保留？我是否通过一遍又一遍地将相同的精灵表读取到帧缓存来泄漏内存或浪费内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T01:48:19.890

它既不浪费也不有害。这一切背后的关键组件是 CCTextureCache 和 CCSpriteFrameCache 单例。他们都在后台使用 NSMutableDictionary。当您“重新加载”纹理时，如果它已经被键入缓存，则“添加”操作会被静默省略（即不会重新读取和重新加载纹理），并且调用方法会从当前返回适当的纹理在缓存中。

对于精灵帧缓存，当读取.plist时，会创建一个精灵帧对象，为plist中的每个key设置嵌入的CCSpriteFrame。因此，当您重新加载时，所有以前的 CCSpriteFrame 对象都将被释放（假设您没有将它们保留在代码中的其他位置，例如，如果您保留引用它们的 CCAnimation）。

您必须关心的实际资源是时间和内存。当您离开菜单时，如果“目标”受内存限制，您可以在分配所需资源之前移除未使用的纹理和未使用的精灵帧。完成此操作后，当您返回菜单时，将重新读取和重新加载纹理（对 CCSpriteFrame 的额外影响非常小）。您必须自己确定这是否会引入不可接受的延迟，并以此为基础决定重新添加未使用的纹理……但是请在设备上而不是模拟器上执行此操作。

# git - GitHub“致命：远程源已经存在”

> ID：10904339
> 
> 赞同：576
> 
> 时间：2012-06-05T20:21:19.777
> 
> 标签：git, github

我正在尝试按照[Michael Hartl 的 Rails 教程](http://ruby.railstutorial.org/chapters/beginning#fnref:1.16)进行操作，但遇到了一个错误。

我在 Github 上注册并发布了一个新的 SSH 密钥并创建了一个新的存储库。但是当我在终端中输入下一行时，出现以下错误：

```
Parkers-MacBook-Pro:.ssh ppreyer$ git remote add origin git@github.com:ppreyer/first_app.git
fatal: remote origin already exists. 
```

只是想知道是否有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1089
> 
> 时间：2012-06-05T20:28:54.463

TL;DR 你应该只更新现有的遥控器：

```
$ git remote set-url origin git@github.com:ppreyer/first_app.git 
```

**长版：**

如错误消息所示，已经有一个远程配置了相同的名称。因此，您可以添加具有不同名称的新遥控器，也可以在不需要时更新现有遥控器：

要添加一个新的遥控器，例如调用`github`而不是`origin`（显然已经存在于您的系统中），请执行以下操作：

```
$ git remote add github git@github.com:ppreyer/first_app.git 
```

但是请记住，在教程中您看到*“origin”*的任何地方都应该将其替换为*“github”*。例如`$ git push origin master`现在应该是`$ git push github master`.

但是，如果您想查看`origin`已经存在的是什么，您可以执行`$ git remote -v`. 如果您认为这是由于某些错误，您可以像这样更新它：

```
$ git remote set-url origin git@github.com:ppreyer/first_app.git 
```

* * *

## 回答 #2

> 赞同：418
> 
> 时间：2014-10-30T11:30:55.103

简而言之，

```
git remote rm origin
git remote add origin git@github.com:username/myapp.git 
```

工作！

干杯!

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2014-11-03T07:53:34.817

首先做一个：

```
git remote rm origin 
```

然后

```
git remote add origin https://github.com/your_user/your_app.git 
```

瞧！为我工作！

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2013-08-28T20:26:29.183

您可以查看配置为通过哪些远程存储库连接到

```
git remote -v 
```

这将返回此格式的列表：

```
origin  git@github.com:github/git-reference.git (fetch)
origin  git@github.com:github/git-reference.git (push) 
```

这可能会帮助您弄清楚原始“起源”所指的内容。

如果您想保持使用 -v 看到的远程连接，但仍想遵循 Rails 教程，而不必为教程的存储库记住“github”（或其他名称），您*可以*使用命令：

```
git remote rename [current name] [new name] 
```

如：

```
git remote rename origin oldrepo 
```

然后，您应该能够继续您的教程。

* * *

## 回答 #5

> 赞同：37
> 
> 时间：2014-04-03T01:33:10.437

对于那些遇到非常常见的错误“致命：远程原点已经存在。”，或者当尝试删除原点并且您收到“错误：无法删除配置部分 remote.origin”时，您需要做的是手动设置原点。

Window 的 POSH~Git for Windows PowerShell（和 GitHub for Windows 的应用程序）对此有问题。

我遇到了这个，就像我经常做的那样，在设置我的八爪鱼时。所以，这就是我如何让它工作的。

首先，检查您的遥控器：

```
C:\gd\code\octopress [source +2 ~3 -0 !]> git remote -v
octopress       https://github.com/imathis/octopress.git (fetch)
octopress       https://github.com/imathis/octopress.git (push)
origin 
```

您首先会注意到我的来源没有网址。任何删除它、重命名它等的尝试都失败了。

因此，手动更改 url：

```
git remote set-url --add origin https://github.com/eduncan911/eduncan911.github.io.git 
```

`git remote -v`然后您可以通过再次运行来确认它是否有效：

```
C:\gd\code\octopress [source +2 ~3 -0 !]> git remote -v
octopress       https://github.com/imathis/octopress.git (fetch)
octopress       https://github.com/imathis/octopress.git (push)
origin  https://github.com/eduncan911/eduncan911.github.io.git (fetch)
origin  https://github.com/eduncan911/eduncan911.github.io.git (push) 
```

这已经修复了我遇到的数十个 git repos、GitHub、BitBucket GitLab 等问题。

* * *

## 回答 #6

> 赞同：31
> 
> 时间：2016-06-21T19:52:51.340

在特殊情况下，您从用作模板的旧存储库开始创建新存储库（如果不是这种情况，请不要这样做）。完全擦除旧存储库的 git 文件，以便您可以启动一个新存储库：

```
rm -rf .git 
```

然后像往常一样重新启动一个新的 git 存储库：

```
git init
git add whatever.wvr ("git add --all" if you want to add all files)
git commit -m "first commit"
git remote add origin git@github.com:ppreyer/first_app.git
git push -u origin master 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2015-01-07T05:49:00.383

如果您需要检查与本地存储库连接的远程存储库，则有一个 cmd：

```
git remote -v 
```

现在，如果您想删除远程仓库（例如，来源），那么您可以做的是：

```
git remote rm origin 
```

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2020-03-28T03:52:06.533

如果原点已经存在，则使用此命令更新原点

```
git remote set-url origin https://github.com/SriramUmapathy/ReduxLearning.git 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2015-12-11T00:31:47.340

该错误消息表明您的 git 目录中已经有一个遥控器。如果您对该遥控器感到满意，您可以推送您的代码。如果没有，或者如果你不能只推：

```
git remote remove origin
git remote add origin git@github.com:ppreyer/first_app.git 
```

瞧！

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2016-04-29T21:09:01.940

的概念`remote`只是您的远程存储库的 URL。

`origin`是指向该 URL的*别名。*因此，不是每次我们想要将某些东西推送到我们的存储库时都编写整个 URL，我们只需使用这个别名并运行：

`git push -u origin master`

告诉 git`push`从我们的*本地**主**分支*到*远程**源**存储库*的代码。

每当我们*克隆一个存储库*时，**git**默认为我们创建这个别名。同样，每当我们创建一个*新的存储库*时，我们只是自己创建它。

无论是哪种情况，我们都可以随时将此名称更改为我们喜欢的任何名称，运行以下命令：

```
git remote rename [current-name] [new-name] 
```

由于它存储在**git**应用程序的客户端（在我们的机器上），因此更改它不会影响我们开发过程中的任何内容，也不会影响我们的远程存储库。请记住，它只是一个指向*地址的**名称*。

 *通过重命名别名在这里唯一改变的是，每次我们将某些东西推送到我们的存储库时，我们都必须声明这个**新名称。**

`git push -u my-remote-alias master`

显然一个名字不能指向两个不同的地址。这就是您收到此错误消息的原因。您的本地计算机上已经有一个别名`origin`。要查看您有多少别名以及它们是什么，您可以启动此命令：

```
git remote -v 
```

这将显示您拥有的所有别名以及相应的 URL。

如果你喜欢运行它，你也可以删除它们：

```
git remote rm my-remote-alias 
```

### 简而言之：

*   找出你已经拥有什么，
*   删除或重命名它们，
*   添加您的新别名。

快乐编码。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2015-07-15T07:06:22.143

如果你已经为另一个存储添加了项目，比如你上传到 github，然后你上传到 bitbucket，那么它会显示这种类型的错误。

如何删除错误：删除项目中的 git-hub 文件，然后重复以下步骤...

```
git init       
git remote add origin git@bitbucket.org:Yourname/firstdemotry.git  
git add -A  
git commit -m 'Message'  
git push -u origin master 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2018-01-29T06:07:05.007

*   `$ git remote add origin git@gitlab.com:abc/backend/abc.git`

    在此命令中，来源不是命令的一部分，它只是您的远程存储库的名称。您可以使用任何您想要的名称。

    *   **首先，您可以使用以下命令检查它包含的内容**

    `$ git remote -v`

    它会给你这样的结果 `origin git@gitlab.com:abc/backend/abc.git (fetch) origin git@gitlab.com:abc/backend/abc.git (push) origin1 git@gitlab.com:abc/backend/abc.git (fetch) origin1 git@gitlab.com:abc/backend/abc.git (push)`

    如果它包含您的远程存储库路径，那么您可以直接推送到该路径而无需再次添加源

    *   **如果它不包含您的远程存储库路径**

    然后您可以添加具有不同名称的新来源并使用它来推送 `$ git remote add origin101 git@gitlab.com:abc/backend/abc.git`

    或者您可以重命名现有的原产地名称添加您的原产地

    `git remote rename origin destination`

    再次在命令下开火

    `$ git remote -v`

    `destination git@gitlab.com:abc/backend/abc.git (fetch) destination git@gitlab.com:abc/backend/abc.git (push)`

    它将更改您现有的存储库名称，以便您可以使用该原始名称

    或者您可以删除现有的来源并添加您的来源

    `git remote rm destination`

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2017-03-08T09:35:34.807

如果您在未初始化 git 的目录中运行命令，也会发生这种情况。如果是这种情况，请先运行：

```
git init 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2019-12-03T15:38:59.143

在 Windows 上使用 git bash 将存储库添加到 git hun 时遇到同样的错误

```
 git remote add origin https://github.com/axaysushir/netflix_page_clone.git 
```

致命：远程来源已经存在。

```
fatal: remote origin already exists.

 ! [rejected]        master -> master (fetch first) 
```

错误：未能将一些参考资料推送到“ [https://github.com/axaysushir/meditation_app_using_js.git](https://github.com/axaysushir/meditation_app_using_js.git) ”

> 通过以下命令更新存储库

```
$ git remote set-url origin https://github.com/axaysushir/netflix_page_clone.git 
```

> 然后使用 git remote add github 添加存储库，而不是 git remote add origin

```
$ git remote add github https://github.com/axaysushir/netflix_page_clone.git 
```

> 然后编写以下命令而不是 git push origin master 这会将您的存储库上传到 github

```
$ git push github master 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2016-02-04T08:35:00.513

使用 git 你必须是

> 根

如果没有，那么使用 sudo

> 删除原点：
> 
> git远程删除原点

添加原点：

git 远程添加源[http://giturl](http://giturl)

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2018-09-27T16:31:08.577

试试这个

*   cd existing_repo
*   git remote rename origin old-origin

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2022-01-26T08:31:58.190

在远程推送代码时，我在**Bitbucket中遇到问题**

请按照以下步骤操作：

**步骤 1：**更新现有遥控器

```
git remote set-url origin https://pratik@bitbucket.org/pratik/demoapp.git 
```

**步骤 2：**您可以使用此命令强制更改具有本地存储库的服务器。远程仓库代码将替换为您的本地仓库代码。

```
git push -f origin master 
```

`-f`通常，该命令拒绝更新不是用于覆盖它的本地引用的祖先的远程引用。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-03-30T15:16:59.987

首先检查要查看您有多少别名以及它们是什么，您可以启动此命令 git remote -v

然后查看您在哪个存储库中，然后尝试 git remote set-url --add [Then your repositpory link] git push -u origin master

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-03-14T12:25:38.637

至少在 bash 上，我们可以强制命令的退出代码的返回值为 0

您可以删除旧遥控器并重新添加

```
git remote remove $1 || true
git remote add $1 $2 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-09-26T20:52:26.023

如果您想通过 GUI 执行以下操作：

1.  确保“隐藏文件”在您的项目文件夹中可见
2.  转到 .git 目录
3.  编辑config.txt文件中的url文件并保存文件！

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-10-06T19:00:23.630

不要注意错误并写下：

git push -u 原点主*

# c# - 如何在 ASP.NET 中隐藏 RGB 通道之一？

> ID：10904343
> 
> 赞同：2
> 
> 时间：2012-06-05T20:21:49.670
> 
> 标签：c#, asp.net

我尝试研究，但似乎 ASP.NET 中没有解决方案，只有 webforms 等。

例如，我可以为 a 隐藏 RGB 通道（例如，只有 RED 通道）`.jpg`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:55:48.820

```
using(var bmp = new Bitmap("C:\\temp\\source.jpg"))
{
    for (int x = 0; x < bmp.Width; x++)
    for (int y = 0; y < bmp.Height; y++)
    {
        var c = bmp.GetPixel(x, y);
        bmp.SetPixel(x, y, Color.FromArgb(c.A, 0, c.G, c.B));
    }
    bmp.Save("C:\\temp\\target.jpg", ImageFormat.Jpeg);
} 
```

# php - 使用codeigniter，如何处理众多控制器/视图所需的方法？

> ID：10904346
> 
> 赞同：0
> 
> 时间：2012-06-05T20:21:54.697
> 
> 标签：php, codeigniter

假设我有一个从数据库表中获取其值的下拉列表。为了争论，让我们保持简单并使用颜色。我需要显示来自不同控制器的一堆视图的下拉列表。我阅读了几篇博客文章，其中人们使用“助手”，而其他人则初始化控制器的方法。如果它是这样的“通用”查询，那么将在哪里编写此方法的代码以便其他控制器/视图可以访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:43:53.423

如果您经常需要它，请将其放入模型中并自动加载。如果已经有适合的模型，请将其放在那里。否则，创建一个新模型来满足您的需求并没有错。只需尝试以符合您需求的逻辑方式组织事物，并便于以后跟踪方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:38:22.040

我认为[这个答案](https://stackoverflow.com/questions/7317203/how-to-populate-dropdownlist-from-database-in-codeigniter)很到位：

> 我要做的是在我的模型中创建一个函数，比如 $model->dropdown_options() 并使用它从数据库中获取行并将它们放入一个数组中。

然后使用[Form Helper](http://codeigniter.com/user_guide/helpers/form_helper.html)生成 Dropdown。

# android - Git合并除了我未跟踪的文件之外的所有文件

> ID：10904347
> 
> 赞同：0
> 
> 时间：2012-06-05T20:21:57.613
> 
> 标签：android, git, git-merge, git-pull

我正在与我实验室的一个团队一起开发一个 Git 版本的 Android 项目。其他成员之一告诉我他对代码进行了重大更改，并希望我将它们拉入。他们还没有在上游 master 中，所以我无法从中拉出，所以我已经设置了他的 fork作为一个遥控器，想从他的一个分支中拉出来。

我的问题是我没有跟踪项目副本中的 bin 文件夹，因为它是完全生成的文件，不应该进行版本控制。然而，他确实跟踪了 bin 文件夹，当我尝试提取他的更改时，我收到一条消息：

> 错误：以下未跟踪的工作树文件将被合并覆盖：

接下来是我所有的 bin 文件夹文件的列表。我如何提取除 bin 文件夹之外的所有文件？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:38:05.297

我的建议 ：

*   将 bin 文件夹放在 .gitignore 中，这样您的同事就会停止将生成的文件置于版本控制中

*   删除工作目录中的 bin 文件夹，然后合并（拉取）他的更改

*   擦除他的 bin 文件夹

*   在 Eclipse 中重新生成 bin 文件夹，提交并发送（连同 .gitignore）

# javascript - Three.js cubeCamera envmap不工作

> ID：10904357
> 
> 赞同：1
> 
> 时间：2012-06-05T20:22:30.003
> 
> 标签：javascript, html, three.js

嘿，我在使用 three.js 插件的 cubecamera 时遇到了 2 个问题。

每次我设置立方体相机时

```
cubeCamera = new THREE.CubeCamera( 1, 100000, 256, 128 );
//cubeCamera.renderTarget.minFilter = THREE.LinearMipMapLinearFilter;
cubeCamera.doubleSided = true;
scene.add( cubeCamera );

var cubeTarget = cubeCamera.renderTarget; 
```

一旦我输入`scene.add( cubeCamera );`脚本崩溃并输出：
“未捕获的类型错误：无法读取未定义的属性'长度'”</p>

我搜索了一切尝试了一切。现在我设法让它工作，而不是它应该如何工作。

我从未添加过 cubeCamera，但在我的渲染函数中我做了以下事情：

```
cubeCamera.position.z = 100;
cubeCamera.position.x = 200;
cubeCamera.position.y = 0;
cubeCamera.updateCubeMap( renderer, scene ); 
```

我得到以下输出：

[http://i.stack.imgur.com/IeXB9.png](http://i.stack.imgur.com/IeXB9.png)

那我做错了什么？为什么我不能写行`scene.add( cubeCamera );`？？

在此先感谢，布拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T07:41:37.490

终于找到答案了！

只需将 three.js 脚本从 r47 更新到 r49..

现在它可以工作了，必须改变一些其他的东西，比如 collada loader ;)

所以下一次，总是检查我是否是最新的（A）。

# r - 通过在 r 中匹配来子集数据集

> ID：10904360
> 
> 赞同：1
> 
> 时间：2012-06-05T20:22:34.507
> 
> 标签：r, dataframe, subset

我有更大的数据集，如下所示：

```
l = 9
loc <- c(paste('Loc', 1:l, sep = ''))
 vloc <- c(rep(loc, each=2))
 qi <- c(  13, 12, 27, 20, 16, 18,  14, 17, 15, 22, 21, 26,12, 14, 11,
   18,  8, 24  )
    afreq <- c( 0.308, 0.4, 0.041, 0.5, 0.125, 0.5,0.139, 0.2, 0.219, 0.2,0.176, 
    0.33,0.358, 0.4, 0.274, 0.5, 0.173, 0.15)   
 loctab <- data.frame(vloc = vloc, qi = qi, afreq = afreq)
loctab 

   vloc     qi afreq
1  Loc1     13 0.308
2  Loc1     12 0.400
3  Loc2     27 0.041
4  Loc2     20 0.500
5  Loc3     16 0.125
6  Loc3     18 0.500
7  Loc4     14 0.139
8  Loc4     17 0.200
9  Loc5     15 0.219
10 Loc5     22 0.200
11 Loc6     21 0.176
12 Loc6     26 0.330
13 Loc7     12 0.358
14 Loc7     14 0.400
15 Loc8     11 0.274
16 Loc8     18 0.500
17 Loc9      8 0.173
18 Loc9     24 0.150 
```

较小的数据集如下：

```
ex1 <-data.frame (loc, qi = c(13, 27, 16, 14, 15, 21, 12, 11,  8)
ex1

   loc qi
1 Loc1 13
2 Loc2 27
3 Loc3 16
4 Loc4 14
5 Loc5 15
6 Loc6 21
7 Loc7 12
8 Loc8 11
9 Loc9  8 
```

对于每个 loc，我需要匹配 ex1（小）和 loctab（大）之间的 qi 值并创建一个新表。

我尝试了以下但没有提供正确的答案。

```
 nloct <- loctab[loctab$qi %in%  ex1$qit, ] 
```

预期的输出是

```
nloct <- data.frame (loc, qi = c(13, 27, 16, 14, 15, 21, 12, 11,  8), 
afreq = c( 0.308,  0.041,  0.125, 0.139, 0.219,0.176, 0.358,  0.274,  0.173))
  loc qi afreq
1 Loc1 13 0.308
2 Loc2 27 0.041
3 Loc3 16 0.125
4 Loc4 14 0.139
5 Loc5 15 0.219
6 Loc6 21 0.176
7 Loc7 12 0.358
8 Loc8 11 0.274
9 Loc9  8 0.173 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:29:56.677

您正在寻找某种呼叫`merge()`：

```
## e.g. :
## merge(ex1, loctab)[c(2,1,4)]
## OR
merge(ex1, loctab, by.x=c("loc", "qi"), by.y=c("vloc", "qi"))
   loc qi afreq
1 Loc1 13 0.308
2 Loc2 27 0.041
3 Loc3 16 0.125
4 Loc4 14 0.139
5 Loc5 15 0.219
6 Loc6 21 0.176
7 Loc7 12 0.358
8 Loc8 11 0.274
9 Loc9  8 0.173 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:34:14.220

```
merge(loctab,ex1,by.x=c('vloc','qi'),by.y=c('loc','qi')) 
```

但是，如果您将列 'vloc' 和 'loc' 命名为相同的东西，您可以说：

```
merge(loctab,ex1) 
```

# javascript - 如何通过javascript重新加载页面上的多个iframe之一

> ID：10904364
> 
> 赞同：0
> 
> 时间：2012-06-05T20:23:05.253
> 
> 标签：javascript, iframe, menu, click

我在页面上有一组菜单和多个 iframe（例如顶部/中心/底部）。

顶部和底部 iframe 在大多数情况下倾向于保持相同的内容。我只想在单击不同的菜单时重新加载中心 iframe。

单击不同的菜单时，我怎么能通过 javascript 做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:29:53.973

```
window.top.frames.CENTER.src = "http://google.com"; 
```

或通过 id 抓取 iframe 并更新其来源

```
document.getElementById("iframeCenter").src = "http://google.com" 
```

# function - LISP - 无法使用可选参数调用函数

> ID：10904365
> 
> 赞同：0
> 
> 时间：2012-06-05T20:23:12.683
> 
> 标签：function, lisp, optional-parameters

我在 LISP 中有这个函数，带有常规参数和可选参数 n：

```
(defun lastplus (x &optional (n 0)) //default value for n is 0
    ( if (listp x) //if x is a list
        (
            (list (length x) (n)) //return list that contains length(x) and n
        )
        (n) //else return n
    )
) 
```

我正在尝试在侦听器文件中使用该函数，但它给了我这个错误：

```
CL-USER 13 : 4 > (lastplus 2 8) 

Error: Undefined function N called with arguments (). 
```

我使用 LispWorks 6.0.1

你知道我为什么会收到这个错误吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T20:55:22.873

```
(defun lastplus (x &optional (n 0)) //default value for n is 0
    ( if (listp x) //if x is a list
        (
            (list (length x) (n)) //return list that contains length(x) and n
        )
        (n) //else return n
    )
) 
```

你的格式风格不是 Lispy。

适应 Lisp 格式：

```
(defun lastplus (x &optional (n 0)) ; default value for n is 0
   (if (listp x) ; if x is a list
        ((list (length x) (n))) ; return list that contains length(x) and n
     (n))) 
```

你说：`cannot call function with optional parameter`。

你当然可以。错误消息确实说了别的。您可以使用可选参数调用函数。错误在函数内部。

错误说：`Error: Undefined function N called with arguments ().`

因此，您正在调用一个名为 的函数`N`，该函数不存在。没有争论。就像在`(n)`. 检查你的代码 - 你能找到`(n)`吗？

现在问问自己：

*   *函数调用是什么样的？*

*   答案：左括号，函数，可能还有一些参数，右括号

*   *`(n)`看起来像什么？*

*   答：它看起来像一个函数调用。

*   *那是你想要的吗？*

*   当然不是。

*   *你想要什么？*

*   变量值。

*   *那看起来像什么？*

*   只是`n`。

*   *还有其他错误吗？*

*   唔。

*   *第三行的表格呢？*

*   这看起来也是不对的。

*   *也是错的。同样的错误。*.

# javascript - 将同时调用的函数中的 JS setInterval 导致错误的元素被更新

> ID：10904370
> 
> 赞同：0
> 
> 时间：2012-06-05T20:23:28.337
> 
> 标签：javascript, jquery, setinterval

我正在创建一些动态内容更新脚本，并决定制作一个可以链接的 jquery 函数，以便能够将我的代码应用于给定页面中的多个函数。然而，其中一部分产生了一些问题，我希望这里有一位更熟练的 js 开发人员能够帮助我。

基本上我有以下 JS 代码将动态更新指定元素中的内容。

```
$.fn.updatecontent = function(vars){
    id=$(this).children(":first").attr("id");
    var i=0;
    change_contents = function(){
        $("#"+id).fadeOut('slow', function(){
            $(this).html(vars.data[i]);
            $(this).fadeIn('slow');
        });
        if(i+1 < vars.data.length){
            i++;                
        }else{
            i=0;
        }
    };
    setInterval(change_contents,vars.interval);
};

$(document).ready(function(){
    $("#button_one").updatecontent({
        interval: 5000,
        data: ["button 1 main content", "button 1 secondary content"]                            
    });   
    $("#button_two").updatecontent({
        interval: 7000,
        data: ["button 2 main content", "button 2 secondary content"]                            
    });             
}); 
```

我的演示 html 看起来像这样

```
<section id="main_panel">
    <section id="button_one" class="button">
        <div id="button_one_content">button 1 main content</div>
    </section>
    <section id="button_two" class="button">
        <div id="button_two_content">button 1 main content</div>
    </section>
</section>​ 
```

问题是，如果我只在一个元素上调用此代码，它就可以正常工作，在我期望的元素上（[http://jsfiddle.net/C6h8s/10/](http://jsfiddle.net/C6h8s/10/)）。但是，如果我在两个元素上运行它，那么它只会更新第二个元素，但包含所有 4 个字符串（我会链接到这个 jsfiddle，但我现在不能发布两个以上的链接，第一个和最后一个更重要。请取消注释第二个调用以查看错误的功能）。问题似乎出在 setInterval 函数上，因为如果我删除对它的调用并在两个元素上调用该函数，它将适当地更新这两个元素，尽管只有一次，因为我不再导致它无限循环通过可用的字符串（[http://jsfiddle.net/C6h8s/11/](http://jsfiddle.net/C6h8s/11/)）。

任何人可能对如何解决此问题提出的任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:30:14.210

第二次调用该函数时，它会覆盖`id`，因为它是全局的。使用`var`：

```
var id = .... ; 
```

[**演示**](http://jsfiddle.net/C6h8s/13/)

# javascript - 放大 TeeChart HTML5/Javascript

> ID：10904372
> 
> 赞同：0
> 
> 时间：2012-06-05T20:23:30.200
> 
> 标签：javascript, html, zooming, teechart

我正在测试一个新的 TeeChart HTML5/javascript，但我遇到了缩放问题。当我多次应用缩放时，导航器崩溃。也出现在“演示”文件夹中的代码中。我正在使用折线图进行测试，但条形图也适用缩放。可以在这里看到：http: [//steema.us/joomla25](http://steema.us/joomla25)

任何的想法？也有人注意到？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:45:18.623

我可以一次又一次地放大它。我已将其添加到缺陷列表中。感谢您报告它。

--

最好的祝福，

耶雷·阿隆索

Steema 支持中心

# .net - 我可以将实体的可选引用投影到投影结果类型的可选引用中吗？

> ID：10904375
> 
> 赞同：13
> 
> 时间：2012-06-05T20:23:35.367
> 
> 标签：.net, entity-framework, linq-to-entities

说，我有两个实体：

```
public class Customer
{
    public int Id { get; set; }
    public int SalesLevel { get; set; }
    public string Name { get; set; }
    public string City { get; set; }
}

public class Order
{
    public int Id { get; set; }
    public DateTime DueDate { get; set; }
    public string ShippingRemark { get; set; }

    public int? CustomerId { get; set; }
    public Customer Customer { get; set; }
} 
```

`Customer`是一个*可选*的（可为空的）引用`Order`（可能系统支持“匿名”订单）。

**现在，如果**订单有客户，我想将订单的一些属性投影到视图模型中，包括客户的一些属性。然后我有两个视图模型类：

```
public class CustomerViewModel
{
    public int SalesLevel { get; set; }
    public string Name { get; set; }
}

public class OrderViewModel
{
    public string ShippingRemark { get; set; }
    public CustomerViewModel CustomerViewModel { get; set; }
} 
```

如果这`Customer`将是*必需*的导航属性，`Order`我可以使用以下投影并且它可以工作，因为我可以确定 a`Customer`始终存在于 any `Order`：

```
OrderViewModel viewModel = context.Orders
    .Where(o => o.Id == someOrderId)
    .Select(o => new OrderViewModel
    {
        ShippingRemark = o.ShippingRemark,
        CustomerViewModel = new CustomerViewModel
        {
            SalesLevel = o.Customer.SalesLevel,
            Name = o.Customer.Name
        }
    })
    .SingleOrDefault(); 
```

但是当`Customer`它是可选的并且带有 Id 的订单`someOrderId`没有客户时，这不起作用：

*   EF 抱怨物化值`o.Customer.SalesLevel`是`NULL`并且不能存储在`int`不可为空的属性`CustomerViewModel.SalesLevel`中。这并不奇怪，问题可以通过使`CustomerViewModel.SalesLevel`类型`int?`（或通常*所有*属性都可以为空）来解决

*   但我实际上更喜欢在订单没有客户时实现`OrderViewModel.CustomerViewModel`。`null`

为此，我尝试了以下方法：

```
OrderViewModel viewModel = context.Orders
    .Where(o => o.Id == someOrderId)
    .Select(o => new OrderViewModel
    {
        ShippingRemark = o.ShippingRemark,
        CustomerViewModel = (o.Customer != null)
            ? new CustomerViewModel
              {
                  SalesLevel = o.Customer.SalesLevel,
                  Name = o.Customer.Name
              }
            : null
    })
    .SingleOrDefault(); 
```

但这会引发臭名昭著的 LINQ to Entities 异常：

> 无法创建“CustomerViewModel”类型的常量值。此上下文仅支持原始类型（例如“Int32”、“String”和“Guid”）。

我想这是不允许`: null`的“恒定值” 。`CustomerViewModel`

由于`null`似乎不允许分配，我尝试在以下位置引入标记属性`CustomerViewModel`：

```
public class CustomerViewModel
{
    public bool IsNull { get; set; }
    //...
} 
```

然后是投影：

```
OrderViewModel viewModel = context.Orders
    .Where(o => o.Id == someOrderId)
    .Select(o => new OrderViewModel
    {
        ShippingRemark = o.ShippingRemark,
        CustomerViewModel = (o.Customer != null)
            ? new CustomerViewModel
              {
                  IsNull = false,
                  SalesLevel = o.Customer.SalesLevel,
                  Name = o.Customer.Name
              }
            : new CustomerViewModel
              {
                  IsNull = true
              }
    })
    .SingleOrDefault(); 
```

这也不起作用并引发异常：

> “CustomerViewModel”类型出现在单个 LINQ to Entities 查询中的两个结构不兼容的初始化中。可以在同一个查询中的两个位置初始化一个类型，但前提是在两个位置都设置了相同的属性并且这些属性以相同的顺序设置。

异常很清楚如何解决问题：

```
OrderViewModel viewModel = context.Orders
    .Where(o => o.Id == someOrderId)
    .Select(o => new OrderViewModel
    {
        ShippingRemark = o.ShippingRemark,
        CustomerViewModel = (o.Customer != null)
            ? new CustomerViewModel
              {
                  IsNull = false,
                  SalesLevel = o.Customer.SalesLevel,
                  Name = o.Customer.Name
              }
            : new CustomerViewModel
              {
                  IsNull = true,
                  SalesLevel = 0, // Dummy value
                  Name = null
              }
    })
    .SingleOrDefault(); 
```

`null`这可行，但用虚拟值或显式填充所有属性并不是一个很好的解决方法。

问题：

1.  除了使所有属性都可`CustomerViewModel`以为空之外，最后一个代码片段是唯一的解决方法吗？

2.  是否根本不可能`null`在投影中实现可选引用？

3.  你有其他想法如何处理这种情况吗？

（我只是为这个问题设置了一般*实体框架*标签，因为我猜这种行为不是特定于版本的，但我不确定。我已经用 EF 4.2 `DbContext`//Code-First 测试了上面的代码片段。编辑：两个添加了更多标签。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T06:13:41.837

我也无法让投影在 DbQuery 的 IQueryable 实现上工作。如果您正在寻找解决方法，那么为什么不在从 Db 检索数据后进行投影，它不再是 EF DbQuery...

```
OrderViewModel viewModel = context.Orders
    .Where(o => o.Id == someOrderId)
     // get from db first - no more DbQuery
    .ToList()
    .Select(o => new OrderViewModel
    {
        ShippingRemark = o.ShippingRemark,
        CustomerViewModel = o.Customer == null ? null : new CustomerViewModel
        {
            SalesLevel = o.Customer.SalesLevel,
            Name = o.Customer.Name
        }
    })
    .SingleOrDefault(); 
```

缺点是您要从 Db 中获取所有 Order 和 Customer 列。您可以通过仅从 Order 中选择您需要的列到匿名类型来限制这一点，然后...

```
OrderViewModel viewModel = context.Orders
    .Where(o => o.Id == someOrderId)
    .Select(o => new { ShippingRemark = o.ShippingRemark, Customer = o.Customer })
     // get from db first - no more DbQuery
    .ToList()
    .Select(o => new OrderViewModel
    {
        ShippingRemark = o.ShippingRemark,
        CustomerViewModel = o.Customer == null ? null : new CustomerViewModel
        {
            SalesLevel = o.Customer.SalesLevel,
            Name = o.Customer.Name
        }
    })
    .SingleOrDefault(); 
```

# php - 调用 header() 后 PHP SESSION 将不再维护

> ID：10904379
> 
> 赞同：0
> 
> 时间：2012-06-05T20:23:44.520
> 
> 标签：php, session

这个问题已经被问了好几次了，但从来没有回答过；这让我疯狂。

第 1 页：

```
session_start();
$_SESSION["testVariable"] = "test";
header("Location: http://www.mysite.com/page2.php"); 
```

第2页：

```
session_start();
print_r($_SESSION); 
```

结果：

```
Array () 
```

有任何想法吗？如果我在两个页面上都回显（session_id（）），则 ID 是不同的。此外，如果我注释掉标头调用，并手动点击 page2.php，会话变量将正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:27:27.253

@Greg 说：

> 您是从[http://mysite.com](http://mysite.com)而不是[http://www.mysite.com](http://www.mysite.com)访问第一页吗？

# ios - 没有调用 cvGet2D 的匹配函数

> ID：10904384
> 
> 赞同：0
> 
> 时间：2012-06-05T20:23:59.047
> 
> 标签：ios, xcode, opencv

它的另一个 OpenCV 问题。我喜欢这些东西，但它真的会让你发疯。

问题：我正在为 iPhone 的 iOS 开发一个项目，是的 OpenCV。我不知道我是否有一个糟糕的框架或什么。

这有效：

```
cv::Canney()
cv::adaptiveThreshold() 
```

但是，当我尝试

```
"cvGet2D()" (without previous "cv::") 
```

我得到错误：没有匹配的函数调用'cvGet2D'

当我只输入“cvGet2D()”时，它会显示在代码提示中，表明它至少找到了标题？当我尝试输入“cv::get2D”或“cv::cvGet2D”时，什么也没有出现。我很沮丧，因为我安装的 OpenCV 框架仍然感觉像一个我不理解的黑匣子。

具体来说，您认为它与开发与否以及正确库的链接有什么关系吗？只是把东西扔在那里。

非常感谢大家。我真的很感激，迫不及待地想等到我足够聪明地回馈一些。

编辑：

因此，为了清晰起见，最新尝试。

```
 cv::cvGet2D(results,0,0); 
```

新错误是：“命名空间'cv'中没有名为“cvGet2D”的成员；

这里有什么想法吗？

更多编辑：

再次感谢您的回复... 4 小时后，喝了几杯咖啡，我仍然感到困惑。如果我搞砸了命名空间，为什么像 cv::adaptiveThreshold 这样的工作但 cv::get2D 没有出现？它严重导致脑出血。

所以，看起来我应该使用这个解决方案的 C 或 C++ 版本。建议任何提示。我将在我的界面中添加：`#import <OpenCV/opencv2/opencv.hpp>`. 然后导入核心库，我可以在其中看到 cvGet2D 的结构。再次感谢。

进步！！

这些是我的新想法。

```
cv::Mat tempMat = [self.imageView.image CVMat];
cv::Mat testMat = tempMat(cv::Rect(0,0,2591, 1)); 
cv::Mat templateMat = tempMat(cv::Rect(0,0,100,1));  

cv::Mat results; 

cv::matchTemplate(testMat, templateMat, results, CV_TM_CCOEFF_NORMED); 

typedef Vec<float, 2> Vec2f;

Vec2f& elem = results.at<Vec2f>( 0 , 35 );

float value1 = elem[0]; 
float value2 = elem[1]; 
```

那么，也许应该使用 .at ？切线？也许吧，但它似乎在做些什么。新问题，wtf 会输出 matchTemplate 吗？它有 1 行，在本例中为 2492 列。我想我的问题是，(0,35) 处的值是否应该超过一个数字？elem[0] 和 elem[1] 代表什么？您可能会说，我只是从一张图片中取出 1 行，并使用其中的一小部分作为模板。照片包含垂直线，所以我希望确定这些线之间的距离。是的，它令人费解。但是，出于本次讨论的目的，真的应该只有 1 行和一系列列，这些列在每个比较正确移动时输出相关系数？

再次感谢伙计们、伙伴们、小伙子们、小伙子们，以及你们所有聪明的群众！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T22:48:11.607

首先，**没有`cv::cvGet2D()`**.

名称`cvGet2D()`表明它属于 OpenCV 的 C 接口，但是，您似乎使用的是 C++ 接口。混在一起不好，你知道的。仅供参考，这个函数在 opencv_core 库中可用。

错误消息告诉您它无法在您声明的标头中找到此函数，因此您似乎缺少正确的标头。尝试`#include <cv.h>`。

**编辑：**

由于您对该问题的最新更新，我还必须补充一点**，也没有`cv::get2D()`**. 停止尝试在周围放置命名空间`cvGet2D()`，这是来自 C 接口的函数，C 语言中没有命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:40:42.457

您可能正在使用 OpenCV 2.0 的 C++ API。

函数已移至`cv`命名空间。

您可以将它们与前面一起使用，也可以`cv::`简单地添加`using namespace cv;`到使用它们的文件的开头。

参考：[http ://www.aishack.in/2010/07/opencvs-c-interface/](http://www.aishack.in/2010/07/opencvs-c-interface/)

编辑：

还要确保所有大写字母都正确：

`cv::cvGet2D(img,i,j)`如果您使用或（如果您包含命名空间），它应该编译`cvGet2D(img,i,j)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T05:15:54.020

使用 Mat_ 类怎么样？它可以从垫子上铸造。

```
Mat_<Vec3b>& M_ = (Mat_<Vec3b>&)M;
for(int i = 0; i < M_.rows; i++)
    for(int j = 0; j < M_.cols; j++)
        M_(i,j) = cv::Vec3b(0,255,0); // Fill Green 
```

也可以看看

[http://docs.opencv.org/modules/core/doc/basic_structures.html#id7](http://docs.opencv.org/modules/core/doc/basic_structures.html#id7)

# objective-c - 多个 NSView 到一个 Xib 文件中

> ID：10904387
> 
> 赞同：1
> 
> 时间：2012-06-05T20:24:17.813
> 
> 标签：objective-c, cocoa, xcode4, iboutlet, nsviewcontroller

几天来，我一直在试图弄清楚如何将多个 NSView 处理成一个 .xib 文件。我添加了一个`NSViewController`子类，用作我的主控制器，它有两个`NSView`带有两个自定义视图的插座。我将它分为两​​个 NSViewController（PumpController 和 TransactionController）来控制两个自定义视图的内容。

当我将 MainController（文件的所有者）的视图绑定到自定义视图之一时，我可以获得一半的结果。然后，当我将 [self.view addSubview:SomeStuff] 调用到其中一个 NSViewController 中时，我得到了正确的结果，但仅在我连接文件所有者的视图中。我需要在两个视图中都得到结果，但我不能拥有多个具有视图出口的文件所有者。这是一张图片

![NIB 中的多个视图。](../Images/fd910b47d58aae929552b0f539546853.png) 链接：http: [//i.stack.imgur.com/gwSAq.jpg](https://i.stack.imgur.com/gwSAq.jpg)

此外，即使我将上面提到的插座与正确的视图绑定，我也无法从 PumpController 获得“插座”.bounds.size.width 结果。self.view.bounds.size.width 给了我文件所有者视图的结果，而不是 PumpController 视图的结果。

我需要一些帮助来解释我如何将每个自定义视图设置到每个 NSViewController 以使其正常工作。

对不起我的英语：s

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:51:22.037

我这样做如下：

*   在您的主 XIB 中放置`NSBox`实例（没有边框和标题），无论您希望在哪里显示 ViewController 的视图。
*   通过 将这些框连接到文件的所有者`IBOutlets`。
*   在该 XIB 的文件所有者（可能 = AppDelegate）中实例化您`NSViewControllers`并将`contentView`NSBox 实例的`view`属性设置为`NSViewControllers`. 像这样：`[self.leftBox setContentView:[yourViewController view]]`。

# php - Symfony 2 引导过程

> ID：10904389
> 
> 赞同：1
> 
> 时间：2012-06-05T20:24:25.677
> 
> 标签：php, symfony, bootstrapping

有人可以解释一下 symfony 2 应用程序的基本引导过程吗？从入口点到控制器中的特定操作，再到使用 twig 模板系统渲染视图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T23:40:44.817

symfony 书中有一章关于此：[http ://symfony.com/doc/current/book/internals.html](http://symfony.com/doc/current/book/internals.html)

阅读整章会让你很好地理解事情是如何在幕后工作的。

为了完整起见，我将在这里引用重要的部分：

**处理请求**

handle() 方法接受一个请求并总是返回一个响应。要转换请求，handle() 依赖于解析器和有序的事件通知链（有关每个事件的更多信息，请参阅下一节）：

*   在做任何事情之前，通知 kernel.request 事件——如果其中一个侦听器返回一个 Response，则直接跳转到第 8 步；
*   调用Resolver来确定要执行的Controller；
*   kernel.controller 事件的侦听器现在可以按照他们想要的方式操作 Controller 可调用对象（更改它、包装它，...）；
*   内核检查 Controller 实际上是一个有效的 PHP 可调用对象；
*   调用解析器来确定要传递给控制器​​的参数；
*   Kernel调用Controller；
*   如果Controller没有返回Response，kernel.view事件的监听者可以将Controller返回值转换为Response；
*   kernel.response 事件的监听器可以操作响应（内容和标题）；
*   返回响应。

如果在处理过程中抛出异常，kernel.exception 会被通知，并且监听器有机会将异常转换为响应。如果可行，则通知 kernel.response 事件；如果不是，则重新抛出异常。

如果您不希望捕获异常（例如对于嵌入式请求），请通过将 false 作为第三个参数传递给 handle() 方法来禁用 kernel.exception 事件。

# c# - 如何在 MessageBox 中获取列表？

> ID：10904390
> 
> 赞同：0
> 
> 时间：2012-06-05T20:24:34.460
> 
> 标签：c#, winforms

如何`string`在消息框的正文中显示列表的内容？

这是我到目前为止所拥有的：

```
List<string> a = new List<string> {}; 
foreach (DataGridViewCell cell in dgvC.SelectedCells) 
{ 
    a.Add(cell.Value.ToString()); 
} 

MessageBox.Show(a);  // doesn't work !? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T20:27:29.453

```
MessageBox.Show(string.Join(Environment.NewLine, a)); 
```

这是假设您收到的消息类似于“System.Collections.Generic.List`1[System.String]”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-05T20:29:28.253

MessageBox 需要字符串而不是列表

```
StringBuilder sb = new StringBuilder();
foreach (DataGridViewCell cell in dgvC.SelectedCells)
{
    sb.AppendLine(cell.Value.ToString()); 
}
MessageBox.Show(sb.ToString()); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-05T20:28:23.603

```
List<string> list = new List<string> {}; 

foreach (DataGridViewCell cell in dgvC.SelectedCells) 
{ 
a.Add(cell.Value.ToString()); 
} 

string s = String.Join(",", list);

MessageBox.Show(s); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-05T20:28:22.447

`MessageBox.Show`需要一个字符串。如果你需要这种格式，你可以像这样构建它：

```
StringBuilder builder = new StringBuilder();
foreach (DataGridViewCell cell in dgvC.SelectedCells.OrderBy(c => c.Index))
    builder.AppendLine(cell.Value);
}

MessageBox.Show(builder.ToString()); 
```

如果您需要更复杂的输出，您可能需要创建一个新表单来显示它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-05T20:33:34.433

尝试这个

```
StringBuilder builder = new StringBuilder();
foreach (DataGridViewCell cell in dataGridView1.SelectedCells)
{
    if (cell.ValueType == typeof(String))
    {
        builder.Append(cell.Value);
    } 
}
MessageBox.Show(builder.ToString()); 
```

请注意，如果您想避免投反对票，您将需要开始正确格式化您的问题。

我希望这有帮助。

**编辑：**或者...

```
StringBuilder builder = new StringBuilder();
for (int i = dataGridView1.SelectedCells.Count - 1; i >= 0; i--)
    if (dataGridView1.SelectedCells[i].ValueType == typeof(String))
        builder.Append(dataGridView1.SelectedCells[i].Value.ToString());
MessageBox.Show(builder.ToString()); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-05T20:28:20.017

MessageBox.Show 将字符串作为参数。

```
string result;
foreach (DataGridViewCell cell in dgvC.SelectedCells) 
{ 
   //choose one
   //result += cell.Value.ToString() + Environment.NewLine;
   //or
   result = cell.Value.ToString() + Environment.NewLine + result;
} 

MessageBox.Show(result); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-06-05T20:28:27.797

MessageBox 不能显示字符串以外的任何数据类型。您需要将列表格式化为字符串，例如：

```
MessageBox.Show(string.Join(", ", a.ToArray())); 
```

# javascript - GWT客户端文件上传

> ID：10904391
> 
> 赞同：0
> 
> 时间：2012-06-05T20:24:39.363
> 
> 标签：javascript, gwt, dom, uibinder

我可以上传一个带有 HTML 元素的文件，`inputfile`然后通过`FileReader`. 在调用`reader.readAsBinaryString(blob)`“切片文件”示例中所示的函数后，我现在需要访问 GWT 客户端代码中上传的文件字节流。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T10:50:26.443

使用 GWT 客户端的 File API，FileUpload 类；

类在 com.google.gwt.user.client.ui.FileUpload；

BR/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T23:30:17.023

您必须在服务器端存储字节，然后从 GWT 客户端调用服务器并检索字节。很可能是通过 RPC 调用。

请参阅[从 GWT 文件上传输入创建字节数组](https://stackoverflow.com/questions/4594783/create-byte-array-from-gwt-file-upload-input)

“出于安全原因，浏览器无法从您的文件系统中读取文件。（您可以使用 Flash 插件之类的插件来使其工作，尽管我手头没有示例）。”

# php - 省略基于 if 语句添加到数组

> ID：10904394
> 
> 赞同：2
> 
> 时间：2012-06-05T20:24:49.987
> 
> 标签：php

此代码创建一个数组并添加属性“payment_sum”，即使`$value['CardCode'] != $prevCode`为 false。您可以看到我正在打印用于测试的值，最后一行 509.85 正确求和，但根据此`if`语句应该省略之前的数组。

```
 if (($handle = fopen('upload/BEN-new.csv', "r")) === FALSE) {
            die('Error opening file'); 
         }

         $headers = fgetcsv($handle, 1024, ',');
         $cardCodes = array();
         $payments = array();
         $details = array ();

        while ($row = fgetcsv($handle, 1024, ",")) {
               $cardCodes[] = array_combine($headers, $row);
        }

            $prevCode = '';

            foreach ($cardCodes as $key => $value) {

                if ($value['CardCode'] != $prevCode) {
                    $payments['payment_sum'] = $value['InvPayAmnt'];
                }
                else {
                    $payments['payment_sum'] += $value['InvPayAmnt'];
                }

                    $prevCode = $value['CardCode'];
                    print_r ($payments);
            }
            fclose($handle); 
```

印刷...

```
 Array
     (
         [payment_sum] => 1055.40
     )

   Array
   (
         [payment_sum] => 550.00
   )

   Array
   (
         [payment_sum] => 100.00
    )

   Array
   (
        [payment_sum] => 287.33
   )
   Array
   (
       [payment_sum] => 509.85
   ) 
```

首选输出

```
 Array
     (
         [payment_sum] => 1055.40
     )

   Array
   (
         [payment_sum] => 550.00
   )

   Array
   (
         [payment_sum] => 100.00
    )

   Array
   (
       [payment_sum] => 509.85

         Array (
                  [currTotal] =>  287.33
                  [currTotal] =>  222.52
               )
   ) 
```

CSV

```
 BENV1072      1055.4
  BENV1073      550
  BENV5271      100
  BENV5635      287.33
  BENV5635      222.52 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:54:52.840

每次通过`for`循环，您要么设置`$payments['payment_sum']`为当前行的付款 ( `$value['InvPayAmnt']`)，要么将该行的付款添加到总数中。由于除最后一行之外的所有代码都与当前行的代码不同，因此您会一遍又一遍地覆盖运行总计。只有最后一行被添加到前一行的付款中，`509.85`作为结果。

您将`$payments`其视为单值变量而不是数组，因为您存储总数的键永远不会改变。您需要使用供应商 ID 作为键。

```
$payments = array();
foreach ($cardCodes as $key => $value) {
    $payments[$value['CardCode']] += $value['InvPayAmnt'];
}
print_r($payments); 
```

**输出**

```
Array
(
    [BENV1072] => 1055.4
    [BENV1073] => 550
    [BENV5271] => 100
    [BENV5635] => 509.85
) 
```

您可以轻松地让`$payments`数组跟踪文件中的单个付款以及总额。

```
$payments = array();
foreach ($cardCodes as $key => $value) {
    $payments[$value['CardCode']]['payments'][] = $value['InvPayAmnt'];
    $payments[$value['CardCode']]['total'] += $value['InvPayAmnt'];
}
print_r($payments); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:32:01.773

我认为这是因为两者`$value['CardCode']`都是`$prevCode`undefined 或[等价](http://php.net/manual/en/types.comparisons.php)的。我没有看到你`$prevCode`在使用它之前设置的任何地方，即使它在你的`if`声明中。在你的代码顶部，放`error_reporting(-1);`，你可能会看到一个通知。

# excel - 如何正确格式化这 1 行 Excel VBA 代码以过滤掉重复项？

> ID：10904396
> 
> 赞同：1
> 
> 时间：2012-06-05T20:24:51.017
> 
> 标签：excel, vba

我写了一行代码，直到我做了一点调整。问题是我不明白为什么我的调整会抛出错误：运行时错误1004，这个命令需要至少两行源数据....

工作代码行：

```
Range("E1", Range("E65536").End(xlUp)).AdvancedFilter Action:=xlFilterCopy, CopyToRange:=Range("J1"), Unique:=True 
```

损坏的代码：（LastRow 是一个长变量）

```
Range("E1", Range("E" & LastRow).End(xlUp)).AdvancedFilter Action:=xlFilterCopy, CopyToRange:=Range("J1"), Unique:=True 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:37:19.903

试试`Range("E1", "E" & LastRow).AdvancedFilter Action:=xlFilterCopy, CopyToRange:=Range("J1"), Unique:=True`。

`.End(xlUp)`当您已经引用最后一行时，您似乎正在使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T20:37:38.257

我一辈子都找不到评论链接，所以我很抱歉这不是评论。我相信 Excel 使用该 xlUp 来查找最后一行数据（而不是获取最后一行数据和实际最后一行之间的所有空白行 - 65536）。在您的调整中，您似乎已经从最后一行开始或知道最后一行，所以我不确定您是否需要使用 xlUp。我认为在第二个示例中，您可以取出“.End(xlUp)”。那行得通吗？在这种情况下，您还可以缩短对以下内容的引用：

```
Range("E1:E" & LastRow).AdvancedFilter... 
```

让我知道这是否有帮助或我是否有误解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T20:41:44.360

在我生成的假数据集上，您的代码的两个示例都出现错误。当我试图弄清楚选择了哪些范围时，我发现有时一个有用的技巧是使用 activate 方法。

试试这个

```
Range("E1", Range("E65536").End(xlUp)).Activate 
```

看看什么被选中。我不知道您的数据是什么样的，我不太确定您要选择什么范围，但我猜单元格 E65536 实际上是空的，所以 Range("E65536").End(xlUp ) 实际上与 Range("E1").End(xlDown) 相同。由于您的代码正在运行，我假设选择的内容将是一个包含多行的范围。

下次试试...

```
Range("E1", Range("E" & LastRow).End(xlUp)).Activate 
```

并查看您的工作簿以查看选择的内容。我不确定你是如何在没有看到所有代码的情况下定义 LastRow 的，但我敢打赌，被选中的只是一个单元格。坦率地说，我认为最好的解决方案（如果您确实想从 E1 开始并向下抓取所有行直到它们为空）是这样做：

```
Range("E1", Range("E1").End(xlDown)).AdvancedFilter Action:=xlFilterCopy, CopyToRange:=Range("J1"), Unique:=True 
```

如果这不是您想要的，请说明您想要什么样的范围，也许我们可以为您提供更好的工作。祝你好运！

# java - 使用 Spring Cache Abstraction 和 JDBC DAO 的事务

> ID：10904400
> 
> 赞同：4
> 
> 时间：2012-06-05T20:25:07.137
> 
> 标签：java, spring, caching, transactions, locking

我正在`@Cacheable`使用 EHCache 测试 Spring 的功能，但我找不到任何关于这是否适用于 Spring 的`@Transactional`注释的信息。

我在服务方法上`@Cacheable`放置`@CacheEvict`DAO方法。`@Transactional`

假设我的用户 DAO 看起来像这样：

```
@Cacheable(value="users", key="#id")
User find(BigInteger id);

@CacheEvict(value="users", key="#user.id")
void update(User user);

@CacheEvict(value="users", key="#id")
void delete(BigInteger id); 
```

例如，当在 removeFriend() 过程中调用 getUser() 时可能会出现问题，因为具有过时好友计数的用户将被重新缓存（或者会吗？）：

```
public User getUser(userId) {
    return userDao.find(userId);
}

@Transactional
public void removeFriend(userId, friendId) {
    friendDao.remove(friendId);
    user.setFriendCount(--numFriends);
    userDao.update(user);
    // do some other stuff
} 
```

如何确保在数据库事务完成之前不会更新缓存？`@CacheEvict`除了 DAO 方法之外，我还放置服务方法吗？或者，我是否向服务方法添加读/写锁定？如果是这样锁定，是否有任何库可以基于 id 锁定，因为我只想锁定每个用户而不是全局锁定，例如`@GuardedBy("userLocks.getReadLock(#userId)")`？是否有一种普遍接受的方式来处理缓存和事务？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T20:59:35.510

我应该多看看 EHCache 文档，因为答案就[在这里](http://www.ehcache.org/generated/2.10.0/html/ehc-all/#page/Ehcache_Documentation_Set%2Fco-tx_configuring_transactional_cache.html%23)。

EHCache 2.4+ 使用 Spring 的 @Transactional 注释。只需要配置一个事务管理器查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T02:03:25.897

文档没有提到缓存抽象与其他注释驱动的 Spring 特性有任何交互。

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/cache.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/cache.html)

缓存抽象是相当新的，目前范围似乎相当小。

您很可能需要重新构建代码，以便以更符合您的操作顺序的方式使用缓存。

# android - 安全背景尺寸

> ID：10904407
> 
> 赞同：1
> 
> 时间：2012-06-05T20:25:40.113
> 
> 标签：android

所以我想使用 png 作为我的 android 应用程序的背景。

![示例背景](../Images/4a087cb8497fa9bca23e34898fa66380.png)

条件是最大的雪花：

![大雪花](../Images/ea32b9ca7c1cc7854f14fbb42b04f42b.png)

总是在右上角。我只能按比例缩放图像，否则，雪花最终会看起来像一堆我不知道是什么：

![荆棘](../Images/7f08ca8a50c453df27d3d6553c8b718c.png)

鉴于可用的设备分辨率和 dpi 过多，实现我想要的合理方法是什么？

**更新：** 我知道 9-patch。但是我的背景不能用 9-patch 来表达。充其量，我能做的是将源包含在尽可能大的维度中（按比例）。就我而言，源的大小为 1920X2400。重新表述我的问题，我的应用程序中包含的最安全的尺寸（统一缩放）是多少？

这是一个例子：

![非 9Patch 可绘制](../Images/b783c7aef0d3f897cc66e76d5d284df8.png)

> 原作者的图像版权。此处使用，仅用于说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:36:56.160

使用 9 补丁。见[这里](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)。这里是如何制作一个[。](http://developer.android.com/guide/developing/tools/draw9patch.html)它们仅缩放您定义为可缩放的图像部分并保留其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:40:29.893

我会这样做：用于`RelativeLayout`将图像设置在其父容器的右上角，并根据屏幕大小按比例调整图像大小

例子：

```
<RelativeLayout xmlns:android="schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent" >
     <ImageView android:id="@+id/imageView1" android:layout_width="match_parent" android:layout_height="match_parent" android:layout_alignParentRight="true" android:layout_alignParentTop="true" android:src="@drawable/expander_close_holo_dark" /> 
</RelativeLayout> 
```

只要您通过`android:src`android 提供图像，它就会自动调整其大小并保留比例。

# php - PHP Mysql 更新

> ID：10904415
> 
> 赞同：1
> 
> 时间：2012-06-05T20:26:30.907
> 
> 标签：php, mysql, database-design

我有一个数据库，用户可以在其中输入任意数量的兴趣。当他们去更新它时，他们可以删除他们以前的兴趣之一。

这应该如何处理？更新是否应该从数据库中删除他们以前的所有兴趣，然后插入他们更新的兴趣？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:29:04.887

这就是我通常做的：删除所有现有记录并添加新记录。如果它是一个简单的交叉引用表，这是最简单的事情。如果有重要的 id 字段，您可能需要执行其他操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:33:52.240

如果您的兴趣池未存储在单独的表中，则可以使用标志方法：

用户表（示例）

```
user_id int(8) AUTO_INCREMENT
user_name varchar(255)
user_email varchar(255) 
```

用户兴趣表（示例）

```
interest_name varchar(255)
user_id int(8)
interest_status tinyint(1) 
```

兴趣状态可以是 1（表示活跃兴趣）或 0（表示以前的兴趣）

另一方面，如果您也有兴趣池和二元关联表可供选择，则将其更改`interest_name`为`interst_id`它所代表的。删除所有旧记录并使用问题标志重新插入它们。这通常是更容易做的事情，而且更不容易出错。

# python - Python：smtplib 发送邮件功能

> ID：10904418
> 
> 赞同：2
> 
> 时间：2012-06-05T20:26:35.520
> 
> 标签：python, google-app-engine, sendmail, smtplib

我有一个激活邮件发送脚本如下。

```
#!/usr/bin/python

__author__ = 'Amyth Arora (***@gmail.com)'

import smtplib
import string
import sys
import random

from email.MIMEText import MIMEText

def generate_activation_key(size=64, chars=string.ascii_lowercase + string.digits):
  return ''.join(random.choice(chars) for x in range(size))

def generate_activation_url(key):
  return 'http://www.example.com/users/activate/' + key

def Activate(name, to_addr):
  sender, reciever = 'mymail@gmail.com', to_addr
  act_url = generate_activation_url(generate_activation_key())
  main_mssg = """
  Dear %s,

  Thakyou for creating an account with Example.com. You are now just one click away from using your example account. Please click the following link to verify this email address and activate your account. 

  Please Note, You must complete this step to become a registered member of example. you will only need to visit this url once in order to activate your account.

  ============================
  Activation Link Below:
  ============================

  %s

  if you are facing problems activating your account please contact our support team at
  support@example.com

  Best Regards,

  Example Team
  """ % (name, act_url)

  message = MIMEText(main_mssg)
  message['From'] = 'Example <' + sender + '>'
  message['To'] = reciever
  message['MIME-Version'] = '1.0'
  message['Content-type'] = 'text/HTML'
  message['Subject'] = 'Activate Your Example Account'
  try:
    smtpObj = smtplib.SMTP('smtp.gmail.com', 587)
    smtpObj.set_debuglevel(1)  # Swith On/Off Debug Mode
    smtpObj.ehlo()
    smtpObj.starttls()
    smtpObj.ehlo()
    smtpObj.login('mymail@gmail.com', 'mypass')
    smtpObj.sendmail(sender, reciever, message.as_string())
    smtpObj.close()
    return act_url
  except:
    return None

def main(argv):
  if len(argv) != 2:
    sys.exit(1)
  Activate(argv[0], argv[1])

if __name__ == '__main__':
  main(sys.argv[1:]) 
```

该脚本工作正常，因为我已经通过这样的命令行尝试过它：

```
./scriptname 'Reciepent Name' 'reciepent@gmail.com' 
```

但是我想像这样从我的一个应用程序处理程序中调用激活脚本。

```
import activation

act_key = activation.Activate('Reciepent Name', 'reciepent@gmail.com') 
```

但是当我这样做时，脚本会返回`None`。谁能弄清楚如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T20:41:17.400

App Engine 不允许用户使用 smtplib 库发送电子邮件。相反，您需要使用提供的 api。可以在此处找到文档：[https ://developers.google.com/appengine/docs/python/mail](https://developers.google.com/appengine/docs/python/mail)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T21:09:13.347

如果您只需要发送激活电子邮件，我的[AE-BaseApp](http://ae-baseapp.appspot.com)项目就有一个可以使用的工作示例。 [AE-BaseApp/Python](http://ae-baseapp.appspot.com/python)有一个指向我的 Github 存储库的链接，您可以在其中 fork 或下载代码。我还有一个工作处理程序来接收/回复邮件。

# javascript - Jquery浮动图不绘图

> ID：10904419
> 
> 赞同：1
> 
> 时间：2012-06-05T20:26:37.033
> 
> 标签：javascript, jquery, charts, flot

我有以下JS数据：

```
var store = [];
store.push([new Date('2012-01-01'), 2]);
store.push([new Date('2012-01-02'), 3]);
store.push([new Date('2012-01-03'), 4]);
store.push([new Date('2012-01-04'), 6]);
store.push([new Date('2012-01-05'), 3]);
store.push([new Date('2012-01-06'), 4]);
store.push([new Date('2012-01-07'), 2]);
store.push([new Date('2012-01-08'), 1]);
store.push([new Date('2012-01-09'), 4]);
store.push([new Date('2012-01-10'), 2]);
store.push([new Date('2012-01-11'), 3]);
store.push([new Date('2012-01-12'), 6]);
store.push([new Date('2012-01-13'), 2]);
store.push([new Date('2012-01-14'), 5]);
store.push([new Date('2012-01-15'), 4]);
store.push([new Date('2012-01-16'), 2]);
store.push([new Date('2012-01-17'), 6]);
store.push([new Date('2012-01-18'), 6]);
store.push([new Date('2012-01-19'), 1]);
store.push([new Date('2012-01-20'), 1]);
store.push([new Date('2012-01-21'), 1]);
store.push([new Date('2012-01-22'), 8]);
store.push([new Date('2012-01-23'), 8]);
store.push([new Date('2012-01-24'), 13]);
store.push([new Date('2012-01-25'), 5]);
store.push([new Date('2012-01-26'), 5]);
store.push([new Date('2012-01-27'), 1]);
store.push([new Date('2012-01-28'), 1]);
store.push([new Date('2012-01-29'), 2]);
store.push([new Date('2012-01-30'), 6]); 
```

浮动代码：

```
$.plot($('.chart'), store); 
```

HTML：

```
<div class="chart"></div> 
```

我在 x 和 y 上的轴只显示从 -1 到 1.. 我根本看不到绘图。我哪里错了？

![在此处输入图像描述](../Images/2f8df39a7e050fbd5d599fcd4762d198.png)

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:54:31.047

我遇到了这个问题，我认为您需要将数组包装在另一个数组中...

```
$.plot($('.chart'), [store]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T20:47:52.780

尝试这个 ：

```
<html>
<head>
   <script language="javascript" type="text/javascript" src="jquery.js"></script>
   <script language="javascript" type="text/javascript" src="jquery.flot.js"></script>
</head>
<body>
    <div class="chart"></div>
    <script type="text/javascript">
        $(function () {
            var store = [];
            store.push([new Date(2012, 1, 1)).getTime(), 2]);
            .
            .
            .
            store.push([(new Date(2012, 1, 30)).getTime(), 6]);

            $.plot($('.chart'), store, {
                grid: {hoverable: true},
                xaxis: {
                    mode: "time",
                    timeformat: "%d.%m.%y",
                        minTickSize: [1,"day"],
                    min: (new Date(2012, 1, 1)).getTime(),
                    max: (new Date(2012, 1, 30)).getTime()
                },
                yaxis: {
                    mode: "number",
                    tickSize: 1
                },
                series: {
                    lines: { show: true },
                    points: { show: true }
                }
            });
        });
    </script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T21:08:42.910

您需要将 x 轴模式设置为“时间”，并将日期作为时间戳提供（以毫秒为单位）。有关更多信息，请参阅“时间序列数据”标题下的[API 文档。](http://people.iola.dk/olau/flot/API.txt)

# android - 我可以在我的应用程序的每个选项菜单中添加一个设置按钮吗？

> ID：10904426
> 
> 赞同：0
> 
> 时间：2012-06-05T20:26:59.827
> 
> 标签：android, settings, preferences, android-optionsmenu

我想在我的应用程序的选项菜单中添加一个设置按钮。我是否必须为每个 Activity 执行此操作，还是可以全局设置一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:41:25.447

您可以从 Activity 扩展，将您的菜单逻辑放在那里，并使您的所有活动都从新类扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:36:25.257

你可以@Override

```
public boolean onCreateOptionsMenu(Menu menu) {
menu= Aclass.options(menu);
return(super.onCreateOptionsMenu(menu));

} 
```

在每个活动中，其中 Aclass.options(menu) 是一个静态返回方法，用于向菜单添加常用选项。或者，您可以

如果您有几十个活动，[这是一个很好的解决方案](https://stackoverflow.com/questions/3270206/same-option-menu-in-all-activities-in-android)

# spring - Spring MVC OpenSessionInViewInterceptor 不工作

> ID：10904427
> 
> 赞同：1
> 
> 时间：2012-06-05T20:27:03.070
> 
> 标签：spring, hibernate, spring-mvc

我一直在为此绞尽脑汁。我暂时把它放在一边，但现在是时候重新拿起它了。简短的版本是这样的：虽然我在 dispatcher-servlet.xml 文件中配置了 OpenSessionInViewInterceptor，但我仍然得到了可怕的 LazyIntializationException。

现在，关于细节。

我在 dispatcher-servlet.xml 中配置了 OSIV 拦截器，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
   http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd"
default-lazy-init="true">

<import resource="applicationContext.xml" />

<!-- This MUST be defined here or the DispatcherServlet will act a bit funky -->
<context:component-scan base-package="org.me.app.web.controller" />

<!-- Configures the @Controller programming model -->
<mvc:annotation-driven />

<!-- Convenient way to map URLs to JSPs w/o having a Controller -->
<mvc:view-controller path="/index.html" view-name="index" />
<mvc:view-controller path="/UserAgreement.html"
    view-name="UserAgreement" />

<mvc:interceptors>
    <mvc:interceptor>
        <mvc:mapping path="/**/*.html" />
        <bean
            class="org.springframework.orm.hibernate4.support.OpenSessionInViewInterceptor">
            <property name="sessionFactory" ref="sessionFactory" />
        </bean>
    </mvc:interceptor>
</mvc:interceptors> 
```

Hibernate SessionFactory 和 TransactionManager bean 在常规 applicationContext.xml 文件中定义：

```
<tx:annotation-driven />
<tx:advice id="transactionAdvice" transaction-manager="transactionManager">
    <tx:attributes>
        <tx:method name="get*" read-only="true" propagation="REQUIRED"/>
        <tx:method name="load*" read-only="true" propagation="REQUIRED"/>
        <tx:method name="*" propagation="REQUIRED"/>
    </tx:attributes>
</tx:advice>

<aop:config>
    <aop:pointcut expression="execution(* *.manager.*Manager.*(..))" id="serviceOperations"/>
    <aop:advisor advice-ref="transactionAdvice" pointcut-ref="serviceOperations" />
</aop:config>

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
            <prop key="hibername.format_sql">true</prop>
            <prop key="hibernate.show_sql">false</prop>
            <prop key="hibernate.cglib.use_reflection_optimizer">true</prop>

        </props>
    </property>
    <property name="packagesToScan" value="org.me.app.model" />
</bean>

<bean id="transactionManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="dataSource" ref="dataSource" />
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

使用 Spring 3.1.1 和 Hibernate 4.1。

任何帮助，将不胜感激。

杰森

编辑：根据建议，我尝试切换到过滤器而不是拦截器。我注释掉了 dispatch-servlet.xml 的整个部分，并将以下内容添加到 web.xml（还显示了其他过滤器和过滤器映射）：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:applicationContext.xml
            classpath:security.xml
    </param-value>
</context-param>

<filter>
    <filter-name>osiv</filter-name>
    <filter-class>org.springframework.orm.hibernate4.support.OpenSessionInViewFilter</filter-class>
</filter>
<filter>
    <filter-name>sitemesh</filter-name>
    <filter-class>com.opensymphony.module.sitemesh.filter.PageFilter</filter-class>
</filter>
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<!-- This filter checks to see if the user has accepted terms -->
<filter>
    <filter-name>acceptTermsFilter</filter-name>
    <filter-class>org.me.web.filter.terms.AcceptTermsFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>osiv</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>sitemesh</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter-mapping>

<filter-name>acceptTermsFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<listener>

    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:54:24.917

我假设您正在使用 OSIV 来扩展 jsp 视图中的关系 - 如果是这种情况，那么拦截器可能无法工作，因为拦截器在呈现视图之前完成了它们的处理，在这种特定情况下，在 jsp 之前由容器呈现的休眠会话将被关闭。

更好的方法可能是使用 OSIV 过滤器——`org.springframework.orm.hibernate4.support.OpenSessionInViewFilter`它也将支持 jsp 中的惰性关系。

**更新：**我注意到的一件事是您在 dispatcher-servlet.xml 文件中导入了 applicationContext.xml，最好不要在 dispatcher-servlet.xml 中导入 applicationContext.xml，而是使用 ContextLoaderListener 加载它：

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:META-INF/spring/applicationContext*.xml</param-value>
</context-param> 
```

然后正常加载 dispatcher-servlet.xml 的其余部分。我之所以这么说是因为只有通过这条路线才能将其`root application context`注册为单例并且可供`sessionFactory`OSIV 过滤器检测到休眠状态。你能也试试这个，看看效果如何

# jquery-mobile - jquery mobile require.js 和骨干网

> ID：10904433
> 
> 赞同：16
> 
> 时间：2012-06-05T20:27:21.767
> 
> 标签：jquery-mobile, backbone.js, requirejs

我真的在为 require.js 和 jquery mobile 苦苦挣扎。我有一个基于松散的文件结构和加载模式

[https://github.com/appboil/appboil-requirejs-backbonejs-jquerymobile-phonegap](https://github.com/appboil/appboil-requirejs-backbonejs-jquerymobile-phonegap)

但它已经过时了，我不得不对 require 2.0 版本进行调整。是否有社区接受的方式将 jquery mobile、backbonejs 和 requirejs 一起使用？我想使用骨干网的路由而不是 jquery 手机。此外，该模板有phonegap，我不关心。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-08T18:01:29.613

这是我使用的 main.js 文件...

```
require.config({
  baseUrl: "/js/",
  paths: {
    jquery: 'libs/jquery/jquery-1.7.1',
    'jquery.mobile-config': 'libs/jqm/jquery.mobile-config',
    'jquery.mobile': 'libs/jqm/jquery.mobile-1.1.0',
    'jquery.mobile.asyncfilter': 'libs/jqm/asyncfilter',
    underscore: 'libs/underscore/underscore-1.3.3',
    backbone: 'libs/backbone/backbone-0.9.2',
    templates: '../templates'
  },
  shim: {
          'underscore': {
            exports: "_"
          },
          'backbone': {
              //These script dependencies should be loaded before loading
              //backbone.js
              deps: ['jquery','underscore'],
              //Once loaded, use the global 'Backbone' as the
              //module value.
              exports: 'Backbone'
          },
          'jquery.mobile-config': ['jquery'],
          'jquery.mobile': ['jquery','jquery.mobile-config'],
          'jquery.mobile.asyncfilter': ['jquery.mobile'],
        }
});

require([
  'jquery',
  'app',
  'jquery.mobile','jquery.mobile.asyncfilter'
], function( $, App ){
    $(function(){
      App.initialize();
    });
}); 
```

最后一点对于让 JQM 正确加载（并实际运行）非常重要。这部分：

```
require([
      'jquery',
      'app',
      'jquery.mobile','jquery.mobile.asyncfilter'
    ], function( $, App ){
        $(function(){
          App.initialize();
        });
    }); 
```

由于我需要 jquery for jqm (jquery mobile)，我将全部加载它们，并且由于上面的 shim 代码，依赖项以正确的顺序加载。我实际上并没有将任何 jqm 变量传递给函数调用，它只传递 $ 和 App. 下一个重要部分是 jqm-config 文件：

```
define(['jquery'], function ($) {
      $(document).on("mobileinit", function () {
          $.mobile.ajaxEnabled = false;
          $.mobile.linkBindingEnabled = false;
          $.mobile.hashListeningEnabled = false;
          $.mobile.pushStateEnabled = false;
      });
}); 
```

您可以将 jqm 的所有预初始化代码放在该文件中。毕竟，你应该可以使用 jqm 了！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T06:22:37.560

您可以查看最近发布的[主干js 样板](https://github.com/gfranko/Backbone-Require-Boilerplate)或查看 christophe 的[主干目录](https://github.com/ccoenraets/backbone-directory)，其中包含启动基本应用程序所需的所有内容。

## 编辑

[https://github.com/raDiesle/backbone.js-jquerymobile-boilerplate-template](https://github.com/raDiesle/backbone.js-jquerymobile-boilerplate-template)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T14:45:04.793

我刚刚在 jQuery Mobile 文档中添加了一个主干.js、require.js 和 jQuery Mobile 小示例应用程序。让我知道这是否有帮助：

[http://demos.jquerymobile.com/1.4.4/backbone-requirejs/backbone-require.html](http://demos.jquerymobile.com/1.4.4/backbone-requirejs/backbone-require.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T21:01:33.410

如果您使用 r.js、requirejs 优化器，这是一个关于 jquery.mobile 和配置问题的兴趣链接： [https ://github.com/jrburke/requirejs/issues/358](https://github.com/jrburke/requirejs/issues/358)

# javascript - MongoDB - 不明白如何使用游标遍历集合

> ID：10904436
> 
> 赞同：12
> 
> 时间：2012-06-05T20:27:31.420
> 
> 标签：javascript, mongodb, mongoid

```
advertisers = db.dbname.find( 'my query which returns things correctly' ); 
```

我现在意识到它会将光标返回到集合列表。

但我不确定如何遍历它们并获取每个集合。

我想尝试这样的事情：

```
advertisers.each(function(err, advertiser) {
    console.log(advertiser);
}); 
```

但这不起作用。但是我在网上搜索并没有看到如何使它与简单的 JavaScript 一起工作。

然后我有这个代码：

```
var item;

if ( advertisers != null )
{
   while(advertisers.hasNext()) 
   { 
      item = advertisers.next();
   }
} 
```

它给出了这个错误：`SyntaxError: syntax error (shell):1`

非常感谢帮助！

谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-05T20:29:42.370

快速而肮脏的方法是：

```
var item;
var items = db.test.find();
while(items.hasNext()) {
   item = items.next();
   /* Do something with item */
} 
```

还有更实用的：

```
items.forEach(function(item) {
   /* do something */
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-26T08:02:40.540

循环遍历集合的另一种方法是使用 toArray 游标的方法：

```
var results = db.getCollection('posts').find({}).toArray();

for(var i = 0; i <= results.length -1; i++)
{
    print("Author is:" + results[i].Author);
}
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-24T18:27:44.047

由于您没有显示堆栈，因此我假设您的问题是您传递给 find 函数的参数，此参数必须是 JavaScript 对象，因此：

```
var query = {
    key: 'my query which returns things correctly'
}

advertisers = db.dbname.find(query);
advertisers.each (function(err, doc){

    //.... error code not included.....
    console.log(doc);
}); 
```

# mongodb - 在 MongoDB 中构造计数查询

> ID：10904438
> 
> 赞同：0
> 
> 时间：2012-06-05T20:27:45.760
> 
> 标签：mongodb, nosql

我有一个 MongoDB 数据库，其中包含如下所示的文档：

```
{"users" : ["u1", "u2", "u3"]}
{"users" : ["u1", "u4"]}
{"users" : ["u1", "u3", "u5", "u6", "u7"]} 
```

我想获得用户数量较多的文档的计数。使用上述内容，查询将返回 5 作为数据库中的最高用户数。我怎样才能在 MongoDB 中做到这一点？

我可以通过以下方式获取特定大小的文档数量：

```
db.mydb.find({users: {$size: 5}}).count() 
```

但是，我不知道如何在用户数组中的所有文档中找到最大的计数。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:30:31.147

您不能直接在 MongoDB 中执行此操作。但是，您可以在同一个文档中添加一个名为“user_count”的额外字段，并在每次将新用户添加到“users”数组时[使用 $inc 运算符将其加一。](http://www.mongodb.org/display/DOCS/Updating#Updating-%24inc)

您的更新将类似于：

```
db.mydb.update({<update_condition>}, {$push :{"users":"u8"}, $inc : {"user_count":1}}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:54:13.063

以下是 MongoDB 中的三个工作解决方案，但 Asya 的答案可能更合适，具体取决于您的工程需求。您应该回答以下问题：我的收藏有多大，每种潜在解决方案的成本/效率是多少？还有其他性能问题吗？我可以通过在问题域中记账来更有效地解决这个问题吗？

如果这是一个常见问题，您应该考虑通过您的应用程序显式跟踪最大计数。为了增加用户，您只需跟踪最大值。但是（仅）如果文档从当前最大值减少，您必须支付完整查询的费用。Asya 的解决方案可能仍然有助于完成这个完整的查询。

这是 MongoDB 的可能性。请根据您的问题和性能或工程影响仔细检查文档。

1.  db.eval 服务器大小的代码执行 - [http://www.mongodb.org/display/DOCS/Server-side+Code+Execution](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution)

    注意：对于长时间运行的作业，请使用 map/reduce 而不是 db.eval()。db.eval 阻止其他操作！

2.  聚合“组” - [http://www.mongodb.org/display/DOCS/Aggregation](http://www.mongodb.org/display/DOCS/Aggregation)

3.  MapReduce - [http://www.mongodb.org/display/DOCS/MapReduce](http://www.mongodb.org/display/DOCS/MapReduce)

count_query.js

```
db.mydb.drop();
db.mydb.save({"users" : ["u1", "u2", "u3"]});
db.mydb.save({"users" : ["u1", "u4"]});
db.mydb.save({"users" : ["u1", "u3", "u5", "u6", "u7"]});
//printjson(db.mydb.find().toArray());

printjson(db.eval(function() {
    var count = 0;
    db.mydb.find().forEach( function(doc) {
        if (doc.users.length > count)
            count = doc.users.length;
    });
    return count;
}));

printjson(db.mydb.group({
    reduce: function(doc, prev) {
        if (doc.users.length > prev.count)
            prev.count = doc.users.length;
    },
    initial: {count: 0}
})[0].count);

printjson(db.mydb.mapReduce(
    function() { emit(0, {count: this.users.length}); },
    function(key, values) {
        var result = {count: 0};
        values.forEach(function(value) {
            if (value.count > result.count)
                result.count = value.count;
        });
        return result;
    },
    {out: {inline: 1}}  
).results[0].value.count); 
```

执行和输出

```
$ mongo count_query.js
MongoDB shell version: 2.0.4
connecting to: test
5
5
5 
```

# actionscript-3 - 使用 NetStream 寻找/停止/播放嵌入式 flv 作为 byteArray

> ID：10904442
> 
> 赞同：0
> 
> 时间：2012-06-05T20:28:21.353
> 
> 标签：actionscript-3, bytearray, flv, netstream

我已经将几个 flv 编码为一个字节数组并将它们保存到单独的文件中。我的项目是一个投影仪项目，它从本地驱动器加载文件，所以我不是真的在流式传输。

我加载文件并对其进行解码并将其保存为字节数组。然后我在我的 netstream 对象上使用`.appendBytes()`和`.appendBytesAction( NetStreamAppendBytesAction.RESET_BEGIN )`，但我无法像以前那样在编码`.flv`文件之前搜索、播放和停止我的视频。

如何在不让我的 NS 对象刷新缓冲区的情况下正确搜索我的视频？

# c# - 使用 C# 控制 VLC\MediaMonkey？

> ID：10904447
> 
> 赞同：1
> 
> 时间：2012-06-05T20:28:43.513
> 
> 标签：c#, vlc

我正在编写一个应用程序，它允许您控制 VLC 和\或 Media Monkey，而无需与应用程序本身进行交互。我遇到的问题是我现在使用的方法使用 WM_APPCOMMAND，它只适用于 Windows Media Player。

我进行了很多搜索，但似乎找不到让我在控制台应用程序中全局发送全局媒体密钥（如在 VK_MEDIA_PLAY_PAUSE 中）的解决方案。人们说要做到这一点的唯一方法是首先将应用程序置于前台。

这是我到目前为止所拥有的：

```
public static extern IntPtr SendMessageW(IntPtr hWnd, int Msg, IntPtr wParam, IntPtr lParam);    

SendMessageW(handle, WM_APPCOMMAND, handle, (IntPtr)APPCOMMAND_MEDIA_PLAY_PAUSE); 
```

我应该注意，这是我只是为了个人使用而一起破解的东西，所以它不需要是一个简单的修复，只要一个有效的修复即可。

提前致谢

**编辑：** 如果有人正在寻找解决方案，这就是我必须做的：

```
private const int WM_KEYDOWN = 0x0100;
[DllImport("user32.dll")]public static extern IntPtr PostMessage(IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);
[DllImport("user32.dll", SetLastError = true)] static extern IntPtr FindWindow(string lpszClass, string lpszWindow);

IntPtr vlc = FindWindow(null, "VLC Media Player");
PostMessage(vlc, WM_KEYDOWN, ((IntPtr)Keys.P), IntPtr.Zero); 
```

# javascript - 使用 xml2js 解析 xml 的节点

> ID：10904448
> 
> 赞同：11
> 
> 时间：2012-06-05T20:28:45.643
> 
> 标签：javascript, xml, node.js, xml-parsing

我正在尝试使用 xml2js 解析和查询 xml 中的元素。我的xml字符串如下：

```
var xml = "<config><test>Hello</test><data>SomeData</data></config>"; 
```

我想要的是提取值并将其分配给`var extractedData`

这是我到目前为止所拥有的：

```
var parser = new xml2js.Parser();
parser.parseString(xml, function(err,result){
  //Extract the value from the data element
  extractedData = result['data'];
} 
```

这不起作用。有人可以指出我如何能够从我的 xml 中获取值吗？

谢谢

这似乎不起作用。有人可以告诉我这里可能是什么问题吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-06T04:41:03.043

这个对我有用

```
var xml2js = require('xml2js');
var xml = "<config><test>Hello</test><data>SomeData</data></config>";

var extractedData = "";
var parser = new xml2js.Parser();
parser.parseString(xml, function(err,result){
  //Extract the value from the data element
  extractedData = result['config']['data'];
  console.log(extractedData);
});
console.log("Note that you can't use value here if parseString is async; extractedData=", extractedData); 
```

结果：

```
SomeData
Note that you can't use value here if parseString is async; extractedData= SomeData 
```

# php - php 三个下拉过滤器

> ID：10904449
> 
> 赞同：0
> 
> 时间：2012-06-05T20:28:47.830
> 
> 标签：php

我有一个名为分类的表，它包含以下内容：

*   ID
*   标题
*   描述
*   state_id
*   city_id
*   cat_id

这是从数据库动态填充的。

```
<form name="theForm" method="post" action="advanced_search.php">
    <input type="submit" name="Submit" value="Search" />
    <select name="categories" >
        <option value=""> Select Category</option>
    </select>
    <select name="state" >
        <option value=""> Select state</option>
    </select>
    <select name="city" >
        <option value=""> Select city</option>
    </select>
    ... 
```

当我选择一个类别并单击搜索时，将显示该类别的结果。如果我选择一个类别和一个状态，那么我希望它过滤到指定的类别和状态。如果选择了一个城市，也会发生同样的情况。

例如：如果我选择明尼阿波利斯市的就业类别，则搜索应过滤到该城市的所有就业。

使用下面的代码，它需要选择所有下拉列表才能使过滤器正常工作。如果我想在指定状态下显示一个类别的所有结果怎么办？如果我只想按类别过滤怎么办？

```
if (isset($_POST['Submit'])) {
    $state = $_POST['state'];
    $city = $_POST['city'];
    $categories = $_POST['categories'];

    $select = "SELECT * FROM classifieds";
    $where = " WHERE ( authorized = '1')";

    $where .= " AND (cat = '" . $categories . "' AND state_id = '" . $state . "' AND city_id = '" . $city . "')";

    $where .= " AND (state_id = '" . $state . "' )";
    $where .= " AND (city_id = '" . $city . "' )";
    $q = $select . $where . ' ORDER BY date DESC'; 
```

有人可以帮我完成这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:32:39.660

只有在他们选择了某些东西时才添加 where 子句：

```
$select = "SELECT * FROM classifieds";
$where = " WHERE ( authorized = '1')";
if($categories) {
    $where .= " AND (cat = '" . $categories . "' )";
}
if($state) {
    $where .= " AND (state_id = '" . $state . "' )";
}
if($city) {
    $where .= " AND (city_id = '" . $city . "' )";
}
$q = $select . $where . ' ORDER BY date DESC'; 
```

# sitecore - Sitecore 仅返回当前语言版本的项目

> ID：10904457
> 
> 赞同：0
> 
> 时间：2012-06-05T20:29:28.730
> 
> 标签：sitecore

**图例**：我正在开展一个 Sitecore 项目，在该项目中，我们有一个具有单一内容树的多语言站点，其中大多数项目都有每种支持语言的版本。我想开发一种查询项目的简洁方法，该方法将排除当前上下文语言中没有版本的项目。

**想法**：我正在考虑使所有模板都从具有共享复选框列表字段的模板继承，以表示给定页面支持的语言。

*注意*：为了清楚起见，这与语言后备不同。我们想要*隐藏*尚未翻译成上下文语言的项目。

**问题**：是否有一种使用 Sitecore 管道的干净方法来执行此操作，这意味着 XSLT 和任何查询内容树的 API 代码不必每次都引用此共享模板字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:25:59.863

在 Sitecore Query 中没有很好的查询方法。您可以像这样从查询结果中检测和过滤它：

```
IEnumerable<Item> items = // some code
myItems.Where(x => x.Versions.Count > 0); 
```

如果您希望在返回所有项目之前进行过滤，您的复选框想法是一种可能的解决方案，但当然容易与实际语言不同步。您还可以查看使用 Lucene 和 Advanced Database Crawler 模块将 DynamicField 打包到包含随后可以查询的版本的语言列表的索引中。当然，lucene 并不总是适合通用查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:24:59.357

前段时间我也遇到过类似的问题。就我而言，我希望没有任何特定语言版本的页面返回 404 Page Not Found 而不是空白页面。我创建了一篇关于这个问题的博客文章，你可以找到[http://www.cognifide.com/blogs/sitecore/sitecore-displaying-pages-without-a-language-version/](http://www.cognifide.com/blogs/sitecore/sitecore-displaying-pages-without-a-language-version/)

在您的情况下，我会说您不需要为您的页面添加任何复选框，只需检查 ig **Item.Versions.Count**是否大于 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T20:24:57.697

您还可以使用 Alex Shyba 的 Partial Language Fallback Module 并将网站的 enforceVersionPresence 设置为 true，并在 Fallback.EnforceVersionPresenceTemplates 中指定基本模板 guid（例如在每个页面中使用的基本模板）。在基本的 GetItem 数据库命令中，他的代码将检查是否有当前上下文语言的语言版本，如果没有，则返回 null，这将自动从 sitecore 返回 404。

通过使用它而不是在 httpBeginRequest 管道中检查的东西，它还可以防止在使用 GetChildren 和多列表字段的 GetItems 方法时返回项目。

我在这里有一篇关于语言回退和强制版本存在主题的 10 篇博客系列文章：[http ://www.sitecore.net/Community/Technical-Blogs/Elizabeth-Spranzani/Posts/2014/03/Fallback-Series-Post -3.aspx](http://www.sitecore.net/Community/Technical-Blogs/Elizabeth-Spranzani/Posts/2014/03/Fallback-Series-Post-3.aspx)

谢谢，丽兹

# android - 如何将我的应用程序注册为 Android 默认照片查看器？

> ID：10904462
> 
> 赞同：0
> 
> 时间：2012-06-05T20:29:45.147
> 
> 标签：android, android-widget, android-manifest

我的照片查看器应用程序加载照片文件并显示它。现在如何将其注册为 Android 系统中的默认查看器？

例如，现在如果我点击画廊中的一张照片，它会显示许多要使用的应用程序，我选择了一个在 Android 系统中显示。如何注册我的申请以成为其中之一？

我必须修改我的代码以允许这样做吗？目前我的应用程序只是加载存储在 sdcard 中的照片。

# ruby - 是否可以使用 %w[] 简写在数组中创建一个 nil 值？

> ID：10904463
> 
> 赞同：5
> 
> 时间：2012-06-05T20:29:53.120
> 
> 标签：ruby, arrays

假设我想创建一个带有 的数组，是否可以使用速记语法`["one", "two", nil]`来做到这一点？`%w[]`显然这不起作用：

```
array = %w[one two nil]
=> ["one", "two", "nil"]
array[2].nil?
=> false 
```

红宝石 1.9.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T20:42:31.277

不。这种方便语法的全部目的是避免在字符串文字和分隔符逗号周围加上引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:56:12.060

你可以 splat`%w[]`数组并把它放在`nil`后面：

```
>> array = [ *%w[one two], nil, *%w[and some more words] ]
=> ["one", "two", nil, "and", "some", "more", "words"] 
```

但这可能比单独引用字符串更嘈杂。OTOH，额外的噪音确实表明正在发生一些奇怪的事情，因此鼓励读者仔细观察。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T20:53:44.247

只是间接的。您可以创建数组，然后使用 Array#collect 将字符串“nil”转换为实际的 nil：

```
array = %w[one two nil].collect { |v| v == 'nil' ? nil : v } 
```

# c++ - 自定义字符串类和析构函数？

> ID：10904466
> 
> 赞同：0
> 
> 时间：2012-06-05T20:30:01.797
> 
> 标签：c++, destructor

我今天很无聊，我想创建自己的小字符串类。我真的很喜欢 .Net 中的“System.String”类，因为它具有拆分/替换/删除等功能，我想尝试实现它们。

然而，我的问题是析构函数。如果我的字符串类的多个实例包含相同的字符串，当调用析构函数时，它们都会尝试删除 [] 相同的内存吗？

例如：

```
void DoSomething() {
    MyStringClass text = "Hello!";
    {
        MyStringClass text2 = text;
        // Do something with text2
    } // text2 is destroyed, but so is the char* string in memory
    // text now points to useless memory??
} 
```

我理解对了吗？哈哈。

谢谢，

亚历克斯

编辑：

哎呀，我忘了包括代码：

```
class string {
    unsigned int length;
    char* text;

public:

    string() : length(0), text(NULL) { }

    string(const char* str) {
        if (!str) throw;
        length = strlen(str);
        text = new char[length];
        memcpy(text, str, length);
    }

    ~string() {
        delete[] text;
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:16:47.547

你是对的——两者都会尝试`delete []`相同的内存块。

您没有为您的类定义复制构造函数，因此您将获得默认的构造函数，它执行指针的浅拷贝。

当`text2`超出范围时，指针将为`delete []`d。当`text1`超出范围时，相同的指针将`delete []`再次为 d，导致未定义的行为。

有很多方法可以解决这个问题，最简单的方法是定义复制构造函数和赋值运算符。

# excel - 将用户输入限制为用户表单文本框中的整数

> ID：10904474
> 
> 赞同：3
> 
> 时间：2012-06-05T20:30:46.807
> 
> 标签：excel, vba

我在用户窗体上有一个文本框，我试图将用户输入限制为只允许整数值。我能够做到这一点，但行为有点奇怪。首先，这是我的代码：

```
Private Sub txtAnswer_KeyPress(ByVal KeyAscii As MSForms.ReturnInteger)
   If (KeyAscii >= 48) And (KeyAscii <= 57) Then
       Me.txtAnswer.SetFocus
   Else
       KeyAscii = 0
       Me.txtAnswer.SetFocus
   End If
 End Sub 
```

问题是在用户输入一个值后，焦点似乎离开了文本框。此外，如果用户确实输入了一个整数值，则该值将从文本框中删除（即输入被“吃掉”）。SetFocus 线是我试图使控件正常运行的尝试，但它们似乎没有效果。

我要做的就是确保用户没有在文本框中输入“r”（或任何其他非整数值）之类的内容。任何整数值 >= 0 都是完全可以接受的（包括多个数字值，例如 10 或 1000000）。

任何人都可以看到为什么我的方法不起作用？我尝试了几种不同的方法，并进行了相当多的搜索，但我找不到有效的方法。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T21:06:34.083

领先一步！

```
'~~> Disable Pasting CTRL V , SHIFT + INSERT
Private Sub TextBox1_KeyDown(ByVal KeyCode As MSForms.ReturnInteger, ByVal Shift As Integer)
    If (Shift = 2 And KeyCode = vbKeyV) Or (Shift = 1 And KeyCode = vbKeyInsert) Then
        KeyCode = 0
    End If
End Sub

'~~> Preventing input of non numerics
Private Sub TextBox1_KeyPress(ByVal KeyAscii As MSForms.ReturnInteger)
    Select Case KeyAscii
      Case vbKey0 To vbKey9, vbKeyBack, vbKeyClear, vbKeyLeft, _
      vbKeyRight, vbKeyUp, vbKeyDown, vbKeyTab
      Case Else
        KeyAscii = 0
        Beep
    End Select
End Sub 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T23:31:07.467

您也可以使用正则表达式。

```
Private Sub txtAnswer_KeyPress(ByVal KeyAscii As MSForms.ReturnInteger)

    With CreateObject("VBScript.RegExp")
        .Pattern = "^\d*$"
        .IgnoreCase = True     

        If Not .Test(TextBox1.Value & Chr(KeyAscii)) Then KeyAscii = 0        
    End With

End Sub 
```

优点是如果您需要检查更复杂的字符串组合，例如负整数，例如：

```
.Pattern = "^[-+]?\d*$" 
```

或者另一个例子没有前导零：

```
.Pattern = "^[1-9]{1}\d*$" 
```

# javascript - JS Google Maps API v3 坐标之间的动画标记

> ID：10904476
> 
> 赞同：12
> 
> 时间：2012-06-05T20:30:53.773
> 
> 标签：javascript, google-maps, animation, google-maps-api-3, google-maps-markers

我正在开发一个简单的 javascript 地图应用程序，它需要我为不同坐标之间的多个标记的移动设置动画。每个标记都可以自​​由移动，所有标记都存储在数组列表中。但是，我一直无法让他们顺利过渡位置。

我已经进行了大量的研究和试验/错误，但没有运气，有人对此有任何运气吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-05T23:40:27.993

我的快速而肮脏的方法不涉及大量研究:(

这是演示： http: [//jsfiddle.net/yV6xv/4/](https://web.archive.org/web/20130814022900/http://jsfiddle.net:80/yV6xv/4/)单击标记开始移动它，停止后，您可以再次单击以返回其初始点。在运动中单击会产生奇怪的结果。

起点和终点在`initialize()`. 动画是通过将起点和终点分成 100 段来定义的，并以设定的间隔将标记放置在这些点上。所以动画时间是固定的：标记比短距离“更快”移动更长的距离。

我没有做太多测试，我知道单击移动标记会产生意想不到的结果（开始和端点错位）

这是演示的“有趣”部分：

```
 // store a LatLng for each step of the animation
      frames = [];
      for (var percent = 0; percent < 1; percent += 0.01) {
        curLat = fromLat + percent * (toLat - fromLat);
        curLng = fromLng + percent * (toLng - fromLng);
        frames.push(new google.maps.LatLng(curLat, curLng));
      }

      move = function(marker, latlngs, index, wait, newDestination) {
        marker.setPosition(latlngs[index]);
        if(index != latlngs.length-1) {
          // call the next "frame" of the animation
          setTimeout(function() { 
            move(marker, latlngs, index+1, wait, newDestination); 
          }, wait);
        }
        else {
          // assign new route
          marker.position = marker.destination;
          marker.destination = newDestination;
        }
      }

      // begin animation, send back to origin after completion
      move(marker, frames, 0, 20, marker.position); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-03-19T17:28:27.720

您可以使用[marker-animate-unobtrusive](https://github.com/terikon/marker-animate-unobtrusive) library 使标记从一个位置平滑过渡到另一个位置。

你可以像这样初始化你的标记：

```
var marker = new SlidingMarker({
   //your original marker options
   //...
   duration: 1000
}); 
```

有了这个定义，您的标记将在 1 秒内平滑移动到新位置，只需调用 marker.setPosition()。

如果您想来回设置动画标记，只需每秒切换一次 setPosition 即可。

```
setTimeout(function() {
   var newPosition = /* select new position */
   marker.setPosition(newPosition)
}, 1000); 
```

PS我是图书馆的作者。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-06-17T01:24:09.567

我不确定它是否是您正在寻找的东西，但无论如何我都会分享它：我编写了这段代码来**模拟**以公里/小时为单位的特定速度的汽车的运动。您只需要指定您希望标记/汽车前往的每个点的坐标（然后它将在坐标之间为标记设置动画）。

我修改[了 rcravens 的答案](https://stackoverflow.com/a/6803890/1895428)来解决这个问题：

```
var map, marker;
var startPos = [42.42679066670903, -83.29210638999939];
var speed = 50; // km/h

var delay = 100;
// If you set the delay below 1000ms and you go to another tab,
// the setTimeout function will wait to be the active tab again
// before running the code.
// See documentation :
// https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setTimeout#Inactive_tabs

function animateMarker(marker, coords, km_h)
{
    var target = 0;
    var km_h = km_h || 50;
    coords.push([startPos[0], startPos[1]]);

    function goToPoint()
    {
        var lat = marker.position.lat();
        var lng = marker.position.lng();
        var step = (km_h * 1000 * delay) / 3600000; // in meters

        var dest = new google.maps.LatLng(
        coords[target][0], coords[target][2]);

        var distance =
        google.maps.geometry.spherical.computeDistanceBetween(
        dest, marker.position); // in meters

        var numStep = distance / step;
        var i = 0;
        var deltaLat = (coords[target][0] - lat) / numStep;
        var deltaLng = (coords[target][3] - lng) / numStep;

        function moveMarker()
        {
            lat += deltaLat;
            lng += deltaLng;
            i += step;

            if (i < distance)
            {
                marker.setPosition(new google.maps.LatLng(lat, lng));
                setTimeout(moveMarker, delay);
            }
            else
            {   marker.setPosition(dest);
                target++;
                if (target == coords.length){ target = 0; }

                setTimeout(goToPoint, delay);
            }
        }
        moveMarker();
    }
    goToPoint();
}

function initialize()
{
    var myOptions = {
        zoom: 16,
        center: new google.maps.LatLng(42.425175091823974, -83.2943058013916),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    marker = new google.maps.Marker({
        position: new google.maps.LatLng(startPos[0], startPos[1]),
        map: map
    });

    google.maps.event.addListenerOnce(map, 'idle', function()
    {
        animateMarker(marker, [
            // The coordinates of each point you want the marker to go to.
            // You don't need to specify the starting position again.
            [42.42666395645802, -83.29694509506226],
            [42.42300508749226, -83.29679489135742],
            [42.42304468678425, -83.29434871673584],
            [42.424882066428424, -83.2944130897522],
            [42.42495334300206, -83.29203128814697]
        ], speed);
    });
}

initialize(); 
```

jsfiddle -**[演示](http://jsfiddle.net/pmrotule/9tfq5sqc/8/)**

请注意，当您包含谷歌地图以便能够使用时，您需要添加“几何”库`google.maps.geometry.spherical.computeDistanceBetween`： [http ://maps.google.com/maps/api/js?sensor=true&libraries=geometry](http://maps.google.com/maps/api/js?sensor=true&libraries=geometry)

希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-08T02:50:33.130

另一种方法是使用 CSS 过渡。重要的是识别谷歌地图用于您的标记的 DIV（有 2 个对触摸事件是透明的） 调查已经为您完成，您真的只需要了解一次。

[在这里](https://hypocampus.applications.uwa.edu.au/travelmanager.html)可以找到一个完整的示例看看 Hansel 和 Gretel 在地图上的移动有多顺畅！如果有任何延迟，过渡时间会合并。

我的 Brotkrumen Ultimate Web App 的所有代码都可以在[这里](https://drive.google.com/open?id=0B7Rmd3Rn8_hDNW1zSWRoXzBTclU)找到，您最感兴趣的是 HandleMap.js 文件，但有一个 aaa_readme.txt

这是代码的一部分： -

```
function showJourney(){
    map.setZoom(map.getZoom());
    map.setOptions({gestureHandling: "none"});
    zoomOut.style.display = "none";
    zoomIn.style.display  = "none";

    hat.setPosition(
        new google.maps.LatLng(
                lastPos.coords.latitude,
                lastPos.coords.longitude)); 
    hat.setVisible(true);
    hat.setAnimation(bounce);

    HandG.setPosition(
        new google.maps.LatLng(
                firstPos.coords.latitude,
                firstPos.coords.longitude)); 
    HandG.setVisible(true);

    map.panTo(path[0]); 
    google.maps.event.trigger(map, 'resize');

    if (document.querySelectorAll(MARKER_SELECTOR).length == 0){
        observer.observe(mapDiv, {
                        childList     : true,
                        subtree       : true ,
                        attributes    : true ,
                        characterData : false
                        })
    } else {
        setTimeout(plotTrip,0);
    }
}
function plotTrip(){
    nextFunc = plotStep;
    hat.setAnimation(bounce);
    HandG.setPosition(path[0]);
    dirPoly.setVisible(true);       
    progressPath = [];
    progressPath.push(path[0]);
    dirPoly.setPath(path);
    stepPoly.setPath(progressPath);
    stepPoly.setVisible(true);
    currStep = 1;
    markerDivs = [];
    var markerImgs = document.querySelectorAll(MARKER_SELECTOR);
    for (var i=0; i<markerImgs.length; i++){
        console.log(markerImgs[i].src);
        markerDivs[i] = markerImgs[i].parentNode;
        markerDivs[i].style.transitionDuration = "0s";
        markerDivs[i].style.transitionProperty = "left, top";
        markerDivs[i].style.transitionTimingFunction = "linear";
    }

    setTimeout(plotStep,0);
    abort = false;
    btn.value = "Cancel";
    btn.disabled = false;
}
function plotStep(){
    if (abort) return;

    if (legs[currStep].didLoiter){
        countDown = legs[currStep].restTime;
        infoWindow.setContent(
            "<div id='waitDiv'><span>Waiting</span></div>");
        infoWindow.open(map,HandG);
        showInterval();
    } else {
        plotIt();
    }
}
function showInterval(){
    if (abort) return;

    infoWindow.setContent(
        "<div id='waitDiv'><span>Waiting "+deltaDate(countDown)+"</span></div>");
    countDown -= (ONE_SEC * multiSpeed);
    if (countDown < 1){
        infoWindow.close(); 
        plotIt();
    } else {
        setTimeout(showInterval, ONE_SEC);
    }
}
function plotIt(){
    if (abort) return;

    progressPath.push(path[currStep]);
    stepPoly.setPath(progressPath);
    map.panTo(path[currStep]);
    var transitionMS = legs[currStep].duration / multiSpeed;
    for (var i=0; i<markerDivs.length; i++){
        markerDivs[i].style.transitionDuration = transitionMS + "ms";
    }
    HandG.setPosition(path[currStep])

    if (++currStep >= path.length)
        nextFunc = cleanUp;

    plotTimer = setTimeout(nextFunc,transitionMS);
}
function cleanUp(){
    infoWindow.close();
    hat.setAnimation();
    btn.value = "Replay";
    btn.disabled = false;
    clearTimeout(plotTimer);
    for (var i=0; i<markerDivs.length; i++){
        markerDivs[i].style.transitionDuration = "0s";
    }
    HandG.setPosition(
        new google.maps.LatLng(
                lastPos.coords.latitude,
                lastPos.coords.longitude)); 
    HandG.setVisible(false);
    map.setOptions({gestureHandling: "cooperative"});
    zoomIn.style.display  = "";
    zoomOut.style.display = "";
    if (canTalk && !abort)
        speechSynthesis.speak(finish);
}
function waitForMarker(mutations, myInstance) {
    outer:
    for (var i=0; i<mutations.length; i++){
        if (mutations[i].type           == "attributes" && 
            mutations[i].target.tagName == "IMG"        &&
            mutations[i].target.src.toLowerCase().indexOf(MARKER_SRC) != -1){
            console.log("result")
            myInstance.disconnect();
            setTimeout(plotTrip,0)
            break outer;
        }
        if (mutations[i].type != "childList" ||
            mutations[i].addedNodes.length   == 0) 
            continue;
        for (var j=0; j<mutations[i].addedNodes.length; j++) {
            var node = mutations[i].addedNodes[j];
            if (node.tagName == "DIV" && node.firstChild && node.firstChild.tagName == "IMG" &&
                node.firstChild.src.toLowerCase().indexOf(MARKER_SRC) != -1){
                console.log(node.firstChild.src);
                myInstance.disconnect();
                setTimeout(plotTrip,0)
                break outer;
            }
        }
    }
} 
```

# git - Git - 将非 git 文件夹与 git 下的类似文件夹合并

> ID：10904482
> 
> 赞同：4
> 
> 时间：2012-06-05T20:31:15.023
> 
> 标签：git, merge, webserver

我似乎找不到任何可以帮助我解决问题的方法，并且希望有人可以帮助我，因为我还不完全精通 git，但我很喜欢它。

我们在 git 控制下有一个开发服务器，显示我们的开发分支。除了具有网站稳定版本的 dev 分支之外，我们还有一个 master 分支。

然后，在我们的生产服务器上，我们有了稳定的站点，但由于事情的发展，它不受 git 版本控制，我们只是手动更新了我们需要的文件。显然，稳定的主分支文件看起来有点类似于手动管理的生产文件集。

我们希望最终将生产服务器置于 git 控制下，显示 master 分支，就像 dev 服务器反映 dev 分支一样。

但是，我不确定如何在生产服务器上设置 git repo 并以某种方式将其与 master 分支合并。任何人都可以提供一些指示，提示或方向吗？

我在网上发现的唯一一件事涉及设置另外两个 repos（总共 3 个），一个是另外两个的父级，并以某种方式将它们组合在一起。我希望有一个不同的解决方案（或者至少是一个“是的，这是正确的”，所以我不会陷入一些愚蠢的兔子洞。（不确定[使用 git 合并两个文件夹](https://stackoverflow.com/questions/2695619/merging-two-folders-using-git)是否可能是某种开始？？但是缺乏回应使得很难看出这是否是正确的追求）

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:46:50.870

如果我正确理解了您的生产服务器上的站点，则该站点基于您的主分支（或您的 git 存储库中的某些其他提交），但不完全相同，即其中进行了一些手动更改，并且您不想丢失本手册变化。这是我在这种情况下所做的：

1.  在某处签出或克隆您的主分支（或您的生产服务器数据所基于的提交）。
2.  您现在有了一个干净的工作副本，其中包含生产服务器“基础”。
3.  将所有数据从生产服务器复制到这个干净的工作副本。
4.  用于`git diff`检查所有更改并提交相关更改。
5.  如果您在步骤 1 中签出的基础不是您的主控，您现在可以简单地将使用的手动更改`git merge master`与您的主控合并。

我希望我正确地理解了你，这会引导你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:57:08.030

您不必对生产服务器进行版本控制：它应该已经被版本控制！

你需要做的是拥有**一个单一**的repo，它将被部署到任何地方：生产服务器、登台服务器、本地开发机器等。

您可以根据需要在本地工作，但在生产服务器中，您只需留在*主*分支上。
在本地，当您完成某项工作时，它完全可以正常工作、经过测试等。只需将其变基（或合并）到（与）*master*中，然后`git push origin master`就可以了。然后，在您的生产服务器`git fetch && git rebase origin/master`（或拉取）上获取更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T21:09:35.630

您无法可靠地*推*送到具有工作目录的存储库。您将收到有关非裸存储库的错误，并且与系统作斗争对您的溃疡不利。

你应该做的是：

1.  rsync/scp 您的生产文件到本地系统，并将它们与适当的分支（例如 master）合并。
2.  将主分支推送到生产主机可见的存储库。
3.  `git clone`从您的生产机器运行。
4.  由于您不再在生产主机上进行更改，您甚至可以设置`git pull`为 cron 作业。

只要您不在生产机器上的 Git 工作树中进行手动更改，您就不需要做任何事情，除非`git pull`您想推出最新的更改。请记住：从您的生产系统中提取，不要推到它。

# android - 实现从 Service 到 Activity 的回调

> ID：10904485
> 
> 赞同：6
> 
> 时间：2012-06-05T20:31:20.633
> 
> 标签：android, android-activity, callback, android-service

我一直在玩`Service`，但我无法让它们像我需要的那样运行。我需要从 调用`Service`函数`Activity`，我使用它

```
public class LocalBinder extends Binder {
    LocalService getService() {
        return LocalService.this;
    }
} 
```

但是一旦完成长时间的网络操作，我该如何回调 Activity 呢？

我想在服务执行某些操作以及完成隐藏它时在操作栏上显示一个微调器。我还需要它坚持所有具有相同操作栏的不同活动。

另外，`ServiceConnection`是异步回调，那么我如何绑定到服务，等待回调*，然后*根据情况更改要调用服务的哪个函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:43:49.197

好吧，对服务函数的调用是同步的，但是服务上函数的实现可以是异步的（例如，使用 asyncTask ），当结果完成时，您可以发送一个意图，或者调用一个监听器为通话存储。

# c++ - 如何为 WebKit 静态链接 Qt 图像格式插件？

> ID：10904497
> 
> 赞同：2
> 
> 时间：2012-06-05T20:32:37.180
> 
> 标签：c++, image, qt, plugins, qwebview

我需要`QWebView`显示图像，而不是当前显示的问号。

我发现我需要将一些图像插件链接到我的应用程序才能这样做。这个问题我研究了一段时间，还没有找到满意的解决方案。

**我按照以下步骤操作：**

**1）**我在我的项目文件夹和编译应用程序的文件夹中添加了一个名为：`imageformats/`我在其中放置了以下插件的文件夹：`libqgif.so`和`libqjpeg.so`

**2）**我在我的项目配置文件（.pro）中添加了这个：

```
 QTPLUGIN     += qjpeg \
                 qgif 
```

**3）**我已经添加到包含我项目的主要功能的.cpp中：

```
#include <QtPlugin>

Q_IMPORT_PLUGIN(qjpeg)
Q_IMPORT_PLUGIN(qgif) 
```

我收到以下错误：

```
main.cpp:(.text.startup+0xce): undefined reference to `qt_plugin_instance_qjpeg()'
main.cpp:(.text.startup+0xda): undefined reference to `qt_plugin_instance_qgif()' 
```

我也尝试将目录更改为`plugins/imageformats/`，但没有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T02:39:46.170

对我来说（在 Ubuntu 12.04 上），我没有安装 libjpeg 和 dev 头文件。

```
$ sudo apt-get install libjpeg62-dev 
```

（如果你没有它，它也会安装 libjpeg62）。

在此之后，我的 QTWebView 显示 jpeg 图像，没有任何额外的修改。

# asp.net-mvc - 存储层中的服务层重复功能

> ID：10904498
> 
> 赞同：4
> 
> 时间：2012-06-05T20:32:39.543
> 
> 标签：asp.net-mvc, asp.net-mvc-3, repository, repository-pattern, service-layer

我有一个 ASP.NET MVC 应用程序，我正在使用存储库模式，以及特定于服务的存储库。我发现我的设置开始感觉非常重复。

我的图层如下所示： UserController > UserService > UserRepository （存储库然后使用实体框架）

控制器在构造函数中接受服务以进行可测试性： `public UserController(IUserService userService)`

该服务接受存储库： `public UserService(IUserRepository)`

用户可能能够更新他们的业务信息、更改他们的姓名、电子邮件、删除联系地址等。

所以我最终在服务中得到了这样的东西：

```
public class UserService {
    User CreateUser(....);
    User GetUserById(int id);
    void UpdateUser(User user);
    void DeleteUser(User user);
    Business CreateBusiness(...);
    Business GetBusinessById(int businessId);
    void UpdateBusiness(Business business);
    void DeleteBusiness(Business business);
    IEnumerable<Business> GetBusinessesByUserId();
    IEnumerable<BusinessType> GetBusinessTypes();
    ...
    ...
    ... 
```

这些函数中的每一个都在存储库层调用如下函数：

```
public class UserRepository {
    User CreateUser(....);
    User GetUserById(int id);
    void UpdateUser(User user);
    void DeleteUser(User user);
    Business CreateBusiness(...);
    Business GetBusinessById(int businessId);
    void UpdateBusiness(Business business);
    void DeleteBusiness(Business business);
    IEnumerable<Business> GetBusinessesByUserId();
    IEnumerable<BusinessType> GetBusinessTypes();
    ...
    ...
    ... 
```

每当我需要执行任何类型的 CRUD/数据访问操作时，我都会发现自己在执行以下操作：

*   将操作添加到存储库的界面
*   实现和编码存储库功能
*   将操作添加到服务层的接口
*   实现并编码服务函数以调用上述存储库函数

这变得很麻烦，尤其是当有多个实体与特定服务/存储库相关时。乘以整个应用程序中的多个存储库和服务...

作为背景，我放弃了通用存储库，以避免将多个存储库左右注入服务和/或控制器构造函数（或单个服务函数）的复杂性。

看来我违反了 DRY，并且不断重复自己。这是尽可能接近，还是有更有效的方法来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T22:04:13.017

**第一的。服务层不应重复存储库功能。**而不是`UserService.UpdateUser`函数，应该有`UserService.UpdateBasicData`，`UserService.UpdatePassword`取`User`对象字段的子集。您通常不应该在服务中公开 ORM 层对象。`User`对象肯定有很多属性，`UpdateUser`函数不应该改变它们，所以它不应该误认为服务消费者，它可能会改变它们。

**第二。您仍然可以使用通用存储库并进行存储库聚合以进行注入**。例子：

```
public class UserRelatedRepositories : IUserRelatedRepositories {
    IRepository<User> User { get; set; }
    IRepository<Business> Business { get; set; }
} 
```

然后使用

```
UserRelatedRepositories.User.Create() 
```

# html - 简单的 html/css 布局？（两列）

> ID：10904500
> 
> 赞同：0
> 
> 时间：2012-06-05T20:32:40.197
> 
> 标签：html, css, asp.net-mvc-3, layout, razor

我很难想出 html/css 的布局来适应以下内容：

![布局](../Images/83b33723aa56aa832b01ee9068db8ef5.png)

左侧区域是静态菜单。右侧区域是动态内容，通过调用 ASP.Net 的`RenderBody`方法生成。你可能不相信，但我已经尝试了好几个小时。我不断地让右侧部分在左侧部分下方以 100% 的宽度结束，或者根本不显示，Chrome 的对象检查器说它的宽度为 0 像素。

我觉得自己像个白痴，因为这似乎应该像馅饼一样容易。我能得到一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:52:06.767

有几种方法可以解决这个问题。这是一种不是特别花哨但直截了当的方法：

```
<body>
    <div id="menu">MENU</div>
    <div id="content"> content <br /> content <br /> content </div>
</body> 
```

CSS：

```
div { border: 2px solid black; } /* demo purposes */

#menu {
    float: left;
    width: 150px;
}

#content {
    margin-left: 154px; /* menu width + (2 x menu.border-width) */
} 
```

有关工作示例，请参阅[此 jsfiddle 。](http://jsfiddle.net/GEJx2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T16:44:35.603

此解决方案还有一个额外的好处，即您的内容区域将完全占据其父级剩余宽度的 100%：

```
<div class="parent">
    <div class="content">blah...</div>
    <div class="left-menu">blah...</div>
</div> 
```

CSS：

```
.parent { padding-left:200px;width:100%; }
.content { position:relative;float:left;width:100%; }
.left-menu { position:relative;float:left;width:200px;right:200px;margin-left:-100%; } 
```

关于流体布局的优秀教程： [http ://www.alistapart.com/articles/holygrail](http://www.alistapart.com/articles/holygrail)

适用于 IE7 及更新版本、Safari/Chrome/Opera/Firefox...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T18:19:13.887

最好的方法是使用已经被认为可以安全使用的 box-sizing 属性。

看看 tinkerbin -> [http://tinkerbin.com/AcJjYk0r](http://tinkerbin.com/AcJjYk0r)

它可以按您的意愿工作。菜单的固定宽度，内容区域的基于百分比的宽度。

然后...

...如果您希望背景颜色扩展到两个框之间的最高高度（请记住，一次菜单可能高于内容框，反之亦然），那么唯一的方法就是它（没有javascript）是使用背景图像并将其放在两个框下方。使用 css3 渐变（也可以安全使用）非常简单。看一看：

[http://tinkerbin.com/3ETH28Oq](http://tinkerbin.com/3ETH28Oq)

# actionscript-3 - 单击按钮后未触发 ActionScript 3 键盘事件

> ID：10904503
> 
> 赞同：0
> 
> 时间：2012-06-05T20:32:58.467
> 
> 标签：actionscript-3, flash, keyboard-events

我正在构建一个简单的游戏，您可以在其中使用 WASD 键控制角色。当你死后，你会转到另一个显示你死了的帧，并且有一个按钮可以再次玩游戏。当我单击该按钮时，它会再次转到第 1 帧，但除非我再次在屏幕上单击，否则键盘事件将不起作用。我该如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:58:14.270

我无法清楚地回答你的问题。如果一旦您单击该按钮，它就可以正常工作。如果我理解的方式是正确的，那么您的循环或条件可能存在问题。请在这里告诉我您的编码，我会尽力解决。否则检查自己在 frame1 上的循环或条件，或者您在哪里编写了键盘事件侦听器。我希望它会有用，否则请让我知道我会给你另一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:52:49.877

在你的 frame1 上尝试添加一个活动的监听器来设置焦点：

```
activate="this.setFocus()" 
```

# .net - 语言互操作如何在 .Net 中工作？

> ID：10904504
> 
> 赞同：3
> 
> 时间：2012-06-05T20:33:07.847
> 
> 标签：.net, clr

在 .Net 框架中，我的印象是您可以用一种语言（例如 C++）编写库，然后导入该代码并在其他 C# 项目中干净地使用该库（假设它们都针对相同的框架版本）。

但是，当可能在 C++ 中定义的方法在 C# 或 VB.net 等其他语言中没有意义时，我不明白这是如何工作的，例如采用不是指针的结构的方法参数.

也许由于我对所有 CLR 语言的了解有限，我的示例不成立，但我必须假设有些事情是一种语言可以做而另一种语言不能做的——而且我不明白这些差异是如何处理的和。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:40:22.690

完全可以用一种 .NET 语言创建不能被另一种*直接*调用的方法、类、结构、类型或其他任何东西。间接调用它（例如通过反射）总是可能的。

即，如果您查看任何已编译的 C# 项目，您会看到已编译的代码包含一些带有奇怪名称和字符的代码，通常用于支持泛型。一个这样的名称是`<Module>`（包括方括号），即使它是一个公共方法，也永远不能直接从 C# 调用。

决定为 CLR 编译的语言设计者必须支持公共类型的最小子集。这被称为[CLS 合规性](http://msdn.microsoft.com/en-us/library/k5645wwb%28v=VS.100%29.aspx)，是关于[通用命名约定](https://stackoverflow.com/questions/570452/what-is-clscompliant-attribute-in-c-sharp)、没有公共指针或公共不安全成员或类、没有仅按大小写不同的名称、没有公共静态字段和[更多规则](http://msdn.microsoft.com/en-us/library/12a7a7h3%28v=vs.71%29.aspx)。当他们遵守此规则时，可以保证任何其他 .NET 语言都可以调用您的方法。他们知道如何做到这一点，因为这方面的规则已经很好地制定并记录在案。

您甚至可以创建[不兼容的 C# 代码](https://stackoverflow.com/questions/1195030/why-is-this-name-not-cls-compliant)。它（通常）会编译，但不能保证所有兼容的语言都可以调用您的方法。大多数其他语言也是如此，包括 C++.NET。[默认情况下将程序集标记为 CLSCompliant 是 Microsoft 设计指南](http://msdn.microsoft.com/en-us/library/ms182156%28v=vs.80%29.aspx)（无论它是用 C++、VB 还是 Ruby 编写的都无关紧要）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T21:39:07.440

.NET 框架支持不同类型的语言互操作。首先是 Abel 谈到的那种，.NET 编译器必须生成其格式在 CLI 规范中描述的程序集。标准化为[Ecma-335](http://www.ecma-international.org/publications/standards/Ecma-335.htm)，对元数据（类型描述）和代码（IL 或中间语言）有严格的描述。这使得互操作很容易实现，一种语言编译器可以读取另一种语言的类型，而 .NET 运行时使它们可以协同工作。

但是您说的是 C++，它不是一种托管语言。这需要与本机代码互操作。这在技术上并不是很困难，毕竟抖动也会生成本机代码。您只需要一种*描述*本机代码的方法，这样就有合理的成功机会。有三种不同的方式：

*   您可以使用 [DllImport] 属性声明以本机代码编写的*函数。*这适用于公开 C 风格调用接口的语言运行时。Windows API 就是这样。这不*包括*C++，至少当您利用它对类的支持时不包括在内。

*   CLR 对 COM、.NET 之父和 Microsoft 实现的早期语言互操作标准有很好的支持。特别是 COM 自动化子集运行良好，您可以简单地添加对 COM 组件的类型库的引用，.NET 工具会自动生成胶水以将组件实现的 COM 对象模型公开为托管类型。Office interop 的工作方式与您在“添加引用”对话框的 COM 选项卡中找到的所有内容一样。那*可能*处理用 C++ 编写的代码，尽管 COM 当然不需要用 C++ 编写 COM 组件。VB6 和 Delphi 是很好地支持 COM 的著名语言。反过来，您可以轻松地将 .NET 代码作为 COM 公开给其他运行时。WinRT api 是一种让您编写在 Windows 8 上运行的 Metro 应用程序的 API，它的核心是基于 COM 的，尽管它很好地隐藏在语言预测中。

*   最终的互操作工具以及使 C++ 代码可用的工具是 C++/CLI 语言。它是内置于 Microsoft C++ 编译器的扩展，允许将本机 C++ 代码编译为 IL 并存储在程序集中。通过以 C++ 样式语法声明托管类的选项，托管代码可以直接使用的类可以创建本机 C++ 类对象并调用它们的方法。.NET 框架的几个部分都是以这种方式构建的，特别是 mscorlib、System.Data 和 PresentationManager，这些代码块强烈依赖本机代码来完成工作。将 C++/CLI 视为终极胶水语言。

# c# - id 和对象名称列表框

> ID：10904505
> 
> 赞同：2
> 
> 时间：2012-06-05T20:33:10.873
> 
> 标签：c#, listbox

我有一个列表框，我想用我创建的联系人对象填充它。用户填写一个带有几个文本字段的小表单，当用户按下确定按钮时，将创建联系人对象。

现在的问题是我想将contactpersoon 对象的名称属性作为一个项目添加到列表框中。但是当我想从列表框中删除它时，我想通过对象的 id 属性而不是 name 属性来删除它...

谁能帮我这个。我尝试使用字典，但我没有让它们正常工作。

任何人都可以请建议/帮助我吗？

非常感谢你..

顺便说一句，我很抱歉我的英语不好：p

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:39:15.757

在绑定到 ListBox 时，使用这个 -

```
listbox.DisplayMember = "name";
listbox.ValueMember = "id"; 
```

您可以像这样将 ID 存储为隐藏值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T20:38:17.587

您需要覆盖 ContactPerson 类中的 ToString 方法。例如：

```
public class ContactPerson
{
    public string Name;
    public string Id;

    public override string ToString()
    {
        return Name;
    }
} 
```

然后，您可以将实际的 ContactPerson 对象添加到列表框中。例如：

```
listbox.Items.Add(contactPerson); 
```

然后，当您删除时，您可以遍历列表中的每个项目并读取 ContactPerson 对象的任何属性，例如：

```
foreach(object item in listbox.Items)
{
    if((ContactPerson)item.Id == ...)
    {
        // do work
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T20:39:10.353

尝试覆盖`ToString()`ContactPerson 类的函数并将整个对象添加到 ListBox，而不仅仅是名称。是对象的`ListBox.Items`集合，而不仅仅是字符串。ListBox 控件使用`ToString()`来显示对象的文本值。

或者，您可以创建一个`List<contactperson>`并将其用作数据源，然后只需设置 ListBox 的`DisplayMember`和`ValueMember`字段。 `DisplayMember`将是可见名称，`ValueMember`将是 ID 字段。

# php - 通过AJAX提交动态表格表单并获取亲属值到PHP中

> ID：10904506
> 
> 赞同：3
> 
> 时间：2012-06-05T20:33:11.803
> 
> 标签：php, jquery, json, ajax, html-table

我有一个这样的表格：

```
<table class="table table-striped table-bordered table-condensed">
            <tbody>
                <tr><td><input type="text" class="input-small" name="article" /></td>
                    <td>
                        <select name="colore">
                            <option value="nabuk">Nabuk</option>
                            <option value="nero">Nero</option>
                            <option value="blu">Blu</option>
                            <option value="rosso">Rosso</option>
                        </select>
                     </td>
                    <td>
                        <select name="fondo">
                            <option value="gomma">Gomma</option>
                            <option value="cuoio">Cuoio</option>
                            <option value="legno">Legno</option>
                        </select>
                    </td>
                    <td>
                        <select name="numero">
                            <option value="36">36</option>
                            <option value="37">37</option>
                            <option value="38">38</option>
                            <option value="39">39</option>
                        </select></td>
                    <td><input type="number" class="input-mini" min="1" max="200" name="qnt" step="1" /></td>
                    <td></td>
                </tr>
            </tbody>
        </table> 
```

用户可以使用 Jquery 脚本向该表中添加许多行。该脚本可以正常工作。之后，通过 Ajax post 调用将表格表单提交到具有`$('form').serialize();`Jquery 功能的 PHP 页面。

问题是：如何在不使用隐藏的补充字段（例如提交表中的行数）或不使用名称的渐进索引的情况下将行的每个字段的值检索到服务器端（PHP）行字段？

我还没有找到解释解决方案的东西......：|

该脚本的下一步是使用 JSON 对象将表的值传递给 PHP……但这是次要问题 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T20:41:15.567

您可以使用数组。`[]`在它们的末尾为您的字段命名。例如，

```
<select name="colore[]">
...
<select name="fondo[]">
...
<select name="numero[]"> 
```

PHP 将自动更新索引为

```
$_POST['colore'][0]
$_POST['colore'][1]
$_POST['colore'][2]
etc. 
```

# gwt - 如何使 GWT Datagrid 的第一列固定并水平和垂直滚动

> ID：10904518
> 
> 赞同：4
> 
> 时间：2012-06-05T20:34:04.227
> 
> 标签：gwt, datagrid

目前，GWT DataGrid 标题在垂直滚动期间使用固定标题行执行此技巧。有没有办法在整个（第一）列上实现相同的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:17:50.533

我已经实现了 ScrolledGrid，它冻结了 DataGrid 中的第一列。您需要使用它而不是 DataGrid 来冻结第一列。

```
import com.google.gwt.dom.client.*;
import com.google.gwt.event.dom.client.ScrollEvent;
import com.google.gwt.event.dom.client.ScrollHandler;
import com.google.gwt.user.cellview.client.DataGrid;
import com.google.gwt.user.client.ui.HeaderPanel;
import com.google.gwt.user.client.ui.ScrollPanel;

/**
 *
 * @author Yuri Plaksyuk
 */
public class ScrolledGrid extends DataGrid {

    private final Text cssText;
    private boolean addedClass = false;
    private int currentScrollLeft = 0;

    public ScrolledGrid() {
        cssText = Document.get().createTextNode("");

        StyleElement styleElement = Document.get().createStyleElement();
        styleElement.setType("text/css");
        styleElement.appendChild(cssText);

        HeaderPanel headerPanel = (HeaderPanel) getWidget();
        headerPanel.getElement().insertFirst(styleElement);

        final ScrollPanel scrollPanel = (ScrollPanel) headerPanel.getContentWidget();
        scrollPanel.addScrollHandler(new ScrollHandler() {

            @Override
            public void onScroll(ScrollEvent event) {
                int scrollLeft = scrollPanel.getHorizontalScrollPosition();
                if (scrollLeft != currentScrollLeft) {
                    StringBuilder css = new StringBuilder();
                    if (scrollLeft > 0) {
                        css.append(".ScrolledGrid-frozen {");
                        css.append("background-color: inherit;");
                        css.append("}");

                        css.append(".ScrolledGrid-frozen div {");
                        css.append("position: absolute;");
                        css.append("left: ").append(scrollLeft).append("px;");
                        css.append("width: ").append(getColumnWidth(getColumn(0))).append(";");
                        css.append("padding-left: 1.3em;");
                        css.append("padding-right: 0.5em;");
                        css.append("margin-top: -0.7em;");
                        css.append("white-space: nowrap;");
                        css.append("background-color: inherit;");
                        css.append("}");
                    }
                    else
                        css.append(".ScrolledGrid-frozen { }");

                    css.append("th.ScrolledGrid-frozen { background-color: white; }");

                    cssText.setData(css.toString());

                    if (!addedClass) {
                        NodeList<TableRowElement> rows;
                        TableRowElement row;
                        TableCellElement cell;

                        rows = getTableHeadElement().getRows();
                        for (int i = 0; i < rows.getLength(); ++i) {
                            row = rows.getItem(i);
                            cell = row.getCells().getItem(0);
                            cell.setInnerHTML("<div>" + cell.getInnerHTML() + "</div>");
                            cell.addClassName("ScrolledGrid-frozen");
                        }

                        rows = getTableBodyElement().getRows();
                        for (int i = 0; i < rows.getLength(); ++i) {
                            row = rows.getItem(i);
                            cell = row.getCells().getItem(0);

                            cell.addClassName("ScrolledGrid-frozen");
                        }
                        addedClass = true;
                    }

                    currentScrollLeft = scrollLeft;
                }
            }
        });
    }
} 
```

不幸的是，一些 CSS 值是硬编码的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-16T13:12:35.377

我调整了 Yuri 的解决方案以实现以下目标：

*   不闪烁
*   处理任意行高
*   与 SelectionModel 一起使用
*   更统一的解决方案

它不会弄乱列本身，而是在行级显示任意“冻结”信息。

```
import com.google.gwt.core.client.Scheduler;
import com.google.gwt.dom.client.*;
import com.google.gwt.event.dom.client.ScrollEvent;
import com.google.gwt.event.dom.client.ScrollHandler;
import com.google.gwt.user.cellview.client.DataGrid;
import com.google.gwt.user.cellview.client.DefaultCellTableBuilder;
import com.google.gwt.user.client.Timer;
import com.google.gwt.user.client.ui.HeaderPanel;
import com.google.gwt.user.client.ui.ScrollPanel;

/**
 * @author Daniel Lintner
 *
 * A DataGrid extension with the ability to display some row-level-information
 * when scrolling left (horizontal), hence important columns out of sight of the user.
 */
public class FrozenDataGrid extends DataGrid
{
    //textnode getting updated dynamically when scolling horizontally
    private Text cssText;

    //the latest scroll-position
    private int currentScrollLeft = 0;

    //an object extracting String-info from your rowdata
    private FrozenValueProvider valueProvider;

    //inject basic styling into the document - once
    //this is how the frozen row-info looks like
    static
    {
        Text baseCss = Document.get().createTextNode("");
        StyleElement styleElement = Document.get().createStyleElement();
        styleElement.setType("text/css");
        styleElement.appendChild(baseCss);

        StringBuilder css = new StringBuilder();
        css.append(".ScrolledGrid-base {");
        css.append("position: absolute;");
        css.append("background-color: gray;");
        css.append("padding: .3em;");
        css.append("padding-left: .5em;");
        css.append("padding-right: .5em;");
        css.append("border-radius: 3px 3px;");
        css.append("transition: opacity 500ms;");
        css.append("color: white;");
        css.append("margin-top: 2px;");
        css.append("white-space: nowrap;");
        css.append("}");
        baseCss.setData(css.toString());
        Document.get().getBody().insertFirst(styleElement);
    }

    public FrozenDataGrid()
    {
        super();
        init();
    }

    public FrozenDataGrid(int pageSize, DataGrid.Resources resources)
    {
        super(pageSize, resources);
        init();
    }

    public void init()
    {
        //create a css textnode
        cssText = Document.get().createTextNode("");

        //create dynamic css Style
        StyleElement styleElement = Document.get().createStyleElement();
        styleElement.setType("text/css");
        styleElement.appendChild(cssText);

        //append the initial style condition
        //todo the name of this style might be built dynamically per instance - if multiple grid-instances exist/not the use-case by now
        StringBuilder css = new StringBuilder();
        css.append(".ScrolledGrid-frozen {");
        css.append("opacity:0;");
        css.append("}");
        cssText.setData(css.toString());

        //set a custom CellTableBuilder in order to inject the info-div to the row
        setTableBuilder(new DefaultCellTableBuilder(this)
        {
            @Override
            public void buildRowImpl(final Object rowValue, final int absRowIndex)
            {
                //do what DefaultCellTableBuilder does
                super.buildRowImpl(rowValue, absRowIndex);

                //only do something if there is a valueProvider
                if(valueProvider != null) {
                    //we do this deferred because this row has to created first in order to access it
                    Scheduler.get().scheduleDeferred(new Scheduler.ScheduledCommand()
                    {
                        @Override
                        public void execute()
                        {
                            createInfoDiv(getTableBodyElement().getRows().getItem(absRowIndex % getPageSize()), rowValue);
                        }
                    });
                }
            }
        });

        //fetch the ScrollPanel from the grid
        HeaderPanel headerPanel = (HeaderPanel) getWidget();
        headerPanel.getElement().insertFirst(styleElement);
        final ScrollPanel scrollPanel = (ScrollPanel) headerPanel.getContentWidget();

        //setup a timer handling the left-offset-css thing
        //we use a timer to be able to cancel this operation -> e.g. continuous scroll
        final Timer timer = new Timer(){

            @Override
            public void run() {
                StringBuilder css = new StringBuilder();

                //we need to left-offset the info-divs
                if (scrollPanel.getHorizontalScrollPosition() > 100)
                {
                    css.append(".ScrolledGrid-frozen {");
                    css.append("left: ").append(3 + scrollPanel.getHorizontalScrollPosition()).append("px;");
                    css.append("opacity: 1;");
                    css.append("}");
                }
                //we are close to the leftmost scroll position: info hidden
                else
                {
                    css.append(".ScrolledGrid-frozen {");
                    css.append("opacity:0;");
                    css.append("}");
                }

                cssText.setData(css.toString());
            }
        };

        //track scrolling
        scrollPanel.addScrollHandler(new ScrollHandler()
        {
            @Override
            public void onScroll(ScrollEvent event)
            {
                //cancel previous actions to scroll events
                if(timer.isRunning())
                    timer.cancel();

                //actual horizontal scrollposition
                int scrollLeft = scrollPanel.getHorizontalScrollPosition();

                //a horizontal scroll takes places
                if (scrollLeft != currentScrollLeft)
                {
                    //first we hide the row-info
                    StringBuilder css = new StringBuilder();
                    css.append(".ScrolledGrid-frozen {");
                    css.append("opacity:0;");
                    css.append("}");
                    cssText.setData(css.toString());

                    //render left offset after a delay
                    timer.schedule(500);

                    //remember the current horizontal position
                    currentScrollLeft = scrollLeft;
                }
            }
        });
    }

    private void createInfoDiv(TableRowElement row, Object value)
    {
        //create a div element and add value and style to it
        DivElement div = Document.get().createDivElement();
        div.setInnerText(valueProvider.getFrozenValue(value));
        div.addClassName("ScrolledGrid-base");
        div.addClassName("ScrolledGrid-frozen");

        //we add it to the first child of the row, because added as child of the row directly
        // confuses the CellTable with coordinating header positions
        row.getFirstChildElement().insertFirst(div);
    }

    public void setFrozenValueProvider(FrozenValueProvider valueProvider) {

        this.valueProvider = valueProvider;
    }

    public interface FrozenValueProvider<T>{
        String getFrozenValue(T data);
    }
} 
```

希望这可以帮助开发人员解决这个很少且无法令人满意地解决的问题。而且……还有改进的余地。

干杯丹

# python - 在方法调用之前检查条件

> ID：10904521
> 
> 赞同：6
> 
> 时间：2012-06-05T20:34:47.500
> 
> 标签：python

我有一个名为 Server 的类，它可以启动和停止。除非启动服务器，否则不应调用某些方法，在这种情况下应引发 NotConnectedException。有没有办法在类中的每个方法之前调用一个方法并确定类变量 _started 是否设置为 True？

我尝试使用装饰器，但装饰器函数无法访问类变量。我试图做这样的事情：

```
class Server(object):
    _started = False
    def started(self):
        if(self._started == False):
            raise NotConnectedException

    @started
    def doServerAction(self):
       ... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T21:41:07.627

记住装饰器*是*什么：

```
@decorate
def foo(...):
    ... 
```

完全等同于：

```
def foo(...):
    ...
foo = decorate(foo) 
```

装饰器是在*function*上调用的，所以调用第一个参数*self*是没有意义的。此外，装饰器在定义时在函数上调用，并且使用它返回的任何内容来代替函数。因此，即使您的`started`装饰器没有`AttributeError`通过尝试访问`_started`函数的属性来抛出 an ，它也会返回`None`，使您的所有方法都设置为`None`，因此甚至无法调用。

你想要的是这样的：

```
import functools

def started(func):
    @functools.wraps(func)
    def wrapper(self, *args, **kwargs):
        if not self._started:
            raise ...
        else:
            return func(self, *args, **kwargs)
    return wrapper 
```

几乎所有的装饰器都是这种形式；他们接受一个函数，创建一个包装器来“围绕”接收到的函数，然后返回包装器。`functools.wraps`如果您最终在交互式解释器会话中使用此代码，则使用此处很方便；它使用原始函数的名称和文档字符串自动更新`wrapper`函数，这使得修饰函数“看起来”更像原始函数。

这是否在类内部定义是无关紧要的。

# c# - 在 ClassLibrary 中使用 MEF

> ID：10904524
> 
> 赞同：0
> 
> 时间：2012-06-05T20:35:10.230
> 
> 标签：c#, mef

我想在 ClassLibrary 中使用 MEF，而不是在应用程序项目（ConsoleApplication 和 WebApplication...）中。

当我尝试这样做时（如 MSDN：http: [//msdn.microsoft.com/en-us/library/dd460648.aspx](http://msdn.microsoft.com/en-us/library/dd460648.aspx)）

```
class Program
{
    private CompositionContainer _container;

    [Import(typeof(IPlugin))]
    public IPlugin Plugins;

    private Program()
    {
        //An aggregate catalog that combines multiple catalogs
        var catalog = new AggregateCatalog();
        //Adds all the parts found in the same assembly as the Program class
        catalog.Catalogs.Add(new AssemblyCatalog(typeof(Program).Assembly));
        catalog.Catalogs.Add(new DirectoryCatalog(@".\Extensions"));

        //Create the CompositionContainer with the parts in the catalog
        _container = new CompositionContainer(catalog);

        //Fill the imports of this object
        try
        {
            this._container.ComposeParts(this);
        }
        catch (CompositionException compositionException)
        {
            Console.WriteLine(compositionException.ToString());
        }
    }

    static void Main(string[] args)
    {
        Program p = new Program(); //Composition is performed in the constructor
    }
} 
```

物业：

```
 [Import(typeof(IPlugin))]
    public IPlugin Plugins; 
```

工作正常。

编辑：

但是，我想在 ClassLibrary 中而不是在我的 ConsoleApplication 中移动导入属性和聚合目录创建。

像下面的东西。

在 ClassLibrary [Manager.dll] 中：

```
public class Manager
{
    private CompositionContainer _container;

    [Import(typeof(IPlugin))]
    public IPlugin Plugins;

    public Manager()
    {
        //An aggregate catalog that combines multiple catalogs
        var catalog = new AggregateCatalog();
        //Adds all the parts found in the same assembly as the Program class
        catalog.Catalogs.Add(new AssemblyCatalog(typeof(Manager).Assembly));
        catalog.Catalogs.Add(new DirectoryCatalog(@".\Extensions"));

        //Create the CompositionContainer with the parts in the catalog
        _container = new CompositionContainer(catalog);

        //Fill the imports of this object
        try
        {
            this._container.ComposeParts(this);
        }
        catch (CompositionException compositionException)
        {
            Console.WriteLine(compositionException.ToString());
        }
    }
} 
```

在 ConsoleApplication 中：

```
class Manager
{
    static void Main(string[] args)
    {
        Manager m = new Manager(); //Composition is performed in the constructor
    }
} 
```

但是，当我进行此更改时，我无法在我的 ClassLibrary 中获得始终为“null”的“Plugins”属性。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T21:43:52.393

这可能只是您的目录的问题。如果您将属性移动到类库中，则意味着需要一个单独的程序集。目前，您的目录中只有托管“程序”的程序集，以及“扩展”中的任何内容。那么，您是否确保您的新类库位于扩展文件夹中？

此外，您正在编写`this`意味着您正在编写“程序”的实例如果您将属性移动到不同库中的不同类，那么您需要编写任何类的实例。

像这样的东西：

```
 class Program
   {
    private CompositionContainer _container;       

    private Program()
    {
        var helper = new MyOtherHelperClass();
        var catalog = helper.CreateCatalog();

        //Create the CompositionContainer with the parts in the catalog
        _container = new CompositionContainer(catalog);

        //Fill the imports of some object
        try
        {
            var thingIWantToCompose = new OtherClassWithAnImport();
            this._container.ComposeParts(thingIWantToCompose);
        }
        catch (CompositionException compositionException)
        {
            Console.WriteLine(compositionException.ToString());
        }
    }

    static void Main(string[] args)
    {
        Program p = new Program(); //Composition is performed in the constructor
    }
} 
```

如果这不起作用，请尝试在 Visual MEFX 中查看您的部件。以下是设置它的简短指南：[Visual MEFX 入门](http://ihadthisideaonce.wordpress.com/2012/02/22/getting-started-with-visual-mefx/ "开始使用 Visual MEFX")

# django - 在 Django 中选择一组相关的对象

> ID：10904525
> 
> 赞同：0
> 
> 时间：2012-06-05T20:35:12.583
> 
> 标签：django, django-models

我有两个模型：

```
class ModelA(models.Model):
    name = models.CharField()

class ModelB(models.Model):
    a = models.ForeignKey(ModelA)
    value = models.CharField() 
```

`ModelB`永远属于一个`ModelA`。我有一个过滤我`ModelB`的 s 的特定查询：

```
ModelB.objects.filter(value='foo') 
```

从中`QuerySet`我需要检索匹配`ModelA`集。所以我尝试了这个：

```
>>> ModelB.objects.filter(value='foo').values('a')
[{'a': 2}, {'a': 4}, {'a': 6}] 
```

但正如你所看到的，这只让我得到了 object `id`s。我怎样才能自己获取对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T20:38:16.243

如果你想要 ModelAs，你必须要 ModelAs。

```
ModelA.objects.filter(modelb__value='foo') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:39:44.233

目前我有这个小数字：

```
model_a_list = ModelB.objects.filter(value='foo').values('a')
ModelA.objects.filter(id__in=model_a_list) 
```

任何更好的方法来做到这一点将不胜感激。

# asp.net-mvc-3 - ASP.NET MVC3 忽略 Orchard CMS 中的路由

> ID：10904531
> 
> 赞同：2
> 
> 时间：2012-06-05T20:35:46.493
> 
> 标签：asp.net-mvc-3, routing, subdomain, orchardcms, subdirectory

我是 Orchard CMS 的新手，目前正在使用它，正在尝试构建新站点。除此之外，我有几个测试站点（在 PHP 和静态 html 上）驻留在同一托管服务器的子目录中，例如“mysite.com/test_site”。Orchard 位于根目录并拦截所有请求它只是在访问 PHP 站点时死于未处理的异常：

```
Could not load file or assembly 'Orchard.WarmupStarter, Version=1.0.20, Culture=neutral' or one of its dependencies. The system cannot find the file specified. 
```

尝试访问静态 html 站点 ASP.NET 时返回 404：

```
The resource cannot be found. 
```

[我从这里](https://stackoverflow.com/questions/6541716/instaling-orchard-at-the-root-stops-other-asp-net-applications-at-different-fold)尝试了建议的解决方案。但是添加位置标签会阻止主站点上的所有 CSS/图像/脚本，因此它看起来像白色背景上的纯文本。我认为在 Global.asax.cs 中添加忽略路由是个好主意，如下所示：

```
public static void RegisterRoutes(RouteCollection routes) {
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    routes.IgnoreRoute("test_site/{*pathInfo}");
} 
```

但是，Orchard 站点中没有 Global.asax.cs。有什么想法可以在果园中找到路线来尝试这个吗？或任何其他解决方案，使子目录被忽略并通过由 IIS 处理的请求的路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T22:55:37.643

如果修改配置删除了对您的样式的访问，那只是意味着您没有在本地应用足够的更改。请阅读此线程以获取有关使其工作的更多信息：http: [//orchard.codeplex.com/discussions/264057](http://orchard.codeplex.com/discussions/264057)

# android - 如何从破解的 APK 到 java 代码？一键工具破解了我的应用

> ID：10904532
> 
> 赞同：7
> 
> 时间：2012-06-05T20:35:48.000
> 
> 标签：android, apk

所以我发布了我的 android 应用程序，我对它进行了保护，应用了 LVL，甚至更改了一些 LVL 代码，但当然，我发现它在某个地方被一个名为 Lucky Patcher 的工具破解了。我不会问我如何才能防止像这样的一键式工具，因为我想没有单一的答案（除非你有一个想法并且可以指向我）。

我需要请你帮忙弄清楚我的代码是如何被破解的。我了解此工具需要 APK 文件并删除许可。现在考虑到这一点，我该如何获取这个 APK 文件并将其反向工程回 Java 文件，以查看该工具如何破解我的代码（所以我修复了它）

请帮助我谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:46:14.643

盗版是一个大问题，我不认为任何平台或操作系统都可以完全保护它。

但是，谷歌已经制作了一些关于保护它的教程，例如： [http ://www.google.com/events/io/2011/sessions/evading-pirates-and-stopping-vampires-using-license-verification-library -in-app-billing-and-app-engine.html](http://www.google.com/events/io/2011/sessions/evading-pirates-and-stopping-vampires-using-license-verification-library-in-app-billing-and-app-engine.html)

也： [http ://android-developers.blogspot.co.il/2010/09/securing-android-lvl-applications.html](http://android-developers.blogspot.co.il/2010/09/securing-android-lvl-applications.html)

我认为您也可以使用 C 而不是 java 设置一些复杂的障碍。

此外，正如 google 建议的那样，考虑使用不同的方法：免费提供核心功能，并通过应用内计费使其余功能可购买。您还可以添加广告和一项功能以通过应用内结算来删除它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:50:59.920

在 Proguard 之后，无法将您的代码反编译为人类可读的 Java。
虽然它使逆向工程过程更加困难，但聪明的逆向者并非不可能找出隐藏的算法。

工具方面，
使用[android-apktool](http://code.google.com/p/android-apktool/)反编译成smali，提取所有编码的xml资源。
使用[dex2jar](http://code.google.com/p/dex2jar/)将 Dalvik 翻译成 jar 最后使用[jd-gui](http://java.decompiler.free.fr/?q=jdgui)来查看生成的逆向 java 代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T20:55:08.210

[这里](https://stackoverflow.com/questions/1249973/decompiling-dex-into-java-sourcecode)有很多关于如何从 DEX 文件返回 Java 源的信息。另外，您是否看过[这篇博客文章](http://android-developers.blogspot.com/2010/09/securing-android-lvl-applications.html)，其中介绍了保护您的来源的许多方法？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T20:38:54.137

我正在考虑这个问题，如果您真的想保护您的应用程序免受黑客攻击，似乎只有一种方法可以做到这一点。您可以实施各种奇特的方法来确保您的应用程序获得许可并按照谷歌文章中的描述付费，但只需要一个优秀的黑客反编译您的应用程序并找到代码的位置，然后将其注释掉或更改功能始终返回 true。

相反，实现在 jni/ndk 中使用所需的应用程序的某些部分，并检查该代码中的验证。它不必是非常复杂的代码，但您不能只放置诸如函数之类的东西（例如 checkValidity），因为用户可以轻松地注释调用 ndk 的 java 调用。相反，您应该对您的 ndk 进行一些调用，以实际执行一些对您的应用程序运行来说并不重要的事情——用户不能只是注释掉或使用执行相同操作的已定义函数切换出来。从 ndk 代码中验证您的应用程序的完整性/许可，如果它失败，则终止应用程序或您需要做的任何事情。

为了绕过这个，黑客需要重新实现 ndk 代码或对其进行逆向工程。这应该更复杂，不值得。

这显然不是一个简单的解决方案，仍然不能保证您的应用程序永远不会被黑客入侵，但它应该比其他方法更难破解..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-19T08:44:47.473

我个人认为，如果使用得当，混淆 {Proguard, Dexguard} 和原生 {.so} 是非常有效的方法。

它肯定会阻止经验不足的“玩家”，并且肯定会使甚至有经验的“玩家”的生活复杂化

不要简单地复制/粘贴 Google android 示例代码....

# ruby-on-rails - 单个自定义终端命令打开多个窗口，里面有不同的东西

> ID：10904533
> 
> 赞同：1
> 
> 时间：2012-06-05T20:35:48.590
> 
> 标签：ruby-on-rails, linux, bash, ubuntu, terminal

当我打开笔记本电脑时，我发现自己正在运行相同的终端命令。我按 ctrl+alt+t 打开一个新的终端窗口。（我是在 Ubuntu 12.04 上使用 RoR 的初学者）

1.  我打开新的终端窗口并导航到 Rails 文件夹并运行**vim**
2.  我打开另一个终端窗口，导航到 Rails 文件夹并运行 ' **bundle exec guard** '
3.  我打开另一个窗口，然后运行**​​rails 控制台**
4.  我打开另一个运行**Rails 服务器的窗口**
5.  我打开另一个带有**IRSI**的窗口（上面有 IRC 客户端）

如何使用单个终端命令执行这些操作？我想需要一个自定义脚本，但我不知道如何编写它或将它放在哪里......另外，如果可能的话，我想在全屏终端窗口中打开它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:42:46.950

您可以使用`tmux`这些类型的员工。例如，下面的示例将创建 5 个窗口（它们是选项卡），每个窗口都以第一个参数命名`-n`，然后执行。

```
#!/bin/sh
tmux new-session -d -s hawkhost

tmux new-window -t hawkhost:1 -n 'vim' 'vim'
tmux new-window -t hawkhost:2 -n 'bundle' 'bundle exec guard'
tmux new-window -t hawkhost:3 -n 'rails1' 'rails console'
tmux new-window -t hawkhost:4 -n 'rails2' 'rails server'
tmux new-window -t hawkhost:5 -n 'irc' 'irsii'

tmux select-window -t hawkhost:1
tmux -2 attach-session -t hawkhost 
```

在此处查看有关此内容的更多信息：

[http://blog.hawkhost.com/2010/07/02/tmux-%E2%80%93-the-terminal-multiplexer-part-2/#tmux-shell-scripting](http://blog.hawkhost.com/2010/07/02/tmux-%E2%80%93-the-terminal-multiplexer-part-2/#tmux-shell-scripting)

在 tmux`panes`中是任意窗口，`windows`实际上是选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:39:02.440

您需要一个屏幕多路复用器，例如[GNU Screen](http://www.gnu.org/software/screen/)或[tmux](http://tmux.sourceforge.net/)。

# vb.net - 将以下 VB 代码转换为 LINQ 语句？

> ID：10904535
> 
> 赞同：0
> 
> 时间：2012-06-05T20:35:56.037
> 
> 标签：vb.net, linq-to-sql

我只想通过 LINQ 的 Take 将一定数量的行返回到 DataTable 中，或者在 Rows 属性上使用它，但我不确定如何或在哪里执行它：这是当前代码：

```
 Dim dt As DataTable = GetDataTable("sp", params)
 For Each dr As DataRow In dt.Rows
        Dim o As New OR()
        o.P = p
        o.Id = dr ("A")
        o.R = dr ("B")
 Next 
```

会不会是这样的：

```
Dim dt As DataTable = GetDataTable("sp", params).AsEnumerable().Take(10) 
```

当我运行上面的，我得到错误：

`The 'TakeIterator' start tag on line 4 position 60 does not match the end tag of 'Error'. Line 4, position 137.`

`Unable to cast object of type '<TakeIterator>d__3a`1[System.Data.DataRow]' 输入'System.Data.DataTable'。`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:45:14.407

如果你需要一个`DataTable`：

```
Dim dt As DataTable = (From row in GetDataTable("sp", params) Take 10).CopyToDataTable() 
```

如果你需要一个`List(Of [Or])`（你需要括号，因为`Or`它是一个关键字）

```
Dim list As List(Of [Or]) = (From row In GetDataTable("sp", params)
                            Select New [Or]() {
                                o.Id = row.Field(Of Int32)("Id"),
                                o.R =  row.Field(Of String)("R")
                            }).Take(10).ToList() 
```

**编辑**：

> 有没有办法我也可以在 Take 中包含一个 Where，例如，我的表中有 3 个状态，Open、Semi-Open、Closed，我只想拿 10 表示 Open，但我想离开 Semi-Open并单独关闭。例如，Semi-Open 和 Closed 将合并 5 条记录，我将从 Open 中取出 10 条记录，所以我总共会得到 15 行

是的，有一个方法：

```
Dim dt =  GetDataTable("sp", params)
Dim open10 = From row In dt
             Where row.Field(Of String)("Status") = "Open"
             Take 10
Dim rest = From row In dt
           Where row.Field(Of String)("Status") <> "Open"
Dim tblResult = open10.Concat(rest).CopyToDataTable() 
```

# python - 在 Python 中，如何将从 mySQL 获取的日期转换为任何格式化字符串，例如 (%d-%m-%Y)

> ID：10904537
> 
> 赞同：1
> 
> 时间：2012-06-05T20:36:17.683
> 
> 标签：python, mysql

我很难将 Python 中的日期（从 mySQL 获取）格式化为以下任何一个（%d-%m-%Y）、（%m-%d-%Y）。在我看到它们对我的图表做了什么之前，我认为这里有一些例程我认为有效。

这是电话：

```
ListOfCoIDs = dennislib.TopMeetingforCompany(clientID,1,2,MeeTs,Servcs)
CoMeetings = []
for co_id in ListOfCoIDs:
    try:
        pp = co_id
        j=0
        meetings = []
        res      = []
        theCOID = pp['coID']
        meetings.append(str(pp['MeetingId']))                     #  0
        print "MEETING DATE = ",pp['Date']
        meetings.append(**EnglishDate**(pp['Date']))                  #  1
        meetings.append(pp['Time'])                               #  2
        meetings.append(pp['Type'])                               #  3
        meetings.append('') 
```

这些是从上述EnglishDate发出的电话

```
def EnglishDate(tme=time.time()):
    print "Incoming date = ", tme, time.strftime("%d-%m-%Y")
    return time.strftime("%d-%m-%Y")            #,time.localtime(tme))

def EnglishDatetime(tme=time.time()):
    print "Incoming date = ", tme, time.strftime("%d-%m-%Y %H:%M:%S")
    return time.strftime("%d-%m-%Y %H:%M:%S")   #,time.localtime(tme))

def EnglishDateTime2Date(tme=time.time()):
    print "Incoming date EDT2Date = ", tme, time.strftime("%d-%m-%Y")
    return time.strftime("%d-%m-%Y")            #,time.localtime(tme))

def ISODate(tme=time.time()):
    print "ISO date = ", tme, time.strftime("%d-%m-%Y")
    return time.strftime("%Y-%m-%d")            #,time.localtime(tme)) 
```

这些所做的是将提供的日期替换为今天的日期。然而，当我手动尝试时，我似乎得到了正确的日期。运行代码有什么技巧吗？

TIA

丹尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T00:47:14.513

问题是对时间的引用。

```
def EnglishDate(tme=time.time()):
    print "Incoming date = ", tme, time.strftime("%d-%m-%Y")
    return time.strftime("%d-%m-%Y")            #,time.localtime(tme)) 
```

“time.strftime”应该是“tme.strftime”。我没有对传递的参数采取行动。相反，我得到的是当前日期！

生活学习......这应该是

```
def EnglishDate(tme=time.time()):
    print "Incoming date = ", tme, tme.strftime("%d-%m-%Y")
    return tme.strftime("%d-%m-%Y")            #,time.localtime(tme)) 
```

谢谢你们。你们都很有帮助……尤其是@Not_a_Golfer

丹麦

# c# - 减少日历上的加载时间

> ID：10904538
> 
> 赞同：0
> 
> 时间：2012-06-05T20:36:20.493
> 
> 标签：c#, asp.net, optimization

下面你会看到我的网站日历的代码，问题是这段代码需要大约 8-10 秒才能加载。如果你们中的任何人都可以找到一种方法来最大限度地减少加载时间，我将不胜感激。

```
 public static IEnumerable<DateTime> AllDatesInMonth(int year, int month)
    {
        foreach (var day in Enumerable.Range(1, DateTime.DaysInMonth(year, month)))
        {
            yield return new DateTime(year, month, day);
        }
    }

    public void ForeachDayInMonth(int year, int month, SqlConnection connection)
    {
        int day;
        int count;
        double divHeight;

        lbl_Month.Text += "<table class=\"Month\">";
        foreach (DateTime date in AllDatesInMonth(year, month))
        {
            day = int.Parse(date.ToString().Substring(0, 2));
            count = Begivenheder.Get_Begivenhed_By_Date(year, month, day, connection).Count; // Creates a sql select statement

            lbl_Month.Text += "<tr>" +
                "<td style=\"height: 30px; width: 70px;";

            if (date.Date == DateTime.Today)
            {
                lbl_Month.Text += "-webkit-box-shadow:inset 0px 0px 20px rgba(000,000,000,0.8);" +
                    "-moz-box-shadow:inset 0px 0px 20px rgba(000,000,000,0.8);" +
                    "box-shadow:inset 0px 0px 20px rgba(000,000,000,0.8);";
            }

            lbl_Month.Text += "\">";

            if (count != 0)
            {
                divHeight = 100 / count;

                foreach (Begivenheder b in Begivenheder.Get_Begivenhed_By_Date(year, month, day, connection)) // creates a sql select statement
                {
                    lbl_Month.Text += "<div style=\"background-color: " + b.begivenhed.type.TypeFarve + "; height: " + divHeight + "%;\">" +
                        "<a href=\"KalenderEvent.aspx?Event=" + b.begivenhed.ID + "\">";
                    if (b.begivenhed.Navn.Length > 9)
                    {
                        lbl_Month.Text += b.begivenhed.Navn.Remove(9) + "...";
                    }
                    else
                    {
                        lbl_Month.Text += b.begivenhed.Navn;
                    }
                    lbl_Month.Text += "</a>" +
                        "</div>";
                }
            }

            lbl_Month.Text += "</td>" +
                "</tr>";
        }
        lbl_Month.Text += "</table>";
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        string year;

        if (Request.QueryString["Year"] == null)
        {
            year = DateTime.Today.Year.ToString();
        }
        else
        {
            year = Request.QueryString["Year"];
        }

        Page.Title += " - Kalender " + year;

        SqlConnection connection = new SqlConnection(ConfigurationManager.AppSettings["Database"]);
        connection.Open();
        try
        {
            Year(int.Parse(year), connection);
        }
        finally
        {
            connection.Close();
        }
    }

    private void Year(int year, SqlConnection connection)
    {
        string thisYear = year.ToString();
        int lastYear = year - 1;
        int nextYear = year + 1;

        lbl_Year.Text = "<div>" +
            "<a href=\"Kalender.aspx?Year=" + lastYear.ToString() + "\" id=\"LastYear\"></a>" +
            "</div>" +
            "<div>" +
            thisYear +
            "</div>" +
            "<div>" +
            "<a href=\"Kalender.aspx?Year=" + nextYear.ToString() + "\" id=\"NextYear\"></a>" +
            "</div>";

        lbl_Month.Text = "<table>" +
            "<tr>" +
            "<td>";
        // Dage
        lbl_Month.Text += "<p>" +
            "</p>" +
            "<br />" +
            "<table>";
        for (int i = 1; i <= 31; i++)
        {
            lbl_Month.Text += "<tr>" +
                "<td style=\"height: 30px;\">" +
                "<p>" +
                i.ToString() +
                "</p>" +
                "</td>" +
                "</tr>";
        }
        lbl_Month.Text += "</table>" +
            "</td>";

        //Januar (repeats 12 times, ones for each month)
        lbl_Month.Text += "<td>" +
            "<p>" +
            "Januar" +
            "</p>";
        ForeachDayInMonth(int.Parse(thisYear), 1, connection);
        lbl_Month.Text += "</td>";

        lbl_Month.Text += "</tr>" +
            "</table>";
    } 
```

继承人“Begivenheder.Get_Begivenhed_By_Date”代码。

```
 public static List<Begivenheder> Get_Begivenhed_By_Date(int år, int måned, int dag, SqlConnection connection)
    {
        List<Begivenheder> result = new List<Begivenheder>();

        using (var command = new SqlCommand("Select ID, FK_Begivenhed_ID from Begivenhed_Datoer where Dag=" + dag + " and Måned=" + måned + " and År=" + år, connection))
        {
            SqlDataReader reader = command.ExecuteReader();
            try
            {
                while (reader.Read())
                {
                    Begivenheder b = new Begivenheder();
                    b.Dato_ID = reader.GetInt32(0);
                    b.ID = reader.GetInt32(1);
                    b.Dato_Day = dag;
                    b.Dato_Month = måned;
                    b.Dato_Year = år;
                    result.Add(b);
                }
            }
            finally
            {
                reader.Close();
            }

            foreach (Begivenheder b in result)
            {
                b.begivenhed = Begivenheder.Get_Begivenhed_By_ID(b.ID, connection);
            }
        }

        return result;
    } 
```

我知道这是一堆代码，但我不知道如何减少它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:44:12.017

每个 page_load 都会导致 cca 30 数据库查询 - 那是很多开销，请尝试修改它，以便您只需要与数据库交谈一次，如果有的话。除此之外，获取 .NET 分析器并查看您花费最多时间的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T20:44:37.013

您可以通过获取整个间隔的所有事件来提高性能，而不是为每个日期执行一个查询。鉴于您当前的数据模型很容易更改，您似乎希望在一个月内完成所有事件。

如果您*确实*选择每天执行一个查询，请`SqlCommand`通过添加`SqlParameters`来重复使用相同的查询，而不是重新构建一个全新的查询 28-31 次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T20:40:36.613

基本的字符串优化会产生很大的不同。在您`string +=`使用字符串生成器的地方。然后当所有计算完成后，使用 .ToString() 方法将 StringBuilder 转换为字符串。

请参阅 MSDN [StringBuilder 类](http://msdn.microsoft.com/en-us/library/2839d5h5%28v=vs.100%29.aspx)

还将代码替换`string + string + string`为 AppendFormat 方法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T21:06:44.083

1）用途：

```
day = date.Day; 
```

代替：

```
day = int.Parse(date.ToString().Substring(0, 2)); 
```

2) 将此长样式放入样式表/CSS 中，并改用短 class='name'：

```
webkit-box-shadow:inset 0px 0px 20px rgba(000,000,000,0.8);" +
                    "-moz-box-shadow:inset 0px 0px 20px rgba(000,000,000,0.8);" +
                    "box-shadow:inset 0px 0px 20px rgba(000,000,000,0.8); 
```

3) 您每天调用 Begivenhed_By_Date 两次：

```
1)     count = Begivenheder.Get_Begivenhed_By_Date(year, month, day, connection).Count;
2)    foreach (Begivenheder b in Begivenheder.Get_Begivenhed_By_Date(year, month, day, connection))
could be:
+)    List<Begivenheder> hedByDate = Begivenheder.Get_Begivenhed_By_Date(year, month, day, connection);
1.x   count = hedByDate.Count;
2.x   foreach (Begivenheder b in hedByDate, connection)) 
```

4) 至少先使用 StringBuilder 连接 lbl_Month.Text += 字符串，然后最后分配。

5) 研究使用中继器控件，因此您不必像这样在代码中乱扔 HTML。

6) 更改它，以便您只执行一次 SQL 查询，而不是多次。

# facebook - Facebook Open Graph 自定义对象层次结构

> ID：10904542
> 
> 赞同：0
> 
> 时间：2012-06-05T20:36:42.483
> 
> 标签：facebook, facebook-opengraph

我创建了两个新的 Open Graph 对象类型 TypeA 和 TypeB。TypeA 有很多 TypeB。我有一个可以对 TypeA 执行的操作 ActionA。当对 TypeA 执行 ActionA 时，TypeA 实例有许多 TypeB。这些 TypeB 实例没有出现在 Open Graph 中（Facebook 没有抓取这些页面，当我在新闻提要中看到这些对象时，TypeB 对象不存在）。在引用它们之前，我是否需要在 Open Graph 中创建这些 TypeB 实例？如果是这样，我该如何创建它们？

编辑1：

我发现当我要求 FB 重新抓取 TypeA 页面时，我能够在新闻源中看到 TypeB 实例。看起来可能有比赛条件？我已经验证，当我将我的 TypeA 实例通知 FB 时，TypeA 页面可用并且 TypeB 页面可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:42:09.497

> 这些 TypeB 实例没有出现在 Open Graph 中（Facebook 没有抓取这些页面，当我在新闻提要中看到这些对象时，TypeB 对象不存在）

如果您没有对它们采取任何具体行动，为什么它们应该是？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:45:02.910

尝试对它们进行 linting 以强制 Facebook 刷新它们？

[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

# excel - excel和机械土耳其人

> ID：10904547
> 
> 赞同：0
> 
> 时间：2012-06-05T20:37:10.190
> 
> 标签：excel, if-statement, mechanicalturk

我正在尝试在同一个 Excel 工作表的不同列和单元格中搜索相同的字符串。具体来说，我正试图用它来批准机械土耳其人。我将人员的 MTurk ID 列表复制并粘贴到我用来批准人员的下载 CSV 文件（来自机械土耳其人）中。所以我在这个下载的 csv 文件的末尾添加了两列，它们是 Mturk ID 和 1 或 0，表示它们是否应该被批准。我正在尝试编写一个函数，它将搜索包含所有 MTurk ID 的两列，然后查看 ID 旁边是否有 1 或 0，从而指示它们是否应该被批准。有人可以帮帮我吗？？我认为这可以通过 IF 语句来完成。不幸的是，我不熟悉 VBA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:53:42.697

听起来您需要一个 Vlookup 函数来从您的 ID 列表中查找 1 或 0。vlookup 的工作方式是在数据范围内查找某个值（如机械土耳其人 id），并返回与找到的匹配在同一行上的任何数据。

例如，如果您的数据位于一组单元格中，假设 A 列有 MTurkId，B 列有姓氏，C 名，等等，并且您的查找 id 和 0 和 1 在从 T1 到 U10 的单元格（例如，为了举例说明 10 个 id 的列表），您可以在数据右侧的列中插入一个 vlookup（在本例中假设为 D 列）。它看起来像：

```
=vlookup(A1, T1:U10, 2, false) 
```

第一个参数是您要查找的值（机械土耳其人 id）。第二个是您要查找 id 的范围 - 潜在的匹配 ID 必须在 T 列中 - 您标识的范围中的第一列，U 列必须是您的 0 或 1。 2 告诉它您想要返回数据范围中的第二列，在这种情况下是 U 列中的 0 或 1。 false 告诉它您想要精确匹配而不是近似匹配（我从来没有找到使用近似匹配的原因，所以我在这里总是使用 false ）。

如果这没有意义，请谷歌 vlookup，您应该会找到很多示例和更多信息。

# ios - 设计一个圆形的“选择器”控件

> ID：10904551
> 
> 赞同：1
> 
> 时间：2012-06-05T20:37:21.620
> 
> 标签：ios, user-interface

我正在开发一个计算扑克赔率的应用程序，现在我遇到了卡片选择器的一些问题。这是我想要的模型。

![卡片选择器模型](../Images/e03d67b3eecfd801e69e0a282252a0d7.png)

我找到了两种方法来实现这一点。第一个是使用整体`UIImageView`并检测触摸，计算触摸产生的位置，并设置相应的值。第二个是使用很多`UIButton`s，但在这种情况下，我遇到了按钮形状的问题。

当然我可以使用普通的`UIPickerView`等等，但我认为我设计的那个更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:54:02.967

如果您有一个带有不规则背景图像的 UIButton。那么这是唯一可以按下按钮的点。

将类型更改为自定义并将切片放入按钮中。

无论如何，这一直是我的经验。

我的按钮必须有 .01 alpha 背景才能增加它们的焊盘尺寸，并且人们可以按下按钮。

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T07:56:22.273

谷歌搜索了一下后，我发现了[https://github.com/ole/OBShapedButton](https://github.com/ole/OBShapedButton)。它做我需要的任何事情

# jquery - 使用 Jquery 设置隐藏字段的值

> ID：10904554
> 
> 赞同：2
> 
> 时间：2012-06-05T20:37:37.867
> 
> 标签：jquery, ruby-on-rails

您好，当用户在 RoR 应用程序中创建记录时，我正在尝试运行 create.js.erb 文件。

这是jQuery：

```
$('input[id=bizid]').val("<%= @branch.business_id %>");
$('input[id=braid]').val("<%= @branch.id %>"); 
```

这是视图：

```
<input style="display:none;" id="bizid" name="bizid" value="" />
<input style="display:none;" id="braid" name="braid" value="" /> 
```

我也试过这个：

```
$('#bizid').val("<%= @branch.business_id %>");
$('#braid').val("<%= @branch.id %>");

<input type="hidden" id="bizid" name="bizid" value="">
<input type="hidden" id="braid" name="braid" value=""> 
```

我知道机器正在工作，因为我使用@branch 以相同的形式更新另一个文本输入字段，没有任何问题。另外，我检查了数据库，@branch 的上述值确实存在，应该可以通过了。

谢谢！

编辑：

```
alert("<%= @branch.business_id %>");
alert("<%= @branch.id %>"); 
```

以上（放置在 create.js.erb 中）会在两个警报对话框中生成正确的 id #s。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T02:36:19.610

你试过这个吗？

```
$('#bizid').val("<%= @branch.business_id %>");
$('#bizid').val("<%= @branch.id %>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:47:23.263

确保您的代码在文档就绪函数中：

```
$(function(){

   /** YOUR CODE **/

}); 
```

还要确保你们所有人的 id 都是**唯一的**。

# string - 如何在 R 中绘制格式化为字符串的函数

> ID：10904557
> 
> 赞同：2
> 
> 时间：2012-06-05T20:37:45.623
> 
> 标签：string, r, plot, rapache

我正在使用 RApache 构建应用程序，并且我在 R 中的代码正在接收 POST 数据。其中一个发布数据是 POST$f，它是一个字符串，比如“sin(x)”。有什么办法可以成功地将它放入绘图功能中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:53:42.967

```
fun <- "sin(x)"
plot(function(x) eval(parse(text=fun))) 
```

但这不是我推荐的。`eval(parse(...))`已经很危险了，然后使用来自网站的任意用户输入来做到这一点只是一个巨大的安全漏洞。

```
# PLOTTING THIS FUNCTION AS ABOVE WILL DELETE EVERYTHING IN YOUR GLOBAL WORKSPACE
fun <- "{rm(list=ls(pos=1),pos=1); x}"
# DON'T SAY I DIDN'T WARN YOU! 
```

甚至`system()`用来做更坏的事情。

# android - FTS3 在 ORMLite 中搜索？

> ID：10904558
> 
> 赞同：2
> 
> 时间：2012-06-05T20:37:47.423
> 
> 标签：android, ormlite

我对 FTS3 一无所知，除了[http://developer.android.com/guide/topics/search/search-dialog.html](http://developer.android.com/guide/topics/search/search-dialog.html)说

> 执行全文搜索（使用 FTS3，而不是 LIKE 查询）可以在文本数据中提供更强大的搜索，并且可以显着更快地生成结果

不过，我在 ORMLite 文档中没有看到任何提及 FTS3 的内容。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:40:41.737

[抱歉， ORMLite](http://ormlite.com/)中没有对此的直接支持。如果底层数据库支持这一点，那么您可以使用 ORMLite 的原始查询接口来处理对数据库的原始查询。请参阅此处的文档：

> [http://ormlite.com/docs/raw-queries](http://ormlite.com/docs/raw-queries)

# java - 在另一个 Maven 项目中包含一个 Maven 项目的 Jar 不起作用，但在另一个 Maven 项目中包含该项目有效

> ID：10904570
> 
> 赞同：0
> 
> 时间：2012-06-05T20:39:14.180
> 
> 标签：java, exception, maven, maven-plugin, maven-jar-plugin

我有 2 个项目，即`Project_1`和`Project_2`. 这两个项目都是`Maven`，我正在使用 Netbeans。

我想包括我正在这样做`Project_1`的[罐子](https://stackoverflow.com/questions/9473537/how-to-include-jar-in-maven-netbeans-proj-that-doesnt-exist-in-maven-repo)。`Project_2`

问题是当我包含 jar 时，我没有收到任何编译时错误，但是`NoClassDefFoundError`在运行时出现异常。

当我通过执行[此处](http://mrhaki.blogspot.de/2009/07/add-maven-dependency-in-netbeans.html)提到的步骤将其包含在内`Project_1`时。（开放项目示例）。我没有收到任何错误。运行时和编译时都不是。`Project_2`

你能解释一下我在这里缺少什么吗？

**更新**

`Project_2`部署在不在我的本地机器上但`Project_1`在我的本地机器上的服务器上。

包含在`Project_1`项目`Project_2`中是为了在我的本地机器上进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:00:22.647

首先，一个好的经验法则是永远不要使用[系统范围和系统路径](http://maven.apache.org/pom.html#Dependencies)来引入依赖项。根据我的经验，总是有更好的方法:-)

如果 Project_2 依赖于 Project_1，则首先将其 jar 安装到本地存储库中：

```
 cd Project_1
   mvn clean install 
```

观察输出你会发现 jar 被放置在以下目录下的某处：

```
 $HOME/.m2/repository 
```

完成此操作后，jar 将作为第二个构建的正常依赖项可用

```
 cd Project_2
  mvn clean compile 
```

本地存储库确保项目现在相互分离。假设您使用的是 Project_1 的快照修订版，Project_2 构建将始终检索构建和测试的最新修订版。

# 更新

您应该使用[Maven 存储库管理器](http://maven.apache.org/repository-management.html)在机器/团队之间共享 jar。建议包含在以下答案中：

[与另一个团队共享模块的 jar](https://stackoverflow.com/questions/9201195/share-jar-of-the-module-with-another-team/9202409#9202409)

如何配置 Maven 以使用像 Nexus 这样的存储库在它的[文档](http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html)中进行了描述。

如[部署插件文档](http://maven.apache.org/plugins/maven-deploy-plugin/usage.html)中所述，您需要向您的 POM 添加一个*distributionManagement*部分（详细说明存储库 URL），然后将项目的 jar 上传到您的存储库，如下所示：

```
 cd Project_1
   mvn clean deploy 
```

# xsd - 使用 Xsd 确保子元素不能在没有父元素的情况下存在

> ID：10904571
> 
> 赞同：0
> 
> 时间：2012-06-05T20:39:14.273
> 
> 标签：xsd

我在尝试在 xsd 中进行此模式验证时遇到问题。

有效案例

```
<root>
   <groups>
      <group/>
   </groups>
</root>

Valid case
<root>
<groups/>
</root> 
```

无效案例

```
<root>
  <group/>
</root> 
```

如何通过xsd保证某个特定的子元素只能存在于某个父元素下，而不是单独存在于xml中？

在这个例子中，组不能单独存在，但是当组是父组时可以存在......

有人回答说不要使组元素全局化，即将它包含在组元素中......

但是可能存在一种情况，其中 group 不是 parent 的直接孩子。例如有效案例

```
<groups>
<class>
   <group>
</class>
</groups> 
```

在这种情况下应该做什么......因为类也需要引用组......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T23:08:27.617

根据您的问题，在我看来，您更希望班级和小组可以互换。为此，您想使用递归模式元素，就像这样......

```
<xsd:element name="Groups">
    <xsd:complexType>
        <xsd:complexContent>
            <xsd:extension base="BranchType"/>
        </xsd:complexContent>
    </xsd:complexType>
</xsd:element>

<xsd:complexType name="BranchType">
    <xsd:sequence>
        <xsd:choice minOccurs="0" maxOccurs="unbounded">
            <xsd:element name="Class" type="BranchType" minOccurs="0" maxOccurs="1"/>
            <xsd:element name="Group" minOccurs="0" maxOccurs="1"/>
        </xsd:choice>
    </xsd:sequence>
</xsd:complexType> 
```

我们基本上定义了一个 BranchType，它可以包含任何 Group 元素或其自身的组合（通过 Class 元素）。然后我们将顶级 Groups 定义为 BranchType 类型。我使用选择序列，以便 Class 和 Group 元素可以以任何顺序、任何次数出现在任何级别的嵌套中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T00:42:38.080

当您不希望元素自己显示时，必须在定义其父级的复杂类型中声明它。

下面是一个由工具生成的简单“修复”；学习时，它可能证明是快速启动 XSD 的好方法，至少可以让语法正确......

更新：如果您继续添加内容，则需要更新架构。如果元素不是全局元素，那么解决方案是相同的：在其父元素中定义。如果内容模型相同，则将其定义为全局类型，并在元素的定义中引用它（在这种情况下，它将代替 anyType）。

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="root">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="groups">
          <xs:complexType>
            <xs:sequence minOccurs="0">
              <xs:element name="group" type="xs:anyType" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="groups">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="class">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="group" type="xs:anyType" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

# javascript - 在 mongodb 查询中操作列表

> ID：10904578
> 
> 赞同：1
> 
> 时间：2012-06-05T20:40:04.410
> 
> 标签：javascript, node.js, mongodb, socket.io

这里的第一个问题，所以希望我做对了......

我正在尝试做的一个笑话是添加到查询内的列表中，然后能够将此列表从 node.js 传递给我的客户端。我的代码（简化）如下：

```
socket.on('get_new', function() {   
var db = require('mongojs').connect('test', ['col1']);
var db2 = require('mongojs').connect('test', ['col2']);

db.col1.find( function(err, tups) {

    var total = [];

    if ( err || !rows ) { console.log("error") };
    else { 

          for(row in tups){ 
               var id = row['id'];

               db2.col2.find({name:id}, function(foo, bar){

                  if ( foo || !bar ) { console.log("error") }; 
                  else {

                     total += { name : bar['age'] };
                     console.log(total); //prints [ {alex:'20'}]
                  }
               }
           }
    }

  console.log(total); // prints []

}
} 
```

正如我在代码中展示的那样，我已经放置了一些 console.log 语句来查看该值，它在查询内部与之后是不同的。我猜它与这段代码的范围有关，在我看来好像 after`db.test2.find`运行，里面发生的事情在外面不存在，但我不明白为什么。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:47:04.037

代码是异步的。这在实践中意味着您的最后一条语句：`console.log(total);`在第一条语句之前执行。要打印实际总数，您需要将该代码包装在如下函数中：

```
function myFnForTotal(notifyTotal) {

/* your code above the else  */
 total += someTotal;
 console.log(total); //prints [ {alex:'20'}]
 notifyTotal(total);
/* your code below else */
}

myFnForTotal(function(total) {
  console.log(total);
}); 
```

# matlab - MATLAB - 通过垂直连接子矩阵重新排列矩阵

> ID：10904579
> 
> 赞同：4
> 
> 时间：2012-06-05T20:40:07.273
> 
> 标签：matlab, matrix

我在执行以下任务时遇到问题：假设一个 3x6 矩阵：

一个=

```
0.2787    0.2948    0.4635    0.8388    0.0627    0.0435
0.6917    0.1185    0.3660    0.1867    0.2383    0.7577
0.6179    0.7425    0.0448    0.4009    0.9377    0.4821 
```

我想做的是将矩阵分成块，如下所示：

一个=

```
0.2787    0.2948  |  0.4635    0.8388  |  0.0627    0.0435
0.6917    0.1185  |  0.3660    0.1867  |  0.2383    0.7577
0.6179    0.7425  |  0.0448    0.4009  |  0.9377    0.4821 
```

并垂直连接这些块以获得最终结果：

```
0.2787    0.2948 
0.6917    0.1185  
0.6179    0.7425  
0.4635    0.8388
0.3660    0.1867
0.0448    0.4009
0.0627    0.0435
0.2383    0.7577
0.9377    0.4821 
```

我想如果我能得到帮助，那么我也许可以为任意矩阵 A 做这件事。我可以使用 for 循环解决上述问题，但我正在寻找一个向量化的解决方案。

提前致谢！N。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T21:03:54.377

考虑以下：

```
A = rand(3,6);
blkSz = 2;

C = mat2cell(A, size(A,1), blkSz*ones(1,size(A,2)/blkSz));
C = cat(1,C{:}) 
```

这假设它`size(A,2)`可以被整除`blkSz`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T21:15:47.223

这适用于您的矩阵所在的位置`A`以及您想要的位置`D`

```
C = mat2cell(A,[3],[2 2 2])
D = cat(1,C{:}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-14T16:42:07.310

**没有** `cell2mat`, （仅使用`reshape`s 和）也可以做到这一点，`permute`因此速度要快得多！

您需要使用“第三维”。它类似于 [split long 2D matrix into the third dimension](https://stackoverflow.com/questions/1390909/split-long-2d-matrix-into-the-third-dimension)中描述的内容。

这是上述矩阵的解决方案：

```
A1 = reshape(A, 3, 2, []);  % 3rd dimension is numel(A)/2/3
A2 = permute(A1, [2 1 3]);  % transpose 1st and 2nd dimension
Ans= reshape(A2, 2, [])' ;  % note the transpose 
```

对于这种大小的矩阵，运行时间的差异可以忽略不计。但是，对于大型矩阵，差异超过一个数量级：

```
A=rand(3, 2*10000);

%% good method

tic
A1 = reshape(A, 3, 2, []); %3rd dimension is numel(A)/2/3
A2 = permute(A1, [2 1 3]);
A3 = reshape(A2, 2, [])' ; %note the transpose'
toc

%% mat2cell method

tic
blkSz = 2;
C = mat2cell(A, size(A,1), blkSz*ones(1,size(A,2)/blkSz));
B3 = cat(1,C{:});
toc

%% make sure the answer is the same:
assert(max(A3(:)-B3(:))==0) 
```

输出：

```
>> Elapsed time is 0.001202 seconds.
>> Elapsed time is 0.043115 seconds. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T21:06:34.643

这个怎么样：

```
width = 2; 
m = length(A(:))/width;
fn = @(i) reshape(A(:, i:width:end), m, 1);
B = cell2mat(arrayfun(fn, 1:width, 'UniformOutput', false)); 
```

`width`只需在变量中指定一次需要多少列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T21:20:04.097

通过垂直连接，假设矩阵宽度可被 3 整除：

```
B = [ A(:,1:(size(A,2)/3)); A(:,size(A,2)/3+1:size(A,2)/3*2); A(:,size(A,2)/3*2+1:end) ]; 
```

# php - 如何从 php 中的静态函数内部为公共变量赋值？

> ID：10904580
> 
> 赞同：3
> 
> 时间：2012-06-05T20:40:10.837
> 
> 标签：php, oop, variables, static-functions

我试过`$this->`但无法为`$first_name and $last_name`变量赋值。如果不删除函数的静态特性并且不向变量插入静态特性，我该如何回显`full_name()`？这是代码：

```
<?php

class User  {

    public $first_name;
    public $last_name;

  public function full_name() {
    if(isset($this->first_name) && isset($this->last_name)) {
    return $this->first_name . " " . $this->last_name;
    } else {
    return "No name!";
    }
   }

  public static function verify() {

    $this->first_name = "firstname";
    $this->last_name =  "last_name";
   }
  }

$user = new User();
User::verify();
echo $user->full_name()

?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T20:42:29.873

你不能。为什么不创建`verify`一个成员函数并像这样调用它

```
$user->verify(); 
```

另一种选择是将用户传递给验证功能，如下所示：

```
public static function verify( $user ) {
   $user->first_name = 'firstname';
   $user->last_name = 'last_name';
} 
```

并像这样调用：

```
User::verify($user) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T20:45:01.857

你真的不能......除了使用单例模式之外，这反而破坏了静态函数的意义。

基本思想是静态函数不需要实例，但你想要做的事情。
我建议在非静态 setter 函数或构造函数中验证数据。或者，如果需要，添加一个非静态的公共方法验证。
想一想：静态不需要实例，那么您在验证什么，如果没有实例（因此没有“ `$this`”）。

# android - imageview的透视校正

> ID：10904581
> 
> 赞同：4
> 
> 时间：2012-06-05T20:40:21.593
> 
> 标签：android, image-processing

我正在开发一个需要对用手机相机拍摄的照片应用透视失真校正的应用程序。拍摄照片后，想法是将其显示在图像视图上，并让用户标记文档的四个角（一张卡片、一张纸等），然后根据这些点应用校正。这是我试图实现的一个例子：

[http://1.bp.blogspot.com/-ro9hniPj52E/TkoM0kTlEnI/AAAAAAAAAbQ/c2R5VrgmC_w/s640/s4.jpg](http://1.bp.blogspot.com/-ro9hniPj52E/TkoM0kTlEnI/AAAAAAAAAbQ/c2R5VrgmC_w/s640/s4.jpg)

关于如何在**android**上执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-01-05T10:11:45.530

您**不必为此**使用**库**。您也可以将类的`drawBitmap`函数之一与使用类函数`Canvas`初始化的矩阵一起使用。`setPolyToPoly``Matrix`

```
public static Bitmap cornerPin(Bitmap b, float[] srcPoints, float[] dstPoints) {
    int w = b.getWidth(), h = b.getHeight();
    Bitmap result = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
    Paint p = new Paint(Paint.ANTI_ALIAS_FLAG);
    Canvas c = new Canvas(result);
    Matrix m = new Matrix();
    m.setPolyToPoly(srcPoints, 0, dstPoints, 0, 4);
    c.drawBitmap(b, m, p);
    return result;
} 
```

（*仅需要 Paint 对象来启用抗锯齿。*）

用法：

```
int w = bitmap.getWidth(), h = bitmap.getHeight();
float[] src = {
    0, 0, // Coordinate of top left point
    0, h, // Coordinate of bottom left point 
    w, h, // Coordinate of bottom right point
    w, 0  // Coordinate of top right point
};
float[] dst = {
    0, 0,        // Desired coordinate of top left point 
    0, h,        // Desired coordinate of bottom left point  
    w, 0.8f * h, // Desired coordinate of bottom right point
    w, 0.2f * h  // Desired coordinate of top right point
};
Bitmap transformed = cornerPin(bitmap, src, dst); 
```

其中`src`是源点`dst`的坐标，是目标点的坐标。结果：

[![在此处输入图像描述](../Images/454da96b3129a112306277758c887dd4.png)](https://i.stack.imgur.com/z2Ywe.png)

[![在此处输入图像描述](../Images/c53c5a7a1f435971568a0b69baa0ff06.png)](https://i.stack.imgur.com/9P3Ro.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T15:41:30.077

你想做的事情有各种艺术名称，“角针”是视觉效果行业中常用的一种。您需要分两步进行：

1.  计算从所需的校正图像到原始失真图像的映射
2.  根据（1）中计算的映射实际上扭曲原始图像。

原始图像的 4 个（非共线、透视失真）角和目标（未失真）图像的 4 个角定义了映射。这种映射称为“[单应性](http://en.wikipedia.org/wiki/Homography "同应性")” - 阅读指向的维基百科页面了解详细信息。一旦知道映射，就可以通过插值计算步骤（2）中的翘曲：对于目标图像中的每个像素，找到原始图像中的相应像素。由于这通常不会位于整数坐标处，因此您可以从邻居中插入其颜色。使用了各种插值方案，常见的是最近邻、双线性和双三次（在结果中按平滑度递增的顺序）。

对于 Android，我建议安装[OpenCV SDK](http://code.opencv.org/projects/opencv/wiki/OpenCV4Android)，然后使用[几何变换例程](http://docs.opencv.org/2.4/modules/imgproc/doc/geometric_transformations.html)（上述两个步骤的 getPerspectiveTransform 和 warpPerspective）。

# wordpress - Wordpress 管理员菜单关闭 https

> ID：10904583
> 
> 赞同：0
> 
> 时间：2012-06-05T20:40:27.387
> 
> 标签：wordpress

我在 IIS 6 上运行 wordpress 3.3.2。

当我没有 https 时，注销的管理菜单功能是 https。

如何关闭https？我玩过没有运气的源

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:58:10.210

我为 wordpress 卸载了一个 facebook 插件，它解决了这个问题。

# mysql - 再也看不到进程列表了

> ID：10904584
> 
> 赞同：1
> 
> 时间：2012-06-05T20:40:29.427
> 
> 标签：mysql

我正在将一个大型 csv 文件导入 mysql（3000 万行），并且我打开了另一个终端以显示进程列表。我曾经能够看到进程列表上的行数，但现在，每当我输入命令“显示进程列表”时，它就会挂起。我导入了 2000 万条记录。我必须重新开始吗？iostat: [user@gggggg ~]$ iostat Linux 2.6.18-308.4.1.el5

```
avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           5.02    0.00    0.16    0.87    0.00   93.95

Device:            tps   Blk_read/s   Blk_wrtn/s   Blk_read   Blk_wrtn
sda               2.15         5.31        55.58    8644514   90425752
sda1              0.00         0.00         0.00       2138       5592
sda2              2.15         5.31        55.57    8640178   90419984
sda3              0.00         0.00         0.00       1582        176

top - 14:18:55 up 18 days, 20:00,  2 users,  load average: 2.02, 2.09, 2.06
Tasks: 106 total,   3 running, 103 sleeping,   0 stopped,   0 zombie
Cpu(s):  0.2%us,  0.0%sy,  0.0%ni, 49.9%id, 49.8%wa,  0.0%hi,  0.2%si,  0.0%st
Mem:   8174532k total,  7656780k used,   517752k free,   105904k buffers
Swap:  4257216k total,       88k used,  4257128k free,  6958020k cached 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:57:17.053

首先，从操作系统检查文件大小

如果表名为 mydb.mytable 并且是 MyISAM，请执行以下操作：

```
cd /var/lib/mysql/mydb
watch ls -l mytable.* 
```

如果文件大小不断增长，你很好

不要忘记检查磁盘空间

```
df -h 
```

如果您在加载 MyISAM 表时磁盘空间不足，mysqld 就在那里。为什么？根据[**MySQL 5.0 认证学习指南第 408,409 页第 29.2 节要点 11**](https://rads.stackoverflow.com/amzn/click/com/0672328127)说：

> 如果在向 MyISAM 表添加行时磁盘空间不足，则不会发生错误。服务器暂停操作，直到空间可用，然后完成操作。

因此，如果数据分区的磁盘空间不足，您必须释放一些空间，以便 mysqld 可以继续`LOAD DATA INFILE`.

如果一切看起来都冻结了，您可能必须按如下方式杀死 mysqld：

```
IDTOKILL=`ps -ef | grep mysqld_safe | grep -v grep | awk '{print $2}'`
kill -9 ${IDTOFKILL}
IDTOKILL=`ps -ef | grep mysqld | grep -v grep | awk '{print $2}'`
kill -9 ${IDTOFKILL} 
```

然后，检查您的磁盘空间

# jquery - jQuery Mobile Enqueue - 在 WordPress 管理员中加载

> ID：10904590
> 
> 赞同：2
> 
> 时间：2012-06-05T20:40:55.157
> 
> 标签：jquery, wordpress, mobile, admin

我已根据文档正确地将脚本排入队列，但 jquery mobile 仍在管理员中加载。我的代码如下：

```
function mda_script_init() {
    if (!is_admin()) {
        wp_register_script( 'jquerypremobile', get_template_directory_uri() .'/library/js/jquery-pre-mobile.js', array( 'jquery' ), '1.0' );
        wp_enqueue_script( 'jquerypremobile' );
        wp_register_script( 'jquerymobile', 'http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js', array( 'jquery' ), '1.1.0' );
        wp_enqueue_script( 'jquerymobile' );
        wp_register_script( 'jqueryeffects', get_template_directory_uri() .'/library/js/jquery-effects.js', array( 'jquery' ), '1.0' );
        wp_enqueue_script( 'jqueryeffects' );
        wp_register_script( 'nwmatcher', 'http://s3.amazonaws.com/nwapi/nwmatcher/nwmatcher-1.2.5-min.js', false, '1.2.5' );
        wp_enqueue_script( 'nwmatcher' );
        wp_register_script( 'superfish', get_template_directory_uri() .'/library/superfish/supersubs.js', array( 'jquery' ), '1.4.8' );
        wp_enqueue_script( 'superfish' );
        wp_register_script( 'supersubs', get_template_directory_uri() .'/library/superfish/supersubs.js', array( 'jquery' ), '1.4.8' );
        wp_enqueue_script( 'supersubs' );    
    }
}
add_action('init', 'mda_script_init'); 
```

有谁知道发生了什么？或者我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T22:52:08.727

试试这个方法：

```
function mda_script_init() {
    wp_register_script( 'jquerypremobile', get_template_directory_uri() .'/library/js/jquery-pre-mobile.js', array( 'jquery' ), '1.0' );
    wp_enqueue_script( 'jquerypremobile' );
    // etc...
}
add_action('wp_enqueue_scripts', 'mda_script_init'); 
```

参考：[http ://codex.wordpress.org/Function_Reference/wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

^(*PS：WordPress的具体问题最好放在这里：[https ://wordpress.stackexchange.com/](https://wordpress.stackexchange.com/)*)

# c# - WCF 客户端安全默认为 Windows

> ID：10904591
> 
> 赞同：1
> 
> 时间：2012-06-05T20:41:13.603
> 
> 标签：c#, wcf, web-services

我正在尝试使用 wsHTTPBinding 并使用自定义用户名设置一个简单的 WCF Web 服务。我在远程服务器设置上有服务，在不同的端口上有自签名证书。例如：[https ://service.myserice.com:442/service1.svc](https://service.myserice.com:442/service1.svc)

由于某种原因，客户端似乎默认为 Windows 安全性，即使我已将其设置为用户名安全性。

这是我的网络服务配置文件：

```
<configuration>
<system.web>
<compilation debug="true" targetFramework="4.0" />
<customErrors mode="Off"></customErrors>
</system.web>
<system.serviceModel>
<services>
  <service name="AutoSenderWCF.Service1" behaviorConfiguration="Behavior1">
    <host>
      <baseAddresses>
        <add baseAddress="https://service.autosender.com.au:442/" />
      </baseAddresses>
    </host>
    <endpoint address="" binding="wsHttpBinding" bindingName="TransportBinding" contract="AutoSenderWCF.IService1"></endpoint>
    <endpoint address="mex"
      binding="mexHttpBinding"
      contract="IMetadataExchange" />
  </service> 

</services>
<bindings>
  <wsHttpBinding>
    <binding name="TransportBinding">
      <security mode="TransportWithMessageCredential">            
        <message clientCredentialType="UserName" />            
      </security>          
    </binding>        
  </wsHttpBinding>      
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="Behavior1">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true"/>

      <serviceCredentials>
        <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="AutoSenderWCF.CustomValidator, AutoSenderWCF"/>

      </serviceCredentials>
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

和我的客户代码（注意 ethe security=windows）

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <wsHttpBinding>
                <binding name="TransportBinding_IService1" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                    allowCookies="false">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="Message">
                        <transport clientCredentialType="Windows" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="Windows" negotiateServiceCredential="true"
                            algorithmSuite="Default" />
                    </security>
                </binding>
            </wsHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://service.autosender.com.au/Service1.svc"
                binding="wsHttpBinding" bindingConfiguration="TransportBinding_IService1"
                contract="ServiceReference1.IService1" name="TransportBinding_IService1">
                <identity>
                    <servicePrincipalName value="host/wserver" />
                </identity>
            </endpoint>
        </client>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:59:43.707

明确指定在客户端配置中使用 Windows：

```
 <security mode="Message">
                        <transport clientCredentialType="Windows" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="Windows" negotiateServiceCredential="true"
                            algorithmSuite="Default" />
                    </security> 
```

从服务器配置复制该部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T22:01:13.890

我相信我已经解决了：这条线。

```
<endpoint address="" binding="wsHttpBinding" bindingName="TransportBinding" contract="AutoSenderWCF.IService1"></endpoint> 
```

它不应该是 bindingName 它应该是 bindingConfiguration

# c# - 我可以信任 LoadOperation.Completed 事件吗

> ID：10904594
> 
> 赞同：0
> 
> 时间：2012-06-05T20:41:21.193
> 
> 标签：c#, silverlight, asynchronous, wcf-ria-services

假设我们有如下所示的代码，

```
LoadOperation lop=_dsrvX.Load(_dsrvX.GetUserDetails(userID));
lop.Completed +=(s,a)=>
{
  Debug.WriteLine("Completed but,
           First I load it then I registered Completed evet!");
} 
```

我到处都能看到这种类型代码，所以我想知道它是对的吗？

据我所知，当您调用 domainService 方法时，它会自动填充域服务对象的相关 EntitySet。

假设 LoadOperation(Can be Submit,Invoke ops.) 快速完成，当我传递到下一行注册完成事件时，一切都完成了。这可能吗？这似乎很难实现，但你能给我 100% 的保证吗？

如果你不能保证我在问是否有手动调用**OperationBase对象的方法？**

任何评论将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T21:48:07.813

好吧，这是一个疯狂的世界，我不会 100% 保证任何事情：P - 但我不认为这应该是一个问题。如果这让您感到困扰，您可以将回调作为参数传递，如下所示：

```
_dsrvX.Load(_dsrvX.GetUserDetails(userID), userDetailsCallBack, null);

(...)

void userDetailsCallBack(LoadOperation<UserDetails> op)
{
   //do anything with the results
} 
```

或者，为了进一步简化：

```
_dsrvX.Load(_dsrvX.GetUserDetails(userID), (op)=>
   {
       //do anything with the results  
   }, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T10:20:32.893

## 是的，您可以信任它 - 100% 保证！

如果您深入研究*异步* `Load`方法背后的代码，您会发现它启动了另一个线程来执行实际加载，然后立即返回。

然后，该单独的线程准备服务调用，执行服务调用，并*最终*返回结果数据。

在这一切完成之前，它无法触发 Completed 事件，并且我们正在谈论“很多”代码要通过，更不用说在 Web 服务上等待，而在线程启动后返回几乎是瞬时的。即其他线程没有机会完成并中断它。

**在下一行添加处理程序之前，加载完成的可能性为 0%。**

通常的方法是提供回调或匿名方法，但您现有的代码很好。当以这种方式设计时，MS 知道他们在做什么 :)

*在一个相关问题上，我与 Jon Skeet 有过争论，他的反应是你不知道该`Load`方法在做什么，因此它“可能”比返回更快发生......我务实的回答是我们确切地知道什么正在按照设计进行，并且在负载开始之前它 100% 返回*

# c - 动态创建线程并传递整数

> ID：10904596
> 
> 赞同：2
> 
> 时间：2012-06-05T20:41:26.483
> 
> 标签：c, multithreading, unix, pthreads

我有一个基于传递给进程的参数创建多个线程的进程。

```
producer_threads[num_threads];
for (id = 0; id < num_threads; id++)
{
    printf("%d\n", id);
    pthread_create(&producer_threads[id], NULL, &produce, (void *) &id);
} 
```

每个线程进入生产函数并将 id 存储为局部变量

```
void* produce (void* args)
{
    int my_id = * (int*) args;
    printf("Thread %d started to produce\n", my_id);
} 
```

但是我收到的输出如图所示

```
0
1
Thread <n> started to produce
Thread <n> started to produce 
```

和 n 随机为 0、1 或 2。我不确定是什么导致了问题，除非是因为全局变量在本地分配之前正在更新。或者因为“局部变量”在线程之间共享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:43:29.803

问题是您将指向*同一变量*的指针传递给每个线程。这会创建一个竞争条件，每个线程看到的变量值取决于确切的时间。

*如果您通过值*而不是指针传递线程参数，这将解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T20:45:13.887

整数需要是分配变量而不是堆栈变量。由于您将指针传递到堆栈上的内存位置，因此您的结果将取决于时间（即竞争条件）。您需要将不同的变量传递给每个 pthread_create 调用。

# java - 在运行时创建 Spring Bean

> ID：10904602
> 
> 赞同：1
> 
> 时间：2012-06-05T20:41:48.270
> 
> 标签：java, spring, quartz-scheduler

我正在尝试使用 @Configuration 和 @Bean 注释在运行时创建 bean。这样做的原因是我试图让 Spring 了解创建的 bean，以便它可以处理我正在创建的应用程序的调度。我已经像这样定义了带注释的类：

```
@Configuration  
public class GathererConfigBean {
    @Bean(name = "FactoryBean")
    public MethodInvokingJobDetailFactoryBean createMethodInvokingJobDetail(String service, Object obj, String method) throws ClassNotFoundException, NoSuchMethodException{
        MethodInvokingJobDetailFactoryBean jobDetailFactory = new MethodInvokingJobDetailFactoryBean();
        jobDetailFactory.setBeanName(service + "FactoryBean");
        jobDetailFactory.setTargetObject(obj);
        jobDetailFactory.setTargetMethod(method);
        jobDetailFactory.setConcurrent(false);
        jobDetailFactory.afterPropertiesSet();
        return jobDetailFactory;
    }

    @Bean(name = "TriggerBean")
    public CronTriggerBean createTriggerBean(String service, JobDetail job, String schedule) throws ParseException{
        CronTriggerBean trigger = new CronTriggerBean();
        trigger.setBeanName(service + "TriggerBean");
        trigger.setJobDetail(job);
        trigger.setCronExpression(schedule);
        return trigger;
    }

    public CronTrigger createTrigger(String service, JobDetail job, String schedule) throws ParseException{
        return createTriggerBean(service, job, schedule);
    }

    public JobDetail createJobDetail(String service, AbstractGatherer obj, String method) throws ClassNotFoundException, NoSuchMethodException{
        return (JobDetail) createMethodInvokingJobDetail(service, obj, method).getObject();
    }
} 
```

问题是，当我运行此程序时，我总是会遇到以下异常，并且我无法找到类似的在线示例。最初，我认为这是因为它们具有相同的名称，但似乎并非如此，因为当我只运行一个时，我得到了同样的错误。

```
 Exception in thread "main" org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'FactoryBean' defined in class path resource [com/linuxbox/enkive/statistics/gathering/GathererConfigBean.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [java.lang.String]: : No matching bean of type [java.lang.String] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [java.lang.String] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
Related cause: org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'FactoryBean': Requested bean is currently in creation: Is there an unresolvable circular reference?
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:730)
    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:461)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:983)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:879)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:93)
    at com.linuxbox.enkive.Main.run(Main.java:54)
    at com.linuxbox.enkive.MainJettyWebApps.main(MainJettyWebApps.java:53)
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [java.lang.String] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:920)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:789)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:795)
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:723)
    ... 16 more
Related cause:
org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'FactoryBean': Requested bean is currently in creation: Is there an unresolvable circular reference?
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.beforeSingletonCreation(DefaultSingletonBeanRegistry.java:297)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:216)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getTypeForFactoryBean(AbstractBeanFactory.java:1343)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryBean(AbstractAutowireCapableBeanFactory.java:678)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isTypeMatch(AbstractBeanFactory.java:507)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:317)
    at org.springframework.beans.factory.BeanFactoryUtils.beanNamesForTypeIncludingAncestors(BeanFactoryUtils.java:185)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:829)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:786)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:795)
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:723)
    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:461)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:983)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:879)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:93)
    at com.linuxbox.enkive.Main.run(Main.java:54)
    at com.linuxbox.enkive.MainJettyWebApps.main(MainJettyWebApps.java:53) 
```

任何帮助、反馈、想法或建议将不胜感激，如果您需要更具体的信息，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:04:50.337

我建议您在需要在执行依赖注入后立即执行的方法之一上使用**@PostConstruct注释。**查看此[链接](http://docs.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html)以了解更多信息。

另一种方法是让您的类实现**ApplicationContextAware**接口以访问应用程序上下文。有关它的更多详细信息，请参阅此[链接。](http://static.springsource.org/spring/docs/1.2.x/reference/beans.html)

希望这对您有所帮助。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T21:13:37.567

看起来 spring 无法为您的 Bean 方法解析 String 参数。看看他们使用 JavaConfig 构造数据源的[spring 文档。](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-java)如示例所示，您应该尝试使用 @Qualifier

```
@Autowired @Qualifier("quartz.service.name") String service;
// ... 
```

或 @Value 与 SpEL 表达式绑定字符串参数

```
@Value("${quartz.service.name"}) String service; 
```

Spring 文档没有提供使用`@Autowired @Qualifier`JavaConfig 作为方法参数注释的示例，但它应该与构造函数自动装配一致。

# c# - 使用 C# 获取 Windows 服务依赖项

> ID：10904603
> 
> 赞同：0
> 
> 时间：2012-06-05T20:41:52.930
> 
> 标签：c#, windows-services, wmi

我可以使用 PowerShell 很容易地做到这一点，但我正在寻找一种 C# 方法来做到这一点。使用 PS，我可以使用 Get-Service 来遍历集合并检查其中称为 DependentServices 和 RequiredServices 的集合，以获取给定服务的依赖和必需服务的列表。

我已经使用查询“Select * from Win32_Service”查看了 WMI 模型，但这会返回一个[Win32_Service](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394418%28v=vs.85%29.aspx)对象的集合，这些对象似乎没有我感兴趣的集合。我觉得我在这里遗漏了一些东西。我环顾四周并尝试了各种搜索，但我还没有找到以 C# 为中心的方法。

我想查询给定的服务并取回上面提到的集合（DependentServices 和 RequiredServices）。对不起，如果我错过了明显的，但我真的无法找到相关的话题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:48:54.620

您可以使用[ServiceController](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.aspx)类：

```
StringBuilder sb = new System.Text.StringBuilder();
foreach (var svc in System.ServiceProcess.ServiceController.GetServices())
{
    sb.AppendLine("============================");
    sb.AppendLine(svc.DisplayName);
    foreach (var dep in svc.DependentServices)
    {
        sb.AppendFormat("\t{0}", dep.DisplayName);
        sb.AppendLine();
    }
}

MessageBox.Show(sb.ToString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T21:00:47.117

您可以使用[`Win32_DependentService`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394120%28v=vs.85%29.aspx)WMI 类和 `Associators of`语句来检索相关服务。

试试这个样本

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    class Program
    {

        static void Main(string[] args)
        {
            try
            {
                string ComputerName = "localhost";
                ManagementScope Scope;                   
                Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), null);

                Scope.Connect();
                ObjectQuery Query = new ObjectQuery("Associators of {Win32_Service.Name='NetMan'} Where AssocClass=Win32_DependentService ResultClass=Win32_Service");
                ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);

                foreach (ManagementObject WmiObject in Searcher.Get())
                {
                    Console.WriteLine("{0,-35} {1,-40}","Name",WmiObject["Name"]);// String

                }
            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T20:47:55.573

您可以使用此属性 - [http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.dependentservices.aspx](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.dependentservices.aspx)

```
ServiceController sc =  new ServiceController("Event Log");
         ServiceController[] scServices = sc.DependentServices;

         // Display the list of services dependent on the Event Log service.
         if (scServices.Length == 0)
         {
            Console.WriteLine("There are no services dependent on {0}", 
                               sc.ServiceName);
         }
         else 
         {
            Console.WriteLine("Services dependent on {0}:",
                               sc.ServiceName);

            foreach (ServiceController scTemp in scServices)
            {
               Console.WriteLine(" {0}", scTemp.DisplayName);
            }
         } 
```

# ruby-on-rails - Rails 3.2 助手或作用域

> ID：10904604
> 
> 赞同：0
> 
> 时间：2012-06-05T20:42:03.657
> 
> 标签：ruby-on-rails, postgresql, refactoring, associations

我仍然在 Rails 中涉水，尽我所能。

我设置了以下关联：

```
Outlet **has_many** Monitorings  
Monitoring **belongs_to** Outlets 
```

如果我在**dashboard_controller.rb**中，我有以下循环：

```
@revoked_outlet = Outlet.where(:revoked => true) 
```

然后在视图中，我循环通过每个出口。**但是，在同一个循环中，我想获取:was_revoked => true**的最新监控。

根据惯例，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:50:42.440

在您看来，试试这个：

```
<% @revoked_outlet.each do |outlet| %>
  <%= outlet.monitorings.where("was_revoked = true").order(:created_at).last %>
<% end %> 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:54:03.997

跟进@Anil 的回答：

*   `monitorings`, 尾随**s**
*   我建议做`.where("was_revoked = true").order(:created_at)`一个范围`Monitoring`

# scala - Lift 中的数据库架构迁移

> ID：10904605
> 
> 赞同：5
> 
> 时间：2012-06-05T20:42:08.593
> 
> 标签：scala, migration, schema, lift, database-schema

Lift 中常用的 DB 架构迁移工具或库有哪些？

在 django 或 rails 中是否有类似[南方的东西。](http://south.aeracode.org/)还是这种方法在 Lift 中被认为过时了，人们已经转向了一些新方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:23:28.927

在我们的 lift 应用程序中，我们使用[DbDeploy](http://dbdeploy.com/)在外部管理模式迁移。

# wpf - 从插入符号位置 textarea 中提取文本

> ID：10904614
> 
> 赞同：0
> 
> 时间：2012-06-05T20:42:39.007
> 
> 标签：wpf, textarea, extract, caret

我无法使用后面的 WPF 代码从 textarea 中提取文本。

示例：伦敦的晴天

如果光标设置在 [d*ay] 上，它应该返回 day。* 为光标。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:11:40.200

这似乎可行，但我不确定当插入符号位于空白中间时您希望它如何表现。照原样，它基本上返回接触插入符号的最近标记。例如，短语“Sunny day in London”有四个标记：“Sunny”、“day”、“in”和“London”。

```
string selection;

if (txtBox.Text.Length > 0)
{
    int startIndex = 0;

    for (int i = txtBox.CaretIndex - 1; i >= 0; i--)
    {
        if (String.IsNullOrWhiteSpace(txtBox.Text[i].ToString()))
        {
            startIndex = i;
            break;
        }
    }

    int length = txtBox.Text.Length - startIndex;

    for (int i = startIndex; startIndex + i <= txtBox.Text.Length - 1; i++)
    {
        if (String.IsNullOrWhiteSpace(txtBox.Text[startIndex + i].ToString()))
        {
            length = i;
            break;
        }
    }

    selection = txtBox.Text.Substring(startIndex, length);
}
else
{
    selection = "";
} 
```

# ios - 更改了我的捆绑包 ID 以添加推送通知，现在它出现错误：捆绑包标识与之前的捆绑包标识符不同

> ID：10904616
> 
> 赞同：1
> 
> 时间：2012-06-05T20:42:45.497
> 
> 标签：ios, xcode, push-notification, app-store-connect, app-id

我制作了一个应用程序，它有一个 bundle id: `rexrapps.ksisounds`。然后我需要推送通知，所以我将其更改为`com.rexrapps.ksisounds`. 推动工作正常。但是当我尝试提交时，您可能会怀疑它说：*捆绑标识符不同于先前的捆绑标识符*。

我不知疲倦地试图解决这个问题，但无济于事。

任何帮助将不胜感激。

# html - 我的 doctype 代码没有出现？

> ID：10904620
> 
> 赞同：0
> 
> 时间：2012-06-05T20:42:54.657
> 
> 标签：html, css, doctype, kentico

我的`<html>`标签上方有两个文档类型，但在我的页面源代码中仍然看不到它。我尝试只使用其中一个，但它们仍然不起作用。这是网站 URL [http://nonudot.io-web.com/demo.aspx](http://nonudot.io-web.com/demo.aspx)和我正在使用的文档类型：

```
<!DOCTYPE HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

这是代码截图的链接[http://nonudot.io-web.com/LCValleyADA/media/ProjectsContent/Capture.JPG](http://nonudot.io-web.com/LCValleyADA/media/ProjectsContent/Capture.JPG)
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:57:46.960

您的屏幕截图看起来不像最终输出。比较以下

![在此处输入图像描述](../Images/9c08bd7881ee8880ab0620ab58d49433.png)

和

![在此处输入图像描述](../Images/4ebfb91dd98a99885e78c286f5f19196.png)

请注意`<meta http-equiv="pragma" content="no-cache" />`在第二个屏幕抓取中不存在元标记（我从您发布的网站抓取的屏幕）？这很可能是因为您没有使用相同的页面...我假设您可能没有使用正确的`MASTERPAGE`，或者您的母版页出了问题。

您的样式表也不匹配。

# python - 在我的 python 安装上更新 SQLite3 构建

> ID：10904629
> 
> 赞同：2
> 
> 时间：2012-06-05T20:43:38.240
> 
> 标签：python, sqlite

这里是新手程序员，我正在尝试让我的 Python 安装上的 SQLite3 是最新的（我目前有 3.6.11 版本，而我至少需要 3.6.19 版本，因为这是第一个支持外键的版本）。不过，这是我的问题：我不知道该怎么做。我对命令行几乎一无所知，而且我真的不知道在我的 python 安装中要替换哪些文件（如果有的话）。在有人问之前，我已经在使用最新的 Pysql 版本——它不是最新的。任何人都可以给我一些指示，或者关于如何更新它的指南？

我在 Mac OSX 10.5.8 上，使用 python 2.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:55:39.570

我建议在命令行上使用“pip”命令。

```
pip search sqlite
pip install pysqlite 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-13T22:47:15.883

我刚刚在 Mavericks 和 Mountain Lion 中安装了这个。

这篇[SO 文章](https://stackoverflow.com/questions/1545479/force-python-to-forego-native-sqlite3-and-use-the-installed-latest-sqlite3-ver/1546162#1546162)提到使用 build_static 方法，他们说该方法可以检索最新版本的 sqlite 合并。由于某种原因它不起作用（即它似乎没有下载或使用它）

我最终做的是

1.  将 pysqlite 下载为 tarball
2.  下载最新的sqlite源码合并
3.  将 pysqlite 解压缩到其文件夹中
4.  解压 sqlite 并将其*复制*到 pysqlite 文件夹
5.  打开 setup.cfg 并注释掉所有指令
6.  在终端中，转到 pysqlite 文件夹，然后：

`$ python setup.py build_static install`

这使用来自最新 sqlite 源的库编译了 pysqlite。然后在 Python 中，我将其用作：

`import pysqlite2.dbapi2 as sqlite3`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-11T01:11:14.340

我最近从源代码安装了 python，并使用以下命令从源代码安装 SQLite 和从源代码安装 Python 2.7.13。

对于 SQLite3，您可以使用以下命令 $SQLITE_INSTALL_LOCATION

```
$ curl -O http://www.sqlite.org/sqlite-autoconf-3070603.tar.gz
$ tar xvfz sqlite-autoconf-3070603.tar.gz
$ cd sqlite-autoconf-3070603
$ ./configure --prefix=$SQLITE_INSTALL_LOCATION --disable-static CFLAGS="-g"
$ make && make install 
```

然后，当我编译我的 python 时，我在 Python 源代码的根目录中编辑了 setup.py

```
$ curl -O https://www.python.org/ftp/python/2.7.13/Python-2.7.13.tgz
$ tar xvfz Python-2.7.13.tgz 
```

Python-2.7.13/setup.py -- 在此处添加 SQLite 安装路径：```

```
...
# We hunt for #define SQLITE_VERSION "n.n.n"
# We need to find >= sqlite version 3.0.8
sqlite_incdir = sqlite_libdir = None
sqlite_inc_paths = [ '/usr/include',
                     '/usr/include/sqlite',
                     '/usr/include/sqlite3',
                     '/usr/local/include',
                     '/usr/local/include/sqlite',
                     '/usr/local/include/sqlite3',
                   $SQLITE_INSTALL_LOCATION/include,
                 ]
... 
```

一旦你更改了 python 源代码中的 setup.py ，假设安装位置是 $PYTHON_INSTALL_LOCATION，就完成编译和安装 python

```
$ cd  Python-2.7.13
$ LD_RUN_PATH=$SQLITE_INSTALL_LOCATION/lib ./configure --prefix=$PYTHON_INSTALL_LOCATION --enable-shared --enable-unicode=ucs4
$ LD_RUN_PATH=$SQLITE_INSTALL_LOCATION/lib make 
$ LD_RUN_PATH=$SQLITE_INSTALL_LOCATION/lib make install 
```

一旦你这样做了，你应该在 $PYTHON_INSTALL_LOCATION/bin/python 安装一个支持 SQLite3 的 Python 版本

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-26T14:20:28.237

> 免责声明：我不是 Mac 用户，但众所周知，我给你这个信息。

您可以按照以下说明进行操作：

## 使用自制软件

如[本页](http://mislav.uniqpath.com/rails/install-sqlite3/)所述：如果您需要升级 sqlite，您可以使用[Homebrew](http://brew.sh/)。

Homebrew 意味着一个附加的“软件管理器”。所以你应该知道如何使用它。

## 从源头安装

作为这个[页面](http://www.tutorialspoint.com/sqlite/sqlite_installation.htm)提到：

1.  下载[sqlite-autoconf 包](http://www.sqlite.org/2015/sqlite-autoconf-3080803.tar.gz)
2.  编译并安装它：

：

```
$ tar xvfz sqlite-autoconf-3071502.tar.gz
$ cd sqlite-autoconf-3071502
$ ./configure --prefix=/usr/local
$ make
$ make install 
```

## Homebrew 或 Source，验证它

```
>>> import sqlite3
>>> sqlite3.version_info
(2, 4, 1)
>>> sqlite3.sqlite_version_info
(3, 6, 11)

>>> from pysqlite2 import dbapi2 as sqlite3
>>> sqlite3.version_info
(2, 5, 5)
>>> sqlite3.sqlite_version_info
(3, 6, 18) 
```

也许您需要卸载以前版本的 pysqlite。无论如何，您应该阅读[此答案](https://stackoverflow.com/a/1546162/344501)以更好地理解**sqlite/python**关系。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-02-26T02:27:02.117

[https://pip.pypa.io/en/latest/installing.html](https://pip.pypa.io/en/latest/installing.html)

python get-pip.py

python [完整路径]

python c:\文件夹\get-pip.py

# html - WebRTC P2P - 更新

> ID：10904636
> 
> 赞同：9
> 
> 时间：2012-06-05T20:43:56.957
> 
> 标签：html, websocket, p2p, bittorrent, webrtc

什么时候可以通过 P2P 与 WebRTC 交换任何类型的数据？

我正在考虑制作 P2P bittorrent 软件，而不是流式传输音频/视频。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T19:27:20.517

有一些 JS 库：[PeerJS](http://peerjs.com/)和[BoneValue](https://github.com/theninj4/bonevalue)用于使用 WebRTC 进行 P2P 数据交换。

如果你想制作一个类似 BitTorrent 的 JS 应用程序来发送文件，请注意已经有一些 - [BtAppJS](http://btappjs.com)、[ShareFest](https://github.com/Peer5/ShareFest)、[ShareIt](https://github.com/piranna/ShareIt)、[RTC-P2P](http://rohanradio.com/rtc-p2p/)和[P2P-Share](https://github.com/muaz-khan/WebRTC-Experiment/tree/master/p2p-share)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-01T19:44:08.387

这将在 Chrome 中使用 DataChannel 提供：[http ://webrtc-demos.appspot.com/html/dc1.html](http://webrtc-demos.appspot.com/html/dc1.html)

您可以在 Google I/O 的这次演讲中看到概述：[http ://www.youtube.com/watch?v=E8C8ouiXHHk&t=24m30s](http://www.youtube.com/watch?v=E8C8ouiXHHk&t=24m30s)

我无法在 Chrome 21 或 22 (Canary) 中建立数据连接，下一步是尝试为自己编译。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-21T19:14:40.397

基于 WebRTC 的 P2P bittorrent 软件已经存在。它被称为[**WebTorrent**](https://webtorrent.io/)（[来源](https://github.com/feross/webtorrent)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-27T13:17:53.207

不流式传输音频/视频但任意数据的 WebRTC 称为 RTCDataChannel：[https ://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel](https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel)

但是你迟到了——WebTorrent 已经存在。

WebTorrent 客户端：[https ://github.com/webtorrent/webtorrent](https://github.com/webtorrent/webtorrent)

WebTorrent 跟踪器实现：[https ://github.com/Novage/wt-tracker](https://github.com/Novage/wt-tracker)

混合 BitTorrent\WebTorrent 跟踪器：[https ://github.com/webtorrent/bittorrent-tracker](https://github.com/webtorrent/bittorrent-tracker)

# css - 带有换行符的多行 HTML 输入按钮添加了不需要的边距

> ID：10904637
> 
> 赞同：5
> 
> 时间：2012-06-05T20:43:57.063
> 
> 标签：css, button

我正在编写一个带有大量按钮的“直到”应用程序。只要按钮值不换行，布局就很好。如果它被换行，则按钮之间的边距会变大。

![在此处输入图像描述](../Images/c5801c9c76df3f938ea1830b26c9bcc1.png)

（如果只有一行文本，它们会很好地对接。）

这些按钮是通过循环自定义“drink”对象的集合生成的：

```
 foreach (drink d in drinks)
        {
            buttons = buttons + "<input id='" + d.drinkID + "' class='drinkButton " + d.cssClass + "' type='button' value='" + d.name + "' />";
            if ((d.drinkID == 13) || (d.drinkID == 41))
            {
                buttons = buttons + "<input id='0' class='drinkButton spacer' disabled='disabled' type='button' value='' />";
            }
            if (d.drinkID == 17)
            {
                buttons = buttons + "<input id='0' class='drinkButton spacer' disabled='disabled' type='button' value='' /><input id='0' class='drinkButton spacer' disabled='disabled'  type='button' value='' />";
            }

        } 
```

CSS如下：

```
input.drinkButton
{
    width:94px;
    height: 67px;
    font-size:1em;
    margin: 0px 6px 6px 0px;
    font-weight:normal;
    white-space: normal;
    padding: 0px;
} 
```

如何让它们正确排列？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T20:55:46.443

哦，我多么讨厌这些小错误/问题。

我的头顶，这是一个垂直对齐的问题吗？

- 编辑 -

是的，垂直对齐...尝试顶部/底部垂直对齐，然后查看...

```
input.drinkButton
{
    width:94px;
    height: 67px;
    font-size:1em;
    margin: 0px 6px 6px 0px;
    font-weight:normal;
    white-space: normal;
    padding: 0px;
    vertical-align:bottom;
} 
```

# javascript - 在 Wordpress 中加载后的 Google Maps v3 移动

> ID：10904638
> 
> 赞同：0
> 
> 时间：2012-06-05T20:44:01.080
> 
> 标签：javascript, google-maps, google-maps-api-3

该页面使用 Google 地图加载，并且最初不会填充它周围的容器。半秒后，谷歌地图填满了容器。

问题是在容器正确填充后它会变形。由于移位的经度线显示其中两个彼此相邻。并且地图控件也被扭曲了。甚至不能告诉缩放栏在那里。

任何帮助是极大的赞赏！

这是我刚开始构建的 Wordpress 插件的一部分。

我还不能发布图片，否则我会！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T20:16:42.717

问题出在 wordpress 使用的默认主题中。下面的代码行概述了它只允许它达到弄乱谷歌地图所需的宽度的 97.5%。

`.entry-content img, .comment-content img, .widget img { max-width: 97.5%; }`

正确的代码（或对我有用的代码）：

`.entry-content img, .comment-content img, .widget img { max-width: none; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:49:18.847

我以前经历过这个问题几次，而不是使用 wordpress，因为我从那个包中避开了。但是我有两个原因......

只有在每次查看/加载地图后才会发生一次，这是由于 gmaps 外部脚本调用被加载不止一次。

第二个是由于影响地图块元素的相对/绝对位置元素......我无法回忆起 100% 自那以后的几周......

你如何处理 onload 事件等等......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T15:42:36.713

我决定写一个答案来帮助其他有同样问题的人。

我最近偶然发现了这个问题，并且遇到了同样的问题以及其他问题。谷歌地图缩放栏不可见，每张图片都有一个漂亮的灰色边框:) 所有问题都是因为第 23 个主题中的默认**样式**：

```
/* Responsive images */
.entry-content img,
.comment-content img,
.widget img {
    max-width: 100%; /* Fluid images for posts, comments, and widgets */
} 
```

和更低

```
.entry-content img,
.comment-content img,
.widget img,
img.header-image,
.author-avatar img,
img.wp-post-image {
    /* Add fancy borders to all WordPress-added images but not things like badges and icons and the like */
    border-radius: 3px;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
} 
```

我将我的 google-map 对象放在 id = map_canvas 的 div 中。解决方案是在我的样式中添加上述样式的覆盖：

```
 #map-canvas img {
     max-width: none!important;
    border-radius: none!important;
    box-shadow: none!important;
 } 
```

瞧！地图很干净:)

# java - 如何刷新 JComboBox 数据？

> ID：10904639
> 
> 赞同：3
> 
> 时间：2012-06-05T20:44:02.470
> 
> 标签：java, swing, awt

我无法刷新`JComboBox`.

有一个按钮“ `Create`” `ActionListener`，它可以将项目添加到`JComboBox`.

但是这些更改并未反映在 GUI 中：我仍然看不到新添加的项目。

`repaint()`没有帮助。

更新：这是一个（几乎）完整的 GUI 代码：

```
public class Main extends JFrame implements ActionListener
{
    static Connection conn;
    static PreparedStatement ps = null;
    static ResultSet res;

    static Statement sta;

private final static int ITERATION_NUMBER = 1000;

public void GUI () throws SQLException {
    setBounds(0, 0, 320, 240);
    addWindowListener(new WindowAdapter(){
    public void windowClosing(WindowEvent we){
        close(ps);
        close(res);
        close(conn);
        System.exit(0);
        }
    });
    setMinimumSize(new Dimension(320, 240));
    setResizable(false);

    this.setTitle("Accounts");

    JPanel panel = new JPanel();
    GridLayout2 GL = new GridLayout2(4,3);
    GL.setHgap(10);
    panel.setLayout(GL);

    Font font = new Font("Serif", Font.BOLD, 20);
    Font font2 = new Font("Courier New", Font.BOLD, 16);

    JLabel label1 = new JLabel("Username");
    JLabel label2 = new JLabel("Password");
    JLabel label3 = new JLabel("Controls");

    label1.setFont(font2);
    label2.setFont(font2);
    label3.setFont(font2);

    final JTextField username = new JTextField();
    final JTextField password1 = new JPasswordField();
    final JTextField password2 = new JPasswordField();

    final JComboBox userBox1 = new JComboBox();
    final JComboBox userBox2 = new JComboBox();

    JButton create = new JButton("CREATE");

    create.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e)
        {
            try {
                createUser(conn, username.getText(), password1.getText());
userBox1.addItem(username.getText());
                userBox2.addItem(username.getText());
            } catch (NoSuchAlgorithmException
                    | UnsupportedEncodingException | SQLException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        }
    });

    userBox1.removeAllItems();
    userBox2.removeAllItems();

    res = (ResultSet) sta.executeQuery("SELECT LOGIN FROM ACCOUNTS");

    String temp;

    for (int i=0; res.next(); i++) {
        temp = (String)res.getString("LOGIN");
        userBox1.addItem(temp);
        userBox2.addItem(temp);
    }

    panel.add(label1);
    panel.add(label2);
    panel.add(label3);

    panel.add(username);
    panel.add(password1);
    panel.add(create);

    panel.add(userBox1);
    panel.add(password2);
    panel.add(modify);

    panel.add(userBox2);
    panel.add(new JLabel(""));
    panel.add(delete);

    add(panel);

    setVisible(true);
} 
```

**解决方案：**添加 password1.setText(""); 就在“createUser”解决问题之后！这很奇怪，也许它以某种方式刷新了 GUI...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T20:52:02.887

*   您必须添加`ComboBoxModel`到`JComboBox`,

*   在那里你可以到`add`//值`remove`，`modify`

*   在 API 中实现的事件刷新您的视图 ( `JComboBox`)，而无需另外的代码行

*   所有更新必须在`Event Dispatch Thread`

编辑

也许我错过了你的问题，如果你想将 JComboBox 添加到已经可见的 GUI 中，那么你必须调用（作为最后的代码行并且一个容器只成功一次）

```
myContainer.revalidate() // for JFrame up to Java7 is there only validate()
myContainer.repaint() 
```

（对不起@timaschew）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T20:58:57.157

```
static class TestFrame extends JFrame implements ActionListener
{
    private JComboBox testBox = new JComboBox();
    private JButton testButton = new JButton();
    int c = 0;

    public TestFrame()
    {
        testBox = new JComboBox();
        testButton = new JButton("Click Me!");
        testButton.addActionListener(this);

        JPanel panel = new JPanel(new GridLayout(2,1));
        panel.add(testBox);
        panel.add(testButton);
        this.add(panel);
        pack();
        setVisible(true);
    }

    public void actionPerformed(ActionEvent e)
    {
        testBox.addItem("test" + c++);
    }
} 
```

此测试用例有效，您确定将侦听器添加到单击的组件中吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-24T02:18:53.357

据我所知，ComboBox 不能用“.removeAllItems()”、“.removeAll()”或“.repaint()”刷新。

如果你想刷新它，你必须每次都创建一个新的 ComboBox，然后向其中添加项目。以上面给出的代码为例：

```
 userBox1 = new JComboBox(); // to replace userBox1.removeAllItems();
    userBox2 = new JComboBox(); // to replace userBox2.removeAllItems();

    res = (ResultSet) sta.executeQuery("SELECT LOGIN FROM ACCOUNTS");

    String temp;

    for (int i=0; res.next(); i++) {
        temp = (String)res.getString("LOGIN");
        userBox1.addItem(temp);
        userBox2.addItem(temp);
    } 
```

我有类似的问题，但我以这种方式解决了它们。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-09-26T05:39:03.693

这段代码是按钮点击事件中刷新jframeform的按钮点击事件。

```
new room().show();  //room() is a jframeform
new room().setVisible(false); 
```

# mysql - MySQL 到 MongoDB 的转换

> ID：10904642
> 
> 赞同：0
> 
> 时间：2012-06-05T20:44:29.887
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

如何将以下内容转换为 MongoDB 查询？

```
sets_progress = Photo.select('count(status) as count, status, photoset_id')
                     .where('photoset_id IN (?)', sets_tracked_array)
                     .group('photoset_id, status') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:39:24.080

SQL 查询与 NoSQL 实现之间没有一对一的映射。您需要预先计算数据以匹配您想要访问该数据的方式。

如果它足够小，则此查询将需要更改为 map-reduce 作业。更多信息：[http ://www.mongodb.org/display/DOCS/MapReduce](http://www.mongodb.org/display/DOCS/MapReduce)

这是一个不错的教程，它接受 GROUP 的查询并转换为 map-reduce：[http ://www.mongovue.com/2010/11/03/yet-another-mongodb-map-reduce-tutorial/](http://www.mongovue.com/2010/11/03/yet-another-mongodb-map-reduce-tutorial/)

# php - 关键字 GO 抛出 PHP 错误

> ID：10904644
> 
> 赞同：3
> 
> 时间：2012-06-05T20:44:34.790
> 
> 标签：php, sql, sql-server, linux, sql-server-2005

我遇到了一个问题，我试图在 linux 服务器上恢复 php 中的 MSSQL 转储。我正在读取文件，然后将文件作为查询传递。

这有效：

```
CREATE TABLE [dbo].[recipes](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Title] [nvarchar](500) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Desc] [text] COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Directions] [text] COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [CompAuthor] [nvarchar](500) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [CompName] [nvarchar](500) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [Servings] [nvarchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
 CONSTRAINT [PK_recipes] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,
ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON)
) 
```

但是只要我添加一个像 GO 这样的词

```
WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,
 ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON)
    )

GO 
```

它抛出一个错误，如

```
Warning: mssql_query(): message: Incorrect syntax near 'GO' 
```

我的问题是导致此错误的原因以及如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T20:47:02.697

`GO`不是 Transact-SQL 关键字。它是 Management Studio 和 SQLCMD 等工具的批处理分隔符。

答案是不要将`GO`命令注入到您从应用程序发送的批处理中。只需将它们作为单独的批次发送（如有必要）。

来源：[GO（Transact-SQL）](http://msdn.microsoft.com/en-us/library/ms188037.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T13:06:41.160

好吧，有时您的脚本旨在通过 Management Studio 或查询分析器进行部署。

就我而言，我正在管理多台服务器，部署脚本可能很乏味，因此我必须创建一个 PHP 工具，该工具将自动部署到所有服务器。以下是我为克服“GO”问题所做的工作：

```
 // split the script into several statements
    $sqls = explode("GO",$sql);

    // execute each statement separately
    foreach($sqls as $sqlb)
    {       
        $rs = mssql_query($sqlb, $mssql);

        if (!$rs) {
            echo "MSSQL {$client} sql: {$sqlb} Error: " . mssql_get_last_message();
        } else {

            if($rs === true)
            {
                echo "OK";
            } else
            {
                while($row = mssql_fetch_assoc($rs)) {
                    print_r($row);
                }
            }
        }
    } 
```

# vb.net - Powershell 拉取当前OU

> ID：10904649
> 
> 赞同：2
> 
> 时间：2012-06-05T20:44:38.560
> 
> 标签：vb.net, powershell, active-directory

我需要能够拉出当前机器 OU。我找到了一些可以做到这一点的 VB 代码，但我希望能够在脚本中执行此操作而不必调用 VB。任何想法，VB代码如下。

```
Set objSysInfo = CreateObject("ADSystemInfo")
DN = objSysInfo.ComputerName
WScript.Echo DN 
```

-乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T06:39:07.300

您可以使用此函数获取 ADSystemInfo。

```
function Get-LocalLogonInformation
{
    try
    {
        $ADSystemInfo = New-Object -ComObject ADSystemInfo
        $type = $ADSystemInfo.GetType()

        New-Object -TypeName PSObject -Property @{
            UserDistinguishedName = $type.InvokeMember('UserName','GetProperty',$null,$ADSystemInfo,$null)
            ComputerDistinguishedName = $type.InvokeMember('ComputerName','GetProperty',$null,$ADSystemInfo,$null)
            SiteName = $type.InvokeMember('SiteName','GetProperty',$null,$ADSystemInfo,$null)
            DomainShortName = $type.InvokeMember('DomainShortName','GetProperty',$null,$ADSystemInfo,$null)
            DomainDNSName = $type.InvokeMember('DomainDNSName','GetProperty',$null,$ADSystemInfo,$null)
            ForestDNSName = $type.InvokeMember('ForestDNSName','GetProperty',$null,$ADSystemInfo,$null)
            PDCRoleOwnerDistinguishedName = $type.InvokeMember('PDCRoleOwner','GetProperty',$null,$ADSystemInfo,$null)
            SchemaRoleOwnerDistinguishedName = $type.InvokeMember('SchemaRoleOwner','GetProperty',$null,$ADSystemInfo,$null)
            IsNativeModeDomain = $type.InvokeMember('IsNativeMode','GetProperty',$null,$ADSystemInfo,$null)
        }
    }
    catch
    {
        throw
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T21:16:09.470

[根据this page](http://technet.microsoft.com/en-us/library/ff730963.aspx) ，您不能`ADSystemInfo`直接在Powershell中使用（或者至少不容易）

> 好吧，这并不完全正确。可以在 PowerShell 中使用 ADSystemInfo；然而，这个过程远非简单，甚至远非直观。这是因为 ADSystemInfo 缺少一个“包装器”，它使得从 Windows PowerShell 等 .NET 语言访问对象变得容易。这导致了很多涉及 .NET Reflection 类、InvokeMember 方法的旋转，并且，据我们所知，很多祈祷。

`System.DirectoryServices.DirectorySearcher`但该页面确实提供了使用.NET 对象执行 AD 查询的示例。这是页面中的一个示例，该示例稍作修改以匹配您的 VB 脚本：

```
$strName = $env:computername
$strFilter = "(&(objectCategory=Computer)(Name=$strName))"

$objSearcher = New-Object System.DirectoryServices.DirectorySearcher
$objSearcher.Filter = $strFilter

$objPath = $objSearcher.FindOne()
$objPath.GetDirectoryEntry().distinguishedname 
```

# c# - 反序列化部分代码有什么问题

> ID：10904650
> 
> 赞同：0
> 
> 时间：2012-06-05T20:44:41.400
> 
> 标签：c#

代码：

```
public static string Serialize<T>(IEnumerable<T> list)
{
    BinaryFormatter formatter = new BinaryFormatter();

    using (MemoryStream m = new MemoryStream())
    {
        formatter.Serialize(m, list);
        m.Position = 0;
        return Convert.ToBase64String(m.ToArray());
    } 

}

public static T Deserialize<T>(string listData)
{
    BinaryFormatter formatter = new BinaryFormatter();

    using (MemoryStream m = new MemoryStream())
    {
        return (IEnumerable<T>)formatter.Deserialize(m); //Problem is here
    }
} 
```

错误：

```
Error   1   Cannot implicitly convert type
'System.Collections.Generic.IEnumerable<T>' to 'T'. An
explicit conversion exists (are you missing a cast?) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:46:48.950

正如消息中明确指出的，您不能`IEnumerable<T>`从声明为返回的方法中返回一个`T`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:47:15.677

将返回类型从 更改`T`为`IEnumerable<T>`。您还需要用字符串填充内存流，例如：

```
public static IEnumerable<T> Deserialize<T>(string listData)
{
    BinaryFormatter formatter = new BinaryFormatter();

    using (MemoryStream m = new MemoryStream(Convert.FromBase64String(listData)))
    {
        return (IEnumerable<T>)formatter.Deserialize(m);
    }
} 
```

# c# - TerminalServicesManager().CurrentSession.ClientName

> ID：10904660
> 
> 赞同：0
> 
> 时间：2012-06-05T20:45:21.290
> 
> 标签：c#, remote-access, terminal-services, remote-connection

我试图弄清楚哪些客户端使用远程桌面连接到我的机器。我阅读了有关 Cassia 和 Cassia.TerminalServicesManager 的信息，但我无法完全理解它......

我以为 Cassia.TerminalServicesManager().CurrentSession.ClientName 会给我一个客户端的名称，但如果还有更多呢？我查看了参考资料，但我仍然感到困惑。有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:10:55.713

听起来你正在寻找这样的东西：

```
var manager = new TerminalServicesManager();
using (var server = manager.GetLocalServer())
{
    server.Open();
    foreach (var session in server.GetSessions())
    {
        if (session.ConnectionState == ConnectionState.Active)
        {
            Console.WriteLine(session.ClientName);
        }
    }
} 
```

`ITerminalServicesManager.CurrentSession`返回当前进程正在其中运行的会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:52:01.677

默认情况下，如果您使用远程桌面连接到 Windows 机器，则会关闭本地用户，如果他们重新登录，则会关闭远程用户。如果您启用了并发远程桌面会话，则可以同时连接多个用户。我对 Cassia 不熟悉，但也许您可以遍历所有调用 Cassia.TerminalServicesManager().CurrentSession.ClientName 的会话？

# java - 如何在 javascript 中访问 JSON 数组的元素？

> ID：10904663
> 
> 赞同：1
> 
> 时间：2012-06-05T20:45:33.437
> 
> 标签：java, javascript, json, jsp

我目前正在用 Java 创建一个 ArrayList，然后在其上运行来自 Google-gson 的 .toJson 函数：

```
public String statusesToJson(ArrayList<String> statuses){
    Gson gson = new Gson();
    return gson.toJson(statuses);
} 
```

这导致JSON：

```
[ "u", "u", "u", "u" ] 
```

然后在 JSP 中我将它传递给 JavaScript：

```
<script language="JavaScript" type="text/javascript">CheckStatus.loaded('<%=model.getPageId() %>', '<%=request.getContextPath() %>', '<%=model.arrayListToJson(model.getStatuses()) %>');</script> 
```

然后在 JavaScript 中，我将其解析为 JSON 数组：

```
CheckStatus.statuses = JSON.parse(statuses);
alert(CheckStatus.statuses); 
```

这将导致以下输出：

```
u, u, u, u 
```

问题是以下不起作用并导致我的页面无法加载：

```
alert(CheckStatus.statuses[0]); 
```

这有什么问题？

编辑：加载功能：

```
loaded : function(guid, context, statuses) {
        CheckStatus.guid = guid;
        CheckStatus.context = context;
        CheckStatus.statuses = JSON.parse(statuses);
        alert(CheckStatus.statuses[0]);

        if(CheckStatus.init == null){
            submitForm('checkStatusForm', CheckStatus.guid);
            CheckStatus.init = true;
        }

        setupForm('checkStatusForm', function(){CheckStatus.validStatus();});

        //CheckStatus.setImages();

        applyCSS3('Check_Status');
    } 
```

有效状态功能：

```
validStatus : function(){
        CheckStatus.params = $('#checkStatusForm').serializeObject();

        if(document.getElementById('regionID').value != "" && document.getElementById('regionAction').value != ""){
            submitForm('checkStatusForm', CheckStatus.guid);
        }else{
            error("Cannot Commit", "You must select an action before attempting to commit.");
        }
    }, 
```

设置表格功能：

```
/**
 * Sets up the form to submit when the user presses enter inside an input
 * element. Also calls the callback when the form is submitted, does not
 * actually submit the form.
 * 
 * @param id The id of the form.
 * @param callback The callback to call.
 * @return Nothing.
 */
function setupForm(id, callback) {
    $('#' + id + ' input').keydown(function(e) {
        if (e.keyCode === 13) {
            $(this).parents('form').submit();
            e.preventDefault();
        }
    });
    $('#' + id).submit(function(e) {
        e.preventDefault();
        callback();
    });
} 
```

提交表单功能：

```
/**
 * Serializes and submits a form.
 * 
 * @param id
 *            The id of the form to submit.
 * @param guid
 *            The guid of the page the form is on to pass to the server.
 * @return nothing.
 */
function submitForm(id, guid) {
    var subTabId = $('#' + id).closest('#tabs > div > div').attr(
            'id'), tabId = $('#' + id).closest('#tabs > div')
            .attr('id'), data = $('#' + id).serializeArray();
    data.push( {
        name : "framework-guid",
        value : guid
    });
    $.ajax( {
        type : 'POST',
        cache : 'false',
        url : '/pasdash-web/' + tr("_", "", tabId.toLowerCase()) + '/' + tr("_", "", subTabId)
                + '.jsp',
        data : data,
        success : function(html) {
            $('#' + subTabId).html(html);
            resourceChanged(tabId, subTabId,
                    $('#' + id + ' input[name="framework_command"]')[0].value,
                    guid);
        },
        error : function(jqXHR, textStatus, errorThrown) {
            error('Ajax Error', textStatus);
        }
    });
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:27:21.630

您不需要用字符串包装 JSON，这只会迫使您必须重新解析它。我会尝试删除这些引号而不是调用`JSON.parse`

```
loaded : function(guid, context, statuses) {
    CheckStatus.guid = guid;
    CheckStatus.context = context;
    // Here's the change
    CheckStatus.statuses = statuses;
    alert(CheckStatus.statuses[0]); 
```

并将您的 HTML 更改为

```
<script type="text/javascript">
    CheckStatus.loaded('<%=model.getPageId() %>', 
                       '<%=request.getContextPath() %>',
                       // the following line should output something like
                       // ["a", "b"]
                       // which is perfectly valid JavaScript
                       <%=model.arrayListToJson(model.getStatuses()) %>);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:48:51.857

你应该能够写：

```
CheckStatus.loaded('<%=model.getPageId() %>', '<%=request.getContextPath() %>', <%=model.arrayListToJson(model.getStatuses()) %>); 
```

**没有最后一个参数**的引号。**然后，“loaded()”函数将直接获取对象，无需调用“JSON.parse()”。**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T21:01:40.170

检查 JSON.parse() 的结果类型。在我看来，它是一个字符串而不是一个数组。也许在某处不应该存在的一对引号？**

# php - 关于变量的简单PHP问题

> ID：10904664
> 
> 赞同：3
> 
> 时间：2012-06-05T20:45:34.703
> 
> 标签：php, variables

只是一个关于语法的简单问题。简化：

```
$testme[0] = "hello";
$v = "me";
echo $test{$v}[0]; //expect this to output "hello" 
```

有什么办法可以写出上面的最后一行，使变量引用“我”？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T20:46:37.517

采用

```
echo ${'test' . $v}[0]; 
```

反而

# c++ - 使用按位或等于 (|= 与向量

> ID：10904668
> 
> 赞同：0
> 
> 时间：2012-06-05T20:46:07.843
> 
> 标签：c++, bit-manipulation

我不能执行以下操作，编译器说 std::vector 中没有匹配的运算符，我认为我不能重载它。那么我有什么选择，除了只使用 1 向量来存储碰撞结果。我正在尝试对缓存非常友好，并且我不希望在将其设置为 true 后将相同的 bool 重置为 false，因此使用 or。

```
void CollisionDetection(const vector<Vector2D>& position1, 
                        const vector<Vector2D>& position2,
                        dimension dim1, dimension dim2, 
                        vector<bool>& result1, vector<bool>& result2)
{
    assert(position1.size()==result1.size());
    assert(position2.size()==result2.size());

    for(int i=0;i<position1.size();i++)
    {
        for(int j=0;j<position2.size();j++)
        {
            result1[i] |= result2[i] |= 
            rectOverlap(position1[1], position2[i], dim1, dim2);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:55:38.847

`std::vector<bool>`是 a[的特化`std::vector`](http://www.cplusplus.com/reference/stl/vector/)。这种专门化通过为每个 使用 1 位`bool`而不是 1 字节来节省空间。

`std::vector<bool>::operator[]`返回一个引用包装器（为了允许这种节省空间的优化），它显然没有实现`operator|`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T20:56:51.717

永远不要使用`vector<bool>`. 是的，我希望按位运算符在这种类型上会失败。

参见例如[替代向量<bool>](https://stackoverflow.com/questions/670308/alternative-to-vectorbool)

# windows - 如何独立运行两个批处理文件？

> ID：10904673
> 
> 赞同：0
> 
> 时间：2012-06-05T20:46:28.170
> 
> 标签：windows, batch-file

我有两个批处理文件“bat1.bat”和“bat2.bat”我需要编写另一个批处理文件，例如可以独立运行“bat1.bat”和“bat2.bat”的“third.bat”。（同时时间）。实际上，我可以打开两个 cmd 并分别运行它们。此外，bat1 和 bat2 都处于无限循环中，因此它们永远不会退出

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T20:49:18.020

您可以[`start`](http://ss64.com/nt/start.html)为此使用：

```
rem This is third.bat
start bat1.bat
start bat2.bat 
```

# php - 是否可以在脚本运行时动态重新加载 PHP 代码？

> ID：10904678
> 
> 赞同：6
> 
> 时间：2012-06-05T20:47:02.287
> 
> 标签：php, reload, multiplayer

我有一个使用 PHPSockets 的多人服务器，因此完全用 PHP 编写。

目前，每当我对 PHP 服务器脚本进行任何更改时，我都必须终止该脚本，然后重新启动它。这意味着任何在线用户都已断开连接（通常不是问题，因为目前没有那么多）。

现在我正在重写服务器脚本以使用自定义 PHP 类并稍微整理一下（你不想知道它今天看起来有多讨厌）。今天我在想：“难道不应该在不必重新启动整个脚本的情况下对 php 源代码进行更改吗？”。

例如，我计划创建一个`main.php`文件，`user.php`其中包含包含 class`MyUser`和`game.php`包含 class的文件`MyGame`。**现在假设我想对服务器进行更改`user.php`并“重新加载”服务器，以便更改`user.php`生效，而不断开任何在线用户？**

我试图找到其他回答这个问题的问题，我得到的最接近的是这个问题：[修改一个正在运行的脚本并让它重新加载而不杀死它（php）](https://stackoverflow.com/questions/6068359/modifying-a-running-script-and-having-it-reload-without-killing-it-php)，但这似乎并没有解决在线用户的断开连接问题。

**更新**

我自己的解决方案是：

1.  在特殊情况下，包含文件 external.php，它可以访问一些变量并根据需要使用它们。这样做时，我必须确保代码中没有错误，因为如果我尝试访问不存在的方法，整个服务器将会崩溃。
2.  **将整个事情重写为 Java**，这使我有可能使用动态类重新加载来添加插件系统。奇迹般有效。再见 PHP。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T20:54:19.060

> 难道不用重新启动整个脚本就可以对php源进行更改吗？
> 
> [...]
> 
> 我计划拥有一个包含 user.php 的 main.php 文件，其中包含 MyUser 类

在你的情况下，你不能。类只能在运行脚本中定义一次。您需要重新启动脚本才能重新定义这些类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T20:55:36.417

我对 PHP 不太熟悉，但我假设创建了一个进程来运行脚本，这样做它会复制运行程序所需的指令并开始在 CPU 上执行，在此期间，如果您要“更新”按照说明，您需要最终终止进程并重新启动它。包含是将类和文件链接在一起的一种奇特方式，但最终处理器会将这些信息与它们的文件存储位置分开，并且在您重新启动进程之前它最终会有所不同。

我不知道有任何系统可以在其中创建代码并主动编辑它并在代码运行时查看更改。大多数活动程序需要重新启动才能重新加载新的源代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T21:04:06.477

[Runkit](http://www.php.net/manual/en/book.runkit.php)将允许您在运行时添加、删除和重新定义方法（除其他外）。虽然您无法更改类或其现有实例的已定义属性，但它允许您更改这些对象的行为。

**我不建议将此作为永久解决方案，**但它可能在开发过程中很有用。最终你会想要将游戏状态存储到文件、数据库、[Memcache](http://www.php.net/manual/en/book.memcached.php)等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T21:07:45.407

您不能`include`再次使用相同的文件`class`，但您可以使用`array`. 如果您确实需要，`array`您也可以从 转换为。`class`但是，这仅适用于数据，不适用于行为（方法）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T21:18:56.190

当你的主脚本从缓存中加载并经常检查新的操作码时，如何将你的用户对象存储到[APC缓存中。](http://php.net/manual/en/book.apc.php)

要在缓存中包含函数，您必须包含[SuperClosure 类](http://www.htmlist.com/development/extending-php-5-3-closures-with-serialization-and-reflection/)。一个例子是：

```
if (!apc_exists('area')) {
  // simple closure
  // calculates area given length and width
  $area = new SuperClosure(
    function($length, $width) {
      return $length * $width;
    }
  );
  apc_store('area', $area);
  echo 'Added closure to cache.';
} else {
  $func = apc_fetch('area');
  echo 'Retrieved closure from cache. ';
  echo 'The area of a 6x5 polygon is: ' . $func(6,5);
} 
```

[有关 APC 的教程，请参见此处](http://devzone.zend.com/1812/using-apc-with-php)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-25T05:11:07.797

简单的解决方案使用 $MyUser 而不是 MyUser

```
require MyUserV1.php;
$MyUser = 'MyUserV1';
$oldUser = new $MyUser('your name');
//Some time after
require MyUserV2.php;
$MyUser = 'MyUserV2';
$newUser = new $MyUser('your name'); 
```

每个声明的类都保留在内存中，但在最后一次 MyUserV1 注销时变得未使用，
您可以使它们从抽象类 MyUser 继承以使用 is_a

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-05T20:57:08.747

我对 PC 上的游戏了解不多，但您可以尝试从数据库中为用户获取所有变量，然后使用这些变量更新文本字段或按钮

在 web 中使用 AJAX（更改数据而不刷新页面）。不是用于编程吗？

# validation - Play 2.0 表单的自定义验证（scala）

> ID：10904683
> 
> 赞同：4
> 
> 时间：2012-06-05T20:47:11.217
> 
> 标签：validation, scala, playframework, playframework-2.0

我正在写一个小爱好应用程序。现在，在我的应用程序中，我希望人们拥有一个 userId（就像我的 niklassaers 在这里堆栈溢出一样），如果它已经被占用，我希望用户得到一个错误，以便他可以选择另一个。

下面是我的 Signup 对象，它在“mapping（”：“缺少对象表单中方法映射的参数；如果您想将其视为部分应用的函数，请使用 `_' 遵循此方法”

```
object Signup extends Controller {

  val userForm: Form[UserProfile] = Form(
    mapping(
      "userId" -> nonEmptyText,
      "passwordHash" -> nonEmptyText,
      "email" -> email
    ) verifying (
      "ThisIsATest", { case(userId, passwordHash, email) => true }
      // "UserID already taken", { DBService.exists(UserProfile.getClass().getName(), userId) }
      )(UserProfile.apply)(UserProfile.unapply))

  def index = Action {

    Ok(views.html.signup(userForm))
  }

  def register = Action { implicit request =>
    userForm.bindFromRequest.fold(
      errors => BadRequest(views.html.signup(errors)),
      user => Redirect(routes.Profile.index))
  }
} 
```

如您所见，我已将查找服务替换为仅返回 true 的测试验证，以使示例不那么复杂。为了完整起见，这是我的 UserDetail 案例类：

```
case class UserProfile(
                   userId : String,
                   email: String,
                   passwordHash: String) 
```

我是 Scala 新手和 Play 新手，所以如果这是一个非常琐碎的问题，我很抱歉。但：

1.  自从我收到此错误以来，我做错了什么？

2.  这是添加我自己的验证的正确方法吗？

3.  后续问题：如果进展顺利，我会重定向，但我应该如何重定向到引用刚刚验证的表单的页面？

干杯

尼克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T09:59:15.503

终于解决了这个问题：验证不是映射之后的东西，而是约束条件下的东西。所以应该是

```
"userId" -> nonEmptyText.verifying( "UserID already taken", userId => DBService.exists(UserProfile.getClass().getName().replace("$", ""), userId) == false ), 
```

我希望这可以帮助其他有同样问题的人:-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T12:50:07.780

有点晚了，但无论如何..

您可以对整个“表单支持对象”进行验证，而不是最终得到的单个字段。这类似于您在问题描述中发布的第一个代码。问题是您的验证块需要在应用/取消应用语句之后。

```
case class UserRegistration(username: String, password1: String, password2: String)

val loginForm = Form(
  mapping(
    "username" -> email,
    "password1" -> text,
    "password2" -> text
  )
  (UserRegistration.apply)(UserRegistration.unapply)
  verifying ("Passwords must match", f => f.password1 == f.password2)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-09T23:02:26.473

甚至更晚，但无论如何...... :)

在整个“表单支持对象”上使用验证不会让您将错误添加到表单中的各个字段。如果您想这样做，请参阅[Play！框架 2.0：使用其他字段验证表单中的字段](https://stackoverflow.com/questions/12100698/play-framework-2-0-validate-field-in-forms-using-other-fields/19877822#19877822)

# css - 嵌套 DIV 不服从自动

> ID：10904684
> 
> 赞同：0
> 
> 时间：2012-06-05T20:47:12.623
> 
> 标签：css, html, height

见下图。请注意，左右边框没有填充可用空间。这些是嵌套的 div。我如何让它服从汽车？

![](../Images/bfa2194ba33edede263e03bb416cbc2d.png)

**CSS 类 MiddleLeftBorder 和 MiddleRightBorder 未按预期工作。**

CSS代码如下：

```
html, body
{
    height: 100%;
    margin: 0 0 0 0;
    padding: 0 0 0 0;
}
body
{
    background-color: #000000;
    background-image: url('/CatwalkCloset/App_Themes/Default/Images/Background.jpg');
    background-repeat: repeat;
    color: #FFFFFF;
}
/* TEMPLATE */
container
{
    height: auto;
    margin: auto;
    width: 100%;
}
div.content
{
    clear: both;
    height: auto;
    margin: 0px auto;
    text-align: center;
    width: 1024px;
}
div.rows div.row
{
    clear: both;
    width: 1024px;
}
div.rows div.column
{
    float: left;
}
div.rows div.clear-row
{
    line-height: 0px;
    font-size: 0px;
    clear: both;
}
div.logo
{
    background: url('/CatwalkCloset/App_Themes/Default/Images/Logo.jpg');
    height: 150px;
    width: 510px;    
}
div.logoSpace
{
    background-color: #000000;   
}
div.menu
{
    background: url('/CatwalkCloset/App_Themes/Default/Images/MenuBackground.jpg');
    background-repeat: repeat;
    height: 40px;
    width: 1024px;
}
div.topLeftBorder
{
    background: url('/CatwalkCloset/App_Themes/Default/Images/TopLeftBorder.jpg'); 
    float: left;
    height: 40px;
    width: 40px;   
}
div.topMiddleBorder
{
    background: url('/CatwalkCloset/App_Themes/Default/Images/TopMiddleBorder.jpg');
    background-repeat: repeat;
    float: left;
    height: 40px;
    width: 944px;
}
div.topRightBorder
{
    background: url('/CatwalkCloset/App_Themes/Default/Images/TopRightBorder.jpg'); 
    float: left;
    height: 40px;
    width: 40px;   
}
div.middleLeftBorder
{
    background: url('/CatwalkCloset/App_Themes/Default/Images/MiddleLeftBorder.jpg');
    background-repeat: repeat;
    float: left;
    height: 100%;
    width: 40px;
}
div.middleContent
{
    float: left;
    height: 100%;
    width: 944px;    
}
div.middleRightBorder
{
    background: url('/CatwalkCloset/App_Themes/Default/Images/MiddleRightBorder.jpg');
    background-repeat: repeat;
    float: left;
    height: 100%;
    width: 40px;
}
div.bottomLeftBorder
{
    background: url('/CatwalkCloset/App_Themes/Default/Images/BottomLeftBorder.jpg'); 
    float: left;
    height: 40px;
    width: 40px;   
}
div.bottomMiddleBorder
{
    background: url('/CatwalkCloset/App_Themes/Default/Images/BottomMiddleBorder.jpg');
    background-repeat: repeat;
    float: left;
    height: 40px;
    width: 944px;
}
div.bottomRightBorder
{
    background: url('/CatwalkCloset/App_Themes/Default/Images/BottomRightBorder.jpg'); 
    float: left;
    height: 40px;
    width: 40px;   
} 
```

下面的 HTML 代码使用上面的 CSS 代码：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="MasterPage.master.cs" Inherits="MasterPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder id="cphMasterHead" runat="server"></asp:ContentPlaceHolder>
</head>
<body>
    <form id="fMaster" runat="server">
    <div id="container">
        <div class="content">
            <div class="rows">
                <div class="row">
                    <div class="logo"></div>
                    <div class="logoSpace"></div>   
                    <div class="clear-row">&nbsp;</div>
                </div>
                <div class="row">
                    <div class="menu"></div>    
                    <div class="clear-row">&nbsp;</div>
                </div>
                <div class="row">
                    <div class="topLeftBorder"></div>
                    <div class="topMiddleBorder"></div>
                    <div class="topRightBorder"></div>  
                    <div class="clear-row">&nbsp;</div>
                </div>
                <div class="row">
                    <div class="middleLeftBorder"></div>
                    <div class="middleContent"><asp:ContentPlaceHolder id="cphMasterBody" runat="server"></asp:ContentPlaceHolder></div>
                    <div class="middleRightBorder"></div>   
                    <div class="clear-row">&nbsp;</div>
                </div>
                <div class="row">
                    <div class="bottomLeftBorder"></div>
                    <div class="bottomMiddleBorder"></div>
                    <div class="bottomRightBorder"></div>   
                    <div class="clear-row">&nbsp;</div>
                </div>
             </div>
        </div>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:26:27.973

你为什么要使用图像来完成可以用纯 CSS ( `border-radius`) 完成的事情？我的意思是那个框架在`#content`. 但是没问题..

首先确保图像在您编写的路径中（使用 F12 和网络选项卡查看是否有任何错误），因为 CSS 类和 HTML 标记看起来正确。不好，刚刚*好**。*

由于您对`.row`、和使用固定宽度`.middleContent`，因此无需使用 3 张图像来构建背景 - 您可以将它们组合为. 也没有必要在你有的时候使用`.middleLeftBorder``.middleRightBorder``.row``div.clear-row``clear: both;``.row`

我认为这里有太多需要改进的地方..

* * *

好的，关于圆角。您可以使用此代码（与您的代码松散相关）实现我认为您想要的东西：

```
<div id="container">
    <div id="content">Some text here</div>
</div>

<style>
#container {
    width: 200px;
    padding: 15px;
    background-color: #000;
}
#content {
    padding: 30px; /* real content must be moved away from border */
    border: 1px solid #fff;
    color: #fff;
    width: 138px; /* #container width - 2*padding - 2*border */
    border-radius: 20px; /* Basic CSS */
    -moz-border-radius: 20px; /* Mozilla */
    -webkit-border-radius: 20px; /* Safari, Chrome */
    -o-border-radius: 20px;  /* Opera */
    -ms-border-radius: 20px;  /* IE9+ */
}
</style> 
```

您应该在黑色背景上获得带有圆角的白色矩形。

# objective-c - NSPredicate 检查对象的属性是否存在，如果存在，获取它

> ID：10904685
> 
> 赞同：8
> 
> 时间：2012-06-05T20:47:14.230
> 
> 标签：objective-c, cocoa-touch, nsdictionary, nspredicate, foundation

我什至不确定这是否可能，但如果是的话，它肯定会有所帮助。

我有一个`NSArray`s `NSDictionarie`。

每个字典都有特定的键（显然）。

```
Dict{ 
 Title: WBCCount
 Cat: Lab
}
Dict{
 Title: HbM
 Cat: Lab
 Sex: Male
}
Dict{
 Title: HbF
 Cat: Lab
 Sex: Female
}
Dict{
  Title: PC_Count
  Cat: CBC
  Sex: Female
} 
```

我想用字典对象中存在`Cat = 'Lab'`和**IF** `Sex`作为键的字典过滤数组，获取带有`Male`.

简而言之，我无法拼凑出一个

```
predicateWithFormate:%@" Cat = Lab AND ( if Sex key is present, Sex = Male"; 
```

这会给我一个数组`WBC, HbM`。

我不知道这是否可能，是谓词中的一个条件，但如果是这样的话，这将是一个救命稻草，因为这是通过 Web API 发送对象的方式。

如果不是这样，实现目标的任何其他方式也会很棒。

虽然我们在核心数据的主题中，这应该很简单：我希望实体的属性能够存储`NSDate`or`NSNumber`或`NSString`。有没有简单的出路？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T21:32:03.757

这里的诀窍是，在 中`NSDictionary`，一个不存在的键只返回`nil`：

```
NSArray *dictionaries = @[
    @{ @"Title": @"T1",  @"Cat":   @"Lab",   @"Sex":   @"Male"   },
    @{ @"Title": @"T2",  @"Cat":   @"C2"                         },
    @{ @"Title": @"T3",  @"Cat":   @"Lab",   @"Sex":   @"Female" },
    @{ @"Title": @"T4",  @"Cat":   @"Lab"                        }
];                    

NSPredicate *pred = [NSPredicate predicateWithFormat:@"(Sex == nil OR Sex = 'Male') AND Cat = 'Lab'" ];

NSArray *result = [dictionaries filteredArrayUsingPredicate:pred]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-25T18:40:04.190

另一种检查键存在的语法（但仅适用于集合）是：

```
NSPredicate *p = [NSPredicate predicateWithFormat:@"Sex in SELF"] 
```

我经常在 Parse.com 上使用它

# android - 可绘制灰度

> ID：10904690
> 
> 赞同：-1
> 
> 时间：2012-06-05T20:47:31.807
> 
> 标签：android, image, drawable

我想灰度一个drawable。我正在尝试[Justin 的建议](https://stackoverflow.com/a/4951839/1320766)，但它不适用于 Donut (1.6) 和 Eclair (2.1)。它适用于Android 2.2+。我正在尝试的代码如下：

```
ColorMatrix matrix = new ColorMatrix();
matrix.setSaturation(0);
ColorMatrixColorFilter filter = new ColorMatrixColorFilter(matrix);
drawable.setColorFilter(filter); 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:07:16.247

这适用于较低的 Api，试试吧

```
 public Bitmap toGrayscale(Bitmap bmpOriginal)
    {        
        int width, height;
        height = bmpOriginal.getHeight();
        width = bmpOriginal.getWidth();    

        Bitmap bmpGrayscale = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);
        Canvas c = new Canvas(bmpGrayscale);
        Paint paint = new Paint();
        ColorMatrix cm = new ColorMatrix();
        cm.setSaturation(0);
        ColorMatrixColorFilter f = new ColorMatrixColorFilter(cm);
        paint.setColorFilter(f);
        c.drawBitmap(bmpOriginal, 0, 0, paint);
        return bmpGrayscale;
    } 
```

如果您想使用画布或画家使用此代码，则无法为您的代码获取灰度图像，因为您使用了不可变的可绘制对象

```
Bitmap immutableBitmap = BitmapFactory.decodeResource(getResources(), 
    R.drawable.my_drawable);
Bitmap mutableBitmap = immutableBitmap.copy(Bitmap.Config.ARGB_8888, true);

//you have two bitmaps in memory, so clean up the mess a bit
immutableBitmap.recycle(); immutableBitmap=null;

Drawable d = new BitmapDrawable(mutableBitmap);

//mutate it
d.setColorFilter(new LightingColorFilter(color, lightenColor));

imageView.setImageDrawable(d); 
```

# html - 除了具有 2 个或更多元素的内联块

> ID：10904697
> 
> 赞同：0
> 
> 时间：2012-06-05T20:47:55.087
> 
> 标签：html, css

我试着弄清楚，这两个`p`应该在图像之外，第二个`p`不应该在图像下。这是可能的，`float: left`但这会导致很多浏览器错误（主要是在 IE 下）。我怎么能得到我想要的结果`display: inline-block`？

```
<div id="one">
    <img src="http://www.jcopro.net/wp-content/uploads/2011/12/ubuntu-logo1.gif" alt="" />
    <p>Content</p>
    <p>Content</p>
</div> 
```

* * *

```
#one {
    display: inline-block;
    width: 800px;
    vertical-align: top;
}

#one img {
    display: inline-block;
    vertical-align: top;
    width: 100px;
}

#one p {
    display: inline-block;
    vertical-align: top;
    width: 600px;
    border: 1px solid gray;
} 
```

演示：http: [//jsfiddle.net/MK5E9/1/](http://jsfiddle.net/MK5E9/1/)

编辑：好的，我错误地描述了我的问题：我不想将它们`p`放在一行中，我希望将它们放在图像之外的每个段落下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:54:11.690

~~是的，但您需要容器足够宽以包含所有 3 个元素。`<p>`将您的 s 缩小到 300px 宽时，以下方法有效。~~

~~**[例子](http://jsfiddle.net/MK5E9/2/)**~~

编辑，基于一个 OP 的编辑：

好吧，这就是 float 最初的用途。浮动图像并允许它们周围的文本正确流动。**[例子](http://dabblet.com/gist/2878011)**。

如果您希望图像位于不同的“列”上，这意味着文本不会在图像周围流动，而是会在图像行开始新行，您需要限制元素的宽度。**[看这里。](http://dabblet.com/gist/2878013)**

# facebook-graph-api - 如何在某个位置附近找到朋友过去的签到？

> ID：10904706
> 
> 赞同：2
> 
> 时间：2012-06-05T20:48:43.010
> 
> 标签：facebook-graph-api, facebook-fql, checkin, facebook-checkins

在我的应用程序中，用户在一个位置并正在寻找她的朋友，这些朋友在她所在的地方 10 英里范围内的任何地方。如何使用 FQL 或图形找到这个？我能看到的唯一方法是运行这样的搜索：[https](https://graph.facebook.com/search?type=checkin) ://graph.facebook.com/search?type=checkin然后运行结果以找出 10 英里内的位置。有没有更好的方法呢？

谢谢你的帮助！

多尔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T21:42:45.577

来自[http://developers.facebook.com/docs/reference/fql/location_post/](http://developers.facebook.com/docs/reference/fql/location_post/)

它说

> 一个 FQL 表，它返回具有与其关联的位置并且至少满足以下条件之一的帖子：
> 
> *   你在帖子中被标记
> *   一位朋友在帖子中被标记
> *   您撰写了帖子
> *   一位朋友撰写了这篇文章
> 
> **注意**：此查询可以处理大量数据。为了确保在合理的时间范围内返回可管理的数据量，您应该指定最近的时间戳以缩小结果范围。
> 
> 给定位置 10,000 米内的回帖：
> 
> ```
> SELECT id, page_id
> FROM location_post
> WHERE distance(latitude, longitude, '37.86564', '-122.25061') < 10000 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T16:34:22.030

尽管最初的答案确实对我有用，但它很快就变得不充分了。现在，在把我的头撞到墙上之后，它终于打破了（不是我的头——墙）。这里还有两种更好的方法可以找到我需要的东西：

这是为了找到签到：

> SELECT checkin_id, coords, tagged_uids, page_id FROM checkin WHERE (author_uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) or author_uid=me()) and coords.latitude<'45.0' and coords.latitude>'29' and coords.longitude>'-175' 和 coords.longitude<'-5';

这是查找所有位置信息：

> SELECT id, page_id FROM location_post WHERE (author_uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) or author_uid=me()) and coords.latitude<'45.0' and coords.latitude>'29' and coords.longitude> '-175' 和 coords.longitude<'-5'

# c# - SqlCommand 中的变量在查询批处理中必须是唯一的。但它是吗？

> ID：10904709
> 
> 赞同：4
> 
> 时间：2012-06-05T20:49:03.073
> 
> 标签：c#, sql, windows-services

我正在制作一个 Windows 服务来收集大量信息，并将其发送到数据库。我知道下面的方法是有效的，因为我已经在其他表格上使用它而没有错误。但是我不得不扩展我的 DELETE 命令以使用两个条件，现在我收到一个错误。

这是我收到的错误：“已经声明了变量名'@deletedrive'。变量名在查询批处理或存储过程中必须是唯一的。”

这是我的代码（结尾省略了，因为它只是捕获了我们得到的异常。也忽略注释行）：

```
private static void ServerSpaceTimerAction(object source, ElapsedEventArgs e, string InstallLocation)
    {
        //StreamWriter RecordServerSpace = new StreamWriter(InstallLocation + "\\Temp\\ServerSpaceTemp.csv");
        try
        {
            ServerSpace GetSpace = new ServerSpace();
            GetConfigurations Configs = new GetConfigurations();
            Configs.GetServers();
            Configs.GetDatabase();

            var connection = new SqlConnection("Data Source=" + Configs.DataSource + "; Initial Catalog=" + Configs.DatabaseCatalog + "; Integrated Security=" + Configs.IntegratedSecurityProtocol);
            connection.Open();

            char[] delim = { ' ', ',' };
            string sInsertServerSpace = "INSERT INTO ServerSpace (date_time, server, region, farm, technology, role, drive, total_space, free_space) VALUES (@dt, @ser, @reg, @farm, @tech, @role, @drive, @ts, @fs)";
            string sDeleteServerSpace = "DELETE FROM ServerSpace WHERE server=@serd AND drive=@deletedrive";

            foreach (string server in Configs.servers)
            {
                string temp;
                SqlCommand cmdInsertServerSpace = new SqlCommand(sInsertServerSpace, connection);
                SqlCommand cmdDeleteServerSapce = new SqlCommand(sDeleteServerSpace, connection);
                Configs.GetServerAttributes(server);
                if (Configs.technology != "SQL")
                {
                    GetSpace.DriveSpaceByServer(server);
                }
                else
                {
                    GetSpace.DriveSpaceByServerMount(server);
                }
                string[] driveStats = GetSpace.ServerSpaceStats.Split(delim);

                temp = DateTime.Now.ToString();
                cmdInsertServerSpace.Parameters.AddWithValue("@dt", temp);

                temp = server.ToString();
                cmdDeleteServerSapce.Parameters.AddWithValue("@serd", temp);
                cmdInsertServerSpace.Parameters.AddWithValue("@ser", temp);

                temp = Configs.regiongroup.ToString();
                cmdInsertServerSpace.Parameters.AddWithValue("@reg", temp);

                temp = Configs.farmgroup.ToString();
                cmdInsertServerSpace.Parameters.AddWithValue("@farm", temp);

                temp = Configs.technology.ToString();
                cmdInsertServerSpace.Parameters.AddWithValue("@tech", temp);

                temp = Configs.rolegroup.ToString();
                cmdInsertServerSpace.Parameters.AddWithValue("@role", temp);

                for (int i = 0; i < driveStats.Length; i++)
                {
                temp = driveStats[i].ToString();
                cmdInsertServerSpace.Parameters.AddWithValue("@drive", temp);
                cmdDeleteServerSapce.Parameters.AddWithValue("@deletedrive", temp);
                i++;

                temp = driveStats[i].ToString();
                cmdInsertServerSpace.Parameters.AddWithValue("@ts", temp);
                    i++;
                temp = driveStats[i].ToString();
                cmdInsertServerSpace.Parameters.AddWithValue("@fs", temp);
                cmdDeleteServerSapce.ExecuteNonQuery();
                cmdInsertServerSpace.ExecuteNonQuery();
                }
                //RecordServerSpace.WriteLine(DateTime.Now + "," + server + "," + Configs.regiongroup + "," + Configs.farmgroup + "," + Configs.technology + "," + Configs.rolegroup + "," + GetSpace.ServerSpaceStats);
            }
            connection.Close(); 
```

让我知道您是否需要其他参考。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T20:54:03.437

您只需添加一次参数。您每次都通过循环添加参数。更改它，以便您添加一次参数，但每次在循环中设置它们的值。

```
SqlCommand cmdDeleteServerSapce = new SqlCommand(sDeleteServerSpace, connection);  
....  
cmdInsertServerSpace.Parameters.AddWithValue("@drive", temp);
cmdDeleteServerSapce.Parameters.AddWithValue("@deletedrive", temp));

for (int i = 0; i < driveStats.Length; i++)     
{        
    temp = driveStats[i].ToString();        
    cmdInsertServerSpace.Parameters["@drive"].value = temp;
    cmdDeleteServerSapce.Parameters["@deletedrive"].value = temp;

    .....

    cmdDeleteServerSapce.ExecuteNonQuery();
    cmdInsertServerSpace.ExecuteNonQuery(); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T20:52:36.077

看起来您正在循环中使用该命令。您只需将参数放入一次（AddWithValue）。您可以在后续尝试中更改它，但不要再次添加它。

你应该做：

```
cmdDeleteServerSapce.Parameters.Add("@deletedrive", SqlDbType.VarChar); 
```

圈外。

和

```
cmdDeleteServerSapce.Parameters["@deletedrive"].Value = temp; 
```

循环内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T21:00:01.557

我相信你错过了对你`cmdInsertServerSpace.ExecuteNonQuery()`的`cmdDeleteServerSapce.ExecuteNonQuery()`循环的调用。我会推荐以下内容：

```
cmdInsertServerSpace.Parameters.Add("@drive", SqlDbType.VarChar);
cmdDeleteServerSapce.Parameters.Add("@deletedrive", SqlDbType.VarChar);
for (int i = 0; i < driveStats.Length; i++) {
    string temp = driveStats[i].ToString();
    cmdInsertServerSpace.Parameters["@drive"].Value = temp;
    cmdDeleteServerSapce.Parameters["@deletedrive"].Value = temp;
    i++;
  .....
    cmdInsertServerSpace.ExecuteNonQuery();
    cmdDeleteServerSapce.ExecuteNonQuery();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T23:29:18.693

您必须使用参数 clear

```
 **cmdInsertServerSpace.Parameters.Clear();**
            cmdInsertServerSpace.Parameters.AddWithValue("@dt", temp);

            temp = server.ToString();
            cmdDeleteServerSapce.Parameters.AddWithValue("@serd", temp);
            cmdInsertServerSpace.Parameters.AddWithValue("@ser", temp); 
```

# delphi - Delphi 2009“打开130个包”是什么意思？

> ID：10904711
> 
> 赞同：2
> 
> 时间：2012-06-05T20:49:04.977
> 
> 标签：delphi, package, delphi-2009, indy

我正在按照有关[如何在 Delphi 2009 中升级 Indy 10 的](https://stackoverflow.com/questions/3204601/step-by-step-upgrade-of-indy-10-in-delphi-2009)说明进行操作，但我坚持以下步骤：

> 现在，必须按以下顺序构建包：
> 
> 系统 - 核心 - 协议 - dclCore - dclProtocol
> 
> 对于Delphi 2009，打开130个包，Delphi 2010打开140个包。
> 
> 我打开了每个包，然后在选项中将 lib\Indy10\ 的完整路径粘贴到 DCP 和 Unit 输出目录字段中，并将 bin\ 的完整路径粘贴到包输出目录字段中。
> 
> 然后我构建了包。对于我还安装的 dcl 包。

“开130包”是什么意思？

谁能详细解释一下如何构建一个包？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T21:50:00.100

说明指的是名称中包含 130 的单个项目，即：

```
IndySystem130.dpk
IndyCore130.dpk
IndyProtocols130.dpk
dclIndyCore130.dpk
dclIndyProtocols130.dpk 
```

# java - HTTP客户端通信

> ID：10904716
> 
> 赞同：0
> 
> 时间：2012-06-05T20:49:08.400
> 
> 标签：java, xml, post, get, httpclient

晚上好，

我已经开始使用 HTTPClient API。( [http://hc.apache.org/](http://hc.apache.org/) )

我需要的是以下内容：

1.  在客户端上，使用 POST 消息，将驻留在消息正文中的 XML 文件传送到服务（例如 localhost/myscript）。我知道该怎么做。

2.  现在，我不知道如何开始编码另一部分，获取 POST 消息并获取 XML 文件。

我已经阅读了以下问题：

[如何使用 Post 方法使用 HttpClient？](https://stackoverflow.com/questions/5415474/how-to-use-httpclient-using-post-method)

[Apache 4.1 HttpClient POST 和 GET](https://stackoverflow.com/questions/3375940/apache-4-1-httpclient-post-and-get)

问候，努诺。

# c++ - 确认文件替换对话框

> ID：10904720
> 
> 赞同：0
> 
> 时间：2012-06-05T20:49:24.067
> 
> 标签：c++, dialog, file-management

C++ 中“确认文件替换”对话框的代码是否可用？似乎它经常在许多不同的程序中使用。我很惊讶在任何地方都没有找到任何关于它的信息。

例如，我想做这样的[事情](http://www.online-tech-tips.com/wp-content/uploads/2008/04/no-to-all-windows.png%22)。

感谢您的时间。

# python - 是否可以使用 Python 创建操作系统？

> ID：10904721
> 
> 赞同：37
> 
> 时间：2012-06-05T20:49:24.680
> 
> 标签：python, operating-system

是否可以使用 Python 制作一个*简约*的操作系统？
我真的不想进入像汇编这样的低级代码，所以我想使用
像 Perl 或 Python 这样的简单语言。但是怎么做？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-05T21:02:42.927

不幸的是，Python 被归类为一种[非常高级的编程语言](http://en.wikipedia.org/wiki/Very_high-level_programming_language)。例如，它不能用于直接访问硬件和执行低级数据结构操作。它完全依赖于某种东西来从中抽象出硬件，那就是内核。但是，从技术上讲，创建一个以 Python 为中心的操作系统是可行的，即；只有非常低级的东西是用 C 和汇编编写的，而操作系统的其余大部分都是用 Python 编写的。

[本文](http://wiki.osdev.org/Languages)更详细地讨论了哪些语言适合编写操作系统内核。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-04-15T16:40:50.367

您当然可以在没有操作系统的情况下运行 Python，如[英特尔 BIOS 实施测试套件 (BITS) 项目](http://biosbits.org/)所示。[脚本指南](http://biosbits.org/scripting/)解释：

*“... 包括用于访问硬件平台的各种低级功能的 Python API，包括 ACPI、CPU 和芯片组寄存器、PCI 和 PCI Express。您可以编写脚本来探索和测试平台功能，使用 Python 的全部功能在 32 位环 0 中，没有操作系统的方式.."*

现在，BITS 是一个特定于英特尔硬件的 BIOS 测试平台，并不意味着运行基于 Python 的定制操作系统，但这并不意味着你不能尝试它......

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-06-22T09:46:13.620

我已经移植了 Python 解释器作为用户空间程序在我的操作系统中运行，它是我移植的第一个程序——也是迄今为止唯一的一个程序；从这个经验来看，我认为用 Python 编写很多操作系统功能肯定是可能的；当然，您甚至可以将 Python 嵌入内核中，而只需极少的功能支持。

但是，您需要为中断、低级内存管理等编写程序集和 C。就我而言，我针对[Newlib](http://sourceware.org/newlib/) C 库构建了一个经过特殊修改的 Python 2.5.2；在最小的情况下，您只需要为 Newlib 库提供堆内存管理，并且可以在其上运行 Python。

因此，Python 解释器不包含它自己的堆实现，并且它确实依赖于 C 库，因此您不能立即在裸机上运行它，但是按照惯例编写的更多操作系统内核也可以是用 Python 编写。

特殊情况当然是微内核，其中大部分功能都在用户空间中作为服务。这些可以更自然地用任何首选的编程语言实现，包括 Python。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-06-05T21:34:05.607

我建议你找一本关于操作系统设计的好教科书，然后学习。我很确定你不会找到这样一本包含 Python 源代码的书。C 的可能性更大。（您可能会发现一本使用 Pascal 而不是 C 的旧教科书，但实际上并没有那么不同。）

一旦你对操作系统设计的研究足以真正能够编写操作系统，你就会知道足够多的知识，对哪些语言适合你有自己的看法。

# android - 在 Android 上使用 PhoneGap 从外部 url 无法访问本地文件

> ID：10904723
> 
> 赞同：2
> 
> 时间：2012-06-05T20:49:32.747
> 
> 标签：android, cordova

```
<img src="file:///android_asset/www/images/image.png" style="border: black dashed 2px"/> 
```

这行代码在本地 html 文件上按预期工作。

但是，当您在应用程序内打开外部 URL 时。（例如[http://www.example.com/mobile/](http://www.example.com/mobile/)）同一行代码不显示图像。

需要说明的是，我正在尝试从外部 url 访问本地文件，因为有些 JS 文件很大，从外部下载它们会浪费带宽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:55:12.290

远程站点将永远无法从 file:// 协议加载图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:03:45.720

正如@simon 所说，您将无法在外部 url 上加载本地资产.. 充其量您可以使用 loadDataWithBaseURL 它将从本地资产文件夹中加载带有 imgs/css/js 的 html，如下所示

```
webView.loadDataWithBaseURL("file:///android_res/raw/", html, 
                        "text/html", "UTF-8", null); 
```

# matlab - MATLAB USB HID 数据接收

> ID：10904726
> 
> 赞同：1
> 
> 时间：2012-06-05T20:49:52.437
> 
> 标签：matlab, usb, hid

有没有办法在 MATLAB 中使用 HID 协议接收通过 USB 发送到 PC 的数据？我尝试了在 Simulink 的 STM32 模块集中找到的主机隐藏接收器模块，但它给出了一个错误，提示找不到 STM32 设备，所以我猜该模块集对于 STM32 设备是特别的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:59:25.370

在 Linux 下，您可以从 /dev/input/mice 读取。它涵盖了位置数据和点击。您可能需要调整设备文件的读取权限。

# php - 了解 Magento 中的 PHP 会话

> ID：10904728
> 
> 赞同：1
> 
> 时间：2012-06-05T20:50:08.540
> 
> 标签：php, session, magento

我无法弄清楚有关会话、浏览器和 Magento（或者可能是任何购物车）的一些事情。我了解默认情况下 24 分钟不活动将关闭会话。我还了解到，当您完全退出浏览器时，该会话也将关闭。

为了测试第二部分，我访问了我的 Magento 商店，在我的购物车中添加了一个产品，然后完全退出了我的浏览器。我重新打开浏览器，产品仍在购物车中。怎么会这样？PHP 垃圾收集器是否只在特定时间运行？我认为该会话将失效，因此无法链接到存储在我机器上的 cookie。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T22:45:37.447

原生 PHP 会话使用一个 0 过期的 cookie，它会在浏览器窗口关闭后立即被清除。Magento 的会话 cookie（如 Emi 所述）有 3 小时的有效期，并且将在浏览器会话之间持续存在，因此关闭/打开浏览器窗口不会导致会话重新启动。Firefox Web 开发人员工具栏或 Chrome 的开发人员工具将允许您强制清除 cookie 并重新启动会话（如果您想要这样做）。

我还应该注意，虽然 cookie 名称不同并且有过期时间，但 Magento 确实使用 PHP 的本机会话支持。这意味着 php.ini 中与最大会话生命周期等相关的设置也会影响 Magento 的会话。

此外，从 Magneto 1.6（和 EE 1.11）开始，有一个称为[持久购物车](http://www.magentocommerce.com/blog/comments/persistent-shopping-cart-customer-segmentation-just-getting-better/)的功能，它建立了一个长期 cookie，用于在会话之间维护您的购物车。如果您测试是否维护会话只是查看购物车，则此功能可能会使您的会话看起来比实际时间长得多..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T21:02:28.717

服务器无法真正区分关闭窗口、停留在页面上还是四处浏览。至少，不是没有额外的脚本，这不是 Magento 内置的。如果要测试会话，请等待 24 分钟，尝试其他浏览器，或清除服务器上的所有会话文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T21:45:32.130

会话存储在站点服务器的本地（大多数情况下在文件系统中，但您可以使用其他类型的数据存储，例如：数据库、apc、memcached...），这是在 local.xml 中配置的。当存储在文件系统中时，您可以在 /path_to_site_root/var/sessions 下找到它们 我相信您有 3 个使用会话的模型：“核心/会话”、“客户/会话”和“管理员/会话”您还可以配置 php 的垃圾收集器：[http ://ca.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime](http://ca.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)

当您关闭浏览器时，如果 cookie 已过期设置为 0，它将不再使用[http://ca.php.net/manual/en/function.setcookie.php](http://ca.php.net/manual/en/function.setcookie.php) Magento 的默认 cookie 称为前端，我认为它有expire 设置为至少和小时，你也不能从 javascript 修改这个 cookie，因为它只是 http。

# c# - 将内存流移动到文件流时，PDF文件损坏且无法修复

> ID：10904730
> 
> 赞同：2
> 
> 时间：2012-06-05T20:50:09.560
> 
> 标签：c#, .net, vb.net, itext

我正在使用 iTextSharp 和 VB.Net 将图像标记到 PDF 文档上。（由于这不是特定于语言的，所以我也为 C# 标记了。）我有两个应用程序使用该过程。

*   第一个使用内存流中的字节在线显示 PDF 文档。这件作品正在工作。

*   第二个使用相同的功能，但将 PDF 保存到文件中。这件作品生成了一个无效的 PDF。

我见过一些类似的问题，但他们最初都是在创建一个文档，并且在代码中有一个文档对象。他们的记忆流从一开始就被破坏了。我的代码没有文档对象，并且我的原始内存流可以正常打开。

这是我得到错误的地方：（我必须将缓冲区从 m 放入一个新的内存流，因为 fillPDF 函数中的压模默认关闭流，除非另有标记。）

```
Dim m As MemoryStream = PDFHelper.fillPDF(filename, Nothing, markers, "")
Dim m2 As New MemoryStream(m.GetBuffer, 0, m.GetBuffer.Length)
Dim f As FileStream = New FileStream("C:\temp.pdf", FileMode.Create)
m2.CopyTo(f, m.GetBuffer.Length)
m2.Close()
f.Close() 
```

这是我在网站上成功使用它的方法之一。这个不使用图像，尽管其他一些类似的成功地方确实在多个文档上使用图像，然后将它们合并在一起。

```
Dim m As System.IO.MemoryStream = PDFHelper.fillPDF(filename, New Dictionary(Of String, String), New List(Of PDFHelper.PDfImage), "SAMPLE")
Dim data As Byte() = m.GetBuffer
Response.Clear()

//Send the file to the output stream
Response.Buffer = True

//Try and ensure the browser always opens the file and doesn’t just prompt to “open/save”.
Response.AddHeader("Content-Length", data.Length.ToString())
Response.AddHeader("Content-Disposition", "inline; filename=" + "Sample")
Response.AddHeader("Expires", "0")
Response.AddHeader("Pragma", "cache")
Response.AddHeader("Cache-Control", "private")

//Set the output stream to the correct content type (PDF).
Response.ContentType = "application/pdf"
Response.AddHeader("Accept-Ranges", "bytes")

//Output the file
Response.BinaryWrite(data)

//Flushing the Response to display the serialized data to the client browser.
Response.Flush()

Try
    Response.End()
Catch ex As Exception
    Throw ex
End Try 
```

这是我的实用程序类中的函数（PDFHelper.fillPDF）

```
 Public Shared Function fillPDF(fileToFill As String, Optional fieldValues As Dictionary(Of String, String) = Nothing, Optional images As List(Of PDfImage) = Nothing, Optional watermarkText As String = "") As MemoryStream

        Dim m As MemoryStream = New MemoryStream() // for storing the pdf
        Dim reader As PdfReader = New PdfReader(fileToFill) // for reading the document
        Dim outStamper As PdfStamper = New PdfStamper(reader, m) //for filling the document

        If fieldValues IsNot Nothing Then
            For Each kvp As KeyValuePair(Of String, String) In fieldValues
                outStamper.AcroFields.SetField(kvp.Key, kvp.Value)
            Next
        End If

        If images IsNot Nothing AndAlso images.Count > 0 Then //add all the images

            For Each PDfImage In images
                Dim img As iTextSharp.text.Image = Nothing //image to stamp

                //set up the image (different for different cases
                Select Case PDfImage.ImageType
                    //removed for brevity
                End Select

                Dim overContent As PdfContentByte = outStamper.GetOverContent(PDfImage.PageNumber) // specify page number for stamping
                overContent.AddImage(img)

            Next

        End If

        //add the water mark
        If watermarkText <> "" Then
            Dim underContent As iTextSharp.text.pdf.PdfContentByte = Nothing
            Dim watermarkRect As iTextSharp.text.Rectangle = reader.GetPageSizeWithRotation(1)

          //removed for brevity
        End If

        //flatten and close out
        outStamper.FormFlattening = True
        outStamper.SetFullCompression()
        outStamper.Close()
        reader.Close()
        Return m 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T10:45:29.243

由于您的代码正在流式传输 PDF，因此解决问题的一种简单方法是对您的`fillPDF`方法进行小幅更改 - 让它返回一个字节数组：

```
// other parameters left out for simplicity sake  
public static byte[] fillPDF(string resource) {
  PdfReader reader = new PdfReader(resource);
  using (var ms = new MemoryStream()) {
    using (PdfStamper stamper = new PdfStamper(reader, ms)) {
      // do whatever you need to do
    }
    return ms.ToArray();
  }      
} 
```

然后您可以在 ASP.NET 中将字节数组流式传输到客户端**并将**其保存到文件系统：

```
// get the manipulated PDF    
byte[] myPdf = fillPDF(inputFile);
// stream via ASP.NET
Response.BinaryWrite(myPdf);
// save to file system
File.WriteAllBytes(outputFile, myPdf); 
```

如果您从标准的 ASP.NET Web 表单生成 PDF，请不要忘记`Response.End()`在编写 PDF 后调用，否则字节数组将在末尾附加 HTML 标记垃圾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T02:56:19.240

这会将现有的 PDF 复制到 MemoryStream 中，然后将其保存到磁盘。也许你可以调整它来解决你的问题？

```
 Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim strInputFilename As String = "C:\Junk\Junk.pdf"
    Dim strOutputFilename As String = "C:\Junk\Junk2.pdf"
    Dim byt() As Byte
    Using ms As New MemoryStream
      '1\. Load PDF into memory stream'
      Using bw As New BinaryWriter(ms)
        Using fsi As New FileStream(strInputFilename, FileMode.Open)
          Using br As New BinaryReader(fsi)
            Try
              Do
                bw.Write(br.ReadByte())
              Loop
            Catch ex As EndOfStreamException
            End Try
          End Using
        End Using
      End Using
      byt = ms.ToArray()
    End Using
    '2\. Write memory copy of PDF back to disk'
    My.Computer.FileSystem.WriteAllBytes(strOutputFilename, byt, False)
    Process.Start(strOutputFilename)
  End Sub 
```

# iphone - 移动 x 偏移量时的 CGContextDrawImage

> ID：10904731
> 
> 赞同：0
> 
> 时间：2012-06-05T20:50:21.137
> 
> 标签：iphone, objective-c, ios, ipad

所以我有以下代码：

```
 CGContextDrawImage(context, CGRectMake(100, 0, 220, self.image.size.height), self.image.CGImage); 
```

基本上，我要求 CG 将图像向右绘制 100 像素。现在效果很好。但是在图像的左侧，我看到了一个白色背景。如何将此背景更改为其他颜色？说我想要一个黑色的背景

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T20:59:12.320

在绘制图像之前，用所需的颜色填充矩形：

```
CGContextSetFillColorWithColor(context, [UIColor blackColor].CGColor);
CGContextFillRect(context, CGRectMake(0, 0, self.image.size.width + 100, self.image.size.height)); //I suppose your rect's width is as much as image's width +100
//Then draw your image
CGContextDrawImage(context, CGRectMake(100, 0, 220, self.image.size.height), self.image.CGImage); 
```

**注意**：确保您绘制的矩形宽度至少是图像的宽度 + 100

# sql-server - 如何在 SQL 表中实现这种数据结构

> ID：10904734
> 
> 赞同：2
> 
> 时间：2012-06-05T20:50:25.093
> 
> 标签：sql-server, database, database-design, relational-database, database-schema

我有一个问题可以总结如下：

假设我正在实现一个员工数据库。对于每个人取决于他的职位，应填写不同的字段。因此，例如，如果员工是软件工程师，我有以下列：

```
Name
Family
Language
Technology
CanDevelopWeb 
```

如果员工是业务经理，我有以下列：

```
Name
Family
FieldOfExpertise
MaximumContractValue
BonusRate 
```

如果员工是销售人员，那么其他一些列等等。

如何在数据库模式中实现这一点？

我认为的一种方法是有一些相关的表：

核心表：

```
Name
Family
Type 
```

如果 type 是 one 则员工是软件开发人员，因此剩余信息应在表中`SoftwareDeveloper`：

```
Language
Technology
CanDevelopWeb 
```

对于业务经理，我有另一个包含列的表：

```
FieldOfExpertise
MaximumContractValue
BonusRate 
```

这种结构的问题是我不确定如何在表之间建立关系，因为一个表与一列上的多个表有关系。

如何执行关系完整性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:59:51.313

这里有一些思想流派。

(1) 将可为空的列存储在单个表中并仅填充相关的列（检查约束可以在此处强制执行完整性）。有些人不喜欢这个，因为他们害怕 NULL。

(2) 您的多表设计，其中每种类型都有自己的表。使用 DRI 更难强制执行，但对于应用程序或触发逻辑可能微不足道。

其中任何一个的唯一问题是，一旦添加了新属性（`CanReadUpsideDown`如2）如果代表新的“类型”员工，您需要添加一个新表。

(3) EAV，您有一个存储属性名称和值对的表。您在这里对数据完整性的控制较少，但您当然可以将属性名称限制为某些字符串。我在这里写了这个：

*   [无论如何，EAV 有什么不好？](https://sqlblog.org/2009/11/19/what-is-so-bad-about-eav-anyway)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T21:02:34.213

您正在描述实现类别（又名继承、泛化、子类）层次结构的[3 种可能策略](https://stackoverflow.com/a/9178524/533120)中的一种（“每个表的类” ）。

PK 从父表到子表的正确“传播”自然是由它们之间的直接外键强制执行的，但确保子行的存在性和排他性是另一回事。它可以完成（如上面的链接中所述），但增加的复杂性可能不值得，我通常建议在应用程序级别处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T08:23:00.343

在这种情况下，没有任何现有的 SQL 引擎可以让您的生活变得轻松。

您的问题在“实体子类型化”一章的“数据库管理中的实际问题”中进行了相当大的讨论。值得称赞的阅读，不仅适用于这一章。

从逻辑设计的角度来看，正确的解决方案与您的解决方案相似，但针对核心表中的“类型”列。您不需要那个，因为您可以从员工出现的非核心表中派生“类型”。

您需要查看的是业务规则，也就是数据约束，它将确保数据的整体完整性（也就是一致性）（当然，这些是否实际适用是您的业务用户而不是我应该告诉您的） ：

每个指定的员工必须只有一份工作，因此在某处有一些工作细节。iow ：（1）没有任何工作细节的指定员工和（2）没有> 1个工作细节的指定员工。

(3) 所有工作细节必须是指定员工的。

其中，(3) 是唯一可以在使用 SQL 引擎时以声明方式实现的。这只是从非核心表到核心表的常规 FK。

(1) 和 (2) 可以在标准 SQL 中以声明方式定义，使用 CREATE ASSERTION 或 CHECK CONSTRAINT 涉及对其他表的引用，而不是定义 CHECK CONSTRAINT 的表，但任何 SQL 引擎都不支持这些构造知道。

关于为什么 [包括] 'type' 列是一个相当糟糕的选择的另一件事：它改变了必须如何制定约束 (3)。例如，您不能再说“所有业务经理都必须是雇员”，而是必须说“所有业务经理都是类型为 <type here> 的雇员”。Iow，您的核心表的“常规 FK”现在已成为对核心表上*VIEW*的引用，您可能希望将其声明为，例如，

CREATE TABLE BUSMANS ... REFERENCES (SELECT ... FROM CHERE WHERE TYPE='BM');

或者

CREATE VIEW BM AS (SELECT ... FROM CORE WHERE TYPE='BM'); 创建表 BUSMANS ... 参考 BM；

再一次 SQL 不允许你做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T21:04:51.577

使用核心表进一步扩展您的一种方法是基于标识列创建代理键。这将为每个员工创建一个唯一的员工 ID（这也将帮助您区分同名的员工）。

外键保留您的参照完整性。您不必像其他人提到的那样需要 EmployeeTypeId，因为您可以过滤 SoftwareDeveloper 或 BusinessManagers 表中的存在。该列将改为充当缓存数据点，以便于查询。

您必须填写以下示例代码中的类型并重命名外键。

```
create table EmployeeType(
    EmployeeTypeId
,   EmployeeTypeName
,   constraint PK_EmployeeType primary key (EmployeeTypeId)
)

create table Employees(
    EmployeeId int identity(1,1)
,   Name
,   Family
,   EmployeeTypeId
,   constraint PK_Employees primary key (EmployeeId)
,   constraint FK_blahblah foreign key (EmployeeTypeId) references EmployeeType(EmployeeTypeId)
)

create table SoftwareDeveloper(
    EmployeeId
,   Language
,   Technology
,   CanDevelopWeb
,   constraint FK_blahblah foreign key (EmployeeId) references Employees(EmployeeId)
)

create table BusinessManagers(
    EmployeeId
,   FieldOfExpertise
,   MaximumContractValue
,   BonusRate
,   constraint FK_blahblah foreign key (EmployeeId) references Employees(EmployeeId)
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-05T20:59:14.030

1.  我会添加一个`EmployeeId`在`EmployeeTable`
2.  我会摆脱`Type`
3.  例如，对于`BusinessManager`表格`SoftwareDeveloper`，我将添加`EmployeeId`
4.  然后，您可以从此处继续创建外键，从`BusinessManager`表`SoftwareDeveloper`到`Employee`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T21:00:41.197

你在正确的轨道上。您可以设置从一般人员表到每个专用表的 PK/FK 关系。您应该将 personID 添加到用于关系的所有表中，因为您不想在 name 上建立关系，因为它不是唯一的 PK，因此它不能是 PK。名称也会更改，对于 FK 关系来说，它们是一个非常糟糕的选择，因为名称更改可能会导致许多记录需要更改。使用单独的表而不是一张表很重要，因为其中一些是一对多的关系。实例的开发人员可能有许多不同的技术，并且这种东西永远不应该存储在逗号分隔的列表中。

您还可以设置触发器以强制只有在主记录具有特定 personType 时才能将记录添加到专业表中。但是，请小心这样做，因为随着时间的推移，您会有人改变角色。您是否想丢失该人在晋升为经理时作为开发人员时所知道的历史。然后，如果他决定退出开发（经常发生），您将不得不重新创建他的旧记录。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-05T20:57:13.207

您可以使用同一个表中的所有字段，但是您需要一个名为`Employee_Type`（例如）的额外表，并且您必须在此处放置`Developer, Business Manager,`......当然还有一个唯一的 ID。所以你的关系将`employee_type_id`在`Employee table`.

`employee_type_id`使用 PHP 或 ASP，您可以根据下拉菜单中的（或文本）来控制要显示的字段。

# xcode - WebView 完成启动 Mac OSX

> ID：10904738
> 
> 赞同：0
> 
> 时间：2012-06-05T20:50:56.737
> 
> 标签：xcode, macos, cocoa, webview

我想知道是否可以启动 javascript 功能

```
[WebView stringByEvaluatingJavaScriptFromString:@"Next()"]; 
```

在 WebView 在 Mac OS X 应用程序中完成加载后，而不是在 iOS 中。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:56:59.823

看看[WebFrameLoadDelegate 协议参考](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebFrameLoadDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40003828)。特别`webView:didFinishLoadForFrame:`是对你来说应该很有趣。

# mysql - Mysql：在UPDATE查询的两个条件下切换int字段的值

> ID：10904745
> 
> 赞同：0
> 
> 时间：2012-06-05T20:51:43.743
> 
> 标签：mysql, sql, sql-update

我要做的是插入一条记录，然后停用具有相同 ID 的先前记录，因为它们将不再使用。但是，我希望以最简单的方式做到这一点。删除记录确实不是一种选择。

尝试的操作顺序：

1.  插入带有激活的 inUse 值`inUse = 1`
2.  为不再使用的同一 ID 更新以下记录：`inUse = 0`

我的第一个想法是运行这个查询：

`UPDATE page_tags SET inUse = IF(inUse = 1, 0, 1) WHERE page_id = 23678459 AND tag_id NOT IN (10, 4);`

此查询的唯一问题是，如果再次运行，它会将所有这些停用的值切换回 1。我需要特定 ID 的所有标签仅在它们被 WHERE 语句定位时才切换回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:15:34.793

听起来像是触发器的工作。类似的东西可能会做（伪代码）？

**更新处理 previuos 标签的重用：**

做你的插入/更新：

```
INSERT INTO ... ON DUPLICATE KEY UPDATE 
```

然后使用两个触发器，一个用于插入，一个用于更新。

```
CREATE TRIGGER tr_inuse_insert BEFORE INSERT ON page_tags
  FOR EACH ROW BEGIN
    UPDATE page_tags SET inuse=0 WHERE page_id = NEW.page_id;
  END;

CREATE TRIGGER tr_inuse_update BEFORE UPDATE ON page_tags
  FOR EACH ROW BEGIN
    UPDATE page_tags SET inuse=0 WHERE page_id = NEW.page_id;
  END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:17:27.583

@John P 有一个不错的答案，但是他的答案需要使用触发器。对我来说，这似乎比解决手头问题所需要的要多。当前的工作解决方案是：

在和上创建***唯一索引***。`page_tags.page_id``page_tags.tag_id`

**更新*page_id = 234234***的所有行：

```
UPDATE page_tags SET inUse = 0 WHERE page_id = 234234 
```

插入标签：

```
INSERT INTO page_tags (page_id, tag_id, inUse) VALUES (234234, 49343, 1) ON DUPLICATE KEY UPDATE inUse = 1 
```

# soapui - 与虚拟用户生成器一起使用的soapUI 运行器是否只在loadUI 中运行指定的testCase 的设置脚本一次？

> ID：10904748
> 
> 赞同：0
> 
> 时间：2012-06-05T20:51:56.240
> 
> 标签：soapui, amf, loadui

我正在尝试对我使用 loadUI 在soapUI 中创建的测试用例运行负载测试。

我的soapUI testCase 中有一个AMF 请求，它创建了一个数据库对象，我们称之为“someList”。在 testCase 选项菜单中，我检查了“启用 AMF 会话”并粘贴了正确的端点。

现在，我正在使用 testCase 的设置脚本功能在 testCase AMF 选项中动态设置随机登录名和密码，如下所示：

```
def loginCreds = String.format("%04d", new Random().nextInt(999999999))

testCase.setAmfLogin( loginCreds )

testCase.setAmfPassword( loginCreds ) 
```

当我在soapUI中运行这个testCase时，AMF会话登录名和密码是正确随机的，并且在我的数据库中创建了一个新用户，并且AMF请求正确地创建了“someList”并将所有权分配给新创建的随机用户（通过AMF会话生成登录名和密码选项。）

我重新运行测试，新用户，新“someList”。就像我想要的那样工作。

现在，当我在 LoadUI 中将其作为带有固定速率虚拟用户生成器的 soapUI Runner 运行时，只会创建一个新用户，并且每个后续的新“someList”都会分配给该用户。似乎安装脚本只运行一次！

这是预期的功能！？

以下是摘自[http://www.loadui.org/Runners/soapui-runner-component.html](http://www.loadui.org/Runners/soapui-runner-component.html)

“需要注意的是，每个通过soapUI Runner 的虚拟用户都会获得自己的soapUI 测试用例的独立副本，但实际上与运行属于同一soapUI 项目的soapUI 测试用例的所有其他VU 共享soapUI 项目的其余部分。这意味着您应该避免写入 TestSuite 或项目属性，因为它们在所有 VU 之间共享，如果不同步，可能会导致 ConcurrentModificationException。”

我读错了吗？不应该每个虚拟用户都获得它自己的 testCase 版本，从而获得设置脚本以及随机生成的 AMF 会话登录名和密码吗？

这似乎完全否定了模拟单独的虚拟用户的可能性，每个虚拟用户都有自己的 AMF 会话凭据，因为没有一个用户会同时制作数百个“someList”对象。

任何帮助或澄清将不胜感激。

我对我的假设进行了一些测试，并且每次都运行设置脚本，但是 AMF 会话凭据由生成的所有虚拟用户共享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:06:24.783

我在 SoapUI 中的内置负载测试功能上遇到了类似的问题（我从来没有运气好将我的项目迁移到 LoadUI）。我最终通过提供随时间变化的随机种子、常数和线程索引（可能线程索引是最重要的部分）找到了解决方法。

```
def ti = context.ThreadIndex
def cal = Calendar.instance
cal.timeZone = TimeZone.getTimeZone("America/Denver")
cal.set(Calendar.MONTH, Calendar.DECEMBER)
long time = cal.time.time / 1000
def seed = time.toInteger()
Random random = new Random(123445*ti + 544321 + seed)               
def loginCreds = String.format("%04d", random.nextInt( 999999999)) 
```

# symfony - Symfony2 和 ParamConverter(s)

> ID：10904759
> 
> 赞同：6
> 
> 时间：2012-06-05T20:52:43.310
> 
> 标签：symfony, doctrine, doctrine-orm, symfony-forms

访问我的路线`/message/new`，我将展示一个用于向**一个或多个客户发送新消息**的表单。表单模型具有（除其他外）一组`Customer`实体：

```
class MyFormModel
{
   /**
    * @var ArrayCollection
    */
    public $customers;
} 
```

我想使用GET 参数实现**自动客户选择，如下所示：**`customers`

```
message/new?customers=2,55,543 
```

现在通过简单地拆分`,`并执行获取客户的查询来工作：

```
public function newAction(Request $request)
{
    $formModel = new MyFormModel();

    // GET "customers" parameter
    $customersIds = explode($request->get('customers'), ',');

    // If something was found in "customers" parameter then get entities
    if(!empty($customersIds)) :

        $repo  = $this->getDoctrine()->getRepository('AcmeHelloBundle:Customer');
        $found = $repo->findAllByIdsArray($customersIds);

        // Assign found Customer entities
        $formModel->customers = $found;
    endif;

    // Go on showing the form
} 
```

我怎样才能使用[Symfony 2 转换器](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/converters.html)做同样的事情？像：

```
public function newAction(Request $request, $selectedCustomers)
{
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-06T01:12:55.903

对我自己的回答：没有这样的事情可以让你的生活变得轻松。我已经编写了一个快速而肮脏（并且可能有问题）的解决方案，我想分享，等待一个最好的解决方案。

**编辑警告**：这不适用于具有相同类的两个参数转换器。

# 网址示例

```
/mesages/new?customers=2543,3321,445 
```

# 注释：

```
/**
 * @Route("/new")
 * @Method("GET|POST")
 * @ParamConverter("customers",
 *     class="Doctrine\Common\Collections\ArrayCollection", options={
 *         "finder"    = "getFindAllWithMobileByUserQueryBuilder",
 *         "entity"    = "Acme\HelloBundle\Entity\Customer",
 *         "field"     = "id",
 *         "delimiter" = ",",
 *     }
 * )
 */
public function newAction(Request $request, ArrayCollection $customers = null)
{
} 
```

选项`delimiter`用于拆分`GET`参数，而`id`用于添加`WHERE id IN...`子句。两者都是可选的。

选项`class`仅用作“签名”来告诉转换器应该`support`使用它。`entity`必须是 Doctrine 实体的 FQCN，`finder`而是要调用的存储库方法，并且应该返回查询构建器（默认提供）。

# 转换器

```
class ArrayCollectionConverter implements ParamConverterInterface
{
    /**
     * @var \Symfony\Component\DependencyInjection\ContainerInterface
     */
    protected $container;

    public function __construct(ContainerInterface $container)
    {
        $this->container = $container;
    }

    function apply(Request $request, ConfigurationInterface $configuration)
    {
        $name    = $configuration->getName();
        $options = $this->getOptions($configuration);

        // Se request attribute to an empty collection (as default)
        $request->attributes->set($name, new ArrayCollection());

        // If request parameter is missing or empty then return
        if(is_null($val = $request->get($name)) || strlen(trim($val)) === 0)
            return;

        // If splitted values is an empty array then return
        if(!($items = preg_split('/\s*'.$options['delimiter'].'\s*/', $val,
            0, PREG_SPLIT_NO_EMPTY))) return;

        // Get the repository and logged user
        $repo = $this->getEntityManager()->getRepository($options['entity']);
        $user = $this->getSecurityContext->getToken()->getUser();

        if(!$finder = $options['finder']) :
            // Create a new default query builder with WHERE user_id clause
            $builder = $repo->createQueryBuilder('e');
            $builder->andWhere($builder->expr()->eq("e.user", $user->getId()));

            else :
                // Call finder method on repository
                $builder = $repo->$finder($user);
        endif;

        // Edit the builder and add WHERE IN $items clause
        $alias   = $builder->getRootAlias() . "." . $options['field'];
        $wherein = $builder->expr()->in($alias, $items);
        $result  = $builder->andwhere($wherein)->getQuery()->getResult();

        // Set request attribute and we're done
        $request->attributes->set($name, new ArrayCollection($result));
    }

    public function supports(ConfigurationInterface $configuration)
    {
        $class = $configuration->getClass();

        // Check if class is ArrayCollection from Doctrine
        if('Doctrine\Common\Collections\ArrayCollection' !== $class)
            return false;

        $options = $this->getOptions($configuration);
        $manager = $this->getEntityManager();

        // Check if $options['entity'] is actually a Dcontrine one
        try
        {
            $manager->getClassMetadata($options['entity']);
            return true;
        }
        catch(\Doctrine\ORM\Mapping\MappingException $e)
        {
            return false;
        }
    }

    protected function getOptions(ConfigurationInterface $configuration)
    {
        return array_replace(
            array(
                'entity'         => null,
                'finder'         => null,
                'field'          => 'id',
                'delimiter'      => ','

            ),
            $configuration->getOptions()
        );
    }

    /**
     * @return \Doctrine\ORM\EntityManager
     */
    protected function getEntityManager()
    {
        return $this->container->get('doctrine.orm.default_entity_manager');
    }

    /**
     * @return \Symfony\Component\Security\Core\SecurityContext
     */
    protected function getSecurityContext()
    {
        return $this->container->get('security.context');
    }
} 
```

# 服务定义

```
arraycollection_converter:
  class: Acme\HelloBundle\Request\ArrayCollectionConverter
  arguments: ['@service_container']
  tags:
    - { name: request.param_converter} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-24T16:50:57.443

已经很晚了，但是根据有关@ParamConverter 的[最新](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/converters.html#doctrine-converter)文档，您可以按照以下方式实现：

```
 * @ParamConverter("users", class="AcmeBlogBundle:User", options={
 *    "repository_method" = "findUsersByIds"
 * }) 
```

您只需要确保存储库方法可以处理逗号 (,) 分隔值

# asp-classic - ASP 将图像嵌入到 CDO.Message 电子邮件

> ID：10904763
> 
> 赞同：0
> 
> 时间：2012-06-05T20:52:54.613
> 
> 标签：asp-classic, cdo.message, cdonts

我正在使用 ASP 经典和 CDO 以`CreateMHTMLBody`方法发送电子邮件。我的电子邮件中有几张图片，其中一些是静态的，不会改变，但其中一些会根据电子邮件内容而改变。一些像 iCloud 这样的邮件软件将图片显示为附件，即使我拥有它们都有完整的路径 url 地址。我用过`AddRelatedBodyPart`，但现在他们在你必须的地方显示图像，但他们仍然在附件中显示图像。我希望图片只显示在电子邮件正文中而不是附件中。有谁知道如何解决这一问题？这是我的代码示例：

```
Set myMail=CreateObject("CDO.Message")
myMail.Subject= "Subject of Email"
myMail.From= "from@site.com"
myMail.To= "to@site.com"
myMail.CreateMHTMLBody "http://www.mysite.com/email.html"

strImagePath = Server.MapPath("\") & "\images\mypic1.jpg"
myMail.AddRelatedBodyPart strImagePath, "my_pic_1", 0

strImagePath = Server.MapPath("\") & "\images\mypic2.jpg"
myMail.AddRelatedBodyPart strImagePath, "my_pic_2", 0

myMail.Send
set myMail=nothing 
```

提前感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:55:30.290

为了在电子邮件中包含图像，您必须在邮件**正文**`IMG`中使用内联标签以及图像的完全限定路径（http://...）。不要将它们视为附件。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:40:14.227

这`CreateMHTMLBody`不是你需要的。此方法将创建一个多部分消息，用于获取 URL 并后处理返回的 HTML。它为找到的每个 img src 获取资源，将返回的资源编码为正文部分，并更新 HTML img src 以指向正文部分。

在`CreateMHTMLBody`ASP 代码中使用也不是一件好事，因为它使用 WinINET Http 堆栈来获取资源，不应在 ASP 代码中使用 WinINET。

您真正需要的是使用 WinHTTP 之类的东西来获取 HTML 资源，然后将其分配给 Message 的`HTMLBody`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-11T22:07:59.190

我知道这个问题很老，但也许您（或其他人）仍在寻找答案：

```
myMail.Configuration.Fields("urn:schemas:httpmail:content-disposition-type")="inline"
myMail.Configuration.Fields.Update 
```

这应该会导致大多数邮件客户端不将图像呈现为附件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-29T14:26:35.527

```
true;

 strImagePath = Server.MapPath("\") & "\images\mypic1.jpg"

response.write strImagePath ' try

 myMail.AddRelatedBodyPart strImagePath, "mypic1.jpg", 0 
```**

# sql-server-2008 - SQL Server 2008 用排除替换函数

> ID：10904765
> 
> 赞同：2
> 
> 时间：2012-06-05T20:53:12.367
> 
> 标签：sql-server-2008, tsql, function, replace

我`nvarchar(max)`在包含 substring 的表中有一个类型的列`'><'`。

我需要更换`'><'`并制作它`'> ​ ​ ​ <'`，但我只想在它不是`'><\'`或时才这样做`'><!'`。

有没有办法使替换功能有条件？

列中将出现多次`'><'`。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T21:05:55.867

为此，您可以先将要保留的序列替换为不会自然出现在列中的序列，然后替换要替换的序列，然后将其他序列切换回来。

```
DECLARE @x NVARCHAR(MAX) = N'<foo><blat><!--comment--><\blat><bar>';

SELECT @x = REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(@x, 
  '><!', '~~~~~!'), '></', '~~~~~\ '), -- hide ones you want to keep
  '><', '> <'),                        -- replace ones you want to replace
  '~~~~~!', '><!'), '~~~~~\ ', '><\'); -- un-hide the ones you want to keep

SELECT @x; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T21:02:16.977

可以安装 CLR 程序集吗？正则表达式可能更直接。或者你可以通过三个替换函数调用来做到这一点。

第一个替换`'><'`为，`'> <'`然后两个替换`'> <(exclamation)'`为`'><(exclamation)'`和 。`'> <(backslash)'``'><(backslash)'`

不过，这最终可能会替换在第一次操作中未修改的现有文本。

# javascript - 从外部根文件夹访问 js

> ID：10904766
> 
> 赞同：0
> 
> 时间：2012-06-05T20:53:15.833
> 
> 标签：javascript, apache, root

使用 apache web 服务器和 javascript/php 网页，有没有办法将 javascript 包含在根目录之外作为索引（html 文件）中的脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:56:13.480

您只能包含**公开**可用的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T21:12:51.177

客户端只能访问服务器提供的文件，您可以使用别名使文档根目录之外的目录可用

```
Alias /js /path/to/js
<Directory "/path/to/js">
    Require all granted
</Directory> 
```

（我不确定这`Require all granted`部分，但没有它我会被拒绝访问）
然后您可以访问 /js 文件夹表单 example.com/js

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T20:56:01.347

Javascript，通过`<script type="text/javascript" src="myurl">`可以从任何地方包含。无论来源如何，浏览器都会接受它。

题外话 PS：这就是为什么 jsonp 适用于跨域请求。

*编辑：*您的问题有点模棱两可，但阅读@Neal 的回答，我认为他可能会解决您要问的问题。

# xcode - 与 Xcode 分开安装 Git

> ID：10904774
> 
> 赞同：7
> 
> 时间：2012-06-05T20:53:52.793
> 
> 标签：xcode, macos, git

首先道歉，如果这是一个非常简单的问题，但 Git 对我来说绝对是全新的。基本上，我已经涉足了一段时间的 iOS 开发，现在有了一个我想开始工作的项目想法，并且我第一次计划将它放入源代码控制中。

现在我知道 Xcode 4 有一些 Git 集成，但我发现一些帖子表明集成不是很好，最好以命令行方式进行。

所以，我一直按照这里的说明[http://git-scm.com/book/en/Getting-Started-Installing-Git](http://git-scm.com/book/en/Getting-Started-Installing-Git)并且我已经下载了 Mac 版本 1.7.10.3 并运行了安装。

但是，当我运行 git --version 时，我会得到 1.7.4.4 版本，这是我假设的 Xcode 安装的版本？

我的问题是，如何使用我的新版本 1.7.10.3？计划是通过命令工具学习使用 Git，并在我家里的服务器上建立一个中央存储库，然后在我的笔记本电脑上保存本地副本。

正如我所说，我对此真的很陌生，所以快速一步一步的白痴指南会很有帮助。我已经搜索并尝试在此处和谷歌上找到详细信息，但除了在 Xcode 之外使用 Git 的建议之外，我还没有找到确切的方法。

非常感谢任何建议或指向涵盖此内容的体面教程的链接。

**更新：**

我已将路径更改为 .bash_profile (/usr/local/git/bin) 中的新路径，现在获得 git 版本 1.7.7.5 (Apple Git-26)。这似乎仍然是错误的版本（尽管这可能是我很密集）。我从上面的链接下载了 OSX 的安装程序。我是不是应该做点别的事情。我想玩弄命令行工具，以便正确理解

**更新 2：**

我现在也在尝试文章中推荐的 MacPorts。不过，这似乎下载的不仅仅是 Git

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T21:11:07.127

Xcode 在 /Applications/Xcode.app/... 中安装 git，但如果您运行“安装命令工具”，那么 git 也会安装在 /usr/bin/git 中。Xcode 在 Xcode.app 中使用其私有版本。如果您在 /usr/local/git/bin 中安装了 git，那么您需要将该目录包含在 PATH 中。您应该有一个 .bashrc 文件（或您使用的任何 shell 的等效文件）。添加

```
PATH=/usr/local/git/bin:$PATH     # your shell might use different syntax. 
```

到那个文件'rc'文件。

另外，请注意，Xcode 将允许您实现在家中设置遥控器的目标，同时在笔记本电脑上维护本地副本。转到 Xcode 的“组织者”并单击“存储库”。在那里，您将找到您机器的所有 Git 存储库。选择一个，选择“遥控器”文件夹，然后选择“+”以添加您的家庭遥控器。我以这种方式使用 Xcode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-02T16:45:09.500

积分转到@GoZoner 以获得答案。我只是总结一切。

从以下网址下载官方 git 安装程序： http: [//git-scm.com/download/mac](http://git-scm.com/download/mac)

安装并将其目录添加到您的路径： `echo "PATH=/usr/local/git/bin:\$PATH" >> ~/.bash_profile source ~/.bash_profile`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-24T16:57:41.777

最好的方法是：

步骤1：

在你的 mac 上安装 homebrew 这是官方网站[Homebrew 主页](https://brew.sh/index_es)

从终端提示：

```
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" 
```

第2步：

从终端提示

```
brew install git 
```

# objective-c - 自定义描述方法不起作用

> ID：10904775
> 
> 赞同：2
> 
> 时间：2012-06-05T20:53:54.387
> 
> 标签：objective-c, ios, xcode

尝试为我的 NSManagedObject 子类编写自定义描述方法，而不是在 self.myvarname 中打印该数据，而是打印出“Myvarname”或打印 self.userCount 打印“UserCount”？

按照这个例子：[http ://brandontreb.com/objective-c-tutorial-helpful-debugging-by-overriding-the-description-method/](http://brandontreb.com/objective-c-tutorial-helpful-debugging-by-overriding-the-description-method/)

另外，为什么当我在 xcode 控制台中输入“po myroominstance.name”或“po myroominstance.usage”时，它会说没有找到属性（给定下面的类）？

这是我的课：

```
.h
===================
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface Rooms : NSManagedObject
{
  NSString *name;
  NSNumber *capacity;
  NSString *descr;
  NSString *usage;
}

@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSNumber * capacity;
@property (nonatomic, retain) NSString * descr;
@property (nonatomic, retain) NSString * usage;

@end

.M
==================
#import "Rooms.h"

@implementation Rooms

@dynamic name;
@dynamic capacity;
@dynamic descr;
@dynamic usage;

-(NSString *) description 
{
    return [NSString stringWithFormat:@"ID: %@ Name: %@ Website: %n",
        usage  ,descr,name];
}

@end 
```

更新1：================================================ ==========

```
====== My break point is on this line ==========
Room *myRoom = [Room findFirst];
NSLog(@"The room name is %@", myRoom.name);
================================================ 
```

如果我在上面的 NSlog 行中断，顺便打印出“房间名称是名称”，然后在控制台中键入“po myRoom.name”，我得到“名称”。如果我输入“po myRoom.descr”，我会得到“Descr”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T08:42:14.540

其他人都没有得到完全正确的格式，但无论如何他们都在叫错树。您似乎已经`-description`从链接到的教程中复制了该方法，并且没有对其进行调整以匹配您的课程。

你可以像这样实现它：

```
- (NSString*) description
{
    return [NSString stringWithFormat:@"<%@ %p> name %@, capacity %@, descr %@, usage %@", [self class], self, name, capacity, descr, usage];
} 
```

（无需调用`-intValue`on`capacity`然后使用“%d”格式说明符。）

但是，这并不能解释为什么您在调试会话期间或在要求对您的实例之一进行描述时没有获得预期的结果。请编辑您的问题并添加您如何要求描述以及您得到*什么的细节。*例如，您是否在代码中记录您的实例？如果是这样，请显示日志记录语句和输出。你`po`在调试器中使用吗？如果是这样，请显示实际的命令和输出。

# javascript - 在Javascript中外部化字符串

> ID：10904784
> 
> 赞同：3
> 
> 时间：2012-06-05T20:54:25.153
> 
> 标签：javascript, string-externalization

我一直在在线搜索一个在 JavaScript 中外部化字符串的工具，但我一直无法这样做。我希望会有类似于 eclipse 中内置的东西（Source -> Externalize Strings ...）。如果有人知道可以实现此目的的 Eclipse 工具或插件，请告诉我。

我们有一个已经成熟但现在需要支持翻译的软件项目，因此我们需要将字符串外部化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:58:42.960

如果您想通过 JavaScript 填充这些值，我建议您使用基于 JSON 的语言查找表。Eclipse 无法帮助您解决这个问题。

请参阅：[使用 JavaScript 和 JSON 在 Web 应用程序中进行本地化](https://stackoverflow.com/questions/5090641/localization-in-a-web-app-using-javascript-and-json)

# c# - ASP.NET 在使用 Windows 身份验证和自定义角色提供程序时实现“充当”功能

> ID：10904786
> 
> 赞同：1
> 
> 时间：2012-06-05T20:54:36.757
> 
> 标签：c#, asp.net, windows-authentication, impersonation, roleprovider

我正在尝试为 ASP.NET 应用程序实现“充当”功能，同时使用 Windows 身份验证和自定义角色提供程序。基本上我想做的是：

*   使用 Windows Auth 获取当前用户的域帐户以验证他们是已批准的域用户
*   使用自定义角色提供程序从 SQL Server 数据库获取权限信息。
*   实现功能以允许应用程序的管理员能够“充当”另一个用户，而无需他们以该用户的身份实际登录应用程序。

我试图实现的场景是应用程序管理员试图帮助用户解决问题并单击“充当”按钮以充当该用户并以他们看到的方式查看应用程序。因此，角色提供者需要了解当前用户正在充当其他人，并获取该用户而不是当前用户的权限信息。

我的计划是实现一个模拟功能，该功能将删除角色 cookie 并向会话变量添加一个值，指示用户当前正在模拟另一个用户。但是，由于在授权发生时未填充会话，因此这是不可能的。我不想使用 cookie，因为我不希望这会导致管理员机器上的潜在持久状态（这样管理员无法打开应用程序的另一个窗口并充当另一个用户或查看他们自己的数据）。

鉴于会话不可用，我找不到保存“充当用户...”信息的好方法（没有 cookie）。我想使用角色提供者等，以便我可以利用 .NET 中内置的安全修整。这一切可能根本不可能，但我希望有人以前尝试过这个，或者对我可以尝试实施的事情提出建议。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:09:19.937

[在此处](https://stackoverflow.com/questions/2106892/asp-net-sitemap-admin-seeing-what-a-user-sees/2224210#2224210)查看我对类似问题的回答

它的要点是：

> 我这样做的方法虽然有点粗略，但我的数据库中有一个模拟表，其中包含正在模拟的用户的登录名和他们希望模拟的用户的登录名。
> 
> 我添加了一些覆盖代码，以便当用户第一次进入页面时（它使用 Windows 身份验证），它将检查该用户是否在表中设置了模拟，然后将此用户 ID 放置在会话状态的对象中. 如果没有模拟，它会将实际的用户 ID 放在同一个对象中。
> 
> 为了防止我像他们一样对用户的数据做任何事情，这个对象中有两个属性，一个是 login_name，系统用于内容定制，另一个是 NameForLog，用于记录任何操作. 我所做的所有操作都将被记录为我。
> 
> 站点上显示用户自定义内容的所有区域都查看此会话对象，因此它们将始终使用模拟 ID，因此始终向我显示用户正在查看的内容。除了第一页和日志代码之外，它甚至不知道它正在处理的是我。

对于您的方案，您可以实现角色提供程序并覆盖 GetRolesForUser 以返回模拟用户的角色以及一些允许模拟用户访问模拟功能以将其关闭的角色。

您甚至可以将模拟用户的角色与模拟用户的角色一起返回，以便让管理员用户访问他们自己的所有功能以及他们模拟的用户，这完全取决于这将在多大程度上影响该功能的有用性你的特定场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T21:21:58.550

我已经实现了类似的东西......虽然不完全像你的场景，但非常接近。

1.  管理员登录（具有像管理员这样的一种角色）

2.  然后管理员被重定向到“选择客户端”页面。管理员可以按 ID、名称等搜索客户。管理员从列表中选择一个客户。我将客户端 ID 存储在 cookie 中。

3.  我有自定义 RolesProvider 调用我的自定义`GetRoles(loggedinUserid)`；

4.  `GetRoles(int loggedinUserId)`然后方法确定用户的类型，即它是管理员还是非管理员。如果是管理员，则从 cookie 中获取 ClientID。将 loggedInUserID、typdofuser 和 ClientId 传递给存储过程，该存储过程将返回 admin 的所有角色 + 该 ClientId 的所有角色并返回给角色提供者。

这样我就可以使用我所有的 Admin 菜单项以及 ClientID 所需的菜单。

管理员可以随时进入“选择客户端”页面并切换到另一个客户端。当他们选择一个客户端时，新的 ClientId 将被存储在 cookie 中。

现在你有两个选择：

1.  您可以让角色提供者在每次请求时调用它，或者

2.  将获取的角色存储在 HttpCache 中，并在 ClientId 更改时更新此缓存。

希望这可以帮助。

# python - AttributeError：ZipFile 实例在 python 2.4 中没有属性“打开”

> ID：10904791
> 
> 赞同：1
> 
> 时间：2012-06-05T20:55:00.127
> 
> 标签：python, attributeerror

```
storefile(ftpcon, file, archive.open('NONVOL/'+file)) 
```

给我 AttributeError: ZipFile instance has no attribute`open`

但是当我更改`.open`为`.read`（因为 open() 在 2.4 中不可用）时，我得到：

AttributeError：`str`对象没有属性`read`

在：

```
ftpcon.storbinary('STOR ' + filename.strip(), file) 
```

# session - 分几步注册表格

> ID：10904792
> 
> 赞同：1
> 
> 时间：2012-06-05T20:55:03.407
> 
> 标签：session, symfony, fosuserbundle

我在几个步骤中遇到了表单问题。我想在许多步骤（3-4）中创建一个注册表单，然后在最后一步保存我的 FOSUser。原则是在第 1 步中创建一个空用户，然后逐部分填充，直到最后一步。

我的问题是不建议在会话中存储对象。所以，我想知道 Symfony2 是否提出了替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T23:35:18.590

您可以将前面步骤的数据放在隐藏字段中，然后在每个步骤中再次提交。

为什么在会话中保存对象不好？如果您编写适当的序列化处理程序，这应该不是一个大问题。

实体在会话中存储确实有点问题（我也有问题）但是您可以创建一个仅包含用户输入的委托对象并将其存储在会话中，然后在最后一步之后构建一个 symfony 用户对象其中。请确保不要在会话中留下大量未使用的对象。

# python - Django 1.2：如何将 pre_save 信号连接到类方法

> ID：10904799
> 
> 赞同：7
> 
> 时间：2012-06-05T20:55:34.873
> 
> 标签：python, django, signals, python-2.7, django-1.2

我试图在我的 django 1.2 项目的某些类中定义一个“before_save”方法。我无法将信号连接到 models.py 中的类方法。

```
class MyClass(models.Model):
    ....
    def before_save(self, sender, instance, *args, **kwargs):
        self.test_field = "It worked" 
```

我尝试将 pre_save.connect(before_save, sender='self') 放入“MyClass”本身，但没有任何反应。

我也试过把它放在 models.py 文件的底部：

```
pre_save.connect(MyClass.before_save, sender=MyClass) 
```

[我在这里](https://stackoverflow.com/questions/2719038/where-should-signal-handlers-live-in-a-django-project)阅读了有关将信号连接到类方法的信息，但无法弄清楚代码。

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T10:30:19.940

使用*classmethod*的工作示例：

```
class MyClass(models.Model):
    #....
    @classmethod
    def before_save(cls, sender, instance, *args, **kwargs):
        instance.test_field = "It worked"

pre_save.connect(MyClass.before_save, sender=MyClass) 
```

还有一个很棒的装饰器可以自动处理信号连接：http: [//djangosnippets.org/snippets/2124/](http://djangosnippets.org/snippets/2124/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-09T22:55:40.677

我知道这个问题很老，但我今天早些时候一直在寻找这个问题的答案，所以为什么不呢。从您的代码看来，您实际上想要使用实例方法（来自`self`和字段分配）。DataGreed 解决了如何将它用于类方法，并且将信号与实例方法一起使用非常相似。

```
class MyClass(models.Model)

    test_field = models.Charfield(max_length=100)

    def __init__(self, *args, **kwargs):
        super(MyClass, self).__init__(*args, **kwargs)
        pre_save.connect(self.before_save, sender=MyClass)

    def before_save(self, sender, instance, *args, **kwargs):
        self.test_field = "It worked" 
```

我不确定这是否是一个好主意，但是当我需要在从类 B 保存之前调用类 A 的对象的实例方法时，它很有帮助。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-05T20:59:22.913

与其在 MyClass 上使用方法，不如只使用函数。就像是：

```
def before_save(sender, instance, *args, **kwargs):
    instance.test_field = "It worked"

pre_save.connect(before_save, sender=MyClass) 
```

# php - 为什么我会得到这个结果？

> ID：10904803
> 
> 赞同：1
> 
> 时间：2012-06-05T20:55:41.853
> 
> 标签：php, mysql, database

```
SELECT * 
FROM afspraken
WHERE user_id =  '2'
AND datum >  '2012-06-05'
OR (
user_id =  '2'
AND datum =  '2012-06-05'
AND begintijd >=  '22:47'
)
ORDER BY datum DESC , begintijd ASC 
```

以上是我的查询。虽然我应该得到零结果，但我仍然得到一个，即：

```
id  user_id     datum      begintijd    opmerking
114 2         2012-06-05    9:30        Deze afspraak is online gemaakt. 
```

现在，如果我有这个正确，这个查询有 2 个选项来给出结果.. 即：user_id 必须相同并且日期必须高于 2012-06-05.. 因为它的日期相同，所以不会给结果..

现在是第二个选项，即当 user_id 相同、日期相同以及开始时间相同或更高时。现在显示的查询中的时间是 22:47。数据库中的时间是 9：早上 30 点.. 早上 9 点 30 分如何高于或等于 22 点 47 分？

```
 id  int(10)                             
    user_id int(10) 
    datum   date    
    begintijd   varchar(5)
    opmerking   varchar(8000)
    reminder    int(10) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T21:00:50.807

看起来您的`begintijd`专栏是`varchar`专栏。

所以，作为字符串，`'22:47' < '9:30'`.

一个解决方案是将您的`begintijd`列转换为`time`数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T21:49:53.083

如果您能够更改数据库布局，为什么不使用 DATETIME 像这样：

```
id  int(10)                 
user_id int(10) 
afspraak_dt datetime    
opmerking   varchar(8000)
reminder    int(10) 
```

您的数据：

```
id  user_id   afspraak_dt       opmerking
114 2         2012-06-05 9:30   Deze afspraak is online gemaakt. 
```

示例选择：

```
SELECT * FORM afspraken WHERE user_id = 2 AND afspraak_dt > '2012-06-05 22:47' 
```

为用户 id 2 选择当天的所有 afspraken

```
SELECT * FORM afspraken WHERE user_id = 2 AND DATE(afspraak_dt) = '2012-06-05' 
```

选择带有unix时间戳（为用户2选择未来的所有afspraken）

```
SELECT * FROM afspraken WHERE user_id = 2 AND UNIX_TIMESTAMP(afspraak_dt) > NOW() 
```

MySQL datetime 有许多用于处理日期和时间的选择选项。见[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-05T21:06:03.227

这个想法是将您的时间列和值转换为时间：

```
SELECT CAST('20:05' AS Time) > CAST('9:06' AS Time) #returns 1 (compares times - what you want)

SELECT '20:05' > '9:06' #returns 0 (compares strings - not what you want) 
```

[在这里](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)阅读更多。

# java - JAXB 直通映射

> ID：10904804
> 
> 赞同：3
> 
> 时间：2012-06-05T20:55:45.790
> 
> 标签：java, xml, jaxb

给定以下类：

```
@XmlRootElement(name = "parent")
class Parent {
   private Child child;

   // What annotation goes here
   public Child getChild() {
     return child;
   }

   public void setChild(Child child) {
     this.child = child;
   }
}

class Child {
   private Integer age;

   @XmlElement(name = "age")
   public Integer getAge() {
     return age;
   }

   public void setAge(Integer Age) {
     this.age = age;
   }

} 
```

我需要添加什么注释（注释所在的位置）才能获得以下 xml：

```
<parent>
  <age>55</age> 
</parent> 
```

我只是在脑海中做了一个具体的例子，所以让标签出现在它所在的地方可能没有意义。但我真正想知道的是如何传递给 Child 类。基本上它很容易为以下（我不想要）进行映射：

```
<parent>
  <child>
    <age>55</age> 
  </child>  
</parent> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T05:47:18.450

```
import javax.xml.bind.*;
import javax.xml.bind.annotation.*;

@XmlRootElement
class Parent {

    public static void main(String[] args) throws JAXBException {

        final Child child = new Child();
        child.age = 55;

        final Parent parent = new Parent();
        parent.child = child;

        final JAXBContext context = JAXBContext.newInstance(Parent.class);
        final Marshaller marshaller = context.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT,
                               Boolean.TRUE);
        marshaller.marshal(parent, System.out);
        System.out.flush();
    }

    @XmlElement
    public Integer getAge() {
        return child == null ? null : child.age;
    }

    @XmlTransient
    private Child child;
}

class Child {

    @XmlElement
    protected Integer age;
} 
```

印刷

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<parent>
    <age>55</age>
</parent> 
```

# c# - 为 WCF REST 服务生成示例数据？

> ID：10904808
> 
> 赞同：4
> 
> 时间：2012-06-05T20:55:51.660
> 
> 标签：c#, xml, json, wcf, rest

是否有某种方法可以基于 WCF REST 接口生成示例 XML/JSON？大多数情况下，使用我们的 Web 服务的设备将消息反序列化为它的相关对象。但是有时这是不可能的，因此我需要向开发人员发送他们需要提供给服务的实际 XML/JSON 以及输出的样子。是否有一种简单的方法来生成此信息，即使它使用数据类型默认值？

Web服务接口的示例：

```
 [OperationContract]
    [WebGet(UriTemplate = "Test", ResponseFormat = WebMessageFormat.Xml)]
    ResultOfAction Test();

    // used to login
    [OperationContract]
    [WebInvoke(UriTemplate = "Login?", Method = "POST", ResponseFormat = WebMessageFormat.Xml, RequestFormat = WebMessageFormat.Xml, BodyStyle = WebMessageBodyStyle.Bare)]
    ResultOfAction Login(LoginRequest request);

    // register a client + forgot password
    [OperationContract]
    [WebInvoke(UriTemplate = "RequestOTP?", Method = "POST", ResponseFormat = WebMessageFormat.Xml, RequestFormat = WebMessageFormat.Xml, BodyStyle = WebMessageBodyStyle.Bare)]
    ResultOfAction RequestOTP(RequestOneTimePIN requestOneTimePin); 
```

在上面的示例中，我需要查看 ResultOfAction、LoginRequest 和 RequestOneTimePIN 序列化 XML。有没有一种生成此类信息的简单方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T21:44:01.397

在`helpEnabled="true"`配置中设置属性后，WCF 4.0 将根据您从服务方法调用返回的格式生成示例数据：

```
<behaviors>  
    <endpointBehaviors>
        <behavior name="webHttpBehavior">
            <webHttp helpEnabled="true"/>
        </behavior>
    </endpointBehaviors> 
</behaviors> 
```

这是来自 MSDN的[示例。](http://msdn.microsoft.com/en-us/library/ee230442.aspx)

# windows - 如何判断应用程序是 64 位还是 32 位？

> ID：10904812
> 
> 赞同：0
> 
> 时间：2012-06-05T20:56:03.750
> 
> 标签：windows, 32bit-64bit

我已经搜索过是否有人问过这个问题，但我没有看到。有一些问题询问操作系统是 64 位还是 32 位。这不是我要问的问题。

在 Windows 64 位操作系统上，如何判断应用程序（程序）是 64 位还是 32 位？代码本身不说，安装也不说。

我有一台 64 位机器，但我知道我有另一个加载 32 位的程序并且它运行。所以我的操作系统并不排除我拥有 32 位程序。

那么，我怎么知道呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:57:21.530

您可以使用[PE Viewer](http://www.ucware.com/apev/index.htm)等工具查看有关 EXE 文件的信息。

我个人使用 Altap Salamander 的查看器功能来查看 EXE 或 DLL 架构。

![在此处输入图像描述](../Images/a4cddfcadbdb745a77e945767e337240.png)

它适用`Intel x86`于 32 位 EXE 和`AMD64`64 位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T09:37:27.177

我在 C# 中打开了一个控制台应用程序实用程序进行检查。它是基本的，但可以扩展。

它将信息文本返回到控制台，但也使用退出代码来指示类型，以防您希望在批处理文件中使用它。

见下文

干杯

罗伊

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO;

namespace ExeType
{
    class Program
    {
        const int st_error = 99;
        const int st_unknown = 98;
        const int st_unidentified = 97;
        const int st_not_PE_image = 96;
        const int st_Exec_x86 = 1;
        const int st_Exec_x64 = 2;

        const int st_offset = 0x3c;

        const int st_P = 0x50;
        const int st_E = 0x45;

        const int st_ind_x86_1 = 0x4c;
        const int st_ind_x86_2 = 0x1;

        const int st_ind_x64_1 = 0x64;
        const int st_ind_x64_2 = 0x86;

        static void Main(string[] args)
        {
            if (args.Length != 1)
            {
                Console.WriteLine("Please specify a file");
                Environment.Exit(st_error);
            }

            BinaryReader br = new BinaryReader(File.OpenRead(args[0]));

            byte[] block = br.ReadBytes(0x1000);

            br.Close();

            if (block.Length < st_offset+1)
            {
                Console.WriteLine("Unknown");
                Environment.Exit(st_unknown);
            }

            int offset = (block[st_offset+1] << 8) + block[st_offset];

            if (block.Length < offset)
            {
                Console.WriteLine("Unknown");
                Environment.Exit(st_unknown);
            }

            int indicator1 = block[offset];
            int indicator2 = block[offset+1];

            if (indicator1 != st_P || indicator2 != st_E)
            {
                Console.WriteLine("Not a PE format image file");
                Environment.Exit(st_not_PE_image);
            }

            offset += 4;
            indicator1 = block[offset];
            indicator2 = block[offset + 1];

            int retval = st_unidentified;

            switch (indicator1)
            {
                case st_ind_x86_1:
                    if (indicator2 == st_ind_x86_2)
                    {
                        Console.WriteLine("32 bit");
                        retval = st_Exec_x86;
                    }
                    break;
                case st_ind_x64_1:
                    if (indicator2 == st_ind_x64_2)
                    {
                        Console.WriteLine("64 bit");
                        retval = st_Exec_x64;
                    }
                    break;
                default:
                    Console.WriteLine("Unidentified");
                    break;
            }

            Environment.Exit( retval );
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-08T12:07:06.120

您需要分析`PE`标题。

它是任何 Windows 可执行文件的标头。要`*.exe`以二进制形式读取，请取一个位于偏移量的字节，这些字节是开始`0x3C`的偏移量。`0x3D``WORD``PE`

在你有偏移量之后，验证你是否正确，开头`PE`是`PE\0\0`（`PE`和两个`NULL`符号），只需跳过这个指示块并读取接下来的两个字节并制作另一个`WORD`。它表示目标机器，如果你想检查`64-bit`它，它将是以下之一：

```
0x8664 - x64
0xaa64 - ARMv8 in 64-bit mode
0x0200 - Intel Itanium processor family 
```

**注意**在您读取两个字节后，`WORD`您可能需要翻转它们。

也看看[这个问题的答案](https://reverseengineering.stackexchange.com/q/6040/8247)

还[可以从 Microsoft 下载 PE 标头文档](http://msdn.microsoft.com/en-us/windows/hardware/gg463119.aspx)

# scheme - 取消引用列表内的变量

> ID：10904813
> 
> 赞同：0
> 
> 时间：2012-06-05T20:56:09.753
> 
> 标签：scheme

是否可以取消引用列表中包含的变量以获取其值？例如：

```
(define one 1)
(define two 2)

(define list '(one two))

(display (list-ref list 0)) 
```

此处`list-ref`引用`one`, 并以字母`display`表示`one`。可以改为`one`取消引用同名变量包含的值吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T21:30:58.983

eval 绝对可以解决这个问题……但是和大多数 eval 适用的情况一样，它是一把大而危险的锤子。

Matthew Flatt 关于这个主题的博文已成为首选解释：

[http://blog.racket-lang.org/2011/10/on-eval-in-dynamic-languages-generally.html](http://blog.racket-lang.org/2011/10/on-eval-in-dynamic-languages-generally.html)

以下是在 Racket 中不使用 eval 的方法。除去杂物，“dict-ref”可以在“关联列表”中找到一个命名元素（或多个元素）。

```
#lang racket

(define data
  '((one 1)
    (two 2)))

(define wanted-list '(two one))

;; evaluates to '((2) (1)):
(for/list ([wanted wanted-list])
  (dict-ref data wanted)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T21:00:47.203

发生这种情况是因为引用的列表包含两个符号`one`和`two`. 尝试以下操作：

`(display (eval (list-ref list 0)))`

解决该符号。

# java - JLabel 宽度似乎不正确

> ID：10904817
> 
> 赞同：0
> 
> 时间：2012-06-05T20:56:18.070
> 
> 标签：java, swing, jlabel

我有一个非常长的宽度为 80000 的 JLabel。它位于宽度为 80000 的面板中。但是，标签在面板中间以“...”结尾，这意味着它被切断了。我已将 JLabel 的最大尺寸、最小尺寸、尺寸和首选尺寸设置为宽度为 80000。它所在的面板位于 JScrollPane 内部。

任何想法为什么 JLabel 似乎没有它实际认为的宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T21:59:13.347

例如[字体和字符串](https://stackoverflow.com/q/6232464/714968)

![在此处输入图像描述](../Images/c4545f0ef66e1c08fb7e62e1c25eb106.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;

public class JLabelIntoJScrollPane {

    private JFrame frame = new JFrame();

    public JLabelIntoJScrollPane() {
        AlphaChars aChars = new AlphaChars();
        String str = aChars.getNext(80000);
        JTextArea textarea = new JTextArea(str);
        textarea.setLineWrap(true);
        JScrollPane jScrollPane = new JScrollPane(textarea);

        JLabel label = new JLabel(str);
        label.setPreferredSize(new Dimension(550000, 60)); 
        // replace new Dimension(int, int) with proper way
        // I'd be use TextLayout or one of three methods
        // how to get size from Font and String

        frame.pack();

        final JPanel panel = new JPanel();
        panel.setLayout(new BorderLayout());
        panel.add(label);

        JScrollPane jScrollPane1 = new JScrollPane(panel);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(jScrollPane, BorderLayout.CENTER);
        frame.add(jScrollPane1, BorderLayout.SOUTH);

        frame.setSize(400, 300);
        frame.setVisible(true);

        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                System.out.println(panel.getPreferredSize());
            }
        });
    }

    private class AlphaChars {

        public static final int MIN_LENGTH = 80000;
        private java.util.Random rand = new java.util.Random();
        private char[] AlphaChars = {
            'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q',
            'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',
            'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q',
            'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
            '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '+', '-', '*', '/', '<', '>', '&',
            '#', '@', '{', '}', '?', ':', '_', '"', '!', ')', '('};

        public String getNext() {
            StringBuilder strbuf = new StringBuilder();
            for (int i = 0; i < MIN_LENGTH; i++) {
                strbuf.append(getAlphaChars()[getRand().nextInt(getAlphaChars().length)]);
            }
            return strbuf.toString();
        }

        public String getNext(int reqLenght) {
            StringBuilder strbuf = new StringBuilder();
            for (int i = 0; i < reqLenght; i++) {
                strbuf.append(getAlphaChars()[getRand().nextInt(getAlphaChars().length)]);
            }
            return strbuf.toString();
        }

        public java.util.Random getRand() {
            return rand;
        }

        public void setRand(java.util.Random aRand) {
            rand = aRand;
        }

        public char[] getAlphaChars() {
            return AlphaChars;
        }

        public void setAlphaChars(char[] aAlphaChars) {
            AlphaChars = aAlphaChars;
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new JLabelIntoJScrollPane();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T21:16:22.073

根据 Andrew Thompson 的评论 - 发布一个代码示例来演示您的问题以获得更好的答案。

如果您在让标签显示字符串内容时遇到问题...

1) 使用 FontMetrics 确定您的字符串实际需要的大小。

```
Graphics g; //initialize this with your component's Graphics, as passed in to paintComponent
Rectangle2D bounds = g.getFontMetrics().getStringBounds(reallyLongString, g) 
```

2) 请记住，标签的边距会有一些可变的缓冲。这应该等于它的 insets，尽管可能有其他项会增加标签所需的大小超过字符串本身的大小。

```
Insets i = getInsets(); 
```

3) 在 1 和 2 之后，您应该能够确定您的标签需要的尺寸：

```
minWidth = bounds.getWidth() + i.left + i.right; 
```

4）如果这还不够，那么还有其他一些我错过的因素。您总是可以通过实验测试找出阈值 - 逐渐增加标签的大小，直到它停止给您椭圆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T21:17:38.270

这里有一个方法：

您可以`repaint`使用`JLabel`自己的自定义图形或文本：

```
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.drawImage(foregroundImage, x, y, this);
    g.drawString("YOUR BIG STRING");
    jlabel.setBounds(0,0,100,100); //set it to your JLabel bounds...
    jlabel.paint(g);
} 
```

# c# - 工厂模式混乱

> ID：10904822
> 
> 赞同：2
> 
> 时间：2012-06-05T20:56:35.337
> 
> 标签：c#, java, .net, oop, design-patterns

当客户端应用程序请求一个新对象时，我让 Factory 类为我创建该新对象。

```
public class CarFactory{

    public Car CreateCar()
    {
       //create a new car object and send back  
    }
} 
```

汽车对象的属性是通过调用存储在数据库中的存储过程来填充的。在数据库中，我们存储可以每天更改的默认值。默认表由外部系统填充。

```
public class Car {
  public List<string> DefaultTyres {get;set;}
  public List<string> DefaultPetrolSpec {get;set;} 
} 
```

因此，当工厂（服务层调用）创建 Car 对象时，工厂类调用存储库类，然后调用 DB 来填充 Car 的属性……但是这些层的关系听起来有点奇怪……

```
public Car CreateCar()
{
    //create a new car object and send back
    //Call CarRepository.GetDefaultTyres(), CarRepository.GetDefaultPetrolSpec() etc.  
} 
```

因为我认为我的工厂实现做了很多。可能它不应该调用存储库层（然后调用数据库来获取汽车对象的数据）。

你们有什么感想？工厂类应该与数据库通信吗？如果他们这样做可以吗？如果不是，那应该是谁的责任？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:02:14.853

如果您有一个额外的类来处理实际的数据库连接，我认为这很好。我所说的这样一个类是指执行实际连接、处理一些连接/查询异常等的类。Factory 类不应该知道与 DB 相关的东西，它应该将其**委托**给另一个类/对象。

DB的这个抽象层也可以是一个完整的类层次树，而不仅仅是一个类。像这样的东西：

![在此处输入图像描述](../Images/7cedaccb0e39f377c65f1e0a720c6523.png)

这些子类中的每一个都知道如何处理与特定 RDBMS 的连接。

PS：请注意，这只是一个示例，您可能不必这样做。此外，拥有这样的层次结构可能会使事情变得有些复杂，因为您可能还需要为这些类创建一个工厂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T21:05:49.637

答案取决于是否可能有多个（实现）存储库或涉及多个数据库/其他数据存储。如果上面的答案是肯定的（即使此时它只是一个预期的需求/可能性），最好有一个存储库层，以便在/如果发生这些更改时将 Factory 类与上述更改隔离。

换个角度想：知道如何制造汽车是工厂阶级的责任*；*知道连接什么数据库/何时/如何连接*不是*它的责任。通常最好将职责保持简单以促进变更和模块化设计

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T21:22:30.930

随着时间的推移，我学到的一件事是，您的问题可能有 5 个答案。而且，他们都是对的。真正的问题是：你所做的有意义吗？如果您的工厂在服务器上并且与数据库的连接最接近那里，那么这就是调用所在的位置。

现在我有时会问自己和其他人同样的问题。例如，工厂应该在制造汽车时为汽车制造轮胎和汽油，还是应该让汽车自己知道如何制造。

因此，您可能需要考虑这一点：如果您的工厂正在创建大量对象（这通常是您拥有工厂模式的原因），那么您的所有元素都有一个暴露的基类/接口可能是有意义的创建方法。（我发布了一个非常快速而肮脏的示例，进行反射以创建类型可以使工厂更加通用）

例子：

```
 public interface FactoryObject
   {
          void Create();
          void Destroy();
   }

   public class Car:FactoryObject
   {
        public void Create()
        {
             //TODO: Create my tyres and my petrol
             //TODO: Create my fenders and body
        }
   }

   public class Bicycle:FactoryObject
   {
        public void Create()
        {
             //TODO: Create my tyres but I do not need petrol
             //TODO: Create my fenders but I have no body
        }
   }

   public class Factory
   {
        public FactoryObject GetFactoryObject(Type type)
        {
             FactoryObject returnedObject = null;
             if ( type is Car ) returnedObject = new Car();
             elseif (type is Bicycle) returnedObject = new Bicycle();
             if (returnedObject != null)
                  returnedObject.Create();
             return returnedObject;
        }       
   } 
```

以这种方式，您的工厂知道要创建一个 FactoryObject，但是它不知道如何构建该对象。更重要的是它不在乎。

# javascript - 车把和文本区域

> ID：10904823
> 
> 赞同：3
> 
> 时间：2012-06-05T20:56:36.990
> 
> 标签：javascript, jquery, asp.net-mvc, handlebars.js, mustache

我正在尝试学习在我的 MVC 应用程序中使用的车把。我的模板中有以下内容：

```
<div class="control-group">
<label class="control-label" for="EmailHtml">Html:</label>
<div class="controls">          
<textarea id="EmailHtml" name="EmailHtml" cols="36" rows="5"/>          
</div>
</div> 
```

这是 JSON：

```
{"data":{"Results":[{"EmailHtml":"xyz"}],"Name":"Test Business"}} 
```

执行上述操作后，我看到一个具有正确宽度和高度的 TextArea，但我没有看到其中的任何数据。

我也试过插入，`value="{{this.EmailHtml}}"`但它仍然不起作用。

如何在我的模板中填充文本区域？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T22:29:17.817

那不应该更像：

```
<div class="control-group">
  <label class="control-label" for="EmailHtml">Html:</label>
  <div class="controls">          
    <textarea id="EmailHtml" name="EmailHtml" cols="36" rows="5">{{EmailHTML}}</textarea>          
  </div>
</div> 
```

a 的值`<textarea>`不在`value`属性中，而是位于标签之间。请参阅：[http](http://www.w3.org/TR/html401/interact/forms.html#h-17.7) : //www.w3.org/TR/html401/interact/forms.html#h-17.7、http: [//www.w3.org/TR/html-markup/textarea.html](http://www.w3.org/TR/html-markup/textarea.html)等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:41:45.040

使用 Handlebars，您将需要使用无界助手，这样您就不会在 textarea 中获得 Handlebars 标记元素。

```
<div class="control-group">
    <label class="control-label" for="EmailHtml">Html:</label>
    <div class="controls">          
        <textarea id="EmailHtml" name="EmailHtml" cols="36" rows="5">{{unbound EmailHTML}}</textarea>          
    </div>
</div> 
```

参考：[车把基础知识](http://emberjs.com/documentation/#toc_handlebars-basics)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-08T07:48:16.930

假设您将车把 html 模板保存在变量 tpl 中，并将数据保存在另一个变量中。然后你在写： -

```
HandleBars.compile( tpl )(data) 
```

您必须在车把模板中编写：-

```
<div class="control-group">
<label class="control-label" for="EmailHtml">Html:</label>
<div class="controls">          
    <textarea id="EmailHtml" name="EmailHtml" cols="36" rows="5">{{ data.Results.[1].EmailHtml}}</textarea>          
</div>
</div> 
```

# css - 试图用 CSS 形成一个有边界的、文件夹标签样式的 div

> ID：10904825
> 
> 赞同：1
> 
> 时间：2012-06-05T20:56:40.377
> 
> 标签：css, border, invisible

我正在尝试在 css 中创建一个有边框的、文件夹样式的 div，但似乎无法摆脱分隔两个部分的边框。

这是到目前为止我已经走了多远：http: [//jsfiddle.net/Argoron/GUtDy/12/](http://jsfiddle.net/Argoron/GUtDy/12/)

我不知道如何避免将标题 div 与内容 div 分开的边框。

在此先感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:59:34.503

正确的方法是将一个 1px（或 npx，其中 n 是边框宽度）放在另一个上，然后将选项卡放在带有 z-index 的选项卡区域上。

## [代码](http://dabblet.com/gist/2877975 "工作示例")

我没有使用你的代码，而是用我的代码构建的。

### HTML

```
<div id="wrapper">

    <h1>HEADER</h1>

    <div id="content-container">
        Content
    </div>

</div> 
```

### CSS

```
/* Tabbed view without separation border */
* {
    padding: 0;
    margin:  0;
}

#wrapper {
    width:   600px;
    padding: 10px;
    margin:  10px;
}

body {
    font-family: arial, serif;
}

h1, #content-container {
    border: 1px solid rgb(0, 0, 0);

}

h1 {
    /* This is the important part! */
    border-radius:       6px 6px 0 0;
    display:             inline-block;
    position:            relative;
    top:                 1px; /* Offset one pixel to the bottom */
    border-bottom-color: white; /* white border overrides black. white should be the same as the background color */
}

#content-container {
    border-radius: 0 6px 6px 6px;
} 
```

# javascript - Jquery - 选择该选项后如何获取选项的特定数据类型？

> ID：10904829
> 
> 赞同：5
> 
> 时间：2012-06-05T20:57:04.110
> 
> 标签：javascript, jquery

我将直接使用标记，然后解释我要做什么。

Html 选择选项

```
 <select id="1d" name="camp">
    <option data-url="week_1" value="Week 1">30th July</option>
    <option data-url="week_2" value="Week 2">6th August</option>
    </select>
    <input type="hidden" name="camp_url" id="1e"> 
```

我正在努力解决的 Jquery 脚本。下面的脚本当然显示了所选选项的值，但我找不到获取`data-url`信息的方法。

```
 $('#1d').change(function () {
        $('#1e').val($(this).val());
    }); 
```

最重要的是，我需要`value`of`input#1e`成为选择时的`data-url`of `#1d`。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T20:59:03.433

那个怎么样？

```
$("#1d").on("change", function () {
    var url = $(this).children(":selected").data("url");
    $("#1e").val(url);
}); 
```

**演示：http:** [//jsfiddle.net/aRzNn/](http://jsfiddle.net/aRzNn/)

* * *

我个人也喜欢这个解决方案：

```
$("#1d").on("change", function () {
    $("#1e").val(function() {
        return $("#1d > :selected").data("url");
    });
});​ 
```

# multithreading - JGroups RPC：NoSuchMethodException

> ID：10904837
> 
> 赞同：2
> 
> 时间：2012-06-05T20:57:27.147
> 
> 标签：multithreading, client, rpc, jgroups

拥有一个由 3 个服务器节点（美属萨摩亚、阿拉斯加、阿拉巴马）和 1 个客户端节点（VoterClient）组成的视图。每当我尝试在以下情况下是美属萨摩亚的视图中调用第一台服务器中的投票方法时，我都会收到 NoSuchMethodException。这是视图中的节点列表，如下图所示：（ping_dest 是美属萨摩亚，pingable_mbrs=[美属萨摩亚，阿拉斯加，阿拉巴马，VoterClient]）。所以当我打电话时

```
// Call the vote method on the state.
voteResult = dispatcher.callRemoteMethod(address1, "vote",
    new Object[] { obj.ID, obj.candidate },
    new Class[] { String.class, String.class },
    new RequestOptions(ResponseMode.GET_ALL,    50000)); 
```

`address1`的地址在哪里`"American Samoa"`，`obj.ID`并且`obj.candidate`是`String`远程投票方法的参数，我得到 NoSuchMethodException。

这是我的日志和例外：

```
1644 调试 [main] org.jgroups.protocols.FD_SOCK - VIEW_CHANGE 收到：[美属萨摩亚、阿拉斯加、阿拉巴马、VoterClient、VoterClient]
1664 DEBUG [FD_SOCK pinger,StateServerGroup,VoterClient] org.jgroups.protocols.FD_SOCK - ping_dest 是美属萨摩亚，pingable_mbrs=[美属萨摩亚、阿拉斯加、阿拉巴马州、VoterClient、VoterClient]
1664 调试 [main] org.jgroups.protocols.pbcast.STABLE - [ergonomics] 将 max_bytes 设置为 20MB（5 个成员）
这应该发生吧？？？？
国家服务器地址：美属萨摩亚。
java.lang.NoSuchMethodException：投票
    在 org.jgroups.blocks.MethodCall.invoke(MethodCall.java:312)
    在 org.jgroups.blocks.RpcDispatcher.handle（RpcDispatcher.java:326）
    在 org.jgroups.blocks.RequestCorrelator.handleRequest(RequestCorrelator.java:456)
    在 org.jgroups.blocks.RequestCorrelator.receiveMessage(RequestCorrelator.java:363)
    在 org.jgroups.blocks.RequestCorrelator.receive(RequestCorrelator.java:238)
    在 org.jgroups.blocks.MessageDispatcher$ProtocolAdapter.up(MessageDispatcher.java:543)
    在 org.jgroups.JChannel.up(JChannel.java:716)
    在 org.jgroups.stack.ProtocolStack.up(ProtocolStack.java:1026)
    在 org.jgroups.protocols.pbcast.STATE_TRANSFER.up(STATE_TRANSFER.java:178)
    在 org.jgroups.protocols.FRAG2.up(FRAG2.java:181)
    在 org.jgroups.protocols.FlowControl.up(FlowControl.java:418)
    在 org.jgroups.protocols.FlowControl.up(FlowControl.java:400)
    在 org.jgroups.protocols.pbcast.GMS.up(GMS.java:889)
...
    在 org.jgroups.protocols.TP$IncomingPacket.handleMyMessage(TP.java:1728)
    在 org.jgroups.protocols.TP$IncomingPacket.run(TP.java:1710)
    在 java.util.concurrent.ThreadPoolExecutor.runWorker（未知来源）
    在 java.util.concurrent.ThreadPoolExecutor$Worker.run（未知来源）
    在 java.lang.Thread.run（未知来源）
VoteAction 的调度程序失败。

```

投票方式如下：

```
公共类 EvoterServer 扩展 ReceiverAdapter 实现 Runnable{
    私有静态最终字符串 serverProperties = null; // 默认属性
    私有静态 Logger logger = Logger.getLogger(EVoterServer.class);
    私人 JChannel 频道 = null;
    私有字符串 stateName = null;    
    私有静态最终字符串 serverProperties = null; // 默认属性
    private static final String channelName = "StateServerGroup";
    私有布尔 isRunning = true;

    @覆盖
    公共无效运行（）{
        尝试 {
               频道 = 新的 JChannel（服务器属性）；
            通道.setName(stateName);
            @SuppressWarnings("未使用")
            RpcDispatcher dispatcher = new RpcDispatcher(channel, this, this, this);
            通道.连接（通道名称）；
            通道.getState(null, 0);

            logger.info(stateName + " 服务器开始于 " + new Date() + ".");
            logger.info(stateName + " 加入频道 '" + channelName + "' (" + channel.getView().size() + " members).");
            logger.info(stateName + "服务器准备好服务请求。");
            logger.info(stateName + " 服务器的频道地址是 " + channel.getAddress() + ".");

            isRunning = true;

            而（正在运行）{
                实用程序.sleep(10000);
            }
        }
        捕获（异常 e）{
            logger.error("EVoterServer.run(); 状态：" + stateName + "; " + e.getMessage(), e);
        }
        最后
        {
            实用程序关闭（通道）；
        }
    }

    公共布尔投票（字符串 voterId，字符串候选人名称）
    {
         System.out.println("投票给" + CandidateName + " by " + voterId + ".");
         返回真；
    }
}

```

这是驱动程序类'（主要方法片段）；我如何为每个州初始化服务器。

```
字符串 [] STATE_NAMES = {“阿拉巴马”、“阿拉斯加”、“美属萨摩亚”}；
       for (int i = 0; i < 3; i++) {
           尝试 {
              EvoterServer 服务器 = 新的 EvoterServer(STATE_NAMES[i]);
              新线程（服务器）.start（）；
            } 捕捉（可投掷的 t）{
               logger.error(t.getMessage(), t);
            }
       }

```

我认为这与 GMS 选出的协调员有关。当协调者与投票服务器状态相同时，客户端无法投票。下面显示了如何选举美国萨摩亚协调员：

```
1401 DEBUG [main] org.jgroups.protocols.UDP - 创建单播接收线程
1401 DEBUG [main] org.jgroups.protocols.UDP - 创建多播接收线程
1411 调试 [main] org.jgroups.protocols.pbcast.GMS - 选举结果：{美属萨摩亚=2}
1411 调试 [main] org.jgroups.protocols.pbcast.GMS - 向美属萨摩亚发送 JOIN(VoterClient)
第1523章
[setDigest()]

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T22:38:30.190

> java.lang.NoSuchMethodException：投票

如果Jgroups`MethodCall.invoke()`无法找到相关方法，则会引发该异常。我看到了可能发生这种情况的多种原因：

*   您提到这适用于您的其他服务器。会不会是这个软件运行的是旧版本的软件？也许该`vote()`方法最近更新了？
*   处理程序对象是否有可能`EVoterServer`没有正确注册？
*   我很好奇错误信息`failed on dispatcher for VoteAction`。是什么`VoteAction`？它有可能被注册而不是`EVoterServer`？也许这是一个不同的频道偶然连接到错误的组？

希望这里有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:44:46.183

由于您使用的是默认配置，这意味着您依赖于 IP 多播。Multicast to self 有时会被禁用，有时会出现奇怪的行为 - 取决于操作系统和交换机。

尝试使用没有多播的 TCP 堆栈实例化 JChannel（只是为了测试理论 - TCP 几乎是肯定的）。如果可行，请继续返回 UDP（首先不使用多播，然后使用）。您可能需要了解是否需要进行远程调用，具体取决于地址（如果 address == local 只是正常调用该方法，而不是远程调用）。

# c# - 在测试中模拟 WPF 中的鼠标移动

> ID：10904839
> 
> 赞同：1
> 
> 时间：2012-06-05T20:57:33.050
> 
> 标签：c#, wpf, testing, mousemove

我有一个 WPF 和 C# 项目，我想从用户的角度以编程方式测试我拥有的一些悬停事件。我可以继续并手动触发用户悬停时发生的事件，但在此之前，我想知道是否可以模拟鼠标移动并将其从代码中放置在屏幕上的某个位置，然后继续并触发沿着视觉树冒泡的 MouseMove（或任何适当的）事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-11T10:00:25.253

我知道这是一个相当古老的问题，但希望它可以帮助将来遇到它的任何人。

把它放在任何控件的可点击位置（主要是中间）：

```
window.Mouse.Location = item.ClickablePoint; //using specific item 
```

或者，与[@3aw5TZetdf 对 Cursor.Position 所做的类似](https://stackoverflow.com/a/10905264/119775)，您可以将其设置为相对于当前位置或指定新位置的特定位置：

```
var point = window.Mouse.Location;
window.Mouse.Location = new Point(point.X - 200, p.Y - 200); // New location using current one. Replace 200 with your desire value
window.Mouse.Location = new Point(200, 200) // new location 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T21:30:04.373

我不确定是否有模拟鼠标移动的方法，但您可以通过编程方式移动鼠标：

```
Cursor.Position = new Point(x, y); // x and y are integers that form a point 
```

或者，如果您希望它转到控件的中间：

```
Cursor.Position = new Point(this.Location.X + button1.Location.X + button1.Width / 2,this.Location.Y + button1.Location.Y + button1.Height); 
```

只需替换`button1`为您想要的控件即可。

希望这可以帮助！

# android - 避免 SecurityException 因为“没有活动管理员拥有”

> ID：10904841
> 
> 赞同：13
> 
> 时间：2012-06-05T20:57:45.060
> 
> 标签：android, admin, securityexception

如何避免此异常

```
E/AndroidRuntime(26113): Caused by: java.lang.SecurityException: No active admin owned by uid XXXX for policy #3 
```

调用时：

```
public static void lockScreen(Context context) {
    Log.d(TAG, "lockScreen");
    ComponentName mDeviceAdminSample = null;
    DevicePolicyManager dpm = (DevicePolicyManager) context.getSystemService(Context.DEVICE_POLICY_SERVICE);
    Intent intent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
    intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, mDeviceAdminSample);
    dpm.lockNow();
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-04-13T15:46:43.880

我得到了与OP相同的错误。由于只有其他答案的组合对我有帮助，所以这是我使 OP 代码示例工作的步骤：

1.  确保您已创建设备管理员接收器和 xml 策略文件，如[https://developer.android.com/guide/topics/admin/device-admin.html中所述](https://developer.android.com/guide/topics/admin/device-admin.html)
2.  将带有 xml 策略文件引用的管理员接收器添加到 Manifest。
3.  安装您的应用
4.  在设置>安全>设备管理员>“您的应用管理员接收标签值”中启用应用作为管理员
5.  或以编程方式执行 [4]

    ```
    mDeviceAdminSample = new ComponentName(this,DeviceAdminSampleReceiver.class);
    Intent intent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
    intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, mDeviceAdminSample);
    currActivity.startActivityForResult(intent, 0); 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T02:40:02.903

您必须按照参考文档中的说明安装并启用设备管理员：http: [//developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-29T12:00:19.893

您在下面的行中缺少此内容。

```
mDeviceAdminSample = new ComponentName(this, DeviceAdminSampleReceiver.class); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-10T14:11:15.287

注意这些行：

```
 Intent it = new         Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
        it.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, new ComponentName(this, YourAdminReceiver.class));
        startActivityForResult(it, 0); 
```

可以跳过。如果您不希望您的用户允许应用程序锁定屏幕，则可以使用另一种方法：

```
adb shell dpm set-device-owner com.package/.YourAdminReceiver 
```

现在这与 OP 遇到的 SecurityException 有什么关系？

好吧，我已经 `com.package/.YourAdminReceiver`通过 adb shell 方式设置了设备所有者，但目的与屏幕锁定不同。当我将`<force-lock>`标签添加到我的 device-admin.xml 时：

```
<uses-policies>
        <limit-password />
        <reset-password />
        <force-lock />
    </uses-policies> 
```

我很自然地希望我的`locknow()`API 调用能够正常工作，但事实并非如此。我得到了`SecurityException`就像OP一样。奇怪，因为我的应用程序已经是设备的管理员和所有者。我通过从设备所有者角色中取消设置，将其卸载然后重新安装来使其工作。请注意，一旦通过 adb shell 设置为设备所有者，应用程序只能从代码中取消设置该角色：

```
//        mDpm.clearDeviceOwnerApp(getPackageName());
//        mDpm.removeActiveAdmin(deviceAdmin); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-27T12:34:05.407

就我而言，设备管理员是仪器测试的一部分，而不是我的应用程序本身。原来是 Android 处理权限的方式中的一个错误。解决方法是将设备管理类、清单和策略移动到目标应用程序中。当然不理想，但我看不到解决方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-03T06:04:57.723

你需要做 3 件事：

1.  添加`<receiver>`到 AndroidManifest
2.  为`<device-admin>`
3.  制作新的 .kt 文件`DeviceAdminReceiver`

这是我已经做过的答案的链接（带有示例代码）：[stackoverflow.com](https://stackoverflow.com/a/67816111/4160896)

来自[developer.android.com的参考资料](https://developer.android.com/guide/topics/admin/device-admin.html#developing)

# jquery - jQuery 验证插件 - 如何不显示“此字段是必需的”标签

> ID：10904843
> 
> 赞同：4
> 
> 时间：2012-06-05T20:58:09.650
> 
> 标签：jquery, jquery-validate

如何关闭所有输入文本框的“此字段为必填项”的显示？我宁愿不必做这样的事情：

```
$("myForm").validate({
  messages: { myField1: { required: '' }, myField2: { required: '' }, myField3: { required: '' }}
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T21:26:51.957

您可以简单地将默认所需消息设置为空字符串。

```
$.validator.messages.required = ''; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T21:16:50.083

有多种方式：

*   使用 errorPlacement 回调使用您自己的函数覆盖错误标签的默认插入
*   使用 errorLabelContainer 选项将错误元素全部放在一个容器中并隐藏容器
*   将验证器默认消息设置为空字符串 - 请参阅文档 setDefaults
*   使用 css 隐藏 label.error

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T21:08:37.623

您可以为每个项目分配一个类，然后遍历该类并交叉检查它们的类型作为输入

```
$(".frmPrc").each(function(index) {
                    if ($(this).attr("type")=="checkbox") {
                        if ($(this).is(":checked")) {
                            arrFrmData.push({ "ID":index, "Field":$(this).attr("id"), "Value":1, "Title":$(this).attr("title")});
                        } else {
                            arrFrmData.push({ "ID":index, "Field":$(this).attr("id"), "Value":0, "Title":$(this).attr("title")});
                        }
                    } else if ($(this).attr("type")=="radio") {
                        if ($(this).is(":checked")) {
                            arrFrmData.push({ "ID":index, "Field":$(this).attr("name"), "Value":$(this).val(), "Title":$(this).attr("title")});
                        }
                    } else {
                        arrFrmData.push({ "ID":index, "Field":$(this).attr("id"), "Value":$(this).val(), "Title":$(this).attr("title")});
                    }
                }); 
```

这只是从旧脚本中快速复制和粘贴...如您所见，它可以缩短...但给出了使用“必填”字段的基本概念...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T21:21:54.770

我曾经向所有输入元素添加一个类，而不是使用验证插件来验证：

```
<input type="text" class=toValidate/> 
```

……

```
 function validateForm(){
        $(".toValidate").each(function (){
          if($(this).val()==""){
            do something
}
        })
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-01-06T19:50:10.627

只有这样做，你的问题才会得到解决！

```
var validator = $("#MyForm").validate({errorPlacement: function() {
    return true;
}}); 
```

# python - Python：按字母顺序对列表进行排序/分组

> ID：10904844
> 
> 赞同：0
> 
> 时间：2012-06-05T20:58:12.427
> 
> 标签：python, list, sorting

我觉得这已经被问过了，但是问题的答案对我的代码不起作用。

我试图根据第一个列表 [2] 按字母顺序对列表列表进行排序，然后在按列表 [3] 排序的匹配条目中，然后是列表 [4] 等等。真实数据更大，每个列表中有更多条目，但举个例子：

```
list = [ 
['X_campestris_vesicatoria', 'Bacteria', 'Proteobacteria',
   'Gammaproteobacteria', 'Xanthomonadales', 'Xanthomonadaceae', 'Xanthomonas'],
['Pantoea', 'Bacteria', 'Proteobacteria', 'Gammaproteobacteria',
   'Enterobacteriales', 'Enterobacteriaceae', 'Pantoea'],
['Acidobacterium', 'Bacteria', 'Acidobacteria', 'Acidobacteriales',
   'Acidobacteriaceae', 'Granulicella'],
['S_boydii', 'Bacteria', 'Proteobacteria', 'Gammaproteobacteria',
   'Enterobacteriales', 'Enterobacteriaceae', 'Shigella']] 
```

我尝试了一些类似问题的答案：

```
taxlist.sort(key = lambda row: (row[2],row[3],row[4],row[5]))
print taxlist 
```

但没有排序发生。

与我尝试时相同：

```
sorted(taxlist, key=lambda x: (x[2],x[3],x[4],x[5]))
print taxlist 
```

一旦列表排序，我还能使用它还是列表不再可迭代？

```
import csv
writer = csv.writer(sys.stdout, delimiter="\t")
writer.writerows(taxlist) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:02:26.460

`sorted`给你一个新的列表，而`L.sort`排序`L`到位。在这两种情况下，原始列表仍然可以访问并且可以迭代。

即使您使用`sorted`，旧列表仍然可以访问并且可以迭代。返回的列表也可以访问并且可以迭代。

希望有帮助

# asp.net - 找不到服务器标签

> ID：10904847
> 
> 赞同：1
> 
> 时间：2012-06-05T20:58:25.433
> 
> 标签：asp.net, user-controls

我正在开发一个具有一些用户控件的旧项目。在网站上，这些控件之一的调用如下：

```
<form id="frmDesignation" runat="server" >
  <table><tr><td>
    <sidenav:menu runat="server" ID="mymenu"></sidenav:menu>
  </td></tr></table>
</form> 
```

在顶部，用户控件已注册：

```
<%@ Register TagName="menu" TagPrefix="sidenav" Src="~/Common_UC/Menu_Sidenav.ascx"%> 
```

但我越来越

```
Error   543 Unknown server tag 'sidenav:menu' 
```

用户控件在正确的位置，其他一切似乎都很好。我错过了什么吗？

更新：正如 gbs 在他的评论中提到的，问题出在我的 UC 本身。它本身有一些构建错误，所以可能这就是我收到错误消息的原因（我现在无法测试它，没有代码:(）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T21:02:58.777

主要有两点：

1：你的UC本身有问题。

2：您可能想尝试重建项目。

# python - 在 Django admin 中添加内联多对多对象

> ID：10904848
> 
> 赞同：24
> 
> 时间：2012-06-05T20:58:25.407
> 
> 标签：python, django, django-forms, django-admin

我对 Django 相当陌生，并且已经阅读了有关其关系模型和内联管理表单的[文档（InlineModelAdmin 上](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#inlinemodeladmin-objects)的文档）我正在努力弄清楚以下内容是否可以开箱即用，或者我是否应该推出自己的表单.

假设我有两个对象：电影和导演，这是模型声明中定义的多对多关系，如下所示：

```
class Film(Model):
    director = ManyToManyField('Director') 
```

现在在 Film 对象的详细信息表单中，我想*添加*内联 Director 对象（它们只有一个名称字段作为唯一属性）。不仅选择现有实例，而且能够以Film 对象的形式内联*创建新实例。*

```
class DirectorInline(admin.TabularInline):
    model = Director
    extra = 3

class FilmAdmin(admin.ModelAdmin):
    inlines = (
        DirectorInline,
        ) 
```

这会引发错误，因为它需要 Director 对象上的外键。在不创建自定义表单、验证器等的情况下，我想要实现的目标是否可行？任何正确方向的提示将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-12T14:46:04.717

管理员中的多对多字段的默认小部件或带有[`filter_vertical`](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.filter_vertical)或`filter_horizontal`属性的小部件允许您添加新项目。字段附近有一个绿色的“+”号，用于打开弹出窗口并添加新的 Director 实例。

但是，如果您需要内联样式管理员，您应该参考[through-model](https://docs.djangoproject.com/en/1.4/ref/models/fields/#django.db.models.ManyToManyField.through)。如果您不指定自定义模型，Django 会创建一个简单的模型，其中包含 Director 和 Film 的 2 个外键。

所以你可以尝试创建内联

```
class DirectorInline(admin.TabularInline):
    model = Film.director.through
    extra = 3 
```

这不会引发异常并会生成一个内联表单，但您必须从下拉列表中选择董事。我认为您可以使用自定义表单来覆盖它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-07-04T01:52:03.623

在 ManyToManyField 旁边添加“+”按钮的最简单方法是确保两个对象都已在 admin.py 文件中注册。否则 Django 不会为第二种类型的对象创建表单

管理员.py

```
admin.site.register(Film)
admin.site.register(Director) 
```

# tomcat - 在Tomcat上运行时如何从存储在httpsession上的地图中获取价值

> ID：10904849
> 
> 赞同：0
> 
> 时间：2012-06-05T20:58:29.713
> 
> 标签：tomcat, logging, tomcat6, tomcat-valve

使用Tomcat，可以通过配置适当的阀门将一堆有趣的信息转储到日志文件中。

例如：

```
 <Valve className="org.apache.catalina.valves.AccessLogValve" 
        directory="logs"  
        prefix="localhost." 
        suffix=".txt" 
        pattern='%s %b %I %{myname}s' 
        resolveHosts="false"/> 
```

方法：

*   %s - 输出响应的 HTTP 状态码
*   %b - 发送的输出字节数，不包括 HTTP 标头，如果为零，则为“-”
*   %I - 线程 ID

而 %{myname} 的含义是输出存储在会话中的属性 myname 的值。

都好。如果我的会话中存储了一个哈希图，我可以通过执行以下操作来输出：

```
%{mymap}s 
```

有关详细信息，请参阅[http://tomcat.apache.org/tomcat-5.5-doc/config/valve.html](http://tomcat.apache.org/tomcat-5.5-doc/config/valve.html)。

但是，我只想输出特定键的值，而不是整个地图。我努力了：

```
%{mymap.myatt}s 
```

但这不起作用。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T01:07:10.707

在源中查找[`AccessLogValve`](http://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk/java/org/apache/catalina/valves/AccessLogValve.java)，搜索 String `SessionAttributeElement`。这就是值将您`%{mymap}s`转换为字符串的作用，看起来您无法深入到地图中。

您可以扩展此类并覆盖该`createAccessLogElement`方法以添加另一个处理程序以用于不同的模式（比如说`%{mymap.myatt}m`），然后以与`SessionAttributeElement`该类类似的方式处理逻辑，但将标头拆分为会话属性名称和映射键。

# nservicebus - NServiceBus endpoints looking for RavenDB for timeouts after upgrading 3.0.3 -> 3.2.2

> ID：10904857
> 
> 赞同：2
> 
> 时间：2012-06-05T20:58:49.290
> 
> 标签：nservicebus, nservicebus3

Using NuGet I upgraded all the NServiceBus references in a project from 3.0.3 to 3.2.2 For the 4 services in this solution I also gave them references to NServiceBus.Host from NuGet

I deployed the binaries to a test environment, and the services now startup but then fail after some time with the error below. Is there some additional configuration required in 3.2?

Unhandled Exception: Magnum.StateMachine.StateMachineException: Exception occurr ed in Topshelf.Internal.ServiceController`1[[NServiceBus.Hosting.Windows.Windows Host, NServiceBus.Host, Version=3.2.0.0, Culture=neutral, PublicKeyToken=9fc3864 79f8a226c]] during state Initial while handling OnStart ---> System.Exception: E xception when starting endpoint, error has been logged. Reason: An exception was thrown while invoking the constructor 'Void .ctor(Raven.Client.IDocumentStore)' on type 'RavenTimeoutPersistence'. ---> Autofac.Core.DependencyResolutionExcept ion: An exception was thrown while invoking the constructor 'Void .ctor(Raven.Cl ient.IDocumentStore)' on type 'RavenTimeoutPersistence'. ---> System.Net.WebExce ption: Unable to connect to the remote server ---> System.Net.Sockets.SocketExce ption: No connection could be made because the target machine actively refused i t

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T06:22:21.483

In 3.2 the TimeoutManager is on by default so you need to turn it off to avoid using Raven. Configure.DisableTimeoutManager()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:34:06.227

My instance is creating an error message I believe falls under the same question, but it creates the following message --

> Message=No connection could be made because the target machine actively refused it 127.0.0.1:8080

I'm not sure why it is trying to connect to port 8080 in the local machine. Also, even though nothing is running on port 8080, why is it failing?

Do I have to have an instance of RavenDB running on port 8080 for this to work? Here is the actual exception that I am getting ...

> System.Net.WebException was unhandled by user code
> HResult=-2146233079 Message=Unable to connect to the remote server
> Source=System StackTrace: at System.Net.HttpWebRequest.GetResponse() at Raven.Client.Connection.HttpJsonRequest.ReadStringInternal(Func`1 getResponse) in c:\Builds\raven\Raven.Client.Lightweight\Connection\HttpJsonRequest.cs:line 301 at Raven.Client.Connection.HttpJsonRequest.ReadResponseString() in c:\Builds\raven\Raven.Client.Lightweight\Connection\HttpJsonRequest.cs:line 206 at Raven.Client.Connection.HttpJsonRequest.ExecuteRequest() in c:\Builds\raven\Raven.Client.Lightweight\Connection\HttpJsonRequest.cs:line 154 at Raven.Client.Connection.ServerClient.DirectPutIndex(String name, String operationUrl, Boolean overwrite, IndexDefinition definition) in c:\Builds\raven\Raven.Client.Lightweight\Connection\ServerClient.cs:line 629 at Raven.Client.Connection.ServerClient.<>c__DisplayClass34.<PutIndex>b__33(String operationUrl) in c:\Builds\raven\Raven.Client.Lightweight\Connection\ServerClient.cs:line 608 at Raven.Client.Connection.ServerClient.TryOperation[T](Func`2 operation, String operationUrl, Boolean avoidThrowing, T& result) in c:\Builds\raven\Raven.Client.Lightweight\Connection\ServerClient.cs:line 204 at Raven.Client.Connection.ServerClient.ExecuteWithReplication[T](String method, Func`2 operation) in c:\Builds\raven\Raven.Client.Lightweight\Connection\ServerClient.cs:line 168 at Raven.Client.Connection.ServerClient.PutIndex(String name, IndexDefinition definition, Boolean overwrite) in c:\Builds\raven\Raven.Client.Lightweight\Connection\ServerClient.cs:line 608 at Raven.Client.Connection.ServerClient.PutIndex[TDocument,TReduceResult](String name, IndexDefinitionBuilder`2 indexDef, Boolean overwrite) in c:\Builds\raven\Raven.Client.Lightweight\Connection\ServerClient.cs:line 665 at NServiceBus.Timeout.Hosting.Windows.Persistence.RavenTimeoutPersistence..ctor(IDocumentStore store) in c:\TeamCity\buildAgent\work\nsb.master_8\src\timeout\NServiceBus.Timeout.Hosting.Windows\Persistence\RavenTimeoutPersistence.cs:line 22 InnerException: System.Net.Sockets.SocketException HResult=-2147467259 Message=No connection could be made because the target machine actively refused it 127.0.0.1:8080 Source=System ErrorCode=10061 NativeErrorCode=10061 StackTrace: at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress) at System.Net.Sockets.Socket.InternalConnect(EndPoint remoteEP) at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Exception& exception) InnerException:

UPDATE:

So after going through all the frustration, it seems that NServiceBus was trying to connect to the RavenDB using the port 8080\. Because I had RavenDB installed already for some other projects, it seemed that "RuMeFirst.bat" figured it wouldn't use the NServiceBus provided db (maybe?) and instead wanted to use my previous install. Problem was, my original installation of RavenDB was running on port 8079 (I think that's the default for RavenDB). So when I would run NServiceBus with just a simple EndpointConfig class as a server, it wouldn't find anything on port 8080 and wouldn't want to run.

**Moral of the story**: Remove RavenDB before installing NServiceBus OR run RavenDB on port 8080 and then install NServiceBus to remove any of these errors that I got originally.

# c# - 无法检索将 MVC3 EF 与 Postgres 9.1 连接的元数据

> ID：10904859
> 
> 赞同：4
> 
> 时间：2012-06-05T20:58:57.380
> 
> 标签：c#, asp.net-mvc-3, entity-framework, postgresql, npgsql

我正在尝试将我的 MVC3 项目与 Postgres 9.1 中的数据库连接起来，我已经按照以下链接进行操作：[info1](https://stackoverflow.com/questions/1211475/entity-framework-postgresql)、[info2](http://ud-csharp.blogspot.com/2010/02/entity-framework-con-postgresql.html)、[info3](https://stackoverflow.com/questions/464131/net-postgresql-connection-string) ，从外观上看，我只需要字符串连接即可创建控制器。

我有对`Mono.Security`和`Npgsql`.dll 的引用，我将它们添加到程序集中

我正在使用这个`connectionString`：

```
<connectionStrings>
    <add name="TestPostgreSQLContext"         
         connectionString="metadata=res://*/Models.TestPostgreSQL.csdl|res://*/Models.TestPostgreSQL.ssdl|res://*/Models.TestPostgreSQL.msl;provider=Npgsql.NpgsqlConnection;provider connection string=&quot;data source=localhost;initial catalog=testPostgres;persist security info=True;user id=postgres;password=123456;multipleactiveresultsets=True;App=EntityFramework&quot;" 
         providerName="Npgsql.NpgsqlConnection"/>
</connectionStrings> 
```

**代码标记：**

```
public TestPostgreSQLContext() : base("name=TestPostgreSQLContext", "TestPostgreSQLContext")
{            
    this.ContextOptions.LazyLoadingEnabled = true;
    OnContextCreated();
}
public TestPostgreSQLContext(string connectionString) : base(connectionString, "TestPostgreSQLContext")
{
    this.ContextOptions.LazyLoadingEnabled = true;
    OnContextCreated();
}
public TestPostgreSQLContext(EntityConnection connection) : base(connection, "TestPostgreSQLContext")
{
    this.ContextOptions.LazyLoadingEnabled = true;
    OnContextCreated();
} 
```

**这是一个更形象化的想法：** ![在此处输入图像描述](../Images/9a717eff753de77956e151dd26460b63.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:18:21.163

您是否在应用程序的配置文件或 machine.config 中将 Npgsql 声明为注册提供程序？（请参阅[此官方 Npgsql 文档](http://www.npgsql.org/doc/ef6/)

# android - RelativeLayout 重心不起作用

> ID：10904864
> 
> 赞同：16
> 
> 时间：2012-06-05T20:59:13.743
> 
> 标签：android, center, android-relativelayout, gravity

我试图将几个视图水平居中在`RelativeLayout`一个基础上。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_horizontal"
    android:background="@android:color/transparent" > 
```

这是行不通的。我已经开始`centerInParent`接受`true`其中一种观点，并且确实奏效了。但是，我不能使用这个解决方案，因为我有 2 个并排的视图需要集中在一起。试图优化这一点，所以我想避免在彼此内部嵌套布局，尤其是线性布局。

我有什么明显的遗漏吗？我认为这个属性是为这种情况而设计的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-07T23:46:00.857

我回答了一个类似的问题，涉及三个视图，但没有使用嵌套的 ViewGroups。

[https://stackoverflow.com/a/13279846/1011746](https://stackoverflow.com/a/13279846/1011746)

这在 API 11 中进行了测试。

对于两个视图水平的情况：

```
<RelativeLayout
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:gravity="center"
  android:background="@android:color/black"
  >
  <Button
    android:id="@+id/apply"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:text="APPLY"
    android:textSize="20sp"
    />
  <Button
    android:id="@+id/undo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:text="UNDO"
    android:textSize="20sp"
    android:layout_toRightOf="@id/apply"
    />
</RelativeLayout> 
```

对于两个视图垂直的情况：

```
<RelativeLayout
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:gravity="center"
  android:background="@android:color/black"
  >
  <Button
    android:id="@+id/apply"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:text="APPLY"
    android:textSize="20sp"
    />
  <Button
    android:id="@+id/undo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:text="UNDO"
    android:textSize="20sp"
    android:layout_below="@id/apply"
    />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-05T21:06:16.877

您需要将多个布局嵌套在一起。要在 RelativeLayout 中居中，您可以`android:layout_centerInParent="true"`在子级上使用。如果你试图让几个孩子居中，他们最终会在彼此之下/之上。

因此，例如，您可以使用具有两个视图的 LinearLayout 作为 RelativeLayout 的子级，LinearLayout 具有`android:orientation="horizontal"`和`android:layout_centerInParent="true"`。LinearLayout 现在应该在 RelativeLayout 中居中，两个孩子彼此相邻。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T21:07:16.583

将两个视图包裹在一个 LinearLayout 中，然后像对单个 TextView 所做的那样，在 RelativeLayout 中将 LinearLayout 居中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T14:21:01.643

所以我对这个问题的修复结果只是利用了 textview 的复合可绘制特性。我只是删除了按钮并使用 drawableRight 来显示搜索图标。

# objective-c - Xcode 4.2 with Storyboard：程序接收信号：“EXC_BAD_ACCESS”

> ID：10904866
> 
> 赞同：1
> 
> 时间：2012-06-05T20:59:19.593
> 
> 标签：objective-c, ios, uitableview, xcode4.2, nszombie

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:04:57.200

One possibility is to use an property

in .h

```
@property (copy, nonatomic) NSArray *locations; 
```

in .m

```
@synthesize locations;
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.locations = [NSArray arrayWithObjects:@"New Delhi", @"Durban", @"Islamabad", @"Johannesburg", @"Kathmandu", @"Dhaka", @"Paris", @"Rome", @"Colorado Springs", @"Rio de Janeiro", @"Beijing", @"Canberra", @"Malaga", @"Ottawa", @"Santiago de Chile", nil];

}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.locations count];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T21:08:54.990

First:

```
locations = [NSArray arrayWithObjects:@"New Delhi", @"Durban", @"Islamabad", @"Johannesburg", @"Kathmandu", @"Dhaka", @"Paris", @"Rome", @"Colorado Springs", @"Rio de Janeiro", @"Beijing", @"Canberra", @"Malaga", @"Ottawa", @"Santiago de Chile", nil]; 
```

`[NSArray arrayWithObjects...]` returns an autoreleased object and as you're setting it directly to your instance variable, you need to retain it:

```
locations = [[NSArray arrayWithObjects:@"New Delhi", @"Durban", @"Islamabad", @"Johannesburg", @"Kathmandu", @"Dhaka", @"Paris", @"Rome", @"Colorado Springs", @"Rio de Janeiro", @"Beijing", @"Canberra", @"Malaga", @"Ottawa", @"Santiago de Chile", nil] retain]; 
```

**Note**:It's a good practice to use properties instead of instance variables.

Second:

```
cell = [[UITableViewCell alloc] initWithStyle:
                UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]; 
```

According to the memory management rules alloc init returns a retained object, so you'll leak here. Change it to:

```
cell = [[[UITableViewCell alloc] initWithStyle:
                UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease]; 
```

# php - 内置 PHP 函数的 Netbeans 代码高亮显示

> ID：10904870
> 
> 赞同：7
> 
> 时间：2012-06-05T20:59:26.190
> 
> 标签：php, function, netbeans, syntax, highlighting

我似乎无法更改 php 内置函数（如 strlen() 或 preg_match）的代码突出显示。这在netbeans中甚至可能吗？因为无论我尝试什么，它在编辑器中都以与纯文本相同的颜色出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:18:48.660

当我创建（或打开）一个 PHP 项目时，它对我有用。当您创建 PHP 项目时，irlt 会要求 PHP 版本进行突出显示、显示文档等。您是否已经创建或打开了项目，并且您正在尝试编辑的文件是项目的一部分？这似乎是突出显示不佳的原因。

# c# - 从 Visual Studio 的“属性”窗格中删除属性

> ID：10904872
> 
> 赞同：1
> 
> 时间：2012-06-05T20:59:38.927
> 
> 标签：c#, visual-studio-2010

**是否可以从 Visual Studio 的“属性”窗格中删除表单属性或一组属性？**

背景故事：我已经制作了一些继承通用表单属性的 UserControl，但我想从 Visual Studio 的“属性”窗格中删除“Anchor”和“Dock”属性，因为 UserControl 将使用不同的调整大小逻辑、锚定逻辑和对接似乎不支持。

我认为这是某种注释，但我不完全确定，我无法在谷歌上找到任何东西。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T21:03:26.907

您想要的属性是 Browsable [http://msdn.microsoft.com/en-us/library/system.componentmodel.browsableattribute.browsable.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.browsableattribute.browsable.aspx) 在这些用户控件上覆盖 Dock 和 Anchor，添加该属性（使用“false”值）给他们看看是否可行（确保重新编译以便设计人员加载更改）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T21:03:44.683

尝试将 Browsable 属性添加到属性：

```
using System.ComponentModel;

[Browsable(false)]
public override AnchorStyles Anchor {
  get {
    return base.Anchor;
  }
  set {
    base.Anchor = value;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T21:33:31.637

如果您不想覆盖您的属性，您可以使您的控件实现 ICustomTypeDescriptor 以控制属性网格中显示的内容。为此，您可以实现每个方法，除了返回将其实现委托给标准实现的属性（TypeDescriptor 的静态方法）的方法。这些方法的实现应该如下：

```
public String GetClassName()
{
    return TypeDescriptor.GetClassName(this,true);
}

public AttributeCollection GetAttributes()
{
    return TypeDescriptor.GetAttributes(this,true);
}

public String GetComponentName()
{
    return TypeDescriptor.GetComponentName(this, true);
}

public TypeConverter GetConverter()
{
    return TypeDescriptor.GetConverter(this, true);
}

public EventDescriptor GetDefaultEvent() 
{
    return TypeDescriptor.GetDefaultEvent(this, true);
}

public PropertyDescriptor GetDefaultProperty() 
{
    return TypeDescriptor.GetDefaultProperty(this, true);
}

public object GetEditor(Type editorBaseType) 
{
    return TypeDescriptor.GetEditor(this, editorBaseType, true);
}

public EventDescriptorCollection GetEvents(Attribute[] attributes) 
{
    return TypeDescriptor.GetEvents(this, attributes, true);
}

public EventDescriptorCollection GetEvents()
{
    return TypeDescriptor.GetEvents(this, true);
}

public object GetPropertyOwner(PropertyDescriptor pd) 
{
    return this;
} 
```

必须实现的方法是 GetProperties。它返回一个 PropertyDescriptionCollection，在您的情况下，它应该包含每个 PropertyDescriptor，除了您要隐藏的那些。像这样的东西：

```
public PropertyDescriptorCollection GetProperties() 
{
    pdColl = new PropertyDescriptorCollection(null);

    foreach (PropertyDescriptor pd in TypeDescriptor.GetProperties(this))
        if (pd.Name != "Dock" && pd.Name != "Anchor")
            pdColl.Add(pd);
    return pdColl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T21:07:41.140

覆盖该属性并将该`Browsable`属性设置为 false。

```
[Browsable(false)]
public override AnchorStyles Anchor
{
    get
    {
        return AnchorStyles.None;
    }
    set
    {
       // maybe throw a not implemented/ don't use message?
    }
}

[Browsable(false)]
public override DockStyle Dock
{
    get
    {
        return DockStyle.None;
    }
    set
    {

    }
} 
```

# gcc - 无论如何要查看预处理器定义的宏列表？

> ID：10904873
> 
> 赞同：13
> 
> 时间：2012-06-05T20:59:41.777
> 
> 标签：gcc, macros, c-preprocessor, codesourcery

我想查看由我正在使用的编译器调用定义的所有宏。有没有办法做到这一点？我在手册中看到它说您可以使用`cpp -dM` ，但这对我不起作用。也许我做错了什么？

当我运行时：

```
cpp -dM 
```

我从预处理器中根本没有得到任何输出。如果我尝试`-dM`在 gcc 上添加一个选项，我不会注意到任何区别。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-05T21:09:05.973

您可以使用：

```
gcc -dM -E - < /dev/null 
```

请注意，您还可以使用以下命令获取编译器宏：

```
touch bla.c && gcc -dM -E bla.c 
```

例如在我的电脑上：

```
$ touch bla.c && gcc -dM -E bla.c | wc -l
486
$ gcc -dM -E - < /dev/null | wc -l
124
$ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T21:05:09.457

默认情况下，`cpp -dM`将从标准输入读取其输入文件并写入标准输出。由于您没有尝试预处理任何输入，因此您可以使用以下方法将空输入传递给它`/dev/null`：

```
# Option 1
cpp -dM < /dev/null
# Optio n2
cpp -dM /dev/null 
```

在 Windows 上，您可以使用`NUL`伪文件而不是`/dev/null`.

# objective-c - CABasic 完成动画后不删除图像

> ID：10904876
> 
> 赞同：2
> 
> 时间：2012-06-05T20:59:51.477
> 
> 标签：objective-c, ios, ios5, cabasicanimation

我在 NIB 文件中有一个按钮，可以播放声音并在下面调用此方法。

```
-(void) animateHeart
{
    heartLayer = [[CALayer alloc] init];
    [heartLayer setBounds:CGRectMake(0.0, 0.0, 85.0, 85.0)];
    [heartLayer setPosition:CGPointMake(150.0, 100.0)]; 

    UIImage *heartImage = [UIImage imageNamed:@"heart.png"];
    CGFloat nativeWidth = CGImageGetWidth(heartImage.CGImage) / 3;
    CGFloat nativeHeight = CGImageGetHeight(heartImage.CGImage) / 3;

    CGRect  startFrame = CGRectMake(165.0, 145.0, nativeWidth, nativeHeight);
    heartLayer.contents = (id)heartImage.CGImage;
    heartLayer.frame = startFrame;
    [self.view.layer addSublayer:heartLayer];

    CABasicAnimation *theAnimation;

    theAnimation=[CABasicAnimation animationWithKeyPath:@"opacity"];
    theAnimation.duration=2.5;
    theAnimation.repeatCount=2;
    theAnimation.speed = 1.85;
    theAnimation.autoreverses=YES;
    theAnimation.timingFunction = [CAMediaTimingFunction functionWithName: kCAMediaTimingFunctionEaseInEaseOut];
    theAnimation.fromValue=[NSNumber numberWithFloat:0.0];
    theAnimation.toValue=[NSNumber numberWithFloat:1.0];
    [theAnimation setValue:heartLayer forKey:@"parentLayer"];

    [heartLayer addAnimation:theAnimation forKey:@"animateOpacity"];

    theAnimation.fillMode = kCAFillModeRemoved;
    theAnimation.removedOnCompletion = YES;

} 
```

该方法可以完美地为图像设置动画，但是在这样做之后，尽管已将 removedOnCompletion BOOL 设置为 true，但图像仍然挂在视图上。我想让图像在动画完成后消失。我会很感激我能在这里得到的任何帮助。

提前谢谢你，所以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:02:59.433

放：

```
theAnimation.fillMode = kCAFillModeRemoved;
theAnimation.removedOnCompletion = YES; 
```

前：

```
[heartLayer addAnimation:theAnimation forKey:@"animateOpacity"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T21:03:38.403

设置`removedOnCompletion`为`YES`确保动画在完成时从图像层中移除，而不是图像层从超级层中移除。您需要添加一个委托、跟踪完成事件并调用`removeFromSuperview`您的视图。`- (void)animationDidStart:(CAAnimation *)theAnimation`在委托上实现方法，然后调用`[heartLayer removeFromSuperlayer]`.

# ruby-on-rails - Rspec 在测试分页时给出假阴性

> ID：10904878
> 
> 赞同：2
> 
> 时间：2012-06-05T20:59:58.090
> 
> 标签：ruby-on-rails, rspec, will-paginate

我正在编写一个请求规范，以测试**will_paginate**是否正常工作，但我遇到了一些问题。首先，这是我的规范的精简版本：

```
require 'spec_helper'

describe "Articles" do

  subject { page }

  describe "index page" do

    let(:user) { FactoryGirl.create(:user) }

    before { visit news_path }

    describe "pagination" do

      before(:all) { 31.times { FactoryGirl.create(:article, user: user) } }
      after(:all) { Article.delete_all; User.delete_all }

      let(:first_page)  { Article.paginate(page: 1) }
      let(:second_page) { Article.paginate(page: 2) }

      it "should not list the second page of articles" do
        second_page.each do |article|
          page.should_not have_selector('li', text: article.title)
        end
      end
    end
  end
end 
```

如您所见，有一个测试可确保在用户访问文章索引页面时不显示文章的第二页。此测试失败：

```
1) Articles index page pagination should not list the second page of articles
   Failure/Error: page.should_not have_selector('li', text: article.title)
   expected css "li" with text "Article number 1" not to return anything 
```

我不明白为什么这会失败。当我在开发环境中手动创建 31 篇文章并在浏览器中查看时，分页工作正常，但是当我切换到测试环境时，规范失败。

文章型号：

```
class Article < ActiveRecord::Base
  attr_accessible :body, :title
  belongs_to :user

  validates :user_id, presence: true

  default_scope order: 'created_at DESC'
end 
```

文章工厂如下所示：

```
FactoryGirl.define do
  factory :article do
    sequence(:title)  { |n| "Article number #{n}" }
    body "This is the body"
    user
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T18:41:42.653

令人难以置信的是，解决方案是执行以下操作；

改变：

```
before(:all) { 31.times { FactoryGirl.create(:article, user: user) } } 
```

至：

```
before do
  31.times { FactoryGirl.create(:article, user: user) }
  visit news_path
end 
```

**我在这里学到了两件事：**

1.  该`before`块不能以目标为目标`(:all)`，否则测试失败
2.  **在创建工厂之后**，我需要`visit news_path`在 before 块内显式运行，否则水豚的页面对象将不是我期望的那样

 **所以，为了说明：

这不起作用：

```
# fails because it targets (:all)
before(:all) do
  31.times { FactoryGirl.create(:article, user: user) }
  visit news_path
end 
```

这也不会：

```
# fails because we are visiting the news path before the objects exist
before do
  visit news_path
  31.times { FactoryGirl.create(:article, user: user) }
end 
```

它需要是这样的：

```
# not targeting (:all) and only visiting news path after creation of the objects
before do
  31.times { FactoryGirl.create(:article, user: user) }
  visit news_path
end 
```

超过 20 个小时来解决这个问题，至少我学到了一些新东西等。**

# c# - C# 内容文件夹路径

> ID：10904889
> 
> 赞同：1
> 
> 时间：2012-06-05T21:00:58.110
> 
> 标签：c#, exe, process.start

我有一个简单的 C# 应用程序，它必须作为一个步骤运行控制台应用程序。我看过一些关于将可执行文件作为嵌入式资源并通过内存流运行它们的帖子，但这看起来不是最简单的方法。

我认为最好将 .exe 复制到内容文件夹并使用良好的“进程”运行它。从那里开始。

问题是，如何找到应用程序的内容文件夹？

我可以通过这种方式完成它，但它似乎是迂回的：

```
//Run Executable
StreamResourceInfo info = Application.GetContentStream(new Uri("MyApp.exe", UriKind.Relative));
string AppName = (info.Stream as FileStream).Name; 
```

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:04:59.213

```
Path.GetDirectoryName(Application.ExecutablePath); 
```

然后，您可以使用 Path.Combine 进入内容子目录或其他应用程序所在的任何目录。

# flash - 对于 mxmlc（flex flash 编译器），如果没有设置 -target-player，目标播放器是什么？

> ID：10904891
> 
> 赞同：0
> 
> 时间：2012-06-05T21:01:14.830
> 
> 标签：flash, apache-flex

如果没有指定 -target-player 命令行选项，我想知道给定 flex sdk 3.2、3.5 和 4.6 的目标播放器是什么。

我认为这将是 sdk 支持的最低版本，但我找不到任何文档来确认。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T21:05:35.070

从[文档](http://livedocs.adobe.com/flex/3/html/help.html?content=compilers_01.html)：

> 如果您没有显式设置此选项的值，编译器将使用 flex-config.xml 文件中的默认值。flex-config.xml 中的值是 SDK 附带的 Flash Player 的版本。

我很确定 flex-config.xml 文件应该在 SDK 目录中的某个位置。

# wpf - DataGrid十进制格式转换器

> ID：10904893
> 
> 赞同：-1
> 
> 时间：2012-06-05T21:01:34.637
> 
> 标签：wpf, wpfdatagrid

我以前从未使用过 wpf 数据网格，并且正在尝试格式化一些十进制列以使用基于行的其他列值的格式的特定值。

过去使用 Infragistics XamDataGrid，我能够为 XamCurrencyEditor 设置样式，设置“格式”和“掩码”的值，并使用我编写的多值转换器，传递 DataItem。

网格列是以编程方式创建的。所以，我创建了一个像这样的字段：

```
var field = new DataGridTextColumn { Header = item.Name, Binding = new Binding("[" + item.Name + "].Value") { Mode = BindingMode.TwoWay } }; 
```

该字段将包含十进制值（即使该列只是一个文本列）。

如何在考虑数据对象中的一些其他值的情况下向该列添加一些格式？我不确定如何引用实际绑定的数据行本身以将该数据与单元格值一起传递给转换器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T22:55:25.330

如果小数确实是字符串，不确定它将如何工作，但这是小数属性的 XAML 语法

绑定 StringFormat=DecValue: {0:N2}}

# titanium - 安装 Appcelerator Titanium 模块时遇到问题

> ID：10904896
> 
> 赞同：0
> 
> 时间：2012-06-05T21:01:46.517
> 
> 标签：titanium, appcelerator, titanium-mobile, appcelerator-mobile, titanium-modules

我从市场安装了 ti.paint 模块（[链接](https://marketplace.appcelerator.com/apps/807?1766624799#overview)）并安装了包含的演示应用程序。它适用于 Android，但我在 iOS 上**收到“找不到模块：ti.paint”**错误。请帮忙。

我还应该注意，我无法让任何模块与 Titanium 一起使用（不仅仅是 ti.paint）

我的安装步骤

1.  我下载了它并将 zip 文件复制到我的项目的根目录
2.  我将模块添加到我的 tiapp.xml 文件中，并验证它显示在 tiapp 窗口的模块部分中（请参见随附的屏幕截图）
3.  我运行了该应用程序，它在 iOS 中给出了上述错误，但适用于 Andoid

注意：要让 ti.paint 完全运行，我必须将文件夹“Android”重命名为“android”，将“iPhone”重命名为“iphone”

另外：在单独的测试中，我通过将 .zip 文件拖到 /Library/Application Support/Titanium 文件夹来安装模块，但遇到了同样的错误。

最后，看起来好像构建过程正确处理了模块（因为它解压缩并创建适当的文件夹），只是当我将它们包含在我的 app.js 文件中时无法识别它们。

这个很紧急，请帮忙。

图片：- [http://i.stack.imgur.com/Jz14A.png](http://i.stack.imgur.com/Jz14A.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:00:19.283

你的步骤看起来是正确的。还是想说：

1.  清理您的构建文件夹并从目录或模拟器中删除应用程序实例。
2.  确保您使用 Titanium Appcelerator A/C 凭据登录到 Titanium Studio。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:55:56.723

您还需要在代码中包含该模块，而不仅仅是在 tiapp.xml 文件中。

```
var Paint = require('ti.paint'); 
```

从现在开始，您可以调用 Paint.[functionName] 来调用模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T00:32:37.160

在 Titanium Studio 中，尝试使用帮助 > 安装移动模块进行安装...

# javascript - 如何使用 Visual Studio 2010 打开同一 JavaScript (.js) 文件的多个视图

> ID：10904897
> 
> 赞同：0
> 
> 时间：2012-06-05T21:01:48.107
> 
> 标签：javascript, visual-studio-2010, visual-studio

任何人都知道如何打开同一个 Visual Studio 2010 Javascript 或 Visual Basic 文件的多个窗口，就像使用 .c 或 .cpp 或 .h 或 .txt 文件一样？

Visual Studio can open multiple view of a 'C' .c file, but not a VisualBasic or .js file, becuase the Window menu, 'New Window' command is dimmed out when VisualBAsic or JavaScript files are selected.

然而！刚才，不知何故，我打开了同一个 JavaScript 文件的两个视图，但我不知道我是怎么做到的。我认为单击并拖动和键盘按钮的某种组合。

（我希望比尔盖茨能暂时停止核爆，然后回到微软一段时间——自从他离开后，他们就像一只被砍掉了头的鸡。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T22:03:32.307

尝试使用 Window -> Split，您将获得同一文件的两个视图...

# r - 我如何为未来的统计程序准备数据？

> ID：10904898
> 
> 赞同：-2
> 
> 时间：2012-06-05T21:01:51.400
> 
> 标签：r, sas, stata, spss, analytic-functions

我目前正在设计一个调查系统（其中一个调查有很多问题，一个问题有很多答案，一个响应属于_用户、调查、问题和答案）。

我将在用户模型中拥有大量人口统计数据，并期望对各种问题等做出成千上万的回应。

例如，最终我们将要分析响应。80% 的男性喜欢香蕉，20% 的女性拥有福特之类的。

我正在研究 R、SAS 和 SPSS 等统计语言，我想知道我的数据是否需要以任何特定方式进行结构化才能被这些程序使用？还是他们都接受csv文件？

您在统计数据和构建数据模型方面有什么建议吗？

最后，SAS、SPSS 和 Stata 的成本是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T21:51:19.183

`CSV files`绰绰有余。`R`管理所有按行和列排列的数据非常强大。

例如：您可以将 csv 的所有列排列为带有标题的变量/响应，并且您的行可以是数据，反之亦然。

只要它们按行和列排列就没有关系。`Comma`, `Space`CSV 文件中的分隔列可以轻松处理。不是我具体，你可以有任何`delimiter`和`R`强大的`regular expression`匹配。

唯一的建议是您应该为不同的数据集制作不同的 CSV 文件以使事情变得更容易，并且可以轻松地将其全部导入`data-frame`CSV 文件。

一旦你完成它，你就可以自由地释放它的力量`R`

# java - 审计检查员的意见

> ID：10904900
> 
> 赞同：1
> 
> 时间：2012-06-05T21:01:54.597
> 
> 标签：java

我有一个每天早上自动运行的 java 程序，它包含几个相互独立的方法。有时我必须做测试，所以我会注释掉所有我没有使用的方法。这是一个问题，因为有时我忘记取消注释代码，程序可能会运行几天而没有人发现它没有完全运行。

有没有办法为此设置自动检查？

解决方案：我决定添加一个计数器来计算运行的数字方法，并在数字错误时返回错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T21:20:01.187

审核随机插入的评论？馊主意。

如果您还没有，请为您的项目使用[修订控制](http://en.wikipedia.org/wiki/Revision_control)，例如[Git 。](http://en.wikipedia.org/wiki/Git_%28software%29)然后事情变得非常简单：

*（如果您已经使用修订控制，那么请看#2，忽略我的其余答案）*

![在此处输入图像描述](../Images/45ceeed6298eb3a38a6ab93e0350e96d.png)

1.  在上图中，“远程存储库”将是您存储原始当前开发版本的位置（无测试评论）。

2.  通过从此存储库中提取最新源来设置要执行的单元测试。

3.  对于黑客攻击，请为自己提取一个单独的副本（在图像“本地存储库”及其相应的“工作目录”中）并在那里进行评论/取消评论/测试。

4.  除非您将更改“推送”到“远程存储库”，否则您的单元测试将使用“远程存储库”上可用的未注释的干净版本运行。

5.  当您完成测试并在代码中添加一些有价值的内容时，提交并“推送”到“远程存储库”。

6.  下次运行测试时，他们将拥有新的（好的）代码。

7.  利润。

注意：“远程存储库”和“本地存储库”实际上只是术语。它们也可以在同一台机器上。

# wpf - RichTextBox 高亮表现

> ID：10904907
> 
> 赞同：4
> 
> 时间：2012-06-05T21:02:29.300
> 
> 标签：wpf, performance, wpf-controls

我正在开发根据正则表达式模式突出显示 RichTextBox 中的文本的应用程序。它工作正常，除了性能，即使是小文本（大约 500 个字符），它也会挂起一段时间，用户可以看到。

我对 FlowDocument 做错了吗？有人可以指出性能问题的根源吗？

```
 public class RichTextBoxManager
{
    private readonly FlowDocument inputDocument;
    private TextPointer currentPosition;

    public RichTextBoxManager(FlowDocument inputDocument)
    {
        if (inputDocument == null)
        {
            throw new ArgumentNullException("inputDocument");
        }

        this.inputDocument = inputDocument;
        this.currentPosition = inputDocument.ContentStart;
    }

    public TextPointer CurrentPosition
    {
        get { return currentPosition; }
        set
        {
            if (value == null)
            {
                throw new ArgumentNullException("value");
            }
            if (value.CompareTo(inputDocument.ContentStart) < 0 ||
                value.CompareTo(inputDocument.ContentEnd) > 0)
            {
                throw new ArgumentOutOfRangeException("value");
            }

            currentPosition = value;
        }
    }

    public TextRange Highlight(string regex)
    {
        TextRange allDoc = new TextRange(inputDocument.ContentStart, inputDocument.ContentEnd);
        allDoc.ClearAllProperties();
        currentPosition = inputDocument.ContentStart;

        TextRange textRange = GetTextRangeFromPosition(ref currentPosition, regex);
        return textRange;
    }

    public TextRange GetTextRangeFromPosition(ref TextPointer position,
                                              string regex)
    {
        TextRange textRange = null;
        while (position != null)
        {
            if (position.CompareTo(inputDocument.ContentEnd) == 0)
            {
                break;
            }

            if (position.GetPointerContext(LogicalDirection.Forward) == TextPointerContext.Text)
            {
                String textRun = position.GetTextInRun(LogicalDirection.Forward);
                var match = Regex.Match(textRun, regex);
                if (match.Success)
                {
                    position = position.GetPositionAtOffset(match.Index);
                    TextPointer nextPointer = position.GetPositionAtOffset(regex.Length);
                    textRange = new TextRange(position, nextPointer);
                    textRange.ApplyPropertyValue(TextElement.BackgroundProperty, Brushes.Yellow);
                    position = nextPointer;
                }
                else
                {
                    position = position.GetPositionAtOffset(textRun.Length);
                }
            }
            else
            {
                position = position.GetNextContextPosition(LogicalDirection.Forward);
            }
        }

        return textRange;
    }
} 
```

要调用它，我首先在 Initialize 方法中创建一个实例

```
frm = new RichTextBoxManager(richTextBox1.Document); 
```

在文本框的文本更改事件（我放正则表达式的地方）我调用 Highlight 方法

```
frm.Highlight(textBox1.Text); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:27:26.123

这是一种不同的方法，但我将它与 200,000 个字符的文件的亚秒响应一起使用。

由于我从文本开始，这可能不是您的选择。

我索引文本文件的单词位置，用户可以搜索单词。我突出显示他们搜索的单词。

但是我循环遍历文本以创建 FlowDoc 并在构建 FlowDoc 时突出显示。此 FlowDoc 没有格式（除了突出显示）。因此，如果您需要保留格式，这是行不通的。

所以我的猜测是 TextPointer 的开销很大。

但是我从您的代码中学到了很多东西，因为这就是我要尝试突出工作的方式，但我根本无法使 TextPointer 工作。

也许看看处理 textRun 中的所有匹配项，而不是只处理第一个匹配项并增加位置。

# java - 如何在 Java 中使用 toString 方法将 int 数组转换为 String

> ID：10904911
> 
> 赞同：160
> 
> 时间：2012-06-05T21:02:46.707
> 
> 标签：java, arrays, tostring

我正在尝试使用该`toString(int[])`方法，但我认为我做错了：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#toString(int[])](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#toString%28int%5B%5D%29)

我的代码：

```
int[] array = new int[lnr.getLineNumber() + 1];
int i = 0;

System.out.println(array.toString()); 
```

输出是：

```
[I@23fc4bec 
```

我也试过这样打印，但是：

```
System.out.println(new String().toString(array));  // **error on next line**
The method toString() in the type String is not applicable for the arguments (int[]) 
```

**我从更大更复杂的代码中提取了这段代码，但如果需要，我可以添加它。但这应该提供一般信息。**

我正在寻找输出，例如在 Oracle 的文档中：

> 字符串表示由数组元素的列表组成，括在方括号 ("[]") 中。相邻元素由字符“,”（逗号后跟一个空格）分隔。

* * *

## 回答 #1

> 赞同：312
> 
> 时间：2012-06-05T21:05:30.627

你想要的是`Arrays.toString(int[])`方法：

```
import java.util.Arrays;

int[] array = new int[lnr.getLineNumber() + 1];
int i = 0;

..      

System.out.println(Arrays.toString(array)); 
```

每种不同的原始 Java 类型都有一个静态`Arrays.toString`辅助方法；一个是[`int[]`这样说](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString(int%5B%5D))的：

> ```
> public static String toString(int[] a) 
> ```
> 
> 返回指定数组内容的字符串表示形式。字符串表示由数组元素的列表组成，括在方括号 ( `"[]"`) 中。相邻元素由字符分隔`", "`（逗号后跟空格）。元素被转换为字符串 by `String.valueOf(int)`。`"null"`如果`a`为空则返回。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-06-05T21:05:14.690

```
System.out.println(array.toString()); 
```

应该：

```
System.out.println(Arrays.toString(array)); 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2015-12-03T16:00:00.370

非常同意@Patrik M，但 Arrays.toString 的问题是它在输出中包含**“[”**和**“]”**和**“，”**。因此，我将简单地使用正则表达式将它们从 outout 中删除，就像这样

```
String strOfInts = Arrays.toString(intArray).replaceAll("\\[|\\]|,|\\s", ""); 
```

现在你有一个可以解析回的字符串`java.lang.Number`，例如，

```
long veryLongNumber = Long.parseLong(intStr); 
```

或者你可以使用 java 8 流，如果你讨厌正则表达式，

```
String strOfInts = Arrays
            .stream(intArray)
            .mapToObj(String::valueOf)
            .reduce((a, b) -> a.concat(",").concat(b))
            .get(); 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2012-06-05T21:12:54.087

您可以使用[java.util.Arrays](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString%28int%5B%5D%29)：

```
String res = Arrays.toString(array);
System.out.println(res); 
```

输出：

```
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-06-05T21:06:15.800

数组上的 toString 方法仅打印出您正在获取的内存地址。您必须遍历数组并自行打印出每个项目

```
for(int i : array) {
 System.println(i);
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-06T06:02:56.370

使用我在[此处](https://stackoverflow.com/questions/10900869/how-do-i-write-a-method-which-would-work-on-both-lists-and-arrays/10901267#10901267)描述的实用程序，您可以更好地控制为数组获取的字符串表示形式。

```
String[] s = { "hello", "world" };
RichIterable<String> r = RichIterable.from(s);
r.mkString();                 // gives "hello, world"
r.mkString(" | ");            // gives "hello | world"
r.mkString("< ", ", ", " >"); // gives "< hello, world >" 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-03-01T04:07:24.250

此函数以字符串形式返回一个 int 数组，如“6097321041141011026”

```
private String IntArrayToString(byte[] array) {
        String strRet="";
        for(int i : array) {
            strRet+=Integer.toString(i);
        }
        return strRet;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-24T01:40:05.430

这是一个从字符串列表到单个字符串，再返回到字符串列表的示例。

编译：

```
$ javac test.java
$ java test 
```

跑步：

```
    初始名单：

        “ABC”
        “定义”
        “吉”
        “jkl”
        “mno”

    作为单个字符串：

        “[abc, def, ghi, jkl, mno]”

    重组清单：

        “ABC”
        “定义”
        “吉”
        “jkl”
        “mno”

```

源代码：

```
import java.util.*;
public class test {

    public static void main(String[] args) {
        List<String> listOfStrings= new ArrayList<>();
        listOfStrings.add("abc");
        listOfStrings.add("def");
        listOfStrings.add("ghi");
        listOfStrings.add("jkl");
        listOfStrings.add("mno");

        show("\nInitial list:", listOfStrings);

        String singleString = listOfStrings.toString();

        show("As single string:", singleString);

        List<String> reconstitutedList = Arrays.asList(
             singleString.substring(0, singleString.length() - 1)
                  .substring(1).split("[\\s,]+"));

        show("Reconstituted list:", reconstitutedList);
    }

    public static void show(String title, Object operand) {
        System.out.println(title + "\n");
        if (operand instanceof String) {
            System.out.println("    \"" + operand + "\"");
        } else {
            for (String string : (List<String>)operand)
                System.out.println("    \"" + string + "\"");
        }
        System.out.println("\n");
    }
} 
```

# python - SWI-Prolog 语义 Web 库和 Python 接口

> ID：10904912
> 
> 赞同：4
> 
> 时间：2012-06-05T21:02:50.947
> 
> 标签：python, prolog, swi-prolog, semantic-web, allegrograph

我想编写一个使用 Prolog 查询 RDF 三元组的 Python Web 应用程序。我发现[pyswip](http://code.google.com/p/pyswip/)用于将 Python 与 SWI-Prolog 连接起来，我目前正在研究 SWI-Prolog 的 RDF 功能。我想知道是否有人以前尝试过这个——如果有人尝试过：你的设置是什么样的？你如何让 pyswip 与 SWI-Prolog 语义网络库一起工作？或者是否有另一个 Python-Prolog 接口可以让这更容易？

**编辑：**

我实际上找到了一个非常好的解决方案。我之前使用 AllegroGraph 3.3 Python API 对 RDF 数据进行 Prolog 查询，但我认为他们对 Allegro Common Lisp 的 Prolog 扩展有点缺乏，因为它缺少诸如数字比较运算符之类的东西。从那以后，我尝试了 AllegroGraph 4.6，我发现他们的 Prolog 扩展中缺少的任何东西都可以通过以下事实来弥补：您可以使用`lisp`转义函子编写 Allegro Common Lisp 表达式来处理您需要做的任何事情由 Prolog 扩展提供。由于某种原因，当我使用 AllegroGraph 3.3 Python API 时没有定义这个函子，但显然 Allegro 的开发人员从那时起已经走了很长一段路。

我建议任何想要构建一个使用 Prolog 查询 RDF 数据的 Python Web 应用程序的人。它超级快速且超级强大。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T01:19:34.537

我没有使用过 pyswip，虽然前段时间我看了一下。你的问题很有说服力，而且 pyswip 看起来很有吸引力，尤其是“pythonic”界面。

然后我设法安装，但完成后（我不得不调整安装“说明”，因为我正在运行一个相当最新的 SWI-Prolog），我无法运行简单的介绍性示例而不会引发奇怪的问题：示例声明中的错误数量，SWI-Prolog 抱怨 2^assertz 上的错误处理术语引用等。而且我找不到任何文档....

我建议使用[Boost.Python](http://www.boost.org/doc/libs/1_49_0/libs/python/doc/)和 C++ SWI-Prolog [FLI](http://www.swi-prolog.org/pldoc/package/pl2cpp.html)（外语界面）。

也许我们只需要一个方法：比如 PrologEngine.call(TermArray)，映射到 call/N，以完全访问丰富的 Prolog 库（其中包括 SemWeb）和一些反射调用。

也就是说，我认为这**不是**一项微不足道的任务，也许 pyswip 提供了一种更好的方法，一旦调试......

我可能有兴趣在编码方面进行合作，我知道一点 Boost 和 C++ FLI，但我不是 Python 编码器，只是用它来原型使用 Google Docs（或者更好，只是电子表格）......

OTOH 我喜欢在 Prolog 中写作，现在，题外话，我想跑题，向您提出一个稍微不同的方法：使用 SWI 的 HTTP 服务器功能在逻辑和表示之间创建一个更独特的接口（即更多 MVC）-序言。

编写一个公开为 (X)HTML (+JSON+SVG+...) 的[服务器](http://www.swi-prolog.org/howto/http/)，并在 python 中使用（或解析）输出。一种 RPC。

这样逻辑将被强解耦，然后将大大增加可重用性。当然，如果您对“in se”中的三元组不感兴趣，但对它们的语义感兴趣，这是有道理的。

我认为调试也可以容易得多，总是由于解耦。Jan Wielemaker，主要 SWI-Prolog 开发人员，经常建议难以驾驭一起运行的复杂引擎的行为，比如 Java（我认为 Python 会类似）和 Prolog，特别是在涉及多线程时（总是，如果我们认为其中）。**而**今天，将使用多线程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T01:52:44.093

我没有使用 pyswip 的经验。[但供您参考，swi prolog 似乎很有能力，因为我对库knowrob](http://www.ros.org/wiki/knowrob)有一些经验，这是用于机器人学中的人工智能推理。不确定这是否有帮助

# c - 为嵌套结构分配内存，段错误

> ID：10904924
> 
> 赞同：2
> 
> 时间：2012-06-05T21:03:40.620
> 
> 标签：c, memory, nested, structure

所以，我正在尝试为我的班级制作地图，我正在练习自己尝试实现一个嵌套循环，看看我是否走“NewYork----250km-----LosAngeles”这条路，我应该是能够将 NewYork 作为前一个城市名称，将 LosAngeles 作为下一个城市名称。距离为 250 公里。我正在记忆城市名称、道路和城市，但是在我从键盘输入“next_city”部分后，我遇到了段错误。有人可以帮我解决我做错了什么吗？

```
typedef struct road road;
typedef struct city city;

struct city{
    int visited;
    int distance;
    int path;
    char *city_name;

};

struct road{
    int km;
    struct city *next_city, *previous_city;
};

int main()
{  

    char *a=malloc(sizeof(char)*10);
    char *b=malloc(sizeof(char)*10);

    city *NewYork = malloc(sizeof(city));
    NewYork->city_name = fgets(a,10,stdin); //this gives no error

    road *ROAD = malloc(sizeof(road));
    city *next_city = malloc(sizeof(city)); //to see if I can get a memory for LosAngeles

    ROAD->next_city->city_name = fgets(b,10,stdin); //but here it gives a segfault after I type the name to terminal..

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T21:05:08.623

那是因为`ROAD->next_city`它没有指向一个有效的地址，它是一个悬空指针。

尝试以下操作：

```
road *ROAD = malloc(sizeof(road));
city *next_city = malloc(sizeof(city));
ROAD->next_city = next_city; 
```

这是你原本打算做的吗？

另外，请注意，您应该`free`通过`malloc`.

# android - 设置内容视图（R.layout.main）；从一开始就给出错误

> ID：10904925
> 
> 赞同：0
> 
> 时间：2012-06-05T21:03:43.293
> 
> 标签：android

我刚刚开始使用 android 进行开发，并遵循了谷歌上的教程来设置所有内容。我正在使用 eclipse，并且我同时安装了 android sdk 和 eclipse 插件，但是当我创建一个新的 Android 项目时，我从一开始就在这一行出现错误。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
} 
```

它说“R.layout.main”中的“R”不存在。是否有我需要创建或导入的类？我真的很困惑，因为我已经彻底搜索过，找不到其他人有这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T21:13:38.063

这是一个很常见的错误。确保在活动的 java 文件的顶部，导入不是 android.R.layout （或其他），因为它应该导入您自己的应用程序的 R（位于 gen 文件夹内）。

如果仍然有问题，请尝试删除 gen 文件夹，确保布局文件正常（意味着它是正确的 android 布局文件，没有任何错误），确保所有资源（所有图像、声音、xml 文件，所有在 /res 中的文件名中只有合法字符（这意味着它们是小写英文，可选用“_”和数字，但没有更多），清理项目，然后导入生成的文件。

您也可以在它抱怨的 R 的红色下划线上使用 CTRL+1，然后选择您的项目之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T21:35:57.820

不良资源可能会导致您的 android 项目不生成 R.java 文件。**尝试检查 /res/layout 并查看您的任何**布局是否有错误。

也尝试摆脱`import android.R.*;`

然后去项目>清理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T21:10:00.367

通常，当您创建 Android 项目时，会自动为您生成主布局文件。

确保在 res/layouts 文件夹中有一个名为“main.xml”的文件。假设你这样做了，试试 Project->Clean。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T21:20:05.837

右键单击您的项目，然后单击**Fix Project Properties**。

如果这不起作用，那么您要么在项目中的某个地方出现错误，导致您的`R.java`类无法生成，要么 eclipse 很笨，您需要执行**项目 --> 清理**和/或一起重新启动 IDE .

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-23T18:51:51.763

在 res->layout main.xml 中添加 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" > 
</LinearLayout> 
```

或 Layout->New-android XML 文件

清理并构建项目

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-23T10:58:48.210

您可以像这样导入包：

```
import com.example.kaushal.checkbox.R; 
```

然后重建你的项目。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-10T05:43:00.340

只需转到构建选项并单击重建项目。这可能会奏效。:)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-05-22T07:11:16.007

我也遇到了这个问题，只是像以前一样导入包。例如，如果您的主页包名称是 import com.example.chephotel.R; 只需在新创建的 java 文件中复制并粘贴相同的内容

# api - 使用 FOSRestBundle 在 Symfony2 中创建 REST API - 模式和自动文档

> ID：10904927
> 
> 赞同：3
> 
> 时间：2012-06-05T21:03:51.247
> 
> 标签：api, rest, symfony, fosrestbundle

我正在使用 FOSRestBundle 在 Symfony2 中创建一个 RESTful API，我想为每个服务定义一个数组中的每个可用属性，以便我可以验证提交的数据，并为每个服务自动创建文档。

这是我希望能够为文档做的事情： - 显示所有服务的列表 - 显示每个服务的所有可用操作的列表（POST、PUT 等） - 显示内部的预期和响应参数每个服务。

当客户端点击服务时，JSON 也应该直接针对模式进行验证。

有没有人有这方面的经验，如果有，请您指出正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:10:35.123

您可以使用表单和验证组件来绑定和验证请求内容，并使用[https://github.com/nelmio/NelmioApiDocBundle](https://github.com/nelmio/NelmioApiDocBundle)生成文档（基于表单）。

# java - 你如何取消倒计时？

> ID：10904933
> 
> 赞同：4
> 
> 时间：2012-06-05T21:04:09.720
> 
> 标签：java, android, timer

我有一个带有倒数计时器的 AlertDialog，我有一个取消按钮设置，它取消了对话框，但计时器继续运行！有谁知道如何取消倒数计时器的倒计时？任何帮助，将不胜感激！

```
 private void timerDialog() {
    timerDialog = new AlertDialog.Builder(this).create();  
    timerDialog.setTitle("Timer");  
    timerDialog.setMessage("Seconds Remaining: "+timerNum*1000);
    timerDialog.setCancelable(false);
    timerDialog.setButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface aboutDialog, int id) {
           timerDialog.cancel();
        }
    });
    timerDialog.show();
    new CountDownTimer(timerNum*1000, 1000) {
        @Override
        public void onTick(long millisUntilFinished) {
            timerDialog.setMessage("Seconds Remaining: "+ (millisUntilFinished/1000));
        }

        @Override
        public void onFinish() {
            Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
            v.vibrate(500);
            timerDialog.cancel();
        }
    }.start();

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-05T21:15:06.993

您似乎在对话框上调用取消，但从未在计时器上调用。您需要维护对 CountDownTimer 的引用，并在 onClick 方法中调用其取消方法。

```
private void timerDialog() {
    final CountDownTimer timer = new CountDownTimer(timerNum*1000, 1000) {
        @Override
        public void onTick(long millisUntilFinished) {
            timerDialog.setMessage("Seconds Remaining: "+ (millisUntilFinished/1000));
        }

        @Override
        public void onFinish() {
            Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
            v.vibrate(500);
            timerDialog.cancel();
        }
    };
    timerDialog = new AlertDialog.Builder(this).create();  
    timerDialog.setTitle("Timer");  
    timerDialog.setMessage("Seconds Remaining: "+timerNum*1000);
    timerDialog.setCancelable(false);
    timerDialog.setButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface aboutDialog, int id) {
           timer.cancel();
        }
    });
    timerDialog.show();
    timer.start();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T21:16:51.377

调用`cancel()`CountDownTimer 上的方法

# c++ - Kinect openCV openNI 不工作

> ID：10904936
> 
> 赞同：0
> 
> 时间：2012-06-05T21:04:32.957
> 
> 标签：c++, opencv, kinect, openni

我正在尝试将 kinect 与**OpenNI**一起使用，当我尝试构建任何程序时，它不会给出任何构建错误，但我在命令行上收到这些错误

```
CvCapture_OpenNI::readCameraParams : Could not read property "ShadowValue"!
CvCapture_OpenNI::CvCaptureOpenNI: Could not read camera paramerers
done.
Can not open a capture object. 
```

我尝试构建随 OpenCV 提供的 (kinect_maps.cpp)，仍然给出相同的错误。

我在 Windows 7 64 位上使用 Kinect for Windows。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T20:50:51.317

我在 Windows 上的 64 位版本上遇到了类似的问题。我修复了他们卸载 64 位版本并安装 32 位版本的问题。您还需要安装 Nite 和 32 位传感器驱动程序。

# asp.net - 带有 IE9 的 ASP.NET

> ID：10904939
> 
> 赞同：0
> 
> 时间：2012-06-05T21:04:40.743
> 
> 标签：asp.net, internet-explorer, iis, internet-explorer-9

使用 IE9 加载 asp.net 页面时，我遇到了一个奇怪的问题。

基本上，我正在使用一个更新缓慢并且有一些奇怪编码的遗留系统。特定页面加载，然后有一个 iframe 加载不同的页面，基本上是 2000 年版本的异步加载。

问题是，当 iframe 页面正在加载时（它需要生成数据，因此它可能不会返回接近半分钟或更长时间），IE9 不会从当前域加载任何新页面，直到 iframe 页面加载。因此，如果用户访问此页面，然后决定要访问不同的页面，他们必须等待 iframe 完成加载，然后才能浏览到不同的页面。首先单击停止按钮什么都不做，页面仍然存在，直到 iframe 加载。

这是一个企业网络应用程序，因此只支持 IE，但在 Chrome 中似乎不会出现此问题（页面严重损坏，但不存在加载延迟问题）

有什么想法吗？

编辑：我应该添加 Response.IsClientConnected 始终返回 true，除非选项卡或浏览器关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:34:58.257

尝试在单击离开页面的元素之一时执行下一个

```
window.frames[0].document.execCommand('Stop'); 
```

如果您有超过 1 帧，请调整帧数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T18:21:08.970

我找到了解决方案。

事实证明，IIS 为用户线程安全地保留会话，因此一次只能访问一个页面。当 iframe 内的页面正在处理时，它锁定了 Session 从而使任何其他页面等待它完成，因此延迟。

# firebug - firebug - 获取绝对坐标

> ID：10904940
> 
> 赞同：3
> 
> 时间：2012-06-05T21:04:45.287
> 
> 标签：firebug

无论 DOM 树的深度如何，我都需要获取 Firebug 检查的任何 DOM 元素的绝对坐标（相对于文档开头的左侧和顶部）。有这样的插件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:52:02.337

实际上，您不需要插件，只需要一些 JavaScript + 一些 Firebug 内部知识的知识。

您可以在[本文](http://www.quirksmode.org/js/findpos.html)中找到如何获取 DOM 元素的绝对坐标。每个 DOM 元素都具有`.offsetLeft .offsetTop .offsetParent`定义与其他 DOM 元素（offsetParent）相关的位置的属性。层次结构顶部的元素具有`offsetParent = null`. 给定一个元素，您可以遍历层次结构中的元素及其 offsetParents 以找到绝对坐标。

从该页面复制的代码：

```
var findpos = function findPos(obj) {
   var curleft = curtop = 0;
   if (obj.offsetParent) {
      do {
      curleft += obj.offsetLeft;
      curtop += obj.offsetTop;
      } while (obj = obj.offsetParent);
      return [curleft,curtop];
   }
} 
```

（将其粘贴到 Firebug 中，然后您就`findpos`可以在控制台中使用该功能）。

对于大多数最简单的情况，您将`offsetParent = <body>`拥有零偏移量（如屏幕截图中所示），因此您无需向 offsetLeft 和 offsetTop 添加任何内容。但是，如果发生相对定位，则必须遍历父母。

当您在 Firebug 中选择一个元素时，它就像`$0`在 Firebug 控制台中一样可用。

因此，将两者混合后，您可以发出屏幕截图中的命令：

![Firebug - 查找节点的绝对坐标](../Images/5c35ee4222ed56d1ff83818a0cd36e83.png)

轻松获得任何元素的绝对坐标。

我在上面粘贴的脚本应该在绝大多数情况下都可以使用。您可能还想阅读[这篇文章](http://www.greywyvern.com/?post=331)以获得更强大的功能。

# ios - 处理到 App Store 后立即下架

> ID：10904941
> 
> 赞同：34
> 
> 时间：2012-06-05T21:04:46.563
> 
> 标签：ios, app-store

我的应用程序之前已停止销售。更新通过后。我在 10 分钟内收到了 3 封电子邮件：1\. 正在处理到 App Store 2\. 准备出售 3\. 已下架

在 Ready for Sale 状态之后，状态立即更改为 Removed from Sale。我联系了苹果，她说一旦从 App Store 中删除了一个应用程序，将它返回到 App Store 是一个多步骤的过程。她让我等一下，我现在什么也做不了。然而，我等了一个多星期。

有人有这样的经历吗？你能告诉我你是怎么解决的吗？你等了多久才真正能在 App Store 上卖呢？你如何与苹果联系？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-06-05T22:48:39.233

当您没有为要销售的应用程序分配任何国家/地区时，就会发生这种情况。进入 iTunes Connect --> Your App --> Rights & Pricing --> 并确保您在那里设置了至少一个国家/地区。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2015-09-29T00:53:04.860

这发生在我身上，因为该应用程序没有可用的地区。

[![iTunes 中未设置可用性](../Images/c1157d966b3522c6cbd0ba126b0b21bd.png)](https://i.stack.imgur.com/8pwKe.png)

如果您启用一个或多个地区，应用程序会立即返回“准备销售”状态。

[![iTunes 中的可用性设置](../Images/0d36d1d4bb65a65b60b66f9dc18bdd4b.png)](https://i.stack.imgur.com/HdyNe.png)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-07-29T06:36:15.033

就我而言，我从应用商店中删除了以前的版本（1.1）并上传了新版本（1.2）

苹果一审核，状态就变成了“开发商下架”

我检查了“定价和可用性”，发现它被选择了“从销售中删除”而不是“在所有地区可用”，更正它并且我的应用状态立即更改为“准备销售”。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-11T12:56:30.737

不，这与定价无关。当应用程序被 Apple 删除并且您提交新的更正版本时。它将通过第一步批准，需要再次检查以查看已删除的问题是否已解决。我不确定需要多长时间。我现在也在等一个多星期。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-20T08:20:42.193

这可能会发生，因为您尚未将可用日期设置在当前日期之前。请在您的应用程序-> 权利和定价-> 可用日期中检查它。希望这对每个人都有帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-05T19:30:56.067

![](../Images/70a81f7b4584939ffdc89d3618a35e75.png)

确保选中“Cleared for Sale”

# twitter4j - 如何使用 Twitter4j 过滤来自 Twitter 用户流的转发和回复？

> ID：10904946
> 
> 赞同：1
> 
> 时间：2012-06-05T21:04:58.700
> 
> 标签：twitter4j, twitter-streaming-api

我正在使用 Twitter4j TwitterStream.user() 来读取经过身份验证的用户的时间线。我只对我的用户关注的用户的推文感兴趣。我从流中获得的大约 99% 的状态是我的用户不关注的用户的转发和回复。我通过维护我的用户关注列表并根据列表检查每个状态来过滤它们，此外我正在检查 status.getInReplyToStatusId 是否为零。它有效，但似乎效率很低，因为我读取的 99% 的数据随后被过滤掉了。twitter4j 有什么方法可以指示用户流只发送原始推文而不发送推文和回复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:50:48.413

似乎您可以通过参数过滤回复的推文，但我不确定它是否在 twitter4j 中实现。但是关于转推，我认为您必须手动过滤掉它们。

从用户流api：

> 用户流式传输消息
> 
> 消息类型
> 
> REST API 不返回一些流式消息。有关信息，请参阅流式消息类型。
> 
> 来自用户关注的帐户的数据
> 
> with 参数控制接收到的消息的类型。User Streams 的默认值为 with=followings，它提供有关用户和用户关注的数据（经过身份验证的用户关注的帐户）。with=user 的设置仅发送有关用户的事件，而不发送有关其关注者的事件。
> 
> 回复
> 
> 默认情况下，@replies 仅从相互关注者发送。可以使用replies=all 参数启用所有@replies by following。例如，如果 Alice 关注 Bob，但 Alice 没有关注 Carol，默认情况下，如果 Bob @replies Carol，Alice 不会看到这条推文。默认行为模仿 twitter.com 和 api.twitter.com 行为。如果应用程序希望显示所有@replies，或@replies 的过滤子集，请使用replies=all。
> 
> 直接消息
> 
> 直接消息仍然需要适当的权限。请参阅应用程序权限模型。

# c++ - 可以访问类成员函数的空指针

> ID：10904951
> 
> 赞同：1
> 
> 时间：2012-06-05T21:05:14.113
> 
> 标签：c++

> **可能重复：**
> [在 NULL 指针上访问类成员](https://stackoverflow.com/questions/669742/accessing-class-members-on-a-null-pointer)

一个非常愚蠢的问题，或者可能是我的概念疑问。

```
 #include <iostream>

    using namespace std;

    class A
    {
            public:
            void print()
            {
                    cout<<"Printing\n";
            }
    };

    int main()
    {
            A * a = NULL;
            a->print();
            return 0;
    } 
```

输出是：打印

指针（为NULL）如何`a`访问A类的成员函数。

请解释一下……这可能只是一个愚蠢的问题，但我的印象是 NULL 指针不会访问类的成员函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T21:06:25.650

`NULL`正如您在代码中所做的那样，取消引用指针是未定义的行为。*这种不确定性*的一种可能性是它可能会起作用。但它可能会在下一次崩溃，或者做一些完全出乎意料的事情。

由于您没有`this`在成员函数中使用隐式参数`print`，因此似乎`NULL`不需要*实际*取消引用此类指针。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T21:06:24.787

取消引用`NULL`会导致**未定义的行为**(UB)。UB 并不意味着“必须崩溃”或“必须做一些奇怪的事情”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T21:15:38.770

如前所述，是的，这是未定义的行为，但它起作用的原因是......

它是一个空指针，但仍然是定义的类型“A”，每次创建类的实例时它不会复制方法，它只是分配 ram 并使用新分配的地址调用构造函数方法。

调用该方法仍然可以工作，只要您的方法不使用任何类内部，而您的方法没有，但是如果您确实需要这样的功能，您显然应该使用静态方法，而不是如果您尝试访问 'this，编译器会抱怨' 或任何类内部成员。

如果你打破方法并检查'this'的值，你会发现它是NULL。

# c# - C#编译器类型推断内联方法调用和单独方法调用之间的区别

> ID：10904954
> 
> 赞同：1
> 
> 时间：2012-06-05T21:05:18.327
> 
> 标签：c#, .net, compiler-construction, type-inference

似乎 C# 编译器根据调用方法的方式不同地推断类型：

```
void Foo<T>() where T : Bar
{
   var instance = new T()
   {
      ID = 1
   }.
   ExtensionMethod();
} 
```

在这种情况下，编译器似乎推断出实例的类型是 Bar，因为我有一个声明 ExtensionMethod 的类 Bar。

```
void Foo<T>() where T : Bar
{
   var instance = new T()
   {
      ID = 1
   };
   instance.ExtensionMethod();
} 
```

在这种情况下，编译器推断实例的类型是 T，这也是我希望它在第一种情况下所做的事情。为什么会有这样的差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T21:18:02.263

在第一种情况下，您将方法调用的结果分配给实例。在第二种情况下，您丢弃调用的结果。相反，您分配“`new T`这是唯一的区别”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T21:25:19.713

根据[隐式类型局部变量](http://msdn.microsoft.com/en-us/library/bb384061.aspx)`var`中的关键字定义：

> var 关键字指示编译器从初始化语句右侧的表达式推断变量的类型

在您的情况下，在*右侧*，**不仅**有零件，还有一个函数调用，它返回 void。因此，事实证明是从函数调用返回的*推断*可分配给的类型。这会导致*编译器*发出关于一个事实的信号：`var`**`ctor`*`var``void`***

 *****无法将 void 分配给隐式类型的局部变量*****

# android - 如何获取使用相机拍摄的图像的图像路径？

> ID：10904957
> 
> 赞同：4
> 
> 时间：2012-06-05T21:05:32.187
> 
> 标签：android, image, path, camera

在我的应用程序中，您可以单击图像视图，它使您可以选择从 sd 卡中选择图像或使用相机拍摄新照片。我已经实现了从 sd 卡中选择图像的选项。现在我只剩下相机选项了。

我的问题：如何获取使用相机拍摄的任何新图像的图像路径？

您可以在下面找到我用来打开对话框窗口的代码以及我从 sd 卡获取图像路径的方式。

1.这是对话框的代码：

```
private void showImageDialog() {
    final String [] items = new String [] {"From Camera", "From SD Card"};
    ArrayAdapter<String> adapter = new ArrayAdapter<String> (this, android.R.layout.select_dialog_item,items);
    AlertDialog.Builder builder = new AlertDialog.Builder(this);

    builder.setTitle("Select Image");
    builder.setAdapter( adapter, new DialogInterface.OnClickListener() {
        public void onClick( DialogInterface dialog, int item ) {
            if (item == 0) {
                Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                File file = new File(Environment.getExternalStorageDirectory(),
                                    "tmp_avatar_" + String.valueOf(System.currentTimeMillis()) + ".jpg");
                mImageCaptureUri = Uri.fromFile(file);

                try {
                    intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, mImageCaptureUri);
                    intent.putExtra("return-data", true);

                    startActivityForResult(intent, PICK_FROM_CAMERA);
                } catch (Exception e) {
                    e.printStackTrace();
                }

                dialog.cancel();
            } else {
                Intent intent = new Intent();

                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);

                startActivityForResult(Intent.createChooser(intent, "Complete action using"), PICK_FROM_FILE);
            }
        }
    } );

    final AlertDialog dialog = builder.create();
    dialog.show();
} 
```

2.这就是从sd卡图像中获取图像路径的方法。

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == PICK_FROM_FILE || requestCode == PICK_FROM_CAMERA) {
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri);

            Log.v("IMAGE PATH====>>>> ",selectedImagePath);

            // Decode, scale and set the image.
            Bitmap myBitmap = BitmapFactory.decodeFile(selectedImagePath);
            Bitmap scaledBitmap = Bitmap.createScaledBitmap(myBitmap, NEW_WIDTH, NEW_HEIGHT, true);
            myBitmap.recycle();
            myBitmap = null;

            mImageView.setImageBitmap(scaledBitmap);
            mImageView.setTag(selectedImagePath);
        } 

    }
} 
```

# android - 解析一个json文件

> ID：10904958
> 
> 赞同：1
> 
> 时间：2012-06-05T21:05:33.770
> 
> 标签：android, json

我正在尝试将 json 解析到我的列表视图中。我不知道是什么问题？但我有一个例外告诉我名称必须是字符串并且在对象中必须是唯一的。

这是我的代码：

```
try {

            jsonString =  "{[{\"url\":\"www.200Chess.com\",\"price\":\"Free\",\"name\":\"200 Chess Opening\"},{\"url\":\"www.midgame.com\",\"price\":\"10$\",\"name\":\"Mid Game TacHcs\"},{\"url\":\"www.303checkmate.com\",\"price\":\"20$\",\"name\":\"303 Checkmate puzzles\"},{\"url\":\"www.303winning.com\",\"price\":\"30$\",\"name\":\"303 Winning Strategies\"},{\"url\":\"www.bibby.com\",\"price\":\"10$\",\"name\":\"Bobby Fusher Teaches Chess\"}]}";

            json= new JSONObject(jsonString);

            JSONArray jsonBook = json.getJSONArray("");

            for (int i=0; i<jsonBook.length();i++){

                Book book =new Book();

                JSONObject jsonAttributes = jsonBook.getJSONObject(i).getJSONObject("");

                Log.i("ListBooks", jsonAttributes.toString());

                book.name = jsonAttributes.getString(KEY_NAME);

                Log.i("ListBooks", book.name);

                book.price = jsonAttributes.getString(KEY_PRICE);

                book.url = jsonAttributes.getString(KEY_URL);

                books.add(book);

            }

        } catch (JSONException e) {

            e.printStackTrace();

        } 
```

我得到了这个例外：

```
06-05 21:59:42.283: W/System.err(541): org.json.JSONException: Names must be strings, but [{"url":"www.200Chess.com","name":"200 Chess Opening","price":"Free"},{"url":"www.midgame.com","name":"Mid Game TacHcs","price":"10$"},{"url":"www.303checkmate.com","name":"303 Checkmate puzzles","price":"20$"},{"url":"www.303winning.com","name":"303 Winning Strategies","price":"30$"},{"url":"www.bibby.com","name":"Bobby Fusher Teaches Chess","price":"10$"}] is of type org.json.JSONArray at character 361 of {[{"url":"www.200Chess.com","price":"Free","name":"200 Chess Opening"},{"url":"www.midgame.com","price":"10$","name":"Mid Game TacHcs"},{"url":"www.303checkmate.com","price":"20$","name":"303 Checkmate puzzles"},{"url":"www.303winning.com","price":"30$","name":"303 Winning Strategies"},{"url":"www.bibby.com","price":"10$","name":"Bobby Fusher Teaches Chess"}]}
06-05 21:59:42.283: W/System.err(541):  at org.json.JSONTokener.syntaxError(JSONTokener.java:446)
06-05 21:59:42.293: W/System.err(541):  at org.json.JSONTokener.readObject(JSONTokener.java:363)
06-05 21:59:42.293: W/System.err(541):  at org.json.JSONTokener.nextValue(JSONTokener.java:96)
06-05 21:59:42.293: W/System.err(541):  at org.json.JSONObject.<init>(JSONObject.java:154)
06-05 21:59:42.293: W/System.err(541):  at org.json.JSONObject.<init>(JSONObject.java:171)
06-05 21:59:42.293: W/System.err(541):  at tn.haythem.learnchess.ListBooks.getBooks(ListBooks.java:157)
06-05 21:59:42.293: W/System.err(541):  at tn.haythem.learnchess.ListBooks.onCreate(ListBooks.java:52)
06-05 21:59:42.293: W/System.err(541):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-05 21:59:42.293: W/System.err(541):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-05 21:59:42.303: W/System.err(541):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-05 21:59:42.303: W/System.err(541):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-05 21:59:42.303: W/System.err(541):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-05 21:59:42.313: W/System.err(541):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-05 21:59:42.313: W/System.err(541):  at android.os.Looper.loop(Looper.java:123)
06-05 21:59:42.313: W/System.err(541):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-05 21:59:42.313: W/System.err(541):  at java.lang.reflect.Method.invokeNative(Native Method)
06-05 21:59:42.313: W/System.err(541):  at java.lang.reflect.Method.invoke(Method.java:507)
06-05 21:59:42.313: W/System.err(541):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-05 21:59:42.313: W/System.err(541):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-05 21:59:42.323: W/System.err(541):  at dalvik.system.NativeStart.main(Native Method) 
```

任何人都可以告诉我我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T21:08:57.373

JSON 对象中的数组没有名称，这是无效的，例如它应该像这样开始：

```
"{\"thearrayname\":[{\"url\":\"www.200Chess.com\",\" ... 
```

或删除外部`{`并`}`直接将其解析为 JSONArray 例如：

```
[{\"url\":\"www.200Chess.com\",\" ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T07:21:23.957

您必须使用如下所示的格式创建 JSON。正是因为您的 JSON 文件结构不正确，您无法正确解析它。

正确格式：

```
{
    "an": [
        {
            "url": "www.200Chess.com",
            "price": "Free",
            "name": "200ChessOpening"
        }
    ]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T21:08:45.617

尝试将 JSON 粘贴到[JSONLint.com](http://jsonlint.com/)以获得一个不错的 gui 语法检查器

# php - Symfony2，如何改变环境？

> ID：10904960
> 
> 赞同：10
> 
> 时间：2012-06-05T21:05:41.290
> 
> 标签：php, symfony

我已经阅读了很多关于 symfony2 的 clear cache 命令的信息，但我有这个问题：

是`php app/console cache:clear --env=prod`使用`--env`，更改环境还是仅清理该环境的缓存？

如果只清除该环境的缓存，那么 app.php 中的这一行是什么意思：

```
$kernel = new AppKernel('prod', false); 
```

我想当我想使用 Symfony2 生产环境时，我必须将该行更改为

```
$kernel = new AppKernel('prod', true); 
```

我在正确的位置吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-05T21:22:54.743

[Symfony\Component\HttpKernel\Kernel](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/Kernel.php)的两个构造函数参数是`$environment`和`$debug`。

因此，为了直接回答您的问题，**app.php**已经使用了生产环境。你会注意到**app_dev.php**像这样实例化内核

```
$kernel = new AppKernel('dev', true); 
```

因此，您传递给内核构造函数的环境名称映射到您将在控制台命令中使用的环境名称（即`--env`）。

这对你来说清楚吗？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-05T23:04:05.773

要改变环境，你必须改变你的前端控制器。Symfony2 默认提供三个环境和一个前端控制器，每个环境都有一个特定的配置文件 >[查看更多](http://symfony.com/doc/current/cookbook/configuration/environments.html#different-environments-different-configuration-files)

当您为特定环境执行 cache:clear 命令时，它只会清除给定环境的缓存。要改变你的环境，你只需要改变你的前端控制器（app.php / app_dev.php / app_test.php）

您还可以[创建具有特定配置的新环境](http://symfony.com/doc/current/cookbook/configuration/environments.html#creating-a-new-environment)

# android - 一定时间后无限调用某个函数

> ID：10904968
> 
> 赞同：1
> 
> 时间：2012-06-05T21:06:07.163
> 
> 标签：android, multithreading, sleep, repeat, period

我试过time&timertask、handler&runnables，没有什么能让我的函数在一定时间后被调用。请帮我摆脱这个。

```
when = System.currentTimeMillis();
t1 = new Timer();
tt = new TimerTask(){@Override public void run(){ systemClick();}};
t1.scheduleAtFixedRate(tt, when+interval, interval); 
```

和这个：

```
final Handler myHandler = new Handler();

    Runnable runnableforadd  = new Runnable() 
    {
        public void run() 
        {
            systemClick();              
            myHandler.postDelayed(this, interval);
        }   
    };
    myHandler.postDelayed(runnableforadd, when + interval); 
```

我在 onCreate() 中执行的第一个和第二个。`systemClick()`甚至一次都没有被调用（我已经把 Toast 放在那里）。我不太了解线程。

`systemClick`- 是一个函数，系统执行点击我的按钮 -`myButton.performClick()`在那里被调用（以及其他函数）。

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:17:58.190

延迟时间的值应该是您希望方法等待的值。例如，如果您想在等待 1 分钟后调用您的方法，则传递 60000。

```
myHandler.postDelayed(runnableforadd, 60000); 
```

目前，您在 System.currentTimeMillis() 的延迟时间中添加“等待”，这意味着您的方法将在大约“1338900000000”毫秒后被调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T21:14:40.077

你试过了吗[`AlarmManager`](http://developer.android.com/reference/android/app/AlarmManager.html)？AlarmManager 将帮助您在一段时间后执行您的代码。

# c# - 所有大写单词的正则表达式，直到小写

> ID：10904974
> 
> 赞同：-1
> 
> 时间：2012-06-05T21:06:26.490
> 
> 标签：c#, regex

我有这样一句话：

```
Name: JOHN J. SMITH Sometag: 
```

我将如何抓住`JOHN J SMITH`零件？

`Sometag`并不总是相同的，所以它更像是获取所有全大写的单词，直到一个不是。

更新

`"[A-Z. ]*"`返回 JOHN J. SMITH S
`"[A-Z. ]*\b"`什么也不返回
`"\b[A-Z. ]*\b"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T21:08:29.493

试试这个

```
[A-Z. ]*\b 
```

让我知道事情的后续

你可以用这个更完整

```
[\p{Lu}\p{M}\p{Z}\p{N}\p{P}\p{S}]*\b 
```

但它是一口

```
Match a single character present in the list below «[\p{Lu}\p{M}\p{Z}\p{N}\p{P}\p{S}]*»
   Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
   A character with the Unicode property “uppercase letter” (an uppercase letter that has a lowercase variant) «\p{Lu}»
   A character with the Unicode property “mark” (a character intended to be combined with another character (e.g. accents, umlauts, enclosing boxes, etc.)) «\p{M}»
   A character with the Unicode property “separator” (any kind of whitespace or invisible separator) «\p{Z}»
   A character with the Unicode property “number” (any kind of numeric character in any script) «\p{N}»
   A character with the Unicode property “punctuation” (any kind of punctuation character) «\p{P}»
   A character with the Unicode property “symbol” (math symbols, currency signs, dingbats, box-drawing characters, etc.) «\p{S}»
Assert position at a word boundary «\b» 
```

或者更短

```
\P{Ll}*\b 
```

**更新 1**

编辑后我会使用这个

```
Name: (\P{Ll}*)[ ] 
```

所需的匹配将在第 1 组中。请注意，我在最后添加了一个 [ ] 以表示一个空格。如果需要，您可以将此字符类转换为空格。

在 C# 中，这变成

```
string resultString = null;
try {
    Regex regexObj = new Regex(@"Name: (\p{Ll}*)[ ]");
    resultString = regexObj.Match(subjectString).Groups[1].Value;
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T21:52:35.400

不能使用否定的向前看并找到不跟在小写字母后面的大写字母吗？

(([AZ.])(?![az:]))+

`String caps=Regex.Match("Name: JOHN J. SMITH Sometag: ","(([A-Z. ])(?![a-z:]))+").ToString()`

# objective-c - 访问 2D NSMutableArray Objective-C

> ID：10904977
> 
> 赞同：0
> 
> 时间：2012-06-05T21:06:36.390
> 
> 标签：objective-c, nsmutablearray

我目前正在尝试在 2D NSMutableArray 中创建和访问数据。我知道我必须将数组嵌套到数组中。问题是我无法访问不同的一维数组。

这是初始化二维数组的代码，所有数组都是 NSMuttableArray ：

```
if(simSections == nil  || [simSections count] == 0) {
    simSections = [[NSMutableArray alloc] init];

    for (int i = 0; i < 8 ; i++) {
        simData[i] = [[NSMutableArray alloc] init];
        [simSections addObject:simData[i]];
    }
} 
```

现在我正在尝试在第一个数组的第一个空间中添加对象：

```
[[simSections objectAtIndex:0] addObject:[NSString stringWithString:@"Test"]]; 
```

我收到此错误，但我不明白为什么*simSections*数组会为空，因为我添加了*simData*数组。

> *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[NSMutableArray objectAtIndex:]: index 0 beyond bounds for empty array”

你有什么主意吗 ？我会非常喜欢你的帮助，

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:12:01.520

检查您的 simSections 数组。好像是空的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T08:29:58.413

您的填充代码对`simSections`我来说似乎是正确的。那么，我怀疑问题在于实际上并没有为正在执行的对象调用该代码`[simSections objectAtIndex:0]`。

将日志记录添加到两段代码中。记录`self`并`simSections`确保它们与您期望的对象相同。您可能希望使用“%p”格式说明符而不是“%@”进行记录，因为您实际上只是对它们的指针值感兴趣。

# ruby-on-rails - GitHub 错误：未找到存储库。致命：远端意外挂断

> ID：10904978
> 
> 赞同：1
> 
> 时间：2012-06-05T21:06:36.737
> 
> 标签：ruby-on-rails, git, github, terminal

我正在尝试遵循 Michael Hartl 的 Ruby on Rails 教程[http://ruby.railstutorial.org/chapters/beginning#fnref:1.16](http://ruby.railstutorial.org/chapters/beginning#fnref:1.16)，但我遇到了一个错误。我在 GitHub 上注册并发布了一个新的 SSH 密钥并创建了一个新的存储库。但是当我尝试将我的存储库推送到 GitHub 时，我收到以下错误：

```
ERROR: Repository not found.
fatal: The remote end hung up unexpectedly 
```

有任何想法吗？

以下是我在终端中输入的一些命令：

```
Parkers-MacBook-Pro:.ssh ppreyer$ git remote add origin git@github.com:ppreyer/first_app.git
Parkers-MacBook-Pro:.ssh ppreyer$ git push -u origin master
ERROR: Repository not found.
fatal: The remote end hung up unexpectedly – ppreyer 6 mins ago 
```

以下是`git remote -v`显示的内容：

```
Parkers-MacBook-Pro:.ssh ppreyer$ git remote -v
github    git@github.com:ppreyer/first_app.git (fetch)
github    git@github.com:ppreyer/first_app.git (push)
origin    git@github.com:ppreyer/first_app.git (fetch)
origin    git@github.com:ppreyer/first_app.git (push) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T22:02:50.513

您的存储库名为“MyFirstRailsApp”，但您似乎已将其删除。这就是你错误的原因。

# mechanicalturk - 批准机械土耳其人参与者的好方法？

> ID：10904981
> 
> 赞同：0
> 
> 时间：2012-06-05T21:06:51.170
> 
> 标签：mechanicalturk

有没有人有一个好的方法来批准参加调查猴子调查的人，以及通过机械土耳其人招募的人？我通过提出明显答案的问题来过滤掉那些在调查期间没有注意的人——如果人们有“n”个错误，我会将他们排除在付款之外。

从 Mechanical turk 下载 .csv 后，我在 .csv 末尾粘贴了两列 MTurk Id 和名称旁边的 1 或 0，表明他们是否会付款。如何编写一个函数来搜索包含 MTurk ID 的两列（.csv 中的一列和我粘贴的一列），然后返回 MTurk ID 旁边是 1 还是 0？他会让拒绝/批准变得容易得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:12:05.343

我假设您正在使用电子表格程序，因为您提到“添加两列”？您为什么不按其中包含 1 或 0 的列进行排序，以将已批准的土耳其人 ID 组合在一起？

以下是如何使用 vlookup 完成此操作：

假设您在 A 和 B 列中有土耳其 ID 列表和 1/0 批准代码（A 包含土耳其 ID，B 包含 1 或 0）。还假设您在 C 列中有要测试的 ID，并且您要将 vlookup 测试的结果放在 D 列中：

```
  A - 土耳其人 ID B - 批准 C - 测试 ID D - 结果
  ------------ ------------ -------------- ----------
1 ABC12345 0 DEF46253
2 ERF78878 1 HFH36251
3 HFH36251 1 ERF78878
4 DEF46253 0 ABC12345

```

将单元格D1的公式设置为=VLOOKUP(C1,$A$1:$B$4,2,FALSE)

将其粘贴到 D2..D4 中（显然您的列表会更大）

它将在 Col A 中找到 Turk ID，并在 Col D 中填写相应的 Approval 值。

如果您想知道 vlookup 函数的参数是什么 - 第一个是要查找的值（您要检查的 ID），第二个是要检查的整个值范围（使用前面的 $单元格引用使它们成为绝对值，因此当您将公式粘贴到新单元格时它们不会更改），第三个是要提取的范围的列（范围的第 2 列是批准号），最后一个参数是FALSE 强制 ID 与 ID 完全匹配）。

希望有帮助。

# c++ - 如何从 Windows 控制台读取 utf-8 字符？似乎 ReadConsoleOutputCharacter() 无法处理它们

> ID：10904983
> 
> 赞同：0
> 
> 时间：2012-06-05T21:07:03.830
> 
> 标签：c++, winapi, utf-8, console, mingw

这是隔离问题的代码：

```
#include <iostream>
#include <windows.h>

using namespace std;

int main() {
  SetConsoleOutputCP(CP_UTF8);
  _wsystem(L"echo pure ascii, naïveté");
  COORD pos = {0,0};

  TCHAR* attempt1 = new TCHAR[14];
  DWORD charnum1;
  ReadConsoleOutputCharacter(GetStdHandle(STD_OUTPUT_HANDLE), attempt1, 14, pos, &charnum1);
  wcout << endl << "charnum1: " << charnum1 << ", attempt1: " << attempt1 << endl;
  wcout << "GetLastError: " << GetLastError();

  TCHAR* attempt2 = new TCHAR[16];
  DWORD charnum2;
  ReadConsoleOutputCharacter(GetStdHandle(STD_OUTPUT_HANDLE), attempt2, 16, pos, &charnum2);
  wcout << endl << "charnum2: " << charnum2 << ", attempt2: " << attempt2 << endl;
  wcout << "GetLastError: " << GetLastError();

  system("pause > nul");
} 
```

输出是：

```
pure ascii, naïveté

charnum1: 14, attempt1: pure ascii, na
GetLastError: 0
charnum2: 0, attempt2: x >
GetLastError: 0 
```

第一次尝试正常，但是当函数尝试使用非 ASCII 字符读取位置时，它什么也不返回，也没有指示任何错误。现在要做什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T00:18:23.357

警告：在我的系统上，CP_UTF8 不可用，因此当我运行您的代码时，`echo`命令会导致“系统无法写入指定的设备”。

但是，如果我删除`SetConsoleOutputCP()`调用并将其保留在默认代码页 437 中，我会正确显示字符串。

请注意，有单独的读取和写入代码页。我尝试了 437、850、1252 和 28591 的各种组合——后两个或多或少映射到 Unicode 的前 255 个代码点。如果 CP_UTF8 对您有效，请通过调用`SetConsoleCP(CP_UTF8)`.

请注意，`ReadConsoleOutputCharacter()`不会在最后一个读取字符之后放置空值，因此当您输出该 TCHAR 数组时，您的代码中会出现问题：您无法保证它是以空值结尾的并且它可能会崩溃。（另外，您不会删除分配的 TCHAR 数组。）所以，我将分配行更改为：

```
TCHAR attempt1[] = L"____________________";  // 20 underscores 
```

其中（没有调用`SetConsoleOutputCP()`）产生了这个：

```
charnum1: 14, attempt1: pure ascii, na______
charnum2: 16, attempt2: pure ascii, na∩v____ 
```

第二行中倒数第二个字形不是“n”，而是代码页 437 中的字符 0xEF。“ï”是 Unicode 中的字符 0xEF。这里发生的是，从控制台读取了正确的代码点 (0xEF)，但流输出继续使用 437 代码页。[流输出根据流的语言环境设置](http://www.cplusplus.com/reference/iostream/ios_base/imbue/)选择其字符，而不是在控制台中设置的代码页。

我不知道为什么当控制台的 READ 代码页仍然是 437 时从控制台读取所需的代码点值。我也很困惑为什么，如果我`SetConsoleOutputCP(1252)`（或 28591），`echo`命令的输出看起来像是在使用 CP 437 ：`pure ascii, na∩vitΘ`

# jquery - jQuery验证自定义消息不起作用

> ID：10904985
> 
> 赞同：0
> 
> 时间：2012-06-05T21:07:10.413
> 
> 标签：jquery, jquery-validate

我无法获得适用于 jQuery 验证插件的自定义错误消息。我正在使用 jQuery 1.7.2 和 jquery 验证插件 1.9.0。

我的表格很简单：

```
<form id="registrationform">
  <label for="rid">User Id</label><br/>
  <input id="rid" type="text" class="required"/><br/>
  <label for="remail">Email</label><br/>
  <input id="remail" type="text" class="required email"/>
</form> 
```

我的 javascript 很简单：

```
$(document).ready(function() {
    $("#registrationform").validate({
        rules: {
            rid : {
                required : true
            },
            remail: {
                required : true,
                email : true
            }
        },
        messages: {
            rid : {
                required : "id can not be empty"
            },
            remail: {
                required: "email can not be empty",
                email : "enter a valid email"
            }
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T21:52:07.843

听起来很疯狂，这是通过将 name 属性添加到每个输入控件来解决的。

```
<form id="registrationform">
  <label for="rid">User Id</label><br/>
  <input id="rid" name="rid" type="text" class="required"/><br/>
  <label for="remail">Email</label><br/>
  <input id="remail" name="remail" type="text" class="required email"/>
</form> 
```

这是我的[jsFiddle](http://jsfiddle.net/9um6X/3/)来证明这一点。

# c++ - boost::call_traits - 为什么 gcc 为此给出错误？

> ID：10904986
> 
> 赞同：5
> 
> 时间：2012-06-05T21:07:10.720
> 
> 标签：c++, gcc, boost, c++11

**例子：**

```
#include <iostream>
#include <boost/call_traits.hpp>
#include <type_traits>

boost::call_traits<int>::param_type f()
{
        return 1;
}

int main()
{
        std::cout << std::boolalpha;
        std::cout <<
        std::is_const<boost::call_traits<int>::param_type>::value
        << std::endl; // true
        std::cout << std::is_const<decltype(f())>::value << std::endl; // false

} 
```

**问题：**

除非，我做错了什么，我认为我应该得到两者，但后者的`true`输出是 gcc 4.7.0 。`false`有什么我想念的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T21:11:35.413

非类类型的右值永远不是 const 限定的。只有类类型的右值可以是 const 限定的。

因此，即使函数`f`被声明为返回 a `const int`，并且即使函数的类型`f`是`const int()`，调用表达式`f()`也是类型 (non-const) 的右值`int`。

（在[新的 C++11 表达式类别分类法](https://stackoverflow.com/questions/3601602/what-are-rvalues-lvalues-xvalues-glvalues-and-prvalues)中，调用表达式`f()`是类型的*纯右*`int`值。同样的规则适用：C++11 §3.10/4 指出“非类纯右值始终具有 cv 非限定类型。”）

# c# - Web Service Confusion - IIS - 如何获取网站的当前目录和权限问题

> ID：10904987
> 
> 赞同：0
> 
> 时间：2012-06-05T21:07:14.993
> 
> 标签：c#, .net, web-services, iis, .net-3.5

我有一些新手 Web 服务/Windows 权限问题，因为我过去通常是 LINUX/嵌入式开发人员。

***默认情况下，在服务器上执行的 Web 服务可以访问哪些目录？***

我问是因为我试图写入 C:\ 并遇到访问冲突。我有点假设我会在这种情况下，但我假设 Web 服务可以默认写入和读取文件系统的某些区域，对吗？或者它只是当前的工作目录？

****如何授予 Web 服务权限以查看它没有默认访问权限的新目录？****

这是 C# - ASMX - .NET 3.5 - IIS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:21:18.270

WebService 实际上并没有任何关联的访问控制与之关联（在某种意义上）。但是，它与用于运行应用程序的用户帐户的访问控制相关联。默认情况下，这通常是一些具有有限权限的内置用户帐户。

> IIS 使用许多内置的 Windows 帐户，以及特定于 IIS 的帐户。出于安全原因，您应该了解不同的帐户及其默认用户权限。更改工作进程的标识以使其作为具有高级访问权限的帐户（例如 LocalSystem 用户帐户）运行可能存在安全风险。

在此处查看可能的用户帐户列表：http: [//www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/3648346f-e4f5-474b-86c7-5a86e85fa1ff.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/3648346f-e4f5-474b-86c7-5a86e85fa1ff.mspx?mfr=true)

如果您启用了**匿名身份验证**，您通常可以检查其设置以查看正在使用哪个帐户来运行 Web 服务。（根据您使用的 IIS 版本，单击编辑应该可以查看默认用户帐户）

找到帐户后，通常您必须明确授予它对您要授予其访问权限的文件夹（读取和写入）的权限。默认用户帐户的访问权限通常非常有限（并且有充分的理由）。**您可以在 Windows 文件系统上任何文件夹的属性的安全**选项卡上授予权限（属性->安全）

If you're using **Windows Authentication**, then you should have the same access rights as the authenticated user using the application as long as the resources are local to the IIS server.

# objective-c - Objective-C 库 - 不能形成对类实例的弱引用

> ID：10904990
> 
> 赞同：11
> 
> 时间：2012-06-05T21:07:16.920
> 
> 标签：objective-c, osx-lion

我目前正在使用用于 Objective-C 的 XMPP 库，并且正在使用“桌面”示例代码。

它可以正常登录；但是，当我打开一个新聊天或有人向我发送消息时，它会崩溃。

这似乎是哪里出了问题：

```
XMPPStream[11678:1b03] RECV: 
2012-06-05 15:03:59:379 XMPPStream[11678:1b03] RECV: 
2012-06-05 15:03:59:382 XMPPStream[11678:403] RosterController: xmppRosterDidChange:
2012-06-05 15:03:59:387 XMPPStream[11678:403] RosterController: xmppRosterDidChange:
2012-06-05 15:04:01:900 XMPPStream[11678:403] tableView:shouldEditTableColumn:"jid" row:0
2012-06-05 15:04:01:900 XMPPStream[11678:403] user: 
objc[11678]: cannot form weak reference to instance (0x7fcd4a498930) of class ChatController 
```

和

```
objc[11998]: cannot form weak reference to instance (0x7f853bd17c70) of class ChatController
(lldb) 
(lldb) 
```

“不能形成对实例的弱引用……ChatController 类”是什么意思？你们知道我该如何解决吗？我在 Snow Leopard 中使用了这个代码的旧版本，它成功了，Lion 把我搞砸了！

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-05T21:12:49.203

翻看[Mike Ash 的博客](http://www.mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html)，发现了一段有趣的段落：

> ARC 对弱引用归零的实现需要 Objective-C 引用计数系统和归零弱引用系统之间的密切协调。这意味着任何覆盖保留和释放的类都不能成为归零弱引用的目标。虽然这并不常见，但一些 Cocoa 类，如 NSWindow，会受到这种限制。幸运的是，如果您遇到其中一种情况，您会立即知道，因为您的程序将崩溃并显示如下消息：
> 
> ```
> objc[2478]: cannot form weak reference to instance (0x10360f000) of class NSWindow 
> ```
> 
> 如果您确实必须对此类类进行弱引用，则可以使用 __unsafe_unretained 限定符代替 __weak。

你在你的应用程序中打开了 ARC 吗？如果你把它关掉，你会得到更好的结果吗？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-12-05T10:18:51.913

在我的项目中（作为一个错误），对`self`in的引用很弱`dealloc`（这是一个单独的方法，调用以清除使用的资源）。使用对该对象的一个​​属性的弱引用（仅捕获对资源的引用）解决了这个问题。

在`dealloc`.

# 永远不要这样写：

```
- (void) dealloc
{
    [self freeUsedResource];
}

- (void) freeUsedResource
{
    __weak MyClass *weakSelf = self;
    dispatch_async(self.queue, ^{

        [weakSelf.usedResource freeUsedMemory];
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T07:11:20.160

请记住，您需要评论两个地方。

```
@interface GCDMulticastDelegateNode : NSObject
{
//#if __has_feature(objc_arc_weak)
//__weak id delegate;
//#else
__unsafe_unretained id delegate;
//#endif

dispatch_queue_t delegateQueue;
 }

 - (id)initWithDelegate:(id)delegate delegateQueue:(dispatch_queue_t)delegateQueue;

 //#if __has_feature(objc_arc_weak)
 //@property (/* atomic */ readwrite, weak) id delegate;
 //#else
 @property (/* atomic */ readwrite, unsafe_unretained) id delegate;
 //#endif

 @property (nonatomic, readonly) dispatch_queue_t delegateQueue;

 @end 
```

# c# - asp.net c# gridview 按钮

> ID：10904991
> 
> 赞同：1
> 
> 时间：2012-06-05T21:07:18.940
> 
> 标签：c#, asp.net, button, gridview

我无法让 gridview 的按钮列执行任何操作。我正在使用 DirectoryInfo 对象来获取文件的详细信息。我将文件名和创建日期放入 gridview 列中。第三列是按钮列。我已设置 datakeys(Name, CreationTime)，将按钮列的 commandName 命名为“sendcommand”。我想将文件名发送到另一个页面。我有这个 RowCommand 事件的代码：

```
protected void gvFiles_RowCommand(object sender, System.Web.UI.WebControls.GridViewCommandEventArgs e)
{

    if (e.CommandName == "sendcommand")
    {

        int index = Convert.ToInt32(e.CommandArgument);

        string fileID = ((GridView)sender).DataKeys[index]["Name"].ToString();
        Response.Redirect("irMain.aspx?@filename=" + fileID); 
    }
} 
```

什么都没有发生，除了我认为的回发。我该怎么做呢？

```
<asp:GridView ID="gvFiles" runat="server" Font-Name="Verdana" Font-Names="Verdana" 
        Width="401px" AutoGenerateColumns="False" BackColor="White" 
        BorderColor="Black" BorderStyle="Ridge" BorderWidth="2px" 
        DataKeyNames="Name,CreationTime" 
        >
        <Columns>
            <asp:HyperLinkField AccessibleHeaderText="File Name" 
                DataNavigateUrlFields="Name" DataNavigateUrlFormatString="~\Assets\reports\{0}" 
                DataTextField="Name" HeaderText="File Name" >

                <HeaderStyle BackColor="#0033CC" ForeColor="White" />
            </asp:HyperLinkField>
            <asp:BoundField AccessibleHeaderText="Date" DataField="CreationTime" 
                DataFormatString="{0:d}" HeaderText="Date">
                <HeaderStyle BackColor="Blue" ForeColor="White" />
            </asp:BoundField>

            <asp:ButtonField ButtonType="Button" Text="DO Stuff" CommandName="sendcommand" 
                HeaderText="WHAT?!" />

        </Columns>

        <AlternatingRowStyle BackColor="#6699FF" />

    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T21:27:24.047

您必须[`OnRowCommand`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.onrowcommand.aspx)在 ASPX 中将属性添加到您的 GridView，否则 GridView 不知道在您对其执行命令时要调用什么方法。

AFAIK 这是一个完全可选的属性，不是通过设计器生成的，因此您必须在要使用它时手动添加它。

# android - 如何访问活动信息

> ID：10904993
> 
> 赞同：0
> 
> 时间：2012-06-05T21:07:26.920
> 
> 标签：android, android-intent

我是 Android 初学者，所以如果这个问题听起来很傻，请原谅。我有一个应用程序的想法，通过检测特定的前向手机动作手势，可以将智能手机上打开的 youtube 视频或网页传输到笔记本电脑屏幕。但是要编写这样的程序，我意识到我需要访问浏览器网页或 youtube 应用程序正在播放的视频 URL。通过一些初步研究，在我看来，Android 系统并没有保留该信息。我对么？

在我看来，最终解决方案是编写自己的浏览器，或者增强现有的开源浏览器。我研究了通过我的程序访问手机上临时文件的可能性，但我猜位置 /data/data 似乎只有 root 才能访问。我还打算将我的应用程序作为后台服务运行，以便以后可以将这个想法扩展到其他地方，例如以类似的方式在笔记本电脑上传输和打开 PDF 文件等。有没有办法让我可以从正在运行的应用程序访问类似的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:37:59.757

要显示 youtube 视频，请查看此视频： [http ://code.google.com/p/android-youtube-player/](http://code.google.com/p/android-youtube-player/)

另外，将 url 单独传输到其他设备而不是发送整个视频不是更容易吗？你可以通过多种方式做到这一点：蓝牙、wifi、二维码、usb、莫尔斯码……可能性是无数的。

关于访问其他应用程序数据，该应用程序必须以某种方式向您提供数据，因为所有应用程序都相互保护（使用沙盒）。对于 youtube ，您可以“收听” youtube url（通过意图过滤器），以允许用户选择您的应用程序而不是 youtube 应用程序（或任何其他收听它的应用程序）。

关于 /data/data ，这是正确的，只有根设备可以访问它，或者如果您所做的只是访问自己的文件夹（即 /data/data/YOUR_APP_PACKAGE_NAME），则可以访问您自己的应用程序。您也可以在模拟器上访问此文件夹.

根您的设备也很容易。即使是新手用户也可以通过第三方应用程序进行操作。这是在 Galaxy S 和 Galaxy S2 上都对我有用的东西： [http ://www.unlockroot.com/](http://www.unlockroot.com/)

# ruby - 截断、事务和删除数据库策略的区别

> ID：10904996
> 
> 赞同：42
> 
> 时间：2012-06-05T21:07:48.050
> 
> 标签：ruby, database, testing, rspec

使用 Rspec 时，截断、事务和删除数据库策略有什么区别？我找不到任何解释这一点的资源。我阅读了 Database Cleaner 自述文件，但它没有解释它们各自的作用。

为什么我们必须对 Capybara 使用截断策略？测试时我必须清理我的数据库还是可以禁用它。我不明白为什么我应该在每个测试用例之后清理我的数据库，这不会减慢测试速度吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-06-05T22:52:31.010

数据库清理策略参考数据库术语。即这些术语来自（SQL）数据库世界，因此通常熟悉数据库术语的人会知道它们的含义。

下面的示例引用 SQL 定义。`DatabaseCleaner`但是也支持其他非 SQL 类型的数据库，但通常定义相同或相似。

**删除**

这意味着使用 SQL`DELETE FROM`语句清理数据库表。这通常[比截断慢](https://dba.stackexchange.com/questions/30325/delete-vs-truncate)，但[可能有其他优点](https://stackoverflow.com/a/12900557/823617)。

**截断**

这意味着使用该`TRUNCATE TABLE`语句清理数据库表。这将立即清空表，而不会删除表结构本身或单独删除记录。

**交易**

这意味着使用与回滚先前数据库操作序列`BEGIN TRANSACTION`相结合的语句。`ROLLBACK`将其视为数据库的“撤消按钮”。我认为这是最常用的清理方法，并且可能是最快的，因为更改不需要直接提交给数据库。

示例讨论：[Rspec, Cucumber: best speed database clean strategy](https://stackoverflow.com/questions/5378568/rspec-cucumber-best-speed-database-clean-strategy)

**Capybara 截断策略的原因**

[在Capybara 文档](https://github.com/jnicklas/capybara)中找到了最好的解释：

```
# Transactional fixtures do not work with Selenium tests, because Capybara
# uses a separate server thread, which the transactions would be hidden
# from. We hence use DatabaseCleaner to truncate our test database. 
```

**清洁要求**

您不必在每个测试用例之后清理数据库。但是，您需要注意这可能产生的副作用。即，如果您在一个步骤中创建、修改或删除某些记录，其他步骤是否会受此影响？

通常 RSpec 运行时会打开事务装置，因此在运行 RSpec 时您永远不会注意到这一点 - 它只会自动为您保持数据库清洁：

[https://www.relishapp.com/rspec/rspec-rails/v/2-10/docs/transactions](https://www.relishapp.com/rspec/rspec-rails/v/2-10/docs/transactions)

# windows-8 - 使用 HttpClient 进行编码

> ID：10904999
> 
> 赞同：1
> 
> 时间：2012-06-05T21:08:16.797
> 
> 标签：windows-8, .net-4.5

我在 Windows 8 中使用 HttpClient 类。在 Windows Phone 中，我将 WebClient 类与编码结合使用以获得正确的编码。

```
WebClient xml = new WebClient();
xml.Encoding = Encoding.GetEncoding("ISO-8859-1"); 
```

在 Windows 8 中，它看起来像这样：

```
HttpClient xml = new HttpClient();
HttpResponseMessage response = await xml.GetAsync(uri);                    
responsetext = await response.Content.ReadAsStringAsync(); 
```

如何添加编码以支持德语（变音符号）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T23:13:02.663

我现在没有时间测试，但是您是否尝试过使用[HttpContent.ReadAsByteArrayAsync](http://msdn.microsoft.com/en-us/library/system.net.http.httpcontent.readasbytearrayasync%28VS.110%29.aspx)方法（而不是 ReadAsStringAsync）并将生成的 byte[] 分别编码为 ISO-8859-1？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-27T20:57:52.233

将 ReadAsStringAsync 更改为 ReadAsBufferAsync 并使用所需编码解析结果

```
var buffer = await response.Content.ReadAsBufferAsync();
byte [] rawBytes = new byte[buffer.Length];
using (var reader = DataReader.FromBuffer(buffer))
{
    reader.ReadBytes(rawBytes);
}

var res = Encoding.UTF8.GetString(rawBytes, 0, rawBytes.Length); 
```